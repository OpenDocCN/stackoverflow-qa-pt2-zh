# StackOverflow 问答 12566000-12566999

# java - 记住秋千中的窗户位置

> ID：12566001
> 
> 赞同：9
> 
> 时间：2012-09-24T13:25:10.910
> 
> 标签：java, swing, user-interface, persistence

我有一个非常大的 Swing 应用程序，我想让它记住所有窗口、jframe 等的大小。因此，如果用户根据自己的喜好调整窗口大小，下次窗口看起来完全一样。

我是否有更好的选择来解决它，但在[Preferences](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html)中手动写入每个窗口的位置/大小？有什么方便的方法来存储 JTable 中的列顺序吗？可能是一些框架？只是不想写样板。

不幸的是，整个大型应用程序的序列化不是一种选择。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T15:10:21.070

> 不，没有。不要忘记写主 JFrame 的边界（位置/大小）。

并且在恢复窗口位置后不要忘记检查该位置是否真的在显示的桌面区域中。屏幕配置可能会在应用程序运行之间发生变化（例如，当用户断开笔记本电脑与桌面显示器的连接时）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T14:58:38.860

> 有比将每个窗口的位置/大小写在中更好的选择`Preferences`吗？

不，没有。不要忘记写 main 的边界（位置/大小）`JFrame`。您可以将参数写入 XML 文件而不是首选项文件，但这是一个实现细节。

> 有什么方便的方法可以将列的顺序存储在 a 中`JTable`吗？

将列名和位置写入您的首选项文件。

虽然此任务很常见，但此任务的实现取决于您要从 GUI 中保存的内容。

我保存这些 GUI 参数的方法是创建一个模型类，其中包含您有兴趣保存的所有边界和其他参数。我会读取一个包含这些参数的 XML 文件并填充模型类中的字段。如果没有文件，我会设置默认值。

GUI 将使用模型类中的字段来构建 GUI。当用户修改 GUI 时，我将使用新值更新模型类。

当用户关闭 GUI 时，我会将模型类写入 XML 文件。

我更喜欢使用 XML 文件而不是属性文件，因为它更容易查看模型的结构，并且我发现当 GUI 更改时 XML 文件更容易修改。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-24T18:59:03.480

这是一个开始。以下代码将找到最顶层的容器并将所有子组件的边界保存到首选项文件中，然后可以使用该首选项文件进行恢复。这可能无法处理所有情况，但它适用于我的应用程序。[可以在此处跟踪](https://github.com/DeegC/zeidon-joe/blob/1.0.7/object-browser/src/main/java/com/quinsoft/zeidon/objectbrowser/WindowBoundsRestorer.java)未来的变化。

```
public class WindowBoundsRestorer
{
    private final String filename;
    private Properties properties;

    public WindowBoundsRestorer( String filename )
    {
        this.filename = filename;
    }

    private void setBounds( String key, Component c )
    {
        key = key + c.getName();

        String position = properties.getProperty( key );
        if ( c.getName() != null && ! StringUtils.isBlank( position ) )
        {
            String[] nums = position.split( "," );
            c.setBounds( Integer.parseInt( nums[0] ), Integer.parseInt( nums[1] ),
                         Integer.parseInt( nums[2] ), Integer.parseInt( nums[3] ) );
        }

        if ( c instanceof Container )
        {
            key = key + "/";
            Container container = (Container) c;
            for ( Component child : container.getComponents() )
               setBounds( key, child );
        }
    }

    /**
     * Loads the properties from the .xml file and sets all named windows with a matching
     * name.
     *
     * @param component Any component in the Swing app.  The top-most container will be
     * determined from this component.
     */
    public void restore( Component component )
    {
        properties = new Properties();
        InputStream is = null;
        try
        {
            is = new FileInputStream( filename );
            properties.loadFromXML( is );
        }
        catch ( IOException e )
        {
            e.printStackTrace();
            return;
        }
        finally
        {
            IOUtils.closeQuietly( is );
        }

        Component top = component;
        while ( top.getParent() != null )
            top = top.getParent();

        setBounds( "", top );
    }

    private void getBounds( String key, Component c )
    {
        key = key + c.getName();
        String position = String.format( "%d,%d,%d,%d", c.getX(), c.getY(), c.getWidth(), c.getHeight() );
        properties.setProperty( key, position );
        if ( c instanceof Container )
        {
            key = key + "/";
            Container container = (Container) c;
            for ( Component child : container.getComponents() )
                getBounds( key, child );
        }
    }

    public void save( Component component )
    {
        Component top = component;
        while ( top.getParent() != null )
            top = top.getParent();

        properties = new Properties();
        getBounds( "", top );

        OutputStream os = null;
        try
        {
            os = new FileOutputStream( filename );
            properties.storeToXML( os, "Browser" );
        }
        catch ( IOException e )
        {
            e.printStackTrace();
        }
        finally
        {
            IOUtils.closeQuietly( os );
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-24T15:08:15.710

无论您想在下一次调用时记住什么（窗口位置等），都可以写入文件，并从启动时读取该文件。它需要被持久化到磁盘上，没有人知道你真正想要保存什么（可能不是时间敏感数据），并且任何“自动”解决方案都无法工作，除非它也保存时间敏感数据。

您希望您的应用程序恢复显示已删除的记录吗？可能不是。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-24T18:40:15.307

我一直使用`java.util.Preferences`它，但是[`javax.jnlp.PersistenceService`](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/examples.html#PersistenceService)“即使对于在受限执行环境中运行的应用程序”也有效。

# out-of-memory - 如何模拟并获得“bad_alloc”异常？

> ID：12566006
> 
> 赞同：0
> 
> 时间：2012-09-24T13:25:24.303
> 
> 标签：out-of-memory, bad-alloc

谁能告诉我如何`bad_alloc`在 C++ 中模拟和产生异常？在某些地方的代码中，我正在使用`new`将引发`bad_alloc`异常的运算符。我想模拟这种情况，需要测试代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:19:41.993

巴拉穆鲁甘，

今天下午我也有同样的疑问，在这里没有看到任何相关的东西。所以我去了 [CPlusPlus](http://www.cplusplus.com/doc/tutorial/exceptions/)并将 try catch 放入一个无限循环中，并且工作。在 VS C++ 2010 Express 下。

在我的代码下面：

```
// bad_alloc standard exception
#include <iostream>
#include <exception>
using namespace std;

int main () 
{
  unsigned int count=0;
  while (1) 
  {
    count++;
    try
     {
      int* myarray= new int[1000000];
     }
     catch (exception& e)
     {
    cout << "Standard exception: " << e.what() << endl;
    cout << "\nAborting after "<< count << " loops";
    return -1;
     }
   }
cout<<"\nNormal finishing...";
return 0;
} 
```

就我而言，它在 523 次循环后被捕获。如果我知道将堆限制为财政记忆的设置，我会更好，如果我发现我会让你知道。

# php - 目录列表脚本 - 小修复 - INDEX.PHP "self"

> ID：12566007
> 
> 赞同：0
> 
> 时间：2012-09-24T13:25:26.947
> 
> 标签：php, listview, directory

有一个我发现最有用的脚本。它可以在下面找到：

[目录列表脚本 - 版本 3](http://www.evoluted.net/thinktank/web-development/php-directory-listing-script)

IT 具有多种功能，我用它来查看我正在处理的所有网站。但是，这是一个我还找不到解决方案的问题。我已经尝试过开发者网站，但是对评论的最后回应是在`July 06, 2012 at 1:50 am`.

这是很棒的功能。

```
 /*
Index files - The follow array contains all the index files
that will be used if $displayindex (above) is set to true.
Feel free to add, delete or alter these
*/

$indexfiles = array (
                'index.html',
                'index.htm',
                'index.php',
                'default.htm',
                'default.html'
            ); 
```

所以当如果找到上面的文件时，它会执行它。

脚本的名称是 index.php 但是当我在上面列出“index.php”时它不起作用。如果我将脚本重命名为“start.php”，那么它可以工作，但是我必须点击它，因为它正在寻找 index.php。

由于脚本很长，我建议下载它并查看一下以节省一些混乱。

我的问题：我需要编辑什么才能加载 index.php。目前，如果上述代码中不存在它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:16:28.520

更改了部分 PHP ini。都在工作。

# iphone - ios 从网络服务器加载图像并在 UITableViewCell 上显示

> ID：12566012
> 
> 赞同：-3
> 
> 时间：2012-09-24T13:25:39.437
> 
> 标签：iphone, ipad, ios5

对于 iPhone 5.0 (ARC)，我以 json 形式从服务器获取大量图像（图像 url）和文本数据。我的要求是从服务器加载前五张图片，当用户向下滚动时加载接下来的五张图片，依此类推。我需要在 UITableViewCell 中显示它。通过这样做，我可以减少网络调用并使应用程序在设备上运行得更快。

目前，我正在使用后台线程来加载图像，但它们会在后台持续加载。我不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:30:45.780

我强烈建议您使用该[`AFNetworking`](https://github.com/AFNetworking/AFNetworking)框架（对于所有与网络相关的任务来说，它非常棒且完整）。

它带有一个类别`UIImageView`，允许您直接从设置`UIImageView`，在后台为您管理所有内容，例如下载图像或从其缓存中获取图像，如果您更改后者则取消请求以避免无用的请求，等等`image``NSURL``URL`

然后在你的`tableView:cellForRowAtIndexPath:`你可以简单地编写这种代码：

```
[cell.imageView setImageWithURL:yourURL]; 
```

你完成了。即使滚动时的回收机制在起作用，它也会起作用`UITableView`，使用其他方法管理起来会很痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:28:10.060

看看[SDWebImage](https://github.com/rs/SDWebImage)。这是一个非常简洁的库，可以异步下载图像并缓存它们。

# jquery - 使用 jsonValidationWorkflowStack 和模型驱动的 Struts 2 Ajax 验证

> ID：12566016
> 
> 赞同：7
> 
> 时间：2012-09-24T13:25:50.140
> 
> 标签：jquery, ajax, struts2, model-driven

我正在尝试在我的 Struts2 Web 应用程序（使用 JQuery 插件）中使用 Ajax 验证，但我遇到了问题。

我在使用 @Validations 注释时遇到了问题，所以我刚刚覆盖了 validate() 方法，现在在验证期间我的 xhtml 表单一切正常。fieldsErrors 很好地接收并打印在 gui 中。

事实上，当表单被验证时，第二个 POST 被发送到服务器以启动 Action。但是，我不知道为什么，框架没有设置模型的属性，并且在执行Action后生成HTML响应期间，框架无法访问属性（仅当我使用jsonValidationWorkflowStack时）。

我创建了一个简单的示例：

**那个行动**

```
 @Namespace("/actions")
    @ParentPackage("actions")
    @InterceptorRef(value = "jsonValidationWorkflowStack")
   public class ActionTest extends ActionSupport implements
        ModelDriven<ModelTest>, ParameterAware {
    private static final long serialVersionUID = 1L;

    private ModelTest model;
    private Map<String, String[]> parameters;

    public ActionTest() {
        model = new ModelTest();
    }

    @Action(value = "actionTest", results = {
            @Result(name = SUCCESS, location = "/jsp/win.jsp"),
            @Result(name = ERROR, location = "/jsp/loose.jsp"),         
    })
    public String executeAction1() throws Exception {
        System.out.println("pass: "+getModel().getPass()); //the field is always null
        if ("test".equals(getModel().getPass()))
            return SUCCESS;
        return ERROR;
    }

    @Override
    public ModelTest getModel() {
        return model;
    }

    @Override
    public void validate() {
        String field;
        if (parameters.get("pass") != null) {
            field = parameters.get("pass")[0];
            if (field == null || field.isEmpty())
                addFieldError("pass", "the field is not set");
            else if (!"test".equals(field))
                addFieldError("pass", "the password is \"test\"");
        }

    }

    @Override
    public void setParameters(Map<String, String[]> arg0) {
        this.parameters = arg0;

    }
} 
```

**该模型**

```
 public class ModelTest {

    private String pass;
    public String getPass() {
        return pass;
    }
    public void setPass(String pass) {
        this.pass = pass;
    }
} 
```

**表格**

```
<s:form action="actionTest" theme="xhtml">
<s:textfield name="pass"/>
<sj:submit validate="true"/>
</s:form> 
```

在这个例子中： - 即使密码是“test”，我总是被重定向到松散.jsp - 如果我想在另一个由这个动作重定向的 jsp 中打印 a，我什么也没看到（即使我在模型）。

你能帮我一把吗？？？

PS：对不起我的英语不好：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-31T21:18:12.090

实际上模型驱动的拦截器带有 defaultStack

```
<interceptor-stack name="defaultStack">
                <interceptor-ref name="exception"/>
                <interceptor-ref name="alias"/>
                <interceptor-ref name="servletConfig"/>
                <interceptor-ref name="prepare"/>
                <interceptor-ref name="i18n"/>
                <interceptor-ref name="chain"/>
                <interceptor-ref name="debugging"/>
                <interceptor-ref name="profiling"/>
                <interceptor-ref name="scopedModelDriven"/>
                <interceptor-ref name="modelDriven"/>
                <interceptor-ref name="fileUpload"/>
                <interceptor-ref name="checkbox"/>
                <interceptor-ref name="staticParams"/>
                <interceptor-ref name="params">
                  <param name="excludeParams">dojo\..*</param>
                </interceptor-ref>
                <interceptor-ref name="conversionError"/>
                <interceptor-ref name="validation">
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
                <interceptor-ref name="workflow">
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
</interceptor-stack> 
```

并且`jsonValidationWorkflowStack`不因为只包括`basicStack`

```
<interceptor-stack name="jsonValidationWorkflowStack">
                <interceptor-ref name="basicStack"/>
                <interceptor-ref name="validation">
                    <param name="excludeMethods">input,back,cancel</param>
                </interceptor-ref>
                <interceptor-ref name="jsonValidation"/>
                <interceptor-ref name="workflow"/>
</interceptor-stack> 
```

这是`basicStack`

```
<interceptor-stack name="basicStack">
                <interceptor-ref name="exception"/>
                <interceptor-ref name="servletConfig"/>
                <interceptor-ref name="prepare"/>
                <interceptor-ref name="checkbox"/>
                <interceptor-ref name="multiselect"/>
                <interceptor-ref name="actionMappingParams"/>
                <interceptor-ref name="params">
                    <param name="excludeParams">dojo\..*,^struts\..*</param>
                </interceptor-ref>
                <interceptor-ref name="conversionError"/>
</interceptor-stack> 
```

尝试添加

```
@Namespace("/actions")
    @ParentPackage("actions")
    @InterceptorRefs({
       @InterceptorRef("jsonValidationWorkflowStack"),
       @InterceptorRef("defaultStack")
}) 
```

# extjs3 - 在 Extjs 3.x 输入类型文件文本字段重置在 IE8(Extjs)EXTJS*3.2 中不起作用

> ID：12566019
> 
> 赞同：0
> 
> 时间：2012-09-24T13:25:54.323
> 
> 标签：extjs3

extjs× 6627,3.x 版本，在 mozilla 浏览器中重置适用于 inputType：'file'，但不适用于 IE8 浏览器，这是我的代码，

```
xtype :'textfield',
name:'Policy_fileUpload',
id :title+'_uploadFile',
inputType :'file',
fieldLabel :'Upload File and Location<font color=red>*</font>',
blankText :'Please choose a file',
anchor :'100%',
required :true,
autoShow :true 
```

现在正在使用 reset 属性重置此字段

```
xtype:'button',extjs× 6627
id:title+'cancelButton',
width:100,
text:'Cancel',
listeners : {
   'click':function(){
       Ext.getCmp(title+'_uploadFile').reset();
       } 
```

帮我解决这个问题提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:23:22.713

这似乎是 IE8 中的一个安全“功能”。以下是使用 jQuery 给出解决此问题的相关主题：

[空输入类型文件在 IE 中不起作用](https://stackoverflow.com/questions/10327860/empty-input-type-file-doesnt-work-in-ie)

[使用 jQuery 清除 <input type='file' />](https://stackoverflow.com/questions/1043957/clearing-input-type-file-using-jquery/1043969)

他们都在重新创建输入字段的行中提出了一些建议。要在 ExtJS 3.x 中做到这一点，你可以尝试这样的事情：

```
listeners : {
    'click':function(){
        var uploadField = Ext.getCmp('_uploadFile');                
        if (Ext.isIE8) {                
            var cfg = uploadField.initialConfig;
            uploadField.destroy();
            var parentCt = Ext.getCmp('parentContainer');
            parentCt.insert(0, cfg);
            parentCt.doLayout();
        } else {
            uploadField.reset();
        }

    } 
} 
```

此外，似乎 IE9 的行为方式相同。所以你可能想要有`if (Ext.isIE)`而不是`if (Ext.isIE8)`.

# git - 共享rerere缓存

> ID：12566023
> 
> 赞同：28
> 
> 时间：2012-09-24T13:26:04.973
> 
> 标签：git, version-control, git-merge, merge-conflict-resolution, git-rerere

我看到人们建议所有开发人员在他们的机器上设置一个从`C:\project\.git\rr-cache`共享文件夹到共享文件夹的符号链接`\\server\rr-cache`。

但是，如果可能的话，通过将文件夹包含在 git 存储库本身中来共享文件夹似乎更方便。我见过人们提到这个解决方案，但实际上并没有提到如何去做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-25T20:15:40.293

它可以通过专用分支共享。如果该分支上存在冲突，您想停止并解决它，因为这意味着尝试以两种不同的方式解决相同的冲突。不用说，这将是规则的例外。

对于这个问题的其他人，谷歌“每个功能的分支”看看这在哪里有用。

Hooks 可以自动同步常见的 rr-cache 分支。

这是您需要自动化的内容。rereresharing 是您要合并到的示例分支， rr-cache 是存储分辨率的分支；所有这些步骤都没有问题：

```
git checkout --orphan rereresharing start-sprint-1 
git --git-dir=.git --work-tree=.git/rr-cache checkout -b rr-cache
git --git-dir=.git --work-tree=.git/rr-cache add -A
git --git-dir=.git --work-tree=.git/rr-cache commit -m "initial cache"
git clean -xdf
git checkout rereresharing 
git merge --no-ff FTR-1
git merge --no-ff FTR-2
vim opinion.txt # resolve conflict 
git add -A
git commit
git checkout rr-cache 
git --git-dir=.git --work-tree=.git/rr-cache add -A
git --git-dir=.git --work-tree=.git/rr-cache commit -m "resolution"
git remote add origin ../bpf-central
git push origin rereresharing rr-cache 
cd - # assumes you were previously in the other local repo
git remote add origin ../bpf-central
git fetch
git branch rr-cache origin/rr-cache 
ls .git/rr-cache
git --git-dir=.git --work-tree=.git/rr-cache checkout rr-cache -- .
ls .git/rr-cache 
```

您现在已准备好进行相同的合并，并且您将解决冲突。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-09T09:59:36.633

也许与其分享另一个选项，不如使用[rerere-train.sh](https://github.com/git/git/blob/master/contrib/rerere-train.sh)`rr-cache`从现有的 Git 历史中学习冲突解决方案。

# javascript - 如果对象是原型的并且如果它是从文字创建的，则访问对象字段的 Javascript 性能

> ID：12566024
> 
> 赞同：1
> 
> 时间：2012-09-24T13:26:05.663
> 
> 标签：javascript, performance, prototype, object-literal

我可以使用原型创建对象，并在构造函数中设置字段，或者我可以使用 JSON 创建对象。我希望原型版本与文字一样快，或者更快，但它在 chrome 和 ff 上的速度较慢，而在 Opera 上似乎是相等的。

[http://jsperf.com/object-literal-vs-object-prototype-field-access-time](http://jsperf.com/object-literal-vs-object-prototype-field-access-time)

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:30:27.750

AFAIK 原型访问基本上只是 2 次正常访问（除了对原型的访问是高度优化的）。写作与写作`this.test`基本相同

```
if(this.hasOwnProperty('test')) { return test; }
else { return this.constructor.prototype['test']; } 
```

虽然，我不是 100% 确定这一点。

# ruby-on-rails-3 - Rails 3：重命名应用程序后拒绝 PostgreSQL 访问

> ID：12566025
> 
> 赞同：0
> 
> 时间：2012-09-24T13:26:13.490
> 
> 标签：ruby-on-rails-3, postgresql-9.1

我刚刚重命名了我的应用程序（用新名称替换了旧名称的所有实例），现在我的应用程序无法再连接到在 localhost 上运行的 postgres 数据库。

```
PG::Error (could not connect to server: Connection refused (0x0000274D/10061)
Is the server running on host "localhost" (::1) and accepting
TCP/IP connections on port 5432? 
```

有任何想法吗？

谢谢 ： - - -）

编辑：这是我的 database.yml

```
common: &common
  adapter: postgresql
  username: <username>
  password: <password>

development:
  <<: *common
  database: development

test:
  <<: *common
  database: test

production:
  <<: *common
  database: production 
```

其中用户名和密码是我的 postgres 安装的用户名和凭据。但是，我也无法使用 pgAdmin 连接到服务器！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:25:26.630

我找到了答案：显然我的 postgres 服务器没有在本地运行，所以我不得不手动启动服务。:-)

# asp.net - 尝试为文件 ....database1.mdf 附加自动命名数据库失败

> ID：12566036
> 
> 赞同：34
> 
> 时间：2012-09-24T13:26:38.517
> 
> 标签：asp.net, vb.net, sql-server-2008, asp.net-4.0, unc

调试 Visual Studio 2010 网站时出现以下错误：

> 尝试为文件 C:\Users...\Desktop\Dpp2012New\App_Data\dppdatabase.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：尝试为文件 C:\Users...\Desktop\Dpp2012New\App_Data\dppdatabase.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

这是我的连接字符串`web.config`：

```
<connectionStrings>
    <add name="ApplicationServices" 
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" 
         providerName="System.Data.SqlClient"/>
    <add name="ConnectionString" 
         connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\dppdatabase.mdf;Integrated Security=SSPI" 
         providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

我从我的网站访问它：

```
Dim connectionString As String = ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString 
```

堆栈跟踪将错误行显示为：

```
 Dim conn As New SqlConnection(connectionString)
 Dim dr As SqlDataReader
 conn.Open() 'This is the error line as per stacktrace 
```

我已经为上述文件夹提供了所需的权限，因此它不能是“或无法打开指定文件”的问题。如果我们查看论坛中所有与同一个错误相关的帖子，就可以清楚地发现这个错误的深刻性。但是，没有一个解决方案可以解决我的问题。我尝试过的一些资源是：

1.  [http://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx](http://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
2.  [http://blogs.msdn.com/b/webdevelopertips/archive/2010/05/06/tip-106-did-you-know-how-to-create-the-aspnetdb-mdf-file.aspx](http://blogs.msdn.com/b/webdevelopertips/archive/2010/05/06/tip-106-did-you-know-how-to-create-the-aspnetdb-mdf-file.aspx)
3.  [http://forums.asp.net/t/1033225.aspx](http://forums.asp.net/t/1033225.aspx)

我急切地等待一个解决方案。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-08T18:34:12.320

我也有这个问题，很痛苦。我配置了我的连接字符串并设法解决了这个问题。在连接字符串中，我将**AttachDbFilename属性的值****|DataDirectory|\dbfilename.mdf 替换**为文件的路径。|数据目录| 仅当数据库文件位于同一项目内的 App_Data 文件夹中时才能使用。

 **因此，将 AttachDbFilename 属性更改为 mdf 文件的直接路径，解决了我的问题。

**AttachDbFilename=C:\MyApp\App\DAL\db.mdf**

我希望这对你有用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-15T15:24:36.833

尝试创建您的连接字符串，如下所示：

```
 <add name="ECommerce" connectionString="Data Source=(localdb)\v11.0;Initial Catalog=C:\USERS\dL\DESKTOP\DATABASE\MYSHOP.MDF;Integrated Security=True;Connect Timeout=15;Encrypt=False;TrustServerCertificate=False" providerName="System.Data.SqlClient"/> 
```

它对我有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-18T09:15:47.090

```
<add name="Connections" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient"/> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-14T08:26:50.077

我遇到了类似的错误，但使用的是在代码中配置的连接，而不是配置文件。我的解决方案只是添加“Initial Catalog=MyDatabase”部分。我的代码现在看起来像......

```
DbConnection connection = new SqlConnection(String.Format(@"Data Source=.\SQLEXPRESS; Integrated Security=SSPI; AttachDbFilename={0}; User Instance=True; Initial Catalog=IPDatabase;", Location)); 
```

Location 是一个 mdb 文件的完整路径，它不一定存在。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-24T13:45:55.370

在 .Net 中开发 Web 应用程序时最烦人的错误之一。我在一年前做的一个项目中遇到了这个问题。这对我有用：我使用 sa 帐户登录到 SQL Management Studio，并将数据库附加到对象资源管理器（数据库 -> 右键单击​​ -> 附加）。然后我打开了 Security->Logins->[myWindowsUsername] 并编辑了 User Mappings 选项卡，赋予附加数据库的*dbowner*权限。

我确信您可以在没有 Management Studio 的情况下使用控制台命令来完成这些事情，但我对 T-SQL 不太擅长，因此无法就此提供建议。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-28T16:04:32.130

发生错误是因为`AttachDbFilename`参数设置为绝对路径，指向错误的文件位置。

重要的是要知道，默认情况下，数据库*.mdf*文件本身将**在每次构建时**复制到构建目标文件夹，或者，如果配置为`Copy if newer`使用文件属性资源管理器，则仅在文件版本发生更改时（建议`Copy if newer`使用防止数据库在每次构建时被覆盖）。

要解决此问题，该`AttachDbFilename`参数应指向当前执行文件夹。最好使用 Visual Studio 环境变量`|DataDirectory|`来定义相对路径。

固定的连接字符串可能如下所示：

```
"Data Source=(LocalDB)\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\MyDatabase.mdf;Integrated Security=True;Asynchronous Processing=True;User Instance=False;Context Connection=False" 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-22T12:03:00.587

我的是一个 EF 代码优先项目，它在文件被删除时出现。从包管理器控制台运行`Update-Database`使数据库及其正常。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-24T13:28:38.863

检查您的 web-config 文件，可能有多个具有相同名称的连接字符串

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-02-21T20:17:13.327

我对EF也有同样的问题。绝对路径解决方案有效。但是，如果您想将程序移动到新位置，这不是一个好的解决方案。对我来说，这就是问题所在。

1.  VS在调试文件夹中搜索mdf文件
2.  项目文件夹中有一个`.mdf`文件，有时VS同步这两个文件
3.  由于某种原因，`.mdf`文件未同步到调试中

**我的解决方法：**

1.  将`.mdf`and`.ldf`文件复制到临时文件夹
2.  在 vs/server explorer 中建立连接
3.  添加 ADO.NET 时，使用新连接
4.  VS 提供将`.mdf`文件复制到项目文件夹中，接受它
5.  现在该`.mdf`文件也将出现在调试文件夹中
6.  删除临时文件夹的连接，新建一个到项目文件夹

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-10-16T15:47:31.233

我一直在我的应用程序中尝试 mdf 可移植性，所以我一直在使用

```
 public DbContext IoDatabase()
    {
        var directory = System.IO.Directory.GetCurrentDirectory();
        var connectionString = @"Data Source=(localdb)\mssqllocaldb;AttachDbFilename=" + directory + "\\App_Data\\ITIS.mdf;Integrated Security=True;Connect Timeout=30;";
       return  new NerdDinners(connectionString);
    } 
```

用nerdDinners，我不记得我在哪里找到它，正在

```
public class NerdDinners : DbContext
{
    public NerdDinners(string connString)
    {
        Database.Connection.ConnectionString = connString;
    }
} 
```

然后我可以将返回类型用作 DbContext。

我遇到的主要问题是 GetCurrentDirectory() 获取的是编译文件路径，而不是项目文件路径，因此部署应该设置为 GetCurrentDirectory 并且 mdf 应该在编译时复制，而不是引用实际的 App_Data。将您的 mdf 包含在您的项目中并在其上设置属性。将副本设置为输出目录。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-12-12T05:42:24.810

只需使用新位置更改路径即可。

> 你将如何获得路径？

转到数据库>右键单击>转到属性>右侧面板上的数据源在那里，复制该数据源位置并更新到 web.config 文件中（唯一的路径必须注意并在 AttachDbFilename 中查找在数据库中）。

```
Data Source=(LocalDB)\MSSQLLocalDB;AttachDbFilename=E:\manish_data\project_practice\sqlbasedprojects\sqlbasedproject\realease\mainproject\App_Data\cruddatabase.mdf; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-06-01T06:45:36.193

我也遇到了同样的错误，我修复了以下问题（我使用 Visual Studio 2019）：单击调试 > [项目名称] 调试属性，在左侧边栏中选择构建项。在右侧边栏上，导航到输出路径条目并将 bin\debug 更改为 .\

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-10-23T11:44:12.327

更改此内容后，错误已为我修复

```
ConfigurationManager.ConnectionStrings[0].ConnectionString 
```

对此

```
ConfigurationManager.ConnectionStrings["myconnection"].ConnectionString 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-03-31T15:25:54.123

在安装应用程序时，我已将安装文件夹从程序文件更改为 C 目录。然后我的问题就解决了

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-02-13T21:41:36.270

看起来有很多原因......这是我的。

线索在错误消息的最后一行......

> System.Data.SqlClient.SqlException：'尝试为文件 Q:\Folder\FileName.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

```
...or it is located on UNC share. 
```

在尝试复制生产环境时...我最初有物理驱动器 Q:。在我的开发机器失败后……我重建并创建了一个映射驱动器。开始收到此错误...然后返回并创建另一个 Q: 分区，问题已解决。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-06-04T21:54:11.643

到目前为止我发现解决问题的方法是，如果您按以下方式创建 mdf 文件，它对于 Visual Studio 来说就可以了。

右键单击服务器Explorar中的数据连接->添加连接->选择Microsoft SQL Server数据库文件并选择数据库名称并选择确定。那么这个问题就不会出现了。关注视频： [youtube 链接](https://www.youtube.com/watch?v=6wvQ_CMMhGY)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-07-12T13:22:15.600

将数据库移动到同一项目中的文件夹后，我遇到了类似的问题。

我最后要做的就是到数据库的属性，复制“身份”下列出的路径并替换“AttachDbFilename =”处的路径。

工作得很好。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-10-21T08:12:39.223

在大多数情况下，单元测试项目与主项目是分开的。如果您的数据库是解决方案的本地数据库，这会导致生成的连接字符串无效，因为它无法找到 app_data 文件夹。

您可以替换 |DataDirectory| 如果您需要从单元测试项目连接到它，请在主项目中使用您的数据库的相对路径。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-08-11T23:13:40.957

**在 .net core 5 中用于在Data**文件夹中创建 Db.mdf 文件：

*   appsettings.json 中的连接字符串：

"DefaultConnection": "Data Source=(LocalDB)\\MSSQLLocalDB;AttachDbFilename=projectPath\\ **Data** \\Db.mdf;Integrated Security=True;Connect Timeout=30"

*   在 startup.cs 中的 options.UseSqlServer ：

    var projectPath = Directory.GetCurrentDirectory();

    services.AddDbContext(options => options.UseSqlServer(Configuration.GetConnectionString("DefaultConnection").Replace("projectPath", projectPath)));

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-01-26T12:58:39.213

请检查连接字符串上的数据库路径。我有同样的错误信息，后来我发现问题是拼写错误的路径。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-01-07T20:43:07.973

***TLDR：可能需要在多个文件中进行 HasanG 提到的更改，例如我的 App.config 和 Settings.Designer。***

要添加到 HasanG 的答案，您可能需要在多个位置更改 ConnectionString 的路径。就我而言，我没有在调试器的两次运行之间获得数据持久性，并且更改了我的 Settings.Designer 文件中定义的 ConnectionString 解决了这个问题。但是，在关闭并重新打开 Visual Studio 并再次运行调试器后，我发现在 Visual Studio 关闭后我没有获得持久性。我要么得到一个空的 DataGridView，要么在构建时得到一个错误，说明以下内容：

```
*An attempt to attach an auto-named database for file <database file path in debug folder> failed. A database with the same name exists, or specified file cannot be opened, or it is located on UNC share.* 
```

然后，我在整个项目解决方案中搜索该文件路径的实例，发现它也在 App.config 文件中使用。一旦我更改了该文件以及 Settings.Designer 文件中的路径，我就能够在调试器的多次运行之间以及 Visual Studio 本身的多次运行之间在我的 DataGridView 中保持数据持久性。希望这对某人有帮助！我在这个上面拔了很多头发。

编辑：制作这三个文件，Settings.Settings 文件也必须更新。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-12-21T20:00:05.897

好吧，我认为原因是在您的数据库目录中，包含一个具有相同名称的 .mdf 文件。所以最好的办法是给出完整的路径，你可以替换 AttachDbFilename。只需简单地获取数据库文件的完整路径并将其分配到 app.config 文件中的 AttachDbFilename 即可。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-08-23T19:02:37.343

试试这个，它对我有用

```
try {
    String ConnectionString = @"Data Source=(LocalDB)\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\App_Data\Test.mdf;Integrated Security=True;Connect Timeout=15;Encrypt=False;TrustServerCertificate=True";
    SqlConnection connection = new SqlConnection(ConnectionString);
    connection.Open();
    MessageBox.Show("Connection is opened.!!");
    connection.Close();
} catch(Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2013-01-03T01:07:16.020

我有同样的问题，我想我想通了。在连接字符串中确保连接字符串看起来像这样：

```
<connectionStrings>
  <add name="ApplicationServices"
    connectionString="data source=.\SQLEXPRESS;
                      Integrated Security=SSPI;
                      AttachDBFilename=|DataDirectory|\aspnetdb.mdf;
                      User Instance=true"
    providerName="System.Data.SqlClient" />
  <add 
    name="NorthwindConnectionString1" 
    connectionString="Data Source=localhost;
                      Initial Catalog=Northwind;
                      Integrated Security=True" 
    providerName="System.Data.SqlClient" />
</connectionStrings> 
```

现在，第一个

```
<add 
  name="ApplicationServices" 
  connectionString="data source=.\SQLEXPRESS;
                    Integrated Security=SSPI;
                    AttachDBFilename=|DataDirectory|\aspnetdb.mdf;
                    User Instance=true"
  providerName="System.Data.SqlClient" /> 
```

是 web.config 中默认显示的内容。保持不变，并添加另一个连接字符串

```
 <add
   name="NorthwindConnectionString1" 
   connectionString="Data Source=localhost;
                     Initial Catalog=Northwind;
                     Integrated Security=True"
   providerName="System.Data.SqlClient" /> 
```

用你的参数。这对我有用。希望能帮助到你。**

# python - Python：如何在 django 中“分叉”一个会话

> ID：12566039
> 
> 赞同：5
> 
> 时间：2012-09-24T13:26:58.513
> 
> 标签：python, django, session, authentication, login

我有一个服务器，它提供了几个应用程序。

请想象我是在 2 个或更多这些应用程序中注册的用户，并且在访问每个应用程序时我使用不同的登录信息。

现在，作为该用户，我使用具有不同选项卡的同一浏览器来访问这些应用程序...第一次记录（对于第一个应用程序）一切都按预期进行，但是当我访问第二个应用程序（作为第二个用户）时，该请求将访问同一个`request.session`对象。当我调用登录（来自 auth 框架）时，当前用户将与实际`request.session`（`request.session[SESSION_KEY] != user.id`）中的用户进行比较，`request.session.flush()`并将被调用。

这意味着我将丢失`request.session`访问第一个应用程序的用户的所有内容，并且从那时起，同一用户`request.session`将被“标记”为第二个用户`request.session`。

在这种情况下，我想要的是有一个函数/方法，允许`request.session`为第二个用户创建一个新的，而保持原来的状态。

**第一个答案后编辑**：首先感谢您的回答。为了避免过于有针对性的答案，我试图不详细说明，但现在我认为我应该这样做：

好的，我之前曾称其为“它”应用程序，但实际上，我的项目服务请求是为了提供相同的最终“产品”（例如游戏）。（我的项目中有几个 django 应用程序。每个应用程序都有特定的方向和后端取决于应用的业务考虑。）

如果我告诉我有不同的入口点 URL，使用正确的业务后端来处理请求并检索游戏，那将会更详细。

我的主 URL 是相同的（命名空间），我的项目只有一个设置文件。

![在此处输入图像描述](../Images/49cec373f4b6cac991a2e757529b7524.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:50:44.277

根据您是否准备好更改“用例”，您的问题可能有几个答案：

**a）**您不能更改用例：这是不可能的，因为一个 Django 会话绑定到一个浏览器会话，无论是多个浏览器窗口实例还是选项卡。

**b）**您可以更改用例：用户仍然可以使用多个浏览器（或配置文件（或 chrome/chromium 中的隐私浏览模式））来实现此目的，而无需对您的代码进行任何修改。

**c）**您可以在您的网站中实现“用户”切换功能，允许用户在不同窗口的同一会话中拥有多个活动配置文件，其目的类似于 github 组织切换功能或 facebook 页面/组织切换但你可以在多个选项卡中拥有多个用户的个人资料，这在 github 或 facebook 上并非如此。

要实现**c)**您需要将“SubProfile”模型实例附加到您的“用户”模型，并根据查询字符串参数在每个传入请求上激活正确的子配置文件，并在请求之间保留子配置文件信息。

**1）**我猜你已经有`Subprofile`一个带有外键的模型`django.contrib.auth.models.User`，你可能还有一个允许用户更改其子配置文件的视图。为了使子配置文件切换工作，它需要在当前选项卡会话中保留它正在使用的子配置文件中的信息，因为它需要在查询字符串中添加一个参数，因为它是绑定选项卡而不是用户的唯一位置-会议。例如“子配置文件=123”。您需要使用表单等正确验证子配置文件，视图如下所示：

```
def select_subprofile(request):
   if request.method == 'POST':
      form = SubProfileSelectForm(request)
      if form.is_valid():   
          subprofile = form.cleaned_data['subprofile']
          url = '%s?subprofile' % (reverse('homepage'), subprofile) 
          return redirect(url)  # the redirect is something like '/homepage?subprofile=123'
   else:
      form = SubProfileSelectForm()
   return render(request, 'myapp/subprofile_select.html', {'form':form}) 
```

这个视图可以是每个游戏的第一页。

**2)**之后，您需要为当前选项卡检索用户的子配置文件。为此，我们将在[中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs)中使用查询字符串（如果您不知道它是什么，请查找[SO](https://stackoverflow.com/search?q=django%20middleware)和[与 Django 捆绑的示例中间件](https://github.com/django/django/blob/master/django/contrib/auth/middleware.py)`SubProfile`）可用于将当前实例附加到`request.user`. 中间件将为每个传入请求附加与在查询字符串中找到的当前子配置文件信息对应的 SubProfile 实例到当前用户对象，中间件如下所示：

```
class SubProfileMiddleware(object):

    def process_request(self, request):
        subprofile = request.GET.get('subprofile', None)
        if subprofile:
            # it's important to check for user here or malicious users will be
            # able to use Subprofiles of other users
            subprofile = Subprofile.objects.filter(user=request.user, id=subprofile)
            # This can also be written 
            # subprofile = request.user.subprofile_set.filter(id=subprofile)
            if not subprofile:
                # this is a malicious user
                raise Http403
            else:
                request.user.subprofile = subprofile
        else:
             # set default subprofile
             request.user.subprofile = self.user.default_subprofile 
```

这样，您可以在应用程序的每个视图`SubProfile`中`subprofile`访问`request.user`. 如果存在有效的查询字符串`subprofile=123`，用户将激活这些子配置文件，如果没有，则为默认子配置文件。

假设您的应用程序是具有`Organization`模型的应用程序，其中每个实例都有墙，用户可以使用子配置文件在其上发布消息，在墙上发布消息的功能具有以下签名`post_on_organization_wall(subprofile, message, organization)`，使用此功能的视图将如下所示：

```
def organization_wall_post(request, organization):
    organization = Organization.objects.get_object_or_404(organization)
    if request.method == 'POST':
        form = MessageForm(request.POST)
        if form.is_valid():
             post_on_organization_wall(request.user.subprofile, message, organisation)
    else:
        form = MessageForm()
    return render(request, 'organisation/wall_post.html', {'form': form}) 
```

**3)**现在您需要跨请求保留子配置文件信息。最简单的方法是将每个调用替换`{% url %}`为您自己的`url`模板标签，该标签检查请求查询字符串是否存在子配置文件键并将其添加到请求的 url。您可以重用[Django 的 url 模板标签的代码](https://github.com/django/django/blob/master/django/template/defaulttags.py#L1194)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:53:06.267

如果我正确理解您的问题，那么问题是您在应用程序之间共享会话，即使用户不同。您应该能够通过在 settings.py 中设置 SESSION_COOKIE_DOMAIN、SESSION_COOKIE_PATH 或 SESSION_COOKIE_NAME 来解决此问题，以确保您的应用程序不会破坏其他会话。

# javascript - 退出网页时删除服务器文件

> ID：12566049
> 
> 赞同：0
> 
> 时间：2012-09-24T13:27:29.157
> 
> 标签：javascript, python, cgi

使用 python cgi 脚本，我有一个带有提交和取消按钮的表单。

*   当用户试图通过单击取消、关闭窗口或点击后退按钮来离开网页时，我想删除服务器上存在的文件。文件名取决于表单中的值。
*   当用户单击提交按钮时，不会删除任何文件。表单操作是将用户带到另一个 python cgi 脚本。

    我可以使用 javascript onbeforeunload 事件捕获用户离开页面，但我无法删除 javascript 中的文件。如何删除文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:50:07.560

正如 Lajos Arpad 所写，您应该在页面卸载时向服务器发送通知（例如 onbeforeunload 事件中的 XmlHTTPRequest）；但请注意，它不是万无一失的——例如，如果用户重置他/她的机器，或强制终止浏览器进程（例如 unix kill -9），浏览器将不复存在并且不会向服务器发送任何通知. 也许在这种情况下最好引入一些心跳，比如网页每 10 秒发送一次 XHR，如果服务器在 5 分钟内没有看到任何心跳，则很可能用户死了，文件也应该被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:37:33.560

由于安全原因，您不能使用 Javascript 访问服务器文件。但是，您可以在 onbeforeunload 事件和服务器端事件（处理此回发）中进行回发，您可以删除要删除的服务器文件。

# xcode4.3 - UIView 中的 FBRequestConnection 不链接 IBOutlets

> ID：12566054
> 
> 赞同：0
> 
> 时间：2012-09-24T13:27:53.863
> 
> 标签：xcode4.3, objective-c-blocks, facebook-ios-sdk

我有`ViewController`这么多信息，为了更好地阅读代码，我将此 VC 的部分内容拆分为两个视图。因此，我初始化这些视图，设置框架并将它们作为子视图添加到 ViewController。

这些视图有一个`.xib`连接，我可以链接到我所有的`IBOutlets`. 直到这里，一切都好，但是..

..在其中一个视图中，我需要查询 Facebook，以检索一些信息。所以我使用代码：

```
[FBRequestConnection startWithGraphPath:@"myGraphApiQuery"
                                 parameters:nil
                                 HTTPMethod:@"GET"
                          completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                 [myOutlet setTitle:@"Test"]; // here's the issue
}]; 
```

使用此代码`myOutlet`将永远不会设置`Test`标题，似乎插座没有链接。我不明白为什么我无法从...的块代码链接到我`completionHandler`的`FBRequestConnection`插座

如果我尝试`Title`从一个名为 from 的选择器中设置 from `ViewController`，那就没问题了..

有人可以解释一下它的原因吗？我仍然是一个objective-c初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T00:19:24.733

`FBRequestConnection`在后台线程上调用来自的回调。UIKit 调用必须在主线程上进行。试试这个：

```
[FBRequestConnection startWithGraphPath:@"myGraphApiQuery"
                             parameters:nil
                             HTTPMethod:@"GET"
                      completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                          dispatch_async(dispatch_get_main_queue(), ^{
                              [myOutlet setTitle:@"Test"];
                          });
}]; 
```

# entity-framework - 为什么我会从我的 EntitySet 中获得不同的值，这取决于我对它的 LINQ 方式？

> ID：12566058
> 
> 赞同：0
> 
> 时间：2012-09-24T13:27:59.503
> 
> 标签：entity-framework, linq-to-sql

在调试此线程中的问题时：[InvalidCastException when querying nested collection with LINQ](https://stackoverflow.com/questions/12483434/invalidcastexception-when-querying-nested-collection-with-linq)我发现我的 Category EntitySet 的填充方式有问题。选择一个类别并抛出此异常以查看发生了什么后，我得到了这个：

```
throw new Exception("CID: " + cat.CategoryID +
  " LCID: "        + cat.LocalizedCategories.First().LocalizedCategoryID +
  " CID from LC: " + cat.LocalizedCategories.First().Category.CategoryID); 
```

> CID：352 LCID：352 来自 LC 的 CID：191

我做错了什么导致 CategoryID 具有不同的值，具体取决于我对它的 LINQ 方式？它应该是 191，并且与 LocalizedCategoryID 的值不同。

这是我用来获取类别的代码：

```
int categoryId = 352; // In reality this comes from a parameter and is supposed
                      // to be 191 to get the Category.
var cat = categoriesRepository.Categories.First(c => c.CategoryID == categoryId); 
```

这是我的域对象，去掉了一些不相关的东西：

```
[Table(Name = "products")]
public class Product
{
    [HiddenInput(DisplayValue = false)]
    [Column(Name = "id", IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
    public int ProductID { get; set; }

    [Required(ErrorMessage = "Please enter a product name")]
    [Column]
    public string Name { get; set; }

    [Required(ErrorMessage = "Please enter a description")]
    [DataType(DataType.MultilineText)]
    [Column(Name = "info")]
    public string Description { get; set; }

    private EntitySet<Category> _Categories = new EntitySet<Category>();
    [System.Data.Linq.Mapping.Association(Storage = "_Categories", OtherKey = "CategoryID")]
    public ICollection<Category> Categories
    {
        get { return _Categories; }
        set { _Categories.Assign(value); }
    }
}

[Table(Name = "products_types")]
public class Category
{
    [HiddenInput(DisplayValue = false)]
    [Column(Name = "id", IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
    public int CategoryID { get; set; }

    public string NameByCountryId(int countryId)
    {
        return _LocalizedCategories.Single(lc => lc.CountryID == countryId).Name;
    }

    private EntitySet<LocalizedCategory> _LocalizedCategories = new EntitySet<LocalizedCategory>();
    [System.Data.Linq.Mapping.Association(Storage = "_LocalizedCategories", OtherKey = "LocalizedCategoryID")]
    public ICollection<LocalizedCategory> LocalizedCategories
    {
        get { return _LocalizedCategories; }
        set { _LocalizedCategories.Assign(value); }
    }

    private EntitySet<Product> _Products = new EntitySet<Product>();
    [System.Data.Linq.Mapping.Association(Storage = "_Products", OtherKey = "ProductID")]
    public ICollection<Product> Products
    {
        get { return _Products; }
        set { _Products.Assign(value); }
    }
}

[Table(Name = "products_types_localized")]
public class LocalizedCategory
{
    [HiddenInput(DisplayValue = false)]
    [Column(Name = "id", IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
    public int LocalizedCategoryID { get; set; }

    [Column(Name = "products_types_id")]
    private int CategoryID;
    private EntityRef<Category> _Category = new EntityRef<Category>();
    [System.Data.Linq.Mapping.Association(Storage = "_Category", ThisKey = "CategoryID")]
    public Category Category
    {
        get { return _Category.Entity; }
        set { _Category.Entity = value; }
    }

    [Column(Name = "country_id")]
    public int CountryID { get; set; }

    [Column]
    public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:54:22.883

这（在课堂上`Category`）看起来很奇怪：

```
[System.Data.Linq.Mapping.Association(Storage = "_LocalizedCategories",
    OtherKey = "LocalizedCategoryID" )] // ????
public ICollection<LocalizedCategory> LocalizedCategories 
```

`Category` has a collection of `LocalizedCategory`s, which means that in the database the table `products_types_localized` has a foreign key`CategoryID`. That field should be the "OtherKey". How was this mapping generated?

# python - 通过 Homebrew 使用 python2 和 python3 的 virtualenv

> ID：12566064
> 
> 赞同：7
> 
> 时间：2012-09-24T13:28:19.237
> 
> 标签：python, macos, python-3.x, virtualenv, homebrew

我已经用 Homebrew 安装了 python2 和 python3。我想使用 virtualenv，但我不确定是否需要为 python2/python3 安装它。我还想知道是否使用 virtualenvwrapper 我可以根据需要将 VIRTUALENVWRAPPER_PYTHON 设置为 python2 或 python3 吗？

任何帮助是极大的赞赏。

谢谢，格雷格

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T14:15:06.150

根据[这个 SO question](https://stackoverflow.com/questions/1534210/use-different-python-version-with-virtualenv)，您可以对两个版本使用一个`virtualenv`，只需使用`-p path/to/python/version`or`--python=path/to/version`标志来指定用于创建虚拟环境的版本。请注意，您可以将相同的标志与`mkvirtualenv`.

[这篇文章](http://www.insomnihack.com/?p=421)建议只使用系统 Python（在您的情况下为 2.7）自行安装`virtualenv`。

# python - Python Fabric：跳过拒绝的 SSH 连接？

> ID：12566065
> 
> 赞同：2
> 
> 时间：2012-09-24T13:28:19.753
> 
> 标签：python, ssh, fabric

我是 Python 和 Fabric 的新手，我修改了一个脚本，它在我们的 LAN 上 ping 主机（以确定哪些机器是活动的，我们有很多）登录到主机并将正在运行的进程列出回客户端。虽然这适用于服务器，但子网中似乎还有其他设备不允许 SSH 登录并且连接被拒绝，导致 Fabric 退出并出现致命错误。有什么方法可以让 Fabric 跳过任何拒绝连接的主机？
使用

```
with settings(warn_only=True) 
```

似乎没有帮助。
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:37:10.370

您可以设置[此环境变量](http://docs.fabfile.org/en/1.4.3/usage/env.html#skip-bad-hosts)，也可以使用[此标志](http://docs.fabfile.org/en/1.4.3/usage/fab.html#cmdoption--skip-bad-hosts)。如果您在标题中找不到它，最好搜索文档。

# regex - Sitecore 中 Treelist 的 RegEx 验证？

> ID：12566066
> 
> 赞同：0
> 
> 时间：2012-09-24T13:28:26.420
> 
> 标签：regex, sitecore

在 Sitecore 中，当我将项目添加到树列表时，我希望树列表只允许没有项目或 2 - 3 个项目。

在项目的模板中，我可以在验证字段中设置 RegEx 来实现这一点。

我在[这里](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/11/Validate-a-Sitecore-Checklist-Multilist-Treelist-or-TreelistEx-Field.aspx)找到了这个正则表达式：^.{0,116}$

此正则表达式允许 0-3 个项目。但是我怎么能不允许1？

*更新：编辑了我的第一个问题，以更准确地解决我的问题。对不起..*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T13:30:21.873

```
(...{2,3})? 
```

使您的表达式匹配 2 或 3 个项目，并使用 . 使整个表达式可选`?`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:42:16.213

想出了我的问题的答案。

这将正确验证：

```
^(.{0}|.{77,116})$ 
```

如果有人有更好的答案，请提交。谢谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:34:03.570

您可以执行以下操作：A(|foo{2,3})B 匹配 AB、AfoofooB 和 AfoofoofooB。

但是，您确实应该考虑也许不使用正则表达式来计算匹配数通常会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T13:56:08.327

答案是“是”（见 deceze 的回答）。但是，您要添加到列表中，并且不向列表中添加任何内容是一个 noop（除非您要添加一个空条目？）。您可以简单地查找 2 或 3 (...{2,3})。

这就是为什么最好为您的问题提供上下文，即当您获得最佳答案时。

当有 2 或 3 个匹配项时，此示例会将与您的模式匹配的所有行添加到列表中。

```
 var list = new List<Match>();
        var textlines = @"
This is a test
*}|{*
*}|{**}|{*
*}|{**}|{**}|{*
*}|{**}|{**}|{**}|{**}|{**}|{*
";

        var pattern = @"^(\*\}\|\{\*){2,3}$";
        var mx = Regex.Matches(textlines, pattern, RegexOptions.Multiline);

        foreach (Match m in mx)
            list.Add(m); 
```

但是，示例数据是根据您的模式设计的。这真的是您的数据的样子吗？或者你可能正在寻找更像......

```
 var list = new List<Match>();
        var textlines = @"
This is a test
*}|{*
*}|{*blah blah blah*}|{*
*}|{*blah blah blah*}|{*blah blah blah*}|{*
*}|{*blah blah blah*}|{*blah blah blah*}|{*blah blah blah*}|{*blah blah blah*}|{*blah blah blah*}|{*
";

        var pattern = @"^([^*]*\*\}\|\{\*){2,3}$"; //notice the change to the pattern
        var mx = Regex.Matches(textlines, pattern, RegexOptions.Multiline);

        foreach (Match m in mx)
            list.Add(m); 
```

无论如何，我希望这能在某种程度上帮助你。

# ruby-on-rails - 防止 HAML 中出现空行

> ID：12566071
> 
> 赞同：2
> 
> 时间：2012-09-24T13:28:40.467
> 
> 标签：ruby-on-rails, ruby, haml, erb

使用`.erb`，您可以这样做：

```
<%= some_func -%> 
```

我想知道是否有类似的技术使用`.haml`.

```
= some_func 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:42:08.973

一种解决方案是使用以下命令显式删除额外的换行符`chomp`：

```
= some_func.chomp 
```

可以完成任务的另一个功能是[空格删除语法](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#whitespace_removal__and_)：

```
%div<
= "test          " 
```

它返回以下 html：

```
<div>test</div> 
```

# php - $wpdb 表名

> ID：12566072
> 
> 赞同：1
> 
> 时间：2012-09-24T13:28:42.217
> 
> 标签：php, wordpress

我在通过以下方式从数据库获取数据时遇到问题`$wpdb`：

```
function nadji_sve_statuse() {
  global $wpdb, $leaguemanager;
  $league = $leaguemanager->getCurrentLeague();

  $svi_statusi = $wpdb->get_var( "SELECT * FROM {$wpdb->leaguemanager_person_status} WHERE 1" );

  return $svi_statusi;
 } 
```

当我`{$wpdb->leaguemanager_person_status}`用完整和真实的表名替换时`wp_leaguemanager_person_status`，它工作正常 - 但是当用户尝试将数据库表前缀重命名为其他名称时，就会出现一个新问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T14:25:00.803

你应该得到表的前缀，试试这个：

```
function nadji_sve_statuse() {
  global $wpdb, $leaguemanager;
  $league = $leaguemanager->getCurrentLeague();
  $tableName = $wpdb->prefix . 'leaguemanager_person_status';

  $svi_statusi = $wpdb->get_var( "SELECT * FROM {$tableName} WHERE 1" );

  return $svi_statusi;
 } 
```

# debugging - 在变量值更改时设置断点

> ID：12566076
> 
> 赞同：9
> 
> 时间：2012-09-24T13:29:15.173
> 
> 标签：debugging, language-agnostic

我只是想知道是否可以在变量值更改时设置断点（在任何编程语言和工具中）？

例如，我想说：“当变量 'a' 的值改变时，在任何地方停止”。

我知道可以设置条件断点并在变量具有特定值时停止执行，但我没有听说过观察变量变化。

如果不可能，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T08:24:19.837

根据我的经验，您可以通过“内存断点”或“内存观察点”来实现这一点。例如 gdb 是这样的：[我可以在 GDB 的“内存访问”上设置断点吗？](https://stackoverflow.com/questions/58851/can-i-set-a-breakpoint-on-memory-access-in-gdb)

据我所见，无论新值是否等于旧值，中断实际上`a`都会在*写入时触发。*因此，如果“改变”你真的是指“改变”，那么那里的例子就更少了。可能甚至没有，我不确定，尽管我认为实现仅更改观察点在技术上并不困难，假设您正在实现写入观察点。

对于某些语言，变量的种类有所不同`a`。例如，在 C 或 C++ 中，当启用优化时，变量可以“提升”到寄存器中，在这种情况下，变量地址上的硬件内存观察点不一定会捕捉到每个变化。

堆栈上的变量也有一个限制，如果你的函数退出但观察点仍然设置，那么它可以捕获对相同地址的访问，现在用于不同函数中的不同变量。如果稍后（或递归地）再次调用您的函数，它不一定从相同的堆栈位置开始，如果不是，那么您的观察点将无法捕获对不同位置的“相同”变量的访问。

“当特定条件在特定代码行为真时停止”在我的经验中称为“条件断点”。它通常使用不同的机制——调试器很可能会在该代码行放置一个断点指令。每次触发时，调试器都会检查条件，如果为假则继续执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T13:20:13.113

一些处理器支持硬件断点，当地址被读取或写入时会中断。例如，如果我在地址 0x10005060 处有一个 4 字节变量，那么我可以像这样设置一个硬件断点（使用 windbg）：ba w4 0x10005060。如果写入 4 个字节中的任何一个，处理器将中断。以下命令指示处理器在读取或写入这 4 个字节中的任何一个时中断：ba r4 0x10005060。

# selenium - “gotoIf”命令在 selenium IDE 中不起作用

> ID：12566079
> 
> 赞同：2
> 
> 时间：2012-09-24T13:29:25.763
> 
> 标签：selenium, selenium-ide

在我的测试用例中，我想检查天气是否已选中复选框。

如果未选中，则我将不继续，否则我将继续。

这是代码

```
 <tr>

             <td>storeValue</td>

           <td>//div[@id='insurance_type_selected']/div[@class='prod_type_list']/p[@class='groupTtl']/label[@for='prod_insurance_types_1']/input[@type='checkbox']/</td>
        <td>val</td>

    </tr>

    <tr>    

         <td>echo</td>
         <td>${val}</td>
         <td></td>
    </tr>

    <tr>

        <td>gotoIf</td>

        <td>storedVars['val']=='on'</td>

        <td>true</td>
    </tr> 
```

在执行期间显示此错误

> [信息] 执行：|gotoIf | 存储变量['val']=='on' | 真实 |
> 
> **[错误] 未知命令：'gotoIf'**

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:04:04.680

Selenium IDE 不支持 gotoif 命令，这就是您收到错误的原因`Unknown command: 'gotoIf'`

要在 selenium IDE 中使用`gotoif`命令，您需要导入文件。您可以从[这里获取该文件](http://wiki.openqa.org/pages/viewpageattachments.action?pageId=379&metadataLink=true)

您可以在[这里](http://radical-qa.blogspot.in/2012/02/selenium-ide_09.html)查看以供参考。

还可以查看[Xpath 以确定 Selenium IDE 中的复选框“已选中”属性](https://stackoverflow.com/questions/11758616/xpath-to-determine-checkbox-checked-attribute/11760025#11760025)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T17:29:27.713

您需要 SeleniumHQ 下载页面上列出的 Flow Control 插件：http: [//docs.seleniumhq.org/download/#side_plugins](http://docs.seleniumhq.org/download/#side_plugins)

直接链接：[https ://addons.mozilla.org/en-US/firefox/addon/85794/](https://addons.mozilla.org/en-US/firefox/addon/85794/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:36:42.377

```
if (assertChecked(label="prod_insurance_types_1")) {
    assertTrue(False) // this way it would fail and don't proceed
} else {
    // do sth 
```

据我所知，这样的事情应该有效

# iphone - 添加 Default-568h@2x.png 后 iPhone 5 TabBar 无法正常工作

> ID：12566080
> 
> 赞同：14
> 
> 时间：2012-09-24T13:29:27.073
> 
> 标签：iphone, ios6, iphone-5

> **可能重复：**
> [iPhone 5 TabBar 无法在正确位置运行](https://stackoverflow.com/questions/12569189/iphone-5-tabbar-not-functioning-in-proper-position)

我将魔术 Default-568h.png 添加到我的项目中，并且我的应用程序自行调整了大小。到目前为止，一切都很好。但是：我的 UITabBar 不再工作了。它的代表没有被调用。我首先认为它被另一个视图覆盖，但事实并非如此。代表在那里，一切都在我的“旧”iPhone 4 上运行。有什么想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-29T18:59:17.747

你需要做两件事：

1）您需要转到主 xib，单击窗口对象，然后设置“启动时全尺寸”属性。

2) 如果你正在转换一个旧项目，你还必须确保你的窗口根控制器设置为 tabbarcontroller。您可以通过拖入界面生成器或以编程方式在应用程序的 applicationDidFinishLaunching 方法中执行此操作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-02T22:25:24.637

确保为您的主窗口选中“启动时全屏”选项。前往 Interface Builder 并按照下面的 1、2、3 操作。

![在此处输入图像描述](../Images/803bd78d620b9287b1462fb4427177da.png)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-24T14:06:02.950

定义 TabBar 的高度。

# ruby - 使用模数的 Activerecord 检查 id

> ID：12566083
> 
> 赞同：1
> 
> 时间：2012-09-24T13:29:33.743
> 
> 标签：ruby, activerecord, modulo

我想在 Ruby 和 ActiveRecord 中使用多线程。

该程序应该同时通过多个线程访问同一个数据库，所以我的想法是`id`检查`:id % threadnumber = 0`. 但我不能让它工作。

我想用这个：

```
Url.where(:id % threadnumber = 0).first 
```

我想过重载`%`，但后来我必须为`:id`.

这可能吗？如果没有，我该如何使用模运算符？

这是一个例子：

```
id => thread number
1 =>  1
2 =>  2
3 =>  3
4 =>  2
5 =>  1
6 =>  3
7 =>  1
8 =>  2
9 =>  3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:39:39.137

```
Url.where('id % ? = 0', threadnumber).first 
```

# php - 如何从observer.php的下拉列表中获取选定的值

> ID：12566092
> 
> 赞同：1
> 
> 时间：2012-09-24T13:30:18.440
> 
> 标签：php, magento

如何从任何自定义管理模块的网格页面中的下拉菜单中获取选定的值？（我们希望选定的值显示在网格下（例如，状态下拉列表 --- 默认显示启用））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:43:18.427

考虑到您没有任何允许在下拉菜单中进行多项选择的 JS 插件，请为下拉菜单提供`name`属性和值（例如`name='drop_down1'`，并使用 $_POST/$_GET（无论您使用什么），在 php 文件中以 $ 的形式访问它_POST['drop_down1'] 或 $_GET['drop_down1']。这将为您提供选择的唯一值。

# html - 最长和最短的 HTML 字符实体名称是什么？

> ID：12566098
> 
> 赞同：1
> 
> 时间：2012-09-24T13:30:40.070
> 
> 标签：html, regex, xhtml, web, character-entities

管子周围有一百万个备忘单，它们以不同的理解水平列举了由各种版本和 HTML 规范指定的字符实体。我不想相信其中任何一个，所以我想我会把它扔在这里，看看是否有人发布更权威的答案。

因此，假设我想使用正则表达式匹配任何和所有字符引用和实体。我会从`/&(?:#(?:x[0-9a-f]+|[0-9]+)|[a-z]{???,???});/i`. 但是什么会进入`???`s？我可以想到有两个字符长的实体，比如`lt`和`gt`，但是在 HTML 的任何规范中是否有任何单字母实体？同样，最长的实体是什么？最后，除了直接键入它们之外，这*是在 HTML 中表达文字字符的仅有的三种语法，不是吗？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:44:16.533

HTML5 中最长的是`&CounterClockwiseContourIntegral;`，并且没有单字母名称。

但请注意，命名实体引用并不像您想象的那样工作。一些命名字符引用不以分号结尾，因此正则表达式不会削减芥末。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:43:49.040

HTML5 规范现在明确描述了自 90 年代中期以来浏览器用来纠正错误的方法：如果它与已知的字符引用不匹配，则逐字显示。因此，如果您希望您的正则表达式像浏览器一样工作，您必须复制浏览器的行为。

这意味着，您必须针对已知参考文献的完整列表进行测试，例如 Jukka 提到的参考文献。您可以巧妙地使用括号来缩写该术语，

```
[aeiou]uml 
```

但是您需要将相同的*知识*烘焙到浏览器具有的正则表达式中，以获得相同的结果。

*编辑：*顺便说一下，命名实体中也可能有数字，例如，`&ensp13;`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T13:38:12.193

实体名称过去有 2 到 7 个字母，遵循 SGML 传统，在 ​​HTML 4.01 规范（和 XHTML 规范）中仍然如此。但是 HTML5 草稿添加了大量实体，称为[命名字符引用](http://www.w3.org/TR/html5/named-character-references.html#named-character-references)，其中一些相当长，例如`EmptyVerySmallSquare`. 所以最好避免任何固定的上限——或大于 1 的下限。

# google-app-engine - 如何从 Java GAE 实例将大文件上传到 Google Cloud Storage

> ID：12566101
> 
> 赞同：2
> 
> 时间：2012-09-24T13:30:45.790
> 
> 标签：google-app-engine, google-cloud-storage

我想知道是否有办法通过Google App Engine应用程序上传大文件（*> 500MB*）tp **Google Cloud Storage**：我想这是不可能的，因为GAE servlet限制（执行时间<=60s ）。

它是正确的还是你知道一些新的技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T21:09:10.217

“通过”应用程序是什么意思？

您可以使用 createUploadUrl 并在 UploadOptions 中设置目标 Google Storage 存储桶，[该](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/UploadOptions.html)blob 将写入 Google 存储而不是 blobstore，上传完成后将调用您的回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:28:59.200

当您上传文件时，它位于您的客户端和云存储之间。在上传完成之前，您的前端实例不应有任何请求挂起。

话虽如此，如果由于某种原因您的前端应该作为“直通”链接参与，那么在后端实例上运行的 servlet 没有限制。您可以将上传小部件链接到后端实例，即调用 myBackend1.myApp.appspot.com。您可以在 GAE 文档中阅读如何配置后端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T22:20:34.947

另一种选择是使用 Google Cloud Storage 的直接上传机制：

[https://developers.google.com/storage/docs/reference-methods#postobject](https://developers.google.com/storage/docs/reference-methods#postobject)

您是否已经将其视为一种选择？

# silverlight-4.0 - 使用 Dispatcher.BeginInvoke() 将列表项添加到组合框

> ID：12566102
> 
> 赞同：1
> 
> 时间：2012-09-24T13:30:48.637
> 
> 标签：silverlight-4.0

我想通过 Dispatcher.BeginInvoke 向 ComboBox 添加一个列表。但是当我试图把它放在一个循环中时，只有最后一个值正在加载。

```
 private void LoadToComboBox(List<string> msg)
    {
        for (int i = 0; i < msg.Count; i++)
        {
           this.Dispatcher.BeginInvoke(() => cmbListItems.Items.Add(msg[i]));
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:08:19.457

Dispatcher.BeginInvoke() 是一个异步调用。发生的事情是，当您调用 `cmbListItems.Items.Add()`函数时，它已经设置为`msg.Count`.

尝试这样的事情：

```
private void LoadToComboBox(List<string> msg)
        {

            this.Dispatcher.BeginInvoke(() => 
            {
                for (int i = 0; i < msg.Count; i++) {
                    cmbListItems.Items.Add(msg[i]);
                }
            });

        } 
```

# java - 如何在Java中使用循环调用多个方法？

> ID：12566107
> 
> 赞同：2
> 
> 时间：2012-09-24T13:31:32.247
> 
> 标签：java, methods, call

假设我有一些这样的方法：

```
method1()
method2()
method3()
method4()
method5() 
```

但我不想调用序列方法：

```
obj.method1()
obj.method2()
obj.method3()
obj.method4()
obj.method5() 
```

这很无聊。如果我添加一个新方法：`method6()`，我需要添加手册：`obj.method6()`

如果我可以使用 Java 中的循环调用它们会更好。有人可以给我一些建议吗？

谢谢！

.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:37:04.117

尝试类似：

```
 for (int i=0;i<N;i++) {
      try {
        obj.getClass().getMethod("method"+i).invoke(obj);
      } catch (Exception e) {
         // give up
         break;
      }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:37:00.537

```
public static void callABunchOfMethods(Object obj, int count) throws Exception {
  for (int i = 1; i <= count; i++)
    obj.getClass().getMethod("method"+i).invoke(obj);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T13:38:48.897

我不知道你为什么对你的方法使用这样的命名惯例。如果不仅仅是例如，您应该考虑为他们找到更好的解决方案。今天这对你来说可能是显而易见的，但对于你的代码的追随者来说却不是。

关于手动添加假设的`method6`. 我认为添加一行代码总比减少它并失去代码的清晰度要好。

我的建议是，你应该使用[Facade 模式](http://en.wikipedia.org/wiki/Facade_pattern)

# ruby - SSL 模式标志 - 证书验证：使用 :none 是否安全？

> ID：12566110
> 
> 赞同：5
> 
> 时间：2012-09-24T13:31:37.530
> 
> 标签：ruby, soap, ssl, savon, httpi

我正在使用 Savon 和 HTTPi（分别是 Ruby 肥皂客户端和 Ruby HTTP 客户端的接口）通过 SSL 编写肥皂请求。这是代码：

```
client = Savon::Client.new(original_class.constantize.wsdl_url)
client.http.auth.ssl.cert_key_file = "path_to_the_key"
client.http.auth.ssl.cert_key_password = 'secret'
client.http.auth.ssl.cert_file = "path_to_the_certification"
client.http.auth.ssl.verify_mode = :none
@response = client.request :ins0, action do
  soap.body = encoded_body
end 
```

这是我让它工作的唯一方法。但是，我知道还有其他三种验证模式，它们是：

*   :peer (SSL_VERIFY_PEER)
*   :fail_if_no_peer_cert (SSL_VERIFY_FAIL_IF_NO_PEER_CERT)
*   :client_once (SSL_VERIFY_CLIENT_ONCE)

如果我将验证模式更改为上述任何其他模式，我会收到此错误：

```
OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed 
```

然后是我的问题（其中包括我的问题）：

*   如果我将验证模式保持为：none，我做错了吗？是否缺乏安全感？
*   错误的真正含义是什么？我的代码是错误的还是我的证书（这是自分配的——我在开发环境中）不好？

我阅读了有关验证模式的 OpenSSL 文档：

[http://www.openssl.org/docs/ssl/SSL_CTX_set_verify.html](http://www.openssl.org/docs/ssl/SSL_CTX_set_verify.html)

关于客户端模式下的 SSL_VERIFY_NONE 说：

> 在 TLS/SSL 握手之后，可以使用 SSL_get_verify_result(3) 函数检查证书验证过程的结果。**无论验证结果如何，都会继续握手**。

我应该担心吗？我应该将验证模式 :none 视为危险的事情吗？

我之所以这么问，是因为我无法使其与其他验证模式一起使用，因此我想以现在的工作方式通过 SSL 功能释放肥皂请求。但如果这可能很危险，我肯定不会这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T12:35:24.607

过了一会儿，我加入了 OpenSSL 用户支持邮件列表，终于得到了帮助。

简而言之：

模式标志 :fail_if_not_peer_cert 和 :client_once 仅用于服务器，对客户端没有任何意义，因此它们在客户端被忽略。

对于客户端目的，:peer (SSL_VERIFY_PEER) 是唯一重要的。

并且将验证模式设置为 :none (SSL_VERIFY_NONE) 是不安全的。这样，将不会有服务器身份验证。如果有人拦截了来自我的客户端的连接，我的客户端将无法检测到差异，并将敏感数据提供给攻击者。

为了使用 :peer，我需要在客户端 truststore 中有证书。

非常感谢来自 OpenSSL 邮件列表的 Dave Thompson。

# configuration - JMeter - 为通过 SSH 连接的 jmeter-server 测试配置有效负载时遇到问题

> ID：12566113
> 
> 赞同：2
> 
> 时间：2012-09-24T13:31:46.627
> 
> 标签：configuration, jms, jmeter

我正在为 JMeter 配置问题而烦恼。我在专用注入服务器上运行 JMeter，使用本地机器上的 gui 来控制测试 [编辑：连接是 SSH。客户端是 Windows 7，服务器是 Linux）。我已经从本地盒子运行了测试，并确认它们从那里正常工作。我将有效负载（每个包含一个 JSON 对象的文本文件）放到注入服务器上，并更改了消息源部分中的 Publisher 配置，因此路径指向那里的文件并且......什么都没有。

这是我得到的唯一输出：

```
2012/09/24 14:26:50 INFO  - jmeter.engine.ClientJMeterEngine: running clientengine run method 
2012/09/24 14:26:50 INFO  - jmeter.samplers.StandardSampleSender: Using StandardSampleSender for this test run 
2012/09/24 14:26:50 INFO  - jmeter.samplers.StandardSampleSender: Using StandardSampleSender for this test run 
2012/09/24 14:26:50 INFO  - jmeter.engine.ClientJMeterEngine: sent test to <IP_ADDRESS_OBSCURED> basedir='.' 
2012/09/24 14:26:50 INFO  - jmeter.engine.ClientJMeterEngine: Sending properties {} 
2012/09/24 14:26:50 INFO  - jmeter.engine.ClientJMeterEngine: sent run command to <IP_ADDRESS_OBSCURED> 
```

我不知道我做错了什么。我尝试了 Apache 的高度全面的文档，但令人惊讶的是，这根本没有任何内容。我应该如何在服务器上配置有效负载的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:40:14.700

巧合的是，我今天解决了这个问题，并且正在回家的路上发布答案。需要注意的重要一点是测试根本没有运行。服务器报告停止启动，但测试未运行。这就是为什么：

我使用的是 JMS Producer 采样器并通过 SSH 连接。这是问题的一部分。为了连接到远程 SSH 服务器，首先需要创建一个 SSH 隧道，然后使用特殊参数启动 JMeter 服务器和客户端。这篇有用且简洁的博客文章描述了该过程：

[http://blog.ionelmc.ro/2012/02/16/how-to-run-jmeter-over-ssh-tunnel/](http://blog.ionelmc.ro/2012/02/16/how-to-run-jmeter-over-ssh-tunnel/)

我犯的第二个错误是我在 Linux 机器 (CentOS) 上运行服务器，而在 Windows 7 桌面上运行客户端。不建议这样做，但我没有意识到它会阻止测试运行。我在我的 Windows 机器上放了一个 Linux VM，从那里运行测试，一切都运行良好。

# tfs - TFS 变更集签入之间的更改正在丢失

> ID：12566114
> 
> 赞同：1
> 
> 时间：2012-09-24T13:31:50.700
> 
> 标签：tfs

我发现当我们的承包商进行签到时，我的许多更改都“丢失”了。

一般流程如下：

1.  我执行一些错误分析并实施修复。
2.  然后我签入我的代码。
3.  承包商在以后执行签出/签入。
4.  先前变更集的更改（我的更改）将丢失。

在我看来，这是非常不可接受的，特别是当我处理自上次构建以来引入的应用程序中断回归时。

这种情况现在至少发生了两次，我唯一能想到的是承包商未能确保他在退房时拥有最新的变更集。我们的存储库不允许多次签出，并且强制在签出时获取最新信息，这使得事情变得如此奇怪（因为我们都应该使用服务器工作区）。

这个问题还有其他原因吗？我不想在没有确定我已经涵盖所有基础的情况下将我的担忧告诉我的直线经理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:02:34.800

`Get Latest item on check out`是在客户端而不是在 repo 中设置的，这意味着您的承包商可能仍然能够签出错误的版本。他们应该在这样做时遇到合并冲突，但这取决于他们编辑的位置（以及他们如何管理此类冲突）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T22:19:15.030

我已经看到 TFS 以这种方式丢失了更改。我昨天去了一个客户站点，进行了更改，签入，今天回到我的办公室，得到了更改（假设它会像往常一样与我的本地更改合并），刚刚去签到，我可以看到在它消除了客户端站点更改的差异中（显然忽略了本地合并）。我签入只是为了确认我所看到的，是的，不需要解决冲突，TFS 认为一切都很好，但是我修改后的本地文件只是公然覆盖了 TFS 中的修改版本，有效地丢弃了整个客户端站点更改（就像如果我选择了解决冲突，保留我的 - 但是它从来没有问过我关于冲突或暗示有冲突，只是默默地失去了它）

如果您在提交之前查看更改，您会发现您所做的更改比您想象的要多 - 即客户端站点更改已被有效删除并将显示为差异 - 但是当您这样做时很容易错过这一点很多。当他们以这种方式跳过我的更改时，我以前曾想过责怪同事，但现在我实际上已经看到自己对自己这样做了，我意识到该工具有缺陷。难以置信，但将本地更改的文件与“获取最新”合并的方式显然有问题。我有时使用带有不稳定网络连接的云 TFS - 我被告知这会导致问题。

# asp.net - 查找控件和 html 标签

> ID：12566116
> 
> 赞同：1
> 
> 时间：2012-09-24T13:32:00.397
> 
> 标签：asp.net

我的默认 aspx 文件中有此代码：

```
<body>
    <form id="form1" runat="server">
    <div>
        <asp:PlaceHolder ID="holder1" runat="server">
            <asp:Label ID="label1" runat="server" Text="Label">
            </asp:Label>
            <input type="text" ID="txt" runat="server"/>
            <asp:TextBox ID="txt2" runat="server"></asp:TextBox>
             <asp:Button Text="Ok" ID="btnOk" runat="server" onclick="btnOk_Click" />
        </asp:PlaceHolder>

    </div>
    </form>
</body> 
```

我背后的代码是：

```
 TextBox tb1 = holder1.FindControl("txt") as TextBox;
        Response.Write(tb1.Text);
        TextBox tb2 = holder1.FindControl("txt2") as TextBox;
        Response.Write(tb2.Text); 
```

我的问题是 findcontrol ("txt") 返回空值！！！因为我用过`<input>`，我该如何处理这个控件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:36:18.053

首先，您不需要，`holder1.FindControl`因为您可以直接访问控件。

要获得`input`控制权，请使用代码；

```
HtmlInputText tb1 = this.txt;
Response.Write(tb1.Value); 
```

您可能需要导入 System.Web.UI.HtmlControls。

```
Using System.Web.UI.HtmlControls; 
```

**编辑**

要查找通过 Javascript 动态添加的控件，您需要使用该`Request`对象。

```
string theValue = Request.Form["txt"].ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:36:24.177

一个`input type="text"`不是一个`TextBox`。因此，您应该将其转换为[`HtmlInputText`](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlinputtext.aspx)或使用 a`TextBox`代替。

```
var txt = (HtmlInputText)row.FindControl("txt"); 
```

请注意，您需要添加`using System.Web.UI.HtmlControls`,

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:37:00.410

MSDN：

> **Control.FindControl** : Method 在当前命名容器中搜索指定的服务器控件。

由于不是服务器控制，所以很难找到它！任何其他方式来处理不是服务器端的控件？

如果有人想要获取不在服务器上运行的文本框的文本会发生什么。

# php - 没有在 apache 上记录 php 错误

> ID：12566117
> 
> 赞同：3
> 
> 时间：2012-09-24T13:32:01.053
> 
> 标签：php, apache2

似乎我无法在我的服务器上进行错误日志记录，我已经按照[这里建议](https://stackoverflow.com/questions/176/apache-php-error-log-per-virtual-host "喜欢这里的建议")的描述设置了我的虚拟主机。

```
<VirtualHost *:80>
   ServerAdmin admin@server.com
   DocumentRoot /var/www/html
   ServerName www.server.com
   ServerAlias server.com
   LogFormat combined
   ErrorLog /var/log/apache2/server.com-error_log
   TransferLog /var/log/apache2/server.com-access_log
   php_flag log_errors on
   php_flag display_errors off
   php_value error_reporting 6143
   php_value error_log /var/log/apache2/server.com-php-error.log
   ...
</VirtualHost> 
```

正确写入访问和错误日​​志，创建php错误日志文件并与其他两个日志文件具有相同的权限。

我还尝试根据[本指南](http://www.electrictoolbox.com/log-php-errors-log-errors-error-log/)在 php.ini、.htaccess 文件和脚本中设置日志记录。

```
php -v
 PHP 5.2.10-2ubuntu6.10 with Suhosin-Patch 0.9.7 (cli) (built: May  2 2011 23:24:44) 
 Copyright (c) 1997-2009 The PHP Group
 Zend Engine v2.2.0, Copyright (c) 1998-2009 Zend Technologies 
```

还有其他地方可以查吗？vHost 配置在其他服务器上完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:38:50.210

输入您的 php 脚本：

```
error_reporting(E_ALL);
ini_set('display_errors', true); 
```

比您打印的错误和警告

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:17:05.273

可能是因为权限问题`/var/log/apache2`。考虑到 PHP 作为 apache 模块运行，所以它作为`www-data`用户运行（至少在 ubuntu 中）。因此，您需要该用户至少`/var/log/apache2`对日志文件具有执行权限和写入权限，或者更好的是，具有执行和写入权限`/var/log/apache2`（以便能够在需要时创建新的日志文件）。

因此，您可以将 php 日志保存到另一个文件夹，或使其可由`www-data`用户写入（在后一种情况下，您也可以编辑`/etc/logrotate.d/apache2`文件，以便轮换后的新日志文件归`www-data`用户所有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:21:29.353

尝试 PHP 日志的默认位置：/var/log/php.log

# http - 如何上传文件然后通过Nodejs（expressjs）将其发送到另一台服务器

> ID：12566118
> 
> 赞同：1
> 
> 时间：2012-09-24T13:32:05.717
> 
> 标签：http, node.js, express

1.  用户使用 input(type="file") 在服务器上上传文件
2.  `req.files.avatar`访问服务器端的文件

如何通过 HTTP POST 方法 (name="avatar") 将此文件 (req.files.avatar) 发送到另一台服务器。我不想在发送前存储它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:46:20.867

我想你在找什么；

```
https://github.com/nodejitsu/node-http-proxy 
```

# windows-7-x64 - 使用 EPIC、Indigo 和 Windows 7 64 位进行调试

> ID：12566123
> 
> 赞同：3
> 
> 时间：2012-09-24T13:32:13.720
> 
> 标签：windows-7-x64, eclipse-indigo, activeperl, epic

我正在尝试让 EPIC 调试器使用以下设置：

*   日蚀靛蓝
*   ActivePerl 5.14.2
*   史诗 0.6.44
*   Windows 7、64 位

当我启动调试器时，我收到以下消息：

```
在 (null) 第 1 行的子例程取消引用中使用未初始化的值。
perl5db.pl 没有返回真值。
BEGIN 失败——编译中止。

```

我已经阅读了关于这个**众所周知的错误（SourceForge ID 2907155）**的所有内容，并尝试了所有解决方案，但均无济于事。

*   最初，我无法安装 PadWalker（没有与 Windows 7 64 位兼容的可用版本），但随后我可以通过启动 PPM 并直接从所有可用软件包列表中选择此软件包来安装它。
*   我还安装了 PathTools（建议作为错误报告中的可能修复程序）。这导致 Cwd.pm 从 3.6 回滚到 3.3，但这似乎并不重要。
*   然后我编辑了 Cwd.pm（同样，正如错误报告中所建议的那样）并删除了`eval`被认为是问题根源的内容。
*   我关闭并重新打开 Eclipse。但是，我仍然得到同样的错误。

所以，我没有想法。也许某些修复是相反的？

有没有人让调试器为此配置工作？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:12:17.537

好的，我解决了这个问题，这就是我认为我是如何做到的（尝试了很多东西 - 包括草莓，所以我不确定究竟是什么有效）：

我留在 ActivePerl。EPIC 告诉您编辑 cwd.pm 文件，我这样做了，但没有帮助。后来我看到 cwd.pm 文件在两个地方： - C:\Perl64\lib - C:\Perl64\site\lib

我只更改了 C:\Perl64\lib 中的版本。当我还更改了 C:\Perl64\site\lib 中的版本时，一切正常。

格鲁斯，金

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-25T18:27:16.230

在 Eclipse 包含路径中添加 Perl 库文件夹的路径。

转到日食：`Eclipse -> Project->Properties->Perl Include Path`

添加 Perl 库文件夹：`Example: D:\Dwimperl\perl\lib`

# html - 列表 HTML 中的下拉菜单

> ID：12566124
> 
> 赞同：0
> 
> 时间：2012-09-24T13:32:14.953
> 
> 标签：html, css

我知道这个问题已经在几个线程中得到了回答，但这是不同的。

我正在使用 css 进行悬停下拉，一切正常：这是代码：http: [//jsfiddle.net/2UJDe/](http://jsfiddle.net/2UJDe/)

因为，代码下拉列表没有像预期的那样好，我添加了一些代码，这里是生成的代码：http: [//jsfiddle.net/geJmF/](http://jsfiddle.net/geJmF/) （我已将 id 添加到单个列表以修复下拉位置）但不知何故现在事情不正常了。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:38:43.050

将浮动属性更改为右侧：

```
#navbar_2 li a
{
    background : #878787;
    color : white;
    float : right; 
```

并更改一些高度和宽度，菜单 2 选项卡看起来像：http: [//jsfiddle.net/jvKRN/35/](http://jsfiddle.net/jvKRN/35/)

这里的 CSS：

```
#navbar_2
{
    height : 200px;
    left : 140px;
    overflow : hidden;
    position : absolute;
    top : 70px;
    width : 800px;
    display : inline-table;
    list-style : none;
    margin : 0;
    padding : 0;
    table-layout : fixed;

}

#navbar_2 li
{
    background-color : #878787;
    display : table-cell;

}

#navbar_2 li a
{
    background : #878787;
    color : white;
    float : right;
    font-family : Arial,sans-serif;
    font-size : 32px;
    height : 100.000%;
    line-height : 200px;
    padding : 0px 0;
    text-align : center;
    text-decoration : none;
    white-space : nowrap;
    width : 100%;

    border-left : 1px solid black;
}

#navbar_2 li a:hover
{
    background : black;
     color : white;

}

#navbar_2 li:hover ul
{
    left: auto;

}

#navbar_2 li ul
{
    position: absolute;
    width: 200px;
    left: -999em;

}

#navbar_2_1
{
    display : inline;
    height : 600px;
    list-style : none;
    overflow : hidden;
    position : absolute;
    table-layout : auto;
    top : 200px;
    width : 200px;

}
#navbar_2_2
{
    display : inline;
    height : 600px;
       list-style : none;
    margin : 0;
    overflow : hidden;
    padding : 0;
    position : absolute;
    table-layout : auto;
    top : 200px;
    width : 200px;

}

#navbar_2_3
{
    display : inline;
    height : 600px;
    left : 740px;
    list-style : none;
    margin : 0;
    overflow : hidden;
    padding : 0;
    position : absolute;
    table-layout : auto;
    top : 200px;
    width : 200px;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:06:54.533

有几处不正确。

我不确定您为什么使用表格单元格显示属性，它们不是必需的，并且可能会阻碍您的显示。

其次，因为我们正在处理行为不同的多个导航级别，我们需要能够定位/限制我们的样式。在这种情况下，我在我的样式中使用了子选择 ( > ) 来执行此操作。

这是一个工作小提琴：http: [//jsfiddle.net/Nb4zU/](http://jsfiddle.net/Nb4zU/)

# grails - 如何在 grails 和 groovy 中调用存储过程

> ID：12566129
> 
> 赞同：0
> 
> 时间：2012-09-24T13:32:28.040
> 
> 标签：grails, stored-procedures, groovy

我有一个要求，比如在 groovy 和 grails 中调用存储过程。我正在使用 Mongodb 作为数据库。谁能告诉我一步一步调用存储过程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:15:00.173

旨在从 Grails 服务中执行此操作。

```
// Inject a data source: 
def dataSource //or def dataSource_<other named DS name>

def serviceMethod() {
  Sql sql = new Sql(dataSource_messages)

  def sqlCall = "exec sp_name :param1, :param2"
  final paramMap = [param1: new Timestamp(dateFrom.time), param2: new Timestamp(dateTo.time)]
  log.info "Running: $sqlCall with params $paramMap"
  def rows = []
  try {
      rows = sql.rows(sqlCall, paramMap)
  } catch (Exception e) {
      log.warn "Could not execute ${sqlCall} with params ${paramMap}: ${e.getMessage()}", e
  }
  rows 
```

}

可选择转换为命令对象：

```
rows.collect { row -> new MyCmd(row) }

public class MyCmd {
    String spField1
    String spField2
    Date dateTime
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-09T11:37:54.917

您也可以通过以下方式执行此操作

```
def dataSource 
        def  dataList = []
        Sql sql = Sql.newInstance(dataSource)
        def camp = "Campaign"            
        dataList = sql.rows("{call sp_upldata(?)}",[camp])
        sql.close() 
```

这里`sp_upldata`是在数据库中创建的存储过程的名称，存储`camp`要从中查找结果的数据。查询得到的数据将保存在`dataList`. 上面的示例查询将在普通 sql 查询的情况下进行

`select * from table_name where table_name.column_name = 'Campaign';`

# java - onClickListener 没有被第二次调用 Android

> ID：12566133
> 
> 赞同：0
> 
> 时间：2012-09-24T13:32:42.200
> 
> 标签：java, android, multithreading, onclicklistener

我正在使用贝宝付款，因为我必须在 onCreate() 方法中运行线程，该方法使用贝宝图像初始化按钮......这个文件不是空白的。” 但在此之后，当我更正该字段并再次单击 Btn 时，它什么也不做。

```
Thread libraryInitializationThread = new Thread() {
            public void run() {

                initLibrary();

                // The library is initialised so let's create our CheckoutButton
                // and update the UI.
                if (PayPal.getInstance().isLibraryInitialized()) {

                    runOnUiThread(new Runnable() {
                        public void run() {
                            /**
                             * Create our CheckoutButton and update the UI.
                             */
                            PayPal pp = PayPal.getInstance();

                            /**
                             * Get the CheckoutButton. There are five
                             * differentsizes. The text on the button can either
                             * be of type TEXT_PAY or TEXT_DONATE.
                             **/
                            launchChainedPaymentBtn = pp.getCheckoutButton(
                                    BuyDeal.this, PayPal.BUTTON_194x37,
                                    CheckoutButton.TEXT_PAY);

                            /**
                             * You'll need to have an OnClickListener for the
                             * CheckoutButton. For this application, MPL_Example
                             * implements OnClickListener and we have the
                             * onClick() method below.
                             **/
                            launchChainedPaymentBtn
                                    .setOnClickListener(new OnClickListener() {

                                        @Override
                                        public void onClick(View v) {

                                            // dealResponse
                                            getDealResponseLogic();

                                        }
                                    });
                            //
                            BottomBtnsLinearLayout
                                    .addView(launchChainedPaymentBtn);
                            Log.v("Btn added ", "SuccessFully...");
                            Flag = true;
                        }
                    });
                    //
                    //
                    BottomBtnsLinearLayout.addView(launchChainedPaymentBtn);
                    Log.v("Btn added ", "SuccessFully...");
                    // }
                    // });

                    Log.i("Lib. initialized", "now...");

                    /** Calling Thread to add Btn to It! **/
                    AddPayPalBtn.start();

                } else {

                    Log.i("Cannot Initialize Payment Btn",
                            "setAPyment Btn..failed due to Lib. initialization..");
                }

            }

        };
        libraryInitializationThread.start(); 
```

我在我的活动的 onCreate() 方法中调用了上面的线程。

dealResponseLogic() 的代码只处理验证。

初始化库（）；它让 PayPal 实例利用互联网，然后设置该实例的一些字段。

我知道我可以从那个 btn 监听器代码 btn 调用那个线程，我正在寻找另一种方式。

请...任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:52:23.220

试试这个..

**在..的方法**里面****创建**并**启动**`thread` **`onClick()``Button`****

 ******例如：**

```
Button b = (Button)findViewById(R.id.button_Start);

b.closeButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {

        Thread t = new Thread(new Runnable(){

           public void run(){

               // DO YOUR LONG TIME TAKING WORK HERE.......

             }

                });

             t.start();
    }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:26:27.890

我认为这很容易。使用贝宝时，您必须使用贝宝创建按钮，因此贝宝提供了一种方法来更新该按钮，即您只想调用该方法的 updateButton()。因此，每次单击时，您的按钮都可以正常工作。****

# c++ - 在 C++ 中添加两个日期

> ID：12566150
> 
> 赞同：1
> 
> 时间：2012-09-24T13:33:44.293
> 
> 标签：c++, c, time, ctime

我确信这个问题在其他地方得到了回答，但我在 Google 或 SO 上找不到它，所以就这样吧。

在 C/C++ 中，我想以 dd-hh:mm:ss 提供的格式转换相对时间

```
ps -o etime 
```

到一个绝对 UTC 格式的日期。

这看起来应该不是很难。假设我已经有了一个函数来生成以 struct tm 格式存储的相对时间：

```
struct tm *starting_rel_time = my_reltime_converstion(...);
time_t t = time(0);
struct tm *current_abs_time =  localtime(&t); 
```

我想要的基本上与difftime相反：

```
struct *tm starting_abs_time = current_abs_time - starting_rel_time; 
```

现在，我可以编写自己的函数来进行转换，但由于所有的进位操作和特殊条件（闰年等），这是一场噩梦。在 C/C++ 库中肯定有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:37:21.393

使用[Boost::Date_Time](http://www.boost.org/doc/libs/1_51_0/doc/html/date_time.html)库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:43:58.717

`DD-HH:MM::SS`用简单的数学将秒转换为秒；它是相对时间，所以只需相乘和相加。然后，`current time()`以秒为单位查询（假设它是“相对于现在”），并添加它们。然后使用`gmtime`转换回`struct tm`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T13:45:06.310

没有像 C/C++ 这样的语言。

如果您询问 C，我建议在内部使用简单的数字类型表示日期，并`struct tm`仅在必要时进行转换。如果你只需要覆盖几十年，那么你可以使用`time_t`标准`gmtime`和`mktime`库函数进行转换。为了涵盖更广泛的时间跨度，您可以使用[儒略日](http://en.wikipedia.org/wiki/Julian_day)表示。

如果您询问 C++，我建议您使用[Boost.Date_Time](http://www.boost.org/doc/libs/release/doc/html/date_time.html)库。当然，如果 C 库函数满足您的需要，它们仍然可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:28:13.420

你试图做的事情没有意义。您不能添加两个日期。（并且`difftime`不返回日期，也不返回`time_t`.）

实际上，在大多数（如果不是全部）实现中，`time_t`将是一个整数类型，具有自某个特定“纪元”以来的秒数。在这样的机器上，您可以从 a 中添加或减去整数秒`time_t`以获得新时间，至少如果您感兴趣的所有时间都在`time_t`（在大多数 Unix 平台上大约在 1970 到 2038 之间）所支持的时间间隔内）。这与和`gmtime`一起 可能足以满足您的需求。特别注意“更正”它的输入所必需的：例如，您可以取 a ，将 5 添加到 field ，调用 它，`mktime``localtime``mktime``tm``tm``tm_mday``mktime``mktime`.

*如果*这还不够，C++11 既有 a`time_point`又有一个 `duration`类，其中（快速浏览）似乎拥有您可能需要的所有功能。

# python - 在 Python 中首先执行哪个类？

> ID：12566151
> 
> 赞同：1
> 
> 时间：2012-09-24T13:33:44.843
> 
> 标签：python

在类中包含所有代码是否正确？我有一门课可以做我所有的计算等等。但是我在一个类之外拥有所有其余的代码（主要用于调用该类）。它看起来像这样。

```
class bigClass:
  executing here
  functions and whatnot
  blah blah

b=bigClass()
b.bigClassfunction() 
```

我的问题是最后两行是否应该属于他们自己的一类？还是我只是让它们漂浮在不受课程约束的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:37:01.947

没关系，没有必要把它们放在一个班级里。如果您需要多次重复代码，则可以选择一个函数。

一个类不应该用于这样的事情；与维基百科一样，类的作用是

> 在面向对象的编程中，类是用于创建自身实例的构造——称为类实例、类对象、实例对象或简称为对象。一个类定义了使它的实例具有状态和行为的组成成员。数据字段成员（成员变量或实例变量）使类实例能够保持状态。其他类型的成员，尤其是方法，使类实例的行为成为可能。类定义其实例的类型。

尽管您可以将此代码嵌入到类中，但如果只需要执行一次，则无需将其放入类中。

编辑：据我所知，混淆是关于如何指示python首先运行哪个代码，就像你在类中`java`使用`main`方法一样`ProjectName`。在 python 中，代码自上而下运行。每个语句都是在旅途中计算的。例如，这就是为什么您不能引用高于其定义的类的原因。

```
obj = Klass()
class Klass: pass #Doesn't work! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:37:15.200

您的问题不是特别清楚，但您**总是**会将与类相关的所有代码放在类中。做其他明智的事情没有设计意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:58:49.200

有些人将他们的“主要”代码放入一个块中，例如：

```
if __name__ == '__main__':
    foo()
    bar() 
```

有关更多信息，请参阅[此](https://stackoverflow.com/questions/419163/what-does-if-name-main-do)线程。

但是，不要为了拥有类而使用类*。*它不是很“Pythonic”。

# python - python'x天前'到日期时间

> ID：12566152
> 
> 赞同：16
> 
> 时间：2012-09-24T13:33:47.773
> 
> 标签：python, datetime

我有以以下格式显示日期的字符串：

```
x minutes/hours/days/months/years ago 
```

我需要使用 python 将其解析为日期时间。

看来 dateutil 做不到。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T13:38:35.200

当然你可以做到。你只需要一个[`timedelta`](http://docs.python.org/library/datetime.html#timedelta-objects).

```
s = "3 days ago"
parsed_s = [s.split()[:2]]
time_dict = dict((fmt,float(amount)) for amount,fmt in parsed_s)
dt = datetime.timedelta(**time_dict)
past_time = datetime.datetime.now() - dt 
```

顺便说一句，它看起来像[`dateutil`](http://labix.org/python-dateutil#head-ba5ffd4df8111d1b83fc194b97ebecf837add454)一个`relativedelta`时间增量，但构造函数也接受`months`和`years`在参数中（显然参数需要是整数）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-03-31T11:39:18.670

Since your arguments are something like 2 days ago, 3 months ago, 2 years ago. The function below could be of help in getting the exact date for the arguments. You first need to import the following date utils

```
import datetime
from dateutil.relativedelta import relativedelta 
```

Then implement the function below

```
def get_past_date(str_days_ago):
    TODAY = datetime.date.today()
    splitted = str_days_ago.split()
    if len(splitted) == 1 and splitted[0].lower() == 'today':
        return str(TODAY.isoformat())
    elif len(splitted) == 1 and splitted[0].lower() == 'yesterday':
        date = TODAY - relativedelta(days=1)
        return str(date.isoformat())
    elif splitted[1].lower() in ['hour', 'hours', 'hr', 'hrs', 'h']:
        date = datetime.datetime.now() - relativedelta(hours=int(splitted[0]))
        return str(date.date().isoformat())
    elif splitted[1].lower() in ['day', 'days', 'd']:
        date = TODAY - relativedelta(days=int(splitted[0]))
        return str(date.isoformat())
    elif splitted[1].lower() in ['wk', 'wks', 'week', 'weeks', 'w']:
        date = TODAY - relativedelta(weeks=int(splitted[0]))
        return str(date.isoformat())
    elif splitted[1].lower() in ['mon', 'mons', 'month', 'months', 'm']:
        date = TODAY - relativedelta(months=int(splitted[0]))
        return str(date.isoformat())
    elif splitted[1].lower() in ['yrs', 'yr', 'years', 'year', 'y']:
        date = TODAY - relativedelta(years=int(splitted[0]))
        return str(date.isoformat())
    else:
        return "Wrong Argument format" 
```

You can then call the function like this:

```
print get_past_date('5 hours ago')
print get_past_date('yesterday')
print get_past_date('3 days ago')
print get_past_date('4 months ago')
print get_past_date('2 years ago')
print get_past_date('today') 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-24T13:39:17.607

这可以通过[`timedelta`](http://docs.python.org/dev/library/datetime.html#timedelta-objects)s 轻松完成：

```
import datetime

def string_to_delta(string_delta):
    value, unit, _ = string_delta.split()
    return datetime.timedelta(**{unit: float(value)}) 
```

生产：

```
>>> string_to_delta("20 hours ago")
datetime.timedelta(0, 72000) 
```

虽然这将需要一些额外的工作来处理月/年 - 因为将一个月添加到日期是一个模棱两可的操作，但如果您知道您想要它的含义，它应该是一个简单的添加。

To get an actual time, simply take the delta away from [`datetime.datetime.now()`](http://docs.python.org/dev/library/datetime.html#datetime.datetime.now).

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-06-08T15:27:44.043

Easiest way is to use dateparser:

```
import dateparser
date_ago="4 months ago" 
date=dateparser.parse(date).strftime("%Y-%m-%d")
date 
```

Output:

```
'2020-01-08' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-01-22T16:13:18.083

@mgilson answer didn't work for me where **dateutil.relativedelta** did the job:

*Edited following @mosc9575 advise*

```
import datetime
from dateutil.relativedelta import relativedelta

time_ago = "1 month ago"
val, unit = time_ago.split()[:2]
past_time = datetime.datetime.now() - relativedelta(**{unit:int(val)}) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-07T11:45:08.157

completely exaggerated solution but I needed something more flexible:

```
def string_to_delta(relative):
    #using simplistic year (no leap months are 30 days long.
    #WARNING: 12 months != 1 year
    unit_mapping = [('mic', 'microseconds', 1),
                    ('millis', 'microseconds', 1000),
                    ('sec', 'seconds', 1),
                    ('day', 'days', 1),
                    ('week', 'days', 7),
                    ('mon', 'days', 30),
                    ('year', 'days', 365)]
    try:
        tokens = relative.lower().split(' ')
        past = False
        if tokens[-1] == 'ago':
            past = True
            tokens =  tokens[:-1]
        elif tokens[0] == 'in':
            tokens = tokens[1:]

        units = dict(days = 0, seconds = 0, microseconds = 0)
        #we should always get pairs, if not we let this die and throw an exception
        while len(tokens) > 0:
            value = tokens.pop(0)
            if value == 'and':    #just skip this token
                continue
            else:
                value = float(value)

            unit = tokens.pop(0)
            for match, time_unit, time_constant in unit_mapping:
                if unit.startswith(match):
                    units[time_unit] += value * time_constant
        return datetime.timedelta(**units), past

    except Exception as e:
        raise ValueError("Don't know how to parse %s: %s" % (relative, e)) 
```

This can parse things like:

*   `2 days ago`
*   `in 60 seconds`
*   `2 DAY and 4 Secs`
*   `in 1 year, 1 Month, 2 days and 4 MICRO`
*   `2 Weeks 4 secs ago`
*   `7 millis ago`

A huge *but*: It simplifies month and year to 30 and 365 days respectively. Not always what you want, though it's enough for some cases.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-23T12:29:42.107

Custom function to convert `x hours ago` to `datetime`, `x hour, y mins ago` to `datetime`, etc in Python.

Function takes single parameter of type string which is parsed using RegExp. RegExp can be customized to match function input.

For usage see examples below.

```
import re
from datetime import datetime, timedelta

def convert_datetime(datetime_ago):
    matches = re.search(r"(\d+ weeks?,? )?(\d+ days?,? )?(\d+ hours?,? )?(\d+ mins?,? )?(\d+ secs? )?ago", datetime_ago)

    if not matches:
        return None

    date_pieces = {'week': 0, 'day': 0, 'hour': 0, 'min': 0, 'sec': 0}

    for i in range(1, len(date_pieces) + 1):
        if matches.group(i):
            value_unit = matches.group(i).rstrip(', ')
            if len(value_unit.split()) == 2:
                value, unit = value_unit.split()
                date_pieces[unit.rstrip('s')] = int(value)

    d = datetime.today() - timedelta(
        weeks=date_pieces['week'],
        days=date_pieces['day'],
        hours=date_pieces['hour'],
        minutes=date_pieces['min'],
        seconds=date_pieces['sec']
    )

    return d 
```

Example usage:

```
dates = [
    '1 week, 6 days, 11 hours, 20 mins, 13 secs ago',
    '1 week, 10 hours ago',
    '1 week, 1 day ago',
    '6 days, 11 hours, 20 mins ago',
    '1 hour ago',
    '11 hours, 20 mins ago',
    '20 mins 10 secs ago',
    '10 secs ago',
    '1 sec ago',
]    

for date in dates:
    print(convert_datetime(date)) 
```

Output:

```
2019-05-10 06:26:40.937027
2019-05-16 07:46:53.937027
2019-05-15 17:46:53.937027
2019-05-17 06:26:53.937027
2019-05-23 16:46:53.937027
2019-05-23 06:26:53.937027
2019-05-23 17:26:43.937027
2019-05-23 17:46:43.937027
2019-05-23 17:46:52.937027 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-30T20:11:44.300

make sure to install dependencies using pip3

```
from datetime import date
from dateutil.relativedelta import relativedelta
import re

baseDate = date.today() #date(2020, 4, 29)

hoursPattern = re.compile(r'(\d\d?\d?) hours? ago')
daysPattern = re.compile(r'(\d\d?\d?) days? ago')
weeksPattern = re.compile(r'(\d\d?\d?) weeks? ago')
monthsPattern = re.compile(r'(\d\d?\d?) months? ago')
yearsPattern = re.compile(r'(\d\d?\d?) years? ago')

days = 0
daysMatch = daysPattern.search(ago)
if daysMatch:
    days += int(daysMatch.group(1))

hours = 0
hoursMatch = hoursPattern.search(ago)
if hoursMatch:
    hours += int(hoursMatch.group(1))

weeks = 0
weeksMatch = weeksPattern.search(ago)
if weeksMatch:
    weeks += int(weeksMatch.group(1))

months = 0
monthsMatch = monthsPattern.search(ago)
if monthsMatch:
    months += int(monthsMatch.group(1))

years = 0
yearsMatch = yearsPattern.search(ago)
if yearsMatch:
    years += int(yearsMatch.group(1))

yourDate = baseDate - relativedelta(hours=hours, days=days, weeks=weeks, months=months, years=years) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-24T08:01:18.830

Any chance for **datetime** to work with other languages (italian) '*x-days ago to date*'?

```
import locale\
locale.setlocale(locale.LC_ALL,'it_IT.UTF-8') 
```

doesn't make any difference.

# javascript - jQuery serializeArray() 的高级使用

> ID：12566154
> 
> 赞同：0
> 
> 时间：2012-09-24T13:33:54.623
> 
> 标签：javascript, jquery, html, ajax, forms

我目前正在通过 ajax 提交一个表单并传入一个手动创建的数据变量，看起来有点像这样：

```
var data = 'answer1='
    + $("input[name=question_1]:checked").val()
    + '&q1_option=' + $("input[name=question_1]:checked").attr("id") 
```

这在整个表单元素列表中继续存在，明显递增 question_2、question_3 等。问题是这有点混乱。我想使用 jQuery serializeArray 但是，为此我需要传入一个额外的参数。我需要传递输入值和输入 id，因为该 id 在数据中使用。

有没有办法使用 jQuery serializeArray() 来实现这一点？

示例表单标记：

```
<label>What is your gender?<span class="required"> *</span></label>
<input id="1" type="radio" name="question_1" value="Male"><label class="standard" for="1">Male</label><br>
<input id="2" type="radio" name="question_1" value="Female"><label class="standard" for="2">Female</label><br>
<label>How old are you?<span class="required"> *</span></label>
<input id="3" type="radio" name="question_2" value="Under 25"><label class="standard" for="3">Under 25</label<br>
<input id="4" type="radio" name="question_2" value="25-29"><label class="standard" for="4">25-29</label><br>
<input id="5" type="radio" name="question_2" value="30-39"><label class="standard" for="5">30-39</label><br>
<input id="6" type="radio" name="question_2" value="40-49"><label class="standard" for="6">40-49</label><br> 
<input id="7" type="radio" name="question_2" value="50-59"><label class="standard" for="7">50-59</label><br>
<input id="8" type="radio" name="question_2" value="60+"><label class="standard" for="8">60+</label><br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:44:02.123

首先，让我指出，这看起来像是对表格的滥用。如果表单元素的名称将是“answer1”而不是“question_1”，并且如果您的选项将被命名为“q1_option”而不是“question_1”，并且如果您访问它们的值而不是它们的 id，那么您将能够以简单的单行方式将表单序列化，本质上，这就是要传达的`name`意思`value`。

话虽如此，`$.serializeArray`产生一个键/值对数组。很难看出您`$.serializeArray`在特定场景中想要做什么。如果你想要这样一个数组，你可以自己构造它：

```
var keyValuePairs = [];

keyValuePairs.push({ name: 'answer1', value: $('input[name=question_1]:checked').val() })

var options = $('input[name^="question_"]:checked');    
for(var i = 0; l = options.length; i < l; i++) {
   keyValuePairs.push({ 
      name: 'q' + i + '_option', 
      value: options.get(i).attr('id')
   });
} 
```

给定这样一个数组，您可以将其序列化为示例中的字符串，使用

```
var data = $.param(keyValuePairs); 
```

# core-graphics - 缩放 UIBezierPath 使其移动

> ID：12566159
> 
> 赞同：3
> 
> 时间：2012-09-24T13:33:59.870
> 
> 标签：core-graphics, scale, cgaffinetransform, uibezierpath, cgaffinetransformscale

我画了一个`UIBezierPath`里面的`UIView`。我尝试放大和`pinchGesture`缩小它。

缩放有效，但我的问题是`UIBezierPath`向下/向上移动（如果它的尺寸增加，它会向下移动，如果尺寸减小它会向上移动）。

如何设置缩放的锚点以使`UIBezierPath`中心保持在同一位置？

```
- (void)handlePinch:(UIPinchGestureRecognizer *)recognizer {
  CGAffineTransform transform = CGAffineTransformScale(recognizer.view.transform, 
                                                       recognizer.scale, 
                                                       recognizer.scale);
  [self.selectedObject applyAffineTransform:transform];
  recognizer.scale = 1;
} 
```

（selectedObject 是一个仅将 应用于`affineTransform`其的对象`UIBezierPath`）

除了缩放之外，我还尝试应用平移以将其移回原来的位置，但我不知道如何找到平移的值，因此路径保持在同一个地方。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T06:39:05.573

好的，经过多次尝试后我设法解决了它，在缩放之后我需要添加一个平移，对于平移的距离，我需要比较我的 uibezierpath 的边界并减去原点的变化和宽度和高度增加的一半在代码中是相同的翻译：

```
- (void)handlePinch:(UIPinchGestureRecognizer *)recognizer {
CGRect originalBounds = self.selectedObject.bounds;

CGAffineTransform scale = CGAffineTransformMakeScale(recognizer.scale, recognizer.scale);
[self.selectedObject applyAffineTransform:scale];

CGAffineTransform translate = CGAffineTransformMakeTranslation(-(self.selectedObject.bounds.origin.x - originalBounds.origin.x) - (self.selectedObject.bounds.size.width - originalBounds.size.width) * 0.5, -(self.selectedObject.bounds.origin.y - originalBounds.origin.y) - (self.selectedObject.bounds.size.height - originalBounds.size.height) * 0.5);
[self.selectedObject applyAffineTransform:translate];

recognizer.scale = 1;
} 
```

我希望这对其他人也有帮助。

# c# - 类型化工厂设施创建递归嵌套实体

> ID：12566162
> 
> 赞同：3
> 
> 时间：2012-09-24T13:34:05.000
> 
> 标签：c#, castle-windsor, windsor-3.0

考虑需要创建一些递归嵌套事物的情况，例如：

```
 public interface IRecurrentTestNodeFactory
    {
        RecurrentTestNode Create(int num);
    }

    public class RecurrentTestNode
    {
        public int Num { get; set; }
        public RecurrentTestNode Child { get; set; }

        public RecurrentTestNode(int num, IRecurrentTestNodeFactory factory)
        {
            Num = num;
            Child = num > 0 ? factory.Create(num - 1) : null;
        }
    } 
```

明显的实现是这样的：

```
 public class ManualRecurrentTestNodeFactory : IRecurrentTestNodeFactory
    {
        public RecurrentTestNode Create(int num)
        {
            return new RecurrentTestNode(num, this);
        }
    }

    [Test]
    public void ManualRecurrentTest()
    {
        var root = new ManualRecurrentTestNodeFactory().Create(1);
        Assert.NotNull(root);
        Assert.AreEqual(1, root.Num);
        Assert.NotNull(root.Child);
        Assert.AreEqual(0, root.Child.Num);
        Assert.Null(root.Child.Child);
    } 
```

该测试通过。但是，如果您尝试对 Windsor 的 Typed Factory Facility 做同样的事情：

```
 [Test]
    public void RecurrentTest()
    {
        var windsor = new WindsorContainer();
        windsor.Kernel.AddFacility<TypedFactoryFacility>();
        windsor.Register(Component.For<IRecurrentTestNodeFactory>().AsFactory());
        windsor.Register(Component.For<RecurrentTestNode>().LifeStyle.Transient);

        var f = windsor.Resolve<IRecurrentTestNodeFactory>();
        var root = f.Create(1);
        Assert.NotNull(root);
        Assert.AreEqual(1, root.Num);
        Assert.NotNull(root.Child);
        Assert.AreEqual(0, root.Child.Num);
        Assert.Null(root.Child.Child);
    } 
```

它失败了，但有以下例外：

```
Castle.MicroKernel.ComponentActivator.ComponentActivatorException : ComponentActivator: could not instantiate Tests.RecurrentTestNode
  ----> System.Reflection.TargetInvocationException : Exception has been thrown by the target of an invocation.
  ----> Castle.MicroKernel.CircularDependencyException : Dependency cycle has been detected when trying to resolve component 'Tests.RecurrentTestNode'.
The resolution tree that resulted in the cycle is the following:
Component 'Tests.RecurrentTestNode' resolved as dependency of
    component 'Tests.RecurrentTestNode' which is the root component being resolved. 
```

很明显，为什么这样的代码在服务的情况下会失败，但对于工厂来说，这似乎是不必要的限制。我想留在工厂变体中，因为我在那里有一堆容器解析的依赖项，而不是普通的 int 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:44:13.227

懒惰地打破循环，而不是在构造函数中。温莎的行为是正确的。

# android - 返回到活动堆栈中的第一个活动而不显式调用它

> ID：12566165
> 
> 赞同：0
> 
> 时间：2012-09-24T13:34:13.827
> 
> 标签：android, android-activity, activity-stack

我正在开发一个由两个库项目组成的应用程序。这两个库项目都由实际应用程序使用。

第一个库项目可以看作是主库项目，因为它包含整个应用程序仪表板形式的主菜单。从仪表板中的一个条目，用户可以开始一项活动，该活动是第二个图书馆项目的一部分。

可以从此活动开始的所有活动以及任何进一步的活动也是第二个图书馆项目的一部分。所以第二个图书馆项目对第一个图书馆项目一无所知。

在操作流程结束时，用户应该通过单击一个按钮返回到仪表板活动。所以我需要清除除第一个活动（仪表板）之外的整个活动堆栈。通常我会通过使用标志 FLAG_ACTIVITY_CLEAR_TOP 启动仪表板活动来做到这一点。由于我需要历史记录，因此也不能选择使用 FLAG_ACTIVITY_NO_HISTORY。

但是正如我之前提到的，第二个库项目的任何组件都不应该对主库项目一无所知。因此，使用标志调用仪表板活动不是解决方案。

所以我正在寻找一种方法来完成第二个库项目的所有活动，而不是主库项目的仪表板活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:54:27.997

当您的仪表板调用第二个活动时，将类名（作为字符串）捆绑在一个意图中。在您的第二个活动中，您可以使用该类名来创建返回的意图。

用于`MyActivity.getClass().getName()`形成字符串。

用来`Class.forName(className)`让课堂回来。

编辑：您可能还需要获取完整的包名称`forName()`才能工作：`.getClass().getPackage().getName()`

# c# - 如何一次异步读取标准输出流和标准错误流

> ID：12566166
> 
> 赞同：20
> 
> 时间：2012-09-24T13:34:15.800
> 
> 标签：c#, .net, process

我想以控制台中的形式读取进程的输出（标准输出与一个流中的标准错误混合）。有没有办法做到这一点？

我在考虑使用

```
ProcessStartInfo.UseShellExecute = true; 
```

但后来我无法异步读取输出。如果我设置

```
process.ProcessStartInfo.UseShellExecute = false;  
process.StartInfo.RedirectStandardOutput = true;
process.OutputDataReceived += new DataReceivedEventHandler(partialOutputHandler); 
```

然后我可以读取标准输出（我可以对标准错误执行相同的操作）但我不知道如何模拟控制台的行为（stdout 和 stderr 的混合）。

这类似于 Linux 具有将标准错误流重定向到标准输出流的特性；如何？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-24T18:34:31.393

你的意思是这样的吗？

```
SynchronizationContext _syncContext;
MyForm()
{
    _syncContext = SynchronizationContext.Current;
}

void StartProcess()
{
    using (var process = new Process
        {
            StartInfo = new ProcessStartInfo
            {
                FileName = "myProcess.exe",
                UseShellExecute = false,
                RedirectStandardOutput = true,
                RedirectStandardError = true,
            }
        })
    {
        process.OutputDataReceived += (sender, args) => Display(args.Data);
        process.ErrorDataReceived += (sender, args) => Display(args.Data);

        process.Start();
        process.BeginOutputReadLine();
        process.BeginErrorReadLine();

        process.WaitForExit(); //you need this in order to flush the output buffer
    }   
}

void Display(string output)
{
    _syncContext.Post(_ => myTextBox.AppendText(output), null);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:46:53.590

MSDN[文章](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standarderror.aspx)指出：

> 重定向的 StandardError 流可以同步或异步读取。Read、ReadLine、ReadToEnd等方法对进程的错误输出流进行同步读操作。在关联的 Process 写入其 StandardError 流或关闭流之前，这些同步读取操作不会完成。
> 
> 相反，BeginErrorReadLine 在 StandardError 流上启动异步读取操作。此方法为流输出启用指定的事件处理程序并立即返回给调用者，调用者可以在流输出被定向到事件处理程序时执行其他工作。
> 
> 同步读取操作在从 StandardError 流读取的调用者和写入该流的子进程之间引入了依赖关系。这些依赖关系可能导致死锁情况。当调用者从子进程的重定向流中读取时，它依赖于子进程。调用者等待读取操作，直到子进程写入流或关闭流。当子进程写入足够的数据来填充其重定向流时，它依赖于父进程。子进程等待下一次写入操作，直到父进程从完整流中读取或关闭流。当调用者和子进程互相等待完成一个操作，并且两者都不能继续时，就会出现死锁情况。

这同样适用于`StandardOutput`，因此您只需异步读取两个流。

`Merging`两个流合二为一使得检测什么输出是错误报告以及什么是“产品”信息变得复杂。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T09:40:10.940

我找到了答案：

> 输出流被缓冲。无法获得插入流中的项目的真实顺序。事实上，这没有什么意义，因为两个流也可以同时写入。它们彼此独立。因此，您能做的最好的事情就是在它们到达时从每个输出中获取顺序输出。
> 
> 通常这不是问题，因为几乎所有控制台应用程序都将标准输出用于输出和错误消息。错误流被某些应用程序使用，但消息通常与输出流中生成的错误重复。

**资料来源：** [http ://social.msdn.microsoft.com/Forums/uk/csharpgeneral/thread/192b6df7-9437-42cf-81c1-c125021735ba](http://social.msdn.microsoft.com/Forums/uk/csharpgeneral/thread/192b6df7-9437-42cf-81c1-c125021735ba)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-16T05:39:33.447

类似的示例，除了我为此目的使用 StringBuilder 将标准输出和错误收集到单独的字符串中。

```
/// <summary>
/// Executes command
/// </summary>
/// <param name="cmd">command to be executed</param>
/// <param name="output">output which application produced</param>
/// <param name="transferEnvVars">true - if retain PATH environment variable from executed command</param>
/// <returns>true if process exited with code 0</returns>
static bool ExecCmd(string cmd, out String output, bool transferEnvVars = false)
{
    ProcessStartInfo processInfo;
    Process process;

    if (transferEnvVars)
        cmd =  cmd + " && echo --VARS-- && set";

    processInfo = new ProcessStartInfo("cmd.exe", "/c " + cmd);
    processInfo.CreateNoWindow = true;
    processInfo.UseShellExecute = false;
    processInfo.RedirectStandardError = true;
    processInfo.RedirectStandardOutput = true;

    process = Process.Start(processInfo);

    // Executing long lasting operation in batch file will hang the process, as it will wait standard output / error pipes to be processed.
    // We process these pipes here asynchronously.
    StringBuilder so = new StringBuilder();
    process.OutputDataReceived += (sender, args) => { so.AppendLine(args.Data); };
    StringBuilder se = new StringBuilder();
    process.ErrorDataReceived += (sender, args) => { se.AppendLine(args.Data); };

    process.BeginOutputReadLine();
    process.BeginErrorReadLine();
    process.WaitForExit();

    output = so.ToString();
    String error = se.ToString();

    if (transferEnvVars)
    {
        Regex r = new Regex("--VARS--(.*)", RegexOptions.Singleline);
        var m = r.Match(output);
        if (m.Success)
        {
            output = r.Replace(output, "");

            foreach ( Match m2 in new Regex("(.*?)=([^\r]*)", RegexOptions.Multiline).Matches(m.Groups[1].ToString()) )
            {
                String key = m2.Groups[1].Value;
                String value = m2.Groups[2].Value;
                Environment.SetEnvironmentVariable(key, value);
            }
        }
    }

    if(error.Length != 0)
        output += error;
    int exitCode = process.ExitCode;

    if (exitCode != 0)
        Console.WriteLine("Error: " + output + "\r\n" + error);

    process.Close();
    return exitCode == 0;
} 
```

# sql-server - 包含几列的两个索引或包含所有列的一个索引

> ID：12566168
> 
> 赞同：0
> 
> 时间：2012-09-24T13:34:21.457
> 
> 标签：sql-server

在两个查询上使用“显示估计执行计划”后，我最终创建了两个索引，如下所示：

```
CREATE NONCLUSTERED INDEX IX_ABC ON dbo.my_table
(colA,colB,colC) 
```

和

```
CREATE NONCLUSTERED INDEX IX_ABC ON dbo.my_table
(colA,colD,colE) 
```

我注意到只创建一个索引（替换上述两个）：

```
CREATE NONCLUSTERED INDEX IX_ABC ON dbo.my_table
(colA,colB,colC,colD,colE) 
```

还优化了我的查询。

所以我的问题是，包含所有列的索引以及两个单独的索引优化是否正确，或者一种方法优于另一种方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:57:41.473

> 具有所有列的索引以及两个单独的索引都优化是否正确

不，绝对不是。您的查询更有可能需要在 上的索引`(colA) INCLUDE (colB, colC, colD, colE)`，或者`colA`实际上可能是一个很好的聚集键候选者。这是您提出的一般案例，无法得出真正的结论。但是，作为一般规则，不同列上的索引服务于不同的角色，并且可以被不同的查询使用。上的索引决`(A, B, C)`不能代替上的索引`(B, C)`，`(B, D)`或`(C, E)`。即使列的不同顺序也不能替换，索引 on`(A, B, C)`是不同的，并且不能从索引替换`(B, C, A)`。

我建议您先[阅读设计索引](http://msdn.microsoft.com/en-us/library/ms190804%28v=sql.105%29.aspx)的主题。阅读后，请随时提出更多问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:58:37.233

在回答您的问题时，不，这两个优化并不等同。

至于一种方法是否优于另一种方法，这实际上取决于您的查询是什么，以及您如何修改数据。

如果您的查询在 (ColA, ColB, ColC) 上有一个特定`where`子句，在 (ColA, ColD, ColE) 上有另一个子句，那么这两个索引将很好地服务于该场景。

但是，如果您经常更新表，那么您将需要维护两个索引的额外开销。

与类似的事情一样，您最好进行性能分析并根据预期访问模式获取指标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T13:56:40.820

为了简单地回答您的问题，顺序很重要（想想多级树），因此组合索引对只搜索 ColA、ColD 和 ColE 而不是 ColB 和 ColC 的查询没有帮助。

因此，例如，如果您有类似的查询 `SELECT colA, colD, colE FROM dbo.my_table WHERE colA = 1 AND colD = 2`

第二个（组合）索引会有所帮助（使用“ColA”谓词），但数据库仍然需要扫描剩余的结果以查找 colD = 2。

另一方面，组合索引将占用较少的整体空间，并且对 A 列的更新影响较小，因此您必须权衡取舍。

# eclipse - java.lang.NoClassDefFoundError: org/eclipse/wst/web/internal/deployables/IFlatDeployable

> ID：12566170
> 
> 赞同：0
> 
> 时间：2012-09-24T13:34:30.480
> 
> 标签：eclipse, jakarta-ee, tomcat, servlets, web.xml

Servlet 在 Eclipse Juno for Java EE 中新创建的动态 Web 项目中不起作用。这是从头开始的过程：

*   我下载了 Eclipse EE (Juno)，没有更改任何默认配置
*   我下载了最新的 Tomcat (7.0.30)
*   在*Preferences > Server > Runtime Environments*我添加了新的 Apache Tomcat v7.0
*   我创建了名为 UniBudget 的新动态 Web 项目（上下文根`budget`：）
*   我添加了新文件（里面`index.jps`有*“它可以工作！”*）

此时将项目添加到服务器并运行它后，我可以看到*“它可以工作了！”* 在屏幕上。所以，部署工作。

*   接下来我添加了 servlet 文件 ( `control.Controller.java`)：

    ```
    package control;

    import java.io.IOException;
    import javax.servlet.ServletException;
    import javax.servlet.annotation.WebServlet;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    @WebServlet({ "/Controller", "*.do" })
    public class Controller extends HttpServlet {
        private static final long serialVersionUID = 1L;

        public Controller() {
            super();
        }

        protected void doGet(HttpServletRequest request,
                HttpServletResponse response) throws ServletException, IOException {
            System.out.println("doGet()");
        }

        protected void doPost(HttpServletRequest request,
                HttpServletResponse response) throws ServletException, IOException {
            System.out.println("doPost()");
        }

    } 
    ```

*   我变成`index.jsp`了这样，仅此而已：

    ```
    <jsp:forward page="/departments.do"/> 
    ```

*   当然`web.xml`：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
        <display-name>UniBudget</display-name>
        <welcome-file-list>
            <welcome-file>index.html</welcome-file>
            <welcome-file>index.htm</welcome-file>
            <welcome-file>index.jsp</welcome-file>
                <welcome-file>default.html</welcome-file>
                <welcome-file>default.htm</welcome-file>
            <welcome-file>default.jsp</welcome-file>
        </welcome-file-list>

        <!-- servlet definition -->
        <servlet>
            <servlet-name>Do</servlet-name>
            <servlet-class>control.Controller</servlet-class>
        </servlet>
        <!-- servlet mapping -->
        <servlet-mapping>
            <servlet-name>Do</servlet-name>
            <url-pattern>*.do</url-pattern>
        </servlet-mapping>
        <servlet-mapping>
            <servlet-name>Do</servlet-name>
            <url-pattern>/Controller</url-pattern>
        </servlet-mapping>
    </web-app> 
    ```

*   生成`.class`的文件必须在`WEB-INF/classes`对吗？我就是这么读的。所以：`Configure Build Path > Source tab > Browse >`我创建了`classes`文件夹`WEB-INF`（在`Advanced`我链接到文件系统中的文件夹`... /UniBudget/build/classes`：）

*   这是项目中的文件层次结构：

![项目中的文件层次结构](../Images/c3db49d176d6f32a8c371aa9a687cffa.png)

*   我清理并构建了 UniBudget 项目并重新发布到服务器。清理了服务器。

*   我想我现在可以工作了（我的意思是在控制台中显示*“doGet()”*或*“doPost()” ）。*但是我得到了这个错误，而不是控制台中的打印输出：

    ```
    HTTP Status 404 - /budget/departments.do

    --------------------------------------------------------------------------------

    type: Status report

    message: /budget/departments.do

    description: The requested resource is not available. 
    ```

*   当我尝试直接访问时也会发生同样的情况`http://localhost:8080/budget/Controller`（没有重定向`index.jsp`）

看起来 Eclipse 根本看不到 servlet！你能指出我犯错的地方吗？我现在好几个小时都想不通。

* * *

**编辑：**

去掉多余的注解（`@WebServlet`）后，又出现了一个错误：

```
HTTP Status 503 - Servlet Do is currently unavailable

--------------------------------------------------------------------------------

type Status report

message Servlet Do is currently unavailable

description The requested service is not currently available. 
```

控制台错误：

```
wrz 24, 2012 9:34:15 PM org.apache.catalina.core.ApplicationDispatcher invoke
WARNING: Servlet Do is currently unavailable 
```

不多。但仅此而已。

* * *

**编辑：**

我发现这里发生了另一个错误。我什至不确定如何重新创建它，但至少这个提供了更多日志信息：

```
HTTP Status 500 - An exception occurred processing JSP page /index.jsp at line 3

--------------------------------------------------------------------------------

type: Exception report

message: An exception occurred processing JSP page /index.jsp at line 3

description: The server encountered an internal error that prevented it from fulfilling this request.

exception: 

org.apache.jasper.JasperException: An exception occurred processing JSP page /index.jsp at line 3

1: <%@ page language="java" contentType="text/html; charset=UTF-8"
2:     pageEncoding="UTF-8"%>
3: <jsp:forward page="/departments.do"/>

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:568)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:455)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause: 

javax.servlet.ServletException: Error instantiating servlet class control.Controller
    org.apache.jasper.runtime.PageContextImpl.doForward(PageContextImpl.java:746)
    org.apache.jasper.runtime.PageContextImpl.forward(PageContextImpl.java:716)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:65)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause: 

java.lang.ClassNotFoundException: control.Controller
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    org.apache.jasper.runtime.PageContextImpl.doForward(PageContextImpl.java:746)
    org.apache.jasper.runtime.PageContextImpl.forward(PageContextImpl.java:716)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:65)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

**编辑：**

期间出错`project right click > Export > WAR file`：

```
java.lang.NoClassDefFoundError: org/eclipse/wst/web/internal/deployables/IFlatDeployable
    at org.eclipse.jst.j2ee.internal.archive.operations.JavaEEComponentExportOperation.getModuleParticipants(JavaEEComponentExportOperation.java:77)
    at org.eclipse.jst.j2ee.internal.archive.operations.JavaEEComponentExportOperation.getParticipants(JavaEEComponentExportOperation.java:43)
    at org.eclipse.jst.j2ee.internal.archive.operations.JavaEEComponentExportOperation.createFlatComponentArchiver(JavaEEComponentExportOperation.java:91)
    at org.eclipse.jst.j2ee.internal.archive.operations.ComponentExportOperation.export(ComponentExportOperation.java:191)
    at org.eclipse.jst.j2ee.internal.archive.operations.ComponentExportOperation.execute(ComponentExportOperation.java:136)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl$1.run(DataModelPausibleOperationImpl.java:385)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:410)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.runOperation(DataModelPausibleOperationImpl.java:360)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.doExecute(DataModelPausibleOperationImpl.java:247)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.executeImpl(DataModelPausibleOperationImpl.java:219)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.cacheThreadAndContinue(DataModelPausibleOperationImpl.java:89)
    at org.eclipse.wst.common.frameworks.internal.datamodel.DataModelPausibleOperationImpl.execute(DataModelPausibleOperationImpl.java:207)
    at org.eclipse.wst.common.frameworks.internal.datamodel.ui.DataModelWizard$1CatchThrowableRunnableWithProgress.run(DataModelWizard.java:220)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:15:46.283

> ```
> java.lang.NoClassDefFoundError: org/eclipse/wst/web/internal/deployables/IFlatDeployable 
> ```

哎呀。这是一个非常严重的错误，这个类是 Eclipse 内部的。这曾经被报告为[Eclipse 问题 388698](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388698)，但不幸的是，它被关闭为`WORKSFORME`. 毕竟，这似乎是一个特定于环境/平台/配置的问题。我会考虑重新发布相同的问题以及尽可能多的有关所使用环境的详细信息（操作系统制作/版本、JRE/JDK 制作/版本、硬件规格等）。

我个人还没有尝试过 Juno（我通常会等待 SR1 在冬天左右发布，以便涵盖所有主要的初期问题），但是如果完全删除 Eclipse 安装并重新解压缩它不起作用，那么我会建议尝试退回到以前的 Eclipse 版本，即[Indigo SR2](http://www.eclipse.org/downloads/packages/release/indigo/sr2)。确保为您的平台下载正确的版本（32 位与 64 位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:38:07.720

对我来说

```
java.lang.NoClassDefFoundError: org/eclipse/wst/web/internal/deployables/IFlatDeployable 
```

错误是由以下插件引起的：

```
WTP Patches for org.eclipse.jst.web_core.feature 3.4.0.v201207092049-20F8O7w312318212711 
```

禁用插件后，我可以使用 Eclipse 打包战争并部署它。

（此解决方案来自 URL[错误 388698 - 导出](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388698)BalusC 提到的 WAR 文件时出错）

# java - C3P0PooledConnectionPoolManager 中的 OutOfMemoryError

> ID：12566173
> 
> 赞同：3
> 
> 时间：2012-09-24T13:34:47.267
> 
> 标签：java, jsf-2, c3p0

我的应用程序正在运行：

*   apache-tomcat-7.0.27；
*   素面3.1.1；
*   mysql-connector-java-5.0.8;
*   jsf 2.0；
*   c3p0-0.9.2-pre2；
*   休眠3;

在启动服务器并访问几页之前几分钟后，我得到了这个：

```
Exception in thread "C3P0PooledConnectionPoolManager-Helper Thread-#0" java.lang.OutOfMemoryError: PermGen space 
```

这很奇怪，因为我没有“强调”我的系统，我只做简单的访问。

我想这是一个 c3p0 问题，或者我遗漏了一些东西。

无论如何，这是我的 c3p0 配置（*）：

*   HibernateConnectionProviderClass = "org.hibernate.connection.C3P0ConnectionProvider";
*   HibernateC3p0MinSize = "3"
*   HibernateC3p0MaxSize = "5"
*   HibernateC3p0Timeout = "1800"
*   HibernateC3p0IdleTestPeriod = "100"

(*) 忽略配置格式，因为它在一个类中并且在执行时运行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-24T14:34:28.840

I would try adding `-XX:MaxPermSize=256m` to the JAVA_OPTS variable in setenv.sh or setenv.bat on windows. This file is in the bin folder inside your tomcat's installation directory.

# jquery - 获取 jQuery DataTable 的 ColumnFilter 插件的过滤器类型

> ID：12566176
> 
> 赞同：0
> 
> 时间：2012-09-24T13:34:55.870
> 
> 标签：jquery, asp.net-mvc, model-view-controller, datatable

我正在使用 jQuery DataTable 并找到了一些不错的插件来简化过滤。它称为 ColumnFilter，可在此处获得：

[http://code.google.com/p/jquery-datatables-column-filter/](http://code.google.com/p/jquery-datatables-column-filter/)

使用这个插件真的很容易。在声明 DataTable 之后，它的配置如下：

```
oTable.columnFilter({
  aoColumns: [
    { type: "number-range" },
    { type: "text" },
    { type: "text" }
  ]
}); 
```

在实际过滤数据源服务器端时，我需要知道 columnfilter 插件中设置了哪些类型。这背后的原因是，我封装了一种通用的过滤方法，基本上允许我在服务器端控制器操作中的实体上执行此操作：

```
Public Function DataProviderAction(ByVal dataTableParams As JQueryDataTableParamModel) As JsonResult
  Return GetJson(dataTableParams, Request.Params,
    Function(r) New String() {
      Convert.ToString(r.Id),
      r.Description,
      r.Comment})
End Function 
```

这是因为控制器派生自 T 的通用基本控制器这一事实。GetJson 方法需要 Lambda 表达式来创建字符串数组。其余的（过滤、排序和分页）在 IQueryable(Of T) 上的几个扩展方法中完成。

在未来的某个地方，存在一种策略，该策略包含几个独立于实际类型的特定过滤器实现。这是通过 Dynamic Linq 实现的，如下所示：

```
Public Function ApplyFilter(Of T As {IDataObject})(entities As IQueryable(Of T), filterInfo As System.Tuple(Of String, String)) As IQueryable(Of T) Implements ISmartFilter.ApplyFilter
  Dim result As IQueryable(Of T) = Nothing

  Try
    result = entities.Where(If(filterInfo.Item1 = "", True, String.Format("{0}.ToLower().Contains(@0)", filterInfo.Item2)), filterInfo.Item1.ToLower)
  Catch
  End Try

  Return result
End Function 
```

这里发生的情况是，这个 Where 扩展创建了一个表达式，基本上说类似“Where(Description.ToLower().Contains(filtertext))”。

但是，我需要调用与 UI 中设置的过滤器类型相对应的正确策略。目前，我只是有一个上下文类，它包含所有过滤器的实例并实现一个迭代所有过滤器的方法，检查它决定是否应用此过滤器的条件。

**如果我只知道过滤器类型会更容易。**:)

所以问题是：

如何将 dataTable.columnFilter 中的 aoColumns 数组放入 DataTable 的参数列表中，以便可以从上面提到的 DataProviderAction 方法访问它？

我也不得更改 dataTable 和/或 columnFilter 本身的任何代码......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:14:22.513

嗯...我不知何故找到了解决方案。

各位对此怎么看：

在我的 Datatables 的 jQuery 初始化代码中，我添加了一个带有 filtertype 信息的数组，如下所示：

```
 var filterList = [
                { type: "" },
                { type: "number-range" },
                { type: "text" },
                { type: "text" }
            ]; 
```

然后我定义了一个辅助函数，它创建了几个 aodata.push 调用来将这些过滤器类型注入到我的 json 字符串中：

```
fnServerObjectToArray = function () {
        return function (sSource, aoData, fnCallback) {

            for (i = 0; i < filterList.length; i++) {
                aoData.push({ "name": "sFilter_" + i, "value": filterList[i].type });
            }

            $.getJSON(sSource, aoData, function (json) {
                fnCallback(json);
            });
        }
    } 
```

在我的数据表初始化中，我将此函数添加为 fnServerData：

```
var oTable = $('#myDataTable').dataTable({
  ...          
  "sAjaxSource": "MyController/DataProviderAction",
            "fnServerData": fnServerObjectToArray(),
...
 }); 
```

而 columnFilter 本身现在基于上面定义的数组：

```
 oTable.columnFilter({
            aoColumns: filterList
        }); 
```

在制定策略的过程中，上下文现在将可用的过滤器保存在字典中：

```
Private Shared availableFilters As New Dictionary(Of String, ISmartFilter) From {
            {"number", New NumberFilter()},
            {"number-range", New NumberRangeFilter()},
            {"text", New TextFilter()}
        } 
```

这样，我现在可以通过以下方式应用相应的过滤器：

```
Public Shared Function ApplyFilter(Of T As {IDataObject})(entities As IQueryable(Of T), filterInfo As System.Tuple(Of String, String, String)) As IQueryable(Of T)

            Dim filteredEntities As IQueryable(Of T)

            Dim filter As ISmartFilter = Nothing

            If (availableFilters.TryGetValue(filterInfo.Item3.ToLower(), filter)) Then
                filteredEntities = availableFilters(filterInfo.Item3).ApplyFilter(entities, filterInfo)
            Else
                ' Default-Filter
                filteredEntities = availableFilters("text").ApplyFilter(entities, filterInfo)
            End If

            Return filteredEntities
        End Function 
```

# vba - 从 vba 使用文件系统

> ID：12566185
> 
> 赞同：0
> 
> 时间：2012-09-24T13:35:18.130
> 
> 标签：vba, excel, excel-2003

我有一个包含 10 个 excel 文件 + 1 个带有宏的文件的文件夹。我只打开宏。如何获取位于宏文件（使用vba）的文件夹中所有其他文件的列表，以及如何一一打开和关闭它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:31:30.193

This should get you on the right track. These macros will loop through folder and open or close all files in the folder.

```
 Sub LoopThroughFilesAndOpen()
        Dim strFile As String
        Dim strPath As String
        Dim colFiles As New Collection
        Dim i As Integer

        strPath = "put your directory here"
        strFile = Dir(strPath)

        While strFile <> ""
            colFiles.Add strFile
            strFile = Dir
        Wend

        'List filenames in Column A of the active sheet
        If colFiles.Count > 0 Then
            For i = 1 To colFiles.Count
                ActiveSheet.Cells(i, 1).Value = colFiles(i)
                Workbooks.Open Filename:=strPath & colFiles(i)
            Next i
        End If

    End Sub

    Sub LoopThroughFilesAndClose()
        Dim strFile As String
        Dim strPath As String
        Dim colFiles As New Collection
        Dim i As Integer

        strPath = "put your directory here"
        strFile = Dir(strPath)

        While strFile <> ""
            colFiles.Add strFile
            strFile = Dir
        Wend

        'List filenames in Column A of the active sheet
        If colFiles.Count > 0 Then
            For i = 1 To colFiles.Count
                ActiveSheet.Cells(i, 1).Value = colFiles(i)
                'Workbooks.Close Filename:=strPath & colFiles(i)
                Workbooks(colFiles(i)).Close SaveChanges:=False
            Next i
        End If

    End Sub 
```

Good Luck. - just put in the directy you want e.g. - "C:\myfolder\"

EDIT/ADDITION:

If you want the macros to automatically use the directy of the active workbook(the one that your running the macro from) then you can just use these versions of the above macros:

```
Sub LoopThroughFilesAndOpen()
    Dim strFile As String
    Dim strPath As String
    Dim colFiles As New Collection
    Dim i As Integer

    strPath = ActiveWorkbook.Path & "\"
    strFile = Dir(strPath)

    While strFile <> ""
        colFiles.Add strFile
        strFile = Dir
    Wend

    'List filenames in Column A of the active sheet
    If colFiles.Count > 0 Then
        For i = 1 To colFiles.Count
            ActiveSheet.Cells(i, 1).Value = colFiles(i)
            Workbooks.Open Filename:=strPath & colFiles(i)
        Next i
    End If

End Sub

Sub LoopThroughFilesAndClose()
    Dim strFile As String
    Dim strPath As String
    Dim colFiles As New Collection
    Dim i As Integer

    strPath = ActiveWorkbook.Path & "\"
    strFile = Dir(strPath)

    While strFile <> ""
        colFiles.Add strFile
        strFile = Dir
    Wend

    'List filenames in Column A of the active sheet
    If colFiles.Count > 0 Then
        For i = 1 To colFiles.Count
            ActiveSheet.Cells(i, 1).Value = colFiles(i)
            'Workbooks.Close Filename:=strPath & colFiles(i)
            Workbooks(colFiles(i)).Close SaveChanges:=False
        Next i
    End If

End Sub 
```

Which changes this line:

```
 strPath = "put your directory here" 
```

To:

```
 strPath = ActiveWorkbook.Path & "\" 
```

Note:

These two macros were taken and modified from: [http://www.vadriano.com/excel-vb/2007/04/21/how-to-loop-through-files-in-a-folder/](http://www.vadriano.com/excel-vb/2007/04/21/how-to-loop-through-files-in-a-folder/)

# visual-studio-2010 - Visual Studio 2010 Extensions - 类扩展特定类型时的自定义编辑器

> ID：12566186
> 
> 赞同：2
> 
> 时间：2012-09-24T13:35:21.440
> 
> 标签：visual-studio-2010, visual-studio-extensions, vspackage

我正在尝试创建一个 GUI 游戏设计器作为 Visual Studio 2010 的扩展，并且正在考虑使用与项目和项目模板一起使用的自定义编辑器在现有 XNA 项目类型之上构建此功能。

我研究了自定义编辑器并找到了有关如何为特定文件类型制作它们的各种教程，但我希望让它们依赖于类类型来实现，而不是像当前从 Control 或 UserControl 扩展的对象所发生的那样他们有设计师和查看代码的选项。

有没有人看过任何教程或示例，其中有人设法为自己的编辑器和类类型模仿此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:37:02.507

我问了一个想要做类似事情的问题：http: [//xboxforums.create.msdn.com/forums/p/68191/416472.aspx](http://xboxforums.create.msdn.com/forums/p/68191/416472.aspx)

这是一篇关于构建自定义设计器（特别是针对 XNA）的博客文章：http: [//badcorporatelogo.wordpress.com/2008/10/05/making-a-designer-of-your-own-an-imperfect-例子/](http://badcorporatelogo.wordpress.com/2008/10/05/making-a-designer-of-your-own-an-imperfect-example/)

这是同一个人制作的一个项目，可让您使用 VS 在 XNA 中编辑 UI：http: [//ferpect.codeplex.com/wikipage?title =Getting%20Started&referringTitle=Documentation](http://ferpect.codeplex.com/wikipage?title=Getting%20Started&referringTitle=Documentation)

希望这些资源对在 VS 中构建编辑器有所帮助。我不确定他是否使用 UserControls。

# facebook-graph-api - Graph API 获取帖子的源设备

> ID：12566196
> 
> 赞同：0
> 
> 时间：2012-09-24T13:35:42.517
> 
> 标签：facebook-graph-api

我正在使用 facebook graph API 搜索公共信息，那么我如何获取从 pc、android、iphone 或其他平台上传的信息。

这是我的[搜索网址示例](https://graph.facebook.com/search?q=mark)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:54:09.937

> 那么我如何获取信息是那些从 pc、android、iphone 或其他平台上传的信息。

一点也不。

你最多可以得到一个用户用来访问 Facebook 的设备列表——查看[用户](https://developers.facebook.com/docs/reference/api/user/)对象的`devices`字段。如果他们在某个时候使用/曾经使用过 iOS 或 Android 设备，这将为您提供信息。

但此信息不适用于个别帖子/照片等。

不过，[post](https://developers.facebook.com/docs/reference/api/post/)对象有一个 field `application`——这*可能*会给你一个提示，如果用户使用一些特殊的应用程序来发布消息，那么它可能只是针对一种特殊设备的目标。

# html - 仅将 css 样式应用于 ie9

> ID：12566197
> 
> 赞同：0
> 
> 时间：2012-09-24T13:35:45.427
> 
> 标签：html, internet-explorer, css

我的网站我有一个文件（ie.css）来纠正 ie 的 css 问题。但是，现在我有一个小问题。网站的一些默认样式在 ie8 上很好，在 ie9 上不行。

所以，我想将文件“ie.css”中的以下css代码仅应用于ie版本9，这可能吗？

```
.ngg-galleryoverview {
    overflow: hidden;
    margin-top: 10px;
    width: 100%;
    clear:both; 
    display:block !important;
    /*border: 2px solid #ADE132;*/
    /*margin-left: 10px;*/
    margin-left: 2%;
}

.ngg-gallery-thumbnail {
    float: left;
    margin-right: 3%;
    /*margin-right: 10px;*/
    text-align: center;
    /*border: 2px solid #ADE132; */
    height: 430%;
    width: 430%;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:39:48.630

最好的方法是只为 IE9 设置一个 body 类，当你想修改你的 css 时，它将在任何其他 html 标记或类前面开始该类。这将保证您的 css 符合 w3c。

这是代码：

```
<!--[if IE 9 ]>    <body class="ie9"> <![endif]--> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:38:20.090

您正在寻找的是有条件的评论：

```
<!--[if IE 9]>
<style type="text/css">
  IE specific CSS rules go here
</style>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T13:38:15.090

使用 IE 条件注释：

```
<!-- [if ie 9]>
 CSS that you want to be IE only
<![endif]>--> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T13:44:08.763

尝试在css中

:root .classname{ 颜色:粉红色 \0/IE9; } /* IE9 */

或写在头标签中

```
<!--[如果 IE 9]>
<风格>
此处针对 IE 9 的特殊说明
</style>

<![endif]-->

```

# sql - 将 MAX(id) 分配给序列

> ID：12566201
> 
> 赞同：2
> 
> 时间：2012-09-24T13:36:02.587
> 
> 标签：sql, oracle, powerbuilder

我想使用 powerbuilder 中的一些数据向表中插入一些内容。当谈到使用 SQL 序列来增加最后一个已知的 ID 时，我有点迷茫。

我知道如何找到最大 ID，但是如何使用序列来确保每个新的 INSERT 都会将 ID 增加 1？

到目前为止，我所拥有的只是如何找到我的最大 ID：

```
SELECT MAX(id)
FROM table_name; 
```

**编辑** 我正在为我的数据库使用 Oracle

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:15:57.493

如果要向其中插入数据的表的 ID 值来自模式序列中已经存在的值，那么欢迎您继续使用该序列插入新记录。

如果您想创建一个新序列，该序列将从表列的最大值开始生成数字，`ID`那么您可以执行以下操作

创建序列：

```
create sequence Seq_Name; 
```

更改值序列将从

```
declare
  l_max_ID number;
  l_Temp_val number;
begin
  select max(ID) into l_max_ID
    from your_table;

  execute immediate 'alter sequence Seq_Name increment by ' || To_Char(l_Max_ID);

  select Seq_Name.currval into l_temp_val
    from dual;

  execute immediate 'alter sequence Seq_Name increment by ' || To_Char(1);
end; 
```

并使用下面列出的任何方法来获取序列的下一个值。

```
Insert into your_table(id, [other_columns])
  values(Seq_name.nextval, [other_values]); 
```

或者

```
create or replace trigger Tr_Name before insert on Your_Table_name
for each row
begin
  -- if you are using oracle prior to 11g then 
  select Seq_name.nextval into :new.id -- or any other column
    from dual;
  --     OR
  -- if your Oracle version is 11g onward you can simply assign 
  -- sequence's value to a new ID
  :new.id := Seq_Name.nextval;

end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T14:08:49.607

在 oracle 中，要获取序列中的下一个值，请使用 .nextval。

例子 ：

```
select my_sequence.nextval from dual; 
```

当您导入数据并且假设 10000 之前的 ids 已经用完时，您可以更改您的序列以增加该数字。由于这是 DDL，您可能必须使用动态 SQL。

```
declare
  l_current_max_value number;
  l_dummy number
begin
  select max(id)
    into l_current_max_value 
    from my_table;

  for i in 1..l_current_max_value loop
    l_dummy := l_current_max_value.nextval; --bouncing the sequence, 
                                            --another option is to recreate it.
  end loop; 

end;
/ 
```

注意：这是假设您当前的序列根本没有使用。如果您要将数据导入到现有的包含数据的表中，那么沿着相同的路线进行更多的工作，您需要考虑两个表中的公共 ID。

> 编辑：“我如何将 current_max_number 分配给 my_sequence”

完成所有导入后，您可以使用 .nextval 获取 id。例如。

```
create or replace procedure new_product(
  i_sku in number,
  i_name in varchar2(100)
)
as
begin
  insert into new_product (id, sku, name)
  values (product_seq.nextval, i_sku, i_name);

  commit;
end;
/ 
```

或者您可以将其放入变量中以进行任何进一步处理..

```
declare
 l_next_id number;
begin
 select my_sequence.nextval
   into l_next_id
   from dual;
 --further processing
end;
/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T14:09:31.053

这就是应该如何使用序列。

```
22:05:18 HR@vm_xe> create table test_seq_tab(a number, b number);                                            

Table created.                                                                                               

Elapsed: 00:00:00.85                                                                                         
22:05:43 HR@vm_xe> create sequence test_seq start with 1 increment by 1;                                     

Sequence created.                                                                                            

Elapsed: 00:00:00.12                                                                                         
22:06:33 HR@vm_xe> insert into test_seq_tab select test_seq.nextval, rownum from dual connect by level <= 10;

10 rows created.                                                                                             

Elapsed: 00:00:00.11                                                                                         
22:06:40 HR@vm_xe> select * from test_seq_tab;                                                               

         A          B                                                                                        
---------- ----------                                                                                        
         1          1                                                                                        
         2          2                                                                                        
         3          3                                                                                        
         4          4                                                                                        
         5          5                                                                                        
         6          6                                                                                        
         7          7                                                                                        
         8          8                                                                                        
         9          9                                                                                        
        10         10                                                                                        

10 rows selected.                                                                                            

Elapsed: 00:00:00.10                                                                                         
22:06:50 HR@vm_xe> select test_seq.currval from dual;                                                        

   CURRVAL                                                                                                   
----------                                                                                                   
        10                                                                                                   

1 row selected.                                                                                              

Elapsed: 00:00:00.01                                                                                         
22:07:04 HR@vm_xe> 
```

不需要`select max ...`。你是这样做的吗？

# mysql - MySQL 声称内置函数“不存在”。

> ID：12566206
> 
> 赞同：2
> 
> 时间：2012-09-24T13:36:30.060
> 
> 标签：mysql

告诉我这两个查询有什么问题？

```
SELECT * FROM `product_description` WHERE CHAR_LENGTH (description) > 250
SELECT * FROM `product_description` WHERE LENGTH (description) > 250 
```

他们返回这些错误

```
Function table.name CHAR_LENGTH does not exist
Function table.name LENGTH does not exist 
```

这两个功能似乎都不起作用......这是怎么回事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T13:45:50.730

也许正是[这个](http://dev.mysql.com/doc/refman/5.0/en/functions.html)导致了这个问题

默认情况下，函数名和它后面的括号之间不能有空格。这有助于 MySQL 解析器区分函数调用和对碰巧与函数同名的表或列的引用。但是，允许函数参数周围有空格。

# android - 如何在 Android 中使用 ContentResolver 进行不区分大小写的查询？

> ID：12566207
> 
> 赞同：11
> 
> 时间：2012-09-24T13:36:30.743
> 
> 标签：android, sqlite

我的目标是在 Android Gingerbread 及更高版本上使用特定电子邮件地址从本机数据库中获取所有行。

此查询仅获取大小写也匹配的行。

```
Cursor cursor = context.getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,
            new String[] {Contacts._ID}, ContactsContract.CommonDataKinds.Email.ADDRESS + "=?",
            new String[] {email}, null); 
```

我已经阅读了关于 sql 的 WHERE 子句，其中一个使用 lower('xx') 但我不知道如何使用它。我还向您学习了可以使列在创建表时不关心大小写，但是那艘船已经航行了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-24T14:00:37.420

也试试

```
Cursor cursor = context.getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,
            new String[] {Contacts._ID}, ContactsContract.CommonDataKinds.Email.ADDRESS + "=? COLLATE NOCASE",
            new String[] {email}, null); 
```

**注意`COLLATE NOCASE`在查询中添加。**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-24T13:56:55.567

请尝试（我认为邮件是字符串对象）：

```
Cursor cursor = context.getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,
        new String[] {Contacts._ID}, "lower("+ContactsContract.CommonDataKinds.Email.ADDRESS + ")=lower('"+ email +"')",
        null, null); 
```

或者

```
Cursor cursor = context.getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,
        new String[] {Contacts._ID}, "lower("+ContactsContract.CommonDataKinds.Email.ADDRESS + ")=lower('"+ email +"')",
        new String[] {}, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T06:35:10.877

```
Cursor cursor = this.db.query("UserTbl", new String[] {"UserId",
                        "Username", "Password" },
                        "Username = ? COLLATE NOCASE AND Password = ? COLLATE NOCASE", new String[] { userNameString,
                                passwordString }, null, null, null); 
```

# mongodb - 局域网外无密码访问MongoDB

> ID：12566210
> 
> 赞同：0
> 
> 时间：2012-09-24T13:36:35.800
> 
> 标签：mongodb

我有一个全新安装的 MongoDB 服务器，我想从它所在的局域网以外的任何计算机访问它。所有端口都被转发，如果我继续，`http://server-ip:28017`我可以看到它的 Web 界面。

但是，我仍然无法从我的应用程序访问我的 MongoDB 服务器。我还不想打开身份验证。有什么我错过的吗？在文档中找不到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:51:50.697

从应用程序中，您必须连接到 server-ip:27017 即 Web 界面端口的 -1000

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:52:57.550

我认为 mongod 默认只在 localhost 上侦听。检查传递给 mongod 的参数并尝试传递 --help 选项以查看可用参数。

但是，设置 SSH 隧道并通过代理访问它可能是一个更好的主意。它更安全，因为您可以禁止除本地主机之外的所有条目。隧道命令很简单：

```
ssh -N -L 12345:localhost:27017 user@remote 
```

然后，您将通过远程计算机（即客户端）上的 localhost:12345 访问数据库。

# jquery-ui - Fancybox AJAX 功能说明

> ID：12566212
> 
> 赞同：0
> 
> 时间：2012-09-24T13:36:43.297
> 
> 标签：jquery-ui, jquery, jquery-plugins, fancybox

```
 case 'ajax':
                busy = false;

                $.fancybox.showActivity();

                selectedOpts.ajax.win = selectedOpts.ajax.success;

                ajaxLoader = $.ajax($.extend({}, selectedOpts.ajax, {
                    url : href,
                    data : selectedOpts.ajax.data || {},
                    error : function(XMLHttpRequest, textStatus, errorThrown) {
                        if ( XMLHttpRequest.status > 0 ) {
                            _error();
                        }
                    },
                    success : function(data, textStatus, XMLHttpRequest) {
                        var o = typeof XMLHttpRequest == 'object' ? XMLHttpRequest : ajaxLoader;
                        if (o.status == 200) {
                            if ( typeof selectedOpts.ajax.win == 'function' ) {
                                ret = selectedOpts.ajax.win(href, data, textStatus, XMLHttpRequest);

                                if (ret === false) {
                                    loading.hide();
                                    return;
                                } else if (typeof ret == 'string' || typeof ret == 'object') {
                                    data = ret;
                                }
                            }

                            tmp.html( data );
                            _process_inline();
                        }
                    }
                }));

            break; 
```

我不明白为什么

```
 selectedOpts.ajax.win = selectedOpts.ajax.success; 
```

已经这样初始化成功在哪里初始化了？在哪里

```
 selectedOpts.ajax.data 
```

已经初始化了吗？

此语句中呼叫转移的位置

```
 ret = selectedOpts.ajax.win(href, data, textStatus, XMLHttpRequest); 
```

方法体在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:57:04.580

我猜你不知道 jquery ajax。

selectedOpts.ajax.win(href, data, textStatus, XMLHttpRequest); 基本上是jquery ajax 成功函数。您必须覆盖成功函数，这些变量由 jquery ajax 传递。

使用 jquery 扩展设置数据。你必须传递你的ajax变量。

**更新**（将注释代码移动到答案中）

```
$("#Link").fancybox({ 
 ajax : { 
  type : "POST", 
  data : 'mydata=test', 
  success : function(data, textStatus, jqXHR){
   // do something on success
  } 
 } 
}); 
```

# c# - 创建一个 url 正则表达式来解析域名

> ID：12566214
> 
> 赞同：0
> 
> 时间：2012-09-24T13:36:53.490
> 
> 标签：c#, javascript, regex, expression

我需要创建一个正则表达式来识别一个字符串，如果这是一个符合我的标准的 url，但我在识别域名时遇到了困难......

域名的标准是

1.  只有`[a-z][0-9]`,`.`和`-`
2.  第一个字符必须是`[a-z]`
3.  之前和之后`.`或`-`必须是`[a-z]`
4.  最小长度 1 个字符

域区域是

1.  只有`[a-z]`和`.`
2.  第一个字符必须是`.`
3.  最小长度 3 个字符

格式应该是`www.<domain name>.<domain region>`

这是我得到的..

```
www.[a-z]([a-z0-9\.\-]{1,}[a-z][\.\-])+[^\.+\-].[a-z+\.]{2,}[^\.]$ 
```

这是域名

```
[a-z]([a-z0-9\.\-]{1,}[a-z][\.\-])+[^\.+\-] 
```

这是针对域区域

```
.[a-z+\.]{2,}[^\.]$ 
```

这将是`www.sample.com.sg`

*   `www..sample.com`会因为以下原因被拒绝`.sample`
*   `www.sample..com`会因为以下原因被拒绝`sample.`
*   `www.sample.com.sg.`会因为以下原因被拒绝`.com.sg.`
*   `www.sampl3.sample.com`将因为`sampl3.`规则 3 被拒绝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:46:50.387

不重新发明

*   URI.js：[http ://medialize.github.com/URI.js/](http://medialize.github.com/URI.js/)
*   URL解析器：[https ://gist.github.com/2428561](https://gist.github.com/2428561)

这样的事情已经做过很多次了，最好利用现有的代码而不是重新学习所有的 URL 规则和规范要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:02:17.920

编辑：

```
www\.(([a-z][a-z0-9]*)?[a-z][\.\-])*([a-z][a-z0-9]*)?[a-z]\.[a-z]{2,}$ 
```

疯长所以也许有更好的但是......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:47:49.970

试试这个：**^[a-zA-Z0-9-.]+.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU)$** 我没有预先测试过，所以很少法规可能是必要的

# android - Android gridview 不会触发 onItemClickListener

> ID：12566215
> 
> 赞同：0
> 
> 时间：2012-09-24T13:36:55.760
> 
> 标签：android, gridview, ontouchlistener, onitemclicklistener

我已经阅读了很多关于这个问题的帖子，通常是由于在 gridview 中包含了可点击的对象，但这不是我的情况。我有一个带有 imageview 和 gridview 的框架布局，我在 gridview 中使用 ontouchlistener 进行移动，它可以工作，但 onItemClickListener 不会触发。我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:id="@+id/layoutJuego"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:baselineAligned="false"
android:orientation="vertical" 
xmlns:android="http://schemas.android.com/apk/res/android">
<paricio.toni.caththemole.MyFrameLayout
    android:id="@+id/frame"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" >
    <ImageView
        android:id="@+id/fondo"
        android:layout_width="760dp"
        android:layout_height="760dp"
        android:layout_gravity="center"
        android:contentDescription="@android:string/untitled"
        android:scaleType="fitXY"
        android:src="@drawable/terrenoarena" />
    <GridView
        android:id="@+id/gridView1"
        android:layout_width="640dp"
        android:layout_height="640dp"
        android:layout_gravity="center"
        android:columnWidth="80dp"
        android:horizontalSpacing="0dp"
        android:numColumns="8"
        android:scrollbars="none"
        android:stretchMode="columnWidth"
        android:verticalSpacing="0dp" >
    </GridView>
</paricio.toni.caththemole.MyFrameLayout> 
```

MyFrameLayout 是一个简单的框架布局，扩展为比屏幕大。我的网格视图只有图像视图（8x8 结构中的 64 个）。在我使用 gridview.setOnTouchListener 移动 myFrameLayout 之前它工作正常，但我摇晃了，所以我改为移动 imageview 和 gridview，结果？再见摇晃和再见 onItemClickListener

```
 gridview = (GridView) findViewById(R.id.gridView1);
    adaptador = new ImageAdapter(this);
    gridview.setAdapter(adaptador);

    gridview.setOnTouchListener(new OnTouchListener() { 
        public boolean onTouch(View v, MotionEvent event) {
            int desplazamiento[]={0,0};
            fondo.getLocationOnScreen(desplazamiento);
            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    mx = event.getX();
                    my = event.getY();
                    return true;
                case MotionEvent.ACTION_MOVE:
                    curX = event.getX();
                    curY = event.getY();
                    fondo.scrollBy((int) (mx - curX), (int) (my - curY));
                    gridview.scrollBy((int) (mx - curX), (int) (my - curY));
                    mx = curX;
                    my = curY;
                    return true;
                case MotionEvent.ACTION_UP:
                    curX = event.getX();
                    curY = event.getY();
                    fondo.scrollBy((int) (mx - curX), (int) (my - curY));
                    gridview.scrollBy((int) (mx - curX), (int) (my - curY));
                    return true;
            }
            return false;
        }
    });

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, 
                long id) {
            Log.i("miTraza","OnItemClick"); // Don't trigger
                    ...
        }
    }); 
```

我认为我可以使用 onTouchListener 和事件 ACTION_DOWN 和 ACTION_UP 连续（没有 ACTION_MOVE）手动计算 gridview 单元格的位置，但我想让它作为最后一个选项。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:21:25.207

最后我不得不在 OnTouch 中手动执行 OnItemClick。这是我使用的代码，方法adaprator.getPosition(gridview, (int) x, (int) m) 返回屏幕点击选中的位置。我试过使用 pointtoposition (int, int) 但返回错误的位置。

```
 gridview.setOnTouchListener(new OnTouchListener() { 
        public boolean onTouch(View v, MotionEvent event) {
            int desplazamiento[]={0,0};
            fondo.getLocationOnScreen(desplazamiento);
            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    click = true;
                    mx = event.getX();
                    my = event.getY();                     
                    return true;
                case MotionEvent.ACTION_MOVE:
                    curX = event.getX();
                    curY = event.getY();
                    if (click && Math.abs(mx-curX)<5 && Math.abs(my-curY)<5) {
                        Log.i("miTraza","movimiento pequeño");
                        click = true;
                        return true;
                    } else {
                        click = false;
                    }
                    fondo.scrollBy((int) (mx - curX), (int) (my - curY));
                    gridview.scrollBy((int) (mx - curX), (int) (my - curY));
                    mx = curX;
                    my = curY;
                    return true;
                case MotionEvent.ACTION_UP:
                    if (click) {
                        int position = adaptador.getPosition(gridview, (int)mx, (int)my);
                        if (position>=0 && position<=63) {
                            gridview.performItemClick(gridview, position, 0);
                        }
                        click = false;
                    } 
                    return true;
            }
            return false;
        }
    }); 
```

# java - Android：LayoutParams 不接受浮点值

> ID：12566221
> 
> 赞同：0
> 
> 时间：2012-09-24T13:37:10.020
> 
> 标签：java, android, android-layout

为什么

```
TableRow.LayoutParams layout = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1/11); 
```

不工作，但

```
String s =  "0.0909";
float fVal = Float.valueOf(s).floatValue();

TableRow.LayoutParams layout = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, fVal); 
```

做？

我使用它来使表格行适合具有动态表格宽度的表格。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:39:55.730

`1/11`是一个 int（恰好是 0），因为`1`和`11`都是整数。

尝试`1.0f / 11`获取一个浮点值（或者`1f / 11`但我发现它的可读性较差）。

# c++ - 候选模板被忽略，因为无法推断模板参数

> ID：12566228
> 
> 赞同：35
> 
> 时间：2012-09-24T13:37:30.963
> 
> 标签：c++, templates

以下代码有什么问题？

```
#include <iostream>

template<typename K>
struct A {
    struct X { K p; };
    struct Y { K q; };
};

template<typename K>
void foo(const typename A<K>::X& x, const typename A<K>::Y& y) {
    std::cout << "A" << std::endl;
}

int main() {
    A<float>::X x;
    A<float>::Y y;
    foo(x, y);  
} 
```

clang 给出以下错误信息：

```
17:2: error: no matching function for call to 'foo'
        foo(x, y);      
        ^~~
10:6: note: candidate template ignored: couldn't infer template argument 'K'
void foo(const typename A<K>::X& x, const typename A<K>::Y& y) {
     ^
1 error generated. 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-24T13:39:48.757

中的论点`K`是`const typename A<K>::X`不可*演绎*的。基本上， a 剩下的所有内容`::`都是不可演绎的（如果`::`分隔嵌套名称）。

通过运行这个思想实验来了解为什么要求推理没有意义是微不足道的：

```
struct A { typedef int type; }
struct B { typedef int type; }

template <typename T> void foo(typename T::type);

foo(5);   // is T == A or T == B ?? 
```

从类型到嵌套类型没有一对一的映射：给定任何类型（例如`int`），可能有许多环境类型是嵌套类型，或者不需要任何类型。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-24T13:40:00.393

```
template<typename K>
void foo(const typename A<K>::X& x, const typename A<K>::Y& y) {
    std::cout << "A" << std::endl;
} 
```

`K`无法推断，因为它在`non-deduced`上下文中。

n3337 14.8.2.5/4

> 然而，在某些上下文中，该值不参与类型推导，而是使用模板参数的值，这些值要么在别处推导，要么显式指定。**如果模板参数仅在非推导上下文中使用且未明确指定，则模板参数推导失败**。

n3337 14.8.2.5/5

> 未推断的上下文是：
> 
> — 使用限定 ID 指定的类型的嵌套名称说明符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-02T10:50:52.063

首先，`::`用于引用嵌套结构是不正确的。正确的方法是使用`A<K>.x`where`x`是 type 的成员`X<K>`。但要使其正常工作，您需要分别声明两个类型为 和`x`的成员。`y``X<K>``Y<K>`

其次，我认为一个好的做法是将模板声明`struct X`和`struct Y`struct A的声明分开，以避免嵌套的struct声明。

简而言之，我会将您的代码重写如下：

```
template<class K>
struct X {
    K p;
};

template<class K>
struct Y {
    K q;
};

template<class K>
struct A {
    X<K> x;
    Y<K> y;
};

template<class K>
void foo(const X<K>& x, const Y<K>& y) {
    std::cout << "A" << std::endl;
}

int main() {
    A<float> a;
    foo(a.x, a.y);
    return 0;
} 
```

# android - 如何将默认 ContextMenu 样式设置为 EditText？

> ID：12566231
> 
> 赞同：1
> 
> 时间：2012-09-24T13:37:38.193
> 
> 标签：android, android-dialog, android-theme, android-contextmenu

我对 EditText 的 ContextMenu 的**样式**有疑问。

我创建了新对话框：

```
Dialog newServerDialog = new Dialog(getContext(), R.style.CustomDialogStyleServerDetails);

newServerDialog.setContentView(newServerDialogLayout);
newServerDialog.setTitle(R.string.server_details_new_title_text);
newServerDialog.getWindow().setLayout(
    android.view.ViewGroup.LayoutParams.FILL_PARENT,
    android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
newServerDialog.setCancelable(true); 
```

这是*CustomDialogStyleServerDetails*样式：

```
<style name="CustomDialogStyleServerDetails" parent="@android:style/Theme.Dialog">
    <item name="android:background">@drawable/server_details_background_repeat</item>
    <item name="android:windowTitleStyle">@style/DialogWindowTitle</item>
</style> 
```

和*DialogWindowTitle*样式

```
<style name="DialogWindowTitle">
    <item name="android:maxLines">1</item>
    <item name="android:scrollHorizontally">true</item>
    <item name="android:textAppearance">@style/customDialogTextAppearance</item>
    <item name="android:gravity">center_horizontal|center_vertical</item>
    <item name="android:background">@drawable/server_details_title_background_repeat</item>
</style> 
```

对话框看起来像我想要的：（抱歉，我还不能发布图片）

[对话框.png](http://imageshack.us/f/856/20120924114942.png/)

但是 EditText 的 ContextMenu 从我的对话框中获取样式

[EditText 的 ContextMenu.png](http://imageshack.us/f/837/20120924114953.png/)

有什么办法，如何将默认样式设置为 ContextMenu？
我没有找到任何解决此问题的方法。
所有帮助将不胜感激！
谢谢你。

编辑：我的解决方案：创建一个扩展 Dialog 的自定义类（称为 DialogServer）。
编辑#2：不，看起来这不是正确的解决方案。

我试过这个构造函数：

```
public DialogServer(Context context, int theme) 
```

问题仍然存在

使用此构造函数：

```
public DialogServer(Context context) 
```

contextmenu 的样式还可以，但是对话框的样式不见了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:51:48.027

尝试使用自定义主题包装器

```
 ContextThemeWrapper mTheme = new ContextThemeWrapper(this,
        R.style.CustomDialogStyleServerDetails); 
```

代码片段是： -

```
mInflater = (LayoutInflater) getBaseContext().getSystemService(
        LAYOUT_INFLATER_SERVICE);

ContextThemeWrapper mTheme = new ContextThemeWrapper(this,
        R.style.CustomDialogStyleServerDetails);

mView = mInflater.inflate(R.layout.YOUR_XML_LAYOUT_FILE, null);

mDialog = new Dialog(mTheme);
mDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
mDialog.setContentView(this.mView);
mDialog.show(); 
```

希望解释是有用的....

# visual-studio-2008 - 致命错误 LNK1000：IncrBuildImage 期间的内部错误

> ID：12566232
> 
> 赞同：1
> 
> 时间：2012-09-24T13:37:38.683
> 
> 标签：visual-studio-2008, mfc

我在构建新的 MFC 应用程序时遇到了这个奇怪的错误，我只是创建了一个新的 MFC 应用程序，我没有更改生成的表单中的任何内容，请问如何解决这个错误？

```
1>Linking...
1>Embedding manifest...
1>Microsoft (R) Windows (R) Resource Compiler Version 6.0.5724.0
1>Copyright (C) Microsoft Corporation.  All rights reserved.
1>LINK : fatal error LNK1000: Internal error during IncrBuildImage
1>  Version 9.00.21022.08
1>  ExceptionCode            = C0000005
1>  ExceptionFlags           = 00000000
1>  ExceptionAddress         = FEA4C880
1>  NumberParameters         = 00000002
1>  ExceptionInformation[ 0] = 00000008
1>  ExceptionInformation[ 1] = FEA4C880
1>CONTEXT:
1>  Eax    = FEA4C880  Esp    = 002DEF08
1>  Ebx    = 400081C8  Ebp    = 002DEF34
1>  Ecx    = 0097D670  Esi    = 405B8CFC
1>  Edx    = 002DEF24  Edi    = 0006D6C0
1>  Eip    = FEA4C880  EFlags = 00010246
1>  SegCs  = 0000001B  SegDs  = 00000023
1>  SegSs  = 00000023  SegEs  = 00000023
1>  SegFs  = 0000003B  SegGs  = 00000000
1>  Dr0    = 00000000  Dr3    = 00000000
1>  Dr1    = 00000000  Dr6    = 00000000
1>  Dr2    = 00000000  Dr7    = 00000000
1>Build log was saved at     "file://c:\Users\Yasmine\Desktop\Calculator\Calculator\Debug\BuildLog.htm"
1>Calculator - 1 error(s), 0 warning(s)
 ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:06:40.943

此修复程序将帮助您解决问题... [http://archive.msdn.microsoft.com/KB948127](http://archive.msdn.microsoft.com/KB948127)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:22:21.017

尝试进行完全重建。这通常会解决这类事情。

# vim - 点命令究竟可以重复什么？

> ID：12566235
> 
> 赞同：25
> 
> 时间：2012-09-24T13:38:03.857
> 
> 标签：vim

Vimmers 知道`.`可以重复简单的更改。我试图建立一个可以重复或不能重复的列表，但是有一个列表吗？

我试图列出我知道可重复的内容：它们都是正常模式的命令：

*   文本插入 : `a`, `A`, `i`, `I`, `o`,`O`
*   涉及寄存器的文本更改：`c`, `C`, `d`, `D`, `p`, `gp`, `P`, `gP`, `s`, `S`, `x`,`X`
*   其他文字变化：`J`, `gJ`, `r`, `gr`, `R`, `gR`, `gU`, `gu`, `gw`, `gq`, `g?`, `~`, `g~`, `<`, `>`,`=`
*   等效于可视模式下的这些操作。
*   控制操作：`C-A`,`C-X`
*   `gi`将重复插入*，但*在当前光标位置，而不是在最后插入位置。所以它*有点*工作。

但不包括：

*   所有移动和显示命令（这里不一一列举）
*   所有折叠命令（z-命令，也很多）
*   标记 ( `m`)
*   替换重复 ( `&`, `g&`)
*   冒号或过滤命令 ( `!`, `:`, `Q`)
*   宏录制或播放（`q`或`@`，将重复录制或播放时完成的最后一个可重复操作）。
*   Diff put 和 get ( `dp`, `do`)
*   撤消 ( `u`, `U`, `C-R`)
*   洋基 ( `y`)

我知道 tpope 的[重复](https://github.com/tpope/vim-repeat)插件可以让自定义插件订阅重复机制。但是默认情况下，上面的列表好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:56:25.440

我相信*更改*是修改当前缓冲区的任何命令。该`.`命令不包括 Ex 命令（因为我猜这是在很远的历史中固定在 vi 上的另一种模式），并且可以选择包含 yanks。

因此，对于您的列表，`:help change.txt`过滤 Ex 命令可能是最好的来源。

请注意，当无法应用更改命令（即发出哔声）时，它也不会被注册为重复；命令执行必须成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:51:41.507

与 v/V 的某些组合也可以“点”重复。

例如

Vgq、v/VU 或 v/Vu

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:59:38.523

Tim Pope's`repeat.vim`可以制作`repeat`更多东西（包括类似的东西`surround.vim`和其他必备品）。

要重复一个动作，请查看`,`/ `;`（正向/反向）。

重复 Ex 命令，`@``:`是一个很好的组合键

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-06T11:56:01.923

### 插入模式表达式寄存器未被重新评估

示例：如果要对以下内联数字列表进行排序，

```
 first 3,2,17,198,232,1,999 and some other text
 second 1,2,3,71,98,4,5 and some more text 
```

考虑使用表达式寄存器的这两种方式：

1.  `ciW`接着`<C-r>=join(sort([<C-r>"]), ',')<CR>`
2.  `ciW`接着`<C-r>=join(sort(split(expand(@"), ',')), ',')<CR>`

如果您尝试在第二行重复其中任何一个`.`，vim 只需再次从第一行输入相同的列表。这可能是其他人所期望的，但我希望通过第二种方式重新评估表达式寄存器。

# javascript - 在移动设备上无限滚动

> ID：12566236
> 
> 赞同：1
> 
> 时间：2012-09-24T13:38:11.407
> 
> 标签：javascript, jquery-mobile

我在 jQuery Mobile 应用程序中为列表实现无限滚动时遇到了一些麻烦。我现在使用的代码是这样的：

```
$(window).on('scrollstop', function () { 
  if ($(window).scrollTop() >= $(document).height() - $(window).height() - 20) {
    if(scrollLoad && currentPage < totalPages)
    {
      $.mobile.showPageLoadingMsg();
      ShowMoreThings();
      scrollLoad = false; //Is set to true on ajax success in ShowMoreThings().
    }
  }
}); 
```

然而，这不会导致刷新总是触发。问题似乎是，一旦用户释放屏幕，事件就会触发，并且视口在此之后继续移动（由于滚动通常在移动设备上工作的方式）。然后，该事件将在它仍在移动时计算位置，并且不会触发刷新，因为它还没有到达底部。然后，现在视口位于页面底部，如果用户尝试进一步向下滚动，因为视口没有移动，则不会触发进一步的滚动事件。要触发它，我需要稍微向上滚动然后再向下滚动。

我也尝试听 scrollstart ，但它不会触发尝试滚动到“不存在的空间”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:31:04.527

`onscroll`我发现使用该事件来绑定我在 jquery mobile 中的无限滚动更可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:59:36.333

看看 jQuery 航点[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)。您可以使用航点触发获取更多数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:36:10.760

因此，经过一些试验和尝试其他解决方案后，似乎有一个简单且相当明显的解决方案。如果我增加滚动边距，即从问题到 200 像素的 20 像素，它将始终触发，无论滚动速度如何，或者如果我在屏幕到达页面底部 200 像素范围内之前释放屏幕。

我不知道事件何时触发或它为什么起作用。无论哪种方式，它现在都可以正常工作，并且具有大于 20 的边距可能会更好，因为它在用户看到所有现有内容之前就开始加载新内容。

# iphone - 如何从 iPhone 上的 MobFox 广告中删除白色背景？

> ID：12566241
> 
> 赞同：0
> 
> 时间：2012-09-24T13:38:29.730
> 
> 标签：iphone, colors, background, mobfox

在我的视图中添加尺寸为 320x50 的 MobFox 广告时，当提供的广告尺寸为 300x50 时，它会显示白色侧边栏。

事实证明，无论我在 IB 编辑器中提供什么值，View 的背景颜色都是白色的。同样设置 MobFoxBannerView 的背景颜色也不能解决问题。

```
// mobFoxView is a MobFoxBannerView loaded from a NIB
// The following line will NOT result in a transparent background. It remains white!
[mobFoxView setBackgroundColor:[UIColor clearColor]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:38:29.730

事实证明 MobFoxBannerView 包含一个 UIWebView 子视图，无法通过 SDK API 访问。默认情况下，UIWebViews 将具有白色背景。只需添加以下代码即可获得透明背景。确保在视图实际加载到内存后调用此代码。

```
- (void) makeMobFoxViewTransparent:(MobFoxBannerView *)mobFoxView 
{
    [[mobFoxView subviews] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        if ( [obj isKindOfClass:[UIWebView class]] )
        {
            UIWebView  *theSubView = (UIWebView *) obj;            
            theSubView.opaque = NO;
            [theSubView setBackgroundColor:[UIColor clearColor]];
        }
    }];
} 
```

# sql - 在查询 sql 中搜索更多字符串

> ID：12566246
> 
> 赞同：-1
> 
> 时间：2012-09-24T13:38:37.977
> 
> 标签：sql, string

你能帮我完成这个查询吗？

```
SELECT id_category FROM wrs_category_lang 
WHERE id_lang = 5 
AND name = keyword1, keyword2 with spaces, keyword3; 
```

我希望从中获取`id_category`与名称列表相对应的所有 ID。该列`name`的类型为`varchar(128)`。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:41:29.317

您是否要求 IN 声明？：

```
SELECT id_category 
FROM wrs_category_lang 
WHERE id_lang = 5 AND name IN('keyword1','keyword2'...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:41:10.003

像这样的东西：

```
SELECT id_category 
FROM wrs_category_lang 
WHERE id_lang = 5 
AND name IN ('keyword1', 'keyword2 with spaces', 'keyword3'); 
```

# c++ - 检查拼写数字是否在 C++ 的范围内

> ID：12566251
> 
> 赞同：46
> 
> 时间：2012-09-24T13:38:48.380
> 
> 标签：c++, algorithm, numbers

我想在输入部分输入时根据范围列表（最小值，最大值）检查（数字）输入；换句话说，我需要一个优雅的算法来检查一个数字的前缀与一个范围（不使用正则表达式）。

示例测试用例：

```
 1 is in (  5,   9) -> false
 6 is in (  5,   9) -> true
 1 is in (  5,  11) -> true  (as 10 and 11 are in the range)
 1 is in (  5, 200) -> true  (as e.g. 12 and 135 are in the range)
11 is in (  5,  12) -> true
13 is in (  5,  12) -> false 
13 is in (  5,  22) -> true
13 is in (  5, 200) -> true  (as 130 is in the range)
 2 is in (100, 300) -> true  (as 200 is in the range) 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-24T13:46:45.210

我相信输入是可以接受的，当且仅当：

*   它是转换为字符串的下限的前缀子字符串

或者

*   后跟任意数量的附加零（可能没有）的输入落入范围

例如，第一条规则是必需的`13 is in range (135, 140)`。例如，第二条规则是必需的`2 is in range (1000, 3000)`。

第二条规则可以通过一系列乘以 10 来有效地测试，直到缩放的输入超过上限。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-24T14:24:48.037

一个迭代公式：

```
bool in_range(int input, int min, int max)
{
  if (input <= 0)
    return true;    // FIXME handle negative and zero-prefixed numbers
  int multiplier = 1;
  while ((input + 1) * multiplier - 1 < min)         // min <= [input]999
    multiplier *= 10;    // TODO consider overflow
  return input * multiplier <= max;                  //        [input]000 <= max
} 
```

更简单的[编辑：更有效；见下文]方法是使用截断整数除法：

```
bool in_range(int input, int min, int max)
{
  if (input <= 0)
    return true;
  while (input < min) {
    min /= 10;
    max /= 10;
  }
  return input <= max;
} 
```

* * *

测试和分析：

```
#include <iostream>
#include <chrono>

bool ecatmur_in_range_mul(int input, int min, int max)
{
  int multiplier = 1;
  while ((input + 1) * multiplier - 1 < min)         // min <= [input]999
    multiplier *= 10;    // TODO consider overflow
  return input * multiplier <= max;                  //        [input]000 <= max
}

bool ecatmur_in_range_div(int input, int min, int max)
{
  while (input < min) {
    min /= 10;
    max /= 10;
  }
  return input <= max;
}

bool t12_isInRange(int input, int min, int max)
{
    int multiplier = 1;
    while(input*multiplier <= max)
    {
        if(input >= min / multiplier) return true;
        multiplier *= 10;
    }
    return false;
}

struct algo { bool (*fn)(int, int, int); const char *name; } algos[] = {
{ ecatmur_in_range_mul, "ecatmur_in_range_mul"},
{ ecatmur_in_range_div, "ecatmur_in_range_div"},
{ t12_isInRange, "t12_isInRange"},
};

struct test { int input, min, max; bool result; } tests[] = {
{  1,   5,   9, false },
{  6,   5,   9, true },
{  1,   5,  11, true }, // as 10 and 11 are in the range
{  1,   5, 200, true }, // as e.g. 12 and 135 are in the range
{ 11,   5,  12, true },
{ 13,   5,  12, false },
{ 13,   5,  22, true },
{ 13,   5, 200, true }, // as 130 is in the range
{  2, 100, 300, true }, // as 200 is in the range
{ 13, 135, 140, true }, // Ben Voigt
{ 13, 136, 138, true }, // MSalters
};
int main() {
    for (auto a: algos)
        for (auto t: tests)
            if (a.fn(t.input, t.min, t.max) != t.result)
                std::cout << a.name << "(" << t.input << ", " << t.min << ", " << t.max << ") != "
                    << t.result << "\n";

    for (auto a: algos) {
        std::chrono::time_point<std::chrono::system_clock> start = std::chrono::system_clock::now();
        for (auto t: tests)
            for (int i = 1; i < t.max * 2; ++i)
                for (volatile int j = 0; j < 1000; ++j) {
                    volatile bool r = a.fn(i, t.min, t.max);
                    (void) r;
                }
        std::chrono::time_point<std::chrono::system_clock> end = std::chrono::system_clock::now();
        std::cout << a.name << ": "
            << std::chrono::duration_cast<std::chrono::nanoseconds>(end - start).count() << '\n';
    }
} 
```

令人惊讶的是（至少对我而言）迭代除法最快：

```
ecatmur_in_range_mul: 17331000
ecatmur_in_range_div: 14711000
t12_isInRange: 15646000 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T13:48:05.037

```
bool isInRange(int input, int min, int max)
{
    int multiplier = 1;
    while(input*multiplier <= max)
    {
        if(input >= min / multiplier) return true;
        multiplier *= 10;
    }
    return false;
} 
```

它通过了你所有的测试用例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T19:29:48.967

我在思考@Ben Voigt 漂亮解决方案的证明时想到了这个新的简单解决方案：

让我们回到我们进行数字比较的小学。问题就像：检查数字“ *A* ”是否在数字“ *B* ”和数字“ *C* ”的范围内

解决方案：在数字的左侧添加必要的零（所以我们在所有数字中都有相同的数字）我们从最左边的数字开始。将其与其他两个数字中的等效数字进行比较。

*   如果*A*中的数字小于*B*中的数字或大于*C*中的数字，则*A*不在范围内。

*   如果不是，我们使用 A 中的下一个数字*以及**B*和*C*中的等价物重复该过程。

**重要问题：**我们为什么不马上停下来？为什么我们检查下一个数字？

**重要答案：**因为*A的数字介于**B*和*C*的等价物之间**，到目前为止**还可以，但还没有足够的理由做出决定！（很明显吧？）

反过来，这意味着可能有一组数字会使*A*超出范围。

并且，同样地

**可能有一组数字可以将*A*放在范围内**

**这是另一种说法*A*可能是范围内数字的前缀。**

这不就是我们要找的吗？！:D

该算法的主干基本上是对每个输入事件的简单比较：

1.  *在min*的左侧添加一些零（如果需要），以便*min*和*max*的长度相等。
2.  将输入*A*与 min 和 max 中的等效数字*进行*比较*（*从**left**而**不是 right中删除***min*和*max*的相应数字）
*******   输入*A* <= *max的对应部分* **AND** >= *min*的对应部分吗？（否：返回假，是：返回真）******

 ******根据问题的需要，此处的 false 和 true 表示“到目前为止”的情况。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-24T16:55:26.290

给定一个值*n*，从半开范围 [ *n* , *n* + 1) 开始，然后按数量级进行：

*   [10 *n* , 10( *n* + 1))
*   [100 *n* , 100( *n* + 1))
*   [1000 *n* , 1000( *n* + 1))
*   …</li>

继续直到迭代的范围与目标范围重叠，或者两个范围不能再重叠。

```
#include <iostream>

bool overlaps(int a, int b, int c, int d) {
  return a < c && c < b || c < a && a < d;
}

bool intersects(int first, int begin, int end) {
  int last = first + 1;
  ++end;
  while (first <= end) {
    if (overlaps(first, last, begin, end))
      return true;
    first *= 10;
    last *= 10;
  }
  return false;
}

int main(int argc, char** argv) {
  std::cout << std::boolalpha
    << intersects( 1,   5,   9) << '\n'
    << intersects( 6,   5,   9) << '\n'
    << intersects( 1,   5,  11) << '\n'
    << intersects( 1,   5, 200) << '\n'
    << intersects(11,   5,  12) << '\n'
    << intersects(13,   5,  12) << '\n'
    << intersects(13,   5,  22) << '\n'
    << intersects(13,   5, 200) << '\n'
    << intersects( 2, 100, 300) << '\n'
    << intersects(13, 135, 140) << '\n';
} 
```

使用范围对于防止遗漏案例是必要的。考虑*n* = 2 和目标范围 [21, 199]。2不在范围内，所以我们乘以10；20不在范围内，所以我们再乘以10；200 不在范围内，也没有更高的数字，因此朴素算法以假阴性终止。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-24T14:16:12.390

一种简单的解决方案是生成范围内的所有 N 位前缀。所以，`11 is in ( 5, 12)`你想要 5 到 12 之间所有数字的两位前缀。显然，这只是 10、11 和 12。

一般来说，对于数字 X 到 Y，可能的 N 位前缀可以通过以下算法获得：

```
X = MIN(X, 10^(N-1) ) ' 9 has no 2-digit prefix so start at 10
Y = Y - (Y MOD 10^N)  ' 1421 has the same 2 digit prefix as 1400
WHILE (X < Y)
  LIST_PREFIX += PREFIX(N, X) ' Add the prefix of X to the list.
  X += 10^(TRUNCATE(LOG10(X)) - N+1) ' For N=2, go from 1200 to 1300 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-24T14:57:18.907

我更喜欢使用已经实现的算法的方法。虽然许多其他解决方案使用递归除法`10`，但我认为最好使用具有`O(1)`复杂性的 10 基对数，这样整个解决方案的复杂度为`O(1)`.

让我们把问题分成两部分。

**第一**部分将处理`number * 10^n`介于`min`和`max`至少一个之间的情况`n`。这将让我们检查例如 if`number = 12`和`min,max = 11225,13355`，即`x = 12000 = 12*10^3`在`min`and之间`max`。如果此测试检查通过，则表示结果为`True`。

**第二**部分将处理or`number`开头的情况。例如，如果and ，第一个测试将失败，因为不在and之间（以及任何其他数字都将失败）。但是第二次测试会发现那是开始和返回。`min``max``number = 12``min,max = 12325,14555``12000``min``max``12*10^n``n``12``12325``True`

# 第一的

让我们检查一下，`x = number*10^n`等于或大于的第一个`min`是否小于或等于`max`(so `min <= x <= max, where x is number*10^n for any integer n`)。如果它大于`max`，那么所有其他`x`es 都会更大，因为我们取了最小的。

```
log(number*10^n) > log(min)
log(number) + log(10^n) > log(min)
log(number) + n > log(min)
n > log(min) - log(number)
n > log(min/number) 
```

为了得到要比较的数字，我们只计算第一个满意的`n`：

```
n = ceil(log(min/number)) 
```

然后计算数字`x`：

```
x = number*10^n 
```

# 第二

我们应该检查我们的数字是否是任一边界的字面开头。

我们只是`x`从与 相同的数字开始计算`number`并在末尾用 s 填充`0`，具有与 相同的长度`min`：

```
magnitude = 10**(floor(log10(min)) - floor(log10(number)))
x = num*magnitude 
```

然后检查`min`'s 和`x`差异（在大小范围内）是否小于`1`和大于或等于`0`：

```
0 <= (min-x)/magnitude < 1 
```

所以，如果`number`is`121`和`min`is `132125`，那么`magnitude`is `1000`，`x = number*magnitude`将会是`121000`。`min - x`给出`132125-121000 = 11125`，它应该小于`1000`（否则`min`开始会大于`121`），所以我们`magnitude`通过除以它的值并比较它来比较它`1`。如果`min`is 就可以，但如果 is 就不行`121000`，这就是为什么and 。`min``122000``0 <=``< 1`

相同的算法适用于`max`。

# 伪代码

将它全部合并到伪代码中给出了这个算法：

```
def check(num,min,max):
    # num*10^n is between min and max
    #-------------------------------
    x = num*10**(ceil(log10(min/num)))
    if x>=min and x<=max: 
        return True

    # if num is prefix substring of min
    #-------------------------------
    magnitude = 10**(floor(log10(min)) - floor(log10(num)))
    if 0 <= (min-num*magnitude)/magnitude < 1:
        return True

    # if num is prefix substring of max
    #-------------------------------
    magnitude = 10**(floor(log10(max)) - floor(log10(num)))
    if 0 <= (max-num*magnitude)/magnitude < 1:
        return True

    return False 
```

可以通过避免重复计算来优化此代码`log10(num)`。此外，在最终解决方案中，我将从浮点数范围转到整数范围 ( `magnitude = 10**int(floor(log10(max)) - floor(log10(num)))`)，然后执行所有比较而不进行除法，即`0 <= (max-num*magnitude)/magnitude < 1`-> `0 <= max-num*magnitude < magnitude`。这将减少舍入错误的可能性。

此外，也可以用 替换`magnitude = 10**(floor(log10(min)) - floor(log10(num)))` ，`magnitude = 10**(floor(log10(min/num)))`其中`log10`只计算一次。但我不能证明它总是会带来正确的结果，我也不能反驳它。如果有人能证明这一点，我将不胜感激。

[测试（在 Python 中）：http: [//ideone.com/N5R2j](http://ideone.com/N5R2j)（您可以编辑输入以添加其他测试）。]

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-09-24T14:39:14.157

```
(input >= lower_bound) && input <= upper_bound

OR

(f(input) >= lower_bound) && (f(input) <= upper_bound)

OR

(lower_bound - f(input) < pow(10, n_digits_upper_bound - n_digits_input)) && 
(lower_bound - f(input) > 0)

where

f(input) == (input * pow(10, n_digits_upper_bound - n_digits_input))

 1 is in (  5,   9) -> 1 * pow(10,0) -> same                 -> false
 6 is in (  5,   9)                                          -> true
 1 is in (  5,  11) -> 1 * pow(10,1)  -> 10 is in (5,11)     -> true
 1 is in (  5, 200) -> 1 * pow(10,2)  -> 100 is in (5, 200)  -> true
11 is in (  5,  12)                                          -> true
13 is in (  5,  12) -> 13 * pow(10,0) -> same                -> false 
13 is in (  5,  22)                                          -> true
13 is in (  5, 200)                                          -> true
 2 is in (100, 300) -> 2 * pow(10,2) -> 200 is in (100,300)  -> true
 4 is in (100, 300) -> 4 * pow(10,2)  -> 400 is in (100,300) -> false
13 is in (135, 140) -> 135 - 130                             -> true
14 is in (135, 139) -> 135 - 140                             -> false 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-24T15:00:02.867

Yes another answer. For input X and bounds MIN and MAX

```
WHILE (X < MIN)
  IF X is a prefix of MIN
    x = 10*x + next digit of MIN
  ELSE
    x = 10*x
RETURN (x>= MIN && x<=MAX) 
```

This works by "typing" the next lowest digit. So the hard case `13 in (135, 140)` adds a 5 to produce 135, not a zero.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-24T15:56:53.310

无论您选择哪种实现方法，您都应该考虑构建大量单元测试。因为您提出的问题就像您为测试驱动开发 (TDD) 编写测试一样。所以我建议，当你在等待一个合适的算法从堆栈溢出中弹出时，编写你的单元测试：

如果您提供的示例没有在您的示例中产生结果，则使您的测试失败。写几个其他的极限测试用例来确定。然后，如果您碰巧使用了错误或错误的算法，您很快就会知道。一旦你的测试通过，你就会知道你已经达到了你的目标。

另外，它可以保护您免受将来的任何回归

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-09-24T14:25:18.150

所有困难情况都是下限的位数少于上限的情况。只需将范围分成两个（或三个）。如果 AB 是集合 A 和 B 的并集，则`x in AB`蕴含`x in A`或`x in B`。所以：

`13 is in (5, 12)`=>`13 is in (5, 9)`或`13 is in (10, 12)`

`13 is in (5, 120)`=>`13 is in (5, 9)`或`13 is in (10, 99)`或`13 is in (100, 120)`

然后，**截断**以匹配长度。IE

`13 is in (5, 120)`=>~~`13 is in (5, 9)`或~~ `13 is in (10, 99)`或`13 is in (10`~~0~~ `, 12`~~0~~`)`

在第二次重写之后，它变成了一个简单的数字检查。请注意，如果您有范围`10,99`出现，那么您有所有可能的 2 位前缀并且实际上不需要检查，但这是一种优化。（我假设我们忽略前缀 00-09）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-09-25T21:50:17.593

也许我没有考虑到这一点，但假设整数的 Min-Max 范围都是正数（即大于或等于零），这个代码块应该可以很好地解决问题：

```
bool CheckRange(int InputValue, int MinValue, int MaxValue)
{
    // Assumes that:
    //    1\. InputValue >= MinValue 
    //    2\. MinValue >= 0
    //    3\. MinValue <= MaxValue 
    //
    if (InputValue < 0)         // The input value is less than zero
        return false;
    //
    if (InputValue > MaxValue)  // The input value is greater than max value
        return false;
    //
    if (InputValue == 0 && InputValue < MinValue)
        return false;       // The input value is zero and less than a non-zero min value
    //
    int WorkValue = InputValue; // Seed a working variable
    //
    while (WorkValue <= MaxValue)
    {
        if (WorkValue >= MinValue && WorkValue <= MaxValue)
            return true; // The input value (or a stem) is within range
        else
            WorkValue *= 10; // Not in range, multiply by 10 to check stem again
    }
    //
    return false;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-09-26T00:50:11.667

*我现在会删除这个答案，只是它显示了一个失败的方法。*

> 检查后`Str(min).StartWith(input)`，您需要以数字方式检查`10^n*Val(input)`范围内是否有任何内容，正如 Ben Voight 当前的回答所说。

* * *

### 尝试失败

由于 Ben Voigt 的评论而编辑：（我错过了他在当前答案中的第一点：前缀匹配到最小值是可以的。）

根据@Ben Voigt 的见解，我的解决方案是检查`Min` `StartsWith`当前输入。如果不是，`PadRight`则当前输入`0`的长度`Max`为字符串。然后，如果这个修改后的输入在*词法上*（即视为字符串）介于两者之间`Min`，`Max`那就没问题了。

伪代码：

```
 Confirm input has only digits, striping leading 0s
    (most easily done by converting it to an integer and back to a string)

 check = Str(min).StartsWith(input)
 If Not check Then
   testInput = input.PadRight(Len(Str(max)), '0')
   check = Str(min) <= testInput && testInput <= Str(max)
 End If 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-09-24T23:31:11.477

好吧，派对有点晚了，但这里...

请注意，我们在这里讨论的是*用户输入*，因此仅`// TODO: consider overflow`. 验证用户输入是一场战争，偷工减料最终会导致 IED 引爆。（好吧，好吧，也许不是那么戏剧化，但仍然......）事实上，ecatmur 有用的测试工具中*只有一种*算法可以正确处理极端情况（），并且测试工具本身也会`{23, 2147483644, 2147483646, false}`进入无限循环`t.max`大的。

唯一通过的是 ecatmur_in_range_div，我认为它非常好。但是，可以通过添加一些检查来使其（稍微）更快：

```
bool in_range_div(int input, int min, int max)
{
  if (input > max) return false;
  if (input >= min) return true;
  if (max / 10 >= min) return true;

  while (input < min) {
    min /= 10;
    max /= 10;
  }
  return input <= max;
} 
```

“取决于”多快；如果 min 和 max 是编译时常量，这将特别有用。我认为前两个测试很明显；第三个可以通过多种方式证明，但最简单的就是观察 ecatmur 循环的行为：当循环结束时，输入 >= min 但 < 10*min，因此如果 10*min < max，则输入必须小于最大值。

用除法而不是乘法来表达算术*应该是*一种习惯；我知道我们大多数人从小就认为分裂是*缓慢*的，必须避免。但是，除法与乘法不同，不会溢出。确实，每当您发现自己在写作时：

```
if (a * k < b) ... 
```

或者

```
for (..., a < b, a *= k) 
```

或这些主题的其他变体，您应该立即将其标记为整数溢出，并将其更改为等效除法。

实际上，除了一种重要（但常见）的情况外，加法也是如此：

```
if (a + k < b) ... 
```

或者

```
a += k; if (a < b) ... 
```

也是不安全的**，除非**k 为 1，并且您知道在加法之前 a < b。该异常使正常的 for 循环无需过多考虑即可工作。但请注意这一点，我曾经将其用作面试问题的一部分：

```
// enumerate every kth element of the range [a, b)
assert(a < b);
for (; a < b; a += k) { ... } 
```

可悲的是，很少有候选人得到它。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2012-09-24T14:20:22.193

```
int input = 15;
int lower_bound = 1561;
int upper_bound = 1567;
int ipow = 0;
while (lower_bound > 0) {
    if (lower_bound > input) {
        ++ipow;
        lower_bound = lower_bound / 10;
    } else {
        int i = pow(10, ipow) * input;
        if (i < upper_bound) {
            return true;
        }
        return false;
    }
}
return false; 
```******

# asp.net-mvc-3 - 使用 MVC 3 和 EF 更新模型中的一个字段

> ID：12566253
> 
> 赞同：2
> 
> 时间：2012-09-24T13:39:01.343
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4.1, automapper

`Model`班级

```
public class product : BaseModel
    {
        [key] public string id { get; set; }
        [Required] public string title { get; set; }
        [Required] public bool valid { set; get; }
        public decimal discount { get; set; }
        public string summery { get; set; }
        public string icon { get; set; }
        public DateTime date { get; set; }
    } 
```

在`View`我只需要更新`title`列，这里是模型代码

```
@using (Html.BeginForm()){
 @Html.HiddenFor(o => o.id);
 @Html.ValidationSummary(true)
 Title: @Html.EditorFor(model => model.title)
 @Html.ValidationMessageFor(model => model.title)
} 
```

in `Controller`,`product`丢失了除`id`和之外的其他值`title`

根据[这篇文章](https://stackoverflow.com/questions/12154120/update-single-property-on-ef4-entity-without-having-have-hidden-fields)，最好的解决方案之一是为此特定表单创建帮助器类，并使用[AutoMapper](http://automapper.org/)将帮助器映射到原始模型。但在我的情况下（超过 60 个模型）需要额外的资源来实现辅助类。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T13:40:53.313

> 在 Controller 中，产品丢失了除 id 和 title 之外的其他值

这很正常。你期待什么？这些是您在 HTML 中包含的唯一字段，`<form>`因此这些是您唯一希望在控制器操作中返回的内容。这就是 HTML 的工作原理。不要指望奇迹，ASP.NET MVC 不会自动为模型的其他字段设置一些值，即使您没有将它们包含在 POST 表单中。

当然，您可以使用`id`从请求中收到的数据来查询您的数据存储并检索相应的模型并对其进行相应的处理。

所以：

```
[HttpPost]
public ActionResult SomeAction(int id)
{
    var product = db.Products.Where(x => x.Id == id);
    if (!TryUpdateModel(product))
    {
        // validation failed => redisplay the view
        return View(model);
    }

    // at this stage the product variable will be updated with the title
    // property coming from the view and all other properties staying untouched
    // => you could persist the changes back to the database
    // I don't remember the syntax of this EF stuff - go read the manual
    // of how to persist the changes of this "product" instance back to the context
    // As far as I remember it was something like "db.SaveChanges" or something.

    ...

    // after a successfull UPDATE redirect in order to follow good practices of the
    // Redirect-After-Post pattern: http://en.wikipedia.org/wiki/Post/Redirect/Get
    return RedirectToAction("Success");
} 
```

* * *

不过要小心这种方法。**我不推荐它**。攻击者可以通过发送特制请求来设置任何类似的属性。你永远不应该将你的领域模型传递给你的视图。您应该始终使用视图模型。

为了防止那些大规模注入攻击，您应该保留一个实际上允许从视图更新的属性列表：

```
// ... only update the title property from the view
if (!TryUpdateModel(product, new[] { "title" })) 
```

现在只有`title`属性将被默认模型绑定器更新。

* * *

我推荐的实际解决方案当然是使用视图模型（我不能在我在 StackOverflow 上提供的无数答案中反复强调和强调这个事实，我仍然看到人们在他们的意见）：

所以，是的，定义一个视图模型，它要花多少钱？A`Ctrl+A`在您的模型文件夹中，然后：

```
public class ProductViewModel
{
    public int Id { get; set; }
    [Required]
    public string Title { get; set; }
} 
```

有那么难吗？

然后导航到您的 NuGet 控制台并键入：`Install-Package AutoMapper`。然后前往您`Application_Start`的内部`Global.asax`并定义您的视图模型和域模型之间的映射（实际上最好稍后在 AutoMapper Profiles 中外部化您的映射）：

```
// gosh this EF crap generates lowercase classes => it sucks so badly
// and violates all C# conventions
Mapper.Map<ProductViewModel, product>(); 
```

最后你的控制器动作变成：

```
[HttpPost]
public ActionResult SomeAction(ProductViewModel model)
{
    if (!ModelState.IsValid)
    {
        return View(model);
    }

    var product = db.Products.Where(x => x.Id == id);
    Mapper.Map<ProductViewModel, product>(model, product);

    // at this stage the product variable will be updated with the title
    // property coming from the view and all other properties staying untouched
    // => you could persist the changes back to the database
    // I don't remember the syntax of this EF stuff - go read the manual
    // of how to persist the changes of this "product" instance back to the context
    // As far as I remember it was something like "db.SaveChanges" or something.

    ...

    // after a successfull UPDATE redirect in order to follow good practices of the
    // Redirect-After-Post pattern: http://en.wikipedia.org/wiki/Post/Redirect/Get
    return RedirectToAction("Success");
} 
```

# sqlite - 在 SQLite 单元测试中处理“模式”

> ID：12566254
> 
> 赞同：1
> 
> 时间：2012-09-24T13:39:06.917
> 
> 标签：sqlite, unit-testing, fluent-nhibernate

我有一个项目，我使用 Fluent NHibernate 映射 SQL Server 数据库，并从另一个 Fluent NHibernate 映射的 SQL Server 数据库生成数据，这是我们的源。

我目前正在编写一些单元测试，以检查从一个数据库读取的功能并在另一个数据库中创建记录。我已经为我的数据库创建了一个内存 SQLite 数据库来创建记录，它工作正常。但是，当我尝试为我的“源”数据库创建一个类似的 SQLite 数据库时，我遇到了声称“没有这样的表”的故障。

这似乎是因为在源数据库的 Fluent NHibernate dll 中，他们给出了类似“dbo.table”的名称，并且由于我的 SQLite 测试数据库中没有架构，因此无法创建测试表。

有没有办法处理这个“dbo”。创建测试数据库时 SQLite 中的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:12:51.613

```
SELECT * from dbo.mytable 
```

是相同的：

```
SELECT * from "dbo"."mytable" 
```

要完成这项工作，您需要[附加](http://www.sqlite.org/lang_attach.html)另一个名为 的数据库`dbo`，如下所示：

```
ATTACH DATABASE ':memory:' AS dbo 
```

或者，将表名用引号括起来（如果 NHibernate 可以的话），这样该点就是表名的一部分：

```
SELECT * FROM "dbo.mytable" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T01:17:09.400

您可以传递一个委托`SchemaExport.Execute`来修改脚本调用。将执行参数设置为false，您可以修改脚本的行并自己调用它们：

```
schemaExport.Execute(script =>
{
    using (var cmd = session.Connection.CreateCommand())
    {
        cmd.CommandText = script.Replace("dbo.", "dbo_");
        cmd.ExecuteNonQuery();
    }
}, false, false, exportSchemaOutput); 
```

（我假设您已经调用了一个`ISession`对象）。

# image - Magento - 在邮件中显示简单的产品

> ID：12566257
> 
> 赞同：0
> 
> 时间：2012-09-24T13:39:13.063
> 
> 标签：image, magento, product

我的问题是我想在订单/发票交易电子邮件中显示一个简单产品的图像，但发生的事情是为可配置产品图像设置的图像是显示的。

例如，我有一个由黑色衬衫、蓝色衬衫和灰色手提包组成的 T 恤可配置产品。可配置产品的图像是灰色衬衫。当用户订购蓝色衬衫或黑色衬衫时，图像始终是灰色衬衫。

这是我在 email/order/items/order/default.html 中使用的代码

```
<p align="center"><img src="<?php echo Mage::helper('catalog/image')->init($product, 'thumbnail')->resize(125); ?>" width="125" height="125" alt="<?php echo $this->htmlEscape($_item->getName()) ?>" /></p> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:22:24.227

我找到了一个解决方案（可能是众多解决方案之一，但它有效）：

```
> <img src="<?php echo
> Mage::getModel('catalog/product')->loadByAttribute('sku',$_item->getSku())->getSmallImageUrl();
> ?>" width="125" height="125" alt="<?php echo
> $this->htmlEscape($_item->getName()) ?>" /></p> 
```

您首先获取 Item 的 SKU，然后通过搜索 sku 加载简单的产品。之后，您可以获得缩略图或小图像.... 成功了！

# javascript - 三.js JSONLoader；纹理未加载

> ID：12566261
> 
> 赞同：0
> 
> 时间：2012-09-24T13:39:21.640
> 
> 标签：javascript, 3d, textures, three.js

使用与 Three.js 打包的搅拌机导出器，我从[本教程](https://web.archive.org/web/20140525161350/http://www.blenderguru.com:80/videos/create-an-underground-subway-scene-part-2-of-2/)`.blend`中导出了文件。在搅拌机方面，我是个大菜鸟，所以我所做的很简单：

1.  打开文件，用导出器导出
2.  打开 UV/图像编辑器
3.  在导出的 JSON 旁边保存每个纹理的副本（使用正确的名称）
4.  将图像修改为具有 2 次幂的尺寸

所以我只是想看看我是否可以加载这个对象作为我正在做的实验中四处走动的关卡。网格加载正常，但没有纹理。我修改了 Three.js 源代码，`console.log`在它创建纹理图像（在`Loader`源代码中）时执行一个操作，以确保 URL 是正确的并且图像确实会加载，它们确实会加载。

这是代码：

```
var jLoader = new THREE.JSONLoader();
jLoader.createModel(map.data, function(geometry) {
    var material = new THREE.MeshFaceMaterial(),
    mesh = new THREE.Mesh(geometry, material);

    mesh.scale.set(50, 50, 50);

    scene.add(mesh);
}, map.texturePath); 
```

我使用`createModel`自己的加载器，因为我自己加载了 JSON 数据。`map.data`包含导出的 JSON，`map.texturePath`包含到带有纹理的目录的路径（没有尾部斜杠）；具体来说`'js/game/maps/subway'`。JSON 是 30MB，所以我不会在这里发布，但我可以告诉你，材料已经列出，以及`uvs`. 这是元数据：

```
"metadata" :
{
    "formatVersion" : 3.1,
    "generatedBy"   : "Blender 2.63 Exporter",
    "vertices"      : 474135,
    "faces"         : 236963,
    "normals"       : 168623,
    "colors"        : 0,
    "uvs"           : [3117],
    "materials"     : 1,
    "morphTargets"  : 0,
    "bones"         : 0
},

"scale" : 1.000000, 
```

我确实注意到它说`"materials": 1`当`materials`数组实际长度为 74 时。我对格式知之甚少，无法知道这是否是一个问题。

现在渲染时，您可以看到应该有纹理的地方只是空白。

[![地铁 - 无纹理](../Images/c03e33c91cfb97614946a19e8a16f96c.png)](https://i.stack.imgur.com/YAw7J.png)
[（来源：[pantherdev.com](http://static.pantherdev.com/misc/subway.png)）]

我尝试等待以确保它们不会花费很长时间来加载，尝试更改我实例化的材料，尝试不缩放网格，尝试将日志放入 three.js 以确保图像正在加载（它们是）。

仔细观察，我可以看到至少出现了 1 个纹理：

[![地铁 - 纹理加载](../Images/ea2e13a2add3c60729c7feffe62badd7.png)](https://i.stack.imgur.com/IFWva.png)
[（来源：[pantherdev.com](http://static.pantherdev.com/misc/subway2.png)）]

我不确定我做错了什么，或者接下来要尝试什么。

如果观看现场演示会有所帮助，您可以[在此处尝试，](http://static.pantherdev.com/dev/arena/client)尽管加载地铁 JSON 可能需要一两分钟，因为我的服务器只是客厅中的一个盒子；不完全是网络速度恶魔。

任何帮助表示赞赏，抱歉这么长的帖子；只是想提供我所拥有的所有信息。

* * *

**编辑**

我尝试使用纹理的绝对路径，甚至修改`mapDifuse`JSON 中材质的属性来尝试解决问题，但无济于事。

* * *

**编辑 2**

在使用 WebGL-Inspector 进行更多调试后，我在 Web 控制台中发现了以下错误：

```
[18:36:35.395] Error: WebGL: DrawElements: bound vertex attribute buffers do not have sufficient size for given indices from the bound element array @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:1933
[18:36:35.751] Error: WebGL: No further warnings will be reported for this WebGL context (already reported 32 warnings) @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:1933 
```

当我捕获一帧时，我会得到更多信息：

```
[18:38:12.349] Frame 791 errors: @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9780
[18:38:12.349] ---------------------- @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9781
[18:38:12.349]  INVALID_OPERATION <= drawElements(TRIANGLES, 306, UNSIGNED_SHORT, 0) @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9787
[18:38:12.349]    - @http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:4155 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
[18:38:12.349]    - @http://static.pantherdev.com/dev/arena/client/js/game/vendor/three/three.min.js:403 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
[18:38:12.350]    - n@http://static.pantherdev.com/dev/arena/client/js/game/vendor/three/three.min.js:346 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
[18:38:12.350]    - @http://static.pantherdev.com/dev/arena/client/js/game/vendor/three/three.min.js:408 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
[18:38:12.350]    - animate@http://static.pantherdev.com/dev/arena/client/isolate.html:108 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
[18:38:12.350]    - @http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:2307 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
  ... A WHOLE LOT OF THIS ...
[18:38:12.358]  INVALID_OPERATION <= drawElements(TRIANGLES, 6, UNSIGNED_SHORT, 0) @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9787
[18:38:12.358]    - @http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:4155 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
[18:38:12.358]    - @http://static.pantherdev.com/dev/arena/client/js/game/vendor/three/three.min.js:403 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
[18:38:12.358]    - n@http://static.pantherdev.com/dev/arena/client/js/game/vendor/three/three.min.js:346 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
[18:38:12.358]    - @http://static.pantherdev.com/dev/arena/client/js/game/vendor/three/three.min.js:408 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
[18:38:12.358]    - animate@http://static.pantherdev.com/dev/arena/client/isolate.html:108 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
[18:38:12.358]    - @http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:2307 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9792
[18:38:12.359]   @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:9796

[18:38:12.126] Error: WebGL: bindBuffer: target: invalid enum value 0x0 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:4163
[18:38:12.133] Error: WebGL: generateMipmap: Level zero of texture is not defined. @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:3668
[18:38:12.927] Error: WebGL: bindBuffer: target: invalid enum value 0x0 @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:4163
[18:38:14.156] Error: WebGL: DrawElements: bound vertex attribute buffers do not have sufficient size for given indices from the bound element array @ http://static.pantherdev.com/dev/arena/client/lib/gli.all.js:2745 
```

我认为假设我的 JSON 有一些不正确或缺失的值是正确的，但是我不确定如何纠正这种情况。就像我在评论中提到的（以及在这篇文章的开头），我`.blend`使用与 Three.js 打包的导出器导出了文件；我还需要做什么？

* * *

**编辑 3**

使用 WebGL-Inspector，我提取了更多关于失败的实际调用的信息。这是[工作“649”纹理](http://static.pantherdev.com/dev/working.html)和[损坏的“锈”纹理](http://static.pantherdev.com/dev/broken.html)的调试信息，尽管纹理没有显示在链接页面上，如果它对某人有帮助，数据就在那里（纹理确实显示在 WebGL-Inspector 上隔离页面，只是不在我链接的导出页面上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:06:40.157

对于某些材质，您的 uv 似乎不完整，因为 webgl 检查器在使用某些材质时会抛出错误。我仍然需要检查到底发生了什么，但这似乎是你的问题。问题可能是 JSON 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T22:47:10.550

您必须显示的不是元数据而是材质数组，默认情况下，如果材质中缺少纹理，则搅拌机导出器不会保存纹理，然后尝试[本教程](http://graphic-sim.com/B_basic_export.html)中的 2-2 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:50:38.787

我最终放弃了让这个工作的尝试，我认为模型本身的创建不正确。UV 似乎没有正确映射到模型，并且在导出时被破坏。我从来没有设法让它工作，但能够加载其他明显不同的纹理模型，即使刚刚加载到 Blender 中也是如此。

# vb.net - VB.NET GUI - TSQL 动态 SQL 噩梦设计

> ID：12566265
> 
> 赞同：3
> 
> 时间：2012-09-24T13:39:46.603
> 
> 标签：vb.net, tsql, dynamic-sql

这更像是一个设计而不是实现问题。我们的数据库有一个 VB.NET 前端。当前的设计是使用元数据表来执行“前端无 SQL”策略。我认为我们所做的事情比硬编码更糟糕，因为我们现在有了一些 STORED PROC 意大利面条代码。我们有很多动态 SQL 用于构建表的完全限定名称，然后将这些名称发送回另一个存储过程，例如处理平面文本文件的实际加载。

```
 ID DATA_TABLE_NAME DATA_TABLE_SCHEMA PTR_TABLE_NAME PTR_TABLE_SCHEMA
    1  datatable            DBO            datatable_ptr       DBO 
```

所以我们有一个类，它将获取数据表名称和表指针，并将其混合到 VB.NET 前端中的一个类中，该类发送一个全名，如 database.dbo.datatable 映射到 database.dbo.datable_ptr 并使用全局临时表加载平面文本文件。好吧，有人在这个讨厌的元数据小表中添加了一行，它破坏了 VB.NET 前端！必须有更好的方法来做到这一点，但我没有足够的经验来提出更好的通用解决方案。

程序员究竟如何强调代码重用和使用 T-SQL 和 VB.NET 的通用编程，同时保持代码的可读性和可维护性？有没有人对设计模式的书籍或烹饪书有一些建议，可以为我指出一些更可行的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T16:56:27.250

在我开始我提出的解决方案之前，我认为我需要先披露一些事情：

1）我**只有**2年多的专业编程经验。
2）我目光短浅，因为我只对我每天使用的数据库有经验。
3) 我只与 ONE（和当前）vb.Net/TSQL 公司合作过。

也就是说，考虑到以下情况，这就是我要做的：

1) 你的经理很可能希望看到某种可量化的进展。
2）您正在寻找一种实用的*方法*来解决这个问题（这个提议的解决方案提供了什么），以促进上述可量化的进展。
3）您需要保持“前端没有SQL”的理念。
4) 你需要一些可扩展的东西，所以当 35+ 个应用程序变成 75+ 个应用程序时，你仍然可以。

解决方案：
1\. 创建一个新数据库，就像在前端允许 SQL 一样（即“你一直想要的”）。
2\. 创建一个 Web 服务，作为前端（不能有 SQL）和“你一直想要的”数据库之间的中间人。这将解耦问题。不需要混淆数据库结构，因为它将从最终用户那里删除两次。

方法：
1) 最初，动态 SQL 可以“按原样”移动到 Web 服务。当部分意大利面被翻译时，它可以留在那里。我们可以称其为“主函数”，或“旧的做事方式”。
2) 为每个申请指定一个团队负责人（或每5个申请一个负责人等）。他们的职责是在创建他们的 Web 服务部分时充当联络人。您将需要知道他们需要哪些表，并且他们需要知道在创建 Web 服务时您想要的格式。
3) 一次处理一个应用程序：
   A) 设置他们需要的数据库表
   B) 创建 Web 服务以将这些表与前端接口
   C) 从前端创建函数调用以访问 Web 服务。首先尝试与新数据库表接口的新函数，然后尝试像现在一样与数据库接口的 Master 函数。

随着应用程序切换到使用它们的“个性化”Web 服务功能，主功能应该做的越来越少（即您慢慢停止使用意大利面条式存储过程）。此外，由于 Web 服务的创建（到此结束时可能有与应用程序一样多的贡献者）是分散的，因此工作可能会很快进行，并且由于主功能将是第一个启动和运行时，您的整个操作应该仍然可以照常进行。

# c++ - 如何实现具有多个交换机的工厂？

> ID：12566271
> 
> 赞同：7
> 
> 时间：2012-09-24T13:40:09.310
> 
> 标签：c++, templates, factory

我想实现一个工厂函数来创建对象。我的对象模板如下所示：

```
template <typename TA, typename TB>
struct MyImpl : public MyInterface
{
    // content
}; 
```

我的工厂是这样的：

```
MyInterface* factory(char ta, char tb)
{
    if(ta == 'c' && tb == 'c')
    {
        return new MyImpl<char, char>();
    }
    if(ta == 'c' && tb == 's')
    {
        return new MyImpl<char, short>();
    }
    if(ta == 's' && tb == 'c')
    {
        return new MyImpl<short, char>();
    }
    // and so on ....
} 
```

工厂函数必须接受非静态字符数据（`ta`, `tb`），因为它无法在编译时确定，我认为这就是这个工厂的全部意义所在。事实上，`ta`和`tb`都是从文件（或网络）中读取的。

我想要一个更简单的解决方案来避免烦人的 2 级开关。

我认为我的问题与[how-would-one-write-a-meta-if-else-if-in-c](https://stackoverflow.com/questions/4239632/how-would-one-write-a-meta-if-else-if-in-c)类似，但我不能使用静态参数。

也许我应该回退到 C 宏并使用一些宏技巧来缩小我当前的代码？

提前致谢！

**更新**

回复@Rob：

我的实际代码会更复杂，其中包含许多其他内容，并且更难阅读并且在许多方面都不相关。我正在尝试正确的伪代码，如果有任何问题，请告诉我:-)。

回复@Dynguss：

我的问题是，在我的实际实现中，工厂的参数（ta，tb）会很大，比如10 X ta和20 X tb，而ta和tb的组合会很长，很难维护. 所以我至少需要一些方法来简化组合工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T14:02:16.453

这是一个想法：

```
template <typename T>
MyInterface * factroy(char t)
{
    if (t == 'c') { return MyImpl<T, char>();  }
    if (t == 's') { return MyImpl<T, short>(); }
    // ...
}

MyInterface * factory(char ta, char tb)
{
    if (ta == 'c') { return factroy<char>(tb);  }
    if (ta == 's') { return factroy<short>(tb); }
    // ...
} 
```

使用可变参数模板，这种模式可以扩展到任意数量的类型参数——例如：

```
struct Base { virtual ~Base() = default; };
template <typename A, typename B, typename C> struct Foo : Base { };

#include <tuple>

template <typename ...Args>
constexpr Base * factory(std::tuple<Args...>)
{
    return new Foo<Args...>;
}

template <typename ...Args, typename ...Char>
constexpr Base * factory(std::tuple<Args...>, char t, Char ... ts)
{
    return t == 'c' ? make(std::tuple<char,      Args...>(), ts...)
         : t == 's' ? make(std::tuple<short int, Args...>(), ts...)
         : t == 'i' ? make(std::tuple<int,       Args...>(), ts...)
         : t == 'l' ? make(std::tuple<long int,  Args...>(), ts...)
         : nullptr;
} 
```

用法：`auto p = factory(std::tuple<>(), 'c', 's', 'l');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:02:04.880

如果您可以将 Impl 构造函数分离为 new Impl(new InnerImpl) ，那么可能会有一个非常复杂的解决方案，用映射替换开关：

```
 struct Creator {
     virtual ~Creator(){};
     virtual Interface *create(InterfaceInner *) = 0;
     virtual InterfaceInner *createInner() = 0;
  }

  std::Map<char, Creator *> creatorMap;

  template<char T>
  struct Factory {
     Factory() {
       creatorMap.insert(T, &this->creator);
    }
  }

  template<>
  struct Factory<'s'> {
    struct ShortCreator : public Creator {
     virtual Interface *create(InterfaceInner *inner) {return new Impl<short>(inner);}
     virtual InterfaceInner *createInner(return new ImplInner<short>());
    } creator;
  }

  Factory<'s'> shortFactory;
  Factory<'c'> charFactory;

  creatorMap[ta].create(creatorMap[tb].createInner()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:59:26.507

关于什么：

```
MyInterface* factory(char ta, char tb)
{
    switch( ta << 8 | tb )
    {
    case 'cc': return MyImpl<char, char>();
    case 'cs': return MyImpl<char, short>();
    case 'sc': return MyImpl<short, char>();
    // and so on ....
    }
} 
```

注意：这在 Intel/AMD x86 和 x64 上工作正常，在具有不同字节顺序的 CPU（例如 PPC）上，您必须交换`ta`并且`tb`像这样：`switch( ta | tb << 8 )`.

# php - CodeIgniter 添加书籍和分类

> ID：12566272
> 
> 赞同：0
> 
> 时间：2012-09-24T13:40:12.607
> 
> 标签：php, codeigniter

好的，这就是我想要做的：

我有一个添加书籍表单，其中包含某些元素，例如标题、描述、作者和图像等。在添加表单中，我还有一些复选框，它们是用户想要放置书籍的类别。到目前为止，当用户单击在表单上添加图书按钮，所有输入均已验证，图书信息已插入数据库，图片上传成功。

一旦这一切都发生了，**在模型中，**我将返回刚刚添加到数据库中的记录的 book_id 并将其插入到另一个表中，如下所示：

```
$book_id = $this->db->insert_id();
$data = array(
        'book_linktable_book_id' => $book_id,
    );
$this->db->insert('book_linktable', $data); 
```

我需要将 book_category_id 与 book_id 一起插入到另一个表中。**因此，对于用户选择的每个类别，将 book_id 和 book_category_id 插入到另一个表中。**

这是控制器代码：

```
function create_book(){
    $this->form_validation->set_rules('title', 'Title', 'trim|xss_clean|required|max_length[50]');
    $this->form_validation->set_rules('description', 'Description', 'trim|xss_clean|required|max_length[600]');
    $this->form_validation->set_rules('exam_grade', 'Exam Grade', 'trim|xss_clean|required|max_length[10]');
    $this->form_validation->set_rules('author', 'Author', 'trim|xss_clean|required|max_length[25]');
    $this->form_validation->set_rules('edition', 'Edition', 'trim|xss_clean|required|max_length[15]');
    $this->form_validation->set_rules('publisher', 'Publisher', 'trim|xss_clean|required|max_length[30]');
    $this->form_validation->set_rules('price', 'Price', 'trim|xss_clean|required');
    if ($this->form_validation->run() == FALSE)
    {
        $data = $this->style_model->admin_area();
        $data['category_query'] = $this->admin_books_model->get_book_categories();
        $data['page_title'] = 'Add New Book';
        $this->load->view('admin/books/add_book', $data);
    }
    else
    {           
        //upload the image and create thumbnail
        $config['upload_path'] = APPPATH . 'uploads/';
        $config['allowed_types'] = 'jpeg|jpg|gif|png';
        $config['max_size'] = '1024';
        $this->load->library('upload', $config);

        $field_name = "image";
        if( ! $this->upload->do_upload($field_name))
        {
            //failed to upload
            $data = $this->style_model->admin_area();
            $data['category_query'] = $this->admin_books_model->get_book_categories();
            $data['page_title'] = 'Add New Book';
            $this->form_validation->set_message("image", "Image size too large");
            $this->load->view('admin/books/add_book', $data);
        }
        else
        {
            //image uploaded
            $data = $this->input->post('category');
            $this->load->view('admin/category', $data);
            /*$upload_data = $this->upload->data('file_name');
            $image_name = $upload_data['file_name'];
            $this->admin_books_model->add_book($image_name);
            $this->session->set_flashdata('msg', 'New Book Created');
            redirect('admin_books');*/
        }
    }   
} //function create_book() 
```

这是模型代码：

```
function add_book($image_name){
    $data = array(
          'book_name' => $this->input->post('title'),
          'book_description' => $this->input->post('description'),
          'book_grade' => $this->input->post('exam_grade'),
          'book_author' => $this->input->post('author'),
          'book_edition' => $this->input->post('edition'),
          'book_publisher' => $this->input->post('publisher'),
          'book_price' => $this->input->post('price'),
          'book_image' => $image_name,
        );
    $this->db->insert('books', $data);

    $book_id = $this->db->insert_id();
    //for each category selected, getthe id and insert into link table

    $data = array(
        'book_linktable_book_id' => $book_id,
    );
    $this->db->insert('book_linktable', $data);
} //function add_book() 
```

这是视图中的表单代码：

```
<div id="left_form_content">
            <?php echo form_open_multipart('admin_books/create_book'); ?>
            <?php echo form_label('Title') . "<br />"; ?>
            <?php echo form_input('title', set_value('title')); ?>
            <?php echo form_error('title') . "<br />"; ?>
            <?php echo form_label('Exam Grade') . "<br />"; ?>
            <?php echo form_input('exam_grade', set_value('exam_grade')); ?>
            <?php echo form_error('exam_grade') . "<br />"; ?>
            <?php echo form_label('Edition') . "<br />"; ?>
            <?php echo form_input('edition', set_value('edition')); ?>
            <?php echo form_error('edition') . "<br />"; ?>
            <?php echo form_label('Author') . "<br />"; ?>
            <?php echo form_input('author', set_value('author')); ?>
            <?php echo form_error('author') . "<br />"; ?>
            <?php echo form_label('Publisher') . "<br />"; ?>
            <?php echo form_input('publisher', set_value('publisher')); ?>
            <?php echo form_error('publisher') . "<br />"; ?>
        </div>
        <div id="right_form_content">
            <?php echo form_label('Description') . "<br />"; ?>
            <?php echo form_textarea('description', set_value('description')); ?>
            <?php echo form_error('description') . "<br />"; ?>
            <?php echo form_label('Categories') . "<br />"; ?>
            <?php
                foreach($category_query as $data) {
                    echo "<input type='checkbox' name='category[]' value='" . $data->book_category_id . "'>" . $data->book_category_name . "</input>" . "<br />";
                }
            ?>          
            <?php echo form_error('categories') . "<br />"; ?>
            <?php echo form_label('Image') . "<br />"; ?>
            <?php echo form_upload('image', set_value('image')); ?>
            <?php echo form_error('image') . "<br />"; ?>
            <?php echo form_label('Price') . "<br />"; ?>
            <?php echo form_input('price', set_value('price')); ?>
            <?php echo form_error('price') . "<br />"; ?>
            <?php echo form_submit('submit', 'Add Book'); ?>
            <?php echo form_close(); ?>
        </div>
        <div class="clear"></div> 
```

提前感谢您的帮助，

汤姆

编辑：

以下是数据库表：

```
Books
book_id
book_title
book_description
book_author
book_grade
book_edition
book_publisher
book_image
book_price

book_categories
book_category_id
book_category_name

book_linktable
    book_linktable_book_id
    book_linktable_book_category_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:14:55.073

你似乎离你想要完成的事情很近。您只需要遍历类别 ID 的数组并插入如下行：

```
$categories = $this->input->post('category');
foreach ($categories as $category_id)
{
    $this->db->insert('book_linktable', array(
        'book_linktable_book_id' => $book_id,
        'book_linktable_book_category_id' => $category_id
    ));
} 
```

或者，您也可以使用该`insert_batch()`方法。

```
$data = array();
foreach ($categories as $category_id)
{
    $data[] = array('book_linktable_book_id' => $book_id,
                    'book_linktable_book_category_id' => $category_id
    );
}
$this->db->insert_batch('book_linktable', $data); 
```

# objective-c - UINavigationController popToRootViewController 的 prepareForSegue

> ID：12566273
> 
> 赞同：1
> 
> 时间：2012-09-24T13:40:13.420
> 
> 标签：objective-c, ios, uinavigationcontroller

我需要在我拥有的两个视图控制器之间传递信息。过去，我通过将第二个视图的 .h 导入到第一个视图的代码中，然后在第一个视图中实现 prepareForSegue 并在那里设置第二个视图的值来完成此操作。但是，现在我的 2 个视图控制器位于导航控制器中，因此没有与过渡回根视图控制器相关联的 segue（因为它是用 完成的`[self.navigationController popToRootViewControllerAnimated:YES]`）。

有没有一种类似于 prepareForSegue 的方法可以与 UINavigationController pop 一起使用？或者我是否必须设置委托或 NSNotifications 才能将信息发送回根视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-16T23:27:17.647

您可以尝试实现自己的

```
@interface MyUINavigationController : UINavigationController  <UINavigationBarDelegate> 
```

然后实现：

```
- (void)navigationBar:(UINavigationBar *)navigationBar didPopItem:(UINavigationItem *)item 
```

和

```
-(BOOL)navigationBar:(UINavigationBar *)navigationBar shouldPopItem:(UINavigationItem *)item 
```

然后，您可以将变量存储在 UINavigationBar 中，并通过调用如下方式使用它们：

```
MyNavigationController *navi =self.navigationController;
navi.variable = myvariable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:49:13.383

当`push`它们位于`UINavigationController`. 在 StoryBoard 中，从一个视图拖到下一个视图，然后选择`push`作为 segue 类型并为 segue 设置标识符。然后您可以正常设置目标视图控制器。

要传回信息，您需要设置一个委托，因为推送的视图控制器不应该有关于谁调用它的详细信息。

# c# - 在 RegEx 中按标签和 id 匹配 xml 元素

> ID：12566274
> 
> 赞同：-2
> 
> 时间：2012-09-24T13:40:16.703
> 
> 标签：c#, regex

### 我无法解析 xml，因为在这个阶段它是无效的并且不会解析。

我将如何匹配一个简单的 xml 元素（带有 id），如下所示：

```
<g id="crop"></g> 
```

使用正则表达式？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:43:44.880

冒着被否决的风险... 为工作使用正确的工具怎么样？

```
var xmlStr = "<g id=\"crop\"></g>";
var att = XElement.Parse(xmlStr).Attribute("id");
var id = (string)att; 
```

# java - 在android上创建自己的键盘

> ID：12566281
> 
> 赞同：0
> 
> 时间：2012-09-24T13:40:53.073
> 
> 标签：java, android, button, android-edittext, keypad

对于我的应用程序，我制作了一个带有自己的一组按钮的键盘，但是我需要使用一些功能来模拟实际的键盘。

按钮在 xml 的表格布局中绘制。

我需要模拟下一个按钮以将焦点移动到下一个编辑文本。编辑文本在页面上作为数组处理。

我还需要模拟 android 的实际键盘的输入，它将添加光标当前指向的键。目前，键将从`EditText`字符串的后面添加/替换/删除。

键盘按钮作为数组处理。

```
public void onClick(View v) {
    try {
        String tmp=texts[selectEdit].getText().toString();
        switch (n) {
            case 3: texts[selectEdit].setText(tmp.substring(0,tmp.length()-1));
                    break;//get cursor position and delete char
            case 7:{
                    Precision.performClick();
                    break;
                    }//spinner for selecting precision
            case 11:{
                    if(!tmp.contains("E"))
                        texts[selectEdit].setText(tmp+""+keybuttons[n].getText());
                    break;
                    }//check for E if dont have do default case
            case 15:{               
                    //calculator.num=n;
                    //startActivity(new Intent("com.easyPhys.start.calculator"));
                    break;
                    }//open Calculator
            case 16: break;//next field
            case 17: {
                      onBackPressed();
                      break;
                     }//simulate back button
            default:{
                    texts[selectEdit].setText(tmp+""+keybuttons[n].getText());
                    //get cursor start and end and get entire String
                    // replace selected String with button text
                    //insert back
                    break;
                    }
            }//end of switch
    }//end of try 
```

对不起，代码排序不当，但我尽量保持紧凑。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:46:02.310

在此处尝试以下链接，您将获得一些有关 android 上的自定义键盘的信息。

[http://tutorials-android.blogspot.in/2011/06/create-your-own-custom-keyboard-for.html](http://tutorials-android.blogspot.in/2011/06/create-your-own-custom-keyboard-for.html)

或者

[如何为安卓开发软键盘？](https://stackoverflow.com/questions/3480715/how-to-develop-a-soft-keyboard-for-android)

或者

[如何为android中的应用程序制作自己的键盘？](https://stackoverflow.com/questions/5010714/how-do-i-make-my-own-keyboard-for-an-app-in-android)

看看吧，我想它会对你有所帮助。

# html - 盒子并排？

> ID：12566282
> 
> 赞同：0
> 
> 时间：2012-09-24T13:40:54.810
> 
> 标签：html

我不知道如何将两个 div 框并排放置。

第二个框出现在较低的中间。它应该在中间，靠近第一个框。谁能弄清楚我做错了什么？

```
<link href="http://static1.grsites.com/user/generate/items/9832134.css" rel="stylesheet" type="text/css" />
<div class="clearfix" id="resultcontainer" style="position: relative;">
    <center>
        <div style="width: 100%; text-align: left;">
            <div class="result9832134">
                <div class="content pie">
                    <div class="boxtitle">
                        <div class="boxtitleinner">
                            <p style="text-align: center;">
                                <span style="color: #ffffff; font-size: 24px;"><span style="font-weight: bold;"><span style="color: #000000;">NYHEDER</span></span></span></p>
                        </div>
                    </div>
                    <div class="boxtext">
                        <div>
                            <p>
                                <span style="color: #ffffff;">&nbsp;</span></p>
                            <p style="text-align: left;">
                                <span style="font-size: 24px; color: #ffffff;">N&aelig;ste kursusstart den 07/10 i Projektstyring i praksis &amp; PRINCE2&reg; Foundation cerificering.</span></p>
                            <p style="text-align: left;">
                                <span style="color: #ffffff;">&nbsp;</span></p>
                            <p style="text-align: left;">
                                <span style="font-size: 32px; color: #ffffff;"><a href="http://www.2b1group.dk/index2.php?option=com_content&amp;view=article&amp;id=126&amp;Itemid=91&amp;lang=da" style="color: #ffffff;" target="_blank"><span style="color: #ffffff;">Tilmelding her</span></a></span></p>
                            <p>
                                <span style="color: #ffffff;">&nbsp;</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </center>
</div>

<link href="http://static1.grsites.com/user/generate/items/9832234.css" rel="stylesheet" type="text/css" />
<div :="" border="" left="" position="" top="">
    <div class="clearfix" id="resultcontainer" style="position: relative;">
        <center>
            <div style="width: 100%; text-align: left;">
                <div class="result9832234">
                    <div class="content pie">
                        <div class="boxtitle">
                            <div class="boxtitleinner">
                                <p style="text-align: center;">
                                    <span style="color: #ffffff; font-size: 24px;"><span style="font-weight: bold;"><span style="color: #000000;">PRAKTISK INFO</span></span></span></p>
                            </div>
                        </div>
                        <div class="boxtext">
                            <div>
                                <p>
                                    <span style="color: #ffffff;"><a href="http://www.2b1group.dk/kontakt.html" style="color: font-size: 24px; #ffffff;" target="_blank"><span style="font-size: 24px; color: #ffffff;">Find os her</span></a></span></p>
                                <p>
                                    &nbsp;</p>
                                <p>
                                    <span style="font-size: 24px; color: #ffffff;">Tlf: +45 1234 5678</span></p>
                                <p>
                                    &nbsp;</p>
                                <p>
                                    <span style="font-size: 24px; color: #ffffff;">Email: </span><span style="font-size: 24px;"><a href="mailto: bla@bla.dk" target="_blank">bla@bla.dk</a></span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
<!--[if lt IE 10]><script type="text/javascript" src="http://static1.grsites.com/user/generate/items/ie_compat.js"></script><![endif]-->        </center>
    </div>
</div>
<div class="clearfix" id="resultcontainer" style="padding: 50px 0;">
    <center>
        &nbsp;</center>
    <div class="clearfix" id="resultcontainer" style="padding: 50px 0;">
        <center>
            &nbsp;</center>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:45:54.493

[http://jsfiddle.net/uBusa/](http://jsfiddle.net/uBusa/)

```
#resultcontainer{
    display:inline-block;
    float:left;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:46:02.807

您应该`float: left;`在两个 div 上都设置一个样式。如果您需要它们的大小相同，您也可以在它们上设置高度和宽度。

如果您将它们都浮动，您可能还需要在它们下方放置第三个 div 以清除浮动

```
<div style="clear: both"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:48:25.443

您必须在 del divs 上添加 float:left

```
<div style="width: 100%; text-align: left;float:left;">

<div :="" border="" left="" position="" top="" style="float:left;> 
```

# git - Github中如何切换分支（可能是远程分支切换）

> ID：12566292
> 
> 赞同：0
> 
> 时间：2012-09-24T13:41:22.657
> 
> 标签：git, github

> **可能重复：**
> [删除远程主分支，由于是当前分支而被拒绝](https://stackoverflow.com/questions/14040754/deleting-remote-master-branch-refused-due-to-being-current-branch)

我为使用 git 的 kde 项目编写代码。有一个中央仓库，我有一个带有一些本地分支的本地克隆。现在，我也为其编写代码的发行版想要更改一些默认的 kde 内容，并且他们使用 github 来托管他们修改后的代码。

问题如下：

首先，github repo 完全是空的。然后，我将本地 master 分支（错误地）推送到了该仓库。在意识到这一点之后，我将包含发行版修复的分支也推送到了 github。现在我想删除这个 github master，因为发行团队不需要它，打包者需要一个分支来构建。这样做

```
git push github :master 
```

导致错误“无法删除当前分支”。

问题是，如何切换远程分支以将包含修复的分支设置为“当前”并删除不必要的“主”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:57:30.387

我的猜测是 github 不是遥控器。通常 git 使用`origin`

所以`git push origin :master`应该做

您可以通过运行查看遥控器列表`git remote -v`

至于回答这个问题“问题是，如何切换远程分支以将包含修复的分支设置为“当前”并删除不必要的“主”？

你没有提供足够的细节。持有您需要保留的代码的分支的名称是什么？你的遥控器是什么？

# java - 为石英简单触发器设置时区

> ID：12566297
> 
> 赞同：2
> 
> 时间：2012-09-24T13:41:33.417
> 
> 标签：java, triggers, timezone, quartz-scheduler

我需要为包含时区的作业设置石英触发器。例如，我需要将其设置为 2012 年 8 月 27 日欧洲/阿姆斯特丹时区 15:00。我的服务器在 UTC 上工作。

我相信 SimpleTrigger 是我需要的，但我不知道如何为它设置时区。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:51:25.240

SimpleTrigger 的触发时间基于配置的开始时间。

开始时间指定为 java.util.Date，它实际上只是自 1970 年 1 月 1 日 00:00:00.000 GMT 以来以毫秒为单位指定的时间。

如果在 2010 年 10 月 23 日 8:13:45 EST 您的代码执行 new Date()，并将结果设置为开始时间，Quartz 将以毫秒 (1287839625000) 为单位的值存储为开始时间，然后触发器将无论调度程序在哪个时区运行，都会在 2010 年 10 月 23 日 8:13:45 EST 触发。

如果您使用 java.util.Calendar 在特定时区定义日期和时间，然后将其转换为日期，它将完全相同：如果您指定了 Oct 23, 2010 8:13:45 和日历的时区为 EST，那么生成的毫秒值将再次为 1287839625000。但如果时区为 PST（但日期时间相同），则毫秒值将为 1287850425000（3 小时后）。

只需确保运行 Quartz 的系统时钟已正确设置并由操作系统维护为 UTC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-27T07:30:42.213

我有同样的要求。我能够使用以下方式实现这一点。

1.  将用户时间转换为 UTC`utcTime =userTimetoUTCTime("09/28/2017 12:00:00 AM")`
2.  重新将 UTC 转换为服务器时区并将其设置为简单触发器`utcTimetoUserTime(utcTime)`

    `public static String userTimetoUTCTime(String userTime) {`

    ```
     ZoneId zone = ZoneId.systemDefault();

        DateTimeFormatter fmt = DateTimeFormatter.ofPattern("MM/dd/yyyy hh:mm:ss a").withZone(zone);
        ZonedDateTime utc = ZonedDateTime.parse(userTime, fmt).withZoneSameInstant(ZoneOffset.UTC);

        // Convert Local Time to UTC
        OffsetDateTime gmtTime = utc.toOffsetDateTime().withOffsetSameInstant(ZoneOffset.UTC);
        // Utc to local time
        // gmtTime.atZoneSameInstant(ZoneId.systemDefault()).toString();
        return gmtTime.toString();
    } 
    ```

`public static Date utcTimetoUserTime(String utcTime) { return new DateTime(utcTime).toDate(); }`

**注意：可以在**[CronTrigger](https://stackoverflow.com/questions/14273917/java-quartz-scheduler-across-timezone)中设置时区，但不能在 SimpleTrigger中设置

# hibernate - Hibernate bean 验证问题

> ID：12566298
> 
> 赞同：1
> 
> 时间：2012-09-24T13:41:40.327
> 
> 标签：hibernate, validation, spring-mvc, bean-validation, hibernate-validator

我正在使用带有休眠验证器 4.2 的 spring 3.1。我观察到休眠验证被调用了两次：一次在控制器级别，当我使用如下方法时：

```
 @RequestMapping(method = RequestMethod.POST)
    public String onSubmit(@Valid User user, BindingResult result) {....} 
```

第二次将实体作为以下内容持久化：

```
org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(..)
org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreUpdate(..)
org.hibernate.action.EntityUpdateAction.preUpdate(..) 
```

我相信在控制器级别进行验证并显示带有错误消息的错误页面更有意义。无论如何，在流程中进行两次相同的验证并不好。我在休眠文档中发现可以通过在休眠配置中设置为 false 来关闭它，`hibernate.validator.autoregister_listeners`但不建议这样做。

那么推荐的验证方法是什么？同样在我的特殊情况下，第二次验证会引起麻烦，因为我有一个字段' `confirmPassword`'，当用户提交表单时需要进行验证，但表中不需要，所以每当我必须保存、更新用户时，我必须设置`confirmPassword`不必要的字段只是为了验证通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:47:22.183

尽管有外表，但验证并不是一件容易的事。

*前端验证*适用于填写表单的用户，并且可以从一个视图更改为另一个视图（例如不同的消息）。视图中必填字段的消息应该是“该字段是强制性的！”，在实体被持久化的后端：“字段不能为空”。

*后端验证*应始终在保存类时进行，考虑事实上可以保存持久实体而无需从视图传递（例如，从从 web 服务或队列或其他来源接收数据的批处理中......）。

如果您在实体级别放置验证注释，则您在该类上强制执行合同，该合同独立于该类已在视图中使用与否这一事实。

ConfirmPassword 是一个视图字段，所以我认为不应该作为字段出现在实体中（例如，我用 JSF 开发了一个类似的案例，我将 confirmPassword 放在与该视图相关的 ManagedBean 中而不是实体中，实体只包含密码字段）。

因此，总结一下，我认为两次“相同”验证是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:08:11.767

一切都取决于用例，并在一定程度上取决于个人品味。@obe6 建议使用两个单独的 bean，它们在某些情况下可能有用，但在其他情况下则不然。关于*confirmPassword*字段，您始终可以在您的实体中将其标记为*@Transient*，这样该值就不会被持久化。

就我个人而言，我可能会通过 @Valid 禁用 Spring 验证，因为它不是标准的。另一方面是 JPA 生命周期事件的 Bean Validation。我想这是另一个口味问题。不过，两者似乎都没有必要。

# c# - XmlTextReader.ReadElementContentAsBinHex 的轻量级替代品？

> ID：12566301
> 
> 赞同：2
> 
> 时间：2012-09-24T13:41:51.717
> 
> 标签：c#, .net, memory, clr, xmlreader

我在使用 XmlTextReader.ReadElementContentAsBinHex 时遇到了内存膨胀问题。首先让我说我不是选择使用十六进制，而是因为需要与遗留系统互操作。

```
int read;
var buffer = new byte[4096];
while((read = reader.ReadElementContentAsBinHex(buffer, 0, buffer.Length)) > 0)
    stream.Write(buffer, 0, read); 
```

对于大小大于 64M 左右的元素内容，我得到一个 OutOfMemoryException，这似乎与阅读器内部 StringBuilder 中的分配累积有关。不幸的是，我对此无能为力，因为我在 IXmlSerializable 对象中使用它，所以我不得不使用 XmlTextReader（它不支持 ReadValueChunk 之类的东西）。这感觉像是一个 .NET 错误，但我可能会被困住。任何人有任何聪明的想法？

# java - 用于发送电子邮件警报的 Web 应用程序

> ID：12566302
> 
> 赞同：0
> 
> 时间：2012-09-24T13:41:53.563
> 
> 标签：java, jsp, tomcat, smtp

我开发了一个应用程序，它检查数据库中的一些值并向特定用户发送电子邮件警报。当我在tomcat上上传war文件时它工作正常，但第二天它停止发送电子邮件。然后当我重新启动“Servlet Server (Tomcat)”服务时，它又可以正常工作了。或者如果我取消部署然后再次部署它工作正常。我在同一台服务器上运行其他应用程序，这些应用程序不断从传感器收集数据，它们很好。但这是唯一向用户发送电子邮件的应用程序。所以任何猜测，这里发生了什么问题。

我从中发送电子邮件的电子邮件帐户是否存在任何配置问题？我将邮箱配额设置为无限制！！

请记住：应用程序运行良好，但我必须每天重新启动 tomcat 服务器！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:53:21.120

看来您必须对这个问题进行大量调查。我建议您在您的应用程序上打开您的日志记录功能，并尝试在您的日志文件中获取尽可能详细的信息。然后你就可以弄清楚发生了什么。它可能是系统中的一个瓶颈，您必须在它上面坐一会儿才能抛出异常。

# html - 既然 Chrome 未能通过标准测试，如何测试触摸事件？

> ID：12566306
> 
> 赞同：12
> 
> 时间：2012-09-24T13:42:08.063
> 
> 标签：html, touch, modernizr

我曾经依靠

```
var supportsTouch = 'ontouchstart' in document; 
```

测试移动和桌面浏览器中的触摸支持。基于该测试，我将 eventListeners 绑定到单击或触摸事件。这在所有当前浏览器版本中都可以正常工作，但 Chrome Canary 的最新更新（24.0.1275.0 canary）当然 DEV 版本未能通过此测试。

我检查了当前的 modernizr 测试，但它也返回了误报，这意味着它表明即使该功能被禁用，chrome 也支持触摸。

我目前的解决方法是首先测试任何类型的移动浏览器，并且只有当返回肯定时才使用上述测试来检查触摸。这样做的缺点是您不能在 chrome 的开发工具中使用方便的“模拟触摸事件”选项。想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T08:48:59.657

**简短回答：**您的测试现在可以在任何当前的 Chrome 中再次运行。但可能不会永远。

**长答案：**

Chrome 团队希望将触摸事件添加到桌面浏览器中，因为具有触摸功能的屏幕的桌面越来越多。所以他们做到了——可能是在 Canary 24.0 左右的时候。然后他们发现很多人都在做你正在做的事情来“检测触摸设备”。这样做的问题是**您只测试*浏览器*是否支持触摸事件，而不是*设备***（同样适用`Modernizr.touch`）。更具体地说，只是[W3C/Apple TouchEvents API](http://www.w3.org/TR/2013/WD-touch-events-20130124/)。

他们不想为触摸/非触摸提供不同版本的 Chrome，所以他们做到了，因此只有在启动时检测到触摸设备时才启用触摸 API（在此处讨论：[http ://code.google.com /p/chromium/issues/detail?id=152149](http://code.google.com/p/chromium/issues/detail?id=152149)）。

因此，现在您的测试将再次起作用......**但是**- 如果您想为自己提供未来证明，您可能需要改变您的方法。原因如下：

1.  并非所有浏览器都会像 Chrome 那样执行此切换。

2.  触控功能正在成为一项动态功能：使用 Microsoft Surface 等，您可以从键盘和鼠标上拔下并只进行触控，用户可能通过 KVM 开关连接了触控显示器，在启动时不会被检测到，等等。浏览器供应商不会想要让 API 出现和消失——那将是一场噩梦——所以在某些时候，Chrome 家伙可能会在所有设备上永久启用 TouchEvents API。该测试将再次开始抛出“误报”。

相反，请查看[PointerEvents API](http://www.w3.org/Submission/pointer-events/)，它为鼠标、触摸和触控笔输入提供了一个通用事件接口。如果您正在考虑为触摸界面等制作更大的按钮，那么还有一个[指针媒体查询](http://dev.w3.org/csswg/mediaqueries4/#pointer)规范（和一个[悬停](http://dev.w3.org/csswg/mediaqueries4/#hover)规范），它将很快出现在浏览器中 - 这区分了输入设备的不同*精度*`none`- / `coarse`/ `fine`- 并且是动态的将允许您根据连接的指针设备调整样式，因为它们已连接/断开连接。很酷。

Modernizr v3.0（在接下来的几周内发布）将在此处进行一些相关更改：

*   正在添加对 PointerEvents API 的检测
*   `Modernizr.touch`正在重命名`Modernizr.touchevents`以更好地代表它的含义

所以我会考虑在可用的情况下使用 PointerEvents（它已经在 IE10 中），`Modernizr.touchevents`如果没有，则回退到开关。

# android - 将多个意图从多个位置触发到单个活动（使用一个实例）

> ID：12566307
> 
> 赞同：0
> 
> 时间：2012-09-24T13:42:16.180
> 
> 标签：android, android-intent, android-activity, singleton

我想要一个活动，但是从很多地方都会触发意图，这些意图有时可以在 10 秒内被调用两次......

关键是我只想有一个活动，每次有新意图时我只想刷新活动的gui状态

我怎样才能做到这一点 ？

我把 android:launchMode="singleTask" 和 singleinstance 但问题是 onNewIntent 根本没有被调用......

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    refreshGuiState();
} 
```

编辑

```
 <activity android:name="MyActivity"
       android:launchMode="singleTask" 

    android:theme="@android:style/Theme.Translucent.NoTitleBar"
        android:screenOrientation="portrait" android:label="@string/app_name"
        >
    </activity>

  Intent i=new Intent(MyApp.myContext, MyActivity.class);
            MyApp.myContext.startActivity(i); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:28:07.733

添加`android:taskAffinity=""`到清单定义中`MyActivity`

即使您已`launchMode="singleTask"`为此活动指定，如果您不明确指定`taskAffinity`，您也不会得到单独的任务。

# java - Spring上下文继承

> ID：12566310
> 
> 赞同：4
> 
> 时间：2012-09-24T13:42:20.143
> 
> 标签：java, spring

我在一个文件中有配置：applicationContext.xml。我有数据源、会话工厂和另外两个 bean。

我想改变这样的配置：

*   `applicationContext.xml -> parent`，其中包含数据源、会话工厂
*   `bean1.xml -> children`，它继承自 applicationContext 并且仅包含有关 bean1 的信息
*   `bean2.xml -> children`，它继承自 applicationContext 并且仅包含有关 bean2 的信息

我怎样才能做到这一点？我找到了有关继承 bean 的信息，但我想要另外三个文件而不是一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:50:08.070

看看 Spring 中的[import 标签](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-xml-import)。您可以在 bean1.xml 和 bean2.xml 中使用它来导入您的顶级 applicationContext.xml 配置文件，因此这两个配置在加载时将是分开的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:55:29.170

原则上，应用程序上下文可以有一个父上下文并简单地从那里继承所有 bean。不是完全无关紧要的（除非它最近发生了变化）是如何构建这种关系。

这帮助了我：

[http://blog.springsource.org/2007/06/11/using-a-shared-parent-application-context-in-a-multi-war-spring-application/](http://blog.springsource.org/2007/06/11/using-a-shared-parent-application-context-in-a-multi-war-spring-application/)

（我与作者无关）。

另一种方法是实际编写代码来执行此操作。如果你有一个 Web 应用场景，你可以扩展 Spring 的 ContextLoaderListener 并覆盖 loadParentContext：

```
public class ComponentParentContextContextLoaderListener extends ContextLoaderListener {

   @Override
   protected ApplicationContext loadParentContext(ServletContext servletContext) {
        // load parent context .e.g from class path / static member
        return ac;
    }

} 
```

# java - 在java中显示Gif动画

> ID：12566311
> 
> 赞同：14
> 
> 时间：2012-09-24T13:42:19.723
> 
> 标签：java, swing, gif

您好，我正在使用 Swing 在 Java 1.6 上编写 GUI 应用程序。

我有一个弹出屏幕，它应该在我的 Swing gui 加载时显示一个 gif 动画，稍后也会显示。

我的弹出屏幕是一个 JDialog。动画应显示在以下列方式添加到 Jdialog 的 JLabel 上：

```
ImageIcon myImgIcon = getMyImgIcon();
JLabel imageLbl = new JLabel(myImgIcon);
add(imageLbl, BorderLayout.CENTER); 
```

现在的问题是动画仅在 gui 加载后显示。我相信在加载 GUI 时（这在我的应用程序中是一项繁重的操作），EDT 太忙了，无法运行动画。

请参阅[如何使用线程显示动画 GIF 图像](https://stackoverflow.com/questions/7724078/how-do-i-show-a-animated-gif-image-using-a-thread)。

现在问题是我将 GUI 加载到不同的线程（不是 EDT）上是错误的，所以我不知道如何解决这个问题。

有人有想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T15:43:25.037

您只需释放一些繁重任务的 EDT 线程并在单独的线程中执行它们。在这种情况下，gif 动画将与其他正在运行的进程一起工作。

您也可以在单独的线程中创建您的应用程序界面（是的，不是在 EDT 内），但仅在您显示它之前。之后您应该在 EDT 内进行所有更改，否则您可能会遇到很多问题。

您还可以稍后在单独的线程中加载更多 UI 元素，只需确保将它们添加到 EDT 内显示的框架/容器中 - 这是最重要的事情。

这是一个“重载”界面加载的小例子：

```
public static void main ( String[] args ) throws InvocationTargetException, InterruptedException
{
    // Main window

    final JFrame frame = new JFrame ();

    final JPanel panel = new JPanel ( new FlowLayout ( FlowLayout.LEFT, 5, 5 ) )
    {
        public Dimension getPreferredSize ()
        {
            Dimension ps = super.getPreferredSize ();
            ps.width = 0;
            return ps;
        }
    };
    frame.add ( new JScrollPane ( panel ) );

    frame.setSize ( 600, 500 );
    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.setLocationRelativeTo ( null );

    SwingUtilities.invokeAndWait ( new Runnable ()
    {
        public void run ()
        {
            frame.setVisible ( true );
        }
    } );

    // Load dialog

    final JDialog load = new JDialog ( frame );

    JPanel panel2 = new JPanel ( new BorderLayout () );
    panel2.setBorder ( BorderFactory.createEmptyBorder ( 15, 15, 15, 15 ) );
    load.add ( panel2 );

    final JProgressBar progressBar = new JProgressBar ( 0, 100 );
    panel2.add ( progressBar );

    load.setModal ( false );
    load.pack ();
    load.setLocationRelativeTo ( frame );

    SwingUtilities.invokeAndWait ( new Runnable ()
    {
        public void run ()
        {
            load.setVisible ( true );
        }
    } );

    // Heavy task (takes approx. 10 seconds + some time on buttons creation) 

    for ( int i = 0; i < 100; i++ )
    {
        Thread.sleep ( 100 );

        final JButton button = new JButton ( "Button" + i );
        final int finalI = i;

        // Updating panel and progress in EDT
        SwingUtilities.invokeLater ( new Runnable ()
        {
            public void run ()
            {
                panel.add ( button );
                button.revalidate ();
                progressBar.setValue ( finalI );
            }
        } );
    }
} 
```

如您所见 - 所有接口更新操作都在 EDT 中进行，其他一切都在另一个线程中运行。

还要注意主线程不是 EDT 线程，所以我们可以立即在那里做一些繁重的事情。

在某些情况下，它不需要立即显示加载的界面部分，因此您可以在“繁重”操作结束时将它们全部添加。这将节省一些加载时间，并使初始化代码更加简单。

**关于 EDT 的简要说明以及我在答案中所说的话......**

...这是我在 Swing L&F 和许多基于 Swing 的应用程序下工作三年后发现的。我挖掘了很多 Swing 资源，发现了很多鲜为人知的有趣的东西。

如您所知 - 用于界面更新的单线程（其在 Swing 中的 EDT）的整个想法是将每个单独的组件**视觉**更新（及其事件）保存在一个队列中，并在该线程中一个一个地执行它们。这主要是为了避免绘制问题，因为单个帧内的每个组件都被绘制到保存在内存中的**单个图像上。**那里的绘画顺序很严格，因此一个组件不会在最终图像上覆盖另一个组件。绘制顺序取决于通过在另一个容器中添加一些组件或容器而创建的组件树（这是在 Swing 上创建任何应用程序接口时所做的基本操作）。

总而言之 - 您必须将所有**视觉**更新（可能导致它们的方法/操作）保留在 EDT 中。其他任何事情都**可以**在 EDT 之外完成 - 例如，您可以在 EDT 之外准备应用程序接口（同样，除非您在已经可见的容器内添加/删除/移动组件）。

在一些非常非常非常罕见的情况下，仍然可能存在一些内部问题。很久以前在这里对这个问题进行了很好的讨论：
[http ://www.velocityreviews.com/forums/t707173-why-does-jdk-1-6-recommend-creating-swing-components-on-the-edt .html](http://www.velocityreviews.com/forums/t707173-why-does-jdk-1-6-recommend-creating-swing-components-on-the-edt.html)

简而言之：自从 JDK 版本 6 以来，Sun 在文档中声明，即使是 Swing 组件的创建也应该在 EDT 内完成，以避免**可能**出现的问题。由于创建组件时发生的事件，它们可能会出现在某些特定情况下，因为创建了繁重的接口。

无论如何，我想说在某些情况下，您可能会在 EDT 之外创建您的界面，以避免加载程序/应用程序被卡住。在其他情况下，如果应用程序在界面创建时间卡住并不重要 - 您应该使用 EDT。我不能说更具体的事情，因为一切都取决于你的情况......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:48:02.417

也许您正在尝试制作一个在应用程序开始时播放的动画，而不会干扰即将发生的事件或组件。所以你可能想尝试一下**闪屏**。从这里阅读： http: [//docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)

`SplashScreen`在上面的链接中，它演示了一个从 Frame 类派生的类的用法。所以机制是这样的：你显示一个单独的框架（启动屏幕，你的动画在这里），一段时间后你的主应用程序启动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-27T16:49:56.677

'ImageIcon' 类允许您加载 gif 动画。我用'getResource（）'加载图像。为此，我通常使用 URL 类来传递文件路径。正如名称 URL 所暗示的那样，远程计算机中的路径不需要是必需的。

```
URL url = this.getClass().getResource(path);
Icon myImgIcon = new ImageIcon(url);
JLabel imageLbl = new JLabel(myImgIcon);
component.add(imageLbl, BorderLayout.CENTER); 
```

path 将是类文件夹中 gif 的路径。

参考资料： [http ://docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-04T15:26:49.763

在你的 JFrame 或其他任何东西中，使用这个：

```
Icon imgIcon = new ImageIcon(this.getClass().getResource("ajax-loader.gif"));
JLabel label = new JLabel(imgIcon);
label.setBounds(669, 42, 45, 15); // You can use your own values
frame.getContentPane().add(label); 
```

来源：[如何在 java swing 中显示动画 gif](https://tutoref.com/how-to-display-an-animated-gif-in-java-swing/)

# android - Android - ImageView 选择状态没有额外的图像？

> ID：12566312
> 
> 赞同：1
> 
> 时间：2012-09-24T13:42:30.593
> 
> 标签：android

当用户按下（单击）它时，我希望 imageview 变得更亮，但没有该状态的附加图像。可能吗？我们知道我们有可以使用 2 个不同图像的选择器，但我想要一个选择器、一个来自 XML 的可绘制对象和一个真实图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:12:49.047

```
Bitmap bitmap;
Drawable drawableBitmap= new BitmapDrawable(bitmap);
drawableBitmap.SetAlpha(--change here--); 
```

convert image to drawable. set alpha.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:58:05.663

好的，我得到它的工作。添加

```
implements OnTouchListener 
```

在您的活动定义中，添加

```
.setOnTouchListener(this); 
```

对于必须响应点击变得更亮的所有图像视图，并添加：

```
@Override
public boolean onTouch(View pV, MotionEvent pEvent) {
    if(pEvent.getAction() == MotionEvent.ACTION_DOWN){
        ((ImageView)pV).setAlpha(128);
    }
    else if(pEvent.getAction() == MotionEvent.ACTION_UP){
        ((ImageView)pV).setAlpha(255);
    }
    return true;
} 
```

到你的活动。就这样。

# ipad - 与标签栏控制器内的 uisplitviewController 一起使用时，tableView 上的 reloadData 崩溃

> ID：12566315
> 
> 赞同：0
> 
> 时间：2012-09-24T13:42:40.507
> 
> 标签：ipad, uitabbarcontroller, uitableview, uisplitviewcontroller, ios5.1

我正在使用标签栏应用程序。在其中一个选项卡中，我将 tableView 控制器嵌入为 SplitView。当此选项卡变为活动状态时，我会进行 URL 调用以从服务器获取一些数据。我无法在 tableView 中填充数据。我试过'[self.tableView reloadData]'，但应用程序崩溃了。我的 ViewController 类是 UITableViewController 的子类。

```
- (void)didReceiveUserListFromServer
{
NSData *jsonData = responseData;
NSError *error=nil;

NSMutableDictionary *responseDict = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONWritingPrettyPrinted error:&error];
userDetailsArray = [responseDict objectForKey:@"userDetails"];
NSLog(@"count===%d",[userDetailsArray count]);   //This returns a non-zero number
[self.tableView reloadData];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [userDetailsArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"ReturningPatientSearchResultCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

NSMutableDictionary *singleUserDetail = [userDetailsArray objectAtIndex:indexPath.row];
cell.textLabel.text=[singleUserDetail objectForKey:@"Name"];  //EXC_BAD_ACCESS here

return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:24:19.727

我会尝试在你的类中创建`userDetailsArray`一个**强大**的属性，并使用`self.userDetailsArray`它来设置它的值和对它的引用。

（奇怪的是，数组对以后的访问有效`count`而不是对以后的访问有效，但释放的内存似乎是最合乎逻辑的解释。）

您还可以尝试为您的构建方案打开僵尸，看看是否能提供更好的信息。

# macos - 使用 QFileDialog::getSaveFileName 将文件保存到受限位置不会给出错误消息

> ID：12566317
> 
> 赞同：1
> 
> 时间：2012-09-24T13:42:51.437
> 
> 标签：macos, qt, qfiledialog

我正在 MAC 上处理示例 QT 项目并保存文件我正在使用带有本机对话框的 QFileDialog::getSaveFileName API，如果我将文件保存到只读目录，它仍然会被保存！！！但行为应该是它应该给出错误信息。当我在 Windows 系统上观察到一切正常时，它会给出错误消息，但在 MAC id 上没有人能早点遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:44:15.740

`getSaveFileName()`只是返回用户选择的位置的路径。它实际上并没有创建任何文件。在您尝试实际创建/写入文件之前，权限不是问题。

# django-forms - 更新 Django 文件

> ID：12566319
> 
> 赞同：0
> 
> 时间：2012-09-24T13:42:57.133
> 
> 标签：django-forms

我是 Django 新手，我刚刚下载了 Django 并使用它创建了一个新项目。问题是我无法在我的新项目目录中修改或添加新文件。怎么了 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:45:33.607

您使用的是什么操作系统？你在哪个目录开始你的项目？也许您没有编辑此目录的权限

# node.js - 带有 Amazon Load Balancer 的 Socket.io，应该转发哪些端口？

> ID：12566327
> 
> 赞同：3
> 
> 时间：2012-09-24T13:43:29.407
> 
> 标签：node.js, amazon-web-services, socket.io, load-balancing, ports

我有一些作为亚马逊实例运行的 socket.io node.js 服务器，当直接连接到一个实例时，我的 socket.io 应用程序可以在几毫秒内连接和重新连接。但是，当我通过负载均衡器引导应用程序时，应用程序的连接和重新连接速度要慢得多（需要 5 秒以上）。

我已将负载均衡器配置为转发 TCP 端口 80，以及我的节点服务器侦听的端口（端口 3000）。socket.io 是否需要任何其他端口才能以最佳方式运行？还是我的问题不是由端口引起的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:24:46.807

我已经意识到这与端口或类似的东西无关。亚马逊负载均衡器保持第一次重新连接尝试打开直到超时，这意味着第一次连接在超时或重新连接之前等待 60 秒。我无法减少 ELB 的超时，这是 AWS 论坛上的一个已知问题，并且已经存在几年**了**。

# objective-c - xCode 旋转动画速度计

> ID：12566330
> 
> 赞同：0
> 
> 时间：2012-09-24T13:43:46.183
> 
> 标签：objective-c

我有一个使用自定义动画在我的应用程序中创建的速度计小部件，但我无法让它以我想要的方式制作动画。

拾取器根据传入的值动画到特定点。范围为 0 - 50。因此，如果其为 50，则拾取器将一直向右旋转，它将保持在左侧. 但是，我希望在开始时让选择始终动画到右侧，然后回到正确的位置。这是我遇到问题的部分。

暂时我已经硬编码所有的值只是为了测试目的。

选择在开始时位于中心，所以我需要让它看起来向左旋转。

```
image.transform = CGAffineTransformRotate(image.transform, -0.8); 
```

然后我需要把它动画到最右边所以我用这个

```
 [UIView animateWithDuration:2.0 delay:0 options:UIViewAnimationOptionBeginFromCurrentState
                     animations:^{

                         image.transform = CGAffineTransformRotate(image.transform, 1.7);

                     }
                     completion:nil]; 
```

这很好用，所以当应用程序启动时，选择将从左侧开始，然后一直向右旋转。

当我将最后一部分添加到

然后我需要它从右边旋转到它需要的位置。暂时我把它设置为中心。

```
 [UIView animateWithDuration:2.0 delay:2.0 options:UIViewAnimationOptionBeginFromCurrentState
                     animations:^{

                         image.transform = CGAffineTransformRotate(image.transform, -0.8);

                     }
                     completion:nil]; 
```

当应用程序启动时，选择从右侧开始，然后旋转到中心。它忽略了应该开始向左旋转的第一部分。

有谁知道为什么会这样？多年来一直在这，似乎无法弄清楚。

编辑：我尝试在此代码中粘贴最终动画

```
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 2.0 * NSEC_PER_SEC), dispatch_get_current_queue(), ^{

        }); 
```

选择将从左到右进行动画处理，但随后它只是从右侧跳转到中心点，而不是动画到中心点：@

试过这个：

```
-(void) animateToEnd : (UIImageView *)image
{

    [UIView animateWithDuration:2.0 delay:0 options:UIViewAnimationOptionBeginFromCurrentState
                     animations:^{

                         image.transform = CGAffineTransformRotate(image.transform, 1.7);
                         image.transform = CGAffineTransformIdentity;

                     }
                     completion:nil];
}
-(void) animateToFinalPosition : (UIImageView *)image
{

    [UIView animateWithDuration:2.0 delay:2.0 options:UIViewAnimationOptionBeginFromCurrentState
                     animations:^{

                         image.transform = CGAffineTransformRotate(image.transform, -0.8);
               image.transform = CGAffineTransformIdentity;

                     }
                     completion:nil];
}

-(void) speedometer : (UIImageView *)image
{
    image.transform = CGAffineTransformRotate(image_p.transform, -0.8);

   [self animateToEnd:image];
   [self animateToFinalPosition:image];

} 
```

它忽略了从左到右的动画，只是从最左边开始

固定问题。把动画改成了这个

```
-(void) animateToEnd : (UIImageView *)image_p
{

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:2.0];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

    image_p.transform = CGAffineTransformRotate(image_p.transform, 1.7);

    [UIView commitAnimations];

}
-(void) animateToPosition : (UIImageView *)image_p : (float)temp
{

        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 2.0 * NSEC_PER_SEC), dispatch_get_current_queue(), ^{

            NSLog(@"Dispatch");
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:2.0];
            [UIView setAnimationDelay:0.0];
            [UIView setAnimationDelegate:self];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

            image_p.transform = CGAffineTransformRotate(image_p.transform, -temp);

            [UIView commitAnimations];
        });

} 
```

我之前使用的那个块代码似乎导致了这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:50:24.793

在应用另一个轮换之前，您是否重置了您的身份矩阵：

```
image.transform = CGAffineTransformIdentity; 
```

如果未重置，则每次旋转都应用在前一个旋转之上。这可能是您问题的一部分。

# javascript - 如何在 javascript 中正确使用 Date() ？

> ID：12566332
> 
> 赞同：1
> 
> 时间：2012-09-24T13:43:50.007
> 
> 标签：javascript

当我尝试解析 unix-timestamp 时，我在使用日期对象时遇到问题。

例子：

```
//I am receiving json data that contains Unix-Timestamp like 1348514100000

var unixTimestamp = data.timestamp; //1348514100000
var date = new Date(unixTimestamp);
console.log(date.getDay()); // is wrong.. 
```

和示例2：

```
var unixTimestamp = data.timestamp; //1348514100000
var date = new Date();
date = date.setDate(unixTimestamp);
console.log(date.getDay()); // still wrong.. 
```

我试图解析字符串时间戳以将 int 转换为

```
var intUT = parseInt(unixTimestamp); 
```

但仍然不是正确的日期和时间。我真的不知道该怎么做。如何从此 unix 时间戳中获取正确的日期和时间？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:57:12.400

您的代码完全没问题，唯一的问题可能是类型不正确。试试这个：

```
new Date(+"1348514100000") 
```

给我`Mon Sep 24 2012 21:15:00 GMT+0200 (CEST)`，别人报`Mon Sep 24 2012 14:15:00 GMT-0500 (CDT)`和`12:15:00 GMT-0700 (PDT)`。根据[http://www.epochconverter.com](http://www.epochconverter.com)它是`Mon, 24 Sep 2012 19:15:00 GMT`.

请注意，所有这些日期都代表**完全相同的时间点**。时区差异（因此不同的时间）只是由于愚蠢的`Date.toString()`实现（从 Java 语言复制的错误）。

处理此类日期的唯一可移植和内置方法是在纪元时间（毫秒）上操作或使用`getUTC*()`一系列方法：

```
new Date(+"1348514100000").getUTCHours() 
```

上面的代码将**始终**返回 19（格林威治标准时间），与浏览器/操作系统时区无关。

# php - PHP：从 3 开始从 1 循环到 5

> ID：12566336
> 
> 赞同：5
> 
> 时间：2012-09-24T13:43:59.890
> 
> 标签：php, loops, random, for-loop

我想从 1 循环到 5。如果你使用 for 循环，这很容易：

```
for ($i=1; $i<=5; $i++)
{
 // do something
} 
```

但是想象一下，我不是从 $i=1 开始，而是从 1 到 5 随机开始编号，这次它的值为 3。所以我必须从 3 开始循环，循环序列应该是：3,4,5,1 ,2

我已经有了随机数，假设它是 3，那么我需要 3 4 5 1 2 .. 如果是 5，我将需要 5 1 2 3 4

我怎样才能做到这一点？？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:46:37.917

您想从某个随机点（偏移量）开始，然后循环 5：

```
$offset = rand(1,5);
for ($i=1; $i<=5; $i++)
{
  echo (($i + $offset ) % 5) + 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:52:47.720

好吧，将`$i`迭代 from这意味着您可以创建另一个等效于的变量，但当然它会导致以下计数：`1``5``$j``$i + 2`

```
3, 4, 5, 6, 7 
```

这就是模运算符 ( `%`) 的用武之地，模运算符为您提供除以第二个数字后的余数：

```
3 % 5 //3
7 % 5 //2 
```

如果您从`1`to迭代`5`并添加 2 ( `3-7`)，并获取 result `mod(5)`，您将得到：

方程：

```
$j = ($i + 2) % 5

3, 4, 0, 1, 2 
```

这接近你想要的，但并不完全。因此，不是`2`最初添加，而是最初添加`1`，然后在模数结果之后再次添加：

```
$j = $i;
$j += 1;
$j %= 5;
$j += 1;
//or in one line:
$j = (($i + 1) % 5) + 1; 
```

这将为您提供一系列`3, 4, 5, 1, 2`.

要使用随机偏移量，只需确保初始填充在一组 5 个连续正整数中随机化：

```
//this could be rand(0, 4) or rand(101, 105)
//it doesn't actually matter which range of 5 integers
//as the modulus operator will bound the results to the range of 0-4
$offset = rand(1, 5);
for ($i = 1; $i <= 5; $i++) {
    $j = (($i + $offset) % 5) + 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T13:48:42.010

试试这个 ：

```
for ($i = 0, $j = 3; $i < 5; $i++)
{
   echo $j;
   $j %= 5;
   $j++;
} 
```

你需要两个变量来做你想做的事。如果你设置 J = 3，它会做 3 4 5 1 2

玩得开心。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T14:48:53.383

一些（比我以前更好的）分步示例：

首先，您希望有 5 个数字，这就是您进行循环的原因。这可以写成从 0 到 4 的计数器：

```
for ($i = 0; $i < 5; $i++) { ... 
```

然后你指定你的起始值。如果将其放入变量中并与计数器变量一起增加，则可以从 1 计数到 5：

```
for ($i = 0, $j = 1; $i < 5; $i++, $j++) { ...
             ^^^^^^                ^^^^ 
```

这`$i`是计数器，`$j`包含您要查找的值。

如本例所示，确定要执行的步骤数的逻辑已与增加循环变量分开。

现在您需要添加检查是否`$j`高于 5，如果高于 5，则应将其重置为 1。但是，一个很好的方法是使用模运算符。这意味着，在增加 之前`$j`，它将被设置为自身除以 5 的余数。这就是`%`PHP 中的模运算，运算符：

```
for ($i = 0, $j = 3; $i < 5; $i++, $j %= 5, $j++) { ...
                                   ^^^^^^^ 
```

现在你已经有了`for`创造价值的循环。

在此示例中，您可以将 替换为`3`您的随机起始编号。注意它大于 0 且小于 6，否则至少第一次迭代会给你一个错误的数字。

您可以想象有多种方法可以做到这一点，所以这只是一个例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T13:46:00.610

```
 $i = array(3,4,5,1,2); //considering you want to follow this order, and not random.
 foreach($i as $v) {
 //do something
 } 
```

# c# - 首次调用 IIS 默认文档时在母版页中显示图像

> ID：12566338
> 
> 赞同：0
> 
> 时间：2012-09-24T13:44:01.930
> 
> 标签：c#, asp.net, iis, redirect

我得到了一个带有主页的解决方案（`Default.aspx)`在这个位置`"D:\Websites\wwwFlofab\HomeSite\Default\Pages"`，它在这个位置使用了一个母版页（`Site.Master`）`"D:\Websites\wwwFlofab\HomeSite\Master\Pages"`。

访问我们的网站时，我们使用的是`Default.aspx`（不是上面提到的）重定向到我的`Default.aspx`. 这样，当我输入我们的网址时，它正在重定向，所以`"http://www.mywebsite.com"`我没有得到类似的东西`"http://www.mywebsite.com/HomeSite/Default/Pages/Default.aspx"`

我不喜欢`"/HomeSite/Default/Pages/Default.aspx"`在第一次加载时显示，所以我更改了 IIS 7.5 默认文档`"Default/Pages/Default.aspx"`以避免重定向。

它现在在首次加载时正确显示 ( `http://www.mywebsite.com`)。

然后我看到了一些我不明白的东西，这就是我在这里发帖的原因:)

在我的母版页中，我有许多像这样显示的图像

```
<img src='~/Styles/images/ASME.png' /> 
```

在该 IIS 默认文档更改后，所有这些图像（在母版页中）都没有显示（仅在首次加载时）。为了正确显示它们，我需要添加我们的 url。

```
<img src='http://www.mywebsite.com/HomeSite/Styles/images/ASME.png' /> 
```

为什么我的图像会在手动重定向时正确显示，而不是从 IIS 调用时？

这是相同的页面，相同的文件夹，只是 url 改变了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:18:27.147

您在图像路径中使用了“~”符号，但没有添加`runat="server"`，因此路径按原样发送给客户端。

客户端把你的图片路径和页面地址的url结合起来，`"http://www.mywebsite.com/HomeSite/Default/Pages/Default.aspx"`所以`'~/Styles/images/ASME.png'`解析`"http://www.mywebsite.com/HomeSite/Styles/images/ASME.png"`成`"http://www.mywebsite.com/Styles/images/ASME.png"`.

解决方法是添加`runat="server"`到图片中，这样服务器无论如何都会解析正确的客户端url。

```
<img runat="server" src='~/Styles/images/ASME.png' /> 
```

# ios - 编译一个永远不会改变的静态库

> ID：12566340
> 
> 赞同：1
> 
> 时间：2012-09-24T13:44:13.437
> 
> 标签：ios, xcode, static-libraries

我几乎尝试了一切。

我有一个使用自己的库的项目。这是一个旧图书馆，我的同事一年前创建的。

这个库是用描述[这个站点](http://www.pixiapps.com/blog/?p=116)的通用目标生成的。

当我编译库时，xCode 会创建 .a 文件。

但是当我在封闭项目中尝试 lib 时，它**永远不会**被刷新。

我已经清除了所有内容：我的目标构建的 .a 文件。DerivedData 中的项目构建文件夹。设备/模拟器中的应用程序。

每次在控制台中出现相同的旧日志时，我已将其删除（此日志的工作区搜索不返回任何内容）。

那么，xCode 总是用来创建这个库的 f** 缓存到底在哪里呢？

（抱歉让我紧张，但我从上午 10 点就开始工作了）。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:46:50.737

图书馆没有缓存。检查项目中的库搜索路径。

![在此处输入图像描述](../Images/b6db6cef1adeb0a9a8f9910c7fb08f0a.png)

确保仔细检查 Project 和 Target 是否使用相同的设置。请注意，Target 会覆盖 Project，但如果 Target 详细信息未以粗体字母书写（粗体 = 覆盖），Target 也会继承 Project。

# microphone - 在 iphone 5 上从前置麦克风录制音频

> ID：12566344
> 
> 赞同：2
> 
> 时间：2012-09-24T13:44:25.310
> 
> 标签：microphone, iphone-5

我有一个应用程序，它可以从底部麦克风获取音频输入，以确定你吹的力度，然后我们用它来播放音乐。我们正在尝试找到一种方法来通过 iPhone 5 上的摄像头使用麦克风。我找不到任何苹果文档。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T20:01:09.267

最终发现你必须使用后置摄像头，才能使用背面的麦克风。我听说这可能会在新版本中更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-19T15:45:20.917

Apple 提供了一份技术说明，解释了如何选择要用于录制音频的麦克风：[https ://developer.apple.com/library/archive/qa/qa1799/_index.html](https://developer.apple.com/library/archive/qa/qa1799/_index.html)

# java - 如何以编程方式添加/删除任何应用程序的 EXE

> ID：12566347
> 
> 赞同：2
> 
> 时间：2012-09-24T13:44:33.960
> 
> 标签：java, windows, registry, advanced-installer

如果我们想自动启动一些应用程序，我们将它们放在 Windows 环境的启动文件夹中，如何以编程方式添加/删除任何应用程序的 EXE。我在我的应用程序中使用 java。

**背景细节：**在基于桌面的应用程序上工作，并使用[高级安装](http://www.advancedinstaller.com/)程序为应用程序创建安装程序，它工作正常，**问题是**我们可以选择添加/删除应用程序 EXE 的快捷方式，以便在系统上启动应用程序启动，高级安装程序提供了将 EXE 文件添加到启动中的选项，但如何使用 java 添加/删除它，因为它是一个基于 java 的应用程序

我只需要了解是否需要更改某些注册表值或 java 文件处理等来执行此操作，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:50:25.987

您可以通过执行下一个命令来安排任务：

```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc monthly /d 15 /ru "System" 
```

[您可以通过Runtime.getRuntime().exec()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)执行此命令

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:50:39.777

如果您在 Startup 文件夹中使用快捷方式，则可以通过“ `%USERPROFILE%\Start Menu\Programs\Startup`”找到对它的引用来删除它们，然后只需执行`File.delete()`. 如果无法在“高级安装程序”中以编程方式完成，您也可以编写一个 *.bat 文件来为您执行此操作。如果您希望它更隐秘一点，系统还具有位于注册表中的启动项：`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`

以下是 regedit 中的示例： ![在此处输入图像描述](../Images/3747654dacd63a28c4d0fdd54441de19.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:18:20.723

如果它是 Java 应用程序，我假设您正在使用[Advanced Installer 中的 java 启动器](http://www.advancedinstaller.com/user-guide/tutorial-java.html)？如果是这样，您需要做的就是[为您的 EXE 启动器创建一个快捷方式，](http://www.advancedinstaller.com/user-guide/tutorial-professional.html#files)并将其放在“文件和文件夹”页面的“开始菜单”文件夹下的预定义文件夹“启动”文件夹中。该快捷方式将在您安装软件包时安装并在卸载时删除，并且它将在机器启动操作系统时启动您的应用程序。

# search - opensearchserver 此目录已关闭-错误

> ID：12566352
> 
> 赞同：1
> 
> 时间：2012-09-24T13:44:39.910
> 
> 标签：search

我最近升级到oss1.3 rc3，在使用调度器时遇到了一些困难

9/24/12 12:49:00 PM 9/24/12 12:49:00 PM 0:00:00 索引 - 优化 优化开始 org.apache.lucene.store.AlreadyClosedException：此目录已关闭 9/24/ 12 12:49:00 PM 9/24/12 12:49:00 PM 0:00:00 网络爬虫 - 停止 没有运行

9/24/12 12:48:00 PM 9/24/12 12:48:12 PM 0:00:12 索引 - 优化 优化开始 org.apache.lucene.store.AlreadyClosedException：此目录已关闭 9/24/ 12 12:38:00 PM 9/24/12 12:48:00 PM 0:10:00 网络爬虫 - 停止 10 分钟后未停止

我试图检查日志文件，它看起来像：

00:00:00,001 root - 无法强制解锁由另一个索引器组件持有的 NativeFSLock：/data/test/index/20120922160504/write.lock org.apache.lucene.store.LockReleaseFailedException：无法强制解锁持有的 NativeFSLock由另一个索引器组件：/data/test/index/20120922160504/write.lock at org.apache.lucene.store.NativeFSLock.release(NativeFSLockFactory.java:274) at org.apache.lucene.index.IndexWriter.unlock(IndexWriter .java:5739) 在 com.jaeksoft.searchlib.index.WriterLocal.unlock(Unknown Source) 在 com.jaeksoft.searchlib.index.WriterLocal.close(Unknown Source) 在 com.jaeksoft.searchlib.index.WriterLocal.optimizeNoLock( Unknown Source) at com.jaeksoft.searchlib.index.WriterLocal.optimize(Unknown Source) at com.jaeksoft.searchlib.index.IndexSingle.optimize(Unknown Source) at com.jaeksoft.searchlib.Client.optimize(Unknown Source) at com.jaeksoft.searchlib.scheduler.task.TaskOptimizeIndex.execute(Unknown Source) at com.jaeksoft.searchlib.scheduler.TaskItem.run(Unknown Source) at com.jaeksoft。 searchlib.scheduler.JobItem.run(Unknown Source) at com.jaeksoft.searchlib.scheduler.TaskManager.execute(Unknown Source) at org.quartz.core.JobRunShell.run(JobRunShell.java:216) at org.quartz.simpl .SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:549)org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:549) 上的quartz.core.JobRunShell.run(JobRunShell.java:216)org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:549) 上的quartz.core.JobRunShell.run(JobRunShell.java:216)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:20:31.167

我想你已经解决了这个问题。

当 OpenSearchServer 写入索引时，会创建文件“write.lock”。在某些情况下（服务器崩溃、应用程序被终止），该文件可能不会被自动删除。

以下是解决此问题的过程： - 停止 OpensearchServer。- 删除名为“write.lock”的文件。- 重新启动 OpenSearchServer。

有时，在使用调度程序时，您可能有并发作业会尝试同时更新索引。一个典型的调度程序工作将完成这样的任务： - 停止网络爬虫。- 优化索引。- 复制索引。- 启动网络爬虫。

我希望这会有用。

# django - 在 django-tables2 的列中添加一个额外的变量

> ID：12566353
> 
> 赞同：0
> 
> 时间：2012-09-24T13:44:42.870
> 
> 标签：django, django-class-based-views, django-tables2

尝试构建一个 Django (1.4) 站点，该站点具有一些可以在弹出窗口中加载或不加载的页面。其中一些页面包含一个列表视图，在[Django-tables2中实现](https://github.com/bradleyayers/django-tables2)

当页面加载为弹出窗口时，会添加一个额外的 URL 参数；例如 `/backoffice/popup/articlegroups/`与 相同的页面`/backoffice/articlegroups/`，但显示为弹出窗口。

我的问题是如何将这条额外的信息（弹出或不弹出）添加到 Django-tables2 中的 LinkColumns，因为到编辑页面的链接也需要有这些信息。
Django-tables2 有一个访问器，可用于访问查询集中的属性，但我需要在查询集*之外*添加一条额外的数据。我已经看到向现有数据集添加额外数据充其量是棘手的，而且感觉不是很干净。

我想知道是否没有一种简单的方法可以将额外数据添加到表或列类中，我也尝试查看 table.meta 类，但无济于事。

我的代码如下：

表格.PY

```
class ArticlegroupTable(tables.Table):

    artg_name = LinkIfAuthorizedColumn(
        'ArticlegroupUpdate',
        args=["popup", A('pk')],
        edit_perm="articles.maintenance",
    ) 
```

这当然有效，但它正在将“弹出”参数添加为*固定字符串*，如您所见......

```
class ArticlegroupTable(tables.Table):

artg_name = LinkIfAuthorizedColumn(
    'ArticlegroupUpdate',
    args=[A('popup'), A('pk')],
    edit_perm="articles.maintenance",
) 
```

这不起作用*，*因为查询集中没有“弹出”属性......

意见.PY

```
 def get_context_data(self, ** kwargs):
    # get context data to be passed to the respective templates
    context = super(ArticlegroupSearch, self).get_context_data(**kwargs)
    data = self.get_queryset()
    table = ArticlegroupTable(data, self.request)
    RequestConfig(self.request, paginate={
        "per_page": 5,
        }).configure(table)
    context.update({'table': table})
    if 'popup' in self.kwargs:
        context.update({'popup': self.kwargs['popup']})
    return context 
```

似乎这不是一个非常牵强的场景（将 URL 参数添加到表 2 中的表/列），所以我想知道是否有人知道这样做的简单方法。

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T22:52:17.393

如果您想要快速破解，只需实现表的`__init__`方法并将`popup`arg`LinkColumn`动态添加到 s 中：

```
class ArticlegroupTable(tables.Table):
    def __init__(self, *args, **kwargs):
        if kwargs.pop("popup", False):
            for column in self.base_columns.values():
                if isinstance(column, tables.LinkColumn):
                    column.args.insert(0, "popup")
        super(Table, self).__init__(*args, **kwargs)

    # … 
```

然后在您看来，传入一个`popup`参数：

```
def get_context_data(self, ** kwargs):
    # get context data to be passed to the respective templates
    context = super(ArticlegroupSearch, self).get_context_data(**kwargs)
    data = self.get_queryset()
    popup = self.kwargs.get('popup')
    table = ArticlegroupTable(data, self.request, popup=popup)
    RequestConfig(self.request, paginate={
        "per_page": 5,
        }).configure(table)
    context.update({'table': table, 'popup': popup})
    return context 
```

# android - wifi和GPRS上的android超时异常

> ID：12566359
> 
> 赞同：0
> 
> 时间：2012-09-24T13:45:26.360
> 
> 标签：android, web-services, exception, android-wifi, socket-timeout-exception

贝娄是我调用服务的代码，但它给出了超时异常

```
 **DefaultHttpClient httpC = new DefaultHttpClient();
    HttpProtocolParams.setUseExpectContinue(httpC.getParams(), false);
    HttpConnectionParams.setConnectionTimeout(httpC.getParams(), 15000);
    HttpConnectionParams.setSoTimeout(httpC.getParams(), 15000);
    HttpPost httpPost = new HttpPost(WebServiceDetails.URL_WS_USER);
    httpPost.setHeader("SOAPAction", soapAction);

    try {
        se = new StringEntity(serviceXml,HTTP.UTF_8);
        se.setContentType("text/xml");
        httpPost.setEntity(se);
        BasicHttpResponse basicHttpResponse =   (BasicHttpResponse)httpC.execute(httpPost);
        HttpEntity responseEntity = basicHttpResponse.getEntity();
        InputStream inputStream = null;
        inputStream = responseEntity.getContent();
        BufferedReader r = new BufferedReader(new InputStreamReader(inputStream),1024*5);
        StringBuilder total = new StringBuilder();
        String line;
        while ((line = r.readLine()) != null) {
            total.append(line);
        }
        System.out.println("Response from service -"+total.toString());
        xmlContent=total.toString();
        System.out.println(" status Line = "+basicHttpResponse.getStatusLine());

    }catch (Exception e){e.printStackTrace();}** 
```

它可以在模拟器上运行，但不能在实际设备上运行，如果错误，请提出任何教程或示例.......

谢谢x...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:24:00.337

您的真实设备可能会通过移动网络遇到缓慢的 Internet 连接速度。

为了克服超时问题，我建议您简单地增加超时时间，以便为您的网络套接字购买更多时间来完成它们的操作。例如：

```
HttpConnectionParams.setConnectionTimeout(httpC.getParams(), 40000); //40 seconds
HttpConnectionParams.setSoTimeout(httpC.getParams(), 40000);         //40 seconds 
```

# django - 在管理界面上向 Django 内联对象添加自定义操作

> ID：12566363
> 
> 赞同：8
> 
> 时间：2012-09-24T13:45:36.180
> 
> 标签：django, django-models, django-admin

我有一个管理界面，里面有一篇博文，内联模型是博文的先前版本。

我想为以前的每个版本添加一个操作（还原操作，自定义模型方法）

我应该怎么做呢？它有点类似于 ModelAction 动作关键字，但我希望它位于模型视图中，而不是列表视图中，并且它适用于每个内联模型，而不是父模型

会喜欢一些帮助。

**让它更清楚**

我的 previous_version 类有一个名为 revert 的函数。我想要的是，在每个先前版本的管理面板中我的博客文章视图中，我都会有一个链接或按钮或其他东西。按下它会调用previous_version.revert。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:08:41.067

我想正确的做法是文档中描述的管理操作-

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/](https://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:07:23.260

您可以使用 action 扩展 Blog ModelAdmin `revert`。

覆盖内联模型模板以添加按钮，就像您说的那样，您已经这样做是一种好方法。

只需确保将创建的视图包装在[admin_view 中](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_urls)并只允许发布请求。

# android - 使用 Html.fromHtml 在 TextView 中设置文本

> ID：12566371
> 
> 赞同：15
> 
> 时间：2012-09-24T13:45:56.360
> 
> 标签：android, android-layout, textview

我必须分三个部分显示文本，所以我使用了 Html.fromHtml 像这样：

```
txtvw.setText(Html.fromHtml("<p align=right> <b> "
                    + "Hi!" + " </br> <font size=6>"
                    + " How are you "+"</font> </br>"
                    + "I am fine" + "  </b> </p>")); 
```

HTML 是正确的，但在设备中它显示在一行中。

我的 textview xml 声明是：

```
 <RelativeLayout
    android:id="@+id/Home"
    android:layout_width="fill_parent"
    android:layout_height="60dp"
    android:background="@drawable/transparentfooter"
    android:layout_above="@+id/bottombar" >

     <TextView 
    android:id="@+id/txt"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:textColor="@android:color/white"/>

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T13:58:59.807

您使用`<br>`标签的方式不合适。使用以下内容：

```
txtvw.setText(Html.fromHtml("<p align=right> <b> "
            + "Hi!" + " <br/> <font size=6>"
            + " How are you "+"</font> <br/>"
            + "I am fine" + "  </b> </p>")); 
```

它应该是`<br/>`而不是`</br>` 我已经测试过这段代码，它按预期显示了 3 行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-24T07:03:49.737

```
Html.fromHtml(String source) 
```

现在已从 Api-24 弃用。

从 Api-24 开始，此方法更改为

```
Html.fromHtml(String source,int flags) 
```

所以我们可以像下面这样使用 Api 24

```
txtvw.setText(Html.fromHtml("<p align=right> <b> "
            + "Hi!" + " <br/> <font size=6>"
            + " How are you "+"</font> <br/>"
            + "I am fine" + "  </b> </p>"),Html.FROM_HTML_MODE_LEGACY); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:03:03.580

将行标签设置为您的布局 android:lines="4"

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:lines="4"                
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

</RelativeLayout> 
```

编写正确的“br”html标签

```
 TextView text =(TextView)findViewById(R.id.text);        
        text .setText(Html.fromHtml("<p align=right> <b> "
                + "<br>" +"Hi!" + "  </br> "
                + "<br> How are you "+" </br>"
                + "<br>I am fine" + " </br> </b> </p>")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-16T17:55:27.420

textView.setText(Html.fromHtml(str, Html.FROM_HTML_MODE_COMPACT));

# javascript - IOS6上的HTML5图像上传和调整大小

> ID：12566375
> 
> 赞同：2
> 
> 时间：2012-09-24T13:46:02.600
> 
> 标签：javascript, html, file-upload, ios6

我已经实现了一种将文件添加到 HTML5 应用程序（IOS6 现在允许）并在上传之前调整图像大小以免削弱 3G 的方法。在我的 Mac 上运行的 chrome 上一切正常，但是当我在 IOS6 上进行测试时，图像完全被压扁了，不像它应该的那样。

在您的浏览器和移动浏览器 (IOS6) 中尝试这个 JsFiddle，它应该会给您一个更好的主意。

[http://jsfiddle.net/Untd8/](http://jsfiddle.net/Untd8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:53:31.703

[查看我对HTML5 Canvas drawImage ratio bug iOS](https://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios)的回答

基本上，这是 iOS 中的一个限制，它对超过 2 兆像素的 JPEG 进行二次采样。

# quickbooks - 使用 ASP.net 的 QuickBooks Web 连接器中的数据收缩

> ID：12566377
> 
> 赞同：0
> 
> 时间：2012-09-24T13:46:14.497
> 
> 标签：quickbooks, connector

我正在使用 QuickBooks Web 连接器并希望在 Web 应用程序中显示公司数据（位于 QuickBooks 中），为此我创建了一个与 Web 连接器通信并获取所有数据的服务。为此，我认为我必须创建一个可以存储所有数据的本地数据库。这是正确的方法吗？

```
If yes then How can I shrink QuickBooks data with my local DB
If No then what need to in this case 
```

我是 QuickBooks 的新手请帮帮我

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:24:47.863

如果您使用 Web 连接器，则无法控制何时调用您的服务。因此需要将数据存储在某处；否则，当您的用户登录时，您可能没有任何数据要显示。您使用数据库作为数据存储库的想法是一种在交互式网站及其他领域得到广泛接受的方法。

如果您的数据源是一个或多个 QuickBooks 公司文件，那么您极不可能需要缩减数据。公司文件的最大大小比现代数据库系统的存储容量低几个数量级，目前 1TB 硬盘的零售价约为 100 美元。

为了整体效率和可维护性，最好只查询和存储应用程序需要的数据。了解如何在请求中使用 IncludeRetElement qbXML 元素来过滤从 QuickBooks 返回的数据。

# php - 显示opencart中所有属性的列表

> ID：12566379
> 
> 赞同：1
> 
> 时间：2012-09-24T13:46:20.637
> 
> 标签：php, list, attributes, opencart

我想显示添加到数据库中的所有属性的列表，但每次我尝试一些它都不起作用。我想在首页的 div 中显示这个。我试图将其插入到 features.tpl：

```
<?php 
foreach ($attribute_groups as $attribute_group) {
echo $attribute_group['name'];
print_r($attribute_group);
echo '<select name="listaGrupe">';
foreach ($attribute_groups['attribute'] as $attribute) {
echo '<option value="'.$attribute.'">'.$attribute.'</option>';
}
echo '</select>';
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:01:38.667

你需要使用这个模型

```
public function getAttributes($data = array()) {
    $sql = "SELECT *, (SELECT agd.name FROM " . DB_PREFIX . "attribute_group_description agd WHERE agd.attribute_group_id = a.attribute_group_id AND agd.language_id = '" . (int)$this->config->get('config_language_id') . "') AS attribute_group FROM " . DB_PREFIX . "attribute a LEFT JOIN " . DB_PREFIX . "attribute_description ad ON (a.attribute_id = ad.attribute_id) WHERE ad.language_id = '" . (int)$this->config->get('config_language_id') . "'";

    if (!empty($data['filter_name'])) {
        $sql .= " AND LCASE(ad.name) LIKE '" . $this->db->escape(utf8_strtolower($data['filter_name'])) . "%'";
    }

    if (!empty($data['filter_attribute_group_id'])) {
        $sql .= " AND a.attribute_group_id = '" . $this->db->escape($data['filter_attribute_group_id']) . "'";
    }

    $sort_data = array(
        'ad.name',
        'attribute_group',
        'a.sort_order'
    );  

    if (isset($data['sort']) && in_array($data['sort'], $sort_data)) {
        $sql .= " ORDER BY " . $data['sort'];   
    } else {
        $sql .= " ORDER BY attribute_group, ad.name";   
    }   

    if (isset($data['order']) && ($data['order'] == 'DESC')) {
        $sql .= " DESC";
    } else {
        $sql .= " ASC";
    }

    if (isset($data['start']) || isset($data['limit'])) {
        if ($data['start'] < 0) {
            $data['start'] = 0;
        }               

        if ($data['limit'] < 1) {
            $data['limit'] = 20;
        }   

        $sql .= " LIMIT " . (int)$data['start'] . "," . (int)$data['limit'];
    }   

    $query = $this->db->query($sql);

    return $query->rows;
} 
```

在您的控制器中只需加载此模型并使用它返回的数据进行操作。默认情况下它返回数据库中的所有属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:19:28.063

检查您的控制器..如果 $attribute_groups 中有数据....

print_r($attribute_groups);

看看..确保您的 $attribute_groups 数组不为空...我认为您收到该错误，因为您的 $attribute_groups 数组为空...

如果您确定，$attribute_groups 可以为空，那么您可以检查...

```
if(!empty($attribute_groups)){
foreach ($attribute_groups as $attribute_group) {
$options = '';
$name = $attribute_group['name'];
$output = '<select name="$name">';
foreach ($attribute_groups['attribute'] as $attribute) {
$options .= '<option value="'.$attribute.'">'.$attribute.'</option>';
}
echo $output.$options.'</select>';
}
} 
```

这将查看您的数组是否为空。如果不是，则 foreach()... 否则什么也不做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:55:05.667

您可能正在寻找更接近此的函数格式：

```
foreach ($attribute_groups as $attribute_group) {
$options = '';
$name = $attribute_group['name'];
$output = '<select name="$name">';
foreach ($attribute_groups['attribute'] as $attribute) {
$options .= '<option value="'.$attribute.'">'.$attribute.'</option>';
}
echo $output.$options.'</select>';
} 
```

# javascript - javascript浮点数比较

> ID：12566382
> 
> 赞同：2
> 
> 时间：2012-09-24T13:46:29.160
> 
> 标签：javascript, floating-point

我试图做某种“随机发生器”——有几个相邻的点，根据它们的亮度，它们或多或少有可能被选中。

一个点是一个具有坐标和`x`值的对象，存储它的亮度。`y``b`

我的方法是设置一个具有 a和一个值（介于 0 和 1 之间）的`p`对象（用于可能性） -和值之间的差异取决于它们的亮度。`p``start``end``start``end`

然后我生成一个随机数并遍历所有点以查看随机数是否在它们`start`和`end`属性之间。由于一个点`start`值是前一个点的`end`值，因此只应选择一个点，而是选择随机数量的点。

因此，我记录了随机值以及点`start`和`end`属性。看起来一切正常，除了以下代码

```
for (i = 0; i < numAdjacentPoints; i++) {
    // set some shorthands
    curr_point = adjacentPoints[i];
    // if there is no previous point, we start with 0
    prev_point = ((i === 0) ? {p: {end: 0}} : adjacentPoints[i-1]);
    // initiate a probability object
    curr_point.p = {};
    // set a start value (the start value is the previous point's end value)
    curr_point.p.start = prev_point.p.end;
    // set an end value (the start value + the point's brightness' share of totalBrightness)
    // -> points with higher darkness (255-b) are more have a higher share -> higher probability to get grown on
    curr_point.p.end   = curr_point.p.start + (255 - curr_point.b) / totalBrightness;
    // if the random value is between the current point's p values, it gets grown on
    if (curr_point.p.start < rand < curr_point.p.end) {
        // add the new point to the path array
        path[path.length] = curr_point;
        // set the point's brightness to white -> it won't come into range any more
        curr_point.b = 255;
        console.log("  we've got a winner! new point is at "+curr_point.x+":"+curr_point.y);
        console.log("  "+curr_point.p.start.toFixed(2)+" < "+rand.toFixed(2)+" < "+curr_point.p.end.toFixed(2));
    }
}; 
```

输出这个：

```
we've got a winner! new point is at 300:132 mycelium.php:269
0.56 < 0.53 < 0.67 mycelium.php:270
we've got a winner! new point is at 301:130 mycelium.php:269
0.67 < 0.53 < 0.78 mycelium.php:270
we've got a winner! new point is at 301:131 mycelium.php:269
0.78 < 0.53 < 0.89 mycelium.php:270
we've got a winner! new point is at 301:132 mycelium.php:269
0.89 < 0.53 < 1.00 
```

--> 怎么回事？`0.56 < 0.53 < 0.67`??

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:48:08.250

你要

```
if (curr_point.p.start < rand  && rand < curr_point.p.end) { 
```

代替

```
if (curr_point.p.start < rand < curr_point.p.end) { 
```

您正在将数字与比较结果进行比较，即布尔值。您的代码相当于

```
if ((curr_point.p.start < rand) < curr_point.p.end) { 
```

并且当在此类操作中使用布尔值时，它会转换为 1 或 0，因此您正在测试

```
if (0 < 0.67) { 
```

[javascript中的运算符优先级](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:01:22.553

你不可以做这个：

```
if (curr_point.p.start < rand < curr_point.p.end) 
```

因为`curr_point.p.start < rand`将被评估为一个`boolean`然后，你会有一些你不想要的东西： `if (boolean < curr_point.p.end)`

正确的条件是这样的：

```
if (curr_point.p.start < rand  && rand < curr_point.p.end) 
```

在这种情况下，您将有两个布尔值： `if (boolean1 && boolean2)` 因此您可以正确比较它们。

# git - git checkout 在 --assume-unchanged 文件上抛出错误

> ID：12566384
> 
> 赞同：26
> 
> 时间：2012-09-24T13:46:32.357
> 
> 标签：git, git-index

`git update-index --assume-unchanged path/to/file`在特定分支上运行后，我无法使用`git checkout`.

它抛出以下错误：

> 错误：您对以下文件的本地更改将被结帐覆盖：
> 
> ```
>  path/to/file 
> ```
> 
> 请在切换分支之前提交您的更改或存储它们。
> 
> 中止

但是`git diff`&都`git status`告诉我没有区别 & 没有什么可以提交/存储的。

如何切换出分支？

有没有更好的选择`git update-index --assume-unchanged` （除了`.gitignore`，因为我不希望它被忽略）？（与问题 2 相同 @ [git update-index --no-assume-unchanged 不起作用](https://stackoverflow.com/questions/11755922/git-update-index-no-assume-unchanged-doesnt-work?rq=1)）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T12:48:00.800

经过一定程度的使用后，我现在更喜欢`git update-index --skip-worktree`哪个是`git update-index --assume-unchanged`.

查看[*“assume-unchanged”和“skip-worktree”之间的区别*](https://stackoverflow.com/a/13631525/556856)以获取更多信息。

我还计划检查[此答案中指定的方法，以*git 假设不变 vs 跳过工作树 - 忽略符号链接*](https://stackoverflow.com/a/6139470/556856)，这似乎是更具防御性的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-04T17:37:52.803

我今天遇到了同样的事情，令人失望的是，我发现的大多数答案都与@Sujay 的相似——他们实际上并没有说明如何解决这个`git checkout`错误。

好吧，我从[这个页面](https://newbedev.com/preserve-git-assume-unchanged-files-between-branch-checkouts)找到了一个可行的解决方案（无法弄清楚作者是谁，所以我可以给予信任）：

> 对我有用的解决方案是使用 --skip-worktree。但是，就像上面的一些内容一样，即使在我希望将其更改保留在本地的文件上设置了 --skip-worktree 标志之后，我也很难在没有 git 抱怨的情况下在出票分支和主分支之间切换。

...

> 1.  `cp <local-only_file> ~/`
>     *   将仅具有本地更改的文件复制到文件系统上的安全位置
> 2.  `git checkout <local-only_file>`
>     *   在工作树中，签出文件，使其与主分支文件匹配
> 3.  `git update-index --skip-worktree -- <local-only_file>`
> 4.  `cp ~/<local-only_file> ./`
>     *   将有问题的文件从安全位置复制回工作树
> 5.  `git diff`
>     *   不应显示任何更改；如果您推送到主仓库，`<local-only_file>`则推送中不包含任何更改

`git update-index --no-assume-unchanged <filename>`在继续上述步骤之前，完整的解决方案开始了。完成这些步骤后，我能够切换分支。

# android - 如何将模拟器上显示的主要活动更改为另一个活动？

> ID：12566386
> 
> 赞同：0
> 
> 时间：2012-09-24T13:46:35.057
> 
> 标签：android, android-emulator, android-manifest, android-activity

我在设置应该在模拟器上显示的主要活动时遇到问题。最初，我已经有一个主要活动（我的第一页），它将在我第一次启动我的模拟器时显示。
但是现在我希望更改运行应用程序时首先显示的第一个活动。我在我的 android 清单中更改了活动的名称，但是运行的第一个活动是我以前的活动，而不是我创建的新活动。我不知道为什么新活动不会显示，尽管我已经更改了 android 清单
有人知道解决我的问题吗？提前致谢。
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:50:42.887

在您的 Android Manifest.xml 中使用意图过滤器指定您希望最初启动的活动

```
<activity
            android:name=".newActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".FirstAvtivity" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-25T06:01:13.840

在 Android Studio`Run -> Edits Configuration`菜单中，您可以手动更改 Launch 活动。

# php - Eventbrite API：oauth2-login-example.php

> ID：12566388
> 
> 赞同：1
> 
> 时间：2012-09-24T13:46:42.133
> 
> 标签：php, oauth, eventbrite

我无法使用 PHP 库让 oauth2 工作。我可以让 jQuery 库工作，但我宁愿使用 PHP。

我收到此错误：

```
Warning: Cannot modify header information - headers already sent by (output started at /home/dotd/public_html/hub/examples/oauth2-login-example.php:22) in /home/dotd/public_html/hub/Eventbrite.php on line 162 
```

你可以在这里看到它：[http ://www.daysofthedead.net/hub/examples/oauth2-login-example.php](http://www.daysofthedead.net/hub/examples/oauth2-login-example.php)

这是来自 github 的相同代码，除了我更改了`app_key`and `client_secret`。（[https://github.com/ryanjarvinen/eventbrite.php](https://github.com/ryanjarvinen/eventbrite.php)）

我有指向[http://www.daysofthedead.net/hub/examples/oauth2-login-example.php的“OAuth 重定向 URI”](http://www.daysofthedead.net/hub/examples/oauth2-login-example.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:07:57.290

问题是代码试图在 php 已经将响应的一部分写入 HTML 页面 (HTTP200) 之后触发标头重定向 (HTTP302)。

我已经[重新定位了部分演示代码](https://github.com/ryanjarvinen/eventbrite.php/commit/5011f2a663d31266e486be5ee0af52d7c5640985)，以便在写入任何页面输出之前调用重定向（如果需要）。

请尝试替换您的[OAuth2-login-example 文件](https://github.com/ryanjarvinen/eventbrite.php/blob/master/examples/oauth2-login-example.php)。希望有效！

# netbeans - Xdebug 阻止 PHP 处理页面

> ID：12566391
> 
> 赞同：3
> 
> 时间：2012-09-24T13:46:51.817
> 
> 标签：netbeans, xdebug, php4

我对 XDebug 有一个奇怪的问题。

首先是项目设置（它已完全弃用，但它是一个客户项目，我无法改变任何事情）：

*   PHP 4.4.9
*   XDebug 2.0.2（PHP 4.4 的最后一个稳定版本）
*   网豆 7.0
*   轻松调试

我配置了 XDebug 和 Netbeans，一切正常。

```
zend_extension="/home/user/xdebug-2.0.2/modules/xdebug.so"
xdebug.remote_enable = 1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=10.0.1.26
xdebug.remote_port=9000
xdebug.remote_log="/etc/apache2/logs/xdebug_error.log" 
```

让我头疼的是，如果我在 Netbeans 中按 Continue (F8)，似乎什么也没有发生。XDebug 获得运行命令，但页面挂起（请参阅 XDebug Error.log）。似乎 XDebug 仍然阻止 PHP。如果我在 Netbeans 中终止 XDebug 会话，则页面将被处理。但是，在我终止会话后，我无法启动一个新会话，直到我重新启动 httpd。

```
Log opened at 2012-09-24 12:54:39
-> <init xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" fileuri="anonymised" language="PHP" protocol_version="1.0" appid="5813" idekey="netbeans-xdebug"><engine version="2.0.2"><<![CDATA[Xdebug]]></engine><author><![CDATA[Derick Rethans]]></author><url><![CDATA[http://xdebug.org]]></url><copyright><![CDATA[Copyright (c) 2002-2007 by Derick Rethans]]></copyright></init>

<- feature_set -i 661 -n show_hidden -v 1
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="feature_set" transaction_id="661" feature="show_hidden" success="1"></response>

<- feature_set -i 662 -n max_depth -v 3
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="feature_set" transaction_id="662" feature="max_depth" success="1"></response>

<- feature_set -i 663 -n max_children -v 31
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="feature_set" transaction_id="663" feature="max_children" success="1"></response>

<- feature_get -i 664 -n max_data
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="feature_get" transaction_id="664" feature_name="max_data" supported="1"><![CDATA[1024]]></response>

<- breakpoint_set -i 665 -t line -s enabled -f anonymised -n 21
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="breakpoint_set" transaction_id="665" state="enabled" id="58130001"></response>

<- run -i 666
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="run" transaction_id="666" status="break" reason="ok"><xdebug:message filename="anonymised" lineno="21"></xdebug:message></response>

<- stack_get -i 667
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="stack_get" transaction_id="667"><stack where="{main}" level="0" type="file" filename="anonymised" lineno="21"></stack></response>

<- context_names -i 668
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="context_names" transaction_id="668"><context name="Locals" id="0"></context><context name="Superglobals" id="1"></context></response>

<- context_get -i 669 -c 0
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="context_get" transaction_id="669" context="0"><property name="a" fullname="$a" type="uninitialized"></property><property name="b" fullname="$b" type="uninitialized"></property><property name="value" fullname="$value" address="47887874207944" type="int"><![CDATA[0]]></property></response>

<- run -i 671
-> <response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="run" transaction_id="671" status="stopped" reason="ok"></response> 
```

在我按了 Continue 几次之后，Netbeans 抛出了一个 Socket Exception（损坏的管道）。

希望可以有人帮帮我 ：（

# security - 如何加密链接以加密文件位置并使其隐藏？

> ID：12566394
> 
> 赞同：2
> 
> 时间：2012-09-24T13:47:04.203
> 
> 标签：security, authentication, encryption

我不知道我必须做什么才能解决这个问题，在搜索了这个网站之后，看起来我可以在这里得到答案。

我在一个客户的网站上工作。他是一名营销人员，他拥有数字产品，并且允许免费下载其中的一些产品。

在他们点击下载后，我会向他们发送一封电子邮件，其中包含下载链接。

我的问题是：如何加密此链接以使文件位置保持隐藏？这些文件通常是视频、mp3 或 pdf 格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:56:30.183

如果仅通过不公开其 URL 来保护文件，则这不是良好的安全实践（通过隐蔽实现安全），尤其是在启用目录浏览的情况下。但是，您可能无法重新设计他们的网站。

最好的方法是向它们颁发某种形式的令牌或用户名（输入网页或在 URL 上提供），由 Web 服务器验证，如果成功，则开始下载。几点考虑：

*   这些令牌（实际上是密码）应随机生成（例如通过密码学标准随机数生成器）。
*   令牌的哈希值存储在服务器上（比如使用 PBKDF2）。
*   令牌应该超时。请记住，发送给客户的电子邮件没有加密，可以被许多人截获或查看。同样，除非通过 SSL 访问该站点，否则它们也会以未加密的方式发送到该站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:51:36.943

您不能加密 HTML 链接。根据定义，浏览器需要知道将用户点击链接发送到哪里。即使您确实混淆了 HTML 中的链接，初级安全分析师也可以使用 Paros 等代理绕过这种“安全”机制。

您需要做的是在授权用户查看资源（下载客户的文件）之前对用户进行身份验证以访问您的客户站点。以编程方式限制用户只能查看/下载他们应该被允许访问的内容。

# java - StaticUserAuthenticator 未在 VFS2 中设置 FTP 用户名

> ID：12566399
> 
> 赞同：1
> 
> 时间：2012-09-24T13:47:16.173
> 
> 标签：java, ftp, vfs, apache-commons-vfs

我正在尝试通过 ApacheVFS2 使用具有 FTP 连接的 StaticUserAuthenticator - 我有以下代码：

```
this.fsOptions = new FileSystemOptions();
StaticUserAuthenticator auth = new StaticUserAuthenticator(null, username, password); 
DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(fsOptions, auth); 
this.fsManager = VFS.getManager();

// ... later

FileObject file = fsManager.resolveFile("ftp://myhost:21/pathtofile.ext".toString(), fsOptions);
FileContent content = file.getContent(); 
```

这会导致引发以下异常：

org.apache.commons.vfs2.FileSystemException：无法读取文件“ftp://myhost:21/pathtofile.ext”。原因：sun.net.ftp.FtpLoginException：用户匿名：501 使用 user@site 通过代理连接

当我对此运行网络跟踪时，我看到传递给 FTP 服务器的用户 arg 是“匿名”T 10.161.37.176:57650 -> 10.152.4.138:21 [AP] 用户匿名..

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:31:30.707

好吧，没有我想象的那么棘手

```
UserAuthenticator auth = new StaticUserAuthenticator("", username, password); 
DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(fsOptions, auth); 
FtpFileSystemConfigBuilder.getInstance().setPassiveMode(fsOptions, true); 
```

不确定它是 StaticUserAuthenticator 构造函数的非空第一个参数，还是执行它的被动模式，但是通过这些更改它可以工作。

# android - 带有动态适配器的动态列表视图，每个项目都有点击事件

> ID：12566401
> 
> 赞同：0
> 
> 时间：2012-09-24T13:47:18.093
> 
> 标签：android

我正在从 ArrayList 中的数据库中获取数据。在数据库中，我们有国家名称、商店名称等，在列表视图中我想显示国家名称，然后显示带有复选框的相关商店名称。假设如果有 5 个国家，那么它应该显示 5 个国家的数据，如果有 2 个国家，那么它应该显示两个国家的数据。

我已经尝试并创建了自定义适配器，但我没有为不同国家的不同商店获得点击事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:53:08.127

与 a 中的单个视图的交互`ListView`在 Android 中非常普遍，我建议您研究一下`ListView`s 的工作原理。

[这](http://www.vogella.com/articles/AndroidListView/article.html)是一个教程（带代码），有助于了解更多关于`ListViews`. 它还有一个示例，每个列表项都显示在一个复选框旁边。这可能正是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T13:55:56.380

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;

    if (v == null) {
        LayoutInflater li = LayoutInflater.from(getContext());
        v = li.inflate(R.layout.app_custom_list, null);
    }

    Application app = items.get(position);
    v.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            Toast.makeText(getContext(), "You clicked here", Toast.LENGTH_LONG).show();

        }
    });
} 
```

# c# - 如何定义我的实体的填充方式？

> ID：12566404
> 
> 赞同：2
> 
> 时间：2012-09-24T13:47:29.077
> 
> 标签：c#, entity-framework

使用实体框架（使用 MVC，但我认为这无关紧要），我正在尝试制作一个......可扩展的实体。

我有许多类，用户可以将它们标记为收藏夹或书签……实际上有几个不同的对象使用了这个功能。我目前在我的模型中实现这个的方式是这样的（例如）：

```
public class Favorite
{
   [key]
   public int FavoriteId {get; set;}

   public int? BikeId {get; set;}
   public virtual Bike Bike {get;set;}

   public int? HelmetId {get;set;}
   public virtual Helmet Helmet {get;set;}

   public int? ShoeId {get;set;}
   public virtual Shoe Shoe{get;set;}

   public int UserId {get;set;}
   public virtual User User {get;set;}
} 
```

自行车、头盔、用户和鞋子类都类似于：

```
public class Bike
{
   public int BikeId {get;set;}
   ...
   public virtual list<Favorties> Favorites {get;set;}
} 
```

所以目前我的桌子看起来像这样：

```
Favorites:
|   Id   |  BikeId  |  HelmetId  | ShoeId   | UserId        |
|   1    |    5     |            |          | snowburnt     |
|   2    |    6     |            |          | jonh          |
|   3    |          |     2      |          | snowburnt     | 
```

我更喜欢最喜欢的对象的结构，其中有一个区分列存储被引用的对象的名称作为多列主键的一部分，以便收藏夹表看起来更像这样（我知道用户 ID 不是一个整数）：

```
Favorites:
|   ID    |   Differentiator   |   foreignKeyId    | UserId       |
|    1    |     Bike           |    5              | snowburnt    |
|    2    |     Bike           |    6              | john         |
|    3    |     Helmet         |    2              | snowburnt    | 
```

想要这样做的主要原因是，如果我有新的对象想要集成到收藏夹中，我就不必修改收藏夹对象的结构。

层次结构应该类似于：

自行车、头盔等有 0 到多个收藏夹

这在 asp.net 实体框架中可能吗？我怎样才能做到这一点？有什么好的参考资料可以深入实体框架吗？

注意：我在这里看到了这些帖子，[http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part -1-table-per-hierarchy-tph.aspx](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)这会很好用......如果我在这里有继承情况（我不能有继承情况的大部分原因是我有多个类或接口需要相同的关系：收藏夹、书签、评论、评论等）。很可能我可以/应该使用收藏夹的界面（制作自行车、头盔收藏夹）。我还没有找到任何关于这将如何最终映射到 SQL Schema 中的注释（那时甚至会有一个收藏夹表吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:28:12.937

如果您想获得具有描述结构的表，则必须为此使用 ADO.NET 和 SQL。EF 无法映射它。EF 只能映射真实关系（参照约束）。您的表没有真正的关系 - 它只有对您的应用程序具有特殊意义的数据，并且 EF 目前不支持数据驱动映射，除了一些非常简单的场景，例如提到的每个层次结构继承的表。如果您想使用 EF，您必须使用当前的表结构。

# c++ - 在 OpenGL ES 2 中旋转四边形

> ID：12566405
> 
> 赞同：2
> 
> 时间：2012-09-24T13:47:31.437
> 
> 标签：c++, opengl-es-2.0, marmalade

我正在尝试使用marmalde（主要用于学习）在OpenGL ES 2中制作一个简单的2d游戏，但旋转四边形有一些问题。四边形的边缘看起来不太好，我猜我的代码中缺少一些东西。

我通过改变四边形角位置来旋转四边形。我正在画这样的四边形：

```
glVertexAttribPointer(0, 2, GL_FLOAT, 0, 0, squareVertices);
glEnableVertexAttribArray(0);
glBindTexture(GL_TEXTURE_2D, textureID);
glVertexAttribPointer(1, 2, GL_FLOAT, 0, 0, textureVertices);
glEnableVertexAttribArray(1);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

![在此处输入图像描述](../Images/e6e61e22ce5dd51512ab8580089f8933.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:47:41.487

`app.icf`文件`data`夹中有文件

添加以下行以启用抗锯齿

```
[GL]
EGL_SAMPLE_BUFFERS=1
EGL_SAMPLES=4 
```

即使您启用`Antialising`它也可能无法在模拟器中运行，但可以在设备上运行。模拟器图像质量取决于您在 Configuration -> GL 中选择的 OpenGL ES 驱动程序

# sql - COUNT 选择和局部变量存储

> ID：12566406
> 
> 赞同：2
> 
> 时间：2012-09-24T13:47:39.497
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我需要找到与他们关联的客户数量最少的人的 ID，以便将当前的新客户分配给该员工。

我使用以下内容来建立该员工的ID，如下所示；

```
 SELECT TOP(1) JA.judgeID, COUNT(JA.judgeId) AS COUNT
    FROM recJudgeAssignment AS JA
    LEFT JOIN recEntrantStatus AS ES
    ON JA.bandId = ES.entrantId
    GROUP BY JA.judgeId, ES.roundId
    HAVING ES.roundId = @round
    ORDER BY COUNT 
```

但我需要将其作为局部变量捕获，以便在下一条语句中使用；

```
 UPDATE recJudgeAssignment
    SET judgeId = @judge
    WHERE roundId = @round
    AND bandId = @entrantId 
```

我如何在第一个选择中捕捉到 JudgeId？通常我会做类似的事情；

```
 SELECT @judge =(SELECT TOP(1) JA.judgeID, COUNT(JA.judgeId) AS COUNT
    FROM recJudgeAssignment AS JA
    LEFT JOIN recEntrantStatus AS ES
    ON JA.bandId = ES.entrantId
    GROUP BY JA.judgeId, ES.roundId
    HAVING ES.roundId = @round
    ORDER BY COUNT) 
```

这当然是行不通的，因为 select 会返回 JudgeId 和 COUNT。我宁愿不必将第一次选择的结果发送回网页，然后在单独的 web>db 事务中执行后续更新语句。

所以......任何人都可以提供的任何帮助甚至补救措施，将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:53:00.593

```
-- Query the DB for your variables
-- (I have also moved the HAVING clause to a WHERE clause.)
------------------------------------------------------------
SELECT TOP(1)
  @judgeID = JA.judgeID,
  @count   = COUNT(JA.judgeId)
FROM
  recJudgeAssignment AS JA
LEFT JOIN
  recEntrantStatus AS ES
    ON JA.bandId = ES.entrantId
WHERE
  ES.roundId = @round
GROUP BY
  JA.judgeId, ES.roundId
ORDER BY
  COUNT

-- Update the DB
------------------------------------------------------------
UPDATE
  recJudgeAssignment
SET
  judgeId = @judgeID
WHERE
      roundId = @round
  AND bandId  = @entrantId

-- Return the variables to the client
------------------------------------------------------------
SELECT
  @judgeID     AS judgeID,
  @count       AS count 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:51:13.283

```
SELECT top(1) @judge = JA.judgeID, @count_j =COUNT(JA.judgeId)
    FROM recJudgeAssignment AS JA
    LEFT JOIN recEntrantStatus AS ES
    ON JA.bandId = ES.entrantId
    GROUP BY JA.judgeId, ES.roundId
    HAVING ES.roundId = @round
    ORDER BY COUNT 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:07:29.037

只看第一个查询
请试试这个

```
SELECT TOP(1) JA.judgeID
FROM recJudgeAssignment AS JA
LEFT JOIN recEntrantStatus AS ES
 ON   JA.bandId = ES.entrantId 
 AND  ES.roundId = @round   
GROUP BY JA.judgeId, ES.roundId
ORDER BY COUNT(JA.judgeId) 
```

# actionscript-2 - 使用操作脚本 2 获取主机名

> ID：12566418
> 
> 赞同：0
> 
> 时间：2012-09-24T13:48:18.083
> 
> 标签：actionscript-2

我正在创建一些活动 swf 横幅，并且我不经常使用动作脚本，因此非常感谢专家的任何帮助。

我在我的网站上提供我的横幅作为资源下载。以及如何嵌入具有一些 javascript flashvars 的 swf 的教程。

然后将这些 flash 变量连接到 google 活动链接以更改 utm_source。

这是我的JavaScript ...

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
<script type="text/javascript">
    var flashvars = {};
    flashvars.campaignSource = window.location.hostname;
    var params = {};
    params.loop = "true";
    params.quality = "best";
    params.wmode = "opaque";
    params.swliveconnect = "true";
    params.allowscriptaccess = "always";
    var attributes = {};
    swfobject.embedSWF("banner.swf", "banner_mpu", "300", "250", "9.0.0", false, flashvars, params, attributes);
</script> 
```

和我的html...

```
<div id="banner_mpu">
    <a href="http://www.adobe.com/go/getflashplayer">
    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
    </a>
</div> 
```

所以上面的 js 效果很好，但是，并不是每个人都会使用我的教程代码，并且可能会使用自己的方法在他们的网站上嵌入 swf 横幅。

所以我需要一些备份动作脚本 2 来将当前主机名放入动作脚本变量

这是迄今为止我在按钮 (swf) 上的操作脚本...

```
on(release) {

    function GetTheHostname() {

        var RootFullUrl = _root._url;
        txtFullUrl.text = RootFullUrl;
        var lastSlashIndex:Number = RootFullUrl.lastIndexOf("/");
        var DriveIndex:Number = RootFullUrl.indexOf("|");

        if (DriveIndex>=0) {
        baseUrl = RootFullUrl.substring(0, DriveIndex);
        baseUrl += ":";

    } else {

        baseUrl = "";

    }

        baseUrl += RootFullUrl.substring(DriveIndex+1, lastSlashIndex+1);
        txtBaseUrl.text = baseUrl;
        return baseUrl;

    }

    var campaignSourceAS2:String= GetTheHostname();

    if ( _root.campaignSource == undefined ) {

        getURL("http://www.mysite.co.uk/?utm_source=" + campaignSourceAS2 + "&utm_medium=MPU&utm_campaign=My%20Campaign%202012", "_blank");

    } else {

        getURL("http://www.mysite.co.uk/?utm_source=" + _root.campaignSource + "&utm_medium=MPU&utm_campaign=My%20Campaign%202012", "_blank");

    }

} 
```

我的操作脚本的问题在于它返回了完整的当前 URL。

谁能帮我调整 GetTheHostname 函数以获取主机名而不是 baseURL

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:10:15.363

在这种情况下，我想这就像从 url 中剥离 http:// 一样简单，然后将剩下的所有内容留给第一个 /

从“http://www.example.com/category/actionscript”到“www.example.com”的单线是

```
var baseURL:String = _root._url.split("http://").join("").split("/")[0]; 
```

并替换您的完整方法

```
getURL("http://www.mysite.co.uk/?utm_source=" + (_root.campaignSource || _root._url.split("http://").join("").split("/")[0]) + "&utm_medium=MPU&utm_campaign=My%20Campaign%202012", "_blank"); 
```

# ruby - Rhoconnect Rhosync 可以免费使用吗

> ID：12566419
> 
> 赞同：0
> 
> 时间：2012-09-24T13:48:18.847
> 
> 标签：ruby, rhodes

*   我正在使用**Rhoconnect**开发带有 rhodes 的移动应用程序。

*   我不知道他们有任何许可证还是可以免费使用...

*   我搜索了摩托罗拉的完整网站，但不知道它是免费的还是有许可证的......

*   他们是否有任何其他选项可以在不使用 Rhoconnect 的情况下将应用程序数据与后端同步

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:39:01.613

Rhodes 和 Rhostudio Eclipse 插件是在免费的 MIT (AS IS) 许可下发布的。您可以通过查看位于其 git 存储库中的许可证文件来验证它，您可以在此处找到：[https ://github.com/rhomobile](https://github.com/rhomobile)

至于 Rhoconnect，它带有免费的 10 设备许可证，其余的您必须与销售部门联系以获得您需要的配额。

# c# - 在 MonoTouch 中动态设置图像宽度

> ID：12566420
> 
> 赞同：1
> 
> 时间：2012-09-24T13:48:19.673
> 
> 标签：c#, iphone, xcode, xamarin.ios, interface-builder

我正在尝试使用 MonoTouch 动态设置图像的宽度。我已使用 Xcode Interface Builder 将图像添加到视图中。

我想要做的是保持图像的 X 和 Y 值完全相同。我只想根据浮点值改变图像的宽度。

示例：如果我将图像放在 X = 50 和 Y = 50 的视图上，并且图像大小是 W = 100 和 H = 100，那么我想根据条件动态更改宽度。我试图像这样动态设置图像的宽度：

```
img.Bounds.Width = 150; 
```

像这样

```
img.Bounds.Size.Width = 150; 
```

我还尝试创建一个新的 RectangleF 并将边界设置为等于该 Rectangle 像这样

```
RectangleF fillrect = new RectangleF(50, 50,
150, img.Bounds.Height); 
```

然后将图像边界设置为该矩形，如下所示：

```
img.Bounds = fillrect; 
```

上述方法调整图像大小，然后将图像移动到不正确的位置（X 和 Y 值）。

我也尝试过使用 SizeF 的各种方法，但无济于事。

如何设置图像的宽度并将其保留在我将其放置在界面生成器上的相同位置？

以及如何更改 X 和 Y 值，以便我可以根据上述图像的增长移动另一张图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:51:18.117

似乎边界的变化适用于视图的中心。

尝试设置新框架：

```
img.Frame = fillrect; 
```

位置将相同，但大小将更改。

# java - android中的可缩放网格缩放

> ID：12566429
> 
> 赞同：5
> 
> 时间：2012-09-24T13:48:47.167
> 
> 标签：java, android, scroll, gesture, pinch

我一直在用谷歌搜索这个，确实明显缺乏关于这项任务的物理信息......

我想在android中制作一个网格视图，它使用“tiles”来排序并允许手势。

我要实现的手势是：

*   捏缩放
*   滚动包括轻弹
*   对角滚动

我希望瓷砖能够轻松获取数据，包括一个小的缩略图 img。如果您旋转显示横向或纵向，则图块需要根据捏的“缩放”重新对齐（基本上它们应该自己“旋转”90 度而不移动）

我知道这是一个拥抱问题，但我希望其中一些工作以前已经完成，如果是这样，以什么名义？至少我真的很想从一个例子中得到捏/缩放/二维滚动/网格##

谁能帮忙？

# sencha-touch - Sencha Touch 带按钮的锚定弹出窗口

> ID：12566430
> 
> 赞同：0
> 
> 时间：2012-09-24T13:48:47.673
> 
> 标签：sencha-touch, sencha-touch-2

我需要创建一个包含按钮的锚定弹出窗口，单击该按钮时会创建一个新视图。请参阅下面的屏幕截图（取自 yelp 移动应用程序）。我无法找到此功能的示例 - 谢谢

![在此处输入图像描述](../Images/12f267c868a894b5e225daaf84fe06f1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:36:07.590

我认为您正在寻找的实际上只是一个浮动面板。

例如，参见sencha[文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.Panel)及其使用[showBy](http://docs.sencha.com/touch/2-0/#!/api/Ext.Panel-method-showBy)方法的示例。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:45:55.777

我不知道如何创建锚定弹出窗口，但您可以尝试在 Sencha Touch-2 中实现[Action Sheet 。](http://docs.sencha.com/touch/2-0/#!/api/Ext.ActionSheet)
它没有锚定，但它可以包含您可以提供功能的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:24:55.327

```
This issue can be resolve by calling a panel inside a container. 
```

//在视图中添加container1.js

```
Ext.define('Sencha.view.container1', {
extend: 'Ext.Container',
alias: 'widget.container1',
xtype: 'container1',
//fullscreen: true,

config: {
scrollable: true,
height: 50,
     items: [
         {
              docked: 'top',
              xtype: 'titlebar',
              items: [
              {
              xtype: 'button',
              ui: 'confirm',
              text: 'Back',
              itemId: 'button113',
              id: 'rightButton',
              handler: function () {
              var sh = Ext.create('Sencha.view.panel1', {
                                    extend: 'Ext.Panel',
                                    fullscreen:true,

                                });
                                sh.show();

              }
              }
              ]
          }
     ]
     }
 }); 
```

//在View中也添加panel1.js

```
Ext.define("Sencha.view.panel1", {
extend: "Ext.Panel",
alias: "widget.panel1",

config: {

        html: 'Floating Panel',
        //left: 0,
        //padding: 50,
        items: [
        {   
            xtype: 'button',
            ui: 'action',
            height: 20,
            text: 'Edit Bussiness',

        },
        {
            xtype: 'button',
            ui: 'action',
            height: 20,
            text: 'Add Photo',
        },
        {
            xtype: 'button',
            ui: 'action',
            height: 20,
            text: 'Add BookMark',
        },
        {
            xtype: 'button',
            ui: 'action',
            height: 20,
            text: 'Check In',
        },
        {
            xtype: 'button',
            ui: 'action',
            height: 20,
            text: 'Write Review',
        },
        {
            xtype: 'button',
            ui: 'action',
            height: 20,
            text: 'Make Reservation',
        },

            {
            xtype: 'button',
            ui: 'action',
            height: 20,
            text: 'Cancel',
                handler: function() { 
                this.up('panel').hide();
                }
            },

        ],
        listeners: [
        {  hide: { fn: function(){ this.destroy();} }},

       ]
}
}); 
```

//App.js

```
Ext.application({
    name: 'Sencha',

    controllers: ['Main'],

    views: ['container1', 'panel1'], //add all the view files here which you wants to call on any other panel so that the instance of it will be created.
    stores: [],
    models: [],

    launch: function() {
        Ext.Viewport.add({
            xtype: 'container1'
        });
    }
}); 
```

![在此处输入图像描述](../Images/8d80c1028d8563868b28c7682640e7a9.png)

![在此处输入图像描述](../Images/d403f3b23001f8b6663e4ea35adf69af.png) 这对我有用，会给你相同的输出。此外，在取消按钮上，它将隐藏面板希望这会对您有所帮助。谢谢

# extjs4 - Ext JS 4.1 - 尝试保存图表后无法加载 svg.sencha.io 错误

> ID：12566434
> 
> 赞同：1
> 
> 时间：2012-09-24T13:48:59.360
> 
> 标签：extjs4, extjs, extjs4.1

我在尝试**导出图表时收到****“无法加载[http://svg.sencha.io/](http://svg.sencha.io/) ”**错误：

 **```
chart.save({
    type: 'image/png'
}); 
```

任何想法我该如何处理这个异常？**

# javascript - JSP 选择选项 onchange 查询数据库并显示在 TextBox 同一页面中

> ID：12566438
> 
> 赞同：0
> 
> 时间：2012-09-24T13:49:23.920
> 
> 标签：javascript, jsp, jdbc, java-ee-6

在我的 jsp 文件中，我像这样显示项目名称。

```
<label for="email">Project Name</label> 
<select name='project_name' class='required input_field' id='project_name'>
<option value=''>-- Select --</option>
<c:forEach var="row" items="${result.rows}">
<option value="${row.ProjectId}">${row.ProjectName}</option>
</c:forEach>
</select> 
```

我的问题是，我想在选择选项下方的文本框中显示相应项目的客户端名称。

```
<label for="author">Client Name</label>
<input type='text' name='client_name' id='client_name' class='required input_field' style='width:260px;'> 
```

我希望它显示选择选项的 onchange。为此，我必须查询数据库。我怎样才能做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:16:21.407

您可以将`onchange`属性添加到您的`select`包含：

```
this.form['client_name'].value = this[this.selectedIndex].innerText 
```

# scala - 如何从 M7 中的类型获取 typeArgs？

> ID：12566441
> 
> 赞同：3
> 
> 时间：2012-09-24T13:49:39.017
> 
> 标签：scala, reflection, macros, scala-2.10

我正在将一些代码从 Scala *2.10-M5*迁移到 Scala *2.10-M7*。我发现宏上下文中的 Type API 已显着减少。特别是，我想知道如何获得**底层**和**typeArgs** defs。

--

**更新**

按照@EugeneBurmako 的要求，我将展示整个画面。假设我们有这个状态：

```
class Attribute[C[_], E]

class Id[E]

trait Entity {
  val att1: List[Int]
  val att2: Int
}

object Entity {
  val att1reif = new Attribute[List, Int]
  val att2reif = new Attribute[Id, Int]
}

def Let[T <: Entity, C[_], E](en: T, att: Attribute[C, E], ce: C[E]): T =
  /* Updates the whole attribute */

def Let[T <: Entity, C[_], E](en: Entity, att: Attribute[C, E], e: E, mode: Boolean): T = 
  /* Adds or removes (mode) an item */ 
```

我们有一个*实体*托管一些属性。实体伴随对象包含有关这些属性的元信息（具体化）。*Let*系列允许更新实体（通过创建新副本）。

到现在为止还挺好。我们可以使用 Let 方法如下：

```
val ent = new Entity { val att1 = List(); val att2 = 3 }
Let(ent, Entity.att1reif, List(1, 2, 3)) // att1 = List(1, 2, 3)
Let(ent, Entity.att1reif, 4, true)       // att1 = List(1, 2, 3, 4)
Let(ent, Entity.att1reif, 1, false)      // att1 = List(2, 3, 4) 
```

reification 属性是多余的，所以我们希望我们的用户有一个更简单的 API。特别是下一个：

```
// Same code as DSL
ent.att1 := List(1, 2, 3)
ent.att1 :+ 4
ent.att1 :- 1 
```

请注意，任何地方都没有关于具体化的信息。因此，我们需要一些*Helpers*和一个宏观视图来实现我们的目标。

```
trait AttributeHelper {
  type T <: Entity
  type C[_]
  type E
  val ent: T
  val att: Attribute[C, E]
  def :=(ce: C[E]): T = Let(ent, att, ce)
  def :+(e: E): T = Let(ent, att, e, true)
  def :-(e: E): T = Let(ent, att, e, false)
}

def toAttributeHelperImpl[V: c.AbsTypeTag](c: Context)(expr: c.Expr[V]): c.Expr[AttributeHelper] = 
  /* A looong macro (currently broken), since I can't split V into C[_] and E,
   * which are needed to generate the expression that instantiates an *AttributeHelper*.
   * The macro is responsible of finding the attribute reification.
   */ 
```

事实上，我们的宏定义是一个视图，它神奇地允许 DSL 表达式：

```
implicit def toAttributeHelper[V](expr: V): AttributeHelper = macro toAttributeHelperImpl[V] 
```

我一直在尝试使用使用两种类型参数的宏，但是这样做时，不应用隐式视图（因为编译器无法推断这两种类型）。

因此，正如我在开头提到的那样， M5 中没有*typeArgs*，但 M7 中没有，这破坏了之前的宏。如何在没有该定义的情况下生成 AttributeHelper 构造？

最后，我必须说，前面的代码只是一个简化。还有一些其他涉及的证据，这就是为什么我需要使用*底层*的.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:18:10.197

在 M5 左右发生的反射 API 清理背后的总体想法是删除极其专业的方法。

例如，`typeArgs`仅适用于`TypeRef`类型，因此将其保留在基本类型中没有多大意义`Type`。替换是一个简单的模式匹配：`tpe match { case TypeRef(_, _, args) => arg; case _ => Nil }`.

`underlying`但是，这是不同的，因为它是一个内部实现概念，这意味着很多事情取决于类型的具体风格。如果您详细说明您的用例，我可能会帮助您找到`underlying`.

# javascript - 从外部 js 文件调用 jquery 移动函数

> ID：12566442
> 
> 赞同：0
> 
> 时间：2012-09-24T13:49:44.740
> 
> 标签：javascript, jquery, jquery-mobile

我写了一个外部 js 文件，其中有一个函数。在这个函数中，我试图调用 $.mobile.showPageLoadingMsg(); 我该怎么做？我尝试了以下方法，但它不起作用：

```
function test() {
     $.mobile.showPageLoadingMsg();
} 
```

html中包含脚本的顺序如下所示：

```
<script src="jquery.mobile-1.1.1.min.js"></script>

<script src="jquery-1.7.2.min.js"></script>

<script src="cordova-2.0.0.js"></script>

<script src="master.js"></script> 
```

master.js 是调用者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:03:20.353

```
<script src="jquery-1.7.2.min.js"></script>

<script src="jquery.mobile-1.1.1.min.js"></script>

<script src="cordova-2.0.0.js"></script>

<script src="master.js"></script> 
```

mobile.js之前的jQuery min javascript文件好吗？

查看：http: [//jsfiddle.net/7fxQf/24/](http://jsfiddle.net/7fxQf/24/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:03:24.703

您必须在 jQuery 移动库之前加载 jQuery 库。

# c - C 管道不通信

> ID：12566445
> 
> 赞同：1
> 
> 时间：2012-09-24T13:49:51.997
> 
> 标签：c, process, ipc, fork, pipe

我有一个编码任务，其中我要使用 fork() 设置一个进程环，然后通过环传递一条消息。现在，此时明显的问题是我无法将消息从初始进程传递给其直接连接的子进程。（只是先做 1 条消息传递作为测试）但是，我意识到环也可能无法正常运行。如果是这种情况，我不会感到惊讶，因为我使用的消息传递测试本质上是逐字示例代码，但话又说回来，形成环的代码也是如此......

所以，我的问题是：谁能帮我弄清楚我的代码出了什么问题？

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>
#include <string.h>

int msg[2];
const int MAX = 100;

int main(int argc, char *argv[]) {

    int master, i, child, num, pid, ppid, counter, loops;
    char buffer[MAX];
    num = atoi(argv[1]);
    loops = atoi(argv[2]);
    counter = 0;

    master = (int)getpid();

    //check num arguments
    if (argc != 4) {
        fprintf(stderr, "%s\n", "incorrect # arguments");
    }
    pipe(msg);                      //create pipe
    dup2(msg[0], STDIN_FILENO);     //duplicate pipes
    dup2(msg[1], STDOUT_FILENO);
    close(msg[0]);                  //close ends of pipe
    close(msg[1]);

    //create other processes
    for(i=1; i<num; i++) {
        pipe(msg);                  //create new pipe

        //create new process
        child = fork();             //parent has child id
        pid = (int)getpid();        //has own pid
        ppid = (int)getppid();      //has parent pid

        //if parent, fix output
        if(child > 0){
            dup2(msg[1], STDOUT_FILENO);
        } else {
            dup2(msg[0], STDIN_FILENO);
        }
        close(msg[0]);
        close(msg[1]);
        if(child){
            break;
        }
    }

    //simple output
    fprintf(stderr, "process %d with id %d and parent id %d\n", i, pid, ppid);

    //message passing
    //if master, establish trasnfer
    if (pid == master) {
        //parent
        close(msg[0]);  //closes its read end
        char buffer[MAX];
        fprintf(stderr, "Parent: Waiting for input\n");
        while(1) {
            scanf("%s", buffer);
            if (strcmp(buffer, "exit")==0) {
               break;
            }
            write(msg[1], buffer, MAX);
        }
        close(msg[1]);  //closes it write end
    } else {
        //child
        close(msg[1]);  //closes its write end
        char buffer[MAX];
        fprintf(stderr, "Child: Waiting for pipe\n");
        while(read(msg[0], buffer, MAX) > 0) {
            fprintf(stderr, "Received: %s\n", buffer);
            buffer[0] = '\0';
        }
        close(msg[0]);  //closes its read end        
    }

    //special stuff for master node
    if(master == pid){
        fprintf(stderr, "%s\n", "i am the master");
        //special stuff
    } else {
        fprintf(stderr, "%s\n", "i am a child");
        //nothing really?
    }

    wait(2); //let all processes finish.
    exit(0);
} 
```

我会问我的导师或助教，但他们都决定出城，远离电子邮件，直到作业到期。如果我不能让这个工作，它不是世界末日，但我想避免以不完整的编码作业开始课程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:51:37.873

恕我直言，您最好在引用任何命令行参数之前验证它们（即代码应该像

```
if (argc != 4) {
    ...
}

int num = atol(argv[1]); 
```

)

我不清楚你的代码，很抱歉我的不耐烦。以下是我的解决方案，其中包含要验证的代码片段。为了建立环，首先注意进程分为两种类型：主进程，谁初始化IPC，和从属。最初，我们需要两个管道，一个供 master 读取，另一个供 master 写入。初始化后，两个进程通过这样的管道连接（P 代表父，C 代表子）。

```
C:+----------+-----------+
  |          |           |
  | Read End | Write End |
  |          |           |
  +----------+-----------+
         |\            \
           \            \
            \            \
             \            \
              \            \
P:+----------+-----------+  \
  |          |           |   \
  | Read End | Write End |    \
  |          |           |     \
  +----------+-----------+      |
       /|                       |
        |                       |
        +-----------------------+ 
```

递归地，当新进程分叉时，我们希望连接演变为：

```
 C2:+----------+-----------+
      |          |           |
      | Read End | Write End |
      |          |           |
      +----------+-----------+
             |\                \
               \                \
                \                \
                 \                \
                  \                \
   C1:+----------+-----------+      |
      |          |           |      |
      | Read End | Write End |      |
      |          |           |      |
      +----------+-----------+      |
             |\                     |
               \                    |
                \                   |
                 \                  |
                  \                 |
    P:+----------+-----------+      |
      |          |           |      |
      | Read End | Write End |      |
      |          |           |      |
      +----------+-----------+      |
           /|                       |
            |                       |
            +-----------------------+ 
```

所以我们需要在 C1 和 C2 之间建立另一个管道，然后重定向 I/O。以下 ASCII 艺术说明了这一点。

```
 C2:+----------+-----------+
                                     |          |           |
                                     | Read End | WriteEnd3 |
                                     |          |           |
                                     +----------+-----------+
                                             |\           \
                                               \           \
                                                \           \
                                                 \           \
   C1:+----------+-----------+       +----------+-----------+ |
      |          |           |       |          |           | |
      | Read End | WriteEnd1 |       | Read End | WriteEnd2 | |
      |          |           |       |          |           | |
      +----------+-----------+       +----------+-----------+ |
             |\            \              /|                  |
               \            \              |                  |
                \            \             +------------------+
                 \            \
                  \            \
    P:+----------+-----------+  \
      |          |           |   \
      | Read End | Write End |    \
      |          |           |     \
      +----------+-----------+      |
           /|                       |
            |                       |
            +-----------------------+ 
```

要形成环，应该将 WriteEnd2 复制到**WriteEnd1** **，**因此 child2 可以从 child1 读取。**WriteEnd1**也应该代替**WriteEnd3**写入主控。

我包含了示例代码，但是，您最好了解完成作业的过程，而不仅仅是复制和粘贴:)。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#define BUF_LEN 32

int  input_pipe[2];
int output_pipe[2];

char buf[BUF_LEN];
const char msg[] = "hello world.\n";
int str_len = sizeof(msg);

int status;

int main(int argc, char **argv) {
    /* master input channel */
    int master_input;
    int ring_pid = 0;

    if (argc != 2) {
        fprintf(stdout, "Argument error!\n");
        fflush(stdout);

        exit(-1);
    }

    int total_processes = atoi(argv[1]);

    if (pipe(input_pipe) || pipe(output_pipe)) {
        fprintf(stdout, "Cannot create pipes at master. Program exits.\n");
        fflush(stdout);

        exit(-1);
    } else {
        /* fork child process */
        pid_t pid = fork();
        if (pid) {
            /* dup read end of input pipe and write end of output pipe. */
            int input_fd  = dup(input_pipe[0]);
            int output_fd = dup(output_pipe[1]);

            close(input_pipe[0]);
            close(input_pipe[1]);
            close(output_pipe[0]);
            close(output_pipe[1]);

            /* parent process */
            fprintf(stdout, "Send message to downstream: %s", msg);
            fflush(stdout);
            write(output_fd, msg, str_len + 1);

            read(input_fd, buf, BUF_LEN);
            fprintf(stdout, "Recieve message from upstream: %s", buf);
            fflush(stdout);

            waitpid(pid, &status, 0);
        } else {
            /* child process */
            /* write end of master's input pipe */
            master_input  = dup(input_pipe[1]);

            int input_fd  = dup(output_pipe[0]);
            int output_fd = -1;

            /* increase ring number */
            while (++ring_pid < total_processes) {
                int tmp_pipe[2];

                if (pipe(tmp_pipe)) {
                    fprintf(stdout, "Cannot create pipes at master. Program exits.\n");
                    fflush(stdout);

                    exit(-1);
                } else {
                    /* pid of sub-process's child */
                    pid_t spid = fork();
                    if (spid) {
                        /* drop read end of the pipe, we read from parent process */
                        close(tmp_pipe[0]);
                        /* output of last process directs to master's input */
                        if (ring_pid == total_processes - 1) {
                            output_fd = dup(master_input);
                        } else {
                            output_fd = dup(tmp_pipe[1]);
                        }
                        close(tmp_pipe[1]);
                        /* receive and send message */
                        read(input_fd, buf, BUF_LEN);
                        fprintf(stdout, "Read from upstream: %s", buf);

                        fprintf(stdout, "Write to downstream: %s", buf);
                        write(output_fd, buf, BUF_LEN);

                        waitpid(spid, &status, 0);
                        break;
                    } else {
                        /* for child process, the input is read end of the new pipe. */
                        input_fd = dup(tmp_pipe[0]);
                        close(tmp_pipe[0]);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:43:37.600

您的算法需要更改。这里的逻辑是，如果你有 n 个孩子，那么你需要有 n + 1 个管道。

现在您需要将管道的末端存储在合适的数据结构中。我使用了一个二维数组，其中每一行表示一个管道，并且说第 0 列是读取端，第 1 列是特定管道的写入端。（请考虑使这个数组动态化）

现在对于每个孩子，我们需要两端，一个是读端，另一个是写端。现在，这些末端将来自两个不同的管道。这就是逻辑。

***这意味着假设我们考虑 child1，他从 pipe1 读取结束并从 pipe2 写入结束。现在 child0 应该有来自 pipe1 的写端，而 child2 应该有来自 pipe2 的读端。希望这个想法很清楚。***

（现在另一个标准是进程需要充当**过滤器**，即它们从标准输入读取并写入标准输出。这是使用 dup2 函数完成的，该函数将复制各自的管道描述符以进行读取和写入，到标准输入和输出）

我在下面提供了一个带有一些注释的示例代码，这将帮助您理解这个概念。

（有硬编码的值和非常少的错误处理。你应该添加这个。）

```
#define MAXCHILD 50
#define NO_OF_CHILDREN 20
#define MAXBUF 100

void child(int readend, int writeend);
int main()
{
int pipefd[MAXCHILD + 1][2];
int noofchildren = 0;
int nchild = NO_OF_CHILDREN;
int ret;
int i ;
char buf[MAXBUF];
for(i = 0; i <= nchild; i++)
{
    ret = pipe(pipefd[i]);
    if (0 > ret)
    {
        printf("Pipe Creation failed\n");
        exit(1);
    }
}
printf("Pipes created\n");

for(i = 0; i < nchild; i++)
{

    ret = fork();
    if (0 == ret)
    {
        child(pipefd[i][0], pipefd[i + 1][1]);
    }
    //These ends are no longer needed in parent.
    close (pipefd[i][0]);
    close(pipefd[i + 1][1]);
}

printf("%d Children  Created\n", nchild);

while(1) 
{
    printf("Enter Some data\n");
    //Now the parent/master reads from the standard input
    fgets(buf, MAXBUF, stdin);
    //Write to the pipe which is connected to the first child.
    write(pipefd[0][1],buf, strlen(buf) + 1);
    //Read from the pipe, which is attached to the last child created
    read(pipefd[nchild][0], buf, MAXBUF);
    printf("Master Read from the pipe - %s\n", buf);
    if (strcmp(buf, "exit\n") == 0)
    {
        break;
    }
} 
//By this time all other children, would have exited
//Let's wait to see this 
while(1)
{
    ret = wait(NULL);
    if (0 > ret) //Returns -ve when no more child is left.
    {
        break;
    }
    noofchildren++;
}
printf("My %d children terminated! Now I am exiting", noofchildren);
exit(0);
}

void child(int readend, int writeend)
{
char buf[MAXBUF];
int ret;
//set up environment
dup2(readend, 0);
dup2(writeend,1);   
while(1)
{
    ret = read(0, buf, MAXBUF );
    if (strcmp(buf, "exit\n") == 0)
    {
        write(1, buf, ret);
        exit(0);
    }
    write(1, buf, ret);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:40:26.170

我可以建议的一件事是在分叉进程时使用这种风格：

```
child_pid = fork();
if (child_pid==0) {
  childProcess(); // isolate the child process logic
  _exit(0); // make sure the execution doesn't escape the if statement
} 
```

我认为这将帮助您查看代码中的一些逻辑问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:41:29.587

您正在尝试使用`scanf`从标准输入中读取的 读取您的输入。但是，您所做的第一件事就是通过在原始标准输入上复制第一个管道的读取端来关闭原始标准输入。因此，您正试图从管道中读取输入。要解决此问题，您应该将第一个管道的读取端保存在一个变量中，以便主控器稍后读取，但不要将其复制到标准输入中。

此外，当您尝试读取或写入管道时，您正在使用存储在 中的描述符`msg`，但您在创建链时关闭了这些描述符。您需要读取/写入复制管道的标准输入/输出描述符。您还（尝试）在读/写之前关闭管道链的未使用端，但是当您开始使用将不再使用的整个链时。

例如，一个包含 4 个进程的循环可能如下所示：

```
 input(stdin)
   v
+> A -+
|     v
D     B
^     |
+- C <+ 
```

创建所有进程后，每个连接要么是标准输入，要么是标准输出，除了返回到进程 A（主）的链。进程 A 从标准输入读取并写入标准输出，标准输出连接到进程 B 的标准输入。进程 B 然后读取它的标准输入并写入它的标准输出，将消息传递给进程 C。进程 C 和 D 做同样的事情，将消息传递到整个循环并返回到读取端口上的进程 A的原始管道。由于每个进程都负责读取和写入，因此在完全完成之前不应关闭其管道。

# game-center - 使用 OpenFeint 或 Game Center 有什么好处？

> ID：12566446
> 
> 赞同：2
> 
> 时间：2012-09-24T13:49:51.933
> 
> 标签：game-center, openfeint, leaderboard, social-gaming

我公司正在开发一款需要跟踪高分和成就的iOS和Android平台游戏。我们使用 Unity 3D。

使用 OpenFeint 或 Game Center 作为记分牌有什么特别的优势，除了它们消除了对专用游戏网络服务器/数据库的需求吗？我在某处读到，最佳做法是设计自己的 Facebook 记分牌服务器，类似于 Doodle Jump 或 Bejeweled Blitz，因为它可以提高用户参与度，但我们真的不确定哪个选项最适合我们。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:49:45.650

是的，使用 OpenFient 或 GameCenter 有很多好处。

GameCenter 和 OpenFient 的优势

1.  易于使用（这很重要）
2.  多人游戏支持（游戏中心）
3.  能够集成聊天（OpenFient）
4.  离线支持（OpenFient）
5.  跨平台（OpenFient）
6.  成千上万的游戏玩家（使用此服务-（））
7.  发现朋友如何玩同样的游戏（从用户（游戏玩家）的角度来看很棒）
8.  不太容易实现的更广泛的功能列表（OpenFient 和 Gamecenter 都有很棒的功能）
9.  节省开发时间和成本（对预算紧张的开发人员很重要） 10.Unity 内置了基本 Game Center 功能的 api 11.重要功能 - 内置论坛和挑战（OpenFient）

这个清单可以继续。

您可以实现自己的服务器和数据库来跟踪成就和高分仍然 OpenFient 以及 GameCenter 会更好。在 ios 4.0 之后，Gamecenter 支持一直很好

我知道该问题说明了跟踪高分和成就的优势，但我列出了所有优势，以便您可以清楚地了解它们。

您可以为跟踪和成就设置专用服务器，但仅对于此功能，当您可以使用 GameCenter 或 OpenFient 时，服务器将是多余的

顺便说一句，只是出于好奇（我是一名 Unity 开发人员）您打算使用自己的服务器和数据库（如果您打算）而不是使用 GameCenter 或 OpenFient 来获得什么好处

# ruby-on-rails - 多对多形式，mongoid & rails 3

> ID：12566447
> 
> 赞同：0
> 
> 时间：2012-09-24T13:50:07.017
> 
> 标签：ruby-on-rails, many-to-many, mongoid, simple-form

我的应用中有 2 个模型。一个 Shopping_list 和一个产品

购物清单可以包含许多产品，一个产品可以是许多购物清单的一部分。

购物清单——

```
class Shopping_list
  include Mongoid::Document
  field :name, :type => String
  has_and_belongs_to_many :products
end 
```

和产品

```
class Product
  include Mongoid::Document
  field :name, :type => String
  has_and_belongs_to_many :shopping_lists
end 
```

如果用户访问 /shopping_list/some_id/edit 我希望他们看到 -

```
a) The name of the product in a text box
b) A series of checkboxes listing all of the products that they can check to add to that list.
c) A submit button. 
```

我的控制器看起来像这样

```
def edit
  @shopping_list = Shopping_list.find(params[:id])
  render :action => 'edit'
end 
```

我的观点看起来像这样

```
<%= simple_form_for(@shopping_list) do |f| %>
    <%= f.input :name %>
    <%= f.input :articles, :as => :check_boxes %> #I know this is completely wrong. What do I do to fix?
    <%= f.button :submit %>
<% end %> 
```

这根本不起作用，我有点难过。在使用 Mongoid 时不确定如何进行。

建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:59:19.217

尝试这个

```
<%= simple_form_for(@shopping_list) do |f| %>
   <%= f.input :name %>
   <%= f.association :products,:collection => @shopping_list.products.collect{ |p| [p.name, p.id] }, :as => :check_boxes %>
   <%= f.button :submit %>
<% end %> 
```

# jquery - 将值映射到不同的单选按钮集

> ID：12566451
> 
> 赞同：1
> 
> 时间：2012-09-24T13:50:20.493
> 
> 标签：jquery, html, mapping, radio-button

我有一个将值数组映射到不同单选按钮的困难案例。这是 HTML，我重命名了变量以使其通用，而不是特定于我现在正在制作的特定 Web 表单。

```
<input type="radio" NAME="type" id="rbtA"><span id="txtA">Alt. A</span>
<input type="radio" NAME="type" id="rbtB"><span id="txtB">Alt. B</span>
<input type="radio" NAME="type" id="rbtC"><span id="txtC">Alt. C</span>

<input type="radio" NAME="COM" id="rbtSub1"><span id="txtSub1">SubAlt. 1</span>
<input type="radio" NAME="COM" id="rbtSub2"><span id="txtSub2">SubAlt. 2</span>
<input type="radio" NAME="COM" id="rbtSub3"><span id="txtSub3">SubAlt. 3</span>
<input type="radio" NAME="COM" id="rbtSub4"><span id="txtSub4">SubAlt. 4</span>

<input type="radio" NAME="Coupling" id="rbtSubSub1"><span id="txtSubSub1">Yes</span>
<input type="radio" NAME="Coupling" id="rbtSubSub2"><span id="txtSubSub2">No</span>

<SELECT id="selectCom" style="width: 160" NAME="Communication"><OPTION selected="selected"></OPTION></SELECT> 
```

如果选择了备选 B 或 C，则会出现单选按钮 rbtSub1-rbtSub4。如果选择 C，则 rbtSubSub1 和 rbtSubSub2 将保持隐藏状态，但如果选择 B*和*（SubAlt. 1 或 SubAlt. 2），则会出现 rbtSubSub1 和 rbtSubSub2。使这些按钮出现/消失是没有问题的，问题是根据选择的单选按钮将正确的选项映射到选择框 selectCom。

如果 selectCom 中的替代方案仅依赖于 rbtSub1 - rbtSub4，则映射将很容易：

```
var arraySub1=["1A", "1B", "1C"];
//(correspondingly for sub2 and sub3)...
var arraySub4=["4A", "4B", "4C"];
var mapCom = { rbtSub1 : arraySub1, rbtSub2 : arraySub2, rbtSub3 : arraySub3, rbtSub4 : arraySub4 } 
```

然后在 jquery 代码中的某处，我将根据用户选择的子替代项填充 selectCom 的代码（这可行，我在表单中的其他地方使用过）：

```
$('#rbtSub1, #rbtSub2, #rbtSub3, #rbtSub4').change(function() {
  $("#selectCom option").remove();
  $.each(mapCom[this.id], function(i, val) {
    var opt = $("<option />");
    opt.appendTo($("#selectCom")).text(val).val(val);
  });
}); 
```

棘手的部分是，如果选择了 rbtB*和*（rbtSub1 或 rbtSub2），我需要根据用户选择 rbtSubSub1 或 rbtSubSub2 来填充 selectCom，但如果选择了 rbt B 和（rbtSub3 或 rbtSub4），我需要根据用户选择填充 selectCom关于用户是否选择了 rbtSub3 或 rbtSub4。此外，如果选择了 rbtC，我只想根据选择来填充 selectCom：rbtSub1、rbtSub2、rbtSub3 或 rbtSub4。

我曾尝试在同一映射代码行中映射不在同一级别的单选按钮，但这会在我尝试运行表单时导致错误。

对我如何实现这一目标有什么好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:42:03.877

最好的解决方案是在 php 中...分解 html，如果选择值 X 或 X，则在其中放置一个 IF 语句 echo style="display:none"

# java - Jenkins hudson.util.IOException2：远程文件操作失败

> ID：12566457
> 
> 赞同：11
> 
> 时间：2012-09-24T13:50:31.043
> 
> 标签：java, jenkins

我正在使用 CentOS 5 和 Jenkins 1.430。当我尝试构建时，出现错误：

```
hudson.util.IOException2: remote file operation failed: /home/build/jenkins/workspace/tests at hudson.remoting.Channel@6c89db9a:build-test
at hudson.FilePath.act(FilePath.java:754)
    at hudson.FilePath.act(FilePath.java:740)
    at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:705)
    at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:654)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1193)
    at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:566)
    at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:454)
    at hudson.model.Run.run(Run.java:1376)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:230)
Caused by: java.io.IOException: Remote call on build-test failed
    at hudson.remoting.Channel.call(Channel.java:690)
    at hudson.FilePath.act(FilePath.java:747)
    ... 10 more
Caused by: java.lang.NoClassDefFoundError: Could not initialize class hudson.model.Hudson
    at hudson.scm.SubversionWorkspaceSelector.syncWorkspaceFormatFromMaster(SubversionWorkspaceSelector.java:85)
    at hudson.scm.SubversionSCM.createSvnClientManager(SubversionSCM.java:782)
    at hudson.scm.SubversionSCM$CheckOutTask.invoke(SubversionSCM.java:725)
    at hudson.scm.SubversionSCM$CheckOutTask.invoke(SubversionSCM.java:712)
    at hudson.FilePath$FileCallableWrapper.call(FilePath.java:1995)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:287)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Email was triggered for: Failure
Sending email for trigger: Failure
An attempt to send an e-mail to empty list of recipients, ignored.
Finished: FAILURE 
```

这个线程似乎说主/从有问题： [https ://groups.google.com/forum/?fromgroups=#!topic/jenkinsci-issues/MaMqjK3iW8Y](https://groups.google.com/forum/?fromgroups=#!topic/jenkinsci-issues/MaMqjK3iW8Y)

但它并没有真正提供解决方案。詹金斯奴隶说它已连接，并反映在詹金斯项目页面上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T19:13:37.317

显然，禁用从站并重新启动它是有效的。呜呜

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-20T02:28:39.850

如果您不想重新启动，那么只需在从站上终止这些进程

```
$ ps -ef | grep java
1006     11948 11930  0 Jul17 ?        00:00:00 bash -c cd "/mnt/jenkins" && java  -jar slave.jar
1006     11949 11948  0 Jul17 ?        00:02:55 java -jar slave.jar 
```

然后再次启动从代理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-14T17:41:09.353

得到了一个非常相似的错误，并通过将“publish over ssh”插件从 1.14 恢复到 1.13 来修复它

*我们的 Jenkins 服务器在 Debian 8.2 (Jessie) 上运行，我们的奴隶在 Ubuntu 14.04 (trusty) 下运行*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-04T08:47:50.327

终止从站并再次启动它。工作完美。

# asp.net-mvc - MVC 母版页中的旧 Web 表单页面，用于快速转换

> ID：12566465
> 
> 赞同：0
> 
> 时间：2012-09-24T13:51:18.843
> 
> 标签：asp.net-mvc, razor, webforms, master-pages

我想知道是否有人有使用带有 MVC MasterPage 甚至更好的 Razor _Layout 页面的 web 表单页面的经验。

该公司希望转换为 MVC，但他们不想感到任何痛苦，他们希望能够非常轻松地改造他们的旧页面。在对基础设施和可扩展性投资的典型抱怨之后，我意识到我需要将它们放到平台上，然后慢慢地将它们投入现代时代。这不是最佳的，但它是在门口的脚。

所以我希望我可以将母版页（页眉、菜单、页脚）构建到 MVC 中（实际上已经有），然后从他们的 web 表单页面中删除母版页并将它们加载到 MVC 布局或母版页中。

我想我可以用 ajax 做到这一点，但我真的希望不必为此编写布线 a）他们会认为这是开销和 hacky（我同意）和 b）有大量的旧页面而且我不想永远这样。任何想法或经验将不胜感激，R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:24:08.123

好吧，很明显，这是一个傻瓜的差事。前提是合理的，将他们的常规页面放入 mvc 母版页，然后您就有足够的支持继续前进。但这是一个巨大的痛苦，甚至可能不可行。也许将来当他们在 MVC 中同化 WebForms 时，这是他们的计划，虽然我看不出它是如何可能甚至是可取的，但现在不是。

我得到了[这篇文章](http://vadimdev.blogspot.com/2011/01/rendering-aspnet-webform-via-mvc-action.html)的一些礼貌。它实际上在 MVC 中加载了页面（必须是 webforms，而不是 razor）MasterPage。但是当 WebForm 这样做时，它调用控制器而不是页面是荒谬的“回发”伪事件。那时我举手决定走政治路线而不是走后门路线。

就像我在未来说的那样，这也许是可能的，如果你真的想挖掘它今天可能是可能的，但正如切割和相当讽刺的评论所指出的那样，这是一个愚蠢的想法。

R

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:14:22.697

您可以尝试使用 HttpHandler 或 HttpModule 并在请求放置部分的末尾通过替换（“[SECTION_NAME]”，getSection）。在 MVC 中，您可以从 vew 和模型中生成 html，但为此您需要执行对服务器的请求。所以我认为如果你缓存这部分会更好......有些像那样。

# quartz-scheduler - 如何使用 Quartz Scheduler 和 Cocoon 设置记录器级别？

> ID：12566468
> 
> 赞同：0
> 
> 时间：2012-09-24T13:51:33.647
> 
> 标签：quartz-scheduler, apache-cocoon

我有一个带有旧版本 Cocoon 的项目。有两个 cron 作业。

该项目具有以下 log4j 配置：

```
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.conversionPattern=%d %-5p - %-26.26c{1} - %m\n

log4j.rootLogger=WARN,CONSOLE 
```

在日志文件夹中存在文件 cron.log。但是有一些`INFO`条目。如何为此设置日志级别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:29:54.223

您可以尝试添加以下行来设置`org.quartz`包的调试级别。

```
log4j.logger.org.quartz=WARN,CONSOLE 
```

顺便说一句，您可能有一些配置此文件附加程序（cron.log）的东西，因为默认情况下，石英（2.x）不提供此类配置。

HIH

# web-services - 在 LWUIT 中形成玻璃窗格

> ID：12566480
> 
> 赞同：1
> 
> 时间：2012-09-24T13:52:11.837
> 
> 标签：web-services, java-me, lwuit, glasspane

我正在尝试使用 LWUIT 中的 Form Glass Pane 制作等待屏幕，以下是我正在使用的代码

```
 public class LoadingGlassPane implements Painter {
    public static boolean isShown = false;
    public static IForm form;

    public void paint(Graphics g, Rectangle rect) {
        System.out.println("paint LoadingGlassPane");
        Font font = g.getFont();
        int color = g.getColor();
        g.setColor(0);
        g.setFont(Font.getDefaultFont());
        g.drawString("Loading...", 20, 120);
        g.setColor(color);
        g.setFont(font);
    }

    public void installPane(IForm f) {
        f.setGlassPane(this);
    }

    public void uninstallPane(IForm f) {
        f.setGlassPane(null);
    }

    public static IForm getForm() {
        return form;
    }

    public static void setForm(IForm form) {
        LoadingGlassPane.form = form;
    }

    public static boolean isIsShown() {
        return isShown;
    }

    public static void setIsShown(boolean isShown) {
        LoadingGlassPane.isShown = isShown;
    }
} 
```

和

```
public class ProgressGlassPane extends LoadingGlassPane implements Animation, Runnable {

        int spacing = 20;
        int fontSpacing = 10;
        String loadMsg = "Loading...";
        //HTMLComponent htmlC;
    //    Dialog loading;

    //    public ProgressGlassPane(Dialog loading) {
    //        this.loading = loading;
    //    }
        public ProgressGlassPane() {
        }

        public void paint(Graphics g, Rectangle rect) {
            //while (isShown == true) {
                System.out.println("paint ProgressGlassPane");
                int color = g.getColor();
                Font font = g.getFont();

                int pos = (int) ((System.currentTimeMillis() % 2700) / 300);
                Font f = Font.getDefaultFont();
                //int startX = loading.getAbsoluteX() + (loading.getWidth() / 2) - spacing;
                int startX = (LGB.width / 2) - spacing;
                //int fontStartX = loading.getAbsoluteX() + (loading.getWidth() - f.stringWidth(loadMsg)) / 2;
                int fontStartX = (LGB.width - f.stringWidth(loadMsg)) / 2;
                //int startY = loading.getAbsoluteY() + (loading.getHeight() / 2) - spacing - (f.getHeight() + fontSpacing) / 2;
                int startY = (LGB.height / 2) - spacing - (f.getHeight() + fontSpacing) / 2;
                int i = 0;
                g.setColor(0xffffff);
                g.fillRect(Math.min(startX - 3, fontStartX), startY - 3, Math.max(spacing * 2 + 7, f.stringWidth(loadMsg)) + 1, spacing * 2 + 7 + f.getHeight() + fontSpacing);
                g.setColor(0);
                g.setFont(f);
                g.drawString(loadMsg, fontStartX, startY);
                startY += f.getHeight() + fontSpacing;
                for (int y = 0; y < 3; y++) {
                    for (int x = 0; x < 3; x++) {
                        int thickness = 3;
                        if (i == pos) {
                            thickness = 7;
                        } else if (i == pos - 1) {
                            thickness = 5;
                        }
                        g.fillRect(startX + x * spacing - (thickness / 2), startY + y * spacing - (thickness / 2), thickness, thickness);
                        i++;
                    }
                }
                g.setColor(color);
                g.setFont(font);
           // }
        }

        public boolean animate() {
            return true;
        }

        public void paint(Graphics g) {
            paint(g, null);
        }

        //void installPane(Form f) {
        public void installPane(IForm f) {
            super.installPane(f);
            //f.setGlassPane(this);
            f.registerAnimated(this);

        }

        //void uninstallPane(Form f) {
        public void uninstallPane(IForm f) {
            super.uninstallPane(f);
            //f.setGlassPane(this);
            f.deregisterAnimated(this);
        }

        public void run() {
            System.out.println("I'm running");
            if (isShown == true && form != null) {
                installPane(form);
            }
            else
            {
                uninstallPane(form);
            }
        }
    } 
```

从我的表格中

```
public static ProgressGlassPane progressPane;
progressPane = new ProgressGlassPane();

progressPane.setForm(this);
progressPane.setIsShown(true);
progressPane.run();

//Some Webservice code I want to run 
progressPane.setIsShown(false); 
```

我真正想做的是在加载数据时打开玻璃盘并在完成时将其隐藏，但是发生了什么发送请求并在得到响应后显示玻璃板，我试图把我的玻璃不同线程中的窗格独立于主线程运行，它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T04:39:12.890

网络服务代码是否阻塞？

如果您在 EDT 上，那就行不通了。您需要从完成卸载。

# java - Java 字符串到浮点数

> ID：12566485
> 
> 赞同：1
> 
> 时间：2012-09-24T13:52:38.607
> 
> 标签：java, string, floating-point, arraylist

我正在尝试将字符串数组列表转换为浮点数组列表。我已经声明了这两个：

```
ArrayList<Float> AFFloat = new ArrayList<Float>();
ArrayList<String> AFUni0 = new ArrayList<String>(); 
```

AFUni 是一个从文件中解析出来的数组列表。它包含以下值：

> [0.059, 0.059, 0.029, 0.412, 0.029, 0.452, 0.386, 0.432, 0.114,0.318, 0.159,0.045, 0.432, 0.477, 0.045...]

我正在尝试使用这组代码将这些字符串值变成实际的数值：

```
for (String wntFl:AFUni0){
  AFFloat.add(Float.valueOf(wntFl));
} 
```

但由于某种原因，它不起作用。它回来了这个错误：

```
java.lang.NumberFormatException: For input string: "0.114,0.318"
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1222)
    at java.lang.Float.valueOf(Float.java:388)
    at allelefreq.AlleleFreq.main(AlleleFreq.java:122) 
```

有谁知道为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:54:46.397

看起来有些值由“，”分隔，而其他值，例如您的示例，仅由“，”分隔。这可能是识别失败的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:57:12.180

答案在您的例外中

```
java.lang.NumberFormatException: For input string: "0.114,0.318" 
```

你通过`"0.114,0.318"`as `wntFl`，这就是为什么你有 NUMberFormatException

您应该确保您的输入是有效的。

首先你应该拆分输入，然后你可以解析它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T13:56:14.660

正如错误消息向您显示的那样，它失败的值是`"0.114,0.318"`（即 NOT`"0.114"`或`"0.318"`，但一个中的多个数字`String`），这不是有效数字。无论您如何填充`ArrayList`，您都会在一个`String`. 您可以通过修复填充数组的代码或`String.split(",")`用于获取值数组并在转换为浮点数之前循环该数组来解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:39:52.167

这可能是`Internationalization`/的原因`Localization`，在许多语言`.`中被替换为`,/،`

就像西班牙语一样 [http://translate.google.com/#auto/es/10.1](http://translate.google.com/#auto/es/10.1)

或阿拉伯语[http://translate.google.com/#auto/ar/10.1](http://translate.google.com/#auto/ar/10.1)。

在字符串到浮点转换的情况下，您必须注意本地化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T14:04:53.503

您没有正确进行拆分。这种项目效果很好（但它只是一个例子）

```
public static void main(String[] args) {
        // TODO Auto-generated method stub
        ArrayList<Float> floats = new ArrayList<Float>();
        ArrayList<String> strings = new ArrayList<String>();

        strings.add("0.123");
        strings.add("1.123");
        strings.add("0.423");
        strings.add("34.423");
        strings.add("0.000");

        for(String str : strings) {
            floats.add(Float.valueOf(str));
        }

        for(Float fl : floats) {
            System.out.println(fl);
        }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T13:54:16.110

`0.114,0.318`不是有效的浮点数（观察，`in between), that is why`NumberFormatException`

您可能需要首先`split()`返回数组的字符串，然后将值传递给`Float.valueOf(str[i]`）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T13:56:10.903

分隔符在所有字符串流中都不是固定不变的。尝试以这种方式发现问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-24T13:56:29.073

你应该使用`String.split(",")`，因为`0.114,0.318`它不是一个有效的浮点数

# php - 获取与 imap 连接的链接

> ID：12566487
> 
> 赞同：1
> 
> 时间：2012-09-24T13:52:47.923
> 
> 标签：php, email, imap

我通过此代码连接到我的 gmail 帐户

```
$hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
        $username = 'myacount@gmail.com';
        $password = 'password';

        /* try to connect */
        $inbox = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' . imap_last_error());

        /* grab emails */
        $emails = imap_search($inbox,'all');

        /* if emails are returned, cycle through each... */
        if($emails) {

          /* begin output var */
          $output = '';

          /* put the newest emails on top */
          rsort($emails);

          /* for every email... */
          foreach($emails as $email_number) {

            /* get information specific to this email */
            $overview = imap_fetch_overview($inbox,$email_number,0);
            $message = imap_fetchbody($inbox,$email_number,2);
            $message=strip_tags($message);
            /* output the email header information */
            $emai=split("<",$overview[0]->from );
            echo 'Lus ou pas : '.($overview[0]->seen ? 'lue' : 'Non Lue').'<br>';
            echo 'subject : '.$overview[0]->subject.'<br> ';
            //echo 'from : '.$overview[0]->from.'<br>';
            echo 'from : '.$emai[0].' + '.$emai[1].'<br>';
            echo 'date :  '.$overview[0]->date.'<br>';

            /* output the email body */
            echo 'Message '.rawurlencode(utf8_decode(rawurldecode($message))).'<br>';
            break;
          }

          echo "<br><br><br><hr><br><br>";

        }

        /* close the connection */
        imap_close($inbox); 
```

在我的帐户中，我有一封电子邮件，她的身体有

```
http://www.test.com?id=4 
```

但是当我执行我的脚本时，我的浏览器中有她

```
Lus ou pas : Non Lue
subject : test
from : =?ISO-8859-1?Q?fai=E7al_name?= + myacount@hotmail.com>
date : Mon, 24 Sep 2012 13:39:11 +0000
Message %0D%0A%0D%0A%0D%0A%3D0A%3D%0D%0A%3D0A%3D%0D%0A%3D0A%3D%0D%0Ahttp%3A%2F%2Fwww.test.com%3Fid%3D3D4%20%09%09%20%09%20%20%20%09%09%20%20%20%09%09%20%09%20%20%20%3D%0D%0A%09%09%20%20%0D%0A%3D%0D%0A 
```

我怎样才能准确地获得链接。

Ps：英文不是我的母语，如有错误请见谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T14:57:55.093

```
<?php echo 'Message : '.quoted_printable_decode($message).'<br/>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:20:26.550

尝试这个：

```
$s = urldecode('%0D%0A%0D%0A%0D%0A%3D0A%3D%0D%0A%3D0A%3D%0D%0A%3D0A%3D%0D%0Ahttp%3A%2F%2Fwww.test.com%3Fid%3D3D4%20%09%09%20%09%20%20%20%09%09%20%20%20%09%09%20%09%20%20%20%3D%0D%0A%09%09%20%20%0D%0A%3D%0D%0A');
echo $s; 
```

它会输出`=0A= =0A= =0A= http://www.test.com?id=3D4 = =`到屏幕上。

如果不知道为什么您的消息首先被 urlencoded。但它适用于您的电子邮件客户端，因为电子邮件客户端会将消息通过 urldecode 到。

# sql - 如何将插入的输出值分配给 sql server 中的变量？

> ID：12566493
> 
> 赞同：44
> 
> 时间：2012-09-24T13:53:03.197
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [SQL Server 输出子句转换为标量变量](https://stackoverflow.com/questions/5558582/sql-server-output-clause-into-a-scalar-variable)

```
DECLARE @id int
INSERT INTO MyTable(name)
OUTPUT @id = Inserted.id
VALUES('XYZ') 
```

我正在尝试像上面那样。这怎么可能？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-09-24T13:55:17.793

使用表变量获取 id

```
DECLARE @id int
DECLARE @table table (id int)
INSERT INTO MyTable(name)
OUTPUT inserted.id into @table
VALUES('XYZ')

SELECT @id = id from @table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:56:21.010

您可以尝试使用“Scope_identity”功能。下面的博客有进一步的解释：

*   [http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)
*   [http://msdn.microsoft.com/en-us/library/ms190315.aspx](http://msdn.microsoft.com/en-us/library/ms190315.aspx)

# winforms - nhibernate winforms 应用程序的多用户支持

> ID：12566498
> 
> 赞同：0
> 
> 时间：2012-09-24T13:53:13.087
> 
> 标签：winforms, nhibernate

我正在开发一个多用户 winforms 应用程序 (MDI)。我们的应用程序使用 NHibernate 和每个实例一个会话。

问题是如果用户进行修改，例如用户将项目添加到列表中，另一个用户不会立即看到此修改。我该如何解决这个问题，推荐的方法是什么？我应该使用 One-session-per-form 还是其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:55:17.287

每个应用程序都需要定义自己的工作单元。对于您的用例，如果您希望每次用户将项目添加到列表时更新数据库，那么这应该是您的工作单元。

因此，要针对您的独特用例回答您的问题，我将创建一个新的 NHibernate 会话，保留用户更改，并在每次用户将项目添加到列表时处理该会话。

仅供参考：如果这确实是您的应用程序想要的行为，您不应该觉得为每个用户操作创建一个会话有什么问题。通常在 WinForms 应用程序中，大多数人确实使用 Session-per-Form 模式，但话又说回来，这是因为大多数 WinForms 应用程序都属于用户需要在进入下一个表单之前完成的表单模型。在这些情况下，您只想在用户提交表单时保留/保存用户的更改。但是，如果您的应用程序不属于该模型，那么您对工作单元（会话生命周期）的定义可能会完全不同。

# r - IBrokers：reqMktData 特定字段

> ID：12566500
> 
> 赞同：1
> 
> 时间：2012-09-24T13:53:16.937
> 
> 标签：r, ibrokers

这是非常简单的代码，但您需要 Interactive Brokers 的 TWS 来运行它：

```
opt <- twsOption(local = '', expiry = '20121019', 
                 strike = '146', right = 'C', symbol = 'SPY')
reqMktData(tws, opt, verbose = FALSE) 
```

运行它，您将获得 SPY Oct. '12 C146 数据流；我的问题是：我如何告诉 IBrokers API 只返回特定字段，例如基础价格、隐含波动率、Delta Greek 等而不是该数据流？

我需要在公式等中管理这些数据。

谢谢，

# android - 索尼 Xperia U 安卓分辨率问题

> ID：12566504
> 
> 赞同：0
> 
> 时间：2012-09-24T13:53:42.977
> 
> 标签：android, drawable, resolution, screen-resolution, sony

由于 Sony Xperia U 的分辨率为 480 * 854 (280ppi)，它应该从高密度文件夹 (drawable-hdpi) 获取图像，但它从超高文件夹 (drawable-xhdpi) 获取图像并且无法正确缩放。我们没有实际设备测试所以设置模拟器高度=854，宽度=480和密度=320。我们还为xperia添加了特定的drawable-h854dp文件夹，但它仍然从drawable-xhdpi获取图像而不是缩放它。有没有人遇到过这种问题？建议我们如果有任何想法。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:38:47.947

280ppi 直接在`hdpi`(240ppi) 和`xhdpi`(320) 之间。很可能，索尼已经将 Xperia U 定义为一种`xhdpi`设备，因此它从中获取资源`drawable-xhdpi`是完全正常的。我在市场上发现了一个名为[Check Screen Size](https://play.google.com/store/apps/details?id=com.pmc.android.checkscreensize)的应用程序，它会告诉您设备定义的密度（以及它将使用哪些资源）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T03:18:34.503

如果你把它放在`drawable-w240dp`甚至它`drawable-h427dp`应该`drawable-w240dp-h427dp`工作。

我不会打扰太多，因为索尼的错是他们没有遵循 Android 设备的最小（有效）屏幕尺寸指南。

# python - 我所有的 python windows 服务都停止工作了

> ID：12566505
> 
> 赞同：1
> 
> 时间：2012-09-24T13:53:54.287
> 
> 标签：python, windows-services, windows-xp

我在 Windows XP 上运行几个 python 脚本作为 Windows 服务。刚才他们都死了。他们不会重新启动。我不知道发生了什么。我似乎无法收到一条错误消息来给我更多的洞察力。我还没有尝试重新安装任何模块。Windows 服务在 python 中使用了哪些模块？

编辑：

当我重新安装 pywin32 时，我确实收到了这个错误：

![在此处输入图像描述](../Images/48f8a76e48618be486d8188155eef3d3.png)

但是，单击“确定”按钮后，模块会继续安装

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:00:47.797

发现问题。Windows 错误日志已满...因此脚本甚至无法向日志发送消息，说明服务已重新启动，因此它将失败并且不会记录任何错误消息以启动。

# security - 如何以管理员身份从 Glassfish 定义登录模块？

> ID：12566509
> 
> 赞同：4
> 
> 时间：2012-09-24T13:54:16.970
> 
> 标签：security, glassfish, realm, asadmin

我目前正在实现一个由 neo4j DB 支持的 Glassfish 领域，为此我定义了一个`Realm`和一个`LoginModule`类。

我可以使用[`create-auth-realm asadmin`](http://docs.oracle.com/cd/E18930_01/html/821-2433/create-auth-realm-1.html#scrolltoc)命令安装领域。但是只有当它与文件`LoginModule`中定义的相关联时，Glassfish 才能识别该领域`config/login.conf`。

例如，就我而言，我必须执行以下操作：

1.  创建身份验证领域：
    `create-auth-realm --classname com.mycompany.security.MyRealm --property jaas-context=MyLoginModule myrealm`
    然后

2.  `MyLoginModule`在该`config/login.conf`文件中定义：

    ```
    MyLoginModule { 
      fr.mycompany.security.MyLoginModule required; 
    }; 
    ```

我可以`login.conf`手动编辑文件，但想使用 asadmin 命令自动执行此步骤。
你知道这样的 asadmin 命令吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:13:20.767

目前，Glassfish CLI 似乎不支持这一点。

[**从这里**](https://github.com/javaee/glassfish/issues/4757)引用：

> glassfish 有一个非常好的 CLI（这实际上是我从 JBoss 切换过来的原因之一）。但是，没有用于修改实例的 login.conf 的 CLI cmd（即以可靠的方式添加/删除条目）。
> 
> 我想知道为什么当使用 create-auth-realm/delete-auth-realm 命令创建/删除领域时，领域不会自动添加到/从 login.conf 中删除。

我已[**请求**](https://github.com/javaee/glassfish/issues/4757)更新。

# java - 实现覆盖 toString 方法的继承

> ID：12566511
> 
> 赞同：0
> 
> 时间：2012-09-24T13:54:24.803
> 
> 标签：java

我创建了一个（人、学生、员工、教职员工）类。Person 必须是 Student 和 Employee 的子类。Employee有两个子类Faculty和Staff。我已经完成了所有的编码，它们工作正常，除了我的**驱动程序类** ***TestPerson 程序***它给出编译错误

注意：一个创建 Person、Student、Employee、Faculty、Staff 并调用其 toString 方法的测试程序。

驱动类**TestPerson.java**的错误如下：-

```

错误：Student 类中的构造函数 Student 不能应用于给定类型；
错误：没有为 Employee(String,String,String,String) 找到合适的构造函数
错误：类 Faculty 中的构造函数 Faculty 不能应用于给定类型；
错误：没有为 Staff(String,String,String,String) 找到合适的构造函数”

```

**我只是提供驱动类的代码。如果您需要我的其他类的其他编码，请在评论中说明，我会立即发布。

请在下面查看我的编码：-

```
public class TestPerson {

    public static void main(String[] args) {
        Person person = new Person("John Doe", "123 Somewhere", "415-555-1212", "johndoe@somewhere.com");
        Person student = new Student("Mary Jane", "555 School Street", "650-555-1212", "mj@abc.com", "junior");
        Person employee = new Employee("Tom Jones", "777 B Street", "40-88-889-999", "tj@xyz.com");
        Person faculty = new Faculty("Jill Johnson", "999 Park Ave", "92-52-22-3-333", "jj@abcxyz.com");
        Person staff = new Staff("Jack Box", "21 Jump Street", "707-21-2112", "jib@jack.com");

        System.out.println(person.toString() + "\n");
        System.out.println(student.toString() + "\n");
        System.out.println(employee.toString() + "\n");
        System.out.println(faculty.toString() + "\n");
        System.out.println(staff.toString() + "\n");
        }
} 
```

//人物类

```
public class Person {

    private String name;
    private String address;
    private String phone_number;
    private String email_address;

    public Person() {
    }

    public Person(String newName, String newAddress, String newPhone_number, String newEmail){
        name = newName;
        address = newAddress;
        phone_number = newPhone_number;
        email_address = newEmail;
    }

    public void setName(String newName){
        name = newName;
    }

    public String getName(){
        return name;
    }

    public void setAddress(String newAddress){
        address = newAddress;
    }

    public String getAddress(){
        return address;
    }

    public void setPhone(String newPhone_number){
        phone_number = newPhone_number;
    }

    public String getPhone(){
        return phone_number;
    }

    public void setEmail(String newEmail){
        email_address = newEmail;
    }

    public String getEmail(){
        return email_address;
    }

    public String toString(){
        return "Name :"+getName();
    }

} 
```

//学生班级

```
public class Student extends Person {

    public final String class_status;

    public Student(String name, String address, int phone, String email, String classStatus) {
    super(name, address, phone, email);
    class_status = classStatus;
    }
    public String toString(){
        return "Student Status: " + super.getName();
    }

} 
```

//员工类

```
import java.util.Date;
public class Employee extends Person{

    private String office;
    private double salary;
    private Date hire;

    public Employee() {
    }

    public Employee(String name, String address, int phone, String email){
        super(name, address, phone, email);
    }

    public Employee(String office, double salary, Date hire){
        this.office = office;
        this.salary = salary;
        this.hire = hire;
    }

    public void setOffice(String office){
        this.office = office;
    }

    public String getOffice(){
        return this.office;
    }

    public void setSalary(double salary){
        this.salary = salary;
    }

    public double getSalary(){
        return this.salary;
    }

    public void setHire(Date hire){
        this.hire = hire;
    }

    public Date getHire(){
        return this.hire;
    }

    public String toString(){
        return "Office " + super.getName();
    }
} 
```

//教师班

```
public class Faculty extends Employee {
    private String officeHours;
    private int rank;

    public Faculty(String name, String address, int phone, String email) {
    super(name, address, phone, email);
    }

    public String toString(){
        return "Office " + super.getOffice();
    }
} 
```

//员工类

```
public class Staff extends Employee {
    private String title;

    public Staff(String name, String address, int phone, String email) {
    super(name, address, phone, email);
    }

    public Staff(String title){
        this.title = title;
    }

    public void setTitle(String title){
        this.title = title;
    }
    public String getTitle(){
        return this.title;
    }

    public String toString(){
        return "Title :" + super.getName();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:00:57.170

您收到这些错误的原因是构造函数不存在。

> 错误：Student 类中的构造函数 Student 不能应用于给定类型；错误：没有为 Employee(String,String,String,String) 找到合适的构造函数

这意味着在您拥有以下代码之前，您将无法编译代码：

```
Student(String name, String addr, String phone, String email) {
    ....
} 
```

假设您已经在构造函数中设置了属性，toString 将如下所示：

```
public String toString() {
    return this.name + "\n" + this.addr + "\n" + this.phone + "\n" + this.email;

} 
```

**更新**

您的问题是 Student 只有这个构造函数：

```
public Student(String name, String address, int phone, String email, String classStatus) 
```

Student 需要一个只接受四个字符串作为参数的构造函数。或者，您可以使所有内容都采用您指定的五个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T14:04:32.350

它可能与问题本身无关，但我认为设计可以这样改进：

*   用角色名称定义抽象类角色
*   定义类 Student、Employee、Staff 继承 Role
*   为所有人员类型、名称等定义具有公共属性的 Person 类，并在内部具有 Role 类型的属性

然后在 Person 和所有 Role 实现中定义 toString

通过这种方式，您将能够独立于角色扩展或修改 Persons，这使得设计更加灵活

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T14:04:40.083

Person 的构造函数需要一个 String 作为第三个参数，但您正试图将其传递`int phone`给子类中的超级构造函数。那是行不通的，因为它是错误的类型。

顺便说一句：你应该总是用字符串而不是整数来表示电话号码。

1.  添加或减去电话号码是没有意义的。
2.  整数不允许使用前导零，在某些国家/地区用于区号。
3.  整数不能大于 2147483648。当你尝试存储很长的电话号码时，这个看似随意的限制会导致非常意想不到的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-25T19:06:44.137

首先在所有类中将电话号码数据类型设置为整数..

主要功能将是：

```
public class TestPerson {
    public static void main(String[] args) {
        Person person = new Person("John Doe", "123 Somewhere", "415-555-1212",
                                   "johndoe@somewhere.com");
        Person student = new Student("Mary Jane", "555 School Street", 
                                     650-555-1212, "mj@abc.com", "junior");
        Person employee = new Employee("Tom Jones", "777 B Street", 
                                       40-88-889-999,  "tj@xyz.com");
        Person faculty = new Faculty("Jill Johnson", "999 Park Ave",
                                     92-52-22-3-333, "jj@abcxyz.com");
        Person staff = new Staff("Jack Box", "21 Jump Street", 707-21-2112, 
                                 "jib@jack.com");

        System.out.println(person.toString() + "\n");
        System.out.println(student.toString() + "\n");
        System.out.println(employee.toString() + "\n");
        System.out.println(faculty.toString() + "\n");
        System.out.println(staff.toString() + "\n");
    }
} 
```

# android - 长按按钮

> ID：12566514
> 
> 赞同：0
> 
> 时间：2012-09-24T13:54:29.080
> 
> 标签：android, button

我正在创建一个 Android 应用程序来控制我的 PC 的鼠标。该应用程序有 4 个按钮（左、右、上、下）。单击它们后，应用程序会向 PC 发送一个整数，PC 上运行的 Java 应用程序将接收它并移动光标。

现在我要做的就是当用户长时间按下按钮时，应用程序必须将数字连续发送到电脑，直到用户释放按钮。有人请帮我做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:21:25.970

使用[OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)监听[MotionEvent.ACTION_DOWN](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_DOWN)并在它发生时开始向计算机发送适当的信号，例如每 0.5 秒。之后停止这样做`MotionEvent.ACTION_UP`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T14:38:56.123

**编辑：**

```
public class MainActivity extends Activity implements OnTouchListener {

private TextView TV;
private Thread move_curser;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TV = (TextView) findViewById(R.id.TV1);
    TV.setOnTouchListener(this);
}

public boolean onTouch(View v, MotionEvent event) {

    boolean isPressed = event.getAction() == MotionEvent.ACTION_DOWN;
    boolean isReleased = event.getAction() == MotionEvent.ACTION_UP;

    if(isPressed) {
        move_curser = new Thread(new move_curser());
        move_curser.start();
        your_methode();
        return true;

    } else if(isReleased){
        move_curser.interrupt();
        return true;
    }

    return false;
}

public class move_curser implements Runnable {

    public void run() {

        int time = 500;

        try {
            Thread.sleep(time);
        } catch (InterruptedException e) {
            interrupt();
        }
        while(true){
            your_methode();
            try {
                Thread.sleep(50);
            } catch (InterruptedException e) {
                interrupt();
            }
        }

    }
}
} 
```

# java - 哈希表哈希避免负哈希码

> ID：12566519
> 
> 赞同：9
> 
> 时间：2012-09-24T13:54:41.337
> 
> 标签：java, hash, hashtable, hashcode

我想知道为什么[Hashtable](http://www.docjar.com/html/api/java/util/Hashtable.java.html)避免使用负哈希码？

```
int hash = key.hashCode();
int index = (hash & 0x7FFFFFFF) % tab.length; 
```

哪里`(hash & 0x7FFFFFFF)`使有符号位从 0 变为正数，但为什么我们不能将有符号的 32 位整数视为无符号？甚至使用模块化技巧使其变得积极。例如，

```
public static long int_mod(int hashcode, int tab_length){
     return (hashcode % tab_length + tab_length) % tab_length;  
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T13:57:19.220

该值必须介于`0`和之间，`tab.length - 1`因为它用作`tab`存储值（和溢出元素）的内部数组（在这种情况下）的索引。因此，它不能为负数。

我认为`(hash & 0x7FFFFFFF) % tab.length`优先使用`(hashcode % tab.length + tab.length) % tab.length`它是因为它更快而不会过度增加冲突的机会，但是您必须找到设计文档或与原始开发人员交谈才能确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:58:30.447

> ...但是为什么我们不能...

你问为什么选择一个特定的实现。没有人能告诉你，除了代码的原始作者，如果他或她记得的话。

总是有多种方法可以在代码中实现一个想法。编写代码的人必须选择其中之一。事后问为什么没有选择另一个特定的实现是没有多大意义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-12T20:54:41.110

如果你保持你的容量为 2 的幂，

```
private static final int CAPACITY = 64;
private static final int HASH_MASK = CAPACITY - 1;

final int index = obj.hashCode() & HASH_MASK; 
```

基本上，屏蔽掉除您感兴趣的低位之外的所有位。假设较低的 N 位具有与整个哈希码一样均匀的分布。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T13:59:37.410

Java 没有原生的无符号类型。如果`hashCode`将有负值，那么我们将不得不在我们`hashCode`用作数组索引的任何地方应用这样的屏蔽技巧。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-05T05:18:42.017

表面上我们不能将有符号的 int 视为无符号的原因很明显：最初的 Java 开发人员认为无符号支持是不必要的复杂化，因为无符号算术可能会[令人困惑](https://stackoverflow.com/questions/430346/why-doesnt-java-support-unsigned-ints "无符号算术使人们感到困惑")。从那以后，这对 Java 来说还不是一个足够大的问题来解决。

正如[verdesmerald 所提到](https://stackoverflow.com/a/12566570/3985177 "上一个答案")的，由于没有明确的记录说明为什么`(hash & 0x7FFFFFFF) % tab.length`选择了某些东西来影响您的巧妙改装，尽管我们可以找到该决定的理由，但最终我们只能推测为什么做出它。

语义的最后一点，这可能并不那么重要：Hashtable 没有使用负哈希码，因为哈希码被“转换”为索引的非负形式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T17:49:53.377

除了他自己（也许还有他的同事）之外，没有人能告诉你*为什么原始作者选择了那个实现。*无论如何，这并不重要，因为它工作正常。

关于你提议的实现：它可能没有做你*认为*它应该做的事情。您应该刷新 java 中 % 运算符的实际作用：[例如这里](https://stackoverflow.com/questions/7479526/why-does-javas-operator-give-different-results-than-my-calculator-for-a-negat)。将整数溢出添加到混合中，您建议的表达式可能会导致负值...

# c# - c#如何嵌入Base64图像以发送电子邮件？

> ID：12566520
> 
> 赞同：1
> 
> 时间：2012-09-24T13:54:44.800
> 
> 标签：c#, html, parsing

我目前正在使用字符串通过 EWS 在电子邮件中嵌入 base64 图像，但是当我收到电子邮件时，嵌入的图像没有显示在我的 Outlook 客户端中。

如果我保存电子邮件源，它可以在我的浏览器中查看。

```
static string str = @"<head><meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /></head><body><img src=""data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="" /></body></html>"; 
```

是否可以用这种方法将图像嵌入到 HTML 电子邮件中？

此致

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:11:56.747

接收方可能不支持数据 URI 方案： [主要电子邮件客户端软件中的数据 URI 支持是什么样的？](https://stackoverflow.com/questions/6070196/what-is-data-uri-support-like-in-major-email-client-software)

考虑使用 MIME 相关（cid 协议）发送带有嵌入图像的 html 电子邮件。我相信它得到了更好的支持。我不确定是否可以使用 SmtpMail 轻松完成。

# php - makeMarker() 谷歌地图侧边栏格式

> ID：12566526
> 
> 赞同：2
> 
> 时间：2012-09-24T13:55:03.320
> 
> 标签：php, javascript, google-maps-api-3, sidebar

我想知道是否有人可以帮助我。

首先，我对此比较陌生，所以请您耐心等待。

我整理了[这个](http://www.mapmyfinds.co.uk/chris/test.php)页面，它允许用户显示和隐藏与他们选择的“类别”复选框相关的谷歌地图标记和相关的“侧边栏”项目。

我现在正在尝试并且很难做到的是更改侧边栏的格式，使其类似于[此](http://koti.mbnet.fi/ojalesa/boundsbox/makemarker_sidebar_plain.htm)页面上显示的格式。

与上面链接中的示例一样，我还想添加一个功能，如果单击地图标记，相关的侧边栏项目就会突出显示。

我一直在努力让它工作很长一段时间，但我似乎只是在绕圈子。

我只是想知道是否有人可以看看这个，并就我如何能够实现这一目标提供一些指导。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:45:56.123

我试了一下，只需替换您的以下代码：

```
google.maps.event.addListener(marker, 'click', function() { 
   infowindow.setContent(contentString);
   infowindow.open(map,marker); 
}); 
```

对于这个：

```
google.maps.event.addListener(marker, 'click', function() { 
   infowindow.setContent(contentString);
   $("#sidebar a").css('background-color','');//remove sidebar links back colors
   sidebarlink = $("#sidebar a:contains('"+marker.mydescription+"')");
   sidebarlink.css('background-color','#58FAD0');
   infowindow.open(map,marker); 
}); 
```

这将为侧边栏链接设置背景颜色，您可以将颜色更改为您想要的任何颜色，或将您喜欢的任何其他 CSS 样式添加到您的链接。

还要确保`mydescription`变量中的描述文本永远不会包含`'`引号或双引号`"`，因为这会使上面的代码失败。

让我知道这是否按您的预期工作。

此外，如果您还希望在单击地图的任何位置（例如单击标记外部）时从侧边栏链接中删除背景颜色，请通过替换以下代码来实现：

```
google.maps.event.addListener(map, 'click', function() { 
   infowindow.close(); 
}); 
```

对于这个：

```
google.maps.event.addListener(map, 'click', function() { 
   $("#sidebar a").css('background-color','');//remove sidebar links back colors
   infowindow.close(); 
}); 
```

要在侧边栏链接上悬停时更改背景颜色（问题 1），只需将以下 CSS 代码添加到您的任何`<style type="text/css">`块中：

```
#sidebar a:hover{
   background-color: #58FAD0;   
}​ 
```

# asp.net-mvc - 无法从 Visual Studio 2010 运行 Silverlight 应用程序

> ID：12566534
> 
> 赞同：0
> 
> 时间：2012-09-24T13:55:37.993
> 
> 标签：asp.net-mvc, silverlight, iis-7, iis-express

我正在将一台新机器设置为开发环境，并且在获取托管 Silverlight 应用程序的现有代码库工作时遇到问题。该代码在我的团队使用的所有其他机器上运行良好。

这是错误：

> 错误：Silverlight 应用程序
> 代码中未处理的错误：2104
> 类别：InitializeError
> 消息：无法下载 Silverlight 应用程序。检查网络服务器设置

我在谷歌上找到了一些答案，我意识到 StackOverflow 上已经有一个[重复的问题](https://stackoverflow.com/q/4040416/308012)，但它没有提供足够的信息，而且答案对我不起作用。

我正在尝试使用 IIS Express 7.5 集成（而不是 Cassini Web 服务器）通过 Visual Studio 2010 Ultimate 运行该解决方案。这种方法在所有其他机器上都可以正常工作，除了这台机器。

我发现如果我指定使用完整的 IIS 集成（而不是 Express）并选择**SilverlightTestPage.aspx**作为启动页面，那么应用程序就会运行（尽管并不完美）。此外，如果我发布应用程序并将其托管在 IIS 上，它仍然可以正常工作。但是，当通过 Cassini 或 IIS Express 7.5 集成运行时，或者当试图让它通过**Default.aspx**或正确的启动页面运行时，它不起作用。

有谁知道这可能是什么？我已经检查了 IIS 中的 MIME 类型是否正确（不确定我是否也可以在 IIS Express 中执行此操作？）并且 XAP 文件正在构建到正确的目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:25:09.033

请检查 aspx 文件是否具有 Silverlight 插件的正确“minRuntimeVersion”。

```
<param name="minRuntimeVersion" value="4.0.50826.0"/> 
```

还要检查以下链接以托管 Silverlight 应用程序。

[为 silverlight 配置 IIS](http://www.iis.net/learn/web-hosting/web-server-for-shared-hosting/configuring-iis-for-silverlight-applications)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:26:10.680

检查 IIS Express 配置文件 %userprofile%\documents\iisexpress\config\applicationhost.config 中的 MIME 类型，并确保您已正确设置 MIME 类型并重新启动 IIS Express。

# sql - Windows 7 x64下访问服务器

> ID：12566535
> 
> 赞同：2
> 
> 时间：2012-09-24T13:55:39.090
> 
> 标签：sql, sql-server-2008, sql-server-2008r2-express

我们决定使用 Win7 下的 Microsoft SQL Server R2 开始一个新项目。我在我的系统上安装了 SQLEpress R2，并决定将其命名为 BEACONExpress。起初我们无法让它运行，直到我们让我们的 Domain SysApp 进入并将所有权设置为我的登录名。现在我可以使用 SQL Management Studio 创建数据库了。我什至在其中添加了一些表格。然后我启动了 VS 2010 并创建了一个测试程序。当我尝试访问新数据库时，VS 返回此错误**“无法打开该文件，因为它正在被另一个进程使用。请关闭所有可能访问此文件的应用程序并重试。”**

如果我尝试在 App_Data 下创建一个新数据库，它会返回此错误。**建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）。**

Web.config 中的 connectionStrings 说

```
<connectionStrings>
  <add name="ApplicationServices"
       connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename= |DataDirectory|aspnetdb.mdf;User Instance=true"
       provideName=:System.Data.SqlClient" />
</connectStrings> 
```

我在 C:\Program Files\Microsoft SQL Server\MSSQL10_50.BEACONEXPRESS\MSSQL\DATA\BeaconDB.mdf 找到了数据库

我尝试将 SQLEXPRESS 更改为 MSSQL10_50.BEACONEXPRESS 但没有任何影响。我一直在这里和其他论坛上阅读，试图确定哪里出了问题，但到目前为止还没有找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:58:46.237

将您的连接字符串元素更改为

```
connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;Initial Catalog=BeaconDB" 
```

（其中 BeaconDB 是您的数据库的名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:15:15.077

您是否已验证 Windows 7 防火墙已配置为允许您访问 SQL Server？当尝试使用 Win7 x64 访问我家服务器上的数据库时，我遇到了同样的问题。

另外，您应该确保运行版本 SQL Server 2008 R2，因为如果没有安装 R2 并且没有安装所有更新，它将无法在 Win7 x64 上运行

也许这个链接可以帮助你： [http ://social.msdn.microsoft.com/Forums/en-US/sqlexpress/thread/1bb10896-27ed-4469-81e0-a84f4fba68c9](http://social.msdn.microsoft.com/Forums/en-US/sqlexpress/thread/1bb10896-27ed-4469-81e0-a84f4fba68c9)

[http://blogs.msdn.com/b/sqlexpress/archive/2005/05/05/415084.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2005/05/05/415084.aspx)

# ant - 如何在 ANT Target 中放置两个条件？

> ID：12566536
> 
> 赞同：3
> 
> 时间：2012-09-24T13:55:54.333
> 
> 标签：ant, ant-contrib

我需要检查我的 ANT Target 中的两个条件。如果其中任何一个为真，则蚂蚁目标必须执行。

```
<target name="generateArtifacts" if="${generateABC}" or if="${generatePQR}">
...
/> 
```

***上面的语法错误。***如何使它正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:11:42.163

Maybe there's something simpler, but the following would do, I think:

```
<condition property="artifactsMustBeGenerated">
    <or>
        <isTrue value="${generateABC}"/>
        <isTrue value="${generatePQR}"/>
    </or>
</condition>

<target name="generateArtifacts" if="${artifactsMustBeGenerated}">
    ...
/> 
```

# parsing - 如何使用 UTF-7 字符编码在收件箱中查找邮件消息

> ID：12566552
> 
> 赞同：1
> 
> 时间：2012-09-24T13:56:30.417
> 
> 标签：parsing, imap, utf-7

我们有一个脚本，可以根据发件人的联系记录将邮件从收件箱移动到 CRM 中（好一个 CiviCRM！）

它已停止工作，因为有人向我们发送了 UTF-7 编码的消息，而脚本无法或不会将其转换为 UTF-8

我们现在有超过一千条消息的积压。

我们如何在这个收件箱中找到针？

有谁知道一个脚本会生成一份报告，其中列出了 UTF-7 编码的任何消息，或者任何其他偷偷摸摸的方式来找到有问题的消息？

# iis-7 - 在 IIS 7 上为 WCF 安全性安装证书

> ID：12566553
> 
> 赞同：0
> 
> 时间：2012-09-24T13:56:31.633
> 
> 标签：iis-7, certificate, wcf-security

我想为安装在 IIS 7 服务器中的 WCF 服务安装临时证书。我怎么做？有教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:41:33.337

You can use a self-signed certificate, see [scottgu's blog post](http://weblogs.asp.net/scottgu/archive/2007/04/06/tip-trick-enabling-ssl-on-iis7-using-self-signed-certificates.aspx) for help.

# iphone - 没有 ARC 的 Xcode 中的强大属性？

> ID：12566559
> 
> 赞同：1
> 
> 时间：2012-09-24T13:56:59.493
> 
> 标签：iphone, ios, ipad, automatic-ref-counting

当我运行 Xcode 4.5 时，默认情况下它处于 ARC Off 阶段。但是当我们创建 Xcode 项目时，Strong 属性来代替 Retain。

1）如果强弱与ARC有关，为什么它会出现在非Arc项目中？

2）如果strong和retain都相同，如果我在早期的xcode版本中为非Arc项目将关键字retain更改为strong，它会正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:01:33.437

是的，`strong`它只是`retain`不使用 ARC 的同义词 - 默认情况下，它包含在非 ARC 项目中，以最大限度地减少在 ARC 和非 ARC 之间转换时所需的更改，因为`retain`它不适用于 ARC，但`strong`适用于两种项目类型。

另外，是的，如果您将其更改为`retain`，那不会破坏您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:57:35.527

除了 H2CO3 答案：xCode 不会就这种情况向您发出警告。实际上，如果您从 ARC 实现的项目中添加此类，请记住`-(void)dealloc()`在协议实现的情况下实现方法和释放委托。

# vb.net - 去掉前 2 个字符并替换为另一个

> ID：12566562
> 
> 赞同：0
> 
> 时间：2012-09-24T13:57:07.540
> 
> 标签：vb.net, asp.net-mvc-3

这似乎是一个非常愚蠢的基本问题，但似乎我已经完全忽略了我的知识。

基本上我有一个代表电话号码的字符串（0是区号）：**0828889988**

并且想用 27（南非拨号代码）替换第一个零，因为我很确定它会一直如此，我的 SMS api 需要国际格式，但我希望用户以本地格式输入，所以应该联系人：**27828889988**

我可以调用一两行代码来将第一个字符替换为另外两个字符吗？

按原样 - 我可以考虑一个变通解决方案，但我不确定直接语法是否会很长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:58:53.223

```
Dim number as String = "0828889988"
number = "27" + number.SubString(1)

return number //returns "27828889988" 
```

# java - 将 Toast 定位在屏幕上单击的任何位置

> ID：12566567
> 
> 赞同：0
> 
> 时间：2012-09-24T13:57:14.020
> 
> 标签：java, android, toast

我想将我的 Toast 放置在 android 中发生触摸事件的屏幕上的那个位置。如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:03:33.453

定位你的吐司

标准的 toast 通知出现在屏幕底部附近，水平居中。您可以使用 setGravity(int, int, int) 方法更改此位置。这接受三个参数：重力常数、x 位置偏移和 y 位置偏移。

例如，如果你决定 toast 应该出现在左上角，你可以像这样设置重力：

```
toast.setGravity(Gravity.TOP|Gravity.LEFT, 0, 0); 
```

如果要向右微移位置，请增加第二个参数的值。要向下微调，请增加最后一个参数的值。

参考：http: [//developer.android.com/guide/topics/ui/notifiers/toasts.html](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

和

REF :[如何在 Android 中更改 Toast 的位置？](https://stackoverflow.com/questions/2506876/how-to-change-position-of-toast-in-android)

# jquery - jQuery .load 在 IE8 中不起作用

> ID：12566579
> 
> 赞同：0
> 
> 时间：2012-09-24T13:58:08.293
> 
> 标签：jquery, internet-explorer-8, load

我正在使用脚本加载另一个页面，其中包含一个 post 值以更新 SQL 查询。它在 safari 中有效，但在 IE8 中无效。我不知道如何解决它。如您所见，该页面全为空白，但确实包含该元素。所以我假设 .load 函数有问题。

链接：[http ://tamara.gwst.nl/infiniteScroll/index.php](http://tamara.gwst.nl/infiniteScroll/index.php)

索引.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Web Gallery | Infinite Scroll</title>
<link rel="stylesheet" href="style.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" src="js/jquery.infinitescroll.js"></script>
</head>
<body>

<?php include('includes/connect.php'); ?>   

<div id="content"></div>
</body>
</html> 
```

main.js

```
$("document").ready(function(){

    $("#content").load("scroll.php", {limit: 5});

    var counter = 5;

    $(window).scroll(function(){

        if($(window).scrollTop() + 1 > $(document).height() - $(window).height() ){     

                counter = counter + 5;

                $("#content").load("scroll.php", {limit: counter});

        }
    });

}); 
```

滚动.php

```
<? $limit = $_POST['limit']; ?>

<? 
include('includes/connect.php');
$sql = "SELECT name FROM scroll_images LIMIT $limit";
echo "</div>";

$result = mysql_query($sql);

while($row = mysql_fetch_array($result)){
    echo "<div class='post'><img src='img/".$row['name']. ".jpg' /></div>";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:01:36.953

不确定这是否是您的错误的原因，但

```
$("document").ready(function(){ ... } 
```

应该

```
$(document).ready(function(){ ... } 
```

你想要 JS 变量`document`而不是字符串`"document"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:08:53.367

这可能是一个缓存问题。

尝试 ，

```
$("#content").load("scroll.php?" +Math.random()*99999, {limit: counter}); 
```

# jquery - 使用 HTML Helper 在单元格 JQGrid MVC3 中插入 多个值

> ID：12566581
> 
> 赞同：0
> 
> 时间：2012-09-24T13:58:12.740
> 
> 标签：jquery, asp.net, asp.net-mvc-3, jqgrid

我们正在开发一个使用 JQGrid 和 ASP.NET MVC3 @Html.JQGrid() 辅助方法的项目。我们需要在行中的单个单元格中插入多个值。示例表如下所示：

```
joe | address | value 1 | value 1
    |         | value 2 | value 2
----------------------------------
bob | address | value 1 | value 1
    |         | value 2 | value 2 
```

如果您知道如何通过使用一个很棒的助手来做到这一点，但是如果您知道如何使用 JQuery 语法也会有所帮助，我将对其进行转换。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:44:20.733

我对 JQGrid 并不太熟悉，但既然你说你可以使用常规的 JQuery 语法，你可以使用 .append 或 .html 标签和其中的 div（用于格式化）来附加或替换内容。

例如，您可以使用 JQuery 查找 td 元素，然后附加一个带有样式和值的 div

```
 var tdElement = $(tableId).find('#tdId'); 
```

然后使用

```
 tdElement.append("<div class='CSSstyle'>"+value1+"</div>")
    tdElement.append("<div class='CSSstyle'>"+value2+"</div>") 
```

这与我用于在表中生成新行的技术非常相似。

希望有帮助。

# python - 无法使用 urlfetch 或 urllib2 从 App Engine 开发服务器连接到外部服务

> ID：12566583
> 
> 赞同：5
> 
> 时间：2012-09-24T13:58:18.373
> 
> 标签：python, google-app-engine, urllib2, urlfetch

以下代码在 Python 交互式 shell 中工作：

```
import urllib2
result = urllib2.urlopen("http://www.google.com/") 
```

并给出 200 结果。

如果我在使用开发服务器在本地运行的 AppEngine 应用程序中运行相同的代码，则会失败并出现以下错误：

```
URLError: <urlopen error An error occured while connecting to the server:
Unable to fetch  URL: http://www.google.com/ 
Error: [Errno 11004] getaddrinfo failed>` 
```

我试过`urlfetch`直接使用这个库：

```
from google.appengine.api import urlfetch
result = urlfetch.fetch("http://www.google.com") 
```

这也失败了（这是有道理的，因为我相信`urllib2`在 AppEngine`URLFetch`内部调用？）

我可以清楚地从本地计算机访问 URL - 那么发生了什么？

更新：相关的堆栈跟踪：

```
File "c:\dev\repos\stackoverflow\main.py", line 40, in get_latest_comments
result = urlfetch.fetch("http://www.google.com")

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\urlfetch.py", line 266, in fetch
return rpc.get_result()

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\apiproxy_stub_map.py", line 604, in get_result
return self.__get_result_hook(self)

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\urlfetch.py", line 397, in _get_fetch_result
raise DownloadError("Unable to fetch URL: " + url + error_detail)

DownloadError: Unable to fetch URL: http://www.google.com Error: [Errno 11004] getaddrinfo failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:24:11.550

你有配置了环境变量的代理吗？dev_appserver 清除所有环境变量。

# c# - 如何处理实现 IDisposable 的类中的委托/事件引用

> ID：12566584
> 
> 赞同：4
> 
> 时间：2012-09-24T13:58:19.000
> 
> 标签：c#, .net, events, delegates, idisposable

我一直在阅读有关内存管理的内容，并且在一个项目中遇到过这样的情况，无论是这本书还是谷歌都没有给出确切的答案。我已经知道委托是管理对象，事件是委托实例。话虽如此，一旦应用程序结束，委托实例将从内存中删除。

我无法弄清楚的是如何确保在我的类被释放时（显式地或通过 GC）外部代码已释放所有事件引用。例如，类`A`公开一个事件，类使用`B`它。类`B`调用 Dispose 类`A`而不释放对委托的引用。当然，我们不能从 Dispose 方法本身抛出错误。

以下是一个具有委托的类和另一个使用它的类。

```
public class ClassB
{
    private ClassA A { get; set; }

    public ClassB()
    {
        this.A = new ClassA();
        this.A.OnProcessed += new ClassA.DelegateProcessed(this.ClassA_Processed);
    }

    public void Process()
    {
        this.A.Process();
    }

    public void ClassA_Processed (ClassA sender, EventArgs e)
    {
        // Do something.

        // Code written by another developer does not free up events before calling Dispose.

        this.A.Dispose();
        this.A = null;
    }
}

public class ClassA: IDisposable
{
    public delegate void DelegateProcessed (A sender, EventArgs e);
    public event DelegateProcessed OnProcessed = null;

    ~ClassA() { this.Dispose(false); }

    public void Dispose ()
    {
        this.Dispose(true);
        System.GC.SuppressFinalize(this);
    }

    private void Dispose (bool disposing)
    {
        if (!this.Disposed)
        {
            if (disposing)
            {
                // Dispose managed resources here.
                // Is it possible / advisable to dispose of delegates / events here?
                // Will this adversely affect the consumer class?
                this.OnProcessed -= new ClassA.DelegateProcessed(this.ClassA_Processed);
            }
        }
        this.Disposed = true;
    }

    public void Process () { this.OnProcessed(this, new EventArgs()); }

    public void ClassA_Processed (ClassA sender, EventArgs e) { }
} 
```

关键是要确保无论开发人员对 ClassB 做什么，ClassA 都有资格进行垃圾收集。关键是即使消费者粗心，也要尽量减少 ClassA 在内存中花费的时间。

**更新**：从答案中可以清楚地看出，事件不必从 ClassA 中明确删除。至于主要问题，弱引用似乎是下面回答的方法。目标是最小化 ClassA 在内存中的停留时间。如果我忽略了任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:04:06.933

`IDisposable`用于确定性地释放非托管资源。

无需删除事件处理程序。例如，如果您查看 Windows 窗体`Form`和`UserControl`类，或 ASP.NET`Page`和`UserControl`类，所有这些都是`IDisposable`.，您会看到事件的广泛使用，并且在处理过程中没有特殊处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:04:39.683

这部分代码：

```
private ClassA A { get; set; }

public ClassB()
{
    this.A = new ClassA();
    this.A.OnProcessed += new ClassA.DelegateProcessed(this.ClassA_Processed);
} 
```

意味着你什么*都不*做。

一个`B`实例拥有一个`A`实例，并且再次`A`拥有一个引用（通过事件）`B`。

当 a`B`变得无法访问时，`A`也会收集（GC 和循环引用）。

当'A'在'A'之前被处理（长）时，`B`'A'也将被收集（方向性）。

上的`IDispoable`界面`A`毫无意义。

* * *

关于实施：

```
 // class B
   this.A.OnProcessed += new ClassA.DelegateProcessed(this.ClassA_Processed);

 // in classA
   this.OnProcessed -= new ClassA.DelegateProcessed(this.ClassA_Processed); 
```

这行不通，2 种不同`this`意味着它们是 2 种不同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:06:04.093

您应该看看[弱事件模式](http://msdn.microsoft.com/en-us/library/aa970850.aspx)，而不是“经典”事件订阅。

事件订阅可以使对象保持活动状态，即使这些引用是唯一剩下的引用并且被引用的对象本身已经超出范围。在这种情况下，被引用的对象将永远不会被 GarbageCollector 收集并保持活动状态，直到您的应用程序结束。

这会导致严重的内存泄漏。

如果您使用弱事件模式，您可以让 GabageCollector 更好地确定对象是否仍被引用，或者事件是否是唯一的引用。在这种情况下，对象会被收集，您的资源会被释放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:29:46.120

正确编写的类应在其`IDisposable.Dispose`方法中取消订阅它已订阅的任何事件。如果订阅了事件的对象的 GC 生命周期与订阅的对象的有用生命周期相当（这是一种非常常见的情况），那么订阅是否被清理或悬空都无关紧要。不幸的是，如果`A`在没有取消订阅 ' 事件的情况下被放弃，并且某些东西保持对（有意或无意）`B`的长期引用，那么任何保持活动的东西也将保持活动状态，并且任何拥有直接或间接引用的东西（包括对象有来自的活动事件订阅`B``B``A``A``A`）。很容易得到相互连接的对象的大森林，这些对象通常有资格进行垃圾收集，但只要需要它们中的*任何一个，它们**都*必须保持活动状态。

 *太糟糕了事件订阅和取消订阅太尴尬了。如果有一个与事件关联的对象类型，一个要订阅各种事件的对象可以使用“事件管理器”对象来管理订阅（因此可以说类似`MyEventManager.Subscribe(SomeObject.SomeEvent, someProc)`然后`MyEventManager.Dispose`取消订阅它拥有的所有事件已建立订阅。不幸的是，没有合适的方法让方法接受事件作为参数，因此无法拥有通用类来管理传入订阅。最好的办法可能是拥有一个可以`CleanupManager`接受的类一对委托并被调用，例如 `MyCleaner.Register(()=>{SomeObject.SomeEvent += someProc;}, ()=>{SomeObject.SomeEvent -= someProc();}) 但这似乎很尴尬。*

# javascript - 我的 js mvc 应用程序的一个不错的文件结构

> ID：12566588
> 
> 赞同：1
> 
> 时间：2012-09-24T13:58:30.510
> 
> 标签：javascript, model-view-controller, backbone.js, file-structure

随着我们内部应用程序的增长，我使用各种开源技术构建的前端也在增长，包括作为 mvc 基础的主干和作为依赖管理器的 require.js。

除此之外，我正在将样板代码与视图、模型、集合和路由分离到一种核心库中。当我这样做时，我正在审查文件结构，并想权衡可能对此有经验/想法的其他人的意见。

现在这就是我的结构的样子：

```
public
    assets
        css
            lib                 < CSS libraries used within app
            app                 < app specific CSS assets
        images                  < image assets
        js
            lib                 < JS libraries used within app
            lib_ext             < Library overrides
            app                 < app specific JS
                collection
                model
                template
                view 
```

我目前的行动计划是在“js”中有一个“core”文件夹，它的结构与“app”相似。核心中的所有代码都将完全解耦。然后应用程序中的类将从核心继承，并且只设置特定于其用途的属性......

对此我应该考虑的任何意见？

例如，我不太确定的一点是：您会将 html 模板放入核心中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:12:13.360

您的结构是我最初构建应用程序的方式，但回头看，我会使用像 Backbone Aura 呈现的小部件结构。

我发现当我添加更多视图、模型、集合时，我的文件数量很快变得难以管理。通过使用这种小部件方法，页面上的每个元素组都有自己的模型、集合和视图。您可以让他们从一个小部件到另一个小部件零碎工作。

根据您的应用程序的大小，这可能会也可能不会过大。此外，现在回去改变事情可能为时已晚。只是想一想。

[Backbone Aura](https://github.com/addyosmani/aura)
[小部件结构](https://github.com/addyosmani/aura/tree/master/src/widgets)

# build - 在 Monodevelop 中运行/构建灰显

> ID：12566590
> 
> 赞同：1
> 
> 时间：2012-09-24T13:58:37.560
> 
> 标签：build, monodevelop, linux-mint

标题说什么。“构建”选项卡中的所有选项都显示为灰色，而“运行”选项卡中的运行和调试显示为灰色。我可以通过提供单根来解决它，但我不太热衷于将其作为永久解决方案。

我已经尝试创建一个新的“Hello world”解决方案来进行测试，尝试了不同的项目文件格式（vs 20xx，mono 1.0），重新安装 mono，安装/卸载 monodevelop-debugger-gdb ...

我以前可以运行程序，不知道发生了什么。

使用 linux mint 12 和 monodevelop 2.6

您可能需要的任何其他信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:33:43.517

我建议你升级到最新的 Monodevelop 版本（3.04）。在过去的版本中，有一个小错误允许您描述的事情发生。根据我的经验，它是特定于项目的，也就是说，当发生时，只发生在一个项目中，通常是我正在从事的最后一个项目。

同时，当该问题发生时，这里有一个简单的解决方法：当我过去发生这种情况时（在 Ubuntu 上使用 Monodevelop 2.6 版本），我发现如果我打开、编译并**成功**运行另一个项目，然后返回尝试编译有问题的项目（其中“构建”选项显示为灰色） - 问题已解决，所有“构建”菜单选项都将再次可用。

我不知道错误是什么，但正如我上面提到的，我在 Monodevelop 3.04 中没有遇到同样的错误，所以我建议你升级。

希望有帮助！

# php - DrEdit PHP 和 Google Drive

> ID：12566601
> 
> 赞同：1
> 
> 时间：2012-09-24T13:58:59.683
> 
> 标签：php, google-drive-api, google-docs-api

我正在使用 DrEdit PHP sdk 库。使用他们自己的输出编辑器，我正在尝试使用 mimetype 创建一个文件`application/vnd.google-apps.kix`

它说它已保存，但是当我尝试从驱动器本身打开它时，它返回一个错误：

> 抱歉，您请求的页面（或文档）不存在。确保您拥有正确的 URL，并且文档的所有者没有删除它。

我将 DrEdits 自己的配置与 ClientId、Secret 等分开，并更改了 mime/类型。

任何人都可以告诉我问题可能是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:53:21.637

Google Documents（文字处理器）使用此 MIME 类型。

遗憾的是，您不能直接使用 Google Drive SDK 创建 Google 原生文档。创建原生 Google 文档的唯一方法是上传一种支持的导入格式（PDF、Word、RTF...）的文档，并将[`convert`URL 参数](https://developers.google.com/drive/v2/reference/files/insert)设置`true`为此将文档转换为原生 Google 文档之一格式。

# objective-c - IOS 6 中 unsigned short * 的格式描述符

> ID：12566602
> 
> 赞同：1
> 
> 时间：2012-09-24T13:59:04.457
> 
> 标签：objective-c

在我的代码中，我有一些 unichar 格式的字符串，其定义如下

```
unichar sourceString[100]; 
```

在我为 sourceString 赋值之后，我需要将它放入一个具有正确格式描述符的 NSString 中。

以前在 IOS 5 中，我使用 %S，它工作得很好。代码如下

```
NSString * targetString = [NSString stringWithFormat:@"%S",sourceString]; 
```

但是在我将 SDK 升级到 IOS 6.0 后，警告出现了相同的代码：

```
**Format specifies type 'const unsigned short *' but the argument has type 'unichar *' (aka 'unsigned short *')** 
```

我的应用程序仍然可以运行，但是编译代码时有数百个警告，这真的很烦人。

我想知道在这种情况下我将使用什么正确的格式描述符？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:39:22.977

使用`const unichar sourceString[100];`将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:08:16.973

如果您尝试使用 %hu 警告仍然出现？

在以下位置查看格式类型：[http ://reference.jumpingmonkey.org/programming_languages/objective-c/types.html](http://reference.jumpingmonkey.org/programming_languages/objective-c/types.html)

# jquery - firefox jQuery 失败并且 javascript 工作

> ID：12566603
> 
> 赞同：1
> 
> 时间：2012-09-24T13:59:16.467
> 
> 标签：jquery, firefox

我正在使用 jQuery 开发一个 firefox 插件。我添加了一个页面加载侦听器并在该函数中加载 jQuery javascript 文件。

```
 onPageLoad: function(aEvent) {
        var doc = aEvent.originalTarget; // doc is document that triggered the event
        var win = document.defaultView; // win is the window for the doc

        var jsLoader = Components.classes["@mozilla.org/moz/jssubscript-loader;1"].getService(Components.interfaces.mozIJSSubScriptLoader);
        jsLoader.loadSubScript("chrome://myExt/content/jquery-1.8.0.js"); 
```

加载 jQuery 没有错误。但是，当我尝试使用 jQuery 修改 DOM 或进行任何 DOM 搜索等时，它会失败

```
if($("#id1").length>0) // length is always 0
// do something

var x  = document.getElementById("id1"); //plain old javascript and it works 
```

我可以使用 javascript 做所有事情。但是，对 jQuery 做同样的事情没有任何错误。知道这里可能出了什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:23:18.303

我找到了解决方案。jQuery 加载很好，并且能够毫无问题地执行非 DOM 相关功能。但是，`$`由于需要修改功能，因此无法对 DOM 做任何事情。

```
$ = function(selector,context) {
return new jQuery.fn.init(selector,context||doc);
}; 
```

这里，“doc”是文档。做出这个改变后，一切都到位了。

@everone，感谢您的评论。我之前没有看到回复。如果不是，我会很乐意回复。

*   赛莱什

# magento - Magento Helper 属性和 SKU

> ID：12566607
> 
> 赞同：0
> 
> 时间：2012-09-24T13:59:35.733
> 
> 标签：magento, import, attributes, mage

我对助手属性有疑问，实际上是几个问题:)

1.  我可以在哪里找到通过 Mage.php 定义的所有产品属性的列表

2.  SKU 不是通过这些属性定义的，因为它在 Mage.php 的第 546 行向我显示了一个错误，即 sku 不是属性的一部分。可以添加sku吗？

3.  我正在为 XML 实时提要创建导入模块，那么是否可以在更新数据库中的价格之前计算价格差额？如果可能的话，有人可以给我看一些例子，只是为了了解一些实习知识吗？

谢谢你们

**编辑：**

这是我的代码示例，只是为了看看我在说什么：

```
public function getName() {
    return 'Name';  
}

public function getIdentifier() {
    return 'name';  
}

public function getType() {
    return 'varchar';
}

public function getPreview($content) {
    return $content;
}

public function setData(Mage_Catalog_Model_Product $product, $data) {

    $product->setName($data);

} 
```

# asp.net-mvc-3 - 使用 asp mvc 3、nhibernate 3.2 和 spring.net 1.3.2 没有 Hibernate Session 绑定到线程异常

> ID：12566610
> 
> 赞同：4
> 
> 时间：2012-09-24T13:59:37.887
> 
> 标签：asp.net-mvc-3, nhibernate, spring.net

我正在使用 ASP.Net MVC 3、spring.net 1.3.2 和 nhibernate 3.2。我一直在努力让 Web 应用程序在 IIS 7.5 中运行。它在 Visual Studio 2010 中运行良好。

我得到的错误是

```
No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: NHibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here]
   Spring.Data.NHibernate.SpringSessionContext.CurrentSession() in c:\_prj\spring-net\trunk\src\Spring\Spring.Data.NHibernate12\Data\NHibernate\SpringSessionContext.cs:72
   Technolog.Rma.Business.Repositories.RepairBatchDAO.findRepairBatchPageCount(String login, Int32 rowsPerPage) in C:\work\samplemvc\src\Technolog.Rma.Business\Repositories\RepairBatchDAO.cs:55
   _dynamic_Technolog.Rma.Business.Repositories.RepairBatchDAO.findRepairBatchPageCount(Object , Object[] ) +273
   Spring.Reflection.Dynamic.SafeMethod.Invoke(Object target, Object[] arguments) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Reflection\Dynamic\DynamicMethod.cs:156
   Spring.Aop.Framework.DynamicMethodInvocation.InvokeJoinpoint() in c:\_prj\spring-net\trunk\src\Spring\Spring.Aop\Aop\Framework\DynamicMethodInvocation.cs:100
   Spring.Dao.Support.PersistenceExceptionTranslationInterceptor.Invoke(IMethodInvocation invocation) in c:\_prj\spring-net\trunk\src\Spring\Spring.Data\Dao\Support\PersistenceExceptionTranslationInterceptor.cs:181

<snip/> 
```

我的 web.config 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368

  Spring.Context.Support.ContextHandler, Spring.Core

    <resource uri="~/Config/propertyConfigurer.xml" />
  -->
<configuration>
  <configSections>
    <sectionGroup name="spring">
      <section name="context" type="Spring.Context.Support.MvcContextHandler, Spring.Web.Mvc3" />
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="dataFile" value="App_Data\data.db3" />
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
    <add key="Spring.Data.NHibernate.Support.OpenSessionInViewModule.SessionFactoryObjectName" value="SessionFactory"/>
  </appSettings>
  <spring>
    <context>
      <resource uri="file://~/Config/propertyConfigurer.xml" />
      <resource uri="file://~/Config/sessionFactory.xml" />
      <resource uri="file://~/Config/mappers.xml" />
      <resource uri="file://~/Config/repositories.xml" />
      <resource uri="file://~/Config/controllers.xml" />
      <resource uri="file://~/Config/scopedobjects.xml" />
      <resource uri="file://~/Config/utils.xml" />
    </context>
  </spring>
  <system.web>
    <httpModules>
      <!--
      <add name="Spring" type="Spring.Context.Support.WebSupportModule, Spring.Web"/>
      <add name="OpenSessionInView" type="Spring.Data.NHibernate.Support.OpenSessionInViewModule, Spring.Data.NHibernate32"/> 
      -->
    </httpModules>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
    <customErrors mode="Off"/>

  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <add name="Spring" type="Spring.Context.Support.WebSupportModule, Spring.Web"/>
      <add name="OpenSessionInView" type="Spring.Data.NHibernate.Support.OpenSessionInViewModule, Spring.Data.NHibernate32"/>
    </modules>
    <!--
    <handlers>
      <add name="SpringPageHandler" verb="*" path="*.aspx" type="Spring.Web.Support.PageHandlerFactory, Spring.Web"/>
      <add name="SpringWebServiceHandler" verb="*" path="*.asmx" type="Spring.Web.Services.WebServiceHandlerFactory, Spring.Web" />
      <add name="SpringContextMonitor" verb="*" path="ContextMonitor.ashx" type="Spring.Web.Support.ContextMonitor, Spring.Web"/>
    </handlers>
    -->
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.7.0" newVersion="4.0.7.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

我的 sessionFactory.xml 文件是

```
<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net" 
         xmlns:db="http://www.springframework.net/database"
         xmlns:tx="http://www.springframework.net/tx">

  <object
    id="siteRoot"
    type="System.Web.Hosting.HostingEnvironment, System.Web"
    factory-method="get_ApplicationPhysicalPath" />

  <object
    id="dataFile"
    type="System.IO.Path, mscorlib"
    factory-method="Combine">
    <constructor-arg name="path1" ref="siteRoot" />
    <constructor-arg name="path2" value="${dataFile}" />
  </object>

  <db:provider id="dbProvider"
               provider="System.Data.SqlClient"
               connectionString="Data Source=AJASQL7;Initial Catalog=Xanadu;User ID=RMA;Password=RMA;"/>

  <object id="sessionFactory" scope="application" type="Spring.Data.NHibernate.LocalSessionFactoryObject, Spring.Data.NHibernate32">
    <property name="DbProvider" ref="dbProvider"/>
    <property name="MappingAssemblies">
      <list>
        <value>Technolog.Rma.Business</value>
      </list>
    </property>
    <property name="HibernateProperties">
      <dictionary>
        <entry key="hibernate.connection.provider" value="NHibernate.Connection.DriverConnectionProvider"/>
        <entry key="dialect" value="NHibernate.Dialect.MsSql7Dialect"/>
        <entry key="connection.driver_class" value="NHibernate.Driver.SqlClientDriver"/>
        <entry key="use_proxy_validator" value="false" />
        <entry key="current_session_context_class" value="Spring.Data.NHibernate.SpringSessionContext, Spring.Data.NHibernate32"/>
      </dictionary>
    </property>

  </object>

  <!-- Transaction Management Strategy - local database transactions -->

  <object id="transactionManager"
        type="Spring.Data.NHibernate.HibernateTransactionManager, Spring.Data.NHibernate32">
    <property name="DbProvider" ref="dbProvider"/>
    <property name="SessionFactory" ref="sessionFactory"/>
  </object>

  <!-- Exception translation object post processor -->
  <object type="Spring.Dao.Attributes.PersistenceExceptionTranslationPostProcessor, Spring.Data"/>

</objects> 
```

我的 RepairBatchDao 的一部分是

```
[Repository]
class RepairBatchDAO : IRepairBatchDAO
{

    public ISessionFactory SessionFactory { get; set; }

    public long findRepairBatchPageCount(string login, int rowsPerPage)
    {
        var rowCount = 1L;
        var session = SessionFactory.GetCurrentSession(); // line 55
        var transaction = session.BeginTransaction();
        try
        {
            transaction = session.BeginTransaction();
            var hqlCountQuery = session.CreateQuery("select count(*) from Technolog.Rma.Business.Domain.RepairBatch rb where rb.Customer.Login=?")
                            .SetParameter(0, login);
            rowCount = hqlCountQuery.UniqueResult<long>();
            transaction.Commit();
            return (rowCount + rowsPerPage - 1) / rowsPerPage;
        }
        catch
        {
            if (transaction != null) transaction.Rollback();
        }
        finally
        {
            if (session != null) session.Close(); // I shouldn't be doing this...
        }

        return 0L;

    }

    // snip ... 
```

我花了太多时间试图自己解决这个问题。我希望有人能指出我正确的方向。我已经检查了 stackoverflow 中的各种帖子（太多了，无法提及），但它们没有帮助。

我是一个 Java 人，这是我的第一个 .net 项目，所以不确定我是否做了一些愚蠢的事情。

25/9/2012

我已经对我的 customerDAO 进行了更改

```
 public class CustomerDAO : ICustomerDAO
    {

        public ISessionFactory SessionFactory { get; set; }

        private TransactionTemplate tt;

        public IPlatformTransactionManager  TransactionManager
        {
            set { tt = new TransactionTemplate(value); }
        }
 <snip/>

        public Customer find(string login) 
        {
            IList<Customer> customers;
            Object result = tt.Execute(delegate(ITransactionStatus status) //line 42
            {
                var transaction = status.Transaction;

                  var session = this.SessionFactory.GetCurrentSession();
                  //var transaction = session.BeginTransaction();
                  try
                  {
                      customers = session.CreateQuery("from Technolog.Rma.Business.Domain.Customer Customer where Customer.Login=?")
                          .SetParameter(0, login)
                          .List<Customer>();

                      if (customers.Count > 0)
                      {
                          return customers[0];
                      }
                  }
                  catch
                  {

                  }
                  finally
                  {
                      if (session != null) session.Close();
                  }

                  return null;
              });

            return (Customer)result;

        } 
```

我现在得到的错误是

```
Server Error in '/RMA' Application.
--------------------------------------------------------------------------------

Cannot access a disposed object.
Object name: 'AdoTransaction'. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ObjectDisposedException: Cannot access a disposed object.
Object name: 'AdoTransaction'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[ObjectDisposedException: Cannot access a disposed object.
Object name: 'AdoTransaction'.]
   NHibernate.Transaction.AdoTransaction.Commit() +425
   Spring.Data.NHibernate.HibernateTransactionManager.DoCommit(DefaultTransactionStatus status) in c:\_prj\spring-net\trunk\src\Spring\Spring.Data.NHibernate\Data\NHibernate\HibernateTransactionManager.cs:579
   Spring.Transaction.Support.AbstractPlatformTransactionManager.ProcessCommit(DefaultTransactionStatus status) in c:\_prj\spring-net\trunk\src\Spring\Spring.Data\Transaction\Support\AbstractPlatformTransactionManager.cs:853
   Spring.Transaction.Support.TransactionTemplate.Execute(TransactionDelegate transactionMethod) in c:\_prj\spring-net\trunk\src\Spring\Spring.Data\Transaction\Support\TransactionTemplate.cs:159
   Technolog.Rma.Business.Repositories.CustomerDAO.find(String login) in C:\work\samplemvc\src\Technolog.Rma.Business\Repositories\CustomerDAO.cs:42
   _dynamic_Technolog.Rma.Business.Repositories.CustomerDAO.find(Object , Object[] ) +147
   Spring.Reflection.Dynamic.SafeMethod.Invoke(Object target, Object[] arguments) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Reflection\Dynamic\DynamicMethod.cs:156
   Spring.Aop.Framework.DynamicMethodInvocation.InvokeJoinpoint() in c:\_prj\spring-net\trunk\src\Spring\Spring.Aop\Aop\Framework\DynamicMethodInvocation.cs:100
   Spring.Dao.Support.PersistenceExceptionTranslationInterceptor.Invoke(IMethodInvocation invocation) in c:\_prj\spring-net\trunk\src\Spring\Spring.Data\Dao\Support\PersistenceExceptionTranslationInterceptor.cs:190
   CompositionAopProxy_33677284ca854c0b8c01a5b0ae0a0524.find(String login) +383
   Technolog.Rma.Web.Controllers.HomeController.Index(Int32 page) in C:\work\samplemvc\src\Technolog.Rma.Web\Controllers\HomeController.cs:36
   lambda_method(Closure , ControllerBase , Object[] ) +112
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +248
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +39
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +125
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +640
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +312
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +691
   System.Web.Mvc.Controller.ExecuteCore() +162
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +305
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +62
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +20
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:23:02.070

根据上面的评论，我遵循了实现 osiv 的说明。我还发现我正在关闭一个会话，而我应该让它保持打开状态，从而导致

```
Cannot access a disposed object. 
```

我使用 OSIV 的 web.config 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368

  Spring.Context.Support.ContextHandler, Spring.Core

    <resource uri="~/Config/propertyConfigurer.xml" />
  -->
<configuration>
  <configSections>
    <sectionGroup name="spring">
      <section name="context" type="Spring.Context.Support.MvcContextHandler, Spring.Web.Mvc3" />
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="dataFile" value="App_Data\data.db3" />
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
    <add key="Spring.Data.NHibernate.Support.OpenSessionInViewModule.SessionFactoryObjectName" value="SessionFactory"/>
  </appSettings>
  <spring>
    <context>
      <resource uri="file://~/Config/propertyConfigurer.xml" />
      <resource uri="file://~/Config/sessionFactory.xml" />
      <resource uri="file://~/Config/mappers.xml" />
      <resource uri="file://~/Config/repositories.xml" />
      <resource uri="file://~/Config/controllers.xml" />
      <resource uri="file://~/Config/scopedobjects.xml" />
      <resource uri="file://~/Config/utils.xml" />
    </context>
  </spring>
  <system.web>
    <httpModules>

      <add name="Spring" type="Spring.Context.Support.WebSupportModule, Spring.Web"/>
      <add name="OpenSessionInView" type="Spring.Data.NHibernate.Support.OpenSessionInViewModule, Spring.Data.NHibernate32"/> 

    </httpModules>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
    <customErrors mode="Off"/>

  </system.web>
  <system.webServer>

    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">

      <add name="Spring" type="Spring.Context.Support.WebSupportModule, Spring.Web"/>
      <add name="OpenSessionInView" type="Spring.Data.NHibernate.Support.OpenSessionInViewModule, Spring.Data.NHibernate32"/>
    </modules>
    <!--
    <handlers>
      <add name="SpringPageHandler" verb="*" path="*.aspx" type="Spring.Web.Support.PageHandlerFactory, Spring.Web"/>
      <add name="SpringWebServiceHandler" verb="*" path="*.asmx" type="Spring.Web.Services.WebServiceHandlerFactory, Spring.Web" />
      <add name="SpringContextMonitor" verb="*" path="ContextMonitor.ashx" type="Spring.Web.Support.ContextMonitor, Spring.Web"/>
    </handlers>
    -->
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.7.0" newVersion="4.0.7.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

请注意，对 osiv 和 spring WebSupportModule 的引用位于 / 中以使其在我的开发环境中工作，并且在 / 中以使应用程序在 IIS 7.5 中工作

我也在我的视图中使用延迟加载，所以 osiv 是更好的解决方案。我在我的问题中展示了程序化事务控制，因为这就是我试图提出解决方案的程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:06:59.577

您已经配置了一个`TransactionManager`，但您没有使用它。在调用之前`SessionFactory.GetCurrentSession();`，请尝试在您的事务管理器上启动事务。当使用 Spring 的事务管理时，你不应该显式地使用 NHibernate 的事务支持。

您可以以[编程](http://www.springframework.net/doc-latest/reference/html/orm.html#orm-hibernate-tx-programmatic)方式或[声明](http://www.springframework.net/doc-latest/reference/html/transaction.html#dtm)方式执行此操作；在这个阶段，我会先尝试程序化方法。

# liferay - 如何使用 Velocity 模板将现有 portlet 添加到 Web 内容显示

> ID：12566611
> 
> 赞同：3
> 
> 时间：2012-09-24T13:59:37.670
> 
> 标签：liferay, liferay-6, liferay-velocity, liferay-theme

我想使用`Web Content Display`with`Velocity Templates`和创建一个新页面`Structures`。

在我的页面上，我希望有多个选项卡，并且每个选项卡都需要从现有 portlet 的模板以编程方式添加。

我知道如何将现有的 portlet 添加到我的主题`($theme.runtime("portlet_id"))`，但我找不到将 portlet 添加到速度模板的方法，因为`$theme`对象在 Web 内容显示模板中不可用。

您能否告诉我是否可以将 portlet 添加到模板中？
如果是，如何？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T20:49:15.420

您可以在速度模板中使用 runtime-portlet 标记：

```
<div id="portlet-inside-wc">
  <runtime-portlet name="portlet-id" instance="instanceID" queryString=""/>
</div> 
```

其中 name 是 portlet ID，instance 是 4 个字母的唯一（字母数字）单词，Querystring 可以是 portlet 首选项。

# c# - 64 位进程不支持 Explorer OM

> ID：12566616
> 
> 赞同：3
> 
> 时间：2012-09-24T14:00:08.090
> 
> 标签：c#, .net, biztalk

我试图通过以下代码使用 C# .NET 创建发送端口：

```
using Microsoft.BizTalk.ExplorerOM;

      private void CreateSendPort()

      {
         // connect to the local BizTalk Management database
         BtsCatalogExplorer catalog = new BtsCatalogExplorer();
         catalog.ConnectionString = "Server=.;Initial Catalog=BizTalkMgmtDb;Integrated Security=SSPI;";

         try
         {
            // create a new static one-way SendPort
            SendPort myStaticOnewaySendPort = catalog.AddNewSendPort(false, false);
            myStaticOnewaySendPort.Name = "myStaticOnewaySendPort1";
            myStaticOnewaySendPort.PrimaryTransport.TransportType = catalog.ProtocolTypes[0];
            myStaticOnewaySendPort.PrimaryTransport.Address = "http://sample1";
            myStaticOnewaySendPort.SendPipeline = catalog.Pipelines["Microsoft.BizTalk.DefaultPipelines.XMLTransmit"];

            // create a new dynamic two-way sendPort
            SendPort myDynamicTwowaySendPort = catalog.AddNewSendPort(true, true);
            myDynamicTwowaySendPort.Name = "myDynamicTwowaySendPort1";
            myDynamicTwowaySendPort.SendPipeline = catalog.Pipelines["Microsoft.BizTalk.DefaultPipelines.XMLTransmit"];
            myDynamicTwowaySendPort.ReceivePipeline = catalog.Pipelines["Microsoft.BizTalk.DefaultPipelines.XMLReceive"];

            // persist changes to BizTalk Management database
            catalog.SaveChanges();
         }
         catch(Exception e)
         {
            catalog.DiscardChanges();
            throw e;
         }
      } 
```

[来源](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.explorerom.sendport%28v=bts.20%29.aspx)

但是我遇到了以下问题 **Explorer OM 在 64 位进程中不受支持。** 执行此行时：

```
BtsCatalogExplorer catalog = new BtsCatalogExplorer(); 
```

我很清楚这一[事实](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.explorerom%28v=bts.20%29.aspx)，即：“*警告 Microsoft.BizTalk.ExplorerOM.dll 仅在从 32 位进程中使用时才受支持。如果您正在为 64 位系统构建解决方案，则不应使用此库。* ”

但在这种情况下，如何在 64 位机器上创建发送端口，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:40:13.100

强制它在 32 位进程中运行。

[http://lostechies.com/gabrielschenker/2009/10/21/force-net-application-to-run-in-32bit-process-on-64bit-os/](http://lostechies.com/gabrielschenker/2009/10/21/force-net-application-to-run-in-32bit-process-on-64bit-os/)

![在此处输入图像描述](../Images/df5c61b09ebd3e21a59088d38ba84ed4.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T15:31:25.297

自 BizTalk 2010 起，此限制已解除，ExplorerOM 可用于 64 位和 32 位进程。

# bash - 如何强制 SVN 提交后向客户端发送消息？

> ID：12566618
> 
> 赞同：1
> 
> 时间：2012-09-24T14:00:11.093
> 
> 标签：bash, svn, post-commit

我正在编写一个提交后挂钩，如果它们被更改，它会将某些文件发布到网络服务器。

我想向客户/用户说明他提交后会发生什么。

这就是为什么我添加了将信息返回给客户端的 echo 命令。

我读了这篇文章：[SVN post-commit hooks sent a message back to client](https://stackoverflow.com/questions/8424670/svn-post-commit-hook-sending-a-message-back-to-client)说 post commit hooks can only return information if I use exit 1.

这很好用，但它让客户感到困惑，因为出现以下消息：

`Warning: post-commit hook failed (exit code 1) with output:`

有没有办法绕过这个输出？

如果有帮助，我的脚本到目前为止：

```
echo "Everything OK. Checking if publishing dir was changed." >&2

svn status /var/www/dev/test/public/projektbereich1/http | grep [AMCDG]
if [ $? -eq 0 ]  ; then
    echo "Dir has changed. Publishing files." >&2
cp -R /var/www/dev/test/public/projektbereich1/http /var/www/public/

else
    echo "Dir has not changed. Webserver does not get updated." >&2
fi

exit 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:48:41.957

您以 1 的返回码显式退出，这表示错误。将出口 1 更改为出口 0，您应该一切顺利。

或者，设置一个变量来保存 else 的每个分支中的返回码。0 成功，1 失败，最后退出 $myreturncode。

我了解您认为您需要返回 1，但在我的提交后挂钩中，我生成并发送电子邮件，然后返回 0。

如果您希望 svn 框架为您发送错误，您只需要返回 1。在成功的情况下，您需要处理“它成功了！” 给自己发消息/电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:48:48.770

如果您的问题是掩盖`svn`错误消息，您可以执行以下操作：

```
svn status /var/www/dev/test/public/projektbereich1/http 2>/dev/null | grep [AMCDG] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:59:34.447

感谢 Stephane，我搜索了 2>/dev/null 、 2>&1 等的含义。

事实证明，程序使用 3 个管道来传输信息：

*   0：正常输出（STDOUT）
*   1：普通输入（STDIN）
*   2：错误输出（STDERR）

所以我只需要将我的回声传送到程序输出，即`>&0`

例如：回声`"Everything OK. Checking if publishing dir was changed." >&0`

# android - SoundPool 停止播放

> ID：12566626
> 
> 赞同：1
> 
> 时间：2012-09-24T14:01:15.080
> 
> 标签：android, soundpool

我有一个按钮，当按下时，SoundPool 会发出短暂的声音效果。该文件是 16k mp3。
**声音效果适用于数百次按钮点击，但在某些时候我收到此错误（并且声音不再播放点击）：**

```
E/AudioFlinger(   34): no more track names available
E/AudioTrack(  904): AudioFlinger could not create track, status: -12
E/SoundPool(  904): Error creating AudioTrack
W/AudioFlinger(   34): write blocked for 81 msecs, 4573 delayed writes, thread
xb3f0 
```

创建：

```
setVolumeControlStream(AudioManager.STREAM_MUSIC);
soundpool = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);
soundpool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
    @Override
    public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {
        // TODO Auto-generated method stub
        loaded = true;
    }
});

//save the effect somewhere:
MyUtil.regularSound = soundpool.load(this, R.raw.regular_click,1); 
```

点击：

```
AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
float actualVol = (float) audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
float maxVol = (float) audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
float vol = actualVol/maxVol;
if (loaded) {
    soundpool.play(MyUtil.regularSound,vol,vol,1,0,1f);
} 
```

在开始另一个意图之前：

```
Intent i = new Intent(con, EndScreen.class);
if (soundpool != null) {
    soundpool.release();
    soundpool = null;
}
startActivity(i); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-01T14:18:10.783

我只是花了几个小时来解决同样的问题。

-12 错误意味着分配给应用程序的声音内存不足。using`.finish()`不会释放 SoundPool 的内存。你必须使用`.release()`.

在我的应用程序中，我在启动下一个活动的 onclick 方法上有一个 soundPool.release()，

更改声音格式对我也不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T15:43:33.160

你尝试编码：这里

```
 /*
    private SoundPool mSoundPool;
    private SparseArray<Integer> mSoundPoolMap;
    private AudioManager mAudioManager;
    */
    public static void clear() {
        if (mSoundManager != null) {
            mSoundManager.mSoundPool = null;
            mSoundManager.mAudioManager = null;
            mSoundManager.mSoundPoolMap = null;
        }
        mSoundManager = null;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:25:44.390

我得到同样的错误。我所做的是尝试重新采样曲目，将其转换为 OGG 格式并将质量更改为 0。我用[Audacity完成了所有这些](http://audacity.sourceforge.net/download/)

# iphone - 字典数组的过滤和排序

> ID：12566629
> 
> 赞同：-1
> 
> 时间：2012-09-24T14:01:25.300
> 
> 标签：iphone, ios, cocoa, nsdictionary

我有一个像这样的主字典：

```
data = [{"key1": "value1", "key2": "value2", "key3": "value3"}, {"key1": "value1", "key2": "value5", "key3": "value6"}, {"key1": "value2", "key2": "value2", "key3": "value9"} ] 
```

我需要创建一个字典，假设有一个独特的组合`[value for "key1"]` 和`[value for "key2"]`：

即，我需要创建一个字典，如：

```
result = [{"value1" {"value2" : "value3", "value5" : "value6"}}, {"value2" {"value2" : "value9"}}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:47:20.547

我不确定我是否完全理解您在寻找什么，但这里有一个小程序，可以做一些接近您所描述的事情。请注意，这个问题与您标记它的任何标签无关。这是一个基本的算法问题。

```
int main (int argc, const char * argv[]) {

    @autoreleasepool {

        NSArray *array = @[
            @{@"key1": @"value1", @"key2": @"value2", @"key3": @"value3"},
            @{@"key1": @"value1", @"key2": @"value5", @"key3": @"value6"},
            @{@"key1": @"value2", @"key2": @"value2", @"key3": @"value9"}
        ];

        NSMutableDictionary *result = [NSMutableDictionary dictionary];

        for (NSDictionary *dict in array) {
            [dict enumerateKeysAndObjectsUsingBlock:^(id key, id value, BOOL *stop) {
                NSMutableArray *valuesForKey = [result objectForKey:key];
                if (valuesForKey == nil) {
                    valuesForKey = [NSMutableArray array];
                    [result setObject:valuesForKey forKey:key];
                }
                [valuesForKey addObject:value];
            }];
        }

        for (id key in result.allKeys) {
            NSMutableArray *valuesForKey = [result objectForKey:key];
            [valuesForKey sortUsingSelector:@selector(compare:)];
        }

        NSLog(@"Dictionary: %@", result);
    }
    return 0;
} 
```

输出如下：

```
2012-09-24 20:44:02.509 Dummy[68684:303] Dictionary: {
    key1 =     (
        value1,
        value1,
        value2
    );
    key2 =     (
        value2,
        value2,
        value5
    );
    key3 =     (
        value3,
        value6,
        value9
    );
} 
```

# ios - IOS 6 UISegmentedControl

> ID：12566637
> 
> 赞同：0
> 
> 时间：2012-09-24T14:01:59.023
> 
> 标签：ios, xcode

我使用此代码创建一个 UISegment：

```
//segment controll

            NSString *key2 = [allKeys2 objectAtIndex:i];

            NSString *obj2 = [DictionaryHomework objectForKey:key2];

            int val;
            val = [obj2 intValue];

            //segment controll

            NSArray *itemArray2 = [NSArray arrayWithObjects: @"very easy", @"easy", @"ok", @"hard", @"challenging", nil];
            UISegmentedControl *segmentedControl2 = [[UISegmentedControl alloc] initWithItems:itemArray2];
            segmentedControl2.frame = CGRectMake(480, -60, 130, 350);
            segmentedControl2.segmentedControlStyle = UISegmentedControlStyleBar;
            segmentedControl2.selectedSegmentIndex = val - 1;
            [segmentedControl2 addTarget:self action:@selector(segmentedControlHomework:) forControlEvents:UIControlEventValueChanged];

            segmentedControl2.transform =
            CGAffineTransformRotate(segmentedControl2.transform, degreesToRadians(90));

            NSArray *arr = [segmentedControl2 subviews];
            for (int i = 0; i < [arr count]; i++) {
                UIView *v = (UIView*) [arr objectAtIndex:i];
                NSArray *subarr = [v subviews];
                for (int j = 0; j < [subarr count]; j++) {
                    if ([[subarr objectAtIndex:j] isKindOfClass:[UILabel class]]) {
                        UILabel *l = (UILabel*) [subarr objectAtIndex:j];
                        l.transform = CGAffineTransformMakeRotation(- M_PI / 2.0); //do the reverse of what Ben did
                    }
                }
            }

            [image1 addSubview:segmentedControl2];

            segmentedControl2.tag = i;

            [segmentArray addObject: segmentedControl2];

            //segment control 
```

在 ios5 上，控件以水平方式加载标题，而在 ios6 中以垂直方式加载。为什么是这样？iOS6有变化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:07:46.823

你在摆弄`UISegmentedControl`. 虽然您在*技术上*并未使用私有 API，但您仍在访问`UIKit`未公开记录的部分内容。

iOS 6 中该行为可能发生变化的一个原因可能是分段控件现在在`layoutSubviews`其他地方懒惰地构建其子视图。它甚至可能根本不使用子视图。但我只是在这里猜测。但是，Apple 选择更改框架的未记录内部结构。

您的代码不应该在运输应用程序中使用。如果你想做这样的事情（垂直段？）内置分段控件不能做的，你自己构建它。

# c# - 产品类设计

> ID：12566639
> 
> 赞同：1
> 
> 时间：2012-09-24T14:02:01.773
> 
> 标签：c#, asp.net

我有一个名为 product 的类，我的问题是我以各种方式处理产品，通过产品列表、产品本身以及将产品插入数据库。每个处理不同的属性。

例如，在页面上显示产品将由名称、描述、ID、价格、品牌名称、类别、图像组成，但产品列表仅显示名称、缩略图。每个都有自己的方法，例如，一个会获得前 5 个产品，但另一个只显示一种产品。

我的问题是如何为此创建类，我是为每个产品变体创建一个不同的类，还是创建一个包含每个方法和属性的类，因此将包含一个非常庞大的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:20:14.673

*   从一个名为 Product 的抽象类开始。

*   在这个类中拥有所有产品的共同特征/属性/常用方法。

*   从这个抽象类派生新的产品类型。

*   使抽象类中的属性/方法虚拟化，因此派生产品类型可以根据产品类型表现出不同的行为。

*   看看您是否需要派生产品类型显式展示特定行为。在你的抽象类中声明抽象类方法。因此派生类负责实现该行为。

    抽象类产品{

    //成员字段 //方法

    }

    ```
     product1:product{
        //product specific implementation
     }

     product2:product{
         //product specific implementation
     } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:03:41.133

使用具有所有属性的单个 Product 类，并简单地显示在给定情况下所需的属性（数据库字段）。例如，您可以将产品创建为购物车项目：

```
public class ShoppingCartItem
{
    private int productID;
    private string productCategory;
    private string subCategory;
    private string productName;
    private string productDescription;
    private decimal productPrice;
    private double productWeight;
    private int units;

    public int ProductID
    {
        get { return productID; }
    }
    public string ProductCategory
    {
        get { return productCategory; }
    }
    public string SubCategory
    {
        get { return subCategory; }
    }
    public string ProductName
    {
        get { return productName; }
    }
    public string ProductDescription
    {
        get { return productDescription; }
    }
    public decimal ProductPrice
    {
        get { return productPrice; }
    }
    public double ProductWeight
    {
        get { return productWeight; }
        set { productWeight = value; }
    }
    public int Units
    {
        get { return units; }
        set { units = value; }
    }
    public decimal Total
    {
        get { return Units * ProductPrice; }
    }
    public ShoppingCartItem(int productID, string farm, string productCategory, 
        string subCategory, string productName, string productDescription,
            decimal productPrice, double productWeight, int units)
    {
        this.productID = productID;
        this.productCategory = productCategory;
        this.subCategory = productCategory;
        this.productName = productName;
        this.productDescription = productDescription;
        this.productPrice = productPrice;
        this.productWeight = productWeight; 
        this.units = units;
    }
}

[Serializable()]
public class ShoppingCart : CollectionBase
{
    public ShoppingCartItem this[int index]
    {
        get { return ((ShoppingCartItem)List[index]); }
        set { List[index] = value; }
    }
    public int Add(ShoppingCartItem value)
    {
        return (List.Add(value));
    }
    public int IndexOf(ShoppingCartItem value)
    {
        return (List.IndexOf(value));
    }
    public void Insert(int index, ShoppingCartItem value)
    {
        List.Insert(index, value);
    }
    public void Remove(ShoppingCartItem value)
    {
        List.Remove(value);
    }
    public bool Contains(ShoppingCartItem value)
    {
        return (List.Contains(value));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-04T15:13:39.760

每个场景都需要不同的模型。如果您要持久化一个产品，那么它将是 ProductDto 或 PersistableProduct。或者您可以使用诸如 Shopping.Dto.Product 之类的命名空间来限定它

如果您要查看产品，那么我会想到 ProductViewModel。如果您使用的是 ASP.NET MVC，则模型目录将包含一个名为 Product 的类，该类仅具有有限的页面显示属性。

Bob 大叔在他的博客中提倡 DTO 和 Business Objects 是不同的东西。
[http://blog.cleancoder.com/uncle-bob/2019/06/16/ObjectsAndDataStructures.html](http://blog.cleancoder.com/uncle-bob/2019/06/16/ObjectsAndDataStructures.html) 我们在选择类的时候还需要注意设计。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-24T14:06:31.890

设计一个具有应用程序所需的所有属性/方法的类。

# xaml - Silverlight Datagrid 列标题文本换行符

> ID：12566645
> 
> 赞同：1
> 
> 时间：2012-09-24T14:02:14.677
> 
> 标签：xaml, silverlight-4.0, resourcedictionary

我正在使用 Silverlght 4.我有一个数据网格标题，其文本 =“StudentDetailOfAplication”。由于它占用更多长度，我需要在“应用程序”附近有一个断线。请给我一些有用的链接如何做到这一点

```
<Grid x:Name="LayoutRoot" Background="White">
        <sdk:DataGrid AutoGenerateColumns="False" Height="227" HorizontalAlignment="Left" Margin="39,37,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="316" >
            <sdk:DataGrid.Columns>
                <sdk:DataGridTextColumn Header="StudenDetailsOFApplication" Width="100" Binding="{Binding id}"></sdk:DataGridTextColumn>
                <sdk:DataGridTextColumn Header="Name" Width="100" Binding="{Binding productName}"></sdk:DataGridTextColumn>
                <sdk:DataGridTextColumn Header="NumberOfAplication" Width="114"  Binding="{Binding qty}"></sdk:DataGridTextColumn>
            </sdk:DataGrid.Columns>
        </sdk:DataGrid></Grid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:55:53.220

`Header="Student Details&#10;Of Application"`或者`Header="Student Details&#x0a;Of Application"`也可以。或者，如果您不插入字符串，您也可以执行类似的操作。

```
<TextBlock>
Line<LineBreak/>Break
</TextBlock> 
```

但我个人只使用前两个示例中显示的代码。另请记住，xml 将保留空格，因此`Header=" Details of&#10;Student Application"`如果 TextAlignment 属性不可用，您可以出于对齐目的进行类似操作。希望这可以帮助。

# asp.net - 跨站点通信 - 它是如何可能的。需要更好的想法

> ID：12566648
> 
> 赞同：0
> 
> 时间：2012-09-24T14:02:16.623
> 
> 标签：asp.net

1.  将为 WebSiteA 提供到 WebSiteB 的链接
2.  我们无法在 WebSiteA 中编写任何代码
3.  我需要将令牌从 WebSiteA 传递给 WebSiteB（为了了解用户来自 WebSiteA）
4.  `Request.UrlReferrer`由于 WebSiteA 是 HTTPS，因此无法用于识别以前的站点
5.  由于重放攻击，查询字符串不安全（如果有任何外部获取 url，则可以重复使用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:29:28.123

我个人会使用一个加密的`POST`变量，它会被 POST 到 WebSiteB。

WebSiteB 然后用私钥解密。

可选验证：WebSiteA 有一个（HTTPS？）Web 服务，WebSiteB 然后使用解密的密钥对其进行检查，以验证/从 WebSiteA 获取相同请求的更多信息。

这里有一些加密/解密技术：[加密和解密字符串](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)

这样它是安全的，并且可以检查它是否试图被欺骗等......

# c - 求解电路的算法

> ID：12566649
> 
> 赞同：2
> 
> 时间：2012-09-24T14:02:19.493
> 
> 标签：c, algorithm

我正在自学编程，我想知道如何解决这个问题。

我已经获得了一组具有给定电阻和给定值的电阻器。我可以选择给定数量的这些电阻器。我怎样才能制作一个电阻尽可能接近恢复的电路？一位程序员告诉我，可以使用遗传算法，但我不限于使用这种算法。

我想我必须使用基尔霍夫定律来制作方程的线性系统，但由于我在电力问题和线性系统的数值算法方面没有太多经验，所以我想对如何制作这些有一些指导随着系统的不断变化，方程会自动存储到计算机内存中。以及如何确保算法收敛到更好的解决方案？

问题来自芬兰讨论论坛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:05:38.477

电阻器可以串联或并联存在，它们的电阻加起来不同（串联增加值，并联增加倒数）。

您还可以使用串联和并联的电阻器网络。

在我看来，这听起来像是递归数据结构的经典案例，您可能可以将其表示为一棵树，类似于二叉表达式树：[http ://en.wikipedia.org/wiki/Binary_expression_tree](http://en.wikipedia.org/wiki/Binary_expression_tree)

结合一些探索性树构建（您应该研究 Prolog 执行此操作的方式），您可以找到接近您总数的电阻器的最佳组合。

这种方法中没有遗传算法，尽管您可以采用遗传方法来构建和改进树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:33:07.060

要应用遗传算法，您需要找到一种方法来表示、变异和组合电阻网络的“DNA”。

一种方法是：

1.  在您的电阻器组（代表电线）中添加一些 0 欧姆电阻器。
2.  将电阻从 1 编号到 N
3.  对于一些 M，想象一组 M 个结点，包括源 (1) 和汇 (M)。
4.  您可以将每个电阻器的两个端点连接到哪些结点定义为网络的唯一标识符。这只是 1..M 范围内的整数对的 N 元组。这个元组可以是“DNA”。

然后：

1.  从随机元组生成一堆随机网络。
2.  计算每个网络的电阻
3.  丢弃离目标抵抗最远的一些人口。
4.  组合它们的随机对以形成新的网络。（也许通过以 50% 的概率从父 A 或父 B 中随机选择每个电阻端点）
5.  随机更改一些端点（突变）。
6.  转到 2

不确定它是否真的会像这样工作，但你明白了。

毫无疑问，有一个更好的非遗传算法，但你特别要求遗传算法，所以你去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:33:56.253

如果你不局限于遗传算法，那么我认为你也可以借助线性规划来解决这个问题。您可以将问题编码如下，并要求求解器为您提供答案。

```
Required Resistance Of Circuit = x ohms

// We want to have total 33 resistors.
selected_in_series_1 + selected_in_series_2 +... + selected_in_series_211 + selected_in_parallel_1 + selected_in_parallel_2 + ... + selected_in_parallel_211 = 33

// Resistor in Series
(selected_in_series_1 * Resistor_1) + (selected_in_series_2 * Resistor_2) + ..(selected_in_series_211 * Resistor_211) = total_resistence_in series

// Similarly write formula for parallel
(selected_in_parallel_1 * 1/Resistor_1) + (selected_in_parallel_2 * 1/Resistor_2) + ..(selected_in_parallel_211 * 1/Resistor_211) = 1/total_resistence_in parallel

total_resistence_in series + total_resistence_in parallel = Required Resistance Of Circuit 
```

# php - 从控制器发布 mysql 数据以在 CodeIgniter 中查看

> ID：12566651
> 
> 赞同：1
> 
> 时间：2012-09-24T14:02:24.550
> 
> 标签：php, codeigniter

我试图从控制器发送到视图中的所有联系人的数组，这些联系人在我的数据库表“联系人”中，然后将它们显示在下拉菜单上。我遵循了关于此主题的 CodeIgniter 文档[http://codeigniter。 com/user_guide/general/views.html](http://codeigniter.com/user_guide/general/views.html)但这并不是我真正想做的。这是我试图做的：

```
function getAll_contact(){
     $exist= $this->contacts_model->get_all('contacts');
     if($exist)
        {
            $all_contact = $this->contacts_model->read('contacts');
        //echo json_encode($all_contact); prints all the contacts in the table
                    $this->load->view('myView', $contact);
        }
    } 
```

在我看来 ：

```
 <select class="span4">
          <?php if(isset($all_contact) && ! empty($all_contact)){ 
            foreach($all_contact as $contact){
            echo "<option value='".$contact->id_contact."'>".$contact->company."</option>";

    }
}
      </select> 
```

这不会在下拉菜单上显示任何内容。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:07:17.860

将您的结果放入数据数组中..

```
$data['all_contact']=$this->contacts_model->read('contacts'); 
```

并将数组发送到查看

```
$this->load->view('myView', $data); 
```

并且您可以使用 $all_contact 在您的视图中获取该变量 ..就像您目前拥有的一样..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:04:52.737

首先，您将变量命名为 $contact 而不是 $all_contact。

解决方案：

```
function getAll_contact(){
  $exist= $this->contacts_model->get_all('contacts');
  if($exist)
  {
    $data['all_contact'] = $this->contacts_model->read('contacts');
    //echo json_encode($data); prints all the contacts in the table
    $this->load->view('myView', $data);
  }
} 
```

然后您可以像当前在您的视图中一样访问它。

# c# - 我如何将查询字符串传递给 aspx

> ID：12566652
> 
> 赞同：0
> 
> 时间：2012-09-24T14:02:24.700
> 
> 标签：c#, asp.net, query-string

我有这样的网址：`DossierSoin_Fiche.aspx?SoinId=1`

我怎样才能将这个 SoinId 传递给 `dx:ASPxPopupControl`

`<dx:ASPxPopupControl ID="ASPxPopupControl_Surveill"
ContentUrl="~/PopUp/Surveillance.aspx?SoinId=<%=SoinId %>"`?

提前谢谢你

PS：我不能使用后面的代码，因为它会重新加载页面，然后我会丢失没有保存在数据库中的数据。我改用回调，所以我需要在 aspx 上而不是在 aspx.cs 上传递这个查询字符串值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:06:36.747

创建一个属性“SoinID”（如果你还没有）

```
protected string SoinId  {get;set;} 
```

（修饰符的类型取决于 OP，也可以是`public`）。

然后，为您的属性分配一个值`page_load`：

```
SoinId = Request.QueryString["SoinID"]; 
```

如果您像这样使用它，您的 .aspx 代码可以保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:06:44.110

在您的容器代码隐藏中：

```
protected string SoinId
{
   get
   {
      return Request["SoinId"];
   }
} 
```

并使用您拥有的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:04:10.713

只需将值传递给页面 CodeBehind 中的公共属性即可。

```
ASPxPopupControl_Surveill.ContentUrl = ... 
```

[感谢 rs 进行编辑。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:07:36.963

选项 A：

1) 在您的 aspx 页面范围内声明一个名为 SoinId 的受保护变量。

2) 在 Page_Load 事件中，添加：

```
if(!Request.QueryString["SoinId"]==null)
{
   SoinId = Request.QueryString["SoinId"];
} 
```

选项 B：

用这个替换你的 aspx 代码：

```
<dx:ASPxPopupControl ID="ASPxPopupControl_Surveill" 
ContentUrl="~/PopUp/Surveillance.aspx?SoinId=<%=Request.QueryString["SoinId"] %>"> 
```

编辑：考虑使用其他同事建议的属性。它更优雅。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T14:08:48.100

我想你可以在后面的代码中分配值。

例如;

```
ASPxPopupControl_Surveill.ContentUrl = "~/PopUp/Surveillance.aspx?SoinId=" + Request["SoinId"].ToString(); 
```

# macos - 获取驱动程序父级（或祖先）的属性

> ID：12566656
> 
> 赞同：0
> 
> 时间：2012-09-24T14:02:38.060
> 
> 标签：macos, usb, device-driver, scsi, kernel-extension

我有一个用于连接 USB 的自定义 SCSI 设备的驱动程序，它实现了一些特定于供应商的命令。每个 USB 设备承载多个 SCSI LUN。这工作非常愉快，但是根据设备对 SCSI LUN 进行分组存在问题，因为从`IOSCSILogicalUnitNub`级别向下（我的驱动程序继承自），没有将 LUN 链接在一起的识别功能（有 SCSI 逻辑单元号，但是这些对于每个新设备都会发生冲突；它们都有一个单元 0x0)。

我想做一些事情，比如根据 USB`locationID`字段（或任何其他唯一键）链接它们，但我不知道如何在仅给出`io_service_t`匹配的 SCSI 驱动程序的情况下获取父 USB 设备。这也最好在应用程序端完成，而不是在驱动程序中完成，因为应用程序需要跟踪哪个服务具有哪些 LUN 以及由哪个处理程序实例打开。

IO Registry 中的层次结构是：

```
MyUSB-SCSI Device@fd130000
 |-IOUSBCompositeDriver
 |-Mass Storage Class Interface@0     (has location ID 0xfd130000)
   |-IOUSBMassStorageClass
     |-IOSCSILogicalUnitNub@0         (has SCSI LUN number, unique in this device, but not globally)
     | |-com_Company_driver_MyDriver  (my driver)
     |   |-IOBlockStorageServices
     |     |-Manuf Device Media       (these are strings from the device firmware)
     |       |-IOMediaBSDClient
     |
     |-IOSCSILogicalUnitNub@0
       |-com_Company_driver_MyDriver
         |-IOBlockStorageServices
           |-Manuf Device Media
             |-IOMediaBSDClient 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:25:28.360

如果您设备的 io_service_t 在变量 _device 中，则代码如下所示：

```
CFTypeRef _thing_you_want = IORegistryEntrySearchCFProperty(_device, kIOServicePlane, CFSTR("locationID"), NULL, kIORegistryIterateParents); 
```

去这里了解更多信息：

[http://developer.apple.com/library/mac/#documentation/devicedrivers/conceptual/AccessingHardware/AH_IOKitLib_API/AH_IOKitLib_API.html](http://developer.apple.com/library/mac/#documentation/devicedrivers/conceptual/AccessingHardware/AH_IOKitLib_API/AH_IOKitLib_API.html)

# ruby-on-rails-3 - Rails 载波错误

> ID：12566658
> 
> 赞同：0
> 
> 时间：2012-09-24T14:02:43.350
> 
> 标签：ruby-on-rails-3, carrierwave, fog

我正在使用carrierwave 和fog 在我的应用程序中上传文件。我升级了所有的宝石，现在收到此错误`wrong number of arguments (2 for 1)`

```
<%= link_to image_tag(listing.image_url(:thumb).to_s,
    :class => 'popup-image'),
    listing,
    :class => 'big-image-link' if listing.image?  %> 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:12:28.337

我刚刚恢复到雾版本 1.3 并且它再次工作。

# java - 使用 PlainDocument 在 JTextField 中移动插入符号

> ID：12566660
> 
> 赞同：4
> 
> 时间：2012-09-24T14:02:53.130
> 
> 标签：java, swing, jtextfield, caret

我正在编写一个基于 JTextField 的自定义控件。我的 JTextField 使用我自己的 Document 类，从 PlainDocument 派生，这样我就可以处理所有用户输入的覆盖`insertString(...)`和`remove(...)`方法。

这就是问题所在。处理用户输入后，有时我想将插入符号移动到另一个位置。更好的方法是什么？

默认情况下，文档将插入符号放在最后一个输入旁边。所以我试图将一个字符放在我的目标位置并立即删除它。由于某种原因，它在`remove()`方法中不起作用......而且代码看起来不太好:)

感谢和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:14:24.107

*   似乎没有必要扩展 PlainDocument。只需将[DocumentListener](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/DocumentListener.html)添加到 JTextField 的 Document 中，您就可以在 DocumentListener 中声明的 3 个方法中处理用户输入
*   使用[setCaretPosition](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setCaretPosition%28int%29)将插入符号移动到您想要的任何位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T14:56:39.890

[`DocumentFilter`](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/DocumentFilter.html)如果您想控制用户输入，您实际上应该使用 a 。A`DocumentFilter`允许您在发生时拦截所有输入。然后，您可以使用[`JTextField.setCaretPosition`](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setCaretPosition%28int%29)(comes from `JTextComponent`) 设置插入符号位置。只需向您的`DocumentFilter`实现传递对的引用，`JTextField`以便它可以为您设置插入符号位置。

这[是`DocumentFilter`](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter). 此外，还有一个[关于 JavaRanch 的示例](http://www.coderanch.com/t/345628/GUI/java/DocumentFilter)。

# javascript - JavaScript - ExtJs：当有复选框列时使用 grid.getExcelXml 导出数据

> ID：12566661
> 
> 赞同：1
> 
> 时间：2012-09-24T14:03:00.587
> 
> 标签：javascript, extjs

我正在使用框架 JavaScript ExtJS 版本 3.2.1。从我的数据网格中，我想将数据导出到 Excel 文件。一切正常，除非网格有 1 个或多个复选框列：在这种情况下，我有一条错误消息：

```
p is null 
```

如果我隐藏包含复选框的列，我可以再次导出。这是我定义复选框列时的代码快照（我构建了一个框架，因为我使用了很多网格视图）：

```
this.column_model_sample_confirmed = new Ext.grid.CheckColumn({
        id:         cmnSampleConfirmed,
        header:         cmhSampleConfirmed,
        dataIndex:      cmnSampleConfirmed,
        align:          _KMX_EXT_CSS_LEFT_,
        width:          30,
        sortable:       true,
        hidden:         false, // sample_confirmed
        resizable:      true,
        filter:         {},
        editor:         new Ext.form.TextField({}),
        editable:       false,
        menuDisabled:   false,
        hideable:       true,
        fixe:           true
    }); 
```

不要注意我使用的变量/常量，因为这段代码可以正常工作。现在，实现我的按钮“导出到 Excel”的代码：

```
 /**
    * Export the grid in Excel
    * FIXED: To get more compatibility with major browsers
    * @param {Object}   my_grid         an editor grid panel instance
    * @param {String}   my_url_export   the url to get the data exported (ajax call)
    * @return NEANT
    */
    var _kmx_fct_exportExcel = function(my_grid, my_url_export){
        // we have to change the name of the worksheet to avoid some forbidden caracters such "(" or ":" to be able to open it with EXCEL
        var tmp = my_grid.title;
        try {
            my_grid.setTitle('Sheet1');
            var exportContent = my_grid.getExcelXml();
                    alert('THIS ALERT IS NOT DISPLAYED!');
            if (!Ext.isIE6 && !Ext.isIE7 && !Ext.isSafari && !Ext.isSafari2 && !Ext.isSafari3) {
                //alert('Ext.isIE6 = ' + Ext.isIE6 + "\n" + 'Ext.isIE7 = ' + Ext.isIE7 + "\n" + 'Ext.isSafari = ' + Ext.isSafari + "\n" + 'Ext.isSafari2 = ' + Ext.isSafari2 + "\n" + 'Ext.isSafari3 = ' + Ext.isSafari3);
                document.location='data:application/vnd.ms-excel;base64,' + Base64.encode(exportContent);
            }
            else {
                if (!Ext.fly('frmDummy')) {
                    var frm = document.createElement('form');
                    frm.id = 'frmDummy';
                    frm.name = id;
                    frm.className = 'x-hidden';
                    document.body.appendChild(frm);
                }
                Ext.Ajax.request({
                    url: my_url_export,
                    method : _self.kmx_form_method_post,
                    form: 
                        Ext.fly('frmDummy'),
                        callback: function(o, s, r){
                            alert(r.responseText);
                            //alert('_kmx_fct_exportExcel callback function: OK');
                        },
                    isUpload: true,
                    params: { ex: exportContent }
                });
            }
        }
        catch (err) {
            txt="There was an error on trying to export the data.\n\n";
            txt+="Error message: " + err.message + "\n\n";
            txt+="Click OK to continue.\n\n";
            alert(txt);
        }
        my_grid.setTitle(tmp); // restore the grid panel name
    }; 
```

这个私有函数是在一个网格面板“类”中为曾经使用 ExtJS 3 的人定义的。同样，不要为我使用的变量/常量付费。问题似乎是这条线：

```
var exportContent = my_grid.getExcelXml(); 
```

因为此代码之后的警报消息：

```
alert('THIS ALERT IS NOT DISPLAYED!'); 
```

不显示。 **所以，我的问题是：当你有一个复选框列时，如何将数据导出为 Excel 格式？**

# android - 如何同时“销毁”多个 Android 活动

> ID：12566662
> 
> 赞同：5
> 
> 时间：2012-09-24T14:03:02.023
> 
> 标签：android, android-activity, android-lifecycle

我在应用程序中有一个向导，通过 6 个活动。

所以我打电话：

主要活动 - 看涨期权 1 - 看涨期权 2 - 看涨期权 3 - 看涨期权 4 - 看涨期权 5

现在，在选项 5 上，我将整个操作保存到数据库，此时我需要返回主活动并销毁选项 1、2、3、4 和 5。

在选项 5 保存到数据库之前，我需要能够返回，进行更改，然后转到选项 5 并保存它。

正确的方法是我以某种方式创建具有以下功能的方法：

```
private void cleanStack(){
   Option1.finish();
   Option2.finish();
   Option3.finish();
   Option4.finish();
   Option5.finish();
} 
```

然后开始（或恢复）主要活动？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T14:12:43.997

使用以下命令清除堆栈：

```
Intent intent = new Intent ( this , MainActivity.class );
intent.addFlags ( Intent.FLAG_ACTIVITY_CLEAR_TOP );
startActivity ( intent ); 
```

以这种方式，因为在堆栈中你有： Main Activity -> Call Option 1 -> Call Option 2 -> Call Option 3 -> Call Option 4 -> Call Option 5

如果您使用**clear top标志启动****MainActivity ，则****MainActivity**顶部堆栈中的所有活动都将完成。

 ***** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T14:12:31.480

我要做的是，而不是完成所有活动，而是创建一个 Intent 来回调您的 MainActivity。

使用该`setFlags`方法为这个 Intent 赋予`FLAG_ACTIVITY_CLEAR_TOP`.

这将检查您的堆栈以查看 MainActivity 的实例是否已经存在，如果存在，它将将该 Activity 带到前面并清除其上方的所有 Activity，而不是重新启动 MainActivity 并将其放在堆栈顶部。

如果 MainActivity 需要选项 1-5 中的信息，您可能需要刷新数据，因为 CLEAR_TOP 在大多数情况下会将 MainActivity 的旧实例置于焦点，而不是完全重新创建它（`onCreate`不会被调用，但`onStart`会`onResume`）。

这是 Intent 类的[文档](http://developer.android.com/reference/android/content/Intent.html)。如果您遇到困难，还有其他标志可以帮助您导航。祝你好运！****

# c# - IPAddress.[Try]Parse 将 192.168 解析为 192.0.0.168

> ID：12566664
> 
> 赞同：3
> 
> 时间：2012-09-24T14:03:06.867
> 
> 标签：c#, networking, .net-4.0, ip-address

我有以下情况：

```
IPAddress ip;
IPAddress.TryParse("192.168", out ip);    
if(ip == null){//do something with IP} 
```

我希望解析失败，而是将其解析为“192.0.0.168”。我在这里想念什么？（IPAddress.Parse 的工作原理相同）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T14:06:41.037

从以下文档[`Parse`](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.parse.aspx)：

> ipString 中的部分数量（每个部分用句点分隔）决定了 IP 地址的构造方式。一个部分地址直接存储在网络地址中。两部分地址，便于指定 A 类地址，将开头部分放在网络地址的第一个字节中，将结尾部分放在网络地址的最右边三个字节中。三部分地址，便于指定B类地址，将第一部分放在网络地址的第一个字节中，第二部分放在第二个字节中，最后一部分放在网络地址的最右边两个字节中。例如：

```
Number of parts and example ipString | IPv4 address for IPAddress
1 -- "65536"                         | 0.0.255.255
2 -- "20.2"                          | 20.0.0.2
2 -- "20.65535"                      | 20.0.255.255
3 -- "128.1.2"                       | 128.1.0.2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T14:06:01.900

包含与您类似的示例的[文档](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.parse.aspx)非常清楚：

> ipString 中的部分数量（每个部分用句点分隔）决定了 IP 地址的构造方式。一个部分地址直接存储在网络地址中。两部分地址，便于指定 A 类地址，将开头部分放在网络地址的第一个字节中，将结尾部分放在网络地址的最右边三个字节中。三部分地址，便于指定 B 类地址，将第一部分放在网络地址的第一个字节中，第二部分放在第二个字节中，最后一部分放在网络地址的最右边两个字节中。

```
Number of parts and example ipString      IPv4 address for IPAddress    
====================================================================
1 -- "65536"                              0.0.255.255
2 -- "20.2"                               20.0.0.2
2 -- "20.65535"                           20.0.255.255
3 -- "128.1.2"                            128.1.0.2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-24T14:06:24.323

`http://192.168`在浏览器的地址栏中键入。怎么了？

这是预期的行为。

# jquery - 为什么过渡不起作用？

> ID：12566675
> 
> 赞同：0
> 
> 时间：2012-09-24T14:03:50.490
> 
> 标签：jquery, iphone, html, css, jquery-mobile

我用 jQuery Mobile、HTML 和 CSS 制作了一个网站，我喜欢在页面之间导航时应用很酷的过渡。我使用带有三个按钮的导航栏，但我无法让转换工作。它看起来一样，但我这样做。有谁知道怎么了？

我`data-transition="slide"`输入了数据角色。

```
<a href="http://www.website.com/" data-role="button" data-theme="c" data-mini="true" id="change" data-transition="slide"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:00:39.190

**1）**您不能链接到外部域。为了使转换工作，页面必须托管在同一个域上，因为 jQuery Mobile 在转换到页面之前使用 AJAX 加载页面，并且 AJAX 受到[跨域资源共享 (CORS) 策略](https://developer.mozilla.org/en-US/docs/HTTP_access_control)的限制。因此，请确保您尝试链接到非外部页面。

**2)**如果这就是您正在使用的所有代码，那么您的 jQuery Mobile 伪页面需要更多的结构。[这是Page Anatomy](http://jquerymobile.com/demos/1.1.1/docs/pages/page-anatomy.html)的 jQuery Mobile 文档中的一个示例：

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Page Title</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
</head> 
<body> 

<div data-role="page" id="page1">

    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p><a href="#page2" data-role="button" data-theme="c" data-mini="true" id="change" data-transition="slide">I'ma Button</a></p>      
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->

</body>
</html> 
```

这是一个演示：http: [//jsfiddle.net/zaaeM/](http://jsfiddle.net/zaaeM/)

# ruby-on-rails - Rails 应用程序中的分页元标记

> ID：12566678
> 
> 赞同：2
> 
> 时间：2012-09-24T14:03:59.820
> 
> 标签：ruby-on-rails, ruby, seo

我正在构建一个严重依赖 SEO 来获取客户的 Rails 应用程序。我现在的问题是我必须添加一些像这样的元标记：

```
<link rel="next" href="http://www.test.it/[URL]/3" />
<link rel="prev" href="http://www.test.it/[URL]/1" /> 
```

我试图四处寻找可以帮助我以简单方式构建它的插件或某种框架，并且在某些方面标准化设置元标记应用程序范围。

我试过的是：

[https://github.com/kpumuk/meta-tags](https://github.com/kpumuk/meta-tags)

[https://github.com/lassebunk/metamagic](https://github.com/lassebunk/metamagic)

这些都不起作用，由于某些原因我无法理解如何做到这一点，它们显然都支持某种“链接 rel”，但都特定于规范和 noindex。

有人可以建议一个更通用的库，或者至少支持搜索引擎进行分页*？

*   [http://googlewebmastercentral.blogspot.it/2011/09/pagination-with-relnext-and-relprev.html](http://googlewebmastercentral.blogspot.it/2011/09/pagination-with-relnext-and-relprev.html)

# java - 从 Wrapper 到原始和原始到 Wrapper 的空间高效转换

> ID：12566686
> 
> 赞同：0
> 
> 时间：2012-09-24T14:04:36.357
> 
> 标签：java, performance, memory-efficient

给定以下功能：

```
public void convertToWrapper(long[] longsToConvert)  
{    

} 
```

和

```
public void convertToPrimitive(Long[] longsToConvert)  
{  
} 
```

[Apache ArrayUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/ArrayUtils.html#toObject%28long%5B%5D%29)公开以下内容：

```
public Long[] toObject(long[] longs){
    final Long [] result = new Long [array.length];
        for (int i = 0; i < array.length; i++) {
             result[i] = new Long (array[i]);
         }
} 
```

我的问题是有没有办法只使用一个数组来做到这一点？我尝试了以下不起作用的方法：

```
for(int i =0;i<array.length;i++)  
{  
     array[i] = new Long(array[i]);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T14:06:25.673

不。 A`Long[]`与 a 不是同一类型`long[]`，因此分配将失败。

# wpf - wpf工具包中的AutoCompleteBox以“rhino.commom.DataContract.ClassName”形式显示项目

> ID：12566687
> 
> 赞同：0
> 
> 时间：2012-09-24T14:04:37.620
> 
> 标签：wpf, mvvm, wpftoolkit, autocompletebox

```
<WPFToolkit:AutoCompleteBox 
    x:Name="atbParentGroup"  
    IsTextCompletionEnabled="True" 
    FilterMode="ContainsOrdinal"
    ItemsSource="{Binding DataContext.Data.ParentProductGroupList}"  
    SelectedItem="{Binding DataContext.Data.SelectedParentProductGroup}"
    ValueMemberPath="ParentGroupName"
    Text="{Binding ParentGroupName}"
    Width="120"
    HorizontalAlignment="Left" VerticalAlignment="Top" 
    Grid.Row="0" Grid.Column="1" Margin="5,5,0,0" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:26:30.893

现在我知道了。确保`ParentGroupName`您设置的属性`ValueMemberPath`提供了一个很好的结果 - 例如一个字符串。如果不是这种情况，您可以提供要显示的属性的完整路径：

```
ValueMemberPath="ParentGroupName.FullName" 
```

或类似的东西。

另一种可能性是覆盖`.ToString()`- 方法`ParentGroupName`以返回可读的内容。

另外确保`Text`-property 不与其他属性冲突，如果有疑问，根本不要绑定它。`SelectedItem`-property 将完成它的工作。

# c# - XML 在 .net 中保存时没有得到保存

> ID：12566690
> 
> 赞同：0
> 
> 时间：2012-09-24T14:04:43.427
> 
> 标签：c#, .net, xml

在对它进行一些更改并重新创建它之后，我正在使用 XDocument.Save(fileName) 方法将已经存在的 xml 文件保存在同一位置。现在的情况是，当用户完成更改并在文本编辑器中打开文件时，有时会同时保存 xml，并且用户会在编辑器中收到文件已保存的提示。你想重新加载吗？但有时需要在编辑器中获得提示，这会使用户混淆文件是否已保存。这意味着保存文件需要时间。为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:51:14.967

尝试使用 FileStream 对象，然后刷新它。

```
using (FileStream fs = new FileStream(filepath, FileMode.Truncate))
{
    xmlDoc.Save(fs);
    fs.Flush();
} 
```

# android - Android Jelly Bean：app中的图标突然被洗掉了

> ID：12566694
> 
> 赞同：0
> 
> 时间：2012-09-24T14:04:56.370
> 
> 标签：android, image-scaling, android-4.2-jelly-bean

我有一个带有图标仪表板的应用程序。该应用程序只有带有图标的 drawable-hdpi 文件夹。

当我同时启动 4.0 和 4.1 模拟器并从 eclipse 启动我的应用程序时，图标的质量差异很大！果冻豆很难看。

到底是怎么回事？？

![集成电路](../Images/7901884a1c5db2605d4bd8213953b8ad.png) ![果冻豆](../Images/e2519aa06c2646e4a8b591c826fe6434.png)

**部分清单**

```
 <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="14" />

    <supports-screens
        android:anyDensity="false"
        android:largeScreens="false"
        android:normalScreens="true"
        android:smallScreens="false" >
    </supports-screens>

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:43:08.617

`supports-screen`从清单中删除标签（特别是`anyDensity`属性）。根据文档：

> 安卓：任意密度
> 
> 指示应用程序是否包含可适应任何屏幕密度的资源。对于支持 Android 1.6（API 级别 4）及更高版本的应用程序，默认情况下这是“真”，**除非您绝对确定应用程序必须运行，否则不应将其设置为“假”。**唯一可能需要禁用此功能的情况是您的应用程序直接操作位图（有关更多信息，请参阅 Supporting Multiple Screens 文档）。

我不确定4.0 和 4.1 之间*到底*`anyDensity`发生了什么会导致差异，但在大多数情况下，在非常特定的情况下设置标签是一个坏主意。只要您提供了默认资源（例如在非特定`drawable`文件夹中），您就不需要指定它。

# authentication - Symfony2：实现 UserInterface 的用户实体类：使用电子邮件而不是用户名

> ID：12566696
> 
> 赞同：1
> 
> 时间：2012-09-24T14:04:57.433
> 
> 标签：authentication, logging, symfony

我正在尝试使用 symfony2 登录。我有我的实体类连接到数据库。在我的表中，我只有用户的电子邮件，即用户名。如果我知道我没有真实的用户名，我应该使用 getUsername() 方法吗？

当我尝试删除此方法时，我收到一条致命错误消息：

```
Fatal error: Class MDPI\BackendBundle\Entity\Users contains 1 abstract method and must therefore be declared abstract or implement the remaining methods (Symfony\Component\Security\Core\User\UserInterface::getUsername) in /home/milos/workspace/mdpi-login2/src/MDPI/BackendBundle/Entity/Users.php on line 768 
```

我应该使用

```
getUsername()
{
  return this->email;
} 
```

或者有更好的方法吗？？？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:21:13.263

使用本机 Symfony SecurityBundle，您只需指定您用作登录字符串的实体字段，在`app/config/security.yml`：

```
security:

    encoders:
        MDPI\BackendBundle\Entity\User: plaintext

    providers:
        entity:
            entity: { class: MDPI\BackendBundle\Entity\User, property: email }

    firewalls:
        ... 
```

# r - 在 R 的 ggplot2 中，如何反转条形颜色的顺序？

> ID：12566697
> 
> 赞同：4
> 
> 时间：2012-09-24T14:04:57.547
> 
> 标签：r, ggplot2

我在 ggplot2 中有一个简单的条形图。我的条形图使用“灰色”刻度；默认顺序是从左到右从最暗到最亮。这是我的代码的样子：

```
 ggplot.3plus<-ggplot(summary.3plus, aes(x=sp1, y=fract.mean, fill=age.cat)) + 
  geom_bar(position=position_dodge())+ coord_cartesian(ylim = c(1, 1.175))+
  geom_errorbar(aes(ymin=fract.mean-se, ymax=fract.mean+se),
                width=.2,                    # Width of the error bars
                position=position_dodge(.9))
  ggplot.3plus<-ggplot.3plus+scale_fill_grey() 
```

我想将灰色的颜色顺序从左到右从最亮到最暗，同时保持条形本身的顺序相同。我用来反转颜色渐变顺序的代码似乎不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T14:20:51.747

使用可重现的示例会更容易，但是：

```
y + scale_fill_grey(start=0.8, end=0.2) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-15T23:13:49.707

你可以试试 `+ scale_y_reverse()`

# regex - 具有二级 Tld 的电子邮件正则表达式

> ID：12566699
> 
> 赞同：0
> 
> 时间：2012-09-24T14:05:01.530
> 
> 标签：regex, email-validation

我正在尝试创建一个 EMAIL 正则表达式。这就是我想要实现的目标：

“_A-Za-z0-9-”，可选后跟“.[_A-Za-z0-9-]”，并以“@”符号结尾。电子邮件的域名必须以“A-Za-z0-9”开头，后跟第一级 Tld (.com, .net) “.[A-Za-z0-9]”，可选后跟第二级 Tld ( .com.au, .com.my) “.[A-Za-z]{2,}”，其中二级 Tld 必须以点“.”开头 并且长度必须等于或大于 2 个字符。

这是我到目前为止所拥有的：

```
([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\w?\.[A-Za-z]{2,}) 
```

不为我工作。我希望它验证这些电子邮件：

```
myname@compgg.com
ffdicot@foobar.com.au
i3dicot@foobar.co.uk 
```

并不是：

```
myname@foobar.foo.bar.com 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:25:28.500

不。

这是对应于 RFC2822 的正则表达式：

```
(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]) 
```

最好将其实现为单独的功能，每个功能检查不同的要求......

# c# - 静态只读字典出错

> ID：12566701
> 
> 赞同：-1
> 
> 时间：2012-09-24T14:05:09.463
> 
> 标签：c#, dictionary, static, readonly, public

我在编译这些代码行时出错：

```
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace test
{
    public class testing
    { 
        public static readonly string IN_TABLE_KEY = "IN";
        public static readonly string OUT_TABLE_KEY = "OUT";
        public static readonly string TODAY_TABLE_KEY = "TODAY";
        public static readonly Dictionary<string, string> TEST =
            new Dictionary<string, string>()
            {
                { IN_TABLE_KEY, "TEST1"},
                { OUT_TABLE_KEY, "TEST2"},
                { TODAY_TABLE_KEY, "TEST3"}
            };
    }
} 
```

我真的不明白，这段代码无法编译，我不知道这个错误是关于语法还是代码中的其他地方。

这是我得到的语法错误：

> ; 预期 类、结构或接口成员声明中的无效标记“{” 命名空间不直接包含成员，例如字段或方法 类型或命名空间定义，或预期文件结尾

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:07:47.810

似乎您将声明放在类声明之外。

尝试这个：

```
namespace MyNamespace
{
   public class MyClass
   {
      public static readonly string IN_TABLE_KEY = "IN";
      public static readonly string OUT_TABLE_KEY = "OUT";
      public static readonly string TODAY_TABLE_KEY = "TODAY";
      public static readonly Dictionary<string, string> TEST = 
          new Dictionary<string, string>()
             {
                { IN_TABLE_KEY, "TEST1" },
                { OUT_TABLE_KEY, "TEST2" },
                { TODAY_TABLE_KEY, "TEST3" }
             };
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:08:47.190

查看错误，您似乎忘记将其放在类中，或者忘记了命名空间声明。

.NET 中不能有全局字典

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:09:59.827

尝试在类中声明它，而不是在任何方法中，如下图所示。

![在此处输入图像描述](../Images/242cc0a57ebe01c5260ab05a47b5e2c4.png)

# rightfax - RightFax COM DLL - 成功的传真传输

> ID：12566709
> 
> 赞同：0
> 
> 时间：2012-09-24T14:05:42.630
> 
> 标签：rightfax

我正在使用似乎可以正常工作的 RightFax COM DLL，但我需要知道传真传输是否成功。

是否有可以设置的属性将通过电子邮件向用户发送成功的传真传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:37:39.523

如果您希望此人通过电子邮件收到通知 - 我只需在 Enterprise Fax Manager 中设置他们的帐户即可收到电子邮件通知。这将是最简单的，并且不需要任何开发工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T10:05:34.563

您可以创建一个 Windows 服务，使用其句柄 ID 不断检查传真列表。发送传真后，handle 的值将被填充（objFax.Handle）。<传真发送前为空>。

Windows 服务会定期检查传真状态。您可以使用句柄值查找您的传真。传真可以作为 XML objUser.Folders["Main"].Faxes.XML 进行改写。

使用 LINQ 或任何其他 XML 解析代码，通过句柄搜索您的传真，并查找“FaxStatusEx”属性值。6 完成发送。

状态值列表：fsUnborn = 0, fsNeedsFCS = 1, fsNeedsConversion = 2, fsNeedsToBeSent = 3, fsInConversion = 4, fsInSend = 5, fsDoneOK = 6, fsManualFCS = 7, fsInSchedule = 8, fsDoneError = 9, fsDuplicate = 10, fsError = 11, fsNeedsAttention = 12, fsNeedsAttachment = 13, fsHeldForPreview = 14, fsInOCR = 15, fsInPrint = 16, fsQueuedForPrinting = 17, fsQueuedForOCR = 18, fsInValidation = 19, fsInApproval = 20,

# grails - 如何使用 build-test-data 插件对 Grails 2 应用程序进行 mavenize

> ID：12566710
> 
> 赞同：2
> 
> 时间：2012-09-24T14:05:57.487
> 
> 标签：grails, grails-plugin

我正在尝试对使用 build-test-data-2.0.3 的 grails 2.1 应用程序进行 mavenize，由于某种原因它无法导入 grails.test.mixin.support.*。

我认为这与范围有关，所以我尝试了不同的范围，但没有帮助。

我的假设是 grails.test.mixin.support 并且其他要求已经与 grails 核心一起下载，我是否需要为此插件添加任何特定的依赖项？

谢谢

我得到的错误是：

```
 package grails.test.mixin.support does not exist 
```

以下是创建问题需要做的事情：

1-创建应用程序delme

2-添加构建测试插件

3- 创建 pom com.company

4- mvn 安装

这是我对 pom 的依赖：

```
 <dependency>
    <groupId>org.grails.plugins</groupId>
    <artifactId>build-test-data</artifactId>
    <version>2.0.3</version>
    <scope>compile</scope>
    <type>zip</type>
</dependency> 
```

构建配置：

```
plugins {
    runtime ":hibernate:$grailsVersion"
    runtime ":jquery:1.7.2"
    runtime ":resources:1.1.6"

    // Uncomment these (or add new ones) to enable additional resources capabilities
    //runtime ":zipped-resources:1.0"
    //runtime ":cached-resources:1.0"
    //runtime ":yui-minify-resources:0.1.4"

    build ":tomcat:$grailsVersion"

    runtime ":database-migration:1.1"

    compile ':cache:1.0.0'
} 
```

![在此处输入图像描述](../Images/05576c38af53fdf43d340cc7b3da9eea.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:21:05.680

如果有人遇到 maven 无法编译某些类的类似问题，这可能对他们有所帮助。

就我而言，maven 抱怨的是 build-test-data 插件使用的一些类。问题是 Maven 不知道 build-test-data 在这种情况下使用的那些类是 grails.test.mixin.support.MixinMethod。这是 grails-plugin-testing 包的一部分。

Maven 需要知道它才能将它放在类路径中（我假设），如果找不到它，将无法编译它。我需要做的只是将该依赖项添加到 maven，因此 maven 可以将其放入类路径中。

感谢jpearlin 的回复帮助我解决了这个问题[。](http://grails.1312388.n4.nabble.com/mavenized-grails-project-td3571270.html)

我添加了这个依赖，问题就解决了。

```
 <dependency>
              <groupId>org.grails</groupId>
              <artifactId>grails-plugin-testing</artifactId>
              <version>${grails.version}</version>
              <scope>test</scope>
        </dependency> 
```

# objective-c - NSDateFormatter 问题：用反斜杠显示时间

> ID：12566711
> 
> 赞同：0
> 
> 时间：2012-09-24T14:06:00.833
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我正在创建一个日期和时间字符串，用于为保存到文档目录的文件添加时间戳。一切正常，除了时间一直显示为 08/42/43 而不是 08:24:43。我不确定反斜杠是从哪里来的。

这是我得到的文件名“2012_09_24_08/42/43.cmm”。我添加了下划线，因为我不希望日期使用反斜杠。唯一的问题是时间有反斜杠。这是实际的代码。

```
NSDate *myDate = [NSDate date];
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy_MM_dd '_' hh:mm:s"];
NSString *dateForFilename = [df stringFromDate:myDate]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:16:28.490

发生这种情况是因为 ':' 不是文件名的有效字符（至少对于 OSX 和 iOS 而言），因此系统回退到 '/'。如果您尝试这样的事情，它应该可以正常工作：

```
[df setDateFormat:@"yyyy_MM_dd_hh-mm-s"]; 
```

# .net - RestSharp 序列化忽略 ElementName 值

> ID：12566716
> 
> 赞同：2
> 
> 时间：2012-09-24T14:06:06.487
> 
> 标签：.net, xmlserializer, restsharp

我正在使用 RestSharp 进行一些 REST 调用。我定义了 XmlElement ElementName 参数，期望 XmlSerializer 使用它，但它没有发生。

```
public class A {
    [XmlElement(ElementName = "id")]
    public int? Id { get; set; }
} 
```

RestSharp 请求是 with`<Id>123</Id>`而不是`<id>123</id>`.

```
var request = new RestRequest("/a.xml", Method.POST);
request.AddObject(A_obj); // A_obj is a instance of A
RestResponse<A> response = (RestResponse<A>)client.Execute<A>(request); 
```

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:33:29.350

RestSharp 忽略`XmlElement`注释。改为使用`SerializeAs`。

```
[SerializeAs(Name = "id")]
public int? Id { get; set; } 
```

# android - 当我做一个大表时，将堆栈跟踪写入“/data/anr/traces.txt”

> ID：12566717
> 
> 赞同：2
> 
> 时间：2012-09-24T14:06:17.193
> 
> 标签：android, stack

我正在用一张桌子做一个应用程序。每行有 3 个文本视图，并且行是动态生成的。

一切正常，但是当行数超过 15-20 时，我在 logcat 中看到此消息（大约 3 次）：

```
09-24 15:48:37.307: I/dalvikvm(32685): threadid=3: reacting to signal 3
09-24 15:48:37.337: I/dalvikvm(32685): Wrote stack traces to '/data/anr/traces.txt' 
```

（表格需要几秒钟才能显示出来，更多的行有更多的时间显示）。

有没有办法避免这个问题或者大桌子是正常的？

这是生成表的代码：

```
for (Esame e : Db.risposteDate){

        TableRow tr = new TableRow(this);

        TextView lbl1 = new TextView(this);
        TextView lbl2 = new TextView(this);
        TextView lbl3 = new TextView(this);
        tr.setGravity(Gravity.CENTER);
        lbl1.setGravity(Gravity.CENTER_VERTICAL);
        lbl3.setGravity(Gravity.CENTER);

        lbl1.setTextColor(android.graphics.Color.RED);
        lbl2.setTextColor(android.graphics.Color.RED);
        lbl3.setTextColor(android.graphics.Color.RED);

        lbl1.setLayoutParams( new TableRow.LayoutParams( 0, android.view.ViewGroup.LayoutParams.WRAP_CONTENT, 1 ) );
        lbl2.setLayoutParams( new TableRow.LayoutParams( 0, android.view.ViewGroup.LayoutParams.WRAP_CONTENT, 7 ) );
        lbl3.setLayoutParams( new TableRow.LayoutParams( 0, android.view.ViewGroup.LayoutParams.WRAP_CONTENT, 1 ) );

        lbl1.setText(e.getDomandaNum()+"");
        lbl2.setText(Html.fromHtml(e.getTesto()+"<br />"));
        lbl3.setText(e.getRispostaData());

        tr.addView(lbl1);
        tr.addView(lbl2);
        tr.addView(lbl3);
        tl.addView(tr);

} 
```

# c# - c# - 将查找缓存到层次结构的策略

> ID：12566720
> 
> 赞同：0
> 
> 时间：2012-09-24T14:06:21.903
> 
> 标签：c#, caching, dictionary

我查询这样的分层数据源：

```
repository.LookupValue(IEnumerable<string> ascendants) 
```

where`ascendants`是一个字符串列表，表示正在查找的节点的路径。

我想缓存这些查找的结果。我曾设想使用 a `Dictionary<IEnumerable<string>, long>`，但似乎在使用 a`IEnumerable<string>`作为字典键时，使用了引用相等，这对我没有好处。

我当然可以定义自己的类型包装`IEnumerable<string>`并覆盖它的`.Equals`方法，但这似乎很极端。

我错过了一个更简单的缓存问题解决方案吗？任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:12:28.107

使用 a`Dictionary`但使用接受 a 的构造函数`IEqualityComparer`。编写一个自定义实现来比较你的祖先集合并将其传入。

这是一个使用内置的示例（在这种情况下比较数组）`StructuralComparisons`。

```
 public class StringArrayComparer : IEqualityComparer<string[]>
    {
        public bool Equals(string[] x, string[] y)
        {
            return StructuralComparisons.StructuralEqualityComparer.Equals(x, y);
        }

        public int GetHashCode(string[] obj)
        {
            return StructuralComparisons.StructuralEqualityComparer.GetHashCode(obj);
        }
    } 
```

# c# - 从列表集合 c#/asp.net 填充下拉列表

> ID：12566721
> 
> 赞同：1
> 
> 时间：2012-09-24T14:06:21.400
> 
> 标签：c#, asp.net

***我有一个名为 memberdetails 和 memberdb 的类，它们是我的类库的一部分。我使用 asp.net C# 和 MSSQL 作为后端***

我的会员详情课程

```
 public int MemID
     {
        get { return memID; }      
     }

     public string FirstName
    {
        get { return firstName; }
        set { firstName = value; }
    }

     public MemberDetails(int memID, string firstName)
        {
        this.memID = memID;
        this.firstName = firstName;
        } 
```

成员数据库类

```
public List<MemberDetails> MemberResult(int memid)
    {  
        using (SqlConnection con = new SqlConnection(connectionString))         
        using (SqlCommand cmd = con.CreateCommand())
        {
            List<MemberDetails> memberdetails = new List<MemberDetails>();
            MemberDetails member;

            try
            {
                con.Open();
                cmd.CommandText = "usp_Member_Result";
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@memgen", memid);

                using (SqlDataReader reader = cmd.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        member = new MemberDetails((int)reader["memid"],  (string)reader["firstname"]);
                        memberdetails.Add(member);

                    }
                    reader.Close();
                    return memberdetails;                          
                 }
            }
            catch (SqlException err)
            {
                throw new ApplicationException("Data error.", err);
            }
            finally
            {            
                if (con != null)
                    con.Close();
            }
        }
    } 
```

***在将这些类编译成 DLL 并将其添加为对我的项目的引用后，我试图绑定我的 DropDownlist 以检索这些值。在代码隐藏页面中，我从 gridview 中获取一个值，将其放入变量“memgen”中，将其发送到我的方法，然后返回结果。当我调试我的应用程序时，我看到返回的值但是它们没有绑定到 DropDownList。***

代码隐藏页面

```
 member.MemberResult(memgen);
   // MemberDetails details = new MemberDetails();

    ddlFamilyMembers.DataTextField = "Text";
    ddlFamilyMembers.DataValueField = "Value"; 
  //  ddlFamilyMembers.DataSource = memberdetails; << "This does not exist in the current context"
    ddlFamilyMembers.DataBind(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:11:05.210

您的代码隐藏需要更改为如下所示：

```
List<MemberDetails> details = member.MemberResult(memgen); 

ddlFamilyMembers.DataTextField = "FirstName"; 
ddlFamilyMembers.DataValueField = "MemID";  
ddlFamilyMembers.DataSource = details;
ddlFamilyMembers.DataBind(); 
```

具体变化：

1.  捕获结果`MemberResult`
2.  使用正确的字段名称`DataTextField`和`DataValueField`
3.  设置`DataSource`属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:19:03.497

我认为问题在于您忘记添加下拉列表的数据源。

您可以如下所示进行：

```
var ddlvals = member.MemberResult(memgen); 

ddlFamilyMembers.DataTextField = "FirstName"; 
ddlFamilyMembers.DataValueField = "MemID";  
ddlFamilyMembers.DataSource = ddlvals;
ddlFamilyMembers.DataBind(); 
```

没有绑定是行不通的。我希望这对您的问题有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:09:08.260

```
List<MemberDetails> details = member.MemberResult(memgen); 

ddlFamilyMembers.DataTextField = "FirstName"; 
ddlFamilyMembers.DataValueField = "MemID";  
ddlFamilyMembers.DataSource = details;
ddlFamilyMembers.DataBind(); 
```

# blackberry - 在黑莓中，设置轨迹球灵敏度没有效果？

> ID：12566725
> 
> 赞同：3
> 
> 时间：2012-09-24T14:06:29.210
> 
> 标签：blackberry, trackball, rim-4.5, rim-5.0

我使用下面的代码来设置轨迹球的灵敏度

```
public class Main extends UiApplication {

    public static void main(String[] args) {
        Main theApp = new Main();
        theApp.enterEventDispatcher();
    }

    public Main() {
        if (Trackball.isSupported()) {
            Trackball.setFilter(Trackball.FILTER_ACCELERATION);
            Trackball.setSensitivityX(20);
            Trackball.setSensitivityY(20);
        }
        pushScreen(new LoginScreen());
    }
} 
```

这是使用的屏幕：

```
public class LoginScreen extends MainScreen {
    public LoginScreen() {
        super(MainScreen.NO_VERTICAL_SCROLL | MainScreen.NO_VERTICAL_SCROLLBAR);
        add(...) // SOME COMPONENTS ARE ADDED HERE
    }
} 
```

`LoginScreen`当我在using`Trackball.getSensitivityX()`和`Trackball.getSensitivityY()`in 中检查轨迹球的灵敏度时`navigationMovement`，它返回“2147483647”，同时如果我在立即设置后检查它`Main`返回“20”！

* * *

所以我将设置块移动到`LoginScreen`自身内部，如下所示：

```
 public class LoginScreen extends MainScreen {
        public LoginScreen() {
            super(MainScreen.NO_VERTICAL_SCROLL | MainScreen.NO_VERTICAL_SCROLLBAR);
            if (Trackball.isSupported()) {
                Trackball.setFilter(Trackball.FILTER_ACCELERATION);
                Trackball.setSensitivityX(20);
                Trackball.setSensitivityY(20);
            }
            add(...) // SOME COMPONENTS ARE ADDED HERE
        }
    } 
```

它还通过 using`Trackball.getSensitivityX()`和`Trackball.getSensitivityY()`in返回“2147483647” `navigationMovement`。

* * *

最后，基于一些网络搜索，我将条件移动到`navigationMovement`如下：

```
protected boolean navigationMovement(int dx, int dy, int status, int time) {
        if (Trackball.isSupported()) {
            Trackball.setFilter(Trackball.FILTER_ACCELERATION);
            Trackball.setSensitivityX(20);
            Trackball.setSensitivityY(20);
        }
        return super.navigationMovement(dx, dy, status, time);      
    } 
```

问题变成导航移动从索引 0 的字段跳转到索引 2 到索引 4 ......等每次移动都绕过字段！

**如何正确设置屏幕轨迹球的灵敏度？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:52:14.277

我也无法理解这个 API 设计，以我的经验，这些方法不起作用。作为一种解决方法，您可以在类中调用以下方法`Screen`：

[Screen.setTrackballSensitivityXOffset](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Screen.html#setTrackballSensitivityXOffset%28int%29)
[Screen.setTrackballSensitivityYOffset](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Screen.html#setTrackballSensitivityYOffset%28int%29)
[Screen.setTrackballFilter](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Screen.html#setTrackballFilter%28int%29)

使用前两种方法，您可以将作为参数传递的偏移量添加到当前用户敏感度。取值范围为[-100, 100]，特殊值`Integer.MAX_VALUE`也允许设置为“未设置”。（不要问我未设置是什么意思）。

现在是骇人听闻的部分。假设 100 是灵敏度的最大值，如果我们想将其设置为 100，我们首先需要获得期望值与实际值之间的差异。然后将灵敏度偏移设置到屏幕上。为简洁起见，我没有检查值是否在范围内：

```
int desiredSensitivityX = 100;  //your value here
int offsetX = desiredSensitivityX  - Trackball.getSensitivityXForSystem(); // make sure offset is not out of range
this.setTrackballSensitivityXOffset(offsetX); //here "this" is your screen 
```

您可以将该代码放在屏幕构造函数中。它仅适用于该屏幕。离开该屏幕后，灵敏度（实际上是偏移量）会恢复正常。

最后，同样在 screen 类中的最后一个方法允许您仅为该屏幕设置轨迹球过滤器。所以你可以把这一行放在你的构造函数中：

```
this.setTrackballFilter(Trackball.FILTER_ACCELERATION); 
```

离开屏幕后它应该会恢复正常。

希望能帮助到你。

# javascript - ExpressJS - 带有路由分离的 Socket.IO

> ID：12566731
> 
> 赞同：6
> 
> 时间：2012-09-24T14:06:43.330
> 
> 标签：javascript, node.js, socket.io, express

我试图了解 ExpressJS 和 Socket.IO。我将路线放在一个单独的文件中，我从我的 app.js 中包含该文件：

```
var express = require('express')    
  , db = require('./db')
  , mongoose = require('mongoose')
  , models = require('./models/device')
  , http = require('http')
  , path = require('path')
  , app = express()
  , server = http.createServer(app)
  , io = require('socket.io').listen(server)
  , routes = require('./routes/myRoutes'); 
```

但是，当我尝试从我的一条路线发出事件时，我没有引用 socket.io。

```
exports.update = function(req, res){
    return Item.findById(req.params.id, function(err, item) {
       // Do some checks and save.
       socket.emit('updated');
    }
} 
```

我理解为什么这可能不可用。相反，我不明白处理 socket.io 的最佳方法是从 app.js 以外的另一个文件中获取什么。我在看[这个问题](https://stackoverflow.com/questions/9709912/separating-file-server-and-socket-io-logic-in-node-js)（见里卡多的回答），但我仍然不清楚。理想情况下，我想避免这样做：

路线=需要（“路线/我的路线”）（io）；

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-22T02:34:12.857

好吧，您实际上并不需要 express.io。最简单的解决方案是导出一个新模块并将其传递给 socket.io 实例的引用。所以在你的 app.js 你有：

```
var express = require('express'),
  ...
  , server = http.createServer(app)
  , io = require('socket.io').listen(server)
  , routes = require('./routes/myRoutes'); 
```

现在需要一个新模块并将 socketio 引用传递给它。添加这个新行（在 app.js 中）这样做：

```
require('./app/path/to/your/socketio/controller/socketio')(io); 
```

然后在您的`path/to/your/socketio/controller`名为 socketio.js的新文件中创建一个新文件

最后在 socketio.js 文件中，导出你的新模块：

```
module.exports = function(io) {

    io.sockets.on('connection', function (socket) {

        socket.on('captain', function(data) {

            console.log(data);

            socket.emit('america');
        });
    });
}; 
```

你去吧！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T15:00:06.283

查看[express.io](http://express-io.org)

它具有实时请求的路由，以及许多其他有用的功能。

```
app = require('express.io')()
app.http().io()

app.io.route('example', function(req) {
    // do something interesting
}))

app.listen(7076) 
```

至于四处走动，必须通过`io`对象。您有几个选择，取决于您询问的对象，它们可能是“最好的”，也可能不是“最好的”。

*   制造`io`或`app`全球。（有些人对全局感到恐惧）
*   使用`module.exports`和`require`其他文件中的对象。（如果处理不当可能会导致循环依赖问题）

传递`io`对象可能是最干净最简单的方法，但您确实有选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T16:47:13.397

socket.io 不适用于路由，它适用于套接字。

将此代码添加到 app.js 或包含在 app.js 中的单独文件中：

```
io.sockets.on('connection', function (socket) {
  socket.on('update', function (your_id) {
    Item.findById(your_id, function(err, item) {
      socket.emit('send_update', item);
    }
  });
}); 
```

您的更新路线仅使用 javascript 呈现 html 文档，其中包含：

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost');
  socket.emit('update', { your_id: '1' });
  socket.on('send_update', function (data) {
    console.log(data);
  });
</script> 
```

因此，一旦页面呈现并完成，client-javascript 将打开一个到服务器的套接字并接收额外的数据。

在此处查看[更多示例。](http://socket.io/#how-to-use)

*免责声明：从头开始编写且未经测试的代码。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-05T02:11:42.260

最好的方法是使用闭包。前任：

```
exports.update = function(socket){
  return function(req, res) {
    //In here now you can have the reference to the socket io
    Item.findById(req.params.id, function(err, item) {
       // Do some checks and save.
       socket.emit('updated');
    }
  }
} 
```

和：

```
app.post('/your_path', update(io)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-19T15:53:17.867

我使用了[Expressjs](http://expressjs.com/guide/using-middleware.html#middleware.router)的中间件路由器（我使用的是 4.x）。

在外部路由文件中，我放置了“下一个”对象：

```
module.exports = function(app, settings){
    app.post('/something', function(req, res, next) {
    ...
    next();
    }
}; 
```

在主文件中，我在 io.on('connection') 中写入了最后一个路由跳：

```
io.on('connection', function (socket) {

    // Final route for middlewares who need to interact with socket.io
    app.post('/something', function (req, res, next) {
        socket.emit('event', { result: 'ok' });
    });

}); 
```

# java - Windows 上的 Java JNI 和依赖库

> ID：12566732
> 
> 赞同：10
> 
> 时间：2012-09-24T14:06:44.987
> 
> 标签：java, java-native-interface, java.library.path

长话短说：我有一个可执行的 jar，它调用`jni.dll`依赖于`lib.dll`. 我越来越害怕了`UnsatisfiedLinkError`。

[根据我的经验，这个](https://stackoverflow.com/a/6092576/95656)答案非常接近，但无法解决问题。即使在 中指定了 dll 所在的文件夹`java.library.path`，它也不起作用。我还必须更改 Windows`PATH`环境变量。事实上，`java.library.path`Windows 上的默认设置似乎是`PATH`.

有什么“漂亮”的方法来解决这个问题吗？我想为 Windows 构建一个安装程序，我想知道如何处理这个问题，这样最终用户就不必做任何手动工作。

**编辑：**

我实现的内容如下：该应用程序附带一个名为“native_libs”的文件夹，其中包含所有受支持架构的动态库。结构如下：

```
/
+- native_libs/
   +- windows/
   |  +- x86/
   |  |  +- ...
   |  +- x64/
   |     +- ...
   |
   +- linux/
   |  +- x86/
   |  |  +- ...
   |  +- x64/
   |     +- ...
   |
   +- libs/
      +- ... 
```

在运行时，当应用程序初始化时，会检测到正确的 JRE 架构和系统操作系统，并将正确的库文件复制到 libs/ 文件夹中。`java.library.path`也正在运行时设置以及使用常见的 hack 。最后，`PATH`使用本机启动器设置 Windows 的环境变量。

有改进的余地吗？也许将dll复制到与文件相同的目录中`jar`会消除设置`java.library.path`和`PATH`变量的需要？我还需要调查加载 dll `System.load()`，这将消除复制文件的需要。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T14:23:21.733

`java.library.path`指定`System.loadLibrary()`查找动态库文件的目录。如果您更改`java.library.path`代码中的系统属性，则不会产生任何影响。有一些技巧可以让 Java “忘记”初始值并重新评估`java.library.path`系统属性的内容。

但是，依赖库不是由 Java 加载的，而是由 Windows 加载的。Windows 不关心`java.library.path`，它只关心`PATH`环境变量。您唯一的选择是`PATH`针对您的 Java 进程进行调整。例如，如果您从批处理文件启动它，请`PATH`在调用 java 之前更改环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T01:52:21.547

最简单的解决方案是确保所有 .dll 都在 '.' 中。当你执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T17:53:03.053

将您的 jni.dll 依赖的 dll 放在您的“当前工作目录”中，`System.getProperty("user.dir")`在运行时检查它以了解您的“当前工作目录”是什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:52:49.967

如果问题是操作系统找不到依赖库，您是否尝试`System.loadLibrary()`在加载主库​​之前通过加载它？

# sql-server - 如何知道 SQL 中的时间格式？

> ID：12566733
> 
> 赞同：0
> 
> 时间：2012-09-24T14:06:50.333
> 
> 标签：sql-server

我从另一个数据源收到了本地数据库表中的一些值。

其中，Arrival Date 和 Arrival time 的格式类似于`20120913`. 我发现格式为`YYYYMMDD`，但暂时我无法找到他们使用的格式。就像`2522803`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:24:56.500

2522803 可能代表秒数，然后您可以使用以下查询进行检查：

```
select convert(varchar(8),dateadd(ss,2522803,0),108) 
```

我得到的结果是：04:46:43

# c - 我的错误是什么？

> ID：12566735
> 
> 赞同：0
> 
> 时间：2012-09-24T14:06:53.440
> 
> 标签：c, file-io, fopen, std

我的编译器说：保存未声明...我通过“FILE *save”声明它

```
FILE *save
save = fopen ("filename.txt", "w");

while ( current != NULL )
{
    fprintf (save, " %s %s %d", current -> name, current -> tel, current -> age);
    current = current -> next;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:08:25.270

```
FILE *save
save = fopen ("filename.txt", "w"); 
```

这里缺少分号：

```
FILE *save; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:08:35.380

你错过了一个分号

```
FILE *save 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:08:38.850

第一行末尾缺少分号？

```
FILE *save; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:09:10.817

你有一个失踪`;`：

```
FILE *save ;
           ^ 
```

# android - Android 添加新日历

> ID：12566736
> 
> 赞同：14
> 
> 时间：2012-09-24T14:07:06.137
> 
> 标签：android, api, calendar

我已经检查了所有从 Android 应用程序中创建新日历的方法。我见过的唯一方法是在最新的 api 版本中使用新的日历 API，但这似乎只有在你使用`CalendarContract.ACCOUNT_TYPE_LOCAL`. 它不会让您创建附加到用户 Google 帐户的日历，与`Google Calendar`. 它不会出现在[Google Calendar](http://www.google.com/calendar)的在线日历列表中。

```
values.put(CalendarContract.Calendars.ACCOUNT_TYPE, 
    CalendarContract.ACCOUNT_TYPE_LOCAL); 
```

我尝试使用 Account 中的帐户类型，但这不起作用。虽然它似乎没有产生任何错误。结果恢复正常。

```
values.put(CalendarContract.Calendars.ACCOUNT_TYPE, accountType); 
```

`Calendar API`这是使用and `SYNCADAPTER`（帐户类型已注释掉）添加新本地日历的完整代码。有谁知道我正在尝试做的事情是否可能？

```
AccountManager manager = AccountManager.get(context);
Account[] accounts = manager.getAccountsByType("com.google");

String accountName = "";
String accountType = "";

for (Account account : accounts) {
    accountName = account.name;
    accountType = account.type;
    break;
}

ContentResolver cr = context.getContentResolver();
ContentValues values = new ContentValues();

values.put(CalendarContract.Calendars.ACCOUNT_NAME, accountName);
//values.put(CalendarContract.Calendars.ACCOUNT_TYPE, accountType);
values.put(CalendarContract.Calendars.ACCOUNT_TYPE, CalendarContract.ACCOUNT_TYPE_LOCAL);
values.put(CalendarContract.Calendars.NAME, DaysSince.CAL_NAME);
values.put(CalendarContract.Calendars.CALENDAR_DISPLAY_NAME, DaysSince.CAL_NAME);
values.put(CalendarContract.Calendars.SYNC_EVENTS, 1);
values.put(CalendarContract.Calendars.VISIBLE, 1);
values.put(CalendarContract.Calendars.CALENDAR_ACCESS_LEVEL, CalendarContract.Calendars.CAL_ACCESS_OWNER);
values.put(CalendarContract.Calendars.OWNER_ACCOUNT, accountName);
values.put(CalendarContract.Calendars.DIRTY, 1);
values.put(CalendarContract.Calendars.CALENDAR_TIME_ZONE, TimeZone.getDefault().getID());

Uri calUri = CalendarContract.Calendars.CONTENT_URI;

calUri = calUri.buildUpon()
        .appendQueryParameter(CalendarContract.CALLER_IS_SYNCADAPTER, "true")
        .appendQueryParameter(CalendarContract.Calendars.ACCOUNT_NAME, accountName)
        .appendQueryParameter(CalendarContract.Calendars.ACCOUNT_TYPE, accountType)
        .build();

Uri result = cr.insert(calUri, values); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-27T12:10:45.373

是的，你可以做到。但是由于您想创建一个与您的 google 帐户链接的日历，因此您需要 Google Calendar API（没有找到使用 Android Calendar Provider 执行此操作的单一解决方案）。检查以下链接：

*   [适用于 Android 的 Google 日历 API](https://developers.google.com/google-apps/calendar/quickstart/android)

*   [插入新的 Google 日历](https://developers.google.com/google-apps/calendar/v3/reference/calendars/insert)

请务必检查他们的 API 浏览器。用于创建新日历的简单**HTTP 请求：**

`POST https://www.googleapis.com/calendar/v3/calendars?key={YOUR_API_KEY}`

```
{
 "summary": "My new google calendar"
} 
```

这是**响应**：

```
{
 "kind": "calendar#calendar",
 "etag": "__________etag_val_________",
 "id": "______id_goes_here______@group.calendar.google.com",
 "summary": "My new google calendar"
} 
```

之后，您应该能够使用日历提供程序从您的 Android 应用程序管理此日历（同步后）。

# perl - 如何在 perl-cgi 脚本中调用 cgi_error() 函数

> ID：12566751
> 
> 赞同：1
> 
> 时间：2012-09-24T14:07:57.063
> 
> 标签：perl, cgi

我有一个 perl -cgi 脚本，我需要根据 cgi_error() 发生的时间来测试一些东西。有人可以让我知道在什么情况下调用 cgi_error() 函数。我在下面试过

1.  更改了脚本的所有者和权限

但这到目前为止还没有帮助。

这是代码片段

```
use CGI qw(-compile :standard);
.....

 if (cgi_error()) {
...
} 
```

如果有人能解释何时在脚本中自动调用 cgi_error()，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:16:13.950

`cgi_error`不称为“自动” 。但是，根据情况，它会返回信息以查看是否出现问题。

从 CGI 文档：

> ### 检索 CGI 错误
> 
> 处理用户输入时可能会发生错误，尤其是在处理上传的文件时。当这些错误发生时，CGI 将停止处理并返回一个空参数列表。`cgi_error()`您可以使用该函数测试错误的存在和性质。错误消息被格式化为 HTTP 状态代码。您可以将错误文本合并到 HTML 页面中，也可以将其用作 HTTP 状态的值：
> 
> ```
> my $error = $q->cgi_error;
>   if ($error) {
>     print $q->header(-status=>$error),
>     $q->start_html('Problems'),
>     $q->h2('Request not processed'),
>     $q->strong($error);
>     exit 0;
>   } 
> ```
> 
> 使用面向函数的接口时（请参阅下一节），错误可能仅在您第一次调用`param()`. 做好准备！

和

> ### 处理中断的文件上传
> 
> 有时会出现涉及解析上传文件的问题。这通常发生在用户在上传完成之前按下“停止”时。在这种情况下，CGI.pm 将返回 undef 作为上传文件的名称，并设置`cgi_error()`为字符串“400 Bad request (malformed multipart POST)”。此错误消息旨在使您可以将其合并到要发送到浏览器的状态代码中。例子：
> 
> ```
> $file = $q->upload('uploaded_file');
>   if (!$file && $q->cgi_error) {
>     print $q->header(-status=>$q->cgi_error);
>     exit 0;
>   } 
> ```

和

> 尝试发送大于`$POST_MAX`字节的 POST 将导致 param() 返回一个空的 CGI 参数列表。您可以在创建 CGI 对象之后通过检查来测试此事件`cgi_error()`，或者，如果您使用的是面向函数的接口，`param()`则第一次调用。如果 POST 被拦截，则`cgi_error()`返回消息“413 POST too large”。

# svg - 在 raphael.js 中调整笔画宽度的大小发生了荒谬的变化

> ID：12566753
> 
> 赞同：2
> 
> 时间：2012-09-24T14:08:00.870
> 
> 标签：svg, raphael, transform, scale

我有两个相似的 svg 对象。我将其中一个缩放 3 并做一些事情。之后，我将其调整为原始大小（按 1 缩放）。不过，奇怪的是它的笔画宽度变化了，变小了。

这是一个错误还是我错过了什么？有没有简单的解决方法/黑客？我正在画无数的形状。任何帮助，将不胜感激。

完整的代码是

```
pageWidth = $(window).width();
pageHeight = $(window).height();
r = Raphael("holder",pageWidth, pageHeight);

r.setStart();
circ = r.circle(250,250,100,100).attr({'stroke-width':10, 'fill':'green'});
rct = r.rect(200,200,100,100).attr({'stroke-width':2,'fill':'grey'});

st = r.setFinish();

circ2 = r.circle(350,450,100,100).attr({'stroke-width':10, 'fill':'green'});
rct2 = r.rect(300,400,100,100).attr({'stroke-width':2,'fill':'grey'});

x = circ.attr('cx');
y = circ.attr('cy');

setTimeout(function(){st.animate({'transform':'s3,3,'+x+','+y},1500)},1000);

setTimeout(function(){st.animate({'transform':'s1,1'},1500)},3000); 
```

[http://jsfiddle.net/WFtaG/23/](http://jsfiddle.net/WFtaG/23/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T23:04:56.970

我遇到了同样的问题。

具体来说，当鼠标悬停在圆上时，使用动画来增加圆的大小，笔画宽度变为动画期间应有的~1/2，并且在随后的动画中，它会在“增长”期间恢复到适当的大小" 动画，但在该动画结束时再次变为半角，并在“缩小”动画期间和之后保持半角。宽度的变化不是动画的——例如，在增长（有反弹）动画的最后一端，线条会“弹出”到较细的宽度。这与上面原始问题中 jsfiddle 示例的不当行为有些不同，但以下修复程序修复了这两个问题。

受 Phillippe Deschaseaux 的[文章](http://ehouais.net/2012/04/real-vector-graphics-know-how-to-scale/ "问题说明")（由 Neil 上面的评论指出）和 Phillippe 对类似问题的[修复](https://github.com/DmitryBaranovskiy/raphael/pull/566/files "拉取请求")的启发，我发现类似的修复解决了这个问题。

具体来说，在 raphael.js 中注释掉以下 6 行：

```
 case "stroke-width":
                    //if (o._.sx != 1 || o._.sy != 1) {
                    //    value /= mmax(abs(o._.sx), abs(o._.sy)) || 1;
                    //}
                    //if (o.paper._vbSize) {
                    //    value *= o.paper._vbSize;
                    //}
                    node.setAttribute(att, value); 
```

（是的，这就是 DraganS 的评论（对他接受的答案）表明问题可能出在哪里。）

Phillippe 对他的问题的解决方法是消除最后三行注释，它们在调整容器大小时调整笔触宽度（Phillippe 正在做的事情），而我的问题的解决方法是消除前三行，它调整笔触宽度基于对象的比例（我在做什么）。当然，消除所有 6 行可以解决这两个问题。

我怀疑这是一个平台相关的问题。（我正在使用 Safari。）在这种情况下，对 raphael.js 的正确修复将比仅仅删除这六行更复杂，也许可以解释为什么它还没有被修复（以及为什么这六行曾经写在第一名）。

换句话说，如果你的代码需要在各种浏览器上正确运行，你应该做一些检查，看看哪些浏览器/版本需要这六行，哪些需要它们。如果您这样做，请务必向 Dmitry Baranovskiy 发送便条！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T22:16:54.667

试试这个

```
setTimeout(function(){st.animate({'transform':'s3,3,'+x+','+y},1500)},1000);
setTimeout(function(){st.animate({'transform':'s1,1,'+x+','+y},1500)},3000); 
```

​</p>

据我所知，这是关于抗锯齿的。你可以试试这个：

```
//setTimeout(function(){st.animate({'transform':'s3,3,'+x+','+y},1500)},1000);
//setTimeout(function(){st.animate({'transform':'s1,1'},1500)},3000);
setTimeout(function(){st.animate({'transform':'t1,1'},15000)},3000); 
```

# git - 通过 Git 将我的本地 Web 应用程序上传到远程服务器？

> ID：12566754
> 
> 赞同：0
> 
> 时间：2012-09-24T14:08:03.320
> 
> 标签：git, phpfog

我一直在尝试在 PHP Fog 上获取我的 Web 应用程序的副本，但它需要由 Git 发送。我对 Git 完全陌生，老实说，我不明白。我遵循了几个教程（我发现最好的是[http://rogerdudler.github.com/git-guide/](http://rogerdudler.github.com/git-guide/)），但我仍然无法上传我的网络应用程序。据我了解，我需要先将我的本地文件添加到一个新的 git 存储库中。然后我需要将此存储库“推送”到远程服务器的存储库。

在这最后一步我得到一个错误；“更新被拒绝，因为您当前分支的尖端位于其远程对应分支之后。在再次推送之前合并远程更改”。我完全不知道如何从这里继续下去。

如果你想在你的例子中使用任何路径（或其他变量），这些（我相信）在我的例子中是需要的：

```
local folder:  
     C:\wamp\www\webgame
clone command provided by PHP Fog: 
     $ git clone git@git01.phpfog.com:webgame.phpfogapp.com 
```

如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:16:39.627

remore 服务器的存储库上有一些较早的推送。[拉取更改](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html)，[合并](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)，然后[推送](http://www.kernel.org/pub/software/scm/git/docs/git-push.html)您的变更集。

# java - Intellij 警告 - 通用未经检查的分配

> ID：12566757
> 
> 赞同：4
> 
> 时间：2012-09-24T14:08:17.333
> 
> 标签：java, generics, unchecked

> **可能重复：**
> [Java 泛型，使用类层次结构时如何避免未经检查的赋值警告？](https://stackoverflow.com/questions/5309922/java-generics-how-to-avoid-unchecked-assignment-warning-when-using-class-hierar)

Intellij 在下面给我警告。不知道如何解决它，或者即使我需要解决它。警告详细信息说它仅适用于 JDK 5，而我使用的是 6。我想知道是否需要对此做出回应，如果需要，如何回应？

方法调用导致警告

```
List<T> refObject = cache.getCachedRefObject(cacheKey, List.class); 
```

被调用的方法

```
public  <T> T getCachedRefObject(String objectKey, Class<T> type) {
    return type.cast(refObjectCache.get(objectKey));
} 
```

警告详情

```
Unchecked Assignment
JDK 5.0 only. Signals places where an unchecked warning is issued by the compiler, for example:
    void f(HashMap map) {
        map.put("key", "value");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:10:50.537

听起来你有旧版本的 IntelliJ。此警告实际上意味着 Java 5.0+ 和 AFAIK，当 IntelliJ 支持 Java 6 时已更改，因此警告存在但没有说“仅限 JDK 5.0”（它现在支持 Java 8）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:46:54.700

已经为此使用了超类型令牌，我认为如果不使用额外的方法从缓存中检索集合并验证它们的内容是否属于正确的类型，就无法使这种类型安全。

您的选择是：

1.  做上面的，看起来很费力
2.  如果您知道它是正确的，请禁止在客户端代码中进行未经检查的强制转换。
3.  将客户端代码替换为`List<?> refObject = cache.getCachedRefObject(cacheKey, List.class);`

其中唯一的类型安全变体是 3.，因为它阻止您执行编译器无法证明是类型安全的操作。明显的缺点是您可能无论如何都想做其中的一些操作。

# android - Android：用数据库填充 ListView

> ID：12566763
> 
> 赞同：2
> 
> 时间：2012-09-24T14:08:38.847
> 
> 标签：android, sqlite, listview

在遵循了几个没有成功的例子之后，我发现自己在这个问题上陷入了死胡同。我遇到的问题是如何`ListView`从数据库中填充数据。

目的是使用列表视图创建一个屏幕，该屏幕仅从数据库中显示名称列，然后选择项目时，应用程序进入新屏幕，其中它显示与该项目相关的其他数据。

我想帮助理解的事情是`ListView`从我的数据库表“联系人”中的“名称”列中填充数据，然后根据所选项目从数据库的行中获取数据。

这是 ContactsMenu 类的代码，其中将显示名称。

```
package com.emailandcontactmanager;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

public class ContactsMenu extends Activity {

    ListView listView;
    public static final String fields[] = { DatabaseSetup.colName};
    Cursor cursor;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.managecontacts);
        listView = (ListView) findViewById(R.id.lstContacts); 
        DatabaseSetup.init(this); 

        Button btnAddItem = (Button) findViewById(R.id.btnAddContact);
        btnAddItem.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent addItem = new Intent(v.getContext(), AddContact.class);
            startActivity(addItem);
        }
        });
    }
        @Override
        protected void onPause() {
            listView.setAdapter(null);
            cursor.close();
            DatabaseSetup.deactivate();
            super.onPause();
        }

        @Override
        protected void onResume() {
            super.onResume();
            DatabaseSetup.init(this);
            cursor = DatabaseSetup.getContactNames();
            SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.row, cursor, fields, new int[] {R.id.item_text});
            listView.setAdapter(adapter); 
        }

    DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() { 
        public void onClick(DialogInterface dialog, int which) { 
            switch (which){ 
            case DialogInterface.BUTTON_POSITIVE: 
                finish();
                break; 

            case DialogInterface.BUTTON_NEGATIVE: 
                //Nothing happens on No button click, and the menu closes
                break; 
            } 
        } 
    }; 

    @Override
    public boolean onCreateOptionsMenu(Menu mainmenu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.mainmenu, mainmenu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        final CharSequence[] items = {"Contacts list", "Add Contact"};

        switch (item.getItemId()) {
            case R.id.help:     AlertDialog.Builder builder = new AlertDialog.Builder(this);
                                builder.setTitle("Select a function to revice information about it.");
                                builder.setItems(items, new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog, int selected) {
                                        switch(selected){
                                        case 0:
                                            Toast.makeText(getApplicationContext(),
                                                    "Allows you to view the selected item and make editations to it or delete it.",
                                                    Toast.LENGTH_LONG).show();
                                            break;
                                        case 1:
                                            Toast.makeText(getApplicationContext(),
                                                    "Allows you to add a new contact by bringing up a screen where the nececary information can be entered.",
                                                    Toast.LENGTH_LONG).show();
                                        }
                                    }
                                });
                                builder.show();
                                break;

                                case R.id.back:     AlertDialog.Builder builderBack = new AlertDialog.Builder(this); 
                                                    builderBack.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener) 
                                                    .setNegativeButton("No", dialogClickListener).show(); 
                                break;
        }
        return true;

    }
} 
```

数据库设置类

```
package com.emailandcontactmanager;

import android.content.ContentValues; 
import android.content.Context; 
import android.database.Cursor; 
import android.database.sqlite.SQLiteDatabase; 
import android.database.sqlite.SQLiteOpenHelper; 

/* 
 * usage:  
 * DatabaseSetup.init(egActivityOrContext); 
 * DatabaseSetup.createEntry() or DatabaseSetup.getContactNames() or DatabaseSetup.getDb() 
 * DatabaseSetup.deactivate() then job done 
 */ 

class DatabaseSetup extends SQLiteOpenHelper { 
static DatabaseSetup instance = null; 
static SQLiteDatabase db = null; 

public static void init(Context context) { 
    if (null == instance) { 
        instance = new DatabaseSetup(context); 
        } 
    } 

public static SQLiteDatabase getDb() { 
    if (null == db) { 
        db = instance.getWritableDatabase(); 
        } 
    return db; 
    } 

public static void deactivate() { 
    if (null != db && db.isOpen()) { 
        db.close(); 
        } 
    db = null; 
    instance = null; 
    } 

public static long createEntry(String name, String mail, String phone1, 
        String phone2, String address, String notes) { 
    ContentValues cv = new ContentValues(); 
    cv.put(colName, name); 
    cv.put(colMail, mail); 
    cv.put(colPhone1, phone1); 
    cv.put(colPhone2, phone2); 
    cv.put(colAddress, address); 
    cv.put(colNotes, notes); 
    return getDb().insert(contactsTable, null, cv); 

    } 

public static Cursor getContactNames() { 
    // TODO Auto-generated method stub 
    String[] columns = new String[] {"_id", colName }; 
    return getDb().query(contactsTable, columns, null, null, null, null, 
            null); 
    } 

DatabaseSetup(Context context) { 
    super(context, dbName, null, dbVersion); 
    } 

@Override 
public void onCreate(SQLiteDatabase db) { 
    // TODO Auto-generated method stub 
    db.execSQL("CREATE TABLE IF NOT EXISTS " + contactsTable 
            + " (_id integer primary key autoincrement, " + colName 
            + " TEXT NOT NULL, " + colMail + " TEXT NOT NULL, " + colPhone1 
            + " TEXT NOT NULL, " + colPhone2 + " TEXT NOT NULL, " 
            + colAddress + " TEXT NOT NULL, " + colNotes 
            + " TEXT NOT NULL)"); 

    db.execSQL("CREATE TABLE IF NOT EXISTS " + templatesTable 
            + " (_id integer primary key autoincrement, " + colSubject 
            + " TEXT NOT NULL, " + colBody + " TEXT NOT NULL)"); 

    db.execSQL("CREATE TABLE IF NOT EXISTS " + tagsTable 
            + " (_id integer primary key autoincrement, " + colTagName 
            + " TEXT NOT NULL, " + colContact + " TEXT NOT NULL)"); 

    } 

@Override 
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { 
    db.execSQL("DROP TABLE IF EXISTS " + contactsTable); 
    db.execSQL("DROP TABLE IF EXISTS " + templatesTable); 
    db.execSQL("DROP TABLE IF EXISTS " + tagsTable); 
    onCreate(db); 
    } 

static final String dbName = "DB"; 
static final int dbVersion = 1; 
static final String contactsTable = "Contacts"; 
static final String colName = "Name"; 
static final String colMail = "Email"; 
static final String colPhone1 = "Phone1"; 
static final String colPhone2 = "Phone2"; 
static final String colAddress = "Address"; 
static final String colNotes = "Notes"; 

static final String templatesTable = "Templates"; 
static final String colSubject = "Subject"; 
static final String colBody = "Body"; 

static final String tagsTable = "Tags"; 
static final String colTagName = "Name"; 
static final String colContact = "Contact"; 

} 
```

要添加到联系人菜单的类的代码。当我有一个临时显示器时，它曾经可以工作，但是，现在不行了。

```
package com.emailandcontactmanager;

import android.app.Activity;
import android.app.Dialog;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AddContact extends Activity
{

    Button saveContact;
    EditText contactName, contactMail, contactPhone1, contactPhone2, contactAddress, contactNotes; 

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newcontact);

        contactName = (EditText) findViewById(R.id.txtName);
        contactMail = (EditText) findViewById(R.id.txtMail);
        contactPhone1 = (EditText) findViewById(R.id.txtPhone1);
        contactPhone2 = (EditText) findViewById(R.id.txtPhone2);
        contactAddress = (EditText) findViewById(R.id.txtAddress);
        contactNotes = (EditText) findViewById(R.id.txtNotes);
       // saveContact = (Button) findViewById(R.id.btnSaveContact);

        Button btnSaveContact = (Button) findViewById(R.id.btnSaveContact);
        btnSaveContact.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                boolean working = true;

                try{
                    String name = contactName.getText().toString();
                    String mail = contactMail.getText().toString();
                    String phone1 = contactPhone1.getText().toString();
                    String phone2 = contactPhone2.getText().toString();
                    String address = contactAddress.getText().toString();
                    String notes = contactNotes.getText().toString();

                    DatabaseSetup entry = new DatabaseSetup(AddContact.this);
                    DatabaseSetup.getDb();
                    DatabaseSetup.createEntry(name, mail, phone1, phone2, address, notes);
                    entry.close();

                    }
                    catch(Exception e)
                    {
                        working = false;
                        String error = e.toString();
                        Dialog d = new Dialog(AddContact.this);
                        d.setTitle("Error");
                        TextView tv = new TextView(AddContact.this);
                        tv.setText(error);
                    }
                    finally
                    {
                        if(working)
                        {
                            Dialog d = new Dialog(AddContact.this);
                            d.setTitle("Success");
                            TextView tv = new TextView(AddContact.this);
                            tv.setText("The database changes have succeeded.");
                            d.setContentView(tv);
                            d.show();

                        }
                    }       
            }   
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:09:31.760

这是活动示例代码：

```
public class MainActivity extends Activity {
ListView listView;
public static final String fields[] = { DatabaseSetup.colName };
Cursor cursor;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.managecontacts);
    listView = (ListView) findViewById(R.id.lstContacts);
    DatabaseSetup.init(this);
    for (Integer i = 0; i < 120; ++i) {
        DatabaseSetup.createEntry("Name " + i, "Mail " + i, "Phone1 " + i,
                "Phone2 " + i, "Address " + i, "Notes " + i);
    }
}

@Override
protected void onPause() {
    listView.setAdapter(null);
    cursor.close();
    DatabaseSetup.deactivate();
    super.onPause();
}

@Override
protected void onResume() {
    super.onResume();
    DatabaseSetup.init(this);
    cursor = DatabaseSetup.getContactNames();
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.row, cursor, fields, new int[] { R.id.item_text });
    listView.setAdapter(adapter);
}

} 
```

这是 DatabaseSetup 示例代码：

```
/*
 * usage: 
 * DatabaseSetup.init(egActivityOrContext);
 * DatabaseSetup.createEntry() or DatabaseSetup.getContactNames() or DatabaseSetup.getDb()
 * DatabaseSetup.deactivate() then job done
 */

class DatabaseSetup extends SQLiteOpenHelper {
static DatabaseSetup instance = null;
static SQLiteDatabase db = null;

public static void init(Context context) {
    if (null == instance) {
        instance = new DatabaseSetup(context);
    }
}

public static SQLiteDatabase getDb() {
    if (null == db) {
        db = instance.getWritableDatabase();
    }
    return db;
}

public static void deactivate() {
    if (null != db && db.isOpen()) {
        db.close();
    }
    db = null;
    instance = null;
}

public static long createEntry(String name, String mail, String phone1,
        String phone2, String address, String notes) {
    ContentValues cv = new ContentValues();
    cv.put(colName, name);
    cv.put(colMail, mail);
    cv.put(colPhone1, phone1);
    cv.put(colPhone2, phone2);
    cv.put(colAddress, address);
    cv.put(colNotes, notes);
    return getDb().insert(contactsTable, null, cv);

}

public static Cursor getContactNames() {
    // TODO Auto-generated method stub
    String[] columns = new String[] { "_id", colName };
    return getDb().query(contactsTable, columns, null, null, null, null,
            null);
}

private DatabaseSetup(Context context) {
    super(context, dbName, null, dbVersion);
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL("CREATE TABLE IF NOT EXISTS " + contactsTable
            + " (_id integer primary key autoincrement, " + colName
            + " TEXT NOT NULL, " + colMail + " TEXT NOT NULL, " + colPhone1
            + " TEXT NOT NULL, " + colPhone2 + " TEXT NOT NULL, "
            + colAddress + " TEXT NOT NULL, " + colNotes
            + " TEXT NOT NULL)");

    db.execSQL("CREATE TABLE IF NOT EXISTS " + templatesTable
            + " (_id integer primary key autoincrement, " + colSubject
            + " TEXT NOT NULL, " + colBody + " TEXT NOT NULL)");

    db.execSQL("CREATE TABLE IF NOT EXISTS " + tagsTable
            + " (_id integer primary key autoincrement, " + colTagName
            + " TEXT NOT NULL, " + colContact + " TEXT NOT NULL)");

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + contactsTable);
    db.execSQL("DROP TABLE IF EXISTS " + templatesTable);
    db.execSQL("DROP TABLE IF EXISTS " + tagsTable);
    onCreate(db);
}

static final String dbName = "DB";
static final int dbVersion = 1;
static final String contactsTable = "Contacts";
static final String colName = "Name";
static final String colMail = "Email";
static final String colPhone1 = "Phone1";
static final String colPhone2 = "Phone2";
static final String colAddress = "Address";
static final String colNotes = "Notes";

static final String templatesTable = "Templates";
static final String colSubject = "Subject";
static final String colBody = "Body";

static final String tagsTable = "Tags";
static final String colTagName = "Name";
static final String colContact = "Contact";

} 
```

这是'res/layout/row.xml'

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/item_text"
android:layout_width="match_parent"
android:layout_height="wrap_content" /> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:03:39.650

您的堆栈跟踪表明问题是您没有指定列“_id”。你们没有一张桌子有它。您需要该列才能对光标适配器进行任何操作。这是这样说的文档：http: [//developer.android.com/reference/android/widget/CursorAdapter.html](http://developer.android.com/reference/android/widget/CursorAdapter.html)

只需添加列以确保您的表可以与 CursorAdapters 一起使用。

# c# - XNA 中的 Kinect 手部追踪

> ID：12566764
> 
> 赞同：1
> 
> 时间：2012-09-24T14:08:44.770
> 
> 标签：c#, xna, kinect

我正在尝试使用 Kinect 创建一个应用程序来模拟以下项目：

[Kinect 手部追踪](http://www.youtube.com/watch?v=QNzX_0cSaS8&feature=player_embedded)

我希望我的项目具有与 Kinect 跟踪手和手指位置类似的可用性，以便在菜单系统中使用或导航另一个系统。

我想知道的是；是否可以使用 Kinect 在 XNA 中完成完全相同的操作？

我知道它可以在 Winform / C# 中完成，但我更了解 XNA / C#，并且（理想情况下）更喜欢使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:52:37.957

试试这个，它是一个非常复杂的库来处理手指跟踪，应该不会太难移植到 XNA [http://candescentnui.codeplex.com/SourceControl/changeset/view/20148](http://candescentnui.codeplex.com/SourceControl/changeset/view/20148)

# c - x< >z C 中的评估顺序

> ID：12566770
> 
> 赞同：5
> 
> 时间：2012-09-24T14:08:54.033
> 
> 标签：c, evaluation

在 的情况下，C 中的评估顺序是什么`x<<y>>z`？是不是`(x<<y)>>z`因为从左到右的关联性？

**编辑** 需要知道标准说明了什么，而不是通过检查特定编译器来猜测发生了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T14:10:40.417

是的，`>>`并且`<<`是左关联的并且具有相同的优先级，所以`x << y >> z`等价于`(x << y) >> z`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T15:10:08.713

[在线 C 2011 标准草案 (N1570)](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

```
6.5.7 移位运算符

句法

1     *移位表达式*：
          *加法表达式*
          *移位表达式*<<*加法表达式*
          *移位表达式*>>*加法表达式*

```

语法表明两个运算符都是左结合的，如下所示：

```
    x << y >> z
    | | | |
    +------ + ------+ | |
            | | |
            五 | 五
      *移位表达式*        >>   *加法表达式*

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T14:12:10.577

是的，你是对的，因为 << 和 >> 运算符具有[相同的优先级并且是左关联的](http://en.cppreference.com/w/cpp/language/operator_precedence)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T14:11:39.413

两者`<<`和`>>`都在同一水平线上，它们的方向是从左到右。

所以它会是`(x<<y)>>z`

更多参考资料.. [http://msdn.microsoft.com/en-us/library/2bxt6kc4%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/2bxt6kc4%28v=vs.71%29.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-24T14:12:39.490

是的，但我认为分两步做会更安全，就像那样`x<<y`会`y>>z`导致编译器错误地解释`x<<y>>z`. 我一直没有使用按位运算，但如果我记得很清楚，这就是我所说的。我希望我对你有所帮助。

# c# - 从 C# 中查找允许用户更改打印机的 Excel 打印预览对话框

> ID：12566771
> 
> 赞同：1
> 
> 时间：2012-09-24T14:08:53.333
> 
> 标签：c#, excel, printing, print-preview

我正在从 C# 应用程序到 Excel 进行 Office 自动化。我正在尝试调出打印预览对话框（或带有预览选项的打印对话框）。我还希望用户能够选择与默认打印不同的打印。

我努力了

```
sheet1.PrintPreview(); 
```

和

```
sheet1.PrintOutEx(1, 1, 1, true); 
```

但我看不到用户选择其他打印机的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:46:45.317

是的，您的 Windows 应用程序有一个内置对话框。如果您有对 Excel 自动化`Application`对象的引用，您将能够调用 Excel 中几乎所有可用的内置对话框。

2 个您可能会觉得有帮助的链接：

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.dialogs.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.dialogs.aspx)

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlbuiltindialog.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlbuiltindialog.aspx)

示例：为了拉出打印预览对话框，您可以这样做：

```
var excelApp = new Excel.Application();
bool dialogResult =    
    excelApp.Dialogs[Excel.XlBuiltInDialog.xlDialogPrintPreview].Show(
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:11:52.973

You change the default printer of the Application object, and then print the worksheet, like so. You can get the printers installed on the computer from `System.Drawing.Printing.PrinterSettings.InstalledPrinters` and then display these to the user in some sort of dialogue, and then set the `ActivePrinter` of the Excel Application instance like so, and then display the Print Preview Dialogue:

```
using System.Drawing.Printing;
using Excel = Microsoft.Office.Interop.Excel;

Excel.Application application = new Excel.Application();
Excel.Workbook workbook = application.Workbooks.Add();
Excel.Worksheet worksheet = workbook.Sheets[1];

var printers = PrinterSettings.InstalledPrinters;

Console.WriteLine("Select printer (type the number):");
Console.WriteLine();

for (int i = 0; i < printers.Count; i++)
{
    Console.WriteLine("{0} - {1}", i, printers[i]);
}

int selection = Convert.ToInt32(Console.ReadLine());

application.ActivePrinter = printers[selection];
worksheet.PrintPreview(); 
```

# processing - 如何将处理草图导出为视频？

> ID：12566777
> 
> 赞同：12
> 
> 时间：2012-09-24T14:09:26.073
> 
> 标签：processing

我正在处理中创建 3D 可视化。我预计每一帧的绘制时间都会比将动画显示为程序所需的时间更长，因此我想将其导出为视频。

这可能吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T16:08:36.053

如果您不使用 Processing 2.0，您可以使用 MovieMaker 库将草图导出为视频（在处理 2.0 中，MovieMaker 将在工具中转换，但它还不能工作）。

其他选项是在您的 draw () 函数中使用 saveFrame() 方法

[在这里](http://www.supermanoeuvre.com/blog/?p=1067)您可以找到如何使用 MovieMaker 的示例

这里是 saveFrame() 方法的[文档](http://processing.org/reference/saveFrame_.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-20T16:10:18.930

[Video Export for Processing](http://funprogramming.org/VideoExport-for-Processing/)库允许从Processing 直接导出 mp4。不过，它要求您在系统上安装[ffmpeg](http://ffmpeg.org)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-01T11:10:01.443

[此处](http://gsvideo.sourceforge.net/)的 GSVideo 库在 Processing 2.0 中对此有所帮助。有一个类“GSMovieMaker”，其对象与上述非常相似。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-23T22:43:58.957

经过一周的研究，我使用 ffmprg 二进制文件为自己编写了非常简单的代码：

```
if(frameCount<628){
    saveFrame("temp/anim_#####.png");
  }else if(frameCount == 628){
    println("Saving file!");
    processBuilder = new ProcessBuilder("G:/.../ffmpg/bin/ffmpeg.exe", "-r", "60", "-i",
        "C:/.../temp/anim_%05d.png", "-c:v", "libx264",
        "-r", "30", "-pix_fmt", "yuv420p", "C:/.../test.mp4");
    try {
      process = processBuilder.start();
    } catch (Exception e) {
      e.printStackTrace();
    }
  } 
```

当然，您需要调整文件和 ffmpeg 二进制文件的路径（[https://www.ffmpeg.org/download.html](https://www.ffmpeg.org/download.html)）。它应该独立于处理版本，因为它仅使用 saveFrame 并调用外部二进制文件来生成视频。享受 ;）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-03T15:35:33.053

亲爱的可以使用Randel Shofer制作的程序，您只需修改8,10行代码即可在您的程序中使用它（如果您有更多时间，您可以在不修改源代码的情况下进行操作）。

程序（罐子）链接：[http ://www.randelshofer.ch/cubetwister/files/QuickTimeDemo2.jar](http://www.randelshofer.ch/cubetwister/files/QuickTimeDemo2.jar)

说明：[http ://www.randelshofer.ch/blog/2010/10/writing-quicktime-movies-in-pure-java/](http://www.randelshofer.ch/blog/2010/10/writing-quicktime-movies-in-pure-java/)

# data-warehouse - 做OLAP时不可能的情况

> ID：12566778
> 
> 赞同：0
> 
> 时间：2012-09-24T14:09:29.647
> 
> 标签：data-warehouse, olap, pentaho, cube

我有一个正常的星型模式，大约有 5 个维度和 1 个事实。这是关于图书租赁店的。

当我使用 Pentaho Analyzer 进行分析时。我遇到了我认为不可能发生的非常奇怪的情况。我拖动了我的“Book Rent Count”测量值，并从 Date Dimension 中拖动了“Quarter”字段。应该不可能显示重复的“季度”，但确实如此：

```
季度簿租金计数
1 1
3 1
4 2
4 1
4 1
4 2

```

什么条件应该让它不分组第 4 季度？无论是来自不同年份的第四季度，它都应该很好地分组。

这也发生在其他领域。有些东西阻止它分组。在数据库中，我已经为每个表提供了 utf8_general_ci 排序规则。

（当我尝试使用 Saiku 而不是 Pentaho 用户控制台进行分析时，发生的情况完全相同。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:57:07.040

也拖入年份，它会告诉你为什么你有重复。那些重复的季度是不同年份的。

架构 xml 中的“唯一名称”选项控制此行为。

如果您真的想按季度分组而不考虑年份，那么您将需要一个顶部没有年份的层次结构。（虽然不是 100% 确定这会有多大用处）

# iphone - presentViewController 在 iOS 6 中不支持方向

> ID：12566780
> 
> 赞同：14
> 
> 时间：2012-09-24T14:09:55.547
> 
> 标签：iphone, ios, uinavigationcontroller, orientation, ios6

我正在使用此代码

```
if ([self respondsToSelector:@selector(presentViewController:animated:completion:)])
    {
        [self presentViewController:navigationControllerCustom animated:YES completion:nil];
    }
    else
    {
        [self presentModalViewController:navigationControllerCustom animated:YES];
    } 
```

我的应用程序有两个方向纵向和纵向倒置。此代码适用于 iOS 5.1，但方向不适用于 iOS 6

我还在`navigationControllerCustom`课堂上添加了这段代码

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
}

-(NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-03T16:09:46.510

您必须将其包含在您的应用程序委托中：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

还要确保视图控制器都具有以下内容，对我来说可以正常工作。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

该文档还说，`UINavigationController's`它不会查询其顶部视图控制器以获取支持的方向，尽管开发者论坛上的一位 Apple 工程师确实这么说......似乎它没有。因此，您应该为 添加一个类别`UINavigationController`，这是我使用的类别：

```
#import "UINavigationController+autorotate.h"

@implementation UINavigationController (autorotate)

- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
}

@end 
```

有关 AutoRotate 如何在 iOS 6 上工作的更多信息，[请查看此答案](https://stackoverflow.com/a/12623916/662605)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T16:26:50.893

你忘了：

```
- (BOOL)shouldAutorotate {
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:12:32.563

只需将该代码段复制粘贴到您的代码上方即可

```
@implementation UINavigationController (rotation)
//temp hack for iOS6, this allows passing supportedInterfaceOrientations to child viewcontrollers.
- (NSUInteger)supportedInterfaceOrientations {
return [self.topViewController supportedInterfaceOrientations];
}

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T00:28:24.693

如果您打算为所有视图控制器启用或禁用旋转，则不需要继承 UINavigationController。而是使用：

```
 -(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window 
```

在您的 AppDelegate 中。

如果您计划支持应用程序中的所有方向，但父视图控制器（例如 UINavigationController 堆栈）上的不同方向，您应该使用

```
 -(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window 
```

结合您的父视图控制器中的以下方法。

```
 - (BOOL)shouldAutorotate 
```

和

```
- (NSUInteger)supportedInterfaceOrientations 
```

但是，如果您计划在同一个导航堆栈中的不同 CHILDREN ViewControllers 中有不同的方向设置（像我一样），您需要检查导航堆栈中的当前 ViewController。

我在 UINavigationController 子类中创建了以下内容：

```
 - (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    int interfaceOrientation = 0;

    if (self.viewControllers.count > 0)
    {
        id viewController;
        DLog(@"%@", self.viewControllers);
        for (viewController in self.viewControllers)
        {
            if ([viewController isKindOfClass:([InitialUseViewController class])])
            {
                 interfaceOrientation = UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
            }
            else if ([viewController isKindOfClass:([MainViewController class])])
            {
                 interfaceOrientation = UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
            }
            else
            {
                 interfaceOrientation = UIInterfaceOrientationMaskAllButUpsideDown;
            }
        }
    }
    return interfaceOrientation;
} 
```

由于您无法再从子 ViewControllers 控制呈现的视图控制器的旋转设置，因此您必须以某种方式拦截当前在导航堆栈中的视图控制器。所以这就是我所做的:)。希望有帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T07:15:33.607

子类 UINavigationController 并覆盖 shouldAutorotate 和 supportedInterfaceOrientations，如下所示：

```
-(BOOL)shouldAutorotate
{
    return self.topViewController.shouldAutorotate;
}

-(NSUInteger)supportedInterfaceOrientations
{
     return self.topViewController.supportedInterfaceOrientations;
} 
```

现在你可以控制你的方向是每个 ViewController。只需覆盖每个 ViewController 中的两个方法。

# javascript - 让 window.confirm 工作

> ID：12566782
> 
> 赞同：1
> 
> 时间：2012-09-24T14:10:07.607
> 
> 标签：javascript, onbeforeunload

我试图让 window.confirm 使用我正在使用的脚本，但它似乎不想工作。发生的情况是，如果该人按下取消它仍然运行代码，可悲的是现在我编写代码的方式弹出框甚至不会出现在 chrome 中。不知道为什么虽然我可以删除 window.confirm 方法并且它仍然会显示一个弹出框，但它只会运行脚本，无论您做出哪个选择。这是代码，谢谢您的帮助。

```
var validNavigation = false;

function wireUpEvents() {

var dont_confirm_leave = 0; to be able to leave withou confirmation
var leave_message = 'Leaving the page will terminate your Self-Service or Kiosk session.';

function goodbye(e) {
if (!validNavigation) 

    function goodbye() = {
    var x = window.confirm("Leaving the page will terminate your Self-Service or Kiosk session.")
    if (x)
    {
    window.onunload=leave;
    }    
    else            {
    return "" ;
    }
    }}

function leave() {
    if (!validNavigation) {
    killSession();
    }
    }

    //set event handlers for the onbeforeunload and onunloan events
    window.onbeforeunload=goodbye;
    //window.onunload=leave;

            }
    // Wire up the events as soon as the DOM tree is ready
    jQuery(document).ready(function() {
    wireUpEvents();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:14:32.990

您的代码中有语法错误。这是您重新格式化的代码，您可以看到您没有正确关闭函数：

```
var validNavigation = false;

function wireUpEvents() {
    var dont_confirm_leave = 0;
    var leave_message = document.getElementById("kioskform:broswerCloseSubmit");
    var leave_safari = document.getElementById("kioskform:broswerCloseSafari");

    function goodbye(e) {
        if (!validNavigation) {
            function disp_confirm() {
                var leaveMessage = confirm("Are you sure you want to leave")
                if (leaveMessage == true) {
                    if (dont_confirm_leave !== 1) {
                        if (!e) e = window.event;
                        //for IE
                        e.cancelBubble = true;
                        e.returnValue = leave_message.click();
                        //e.stopPropagation works in Firefox.
                        if (e.stopPropagation) {
                            e.stopPropagation();
                            e.preventDefault();
                        }
                        //return works for Chrome and Safari
                        leave_safari.click();
                        return '';

                        //add the code to delete the kiosk information here.
                        // this is what is to be done.
                    }
                } else {
                    alert("Returning to the page.")
                }
            }}
            window.onbeforeunload = goodbye;

            // Attach the event keypress to exclude the F5 refresh
            jQuery('document').bind('keypress', function(e) {
                if (e.keyCode == 116) {
                    validNavigation = true;
                }
            });
            // Attach the event click for all links in the page
            jQuery("a").bind("click", function() {
                validNavigation = true;
            });
            // Attach the event submit for all forms in the page
            jQuery("form").bind("submit", function() {
                validNavigation = true;
            });
            // Attach the event click for all inputs in the page
            jQuery("input[type=submit]").bind("click", function() {
                validNavigation = true;
            });
        }
        // Wire up the events as soon as the DOM tree is ready
        jQuery(document).ready(function() {
            wireUpEvents();
        }); 
```

更新：更新了代码，不知道是否还有语法错误，但是。我还缺少其他任何错误吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:02:16.080

您无法阻止某人离开该页面 - 如果他们想离开，他们可以。阻止此事件以通常的方式传播是行不通的。要显示弹出消息（通常由浏览器提供的文本包围）的方法是从 onbeforeunload 触发的函数中返回字符串。试试这个：

```
function goodbye() {
  if (!validNavigation)
    return "Are you sure you want to leave";
  else
    return "";
}
window.onbeforeunload = goodbye; 
```

# asp.net-mvc - 构建视图模型的业务逻辑

> ID：12566783
> 
> 赞同：3
> 
> 时间：2012-09-24T14:10:15.420
> 
> 标签：asp.net-mvc

我们的应用程序尽最大努力使控制器保持小型化，我们的视图与 UI 相关，并且我们为每个视图提供了一个 ViewModel，用于提取模型数据。我们使用 AutoMapper 可以将模型映射到视图模型中。

在某些情况下，我们需要大量代码来构建 ViewModel，虽然技术上可以在 AutoMapper 的 Map 功能中完成，但它变得庞大而丑陋。所以我们有一些逻辑，它已经进入了我们的一些 ViewModel，但是这些逻辑变成了 200 多行，而且感觉不正确。例如，对于一个 ViewModel，我们有大约 6 个属性，这些属性不是来自单个模型，而是来自大约 4-5 个模型，并且是动态的，因为它们是在运行时计算的，因此它不像从模型到我们的 ViewModel 中。

有没有其他人遇到过这个问题，或者发现需要为那些无法从单个模型轻松构建的 ViewModel 创建某种 ViewModel 工厂？

## 编辑

示例：假设您有一个课程页面，例如“Beginning French 101”。课程模型可能有老师、主题、先决条件、班级编号、部分等。当学生访问课程页面时，我可能想更改显示有关该班级（或其他班级）的附加信息的方式或内容学生的注册状态、注册、过去的历史、学生注册的其他课程等。我这里有两个模型，课程和学生，但我可能希望根据某些业务规则提取其他信息以包含在 ViewModel 中.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:14:03.963

如果它是一个业务逻辑，那么它不应该放在你的映射层中。`Dtos`在业务层中尽可能多地定义和准备对象。如果您的业务模型和视图模型之间存在如此巨大的差异，则意味着您可能需要另一层来将庞大的业务域模型转换为数据传输对象，以便更轻松地映射到视图模型。一般来说，您应该避免在映射层中放置复杂的业务逻辑。

不幸的是，如果没有您的特定代码示例，将很难进一步扩展。

# iphone - 如何用单指旋转和调整图像视图的大小

> ID：12566791
> 
> 赞同：5
> 
> 时间：2012-09-24T14:11:16.097
> 
> 标签：iphone, ios, uiimageview, rotation, image-resizing

我正在开发一个应用程序，该应用程序具有通过拖动其右下角按钮来调整和旋转图像视图的功能。

我看到一个应用程序的功能是，如果我们将右下角按钮对角拖动，则图像视图大小已调整大小，或者如果我们将按钮向左或右侧方向拖动，则图像视图已按方向旋转。我希望在我的应用程序中实现此功能

我正在努力实现单指旋转以及调整图像视图的大小。

我可以通过拖动其右下角按钮成功实现调整图像视图的大小。但我没有足够的知识来为图像视图添加旋转

请以正确的方式指导我。

我添加了下面的代码，通过拖动其右上角来调整图像视图的大小。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
UITouch *touch = [[event allTouches] anyObject];

    touchStart = [[touches anyObject] locationInView:imageView];
    isResizingLR = (containerVw.bounds.size.width - touchStart.x < kResizeThumbSize && containerVw.bounds.size.height - touchStart.y < kResizeThumbSize);

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
CGPoint touchPoint = [[touches anyObject] locationInView:imageView];
CGPoint previous=[[touches anyObject]previousLocationInView:imageView];

UITouch *touch = [[event allTouches] anyObject];

float  deltaWidth = touchPoint.x-previous.x;
float  deltaHeight = touchPoint.y-previous.y;

    if (isResizingLR) {
        containerVw.frame = CGRectMake(containerVw.frame.origin.x, containerVw.frame.origin.y,touchPoint.x + deltaWidth, touchPoint.y + deltaWidth); 
        imageView.frame = CGRectMake(imageView.frame.origin.x, imageView.frame.origin.y,touchPoint.x + deltaWidth, touchPoint.y + deltaWidth);                      
        dragIm.frame = CGRectMake(containerVw.frame.size.width-10, containerVw.frame.size.height-10,20,20);

    if (!isResizingLR) {
        containerVw.center = CGPointMake(containerVw.center.x + touchPoint.x touchStart.x,containerVw.center.y + touchPoint.y - touchStart.y);
    }
} 
```

![在此处输入图像描述](../Images/6c8298873a3c1e452c9135ce90a0fc07.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-18T10:47:06.923

我遇到了和你一样的障碍，所以我开发了自己的模块[ZDStickerView](https://www.cocoacontrols.com/controls/zdstickerview)。这将是很好的参考。

首先，确保您的视图的 autoresizingMask 应该是灵活的。

```
 autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight 
```

否则调整大小将无法正常工作。

其次，我推荐你使用“CGAffineTransformMakeRotation”和“atan2”函数来解决旋转问题，像这样：

```
 float ang = atan2([recognizer locationInView:self.superview].y - self.center.y,
                      [recognizer locationInView:self.superview].x - self.center.x);
    float angleDiff = deltaAngle - ang;
    self.transform = CGAffineTransformMakeRotation(-angleDiff); 
```

第三，一定要使用相对坐标，像这样：

```
 self.transform = CGAffineTransformMakeRotation(-angleDiff); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T12:28:37.373

我已经解决了这个问题并在 cocoacontrols 中上传了这个控件

[http://www.cocoacontrols.com/controls/tdresizerview](http://www.cocoacontrols.com/controls/tdresizerview)

和示例代码

[https://www.dropbox.com/s/yb0vzy0wao52bgt/SampeResizeView.zip](https://www.dropbox.com/s/yb0vzy0wao52bgt/SampeResizeView.zip)

**更新的答案**

[https://www.cocoacontrols.com/controls/zdstickerview](https://www.cocoacontrols.com/controls/zdstickerview)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-07T05:45:21.820

这可能会有所帮助，[https://github.com/zedoul/ZDStickerView](https://github.com/zedoul/ZDStickerView)。

具有 OneFingerRotation、缩放、调整大小和关闭功能的 IQStickerView。

特征：

1.  一指旋转刻度。
2.  一指调整大小。
3.  使用属性启用/禁用旋转、缩放、调整大小。
4.  自动管理多个 IQStickerView。
5.  也可以与 UIScrollView 一起使用。
6.  快速响应。

# mysql - mysql_query prefixing special characters with accented characters

> ID：12566794
> 
> 赞同：0
> 
> 时间：2012-09-24T14:11:29.473
> 
> 标签：mysql, character-encoding

I have an odd problem. I'm running MySQL 5.1 on Windows (but production server is Debian Linux and same issue occurs).

I'm using mysql_query() to UPDATE a table. The description field can occasionally have special characters like degree symbol, plus/minus, etc.

I have looked at the query before being sent to mysql_query() and it looks fine. I run the exact query through mysql client and it works fine. but passing the query to mysql_query() causes of of the special characters to be prefixed with an accented A:

BAKE AT 365 - 383 Â°F FOR 3 HOURS.

Not sure what the heck is going on here, any ideas? I've googled and tried setting everything to UTF-8 and more - whatever I could find.

I'm out of options, converting to html entities is not a option because this text is converted to PDF and various output in other technologies like Access 97 that don't render the entity properly - so the print out has `&deg;` which confuses the guys reading the documents.

Suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:16:20.987

UTF-8 中的度数符号恰好对应于 Latin-1 编码中的字符 Â°。您没有正确设置数据库连接编码，因此数据库误解了您发送的字符。连接数据库后设置[`mysql_set_charset`](http://php.net/mysql_set_charset)为。`'utf8'`

请参阅[在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)以及[每个程序员绝对、肯定需要了解编码和字符集以使用文本](http://kunststube.net/encoding/)以获取更深入的信息。

# php - 在 Symfony 1.4 中读取 CSV

> ID：12566795
> 
> 赞同：0
> 
> 时间：2012-09-24T14:11:30.813
> 
> 标签：php, symfony1, symfony-1.4, fgetcsv

我的项目在 Symfony **1.4 中（请记住版本）**

作为一项新要求，在管理面板中，管理员需要上传批量图像。为此，管理员将提供一个包含图像的 zip 文件和一个包含所需图像信息的 csv 文件。

[我之前使用fgetcsv](http://php.net/manual/en/function.fgetcsv.php)在核心 PHP 中处理了读取 CSV 任务。但是我很想知道 symfony 1.4 中是否有任何插件/内置支持作为读取 CSV 任务或在模型/控制器中循环[fgetcsv的更好方法（在性能/速度方面）是唯一的选择。](http://php.net/manual/en/function.fgetcsv.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:33:34.500

好吧，我不认为有一个函数或一个类可以比使用 PHP 函数快得多。

我进行了快速搜索，只存在 2 个插件：

*   [sfCsv插件](https://github.com/toaotc/sfCsvPlugin)
*   [tmCsv插件](http://trac.symfony-project.org/browser/plugins/tmCsvPlugin)

但他们都`fgetcsv`用来阅读每一行。您仍然可以使用它们以一种简洁而简洁的方式来读取 CSV 文件。

它们都有一个有趣的功能，允许您将模型中的单个表导出为 CSV 文件（使用 sfCsvPlugin 中的 Propel 和 tmCsvPlugin 中的 Doctrine）。

# css - CSS Syntax Coloring Not Working in Xcode 4.4.1

> ID：12566796
> 
> 赞同：8
> 
> 时间：2012-09-24T14:11:31.713
> 
> 标签：css, xcode

I recently upgraded Xcode to version 4.4.1, and now, CSS files don't take on the default syntax coloring associated with CSS files. A dash appears next to the "None" option under Editor | Syntax coloring. I have to manually check off the CSS option under Syntax coloring to associate colored syntax with CSS.

A last note: I don't use Xcode as an IDE, I use it as a text editor. All other languages I work in take on syntax coloring without a problem; this issue applies only to CSS.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:04:42.897

我以同样的方式使用 Xcode，并将它安装在两个系统上：Lion 和 Mountain Lion。该程序的版本同样是（4.6）。所以我找到了[解决方案](https://stackoverflow.com/questions/9784175/issue-with-code-autocompletion-syntax-highlighting-in-xcode-4-x/10245076#10245076)，尤其是这个：

> 首先，确保 Xcode 已关闭，然后通过在终端中输入来调高索引器警告消息级别： **defaults write com.apple.dt.Xcode IDEIndexingClangInvocationLogLevel 3**

有趣的是，这些解决方案完全解决了我在 Mountain Lion 中的问题，但对 Lion 没有帮助。

# asp.net - How to filter data in collection using asp.net with EF

> ID：12566798
> 
> 赞同：0
> 
> 时间：2012-09-24T14:11:33.287
> 
> 标签：asp.net, entity-framework

I am using EF in my project and i fill my Datagridview with collection see below...

```
 private void FillGrid()
        {
            int ID = Convert.ToInt32(Session["testID"]);
            var data = dbData.tbltest2.Where(x => x.ID== ID && x.testIsDeleted == false && x.testStatus == 1).ToList();
            if (data.Count > 0)
            {
                grdViewtestList.DataSource = data;
                grdViewtestList.DataBind();
                Session["JobListData"] = data;
            }
            else
            {
                grdViewtestList.DataSource = null;
                grdViewtestList.DataBind();
            }

        } 
```

i wont to use RowFilter with data which is i fill my Data Gridview . so can you please tell me how can i use rowfilter with collection in EF.

anyone please help me it's argent.

thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:58:38.810

您不能 -`RowFilter`是`DataSet`基于数据绑定的功能。您必须在其他控件中传递您的过滤器值 - 例如一些文本框并在 LINQ 查询中使用它。

# java - 从 JAVA 应用程序启动 Digest Authenticated 网页

> ID：12566799
> 
> 赞同：1
> 
> 时间：2012-09-24T14:11:37.300
> 
> 标签：java, browser, digest-authentication

我正在开发一个 JAVA Swing 应用程序，我想在其中添加一个按钮，单击该按钮应打开系统的默认 Web 浏览器和网页。我能够做到这一点，但是我打算打开的网页有一个摘要身份验证（带有 nonce、realm 和 MD-5 sess），所以当页面打开时它会询问用户名和密码。每次我从 JAVA 应用程序打开页面时，我都想取消登录提示（用户名和密码是已知的）。我想知道它是否可以通过 JAVA 应用程序与网络服务器进行通信，直到身份验证并以某种方式将该 HTTP 会话传输到网络浏览器。

我一直在尝试*从 apache commons 尝试 HTTPclient*，它工作正常但是我看不到如何将网页传输到 Web 浏览器（不，我无权访问 Web 服务器，我无法更改身份验证机制）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:22:51.303

如果我们减少您的问题，您实际上是在问，“我可以从服务器外部颠覆身份验证机制吗”。答案是“谢天谢地**没有**”。但是，您可以通过告诉浏览器发送什么用户名和密码来帮助浏览器。

如果您打开以下 URL：

```
http://localhost/index.html 
```

将您的网址更改为：

```
http://username:password@localhost/index.html 
```

请注意，在某些浏览器中，密码会被隐藏，但您不应依赖它。所以你该死的泄露密码。

# ajax - Firefox 仅在 *download* 完成后触发 XMLHttpRequest 上传加载和加载结束事件

> ID：12566801
> 
> 赞同：0
> 
> 时间：2012-09-24T14:11:39.053
> 
> 标签：ajax, firefox, file-upload, xmlhttprequest-level2

其他人可以确认这一点，还是我做错了什么？

在 Firefox 中，XMLHttpRequest 上传事件 load 和 loadend 仅在下载完成后触发，而不是在上传完成时触发。此外，在上传结束时不会触发进度事件。

请参阅此示例： http: [//geo.kitten-x.com/testupload.html](http://geo.kitten-x.com/testupload.html)

我相信 Chrome 的行为是正确的，因为进度条一直到 100%，然后触发 load 和 loadend 事件，然后一旦脚本结束，就会发布结果。在 Firefox 中 load 和 loadend 事件仅在脚本完成后触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:20:47.347

显然，这些事件在下载开始而不是上传完成时触发。这是一个已知问题，在此讨论：[https ://bugzilla.mozilla.org/show_bug.cgi?id=637002](https://bugzilla.mozilla.org/show_bug.cgi?id=637002)

Firefox 开发人员认为，在下载开始之前，无法知道上传是否已完成，因为它可能仍被缓冲在某处（在某些情况下可能必须重新发送）。

更新

**解决方案**是让您的第二页尽快开始返回输出，例如在 PHP 中：

```
ob_implicit_flush(true);
for ($i = 0; $i < ob_get_level(); $i++)
  ob_end_clean();
echo ' '; 
```

# dynamics-crm-2011 - "Regarding" field missing in emails from CRM to Outlook

> ID：12566804
> 
> 赞同：0
> 
> 时间：2012-09-24T14:11:46.457
> 
> 标签：dynamics-crm-2011

I have a workflow that sends emails to users and has the "Regarding" field populated with the related record. This appears fine in CRM but when the email arrives to the user in Outlook the regarding field is nowhere to be seen, even with the plugin installed.

How do I make this show up?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:06:16.870

检查您的设置：管理 > 系统设置 > 电子邮件选项卡 > 为 CRM 用户之间的电子邮件设置跟踪选项

听起来你有这个设置来跟踪电子邮件作为两个活动，所以发件人有一封电子邮件跟踪你的工作流程设置的相关信息，这将是一个“传出”活动”，收件人有他们自己的副本，这是一个“传入”活动，而不是相同的 CRM 记录。

如果您对最近的电子邮件消息进行高级查找（例如，在 = 今天创建）并添加“方向”列，按创建日期对电子邮件进行排序，您应该能够发现这些对。

如果您的安全角色只允许用户查看他们自己的活动，则需要此设置，否则他们只会看到他们发送的活动，而不是他们收到的活动。否则，我发现它没有帮助，并且总是通过取消选中此框来跟踪单个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T15:14:08.030

我在 Outlook 客户端的客户端诊断中选择了“背景跟踪”设置。我认为它并不完美 - 但是它会在每次与服务器同步时填充“关于”实体，默认为 15 分钟。

# javascript - Parsing xml file with javascript

> ID：12566809
> 
> 赞同：1
> 
> 时间：2012-09-24T14:12:14.387
> 
> 标签：javascript, xml-parsing

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function loadXMLDoc(XMLname)
{
    var xmlDoc;
    if (window.XMLHttpRequest)
    {
        xmlDoc=new window.XMLHttpRequest();
        xmlDoc.open("GET",contactinfo.xml,false);
        xmlDoc.send("");
        return xmlDoc.responseXML;
    }
    // IE 5 and IE 6
    else if (ActiveXObject("Microsoft.XMLDOM"))
    {
        xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async=false;
        xmlDoc.load(XMLname);
        return xmlDoc;
    }
    alert("Error loading document!");
    return null;
}
<title>Contacts</title>
</script>
</head>

<body>
<script type="text/javascript">
xmlDoc = loadXMLDoc("\contactinfo.xml") // Path to the XML file;
var M = xmlDoc.getElementsByTagName("item");
for (i=0;i<M.length;i++){
    document.write("<div style='width:450px;'>")
    document.write("<h2>"+xmlDoc.getElementsByTagName("item")[i].childNodes[0].nodeValue+"</h2>");
    document.write("<p>" + xmlDoc.getElementsByTagName("servicephone")[i].childNodes[0].nodeValue+    "</p>");
    document.write("<p><a href='" + xmlDoc.getElementsByTagName("email")[i].childNodes[0].nodeValue   +"</p>);
    document.write("</div>")
}
</script>

</body>
</html> 
```

below is my contactinfo.xml file

```
<?xml version="1.0" encoding="utf-8" ?>
<Contacts>
<item servicephone="12345678" 
email="service@jscript.com" 
url="http://www.jscript.com" 
address="1600 Amphitheatre Pkwy, Mountain View, CA 94043, USA">
</item>
</Contacts> 
```

i could not see any output..anything wrong in code? and also i have the want to retrieve data from the below url and show the data in html any suggestions and useful links will be helfull

[http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:18:27.823

有很多库可以让您使用 Javascript 读取和解析 XML 文件。

一种方法是将 XML 转换为 JSON 并对其进行解析。

Sam Tsvilik 有一个漂亮的小库，可以独立使用或作为 jQuery 插件使用。

[http://www.terracoder.com/index.php/xml-objectifier/xml-objectifier-introduction](http://www.terracoder.com/index.php/xml-objectifier/xml-objectifier-introduction)

# regex - ICU中的$匹配

> ID：12566811
> 
> 赞同：2
> 
> 时间：2012-09-24T14:12:21.677
> 
> 标签：regex, icu

给定`UnicodeString`, `s`, contains`"Mary\n"`和`RegexMatcher`, `m`, 用 pattern 编译`"Mary$"`，如果我这样做：

```
m->reset(s);
bool b = m->find() != 0; 
```

然后`b`设置为`true`. 为什么？该模式表示`'y'`of`"Mary"`应该在字符串的末尾。在这种情况下，它不是字符串的结尾——`'\n'`而是。`UREGEX_MULTILINE`仅当设置了该选项时，才应将其设置为 true 。对？

这是使用 C++ ICU 版本 4.8.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:23:10.557

这是正常行为：在任何尾随换行符*之前*`$`匹配字符串或行的末尾（取决于`(?m)`or`MULTILINE`标志） 。请参阅有关锚点的[本教程](http://www.regular-expressions.info/anchors.html)（向下滚动大约一半到“以换行符结尾的字符串”）。

 *改为使用`\z`- 仅匹配字符串的末尾。*

# symfony - Problems with updating composite keys in sonata admin bundle

> ID：12566813
> 
> 赞同：2
> 
> 时间：2012-09-24T14:12:26.587
> 
> 标签：symfony, doctrine-orm, symfony-sonata, sonata-admin

I am new to sonata admin bundle

I have created a form in sonata admin bundle.

```
 protected function configureFormFields(FormMapper $formMapper)
   {

    $formMapper
    ->with('General')

    ->add('userid', null, array('label' => 'User'))
    ->add('cityid', null, array('label' => 'City Name'))

    ->end();    
   } 
```

Here `userid` and `cityid` are composite key.

I am able to create a new record successfully. But Updation on the same record by changing any one of the composite key creates a problem.

The record is updated successfully in the database but it throws the exception

```
unable to find the object with id : 1~1 
```

where 1~1 is the id of user and city prior its updation. How do i resolve this Exception?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:35:29.360

看来，您正在尝试手动创建/更新 M:N 关系的记录。这不是必需的，因为 Dotrine ORM 会自动在 M:N 关系的中间表中创建或删除这些记录。

*   检查您的数据库结构中是否有正确的关系。您可以在一些数据库建模应用程序中可视化您的数据库结构，例如[Mysql Workbench](https://www.mysql.com/products/workbench/)。

*   将您的数据库结构正确映射到学说配置文件。对您的数据库进行逆向工程可能会有所帮助： [http](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html) : //symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html 在原则配置文件中“User.orm.xml”应该是*多对多*关系。例如：

```
 <many-to-many field="cityId" target-entity="City" inversed-by="userId">
      <join-table name="user_has_city">
        <join-columns>
          <join-column name="id_user" referenced-column-name="id_user"/>
        </join-columns>
        <inverse-join-columns>
          <join-column name="city_id" referenced-column-name="city_id"/>
        </inverse-join-columns>
      </join-table>
    </many-to-many> 
```

*   将 __toString() 方法添加到您的 City 实体：

    ```
    //...some code of entity...

    public function __toString()
    {
        return $this->name; //or $this->title, $this->label etc. - based on the name of variable, which stores the city's name.
    } 
    ```

*   在 AcmeExampleBundle/Admin/UserAdmin.php 文件中：

    ```
    $formMapper
            ->add('cityId', 'sonata_type_model', array(
                'required' => false,
                'label'    => $this->trans('City name'),
                'expanded' => true,
                )); 
    ```

# javascript - Can beforeload cancel HTTP requests?

> ID：12566818
> 
> 赞同：3
> 
> 时间：2012-09-24T14:12:39.953
> 
> 标签：javascript, google-chrome-extension, webkit, safari-extension

I've read over the [`beforeload` documentation](https://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/MessagesandProxies/MessagesandProxies.html#//apple_ref/doc/uid/TP40009977-CH14-SW9) from Apple, but I'm still a bit uncertain about how `beforeload` cancels a load, from a network perspective. Apple's documentation says:

> Safari 5.0 and later (and other WebKit-based browsers) generates a "beforeload" event before loading each subresource belonging to a webpage.

There's nothing in the sparse documentation here that suggests to me that a `beforeload` block *must* prevent a HTTP fetch of the resource. What does the operation of "loading" a Web resource entail (e.g., is there a formal definition of `load`ing in some W3C spec)? In Webkit's current implementation, does canceling a load with `beforeload` stop the browser from sending a HTTP request, or does it merely stop the resource from being rendered and firing a `load` event?

I'm primarily instead in these question to assess `beforeload`'s usefulness to block tracking images. I know there are other ways to do this (e.g., Chrome's `webRequest` API), but I want to know if `beforeonload` is also suitable.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:07:45.710

`beforeload`严格来说并不能阻止任何事情。它只是提供了机会`preventDefault()`。

你的堆栈使用`dispatchMessage()`吗？这是异步的，允许在您阻止之前开始获取资源。

你读过 [http://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/SafariExtensionGuide.pdf#page=88](http://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/SafariExtensionGuide.pdf#page=88)吗？它提供了一种同步方法（第 91-92 页）

ps
我会将此添加为评论而不是答案，但我还不能添加评论

# azure - In Azure Envrionment is Better to use Threading or Task library

> ID：12566824
> 
> 赞同：1
> 
> 时间：2012-09-24T14:13:07.067
> 
> 标签：azure, task

Im planning to use workerprocess in azure for long running task. But im coonfused whether to use Task parallel library or Threading.

-Mahender

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:59:49.217

[TPL 通过特殊的TaskCreationOptions](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcreationoptions.aspx)枚举成员支持长时间运行的任务：LongRunning

> 指定任务将是长时间运行的粗粒度操作。它向 TaskScheduler 提供了一个提示，表明可能需要超额订阅。

TPL 使您可以更轻松地使用 CPU 的多个内核。在 Windows Azure 中，您可以[根据您选择的实例大小](http://technet.microsoft.com/en-us/cloud/gg663909.aspx)拥有多个 CPU 内核：

*   中：2 核
*   大：4 核
*   超大：8 核

与简单地使用线程相反，任务 (TPL) 允许您使用实例中可用的大部分 CPU 内核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:15:59.533

我们在 Azure 中使用 TPL 并取得了一些成功，我会推荐它。在不了解您的项目的情况下，我会说您应该很好地继续使用 TPL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T12:50:03.407

长时间运行的任务需要多长时间？

如果任务需要等待外部输入或持续很长时间，Workflow Foundation 是一个不错的选择，因为您可以将任务状态序列化到数据库。该数据库可以在 Windows Azure SQL 数据库中创建。

[http://msdn.microsoft.com/en-us/library/vstudio/ms735967(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms735967(v=vs.90).aspx)

可以在云服务中启用任务调度程序（有一些黑客攻击），这为您提供了另一种选择。

并行任务库是短期计算密集型工作负载的不错选择。创建线程需要一些计算和内存开销，因此 TPL 通过维护线程池来帮助您执行任务。但是如果你需要长时间阻塞，或者你想同时运行很多线程，这可能不是最好的选择，你应该考虑自己管理线程。

您的要求的更多细节将使我们提出更好的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:46:35.687

由于工作人员角色（或 Web 角色）正在构建在 Windows Server 虚拟机中运行的代码，因此我认为该决定基于您的应用程序和相关架构，而不是基于 Windows Azure。如果部署到 Windows Server，我会选择您要使用的那个。请记住正确捕获`Run()`方法中的任何错误/异常，因为如果您退出`Run()`，实例将通过其关闭顺序并被回收。

# excel - No data in CSV : Error uploading CSV

> ID：12566828
> 
> 赞同：0
> 
> 时间：2012-09-24T14:13:31.580
> 
> 标签：excel, csv

While trying to upload a CSV file, I am getting this error message "No data in CSV".

I remember it worked once (the field only takes CSV files) and now when I tried to save my excel as CSV (comma delimited) and upload, I'm getting this message.

It's strange, since the file is NOT empty. So the problem is coming from elsewhere.

**Solved**

The problem was that, excel was saving the CSV not with comma but with semi colon, this I found after opening the CSV in notepad. And I was choosing comma as separator while uploading the file in the backend.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:18:23.140

这可能是天方夜谭，但 Excel 2010 允许您以三种 .csv 格式保存电子表格。常规 .csv Mac .csv 和 ms-dos .csv

尝试其中的每一个，看看它们是否适用于您的上传过程。

否则，我会第二次@Daniel Cook 的评论联系后端网站的开发人员以进行更多故障排除。很可能是他们的系统行为出乎意料，而不是您的 CSV 文件。

# asp.net-mvc-3 - ASP.NET MVC 3 模型通过使用反射的动作过滤器绑定到子类

> ID：12566829
> 
> 赞同：0
> 
> 时间：2012-09-24T14:13:36.753
> 
> 标签：asp.net-mvc-3, binding, model, filter, action

我已经使用反射使用动作过滤器绑定到我的模型。我遇到的问题是我无法访问子类来将值设置为属性-> FilePath（字符串）。

以下是我想要实现的目标。

1）使用动作过滤器上传图像，所以我不会在我的控制器动作中引用 HttpContext 。

2) 强制一致性，因为我使用此方法的所有模型都必须从通用基础抽象类 BaseModel<T> 继承。

3）自动将文件路径绑定到模型实体

BaseModel<T> 的泛型类型实体正在实现一个接口 (IUpload)，它将强制使用我希望能够设置的属性 (FilePath) 以实现进一步的一致性和泛型。

这是我在操作过滤器中的绑定尝试...

```
 private void MyCustomBindVoid(ActionExecutingContext filterContext, string filePath)
    {
        foreach (object x in filterContext.ActionParameters.Values)
        {
            Type baseType = GetGenericTypeBase(x.GetType(), typeof(BaseModel<>));

            if (baseType == null)
            {
                throw new NullReferenceException("All view models must inherit from the BaseModel abstract class.");
            }

            foreach (PropertyInfo prop in baseType.GetProperties())
            {
                Type entity = Type.GetType(prop.PropertyType.AssemblyQualifiedName, true, false);

                if (entity != null)
                {
                    foreach (Type i in entity.FindInterfaces((type, criteria) => true, null))
                    {
                        if (i == typeof(IUpload))
                        {
                            foreach (MemberInfo info in i.GetMembers())
                            {
                                PropertyInfo entityInfo = entity.GetProperty(info.Name);

                                if (entityInfo != null)
                                {
                                    entityInfo.SetValue("I_CANNOT_FIGURE_HOW_TO_GET_THE_OBJECT_TO_BIND_HERE", filePath, null);
                                    return;
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    private Type GetGenericTypeBase(Type type, Type genericType)
    {
        while (type != typeof(object))
        {
            if (type.IsGenericType && type.GetGenericTypeDefinition() == genericType)
            {
                return type;
            }

            type = type.BaseType;
        }

        return null;
    } 
```

我知道它在动作过滤器中不是理想的模型绑定，但我已经没有将文件路径传递给模型的想法。

这似乎确实有效，我通过将 FilePath （字符串）属性放在继承自 BaseModel<T> 的模型上来完成此操作，该模型可以通过以下方式访问。由于“x”对象可作为 concreate 实例使用。

```
foreach (MemberInfo info in i.GetMembers())
{
   PropertyInfo baseInfo = baseType.GetProperty(info.Name);

   if (baseInfo != null)
   {
      baseInfo.SetValue(x, filePath, null);
      return;
    }
 } 
```

这将再次导致在我的控制器操作中编写相同的代码，因为我必须手动将 BaseModel<T> 上的 FilePath 属性设置为实体 <T> 的 FilePath 属性。

任何帮助将不胜感激（即使这意味着重新思考）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:09:17.250

对于上传图片

当您在 index.cshtml 中单击新建时，您的 [Httpget] 创建操作被调用，然后您在下面的代码中使用这样的..

```
@using (Html.BeginForm("Create", "Category", FormMethod.Post, new { id = "frmCategory", enctype = "multipart/form-data" }))
{ 
```

在控制器中

```
public ActionResult Create(CategoryModel category, HttpPostedFileBase CategoryImage)
        {

            if (ModelState.IsValid)
            {
                category.newCreateCategory(category, CategoryImage);
                return RedirectToAction("Index");
            }
            return View(category);
        } 
```

在模型中

```
 public void newCreateCategory(CategoryModel objModel, HttpPostedFileBase CategoryImage)
            {
                Category objcategory = new Category();
                if (CategoryImage != null && CategoryImage.ContentLength > 0)
                {
                    var fileName = Path.GetFileName(CategoryImage.FileName);
                    var path = Path.Combine(HttpContext.Current.Server.MapPath("~/Content/CategoryImage"), fileName);
                    objcategory.CatImage = fileName;
                }
} 
```

认为这将帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:01:47.587

[通过http://codecallback.com/](http://codecallback.com/)找到我正在寻找的东西

完整的解释可以在下面找到。

[http://codecallback.com/forum/3/thread/4/asp-net-mvc-3-model-binding-to-sub-class-with-action-filter-using-reflection](http://codecallback.com/forum/3/thread/4/asp-net-mvc-3-model-binding-to-sub-class-with-action-filter-using-reflection)

我需要做的就是像这样创建一个子类的实例。

```
PropertyInfo entityInfo = entity.GetProperty(info.Name);
if (entityInfo != null)
{
  object y = prop.GetValue(x, null); /* THIS IS THE FIX */
  entityInfo.SetValue(y, filePath, null);
  return;
} 
```

这样做将允许我用 [UploadFileAttribute(param, param)] 装饰我的操作，并让所有文件上传、路径生成和绑定到通用实体模型的属性得到处理，所以我所要做的就是调用MyRepository.Create(Model.Entity);

# jquery - Mouse heatmap for django site

> ID：12566830
> 
> 赞同：0
> 
> 时间：2012-09-24T14:13:41.913
> 
> 标签：jquery, django

I m looking for a open source mouse tracking heatmap for website usability in django and jquery.I came across [django-mousechaser](http://github.com/dvanliere/django-mousechaser) but it is still in alpha phase.Is anyone used it or is it good to use? Please suggest any other good alternatives.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:20:03.237

[Gheat](https://github.com/robertrv/django-gheat)似乎很受欢迎。

# ruby-on-rails - 由于“符号与 100 的比较失败”，显示所有 id 小于 100 的记录失败

> ID：12566831
> 
> 赞同：0
> 
> 时间：2012-09-24T14:13:43.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3, comparison

我有一个用户模型，我需要显示所有 id 小于 100 的用户。我的代码是

```
User.where(:id < 100) 
```

错误消息是“符号与 100 的比较失败”。我怎样才能让所有 id 小于 100 的用户？如果我需要 100 到 200 之间的 id 会怎样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:22:54.817

如果您想避免 SQL 或 @Mori 建议的其他 gem，您可以这样做

```
User.where(:id => 1..100) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:15:51.127

您需要为此插入一个 SQL where 子句：

```
User.where("id < 100") 
```

但是有一个宝石可以让你做你想做的事：[squeel](https://github.com/ernie/squeel)。安装后，您可以获得相同的结果：

```
User.where{id < 100} 
```

对于范围测试：

```
User.where("id > 100 and id < 200") 
```

或使用 squeel：

```
User.where{id > 100 and id < 200} 
```

# radiant - localhost:3000 默认为 Welcome to Rails 页面，而不是 Radiant CMS 站点页面

> ID：12566834
> 
> 赞同：0
> 
> 时间：2012-09-24T14:13:52.140
> 
> 标签：radiant

我在 Windows XP 上安装 Radiant，数据库是默认的 sqlite3，服务器是 Webrick（也在 Mongrel 上尝试过），Ruby/Rails 文件安装到 WAMP 上。文档“example_application”中的新站点安装在 c/wamp/www/ 中，并且该文件夹似乎填充了所有必要的文件夹/文件。

我假设 Rails 已正确安装，因为当我访问 localhost:3000/ 时，我至少会收到 Welcome to Rails 消息。但是，这意味着它在访问 localhost:3000 时不会加载站点页面（应该是空白模板？）。

我将按照以下方向进行：脚本/服务器 -e 生产 - 我将其作为安装的最后一步运行

我在浏览器窗口中访问 http: - localhost:3000 - 获取 Welcome to Rails 页面 localhost:3000/admin - 获取以下错误消息 Routing Error

没有路线匹配 [GET] "/admin"

尝试运行 rake 路线以获取有关可用路线的更多信息。

-- 我也尝试将 Webrick 绑定到 127.0.0.1 -- 没有工作（也许这是一个可能的修复？）

**更新：** *我运行了 rake 路线，这就是它返回的内容：无效的驱动器规范。该系统找不到指定的路径。admin_snippets GET（片段的部分日志） 无法从 Aptana Studio 复制/粘贴。

***** 更新：
example_application/public 中没有 index.html 文件，因此应该解决页面默认为“Welcome to Rails！”的问题。如何设置默认路由，然后到 Radiant 管理员登录页面以及应该在 localhost:3000 加载的空白站点？****

 **routes.rb 文件只说明了这一点： load File.join(RADIANT_ROOT, "config", "routes.rb")

* * *

*另外，我知道 Rails 不适用于 Windows 环境，所以请多多包涵。如果某个地方/线程已经有可用于访问 Radiant 登录页面的逻辑修复程序，我深表歉意。*

谢谢，如果有人可以建议。

回答：

我终于在 Windows 上安装了 Radiant，但我不知道为什么我之前遇到了这些问题，也不知道为什么在最后一次尝试中 localhost:3000 有效。我上述问题的答案适用于将来在 Windows XP 上进行安装的任何人。

如果您从上面开始，我尝试了“thin start”作为我的最后一个选项，但没有成功。然后我尝试了我认为默认为 Webrick 的 rails 服务器。但是，此时 localhost:3000 甚至还没有加载。
**最后一次尝试——这个工作——脚本/服务器 webrick**

**--- 'script/server webrick'** 加载速度非常慢并且会显示所有的 [Get] 控制器？先前尝试加载 localhost:3000 时缺少的信息。终端应显示来自 sqlite3 的 WelcomeController#index 和信息的打印输出。

来自终端的重定向 URL 为：localhost:3000/admin/welcome - 这是我找到登录页面的地方

但是，我仍然缺少应该在 localhost:3000 加载的空白模板页面，而登录页面应该在 localhost:3000/admin 单独找到，而不是从 localhost:3000 和 localhost:3000/admin/ 加载。

此时，仪表板应该在您登录后启动并运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:35:33.673

*   除非您实际上是在开发（创建扩展、修补 Radiant，...），否则建议作为生产运行。不确定窗户，但通常你会这样做`script/server -e production`。

*   我假设前端会将您重定向到后端，因为 Radiant 没有要渲染的内容。首先尝试创建一个布局和一个主页，非常确定它会呈现。**

# maven-3 - 从远程存储库下载父 pom

> ID：12566835
> 
> 赞同：4
> 
> 时间：2012-09-24T14:13:54.337
> 
> 标签：maven-3

是否可以（以及如何）从远程存储库下载父 pom？

为什么？我有一个包含许多模块的项目设置。父 pom 指定对第三方 jar 的依赖关系。如果其中一个模块需要其中一个 jar 的更高版本中的新功能，我想：

*   参考新的 jar 更新父 pom
*   更新引用新父 pom 的单个模块 pom。

但是，这会破坏所有其他模块的构建，具体取决于较旧的父 pom。我收到错误消息

```
Non-resolvable parent POM: Could not find artifact company:modbase:pom:2.0.6 
in mirrored.repo.com (http:((mirrored.repos.com/pub/java/maven2) and 
'parent.relativePath' points at wrong local POM ... 
```

所需的旧父 pom 部署在 pom 文件中指定的远程 maven 存储库中，但是，maven 尝试在 settings.xml 中指定为镜像的存储库中搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:14:40.023

只需从父 pom 中创建一个单独的 maven 模块，然后在更改它之后创建一个新版本，从而产生一个新版本，该版本可以用作其他模块中的父级。

# wxpython - Update wx.BitmapButton?

> ID：12566840
> 
> 赞同：3
> 
> 时间：2012-09-24T14:14:06.427
> 
> 标签：wxpython

Edit: (little change -> 2nd problem) I created a BitmapButton & a TextCtrl. The picture in this button shall change when a certain text is entered in TextCtrl. This works:

```
def create(self,event):
    self.textinput = wx.TextCtrl(self.panel, pos=(100,20))
    self.picture = wx.Image("pics\\default.bmp", wx.BITMAP_TYPE_BMP).ConvertToBitmap()
    self.picturebutton = wx.BitmapButton(self.panel,-1,self.picture,pos=(100,50))
    self.textinput.Bind(wx.EVT_CHAR, self.changepic)

def changepic(self,event):
    if self.textinput.GetValue = 'test':
        self.picturebutton.Destroy()
        self.picture = wx.Image("pics\\new.bmp", wx.BITMAP_TYPE_BMP).ConvertToBitmap()
        self.picturebutton = wx.BitmapButton(self.panel,-1,self.picture,pos=(100,50))
    event.Skip() 
```

1.) I hope there is another way instead of destroying & rebuilding this button. I tried

```
self.picturebutton.Refresh() 
```

and

```
self.picturebutton.Update() 
```

instead of

```
 self.picturebutton.Destroy()
    self.picturebutton=wx.BitmapButton(self.panel,-1,self.picture,pos=(100,50)) 
```

but nothing happened. What can I do?

2.) It looks like "changepic" is called *at first* and *then* my TextCtrl receives the char. Because when I enter "test", nothing happens until i press another key. So the picture changes when I enter e.g. "testa". But it shall change when "test" is in the TextCtrl. How can I solve this? Is there a TextCtrl-Event which *first* puts the char in the TextCtrl and *then* call a function?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:18:57.937

是的，不需要重新创建控件来更改 bmp。刷新是您需要的，而不是在控件上调用它在控件父级上调用它。

```
self.Refresh() 
```

使用 EVT_TEXT 事件时，您可以使用 event.String 来获取控件的内容

在这里您的代码与这些更改

```
def create(self,event):
    self.textinput = wx.TextCtrl(self.panel, pos=(100,20))
    self.picture = wx.Image("pics\\default.bmp", wx.BITMAP_TYPE_BMP).ConvertToBitmap()
    self.picturebutton = wx.BitmapButton(self.panel,-1,self.picture,pos=(100,50))
    self.textinput.Bind(wx.EVT_TEXT, self.changepic)

def changepic(self,event):
    if event.String = 'test':
        self.picture = wx.Image("pics\\new.bmp", wx.BITMAP_TYPE_BMP).ConvertToBitmap()
        self.picturebutton.SetBitmap(self.picture)
        self.Refresh()
    event.Skip() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T21:32:38.800

Yoriz 对 self.Refresh() 的使用很棒，但我不得不使用

`self.picturebutton.SetBitmapLabel(self.picture)`

而不是

`self.picturebutton.SetBitmap(self.picture)`

让它工作。`SetBitmap`似乎不是有效的 wx.BitmapButton 方法。(Python 2.7)

# ruby-on-rails - mongoid，表单构建器和关系

> ID：12566841
> 
> 赞同：3
> 
> 时间：2012-09-24T14:14:13.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, simple-form

我预计混合 mongoid 和 simple_form 会遇到一些麻烦（我认为 - 对于其他表单构建器来说，同样的问题是实际的）。我有一个与关系有关的小表格，比如

```
f.input :author, collection: User.all, as: :select 
```

当我提交没有选择作者的表单时，我看到了异常

```
NoMethodError in ExamplesController#update
undefined method `id' for "":String 
```

很伤心:(正如我所见 - simple_form 提交“”（空字符串）但不是 nil 到控制器。当然 - 我可以从表单生成器验证每个参数，但我不确定这是一个好的解决方案。你能推荐我吗某物？

**UPD**（模型结构）：

用户.rb

```
class User
  include Mongoid::Document
  include Mongoid::Timestamps

  has_many :examples, :inverse_of => :author
  has_many :examples, :inverse_of => :responsible_person
end 
```

例子.rb

```
class Example
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::MultiParameterAttributes

  field :title, type: String
  field :description, type: String

  belongs_to :author, :class_name => "User"
  belongs_to :responsible_person, :class_name => "User"

  validates_presence_of :title, :description, :author

  attr_accessible :title, :description, :author, :responsible_person

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:52:04.027

我已经通过在表单上直接使用 author_id 和 Responsible_person_id 解决了这个问题，就像这样

```
= f.input :author_id, collection: User.all, as: :select
= f.input :responsible_person_id, collection: User.all, as: :select 
```

代替

```
= f.input :author, collection: User.all, as: :select
= f.input :responsible_person, collection: User.all, as: :select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:22:31.967

试试这个

```
<%= f.association :author %> 
```

# xaml - Windows Metro：XAML 中是否支持 XPath 绑定

> ID：12566842
> 
> 赞同：1
> 
> 时间：2012-09-24T14:14:17.013
> 
> 标签：xaml, xpath, windows-8, microsoft-metro

Windows Metro 编程新手。

我想将 XML 数据与 UI XAML 相关联。

在 Windows 8 应用程序中可以通过定义 dataProvider：

XmlDataProvider x:Key="InventoryData" XPath="Inventory/Books"

并绑定到 UI 为：

```
 <Binding Source="{StaticResource InventoryData}"
           XPath="*[@Stock='out'] | *[@Number>=8 or @Number=3]"/> 
```

尝试使用 VS2012 RC 为 Windows Metro C# 应用程序做同样的事情。

XAML 中的错误：找不到类型“XmlDataProvider”。

有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:58:15.483

该`XPath`属性是[`Binding`WPF xaml 中类的](http://msdn.microsoft.com/en-us/library/ms613500.aspx)一部分。[地铁`Binding`类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.binding.aspx#properties)没有这个属性。[这里](http://karlhulme.wordpress.com/2007/02/14/xpath-variabledynamic-parameters-in-wpf-binding/)有一个如何扩展 WPF 实现的示例，您可以将其移植到 Metro。

# javascript - Knockout.js 条件绑定

> ID：12566850
> 
> 赞同：2
> 
> 时间：2012-09-24T14:14:58.043
> 
> 标签：javascript, data-binding, knockout.js, conditional

您如何基于其他属性进行条件绑定？

例子..

```
变量视图模型 = {
   IsAdded = ko.observable(),
   AdditionalBy = ko.observable()   
}

```

当我显示它时.. 如果 IsAddedBy 为 null 或 false，我不想显示 AdditionalBy

像这样的东西。。

```
<input type="text" data-bind="value: if (IsAdded != null && IsAdded) { addedBy }"/>

```

我知道这是不对的，但类似的事情......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T14:33:28.510

What I would do is this;

```
var ViewModel = function() {
    this.IsAdded = ko.observable('True');
    this.AddedBy = ko.observable('Test');
    this.AddedByText = ko.computed(function(){
        if ( this.AddedBy() != null && this.IsAdded() ) return this.AddedBy()
        return "";
    }, this);
} 
```

Then your input would be

```
<input type="text" data-bind="value: AddedByText" /> 
```

This way you are keeping the logic contained within your ViewModel and separate from the HTML.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T17:32:26.487

这个问题很旧，但它可能会帮助其他人寻找

```
<input type="text" data-bind="value: IsAdded ? AddedBy : "" "/> 
```

基本上如果 IsAdded 不为空，则将其设置`value`为 AdditionalBy，否则什么也不做

# caching - 缓存和 HTTPS

> ID：12566852
> 
> 赞同：1
> 
> 时间：2012-09-24T14:15:05.653
> 
> 标签：caching, http-status-code-301, browser-cache

在监视浏览器和服务器之间的网络通信时，我注意到了一些有趣的事情。它与缓存有关。

假设我有一个 CSS 文件[http://domain.com/main.css](http://domain.com/main.css)（用于不安全页面），也可以通过[https://domain.com/main.css](https://domain.com/main.css)访问（用于安全页面）。

1.  当我第一次加载一个不安全的页面时，CSS 文件会得到一个`200 OK`. 当我重新加载页面（或转到另一个不安全的页面）时，我得到一个`304 Not Modified`.
2.  当我第一次访问安全页面时，来自 https 源的 CSS 文件会获得一个`200 OK`. 当我重新加载页面（或转到另一个安全页面时，我得到一个`304 Not Modifie`.
3.  当我返回到不安全的页面时，CSS 文件仍然得到一个`304 Not Modified`.
4.  当我返回到受保护的页面时，CSS 文件得到一个`200 OK`. **缓存的副本发生了什么？我怎样才能让它缓存？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:46:36.620

[这](https://stackoverflow.com/questions/174348/will-web-browsers-cache-content-over-https)可能会回答你的问题。您的网站可能会通过以下方式将此资源定义为不可缓存：

```
Cache-Control   private, must-revalidate, max-age=0 
```

例如（访问[https://www.google.com/ncr](https://www.google.com/ncr)时）导致您的浏览器不缓存它。你有 Fire-bug\Fiddler 或类似的东西来查看响应头吗？

# ios - 使用 RESTKit 流式传输数据

> ID：12566855
> 
> 赞同：0
> 
> 时间：2012-09-24T14:15:14.877
> 
> 标签：ios, restkit

我想知道是否有任何方法（或 RESTKit 的 fork 项目）允许对 HTTP 响应主体进行流式传输，而不是像 RESTKit 目前正在做的那样将所有内容加载到内存中。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:42:57.390

查看代码，RestKit 似乎不支持响应主体的流式传输。

看起来您可能需要其他解决方案。我听说 AFNetworking 非常适合做它的网络部分（我自己还没有使用它）。我已经使用“YAJL”来做一个流式 JSON 解析器。显然 AFNetworking 可以与 YAJL 挂钩...不确定这将如何工作，但您可能会调查一下。

# jquery-selectors - 按标签或 $.Data 选择 jQuery UI 按钮

> ID：12566856
> 
> 赞同：0
> 
> 时间：2012-09-24T14:15:20.703
> 
> 标签：jquery-selectors, label, jquery-ui-button

我的按钮是 input type=button、id 字段集，并且标签之间没有文本，因为它出现在我的按钮右侧而不是内部。（对不起，由于某种原因，我不会让我发布 html）。

我 .button() 他们并设置他们的标签。一切都按预期工作，但我无法通过 :contains() 选择它们。

如何通过标签选择 jQuery UI 按钮？

提前致谢！

**编辑**

我不按 id 选择，因为按钮的文本会根据我的数据库中的变量而变化。有没有办法通过.data进行选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:20:54.027

您应该创建一个按钮并查看 jQuery 是如何创建它的。当您查看[文档](http://docs.jquery.com/UI/API/1.8/Button)中的示例时，您会看到 .button() 在包含标签的按钮元素中创建了一个 span 元素。因此，您可以查询这个具有 ui-button-text 类的内部 span 元素。

但我认为你应该过度考虑你的代码并重新编写它，以便你可以在 ID 上进行选择，因为它们是用来识别事物的。

编辑：然后去寻求第一个建议

```
var buttons = $('button').filter(function (index) {
    $('.ui-button-text:contains("' + your_string + '")', this).length > 0
}); 
```

# edi - EDI 处理工作原理概述

> ID：12566862
> 
> 赞同：5
> 
> 时间：2012-09-24T14:16:06.930
> 
> 标签：edi, x12

我是 EDI 新手，必须在遗留系统中实现它。

我想确保我有正确的更高级别的概述：

1) 从我的系统为给定的贸易伙伴生成 EDI 文件 2) 可能 FTP 给他们 3) 响应是 ftp'​​d 给我的，我把它刮回我的系统

我是不是要把这个概念搞砸了？

我知道大多数贸易伙伴都会调整标准，所以那里有很多工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T14:41:34.127

您的工作流程处于非常高的水平

一如既往，魔鬼在细节中。

*   术语 - 段/元素/分隔符

*   封装数据（ISA / GS / SE 段）

*   信封上的控制号码

*   通信 - 真的是 FTP 吗？清晰或安全？VAN 或 AS2 协议呢？

*   业务逻辑 - 应用程序端，还是翻译端？哪个
    更有意义？

*   997 和解

*   文件审核（必需？达到什么级别？）

*   合作伙伴测试协议

考虑我面向 EDI 的供应商的环境：

*   850 输出
*   997 给我们
*   855 给我们
*   997 离开我们
*   856 给我们
*   997 离开我们
*   810 给我们
*   997 离开我们

对于面向客户的 EDI：

*   850 给我们
*   997 离开我们
*   855 离开我们
*   997 给我们
*   810 离开我们
*   997 给我们

如您所见，我们生命周期中的一些文档用于事务。

您正在处理哪些文件？如果是 837，生成 EDI 文件并非易事。即使它在 856 中，您也必须处理在翻译时必须考虑的分层循环（尽管 837 更是如此）。

您是否打算编写自己的解析器/翻译器？如果是这样，为什么？您是否要编写自己的确认核对例程？语法验证？最好的办法是将您的遗留应用程序与商业翻译器连接起来，而不是重新发明 30 年的轮子。许多可以连接到遗留系统的拖放映射器（[Delta](http://liaison.com/products/transform/delta/)可能是市场上最好的之一，但也有一些优质的开源替代品，如 BOTS）。X12 标准对混蛋有一点回旋余地。不过，我似乎有些疯狂的实现。总的来说，更多的合作伙伴顺从而不是做他们想做的事。那些有广泛要求的通常选择 XML，因为它们在文档结构中具有更大的范围并且不受标准的限制。如果您有 4 个合作伙伴，其中 2 个是 4010 版本，2 个是 5010，那么您必须相应地编码（或映射）。有一些工具可以提供帮助，但同样，魔鬼在细节中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T13:33:45.870

可以在[http://www.rdpcrystal.com/what-is-edi/找到一个很好的教程](http://www.rdpcrystal.com/what-is-edi/)

它显示了 EDI 各方之间的基本交互以及消息信息

# java - Java 中 Web 服务的用户身份验证

> ID：12566876
> 
> 赞同：1
> 
> 时间：2012-09-24T14:16:47.427
> 
> 标签：java, web-services, security, authentication, tomcat

假设我有一个简单的 Java 服务器应用程序，它实现了一些 web ( `REST`) 服务。应用程序部署`war`为`Tomcat`. 现在我想添加用户身份验证如下：

*   `users`在服务器端添加一个包含用户名和密码的纯文本文件。用户需要在每个请求中发送用户名和密码，服务器会根据文件对它们进行测试。

*   为了防止以明文形式发送密码，我正在考虑单向加密，就像`/etc/passwd`. 因此，用户将被要求在发送请求之前加密他们的密码。

这种方法有意义吗？Java中是否有这种方法的“即用型”实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:24:04.367

[春天安全](http://static.springsource.org/spring-security/site/tutorial.html)？这是一种保护 Web 应用程序的非侵入式方法，并且在数据存储方式方面非常灵活 - 即纯文本文件、xml 或用户名和密码数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:31:10.930

Yes, there is a lot of existing good authentication solutions, from BASIC (via SSL), OAuth, Kerberos, Spring Security etc. I suggest making a research on WS-Security topic, as there are many layers (container, filters, application itself) where the authentication can take place.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:29:42.390

Use a RESTful framework like [Jersey](http://jersey.java.net) for example. But for authentication you must implement session management with request filters. As for users management you should use a database like MySQL.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T14:28:11.433

有很多方法可以剥这只猫的皮。首先，您可能希望使用摘要式身份验证或基于 SSL 表单的身份验证，因为依赖客户端哈希可能会受到重放攻击。

我的建议是使用 Spring Security。看看[这个](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/basic.html)HTTP 摘要认证的例子。

另一种方法可能是使用 servlet 容器为您完成此任务。[在这里](http://java.boot.by/wcd-guide/ch05s03.html)查看摘要和基于表单的身份验证技术。

此外，**您应该真正阅读 Web 应用程序的[正确密码存储](http://blankfield.net/better-password-storage/)技术**。确保您使用的是足够复杂（又名缓慢）的散列算法，例如 bcrypt，并为每个密码提供唯一的盐。最后，确保凭证的传输是安全的，要么使用 HTTP 摘要身份验证（好的），要么使用基于 SSL 表单的身份验证（更好）。

# css - 文本换行（2 行文本）不适用于 我试图在两行中获取按钮文本，请参见小提琴：http: //jsfiddle.net/gaurav360/Yxqx2/ 它在除Opera之外的所有浏览器中运行良好... 提前致谢。 问问题 问问题 2012-09-24T14:16:51.327 321 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我试图在两行中获取按钮文本，请参见小提琴：http: //jsfiddle.net/gaurav360/Yxqx2/ 它在除Opera之外的所有浏览器中运行良好... 提前致谢。 使用一个button元素——更简单，结果更一致：  cssopera 4 1 回答 1 This answer is useful 1 使用一个button元素——更简单，结果更一致：  于 2012-09-24T14:55:02.347 回答 Related 1 sencha-touch - 如何在 Sencha Touch 1 中通过拖放重新排列容器中的项目 4 sql - 不处理用户输入时，无参数查询可以吗？ 3 objective-c - release vs autorease vs drain 1 android - 从 xml 和每个片段膨胀夏洛克操作栏菜单 2 visual-studio-2010 - 如何在没有安装 wix 3.6 的情况下配置 Visual Studio 的解决方案以打开/编译 wix 项目？ 1 android - 如何增加联系人列表 1 python - 导入变量 1 visual-studio-2010 - What are the files and folder I should automatically exclude? 2 jquery - $.ajax() function working in IE but not in Chrome and FF 1 maven - Maven 版本插件：版本比较在哪里 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12566877
> 
> 赞同：0
> 
> 时间：
> 
> 标签：css, opera

我试图在两行中获取按钮文本，请参见小提琴：http: [//jsfiddle.net/gaurav360/Yxqx2/](http://jsfiddle.net/gaurav360/Yxqx2/)

它在除Opera之外的所有浏览器中运行良好...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:55:02.347

使用一个`button`元素——更简单，结果更一致：

```
<button id="btnQuoteNow" class="wrapText" type="button">Quote<br>Now</button> 
```

# vb.net - 第一次使用带有 VB 技巧的 ASMX 服务

> ID：12566878
> 
> 赞同：0
> 
> 时间：2012-09-24T14:16:51.810
> 
> 标签：vb.net, asmx

我被要求通过在应用程序和数据库之间使用 ASMX Web 服务来获取一些信息，从而在校园内提供帮助。我以前从未使用过 Web 服务或 ASMX，我想知道在过去几年中它发生了多大的变化。我一直在看教程和信息，一切似乎都是在 2002 年左右推出的。从那以后我应该担心很多变化吗？关于从哪里开始的任何建议？

非常感谢，特洛伊

# image - 更改我网站上的图像 Like 按钮

> ID：12566880
> 
> 赞同：2
> 
> 时间：2012-09-24T14:17:00.093
> 
> 标签：image, facebook-like

是否可以在不使用 Javascript SDK 的情况下更改用户在我的网站上点击“喜欢”按钮后看到的缩略图？

我目前正在使用这个 iframe：

```
<iframe src="http://www.facebook.com/plugins/like.php?href=www.itsmorethanatextbook.com?show_faces=false" 
        scrolling="no" frameborder="0"
        style="border:none; width:450px; height:80px"></iframe> 
```

希望这是一个简单的问题。:)

-埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:13:45.543

尝试设置

```
<meta property="og:image" content="http://YOURWESITE.COM/IMAGE.JPG"/>
<meta property="og:title" content="YOUR WEBSITE TITLE"/>
<meta property="og:url" content="http://YOURWESITE.COM/"/>
<meta property="og:type" content="website" /> 
```

[在您的 HEADER 中，使用https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)测试您的网站后url linter :)

# ruby-on-rails - rails find_or_initialize 在关系上

> ID：12566884
> 
> 赞同：4
> 
> 时间：2012-09-24T14:17:14.637
> 
> 标签：ruby-on-rails, activerecord

当我创建一个新用户时，为了避免重复，我使用 find_or_initialize 方法：

```
user = find_or_initialize_by_email(the_email) 
```

如果此用户是与相关公司创建的，如何避免公司中的重复？

我可以做类似的事情：

```
find_or_initialize_by_email_and_by_company_name(the_email, the_company_name) 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T08:29:40.543

Rails 3.2 方式是

```
User.where(email: the_email, company_name: the_company_name).first_or_initialize 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:22:04.590

使用

```
find_or_initialize_by_email_and_company_name(the_email, the_company_name) 
```

您将通过电子邮件和公司名称创建用户 uniq。（by 只使用一次）

# asp.net-mvc-4 - 在 ASP.NET MVC 4 上运行的 Zurb Foundation 3.0

> ID：12566885
> 
> 赞同：0
> 
> 时间：2012-09-24T14:17:17.107
> 
> 标签：asp.net-mvc-4, zurb-foundation

是否已经有任何模板可以开始构建基于 Zurb 基础设计的 ASP.NET MVC 4 站点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:04:18.933

**更新：** NuGet 包可用 [http://www.nuget.org/packages/Foundation3_MVC4](http://www.nuget.org/packages/Foundation3_MVC4)

我们计划在完成后推送到 NuGet。由于其他职责，我在 Nuget 包上有些落后，但项目解决方案版本功能齐全，可在 GitHub 上找到。

# php - 立即在 WordPress 中运行计划的 WP Cron 任务

> ID：12566886
> 
> 赞同：2
> 
> 时间：2012-09-24T14:17:17.787
> 
> 标签：php, cron, wordpress

我试图在安排一些动作事件后立即运行 WordPress cron 任务。通常 WordPress Cron 至少需要一个页面加载来触发计划任务。我正试着马上去做。我几乎设法做到了，如下面的代码所示。

```
/* Plugin Name: Sample Cron Immediate Execution  */

add_action('admin_menu', 'sample_cron_immediate_execution');
function sample_cron_immediate_execution() {
    add_options_page(
        'Sample Cron Immediate Execution', 
        'Sample Cron Immediate Execution', 
        'manage_options',
        'sample_cron_immediate_execution', 
        'sample_cron_immediate_execution_admin');
}
function sample_cron_immediate_execution_admin() {
    ?>
    <div class="wrap">
    <?php
        wp_schedule_single_event(time(), 'my_action1');
        wp_schedule_single_event(time(), 'my_action2');
        $cron_url = site_url( 'wp-cron.php?doing_wp_cron=0');
        wp_remote_post( $cron_url, array( 'timeout' => 0.01, 'blocking' => false, 'sslverify' => apply_filters( 'https_local_ssl_verify', true ) ) );
        echo 'cron tasks should be executed by now.';
    ?>
    </div>
    <?php
}

add_action('my_action1', 'myeventfunc1'); 
function myeventfunc1() {
    sleep(10); // assuming it's a heavy task 
    sample_log(date('l jS \of F Y h:i:s A'), __DIR__ . '/myevent1_log.html');
}

add_action('my_action2', 'myeventfunc2');    
function myeventfunc2() {
    sleep(10); // assuming it's a heavy task 
    sample_log(date('l jS \of F Y h:i:s A'), __DIR__ . '/myevent2_log.html');
}

function sample_log($time, $file) {
    file_put_contents($file, $time . '<br />', FILE_APPEND);
} 
```

问题是，当其中一项任务很繁重时，WordPress 似乎无法在一次调用`wp-cron.php`. 当我查看核心文件的代码时，我猜测 $_GET 值`doing_wp_cron`与它有关，

其中一条评论说

> 使用全局 $doing_wp_cron 锁，否则使用 GET 锁。如果没有锁，尝试抓住一个新的锁。

我不完全明白这是怎么回事。我想做的是立即执行多个计划任务，而无需打开另一个页面，而不管任务的繁重程度。

感谢你的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-26T23:18:01.087

为什么要重建原生调度器？这应该有效：

```
function my_job() {
    // heavy lifting
}
add_action( 'my_hook', 'my_job' );

wp_schedule_single_event( time(), 'my_hook', array( 'my_arg' ) );
spawn_cron(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T23:22:11.423

这应该可以完成这项工作。

```
<?php
    /* Plugin Name: Sample Cron Immediate Execution  */

    add_action('admin_menu', 'sample_cron_immediate_execution');
    function sample_cron_immediate_execution() {
        add_options_page(
            'Sample Cron Immediate Execution', 
            'Sample Cron Immediate Execution', 
            'manage_options',
            'sample_cron_immediate_execution', 
            'sample_cron_immediate_execution_admin');
    }
    function sample_cron_immediate_execution_admin() {
        ?>
        <div class="wrap">
        <?php
            $cron_url = site_url( '?custom_cron=myeventfunc1');         
            wp_remote_post( $cron_url, array( 'timeout' => 0.01, 'blocking' => false, 'sslverify' => apply_filters( 'https_local_ssl_verify', true ) ) );
            $cron_url = site_url( '?custom_cron=myeventfunc2');         
            wp_remote_post( $cron_url, array( 'timeout' => 0.01, 'blocking' => false, 'sslverify' => apply_filters( 'https_local_ssl_verify', true ) ) );
            echo 'cron tasks should be executed by now.';
        ?>
        </div>
        <?php
    }

    add_action('init', 'run_customcron');
    function run_customcron() 
    {
        if (isset($_GET['custom_cron']))
        {
            call_user_func($_GET['custom_cron']);
        }
    }

    function myeventfunc1() {
        sleep(10); // assuming it's a heavy task 
        sample_log(date('l jS \of F Y h:i:s A'), __DIR__ . '/myevent1_log.html');
    }

    function myeventfunc2() {
        sleep(10); // assuming it's a heavy task 
        sample_log(date('l jS \of F Y h:i:s A'), __DIR__ . '/myevent2_log.html');
    }

    function sample_log($time, $file) {
        file_put_contents($file, $time . '<br />', FILE_APPEND);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:45:34.187

尝试将超时更改为 30 秒。

```
wp_remote_post( $cron_url, array( 'timeout' => 30, 'blocking' => false, 'sslverify' => apply_filters( 'https_local_ssl_verify', true ) ) ); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-03T17:57:24.687

如果您只安排一个事件并希望它立即运行，我不太明白为什么要使用 cron —— 为什么不直接执行该操作？

```
do_action('my_action1');
do_action('my_action2'); 
```

无论如何，每次访问页面时，Wordpress 都会自动运行任何过期的 cron，因此我看不到手动调用 wp-cron 的理由。

关于你的

> 当其中一项任务很重时，WordPress 似乎无法在一次调用 wp-cron.php 中完成所有任务

注释，知道 PHP 在默认情况下会在脚本（包括 Wordpress crons）的执行时间超过 30 秒时终止执行。假设您安排了 5 个 crons，每个 crons 都需要 9 秒才能运行。前 3 个会运行，但后两个不会（PHP 会在第 4 个开始后不久死掉）。我使用 PHP 的`set_time_limit`函数取得了很好的效果，允许我的服务器在 wordpress cron 中执行一个非常大的 cURL 请求。

还有几件事：

*   cron*应该*是异步的。您正在尝试使其同步，这可能会导致页面加载延迟*显着。*
*   `add_action`打电话前一定要打电话`do_action`

# javascript - 正则表达式 getElementById

> ID：12566888
> 
> 赞同：1
> 
> 时间：2012-09-24T14:17:23.153
> 
> 标签：javascript, regex, foreach, getelementbyid

很长一段时间以来，我需要第一次使用纯 Javascript，并且已经习惯了 jQuery 的舒适床垫，所有重要的东西都在逃避我。

我需要在正则表达式上选择一堆 div。所以我有这样的东西；

```
<div id="id_123456_7890123"> .. </div>
<div id="id_123456_1120092"> .. </div>
<div id="id_555222_1200192"> .. </div>
<div id="id_123456_9882311"> .. </div> 
```

而且我需要创建一个循环，该循环遍历所有 div 的 id 以`id_123456_`. 我该怎么做呢？

我之前使用 jQuery 和`:regex`过滤器插件，但是看着它，我似乎无法在纯 javascript 重写中挽救很多东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T14:28:38.003

在普通的 javascript 中，您可以执行这个应该在每个浏览器中都可以使用的通用搜索：

```
var divs = document.getElementsByTagName("div"), item;
for (var i = 0, len = divs.length; i < len; i++) {
    item = divs[i];
    if (item.id && item.id.indexOf("id_123456_") == 0) {
        // item.id starts with id_123456_
    }
} 
```

工作示例：http: [//jsfiddle.net/jfriend00/pYSCq/](http://jsfiddle.net/jfriend00/pYSCq/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-16T10:18:53.227

HTML DOM querySelectorAll() 方法将在这里工作。

```
document.querySelectorAll('[id^="id_"]'); 
```

在这里借用[StackOverFlow](https://stackoverflow.com/questions/6991494/javascript-getelementbyid-base-on-partial-string)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:31:25.753

这是通过递归遍历整个 DOM 来实现的。

它可能不是最有效的，但应该适用于每个浏览器。

```
function find_by_id(el, re, s) {

    s = s || [];
    if (el.tagName === 'DIV' && re.exec(el.id) !== null) {
        s.push(el);
    }

    var c = el.firstChild;
    while (c) {
        find_by_id(c, re, s);
        c = c.nextSibling;
    }

    return s;
}

var d = find_by_id(document.body, /^id_123456_/); 
```

见[http://jsfiddle.net/alnitak/fgSph/](http://jsfiddle.net/alnitak/fgSph/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T14:33:50.753

你在这里：http: [//jsfiddle.net/howderek/L4z9Z/](http://jsfiddle.net/howderek/L4z9Z/)

HTML：

```
<div id="nums">
<div id="id_123456_7890123">Hey</div>
<div id="id_123456_1120092">Hello</div>
<div id="id_555222_1200192">Sup</div>
<div id="id_123456_9882311">Boom</div>
</div>
<br/>
<br/>
<div id="result"></div>​ 
```

Javascript：

```
divs = document.getElementsByTagName("div");
divsWith123456 = new Array();
for (var i = 0;i < divs.length;i++) {
    if (divs[i].id.match("id_123456") != null) {
        divsWith123456.push(divs[i]);
        document.getElementById("result").innerHTML += "Found: divs[" + i + "] id contains id_123456, its content is \"" + divs[i].innerHTML + "\"<br/><br/>";
    }
}​ 
```

# c# - 如何从调用应用程序中获取实例

> ID：12566889
> 
> 赞同：3
> 
> 时间：2012-09-24T14:17:23.373
> 
> 标签：c#, mapinfo

我有一个用于调用 C#.NET 方法的第三方应用程序的插件，我需要从调用应用程序中获取实例。

```
_MapInfoApplication = (MapInfo.MapInfoApplication) System.Runtime.InteropServices.Marshal.GetActiveObject("Mapinfo.application"); 
```

给我一个来自应用程序的活动实例，但如果有两个打开的应用程序实例我不知道我是否得到了正确的实例，有没有办法确定谁打电话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:57:25.130

使用该方法，使用from作为参数`System.Runtime.InteropServices.Marshal.GetObjectForIUnknown`传递对象指针：`IDispatchID``MapInfo`

```
public static void MINote(int MIWindowID, string Message)
{
   System.IntPtr MIDispatchPtr = new IntPtr(MIWindowID);
   DMapInfo MIConnection = (DMapInfo)Marshal.GetObjectForIUnknown(MIDispatchPtr);
   MIConnection.Do(String.Format("Note \"Note from CSharp: {0}\"",Message));
   DMBApplications Applications = (DMBApplications) MIConnection.MBApplications;
   foreach (DMapBasicApplication mbApp in Applications) 
   {
      MIConnection.Do(String.Format("Note \"MB App. running in this MapInfo instance: {0}\"", mbApp.Name));
   } 
} 
```

# jquery - Safari 中的 jQuery Parallax Jumpy（背景位置已经固定）

> ID：12566892
> 
> 赞同：2
> 
> 时间：2012-09-24T14:17:26.730
> 
> 标签：jquery, safari, parallax

我正在尝试使用此插件实现视差滚动效果：[http ://www.ianlunn.co.uk/plugins/jquery-parallax/](http://www.ianlunn.co.uk/plugins/jquery-parallax/)

这是我的网址。您会看到我的设置非常相似，包括 CSS 和视差初始化。[http://pollenbrands.com/rjo/juice/](http://pollenbrands.com/rjo/juice/)

背景已经固定，就像在演示中一样，这是我看到的针对此问题发布的解决方案。该演示在 Safari 中运行良好，但我的却不行。我不确定在这一点上我在做什么不同。

谢谢！

# android - Rest API - 如何添加自定义标头？

> ID：12566893
> 
> 赞同：3
> 
> 时间：2012-09-24T14:17:36.070
> 
> 标签：android, resttemplate, android-annotations

我想使用自定义标头发出 POST 请求。我找不到如何使用 AA Rest API 执行此操作的信息 - [https://github.com/excilys/androidannotations/wiki/Rest%20API](https://github.com/excilys/androidannotations/wiki/Rest%20API)。

我应该使用用于经过身份验证的请求的 ClientHttpRequestInterceptor 吗？ [https://github.com/excilys/androidannotations/wiki/Authenticated-Rest-Client](https://github.com/excilys/androidannotations/wiki/Authenticated-Rest-Client)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:50:50.247

目前有一个未解决的问题：[https ://github.com/excilys/androidannotations/issues/323](https://github.com/excilys/androidannotations/issues/323)

目前，唯一的方法是使用自定义 ClientHttpRequestInterceptor。这是一个小例子：

```
@EBean
public class CustomHeaderInterceptor implements ClientHttpRequestInterceptor {

    @Override
    public ClientHttpResponse intercept(HttpRequest request, byte[] data, ClientHttpRequestExecution execution) throws IOException {
        request.getHeaders().add("myHeader", "value");
        return execution.execute(request, data);
    }

} 
```

然后，您需要将其链接到 restTemplate，如下所示：

```
@EBean
public class MyService {

    @RestService
    RestClient restClient;

    @Bean
    MobileParametersInterceptor mobileParametersInterceptor;

    @AfterInject
    public void init() {
        List<ClientHttpRequestInterceptor> interceptors = new ArrayList<ClientHttpRequestInterceptor>();
        interceptors.add(mobileParametersInterceptor);
        restClient.getRestTemplate().setInterceptors(interceptors);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:01:55.403

实际上，您必须将 ClientHttpRequestInterceptor 用于自定义标头。目前，这是我知道的唯一方法。

有关 RestTemplate 的更多信息，请参阅 Spring-Android 的官方[文档](http://static.springsource.org/spring-android/docs/1.0.x/reference/htmlsingle/)。

# xml - 引用在 Umbraco 中使用富文本编辑器放置的图像

> ID：12566895
> 
> 赞同：2
> 
> 时间：2012-09-24T14:17:42.457
> 
> 标签：xml, image, xslt, xpath, umbraco

有没有办法引用已放入 Umbraco 页面的富文本编辑器中的图像（使用 xslt）。我想从现有的新闻故事页面中提取这些图像并将它们加载到宏中以进行幻灯片放映。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:40:42.203

理论上，您可以针对您正在阅读的任何内容执行以下操作：

```
<xsl:template match="img">
  <img alt="{@alt}" src="{@src}" />
</xsl:template> 
```

但我不确定您要查询的内容是否是可解析的 xml。

您也可以尝试使用 razor 并引入 html 敏捷包：[http](http://htmlagilitypack.codeplex.com/) ://htmlagilitypack.codeplex.com/这可能会更容错一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:17:58.210

我想知道这篇文章是否对你有帮助？

[我可以使用 XSLT 解析 HTML 吗？](https://stackoverflow.com/questions/1639625/can-i-parse-an-html-using-xslt)

就我个人而言，我会使用剃须刀脚本和 Html Agility Pack，这将允许您像 xml 一样解析 html。

如果您想要一个示例，请查看此处：[http ://htmlagilitypack.codeplex.com/wikipage?title=Examples](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)

# crystal-reports - 在水晶报表中引用组中的第一条记录

> ID：12566897
> 
> 赞同：1
> 
> 时间：2012-09-24T14:17:55.097
> 
> 标签：crystal-reports

在我的报告中，在组页脚中，我想在组中除第一个记录之外的所有记录的列上添加总和。我怎样才能做到这一点？

我尝试了**插入 - 小计**，但它添加了所有记录。如果我可以访问每个组的第一条记录，我可以从总和中减去它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:26:31.997

假设您按 {Table.GroupID} 对报表进行分组，并且想要获取 {Table.NumericField} 的每个组的总数，不包括组中的第一条记录。

您可以通过创建一个运行总计来做到这一点，其中：

1.  要总结的字段：Table.NumericField；摘要类型：总和

2.  设置为使用公式进行评估：`previous({Table.GroupID})={Table.GroupID}`

3.  更改组时重置

第二步确保为除组中的第一个记录*之外*的每条记录更新组总计，并且可以将其读取为“仅当前一条记录的 GroupID 与当前记录的 GroupID 相同时才评估此运行总计。

# javascript - 向 raphael js 添加函数

> ID：12566900
> 
> 赞同：0
> 
> 时间：2012-09-24T14:18:06.490
> 
> 标签：javascript, raphael

我正在尝试向 raphael 添加一个绘制日历但没有成功的函数。

这是我的代码：

```
Raphael.fn.calenderView = function () {

};

$(function () {
    var paper = Raphael('body');
    paper.calenderView();
}); 
```

我得到的错误是纸张没有方法calenderView。可能有一些明显的错误，也许我只是厌倦了看到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:26:19.907

你可以这样做：

```
$(function () {
    Raphael.fn.calenderView = function () {alert("calendar");};
    var paper = new Raphael(0,0,200,200);
    paper.calenderView();
});​ 
```

参见示例小提琴[http://jsfiddle.net/58yqW/](http://jsfiddle.net/58yqW/)

# java - 将 Java 桌面应用程序迁移到 Android 和 iPhone

> ID：12566901
> 
> 赞同：1
> 
> 时间：2012-09-24T14:18:12.247
> 
> 标签：java, android, iphone, jquery-mobile, haxe

我有一个桌面 Java 应用程序，需要将其迁移到各种智能手机。

以下是它的作用的简短摘要：

它可以记录人的讲话，将其保存为 wav 文件并将其发送到 Web 服务。Web 服务可以分析它将一些元数据发送回客户端。所以应用程序正在访问我电脑的麦克风和硬盘，并且可以与其他服务进行通信。

我需要将其迁移到 android 和 iOS。我一直在寻找一种解决方案，我可以在其中开发一次并将结果编译到 android 和 iOS。我发现例如[haxe](http://www.haxe.org/)或[jQuery Mobile](http://jquerymobile.com/)作为跨手机开发解决方案。

跨框架的要求如下：

*   我需要能够访问麦克风
*   我需要能够在手机上录制和存储 wav 文件
*   当 wlan 可用于廉价数据传输时，我需要能够告诉用户
*   我需要能够将文件发送到网络服务并等待结果 *

我的问题是我无法使用 javaScript 访问手机的麦克风和存储，或者我可以吗？您是否看到一种允许我开发一次并在任何地方编译的方式/框架？还是我必须学习 Objective-C 和 Android 才能完成我想做的事情？

我是这个电话开发的新手，如果你能指出我正确的方向，我会非常高兴。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:21:27.440

您可以使用诸如[phonegap 之](http://phonegap.com)类的移动框架，它允许您访问手机的所有功能（大部分），然后将相同的代码部署到多个平台，包括 android、iOS、windows phone 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:21:52.103

[AIR](http://cookbooks.adobe.com/post_SimpleAudioRecorder___Microphone_Access_API_AIR_2_-16746.html)可能会在这里为您提供帮助。我从未尝试过如此详细地查看它如何访问 Android 和 iPhone 上的麦克风 API，但您可以在 PC 上的 Flash 中执行此操作，因此它也可能适用于移动版本

# ios - 如何在单点触控中跟踪动画变化

> ID：12566903
> 
> 赞同：1
> 
> 时间：2012-09-24T14:18:19.117
> 
> 标签：ios, xamarin.ios, core-animation

我注意到有一种捕获动画完成的方法：

`UIView.SetAnimationDidStopSelector`

还有一种方法可以在持续时间内获得更改吗？我需要根据动画进度影响其他对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:44:21.270

很可能不是。

原生 Cocoa Touch 中的核心动画没有给你这样的回调，所以如果 Mono Touch 给你它们，我会非常惊讶。

请注意，该属性的实际值会立即更改为最终值。动画发生在一个单独的层（称为表示层）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:51:58.523

您可以在动画期间进行更新和用户交互，我想这就是您所追求的。例如：

```
UIView.Animate ( 0.5f, 0, UIViewAnimationOptions.LayoutSubviews | UIViewAnimationOptions.AllowUserInteraction, delegate { /* Animate things */}, delegate { /* Animation done */ } ); 
```

选项 LayoutSubviews 将在动画期间更新视图的子视图，您可以通过覆盖来影响视图的外观`LayoutSubviews()`。

我认为 AllowUserInteraction 是一种自我解释。

# r - 带加权非线性回归 (nls) 的 AIC

> ID：12566905
> 
> 赞同：2
> 
> 时间：2012-09-24T14:18:26.227
> 
> 标签：r, regression, nls, model-comparison

在将加权和未加权模型的偏差与 AIC 值进行比较时，我遇到了一些差异。一个一般的例子（来自'nls'）：

```
DNase1 <- subset(DNase, Run == 1)
fm1DNase1 <- nls(density ~ SSlogis(log(conc), Asym, xmid, scal), DNase1) 
```

这是未加权的拟合，在“nls”的代码中可以看到“nls”生成了一个向量`wts <- rep(1, n)`。

现在进行加权拟合：

```
 fm2DNase1 <- nls(density ~ SSlogis(log(conc), Asym, xmid, scal), 
                 DNase1, weights = rep(1:8, each = 2)) 
```

其中我为 8 种浓度中的每一种分配了增加的权重，并重复了 2 次。

现在`deviance`我得到：

```
deviance(fm1DNase1)
[1] 0.004789569

> deviance(fm2DNase1)
[1] 0.0164259 
```

告诉我加权拟合具有显着更高的偏差（更差拟合）。

现在`AIC`（或`BIC`）我得到

```
> AIC(fm1DNase1)
[1] -76.41642

> AIC(fm2DNase1)
[1] -372.5437 
```

这告诉我第二次拟合是更好的一个数量级（较低的 AIC）。为什么这样？

如果我`AIC`根据教科书中的残差平方和进行定义

```
RSS <- function (object) 
{
    w <- object$weights
    r <- residuals(object)
    if (is.null(w)) 
        w <- rep(1, length(r))
    sum(w * residuals(object)^2)
}

AICrss <- function(object)
{
  n <- nobs(object)
  k <- length(coef(object))
  rss <- RSS(object)
  n * log((2 * pi)/n) + n + 2 + n * log(rss) + 2 * k
} 
```

我明白了

```
> AICrss(fm1DNase1)
[1] -76.41642 
```

`stats:::AIC.logLik`与上述基于对数似然的 AIC ( ) 的值相同

但

```
> AICrss(fm2DNase1)
[1] -56.69772 
```

它更高并且完全适合第二个模型的更高偏差。

谁能启发我？'nls' 模型的标准 AIC 实施是否不适用于加权拟合？

干杯，安德烈

# c - 确定网络接口是无线还是有线

> ID：12566911
> 
> 赞同：13
> 
> 时间：2012-09-24T14:18:57.560
> 
> 标签：c, linux, sockets, networking

我有一个程序，它有两个独立的部分：一个应该在网络接口是无线 LAN 时执行，另一个应该在它是有线 LAN 连接时执行。我怎么能在我的程序中知道这一点？我应该使用什么功能来获取该信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T14:34:19.087

如果您的设备名称是`NETDEVICE`，则检查`/sys/class/net/NETDEVICE/wireless`目录是否存在是您可以使用的谓词。不过，这是一种仅限 Linux 的方法，它假定`/sys`已安装，这几乎总是正常情况。从脚本中使用这种方法也更容易，而不是处理 ioctl()s。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-24T14:31:49.033

您可以从命令行使用 iwconfig 命令：

```
$ iwconfig
lo        no wireless extensions.
eth0      no wireless extensions. 
```

如果您需要从 C 中使用它，正如上面@opaque 的链接所解释的那样，获取源代码或使用 strace 来查看您需要使用哪个 ioctls()：

```
ioctl(3, SIOCGIWNAME, 0x7fff82c0d040)   = -1 EOPNOTSUPP (Operation not supported)
ioctl(3, SIOCGIFFLAGS, {ifr_name="lo", ifr_flags=IFF_UP|IFF_LOOPBACK|IFF_RUNNING}) = 0
write(2, "lo        no wireless extensions"..., 35lo        no wireless extensions.

) = 35
ioctl(3, SIOCGIWNAME, 0x7fff82c0d040)   = -1 EOPNOTSUPP (Operation not supported)
ioctl(3, SIOCGIFFLAGS, {ifr_name="eth0", ifr_flags=IFF_UP|IFF_BROADCAST|IFF_RUNNING|IFF_MULTICAST}) = 0
write(2, "eth0      no wireless extensions"..., 35eth0      no wireless extensions.

) = 35 
```

请参阅[SIOCGIWNAME 用法](http://osdir.com/ml/linux.drivers.prism54.devel/2004-01/msg00016.html)：

```
#define SIOCGIWNAME 0x8B01 /* get name == wireless protocol */
/* SIOCGIWNAME is used to verify the presence of Wireless Extensions.
* Common values : "IEEE 802.11-DS", "IEEE 802.11-FH", "IEEE 802.11b"... 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-29T21:44:44.140

您可以调用`ioctl(fd, SIOCGIWNAME)`它返回无线扩展协议版本，该版本仅在无线接口上可用。

```
int check_wireless(const char* ifname, char* protocol) {
  int sock = -1;
  struct iwreq pwrq;
  memset(&pwrq, 0, sizeof(pwrq));
  strncpy(pwrq.ifr_name, ifname, IFNAMSIZ);

  if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
    perror("socket");
    return 0;
  }

  if (ioctl(sock, SIOCGIWNAME, &pwrq) != -1) {
    if (protocol) strncpy(protocol, pwrq.u.name, IFNAMSIZ);
    close(sock);
    return 1;
  }

  close(sock);
  return 0;
} 
```

有关完整示例，请参见：[https ://gist.github.com/edufelipe/6108057](https://gist.github.com/edufelipe/6108057)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T14:35:25.360

如果您以 NetworkManager 为目标，请查看其 API、[C 示例](http://cgit.freedesktop.org/NetworkManager/NetworkManager/tree/examples/C/glib)和[NMDeviceType](http://cgit.freedesktop.org/NetworkManager/NetworkManager/tree/include/NetworkManager.h#n101)。

# javascript - Modernizr.load 的使用

> ID：12566914
> 
> 赞同：1
> 
> 时间：2012-09-24T14:19:08.637
> 
> 标签：javascript, jquery, modernizr

我正在使用 Modernizr 有条件地加载资源。我的代码是

```
<link rel="stylesheet" type="text/css" media="all" href="stylesheet/style.css" />
<script type="text/javascript" src="javascript/jQuery/jquery-1.8.1.min.js"></script>
<script src="javascript/stickyheader/jquery.fixedheadertable.js"></script>
<link rel="stylesheet" type="text/css" media="all" href="javascript/stickyheader/defaultTheme.css" />
<script type="text/javascript" src="javascript/modernizr/modernizr.2.6.2.js"></script>
<script type="text/javascript">
    Modernizr.load([ {
        // If browser supports touch
        test : Modernizr.touch,
        //Load iPad related resorces 
        yep : [ 'javascript/ipad-default.js', 'javascript/touchscroll.js', 'javascript/ipad-scroll.js',
                'javascript/mobile.js' ],
        // Load common resorces 
        load : ['javascript/ipad-default.js']
    } ]);
</script> 
```

这工作正常。但我想知道`Modernizr.load`当我测试`Modernizr.touch`.

需要明确的是，我想将所有资源加载到`Modernizr.load`.

*我怎样才能做到这一点？这是一个好方法吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:22:12.887

是的你可以。这绝对是为 Web 应用程序使用资源加载器的好方法。但是，当通过 Modernizr 加载所有 CSS 时，我发现页面渲染有点崩溃。

```
// You can load CSS just like JS
Modernizr.load("stylesheet/style.css", [
  {
    test : Modernizr.touch,
    yep : [ 'javascript/touchscroll.js', 'javascript/ipad-scroll.js', 'javascript/mobile.js' ],
    load : [ 'javascript/ipad-default.js' ] // No need to specify this in 'yep' too
  }]); 
```

因为`Modernizr.load`是建立在 上`yepnope.js`的，[yepnope 文档](http://yepnopejs.com/)在资源加载方面比 Modernizr 教程更有趣一些。如果您不介意另一个框架，我可以推荐[requirejs](http://requirejs.org/)。这确实有助于解耦和加载您的组件。

# visual-c++ - 如何在 VS 2005/2008 中创建 ISAPI 过滤器

> ID：12566915
> 
> 赞同：1
> 
> 时间：2012-09-24T14:19:14.323
> 
> 标签：visual-c++, iis, iis-6, isapi, isapi-extension

在 VS 6.0 中，我们可以选择项目类型为 VC++ 下的 MFC ISAPI Extension Dll，然后将其配置为过滤器对象。我们如何在 VS 2005/2008 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:25:57.840

[ISAPI 项目模板在 2005 年被删除，](http://blogs.msdn.com/b/david.wang/archive/2006/03/25/mfc-isapi-template-and-isapi-development.aspx)类库支持在 2008 年被删除。

您可以在 VC6 中创建项目，然后将项目升级到 2005，但此方法在 2008 中不起作用，除非[您将 2005 ISAPI MFC 文件复制到 2008。](http://blogs.msdn.com/b/jpsanders/archive/2007/12/10/chttpserver-not-included-in-visual-studio-2008.aspx)

注意[ISAPI 过滤器已被弃用](http://technet.microsoft.com/en-us/library/hh831460.aspx)。IIS7 支持 ISAPI 过滤器，但不作为默认安装选项。

# ruby-on-rails - 在 ruby on rails 关联中感到困惑

> ID：12566918
> 
> 赞同：0
> 
> 时间：2012-09-24T14:19:23.083
> 
> 标签：ruby-on-rails, ruby

我有一个表，其中有一列`org_import_paths_id`

那`id`有另一个表的外键`org_import_paths`。此表有另一列`filename`。

我想`filename`在 ruby​​ on rails 中显示该表中的该表。我想将数据显示到网格中。请建议我做这些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:42:19.930

*“..我有一个有列的**表**..”* 让我们假设模型名称是`FirstTable`，表名称是`first_tables`。所以`Model`将是

```
class FirstTable < AR::Base
    belongs_to :org_import_paths, :foreign_key => 'org_import_paths_id'
end 
```

现在，如果你有一个像 FirstTable 这样的对象

```
ft = FirstTable.first 
```

你可以得到像

```
ft.org_import_paths.filename 
```

请您澄清*“我想将数据显示到网格”*这一行。

# java - Spring roo - 添加 CLOB 字段

> ID：12566920
> 
> 赞同：1
> 
> 时间：2012-09-24T14:19:25.437
> 
> 标签：java, sql, spring-roo, clob

在我的 Web 应用程序中，我将一些文本消息保存在数据库表（Oracle）的 COLUMN 中。之前的 VARCHAR2 长度（最大长度）是（500 BYTE）。现在最大长度增加到 4000 个字符。所以我需要在我的域类中添加一个“CLOB”字段。
谁能澄清一下为了在我的域类中创建一个 CLOB 字段需要遵循哪些步骤。我的数据库中也有 CLOB cloumn。（开始的命令/语法是什么？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:09:26.477

在数据库中添加 CLOB

并在域类中添加以下代码是解决方案。

```
@Lob
private String message; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T10:25:02.700

如果您需要创建一个`CLOB`名为`message`then 的字段，您将在 Roo Shell 上运行以下命令：

```
field string --fieldName message --lob true 
```

# javascript - 可以在服务器端打开/关闭 iframe 吗？

> ID：12566924
> 
> 赞同：2
> 
> 时间：2012-09-24T14:19:43.000
> 
> 标签：javascript, iframe, apache

可以在服务器端打开/关闭 iframe 吗？

不应该`<iframe/>`支持客户端吗？GoDaddy 是否有可能`<iframe/>`默认禁用？这甚至可以在服务器端控制吗？这只是一个`httpd`没有花里胡哨的标准 Apache 服务器（没有应用服务器、代理等）。GoDaddy 是否可以“围绕”我的页面执行某种服务器端 JavaScript，从而阻止`<iframe/>`s 被使用？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:59:19.853

Web 服务器可以通过 HTTP 标头请求浏览器不允许资源在帧中的响应。这是一种安全措施。

浏览器对服务器的请求：

```
GET /index.html HTTP/1.1
Host: www.bank.com 
```

服务器对浏览器的响应：

```
HTTP/1.1 200 OK
X-Frame-Options: DENY
Content-Type: text/html
Content-Length: ... 
```

每个浏览器都可以实现如何处理该请求。一个例子可能是 badsite.html 有一个带有 bank.html 的 IFRAME，然后试图用它做坏事。托管bank.html 的服务器可以请求在框架中不允许bank.html（通过“拒绝”）。“好”的浏览器会识别请求，并且不允许在框架中使用 bank.html。如果出于某种原因 bank.html 应该在一个框架中，但只能在他们自己的站点中的一个框架中，他们可以使用“SAMEORIGIN”选项，该选项可以在他们的网站上使用，但不能在其他任何人的网站上使用。默认是一般允许帧。

# python - 瓶版 Python Web 框架

> ID：12566927
> 
> 赞同：1
> 
> 时间：2012-09-24T14:19:52.350
> 
> 标签：python, frameworks, web, version, bottle

需要瓶子方面的帮助，我有一个全新安装的 Ubuntu 11.10，我正在尝试使用下一个命令来获取瓶子：sudo apt-get install python-bottle，我得到了瓶子版本 0.9.5-1，那不是最后一个（0.10.6-1）并且不包括我需要的一些功能。有人知道为什么吗？我不想使用easy-install或pip，求助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:31:56.323

您需要将 Ubuntu 安装升级到[精确](http://packages.ubuntu.com/precise/python-bottle)（0.10.6 版）或[quantal](http://packages.ubuntu.com/quantal/python-bottle)（0.10.11 版）。

较旧的 Ubuntu 版本不会获得新版本的软件包；`python-bottle`也不是[Ubuntu 反向移植](https://help.ubuntu.com/community/UbuntuBackports)包的一部分。

我强烈建议您使用[virtualenv](http://www.virtualenv.org/en/latest/index.html)并在其中安装最新的瓶子版本`pip`。Ubuntu 软件包不够灵活，无法跟上许多 Python 软件包更快的发布周期。

# jsf - 使用jsf编辑数据表中的行时导航到锚点

> ID：12566928
> 
> 赞同：0
> 
> 时间：2012-09-24T14:19:54.587
> 
> 标签：jsf, jakarta-ee, datatable

（使用 jsf-2）

我有一个数据表，其中有一列可以编辑：

```
 <h:column>
            <f:facet name="header">
                <h:outputText value="Label" style="font-weight: bold">
                </h:outputText>
            </f:facet>
            <h:inputText value="#{m.author2displayed}" rendered="#{m.editable}" size="10"/>
            <h:outputText value="#{m.author2displayed}" rendered="#{not m.editable}"/>
            <h:commandButton value="save edits" rendered="#{m.editable}" onclick="submit()" action ="#{finalCheckBean.saveedits()}"/>
        </h:column> 
```

当我单击“保存编辑”时，我们停留在同一个视图上，这就是所需的效果（finalCheckBean.saveedits() 返回 null）。

问题：浏览器滚动回到页面顶部，而我希望页面保持显示在刚刚编辑的行的级别。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:25:09.837

如果您已经在使用 JSF2，只需`<f:ajax>`在命令按钮中引入一些 ajax 魔法。将待执行和渲染的组件包装在一个通用组件中，`execute`并`render`在`<f:ajax>`.

```
<h:column>
    <f:facet name="header">
        <h:outputText value="Label" style="font-weight: bold" />
    </f:facet>
    <h:panelGroup id="author2displayed">
        <h:inputText value="#{m.author2displayed}" rendered="#{m.editable}" size="10"/>
        <h:outputText value="#{m.author2displayed}" rendered="#{not m.editable}"/>
        <h:commandButton value="save edits" rendered="#{m.editable}" onclick="submit()" action="#{finalCheckBean.saveedits()}">
            <f:ajax execute="author2displayed" render="author2displayed" />
        </h:commandButton>
    </h:panelGroup>
</h:column> 
```

这样滚动位置将保持不变（前提是您仍然返回`null`或`void`从操作方法返回）。

# c# - 将消息从手机 (Android) 发送到 PC(Windows)

> ID：12566934
> 
> 赞同：-1
> 
> 时间：2012-09-24T14:20:21.157
> 
> 标签：c#, android

我需要从运行在 Android Phone 上的应用程序向运行在 Windows 7 平台上的 PC/笔记本电脑上的应用程序（C#/Windows 应用程序）发送消息（例如字符串格式的“Hello World！”）？

知道如何实现这一目标吗？

谢谢金星

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:21:18.707

只需在 Android 和 PC 之间创建 UDP 套接字即可。或者，您可以使用 XMPP。

# c# - 仅绘制 TableLayoutPanel 单元格的外边框

> ID：12566938
> 
> 赞同：10
> 
> 时间：2012-09-24T14:20:28.327
> 
> 标签：c#, .net, winforms

例如，如果我有 3 行和 5 列，我正在使用 TableLayoutPanel。我只想为整个面板绘制外边框。默认情况下，面板提供 CellBorderStyle，它将所有侧边框添加到所有可用的单元格。有什么方法可以只设置外部边界吗？

我在下面提供了一个示例代码。

```
 TableLayoutPanel tblPanel = new TableLayoutPanel;
    tblPanel.CellBorderStyle = TableLayoutPanelCellBorderStyle.Single;
    Label lblName;
    TextBox txtName;
    Button btnAdd;
    int colCnt = 0;
    for(int rw =0; rw < 3; rw++)
    {
            lblName = new Label();
            lblName.Name = "mylabel" + rw.ToString();
            tblPanel.Controls.Add(lblName, colCnt, rw);
            colCnt++;

            txtName = new TextBox();
            txtName.Name = "mytext" + rw.ToString();
            tblPanel.Controls.Add(txtName, colCnt, rw);
            colCnt++;

            btnAdd = new Button();
            btnAdd.Name = "mybutton" + rw.ToString();
            tblPanel.Controls.Add(btnAdd, colCnt, rw);

            colCnt = 0;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-05-03T21:48:27.780

TableLayoutPanel 实际上支持 BorderStyle 属性，这是您想要的。例如：

```
tableLayoutPanel.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle; 
```

[https://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.borderstyle(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.borderstyle(v=vs.110).aspx)

它装饰有：

```
[Browsable(false)]
[EditorBrowsable(EditorBrowsableState.Never)] 
```

所以 Intellisense 不会向您展示它，但它已记录在案并且可以正常工作。我不知道为什么它不可浏览。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T14:33:20.800

You'd be better off painting the cell border yourself. Something along the following lines, then customize:

```
public TableForm() {
    InitializeComponent();
    this.tableLayoutPanel.CellPaint += tableLayoutPanel_CellPaint;
}

private void tableLayoutPanel_CellPaint(object sender, TableLayoutCellPaintEventArgs e) {
    var topLeft = e.CellBounds.Location;
    var topRight = new Point(e.CellBounds.Right, e.CellBounds.Top);
    e.Graphics.DrawLine(Pens.Black, topLeft, topRight);
} 
```

At design-time: ![At design-time](../Images/0a88e4e70ff4637d890b5563d10757dc.png)

At runtime: ![At runtime](../Images/ddf5c29a060d1aa770b5e9fb48d15c10.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-05T13:01:17.970

TableLayOutPanel 本身不支持边框属性，但 CellBorderStyle 不是您想要的。

我建议您将 TableLayOutPanel 放入 Panel 控件中，并将 TableLayOutPanel 的 Dock 属性设置为 Fill。

然后将 Panel 的 BorderStyle 设置为您想要的（FixedSingle 或 Fixed3D）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-22T09:03:48.820

您可以通过将属性 CellBorderStyle 更改为 Single 或所需的选择来实现。

物业变更：

[![在此处输入图像描述](../Images/3638b316a8447f939b7c543a84e7bc0d.png)](https://i.stack.imgur.com/GgWOA.png)

样本 ：

[![在此处输入图像描述](../Images/a44262805d526559c42548b65dda6108.png)](https://i.stack.imgur.com/VtYBh.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-12T10:58:23.327

```
public TestForm()
    {
        InitializeComponent();
        tableLayoutPanel.Paint += tableLayoutPanel_Paint;
    }

private void tableLayoutPanel_Paint(object sender, PaintEventArgs e){

       e.Graphics.DrawRectangle(new Pen(Color.Blue), e.ClipRectangle);

    } 
```

# android - Android apk签名信息

> ID：12566939
> 
> 赞同：0
> 
> 时间：2012-09-24T14:20:33.407
> 
> 标签：android, apk, sign

在 apk 中存储标志信息的位置在哪里？apk 文件是带有 .apk 扩展名的 zip 存档。我可以更改一些追索权还是会影响签名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T14:25:19.683

使用下面的这种方法，您可以编辑资源，但您必须退出 apk，但也如下所示。此示例编辑图像资源，但这可以与任何资源一起使用

首先使用 android SDK 中的“aapt”工具列出资源：

```
$ANDROID/tools/aapt list file.apk 
```

一旦我们找到需要更改的资源，我们使用“remove”和“add”来替换它们：

```
$ANDROID/tools/aapt remove file.apk res/drawable/file.png
$ANDROID/tools/aapt add file.apk res/drawable/file.png 
```

然后我们必须删除旧的 APK 签名并用新的签名替换它。我们将生成一个伪造的自签名密钥来对 APK 进行签名：

```
$ openssl genrsa -out key.pem 1024
$ openssl req -new -key key.pem -out request.pem
$ openssl x509 -req -days 9999 -in request.pem -signkey key.pem -out certificate.pem
$ openssl pkcs8 -topk8 -outform DER -in key.pem -inform PEM -out key.pk8 -nocrypt 
```

从 APK 中删除旧签名：

```
for f in `$ANDROID/tools/aapt list file.apk |grep "META-INF"` ; do
$ANDROID/tools/aapt remove file.apk $f
done 
```

现在我们对 APK 进行签名，我使用 signapk.jar 来执行此操作：

```
$ java -jar signapk.jar certificate.pem key.pk8 file.apk file-signed.apk 
```

# html - 如何让块级元素粘在 div 的底部（它本身是绝对定位的）？

> ID：12566940
> 
> 赞同：2
> 
> 时间：2012-09-24T14:20:49.283
> 
> 标签：html, css

我有以下html代码：

```
<div class="main">
    <div class="sidebar">
     <div class="sidebar-footer">

      </div>
    </div>
</div> 
```

和CSS：

```
.main { 
   position: relative;
}

.sidebar {
     position: absolute;
     bottom: 0;
     left: 0; 
     right: 0;
     height: 500px;
     margin-bottom: 10px;
} 
```

我也需要侧边栏页脚将自己与侧边栏的底部对齐。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:27:24.950

[工作小提琴。](http://jsfiddle.net/XswfB/)

CSS：

```
.main { 
    border: solid 1px blue;
    position: relative;
}

.sidebar {
    border: solid 1px red;
     position: relative;
     bottom: 0;
     left: 0; 
     right: 0;
     height: 500px;
     margin-bottom: 10px;
}
.sidebar-footer
{
    border: solid 1px green;
    position: absolute;
    width: 100%;
    bottom: 0px;
} 
```

​</p>

# php - PHP/MySQL 作业排队系统不止一次做作业

> ID：12566943
> 
> 赞同：0
> 
> 时间：2012-09-24T14:20:53.647
> 
> 标签：php, mysql, cron, rabbitmq, zeromq

我提出了一个使用 PHP、MySQL 和 cron 的非常简单的作业排队系统。

1.  `A()`Cron 会调用一个网站，该网站有一个每 2 秒调用一次函数的函数。`A()`从表中搜索并检索一行`A`
2.  检索一行后，将使用列`A()`中的值更新该行`1``working`
3.  `A()`然后对检索到的行中的数据做一些事情
4.  `A()``B`然后使用处理步骤中获得的值在表中插入一行`3`。

**问题：**我注意到`B`由于函数多次`A()`从表中检索同一行，表中有时会出现重复值。`A`

上面设计的哪一部分允许重复处理，应该如何修复？

*请不要建议像rabbitMQ这样的东西，至少要详细说明它是如何实现的。我阅读了他们的一些文档，但不明白如何实现它。谢谢！*

**更新：**`c()`我有一个每分钟调用一个页面（调用 function ）的 cron 作业。该函数`c()`执行 30 次循环，调用函数`A()`，`sleep()`用于延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:41:22.010

提供的答案很好，文件锁效果很好，但是，由于您使用的是 MySQL，我想我也会回答。使用 MySQL，您可以使用[GET_LOCK](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_get-lock "GET_LOCK")和[RELEASE_LOCK](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_release-lock "RELEASE_LOCK")实现协作异步锁定。

> *免责声明：以下示例未经测试。我之前已经成功地实现了一些非常接近这个的东西，下面是大致的想法。

假设您已将此 GET_LOCK 函数包装在名为 Mutex 的 PHP 类中：

```
class Mutex {
  private $_db = null;
  private $_resource = '';

  public function __construct($resource, Zend_Db_Adapter $db) {
    $this->resource = $resource;
    $this->_db      = $db;
  }

  // gets a lock for $this->_resource; you could add a $timeout value,
  // to pass as a 2nd parameter to GET_LOCK, but I'm leaving that
  // out for now
  public function getLock() {
    return (bool)$this->_db->fetchOne(
      'SELECT GET_LOCK(:resource)',
      array(
        ':resource' => $this->_resource
      ));
  }

  public function releaseLock($resource) {
    // using DO because I really don't care if this succeeds; 
    // when the PHP process terminates, the lock is released
    // so there is no worry about deadlock
    $this->_db->query(
      'DO RELEASE_LOCK(:resource)',
      array(
        ':resource' => $resource
      ));
  }
} 
```

在 A() 从表中获取方法之前，让它请求锁。您可以使用任何字符串作为资源名称。

```
class JobA {
  public function __construct(Zend_Db_Adapter $db) {
    $this->_db = $db;
  }

  public function A() {
    // I'm assuming A() is a class method and that the class somehow
    // acquired access to a MySQL database - pretend $this->db is a 
    // Zend_Db instance. The resource name can be an arbitrary 
    // string - I chose the class name in this case but it could be 
    // 'barglefarglenarg' or something.
    $mutex = new Mutex($this->db, get_class($this));

    // I choose to throw an exception but you could just as easily 
    // die silently and get out of the way for the next process, 
    // which often works better depending on the job
    if (!$mutex->getLock())
      throw new Exception('Unable to obtain lock.');

    // Got a lock, now select the rows you need without fear of 
    // any other process running A() getting the same rows as this
    // process - presumably you would update/flag the row so that the
    // next A() process will not select the same row when it finally
    // gets a lock. Once we have our data we release the lock

    $mutex->releaseLock();

    // Now we do whatever we need to do with the rows we selected
    // while we had the lock
  }
} 
```

当您设计多个进程选择和修改相同数据的场景时，这种事情会非常方便。使用 MySQL 时，为了可移植性，我更喜欢这种数据库方法而不是文件锁定机制 - 如果锁定机制在文件系统外部，则更容易在不同平台上托管您的应用程序。当然可以，而且效果很好，但是根据我的个人经验，我发现这更容易使用。

如果您计划将您的应用程序跨数据库引擎移植，那么这种方法可能不适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:27:13.533

一个问题可能是一开始的处理：

> Cron 将调用函数 A() 每 2 秒从表 A 中搜索和检索一行。

在没有索引的表上处理这部分脚本可能需要超过两秒的时间，因此您可以选择多行。

您可以使用独占文件锁来解决此问题。

我感觉不仅仅是工作流程，如果您可以显示一些附加的基本代码，那么代码中也可能存在问题。

### 编辑

我认为从你的最后一次更新来看是时机：

> 更新：我有一个每分钟调用一个页面（调用函数 c()）的 cron 作业。这个函数 c() 执行 30 次循环，调用函数 A()，使用 sleep() 来延迟。

那是很多的跳跃，我认为您可能会遇到 cron 重叠的线程问题。

# perl - 使用 Dist::Zilla 构建 perl 模块时提示用户提供选项

> ID：12566945
> 
> 赞同：2
> 
> 时间：2012-09-24T14:20:58.223
> 
> 标签：perl, testing, cpan, dist-zilla

我有一个要发布到 CPAN 的模块，我喜欢使用[dzil](http://dzil.org)进行打包和发布。但是，该模块依赖于外部应用程序，虽然我知道它安装在我的机器上的位置，但我想请用户输入它在他们机器上的安装位置。在 Perl 的单元测试期间阅读了[Prompt user](https://stackoverflow.com/questions/7629363/prompt-user-during-unit-test-in-perl)我看到 ExtUtils::MakeMaker::prompt 做了我想做的事情。

使用 dzil 时，我将如何合并它（或类似的东西）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:55:00.477

标准的[MakeMaker](https://metacpan.org/module/Dist%3a%3aZilla%3a%3aPlugin%3a%3aMakeMaker) dzil 插件只支持基本的 Makefile.PL。（嗯，它可以使用[File::ShareDir::Install](https://metacpan.org/module/File%3a%3aShareDir%3a%3aInstall)，但这是它的限制。）如果您需要更复杂的安装时行为，您将需要使用其他东西。

我推荐我的[MakeMaker::Custom](https://metacpan.org/module/Dist%3a%3aZilla%3a%3aPlugin%3a%3aMakeMaker%3a%3aCustom)插件。您编写自己的 Makefile.PL，它可以做[ExtUtils::MakeMaker](https://metacpan.org/module/ExtUtils%3a%3aMakeMaker)能够做的任何事情，包括提示信息。您仍然可以随时`dzil`添加诸如先决条件之类的内容`dzil build`，因此您仍然可以使用[AutoPrereqs](https://metacpan.org/module/Dist%3a%3aZilla%3a%3aPlugin%3a%3aAutoPrereqs)。（实际上，我推荐[ModuleBuild::Custom](https://metacpan.org/module/Dist%3a%3aZilla%3a%3aPlugin%3a%3aModuleBuild%3a%3aCustom)，但如果你想坚持使用 MakeMaker，那没关系。）

注意：您还应该允许在命令行上提供您提示的信息。这将帮助那些试图使用自动构建工具打包您的发行版的人。但这是一个 MakeMaker 问题，而不是 Dist::Zilla 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:29:45.260

~~用户根本不应该通过 Dist::Zilla 安装。正如其文档明确指出的那样，它只是一个作者工具。Dist::Zilla 旨在构建通过 EUMM 或 M::B 安装的发行版。~~

编辑：鉴于您的评论，我会说，听起来您的构建过程不适合使用 Dist::Zilla，至少始终如一。我建议使用它再次构建它，然后转向使用它构建的 EUMM 或 M::B，根据您的目的对其进行修改并继续开发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:01:22.023

如果您使用 ExtUtil::MakeMaker 来安装您的发行版，那么您可以使用 dzil 插件[Dist::Zilla::Plugin::MakeMaker::Runner](https://www.metacpan.org/module/Dist%3a%3aZilla%3a%3aPlugin%3a%3aMakeMaker%3a%3aRunner)（这是一口）将自定义`Makefile.PL`与您的 dist 捆绑在一起，而不是生成默认一个。

如果需要，这将允许您`prompt`从内部收集自定义信息。`Makefile.PL`

# c# - 将通用对象序列化为实现自定义 IFormatter 的 *.INI 文本文件

> ID：12566946
> 
> 赞同：3
> 
> 时间：2012-09-24T14:20:58.910
> 
> 标签：c#, serialization, ini

早上好。

我需要将几乎任何类型的可序列化**对象序列化为*****.INI 文件**。
我正在尝试实现`IFormatter`，其中`void Serialize(Stream, object)`方法从对象实例获取属性信息，然后为原始类型或部分写入键/值+复杂类型的键/值。

将此代码作为要序列化的对象的示例。

```
[Serializable]
public class EmployeeList
{
    #region Properties
    public List<Employee> Employees { get; private set; }

    public string Banana { get; set; }
    #endregion

    #region Constructors
    public EmployeeList()
    {
        Employees = new List<Employee>();
    }
    #endregion

    #region Public Methods
    public void Serialize()
    {
        IFormatter formatter = new IniFormatter();

        using (FileStream outputStream = File.Create("employees.ini"))
        {
            try
            {
                formatter.Serialize(outputStream, this);
            }
            catch (SerializationException ex)
            {
                //...
            }
        }
    }
    #endregion
}

[Serializable]
public class Employee
{
    #region Properties
    public string Name
    {
        get;
        set;
    }

    public Gender Gender
    {
        get;
        set;
    }

    public List<Role> Roles
    {
        get;
        set;
    }
    #endregion

    #region Constructors
    public Employee()
    {
    }
    #endregion
}

[Serializable]
public enum Gender
{
    Male,
    Female,
    Other
}

[Serializable]
public class Role
{
    public string Name
    {
        get;
        set;
    }

    public int Value
    {
        get;
        set;
    }

    #region Constructors
    public Role()
    {

    }
    #endregion
} 
```

好吧，因为我试图通过反射来获取属性名称和值，所以一切似乎都是微不足道的；`System.Reflection.TargetParameterCountException`当我试图反思时，我不断地得到一个`List<Employee>`（见方法`pi.GetValue(obj, null);`，在哪里`pi`）`PropertyInfo`。

这是我的代码`IniFormatter`：

```
public class IniFormatter : IFormatter
{
    #region Properties
    public ISurrogateSelector SurrogateSelector { get; set; }

    public SerializationBinder Binder { get; set; }

    public StreamingContext Context { get; set; }
    #endregion

    #region Constructors
    public IniFormatter()
    {
        Context = new StreamingContext(StreamingContextStates.All);
    }
    #endregion

    #region IFormatter Members
    public object Deserialize(Stream serializationStream)
    {
        throw new NotImplementedException();
    }

    public void Serialize(Stream serializationStream, object graph)
    {
        var propertyInfos = graph.GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance);
        StreamWriter sw = new StreamWriter(serializationStream);

        foreach (var propertyInfo in propertyInfos)
        {
            if (!propertyInfo.CanRead)
            {
                continue;
            }

            if (Attribute.IsDefined(propertyInfo, typeof (NonSerializedAttribute)))
            {
                continue;
            }

            if (propertyInfo.PropertyType.IsPrimitive)
            {
                sw.WriteLine("{0}={1}", propertyInfo.Name, propertyInfo.GetValue(graph, null));
            }

            //object/complex types need to recursively call this method until the end of the tree is reached
            else
            {
                var complexType = GetPropertyValue(graph, propertyInfo.Name);
                Serialize(serializationStream, complexType);
            }
        }

        sw.Close();
    }
    #endregion

    public static object GetPropertyValue(object sourceObject, string propertyName)
    {
        if (sourceObject == null)
        {
            return null;
        }

        object obj = sourceObject;

        // Split property name to parts (propertyName could be hierarchical, like obj.subobj.subobj.property
        string[] propertyNameParts = propertyName.Split('.');

        foreach (string propertyNamePart in propertyNameParts)
        {
            if (obj == null)
            {
                return null;
            }

            // propertyNamePart could contain reference to specific 
            // element (by index) inside a collection
            if (!propertyNamePart.Contains("["))
            {
                PropertyInfo pi = obj.GetType().GetProperty(propertyNamePart, BindingFlags.Public | BindingFlags.Instance);
                if (pi == null)
                {
                    return null;
                }

                obj = pi.GetValue(obj, null);
            }
            else
            {
                // propertyNamePart is a reference to specific element 
                // (by index) inside a collection
                // like AggregatedCollection[123]
                // get collection name and element index
                int indexStart = propertyNamePart.IndexOf("[") + 1;
                string collectionPropertyName = propertyNamePart.Substring(0, indexStart - 1);
                int collectionElementIndex = Int32.Parse(propertyNamePart.Substring(indexStart, propertyNamePart.Length - indexStart - 1));
                //   get collection object
                PropertyInfo pi = obj.GetType().GetProperty(collectionPropertyName, BindingFlags.Public | BindingFlags.Instance);
                if (pi == null)
                {
                    return null;
                }

                object unknownCollection = pi.GetValue(obj, null);
                //   try to process the collection as array
                if (unknownCollection.GetType().IsArray)
                {
                    object[] collectionAsArray = unknownCollection as Array[];
                    obj = collectionAsArray[collectionElementIndex];
                }
                else
                {
                    //   try to process the collection as IList
                    IList collectionAsList = unknownCollection as IList;
                    if (collectionAsList != null)
                    {
                        obj = collectionAsList[collectionElementIndex];
                    }
                    else
                    {
                        // ??? Unsupported collection type
                    }
                }
            }
        }

        return obj;
    }
} 
```

我从控制台应用程序运行我的测试，这样做：

```
 Employee employee = new Employee {Name = "Nando", Gender = Gender.Male, Roles = new List<Role> {new Role {Name = "CEO", Value = 1}}};

        EmployeeList employeeList = new EmployeeList();
        employeeList.Banana = "It's delicious!";
        employeeList.Employees.Add(employee);

        employeeList.Serialize(); 
```

我可以获得`Banana`属性值（对不起，属性名称，当我生气时，我的命名约定会发疯），没有别的。

我知道，这是一个相当“解决我的问题”的问题，但我找不到可以理解的来源，我可以完全反映一个对象及其属性名称和值的处理。
所以我向熟练的开发人员寻求帮助，向我指出一些来源，我快疯了。:-) 非常感谢，
南多

# jquery - jQuery 删除移动样式表 onclick 并通过 cookie 保留状态？

> ID：12566947
> 
> 赞同：0
> 
> 时间：2012-09-24T14:21:02.283
> 
> 标签：jquery, cookies, stylesheet

我在试图弄清楚如何将“查看完整网站”链接添加到网站的移动版本时遇到问题。移动版是网站的受限版本，我希望用户可以选择点击链接并查看完整的网站。这是我能想到的最好的折衷方案，因为该网站很旧，我无法重建它以提高响应能力。移动样式表包含基于设备宽度的媒体查询中的所有移动样式。

所以，我知道我可以使用以下内容删除样式表：

```
$('link[rel=stylesheet]').remove(); 
```

但是我如何指定一个特定的样式表呢？我可以在移动样式表中添加一个 ID 并将其作为目标吗？我将如何从链接触发它？

移动样式表是：

```
<link rel="stylesheet" media="screen" type="text/css" href="/scripts/small_devices.css" /> 
```

另外，关于通过 cookie 保存此状态的任何提示？出于某种原因，我对此完全感到困惑。

任何提示表示赞赏！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:51:41.837

好的 - 我想我已经想通了：

我向移动样式添加了一个 ID，如下所示：

```
<link rel="stylesheet" media="screen" type="text/css" id="mobileSheet" href="small_devices.css" /> 
```

然后添加休闲脚本和html：

```
$(document).ready(function () {
$("#removeStyle").click(function () {                           
    jQuery('#mobileSheet').remove();
    });
});

<p id="removeStyle">View Full Site</p> 
```

这似乎工作正常。我仍然不确定如何删除 cookie 以保留此状态 - 但至少这是我问题第一部分的答案。

# php - Zend 分页和路由

> ID：12566958
> 
> 赞同：1
> 
> 时间：2012-09-24T14:21:29.753
> 
> 标签：php, zend-framework

让我的 URL 正常工作有点麻烦。

URL 如下所示：/messages/from/1/page/5

我的路线看起来像这样

```
$router->addRoute('messages-from',
    new Zend_Controller_Router_Route('messages/from/:user_id/:page', array(
    'controller' => 'messages',
    'action' => 'from',
    'page' => 1
))
); 
```

哪个工作正常。但是 URL 缺少 /page/ 部分。如果我添加它：

```
'messages/from/:user_id/page/:page' 
```

然后它会中断并且 user_id 参数始终为空。

我怎样才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:24:15.080

由于您希望能够`/page/`从 URL 中删除部分，因此您必须定义两个单独的路由，一个匹配用户 ID 和页面参数，一个仅匹配用户 ID 而没有页面，以便路由器可以找到路由在这两种情况下都匹配。

或者，这种[`regex`](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.regex)基于路由的方法适用于这两种情况。

```
$route = new Zend_Controller_Router_Route_Regex(
    'messages/from/(\d+)(?:/page/(\d+)/?)?',
    array(
        'controller' => 'messages',
        'action'     => 'from',
        'page'       => 1,
    ),
    array(
        1 => 'from',
        2 => 'page',
    )
);

$router->addRoute('messages-from', $route); 
```

根据您提供的 URL，我在正则表达式中假设`from`参数是整数。如果可以传递字符串，则需要将`(\d+)`模式更改为更合适的形式，例如`([\w\d_-\.]+)`.

# c++ - C ++游戏对键没有时间响应

> ID：12566959
> 
> 赞同：0
> 
> 时间：2012-09-24T14:21:32.833
> 
> 标签：c++

我正在使用 Ncurses 库在 C++ 中制作 Pacman。我可以用我的代码移动 Pacman，但是在不同方向之间切换需要很多时间。例如，当 Pacman 向左移动并且我按下右箭头键时，它需要一些时间才能开始向右移动。

```
 if (ch==KEY_LEFT)
 {
    int b,row,column;
    getyx(stdscr,row,column);
    for (b=column;b>=0;b-=1)    //loop to move the pacman left until it hits the wall
    {

     mvprintw(row,b,">");  //print the ">" symbol
     refresh();
     waitf(0.2);
     attron(COLOR_PAIR(1));      //this pauses the game for 1 second
     mvprintw(row,b,">");
     attroff(COLOR_PAIR(1));
     refresh();
     waitf(0.2);
     mvprintw(row,(b),"O");  //showing the open mouth of pacman
     refresh();
     waitf(0.2);
     attron(COLOR_PAIR(1));a
     mvprintw(row,(b),"O");

      attroff(COLOR_PAIR(1));

      int h=0;
      h=getch();

      if (h!=KEY_LEFT)
      {
          break;
      }
  }
}
 right=getch();
 loop for right in an if condition
 up=getch();
 loop for up in an if condition
 down=getch();
 loop for moving down in an if condition 
```

我对右、上和下做了同样的事情。此外，我在每个 if 语句之前都引入了新变量来存储 getch() 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:12:17.773

可能是 waitf(0.2) 导致程序在读取更多键之前等待？如果有输入，您可能会考虑中断等待......您可以使用定时选择来代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:49:15.903

不要把所有东西都放在键盘例程中。它减慢了一切。

然后尝试 `if (ch==KEY_LEFT) go_left=true`在密钥处理程序之外的函数中执行所有这些操作。

并`go_left==true`一直保持`true`到`ch==KEY_RIGHT`被按下，然后`go_left=false`。

示例游戏结构：

```
#include <stdio.h>
#include <conio.h>
#include <iostream> 

//#include "gamestuff.h"

using namespace std;

#define KB_ESCAPE 27
#define KB_UP 72
#define KB_DOWN 80
#define KB_LEFT 75
#define KB_RIGHT 77
#define KB_F8 66

int keypress=0;
bool go_left=false;
bool go_right=false;
bool go_up=false;
bool go_down=false;

void game_menu();
void keyboard_stuff();
void graphics_stuff();
void game_loop();

int main()
{
 game_menu();
 game_loop();

 return 0;
}

void game_menu()
{
    cout<<"Pacman Game  \n";
    cout<<"  \n";
    cout<<"[1] Resume Game  \n";
    cout<<"[2] Save Game  \n";
    cout<<"[Esc] Exit Game  \n";
    cout<<"  \n";
}

void keyboard_stuff()
{
    if (kbhit())
      {
            keypress = getch();
            //cout<<"KB_code = "<<KB_code<<"\n";

            switch (keypress)
            {

                case KB_ESCAPE:

                break;

                case KB_LEFT:
                           //go_left
                    go_left=true;
                    go_right=false;

                break;

                case KB_RIGHT:
                           //go_right   
                    go_left=false;
                    go_right= true ;

                break;

                case KB_UP:
                           //go_up  
                    go_up=true;
                    go_down=false;

                break;

                case KB_DOWN:
                           //go_down  
                    go_up=false;
                    go_down=true;

                break;

            }        

      }
}

void graphics_stuff()
{

    //put all graphics and draw stuff here

    if(go_left)
    {
        //Update  direction etc

    }

    if(go_right)
    {
        //Update   direction etc

    }

    if(go_up)
    {
        //Update   direction etc

    }

    if(go_down)
    {
        //Update   direction etc

    }

    //draw pacman stuff right here after the above

}

void game_loop()
{

   while(keypress!=KB_ESCAPE)
   {

     keyboard_stuff();
     graphics_stuff();

   }

} 
```

# facebook - 通过打开图表删除页面封面照片

> ID：12566962
> 
> 赞同：0
> 
> 时间：2012-09-24T14:21:54.300
> 
> 标签：facebook, facebook-opengraph, photo, cover

我正在尝试通过打开图表删除页面的封面照片。

这甚至可能吗？

封面设置：

```
https://graph.facebook.com/PAGE_ID?cover=IMAGE_ID&method=POST&access_token=ACCESS_TOKEN&no_feed_story=true 
```

并删除：

```
https://graph.facebook.com/IMAGE_ID?method=DELETE&access_token=ACCESS_TOKEN 
```

您无权这样做：

```
{
  "error": {
    "message": "(#200) Permissions error", 
    "type": "OAuthException", 
    "code": 200
  }
} 
```

当我设置封面时，Facebook 会在页面的封面相册中保存一张新照片。此封面照片不是由应用程序创建的。

所以看起来我无法删除页面的封面照片。因为您只能删除由同一应用创建的照片。

有人可以验证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:34:50.170

我实际上让它工作了，但它似乎是 FB 方面的一个错误，而不是其他任何东西。

我和最初的帖子一样，我想说我设法在大约 20% 的测试中删除了封面（有时通过直接在浏览器中输入 url，有时使用 PHP/CURL）

但在我最近的所有测试中，它不再起作用了。

当它不工作时得到“ **#200 Permissions Error** ”消息，当它工作时只是“ **true** ”。

似乎难以处理页面访问令牌权限。

太糟糕了，因为我想将我办公室的网络摄像头捕获显示为我的 FB 封面，但我需要不时自动删除我的旧封面，以避免我的 Covers 文件夹每分钟左右被屏幕盖填满，并且只保留10 最新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:49:48.587

没有提供该功能的 API - 如果您发现文档另有说明，请在此处发表评论，我会更正

# bison - 来自 Expression Interpreter 演示的 Expression AST Parser

> ID：12566964
> 
> 赞同：0
> 
> 时间：2012-09-24T14:22:05.480
> 
> 标签：bison, flex-lexer, parser-generator, jison

我正在尝试将这个[“计算器”Jison 示例](http://zaach.github.com/jison/try/)修改为表达式解析器而不是表达式解释器。我想输出一个*描述*表达式的 JSON 对象，而不是立即评估它。

*   我试图修改演示以返回带有运算符和操作数作为元素的 javascript 数组。
*   当我解析时`1 + 2`，我希望得到一个字符串化为的 JSON 数组`['+', 1, 2]`。相反，我得到`1`.
*   这似乎与 NUMBER 动作直接相关——无论我告诉什么返回就是我得到的全部。
*   但是，如果我尝试解析“1 2 + 3”，它确实会出现语法错误。

（我不关心我是否在一个有用的AST模型中表示表达式，我只是想学习Jison）

```
/* description: Parses mathematical expressions. */

/* lexical grammar */
%lex
%%

\s+                   /* skip whitespace */
[0-9]+("."[0-9]+)?\b  return 'NUMBER'
"*"                   return '*'
"/"                   return '/'
"-"                   return '-'
"+"                   return '+'
"^"                   return '^'
"("                   return '('
")"                   return ')'
"PI"                  return 'PI'
"E"                   return 'E'
<<EOF>>               return 'EOF'
.                     return 'INVALID'

/lex

/* operator associations and precedence */

%left '+' '-'
%left '*' '/'
%left '^'
%left UMINUS

%start expressions

%% /* language grammar */

expressions
    : e EOF
        { return $e; }
    ;

e
    : e '+' e
        { return ['+', $e1, $e2]; }
    | e '-' e
        { return ['-', $e1, $e2]; }
    | e '*' e
        { return ['*', $e1, $e2]; }
    | e '/' e
        { return ['/', $e1, $e2]; }
    | e '^' e
        { return ['^', $e1, $e2]; }
    | '-' e %prec UMINUS
        { return ['-', $e]; }
    | '(' e ')'
        { return ['G', $e ]; }
    | NUMBER
        { return Number($NUMBER); }
    | E
        { return Math.E; }
    | PI
        { return Math.PI; }
    ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:54:13.740

在这一行中，不是返回 $$ 中操作数的总和，而是

```
: e '+' e
    {$$ = $1+$3;} 
```

返回所需的对象会起作用吗？

```
: e '+' e
    {$$ = ["+", $1, $3];} 
```

# android - IOException：主机在蓝牙连接中关闭

> ID：12566965
> 
> 赞同：1
> 
> 时间：2012-09-24T14:22:16.710
> 
> 标签：android, bluetooth, ioexception

我在Android4.1中有两部Android手机可能我可以称它们为手机A和手机B。然后我知道手机A的MAC地址和uuid。所以我想做的是，我打算给出MAC地址和手机A的uuid到手机B，并让B通过蓝牙连接到A。所以A是蓝牙服务器，B是蓝牙客户端。但是当我这样做时。电话 B 说
W/System.err(18404): java.io.IOException: Host is down

电话A中的代码作为服务器是这样的：

```
 private class AcceptThread extends Thread {
    private final BluetoothServerSocket mmServerSocket;

    public AcceptThread() {

        BluetoothServerSocket tmp = null;
        try {               
           Method m =  mBluetoothAdapter.getClass().getMethod("listenUsingRfcommOn", new Class[] {int.class});
           tmp = (BluetoothServerSocket)m.invoke(mBluetoothAdapter, new Object[]{25});
        Log.i("liyufei","in server  we begin at uuid = "+selfUuid);
        } catch (Exception e) {
            e.printStackTrace();
        }
        mmServerSocket = tmp;
    }

    public void run() {
        BluetoothSocket socket = null;
        // Keep listening until exception occurs or a socket is returned
        Log.i("liyufei","listening is begin");
        while (true) {
            try {
                Log.i("liyufei","wait...............");
                socket = mmServerSocket.accept();
            } catch (IOException e) {
                e.printStackTrace();
                break;
            }
            Log.i("liyufei","keep going socket is try to create");
            if (socket != null) {
                Log.i("liyufei","server socket accept!!!");
                mHandler.obtainMessage(MESSAGE_ACCEPT).sendToTarget();
                try {
                    mmServerSocket.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                break;
            }
            Log.i("liyufei","socket is null");
        }
        Log.i("liyufei","while is stop");
    }

    /** Will cancel the listening socket, and cause the thread to finish */
    public void cancel() {
        try {
            mmServerSocket.close();
            Log.i("liyufei","we try to Close server!!");
        } catch (IOException e) { 
            e.printStackTrace();
        }
    }
} 
```

电话B中的代码作为客户端：

```
private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {

        BluetoothSocket tmp = null;
        mmDevice = device;
        Log.i("liyufei","new connect thread......");
        try {
            Method m = mmDevice.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
            tmp = (BluetoothSocket) m.invoke(mmDevice,Integer.valueOf(25));
        } catch (Exception e) { 
            e.printStackTrace();
        }
        mmSocket = tmp;
    }

    public void run() {
        mBluetoothAdapter.cancelDiscovery();  
        try {
            Log.i("liyufei","we try to connect.....");
            mmSocket.connect();
        } catch (Exception connectException) {
            Log.i("liyufei","connect to server failed...");
            connectException.printStackTrace();
            try {
                mmSocket.close();
            } catch (IOException closeException) { }
            return;
        }
        Log.i("liyufei","client has success connect!!!");
        mHandler.obtainMessage(MESSAGE_CONNECT).sendToTarget();
    }

    /** Will cancel an in-progress connection, and close the socket */
    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) { }
    }
} 
```

然后我就可以得到 IOException:Host is down after mmSocket.connect(); 在电话B 谁能帮帮我？？？非常感谢！！！！！！来自@Waqas 的测试后日志建议

```
09-25 14:31:26.587: I/liyufei(12453): new connect thread......
09-25 14:31:26.587: I/liyufei(12453): we begin in connect uuid = 66d77030-9982-42cf-88a7-272954408361
09-25 14:31:26.595: E/BluetoothService.cpp(308): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
09-25 14:31:26.595: I/liyufei(12453): we try to connect.....
09-25 14:31:26.900: D/PhoneStatusBar(389): disable: < expand* icons alerts ticker system_info back home recent clock >
09-25 14:31:26.970: D/dalvikvm(520): GC_FOR_ALLOC freed 140K, 44% free 14337K/25415K, paused 20ms, total 20ms
09-25 14:31:26.986: I/dalvikvm-heap(520): Grow heap (frag case) to 17.297MB for 3409936-byte allocation
09-25 14:31:27.017: D/dalvikvm(520): GC_CONCURRENT freed <1K, 31% free 17667K/25415K, paused 13ms+3ms, total 32ms
09-25 14:31:27.017: D/dalvikvm(520): WAIT_FOR_CONCURRENT_GC blocked 19ms
09-25 14:31:31.720: I/liyufei(12453): connect to server failed...1
09-25 14:31:31.720: W/System.err(12453): java.io.IOException: Host is down
09-25 14:31:31.720: W/System.err(12453):    at android.bluetooth.BluetoothSocket.connectNative(Native Method)
09-25 14:31:31.720: W/System.err(12453):    at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:216)
09-25 14:31:31.720: W/System.err(12453):    at com.example.android.beam.BeamBlueTooth$ConnectThread.run(BeamBlueTooth.java:297)
09-25 14:31:31.720: I/liyufei(12453): we try to connect.....
09-25 14:31:31.720: I/liyufei(12453): connect to server failed...2
09-25 14:31:31.720: W/System.err(12453): java.io.IOException: File descriptor in bad state
09-25 14:31:31.720: W/System.err(12453):    at android.bluetooth.BluetoothSocket.connectNative(Native Method)
09-25 14:31:31.720: W/System.err(12453):    at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:216)
09-25 14:31:31.720: W/System.err(12453):    at com.example.android.beam.BeamBlueTooth$ConnectThread.run(BeamBlueTooth.java:297)
09-25 14:31:31.720: I/liyufei(12453): we try to connect.....
09-25 14:31:31.728: I/liyufei(12453): connect to server failed...3
09-25 14:31:31.728: W/System.err(12453): java.io.IOException: File descriptor in bad state
09-25 14:31:31.728: W/System.err(12453):    at android.bluetooth.BluetoothSocket.connectNative(Native Method)
09-25 14:31:31.728: W/System.err(12453):    at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:216)
09-25 14:31:31.728: W/System.err(12453):    at com.example.android.beam.BeamBlueTooth$ConnectThread.run(BeamBlueTooth.java:297) 
```

# android - Android 方向传感器 - 完全关闭方向传感器

> ID：12566967
> 
> 赞同：1
> 
> 时间：2012-09-24T14:22:31.103
> 
> 标签：android, user-interface, android-orientation

我想知道如何在我的 android 应用程序中为某些活动完全关闭方向传感器。

这就是我的挣扎。假设我使用以下命令在活动的 onCreate（或 onStart/onResume）方法中动态设置方向。

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

我的经验是，如果我以一种根据方向传感器会导致横向模式的方式握住设备，屏幕上的显示速度会明显加快。

所以感觉就像活动首先要按照传感器建议的方向设置布局，然后根据 setRequestedOrientation 方法进行切换。我什至有时会在屏幕上看到这一点，如相关帖子[android - 在切换活动时意外短暂的方向变化中所述](https://stackoverflow.com/questions/12558287/android-unexpected-brief-orientation-change-at-switch-of-activity)。

似乎我对 setRequestedOrientation 调用为时已晚。所以我想知道如何完全关闭方向传感器以避免在 setRequestedOrientation 调用之前设置方向。或者作为替代方案，如何及时调用 setRequestedOrientation。由于我需要在运行时动态决定此功能（首选项设置），因此我无法在清单中设置固定的方向。

非常感谢您提供有关此问题的任何提示。

马丁

编辑：我忘了提，清单包含

```
android:configChanges="keyboardHidden|orientation|screenSize" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:59:07.003

这是您可以在运行时设置方向的方法，如下所示

```
int currentOrientation = getRequestedOrientation();

if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
   setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
}
else {
   setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:40:27.683

性能影响的发生是因为 android 会终止您的活动，然后使用新配置启动一个新实例。一个很好的解决方案是手动处理配置更改。通过将 android:configChanges="orientation" 添加到清单文件中的活动元素中覆盖活动中的 onConfigurationChanged 方法以进行布局

另一种解决方案是有两个活动，一个只在横向工作，另一个通过在清单文件中指定方向属性在纵向工作，午餐是合适的。

# linq - 将 sql 转换为 linq 问题

> ID：12566972
> 
> 赞同：1
> 
> 时间：2012-09-24T14:22:47.893
> 
> 标签：linq, tsql, linq-to-sql

在我的工作中，我们的主要应用程序是很久以前编写的，在 n 层真正成为一个东西之前，ergo - 它有大量的业务逻辑开始在存储过程等中处理。

所以我们最终决定硬着头皮让它不那么糟糕。我的任务是将 900 多行的 sql 脚本转换为 .NET exe，我在 C#/Linq 中执行此操作。问题是......在另一份工作的最后 5-6 年里，我一直在专门做 Linq，所以我的 SQL 有点生疏了，我正在转换的一些事情我以前从未尝试过在 Linq 中做，所以我我遇到了一些障碍。

无论如何，足够的抱怨。

我在使用以下 sql 语句时遇到问题，我认为是因为他正在加入临时表和派生表。这是SQL：

```
insert into #processedBatchesPurgeList
    select d.pricebatchdetailid
    from pricebatchheader h (nolock)
    join pricebatchstatus pbs (nolock) on h.pricebatchstatusid = pbs.pricebatchstatusid
    join pricebatchdetail d (nolock) on h.pricebatchheaderid = d.pricebatchheaderid
    join 
    (   -- Grab most recent REG.
        select
            item_key 
            ,store_no
            ,pricebatchdetailid = max(pricebatchdetailid)
        from pricebatchdetail _pbd (nolock)
        join pricechgtype pct (nolock) on _pbd.pricechgtypeid = pct.pricechgtypeid
        where
            lower(rtrim(ltrim(pct.pricechgtypedesc))) = 'reg'
            and expired = 0
        group by item_key, store_no
    ) dreg
        on d.item_key = dreg.item_key
        and d.store_no = dreg.store_no
    where
        d.pricebatchdetailid < dreg.pricebatchdetailid -- Make sure PBD is not most recent REG.
        and h.processeddate < @processedBatchesPurgeDateLimit
        and lower(rtrim(ltrim(pbs.pricebatchstatusdesc))) = 'processed' -- Pushed/processed batches only. 
```

所以这首先提出了一个整体问题：如何在 Linq 中处理临时表？这个脚本使用了大约 10 个。我目前将它们作为列表。问题是，如果我尝试在一个查询中使用 .Join()，我会得到“本地序列不能在 LINQ to SQL 的查询运算符中使用，但包含运算符除外。” 错误。

我能够使用 2 个查询来连接派生表，这样一个查询就不会变得像噩梦一样长：

```
var dreg = (from _pbd in db.PriceBatchDetails.Where(pbd => pbd.Expired == false && pbd.PriceChgType.PriceChgTypeDesc.ToLower().Trim() == "reg")
                    group _pbd by new { _pbd.Item_Key, _pbd.Store_No } into _pbds
                    select new 
                    {
                        Item_Key = _pbds.Key.Item_Key,
                        Store_No = _pbds.Key.Store_No,
                        PriceBatchDetailID = _pbds.Max(pbdet => pbdet.PriceBatchDetailID)
                    });

        var query = (from h in db.PriceBatchHeaders.Where(pbh => pbh.ProcessedDate < processedBatchesPurgeDateLimit)
                    join pbs in db.PriceBatchStatus on h.PriceBatchStatusID equals pbs.PriceBatchStatusID
                    join d in db.PriceBatchDetails on h.PriceBatchHeaderID equals d.PriceBatchHeaderID
                    join dr in dreg on new { d.Item_Key, d.Store_No } equals new { dr.Item_Key, dr.Store_No }
                    where d.PriceBatchDetailID < dr.PriceBatchDetailID
                    && pbs.PriceBatchStatusDesc.ToLower().Trim() == "processed"
                    select d.PriceBatchDetailID); 
```

因此，该查询给出了我保存在列表中的预期结果，但随后我需要将该查询的结果加入到从数据库中选择的另一个查询中，这导致我回到前面提到的“无法使用本地序列。 ..“ 错误。

该查询是这样的：

```
insert into #pbhArchiveFullListSaved
    select h.pricebatchheaderid
    from pricebatchheader h (nolock)
        join pricebatchdetail d (nolock)
            on h.pricebatchheaderid = d.pricebatchheaderid
        join #processedBatchesPurgeList dlist
            on d.pricebatchdetailid = dlist.pricebatchdetailid -- PBH list is restricted to PBD purge list rows that have PBH references.
    group by h.pricebatchheaderid 
```

#processedBatchesPurgeList 上的加入是我遇到的问题。

所以呃……救命？我从来没有写过这样的 SQL，当然也从来没有尝试将它转换为 Linq。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:17:51.230

正如上面的评论所指出的，这不再被重写为 Linq。

希望在实现更好的 SOX 合规性的同时获得性能改进，这就是重写的全部原因。

我对满足 SOX 合规性问题感到满意*。*

谢谢大家。

# ios - 是什么决定了我的应用在构建时需要哪个 iOS 版本？

> ID：12566973
> 
> 赞同：2
> 
> 时间：2012-09-24T14:22:47.960
> 
> 标签：ios, xcode

我无意中在 XCode 构建中使用了这些值：

> ```
> IPHONEOS_DEPLOYMENT_TARGET = 4.0
> SDKROOT = iphonesimulator6.0 
> ```

我以前从没想过他（我是 iOS 菜鸟），但这是否意味着我的应用程序可以在 iOS4 及更高版本的设备上运行，还是只能在 iOS6 上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:25:30.537

部署目标是您支持的最低版本。SDK Root（或 GUI 中的 Base SDK）是您在构建时使用的一组框架。您必须知道，使用 SDK 6.0 构建可以访问许多在 4.0~5.0 等中不可用的 API 调用，您必须在使用它们时检查它们的可用性，否则您将在旧软件上崩溃。您通常使用 NSClassFromString(@"NewClass") 检查类的可用性，如果它返回 nil，则它不可用。要检查现有类上是否有可用的新方法，请使用 [OldClass respondsToSelector:@selector(newMethod:)] 如果您想使用项目中链接的新框架，则必须将它们声明为 Weak，否则您将在启动时崩溃旧软件

# java - 是否有任何本地机制可以让我们覆盖现有部署的 Struts2 应用程序中的类？

> ID：12566974
> 
> 赞同：0
> 
> 时间：2012-09-24T14:22:50.250
> 
> 标签：java, jakarta-ee, struts2

~~具体来说，如果我们在应用服务器中部署了一个原始的 .war 文件，是否可以部署一个 .war，它在原始文件中提供不同的类实现，而无需修改基础代码来支持这一点？~~

编辑。我错误地表述了这个问题，我认为它实际上更简单。我们希望在同一基本路径中公开来自两个不同 WAR 的操作，而不是为每个 WAR 使用不同的路径。可以在容器配置级别完成吗？或者您是否建议使用 URL 重写之类的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:47:19.573

不容易。通常，已部署的 WAR 会成为 Java EE 服务器中的离散 Web 应用程序，并拥有自己的类加载器。您的第二次部署将获得另一个类加载器，尽管它们肯定会共享一些祖先，但无法从另一个 WAR 重新实现事物 - 您的第二次部署将无法“看到”它，因为类加载器链接在一起。

可以使用[Java 代理](http://www.javabeat.net/2012/06/introduction-to-java-agents/)重写正在运行的类，尽管这很重要。您可以转换（重写传入）类，并且应该能够重写实时（实例化）类，尽管问题在于堆上可能存在使用旧代码和新代码的对象。

类重写是 Eclipse 的[Hot Code Replace](http://wiki.eclipse.org/FAQ_What_is_hot_code_replace%3F)的工作方式，也是[JRebel 的](http://zeroturnaround.com/software/jrebel/)快速重新部署解决方案的工作方式。

如果您真的想追求这一点，您可能可以使用像[AspectJ这样的](http://www.eclipse.org/aspectj/)[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)系统- 但听起来您正在尝试解决构建或部署问题，而不是 AOP 更适合解决方案的问题。

# opencl - OpenCL 内核无法编译要求地址空间限定符

> ID：12566977
> 
> 赞同：1
> 
> 时间：2012-09-24T14:22:59.267
> 
> 标签：opencl

以下 opencl 代码无法编译。

```
typedef struct {

    double d;
    double* da;
    long* la;
    uint ui;

} MyStruct;

__kernel void MyKernel (__global MyStruct*  s) {

} 
```

错误信息如下。

```
line 11: error: kernel pointer arguments must point to addrSpace global, local, or constant
  __kernel void MyKernel (__global MyStruct*  s) {
                                              ^ 
```

正如你所看到的，我已经清楚地用 '__global' 限定了这个参数，因为错误表明我应该这样做。我做错了什么，我该如何解决这个错误？

显然这发生在内核编译期间，所以我没有在这里发布我的主机代码，因为它甚至没有比这更进一步。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:13:30.973

我认为问题在于您的结构中有指针，这是不允许的。您不能像那样从内核指向主机内存，因此内核参数结构中的指针没有多大意义。可变大小的数组由主机对象在 OpenCL 中备份，这占`cl_mem`一个完整的参数，据我所知，您只能将可变大小的数组直接作为内核参数传递（并调整工作单元的数量因此，当然）。

您可能更喜欢将大小信息放在结构中并将数组作为独立的内核参数提取出来。

# regex - 如何使用 grep 和 regex 查找目录中的所有文件？

> ID：12566983
> 
> 赞同：5
> 
> 时间：2012-09-24T14:23:47.477
> 
> 标签：regex, linux, grep

我在 Apache 服务器上有一个目录（Linux/Unix），其中有很多子目录，其中包含很多这样的文件：

```
- 目录  
  - 2010_01/
    - 142_78596_101_322.pdf
    - 12_10.pdf
    - ...
  - 2010_02/   
    - ...

```

我怎样才能找到文件名看起来像的所有文件：`*_*_*_*.pdf`？其中 * 始终是一个数字！！

我尝试像这样解决它：

```
ls -1Rl 2010-01 | grep -i '\(\d)+[_](\d)+[_](\d)+[_](\d)+[.](pdf)$' | wc -l 
```

但是正则表达式`\(\d)+[_](\d)+[_](\d)+[_](\d)+[.](pdf)$`不适用于 grep。

**编辑1**`ls -l 2010-03 | grep -E '(\d+_){3}\d+\.pdf' | wc -l` ：例如尝试仅返回null。所以它不能完美地工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:36:23.440

尝试使用`find`.

满足您的规范的命令`__*_*.pdf where * is always a digit`：

```
find 2010_10/ -regex '__\d+_\d+\.pdf' 
```

但是，根据您尝试的正则表达式，您似乎想要一个由下划线分隔的 4 个数字序列。

```
(\d+_){3}\d+\.pdf 
```

或者您想匹配所有仅包含数字/下划线的名称？

```
[\d_]+\.pdf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T15:37:31.040

首先，您应该使用 egrep vs grep 或使用 -E 调用 grep 来扩展模式。

所以这对我有用：

```
$ cat test2.txt
- Dir  
  - 2010_01/
    - 142_78596_101_322.pdf
    - 12_10.pdf
    - ...
  - 2010_02/   
    - ... 
```

现在 egrep 那个文件：

```
cat test2.txt | egrep '((?:\d+_){3}(?:\d+)\.pdf$)'
- 142_78596_101_322.pdf 
```

由于整个模式周围有括号，因此将捕获整个文件名。

请注意，该模式不适用于传统模式下的 grep：

```
$ cat test2.txt | grep '((?:\d+_){3}(?:\d+)\.pdf$)'
... no return 
```

但是，如果您使用扩展模式开关（与调用 egrep 相同），则可以：

```
$ cat test2.txt | grep -E '((?:\d+_){3}(?:\d+)\.pdf$)'
- 142_78596_101_322.pdf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:27:55.270

感谢**gbchaosmaster**和**wolf**，我找到了一种适合我的方法：

**进入目录**：

```
find . | grep -P "(\d+_){3}\d+\.pdf" | wc -l 
```

**在根目录**：

```
find 20*/ | grep -P "(\d+_){3}\d+\.pdf" | wc -l 
```

# jquery - cufon 正在使用 jquery datepicker 创建问题

> ID：12566986
> 
> 赞同：1
> 
> 时间：2012-09-24T14:23:56.057
> 
> 标签：jquery, jquery-ui-datepicker, cufon

我已经实现了 jquery datepicker，Cufon 脚本也在页面上实现。我已经在“下个月”、“上个月”的点击事件以及 Cufon.replace 和 Cufon.refresh 的日期上实现了一些 jquery。我面临的问题是，当页面加载时，如果我点击下一个或上一个按钮，它们会很好地工作，直到我点击任何日期。每当我在单击日期后单击下一个或上一个时，总是在月份名称的位置显示一个错误，指出“未定义的 NaN”。我无法理解问题出在哪里。如果我移除 cufon，它在所有州都能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:34:31.363

那么答案。就是不使用cufon。现在你可能想知道......我的超甜甜字体呢？

好吧，既然 cufon 是一种肮脏的可憎之物，你需要一个备用计划。该计划是@ font-face proeprty。这是字体生成器的链接：[http ://www.fontsquirrel.com/fontface](http://www.fontsquirrel.com/fontface)

这将生成一个“防弹”Css 道具，让您可以使用您的字体。然后，您只需在 jQuery UI 主题中设置字体系列属性，即可更改文本。

Cufon 需要从根本上“刮擦”屏幕并执行其超臭的文本-空白-分割-画布-包装-魔术。因此，状态性以及日期选择器“读取自身”的能力可能会受到影响。我了解您连接了“刷新”事件..但您实际上挖掘了小部件并更改了它的 html。如果有方法在某些位置寻找某些 jQuery 节点节点 - 它们不存在。Cufon 重新排列并嵌套它们。

前进。使用@fontface。**永远从您的工具集中弹出 cufon**。无论如何你都应该这样做。它是一个 Css 解决方案，因此它会非常快速地呈现并且不会干扰您的脚本。这是首选方法。

# javascript - 如何从其他下拉列表中的选择查询中填充下拉列表中的值？

> ID：12566990
> 
> 赞同：0
> 
> 时间：2012-09-23T15:39:42.310
> 
> 标签：javascript

从第一个下拉列表中选择选项时，如何从选择查询中填充下拉列表（第二个下拉列表）中的值？

示例： First Drop Down ：使用选择查询列出所有“部门名称”。第二个下拉列表：现在，我需要输出根据第一个下拉选项列出各个部门中的所有“教授姓名”。

提前致谢。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:06:43.243

您可以使用 JavaScript 轻松完成此操作：http: [//javascript.about.com/library/bl3drop.htm](http://javascript.about.com/library/bl3drop.htm)

这实质上是使用 if-then 语句来输出后一个下拉列表，其中的选项取决于第一个。如果您正在寻找更多的 PHP 和 Ajax（来自数据库的动态列表），这是一个类似的问题：[[链接]](https://stackoverflow.com/questions/10783686/dynamic-drop-down-list-php-and-javascript)

# python - python -m unittest2 发现不工作

> ID：12566993
> 
> 赞同：1
> 
> 时间：2012-09-24T14:24:24.463
> 
> 标签：python, unit-testing, python-3.x, unittest2, python-3.1

我正在使用出色的 Tox 工具来测试我的代码。这是我的`tox.ini`：

```
[tox]
envlist = py26,py27,py31,py32,py33

[testenv]
deps = ParamUnittest
commands = python -m unittest discover tests
downloadcache = build

[testenv:py26]
deps = https://github.com/rik0/ParamUnittest/tarball/master
       unittest2
       importlib
commands = python -m unittest2.__main__ discover tests

[testenv:py31]
deps = https://github.com/rik0/ParamUnittest/tarball/master
       unittest2py3k
commands = python -m unittest2 discover tests 
```

运行它时，所有测试都在除 3.1 之外的所有版本上执行。毒物显示：

```
py31 sdist-reinst: /home/miki/exp/radon/.tox/dist/radon-0.1.zip
py31 runtests: commands[0]

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK 
```

为什么不执行测试？系统布局如下：

```
tests/
    test_internals.py
    test_complexity.py
    ...
radon/
...
setup.py
tox.ini 
```

# python - 阻止本地网络上的数据包

> ID：12566995
> 
> 赞同：1
> 
> 时间：2012-09-24T14:24:32.817
> 
> 标签：python, scapy

我正在尝试开发一个代码，我可以通过过滤和阻止某种类型的数据包来测试连接到 Web 服务器的客户端的错误条件。

对于初学者，我想通过过滤和阻止 DHCP 数据包来分析客户端无法获取其 IP 时的行为。我使用“scapy”来嗅探并创建 DHCP 数据包的“PCAP”日志，但我无法阻止数据包。

有什么方法可以阻止数据包到达客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:54:39.050

基本上，这就是“防火墙”可以做的事情。它必须发生在内核级别而不是应用程序级别。如果您在 Linux 上，则通过[iptables](http://en.wikipedia.org/wiki/Iptables)使用 netfilter 内核模块。在您对它感到满意之前，您必须对这个主题进行一些研究。

# ios - ImageView 使用滑块旋转

> ID：12566998
> 
> 赞同：0
> 
> 时间：2012-09-24T14:24:37.767
> 
> 标签：ios, uiimageview, uislider

我正在尝试使用滑块旋转图像..它运行良好但是当我使用 Pinch 手势放大或缩小该 imageView 然后尝试使用 Slider 旋转它时，它将 imageView 的框架调整为其原始框架然后旋转它。 .我希望它在执行缩放操作后旋转新的图像视图......这是我的代码。

```
//for rotation
- (IBAction)sliderChanged:(id)sender
 {
    imageView.transform = CGAffineTransformMakeRotation(Slider.value * 2*M_PI / Slider.maximumValue);
 }
//for  zoom in zoom out
- (IBAction)handlePinch:(UIPinchGestureRecognizer *)recognizer 
{

    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform,       recognizer.scale, recognizer.scale);
    recognizer.scale = 1;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:36:14.907

你没有维护规模。一个有效的例子：

```
-(IBAction)zoomIn:(id)sender{
     x += 0.3;
    CGAffineTransform t;
    t=CGAffineTransformMakeRotation(degrees*M_PI/180);
    imageView.transform=CGAffineTransformScale(t, x, x);
 } 
```

您正在使用 CGAffineTransformScale 中的识别器.view.transform。尝试使用 imageView.transform

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:35:02.727

在`handlePinch`您正确修改现有变换时，但在`sliderChanged`您创建新变换时，会失去缩放。

# c# - XNA 3.1 项目无法在 Windows 8 中构建

> ID：12566999
> 
> 赞同：4
> 
> 时间：2012-09-24T14:24:44.647
> 
> 标签：c#, windows, xna

我最近得到了一份 Windows 8 的副本（针对 64 位操作系统的调试/检查版本）。摆弄了一段时间后，我在上面安装了 .NET 3.5，以及 Visual C# Express Edition 2008。现在，我知道这是一个非常旧的版本，但*请不要只告诉我更新。我需要使用这个版本。XNA 3.1 也是如此。*

稍微摆弄一下，我让 XNA 3.1 使用[此修复程序](http://blogs.msdn.com/b/astebner/archive/2012/02/29/10274694.aspx)工作。

然而，现在，我尝试构建我一直在 Windows 7 中处理的项目。第一次，它给了我一个内容管道错误，说其中一个资源引发了一个无效错误。我会在这里发布，但我无法复制它（我实际上并不认为它有任何意义）。随后的所有时间，构建都很好，但项目窗口没有出现。控制台上的输出窗口，通常会显示它在运行项目之前所做的事情的列表，现在只有一行： *(Managed): Loaded 'C:\Windows\assembly\GAC_32\mscorlib\2.0.0.0__b77a5c561934e089\ mscorlib.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。* 这句话也出现在我在 Windows 7 中的所有成功构建中，但随后出现了更多类似的行。现在不是。调试器永远不会从那里进行。如果我尝试暂停调试器，它会给我这个错误： *无法中断执行。调试器仍在附加到该进程。*

如果有人知道什么会导致此错误，我非常希望在这里得到一些帮助。我确实设置了双启动，所以我仍然可以处理我的项目，但是在我想要处理一个项目的任何时候不断重启是有点不方便的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T02:27:26.213

对您来说不幸的是，问题可能出在您使用的 XNA 版本上，您使用的是 Windows 8，所以它可能与 XNA 3.1 不太兼容