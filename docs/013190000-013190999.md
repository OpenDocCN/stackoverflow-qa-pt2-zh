# StackOverflow 问答 13190000-13190999

# visual-c++ - 将应用程序从 vs2005 升级到 vs2012 后的构建问题

> ID：13190000
> 
> 赞同：1
> 
> 时间：2012-11-02T05:47:51.567
> 
> 标签：visual-c++, visual-studio-2012, build-error

我需要将我的应用程序从 Visual Studio 2005 IDE 升级到 Visual Studio 2012。升级向导成功转换解决方案和项目文件，出现 0 个错误和少量警告。

但是当我开始构建应用程序时，我收到错误消息：

错误 C1189：#error：此文件要求 _WIN32_WINNT 至少 #定义为 0x0403。建议使用 0x0501 或更高的值。在 atlcore.h 中！

我尝试将版本号更改为 0x0500 、 0x0501 、 0x0502 和 0x0601 （通过 /D 编译器选项和在 atlcore.h 中手动更改，WINVER 也更改了。）但没有运气。显示相同的错误。

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:56:19.093

Visual C++ 不再支持面向 Windows 95、Windows 98、Windows ME 或 Windows NT。如果将 WINVER 或 _WIN32_WINNT 宏分配给这些 Windows 版本之一，则必须修改宏。

要修改宏，请在头文件中添加以下行。

```
#define WINVER 0x0500
#define _WIN32_WINNT 0x0500 
```

**编辑：**

WINVER 确定构建您的应用程序所需的最小平台 SDK，这反过来将在编译时确定哪些例程由标头找到。

```
#define _WIN32_WINNT_NT4     0x0400
#define _WIN32_WINNT_WIN2K     0x0500
#define _WIN32_WINNT_WINXP     0x0501
#define _WIN32_WINNT_WS03     0x0502
#define _WIN32_WINNT_WIN6     0x0600
#define _WIN32_WINNT_VISTA     0x0600
#define _WIN32_WINNT_WS08     0x0600
#define _WIN32_WINNT_LONGHORN    0x0600
#define _WIN32_WINNT_WIN7     0x0601 
```

**其他解决方案：**

如果您在 PC 上安装了 WIndows SDK（在 /Microsoft SDKs/Windows 中），则可以在 stdafx.h 中（或在所有 C++ 文件中包含的标头中）#include。包括**SDKDDKVer.h**将针对可用的最高 Windows 版本。

希望它有效！！！！

欲了解更多信息，请[参见此处](http://msdn.microsoft.com/en-us/library/6sehtctf.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:50:41.047

通过评论 atlcore.h 中的检查暂时解决了问题：

# 如果 _WIN32_WINNT > 0x0501

//#error 这个文件要求 _WIN32_WINNT 至少被定义为 0x0403。建议使用 0x0501 或更高的值。

# 万一

我知道这不是 [编辑 IDE 提供的文件] 的正确方法，但这样做是因为它可能是由于安装不当造成的。

如果有人遇到永久性修复，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T11:06:22.190

you can add a pre-processor directive for the project under project settings, C/C++, Pre-processor definitions, appending WINVER=0x0501;

(you can also undefine definitions)

I'm wondering if you are using pre-compiled headers which is overwriting changes to stdafx.h, this is the way to make sure this is set

This preprocessor setting holds until code in the project files changes it, at which point if this doesn't fix the problem, then you must find how or where this is being set/unset/checked; but the solutions shouldn't involve any changes to the windows SDK files

# c - 检测 mp4 文件

> ID：13190005
> 
> 赞同：8
> 
> 时间：2012-11-02T05:48:30.643
> 
> 标签：c, mp4

我必须设计一个检测**mp4**文件的模块。如果将获得任何随机文件作为输入，它必须判断它是否是 mp4 文件。在哪里可以找到 mp4 文件的标头规范？尝试谷歌搜索，但除了签名之外找不到任何东西。有关该模块的 C 编程的任何其他提示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T05:52:25.637

您可以检查扩展名或文件签名（*幻数*）

[http://www.garykessler.net/library/file_sigs.html](http://www.garykessler.net/library/file_sigs.html)

[http://en.wikipedia.org/wiki/List_of_file_signatures](http://en.wikipedia.org/wiki/List_of_file_signatures)

> 00 00 00 18 66 74 79 70 33 67 70 35 ....ftyp 3gp5 MPEG-4 视频文件

或者，如果你在 Unix/Linux 上，你可以从你的程序中解析[file(1)的输出。](http://unixhelp.ed.ac.uk/CGI/man-cgi?file)

**编辑：**

您不需要扫描整个文件来识别它，签名就可以，但是，如果必须，请注意 MP4 是其他格式的*容器*，这意味着您可能需要了解 MP4 和其他格式也包含，这里有一些信息： [http ://en.wikipedia.org/wiki/MPEG-4_Part_14](http://en.wikipedia.org/wiki/MPEG-4_Part_14)

我会使用[libffmpeg 之](http://ffmpeg.org/)类的东西来代替。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-01-08T12:29:26.953

将文件读取为 byte[] 然后解析 mime。

```
byte[] header = new byte[20];
    System.arraycopy(fileBytes, 0, header, 0, Math.min(fileBytes.length, header.length));

    int c1 = header[0] & 0xff;
    int c2 = header[1] & 0xff;
    int c3 = header[2] & 0xff;
    int c4 = header[3] & 0xff;
    int c5 = header[4] & 0xff;
    int c6 = header[5] & 0xff;
    int c7 = header[6] & 0xff;
    int c8 = header[7] & 0xff;
    int c9 = header[8] & 0xff;
    int c10 = header[9] & 0xff;
    int c11 = header[10] & 0xff;
    int c12 = header[11] & 0xff;
    int c13 = header[12] & 0xff;
    int c14 = header[13] & 0xff;
    int c15 = header[14] & 0xff;
    int c16 = header[15] & 0xff;
    int c17 = header[16] & 0xff;
    int c18 = header[17] & 0xff;
    int c19 = header[18] & 0xff;
    int c20 = header[19] & 0xff;

if(c1 == 0x00 && c2 == 0x00 && c3 == 0x00)//c4 == 0x20 0x18 0x14
    {
        if(c5 == 0x66 && c6 == 0x74 && c7 == 0x79 && c8 == 0x70)//ftyp
        {
            if(c9 == 0x69 && c10 == 0x73 && c11 == 0x6F && c12 == 0x6D)//isom
                return "video/mp4";

            if(c9 == 0x4D && c10 == 0x53 && c11 == 0x4E && c12 == 0x56)//MSNV
                return "video/mp4";

            if(c9 == 0x6D && c10 == 0x70 && c11 == 0x34 && c12 == 0x32)//mp42
                return "video/m4v";

            if(c9 == 0x4D && c10 == 0x34 && c11 == 0x56 && c12 == 0x20)//M4V
                return "video/m4v"; //flv-m4v

            if(c9 == 0x71 && c10 == 0x74 && c11 == 0x20 && c12 == 0x20)//qt
                return "video/mov";

            if(c9 == 0x33 && c10 == 0x67 && c11 == 0x70 && c17 != 0x69 && c18 != 0x73)
                return "video/3gp";//3GG, 3GP, 3G2
        }

        if(c5 == 0x6D && c6 == 0x6F && c7 == 0x6F && c8 == 0x76)//MOOV
        {
            return "video/mov";
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T05:31:25.857

*   ISO 基本媒体文件格式是免费提供的，MP4 文件格式是“基本媒体格式”的扩展，在大多数情况下，它足以理解“基本媒体格式”。尝试谷歌将返回一个标准。

*   要检测文件是否为 MP4，您需要读取前 8 个字节，其中包含（前 4 个字节为 ATOM 的大小，接下来的 4 个字节为“FTYP”）。之后它包含majorbrand 和 compatiblebrans - 如果它们中的任何一个是ISOM，它肯定是一个MP4 文件。所以你只需要解析最初的几个字节来确认MP4 文件。

您还可以查看“mp4v2-1.9.1”代码以了解 MP4 格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T06:11:37.583

这是一种容器格式。[规范在这里](http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=38538)。

即使有了规范，你也需要做很多工作来支持容器在你的程序中*可以*代表的所有内容。设定切合实际的要求。

# android - 如何在 google play 中显示我的 android 应用程序 apk 文件的原始大小？

> ID：13190006
> 
> 赞同：1
> 
> 时间：2012-11-02T05:48:34.750
> 
> 标签：android, google-play, apk, android-build

我开发了一个带有一些 HQ 可绘制对象的 android 应用程序。我为不同的分辨率使用了不同的drawable，比如xhdpi、hdpi、mdpi、ldpi。所以我的最终 apk 文件大小增加了，即 5.8MB。我将该 apk 文件上传到 android 市场，它显示为 12MB 大小。我在 HTC Sprint 4G 设备中安装了相同的 apk 并导航到设置中的应用程序信息。应用程序大小显示为 7.8MB。我不明白这是显示错误 apk 大小的原因。任何机构都可以建议我签署申请有什么问题吗？建议我是否有任何可能的故障及其解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:20:05.313

如果您`apk`在将其上传到市场时为您的`apk`. 在开发者控制台的应用程序详细信息部分的“发布选项”下明确提到了这一点： ![在此处输入图像描述](../Images/f6fdfd38d2be8b8c83bf3fde1dd344ed.png)

# android - Android 使用 MultipartEntity 将图像发布到服务器

> ID：13190009
> 
> 赞同：6
> 
> 时间：2012-11-02T05:49:10.193
> 
> 标签：android, django, dalvik, multipartentity

我一直在尝试将图像和数据上传到***Django***服务器。我已经包含`apache-mime4j.0.6.jar`和`httpmime4.0.1.jar`库（项目->构建路径->添加外部 jar 文件）这是上传图像的代码。

```
HttpResponse response = null;
try {
    HttpPost httppost = new HttpPost("http://10.0.2.2:8000/mobile");
    //  HttpPost httppost = new HttpPost("some url");

    MultipartEntity multipartEntity = new MultipartEntity(); //MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);  
    multipartEntity.addPart("name", new StringBody("nameText"));
    multipartEntity.addPart("place", new StringBody("placeText"));
    multipartEntity.addPart("tag", new StringBody("tagText"));
    //multipartEntity.addPart("Description", new StringBody(Settings.SHARE.TEXT));
    multipartEntity.addPart("Image", new FileBody(destination));
    httppost.setEntity(multipartEntity);

    httpclient.execute(httppost, new PhotoUploadResponseHandler());

  } catch (Exception e) {
    Log.e( "Error","error");
  } 
```

错误信息：

```
Could not find class 'org.apache.http.entity.mime.MultipartEntity' 
```

我已经尝试手动创建 libs 文件夹并手动将 jar 文件包含到 /libs 文件夹中。当我这样做时它无法编译。

错误：

```
Conversion to Dalvik format failed with error 1  Unknown Android Packaging Problem 
```

尝试创建新的应用程序，包括库。我遇到了同样的错误。我已经尝试了所有可能的方法。谁能告诉我为什么会发生这种情况以及如何解决它。任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:16:40.160

如果您使用的是新的`android-sdk`试试这个。

1.  创建文件夹命名为`libs`
2.  将您的 jar 文件粘贴到该文件夹​​中。
3.  最后右键单击您的项目 > 构建路径 > 添加外部存档。

就是这样。这可能会有所帮助。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:59:10.057

我建议你使用[spring-android](http://www.springsource.org/spring-android) 它是一个很好的 android 的 rest api 库，使用 spring-android，你可以像这样轻松地上传文件。

```
HttpHeaders requestHeaders = ....
MultiValueMap<String, Object> message = new LinkedMultiValueMap<String, Object>();
message.add("qqfile", new FileSystemResource(filePath)); //attach file

HttpEntity<MultiValueMap<String, Object>> requestEntity = new HttpEntity<MultiValueMap<String, Object>>(
            message, requestHeaders);
 RestTemplate restTemplate = RestUtil.getRestTemplate( context);
 ResponseEntity<YourResultDTO> response = restTemplate.exchange(url, HttpMethod.POST, requestEntity,YourResultDTO.class); 
```

正如谷歌建议的那样，在姜饼和更高的 api 级别上使用和使用 Apache http 客户端非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:16:27.623

我使用 . 将图像从 Android 上传到 Django 服务器`httpmime-4.2.1.jar`。那是我包含的唯一库，它工作正常。顺便说一句：库应该位于 Android 项目的 libs 文件夹中。

这是我用于上传的代码。

```
private JSONObject uploadImage(String url, File img) throws Exception{
    url = addAuthToken(url);
    HttpPost post = new HttpPost(url);
    MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
    FileBody fileBody = new FileBody(img, "images/jpeg");
    reqEntity.addPart("image", fileBody);
    post.setEntity(reqEntity);

    JSONObject ret = baseRequest(post);
    checkReturnStatus(ret, 201);

    return ret;
}

private JSONObject baseRequest(HttpUriRequest request) throws Exception{
    HttpClient client = new DefaultHttpClient();
    HttpResponse response = client.execute(request);
    BufferedReader in = null;
    try{
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer();
        String line = null;
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }

        return new JSONObject(sb.toString());
    }finally {
        if(in != null) in.close();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T15:23:03.330

我遇到了同样的问题，我用这种方式解决了：在 java build path 窗口中，单击 Order and Export 选项卡 突出显示要添加的库，然后单击 up（首先上传 lib）

单击确定，一切都很好。

这是一个带照片的链接（[Android Eclipse NoClassDefFoundError for external .jar files](https://stackoverflow.com/questions/9833607/android-eclipse-noclassdeffounderror-for-external-jar-files)）

# c# - 从 UI 中选择类型的最佳实践

> ID：13190010
> 
> 赞同：1
> 
> 时间：2012-11-02T05:49:14.247
> 
> 标签：c#, wpf, design-patterns, mvvm

首先，我是 WPF 和 MVVM 的新手。我有一个这样的界面

```
Interface IItemType
{
  bool save()
} 
```

我有三个具体的类，它们是从这个接口继承的

```
Public Class Type1:IItemType
{
   public bool save()
   {
     //save something with method 1
   }
}

Public Class Type2:IItemType
{
   public bool save()
   {
     //save something with method 2
   }
} 
```

我的视图中有三个单选按钮（它们将来可以扩展到 4,5 或更多），我想通过选择其中一个单选按钮来选择保存方法（类`Type1`或）。`Type2`问题是如何将这些 Radios 绑定到我的 ViewModel 以不违反 OCP 等模式设计（因为将来我想添加更多类型和 Radios）？

满足 MVVM 最佳实践设计？

** 编辑 **

想象一下我有以下属性

```
Public IItemType CurrentType { get; set; } 
```

我想在`Type1`选择第一个 Radio 时将 Class`Type2`放入 CurrentType 属性，并在选择第二个 Radio 时将 Class 放入 CurrentType 属性，依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:55:20.593

为什么不使用 RelayCommand 模式

阅读有关完整模式的详细信息：[**具有模型-视图-视图模型设计模式的 WPF 应用程序**](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx) public class RelayCommand : ICommand { //code realted Icommand interface }

```
RelayCommand _saveCommand;
public ICommand SaveCommand
{
    get
    {
        if (_saveCommand == null)
        {
            _saveCommand = new RelayCommand(param => this.Save(),
                param => this.CanSave );
        }
        return _saveCommand;
    }
} 
```

绑定命令如

```
<Hyperlink Command="{Binding Path=SaveCommand}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:52:05.793

从列表中选择单个项目时，ComboBox 是一个不错的选择。以下是有关在 WPF 中使用 ComboBox 进行数据绑定的一些信息。 [将 WPF ComboBox 绑定到自定义列表](https://stackoverflow.com/questions/561166/binding-wpf-combobox-to-a-custom-list)

# cakephp - CakePHP 1.3：手动设置自动注销

> ID：13190014
> 
> 赞同：2
> 
> 时间：2012-11-02T05:49:37.447
> 
> 标签：cakephp, cakephp-1.3

如何在 cakephp 中设置自动注销时间？
目前，我在 core.php 文件中使用此代码，我想将时间设置为 10 分钟，这意味着如果网站是 10 分钟的偶像，那么会话应该在 10 分钟后过期。但它不能正常工作。请解释。

```
Configure::write('Session.timeout', '60');
Configure::write('Security.level', 'high'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T15:57:15.013

在我的安装中，超时数转换为 100 秒。所以对我来说 10 分钟是 Configure::write( 'Session.timeout', '6' );

不过，我使用中等安全性，而不是高安全性。

# jsf-2 - JSF2.0 使用命令按钮打开 XHTML 视图的 pdf 文件

> ID：13190021
> 
> 赞同：0
> 
> 时间：2012-11-02T05:50:13.263
> 
> 标签：jsf-2

我试图将当前的 jsf 页面导出为 pdf。代码如下：

带有命令按钮的页面`index.html`

```
<?xml version='1.0' encoding='UTF-8' ?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html">
   <h:head>
    <title>Facelet Title</title>
  </h:head>
  <h:body>
    <h:form>
        <h:inputText value="#{bean.name}" id="name" ></h:inputText>
        <h:commandButton value="click" id="btn" actionListener="#{bean.writePDF}"></h:commandButton>
    </h:form>
</h:body></html> 
```

`writePDF()`动作按钮的功能如下：

```
public void writePDF() {
     String PDF_FILE_NAME = "converted.pdf";
     FacesContext facesContext = FacesContext.getCurrentInstance();
     ExternalContext externalContext =facesContext.getExternalContext();
     HttpServletRequest request = (HttpServletRequest)externalContext.getRequest();
     HttpSession session = (HttpSession) externalContext.getSession(true);
     String url = request.getRequestURL().append(";jsessionid=").append(session.getId().toString()).toString();
     try
     {
         ITextRenderer renderer = new ITextRenderer();
         renderer.setDocument(new URL(url).toString());
         renderer.layout();
         HttpServletResponse response = (HttpServletResponse)externalContext.getResponse();
         response.reset();
         response.setContentType("application/pdf");
         response.setHeader("Content-Disposition", "inline;filename=\"" + PDF_FILE_NAME + "\"");
         ServletOutputStream browserStream = response.getOutputStream();
         ByteArrayOutputStream baos = new ByteArrayOutputStream();
         renderer.createPDF(browserStream);
         renderer.finishPDF();
         facesContext.responseComplete();
     }
     catch (Exception ex)
     {
         ex.printStackTrace();
                  }
     facesContext.responseComplete();
 } 
```

单击命令按钮时，只会生成一个空白的 pdf 页面，其中没有任何控件和值。我做错了什么，请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:31:32.057

我刚刚用给定的代码做了一个测试。它确实没有显示任何东西。事实证明，正如我在对您的问题的第一条评论中已经猜到的那样，Flyingsaucer 根本不吃 HTML 表单元素。

您最好的选择是通过输出文本而不是输入文本来呈现数据。要动态实现这一点，您可能需要添加一个触发输入/输出条件渲染的请求参数。

例如

```
<h:inputText value="#{bean.name}" id="name" rendered="#{not param.pdf}"/>
<h:outputText value="#{bean.name}" rendered="#{param.pdf}"/> 
```

然后将 a 添加`pdf=true`到查询字符串中。

```
String url = request.getRequestURL().append(";jsessionid=").append(session.getId()).append("?pdf=true").toString(); 
```

或者只是创建一个使用相同 bean 的不同页面，然后传递其 URL。

# cocoa - Cocoa 中类之间的协调

> ID：13190025
> 
> 赞同：1
> 
> 时间：2012-11-02T05:50:30.790
> 
> 标签：cocoa, model-view-controller, architecture

我有一个程序，其中包含许多需要相互协调的控制器。我对使用哪种机制感到困惑。使用的优缺点是什么：

*   代表
*   绑定
*   通知
*   键值观察

具体来说，到处使用通知有什么问题吗？我打算这样做，因为它允许一个班级只发布一些信息而不必担心其他任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:44:12.263

如果您希望您的对象了解在需要通知观察者状态更改时调用的特定方法，请使用委托。当您有多个观察者时，通知更合适。这两者都需要手动干预，即您需要在状态更改时显式调用委托方法或发布通知。

绑定和 KVO 协同工作，并且是在另一个对象中的状态发生变化时自动更新一个对象（例如 UI）中的状态的方法。

# node.js - 在 nodejs 中使用 imagemagick 调整图像大小时出错，如何解决这个问题？

> ID：13190029
> 
> 赞同：1
> 
> 时间：2012-11-02T05:50:43.167
> 
> 标签：node.js, imagemagick

我正在使用 imagemagick 库来调整图像大小以适应 UI 规范，

我已经通过以下 cmd 安装了 imagemagick： sudo npm install imagemagick

安装已正确完成，但在调整大小时出现错误，

我的代码：

```
 var im = require('imagemagick');
                im.resize({
                            srcPath:"/tmp/"+imageName,
                            dstPath:"/home/image/" + imageName,
                            width:43,
                            height :43,
                       }, function(err, stdout, stderr){
                       if (err) {
                                console.log('error while resizing image ' + err);
                                }
                          }); 
```

我收到以下错误：

```
 Error: Command failed: execvp(): No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:58:38.423

```
dstPath:"/home/image/" + imageName, 
```

**编辑**：你安装了 imagemagick 库吗？如果没有，那么您必须安装它。如果你在 ubuntu 做`apt-get install imagemagick`

# android - 知道用户本身的存在

> ID：13190033
> 
> 赞同：0
> 
> 时间：2012-11-02T05:51:06.057
> 
> 标签：android, xmpp, user-presence

在我的聊天应用程序中，我希望当此人不在聊天屏幕上时，他应该收到通知，而当此人不在聊天屏幕上时，他不应该收到任何通知（聊天应该简单地显示在聊天屏幕上）。

当这个人在聊天屏幕上时，我强行改变用户的状态并广播它。现在这里的问题是，当用户现在将收到任何消息/聊天时，用户设备上运行的服务将如何决定移动用户本身的存在（即他是否在聊天屏幕上）。我认为不可能让用户本身出现（在名册的帮助下，因为用户本身没有在他的名册中列出）

这个函数写在我的服务类中

```
PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
        final PacketCollector collector = connection.createPacketCollector(filter);
        connection.addPacketListener(new PacketListener() {

            @Override
            public void processPacket(Packet packet) {
                // TODO Auto-generated method stub
                //notification(packet.getFrom());
                packet = collector.nextResult();
                Message message = (Message)packet;
                senderName = packet.getFrom();

                int alphaPOS = senderName.indexOf("@");
                String subSenderName = senderName.substring(0,alphaPOS); 

                notificationforChat(subSenderName+": "+message.getBody(),packet.getFrom().toString());

            }
        }, filter); 
```

现在当用户在聊天屏幕上时如何停止通知？？？

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:11:10.403

在您的活动中编写此方法。

```
 public static boolean isVisible = false;
        @Override
        public void onWindowFocusChanged(boolean hasFocus) {
            // TODO Auto-generated method stub
            super.onWindowFocusChanged(hasFocus);
            if(hasFocus)
            {
                   isVisible = true;
            }
            else
            {
                   isVisible = false;
            }
        } 
```

以及您希望在哪里使用此布尔值来检查屏幕是否可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:12:13.900

您的聊天屏幕是否嵌入在 Android 活动中？如果是这样，您可以覆盖 Activity 的 onResume() 和 onPause() 方法来设置某种标志，以便您的服务现在可以在 Activity 处于活动状态（当用户使用它时）或它不可见时. 一种方法是使用共享首选项。这是一个简化的大纲：

```
@Override
public void onResume() {
  setUserPresence(true);
  super.onResume();
}

@Override
public void onPause() {
  setUserPresence(false);
  super.onResume()
}

public void setUserPresence(boolean state) {
  SharedPreferences prefs = getSharedPreferences("settings_file_name",MODE_PRIVATE);
  SharedPreferences.Editor editor = prefs.edit();
  editor.putBoolean("UserPresent", state);
  editor.commit(); //Save your settings to the shared preferences file
} 
```

然后你需要做的就是在你的服务中检查这个标志，使用相同的 SharedPreferences 方法。

# javascript - jQuery 在画布上的特定幻灯片的 div 函数中淡入淡出（使用 js）

> ID：13190035
> 
> 赞同：1
> 
> 时间：2012-11-02T05:51:07.670
> 
> 标签：javascript, jquery

jQuery 为画布上特定幻灯片的特定 div 函数淡入，设置时间为 .fadeIn()。

一旦我到达我的画布网络应用程序中的第六张幻灯片（基于reveal.js - [http://lab.hakim.se/reveal-js/#/](http://lab.hakim.se/reveal-js/#/)），需要 div="fade" 出现。

当 div="fade" 放在第一个区域时，jQuery 函数可以完美运行，但如果它放在任何其他部分中），那么当然页面 onLoad 发生在很长时间之前（即 div id="fade " 设置为按以下方式加载 div：

jQuery：

```
$(function(){  // $(document).ready shorthand
  $('#fade').fadeIn(2200);
}); 
```

HTML5 Section #6（希望 div="fade" 在这里工作）：

```
...
</section>
<!-- end section 5 -->

<!-- begin section 6 -->
<section>
<div>
<p>
<a href="#">Interviewing a Co-founder<br>
<img src="img/misc/..." width="60" height="50" />
</a>
</p>
</div>

<div id="fade" style="display:none;">
<div id="browsers">
<p>
<a href="#" target="_blank">Fundraising<br />Campaign</a>
</p>
</div> <!-- END fundraising 'browsers' -->
</div> <!-- END fade jQuery --> 
</section>
<!-- end section 6 --> 
```

...只是作为旁注，或者对于不熟悉此画布的人，每个 ++ ... 标记下一个“幻灯片”，当您使用该应用程序时...再次，您可以在以下位置查看示例：[http://lab.hakim.se/reveal-js/#/](http://lab.hakim.se/reveal-js/#/)。

我很高兴使用良好的老式 js 或 jquery 进行修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:23:54.040

从reveal.js的[文档：](https://github.com/hakimel/reveal.js/)

```
Reveal.addEventListener( 'slidechanged', function( event ) {
    // event.previousSlide, event.currentSlide, event.indexh, event.indexv
} ); 
```

所以，你可以`fadeIn`这样调用：

```
Reveal.addEventListener( 'slidechanged', function( event ) {
    if(event.currentSlide==6){
        $('#fade').fadeIn(2200);
    }
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T14:00:28.497

你可以做类似的事情，

```
Reveal.addEventListener( 'slidechanged', function( event ) {                
   if(event.indexh == 1){ //to get the slide number
     $('#fade').fadeIn(2200);
   }
}); 
```

# ruby - 除法的红宝石数学问题

> ID：13190038
> 
> 赞同：0
> 
> 时间：2012-11-02T05:51:48.257
> 
> 标签：ruby, math, casting, division

我正在用比奈公式计算斐波那契数，但我在用红宝石除法时遇到了麻烦。我尝试将数字转换为 to_f 等但无济于事。我会告诉你什么有效，什么无效然后也许你可以告诉我为什么。

以下不起作用

```
n=5
fib=(1 + sqrt(5))**n - (1-sqrt(5))**n / (2**n * sqrt(5))
puts fib #outputs 354.9257634247335 which is a bunch of garbage 
```

我也试过

```
n=5
fib=((1 + sqrt(5))**n).to_f - ((1-sqrt(5))**n).to_f / (2**n * sqrt(5)).to_f
puts fib #outputs the exact same thing as above 
```

但是以下作品

```
n=5
fib1=(1 + sqrt(5))**n - (1-sqrt(5))**n
fib2=(2**n * sqrt(5))
fib = fib1/fib2
puts fib.round(0) #outputs 5 which is correct 
```

为什么前两个例子失败了，但后者给了我想要的东西？这真气人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:56:09.930

您的操作顺序有问题。除法的优先级高于减法，因此在前两个示例中，只有第二个数字被除法。

您需要在分子周围添加一个括号，以确保两个部分在被划分之前都被减去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:56:27.477

你缺少括号

```
fib=((1 + sqrt(5))**n - (1-sqrt(5))**n) / (2**n * sqrt(5))
=> 5.000000000000001 
```

# ruby-on-rails - 独角兽工人的第一反应慢了几秒钟

> ID：13190042
> 
> 赞同：4
> 
> 时间：2012-11-02T05:52:27.903
> 
> 标签：ruby-on-rails, ruby, unicorn

我不知道如何让我的独角兽工作人员只在他们真正“准备好”处理请求时才接受连接。我发现前几个请求很慢，然后它们会急剧加速（从几秒到一百毫秒左右）。这个问题似乎因为独角兽似乎在一定时间后杀死工人这一事实而更加复杂，这意味着我一直面临着缓慢的第一次请求的性能打击。有没有其他人看到这个或知道我能做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T05:47:01.127

事实证明，我们的 i18n yml 文件在第一次请求时被延迟加载到视图中导致了性能问题。只需将以下内容添加到我的 config/unicorn.rb 似乎已经解决了这个问题：

```
before_fork do |server, worker|
  # The following is highly recomended for Rails + "preload_app true" as
  # there's no need for the master process to hold a connection.
  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.connection.disconnect!

  # No need to disconnect from Redis servers--they are connected to lazily.

  # Force translations to be loaded into memory.
  I18n.t('activerecord')
end 
```

# php - 需要简单的 PHP 帮助

> ID：13190044
> 
> 赞同：0
> 
> 时间：2012-11-02T05:52:37.633
> 
> 标签：php

这很简单，但我无法进入逻辑。

有一个简单的在线表格。希望提交后能够调整变量。

如果有人可以阐明这一点，将非常感激！

```
$chocolatebar = $HTTP_POST_VARS['chocolatebar'];

if $chocolatebar = "a"  then we want to change the value to "snickers";

if $chocolatebar = "b"  then we want to change the value to "mars";

if $chocolatebar = "c"  then we want to change the value to "cherry ripe"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:55:09.957

```
$chocolatebar = isset($_POST['chocolatebar']) ? $_POST['chocolatebar'] : '';
if ($chocolatebar == "a")  $chocolatebar = "snickers";
elseif ($chocolatebar == "b")  $chocolatebar = "mars";
elseif ($chocolatebar == "c")  $chocolatebar = "cherry ripe"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:56:45.927

```
$chocolatebar = $POST['chocolatebar'];

if($chocolatebar =="a")
{ 
     $chocolatebar="snickers";
}
else if($chocolatebar =="b")
{ 
    $chocolatebar="mars";
}
else
{ 
    $chocolatebar="cherry ripe";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T06:06:57.383

首先不要使用`$HTTP_POST_VARS`，此功能已弃用[$HTTP_POST_VARS](http://php.net/manual/en/reserved.variables.post.php)

另外，我猜你应该使用 switch 而不是 if-else。

```
<?php
$chocolatebar = ($_POST['chocolatebar'] != '') ? $_POST['chocolatebar'] : '';

switch($chocolatebar){
    case 'a':
        $chocolatebar = 'snickers';
        break;

    case 'b':
        $chocolatebar = 'mars';
        break;

    case 'c':
        $chocolatebar = 'cherry ripe';
        break;

    default:
        $chocolatebar = '';
        break;
}

echo $chocolatebar; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T06:01:26.113

在这种情况下，当您有多个选项时，您最好使用[`switch`](http://php.net/manual/en/control-structures.switch.php)多个`if-else`.

```
if(isset($_POST['chocolatebar'])){
    $chocolatebar = $_POST['chocolatebar'];
    switch ($chocolatebar) {
        case "a":
            $chocolatebar = "snickers";
            break;
        case "b":
            $chocolatebar = "mars";
            break;
        case "c":
            $chocolatebar = "cherry ripe";
            break;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T06:02:37.127

```
$chocolatebar = $_POST['chocolatebar'];
switch($chocolaterbar){
    case "a": 
        $chocolatebar = "snickers";
    break;

    case "b": 
        $chocolatebar = "mars";
    break;

    case "c": 
        $chocolatebar = "cherry ripe";
    break;

    default:
        $chocolatebar = "unknown";
    break;
} 
```

我的目的是使用开关。或者另一种聪明的选择是使用数组..

```
$all_chocolates = array("a"=>"snickers","b"=>"mars","c"=>"cherry ripe");
$chocolatebar = $_POST['chocolatebar'];
$chocolatebar = isset($all_chocolates[$chocolatebar]) ? $all_chocolates[$chocolatebar] : "unknown"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T06:03:29.037

如果您想更改更多值，也可以使用 switch case。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T06:03:43.143

为方便起见，您需要在键与值之间建立映射。

```
$valueMap = array(
    'a' => 'snickers',
    'b' => 'mars',
    'c' => 'cherry ripe'
);

// The '@' sign prevents error if characters other than
// 'a', 'b', 'c' is provided, $value will be NULL in
// those cases.
$value = @$valueMap[$_POST['chocolatebar']]; 
```

# dotnetnuke - DotNetNuke 的 IIS 日志解析器

> ID：13190049
> 
> 赞同：0
> 
> 时间：2012-11-02T05:53:09.520
> 
> 标签：dotnetnuke

我想跟踪页面被查看的次数，我的网站正在生产中，

我尝试使用 LogParser 2.2，但由于我使用的是 DotNetNuke，因此我无法给出确切的页面名称，因为 TabID 提到了每个页面。

有什么办法可以跟踪这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:23:44.297

唯一真正做到这一点的方法是从 LogParser 解析以获取 TabId，然后进行数据库交叉引用。

我个人的建议是使用谷歌分析，因为你可以通过友好的名称获得它。

（评论中的人提到了站点日志，出于性能原因，我强烈建议不要这样做。）

# google-maps-api-3 - 在 V3 中使用自定义标记图像时，如何从谷歌地图中删除默认标记？

> ID：13190050
> 
> 赞同：0
> 
> 时间：2012-11-02T05:53:16.337
> 
> 标签：google-maps-api-3, google-maps-markers

我已成功为谷歌地图上的标记添加了自定义图像。问题在于，作为气球的默认标记仍然与新图像一起出现。

应该如何删除默认标记并仅使用自定义图像？以下是我使用的代码块：

```
 var image = "image url";   
    marker = createMarker(point, address1, town, postcode, SiteName);
    marker = new google.maps.Marker({
    position: point,
    map: map,
    icon: image
    }); 
```

createMarker 函数的代码如下：

```
 function createMarker(point, address1, town, postcode, sitename) {

        var html;
        var infowindow;
        html = '<b>' + sitename + '</b>' + '<br/>' + address1 + '<br/>' + town + '<br/>' + postcode;
        var marker = new google.maps.Marker({ position: point, map: map });            

        google.maps.event.addListener(marker, "mouseover", function () {
            if (infowindow) infowindow.close();
            infowindow = new google.maps.InfoWindow({ content: html });
            infowindow.open(map, marker);
        });   

        google.maps.event.addListener(marker, "click", function () {
            if (infowindow) infowindow.close();
            infowindow = new google.maps.InfoWindow({ content: html });
            infowindow.open(map, marker);
        });            
        return marker;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:42:40.157

**图标**属性-可以设置图像或矢量路径：示例-

```
 marker = new google.maps.Marker({
    position: new google.maps.LatLng(-25.363882, 131.044922),
    icon: {
    path: google.maps.SymbolPath.CIRCLE, 
    },
    or
    icon: url of an image,
    draggable: true,
    map: map,
    animation: google.maps.Animation.DROP
}); 
```

此图标属性将覆盖默认气球图标

或者，如果您想稍后在代码中设置图标 - 只需编写 -`marker.setIcon("your url");`

* * *

**更新**：您实际上是在同一位置创建两个标记，一个带有自定义图标，一个带有默认图标。这里-

```
marker = createMarker(point, address1, town, postcode, SiteName);`// marker1`
    marker = new google.maps.Marker({ `...... //marker 2` 
```

所以把这两者结合起来——

```
function createMarker(point, address1, town, postcode, sitename, image) {
//code

var marker = new google.maps.Marker({ position: point, map: map, icon:image }); 
```

# css - 图像问题周围的空白

> ID：13190052
> 
> 赞同：0
> 
> 时间：2012-11-02T05:53:36.063
> 
> 标签：css

> **可能重复：**
> [图像周围的空白](https://stackoverflow.com/questions/13190108/whitespace-around-image)

无法弄清楚我是如何在图像周围获得额外的空白：

![在此处输入图像描述](../Images/b550eca0ebf2bfae7b3cbf4c4e40dfa3.png)

**标记：**

```
 <div id="searchCriteria-Wrapper">
        <p>@Html.Label("Contract #: ")</p><p> @Html.TextBox("searchCriteria")</p><p><input type="button" id="searchButton" title="Submit" value="Search" /></p>
    </div> 
```

**样式：**

```
input, textarea 
{
    border: 1px solid #e2e2e2;
    background: #fff;
    color: #333;
    font-size: .9em;
    margin: 5px 0 6px 0;
    padding: 5px 2px 5px 5px;
    width: 300px;
}

img 
{
    display: block; /* gets rid off any unexpected margins round the image */
    border: 0px;
}

input[type="submit"], input[type="button"], button 
{
        background-color: #ffffff;
        cursor: pointer;
        font-size: 11px;
        font-weight: 600;
        width: auto;
        vertical-align: middle;
    border: 0px;
}

td input[type="submit"], td input[type="button"], td button { font-size: 1em; } 
```

# jquery - 用jquery隐藏除第一个之外的所有a

> ID：13190057
> 
> 赞同：1
> 
> 时间：2012-11-02T05:54:28.620
> 
> 标签：jquery

> **可能重复：**
> [jQuery - 隐藏除第一个元素以外的所有元素](https://stackoverflow.com/questions/10462380/jquery-hide-all-elements-except-first-one)

html代码：

```
<div class="productimg"><a href="">test</a><a href="">tow</a><a href="">three</a></div>
<div class="productimg"><a href="">test</a><a href="">hide</a><a href="">show</a></div>
................ 
```

现在，我只想在打开页面时显示`a`每个中的第一个。`productimg`我使用以下代码。但它隐藏了除第一张图像之外的所有图像。

```
$('.productimg a').hide()
$('.productimg a:eq(0)').show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:09:10.640

用于`gt`隐藏除第一个元素之外的所有元素

```
 $('.productimg').each(function(){
    $(this).find('a:gt(0)').hide();
}); 
```

[演示](http://jsfiddle.net/Ft2mB/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:56:08.820

试试这个，

**[现场演示](http://jsfiddle.net/tvPQG/2/)**

```
$('.productimg').each(function(){
    $(this).children().not(':first').hide();     
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:56:34.533

```
$('.productimg a').each(function(){
   $(this).hide().filter(":first-child").show();
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T06:13:02.747

假设你的 HTML 代码是这样的，

```
<div id="divID">
    <div class="productimg">
        <a href="">test</a> | <a href="">tow</a> | <a href="">three</a></div>
    <div class="productimg">
        <a href="">test</a> | <a href="">hide</a> | <a href="">show</a></div>
</div> 
```

试试这个，

```
$("#divID").find("div").each(function () {
            $(this).find('a').hide().eq(0).show();
        }); 
```

它会工作..

（或者）

如果你想使用 CSS，我们可以像这样实现，

```
.productimg a:not(:first-child)
    {
        display:none;            
    } 
```

# sql - ORA-00936 缺少表达式

> ID：13190059
> 
> 赞同：2
> 
> 时间：2012-11-02T05:54:42.717
> 
> 标签：sql, oracle, error-handling

以下声明：

```
INSERT INTO TABLE1(COL_1,COL2) VALUES(SELECT MAX(COL_1) FROM TABLE1), 'XYZ'); 
```

抛出错误：

```
ERROR at line 1:
ORA-00936: missing expression
 at the select clause. 
1\. The table is empty for now.
2\. COL_1 is a primary key intger field. 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:06:45.427

试试看

```
 create table TABLE1 (COL_1 number, COL2 varchar2(5));

ALTER TABLE TABLE1
add CONSTRAINT t_pk PRIMARY KEY (col_1);

INSERT INTO TABLE1(COL_1,COL2) VALUES((SELECT nvl(MAX(COL_1),0) FROM TABLE1), 'XYZ');

INSERT INTO TABLE1(COL_1,COL2) VALUES((SELECT nvl(MAX(COL_1+1),0) FROM TABLE1), 'XYZ'); 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!4/969d3/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T06:12:35.860

如果要将查询的结果用作标量表达式，请将整个（子）查询括在括号中，如下所示：

```
INSERT INTO TABLE1(COL_1,COL2) VALUES (
   **(SELECT MAX(COL_1) FROM TABLE1)**,
  'XYZ'
); 
```

另一方面，您可以在这里简单地使用[不同的语法](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9014.htm "INSERT ... SELECT 语法 (Oracle)")：

```
INSERT INTO TABLE1(COL_1,COL2)
SELECT MAX(COL_1), 'XYZ' 
FROM TABLE1
group by  'XYZ'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:57:00.387

移除一个额外的支架

```
INSERT INTO TABLE1(COL_1,COL2) SELECT MAX(COL_1) , 'XYZ' FROM TABLE1 
```

# database - 如何在 SQLite 中找到数字的幂

> ID：13190064
> 
> 赞同：17
> 
> 时间：2012-11-02T05:55:10.493
> 
> 标签：database, sqlite

我想更新我的数据库中的兴趣字段。我的 SQL 查询如下所示

> 更新 Table_Name 设置 Interest = Principal * Power(( 1 + (rate / 100),year)

此查询在 MySQL 中运行良好，但不适用于 SQLite。

错误说**没有找到电源功能**

有谁知道如何解决这个问题，因为我必须使用查询来一次更新超过 3000 条记录。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T06:03:56.893

SQLite doesn't have a lot of functions available. But the good news is that is easy enough to add your own.

Here's how to do it using the C API (which also works from Objective-C code).

First write a power function:

```
void sqlite_power(sqlite3_context *context, int argc, sqlite3_value **argv) {
    double num = sqlite3_value_double(argv[0]); // get the first arg to the function
    double exp = sqlite3_value_double(argv[1]); // get the second arg
    double res = pow(num, exp);                 // calculate the result
    sqlite3_result_double(context, res);        // save the result
} 
```

Then you need to register the function:

```
int res = sqlite3_create_function(dbRef, "POWER", 2, SQLITE_UTF8, NULL, &sqlite_power, NULL, NULL); 
```

The `2` is the number of arguments for the function. `dbRef` is of course the `sqlite3 *` database reference.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-03-20T15:25:37.820

You can also create an SQLite **user-defined function** from python. Based on the example at docs.python.org: [sqlite3.Connection.create_function](https://docs.python.org/2/library/sqlite3.html#sqlite3.Connection.create_function)

Create a python function:

```
def sqlite_power(x,n):
    return int(x)**n
print(sqlite_power(2,3))
# 8 
```

Create a SQLite user-defined function based on the python function:

```
con = sqlite3.connect(":memory:")
con.create_function("power", 2, sqlite_power) 
```

Use it:

```
cur = con.cursor()
cur.execute("select power(?,?)", (2,3))
print cur.fetchone()[0]
# 8 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-07-09T17:52:04.060

I was strugginling with this too, but if all you need is powers of 2 (or multiples, etc) there is a simpler way:

Use the shift operator, e.g

```
SELECT 1 << mytable.value 

SELECT 1 << (table.x + etc..) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-02T07:05:23.703

[https://www.cafe-encounter.net/p3244/installing-and-using-sqlite-extensions-on-macos-and-maybe-windows-linux-too](https://www.cafe-encounter.net/p3244/installing-and-using-sqlite-extensions-on-macos-and-maybe-windows-linux-too)

Step was to build the Math extensions library that some wonderful person named Liam Healy wrote:

Enter following command in terminal :

Step 1) Download/ Open link [http://sqlite.org/contrib/download/extension-functions.c?get=25](http://sqlite.org/contrib/download/extension-functions.c?get=25)

Step 2) Go to location where extension-functions.c is downloaded. Run command `"gcc -fno-common -dynamiclib extension-functions.c -o libsqlitefunctions.dylib".` This will create file libsqlitefunctions.dylib at same place then you can use that in your ios application from xcode.

Now in your cocoa app you can add:

```
“SELECT load_extension(’libsqlitefunctions.dylib’);” 
```

and then you have access to all kinds of glorious methods like COS, SQRT, etc! You can use them in your app like this:

```
//Activate database loading
sqlite3_enable_load_extension(database, 1);
sqlite3_load_extension(database,”libsqlitefunctions.dylib”,0,0); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-09T19:27:39.937

If you are using SQLite NuGet package in a .NET project, you can write an extension method and bind it at runtime;

```
[SQLiteFunction("pow", 2, FunctionType.Scalar)]
public class SQLitePowerExtension : SQLiteFunction
{
    public override object Invoke(object[] args)
    {
        double num = (double)args[0];
        double exp = (double)args[1];

        return Math.Pow(num, exp);
    }
} 
```

And then use it like this;

```
using (var conn = new SQLiteConnection("Data Source=:memory:"))
{
    conn.Open();
    conn.BindFunction(typeof(SQLitePowerExtension).GetCustomAttribute<SQLiteFunctionAttribute>(), new SQLitePowerExtension());

    var comm = new SQLiteCommand("CREATE TABLE test (num REAL, exp REAL, result REAL)", conn);
    comm.ExecuteNonQuery();

    // Populate with some data - not shown

    comm = new SQLiteCommand($"UPDATE test SET result = pow(num, exp))", conn);
    comm.ExecuteNonQuery();
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-28T18:01:10.630

This could be solved with SQL. This works for integer exponents:

```
Drop Table if Exists args ;
Create Table args as Select 2.5 as Base, 4 as Exponent ;

WITH RECURSIVE pow(exponent, exponent_remainder, base, result) as (
    --FIRST EXPRESSION
    SELECT exponent,exponent -1 , base,base
    FROM args

    union all 
    --SECOND EXPRESSION
    select Args.exponent,pow.exponent_remainder -1, pow.base,pow.result * pow.base
    from args
    join pow on args.exponent = pow.exponent
    where pow.exponent_remainder >= 0
)
select pow.result
from pow
where pow.exponent_remainder = 0; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-02T06:01:48.817

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-04-15T08:51:30.353

Actually sqlite *does have* `pow/power` as a built-in mathematical function, but you need to enable it with `DSQLITE_ENABLE_MATH_FUNCTIONS`.

From [https://www.sqlite.org/lang_mathfunc.html#pow](https://www.sqlite.org/lang_mathfunc.html#pow):

> The math functions shown below are part of the SQLite amalgamation source file but are only active if the amalgamation is compiled using the -DSQLITE_ENABLE_MATH_FUNCTIONS compile-time option.

# objective-c - 只有 viewDidLoad 中添加的子视图会自动调整大小

> ID：13190067
> 
> 赞同：0
> 
> 时间：2012-11-02T05:55:29.470
> 
> 标签：objective-c, ios, ios6

我创建了 UIViewController 的自定义子类，其作用类似于 UINavigationController 或 UITabBarController。我们称它为 ToolbarNavController。它在底部有一个工具栏，用户可以通过控件移动到不同的内容视图。

除了 ToolbarNavController 的视图之外，我还有两个内容视图。两者都是从笔尖加载的，并有自己的控制器。该应用程序开始显示其中之一。工具栏中的按钮允许用户在它们之间切换。

当我在 viewDidLoad 中将这些视图添加为 ToolbarNavController 视图的子视图时，它们会正确调整大小以填充状态栏和工具栏之间的区域，而不会重叠/重叠。

但是当我尝试延迟加载第二个视图时，仅当用户按下工具栏按钮时才第一次将其添加为子视图，iOS 不会调整视图的大小以考虑其父视图中的工具栏，并且它会覆盖工具栏这弄乱了我的自动布局约束。此外，当我不在 viewDidLoad 中添加子视图时，如果我在切换到第二个视图之前将设备置于横向，它会加载纵向框架。

**底线：**在 viewDidLoad 中插入子视图时，iOS 会正确调整其大小并为其管理自动旋转。稍后插入时，我需要自己检测方向设置框架。（由于某种原因，当我这样做时，自动旋转又开始了）。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T16:46:20.787

在 viewDidLoad 中，视图尚未针对分辨率和界面方向进行布局，并且视图属性与界面设计器中的一样。所以，如果你有一个纵向视图，这就是在进入 viewDidLoad 时设置视图的初始属性的方式。当您在此处添加视图时，会将其添加到 XIB 视图中。稍后，iOS 在视图层次结构上执行布局，从而根据需要调整插入视图​​的大小。但是稍后添加视图时，视图层次结构已经布局，因此您添加的新视图也应该是正确布局的。

最佳做法是使用要插入的视图的大小来计算所需的大小。例如，包含视图的一半宽度，或边界的三分之一等。这样它就独立于界面所在的方向。

# jquery - 让自定义函数“活”到 ajax 结果

> ID：13190068
> 
> 赞同：0
> 
> 时间：2012-11-02T05:55:51.283
> 
> 标签：jquery

我有一个基本上可以使任何非实时功能成为实时功能的功能

```
(function($) {
    $.fn.extend({
        collapsiblePanel: function() {
            // Call the ConfigureCollapsiblePanel function for the selected element
            return $(this).each(ConfigureCollapsiblePanel);
        }
    });

})(jQuery);

function ConfigureCollapsiblePanel() {
    $(this).addClass("ui-widget");

    // Wrap the contents of the container within a new div.
    $(this).children().wrapAll("<div class='collapsibleContainerContent ui-widget-content'></div>");

    // Create a new div as the first item within the container.  Put the title of the panel in here.
    $("<div class='collapsibleContainerTitle ui-widget-header'><div>" + $(this).attr("title") + "</div></div>").prependTo($(this));

    // Assign a call to CollapsibleContainerTitleOnClick for the click event of the new title div.
    $(".collapsibleContainerTitle", this).click(CollapsibleContainerTitleOnClick);
}

function CollapsibleContainerTitleOnClick() {
    // The item clicked is the title div... get this parent (the overall container) and toggle the content within it.
    $(".collapsibleContainerContent", $(this).parent()).slideToggle();
}

     (function ($) {
 $.fn.livecollapsiblePanel = function (opts) {
        this.live("mouseover", function() {
            if (!$(this).data("init")) {
                $(this).data("init", true).collapsiblePanel(opts);
            }
        });
        return $();
    };
}(jQuery));
     $(".collapsibleContainer").livecollapsiblePanel(); 
```

我主要做的是在 ajax 调用中生成可折叠面板并将其显示在 div 中。为了让我将每个 div '激活'到一个可折叠面板中，我目前需要将鼠标悬停在每个 div 上，然后将其转换为可折叠面板...有什么办法可以将它更改为 div 从 ajax 加载时称它们为可折叠面板。

# java - Java JFileChooser 后退按钮

> ID：13190074
> 
> 赞同：1
> 
> 时间：2012-11-02T05:56:19.657
> 
> 标签：java, swing, button, user-interface, jfilechooser

我刚刚在我的程序中实现了 Java JFileChooser，并且想知道是否可以添加一个后退按钮。在 Microsoft Word 或 Photoshop 等程序中的大多数文件选择器中，您可以返回一个目录。这个选项非常有用，想知道是否有任何方法可以做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T06:06:10.190

这真的取决于外观，Windows 外观确实有一个后退按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T08:35:20.653

**如果您在 Windows 上使用系统**外观（包括后退按钮），这就是您所看到的。

![文件选择器](../Images/fd10aac748a2ad7029b05ce9b8fd77af.png)

```
UIManager.setLookAndFeel(
        UIManager.getSystemLookAndFeelClassName()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T07:07:58.673

如果您正在实现 JFileChooser，您想要的功能已经存在于 GUI 中。

# java - Java 从终端读取参数

> ID：13190080
> 
> 赞同：-1
> 
> 时间：2012-11-02T05:56:39.037
> 
> 标签：java

我正在尝试实现以下内容：

```
 public class Main {
     public static void main(String[] args) {
    //READ FILE IN
         String filename = args[0];
         System.out.println(filename);
      }} 
```

这编译得很好，但是当我尝试运行时，`java br/com/seimos/minijava/Main.java < a`或者`java br/com/seimos/minijava/Main.java a`例如，我得到一个错误。为什么？？（顺便说一句，我需要得到它才能做到`java br/xx/xx.../xx`。

谢谢！

编辑：对不起，我一开始打错了。`java`我没有跑`javac`。

我得到的错误是：

```
Exception in thread "main" java.lang.NoClassDefFoundError: br/com/seimos/minijava/Main/java
Caused by: java.lang.ClassNotFoundException: br.com.seimos.minijava.Main.java
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:01:30.020

运行 Java 程序是一个两步过程。首先将`.java`文件编译成`.class`文件。然后使用`java`命令执行类文件。运行时参数显然必须在调用时在运行时传递`java`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:05:25.147

您不在**compile-time**传递参数，而是在**runtime**传递。

```
javac --> compiles your Java program
java --> runs the generated bytecode 
```

* * *

```
java br/com/seimos/minijava/Main.java -args
                                   ^ remove (.java) 
```

Java 运行时运行生成的**.class**字节码，它是提供的名称，而不是未编译的`.java`源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:05:34.023

编译时，如果java文件带有某个包，需要申请br.com.xxx.main.java等。如果这只是 java 文件的路径就可以了。你可以发布错误吗？

# iphone - 使用 iPhone 的流媒体频道？

> ID：13190081
> 
> 赞同：-2
> 
> 时间：2012-11-02T05:56:41.737
> 
> 标签：iphone, streaming, mpmovieplayercontroller

有人可以帮助我如何将 MPMoviePlayerController 用于流媒体频道。我的代码适用于 Apple[链接](http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8)。现在我怎样才能让它流媒体直播电视频道。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:22:59.010

部分解决了这个问题。解决方案是：确保您是 Apple 开发者计划的成员。登录到您的苹果帐户并从[这里](https://developer.apple.com/downloads/index.action?=http%20#)下载 MakeRefMovie 软件。把它放在你的服务器上。只需提供频道的链接，它将打开任何流媒体频道，并将创建 .mov 文件。从任何 Apple 设备访问 .mov 文件并通过 MPMoviePlayerController 呈现。将 MPMoviePlayerController 的 URL 设置为服务器上的 .mov 文件。它会工作的！

# ssas - SSAS 中计算度量聚合的不同转折

> ID：13190087
> 
> 赞同：1
> 
> 时间：2012-11-02T05:57:06.923
> 
> 标签：ssas, mdx, aggregation

我必须以一种奇怪的方式计算某些东西，它在大多数情况下都有效——无论是在叶子上还是在多个维度的更高级别的聚合中。但它没有给出一个特定维度的正确聚合值。

我目前拥有的是...

```
CREATE MEMBER CURRENTCUBE.[Measures].[Active Commitments]
 AS NULL,
FORMAT_STRING = '#,#', 
VISIBLE = 1;    

SCOPE (DESCENDANTS([Date Dimension].[Fiscal Year Hierarchy],,AFTER));     
[Measures].[Active Commitments] =
iif([Constituent Activity].[Type].currentMember.Properties("Name")="Correspondence",
    sum(([Commitment Dates].[Start Date], NULL: [Date Dimension].[Fiscal Year Hierarchy]), [Measures].[Commitment Count]),
    sum(([Commitment Dates].[First Funded Date], NULL: [Date Dimension].[Fiscal Year Hierarchy]), [Measures].[Commitment Count]))
        - sum(([Commitment Dates].[Stop Date],[Commitment].[Was Commitment Ever Active].[Sometime Active], NULL: [Date Dimension].[Fiscal Year Hierarchy]),  [Measures].[Commitment Count]); 
END SCOPE;

SCOPE (DESCENDANTS([Date Dimension].[Fiscal Year Hierarchy],,AFTER));
<Similar to above> 
```

如您所见，复杂性在于一种类型的“承诺”从 开始，`[Start Date]`而其他类型的“承诺”从`[First Funded Date]`.

This fails whenever multiple members of `[Constituent Activity]`are selected because in such cases the use of `currentMember`in the SCOPE statement is invalid. 例如，下面的 MDX 执行成功但输出`#Error`——

```
select  
    [Measures].[Active Commitments] on columns
    ,[Date Dimension].[Fiscal Year Hierarchy].[Fiscal Year].&[2011\12] on rows
from Compass3
where
    {[Constituent Activity].[Description].[XYZ]
    ,[Constituent Activity].[Description].[ABC]} 
```

我认为我需要在 SCOPE 语句中编码的是递归......

```
if a single member of [Constituent Activity] is current
then use the calc as defined above
else use [Measures].[Active Commitments] = sum(all selected members of [Constituent Activity], [Measures].[Active Commitments]) 
```

...但是我该怎么写呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:08:36.000

您是否可以一直控制回到数据仓库/数据源视图？您可以在事实表中添加一个计算字段，以便在单元格级别具有 [承诺有效日期] 吗？然后你可以在多维数据集中做更简单的计数。

我发现从长远来看，在数据仓库中执行业务规则和进行业务计算会更高效、更容易。

# c#-4.0 - 由于 IntPtr 可能出现的异常

> ID：13190088
> 
> 赞同：1
> 
> 时间：2012-11-02T05:57:22.420
> 
> 标签：c#-4.0, .net-4.0, intptr

我正在尝试记录由于使用（或误用）`IntPtr`. 我试图搜索它，但我不确定除了`OverflowException`. 这是为了`interface`文档。

有人可以提供链接或可能说明由于使用而可能导致的主要异常`IntPtr`吗？

如果这个问题不属于这里，请告诉我。我不知道该把它放在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:02:53.927

除了`OverFlowException`有另一个`ArgumentNullException`可能会提出反对。[IntPtr.ISerializable.GetObjectData 方法](http://msdn.microsoft.com/en-us/library/bb348251.aspx)。

从[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/system.intptr.aspx)看来，可能会发生[OverflowException](http://msdn.microsoft.com/en-us/library/system.overflowexception.aspx)。

1.  [IntPtr 构造函数 (Int64)](http://msdn.microsoft.com/en-us/library/837ksy6h.aspx)
2.  [IntPtr 显式转换（IntPtr 到 Int32）](http://msdn.microsoft.com/en-us/library/9a8d37fb.aspx)
3.  [IntPtr 显式转换（Int64 到 IntPtr）](http://msdn.microsoft.com/en-us/library/y7kz90hb.aspx)
4.  [IntPtr.ToInt32 方法](http://msdn.microsoft.com/en-us/library/system.intptr.toint32.aspx)

# ruby - AWS-SDK S3 列出大目录失败

> ID：13190089
> 
> 赞同：1
> 
> 时间：2012-11-02T05:57:35.347
> 
> 标签：ruby, amazon-s3, aws-sdk

在 AWS-SDK 中，它列出了以下形式的 ruby​​ 代码：

```
 s3 = AWS::S3.new
 bucket = s3.buckets[bucket_name]
 tree = bucket.as_tree(:prefix => 'myshop/products')
 directories = tree.children.select(&:branch?).collect(&:prefix) 
```

失败错误：“无法在 S3 列表对象响应中找到标记”

目录结构

```
/myshop/products/1474472/original.jpg
/myshop/products/1474472/small.jpg
/myshop/products/1474472/mini.jpg
/myshop/products/1333333/original.jpg
/myshop/products/1333333/small.jpg
/myshop/products/1333333/mini.jpg 
```

...

超过 100 000 个 obj

我想验证目录（例如“1474472”）是否已创建

我的计划：aws-s3-list-> ruby​​-array-> 在数组中查找 (array.include?)

!!!需要非常快速的方法 - 很快世界末日:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:35:07.303

Amazon S3 中没有文件夹之类的东西。它是一个“平面”文件系统。看看[这个答案](https://stackoverflow.com/questions/7396606/aws-s3-sdk-get-the-folder-instead-of-a-file/7465152#7465152)。

您真正需要的是验证您的存储桶中是否存在给定的前缀（例如“/myshop/products/1474472”）。
他们的 REST API 绝对支持它，请查看[文档](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTBucketGET.html)。您需要列出与给定匹配的键（这将是“文件名”）`prefix`，可以作为参数传递。您还可以通过将`max-keys`参数设置为 来优化您的调用`1`。这样，如果您在响应中收到任何非零数量的项目，则存储桶已包含名称以给定前缀开头的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-20T19:02:03.467

理想的方法是在写入 S3 时通过您的应用程序维护列表。EMRFS 通过将详细信息存储在 Dynamo DB 上来做同样的事情。

使用该列表生成清单，例如用于 S3Distcp。这样我们就可以避免将 S3 打到 list，这是一个代价高昂的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-02T17:48:30.733

```
aws s3 cp s3://bucket/tmp/foo/ . --recursive --exclude "*" --include "*1474472" 
```

[https://docs.aws.amazon.com/cli/latest/reference/s3/index.html#use-of-exclude-and-include-filters](https://docs.aws.amazon.com/cli/latest/reference/s3/index.html#use-of-exclude-and-include-filters)

# python - 使用 Pyparsing 生成 Sql 到 Pymongo

> ID：13190090
> 
> 赞同：4
> 
> 时间：2012-11-02T05:57:36.197
> 
> 标签：python, parsing, mongodb, pymongo, pyparsing

我正在使用目前世界上“最棒”的解析库。解析。手头的问题是从给定的 SQL 字符串（对于 select 语句）生成 PyMongo 字典。我使用的语法定义如下：

```
sql_stmt = (select_key_word + ('*' | column_list).setResultsName
                 ("columns") + form_key_word + table_name_list.setResultsName
                 ("collections") + 
                 Optional(where_condition, "").setResultsName("where")) 
```

这里的 select_key_word、column_list 等结构是有效的语法定义。并使用这个我可以解析一个字符串，如“Select * from collection_1 where (Sal = 1000 or Sal=5000) AND Car>2” 我遇到的问题是，解析的部分是这样的：

```
[[u'where', [u'(', [u'Sal', '=', u'1000'], 'or', [u'Sal', '=', u'5000'], u')'], 'and', [u'Car', '>', u'2']]] 
```

如果我想把它翻译成 sqlish 的话，这很好。但是在 pymongo 中相同的有效表示是这样的：

```
{u'$or': [{u'$and': [{u'Sal': u'1000'}, {u'Sal': u'5000'}]}, {u'Car': {u'$gte': u'2'}}]} 
```

那就是我卡住的地方。有人可以给我一个方向吗？在我看来， setParseAction 将是一种方法，但无法弄清楚

where_contidion 的代码是：

```
where_expr = Forward()
and_keyword = get_conjunction_as_grammar("and")
or_keyword = get_conjunction_as_grammar("or")
in_operation = get_operation_as_grammar("in")

column_value = get_real_number_as_grammar() | get_int_as_grammar() | \
                quotedString
binary_operator = get_bin_op_as_grammar()
col_name = get_column_name_as_grammar()

where_condn = Group(
(col_name + binary_operator + column_value) |
(col_name + in_operation + "(" + delimitedList(column_value) + ")" ) |
("(" + where_expr + ")")
)
where_expr << where_condn + ZeroOrMore((and_keyword | or_keyword) 
                                        + where_expr)

where_condition = Group(CaselessLiteral("where") + where_expr) 
```

提前致谢。如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:32:11.413

是的，解析动作正是这种项目的东西。此外，如果您尝试评估一个表达式，该表达式可以包含不同优先级的操作的括号嵌套，那么 operatorPrecedence 通常是一个方便的快捷方式：

```
from pyparsing import *

and_keyword = CaselessKeyword("and")
or_keyword = CaselessKeyword("or")
in_operation = CaselessKeyword("in")

value = quotedString | Word(alphanums)
comparisonOp = oneOf("= != > < >= <=")
LPAR,RPAR = map(Suppress,"()")
valueList = LPAR + delimitedList(value) + RPAR
comparisonExpr = value + comparisonOp + value | value + in_operation + Group(valueList)
def makePymongoComparison(tokens):
    v1,op,v2 = tokens
    if op != 'in':
        if op != '=':
            op = {
                "!=" : "$ne",
                ">"  : "$gt",
                "<"  : "$lt",
                ">=" : "$gte",
                "<=" : "$lte",
                }[op]
            v2 = "{'%s': '%s'}" % (op, v2)
        return "{'%s': '%s'}" % (v1, v2)
    else:
        return "{'%s': {'$in': [%s]}}" % (v1, ','.join("'%s'"%v for v in v2))
comparisonExpr.setParseAction(makePymongoComparison)

def handleBinaryOp(op):
    def pa(tokens):
        return "{'$%s': %s}" % (op, ', '.join(tokens.asList()[0][::2]))
    return pa
handleAnd = handleBinaryOp("and")
handleOr  = handleBinaryOp("or")
whereOperand = comparisonExpr
where_expr = operatorPrecedence(whereOperand,
    [
    (and_keyword, 2, opAssoc.LEFT, handleAnd),
    (or_keyword, 2, opAssoc.LEFT, handleOr),
    ])

where_condition = Group(CaselessLiteral("where") + where_expr)

print where_expr.parseString("(Sal = 1000 or Sal=5000) AND Car>2")[0]
print where_expr.parseString("(Sal = 1000 or Sal=5000) AND Car in (1,2,3)")[0] 
```

印刷：

```
{'$and': {'$or': {'Sal': '1000'}, {'Sal': '5000'}}, {'Car': '{'$gt': '2'}'}}
{'$and': {'$or': {'Sal': '1000'}, {'Sal': '5000'}}, {'Car': {'$in': ['1','2','3']}}} 
```

仍然需要一些调整，但我希望这能让你走得更远。

# mysql - mysql select from table 1 join and order by table 2，优化文件排序

> ID：13190092
> 
> 赞同：1
> 
> 时间：2012-11-02T05:57:50.610
> 
> 标签：mysql, temporary, filesort

阅读mysql帖子但找不到解决方案。

任何指针将不胜感激。

我有 2 个表 A，B 表 A 具有映射到多个 feedid 的文件夹 ID（1 到多个）表 B 具有与之关联的 feedid 和数据。

以下查询给出了使用索引；使用临时的；使用文件排序

```
SELECT A.feed_id,B.feed_id,B.entry_id 
FROM feed_folder A 
LEFT JOIN feed_data B on A.feed_id=B.feed_id 
WHERE A.folder_id=29  
AND B.entry_id <= 123 
AND B.entry_created <= '2012-11-01 21:38:54' 
ORDER by B.entry_created desc limit 0,20; 
```

关于如何避免临时文件排序的任何想法。

以下是表结构

```
CREATE TABLE `feed_folder` (
  `folder_id` bigint(20) unsigned NOT NULL,
  `feed_id` bigint(20) unsigned NOT NULL,
  UNIQUE KEY `folder_id` (`folder_id`,`feed_id`),
  KEY `feed_id` (`feed_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE `feed_data` (
  `entry_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `feed_id` bigint(20) unsigned NOT NULL,
  `entry_created` datetime NOT NULL,
  `entry_object` text,
  `entry_permalink` varchar(150) NOT NULL,
  `entry_orig_created` datetime NOT NULL,
  PRIMARY KEY (`entry_id`),
  UNIQUE KEY `feed_id_2` (`feed_id`,`entry_permalink`),
  KEY `entry_created` (`entry_created`),
  KEY `feed_id` (`feed_id`,`entry_created`),
  KEY `feed_id_entry_id` (`feed_id`,`entry_id`),
  KEY `entry_permalink` (`entry_permalink`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:57:50.847

试试这个查询：

```
SELECT * FROM(SELECT
A.feed_id,B.feed_id,B.entry_id 
FROM feed_folder as A 
INNER JOIN feed_data as B on A.feed_id=B.feed_id 
WHERE A.folder_id=29  
AND B.entry_id <= 123 
AND B.entry_created <= '2012-11-01 21:38:54')joinAndSortTable
ORDER by B.entry_created desc limit 0,20; 
```

问题出在别名中，你忘了给`as A`和`as B` 我还提醒您有关 LEFT JOIN 和 RIGHT JOIN、INNER JOIN ... 要加入您选择的所有记录，使用`INNER JOIN`是一种解决方法。因为`INNER JOIN`可以加入所有具有完全访问权限的列。

祝你好运

# android - 通过膨胀创建的错误布局层次结构

> ID：13190095
> 
> 赞同：0
> 
> 时间：2012-11-02T05:58:08.977
> 
> 标签：android, android-layout, android-widget, android-inflate

我有一个自定义组件，它实际上包装了另一个组件。它的布局是：

```
<AutoCompleteTextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent" android:layout_height="match_parent"
android:background="@drawable/text_view_background" android:textCursorDrawable="@null" 
android:textColor="@android:color/black" android:inputType="textNoSuggestions"
android:paddingLeft="7dp"/> 
```

在组件的代码中，我试图对其进行膨胀：

```
inflate(context,R.layout.results_auto_complete,this);
resultsAutoComplete=(AutoCompleteTextView)getChildAt(0); 
```

但我得到 a `ClassCastException`，它说第一个孩子是 a `RelativeLayout`！我跟踪了这​​个相对布局的所有孩子，它实际上是小部件的布局，其配置活动包含我的自定义组件！当我用一个简单的测试活动测试组件时，一切正常！

那么为什么会发生这种情况，我能做些什么呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:21:52.803

如果你`AutoCompleteTextView`是一个独立的 xml 文件（你的代码是根 xml 标签）`results_auto_complete.xml`。这是通货膨胀的结果，不需要使用 getChildAt(i)。

如果`<AutoCompleteTextView>`是 XML 文件中的子元素，则使用应为其分配一个 Id: `android:id="@+id/your_view_id"`。然后在充气之后，使用：

```
this.findViewById(R.your_view_id); 
```

这是加载组件视图的当前活动。

**更新，试试这个：**

```
LayoutInflater mInflater = (LayoutInflater)etContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
resultsAutoComplete=(AutoCompleteTextView)mInflater.inflate(R.layout.your_view_id, this, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:33:24.480

问题似乎是我有 2 个布局具有来自不同项目的相同标识符（一个项目链接到另一个项目），所以当我尝试从其中一个项目中扩充布局时，我得到的布局是另一个项目中的相同标识符。无论如何，感谢您尝试提供帮助。

# javascript - 创建 JavaScript 类的最佳方法是什么？

> ID：13190097
> 
> 赞同：39
> 
> 时间：2012-11-02T05:58:25.697
> 
> 标签：javascript, oop

> **可能重复：**
> [在 Javascript 中使用“原型”与“这个”？](https://stackoverflow.com/questions/310870/use-of-prototype-vs-this-in-javascript)
> [Javascript中的面向对象问题](https://stackoverflow.com/questions/444170/object-oriented-questions-in-javascript)

您能否推荐以下哪些是最好的或它们的优缺点？

### 方法一

```
function User() {

    this.name = "my name";
    this.save = function() {

    };
} 
```

### 方法二

```
function User() {

    this.name = "my name";
}

User.prototype.save = function() {

} 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-02T06:37:10.037

来自 Java 和 PHP 的背景，我最初对 JavaScript 中的整个“类”概念感到困惑。这里有几点需要考虑。

# 建造

首先，因为您可能会将您的类定义为..

```
Customer = function () {}
Customer.prototype = new Person(); 
```

如果您在构造过程中定义属性和方法，您最终会遇到各种各样的代码噩梦。原因是像这样的一段代码`Customer.prototype = new Person();`需要在 Customer 构造函数中调用 Person 以实现真正的继承。否则您最终将不得不始终知道原始设置的内容。举个例子：

```
Person = function (name) {
    this.name = name;
    this.getName = function () {return this.name}
}
Customer = function (name) {
    this.name = name;
}
Customer.prototype = new Person(); 
```

现在我们将更新 Person 以设置它们是否是“新的”：

```
Person = function (name, isNew) {
    this.name = name;
    this.isNew = isNew;
    this.getName = function () {return (this.isNew ? "New " : "") + this.name; }
} 
```

现在在从 Person 继承的任何“类”上，您*必须*更新构造函数以遵循表单。您可以通过执行以下操作来解决此问题：

```
Customer = function () {
    Person.apply(this, arguments);
} 
```

这将在新的“客户”范围内调用“人员”，让您不必了解人员构造。

# 速度

看看这些基准：http: [//jsperf.com/inherited-vs-assigned](http://jsperf.com/inherited-vs-assigned)。
基本上，我在这里试图证明的是，如果您要大量创建这些对象*，*那么最好的方法是在*原型*上创建它们。像这样创建它们：

```
Person = function (name) {
    this.name = name;
    this.getName = function () {return this.name}
} 
```

非常慢，因为对于每个对象创建，它都会创建一个*新函数*- 它不会简单地查找原型链以查找已经存在的函数。相反，如果您只有几个对象的方法被极其频繁地调用，则在本地定义它们有助于降低查找原型链所损失的速度。

# 共享属性

这总是让我着迷。假设您有以下内容：

```
Person = function () {
    this.jobs = {};
    this.setJob = function (jobTitle, active) {this.jobs[jobTitle] = active; }
}

Employee = function () {}
Employee.prototype = new Person();

var bob = new Employee();
bob.setJob('janitor', true);

var jane = new Employee();
console.log(jane.jobs); 
```

你猜怎么着？简是个看门人！可不是闹着玩的！这就是为什么。由于您没有将 this.jobs 定义为*Employee*实例化的新对象，因此它现在只是查找原型链，直到找到“工作”并按原样使用它。有趣，对吧？

因此，如果您想跟踪实例，这很有用，但在大多数情况下，您会发现它非常令人沮丧。您可以通过执行以下操作来解决此问题：

```
Employee = function () { Person.apply(this); } 
```

这迫使“Person”创建一个新的“this.jobs”。

# 私有变量

由于 JavaScript 中没有什么是真正“私有的”，因此获取私有变量的唯一方法是在构造函数中创建它们，然后在构造函数中初始化任何依赖它们的东西。

```
Person = function () {
    var jobs = {};
    this.setJob = function (jobTitle, active) {jobs[jobTitle] = active; }
    this.getJob = function (jobTitle) { return jobs[jobTitle]; }
} 
```

但是，这也意味着您必须在继承类的每个实例化上调用该构造函数。

* * *

# 建议

[http://ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

这是一个超级基础的课程设置。这很简单。有用。它会在 90% 的时间里做你需要做的事情，而不必处理 JavaScript 必须提供的所有疯狂:)

`</rant>`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-02T06:04:45.747

最佳是一个非常主观的术语。

方法 1 提供了真正私有变量的可能性。例如：

```
function User() {
   var name = "fred";
   this.getName = function () { return name;};
} 
```

方法 2 将使用更少的内存，因为所有 User 对象共享一个保存函数。

“最佳”将由您的具体要求决定。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-02T07:44:59.453

JavaScript 是一种“基于对象”的语言，而不是“基于类”的语言。共享行为，即类概念，是通过链接原型来实现的。

方法 1 不创建类。每次调用它时，您都会按照定义创建属性和函数，并且它们不会与其他“实例”共享。如果您更换`this.save`，那么只有一个实例会改变行为。

方法 2 实现共享行为。因此，它是人们与类和实例相关联的东西。如果您用`this.save`不同的函数替换，那么所有派生实例将立即具有新行为。

如果“最佳”意味着不消耗内存重新定义函数和共享常见行为（这是基于类的编程倾向于等同的），那么方法 2 就是要走的路。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-02T06:28:56.990

正如其他人所提到的，有两个主要区别：

*   方法 1 将为 User 的每个实例创建一个新函数
*   方法 1 将能够访问构造函数范围内的局部变量

这是一个演示这些的示例：

```
function User() {

    var name = "my name";

    this.foo = function() {
        // one function per User instance
        // can access 'name' variable
    };
}

User.prototype.bar = function() {
    // one function shared by all User instances
    // cannot access 'name' variable
};

var a = new User();
var b = new User();

console.log(a.foo === b.foo); // false; each instance has its own foo()
console.log(a.bar === b.bar); // true; both instances use the same bar() 
```

# java - 锚标记 2 的正则表达式

> ID：13190104
> 
> 赞同：-2
> 
> 时间：2012-11-02T05:59:12.233
> 
> 标签：java, regex

我正在寻找一个可以替换`href`锚标签属性的正则表达式，如下所示

示例：`<a href="otherpage.php" >foo</a>`应改为

`<a href="http://mysite.com/otherpage.php" >foo</a>`

有人可以帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:02:28.033

**避免**使用解析html`regex`

`Regex`不是解析`HTML`文件的好选择..

HTML 并不严格，其格式也不规则。

使用像[htmlcleaner这样的解析器](http://htmlcleaner.sourceforge.net/)

# search - 使用 SoundCloud API 搜索进行分页

> ID：13190105
> 
> 赞同：3
> 
> 时间：2012-11-02T05:59:19.227
> 
> 标签：search, soundcloud

[根据http://developers.soundcloud.com/docs/api/guide#search](http://developers.soundcloud.com/docs/api/guide#search)上的 API 文档搜索和分页部分

我建立我的查询网址，如：

[https://api.soundcloud.com/tracks?q=U2&client_id=xxxxxxxx](https://api.soundcloud.com/tracks?q=U2&client_id=xxxxxxxx)

它只返回 10 个结果。

即使我添加限制和偏移参数以使用分页生成结果，例如“&limit=20&offset=20”，它仍然只有 10 个结果返回。

这是否意味着我们不能将分页与 soundcloud 搜索 API 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:38:11.120

这是 SoundCloud API 中的一个错误，现在应该得到解决。如果您仍然遇到问题，请发表评论。

# css - 图像周围的空白

> ID：13190108
> 
> 赞同：1
> 
> 时间：2012-11-02T05:59:45.967
> 
> 标签：css

无法弄清楚我是如何在图像周围获得额外的空白：

![在此处输入图像描述](../Images/b550eca0ebf2bfae7b3cbf4c4e40dfa3.png)

**标记：**

```
 <div id="member-name"  hidden="true">
            <button type="submit" id="btnExpandSection"><img src="~/Content/Images/plus.jpg" /></button><p id="member-fullName"></p> 
        </div> 
```

**样式：**

```
 input, textarea 
    {
        border: 1px solid #e2e2e2;
        background: #fff;
        color: #333;
        font-size: .9em;
        margin: 5px 0 6px 0;
        padding: 5px 2px 5px 5px;
        width: 300px;
    }

    img 
    {
        display: block; /* gets rid off any unexpected margins round the image */
        border: 0px;
    }

    input[type="submit"], input[type="button"], button 
    {
            background-color: #ffffff;
            cursor: pointer;
            font-size: 11px;
            font-weight: 600;
            width: auto;
            vertical-align: middle;
        border: 0px;
    }

    td input[type="submit"], td input[type="button"], td button { font-size: 1em; } 
```

更新：

里面也有这种风格：

```
#member-name 
{
    margin: 30px 0px 0px 0px;
    height: 30px;
    font-weight: bold;
    color: white;
    padding: 1px 1px 0px 1px;
    background-color: #d28105;
    border: 1px solid darkgray;
}

#member-fullName { margin: 0px 0px 0px 20px;}
#member-fullName p{ display: inline;float: left;overflow: hidden;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:06:04.760

您不能只提供图像作为按钮元素的背景吗？

```
#btnExpandSection {
    background: #ffffff url('/Content/Images/plus.jpg') no-repeat center center;
    height: /* image height */;
    width: /* image width */;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:33:04.603

我将从这个开始，然后从这里重新构建它......

```
button,
#member-fullName,
#member-name,
#btnExpandSection,
#btnExpandSection img {
    margin: 0;
    padding: 0;
} 
```

但是下面肯定会最好是嵌套在`<button></button>`标签之间的图像。替换`32px`为图像的实际宽度和高度值。

```
button {
    background-image: url(~/Content/Images/plus.jpg);
    width: 32px;
    height: 32px; 
} 
```

# garbage-collection - 尽管有足够的 PermSize 和 OldGen 空间，JVM 能否遇到“java.lang.OutOfMemoryError:”

> ID：13190111
> 
> 赞同：2
> 
> 时间：2012-11-02T05:59:52.483
> 
> 标签：garbage-collection, jvm

如果应用程序有足够的空间用于 PermSize 和 OldGen 空间，是否还可能遇到 OutOfMemoryErrors？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:05:06.293

是的。您的代码库中的某个人可能会抛出它，或者 Sun ... er Oracle ;) 可能会抛出它。例如从 ByteArrayOutputStream 看这段代码：

```
 /**
       * Increases the capacity to ensure that it can hold at least the
       * number of elements specified by the minimum capacity argument.
       *
       * @param minCapacity the desired minimum capacity
       */
      private void grow(int minCapacity) {
           // overflow-conscious code
           int oldCapacity = buf.length;
           int newCapacity = oldCapacity << 1;
           if (newCapacity - minCapacity < 0)
               newCapacity = minCapacity;
           if (newCapacity < 0) {
               if (minCapacity < 0) // overflow
                   throw new OutOfMemoryError();
               newCapacity = Integer.MAX_VALUE;
           }
           buf = Arrays.copyOf(buf, newCapacity);
       } 
```

[http://www.docjar.com/html/api/java/io/ByteArrayOutputStream.java.html](http://www.docjar.com/html/api/java/io/ByteArrayOutputStream.java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:46:52.250

除了 Perm Gen 和 Old Gen。JVM 可能会使用非堆内存（例如用于直接内存缓冲区）。非堆内存的数量受`-XX:MaxDirectMemorySize`选项限制。如果超过，将抛出 OutOfMemoryError。

# android - 如何远程监控安卓设备的健康状况？

> ID：13190118
> 
> 赞同：2
> 
> 时间：2012-11-02T06:01:20.127
> 
> 标签：android, android-hardware

我们有一个 Enterprise Android 应用程序，它可以在数百个 Android 设备上运行。

应用程序是我们业务运营的重要组成部分。它集中使用 GPS、3G 网络（HTTP 到服务器）和显示。它每天至少运行 12 小时。

我们有某些报告指出某些设备的硬件故障。

目前，我们正在监控`Intent.ACTION_BATTERY_CHANGED`电池和`ConnectivityManager.getActiveNetworkInfo()`网络状态的内容。

对我们来说重要的一点：

1.  硬件健康
2.  电池健康，电量
3.  网络状态
4.  GPS和显示

问题：

1.  为了确定设备的健康状况，应该（或可以）监控什么？
2.  如何监控设备的硬件健康状况？可能吗？

设备未植根并运行 Android 2.2

编辑：问题不在于应用程序崩溃。我们使用 Crittercism 和 ACRA 进行崩溃报告。现在很少发生崩溃。

# algorithm - 离散体相交算法

> ID：13190123
> 
> 赞同：2
> 
> 时间：2012-11-02T06:01:44.913
> 
> 标签：algorithm, volume, intersection, discrete-mathematics

我正在寻找一种算法（或 python 库），它可以给出多个 3D 体积交集的大小。

但是，它们的方程不知道体积，我只是在它们的边界上有一个点列表。

事实上，对于每一卷，我都知道一对 (x,r) 的列表，其中 r 是 y 和 z 之间的关系，例如 ay +bz = c。例如对于每个 (y,z) 尊重关系 r，(x,y,z) 是在体积的边界。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:56:39.573

如果您只有点，则需要先构建体积，然后再进行交叉。我建议您查看 VTK 库，它可以处理网格并具有许多其他不错的功能。

# actionscript-3 - 如何在 away3d 运行时加载纹理

> ID：13190126
> 
> 赞同：0
> 
> 时间：2012-11-02T06:02:08.190
> 
> 标签：actionscript-3, actionscript, runtime, textures, away3d

我正在制作一个大型 3d 模型。我想在所有 3d 文件加载和渲染后加载它的纹理。这样我就可以一一加载纹理并将它们应用到模型上。有谁知道如何使用 actionscript away3d 实现运行时纹理加载和应用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:50:45.493

我通常使用[LoaderMax](http://www.greensock.com/loadermax/)队列来加载我的所有资产。您可以设置一个加载所有位图的设备。然后，您可以监听单个项目加载完成或所有项目加载完成，然后创建您的材料并将它们分配给您的网格。

此外，您需要递归地将材质分配给网格的子网格（请参阅[网格类](http://away3d.com/livedocs/away3d/4.0/away3d/entities/Mesh.html)中的子网格：矢量）以进行更新。

# doctrine - 协助 Doctrine ODM 查询

> ID：13190129
> 
> 赞同：0
> 
> 时间：2012-11-02T06:02:30.657
> 
> 标签：doctrine, doctrine-orm, doctrine-odm

我有以下查询，它提供了不希望的结果。

```
 $query = $dm->createQueryBuilder('MainClassifiedBundle:Discussion')
        ->field('id')->equals($discussionId)
        ->field('discussion_id')->equals($discussionId); 
```

我要做的是找到 id = $discussionId 或讨论 ID =$discussionId 的任何文档。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:27:06.970

好吧，你有查询生成器的方法`add()`和方法：`addOr`

```
$query = $dm->createQueryBuilder('MainClassifiedBundle:Discussion');
->add($query->field('id')->equals($discussionId))
->addOr($query->field('discussion_id')->equals($discussionId)); 
```

你也可以用and替换`add`and~~`addOr`~~方法`where``orWhere`

# html - Web浏览器中的位置检测

> ID：13190137
> 
> 赞同：3
> 
> 时间：2012-11-02T06:03:23.273
> 
> 标签：html, geolocation, geoip, ip-geolocation

我正在寻找一种在访问我的网站时定位用户位置的方法，我尝试过 Maxmind，但它们在城市级别似乎不准确。我想要的信息是（国家、城市、经度、纬度）我希望国家和城市尽可能准确。

我也使用过 HTML5，但它要求我的用户共享位置信息的问题在我看来是不好的解决方案。（尽管我得到了非常准确的结果）

有什么解决办法吗？

[注意：我发现谷歌搜索得到了准确的检测并且没有“要求分享我的位置”，但我没有找到任何使用谷歌服务的api]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:23:20.410

这是我为使用谷歌地图的地理位置教程找到的代码。希望这很有用。

这适用于您连接到网络的方式。

*   如果您使用宽带 ISP，它会为您提供固定 IP，您的位置会更准确。
*   如果您使用移动设备连接到互联网，将显示您的网络从中获取信号的最近移动塔的位置

### HTML5 地理位置示例

```
<!DOCTYPE html>
<html>
<head>
<title>GeoLocation Demo</title>
<meta charset="utf-8"/>
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script>
  var startPos;
  var map;

  function init() {
      if (navigator.geolocation) {
          document.getElementById("support").innerHTML = "<p style='color:green'>Great! This browser supports HTML5 Geolocation</p>";
          navigator.geolocation.getCurrentPosition(updateLocation, handleLocationError, {
              timeout: 50000
          });
          //navigator.geolocation.watchPosition(updateCurrPosition,handleLocationError);

      } else {
          document.getElementById("support").innerHTML = "<p style='color:red'>Oops! This browser does not support HTML5 Geolocation</p>";
      }
  }

  function updateLocation(position) {
      startPos = position;
      var latitude = position.coords.latitude;
      var longitude = position.coords.longitude;

      //document.getElementById("startLat").innerHTML = latitude;
      //document.getElementById("startLon").innerHTML = longitude;

      var coords = new google.maps.LatLng(latitude, longitude);

      var mapOptions = {
          zoom: 10,
          center: coords,
          mapTypeControl: false,
          navigationControlOptions: {
              style: google.maps.NavigationControlStyle.SMALL
          },
          mapTypeId: google.maps.MapTypeId.ROADMAP
      };

      map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

      var marker = new google.maps.Marker({
          position: coords,
          map: map,
          title: "Your current location!"
      });

  }

  function handleLocationError(error) {
      switch (error.code) {
          case 0:
              updateStatus("There was an error while retrieving your location: " + error.message);
              break;

          case 1:
              updateStatus("The user prevented this page from retrieving the location.");
              break;

          case 2:
              updateStatus("The browser was unable to determine your location: " + error.message);

              break;

          case 3:

              updateStatus("The browser timed out before retrieving the location.");

              break;
      }
  }

  function updateStatus(msg) {
      document.getElementById("divStatus").innerHTML = msg;
  }
</script>
</head>

<body onload="init()">  
<div id="support"></div>
<div id="divStatus"></div>
<div id="map_canvas" style="width:600px;height:400px;"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:43:05.503

1.  www.ipfingerprints.com
2.  www.geoiptool.com/
3.  [http://www.geobytes.com/TraceRouteLocator.htm](http://www.geobytes.com/TraceRouteLocator.htm)
4.  [http://whatismyipaddress.com/traceroute-tool](http://whatismyipaddress.com/traceroute-tool)
5.  [http://www.dnsqueries.com/en/ip_geographical_informations.php](http://www.dnsqueries.com/en/ip_geographical_informations.php)

我希望这些链接可以帮助你。前两个链接有一个关于 IP 地址的地理位置信息数据库。而链接 3,4 和 5 在 traceroute 命令上工作。让我知道这些是否适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:03:31.347

IP 地址可能会更改取决于 ISP，我认为这就是地理位置数据库并不总是准确的原因。您可以比较这些地理位置站点之间的准确性，而不是 maxmind。 [www.geobytes.com](http://www.geobytes.com) , [www.hostip.info](http://www.hostip.info) , [www.ip2location.com](http://www.ip2location.com)

# ruby - 什么命令可以打开 Ruby 的 REPL？

> ID：13190138
> 
> 赞同：119
> 
> 时间：2012-11-02T06:03:26.127
> 
> 标签：ruby, read-eval-print-loop

什么命令可以打开 Ruby 的 REPL？

在 Python 中，您只需打开`python`而不使用任何参数。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-11-02T10:00:59.940

Ruby 有几个 REPL。

标准库附带一个名为*IRb*（用于*Interactive Ruby*）的 REPL，它安装了一个名为 的程序`irb`，但由于它只是一个 Ruby 库，因此也可以从 Ruby 代码调用，而不仅仅是从 shell 调用。在[Rubinius](http://Rubini.us/)上，IRb 也可以通过调用`rbx`不带参数的程序来调用，就像在 CPython 中一样。

还有一个非常不错的 REPL 叫做[*Pry*](http://PryREPL.Org/)，它安装了一个名为 的程序`pry`，但由于它只是一个 Ruby 库，它也可以从 Ruby 代码调用，而不仅仅是从 shell 调用。

[JRuby](http://JRuby.Org/)附带了一个名为*JIRb Swing*的附加 REPL ，它通过调用`jirb_swing`程序来调用。

[NetBeans](http://NetBeans.Org/) Ruby 插件还附带一个 REPL 。

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2012-11-02T06:04:06.747

使用`irb`（交互式 Ruby Shell）命令。

[https://en.wikipedia.org/wiki/Interactive_Ruby_Shell](https://en.wikipedia.org/wiki/Interactive_Ruby_Shell)

# input - 内爆多个输入

> ID：13190141
> 
> 赞同：1
> 
> 时间：2012-11-02T06:03:41.210
> 
> 标签：input, implode

我有这样的输入：

```
<div id="fruit1">
    <input type="text" name="name[]" value="Apple" />
    <input type="text" name="qty[]" value="2" />
</div>
<div id="fruit2">
    <input type="text" name="name[]" value="Blackberry" />
    <input type="text" name="qty[]" value="4" />
</div>
<div id="fruit3">
    <input type="text" name="name[]" value="Banana" />
    <input type="text" name="qty[]" value="1" />
</div> 
```

有没有一种简单的方法使用 implode 来获得这样的结果（单行）：

```
Apple;2|Blackberry;4|Banana;1| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:10:17.187

**编辑**

试试这个代码：

```
$display = "";
$ctr = 0;
foreach ($_POST['name'] as $data) :
    $display .= $data.";".$_POST['qty'][$ctr]."|";
    $ctr++;
endforeach;

echo $display; 
```

# javascript - 想要更改多个 div 的颜色几秒钟，但只更改最近加载的

> ID：13190144
> 
> 赞同：0
> 
> 时间：2012-11-02T06:03:44.723
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

我在 ajax 的帮助下根据请求动态加载 div，现在我想要突出显示它们几秒钟，但是使用`$('div.eachrow').effect("highlight",{color:'#FCE8E8'},3000)`这段代码，它会突出显示类中的所有 div `eachrow`，所以有什么办法只突出显示最近加载的 div 吗？

```
success: function(html) {
        if (html) {
            ++itr;
            $('#quepanel').append(html);
            $('div.eachrow').effect("highlight",{color:'#FCE8E8'},3000);
            $('div#loadMore').hide();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:10:27.500

您可以创建一个 jQuery 对象，然后突出显示它：

```
success: function(html) {
        if (html) {
            ++itr;
            var $html = $(html);
            $html.appendTo('#quepanel');
            $html.effect("highlight",{color:'#FCE8E8'},3000);
            $('div#loadMore').hide();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:12:08.847

在成功处理程序中，首先使用 jQuery 包装 HTML。这将立即创建 DOM 元素。

然后，您可以只处理 Ajax 加载的元素。

```
success: function(html) {
    if (html) {
        ++itr;
        html = $(html); // Do this.

        $('$quepanel').append(html);

        html.effect('hightlight', { color: '#FCE8E8' }, 3000);

        $('div#loadMore').hide();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:10:56.007

您可以使用突变事件来识别插入了哪些元素：打开控制台并查看日志。在“测试” div 中插入某些内容时触发该事件。

html:

```
<div id="test"></div>
<input type="button" id="btn" value="add" onclick="$('<div>dyn</div>').appendTo('#test')" />​ 
```

JS：

```
document.getElementById('test').addEventListener("DOMNodeInserted", function (ev) {
  // ...
    console.log(ev.target);
}, false);​ 
```

jsFiddle：http: [//jsfiddle.net/LA3LZ/](http://jsfiddle.net/LA3LZ/)

# c - struct 类型的 2D 数组可以保存类似 NULL 指针的东西吗？

> ID：13190149
> 
> 赞同：1
> 
> 时间：2012-11-02T06:04:23.040
> 
> 标签：c, struct

我想创建一个我的结构类型的数组，但它不是按顺序定义的，例如，我可以随机执行`array[3] = mystruct_t;` `array[5] = mystruct_t`（`3`并且`5`在运行时由用户输入定义）。我试过：

这是“理想的”，但不能保存空指针：

```
static struct mystruct_t foo_inputs[SIZE]; 
```

所以，我尝试了：

```
static struct mystruct_t *foo_inputs; 
```

进而：

```
foo_inputs[x] = NULL; 
```

但我收到警告：

```
 error: incompatible types when assigning to type ‘struct mystruct_t’ from type ‘void *’ 
```

实施它的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T06:06:28.560

将两者结合起来。首先，您不能（不应该）分配`NULL`给非指针。在第二种情况下，您有一个未初始化的指针。你想要的是一个指针数组：

```
static struct mystruct_t *foo_inputs[SIZE];
foo_inputs[x] = NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:07:09.003

```
static struct mystruct_t *foo_inputs; 
```

声明指向 mystruct_ts 的指针。指向数组的每个元素都必须是单个结构，因此尝试分配指针会导致编译器错误。（您还会在运行时获得未定义的行为，因为您没有分配任何内存）。你想要的是一个双指针（记住要正确分配内存！）

```
static struct mystruct_t** foo_inputs; 
```

# blackberry - 黑莓推送客户端应用程序黑莓注册失败

> ID：13190151
> 
> 赞同：0
> 
> 时间：2012-11-02T06:04:35.073
> 
> 标签：blackberry, blackberry-jde, blackberry-push

我对黑莓应用程序开发很陌生，我需要创建一个可以接收推送通知的应用程序。

我已经创建了应用程序并尝试使用 xtify 将通知推送到设备。

我已经向 rim 注册了推送评估，并获得了 url、app id、密码等凭据。

当应用程序启动时，我创建一个新线程来执行推送注册过程。我尝试向推送评估 url 发送一个 http Get 请求以注册设备。当我尝试打开连接时，我得到 io 异常，无效的 url 参数。

我在设备中使用 wifi 连接进行网络连接。我的设备中没有 SIM 卡。网址是

```
http://cpXXX.pushapi.eval.blackberry.com/mss/PD_subReg?serviceid='My Application Id'&osversion='My OS Version'&model='Device Model';deviceside=false;ConnectionType=mds-public 
```

下面是我用来发送请求的代码。

```
 DataBuffer buffer = new DataBuffer(256, false);
    httpUrl = "http://cpXXX.pushapi.eval.blackberry.com/mss/PD_subReg?serviceid='My Application Id'&osversion='My OS Version'&model='Device Model';deviceside=false;ConnectionType=mds-public"

    InputStream inputStream = null;
    Connection conn = null;
    HttpConnection httpConn = null;
    try {
        httpUrl ;
        conn = Connector.open(httpUrl);
        if (conn instanceof HttpConnection) {
            httpConn = (HttpConnection) conn;
            int responseCode = httpConn.getResponseCode();
            if(responseCode == 200){
                inputStream = httpConn.openInputStream();
                int length = inputStream.read(buffer.getArray());
                buffer.setLength(length);
                String response = new String( buffer.getArray(), buffer.getArrayStart(), buffer.getArrayLength() );
                return response;
            }else { 
                throw new IOException( "Http error: " + responseCode);
            }
        }

        else {
            throw new IOException("Can not make HTTP connection for URL '"
                    + httpUrl + "'");
        }

    }
    finally {
        if (httpConn != null) {
            try {
                httpConn.close();
            } catch (IOException e) {
                System.out.println(e.getMessage());
                e.printStackTrace();
            }
        }
        close(conn, inputStream, null);
    } 
```

请帮我。我正在等待答复。我已经坚持了好几天了。请指教。任何人都知道我在哪里可以获得设备注册 api 的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:21:56.253

感谢@Black Pearl 的建议，我能够解决这个问题。为了使黑莓注册工作，您需要一个有效的 BIS 连接。我一直在尝试使用 wifi 连接，因此它无法正常工作。

# sql - 连接表 sql

> ID：13190155
> 
> 赞同：-2
> 
> 时间：2012-11-02T06:05:05.277
> 
> 标签：sql, database, join

我有以下表格 ![在此处输入图像描述](../Images/6ac54b839771b631d500d38c63e72c9c.png) 菜肴表：

![在此处输入图像描述](../Images/894567e053fd1eac4cf094864d067bfd.png)

类别表： ![在此处输入图像描述](../Images/25511afc71c217d4544ae6c89acfb742.png)

t_time 表： ![在此处输入图像描述](../Images/61e4db515e5dca283737b5272912768a.png)

为了将一道菜与配料联系起来，我有以下有效的代码：

```
$sql = "SELECT d.name, i.item\n"
    . "FROM dish d\n"
    . "JOIN dish_ingredients di ON ( d.id = di.dish_id )\n"
    . "JOIN ingredients i ON ( di.ingredient_id = i.id )\n"
    . "WHERE d.id =1\n"
    . "LIMIT 0 , 30"; 
```

但现在我想用匹配的`categories`/`t_time`和`cuisine`. 而不是在我执行查询时显示 time= 6 和 Category 3，而是希望它显示 60 和 fish。最简单的方法是什么？一个好的教程也可能会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:11:09.480

就像你正在做的那样加入表格。

```
SELECT  d.name, i.item,
        c.category,
        e.cuisine,
        f.t_time
FROM    dish d
        INNER JOIN dish_ingredients di ON ( d.id = di.dish_id )
        INNER JOIN ingredients i ON ( di.ingredient_id = i.id )
        INNER JOIN categories c ON (d.category = c.id)
        INNER JOIN cuisine e ON d.cuisine = e.id
        INNER JOIN t_time f ON d.time = f.id
WHERE   d.id =1
-- LIMIT 0 , 30 
```

如果一道菜可能在 、 和 上具有可为*空*的值`category`，请使用代替。基本上， 在您加入的表上显示至少有一个匹配项的行，而即使在另一个表上没有行也显示。`cuisine``t_time``LEFT JOIN``INNER JOIN``INNER JOIN``LEFT JOIN`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:11:29.997

试试这个：

```
SELECT d.name, i.item, cat.category, t.t_time, cu.cuisine
FROM dish d
INNER JOIN dish_ingredients di ON d.id = di.dish_id
INNER JOIN ingredients i ON di.ingredient_id = i.id
INNER JOIN category cat ON d.category = cat.id
INNER JOIN cuisine cu ON d.cuisine = cu.id
INNER JOIN t_time t ON d.t_time = t.id
WHERE d.id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:12:35.080

```
$sql = "SELECT d.name, i.item, c.category, t.t_time, cs.cuisine\n"
    . "FROM dishes d\n"
    . "JOIN dish_ingredients di ON ( d.id = di.dish_id )\n"
    . "JOIN ingredients i ON ( di.ingredient_id = i.id )\n"
    . "LEFT JOIN category c ON ( c.id = d.category )\n"
    . "LEFT JOIN t_time t ON ( t.id = d.t_time )\n"
    . "LEFT JOIN cuisine cs ON ( cs.id = d.cuisine)\n"
    . "WHERE d.id =1\n"
    . "LIMIT 0 , 30"; 
```

尝试使用 LEFT JOIN 加入表，如果存在，它将显示类别、t_time 和美食。

# wordpress - Wordpress 远程获取功能的用法？

> ID：13190156
> 
> 赞同：0
> 
> 时间：2012-11-02T06:05:07.127
> 
> 标签：wordpress, curl

我想使用 wp_remote_curl 功能分享和显示我的最新内容以用于其他网页。

```
 <?php $response = wp_remote_get( 'http://feeds.feedburner.com/fatihtoprak/blog' );
                if( is_wp_error( $response ) ) {
                   echo 'Couldnt get the contents!';
                } else {
                  // echo $response['body'];
                    echo '<pre>';
                print_r( $response );
                echo '</pre>';
                }
            ?> 
```

输出在[这里](http://pastebin.com/eNcZepqx)。

这是我的 wp_remote_get 内容代码。关于如何**在 output 中仅显示标题和帖子链接的问题**。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:40:00.260

Fatih，为什么你不使用`fetch_feed` [http://codex.wordpress.org/Function_Reference/fetch_feed](http://codex.wordpress.org/Function_Reference/fetch_feed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:31:41.627

塞尔坎是对的。

[从http://codex.wordpress.org/Function_Reference/fetch_feed](http://codex.wordpress.org/Function_Reference/fetch_feed)的第一段

> 检索外部提要并对其进行解析。使用 SimplePie 和 FeedCache 功能进行检索和解析以及自动缓存。

# java - hadoop mapreduce分布式缓存读取多文件

> ID：13190162
> 
> 赞同：0
> 
> 时间：2012-11-02T06:05:41.327
> 
> 标签：java, hadoop, mapreduce, distributed-computing, distributed-caching

我有一组文件说 10 个文件和一个大文件，它是所有 10 个文件的总和。

我将它们添加到分布式缓存、作业配置中。

当我在 reduce 中阅读它们时，我观察到以下几点：

1.  我只读取了在 reduce 方法中添加到分布式缓存中的选定文件。我预计速度会更快，因为与在所有 reduce 方法中读取大文件相比，每个 reduce 中读取的文件大小更小。但是，它变慢了。

2.  此外，当我将其拆分为更小的文件并将它们添加到分布式缓存时，问题变得更糟。工作本身在很长一段时间后才开始运行。

我找不到原因。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:01:17.423

我认为您的问题在于在 reduce() 中读取文件。您应该阅读 configure()（使用旧 API）或 setup()（使用新 API）中的文件。因此，对于每个 reducer，它只会被读取一次，而不是为 reducer 的每个输入组读取它（基本上，每次调用 reduce 方法）

您可以编写如下内容：使用新的 mapreduce API (org.apache.hadoop.mapreduce.*) -

```
 public static class ReduceJob extends Reducer<Text, Text, Text, Text> {

    ...
Path file1;
Path file2;
...

    @Override
            protected void setup(Context context) throws IOException, InterruptedException {

                // Get the file from distributed cached
    file1 = DistributedCache.getLocalCacheFiles(context.getConfiguration())[0];
    file2 = DistributedCache.getLocalCacheFiles(context.getConfiguration())[1];

                // parse the file and get it's data in-memory for use in reduce method, probably in some ArrayList or HashMap.
            }

            @Override
            protected void reduce(Text key, Iterable<Text> values, Context context) throws IOException,
                    InterruptedException {
    ...
    }
    } 
```

使用旧的 mapred API (org.apache.hadoop.mapred.*) -

```
public static class ReduceJob extends MapReduceBase implements Reducer<Text, Text, Text, Text> {

    ...
Path file1;
Path file2;
...

        @Override
        public void configure(JobConf job) {

                // Get the file from distributed cached
    file1 = DistributedCache.getLocalCacheFiles(job)[0]
    file2 = DistributedCache.getLocalCacheFiles(job)[1]
...

                // parse the file and get it's data in-memory for use in reduce method, probably in some ArrayList or HashMap.
            }

@Override
        public synchronized void reduce(Text key, Iterator<Text> values, OutputCollector<Text, Text> output,
                Reporter reporter) throws IOException {
    ...
    }
    } 
```

# android - 如何在android中绘制动画图表

> ID：13190163
> 
> 赞同：2
> 
> 时间：2012-11-02T06:05:50.860
> 
> 标签：android, animation, charts

实际上，我已经绘制了饼图和折线图。我想让它动画化。动画的意思是，它不是来自左边或右边或顶部或底部，但折线图应该用动画绘制。

例如：每个点应该一个一个地绘制。我尝试使用线程但我失败了。处理程序可以吗？

我尝试了 oDraw(Canvas canvas) 方法。我试图把线程与睡眠时间。让我知道更多的想法。

给我一些想法。谢谢。

# iphone - ios6如何解压文件？

> ID：13190164
> 
> 赞同：5
> 
> 时间：2012-11-02T06:06:00.310
> 
> 标签：iphone, ios6, unzip

> **可能重复：**
> [在 iOS 中下载和解压缩文件](https://stackoverflow.com/questions/11333399/download-and-unzip-file-in-ios)

我想在我的应用程序中解压缩文件。我搜索了很多东西，其中一些被告知要使用 ZipArchive 库。ios6 中有任何默认方法可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:14:17.530

iOS 6 中没有任何东西可以进行压缩/解压缩。请参阅 SO 上涵盖此主题的众多现有线程之一（ZipArchive、Objective-Zip 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:20:29.483

[zipzap](https://github.com/pixelglow/zipzap)是一个新人。特征：

*   **易于使用的界面**：公共 API 仅提供三个类！然而，您可以使用熟悉的*NSArray*集合和属性查看 zip 文件。*您可以通过熟悉的NSData*、*NSStream*和 Image I/O 类压缩、解压缩和重新压缩 zip 文件。
*   **高效实施**：我们优化了 zip 文件的读写，以减少虚拟内存压力和磁盘文件抖动。根据复合文档的组织方式，更新单个条目可能比将相同数据写入单独文件更快。
*   **文件格式兼容性**：由于*zipzap*严格遵循[zip 文件格式规范](http://www.pkware.com/documents/casestudies/APPNOTE.TXT)，它适用于大多数 Mac、Linux 和 Windows zip 工具。

# iphone - 如何通过单击更改按钮上的图像并隐藏Objective C中的下一个？

> ID：13190167
> 
> 赞同：0
> 
> 时间：2012-11-02T06:06:12.803
> 
> 标签：iphone, objective-c, ios, xcode

我有两个按钮 Btn1 和 Btn2，上面有图像 Btn1image1.png,Btn2image1.png。通过单击每个按钮，它必须分别显示 Btn1image2.png 和 Btn2image2.png。

此外，如果单击 Btn1，则 Btn2 图像应该相同（Btn2image1.png）并且即

如何做到这一点？

我在这里添加我的工作，但在 Btn2 click 的情况下它不起作用

```
 -(IBAction)Bt1Click:(id)sender
    {

        if (Bt1.selected=YES)
        {
            UIImage *buttonImage = [UIImage imageNamed:@"Btn1image2.png"];
            [foodButt setBackgroundImage:buttonImage forState:UIControlStateSelected];

        }
        else
        {
            UIImage *buttonImage = [UIImage imageNamed:@"Btn2image1.png"];
            [foodButt setBackgroundImage:buttonImage forState:UIControlStateNormal];
        }

        [self.searchBaar resignFirstResponder];
    }

    -(IBAction)Btn2Click:(id)sender
    {
       if (Btn2.selected=YES)
       {
           UIImage *buttonImage = [UIImage imageNamed:@"Btn2image2.png"];
           [PeopButt setBackgroundImage:buttonImage forState:UIControlStateSelected];
       }
       else
       {
           UIImage *buttonImage = [UIImage imageNamed:@"Btn1image1.png"];
           [PeopButt setBackgroundImage:buttonImage forState:UIControlStateNormal];
       }

       [self.searchBaar resignFirstResponder];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:14:46.237

```
Try this for the first one and make the similar changes to second one:

-(IBAction)Bt1Click:(id)sender
    {

    if (Bt1.selected)
    {
        UIImage *buttonImage = [UIImage imageNamed:@"Btn1image2.png"];
        [foodButt setBackgroundImage:buttonImage forState:UIControlStateSelected];
        Bt1.selected = NO;

    }else{

        UIImage *buttonImage = [UIImage imageNamed:@"Btn2image1.png"];
        [foodButt setBackgroundImage:buttonImage forState:UIControlStateNormal];
        Bt1.selected = YES;
    }

    [self.searchBaar resignFirstResponder]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:15:32.870

您正在执行以下操作：

```
if (Bt1.selected = YES) 
```

这不是你认为它在做的事情。上述代码将 Bt1 的 selected 属性设置为 YES，您要执行以下操作：

```
if (Bt1.selected == YES) 
```

`=`分配，同时`==`比较，这就是你想要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:23:15.290

在此处尝试此代码，您也不会根据您的要求分别更改图像..我只是考虑您的要求，然后发布此代码..

```
-(IBAction)Bt1Click:(id)sender
{

    if (Bt1.selected)
    {
        UIImage *buttonImage = [UIImage imageNamed:@"Btn1image2.png"];
        [foodButt setBackgroundImage:buttonImage forState:UIControlStateSelected];
        Bt1.selected = NO;

    }else{

        UIImage *buttonImage = [UIImage imageNamed:@"Btn1image1.png"];
        [foodButt setBackgroundImage:buttonImage forState:UIControlStateNormal];
        Bt1.selected = YES;
    }

    [self.searchBaar resignFirstResponder];
}
-(IBAction)Btn2Click:(id)sender
{

    if (Btn2.selected)
    {
        UIImage *buttonImage = [UIImage imageNamed:@"Btn2image2.png"];
        [PeopButt setBackgroundImage:buttonImage forState:UIControlStateSelected];
        Btn2.selected = NO;

    }else{

        UIImage *buttonImage = [UIImage imageNamed:@"Btn2image1.png"];
        [PeopButt setBackgroundImage:buttonImage forState:UIControlStateNormal];
        Btn2.selected = YES;
    }

    [self.searchBaar resignFirstResponder];
} 
```

# android - Android：强制关闭从相机风景中获取图片的位置

> ID：13190170
> 
> 赞同：0
> 
> 时间：2012-11-02T06:06:43.693
> 
> 标签：android

我有代码来显示从这样的相机设备捕获的图像

```
Intent intent    = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                    String file_name = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss").format(new Date());
                    File file        = new File(Environment.getExternalStorageDirectory(),
                                        "tmp_avatar_" + file_name + ".jpg");
                    mImageCaptureUri = Uri.fromFile(file);
                    intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mImageCaptureUri);

                    try {   

                        intent.putExtra("return-data", true);
                        intent.putExtra("mImageCaptureUri", mImageCaptureUri); 
                        startActivityForResult(intent, PICK_FROM_CAMERA);
                    } catch (Exception e) {
                        e.printStackTrace();
                    } 
```

并从路径设置图像位图，当我从纵向视图相机设备捕获图像时它可以工作，但是当我从横向视图相机捕获图像时它会出错，我认为这是因为我检索图像的活动是纵向的。那么你能给我一些建议，以便我可以从肖像或风景相机中捕捉图像吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:25:55.220

尝试这个

一开始的意图

```
Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 
startActivityForResult(cameraIntent, CAMERA_REQUEST); 
```

然后活动结果

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == CAMERA_REQUEST) {  
        if(data!=null && resultCode == RESULT_OK)
        {
        bitMapForProfilePic = (Bitmap) data.getExtras().get("data");
        bitMapForProfilePic =Bitmap.createScaledBitmap(bitMapForProfilePic, getWindowManager().getDefaultDisplay().getWidth()/5, getWindowManager().getDefaultDisplay().getHeight()/4, true);
        registration_profilePicID.setImageBitmap(bitMapForProfilePic);           bitMapForProfilePic=null;
        }
      }
    } 
```

如果你想存储位图

```
 extStorageDirectory = Environment.getExternalStorageDirectory().toString();
    OutputStream outStream = null;
   File file = new File(extStorageDirectory, "profilepicture.PNG");
   try {
    outStream = new FileOutputStream(file);
    bitMapForProfilePic.compress(Bitmap.CompressFormat.PNG, 100, outStream);

    outStream.flush();
    outStream.close();

   } catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   } 
```

然后设置图像

```
view.setImageBitmap(BitmapFactory.decodeFile("/sdcard/profilepicture.PNG")); 
```

如果您有任何疑问，请告诉我...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:57:48.427

我在我的一个应用程序中遇到了类似的问题，我已通过以下方式修复它：首先保存您的实例状态：

```
@Override
protected void onSaveInstanceState(Bundle state) {
    super.onSaveInstanceState(state);
state.putString(IMAGE_FILE_PATH, imageFilePath); } 
```

然后恢复它：

```
@Override
protected void onRestoreInstanceState(Bundle state) {
    super.onRestoreInstanceState(state);
ImageFilePath = state.getString(IMAGE_FILE_PATH); } 
```

这对我有用，但是变量 ImageFilePath 对于您的 Activity 应该是全局的，所以也许有更优雅的方法来实现这一点

# c++ - C++ - 矢量 push_back() 在 fgets() 之后不起作用

> ID：13190175
> 
> 赞同：0
> 
> 时间：2012-11-02T06:07:02.400
> 
> 标签：c++, vector, codeblocks

我正在 Windows 7 上使用 MinGW 使用 Code::Blocks；

我有这个工作正常的功能：

```
Hueso* getSkel(int cual)
{
    unsigned int cont; //SkelCargados and CantSkel are global vectors
    for (cont =0; cont < SkelCargados.size();cont++) if ( CantSkel[cont] == cual) break; // EDIT: I changed <= with < before SkelCargados.size()
    if (SkelCargados.empty() || cont>SkelCargados.size())
    {
        char linea[LINEA]; //LINEA is a macro. Max value for this string.
        FILE * f = fopen("esqueletos.txt","rt");
        if (f == NULL) return NULL;
        fgets (linea,LINEA,f);

        vector<float> puntos_; // <-- please pay attention in these 4 lines
        puntos_.push_back(2.2);
        puntos_.push_back(2.2);
        puntos_.push_back(2.2);

        while (!feof(f))
        {
            //...
        }
        fclose(f);
    }
    return SkelCargados[CantSkel[cont]];
} 
```

而这个，在尝试第二次 push_back 时崩溃。（不）有趣的是，当我将向量及其 push_back()s 放在 fgets 之前时，它的行为正常。

**编辑：**如果我将向量声明为全局变量，它也可以正常工作。

```
bool CargarMapa()
{
    char linea[LINEA];
    FILE * f = fopen("mapas.txt","rt");
    if (f == NULL) return false;
    fgets (linea,LINEA,f);

    vector<float> puntos_;
    puntos_.push_back(2.2);
    puntos_.push_back(3); //Here it crashes
    puntos_.push_back(4.2);

    while (!feof(f))
    {
        //...
    }
    fclose(f);
    return true;
} 
```

这就是它崩溃时发生的情况：调试器抛出**“程序收到信号 SIGSEGV，分段错误”。**并转到文件“new_allocator.h”中标有“HERE IT STOPS”注释的行：

```
//(I did not write the following comment)

/*
 @brief  An allocator that uses global new, as per [20.4].
 @ingroup allocators

 This is precisely the allocator defined in the C++ Standard. 
   - all allocation calls operator new
   - all deallocation calls operator delete
*/
template<typename _Tp>
class new_allocator
{
public:
  typedef size_t     size_type;
  typedef ptrdiff_t  difference_type;
  typedef _Tp*       pointer;
  typedef const _Tp* const_pointer;
  typedef _Tp&       reference;
  typedef const _Tp& const_reference;
  typedef _Tp        value_type;

  template<typename _Tp1>
    struct rebind
    { typedef new_allocator<_Tp1> other; };

  new_allocator() throw() { }

  new_allocator(const new_allocator&) throw() { }

  template<typename _Tp1>
    new_allocator(const new_allocator<_Tp1>&) throw() { }

  ~new_allocator() throw() { }

  pointer
  address(reference __x) const { return std::__addressof(__x); }

  const_pointer
  address(const_reference __x) const { return std::__addressof(__x); }

  // NB: __n is permitted to be 0\.  The C++ standard says nothing
  // about what the return value is when __n == 0.
  pointer
  allocate(size_type __n, const void* = 0)
  { 
if (__n > this->max_size())
  std::__throw_bad_alloc();

return static_cast<_Tp*>(::operator new(__n * sizeof(_Tp))); //HERE IT STOPS
  } 
```

请帮我。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:15:04.080

```
for (cont =0; cont<=SkelCargados.size();cont++) if ( CantSkel[cont] == cual) break; 
```

不是你想要的。您可能想在循环终止条件中使用比较运算符`<`而不是。`<=`如所写，如果该向量中有一个项目，您最终可能会`break`获得 的索引`1`，这将导致您尝试索引到`1`只有一个位置的向量中的位置。（请记住，向量、数组和其他类似结构是零索引的，`[0]`第一个元素`[1]`也是如此，第二个元素也是如此，等等。）

该错误很可能不在于`push_back`它实际上对您失败的地方，而是代码中您破坏内存的其他地方（这会导致未定义的行为）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:15:00.900

看起来`<=`不正确

```
for (cont =0; cont<=SkelCargados.size();cont++) 
    if ( CantSkel[cont] == cual) break; 
```

我认为应该是：

```
for (cont =0; cont<SkelCargados.size();cont++) 
    if ( CantSkel[cont] == cual) break; 
```

还要确保在

```
return SkelCargados[CantSkel[cont]]; 
```

并且具有有效值`cont`。`CantSkel[cont]`

一个提示：如果索引错误，使用`at()`而不是`[]`then 你会得到一个`out_of_range`异常，使它更容易看到..

# networking - 端口号如何在 TCP 中真正起作用？

> ID：13190176
> 
> 赞同：29
> 
> 时间：2012-11-02T06:07:02.307
> 
> 标签：networking, tcp, port

[https://serverfault.com/questions/296603/understanding-ports-how-do-multiple-browser-tabs-communicate-at-the-same-time](https://serverfault.com/questions/296603/understanding-ports-how-do-multiple-browser-tabs-communicate-at-the-same-time)

[应用程序如何在不与浏览器冲突的情况下使用端口 80/HTTP？](https://stackoverflow.com/questions/2957757/how-can-an-application-use-port-80-http-without-conflicting-with-browsers?rq=1)

[多个客户端如何同时连接到服务器上的一个端口，比如 80？](https://stackoverflow.com/questions/3329641/how-do-multiple-clients-connect-simultaneously-to-one-port-say-80-on-a-server)

我已阅读上述问题，但似乎答案不一致。

我想知道究竟是什么定义了套接字连接，是吗：

`(sockid, source ip, source port, dest ip, dest port)`

或仅：

`(source ip, source port, dest ip, dest port)`

两个不同的进程（例如，两个不同的浏览器）可以在同一个源端口上与 Web 服务器通信吗？（默认情况下目标端口相同）

如果同一浏览器中的不同选项卡会发生什么情况？

此外，如其中一个答案所述，单个网页可以同时连接到多个服务器（例如，广告服务器）。同时连接到多个服务器时，Web 浏览器（例如 Chrome、Firefox）是使用相同的端口连接到每个服务器，还是为每个服务器使用不同的端口？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2015-03-14T04:22:29.253

我知道这已经很晚了，但是由于该主题仍在互联网上，并且由于这是一个常见的问题，并且在网络上很少有权威的答案，因此对于那些可能偶然发现它的人来说，它值得一个更完整和简洁的解释，即使在这个迟到的日期。

1.  你打开一个浏览器来打开一个网站，比如说 google.com。在指定网站的过程中，您的计算机将任意选择一个端口号用作其“源端口”。该数字将高于“动态、专用或临时端口”的开头 49152，但低于可用的最高端口号 65535。所选端口号与该浏览器“实例”相关联。

2.  只是为了好玩，您在浏览器上打开一个新标签，并在 url 行上输入“google.com”。您的目标是运行 google.com 的两个实例，因为您正在寻找不同的东西。然后，您的计算机为该会话选择第二个端口号，不同于它用于第一个会话的“源”端口。实际上，您可以多次执行此操作，并且每个会话将具有与每个实例关联的唯一“源”端口。

3.  您的数据包发送到 google.com，每个实例中的目标端口号将是端口 80。Web 服务器在端口 80 上“侦听”传入连接请求。对于您打开的与 google.com 的每个会话，从您计算机的角度来看，目标端口始终是端口 80，但对于您的浏览器上与 google.com 的每个连接实例，源端口将是唯一的唯一标识一个浏览器实例上的一个特定选项卡。这就是它们在您的计算机上的区别。

4.  google.com 收到您的第一个请求。它的回复将指定端口 80 作为其源端口。这就是有趣的地方。google.com 从您那里收到的每个查询都将被视为一个“套接字”，它是您的 IP 地址和与联系 google.com 的进程关联的特定端口号的组合。因此，例如，我们会说您的 IP 地址是 165.40.30.12，而您的计算机用作与 google.com 通信的四个实例的源端口的源端口号（假设四个不同的选项卡都打开 google.com）是61235、62421、58392 和 53925。这四个“套接字”将是 165.40.30.12:61235、165.40.30.12:62421、165.40.30.12:58392 和 165.40.30.12:53925。“IP地址：源端口号”的每个组合都是唯一的，并且google。com 会将每个实例视为唯一的。google.com 响应“套接字”并与之通信，即 IP 地址和端口的组合。

5.  您的计算机从 google.com 获取响应，并根据接收到的目标“套接字”对它们进行分类，并根据端口号将其解析，然后将来自 google.com 的响应分配给适当的浏览器窗口或选项卡。因为您每次都在正确的窗口中看到正确的响应，所以您的事情结束没有问题。

6.  “但是，”你在想，“如果其他人不小心使用了相同的端口号——比如 61235——就像我用于我的源号一样？这不会让 google.com 感到困惑吗？” 一点也不，因为 google.com 正在跟踪由 IP 地址和端口号组合而成的“套接字”。当然，我们真诚地希望其他人使用与您使用的 IP 地址不同的 IP 地址，例如 152.126.11.27，并且 IP 地址和端口号的组合是唯一的 - 152.126.11.27:61235 - 区分为即使端口号相同，它们的 IP 地址也不同。

7.  google.com 是否收到来自 1000 个用户的 1000 个查询并不重要，所有用户都使用端口 80 作为其目标端口号（google.com 正在侦听传入通信的端口），因为这 1000 个用户中的每一个都将具有唯一的 IP 地址. google.com 通过其独特性来跟踪其客户——而且他们总是必须是独特的，不是吗？- 由其 IP 地址和“源”端口号组成的套接字号。即使这 1000 个客户端中的每一个都设法使用相同的“源”端口号（不太可能达到最大值），它们仍然会有不同的 IP 地址，使得它们的源“套接字”在所有其他客户端中是唯一的。

8.  当你看到它以这种方式解释时，这一切都相当简单。它清楚地表明，Web 服务器始终可以侦听一个端口 (80)，并且仍然可以与各种客户端区分开来。它不只是查看它在查询中收到的 IP 地址——你会认为它们乍一看都应该是唯一的，直到你意识到你可以在该 Web 服务器上打开多个网页——而是在源端口number 组合在一起，使每个查询都是唯一的。我希望这很清楚。当您考虑它时，它是一个优雅的系统，但一旦您理解它就很简单。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-02T06:59:51.117

依次回答您的问题：

连接定义为：

{ 协议，本地 IP，本地端口，远程 IP，远程端口 }

（最好说本地和远程而不是源和目标，因为本地端口是发送时的源，但接收时是目标。）

sockid 只是用户进程中的一个描述符，它映射到内核中的连接，就像文件描述符映射到磁盘上已打开的文件一样。

两个不同的进程不能绑定到同一个本地端口。但是，两个进程可以使用相同的连接——套接字描述符可以从父进程继承到子进程，或者描述符可以使用进程间通信在进程之间传递。这两个进程将使用相同的端口，因为它们实际上共享相同的连接。

虽然该协议允许在连接到不同的远程服务器或端口时使用相同的本地端口，但大多数 TCP 堆栈不允许这样做。无论您是将其用于传出连接还是侦听传入连接，绑定本地端口的 API 都是相同的，并且在绑定端口之后才指定意图。由于只有一个套接字可以侦听特定端口，API 简单地拒绝允许多个套接字绑定到一个端口（对此有一个特殊的例外，但与本讨论无关）。因此，所有传出连接都将使用不同的本地端口。因此，当浏览器打开多个连接（到相同或不同的 Web 服务器）时，它们将具有不同的本地端口。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-02T09:30:21.317

> 我已经在各自的论坛上阅读了上述问题，但我想那里的人也不同意对方。

关于你提到的问题，我认为没有任何分歧。

> 我想知道究竟是什么定义了套接字连接
> 
> ( sockid , 源 ip , 源端口 , dext ip , 目标端口 )
> 
> 或仅
> 
> （源 ip，源端口，dext ip，目标端口）

后者。前者是虚构的。您引用的任何线程中都没有提到它。

> 我想问的是，两个不同的进程，比如两个不同的浏览器，是否可以在同一个源端口上与 Web 服务器通信。（默认情况下，目标端口是相同的）。

如果它们位于同一源 IP，则不会。这将违反上述身份定义。

> 如果同一浏览器中有不同的选项卡怎么办。

是的，因为连接池。如果您在谈论单独的连接，答案仍然是否定的。

> 同样如答案之一所述，单个网页尝试连接到许多不同的服务器，例如广告服务器等。Chrome 或 Firefox 也使用相同的端口连接到不同的服务器或使用单个端口。

你将不得不解释这一点。“同一个端口”和“一个端口”有什么区别？不是一个真正的问题。

# python - 如何将 BaseMap 与 chaco 图一起使用

> ID：13190187
> 
> 赞同：1
> 
> 时间：2012-11-02T06:08:29.873
> 
> 标签：python, matplotlib-basemap, chaco

我用 Chaco 开发了散点图和套索选择图。现在，我需要将 BaseMap [地图上的标记很少] 并排嵌入绘图区域。

我创建了一个 BaseMap 并尝试添加到 traits_view；但它因错误而失败。

请给我一些指示以实现相同的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:25:16.933

Chaco 和 matplotlib 是完全不同的工具。底图是在 matplotlib 之上构建的，因此无法在 Chaco 图上添加底图。

恐怕我找不到任何与 Chaco 一起使用的映射层。您是否有理由不能使用 matplotlib 进行绘图？

# ruby-on-rails - 我应该如何从 Ruby gem 生成 Rhodes 扩展？

> ID：13190188
> 
> 赞同：0
> 
> 时间：2012-11-02T06:08:41.760
> 
> 标签：ruby-on-rails, rubygems, rhomobile

我知道 Rhomobile 框架中没有对 Ruby gem 的直接支持。[我已经阅读了他们的（稀疏！）文档以通过扩展](http://docs.rhomobile.com/rhodes/extensions)迁移到 gem 支持中，但我一生都无法弄清楚这应该如何实现。

除了上面链接的文档非常杂乱之外，我能找到的东西也不容易翻译成我需要的东西。我正在尝试将[设计](https://rubygems.org/gems/devise)引入我的应用程序，但 gem 结构非常分层，并且 Rhomobile 文档中给出的示例表明给定库应该是单个`.rb`文件。

给出的具体例子如下：

```
Assuming your application is called “mynewapp”, create a directory 
under app called lib (or whatever you wish to call it):

$ cd mynewapp
$ mkdir app/lib

$ cp /path/to/my_lib.rb app/lib/my_lib.rb 
```

然后只需要`lib/my_lib`在我的应用程序中的给定文件中。例如：

```
require 'lib/my_lib' 
```

为了转化为设计 gem，我的假设是我不能做类似的事情，而是必须以某种方式将目录结构展平，然后才能使用它。是这样还是我错过了什么？那**是很多**重写代码...

此外，如果有人知道将 gem 添加到 Rhodes 框架的任何指南，我很乐意看到它！我浏览了大部分官方文档和一些非官方文档，似乎根本没有解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:33:22.527

哇。我不知道我是如何忽略这一点的，但这真的很简单，与我假设的完全不同。

> 如果您通过 RubyGems 安装使用 Rhodes，则必须将外部 Ruby 库添加到您的 RubyGems 安装目录中以获取“rhodes-framework”gem。可以`gem env`在终端中找到您的 RubyGems 安装目录。

[来自相关链接的同一页面。](http://docs.rhomobile.com/rhodes/extensions)

我的路径与该文档中列出的不匹配，因为我使用的是[RVM](https://rvm.io/)，但我只是跑了`find / -name rhodes-*`，只是寻找后面跟着`/lib/framework`.

# javascript - javascript获取类名

> ID：13190191
> 
> 赞同：0
> 
> 时间：2012-11-02T06:08:52.600
> 
> 标签：javascript, jquery, html

假设有三个类

```
<div class="hello world_1"></div>
<div class="hello world_2"></div>
<div class="hello world_3"></div> 
```

我想根据“hello”获取类名“world_1”、“world_2”和“world_3”。编码：

```
$('.hello').each(function(){
  this.attr('class');
}); 
```

得到错误说：

```
TypeError: Object #<HTMLDivElement> has no method 'attr' 
```

我试验了一下，发现

```
$('.hello:first').attr('class') 
```

工作时

```
$('.hello')[0].attr('class') 
```

引发上述错误。

谁能解释它为什么会发生，我怎样才能得到我想要的？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T06:09:32.410

你需要包装`this`，像这样......

```
$('.hello').each(function(){
  $(this).attr('class');
}); 
```

jQuery 提供`this`对原生 DOM 元素的引用。为了能够在其上调用 jQuery 方法，请使用 jQuery 构造函数包装它。

如果你想匹配模式类`world_n`，你可以使用...

```
var matches = $(this).attr('class').match(/(?:^|\s)world_\d+(?:\s|$)/); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:09:56.030

尝试

```
$('.hello').each(function(){
  $(this).attr('class');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T06:11:46.577

发生的事情是 jquery`each`函数将 设置`this`为 DOM 元素，并且没有“预包装”该元素周围的 jquery 包装器。

所以就像亚历克斯所说的那样，简单地再次包装它会给你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T06:14:27.487

要仅获取`world_`类名，您需要使用 $.trim 进行字符串替换和删除空格：

```
$('.hello').each(function(){
  $.trim($(this).attr('class').replace('hello', ''));
}); 
```

# emacs - 组织模式删除线颜色

> ID：13190195
> 
> 赞同：10
> 
> 时间：2012-11-02T06:09:34.473
> 
> 标签：emacs, org-mode, emacs-faces

Org 模式中的删除线文本（如：+text+）默认为黑色。我想让它们变灰。问题是，我找不到定制它的地方。我试过`M=x describe-face`了，结果是“默认脸”，令人费解。Org-mode没有配置删除线颜色的地方吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T15:46:51.267

使用自定义`org-emphasis-alist`变量`M-x customize-variable`。找到“标记字符”所在的列表条目，然后`+`在“值菜单”弹出窗口中选择“Font-lock-face”选项。输入您选择的面孔的值，您可以按照通常的方式自定义其确切外观，例如使用`M-x customize-face`。

或者，更简洁地说：

```
(require 'cl)   ; for delete*
(setq org-emphasis-alist
      (cons '("+" '(:strike-through t :foreground "gray"))
            (delete* "+" org-emphasis-alist :key 'car :test 'equal))) 
```

# qt4 - 在内存中存储各种 Qt 内容的正确方法是什么？

> ID：13190197
> 
> 赞同：0
> 
> 时间：2012-11-02T06:09:42.403
> 
> 标签：qt4

我正在尝试实现一个全局设置对象，它保存/加载任意 Qt 对象，

但我想知道这是否是正确的做法，因为我只会存储相关的 QString、QList、QSet（容器），

```
QObject *get (const QString & key);
void save (const QString & key, QObject *value); 
```

带有内部哈希表`QHash<QString,QObject*>`。

这是“官方”方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:51:28.157

Qt 仅为 QVariant 类型提供开箱即用的序列化。例如，[QJson](http://qjson.sourceforge.net/)库处理该行为。但是您可以为每个需要的类调用 Q_DECLARE_METATYPE 以在 QVariant 中注册它。因此，用户定义的 QVariant 存储为原始字节。如果你想要一些更可红色和更具体的输出格式，那么你应该实现 QDataStream 输入 (>>) 和输出 (<<) 运算符。

# asp.net - azure 中 worker 和 webrole 的共享存储

> ID：13190205
> 
> 赞同：2
> 
> 时间：2012-11-02T06:10:23.120
> 
> 标签：asp.net, azure-storage

我可以为 Azure 应用程序的工作角色和 Web 角色共享临时存储吗？

我的应用程序中有一个视频上传部分，在上传 mp4 视频时，它将存储在网络角色的 LocalStorage 中，我正在生成视频的缩略图，并将视频转换为不同的格式。最初，我使用来自 Web 角色本身的 TPL 完成了这个场景。现在我计划将视频转换和缩略图生成移交给工人角色。一世。e ，当用户上传视频时，它将存储在任何临时存储中，工作人员角色将其拾取并将视频转换为另一种格式并生成视频的缩略图并将结果上传到我的 blobstorage 和视频将从本地存储中删除。

据我所知，worker 角色无法访问 webrole 的本地存储。那么我最初应该在哪里存储我的视频，以便工作人员和 webrole 都可以访问它？

提前致谢

博尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:34:45.250

为什么不直接使用 blob 存储？

# javascript - 如何获得用户鼠标悬停的圆心的 x,y 坐标？

> ID：13190207
> 
> 赞同：1
> 
> 时间：2012-11-02T06:10:36.970
> 
> 标签：javascript, svg, d3.js

我有一张图表，上面有一些圆圈。当用户将鼠标悬停在一个圆圈上时，我想创建一个 mouseover 事件并传递该圆圈中心的 x 和 y 坐标。我怎么做？

```
svg.selectAll("circle") 
      .data(data)
      .enter().append("circle")
      .attr("cx", function(d) { return x(d.number); })
      .attr("cy", function(d) { return y(d.area); })
      .call(d3.my_helper.tooltip(function(d, i){return "Area: "+ d.area;}));

d3.my_helper.tooltip = function(accessor){
            return function(selection){
                var circle_x = ???; // the center of the circle
                var circle_y = ???; // the center of the circle
                selection.on("mouseover", function(d, i){
                    // do stuff here with circle_x and circle_y
                });
            };
        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-10T08:08:25.583

```
.on('mouseover', function(d) {
    var target_x = d3.event.target.cx.animVal.value*scale + k_x;
    var target_y = d3.event.target.cx.animVal.value*scale + k_y;
} 
```

如果您在图表上使用 scale 方法，您可能需要 +/- 一些常数 k_x、k_y 来校正静态偏移以及访问比例因子，否则您可以忽略这些

*请注意，如果您可以使用 D3，您可能不想尝试混合使用 jQuery 和 D3，因为事件属性可能包含对可以使用的数据的引用，例如，在渲染工具提示中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T07:36:46.710

您需要找到 svg elem 本身的偏移量，然后将“cy”属性（中心 y）添加到 y 坐标，并将“cx”属性（中心 x）添加到相应的 x 坐标：

```
$('circle').hover(function (ev) {
    var svgPos = $('svg').offset(),
        x = svgPos.left + $(ev.target).attr('cx'),
        y = svgPos.top + $(ev.target).attr('cy'),
        coords = [x, y];

    // coords now has your coordinates
}); 
```

如果您不使用 jQuery，请考虑在元素上使用通常的悬停事件侦听`.offsetTop`器`.offsetLeft`。

# multithreading - 使用依赖注入时如何使共享资源线程安全？

> ID：13190209
> 
> 赞同：3
> 
> 时间：2012-11-02T06:10:58.623
> 
> 标签：multithreading, coldfusion, dependency-injection, thread-safety, locking

我当前的应用程序使用对象的单个实例作为许多主要组件的全局变量，据我所知，这被认为不如使用依赖注入。

我希望将来让我的应用程序开源，但首先我想重构代码以使用最推荐的团队协作技术，以便其他开发人员能够更轻松地更改我的源代码。

共享资源示例：在 CFML 语言中，您拥有服务器范围，它是可用于整个服务器实例的任何请求的共享内存。

这是我用于管理服务器范围更改的新设计理念：

1.  创建一个名为 ServerMemoryManager 的组件的单个实例，它提供了一个用于写入和读取服务器范围的接口。
2.  需要访问服务器范围的任何其他代码都将通过 init() 函数或 setServerMemoryManager() 函数注入对 ServerMemoryManager 单个实例的引用。
3.  每当一个组件读取/写入数据到 ServerMemoryManager 对象时，它将能够在内部锁定服务器范围，以便没有 2 个线程可以同时写入服务器范围内的同一块内存。

这是管理需要锁定以实现线程安全的共享资源（共享内存、文件系统等）的最佳方式吗？

请描述可用于管理在某些读/写操作期间需要锁定的共享资源的任何其他方法，这些方法被认为是最佳实践。

**编辑：**基于接受的答案，而不是锁定 scope="server"，我将使用命名锁并使用更细粒度的锁定来管理共享资源。这可能允许使用多个对象来管理共享资源，假设它们都在管理共享内存中的不同键或文件系统中的文件。例如，一个应用程序可以分配给它自己的唯一键或目录，这样它就不会与另一个试图更改共享资源的应用程序发生冲突。

**Edit2：**我发现如果在创建对象时将范围传递给 init 函数，我可以为每个范围使用一个名为 scope.cfc 的单个组件。我现在使用细粒度的命名锁。让我知道它是否可以改进。实际修改后的代码现在看起来像这样（我排除了读取、删除、清除的代码）。似乎不再需要具有 scope.cfc 组件的单个实例。

```
 <cfcomponent>
                <cfscript>
                variables.scope=false;
                variables.scopeName=false;
                </cfscript>
                <cffunction name="init" access="public" output="no" returntype="scope">
                    <cfargument name="scope" type="struct" required="yes">
                    <cfargument name="scopeName" type="string" required="yes">
                    <cfscript>
                    variables.scope=arguments.scope;
                    variables.scopeName=arguments.scopeName;
                    return this;
                    </cfscript>
                </cffunction>
                <cffunction name="write" access="public" output="no" returntype="boolean">
                    <cfargument name="key" type="string" required="yes">
                    <cfargument name="value" type="any" requires="yes">
                    <cfargument name="timeout" type="numeric" required="no" default="10">
                    <cftry>
                        <cflock type="exclusive" name="zcore-#variables.scopeName#-scope-#arguments.key#" timeout="#arguments.timeout#" throwontimeout="yes">
                            <cfscript>
                            variables.scope[arguments.key]=arguments.value;
                            </cfscript>
                        </cflock>
                        <cfcatch type="lock"><cfreturn false></cfcatch>
                    </cftry>
                    <cfreturn true>
                </cffunction>
            </cfcomponent> 
```

** Edit3:** 我通过这样的组件方法测试了从服务器范围读取的性能，发现它比使用只读锁时直接读取服务器范围要慢 20 倍，而没有锁时要慢 4 倍。每个请求数百或数千次额外函数调用的开销将太慢。在 Railo 3.3.x 上完成的测试。

我更喜欢在非公共请求中构建一个大对象，然后设置一个共享内存范围键，然后尝试将一个不完整的对象写入范围。例子：

```
<cfscript>
ts=structnew();
ts.largeObject=buildLargeObject();
server.cachedObject=ts;
</cfscript> 
```

当您只将完整的对象写入共享内存时，这可以避免锁定整个应用程序，因为更新单个结构键是线程安全的。但是，当您在启动时构建大对象时，您需要确保它被锁定，直到该对象完全创建为止。

我将通过在 init 函数中使用 this 范围而不是变量范围来使范围变量变得直接可读，以避免减慢应用程序的速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:32:09.593

如果每次出现都以相同的方式锁定，CFLOCK 只会阻止代码执行。

例如：

**page1.cfm**

```
<cflock type="exclusive" scope="server" timeout="10" >
   <cfset application.xyz = 'abc'>
</cflock> 
```

**page2.cfm**

```
<cfset application.xyz = '123'> 
```

如果 page2 与 page1 的运行时间相同，那么 Page2.cfm 将取消您在 page1.cfm 上的任何锁定。也就是说，最好锁定在 cfc 中，这样就不必锁定每个对象。

然而，锁定每一个事件是不够的。以下也不会有多大好处。

**page1.cfm**

```
<cflock type="exclusive" scope="server" timeout="10" >
   <cfset application.xyz = 'abc'>
</cflock> 
```

**page2.cfm**

```
<cflock type="exclusive" scope="server" timeout="10" >
   <cfset application.xyz = '123'>
</cflock> 
```

这将停止对 page1 和 page2 的每个请求的处理，但不会保护 page1 上的 application.xyz 免受对 page2 上的 application.xyz 所做的更改。为此，您需要[给您的锁起一个“名称”](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f5d.html)。

> 锁名。与范围属性互斥。一次只有一个请求可以执行具有给定名称的 cflocktag 中的代码。不能为空字符串。
> 
> 允许同步访问来自应用程序不同部分的资源。锁名称对于 ColdFusion 服务器是全局的。它们在应用程序和用户会话之间共享，但不是集群服务器。

因为您正在创建对象的多个实例，所以我相信除非您命名您的锁，否则`serverMemoryManagerObject`可能会干扰。`serverMemoryManagerObject2`

这是有关锁定注意事项的更多信息

*   [使用 cflock 锁定代码](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7cc4.html)
*   [CFLock 和负面结果想通了](http://www.bennadel.com/blog/1123-CFLock-And-Negative-Outcomes-Think-It-Through.htm)
*   [CFMythbusters - 反击一些传统智慧](http://www.carehart.org/presentations/CFMythbusters.pdf)

# apache-flex - 将 ANT 与 Flex 一起使用，构建依赖目标失败

> ID：13190210
> 
> 赞同：0
> 
> 时间：2012-11-02T06:11:06.120
> 
> 标签：apache-flex, ant

我有一个名为 flex 的项目`framework`，另一个名为`commons`. Commons 取决于框架。

**框架的构建脚本：**

```
<project name="imanager-framework" basedir=".">

    <property name="src" location="src"/>   
    <property name="dist" location="dist"/> 
    <property name="FLEX_HOME" value="C:/Program Files (x86)/Adobe/Adobe Flash Builder 4.5/sdks/4.6.0"/>        

    <taskdef resource="flexTasks.tasks" classpath="${basedir}/libs/flexTasksFlash4.jar"/>

    <target name="clean">       
        <delete dir="${dist}"/>
    </target>

    <target name="dist">
        <echo>src dir: ${src}</echo>
        <mkdir dir="${dist}"/>
        <compc output="${dist}/${ant.project.name}.swc">
            <source-path path-element="src" />
            <library-path dir="libs" includes="*.swc" append="true"/>
            <include-sources dir="${src}" includes="*" />           
        </compc>
    </target>

</project> 
```

**公共构建脚本：**

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="imanager-commons" basedir=".">

    <property name="src" location="src"/>   
    <property name="dist" location="dist"/> 
    <property name="FLEX_HOME" value="C:/Program Files (x86)/Adobe/Adobe Flash Builder 4.5/sdks/4.6.0"/>        

    <taskdef resource="flexTasks.tasks" classpath="${basedir}/libs/flexTasksFlash4.jar"/>

    <target name="clean">       
        <delete dir="${dist}"/>
    </target>

    <target name="init">
        <echo>Running Target: init</echo>
        <echo>Running ant dist on framework</echo>
        <!-- THIS PART FAILS --> <ant dir="../framework/" target="dist" inheritall="false"/> 
        <copy file="../framework/dist/imanager-framework.swc" todir="libs"/>
    </target>

    <target name="dist" depends="init">
        <mkdir dir="${dist}"/>
        <compc output="${dist}/${ant.project.name}.swc">
            <source-path path-element="src" />
            <library-path dir="libs" includes="*.swc" append="true"/>
            <include-sources dir="${src}" includes="*" />           
        </compc>
    </target>

</project> 
```

从公共构建文件中调用`<ant>`会给我关于错误导入和找不到类的虚假编译错误。但是单独运行框架的构建不会产生任何错误。

这是我得到的一些输出

```
Buildfile: E:\flexspace\imanager\commons\build.xml
init:
     [echo] Running Target: init
     [echo] Running ant dist on framework
Trying to override old definition of task asdoc
Trying to override old definition of task compc
Trying to override old definition of task mxmlc
Trying to override old definition of task html-wrapper
dist:
     [echo] src dir: E:\flexspace\imanager\framework\src
    [compc] Loading configuration file C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.5\sdks\4.6.0\frameworks\flex-config.xml
...some warnings from my code here...
    [compc] E:\flexspace\imanager\framework\src\com\iwobanas\controls\dataGridClasses\MDataGridColumn.as(72): col: 88 Error: Access of undefined property WildcardFilterEditor in package com.iwobanas.controls.dataGridClasses.filterEditors.
    [compc]             filterEditor = new ClassFactory(com.iwobanas.controls.dataGridClasses.filterEditors.WildcardFilterEditor);
    [compc]                                                                                                 ^
    [compc] E:\flexspace\imanager\framework\src\com\iwobanas\controls\dataGridClasses\MDataGridColumn.as(24): col: 60 Error: Definition com.iwobanas.controls.dataGridClasses.filterEditors:WildcardFilterEditor could not be found.
    [compc]     import com.iwobanas.controls.dataGridClasses.filterEditors.WildcardFilterEditor;
    [compc]                                                               ^
    [compc] E:\flexspace\imanager\framework\src\org\syspire\erp\component\tooltip\components\ExtendedToolTip.as(3): col: 48 Error: Definition org.syspire.erp.component.tooltip.skins:ExtendedToolTipSkin could not be found.
    [compc]     import org.syspire.erp.component.tooltip.skins.ExtendedToolTipSkin;
    [compc]                                                   ^
    [compc] E:\flexspace\imanager\framework\src\org\astrika\shared\components\gridSearch\view\SearchDatePopup.mxml(14):  Error: Type was not found or was not a compile-time constant: SearchDateView.
    [compc]         <gridSearch:SearchDateView id="searchDateView"/>
...similar errors...
BUILD FAILED
E:\flexspace\imanager\commons\build.xml:17: The following error occurred while executing this line:
E:\flexspace\imanager\framework\build.xml:17: compc task failed

Total time: 4 seconds 
```

这里出了什么问题？

谢谢

**编辑**

根据要求，这里是配置转储：

使用 Flash Builder 构建框架：http: [//pastebin.com/kLai6j7X](http://pastebin.com/kLai6j7X)

使用 ANT 构建框架：http: [//pastebin.com/FGHBAXZX](http://pastebin.com/FGHBAXZX)

使用 ANT 从 commons 调用的框架构建：（这与之前的转储相同）

**更新** 我最终只是更改了构建文件的结构以消除`<ant>`调用。我现在如何为所有项目创建一个 build.xml，将所有目标都包含在其中。不漂亮，但它对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T02:20:42.397

您绝对可以尝试的一件事是将 taskdef 移动到目标中，至少这将摆脱“尝试覆盖任务的旧定义”警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:31:10.407

这有点离题，但我发现 Ant 在管理 Flex 项目的构建方面做得不好，尤其是当你有依赖项时。

您是否考虑过将 Maven 与[FlexMojos](http://flexmojos.sonatype.org/)一起使用？Adobe 发布[了一系列](http://www.adobe.com/devnet/flex/articles/flex-maven-flexmojos-pt1.html)关于这个伟大工具的文章。非常推荐！

# c# - 如何使用 FileUpload 控件来获取文件名并避免发布文件？

> ID：13190214
> 
> 赞同：0
> 
> 时间：2012-11-02T06:11:11.637
> 
> 标签：c#, asp.net, file-upload

我只需要文件的名称，但是当我单击保存按钮时，它有点上传文件（大文件会产生异常），我不希望页面“尝试”上传文件。

标记：

```
<asp:FileUpload runat="server" ID="txtPDFPath" /> 
```

代码背后：

```
Reference r = new Reference() { R_CatalogNumber = txtCatalogNumber.Text.ToLower(), R_PDFPath = txtPDFPath.FileName.ToLower() }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T03:02:06.367

所以我想出的解决方法是使用一个简单的 'input type="file"' 和一个带有 'Style=""display:none"' 的 asp 文本框，并使用一些 javascript 将文本框的文本设置为文件输入值，请注意，您将获得 c:\fakepath\filename，因此您可以使用 Path 类来获取文件名......它完美地工作......

# c# - ASP.NET 在 requiredfieldvalidator 上隐藏面板

> ID：13190215
> 
> 赞同：1
> 
> 时间：2012-11-02T06:11:22.220
> 
> 标签：c#, asp.net, web, requiredfieldvalidator

我有一个简单的网页，其中很少有 asp 面板。我从数据库中搜索记录，这些面板在页面上可见。
但是，例如，当我在文本框中输入无效值以检查 RequiredFieldValidator 是否工作正常时，会显示错误消息。但是表单上已经可见的面板不会被隐藏。
我了解，因为表单没有回发，因此这些面板没有设置为不可见。如果 requiredfieldvalitor 抛出错误，请指导我如何隐藏这些面板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:02:30.270

通过验证器的 data-dependentClass 附加依赖元素，并将此脚本放在表单结束标记下方

```
 <form id="form1" runat="server">
      <asp:TextBox ID="TextBox1" runat="server" />
      <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="TextBox1"
           Text="*" data-dependentClass="addressValidation"  />
      <br />
      <asp:TextBox ID="TextBox2" runat="server" />
      <br />
      <asp:Button runat="server" Text="Click Me" />
      <hr />
      <asp:Panel runat="server" ID="Panel1" CssClass="addressValidation">
           Rendered at:
           <%= DateTime.Now.ToLongTimeString() %>
      </asp:Panel>
 </form>
 <script type="text/javascript">
      var originalValidatorUpdateDisplay = ValidatorUpdateDisplay;
      ValidatorUpdateDisplay = function (val) {
           originalValidatorUpdateDisplay.call(null, val);

           var dependentClass = val.getAttribute("data-dependentClass");
           if (dependentClass) {
                elements = document.getElementsByClassName(dependentClass);
                for (var i = 0; i < elements.length; i++) {
                     elements[i].style.display = val.isvalid === false ? "none" : "";
                }
           }
      }
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:35:26.747

您要么必须禁用`ClientValidation`以允许回发，要么使用自定义 JavaScript。如果可见回发是一个问题，您可以轻松使用`UpdatePanels`.

# iphone - 以编程方式在选项卡栏项目之间导航

> ID：13190216
> 
> 赞同：2
> 
> 时间：2012-11-02T06:11:24.980
> 
> 标签：iphone, objective-c, ios, ipad, uitabbarcontroller

我有一个包含 5 个选项卡的选项卡栏控制器，每个选项卡栏项目都有单独的导航控制器，例如： ![在此处输入图像描述](../Images/f4ae94c1943c65454f6de9a0e9694c50.png) ![在此处输入图像描述](../Images/988555b9789141c07ef1f31f827ddf63.png)

现在，如果我目前在**Tab3**中的**navigationctrller3**的**viewctrller3**中，并且我想以编程方式导航到**Tab1**中的**navigationctrller1**的**viewctrller2** 。我还以编程方式选择了特定的**Tab1** 但我无法到达**navigationctrller1** 的 **viewctrller2**。这可行吗？，如果可以，请详细说明..请大家携手..！

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:38:57.970

如果您当前在 viewctrller3 中，我认为您应该能够做到这一点：

```
 UITabBarController *tabCont = (UITabBarController *)[self.navigationController parentViewController];
    [tabCont setSelectedIndex:0];
    UINavigationController *nav1 = tabCont.selectedViewController;
    NSarray *newControllers = [NSArray arrayWithObjects:[nav1.viewControllers objectAtIndex:2],[nav1.viewControllers objectAtIndex:0],[nav1.viewControllers objectAtIndex:1], nil];
    [nav1 setViewcontrollers:newControllers animated:NO]; 
```

最后一行应该重新排列导航控制器的 viewControllers 以便 viewctrller2 现在是顶视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:19:18.267

实现这一目标的一种方法是

1.  在设置 tabbar 的 SelectedIndex 之前，您在 appDelegate 中维护一个引用变量，并为其分配选项卡选择后需要导航的类的名称。
2.  在标签栏控制器的代表中：
    *   `(void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController;` 检查可见控制器的类是否与在 appdelegate 引用变量中设置的类名相同？如果是，则无事可做，如果不是，则检查该控制器是否在导航堆栈中？如果它在堆栈中，则弹出/推送到该索引控制器，否则创建该控制器并推送到它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T06:34:13.510

我认为这不会有任何问题。假设您的 nav1 是第一个 navigationController。

```
[self.nav1 pushViewController:view2 animated:YES]; 
```

它必须为你工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T06:36:05.160

从 ViewController3 执行..

```
 UINavigationController *navigationController1 =       [appDelegate.tabBarController.viewControllers objectAtIndex:2]; // fetch the navigationController

            [navigationController1 popToViewController:[navigationController1.viewControllers objectAtIndex:1] animated:NO];

            [appDelegate .tabBarController setSelectedIndex:0]; 
```**

# c# - 在沙发上更新

> ID：13190217
> 
> 赞同：0
> 
> 时间：2012-11-02T06:11:29.577
> 
> 标签：c#, nosql, couchbase, updating

我需要一些帮助来使用 couchbase 进行更新。我的页面中有一个任务。如果用户点击喜欢，那么喜欢计数应该在我的沙发基础桶中更新。我已经尝试过自己的更新处理程序代码，但这有一些时间延迟。我在下面也包含了我的更新代码。

这是我喜欢任务的代码...

```
public ResponseVO LikeTask(LikeVO likeVO)
        {
            ResponseVO response = new ResponseVO();

            try
            {
                if (!isLiked(likeVO.TaskID, likeVO.UserID))
                {

                    UpdateTaskDB likeUpdate = new UpdateTaskDB();

                    UpdateTaskVO updatetaskvo = new UpdateTaskVO();
                    updatetaskvo.FieldName = "Likes";
                    LikeVO tempvo = new LikeVO();
                    tempvo.LikedOn = DateTime.Now.ToString();
                    tempvo.UserID = likeVO.UserID;
                    tempvo.UserName = likeVO.UserName;
                    tempvo.TaskID = likeVO.TaskID;
                    updatetaskvo.ObjectValue = tempvo;
                    updatetaskvo.TaskID = likeVO.TaskID;
                    likeUpdate.UpdateDocument(updatetaskvo);
              }
                response.StatusMessage = "Liked Successfully";
            }
            catch (Exception ex)
            {
                response.StatusCode = "0";
                response.StatusMessage = ex.Message;
            }

            return response;
        } 
```

我自己的更新处理程序代码：

```
 public class UpdateTaskDB
    {
        CouchbaseClient oCouchbase;
        public UpdateTaskDB()
        {
            oCouchbase = new CouchbaseClient("vwspace", "");
        }
        public TaskVO GetTaskByID(string task_id)
        {

            TaskVO results = null;
            try
            {
                String str1;

                str1 = (String)oCouchbase.Get(task_id);

                results = JsonConvert.DeserializeObject<TaskVO>(str1);
            }
            catch (Exception ex)
            {

            }
            return results;
        }

        public void UpdateDocument(UpdateTaskVO inputParams)
        {
            try
            {
                var client = new CouchbaseClient("vwspace", "");
                TaskVO taskDoc = GetTaskByID(inputParams.TaskID);

                switch (inputParams.FieldName)
                {
                    case "Likes":
                        List<LikeVO> docLikes = taskDoc.likes;
                        docLikes.Add((LikeVO)inputParams.ObjectValue);
                        taskDoc.likes = docLikes;
                        break;
                    case "UnLike":
                        LikeVO unlikevo = (LikeVO)inputParams.ObjectValue;
                        for (int count = 0; count < taskDoc.likes.Count; count++)
                        {
                            if (taskDoc.likes[count].UserID.Equals(unlikevo.UserID))
                            {
                                unlikevo = taskDoc.likes[count];
                                break;
                            }
                        }
                        taskDoc.likes.Remove(unlikevo);
                        break;

                    default:
                        break;
                }

                String json = JsonConvert.SerializeObject(taskDoc);
                client.Store(StoreMode.Set, inputParams.TaskID, json);

            }
            catch (Exception ex)
            {
                Console.Write("Exception :" + ex.Message);
            }
        }
    } 
```

有没有其他方法可以在 couchbase 中处理此更新？请帮帮我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:55:28.547

您看到的延迟可能是由于您为每次点击创建了两个 CouchbaseClient 实例。创建 CouchbaseClient 的实例是一项昂贵的操作，因为会发生引导和配置设置。

您可以采取几种不同的方法来最小化创建 CouchbaseClient 实例的频率。一种方法是创建一个静态客户端，供您的数据访问类重用。Web 应用程序的另一种方法是将实例与 HttpApplication 实例相关联。有关 Web 方法的示例，请参阅下面我在 GitHub 上的（不完整）示例项目。

[https://github.com/jzablocki/couchbase-beer.net/blob/master/src/CouchbaseBeersWeb/Models/WebRepositoryBase%271.cs](https://github.com/jzablocki/couchbase-beer.net/blob/master/src/CouchbaseBeersWeb/Models/WebRepositoryBase%271.cs)

另外，我建议在更新文档的点赞数时使用 CAS 操作。您要确保“喜欢”投票不会导致整个文档从过时的读取中更新。

例如：

```
public TaskVO GetTaskByID(string task_id)
{
    var getResult = oCouchbase.ExecuteGet<string>(task_id);   
    var results = JsonConvert.DeserializeObject<TaskVO>(str1.Value);
    results.Cas = getResult.Cas; //Here I'm suggesting adding a Cas property to your TaskVO
    return results;
} 
```

然后在您的更新中：

```
public void UpdateDocument(UpdateTaskVO inputParams)
{
    try
    {
        TaskVO taskDoc = GetTaskByID(inputParams.TaskID);

        switch (inputParams.FieldName)
        {
            ...
        }        

        String json = JsonConvert.SerializeObject(taskDoc);
        client.ExecuteStore(StoreMode.Set, inputParams.TaskID, json, taskDoc.Cas); 
        //this will fail if the document has been updated by another user.  You could use a retry strategy    
    }
    catch (Exception ex)
    {
        Console.Write("Exception :" + ex.Message);
    }
} 
```

# vba - Attachmate 接收主机字符串并使用 VBA 对条件响应做出反应

> ID：13190225
> 
> 赞同：1
> 
> 时间：2012-11-02T06:11:53.667
> 
> 标签：vba, readline

使用 Attachmate，我正在尝试编写一个 VBA 脚本，该脚本在特定短语出现时做出反应并通过内联命令自动执行命令。本质上，当出现一个短语时，会出现一个输入框，要求用户输入特定数量，VBA 代码获取该数量，将其插入终端，然后在不同的菜单中跳转以创建内部标签。但是，我的问题是我不知道如何让 VBA 代码对主机可能返回的不同字符串做出反应。有时它说“进入继续”，有时它说“选择用户”。所以我想要它做的是基于它接收到的语句来执行某个操作，但我不知道用于捕获终端从主机接收到的内容的命令是什么。我试过“waitforstring”和“

```
'variable declarations
Dim count As Long 'var used to indicate how many times code should loop (how many labels should be print)
Dim drugname As String
Dim qtyinput As Long
Dim CR As String    ' Chr(rcCR) = Chr(13) = Control-M
Dim LF As String    ' Chr(rcLF) = Chr(10) = Control-J
Dim strcheck As String

'assign values to variables
count = 0
CR = Chr(Reflection2.ControlCodes.rcCR)
LF = Chr(Reflection2.ControlCodes.rcLF)

qtyinput = InputBox("Number of items being sent", Quantity)
drugname = .GetText(22, 15, 22, 46) ' StartRow:=22, StartColumn:=15,EndRow:=22,   EndColumn:=46 'copies text from screen
    ' Press EditCopy (Copy the selection and put it on the Clipboard).
    '.Copy rcSelection, rcAsPlainText -- not needed
.Transmit qtyinput & CR
.Transmit CR
'strcheck = .readline("00:00:01")
'MsgBox strcheck
'If .WaitForString("Press " & Chr(34) & "RETURN" & Chr(34) & " to continue, " & Chr(34) & "^" & Chr(34) & " to stop: ") Then .Transmit CR

'Select Case strcheck
'    Case strcheck Like "to continue"
'        .Transmit CR
    'Case strcheck Like "*Select CLIENT*"
    '    .Transmit CR
'End Select

.Transmit "^MED" & CR
.Transmit "3" & CR
.Transmit "10" & CR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T13:27:40.840

首先，Attachmate 是一家公司，他们有一些产品可以从 Windows 访问大型机会话，包括 EXTRA！和 Reflections，它们都共享一种通用的脚本语言，在 VBA 中使用起来很方便。

但是，额外！与 Reflections 相比，它的可用命令往往更少，后者是更昂贵的产品，因此您必须在 VBA 中获得一些创意。

我认为您正在使用 EXTRA！，因此您要查找的命令是“GetString”

我使用 VBA 与 EXTRA! 中的大型机会话进行交互，并且我知道当屏幕上某个位置出现三颗星时，我的大型机命令是成功的。

大型机命令可能需要 1 秒到 5 分钟才能完成，因此我使用“GetString”每秒轮询大型机会话，在继续之前等待三颗星：

```
Do Until Sess0.Screen.GetString(14, 2, 3) = "***"
    Application.Wait (Now + TimeValue("0:00:01"))
Loop 
```

“GetString”的语法是：GetString(Row, Column, Length)

在我的例子中，星星出现在第 14 行第 2 列，我知道它们中总会有 3 个，所以我将字符串长度设置为 3。

# asp.net-mvc - 小部件检查的 RESTful URL 设计

> ID：13190226
> 
> 赞同：0
> 
> 时间：2012-11-02T06:11:54.963
> 
> 标签：asp.net-mvc, rest, widget, asp.net-mvc-routing

我正在为一个网站构建一个 RESTful API，它允许用户创建小部件和包含小部件的选项卡（想想 igoogle.com/netvibes.com），我想分享我的 URL 设计以供您参考。

以下是简单的规则：

1.  有一个静态的 widgetTypes 列表供用户选择。

2.  用户可以为每个 widgetType 创建一个或多个 widgetInstances。

3.  用户可以创建一个或多个包含 widgetInstances 的选项卡/仪表板

此 API 只需提供将由 JavaScript 使用的 JSON。我们还可以假设所有身份验证都将通过 cookie 进行处理。

API 需要服务：

1.  用户标签的 CRUD

2.  特定用户小部件实例的 CRUD

3.  检索用户的所有选项卡

4.  检索给定选项卡的所有小部件实例。

5.  检索所有可用的 widgetTypes 供用户从中添加小部件。

**设计：**

**选项卡控制器：**

widgetAPI.com/tabs -> 返回用户可用的所有选项卡的元数据（id、标题）。

widgetAPI.com/tabs/1 -> 返回标签 ID 1 的元数据（标题）。如果使用 POST 发送，则更新标签 ID 1。

widgetAPI.com/tabs/1/widgets > 返回标签 ID 为 1 的所有 widgetInstances。

**问题1：**理想情况下，我想遵循widgetAPI.com/tabs/1 的设计，也返回给定选项卡的所有widgetInstances，但是使用这种设计，widgetAPI.com/tabs 可能会返回太多数据，因为我必须这样做返回所有选项卡的所有小部件。因此，我需要创建一个单独的“widgetAPI.com/tabs/1/widgets”URL，但它还必须返回选项卡元数据，因为我不想进行两次 HTTP 调用来获取元数据和小部件。请告知，因为我不确定这里的最佳方法。

widgetAPI.com/tabs/create -> 创建一个新选项卡

widgetAPI.com/tabs/delete/123 -> 删除 tabid 123

**小部件控制器：**

widgetAPI.com/widgets/123 -> 返回 widgetInstanceId 123 的数据。如果通过 POST 发送，则更新 123。

widgetAPI.com/widgets/Create?typeID = 2 -> 创建一个 typeid = 2 的新 widgetInstance。这将只是一个 POST 请求，因此 typeId 可以是一个 post 参数。

widgetAPI.com/widgets/delete/123 -> 删除 widgetInstance 123

**问题 2**所以有一条规则我还没有完成。我需要返回所有可用的 widgetTypes，但我不确定如何将此请求放入前两个控制器中。我目前倾向于单独服务。所以像 widgetAPI.com/getWidgetTypes 这样的东西。想法？

多谢你们。如果您可以对整体设计进行评论，只需解决问题或提及我应该注意的任何事情，那就太好了，因为这是我第一次设计 RESTful 应用程序。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:54:40.370

> widgetAPI.com/tabs/1 -> 返回标签 ID 1 的元数据（标题）。如果使用 POST 发送，则更新标签 ID 1。

对上述 URL 的 POST 不应更新选项卡 1。对该 URL 的 PUT 应更新选项卡 1。

> widgetAPI.com/tabs/create -> 创建一个新选项卡

要创建一个新选项卡，您应该 POST 到 widgetAPI.com/tabs

> widgetAPI.com/tabs/delete/123 -> 删除 tabid 123

要删除选项卡 123，请将 DELETE 发送到 widgetAPI.com/tabs/123

> widgetAPI.com/widgets/123 -> 返回 widgetInstanceId 123 的数据。如果通过 POST 发送，则更新 123

要更新小部件 123，请将 PUT 发送到 widgetAPI.com/widgets/123

> widgetAPI.com/widgets/Create?typeID = 2 -> 创建一个 typeid = 2 的新 widgetInstance。这将只是一个 POST 请求，因此 typeId 可以是一个 post 参数。

要创建新的小部件，请将 POST 发送到 widgetAPI.com/widgets。typeId 应该是 POST 请求正文的一部分。

> widgetAPI.com/widgets/delete/123 -> 删除 widgetInstance 123

要删除小部件 123，请向 widgetAPI.com/widgets/123 发送 DELETE 请求

**答案 1：**我喜欢`widgetAPI.com/tabs/1/widgets`URL 设计。此外，我喜欢对元数据和数据进行 2 次单独调用的想法。

**答案 2：**我认为您应该使用单独的控制器来执行此操作。我不喜欢这个网址。相反，我喜欢 HTTP GET`widgetAPI.com/widget-types`或只是`widgetAPI.com/widgettypes`.

作为一般规则，除非您希望您的客户端能够创建 URL 标识符，否则请遵循以下模式：

URL：/whatever-resource GET - 返回此类型的所有资源 POST - 创建新资源

URL：/whatever-resource/{id} GET - 返回具有该 ID 的单个资源 PUT - 更新具有该 ID 的资源 DELETE - 删除具有该 ID 的资源

您还可以允许对 /whatever-resource/{id} 的 PUT 请求以创建资源，但客户端/用户必须指定 id（隐含的 URL，因为 URL 包含 id）。如果您不希望用户提供此资源，而是让服务器生成它，则 POST 到 /whatever-resource 以创建资源。

# php - 在javascript中更改选定的组合框值

> ID：13190230
> 
> 赞同：2
> 
> 时间：2012-11-02T06:12:09.543
> 
> 标签：php, javascript, combobox

我有 2 个组合框，如果我选择值“foto”，另一个组合框将显示 #foto_cat。当我选择“panen”时，foto_cat 被隐藏，否则。如果不选择，则 foto_cat 也会被隐藏。

这是我的脚本

```
<script type="text/javascript">
$(document).ready(function(){

$('#combo1').change(function(){
       x=$(this).val();
        if(x=='foto'){
        $('#foto_cat').show();
         }
        else if(x=='panen'){
        $('#foto_cat').hide();
        }
        else{
        $('#foto_cat').hide();
        $('#foto_cat').val('0');
        }
      });
  });

  </script>

      <p class="blok">
    <label for="id">Kategori Report :</label>
    <?php
            $options = array(
              '0'  => '--------',
              'panen'  => 'Panen',
              'foto'  => 'Foto',
            );
            echo form_dropdown('combo[combo1]',$options,'0','id="combo1"');         
        ?>
   </p>
<p class="blok" id="foto_cat" style="display:none">
<label for="id">Kategori Foto :</label>
    <?php
            $options = array(
              '0'  => '--------',
              'pupuk'  => 'Pemupukan',
              'pelihara'  => 'Pemeliharaan',
            );
    echo form_dropdown('combo[combo5]',$options,'0','id="combo5"');         
        ?>
</p> 
```

问题是 。当我在combo1 value =“0”中选择时如何更改combobox id =combo5，combobox combo5将选择相同的值= 0并隐藏其他选项，当我选择值“foto”时，组合框会显示并且选项也会显示？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:14:46.157

尝试类似的东西

```
 function SetSel(val)
    {
        var secondCombo = document.getElementById ( "cmb" );
        secondCombo.value = val.value;   
    } 
```

# java - JdbcTemplate 不支持参数化查询“IN”的情况？必须按 NamedParameterJdbcTemplate 吗？

> ID：13190249
> 
> 赞同：2
> 
> 时间：2012-11-02T06:13:23.380
> 
> 标签：java, sql, spring, db2

为了防止 SQL 注入攻击，我项目中的所有 SQL 语句代码都应该转换为参数化查询。但是当查询条件包含“IN”案例时，我遇到了问题。像这样（使用 DB2 数据库）：

```
String employeeId = 'D2309';
String name = "%brady%";

List<Integer> userRights = new ArrayList<Integer>();
userRights.add(1);
userRights.add(2);
userRights.add(3);

String sql = "SELECT * FROM T_EMPLOYEE WHERE EMPLOYEE_ID = ? AND NAME LIKE ? 
AND RIGHT IN (?)";

jdbcTemplate.query(sql, new Object[] {employeeId, name, userRights}, new 
EmployeeRowMapper()); 
```

上面的代码运行失败，异常：

```
org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad 
SQL grammar [SELECT * FROM T_EMPLOYEE WHERE EMPLOYEE_ID = ? AND NAME LIKE ? AND 
RIGHT IN (?)]; nested exception is com.ibm.db2.jcc.am.io: [jcc][1091][10824]
[3.57.82] .... ERRORCODE=-4461, SQLSTATE=42815 
```

这里的问题是 JdbcTemplate 不支持 IN case 的参数化查询吗？我知道这项工作可以由 NamedParameterJdbcTemplate 完成，是否只有 NamedParameterJdbcTemplate 可以做 IN case 查询？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:59:36.997

正如我在评论中已经提到的，我对这个解决方案不满意，因为它会动态生成许多 SQL 语句。鉴于数量`userRights`介于 1 和 n 之间，它需要缓存中最多 n 个准备好的语句。

以下应该可以工作（我没有尝试过）。

```
String employeeId = 'D2309';
String name = "%brady%";

List<Integer> userRights = new ArrayList<Integer>();
userRights.add(1);
userRights.add(2);
userRights.add(3);

// build the input string
StringBuilder sb = new StringBuilder();
for (int i = 0; i < userRights.size; i++) {
    sb.append("?");
    if (i < userRights.size() - 1) {
        sb.append(", ");
    }
}

// build the SQL
String sql = "SELECT * FROM T_EMPLOYEE WHERE EMPLOYEE_ID = ?" +
    " AND NAME LIKE ?" +
    " AND RIGHT IN (" + sb.toString() + ")";

// init the object array
// size is employeeId + name + right
Object[] param = new Object[2 + userRights.size()];

// fill it
param[0] = employeeId;
param[1] = name;

for (int i = 0; i < userRights.size(); i++) {
    param[i + 2] = userRights.get(i);
}

jdbcTemplate.query(sql, param, new EmployeeRowMapper()); 
```

# python - Redis 节省时间配置。它过于频繁地操作硬盘

> ID：13190253
> 
> 赞同：1
> 
> 时间：2012-11-02T06:13:43.133
> 
> 标签：python, redis

我正在使用 redis for python 来存储和处理大约 400 万个键及其值。然后我发现 Redis 经常写入磁盘。真的很费时间。所以我将redis配置文件中的“save 60 10000”更改为“save 60 50000”。但它仍然每 10000 次键更改写入磁盘。我已经重新启动了 Redis 服务器。

PS：我想使用 dispy 和 Redis 让我的应用程序成为分布式程序。可行吗？我使用“redis dispy 分布式系统”作为关键字，并没有从 Google 获得任何信息。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:58:58.180

我已经弄清楚了。我用的是win7。Redis 服务器每次运行时都不会加载配置文件。我需要手动加载它或使用'save 60 50000'在redis-cli中更改保存频率。

# c - 当我使用 pthread 和 printf 时输出奇怪

> ID：13190254
> 
> 赞同：5
> 
> 时间：2012-11-02T06:13:55.377
> 
> 标签：c, pthreads, printf

我使用`pthread`.

环境：windows 7，CYGWIN_NT-6.1 i686 Cygwin，gcc (GCC) 4.5.3

源代码

```
#include<stdio.h>
#include<pthread.h>

void *th_func(void *p)
{
    int iLoop = 0;

    for(iLoop = 0;iLoop<100;iLoop++)
    {
        printf("Thread Thread Thread Thread\n");
    }

    return;
}

int main()
{
    int iLoop = 0;
    pthread_t QueThread;

    printf("Main : Start Main\n");

    printf("Main : Start Create Thread\n");
    pthread_create(&QueThread,NULL,th_func,NULL);
    printf("Main : End Create Thread\n");

    for(iLoop = 0;iLoop<100;iLoop++)
    {
        printf("Main Main Main Main\n");
    }

    pthread_join(QueThread,NULL);

    printf("Main : End Main\n");

    printf("---------------\n");

    return 0;
} 
```

当我编译源代码时，没有警告或错误，但它的输出很奇怪。

它的一部分输出

```
Main : Start Main
Main : Start Create Thread
Thread Thread Thread ThreThread Thread Thread Thread
Main Main Main Main
Thread Thread Thread Thread
Main Main Main Main 
```

我想知道这种现象的原因。

在此输出中，`Main : End Create Thread`未完全打印。`\n`在第 3 行，末尾的换行符`"Thread Thread Thread Thread\n"`消失了。

大家的输出都是这样的吗？它不会每次都发生，但有时会发生。

如果我使用互斥锁安全调用`printf`，奇怪的输出似乎停止了。

POSIX 说`printf`是线程安全的，根据 Cygwin.com，cygwin 提供了 posix 风格的 API。但是，有意外的输出。

真的是`printf`线程安全的吗？

我在 Linux（Ubuntu）中执行了 100 次相同的程序，并且没有出现此输出。

另外，我一直不明白为什么输出上的一些单词消失了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:15:14.927

POSIX 标准具有[`putc_unlocked()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/putc_unlocked.html)评论中所说的功能：

> 应提供在功能上与原始版本等效的函数`getc()`、`getchar()`、`putc()`和`putchar()`分别命名为`getc_unlocked()`、`getchar_unlocked()`、`putc_unlocked()`和`putchar_unlocked()`的版本，不同之处在于它们不需要以线程安全的方式实现。它们只能在由`flockfile()`(或`ftrylockfile()`) 和保护的范围内安全使用`funlockfile()`。当且仅当在调用线程拥有 ( `FILE *`) 对象时调用这些函数，才能在多线程程序中安全地使用这些函数，如成功调用`flockfile()`or`ftrylockfile()`函数后的情况。

这清楚地表明单字符 I/O 的低级函数通常是线程安全的。但是，它也表明粒度级别是单字符输出操作。规范[`printf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html)说：

> `fprintf()`由和生成的字符`printf()`被打印出来，就像`fputc()`被调用一样。

对于[`putc()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/putc.html)，它说：

> 该`putc()`函数应等效于`fputc()`，但如果将其实现为宏，则它可能会多次评估流，因此参数永远不应是具有副作用的表达式。

的页面[`fputc()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fputc.html)没有说明任何关于线程安全的内容，因此您必须在其他地方查找该信息。

另一[部分](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_09)描述了线程并说：

> 本卷 POSIX.1-2008 定义的所有函数都应是线程安全的，但以下函数不需要是线程安全的。

下面的列表包括这些`*_unlocked()`功能。

 ~~因此，`printf()`并且`fputc()`必须是线程安全的，但是 by 的写入`printf()`是“好像” by 完成的`fputc()`，因此线程之间的输出交错可能是字符级别的，这或多或少与您所看到的一致。如果要对`printf()`非交错进行调用，则需要使用[`flockfile()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/flockfile.html)and[`funlockfile()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/funlockfile.html)调用来授予线程在执行`stdout`时的所有权。`printf()`同样对于`fprintf()`。`fprintf_locked()`你可以很容易地编写一个函数来实现这个结果：

```
int fprintf_locked(FILE *fp, const char *format, ...)
{
    flockfile(fp);
    va_list args;
    va_start(args, format);
    int rc = vfprintf(fp, format, args);
    va_end(args);
    funlockfile(fp);
    return rc;
} 
```

`fflush(fp)`如果您愿意，可以在其中插入一个。您还可以使用`vfprintf_locked()`上面的函数调用来执行锁定、格式化、（刷新）和解锁操作。这可能是我编写代码的方式，相信编译器会在适当且可行的情况下内联代码。支持使用的版本`stdout`同样非常简单。

 ~~[请注意Michael Burr](https://stackoverflow.com/users/12711/michael-burr)在他的[回答](https://stackoverflow.com/a/13190750/15168)[`flockfile()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/flockfile.html)中引用的 POSIX 规范片段：

> 所有引用 ( `FILE *`) 对象的函数，除了名称以 结尾的函数外`_unlocked`，都应该表现得好像它们使用`flockfile()`and`funlockfile()`在内部获得这些 ( `FILE *`) 对象的所有权。

除了`FILE *`. 因此，我的`fprintf_locked()`功能应该是不必要的。`fprintf()`如果您发现不锁定文件的异常实现，则`fprintf_locked()`可以使用该函数，但只能在抗议的情况下完成 - 无论如何库都应该为您执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T07:01:07.817

这看起来可能是 Cygwin 中的错误，或者某些配置错误。这里的几个答案表明“线程安全”仅承诺该函数不会对程序造成损害，并且线程安全并不一定意味着函数是“原子的”。但是，据我所知，POSIX 并未正式定义“线程安全”（如果有人有指向此类定义的指针，请在评论中发布）。

但是，POSIX 不仅指定这`printf()`是线程安全的，[POSIX 还指定](http://pubs.opengroup.org/onlinepubs/9699919799/functions/flockfile.html)：

> 所有引用 ( FILE *) 对象的函数的行为就像它们在内部使用flockfile() 和funlockfile() 来获得这些( FILE *) 对象的所有权一样。

由于`printf()`隐式引用`stdout` `FILE*`对象，所有`printf()`调用都应该是原子的（以及任何其他使用 的函数`stdout`）。

请注意，这在其他系统上可能并非如此，但根据我的经验，它确实适用于许多多线程系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:21:22.897

仅仅因为函数是线程安全的，并不意味着它是原子的。

在你的情况下，如果你想确保你的输出不会被交错，你需要使用互斥锁来确保一次只有一个线程调用`printf`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T06:31:24.967

线程的行为是有原因的。如果线程一个接一个地执行而不是“同时”（以交错的方式），那么这种“并发”就没有意义了。当您使用互斥锁时，线程将根据您的意图被阻塞，并生成预期的输出。

此外，您编写`return;`了一个返回`void *`且未定义行为的函数，因此在运行程序时可能会发生任何事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T06:49:18.220

我将以一种简单的方式来说明您有两个线程正在尝试访问资源。而且也没有种类的优先级检查或任何类似互斥锁的东西。从理论上讲，没有互斥锁或优先级的线程会随机分配资源。尝试创建两个线程，一个线程打印是，另一个打印否。你会发现这种不寻常的行为。还要记住，在这种情况下，不同线程的运行时间是不同的。如果您尝试使用一个线程将信息写入文件而其他人写入控制台来尝试相同的东西。你不会遇到这样的问题。希望有帮助....~~~~

# php - 使用 as 和 php 上传图片的问题

> ID：13190255
> 
> 赞同：0
> 
> 时间：2012-11-02T06:13:56.920
> 
> 标签：php, actionscript-3, flash, image-upload

我在 flash as3 中有一个按钮，它使用一个类来上传图像，然后将其显示在主电影上。

我有一个层次结构：

*   www.MYSITE.com/test/
*   www.MYSITE.com/test/uploads/
*   www.MYSITE.com/test/uploads/images/

和 www.MYSITE.com/test/uploads/image.php 中名为 image.php 的文件

```
<?PHP
$target_path = $_REQUEST[ 'path' ];
$target_path = $target_path . basename( $_FILES[ 'Filedata' ][ 'name' ] ); 

if ( move_uploaded_file( $_FILES[ 'Filedata' ][ 'tmp_name' ], $target_path ) ) 
{
     echo "The file " . basename( $_FILES[ 'Filedata' ][ 'name' ] ) . " has been uploaded;";
} 
else
{
     echo "There was an error uploading the file, please try again!";
}
?> 
```

原样：

```
package 
{
    import flash.display.*;
    import flash.events.*;
    import flash.text.*;
    import flash.geom.*;
    import flash.utils.*;
    import flash.net.*;
    import flash.system.*;

    import src.events.*;
    import src.image.*;
    import src.file.*;
    import src.load.*;
    import src.ui.*;
    import com.senocular.display.transform.*

    public class ImageUploader extends Sprite 
    {
        private var m_basePath  : String = 'http://www.MYSITE.com/test/';           // web server path
        private var m_uploadPath : String = 'uploads/';                                                 // folder on server where you will allow images to be uploaded it has folder permissions  set to 777 );
        private var m_outputPath : String = 'output/';                                                  // folder on server where images should be created; folder permissions are set to 777 );

        public function ImageUploader () 
        {
            // allow script access;
            Security.allowDomain( 'http://www.MYSITE.com/test' );           
            Security.allowInsecureDomain( 'http://www.MYSITE.com/test' );   

        // determine whether the swf is being accessed from the web orlocal hard drive;
            m_isLocal = false;

            init();
        }

        // display items;
        public var upload : UIButton;                       // upload button on .fla stage;

        // output container;
        private var m_output : Sprite = new Sprite();       // container for image;
        private var m_mask : Sprite = new Sprite();         // mask for image container;
        private var m_progress : Sprite = new Sprite();     // upload / download indicator;
        private var m_effect : Scribble;                    // covers image with random effect;

        // vars;
        private var m_isLocal : Boolean;                    // determines if swf is on web server or local drive;
        private var m_fileMgr : FileManager;                // manages the opening & upload of local files;
        private var m_imagePHP : String = 'image.php';      // file that will manage image upload on your server;
        private var m_finalImage : String;                  // final name of file on creation;
        private var m_imageQuality : Number = 90;           // jpeg or png export quality;
        private var m_capture : Sprite;                     // set this equal to the sprite or movie clip that you wish to capture ( set to stage for entire movie );
        private var m_downloader : GraphicLoader;           // handles image download ( after upload is complete );
        private var m_imageExtension : String = '.jpg';     // jpeg image extension;

//      returns upload php file path based on whether or not the swf is a local publish or hosted on a web server;  
        public function get uploadPath () : String
        {
            return m_basePath + m_imagePHP;
        }

//      returns image creation php file path based on whether or not the swf is a local publish or hosted on a web server;  
        public function get createPath () : String
        {
            return m_basePath + m_imagePHP;
        }

        //returns image creation php file path based on whether or not the swf is a local publish or hosted on a web server;    
        public function get downloadPath () : String
        {
            return m_basePath + m_uploadPath;
        }

        //returns image creation php file path based on whether or not the swf is a local publish or hosted on a web server;    
        public function get finalImagePath () : String
        {
            return m_basePath + m_outputPath + m_finalImage + m_imageExtension;
        }

        //returns container for image capture container;
        public function get captureContainer () : Sprite
        {
            return m_capture;
        }

        //sets container for image capture container;
        public function set captureContainer ( inContainer : Sprite ) : void
        {
            m_capture = inContainer;
        }

        //  browse for image files on click of upload button;   
        private function onBrowse ( e : MouseEvent ) : void
        {
            m_fileMgr.browse();
        }

        //track image upload progress;
        private function onUploadProgress ( e : CustomEvent ) : void
        {
            trace( 'image uploading : ' + e.params.percent );

            m_progress.scaleX = e.params.percent;
        }

        //fires when image upload is complete;      
        private function onImageUploaded ( e : CustomEvent ) : void
        {           
            var dPath : String = String( downloadPath + e.params.fileName );

            trace( 'image ready for download at : ' + dPath );

            m_downloader.loadURL( dPath );
        }

        //track image download progress;        
        private function onDownloadProgress ( e : CustomEvent ) : void
        {
            trace( 'image downloading : ' + e.params.percent );

            m_progress.scaleX = 1 - e.params.percent;
        }

        //fires on image download is complete;      
        private function onImageDownloaded ( e : CustomEvent ) : void
        {
            trace( 'image downloaded' );

            // get image from loader;
            var clip : * = new Bitmap( e.params.loaded.bitmapData.clone() ) ;

            // add the image to the stage;
            MovieClip(parent).textAssets.text_front.txtMc.holder_clipart.x = 215;
            MovieClip(parent).textAssets.text_front.txtMc.holder_clipart.clipart.clipart_inside.inside.addChild(clip);

            if (MovieClip(parent).textAssets.text_front.txtMc.holder_clipart.clipart.clipart_inside.inside.numChildren > 0)
            {
                MovieClip(parent).textAssets.text_front.txtMc.holder_clipart.clipart.clipart_inside.inside.removeChildAt(0);
            }           

            clip.smoothing = true;

        }

        //fires if there is an error during upload;     
        private function onUploadError ( e : CustomEvent ) : void
        {
            trace( 'upload error' );
        }

        //fires if there is an error during download;       
        private function onDownloadError ( e : ErrorEvent ) : void
        {
            trace( 'download error' );
        }

        //downloads image to swf;
        private function onGetCapturedImage ( e : MouseEvent ) : void
        {
            m_fileMgr.download( finalImagePath, m_finalImage + m_imageExtension );
        }

        //  set up file manager / button listeners; 
        private function init () : void
        {           
            // add output container to stage at 0,0;
            addChildAt( m_output, 0 );

            // check to make sure stage is available ( which it wouldn't be if this class were instantiated from another class );
            if ( stage != null ) 
            {
                // set up stage;
                stage.align = StageAlign.TOP_LEFT;
                stage.scaleMode = StageScaleMode.NO_SCALE;

                // create image mask that matches the stage height & width;
                with ( m_mask.graphics )
                {
                    beginFill( 0x000000 );
                    drawRect( 0, 0, stage.stageWidth, stage.stageHeight );
                }
            }

            // create progress indicator;
            with ( m_progress.graphics )
            {
                beginFill( 0x000000 );
                drawRect( 0, 0, upload.width, 1 );
            }

            addChild( m_progress );

            m_progress.x = upload.x;
            m_progress.y = upload.y + upload.height + 2;

            // set container to use as image capture area;
            captureContainer = m_output;

            // set capture container mask;
            captureContainer.mask = m_mask;

            // add effect to image;
            m_effect = new Scribble();

            captureContainer.addChild( m_effect );

            // show upload / scribble buttons;
            upload.show();

            // set progress bar to zero scale;
            m_progress.scaleX = 0;

            // set up file manager;
            m_fileMgr = new FileManager( uploadPath, m_uploadPath );
            m_fileMgr.addEventListener( FileManager.ON_PROGRESS, onUploadProgress );
            m_fileMgr.addEventListener( FileManager.ON_UPLOAD_ERROR, onUploadError );
            m_fileMgr.addEventListener( FileManager.ON_IMAGE_UPLOADED, onImageUploaded );

            // listen to buttons;
            upload.addEventListener( MouseEvent.CLICK, onBrowse );

        // set up loader;
            m_downloader = new GraphicLoader();
            m_downloader.addEventListener( GraphicLoader.ON_LOAD_PROGRESS, onDownloadProgress );
            m_downloader.addEventListener( GraphicLoader.ON_LOAD_COMPLETE, onImageDownloaded );
            m_downloader.addEventListener( ErrorEvent.ERROR, onDownloadError );
        }

        //returns new string representing the month, day, hour, minute and millisecond of creation for use as the image name;   
        private function getUniqueName () : String
        {
            var d : Date = new Date();

            return d.getMonth() + 1 + '' + d.getDate() + '' + d.getHours() + '' + d.getMinutes() + ''  + d.getMilliseconds();
        }
    }
} 
```

所以每当我尝试上传任何电影时，我都会在 Flash 的输出中得到这个：

```
image uploading : 1
ERROR: [IOErrorEvent type="ioError" bubbles=false cancelable=false eventPhase=2 text="Error #2038: I/O FILE ERROR. URL: http://www.MYSITE.com/test/image.php?path=uploads/"] 
```

所以我不知道错误在哪里，我已将所有涉及的文件的权限设置为777...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:59:04.100

您只需授予访问权限，将**FTP filezilla** 中的所有内容上传到您要上传此文件的上传文件夹。我认为没有文件访问权限...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T17:37:28.507

好吧，我发现了错误是什么，我调试了php文件，得到一个500内部错误服务器，所以检查原因我发现，权限是777，所以每个人都可以写，但我的服务器只允许自写，所以我将文件cdmod到747并修复了错误。另一方面，当内部服务器错误一起崩溃时，Flash。

# java - DisplayMessageActivity 无法解析为类型-Building first android App

> ID：13190256
> 
> 赞同：13
> 
> 时间：2012-11-02T06:14:00.260
> 
> 标签：java, android

嗨，我刚刚开始在 developer.android.com 上**开发**第一个 android 应用程序。

好吧，首先我从 SO 中了解了许多错误来源及其解决方案，但我一直在试图弄清楚 *“DisplayMessageActivity 无法解析为一种类型”*这句话，而我们必须为按钮 onclick 函数设置一个 Intent。它在代码行所在的行中显示此错误：

```
Intent intent = new Intent (this, DisplayMessageActivity.class); 
```

这是java文件：

**MainActivity.java**

```
}
/**called when the user clicks the send button*/
public void sendMessage(View view) {
    Intent intent = new Intent (this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById (R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity (intent);
}
} 
```

我尝试了很多找到我现在需要导入哪个类，并搜索但无济于事。可能我是初学者是我在这里想念的。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-12T18:46:30.917

好吧，我认为现在回答为时已晚，可能您已经想通了。但是，以防万一我想多做一些解释。

在您发布您的问题后，他们的“构建您的第一个应用程序”的“开始另一个活动”部分可能已被修改，但我发现用户定义的“DisplayMessageActivity”在下面的几行中定义，您被引导编写代码以创建 Intent，因此请参阅 DisplayMessageActivity。在“创建第二个活动”部分，创建了 DisplayMessageActivity。

好吧，谷歌的教学风格不好，我发现他们的框架设计（因此命名）不好，没有透露它们是什么。但是..如果您选择Android平台进行开发，除了忍受之外您还能做什么。祝你好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-21T01:11:54.697

在开发第一个应用程序的教程中，他们在教程的后面部分创建了 DisplayMessageActivity.java。请阅读完整的教程。文档已更正以在使用 IDE 时指示相同。你可以在这里访问：

> ```
> Note: The reference to DisplayMessageActivity will raise an error if you’re using an IDE such as Eclipse because the class doesn’t exist yet. Ignore the error for now; you’ll create the class soon. 
> ```

[http://developer.android.com/training/basics/firstapp/starting-activity.html#BuildIntent](http://developer.android.com/training/basics/firstapp/starting-activity.html#BuildIntent)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:43:58.330

DisplayMessageActivity 不是由 android 包预定义的类，因此您应该将其创建为普通的 java 类并从您的 MainActivity 调用。当然不需要像教程中那样命名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T08:12:05.357

您可以通过在任何地方添加此代码来自己创建显示消息活动类 public class DisplayMessageActivity { }

# python - 输出重复

> ID：13190257
> 
> 赞同：1
> 
> 时间：2012-11-02T06:14:12.893
> 
> 标签：python

我编写了这个程序，它输出总和为某个数字的毕达哥拉斯三元组（这将是参数）。该程序运行完美，但同一个三元组出现多次，我希望一个三元组只出现一次。我想知道是否有人可以帮助我。谢谢！

```
def pythagoreanCheck(tripletList):
    '''
        Checks whether the three numbers are pythagorean triplet
        returns True or False
    '''

    trip_list = [0,1,2]

    if tripletList[0]**2 + tripletList[1]**2 == tripletList[2]**2:
        return True
    else:
        return False

def givMeSum(target):
    '''
        returns 3 numbers such that their sum is equal to target
    '''       

    listOfa = xrange(1,target)
    listOfb = xrange(1,target)
    listOfc = xrange(1,target)

    for i in listOfa:
        for j in listOfb:
            for k in listOfc:
                add = i + j + k

                if add == target:
                    add_list = [i,j,k]
                    add_list.sort()

                    value = pythagoreanCheck(add_list)

                    if value:
                        print add_list

def main():
    givMeSum(12)

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:20:50.693

这是因为您在嵌套列表中进行计算，然后创建一个由相同数字的 3 个不同排列组成的排序列表。

由于 i、j、k 会输入相同的三个数字的不同组合 3 次，因此 add 每次都会等于 target，这意味着 add_list 被创建并排序了 3 次。这意味着它将创建相同的列表 3 次。

我认为你应该拿出

```
add_list.sort() 
```

Siddharth 是对的，您的算法确实效率低下。您正在将其转换为 O(n^3) 算法，如果目标数较大，这可能需要很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:20:31.633

1.  考虑将每个元组存储在哈希表（字典）中，而不是在最内层循环中打印它。在所有循环完成结束时，打印散列中的所有值。

2.  除了您的问题之外，您可以通过创建整数散列并用散列搜索替换最内层循环来使算法更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T08:21:45.413

您需要确保`i <= j <= k`：

```
def pythagoreanCheck(tripletList):
    '''
        Checks whether the three numbers are pythagorean triplet
        returns True or False
    '''
    a, b, c = tripletList
    return a**2 + b**2 == c**2

def givMeSum(target):
    '''
        returns 3 numbers such that their sum is equal to target
    '''       

    for i in xrange(1, target):
        for j in xrange(i, target):      # j >= i
            for k in xrange(j, target):  # k >= j   
                if i + j + k == target:
                    add_list = [i, j, k]  # no need to sort any more

                    if pythagoreanCheck(add_list):
                        print add_list

def main():
    givMeSum(12)

main() 
```

如前所述，该算法远非最佳，但这至少可以解决您看到的问题。

这是一个稍微好一点的方法（两个嵌套循环而不是三个）：

```
def giveMeSum(target):
    '''
        returns 3 numbers such that their sum is equal to target
    '''    
    for i in xrange(1, target):
        for j in xrange(i, target):
            k = target - i - j
            if k < j:
                break  # skip to the next value of i - all remaining js are too big

            add_list = [i, j, k]

            if pythagoreanCheck(add_list):
                print add_list 
```

# qt - 如果我多次连接相同的插槽，该插槽会被多次调用吗？

> ID：13190258
> 
> 赞同：4
> 
> 时间：2012-11-02T06:14:14.197
> 
> 标签：qt, qt4, signals-slots, qt4.8

如果我将同一信号与同一插槽连接两次，这会导致错误吗？例如，当信号发出时，插槽会被调用两次？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T10:14:59.947

简短的回答：您的插槽将被调用两次。

这是否会导致错误或者是所需的行为当然取决于您的应用程序。

在大多数情况下可能不需要它，因此为了防止这种情况，您可以跟踪您的连接，首先使用断开连接，或者如果您至少使用 Qt 4.6，则有一种新的连接类型`Qt::UniqueConnection`可以自动防止重复连接，否则行为类似于`Qt::AutoConnection`，请参阅[连接类型](http://doc.qt.digia.com/4.6/qt.html#ConnectionType-enum)和[关于新的独特类型的博客文章](http://www.ffuts.org/blog/simplify-signals-and-slots-connections-with-unique-connections-in-qt-46/)。

# objective-c - 使用_cmd在目标c中的主线程上执行方法

> ID：13190260
> 
> 赞同：7
> 
> 时间：2012-11-02T06:14:17.217
> 
> 标签：objective-c, ios, cocoa, nsthread, foundation

我遇到了这个`_cmd`技巧：

```
-(void)methodToBeRunOnMainThreadWithObj:(id)object {
    if (![NSThread isMainThread) {
        [self performSelectorOnMainThread:_cmd withObject:object]
    } else {
        // ... method body
    }
} 
```

这是确保在主线程上执行方法的可靠方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T06:20:49.013

这可行，但有点反模式。如果调用该方法的线程不是主线程，我会做的是抛出一个错误。调用者有责任确保在正确的线程上调用方法，这些黑客行为只会鼓励丑陋的代码。此外，如果您依赖此方法，那么每次调用此方法时，您的消息调度开销都会增加一倍。

如果你真的无法改变调用者的行为，你可以尝试以下方法：

```
-(void)methodToBeRunOnMainThreadWithObj:(id)object {
    dispatch_sync(dispatch_get_main_queue(), ^{
        // code goes here
    });
} 
```

这将导致调度块内的所有代码在主线程上执行，并且该方法在完成之前不会返回。如果您希望该方法立即返回，则可以`dispatch_async`改用。如果您使用`dispatch_sync`，您甚至可以在具有非 void 返回类型的方法上使用此技巧。

此代码还具有支持具有非对象类型（`int`等）参数的方法的额外好处。它还支持具有任意数量参数的方法，而`performSelector:withObject:`其兄弟方法仅支持有限数量的参数。另一种方法是设置`NSInvocation`对象，这很痛苦。

请注意，这需要您平台上的 Grand Central Dispatch (GCD)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T06:25:47.497

`_cmd`转发很好，只要指定的选择器`_cmd`与文档中指定的定义/签名匹配：*“该方法不应具有重要的返回值，并且应采用 id 类型的单个参数，或者不带参数。”* . 如果它不匹配，那么你应该假设未定义的行为。并且为了 110% 的安全并遵守抽象机器，返回类型应该是`id`（或某些 objc 类型），并且结果不应返回拥有的引用。

# c++ - C++ STL--make_heap 与对 作为数据类型

> ID：13190269
> 
> 赞同：4
> 
> 时间：2012-11-02T06:15:01.057
> 
> 标签：c++, heap

我知道堆是如何工作的以及它如何排列最小和最大元素。如果 vector 仅包含 ，则很容易`int`在 STL 中应用 make_heap。`make_heap()`但是如果vector包含string和int的结构，如何应用。我想根据`int`结构中的值制作堆。请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T06:19:02.597

您必须为您的结构提供比较功能：

```
struct A
{
 int x, y;
};

struct Comp
{
   bool operator()(const A& s1, const A& s2)
   {
       return s1.x < s2.x && s1.y == s2.y;
   }
};

std::vector<A> vec;
std::make_heap(vec.begin(), vec.end(), Comp()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T06:48:32.503

是的，您可以直接使用[`std::make_heap`](http://en.cppreference.com/w/cpp/algorithm/make_heap)with`std::pair<int, std::string>`因为[`std::pair`](http://en.cppreference.com/w/cpp/utility/pair)具有所需的小于比较[`operator<`](http://en.cppreference.com/w/cpp/utility/pair/operator_cmp)。上面链接的参考文献中甚至还有一个使用`std::pair`.

# css - display:table 属性在 IE7 中不起作用

> ID：13190271
> 
> 赞同：0
> 
> 时间：2012-11-02T06:15:08.573
> 
> 标签：css

在 Asp.net MVC3 中出现以下错误。我在我的项目中使用以下 CSS。它适用于 IE8 和 IE9，但不适用于 IE7。
我想要它的解决方案。帮我解决这个问题

CSS是：

```
.divRow
{
    display: table;
    width: auto;
    clear: both;
    border-bottom: 1px solid #cccccc;
}

.AttlistHeading
{
    display: table-cell;
    width: 190px;
    overflow: auto;
    padding: 5px 5px 5px 7px;
    text-align: left;
    vertical-align: text-top;
    border-bottom: 1px solid #cccccc; /* border-right:1px solid #cccccc;*/
}
.divCellHeading
{
    width: 378px;
    overflow: auto;
    display: table-cell;
    text-align: center;
    padding: 5px;
    border-left: 1px solid #cccccc;
    border-bottom: 1px solid #cccccc;
}

.divcell
{
    /*display:table-footer-group;*/
    width: 378px;
    overflow: auto;
    display: table-cell;
    text-align: center;
    border-left: 1px solid #cccccc;
    padding: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:18:07.630

如果您`display:table;` 在父 div 上使用，您应该在其中包含`display:table-row;`和`display:table-column;`- 元素。

`display:table`ie7 不支持[http://www.quirksmode.org/css/display.html](http://www.quirksmode.org/css/display.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:22:25.463

如果您`display:table;`在父 dic 上使用，则应该在其中使用`display:table-row;`and `display:table-column;-elements`- 在这种情况下，浮动没有任何意义。 ***[更多信息](http://www.css4you.de/display.html)***

# qt - 在 Qt 中通过网络传输 exe 文件

> ID：13190274
> 
> 赞同：-1
> 
> 时间：2012-11-02T06:15:25.437
> 
> 标签：qt, compiler-construction, network-programming, qfile

我正在尝试在 Qt 中创建一个远程编译系统。我要做的是从客户端获取 C/C++ 源代码并通过服务器上的 QProcess 调用本地可用的 GCC，创建 exe 文件，然后将 exe 传输回客户端。简单吧？

exe 文件正在完美生成，但 Qt 只是无法将文件读入数组以传输它。

我的代码是：

```
QByteArray arr;
qDebug() << "To Client: exe";
QFile f("compiled.exe");
qDebug() << f.exists(); //output = false
QString path = QDir::toNativeSeparators(QFileInfo(f).absoluteFilePath()); 
qDebug() << path; //perfect path is coming
qDebug() << f.open(QIODevice::ReadOnly); //output = flase
arr = f.readAll(); // size of arr is 0
f1.close();
client->write(arr); //zero bytes written 
```

虽然 exe 文件非常多，但我得到了这样的输出。我尝试使用同一目录中的其他文件，它绝对完美。只有exe文件不起作用。我在 Windows 上使用 Qt 4.8.1 32 位，使用 MSVC v16.00.40219.10 作为编译器。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:44:44.197

不用推测，使用时有[错误码说明](http://doc.qt.digia.com/qt/qfile.html#FileError-enum)`QFile::open()`。顺便提一句

```
qDebug() << f.exists(); //output = false 
```

它似乎`compiled.exe`不在进程工作目录中，也不在路径中的任何目录中。提供完整路径...

# servlets - Mahout Recommender：如何获取新用户推荐？

> ID：13190279
> 
> 赞同：1
> 
> 时间：2012-11-02T06:15:52.257
> 
> 标签：servlets, command, mahout

使用 Grouplens Mahout 示例，我知道要了解为特定用户推荐的电影，我可以调用：

```
http://localhost:8080/mahout-integration/RecommenderServlet?userID=2 
```

但是......我应该调用哪个命令/url 来获取新用户的推荐电影列表？或者，还有：如果已知用户有新电影要评分，我不想用用户评分的新电影重新加载所有 rating.dat。是否有与 RecommenderServlet 一起使用的命令，允许“即时”了解新用户的 raccomandations，因此无需编辑然后重新加载 rating.dat？

例如，如果 userId=2 对两部电影（ID 为 1611 和 2345）有两个新评级（4 和 5），则如下所示：

```
http://192.168.1.3:8080/mahout-integration/RecommenderServlet?userID=2&newMovies=1611,2345&newRatings=4,5 
```

可能吗？

提前致谢， 格特里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:51:39.247

您可能想看看[***Myrrix***](http://myrrix.com)，它在某些方面是 Mahout 的口味（又名推荐）部分的演变。

[***REST API***](http://myrrix.com/rest-api)说明了您可以使用 Myrrix 的服务层组件执行的操作类型，其中包括为用户设置新的首选项，这些用户将被折叠到模型中并可供使用，而无需重新加载整个模型（尽管最终您应该刷新该模型）。

我并不是说 Mahout 无法实现您想要的，但它并不那么简单和方便。

# android - Android2.3中的GridLayout在Android ICS中不起作用

> ID：13190280
> 
> 赞同：0
> 
> 时间：2012-11-02T06:16:00.523
> 
> 标签：android, android-4.0-ice-cream-sandwich, grid-layout

我在 Android 4.0 中开发了一个应用程序。在我的应用程序中，我使用网格布局它在 Android 4.0 设备上运行良好，但是当我在 Android 2.3 设备上运行时，它会出现异常。

我在我的项目中包含了 v7 和 v13 的支持 jar 库。

我发现跟随异常

```
android.view.InflateException: Binary XML file line #45: Error inflating class GridLayout 
```

如何解决这个问题呢 ？任何人有任何想法？

# amazon-product-api - 库存中的亚马逊产品上传不起作用...？

> ID：13190281
> 
> 赞同：0
> 
> 时间：2012-11-02T06:16:05.060
> 
> 标签：amazon-product-api

我正在使用制表符分隔文件将一些产品上传到库存。

我是否收到以下错误：

```
original-record-number sku error-code error-type error-message
10983436    8105    Error   The data you provided for an attribute does not match the list of valid values.  Please select a valid value from the Data Definitions and resubmit.
10983436    8105    Error   The data you provided for an attribute does not match the list of valid values.  Please select a valid value from the Data Definitions and resubmit. 
```

我的文件内容是这样的：

```
1   10983436    8560    Error   SKU 10983436, Missing Attributes product_type. SKU 10983436 does not match any ASIN. Creation of a new ASIN requires the following missing attributes: product_type. Feed ID: 0\. For details, see http://sellercentral.amazon.co.uk/gp/errorcode/200692370
sku product-id  product-id-type price   item-condition  quantity    add-delete  will-ship-internationally   expedited-shipping  item-note
10983436    471954318111    4   14.8700 11  10  a   3   3   Brand new factory sealed item. 
```

我不明白有什么问题。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:46:49.743

我遇到了这个问题，结果证明它与数据无关，但它是列。亚马逊上传者已更改，不再接受我提供的列。我删除了它们，消息消失了。您也可能拼写错误的列，这也会产生相同类型的错误。丹尼尔

# java - 在java中逐行读取文本中的数据

> ID：13190282
> 
> 赞同：-7
> 
> 时间：2012-11-02T06:16:04.580
> 
> 标签：java, save, file-read, 2d-games

我正在用 Java 制作游戏，但不知道如何从文本文件中获取信息以便加载游戏。我已经设置了保存的文件，以便在我的主程序中的每一行都有一个方法的名称。我需要做的是在某一行中查找文本并执行文本所指的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:22:46.670

这应该这样做。显然你需要处理异常：

```
public class FileReaderTest
{
  public static void main(String[] args) throws IOException, IllegalArgumentException, SecurityException, IllegalAccessException, InvocationTargetException, NoSuchMethodException
  {
    final FileReaderTest object = new FileReaderTest(); 

    final BufferedReader reader = new BufferedReader(new FileReader(new File("/path/to/file")));
    for (String line = reader.readLine(); line != null; line = reader.readLine())
    {
      object.getClass().getMethod(line).invoke(object);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:26:49.350

现在，这是假设您正在谈论一个 .txt 文件。I/O 是基本理念，如果你掌握了这一点，那么你就做好了。I 代表输入，O 代表输出。

现在，您需要使变量等于 inputStream.readInt();

编辑：

但要获得更多帮助，您还可以阅读 [Reading a text file in java](https://stackoverflow.com/questions/2049380/reading-a-text-file-in-java)

希望这可以帮助！

# java - 如何用android中的值数组更新列？

> ID：13190283
> 
> 赞同：0
> 
> 时间：2012-11-02T06:16:18.127
> 
> 标签：java, android, sqlite

我在 sqlite 数据库中有一些表，其中包含 12 行 5 列的值，例如[http://pastie.org/5170518](http://pastie.org/5170518)。现在我想用值数组更新我的表中的 planvalue、YTDOver、YTDVariation 列。如何为此更新编写查询？有谁能够帮我？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:24:30.503

我需要您的代码来告诉您更多信息，但是如果您要更新某些值，以下代码应该可以工作。

```
UDATE table_name SET column_name = some_value WHERE condition1 = value1 AND condition2 = value2; 
```

如果要添加一些新条目，请使用 INSERT 命令。

```
INSERT INTO table_name VALUES(value0, value1, value2, ...); 
```

# javascript - 我如何使用 jquery 在 5 秒后淡入和淡出单词

> ID：13190286
> 
> 赞同：2
> 
> 时间：2012-11-02T06:16:26.127
> 
> 标签：javascript, jquery, ruby-on-rails, fade

我想在一段时间后在我的网页上显示一些单词。例如，我有这些话。

```
 marriage,birthday,annual dinner,school 
```

我在页面顶部显示了这一行“我们安排这些类型的事件，例如'婚姻'”

几秒钟后，下一个词生日将取代婚姻，然后下一个，这个扫描继续。

我没有找到任何最好的 jquery 插件。

如果有人知道请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T06:22:38.973

## *[带有淡入淡出动画的 jsBin 演示](http://jsbin.com/ecekub/1/edit)*

HTML：

```
<h2> "We arrange these type of events like <span>marriage</span> "</h2> 
```

jQuery：

```
var c=0, words=['marriage','birthday','annual dinner','school'];

function loop(){
  $('h2 span').delay(1000).fadeTo(300,0,function(){
     $(this).text( words[++c%words.length] ).fadeTo(300,1,loop);
  });
}    
loop(); // start it! 
```

* * *

如果你喜欢更多真实的动画，你可以选择：

## *[带有幻灯片动画的 jsBin 演示](http://jsbin.com/ecekub/5/edit)*

```
function loop(){
  $('h2 span').delay(1000).animate({top:-50},300,function(){
    $(this).css({top:100}).text( words[++c%words.length]).animate({top:0},300,loop);
  });
}
loop(); // start it! 
```

拥有`h2{overflow:hidden}`和`h2 span{position:relative;}`

只需确保使用`H2`更具体的选择器，例如`$('#fade_title span')`

# android - 从 sqlite 获取图像的 Asyck 任务

> ID：13190292
> 
> 赞同：0
> 
> 时间：2012-11-02T06:16:37.090
> 
> 标签：android

我在异步任务的 doInBackground 方法中从 sqlite 获取图像名称。我在 pre Execution 中开始了进度对话，并在 post execution 方法中关闭了对话。但问题是加载器没有正确移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:23:32.087

试试这个代码： -

```
class MyAsyncTask extends AsyncTask<String, Integer, ArrayList<HashMap<String, String>> >   {
  private ProgressDialog progressDialog = new ProgressDialog(Catalogue.this);

    @Override
    protected void onPreExecute() {
       progressDialog.setMessage("Loading, Please Wait .....");
       progressDialog.show();} 
```

# c# - 如何解决 emgucv 中的异常“无法使用路径 tessdata 和语言 eng 创建 ocr 模型”

> ID：13190293
> 
> 赞同：0
> 
> 时间：2012-11-02T06:16:36.920
> 
> 标签：c#, image-processing, emgucv, object-detection

当我尝试构建 c# 项目（用于道路标志检测系统的项目）时，它可以在没有异常的情况下构建和调试。但是当我点击项目主界面中的按钮时，出现了一个异常**

> **“无法使用路径 tessdata 和语言 eng 创建 ocr 模型。”**

并且突出显示的代码是

```
public void Init(String dataPath, String language, OcrEngineMode mode)
      {
         /*if (!IsEngineModeSupported(mode))
            throw new ArgumentException(String.Format("The Ocr engine mode {0} is not supported in tesseract v{1}", mode, Version));*/
         int initResult= TessBaseAPIInit(_ptr, dataPath, language, mode);
         if (initResult != 0) throw new ArgumentException(String.Format("Unable to create ocr model using Path {0} and language {1}.", dataPath, language));
      } 
```

请帮我解决这个问题。非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:42:39.797

dataPath必须指向您的“tessdata”目录，其中包含诸如 eng.cube.bigrams、eng.cube.params、eng.traineddata 等语言文件（英语示例）*。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-22T04:49:18.327

数据路径必须是 tessdata 的父目录的名称，并且必须以 / 结尾。最后一个 / 之后的任何名称都将被删除。

# javascript - 在 javascript 中使用 onclick() 事件创建 Html 元素

> ID：13190298
> 
> 赞同：4
> 
> 时间：2012-11-02T06:17:16.247
> 
> 标签：javascript, html, onclick

过去一个小时我一直在做这个，但我仍然无法获得预期的输出......我想要的只是使用该`onclick`事件创建一个 HTML 元素。我能够在加载时创建元素，但发现自己无法处理该事件。请引导我走向正确的方向。这是我的 HTML 页面：

```
<html>
<body>

    <div id="d1">
        <p id="p1">Paragraph.</p>

    </div>
    <div id="d2">
        <label onclick="open()">Inbox</label>
    </div>

    <script>
        function open(){
            alert("Start");
            var para=document.createElement("p");
            var node=document.createTextNode("Text");
            para.appendChild(node);
            para.style.color="red";
            var element=document.getElementById("d2");
            element.appendChild(para);
                       }
    </script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:24:51.040

`open()`似乎是一个保留功能。尝试过`open1()`，它有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T06:22:54.223

您可能与浏览器内置的 window.open 函数发生冲突，请重命名您的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:27:58.303

试试这个代码

```
<label onclick="create_elem();">Inbox</label>
<script language="javascript">
function create_elem(){
    alert("Start");
    var para=document.createElement("p");
    var node=document.createTextNode("Text");
    para.appendChild(node);
    para.style.color="red";
    var element=document.getElementById("d2");
    element.appendChild(para);
}
</script> 
```

# android - 在Android中将本地html文件加载到意图的正确路径是什么？

> ID：13190299
> 
> 赞同：2
> 
> 时间：2012-11-02T06:17:26.897
> 
> 标签：android, html, android-intent, load, local

我有一个由我试图加载到意图中的静态本地文件组成的网站。它使用 JavaScript，所以我的印象是我必须使用意图而不是 webview。

该文件位于“assets/site_files/index.html”。这是我尝试使用的代码：

```
Uri path = Uri.parse("file:///android_asset/site_files/index.html");
Intent intent = new Intent(Intent.ACTION_VIEW, path);
startActivity(intent); 
```

应用程序在启动 Intent 时崩溃，这是控制台中的最后一个条目：

```
ActivityManager: Starting: Intent 
```

如果我在 Web 服务器上加载站点而不是尝试加载本地版本，该应用程序可以正常工作。以下工作完美：

```
Uri path = Uri.parse("http://www.domain.com/test_app_static/index.html");
Intent intent = new Intent(Intent.ACTION_VIEW, path);
startActivity(intent); 
```

但是，我需要它在本地运行，这样用户就可以在没有互联网连接的情况下运行它。我环顾四周并尝试了几种不同的解决方案，但在将本地 html 文件加载到意图中的特定情况下，它们都不适合我。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:27:56.967

正确的网址是`file:///android_asset/site_files/index.html`。应用程序可能崩溃的原因是`asset`文件只能由您的应用程序访问。因此，您需要将该数据显示在`WebView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:39:52.270

将 index.html 页面复制到您的应用程序 data( `data/data/<your.package>`) 文件夹。您可以使用 api [Activity.getDir()](http://developer.android.com/reference/android/content/ContextWrapper.html#getDir%28java.lang.String,%20int%29)获取位置，并将[MODE_WORLD_READABLE](http://developer.android.com/reference/android/content/Context.html#MODE_WORLD_READABLE)作为参数传递，以便其他应用程序可以从您的应用程序数据文件夹中读取文件。现在您可以将此路径作为`intent`. 请记住，其他应用程序无法访问您的`assets`文件夹。

# xslt - Umbraco XSLT 按选定关键字搜索复选框

> ID：13190300
> 
> 赞同：0
> 
> 时间：2012-11-02T06:17:27.560
> 
> 标签：xslt, search, umbraco, keyword, checkboxlist

我使用文本框多数据类型创建了关键字的属性类型。

然后将关键字分隔成以逗号分隔的单词或短语列表。

我已将关键字包装在 A 标记中，带有链接到我的搜索页面的 href，并包含关键字的值，以便具有相同关键字的所有节点都将显示在我的搜索中。

我想添加一个选项，用户可以从带有关键字值的复选框中进行选择，然后提交搜索，以便所有选中的关键字都包含在搜索中。

![在此处输入图像描述](../Images/b2195bb519f4373dc520d91c25217214.png)

我需要帮助弄清楚如何获取关键字复选框列表的选中值以提交并在我的搜索页面上显示结果。

这是我到目前为止所拥有的，它没有提交，我找不到在哪里添加复选框的值：

```
<xsl:if test="string($currentPage/keywords) != ''">

<!-- get the contents of the textbox multiple, with commas -->
<xsl:variable name="textWithBrs" select="umbraco.library:ReplaceLineBreaks($currentPage/keywords)"/>

<!-- replace commas with pipes so you can use Split -->
<xsl:variable name="textWithPipes" select='umbraco.library:Replace($textWithBrs, ", ", "|")'/>

<!-- split into an array of items and output as unordered list -->
<xsl:variable name="items" select="umbraco.library:Split($textWithPipes, '|')"/>
<ul>
  <xsl:for-each select="$items/value">
    <li>
      <input type="checkbox" value="true" keyword="{.}" id="{.}" name=""/>
      <a>
      <xsl:attribute name="href"> <xsl:text disable-output-escaping="yes">/imagery/image-search.aspx
      <![CDATA[?]]>
      search=</xsl:text> <xsl:value-of select="." /> </xsl:attribute>
      <xsl:attribute name="title"> <xsl:value-of select="."/> </xsl:attribute>
      <xsl:value-of select="."/> </a> </li>
  </xsl:for-each>
</ul>
<input type="submit" value="Search" id="btnSearchBottom" name="" onclick="location.href='/imagery/image-search.aspx?search=otbra'" />
</xsl:if> 
```

任何帮助将不胜感激。

干杯，合资企业

我已经进行了一些编辑，现在让它半工作。但是，我的 Umbraco 模板有一个包含我的内容的表单。我认为这是导致一些问题的原因。

在我的测试中，我有一个包装我的 XSL 代码的表单。当我单击“提交”按钮时，没有任何反应，但如果我有相同代码的副本，则第二个复选框列表将能够提交。此外，当我进行多项选择时，搜索结果会尝试查找不返回任何结果的“一，二”（/image-search.aspx?search=one&search=two）。它应该搜索“一二”（/image-search.aspx?search=one%20two）。

我的重复形式的代码：

```
<div style="display:none;">
  <form name="input" action="/imagery/image-search.aspx" method="get">
    <ul>
      <xsl:for-each select="$items/value">
        <li>
          <input type="checkbox" name="search" value="{.}"/>
          &nbsp; <a href="/imagery/image-search.aspx?search={umbraco.library:UrlEncode(.)}" title="{.}"> <xsl:value-of select="."/> </a> </li>
      </xsl:for-each>
    </ul>
    <input type="submit" value="Submit"/>
  </form>
</div>
<div>
  <form name="input" action="/imagery/image-search.aspx" method="get">
    <ul>
      <xsl:for-each select="$items/value">
        <li>
          <input type="checkbox" name="search" value="{.}"/>
          &nbsp; <a href="/imagery/image-search.aspx?search={umbraco.library:UrlEncode(.)}" title="{.}"> <xsl:value-of select="."/> </a> </li>
      </xsl:for-each>
    </ul>
    <input type="submit" value="Submit"/>
  </form>
</div> 
```

Then I tried the following code, which didn't require to wrap the list in a form. Again multiple selections don't work, but also the only result returned is the first input value in the list (in this case 'one').

```
<ul id="checkboxes">
  <xsl:for-each select="$items/value">
    <li>
      <input id="{.}" type="checkbox" name="search" value="{.}"/>
      &nbsp; <a href="/imagery/image-search.aspx?search={umbraco.library:UrlEncode(.)}" title="{.}"> <xsl:value-of select="."/> </a> </li>
  </xsl:for-each>
</ul>
<input name="searchbutton" class="button" value="Search" type="reset" onClick="location.href='/imagery/image-search.aspx?search=' + $('#checkboxes input').attr('value')" /> 
```

So I need help with which option to use, and how to include multiple selections in the search result.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:04:34.330

A few notes

*   You seem to be unaware of attribute-value-templates. They replace the need for `<xsl:attribute>` in most cases. Use curly braces to evaluate expressions in attributes.
*   Always (!) URL-encode values that you put into an URL. Compare tha `<a href="...">` below.
*   When a form field does not have a name, its value will not be submitted by the browser. An ID on the other hand is not necessary.
*   Using `<xsl:if test="string($anything) != ''>` is not necessary. A non-empty string is truthy, so `<xsl:if test="$anything">` is sufficient.
*   `onclick`如果您希望表单传输，请勿在提交按钮中使用。使用该`<form action="...">`参数来确定应将表单值传输到何处。或者使用 JavaScript，但完全避免使用内联脚本处理程序，例如`"onclick"`. 您的标记中根本不应该有 JS。

XSL 代码

```
<xsl:if test="$currentPage/keywords">
  <xsl:variable name="textWithBrs" select="
    umbraco.library:ReplaceLineBreaks($currentPage/keywords)
  "/>
  <xsl:variable name="textWithPipes" select="
    umbraco.library:Replace($textWithBrs, ', ', '|')
  "/>
  <xsl:variable name="items" select="
    umbraco.library:Split($textWithPipes, '|')
  "/>
  <ul>
    <xsl:for-each select="$items/value">
      <li>
        <input type="checkbox" value="true" keyword="{.}" name="keywords"/>
        <a href="/imagery/image-search.aspx?search={umbraco.library:UrlEncode(.)}" title="{.}">
          <xsl:value-of select="."/>
        </a>
      </li>
    </xsl:for-each>
  </ul>
  <input type="submit" value="Search" id="btnSearchBottom" />
</xsl:if> 
```

# javascript - 从 JSTL 代码在 javascript 中设置数组值

> ID：13190306
> 
> 赞同：0
> 
> 时间：2012-11-02T06:18:11.880
> 
> 标签：javascript, jsp, jstl

我有一个看起来像这样的代码：

在 AnalyzeUserClient.jsp 中：

```
<c:set var="arrayList"><%= (ArrayList<String>)request.getSession().getAttribute("arrayList") %></c:set>
var sessionId = [];
<c:forEach items=${arrayList} var="id">
sessionId.push("${id}"); // add them one at a time, assuming string values
</c:forEach> 
```

但是，这一行：

```
 sessionId.push("${id}"); 
```

似乎没有将值传递到数组“sessionId”（我在浏览器上查看了源代码）。所以问题是，我该怎么做才能将值传递到数组中？

编辑：我刚刚意识到存在一些问题，因为 JSTL 是服务器端而 JavaScript 是客户端。那么有解决方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T07:30:07.433

不要混合 EL 和 scriptlet。事实上，完全忘记 scriptlet：

```
var sessionId = [];
<c:forEach items="${sessionScope.arrayList}" var="id">
    sessionId.push("${id}"); 
</c:forEach> 
```

请注意，如果其中一个 ID 恰好包含双引号，这将生成无效的 JavaScript。因此，您最好在控制器中使用 JavaScript 转义 ID。我会建议一种完全不同的方法：将 ID 列表序列化为控制器中的 JSON 字符串，并将此 JSON 字符串存储在请求属性中。JSP 页面只需要

```
var sessionId = ${jsonEncodedSessionIds}; 
```

这将转换为以下生成的代码：

```
var sessionId = ["id1", "id2"]; 
```

# performance - Hibernate: LazyLoading - 在一对多集合中按对象搜索

> ID：13190307
> 
> 赞同：0
> 
> 时间：2012-11-02T06:18:15.797
> 
> 标签：performance, hibernate, join, associations, one-to-many

我有一个实体 1 -> 子实体 n 一对多关系。

我只是想检查一下，这是否是**搜索实体的***最有效*方式，包括其 "One-To-Many-Collection" 中的指定子实体。它有效，但是如果我不需要加载所有子实体，我是否必须加入获取子实体或者是否有**更轻量级的解决方案？**（FetchMode = 懒惰）

 ****```
public Entity getEntityBySubEntity(SubEntity subEntity) { 
     List<Entity> result = (List<Entity>)getHibernateTemplate.findByNamedParam(
         "From Entity as e left join fetch e.subEntities as sub where sub.id = :id","id",subEntity.getId()); 
     if (!result.isEmpty()) { 
          return result.get(0);
     } else {
          throw new NoResultException();
     }
 } 
```

（顺便说一句，应该总是只有一个结果......）

thx in adv,

骑士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:33:23.343

您的查询很好，但不必要地获取子实体。只需删除 fetch 关键字。并且由于子实体不能为空来满足条件，因此可以进行内部连接：

```
select e from Entity e inner join e.subEntities sub where sub.id = :id 
```****

# c++ - 生成提升绑定表达式

> ID：13190309
> 
> 赞同：1
> 
> 时间：2012-11-02T06:18:23.547
> 
> 标签：c++, boost, bind

我有以下代码（或与之等效的代码）来生成绑定表达式。我将这些表达式与 boost.function_types 和 luabind.tag_function 一起使用，以将我们框架中的一些函数公开给 lua。

```
#define BOOST_BIND_ARG(J, I, D) BOOST_PP_CAT(_, BOOST_PP_INC(I))

#define MAKE_BIND_EXPR_GEN(_, N, __)                                         \
template < >                                                                 \
struct MakeBindExpr < N >                                                    \
{                                                                            \
  template < typename FP >                                                   \
  struct result                                                              \
  {                                                                          \
    typedef BOOST_TYPEOF_TPL(boost::bind(                                    \
              FP(0), BOOST_PP_ENUM(N, BOOST_BIND_ARG, BOOST_PP_EMPTY)        \
            )) type;                                                         \
  };                                                                         \
                                                                             \
  template < typename FP >                                                   \
  static typename result < FP >::type get(FP const & f)                      \
  {                                                                          \
    return boost::bind(f, BOOST_PP_ENUM(N, BOOST_BIND_ARG, BOOST_PP_EMPTY)); \
  }                                                                          \
};                                                                           \

BOOST_PP_REPEAT_FROM_TO(0, 9, MAKE_BIND_EXPR_GEN, _) 
```

这是有效的。但是，有没有更丑陋的方式来实现 MakeBindExpr？

以下是我现在能够做的......如果你有兴趣知道......

```
//  N is arity
//  F is function type
//  FP is function pointer type
template < typename N, typename FP >
typename MakeBindExpr < N >::template result < FP >::type makeBindExpr(FP const & fp);

//  FP is a function pointer type 
template < typename FP >
void bind2Lua(char const * const fname, FP const & f)
{
  namespace ft = boost::function_types;
  using ft::function_type;
  using ft::function_arity;
  typedef function_type < FP >::type F;
  typedef function_arity < F >::type Arity;
  luabind::tag_function < F >(makeBindExpr < Arity::value >::template get(f));
}

deque < string >(string const &, string const &);
bind2Lua("names", getNames); 
```

# xslt - 使用 XSL 将 XML 中的管道字符替换为新行

> ID：13190311
> 
> 赞同：0
> 
> 时间：2012-11-02T06:18:41.473
> 
> 标签：xslt, pdf-generation, xslt-1.0, xsl-fo

我的 XSLT 代码测试片段将 XML 中的一些数据转换为 PDF。

我现在面临的绊脚石是我必须读取 XML 中的字符串和

更换管道'||' 带有换行符的字符（在输出 pdf 上）

```
<Step>
     <TITLE>Measurement Result</TITLE>
     <MEAS OBJECT="REMARKS">
       <TITLE>Remarks</TITLE>
          <VALUE>Measurement completed.
             ||Findings: The battery is weak and should be replaced as soon as possible.
             || &gt;&gt; Contact helpline for more details
          </VALUE>
     </MEAS>
</Step> 
```

我如何调用一个模板，它可以读取这个管道字符并最终在输出 pdf 上呈现新行。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:38:19.907

因为您需要使用文本节点，所以使用“substring-before”来拆分字符串。这个例子有效：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="*">
        <xsl:apply-templates select="*"/>
    </xsl:template>
    <xsl:template match="VALUE">
        <xsl:call-template name="replace">
            <xsl:with-param name="txt">
                <xsl:value-of select="."/>
            </xsl:with-param>
        </xsl:call-template>
    </xsl:template>
    <xsl:template name="replace">
        <xsl:param name="txt"/>
        <xsl:if test="not(contains($txt,'||'))">
            <xsl:value-of select="$txt"/>
        </xsl:if>
        <xsl:if test="contains($txt,'||')">
            <xsl:value-of select="substring-before($txt,'||')"/>
            <hr/>
            <xsl:call-template name="replace">
                <xsl:with-param name="txt">
                    <xsl:value-of select="substring-after($txt,'||')"/>
                </xsl:with-param>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

它没有构建格式良好的 xml，但给出了这个想法。我使用 <hr/> 来显示新行。在此处插入适合您需要的代码。
怎么了？当 XSLT 脚本到达包含要拆分的文本的元素时，它调用命名模板并将文本作为参数发送。
命名模板检查参数是否包含拆分标记。如果不是，则使用文本不变。如果是这样，则使用拆分标记之前的文本，并将之后的文本再次提供给命名模板（递归）。

# php - 如果使用 debug_backtrace() 查询失败，则向管理员发送多个错误信息电子邮件

> ID：13190313
> 
> 赞同：0
> 
> 时间：2012-11-02T06:19:19.590
> 
> 标签：php, mysql

我的应用程序被 5000 人使用。它是一个中等规模的应用程序。我正在使用一个类来处理我的查询，例如转义变量、进行清理等。我在类中有一个函数负责执行查询。所以任何页面的所有查询都需要调用这个函数来执行查询。

```
function runQuery() {
    //prepare and other lines here 

    //execute
    $run = $query->execute($args);

    if(!$run) {
       //debug_backtrace() and mail the admin
    }

} 
```

一切正常。我的应用程序中的一个页面是“工作”，通常大多数员工一直都在这个页面中。唯一的问题是，如果有 100 个用户正在访问该应用程序，并且如果其中一个查询出现问题，我会收到 100 封关于相同错误的邮件。我只需要 1 封电子邮件。我该如何管理？我担心如果 1000 个用户一起访问，我的前景会发疯。触发错误的可能性较小，但我仍然想抓住它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:23:36.517

他们是没有办法做到这一点的。您的邮件功能位于错误的位置。一种解决方案是您可以在 Outlook 中使用过滤器并阻止重复的电子邮件。

# haskell - 使用 getLine 和 putStr 时 IO 发生故障

> ID：13190314
> 
> 赞同：34
> 
> 时间：2012-11-02T06:19:22.040
> 
> 标签：haskell, user-input, monads

我是一个 Haskell 初学者，我才刚刚开始了解 Monads，但我还没有真正理解它。我正在编写一个游戏，包括询问用户输入和响应。这是我的功能的简化版本：

```
getPoint :: IO Point
getPoint = do
    putStr "Enter x: "
    xStr <- getLine
    putStr "Enter y: "
    yStr <- getLine
    return $ Point (read xStr) (read yStr)

completeUserTurn :: (Board, Player) -> IO (Board, Player)
completeUserTurn (board, player) = do
    putStr $ "Enter some value: "
    var1 <- getLine
    putStr $ "Enter another value: "
    var2 <- getLine
    putStr $ "Enter a point this time: "
    point <- getPoint
    if (... the player entered legal values ...) then do
        putStr $ "This is what would happen if you did that: {stuff} do you want to do that? (y/n) "
        continue <- getLine
        if continue == "y" then
            return (...updated board..., ...updated player...)
        else
            completeUserTurn (board, player)
    else do
        putStr "Invalid Move!\n"
        completeUserTurn (board, player) 
```

发生的情况是提示将与应该出现在提示之前的文本乱序出现。

这是我编译上面的代码后发生的事情的一个例子：

> **1**
> 输入某个值： 输入另一个值：**2**
> **3**
> **4**
> 这次输入一个点： 输入 x： 输入 y：**y**
> 这是正确的吗？（是/否）：

粗体字是我输入的内容。

显然，我有一些重大的概念错误，但我不知道是什么。请注意，它在解释器中可以正常工作，但在编译时会失败。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-02T07:11:00.170

正如迈克尔所说，这个问题正在缓冲。默认情况下，输出是缓冲的，直到你打印一个换行符（或者如果你有很长的行，直到缓冲区已满），所以当你尝试使用`putStr`你正在做的相同行提示时，你最经常会看到这个问题。

我建议定义一个像这样的小辅助函数来为你做冲洗：

```
import System.IO

prompt :: String -> IO String
prompt text = do
    putStr text
    hFlush stdout
    getLine 
```

现在你可以简单地做

```
getPoint = do
    xStr <- prompt "Enter x: "
    yStr <- prompt "Enter y: "
    return $ Point (read xStr) (read yStr) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-02T06:56:02.047

IO 以正确的顺序发生。问题是缓冲。如果在每个 putStr 之后刷新标准输出，它应该可以按预期工作。您需要导入`hFlush`和`stdout`从`System.IO`.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-02T07:07:32.517

问题不在于 IO 代码中的操作顺序。问题是输入和输出在使用标准输入和标准输出时默认缓冲。这会提高应用程序中 IO 的性能，但可能会导致在同时使用 stdin 和 stdout 时操作出现乱序。

有两种解决方案。您可以使用该`hFlush`方法强制刷新句柄（标准输入或标准输出）。例如`hFlush stdout`，`hFlush stdin`。一个更简单的解决方案（适用于交互式应用程序）是完全禁用缓冲。您可以通过调用方法`hSetBuffering stdout NoBuffering`并`hSetBuffering stdin NoBuffering`在启动程序之前执行此操作（即，将这些行放在您的 main 方法中。

# javascript - 纯 JavaScript 的灯箱效果无法按预期工作

> ID：13190316
> 
> 赞同：0
> 
> 时间：2012-11-02T06:20:00.973
> 
> 标签：javascript

我正在尝试使用以下代码在单击图像时实现 Lightbox 效果

```
 document.addEventListener('click',function(){
        var target = event.target || event.srcElement;
        if(target.className == "acv"){
            var id = target.id, src= target.src, 
            type = target.nodeName, imgW, imgH,
            temp = document.createElement('div'),
            sHeight = screen.availHeight,    
            sWidth = screen.availWidth,
            st = temp.style;
            var img = new Image();
            img.onload = function(){
                imgW = this.width;
                imgH = this.height;
            }
            img.src = src;
            var imgH = ( sHeight >= imgH + 20 ? imgH : (sHeight - 20) );
            var imgW =  ( sWidth >= imgW + 20 ? imgW : (sWidth - 20) );
            img.style.height = imgH;
            img.style.width = imgW;
            img.style.position = "relative";
            img.style.left = ( (sWidth - imgW) / 2 ) + "px";
            img.style.top = ( (sHeight - imgH) / 2 ) + "px";
            temp.appendChild(img);
            temp.id = "lightbox";
            st.width = sWidth + "px";
            st.height = sHeight + "px";
            st.backgroundColor = "Gray";
            st.zIndex = 123;
            st.position = "absolute";
            st.top = st.left = 0;
            st.margin = "0 auto";
            document.body.appendChild(temp);
        }
    });​ 
```

[请在此处](http://jsfiddle.net/9xMHn/7/)检查工作小提琴。

我觉得我在这方面做错了什么。请更正并帮助我改进代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:52:32.960

似乎，如果图像已经加载 onload 事件没有触发，那么尝试使用在事件主体中初始化的 ImgW 和 ImgH 在事件处理程序范围之外使用也是错误的，至少，你还应该在事件处理程序中“修复”img，所以到目前为止，对于[小提琴](http://jsfiddle.net/oceog/9xMHn/11/)来说效果很好的代码：

```
document.addEventListener('click', function() {
    var target = event.target || event.srcElement;
    if (target.className == "acv") {
        //     debugger;
        var id = target.id,
            src = target.src,
            type = target.nodeName,
            imgW, imgH, temp = document.createElement('div'),
            sHeight = screen.availHeight,
            sWidth = screen.availWidth,
            st = temp.style;
        var img = new Image();
        img.src = src + '?rand=' + Math.random();
        //HIDE before we sure that image loaded!
        img.style.display = "none";
        var pos_img = function(img) {
            var imgH = img.height,
                imgW = img.width;
            imgH = (sHeight >= imgH + 20 ? imgH : (sHeight - 20));
            imgW = (sWidth >= imgW + 20 ? imgW : (sWidth - 20));
            img.style.height = imgH;
            img.style.width = imgW;
            img.style.position = "relative";
            img.style.left = ((sWidth - imgW) / 2) + "px";
            img.style.top = ((sHeight - imgH) / 2) + "px";
            //SHOW IMAGE BACK
            img.style.display = "block";
        };
        //image not loaded?
        if (img.complete === false) {
            img.addEventListener('load', function(e) {
                console.log("LOAD", e, img);
                //TODO remove EventListener ?
                pos_img(img);
            });
        } else {

            pos_img(img);
        }
        temp.appendChild(img);
        temp.id = "lightbox";
        st.width = sWidth + "px";
        st.height = sHeight + "px";
        st.backgroundColor = "Gray";
        st.zIndex = 123;
        st.position = "absolute";
        st.top = st.left = 0;
        st.margin = "0 auto";
        document.body.appendChild(temp);

    }
});​ 
```

我也将使用*窗口*宽度/高度来计算位置。

> 请注意，上面的代码没有给你生产代码，它只是为了显示逻辑错误在哪里。如果尝试单击 jslint 按钮，您可能不会问这个问题

# css - 修复了带有骨架响应式布局的侧边栏

> ID：13190320
> 
> 赞同：1
> 
> 时间：2012-11-02T06:20:12.363
> 
> 标签：css, responsive-design, css-position, skeleton-css-boilerplate

我有一个带有骨架样板的简单的两列响应式设计。对于侧边栏，我有这个*div*，在*容器 div*内：

```
 <div class="container">
    <div class="four columns">
       /* logo and menu */
    </div>
    <div class="nine columns post">
       /* contents... */
    </div>
 </div> 
```

我喜欢它在宽视口中的外观以及它如何堆叠在较窄的视口上，但我希望更宽尺寸的侧边栏（*四列 div*）始终固定在左侧，同时滚动另一个*div*的内容。

尝试了几件事，但最终搞砸了响应式布局，我想我对 CSS 定位没有全面的了解......

任何帮助表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:59:18.370

我读到您正在使用 Skeleton Boilerplate。

我建议您将徽标和菜单放在一个`<nav>`元素中。关闭时`</nav>`，插入一个不间断的空格 ( `&nbsp;`)。这个不间断的空间有望解决您的问题！

```
 <div class="container">
    <div class="four columns">
       <nav>
       /* logo and menu */
       </nav>
       &nbsp;
    </div>
    <div class="nine columns post">
    /* contents... */
    </div> 
```

接下来要做的是转到您的 CSS 文件并插入：

```
nav{ position:fixed; width:220px; /*found the width-info on Skeleton website*/ } 
```

让我知道它是否适合你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:21:11.403

为此，您需要有一个“粘性” div

尝试使用[航点](http://imakewebthings.com/jquery-waypoints/)

# android - 如何故意在 EditText 中换行？

> ID：13190321
> 
> 赞同：5
> 
> 时间：2012-11-02T06:20:23.567
> 
> 标签：android, android-edittext

我正在创建一个提供聊天功能的应用程序。屏幕中有一个EditText，我在上面设置了OnKeyListener。每当用户在键入消息后按“Enter”键时，消息就会显示在屏幕上。它工作正常。这是我的编辑文本：

```
<EditText android:id="@+id/chatMessageField"
    android:layout_height="wrap_content" android:layout_width="fill_parent"
    android:layout_gravity="center_horizontal|center_vertical"
    android:layout_marginRight="5dip" android:layout_marginLeft="5dip"
    android:maxLines="2" android:minLines="1" android:scrollbars="vertical"
    android:hint="@string/chatMessageHintText" android:textColorHint="#3b64a8">
</EditText> 
```

问题是当用户想要在 EditText 包装文本并进入新行之前进入新行时。现在，如果用户想换行并按“Enter”键，则发送消息。

在一些聊天信使中，我看到同时按下“Shift+Enter”（或任何其他组合键）将用户带到新行。我们如何检测 Android 中同时按下的“Shift+Enter”（或任何其他组合键）键？有没有办法在Android中实现这个功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T07:06:31.373

试试这个......它可能会有所帮助。

将 EditText 的输入设置为

```
youredittext.setInputType(EditorInfo.TYPE_TEXT_FLAG_MULTI_LINE); 
```

然后加：

```
android:singleLine="false" 
```

或者

```
youredittext.setSingleLine(false); 
```

也去[点击这里](http://developer.android.com/reference/android/view/inputmethod/EditorInfo.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T06:26:53.780

在您的`OnKeyListener`方法中，使用检查`Enter`和并分别`Shift Enter`提供和的单独功能。`Send``New Line`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T06:54:59.493

在搜索您的解决方案时，我得到了[这个](https://stackoverflow.com/questions/2004344/android-edittext-imeoptions-done-track-finish-typing/5369989#5369989)链接。试试吧，它可能会解决你的问题。

如果你有其他最好的方法请发布，这是非常有用和好问题..,。

谢谢..，。

编辑......................

另请参阅[此](https://stackoverflow.com/questions/12250563/custom-keyboard-shortcuts)链接以更好地使用自定义快捷方式...。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T06:47:27.670

在这里您可以设置“OnKeyListener”方法。对于每个键，您可以提供如下功能。

```
editText.setOnKeyListener(new View.OnKeyListener() {
public boolean onKey(View v, int keyCode, KeyEvent event) {
    switch(keyCode) {
        case KeyEvent.KEYCODE_0:
            //handle code for pressing 0
            break;
        case KeyEvent.KEYCODE_1
            //handles code for pressing 1
        default:
            break;
    }
}
}); 
```

**只需尝试搜索移位代码并输入**

它可能有效。玩得开心。

# xcode - 使用一个pickerView显示不同的数组数据

> ID：13190324
> 
> 赞同：1
> 
> 时间：2012-11-02T06:20:31.870
> 
> 标签：xcode, uipickerview

我是 XCode 的新手。我试图使用一个pickerView，并且我想在不同的时间显示三个不同的数组数据。就像我单击按钮时，选择器视图会显示一组数据。现在，当我在后台单击时，pickerView 消失了。现在我单击不同的按钮，并且相同的 pickerView 填充了不同的数组。我尝试使用 [pickerView reloadComponent] 但不知道如何正确使用它。谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:50:31.840

您必须更改它的数据源。在每个按钮的目标操作中设置新的数据源并重新加载pickerview。

# javascript - 如何在我的 asp.net 网页中集成 Google 地图？

> ID：13190325
> 
> 赞同：0
> 
> 时间：2012-11-02T06:20:38.480
> 
> 标签：javascript, asp.net, google-maps, google-maps-api-3, dom-events

在我的应用程序中，我必须将谷歌地图集成到我的一个网页中。这是我用于集成谷歌地图的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="http://maps.google.com/maps?file=api&v=3" type="text/javascript">
</script>
</head>
<body>
<div id="map" style="width: 700px; height: 500px"></div>
<script type="text/javascript">
//<![CDATA[

var map = new GMap(document.getElementById("map"));
map.centerAndZoom(new GPoint(-83.022206, 39.998264), 7);
map.setCenter(point, 15);
map.setUIToDefault();
map.setMapType(G_NORMAL_MAP);

// Create the marker and corresponding information window

function createInfoMarker(point, address) {
  var marker = new GMarker(point);
  GEvent.addListener(marker, "click",
    function() {
      marker.openInfoWindowHtml(address);
    }
  );
  return marker;
}

// University Hall
var point = new GPoint(-83.013307, 40.000610);
address = "University Hall<br />230 North Oval Mall <br />Columbus, Ohio 43210";
var marker = createInfoMarker(point, address);
map.addOverlay(marker);

//]]>
</script>
</body>
</html> 
```

它工作正常，但是，现在我想在这里放置我的用户定义的标记......

任何人都可以帮助我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:29:03.907

Google Maps APIv3 的文档提供了足够的示例来了解如何执行此操作-

你可以在这里找到它 - [https://developers.google.com/maps/documentation/javascript/overlays#Markers](https://developers.google.com/maps/documentation/javascript/overlays#Markers)

此外，您使用的语法似乎不是 V3 的，因此使用最新版本 - [https://developers.google.com/maps/documentation/javascript/controls](https://developers.google.com/maps/documentation/javascript/controls)

# c++ - 循环和内联函数

> ID：13190326
> 
> 赞同：6
> 
> 时间：2012-11-02T06:20:41.527
> 
> 标签：c++, c, loops, inline-functions

为什么不能将带有循环的函数内联？是性能问题还是有其他原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T06:34:18.790

即使无法展开循环，也可以内联包含循环的函数。谁说其他都是错的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T06:35:35.973

带有循环的函数可以内联，但每次调用函数时，都会产生一定的性能开销。这是因为 CPU 必须存储它正在执行的当前指令的地址（因此它知道稍后返回到哪里）以及其他寄存器，必须创建所有函数参数并分配值，并且程序必须跳转到一个新位置。就地编写的 Iline 代码要快得多。

由于代码膨胀的可能性，内联函数最适合短函数（例如，不超过几行），这些函数通常在循环内部调用并且不分支。另请注意，inline 关键字只是一个建议——编译器可以随意忽略您对内联函数的请求。如果您尝试内联冗长的函数，这很可能是结果！

C++ 提供了一种将函数的​​优点与就地编写代码的速度相结合的方法：内联函数。inline 关键字用于请求编译器将您的函数视为内联函数。当编译器编译你的代码时，所有的内联函数都在原地展开——也就是说，函数调用被函数本身内容的副本替换，这样就消除了函数调用开销！缺点是因为内联函数在每次函数调用时都在原地展开，这会使你编译的代码变得相当大，尤其是当内联函数很长和/或对内联函数有很多调用时。

```
#include <iostream>
#include <ctime>
using namespace std;

inline void inlineFunction()
{
    int loopCounter = 0;
     while(loopCounter<5 )
     {
         loopCounter++;
         cout<<"Inline loop "<<loopCounter<<" \n";
     }
}

void regularFunction()
{
    int loopCounter = 0;
     while(loopCounter<5 )
     {
         loopCounter++;
         cout<<"regular  "<<loopCounter<<" \n";
     }
}

int main()
{

    clock_t start;
    clock_t end;
    clock_t duration;

    cout << "Running inline function  ..." << endl;
    start = clock();

     inlineFunction();

    end = clock();
    duration = end - start;
    cout << "Time elapsed: " << duration << " ticks. \n" << endl;

    cout << "Running function  ..." << endl;
    start = clock();

    regularFunction();

    end = clock();
    duration = end - start;
    cout << "Time elapsed: " << duration << " ticks.\n" << endl;

    system("pause");
    return 0;
} 
```

# android - 安装时自动启动应用程序

> ID：13190327
> 
> 赞同：1
> 
> 时间：2012-11-02T06:20:45.827
> 
> 标签：android

我正在开发一个应用程序，我想在从 Google Play 商店安装该应用程序后自动启动该应用程序。我对此进行了一些搜索，发现线程和答案表明无法完成。但我还在 Play 商店中找到了一个应用程序，[即安装时自动启动，](https://play.google.com/store/apps/details?id=biz.stachibana.AutoLaunch&hl=en&rdid=biz.stachibana.AutoLaunch&rdot=1)它非常有效地做到了这一点。任何人都可以建议我这背后的逻辑。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:36:37.660

您需要创建一个绑定到 BOOT_COMPLETED 操作的 BroadcastReceiver。

**例子**

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android" 
     package="com.alfray.timeriffic" ...> 
     <application ...> 
      <receiver android:name=".MyBroadcastReceiver"> 
        <intent-filter> 
         <action android:name="android.intent.action.BOOT_COMPLETED" /> 
        </intent-filter> 
      </receiver> 
  </application> 

   <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
   </manifest> 
```

**它可能会起作用。试试看**

# javascript - 同步 Meteor.methods 函数中的 MeteorJS 异步代码

> ID：13190328
> 
> 赞同：8
> 
> 时间：2012-11-02T06:20:48.480
> 
> 标签：javascript, meteor

如何让客户端 method.call 等待异步函数完成？目前它到达函数的末尾并返回未定义。

客户端.js

```
Meteor.call( 'openSession', sid, function( err, res ) {
    // Return undefined undefined
    console.log( err, res ); 
}); 
```

服务器.js

```
Meteor.methods({
    openSession: function( session_id ) {
        util.post('OpenSession', {session: session_id, reset: false }, function( err, res ){
            // return value here with callback?
            session_key = res;
        });
     }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-04T03:21:20.613

最近版本的 Meteor 提供了未记录`Meteor._wrapAsync`的函数，它将带有标准`(err, res)`回调的函数转换为同步函数，这意味着当前的 Fiber 产生直到回调返回，然后使用 Meteor.bindEnvironment 来确保您保留当前的 ​​Meteor 环境变量（比如`Meteor.userId())`。

一个简单的用法如下：

```
asyncFunc = function(arg1, arg2, callback) {
  // callback has the form function (err, res) {}

};

Meteor.methods({
  "callFunc": function() {
     syncFunc = Meteor._wrapAsync(asyncFunc);

     res = syncFunc("foo", "bar"); // Errors will be thrown     
  }
}); 
```

您可能还需要使用`function#bind`确保`asyncFunc`在包装之前使用正确的上下文调用它。有关更多信息，请参阅：[https ://www.eventedmind.com/tracks/feed-archive/meteor-meteor-wrapasync](https://www.eventedmind.com/tracks/feed-archive/meteor-meteor-wrapasync)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T11:29:09.507

我能够在[这个要点](https://gist.github.com/3443021)中找到答案。为了从 method.call 中运行异步代码，您可以使用 Futures 来强制您的函数等待。

```
 var fut = new Future();
    asyncfunc( data, function( err, res ){
        fut.ret( res );
    });
    return fut.wait(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T21:10:47.230

更新：对不起，我应该更仔细地阅读这个问题。看起来这个问题也在[这里](https://stackoverflow.com/questions/12569712/meteor-calling-an-asynchronous-function-inside-a-meteor-method-and-returning-th)被问到并得到了回答。

除了期货，要考虑的另一种模式可能是使用从异步调用返回的数据更新另一个模型，然后订阅该模型的更改。

* * *

从[meteor.call 文档](http://docs.meteor.com/#meteor_call)看来`(err, res)`，回调函数的结果参数应该包含 openSession 函数的输出。但是您没有从 openSession 函数返回任何值，因此返回值未定义。

您可以对此进行测试：

客户：

```
Meteor.call('foo', function(err, res) {
  console.log(res); // undefined
});

Meteor.call('bar', function(err, res) {
  console.log(res); // 'bar'
}); 
```

服务器：

```
Meteor.methods({
  foo: function() {
    var foo = 'foo';
  },
  bar: function() {
    var bar = 'bar';
    return bar;
  }
}); 
```

# php - 如何在 Facebook 上共享 HTML

> ID：13190332
> 
> 赞同：-1
> 
> 时间：2012-11-02T06:20:59.167
> 
> 标签：php, facebook

在下图中，显示的手机屏幕是一个 html 预览部分。我想将显示预览手机的 html 分享到 facebook。我如何将 html 发布到 facebook（PHP/JQUERY）

请看屏幕视图![屏幕视图](../Images/680e93c146f5453803a689aadf5415cb.png)

任何帮助都会得到满足

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:43:40.277

**不，您不能将 HTML 代码发布到 Facebook。检查下面的链接，看看我们可以在 Facebook 上发布什么。 [https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:37:31.340

您可以通过 facebook javascript Sdk 来完成。

在这里我给样本

`javascript`：

```
function share(){
FB.ui(
  {
    method: 'feed',
    name: 'Put name',
    link: 'put link',
    picture: 'image url',
    description: 'descrition'
  },
  function(response) {
    if (response) {
       alert ('success');
    } else {
       alert ('Failed');
    }
  }
);  
} 
```

在`html`：

```
<a href="#" onclick="share()" >Click to share</a> 
```

# apache2 - 无法停止 Apache 目录索引

> ID：13190333
> 
> 赞同：3
> 
> 时间：2012-11-02T06:21:16.870
> 
> 标签：apache2, apache-config

我正在尝试让我的 OSX MacPorts 安装的 Apache 不显示目录列表。我尝试了 httpd.conf 文件中“选项”指令的各种配置，但没有成功。当我访问该站点时，它仍然列出了根目录（目前没有索引文件。）

每次更改后都重新启动了 Apache。

/ 目录中没有 .htaccess 文件，因此不应有任何覆盖。

这真让我抓狂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:18:29.573

所以基本上有些东西会覆盖你的配置。从 apache 的[文档](http://httpd.apache.org/docs/2.2/mod/core.html#options)中我们可以看到它`Options`可以放置在各种上下文中：服务器配置、虚拟主机、目录、.htaccess。 `httpd.conf`首先读取，因此如果您在那里正确提供了配置，则意味着它在其他地方被覆盖

您是如何在配置中输入选项的？在最基本的变体中，它应该是。

```
<Directory /path>
     Options -Indexes
</Directory> 
```

在这里你应该做什么：

*   `modules`检查模块配置`Options Indexes`
*   检查主要的虚拟主机定义，可能称为`default`或`000-default`

如果仍然没有帮助，`Options -Indexes`请直接添加到您的虚拟主机（前提是您还没有这样做）。或将其添加到`.htaccess`您目录中的文件中（允许 .htaccess 中的选项需要打开）[如评论中建议的那样]

# javascript - 在 JSP 中更改选择选项时显示 URL

> ID：13190335
> 
> 赞同：0
> 
> 时间：2012-11-02T06:21:27.227
> 
> 标签：javascript, html, jsp

更改选择选项时，我需要在 jsp 页面中显示 URL。

```
<form:select path="type" name="type" id="type" onChange="SelectType();">
<form:option value="Select type">Select type</form:option>
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="mercedes">Mercedes</option>
<option value="audi">Audi</option> 
```

在上面的代码中，当我更改选项值时，需要在选项下方显示一个与该值对应的 URL。URL 应该是 urlname/type?value=---。

该 URL 应显示一个弹出窗口。我直接显示更改类型的弹出窗口。我需要显示一个 URL，单击该 URL 我需要显示弹出窗口。该`SelectType();`函数在我的情况下显示弹出窗口。

# javascript - 错误：TypeError：window.attachEvent 不是函数

> ID：13190336
> 
> 赞同：4
> 
> 时间：2012-11-02T06:21:39.927
> 
> 标签：javascript, jquery

我正在使用`custome.js`，`PIE.js`并`jquery1_7_2.js`在我的`jsp`

这是我的**custome.js**，仅此而已。

```
jQuery(document).ready(function(){
   jQuery(function() {

    if (window.PIE) {
        jQuery('#login-box, .sign-button, .new-user-btn, .grey-btn, .code-btn, #contact-email, #contact-email .continue, #contact-email .cancel').each(function() {
            PIE.attach(this);
        });
    }

});

}) 
```

在所有浏览器中一切正常。但在 Firefox 中，它向我显示了这个错误

```
Error: TypeError: PIE.attach is not a function
Source File: http://localhost:8080/MyApp/js/custom.js
Line: 6 
```

请指导我解决这个问题。

**编辑：** 它在这行**PIE.js中显示错误**

> window.attachEvent("onunload",a);fKsa=function(b,c,d){b.attachEvent(c,d);this.ba(function(){b.detachEvent(c,d)})} })();f.Qa=new f.ea;fKsa(window,"onresize",function(){f.Qa.wa()});(function(){function a(){f.mb. wa()}f.mb=new f.ea;fKsa(window,"onscroll",a);f.Qa.ba(a)})();(function(){function a(){c=f .kb.md()}函数 b(){if(c){for(var d=0,e=c.length;d

和**custome.js**在这一行

> PIE.attach(这个);

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T07:47:18.063

附加事件以使其跨浏览器时执行以下操作：

```
if (target.addEventListener) {
    target.addEventListener(eventName, handlerName, false);
} else if (target.attachEvent) {
    target.attachEvent("on" + eventName, handlerName);
} else {
    target["on" + eventName] = handlerName;
} 
```

# javascript - 避免内存泄漏/使用 Javascript

> ID：13190337
> 
> 赞同：13
> 
> 时间：2012-11-02T06:21:47.573
> 
> 标签：javascript, jquery, memory-leaks

我是 jQuery 的新手。我有点困惑它是否正常或可能导致内存泄漏？

这是代码：在每个新值的某些日期过滤器上调用此方法

```
function preapreTooltip(chart) {
    var tickLength = chart.xAxis[0].tickPositions.length,
        ticks = chart.xAxis[0].ticks,
        tickPositions = chart.xAxis[0].tickPositions;
    for ( var iCntr = 0; iCntr < tickLength; iCntr++) {
         var tickVal = tickPositions[iCntr];

    //.label or .mark or both
    (function(tickVal) { // Is this good practice to call function like this?
        ticks[tickVal].label
        .on('mouseover', function(event) { // Is this good practice to call function like this?
            var label = '', labelCnt=0;
            $(chart.series).each(function(nCntr, series) {
                //business logic for each series
            });

           // calling method to show values in a popup
        });

        ticks[tickVal].label.on('mouseout', function(event) { // Is this good practice to call function like this?
            try {
                hideWrapper(); // hides popup
            } catch (e) {
            // do nothing
            }
        });

    })(tickVal);
  }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-02T07:50:06.677

虽然在编写大型纯 JavaScript 项目时需要避免特定于浏览器的问题，但在使用诸如 jQuery 之类的库时，应该假定该库的设计可以帮助您避免这些问题。但是，考虑到内存泄漏很难追踪，并且特定浏览器的每个不同版本的行为可能不同 - 知道如何通常避免内存泄漏比具体要好得多：

1.  如果您的代码被多次迭代，请确保您正在使用的变量可以被*垃圾回收*丢弃，并且不会被闭包引用绑定。
2.  如果您的代码正在处理大型数据结构，请确保您有一种删除或取消数据的方法。
3.  如果您的代码构造了许多对象、函数和事件侦听器 - 最好也包含一些解构代码。
4.  尽量避免将 javascript 对象或函数作为属性直接附加到元素上 - 即`element.onclick = function(){}`.
5.  如果有疑问，请在代码完成后进行整理。

您似乎认为调用函数的方式会对泄漏产生影响，但它总是更有可能是那些可能导致问题的函数的内容。

### 使用上面的代码，我唯一的建议是：

1.  每当使用事件监听器时，都会尝试找到一种方法来重用函数，而不是为每个元素创建一个。这可以通过使用[事件委托来实现（将事件](http://icant.co.uk/sandbox/eventdelegation/ "事件委托") *捕获在祖先/父级上并将反应委托给`event.target`）*，或者编写一个单一的通用函数来以相对方式处理您的元素，最常见的是相对于`this`or `$(this)`。

2.  当需要创建许多事件处理程序时，通常最好将这些事件侦听器存储为命名函数，以便在完成后再次删除它们。这意味着要避免像您一样使用匿名函数。但是，如果您知道它只是处理 DOM 的代码，则可以回退到 using`$(elements).unbind('click')`删除所有使用 jQuery 应用于所选元素的单击处理程序*（匿名或非匿名） 。*但是，如果您确实使用后一种方法，那么使用 jQuery 的事件命名空间功能肯定会更好——这样您就知道您只是在删除您的事件。即`$(elements).unbind('click.my_app');`。这显然意味着您必须使用绑定事件`$(elements).bind('click.my_app', function(){...});`

### 更具体：

自动调用匿名函数

```
(function(){
  /*
   running an anonymous function this way will never cause a memory
   leak because memory leaks (at least the ones we have control over) 
   require a variable reference getting caught in memory with the 
   JavaScript runtime still believing that the variable is in use, 
   when it isn't - meaning that it never gets garbage collected. 
   This construction has nothing to reference it, and so will be 
   forgotten the second it has been evaluated.
  */
})(); 
```

使用 jQuery 添加匿名事件侦听器：

```
var really_large_variable = {/*Imagine lots of data here*/};

$(element).click(function(){
  /*
   Whilst I will admit not having investigated to see how jQuery
   handles its event listeners onunload, I doubt if it is auto-
   matically unbinding them. This is because for most code they
   wont cause a problem, especially if only a few are in use. For
   larger projects though it is a good idea to create some beforeunload
   or unload handlers that delete data and unbind any event handling.
   The reason for this is not to protect against the reference of the
   function itself, but to make sure the references the function keeps
   alive are removed. This is all down to how JS scope works, if you
   have never read up on JavaScript scope... I suggest you do so.

   As an example however, this anonymous function has access to the
   `really_large_variable` above - and will prevent any garbage collection
   system from deleting the data contained in `really_large_variable`
   even if this function or any other code never makes use of it. 
   When the page unloads you would hope that the browser would be able
   to know to clear the memory involved, but you can't be 100% certain
   it will *(especially the likes of IE6/7)* - so it is always best
   to either make sure you set the contents of `really_large_variable` to null
   or make sure you remove your references to your closures/event listeners.
  */
}); 
```

### 拆解和解构

关于我的解释，我已经将注意力集中在何时不再需要该页面并且用户正在导航离开。然而，在当今 ajaxed 内容和高度动态界面的世界中，上述内容变得更加相关；不断创建和丢弃元素的 GUI。

如果您正在创建一个动态 javascript 应用程序，我无法强调让构造函数`.tearDown`或`.deconstruct`在不再需要代码时执行的方法的重要性。这些应该逐步完成大型自定义对象构造并使其内容无效，以及删除已动态创建且不再使用的事件侦听器和元素。您还应该`empty`在替换元素的内容之前使用 jQuery 的方法 - 这可以用他们的话更好地解释：

[http://api.jquery.com/empty/](http://api.jquery.com/empty/)

> 为了避免内存泄漏，jQuery 在删除元素本身之前从子元素中删除其他构造，例如数据和事件处理程序。
> 
> 如果您想在不破坏其数据或事件处理程序的情况下删除元素（以便以后可以重新添加它们），请改用 .detach() 。

使用 tearDown 方法进行编码不仅会迫使您更整洁地进行编码*（即确保将相关的代码、事件和元素放在一起命名空间）*，这通常意味着您以更加模块化的方式构建代码；对于未来的应用程序验证、可读性以及以后可能接管您项目的任何其他人来说，这显然要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:29:40.303

这是一篇使用 Chrome 或 Safari 检测内存泄漏的优秀文章：http: [//javascript.crockford.com/memory/leak.html](http://javascript.crockford.com/memory/leak.html)

它使用了开发人员工具面板中不为人知的功能。

有趣且非常有用！

**编辑**

这不是好的链接（但仍然有用）。这是一个： http: [//gent.ilcore.com/2011/08/finding-memory-leaks.html](http://gent.ilcore.com/2011/08/finding-memory-leaks.html)

# android - android - setOnItemSelectedListener 不返回确切位置

> ID：13190338
> 
> 赞同：0
> 
> 时间：2012-11-02T06:21:58.203
> 
> 标签：android, android-listview

我有两个清单`(List1, List2)`。我为此实现了拖放功能（从 List1 到 List2）。对于 List1，我`this(setOnItemSelectedListener)`对选定项目使用了侦听器。如果您不滚动，它工作正常意味着它的返回列表项位置。

假设如果您正在滚动然后尝试选择该项目然后它返回可见项目的列表项目位置。（例如，您的列表在滚动后从 1 到 10 项目 4 项目是您列表的第一项，然后用户假设选择 7 项目列表然后它返回位置为4。）如何获取列表的确切位置。这个监听器也一样`setOnItemReceiverListener`。

```
code
/**
 * Set selected Listener to know what item must be drag
 */
lvStudies.setOnItemSelectedListener(mOnItemSelectedListener);

/**
 * Listener to know on what position the new item must be insert
 */
 lvAddedContacts.setOnItemReceiverListener(listenerReceivePicture);    

/**
 * Save selected item
 */
private AdapterView.OnItemSelectedListener mOnItemSelectedListener = new AdapterView.OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int position,
            long arg3) {

        /**
         * retrieve selected item from adapterview
         */
        nStudiesMovePosition = position;
        System.out.println("position"+position);            
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub          
    }
};

 private OnItemClickListener listenerReceivePicture = new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int position,long arg3) 
    {       
        System.out.println("Position:"+position);
    }
    };

//Adapter for studies list
private class StudiesListViewAdapter extends BaseAdapter 
{
    private LayoutInflater mInflater;        

    public StudiesListViewAdapter(Context context) {
        // Cache the LayoutInflate to avoid asking for a new one each time.
        mInflater = LayoutInflater.from(context);   
    }

    public int getCount()
    {   
        int nListSize = DH_Constant.StudiesList_obj.response.size();
        if(nListSize > 0)
        {
            return nListSize;
        }
        else
        {
            return 0;
        }            
    }

    public Object getItem(int position)
    {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, final ViewGroup parent)
    {            
        ViewHolder holder;                     
        convertView = mInflater.inflate(R.layout.studieslist_item, null);
        holder = new ViewHolder();

        //getting the id's
        holder.tvPatientName = (TextView) convertView.findViewById(R.id.SLI_PatientName_tv);
        holder.tvStudy = (TextView) convertView.findViewById(R.id.SLI_Study_tv);           

        //Patient Name            
        String strTotal = DH_Constant.StudiesList_obj.response.get(position).PatientName;
        String strPName = strTotal.substring(0, strTotal.indexOf("(Dt:"));
        holder.tvPatientName.setText(strPName);

        //Study
        String strStudy = strTotal.substring(strTotal.indexOf("(Dt:"));
        strStudy = strStudy.replace("Dt: ", "");
        strStudy = strStudy.replace("Study: ", "");           
        holder.tvStudy.setText(strStudy);

        return convertView;
    }   
    class ViewHolder 
    {
       TextView tvPatientName,tvStudy;                  
    } 
}   

//Adapter for added contacts
private class ContactsListViewAdapter extends BaseAdapter 
{

    private LayoutInflater mInflater;        

    public ContactsListViewAdapter(Context context) {
        // Cache the LayoutInflate to avoid asking for a new one each time.
        mInflater = LayoutInflater.from(context);   
    }

    public int getCount()
    {   
        int nListSize = DH_Constant.AddedContactsList_obj.response.size();
        if(nListSize > 0)
        {
            return nListSize;
        }
        else
        {
            return 0;
        }            
    }

    public Object getItem(int position)
    {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, final ViewGroup parent)
    {            
         ViewHolder holder;          

//           if (convertView == null) 
//           {
             convertView = mInflater.inflate(R.layout.added_contacts_list, null);
             holder = new ViewHolder();
//                 convertView.setTag(holder);
//           } 
//           else 
//           {
//               holder = (ViewHolder) convertView.getTag();
//           }

        //getting the id's
        holder.tvName = (TextView) convertView.findViewById(R.id.xrays_Name_tv);
        holder.btnRemove = (Button) convertView.findViewById(R.id.xrays_removebtn);

        //Name              
        String strUserName = DH_Constant.AddedContactsList_obj.response.get(position).Email;
        System.out.println("strUserName:"+strUserName);

        //Change the color for differentiate the dicom and non dicom users
        if(DH_Constant.AddedContactsList_obj.response.get(position).IsDicomUser)
        {
            holder.tvName.setTextColor(Color.rgb(0, 135, 137));   
            String strrr =strUserName.substring(0, strUserName.indexOf('-'));
            strUserName = DH_Constant.AddedContactsList_obj.response.get(position).Name +"("+ strrr+")";             
        }
        else
        {
            holder.tvName.setTextColor(Color.BLUE);             
        }

        holder.tvName.setText(strUserName);

        //Remove button Listener
        holder.btnRemove.setBackgroundResource(R.layout.xrays_contact_removebtn_widget);
        holder.btnRemove.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v)
            {
                lnIcontactId = DH_Constant.AddedContactsList_obj.response.get(position).ImportedContactsID; 
                nDicomUser = DH_Constant.AddedContactsList_obj.response.get(position).IsDicomUser?1:0;
                //Alert for remove the contact
                showDialog(DIALOG_removebtnalert);
            }
        });                                             
        return convertView;
    }   

    class ViewHolder 
    {
       TextView tvName;
       Button btnRemove;        
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:02:54.183

我不知道这是否是错误，但是当您滚动 ListView 时，位置会变得混乱。
在您的情况下，如果您可以使用 id( `long arg3 in your source code`)，请使用它。
滚动时有很多关于位置的工作，但它可能很混乱。

# c# - 如何在 XML 中保存 WPF 用户设置？

> ID：13190342
> 
> 赞同：1
> 
> 时间：2012-11-02T06:22:12.733
> 
> 标签：c#, wpf, xml, linq-to-xml

我是 WPF 新手。我正在构建一个简单的 WPF 应用程序，它要求用户使用 C# 语言登录。在登录页面，用户允许勾选“记住我”和“自动登录”复选框，但如果应用程序关闭，设置将重置为默认值。所以，我想要的是每次用户勾选复选框并关闭应用程序后，必须保存设置。

正如我在网上找到的，有一些方法可以保存用户设置。有人可以为我提供分步教程或有关将用户设置保存到 XML 的链接吗？

PS我有一些Linq经验。我更喜欢 Linq to XML 方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T07:04:21.267

我不确定这是否是需要 XML 文件的家庭作业，但这种方法比自定义 XML 解决方案要容易得多，并且内置于 WPF 应用程序中。

[在 WPF 中配置应用程序/用户设置的简单方法](http://geekswithblogs.net/mbcrump/archive/2010/06/17/configuring-applicationuser-settings-in-wpf-the-easy-way.aspx)

**PS** 不要忘记调用`.Save()`您的设置更改！

# html - Wordpress 对齐问题

> ID：13190346
> 
> 赞同：1
> 
> 时间：2012-11-02T06:22:32.040
> 
> 标签：html, css, wordpress, alignment

我正在尝试对齐网站的内容，但由于某些原因，几组之后的内容变得不对齐。

![在此处输入图像描述](../Images/6e3437a8e27bc40398dfbac246ce61b0.png)

链接： http: [//play.mink7.com/cadabams/team/](http://play.mink7.com/cadabams/team/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:23:34.680

您可以通过制作一个 div 并放置一个用户的图像和内容并分配`width:100%;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:27:49.583

现在 `clear:both`你好`#page-left-content-holder .entry-content h3.title-name`

像这样

```
#page-left-content-holder .entry-content h3.title-name{
clear:both;
} 
```

# visual-studio - 如何在安装过程中检测操作系统然后安装兼容文件？

> ID：13190347
> 
> 赞同：0
> 
> 时间：2012-11-02T06:22:32.427
> 
> 标签：visual-studio, visual-c++, installation, windows-installer

我有一个与 Windows XP 兼容的 Visual Studio C++ MSI 包，我还有另一个与 Windows Vista、7、8 兼容的包。

所以，我有两个 MSI 文件。现在，我想要的是，应用程序将两个 MSI 文件合并到一个 exe 文件中，在安装过程中，应用程序检测操作系统并选择兼容的 MSI 进行安装。XP 应该安装 XP MSI，Win7 应该安装 Win7 MSI。

有没有提供这种功能的应用程序？我怎样才能做到这一点 ？任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:24:00.290

要将两个 MSI 合并到一个包中，您可以使用 Bootstrapped EXE 或 Chained MSI。
链式 MSI：
您将 2 个 MSI 添加到新的 1 个 MSI 中。`VersionNT`并在需要的条件下使用属性。Windows XP 的条件将是`VersionNT<600`，对于 Windows Vista 及更高版本`VersionNT>600`。
引导：
您将 2 个 MSI 添加到一个 Setup.exe 中。尝试[http://dotnetinstaller.codeplex.com/](http://dotnetinstaller.codeplex.com/)。它是免费且易于使用的。或阅读有关[Windows Installer Bootstrapping](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367832%28v=vs.85%29.aspx)的信息。

# php - 无法使用 SHOPIFY PHP API 更新产品

> ID：13190350
> 
> 赞同：2
> 
> 时间：2012-11-02T06:22:50.777
> 
> 标签：php, api, shopify

我正在实施*@sandeep shetty shopify api*将记录插入我的shopify 商店。我已经完全实现了插入，并且在我的商店中运行良好。我在更新过程中遇到问题。我无法更新正在插入商店的记录。我正在根据插入后由 api 生成的 id 更新记录。
这是我为更新产品编写的代码。

将在 shopify api 调用中作为参数传递的数组。

```
$product = array
    (

        "product" => array
        (
            "variants" => array
                (
                    "price" =>  $cat['selling_price'],
                    "inventory_quantity"=>($cat['original_qty']!="") ? $cat['original_qty'] : 'Null',
                )
        )
    ); 
```

更新产品的代码。

```
$update = $shopify('PUT', "/admin/products/#{id}.json", $product); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:49:27.020

我曾经在 json 数据中提供 ID。我使用的代码：

```
$data_string = '
{
    "variant": {
        "id": "'.$idVar.'",
        "option1": "'.$this->input->post('variant').'",
        "price": "'.$this->input->post('salesPrice').'",
        "inventory_quantity": "'.$this->input->post('stockQty').'"
    }
}
'; 
```

要更新变体，我使用以下网址：

```
/admin/variants/".$idVar.".json" 
```

此外，使用 000000000.json，删除 # 符号。

# c# - 在 LINQ 中使用 like

> ID：13190356
> 
> 赞同：1
> 
> 时间：2012-11-02T06:23:17.320
> 
> 标签：c#, linq

我的项目有问题。我有一个用于保存类别的表格，我有一个`listview`用于查看该类别名称的表格，并且我在`listview`. 当我在 中键入字母时`textbox`，我想使用 LINQ 查询在列表视图中查看相应的类别名称，为此我正在使用以下代码：

```
 DataTable dt = (from c in Common.dc.TblBrands
                    where SqlMethods.Like(c.BrandName, txtSearch.Text+"%")
                    orderby c.BrandName
                    select c).getDataTable(); 
```

我可以正确看到名称，但我想在`textbox`. 我可以使用什么查询来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:29:33.040

您可以使用[Contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)或[StartsWith](http://msdn.microsoft.com/en-us/library/system.string.startswith.aspx)。对于您的特定情况`SqlMethods.Like(c.BrandName, txtSearch.Text+"%")`，您可以使用 `StartsWith`

```
DataTable dt = (from c in Common.dc.TblBrands
                where c.BrandName.StartsWith(txtSearch.Text)
                orderby c.BrandName
                select c).getDataTable(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:54:23.520

听起来你想要这样的东西：

```
DataTable dt = (from c in Common.dc.TblBrands
                where SqlMethods.Like(c.BrandName, txtSearch.Text+"%")
                      || c.BrandId == txtSearch.Text
                orderby c.BrandName
                select c).getDataTable(); 
```

或使用`StartsWith`代替`SqlMethods.Like`：

```
DataTable dt = (from c in Common.dc.TblBrands
                where c.BrandName.StartsWith(txtSearch.Text)
                      || c.BrandId == txtSearch.Text
                orderby c.BrandName
                select c).getDataTable(); 
```

当然，这一切都假设`BrandId`也是一个字符串。如果它（比如说）是一个整数，它可能会变得有点毛茸茸。在这两种情况下，我都会`txtSearch.Text`先亲自提取 - 我怀疑我什至会在可以访问 UI 的代码中使用查询，但这是一个架构问题。

（不清楚`getDataTable()`这里是什么 - 如果它是您自己的扩展方法，请考虑修改名称以遵循 .NET 约定。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T06:42:52.713

您也`SqlMethods.Like`可以在 namespace 下使用 available `System.Data.Linq.SqlClient`。

```
DataTable dt = (from c in Common.dc.TblBrands
                where SqlMethods.Like(c.BrandName, txtSearch.Text + "%")
                orderby c.BrandName
                select c).getDataTable(); 
```

**添加：**如果您尝试搜索 BrandId（假设`int`类型），您可以这样做：

```
DataTable dt = (from c in Common.dc.TblBrands
                where SqlMethods.Like(c.BrandName, txtSearch.Text + "%") ||
                      c.BrandId.ToString().Equals(txtSearch.Text)
                orderby c.BrandName
                select c).getDataTable(); 
```

# mysql - PostgreSQL 中的 DATE_FORMAT() 等效项

> ID：13190358
> 
> 赞同：0
> 
> 时间：2012-11-02T06:23:28.170
> 
> 标签：mysql, sql, postgresql

我在mysql中有这个查询

```
SELECT * 
FROM `calendar` 
WHERE DATE_FORMAT(startTime, "%Y-%m-%d") = '2010-04-29' 
```

如何转换为 Postgresql 查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:31:56.257

基本上，`MYSQL`其中使用的查询`DATE_FORMAT()`将日期转换为字符串。如果要将其与日期进行比较，请不要使用`DATE_FORMAT()`but `DATE()`。试试这个，在`PostgreSQL`，将时间戳转换为日期，

```
SELECT * 
FROM   "calendar"
WHERE  "startTime"::date = '2010-04-29' 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!1/12c3c/3)
*   [*其他来源*](https://stackoverflow.com/questions/6133107/extract-dateyyyy-mm-dd-from-timestamp-postgresql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:31:32.600

```
SELECT *
FROM calendar
WHERE starttime::date = '2010-04-29' 
```

# .net - 为什么dll没有更新？类库

> ID：13190364
> 
> 赞同：1
> 
> 时间：2012-11-02T06:23:42.757
> 
> 标签：.net, dll, class-library

我在 1 个解决方案中有 2 个项目，当我构建以创建 dll 文件时，每个项目都相互链接。但是我看不到我声明的新课程？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:30:24.057

你有一个循环引用，这不是一个好主意。DLL 1 依赖于 DLL 2，反之亦然。

当您编译解决方案时，VS.NET 将通过查看依赖关系来确定首先构建哪个 dll。但是，由于您有循环依赖，VS.NET 将无法始终如一地做到这一点。它可能最后构建了包含您的新类的 DLL，因此引用 DLL 不引用最新/最新编译的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:40:08.763

请检查 tat 类的访问级别。

请[继承概念](http://www.tutorialspoint.com/cplusplus/cpp_inheritance.htm) ，这可能是问题..如果这不是问题，只需删除该 dll 引用，然后在再次添加之前构建您要添加引用的项目。

# javascript - 使用纯 JavaScript 交换默认字段值

> ID：13190367
> 
> 赞同：1
> 
> 时间：2012-11-02T06:24:29.553
> 
> 标签：javascript, jquery

我在 jQuery 中编写了一些代码，用于删除/替换焦点和模糊事件的电子邮件字段的默认值。它的工作正常，

但我想要它在 JavaScript 中。我已经尝试了几次，但我无法成功。

这是我的 jQuery 代码

```
 $(document).ready(function(){
    var email = 'Enter E-Mail Address....';
    $('input[type="email"]').attr('value',email).focus(function(){
        if($(this).val()==email){
            $(this).attr('value','');
        }
    }).blur(function(){
        if($(this).val()==''){
            $(this).attr('value',email);
        }
    }); 
}); 
```

谁能告诉我如何在 JavaScript 中做到这一点，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:26:41.130

假设`<input type='text' id="email_field"/>`

```
var email = 'Enter E-Mail Address....';
var emailField = document.getElementById("email_field");
emailField.onfocus = function(){
  removeDefaultText(this);
}
emailField.onblur = function(){
  setDefaultText(this);
}

function removeDefaultText(element){
  var defaultValue = 'Enter E-Mail Address....';
  if(element.value == defaultValue){
    element.value = "";
  }
}

function setDefaultText(element){
  var defaultValue = 'Enter E-Mail Address....';
  if(element.value == ''){
    element.value = defaultValue;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:26:49.493

尝试

```
function validEmail(e) {
    var filter = /^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;
    return String(e).search (filter) != -1;
} 
```

用 jQuery

```
var userinputmail= $(this).val();
var pattern = /^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i

if(!pattern.test(userinputmail))
{
  alert('not a valid e-mail ');
}​ 
```

您还可以尝试以下正则表达式进行其他验证（我认为这会有所帮助）

1.  匹配用户名 => `/^[a-z0-9_-]{3,16}$/`
2.  匹配密码 =>`/^[a-z0-9_-]{6,18}$/`
3.  匹配一个 URL =>`/^[a-z0-9_-]{6,18}$/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T07:41:05.717

显然，当没有其他值时，您正在尝试显示占位符值。

在任何现代浏览器中，您都可以简单地使用这个：

```
<input type="text" class="email" placeholder="Enter E-Mail Address..." /> 
```

不幸的是，这不包括旧的 IE，所以 vanilla JavaScript 的方法可能是这样的：

```
// grab all input[type="email"] elements
var emailFields = document.getElementsByTagName('INPUT').filter(function(input) {
  return input.type === 'email';
});

var placeholder = 'Enter your E-Mail Address...';
// watch onfocus and onblur on each of them
emailFields.forEach(function(input) {
  input.onfocus = function() {
    // clear only if the value is our placeholder
    if (input.value === placeholder) {
      input.value = '';
    }
  }

  input.onblur = function() {
    // set the value back to the placeholder, if it's empty
    if (input.value === '') {
      input.value = placeholder;
    }
  }
}); 
```

希望适合您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T06:28:52.313

您可以为此使用常规的旧 javascript：

```
function IsEmail(email) {
  var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
  return regex.test(email);
} 
```

======

*   使用新的正则表达式
*   **演示** [http://bit.ly/Hzbq4i](http://bit.ly/Hzbq4i)
*   添加了对[地址标签](http://en.wikipedia.org/wiki/Email_address#Address_tags)（+ 号）的支持

* * *

```
function isValidEmailAddress(emailAddress) {
    var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
    return pattern.test(emailAddress);
}; 
```

* * *

```
if( !isValidEmailAddress( emailaddress ) ) { /* do stuff here */ } 
```

> *   **注意：** [请记住，不存在 100% 正则表达式](https://stackoverflow.com/questions/201323/what-is-the-best-regular-expression-for-validating-email-addresses) 电子邮件检查！

检查这个[链接](https://stackoverflow.com/questions/2855865/jquery-validate-e-mail-address-regex)

# excel - PowerPivot 列出数据值而不是汇总

> ID：13190369
> 
> 赞同：0
> 
> 时间：2012-11-02T06:24:32.843
> 
> 标签：excel, powerpivot

刚从 MS PowerPivot 开始。我正在尝试创建一个透视表，显示对调查中问题的答复列表，但是我在 powerpivot 想要为透视的答复提供“汇总依据”值的地方失败了。

在返回这些数据的 sql 查询中，我将使用 max(AnswerComment) （因为每个问题每个受访者只有一个答案）。但是，当我选择 Max 作为按值汇总时，PowerPivot 会返回：错误 - 计算中止：度量“答案”[Maximum of AnswerComment]' 中的计算错误，然后解释说只有数字或日期（而不是字符串）可以是 'MAX 'ed。

有没有办法列出透视数据（而不是对其进行汇总计算）？如果没有，是否有 PowerPivot 接受字符串类型的摘要函数？

谢谢麦克莱克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:40:12.723

根据定义，PowerPivot 不允许您列出文本值。解决此问题的方法是将列放在一行上，然后确保您有另一个包含该列的所有值的度量（传统上是维度）。

话虽如此，一种常见的方法是在 PowerPivot 工作簿之上构建 Power View 报告。这将允许您列出值。

# mongodb - 如何根据 Mongodb 中的键删除重复项？

> ID：13190370
> 
> 赞同：61
> 
> 时间：2012-11-02T06:24:38.483
> 
> 标签：mongodb, optimization, duplicates, key

我在 MongoDB 中有一个集合，其中大约有（约 300 万条记录）。我的样本记录看起来像，

```
 { "_id" = ObjectId("50731xxxxxxxxxxxxxxxxxxxx"),
   "source_references" : [
                           "_id" : ObjectId("5045xxxxxxxxxxxxxx"),
                           "name" : "xxx",
                           "key" : 123
                          ]
 } 
```

我在集合中有很多重复记录具有相同的`source_references.key`. （我的意思是重复，`source_references.key`而不是`_id`）。

我想删除基于的重复记录`source_references.key`，我正在考虑编写一些 PHP 代码来遍历每条记录并删除记录（如果存在）。

有没有办法删除 Mongo 内部命令行中的重复项？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-11-02T07:20:40.533

***此答案已过时：****该`dropDups`选项已[在 MongoDB 3.0 中删除](http://docs.mongodb.org/manual/release-notes/3.0-compatibility/#remove-dropdups-option)，因此在大多数情况下需要采用不同的方法。例如，您可以按照以下建议使用聚合：[MongoDB duplicate documents even after added unique key](https://stackoverflow.com/questions/29072209/mongo-db-duplicate-documents-even-after-adding-unique-key)。*

如果您确定标识重复记录，您可以在 MongoDB 2.6 或更早版本中使用索引创建选项`source_references.key`确保唯一索引：[`dropDups:true`](http://docs.mongodb.org/manual/tutorial/create-a-unique-index/#drop-duplicates)

```
db.things.ensureIndex({'source_references.key' : 1}, {unique : true, dropDups : true}) 
```

这将为每个`source_references.key`值保留第一个唯一文档，并删除任何可能导致重复键违规的后续文档。

**重要提示**：任何缺少该`source_references.key`字段的文档都将被视为具有*空*值，因此后续缺少该关键字段的文档将被删除。您可以添加[`sparse:true`](http://docs.mongodb.org/manual/tutorial/create-a-sparse-index/)索引创建选项，以便索引仅适用于具有`source_references.key`字段的文档。

**明显的警告**：备份您的数据库，如果您担心意外的数据丢失，请先在暂存环境中尝试此操作。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2016-03-19T07:44:40.600

这是我在 MongoDB 3.2 上使用的最简单的查询

```
db.myCollection.find({}, {myCustomKey:1}).sort({_id:1}).forEach(function(doc){
    db.myCollection.remove({_id:{$gt:doc._id}, myCustomKey:doc.myCustomKey});
}) 
```

在运行此之前索引您的`customKey`以提高速度

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-02T07:28:20.007

虽然@Stennie's 是一个有效的答案，但它不是唯一的方法。事实上，MongoDB 手册要求您在执行此操作时要非常谨慎。还有两个选择

1.  [让 MongoDB使用 Map Reduce](https://stackoverflow.com/questions/5530580/removing-duplicate-records-using-mapreduce)为您做到这一点
    *   [其他方式](http://glassonionblog.wordpress.com/2012/03/19/mongodb-how-to-check-for-duplicates-in-a-collection/)
2.  您以[编程](https://stackoverflow.com/questions/8405331/how-to-remove-duplicate-record-in-mongodb-by-mapreduce)方式执行效率较低。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-08-23T12:51:15.710

这是一种稍微“手动”的方式：

本质上，首先，获取您感兴趣的所有唯一键的列表。

然后使用这些键中的每一个执行搜索，如果该搜索返回大于一，则删除。

```
 db.collection.distinct("key").forEach((num)=>{
      var i = 0;
      db.collection.find({key: num}).forEach((doc)=>{
        if (i)   db.collection.remove({key: num}, { justOne: true })
        i++
      })
    }); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-03-29T15:37:42.703

扩展[费尔南多的答案](https://stackoverflow.com/a/45840274/2284676)，我发现它花费的时间太长，所以我修改了它。

```
var x = 0;
db.collection.distinct("field").forEach(fieldValue => {
  var i = 0;
  db.collection.find({ "field": fieldValue }).forEach(doc => {
    if (i) {
      db.collection.remove({ _id: doc._id });
    }
    i++;
    x += 1;
    if (x % 100 === 0) {
      print(x); // Every time we process 100 docs.
    }
  });
}); 
```

改进基本上是使用文档id进行删除，应该更快，并且还添加了操作的进度，您可以将迭代值更改为您想要的数量。

此外，在操作之前对字段进行索引也会有所帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-09-22T17:08:10.757

我有类似的要求，但我想保留最新的条目。以下查询适用于我的包含数百万条记录和重复项的集合。

```
/** Create a array to store all duplicate records ids*/
var duplicates = [];

/** Start Aggregation pipeline*/
db.collection.aggregate([
  {
    $match: { /** Add any filter here. Add index for filter keys*/
      filterKey: {
        $exists: false
      }
    }
  },
  {
    $sort: { /** Sort it in such a way that you want to retain first element*/
      createdAt: -1
    }
  },
  {
    $group: {
      _id: {
        key1: "$key1", key2:"$key2" /** These are the keys which define the duplicate. Here document with same value for key1 and key2 will be considered duplicate*/
      },
      dups: {
        $push: {
          _id: "$_id"
        }
      },
      count: {
        $sum: 1
      }
    }
  },
  {
    $match: {
      count: {
        "$gt": 1
      }
    }
  }
],
{
  allowDiskUse: true
}).forEach(function(doc){
  doc.dups.shift();
  doc.dups.forEach(function(dupId){
    duplicates.push(dupId._id);
  })
})

/** Delete the duplicates*/
var i,j,temparray,chunk = 100000;
for (i=0,j=duplicates.length; i<j; i+=chunk) {
    temparray = duplicates.slice(i,i+chunk);
    db.collection.bulkWrite([{deleteMany:{"filter":{"_id":{"$in":temparray}}}}])
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-12T16:02:32.680

如果你有足够的内存，你可以在 scala 中做这样的事情：

```
cole.find().groupBy(_.customField).filter(_._2.size>1).map(_._2.tail).flatten.map(_.id)
.foreach(x=>cole.remove({id $eq x}) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-02T18:50:32.123

pip install mongo_remove_duplicate_indexes

1.  创建任何语言的脚本
2.  遍历你的集合
3.  创建新集合并在此集合中创建新索引，并将唯一设置为 true，请记住此索引必须与索引相同您希望从您的原始集合中删除具有相同名称的重复项，因为您有一个集合游戏，并且在此集合你有包含重复的字段流派，你希望删除，所以现在只需创建新集合 db.createCollection("cname") 创建新索引 db.cname.createIndex({'genre':1},unique:1)当您将仅首先插入具有相似类型的文档时，将被接受，其他将因重复密钥错误而被拒绝
4.  现在只需将您收到的 json 格式值插入新集合并使用 ex pymongo.errors.DuplicateKeyError 的异常处理来处理异常

查看 mongo_remove_duplicate_indexes 的包源代码以便更好地理解

# php - 由于哪些原因，我们没有收到来自 Facebook 页面的数据

> ID：13190371
> 
> 赞同：-1
> 
> 时间：2012-11-02T06:24:40.947
> 
> 标签：php, facebook, facebook-graph-api

我有一个 facebook 页面，我正在使用**Graph API**来获取数据。但是我在哪里可以找到我们没有从**facebook**页面收到数据的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:19:45.207

我知道的一个原因是当获取的数据大小超过某个限制时，尽管我不知道该大小限制到底是多少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:03:22.580

Facebook 有多项安全功能来保护人们的信息，让人们控制他们分享的内容，并让开发人员安全地请求访问这些信息。一旦用户授权您的应用程序，您将可以访问用户的数据。用户可以选择删除编辑应用程序权限（从帐户 -> 应用程序设置页面）。

[登录对话框](https://developers.facebook.com/docs/concepts/login/permissions-login-dialog/)

查看此[Facebook 平台政策](https://developers.facebook.com/policy/)

# vbscript - Vbscript Logic Missing - 寻求帮助以读取具有当前日期作为文件中文本的远程文本文件

> ID：13190376
> 
> 赞同：0
> 
> 时间：2012-11-02T06:25:35.370
> 
> 标签：vbscript

我有一个应用程序会自动在日志文件下面写入名称为“CoreAPP.txt”</p>

**“CoreAPP.txt”示例：**

```
[10/31/2012 19:53:41:889 SWAP INF] {hap=CB2:app=Internet Explorer_b1 6.0.3790.3959:tid=22C0:usr=B9D327}
Elapsed time for upload: 0.718 seconds

[10/31/2012 19:53:42:639 SWAP INF] {hap=CB2:app=Internet Explorer_b1 6.0.3790.3959:tid=22C0:usr=V9V327}
Elapsed time for launch: 3.250 seconds

[10/31/2012 19:56:37:815 ???? INF] {tid=4004:usr=V47235}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A

[10/31/2012 19:56:37:846 ???? INF] {tid=4004}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A

[10/31/2012 10:45:00:576 ???? INF] {tid=1650}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A
ElapR
The Application Virtualization Client could not connect to stream URL 'RTSP://SRVW23E:554/V1321_BDP_V1_R1_SB/V1321_BDP_C1_P2PM_SS.sft' (rc 1690900A-00002002, 

original rc 1690900A-00002002).

[10/31/2012 00:29:59:843 OSDF ERR] {tid=1464}
The Application Virtualization Client could not parse the OSD file 'C:\SoftCache\SoftGrid Client\OSD Cache\edCc4305-3f6C-4dcc-3d70-404eb8bd97d8.osd'. 

Reason: XML parsing failure (rc 00000A25-00000002)

[10/31/2012 08:24:35:869 ???? ERR] {tid=336C:usr=t405230}
corrupt cp file detected ('V:\V1321_BDP\osguard.cp'). osguard cp file, NO CORRECTIVE ACTION TAKEN

[10/31/2012 22:16:39:240 JGSW ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58}
The Application Virtualization Client could not connect to stream URL 'RTSP://PSWQAPP1:554/V14678993_BDP_C15_E2AM_SS/V14678993_BDP_C15_E2AM_SS.sft' (rc 

1690900A-00002002, original rc 1690900A-00002002).

[10/31/2012 22:16:39:240 SWAP ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58}
The client was unable to connect to an Application Virtualization Server (rc 1690900A-00002002)

[10/31/2012 22:17:09:163 AMGR ERR] {tid=4F54}
The specified application name (Application Integration) is ambiguous. Some potential matches:
Application Integration 7.0.1756.1756
Application Integration 9.2.2373.2373

[10/31/2012 22:17:09:163 AMGR ERR] {tid=4F54}
The Application Virtualization Client cannot open Application Integration

[10/31/2012 00:03:14:313 SWAP WRN] {tid=507C:usr=N28712}
Could not load OSD file \\PSWQAPP1\Content\D1311_bDP_Adobe_Reader_9.3.3\D1311_bDP_Adobe_Reader 9.3.3.osd

[10/31/2012 00:03:14:313 AMGR INF] {tid=507C:usr=i435145}
The app manager could not create an application from '\\PSWQAPP1\Content\D1311_bDP_Adob_dobe_Reader_9.3.3\D1311_bDP_Adob_b_Adobe Reader 9.3.3.osd' (rc 

0C405664-00000002).

====
[10/31/2012 13:35:16:987 JGSW ERR] {hap=1:app=Abaculus 1.0.0.1:tid=14C8:usr=R3R7DF42}
The Application Virtualization Client could not connect to stream URL 'RTSP:%SFT_SRV

%:554/D1311_bDP_Adob_b_Adobe_Abaculus_15_01/D1311_bDP_Adob_b_Adobe_Abaculus_15_01.sft' (rc 19D02E0A-10000002, original rc 19D02E0A-10000002).

[10/31/2012 13:35:47:998 SWAP ERR] {hap=2:app=AboutPI-SDK 1.3.0.26:tid=1568:usr=I337721}
Could not load app

[10/31/2012 19:56:37:862 SWAP INF] {hap=CB3:app=Adobe Reader X 10.0.1.434:tid=4004:usr=V47235}
Elapsed time for upload: 0.609 seconds

[10/31/2012 19:56:38:393 SWAP INF] {hap=CB3:app=Adobe Reader X 10.0.1.434:tid=4004:usr=V47236}
Elapsed time for launch: 1.187 seconds

[10/31/2012 19:56:57:487 SWAP INF] {hap=CB3:app=Adobe Reader X 10.0.1.434:tid=4004:usr=V47234}
App shut down

[10/31/2012 20:01:40:745 ???? INF] {tid=327C:usr=V42235}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A

[10/31/2012 20:01:40:776 ???? INF] {tid=327C}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A

[10/31/2012 20:01:40:776 SWAP INF] {hap=CB4:app=Adobe Reader X 10.0.1.434:tid=327C:usr=V422357235}
Elapsed time for upload: 0.609 seconds

[11/01/2012 16:48:44:157 SWAP INF] {hap=11A4:app=Lotus Notes_b1 6.5.40.5086:tid=361C:usr=A422353001}
Elapsed time for launch: 5.219 seconds

[11/01/2012 16:50:21:003 ???? INF] {tid=32D8:usr=W8WS83}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A

[11/01/2012 16:50:21:066 ???? INF] {tid=32D8}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A

[11/01/2012 16:50:21:082 SWAP INF] {hap=11A5:app=Adobe Reader X 10.0.1.434:tid=32D8:usr=W8WS83}
Elapsed time for upload: 0.703 seconds

[11/01/2012 16:50:22:503 SWAP INF] {hap=11A5:app=Adobe Reader X 10.0.1.434:tid=32D8:usr=W8WS83}
Elapsed time for launch: 2.218 seconds

[11/01/2012 16:50:50:395 SWAP INF] {hap=11A5:app=Adobe Reader X 10.0.1.434:tid=32D8:usr=A422353001}
App shut down

[11/01/2012 16:53:24:367 ???? INF] {tid=1F80:usr=t405230}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A

[11/01/2012 16:53:24:383 ???? INF] {tid=1F80}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A

[11/01/2012 16:53:24:383 SWAP INF] {hap=11A6:app=Show Desktop 1.0:tid=1F80:usr=A422353001}
Elapsed time for upload: 0.531 seconds

[11/01/2012 16:53:24:727 SWAP INF] {hap=11A7:app=Microsoft Office Excel 2003_b1 11.0.8324.1:tid=251C:usr=V422357235}
Elapsed time for upload: 0.0 seconds

[11/01/2012 16:53:24:758 SWAP INF] {hap=11A6:app=Show Desktop 1.0:tid=1F80:usr=V47234}
Elapsed time for launch: 1.78 seconds

[11/01/2012 16:53:25:117 SWAP INF] {hap=11A6:app=Show Desktop 1.0:tid=1F80:usr=V422357235}
App shut down

[11/01/2012 10:45:00:576 ???? INF] {tid=1650}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A
ElapR
The Application Virtualization Client could not connect to stream URL 'RTSP://SRVW23E:554/V1321_BDP_V1_R1_SB/V1321_BDP_C1_P2PM_SS.sft' (rc 1690900A-00002002, 

original rc 1690900A-00002002).

[11/01/2012 00:29:59:843 OSDF ERR] {tid=1464}
The Application Virtualization Client could not parse the OSD file 'C:\SoftCache\SoftGrid Client\OSD Cache\edCc4305-3f6C-4dcc-3d70-404eb8bd97d8.osd'. Reason: 

XML parsing failure (rc 00000A25-00000002)

[11/01/2012 08:24:35:869 ???? ERR] {tid=336C:usr=t405230}
corrupt cp file detected ('V:\V1321_BDP\osguard.cp'). osguard cp file, NO CORRECTIVE ACTION TAKEN

[11/01/2012 22:16:39:240 JGSW ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58}
The Application Virtualization Client could not connect to stream URL 'RTSP://PSWQAPP1:554/V14678993_BDP_C15_E2AM_SS/V14678993_BDP_C15_E2AM_SS.sft' (rc 

1690900A-00002002, original rc 1690900A-00002002).

[11/01/2012 22:16:39:240 SWAP ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58}
The client was unable to connect to an Application Virtualization Server (rc 1690900A-00002002)

[11/01/2012 22:17:09:163 AMGR ERR] {tid=4F54}
The specified application name (Application Integration) is ambiguous. Some potential matches:
Application Integration 7.0.1756.1756
Application Integration 9.2.2373.2373

[11/01/2012 22:17:09:163 AMGR ERR] {tid=4F54}
The Application Virtualization Client cannot open Application Integration

[11/01/2012 00:03:14:313 SWAP WRN] {tid=507C:usr=N28712}
Could not load OSD file \\PSWQAPP1\Content\D1311_bDP_Adobe_Reader_9.3.3\D1311_bDP_Adobe_Reader 9.3.3.osd

[11/01/2012 00:03:14:313 AMGR INF] {tid=507C:usr=i435145}
The app manager could not create an application from '\\PSWQAPP1\Content\D1311_bDP_Adob_dobe_Reader_9.3.3\D1311_bDP_Adob_b_Adobe Reader 9.3.3.osd' (rc 

0C405664-00000002).

====

[11/01/2012 13:35:16:987 JGSW ERR] {hap=1:app=Abaculus 1.0.0.1:tid=14C8:usr=R3R7DF42}
The Application Virtualization Client could not connect to stream URL 'RTSP:%SFT_SRV

%:554/D1311_bDP_Adob_b_Adobe_Abaculus_15_01/D1311_bDP_Adob_b_Adobe_Abaculus_15_01.sft' (rc 19D02E0A-10000002, original rc 19D02E0A-10000002).

[11/01/2012 13:35:47:998 SWAP ERR] {hap=2:app=AboutPI-SDK 1.3.0.26:tid=1568:usr=I337721}
Could not load app
[11/01/2012 16:53:25:399 SWAP INF] {hap=11A7:app=Microsoft Office Excel 2003_b1 11.0.8324.1:tid=251C:usr=V47234}
Elapsed time for launch: 0.891 seconds

[11/02/2012 10:43:37:527 SWAP INF] {hap=1510:app=Adobe Reader X 10.0.1.434:tid=2AE8:usr=V47234}
App shut down

[11/02/2012 10:44:00:793 SWAP INF] {hap=1511:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=1D80:usr=V422357235}
Elapsed time for upload: 0.0 seconds

[11/02/2012 10:44:03:809 SWAP INF] {hap=1511:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=1D80:usr=V422357235}
Elapsed time for launch: 3.172 seconds

[11/02/2012 10:44:15:965 SWAP INF] {hap=1511:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=1D80:usr=V422357235}
App shut down

[11/02/2012 10:44:20:637 SWAP INF] {hap=1512:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=3B9C:usr=V47234}
Elapsed time for upload: 0.0 seconds

[11/02/2012 10:44:23:606 SWAP INF] {hap=1512:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=3B9C:usr=V47234}
Elapsed time for launch: 3.125 seconds

[11/02/2012 10:44:32:481 SWAP INF] {hap=150B:app=Microsoft Office Excel 2003_b1 11.0.8324.1:tid=19C:usr=V47234}
App shut down

[11/02/2012 10:44:38:575 SWAP INF] {hap=1512:app=Microsoft Office Word 2003_b1 11.0.8324.1:tid=3B9C:usr=E831415}
App shut down

[11/02/2012 10:45:00:560 ???? INF] {tid=1650:usr=V47234}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A

[11/02/2012 10:45:00:576 ???? INF] {tid=1650}
An error occurred while opening the virtual registry (section: 9), rc: 07B01F0C-0000004A
ElapR
The Application Virtualization Client could not connect to stream URL 'RTSP://SRVW23E:554/V1321_BDP_V1_R1_SB/V1321_BDP_C1_P2PM_SS.sft' (rc 1690900A-00002002, 

original rc 1690900A-00002002).

[11/02/2012 00:29:59:843 OSDF ERR] {tid=1464}
The Application Virtualization Client could not parse the OSD file 'C:\SoftCache\SoftGrid Client\OSD Cache\edCc4305-3f6C-4dcc-3d70-404eb8bd97d8.osd'. Reason: 

XML parsing failure (rc 00000A25-00000002)

[11/02/2012 08:24:35:869 ???? ERR] {tid=336C:usr=t405230}
corrupt cp file detected ('V:\V1321_BDP\osguard.cp'). osguard cp file, NO CORRECTIVE ACTION TAKEN

[11/02/2012 22:16:39:240 JGSW ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58}
The Application Virtualization Client could not connect to stream URL 'RTSP://PSWQAPP1:554/V14678993_BDP_C15_E2AM_SS/V14678993_BDP_C15_E2AM_SS.sft' (rc 

1690900A-00002002, original rc 1690900A-00002002).

[11/02/2012 22:16:39:240 SWAP ERR] {hap=1C82:app=bDP c15 E2AM SS 1.0:tid=3D58}
The client was unable to connect to an Application Virtualization Server (rc 1690900A-00002002)

[11/02/2012 22:17:09:163 AMGR ERR] {tid=4F54}
The specified application name (Application Integration) is ambiguous. Some potential matches:
Application Integration 7.0.1756.1756
Application Integration 9.2.2373.2373

[11/02/2012 22:17:09:163 AMGR ERR] {tid=4F54}
The Application Virtualization Client cannot open Application Integration

[11/02/2012 00:03:14:313 SWAP WRN] {tid=507C:usr=N28712}
Could not load OSD file \\PSWQAPP1\Content\D1311_bDP_Adobe_Reader_9.3.3\D1311_bDP_Adobe_Reader 9.3.3.osd

[11/02/2012 00:03:14:313 AMGR INF] {tid=507C:usr=i435145}
The app manager could not create an application from '\\PSWQAPP1\Content\D1311_bDP_Adob_dobe_Reader_9.3.3\D1311_bDP_Adob_b_Adobe Reader 9.3.3.osd' (rc 

0C405664-00000002).

====
[11/02/2012 13:35:16:987 JGSW ERR] {hap=1:app=Abaculus 1.0.0.1:tid=14C8:usr=R3R7DF42}
The Application Virtualization Client could not connect to stream URL 'RTSP:%SFT_SRV

%:554/D1311_bDP_Adob_b_Adobe_Abaculus_15_01/D1311_bDP_Adob_b_Adobe_Abaculus_15_01.sft' (rc 19D02E0A-10000002, original rc 19D02E0A-10000002).

[11/02/2012 13:35:47:998 SWAP ERR] {hap=2:app=AboutPI-SDK 1.3.0.26:tid=1568:usr=I337721}
Could not load app 
```

我希望在我的脚本中放置一个逻辑，以从日志文件中捕获以下文本并输出到带有计算机名称和错误消息的文件。以下是“CoreAPP.txt”文件中的关键错误；如果在当前日期发现任何问题，我需要手动修复。

该脚本的主要目的是如果在“CoreAPP.txt”文件中的**当前日期日志文本中发现以下错误，则报告以下错误。**

> ```
> The Application Virtualization Client could not connect to stream
> XML parsing failure (rc 00000A25-00000002)
> corrupt cp file detected
> The client was unable to connect
> Virtualization Client cannot open Application Integration
> Could not load OSD file 
> ```

**下面是我的脚本：**

```
option Explicit

dim Fso, InFile, out, strComputer, today, strFilePath, InputFile, strLine

Set Fso = CreateObject("Scripting.FileSystemObject")

Set InFile = fso.OpenTextFile("list.txt", ForReading,False,TriStateTrue)

Set out = fso.CreateTextFile("error.log")

 today = Date()

Const ForReading = 1, ForWriting = 2, ForAppending = 3

const TristateUseDefault = -2, TristateTrue = -1, TristateFalse = 0

    Do While Not (InFile.AtEndOfStream)
      strComputer = InFile.ReadLine

      Set fso = CreateObject("Scripting.FileSystemObject")
         strFilePath = "\\" & strComputer & "\d$\LOGFILES\"

     Set InputFile = fso.OpenTextFile(strFilePath & "CoreAPP.txt", ForReading,False,TriStateTrue)
      Do While Not (InputFile.AtEndOfStream)
      strLine = InputFile.ReadLine

     if InStr (strLine, today) = 0 Then ' in the log file if text found with today date then it should read from there and look for any of below 6 texts

        If InStr(strLine, "corrupt cp file detected") > 0 Then

        'Kindly help me to integrate below 6 with in this script
                  '1\. The Application Virtualization Client could not connect to stream
              '2\. XML parsing failure (rc 00000A25-00000002)
              '3\. corrupt cp file detected
              '4\. The client was unable to connect
              '5\. Virtualization Client cannot open Application Integration
              '6\. Could not load OSD file

          out.WriteLine strLine & vbTab & strComputer

        End If
      End If

        Loop
      InputFile.close

    Loop

    out.Close
    InFile.Close 
```

上面的脚本将从 list.txt 文件中读取计算机信息。

**list.txt 示例**

```
Server1
server2
server3 
```

*CoreAPP.txt 文件将在上面的（list.txt）服务器上。路径是 D:\ LOGFILES \CoreAPP.txt*

当前脚本的问题是，脚本查找整个文件，而不是当前日期（今天是 2012 年 11 月 2 日，但我的脚本检查并给出了 11/1/2012 和 10/31/2012 的输出）。我的意思是脚本编写输出时不考虑日期检查，生成的输出带有错误日志中的过去日期和当前日期文本。

寻求帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:19:58.903

您的`instr`函数始终返回 0（因此条件变为真），因为您测试`date()`的格式`10-31-2012`为 [10/31/2012 08:24:35:869 ???? 呃]。

增强功能：

1.  您需要正确的日期格式
2.  您需要测试 <> 0

我建议从 dotnet stringbuilder 中捕获和格式化日期，例如

```
today = createobject("System.Text.StringBuilder").AppendFormat("[{0:dd/MM/yyyy} ", Date()).ToString() 
```

这将自动在字符串前面加上`[`一个空格。现在您可以通过正确使用 instr 来测试字符串是否包含今天的日期。由于字符串是从第一个字符中找到的，我会像这样测试它：

```
If InStr (strLine, today) = 1 Then 
```

# c++ - 最短路径算法

> ID：13190379
> 
> 赞同：-1
> 
> 时间：2012-11-02T06:25:59.410
> 
> 标签：c++

早上好。..我做了一个程序来解决dijkstra最短算法。. 代码如下：-

```
#include<iostream.h>
#include<stdio.h>
#include<conio.h>
#define INFINITY 2000
#define MAXNODES 4
#define MEMBER 1
#define NONMEMBER 0
    } 
```

我给输入字符串为 0 2 3 7 2 0 6 0 3 6 0 1 7 0 1 0

但是当我选择起始节点和最终节点时，它会给出错误的输出。. 我不知道它在哪里。. 请帮忙。.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:38:39.577

最明显的错误是在 C++ 中，您**从零开始**计算数组。

所以

```
int weight[MAXNODES][MAXNODES],precede[MAXNODES],pd;
cout<<"Enter Weight Matrix :- \n ";
for(i=1;i<=MAXNODES;i++)
{
    for(j=1;j<=MAXNODES;j++)
    {
        cout<<"["<<i<<"]["<<j<<"] :- ";
        cin>>weight[i][j];
    }
} 
```

应该

```
int weight[MAXNODES][MAXNODES],precede[MAXNODES],pd;
cout<<"Enter Weight Matrix :- \n ";
for(i=0;i<MAXNODES;i++)
{
    for(j=0;j<MAXNODES;j++)
    {
        cout<<"["<<i<<"]["<<j<<"] :- ";
        cin>>weight[i][j];
    }
} 
```

所有其他循环都相同。

# php - PHP日期比较以查找时间戳日期1970之前的生日？

> ID：13190383
> 
> 赞同：1
> 
> 时间：2012-11-02T06:26:36.090
> 
> 标签：php, codeigniter, date

我创建了函数来生成前一周、今天和一周后生日的成员列表。功能是

```
$m= date("m"); // Month value
        $de= date("d"); //today's date
        $y= date("Y"); // Year value

for($i=0;$i<count($members);$i++){
            $m_bday = strtotime($members[$i]->dob);
            $bday_date = date('d',$m_bday);
            $bday_month = date('m',$m_bday);
            $bday = strtotime(date('Y-m-d',mktime(0,0,0,$bday_month,$bday_date,$y)));
            //echo $bday_date."</br>".$bday_month."</br>".$members[$i]->dob."</br>".date('Y-m-d',$bday);exit;
            $week_before = strtotime(date('Y-m-d', mktime(0,0,0,$m,($de-7),$y)));
            $week_after = strtotime(date('Y-m-d', mktime(0,0,0,$m,($de+7),$y)));

            if(date('d-m') == date('d-m',$bday)){
                $this->present_bday[] = array('mem_name'=> $members[$i]->name);
            }
            else if(date('d-m',$week_before) <= date('d-m',$bday) && date('d-m',$bday) < date('d-m')){
                $this->past_bday[] = array('mem_name' => $members[$i]->name);
            }
            else if(date('d-m')< date('d-m',$bday) && date('d-m',$bday) <= date('d-m',$week_after)){
                $this->future_bday[] = array('mem_name' => $members[$i]->name);
            }
        } 
```

从 db 返回的日期格式是`yyyy-mm-dd`ie `1960-06-12`。此代码在之前和今天的 1 周内正常工作，但如果年份低于 1970 年和条件完全失败后的 1 周，则在返回后 1 周工作。

任何人都可以为我提供正确的日期操作以获得正确的结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:32:02.327

我认为您的麻烦是因为`strtotime`从 UNIX 纪元返回秒数，实际上是 1970 年。我最好直接在数据库中比较日期：`SELECT ADDDATE('2008-01-02', INTERVAL 1 WEEK);`或`SELECT SUBDATE('2008-01-02', INTERVAL 1 WEEK);`

你也可以这样做：

```
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
if((integer) $interval->format('%R%a') > 7) // More than week 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:40:24.133

试试这个：

```
 <?php
$m= date("m"); // Month value
        $de= date("d"); //today's date
        $y= date("Y"); // Year value

for($i=0;$i<count($members);$i++){

            $mem_bod_explode=explode("-",$members[$i]->dob);
            $m_bday = mktime(0,0,0,$mem_bod_explode[1],$mem_bod_explode[2],$y);
            //$bday_date = date('d',$m_bday);
            //$bday_month = date('m',$m_bday);
            //$bday = $m_bday;
            //echo $bday_date."</br>".$bday_month."</br>".$members[$i]->dob."</br>".date('Y-m-d',$bday);exit;

            $week_before = mktime(0,0,0,$mem_bod_explode[1],$mem_bod_explode[2]-7,$y);
            $week_after = mktime(0,0,0,$mem_bod_explode[1],$mem_bod_explode[2]+7,$y);

           echo  date('Y-m-d',$week_before);
           echo"<br>";
           echo  date('Y-m-d',$week_after);
           echo"<br>";
           echo date('Y-m-d');

            if(date('Y-m-d') == date('Y-m-d',$m_bday)){
                $present_bday[] = array('mem_name'=> $members[$i]->name);
            }
            else if(date('Y-m-d',$m_bday)<date('Y-m-d') && date('Y-m-d',$m_bday)>=date('Y-m-d',$week_before)){
                $past_bday[] = array('mem_name'=> $members[$i]->name);
            }

            else if(date('Y-m-d',$m_bday)>date('Y-m-d') && date('Y-m-d',$m_bday)<=date('Y-m-d',$week_after)){
                $future_bday[] = array('mem_name'=> $members[$i]->name);
            }

        }

        ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:53:25.623

试试这个代码。希望这会对你有所帮助。

```
$m= date("m"); // Month value
        $de= date("d"); //today's date
        $y= date("Y"); // Year value

for($i=0;$i<count($members);$i++){

            $mem_bod_explode=explode("-",$members[$i]->dob);
            $m_bday = mktime(0,0,0,$mem_bod_explode[1],$mem_bod_explode[2],$mem_bod_explode[0]);
            $bday_date = date('d',$m_bday);
            $bday_month = date('m',$m_bday);
            $bday = $m_bday;
            //echo $bday_date."</br>".$bday_month."</br>".$members[$i]->dob."</br>".date('Y-m-d',$bday);exit;
            $week_before = mktime(0,0,0,$mem_bod_explode[1],$mem_bod_explode[2]-7,$mem_bod_explode[0]);
            $week_after = mktime(0,0,0,$mem_bod_explode[1],$mem_bod_explode[2]+7,$mem_bod_explode[0]);

            if(date('d-m') == date('d-m',$bday)){
                $this->present_bday[] = array('mem_name'=> $members[$i]->name);
            }
            else if(date('d-m',$week_before) <= date('d-m',$bday) && date('d-m',$bday) < date('d-m')){
                $this->past_bday[] = array('mem_name' => $members[$i]->name);
            }
            else if(date('d-m')< date('d-m',$bday) && date('d-m',$bday) <= date('d-m',$week_after)){
                $this->future_bday[] = array('mem_name' => $members[$i]->name);
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T10:08:52.007

我比较了数据库查询中的日期本身想出了这样的事情

```
$res = $this->db->query("SELECT * FROM members WHERE DAYOFYEAR(curdate()) - 7 <= dayofyear(dob) AND DAYOFYEAR(curdate()) +7 >= dayofyear(dob);")->result();
$weekbfr_mem = $this->db->query("SELECT * FROM members WHERE DAYOFYEAR(curdate()) - 7 <= dayofyear(dob) AND dayofyear(dob) < DAYOFYEAR(curdate());")->result();
$bday_mem = $this->db->query("SELECT * FROM members WHERE DAYOFYEAR(curdate()) = dayofyear(dob);")->result();
$weekafter_mem = $this->db->query("SELECT * FROM members WHERE DAYOFYEAR(curdate()) < dayofyear(dob) AND dayofyear(dob) <= DAYOFYEAR(curdate()+7);")->result(); 
```

主要的缺点是我必须进行 3 次查询才能为 project.so 提供缓慢的服务。所以关于在 php 函数本身中做的任何想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T10:37:18.887

```
Try the below code for testing:
I have putted date 1983-10-30 and its showing in Past.

<?php
    $m= date("m"); // Month value
            $de= date("d"); //today's date
            $y= date("Y"); // Year value

    for($i=0;$i<1;$i++){

                $mem_bod_explode=explode("-","1983-10-30");
                $m_bday = mktime(0,0,0,$mem_bod_explode[1],$mem_bod_explode[2],$y);
                //$bday_date = date('d',$m_bday);
                //$bday_month = date('m',$m_bday);
                //$bday = $m_bday;
                //echo $bday_date."</br>".$bday_month."</br>".$members[$i]->dob."</br>".date('Y-m-d',$bday);exit;

                $week_before = mktime(0,0,0,$mem_bod_explode[1],$mem_bod_explode[2]-7,$y);
                $week_after = mktime(0,0,0,$mem_bod_explode[1],$mem_bod_explode[2]+7,$y);

               echo  date('Y-m-d',$week_before);
               echo"<br>";
               echo  date('Y-m-d',$week_after);
               echo"<br>";
               echo date('Y-m-d');

                if(date('Y-m-d') == date('Y-m-d',$m_bday)){
                    $present_bday[] = array('mem_name'=> "fgfg");
                }
                else if(date('Y-m-d',$m_bday)<date('Y-m-d') && date('Y-m-d',$m_bday)>=date('Y-m-d',$week_before)){
                    $past_bday[] = array('mem_name' => "gfgfg");
                }

                else if(date('Y-m-d',$m_bday)>date('Y-m-d') && date('Y-m-d',$m_bday)<=date('Y-m-d',$week_after)){
                    $future_bday[] = array($members[$i]->name);
                }

            }
            echo"<br>";
         echo"Past Birthday:<br>";   
         print_r($past_bday);
         echo"<br>";

         echo"Present Birthday:<br>";   
         print_r($present_bday);
         echo"<br>";

         echo"Future Birthday:<br>";   
         print_r($future_bday);
         echo"<br>";

            ?> 
```

# c++ - 如何拦截 Sendmessage API

> ID：13190390
> 
> 赞同：0
> 
> 时间：2012-11-02T06:27:02.793
> 
> 标签：c++, winapi, hook, window-messages

我需要拦截 SendMessage API 以防止有人通过发送 WM_GETTEXT 从特定窗口获取文本。所以请建议我如何做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:13:00.420

最简单的解决方案是简单地将目标的窗口过程子类化`HWND`并丢弃`WM_GETTEXT`您自己不调用的任何消息。

# python - 如何将列表绑定到 SQLAlchemy 中自定义查询中的参数？

> ID：13190392
> 
> 赞同：47
> 
> 时间：2012-11-02T06:27:11.360
> 
> 标签：python, sqlalchemy

出于性能原因，我使用此 SQL：

```
 sql_tmpl = """delete from Data where id_data in (:iddata) """
 params = {
                    'iddata':[1, 2,3 4],
                    }

 # 'session' is a session object from SQLAlchemy
 self.session.execute(text(sql_tmpl), params) 
```

但是，我遇到了一个例外：

```
NotSupportedError: (NotSupportedError) ('Python type list not supported.  param=1', 'HY097') 
```

是否有一种解决方法可以让我将列表绑定到“in”子句的参数？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2019-05-30T17:20:54.493

一种适用于任何数据库（不仅依赖于 psycopg2 的类型适应）的新方法使用扩展绑定参数：

```
sql_tmpl = """delete from Data where id_data in :iddata"""
params = { 'iddata': [1, 2, 3, 4], }
# session is a session object from sqlalchemy
t = text(sql_tmpl)
t = t.bindparams(bindparam('iddata', expanding=True))
self.session.execute(t, params) 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-09-09T14:45:22.200

`psycopg2`现在支持[类型适配](http://initd.org/psycopg/docs/usage.html#python-types-adaptation)，除其他外，它允许将列表传递到查询中的单个参数化值中。这也适用于 SQLAlchemy，至少对于对 PostgreSQL 数据库的原始 SQL 式查询（我无权访问其他数据库类型，所以我不知道是否`sqlalchemy`会尊重其他数据库的这种约定，但我的需要的倾向^(引用)是它会起作用）。

```
some_ids = [1, 2, 3, 4]
query = "SELECT * FROM my_table t WHERE t.id = ANY(:ids);"
conn.execute(sqlalchemy.text(query), ids=some_ids)
## runs just fine 
```

我发现如果没有对 的包装器调用`sqlalchemy.text`，它会给出一个`ProgrammingError: syntax error at or near ":"`.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-15T07:50:36.123

试试不带括号的，`:iddata`. 这一直对我有用。

```
sql_tmpl = """delete from Data where id_data in :iddata """ 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-02T10:04:10.197

据我所知，没有一个 SQL 引擎允许传入数组参数。SQLAlchemy 处理此问题的方式是为数组中的每个项目传入一个参数。

```
>>> from sqlalchemy.sql import table, column
>>> print(table('Data').delete(column('id_data').in_([5, 6, 7,])))
DELETE FROM "Data" WHERE id_data IN (:id_data_1, :id_data_2, :id_data_3) 
```

如果您不使用 SQLAlchemy 表达式构造，则需要手动执行此操作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-04T03:25:49.610

添加到[dwanderson 的答案](https://stackoverflow.com/questions/13190392/how-can-i-bind-a-list-to-a-parameter-in-a-custom-query-in-sqlalchemy/39414254#39414254)：使用 SQLAlchemy，您可以使用[func](http://docs.sqlalchemy.org/en/latest/core/sqlelement.html#sqlalchemy.sql.expression.func)方法将“任何”函数添加到查询中。这适用于我使用 SQLAlchemy 1.0.9 和 PostgreSQL 数据库。

通用示例：

```
from sqlalchemy import func

# some list
id_list = [1, 2, 3]

# assuming you have created a session
query = session.query(Table.user_name, Table.user_id).\
    filter(Table.user_id == func.any(id_list))

# one way of running the query
query.all() 
```

您可以验证列表是否作为单个参数传递（而不是列表中每个对象的参数）。

```
print(query.statement) 
```

> SELECT user_id, user_name FROM table WHERE table.user_id = any(:any_1)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-07-26T18:40:54.257

使用元组而不是列表，并且查询中的参数不需要括号：

```
sql_tmpl = "delete from Data where id_data in :iddata"
params = {  
   'iddata':(1, 2, 3, 4),
}
self.session.execute(text(sql_tmpl), params) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-06T18:56:32.083

您可以使用循环生成 where 子句并使用 ** 来拆分 query.execute 参数中的列表。这是一个例子：[https ://gist.github.com/pawl/555e5eecce77d4de0ada](https://gist.github.com/pawl/555e5eecce77d4de0ada)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-10T16:07:22.157

在 Microsoft SQL Server 中，您可以使用表值参数来完成同样的事情。

```
SELECT * FROM table_name WHERE customer_id in (SELECT * FROM @MyTVP) 
```

TVP 目前仅支持[PyTDS](https://python-tds.readthedocs.io/en/latest/)，不支持 PyODBC。如果您有较新版本的 SQLAlchemy [，Jason Damiani 详细介绍](https://stackoverflow.com/questions/13190392/how-can-i-bind-a-list-to-a-parameter-in-a-custom-query-in-sqlalchemy/56382828#56382828)的`expanding=True`标志可能是最好的方法。但TVP会在紧要关头做。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2021-10-06T07:51:03.837

如果您正在处理原始 SQL，则可以使用以下方法：

```
ids = [1000032, 1000048]
sql = 'SELECT CompNo, CompName, CompType FROM Component WHERE DeptID IN %(ids)s' % {"ids": tuple(ids)}
cursor.execute(sql) 
```

# wpf - WPF中Datagrid单元格的自定义样式

> ID：13190394
> 
> 赞同：0
> 
> 时间：2012-11-02T06:27:16.650
> 
> 标签：wpf, styling, datagridcell

我有 WPF Datagrid，它有 4 x 4 这样的矩阵

```
 | A B C D
------------
1 | 6 8 9 0
2 | 3 5 8 3 
3 | 7 4 3 7  
4 | 2 1 5 8 
```

我们有 4 行和 4 列。现在我想在数据网格单元格上应用自定义样式。目前我能够在列级别或网格级别应用样式。但我希望它在细胞水平上。如果我想用 Style1 制作 A1 单元格，用 Style2 制作 A2 单元格，用 Style6 制作 D3 单元格等。

其中 ABCD 是列和 1|2|3|4| 是行号。

如何在运行时在数据网格单元格上删除和应用样式？

# cakephp - cakephp 2.0 与贝宝的集成

> ID：13190395
> 
> 赞同：2
> 
> 时间：2012-11-02T06:27:19.850
> 
> 标签：cakephp, paypal

大家好，我是贝宝的新手，但现在是 cakephp 的基础知识，现在我正在与 cakephp 进行贝宝集成，但无法将值传递给贝宝。我给你看我的代码。如果我做错了什么，请告诉我。

```
function paypal()
{
  if($this->request->is('post'))
  {
      echo $item_name_1=$this->request->data['Choose']['item_name_1'];
      echo"<br>";
      echo $amount_1=$this->request->data['Choose']['amount_1'];echo"<br>";
      echo $item_name_2=$this->request->data['Choose']['item_name_2'];echo"<br>";
      echo $amount_2=$this->request->data['Choose']['amount_2'];echo"<br>";
      echo $cmd=$this->request->data['Choose']['cmd'];echo"<br>";
      echo $business=$this->request->data['Choose']['business'];echo"<br>";
      echo $upload=$this->request->data['Choose']['upload'];echo"<br>";
      echo $currency_code=$this->request->data['Choose']['currency_code'];echo"<br>";
      echo $item_number_1=$this->request->data['Choose']['item_number_1'];echo"<br>";
      echo $item_number_2=$this->request->data['Choose']['item_number_2'];echo"<br>";
      $this->redirect('https://www.paypal.com/cgi-bin/webscr?cmd='.$cmd.'&upload='.$upload.'&business='.$business.
                      '&currency_code='.$currency_code.'&item_number_1='.$item_number_1.'&item_name_1='.$item_name_1.
                      '&'.'amount_1='.$amount_1.'&item_number_2='.$item_number_2.'&item_name_2='.$item_name_2.'&'.'amount_2='.$amount_2);

   }
} 
```

我将所有视图值（包括隐藏字段）传递给我的控制器（所有值都正确显示）并将其重定向到贝宝网站。在这里我发送多个值，但我收到这样的错误：

```
This recipient is currently unable to receive money. 
```

如果我在 corephp 中编写相同的代码，那么值会到达贝宝并且一切正常，请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T18:54:28.573

首先，您应该在 Controller 中准备代码：

```
function paypal(){
   $this->set('paypalData', $this->request->data['Choose']);
} 
```

...然后创建一个发布到 PayPal 网站的**表单（在视图中）：**

```
//file: Views/ControllerName/paypal.ctp
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="<?php echo $paypalData['business']; ?>">
<input type="hidden" name="amount" value="<?php echo $paypalData['business']; ?>">
<input type="hidden" name="item_name_1" value="<?php echo $paypalData['item_name_1']; ?>">
<input type="hidden" name="item_number_1" value="<?php echo $paypalData['item_number_1']; ?>">
<input type="hidden" name="amount_1" value="<?php echo $paypalData['amount_1']; ?>">
<input type="hidden" name="currency_code" value="<?php echo $paypalData['currency_code']; ?>">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

然后，用户将单击按钮转到更可靠的 PayPal（并且正确：D）。您重定向到的 url 可能会以多种方式失败，因为您的值不是 url_encoded，可能会变得太长等。

第二：您的错误可能会弹出，因为您使用的是**www.paypal.com**而不是**www.sandbox.paypal.com**

第三：我复制了上面的 HTML 以方便查看，您应该在视图中使用 Form 帮助程序以确保正确的 HTML 格式。

第四：在控制器动作中回显是错误的。尤其如此，如果您在输出后进行重定向。如果将任何输出发送到浏览器，重定向将不起作用。

希望这能让你朝着正确的方向前进。

# oracle - Oracle sqlplus 日志记录停止

> ID：13190397
> 
> 赞同：0
> 
> 时间：2012-11-02T06:27:39.863
> 
> 标签：oracle, sqlplus, logfiles

这很奇怪...

我在 sqlplus 中运行一个脚本。它似乎已经完成了它的功能，但是当我查看 .log 时，它似乎已经停止记录......还有其他人有过这种经历吗？

我想我可能在脚本运行检查进程时的某个阶段打开了日志文件，也许这是不行的？

编辑的细节是：

```
set serveroutput on;
set feedback off;
set echo on;
spool 4logfilethatstops.log

BEGIN

/*-----------------------------------------*/
/* Establishing AUID on dmt_identifier table*/
update DMT_CUSTOMER_ID
set auid=CUSTOMER_ID
where CUSTOMER_ID_ZONE_OFFICE = '&&var_DM_ID_ZONE_OFFICEority'
and batch_id = '&&var_batchid';

/*-----------------------------------------*/
/*Copying DM_ID to all tables*/

update dmt_ a 
set DM_ID= (select CUSTOMER_ID from DMT_CUSTOMER_ID b 
            where b.PRI_CLT_RECORD_ID=a.PRI_CLT_RECORD_ID 
            and b.batch_id = '&&var_batchid'
            and b.CUSTOMER_ID_ZONE_OFFICE = '&&var_DM_ID_ZONE_OFFICEority'
            and b.CUSTOMER_ID_major_flag = 'Y'
            and b.CUSTOMER_ID_type_code = '004')
where a.batch_id = '&&var_batchid'; 
```

[还有10个类似的陈述]

```
/*-----------------------------------------*/
/*Exclude records with no DM_IDs*/

update dmt_address c
            set c.batch_id = c.batch_id||'-EXCLUDE'
            where c.batch_id = '&&var_batchid'
            and c.pri_clt_record_id in 
            (SELECT pri_clt_record_id FROM dmt_ 
             where DM_ID is NULL ); 
```

[还有10个类似的陈述]

```
/*-----------------------------------------*/
/*Exclude merged records from dmt_ tables*/

update dmt_ c
            set batch_id = batch_id||'-EXCLUDE'
            where batch_id not like '%EXCLUDE%'
            and c.pri_clt_record_id in
            (select b.pri_clt_record_id from dmt_ a , dmt_ b
            where a.container_sequence_number = b.container_sequence_number
            and b.rpl_pri_clt_record_id = a.pri_clt_record_id 
            and a.rpl_pri_clt_record_id is null); 
```

[还有1个类似的说法]

```
/*--------------------------------------------------------*/
/*Exclude dmt_insurance records from dmt_ that are not MRA*/

update dmt_insurance
set batch_id = batch_id||'-EXCLUDE'
where batch_id not like '%EXCLUDE%'
and client_insurance_record_id not like 'MRA-%';

/*-----------------------------------------------------*/
/*Populate dmt_demog with dmt_profile data*/

update dmt_staticdemographics a 
set MSTATUS=(select CLIENT_ATTRIBUTE_CODE 
            from dmt_profile 
            where CLIENT_ATTRIBUTE_TYPE_CODE = 02
            and batch_id = '&&var_batchid'
            and PRI_CLT_RECORD_ID=a.PRI_CLT_RECORD_ID); 
```

[另外4个类似的陈述]

```
 /*--------------------*/
/*Populate DM_* tables*/
/*----------------*/
/*inserting person*/

insert into dm_person 
            (CUSTOMER_ID, DOB,DOB_EST,SEX,
            CREATED_DATE,LAST_UPDATE_DATE, batch_id)
select DM_ID, DATE_OF_BIRTH,DATE_OF_BIRTH_ESTIMATION_FLAG,
            SEX_CODE,MSTATUS,INDIGENOUS,RELIGION,LANGUAGE
            from dmt_staticdemographics
            where DM_ID is not null
            and  batch_id = '&&var_batchid'; 
```

[另外3个类似的陈述]

```
/*----------------------------------------------------------------------------------*/
-- inserting external identifiers
insert into DM_IDENTIFIER
  (CUSTOMER_ID,IDENTIFIER_START_DATE,IDENTIFIER_END_DATE,IDENTIFIER_TYPE,ID_VALUE,CREATED_DATE,LAST_UPDATE_DATE, BATCH_ID, ZONE_OFFICEority)
select DM_ID,effective_start_date,effective_end_date, ext_clt_id_type_code, EXT_CLT_ID,SOURCE_CREATE_DATETIME, SOURCE_MODIFIED_DATETIME, 
            BATCH_ID, ext_clt_id_ZONE_OFFICE
from dmt_extidentifier
            where DM_ID is not null
            and batch_id = '&&var_batchid'; 
```

[另外4个类似的陈述]

```
 COMMIT;
END;
/ 
```

# ios - Iphone - 发生事件时从服务器通知客户端

> ID：13190398
> 
> 赞同：1
> 
> 时间：2012-11-02T06:27:41.643
> 
> 标签：ios, xmpp

我陷入了困境

**情况：**我有一种情况，我回答了一些问题并根据回答的问题获得积分。如果我的积分变为 10，我会使用 QRCode 赢得一些礼物。**（用户会生成一个二维码，当从其他具有扫描仪应用程序或任何其他扫描仪的设备扫描二维码时，它会提供指向该在线商店的链接。可以从任何浏览器打开此链接。 )**通过扫描 QRCode 可以从某个在线商店访问礼物，该 QRCode 提供了一个带有一些唯一 ID 的在线商店的链接，当礼物被访问/拿走时，服务器会收到通知，礼物是从该在线礼品商店访问/拿走的，并且QRCode 状态在服务器数据库上更新为无效。现在，一旦服务器收到礼物被访问/拿走的通知，服务器应该立即通知我的 iphone 应用程序收到了礼物，这样我就可以立即显示另一个祝贺图片或其他东西。

**可能的解决方案：**我想到了一种可能的解决方案，其中我每隔 60 秒检查一次服务器上的 qrcode 访问状态更改并相应地显示图像。我不知道这种方式有多有效/正确。

**问题：**但在我求助于上述解决方案之前，我想知道，如果我的应用程序没有尝试从服务器调用或获取更新，这个通知是否可以从服务器发生？我的意思是，我的应用程序只有在服务器以 msg 或一些 xml 或其他东西的形式发送通知后才会出现。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:41:03.167

您可以尝试检查[Push Notifications](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)。但是在服务器端确定是否在客户端收到通知是不可能的（如果你不会自己实现它，但你可能不会涵盖所有可能的情况，比如当你的应用程序没有启动并且通知来了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:52:51.057

您可以使用打开与服务器的连接`CFReadStream`，将流添加到运行循环并设置回调函数。每当服务器将数据写入打开的连接时，您的回调将触发，然后您可以从流中读取以获取服务器发送的数据

更多信息在这里：[https ://developer.apple.com/library/mac/#documentation/Networking/Conceptual/CFNetwork/CFStreamTasks/CFStreamTasks.html](https://developer.apple.com/library/mac/#documentation/Networking/Conceptual/CFNetwork/CFStreamTasks/CFStreamTasks.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T05:02:47.813

您可以尝试使用 XMPP 协议，该协议最常用于聊天/邮件，其中将服务器中的更改通知给客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T07:42:19.843

Apple Push Notification Service 旨在解决这些类型的情况。

希望它有所帮助：Apple Docs：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9)

有一个很好的教程：[http ://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

视频教程：[http ://www.youtube.com/watch?v=cKV5csbueHA&feature=relmfu](http://www.youtube.com/watch?v=cKV5csbueHA&feature=relmfu)

# apache - Apache重写规则用连字符替换下划线并在末尾附加扩展名

> ID：13190407
> 
> 赞同：0
> 
> 时间：2012-11-02T06:28:43.963
> 
> 标签：apache, mod-rewrite

我需要帮助来创建 apache 重写规则。我的要求如下。

源 URL：“http://localhost/directory/file_name_1”

目标网址：“http://localhost/file-name-1.html”

注意：上述要求不适用于静态 URL，但可以用任何其他词代替“目录”和“文件名_1”。

*   应在新的重定向 URL 中删除“目录”字样
*   下划线 (_) 应替换为连字符 (-)
*   “file-name-1”应以 .html 扩展名结尾。

我很感激你的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:33:38.193

试试这个

```
RewriteEngine On
RewriteRule ^(/?.*/[^/]*?)_([^/]*?_[^/]*)$ $1-$2 [N]
RewriteRule ^(/?.*/[^/]*?)_([^/_]*)$ $1-$2 [R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:01:32.423

我使用了以下规则，现在它正在工作。

```
 RewriteEngine    On
    RewriteCond     %{REQUEST_URI}  !^/([A-Za-z0-9]+)/([A-Za-z0-9_]+)$
    RewriteRule     .*    - [S=3]
    RewriteRule     ^(/?.*/[^/]*?)_([^/]*?_[^/]*)$ $1-$2 [N]
    RewriteRule     ^(/?.*/[^/]*?)_([^/_]*)$ $1-$2.html  [NC]
    RewriteRule     ^/(.*)/(.*)$        $2               [R,L] 
```

# ruby-on-rails-3.2 - 如何在 Active Admin + Rails 3 中添加时间选择器

> ID：13190411
> 
> 赞同：18
> 
> 时间：2012-11-02T06:29:07.227
> 
> 标签：ruby-on-rails-3.2, activeadmin

我需要在我的活动管理表单中显示时间选择器。我有一个类型为时间的字段 start_time。目前我有下拉菜单。

![在此处输入图像描述](../Images/6794bb56756b32ce1039e21fead40a5c.png)

我需要一个类似于日期选择器的选择器，如图所示

![在此处输入图像描述](../Images/9b4fbeacc6cc3b54898489e03aaa8f78.png)

为了添加我使用的日期选择器

> f.input :start_date, :as => :datepicker

```
ActiveAdmin.register PromoCode do

  form :html => { :enctype => "multipart/form-data" } do |f|  
    f.inputs "PromoCodes" do
    f.input :promo_code
    f.input :start_date, :as => :datepicker
    f.input :start_time
  end
  f.buttons
 end 
```

结尾

是否有类似的方法可以在活动管理员中获取时间选择器。请帮忙。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-02T06:56:13.187

虽然`datepicker`会显示一个日历来选择日期形式，但我不知道时间选择器是如何工作的！它应该显示一个时钟:)？

但是，formtastic 中还有另一个选择器（由 activeadmin 使用）。那就是`time_picker`。所以你使用它如下：

```
f.input :start_time, :as => :time_picker 
```

更多内容在[文档中](http://rdoc.info/github/justinfrench/formtastic/Formtastic/Inputs/TimePickerInput)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T22:36:53.800

有关于使用日期时间选择器的 wiki 页面[https://github.com/activeadmin/activeadmin/wiki/Combine-datetime-picker-with-activeadmin](https://github.com/activeadmin/activeadmin/wiki/Combine-datetime-picker-with-activeadmin)

这是关于 jquery timepicker 插件的集成[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

rubygem [https://github.com/activeadmin-plugins/activeadmin_datetimepicker](https://github.com/activeadmin-plugins/activeadmin_datetimepicker)

# pdf - 修改pdf文件以每页有多张幻灯片

> ID：13190417
> 
> 赞同：5
> 
> 时间：2012-11-02T06:29:44.943
> 
> 标签：pdf

我有一个 pdf 文件，里面有 100 张幻灯片。我想将它发送给我的 IT 部门进行打印输出（6 张幻灯片 - 双面横向 A4）。

然而，他们很挑剔，总是抱怨他们没有时间做这一切，而且总是会打印错误。

有没有一种方法可以在新的每一页上使用旧 pdf 的 6 张幻灯片从中创建一个新的 pdf，所以我的 IT 唯一需要做的就是打印它？

我有 PDF-xchange 的专业版。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T06:36:10.997

如果我在 adobe 中打开它并选择打印，我有一个显示“每页份数”的字段，我可以将其设置为 1 到 16 之间的任何完美正方形。

![例子](../Images/c9d1556ffeeaaec9c0af1b3fdd55ea99.png)

您始终可以打印到 pdf，而不是打印机 :-)

# php - 什么属性拥有 jquery droppable 的值

> ID：13190419
> 
> 赞同：0
> 
> 时间：2012-11-02T06:30:01.520
> 
> 标签：php, javascript, jquery, css

我正在尝试使用可放置/可拖动的功能创建一个功能，如果两个可放置的 div 都有一个元素在某些事情发生时被丢弃。

```
var dropbox = $('#dropbox').val();
        var dropbox1 = $('#dropbox1').val();
    if(dropbox && dropbox1 != ''){
        $.post("account_main.php", 
          {data: $(this).text()}, 
          function(data) {
               alert("Works.");
          });       
        } 
```

如[这里](http://jsfiddle.net/Kxtvg/176/)所见，没有任何反应，也没有错误。我想解释一下为什么这不起作用，并且也很高兴了解什么会起作用。任何随机提示也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:00:21.813

使用[.html()](http://api.jquery.com/html/)而不是[.val()](http://api.jquery.com/val/)来获取保管箱的内容。. `val()`用于获取表单元素的值。

# jquery - jquery验证码响应没有反应

> ID：13190421
> 
> 赞同：1
> 
> 时间：2012-11-02T06:30:14.947
> 
> 标签：jquery, response, captcha

嗨，我在使用验证码从响应中获取信息时遇到了一个小问题。

这是我的“注册脚本，这很好用。

```
$("#submit_button").click(function()
    {
    // refresh captcha

    if($("#register").valid())
    {       

    $.post("/js/captcha/post.php",$("#register").serialize(),function(response){

    if(response == 1)
            {
            alert("Yep its correct.");
            $("#register").submit();
            //$("#after_submit").html('');
            }
        else
            {
            alert("sorry not correct");         
            change_captcha();
            $("#after_submit").html('');
            }

            });
            // END CHECK CAPTCHA IF OKE GO TO SUBMIT
        }
    }); 
```

但是当我打电话给它时，`post.php` 它有以下信息：

```
<?php
    session_start();

    if(($_REQUEST['code'] == $_SESSION['random_number']) || @strtolower($_REQUEST['code']) == strtolower($_SESSION['random_number']) )
    {
        //echo 1; // submitted 
        echo " Beveiligingscode is correct";

        // Hier include het plaatsen van alle content in de database en dan terug en oke formulier leegmaken.
    }
    else
    {
        echo 0; // invalid code
        echo " Foute beveiligingscode";

    }
    ?> 
```

我确实回到了注册脚本，但（响应）始终为 0。

希望有人能帮忙。

如果您喜欢生活演示，请检查[此](http://www.betav3.gitaartabs.nl/aanmelden.html)。

（当我使用英文脚本时，我也遇到了一个奇怪的问题，`button_submit`它不再起作用了）。

# iphone - 动态改变 UITable 单元格高度？

> ID：13190425
> 
> 赞同：3
> 
> 时间：2012-11-02T06:30:35.020
> 
> 标签：iphone, ios, ipad, ios-simulator

我需要根据内容大小/长度调整单元格高度。尝试了几种方法，哪一种给出了准确的高度而不重叠？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:37:15.767

请参阅本教程以`UITableViewCell`动态更改高度..

[调整 A-UITableViewCell 的大小](http://www.raddonline.com/blogs/geek-journal/iphone-sdk-resizing-a-uitableviewcell-to-hold-variable-amounts-of-text/)

并使用本教程..

[uitableviewcell-动态高度](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/)

还使用**tableView:heightForRowAtIndexPath:**设置单元格高度的方法`indexpath`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T06:37:01.230

这是来自我之前的回答 -[自定义 UITableViewCell 的高度](https://stackoverflow.com/questions/13123540/customizing-uitableviewcells-height/13124268#13124268)：

使用该方法获取文字的文字高度

```
-(CGFloat)getLabelHeightForText:(NSString *)text andWidth:(CGFloat)labelWidth
{

CGSize maximumSize = CGSizeMake(labelWidth, 10000);

//provide appropriate font and font size
CGSize labelHeighSize = [text sizeWithFont: [UIFont fontWithName:@"Trebuchet MS" size:13.0f]
                         constrainedToSize:maximumSize
                             lineBreakMode:UILineBreakModeTailTruncation];
return labelHeighSize.height;
} 
```

此方法将返回您传递的文本的高度。在您的课程中添加此方法。并使用 **tableView:heightForRowAtIndexPath:**委托方法来设置每个单元格的高度

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
   Feedback *item = [self.items objectAtIndex:indexPath.row];

   CGFloat textHeight = [self getLabelHeightForText:item.comment andWidth:162];//give your label width here
    return textHeight;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T06:39:24.163

您可以编辑和尝试的示例

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath         *)indexPath {

NSDictionary *itemAtIndex = (NSDictionary *)[chatQuestions objectAtIndex:indexPath.row];

if ([self sizeForText:[itemAtIndex objectForKey:@"text"]].height+20>50) {
    return [self sizeForText:[itemAtIndex objectForKey:@"text"]].height+20;
}
else{
    return 50;}

}

 -(CGSize)sizeForText:(NSString*)text
  {

CGSize constraintSize;

constraintSize.width = 190.0f;

constraintSize.height = MAXFLOAT;
UIFont *labelFont = [UIFont fontWithName:@"Noteworthy-Light" size:18];

CGSize stringSize =[text sizeWithFont:labelFont constrainedToSize: constraintSize lineBreakMode: UILineBreakModeWordWrap];

return stringSize;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T06:39:23.883

```
//Calculate the expected size based on the font and linebreak mode of your label
CGSize maximumLabelSize = CGSizeMake(296,9999);

CGSize expectedLabelSize = [yourString sizeWithFont:yourLabel.font constrainedToSize:maximumLabelSize lineBreakMode:yourLabel.lineBreakMode];   

//adjust the label the the new height.
CGRect newFrame = yourLabel.frame;
newFrame.size.height = expectedLabelSize.height;
yourLabel.frame = newFrame; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-22T07:51:06.927

在您的情况下，您需要根据标签设置单元格的高度。

检查链接：

[http://dcraziee.wordpress.com/2013/05/22/calculate-size-of-uillabel-base-on-text-in/](http://dcraziee.wordpress.com/2013/05/22/calculate-size-of-uillabel-base-on-text-in/)

有一个函数名为

```
-(CGFloat)getHeightForLabel:(NSString *)_str font:(UIFont *)fontOfObject 
```

使用该函数计算高度为：

```
-(float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CGFloat _height  = [self getHeightForLabel:self.label.text font:[self.label font]];
    return _height;
} 
```

# .net - Mono.Cecil 在方法插入后获取/解析方法的 RVA

> ID：13190427
> 
> 赞同：0
> 
> 时间：2012-11-02T06:30:35.130
> 
> 标签：.net, mono.cecil

如何在不重新加载整个模块的情况下解决我注入的方法的 RVA？
我总是得到 0 作为添加方法的 RVA。无论如何都可以在不编写和重新加载程序集的情况下检索 RVA？谢谢！

```
AssemblyDefinition asm = AssemblyDefinition.ReadAssembly("hello.exe"); 
ModuleDefinition mod = asm.MainModule;
TypeDefinition modType= mod.GetType("PrintClass"); //get class found in hello.exe
MethodDefinition MethodToInject= new MethodDefinition("PrintMethod", ..., ...); //filled
modType.Methods.Add(MethodToInject);

int InjectedRVA = MethodToInject.RVA; //Always get 0
InjectedRVA = modType.Methods.FirstOrDefault(mtd => mtd.Name == "PrintMethod").RVA; //Also get 0

asm.MainModule.Write("output.exe"); //write output 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:14:09.687

新方法 RVA 在写入时计算，但模型没有更新。我想我们可以认为这是一个错误。

现在您必须分析生成的程序集。

# java - PHP/Java 桥接器

> ID：13190429
> 
> 赞同：2
> 
> 时间：2012-11-02T06:31:03.590
> 
> 标签：java, php, php-java-bridge

> **可能重复：**
> [使用 PHP/Java 桥时排除 ClassNotFoundException 故障](https://stackoverflow.com/questions/11829265/troubleshooting-classnotfoundexception-when-using-php-java-bridge)

谁能向我解释一下 PHP/Java Bridge 的安装。

我已经在我的系统中安装了桥接器。

这是我的`HelloWorld.java`代码：

```
import javax.swing.JOptionPane;

public class HelloWorld
{
    public static final String JAVABRIDGE_PORT="8081";
    static final php.java.bridge.JavaBridgeRunner runner = 
                 php.java.bridge.JavaBridgeRunner.getInstance(JAVABRIDGE_PORT);

    public static void main(String args[]) throws Exception
    {
        runner.waitFor();
        System.exit(0);
    }
    public void hello(String args[]) throws Exception
    {
        JOptionPane.showMessageDialog(null, "hello " + args[0]);
    }
} 
```

这是我的`HelloWorld.php`代码：

```
<?php 
    require_once("http://localhost:8081/JavaBridge/java/Java.inc");

    $world = new java("HelloWorld");
    echo $world->hello(array("from PHP"));
?> 
```

从 php 调用 Java 类时，它不起作用，并且显示以下错误：

```
Fatal error: Uncaught [[o:Exception]:"java.lang.Exception: CreateInstance failed: new HelloWorld. Cause: java.lang.ClassNotFoundException: HelloWorld VM: 1.5.0_01@http://java.sun.com/" at: #-31 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1438) #-30 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1284) #-29 java.lang.ClassLoader.loadClassInternal(Unknown Source) #-28 java.lang.Class.forName0(Native Method) #-27 java.lang.Class.forName(Unknown Source) #-26 php.java.bridge.Util.classForName(Util.java:1518) #-25 php.java.bridge.JavaBridge.CreateObject(JavaBridge.java:445) #-24 php.java.bridge.Request.handleRequest(Request.java:458) #-23 php.java.bridge.Request.handleOneRequest(Request.java:510) #-22 php.java.servlet.PhpJavaServlet.handleLocalConnection(PhpJavaServlet.java:202) #-21 php.java.servlet.PhpJavaServlet.handlePut(PhpJavaServlet.java:250) #-20 php.java.servlet.PhpJavaServlet.doPut(PhpJavaServlet.java:261) #-19 javax.servlet.http.HttpServlet.service(HttpS in http://localhost:8081/JavaBridge/java/Java.inc on line 195 
```

你能请任何人帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:49:21.763

我不熟悉您尝试使用的包，但看起来您需要提供课程的完整路径。`java/lang/ClassNotFoundException`例如，对于正在抛出的 Java 异常，可能类似于您`me/mypackage/HelloWordl`尝试创建的类。

# windows - Windows 8 App Bar 默认在应用开发中

> ID：13190431
> 
> 赞同：1
> 
> 时间：2012-11-02T06:31:06.803
> 
> 标签：windows, windows-8, winjs, appbar

我想为我的 javascript 应用程序创建一个应用程序栏，因为我们知道按下右键时我们会看到应用程序栏，但我希望它默认显示，无需右键单击。这是我的html代码

```
 <div id="appbar" data-win-control="WinJS.UI.AppBar">
    <!-- Commands for show/hide -->
    <button data-win-control="WinJS.UI.AppBarCommand" 
            data-win-options="{id:'showHideButton', label:'Show/Hide Picker', icon:'view'}">
    </button>
</div> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:33:58.660

在您的应用启动代码中，获取 appbar 元素并在其上调用[“show()”](http://msdn.microsoft.com/en-us/library/windows/apps/br229676.aspx)。

```
// This is essentially what you need to do inside your app startup code
// After all the elements are loaded (After the WinJS.UI.processAll() I believe)
document.getElementById('appbar').show(); 
```

# css - 2 个相反的不透明度值不会产生不透明的颜色

> ID：13190432
> 
> 赞同：2
> 
> 时间：2012-11-02T06:31:23.637
> 
> 标签：css, flash, opacity, photoshop, alpha-transparency

我想用该颜色的 2 个不透明度值生成不透明的纯色。

例如：当放置在相同的 0.5 不透明度黑色上方时，0.5 不透明度黑色矩形不会给我与不透明（不透明度 1）黑色相同的结果。

我已经尝试了不同范围的不透明度值，发现像 0.5 和 0.8 会产生 0.9 不透明度黑色、0.4 和 0.82 等等。

这些不是准确的值。计算完全相反的不透明度值的确切公式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:39:48.067

如果两个具有不透明度的元素`1-a`相互`1-b`堆叠，则它们的组合不透明度将为`1-a*b`，因此不存在“相反的不透明度值”之类的东西。如果您希望将两个元素组合起来完全不透明，那么其中一个元素本身必须完全不透明。

这也模仿了现实世界：当您堆叠两个黑色箔片时，每个箔片吸收 50% 的光通过，它们的组合不透明度为 75%，而不是 100%。三张箔纸 - 87.5% 等等。

# model-view-controller - 如何在 extjs 中创建 MVC 文件

> ID：13190434
> 
> 赞同：0
> 
> 时间：2012-11-02T06:31:24.917
> 
> 标签：model-view-controller, extjs4

我想实现链接[http://docs.sencha.com/ext-js/4-1/#!/example/writer/writer.html](http://docs.sencha.com/ext-js/4-1/#!/example/writer/writer.html....but)中给出的gridview ....但我想打破这个单一的writer.js文件分为单独的模型、视图、控制器和存储文件，以便以 MVC 架构格式实现精确的网格视图。即我想为模型、视图、控制器和存储创建四个不同的文件以实现相同的示例。那么你能告诉我这四个单独的文件将如何。如何将这个单一的 writer.js 文件代码划分为模型、视图、控制器和存储文件。我对 extjs 很陌生。请帮我.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T02:42:12.870

我使用 MVC 结构成功完成了 Writer 函数。如果你需要任何帮助，请告诉我。在表单提交时，添加此代码以在网格行内插入值。

```
 form.submit({
 waitMsg: 'Uploading Document...',
 url: 'save-form.php',
 success: function () {
 var values = form.getValues();
 Ext.getCmp('Docdetails').store.insert(0,values);
 form.reset();
 },
 failure: function () {
 Ext.MessageBox.alert ('Message','Saving data failed');
 }
 }); 
```

# c# - 在字符串中查找匹配的 guid

> ID：13190436
> 
> 赞同：9
> 
> 时间：2012-11-02T06:31:31.303
> 
> 标签：c#, regex

我需要使用在字符串中找到匹配的 GUID`Regex`

```
string findGuid="hi sdkfj 1481de3f-281e-9902-f98b-31e9e422431f sdfsf 1481de3f-281e-9902-f98b-31e9e422431f"
var guid = Regex.Match(m.HtmlBody.TextData, @"^(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}$").Value; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-02T06:45:06.373

如果您想使用`Regex`模式获取 GUID。然后，试试这个模式

```
(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1} 
```

**例子**

```
string findGuid = "hi sdkfj 1481de3f-281e-9902-f98b-31e9e422431f sdfsf 1481de3f-281e-9902-f98b-31e9e422431f"; //Initialize a new string value
MatchCollection guids = Regex.Matches(findGuid, @"(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}"); //Match all substrings in findGuid
for (int i = 0; i < guids.Count; i++)
{
    string Match = guids[i].Value; //Set Match to the value from the match
    MessageBox.Show(Match); //Show the value in a messagebox (Not required)
} 
```

![正则表达式匹配器匹配字符串中的两个 GUID](../Images/8b6d3358ecdc7201a5f333c08a73e6f5.png)

**注意**：我使用了您提供的相同模式，但只是删除了`^`指示表达式必须从字符串开头匹配的字符。然后，`$`从字符串末尾删除表示表达式必须匹配的字符。

更多关于正则表达式的信息可以在这里找到：
[正则表达式 - 一个简单的用户指南和教程](http://www.zytrax.com/tech/web/regex.htm)

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-02T06:45:55.783

看起来您使用了不正确的正则表达式。如果你需要指导

> {8}-{4}-{4}-{4}-{12}

应该像

> [0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4 }-[0-9a-fA-F]{12}

你可以这样尝试：

```
string findGuid="hi sdkfj 1481de3f-281e-9902-f98b-31e9e422431f sdfsf 1481de3f-281e-9902-f98b-31e9e422431f";
    string regexp = @"[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}";
    if (Regex.IsMatch(findGuid, regexp))
    {
        Console.WriteLine(
        Regex.Match(findGuid, regexp).Value
        );

    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T06:35:28.343

您可以在拆分数组上使用[Guid.TryParse](http://msdn.microsoft.com/en-us/library/system.guid.tryparse.aspx)。就像是：

```
string findGuid = "hi sdkfj 1481de3f-281e-9902-f98b-31e9e422431f sdfsf 1481de3f-281e-9902-f98b-31e9e422431f";
string[] splitArray = findGuid.Split();
List<Guid> listofGuid = new List<Guid>();
foreach (string str in splitArray)
{
    Guid temp;
    if (Guid.TryParse(str, out temp))
        listofGuid.Add(temp);
} 
```

这将为您提供 Guid 列表中的两个项目

编辑：对于根据 OP 评论的新字符串，

```
string findGuid="hi sdkfj x-Guid:1481de3f-281e-9902-f98b-31e9e422431f sdfsf x-Guid:1481de3f-281e-9902-f98b-31e9e422431f" 
```

可以指定多个拆分分隔符，例如：

```
string[] splitArray = findGuid.Split(' ', ':'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-19T12:08:05.457

> 模式 = "\b[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F ]{12}-\d+"

```
string input = "name=4a3779ab-56cc-41b5-ac7c-03bbf673439c-53607.jpg This is input string";
    Match m = Regex.Match(input, @"\b[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{12}", RegexOptions.IgnoreCase);
    string output = null;
    if (m.Success)
        output = m.Value; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-16T13:45:31.447

使用 .NET 4.0 及更高版本，您可以使用 Guid.TryParse。这是我使用的扩展方法。

```
public static bool IsGuid(this string checkGuid)
{
    if (string.IsNullOrEmpty(checkGuid)) return false;
    Guid resultGuid;
    return Guid.TryParse(checkGuid, out resultGuid);
} 
```

这就是你如何称呼它。

```
public MyMethod(string myToken)
{
    if (myToken.IsGuid())
    {
        // Do something
    }
} 
```

# git - GitLab 不与 Gitolite 交互

> ID：13190443
> 
> 赞同：2
> 
> 时间：2012-11-02T06:32:29.320
> 
> 标签：git, debian, gitolite, gitlab

我安装并配置了 GitLab。我将我的公钥添加到我的帐户中，然后添加了一个项目。不幸的是，该项目似乎不存在于 Gitolite 中，我的密钥似乎也没有被添加（不在 .gitolite/keydir 或 .ssh/authorized_keys 中）

GitLab 没有抱怨，项目创建得很好。根据 gitlab:app:status，权限是正确的，但它说项目缺少 post_receive 文件。这并不奇怪，因为 /home/git/repositories 中没有项目

```
gitlab@server:~$ bundle exec rake gitlab:app:status RAILS_ENV=production
Starting diagnostics
config/database.yml............exists
config/gitlab.yml............exists
/home/git/repositories/............exists
/home/git/repositories/ is writable?............YES
remote: Counting objects: 6, done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 6 (delta 0), reused 0 (delta 0)
Receiving objects: 100% (6/6), done.
Can clone gitolite-admin?............YES
UMASK for .gitolite.rc is 0007? ............YES
/home/git/.gitolite/hooks/common/post-receive exists? ............YES
Validating projects repositories:
Herp.....post-receive file missing
rake aborted!
unexpected return

Tasks: TOP => gitlab:app:status
(See full trace by running task with --trace) 
```

编辑： gitolite-admin repo 确实存在。我能够克隆 gitolite-admin 存储库并在该目录中写入：

```
gitlab@server:~$ git clone git@localhost:gitolite-admin.git /tmp/gitolite-admin
Cloning into '/tmp/gitolite-admin'...
remote: Counting objects: 6, done.
remote: Compressing objects: 100% (4/4), done.
Receiving objects: 100% (6/6), 751 bytes, done.
remote: Total 6 (delta 0), reused 0 (delta 0)

gitlab@server:~$ mkdir /home/git/repositories/test
gitlab@server:~$ touch /home/git/repositories/test/asdf 
```

我不知所措，因此 GitLab 无法使用。我该怎么办？我不知道从哪里开始寻找。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:11:59.727

对我来说，这个问题的根源是对 gitolite-admin 存储库的提交被拒绝：

```
2012-11-05.18:54:07     gitlab  127.0.0.1       git-receive-pack 'gitolite-admin'
2012-11-05.18:54:07     gitlab  127.0.0.1       Die generated at line 251 in /home/git/bin/gl-compile-conf : <<newline>>                ***** ABORTING *****<<newline>>        git config core.sharedRepository not allowed<<newline>>check GL_GITCONFIG_KEYS in the rc file for how to allow it<<newline>> <<newline>> 
```

当我检查是否为时`/home/git/.gitolite.rc`，`GL_GITCONFIG_KEYS`我发现该变量的值为空字符串。我不得不手动更改它：

```
$GL_GITCONFIG_KEYS = ".*"; 
```

[（我从issue 1769](https://github.com/gitlabhq/gitlabhq/issues/1769)中指定的迁移 sed 行推断- 我认为给定的 sed 行已损坏）

对于 gitolite v3，您可能需要设置此变量

```
$GIT_CONFIG_KEYS = '.*'; 
```

添加这个变量为我解决了这个问题。

编辑： japgolly 建议的替代问题和解决方案是安装说明忘记了一个步骤：

```
sudo -u gitlab git config --global user.name Gitlab
sudo -u gitlab git config --global user.email gitlab@localhost 
```

这也会导致对 gitolite-admin 的提交失败（静默）

# c++ - 交叉编译查询，从Windows到Linux，从Linux到Windows，

> ID：13190444
> 
> 赞同：2
> 
> 时间：2012-11-02T06:32:28.427
> 
> 标签：c++, c, linux, windows, cross-compiling

我正在开发一个使用`ffmpeg`库的 C 项目。目前我在*windows*平台上工作，我将为*Linux ARM*交叉编译项目。在这样的背景下，我几乎没有什么基本问题。

1.  如果我使用*ANSI C++*，我可以肯定，我将能够使用相应的编译器交叉编译项目`[ MSVC, MingW ]`

    但 ..

2.  如果我在项目中使用“Win32”和其他“Windows”特定 API，交叉编译器将如何处理它，以使项目能够在 Linux 上运行。

3.  同样，如果我在我的项目中使用 Linux 特定的“功能”，交叉编译器将如何处理它，以使项目能够在 Windows 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:40:50.167

当您进行交叉编译时，被交叉编译的代码必须使用目标平台上可用的 API（即最终将在其上运行的平台）。当它的输出在 Linux 机器上运行时，交叉编译器不会神奇地访问 Win32 API。*它与在*目标机器上编译代码相同，但意味着您实际上不需要这样做。换句话说，您可以通过在 ARM Linux 机器上运行本机（非交叉）编译器来实现相同的目标，但您需要一个足够强大的 ARM 机器来运行编译器。

也就是说，原则上，您可以在使用[winelib](http://wiki.winehq.org/Winelib)提供 win32 API 的同时交叉编译到 Linux。但不确定它在 ARM 上的效果如何——它只适用于 x86。

最后，请注意，即使在最好的情况下，交叉编译也往往相当复杂。从 x86 Linux 交叉编译到 ARM Linux 而不是 x86 Windows 到 ARM Linux 交叉编译可能会让您的生活更简单——虽然可以进行跨操作系统和跨平台构建，但您更改的变量越少，事情就越简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:37:31.813

如果您使用 Winapi，您的项目将无法在 Linux 上运行。

# svn - 查找以前的更新版本

> ID：13190445
> 
> 赞同：0
> 
> 时间：2012-11-02T06:32:42.953
> 
> 标签：svn, tortoisesvn

我正在使用乌龟 svn。但是我的 Eclipse 工作区没有与 svn 文件夹合并。我从 svn 文件夹复制源代码并在单独的文件夹中工作。

几天前我更新了我的来源，但没有提交。到目前为止，其他人已将其源代码提交给 svn。今天我不小心从 svn 更新了，没有把我的修改放到 svn 文件夹中。现在我想要的是将我手中的svn源更新为我前一天更新的修订版。

这可能吗？如果我能找到前一天更新的修订号，我知道我可以做到这一点。但是，我怎么找到它？

版本信息：TortoiseSVN 1.6.16，内部版本 21511 - 64 位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:46:20.353

我终于得到了答案。当我们通过 go 访问日志时`TortoiseSVN -> show log`，`Tortoise SVN`不会显示有关我们之前更新的信息（它仅显示有关提交的信息）。但是我们可以在文件夹（*Windows 7*`log` ）中找到它的文件（*logfile.txt*）。它包含有关更新和提交的详细信息。所以我们可以很容易地找到任何更新的版本号。 注意：- 您可以通过以下方式设置日志文件维护的最大行数`\AppData\Roaming\TortoiseSVN` *`TortoiseSVN -> Settings -> Saved Data -> Max. lines in action log`*

 *感谢所有回复的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:39:53.127

这只有通过努力才能实现。如果我理解你是正确的，你复制了来源

```
/subversion 
```

到

```
/workspace 
```

没有 .svn 子文件夹。这是 subversion 和 tortoise 保存当前修订号的地方。通过更新 /subversion，您将最初使用的旧修订号更改为新修订号。没有历史可以保存在本地之前的历史。

但是，您可以将每个修订步骤与您的来源进行比较，并很难找到这个数字。更好的问题是：你为什么要这样做？[使用subclipse](http://subclipse.tigris.org/)会更好，这是一个 Eclipse 的颠覆插件。从 eclipse 结帐并在没有乌龟的 eclipse 中工作。如果你还是想使用乌龟，请注意相同的颠覆版本，以免发生冲突......

在 /workspace/newCheckout 中使用 subclipse 签出后，您可以区分`newCheckout`和`subversion`文件夹并再次复制您的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T08:36:06.197

`TortoiseSVN -> show log`- 这显示列表修订。

同样，您可以构建修订图 -`TortoiseSVN -> Revision graph`*

# python - 获取python字符串中字符集的位置

> ID：13190450
> 
> 赞同：1
> 
> 时间：2012-11-02T06:33:27.507
> 
> 标签：python, string, python-2.7

获取python字符串中字符集的位置

字符集：

```
 string="ABCDEFGHIJKLMNOPQRSTUVWXYZ"
    charPositionToFind=A,D,V,Y 
```

预期输出

```
 postions=[0,3,21,24] 
```

我这样做

```
 def find_all(string,char):
     return [i - 1 for i in range(len(string)) if string.startswith(char, i - 1)]

 string="ABCDEYYFGHIAAJKVLMNOPDCQRSTAAVVVUVWXYZ"
 charPositionToFind=['A','D','V','Y']
 position=[]

 for char in charPositionToFind:
    s = find_all(string,char)
    position.extend(s)
 print sorted(position)

  output:
       [0, 3, 5, 6, 11, 12, 15, 21, 27, 28, 29, 30, 31, 33, 36] 
```

但我想要最好的方法来做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:57:41.487

string.index 会很好用，但它有两个问题。1) 它只找到第一次出现的字符，以及 2) 如果找不到字符，它会引发错误，需要在使用 index() 之前检查是否存在。

简单地看待问题，这是解决问题的两种简单方法：

方法一：

```
for character in the string:
    for target in charPositionToFind:
        test if character == target 
```

方法二：

```
for target in charPositionToFind:
    for character in the string:
        test if character == target 
```

运行时方面，这两种方法具有相同的 O(N x M) 最坏情况，其中 N 是字符串的大小，M 是 charPositionToFind 的大小。但是，使用方法 1 允许您通过使用集合来删除内部循环。它还避免了在最后进行排序，因为您正在按顺序遍历字符串的字符。因此，使用列表推导来避免 for 循环：

```
string = "ABCDEYYFGHIAAJKVLMNOPDCQRSTAAVVVUVWXYZ"
charPositionToFind = 'ADVY'
target_set = set(charPositionToFind)
position = [index for index, char in enumerate(string) if char in target_set] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T07:20:38.360

如果您需要所有事件：

```
import re

text = "ABCDEYYFGHIAAJKVLMNOPDCQRSTAAVVVUVWXYZ"
chars = "ADVY"
positions = [m.start() for m in re.finditer("|".join(map(re.escape, chars)), text)]
print(positions) 
```

### [输出](http://ideone.com/3OxG07)

```
[0, 3, 5, 6, 11, 12, 15, 21, 27, 28, 29, 30, 31, 33, 36] 
```

# vb.net - 有人可以将此VB代码转换为VC++吗

> ID：13190453
> 
> 赞同：-2
> 
> 时间：2012-11-02T06:33:43.980
> 
> 标签：vb.net, visual-c++

我发现这段代码可以在面板中移动表单，但我想在 c++ 中使用这段代码，因为我在 vb 中为空，我需要帮助才能在 Visual c++ 中转换以下代码。

```
'Constants   
Const HTCAPTION = &H2
Const WM_NCLBUTTONDOWN = &HA1

'API functions   
<DllImport("user32.dll", CharSet:=CharSet.Auto, SetLastError:=True, ExactSpelling:=True)> _
Public Shared Function ReleaseCapture() As Boolean
End Function
Declare Auto Function SendMessage Lib "user32.dll" (ByVal hWnd As IntPtr, ByVal msg As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As IntPtr

'You could Dock a Panel to the top of your form and use:   

Private Sub Panel1_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Panel1.MouseDown

    'This code can be used in the MouseDown event of any control(s) you want to be able to move your form with   
    ReleaseCapture()
    SendMessage(Me.Handle, WM_NCLBUTTONDOWN, HTCAPTION, 0&)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:29:57.257

在您的 WndProc 中：

```
case WM_LBUTTONDOWN:
    ReleaseCapture ();
    SendMessage (hWnd, WM_NCLBUTTONBUTON, HTCAPTION, 0);
    break; 
```

# ruby-on-rails - 使用 map 方法格式化 JSON 输出 - Rails 3

> ID：13190459
> 
> 赞同：3
> 
> 时间：2012-11-02T06:34:15.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我对使用 map 方法缺乏一些了解。

使用没有映射的 json 输出

```
format.json  { render :json => @categories } 
```

给我以下输出

```
[{"created_at":"2012-10-20T01:16:35+11:00","id":1,"name":"bathroom renovations","updated_at":"2012-10-20T01:16:35+11:00"}] 
```

使用带有映射的 json

```
format.json  { render :json => @categories.map(&:name) } 
```

给我这个输出

```
["bathroom renovations"] 
```

我怎样才能让我的输出看起来像

```
[{"id":"1","name":"bathroom renovations"}] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T06:14:24.017

我认为以下内容可能对您有用：

```
 format.json {render json: @categories.map{|category| {:id => category.id, :name =>  category.name} }} 
```

# java - BufferedReader 方法 ReadLine() 正在将破折号 ("\u2013") 转换为连字符 ("\u002D")

> ID：13190462
> 
> 赞同：1
> 
> 时间：2012-11-02T06:34:22.920
> 
> 标签：java, svn, bufferedreader

我在 SVN 的存储库中有文件夹，它们的名称中有一个短划线（“\u2013”​​）。我首先调用“svn list”（在我的 Windows 7 + UTF-8 编码中）来获取目录列表。在调用 BufferedReader readLine() 之后，它读取列表的文本。显示的文件夹名称包含连字符 ("\u002D") 而不是短划线 ("\u2013")。

有什么限制吗？

```
class Test {
    public static void main(String args[]) {
        BufferedReader br = null;
        try {
            String sCurrentLine;
            br = new BufferedReader(new FileReader("C:\\test–ing.xml"));
            System.out.println(br.readLine());
            while ((sCurrentLine = br.readLine()) != null) {
                System.out.println(sCurrentLine);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (br != null)
                    br.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    } // end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:50:12.760

这大概就是问题所在：

```
br = new BufferedReader(new FileReader("C:\\test–ing.xml")); 
```

这将使用平台默认编码。您已经说过该文件是 UTF-8 编码的 - 所以您需要指定您想要 UTF-8，这意味着避免`FileReader`' 损坏的 API：

```
br = new BufferedReader(new InputStreamReader(
             new FileInputStream("C:\\test–ing.xml"), "UTF-8")); 
```

假设该文件确实*是*包含预期字符的有效 UTF-8。在做任何其他事情之前，你应该检查一下。

或者，鉴于这是 XML，我假设在您的真实代码中您将使用它*作为*XML？如果是这样，我会直接从输入流中加载它，并让 XML 解析器处理编码。

# javascript - 在android应用程序中实现javascript导致问题

> ID：13190465
> 
> 赞同：2
> 
> 时间：2012-11-02T06:34:29.537
> 
> 标签：javascript, android, android-layout, admob

我想在我的 android 应用程序中实现 javascript。我成功地使用[PhoneGap](http://phonegap.com)实现了这一点。现在我的应用程序使用 javascript 运行网页，但是有一个小问题。我想在底部放置一个 AdMob 横幅，我已经在我的其他应用程序中实现了它，所以我遵循了相同的过程，但这会导致强制关闭错误。如果我在没有 android 布局和代码的情况下运行应用程序，它可以完美运行，但不能使用它。

```
import org.apache.cordova.DroidGap;
import com.google.ads.AdRequest;
import com.google.ads.AdView;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup.LayoutParams;

public class MainActivity extends DroidGap {

private LayoutInflater mInflater;
private View paramView;

@Override
public void onCreate(Bundle savedInstanceState) {
    Display display = getWindowManager().getDefaultDisplay();
    int width = display.getWidth();
    int height = display.getHeight();
    LayoutParams params = new LayoutParams(height, width);
    paramView = mInflater.inflate(R.layout.activity_main, null);
    super.loadUrl("file:///android_asset/www/webPageWithJavascript.htm");
    super.addContentView(paramView, params);

    AdView adview = (AdView) findViewById(R.id.adView);
    AdRequest re = new AdRequest();
    adview.loadAd(re);          
}
} 
```

**原木猫**

```
11-02 10:15:09.031: E/AndroidRuntime(1249): FATAL EXCEPTION: main
11-02 10:15:09.031: E/AndroidRuntime(1249): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.myapplication/com.test.myapplication.MainActivity}: java.lang.NullPointerException
11-02 10:15:09.031: E/AndroidRuntime(1249):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at android.os.Looper.loop(Looper.java:130)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at android.app.ActivityThread.main(ActivityThread.java:3683)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at java.lang.reflect.Method.invokeNative(Native Method)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at java.lang.reflect.Method.invoke(Method.java:507)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at dalvik.system.NativeStart.main(Native Method)
11-02 10:15:09.031: E/AndroidRuntime(1249): Caused by: java.lang.NullPointerException
11-02 10:15:09.031: E/AndroidRuntime(1249):     at com.test.myapplication.MainActivity.onCreate(MainActivity.java:26)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-02 10:15:09.031: E/AndroidRuntime(1249):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
11-02 10:15:09.031: E/AndroidRuntime(1249):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:01:36.273

这听起来很奇怪，但相同的代码在重新启动计算机后工作。我不知道原因，但我想让我重新启动计算机并再试一次。重新启动计算机后，我启动 eclipse 并单击运行按钮，应用程序运行良好。

# ios - 从 mkannotationview 图像中删除阴影

> ID：13190466
> 
> 赞同：1
> 
> 时间：2012-11-02T06:34:29.990
> 
> 标签：ios, mkannotationview

当使用 mkannotationview 和包含大量透明度的图像时，我会在图像块周围得到一个由 ios 生成的阴影。

有没有办法防止这种情况？

![在此处输入图像描述](../Images/63e0528fe4b005bdbffe758cff85e2f9.png)

# sql - 使用 MongoDB 而不是 MS SQL Server 的优缺点

> ID：13190468
> 
> 赞同：35
> 
> 时间：2012-11-02T06:34:33.453
> 
> 标签：sql, mongodb, schema

我是 NoSQL 世界的新手，正在考虑将我的 MS Sql Server 数据库替换为 MongoDB。我的应用程序（用 .Net C# 编写）与 IP 摄像头交互，并将来自摄像头的每个图像的元数据记录到 MS SQL 数据库中。平均而言，我每天为每个相机插入大约 86400 条记录，并且在当前数据库模式中，我为单独的相机图像创建了单独的表，例如 Camera_1_Images、Camera_2_Images ... Camera_N_Images。单个图像记录由简单的元数据信息组成。像 AutoId、FilePath、CreationDate。为了添加更多细节，我的应用程序为每个摄像头启动单独的进程 (.exe)，每个进程每秒在数据库的相关表中插入 1 条记录。

我需要（MongoDB）专家就以下问题提出建议：

1.  判断 MongoDB 是否适合保存此类数据，最终将针对时间范围进行查询（例如，检索指定小时之间特定相机的所有图像）？关于我的案例基于文档的架构设计有什么建议吗？

2.  服务器（CPU、RAM、磁盘）的规格应该是什么？有什么建议吗？

3.  我是否应该考虑在这种情况下进行分片/复制（同时考虑写入同步副本集的性能）？

4.  在同一台机器上使用多个数据库有什么好处，这样一个数据库将保存所有相机的当天图像，而第二个数据库将用于存档前一天的图像？我正在考虑在单独的数据库上拆分读取和写入。因为所有读取请求都可能由第二个数据库提供服务并写入第一个数据库。它会受益还是没有？如果是，那么任何确保两个数据库始终同步的想法。

欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-02T08:06:00.097

*我自己是 NoSQL 数据库的初学者。因此，我以潜在的反对票为代价来回答这个问题，但这对我来说将是一次很棒的学习经历。*

> 在尽我所能回答您的问题之前，我应该说，如果 MS SQL Server 对您运行良好，那么请坚持下去。您没有提到为什么要使用 MongoDB 的任何正当理由，除了您了解到它是一个面向文档的数据库这一事实。此外，我看到您为每个相机捕获的元数据集几乎相同，即您的模式是动态的。

*   判断 MongoDB 是否适合保存此类数据，最终将针对时间范围进行查询（例如，检索指定小时之间特定相机的所有图像）？关于我的案例基于文档的架构设计有什么建议吗？

MongoDB 是一个面向文档的数据库，擅长在聚合中查询**（**你称之为文档）。由于您已经将每个摄像头的数据存储在其自己的表中，因此在 MongoDB 中，您将为每个摄像头创建一个单独的**集合。**[以下是](http://cookbook.mongodb.org/patterns/date_range/)您执行日期范围查询的方式。

*   服务器（CPU、RAM、磁盘）的规格应该是什么？有什么建议吗？

所有 NoSQL 数据库都是为在商品硬件上**横向扩展而构建的。**但是按照您提出问题的方式，您可能正在考虑通过**扩展**来提高性能。您可以从一台合理的机器开始，随着负载的增加，您可以继续添加更多服务器（横向扩展）。您无需计划和购买高端服务器。

*   我是否应该考虑在这种情况下进行分片/复制（同时考虑写入同步副本集的性能）？

MongoDB[锁定整个数据库](https://stackoverflow.com/questions/10175525/what-level-does-mongodb-write-lock-take-place)以进行一次写入（但为其他操作产生），并且适用于读取多于写入的系统。所以这取决于你的系统是怎样的。有多种分片方式，并且应该是特定于域的。一个通用的答案是不可能的。但是可以给出一些示例，例如按地理，按分支等进行分片。

另请阅读[CAP Theorem 的简单英文介绍](http://ksat.me/a-plain-english-introduction-to-cap-theorem/)

**更新了对分片评论的回答**

根据他们的[文档](http://docs.mongodb.org/manual/core/sharding/)，您应该考虑部署一个分片集群，如果：

> *   您的数据集接近或超过系统中单个节点的存储容量。
> *   您系统的活动工作集的大小将很快超过系统的最大 RAM 容量。
> *   您的系统有大量的写入活动，单个 MongoDB 实例无法以足够快的速度写入数据以满足需求，并且所有其他方法都没有减少争用。

所以基于最后一点是的。自动分片功能旨在扩展写入。*在这种情况下，每个shard*都有一个写锁，而不是每个*database*。但我的答案是理论上的。我建议您从 10gen.com 小组咨询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T08:33:49.493

> 判断 MongoDB 是否适合保存此类数据，最终将针对时间范围进行查询（例如，检索指定小时之间特定相机的所有图像）？

这个问题太主观了，我无法回答。根据对众多 SQL 解决方案（具有讽刺意味的是不是 MS SQL）的个人经验，如果做得好，我会说它们都一样好。

还：

> 服务器（CPU、RAM、磁盘）的规格应该是什么？有什么建议吗？

取决于太多只有您知道的变量，但是一小部分商品硬件运行良好。我无法对这个问题给出真实的回答，这将归结为您的测试。

至于架构，我会去找一份结构文件：

```
{
    _id: {},
    camera_name: "my awesome camera",
    images: [
        { 
            url: "http://I_like_S3_here.amazons3.com/my_image.png" ,
            // All your other fields per image
        }
    ]
} 
```

这应该很容易维护和更新，只要您没有嵌入更深的内容，从那时起它可能会变得有点痛苦，但这取决于您的查询。

不仅如此，这应该有利于分片，因为你在一个文档中拥有你需要的所有数据，如果你要分片，`_id`你可能会在这里得到完美的设置。

> 我是否应该考虑在这种情况下进行分片/复制（同时考虑写入同步副本集的性能）？

可能许多人认为他们需要分片，而实际上他们只需要更智能地设计数据库。MongoDB 是非常自由的形式，所以有很多方法可以做错，但话虽如此，也有很多方法可以做对。我个人会牢记分片。复制也非常有用。

> 在同一台机器上使用多个数据库有什么好处，这样一个数据库将保存所有相机的当天图像，而第二个数据库将用于存档前一天的图像？

即使 MongoDB 的写锁处于数据库级别（当前），我会说：不。正确的文档结构和正确的分片/复制（如果需要）应该能够在单个基于文档的集合中处理这个问题D B。不仅如此，您还可以将集群内的写入和读取定向到某些服务器，从而在集群中的某些机器之间创建并发情况。我会提倡正确使用 MongoDB 的并发特性而不是 DB 分离。

### 编辑

再次阅读问题后，我从我的解决方案中省略了您每天为每台相机插入 80k+ 图像。因此，我实际上会在一个名为的集合中为每个图像创建一行`images`，然后是一个`camera`集合，并像在 SQL 中那样查询这两个选项，而不是嵌入选项。

对`images`集合进行分片应该同样容易`camera_id`。

还要确保将您的工作集考虑到您的服务器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T14:33:53.893

> 判断 MongoDB 是否适合保存此类数据，最终将针对时间范围进行查询（例如，检索指定小时之间特定相机的所有图像）？关于我的案例基于文档的架构设计有什么建议吗？

MongoDB 可以做到这一点。为了获得更好的性能，您可以在时间字段上设置索引。

> 服务器（CPU、RAM、磁盘）的规格应该是什么？有什么建议吗？

我认为RAM和磁盘很重要。

*   如果您不想这样做`sharding`，`scale out`您应该考虑更大的磁盘大小，以便您可以将所有数据存储在其中。
*   您的热数据应该可以放入您的 RAM。如果不是，那么您应该考虑更大的 RAM，因为 MongoDB 的性能主要取决于 RAM。

> 我是否应该考虑在这种情况下进行分片/复制（同时考虑写入同步副本集的性能）？

我不知道你有多少摄像头，即使是每秒 1000 次插入，总共 1000 个摄像头对 MongoDB 来说仍然很容易。如果您关心插入性能，我认为您不需要进行分片（除非数据量太大，您必须将它们分成几台机器）。

另一个问题是应用程序的读取频率。它非常高，那么您可以在这里考虑分片或复制。如果您只在一个时间范围内的一台相机上查询，您可以使用 (timestamp + camera_id) 作为您的分片键。

> 在同一台机器上使用多个数据库有什么好处，这样一个数据库将保存所有相机的当天图像，而第二个数据库将用于存档前一天的图像？

您可以将表格分成两个集合（`archive`和`current`）。`archive`如果您只查询日期，则仅设置索引`archive`。如果没有索引创建的开销，`current`集合应该受益于插入。

您可以编写一个日常程序将`current`数据转储到`archive`.

# iphone - 按住操纵杆时偷偷摸摸的输入不读取按钮

> ID：13190472
> 
> 赞同：2
> 
> 时间：2012-11-02T06:35:21.223
> 
> 标签：iphone, xcode, cocos2d-iphone

我对 SneakyJoystick 和 SneakyButton 有疑问。按下操纵杆时，SneakyButton 不会被读取为按下，我想知道如何解决这个问题。我假设多点触控允许同时读取两个输入。在我当前的项目中，只要按住操纵杆，角色就会朝那个方向移动，但是在按住操纵杆时我似乎无法按下偷偷摸摸的输入按钮。

这是我对 InputLayer 的更新方法：

```
GameLayer *game = [GameLayer sharedGameLayer];
Hero* hero =[game getHeroFromLayer];
if (attackButton.active)
{
    [hero attack];
}

CGPoint velocity = ccpMult(dPad.velocity, 6500 * dt);
hero.position = ccp(hero.position.x + velocity.x * dt,
                    hero.position.y + velocity.y * dt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:54:15.563

帅哥？你应该尝试改变

`if (attackButton.active)`

至

`if (attackButton.value == 1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-12T09:39:39.960

谢谢，咕噜。

经过多天的努力，如何同时触摸操纵杆和攻击/跳跃按钮，但完全失败了。直到现在我触摸了这条评论，只要打开多点触控，一切正常！！！

在此处更改：RootViewController.mm => [eaglView setMultipleTouchEnabled:YES]

# javascript - soda.js 链接 API 如何用于使用 node.js 的 selenium 测试站点

> ID：13190474
> 
> 赞同：0
> 
> 时间：2012-11-02T06:35:30.233
> 
> 标签：javascript, node.js, selenium-rc, soda

我正在尝试使用[soda.js](https://github.com/LearnBoost/soda/)创建一个 node.js 脚本来组织和编写[Selenium](http://seleniumhq.org/)脚本。我遇到的问题是我根本不了解[soda.js](https://github.com/LearnBoost/soda/)链接哲学，特别是`and()`方法和文档在解释它是如何工作的方面非常薄弱。

想象以下测试用例：

```
var soda = require('soda');
var assert = require('assert');

var browser = soda.createClient({
    host: 'localhost',
    port: 4444,
    url: 'http://www.google.com',
    browser: 'firefox'
});

browser
    .chain
    .session()
    .open("http://www.google.com", function() {
        console.log("open complete");
    })
    .and(function() {
        console.log("and");
    })
    .and(function() {
        return function(browser) {
            console.log("and2");
        }
    }())
    .end(function() {
        console.log("end");
    }) 
```

我对链式 API 的理解是，它是为了防止回调地狱。因此，如果我调用 browser.method1().method2().method3()。然后method2将等待方法一。method3 将等待 method2() 等。为您提供同步的便利，但提供事件的功能。

我预计

```
open complete
and
and2
end 
```

我明白了

```
and
and2
open complete
end 
```

什么？它显然与`and`方法有关，我认为它是在声明你自己的任意函数，但它似乎没有遵循队列顺序。正如您在测试用例中看到的，我尝试了两种声明 and 函数的方法，一种使用自执行函数闭包，另一种使用标准匿名函数。两种情况下的结果相同。我如何让`and()`他们遵循队列顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:34:05.393

经过一番敲打之后，我终于能够通过在 github 上翻阅 soda 的源代码来弄清楚这是如何工作的。基本上该`.and()`方法会立即触发。`.end()`每个链接的请求只是添加到一个队列中，并且在它遇到调用之前它不会开始处理队列。

这样，an 中的代码`and()`将始终在任何其他调用的回调之前处理。这种方式`and()`主要用于排队动态定义的动作，并且对于响应先前触发的动作没有用，这些应该在回调中完成。

# jquery - 将 2 个不同的选择器与 2 个不同的事件结合起来

> ID：13190478
> 
> 赞同：0
> 
> 时间：2012-11-02T06:35:38.207
> 
> 标签：jquery, jquery-selectors

我有两个选择器，我希望将它们组合在一段代码中来处理两个不同的选择器。

我目前的代码如下：

```
var button_b=$("#button_b");
$('#button_a', button_b).on("click, dblclick", function(){
//do stuff
}); 
```

然而，这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:33:15.857

我仍在寻找一种方法来提及 2 个单独的选择器并在一行代码中将它们与单独的事件绑定

考虑以下情况

```
$('input:text#voucher_id, button.nav').bind('click keydown', function(e){ // find nav functions to keydown events on #voucher_id and nav buttons
    reload(e,'<?php echo $aVeryLongUrlDynamicallyGenerated; ?>', $('#voucher_id').val(),$('#doctype').val());
}); 
```

从代码中可以清楚地看出，我想将相同的功能绑定到单击按钮和`keydown`textField `#voucher_id`，但是通过使用上述方法，发生的事情很明显，我`keydown`在按钮上激活了相同的功能，即不可取的行为。

如何避免这种情况并仍然结合两个选定的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:42:42.873

组合选择器（[如@mike 所述](https://stackoverflow.com/questions/13190478/combine-2-different-selectors-with-2-different-events#comment17954943_13190478)）是一个简单的逗号分隔选择器值的问题`$("#button_a,#button_b")`。事件可以用空格分隔 -

```
var selector = '#bar';
$("#foo,"+selector).on("click dblclick", handler); 
```

这两个事件很难抓住同一个元素。双击的第一次单击将被拾取并调用处理程序，在为单击调用处理程序之前，您将无法挤压双击。

我在这里的现场演示使用了相同的技术，但使用了 a`mouseenter`和`click`事件。

### [演示](http://jsfiddle.net/VSY2V/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T08:25:09.527

如果是这种情况，为什么不为这些元素使用相同的处理程序和不同的事件..

```
$("#button_a").on("click", function(){
     myFunc(this);
});

$("button_b").on("dblclick", function(){
     myFunc(this);
});

function myFunc(elem){
    // Your code here
} 
```

# jsp - jsp中的小脚本

> ID：13190481
> 
> 赞同：-1
> 
> 时间：2012-11-02T06:35:58.330
> 
> 标签：jsp, struts2

大家好，我正在经历一个概念，如果在 jsp 中的 scriptlet 内创建变量，则其范围将是整个 jsp 页面。我尝试编写以下代码。

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<%! String[] parts= null;
String sm=null;%>

<s:iterator value="ServiceManagement"><br/><% sm=%><s:property/>
<% parts=sm.split(":");  %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<s:checkbox fieldvalue=<%= parts[1] %>" theme="simple" name="service_management"/>
<%= parts[0] %></s:iterator> 
```

我在“<%= parts[0] %>”处收到一个错误，说“语法错误，插入“;”来完成语句”“数组常量只能在初始化程序中使用”

请帮助我，我是java新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:40:00.137

```
<% sm=%> 
```

该语句不会编译。你应该写`<% sm="abc";%>`

请注意，分配给`sm`变量并且语句用分号完成`;`之前您使该语句不完整而没有分配任何内容，然后您正在编写新语句。

当你在你的jsp中写这个 `<% sm=%><% parts= sm.split(":"); %>`

它将被转换成这样的东西：

```
sm=
parts= sm.split(":"); 
```

你看它不会编译。

# javascript - 如何停止点击播放器？

> ID：13190484
> 
> 赞同：0
> 
> 时间：2012-11-02T06:36:04.647
> 
> 标签：javascript, jquery, html

```
<object width="300" height="300">
<param name="src" value="" id="param">
<param name="autoplay" value="false">
<param name="controller" value="true">
<param name="bgcolor" value="#FFFFFF">
<embed src="" autostart="false" loop="false" width="300" height="300"
controller="true" bgcolor="#FFFFFF" id="filcontainer"></embed>
</object>
<a href="#"class="close"/>**Close it**</a> 
```

这是弹出窗口中的音频播放器，当用户单击关闭锚点时如何停止播放播放器，当前音频在单击关闭链接并关闭弹出窗口时继续播放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:42:09.247

**编辑：**

```
$(document).ready(function() {
    $('a').click(function(e) {
        var myPlayer = document.getElementById('filcontainer');
        myPlayer.stopVideo();
        e.preventDefault();
    });
}); 
```

**[Jsfiddle 演示](http://jsfiddle.net/PbWpv/)**

***编辑：***

**[更新了 JsFiddle](http://jsfiddle.net/PbWpv/18/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:42:35.430

以下是视频 HTML 5 功能和事件列表：http: [//www.chipwreck.de/blog/2010/03/01/html-5-video-dom-attributes-and-events/](http://www.chipwreck.de/blog/2010/03/01/html-5-video-dom-attributes-and-events/)

您可以像这样暂停视频：

```
var myvid = document.getElementById('vid');

$('a').click(function(e) { 
    myvid.pause();
    return false
}); 
```

# javascript - 如何将json转换为java脚本数组？

> ID：13190490
> 
> 赞同：1
> 
> 时间：2012-11-02T06:36:59.703
> 
> 标签：javascript, jquery, arrays, json

我有这样的json字符串，

```
string js=[{"Name":"Pini","ID":"111"},

{"Name":"Yaniv","ID":"123"},

{"Name":"Yoni","ID":"145"}] 
```

我需要使用 java 脚本将其转换为以下格式。

```
[['Pini',111],['Yaniv',123],['Yoni',145]] 
```

如何使用 javascript 函数将 json 字符串转换为 javascript 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:39:48.297

我认为是这样的：

```
var ret = [];

for (var i = 0; i < js.length; i++) {
    ret.push([js[i].Name, js[i].ID]);
}

// ret holds your array of arrays 
```

或类似的东西：

```
var ret = $.map(js, function (el, i) {
    return [[el.Name, el.ID]];
}); 
```

两者的例子：http: [//jsfiddle.net/RNY8M/](http://jsfiddle.net/RNY8M/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:39:39.433

你可以这样做

## [**以下代码的 JsFiddler Demo**](http://jsfiddle.net/zZsW6/)

```
var JSONObject = {"results":[{"Name":"Pini","ID":"111"},
                  {"Name":"Yaniv","ID":"123"},
                             {"Name":"Yoni","ID":"145"}]};

var Users= [];

$.each(JSONObject.results, function(i, obj)
       {
    alert(obj.Name);
    alert(obj.ID);
    Users.push([obj.Name, obj.ID]);
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T08:30:01.677

对于这种转换，我总是更喜欢使用**[UnderscoreJs](http://underscorejs.org)**，它是一个用于 Javascript 的**实用工具带库**（主要用于对象/数组转换）。我认为它提供了很棒的功能，让生活**更轻松**，让 javascript 开发人员**更有效率**，并为生成的代码实现**更好的易读性。**

这是带有下划线（扩展）的解决方案：

```
var js=[{"Name":"Pini","ID":"111"},  
        {"Name":"Yaniv","ID":"123"},    
        {"Name":"Yoni","ID":"145"}]

var names = _.pluck(js, 'Name');
var ids = _.pluck(js, 'ID');

var result = _.zip(names, ids) 
```

你达到了预期的结果：

```
[['Pini',111],['Yaniv',123],['Yoni',145]] 
```

**使用 underscorejs**的一行解决方案：****

 **```
var result = _.zip(_.pluck(js, 'Name'), _.pluck(js, 'ID')) 
```

希望能帮助到你！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T13:43:14.650

*这是一个适用于简单*对象的解决方案（虽然不是深层对象....但我将把它留给您实现）。

[http://jsfiddle.net/eUtkC/](http://jsfiddle.net/eUtkC/)

```
var js = [{
    "Name": "Pini",
    "ID": "111"},
{
    "Name": "Yaniv",
    "ID": "123"},
{
    "Name": "Yoni",
    "ID": "145"}]

function obj2arr(obj) {
    var i, key, length = obj.length,
        aOutput = [],
        aObjValues;
    for (i = length - 1; i >= 0; i--) {
        aObjValues = [];
        for (key in obj[i]) {
            if (obj[i].hasOwnProperty(key)) {
                aObjValues.push(obj[i][key]);
            }
        }
        aOutput.push(aObjValues);
    }
    return aOutput;
}

document.write(JSON.stringify(obj2arr(js)))​ 
```

**编辑**

这是使用的版本`Array.prototype.map`：

[http://jsfiddle.net/eUtkC/1/](http://jsfiddle.net/eUtkC/1/)

```
function obj2arr(obj) {
    var key, aOutput = [];
    for (key in obj) {
        if (obj.hasOwnProperty(key)) {
            aOutput.push(obj[key]);
        }
    }
    return aOutput;
}

document.write(JSON.stringify(js.map(obj2arr)))​ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-02T08:47:34.640

我更正了我的解决方案，我没有很好地阅读规格（我的错）：

```
var jsonArray = [{"Name":"Pini","ID":"111"}, {"Name":"Yaniv","ID":"123"}, {"Name":"Yoni","ID":"145"}];

var jsonConverted = {};
$(jsonArray).each( function() {
    jsonConverted.push([ this.Name, this.ID ]);
}); 
```

此解决方案使用 jQuery。**

# objective-c - 在 UIScrollview 中拖动 UIImageViews

> ID：13190492
> 
> 赞同：1
> 
> 时间：2012-11-02T06:37:01.560
> 
> 标签：objective-c

在我的应用程序中，我有 UIScrollview 和其中的多个 uiimageviews，在这里我已经完成了这一切，我想允许用户重新排列 uiscrollview 周围的 uiimageviews。即**像 ANDROID 中的画廊视图**。做这个的最好方式是什么。这是我如何将 uiimageview 添加到滚动视图的代码

```
UIGraphicsBeginImageContext(myview.frame.size);
CGContextRef context = UIGraphicsGetCurrentContext();

[myview.layer renderInContext:context];

UIImage *screenShot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 

myimageview.image=screenShot;

[myscrollview addSubview:myimageview]; 
```

# jquery - 新添加的表单元素不会绑定到 MVC 3 中的客户端验证

> ID：13190498
> 
> 赞同：0
> 
> 时间：2012-11-02T06:37:35.870
> 
> 标签：jquery, ajax, asp.net-mvc-3, client-side, unobtrusive-validation

我在 MVC 3 中有 AJAX 表单。

在索引视图中：

```
<div id="ajaxcontactform">
      <% Html.RenderPartial("ContactForm", Model); %>
</div> 
```

ContactForm 部分视图上的 AJAX 表单

```
<% using (Ajax.BeginForm("Contact", new AjaxOptions()
{
   UpdateTargetId = "ajaxcontactform",
   OnBegin = "ShowProcessing",
   OnComplete = "HideProessing",
   InsertionMode = InsertionMode.Replace
}))
{%>
<%: Html.ValidationSummary()%>
<%: Html.TextBoxFor(m => m.Name, new { Class = "contacttextform" })%>
<%}%> 
```

我的控制器：

```
 [HttpPost]
    public ActionResult Contact(ContactForm form)
    {
        if (Request.IsAjaxRequest())
        {
             // on error
            if (!ModelState.IsValid)
                return PartialView("ContactForm", form);

           // TODO: My data processing code here  

           // return partial view on success
             return PartialView("ContactForm", new ContactFormModel());   
         }
   } 
```

我的客户端自定义验证 JavaScript 代码：我刚刚在母版页中引用了这个文件。此代码在 DOM 加载/创建一次时运行一次。

```
 $.validator.addMethod("phonenumber", function (value, element, params) {

    if (!value)
        return true;
    var regex = /^[\s\d\+\(\)]+$/;
    return regex.test(value);
   });
   jQuery.validator.unobtrusive.adapters.addBool("phonenumber"); 
```

当我第一次加载我的页面时，我的客户端验证工作正常。但是，一旦我成功提交表单并尝试再次提交我的表单。我的客户端验证不起作用，我的表单在服务器端验证它。

添加新元素或重新渲染部分视图后，我想再次绑定客户端验证。

另外，一旦成功提交，我应该如何清除我的表单值。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:02:30.520

您可以订阅 中的`OnSuccess`方法`AjaxOptions`并使用该方法重新附加客户端验证新添加的元素`$.validator.unobtrusive.parse`：

```
function OnSuccess(result) {
    $('form').removeData('validator');
    $('form').removeData('unobtrusiveValidation');
    $.validator.unobtrusive.parse('form');
} 
```

# java - 在这种情况下如何为hadoop编写分区程序？

> ID：13190502
> 
> 赞同：0
> 
> 时间：2012-11-02T06:38:09.503
> 
> 标签：java, python, hadoop, mapreduce

我有一个像“签名[空白]日期[空白]时间”这样的密钥，但我想要在同一个 bin 中具有相同签名的所有密钥。如何为这种情况编写分区程序？

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:01:16.340

默认使用 HashParititioner，整个 hashcode 用于计算 reducer 数量。为了完成您的任务，您可以只散列部分密钥（在您的情况下为签名），并且所有具有相同签名的密钥将分配给同一个减速器。

试试这个代码：

```
public class HashPartitioner<K, V> extends Partitioner<K, V> {

   public int getPartition(K key, V value,int numReduceTasks) {

      return key.toString().split("\s+")[0].hashCode() % numReduceTasks;
   }
} 
```

# java - ImageIcons 不显示 - JAVA

> ID：13190503
> 
> 赞同：0
> 
> 时间：2012-11-02T06:38:26.097
> 
> 标签：java, swing, paint, drawimage, imageicon

我的问题是背景图像覆盖了我在 JPanel 中使用的所有 ImageIcon。例如，在此代码片段中，我尝试将 setIcon 设置为我在面板中拥有的标签之一。但是背景图像覆盖了它。我怎样才能解决这个问题？我是在paint方法之外还是在它内部使用label.setIcon()都没有关系。

```
public void paint(Graphics g) {
        super.paint(g);     
        g.drawImage(backgroundImage, 0, 0, this);
            label1.setIcon(iconImage);

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:26:46.877

1.  将基本面板的布局设置为`BorderLayout`
2.  将 a 添加`JLabel`到基本窗格，将其图标设置为背景图像
3.  设置布局，如果`JLabel`你需要什么
4.  将其余组件添加到此标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:09:33.620

尝试将 label.seticon 放在被覆盖的方法之外。参考：

> [如何在 Eclipse Helios 中设置 JFrame 或 JPanel 背景图像](https://stackoverflow.com/questions/9816403/how-to-set-jframe-or-jpanel-background-image-in-eclipse-helios)

您可以将其实现为；

```
 public void paintComponent(Graphics g) {
 g.drawImage(img, 0, 0, null);
 } 
```

或者

```
public void paint(Graphics g) { 
if (img!=null) g.drawImage(img, 0, 0, null); 
super.paint(g); 
} 
```

# kohana - 在 Kohana 3.3 中使用 I18n 功能

> ID：13190505
> 
> 赞同：0
> 
> 时间：2012-11-02T06:38:30.903
> 
> 标签：kohana, kohana-3

我在使用 Kohana 3.3 中的 I18n 功能时遇到问题

我的 I18n 文件夹结构如下

i18n/

*   zh/
    *   我们.php
*   zh/
    *   .php
    *   cn.php

我遇到的问题是，在我阅读的任何地方都应该可以像这样加载语言，`i18n::lang('en-us');`因为 api 声明它会在“-”字符上爆炸字符串，因此默认目标语言“en-us”会导致搜索以下文件：

```
/application/i18n/en.php
/application/i18n/en/us.php 
```

它似乎只在我使用`i18n::lang('en/us');`而不是加载正确的语言文件时`i18n::lang('en-us');`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:53:15.797

为我工作。这些调用对 Kohana 来说是等价的：

```
I18n::lang('en-us'); 
I18n::lang('en us');
I18n::lang('en_us'); 
```

当您使用 'en/us' 值时，I18n 不会加载`i18n/en.php`文件，只会加载`i18n/en/us.php`.

对于您的问题，我只能提出一个原因：

您正在使用`__()`函数，它忽略默认语言的翻译（“en-us”是硬编码的）。因此，当您调用 I18n::lang('en/us') 时，默认语言仍然是英语，但它与 'en-us' 不同。小技巧:)

您可以使用文件扩展 I18n 类`APPPATH/classes/I18n.php`（标准 Kohana 方式），并为该功能添加您自己的版本：

```
// translate always!
function __($string, array $values = NULL, $lang = 'en-us')
{
    $string = I18n::get($string);

    return empty($values) ? $string : strtr($string, $values);
} 
```

# json - 对象不支持 IE9 兼容视图中的属性或方法“字符串化”

> ID：13190506
> 
> 赞同：3
> 
> 时间：2012-11-02T06:38:31.440
> 
> 标签：json

我正在使用带有处理程序的 JASON 来执行一些服务器端操作。它适用于除 IE 7 和 IE9 兼容视图之外的所有浏览器。我正在使用 Douglas Crockford 提供的 JSON2.js。在执行以下行时： return JSON.stringify(request);

错误消息“Microsoft JScript 运行时错误：对象不支持属性或方法 'stringify'”

# android - Android 在 Asynctask 之前检查网络连接

> ID：13190511
> 
> 赞同：1
> 
> 时间：2012-11-02T06:38:40.940
> 
> 标签：android

谁能更正我的代码。我收到错误“FreeFragment 类型的方法 getApplicationContext() 未定义。FreeFragment 类型`" and "`的方法 getSystemService(String) 未定义”。我希望它在 Asynctask 运行之前检查互联网连接。

```
public class FreeFragment extends SherlockListFragment implements
            ActionBar.TabListener {

        static final String URL = "https://myxml.xml";
        static final String KEY_SONG = "song";
        static final String KEY_ID = "id";
        static final String KEY_TITLE = "title";
        static final String KEY_CAT_ARTIST = "artistcat";
        static final String KEY_DURATION = "duration";
        static final String KEY_THUMB_URL = "thumb_url";
        static final String KEY_BIG_URL = "big_url";
        static final String KEY_CAT_URL = "cat_url";
        static final String KEY_DESC = "cat_desc";
        ArrayList<HashMap<String, String>> menuItems;
        ListAdapter adapter;

        private Fragment mFragment;

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            if (!isNetworkAvailable()) {
                Toast.makeText(getApplicationContext(),
                        "Internet Connection Required", Toast.LENGTH_SHORT).show();
                //finish(context);
            } else { 
            new loadListView().execute();
            }
            super.onActivityCreated(savedInstanceState);
        }

         private boolean isNetworkAvailable() {
             ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
             NetworkInfo activeNetworkInfo = connectivityManager
                     .getActiveNetworkInfo();
             return activeNetworkInfo != null;
         }

        public class loadListView extends AsyncTask<Integer, String, String> {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
            }

            @Override
            protected String doInBackground(Integer... args) {
                // updating UI from Background Thread
                menuItems = new ArrayList<HashMap<String, String>>();

                XMLParser parser = new XMLParser();
                String xml = parser.getXmlFromUrl(URL); // getting XML
                Document doc = parser.getDomElement(xml); // getting DOM element

                NodeList nl = doc.getElementsByTagName(KEY_SONG);
                // looping through all item nodes <item>
                for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element) nl.item(i);
                    // adding each child node to HashMap key => value
                    map.put(KEY_ID, parser.getValue(e, KEY_ID));
                    map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                    map.put(KEY_CAT_ARTIST, parser.getValue(e, KEY_CAT_ARTIST));
                    map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                    map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
                    map.put(KEY_BIG_URL, parser.getValue(e, KEY_BIG_URL));
                    map.put(KEY_CAT_URL, parser.getValue(e, KEY_CAT_URL));
                    map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
                    // adding HashList to ArrayList
                    menuItems.add(map);
                }
                return null;
            }

            @Override
            protected void onPostExecute(String args) {

                if (getActivity() != null) {
                    adapter = new MainPageLazyAdapter(getActivity(), menuItems);
                    setListAdapter(adapter);

                    ListView lv = getListView();

                    lv.setOnItemClickListener(new OnItemClickListener() {

                        @Override
                        public void onItemClick(AdapterView<?> parent, View view,
                                int position, long id) {
                            String thumburl;
                            String bigurl;
                            String caturl;
                            String title;
                            String desc;
                            String artist;
                            Intent in;

                            title = ((TextView) view.findViewById(R.id.title))
                                    .getText().toString();
                            artist = ((TextView) view.findViewById(R.id.artist))
                                    .getText().toString();
                            desc = ((TextView) view.findViewById(R.id.desc))
                                    .getText().toString();
                            thumburl = ((TextView) view
                                    .findViewById(R.id.thumb_image)).getText()
                                    .toString();
                            caturl = ((TextView) view.findViewById(R.id.cat))
                                    .getText().toString();
                            bigurl = ((TextView) view.findViewById(R.id.big_image))
                                    .getText().toString();

                            in = new Intent(getActivity(),
                                    SingleImageViewActivity.class);

                            in.putExtra(KEY_TITLE, title);
                            in.putExtra(KEY_DESC, desc);
                            in.putExtra(KEY_CAT_URL, caturl);
                            in.putExtra(KEY_THUMB_URL, thumburl);
                            in.putExtra(KEY_BIG_URL, bigurl);
                            in.putExtra(KEY_CAT_ARTIST, artist);
                            startActivity(in);

                        }
                    });
                }

            }
        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            mFragment = new FreeFragment();
            ft.add(android.R.id.content, mFragment);
            ft.attach(mFragment);
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            ft.remove(mFragment);
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:41:51.213

使用[FreeFragment.getActivity()](http://developer.android.com/reference/android/app/Fragment.html#getActivity%28%29)方法访问 Fragment 的 Activity，然后获取 Context 和 SystemService

# xcode4.2 - 发生爆炸时使物体破碎或散开

> ID：13190513
> 
> 赞同：1
> 
> 时间：2012-11-02T06:38:49.110
> 
> 标签：xcode4.2

框架中放置了一颗炸弹。炸弹周围放置了5个物体。当炸弹爆炸时，需要将这 5 个物体粉碎。物体必须以直线路径远离炸弹（可以是对角线、垂直或水平方向）。这些对象即使在爆炸后也必须在框架中。

# .net - Visual Studio 2012 本地主机与 Apache (XAMPP) 本地主机？

> ID：13190522
> 
> 赞同：0
> 
> 时间：2012-11-02T06:39:29.767
> 
> 标签：.net, visual-studio, xampp

到目前为止，我正在使用 VB.NET Visual Studio 2012，我想知道同时安装 XAMPP 是否会导致 localhost 出现问题？

操作系统是：Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:19:36.837

如果您谈论的是 Visual Studio Web 服务器，那么它通常会选择一个免费的高端端口，因此您不会有任何问题。

但是，如果您同时运行 IIS 和 XAMPP，如果您尝试将任一服务器绑定到与另一台服务器相同的端口，即使您使用主机头 (IIS) 或虚拟主机 (Apache)，也会出现问题.

要解决此问题，只需将 IIS 或 Apache 上的端口号更改为其他值，例如在端口 80 上运行 IIS，在端口 8080 上运行 Apache。

# asp.net - ORA-12154 错误

> ID：13190530
> 
> 赞同：0
> 
> 时间：2012-11-02T06:39:55.987
> 
> 标签：asp.net, oracle10g

当我尝试为 asp.net 表单使用 oracle 10g 创建数据连接时，我收到错误 ORA-12154 错误。谁能帮我解决这个问题？由于我是 oracle 新手，所以对我来说看起来很难。但与 sqlexpress 的连接工作正常！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:51:20.713

问题是你的 TNS。检查这三个解决方案：

*   确保“TNSNAMES”列为 Oracle Net 配置文件 (SQLNET.ORA) 中 NAMES.DIRECTORY_PATH 参数的值之一

*   验证 TNSNAMES.ORA 文件是否存在并且位于正确的目录中并且可以访问。

*   检查用作连接标识符的网络服务名称是否存在于 TNSNAMES.ORA 文件中。

# svn - TeamCity SVN 外部不同的凭据

> ID：13190536
> 
> 赞同：2
> 
> 时间：2012-11-02T06:40:17.303
> 
> 标签：svn, continuous-integration, teamcity, svn-externals

我在 TeamCity 7.1.1 中有一个项目，我为其定义了 VCS 根。VCS 根是我想从中签出的外部 SVN 服务器。存储库中的项目包含我们内部 SVN 服务器的 svn:external。

外部 SVN 服务器的凭据与内部服务器的凭据不同。这意味着我不能将“外部支持”设置为“完全支持”。

TeamCity 文档指出我应该使用相同的密码，或者根本不应该为我的外部人员使用密码。这不是最好的选择。

有没有办法为特定的存储库配置始终使用一组特定的凭据？或任何其他解决方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:16:10.023

虽然 TeamCity 可能不直接支持这一点，但您可以使用多个 VCS 根作为解决方法。

如果为主项目定义一个 VCS 根，为外部定义另一个 VCS 根，则可以为外部提供不同的凭据。

您可以使用 TeamCity 中的[VCS 签出规则](http://confluence.jetbrains.net/display/TCD7/VCS+Checkout+Rules)将签出的文件夹放置在项目结构中您需要的位置。

请注意，您可能需要从第一个根目录中排除外部，因为它们将无法通过身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:17:10.540

我在 TeamCity 的 issuetracker 中问了这个问题，得到了答案：http: [//youtrack.jetbrains.com/issue/TW-24284](http://youtrack.jetbrains.com/issue/TW-24284)

# java - 在Java中合并两个数组列表

> ID：13190538
> 
> 赞同：1
> 
> 时间：2012-11-02T06:40:20.310
> 
> 标签：java, collections, arraylist

我有两个数组列表，说 currentTopicsDetailsList 和 updatedTopicsDetailsList。列表属于对象主题（类），即

```
List<Topic> currentTopicsDetailsList;
List<Topic> updatedTopicsDetailsList; 
```

类 Topic 具有属性

*   秩
*   社会指数
*   推特索引
*   新闻索引

我想用 updatedTopicsDetailsList 值更新 currentTopicsDetailsList 中的值，
例如

*   currentTopicsDetailsList[4].rank=158
*   currentTopicsDetailsList[4].socialIndex= +245
*   currentTopicsDetailsList[4].twitterIndex=-345
*   currentTopicsDetailsList[4].newsIndex=+340

*   updatedTopicsDetailsLIst[4].rank=null

*   更新的TopicsDetailsLIst[4].socialIndex= 300
*   updatedTopicsDetailsLIst[4].twitterIndex=-56
*   updatedTopicsDetailsLIst[4].newsIndex=+340

我想用 updatedTopicsDetailsList[4] 覆盖 currentTopicsDetailsList[4] ，条件是无论哪个具有 null 都应该被忽略，即 rank 属性应该是 158，即使它在 updatedTopicsDetailsList[4].rank 中为 null

现在正在对空字符串和空字符串进行 FOR 循环索引级别比较，但是是否有另一种快速的做事方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:47:38.997

只需使用`Set`/ `HashSet`。将列表之一转换为`Set`. 以及使用`addAll`方法。

**注意**确保覆盖`equals`和`hashcode`方法`Topic`。

```
List<Topic> currentTopicsDetailsList;
List<Topic> updatedTopicsDetailsList; 
HashSet<Topic> set = new HashSet<Topic>(currentTopicsDetailsList);
set.addAll(updatedTopicsDetailsList);

updatedTopicsDetailsList = new ArrayList<Topic>(set); 
```

**更新评论**

```
 do i have to include all the fields for generating equals() & hascode() ? 
```

抱歉，我不确定，生成`equals()`&`hascode()`因为它的所有字段取决于您的要求。

例如 ：

`Topic`有一个字段名称`id`。由于两个`Topic`实例相同`id`，如果我们假设这两个实例相同，则只需`id`放入`equals()`& `hascode()`。其余字段无需填写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T07:05:34.353

只需在`Topic`类中放置一个方法即可更新

```
public void update(Topic updatedTopic){
   if(updatedTopic.getRank()!=null){
      this.rank = updatedTopic.getRank();
   }
   // similarly u can check others
} 
```

并且要合并到列表中，您可以这样做

```
int size = currentTopicsDetailsList.size();
for(int i=0;i<size;i++) {
  Topic uT = updatedTopicsDetailsLIst.get(i);
  Topic cT = currentTopicsDetailsList.get(i);
  cT.update(uT); 
} 
```

确保两个列表都包含相同的排序`Topic`

# java - 如何处理 IOExceptions？

> ID：13190541
> 
> 赞同：4
> 
> 时间：2012-11-02T06:40:56.660
> 
> 标签：java

我是一名学生，这是我学习 Java 的第二周。作业是从键盘获取数据，包括学生姓名、ID 和三个考试成绩。然后使用 JOptionPane 显示主要数据。我相信我已经完成了所有这些。我已经把作业做得更远了，这样我也可以了解单元测试。

问题是 ID 和测试分数应该是数字。如果输入非数字值，我会收到 IOExceptions。我想我需要使用 try/catch，但到目前为止我所看到的一切都让我感到困惑。有人可以分解 try/catch 的工作原理以便我理解吗？

```
//Import packages
import java.io.*;
import java.util.Scanner;
import javax.swing.JOptionPane;

/**
 *
 * @author Kevin Young
 */

public class StudentTestAverage {

    //A reusable method to calculate the average of 3 test scores
    public static double calcAve(double num1, double num2, double num3){
        final double divThree = 3;
        return (num1 + num2 + num3 / divThree);
    }

    //A method to turn a doule into an integer
    public static int trunAve(double num1){
        return (int) num1;
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws IOException{
        //Input variables
        String strStudentName = "";
        int intStudentID = 0;
        double dblScore1 = 0.0;
        double dblScore2 = 0.0;
        double dblScore3 = 0.0;
        String strNumber = ""; //Receives a string to be converted to a number

        //Processing variables
        double dblAverage = 0.0;
        int intAverage = 0;

        /**
         * Create objects that read keyboard data from a buffer
         */

        //Create the reader and Buffer the input stream to form a string
        BufferedReader brObject = 
                new BufferedReader(new InputStreamReader(System.in));

        //Get the student's name
        do{
            System.out.print("Please enter the student's name?");
            strStudentName = brObject.readLine();
        }while(strStudentName.equals(""));

        //Use the scanner to get the student ID
        //this method converts the string to an Integer
        Scanner scan = new Scanner(System.in);

        do{
            System.out.print("Please enter the student's ID?");
            intStudentID = scan.nextInt();
       }while(Double.isNaN(intStudentID));
       /*
        * The above do while loop with the Scanner isn't working as
        * expected. When non-numeric text is entered it throws an 
        * exception. Has the same issue when trying to use parseInt().
        * Need to know how to handle exceptions.
        */

       /**
        * Us JOption to get string data and convert it to a double
        */
        do{
            strNumber = JOptionPane.showInputDialog("Please enter the first test score?");
            dblScore1 = Double.parseDouble(strNumber);
        }while(Double.isNaN(dblScore1));

        do{
            strNumber = JOptionPane.showInputDialog("Please enter the second test score?");
            dblScore2 = Double.parseDouble(strNumber);
        }while(Double.isNaN(dblScore2));

        do{
            strNumber = JOptionPane.showInputDialog("Please enter the third test score?");
            dblScore3 = Double.parseDouble(strNumber);
        }while(Double.isNaN(dblScore3));

        //Calculate the average score
        dblAverage = calcAve(dblScore1, dblScore2, dblScore3);

        //Truncate dblAverage making it an integer
        intAverage = trunAve(dblAverage);

        /**
         * Display data using the JOptionPane
         */
        JOptionPane.showMessageDialog(
                null, "Student " + strStudentName + " ID " + 
                Integer.toString(intStudentID) + " scored " +
                Double.toString(dblScore1) + ", " + 
                Double.toString(dblScore2) + ", and " +
                Double.toString(dblScore3) + ".\n For an average of " +
                Double.toString(dblAverage));

        //Output the truncated average
        System.out.println(Integer.toString(intAverage));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:45:58.403

```
try{
  // code that may throw Exception
}catch(Exception ex){
 // catched the exception
}finally{
 // always execute
}

do{
    try{
      System.out.print("Please enter the student's name?");
      strStudentName = brObject.readLine();
    }catch(IOException ex){
       ...
    }
}while(strStudentName.equals("")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:01:10.593

您不应该使用 try-catck 块来检查数字格式。它是昂贵的。您可以使用以下代码部分。它可能更有用。

```
 String id;
    do{
        System.out.print("Please enter the student's ID?");            
        id = scan.next();
        if(id.matches("^-?[0-9]+(\\.[0-9]+)?$")){
            intStudentID=Integer.valueOf(id);
            break;
        }else{
            continue;
        }

   }while(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T07:03:05.413

问题是您正在使用 nextInt() 方法，该方法需要一个整数作为输入。您应该验证用户输入或向用户提供特定说明以输入有效数字。

**在 java 中使用 try catch：**

异常只是以意外/意外的方式执行指令。Java 通过 try,catch 子句处理异常。语法如下。

```
try{  

//suspected code

}catch(Exception ex){

//resolution

} 
```

将*可能*引发异常的可疑代码放入**try**块中。*如果*在执行可疑代码时出现问题，则在**catch**块中放置解决问题的代码。

 *您可以在此处找到全面的解释，并[在](http://docs.oracle.com/javase/tutorial/essential/exceptions/)[此处](http://www.tutorialspoint.com/java/java_exceptions.htm)找到摘要版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T06:47:13.053

试试这个：

```
 do{
     try{
        System.out.print("Please enter the student's ID?");
        intStudentID = scan.nextInt();
     }catch(IOException e){
         continue; // starts the loop again
     }
 }while(Double.isNaN(intStudentID)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T06:49:56.310

我建议您只包装引发异常的代码，而不是用代码包装大量行。
在 catch 块中，您应该考虑如果遇到 IOException 该怎么办。
正如@Quoi 所建议的那样，您只能有一个 catch 块，
但是您可以考虑为每个异常设置不同的 catch 块
（请记住，catch 块的顺序应该是子类排在第一位的方式）。比如我开发的某个应用，
有的异常很严重，所以我们停止处理，有的不严重，所以我们继续下一个阶段。
所以我们的 catch 块设置了一个布尔标志是否继续到下一个阶段。*

# xslt - XSL 根据条件添加属性

> ID：13190543
> 
> 赞同：6
> 
> 时间：2012-11-02T06:41:19.050
> 
> 标签：xslt

如果 xslt 中的条件是否有任何一行，例如假设我只想基于某些条件添加属性

例如

```
<name (conditionTrue then defineAttribute)/> 
```

只是为了避免如果

```
<xsl:if test="true">
   <name defineAttribute/>
</xsl:if> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T07:02:21.033

您可以使用它`<xsl:element>`来创建输出元素`<xsl:attribute>`及其属性。然后添加条件属性很简单：

```
<xsl:element name="name">
  <xsl:if test="condition">
     <xsl:attribute name="myattribute">somevalue</xsl:attribute>
  </xsl:if>
</xsl:element> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-02T12:31:15.010

**这是一个如何完全避免需要指定的示例`<xsl:if>`：**

**让我们拥有这个 XML 文档**：

```
<a x="2">
 <b/>
</a> 
```

并且我们只想在父级的属性值为偶数的情况下添加到`b`属性中。`parentEven="true"``x``b`

**以下是在没有任何明确的条件指令的情况下如何做到这一点**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="a[@x mod 2 = 0]/b">
  <b parentEven="true">
   <xsl:apply-templates select="node()|@*"/>
  </b>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于上述 XML 文档时，会产生所需的正确结果**：

```
<a x="2">
   <b parentEven="true"/>
</a> 
```

**请注意**：

使用模板和模式匹配可以完全消除指定显式条件指令的需要。XSLT 代码中显式条件指令的存在应被视为“代码异味”，应尽可能避免。

# android - Android 直接将 Instagram 包名调用到 Intent 中

> ID：13190546
> 
> 赞同：1
> 
> 时间：2012-11-02T06:41:33.990
> 
> 标签：android

> **可能重复：**
> [Android Instagram](https://stackoverflow.com/questions/13177677/android-instagram)

请给我在 Intent android 中调用 Instagram 应用程序包的示例。谢谢。com.instagram.android - 不工作 android.content.ActivityNotFoundException: 没有找到处理 Intent 的活动

# javascript - 访问 div 内没有 id 的 iframe（div 有 id）

> ID：13190548
> 
> 赞同：1
> 
> 时间：2012-11-02T06:41:42.680
> 
> 标签：javascript, jquery, html, iframe

我有一个 id 为“test”的 div。里面是一个没有 id 的 iframe。我需要访问这个 iframe 的正文内容。如何使用 JS/Jquery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:55:07.853

像这样访问它：

```
$('#test>iframe').contents.find('body') // This will get you body tag 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:55:42.033

jquery 会做到的。

```
 var objiframe=$('#test').find('iframe'); 
```

你会进去`iframe`的`objiframe`

然后使用`objiframe`with 选择器来获取或设置 iframe 的属性和内容。

# facebook - Facebook 用户到用户请求自定义消息问题

> ID：13190549
> 
> 赞同：0
> 
> 时间：2012-11-02T06:41:44.693
> 
> 标签：facebook, notifications, facebook-app-requests

我在 facebook 上有一个沙盒模式的应用程序。

当我通过消息（自然邀请）从这个应用程序向我的朋友发送应用请求（用户对用户）时

我没有看到我的自定义消息，而是在接收端看到通知为

'XXXX 向您发送邀请请求'

我已经尝试了一些开发人员朋友指出的“new_style_message”为真，但我仍然看不到我的自定义消息。

请找到我的代码片段，让我知道需要的任何更改。

```
enter code here 
```

FB.ui({ method: 'apprequests', message: 'Welcome and meet me', title: 'Request', new_style_message: true, to: _selected_ids

```
 }, callbackhandling); 
```

这是我发送请求的代码....但接收用户没有看到任何自定义消息。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:35:12.100

> 当我通过消息（自然邀请）从这个应用程序向我的朋友发送应用程序请求（用户到用户）时，我看不到我的自定义消息。相反，我在接收端看到通知为
> 
> XXXX 向您发送邀请请求

这就是邀请的**工作**方式——它在请求文档中。

> 我已经尝试将 *new_style_message* 设置为由一些开发人员朋友指出的 true，但我仍然看不到我的自定义消息。

这不再起作用了。

# javascript - 在 asp.net 网站上加载页面后，如何组合 javascript 并加载它们？

> ID：13190552
> 
> 赞同：0
> 
> 时间：2012-11-02T06:42:05.817
> 
> 标签：javascript, asp.net, performance, onload

我刚刚阅读了这篇[SE 帖子](https://stackoverflow.com/questions/3291681/combining-javascript-files-as-recommended-by-yslow-optimal-size)，其中解释了所问的问题与我所问的类似。如果可能，Yslow 建议组合所有外部 javascript。根据我在某个网站上找到的一些建议，我实际上已经采用了内部 javascript 并将它们制作成一个外部 .js 文件并将其放在我的 /scripts 文件夹中。但这引出了我的 2 个（类似）问题；我认为不需要单独的帖子。

**(1)** - 我将如何组合 javascript 代码？只留下一个空行，然后复制并粘贴另一个javascript，依此类推，直到它全部在一个文件中？

**(2)** - 我有一个带有 5 个母版页的 asp.net 网站。5 个中有 4 个有 6 个 javascript 文件（全部缩小，有些是我自己使用的一些有效的压缩工具）。但是我在 SE 帖子和在线阅读到您应该**在页面加载后加载**脚本。您如何在 asp.net 网站上执行此操作？我所有的 .js 文件都在

@bluesmoon 给出了一个很好、彻底的答案，但我无法理解：

```
To load a script after page load, do something like this:

// This function should be attached to your onload handler
// it assumes a variable named script_url exists.  You could easily
// extend it to use an array of scripts or figure it out some other
// way (see note late)
function lazy_load() {
    setTimeout(function() {
            var s = document.createElement("script");
            s.src=script_url;
            document.body.appendChild(s);
        }, 50);
}

This is called from onload, and sets a timeout for 50ms later at which point it will 
add a new script node to the document's body. The script will start downloading after 
that. Now since javascript is single threaded, the timeout will only fire after onload 
has completed even if onload takes more than 50ms to complete. 
```

我真的不明白他在说什么或如何去实施它。就是这样......我只需要帮助**组合javascript并****在页面加载后**加载它们（或它）；我在我的母版页或 .aspx 页面中没有看到任何“onload”字样。感谢您为我提供的任何帮助或指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:47:22.403

看看[Cassette](http://getcassette.net/)并在您的结束 body 标签之前渲染您的包

# android - 如何使用绘图过滤器？

> ID：13190554
> 
> 赞同：3
> 
> 时间：2012-11-02T06:42:11.823
> 
> 标签：android, draw

网上关于 DrawFilter 的讨论很少，所以我找不到以下问题的正确答案：

[这里](http://developer.android.com/reference/android/graphics/DrawFilter.html)已经记录了：

> DrawFilter 子类可以安装在 Canvas 中。当它存在时，它可以（临时）修改用于绘制的油漆。有了这个，过滤器可以禁用/启用抗锯齿，或更改所有绘制的颜色。

所以我确实想使用此功能来将画布中绘制的颜色更改为黑色，但它是如何完成的呢？因为这个类没有方法来覆盖它的一个谜，我应该如何将它子类化以实现记录的内容......

顺便说一句，对于从未见过它的人来说，canvas 有一个应该使用的方法 canvas.setDrawFilter(DrawFilter)，我试图查看开源代码，但我没有得到任何线索......

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T08:45:18.223

唯一可用的[子类](http://developer.android.com/reference/android/graphics/PaintFlagsDrawFilter.html)似乎`DrawFilter`专门用于调整`Paint`标志中的位：

`setDrawFilter(new PaintFlagsDrawFilter(Paint.ANTI_ALIAS_FLAG,Paint.DITHER_FLAG))`

所以，我怀疑它有多大用处。

另外，请查看[`ColorFilter`](http://developer.android.com/reference/android/graphics/ColorMatrixColorFilter.html). 和[`setSaturation()`](http://developer.android.com/reference/android/graphics/ColorMatrix.html#setSaturation%28float%29)的[`ColorMatrix`](http://developer.android.com/reference/android/graphics/ColorMatrix.html)。这可能有助于绘制灰度图。

**示例**：在画布上将彩色图像 ( ) 绘制`inImg`为黑白 (`outImg`大小)：`size`

```
 Bitmap outImg = Bitmap.createBitmap(size, size, Bitmap.Config.RGB_565);
    Canvas can = new Canvas(outImg);
    ColorMatrix cm = new ColorMatrix();
    cm.setSaturation(0);
    Paint pnt = new Paint(Paint.DITHER_FLAG);
    pnt.setColorFilter(new ColorMatrixColorFilter(cm));
    can.drawBitmap(inImg, 0, 0,pnt); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-08-06T14:21:21.607

研究 Android SDK 示例目录中的 com.example.android.apis.graphics 类。

# c - /dev/random 不阻塞

> ID：13190562
> 
> 赞同：1
> 
> 时间：2012-11-02T06:43:06.923
> 
> 标签：c, linux, unix, random, entropy

我正在尝试从 /dev/random 收集真正的随机数。这是我的简单代码：

```
u_char buf[256];

memset(buf, 0, 256);

int dev = open("/dev/random", O_RDONLY);

int nbr = read(dev, buf, 100);

printf("Number of bytes returned : %d\n", nbr); 
```

正如你所看到的，我要求 100 个随机字节，但是当我运行这个程序时，我总是在 15 到 30 范围内的变量*nbr*中得到输出，这是可以理解的，因为 /dev/random 并不总是有足够的熵，但我的期望是在 read() 时，/dev/random 应该阻塞，直到它将我的缓冲区填充到 100 个随机字节，这在这种情况下不会发生并且程序不会阻塞。我阅读了 /dev/random 的手册页。它说

> 当熵池为**空**时，来自 /dev/random 的读取将被阻塞，直到收集到额外的环境噪声。

这是否真的意味着 /dev/random 只会在熵池为**空**时阻塞，并且在它有任何数量的数据时不会阻塞，无论它是否小于所需的字节？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T06:47:24.847

这对 来说并不特殊`/dev/random`，这只是 的行为`read`。该参数是一个缓冲区大小，`read`将返回该大小可用的内容。

考虑使用`FILE*`and`fread`来读取一个 100 字节的块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T08:44:39.267

简而言之，除非***没有***要读取的数据，否则 read 不会阻塞。它总是会返回它可以读取的数量或错误，即使这比你想要的数据少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T07:56:28.230

您的程序正在读取 100 个字节`/dev/random`。如果您通过一些手动操作（例如键入命令，或者只是 bash 的向上箭头键）重新启动它，则该手动操作（按键序列）正在为`random(4)`. 所以你永远不会处于阻塞状态。

[read(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)系统调用的语义`/dev/random`是它会尝试读取一些字节。如果至少读取了一个字节，则`read(2)`系统调用成功并且不会阻塞。

此外，正如我评论的那样，最新的硬件和最新的内核具有足够好的随机源，可能`random(4)`永远不会阻塞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-15T22:24:07.790

/dev/random 从 SHA1(entropy_pool_data) 获取数据。SHA1 仅输出 20 个字节。如果您希望获得真正的随机位，则从 /dev/random 请求超过 160 位是没有意义的。

# php - 更改查询字符串/ url 或替换部分 url/wordpress 永久链接

> ID：13190567
> 
> 赞同：0
> 
> 时间：2012-11-02T06:43:56.330
> 
> 标签：php, mysql, wordpress, url

我正在一个 wordpress 网站上工作。

一个页面包含不同保险公司的列表，每个列表项都有一个按钮，该按钮重定向到我显示该保险公司的其他详细信息的 wordpress 页面。我通过 url 传递公司的 ID 并通过 ID 显示记录。

```
<a href="<?php echo $row->Kiesuwverzekering."?id=".$row->health_id;?>">
<img src="<?php echo $img_path."img-1.png"; ?>" />
</a> 
```

`$row->Kiesuwverzekering` 是该页面的链接，我想显示公司的更多详细信息。

当重定向到该页面 url 变为

```
http://xyz.net/zorgverzekeringg/?id=40 
```

现在我希望它像 -

```
http://xyz.net/zorgverzekeringg/companyname 
```

我可以用公司名替换 ?id=40 吗？或者我应该在 url 中传递公司名称？如果是，那么如果公司名称像“我的公司”（没有“）我的意思是如果公司名称有更长的名称有空格怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:49:56.703

您可以放置​​页面名称/标识符而不是传递页面 ID。Wordpress 为每个页面创建一个永久链接。因此，首先查看页面 URL，然后获取该部分并将其添加到您的基本 URL 中。

# c++ - Win32 从 Window WndProc 获取发送事件的对象的 HWND

> ID：13190568
> 
> 赞同：0
> 
> 时间：2012-11-02T06:44:02.217
> 
> 标签：c++, winapi

我不确定如何从父窗口的 WndProc 获取发送事件的控件的 HWND。我需要 HWND 的原因是因为有关控件的一些元数据存储在其用户定义的插槽之一中（有关包装函数指针的信息等）但是经过一番摆弄之后，我似乎需要从父窗口过滤和调度事件.

即：用户点击一个按钮，但事件被发送到按钮父窗口的WM_COMMAND。如何从这里获取按钮的 HWND？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:54:02.973

对于从子控件发送的[WM_COMMAND](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647591%28v=vs.85%29.aspx)`HWND`消息，子控件发送到`lParam`.

# vb.net - 如何在 DevExpress XtraGrid 中找到选中的复选框？

> ID：13190569
> 
> 赞同：0
> 
> 时间：2012-11-02T06:44:04.113
> 
> 标签：vb.net, checkbox, devexpress, xtragrid

我正在开发一个桌面应用程序（VB.NET）。我有一个带有 Dev Express Xtra Grid 的表格。在网格中，我将第一列作为未绑定复选框（存储库项）。现在我已经制作了该功能，以便用户可以选中/取消选中复选框以选择行。

我想要实现的是：

1.  我在表格上有一个按钮。如果未选中复选框，则应禁用该按钮，否则应启用该按钮。默认情况下，当表单加载时，所有复选框都被选中，因此按钮被启用。用户可以取消选中所有复选框。那么我如何才能找到是否选中了任何一个复选框以使按钮启用/禁用。

2.  在按钮单击事件中，我想获取选中复选框的所有行的 id（这是复选框旁边的网格中的列）。

我确实有这样的想法，我必须首先为网格中的所有行创建 for 循环，然后为复选框创建 for 循环，以找到选中的复选框。但是没有把它放在一起。

请帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T02:03:55.100

如果您正在使用 XtraGrid GridControl，您希望更多地处理 GridView，它是 GridControl 中包含的编辑器。

通常，您会将数据绑定到 GridControl 的 DataSource 属性，但您想要用于用户体验的大多数其他事件和属性将与 GridView 本身相关。

使用 GridView 获得的一些更方便的方法和属性是`FocusedRowHandle`、`FocusedColumn`、`GetFocusedRow()`等。

因此，当您为该按钮注册单击事件时，在该方法内，存储对 gridview 的引用，即

```
private void SomeButtonClick(object sender, EventArgs e)
{
     var gridView = this.whateverYourGridViewIsNamedGridView;

     //Now, you can access the methods and properties of the gridView...

     //Say you want to obtain the focused row's handle
     var rowHandle = gridView.FocusedRowHandle;

     //Or, in your case, if you want to iterate through the rows or columns...
     for(GridColumn column in gridView.Columns)
     {
          if(condition)
          {
               //Do something
          }
     }
} 
```

根据您的情况，我建议您再次打开设计器。在左下角，单击就地编辑器存储库。你应该在`CheckEdit`这里看到你的。如果您选择`CheckEdit`，您应该能够单击小闪电并访问编辑器的事件。您想注册`CheckStateChanged`事件或`CheckedChanged`事件，只要编辑器的任何检查状态发生更改，就会触发该事件。

从这里开始，我将向您的域对象或视图模型添加一个 bool 来装饰该域对象，并在其上使用 bool for `isChecked`. 这样，当检查事件触发时，您可以处理设置此布尔值...例如：

```
private void CheckEventFiring(object sender, EventArgs e)
{
    //Get the currently focused row and cast it to your object
    //This will expose all the properties, including the aforementioned boolean value
    var currentRow = gridView.GetFocusedRow() as YourDomainObject; 

    //Based on checked state...
    currentRow.IsChecked = //Checked or Unchecked    
} 
```

现在您已经设置了这个，当您单击按钮时，您可以通过执行类似的操作从网格控件的数据源中获取“已检查”的所有项目...

```
var dataSource = gridControl.DataSource as List<YourDomainObject>().Where(x => x.IsChecked); 
```

现在您只有检查项目的行中的数据。当检查状态未选中时，对象上的布尔值应为假，选中时应为真。

让我知道这是否有意义。Dev Express 有一个小的学习曲线，但是一旦你掌握了它，它就很容易了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:42:18.070

我不确定“Dev Express Xtra Grid”。如果你仍然使用数据网格

首先声明并初始化一个变量，例如，flag - false，为 false

现在你可以使用一个 for 循环继续循环直到网格中的行数

在循环内，你检查“当前列”的复选框是否被选中

***if*** Checked 然后将标志设置为 true 并从循环中中断 ***else*** 继续循环

在循环检查当前标志值后，如果 flag=false 则禁用该按钮，否则启用该按钮。

对于您的第二个问题，请执行相同的循环并

内部循环检查是否检查当前行，如果为真，则取 id 列的值，否则继续。

我认为这个逻辑可以帮助你。:)

# c# - 在 WinRT 中带有换行的 GridView 方向

> ID：13190572
> 
> 赞同：9
> 
> 时间：2012-11-02T06:44:32.903
> 
> 标签：c#, xaml, gridview, windows-runtime

我正在用 c# 开发一个 WinRT 应用程序，我正在使用 GridView 来展示我的项目。

我希望我的项目水平排列，然后（当达到最大宽度时）下一个项目应该添加到新行中（**简单地说：** *只能看到垂直滚动条*）。

不幸的是，我当前的 xaml 只能在一行中添加水平项目（带有水平滚动条）

```
<GridView x:Name="GridChildItem" 
                  ItemContainerStyle="{StaticResource NonTickGridViewItem}" 
                  VerticalContentAlignment="Stretch" 
                  ItemTemplate="{StaticResource CustomChildItemTemplete}"
                  SelectionMode="Single" 
                  IsItemClickEnabled="True" 
                  ItemClick="gridViewChild_ItemClick_1"
                  Margin="0,40,0,0" 
                  Height="Auto"
                  Background="{StaticResource DropDownMenuBackColor}" 
                  ScrollViewer.IsHorizontalScrollChainingEnabled="False"
                  ScrollViewer.IsVerticalScrollChainingEnabled ="True"
                  VerticalAlignment="Top">
            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" Margin="20,0,0,0" />
                </ItemsPanelTemplate>

           </GridView.ItemsPanel>
 </GridView> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-02T10:36:24.153

如果您不想允许水平滚动，您需要使用`ListView`而不是`GridView`,

[来自 MSDN：](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.listview.aspx)

> 使用**ListView**显示垂直滚动的数据集合。要显示水平滚动的集合，请使用 **GridView**。

但是如果你想保持包装行为，你需要使用[WrapGrid](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.wrapgrid)作为`ItemsPanel`：

```
<ListView>
     <ListView.ItemsPanel>
          <ItemsPanelTemplate>
                <WrapGrid Orientation="Horizontal" />
           </ItemsPanelTemplate>
     </ListView.ItemsPanel>
</ListView> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-09T14:49:18.833

GridView 的默认 ItemsPanelTemplate 包含 Orientation="Vertical" 的 WrapGrid：它垂直堆叠并水平滚动。

如果将方向更改为水平，它将水平堆叠，但由于某种原因不会滚动。***您可以通过在 GridView***（而不是 WrapGrid！）上设置 ScrollViewer.VerticalScrollMode="Enabled" 来解决这个问题。

例子：

```
<GridView ScrollViewer.VerticalScrollMode="Enabled">
    <GridView.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapGrid Orientation="Horizontal" />
        </ItemsPanelTemplate>
    </GridView.ItemsPanel>
</GridView> 
```

# wpf-controls - 窗口属性未进入页面级别

> ID：13190574
> 
> 赞同：1
> 
> 时间：2012-11-02T06:44:46.143
> 
> 标签：wpf-controls

```
 <Grid>
    <Button Content="{Binding Title, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" HorizontalAlignment="Left" Height="50" Width="100"/>
    <Frame>
        <Frame.Content>
            <Page>
                <Button Content="{Binding Title, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" Height="50" Width="100"/>
            </Page>
        </Frame.Content>
    </Frame>
    </Grid> 
```

我正在尝试在页面按钮内绑定窗口标题属性它不工作，但在窗口内它是正常工作的。

这是我的 Xaml 代码：

![在此处输入图像描述](../Images/08809ffe70af4de272b94b0ec3a9ba18.png)

# php - 如何在 xamp php 中从 ffmpeg 创建视频缩略图

> ID：13190575
> 
> 赞同：2
> 
> 时间：2012-11-02T06:44:50.680
> 
> 标签：php

```
<?php
$ffmpeg = 'C:\ffmpeg\ffmpeg.exe';  

//video dir  
$video = 'C:\Users\Public\Videos\Sample Videos\upload.mp4';  
echo $video ;
//where to save the image  
$image = 'C:\ffmpeg\image\image.jpg';  

//time to take screenshot at  
$interval = 5;  

//screenshot size  pn 
$size = '640x480';  

//ffmpeg command  
//$cmd = "$ffmpeg -i ".$video "-deinterlace -an -ss".$interval". -f mjpeg -t 1 -r 1 -y    -s". $size." ". $image." 2>&1";  
$cmd="$ffmpeg -i ".$video." -ss 00:00:14.435 -f image2 -vframes 1 ".$image;
echo $cmd
//$cmd = "$ffmpeg  -i $video -f mjpeg -vframes 1 -s 150x150 -an myimage.jpg";
exec($cmd);
//$return = '$cmd';  
//print_r($outputData);
?> 
```

我想从视频文件创建 thunbnail。我已将 ffmpeg 正确配置为 xamp，如 phpinfo 中所示。我的代码运行正常，没有显示错误。但视频缩略图不在生成位置。请给我源代码。如果有可能 。它非常紧急

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:25:05.613

您的视频路径包含空格，因此必须引用

改变

```
$video = 'C:\Users\Public\Videos\Sample Videos\upload.mp4'; 
```

至

```
$video = '"C:\Users\Public\Videos\Sample Videos\upload.mp4"'; 
```

# ruby - 我可以避免写“红宝石”吗？

> ID：13190579
> 
> 赞同：1
> 
> 时间：2012-11-02T06:45:06.423
> 
> 标签：ruby, windows-7

每次我在 ruby​​ 中运行程序时，我都需要预先添加“ruby”命令，例如`ruby program_name.rb`

有没有其他方法可以避免这种情况？喜欢直接写`program_name.rb`还是只是`program_name`？

PS 我在 Windows(7) 上工作，我有很多文件，想分别运行每个文件。无法为每个 ruby​​ 文件制作批处理文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:02:04.903

您可以编写一个批处理文件 program_name.bat ，其中包含

```
ruby program_name.rb 
```

并运行它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T07:28:11.130

您可以使用以下指南在 Windows 上执行此操作：

[http://en.wikibooks.org/wiki/Ruby_Programming/Hello_world#Windows](http://en.wikibooks.org/wiki/Ruby_Programming/Hello_world#Windows)

（不过，我仍然不推荐 Windows 用于 Ruby 编程）

# javascript - jquery的茉莉花代码

> ID：13190581
> 
> 赞同：2
> 
> 时间：2012-11-02T06:45:19.847
> 
> 标签：javascript, jasmine

我是茉莉花测试的新手。我只知道如何安装和简单的 cmd 等`toEqual`。`toBe`但我不知道如何在 jasmine 中为这个 jquery 编写测试代码。

```
if ($('.products').length > 0) {
  $('a[data-toggle="pill"]').on('shown', function (e) {
    var elem = $(e.target).attr('href');
    elem = elem.replace('#', '');
    var obj = $('.products').siblings('.hero');
    $('.prod-title,.prod-subtitle').removeClass('active');
    $('.' + elem, obj).addClass('active');
  });
} 
```

任何人都可以告诉我，如何为这个程序编写测试代码。谢谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:37:17.773

首先，您的测试涉及 dom 交互，因此您需要使用[https://github.com/velesin/jasmine-jquery](https://github.com/velesin/jasmine-jquery) - jasmine-jquery 插件，它具有固定例程和一堆 jquery DOM 匹配器，例如`toBeVisible`，`toBeHidden`等等。

接下来你应该为你创造一个`if`条件`true`：

```
describe("We have at least one product", function() {

  beforeEach(function() {
    loadFixtures('several-products-fixture.html');        
  });

  it("should do some stuff in this example", function() {
    var $target = $('a[data-toggle="pill"]');
    $target.trigger('shown');

    var elem = $target.attr('href').replace('#', '');
    var obj = $('.products').siblings('.hero');

    expect($('.prod-title,.prod-subtitle')).not.toHaveClass('active');
    expect($('.' + elem, obj)).toHaveClass('active');
  });
});

// Next context
describe("We have not any product", function() {
  ...
}); 
```

您也可以在 github 上查看我的 jquery 插件，它使用 Jasmine 和夹具进行了测试： [https ://github.com/belogub/searchin](https://github.com/belogub/searchin)

# asp.net-web-api - asp.net web api中DelegatingHandler的生命周期

> ID：13190582
> 
> 赞同：3
> 
> 时间：2012-11-02T06:45:26.593
> 
> 标签：asp.net-web-api

我正在尝试使用 Ninject 来解决我在 asp.net web api 中的 DelegatingHandler 中的依赖关系。

我正在注册自定义委托处理程序，`global.asax`如下所示：

```
GlobalConfiguration.Configuration.MessageHandlers.Add(
            DependencyResolver.Current.GetService<AuthorizationHeaderHandler>()); 
```

我想知道 MessageHandlers 的生命周期是多少？使用 IoC 容器在委托处理程序中注入依赖项是否有意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:58:36.627

委托处理程序仅在应用程序启动时初始化一次。将它们视为进程中的中介，而不是单个请求/响应生命周期的一部分。

如果您希望对此进行更改 - 在 Codeplex 上有一个工作项可供更改 - [http://aspnetwebstack.codeplex.com/workitem/62](http://aspnetwebstack.codeplex.com/workitem/62)您可以投票支持该功能，它可能会被引入 Web API vNext。

目前，将任何东西注入处理程序的最佳选择是手动解决依赖关系，因此（不幸的是）使用服务位置。

# iphone - 在xcode中将动态大小设置为UILabels？

> ID：13190583
> 
> 赞同：0
> 
> 时间：2012-11-02T06:45:31.070
> 
> 标签：iphone, ios, uilabel

我是objective-C的新手。我想设置动态大小（`width`和`height`）。 `UILabels`我有一个`UILabel`带有一些文本的文本。如果文本很大，如果它不适合该行，则应该通过转到其他行来正确显示行，如果数据完成，那么只有下一个`UILabels`数据应该开始，下一个也是相同的概念。`UILabel`我怎样才能得到它......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:05:51.473

以下是 viewcontroller.h 文件的代码

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{
IBOutlet UITableView *dataTableView;
NSMutableArray *items;
}

@end 
```

以下是 viewcontroller.m 文件的代码

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

#define FONT_SIZE 14.0f
#define CELL_CONTENT_WIDTH 320.0f
#define CELL_CONTENT_MARGIN 10.0f

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];

items = [[NSMutableArray alloc] init];
[items addObject:@"Happiness is having a large, loving, caring, close-knit family in another city.\n\n\t\t-George Burns (1896 - 1996)"];
[items addObject:@"When I am abroad, I always make it a rule never to criticize or attack the government of my own country. I make up for lost time when I come home.\n\n\t\t-Sir Winston Churchill (1874 - 1965)"];
[items addObject:@"After two years in Washington, I often long for the realism and sincerity of Hollywood.\n\n\t\t-Fred Thompson, Speech before the Commonwealth Club of California"];
[items addObject:@"It is a profitable thing, if one is wise, to seem foolish.\n\n\t\t-Aeschylus (525 BC - 456 BC)"];
[items addObject:@"Bill Gates is a very rich man today... and do you want to know why? The answer is one word: versions.\n\n\t\t-Dave Barry"];
[items addObject:@"At the worst, a house unkept cannot be so distressing as a life unlived.\n\n\t\t-Dame Rose Macaulay (1881 - 1958)"];
[items addObject:@"It is curious that physical courage should be so common in the world and moral courage so rare.\n\n\t\t-Mark Twain (1835 - 1910)"];
[items addObject:@"The knowledge of the world is only to be acquired in the world, and not in a closet.\n\n\t\t-Lord Chesterfield (1694 - 1773), Letters to His Son, 1746, published 1774"];
[items addObject:@"What lies behind us and what lies before us are tiny matters compared to what lies within us.\n\n\t\t-Ralph Waldo Emerson (1803 - 1882), (attributed)"];
}

#pragma mark -
#pragma mark UITableView Delegaates

- (NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section
{
return [items count];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;
{
return 1;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
NSString *text = [items objectAtIndex:[indexPath row]];
CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);
CGSize size = [text 1="systemFontOfSize:FONT_SIZE" language="sizeWithFont:[UIFont"][/text] constrainedToSize:constraint lineBreakMode:NSLineBreakByWordWrapping];
CGFloat height = MAX(size.height, 44.0f);
return height + (CELL_CONTENT_MARGIN * 2);
}

- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell;
UILabel *label = nil;

cell = [tv dequeueReusableCellWithIdentifier:@"Cell"];
if (cell == nil)
{

cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"] ;
label = [[UILabel alloc] initWithFrame:CGRectZero];
[label setLineBreakMode:NSLineBreakByWordWrapping];
[label setFont:[UIFont systemFontOfSize:FONT_SIZE]];
[label setNumberOfLines:0];
[label setFont:[UIFont systemFontOfSize:FONT_SIZE]];
[label setTag:1];
[[cell contentView] addSubview:label];
}
NSString *text = [items objectAtIndex:[indexPath row]];

CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);

CGSize size = [text 1="systemFontOfSize:FONT_SIZE" language="sizeWithFont:[UIFont"][/text] constrainedToSize:constraint lineBreakMode:NSLineBreakByWordWrapping];

if (!label)
label = (UILabel*)[cell viewWithTag:1];

[label setText:text];
[label setFrame:CGRectMake(CELL_CONTENT_MARGIN, CELL_CONTENT_MARGIN, CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), MAX(size.height, 44.0f))];

return cell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
[dataTableView deselectRowAtIndexPath:[dataTableView indexPathForSelectedRow] animated:YES];
}
@end 
```

[也从这里下载源代码。](http://sourceforge.net/projects/nimitparekh/files/Dynamic%20Height%20of%20UITable%20Cell/DynamicHeightsDemo.zip/download)

愿这有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:53:55.150

[如何根据文本设置标签，但我也想要背景颜色](https://stackoverflow.com/questions/13248734/how-to-set-label-according-to-text-but-i-want-background-color-also/13256474#13256474)

使用这个链接，在这里你使用“textsize”来设置你的标签框架和后视图

# jquery - 如何在黑莓手机应用程序中设置固定页脚

> ID：13190584
> 
> 赞同：0
> 
> 时间：2012-11-02T06:45:42.873
> 
> 标签：jquery, html, css, cordova, sticky-footer

我正在 Phonegap 框架上创建黑莓移动应用程序，因为我不知道如何设置固定页脚部分，请建议解决问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:49:00.430

尝试为此使用 iScroll 插件。 [http://lab.cubiq.org/iscroll/examples/simple/](http://lab.cubiq.org/iscroll/examples/simple/)

# sqlalchemy - SQLAlchemy - 用用户输入连接字符串反映数据库模式的任何方式？

> ID：13190587
> 
> 赞同：2
> 
> 时间：2012-11-02T06:45:56.240
> 
> 标签：sqlalchemy

这是一个非常有趣的问题......我正在编写一个程序来通过 SQLAlchemy 操作具有相同模式的多个远程数据库。连接字符串不是静态的——它存储在本地 SQLite 数据库中。我需要在运行时创建一个会话，并使用该会话来反映数据库模式。所有数据库都有相同的模式。我已经知道表名。无论如何要实现这个？

```
def connect(connstr):
    engine = create_engine(connstr)
    metadata = MetaData(bind=engine)
    session = create_session(bind=engine)
    return session

class User(Base):
    # How it's possible to create a dummy model class without predefined metadata?
    __table__ = Table('users', metadata, autoload=True) 
```

编辑：最后我自己解决了这个问题：

```
Base = declarative_base()

def connect(connstr):
    engine = create_engine(connstr)
    metadata = MetaData(bind=engine)
    session = create_session(bind=engine)
    return metadata, session

def get_model(metadata, modelname, tablename):
    cls = type(modelname, (Base,), dict(
        __table__ = Table(tablename, metadata, autoload = True)
    ))
    return cls 
```

但是，@Gary van der Merwe 的回答非常酷！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:30:30.510

您必须手动将 orm 类映射到反射表。

假设数据库具有以下结构：

```
CREATE TABLE "group" (
        id INTEGER NOT NULL, 
        name VARCHAR(50), 
        PRIMARY KEY (id)
)

CREATE TABLE user (
        id INTEGER NOT NULL, 
        name VARCHAR(50), 
        password VARCHAR(12), 
        group_id INTEGER, 
        PRIMARY KEY (id), 
        FOREIGN KEY(group_id) REFERENCES "group" (id)
) 
```

你可以做：

```
#!/usr/bin/env python

from sqlalchemy import create_engine, MetaData
from sqlalchemy.orm import mapper, Session, relationship

class Group(object):
    def __init__(self, name):
        self.name = name

class User(object):
    def __init__(self, name, password, group):
        self.name = name
        self.password = password
        self.group = group

    group = relationship(Group)

def connect(url):
    engine = create_engine(url, echo=True)
    metadata = MetaData(engine, reflect=True)

    # Do this for each table
    mapper(User, metadata.tables['group'])
    mapper(Group, metadata.tables['user'])

    session = Session(bind=engine)
    return session

session = connect('sqlite:///test.db')
finance_group = Group('finance')
session.add(finance_group)
session.add(User('joe', 'password', finance_group))
session.commit()
print(session.query(User).all()) 
```

# c# - 将链接标签添加到绑定到 DataSet 的 DataGridView 单元格或列

> ID：13190590
> 
> 赞同：3
> 
> 时间：2012-11-02T06:45:59.403
> 
> 标签：c#, .net, winforms, datagridview

在我的项目中，我正在填充`dataGridView`from `dataSet`（绑定`DataGridView`to `DataSet`）。第一列`dataGridView`必须是`LinkLabels`我试图在下面的代码中获得的。

```
dgvMain.DataSorce = ds.Tables[0]; 
```

我试过了：（*不工作*）

```
DataGridViewLinkCell lnkCell = new DataGridViewLinkCell();
foreach (DataGridViewRow row in dgvMain.Rows)
{
    row.Cells[0] = lnkCell; // (ERROR) Cell provided already belongs to a grid. This operation is not valid.
} 
```

**也试过**

```
for (int intCount = 0; intCount < dgvMain.Rows.Count; intCount++)
{
    dgvMain.Rows[intCount].Cells[0] = lnkCell; // (ERROR) Cell provided already belongs to a grid. This operation is not valid.
} 
```

上面的尝试只是添加`linkLabel`到第一个单元格而不是该列中的所有单元格
当我调试我的代码时，我得出的结论是，在添加`linkLabel`到第一个单元格之后，我在上面的代码中提到了异常错误，这正在制作代码不能正常运行。

请给我任何建议，我该怎么办？

**编辑**：虽然这不是正确的方法，但我`Linklabel`通过编写以下代码使列单元格看起来像：

```
 foreach (DataGridViewRow row in dgvMain.Rows)
            {
                row.Cells[1].Style.Font = new Font("Consolas", 9F, FontStyle.Underline);
                row.Cells[1].Style.ForeColor = Color.Blue;
            } 
```

* * *

现在的问题是我无法将`Hand`光标添加到唯一的列单元格（对于 LinkLabels 可见）。有没有办法实现它？（我需要回答这两个问题，主要是第一个）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T09:53:29.533

这就是我在更改单元格类型时一直在做的事情。使用您的“也尝试过”循环并更改：

```
dgvMain.Rows[intCount].Cells[0] = lnkCell; 
```

到：

```
foreach (DataGridViewRow r in dgvMain.Rows)
  {
      DataGridViewLinkCell lc =  new DataGridViewLinkCell();
      lc.Value = r.Cells[0].Value;
      dgvMain[0, r.Index] = lc;
  } 
```

第二个问题：将dgvMain事件的CellMouseLeave和CellMouseMove设置为如下。

```
private void dataGridView1_CellMouseLeave(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 1)
    {
        this.Cursor = Cursors.Default;
    }
}

private void dataGridView1_CellMouseMove(object sender, DataGridViewCellMouseEventArgs e)
{
    if (e.ColumnIndex == 1)
    {
        this.Cursor = Cursors.Hand;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T12:11:02.600

您需要为每个“链接”单元格分配一个`DataGridViewLinkCell`新*实例*。首先将作为链接的单元格的类型更改为 a `DataGridViewLinkCell`，然后处理对单元格的单击，如下所示：

```
void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    foreach (DataGridViewRow r in dataGridView1.Rows)
    {
        if (System.Uri.IsWellFormedUriString(r.Cells["Links"].Value.ToString(), UriKind.Absolute))
        {
            r.Cells["Links"] = new DataGridViewLinkCell();
            DataGridViewLinkCell c = r.Cells["Links"] as DataGridViewLinkCell;
        }
    }
}

// And handle the click too
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    if (dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex] is DataGridViewLinkCell)
    {
        System.Diagnostics.Process.Start( dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value as string);
    }
} 
```

# python - python循环没有像我期望的那样循环

> ID：13190592
> 
> 赞同：1
> 
> 时间：2012-11-02T06:46:18.987
> 
> 标签：python

我花了过去两个小时试图弄清楚这一点。请帮助我在过去两个小时内尝试了 Google。没运气。我究竟做错了什么？

code.txt的内容：

```
TKF6J-KXP6V-F499V-Q9XPC-7J6TZ;J9YCV-D4TH6-WWWWV-F2RM7-F63XZ;GXKCC-QDT34-3JRY4-TWKHX-R763Z; 
```

我的脚本.py

```
import re
from sqlalchemy import *

string = open("codes.txt").readlines()

for item in string:
    set = [item.split(";")]
    print "success" 
```

为什么它只打印一次“成功”？我希望它能够成功打印代码.txt 中的项目数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T06:55:43.317

`readlines()`实际上是在寻找换行符，并且由于您的字符串似乎没有任何内容，因此它只读取一行，因此只返回一个元素（这就是@kayZhu 刚才所说的，抱歉:)）。我认为您希望在分号上进行拆分，因此您可以尝试以下操作：

```
In [19]: with open('codes.txt', 'r') as f:
   ....:     contents = f.read().split(';')
   ....:
   ....:

In [20]: contents
Out[20]:
['TKF6J-KXP6V-F499V-Q9XPC-7J6TZ',
 'J9YCV-D4TH6-WWWWV-F2RM7-F63XZ',
 'GXKCC-QDT34-3JRY4-TWKHX-R763Z',
 ''] 
```

然后您的迭代应该按预期工作。此外，请尽量避免对变量使用 Python 内置名称（例如`string`，它只会在未来引起心痛 :)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T06:49:45.730

`readlines`取决于换行符将行`\n`分隔成列表。在您的情况下，codes.txt 的内容只有一行，因此整个列表`string`仅包含一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T06:56:58.293

问问自己这个问题：你期望`item`在第一次迭代中是什么？第二？等等然后这样做：

```
for item in string:
    print item 
```

看看它与您的期望相比如何。

的结果`open("codes.txt").readlines()`将为文件中的每一*行*包含一个元素（它不知道您可能与 name 相关联的任何更深层次的含义`item`）。您的文件目前只有一行 - 如果您添加另一行，它看起来像这样：

```
TKF6J-KXP6V-F499V-Q9XPC-7J6TZ;J9YCV-D4TH6-WWWWV-F2RM7-F63XZ;GXKCC-QDT34-3JRY4-TWKHX-R763Z;
TKF6J-KXP6V-F499V-Q9XPC-7J6TZ;J9YCV-D4TH6-WWWWV-F2RM7-F63XZ;GXKCC-QDT34-3JRY4-TWKHX-R763Z; 
```

（即，将您当前的行加倍），您会看到它打印了两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T07:15:56.300

试试这个。

```
string = open("code.txt").readlines()

string= "".join(string)

for item in string.split(";"):

    if len(item)>1:

        print "success" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T08:59:16.267

```
 with open(r'C:\Python33\1_.txt') as f:
  d =f.read().split(';')
  for a in d:
      print(a) 
```

其他版本的迭代

# ruby-on-rails - 测量感知加载时间（而不是实际加载时间）

> ID：13190593
> 
> 赞同：0
> 
> 时间：2012-11-02T06:46:19.890
> 
> 标签：ruby-on-rails, page-load-time

我正在运行一个[网站](http://www.presenttips.com)，但我遇到了它非常慢的问题。我相信我现在使用缓存等已经做得非常快了。

当我自己点击网站时，感觉很快（请自己尝试），但根据 New Relic（在 Heroku 上托管网站），我的加载时间最长为 30 秒，平均为 9 秒。

我使用了[tools.pingdom.com](http://tools.pingdom.com)之类的工具来测试它，它通常（取决于负载）给出 3-9 秒之间的时间（最常见的是 9 秒）。

根据 tools.pingdom.com 上的统计数据，似乎一些外部图像、脚本等加载速度很慢，这导致加载时间统计数据下降。这也可以解释为什么该网站对我来说实际上感觉很快。如果网站在 3 秒后加载 95%，而一张产品图片需要额外 6 秒才能加载，我认为这不会真正影响用户体验。

如果是这种情况，我如何检查感知的加载时间？你觉得网站速度慢吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:49:45.500

在 Chrome 中，您可以按`F12`，然后转到`Network`选项卡并重新加载您的页面。然后你应该看到所有资源的加载时间。这本身不是基准测试，但它应该为您指明正确的方向。Firefox 也有类似的功能，但不幸的是我不记得快捷键了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T10:19:26.580

我会避免平均值，因为它们容易出现影响结果的异常值 - 你想要的是页面加载时间的直方图，这样你就可以知道页面对于 50% 或 95% 的访问者加载所需的时间。

Google Analytics 提供了一些真实用户测量（使用 Safari 尚不支持的 Navigation Timing API）

您可以通过 Content > Site Speed > Page Timings 和 performance 选项卡找到这些数字。

默认情况下，它使用非常低的采样率，您可以通过添加

`_gaq.push(['_setSiteSpeedSampleRate', 100]);`

（虽然谷歌限制你每天 10K 样本）

借助加载时间，将它们与您的业务目标（转化等）进行比较，以了解性能对访问者行为的影响。

**编辑**

其他要做的是使用webpagetest.org并创建页面加载视频

# javascript - 数组的 mongomapper 和 rails 视图

> ID：13190596
> 
> 赞同：0
> 
> 时间：2012-11-02T06:46:37.483
> 
> 标签：javascript, arrays, ruby-on-rails-3, view

我有一个 Rails 控制器从 mongodb 获取一些数据。我感兴趣的字段实际上是一个数组，我想在 erb 视图中公开它。

我目前的技巧是直接在视图中设置javascript变量（其中item.array = [“one”，“two”]）：

```
var array = <%= item.array %>; 
```

但是，我看到代码出来了，这样 html 就出来了

```
var array = [&quot;one&quot;, &quot;two&quot;]; 
```

有没有我可以使用的辅助函数，以便我可以直接在 javascript 中设置数组？

（长期是将其转移到 json 调用中，但我现在只想让一些东西工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:56:27.340

请按以下方式使用：

```
var array = <%= item.to_s.html_safe %>; 
```

# vb.net - LINQ 和 HTML Agility Pack 将解析后的 H TML 表数据填充到数据表中

> ID：13190598
> 
> 赞同：0
> 
> 时间：2012-11-02T06:46:49.120
> 
> 标签：vb.net, linq, datatable, html-agility-pack

我正在使用以下查询来解析 html 表数据。

```
Dim q = From table In htmldoc.DocumentNode.SelectNodes("//table[@class='Seller']").Cast(Of HtmlNode)()
                    From row In table.SelectNodes("tr").Cast(Of HtmlNode)()
                    From header In row.SelectNodes("th").Cast(Of HtmlNode)()
                    From cell In row.SelectNodes("td").Cast(Of HtmlNode)()
               Select New With {Key .Table = table.Id, Key .CellText = cell.InnerText, Key .headerText = header.InnerText} 
```

我如何使用每个循环如何将其填充到数据表中？

我会首先使用标题数据创建列，然后使用嵌套的每个循环来填充表中的单元格数据，但我不知道如何，对上述 LINQ 查询还有任何建议的更改吗？

**注意**：html 页面始终只包含一个表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:35:00.857

鉴于以下`html`

```
Dim t = <table class='Seller' id='MyTable'>
            <tr>
                <th>FooColumn</th>
                <td>Foo</td>
                <td>Another Foo</td>
            </tr>
            <tr>
                <th>BarColumn</th>
                <td>Bar</td>
                <td>Another Bar</td>
            </tr>
            <tr>
                <th>ThirdColumn</th>
                <td>Third</td>
                <td>Another Third</td>
            </tr>
        </table>

Dim htmldoc = New HtmlAgilityPack.HtmlDocument()
htmldoc.LoadHtml(t.ToString()) 
```

和你的查询

```
Dim q = From table In htmldoc.DocumentNode.SelectNodes("//table[@class='Seller']")
            From row In table.SelectNodes("tr")
                From header In row.SelectNodes("th")
                From cell In row.SelectNodes("td")
        Select New With {.Table = table.Id, .CellText = cell.InnerText, .headerText = header.InnerText} 
```

您可以使用[`GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)或[`ToLookup`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)按列对对象进行分组：

```
Dim grouped = q.ToLookup(Function(a) a.headerText) 
```

并使用此分组创建`DataTable`具有适当`DataColumn`s 的 a：

```
Dim dt = new DataTable()

For Each h in grouped.Select(Function(g) g.Key)
    dt.Columns.Add(h)
Next 
```

现在，为了填充`DataTable`，您必须“旋转”分组，因为每个组包含一列的数据，但我们想要每一行的数据。让我们使用一个小助手方法

```
Function Rotate(Of T, TR)(source As IEnumerable(Of IEnumerable(Of T)), 
                          selector As Func(Of IEnumerable(Of T), IEnumerable(Of TR))) As IEnumerable(Of IEnumerable(Of TR))

    Dim result = new List(Of IEnumerable(Of TR))
    Dim enums = source.Select(Function(e) e.GetEnumerator()).ToArray()
    While enums.All(Function(e) e.MoveNext())
        result.Add(selector(enums.Select(Function(e) e.Current)).ToArray())
    End While

    Return result
End Function 
```

填充`DataTable`.

```
For Each rrow in Rotate(grouped, Function(row) row.Select(Function(e) e.CellText))
    dt.Rows.Add(rrow.ToArray())
Next 
```

现在`DataTable`将看起来像这样：

![在此处输入图像描述](../Images/4432b859d18e45a5c0e816d486e6be93.png)

# c# - 如何使用 iTextSharp 在 pdf 中创建文本框？

> ID：13190600
> 
> 赞同：3
> 
> 时间：2012-11-02T06:47:02.137
> 
> 标签：c#, asp.net, itextsharp

我正在使用 ASP.NET 和 C#。然后我正在使用 iTextSharp 即时创建 pdf。有人可以告诉我如何创建文本框、标签。这可能吗？因为我搜索过的东西都在使用 PdfpTable 和 PdfpCell ..

举个例子吧。。

编辑：我需要创建一个看起来完全像我的 .aspx 页面的 pdf。我在按钮单击时创建。如果我添加处于编辑模式的文本字段，我不想要那个。所以我需要将整个页面创建为只读pdf？

向我提供任何材料/文章/电子书..

谢谢..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T07:30:48.790

尝试使用这段代码片段：

```
using (PdfStamper stamper = new PdfStamper(new PdfReader(inputFile), File.Create(outputFile)))
{
    TextField tf = new TextField(stamper.Writer, new iTextSharp.text.Rectangle(0, 0, 100, 300), "Vertical");
    stamper.AddAnnotation(tf.GetTextField(), 1);
    stamper.Close();
} 
```

参考：[iTextSharp - 添加垂直文本框](https://stackoverflow.com/questions/8414019/itextsharp-adding-a-vertical-textbox)

您还应该看看 iText in Action。[第 8 章](http://itextpdf.com/book/chapter.php?id=8)有一些可能对你有用的例子。

# jquery - Jquery完整的日历控件，带有颜色的假期

> ID：13190606
> 
> 赞同：1
> 
> 时间：2012-11-02T06:47:29.500
> 
> 标签：jquery, jquery-plugins, fullcalendar

我使用 jquery`fullcalander`控件。我想在月视图中为假期着色。点击假期后打开有关假期的消息。
我使用事件将假期发送到日历。但它不工作任何人都可以帮助我

```
 $('#calendar').fullCalendar
         ({

             allEvent: {
                 titles: '.........',
                 start: '07/24/2012'
             },

             eventSources: [
             {
            url: '@Url.Action("LeaveCalandar")',
            type: 'Get',
           data{username:user},
           dataType:"JSON",
            success: function() {
                alert('there was an error while fetching events!');
            },
            color: 'yellow',   
            textColor: 'black' 
        }

        // any other sources...

    ],
             eventClick: function (calEvent, allDay) {
                 // $('#eventTitle').text(calEvent.title);
                 // alert(calEvent.title);
                 eventName = calEvent.title;
                 ShowDialog(eventName);
                 ShowDialog(calEvent.titles);

             }, 
```

这是我的事件日历操作方法

```
public JsonResult EventCalendarData(string username)
        {
        List<CalendarEvents> events = new List<CalendarEvents>();
        List<LeaveTransaction> leaveQuery;
        var query = (from sh in db.StatHolidays
                     select sh).ToList();
        if (!string.IsNullOrEmpty(username))
        {
             leaveQuery = db.LeaveTransactions
                .Where(lt=>lt.Employee.UserName.Contains(username))
                            .Select(lt => lt).ToList();
        }
        else
             leaveQuery = db.LeaveTransactions
                            .Select(lt => lt).ToList();

        foreach (var item in query)
        {
            events.Add(new CalendarEvents
                {
                    id = item.ID.ToString(),
                    title = item.Description,
                    start = ToUnixTimespan(item.DateofStatHoliday),
                    className = "custom",
                    allDay = true,
                });

        }
        foreach (var item in leaveQuery)
        {
            events.Add(new CalendarEvents
            {
                id = item.Id.ToString(),
                title = item.LeaveType.Type,
                start = ToUnixTimespan(item.StartDate),
                end =ToUnixTimespan(item.EndDate),
                className = "custom",
                allDay = true,
            });

        }

        return Json(events, JsonRequestBehavior.AllowGet);
    } 
```

# oracle - 如果 UPDATE 是成功的，如何在程序中获得确认是成功还是失败

> ID：13190618
> 
> 赞同：0
> 
> 时间：2012-11-02T06:48:23.227
> 
> 标签：oracle, stored-procedures, plsql, oracle10g, oracle11g

> **可能重复：**
> [PL/SQL 中受 UPDATE 影响的行数](https://stackoverflow.com/questions/861983/number-of-rows-affected-by-an-update-in-pl-sql)

```
CREATE PROCEDURE P_Update(in_termid IN VARCHAR2,StmntType IN VARCHAR2)
AS
BEGIN
IF StmntType = 'UpdateCS'
BEGIN
update OP_TTER_MAPPING set TXN_STATUS = 'N' where  TERMINAL_ID = in_termid;
END  

Else If StmntType = 'UpdateHS' 
BEGIN
update OP_TTERMINALMASTER set TXN_STATUS = 'N' where  TERMINAL_ID =  in_termid;
END  
end P_UpdateTIDStatus; 
```

1.  在上面的过程中，如果 UPDATE 是成功的，我想知道它是成功还是失败，怎么做，我应该得到一些确认，如何修改上面的 proc 以获得确认？

2.  我可以在程序中像这样分配 TXN_STATUS = 'N' 吗？

3.  这是`IF StmntType = 'UpdateCS'`我可以像这样比较的正确方法吗，如果它正确的 v 将在后端创建过程并且我将从前端执行，那么我知道“StmntType”是什么

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:55:25.783

sql%rowcount 会给你计数，如果更新不成功，那么你不用担心，它会给你错误... :P 通常人们使用期望捕获这样的错误。希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:57:08.373

尝试如下，如果您遇到任何编译错误，请告诉我，因为我没有测试过。

```
CREATE OR REPLACE PROCEDURE P_Update(in_termid IN VARCHAR2,
                          StmntType IN VARCHAR2,
                                     returnval IN OUT NUMBER)
IS 
BEGIN
 IF (StmntType = 'UpdateCS') then
         update OP_TTER_MAPPING set TXN_STATUS = 'N' 
         where  TERMINAL_ID = in_termid;
   END IF;
  returnval := 0;
 EXCEPTION
 WHEN OTHERS THEN
   returnval := 1;
   raise_application_error
      (-20140                                      
      ,'Exception is raised'
      );
END P_Update; 
```

当您从前端调用您的过程时，您可以检查返回值，如果它是 1 则更新失败。

# android - 当 minSdkVersion = 1 时，应用程序与某些设备不兼容

> ID：13190619
> 
> 赞同：1
> 
> 时间：2012-11-02T06:48:30.650
> 
> 标签：android, sdk, incompatibility

我创建了一个使用`android-viewflow`它的应用程序，`minSdkVersion="1"`但当我在 Google Play 上发布它时，我发现它与这些设备不兼容

*   三星 Galaxy Mini – GT-S5570
*   三星 Galaxy Pocket– GT-S5302
*   三星 Galaxy Pro– GT-B7510
*   三星 Galaxy – gt-i7500
*   三星 Galaxy Pocket– GT-S5302B
*   三星 Galaxy Fit– GT-S5670

但是当我在其中一部手机中安装 APK 时它运行良好，直到现在我仍然找不到我做错了什么使应用程序与这些设备不兼容。

PS：在我的 android 统计数据中，该应用程序适用于所有平台版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:00:13.997

相关问题[在这里](https://stackoverflow.com/questions/10475954/why-does-the-google-play-store-say-my-android-app-is-incompatible-with-my-own-de)。

兼容性不仅与最低 SDK 版本有关，显然应用程序 (.apk) 大小和其他一些事情也与它有关。

# php - 如何使用 PCNTL 并行调用 php 函数

> ID：13190622
> 
> 赞同：3
> 
> 时间：2012-11-02T06:49:05.330
> 
> 标签：php, parallel-processing

我对不同的服务器有大约 10 个不同的请求，并用于按顺序获取与我网站中的函数调用相关的响应。

现在，我想为不同的服务器请求并行调用我的函数。一旦我从任何服务器获得第一个响应，然后想要停止剩余的进程。

目前我这样调用我的函数：

```
my_launch(1);
my_launch(2);
my_launch(3);
my_launch(4);
my_launch(5);
my_launch(6);
my_launch(7);
my_launch(8);
my_launch(9);
my_launch(10); 
```

这按顺序执行；如何使用 PCNTL 并行运行此代码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T17:10:33.510

**关于 PCNTL 可用性**

PHP 内置了一些 PCNTL 功能，但默认情况下不启用它们。

来自[php.net pcntl 安装说明](http://www.php.net/manual/en/pcntl.installation.php)：

> 在编译 PHP 以启用进程控制支持时，您必须使用 --enable-pcntl 配置选项编译 PHP 的 CGI 或 CLI 版本。

* * *

**关于并行化**

如果您知道机器上的内核数量，那么我建议您将工作分成这么多部分。进程控制仅适用于 *nix-like 系统，因此您可能有`nproc`可用的命令：

```
$numberOfProcessors = `nproc`; 
```

你[分叉](http://www.php.net/manual/en/function.pcntl-fork.php)以获得适当数量的进程运行，在它们之间分配工作，然后你就走了。划分工作可能很困难，但我相信你会弄清楚的。

* * *

**代码转储**

我感觉很慷慨，所以我继续为你编写了大部分代码。一定要理解它，因为它还没有完全完成。

笔记：

*   通过调用 获取可用处理器的数量`nproc`，因此如果您没有该实用程序，则应将其替换为您想要创建的进程数。
*   如果您有比请求的迭代更多的处理器可用，它不会中断。它只是使用更少的处理器。
*   如果进程数没有平均分配到迭代次数，则父进程将拾取剩余的迭代次数。
*   **在第一个结果可用后不会停止。**为了做到这一点，每次迭代都需要一个进程。当第一个进程完成并杀死其他进程时，主进程应该调用[pcntl_wait](http://php.net/manual/en/function.pcntl-wait.php)。

代码：

```
$procs = `nproc`;
$iterations = 10;
$pids = array();
$iproc = -1;

if ($procs > $iterations) {
    $procs = $iterations;
}

function my_launch($i, $proc) {
    echo "Process $proc ran iteration $i.\n";
}

$pid = 0;
for ($i = 0; $i < $procs; $i++) {
    $pid = pcntl_fork();
    if ($pid > 0) {
        // I am the parent process
        $pids[$pid] = $pid;

    } elseif ($pid == -1) {
        //error occurred, use available processes only
        $nproc = $i;
        break;

    } else {
        //I am the child process.
        $iproc = $i;
        break;
    }
}

$nproc = !empty($nproc) ? $nproc : $procs;

if ($nproc == 0) {
    echo "NOTICE: Process could not be forked; proceeding in serial.\n";
    for ($i = 0; $i < $iterations; $i++) {
        my_launch($i, $iproc);
    }
    exit;
}

if ($nproc != $procs) {
    echo "NOTICE: Only using $nproc processes out of the hoped $procs.\n";
}

$iterationsPerProcess = (int) ($iterations / $nproc);

// children do the main work.
if ($pid == 0) {
    $stopAt = $iterationsPerProcess * ($iproc + 1);

    for ($i = ($iproc * $iterationsPerProcess); $i < $stopAt; $i++) {
        my_launch($i, $iproc);
    }
}

if ($pid > 0) {
    // parent process picks up the remainder of the work
    $i = $nproc * $iterationsPerProcess;
    for (; $i < $iterations; $i++) {
        my_launch($i, "Main");
    }

    //wait for children to finish
    $status = -1;
    foreach ($pids as $createdIndex => $pid) {
        pcntl_waitpid($pid, $status);
    }
} 
```

# r - 如何使用矩阵在R中显示关系？

> ID：13190627
> 
> 赞同：1
> 
> 时间：2012-11-02T06:49:46.870
> 
> 标签：r, list, matrix, relationship

我在这里有一个列表 x： ![在此处输入图像描述](../Images/bcbba1401a506b32ec8c2074f039e5c6.png)

我想展示元素之间的关系，如下所示： ![在此处输入图像描述](../Images/5e4c43f865a177508bea5cd1d6aed3f3.png)

谁能告诉我如何在 R 中做到这一点？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:23:53.957

首先，从原始列表中构建所有对的矩阵：

```
L <- list(c("John", "Mary", "Jack"), c("John", "Wendy"), c("Mary", "Wendy"))
x <- matrix(unlist(lapply(L, combn, 2, simplify = FALSE)), ncol = 2) 
```

然后，使用此处显示的方法之一：[R 中的成对交互矩阵](https://stackoverflow.com/questions/12965618/pairwise-interaction-matrix-in-r/12965725#12965725)。我喜欢使用图论工具的那个:-)

```
library(igraph)
g <- graph.edgelist(x, directed = FALSE)
get.adjacency(g)

#       John Jack Mary Wendy
# John     0    1    1     1
# Jack     1    0    1     0
# Mary     1    1    0     1
# Wendy    1    0    1     0 
```

# wcf - 如何对 WCF .SVC 文件进行单元测试

> ID：13190635
> 
> 赞同：4
> 
> 时间：2012-11-02T06:50:31.503
> 
> 标签：wcf, unit-testing, nunit

我计划对作为`.svc`文件公开的 WCF 服务进行单元测试。可用于对它们进行单元测试的最佳实践是什么。

据我所知，这是可用的选项：

创建一个单独的项目并为 .svc 文件创建代理类，并将它们添加到项目中并对这些代理类进行单元测试。可以使用以下方法创建代理类：

1.  svcutil.exe
2.  Visual Studio 的“添加服务参考”选项。

是否有其他最佳选择可用于`.svc`使用 nunit 对我的 wcf 文件进行单元测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:39:43.873

基本上，您不会对服务进行单元测试。您对他们的代码进行单元测试，就好像该代码不在服务中一样。

甚至不要创建服务类的实例。这对于单元测试来说太大了。您将对该类中的代码*进行单元测试。*请记住，单元测试旨在测试代码的最小可能单元，而不是整个服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T07:31:41.960

如果您需要测试服务背后的逻辑，您可以编写简单的单元测试，如下所示：

```
public class Service1 : IService1
{
    public string GetData(int value)
    {
        return string.Format("You entered: {0}", value);
    }
}
//Tests
[TestFixture]
public class MyService_Test
{
    [Test]
    public void GetData_should_return_entered_string()
    {
        Service1 service = new Service1();
        Assert.AreEqual("You entered: 1", service.GetData(1));
    }
} 
```

如果您想测试整个集成，您可以编写以下集成测试。简而言之，您需要将服务作为自托管运行并使用 _proxy 来执行服务方法。当您需要测试自定义消息检查器、错误处理程序等扩展点时，此类测试很有用。

```
 private ITestService _proxy;
    private ServiceHost _host;

    [SetUp]
    public void Initialize()
    {
        const string baseAddress = "net.pipe://localhost/TestService";
        _host = new ServiceHost(typeof(TestService), new Uri(baseAddress));

        var factory = new ChannelFactory<ITestService>(new NetNamedPipeBinding(),
                                                       new EndpointAddress(baseAddress));
        _host.Open();
        _proxy = factory.CreateChannel();
    } 
```

链接：

[集成测试 WCF 服务](http://blogs.msdn.com/b/ploeh/archive/2006/12/04/integrationtestingwcfservices.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T07:30:34.237

如果您只是想测试服务的逻辑，只需实例化实现逻辑的类并调用其方法即可。这本质上绕过了 WCF，这对于单元测试很有用，因为没有理由测试 Microsoft 的代码。另一方面，集成测试是另一回事。

# java - Canny Edge 之后的边界检测

> ID：13190636
> 
> 赞同：3
> 
> 时间：2012-11-02T06:50:46.200
> 
> 标签：java, edge-detection

我已经尝试过 Canny Edge 的开源 Java 实现。我只需要图像的边界（轮廓），但输出中有额外的线条。使用 Canny Edge 后有什么方法可以删除这些行（是否有另一种算法）？还是有其他方法可以修改程序，使其仅检测轮廓？

我试过[这个](http://www.tomgibara.com/computer-vision/canny-edge-detector)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:27:38.090

如果您正在寻找的轮廓是一条“长”连接线，您可以过滤掉“短”线。

一种方法是使用[连通分量标记算法](http://en.wikipedia.org/wiki/Connected-component_labeling)计算这些线的面积，并只保留面积最大的线（即最大数量的像素）。

# php - php curl返回不完整的数据

> ID：13190637
> 
> 赞同：3
> 
> 时间：2012-11-02T06:50:49.290
> 
> 标签：php, curl

我正在尝试使用 php curl 使用用户名和密码登录网站。

```
<?php
$url = 'http://XXXXX.com/login';
$ch = curl_init();
$formFields = array('username' => 'XXXX', 'password' => 'WAO', 'button' => 'Login');
$cookiefile = 'C:/wamp/www/tests/cookies.txt';

curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_HEADER, TRUE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $formFields);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Expect:'));
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookiefile);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookiefile);

echo $response = curl_exec($ch);
$httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch); 
```

但我没有在 $response 中获得完整的 html。意味着如果在浏览器中我在 html 中得到 1000 行。在 curl 中，我得到了大约 350 行 html。

它以前工作，但突然停止工作。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:58:14.880

服务器可能会响应元刷新或某种错误。检查响应标头...这是一个很好的起点

```
$response = curl_exec($ch);
print_r(curl_getinfo($ch)); 
```

您还应该使用 http_build_query() 将您的帖子字段作为字符串而不是数组发送

```
$formFields = http_build_query( array('username' => 'XXXX', 'password' => 'WAO', 'button' => 'Login')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:51:55.387

如果您正在加载的页面是通过 Ajax 将内容加载到页面上，那么您显然会得到不同的结果。而且，您提到的网站似乎确实通过 ajax 请求加载内容。

cURL 不能/不能解析 javascript，因此不能通过 ajax 加载内容。因此，您无法获得与从普通浏览器获得的完全相同的内容。

您可以通过比较 cURL 的输出和 browser-with-javascript-disabled 的输出并发现它们相同来验证上述声明。

# heroku - 将 Sinatra 应用程序部署到 heroku

> ID：13190639
> 
> 赞同：0
> 
> 时间：2012-11-02T06:51:00.970
> 
> 标签：heroku, sinatra

我正在尝试从[heroku docs](http://devcenter.heroku.com/articles/rack#sinatra)部署基本的 sinatra 应用程序。该应用程序似乎正在正确部署和启动，但我看不到它。我错过了什么？

```
# Gemfile
source 'http://rubygems.org'
gem 'sinatra'

# config.ru
require './hello'
run Sinatra::Application

# hello.rb 
require 'sinatra'

get '/' do
  "Hello World!"
end 
```

然后我运行：

```
$ bundle install
$ git init
$ git add --all
$ git commit -m "initial commit"
$ heroku create
$ git push heroku master
$ heroku open 
```

问题是，我得到的只是“Heroku | 没有这样的应用程序”错误。然后我尝试：

```
$ heroku restart
$ heroku logs 
```

结果如下：

```
2012-11-02T06:19:24+00:00 heroku[web.1]: Unidling
2012-11-02T06:19:24+00:00 heroku[web.1]: State changed from down to starting
2012-11-02T06:19:27+00:00 heroku[web.1]: Starting process with command `bundle exec rackup config.ru -p 38715`
2012-11-02T06:19:31+00:00 app[web.1]: [2012-11-02 06:19:31] INFO  WEBrick 1.3.1
2012-11-02T06:19:31+00:00 app[web.1]: [2012-11-02 06:19:31] INFO  ruby 1.9.2 (2011-07-09 [x86_64-linux]
2012-11-02T06:19:31+00:00 app[web.1]: [2012-11-02 06:19:31] INFO WEBrick::HTTPServer#start: pid=2 port=38715
2012-11-02T06:19:32+00:00 heroku[web.1]: State changed from starting to up 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:29:42.177

我刚才尝试了这些完全相同的步骤，效果很好。不知道之前出了什么问题。

昨晚我把它改成了：

```
# hello.rb 
require 'sinatra'

class HelloApp < Sinatra::Base
  get '/' do
    "Hello World!"
  end
end

# config.ru
require './hello'
run HelloApp 
```

它奏效了。不知道为什么，但确实如此。奇怪的。

# ios - iOS 关于retainCount

> ID：13190640
> 
> 赞同：1
> 
> 时间：2012-11-02T06:51:09.917
> 
> 标签：ios, retaincount

现在我有了一个`ClassA : NSObject`，然后在 viewcontroller`viewDidLoad`中，查看下面的代码：

```
- (void)viewDidLoad {
    ClassA *a = [[ClassA alloc] init];
    NSLog(@"a retainCount = %d", [a retainCount]);
    ClassA *b = a;
    NSLog(@"a retainCount = %d b retainCount= %d ", [a retainCount],[b retainCount]);
    [a release];
    NSLog(@"a retainCount = %d b retainCount= %d", [a retainCount],[b retainCount]);
    [super viewDidLoad];
} 
```

控制台输出如下所示：

```
2012-11-02 14:43:35.437 RetainCountTest[1043:207] a retainCount = 1
2012-11-02 14:43:35.439 RetainCountTest[1043:207] a retainCount = 1 b retainCount= 1  
2012-11-02 14:43:35.439 RetainCountTest[1043:207] a retainCount = 1 b retainCount= 1 
```

我不明白，当我打电话时`[a release]`，为什么`[a retainCount］＝＝ 1`？</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:58:24.393

那是因为“ [retainCount 没用](http://www.friday.com/bbum/2011/12/18/retaincount-is-useless/)”。

添加一些上下文：当消息传递一个“死”的对象时，您应该期待未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:37:17.750

当您调用 [a release] 时，您不再持有 a，因此 a 可能会被释放。这里可能就是这种情况，因为它的所有权是共享的。

任何进一步的消息`a`都具有未定义的返回值：另一个对象可能重用了 a 的内存槽。

所以你打印的返回值本质上是随机的。它可能使您的应用程序崩溃或打印了 1000...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T06:58:15.473

你永远不应该关注retainCount。它们充其量是令人困惑的，最坏的情况是误导。应该只确保他们正确遵循保留/释放的内存管理规则，而忘记保留计数。

从[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isKindOfClass:)..

> 这种方法在调试内存管理问题时没有任何价值。因为任何数量的框架对象可能已经保留了一个对象以保存对它的引用，而同时自动释放池可能在一个对象上保存了任何数量的延迟释放，所以您不太可能从中获得有用的信息方法。

编辑：建议阅读

[何时使用 -retainCount？](https://stackoverflow.com/questions/4636146/when-to-use-retaincount)

编辑：看到OP的评论后

来自[Cocoa Core 内存管理规则](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html)

> 当您创建或复制一个对象时，其保留计数为 1。此后，其他对象可能表达对您的对象的所有权权益，这会增加其保留计数。对象的所有者也可以放弃他们对它的所有权权益，这会减少保留计数。当保留计数变为零时，对象被释放（销毁）。

如果有人读到这里，他/她可能会想，哦，retainCount 是天赐之物，我只需使用 NSLog 语句就可以看到一个对象的完整分配/保留/释放周期。但它实际上并不是这样工作的。你不能说，你对你创建的对象拥有唯一的所有权。该对象可能被任何其他框架对象保留。释放你只是放弃了你的所有权。只有在所有其他对象删除其引用后，该对象才会被释放。

我不知道为什么它仍然保留在公共 API 中。

# gmail-contextual-gadgets - 如何使用gmail上下文小工具将链接放入gmail的左侧

> ID：13190643
> 
> 赞同：2
> 
> 时间：2012-11-02T06:51:20.117
> 
> 标签：gmail-contextual-gadgets

manifest.xml：demo.avinashi.com/DemoGapps/manifest.xml

gadget.xml：demo.avinashi.com/DemoGapps/gadget.xml

这是我的清单文件......我只是想构建小工具，就像 www.streak.com 上的连胜招聘扩展一样......我已经构建了代码直到某个级别......但问题是我想要一个链接gmail 左侧的小工具，就像收件箱、已发送项目等其他标签一样，不在我已经得到的谷歌通用导航链接上。此外，应该基于邮件正文中的提取器显示的 GUI，例如未显示小工具的“简历”..任何帮助将不胜感激..提前谢谢您..

# ruby-on-rails-3 - 无法调用未定义的方法“charAt”

> ID：13190644
> 
> 赞同：3
> 
> 时间：2012-11-02T06:51:50.180
> 
> 标签：ruby-on-rails-3, capistrano, less-rails

我有在我的本地 ubuntu 机器上运行良好的 rails3 应用程序。我使用 capistrano-unicorn 通过副本将我的应用程序部署到远程服务器。远程服务器也具有与本地机器相同的配置，例如

```
rvm 1.16.17
ruby 1.9.3p286
Rails 3.2.8
less 2.2.2
less-rails 2.2.6
less-rails-bootstrap 2.2.0 
```

我的宝石文件

```
group :assets do
  gem 'less-rails-bootstrap'
  gem 'therubyracer'
  gem 'uglifier'
end 
```

我收到一个错误

> Less::Error in User/home#index Cannot call method 'charAt' of undefined (in /home/user/rails_app_development/releases/20121102052832/app/assets/stylesheets/layout.css.less)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:22:17.140

这个错误也出现在我们的项目中。发生这种情况是因为我们只有`mixins.less`导入的，但没有`variables.less`twitter 引导程序。

在解决问题`variables.less` **之前**导入就像魔术一样。`mixins.less`

# android - 在 Android 的 ExpandableListView 中的 ImageView 中从 webUrl 加载图像

> ID：13190648
> 
> 赞同：1
> 
> 时间：2012-11-02T06:51:57.527
> 
> 标签：android, android-listview, expandablelistview, android-imageview, image-load

在我的项目中，我使用的是 google webService，我在其中查询不同的查询，例如医院、电影院、度假村等，并以 json 格式获得结果。从 json 中，我在相应的查询中获得了很多数据，例如 Name、lat、lng、imageUrl、Web url。我正在处理这些数据并将其显示在我的可扩展列表视图中。我能够显示所有数据，但是当我在 ImageView 上加载图像时，它显示出一些不匹配。对于加载图像，我使用 ImageLoader、FileCache、MemoryCache 和 Utils java 类。基本上问题是我有图像的 http web url，现在我想在 Expandable listView 的 ImageView 上显示它，但我没有正确执行它。请哪位小伙伴帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:19:03.573

实际上你还没有发布任何代码，所以很难告诉你确切的问题，但是这个链接会帮助你，这里我使用 json 将数据提取到 listview 中，根据需要使用

[我想让用户按动作序列添加多个项目](https://stackoverflow.com/questions/13189354/i-want-to-let-user-add-multiple-items-by-action-sequence)

一些代码： -

```
JSONArray jsonArray = json.getJSONArray(KEY_CATEGORY);

for(int i=0;i < jsonArray.length();i++){                        
    HashMap<String, String> map = new HashMap<String, String>();
    JSONObject jsonObject = jsonArray.getJSONObject(i);                     

    map.put("id",  String.valueOf(i));
    map.put(KEY_TITLE, jsonObject.getString(KEY_TITLE));
    map.put(KEY_DESCRIPTION, jsonObject.getString(KEY_DESCRIPTION));
    map.put(KEY_COST, jsonObject.getString(KEY_COST));
    map.put(KEY_THUMB_URL, jsonObject.getString(KEY_THUMB_URL));
    itemsList.add(map);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:07:00.220

Tikam 完成了，尝试使用这个类，

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.io.StringWriter;
import java.io.Writer;

    /**
     * 
     * @author JSR
     *
     */

 public class StreamUtils {

/**
 * A helper method to convert an InputStream into a String
 * @param inputStream
 * @return the String or a blank string if the IS was null
 * @throws IOException
 */
public static String convertToString(InputStream inputStream) throws IOException {
    if (inputStream != null) {
        Writer writer = new StringWriter();

        char[] buffer = new char[1024];
        try {
            Reader reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"), 1024);
            int n;
            while ((n = reader.read(buffer)) != -1) {
                writer.write(buffer, 0, n);
            }
        } finally {
            inputStream.close();
        }
        return writer.toString();
    } else {
        return "";
    }
}
 } 
```

# vb.net - 在电子邮件中发送 gridview

> ID：13190649
> 
> 赞同：1
> 
> 时间：2012-11-02T06:52:05.473
> 
> 标签：vb.net, email, gridview

我正在尝试在电子邮件中发送 grdiview 的选定行和列，为此我正在使用此功能

```
Public Function gridhtm(ByVal gv As GridView) As String
        Dim sb As StringBuilder = New StringBuilder()
        Dim sw As StringWriter = New StringWriter(sb)
        Dim hw As HtmlTextWriter = New HtmlTextWriter(sw)
        gv.RenderControl(hw)
        Return sb.ToString
    End Function 
```

为了发送电子邮件，我正在发送这样的电子邮件

```
 email("malik.adeel@shakarganj.com.pk", "[Cheque Approval] GM Finance Reviewed (" & TreeView2.SelectedValue & ")", "<b>Please find below the details of cheques prepared in favour of different parties.</b><br>" & _
                     gridhtm(GridView5)) 
```

问题是，当电子邮件设置时，它会将整个网格视图发送到像这张图片一样的电子邮件

![在此处输入图像描述](../Images/ca690a2f5a1d64d4d8bc4ab3b95cdcc2.png)

在此，有两行用复选框选中，而且我想跳过一些列，比如`category` `nature`我只想在电子邮件中发送选定的列。但我不知道如何管理这个，所以请给出任何想法来完成这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:04:55.290

出于打印目的，删除您不想要的内容。您可以重定向到“打印视图页面”并从那里打印。此外，根据 RenderControl()，您可以在打印之前使用 CSS 隐藏这些项目。

# asp.net - 如何在 MVC4 Web API 中自定义 JSON 序列化名称？

> ID：13190656
> 
> 赞同：6
> 
> 时间：2012-11-02T06:52:49.477
> 
> 标签：asp.net, json, asp.net-web-api

我在网上搜索了我的问题但没有成功，所以我在这里发布问题。

我正在使用 MVC4 Web API 向客户端提供 JSON 数据。因为 C# 使用 Pascal 命名约定，所以默认情况下客户端收到的 JSON 数据也是 Pascal 命名约定，我如何自定义它以返回 JSON 中的骆驼命名约定？

另一个问题是如何更改序列化名称？例如，在 C# 中我有一个名为“Description”的属性，但为了减少数据大小，我想在 JSON 中将其序列化为“descr”，如何实现呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-19T14:01:58.760

我知道这是一篇旧文章，但我认为值得添加对 Json.Net 的引用：

[API 参考](http://james.newtonking.com/projects/json/help/index.aspx)

[Nuget 页面](http://www.nuget.org/packages/NewtonSoft.Json/)

您可以使用该属性设置每个属性将序列化**到和从**`JsonProperty`序列化的名称：

```
public class MyModel
{
    [JsonProperty("myJsonProp")]
    public string MyJsonProperty { get; set; }
} 
```

用法：

```
//Serialize
var json = Newtonsoft.Json.JsonConvert.SerializeObject(instanceOfMyModel);

//De-serialize
var deserialized = Newtonsoft.Json.JsonConvert.DeSerializeOject<MyModel>(json); 
```

生成的 Json：

```
"{
    "myJsonProp" : "value"
}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:08:12.030

帖子[http://blog.alexonasp.net/post/2012/04/05/Lowercase-JSON-with-ASPNET-Web-API.aspx](http://blog.alexonasp.net/post/2012/04/05/Lowercase-JSON-with-ASPNET-Web-API.aspx)完全回答了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:58:28.053

这可能不是最好的解决方案，但在类似的情况下，我刚刚返回了一个 json 格式的字符串，它是我想要的格式，而不是使用自动序列化。您也许可以在那里找到其他序列化库，让您可以做您想做的事。

# java - 寻找 n 叉树的最大值

> ID：13190659
> 
> 赞同：2
> 
> 时间：2012-11-02T06:53:00.337
> 
> 标签：java, algorithm, recursion, tree

我有一个由短 NTN 类定义的 n 叉树

```
public class NTN P {
     public int value;
     public Set<NTN> children;
 } 
```

我想找到这样一棵 n 叉树的最大值。假设它是一个简单的整数 n 叉树，其值为： [parent: 1 children: 2, 3, 4] [parent: 2 children: 5, 6] [parent: 4 children 7, 8, 9] 最大值只需 9。我不知道如何开始编写一个方法来找到原型的最大值：

```
public static int maximum(NTN t); 
```

根据我的尝试：

```
public static int maximum(NTN t) {
  int max = 0;
      for (NTN e : t.children) {
          if (e.value > max)
              max = e.value;
      }

  return max;
} 
```

上面的代码最多会返回 4，这意味着它只检查 t 的子代，而不是后续的一组子代。在这种情况下，它不会检查 4, [7,8,9] 和 2, [5,6] 的子集。如何更改它以便该方法找到所有后续子项的最大值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:00:44.683

```
public static int maximum(NTN t) {
  int max = t.value;
  Set<NTN> children = t.children;

  // only check if this node is not a leaf
  if (children != null && !children.isEmpty) {
    for (NTN e : children) {
      // here is the recursion
      int maxNext = maximum(e);

      if (maxNext > max) max = maxNext;
    }
  }

  return max;
} 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:01:13.123

您的解决方案不是[Recursive](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)，因此如果有的话，它不会继续存在于您的子孩子中。您可能想看看[禁忌搜索](http://en.wikipedia.org/wiki/Tabu_search)。一种更简单的方法（但容易陷入[局部最大值](http://en.wikipedia.org/wiki/Maxima_and_minima)）是[爬山](http://en.wikipedia.org/wiki/Hill_climbing)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T07:05:57.073

我想这样的事情会有所帮助，你在树上做一个 DFS 来遍历所有节点，然后查看每个节点的值，如果它大于你作为静态变量保留的最大值公共类（例如公共静态 int max），您将 max 设置为该节点的值，这样的事情会做（希望，未经测试，请注意返回类型为 void 并且您直接更新公共类中的变量）：

```
 public void maximum(NTN T){
            if (!T.children.isEmpty() && T.children != null){
                for(NTN e: T.children)
                    maximum(e)
            }
            if (PUBLIC_CLASS.MAX < T.value)
                PUBLIC_CLASS.MAX = T.value;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-05T05:09:56.140

**以下代码从 nary 树中重新运行具有最大值的完整节点**

// 以下是给定的树节点结构。

> 模板

```
class TreeNode
 {
    public:
        T data;
        vector<TreeNode<T>*> children;

        TreeNode(T data) {
            this->data = data;
        }

        ~TreeNode() {
            for (int i = 0; i < children.size(); i++) {
                delete children[i];
            }
        }
 };

TreeNode<int>* maxDataNode(TreeNode<int>* root) {

    if(root == NULL) return NULL;
    TreeNode<int>* maxNode = new TreeNode<int>(0);
    int max = 0;

    for(int i=0; i<root->children.size();i++){
        if(maxDataNode(root->children[i])->data > max)
        {    
            max = maxDataNode(root->children[i])->data;
            maxNode = maxDataNode(root->children[i]);
        }
    }
    if(root->data > maxNode->data)
    {
        maxNode = root;
        return maxNode;
    }
    return maxNode;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-05T16:22:54.967

```
public static int maximum(NTN t) {
    int max = t.value;
    Set<NTN> children = t.children;
    if (children != null && !children.isEmpty) {
        for (NTN e : children) {
            max = Math.max(max, maximum(e));
        }
    }
} 
```

# android - Android应用程序中的后退按钮功能

> ID：13190664
> 
> 赞同：-1
> 
> 时间：2012-11-02T06:53:18.960
> 
> 标签：android, back-button, back-button-control

我必须开发一个安卓应用程序。在这里我希望返回意味着我只使用了键盘按钮。但我不应该使用键盘返回按钮。我希望对所有活动都使用后退按钮功能。

例如：

如果我必须单击自定义后退按钮意味着我应该能够转到上一个屏幕。我能怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:18:44.977

主要活动 ：

```
next.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(MainActivity.this,Second.class);
                startActivity(intent);
            }
        }); 
```

第二活动：

```
pre.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent = new Intent();
                finish();
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:58:22.593

当您想返回时，请编写以下行，它将引导您返回。

```
super.onBackPressed(); 
```

在这里，如果您想删除设备后退按钮功能，请通过如下覆盖删除 onBackPressed() 中的同一行

```
@Override
protected void onBackPressed()
{
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T07:13:56.150

写这段代码，几个月前我用过这个：-

```
ImageButton back = (ImageButton) findViewById(R.id.btn_back);
back.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
finish();
}
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T07:09:22.420

你可以创建一个后退按钮，在 onclick() 函数中，你只需要调用这个：this.finish()

# mysql - Firebird数据库表中的最大记录数与mysql相同？

> ID：13190670
> 
> 赞同：1
> 
> 时间：2012-11-02T06:53:53.453
> 
> 标签：mysql, database, limit, firebird

我一直在使用 mysql 数据库到数据库管理系统，但是当表中的记录达到 60 万条时，我发现 mysql 出现错误。当我使用firebird数据库时是否会发生同样的情况？如果我使用相同的硬盘容量，firebird 数据库中的存储限制是否与 mysql 相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:15:51.057

Firebird 数据库的大小不受限制（受文件系统限制）。在一张表中，您可以存储约 32TB 的数据。行数是 160 亿（已确认），但可能更多（这个数字不是硬限制）。

# android - Android卸载应用程序删除外部数据

> ID：13190671
> 
> 赞同：1
> 
> 时间：2012-11-02T06:53:55.840
> 
> 标签：android, apk, uninstallation

卸载应用程序时，有什么方法可以删除该应用程序使用的一些数据？我的意思是某种 onUninstall 方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:22:16.973

您必须将此类数据存储在 /data/data/ 中，以便在卸载应用程序时也删除应用程序的数据。您可以使用[Activity.getDir()](http://developer.android.com/reference/android/content/ContextWrapper.html#getDir%28java.lang.String,%20int%29)来获取该文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:15:07.827

抱歉，Android（截至目前）没有类似`onUninstall`. 因此，您无法在卸载时运行任何代码。查看[此线程](https://stackoverflow.com/questions/3013823/perform-a-task-on-uninstall-in-android)以获取更多信息。

但是，您可以使用`createExternalStoragePrivateFile`和`getExternalFilesDir`方法来创建外部文件。当您的应用程序被卸载时，它将被删除。

查看来自 Android 开发网站的[文档和示例代码。](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T07:00:56.650

不，这将始终删除存储在 APK 中的数据。

如果您将存储在 sd 卡中，那么您可能可以取回，但出于安全原因，开发人员也可以从任何其他位置删除该数据。

有时开发人员没有删除表单 sd 卡。这样您就可以通过编码返回并再次重用。

所以，现在取决于您将数据存储在哪里以及如何使用它们。

# android - 如何在 android 设备上定位应用程序并在列表视图中显示？

> ID：13190676
> 
> 赞同：0
> 
> 时间：2012-11-02T06:54:23.377
> 
> 标签：android, xml, button, view, sdk

我目前正在做一个项目只是为了卸载应用程序，但我似乎无法找到如何找到安装在我手机上的应用程序。

谁能指点我一个教程或给我一些见解？您的知识将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:01:00.097

这是实现此目的的代码

```
 package pack.GetAllInstalledApplications;
 import java.util.ArrayList;
 import java.util.List;
 import android.app.Activity;
 import android.content.pm.PackageInfo;
 import android.graphics.drawable.Drawable;
 import android.os.Bundle;
 import android.widget.ArrayAdapter;
 import android.widget.ListView;
 import android.widget.Toast;

 public class GetAllInstalledApplicationsExample extends Activity {

 public  ArrayList<PackageInfoStruct> res = new ArrayList<PackageInfoStruct>(); 
 public ListView list;
 public String app_labels[];

 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        getPackages();

        list = (ListView)findViewById(R.id.ListView01);     
        try{
            list.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_dropdown_item_1line, app_labels));
        }catch(Exception e){
            System.out.println("Err ++> " + e.getMessage());
            Toast.makeText(getApplicationContext(),e.getMessage(),Toast.LENGTH_SHORT).show();
        }

 }
private ArrayList<PackageInfoStruct> getPackages() {
    ArrayList<PackageInfoStruct> apps = getInstalledApps(false); /* false = no system packages */
    final int max = apps.size();
    for (int i=0; i<max; i++) {
        apps.get(i);
    }
    return apps;
}

private ArrayList<PackageInfoStruct> getInstalledApps(boolean getSysPackages) {

    List<PackageInfo> packs = getPackageManager().getInstalledPackages(0);
    try{
        app_labels = new String[packs.size()];
    }catch(Exception e){
        Toast.makeText(getApplicationContext(),e.getMessage(),Toast.LENGTH_SHORT).show();
    }                   
    for(int i=0;i<packs.size();i++) {
        PackageInfo p = packs.get(i);
        if ((!getSysPackages) && (p.versionName == null)) {
            continue ;
        }
        PackageInfoStruct newInfo = new PackageInfoStruct();
        newInfo.appname = p.applicationInfo.loadLabel(getPackageManager()).toString();
        newInfo.pname = p.packageName;
        newInfo.versionName = p.versionName;
        newInfo.versionCode = p.versionCode;
        newInfo.icon = p.applicationInfo.loadIcon(getPackageManager());
        res.add(newInfo);  

        app_labels[i] = newInfo.appname;
    }
    return res; 
}
    }
     /* This class is for storing the data for each application */
     class PackageInfoStruct {
         String appname = "";
         String pname = "";
         String versionName = "";
         int versionCode = 0;
         Drawable icon;  
     } 
```

并且只需在您的 XML 中声明一个列表视图。这会成功的。

# git - 在 git 中应用补丁时出错

> ID：13190679
> 
> 赞同：17
> 
> 时间：2012-11-02T06:54:52.313
> 
> 标签：git

我有一个浅克隆，我在上面做了三个提交。这是日志：

> $ git log --oneline --graph --decorate --all
> * **d3456fd (HEAD, master) patch 3**
> * **9713822 patch 2**
> * **6f380a6 patch 1**
> * 8a1ce1e (origin/master, origin/HEAD) from full clone
> * 7c13416 added from浅
> * 3b3ed39 删除了电子邮件
> * cfbed6c 进一步修改
> * a71254b 添加到版本 2.1
> * 7347896（嫁接）版本 2 更改

现在我从这里创建一个补丁：

> $ git format-patch -k --stdout origin > ../format_since_origin.patch

我想在另一个克隆中应用这个补丁，这是一个完整的克隆。
这是日志：

> $ git log --oneline --graph --decorate --all
> * 8a1ce1e (HEAD, origin/master, master) from full clone
> * 7c13416 added from shallow
> * 3b3ed39 removed email
> * cfbed6c 进一步修改
> * a71254b 添加到 release 2.1
> * 7347896版本 2
> 的更改 * b1a8797 对 ttwo 文件的更改
> * 603710c 更改了测试报告
> * 16b20b3 添加了 test_report.txt
> * f0871ea 修改了 file1.xml
> * dd94bfc 添加了 file1.xml
> * 00758aa 第二次提交
> * 49f9968 第一次提交

我无法应用从上面的浅克隆创建的补丁。我收到以下错误。

> $ git am -3 /c/temp/git/format_since_origin.patch
> 应用：补丁 1
> 使用索引信息重建基础树...
> 错误：补丁失败：file1.c:6
> 错误：file1.c：补丁不适用
> 你手动编辑你的补丁吗？
> 它不适用于记录在其索引中的 blob。
> 不能回退到三向合并。
> 补丁在 0001 补丁 1 失败
> 当你解决了这个问题后，运行“git am --resolved”。
> 如果您希望跳过此补丁，请运行“git am --skip”。
> 要恢复原始分支并停止修补运行“git am --abort”。

知道为什么这个补丁失败了吗？还是我的方法完全错误？

# 更新：

它适用于以下

> $ git am -3 --ignore-whitespace /c/temp/git/format_since_origin.patch 应用：补丁 1 应用：补丁 2 应用：补丁 3

现在，正如查尔斯所建议的那样 - 如果我尝试 git diff，我会收到如下错误。

> $ git diff -p 起源 > ../dif_origin.patch

申请时，

> $ git apply --ignore-whitespace --inaccurate-eof /c/temp/git/dif_origin.patch
> c:/temp/git/dif_origin.patch:9：尾随空格。
> file1.c
> c:/temp/git/dif_origin.patch:18 的补丁更改：尾随空格。
> 修补这个 xml 家伙
> c:/temp/git/dif_origin.patch:29: 尾随空格。
> fsdfsd
> c:/temp/git/dif_origin.patch:30：尾随空格。
> patch 这个报告
> 错误：patch failed:file1.c:6
> error:file1.c:patch does not apply
> error:patch failed:file1.xml:2
> error:file1.xml:patch does not apply
> error:patch failed:tr/ test_report.txt:2
> 错误：tr/test_report.txt：补丁不适用

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-02T07:15:38.473

请注意，必须忽略空格的一个理由是（[2010 年 6 月](http://git.661346.n2.nabble.com/PATCH-git-am-Ignore-whitespace-before-patches-td5059594.html)）：

> 它所做的是启用`GMail -> download -> git-am workflow`.
> GMail（当然还有无数其他）电子邮件提供商在原始电子邮件消息的开头引入了空格，而在其他情况下则保持原样。

如“ [`git am/format-patch`: control format of line endings](https://stackoverflow.com/a/6677017/6309) ”中所述，您可以尝试：

```
 git am --keep-cr 
```

这不需要您忽略空格（仅警告）。

[OP maxmelbin](https://stackoverflow.com/users/1288207/maxmelbin)在[评论](https://stackoverflow.com/questions/13190679/error-while-applying-a-patch-in-git#comment17956801_13190759)中确认以下工作：

```
 git am -3 --keep-cr --committer-date-is-author-date /c/temp/git/format_since_origin.patch 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-18T11:50:24.903

当 git apply 正常工作时，您根本没有输出：

```
$ git apply example.patch
[nothing returned] 
```

如果您想查看幕后发生的事情，可以使用 -v（详细）标志：

```
$ git apply -v example.patch
Checking patch includes/common.inc...
Applied patch includes/common.inc cleanly. 
```

但是，如果从您自己的本地 git 工作副本中运行 git apply ，即使使用 -v （详细）标志， git apply 也可能什么都不做，并且不提供任何输出。如果发生这种情况，请检查您在目录树中的位置 - git apply 可能在其他位置工作。

git apply 的替代方法是使用 patch 命令：

```
$ patch -p1 < example.patch 
```

这是 git apply 命令可以生成的其他输出，以及它的含义。补丁不适用

```
$ git apply example.patch
error: patch failed: includes/common.inc:626
error: includes/common.inc: patch does not apply`` 
```

Git 无法应用补丁中的更改，因为它无法找到有问题的代码行；它们必须已被另一个提交更改或删除。试试这些东西：

确保尚未应用补丁。在 git-log 中查找它或简单地检查代码以查看更改是否已经存在。如果他们是，你就完成了。如果它们不是或只有其中一些是，请尝试其他方法：

使用`patch -p1 < filename.patch`. 虽然 git-apply 完全拒绝有任何错误的补丁，但 patch -p1 会逐个工作，尽可能多地应用单独的更改。它在修改之前将每个文件备份为 filename.ext.orig 并将被拒绝的大块保存在`filename.ext.rej`. 丢弃 .orig 文件并手动应用 .rej 中留下的更改。对于小补丁来说，这是一个简单的策略。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-02T07:01:54.463

行。以下工作。

> $ git am -3 --ignore-whitespace /c/temp/git/format_since_origin.patch
> 应用：补丁 1
> 应用：补丁 2
> 应用：补丁 3

# java - 将应用程序与 VC++ 应用程序集成

> ID：13190680
> 
> 赞同：1
> 
> 时间：2012-11-02T06:54:53.110
> 
> 标签：java, eclipse-plugin, swt, eclipse-rcp

我有一个 Eclipse 应用程序，它创建一些文件，然后以该文件作为输入调用在 VC++ 中开发的第二个外部应用程序。有什么方法可以将 VC++ 应用程序集成到我的 Eclipse 应用程序中而无需太多编码（我不想将 VC++ 应用程序迁移到 Eclipse 应用程序）可能是在我的 Eclipse 应用程序中添加视图或编辑器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:45:59.780

我没有这方面的经验，但可以使用 Eclipse 中的 OLE 支持来完成。有关如何在 SWT 中嵌入 OLE 对象的说明，请参见[此处](http://www.eclipse.org/articles/article.php?file=Article-ActivexSupportInSwt/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:20:48.697

您可以使用[JNI](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/)做到这一点。

> JavaTM 本机接口 (JNI) 是一种标准编程接口，用于编写 Java 本机方法并将 JavaTM 虚拟机* 嵌入本机应用程序。主要目标是跨给定平台上的所有 Java 虚拟机实现的本地方法库的二进制兼容性。

# performance - 唯一约束如何影响 Postgres DB 中的写入性能

> ID：13190682
> 
> 赞同：20
> 
> 时间：2012-11-02T06:55:00.613
> 
> 标签：performance, postgresql, unique-constraint

`UNIQUE`对一列或一组列指定的约束是否会以任何方式影响 Postgres DB 的写入性能？它在内部如何运作？

我的意思是，它是否在插入新记录时执行唯一检查？如果是，它是如何做到的，它是否对数据库中已经存在的重复值进行线性搜索？在这种情况下，它被认为会影响性能，即唯一约束的数量越多，写入/插入性能就越差？这是真的吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-02T07:12:54.463

`UNIQUE`约束或`PRIMARY KEY`结果的创建导致btree`UNIQUE`索引的创建。`INSERT`每当任何记录被ed、`UPDATE`ed 或`DELETE`d 如果*任何*索引列发生更改时，都必须更新此索引。如果没有更改索引列，则 HOT（仅堆元组优化）可能会启动并避免索引更新，特别是如果您有非默认设置`FILLFACTOR`以在页面中腾出空间。

插入/更新时的索引更新需要时间，因此插入`UNIQUE`索引表比插入没有任何唯一索引或主键的表要慢。也是如此`UPDATE`，但是如果使用索引来查找要更新的元组（并避免 seqscan），则通常是净胜于根本没有索引。如果使用不同的索引来查找元组，或者如果 seqscan 更快（在小型表上也是如此），那么就像`INSERT`索引没有任何好处，只会产生写入成本来为该操作更新它。这适用于所有索引，而不仅仅是`UNIQUE`索引。

每个`INSERT`或`UPDATE`在`UNIQUE`索引列上都需要索引查找来验证键与现有键不冲突。从模糊的记忆中，这与将新条目插入索引的过程相结合，但我不是 100% 确定那里。

AFAIK`DELETE`不影响索引。它只是`xmax`为堆中的元组设置。

即使事务或事务在成功插入或更新受约束的列`ROLLBACK`后因错误而中止，索引也会更新。autovacuum 的工作稍后会清理死索引条目。请参阅[PostgreSQL 手册中的并发控制](http://www.postgresql.org/docs/current/interactive/mvcc.html)。`UNIQUE``VACUUM`

所有这一切对于 a 也是如此`PRIMARY KEY`，它也是使用`UNIQUE`索引来实现的。

**每个索引，包括由`PRIMARY KEY`和`UNIQUE`约束使用的索引，都会导致写入性能下降。**

# jquery - 没有新对象传递给茧回调

> ID：13190683
> 
> 赞同：0
> 
> 时间：2012-11-02T06:55:03.360
> 
> 标签：jquery, ruby-on-rails-3.2, jquery-events, cocoon-gem

我正在使用[cocoon](https://github.com/nathanvda/cocoon)，并有以下回调：

```
$(document).bind('cocoon:after-insert', function(e,inserted_item) {
    alert('Inserted!');
}); 
```

警报按预期触发，但`inserted_item`未定义。`e`已完全成型并可用。我错过了什么？

我也尝试`document`用类选择器替换，但没有变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:00:35.617

你在使用来自 github 的 gem 吗？例如在你的 gemfile 中写：

```
gem 'cocoon', :git => 'https://github.com/nathanvda/cocoon' 
```

您提到的功能尚未发布，将在本周末的某个地方发生。想先解决另一个未解决的问题。

# ns2 - 在 Ubuntu 12.04 中安装 ns 2.35 时出错

> ID：13190691
> 
> 赞同：0
> 
> 时间：2012-11-02T06:55:58.990
> 
> 标签：ns2

在 ubuntu 中安装 ns 2.35 (sudo ./install) 时收到以下错误。

config.status：创建 Makefile
rm -f libotcl.a otcl.o
gcc -V 4.5 -c -g -O2 -DNDEBUG -DUSE_SHM -DHAVE_UNISTD_H=1 -I。-I/home/arya/ns-allinone-
2.35/include -I/home/arya/ns-allinone-2.35/include -I/home/arya/ns-allinone-
2.35/include -I/include otcl.c
gcc ：错误：4.5：没有这样的文件或目录
gcc：错误：无法识别的选项 '-V'
制作：*** [libotcl.a] 错误 1
​​otcl-1.14 制作失败！退出...

我在 /ns-allinone-2.35/otcl-1.14
CC = @CC@ -V 4.6.3 中更改了 Makefile.in，
其中 -V 4.6.3 代表 gcc 版本。
如何消除此错误。在 google 中找不到任何相关的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-22T21:58:17.110

这是由于缺少octl文件夹中的配置文件，最好的方法是再次下载ns包并尝试安装

安装 g++ 4.9

```
$ sudo apt install g++-4.9 
```

运行安装程序

```
export CC=gcc-4.9 CXX=g++-4.9 && ./install 
```

# mysql - MariaDB 中的 TRUNCATE TABLE 挂起

> ID：13190697
> 
> 赞同：0
> 
> 时间：2012-11-02T06:56:35.653
> 
> 标签：mysql, truncate, mariadb

我正在尝试从 mysql 迁移到 mariadb。这次我可以面对 mariadb 的另一个问题。

有时`TRUNCATE TABLE`查询会挂起。但是在 MySQL 中，这个问题并没有发生。

任何人都可以在这方面帮助我吗？？？我是 MariaDB 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:00:32.297

```
Please use :
TRUNCATE [TABLE] tbl_name
If this one is hang means some dependencies is exists on these table. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:54:24.120

MariaDB 5.5.27 中解决了这个问题。

# javascript - 限制选择元素中的选项

> ID：13190700
> 
> 赞同：0
> 
> 时间：2012-11-02T06:56:45.683
> 
> 标签：javascript, html, select

> **可能重复：**
> [阻止选择下拉菜单在 FireFox 和 Opera 中打开](https://stackoverflow.com/questions/11603453/prevent-select-dropdown-from-opening-in-firefox-and-opera)

我在 html 文件中有一个选择标签，我想要的是在单击此选择标签时打开我自己的表格。但是使用这个选择标签的选项窗口也会打开我不想打开的。
有什么办法可以使该选项不会在 SELECT 标签中打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:46:34.463

`SELECT``mousedown`触发事件后立即打开下拉菜单。为了防止它打开，您必须阻止该事件，`mousedown`以便它不会触发任何进一步的事件。这是一个例子：

```
function test() {
  // do something here
  return false;
} 
```

使用 HTML

```
<select onmousedown="test();"><!-- options here --></select> 
```

**或者**

```
function test() {
  // do something here
} 
```

使用 HTML

```
<select onmousedown="test(); return false;"><!-- options here --></select> 
```

不同之处在于第一种方法，您不能在标签上的`mousedown`事件中调用更多函数。`SELECT`但是你可以在之前用第二种方法做到这一点`return false;`

# xml - 在纯文本电子邮件中插入换行符

> ID：13190705
> 
> 赞同：2
> 
> 时间：2012-11-02T06:57:28.930
> 
> 标签：xml, aviarc

我需要发送电子邮件。我遍历数据集以获取电子邮件正文中包含的电子邮件地址和其他信息。

我更喜欢电子邮件是纯文本。我的问题是我不知道如何插入换行符，以便以清晰的方式排列信息。

我试过这个：

```
<email-to address="{$overdue_releases.req_email}"/>

<subject value="OVERDUE ITEMS NOTIFICATION"/>

<body value="This is a notification that you have the following overdue items:{$var.newline}"/>
<body value="-----------------------------------------------------------------{$var.newline}"/>
<body value="{$var.newline}"/>
<body value="Borrower: {$overdue_releases.req_name}{$var.newline}"/>
<body value="Phone: {$overdue_releases.req_phone}{$var.newline}"/>
<body value="Equipment item: {$overdue_releases.eqm_name} - {$overdue_releases.itm_identification}{$var.newline}"/> 
<body value="Date borrowed: {$overdue_releases.rel_date_pickedup}{$var.newline}"/>  
<body value="-----------------------------------------------------------------{$var.newline}"/>  
<body value="Please return the overdue item(s) as AS SOON AS POSSIBLE.{$var.newline}"/>  
<body value="-----------------------------------------------------------------{$var.newline}"/> 
```

换行变量设置为 & # 10 ; （用空格显示，以便在此处显示）

这是行不通的。电子邮件只是连续一行中所有正文值标签的串联。

我还尝试将电子邮件输出为 html 并使用字符“<br>”（哈希、与号、ascii char 格式）作为换行变量。这是一次失败。

我无法在 doco 中找到任何东西。

我是否需要求助于创建 txt 格式的 JasperReport 来附加到电子邮件，或者有没有办法在电子邮件正文中插入换行符和/或标记字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:28:16.697

尝试只使用一个 body 标签。字符串中的任何一个`&#10;`或只是实际的新行都应该起作用。

```
<body value="This is a notification that you have the following overdue items:
-----------------------------------------------------------------

Borrower: {$overdue_releases.req_name}
Phone: {$overdue_releases.req_phone}
Equipment item: {$overdue_releases.eqm_name} - {$overdue_releases.itm_identification}
Date borrowed: {$overdue_releases.rel_date_pickedup}
-----------------------------------------------------------------
Please return the overdue item(s) as AS SOON AS POSSIBLE.
---------------------------------------------------------------"/> 
```

另请参阅此答案：[https](https://stackoverflow.com/a/2012277/1164143) ://stackoverflow.com/a/2012277/1164143 。建议最好的（即最正确或最便携的）方法是使用普通/文字的新行。但是编码的新行 ( `&#10;`, `&#10;&#13;`) 在 Aviarc 中可以正常工作。

# php - 参考 CDATA 是另一个网站上的 URL，用 XML 解析成 PHP

> ID：13190706
> 
> 赞同：0
> 
> 时间：2012-11-02T06:57:34.367
> 
> 标签：php, xml-parsing, cdata

我有一个从另一个网站导出的 XML，其中包含`CDATA`但是`CDATA`当引用回该网站时，它实际上是一个 URL 链接。我可以将其解析`CData`为`PHP`，但它会显示为文本。有没有办法可以将它链接`CData`回 URL 所在的网站？还是我需要将 URL 放在`CData`要解析的位置？

---来自其他网站---例如 www.otherwebsite.com

例如来自 XML 的节点

```
<SongTitle><![CDATA[This is a song link at www.otherwebsite.com]]></SongTitle> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:43:05.600

将文件加载到字符串中后尝试 preg_match_all ..

```
$string=  '<![CDATA[This is a song link at www.otherwebsite.com]]>'; // string of data or your xml file...

preg_match_all('/<!\[(CDATA)\[\s*(.*?)\s*\]\]>/',$string,$out);

$current_link = $out[2][0]; // print_r($_out); to see what is in this new array...
$current_link = str_replace("This is a song link at ","",$current_link); // now remove clutter
echo $current_link; 
```

如果您想处理多次出现的 CData....

```
$var =  ' sdf sdf sdf<![CDATA[This is a song link at www.awesome.com]]> sdf sdf sd<![CDATA[This is a song link at www.google.com]]><![CDATA[This is a song link at www.amazon.com]]>';

preg_match_all('/<!\[(CDATA)\[\s*(.*?)\s*\]\]>/',$var,$out);
$array_of_links = $out[2];

foreach($array_of_links as $link){
    $current_link = str_replace("This is a song link at ","",$link);
    echo $current_link;
    echo "<br />";
} 
```

# eclipse - 在 Eclipse 中启用快捷键

> ID：13190712
> 
> 赞同：2
> 
> 时间：2012-11-02T06:57:56.807
> 
> 标签：eclipse, git

我是 Eclipse 中 Git 项目配置的新手。在此之前，我正在使用 SVN 的项目签出。那个时候我可以使用一些快捷键。如果我使用类似对象 obj。表示它显示了相应类中的所有方法。

但是如果我使用的是 obj，则在转移到 Git 项目之后。**它会在“编译单元不在 java 项目的 buid 路径上**”之类的框中显示一条消息。特别是我使用的是 Java EE Perspective。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:55:38.857

*   你确定你没有从[派生](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/resAdv_derived.htm)文件夹打开类吗？它可能是一种生成的类。
*   在进行结帐（克隆，在 git 中）时，您是否在其中一个步骤中检查了项目类型？![在此处输入图像描述](../Images/9619e6fb075b25d70a76c10a1a2720e0.png).

很可能 IDE 特定文件不受版本控制，因此您需要手动配置它。

*   如果没有，请进行额外的项目重新配置 - 添加[项目方面](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jst.j2ee.doc.user/topics/cfacets.html)。
*   或者只是手动配置项目构建路径以包含这些目录作为源目录。

# java - 为什么在 Java 的新 Collection 库中牺牲了线程安全？

> ID：13190717
> 
> 赞同：3
> 
> 时间：2012-11-02T06:58:16.900
> 
> 标签：java, collections, thread-safety

在 Java 的新 Collections 库中，除了性能之外还有其他理由牺牲线程安全吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T07:04:38.287

是的，还有另一个原因。使集合的每个方法同步使集合线程安全，但是

*   有更快的解决方案（如并发集合）
*   无论如何这还不够，因为您经常必须实现 check-then-act 操作（例如检查元素是否存在，如果不存在则添加它）或迭代，无论如何都需要外部同步

此外，根本没有牺牲线程安全性，因为您只需将 ArrayList（例如）包装在同步集合代理中，即可获得与旧的、默认同步的 Vector 相同的同步保证：

```
List<String> list = Collections.synchronizedList(new ArrayList<String>()); 
```

因此，您可以两全其美：不需要同步时的快速收集（99% 的情况），以及需要时的同步收集。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T07:07:25.927

性能是主要原因。

但是，还有一个重要的哲学/设计原因：您*不能*仅通过使各个集合类线程安全来实现完全的线程安全。

安全并发代码通常需要不同级别的同步，例如：

*   在更高级别 - 同时锁定两个集合，以便您可以从一个集合中删除一个元素并将其添加到另一个集合）
*   在较低级别 - 锁定并发数据表中的各个项目行

所以在某种程度上，使集合类同步将是一个相当武断的决定，不适合许多（如果不是大多数）情况。因此，使集合不安全并让用户决定他们的并发策略（是否需要、适当的粒度级别、事务处理方法等）是一个更好的选择。

除此之外，另一种选择是采用 Clojure 开创的方法并使用不可变的持久集合类，这样您就不必担心锁或线程安全。但这需要对你的状态方法进行更全面的重新思考......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-02T07:00:27.043

为什么性能不够好是一个原因？

强制线程“安全性”（无论如何对于大多数情况来说可能是不完整的——例如没有 putIfAbsent）已被删除，所以当你不需要它时你不必支付成本，但仍然可以选择制作东西当你这样做时，你自己线程安全（并且具有你选择的粒度）。

我猜想实现是没有办法在不需要程序员考虑它的自动线程安全中烘焙，可以在所有情况下使用，可靠地工作并且不会增加显着的开销。

另请注意，“甚至更新的”并发 utils 包带来了几个新的线程安全集合实现，它们用于非常特定的目的。同样，对于不同的任务，您需要不同的工具，而旧的集合类提供了一个非常差的中间地带，并不真正适合大多数应用程序。

# postgresql - 具有复合主键的表中记录的顺序是什么

> ID：13190720
> 
> 赞同：19
> 
> 时间：2012-11-02T06:58:26.113
> 
> 标签：postgresql, sorting, primary-key

在PostgreSQL中，当多个列的组合被指定为 时`PRIMARY KEY`，记录是如何排序的？

这是假设 PostgreSQL 按照主键的顺序对记录进行排序。可以？

此外，在 PostgreSQL 的情况下，主键是否会自动编制索引？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-02T07:28:16.907

这个问题做出了错误的假设，即主键根本就强加了表顺序。它没有。PostgreSQL 表没有定义的顺序，有或没有主键；它们是按页块排列的行“堆”。`ORDER BY`需要时使用查询子句进行排序。

您可能会认为 PostgreSQL 表被存储为以主键顺序存储在磁盘上的面向索引的表，但这不是 Pg 的工作方式。我认为 InnoDB 存储由主键组织的表（但尚未检查），并且在其他一些供应商的数据库中使用通常称为“聚集索引”或“索引组织表”的功能是可选的。PostgreSQL 目前不支持此功能（至少从 9.3 开始）。

也就是说，它`PRIMARY KEY`是使用`UNIQUE`索引实现的，并且该索引有一个排序。它从索引的左列（因此是主键）开始按升序排序，就好像它是`ORDER BY col1 ASC, col2 ASC, col3 ASC;`. PostgreSQL 中的任何其他 b-tree（与 GiST 或 GIN 不同）索引也是如此，因为它们是使用[b+trees](http://en.wikipedia.org/wiki/B%2B_tree)实现的。

所以在表中：

```
CREATE TABLE demo (
   a integer,
   b text, 
   PRIMARY KEY(a,b)
); 
```

系统将自动创建等价于：

```
CREATE UNIQUE INDEX demo_pkey ON demo(a ASC, b ASC); 
```

创建表时会向您报告，例如：

```
regress=>     CREATE TABLE demo (
regress(>        a integer,
regress(>        b text, 
regress(>        PRIMARY KEY(a,b)
regress(>     );
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "demo_pkey" for table "demo"
CREATE TABLE 
```

检查表时可以看到这个索引：

```
regress=> \d demo
     Table "public.demo"
 Column |  Type   | Modifiers 
--------+---------+-----------
 a      | integer | not null
 b      | text    | not null
Indexes:
    "demo_pkey" PRIMARY KEY, btree (a, b) 
```

您可以`CLUSTER`在此索引上根据主键对表进行重新排序，但这是一次性操作。系统不会保持这种顺序 - 虽然如果由于非默认而导致页面中有可用空间，`FILLFACTOR`我认为它会尝试这样做。

索引（而不是堆）的固有顺序的一个结果是搜索速度要快得多*：*

```
SELECT * FROM demo ORDER BY a, b;
SELECT * FROM demo ORDER BY a; 
```

比：

```
SELECT * FROM demo ORDER BY a DESC, b; 
```

并且这些都不能使用主键索引，除非你有一个索引，否则它们会执行 seqscan `b`：

```
SELECT * FROM demo ORDER BY b, a;
SELECT * FROM demo ORDER BY b; 
```

这是因为 PostgreSQL 使用索引几乎和单独使用索引`(a,b)`一样快。`(a)`它不能像单独使用索引`(a,b)`一样使用索引`(b)`- 甚至不能缓慢，它就是不能。

至于`DESC`entry，对于那个Pg，必须做一个反向索引扫描，比普通的正向索引扫描要慢。如果您看到大量反向索引扫描，`EXPLAIN ANALYZE`并且您可以负担额外索引的性能成本，则可以按`DESC`顺序在字段上创建索引。

这适用于`WHERE`从句，而不仅仅是`ORDER BY`. 您可以使用索引`(a,b)`来搜索`WHERE a = 4`或单独搜索，`WHERE a = 4 AND b = 3`但*不能*单独搜索`WHERE b = 3`。

# ruby-on-rails - Rails：列出“验证：包含”字段的可接受值

> ID：13190724
> 
> 赞同：2
> 
> 时间：2012-11-02T06:58:41.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, introspection

我有一个这样的模型

```
class Question < ActiveRecord::Base
  attr_accessible :kind, :question, :state
  belongs_to :section
  validates :question, :kind, :state, :presence => true
  validates :question, :uniqueness => {:scope => [:section_id]}
  validates :kind, :inclusion => {:in => %w(radio check stars)}
  validates :state, :inclusion => {:in => %w(new active answered canceled)}
end 
```

是否可以列出某个字段的所有接受值？例如，从“kind”字段中获取 %w(radio check stars) 列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:11:37.657

可能有更好的方法来做到这一点，但是在控制台中玩的一些让我明白了：

```
Question.validators_on(:kind).select{|v| v.kind_of? ActiveModel::Validations::InclusionValidator}.first.options
# => {:in=>["radio", "check", "stars"]}` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T17:46:55.830

简洁一点

`VALID_KINDS = %w(radio check stars) validates_inclusion_of :kind, in: VALID_KINDS`

[文件](http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates_inclusion_of)

# mysql - 警告代码：1264 日期时间列值的列值超出范围

> ID：13190726
> 
> 赞同：0
> 
> 时间：2012-11-02T06:58:50.527
> 
> 标签：mysql, sqlyog

这是我的查询：

```
UPDATE lynn_mis_goodsales SET accepteddate = '2011-02-30 13:24:50' WHERE created LIKE '0000-00-00 00:00:00' 
```

列值是日期时间，给出的错误是：

```
Warning Code : 1264
Out of range value for column 'accepteddate' 
```

使用 SQLYog 时出现此错误的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:03:50.117

我可能是错的，但您的日期似乎是 2 月 30 日，这将导致错误，因为该日期在我所知道的任何地方都不存在 :)

# c# - 你知道我可以在哪里找到 NConsoler 的文档吗？

> ID：13190727
> 
> 赞同：1
> 
> 时间：2012-11-02T06:59:07.857
> 
> 标签：c#, .net, console-application

在我的一个项目中，我想实现 NConsoler，用于 .NET 的命令行解析器库。

我很难找到一个好的文档。

你知道我可以在哪里找到这个 API 的文档吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:05:12.497

我找不到文档，但在源代码中有[一些使用示例](http://code.google.com/p/nconsoler/source/browse/#svn/trunk/Examples)比文档恕我直言。

**更新：** [这](http://nconsoler.csharpus.com/manual/)是手册。看起来很简单，也很重要。

# objective-c - UINavigationItem.titleView 中的 UISearchBar 未完全填充宽度

> ID：13190729
> 
> 赞同：1
> 
> 时间：2012-11-02T06:59:09.757
> 
> 标签：objective-c, ios, ios6

我在导航栏的标题视图中有一个 UISearchBar，我确实使用了 [searchBar sizetofit] 并创建了带有 CGRectZero 框架的 UISearchBar。但是Navigation的titleView里面的UISearchBar的左右大小有一个小的空白区域。

![UISearchBar 两边都是空的：](../Images/d775a78bfb91e87a2fd19db32f1dbf37.png)

```
theSearchBar = [[UISearchBar alloc] initWithFrame:CGRectZero];
theSearchBar.delegate = self;
self.navigationItem.titleView = self.theSearchBar;
[self.theSearchBar sizeToFit];

self.navigationItem.titleView.autoresizingMask = UIViewAutoresizingFlexibleWidth;

//Change color of UISearchBar
theSearchBar.tintColor = [UIColor colorWithRed:102.0f/255.0f green:73.0f/255.0f     
blue:126.0f/255.0f alpha:1.0f];

//Change color of NavigationBarItem
self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:102.0f/255.0f 
green:73.0f/255.0f blue:126.0f/255.0f alpha:1.0f];

//Set background image for navigation bar
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:   
@"SearchBar.png"] forBarMetrics:UIBarMetricsDefault]; 
```

我希望 UISearchBar 完全填充纵向和横向屏幕的宽度..

非常感谢任何帮助:)

我在 iPhone 5 上使用 Xcode 4.5、iOS 6。

我只想使用 navigationItem.titleView 来托管我的 UISearchBar，我认为这样更好。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:10:05.053

只需隐藏导航栏，并将 theSearchBar 添加到**self.view** self.navigationController.navigationBarHidden = NO; [self.view addSubview:theSearchBar];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:32:53.923

设置导航栏的背景图像后，只需在代码中添加这两行：

```
[self.navigationItem setRightBarButtonItem:nil];
[self.navigationItem setLeftBarButtonItem:nil]; 
```

希望对你有效。

# php - 从两个表中为几个 usres 减去两个分数。mysql

> ID：13190731
> 
> 赞同：1
> 
> 时间：2012-11-02T06:59:28.493
> 
> 标签：php, mysql

我需要访问几个表，实际上它们是同一个表，但版本较旧，并从每个经理的两个表中获得最大减去分数。

假设我们的表 r6 和 r10 有一个名为 scores 的字段。

我需要从两个表中获取分数，然后从旧表中（在旧表中）减去新分数（从最新表中），以获得经理之间的分数。

假设表 r6 的经理 A 得分 = 1，表 r10 的经理 A 得分 = 5。所以经理 A 的收益率得分为 5-1 = 4。基本上是 (r10.scores - r6.scores)将是总分。

现在我需要获得所有经理 AZ 的总分数（10-6 的分数），并且还能够找到最高的分数。

问题是，如何在 mysql 中实现这一点，如果不可能，你有什么建议？我正在使用 php 顺便说一句。

补充资料：

表名称：

```
1- ranking_gw6_260912 AS r6
2- ranking_gw10_201012 AS r10 
```

使用领域：

```
1- rx.manager_id
2- rx.scores 
```

这些字段存在于两个表中。

nb gw 指的是足球比赛的比赛周，该网站是梦幻足球的，我试图让比赛的获胜者在第 6 场比赛到第 10 场比赛中得分最高。遗憾的是，数据库只存储最新分数覆盖前一周的 on。所以我不能得到每周的分数，因此我只剩下总分了。然而，我们每周都有一个备份表，我将使用它来获得中间分数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:12:53.600

由于两个表上都存在字段，因此请使用`INNER JOIN`

```
SELECT  r6.manager_ID, (r6.scores - r10.scores) totalScore
FROM    Table1 AS r6
        INNER JOIN  Table2 AS r10 
            ON r6.manager_ID = r10.manager_ID
WHERE   (r6.scores - r10.scores) = 
        (
            SELECT MAX(totalScore)
            FROM
            (
                SELECT  (r6.scores - r10.scores) totalScore
                FROM    Table1 AS r6
                        INNER JOIN  Table2 AS r10 
                            ON r6.manager_ID = r10.manager_ID
            ) cc
        ); 
```

*   [**SQL Fiddle 演示** *（包括两个查询）*](http://sqlfiddle.com/#!2/a038f/4)
*   [**SQL Fiddle 演示** *（平分）*](http://sqlfiddle.com/#!2/be0da/1)

或者

```
SELECT  r6.manager_ID, (r6.scores - r10.scores) totalScoreByHighest
FROM    Table1 AS r6
        INNER JOIN  Table2 AS r10 
            ON r6.manager_ID = r10.manager_ID
ORDER BY totalScoreByHighest DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:16:55.363

你可以简单地做

```
SELECT r10.scores - r6.scores 
    FROM ranking_gw10_201012 AS r10 
    JOIN ranking_gw6_260912 AS r6 ON r6.manager_id = r10.manager_id
ORDER BY r10.scores - r6.scores 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T07:09:37.113

用 php 或任何你使用的语言来做。

检索每个表的分数，当您收到数据循环并减去并跟踪您运行时的最高值时。除非你有数以百万计的经理，否则它会足够快。

# postgresql - 使用 ruby rep 进行 PostgreSQL 复制

> ID：13190733
> 
> 赞同：5
> 
> 时间：2012-11-02T06:59:49.410
> 
> 标签：postgresql, jruby, replication, database-replication, bytea

我是 ruby​​rep 的新手，目前使用 ruby​​rep-1.2.0 版本进行 PostgreSQL Master-Master 复制。除了 bytea 之外的所有数据类型都被正确复制。在复制 bytea 列时，数据似乎被转义了两次。我正在使用 postgreSQL9.2 版本，并且在 postgres 配置中尝试了**bytea_output = 'hex'**和**bytea_output = 'escape'** 选项，但没有任何运气。

**左侧数据库 bytea 列值：**

```
\xc30d0409030220f8eef5543ac6906cd234018e307bd602ca16a61e674a6c4368f8018b01c3ae3007ae0313a9e44dc661a97a61cc94032f3ed1921e5987e92ff723f674a903 
```

**左边的 bytea 数据被复制到右边的数据库中：**

```
\x5c3330335c3031355c3030345c3031315c3030335c3030325c3034305c3337305c3335365c3336355c3132345c3037325c3330365c3232305c3135345c3332325c3036345c3030315c3231365c3036305c3137335c3332365c3030325c3331325c3032365c3234365c3033365c3134375c3131325c3135345c3130335c3135305c3337305c3030315c3231335c3030315c3330335c3235365c3036305c3030375c3235365c3030335c3032335c3235315c3334345c3131355c3330365c3134315c3235315c3137325c3134315c3331345c3232345c3030335c3035375c3037365c3332315c3232325c3033365c3133315c3230375c3335315c3035375c3336375c3034335c3336365c3136345c3235315c303033 
```

有什么，我在 ruby​​rep/postgresql 配置中遗漏了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:51:02.540

在复制过程中一定有一些东西弄乱了这些值。在 PostgreSQL 9.1 中，我可以在 bytea 和 text 之间反复来回转换。

```
select 'test'::bytea; 
```

返回 \x74657374

以下也返回相同的值：

```
select 'test'::bytea::text;
select 'test'::bytea::text::bytea; 
```

这让我想知道 Ruby-rep 是双重转义数据本身，还是不转义而是转义。

在这一点上，鉴于我在 PostgreSQL 方面的测试，我认为适当的回应是将其作为 ruby​​-rep 开发人员的错误。这必须是他们代码中的错误。

# javascript - 如何使用来自javascript的参数调用jsp和servlet

> ID：13190736
> 
> 赞同：-1
> 
> 时间：2012-11-02T06:59:52.303
> 
> 标签：javascript, jsp, servlets

这是调用javascript函数的代码..

```
<td><input type="button" name="edit" value="Edit" onclick="editRecord(<%=rs.getString(1)%>);" ></td>

<td><input type="button" name="delete" value="Delete"  onclick="deleteRecord(<%=rs.getString(1)%>);" ></td> 
```

javascripts 函数是“SSuers”是表单名称。

```
<script language="javascript">

function editRecord(id){

var f=document.SSusers;
f.method="POST";
f.action= 'edit.jsp?+id='+id;
f.submit();}

function deleteRecord(id){
var f=document.SSusers;
f.method="post";
f.action='./DeleteServlet?id='+id;
f.submit();}
</script> 
```

请帮我修复它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:05:24.433

在做这些事情时，您总是必须考虑它到达浏览器时的外观。考虑您的字符串是否为`"fred"`. 的输出

```
<input ... onclick="editRecord(<%=rs.getString(1)%>);" > 
```

...将会

```
<input ... onclick="editRecord(fred);" > 
```

请注意，`fred`它不在引号中，因此 JavaScript 引擎会认为它是一个变量引用。

您需要在它周围加上引号并将结果正确转义为 HTML 字符实体（因为您在 HTML 属性中使用它，`onclick`），`"`变成`&quot;`等，所以结果是：

```
<input ... onclick="editRecord('fred');" > 
```

（单引号）或

```
<input ... onclick="editRecord(&quot;fred&quot;);" > 
```

（双引号）。

没有为此预先提供的 JVM 函数，但您可能可以使用 Apache Commons 中的一些东西。

请注意，HTML 编码是**必需**的，因为您在`onclick`HTML 标记的属性中使用它。如果你在一个`script`元素中输出它，你需要对它进行不同的编码（也许使用几个 Java 库中的任何一个将它编码为 JSON 的结果，因为 JSON 是 JavaScript 文字语法的子集）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:27:41.950

可以使用调用你的jsp和servlet

```
location.href 
```

下面是如何调用jsp和servlet的按钮链接。

```
<td><input type="button" name="edit" value="Edit" onclick="location.href='edit.jsp?id=<%=rs.getString(1)%>'; "></td>

<td><input type="button" name="delete" value="Delete" onclick="location.href='/Registrationform/DeleteServlet?id=<%=rs.getString(1)%>'; "></td> 
```

无需函数调用它工作正常..

# java - 如何使客户端/服务器回合制 Java 游戏可在两台不同的计算机上玩

> ID：13190737
> 
> 赞同：1
> 
> 时间：2012-11-02T07:00:02.333
> 
> 标签：java, network-programming

我一直在用 Java 制作一个基于回合的多人游戏（实际上是两个玩家）。我已经让它可以在同一设备上供两个玩家玩，而且一切都......

我有一个多线程的 serverClass 控制 clientClass 的两个实例，它使用套接字在同一台机器上进行通信。

现在，我想知道如何让它在网络中的两个不同系统上播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:51:24.730

在您的客户中，您可以使用

```
InetAddress.getByName("192.168.1.232"); 
```

其中 192.168.1.232 是您的服务器 IP 地址。当您通过 Adhoc 或 LAN 连接时，最好为您的服务器提供一个静态 IP，这样它就不会改变。如果您使用 TCP，请使用

```
new Socket("192.168.1.232", port); 
```

# r - R中的树形图：投资组合包的替代品？

> ID：13190740
> 
> 赞同：4
> 
> 时间：2012-11-02T07:00:16.093
> 
> 标签：r, treemap, portfolio

我想在R中生成树形图。现在我正在使用portfolio包，但是这个包的问题是没有足够的方法来控制输出：字体，字体大小，颜色等文本属性无法控制，具有相同颜色的地图方块之间的边界无法区分，无法控制颜色渐变图例等。

我正在寻找一个树形图库，它允许对结果外观进行更细粒度的控制，而不是组合包。

在 R 中制作树形图的投资组合包有哪些替代方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T09:39:10.390

您可能想检查我编写的树形图包。许多（如果不是全部）您想要的功能都已实现。如果您有任何问题或建议，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-01T05:12:00.880

要更新上述问题，还可以使用交互式树形图。以下两个可能感兴趣的软件包：

```
library("highcharter") on CRAN
library("d3treeR") on Github 
```

要了解有关上述软件包的更多信息，请参阅链接： [Highcharter](http://jkunst.com/highcharter/shortcuts.html)和[d3treeR](https://github.com/timelyportfolio/d3treeR)

# c++ - 编译器添加的优化导致“最终”方法的不同行为

> ID：13190743
> 
> 赞同：2
> 
> 时间：2012-11-02T07:00:29.817
> 
> 标签：c++, optimization, c++11, final

我问过一个[同标题](https://stackoverflow.com/questions/13170189/compiler-added-optimization-causes-different-behavior-for-final-methods)的帖子。但是由于误解，所有答案都在讨论它是否是有效的代码/行为。

然而，主要问题是，优化是否会启动？

参考链接的帖子，看到真正的案例：

```
D *pD = new D;
pD->foo();  // `D::foo()` is `final` 
```

所有编译器都会`pD->foo()`通过不启动虚拟机制来优化调用吗？

[注意：
*为什么我在前面的问题中给出了错误代码的示例？*
我知道，以上述方式从基础转换为子并不是一个好的代码。主要目的是检查是否发生了类似 Java 的 final 优化，第一种方法是唯一可以验证它而无需进行组装的方法。]

# android - Android Finish() Asynctask 中的一个 Activity

> ID：13190756
> 
> 赞同：0
> 
> 时间：2012-11-02T07:01:38.400
> 
> 标签：android

如果没有使用连接管理器的互联网连接，我正在尝试关闭应用程序。但是，在我实现了这些代码之后。我似乎无法让它运行，它只是崩溃并出现异常。下面是我的代码和我的 logcat 。

```
 public class BuyFragment extends SherlockListFragment implements
        ActionBar.TabListener {

    static final String URL = "https://myxml.xml";
    static final String KEY_SONG = "song";
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_CAT_ARTIST = "artistcat";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";
    static final String KEY_BIG_URL = "big_url";
    static final String KEY_CAT_URL = "cat_url";
    static final String KEY_DESC = "cat_desc";
    ArrayList<HashMap<String, String>> menuItems;
    ListAdapter adapter;
    Context appContext;
    Activity mAct;
    private Fragment mFragment;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {

        if (!isNetworkAvailable()) {
            Toast.makeText(getActivity(),
                    "Internet Connection Required", Toast.LENGTH_SHORT).show();
            //this.finish();
            mAct.finish();
        } else { 
        new loadListView().execute();

        }
        super.onActivityCreated(savedInstanceState);
    }

     private boolean isNetworkAvailable() {
         ConnectivityManager connectivityManager = (ConnectivityManager) getActivity().getSystemService(Context.CONNECTIVITY_SERVICE);
         NetworkInfo activeNetworkInfo = connectivityManager
                 .getActiveNetworkInfo();
         return activeNetworkInfo != null;
     }

    public class loadListView extends AsyncTask<Integer, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(Integer... args) {
            // updating UI from Background Thread
            menuItems = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_SONG);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                map.put(KEY_CAT_ARTIST, parser.getValue(e, KEY_CAT_ARTIST));
                map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
                map.put(KEY_BIG_URL, parser.getValue(e, KEY_BIG_URL));
                map.put(KEY_CAT_URL, parser.getValue(e, KEY_CAT_URL));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
                // adding HashList to ArrayList
                menuItems.add(map);
            }
            return null;
        }

        @Override
        protected void onPostExecute(String args) {

            if (getActivity() != null) {
                adapter = new MainPageLazyAdapter(getActivity(), menuItems);
                setListAdapter(adapter);

                ListView lv = getListView();

                lv.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                        String thumburl;
                        String bigurl;
                        String caturl;
                        String title;
                        String desc;
                        String artist;
                        Intent in;

                        title = ((TextView) view.findViewById(R.id.title))
                                .getText().toString();
                        artist = ((TextView) view.findViewById(R.id.artist))
                                .getText().toString();
                        desc = ((TextView) view.findViewById(R.id.desc))
                                .getText().toString();
                        thumburl = ((TextView) view
                                .findViewById(R.id.thumb_image)).getText()
                                .toString();
                        caturl = ((TextView) view.findViewById(R.id.cat))
                                .getText().toString();
                        bigurl = ((TextView) view.findViewById(R.id.big_image))
                                .getText().toString();

                        in = new Intent(getActivity(),
                                SingleImageViewActivity.class);

                        in.putExtra(KEY_TITLE, title);
                        in.putExtra(KEY_DESC, desc);
                        in.putExtra(KEY_CAT_URL, caturl);
                        in.putExtra(KEY_THUMB_URL, thumburl);
                        in.putExtra(KEY_BIG_URL, bigurl);
                        in.putExtra(KEY_CAT_ARTIST, artist);
                        startActivity(in);

                    }
                });
            }

        }
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mFragment = new BuyFragment();
        ft.add(android.R.id.content, mFragment);
        ft.attach(mFragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(mFragment);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }
} 
```

日志猫：

```
11-02 14:56:48.390: E/AndroidRuntime(13446): FATAL EXCEPTION: main
11-02 14:56:48.390: E/AndroidRuntime(13446): java.lang.NullPointerException
11-02 14:56:48.390: E/AndroidRuntime(13446):    at in.wptrafficanalyzer.actionbarsherlocknavtab.BuyFragment.onActivityCreated(BuyFragment.java:57)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:891)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at android.os.Handler.handleCallback(Handler.java:587)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at android.os.Looper.loop(Looper.java:130)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at android.app.ActivityThread.main(ActivityThread.java:3691)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at java.lang.reflect.Method.invokeNative(Native Method)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at java.lang.reflect.Method.invoke(Method.java:507)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
11-02 14:56:48.390: E/AndroidRuntime(13446):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:13:17.110

```
mAct.finish() 
```

上面的行导致了问题。这里`mAct`是`null`，你确定已经在某处被初始化并且在被调用`mAct`时还活着 。`mAct.finish()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:10:34.153

只写finish(); 或 ActivityName.finish(); 代码没问题，我已经看到了..你几乎完成了..如果出现问题，请回复我，我会写一些代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T07:16:16.953

使用`getActivity().finish()`而不是`mAct.finish()`. 在您的代码`mAct`中未初始化

# php - 验证表单并提交到同一页面

> ID：13190757
> 
> 赞同：0
> 
> 时间：2012-11-02T07:01:38.853
> 
> 标签：php, jquery, validation, form-submit

我试图让表单不提交到 send_email.php，而是留在同一页面上。另外，我希望错误显示在输入框下。（如果我了解如何保持页面不刷新，我想我可以犯错误）

我一直在阅读我应该使用 AJAX 的 stackoverflow，但我不知道如何开始。

形式：

```
<form name="contactform" method="post" action="send_email.php">
<table>
<tr>
    <td><label for="name">Name:</label></td>
    <td><input type="text" name="name" /></td>
    </tr>
    <tr>
    <td><label for="email">Email:</label></td>
    <td><input type="text" name="email" /></td>
    </tr>
    <tr>
    <td><label for="phone">Phone:</label></td>
    <td><input type="text" name="phone" /></td>
    </tr>
    <tr>
    <td>&nbsp;</td>
    <td><input class="button" type="submit" value="Submit" /></td>
    </tr>
    </table>
    </form> 
```

发送电子邮件.php：

```
<?php
if(isset($_POST['email'])) {

$email_to = "example@example.com";
$email_subject = "Form Subject";

function died($error) {
    echo $error."<br /><br />";
    die();
}

// validation expected data exists
if(!isset($_POST['name']) ||
    !isset($_POST['email']) ||
    !isset($_POST['phone']))
 {
    died('We are sorry, but there appears to be a problem with the form you submitted.');       
}

$first_name = $_POST['name']; // required
$email_from = $_POST['email']; // required
$telephone = $_POST['phone']; // required

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
if(!preg_match($email_exp,$email_from)) {
$error_message .= 'Enter a valid email.<br />';
}
$string_exp = "/^[A-Za-z .'-]+$/";
if(!preg_match($string_exp,$first_name)) {
$error_message .= 'Enter a valid name.<br />';
}
if(strlen($telephone) != NULL || strlen($telephone) != "") {
$error_message .= 'Enter valid phone.<br />';
}
if(strlen($error_message) > 0) {
died($error_message);
}
$email_message = "Form details below.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message .= "Name: ".clean_string($first_name)."\n";
$email_message .= "Email: ".clean_string($email_from)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<b>Thank you!</b>. 

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:04:21.127

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<SCRIPT TYPE="text/javascript">

$(document).ready(function(){

$("form").submit(function() {

var name = $('input[name="name"]').val();
var email = $('input[name="email"]').val();
var phone = $('input[name="phone"]').val();

$.post("send_email.php", { "name": name,"email": email,"phone": phone},
 function(data){

alert( data.response + data.email);

 }, "json");
return false;
});
});
</SCRIPT>
</head>
<body>
<form name="contactform" method="post" action="">
<table>
<tr>
    <td><label for="name">Name:</label></td>
    <td><input type="text" name="name" /></td>
    </tr>
    <tr>
    <td><label for="email">Email:</label></td>
    <td><input type="text" name="email" /></td>
    </tr>
    <tr>
    <td><label for="phone">Phone:</label></td>
    <td><input type="text" name="phone" /></td>
    </tr>
    <tr>
    <td>&nbsp;</td>
    <td><input class="button" type="submit" value="Submit" /></td>
    </tr>
    </table>
    </form>
</body>
</html> 
```

==================================================== =========================

**send_email.php 看起来像这样**

```
<?php

$email_to = $_POST['email'];
$email_subject = "Form Subject";

$first_name = $_POST['name']; // required
$email_from = "example@example.com"; // required
$telephone = $_POST['phone']; // required

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
if(!preg_match($email_exp,$email_from)) {
$error_message .= 'Enter a valid email.<br />';
}
$string_exp = "/^[A-Za-z .'-]+$/";
if(!preg_match($string_exp,$first_name)) {
$error_message .= 'Enter a valid name.<br />';
}
if(strlen($telephone) != NULL || strlen($telephone) != "") {
$error_message .= 'Enter valid phone.<br />';
}

$email_message = "Form details below.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message = "Name:" . $_POST['name'] . " Mail:".$_POST['email'] ." Phone:". $_POST['phone'];

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
if(@mail($email_to, $email_subject, $email_message, $headers))
{
echo '{ "response": "SENT", "email": "'.$_POST['email'].'"}'; 
}else{
echo '{ "response": "ERROR", "email": "'.$_POST['email'].'"}'; 
}

?> 
```

您可以使用 jquery 验证您的表单，我从您的 php 中删除了一些不必要的验证行，因此当您确定您的代码有效并且 mail_to 地址未指向表单邮件地址时，您可以稍后再次添加。

我检查了上面的代码，它可以工作。祝你好运。

注意：在我的服务器中 if(@mail($email_to, $email_subject, $email_message, $headers)) 总是返回 true，即使我使用空白作为电子邮件地址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:13:48.983

$.post('send_email.php', $('#theform').serialize()) //其中form是你要提交的表单的id..

您可以在以下链接中找到更多可用选项

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T07:20:26.220

你可以试试下面的代码。在这里，我们没有使用 ajax，而是使用会话。

**表单.php**

```
<?php
session_start();
?>

<form name="contactform" method="post" action="send_email.php">
    <table>
<tr>
    <td><label for="name">Name:</label></td>
    <td><input type="text" name="name" /></td>
    </tr>    
    <tr>
    <td colspan="2"><?php echo $_SESSION[lmsg_name]; ?></td>
    </tr>

<tr>
<td><label for="email">Email:</label></td>
<td><input type="text" name="email" /></td>
</tr>
 <tr>
<td colspan="2"><?php echo $_SESSION[lmsg_email]; ?></td>
</tr>

<tr>
<td><label for="phone">Phone:</label></td>
<td><input type="text" name="phone" /></td>
</tr>
 <tr>
<td colspan="2"><?php echo $_SESSION[lmsg_phone]; ?></td>
</tr>

<tr>
<td>&nbsp;</td>
<td><input class="button" type="submit" value="Submit" /></td>
</tr>
</table>
    </form>
<?php
 $_SESSION[lmsg_name] ='';
 $_SESSION[lmsg_email] ='';
 $_SESSION[lmsg_phone] =''; 
?> 
```

**发送电子邮件.php：**

```
<?php
session_start();

if(isset($_POST['email'])) {

$email_to = "example@example.com";
$email_subject = "Form Subject";

function died($error) {
    echo $error."<br /><br />";
    die();
}

// validation expected data exists
if(!isset($_POST['name']) ||
    !isset($_POST['email']) ||
    !isset($_POST['phone']))
 {
    died('We are sorry, but there appears to be a problem with the form you submitted.');       
}

$first_name = $_POST['name']; // required
$email_from = $_POST['email']; // required
$telephone = $_POST['phone']; // required

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
if(!preg_match($email_exp,$email_from)) {
$error_message = 'Enter a valid email.<br />';
$_SESSION[lmsg_email] = $error_message;
header("Location:form.php");
}
$string_exp = "/^[A-Za-z .'-]+$/";
if(!preg_match($string_exp,$first_name)) {
$error_message = 'Enter a valid name.<br />';
$_SESSION[lmsg_name] = $error_message;
header("Location:form.php");
}
if(strlen($telephone) != NULL || strlen($telephone) == "") {
$error_message = 'Enter valid phone.<br />';
$_SESSION[lmsg_phone] = $error_message;
header("Location:form.php");
}
if(strlen($error_message) > 0) {
died($error_message);
}
$email_message = "Form details below.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message .= "Name: ".clean_string($first_name)."\n";
$email_message .= "Email: ".clean_string($email_from)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<b>Thank you!</b>. 

<?php
}
?> 
```

# python - Django：来自身份验证用户的用户名不区分大小写匹配？

> ID：13190758
> 
> 赞同：20
> 
> 时间：2012-11-02T07:01:53.077
> 
> 标签：python, django, operator-overloading

默认情况下，Django 将用户名实现为区分大小写，现在为了进行身份验证，我编写了自己的`Authentication Backend`来处理身份验证时不区分大小写的用户名。

如图： http: [//blog.shopfiber.com/ ?p=220](http://blog.shopfiber.com/?p=220)

现在，问题是：

我有各种观点和实用方法，与`username`一些刺痛相比。

IE

```
request.user.username == username_from_some_other_system_as_str 
```

现在，如果用户名是`yugal`那么：

```
request.user.username == 'Yugal' # Returns False 
```

现在，它应该返回`True`[我想要实现的目标]

为此，我记得从`C++`几天开始，`Operator Overloading`。但我认为简单地为 django 这样做并不是`auth user`一个好主意，因为`auth user`它与`django`. 此外，重载`==`将使整个类不区分大小写，而不仅仅是`username`字段。

所以，即使在整个比较时，我应该如何处理这种`username`不区分大小写的问题。

**笔记：**

*   创建一个`get_username`总是返回小写用户名的方法是不可能的，因为它需要重构所有代码才能使用它。您可以一次性为您的代码执行此操作，但如果您使用的是 3rd 方 django 应用程序，则不可能。

*   我知道这`user.username.lower() = something.lower()`是可能的，但容易出错，而不是多开发人员设置中经常使用的东西的编写解决方案。

*   我用过`SomeModel.objects.filter(username__iexact=username)`，只要有可能。但这仍然使系统容易受到任何不知情的开发人员的错误影响。

=======================================

**从概念上想出解决方案，但无法使其工作（帮助）：**

```
####### Custom CharField for username case-insensitivity #######
from django.db.models.fields import CharField
class iUnicode:
    def __init__(self, value):
        self.value = value

    def __eq__(self, other):
        if isinstance(other, str) or isinstance(other, unicode):
            return self.value.lower() == other.lower()
        if isinstance(other, self.__class__):
            return other == self.value

    def __unicode__(self):
        return unicode(self.value)
    def __str__(self):
        return self.__unicode__()

class UsernameCharField(CharField):
    def to_python(self, value):  # Its not getting called
        unicode_val = super(CharField, self).to_python(value)
        return iUnicode(unicode_val)

if User._meta.local_fields[1].name == 'username':
    User._meta.local_fields[1] = UsernameCharField(max_length=30)
    User._meta.local_fields[1].model = User
################################################################ 
```

我假设`to_python`用于将从数据库接收到的值转换为`unicode`python 中的值。但是，我想我`to_python`的没有被调用。

> 这也将确保第 3 方应用程序不区分大小写，并且不需要任何重构。它将修补`User`其核心。我将把这个添加到`__init__.py`我的第一个`INSTALLED_APP`

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-10-31T20:29:34.770

从 Django 1.5 开始，使用户名不区分大小写很简单：

```
class MyUserManager(BaseUserManager):
    def get_by_natural_key(self, username):
        return self.get(username__iexact=username) 
```

来源[：](https://code.djangoproject.com/ticket/2273#comment:12)[1、2](https://djangosnippets.org/snippets/1368/) _

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-22T14:03:42.813

我在注册和登录过程中修改了几行似乎对我有用的行。使用我的解决方案，用户名仍将显示为用户在注册时编写的用户名，但它不允许其他人使用以不同方式编写的相同用户名。它还允许用户登录而不必担心编写区分大小写的用户名。

我修改了注册表以搜索不区分大小写的用户名。

这是我验证用户名的行，它使用此用户名搜索用户。

```
User._default_manager.get(username__iexact=username) 
```

然后我需要允许用户使用不区分大小写的用户名登录。

从我的登录视图：

```
username = request.POST['username']
password = request.POST['password']
caseSensitiveUsername = username
try:
  findUser = User._default_manager.get(username__iexact=username)
except User.DoesNotExist:
  findUser = None
if findUser is not None:
  caseSensitiveUsername = findUser.get_username
user = auth.authenticate(username=caseSensitiveUsername, password=password) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-03T09:21:56.137

**终于明白了：**

经过如此多的实验和对模型的最小影响`User`，终于实现了。[感谢**@freakish 先生**的不同想法]

**这里是 ：**

```
############ username case-insensitivity ############
class iunicode(unicode):
    def __init__(self, value):
        super(iunicode, self).__init__(value)
        self.value = value

    def __eq__(self, other):
        if isinstance(other, str) or isinstance(other, unicode):
            return self.value.lower() == other.lower()
        if isinstance(other, self.__class__):
            return other == self.value

def custom_getattribute(self, name):
    val = object.__getattribute__(self, name)
    if name == "username":
        val = iunicode(val)
    return val

def auth_user_save(self, *args, **kwargs): # Ensures lowercase usernames
    username = self.username
    if username and type(username) in [unicode, str, iunicode]:
        self.username = username.lower()   # Only lower case allowed
    super(User, self).save(*args, **kwargs)

User.__getattribute__ = custom_getattribute
User.save = MethodType(auth_user_save, None, User)
##################################################### 
```

我测试了它，它按预期工作。:D

所以，这里是**测试用例**：

```
from django.test.testcases import TestCase

def create_user(data='testuser'):
    email = '%s@%s.com' % (data, data)
    user = G(User, username=data, email=email, is_active=True)
    user.set_password(data)
    user.save()
    return user

class UsernameCaseInsensitiveTests(TestCase):

    def test_user_create(self):
        testuser = 'testuser'
        user = create_user(testuser)
        # Lowercase
        self.assertEqual(testuser, user.username)
        # Uppercase
        user.username = testuser.upper()
        user.save()
        self.assertEqual(testuser, user.username)

def test_username_eq(self):
    testuser = 'testuser'
    user = create_user(testuser)
    self.assertTrue(isinstance(user.username, iunicode))
    self.assertEqual(user.username, testuser)
    self.assertEqual(user.username, testuser.upper())
    self.assertTrue(user.username == testuser.upper())
    self.assertTrue(testuser.upper() == user.username)
    self.assertTrue(user.username == iunicode(testuser.upper())) 
```

数据库的隐式不区分大小写查询

```
###################### QuerySet #############################
def _filter_or_exclude(self, negate, *args, **kwargs):
    if 'username' in kwargs:
        kwargs['username__iexact'] = kwargs['username']
        del kwargs['username']
    if args or kwargs:
        assert self.query.can_filter(),\
        "Cannot filter a query once a slice has been taken."
    from django.db.models import Q
    clone = self._clone()
    if negate:
        clone.query.add_q(~Q(*args, **kwargs))
    else:
        clone.query.add_q(Q(*args, **kwargs))
    return clone

from django.db.models.query import QuerySet
QuerySet._filter_or_exclude = _filter_or_exclude
############################################################# 
```

这将允许`User.objects.get(username='yugal')`并`User.objects.get(username='YUGAl')`产生相同的用户。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-02T13:59:26.347

使用不区分大小写的用户名的最简单方法是从默认`ModelBackend`和覆盖`authenticate`方法继承。

请注意，在`except`我们正在执行的块内`UserModel().set_password(password)`，这样做会减少哈希器的工作时间。[修复了错误报告](https://code.djangoproject.com/ticket/20760)

```
from django.contrib.auth.backends import ModelBackend
from django.contrib.auth import get_user_model

from users.models import User

class CaseInsensitiveModelBackend(ModelBackend):
    def authenticate(self, username=None, password=None, **kwargs):
        UserModel = get_user_model()
        if username is None:
            username = kwargs.get(UserModel.USERNAME_FIELD)
        try:
            d = {'%s__iexact'%UserModel.USERNAME_FIELD: username}
            user = UserModel.objects.get(**d)
            if user.check_password(password):
                return user
        except UserModel.DoesNotExist:
            # Run the default password hasher once to reduce the timing
            # difference between an existing and a non-existing user (#20760).
            UserModel().set_password(password)

        return None 
```

并将此后端添加到`AUTHENTICATION_BACKENDS`settings.py

```
AUTHENTICATION_BACKENDS = (
    'sdcpy.backends.CaseInsensitiveModelBackend', # inherits from 'django.contrib.auth.backends.ModelBackend'
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T15:55:06.630

这个猴子补丁看起来是个坏主意。将来你肯定会遇到一些问题（Django 在幕后做了很多事情）。我强烈建议重新设计您的应用程序。

但是，您可以尝试以下方法（使用您的`iUnicode`课程）：

```
def new_getattribute( self, name ):
    val = object.__getattribute__( self, name )
    if name == "username":
        val = iUnicode( val )
    return val

User.__getattribute__ = new_getattr 
```

现在，我不是 100% 认为这会起作用，而且它有点 hacky，所以请谨慎使用。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-11T02:39:38.927

有一种相对干净的方法可以做到这一点：

```
# Case-insensitive django authentication, modified from
# http://justcramer.com/2008/08/23/logging-in-with-email-addresses-in-django/
# See also https://github.com/dabapps/django-email-as-username
# And https://docs.djangoproject.com/en/dev/topics/auth/customizing/#auth-custom-user
from django.contrib.auth.models     import User

class EmailOrUsernameModelBackend(object):
    def authenticate(self, username=None, password=None):
        username = username.lower()     # Force all usernames & email to all lower case
        if '@' in username:
            kwargs = {'email': username}
        else:
            kwargs = {'username': username}
        try:
            user = User.objects.get(**kwargs)
            if user.check_password(password):
                return user
        except User.DoesNotExist:
            return None

    def get_user(self, user_id):
        try:
            return User.objects.get(pk=user_id)
        except User.DoesNotExist:
            return None

def my_password_reset(request, **kwargs):
    # Override django.contrib.auth.views.password_reset not needed because django does
    # SELECT FROM "auth_user" WHERE UPPER("auth_user"."email"::text) = UPPER(E'xxx@emaple.com')
    # But note you may want to manually create an UPPER index in the database for speed.
    return password_reset(request, **kwargs) 
```

然后设置

```
AUTHENTICATION_BACKENDS = (
    'obviously.backends.EmailOrUsernameModelBackend',
    'django.contrib.auth.backends.ModelBackend',
) 
```

您还必须在注册工作流程中强制用户名小写

这一切正常，但不保留用户给出的大小写，在数据库中查找也没有效率。默认的 django 行为是设计使然，请参阅[https://code.djangoproject.com/ticket/2273](https://code.djangoproject.com/ticket/2273)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-19T10:22:45.537

使用`UserManager`是实现不区分大小写用户名的最简单方法之一，而不会弄乱其他东西。

示例代码（Models.py）：

```
from django.contrib.auth.models import AbstractUser, UserManager

class CustomUserManager(UserManager):
    def get_by_natural_key(self, username):
        case_insensitive_username_field = '{}__iexact'.format(self.model.USERNAME_FIELD)
        return self.get(**{case_insensitive_username_field: username})

class CustomUser(AbstractUser):
    objects = CustomUserManager() 
```

你很高兴去！[来源](https://simpleisbetterthancomplex.com/tutorial/2017/02/06/how-to-implement-case-insensitive-username.html)

# lambda - Lambda 表达式 - 使用 EntityFramework Include() 和任何操作？

> ID：13190760
> 
> 赞同：0
> 
> 时间：2012-11-02T07:01:58.177
> 
> 标签：lambda, entity-framework-5

以下代码正在运行

```
var queryResults = _db.Projects
           .Include("Participants.Person")
           .Where(Project => Project.Participants.Any(Parti => Parti.Person.FirstName == "test3")); 
```

我正在动态构建 lambda 表达式。为了实现上述目标，我必须编写大量代码。

我想实现以下目标。

```
var queryResults = _db.Projects
           .Include("Participants.Person")
           .Where(Project => Project.Participants.Person.FirstName == "test3")); 
```

任何建议请分享。

**编辑后的部分**

我正在尝试任何操作。但是我在这条线上遇到了例外。有什么建议么？

MemberExpression propertyOuter = Expression.Property(c, "Participant");

```
ParameterExpression tpe = Expression.Parameter(typeof(Participant), "Participant");
Expression left1 = Expression.Property(tpe, typeof(Participant).GetProperty("Person"));
Expression left2 = Expression.Property(left1, typeof(Person).GetProperty("FirstName"));
Expression right1 = Expression.Constant(filter.FieldValue);
Expression InnerLambda = Expression.Equal(left2, right1);
Expression<Func<Participant, bool>> innerFunction = Expression.Lambda<Func<Participant, bool>>(InnerLambda, tpe);

MethodInfo method = typeof(Enumerable).GetMethods().Where(m => m.Name == "Any" && m.GetParameters().Length == 2).Single().MakeGenericMethod(typeof(Participant));

MemberExpression propertyOuter = Expression.Property(c, "Participant");

var anyExpression = Expression.Call(method, propertyOuter, innerFunction); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:51:36.410

也许这对你有用。

```
var queryResults = _db.Persons
   .Where( p => p.FirstName == "test3")
   .SelectMany(p => p.Participant.Projects)
   .Include("Participants.Person"); 
```

**编辑**：或者如果一个人有很多参与者

```
var queryResults = _db.Persons
   .Where( p => p.FirstName == "test3")
   .SelectMany(p => p.Participants.SelectMany(par => par.Projects))
   .Include("Participants.Person"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:54:08.197

我得到了解决方案，它的工作。

**Lambda 表达式**

```
var queryResults = _db.Projects
       .Include("Participants.Person")
       .Where(Project => Project.Participants.Any(Participant => Participant.Person.FirstName == "test3")); 
```

**构建动态 lambda 表达式的源代码**

```
 ParameterExpression c = Expression.Parameter(typeof(T), entityType.Name);
 ParameterExpression tpe = Expression.Parameter(typeof(Participant), "Participant");
 Expression left1 = Expression.Property(tpe, typeof(Participant).GetProperty("Person"));
 Expression left2 = Expression.Property(left1, typeof(Person).GetProperty("FirstName"));
 Expression right1 = Expression.Constant(filter.FieldValue);
 Expression InnerLambda = Expression.Equal(left2, right1);
 Expression<Func<Participant, bool>> innerFunction = Expression.Lambda<Func<Participant, bool>>(InnerLambda, tpe);

 MethodInfo method = typeof(Enumerable).GetMethods().Where(m => m.Name == "Any" && m.GetParameters().Length == 2).Single().MakeGenericMethod(typeof(Participant));

 var outer = Expression.Property(c, typeof(Project).GetProperty("Participants"));

 var anyExpression = Expression.Call(method, outer, innerFunction); 
```

这帮助很大。[构建动态表达式树以过滤集合属性](https://stackoverflow.com/questions/8977895/building-a-dynamic-expression-tree-to-filter-on-a-collection-property)

# c# - 如何遍历这个对象

> ID：13190763
> 
> 赞同：0
> 
> 时间：2012-11-02T07:02:17.087
> 
> 标签：c#, asp.net, .net, asp.net-1.1

我从 Web 服务调用中获取对象，并通过序列化对象将其存储在隐藏字段中。然后我对对象进行反序列化，它就像下面的屏幕截图一样：

![在此处输入图像描述](../Images/59ce2528c10c6b6a53a9649232b4bf9a.png)

我的问题是当我尝试通过多种方式访问​​以下信息时，出现 ***Invalid cast error*** OR ***System.InvalidCastException: Specified cast is not valid***

```
decodedValues[0][2].Value
decodedValues[1][2].Value
decodedValues[2][2].Value 
```

- ETC

知道如何在**ASP.NET 1.1**中获得它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:07:40.750

一个简单的方法可以解决问题：

```
public string[] GetValues(object[] decodedValues)
{
    string[] returnValues = new string[decodedValues.Length];

    for(int i=0; i<decodedValues.Length; i++)
    {
        returnValues[i] = ((XmlAttribute[])decodedValues[i])[2].Value;
    }

    return returnValues;
} 
```

但请记住：如果您的屏幕截图中的类型不匹配，您将得到您的`InvalidCastException`.. 因此检查类型是否匹配还有一些改进的余地。

# java - 使用什么技术来访问 Jira 3.13.2？

> ID：13190773
> 
> 赞同：2
> 
> 时间：2012-11-02T07:03:01.033
> 
> 标签：java, jira, jira-rest-java-api

我打算使用 Jira Rest Java Client 以编程方式从 Java 访问 Jira。这使用了仅受 Jira 5.0 及更高版本支持的 Jira REST API。

但我有 Jira 3.13.2 版本，我想以编程方式与它交互。在他们的网站上，他们列出了各种技术，如 REST、XML-RPC、SOAP 等。

但我不知道我的工作要用什么。

谁能指出我应该使用的正确技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:26:27.597

我个人更喜欢使用 REST，但这取决于您正在开发什么类型的应用程序来访问它，以及在您的情况下不适用。但我想谈谈一些缺点。

例如，您可能有一些业务需求要求您使用 SOAP（呃：D）。应谨慎选择用于访问的内容，因为例如 SOAP API 现在已被弃用 - 在`JIRA > 5.x`. 因此，如果您正在开发一些必须访问比您所说的版本更新的版本的东西，那么最好使用 REST api。它安全且易于使用。您还可以有两种访问方法——毕竟这些只是远程应用程序的接口，数据是相同的（不是表示），如果我没记错的话，JAVA 具有 jboss 的核心 SOAP 功能。@mdoar 的建议会让你上路。根据要求，您还可以将应用程序开发为 JIRA 插件，从而可以直接访问 JIRA。我目前正在开发一个通过 REST 访问 JIRA 并处理数据以进行管理的外部应用程序，但这是使用最新的 JIRA 版本和 PHP 中的 REST。

可以在[这里](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+APIs)找到对 REST API 的简要介绍，完整的 REST API 文档在[这里](http://docs.atlassian.com/jira/REST/latest/)（这是最新版本）。使用 REST API 就像发出 GET、POST、PUT 和 DELETE 请求一样简单。

希望这会有所帮助，但我想我有点走神了。

# ajax - MVC3 Ajax.BeginForm 不显示 ValidationMessage

> ID：13190778
> 
> 赞同：1
> 
> 时间：2012-11-02T07:03:36.880
> 
> 标签：ajax, asp.net-mvc-3, validation

我正在使用 MVC3 + Razor。现在我有一个包含 Ajax.BeginForm(...) 的表单。我完全按照“Maxim”在这篇文章中所说的话：

[带有 HTML.ValidationMessageFor 的 ASP.NET MVC AJAX](https://stackoverflow.com/questions/3388700/asp-net-mvc-ajax-with-html-validationmessagefor)

我的验证规则定义如下：

```
ModelState.AddModelError("ControlName", "error message"); 
```

然而我的

```
@Html.ValidationMessageFor(model => Model.OneProperty[0].AnotherProperty) 
```

什么都没给我。

我还将这些代码也放入“错误摘要”的部分视图中。我可以看到代码通过“ValidationSummary”PV 运行，但它只是不显示。

```
 if (!ViewData.ModelState.IsValid)
 {
    <div id="errorMessage" class="notificationArea">
             @Html.Partial("ValidationSummary")
    </div>
  } 
```

* * *

简而言之，我的主要观点是：

```
@using (Ajax.BeginForm("SaveFromMainView", null, new AjaxOptions
{
    HttpMethod = "POST",
    UpdateTargetId = "myForm"   
}, 
    new { id = "myForm" }))
{           

    @Html.Partial("SamTest1")
} 
```

在这个“SamTest1”部分视图中，还有另一个“ValidationSummary”部分视图来显示错误消息的项目符号。

我的行动方法最后：

```
return PartialView("SamTest1"); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:27:50.723

我得到它的工作。实际上是由于模型绑定不正确。我有一个模型对象列表，并且尽管像 ControlFor(model => Model[0].PropertyName) ... 这样的东西可以工作。其实不是。

将其更改为普通模型绑定后，现在显示验证消息。

再次感谢大家！

# android - 将应用程序从 Android 迁移到 iPhone

> ID：13190780
> 
> 赞同：0
> 
> 时间：2012-11-02T07:03:48.270
> 
> 标签：android, iphone, ios

我在 Android 中部署了一个应用程序，我也希望为 iOS 创建相同的应用程序。是否可以使用 Phonegap 之类的工具进行迁移。（Phonegap 不支持 Java。）这也将帮助我将我的应用程序部署到 iOS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:06:12.563

如果你是用java开发的，我们不会直接把它转成ios。必须使用 sdk 开发应用程序，例如 Titanium、flex 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:07:25.867

不，你不能。Phonegap 将只支持 HTML、CSS 和 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T07:10:20.783

如果您想将 android 迁移到 iPhone，则没有任何选项可以直接将 android 的本机应用程序迁移到 iPhone，因为您需要在跨平台上开发应用程序，以便您可以创建 iPhone 的构建。

# string - 口齿不清的比较

> ID：13190783
> 
> 赞同：1
> 
> 时间：2012-11-02T07:03:52.113
> 
> 标签：string, comparison, lisp, int

我正在尝试在这样的函数中进行比较：

```
(defun omember (x l)
  (cond
    ((null l) nil)
    ((eq (car l) x) t)
    ((string< (car l) x) (omember (x (cdr l))))
    (t nil))) 
```

它只是遍历列表并在列表 l 的元素中搜索 x。这个想法是因为传递的列表是排序的，你不需要在所有列表中搜索一个值。只要你的值大于你可以返回 nil 的元素。但是“小于”功能不起作用。我为字符串和整数尝试了“string<”和“<”。另外，我想知道是否有一种机制可以将列表中的整数作为字符串并在字符串中进行比较，因为传入的列表可以是整数或字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:32:59.523

如果您希望它以一般方式工作，您应该将比较函数作为参数传递：

```
(defun member-of-sorted (item list
                         &key (test #'=) (end-test #'<) (key #'identity))
  (loop :for tail :on list
        :for element := (funcall key (first tail))
        :until (funcall end-test item element)
        :when (funcall test item element)
        :do (return-from member-of-sorted tail))
  nil) 
```

我试图使它尽可能与标准相似`member`。如果您不想在数字上而是在其他事物上使用它，请传递适当的`:test`和`:end-test`参数。如果您在同一个使用地点有不同的类型，您可以围绕它包装一个类型表格。

*编辑：*我应该添加使用示例：

```
(member-of-sorted 3 '(1 2 3 4 5 6))
=> (3 4 5 6)

(member-of-sorted 3/2 '(1 2 3 4 5 6))
=> NIL

(member-of-sorted "foo" '("bar" "baz" "foo" "quux")
                  :test #'string=
                  :end-test #'string<)
=> ("foo" "quux")

(member-of-sorted #\D '(#\A #\C #\E #\S)
                  :test #'char=
                  :end-test #'char<)
=> NIL

(member-of-sorted #\D '(#\A #\C #\D #\E #\S)
                  :test #'char=
                  :end-test #'char<)
=> (#\D #\E #\S) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:14:54.447

你可以使用[apply](http://www.lispworks.com/documentation/HyperSpec/Body/f_apply.htm#apply)将函数对象应用于参数列表：

```
((apply *lessthan* (list (car l) x)) (do something)) 
```

或者[funcall](http://www.lispworks.com/documentation/HyperSpec/Body/f_funcal.htm#funcall)，正如 wvxvw 指出的那样，它不需要构建额外的列表：

```
((funcall *lessthan* (car l) x) (do something)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T21:03:22.983

递归 omember 周围的括号使用错误。

```
(defun omember(x l)
  (cond
    ((null l) nil)
    ((= (car l) x) t)
    ((< (car l) x) (omember x (cdr l)))
    (t nil)
    )
  ) 
```

将使这项工作适用于整数列表

```
(defun omember(x l)
      (cond
        ((null l) nil)
        ((string= (car l) x) t)
        ((string< (car l) x) (omember x (cdr l)))
        (t nil)
        )
      ) 
```

将使其适用于字符串列表

但似乎没有办法让它同时适用于字符串列表和整数列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:17:31.907

在代码中使用以下内容来区分类型：

```
[15]> (typep 7 'integer)
T
[16]> (typep "17" 'string)
T 
```

# vbscript - 在不使用 WMI 类“Win32_OperatingSystem”的情况下获取 Windows 版本的方法

> ID：13190784
> 
> 赞同：0
> 
> 时间：2012-11-02T07:03:52.150
> 
> 标签：vbscript, wmi

我希望在不使用 VBScript的 WMI 类**Win32_OperatingSystem**的情况下获得 Windows 版本（比如操作系统） 。有办法吗？

我希望这样做的原因是因为我在不支持 WMI 的 NT 机器上运行 VB 脚本，并且我无法为 NT 4.0 找到可安装的 WMI。如果我**不依赖**WMI 并且更喜欢使用 VBScript 获得没有 WMI 的 Windows 版本，那也很好。

请帮忙 ！！

谢谢，

纳扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:25:51.320

假设不可能离开 NT4 并且启用了 RPC，您可以从注册表中[获取它：](https://superuser.com/a/267474)

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\\BuildLab 
```

`%systemroot%\windows\system32\prodspec.ini` [有](http://forum.sysinternals.com/exact-windows-version-in-registry-key_topic1902.html)部分中的信息`[Product Specification]`，后跟“ `Product=`”，等号后面是操作系统版本的名称。如果您需要 VBScript 代码来提取此信息，请添加注释说明，我将添加它。

如果 RPC 可用，PSEXEC 也是一种选择。

此外，如果您有活动目录，那么信息也在那里，但如果您的重新映像过程有“问题”，它可能不具有权威性。如果您需要 VBS 代码从 AD 中提取它，请在此请求中发表评论，我会添加它。

不过，不言而喻，您应该离开 NT4。多年没有补丁。如果不可能，则考虑虚拟化系统并将其置于配置良好的防火墙（如 ISA 或 Outpost Agnitum）之后，以阻止所有主机的所有协议和端口，除非必要功能明确需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:50:24.283

您可以从`ver`命令中获取版本：

```
Set sh = CreateObject("WScript.Shell")
Set ver = sh.Exec("%COMSPEC% /c ver")
Do While ver.Status = 0
  WScript.Sleep 100
Loop
version = ver.StdOut.ReadAll 
```

# java - Oracle GRCC Tcg 数据类型问题

> ID：13190786
> 
> 赞同：2
> 
> 时间：2012-11-02T07:04:13.040
> 
> 标签：java, tomcat, oracle-apps, oracleapplications, oracle-application-server

我正在使用 oracle GRCC Tcg 应用程序版本 8.6.4。我已经在这个 Tcg 应用程序上成功创建了业务对象。之后，我使用该业务对象创建了一个模型。在我尝试保存模型时，出现以下异常。

请帮我清除异常。

```
ModelServiceImpl:1262 Validating Model Query ...Supplier Test
2012-10-29 15:34:21,843 ERROR [http-8080-3] ModelAdapter:1485 Value 100.0 is of the data type class java.lang.Double, but should be of data type [DataType: java.lang.Integer Size: 4]
java.lang.IllegalArgumentException: Value 100.0 is of the data type class java.lang.Double, but should be of data type [DataType: java.lang.Integer Size: 4]
        at oracle.apps.grc.common.filter.argument.LiteralArgument.setValue(LiteralArgument.java:152)
        at oracle.apps.grc.ui.widget.server.grccmodel.adapters.ModelAdapter.createBinaryFilter(ModelAdapter.java:2654)
        at oracle.apps.grc.ui.widget.server.grccmodel.adapters.ModelAdapter.toAbstractFilter(ModelAdapter.java:2524)
        at oracle.apps.grc.ui.widget.server.grccmodel.adapters.ModelAdapter.traverseTree(ModelAdapter.java:1639)
        at oracle.apps.grc.ui.widget.server.grccmodel.adapters.ModelAdapter.populateModelQuery(ModelAdapter.java:1479)
        at oracle.apps.grc.ui.widget.server.grccmodel.adapters.ModelAdapter.populateModelQuery(ModelAdapter.java:1438)
        at oracle.apps.grc.ui.workbench.server.ModelServiceImpl.validateModelQuery(ModelServiceImpl.java:1295)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:562)
        at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:188)
        at oracle.apps.grc.ui.common.server.context.AACGRemoteServiceServlet.processCall(AACGRemoteServiceServlet.java:69)
        at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:224)
        at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at oracle.apps.grc.ui.webapp.servlet.ApplicationResourceRequestFilter.doFilter(ApplicationResourceRequestFilter.java:312)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662)
2012-10-29 15:34:21,994 DEBUG [http-8080-3] ModelServiceImpl:465 ModelServiceImpl.saveModel(ModelPOJO pModel) : Entering Save Model
2012-10-29 15:34:22,029 ERROR [http-8080-3] ModelAdapter:1485 Value 100.0 is of the data type class java.lang.Double, but should be of data type [DataType: java.lang.Integer Size: 4]
java.lang.IllegalArgumentException: Value 100.0 is of the data type class java.lang.Double, but should be of data type [DataType: java.lang.Integer Size: 4]
        at oracle.apps.grc.common.filter.argument.LiteralArgument.setValue(LiteralArgument.java:152)
        at oracle.apps.grc.ui.widget.server.grccmodel.adapters.ModelAdapter.createBinaryFilter(ModelAdapter.java:2654)
        at oracle.apps.grc.ui.widget.server.grccmodel.adapters.ModelAdapter.toAbstractFilter(ModelAdapter.java:2524)
        at oracle.apps.grc.ui.widget.server.grccmodel.adapters.ModelAdapter.traverseTree(ModelAdapter.java:1639)
        at oracle.apps.grc.ui.widget.server.grccmodel.adapters.ModelAdapter.populateModelQuery(ModelAdapter.java:1479)
        at oracle.apps.grc.ui.widget.server.grccmodel.adapters.ModelAdapter.populateModelQuery(ModelAdapter.java:1438)
        at oracle.apps.grc.ui.widget.server.grccmodel.adapters.ModelAdapter.domainModelForDS(ModelAdapter.java:1075)
        at oracle.apps.grc.ui.workbench.server.ModelServiceImpl.saveModel(ModelServiceImpl.java:494)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:562)
        at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:188)
        at oracle.apps.grc.ui.common.server.context.AACGRemoteServiceServlet.processCall(AACGRemoteServiceServlet.java:69)
        at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:224)
        at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at oracle.apps.grc.ui.webapp.servlet.ApplicationResourceRequestFilter.doFilter(ApplicationResourceRequestFilter.java:312)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662)

Thank you in advance.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:11:33.540

上述问题将解决。它只是一个tomcat错误。我刚刚重新启动了我的tomcat服务器，异常将消失..

# validation - Struts2如何在验证器表达式中将字符串解析为int

> ID：13190787
> 
> 赞同：0
> 
> 时间：2012-11-02T07:04:16.197
> 
> 标签：validation, struts2, expression

对不起，我已经研究了几个小时的例子，但我还没有找到。我想使用这个公式在我的页面中添加一个验证规则：

```
if((WorkedHours - RestHours) >= 6 && RestHours == 0.75) //returns error 2708
if((WorkedHours - RestHours) >= 8 && RestHours == 1)    //returns error 2709 
```

我已经在我的 xxx-validation.xml 中创建了类似的东西：

```
<validator type="expression">
    <param name="expression"><![CDATA[((((workRequest.WorkStartHour + (workRequest.WorkStartMin/60)) + (workRequest.WorkEndHour + (workRequest.WorkEndMin/60))) - 
                              ((workRequest.RestStartHour + (workRequest.RestStartMin/60)) + (workRequest.RestEndHour + (workRequest.RestEndMin/60)))) >= 6 && 
                              ((workRequest.RestStartHour + (workRequest.RestStartMin/60)) + (workRequest.RestEndHour + (workRequest.RestEndMin/60))) == 0.75)]]>
    </param>
    <message key="ERR2708"/>
</validator> 
```

但是“变量”（例如 workRequest.WorkStartHours 等）在我的数据传输对象 (DTO) 文件中属于字符串类型，我无法执行“+”、“-”、“/”、“>=”、如果它们不是整数类型，则“==”操作正确。

任何帮助和建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:45:03.373

如果您必须在验证中进行复杂的操作，您可以`validate`在您的操作中使用方法。

```
public class MyAction extends ActionSupport {
    ...

    public void validate() {
        if ( /* Your condition */) {
            addFieldError("userName", getText ( /* yourKey */);
        } 
    }

} 
```

`validate`关于方法的官方文档：http: [//struts.apache.org/2.3.4/docs/form-validation.html](http://struts.apache.org/2.3.4/docs/form-validation.html)

# javascript - 对大量数据进行分页的正确方法

> ID：13190792
> 
> 赞同：1
> 
> 时间：2012-11-02T07:04:40.460
> 
> 标签：javascript, ruby-on-rails, pagination

我正在使用 Rails 3 开发一个需要对大量数据进行分页的项目。对大量数据（例如论坛帖子）进行分页以最大化性能的正确方法是什么？如果我只从一个集合中获取 10 个模型并在转到下一页时再次获取，那么服务器的工作量是否会太大？还是只加载所有内容并使用 javascript 对它们进行分页会更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T07:11:39.670

假设您正在寻找 SQL 解决方案：

拉出 10 个对象对于服务器负载来说不是问题。问题是您使用什么查询来过滤它们。如果您使用简单的主键来过滤它们或其他一些有效的标识符，它应该是完全可以的。如果您只是想逐页列出页面（每页有 10 个项目），我看不出有问题。只需确保您获取所需的列（即避免选择不必要的列）。

您可以使用`will_paginate`或`kaminari`进行分页。无论您的集合大小如何，它们都只会获取您需要的记录（您希望在每页上提取的对象数量）。

[上成](https://github.com/amatsuda/kaminari)

基于 Scope & Engine 的、干净、强大、可定制和复杂的 Rails 3 分页器

[will_paginate](https://github.com/mislav/will_paginate)

Rails 3、Sinatra、Merb、DataMapper 等的分页库

# asp.net - 在 asp.net 中打印报告

> ID：13190795
> 
> 赞同：1
> 
> 时间：2012-11-02T07:05:15.243
> 
> 标签：asp.net, css

您好，我创建了一个购买报告，其中我使用了网格，但是如果行数较少，即一两行的情况下，我必须添加默认行而不绑定数据列，以便网格看起来更好，并且当我打印报告时，我不想显示此打印按钮和窗口的 url![在此处输入图像描述](../Images/a9d11b9df0daafbbdc67e54656e5db7c.png)

我必须展示这样的东西

![在此处输入图像描述](../Images/fd304e2ff466222570e4e51a0638c2c7.png)

这是我的 aspx 代码

```
<table style="width:100%;">
        <tr>
          <td class="style1">
            <div class="cmpnylogo">
            <!--<img id="imglogo" runat="server"/>-->
                <table style="width:100%;">
                    <tr>
                        <td class="style69">
                            &nbsp;</td>
                                <td>
                                <div>

                                    <table style="width:100%;">
                                        <tr>
                                            <td class="style61">
                                    <asp:Label ID="Label20" runat="server" Text="Office"></asp:Label>
                                            </td>
                                            <td>
                                    <asp:Label ID="lbloffice" runat="server" Text="Label"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="style61">
                                    <asp:Label ID="Label21" runat="server" Text="Works"></asp:Label>
                                            </td>
                                            <td>
                                    <asp:Label ID="lblworks" runat="server" Text="Label"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="style61">
                                    <asp:Label ID="Label22" runat="server" Text="Phone"></asp:Label>
                                            </td>
                                            <td>
                                    <asp:Label ID="lblphone" runat="server" Text="Label"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="style61">
                                    <asp:Label ID="lblemail" runat="server" Text="Email"></asp:Label>
                                            </td>
                                            <td>
                                    <asp:Label ID="lblmail" runat="server" Text="Label"></asp:Label>
                                            </td>
                                        </tr>
                                    </table>

                                </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="style58" colspan="2">
                                <hr />
                                </td>
                            </tr>
                        </table>
            </div>
          </td>

        </tr>
        <tr>
            <td align="center" class="style1">
                <div class="dvtitle">
                <div class="title">Purchase Order</div>

                </div>
             </td>
        </tr>
        <tr>
            <td align="center" class="style1">
                <table style="width:100%;border-left-style:none;border-right-style:none;" border="1px">
                    <tr>
                        <td class="style64" valign="top">
                            <table style="width:100%;">
                                <tr>
                                    <td class="style70">
                                        <div class="dvitems">
                                            Kind attn:-
                                        </div>
                                    </td>
                                    <td align="left">
                                  <asp:Label ID="lblattn" runat="server" Text="Label"></asp:Label>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="style70">
                                        &nbsp;</td>
                                    <td>
                                        &nbsp;</td>
                                </tr>
                                <tr>
                                    <td class="style70">
                                        &nbsp;</td>
                                    <td align="left">
                                        <asp:Label ID="lblpartyadd" runat="server" Text="Label"></asp:Label>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td class="style63" valign="top">
                            <table style="width:117%; height: 126px;">
                                <tr>
                                    <td class="style68">
                           <div class="dvpo">Consignee
                           </div>
                                        </td>
                                        <td align="left">
                           <asp:Label ID="lblconsignee" runat="server"> 
                           </asp:Label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="style68">
                                            <div>
                                                Name</div>
                                        </td>
                                        <td align="left">
                                        <asp:Label ID="lblconname" runat="server" Text="Label"></asp:Label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="style68">
                                            <div>
                                                Address</div>
                                        </td>
                                        <td align="left">
                                            <asp:Label ID="lblconadd" runat="server" Text="Label"></asp:Label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="style68">
                                            <div>
                                                City</div>
                                        </td>
                                        <td align="left">
                                            <asp:Label ID="lblconcity" runat="server" Text="Label"></asp:Label></td>
                                    </tr>
                                    <tr>
                                        <td class="style68">
                                            <div>
                                                TINNO.</div>
                                        </td>
                                        <td align="left">
                                        <asp:Label ID="lblcontinno" runat="server" Text="Label"></asp:Label></td>
                                    </tr>
                                    <tr>
                                        <td class="style68">
                                            <div>
                                                ECC NO</div>
                                        </td>
                                        <td align="left">
                                          <asp:Label ID="lblconeccno" runat="server" Text="Label"></asp:Label></td>
                                    </tr>
                                </table>
                            </td>
                        <td valign="top" align="left">

                            <table style="width:100%;">
                                <tr>
                                    <td class="style67">
                                        <div class="dvpo">
                                            PoNo:</div>
                                    </td>
                                    <td>
                                        <asp:Label ID="lblpono" runat="server" Text="Label"></asp:Label>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="style67">
                                        &nbsp;</td>
                                    <td>
                                        &nbsp;</td>
                                </tr>
                                <tr>
                                    <td class="style67">
                                        <div class="dvpo">
                                            Date:</div>
                                    </td>
                                    <td>
                                        <asp:Label ID="lbldate" runat="server" Text="Label"></asp:Label>
                                    </td>
                                </tr>
                            </table>

                        </td>
                    </tr>
                    </table>
             </td>
        </tr>
        <tr>
           <td>
            <div class="dvright">

            </div>
           </td>
        </tr>
        <tr>
            <td class="style2">

                                    <div class="dvitems">Dear Sir/Mam,</div>
                                    </td>

        </tr>
        <tr>
            <td class="style2">

            <div class="dvinstruction">
 We are Pleased to order the under mentioned item kindly make the arrangements for the dispatch of same

             </div>
            </td>

        </tr>
        <tr>
            <td class="style2">

            </td>
        </tr>
        <tr>
            <td>
             <table>
                    <tr>
                    <td>
  <div style="width:100%; overflow:auto;min-height:500px;">                                             
  <asp:GridView ID="GridView1" runat="server" width:auto Height:auto AutoGenerateColumns="False" ShowFooter="True" style="min-width:700px"
  onrowdatabound="GridView1_RowDataBound">

                         <Columns>
                        <asp:BoundField DataField="itdsrno" HeaderText="Srno" />
                        <asp:BoundField DataField="itemname" HeaderText="Item" />
                        <asp:BoundField DataField="itdlength" HeaderText="Gsm" />
                        <asp:TemplateField HeaderText="Qty">
                        <FooterTemplate>
                        <asp:Label ID="lbltotalquan" runat="server" Text="Label"></asp:Label>
                         </FooterTemplate>
                         <ItemTemplate>
                            <asp:Label ID="lblquantity" runat="server" Text='<%# Eval("itdquan") 
```

%>'>

String.Format("{0:f2}",DataBinder.Eval(Container.DataItem,"itdRate")) %>' >

```
 <asp:TemplateField HeaderText="Amount">
                            <FooterTemplate>
                                <asp:Label ID="lbltxttotal" runat="server"  />
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblamount" runat="server" Text='<%# 
```

String.Format("{0:f2}",DataBinder.Eval(Container.DataItem,"itdAmou")) %>' >

```
 </asp:TemplateField>

                        <asp:BoundField DataField="itdrema" HeaderText="Remark" />
                    </Columns>

                </asp:GridView>
</div>

                        </td>
                    </tr>
                 </table>

            </td>
        </tr>
    </table> 
```

而cs代码是

```
 if (!IsPostBack)
    {
        int compcode=0;
        c.GetConection();
        if(Session["compcode"]!=null)
        {
        compcode=Convert.ToInt32(Session["compcode"]);
        DataTable dtcomp = new DataTable();
        da = new SqlDataAdapter();
        SqlCommand cmdcom = new SqlCommand("sp_Getcompanyinfobycode",c.con);
        cmdcom.CommandType = CommandType.StoredProcedure;
        cmdcom.Connection = c.con;
        cmdcom.Parameters.AddWithValue("@compcode", compcode);
        da.SelectCommand = cmdcom;
        da.Fill(dtcomp);
        if (dtcomp.Rows.Count > 0)
        {
            if (dtcomp.Rows[0]["compadd1"] != null)
            {
                if (!string.IsNullOrEmpty(dtcomp.Rows[0]["compadd1"].ToString()))
                {

                    lbloffice.Text= dtcomp.Rows[0]["compadd1"].ToString();
                }
                else
                {
                    lbloffice.Text = "";
                }
                if (!string.IsNullOrEmpty(dtcomp.Rows[0]["compphor"].ToString()))
                {

                    lblphone.Text = dtcomp.Rows[0]["compphor"].ToString();
                }
                else
                {
                    lblphone.Text = "";
                }

            }
        }

        }

        System.Data.DataTable dt=new DataTable();
        da = new SqlDataAdapter("select convert(int,itdquan) as itdquan,convert(int,itdlength) as itdlength, * from tmpMateIn", c.con);
        da.Fill(dt);
        if (dt.Rows.Count > 0)
        {

            //if (dt.Rows.Count < 5)
            //{
            //    dt.Rows.Add(new object[] { "", "" });

            //}
            GridView1.DataSource = dt;

            GridView1.DataBind();

        }
        if (dt.Rows.Count > 0)
        {

            if (dt.Rows[0]["mstdate"] != null)
            {
                lbldeliverydt.Text = string.Format("{0:dd-MM-yyyy}", dt.Rows[0]["mstdate"]);
            }
            else
            {
                lbldeliverydt.Text = "";
            }
            if ((dt.Rows[0]["mstdeliDes"])!=null)
            {
                lblcity.Text = dt.Rows[0]["mstdeliDes"].ToString();
            }
            else
            {
                lblcity.Text = "";
            }
            if ((dt.Rows[0]["mstfrghtper"] != null))
            {
                if (!string.IsNullOrEmpty(dt.Rows[0]["mstfrghtper"].ToString()))
                {
                    decimal mstfrght = Convert.ToDecimal(dt.Rows[0]["mstfrghtper"].ToString());
                    lbldiscbill.Text = String.Format("{0:f2}", mstfrght);
                }
            }
            else
            {
                lbldiscbill.Text = "";
            }
            if ((dt.Rows[0]["msttaxper"] != null))
            {
                if (!string.IsNullOrEmpty(dt.Rows[0]["msttaxper"].ToString()))
                {
                    decimal msttaxper = Convert.ToDecimal(dt.Rows[0]["msttaxper"].ToString());

                    lbltax.Text = String.Format("{0:f2}", msttaxper);
                }
            }
            else
            {
                lbltax.Text = "";
            }
            if ((dt.Rows[0]["mstpayDes"] != null))
            {
                lblpterm.Text = dt.Rows[0]["mstpayDes"].ToString();
            }
            else
            {
                lblpterm.Text = "";
            }
            if ((dt.Rows[0]["itdrefq"] != null))
            {
                if (!string.IsNullOrEmpty(dt.Rows[0]["itdrefq"].ToString()))
                {
                    decimal itdrefq = Convert.ToDecimal(dt.Rows[0]["itdrefq"].ToString());
                    lblvattinno.Text = String.Format("{0:f2}", itdrefq);
                }
            }
            else
            {
                lblvattinno.Text = "";
            }

            da = new SqlDataAdapter();
            DataTable dtmtdetail = new DataTable();
            SqlCommand cmd = new SqlCommand("sp_Getordemstdetailbycode", c.con);
            cmd.Parameters.AddWithValue("@mstcode", dt.Rows[0]["mstcode"]);
            cmd.Parameters.AddWithValue("@compcode", dt.Rows[0]["compcode"]);
            cmd.Parameters.AddWithValue("@msttype", dt.Rows[0]["msttype"]);
            cmd.CommandType = CommandType.StoredProcedure;
            da.SelectCommand = cmd;
            da.Fill(dtmtdetail);
            if (dtmtdetail.Rows.Count > 0)
            {
                if ((dtmtdetail.Rows[0]["mstindno"] != null))
                {
                    if (!string.IsNullOrEmpty(dtmtdetail.Rows[0]["mstindno"].ToString()))
                    {
                        decimal mstindno = Convert.ToDecimal(dtmtdetail.Rows[0]["mstindno"].ToString());
                        lblcsttinno.Text = string.Format("{0:f2}", mstindno);
                    }
                }
                else
                {
                    lblcsttinno.Text = "";
                }
                if ((dtmtdetail.Rows[0]["mstsection"] != null))
                {
                    if (!string.IsNullOrEmpty(dtmtdetail.Rows[0]["mstsection"].ToString()))
                    {
                        lbleccno.Text = string.Format("{0:f2}", dtmtdetail.Rows[0]["mstsection"].ToString());
                    }
                }
                else
                {
                    lbleccno.Text = "";
                }

            }

            da = new SqlDataAdapter();
            DataTable dtpartyinfo = new DataTable();
            SqlCommand cmd1 = new SqlCommand("sp_GetAccountinfo", c.con);
            cmd1.Parameters.AddWithValue("@acctname", dt.Rows[0]["acctname"]);
            cmd1.CommandType = CommandType.StoredProcedure;
            da.SelectCommand = cmd1;
            da.Fill(dtpartyinfo);
            if (dtpartyinfo.Rows.Count > 0)
            {

                if (dt.Rows[0]["acctaddr"] != null)
                {
                    if (!string.IsNullOrEmpty(dtpartyinfo.Rows[0]["acctaddr"].ToString()))
                    {

                        lblpartyadd.Text = dtpartyinfo.Rows[0]["acctaddr"].ToString();
                    }
                    else
                    {
                        lblpartyadd.Text = "";
                    }
                }

            }

            lblpono.Text = dt.Rows[0]["compcode"].ToString();
            if (dt.Rows[0]["mstdate"] != null)
            {

                lbldate.Text = String.Format("{0:dd-MM-yyyy}", dt.Rows[0]["mstdate"]);
            }
            else
            {
                lbldate.Text = "";
            }
            lblconsignee.Text = dt.Rows[0]["mstdepa"].ToString();
            lblattn.Text = dt.Rows[0]["acctname"].ToString();
            if (dt.Rows[0]["acctname"] != null)
            {
                lblcompany.Text = "For " + dt.Rows[0]["acctname"].ToString();
            }
            imglogo.Attributes.Add("src", "/office%20pro/CrystalImageHandler.aspx?dynamicimage=cr_tmp_image_86d5effd-30fa-48d6-9a87-49b5ae9a616a.png");
            da = new SqlDataAdapter();
            DataTable dtconsigneeinfo = new DataTable();
            SqlCommand cmd2 = new SqlCommand("sp_GetAccountinfo", c.con);
            cmd2.Parameters.AddWithValue("@acctname", dt.Rows[0]["mstdepa"]);
            cmd2.CommandType = CommandType.StoredProcedure;
            da.SelectCommand = cmd2;
            da.Fill(dtconsigneeinfo);
            if (dtconsigneeinfo.Rows.Count > 0)
            {
                if (dtconsigneeinfo.Rows[0]["acctphon"] != null)
                {
                    if (!string.IsNullOrEmpty(dtconsigneeinfo.Rows[0]["acctphon"].ToString()))
                    {

                        lblphone.Text = dtconsigneeinfo.Rows[0]["acctphon"].ToString();
                    }
                    else
                    {
                        lblphone.Text = "";
                    }
                }
                if (dtconsigneeinfo.Rows[0]["acctaddr"] != null)
                {
                    if (!string.IsNullOrEmpty(dtconsigneeinfo.Rows[0]["acctaddr"].ToString()))
                    {

                        lbloffice.Text = dtconsigneeinfo.Rows[0]["acctaddr"].ToString();
                    }
                    else
                    {
                        lbloffice.Text = "";
                    }
                }

            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:33:02.133

如果你想在你的gridview中没有行的时候做一些事情，那么你可以使用gridview的EmptyDataTemplate。
当 gridview 中没有数据时，会显示此模板。
由于它是一个模板，因此您可以根据自己的选择进行设计。
这是一个[例子](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.emptydatatemplate.aspx)。

还有一个[堆栈溢出](https://stackoverflow.com/questions/9982237/asp-net-gridview-if-empty-show-message)

的例子 如果你想在你的gridview下面添加一些东西，你可以使用页脚模板。
有一个很好的页脚模板示例。[http://www.ezzylearning.com/tutorial.aspx?tid=1676759](http://www.ezzylearning.com/tutorial.aspx?tid=1676759)。
由于它是一个模板，因此您可以在其中使用 html 或服务器控件。

```
<FooterTemplate>
   <asp:Label ID="lbltotalquan" runat="server" Text="Label"></asp:Label>
 <table>
     <tr>
         <td style='height:50px;'></td>
     <tr/>
 </table>
 </FooterTemplate> 
```

这将在您的页脚下方创建额外的空间。它也可以从后面的代码中完成。计算数据源中的记录数并在页脚中添加表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:26:18.067

我找到了解决方案。我怎么能错过它。您可以使用样式表来解决问题。
使用CSS 的**min-height** 属性。
这是一个链接
[http://www.w3schools.com/cssref/pr_dim_min-height.asp](http://www.w3schools.com/cssref/pr_dim_min-height.asp)

# objective-c - 在 REST Api 中建模对象继承

> ID：13190797
> 
> 赞同：5
> 
> 时间：2012-11-02T07:05:22.357
> 
> 标签：objective-c, django, api, oop, rest

# 问题

我有一个具有`User`对象和`Student`对象的应用程序。*一些*用户是学生。所有学生都是用户。在数据库（基于 django-ORM）中，这表示为一个`Student`表，该表具有该表的外键`User`。

我正在尝试在 iOS 应用程序中创建一个 REST API 和一个对象层次结构来模拟这个 API。我在决定如何建模时遇到了麻烦。

# 当前的解决方案

我想出的最好的方法是：`User`在 iOS 中有一个模型，在 iOS 中有一个`Student`模型，它继承自`User`并使用更多属性扩展它。然后，有一个方法从服务器接收 JSON 响应，并根据字典创建一个*或*`User`一个模型。`Student`

最后，服务器需要始终给我最具体的类型。即，当我登录到服务器时，它将决定我是学生还是普通用户，并将返回正确的字典。

# 这是最好的方法吗？

这听起来有点复杂。但是我想到的任何其他建模方式，例如改变数据库的布局方式，都会给我一个数据库不知道所有约束的设计。例如，`Student`允许对象拥有其他对象（例如，`homework_paper`）。我可以用一个`User`对象而不是对象的外键来建模它`Student`，并说它`Student`只是用户的扩展。`homework_paper`但是数据库并没有强制 a必须由学生拥有这一事实。

有没有更好的方法来解决我缺少的这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:26:49.633

There is nothing that says the classes in your UI layer need to match 1-on-1 with your domain classes. Just like your domain classes do not have to follow your database tables exactly.

You can think of the classes for your UI layer your UI representations as a different set of classes. Classes you needed to make your UI work, or needed to use a framework to your advantage without compromising the business rules in your domain model and/or database design.

Your User UI class could well be a class that wraps both user and student domain classes. It would have knowledge of both User and Student domain classes. It is then up to this wrapper class to instantiate either a User or Student.

Another approach would be to model the User-Student relation as a "has a" relation instead of a "is a". After all, what are you going to do when user's can not only be students but teachers as well. For example when a teacher enrolls in some other course than the one (s)he teaches. Usually, these kinds of relations are better modelled using Roles than as "is a" relations. See Martin Fowler for more info on [Dealing with Roles](http://martinfowler.com/apsupp/roles.pdf).

In any case, the User UI class would be the basis for your representation in your REST implementation and fill extra parts in that representation dependent on whether it is dealing with a user or a student or - in the role based approach - a user that has student stuff associated with it:

```
{
  "user": "/users/1234",
  "name": "Some non student's name",
  "stats": {
    ...
  }
}, 
{
  "user": "/users/4567",
  "name": "Some Student's name",
  "stats": {
    ...
  }
  "papers": [
    { "paperid": "/users/papers/111"
      ...
    },
    { "paperid": "/users/papers/222"
      ...
    },
    { "paperid": "/users/papers/333"
      ...
    }
  ]
} 
```

**Edit in response to comments**

The server has to decide that anyway at some level, unless you want to have your UI differentiate between users and students at the URI level. Which I recommend AGAINST. It makes for unusable UI's. The user isn't interested in the implementation details and doesn't want to be confronted with them.

But no, **if**'s are **not** needed.

Use polymorfism to your advantage.

The server can put polymorfism to good use receiving a student instance from its data access framework for any user that it retrieves by id. Students after all can always be referenced as users. So the server can simply ignore the fact that the user reference it gets from the data access framework might be a student. When the server actually needs to do/add specific student stuff, it should do so in a derived class.

No if statement needs to be used anywhere for this. Not even in the UI classes. The UI just needs to know that the User reference it receives could also be a Student and act accordingly. Preferably not by `if User is Student` (that would be tying the UI way to deeply to the class hierarchy), but by `if IUser implements IStudent`: asking the User reference whether it also implements the Student interface, and then getting and using that IStudent interface reference.

# asp.net-mvc - 使用 SQL Server CE 存储临时数据是否合乎逻辑？

> ID：13190807
> 
> 赞同：2
> 
> 时间：2012-11-02T07:05:49.240
> 
> 标签：asp.net-mvc, sql-server-ce

我正在使用 ASP.NET MVC4 和 SQL Server 2012 编写一个 Web 应用程序。

在我的网络应用程序的某个时刻，我需要在我的网络应用程序中存储来自不同页面的一些数据，并且在向用户显示单个页面上的整个数据之后，如果用户确认并且没有验证错误，我将存储确认的数据到 SQL Server。这个网络应用程序有大量的用户。

使用 SQL Server CE 作为临时存储并在 SQL Server CE 上确认之前存储数据是否符合逻辑和性能？

还有其他我可以使用的选项吗？

localDb 呢？！在这种情况下使用 localDb 而不是 SQL Server CE 会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:14:32.043

由于公司政策和 SQL Server CE 约束（例如并发连接数为 256），我使用了另一种方法。我使用序列化来保持对象的状态。像这样的东西：

[http://highoncoding.com/Articles/647_Creating_Wizard_Using_ASP_NET_MVC_Part_1.aspx](http://highoncoding.com/Articles/647_Creating_Wizard_Using_ASP_NET_MVC_Part_1.aspx)

[http://highoncoding.com/Articles/652_Creating_Wizard_in_ASP_NET_MVC_Part_2.aspx](http://highoncoding.com/Articles/652_Creating_Wizard_in_ASP_NET_MVC_Part_2.aspx)

```
 public static string Serialize(this object o)
    {
        var sw = new StringWriter(); 
        var formatter =  new LosFormatter();
        formatter.Serialize(sw, o);

        return sw.ToString(); 
    }

    public static object Deserialize(this string data)
    {
        if(String.IsNullOrEmpty(data))
            return null; 

        var formatter = new LosFormatter();
        return formatter.Deserialize(data); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:12:00.173

您是否考虑过使用会话状态来存储值？[http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)

# c# - 查找百分比并将其四舍五入两个位置

> ID：13190811
> 
> 赞同：0
> 
> 时间：2012-11-02T07:05:56.903
> 
> 标签：c#, ambiguous

我知道这是我要问的基本问题，请耐心等待。

我试图找出百分比。

这是我正在尝试的，但它给了我一个模棱两可的错误。

```
int total = 1;
int totalUsers = 3;
if (totalUsers > 0)
{
    var per =Math.Round(total / totalUsers,4) * 100 ;
    object[] args = new object[] { total, totalUsers, per };
    lblMsg.Text = string.Format("{0} of {1} users already voted({2}%)", args);
} 
```

```
For Example:
if total = 1
totalusers = 3 
per should be after rounding of 33.33% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:11:09.587

要解决该`ambiguous call`错误，请更改为：

```
var per =Math.Round((decimal)total / totalUsers,4) * 100 ; 
```

# php - ftp_connect() 不适用于生产

> ID：13190814
> 
> 赞同：0
> 
> 时间：2012-11-02T07:06:25.903
> 
> 标签：php, file-upload, ftp

**本地主机：**

在 php 应用程序`ftp_connect("000.000.0.00")`中工作正常，这意味着当我尝试从本地系统浏览文件并将此文件上传到 FTPit 时，它正在工作。

**生产服务器：** 当我在生产环境中部署我的 PHP 应用程序并尝试通过 FTP 连接时`ftp_connect("000.000.0.00")`它没有连接。它返回 FALSE。请告诉我如何连接 FTP 以通过我的 PHP 应用程序上传我的文件。

```
<?php
$ftp_server="000.000.0.00";
$ftp_user_name="myftpuser";
$ftp_user_pass="myftppwd";

$conn_id = ftp_connect($ftp_server);
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
if ((!$conn_id) || (!$login_result))
{
    echo "Connection Failed.";
}
else
{
    echo "Connected.";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:11:06.940

您需要更换`000.000.0.00`为您的 ftp 服务器。

参考这里：[ftp_connect()](http://www.php.net/manual/en/function.ftp-connect.php)

# visual-studio-2010 - 在非 VS 环境中使用另一个 Exe 文件安装 Windows 服务

> ID：13190817
> 
> 赞同：0
> 
> 时间：2012-11-02T07:06:31.047
> 
> 标签：visual-studio-2010, windows-services, command-prompt

我有一个要求，我有一个在开发人员环境中开发的 Windows 服务。我必须将我的服务安装到我没有安装 .Net Framework 的 Windows Server 2008 上。基于这种情况，我选择了另一个将安装 Windows 服务的 EXE 文件。

我有一些正常的命令提示符可以使用此命令安装 Windows 服务。

```
c:\> sc create binpath = "my service path [EXE]" 
```

但我需要在另一个 EXE 文件中执行此语句。在这种情况下有没有更好的解决方案。请帮助我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:45:03.427

```
if (the service is developed with .NET) {
    //do nothing and tell you manager that 
    //.net framework needs to be installed on Windows Server 2008
} else {
    //use the sc command or 
    //put the command in a batch file with conent "sc create binpath = "my service path [EXE]"
} 
```

# android - 如何从 xml 文件中的数组传递数据和值

> ID：13190819
> 
> 赞同：0
> 
> 时间：2012-11-02T07:06:46.620
> 
> 标签：android, xml, android-xml

在我的 android 应用程序中，我从 string.xml 文件中定义的数组中获取值并在 java 活动类中使用它。在我不得不使用阿拉伯字体之前，它的工作很迷人。

当我将阿拉伯字母放在 xml 文件中时，我无法在 java 文件中对它们进行编译。它显示错误`"Some characters can not be mapped using cp1252"` 这是带有阿拉伯语的 xmle 数组

```
<string-array name="country_arrays">

        <item>لا شيء</item>
        <item>5 &#8211; 9</item>
        <item>10 &#8211; 14</item>
        <item>15 &#8211; 19</item>
        <item>20 &#8211; 24</item>
        <item>25 &#8211; 35</item>
        <item>36 &#8211; 45</item>

    </string-array> 
```

这是java代码

```
if (s.equals("5 &#8211; 9")) {
                        message = getResources().getString(R.string.listdesc1);

                    } else if (s.equals("10 &#8211; 14")) {
                        message = getResources().getString(R.string.listdesc1);
                    } else if (s.equals("15 &#8211; 19")) {
                        message = getResources().getString(R.string.listdesc2);
                    } else if (s.equals("20 &#8211; 24")) {
                        message = getResources().getString(R.string.listdesc3);
                    } else if (s.equals("25 &#8211; 29")) {
                        message = getResources().getString(R.string.listdesc4);
                    } else if (s.equals("30 &#8211; 34")) {
                        message = getResources().getString(R.string.listdesc5);
                    } else if (s.equals("35 &#8211; 39")) {
                        message = getResources().getString(R.string.listdesc6);
                    } else if (s.equals("40 &#8211; 44")) {
                        message = getResources().getString(R.string.listdesc7);
                    } else if (s.equals("45 &#8211; 49")) {
                        message = getResources().getString(R.string.listdesc8);
                    } else if(s.equals(ذلك)){
                        message = getResources().getString(R.string.listdesc9);
                    }else if(s.equals(شيء)){
                        message=getResources().getString(R.string.listdesc0);   
                    }

                    txtv2.setText(message);
                    txtv.setText(getResources().getString(R.string.listtitle1));
                    // Toast.makeText( arg0.getContext(), message, 
```

是否有任何选项可以传递一个值，例如在 android xml 数组中的 HTML 元素 value="1" 中。如果有办法，我可以将数组元素与该值而不是实际的数组元素名称进行比较。

但是请帮助我纠正这个问题。

thx提前..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:19:57.903

在解决了这个问题之后，我的理解是，当我们在字符串文件中从字符串数组传递值时，我们无法正确捕获值（阿拉伯字母和 - 值）之后的值。当我调试时，我注意到 onitemselectedListner() 方法中的位置总是 0 值。

```
<string-array name="country_arrays">

        <item>لا شيء</item>
        <item>5 &#8211; 9</item>
        <item>10 &#8211; 14</item>
        <item>15 &#8211; 19</item>
        <item>20 &#8211; 24</item>
        <item>25 &#8211; 35</item>
        <item>36 &#8211; 45</item>

</string-array> 
```

因此，我不得不用上述内容在java文件中填写列表。然后我注意到数据被正确地传递给了 lisner 方法。如果我们使用字符（A，B ...等），我们不想担心。所有这些问题都与阿拉伯字母有关。（我不知道为什么布局文件不能正确地将阿拉伯字母传递给 java 文件）。

然后我按如下方式管理代码。

```
List<String> list = new ArrayList<String>();
        list.add("لا شيء");
        list.add("5 - 9");
        list.add("10 - 14");
        list.add("15 - 19");

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner1.setAdapter(dataAdapter);

        //Log.v(LogApp,"mint value is:" + mint);

        spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {

                String s = arg0.getItemAtPosition(arg2).toString();

                if (s.equals("لا شيء")) {
                    message = getResources().getString(R.string.listdesc0);

                } else if (s.equals("5 - 9")) {
                    message = getResources().getString(R.string.listdesc1);
                } else if (s.equals("10 - 14")) {
                    message = getResources().getString(R.string.listdesc2);
                } else if (s.equals("15 - 19")) {
                    message = getResources().getString(R.string.listdesc3);
                }               txtv2.setText(message);
                //txtv.setText(getResources().getString(R.string.listtitle1));
                // Toast.makeText( arg0.getContext(), message,
                // Toast.LENGTH_LONG).show();
            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }

        }); 
```

# eclipse - Maven打开zip文件时抛出错误？

> ID：13190823
> 
> 赞同：1
> 
> 时间：2012-11-02T07:07:03.890
> 
> 标签：eclipse, maven, archiva

我在 My Local **Apache Archiva**中添加了大量 jar 文件，并在我的项目 pom.xml 中添加了**存储库**位置和**依赖项。**

```
mvn clean
mvn eclipse:eclipse 
```

工作正常，但是当我试图跑步时

```
mvn install 
```

然后我得到异常

```
Error in opening zip files 
```

而从archiva下载的所有jar文件

有人建议删除 .m2 存储库并再次运行命令，我也尝试过，但仍然无法解决。注意：-我的项目中没有任何测试代码谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T08:51:28.483

您的本地 Maven 存储库中有损坏的文件。它们需要重新下载 - 可能只需删除 .m2 文件夹并重试即可解决问题，如果没有，您需要找出您的档案存储库为您提供坏文件的原因。

您应该能够运行`mvn -X install`以找出有关哪个文件失败的更详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T11:10:22.503

由于存储库中的文件损坏，请删除显示错误的特定文件或删除整个存储库并重新部署。

# javascript - javascript setTimeout 函数不起作用

> ID：13190824
> 
> 赞同：-4
> 
> 时间：2012-11-02T07:07:03.860
> 
> 标签：javascript, jquery

我正在尝试每秒更新一个变量。出于这个原因，我正在使用 setTimeout。但它不会更新变量。它只注销一次 0。这是我的代码

```
var yes=0;
setTimeout(function () {
    console.log(yes);
    yes++;
}, 1000);​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:08:16.413

使用[**setInterval**](http://www.w3schools.com/jsref/met_win_setinterval.asp)，要完成重复，您必须使用 clearInterval(yourInterval); 清除间隔

**[现场演示](http://jsfiddle.net/Zya6x/)**

```
var yes=0;
yourInterval = setInterval(function () {
    console.log(yes);
    yes++;
}, 1000);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T07:09:16.333

setTimeout 只会重复一次，尝试 setInterval 以便每秒递增`yes`1

但请记住在其他时间进入一个永无止境的循环之后清除间隔

使用`clearInterval()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T07:11:09.270

setTimeOut 方法仅在特定超时后调用一次，在您的情况下为 1000，请尝试改用 setInterval 方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T07:13:56.190

## *[带有 setTimeout 的 jsBin 演示](http://jsbin.com/osacup/1/edit)*

如果您真的想坚持使用 setTimeout （我很欣赏；））
，而不仅仅是将所有内容包装到一个函数中并在其中自行调用它，例如：

```
var yes=0;

(function loop(){

  setTimeout(function () {

    console.log(yes);
    yes++;
    loop();  // loop recall

  }, 1000);

})(); 
```

否则去**[setInterval](http://jsbin.com/osacup/2/edit)**：

```
var yes=0;

function count(){  
    console.log(yes);
    yes++;  
}

setInterval(count, 1000); 
```

# jquery - Jquery .load() 似乎在 Firefox 中不起作用

> ID：13190825
> 
> 赞同：1
> 
> 时间：2012-11-02T07:07:05.700
> 
> 标签：jquery

我试图通过搜索 Stackoverflow 来找到这个问题的答案，并且我找到了很多密切相关的答案，但似乎没有一个能完全满足我的需求。大多数是更复杂的场景，只是不适用。无论如何，我正在做的是使用 url 调用我网站的某个页面，然后在页面上识别要加载到另一个 div #getter 中的特定元素。该脚本在 IE 和 Chrome 中完美运行，但我对 Firefox 一点运气都没有。有任何想法吗？这是代码：

```
<script>
$("#getter").load("http://$domain/member/?show=feed .content");
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:10:13.650

试试这个代码（没有域）：

```
<script>
$("#getter").load("/member/?show=feed .content");
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:10:12.610

我认为最好把代码放进去

```
$(document).ready(function()
{
   $("#getter").load("http://$domain/member/?show=feed .content");
}); 
```

可能会导致它在 dom 加载之前被调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T07:38:36.783

如果您需要绝对路径并且必须有一个 php 变量，请尝试

```
$("#getter").load("http://<?php echo $domain;?>/member/?show=feed .content"); 
```

虽然混合 php 和 js 并不是一个好主意，但有时不得不这样做。

# maven - Grails refresh-dependencies 不会从本地 maven 存储库下载快照依赖项

> ID：13190828
> 
> 赞同：8
> 
> 时间：2012-11-02T07:07:30.470
> 
> 标签：maven, grails, grails-2.1

我正在使用 Grails 2.1.1 和 Maven 3.0.3。

在我的 buildConfig.groovy 中，我有`pom true`并且我通过`grails create-pom`. 在这个 pom 中，我有一个依赖项，`<version>1.0-SNAPSHOT</version>`它只存在于我的本地 maven 存储库中。我可以`mvn clean compile`在这个 pom 上成功运行。

但是，运行`grails refresh-dependencies`不会从我的本地 Maven 存储库下载我的快照依赖项的最新版本。我可以让它下载最新版本的唯一方法是从常春藤缓存中手动删除它。

根据[文档](http://grails.org/doc/latest/guide/conf.html#changingDependencies)：

> 所有版本号以 -SNAPSHOT 结尾的依赖项（jar 和插件）都被 Grails 隐式视为正在更改。

我假设它会识别我的快照文件正在更改并在修改时下载它。我是否缺少其他一些配置步骤？我只想使用 maven 进行依赖管理，但这完全是使用 Maven 和 Grails 的错误方式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-18T22:12:12.817

这实际上是 Aether 解析器的正常行为。

`--refresh-dependencies`不会绕过您的本地 Maven 缓存。为此，您需要将包含您的依赖项的 maven 存储库设置为*始终*下载新快照。在 BuildConfig.groovy 的存储库块中：

```
mavenRepo ("http://my.server/repos/my-grails-plugins") {
    updatePolicy 'always'
} 
```

感谢[http://asoftwareguy.com/2013/10/25/grails-2-3-maven-dependency-caching-issues/](http://asoftwareguy.com/2013/10/25/grails-2-3-maven-dependency-caching-issues/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:24:22.830

由于我没有得到任何回复，似乎解决方案是不使用 grails 命令行，而是使用 Grails 的 maven 目标。

`mvn grails:run-app`成功了。所有快照依赖项都已刷新，我可以启动我的应用程序并查看反映的本地更改。这样我就完全忽略了常春藤，让 maven 处理一切。

**编辑：**如果你走这条路，我建议按照关于[Maven 集成](http://grails.org/doc/latest/guide/commandLine.html#antAndMaven)的用户指南的第 5 章来设置你的 pom.xml 等。我能够遵循这个并毫无意外地进行设置。

# iphone - 如何将unity ios项目与另一个ios项目嵌入

> ID：13190831
> 
> 赞同：4
> 
> 时间：2012-11-02T07:07:38.563
> 
> 标签：iphone, ios, xcode, unity3d

我制作了一个统一项目并将其转换为 iOS 项目，这会创建许多 xcode 可读的文件，现在我想将其嵌入到另一个 ios 项目中。我面临的困难是如何将这个（统一转换的 iOS 项目）与我的特定 ios 项目连接起来。Unity 转换的 ios 项目有`AppController.m`一个类，我认为这是我认为每个代码开始的第一类，我`AppDelegate`在 Ios 中是相等的，但这是一个非常混乱的类，无法理解如何将它与我的项目挂钩。我想要这个 Unity 转换的 iOS 项目的全部代码和全部功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T01:43:34.910

看看这个问题，它可能会给你一些正确方向的想法。

[将 Unity3D 作为子项目的 Xcode 工作区？](https://stackoverflow.com/questions/11093792/xcode-workspace-with-unity3d-as-a-sub-project)

# java - 如何从 JavaScript 调用带有 JSP Servlet 参数的操作？

> ID：13190833
> 
> 赞同：0
> 
> 时间：2012-11-02T07:07:41.160
> 
> 标签：java, javascript, jsp, servlets

```
function printthis()
{ 
 var content_vlue = document.getElementById('print_content').innerHTML;
 var target= 'printValue?value1='+content_vlue;
 document.forms[0].action = target;
 document.forms[0].submit();
} 
```

`<div id="print_content">hello i am good</div>`

对于前端，我使用的是 JSP。在执行此代码以获取 servlet 中的值时

```
String msg = request.getParameter("value1"); 
```

执行此代码时，浏览器 url 更改为***printValue？***

但我无法获得*value1的值*

请建议我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:34:12.317

似乎您`value1='+content_vlue`从请求中丢失了试试这个看看

```
var target= "'printValue?value1="+content_vlue+"'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:19:13.853

像这样在表单中创建一个隐藏变量

```
<form ..>
    ....
    <input type="hidden" id="value1" name="value1"/>
</form> 
```

并将javascript函数修改为此。

```
function printthis()
{ 
 var content_vlue = document.getElementById('print_content').innerHTML;
 document.getElementById('value1').value  = content_value;
 var target= 'printValue';
 document.forms[0].action = target;
 document.forms[0].submit();
} 
```

希望这对你有用。

# php - codeigniter 空格或标题导致警告

> ID：13190835
> 
> 赞同：2
> 
> 时间：2012-11-02T07:07:43.260
> 
> 标签：php, codeigniter

我昨天一整天都收到警告错误，无法将其关闭。不知道发生了什么。它抱怨在第 1 行对 property_model.php 执行重定向之前发送了一些输出。我去那里检查了所有内容，但没有运气。我还检查了空格。我将粘贴错误和代码。

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：无法修改标头信息 - 标头已发送（输出开始于 /home/sddhd/public_html/rsw/application/models/property_model.php:1）
> 
> 文件名：helpers/url_helper.php
> 
> 行号：542

现在上面显示的模型代码是：

```
<? class Property_model extends CI_Model {
    function __construct()
        {
            parent::__construct();
        }

        function insert_property($propertyID)
        {
            $this->property_id = $propertyID;
            $this->type = $_POST['property_type'];
            $this->city = $_POST['property_city'];
            $this->address = $_POST['property_address'];
            $this->description = $_POST['property_description'];
            $this->owner = $_POST['property_owner'];
            $this->date_added = date("Y-m-d");
            $this->price = $_POST['property_price'];
            $this->offer_type = $_POST['property_offer'];
            $this->contact = $_POST['property_contact'];
            $this->db->insert('property', $this);
        }

        function insert_image_details($id, $url, $extension)
        {
            $current->property_id = $id;
            $current->extension = $extension;
            $current->url = $url;
            $this->db->insert('photos', $current);
        }
    }
?> 
```

以及重定向调用的用途（包括对模型的整个控制器调用）：

```
<?php
class Property extends CI_Controller {
    public function __construct()
    {
        parent::__construct();
        $this->load->helper('form');
                $this->load->helper('url');
        $this->load->model('property_model', 'propertymodel');
        $this->load->database();
    }

    public function index() {
        $this->load->view('home');
    }

    public function new_property()
    {
        $this->load->view('new_property', array('error' => '' ));    
    }

    public function create_property()
    {
        //Pass the posted data to model for insertion
        $propertyID = uniqid();
        $this->propertymodel->insert_property($propertyID); 
        $this->do_upload($propertyID);
        redirect('/home');
    }

        public function do_upload($propertyId)
        {
            $config['upload_path'] = './uploads/';
            $config['allowed_types'] = 'gif|jpg|png|jpeg';
            $config['max_size'] = '1000';
            $config['max_width']  = '1024';
            $config['max_height']  = '768';

            $this->load->library('upload', $config);
                if ( ! $this->upload->do_upload())
                {
                    $error = array('error' => $this->upload->display_errors());

                    $this->load->view('create_property', $error);
                }
                else
                {
                    $data = array('upload_data' => $this->upload->data());
                    //array to access all the file uploaded attributes
                    $image_data = $this->upload->data();

                    //parameters to be passed to model: 
                    $imgUrl = "../.".$config['upload_path'].$image_data['file_name'];
                    //$imgTitle = $image_data['file_name'];
                    $fileExtension = $image_data['file_ext'];
                    $this->propertymodel->insert_image_details($propertyId, $imgUrl, $fileExtension);
                }           
        }//end of function

}
?> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:25:34.257

我有同样的问题。没有任何帮助。然后我决定创建一个完整的新文件并将导致错误的文件中的内容复制到新文件中。这行得通！显然原始文件在位置 0 有一个隐藏字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T07:38:12.260

您在属性控制器中有错误。在方法 create_property 中替换这两行

```
$url= base_url().'home';
redirect($url); 
```

和

```
redirect('/home'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T08:13:41.097

在加载实际页面之前可能会发送一些警告。请在您的文档根目录的 index.php 中使用以下函数打开错误报告。

```
ini_set('display_errors', 'On');
error_reporting(E_ALL); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T08:42:57.630

在 Stackoverflow 中找到另一个人发布的这个替代解决方案。

```
 //Alternate Code for solve this issue
    $url = 'site/function1';
    echo'
    <script>
    window.location.href = "'.base_url().'index.php?/'.$url.'";
    </script>
    '; 
```

这真的很好用！希望使用它没有缺点！谢谢大家的支持。

[Codeigniter：标头已发送错误](https://stackoverflow.com/questions/5115430/codeigniter-headers-already-sent-error)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T07:14:15.893

您是否启用了 error_reporting？该模型可能会抛出您在此处看不到的错误。此错误会导致已发送的标头。

顺便问一下，`$current`方法中的哪里`insert_image_details`来的？这可能会引发错误。

# go - 有没有办法在 Go 中反向迭代切片？

> ID：13190836
> 
> 赞同：124
> 
> 时间：2012-11-02T07:07:43.463
> 
> 标签：go

可以这样说会很方便：

```
for _, element := reverse range mySlice {
        ...
} 
```

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-11-02T08:07:25.400

不，没有方便的运算符可以将其添加到范围一中。你必须做一个正常的 for 循环倒计时：

```
s := []int{5, 4, 3, 2, 1}
for i := len(s)-1; i >= 0; i-- {
   fmt.Println(s[i])
} 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-11-02T08:36:30.927

你也可以这样做：

```
s := []int{5, 4, 3, 2, 1}
for i := range s {
        fmt.Println(s[len(s)-1-i]) // Suggestion: do `last := len(s)-1` before the loop
} 
```

* * *

输出：

```
1
2
3
4
5 
```

也在这里：[http ://play.golang.org/p/l7Z69TV7Vl](http://play.golang.org/p/l7Z69TV7Vl)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-10-29T20:59:34.767

随指数变化

```
for k := range s {
        k = len(s) - 1 - k
        // now k starts from the end
    } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-18T02:25:33.097

如何使用延迟：

```
s := []int{5, 4, 3, 2, 1}
for i, _ := range s {
   defer fmt.Println(s[i])
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-01T19:07:06.343

可以使用通道来反转函数中的列表，而无需复制它。在我看来，它使代码更好。

```
package main

import (
    "fmt"
)

func reverse(lst []string) chan string {
    ret := make(chan string)
    go func() {
        for i, _ := range lst {
            ret <- lst[len(lst)-1-i]
        }
        close(ret)
    }()
    return ret
}

func main() {
    elms := []string{"a", "b", "c", "d"}
    for e := range reverse(elms) {
        fmt.Println(e)
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-12-04T10:21:04.857

我想这是反转数组的最简单方法。：

```
package main

import "fmt"

// how can we reverse write the array
func main() {

    arr := [...]int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
    revArr := [len(arr)]int{} // making empty array for write reverse

    for i := range arr {
        revArr[len(arr)-1-i] = arr[i]
    }

    fmt.Println(revArr)
} 
```

[https://play.golang.org/p/QQhj26-FhtF](https://play.golang.org/p/QQhj26-FhtF)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-08T15:00:27.127

当我需要从切片和反向范围中提取元素时，我使用如下代码：

```
// reverse range
// Go Playground: https://play.golang.org/p/gx6fJIfb7fo
package main

import (
    "fmt"
)

type Elem struct {
    Id   int64
    Name string
}

type Elems []Elem

func main() {
    mySlice := Elems{{Id: 0, Name: "Alice"}, {Id: 1, Name: "Bob"}, {Id: 2, Name: "Carol"}}
    for i, element := range mySlice {
        fmt.Printf("Normal  range: [%v] %+v\n", i, element)
    }

    //mySlice = Elems{}
    //mySlice = Elems{{Id: 0, Name: "Alice"}}
    if last := len(mySlice) - 1; last >= 0 {
        for i, element := last, mySlice[0]; i >= 0; i-- {
            element = mySlice[i]
            fmt.Printf("Reverse range: [%v] %+v\n", i, element)
        }
    } else {
        fmt.Println("mySlice empty")
    }
} 
```

输出：

```
Normal  range: [0] {Id:0 Name:Alice}
Normal  range: [1] {Id:1 Name:Bob}
Normal  range: [2] {Id:2 Name:Carol}
Reverse range: [2] {Id:2 Name:Carol}
Reverse range: [1] {Id:1 Name:Bob}
Reverse range: [0] {Id:0 Name:Alice} 
```

游乐场： https: [//play.golang.org/p/gx6fJIfb7fo](https://play.golang.org/p/gx6fJIfb7fo)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-09T01:58:10.820

**一个优雅的方法`reverse range`**：

如果您的切片是瞬态的：在元素数量大于零时循环，使用最后一个元素，然后将其删除。处理完第一个元素后，切片将为空：

```
s := []int{1, 2, 3, 4}
for len(s) > 0 {
    item := s[len(s)-1]
    fmt.Printf("Reverse item: %+v\n", item)
    s = s[:len(s)-1]
} 
```

**输出**：

```
Reverse item: 4
Reverse item: 3
Reverse item: 2
Reverse item: 1 
```

**去游乐场**： https: [//play.golang.org/p/XKB43k7M9j3](https://play.golang.org/p/XKB43k7M9j3)

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2021-07-24T19:07:18.720

您可以使用[go-funk](https://github.com/thoas/go-funk)[`funk.ForEachRight`](https://github.com/thoas/go-funk#funkforeachright)中的方法：

```
results := []int{}

funk.ForEachRight([]int{1, 2, 3, 4}, func(x int) {
    results = append(results, x)
})

fmt.Println(results) // []int{4, 3, 2, 1} 
```

# visual-studio-2010 - Excel SaveCopyAs() 方法的异常

> ID：13190837
> 
> 赞同：1
> 
> 时间：2012-11-02T07:07:55.447
> 
> 标签：visual-studio-2010, c#-4.0, excel-addins

我在 vs2010 中使用 excel-addins 生成了一个 excel 报告并将其保存到桌面。之后，我重新打开了同一个文件并更改了它的数据。当我尝试使用相同的文件名保存时发生异常。

***代码：-** Globals.ThisAddIn.Application.ActiveWorkbook.SaveCopyAs(saveFileDialog1.FileName);* *

**异常**：- *System.Runtime.InteropServices.COMException (0x800A03EC)：Microsoft Excel 无法访问文件“C:\Documents and Settings\112\Desktop\111.xlsx”。有几个可能的原因： • 文件名或路径不存在。• 该文件正被另一个程序使用。• 您尝试保存的工作簿与当前打开的工作簿同名。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:21:43.373

检查您的文件是否未被其他人使用。

您几乎肯定会遇到文件访问异常，可能是因为您尝试编写的文档已经在另一个程序中打开。

我猜那个程序是Microsoft Excel。

在 Excel 中关闭文档并重新运行测试。

# php - 基于从 sql db 动态加载的选择选项值输入文本值

> ID：13190840
> 
> 赞同：0
> 
> 时间：2012-11-02T07:08:05.497
> 
> 标签：php, mysql, forms

我有一个表单，它有一个选择字段，可以从数据库结果查询中动态加载选项。这是代码的样子。看到之后输入的描述文本？我需要代码来返回在 productID 下选择的项目的描述。我该怎么做？非常感谢所有回复。

```
 <div class="row-fluid">
    <div class="span3">
        <label>SKU</label>
        <?php  echo '<select name="ITEM" id="user" class="textfield1">';
        while($res= mysql_fetch_assoc($sql))
        {
        echo '<option value="'.$res['productID'].'">';
        echo $res['SKU'] ; 
        echo'</option>';
        }
        echo'</select>';

        ?>
    </div>
</div>
<div class="row-fluid">             
    <div class="span3">
        <label>Description</label>
        <input type="text" name="description" value=""/>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:26:15.437

您可以通过 2 种方式执行此操作：

**第一种方法**是重定向具有`$_GET`包含产品 ID 的参数的页面：

```
<div class="row-fluid">
    <div class="span3">
        <label>SKU</label>
        <?php  echo '<select name="ITEM" id="user" class="textfield1" 
                      onchange="document.location=\'my-page.php?pid=\' + this.value">';
        while($res= mysql_fetch_assoc($sql))
        {
          echo '<option value="'.$res['productID'].'"';
          // LATER EDIT
            if(isset($_GET['pid']) && $_GET['pid'] == $res['productID'])
              echo 'selected="selected"';
          // END LATER EDIT
          echo '>';
          echo $res['SKU'] ; 
          echo'</option>';
        }
        echo'</select>';

        ?>
    </div>
</div>
<div class="row-fluid">             
    <div class="span3">
        <label>Description</label>
        <?php
            if(isset($_GET['pid']) && is_numeric($_GET['pid'])) {
                $sql = mysql_query("SELECT description 
                                    FROM products 
                                    WHERE product_id='" . mysql_real_escape_string($_GET['pid']) . "'");
                $row = mysql_fetch_assoc($sql);
            }
        ?>
        <input type="text" name="description" value="<?=$row['description']?>"/>
    </div>
</div> 
```

**第二种方法**是进行 ajax 调用并动态填充描述输入，而不需要重新刷新页面

```
// this is the JS code
$(document).ready(function(){
   $('#user').change(function(){
       $.POST("my-ajax-call-page.php",
               {pid: $("#user").val()},
               function(data){
                   $('input[name="description"]').val(data.description);
               }, "json");
   });
}); 
```

你`my-ajax-call-page.php`应该是这样的：

```
<?php
    include("mysql-connection.php");

    $sql = mysql_query("SELECT description 
                        FROM products 
                        WHERE product_id='" . mysql_real_escape_string($_POST['pid']) . "'");
    $row = mysql_fetch_assoc($sql);

    echo json_encode("description" => $row['description']);
?> 
```

[您将在jQuery 库网站](http://jquery.com/)上找到许多使用 jQuery 库的示例和文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:37:23.433

```
<div class="row-fluid">
    <div class="span3">
        <label>SKU</label>
        <?php  echo '<select name="ITEM" id="user" class="textfield1" onchange="showDesc()">';
        $desHTML = "";
        echo "<option value='0'>Please select</option>"
        while($res= mysql_fetch_assoc($sql))
        {
        echo '<option value="'.$res['productID'].'">';
        echo $res["SKU"] ; 
        echo'</option>';
        $desHTML .="<div class'descBox' id='".$res['productID']."' style='display:none'>".$res['description']."</div>";
        }
        echo'</select>';

        ?>
    </div>
</div>
<div class="row-fluid">             
    <div class="span3">
        <label>Description</label>
        <?php echo $desHTML; ?>
    </div>
</div> 
```

现在创建一个js函数并调用选择框的onchange。Js函数提示：

$(".descBox").hide(); $("#"+selectedItemValue).show();

如果您需要有关 JS 功能的任何帮助，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T07:41:10.783

您尚未向我们展示您的 SQL 查询，但我假设您有一个名为**description**的列，并且您也在查询中选择此列。

因此，您可以使用 jQuery 插入所选项目的描述以输入

```
<div class="row-fluid">
<div class="span3">
    <label>SKU</label>
    <?php  echo '<select name="ITEM" id="user" class="textfield1">';

    $js_array = array(); // This variable will contain your Javascript array with descriptions
    while($res= mysql_fetch_assoc($sql))
    {
    echo '<option value="'.$res['productID'].'">';
    echo $res['SKU'] ; 
    echo'</option>';

    // Fill your array with descriptions; ID of item will be the index of array
    $js_array[$res['productID']] = $res['description'];
    }
    echo'</select>';
    ?>
    <script>
    var description;
    <?php
    foreach($js_array as $description => $id)
    {
      echo("description['".$id."'] = '".$description."';\n");
    }
    ?>

    $(document).ready(function(){
      $('#user').change(function(){
        $("#description").val(description[$('#user').val()]);
      })
    });
    </script>
</div>
</div>
<div class="row-fluid">             
    <div class="span3">
        <label>Description</label>
        <input type="text" name="description" id="description" value=""/>
    </div>
</div> 
```

一定不要忘记将`id`属性添加到您的`input type="text"`

# r - 用小于符号减少

> ID：13190844
> 
> 赞同：1
> 
> 时间：2012-11-02T07:08:29.517
> 
> 标签：r, higher-order-functions

我从没想过要使用`Reduce`，但我有一个问题，我认为它会很好。我想确保向量的每个迭代元素的大小等于或大于前一个元素。我可以做到这一点，`sapply`但我的尝试`Reduce`失败了。我怎么能用这个`Reduce`？

```
#This works
y <- c(1,2,3,2,4,4)
sapply(seq_along(y)[-length(y)], function(i) y[i] <= y[i+1])

#attempts
Reduce('<', c(1,2,3,2,4,4)), accumulate = TRUE)
Reduce('<', c(1,2,3,2,4,4))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T09:10:25.523

该`diff()`函数在这里是一个合乎逻辑的选择（其他人已经很好地解释了为什么`Reduce()`不合适）。它已经设置为比较向量元素之间的差异并且已经向量化。

```
> !diff(y) < 0
[1]  TRUE  TRUE FALSE  TRUE  TRUE 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T10:55:41.237

无聊至极？我曾是：

```
myFun <- function(x,z){
  if(is.null(names(z))) names(z) <- z
  if(is.null(names(x))) names(x) <- x
  if(as.numeric(names(x)) < as.numeric(names(z))) res <- TRUE else res <- FALSE
  names(res) <- names(z)
  return(res)
}
as.logical(Reduce(myFun, y, accumulate = TRUE)[-1])
# [1]  TRUE  TRUE FALSE  TRUE  TRUE 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T07:37:33.697

这是我的理解`?Reduce`，`Reduce`比较了第一个和第二个元素。既然`1 < 2`回报`1`. 它将重用`1`，然后将其与第三个元素进行比较，依此类推。这意味着您将始终比较`1 < y[3:length(y)]`结果总是正确的。或者，您可以尝试：

```
head(y,-1) < tail(y, -1) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T08:29:35.960

我不认为它可以像`Reduce`通常那样使用`f(f(x[1],x[2]),x[3])`，所以你对第三个元素的比较将是`TRUE < 3`.

```
identical(y,sort(y)) 
```

对于这个问题，似乎是一个更有效的解决方案。

# installation - 如何删除 installshield 中的依赖项？

> ID：13190845
> 
> 赞同：2
> 
> 时间：2012-11-02T07:08:44.263
> 
> 标签：installation, dependencies, installshield

在构建我的安装屏蔽项目时，我收到以下错误 -

1.  检索依赖项 Microsoft_VC90_CRT_x86.0138F525 时出错...错误代码 - 4072
2.  检索依赖项 policy_9_0_Microsoft_VC90_CRT_x86.521 时出错...错误代码 - 4072

谁能告诉我如何删除这些依赖项？我是安装 shield 的新手，我正在编辑别人的项目，所以任何教程/链接都会有所帮助。我正在使用 Install shield 2012 Premier 版。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:10:36.273

看起来您的项目中包含合并模块。检查您的合并模块，看看是否有任何模块对它有一些依赖关系。此[链接](http://kb.flexerasoftware.com/doc/Helpnet/installshield15helplib/IHelpMergeModules.htm)可能会对您有所帮助。

# javascript - Fancybox - “无法加载请求的内容。”

> ID：13190846
> 
> 赞同：2
> 
> 时间：2012-11-02T07:08:47.190
> 
> 标签：javascript, jquery, ajax, debugging, fancybox

我在我的投资组合中遇到了 Fancybox 的问题。它适用于除一个以外的每一页 - [http://pandadol.com/candyshop.html](http://pandadol.com/candyshop.html)。

图片 7, 8, 9, 11, 12, 13, 23, 24, 25, 27 给我一个“请求的内容无法加载错误”，并在新标签中打开它们返回“您没有访问权限/pics/candyshop/7.jpg 在此服务器上。此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

所有的图像肯定都在服务器上。这是代码 -

```
<script language="javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>

<script type='text/javascript'>

$(document).ready(function(){

// iOS Hover Event Class Fix
if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i))) {
$(".menu").click(function(){  // Update class to point at the head of the list
});

}

});

</script>

<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-24042513-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script>
        !window.jQuery && document.write('<script src="jquery-1.4.3.min.js"><\/script>');
    </script>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
        <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
        <script type="text/javascript" src="/fancybox/jquery.fancybox.pack.js"></script>
</script>

    <!-- Add jQuery library -->
    <script type="text/javascript" src="../lib/jquery-1.8.0.min.js"></script>

    <!-- Add mousewheel plugin (this is optional) -->
    <script type="text/javascript" src="../lib/jquery.mousewheel-3.0.6.pack.js"></script>

    <!-- Add fancyBox main JS and CSS files -->
    <script type="text/javascript" src="../source/jquery.fancybox.js?v=2.1.0"></script>
    <link rel="stylesheet" type="text/css" href="../source/jquery.fancybox.css?v=2.1.0" media="screen" />

    <!-- Add Button helper (this is optional) -->
    <link rel="stylesheet" type="text/css" href="../source/helpers/jquery.fancybox-buttons.css?v=1.0.3" />
    <script type="text/javascript" src="../source/helpers/jquery.fancybox-buttons.js?v=1.0.3"></script>

    <!-- Add Thumbnail helper (this is optional) -->
    <link rel="stylesheet" type="text/css" href="../source/helpers/jquery.fancybox-thumbs.css?v=1.0.6" />
    <script type="text/javascript" src="../source/helpers/jquery.fancybox-thumbs.js?v=1.0.6"></script>

    <!-- Add Media helper (this is optional) -->
    <script type="text/javascript" src="../source/helpers/jquery.fancybox-media.js?v=1.0.3"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            /*
             *  Simple image gallery. Uses default settings
             */

            $('.fancybox').fancybox();

            /*
             *  Different effects
             */

            // Change title type, overlay closing speed
            $(".fancybox-effects-a").fancybox({
                helpers: {
                    title : {
                        type : 'outside'
                    },
                    overlay : {
                        speedOut : 0
                    }
                }
            });

            // Disable opening and closing animations, change title type
            $(".fancybox-effects-b").fancybox({
                openEffect  : 'none',
                closeEffect : 'none',

                helpers : {
                    title : {
                        type : 'over'
                    }
                }
            });

            // Set custom style, close if clicked, change title type and overlay color
            $(".fancybox-effects-c").fancybox({
                wrapCSS    : 'fancybox-custom',
                closeClick : true,

                openEffect : 'none',

                helpers : {
                    title : {
                        type : 'inside'
                    },
                    overlay : {
                        css : {
                            'background' : 'rgba(238,238,238,0.85)'
                        }
                    }
                }
            });

            // Remove padding, set opening and closing animations, close if clicked and disable overlay
            $(".fancybox-effects-d").fancybox({
                padding: 0,

                openEffect : 'elastic',
                openSpeed  : 150,

                closeEffect : 'elastic',
                closeSpeed  : 150,

                closeClick : true,

                helpers : {
                    overlay : null
                }
            });

            /*
             *  Button helper. Disable animations, hide close button, change title type and content
             */

            $('.fancybox-buttons').fancybox({
                openEffect  : 'none',
                closeEffect : 'none',

                prevEffect : 'none',
                nextEffect : 'none',

                closeBtn  : false,

                helpers : {
                    title : {
                        type : 'inside'
                    },
                    buttons : {}
                },

                afterLoad : function() {
                    this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
                }
            });

            /*
             *  Thumbnail helper. Disable animations, hide close button, arrows and slide to next gallery item if clicked
             */

            $('.fancybox-thumbs').fancybox({
                prevEffect : 'none',
                nextEffect : 'none',

                closeBtn  : false,
                arrows    : false,
                nextClick : true,

                helpers : {
                    thumbs : {
                        width  : 50,
                        height : 50
                    }
                }
            });

            /*
             *  Media helper. Group items, disable animations, hide arrows, enable media and button helpers.
            */
            $('.fancybox-media')
                .attr('rel', 'media-gallery')
                .fancybox({
                    openEffect : 'none',
                    closeEffect : 'none',
                    prevEffect : 'none',
                    nextEffect : 'none',

                    arrows : false,
                    helpers : {
                        media : {},
                        buttons : {}
                    }
                });

            /*
             *  Open manually
             */

            $("#fancybox-manual-a").click(function() {
                $.fancybox.open('1_b.jpg');
            });

            $("#fancybox-manual-b").click(function() {
                $.fancybox.open({
                    href : 'iframe.html',
                    type : 'iframe',
                    padding : 5
                });
            });

            $("#fancybox-manual-c").click(function() {
                $.fancybox.open([
                    {
                        href : '1_b.jpg',
                        title : 'My title'
                    }, {
                        href : '2_b.jpg',
                        title : '2nd title'
                    }, {
                        href : '3_b.jpg'
                    }
                ], {
                    helpers : {
                        thumbs : {
                            width: 75,
                            height: 50
                        }
                    }
                });
            });

        });
    </script>

<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox();
    });
</script>

</head>

<body>

    <div id="wrapper">
        <div class="header clear">

            <h1 class="title"><a href="http://pandadol.com/">RACHEL SHI<br></a></h1>
            <h1 class="title">DESIGN + ILLUSTRATION</h1>

            <ul class="menu">
                <li class="first">Menu<div class="droparrow"></div></li>
                <li><a href="http://pandadol.com/info.html">about</a></li>
                <li><a href="http://twitter.com/pandadol">@pandadol</a></li>
                <li><a href="http://pandadol.tumblr.com">pandadol.tumbl</a></li>
                <li><a href="http://pinterest.com/pandadol">pinterest</a></li>
                <li><a href="http://instagrid.me/pandadol">instagram</a></li>
                <li><a href="/cv.pdf">cv</a></li>
            </ul>

        </div>

<div class="content">

            <div class="post-meta">

               <h1>The Candy Shop Project</h1>
               <div class="post-date"> 2012<P>
                                <b>Personal</b><br>
For 5 months I was a sales assistant at a candy shop. I took any lull in activity to draw customers. Here are the results.
               </div>
            </div>

                <div class="post-content">

    <p>
        <a class="fancybox" href="../pics/candyshop/1.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/1.jpg" alt="" / width="600px"></a>

        <a class="fancybox" href="../pics/candyshop/2.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/2_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/3.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/3_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/4.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/4_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/5.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/5_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/6.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/6_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/7.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/7_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/8.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/8_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/9.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/9_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/10.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/10_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/11.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/11_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/12.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/12_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/13.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/13_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/14.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/14_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/15.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/15_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/16.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/16_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/17.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/17_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/19.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/19_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/18.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/18_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/20.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/20_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/21.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/21_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/22.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/22_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/23.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/23_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/24.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/24_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/25.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/25_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/26.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/26_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/27.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/27_s.jpg" alt="" /></a>

        <a class="fancybox" href="../pics/candyshop/28.jpg" data-fancybox-group="gallery"><img src="../pics/candyshop/28_s.jpg" alt="" /></a>

    </p>

             </div> 
```

任何意见，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T08:34:11.553

这看起来像是一个简单的权限错误，因为当您尝试[直接在浏览器中](http://pandadol.com/pics/candyshop/11.jpg)查看其中一个未加载的图像时，您会收到`403 Forbidden`响应。

图片 7 有一个其他`fancybox.ajax`类不存在的附加类，这可能导致您在对原始帖子的评论中提到的问题。

# c++ - 类中的文件声明应该是静态的吗？

> ID：13190848
> 
> 赞同：1
> 
> 时间：2012-11-02T07:09:01.153
> 
> 标签：c++, qt, class, file-io, static

我有一个简单的类，bean 创建了分配，在这个类中，我写入一个中央文件，我用互斥锁保护文件，因为少数类实例可以同时进行写操作。
我没有将文件引用作为参数传递给类。
如果我将文件创建为类中的静态成员怎么办，所以它将被创建一次。
这个会比较好吗 ？这就是我现在所拥有的：

```
CollectorWorker::CollectorWorker()
{
   m_pFileOutput = new QFile("my_result.txt");
   if (!m_pFileOutput->open(QIODevice::WriteOnly
                          | QIODevice::Text | QIODevice::Append))
   {
     LOG_MSG("my_result.txt can't be open")
   } 
}

//header
QFile* m_pFileOutput; 
```

或者这个带静态的

```
QFile* CollectorWorker::m_pFileOutput = new QFile("my_result.txt");
CollectorWorker::CollectorWorker()
{
  if (!m_pFileOutput->open(QIODevice::WriteOnly
                         | QIODevice::Text | QIODevice::Append))
  {
    LOG_MSG("my_result.txt can't be open")
  } 
}

//header
static QFile* m_pFileOutput; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:13:43.403

如果您想要一个由您需要的所有 CollectWorker 对象访问的类（或全局）文件指针，

1.  *甚至在第一个*CollectWorker 对象的构造之外对其进行初始化。一个类静态 Init() 成员（和一个匹配的 Close()）可以做到这一点。
2.  如果是单线程的，您可以通过检查文件指针来在构造函数中按需创建它，以查看它是否已经创建并打开，只有在没有时才这样做
3.  如果是多线程的，则需要一个可以在构造函数输入时锁定的类级互斥锁，检查指针，只有在它为 NULL 时才创建它，然后解锁互斥锁。

我认为奇怪的是，您使用相同的文件*对象*通过多个 CollectWorker 实例引用同一个文件，每个实例都可能期望文件指针处于不同的状态，我认为这只是自找麻烦..如果这是只读的，最好*让*每个 CollectWorker 只用自己的 QFile 指针（非静态）打开同一个文件，保证他们都得到自己的指针，更重要的是，文件中的读取偏移量在运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:12:51.513

在您的情况下，这很好，甚至是首选。所描述情况下的文件是共享资源，应该被视为一个资源（这正是`static`类范围内的内容）。对同一资源拥有多个句柄只会使代码混淆和复杂化。

但是请注意，这在一定程度上限制了代码的灵活性——例如，如果您需要从类的不同实例访问不同的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:22:59.510

由于您使用的是 Qt，因此您可以只使用带有 connection type 的信号和插槽`Qt::QueuedConnection`。这样，您可以创建单个输出类并使用`QObject::connect`. 您将能够取消互斥锁，因为 Qt 事件循环会为您处理所有这些。当然，这假设您的工作线程正在运行它们自己的 Qt 事件循环（最新版本的 Qt 库中的默认值）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T07:18:13.797

当一个类的所有成员都是静态的时，你就失去了 OOP 的主要思想。

您可以用标题中定义的一些函数替换该类。

作为性能，我认为您不会注意到差异。

# cakephp - Cakephp Auth 组件，同一浏览器中的多个用户角色会话

> ID：13190850
> 
> 赞同：2
> 
> 时间：2012-11-02T07:09:10.233
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我正在使用 Cakephp 2.0 和 Auth 组件。我的网站由 2 个用户角色组成，如下所示

```
1\. Admin
2\. User 
```

一次在浏览器中，管理员或用户都可以使用身份验证组件登录网站。无法处理两个用户角色可以在同一浏览器中同时登录网站。有什么办法可以做到 CAKEPHP。现在我的客户想在同一个浏览器中以管理员和用户身份登录。但是在 Joomla 等框架中就有这个功能。非常抱歉这个基本问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:58:26.433

取决于您的角色是如何定义的以及您的管理部分是如何构建的。如果您使用正确的前缀路由 (/admin/:controller/:action/) 完成此操作，那么这很容易。

在您 AppController::isAuthorized() 中添加一个检查

```
if ($this->Auth->user('is_admin') == 1 && $this->request->params['prefix'] == 'admin') {
return true;
} 
```

如果您有一组规则，请使用 in_array() 检查允许的角色。

有关更多详细信息，请[阅读此链接](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html#authorization-who-s-allowed-to-access-what)。

# css - 如何使用创建表 不使用 dispaly:table 的标签

> ID：13190861
> 
> 赞同：0
> 
> 时间：2012-11-02T07:10:09.700
> 
> 标签：css

任何人都可以帮助我绘制一个带有 div 标签的表格，而不使用 asp.net mvc3 中的 display:table 属性。

我想用边框动态创建这个表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:13:21.823

如果它是适合表格数据的表格，则不应尝试使用 div 来创建它。使用表格。

# sql - AS400 上的 Db2 和在不可为空的列上插入的空值？

> ID：13190869
> 
> 赞同：1
> 
> 时间：2012-11-02T07:10:39.060
> 
> 标签：sql, null, db2, ibm-midrange

在处理不可为空的列时，DB2 在 AS400 机器上的行为是否有所不同？

有人刚刚告诉我，如果您将一个空值插入到一个非空的列中，那么在 DB2 as400 上它将起作用（我知道这听起来很奇怪），但如果 Db2 在 Windows 上运行，则会引发错误。

我将在掌握环境后立即验证这一点，仍然想知道是否有人听说过这样的事情。

结束语：这是一个随时间变化的模式......因此该列在不同版本之间发生了变化，这导致了混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:28:27.973

我会说答案是否定的。这是我在 V7R1 上使用交互式 SQL (STRSQL) 执行的快速测试：

```
CREATE TABLE QTEMP/TEST (F1 INT, F2 INT NOT NULL, F3 INT NOT NULL WITH DEFAULT);
INSERT INTO QTEMP/TEST (F1, F2, F3) VALUES(NULL, NULL, NULL);
Null values not allowed in column or variable F2.
INSERT INTO QTEMP/TEST (F1, F2, F3) VALUES(NULL, 0, NULL);
Null values not allowed in column or variable F3. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-26T21:24:25.213

詹姆斯在这里有关于 Nulls 的正确答案。就差异而言，是的，有一些。事实上，DB2 有三种风格，每种都有自己的代码库。这些风格是 DB2 for z、DB for i 和 DB2 for LUW。他们试图使功能集尽可能地接近相同，但是有些东西在一个中，而在另一个中则没有。大多数差异是由于环境的差异造成的。例如，DB2 for i 紧密集成到操作系统中。操作系统已经管理了文件系统和应用程序资源，所以数据库让操作系统做操作系统做的事情，并且不会重复这些工作，所以你不会找到有关表空间等的命令。并不是说文件系统不受管理，而是操作系统而不是数据库引擎来管理。如果您比较 LUW 和 i 文档，您还会发现某些功能的工作方式存在一些差异。这些是具有不同客户群的多个代码库驱动新功能的结果。它们很接近，但并不完全相同，

# extjs - 访问相邻组件/字段的最佳方式

> ID：13190870
> 
> 赞同：7
> 
> 时间：2012-11-02T07:10:51.217
> 
> 标签：extjs, extjs4, extjs4.1

我正在寻找一种访问组件/字段的方法，这些组件/字段要么与访问对象位于相同的项目数组中，要么仅位于相同的父项目数组中（最后一个只是一个选项）。

在 ExtJS3 中，这很容易，只需`ref`在所有者容器中定义 a，但我在 ExtJS4 中没有找到类似的东西。

我知道我可以使用`Ext.ComponentQuery()`或快捷方式`up()`/`down()`甚至`Ext.getCmp()`，但它们都不是我想要的，因为它们只是执行一堆代码，而这`ref`是一种简单的做事方式。是的，我知道使用 ComponentQuery 比使用硬编码引用更安全。但我只想知道是否有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T17:58:00.673

或者，对于获取容器中的下一个元素的情况，您可以使用`nextSibling`or `prevSibling`。所有组件都有这些方法。在 DOM 结构中走动会少一些。它们还允许选择器参数。

它们在[此处](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-method-nextSibling)的文档中进行了描述。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T20:45:52.043

以下是我使用的一些技巧：

```
//lookup by name
formPanel.getForm().findField('state'); 

//lookup using nextSibling/prevSibling in a fieldset or fieldcontainer
myField.ownerCt.nextSibling('textfield[fieldLabel=Description]') 
```

这里`fieldLabel`属性用于缩小字段选择范围，但您可以使用任何属性。因此，如果您构造一个具有属性的字段，`ref`则可以使用它来选择您的字段，类似于在`ComponentQuery`.

# java - 仅更新时间

> ID：13190873
> 
> 赞同：0
> 
> 时间：2012-11-02T07:11:00.560
> 
> 标签：java, datetime

有没有办法只更新日期的时间路径？我试过`Date.setTime()`了，但它也替换了日期路径。我有任何java方法或唯一的方法是设置小时，分钟，秒和毫秒？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:16:23.520

Java`Date`只是`long`从纪元（1970 年 1 月 1 日）开始计算时间的 a 的包装器。更灵活的是[`Calendar`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html). 您可以`Calendar`从 a创建一个`Date`：

```
Date date = . . .;
Calendar cal = new GregorianCalendar();
cal.setTime(date); 
```

然后您可以设置的各个字段`Calendar`：

```
cal.set(Calendar.HOUR_OF_DAY, 8);
// etc. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T07:15:58.207

我会从`java.util.Date`完全远离。理想情况下，使用[Joda Time](http://joda-time.sf.net)，因为它是一个功能*更*强大的日期/时间库。

否则，您应该使用`java.util.Calendar`. *在*您决定您感兴趣的时区之前，A`java.util.Date`没有特定的日期/时间 - 它只代表一个*瞬间*，世界各地的不同人会认为这是一天中不同的日期和时间。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T07:20:03.417

你会想看看[java.util.Calender](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)。

它将允许您更改日期/时间的各个部分。

```
Calendar cal = Calender.getInstance();
cal.setTime(date);
cal.set(Calender.HOUR, hour); 
```

或者，正如已经建议的那样，我会看看[Joda Time](http://joda-time.sourceforge.net/)**

# node.js - 在 Node.js 中防止与数据库相关的竞争条件

> ID：13190885
> 
> 赞同：28
> 
> 时间：2012-11-02T07:12:03.903
> 
> 标签：node.js, mongodb, mongoose

## 概述

我试图了解在使用 Node.js 时使用模型实例时如何确保异步安全。在这里，我在代码示例中使用了 Mongoose ODM，但这个问题适用于将数据库与 Node.js 采用的异步事件驱动 I/O 方法一起使用的任何情况。

考虑以下代码（使用 Mongoose 进行 MongoDB 查询）：

### 片段 A

```
MyModel.findOne( { _id : <id #1> }, function( err, doc ) {
    MyOtherModel.findOne( { _id : someOtherId }, ( function(err, otherDoc ) {
        if (doc.field1 === otherDoc.otherField) {
            doc.field2 = 0; // assign some new value to a field on the model
        }
        doc.save( function() { console.log( 'success' ); }
    });
}); 
```

在应用程序的单独部分中，可以更新 MyModel 描述的文档。考虑以下代码：

### 片段 B

```
MyModel.update( { _id : <id #1> }, { $set : { field1 : someValue }, callback ); 
```

在 Snippet A 中，发出一个 MongoDB 查询，并在文档准备好后触发一个已注册的回调。MyModel 描述的文档实例保留在内存中（在“doc”对象中）。可能会出现以下顺序：

1.  **片段 A**执行
2.  为 MyModel 发起一个查询，注册一个回调（回调 A）供以后使用
3.  *<< Node 事件循环运行 >>*
4.  从数据库中检索MyModel，执行注册的回调（回调A）
5.  为 MyOtherModel 发起一个查询，注册一个回调供以后使用（回调 B）
6.  *<< Node 事件循环运行 >>*
7.  **片段 B**执行
8.  文档 (id #1) 已更新
9.  *<< Node 事件循环运行 >>*
10.  MyOtherModel 从数据库中获取，执行注册的回调（callback B）
11.  在比较中错误地使用了文档的旧版本（id #1）。

## 问题

1.  是否有任何保证不会在 Node.js/MongoDB 中发生这种类型的竞争条件？
2.  我能做些什么来确定性地防止这种情况发生？

虽然 Node 以单线程方式运行代码，但在我看来，任何允许运行事件循环的行为都会为潜在的陈旧数据打开大门。如果这种遵守是错误的，请纠正我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-02T12:25:00.367

不，不能保证这种类型的竞争条件不会在 node.js/MongoDB 中发生。虽然它与 node.js 没有任何关系，而且这对于任何支持并发访问的数据库都是可能的，而不仅仅是 MongoDB。

然而，使用 MongoDB 解决这个问题比较棘手，因为它不像典型的 SQL 数据库那样支持事务。因此，您必须在应用程序层中使用类似于[此处](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/)MongoDB 食谱中概述的策略来解决它。

# sql - 如何在单个sql行中获取所有用户名

> ID：13190890
> 
> 赞同：0
> 
> 时间：2012-11-02T07:12:23.117
> 
> 标签：sql, oracle, jdbc

> **可能重复：**
> [是否存在将多行聚合为一行的 Oracle SQL 查询？](https://stackoverflow.com/questions/1120706/is-there-an-oracle-sql-query-that-aggregates-multiple-rows-into-one-row)

我有以下输出用于我的 sql 查询以从 oracle 表中获取用户详细信息

```
 Select distinct userid from Scope1

USERID 
Rakesh 
Admin 
```

我希望输出如下所示，以便我可以更轻松地进行查询。请帮我。

```
USERID
'Rakesh','Admin' 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:22:33.790

尝试使用**LISTAGG**，Tim Hall 在[这里有很好的文档](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)

```
 select LISTAGG(''''||userid||'''', ',')
   WITHIN GROUP (ORDER BY userid) userid
   from Scope1 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!4/e7810/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:16:15.250

下面的查询选择逗号分隔格式的数据：

```
SELECT 
   RTRIM (XMLAGG (XMLELEMENT (E, userid || ',')).EXTRACT ('//text()'), ',') AS UserID
FROM Scope1 ; 
```

使用 wm_concat 怎么样：

```
SELECT wm_concat(''''||userid||'''') FROM Scope1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T07:19:10.543

看一下内置的 LISTAGG 函数：

[http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T07:15:13.540

您需要一个在查询中执行循环的函数。该函数将返回您需要的数据的逗号分隔值。就像是：

```
str1 := '';
for rec in (select distinct userid from Scope1) 
loop
  str1 := str1 || rec.userid || ', ';
end loop;
str1 := substr(str1, 1, length(str1) - 2); 
```

# xml - 为什么这个 XSLT 对 XML 值不返回任何内容？

> ID：13190893
> 
> 赞同：0
> 
> 时间：2012-11-02T07:12:40.037
> 
> 标签：xml, xslt, xsd

将 XSLT 应用于 XML 后，我想显示 XML 中的项目名称和描述，我只显示表格标题，似乎 XML 中的名称和描述没有被拾取，有人知道为什么吗？与“tns:”命名空间有什么关系？？谢谢！！

这是XML

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="./LittleStore.xsl"?>
<tns:store xmlns:tns="http://www.example.org/LittleStore/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.example.org/LittleStore/ LittleStore.xsd ">

  <tns:item>

    <name>Warm Hat</name>
    <description>This hat is warm and will mike you stand out from the crowd.</description>

  </tns:item>

  <tns:manufacturer>
    <manu_id>4234</manu_id>
    <name>Toy Co.</name>
  </tns:manufacturer>

</tns:store> 
```

这是 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version="1.0" xmlns:tns="http://www.example.org/LittleStore/" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
  <h2>Store Catalog</h2>
  <table border="1">
    <tr bgcolor="#9acd32">
      <th>Item Name</th>
      <th>Description</th>
    </tr>
    <xsl:for-each select="store/item">
    <tr>
      <td><xsl:value-of select="name"/></td>
      <td><xsl:value-of select="description"/></td>
    </tr>
    </xsl:for-each>
  </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:02:17.497

解决方案：我添加了 tns:store/tns:item。

顺便说一句，如果我添加 tns:name 或 tns:description 它实际上会为表格提供空单元格。

# java - 如何确定我的应用程序是哪一种？（java富互联网应用程序）

> ID：13190896
> 
> 赞同：-7
> 
> 时间：2012-11-02T07:12:44.823
> 
> 标签：java, applet

小程序应用程序和网络启动应用程序的黑白基本区别是什么？在浏览器上下文中运行是什么意思？根据我的观察，applet 和 web start 都在浏览器的上下文中运行，但根据 oracle 文档 web start 不在浏览器的上下文中运行？谁能详细解释一下....提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:15:54.457

小程序在浏览器内运行，使用插件，由 HTML 小程序标签控制。这类似于 Flash 电影。

Web Start 应用程序是从 Internet 加载的，并在某种沙盒环境中运行，但它们基本上是独立的桌面应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:15:53.990

Web 启动应用程序通过 http 交付，但不需要浏览器即可运行。然而，小程序在 Web 浏览器的上下文中运行。

有关详细说明，请参阅[http://en.wikipedia.org/wiki/Java_Web_Start](http://en.wikipedia.org/wiki/Java_Web_Start)。

# javascript - 在javascript中比较日期和时间

> ID：13190906
> 
> 赞同：-5
> 
> 时间：2012-11-02T07:13:31.967
> 
> 标签：javascript

> **可能重复：**
> [用 JavaScript 比较日期](https://stackoverflow.com/questions/492994/compare-dates-with-javascript)

我想从 2 个带有时间的日期中找出哪一个更大，该日期在 javascript 中采用以下格式

日期 1=2-11-2012 13:40:00 日期2=01-11-2012 10:40:00

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T07:14:57.003

希望你能学到一些东西...

*   使用构造函数创建`Date`对象。[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)
*   了解比较运算符如何在内部调用[`valueOf()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/valueOf)，以及这对对象[意味着什么](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)`Date`。
*   了解[比较运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)的工作原理（例如`>`）。
*   了解条件及其[布尔](http://en.wikipedia.org/wiki/Boolean_data_type)输出。

然后，您可能会想出类似...

```
var isLarger = new Date("2-11-2012 13:40:00") > new Date("01-11-2012 10:40:00"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:16:52.600

```
var x=new Date();
x.setFullYear(2100,0,14);
var y=new Date();
y.setFullYear(2100,0,20);

if (x>y)
{
 alert("Message1");
}
else
{
alert("Message2");
} 
```

# c++ - 使用 pthread_create() 创建超过 1000 个线程

> ID：13190910
> 
> 赞同：2
> 
> 时间：2012-11-02T07:13:52.540
> 
> 标签：c++, posix

我正在尝试使用该`pthread_create()`函数创建 1000 个线程。

这是我正在使用的语句：

```
for (int i=0 ; i <1000; i++)
{
   retValue = pthread_create(&threadId, NULL, simplethreadFunction, NULL);
} 
```

每次这个 for 循环运行时，它会创建一个新线程吗？

这是一件简单的事情。但我无法理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:59:48.993

> 每次这个 for 循环运行时，它会创建一个新线程吗？

是的，它确实。

> 这是一件简单的事情。但我无法理解。

我再补充几点：

1.  函数 pthread_create 的第一个参数是指向 pthread_t 的指针类型。基本上，您将一个地址传递给该函数，该函数用于分配“某物”。

    当这个函数创建一个线程时，会为这个线程创建一个“不透明的唯一标识符”，并让您传递的指针指向这个位置，以便您以后可以在需要时访问它。

2.  如果您将所有 1000 次传递相同的指针，您将只能访问所有 1000 个线程中创建的一个（最后一个）线程的唯一标识符，因为每次前一个值都会被覆盖。

3.  如果您想在线程上执行进一步的操作（如加入等），则需要此唯一值。

4.  有关此函数和其他线程相关函数的详细信息，您可以查看[this](https://computing.llnl.gov/tutorials/pthreads/man/pthread_create.txt)和[this](https://computing.llnl.gov/tutorials/pthreads/)。

5.  不要忘记在你的主上下文中调用 pthread_exit ，否则完整的程序（包括创建的线程）可能会在所有线程完成之前终止。

同样关于时间，据我所知，这件事可能对创建时间没有任何影响，只会降低您创建的线程的可用性。此外，您计算的这个时间不是创建 1000 个线程的时间，这将取决于许多其他因素，如平台/实现等。

# jquery - 在 jQuery .attr() 中分配时，CSS 类没有得到应用

> ID：13190915
> 
> 赞同：-3
> 
> 时间：2012-11-02T07:14:18.723
> 
> 标签：jquery, css, attributes

我正在使用 jQuery 操作链接的 data-complete-text 属性。我的代码看起来像这样。

```
var complete =  _self.attr("data-complete-text");

_self.attr("data-complete-text","<span class='symbol-done-tick'></span><span class='acheived-text'>"+complete+"</span>"); 
```

那就是我将 html 跨度分配给该属性以获得所需的效果，并且它工作正常。我的意思是，跨度被正确插入，但我在这些跨度中指定的 CSS 类没有任何效果。我不知道为什么。帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:26:08.353

如果您尝试设置`data-complete-text`以便 Bootstrap[`Button`](http://twitter.github.com/bootstrap/javascript.html#buttons)将使用它，则在设置`data-complete-text`属性后，您还必须设置按钮的状态：

```
_self.button('complete'); 
```

文档（例如它）并没有*说它*在那里支持 HTML，但它似乎在我的测试中有效：[Live Example](http://jsbin.com/ajokox/2) | [来源](http://jsbin.com/ajokox/2/edit)

HTML：

```
<button id="target" type="button" class="btn btn-primary" data-loading-text="Loading...">Original Text</button> 
```

JavaScript：

```
jQuery(function($) {

  // Get the button
  var _self = $("#target");

  // Set the attribute
  _self.attr("data-complete-text",
             "<span class='foo'>Complete</span>");

  // Wait for click
  _self.one("click", function() {

    _self.button('complete');
  });

}); 
```

在上面，当您将按钮状态设置为 时，内部的`foo`类起作用。`span``data-complete-text``'complete'`

# go - 如何从对象的构造函数中提取此变量的初始化？

> ID：13190921
> 
> 赞同：2
> 
> 时间：2012-11-02T07:15:04.257
> 
> 标签：go, state-machine

我正在编写我的第一个 Go 程序，一个 SMTP 服务器，我认为使用 FSM 来表示网络协议的状态转换会很优雅。我真的很喜欢[这个 haskell SMTP FSM 示例](http://hackage.haskell.org/packages/archive/hsemail/1.7.2/doc/html/src/Text-ParserCombinators-Parsec-Rfc2821.html#smtpdFSM)，所以我在此之后对其进行了松散的建模。

我[创建了一个简单的 FSM 类型](http://play.golang.org/p/M6KRRBd_c7)，它接受一个转换表作为其构造函数参数，并有一个 Run 方法，该方法接受一个事件并将调用它在状态表中匹配的适当处理函数。然后我有一个“会话”类型，这是在处理来自其连接的传入 SMTP 命令后需要使用 FSM 的类型。

这是 FSM 转换的样子：

```
type Transition struct {
    from    State
    event   Event
    to      State
    handler func() string
} 
```

然后，在我的 Session 对象中，我被迫在其构造函数中定义转换表，以便我可以访问其用于转换操作的方法：

```
func (s *SmtpSession) NewSession() {
    transitions := []Transition{    
        {Initial, Rset, Initial, sayOk},
        {HaveHelo, Rset, HaveHelo, sayOk},
        {AnyState, Rset, HaveHelo, resetState},

         ...

        {Initial, Data, Initial, needHeloFirst},
        {HaveHelo, Data, HaveHelo, needMailFromFirst},
        {HaveMailFrom, Data, HaveMailFrom, needRcptToFirst},
        {HaveRcptTo, Data, HaveData, startData},
    }
    smtpFsm = StateMachine.NewMachine(transitions)
} 
```

当所有会话将具有基本相同的 FSM 时，必须在每个会话中创建此 FSM 的实例似乎很浪费。我宁愿只拥有某种“静态” FSM，它可以被赋予一个转换表，然后 Run 方法将采用当前状态和一个事件并返回结果“动作”函数。

然而，这就是我遇到麻烦的地方。因为所有的处理函数实际上都是 Session 对象的方法，所以我*必须*在 Session 中定义它。我想不出一种方法可以只为所有会话定义一次转换表，并且仍然可以适当地访问我需要的会话处理程序函数。

如果我以直接的程序风格编写这个程序，那么我就不会遇到任何这些问题。FSM 可以直接访问所有处理函数。

我唯一能想到的是将我的 FSM 更改为不返回函数指针，而是返回一些任意常量，然后 Session 将映射到适当的函数：

```
var transitions = []Transition{
    {Initial, Rset, Initial, "sayOk"},
    {HaveHelo, Rset, HaveHelo, "sayOk"},
    {AnyState, Rset, HaveHelo, "resetState"},
    ...
}

var smtpFsm = NewStateMachine(transitions)

func (s *Session) handleInput(cmd string) {
    event := findEvent(cmd)
    handler := findHandler(smtpFsm.Run(s.currentState, event))
    handler(cmd)   
}

func (s *Session) findHandler(handlerKey string) {
    switch handlerKey {
    case "sayOk":
        return sayOk
    case "resetState":
        return resetState
    }
} 
```

这将解决必须为每个会话重新初始化一个新的 FSM 的问题，但它也感觉有点 hackish。有人对我如何避免这个问题有任何建议吗？这是演示问题[的不完整 Session.go 的链接。](http://play.golang.org/p/aMtl-AaSlz)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T01:30:35.563

如果您的处理程序不是方法，而是将实例作为参数的函数，那么整个事情会变得*容易得多。*这大致相同，但是您可以进行某种`type State func(Session) State`设置，并且可以更轻松地考虑它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T08:36:51.020

我不确定这个总体想法有多骇人听闻。随着关注点的分离，您的状态机只是发出一个令牌，并且不知道稍后将如何使用它。在您的`handleInput`方法中，您将使用该令牌来执行一个操作，在这种情况下是在您的会话对象上找到适当的方法。

但整件事对我来说似乎结束了。您有一个想要了解的转换表`Session`。我猜你有一个包`fsm`，我猜它做的很少，但也想知道，`Session`因为它依赖于转换表以使包有任何用途。

我会说要么切断链接并发出一个`const`可`Session`用于找到合适方法的方法，走更程序化的路线，或者将位合并得更近（可能涉及放弃转换表）。

或者，如果您真的想走低效的路线，请`findHandler`按名称反映适当的方法并删除该 switch 语句，但这只是为了好玩:)

您还可以考虑一些替代实施方案。标准库中有很多很好的例子。查看文本/模板的包文件：

[http://golang.org/src/pkg/text/template/parse/lex.go](http://golang.org/src/pkg/text/template/parse/lex.go)

[http://golang.org/src/pkg/text/template/parse/parse.go](http://golang.org/src/pkg/text/template/parse/parse.go)

我所说的要点是，正如您已经指出的那样，如果您希望在函数之外定义转换表，您将需要引用令牌或函数，而不是你没有的实例。但是为了好玩，使用类似下面的东西，然后你可以`Action("sayOk")`在你的转换表中说，并传递`Session`给交付的结果函数。

```
package main

import (
    "fmt"
    "reflect"
)

type Foo struct{}

func (f *Foo) Bar() string {
    return "hello"
}

func Action(name string) func(f *Foo) string {
    return func(f *Foo) string {    
        s := reflect.ValueOf(f).MethodByName(name).Call([]reflect.Value{})
        return s[0].String()
    }
}

func main() {
    f := &Foo{}
    a := Action("Bar")
    fmt.Println(a(f))
} 
```

# android - 在不同的命名空间中生成多个 R 文件（Eclipse 中的 Android）

> ID：13190925
> 
> 赞同：0
> 
> 时间：2012-11-02T07:15:15.970
> 
> 标签：android, eclipse

我正在使用一个库，它需要 R 中的几个 id 和值。问题是它被硬编码到 R 所在的命名空间中的库中。

我可以通过将 R 类复制到另一个命名空间来解决问题，但自动生成两个 R 文件会更容易。

另一种解决方案可能是某种包装类，这里的问题是值必须是常量。

也许每次生成 R 时都运行某种脚本？我怎么能那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:24:51.960

您可以为此使用 ANT 脚本。

但是您打算使用 2 个不同的 R 文件是什么？如果您正在创建应用程序的 2 个版本，您可以让 ANT 脚本在构建/发布时创建单独的项目，然后您可以继续在当前项目中进行开发。

# c# - 如何在我的 ComboBox 中检查所需的 ValueMember？

> ID：13190926
> 
> 赞同：0
> 
> 时间：2012-11-02T07:15:20.887
> 
> 标签：c#, winforms, visual-studio-2010, combobox, datatable

我是 C# 新手。我有一个`Combo Box` `cmbDoctor`。它与`DataTable`

```
display member
       --> Name
 Value Member
       -->  ID       Name ,ID are table column Names 
```

我的问题是我添加了一个新选项卡`tabPageUpdate`
当我点击`Specified ID`时`tabPageUpdate`我想`Combobox`选择`display Name`

如果有人知道如何做到这一点，请为此提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:18:03.397

您只需要设置 的`Text`属性，`ComboBox`就会`Value`自动设置。

```
cmbDoctor.Text = "Some Name"; 
```

# php - 从数组中移除对象；如何避免空值

> ID：13190927
> 
> 赞同：0
> 
> 时间：2012-11-02T07:15:26.847
> 
> 标签：php, arrays, class, object

我有一个数组，它是我在会话中携带的对象`lifeFleetSelectedTrucksList` 我也有类对象`fleetUnit`

```
class fleetUnit {
    public $idgps_unit = null;
    public $serial = null;
}

class lifeFleetSelectedTrucksList {
    public $arrayList = array();
}

$listOfTrucks = new lifeFleetSelectedTrucksList(); //this is the array that I carry in session
if (!isset($_SESSION['lifeFleetSelectedTrucksList'])) {
    $_SESSION['lifeFleetSelectedTrucksList'] == null; //null the session and add new list to it.
} else {
    $listOfTrucks = $_SESSION['lifeFleetSelectedTrucksList'];
} 
```

我用它从数组中删除元素：

```
$listOfTrucks = removeElement($listOfTrucks, $serial); 
```

这是我的函数，它删除元素并返回没有元素的数组：

```
function removeElement($listOfTrucks, $remove) {
    for ($i = 0; $i < count($listOfTrucks->arrayList); $i++) {
        $unit = new fleetUnit();
        $unit = $listOfTrucks->arrayList[$i];
        if ($unit->serial == $remove) {
            unset($listOfTrucks->arrayList[$i]);
            break;
        } elseif ($unit->serial == '') {
            unset($listOfTrucks->arrayList[$i]);
        }
    }
    return $listOfTrucks;
} 
```

好吧，它有效 - 元素被删除，但我有一个包含一堆空值的数组。如何返回不包含空元素的数组？似乎我没有起诉正确的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:21:26.550

我认为您的意思是数组键不再连续。数组在 PHP 中没有“空值”，除非您将值设置为`null`.

```
$array = array('foo', 'bar', 'baz');
// array(0 => 'foo', 1 => 'bar', 2 => 'baz');

unset($array[1]);

// array(0 => 'foo', 2 => 'baz'); 
```

对此有两种方法：

1.  使用 循环遍历数组`foreach`，而不是“手动”`for`循环，那么键是什么都没关系。
2.  用 重置键[`array_values`](http://php.net/array_values)。

此外，从列表中删除卡车确实应该是一种方法`$listOfTrucks`，例如`$listOfTrucks->remove($remove)`. 您已经在使用对象，充分发挥它们的潜力！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:19:40.577

您可以使用[array_filter](http://php.net/manual/en/function.array-filter.php)

```
<?php

$entry = array(
         0 => 'foo',
         1 => false,
         2 => -1,
         3 => null,
         4 => ''
      );

print_r(array_filter($entry));
?> 
```

输出：

```
Array
(
[0] => foo
[2] => -1
) 
```

# ios - 如何在ios中找出相机的焦距以及传感器高度是多少？

> ID：13190932
> 
> 赞同：8
> 
> 时间：2012-11-02T07:15:47.623
> 
> 标签：ios

我到处寻找相机的焦距和背面传感器的高度。但我没有得到任何具体细节。

我正在开发一个应用程序，它将根据从 ios 相机捕获的图像中可见的高度计算现实世界对象的实际高度。

到物体的距离 (mm) =

焦距（mm）*物体实际高度（mm）*图像高度（像素）------------------------------ ---------------------------------------------
对象高度（像素） * 传感器高度 (mm)

在这里，我将到对象的距离值设置为静态图像高度（以像素为单位）。现在我需要焦距和传感器高度来找出真实的物体高度。

提前致谢。布斯卡尼亚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-16T12:12:02.840

### EXIF 标头

iOS 设备在 JPEG EXIF 标头中提供相机的焦距值。它在`iPhoto`任何其他工具中都是可见的。

### 以编程方式检索它的选项

*   [Apple 技术问答 QA1622](https://developer.apple.com/library/ios/qa/qa1622/_index.html)讨论 ALAssetsLibrary
*   [访问图像属性](http://oleb.net/blog/2011/09/accessing-image-properties-without-loading-the-image-into-memory/)使用 CGImageSourceRef

EXIF 标头键列表可以在[CGImageProperties Reference](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGImageProperties_Reference/index.html#//apple_ref/doc/constant_group/EXIF_Dictionary_Keys)中找到。

```
NSURL *imageFileURL = [NSURL fileURLWithPath:...];
CGImageSourceRef imageSource = CGImageSourceCreateWithURL((CFURLRef)imageFileURL, NULL);
if (imageSource == NULL) {
    // Error loading image
    ...
    return;
}

NSDictionary *options = @{kCGImageSourceShouldCache, @NO};
CFDictionaryRef imageProperties = CGImageSourceCopyPropertiesAtIndex(imageSource, 0, (CFDictionaryRef)options);
if (imageProperties) {
    NSNumber *width = (NSNumber *)CFDictionaryGetValue(imageProperties, kCGImagePropertyPixelWidth);
    NSNumber *height = (NSNumber *)CFDictionaryGetValue(imageProperties, kCGImagePropertyPixelHeight);
    NSLog(@"Image dimensions: %@ x %@ px", width, height);
    CFRelease(imageProperties);
}
CFRelease(imageSource); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T04:40:09.957

解决这个问题的方法。

首先获取一个真实世界的对象及其测量值，即高度和宽度。（可乐杖示例）现在拍摄您要测量的对象的快照。对于 iphone 或 ipad，焦距固定为 25mm。现在将您想要测量的对象框起来，并根据您想要测量的对象重新调整真实世界的可乐杖图像的大小。

使用等式

object_distance = (focal * real_object_height)/object_height;

这里，real_object_height = 可乐高度；和 object_height = 可乐手调整高度

并相应地使用方程测量物体的高度

height_of_frame = ((obj_distance) * measure_object_height_in_mm / 1000.0))/focal；

width_of_frame = ((obj_distance) * measure_object_width_in_mm / 1000.0))/focal；

通过这种方式，您可以找出物距及其测量值。但是您需要两个静态数据，即您正在使用的相机的焦距和一个真实世界的对象测量值来比较。

谢谢，bskania。

# ruby-on-rails-3 - Heroku在线语法错误不存在

> ID：13190933
> 
> 赞同：1
> 
> 时间：2012-11-02T07:15:49.607
> 
> 标签：ruby-on-rails-3, heroku

我有一个带有 Haml 视图的 Rails 应用程序，它在本地和另一台主机上运行良好。但是在部署到 Heroku 之后，第一个请求得到一个错误，查看下面的日志：

```
Started GET "/" for 88.159.5.1 at 2012-11-02 07:03:56 +0000
- - Processing by SessionsController#new as HTML
- - Rendered sessions/new.html.haml within layouts/application (403.5ms)
- - Completed 500 Internal Server Error in 497ms
- - ActionView::Template::Error (syntax error on line 18, col 4: `all:  all'):                                      
- -     1: .sixteen.columns
- -     2:   #loginblock
- -     3:     .content_title.general
- -     4:     %h2= I18n.t :login_title
- -     5:     .content
- -     6:       = render("layouts/message")
- -     7:       = form_tag(sessions_path, :class => 'form') do
- -   app/views/sessions/new.html.haml:4:in `_app_views_sessions_new_html_haml___1472882735787050115_50827800' 
```

奇怪的是：该视图中不存在第 18 行，它只有 17 行。在第 4 行我没有发现任何问题？可能与 Haml 或 Haml gem 无法正常工作有关？请参阅下面的视图文件。感谢您的任何意见！

```
.sixteen.columns
  #loginblock
    .content_title.general
    %h2= I18n.t :login_title
    .content
      = render("layouts/message")
      = form_tag(sessions_path, :class => 'form') do
        .field
          = label_tag I18n.t :form_email
          = text_field_tag :email
        .field
          = label_tag I18n.t :form_password
          = password_field_tag :password
        .field
          = submit_tag I18n.t(:login_title), :class => 'button white'
        .clear 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:35:12.930

找到了：yaml文件中的缩进是4个空格而不是2个，所以层次太深了。出于某种原因，我的本地 Rails 设置接受了这一点，但 Heroku rails 设置不接受。所以在纠正了缩进之后，Heroku 上一切正常。

# c# - 如何将字符数组的一部分转换为字符串

> ID：13190938
> 
> 赞同：18
> 
> 时间：2012-11-02T07:15:56.053
> 
> 标签：c#

我想将 char 数组的一部分转换为字符串。最好的方法是什么。

我知道我可以为整个数组执行以下操作

```
char[] chars = {'a', ' ', 's', 't', 'r', 'i', 'n', 'g'};
string s = new string(chars); 
```

但是例如只有元素 2 到 4 呢？

我也知道我可以遍历数组并提取它们，但我想知道是否有更简洁的方法。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-02T07:18:38.967

使用带有 char 数组、索引和长度的[`String`构造函数重载：](http://msdn.microsoft.com/en-us/library/ms131424.aspx)

```
String text = new String(chars, 2, 3); // Index 2-4 inclusive 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:38:52.693

您可以使用 LINQ

```
char[] chars = { 'a', ' ', 's', 't', 'r', 'i', 'n', 'g' };
string str = new string(chars.Skip(2).Take(2).ToArray()); 
```

但是当然[字符串重载的构造函数](http://msdn.microsoft.com/en-us/library/ms131424.aspx)是要走的路

# mysql - 带有 sfPropelORMPlugin 和 MySQL 复制的 Symfony 1.4

> ID：13190942
> 
> 赞同：1
> 
> 时间：2012-11-02T07:16:09.793
> 
> 标签：mysql, symfony1, replication, propel

我用最新版本的 sfPropelORMPlugin 升级了我的 symfony 1.4 项目，并根据以下内容创建了我的 runtime-conf.xml：http: [//www.propelorm.org/cookbook/replication.html](http://www.propelorm.org/cookbook/replication.html)并打算将我的 sql 写入大师和从奴隶那里读到。

我正在使用 symfony propel:build-model 重建我的模型，一切正常，但写入/读取 SQL 语句都发送到主控。我不确定我是否理解 propel 如何在 symfony 框架中使用 runtime-conf.xml。

我错过了一个额外的步骤吗？

# perl - 如何使用perl获取压缩gz文件的修改时间

> ID：13190946
> 
> 赞同：0
> 
> 时间：2012-11-02T07:16:16.880
> 
> 标签：perl, gunzip

我有数千个 gz 文件，每个 gz 文件都有一个压缩的 XML 文件。
我需要通过 Perl 解析所有文件。
使用以下 Perl 代码时它工作正常：

```
my $fh = IO::Uncompress::Gunzip->new($file);  
while($_ = <$fh>) {  
    ...  
} 
```

我的问题是，是否可以获得 XML 文件的最后修改时间？我试过`stat($fh))[9]`但总是返回纪元时间。

感谢您的热心帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:39:06.777

采用：

```
stat($file)[9] 
```

Gunzip 流没有修改时间，只有实际文件有。

# xpath - XPath 查询：查询未按预期工作

> ID：13190948
> 
> 赞同：1
> 
> 时间：2012-11-02T07:16:24.083
> 
> 标签：xpath

我正在使用以下 xml 文档学习 XPath：http: [//www.w3schools.com/xpath/xpath_examples.asp](http://www.w3schools.com/xpath/xpath_examples.asp)

现在，当我执行查询时：

```
bookstore/book/author[contains(.,'G')] 
```

我得到了结果：`Giada De Laurentiis, James McGovern`正如预期的那样。现在，由于`contains()`返回一个布尔值，我希望以下查询返回所有作者：

```
bookstore/book/author[true] 
```

但是，它返回一个空集。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:18:07.490

你需要`bookstore/book/author`

**更新**：传递`true`给`XPATH`你必须使用`bookstore/book/author[true()]`
`author[true]`只是意味着你想要获得所有`author`具有子元素的`true`元素。

可以自己查，试试表情

`bookstore/book[author1]`对比`bookstore/book[author]`

第一个没有返回任何内容，因为没有`book`包含子元素的`author1`元素。第二个返回所有元素。但是如果你`author`从一些书籍节点中删除子节点，你将只得到那些有子节点的`author`。

所以如果你像这样使用xml

```
<bookstore>
    <book category="COOKING">
        <title lang="en">Everyday Italian</title>
        <author>Giada De Laurentiis</author>
        <year>2005</year>
        <price>30.00</price>
    </book>
    <book category="CHILDREN">
        <title lang="en">Harry Potter</title>
    </book>
</bookstore> 
```

然后 `bookstore/book[author]`返回

```
<book category="COOKING">
  <title lang="en">Everyday Italian</title>
  <author>Giada De Laurentiis</author>
  <year>2005</year>
  <price>30.00</price>
</book> 
```

并`bookstore/book[title]`返回

```
<book category="COOKING">
  <title lang="en">Everyday Italian</title>
  <author>Giada De Laurentiis</author>
  <year>2005</year>
  <price>30.00</price>
</book>
<book category="CHILDREN">
  <title lang="en">Harry Potter</title>
</book> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:45:59.370

> 我希望以下查询返回所有作者：
> 
> ```
> bookstore/book/author[true] 
> ```
> 
> 但是，它返回一个空集。有人可以解释一下吗？

上面的表达式选择所有`bookstore/book/author`具有名为 的子元素的元素`true`。在提供的 XML 文档中，没有`author`元素有一个名为的子元素`true`——因此 XPath 表达式没有选择任何内容。

**在评论中，OP 询问**：

> 但是为什么不起作用`bookstore/book/author[true]`，因为if类似于`contains()`总是返回true时的情况

`contains()`从不返回（字符串）“true”——它返回*布尔*值`true()`——这与字符串“true”不同。

**说明**：

`true()`您对布尔值序列化为字符串是字符串“true”这一事实感到困惑。

这个事实并不意味着字符串“true”和布尔值`true()`是相同的。

# drupal - drupal feed导入ajax错误

> ID：13190949
> 
> 赞同：1
> 
> 时间：2012-11-02T07:16:26.907
> 
> 标签：drupal, import, drupal-feeds

我使用drupal 7.x并提供7.x-2.0-alpha7 ...当我使用导入器导入具有多行1300+的csv时，我收到此错误

```
Ajax error Result Code: 200 ... StatusText: OK ResponseText: 
```

问题是错误以一种奇怪的方式重复..如果我采用 300 行的 csv 并添加它...错误将主要显示...但在少数情况下它会消失，而无需更改 csv 或任何东西。 ..如果我再次多次导入相同的csv，有时会起作用....

关于这个错误的另一个奇怪的事情是它以某种方式阻止了导入器，如果我在他给出错误后尝试使用导入器，按钮“导入”被禁用并且它上面的文本变为“importing33%”之类的东西

我已经尝试自己解决此错误，但我找不到模式或何时或什么原因导致此错误弹出，通常对于 ajax 错误会给出一个显示问题所在的 repsonsetext...但我没有得到任何文本

# r - 如何在 R 包中找到已编译的函数源代码？

> ID：13190952
> 
> 赞同：0
> 
> 时间：2012-11-02T07:16:41.883
> 
> 标签：r

例如，我正在研究一个名为 的包中的`R`函数`PTdensity.R`源代码`DPpackage`，我发现作者在其中调用了一个`fortran`函数`ptdensityu`：

```
 foo <- .Fortran("ptdensityu", ... 
```

问题是如何找到`ptdensityu`子程序的源代码。它可能包含在目录中的某个 fortran 文件中`/src/`，但我怎么知道它是哪个文件。（其实我是通过手动检查下的每个文件`/src/`找到的，发现它在`/src/PTudensity.f`.）

包的快速链接：[链接](http://cran.r-project.org/web/packages/DPpackage/index.html)

PS：我曾经使用这个[链接](http://rgm2.lab.nig.ac.jp:8080/source/search?q=loglik_unippt&project=R&defs=&refs=&path=&hist=)来搜索源代码，但不知何故它不再工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:44:15.577

在 linux 机器上，您使用`grep`命令。在 emacs 中，您构建一个标签文件。在其他编辑器中可能有类似的功能。在 Windows 中，您不能右键单击文件夹，点击搜索...并填写“文件中的单词或短语”框。或者安装 cygwin 并使用`grep`命令。

令我惊讶的是，人们使用的计算机没有基本技能，例如在文件中查找字符串......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:40:58.720

你解压[了这个](http://cran.r-project.org/src/contrib/DPpackage_1.1-6.tar.gz)......

（这是 PTudensity.f 中的第一个子程序）

# c# - 无法单步执行 foreach 循环

> ID：13190957
> 
> 赞同：2
> 
> 时间：2012-11-02T07:17:00.227
> 
> 标签：c#, .net

```
private async void Clicked(object sender, RoutedEventArgs e)
{
    StorageFolder s;
    s = KnownFolders.DocumentsLibrary;
    IReadOnlyList<StorageFile> l = await s.GetFilesAsync();
    bool exists=false;
    foreach (StorageFile sf in l)
    {
        if (string.Equals(sf.Name, "encrypted.txt", StringComparison.CurrentCultureIgnoreCase))
            exists = true;
    }
    MessageDialog d = new MessageDialog(exists.ToString());
    await d.ShowAsync();
} 
```

调试代码时，我无法单步执行`foreach`循环内的代码

虽然在循环结束时存在的值是正确的，如果我将`MessageDialog`代码放入循环中，我可以看到循环执行，知道如何正确地进入循环吗？

即使我将`MessageDialog`代码放入循环中，我也无法进入 if 条件，所以我怀疑问题出在某个地方

**编辑**：在 if 条件上设置断点有效（目前我将其放在函数的第一行），但如果我正在逐行调试，我不应该能够正常使用 F11 进入循环吗？ ? （至少这就是它在 TurboC 中的工作方式）

**EDIT2**：我能想到的最简单的方法来清楚地显示问题：[http](http://www.youtube.com/watch?v=10GgXCqLlVo&feature=youtu.be) ://www.youtube.com/watch?v=10GgXCqLlVo&feature=youtu.be （跳到 25 秒标记以查看实际问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:23:18.713

我不知道调试如何与异步方法一起工作的细节（我不倾向于使用调试器），但您需要了解系统基本上会回调该方法，从它返回（至于调用者关心）当它第一次到达`await`尚未完成的表达式时。

我会在行上放一个断点`bool exists=false;`，即*在*第一个`await`表达式之后。然后，您应该能够使用 F10（跳过）来遍历循环。

或者，您可以使用 LINQ 完全摆脱循环：

```
bool exists = l.Any(sf => string.Equals(sf.Name, "encrypted.txt",
                              StringComparison.CurrentCultureIgnoreCase)); 
```

# android - `AutoCompleteTextView` 仅在具有焦点时才显示内容

> ID：13190958
> 
> 赞同：1
> 
> 时间：2012-11-02T07:17:00.353
> 
> 标签：android

在我的 android 应用程序中，`AutoCompleteTextView`仅当它具有焦点时才显示内容，每当它失去焦点时它不会显示内容。但是，当我切换回 它时，`AutoCompleteTextView`它开始显示它。

是否可以让它继续显示内容？

# java - 将 java 类实例从 javascript（通过 ajax）发送到 jsp 或 servlet

> ID：13190960
> 
> 赞同：0
> 
> 时间：2012-11-02T07:17:22.880
> 
> 标签：java, javascript, jquery, jsp, servlets

我正在尝试通过 ajax 将 JAVA CLASS INSTANCE 从我的 javascript 代码发送到 JSP 文件。我该如何发送？我尝试像这样发送实例：

```
 data = {}
   data['my_instance'] = JAVA_CLASS_INSTANCE 
```

并通过 ajax 发送此数据，问题是，在 JSP 中，它作为字符串而不是类接收它

顺便说一句，我得到这样的java类实例：

```
<script type='text/javascript'>
     var class_instance = "<%= my_class_instance %>"; //if this method is wrong, plz tell me correct method to get instance and send via ajax. Already I have a form, along with the form data, i am trying to send this class also. If there is anyother good way for this, just tell me. 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:22:44.940

*（以下更新）*

从根本上说，您通过 ajax 从客户端发送到服务器的*始终*是一个字符串。它只能通过解释它的服务器端进程变成其他东西。

这个问题似乎没有任何意义。除非您在客户端和[LiveConnect](http://en.wikipedia.org/wiki/LiveConnect)上使用 Java 小程序，否则客户端上根本没有 Java 类实例。

如果您在客户端上**确实**有一个 Java 类实例（例如，来自 applet），那么将它发送到服务器的唯一方法是：

1.  [将其序列化为](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)字节流。

2.  将该字节流编码为字符串（Base64 或类似）。

3.  通过 ajax 将该编码字符串发送到服务器。

4.  将字符串解码回服务器上的字节流。

5.  在服务器上反序列化它。

...并且几乎可以肯定会有一种更好的方法将这些信息从客户端获取到服务器。

* * *

你已经编辑了你的问题说：

> 顺便说一句，我得到这样的java类实例：
> 
> ```
> <脚本类型='文本/javascript'>
>      var class_instance = "<%= my_class_instance %>";
> </脚本>
> ```

这不会在浏览器上为您提供“Java 类实例”。充其量，你会有一个包含一些信息的字符串。更有可能的是，根据`my_class_instance`服务器端变量中的内容，您将遇到 JavaScript 语法错误。（例如，如果您在其中有一个`'`或一个换行符或无效的 JavaScript 转义序列等。）

如果您认为这是一个 Java 类实例，那么在尝试编写此代码之前，您需要退后一步研究 Web 应用程序的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:31:51.283

你正在写`scriptlet`你的jsp。这在 99.9% 的情况下都是一件坏事。你应该一直避免它。大多数情况下，您可以使用`jstl`.

更重要的是，您的代码不会将 java 对象实例放入客户端浏览器。这是完全错误的。

请看一下。 [如何避免在我的 JSP 页面中使用 scriptlet？](https://stackoverflow.com/questions/2188706/how-to-avoid-using-scriptlets-in-my-jsp-page)

# android - 将外部 xml 视图添加到当前视图

> ID：13190961
> 
> 赞同：0
> 
> 时间：2012-11-02T07:17:30.423
> 
> 标签：android, android-layout, android-view

我创建了一个如下表单（**form.xml**）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/formLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
    <TextView
        android:id="@+id/tvName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android :text="Name" />

    <EditText
        android:id="@+id/edName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

<!-- Many more things-->
</RelativeLayout> 
```

* * *

如果上面的表单是通过代码创建的（比如 FormView），那么在每个活动中我都可以使用类似的东西

```
<com.example.FormView
    android:id="@+id/fv1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

但是由于表单是使用 xml 创建的，如上所示，我如何在众多活动中使用它？
我想在所有活动中使用上面的表单布局（form.xml）作为用户控件。

* * *

我尝试了以下操作，但它`NullPointerException`在最后一行抛出：

```
setContentView(R.layout.main);
RelativeLayout mainLayout = (RelativeLayout) findViewById(R.id.container);
View form= (View) findViewById(R.id.formLayout);
mainLayout.addView(form); 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:13:05.007

看看这里[重用布局](http://developer.android.com/training/improving-layouts/reusing-layouts.html)

它展示了如何重用现有布局以将其包含在其他布局中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T07:50:02.933

你到底想做什么，然后我会为你编写代码，使用下面的代码并将你的小部件放入其中并完成......

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.XMLFileName); 
```

# php - 为 json 数据生成所需的输出

> ID：13190965
> 
> 赞同：0
> 
> 时间：2012-11-02T07:18:11.423
> 
> 标签：php, html, json

```
{"99.net":{"status":"regthroughothers","classkey":"dotnet"},
"99.org":  {"status":"regthroughothers","classkey":"domorg"},
"99.mobi":{"status":"regthroughothers","classkey":"dotmobi"},
"99.name":{"status":"Invalid Domain Name","classkey":"dotname"},
"99.us":{"status":"regthroughothers","classkey":"domus"},
"99.com":{"status":"regthroughothers","classkey":"domcno"},
"99.info":{"status":"Invalid Domain Name","classkey":"dominfo"},
"99.co.uk":{"status":"available","classkey":"thirdleveldotuk"},
"99.biz":{"status":"Invalid Domain Name","classkey":"dombiz"},
"99.in":{"status":"Invalid Domain Name","classkey":"dotin"}} 
```

我可以使用以下代码显示输出：

```
$json1 = json_decode($response1);

 foreach($json1 as $key=>$sel_rows)     
  {
      echo $key ;
      echo " status: ". $sel_rows->status."&nbsp;";
      echo " Class: ". $sel_rows->classkey."&nbsp;";
      echo "Price";
      echo "<br>";                                             
  }<br> 
```

现在，我需要对其进行排序，以便可以显示如下表：

```
<table border="1">
<tr>
<td>.com</td>
<td>.net</td>
<td>.info</td>
<td>.org</td>
</tr>
<tr>
<td><a href="">ADD</a></td>
<td><a href="">ADD</a></td>
<td><a href="">ADD</a></td>
<td><a href="">ADD</a></td>
</tr>
</table> 
```

我无法弄清楚如何以可用于生成此表的方式对响应进行排序，使用响应数据将工具提示添加到 ADD 链接（如 dinakar.com）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:24:38.807

```
$json1 = json_decode($response1, TRUE);

 foreach($json1 as $key=>$sel_rows)     
  {
      echo $key ;
      echo " status: ". $sel_rows['status']."&nbsp;";
      echo " Class: ". $sel_rows['classkey']."&nbsp;";
      echo "Price";
      echo "<br>";                                             
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:12:33.887

看起来您在解码响应时没有问题，而是将其标准化为您需要显示的内容。为此，您需要从域字符串中提取 TLD，除非您提前*知道它。*大概你这样做了，因为它是用来请求响应的？

无论如何，以下代码说明了将其放入适合您传递给视图的数组的一种方法（或者您正在这样做）：

```
$response1 = <<< EOF
{"99.net":{"status":"regthroughothers","classkey":"dotnet"},
"99.org":  {"status":"regthroughothers","classkey":"domorg"},
"99.mobi":{"status":"regthroughothers","classkey":"dotmobi"},
"99.name":{"status":"Invalid Domain Name","classkey":"dotname"},
"99.us":{"status":"regthroughothers","classkey":"domus"},
"99.com":{"status":"regthroughothers","classkey":"domcno"},
"99.info":{"status":"Invalid Domain Name","classkey":"dominfo"},
"99.co.uk":{"status":"available","classkey":"thirdleveldotuk"},
"99.biz":{"status":"Invalid Domain Name","classkey":"dombiz"},
"99.in":{"status":"Invalid Domain Name","classkey":"dotin"}}
EOF;

function get_tld($url) {
    $host = parse_url($url);
    $domain = $host['path'];
    $tail = substr($domain, -7); // Watch out, gotcha! Be sure of this.
    $tld = strstr($tail, ".");
    return $tld;
}

$domains = array();
$json1 = json_decode($response1);

foreach ($json1 as $idx => $obj) {
    $tld = get_tld($idx);
    $domains[$tld] = array('tld' => $tld, 'status' => $obj->status, 'classkey' => $obj->classkey);
} 
```

这不是我的想法。生成的`$domains`数组如下所示（为简洁起见截断）：

```
Array
(
    [.net] => Array
        (
            [tld] => .net
            [status] => regthroughothers
            [classkey] => dotnet
        )

    [.org] => Array
        (
            [tld] => .org
            [status] => regthroughothers
            [classkey] => domorg
        ) 
```

请注意，我在这里并没有做很多理智的事情，但这应该足以帮助您沉迷其中。然后，您只需让您的表格远离按键，并使用响应中返回的任何他们需要的信息填充您的添加链接。

# java - 在 J2ME 中发送 SMS 中的 NullPointer 异常

> ID：13190966
> 
> 赞同：3
> 
> 时间：2012-11-02T07:18:12.680
> 
> 标签：java, java-me, sms, send, sms-gateway

我正在尝试从 J2ME 应用程序发送 SMS，但我收到 NullPointer 异常。这是我的整个代码。如果您有任何想法，请帮助我。非常感谢...我正在使用 MessageConnection 在 J2ME 中发送短信。请纠正我哪里错了。

```
import javax.microedition.io.*;
import javax.microedition.lcdui.*;
import javax.microedition.midlet.MIDlet;
import javax.wireless.messaging.*;

public class SendSms extends MIDlet implements CommandListener {

    Display display;
    private TextField toWhom;
    private TextField message;
    private Alert alert;
    private Command send, exit;
    MessageConnection clientConn;
    private Form compose;

    public SendSms() {
        display = Display.getDisplay(this);
        compose = new Form("Compose Message");
        toWhom = new TextField("To", "", 10, TextField.PHONENUMBER);
        message = new TextField("Message", "", 600, TextField.ANY);
        send = new Command("Send", Command.BACK, 0);
        exit = new Command("Exit", Command.SCREEN, 5);
        compose.append(toWhom);
        compose.append(message);
        compose.addCommand(send);
        compose.addCommand(exit);
        compose.setCommandListener(this);

    }

    public void startApp() {
        display.setCurrent(compose);
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
        notifyDestroyed();
    }

    public void commandAction(Command cmd, Displayable disp) {
        if (cmd == exit) {
            destroyApp(false);
        }
        if (cmd == send) {
            String mno = toWhom.getString();
            String msg = message.getString();
            if (mno.equals("")) {
                alert = new Alert("Alert");
                alert.setString("Enter Mobile Number!!!");
                alert.setTimeout(Alert.FOREVER);
                display.setCurrent(alert);
            } else {
                try {
                    clientConn = (MessageConnection) Connector.open("sms://" + mno);
                } catch (Exception e) {
                    alert = new Alert("Alert");
//                    alert.setString("Unable to connect to Station because of network problem");
                    alert.setString(e.getMessage()+"|"+e.toString());
                    System.out.println(e.getMessage()+"|"+e.toString());
                    alert.setTimeout(2000);
                    display.setCurrent(alert);

                }
                try {
                    TextMessage textmessage = (TextMessage) clientConn.newMessage(MessageConnection.TEXT_MESSAGE);
                    textmessage.setAddress("sms://" + mno);
                    textmessage.setPayloadText(msg);
                    clientConn.send(textmessage);
                } catch (Exception e) {
                    Alert alert = new Alert("Alert", "", null, AlertType.INFO);
                    alert.setTimeout(Alert.FOREVER);
                    alert.setString(e.getMessage()+"|"+e.toString());
                    System.out.println(e.getMessage()+"|"+e.toString());
                    display.setCurrent(alert);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T07:27:39.383

我怀疑问题是`clientConn`空的。

毕竟，您是在前一个`try`块中为它分配了一个值——但是如果您从第一个块中捕获了一个异常，那么您将继续前进*，就好像它已经工作了一样*。不要那样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T08:12:36.730

这是我的代码，我可以从中完美发送 SMS。只需在 Midlet 中添加权限。MIDlet 权限：javax.microedition.io.Connector.sms,javax.wireless.messaging.sms.send

我的代码是，

```
import javax.microedition.io.*;
import javax.microedition.lcdui.*;
import javax.microedition.midlet.MIDlet;
import javax.wireless.messaging.*;

public class SendSms extends MIDlet implements CommandListener {

    Display display;
    private TextField toWhom;
    private TextField message;
    private Alert alert;
    private Command send, exit;
    MessageConnection clientConn;
    private Form compose;

    public SendSms() {
        display = Display.getDisplay(this);
        compose = new Form("Compose Message");
        toWhom = new TextField("To", "", 10, TextField.PHONENUMBER);
        message = new TextField("Message", "", 600, TextField.ANY);
        send = new Command("Send", Command.BACK, 0);
        exit = new Command("Exit", Command.SCREEN, 5);
        compose.append(toWhom);
        compose.append(message);
        compose.addCommand(send);
        compose.addCommand(exit);
        compose.setCommandListener(this);

    }

    public void startApp() {
        display.setCurrent(compose);
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
        notifyDestroyed();
    }

    public void commandAction(Command cmd, Displayable disp) {
        if (cmd == exit) {
            destroyApp(false);
        }
        if (cmd == send) {
            String mno = toWhom.getString();
            String msg = message.getString();
            if (mno.equals("")) {
                alert = new Alert("Alert");
                alert.setString("Enter Mobile Number!!!");
                alert.setTimeout(Alert.FOREVER);
                display.setCurrent(alert);
            } else {
                try {
                    clientConn = (MessageConnection) Connector.open("sms://" + mno);
                } catch (Exception e) {
                    alert = new Alert("Alert");
//                    alert.setString("Unable to connect to Station because of network problem");
                    alert.setString(e.getMessage()+"|"+e.toString());
                    System.out.println(e.getMessage()+"|"+e.toString());
                    alert.setTimeout(2000);
                    display.setCurrent(alert);

                }
                try {
                    TextMessage textmessage = (TextMessage) clientConn.newMessage(MessageConnection.TEXT_MESSAGE);
                    textmessage.setAddress("sms://" + mno);
                    textmessage.setPayloadText(msg);
                    clientConn.send(textmessage);
                } catch (Exception e) {
                    Alert alert = new Alert("Alert", "", null, AlertType.INFO);
                    alert.setTimeout(Alert.FOREVER);
                    alert.setString(e.getMessage()+"|"+e.toString());
                    System.out.println(e.getMessage()+"|"+e.toString());
                    display.setCurrent(alert);
                }
            }
        }
    }
} 
```

# factory-bot - Rails 如何定义一个只能在 factory.rb 中使用的宏

> ID：13190970
> 
> 赞同：0
> 
> 时间：2012-11-02T07:18:18.683
> 
> 标签：factory-bot

我在 Rails 应用程序中使用 FactoryGirl 进行 RSpec 功能测试。在编写工厂时，我发现需要定义私有方法或宏来删除工厂中的重复代码。宏应该只能从工厂定义中调用。请帮助

```
factory :subscriber, :class => Subscriber do                                                                                                   
  sequence(:name) { |n| "test_user_#{n}" }                                                                                                     
  sequence(:email) { |n| "test_user_#{n}@example.com"}                                                                                                                   
  association :authentication, factory: :authentication                                                            

  factory :subscriber_with_subscription do                                                                                                     

    ignore do
      payment_pending_subscriptions 0                                                                                                          
      purchased_subscriptions 0
      active_subscriptions 0                                                                                                           
    end                                                                                                                                        

    after(:create) do |subscriber, evaluator|                                                                                                  

      count = evaluator.payment_pending_subscriptions
      FactoryGirl.create_list(:subscription, count, status: 'payment_pending', :subscriber => subscriber) if count >0                         

      count = evaluator.purchased_subscriptions
      FactoryGirl.create_list(:subscription, count, status: 'purchased', :subscriber => subscriber) if count > 0

      count = evaluator.active_subscriptions
      FactoryGirl.create_list(:subscription, count, status: 'active', :subscriber => subscriber) if count > 0
    end
  end
end 
```

如果我可以在工厂内定义一个方法，使得

```
def create_subs count, status
  FactoryGirl.create_list(:subscription, count, status: status, :subscriber => subscriber) if count > 0
end 
```

然后可以将调用减少到一行/状态

```
create_subs evaluate.purchased_subscription, "purchased_subscription" 
```

但即使在定义 create_subs 之后，它也会给出错误，即找不到。

# android - 我的活动结果是错误的

> ID：13190980
> 
> 赞同：0
> 
> 时间：2012-11-02T07:19:18.487
> 
> 标签：android

我真的不知道如何解决这个问题，我找到了很多解决方案，但它仍然不起作用。

我的问题是在我的活动跳转到 TabHost 后，标签页浏览变成空白，但是当我切换标签时，它变成了正常。

我猜活动第一次跳转时日期已经准备好了，但为什么它不显示正常？

任何帮助将非常感激..

这是跳转 TabHost 所在的活动。

```
public class ListContainActivity extends FragmentActivity{

    public static final String tag = "COOLSMILE_DEBUG";
    private  TabHost tabHost ;
    ContextTask contextTask ;
    String mString="";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.showcontain);
        ProgressRefresh();
    }

    private void InitUI(){
        getIntentExtra();
        Log.v(tag, "----------- InitUI start -----------");
        InitTabHost();
    }

    private void InitTabHost(){

        Log.v(tag, "----------- InitTabHost start -----------");
        TabHost.TabSpec spec;  

        tabHost = (TabHost) findViewById(android.R.id.tabhost);
        tabHost.setup();

        spec=tabHost.newTabSpec("Refresh").setIndicator("Refresh").setContent(R.id.contain_tab0);
        tabHost.addTab(spec);  

        spec=tabHost.newTabSpec("Love").setIndicator("Love").setContent(R.id.contain_tab1);  
        tabHost.addTab(spec);  

        spec=tabHost.newTabSpec("Comment").setIndicator("Comment").setContent(R.id.contain_tab2);  
        tabHost.addTab(spec);  

        spec=tabHost.newTabSpec("Onward").setIndicator("Onward").setContent(R.id.contain_tab0);  
        tabHost.addTab(spec);  

        spec=tabHost.newTabSpec("Goback").setIndicator("Goback").setContent(R.id.contain_tab1); 
        tabHost.addTab(spec);  

        InitClickListener();
    }
    private void ProgressRefresh(){        

        Log.v(tag, "----------- progress_refresh start -----------");
        contextTask = new ContextTask(0);

        TaskHost taskHost = new TaskHost(){

            @Override
            public void onPreExecute(int requestCode) {
                // TODO Auto-generated method stub
                super.onPreExecute(requestCode);
                Log.v(tag, "----------- progress_refresh.onPreExecute() start -----------");
                InitUI();
            }

            @Override
            public void onPostExecute(int requestCode, String result) {
                // TODO Auto-generated method stub
                super.onPostExecute(requestCode, result);

                Log.v(tag, "----------- progress_refresh.onPostExecute() start -----------"+result);

                TextView txt = (TextView)findViewById(R.id.text_Result);
                txt.setText("DoInBackground Result :"+result);
                TextView txt1 = (TextView)findViewById(R.id.text_Refresh);
                txt1.setText("Hello my name is "+mString);
            }
        };
        contextTask.setTaskHost(taskHost);
        contextTask.setProgress(new SimpleDialogProgress(this,"正在获取数据..."));
        contextTask.execute();        
    }

    private void InitClickListener(){

        Log.v(tag, "----------- InitClickListener start -----------");

        RadioGroup radioGroup=(RadioGroup) this.findViewById(R.id.main_tab);  
        radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {  

            @Override  
            public void onCheckedChanged(RadioGroup group, int checkedId) {  
                // TODO Auto-generated method stub  
                switch (checkedId) {  
                    case R.id.main_tab_addHome:
                        tabHost.setCurrentTabByTag("Refresh");  
                        break;
                    case R.id.main_tab_addExam:  
                        tabHost.setCurrentTabByTag("Love");  
                        break;  
                    case R.id.main_tab_myExam:  
                        tabHost.setCurrentTabByTag("Comment");  
                        break;  
                    case R.id.main_tab_message: 
                        tabHost.setCurrentTabByTag("Onward");  
                        break;  
                    case R.id.main_tab_settings:
                        tabHost.setCurrentTabByTag("Goback");  
                        break;  
                    default:  
                        tabHost.setCurrentTabByTag("Refresh");  
                        break;  
                }  
            }  
        });              
    }

    private void getIntentExtra(){
        Intent intent = getIntent();
        mString = intent.getExtras().getString("PRESIDENTS_CONTENT");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:11:10.743

我找到了原因，因为`Tag`和`setContent(R.id.contain_tab1)`不是一对一的关系。我以为只是设置了一次，现在我已经解决了这个问题。

# image - 相机问题

> ID：13190982
> 
> 赞同：1
> 
> 时间：2012-11-02T07:19:27.440
> 
> 标签：image, blackberry, camera

我在尝试让相机相应地工作时遇到了一些问题......相机演示适用于 8520 设备（有存储卡）但不适用于 9780 设备（没有存储卡）给出的错误

> 错误类 java.lang.ArrayOutOfBoundsException：索引 0>=0

我的代码示例：

```
public class MyScreen extends MainScreen{

    Player _p;
    VideoControl _videoControl;
    FileConnection fileconn;
    String PATH;
    String GetfileName;
    LabelField GetPhotofileName = new LabelField("",LabelField.FOCUSABLE){
        protected boolean navigationClick(int status, int time){
            Dialog.alert("Clicked");
            return true;
        }
    };

    public static boolean SdcardAvailabulity() {
        String root = null;
        Enumeration e = FileSystemRegistry.listRoots();
        while (e.hasMoreElements()) {
            root = (String) e.nextElement();
            if( root.equalsIgnoreCase("sdcard/") ) {
            }else if( root.equalsIgnoreCase("store/") ) {
            }
        }

        class MySDListener implements FileSystemListener {
            public void rootChanged(int state, String rootName) {
                if( state == ROOT_ADDED ) {
                    if( rootName.equalsIgnoreCase("sdcard/") ) {
                    }
                } else if( state == ROOT_REMOVED ) {
                }
            }
        }

        return true;
    }

    protected boolean invokeAction(int action){
        boolean handled = super.invokeAction(action);
        if(SdcardAvailabulity()){
            PATH = System.getProperty("fileconn.dir.memorycard.photos")+"Image_"+System.currentTimeMillis()+".jpg";//here "str" having the current Date and Time;
        } else {
            // PATH = System.getProperty("file:///store/home/user/pictures/")+"Image_"+System.currentTimeMillis()+".jpg";
            PATH = System.getProperty("fileconn.dir.photos")+"Image_"+System.currentTimeMillis()+".jpg";
        }

        if(!handled){
            if(action == ACTION_INVOKE){
                try{
                    byte[] rawImage = _videoControl.getSnapshot(null);
                    System.out.println("----------1");
                    fileconn=(FileConnection)Connector.open(PATH);
                    System.out.println("----------2");
                    if(fileconn.exists()){
                        fileconn.delete();
                        System.out.println("----------3");
                    }
                    fileconn.create();
                    System.out.println("----------4");
                    OutputStream os=fileconn.openOutputStream();
                    System.out.println("----------5");
                    os.write(rawImage);
                    GetfileName =fileconn.getName();
                    System.out.println("----------6");
                    System.out.println("GetfileName----------"+GetfileName);
                    fileconn.close();
                    System.out.println("----------7");
                    os.close();
                    Status.show("Image is Captured",200);
                    GetPhotofileName.setText(GetfileName);
                    System.out.println("----------8");
                    if(_p!=null)
                        _p.close();
                    System.out.println("----------9");
                }catch(Exception e){
                    if(_p!=null){
                        _p.close();
                    }
                    if(fileconn!=null){
                        try{
                            fileconn.close();
                        }catch (IOException e1){
                            //if the action is other than click the trackwheel(means go to the menu options) then we do nothing;
                        }
                    }
                }
            }
        }
        return handled;
    }

    public MyScreen(){
        setTitle("Camera App");
        try{
            System.out.println("Debug------------10");
            _p = javax.microedition.media.Manager.createPlayer("capture://video?encoding=jpeg&width=1024&height=768");
            _p.realize();
            _videoControl = (VideoControl) _p.getControl("VideoControl");
            System.out.println("Debug------------11");
            if (_videoControl != null){
                Field videoField = (Field) _videoControl.initDisplayMode (VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field");
                _videoControl.setDisplayFullScreen(true);
                System.out.println("Debug------------12");
                _videoControl.setVisible(true);
                _p.start();
                System.out.println("Debug------------13");
                if(videoField != null){
                    add(videoField);
                    System.out.println("Debug------------14");
                }
            }
        }catch(Exception e){
            if(_p!=null) {
                _p.close();
            }
            Dialog.alert(e.toString());
        }
        add(GetPhotofileName);
    }
} 
```

在 8520（有存储卡）上，代码在 9780（没有存储卡）上运行良好，代码停在“System.out.println("debug---1")”，谁能告诉我是否你可以看到我的代码有什么问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:59:21.413

```
 public static boolean SdcardAvailabulity() {
     String root = null;
     Enumeration e = FileSystemRegistry.listRoots();
     while (e.hasMoreElements()) {
         root = (String) e.nextElement();
         if( root.equalsIgnoreCase("sdcard/") ) {
             return true;
         }else if( root.equalsIgnoreCase("store/") ) {
             return false;
         }
     }
     class MySDListener implements FileSystemListener {
         public void rootChanged(int state, String rootName) {
             if( state == ROOT_ADDED ) {
                 if( rootName.equalsIgnoreCase("sdcard/") ) {
                 }
             } else if( state == ROOT_REMOVED ) {
             }
         }
     }
     return true;
} 
```

这是解决方案，我的“SD卡可用性”代码只返回true，导致黑莓没有插入存储卡时图片无法保存。@ Eugen Martynov 请通读代码，你会看到它在那里:)

# c# - 向 DataTable 添加新行时出现空引用异常

> ID：13190987
> 
> 赞同：0
> 
> 时间：2012-11-02T07:20:06.497
> 
> 标签：c#, ado.net, datatable

在将新行添加到`DataTable`. 它不会每次都发生，但是在运行应用程序时，我得到空引用异常，而没有找到空对象。

这是代码：

*首先清除DataTable的行列：*

```
dtLibraries.Rows.Clear();
dtLibraries.Columns.Clear();
dtLibraries.Columns.Add("Col1");
dtLibraries.Columns.Add("Col2");
dtLibraries.Columns.Add("Col3");
dtLibraries.Columns.Add("Col4");
dtLibraries.Columns.Add("Col5");
dtLibraries.Columns.Add("Col6");
dtLibraries.Columns.Add("Col7");
dtLibraries.Columns.Add("Col8");
dtLibraries.Columns.Add("Col9"); 
```

*然后读取另一个 DataTable 并将数据写入该表：*

```
for (int s = 0; s <= dttemp.Rows.Count - 1; s++)
{
    dttemp1.Clear();
    dttemp1 = business.GetOutputLibraries("SimObjectOutputRequestSet",
    dttemp.Rows[s].ItemArray[2].ToString(),
    dttemp.Rows[s].ItemArray[1].ToString(), dttemp.Rows[s].ItemArray[0].ToString());

    for (int j = 0; j <= dttemp1.Rows.Count - 1; j++)
    {
        DataRow dr = dtLibraries.NewRow();
        dr["Col1"] = dttemp1.Rows[j].ItemArray[0].ToString();
        dr["Col2"] = dttemp1.Rows[j].ItemArray[1].ToString();
        dr["Col3"] = dttemp1.Rows[j].ItemArray[2].ToString();
        dr["Col4"] = dttemp.Rows[s].ItemArray[0].ToString();
        dr["Col5"] = dttemp.Rows[s].ItemArray[2].ToString();
        dr["Col6"] = dttemp.Rows[s].ItemArray[1].ToString();
        dr["Col7"] = cmbObject.Text.ToString();
        dr["Col8"] = cmbLibraryType.Text;
        dr["Col9"] = cmbLibrarySubType.Text;
        dtLibraries.Rows.Add(dr);  /// Exception occurs on this line
    }
} 
```

堆栈跟踪：

```
at System.Data.NameNode.Eval(DataRow row, DataRowVersion version)
   at System.Data.BinaryNode.EvalBinaryOp(Int32 op, ExpressionNode left, ExpressionNode right, DataRow row, DataRowVersion version, Int32[] recordNos)
   at System.Data.BinaryNode.Eval(DataRow row, DataRowVersion version)
   at System.Data.DataExpression.Invoke(DataRow row, DataRowVersion version)
   at System.Data.Index.AcceptRecord(Int32 record, IFilter filter)
   at System.Data.Index.ApplyChangeAction(Int32 record, Int32 action, Int32 changeRecord)
   at System.Data.Index.RecordStateChanged(Int32 record, DataViewRowState oldState, DataViewRowState newState)
   at System.Data.DataTable.RecordStateChanged(Int32 record1, DataViewRowState oldState1, DataViewRowState newState1, Int32 record2, DataViewRowState oldState2, DataViewRowState newState2)
   at System.Data.DataTable.SetNewRecordWorker(DataRow row, Int32 proposedRecord, DataRowAction action, Boolean isInMerge, Boolean suppressEnsurePropertyChanged, Int32 position, Boolean fireEvent, Exception& deferredException)
   at System.Data.DataTable.InsertRow(DataRow row, Int64 proposedID, Int32 pos, Boolean fireEvent)
   at System.Data.DataRowCollection.Add(DataRow row) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:44:07.560

它来自您的架构：

```
dtLibraries.Columns.Add("Col1");
dtLibraries.Columns.Add("Col2"); 
```

您使用大写“C”。同时你用小写“c”调用列。

```
dr["col1"] = dttemp1.Rows[j].ItemArray[0].ToString();
dr["col2"] = dttemp1.Rows[j].ItemArray[1].ToString(); 
```

也许这就是问题所在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:32:26.087

正如@AndreasSabroeJydebjerg 所建议的，我已经检查了过滤器。可能是导致绑定控件出现问题。

为了让它工作，我已经加载了另一个表，为此做了所有的工作。

感谢大家的建议。

# objective-c - 操作完成后如何运行方法

> ID：13190988
> 
> 赞同：1
> 
> 时间：2012-11-02T07:20:19.110
> 
> 标签：objective-c, cocos2d-iphone

我想知道如何在 a`CCAction`完成后调用一个方法（我还想在它第一次调用后每 2.5 秒调用一次）。我有一个随机位置的精灵，我希望它在移动到随机位置后运行这个方法（射击子弹）。到目前为止，该方法仍在移动时被调用。任何人都可以帮忙吗？

这是敌人的创建方法：

```
(void)enemy1{
    gjk= arc4random()%6;
    enemy1 = [CCSprite spriteWithFile:@"enemy1.png"];

    int d = arc4random()%480+480;
    int o = arc4random()%320+320;
    x = arc4random()%480;
    if( x <= 480 && x>= 460){
        x=x-100;
    }
    if(x <= 100){
        x = x+50;
    }

    y = arc4random()%320;
    if(y <=320 && y >= 290){
        y = y-100;
    }
    if(y < 100){
        y = y + 100;
    }
    enemy1.position = ccp(o,d);
    [enemy1 runAction:[CCMoveTo actionWithDuration:3 position: ccp(x,y)]];
    CCRotateBy *rotation = [CCRotateBy actionWithDuration:20 angle:1080];
    CCRepeatForever * repeatforever = [CCRepeatForever actionWithAction:rotation];
    [enemy1 runAction:repeatforever];
    [self addChild:enemy1];
    [enemy addObject :enemy1];
} 
```

以及发射弹丸的方法：

```
(void)projectileShooting:(ccTime)dt {
    projcount++;
    if(enemy1.position.y < 320){
    v = ccp(player.position.x,player.position.y); 
    for(CCSprite *enemies in enemy){ 
        CCSprite * projectilebullet = [CCSprite spriteWithFile:@"Projectile.png"];
        [proj addObject:projectilebullet];
        [self addChild:projectilebullet];
        CGPoint MyVector = ccpSub(enemies.position,player.position );
        MyVector = ccpNormalize(MyVector);
        MyVector = ccpMult(MyVector, enemies.contentSize.width/2);
        MyVector = ccpMult(MyVector,-1);
        projectilebullet.position = ccpAdd(enemies.position, MyVector);
    }
} 
```

拍摄方法是代码在init方法中调用的，所以每2.5秒调用一次。

```
 [self schedule:@selector(projectileShooting:) interval:2.5]; 
```

我知道我试图通过使拍摄发生在*y*位置 < 320 时拍摄，但是当它通过 320 的位置时它仍在移动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:26:44.297

您可以进行一系列操作，并在序列结束时提供一个回调函数，该函数将在最后执行。像这样的东西

```
[CCSequence actions:
        [CCMoveTo actionWithDuration:3 position: ccp(x,y)],
        [CCCallFunc actionWithTarget:self selector:@selector(methodToRunAfterAction)],
        nil]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T16:12:24.267

添加到 Tayyab 的答案中，您可以简单地在移动操作结束时触发的*startShooting*方法（或任何您想调用的方法）中开始实际安排弹丸射击：

```
[CCSequence actions:
    [CCMoveTo actionWithDuration:3 position: ccp(x,y)],
    [CCCallFunc actionWithTarget:self selector:@selector(startShooting)],
    nil]]; 
```

其中*startShooting*定义如下：

```
- (void) startShooting
{
    // start scheduling your projectile to fire every 2.5 seconds
    [self schedule:@selector(projectileShooting:) interval:2.5];
} 
```

# jpa - JPA 错误：实体没有定义主键属性

> ID：13190997
> 
> 赞同：16
> 
> 时间：2012-11-02T07:20:50.103
> 
> 标签：jpa, entity

我在我的应用程序中使用 JPA。在其中一张表中，我没有使用主键（我知道这是一个糟糕的设计）。

现在生成的实体如下所述：

```
@Entity
@Table(name="INTI_SCHEME_TOKEN")
public class IntiSchemeToken implements Serializable {
    private static final long serialVersionUID = 1L;

    @Column(name="CREATED_BY")
    private String createdBy;

    @Temporal( TemporalType.DATE)
    @Column(name="CREATED_ON")
    private Date createdOn;

    @Column(name="SCH_ID")
    private BigDecimal schId;

    @Column(name="TOKEN_ID")
    private BigDecimal tokenId;

    public IntiSchemeToken() {
    }

    public String getCreatedBy() {
        return this.createdBy;
    }

    public void setCreatedBy(String createdBy) {
        this.createdBy = createdBy;
    }

    public Date getCreatedOn() {
        return this.createdOn;
    }

    public void setCreatedOn(Date createdOn) {
        this.createdOn = createdOn;
    }

    public BigDecimal getSchId() {
        return this.schId;
    }

    public void setSchId(BigDecimal schId) {
        this.schId = schId;
    }

    public BigDecimal getTokenId() {
        return this.tokenId;
    }

    public void setTokenId(BigDecimal tokenId) {
        this.tokenId = tokenId;
    }

} 
```

这里在我的项目中，eclipse IDE在这个类上显示错误标记（红色十字），错误是“**实体没有定义主键属性**”。

谁能告诉我，如何创建没有主键的实体？

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-02T07:44:04.273

你不能。一个实体必须有一个唯一的、不可变的 ID。它不必定义为数据库中的主键，但字段或字段集必须唯一标识行，并且其值可能不会改变。

因此，如果您的实体中的一个字段或您的实体中的一组字段满足这些条件，请将其（或它们）设为实体的 ID。例如，如果用户无法在同一天创建两个实例，则可以将 [createdOn, createdBy] 设为实体的 ID。

当然，这是一个糟糕的解决方案，您应该真正更改架构并在实体中添加一个自动生成的单列 ID。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-03T09:08:22.327

如果您的主键（PK）是在实体类中继承的托管超类，那么您必须在 persistence.xml 文件中包含映射的超类名称。

查看错误报告： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=361042](https://bugs.eclipse.org/bugs/show_bug.cgi?id=361042)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-03T03:28:50.177

如果你需要定义一个没有主键的类，那么你应该将该类标记为一个 Embeddable 类。否则，您应该为您定义的所有实体提供主键。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-05T06:54:05.303

您可以关闭（更改）已添加的验证。

转到工作区首选项“Java Persistence->JPA->Errors/Warnings”下一个“类型”并将“实体没有主键”更改为“警告”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-06T14:08:13.923

除了[http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#No_Primary_Key](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#No_Primary_Key)`ROWID`之外，您还可以使用Oracle中的一些内置列：

*   [Oracle legacy table 没有好的 PK：如何 Hibernate？](https://stackoverflow.com/questions/1519078/oracle-legacy-table-without-good-pk-how-to-hibernate)

但要小心：

*   [http://www.orafaq.com/wiki/ROWID](http://www.orafaq.com/wiki/ROWID)

实体框架不适用于所有类型的数据（例如用于分析而不是用于查询的统计数据）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-24T12:24:33.820

没有 Hibernate 的另一种解决方案

如果 - 您的表上没有 PK - 存在可能是 PK 的列的逻辑组合（如果您可以使用某种 rowid，则没有必要） - 但有些列是 NULLable 所以你真的不能由于数据库限制而创建 PK - 并且您无法修改表结构（会破坏旧代码中没有明确列出的列的插入/选择语句）

那么您可以尝试以下技巧 - 在数据库中使用具有连接逻辑键列（'A='||a||'B='||'C='c..）或 rowid 值的虚拟列创建视图 -通过此视图创建您的 JPA 实体类 - 使用 @Id 注释标记虚拟列

就是这样。更新/删除数据操作也是可能的（不是插入），但如果虚拟键列不是由 rowid 组成的，我不会使用它们（以避免数据库表的全扫描搜索）

PS 在链接的问题中部分描述了相同的想法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-02T19:32:54.797

您需要创建主键，如果没有找到任何符合条件的字段，则创建自动增量 ID。

```
CREATE TABLE fin_home_loan (
  ID int NOT NULL AUTO_INCREMENT,
    PRIMARY KEY (ID)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-18T12:37:25.597

只需添加假 id 字段。在 Postgres 中：

```
@Id
@Column(name="ctid")
String id; 
```

在甲骨文中：

```
@Id
@Column(name="ROWID")
String rowid; 
```

# android - 警报管理器准确性

> ID：13190998
> 
> 赞同：3
> 
> 时间：2012-11-02T07:20:53.913
> 
> 标签：android

如何以准确的时间间隔使用警报管理器？

我使用了警报管理器，但它的响应不准确。谁能帮我？我用了这段代码

```
PendingIntent sender;
AlarmManager am;
long firstTime;
Intent itnt = new Intent();
itnt.setAction("abts.medismo.medismo.ALARMRECEIVER");
sender = PendingIntent.getBroadcast(context, 0,itnt, 0);
am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
am.cancel(sender);
firstTime = SystemClock.elapsedRealtime();
am.setInExactRepeating(AlarmManager.ELAPSED_REALTIME,firstTime, Integer.parseInt(sep[3]),  sender); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:32:25.893

您应该使用`ELAPSED_REALTIME_WAKEUP`，因为如果手机处于睡眠状态，它在再次唤醒之前不会启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-21T01:29:16.943

这里有两个问题。

首先，正如其他人指出的那样，您的警报不是“唤醒”警报。这意味着如果在达到触发时间时设备处于睡眠状态，则警报不会导致设备唤醒并立即处理警报。相反，一旦有其他东西导致设备激活，它就会被处理，例如用户拿起它并按下电源按钮开始使用它。

第二个问题是您正在使用`setInexactRepeating()`. 顾名思义，这些警报永远不会在精确可预测的时间发出。正如文件所说，“此外，虽然重复警报的整个周期将按照要求，但任何两次连续触发警报之间的时间可能会有所不同。”

这对于大多数应用程序来说通常已经足够了，并且在电池使用方面更有效。但是，如果您确实需要在特定时间发送警报，则需要自己设置警报时间，而不是依靠周期性警报。此外，从 API 版本 19 开始，`setExact()`如果您确实需要精确交付，则应该使用新的 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T07:46:01.203

我相信您观察到的不准确可能是由警报标志的细微变化引起的。

`AlarmManager.ELAPSED_REALTIME`并`AlarmManager.ELAPSED_REALTIME_WAKEUP`利用`elapsedRealtime()`，这是自设备上次启动以来的毫秒数，适用于测量计时器等的经过时间。

`AlarmManager.RTC`并`AlarmManager.RTC_WAKEUP`利用`currentTimeMillis()`，这是系统时钟：

> 自 1970 年 1 月 1 日 00:00:00 UTC 以来的毫秒数。此方法不应用于测量超时或其他经过的时间测量，因为更改系统时间会影响结果。

`AlarmManager`我列出的所有四个时钟标志都将包括睡眠时间，但只有这些`*_WAKEUP`标志会唤醒设备以发出警报；默认标志将等到设备被唤醒，然后立即发出警报。

确保您选择了与您的用例匹配的标志，并确保您的延迟 { `Integer`at `sep[3]`?} 的值是警报之间等待的时间量（以毫秒为单位）；正如你所拥有的，你`Integer`的正在被拆箱并投掷长；它有效，但除非有原因，否则我建议切换到原语`long`；所以延迟 15 分钟是：

```
int delay = 900000L // 15 minutes * 60 seconds * 1000 milliseconds 
```

[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

[http://developer.android.com/reference/android/os/SystemClock.html](http://developer.android.com/reference/android/os/SystemClock.html)