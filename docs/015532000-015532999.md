# StackOverflow 问答 15532000-15532999

# javascript - 将视图中的选择字段中的值传递给商店

> ID：15532001
> 
> 赞同：1
> 
> 时间：2013-03-20T18:37:33.523
> 
> 标签：javascript, sencha-touch-2

我如何正确地将我的选择字段的值传递给我商店的 ajax 代理？

```
Ext.define('FirstApp.view.Home',{
extend:'Ext.Panel',
xtype:'home',
config:{
    title:'Home',
    iconCls:'home',
    html:'<h1>Home Page</h1><hr><p>Welcome to Sencha Touch 2 Training</p>',
    layout:'fit',
    scrollable:true,
    styleHtmlContent:true,
    styleHtmlCls:'home',

    items: [
            {
                xtype: 'selectfield',
                id: 'visit',
                label: 'Choose one',
                value:'restaurant',
                options: [
                    {text: 'Museum',  value: 'museum'},
                    {text: 'Pubs', value: 'pub'},
                    {text: 'Attractions',  value: 'attraction'}
                ]
            }
        ]
                }

    }) 
```

我试图将值放在这里：'+ REFERENCE HERE +' 在下面的代码中。我试过 '+#visit+' 和 '+#value+' 没有成功

```
Ext.define('FirstApp.store.Places',{
extend:'Ext.data.Store',

config:{

    autoLoad:true,
    model:'FirstApp.model.Place',
    proxy:{
        type:'ajax',
        url:'https://maps.googleapis.com/maps/api/place/search/json?  location=52.247983,-7.141113&radius=10000&types=food&name='+ REFERENCE HERE +'&sensor=false&key=KEY',
        reader:{
            type:'json',
            rootProperty:'results'
        }
    }
}
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:05:28.010

要在 Sencha 框架中通过 ID 获取组件，您需要使用 Ext.getCmp，然后使用 getValue 方法。因此，在您尝试放置参考的地方，请输入：

```
Ext.getCmp('visit').getValue() 
```

理想情况下，您希望避免使用硬编码的组件 ID，而是使用基于组件路径、类型等的 refs/selector。

# sql - ActiveRecord：急切加载，但只加载 id

> ID：15532003
> 
> 赞同：1
> 
> 时间：2013-03-20T18:37:37.953
> 
> 标签：sql, ruby-on-rails, activerecord

假设我有这些模型：

```
class Order < ActiveRecord::Base
  has_many :lines
end

class Line < ActiveRecord::Base
  belongs_to :order
end 
```

我想`#line_ids`在一个请求中加载一些订单记录及其。不过，我宁愿不将所有 Line 记录实例化为 ActiveRecord 对象。另外，我宁愿不覆盖`#line_ids`ActiveRecord 提供的方法。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:47:29.703

选择单列与选择行应该不会产生太大的性能差异，除非您在 Line 模型上有许多属性，这反过来可能是重构的提示。

如果你只想要 id，我可能会在我的 Order 模型中做这样的事情

```
def line_ids_array
  Line.where(order_id: self.id).pluck(:id)
end 
```

这应该返回特定订单的行 ID 数组。

# python - 从库存模块中的产品对象中删除“会计” - OpenErp

> ID：15532019
> 
> 赞同：0
> 
> 时间：2013-03-20T18:38:25.783
> 
> 标签：python, module, openerp, stock

我正在尝试自定义 OpenErp 中的库存模块以满足业务需求。

但是，我找不到删除产品视图中“会计”选项卡的干净方法。

`"<field name='property_account_income'>"`在开发人员模式下，它说字段名称是`<field name='property_account_expense'>`

我在“stock.py”上找到了这个对象

```
 if invoice_vals['type'] in ('out_invoice', 'out_refund'):
        account_id = move_line.product_id.property_account_income.id
        if not account_id:
            account_id = move_line.product_id.categ_id.\
                    property_account_income_categ.id
    else:
        account_id = move_line.product_id.property_account_expense.id
        if not account_id:
            account_id = move_line.product_id.categ_id.\
                    property_account_expense_categ.id 
```

但是如果我删除它，应用程序或模块将变得不稳定，并且在股票应用程序内的任何 xml 中也没有找到它。

有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:51:29.660

您的意思是要从产品中完全删除“会计”选项卡。

您可以在 openerp 的 account 模块中的 product_view.xml 中找到“Accounting”选项卡。

如果要完整删除选项卡，则可以继承产品表单并像这样替换它：

```
<xpath expr="//notebook/page[@string='Accounting']" position="replace">
</xpath> 
```

希望这对你有帮助

# sql - 在 SQL Server 2008 中替换光标的最佳方法

> ID：15532023
> 
> 赞同：0
> 
> 时间：2013-03-20T18:38:35.403
> 
> 标签：sql, sql-server-2008, stored-procedures, cursor

我想从我的存储过程中替换光标代码

```
DECLARE CursorXD CURSOR FOR
   SELECT 
       IDOrdre, Quantity,fabnum
   FROM prod_ordreplanificationdetail
   WHERE fab = @num
     AND ordre = @ord

OPEN CursorXD 

FETCH NEXT FROM CursorXD INTO @correctionnumsap, @correctionquantite, @correctionnumfabrication

WHILE @@FETCH_STATUS = 0
BEGIN
   EXEC INSERT#prod @idordre = @correctionnumsap,
                    @quantite = @correctionquantiteneg,
                    @fabnum = @correctionnumfabrication

   FETCH NEXT FROM CursorXD INTO @correctionnumsap, @correctionquantite, @correctionnumfabrication
END

CLOSE CursorXD 
DEALLOCATE CursorXD 
```

替换此光标以提高性能的最佳方法是什么？

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:53:58.227

这是一个选项，但我做了几个假设

```
INSERT INTO prod
SELECT IDOrdre, Quantity,fabnum
FROM prod_ordreplanificationdetail
WHERE fab=@num
  AND ordre=@ord 
```

假设：

1.  SP INSERT#prod 只做一个`INSERT`而不做其他数据操作
2.  SP INSERT#prod 插入到名为的表`prod`中，表中只有三列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:36:56.263

您可以通过维护第 n 行值来使用 WHILE 循环而不是 CURSOR。与 CURSOR 相比，它在性能方面太好了。如果你清楚地告诉你你需要什么，那么我们就可以走上同一条路。

# php - 最近查看的页面“您还没有查看页面”

> ID：15532028
> 
> 赞同：2
> 
> 时间：2013-03-20T18:39:10.787
> 
> 标签：php, session

我有一些代码可以显示您最近在我的网站上查看过的页面，但是如果您还没有查看过页面，我会收到一个错误，即

```
Notice: Undefined index: pageurl in C:\xampp\htdocs\project1\recent.php on line 97

Warning: Invalid argument supplied for foreach() in C:\xampp\htdocs\project1\recent.php on line 97 
```

我需要它说您还没有查看页面而不是收到此错误这是我目前拥有的代码

```
<?php

foreach( $_SESSION['pageurl'] as $key=>$value) {
echo '<a href="'.$value.'">Click here </a>';
echo 'to see last page which is '."'localhost".$value."'".' <br />';
}
?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:40:51.893

```
if(isset($_SESSION['pageurl']))
  foreach( $_SESSION['pageurl'] as $key=>$value) {
  echo '<a href="'.$value.'">Click here </a>';
  echo 'to see last page which is '."'localhost".$value."'".' <br />';
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T18:43:48.423

在检查会话之前添加 session_start

```
if (!isset($_SESSION))
 session_start ();

if (isset($_SESSION['pageurl'])) { 
  foreach( $_SESSION['pageurl'] as $key=>$value) {
      echo '<a href="'.$value.'">Click here </a>';
      echo 'to see last page which is '."'localhost".$value."'".' <br />';
  }
} else {
    echo "You haven't viewed a page yet";
} 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:45:14.073

您应该在开始 foreach 之前检查是否设置了 pageurl 以及它是否是一个数组。

```
<?php
if(isset($_SESSION['pageurl']) && is_array($_SESSION['pageurl']))
    foreach( $_SESSION['pageurl'] as $key=>$value) {
        echo '<a href="'.$value.'">Click here </a>';
        echo 'to see last page which is '."'localhost".$value."'".' <br />';
    }
?> 
```

# iphone - 点击获取UILabel的标签

> ID：15532030
> 
> 赞同：0
> 
> 时间：2013-03-20T18:39:12.013
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我正在动态创建 UILabel，然后将它们的标签保存在 NSMutableArray 中。然后我有一种方法可以检测这些 UILabel 上的点击（点击）。基本上，当单击已动态生成的 UILabel 时，我希望将其删除而不删除其他标签。但是，将来我可能想做更多而不是删除。但此刻我觉得我陷入了死胡同，试图找到一种方法来做到这一点。有任何想法吗？

这是我的代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
// set corner radius
coverview.hidden=YES;
labeltextfield.hidden=YES;
textcreate.hidden=YES;

labeltags = [NSMutableArray  array];
labeltext = [NSMutableArray array];

}

-(IBAction)removeboard
{
[labeltextfield resignFirstResponder];
}

-(void)showtextcreator {
// Create bg cover
coverview.hidden=NO;
labeltextfield.hidden=NO;
textcreate.hidden=NO;

//Make sure creating screen is always on top
[self.view bringSubviewToFront:coverview];
[self.view bringSubviewToFront:labeltextfield];
[self.view bringSubviewToFront:textcreate];

}

-(void)createtext {    
NSInteger obj = [labeltags count] +1 ;
[labeltags addObject:[NSNumber numberWithInteger:0]];

int posx = arc4random() % 300 ;
int posy = arc4random() % 400 ;
int frame = arc4random() % 400 ;

NSString *txt = labeltextfield.text;
//  NSString *framename = (@"frame%i",frame);

[labeltext addObject:txt];

[labeltags addObject:[NSNumber numberWithInteger:0]];

CGRect labelframe = CGRectMake( posx, posy, 100, 30);
 label = [[UILabel alloc] initWithFrame: labelframe];
[label setText: [NSString stringWithFormat:@"%@", txt]];
[label setTextColor: [UIColor orangeColor]];
label.backgroundColor = [UIColor clearColor];
label.tag=obj;
[self.view addSubview: label];

label.userInteractionEnabled = YES;

UIPanGestureRecognizer *gesture = [[UIPanGestureRecognizer alloc]
                                    initWithTarget:self
                                    action:@selector(labelDragged:)];
[label addGestureRecognizer:gesture];

UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapAction)];

[label addGestureRecognizer:recognizer];

coverview.hidden=YES;
labeltextfield.hidden=YES;
textcreate.hidden=YES;

}

- (void)labelDragged:(UIPanGestureRecognizer *)gesture
{
label = (UILabel *)gesture.view;
CGPoint translation = [gesture translationInView:label];

// move label
label.center = CGPointMake(label.center.x + translation.x,
                           label.center.y + translation.y);

// reset translation
[gesture setTranslation:CGPointZero inView:label];
}

- (void)tapAction {
    UILabel *labelnew = (UILabel *)[self.view viewWithTag:1];
    NSLog(@"Text is %@",labelnew.text);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T18:42:48.730

```
UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapAction:)];
[label addGestureRecognizer:recognizer];

- (void)tapAction:(UITapGestureRecognizer *)tapGesture {
    UILabel *labelTapped = (UILabel *)tapGesture.view;
   //delete it using removeFromSuperView or do whatever you need with tapped label

} 
```

细节：

1.修改你的`-(void)createtext`方法。

2：为目标添加参数`UITapGestureRecognizer`

3.接收发送者手势`- (void)tapAction:`

4.得到挖掘 `UILabel`。

就是这样。

# php - WordPress - 在子类别 slug 上显示自定义分类父类别

> ID：15532032
> 
> 赞同：2
> 
> 时间：2013-03-20T18:39:20.317
> 
> 标签：php, wordpress, wordpress-theming

我正在使用[InkThemes 的 GeoCraft Theme](http://www.98london.com/)作为新网站的商业目录。与其他类似的主题一样，它仅用于一个城市的列表，但我想扩展它以显示不同城市的列表。

为此，我将在主题的自定义分类法上使用类别 (listcat)、城市的父类别和业务类别本身的子类别。

所以，我需要这样的东西：

*   纽约（父）- URL：mywebsite.com/listcat/new-york/
*   纽约 >> 餐厅 - 网址：mywebsite.com/listcat/new-york/restaurants/
*   洛杉矶 >> 餐厅 - 网址：mywebsite.com/listcat/los-angeles/restaurants/
*   洛杉矶 >> 酒吧 - 网址：mywebsite.com/listcat/los-angeles/bars/
*   芝加哥 >> 餐厅 - 网址：mywebsite.com/listcat/chicago/restaurants/

...等等。

相反，子类别不显示父类别（纽约、洛杉矶和其他城市名称）。

有谁知道我怎样才能开始实现这一目标？我搜索了相同的问题，但没有找到。我知道如何使用 WordPress 并使用它多年，但可以完成这项任务。编辑：

我找到了用于为目录列表注册类别分类的代码：

```
// Register custom taxonomy for category
register_taxonomy(CUSTOM_CAT_TYPE, array(POST_TYPE), array("hierarchical" => true,
    "label" => CUSTOM_MENU_CAT_LABEL,
    'labels' => array('name' => CUSTOM_MENU_CAT_TITLE,
        'singular_name' => CUSTOM_MENU_SIGULAR_CAT,
        'search_items' => CUSTOM_MENU_CAT_SEARCH,
        'popular_items' => CUSTOM_MENU_CAT_SEARCH,
        'all_items' => CUSTOM_MENU_CAT_ALL,
        'parent_item' => CUSTOM_MENU_CAT_PARENT,
        'parent_item_colon' => CUSTOM_MENU_CAT_PARENT_COL,
        'edit_item' => CUSTOM_MENU_CAT_EDIT,
        'update_item' => CUSTOM_MENU_CAT_UPDATE,
        'add_new_item' => CUSTOM_MENU_CAT_ADDNEW,
        'new_item_name' => CUSTOM_MENU_CAT_NEW_NAME,),
    'public' => true,
    'show_ui' => true,
    "rewrite" => true)
); 
```

可能我应该用重写来改变一些东西，有人已经这样做了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-14T12:27:34.707

谢谢，工作！

只需在分类的 rewrite=>array() 中添加 'hierarchical' => true ，如下所示：

`register_taxonomy( 'BLABLABLABIG-TAXONOMY', 'talalalala', array( 'hierarchical' => true,. . . . . . . . . . 'rewrite' => array( 'slug' => 'categories','hierarchical' => true ))`

然后返回永久链接设置并保存它们以刷新重写规则，瞧！

# iphone - 如何在 LLDB 中使用浮点数作为参数？

> ID：15532034
> 
> 赞同：0
> 
> 时间：2013-03-20T18:39:25.967
> 
> 标签：iphone, xcode, cocoa-touch, gdb, lldb

我正在调试一个`UIProgressView`. 具体来说，我正在调用`-setProgress:`and `-setProgress:animated:`。

当我在 LLDB 中调用它时，使用：

```
p (void) [_progressView setProgress:(float)0.5f] 
```

progressView 的进度值为 0。显然，LLDB 没有正确解析浮点值。

知道如何让 LLDB 正确解析浮点参数吗？

顺便说一句，我在 GDB 中遇到了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:01:26.747

在 Xcode 4.5 及之前的版本中，这是一个常见问题。如果我没记错的话，真正发生的是旧的 C 无原型类型提升规则生效。如果你传递一个浮点值，它的类型是 double。如果你传递一个整数值，它会作为 int 传递，诸如此类。如果您编写 (float)0.8f，lldb 将获取 (float) 的这 4 个字节并将它们传递给读取 8 个字节并将其解释为双精度的东西。

在 Xcode 4.6 中，如果可以的话，lldb 将从 Objective-C 运行时获取参数类型，因此它知道参数在此处实际上是浮动的。你甚至不应该需要（浮动）演员。

我的猜测是，当你给 lldb 一个指向 object 的指针时`p (void) [0x260da630 setProgress:...`，表达式解析器不会查看对象的 isa 来获取类并从中获取类型。一旦您向对象地址添加了强制转换，它就会获得类型。

我*认为*，当您为 gdb 编写代码时`setProgress:(float)0.8f`，它会将此作为一个特殊指示，表明该参数是一个浮点类型——本质上，您是在提供原型。这是我认为 lldb 的表达式解析器应该在未来一段时间内做的事情，但是使用 clang 来完成所有表达式解析的事实意味着将这些非标准的含义硬塞进去有点困难。（当然，已经有一些`p $r0`作品了；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:27:03.313

发现了问题。实际上，我的 LLDB 命令看起来略有不同：

```
p (void) [0x260da630 setProgress:(float)0.8f animated:NO] 
```

`0x260da630`我的 UIProgressView在哪里。显然，调试器确实需要知道接收对象的确切类型并且不尊重参数的强制转换，所以

```
p (void) [(UIProgressView*)0x260da630 setProgress:(float)0.8f animated:NO] 
```

作品。（即使投射到`id`是不够的！）

感谢您的评论，Martin R 和 Martin Ullrich，并很抱歉破坏了我的问题以提高可读性！

顺便说一句，我发誓，我也使用了房产而不是地址。但也许重启 Xcode 也有帮助……</p>

# c++ - 为什么我不能再为数组分配任何东西

> ID：15532037
> 
> 赞同：1
> 
> 时间：2013-03-20T18:39:35.487
> 
> 标签：c++, arrays, char, iostream

我有一个链表类的实现（出于奇怪的原因使用 char 数组）

```
list_node::list_node(const std::string & input, int start, int end) {
std::cout << "1 arg constructor called" << std::endl;

letters = new char[end - start + 1];
int i = start;

for (i = start; i < end; i++) {
    letters[i] = input[i];
}

letters[i] = '\0';

std::cout << letters << std::endl;
previous = NULL;
next = NULL;
} 
```

我无法理解的是，第一次调用此方法时，它起作用了。此后，它没有。单步执行 Eclipse 中的调试器，for 循环的主体根本不执行！我添加了

```
letters[i] = '\0' 
```

确保我的数组以空值结尾，没有区别。

我有另一种方法，它接收指向链表中前一个节点的指针。我只是省略了它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:41:42.430

似乎您实际上并不想使用 索引`letters`，`i`因为它从 开始`start`。如果`start`大于`0`，那么您最终会跑过动态分配的数组的末尾。相反，你想要：

```
letters[i - start] = input[i]; 
```

进而：

```
letters[i - start] = '\0'; // or end - start 
```

# java - 减少继承中的代码重复

> ID：15532039
> 
> 赞同：0
> 
> 时间：2013-03-20T18:39:43.123
> 
> 标签：java, if-statement, inheritance, bluej

该方法使用扫描仪读取第一类和第二类的数据，然后将它们存储在拖车类的 ArrayList 中。First 和 Second 继承自 Main Class。我遇到的问题是我创建的对象的重复。

我怎样才能只创建一个并将其用于两者。

```
import java.io.File;

import java.io.FileNotFoundException;

import java.util.*;

public class Auto {
    private ArrayList<Main> lists;

    public Auto() {
        lists = new ArrayList<Main>();
    }

    public void storeData(Main main) {
        list.add(main);
    }

    public void readFile(String filePath) throws FileNotFoundException {

        File file = new File(filePath);
        Scanner input = new Scanner(file);
        String dataToBe;
        while (input.hasNext()) {
            String lines = input.nextLine().trim();
            Scanner scanner = new Scanner(lines).useDelimiter("\n[ ]*,");
            if (lines.startsWith("Data")) {
                if (lines.startsWith("FirstData")) {
                    dataToBe = "first";
                } else if (lines.startsWith("SecondData")) {
                    dataToBe = "second";
                }

            } else if (dataToBe.equals("first")) {
                Main main = new First();
                main.readData(scanner);
                storeData(main);

            } else if (dataToBe.equals("second")) {
                Main main = new Second();
                main.readData(scanner);
                storeData(main);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:37:02.143

### 好的，您可能认为它冗长，但这可能是我在您的限制下会这样做的方式。

```
public void readFile(String filePath) throws FileNotFoundException {

    final Pattern pattern = Pattern.compile("\n[ ]*,");
    final Scanner fileInput = new Scanner(new File(filePath));

    while (fileInput.hasNextLine()) {
        final String line = fileInput.nextLine().trim();
        final Matcher matcher = pattern.matcher(line);
        final StringBuilder builder = new StringBuilder();

        byte flag = 0;
        while (matcher.find()) {
            final String match = matcher.group();
            if(match.startsWith("FirstData")){ flag = 1;}
            else if(match.startsWith("SecondData")){flag = 2;}
            builder.append(line).append(",");
        }

        Main mainObj = (flag == 1) ? (new First()) : (flag == 2) ? (new Second()) : null;
        if(null != mainObj){
            mainObj.readData(builder.toString());
        }
    }
} 
```

上面的方法确实要求您在参数中接受 String 而不是 Scanner，但是传递给每个方法的 CSV 格式让每个类的行为处理工作。

# sql - 按列分组以获取列中具有最大值的行

> ID：15532044
> 
> 赞同：0
> 
> 时间：2013-03-20T18:40:05.220
> 
> 标签：sql, database, database-design, greatest-n-per-group

我正在实施通知系统。我的表结构有点像这样..

> > id（自动递增主键）
> > user_id（应显示通知的用户的用户 ID ，int）trigger_by（
> > 触发通知的用户，int）
> > post_id（存在通知的帖子，int）
> > type（通知的类型, int)
> > seen (通知是否被读取, bool)

当我将通知标记为已看到时，我使用的是 post_id 和 type，这意味着我们可以安全地假设，如果看到具有最大 id 的行，则该 post_id 和 type 的所有先前行都会被看到。

现在，我想获取与该 post_id 和类型的先前条目相结合的行，以及为该 post_id 和类型注册的行数。我目前的查询是

```
select max(x.id) as id, 
   x.post_id as post_id, 
   x.seen as seen, 
   x.user_id as user_id, 
   x.triggered_by as triggered_by, 
   x.type as type, 
   x.count as count
from (SELECT notification.id, 
       notification.post_id, 
       notification.user_id, 
       notification.triggered_by, 
       notification.type, 
       c.count,  notification.seen 
     FROM `notification`
         join (select post_id, type, count(id) as count 
               from notification group by post_id, type) c 
           on c.type=notification.type 
             and c.post_id=notification.post_id 
     Where notification.user_id=1) x 
Group by post_id 
Order by id desc limit 10 
```

这个查询的问题是，最外层查询的“group by”子句返回任何随机行的“seen”列，因为我希望它返回数据，然后从具有最大 id 的行开始计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:06:23.720

尝试这个：

```
 Select id, post_id, seen,
    user_id, triggered_by, type, 
   (Select Count(*) From notification
    Where type = N.Type
      And post_id = n.post_id) Count
 From Notification n
 where user_id = 1
 Order by id desc limit 10 
```

除了“结合该 post_id 和类型的先前条目”是什么意思？您是说希望此查询将源表中不同行的值合并到一行输出中吗？就像从一行中获取 post_id 一样，但从一些不同的较早行中获取 Triggered_By？

# linux - 如何使用命令或脚本将分隔符放在文本文件中

> ID：15532045
> 
> 赞同：3
> 
> 时间：2013-03-20T18:40:13.130
> 
> 标签：linux

我有一个文本文件，我想在某些字符之后放置分隔符（修复），。like 在`1-3`字符之后放置一个分隔符（任何类似 ,）`4`比`5`比`6-17 .....`

文件看起来像这样（原始）

```
22503003673916972040504700538884720121008175657358045042677480191000000919046068826 
```

我想要这样的文件

```
225,0,3,003673916972,0405047005388847,20121008175657,3580450426774801,91,000000919046068826, 
```

请建议任何可以完成这项工作的命令或脚本？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:57:59.877

我会使用python：

```
#!/usr/bin/env python

a='22503003673916972040504700538884720121008175657358045042677480191000000919046068826'

# python strings are 0-indexed, just
# add the indexes below
delim=[2, 3, 4, 16]
A=""

for n, i in enumerate(a):
    if n in delim:
        A+='%s,' % i
    else:
        A+=i

print A 
```

输出：

```
$ ./delim.py 
225,0,3,003673916972,040504700538884720121008175657358045042677480191000000919046068826 
```

它也可以使用列表推导式写得非常简洁：

```
>>> "".join([i+',' if n in delim else i for n, i in enumerate(a)])
'225,0,3,003673916972,040504700538884720121008175657358045042677480191000000919046068826' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:12:41.553

使用 sed：

```
sed "s/^.\{4\}/&,/;s/.\{6\}/&,/;s/.\{8\}/&,/;s/.\{20\}/&,/;s/.\{37\}/&,/;s/.\{52\}/&,/;s/.\{69\}/&,/;s/.\{72\}/&,/;s/.\{91\}/&,/" filename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T20:13:26.887

您可以在 bash 脚本中使用 head 和 tail 命令。首先查看终端中的手册`man head`，`man tail`您将了解详细信息。我想展示我的逻辑，我不知道这是不是好主意。假设您的文件名是**original.txt** 现在像这样读取前 3 个字符

```
var1=$(head -c 3 original.txt) 
```

前三个字符存储在变量 var1 中，即 225 将该值存储在另一个文件中，让我们说**final.txt**通过放置分隔符。现在这次读取前四个字符，如下所示

```
var2=$(head -c 4 original.txt) 
```

前四个字符存储在变量 var2 中，即 2250 在临时文件中回显它`echo var2>temp.txt`

但是这次你必须像下面这样使用tail

```
var3=$(tail -c 1 temp.txt) 
```

这里最后一个字符存储在变量 var3 即 0 中，使用分隔符将此 var3 附加到文件 final.txt 中。这次 final.txt 必须是这个样子`255,0,`

下一个字符可以像上面一样完成。我们也可以使用循环来做到这一点。

# r - 根据多个输入从表中选择适当的列

> ID：15532049
> 
> 赞同：1
> 
> 时间：2013-03-20T18:40:27.587
> 
> 标签：r, if-statement, web, dataframe, shiny

**我在R**的闪亮包中构建了一个小应用程序，它根据输入 ID/名称显示来自选定数据帧的一些列。我的虚拟数据如下所示（代码如下）：

```
ID1 ID2 ID3 ID4  Client Amount
1   NA  333 3344 John   100
1   88  NA  3344 John   200
1   86  777 8888 Mike   300
3   66  987 4545 Dyke   400
4   11  123 3636 Vike   500 
```

注意，ID1 可能每个 ID 有多个记录，ID4 和 Client 也可能有多个记录，但 ID4 或 Client 相同的多条记录不能有不同的 ID1。理想情况下，我想根据 ID1 或 ID4 操作服务器端的数据（其他记录可以与它们都匹配）。

因此，我构建了 6 个输入、4 个用于 ID 的数字输入和 2 个用于客户端名称（列表和文本输入）的文本输入，并希望执行以下操作：

> 如果 ID1 没有输入，则按顺序取最后一个输入（例如，如果有客户文本、客户列表、ID2 和 ID3 的输入，则选择 ID3），并将其与 ID4 匹配，除非其 ID4。
> 
> 那么如果有ID1的输入输出表基于ID1输入，如果ID1没有输入则输出表基于ID4。

我唯一的解决方案是“暴力破解”它，因为我是编程新手，但是因为我想显示 20 个表格，所以这将是疯狂的代码（我知道），我想必须有一个优雅的解决方案。代码>

**ui.R:**

```
#ui.R
library(shiny)
dataset = data.frame(ID1 = c(1,1,1,3,4), ID2 = c(NA,88,86,66,11), 
                     ID3 = c(333,NA,777,987,123), ID4 = c(3344,3344,8888,4545, 3636), 
                     Client = c("John", "John", "Mike", "Dyke", "Vike"), 
                     Amount = c(100,200,300,400,500))

shinyUI(bootstrapPage(
    headerPanel("Tabsets"),
    sidebarPanel(
        textInput('clientN', 'Client Name'),
        selectInput('client', 'Client', c('None','John','Mike', 'Dyke', 'Vike')),
        numericInput('id2', 'ID 2'),
        numericInput('id3', 'ID 3'),
        numericInput('id4', 'ID 4'),
        numericInput('id1', 'ID 1')
    ),
    mainPanel(
        tabsetPanel(
            tabPanel("1", tableOutput("tableA")),
            tabPanel("2", tableOutput("tableA"))
    )))) 
```

**服务器.R**

```
#server.R
library(shiny)
dataset = data.frame(ID1 = c(1,1,1,3,4), ID2 = c(NA,88,86,66,11), 
                     ID3 = c(333,NA,777,987,123), ID4 = c(3344,3344,8888,4545, 3636), 
                     Client = c("John", "John", "Mike", "Dyke", "Vike"), 
                     Amount = c(100,200,300,400,500))

shinyServer(function(input, output) {

    select <- reactiveTable(function() {
        sel <- 0
        if (input$clientN != NA)
            sel <- 1
        if (input$client != 'None')
            sel <- 2
        if (input$id2 > 0)
            sel <- 3
        if (input$id3 > 0)
            sel <- 4
        if (input$id3 > 0)
            sel <- 5
        if (input$id1 > 0)
            sel <- 6
        sel
    })

    output$tableA <- reactiveTable(function() {
        if(select == 0)
            table <- dataset

        if(select == 1)
            table = dataset[dataset$Client == input$clientN, c('Client','Amount')]

        if(select == 2)
            table = dataset[dataset$Client == input$client, c('Client','Amount')]

        if(select == 3)
            table = dataset[dataset$ID2 == input$id2, c('Client','Amount')]

        if(select == 4)
            table = dataset[dataset$ID3 == input$id3, c('Client','Amount')]

        if(select == 5)
            table = dataset[dataset$ID4 == input$id4, c('Client','Amount')]

        if(select == 6)
            table = dataset[dataset$ID1 == input$id1, c('Client','Amount')]

    table
    })
}) 
```

* * *

但是我实际上如何在一个函数中制作输入是否存在于 ID1 或其他输入中，如果仅在 ID1 以外的输入中将它们映射到 ID4，然后在另一个函数中通过 ID4 输出表，除非有 ID1 的输入，在这种情况下输出按 ID1 表？

我认为这也是一般的编程问题，而不是特定于语言或特定于包的问题，​​所以如果你无论如何都可以解释，我可以在**R**中实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-07T12:36:03.507

`[[inputId]]`当您分别访问输入小部件和数据框列时，您可以执行类似的操作`[["column"]]`。

示例应用程序的注释应该解释发生了什么。

```
# https://stackoverflow.com/questions/15532049/select-appropriate-columns-from-table-based-on-multiple-input

#ui.R
library(shiny)

dataset = data.frame(ID1 = c(1,1,1,3,4), ID2 = c(NA,88,86,66,11),
                     ID3 = c(333,NA,777,987,123), ID4 = c(3344,3344,8888,4545, 3636),
                     Client = c("John", "John", "Mike", "Dyke", "Vike"),
                     Amount = c(100,200,300,400,500))

ui <- shinyUI(fluidPage(

  headerPanel("Tabsets"),
  sidebarPanel(
    textInput('clientN', 'Client Name'),
    selectInput('client', 'Client', c(unique(dataset[["Client"]])), ""),
    numericInput('id2', 'ID 2', 0, min = 0),
    numericInput('id3', 'ID 3', 0, min = 0),
    numericInput('id4', 'ID 4', 0, min = 0),
    numericInput('id1', 'ID 1', 0, min = 0, max = max(dataset[["ID1"]]))
  ),
  mainPanel(
    tabsetPanel(
      tabPanel("1", tableOutput("tableA"))#,
      #tabPanel("2", tableOutput("tableB"))
    ))
))

#server.R
server <- function(input, output, session) {
  IsInputValid <- function(inputId) {
    Value <- input[[inputId]]
    # Sort out values with no (valid = truthy) value
    if (!isTruthy(Value)) return(FALSE)

    # Verify if value makes sense
    if (is.numeric(Value))
      return( Value > 0 )
    else if (is.character(Value))
      return( Value %in% trimws(dataset[["Client"]]) )
  }

  # Returns a list that contains the selectors needed to create the needed subset of `dataset`
  # The two vectors ant the top define the names of the input widgets `InpOrder` and the
  # columns of `dataset` that these inputs shall be mapped to.
  # You can use arbitrary vectors for different tables
  select <- reactive({
    ColumnMap <- c("Client", "Client", "ID2", "ID3", "ID4", "ID1")
    InpOrder  <- c("client", "clientN", "id2", "id3", "id4", "id1")

    # Loop through all the input elements specified in `InpOrder` and find out if they
    # have a meaningful value. `Index` is `TRUE`/`FALSE` after this operation.
    Index <- vapply(InpOrder, IsInputValid, logical(1))
    # Determine the last input element with the highest index in `InpOrder`. 
    Index <- as.integer(Index) * 1:length(InpOrder)

    if (sum(Index) == 0)
      return(NULL)
    else
      return(list(value = InpOrder[max(Index)], column = ColumnMap[max(Index)]))
  })

  # Render `dataset`
  output$tableA <- renderTable({
    # use complete data set if there is no valid selector
    if (!isTruthy(select())) return(dataset)

    # Select the proper subset
    table <- dataset[dataset[[select()$column]] == input[[select()$value]], c('Client','Amount')]
    # Remove rows that are all `NA`
    table <-  table[rowSums(is.na(table[ , 0:ncol(table)])) < ncol(table), ]

    return(table)
  })
}

shinyApp(ui, server) 
```

特别说明：我不得不切换“client”和“clientN”，因为它们`selectInput`总是返回一个有效值并且总是胜过“client”。我还必须更改一些已弃用的闪亮语句。

# javascript - 代码未在 IE 中与 Jquery 同步运行

> ID：15532055
> 
> 赞同：1
> 
> 时间：2013-03-20T18:40:40.213
> 
> 标签：javascript, internet-explorer, jquery

我在让 IE 同步运行 jscript 代码时遇到了很大的困难。其他浏览器没有问题。下面是代码示例：

```
function renew_order() {
    $.ajaxSetup({async:false});
    // These 3 lines are to disable 2 buttons and show a progress indicator.  This never happens,  
    // which is the main problem.
    $('#cancel_order_button').attr("disabled", "disabled");
    $('#renew_order_button').attr("disabled", "disabled");
    $('#renew_order_load').show();

    // Make some Ajax call to do some processing
    $.getJSON(url, function(json) {
    $.each (json, function (type, name) {
        new_order_id = json.OrderId;
        });
    });

    // Close the modal box this is diaplyed on and display some results on the web page
$.modal.close();
display_new_order(order_list);
} 
```

基本上，代码运行，模态框关闭，结果显示出来。但是模式框上的按钮在进程运行时永远不会显示为禁用。这似乎只是 IE 的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:50:30.513

尝试改用 prop 函数。

```
$(".example").prop("disabled", true); 
```

如果这不起作用

```
document.getElementById("example").disabled = true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:59:51.087

我认为这与同步性没有任何关系，因为在进行 ajax 调用之前就应该禁用按钮。检查控制台窗口中的 javascript 错误——我猜你在那里遇到了一些问题。

# android - Facebook 登录缺少 UI

> ID：15532060
> 
> 赞同：0
> 
> 时间：2013-03-20T18:40:53.163
> 
> 标签：android, facebook, facebook-login

在我登录 Facebook 后，会显示本机对话框，但是当我按 OK 时没有任何反应，安装 facebook.apk 时应用程序不会更新 UI，但它可以从 WebView 登录（没有 facebook.apk）正常工作。

有什么建议么？

我完成了入门和如何：使用 Facebook 登录教程，我的代码看起来像这些并显示它很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:05:02.807

我在[这里](https://stackoverflow.com/questions/15036956/android-facebook-sample-app-doesnt-login-when-fb-app-installed/15037770#15037770)回答了同样的答案，这对这个人有用。

***回答：***

如果您的手机中安装了默认的 Facebook 应用程序，或者您尝试在 Google Play 上上传您的应用程序，那么您需要一个不同的 KeyHash。因为，当您开发您的 FB 应用程序时，您已经使用默认 debug.keystore 创建的密钥哈希注册了您的 FB 应用程序。

所以，现在你需要一个不同的 KeyStore 来生成不同的 KeyHash。你需要一个签名的密钥库，你可以在[本教程](https://www.youtube.com/watch?v=IYhJp-jqJyM)的帮助下获得，在生成新的密钥库之后，生成一个密钥哈希并使用这个新的密钥哈希注册你的 FB 应用程序。这应该有效。要生成新的 KeyHash，您可以点击[此链接](https://stackoverflow.com/questions/5306009/facebook-android-generate-key-hash/12405323#12405323)

# ios - '[self theArray] =' 而不是 'NSArray *theArray ='

> ID：15532063
> 
> 赞同：0
> 
> 时间：2013-03-20T18:40:59.647
> 
> 标签：ios, objective-c, nsarray

如果我想创建一个 2x2 数组，我会这样做：

```
NSArray *theArray = [NSArray arrayWithObjects:
    [NSArray arrayWithObjects:@"String1",@"String2",nil],
    [NSArray arrayWithObjects:@"String3",@"String4",nil],
nil]; 
```

但是，如果我想以另一种方式创建它，我会收到错误“表达式不可分配”

```
[self theArray] = [NSArray arrayWithObjects:
    [NSArray arrayWithObjects:@"String1",@"String2",nil],
    [NSArray arrayWithObjects:@"String3",@"String4",nil],
nil]; 
```

在上面的示例中使用我的 [self theArray] 的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T18:42:29.090

```
self.theArray = [NSArray arrayWithObjects:... 
```

`[self theArray]`是访问器，而不是修改器

或者你可以使用

```
[self setTheArray:[NSArray arrayWithObjects:...]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T18:48:00.613

属性分配是使用点符号完成的。要保持简短，请使用`NSArray`文字语法。

```
self.theArray = @[
    @[@"String1", @"String2"],
    @[@"String3", @"String4"]
]; 
```

这假设您`theArray`当然声明为属性并且设置器可用：

```
@property(strong) NSArray *theArray; 
```

# mysql - 触发每一行

> ID：15532064
> 
> 赞同：1
> 
> 时间：2013-03-20T18:41:03.120
> 
> 标签：mysql, triggers

大家好，我正在尝试创建一个触发器，以便如果啤酒的价格上涨超过 1 美元，那么我将酒吧的名称添加到 RIPOFFBAR 表中。

```
CREATE TRIGGER PriceTrig
 AFTER UPDATE ON Sells
 FOR EACH ROW
BEGIN
IF (NEW.price > OLD.price + 1.00)
THEN
INSERT INTO RipoffBars(bar)
 VALUES(NEW.bar);
 END IF;
 END; 
```

正如你所看到的，我使用了 FOR EACH ROW BEGIN 和 IF 语句但由于某种原因它不起作用，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-20T13:27:31.210

当您尝试更新行时，您犯的第一个错误是使用**“ trigger_time = AFTER ” 。**根据mysql手册：

在 BEFORE 触发器中，如果您具有 UPDATE 权限，您还可以使用 SET NEW.col_name = value 更改其值。这意味着您可以使用触发器来修改要插入新行或用于更新行的值。`(Such a SET statement has no effect in an AFTER trigger because the row change will have already occurred.)`

有关详细信息，请从此处查看手册：http: [//dev.mysql.com/doc/refman/5.6/en/trigger-syntax.html](http://dev.mysql.com/doc/refman/5.6/en/trigger-syntax.html)

我创建了两个表，插入数据并根据您的信息编写触发器：

**创建表：**

表格1 ：`create table sells (beer_name varchar(200),beer_price int(20));`

表 2：`create table ripo_off_bar (beer_name varchar(200));`

**插入 ：**

```
Insert into sells values("Root Beer", 2); 
```

**扳机 ：**

```
DELIMITER $$

CREATE TRIGGER price_update BEFORE UPDATE ON sells

FOR EACH ROW 

BEGIN 

IF(NEW.beer_price > OLD.beer_price + 1) THEN  

INSERT INTO ripo_off_bar (beer_name) VALUES (NEW.beer_name);

END IF;

END;$$ 
```

**更新 ：**

```
update sells SET beer_price=8 where beer_name="Root Beer"; 
```

之后，如果您**查看**ripo_off_bar 表，您将看到已添加更新的 beer_name 信息！：

**看法 ：**

```
SELECT * FROM ripo_off_bar; 
```

我还添加了编码的屏幕截图。希望这些能帮助您完成任务。编码快乐！！！

![触发器创建和更新值](../Images/83f7960cb9c10dd80aea8ca016f5063d.png)

# spring - JPA 2.0 与 javax.persistence.sharedCache.mode

> ID：15532065
> 
> 赞同：1
> 
> 时间：2013-03-20T18:41:07.273
> 
> 标签：spring, jpa, eclipselink, spring-orm, shared-cache

使用 Spring 3.2.0、Eclipselink 2.5.0-M9

当 persistence.xml 包含：

```
<shared-cache-mode>ENABLE_SELECTIVE</shared-cache-mode> 
```

然后，如果我在运行时通过 emf.getProperties() 检查 EntityManagerFactory，则未设置此属性。

但是，如果我把它放在我的 Spring entityManagerFactory 配置中：

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  ...
  <property name="jpaPropertyMap">
    <map>
      <entry key="javax.persistence.sharedCache.mode" value="ENABLE_SELECTIVE" />
    </map>
  </property>
</bean> 
```

然后我可以从 emf.getProperties() 检索属性

此外，似乎在使用 spring 配置时，实际上并未启用共享缓存。这让我相信我没有在弹簧容器中正确设置它。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:45:23.053

```
<shared-cache-mode> 
```

不是持久化单元属性，而是persistence.xml 中的一个元素。我不确定将“ `javax.persistence.sharedCache.mode`”设置为属性的作用，但我猜它只是设置为持久性单元属性，而被忽略。

但默认情况下，EclipseLink 启用共享缓存，因此您无需配置它。

如果您没有看到正在使用缓存，则可能是由于 Spring 错误，[https://jira.springsource.org/browse/SPR-7753](https://jira.springsource.org/browse/SPR-7753)，在这种情况下，使用**EclipseLinkJpaDialect**`setLazyDatabaseTransaction()`中的选项可以解决问题。

 ****ENABLE_SELECTIVE**我认为仅对具有 的实体启用缓存`@Cacheable(true)`，因此这可能不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T13:39:36.740

我发现这个解决方法可以在 Spring 环境中的 EclipseLink 中启用共享缓存：

```
@Bean
public EntityManagerFactory entityManagerFactory() {
    LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();
    factory.setDataSource(dataSource());
    factory.setPersistenceUnitName("main");

    final EclipseLinkJpaDialect customDialect = new EclipseLinkJpaDialect() {
        @Override
        public ConnectionHandle getJdbcConnection(EntityManager entityManager, boolean readOnly) throws PersistenceException, SQLException {
            // Hides: return super.getJdbcConnection(entityManager, readOnly);
            // IMPORTANT LINE
            return null;
        }
    };

    // IMPORTANT LINE
    customDialect.setLazyDatabaseTransaction(true);

    EclipseLinkJpaVendorAdapter customAdapter = new EclipseLinkJpaVendorAdapter() {
        @Override
        public JpaDialect getJpaDialect() {
            return customDialect;
        }
    };

    customAdapter.setDatabase(Database.ORACLE);
    factory.setJpaVendorAdapter(customAdapter);

    factory.afterPropertiesSet();
    return factory.getObject();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-15T12:16:50.823

我发现[这篇文章](http://www.developer.com/java/using-second-level-caching-in-a-jpa-application.html)非常有用。
结论**是**写作，

> JPA 缓存足够灵活，可以在持久性单元设置或类设置的帮助下配置每个类或全局配置。我们可以在 persistence.xml 中设置 shared-cache-mode 元素，或者在创建实体管理器工厂时动态设置 javax.persistence.sharedCache.mode 属性。在并发事务中，为了更好的性能，将缓存模式设置为NONE可能反而会导致性能下降，不推荐；这种情况应该使用适当的锁定机制来处理。**

# java - sqlite查询android java数组

> ID：15532066
> 
> 赞同：2
> 
> 时间：2013-03-20T18:41:08.727
> 
> 标签：java, android, sqlite

嗨，我可以这样做吗？？，

```
int[] ids=new int[]{1,2,3,4,6,7,8,9,10};

db.execSQL(DELETE FROM TABLE_NAME WHERE id NOT IN ?,ids); 
```

基本上我想删除所有与我的 ids 数组不匹配的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:55:39.577

所以你的问题是你只放置了一个占位符，它将只替换为一个值，并且 args 数组应该只有一项。如果**`?`**数组中的每个项目都有 9x，它应该可以工作。

它用作一个占位符 - 一个值**（相同的顺序）**。我为你写了这段代码。看看这个。

```
int[] ids = new int[] {1,2,3,4,6,7,8,9,10};
StringBuilder query = new StringBuilder();
query.append("delete from table where column_id not in (");
for (int i = 0; i < ids.length; i++) {
    query.append("?");
    if (i < ids.length - 1) {
        query.append(",");
    }
}
query.append(")");
db.execSQL(query.toString(), ids); 
```

现在它应该可以工作了。**`?`**动态创建的查询中的字符也称为占位**符**，每个占位符将被`String[]`相同顺序的值替换。

每当您使用数据库时，我都非常推荐使用占位符。这种方法更清洁、更安全、更美观。

## API 11+ 更新

```
public int delete() {
    int[] ids = new int[] {1,2,3,4,6,7,8,9,10};
    String[] args = new String[ids.length];
    StringBuilder query = new StringBuilder();
    query.append("delete from table where column_id not in (");
    SQLiteStatement stmt = null;
    for (int i = 0; i < ids.length; i++) {
        args[i] = String.valueOf(ids[i]);
        query.append("?");
        if (i < ids.length - 1) {
            query.append(",");
        }
    }
    query.append(")");
    stmt = db.compileStatement(query.toString());
    stmt.bindAllArgsAsStrings(args);
    return stmt.executeUpdateDelete();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:24:57.933

您可以使用：

```
java.util.Arrays.toString(ids).replace('[', '(').replace(']', ')') 
```

将数组转换为合适的 SQL where 子句格式

# ruby-on-rails - 耙中止！安装设计时无法加载此类文件-omniauth

> ID：15532068
> 
> 赞同：0
> 
> 时间：2013-03-20T18:41:11.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, rake

我是 Rails 身份验证和`devise`为此目的使用的新手。

我正在按照本教程进行安装 - [http://blog.blazingcloud.net/2011/01/08/devise-authentication-in-rails-3/](http://blog.blazingcloud.net/2011/01/08/devise-authentication-in-rails-3/)

以下是我为继续安装而采取的步骤 -

1.  `gem 'devise'`在我的 GEM 文件中。
2.  捆绑安装
3.  更新`devise.rb`并`20130320174736_devise_create_users.rb`如教程所示。
4.  跑`rake db:migrate`

第 4 步后发生以下错误 -`rake aborted! cannot load such file -- omniauth`

![错误](../Images/37494ac261b95ae9389e45e7a6afaf90.png)

我首先用谷歌搜索了这个链接 - [Ruby on Rails - 在'require'中：无法加载这样的文件 -omniauth/oauth，即使我安装了omniauth](https://stackoverflow.com/questions/8190468/ruby-on-rails-in-require-cannot-load-such-file-omniauth-oauth-even-thou) < - 这个链接建议安装另一个gem omniauth

但是我检查了另外 2 个链接，他们建议取消注释`config.omniauth :github, 'APP_ID', 'APP_SECRET', :scope => 'user,public_repo'`下面的行`monkeytasks\config\initializers\devise.rb`

2 个链接 -[链接 1](https://github.com/plataformatec/devise) || [链接 2](http://devise.plataformatec.com.br/)

我不知道要按照以前安装`Act As Authenticated`的那个，但后来知道它没有用（坦率地说，我也不确定是否要在本地使用）

让我知道处理和消除此错误的正确方法。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T18:49:54.200

看起来您已经在 Devise 中启用了 Omniauth。因此，只需在您的 Gemfile 中包含 gem 并运行 bundler。

在您的 Gemfile 中包含 omniauth gem。

```
gem 'omniauth' 
```

然后，运行捆绑器

```
$ bundle install 
```

现在应该可以正常工作了。

注意：您可能还必须安装使用的提供程序。请查看以下链接以获取更多信息。 [https://github.com/plataformatec/devise/wiki/OmniAuth:-概述](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)

# php - Magento：结帐继续按钮不继续下一步

> ID：15532073
> 
> 赞同：0
> 
> 时间：2013-03-20T18:41:31.220
> 
> 标签：php, magento, magento-1.7

我正在向 Magento Onepage Checkout 添加一个部分，在遇到许多问题后，我返回并删除了所有模块和所有附加到它们的文件。我回到结帐，现在一切正常，除了“继续”按钮在我登录时卡在计费部分。我相信它已连接到**onclick="billing.save()**内联函数。我我是 Magento 的新手，也是 Stack Overflow 的新手，所以这是我的**billing.phtml**代码。如果需要更多信息，或者我是否错过了这篇文章中的一些细节，请告诉我。我很想学习如何在StackOverflow 以充分利用该站点。

```
*****
    <div class="buttons-set" id="billing-buttons-container">
        <p class="required"><?php echo $this->__('* Required Fields') ?></p>
        <button type="button" title="<?php echo $this->__('Continue') ?>" class="button" onclick="billing.save()"><span><span><?php echo $this->__('Continue') ?></span></span></button>
        <span class="please-wait" id="billing-please-wait" style="display:none;">
            <img src="<?php echo $this->getSkinUrl('images/opc-ajax-loader.gif') ?>" alt="<?php echo $this->__('Loading next step...') ?>" title="<?php echo $this->__('Loading next step...') ?>" class="v-middle" /> <?php echo $this->__('Loading next step...') ?>
        </span>
    </div>

*****
<script type="text/javascript">
//<![CDATA[
    var billing = new Billing('co-billing-form', '<?php echo $this->getUrl('checkout/onepage/getAddress') ?>address/', '<?php echo $this->getUrl('checkout/onepage/saveBilling') ?>');
    var billingForm = new VarienForm('co-billing-form');

    //billingForm.setElementsRelation('billing:country_id', 'billing:region', '<?php echo $this->getUrl('directory/json/childRegion') ?>', '<?php echo $this->__('Select State/Province...') ?>');
    $('billing-address-select') && billing.newAddress(!$('billing-address-select').value);

    var billingRegionUpdater = new RegionUpdater('billing:country_id', 'billing:region', 'billing:region_id', <?php echo $this->helper('directory')->getRegionJson() ?>, undefined, 'billing:postcode');
//]]>
</script> 
```

任何帮助深表感谢。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-02T06:06:00.457

对我来说，我只需转到系统->配置->运输方法，然后将统一运费运输方法是更改​​为否，然后将否更改为是，然后保存配置。在此结帐计费步骤之后工作正常。

# css - 如何对齐链接中的链接 至底部？

> ID：15532075
> 
> 赞同：1
> 
> 时间：2013-03-20T18:41:38.950
> 
> 标签：css

这是我的 CSS，我喜欢将*li*中的链接设置为底部。我在链接上尝试了垂直底部，但这是不行的。

```
.textResizer {
list-style-type: none;
float: right;
width: 85px;
height: 30px;
margin: 6px 12px -6px 0px;
padding: 0;
}

.textResizer li {
float:left;
margin-left:10px;
}

.textResizer a {
color:#1a5c88;
text-decoration:none;

}

.textResizer .small a{
font-size:.75em;
font-weight:bold;   
 }

.textResizer .medium a{
font-size:1em;
font-weight:bold;   
 }

 .textResizer .large a{
font-size:1.3em;
font-weight:bold;   
 } 
```

这是实际操作中的链接，[http://jsfiddle.net/HN7Hy/](http://jsfiddle.net/HN7Hy/)在此先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T18:50:48.520

一种方法是将列表项设置`inline-block`为：http `float: left`: [//jsfiddle.net/HN7Hy/2/](http://jsfiddle.net/HN7Hy/2/)

# sed - 仅删除正则表达式之后的行，同时保留正则表达式的行

> ID：15532077
> 
> 赞同：0
> 
> 时间：2013-03-20T18:41:48.257
> 
> 标签：sed

好吧，我完全被难住了......

场景：使用 Word 查看时包含 100 行文本的 .rtf 文件。一行中的“Linux”一词，下方有一个空行。我需要保留带有“Linux”的行并删除它下面的空行。但是，当使用 vi 查看它时，该行并不是真正的空白，因此处理删除空白行的帖子都不起作用。另外，我可以找到很多帖子来删除带有正则表达式和下一行的行，但我需要保留正则表达式行。文件中只有一行带有“Linux”一词。

我知道 sed 可以做到这一点，但一直无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:51:27.140

```
sed '/Linux/{n;d;}' 
```

(...And an Answer must contain at least 30 characters.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:19:31.450

也许这个？我查看了一个 RTF 文件，看起来好像有回车分隔行。因此，我将它们用作记录分隔符并删除了一行，并且能够读取结果文件并且该行消失了。我不知道它是否适用于其他情况。你必须彻底测试它是否有效。我使用了 awk，因为 rtf 文件在 Unix/Linux 中不是“有效”文本文件，我认为可能`sed`无法做到。

```
awk 'n-->0{next} /Linux/{n=1}1' RS='\r' ORS='\r' infile.rtf > outfile.rtf 
```

如果它有效，它应该丢弃带有单词“Linux”的行下方的行。

# eclipse - 如何将符号链接的 JAR 添加到 Eclipse 项目？

> ID：15532082
> 
> 赞同：2
> 
> 时间：2013-03-20T18:41:57.920
> 
> 标签：eclipse

我是一名夜班收费站工作人员，在客户开车经过时为时已晚，正在学习编程。

我在 Eclipse Juno 中有大约 20 个自学项目链接到`Guava`.

我最初在每个项目中都有`Add External JAR`of `guava-13.0.1.jar`，但后来我了解到创建一个可以导出类 ( `Order and Export`) 的“库项目”是一种更好、更快、更简单的方法，因为它不需要浏览文件系统来添加 JAR确切的完整路径，只要将“库项目”添加到`Java Build Path > Project > Required projects on the build path`.

优雅，完美运行。

`guava-14.0.1.jar`如果没有，我只需更新一个*项目*参考，所有依赖它的项目都链接到正确的存档。极好的。

不过，我真正想做的是能够通过`symlink`. 一个`tree`命令输出值 1000 字：

* * *

```
> tree
.
├── Latest
│   └── guava.jar -> ../v14.0.1/guava-14.0.1.jar
├── v13.0.1
│   └── guava-13.0.1.jar
└── v14.0.1
    └── guava-14.0.1.jar

3 directories, 3 files 
```

* * *

类似的东西。

但是，如果我尝试从 Eclipse 中指向“外部 JAR”，它会取消引用/解析/读取符号链接，包括指向的硬链接`guava-14.0.1.jar`而不是指向`guava.jar`.

这是令人沮丧和违反直觉的。

我应该通过 Eclipse 变量执行此操作吗？（例如添加变量...扩展...）

我应该以我还没有遇到过的其他*聪明的方式来做这件事吗？*

我一定可以做到的，对吧？

# javascript - 将对象添加到对象

> ID：15532083
> 
> 赞同：1
> 
> 时间：2013-03-20T18:41:58.820
> 
> 标签：javascript

我有一个如下对象：

```
var _names = { 
    'name1@gmail.com' : { 
        'bob@gmail.com' : {
            channel: '1234', 
            from: 'bob'
        }
    },
    'name2@gmail.com' : { 
        'dan@gmail.com' : {
            channel: '53345',
            from: 'dan'
        }
    }
}; 
```

我如何将以下内容添加到 name1@gmail.com：

```
 'judy@gmail.com' : {
            channel: '23233', 
            from: 'judy'
        } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T18:42:55.093

您可以使用方括号表示法添加它。由于您的键名不是有效的 JavaScript 变量名，因此您不能使用点表示法。

```
_names['name1@gmail.com']['judy@gmail.com'] = {
    channel: '23233', 
    from: 'judy'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:44:11.747

这应该有效：

```
_names['name1@gmail.com']['judy@gmail.com'] = {
    channel: '23233', 
    from: 'judy'
}; 
```

# sql - 如何在 sql workbench / j 中添加计算列

> ID：15532084
> 
> 赞同：2
> 
> 时间：2013-03-20T18:42:02.753
> 
> 标签：sql, amazon-redshift, calculated-columns

如何在 SQL workbench/j 中添加计算列（作为 amazon redshift 的客户端）

```
ALTER TABLE table_one
ADD COLUMN test_column
AS (
SELECT
(CASE WHEN LEFT(name,3) = "Ads" THEN "ok" ELSE "no" END) 
FROM table_one
)
VARCHAR(100) NULL; 
```

我也尝试`SELECT`用常量字符串值替换语句，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-06T18:28:29.623

为未来的搜索者添加：MySQL 5.7 支持计算列，它称为“生成”列。在 MySQL Workbench 中，您可以通过选择“列”选项卡中的行，单击“生成”按钮，然后在“默认/表达式”字段中添加公式（开头没有等号）来添加公式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:47:41.623

您可以通过以下方式执行此操作：

```
 ALTER TABLE table_one
    ADD COLUMN test_column VARCHAR(100) NULL;

    GO; 
```

然后通过以下方式更新所有行：

```
UPDATE table_one
SET test_column = (CASE WHEN LEFT(name,3) = "Ads" THEN "ok" ELSE "no" END) 
```

# javascript - Three.js CanvasRenderer 纹理在 safari 中损坏

> ID：15532089
> 
> 赞同：1
> 
> 时间：2013-03-20T18:42:33.993
> 
> 标签：javascript, safari, three.js, textures

我有一个基于 Three.js 的示例，我正在研究一个更大的项目。为了超级简化，我有一个带有围绕中心点运行的纹理的平面。它实际上是附加到中心点，然后旋转中心点。（进一步测试表明 parenting 和 offset from center 没有影响，只是与相机角度的不同导致了翘曲，随着角度的增加，转动相机而不是物体仍然显示翘曲）

使用 WebGL 渲染器一切正常。使用画布渲染器，我必须调整纹理加载（imageutils 无法正确加载画布，必须明确使用纹理和图像加载器），但它在 chrome 中工作正常。然而在 safari 中，当飞机移动时，纹理会暴露飞机的角落（位置会扭曲和偏移），直接放在相机上就可以了（[https://dl.dropbox.com/u/6768888/StackOverflow/Screen%20Shot% 202013-03-20%20at%202.37.47%20PM.png](https://dl.dropbox.com/u/6768888/StackOverflow/Screen%20Shot%202013-03-20%20at%202.37.47%20PM.png)），但从侧面看它真的变形了（[https://dl.dropbox.com/u/6768888/StackOverflow/Screen%20Shot%202013-03- 20%20at%202.38.04%20PM.png](https://dl.dropbox.com/u/6768888/StackOverflow/Screen%20Shot%202013-03-20%20at%202.38.04%20PM.png) , [https://dl.dropbox.com/u/6768888/StackOverflow/Screen%20Shot%202013-03-20%20at%202.38.17%20PM.png](https://dl.dropbox.com/u/6768888/StackOverflow/Screen%20Shot%202013-03-20%20at%202.38.17%20PM.png) )

我这似乎是画布渲染器中的一个错误，但我不确定，基于我之前遇到的纹理加载问题，也许有解决办法？我正在使用透支：真

```
var geometry = new THREE.PlaneGeometry(width, height, 1, 1);
    var material = new THREE.MeshBasicMaterial( { overdraw:true, map:texture, side:THREE.DoubleSide } );

    mesh = new THREE.Mesh( geometry, material ); 
```

任何想法或建议将不胜感激，不想在没有更多信息的情况下提交错误报告，因为这是我在 Three.js 的第一次真正的尝试，所以不确定是我还是系统......

还应该注意的是，删除过度绘制只是广告接缝，它不会影响移动，也使对象更大或添加更多细分只会使移动沿着那些新的中断发生，它不会从根本上改变问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:47:51.323

我的应用程序也有同样的故事。safari 中的纹理，使用画布渲染器游来游去，chrome 和 ff 都很好。使用 WebGLRenderer 一切顺利。约阿希姆

# r - 为特定命名空间中的对象赋值 - R

> ID：15532096
> 
> 赞同：1
> 
> 时间：2013-03-20T18:42:54.437
> 
> 标签：r, namespaces, scope, gwidgets

我在 gWidgets - R 中有一个处理程序，其中加载了数据：

```
 handler=function(h,...){
                     fname <- gfile(text="Choose a file", 
                                    type="open", 
                                    action="print",
                                    handler = 
                                      function(h,...){
                                        do.call(h$action, list(h$file))
                                      }
                     )
                     load(fname)
                     .GlobalEnv$SETTINGS <- setwrite
                     svalue(status_bar) <- "Settings Loaded"
                   }) 
```

您可以看到，为了使加载的内容在函数结束后仍然可用，最后我放入 GlobalEnv，否则当处理程序函数结束时，创建的“setwrite”对象在处理程序结束和函数时被销毁已经完成了。然而，这并不是我真正想要的结果，因为用户不需要该对象，但我的包中的其他功能（未导出）确实需要使用该对象。我想我需要做的是将“setwrite”变量放在那些函数范围内的某个地方，就像`package:pkgnamehere$SETTINGS <- setwrite`应该放在哪里`.GlobalEnv$SETTINGS <- setwrite`行是，但它告诉我找不到对象包。我怎样才能正确地做到这一点，以便处理程序制作的对象并放入包非导出函数/其他 gWidgets 事件处理程序的范围内。（非导出，因为这个想法是用户应该能够使用 GUI）。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T19:14:23.307

您还可以将选项存储在您的包的环境中。

```
pkgnamehere:::.options 
```

参见例如：

```
library(foreach)
foreach:::.foreachGlobals
<environment: 0x000000001448fae8> 
```

# azure - Azure 上的经典 ASP 网站“页面无法显示，因为发生了内部服务器错误。”

> ID：15532099
> 
> 赞同：9
> 
> 时间：2013-03-20T18:43:01.937
> 
> 标签：azure, asp-classic, web, cloud

我们已经将一个用经典 asp 编写的应用程序迁移到 Azure 网站（共享），一些页面只是给出错误“页面无法显示，因为发生了内部服务器错误。” 没有任何细节。这些页面在 IIS 7 或使用 IIS express 下工作正常。但是在 Azure 网站上却没有。

正如在其他一些帖子中所建议的那样，我为 Azure 上的网站配置了以下内容：

1) Web 服务器日志记录 - 开启
2) 详细错误消息 - 开启
3) Web.config - customErrors 模式关闭。

```
<customErrors mode="Off"/>
 <compilation debug="true" targetFramework="4.0"> 
```

日志消息仍然没有提供任何错误的详细信息，只是提供了以下信息：

详细错误信息：

模块 IsapiModule
通知 ExecuteRequestHandler
处理程序 ASPClassic
错误代码 0x00000000

感谢任何帮助如何调试 Azure 网站上的经典 asp 页面问题。谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T21:23:09.763

谢谢 G. Stoynev！添加自定义错误asp页面后它起作用了！我使用以下链接中的代码创建自定义错误 asp 页面

[http://support.microsoft.com/kb/224070](http://support.microsoft.com/kb/224070)

以下链接也帮助[http://www.tacticaltechnique.com/web-development/classic- asp-getlasterror-in-iis7/](http://www.tacticaltechnique.com/web-development/classic-asp-getlasterror-in-iis7/)

现在我的 web.config 中的 system.webServer 部分如下所示：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
    <httpErrors> 
     <remove statusCode="500" subStatusCode="100" />
     <error statusCode="500" subStatusCode="100" prefixLanguageFilePath="" path="/errors.asp" responseMode="ExecuteURL" /> 
   </httpErrors> 
  </system.webServer> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-21T12:38:03.977

尝试一件事（奇怪），对我有用：

尝试通过 FTP 连接到您的 Azure 网站，然后将您的网站重命名`web.config`为完全不同的名称。

我将我`web.config2`的重命名为 - Azure`"The page cannot be displayed because an internal server error has occurred."`错误消息消失了，我的 ASP.Net 应用程序再次焕发生机。

从那里，我从头开始重新创建 web.config，从我的原始版本中逐块复制它的块（看看是什么导致了问题）

是的，我知道......这是一个愚蠢的建议，但 Azure 没有给我任何关于导致错误的提示，即使打开了日志记录，这也拯救了我的理智！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-17T04:26:26.533

如果您尝试配置您无权访问 IIS 的站点（例如 Azure Web 应用），则可以在 Web.Config 中配置经典 ASP 设置。

在下面

```
<system.webServer> 
```

您可以放置​​一个

```
<asp> 
```

使用 Classic 操作方式配置各种事物的元素。

影响我的网站的财产是

```
**appAllowDebugging="true"** 
```

当您使用 Visual Studio 进行开发并安装了 Just-In-Time 调试器时，虽然这个属性很好用，但它会扰乱 Classic Asp 的错误处理。

顺便说一句，我花了很长时间才弄清楚我改变了什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-10T12:38:40.693

要将详细的错误消息发送到浏览器，您需要启用 scriptErrorSentToBrowser 属性，如下所示。

```
 <system.webServer>
       <asp scriptErrorSentToBrowser="true" />
  </system.webServer> 
```

不用说，这可能是潜在的安全风险，因此不应启用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T04:04:28.887

1.  您的问题可能出在浏览器端：确保关闭“显示友好消息”的 IE 设置
    ![在此处输入图像描述](../Images/f09f5991aab038cf41236ac590968258.png)

2.  此外，在服务器端，您必须进行一些设置以允许将错误消息发送到客户端（对不起，我只能访问该设置的 IIS 风格......不确定 Azure 中有什么）：
    ![在此处输入图像描述](../Images/c6382797093efe9aaa4339c1d05afc7f.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-31T12:40:22.103

我通过在 Azure Web 应用程序配置中打开 Logging => Diagnostics log 下的 Application log 解决了这个问题。

然后，您可以在“日志流”窗格中看到错误并修复它。

在我的情况下，以下两行中的错误`web.config`：

```
<add name="ExtensionlessUrlHandler-Integrated-4.0" 
 path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" 
 preCondition="integratedMode,runtimeVersionv4.0"/>
<remove name="ExtensionlessUrlHandler-Integrated-4.0"/> 
```

我删除了它们，它再次起作用。

# css - 溢出：隐藏；强制我的 div 左对齐

> ID：15532101
> 
> 赞同：1
> 
> 时间：2013-03-20T18:43:05.283
> 
> 标签：css, alignment, overflow, hidden

当使用此类 chrome 左对齐我的 div 时，当我检查元素并删除并添加隐藏的溢出时，它会弹回中心.....不确定问题是什么

```
.contentbody {
    width: 74%;
    padding: 0%;
    margin-right: auto;
    margin-left: auto;  
    -webkit-border-radius: 40px;
    overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:49:38.817

尝试

```
.contentbody {
    width: 74%;
    padding: 0%;
    margin: auto; 
    border-radius: 40px; /* this property can now be used without prefix */
} 
```

# flash - iframe 和 flash

> ID：15532105
> 
> 赞同：1
> 
> 时间：2013-03-20T18:43:13.323
> 
> 标签：flash, iframe

我在谷歌上搜索了很多这个问题，也许我没有正确搜索，我也没有在堆栈上找到任何东西，所以我想知道，是否有可能以某种方式禁用 Flash 在 iframe 中加载？还是在 iframe 加载后将其关闭？

# php - vTiger webservice“ACCESS_DENIED：id 拒绝执行操作的权限”

> ID：15532107
> 
> 赞同：2
> 
> 时间：2013-03-20T18:43:19.227
> 
> 标签：php, web-services, api, vtiger

我想通过 vTiger webservice 添加 SalesOrder。我正在使用这个 vtwsclib。这是代码：

```
<?php
include_once('vtwsclib/Vtiger/WSClient.php');
$url = 'http://localhost:8888';
$client = new Vtiger_WSClient($url);
$login = $client->doLogin('admin', 'zzzzzzzz');
if(!$login) echo 'Login Failed';
else {

    $data = array(
        'subject' => 'Test SalesOrder',
        'sostatus' => 'Created',
        'invoicestatus'=>'AutoCreated',
        'account_id'=> '46', // Existing account id
        'bill_street' => 'Bill Street',
        'ship_street' => 'Ship Street',
    );
    $record = $client->doCreate('SalesOrder', $data);

$error = $client->lasterror();
    if($error) {
    echo $error['code'] . ' : ' . $error['message'];
}

if($record) {
    $salesorderid = $client->getRecordId($record['id']);
}

}
?> 
```

我只得到：“ACCESS_DENIED：id 拒绝执行操作的权限”。

Account_id 存在于数据库中。其他 SalesOrder 使用相同的 account_id 但通过网页添加。我还尝试了 accout_id = "6x46" 的变体，其中 6 是 module_id。它也没有工作。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T12:00:44.770

我认为您应该尝试 11x46 的帐户 ID。Vtiger Web 服务实体 ID 与 tabid 不同。

要获得所有实体 ID 的正确列表，请在您的 MySQL 中为 CRM 执行此操作：

```
select id, name from vtiger_ws_entity; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T17:14:23.770

问题在于 vtiger 文档。在 GET 请求中添加**entityName参数。**

```
var q = "select * from Users;";
"http://vtigercrm/webservice.php?operation=query&sessionName=ABC&entityName=XYZ&query="+q 
```

This worked well for me. Although still couldn't understand that by giving any entityName or garbage string, program works !!! Please comment if you know more about this.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-27T09:50:24.913

这是一种可以帮助您生成查询的方法**`q`**

```
"http://vtigercrm/webservice.php?operation=query&sessionName=ABC&query="+q 
```

例如，您期望：

```
SELECT * FROM INVOICE WEHRE id='72xxx'; 
```

你可以做

```
buildVtigerQuery('INVOICE', ['id' => '72xx']); 
```

这是功能：

```
 protected function buildQuery(
    string $moduleName,
    array $filterData = [],
    string $attributes = '*',
    int $start = 0,
    int $limit = null
): string {
    $query = 'SELECT ' . $attributes . ' FROM ' . $moduleName . ' ';
    if (!empty($filterData)) {
        $query .= 'WHERE ';
        foreach ($filterData as $key => $value) {
            $whereOperator = (is_numeric($value) === true) ? ' = ' : ' like ';
            $value = (is_numeric($value) === true) ? $value : '%' . $value . '%';
            $query .= $key . $whereOperator . '\'' . $value . '\'' . ' AND WHERE ';
        }
    }

    if (substr($query, -11) === ' AND WHERE ') {
        $query = substr_replace($query, "", -11);
    }

    if ((!is_null($limit)) && (0 < $start)) {
        $query .= ' ORDER BY id LIMIT ' . $start . ',' . $limit;
    }

    if (!is_null($limit) && (0 >= $start)) {
        $query .= ' ORDER BY id LIMIT ' . $limit;
    }

    return $query . ';';
} 
```

我没有考虑 XSS 注入，因为我的预期查询**`q`**将写入 url

# android - 无法运行程序 尝试获取 adb 版本时访问被拒绝 Android 应用程序运行时出错

> ID：15532109
> 
> 赞同：0
> 
> 时间：2013-03-20T18:43:31.670
> 
> 标签：android, adb

我已经下载了最新的 Eclipse 和用于 android 开发的 ADT 插件，并且我已经安装了 jdk-7，并按照 android 开发站点中给出的说明添加了所有插件。我能够创建 Android 项目，我已经创建了示例虚拟设备（模拟器）

但是我的项目没有正确构建 R.java 类没有创建它在控制台中给出了这个错误

[2013-03-21 23:40:51 - adb] 意外异常'无法运行程序“H:\eclipse\adt-bundle-windows-x86-20130219\sdk\platform-tools\adb.exe”：CreateProcess 错误 = 5，访问被拒绝”，同时尝试从 'H:\eclipse\adt-bundle-windows-x86-20130219\sdk\platform-tools\adb.exe' 获取 adb 版本

我使用的是 Windows 7，在 google 中搜索并在环境变量中给出 adb.exe 路径仍然没有修复。

我正在使用 Android Developer Tools eclipse ADT 插件安装 Android SDK manager 21.1

请指导我解决这个问题:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T06:53:47.213

如果您已正确安装插件并且您无法构建项目，这意味着某些东西正在阻止您 adb.exe。

很可能是您的防病毒软件或防火墙。禁用它并检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-26T07:37:00.963

由于权限问题，也可能出现此错误。右键单击 Android SDK 文件夹和安全选项卡中的平台工具文件夹，确保“全部”可以读取和执行。在 Android Studio 中更新 Android SDK 工具后，我有时会遇到这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T13:01:36.797

是的，这是由于您的防火墙或防病毒软件...暂停它们或最好卸载它们。

# facebook-graph-api - 如何使用 FQL 计算每个朋友喜欢的特定页面的数量？

> ID：15532113
> 
> 赞同：0
> 
> 时间：2013-03-20T18:43:48.937
> 
> 标签：facebook-graph-api, facebook-fql

这是一个示例查询：

```
SELECT uid FROM page_fan WHERE page_id IN (104266592953439, 16155433, 5768707450) 
  AND uid IN (SELECT uid2 FROM friend WHERE uid1=me()) 
```

这将给我喜欢以上三个页面*的朋友的uid。*

我想要一个解决方案，让我知道每个朋友喜欢上述子集中有多少页面（前提是他们至少喜欢其中一个）。可以在子集中扩展到 20 多页的东西是理想的。

例如，如果一个朋友喜欢所有 3 个页面，列出他们的 uid 3 次就足够了。虽然我不确定这在 FQL 中是否可行。

使用 PHP Facebook SDK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:58:29.930

Graph API 没有`count`方法，因此您必须在脚本中执行此操作。

将上面的查询更改为：

```
SELECT uid, page_id FROM page_fan WHERE page_id IN (104266592953439, 16155433, 5768707450) 
  AND uid IN (SELECT uid2 FROM friend WHERE uid1=me()) ORDER BY uid 
```

然后遍历你的结果并计算每个`uid`出现的次数。

# android - 将 Android 设备连接到主机以更新数据

> ID：15532117
> 
> 赞同：0
> 
> 时间：2013-03-20T18:43:53.863
> 
> 标签：android, networking

我正在为酒店管理编写一个 Android 应用程序。每位员工都有自己的运行 Android 操作系统的平板电脑。这个应用程序有时会向主机发送数据（房间已被预订）或主机将向客户端发送数据（关于其他房间的新情况）。

主机可以是另一部 Android 智能手机或 PC，这些设备将通过同一个 wifi 网络连接在一起。

我不知道哪种方式更容易（使用智能手机作为主机或使用 PC 作为主机）。如果使用 PC，我决定 PC 将有本地服务器运行数据库，每个平板电脑将连接到该服务器并更新数据库中的数据。这容易实现吗？

请帮我解决这些问题。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:50:42.970

您想将 PC/Server 用作主机，这样您就可以运行适当的 RDBMS。

有大量示例可用于创建与各种 RDBMS 系统通信的 Android 应用程序。在您的服务器上，您将运行一个解释器（PHP、ASP.NET、Node），您的 Android 应用程序将使用 http 通过 Wifi 网络连接到它。

请参阅此处的示例： [http ://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

# javascript - 使用 Sidr 实现 2 个菜单

> ID：15532121
> 
> 赞同：0
> 
> 时间：2013-03-20T18:44:16.773
> 
> 标签：javascript, jquery, html, menu, sidebar

我会使用两个使用 Sidr ( [http://www.berriart.com/sidr/](http://www.berriart.com/sidr/) ) 的状态菜单。默认情况下，它以 260px 的类宽度打开，但希望与另一个具有更大开口的 div 一起使用。如何在一个文件中使用两个菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T05:40:43.420

我尝试了 sidr-right，当我需要 210px 宽时，我只是重新设置这 2 个元素的样式：

```
 .sidr.right {
        right: -210px;
    }

    .sidr {
        width: 210px;   
    } 
```

# batch-file - 如果在输入中找不到单词，如何批量执行操作

> ID：15532125
> 
> 赞同：0
> 
> 时间：2013-03-20T18:44:31.643
> 
> 标签：batch-file

我正在使用“查找”，以便我可以输入任何句子，只要找到某个单词，它就会完成操作并继续。但是现在我不知道如何做到这一点，所以如果输入了错误的输入，它会执行不同的操作。这是我的一些代码：

```
:Menu2
echo.
echo What can I do for you?
echo.
set /p c=Command:
echo %c% | find /i "facebook" >NUL && Start Chrome http://www.facebook.com
echo %c% | find /i "youtube" >NUL && Start Chrome http://youtube.com
echo %c% | find /i "utube" >NUL && Start Chrome http://youtube.com
echo.
set random[0]=Of Course, Master.
set random[1]=Action completed, Master.
set random[2]=Completed Action.

set /a randomIDX=%random% * 3 / 32768

echo !random[%randomIDX%]!
echo.
goto :Menu2
pause
exit 
```

我也有一个随机响应，但主要是我需要弄清楚如果没有找到这些词，如何让它“转到”其他地方，现在它只是继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:02:01.443

```
set validcommand=youtube facebook utube
set /p c=Command:
for %%i in (%validcommand%) do if defined c echo %c% | find /i "%%i" >NUL && Start Chrome http://www.%%i.com&(set c=)
if defined c echo %c% is invalid&goto somewhereelse 
```

# android - 我可以使用什么算法来优化图像选择蒙版？

> ID：15532129
> 
> 赞同：3
> 
> 时间：2013-03-20T18:44:46.590
> 
> 标签：android, c++, algorithm, opencv, image-processing

我需要一种算法来对比检测照片中的边缘。

用户将在 android 手机上用手指粗略地在图像中的对象上绘制蒙版，然后我想使用检测边缘并将蒙版调整到边缘的代码来细化选择蒙版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:56:24.040

请阅读有关霍夫变换的内容也很精明，您可以决定哪个更好/
这不是一件容易的事。
我建议您首先尝试了解它们如何与 matlab 一起工作，这是一种非常类似于 C 的语言。

[http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/canny_detector/canny_detector.html](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/canny_detector/canny_detector.html)

# html - 解析htmlagilitypack（没有id的表）vb.net

> ID：15532131
> 
> 赞同：1
> 
> 时间：2013-03-20T18:44:50.583
> 
> 标签：html, vb.net, xpath, html-table, html-agility-pack

希望能从你那里得到一些答案。

我使用 vb.net 和 htmlagilitypack 来获取数据并且它可以工作，但不是我想要的方式 =)

我有这个 html 页面（部分）：

* * *

```
<TABLE WITH=100% BORDER=4>

<TR>
<TH><A HREF="http:/cgi-bin/vplata.py?tgnr=4300&val=Visa+T%C3%A5gnummer&Bek=Visa&sort=Lok" >Lok</A></TH>
<TH><A HREF="http:/cgi-bin/vplata.py?tgnr=4300&val=Visa+T%C3%A5gnummer&Bek=Visa&sort=Avg" >Avg&aring;r</A></TH>
<TH><A HREF="http:/cgi-bin/vplata.py?tgnr=4300&val=Visa+T%C3%A5gnummer&Bek=Visa&sort=AvgS" >Station</A></TH>
<TH><A HREF="http:/cgi-bin/vplata.py?tgnr=4300&val=Visa+T%C3%A5gnummer&Bek=Visa&sort=Ank" >Ankommer</A></TH>
<TH><A HREF="http:/cgi-bin/vplata.py?tgnr=4300&val=Visa+T%C3%A5gnummer&Bek=Visa&sort=AnkS" >Station</A></TH>
<TH>Tjänstetyp</TH>
</TR>
<TR>
<TD><a HREF="/cgi-bin/vplata.py?individ=R1176&val=Visa+Lokindivid&Bek=Visa">R1176</a></TD>
<TD>Mar-20-2013 13:04:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=HBGB&val=Visa+Driftplats&Bek=Visa">HBGB</A></TD>
<TD>Mar-20-2013 21:21:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=ET3&val=Visa+Driftplats&Bek=Visa">ET3</A></TD>
<TD>B1</TD>
</TR>
<TR>
<TD><a HREF="/cgi-bin/vplata.py?individ=R1267&val=Visa+Lokindivid&Bek=Visa">R1267</a></TD>
<TD>Mar-20-2013 13:04:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=HBGB&val=Visa+Driftplats&Bek=Visa">HBGB</A></TD>
<TD>Mar-20-2013 21:21:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=ET3&val=Visa+Driftplats&Bek=Visa">ET3</A></TD>
<TD>B2</TD>
</TR>
<TR>
<TD><a HREF="/cgi-bin/vplata.py?individ=R1267&val=Visa+Lokindivid&Bek=Visa">R1267</a></TD>
<TD>Mar-20-2013 22:05:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=ET3&val=Visa+Driftplats&Bek=Visa">ET3</A></TD>
<TD>Mar-20-2013 22:28:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=KB%&val=Visa+Driftplats&Bek=Visa">KBÄ</A></TD>
<TD>D1</TD>
</TR>
<TR>
<TD><a HREF="/cgi-bin/vplata.py?individ=R1281&val=Visa+Lokindivid&Bek=Visa">R1281</a></TD>
<TD>Mar-21-2013 13:04:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=HBGB&val=Visa+Driftplats&Bek=Visa">HBGB</A></TD>
<TD>Mar-21-2013 21:21:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=ET3&val=Visa+Driftplats&Bek=Visa">ET3</A></TD>
<TD>D1</TD>
</TR>
<TR>
<TD><a HREF="/cgi-bin/vplata.py?individ=R1281&val=Visa+Lokindivid&Bek=Visa">R1281</a></TD>
<TD>Mar-21-2013 22:05:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=ET3&val=Visa+Driftplats&Bek=Visa">ET3</A></TD>
<TD>Mar-21-2013 22:28:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=KB%&val=Visa+Driftplats&Bek=Visa">KBÄ</A></TD>
<TD>B2</TD>
</TR>
<TR>
<TD><a HREF="/cgi-bin/vplata.py?individ=RXXXXX&val=Visa+Lokindivid&Bek=Visa">RXXXXX</a></TD>
<TD>Mar-21-2013 22:05:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=ET3&val=Visa+Driftplats&Bek=Visa">ET3</A></TD>
<TD>Mar-21-2013 22:28:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=KB%&val=Visa+Driftplats&Bek=Visa">KBÄ</A></TD>
<TD>B1\B2</TD>
</TR>
<TR>
<TD><a HREF="/cgi-bin/vplata.py?individ=R1281&val=Visa+Lokindivid&Bek=Visa">R1281</a></TD>
<TD>Mar-25-2013 13:04:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=HBGB&val=Visa+Driftplats&Bek=Visa">HBGB</A></TD>
<TD>Mar-25-2013 21:21:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=ET3&val=Visa+Driftplats&Bek=Visa">ET3</A></TD>
<TD>D1</TD>
</TR>
<TR>
<TD><a HREF="/cgi-bin/vplata.py?individ=R1281&val=Visa+Lokindivid&Bek=Visa">R1281</a></TD>
<TD>Mar-25-2013 22:05:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=ET3&val=Visa+Driftplats&Bek=Visa">ET3</A></TD>
<TD>Mar-25-2013 22:28:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=KB%&val=Visa+Driftplats&Bek=Visa">KBÄ</A></TD>
<TD>D1</TD>
</TR>
<TR>
<TD><a HREF="/cgi-bin/vplata.py?individ=R1254&val=Visa+Lokindivid&Bek=Visa">R1254</a></TD>
<TD>Mar-27-2013 13:04:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=HBGB&val=Visa+Driftplats&Bek=Visa">HBGB</A></TD>
<TD>Mar-27-2013 21:21:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=ET3&val=Visa+Driftplats&Bek=Visa">ET3</A></TD>
<TD>B2</TD>
</TR>
<TR>
<TD><a HREF="/cgi-bin/vplata.py?individ=RXXXXX&val=Visa+Lokindivid&Bek=Visa">RXXXXX</a></TD>
<TD>Mar-27-2013 13:04:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=HBGB&val=Visa+Driftplats&Bek=Visa">HBGB</A></TD>
<TD>Mar-27-2013 21:21:00</TD>
<TD><A HREF="/cgi-bin/vplata.py?stn=ET3&val=Visa+Driftplats&Bek=Visa">ET3</A></TD>
<TD>B1\B2</TD>
</TR>
</TABLE>
<A><A>Senast uppdaterad: Mar-20-2013 18:16:00</A><BR>
<table width="100%" cellpadding="0" cellspacing="0" border="0">
<TR>
<TD width="20%" bgcolor="#009900"  align="left">
<IMG src="http://litmgc101.greencargo.com/bottenbild.jpg" alt="Green Cargo" width=800 height=25 border=0>
</TD>
</TR>
<TR>
</table> 
```

* * *

我想要做的是获取带有（例如）“R1176”和日期“Mar-20-2013 13:04:00”的零件。（宁愿没有时间“13:04:00”），但如果我不能在解析阶段跳过它，我可以稍后在 VB.net 中删除它。

因此，简单地解释我想要做的事情如下：获取所有“R1234”及其附带的日期，然后将其放入假设“R4321”的文本框和日期或其他内容的另一个文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:56:05.167

在 C# 中，我会做这样的事情：

```
var result =
    doc.DocumentNode.SelectNodes("//td/a[contains(@href,'Lokindivid')]")
       .Select(node => new KeyValuePair<string, DateTime>(node.InnerText, DateTime.Parse(node.SelectSingleNode("./ancestor::tr[1]/td[2]").InnerText).Date)); 
```

我的 VB.NET foo 产生了以下代码（这是一个字面翻译），它适用于您提供的示例 html：

```
Dim doc As New HtmlDocument
doc.LoadHtml(Content.Html)

Dim items = doc.DocumentNode.SelectNodes("//td/a[contains(@href,'Lokindivid')]").Select(Function(node) New KeyValuePair(Of String, DateTime)(node.InnerText, DateTime.Parse(node.SelectSingleNode("./ancestor::tr[1]/td[2]").InnerText).Date))

For Each item As KeyValuePair(Of String, Date) In items
    Console.WriteLine(item.Key)
    Console.WriteLine(item.Value)
Next 
```

# ruby - 使用正则表达式和 Ruby 在字符串上选取两个整数

> ID：15532135
> 
> 赞同：0
> 
> 时间：2013-03-20T18:45:04.350
> 
> 标签：ruby, regex

我有一个字符串，想要两个整数保存在一个数组中

用这个：

```
x= /[0-9]+/.match(dimensions)
dimensions[ /[0-9]+[ ]+/ ] = ""
y= dimensions 
```

获得第一个替换并选择第二个

但是如果字符串有一个数字，这不能正常工作，数组中最好的存储是在之后计数

有什么方法可以让这更容易吗？

示例字符串：

```
5 9

5

sadasd 5 9  assasdadsaas 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:12:46.593

也许使用正则表达式捕获会更好？

```
>> dimensions = "asdf 11 22"
=> "asdf 11 22"
>> m = dimensions.match(/([0-9]+)[ ]*([0-9]*)/)
=> #<MatchData "11 22" 1:"11" 2:"22">
>> m.captures
=> ["11", "22"]
>>
?> dimensions = "asdf 11"
=> "asdf 11"
>> m = dimensions.match(/([0-9]+)[ ]*([0-9]*)/)
=> #<MatchData "11" 1:"11" 2:"">
>> m.captures
=> ["11", ""] 
```

# android - 如何在android中解除光标适配器与listview的绑定

> ID：15532147
> 
> 赞同：1
> 
> 时间：2013-03-20T18:45:38.723
> 
> 标签：android, android-cursoradapter

我需要知道，如何解除光标适配器与列表视图的绑定。

持续更新来到我的表。由于光标适配器已经注册了它的观察者。它直接反映到列表视图，它挂起我的 UI 为什么滚动。

我需要将列表视图与来自 d​​b 的更新解除绑定。视图只应解除绑定，但更新仍必须来自 db。

我试图扩展 cursoradpter 覆盖 registerDataObserver。但它停止更新进入数据库。

请协助如何进行..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:55:20.873

调用`adapter.changeCursor(null);`解除绑定

# c# - .NET 条形图未正确绘制

> ID：15532148
> 
> 赞同：0
> 
> 时间：2013-03-20T18:45:39.213
> 
> 标签：c#, .net, sharepoint-2010

当我绘制条形图时，一些项目没有在 X 轴上正确绘制，而等效的 Y 轴很好。

我的用户控件有以下代码，

```
<asp:Chart ID="Chart1" runat="server" Width="850px" Height="600px">
    <Series>
        <asp:series Name="Series1"></asp:series>
    </Series>
    <ChartAreas>
        <asp:ChartArea Name="ChartArea1">
        </asp:ChartArea>
    </ChartAreas>
</asp:Chart> 
```

填充数据表的代码，

```
protected DataTable GetGroupExperienceData(PickerEntity pickerEntity)
{
    DataTable table;
    table = new DataTable();

    table.Columns.Add("Participant", typeof(string));
    table.Columns.Add("Experience", typeof(Int32));
    table.Columns.Add("Question", typeof(string));

    DataRow row;                    

    if (collListItems2.Count > 0 && collListItems2 != null)
    {
        for (int i = 0; i < collListItems2.Count; i++)
        {
            row = table.NewRow();

            row["Participant"] = user.Name;

            SPFieldLookupValue lpkFieldQName = new SPFieldLookupValue(itemRep["SurveyQuestion"].ToString());
            string lkpQNameVal = lpkFieldQName.LookupValue;

            row["Question"] = lkpQNameVal;

            SPDiagnosticsService.Local.WriteTrace(0, new SPDiagnosticsCategory("(Error)", TraceSeverity.Unexpected, EventSeverity.Error), TraceSeverity.Unexpected, ">" + row["Question"].ToString(), "");

            if (itemRep["Experience"] !=null)
            {
                row["Experience"] = itemRep["Experience"];
            }
            else
            {
                row["Experience"] = Convert.ToInt32("0");
            }

            table.Rows.Add(row);
        }
    }

    return dt;
} 
```

最后图表绘制代码，

```
protected void DrawExperienceChart(DataTable dt)
{
    Chart1.Series["Series1"].ChartType = SeriesChartType.Bar;
    Chart1.Series["Series1"]["DrawingStyle"] = "Emboss";
    Chart1.ChartAreas["ChartArea1"].Area3DStyle.Enable3D = false;
    Chart1.Series["Series1"].IsValueShownAsLabel = true;
    Chart1.DataSource = dt;
    Chart1.Series["Series1"].XValueMember = "Question";
    Chart1.Series["Series1"].YValueMembers = "Experience";
    Chart1.DataBind();
} 
```

所有这些函数都是通过单击按钮调用的，

```
protected void btnGetReport_Click(object sender, EventArgs e)
{
    DataTable dt =  GetGroupExperienceData(pickerEntity);

    DrawExperienceChart(dt);   
} 
```

这是输出，X asix 上缺少许多“问题”数据，但在 Y 轴上很好地绘制了等效的“经验”。

![在此处输入图像描述](../Images/a919ba4a5fc1d2973399371901fe3ee7.png)

我想可能是数据没有进入数据表，但数据表有我可以看到的数据`SPDiagnosticsService.Local.WriteTrace()`，

![在此处输入图像描述](../Images/bcfba8106965d1272f452284fbb7e4a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:03:23.663

很简单，有一个设置必须启用才能查看所有标签，否则图表控件将隐藏大部分标签。

```
Chart1.ChartAreas["ChartArea1"].AxisX.Interval = 1; 
```

# c# - 在 C# 中使用 ZedGraph

> ID：15532149
> 
> 赞同：0
> 
> 时间：2013-03-20T18:45:43.663
> 
> 标签：c#, zedgraph

A有问题。Zedgraph 为我的方程式绘制了错误的图表。

我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    double a, b, c, dl;
    a = float.Parse(textBox1.Text);
    b = float.Parse(textBox2.Text);
    c = float.Parse(textBox3.Text);
    dl = (b * b) - (4 * a * c);
    if (dl < 0)
    {
        MessageBox.Show("Error");
    }
    else if (dl > 0)
    {
        x1 = (-b - Math.Sqrt(dl)) / (2 * a);
        x2 = (-b + Math.Sqrt(dl)) / (2 * a);
        textBox4.Text = x1.ToString();
        textBox5.Text = x2.ToString();
    }
    else
    {
        string str = (b / (2 * a)).ToString();
        textBox4.Text = str;
        textBox5.Text = str;
    }
}

private void Form1_Load(object sender, EventArgs e)
{
}

private void button2_Click(object sender, EventArgs e)
{
    // This is to remove all plots
    zedGraphControl1.GraphPane.CurveList.Clear();

    // GraphPane object holds one or more Curve objects (or plots)
    GraphPane myPane = zedGraphControl1.GraphPane;
    PointPairList spl1 = new PointPairList();
    // Add cruves to myPane object
    LineItem myCurve1 = myPane.AddCurve("Equation", spl1, Color.Blue, SymbolType.None);
    myCurve1.Line.Width = 5.0F;
    myPane.Title.Text = "Graph";
    for (int i = -5; i < 8; i++)
    {
        double y = (i - x1) * (i - x2);
        spl1.Add(i, y);
    }

     //I add all three functions just to be sure it refeshes the plot.   
    zedGraphControl1.AxisChange();
    zedGraphControl1.Invalidate();
    zedGraphControl1.Refresh();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:59:20.047

尝试这个：

```
private void button2_Click(object sender, EventArgs e)
{
    // This is to remove all plots
    zedGraphControl1.GraphPane.CurveList.Clear();

    // GraphPane object holds one or more Curve objects (or plots)
    GraphPane myPane = zedGraphControl1.GraphPane;
    PointPairList spl1 = new PointPairList();

    LineItem lineItem = new LineItem("Equation");
    myCurve1.Line.Width = 5.0F;
    myPane.Title.Text = "Graph";
    for (int i = -5; i < 8; i++)
    {
       double y = (i - x1) * (i - x2);
        spl1.Add(i, y);
    }

   // Add cruves to myPane object
    myCurve1 = myPane.AddCurve("Equation", spl1, Color.Blue, SymbolType.None);

     //I add all three functions just to be sure it refeshes the plot.   
    zedGraphControl1.AxisChange();
    zedGraphControl1.Invalidate();
    zedGraphControl1.Refresh();

} 
```

`LineItem myCurve1 = myPane.AddCurve("Equation", spl1, Color.Blue, SymbolType.None);`在您建立`spl1`清单后，我将其移至完成。看看这是否适合你

# javascript - ajax 和 getJSON 调用的区别？

> ID：15532151
> 
> 赞同：0
> 
> 时间：2013-03-20T18:45:45.903
> 
> 标签：javascript, json, jquery

我有一个从位于 的 Web.API 应用程序提供的页面`http://server/application`。在客户端，我正在执行 GET 以从服务器中提取一些数据。问题是我认为应该行不通的事情。

此代码有效：

```
$.ajax( {
    url: "api/slideid/getdirectories/",
    dataType: 'json',
    success: function ( data ) {
        setPaths( data );
    }
} ); 
```

但这不会：

```
$.getJSON( "api/slideid/getdirectories/",
    function ( data ) {
        setPaths( data );
    } ); 
```

在第一个示例中，我在 fiddler 中看到它尝试从中检索数据的 url 是`http://server/application/api/slideid/getdirectories`，这是正确的。

第二个是`http://server/api/slideid/getdirectories`，这是不对的。我在想这两种 json GET 方法是一样的......但似乎它们不是？

有趣的是，这两种方法都适用于我的本地开发盒——它只在我的登台服务器上有效，而另一种无效。据我所知，IIS 设置是相同的——而且我进行了很好的检查。

所以我想知道为什么 getJSON 不起作用，当 jQuery[文档](http://api.jquery.com/jQuery.getJSON/)声明 getJSON 只是 .ajax 调用的简写？

编辑：我已经输入了一个明确的 getJSON 版本，希望表明它们是非常相似的调用，但现在有了“真正的”getJSON 调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T18:48:37.753

你有一个错误的实现`$.getJSON()`这应该是：

```
$.getJSON(url, {data:data}, function(data){
     alert(data);
}); 
```

哪里`{data:data}`是可选的。

## 从文档：

> 这是一个简写的 Ajax 函数，相当于：

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  success: success
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:50:07.647

```
 $.getJSON(url, {data:data}, .... 
```

语法错误

# git - 无法将 git repo 推送到远程服务器

> ID：15532152
> 
> 赞同：1
> 
> 时间：2013-03-20T18:45:50.037
> 
> 标签：git

从头开始，在我的 Windows 工作站上设置 git，并按照[http://git-scm.com/book/en/Git-on-the-Server-Getting-Git-on-a-Server](http://git-scm.com/book/en/Git-on-the-Server-Getting-Git-on-a-Server)上的说明进行设置我的裸回购。能够使用 git Bash 将文件 scp 到我的托管服务器，但是当我将 orign 服务器添加到 repo 并尝试推送时，我得到了这个：

```
Pushing to user@host:/home/user/git/project.git
jailshell: git-receive-pack: command not found
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:55:06.567

您的服务器上没有安装 git。

请参阅[是否需要在服务器上存在 git 才能使用它？](https://stackoverflow.com/questions/7317280/does-git-need-to-be-present-on-a-server-to-use-it)寻求可能的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:55:52.730

确保设置了路径，以便 git-receive-pack 二进制文件位于路径中。尝试在您的服务器中打开命令提示符/sshing 并运行`git-receive-pack`.

如果根本没有安装，请使用`[package-manager install-command] git`（其中*package-manager*是`apt-get`or`yum`等​​，而*install-command*通常是安装）在您的服务器上安装 git

# c++ - 如何在 std::map 中插入自定义对象

> ID：15532157
> 
> 赞同：1
> 
> 时间：2013-03-20T18:46:16.780
> 
> 标签：c++

我正在尝试插入对我的对象的引用，但出现大量错误。我需要在自定义对象中修改什么，才能成功插入？

代码如下所示：

```
#include <map>
#include <iostream>
#include <string>

using namespace std;

class A
{
public:
    A()
    {
            cout << "default constructor" << endl;
    }

    A(A & a)
    {
            cout << "copy constructor" << endl;
    }

    A & operator=(A & a)
    {
            cout << "assignment operator" << endl;
            return *this;
    }

    ~A()
    {
            cout << "destructor" << endl;
    }
};

int main()
{
    map<string, A&> m1;
    A a;
    m1["a"] = a;
    return 0;
} 
```

* * *

更新：

1.  可以使用参考创建地图，例如`map<string, A&>`

2.  错误在于使用 [] 运算符。通过进行以下更改，代码可以工作

    ```
    typedef map<string, A&> mymap;

    int main()
    {
       mymap m1;
       A a;
       cout << &a << endl;
       m1.insert(make_pair<string, A&>("a", a));
       mymap::iterator it = m1.find("a");
       A &b = (*it).second;
       cout << &b << endl; // same memory address as a
       return 0;
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:48:44.893

您不能将引用存储在`map`. 改用指针。

代替：

```
map<string, A&> m1; 
```

和：

```
map<string, A*> m1; 
```

或者更好（感谢 WhozCraig！）：

```
map<string, shared_ptr<A> > m1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:49:57.043

您不能将引用用作容器的键或值类型。您需要使用指针，最好是智能指针，[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)或者，如果这不是太昂贵，您可以存储对象的副本。这里有一些选项：

```
map<string,A> mc; // stores copies of A

map<string,A*> mp; // you need to take care of memory management - avoid that

map<string,shared_ptr<A>> msp; // prefered 
```

要使用后者，您可以像这样创建和插入元素：

```
msp["a"] = make_shared<A>(); 
```

希望它有助于作为一个开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:49:33.860

您正试图拥有一个`map`只存储引用的。这有点不可能，因为引用通常必须在它们被引入概念的那一刻用引用进行初始化

当您使用`m1["a"]`时，该函数本身必须在让您分配给它之前就地默认构造和项目（您不能默认构造引用）。如果您试图避免制作副本，您可以使用`emplace`函数的风格来就地构建对象，或者只是拥有`map<std::string, A>`并让您的生活变得轻松。

如果您需要它不进行复制，您也可以尝试使用`map<std::string, A*>`存储指针的 a 。但是，您将负责自己清理内存（除非您使用它`std::unique_ptr`或它的朋友）。

# ruby-on-rails - Rspec 测试全局异常处理

> ID：15532159
> 
> 赞同：1
> 
> 时间：2013-03-20T18:46:26.720
> 
> 标签：ruby-on-rails, ruby, rspec

```
class ApplicationController < ActionController::Base
    protect_from_forgery
    rescue_from Exception, :with => :handle_exception

    private         
    def handle_exception
      render :template => "shared/500", layout: false
    end
end 
```

那么我需要用rspec测试上面的代码。

我已经尝试过，[测试匿名控制器](https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs/anonymous-controller#specify-error-handling-in-applicationcontroller)，这就是我所拥有的

```
require 'spec_helper'

     describe ApplicationController do
      controller do
        def index
          raise Exception
        end
      end

      describe "handling exceptions" do
        it "renders 500 template" do
          get :index
          expect(response).to render_template("shared/500")
        end
      end
    end 
```

它失败了，我错过了什么或者请提出更好的测试方法？

# ruby - Twilio 消息体 - Ruby on Rails

> ID：15532162
> 
> 赞同：0
> 
> 时间：2013-03-20T18:46:35.650
> 
> 标签：ruby, ruby-on-rails-3.2, twilio

我对 Twilio 有一个小问题。我正在尝试发送一条包含用户数据库表上一些数据的短信，以便我可以验证他们是谁。

从用户控制器[发送 SMS 。](https://www.twilio.com/docs/quickstart/ruby/sms)

```
 def verifymobile
    @user = User.find(params[:id])
     message_to_send  = @user.phoneverify

    # Instantiate a Twilio client
    client = Twilio::REST::Client.new(TWILIO_CONFIG['sid'], TWILIO_CONFIG['token'])

    # Create and send an SMS message
    client.account.sms.messages.create(
        from: TWILIO_CONFIG['from'],
        to: @user.cellphone,
        body: "Thanks for signing up with Afrocoin. To verify your account, 
             Please use CODE #{message_to_send}"
    )

    redirect_to :action => 'index'
  end 
```

我在让数据与消息正文 (@user.phoneverify) 一起使用时遇到问题。你能给些建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:36:10.143

您确定 @user 和 @user.phoneverify 的值有效吗？

# jquery - 通过 json 将数组发送到 ActionMethod 导致缺失值

> ID：15532168
> 
> 赞同：0
> 
> 时间：2013-03-20T18:47:06.610
> 
> 标签：jquery, asp.net-mvc, arrays, json

我有一个这样的对象：

```
var lot = { ID: 0, ... //various other attributes
            SchemeInstanceList: [] } 
```

创建后，我用另一个结构的对象填充 SchemeInstanceList 属性，如下所示：

```
lot.SchemeInstanceList.push({ ID: 0, LotID: 0, SchemeID: 18, LotPosition: 0}) 
```

到这里为止，一切都很好。现在我将批次对象发送到我的 ActionMethod，创建一个数据库条目。

```
$.ajax({
    url: "/Lots/CreateSchemes",
    data: lot
});

public ActionResult CreateSchemes(LotModel lot) {
    ... //store lot in database
} 
```

ActionMethod 被调用并且lot 的值是正确的，SchemeInstanceList 中有条目。然而，所有这些条目的属性都为零，我看不出我做错了什么。

当我传递单个列表元素本身时，条目会正确显示：

```
$.ajax({
    url: "/Lots/CreateScheme",
    data: lot.SchemeInstanceList[0]
}

public ActionResult CreateScheme(SchemeInstanceModel scheme) {
   ... //do whatever
} 
```

现在 SchemeID 的值是 18 而不是 0。

为什么这不起作用？我错过了什么最明显的事情？

**编辑**：这是我的模型：

```
public class LotModel {
    public int ID { get; set; }
    ... //various other properties
    public List<SchemeInstanceModel> SchemeInstanceList { get; set; }
}

public class SchemeInstanceModel
{
    public int ID { get; set; }
    public int LotID { get; set; }
    public int SchemeID { get; set; }
    public int LotPosition { get; set; }

    //public List<AttributeInstanceModel> AttributeInstanceList { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:45:29.450

在这里找到解决方案：

[https://stackoverflow.com/a/5373956/2139555](https://stackoverflow.com/a/5373956/2139555)

为了使复杂对象的 json 绑定起作用，需要`JSON.stringify(lot)`他的 data 和 set `contentType: "application/json, charset=utf-8"`。我也没有设置`type: "Post"`，但我试过了，但我做的时候没有用。此外，我得到了很多数据，所以我认为这无关紧要。

完整的工作json：

```
$.ajax({
    url: "/Lots/CreateSchemes",
    data: JSON.stringify(lot),
    type: "Post",
    dataType: "application/json, charset=utf-8"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:44:46.160

尝试这个：

```
public ActionResult CreateSchemes(string lot) {
    LotModel li = JsonConvert.DeserializeObject<LotModel>(lot);
    ... //store lot in database
} 
```

检查该字符串是否包含您想要的值...

还要确保您的 LotModel 具有 List 属性。

我的猜测是，如果值在传入的字符串中，那么您的 javascript LotModel 与您的 C# LotModel 不匹配。请记住，javascript 中的模型属性名称必须与 C# 中的模型属性名称完全相同，大写字母等等。

# linux - “设备没有 release() 功能” - 这是什么意思？

> ID：15532170
> 
> 赞同：1
> 
> 时间：2013-03-20T18:47:15.933
> 
> 标签：linux, kernel, driver

我正在尝试编写一个简单的 linux 内核驱动程序来在加载模块时打开 GPIO 引脚。模块加载有效，但是当我调用 rmmod 将其删除时，我收到此错误：

```
sudo rmmod psctl
[13051.599199] ------------[ cut here ]------------
[13051.608758] WARNING: at drivers/base/core.c:196 device_release+0x78/0x84()
[13051.620581] Device 'psctl.0' does not have a release() function, it is broken and must be fixed.
[13051.637898] Modules linked in: psctl(O-) tmp102 hwmon nfsd rtc_ds1307 i2c_dev snd_bcm2835 snd_pcm snd_page_alloc snd_seq snd_seq_device snd_timer snd spidev leds_gpio led_class spi_bcm2708 i2c_bcm2708 [last unloaded: psctl]
[13051.670268] [<c0013f64>] (unwind_backtrace+0x0/0xf0) from [<c001e80c>] (warn_slowpath_common+0x4c/0x64)
[13051.688743] [<c001e80c>] (warn_slowpath_common+0x4c/0x64) from [<c001e8b8>] (warn_slowpath_fmt+0x30/0x40)
[13051.707217] [<c001e8b8>] (warn_slowpath_fmt+0x30/0x40) from [<c0239240>] (device_release+0x78/0x84)
[13051.725132] [<c0239240>] (device_release+0x78/0x84) from [<c01f4ad8>] (kobject_release+0x50/0x84)
[13051.742880] [<c01f4ad8>] (kobject_release+0x50/0x84) from [<bf0e6064>] (gpiotest_exit+0x10/0x2c [psctl])
[13051.761326] [<bf0e6064>] (gpiotest_exit+0x10/0x2c [psctl]) from [<c005e140>] (sys_delete_module+0x1b4/0x240)
[13051.780050] [<c005e140>] (sys_delete_module+0x1b4/0x240) from [<c000dae0>] (ret_fast_syscall+0x0/0x30)
[13051.798205] ---[ end trace 2eaa6df2dbf1f2e2 ]---
[13051.810083] psctl: Unloaded module 
```

这是什么意思？我查看了 drivers/base/core.c，似乎 kobject 或 kobj_type 都没有与之关联的释放方法（或者 kobj 上没有设置 kobj_type）。我应该自己设置发布方法，还是有其他我没有做过的事情会为我设置这个？

该模块的代码如下：

```
 #include <linux/init.h>
    #include <linux/module.h>
    #include <linux/kernel.h>
    #include <linux/slab.h>
    #include <linux/device.h>
    #include <linux/types.h>
    #include <linux/fs.h>
    #include <linux/platform_device.h>

    #define AUTHOR "Xian Stannard <xian@xianic.net>"
    #define DESCRIPTION "Simple GPIO driver as proof of concept"
    #define VERSION "0.1"
    #define DRIVER_NAME "psctl"
    #define OUT_GPIO 18

    #define MPRINT(level, fmt, args...) printk(level DRIVER_NAME ": " fmt "\n", ## args)

    struct ps_data_struct {
        int out_gpio;
    };

    static int ps_probe(struct platform_device *pdev) {
        struct ps_data_struct *data = pdev->dev.platform_data;

        if(data == NULL)
            MPRINT(KERN_DEBUG, "No platform data");
        else {
            MPRINT(KERN_DEBUG, "Has platform data: gpio %d", data->out_gpio);
        }

        return -ENODEV;
    }

    static int __exit ps_remove(struct platform_device *dev) {
        MPRINT(KERN_DEBUG, "Remove");
        return 0;
    }

    static void ps_release(struct device* dev) {
        MPRINT(KERN_DEBUG, "Release");
    }

    static struct ps_data_struct ps_data = {
        .out_gpio = OUT_GPIO
    };

    static struct platform_driver ps_driver = {
        .driver = {
            .name = DRIVER_NAME,
            .owner = THIS_MODULE
        },
        .probe = ps_probe,
        .remove = __exit_p(ps_remove)
    };

    static struct platform_device ps_device = {
        .name = DRIVER_NAME,
        .id = 0,
        .dev = {
            .platform_data = &ps_data
        }
    };

    static int __init gpiotest_init(void) {
        int retval = 0;

        retval = platform_driver_register(&ps_driver);
        if(retval != 0) {
            MPRINT(KERN_ERR, "Could not register driver");
            goto drvreg;
        }

        retval = platform_device_register(&ps_device);
        if(retval != 0) {
            MPRINT(KERN_ERR, "Could not create device");
            goto devreg;
        }

        MPRINT(KERN_INFO, "Loaded module");
        return 0;

    devreg:
        platform_driver_unregister(&ps_driver);

    drvreg:
        MPRINT(KERN_ERR, "Module load failed with error code %d", retval);
        return retval;
    }

    static void __exit gpiotest_exit(void) {
        platform_device_unregister(&ps_device);
        platform_driver_unregister(&ps_driver);
        MPRINT(KERN_INFO, "Unloaded module");
    }

    module_init(gpiotest_init);
    module_exit(gpiotest_exit);

    MODULE_AUTHOR(AUTHOR);
    MODULE_DESCRIPTION(DESCRIPTION);
    MODULE_VERSION(VERSION);
    MODULE_LICENSE("GPL"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T10:22:16.937

我认为使用`platform_device_register()`注册设备，`pdev->dev->release`没有初始化，所以当你尝试删除这个设备时，OOPS消息打印出来。有两种解决方案可以解决这个问题：

1.  使用`platform_device_alloc()`和`platform_device_add()`注册您的设备；

2.  你自己初始化`ps_device.dev.release`，如果你坚持使用`platform_device_register()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-22T13:08:17.047

当您调用`platform_device_alloc()`以获取设备实例时，`release`方法初始化是针对默认函数完成的，如[这里所示](https://elixir.bootlin.com/linux/latest/source/drivers/base/platform.c#L307)。

```
struct platform_device *platform_device_alloc(const char *name, int id)
{
    ...
    ...
    pa->pdev.dev.release = platform_device_release;
    ...
    ...
} 
```

这是[platform_device_release 的默认实现](https://elixir.bootlin.com/linux/latest/source/drivers/base/platform.c#L276)。

但是，当您避免 platform_device_alloc 时，您显然会错过此初始化，因此需要为`release`设备提供您自己的方法实现。

# android - Android 应用程序在模拟器中运行但不在 android 设备中

> ID：15532173
> 
> 赞同：0
> 
> 时间：2013-03-20T18:47:22.583
> 
> 标签：android, android-emulator, samsung-mobile

我一整天都在尝试通过相关研究来解决这个问题。我可以在模拟器中运行我的应用程序，但不能在 android 设备中运行，即三星 Galaxy ace 2。我在 logcat 中得到以下错误。非常感谢您的帮助。谢谢！

```
03-20 18:40:07.340: E/AndroidRuntime(15785): FATAL EXCEPTION: main
03-20 18:40:07.340: E/AndroidRuntime(15785): java.lang.NullPointerException
03-20 18:40:07.340: E/AndroidRuntime(15785):    at com.dorji.finalproject.LoginLayout$MyAsyncTask.onPostExecute(LoginLayout.java:87)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at com.dorji.finalproject.LoginLayout$MyAsyncTask.onPostExecute(LoginLayout.java:1)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at android.os.AsyncTask.finish(AsyncTask.java:417)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at android.os.Looper.loop(Looper.java:130)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at android.app.ActivityThread.main(ActivityThread.java:3691)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at java.lang.reflect.Method.invokeNative(Native Method)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at java.lang.reflect.Method.invoke(Method.java:507)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
03-20 18:40:07.340: E/AndroidRuntime(15785):    at dalvik.system.NativeStart.main(Native Method) 
```

主要错误代码：

```
 @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            new newAsyncTask().execute();
        }
    });
}

private class newAsyncTask extends AsyncTask<Void, Void, Void>
{
        ProgressDialog Dialog;
        String user = username.getText().toString();
        String pass = password.getText().toString();

        @Override
        protected void onPreExecute() {
                Dialog = ProgressDialog.show(Login.this, "processing..", "data is Loading...");
        }

        @Override
                protected void onPostExecute(Void result) {
                    if(res.equals("1")){
                        if (Dialog.isShowing()) {
                        Dialog.dismiss();
                        }

                } else{
                        error.setText("Sorry, wrong username and password");
                        Dialog.dismiss();
                }
                }

        @Override
        protected Void doInBackground(Void... params) {

             ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
             postParameters.add(new BasicNameValuePair("username", user));
             postParameters.add(new BasicNameValuePair("password", pass));

                String response = null;
                try {
                    response = CustomHttpClient.executeHttpPost("http://10.0.2.2:8080/MainServer/LoginResponse", postParameters);
                    res=response.toString();
                    res= res.replaceAll("\\s+","");
                    Bundle bundle = new Bundle();
                    bundle.putString("param1", user);
                    bundle.putString("param2", pass);

                    Intent newIntent = new Intent(getApplicationContext(), MainActivity.class);
                    newIntent.putExtras(bundle);
                    startActivityForResult(newIntent, 0);

                        } catch (Exception e) {
                            System.out.println(e.toString());
                            }
                        return null;
                        }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:58:36.017

您的设备无法访问“10.0.2.2:8080”，因此您进入异常并从 doInBackground 返回 null。在 onPostExecute 中，您尝试在 null 上运行方法 equals()，并获得空指针异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:17:55.867

我不是专家，但也许这可以帮助你：

1.- 添加处理程序：

```
private Handler myHndlr = null; 
```

2.- 初始化它：

```
 public void onClick(View v) {
       myHndlr = new Handler();
       //... 
```

3.- 在你的 AsyncTask 中使用它：

```
 @Override
    protected void onPostExecute(Void result)
    {
        if(res.equals("1"))
        {
            myHndlr.post(new Runnable(){
               @Override
               public void run()
               {
                  //Code that modify items on the screen and stuff
                  if(Dialog.isShowing())
                  {
                       Dialog.dismiss();
                  }
               }
           });
         }
         //The rest of the code here... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T11:59:15.313

在您的 Android Manifest 中，更改与您设备的 android 版本对应的目标 sdk (targetSdkVersion)。它应该可以正常工作。

例如，Android 版本 4.2.2 的 API 版本是 API 级别 17。因此，在您的 Android Manifest 中更改以下内容

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" /> 
```

# angularjs - 在 angularjs 指令范围内公开对象，无法访问属性

> ID：15532174
> 
> 赞同：16
> 
> 时间：2013-03-20T18:47:22.927
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

所以，我有以下相对简单的 Angularjs 指令

```
app.directive('myDirective', function () {
      return {
          restrict: 'E',
          scope: {
              site: '@',
              index: '@'
          },
          template: '<div>{{site}}</div>',
          replace: true,

      }
  }); 
```

这是我在 HTML 中调用指令的地方

```
<div id="eventGraphic" class="span12">
    <my-directive ng-repeat="site in IEvent.sites" site="{{site}}" index="{{$index}}"></my-directive>
</div> 
```

假设每个`site`都是一个对象，就会产生这个输出（从浏览器复制）

```
{"name":"Hurlburt","_id":"5148bb6b79353be406000005","enclaves":[]}
{"name":"Walker Center","_id":"5148cca5436905781a000005","enclaves":[]}
{"name":"test1","_id":"5148ce94436905781a000006","enclaves":[]}
{"name":"JDIF","_id":"5148cf37436905781a000007","enclaves":[]} 
```

但是，如果我将指令中的模板更改为

```
 template: '<div>{{site.name}}</div>', 
```

它不会产生任何输出。这似乎是一个相当简单的用例，有什么想法我可能做错了吗？所需的输出将只是`name`每个对象中的字段。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T19:03:42.597

您需要使用`'='`来映射对象。`'@'`意味着您只是将字符串值传递给新范围。

```
app.directive('myDirective', function () {
      return {
          restrict: 'E',
          scope: {
              site: '=', //two-way binding
              index: '@' //just passing an attribute as a string.
          },
          template: '<div>{{site}}</div>',
          replace: true,

      }
  }); 
```

然后在您的标记中，不要在属性中使用绑定，只需传递表达式：

```
<div id="eventGraphic" class="span12">
    <!-- below, site="site" is passing the expression (site) to
         the two way binding for your directive's scope,
         whereas index="{{$index}}" is actually evaluating the expression
         ($index) and passing it as a string to the index attribute,
         which is being put directly into the directive's scope as a string -->
    <my-directive ng-repeat="site in IEvent.sites" 
            site="site" 
            index="{{$index}}"></my-directive>
</div> 
```

# hadoop - sqoop 导入大量 NULL 行

> ID：15532178
> 
> 赞同：0
> 
> 时间：2013-03-20T18:47:34.450
> 
> 标签：hadoop, hive, sqoop

我正在将一个表从 mysql 导入到 hive。该表有`2115584`行。在导入期间我看到

```
13/03/20 18:34:31 INFO mapreduce.ImportJobBase: Retrieved 2115584 records. 
```

但是当我`count(*)`在导入的表上做 a 时，我看到它有`49262250`行。到底是怎么回事？

更新：指定时导入正常工作`--direct`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T19:25:00.840

弄清楚了。来自 sqoop 用户手册：

> 如果数据库的行包含具有 Hive 的默认行分隔符（\n 和 \r 字符）或列分隔符（\01 字符）的字符串字段，Hive 使用 Sqoop 导入的数据将出现问题。您可以使用 --hive-drop-import-delims 选项在导入时删除这些字符，以提供与 Hive 兼容的文本数据。

我刚刚指定`--hive-drop-import-delims`，它现在可以工作了。

# android - 30 秒后在 Chronometer 中播放声音

> ID：15532180
> 
> 赞同：0
> 
> 时间：2013-03-20T18:47:40.193
> 
> 标签：android, audio, chronometer, soundeffect

我有这个秒表需要在 30、45 和 60 秒后播放声音。

这是我的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.random1);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/tele.ttf");
    TextView tv = (TextView) findViewById(R.id.bowman);
    tv.setTypeface(tf);
    mChronometer = (Chronometer) findViewById(R.id.chronometer1);
    player1 = MediaPlayer.create(Random1.this, R.raw.stopwatch1);
    player2 = MediaPlayer.create(Random1.this, R.raw.stopwatch2);
    player3 = MediaPlayer.create(Random1.this, R.raw.stopwatch3);
    player4 = MediaPlayer.create(Random1.this, R.raw.stopwatch4);
    start = (Button) findViewById(R.id.bstartsw1);
    stop = (Button) findViewById(R.id.bstopsw1);
    reset = (Button) findViewById(R.id.bresetsw1);
    vib = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
    start.setTypeface(tf);
    stop.setTypeface(tf);
    reset.setTypeface(tf);

    start.setOnClickListener(this);
    stop.setOnClickListener(this);
    reset.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bstartsw1:
        mChronometer.start();
        vib.vibrate(50);

        break;
    case R.id.bstopsw1:
        mChronometer.stop();
        vib.vibrate(50);

        break;
    case R.id.bresetsw1:
        mChronometer.setBase(SystemClock.elapsedRealtime());
        vib.vibrate(50);
        finish();
        startActivity(getIntent());
        break;
    }

    mChronometer
            .setOnChronometerTickListener(new OnChronometerTickListener() {
                @Override
                public void onChronometerTick(Chronometer chronometer) {
                    long elapsedTime = SystemClock.elapsedRealtime()
                            - chronometer.getBase();
                    if (elapsedTime > currentNeededTime1) {
                        player1.start();
                        currentNeededTime1 += currentNeededTime1 == 14500 ? 3600000
                                : 3600000;
                    } else if (elapsedTime > currentNeededTime2) {
                        player2.start();
                        currentNeededTime2 += currentNeededTime2 == 30000 ? 3600000
                                : 3600000;
                    } else if (elapsedTime > currentNeededTime3) {
                        player3.start();
                        currentNeededTime3 += currentNeededTime3 == 45000 ? 3600000
                                : 3600000;

                    } else if (elapsedTime > currentNeededTime4) {
                        player4.start();
                        currentNeededTime4 += currentNeededTime4 == 60000 ? 3600000
                                : 3600000;
                    }
                }
            });

} 
```

}

不是最著名的解决方案，但它是一个解决方案。在重置按钮中，我设置了完成（）；开始活动（getIntent（））；所以它会根据我的需要重新加载活动和声音在 15、30、45 和 60 秒时正常播放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:53:58.297

你需要`OnChronometerTickListener`在你的计时器上实现一个。

这是一个例子：

```
chronometer.setOnChronometerTickListener(new OnChronometerTickListener()
{
    @Override
    public void onChronometerTick(Chronometer chronometer)
    {

    }
}); 
```

`onChronometerTick`您可以在方法中检查经过的时间

# php - Nginx/PHP-FPM exec 另一个 php 脚本

> ID：15532182
> 
> 赞同：0
> 
> 时间：2013-03-20T18:47:44.090
> 
> 标签：php, ubuntu, chmod, user-permissions, chown

这有效，因此 exec 功能未被禁用。

```
exec('ls'); 
```

即使认为 script.php 有 777 chmod，这也不起作用。

```
exec('php script.php'); 
```

这也不起作用。

```
exec('php -v'); 
```

我试图 chmod 和 chown /var/www/ 文件夹，但它没有帮助。我想这是由于 www-data 用户权限，看起来它无权访问多个 bin 文件。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:54:20.067

尝试

```
which php 
```

然后获取路径并将其放入 exec() 中

```
exec("/opt/local/bin/php -v"); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-20T18:49:49.603

尝试`php -f script.php`

我不是 100% 确定这是正确的，但我在传递文件时总是发送 -f 标志。

# python - Python XML 解析 - 相当于 bash 中的“grep -v”

> ID：15532183
> 
> 赞同：0
> 
> 时间：2013-03-20T18:47:44.033
> 
> 标签：python, xml, linux, minidom

这是我第一次涉足 Python。我通常会坚持使用 bash，但是 Minidom 似乎完全符合我对 XML 解析的需求，所以我试了一下。

我似乎无法弄清楚的第一个问题是，解析文件时“grep -v”的等价物是什么？

我要拉的每个对象都以特定标签开头。如果在所述标签中，我想根据嵌入在标签中的某个字符串排除一行数据，我该如何完成？

我现在得到的伪代码（不排除）：

```
mainTag = xml.getElementsByTagName("network_object")
name = network_object.getElementsByTagName("Name")[0].firstChild.data 
```

我希望看到数据输出所有“名称”字段，但包含“集群”的字符串除外。由于我将在 network_objects 上进行多次搜索，因此我相信我需要在该级别进行搜索，但不知道如何操作。

Etree 给了我很多问题，你能给我一些逻辑来用 minidom 做到这一点吗？

这显然不起作用：

```
name = network_object.getElementsByTagName("Name")[0].firstChild.data
if name is not 'cluster' in name
continue 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:53:28.983

首先，远离 minidom 模块。如果您已经了解其他语言的 DOM 并且真的不想学习任何其他 API，那么 Minidom 非常棒。标准库中有更简单的替代方案。我会改用[ElementTree API](http://docs.python.org/2/library/xml.etree.elementtree.html)。

您通常只是循环匹配匹配，并在执行此操作时跳过要排除的匹配：

```
from xml.etree import ElementTree

tree = ElementTree.parse(somefile)

for name in tree.findall('.//network_object//Name'):
    if name.text is not None and 'cluster' in name.text:
        continue  # skip this one 
```

# javascript - 检索 MagicSelect MultiValue 的选定值

> ID：15532184
> 
> 赞同：2
> 
> 时间：2013-03-20T18:47:46.280
> 
> 标签：javascript, jquery, html, magicsuggest

我有多重选择元素，就像 StackOverflow 对他们的标签所做的那样。我不知道如何编写将检索选择的多个值的 jQuery 语句。

这是我到目前为止所拥有的。

```
HTML
<input id="tagSelect" style="width:400px;" type="text"/> 
```

这是我的 Javascript

```
var tag = $('#tagSelect').val(); 
```

这是它使用的插件 [http://nicolasbize.github.com/magicsuggest/](http://nicolasbize.github.com/magicsuggest/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T20:23:37.827

使用插件检索值有两种方法：

如果组合包含在这样的经典表单中：

```
<form method="POST" action="submit.php">
    <div id="ms"></div>
</form>

<script type="text/javascript">
    var combo = $('#ms').magicSuggest({
        data: 'a,b,c,d,e',
        name: 'choice'
    });
</script> 
```

然后选择将在参数 $_POST['choice'] 中序列化。

如果您需要通过 javascript 检索值，有一个 getValue() 方法将返回一个值数组：

```
ms.getValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-10T15:23:27.007

此解决方案似乎不起作用。

当试图执行 ms.getValue(); 记录以下错误消息：

TypeError: ms.getValue 不是函数[了解更多]

# javascript - 按类排序 div

> ID：15532185
> 
> 赞同：0
> 
> 时间：2013-03-20T18:47:46.523
> 
> 标签：javascript, jquery, html

单击菜单链接时是否可以按类排序 div？这是我的代码：

```
<ul class="directors-menu">
    <li>director1</li>
    <li>director2</li>
    <li>director3</li>
    <li>commercial</li>
    <li>promo</li>
    <li>short</li>
</ul>
<div class="films">
    <div class="director1 commercial"></div>
    <div class="director1 promo"></div>
    <div class="director2 commercial"></div>
    <div class="director2 short"></div>
    <div class="director3 commercial"></div>
</div> 
```

我想做的是，当我单击菜单中的导演或类别时，我希望将具有连接类的 div 排序在顶部。

这是一个示例：当我单击菜单中的 director2 时，我希望代码更改为：

```
<ul class="directors-menu">
    <li>director1</li>
    <li>director2</li>
    <li>director3</li>
    <li>commercial</li>
    <li>promo</li>
    <li>short</li>
</ul>
<div class="films">
    <div class="director2 commercial"></div>
    <div class="director2 short"></div>
    <div class="director1 commercial"></div>
    <div class="director1 promo"></div>
    <div class="director3 commercial"></div>
</div> 
```

对此有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:54:31.403

在你修复你的 HTML 是合法的（关闭你的 div）之后，你可以使用这个：

```
$(".directors-menu li").click(function() {
    var cls = $(this).text();
    var films = $(".films");
    films.find("." + cls).each(function() {
        films.prepend(this);
    });
}); 
```

工作演示：http: [//jsfiddle.net/jfriend00/43muT/](http://jsfiddle.net/jfriend00/43muT/)

而且，更短的版本：

```
$(".directors-menu li").click(function() {
    var films = $(".films");
    films.find("." + $(this).text()).prependTo(films);
}); 
```

工作演示：http: [//jsfiddle.net/jfriend00/nLV2j/](http://jsfiddle.net/jfriend00/nLV2j/)

* * *

最好在可点击项目上放置一个自定义属性，以便显示文本可以是任何内容，并且您可以直接控制排序键，如下所示：

这是HTML：

```
<ul class="directors-menu">
    <li data-sort="director1">Sort by Director 1</li>
    <li data-sort="director2">Sort by director 2</li>
    <li data-sort="director3">Sort by director 3</li>
    <li data-sort="commercial">commercial</li>
    <li data-sort="promo">promo</li>
    <li data-sort="short">short</li>
</ul>
<div class="films">
    <div class="director2 commercial">d2</div>
    <div class="director2 short">d2</div>
    <div class="director1 commercial">d1</div>
    <div class="director1 promo">d1</div>
    <div class="director3 commercial">d3</div>
</div> 
```

而且，代码：

```
$(".directors-menu li").click(function() {
    var films = $(".films");
    films.find("." + $(this).data("sort")).prependTo(films);
}); 
```

工作演示：http: [//jsfiddle.net/jfriend00/GZhtr/](http://jsfiddle.net/jfriend00/GZhtr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:03:39.850

我认为这是一个很好的方法

```
$(".directors-menu li").click(function(e){
    $("div."+$(this).text()).prependTo("div.films");
}); 
```

这是一个小提琴[http://jsfiddle.net/Vgt4s/](http://jsfiddle.net/Vgt4s/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T18:51:15.833

For sorting anything, the best jQuery plugin I have used is [Tablesorter](http://tablesorter.com/docs/)

# mysql - 使用“Like”比较值时，在选择语句中使用“Case”的正确方法是什么？

> ID：15532186
> 
> 赞同：0
> 
> 时间：2013-03-20T18:47:47.850
> 
> 标签：mysql

我有这个不返回任何内容的查询：

```
select
    case when Username like 'participanta%' then
        'Novice'
    when Username like 'participantb%' then
        'Experienced'
    when Username like 'participantc%' then
        'Master'
    end as 'group'
from Users; 
```

我只希望值是“新手”，如果`Username`是这样`participanta12`，依此类推。

我也试过这个查询，它只是摆脱`Username like`了第二个和第三个之后`when`：

```
select
    case when Username like 'participanta%' then
        'Novice'
    when 'participantb%' then
        'Experienced'
    when 'participantc%' then
        'Master'
    end as 'group'
from Users; 
```

还尝试了单个用户组：

```
select
    case when Username like 'participanta%' then
        'Novice'
    end as 'group'
from Users; 
```

仍然没有返回任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:53:06.003

如果您只是更改，您的第一个查询应该可以工作

```
as 'group' 
```

成为

```
as `group` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:58:17.133

扩展@Mark的答案。

您的第一个案例陈述是正确的。
但是，您使用的`as`构造错误。

如果您想转义保留的关键字，您需要使用反引号```，而不是引号`'`。

请参阅：[具有一系列值的 MySQL 和 CASE WHEN](https://stackoverflow.com/questions/2913177/mysql-and-case-when-with-a-range-of-values)

对于类似的问题。

# kendo-ui - kendoTabStrip - 最初加载为项目符号列表

> ID：15532191
> 
> 赞同：0
> 
> 时间：2013-03-20T18:48:02.723
> 
> 标签：kendo-ui

我不知道我是否是唯一一个注意到这一点的人，但我有一个使用 kendoTabStrip 的应用程序，并且当页面在 tabstrip 初始化之前最初加载时，页面显示一个项目符号列表。有谁知道如何预防？

这是我的 HTML 的样子。

```
<div id="tabstrip" style="width:1230px">
        <ul>
            <li class="k-state-active">
                Tab1
            </li>
            <li>
                Tab2
            </li>
        </ul>
        <div>
            <div id="Grid1"></div>
        </div>
        <div>
            <div id="Grid2"></div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:53:08.910

基本上你不应该看到这样的闪烁效果。听起来你的页面很重。您可以尝试使用样式*display:none*设置整个标签条，并在使用 jQuery 将其初始化为 show() 之后。

# heroku - Heroku 盆景索引命名错误

> ID：15532195
> 
> 赞同：0
> 
> 时间：2013-03-20T18:48:16.173
> 
> 标签：heroku, elasticsearch

我正在使用 Heroku Bonsai 通过 Tire gem for rails 进行托管弹性搜索。我在一个流量相对较高的网站上工作，这个问题仅在我们在过去几周内设置（用于 QA 环境）的盆景实例上表现出来（所以如果你尝试，请确保你的实例是新鲜的复制）。在以下狭隘情况下，我收到“502 Bad Gateway”错误：

```
curl -XPOST http://[your-bonsai-endpoint-domain]/mysite_qa_users 
```

但是，如果我改为：

```
curl -XPOST http://[your-bonsai-endpoint-domain]/mysite_qa_user 
```

...甚至

```
curl -XPOST http://[your-bonsai-endpoint-domain]/mysite_qa_products 
```

...一切都成功了，所以这似乎只发生在我们狭隘的第一个条件（创建一个名为 mysite_qa_users 的索引）中，就好像特定命名方案“[something]_qa_users”存在错误一样。例如，即使将其更改为“mysite_staging_users”似乎也成功了。我们的应用程序有一个非常大的用户群，我们宁愿不改变基本的东西，比如我们的索引命名方案，只是为了适应我们的 PaaS 提供商的错误，这似乎不应该发生。有人对此有见识吗？

# android - 将图像上传到服务器在 Galaxy S3 中崩溃，但适用于其他设备

> ID：15532199
> 
> 赞同：0
> 
> 时间：2013-03-20T18:48:25.683
> 
> 标签：android, image, amazon-s3, galaxy

我开发了一个将图像从设备库上传到服务器的 Android 应用程序。它在其他设备上运行良好，除了 Galaxy S3。我的 Galaxy S2 工作正常，虽然 S2 和 S3 具有相同的操作系统 Jelly Bean。

在 S3 中上传图片应用程序崩溃。不知道怎么了？这是上传图片的代码：

```
if (selectedImagePath.length() != 0) {

            // get data from page

            try
            {

                BitmapFactory.Options opts=new BitmapFactory.Options();
                opts.inSampleSize = 4;  

                Bitmap bitmapOrg = BitmapFactory.decodeFile(selectedImagePath,opts);

                System.gc();

                ByteArrayOutputStream bao = new ByteArrayOutputStream();

                // Resize the image
                double width = bitmapOrg.getWidth();
                double height = bitmapOrg.getHeight();
                double ratio = 300 / width;
                int newheight = (int) (ratio * height);

                // System.out.println("———-width" + width);
                // System.out.println("———-height" + height);

                bitmapOrg = Bitmap.createScaledBitmap(bitmapOrg,400,
                        newheight, true);  // 400 chilo age

                // Here you can define .PNG as well
                bitmapOrg.compress(Bitmap.CompressFormat.JPEG,75, bao);

                byte[] ba = bao.toByteArray();
                String ba1 = ImageConverter.encodeBytes(ba);

                // System.out.println("uploading image now ——–” + ba1);

                ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                nameValuePairs.add(new BasicNameValuePair("image", ba1));

                nameValuePairs.add(new BasicNameValuePair("event_id",
                        Integer.toString(taskEntity.getEventId())));
                nameValuePairs.add(new BasicNameValuePair("title", title));
                nameValuePairs.add(new BasicNameValuePair("description",
                        description));
                nameValuePairs.add(new BasicNameValuePair("urgent", Integer
                        .toString(urgentAttention)));
                nameValuePairs.add(new BasicNameValuePair("sendtime",
                        convertedtime));

                try {

                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost(
                            AppSettings.SERVER_ADDRESS+"upload_image.php");
                    httppost.setEntity(new UrlEncodedFormEntity(
                            nameValuePairs));

                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();

                    // print responce
                    outPut = EntityUtils.toString(entity);
                    Log.i("GET RESPONSE—-", outPut);

                    // is = entity.getContent();
                    Log.e("log_tag ******", "good connection");

                    bitmapOrg.recycle();

                } catch (Exception e) {
                    Log.e("log_tag ******",
                            "Error in http connection " + e.toString());
                }

            }
            catch(Exception e)
            {
                e.printStackTrace();
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:55:29.997

您没有说明您收到什么错误，但由于您的问题是 Galaxy S3 特有的，我猜这是 OutOfMemoryError。S3 的应用程序堆相对于其屏幕尺寸而言往往较小，因此位图存储有点紧张。

尝试使用：

```
opts.inPurgeable = true;
opts.inInputShareable = true; 
```

inPurgeable 将在不同的堆上分配位图，并允许其数据在内存压力下被丢弃，而无需等待垃圾收集器。inInputShareable 将允许从指定的输入重新解码位图，以防在您完成之前将其清除。尽可能多地使用这两个选项是一种很好的做法。请记住，使用 inInputShareable 无法更改或丢弃正在解码的数据，因为位图可能再次需要它。

# qtp - 在 QTP 中链接共享对象存储库

> ID：15532200
> 
> 赞同：1
> 
> 时间：2013-03-20T18:48:26.883
> 
> 标签：qtp

我对在 qtp 中链接共享对象存储库有疑问。对象存储库的链接方式有两种，一种是在测试级：通过资源菜单和添加存储库，另一种是通过Action 属性。

如果我的测试包含多个操作，并且如果我通过第一种方法链接共享对象存储库，那么它将链接到所有调用的操作吗？

或者我的问题是在操作级别和测试级别链接共享对象存储库有什么区别？哪一个是最好的方式？这两种方式到底发生了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:37:48.630

使用共享存储库的最佳方式是在测试级别，操作级别意味着我们可以使用本地存储库。如果您在测试级别使用，则 OR 将链接到所有调用的操作。

# php - jQuery post 功能不起作用！不知道为什么

> ID：15532206
> 
> 赞同：0
> 
> 时间：2013-03-20T18:48:53.447
> 
> 标签：php, jquery, ajax

嗨，我对网络编程有点陌生，我遇到了 $.post 函数的问题。

现在我的索引页面中有一些图片，当我点击它们时，我想要：

1) 转到名为 viewAlbum 的第二个页面

2) 获取点击图像的来源并将其存储在`$_SESSION['album']`位于 viewAlbum.php 页面中。

索引.php：

```
<a href = \"viewAlbum.php\"><img src = " . $url . " alt = " . $caption . " title = " . $caption . "/></a>

(caption is a string)

script.js:

$('img').click(function(){
        if(window.location == index){
            console.log("1");
            var src = $(this).attr("src");
            var data = {"Album": src};
        }
}

viewAlbum.php:

<?php
if(isset($_POST['Album'])){ 
    print("worked>");
    $_SESSION['album'] = $_POST['Album'];
}
else{ 
print("did not work");
}

?> 
```

这是打印“不起作用”，我不知道如何解决它。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:55:16.130

首先不要忘记修复您的 html 并`name`在您的元素中添加标签。在你的情况下，

```
name="Album" 
```

您应该将 ajax 添加到您的 script.js 中：

```
 $.ajax({
            url: "/name.php",
            type: "post",
            data: your data
        }); 
```

另请参阅[Jquery.Post()的 api 文档](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:52:05.927

您没有在索引或 JS 中设置任何 POST 数据。看一下[JQuery $.post(](http://api.jquery.com/jQuery.post/) ) 函数，看看它是如何完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:52:42.947

这是语法

```
 $.ajax({
            url: "/name.php",
            type: "post",
            data: your data
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T18:53:24.163

您必须使用 AJAX 通过 JavaScript 将数据发送到 .php 脚本！ [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c++ - 模板和内联优化乘法

> ID：15532209
> 
> 赞同：2
> 
> 时间：2013-03-20T18:49:01.873
> 
> 标签：c++, templates, optimization, inline-assembly

我不明白我遇到的这个例子：

> ```
> int Multiply(int x, int m){
>     return x * m;}
> 
> template<int m>
> int MultiplyBy(int x){
>     return x * m;}
> 
> int a,b;
> a = Multiply(10,8);
> b = MultiplyBy<8>(10); 
> ```
> 
> 在上面的示例中，模板函数比简单函数更快，因为编译器知道它可以通过使用移位操作来乘以 2 的幂。x*8 被替换为 x << ，这样更快。在简单函数的情况下，编译器不知道 m 的值，因此**除非可以内联函数，否则**无法进行优化。

据我了解，模板可以优化的原因是因为编译器在编译时知道参数 (8) 的值，而简单函数直到运行时才知道 x (或 m) 的值。那么内联简单函数将如何改变这一事实呢？内联不提供参数值的任何运行时知识？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T18:51:12.090

> 内联不提供参数值的任何运行时知识？

内联本身没有。但是，由于第二个参数是编译时常量，编译器可以将该常量传播到内联函数中。

由于第一个参数也是编译时常量，所以整个

```
a = Multiply(10,8); 
```

可以替换为

```
a = 80; 
```

事实上，这正是我的编译器（gcc 4.7.2）在我打开优化时所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T18:55:23.370

```
a = Multiply(10,8); 
```

让我们手动内联函数调用：

```
a = 10 * 8; 
```

现在，当然 8 在这里是编译时常量，因此编译器可以使用所描述的位移优化。但是，它可能会执行更好的优化，只需替换`10 * 8`为`80`. 编译器非常聪明——给定一个常量表达式，例如`10 * 8`，它们可以在编译时计算出结果。

如果你这样做了，那将是不同的：

```
int x;
std::cin >> x;
a = Multiply(10,x); 
```

如果你`Multiply`在这里内联，你会得到：

```
int x;
std::cin >> x;
a = 10 * x; 
```

编译器在编译时不知道 的值，`x`因此无法以相同的方式对其进行优化。

# air - 如果不允许推送通知，则未收到 RemoteNotification TOKEN

> ID：15532211
> 
> 赞同：1
> 
> 时间：2013-03-20T18:49:09.320
> 
> 标签：air, push-notification, apple-push-notifications, provisioning-profile

真的被这个弄糊涂了！

我有一个 Adob​​e AIR iOS 应用程序，并且正在使用 RemoteNotifier 订阅 PushNotifications。更多详情[http://www.adobe.com/devnet/air/articles/ios-push-notifications.html](http://www.adobe.com/devnet/air/articles/ios-push-notifications.html)

我有以下听众。

```
remoteNotifier.addEventListener(RemoteNotificationEvent.TOKEN, onToken); 
```

在我将 iPod 重置为出厂设置并重新安装我的应用程序（使用 adhoc 分发）后，当我收到提示时，我单击*“不允许”以获取推送通知。*

我发现我没有收到任何**RemoteNotificationEvent.TOKEN**，所以我的应用程序基本上挂起等待。

如果我去我的**设置**，**通知**并玩

*   将警报样式从无**切换**到**警报**和
*   然后再次回到**None**（因为它是）

我发现我可以毫无问题地返回并启动我的应用程序。只是在第一次用户流时，我似乎没有拿回任何**TOKEN**。

有任何想法吗？有没有其他人看到过这种行为？或者知道我应该如何处理这个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:43:55.330

希望我是正确的，如果我错了，请有人纠正我。

据我所知，当用户单击*“不允许”时，您不会收到***RemoteNotificationEvent.TOKEN**。

 *由于某些我仍然不清楚的原因，在您使用设置并重新启动应用程序后，您如何获得**RemoteNotificationEvent.TOKEN**，无论您设置了何种通知设置。但也许这就是它的本意？

所以，真的我必须改变流程，这样我就不会在加载我的第一个屏幕之前等待那个**RemoteNotificationEvent.TOKEN 。**如果**TOKEN**回来了，它就会回来，否则，如果没有，这没什么大不了的，因为这意味着用户点击了*“不允许”*，我们无论如何都不需要发送 PUSH 通知。

每次我重新启动我的应用程序时，我都会打电话订阅并获取**令牌**，这样如果用户要在手机的设置中启用通知，我也确实有一个令牌 ID 来发送推送通知。

不过，我看到的唯一问题是，如果用户通过手机设置将通知更改为 ON 并且不重新启动应用程序（以检索**TOKEN**），那么设备不会收到推送通知。

不知道如何处理？*

# wso2 - wso2 身份服务器 4.10 只读，带有自定义 UserManagerStore 类

> ID：15532212
> 
> 赞同：0
> 
> 时间：2013-03-20T18:49:15.087
> 
> 标签：wso2

我有一个扩展 AbstractUserStoreManager 的类。

我的问题目前与 getRoleListOfUser() 方法有关。此处返回的列表显示在 UI 的 Unassigned Role 列表中，而不是 Assigned Role 列表中。即该方法的行为似乎是返回所有可能的角色，而不是分配给用户的角色。

我需要用这个角色列表设置一个内部属性吗？这是一个已知的错误？

```
 @Override
public String[] getRoleListOfUser(String userName)
        throws UserStoreException {

    // check whether roles exist in cache
    try {
        String[] names = getRoleListOfUserFromCache(this.tenantId, userName);
        if (names != null) {
            return names;
        }
    } catch (Exception e) {
        // if not exist in cache, continue
    }

    List<String> roles = new ArrayList<String>();

    // **code removed ** - but, roles is populated by a web service.

    String [] roleList = (String[]) roles.toArray(new String[roles.size()]);

    addToUserRolesCache(this.tenantId, userName, roleList);

            // TODO: make roleList apply to assigned roles, rather than unassigned roles!

    return roleList;
} 
```

我的实现与现有示例不同，因为我使用的是 Web 服务调用，而不是使用 jdbc 直接查询用户存储。

但是，这似乎与此问题类似：[ldap-user-store-not-working](https://stackoverflow.com/questions/15392148/wso2-identity-server-ldap-user-store-not-working "ldap-user-store-not-working") ，除了我使用自己的类而不是 LDAP。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:51:18.140

4.1.1 版本在 AD 和 LDAP 中将角色与用户正确关联。这个版本还没有出来，可能还要三周。但是我正在试验的 alpha 版本在角色和域关联方面有很多改进。

# c# - 模态 RadWindow 未在 Chrome 中关闭

> ID：15532214
> 
> 赞同：1
> 
> 时间：2013-03-20T18:49:23.713
> 
> 标签：c#, javascript, asp.net, telerik

我有一个主“报告”页面，其中包含用户可以执行的一些操作，这些操作将打开一个模态 RadWindow，让用户执行操作，然后单击保存，模态窗口将关闭，主网格刷新。

这在 IE 和 Firefox 中都可以正常工作，但 Chrome 会完成所有“工作”，但模式页面保持打开状态。仅当我点击“保存”按钮时，这才是正确的；表单顶部的取消按钮和关闭按钮仍然可以正常工作。

这是子窗口中的 JavaScript：

```
<script type="text/javascript">
    function GetRadWindow() {
        var oWindow = null;
        if (window.radWindow)
            oWindow = window.radWindow;
        else if (window.frameElement.radWindow)
            oWindow = window.frameElement.radWindow;
        return oWindow;
    }

    function CloseRadWindow() {
        var oWnd = GetRadWindow()
        oWnd.SetUrl("");
        oWnd.close();
    }

    function CloseAndRebind(args) {
        var oWnd = GetRadWindow()
        oWnd.BrowserWindow.refreshGrid(args);
        oWnd.SetUrl("");
        oWnd.close();
    }
</script> 
```

这是父级的 refreshgrid 函数：

```
 <script type="text/javascript">
        function refreshGrid(arg) {
            if (!arg) {
                $find("<%= RadAjaxManager.GetCurrent(Page).ClientID %>").ajaxRequest("Rebind");
            }
            else {
                $find("<%= RadAjaxManager.GetCurrent(Page).ClientID %>").ajaxRequest("RebindAndNavigate");
            }
        }
    </script> 
```

父级通过运行加载模式窗口：

```
 protected void btnSplitInvoice_Click(object sender, EventArgs e)
    {
        var btn = sender as Button;
        var item = (GridDataItem)btn.Parent.Parent;

        long id = long.Parse(item["Id"].Text);
        var itemType = this.TabStrip1.SelectedIndex == 0 ? "TransferOrderInvoice" : "EquipmentInvoice";

        string scriptstring = "var oWindow=radopen('../Misc/SplitInvoice.aspx?id=" + id + "&type=" + itemType + "','SplitInvoice');oWindow.SetModal(true);";
        ScriptManager.RegisterStartupScript(this, this.GetType(), "openwindow", scriptstring, true);
    } 
```

孩子的保存按钮在后面的代码中做了很多工作，然后以这个结束：

```
ScriptManager.RegisterClientScriptBlock(this.Page, this.GetType(), "mykey", "CloseAndRebind('navigateToInserted');", true); 
```

取消按钮设置如下：

```
<button type="button" class="CancelBtn" value="" onclick="CloseRadWindow()">
                        </button> 
```

我发现不久前有一个条目建议添加`window.open('', '_self', '');`到结尾，但这似乎不适用（当我测试它时也没有工作）。

编辑：在控制台打开的情况下运行 Chrome 时，我确实看到在`refreshgrid`运行时在主页上出现错误：

`Cannot call method 'ajaxRequest' of null`

但不确定这是否是导致问题的原因。现在更深入地研究它。

EDIT2：所以问题似乎是在使用 Chrome 时，主页面中的 RadAjaxManager 在`refreshGrid`运行时似乎没有找到，这就是上述空错误的原因。我能够通过替换 refreshGrid 函数的内容来“解决”问题，并且效果`document.location.reload();`很好。不过，如果我能提供帮助，我宁愿不重新加载整个页面，所以想知道是否有办法解决这个问题。我很好奇为什么 IE 和 Firefox 似乎可以处理这个问题，而 Chrome 却没有？

可能有用的更多信息：主页的 Page_Load 事件：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            this.Session["AllUserLocationValue"] = string.Empty;

            this.InitializeThePage();
        }

        RadAjaxManager manager = RadAjaxManager.GetCurrent(this.Page);
        manager.AjaxRequest += this.manager_AjaxRequest;

        manager.AjaxSettings.AddAjaxSetting(manager, this.pnlHeading, this.RadAjaxLoadingPanel1);
        manager.AjaxSettings.AddAjaxSetting(manager, this.RadCodeBlock1, this.RadAjaxLoadingPanel1);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:03:53.317

**删除对 SetUrl("") 的调用，**因为它开始处理当前页面，并且如果浏览器足够快，它将不会调用 close()。

如果您需要导航 RadWindow，您可以使用这三个选项之一

*   将其 ReloadOnShow 属性设置为 true。通常与 ShowContentDuringLoad=false 一起使用

*   将 DestroyOnClose 设置为 true。谨慎使用并在 close() 之前添加超时

*   使用 OnClientClose 事件将 url 设置为空白页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:42:39.057

好的，我发现 Chrome 确实会一直“丢失”报告页面的母版页引用，或者至少在`RadAjaxManager`那里，而 Firefox 和 IE 没有（我可以追踪并观察 $find 对它们的工作）。

然而，我确实发现，Chrome（和其他两个）可以始终如一地找到报告的主网格（这是`refreshGrid`最终要寻找的）。所以我能够用以下内容替换胆量`refreshGrid`：

```
function refreshGrid(arg) {
            var radgridNotApproved = $find("<%= rgNotApproved.ClientID %>").get_masterTableView();
            radgridNotApproved.rebind();
        } 
```

并得到我正在寻找的行为。它也更干净；最初的版本`refreshGrid`看起来它可能原本打算做的不仅仅是重新绑定网格，但当我看到它的时候，这就是它真正所做的一切。

# ruby - 如何获取通过“pv”命令传送的命令的错误输出

> ID：15532224
> 
> 赞同：2
> 
> 时间：2013-03-20T18:49:59.617
> 
> 标签：ruby, linux

所以我正在尝试使用 PV 为各种命令（即 tar）创建进度条。我在 ruby​​ 脚本中运行这些命令。问题在于，由于 pv 是管道链中的最后一个命令，它正在吸收所有错误。

IE。

```
result = `tar -cpz testDir 2>&1 | pv -pterb > testTar.tar.gz` 
```

如果以下命令失败（即目录空间不足），则以下命令不会返回任何错误，因为它已被 pv 命令吸收。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:56:49.103

对，通常最后一个命令很重要。您需要*pipefail*选项。

```
$ sh -c '                 false | true'; echo $?
0
$ sh -c 'set -o pipefail; false | true'; echo $?
1 
```

在纯 Posix中复制没有简单的方法`pipefail`，但我注意到 bash 和一般真实的 Posix [dash(1)](http://linux.die.net/man/1/dash)确实实现了它。

# cakephp - CakeRequest::input() 是否直接从网络传输数据？

> ID：15532225
> 
> 赞同：0
> 
> 时间：2013-03-20T18:50:06.147
> 
> 标签：cakephp, file-upload, streaming

就这样，我想将上传的文件直接从网络传输到文件系统，以避免内存不足错误。我可以用 CakeRequest::input() 来做吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T21:07:23.627

也许最好阅读 API 文档[CakeRequest::input()](http://api.cakephp.org/2.3/source-class-CakeRequest.html#809-837)或源代码；

[http://api.cakephp.org/2.3/source-class-CakeRequest.html#876](http://api.cakephp.org/2.3/source-class-CakeRequest.html#876)

根据消息来源，'input()' 直接`php://input`通过以下`_readInput()`方法读取：

但是，如果我正确读取了源代码的那部分，它将在返回其内容之前读取内存中的整个流。所以我不认为这会给你你想要的。

可能还有其他解决方案，也许存在插件。但是，您可以编写自己的实现，以 CakeRequest 为例？

您还可以检查[HttpSocket](http://book.cakephp.org/2.0/en/core-utility-libraries/httpsocket.html)类

# sql - select 语句 - 用固定值更新一个字段的值

> ID：15532228
> 
> 赞同：0
> 
> 时间：2013-03-20T18:50:14.657
> 
> 标签：sql, sql-server, tsql, sql-update

我有一个 select 语句，它从表中返回几个字段。

我只想更新该选择的结果，在一个字段中给出一个固定值。

我虽然是这样，但它不起作用：

```
UPDATE

 (SELECT * from table.... where...)

SET field1=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:52:47.377

您不需要 a `SELECT`，只需`WHERE`直接使用带有 的子句`UPDATE`，仅对在子句中声明条件的行执行此操作`WHERE`：

```
UPDATE t
SET field1 = 1
FROM table AS t
WHERE ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:59:54.457

如果您使用的是 t-sql

```
更新
SET 字段 = 固定值
从表名
在哪里提交......

```

# speech-recognition - 微软语音识别被动模式？

> ID：15532229
> 
> 赞同：0
> 
> 时间：2013-03-20T18:50:16.113
> 
> 标签：speech-recognition

我发现的所有使用 Microsoft Speech Recognition 的示例都包括一个开始按钮和一个结束按钮，用于开始和停止收听过程。我正在开发的应用程序需要不断地倾听要说的一个词。有没有办法让它一直开着听？我尝试了谷歌并找不到任何东西。谢谢。

# android - Android XML 权重会导致宽度问题

> ID：15532233
> 
> 赞同：0
> 
> 时间：2013-03-20T18:50:39.813
> 
> 标签：android, xml

这个问题有点难以解释，所以我将使用图片： ![这就是我要的](../Images/5d09b4acb9ce624e9d0adffebeb38fdc.png)

这就是我希望它看起来的样子，但目前没有一个编辑框有`layout_width`. 当我添加一个`layout_width`（无论哪种类型）时，会发生以下情况：

![有宽度](../Images/8101a557e26b29bd3f8e3a2bf34d7dc6.png)

这是什么原因造成的？我怎样才能让它看起来像第一张图片，但保持宽度（如果没有，则无法启动应用程序`layout_width`？哦，我想避免使用特定的单位，因为它在更大的设备上看起来很糟糕，或者至少我认为可以（我有 Galaxy Note）这是我的代码，专门用于 radiogroup 和 edittexts（按钮位于主布局中：

```
 <LinearLayout
    android:weightSum="100" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <EditText android:id="@+id/X1" 
        android:layout_width="fill_parent"  
        android:layout_weight="20" 
        android:layout_height="wrap_content" 
        android:ems="10" 
        android:gravity="center" 
        android:inputType="number|numberDecimal" 
        android:singleLine="true">
        <requestFocus/>
    </EditText>

<EditText android:layout_weight="20"
    android:id="@+id/Y1"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:ems="10" android:gravity="center" 
    android:inputType="number|numberDecimal" 
    android:singleLine="true"/>

<RadioGroup android:id="@+id/radioGroup1" android:layout_weight="20" android:layout_width="wrap_content" android:layout_height="wrap_content" android:gravity="center">
    <RadioButton android:id="@+id/plus" android:layout_width="wrap_content" android:layout_height="wrap_content" android:checked="true" android:gravity="center|center_horizontal" android:text="+"/>
    <RadioButton android:id="@+id/minus" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1" android:gravity="center" android:text="-"/>
    <RadioButton android:id="@+id/multiply" android:layout_width="wrap_content" android:layout_height="wrap_content" android:gravity="center|center_horizontal" android:text="*"/>
    <RadioButton android:id="@+id/div" android:layout_width="wrap_content" android:layout_height="wrap_content" android:gravity="center" android:text="/"/>
</RadioGroup>

<EditText android:id="@+id/X2" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:layout_weight="20" 
    android:ems="10" 
    android:gravity="center" 
    android:inputType="number|numberDecimal"/>

<EditText android:id="@+id/Y2" 
    android:layout_weight="20"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:ems="10" 
    android:gravity="right" 
    android:inputType="number|numberDecimal"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:53:17.943

通常，您将要加权的轴设置为 0dp。

在您的情况下，将 layoutWidth 设置为 0dp

这应该使它们保持不变。

# perl - 在连接或字符串中使用未初始化的值

> ID：15532235
> 
> 赞同：0
> 
> 时间：2013-03-20T18:50:47.370
> 
> 标签：perl

```
use strict;
use warnings;
my $dir = "/";
my @old = `ls -1rtA $dir`;
#print @old;
my #variable declaration
while(1){
        $oldlen = scalar @old;
        @new = `ls -1rtA $dir`;
        print @new;
        $newlen = scalar @new;
        if(@old ~~ @new)
        {

        }
        else
        {
            $diff=$oldlen+1;
            print "$diff \n";
            print "$list \n";
            #print "@new[$list] \n";
            #$op=$new[$list];
            print "$newlen \n";
            #pop @core,$op;
            print "@new[$diff..$newlen]";
            print @core;
        }
} 
```

我收到以下错误：

在连接或字符串中使用未初始化的值`print "@new[$diff..$newlen]";`

是什么导致了这个问题？

错误是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:29:48.560

您已设置`$newlen`为数组中的元素数，`@new`然后尝试访问`$new[$newlen]`. 的元素`@new`位于 的索引`0`处`$newlen - 1`，因此`$new[$newlen]`超出了数组的末尾。您会收到警告，因为它的计算结果`undef`为未初始化。

切片的起始索引也有同样的问题，应该是

```
print "@new[$oldlen..$newlen-1]" 
```

# postgresql - Postgresql：选择不同的 - 列组合

> ID：15532237
> 
> 赞同：1
> 
> 时间：2013-03-20T18:50:51.747
> 
> 标签：postgresql, select, distinct-values

我在 PostgreSQL 中有这个查询：

```
select p1.id, p2.id, p1.title, p2.title 
from publication "p1", publication "p2"
where p1.title = p2.title and p1.id <> p2.id 
```

问题是它返回的数据比我需要的多：

```
id    id   title          title  
3456  5678 Ulysses        Ulysses  
5678  3456 Ulysses        Ulysses  
234,  345  Das Kapital    Das Kapital  
345   234  Das Kapital    Das Kapital 
```

我只需要第 1 行和第 3 行，或第 2 行和第 4 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:55:39.043

```
select p1.id, p2.id
 , p1.title, p2.title
from publication p1
    , publication p2
where p1.title = p2.title
  and p1.id < p2.id -- tie breaker
  ; 
```

或者使用更时髦的 JOIN 语法：

```
SELECT p1.id, p2.id
 , p1.title, p2.title
FROM publication p1
JOIN publication p2 ON p1.title = p2.title
                   AND p1.id < p2.id -- tie breaker
  ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:09:46.507

我有一个简单的想法来实现你的场景。

```
select p1.id, p2.id, p1.title, p2.title , sum(p1.id + p2.id) as temp
from publication "p1", publication "p2" group by temp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-31T11:30:34.390

```
select DISTINCT p1.id, p2.id, p1.title, p2.title 
from publication "p1", publication "p2"
where p1.title = p2.title 
```

# javascript - 如何在 mongoose.find 中执行动态数量的标准？

> ID：15532238
> 
> 赞同：2
> 
> 时间：2013-03-20T18:50:53.957
> 
> 标签：javascript, node.js, mongodb, mongoose

例如，在任何给定的运行时，

`Books = { CatSelect : ["SciFi", "Humor", "History"], MinPages : [300,50,500] };`

如果我在下面的函数中手动编写查询`find`，它会按预期工作并找到页数大于指定类别中指定数量的书籍。

```
MyCollection.find({ $or: [ { Category: Books.CatSelect[0], Pages : { $gte: Books.MinPages[0] } }, { Category: Books.CatSelect[1], Pages : { $gte: Books.MinPages[1] } } ] }).execFind(function(err,result){
...
} 
```

但问题是我不知道会选择多少个类别，上面的示例是`.find`为 2 个类别设置示例。

如何将不同数量的标准动态地放入`.find`函数中？

当然，我可以将所有条件放在一个字符串中，但查询既不是字符串也不是 JSON，所以我有点迷路了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T03:46:58.863

您可以根据选择以编程方式构建查询对象。例如：

```
var selections = [0, 1];
var query = { $or: [] };
for (var i=0; i<selections.length; i++) {
  var selection = selections[i];
  query.$or.push({ 
    Category: Books.CatSelect[selection], 
    Pages: { $gte: Books.MinPages[selection] } 
  });
}
MyCollection.find(query).exec(function(err, result){
  //...
} 
```

# c++ - Implement C++ bitvector in ios project in xcode

> ID：15532240
> 
> 赞同：3
> 
> 时间：2013-03-20T18:51:00.003
> 
> 标签：c++, ios, objective-c, bitvector

I am wondering what the proper way to implement a bitVector in an iOS project is using xcode.

I am pretty new with iOS and just found out I could use the C++ bitvector in my project. Any guidance would be greatly appreciated.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:53:24.173

只需将**C++ 位向量** 项目类`.m`文件重命名为`.mm`并将其添加到 Xcode。

[在此处](http://www.youtube.com/watch?v=gngZCdMbdcw)观看示例视频教程

[在此处](http://neilmonday.blogspot.com/2008/02/how-to-compile-basic-c-programs-in.html)查看示例代码教程

[在这里](http://robnapier.net/blog/wrapping-c-take-2-1-486)查看一个很好的包装 C++ 教程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T20:07:56.717

C++ 中位向量的“标准”选择是，按优先级递减的顺序：

*   `std::bitset`当您在编译时知道位数时（[文档](http://www.cplusplus.com/reference/bitset/bitset/)）
*   `boost::dynamic_bitset`当您直到运行时才知道位数或需要动态更改位数时（[文档](http://www.boost.org/doc/libs/1_36_0/libs/dynamic_bitset/dynamic_bitset.html)）
*   `std::vector<bool>`类似于`boost::dynamic_bitset`但不太可取。在谷歌搜索“std::vector”，你会发现很多关于它为什么不幸的讨论。（[文档](http://www.cplusplus.com/reference/vector/vector-bool/)）

# eclipse - error while installing WindowBuilder Pro Update Site - http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7

> ID：15532242
> 
> 赞同：1
> 
> 时间：2013-03-20T18:51:07.207
> 
> 标签：eclipse, swing

I faced this error while installing [http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7](http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7) on eclipse Juno Service Release 1

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer_2.6.0.r37x201206111227.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.GWTExt_2.6.0.r37x201206111253.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.GXT_2.6.0.r37x201206111253.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.GXT.databinding_2.6.0.r37x201206111253.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.SmartGWT_2.6.0.r37x201206111253.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.UiBinder_2.6.0.r37x201206111227.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.UiBinder.wizards_2.6.0.r37x201206111253.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.doc.user_2.6.0.r37x201206111253.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/features/com.google.gdt.eclipse.designer.editor.feature_2.6.0.r37x201206111227.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/features/com.google.gdt.eclipse.designer.feature_2.6.0.r37x201206111253.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.hosted_2.6.0.r37x201206111222.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.hosted.2_0_2.6.0.r37x201206111222.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.hosted.2_0.super_2.6.0.r37x201206111222.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.hosted.2_0.webkit_2.6.0.r37x201206111222.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.hosted.2_0.webkit_win32x64_2.6.0.r37x201206111222.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.hosted.2_2_2.6.0.r37x201206111222.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.hosted.2_2.webkit_2.6.0.r37x201206111222.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/features/com.google.gdt.eclipse.designer.hosted.feature_2.6.0.r37x201206111222.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.hosted.lib_2.6.0.r37x201206111222.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.launch_2.6.0.r37x201206111253.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.preferences_2.6.0.r37x201206111253.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/com.google.gdt.eclipse.designer.wizards_2.6.0.r37x201206111253.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.rcp_1.5.0.r37x201206111317.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.rcp.GroupLayout_1.5.0.r37x201206111330.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/features/org.eclipse.wb.rcp.GroupLayout_support.feature_1.5.0.r37x201206111330.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.rcp.SWT_AWT_1.5.0.r37x201206111333.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/features/org.eclipse.wb.rcp.SWT_AWT_support_1.5.0.r37x201206111333.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.rcp.databinding_1.5.0.r37x201206111317.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.rcp.databinding.emf_1.5.0.r37x201206111317.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.rcp.databinding.xwt_1.5.0.r37x201206111323.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.rcp.doc.user_1.5.0.r37x201206111236.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/features/org.eclipse.wb.rcp.doc.user.feature_1.5.0.r37x201206111236.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/features/org.eclipse.wb.rcp.feature_1.5.0.r37x201206111317.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.rcp.nebula_1.5.0.r37x201206111317.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.rcp.swing2swt_1.5.0.r37x201206111317.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.swt_1.5.0.r37x201206111304.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/features/org.eclipse.wb.swt.feature_1.5.0.r37x201206111304.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.swt.layout.grouplayout_1.5.0.r37x201206111330.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.swt.widgets.baseline_1.5.0.r37x201206111317.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/plugins/org.eclipse.wb.xwt_1.5.0.r37x201206111323.jar
dl.google.com
Unknown Host: http://dl.google.com/eclipse/inst/d2wbpro/latest/3.7/features/org.eclipse.wb.xwt.feature_1.5.0.r37x201206111323.jar
dl.google.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T14:07:43.380

您可以直接在 eclipse 网页上找到更新站点：

[http://www.eclipse.org/windowbuilder/download.php](http://www.eclipse.org/windowbuilder/download.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T22:52:05.303

您用于 Windowbuilder Pro 更新站点的 URL 不存在。

最后我检查了一下，Juno 的更新站点是：http: [//dl.google.com/eclipse/plugin/4.2](http://dl.google.com/eclipse/plugin/4.2)

如果这不起作用，请查看以下问题：[Installing WindowBuilder on Eclipse 4.2](https://stackoverflow.com/q/10867920/2081889)

试试看，然后回复我。

# android - Android limit localizations

> ID：15532243
> 
> 赞同：6
> 
> 时间：2013-03-20T18:51:07.447
> 
> 标签：android, localization

I am trying to publish an app that is currently only configured for English. When I upload my app to the Play store, it says localization for 'Default + 49 languages'? How do I disable all but English?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-25T09:17:11.297

我刚刚注意到同样的问题，经过一番调查后找到了解释。除了已经存在的关于后果的答案之外，我还想分享这个：

只要您的应用包含**支持其他语言的库**（例如 Google Play 服务），您创建的 apk 就会被标记为支持所有这些本地化！

你可以顺便检查一个apk的属性，即使没有上传到Google Play Store。只需从Android Apk中最新的**build-tools 文件夹**运行以下命令。对我来说，目前是 cd ~ANDROID_HOME/build-tools/19.0.1

`./aapt d badging <apk>`

正如之前建议的那样，提供应用描述的语言最为重要，因为这是用户实际看到的。此外，可以在此描述中包含实际支持的语言列表。

如果您真的想摆脱其他语言，则需要从所有库中删除特定于语言的 res 文件夹。如果是库的本地副本，这很容易。我想使用 gradle 和 maven 也应该是可能的，但我认为目前不值得这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T03:27:37.380

正如其他人指出的那样，问题在于，如果您包含一个支持其他语言的库，所有这些翻译都会被拉入您的应用程序，然后商店会假定您支持这些语言。

要阻止构建工具引入不受支持的语言，您可以在“aapt”打包工具上设置过滤器，以便它忽略特定的文件/目录。

过滤器的格式可以[在 sdk 的主要 ant 'build.xml' 文件中](https://android.googlesource.com/platform/sdk/+/98b631c6b3765be96b3707ba7aa54d52b10f4872/files/ant/build.xml)找到。（搜索`aapt.ignore.assets`）

* * *

**默认排除列表**是：

```
!.svn:!.git:!.ds_store:!*.scc:.*:<dir>_*:!CVS:!thumbs.db:!picasa.ini:!*~ 
```

我建议您保留此列表并将任何额外的过滤器附加到它的末尾。

例如，如果您想排除`es-US`（存储在带有扩展名的目录中`-es-rUS`），您可以将排除列表更改为：

```
!.svn:!.git:!.ds_store:!*.scc:.*:<dir>_*:!CVS:!thumbs.db:!picasa.ini:!*~:<dir>*-es-rUS 
```

这将排除所有以结尾的目录`-es-rUS`（请注意，过滤器不区分大小写，因此`<dir>*-eS-RuS`也可以）

* * *

要为**命令行**执行此操作：

```
aapt.exe <All of your normal commands for packaging>  --ignore-assets <exclude-list> 
```

对于**Ant/Eclipse**构建，将以下内容添加到您的项目`ant.properties`文件中：

```
aapt.ignore.assets=<exclude-list> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:07:37.600

当您发布您的应用程序时，**如果您只用英文编写它，它将仅以英文发布。**

如果您想将您的应用程序限制在特定国家/地区，您可以这样做：在开发者控制台上，您有一个“定价和分发”选项卡。你可以选择那里的国家。它的外观如下：

![在此处输入图像描述](../Images/0dfa66132d73679967af8f775dab6a3d.png)

# c# - Accessing Bluetooth data via Serialport in C#

> ID：15532244
> 
> 赞同：4
> 
> 时间：2013-03-20T18:51:09.277
> 
> 标签：c#, bluetooth, serial-port, unity3d

So I'm working in Unity3D, programming in C#, and I heard that one can read data from a Bluetooth adaptor via SerialPort. I have several Bluetooth USB adaptors that I've tried to connect on my PC using this method. However, when I try to open the SerialPort, I get an error message that says port does not exist. I only included the code relevant to the question, but portI is a string ("COM11" or "COM12") and PortIn is of type SerialPort.

```
void OnGUI() {
    GUI.Label(new Rect(btnX, btnY, btnW, btnH), "PortIn = " + portI);
    if(!connected) {
        for (int i = 0; i<ports.Length; i++) {
            if(GUI.Button(new Rect(btnX, btnY + btnH + (btnH * i), btnW, btnH), ports[i])) {
                portI = ports[i];
            }
        }           
    }       
    if(GUI.Button(new Rect(btnX + (btnW * 2 + 20), btnY, btnW, btnH), "Connect")) {
        portIn = new SerialPort(portI, 9600);               
        portIn.ReadTimeout = 1000;
        if (!portIn.IsOpen) {
            portIn.Open();
        }
        connected = true;
        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T00:03:06.807

这是我正在处理的一些代码，只要 COM 端口（在我的情况下为 COM9）与配对时的蓝牙设备相同，它就会从蓝牙连接获取数据到独立的 PC 构建（或在编辑器中）它。

配对后，转到蓝牙设置 > COM 端口，查看带有设备名称的端口。它可能会说 COM8 或 COM9 或其他。如果设备已配对并且代码中的 COM 端口与蓝牙设置中的相同，并且超时数和波特率与您发送数据的应用程序中的相同......那么您将获得运行此代码时的某些内容。这只是为了帮助通过蓝牙连接到串行连接。

希望它可以帮助某人。通过阅读这些论坛，我得到了很多很好的建议；）

```
using System.Collections;
using System.IO.Ports;

public class checker : MonoBehaviour {

    public static SerialPort sp = new SerialPort("COM9", 9600, Parity.None, 8, StopBits.One);
    public string message, message1;
    public string message2;

    void Start() {
        OpenConnection();   
    }

    void Update() { 
        message2 = sp.ReadLine(); 
    } 

    void OnGUI()    {
        GUI.Label(new Rect(10, 180, 100, 220), "Sensor1: " + message2);
    }

    public void OpenConnection() {
        if (sp != null) 
        {
            if (sp.IsOpen) 
            {
                sp.Close();
                message = "Closing port, because it was already open!";
            }
            else 
            {
                sp.Open(); 
                sp.ReadTimeout = 1000;  
                message = "Port Opened!";
            }
        }
        else 
        {
            if (sp.IsOpen)
            {
                print("Port is already open");
            }
            else 
            {
                print("Port == null");
            }
        }
    }

    void OnApplicationQuit() {
        sp.Close();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:46:03.490

这应该是可能的。蓝牙 rfcomm/spp 服务模拟串行端口。一个 COM 端口（如果它在 Windows 上）。波特率在这个仿真中并不重要，它总是尽可能快。

您需要将设备配对并连接。你连接的是什么设备？尝试先与 Putty 或某些终端应用程序建立连接。

# api - Security questions for iOS app interaction with API

> ID：15532247
> 
> 赞同：0
> 
> 时间：2013-03-20T18:51:11.390
> 
> 标签：api, security

I am going to develop an iOS app for my web application so I will be working on an API Service that the iOS app will consume.

My question is : *How can I make sure to protect the access to my API ?*

My main concern is just that I don't want someone else to use my API in order to duplicate the content to another app or website.

Thanks in advance,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:11:07.910

不幸的是，这很难做到。简而言之，您不能 100% 保证这样做，因为一旦您的代码在客户手中，您就无法控制它。查看这个 StackOverflow 问题：[在 iPhone 应用程序中使用 REST API 时的安全性](https://stackoverflow.com/questions/15273705/security-when-using-rest-api-in-an-iphone-application/15277589#15277589)

您也可以在这个 StackOverflow 问题中找到一些价值：[https ://stackoverflow.com/questions/15390354/api-key-alternative/15390892#15390892](https://stackoverflow.com/questions/15390354/api-key-alternative/15390892#15390892)

# html - Why is "®" being rendered as "®" without the bounding semicolon

> ID：15532252
> 
> 赞同：50
> 
> 时间：2013-03-20T18:51:19.487
> 
> 标签：html, query-string

I've been running into a problem that was revealed through our Google adwords-driven marketing campaign. One of the standard parameters used is "region". When a user searches and clicks on a sponsored link, Google generates a long URL to track the click and sends a bunch of stuff along in the referrer. We capture this for our records, and we've noticed that the "Region" parameter is coming through incorrectly. What should be

```
http://ravercats.com/meow?foo=bar&region=catnip 
```

is instead coming through as:

```
http://ravercats.com/meow?foo=bar®ion=catnip 
```

I've verified that this occurs in all browsers. It's my understanding that [HTML entity syntax](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_reference_overview) is defined as follows:

```
&VALUE; 
```

where the leading boundary is the ampersand and the closing boundary is the semicolon. Seems straightforward enough. The problem is that this isn't being respected for the ® entity, and it's wreaking all kinds of havoc throughout our system.

Does anyone know why this is occurring? Is it a bug in the DTD? (I'm looking for the current HTML DTD to see if I can make sense of it) I'm trying to figure out what would be common across browsers to make this happen, thus my looking for the DTD.

Here is a proof you can use. Take this code, make an HTML file out of it and render it in a browser:

```
<html>
<a href="http://foo.com/bar?foo=bar&region=US&register=lowpass&reg_test=fail&trademark=correct">http://foo.com/bar?foo=bar&region=US&register=lowpass&reg_test=fail&trademark=correct</a>
</html> 
```

**EDIT: To everyone who's suggesting that I need to escape the entire URL, the example URLs above are exactly that, examples. The real URL is coming directly from Google and I have no control over how it is constructed. These suggestions, while valid, don't answer the question: "Why is this happening".**

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-20T18:58:31.457

尽管*有效*的字符引用总是以分号结尾，但出于向后兼容性的原因，一些不带分号的无效命名字符引用被现代浏览器的 HTML 解析器识别。

要么您知道整个列表是什么，要么您遵循 HTML5 规则，即何时有效而不被转义（例如`&`，当后面跟着一个空格时），或者总是在有疑问时转义。`&``&amp;`

作为参考，无需分号即可识别的***命名字符引用***的完整列表为：

> AElig，AMP，Aacute，Acirc，Agrave，Aring，Atilde，Auml，COPY，Ccedil，ETH，Eacute，Ecirc，Egrave，Euml，GT，Iacute，Icirc，Igrave，Iuml，LT，Ntilde，Oacute，Ocirc，Ograve， Oslash，Otilde，Ouml，QUOT，REG，THORN，Uacute，Ucirc，Ugrave，Uuml，Yacute，aacute，acirc，acute，aelig，agrave，amp，aring，atilde，auml，brvbar，ccedil，cedil，cent，复制，当前，deg，divide，eacute，ecirc，egrave，eth，euml，frac12，frac14，frac34，gt，iacute，icirc，iexcl，igrave，iquest，iuml，laquo，lt，macr，微，middot，nbsp，不， ntilde, oacute, ocirc, ograve, ordf, ordm, oslash, otilde, ouml, para, plusmn, pound, quot, raquo, reg, sect, shy, sup1, sup2, sup3, szlig, thorn, times, uacute, ucirc, ugrave, uml, uuml, yacute, 日元, yuml

但是，应该注意的是，只有在属性值中，如果下一个字符是一个`=`或字母数字的 ASCII 字符，则符合 HTML5 解析器的命名字符引用不会被这样处理。

有关带或不带结束分号的命名字符引用的完整列表，请参见[此处](https://html.spec.whatwg.org/multipage/syntax.html#named-character-references)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-20T22:14:56.813

这是一项非常混乱的业务，并且取决于上下文（文本内容与属性值）。

正式地，根据直到并包括 HTML 4.01 的 HTML 规范，如果下一个字符不是名称字符，则实体引用可能会出现不带分号的结尾。所以 eg`&region=`在语法上是正确的但未定义，因为实体`region`尚未定义。XHTML 要求尾随分号。

不过，浏览器传统上遵循其他规则。由于查询 URL 的通用语法，它们解析例如`href="http://ravercats.com/meow?foo=bar&region=catnip"`，因此`&region`不将其视为实体引用，而仅视为文本数据。作者大多使用这样的结构，即使它们在形式上是不正确的。

与问题似乎在说什么相反，`href="http://ravercats.com/meow?foo=bar&region=catnip"`实际上效果很好。当字符串不在属性值中而是在文本内容中时会出现问题，这种情况相当少见：我们通常不会在文本中编写 URL。在文本中，`&region=`被处理以便`&reg`被识别为实体引用（对于“®”），其余的只是字符数据。这种奇怪的行为正在 HTML5 CR 中正式发布，其中第[8.2.4.69 节标记字符引用](http://www.w3.org/TR/html5/syntax.html#tokenizing-character-references)描述了“双重标准”：

> 如果字符引用作为属性的一部分使用，并且匹配的最后一个字符不是“;” (U+003B) 字符，并且下一个字符是“=” (U+003D) 字符或在 ASCII 数字、大写 ASCII 字母或小写 ASCII 字母范围内，然后，由于历史原因，所有字符在 U+0026 AMPERSAND 字符 (&) 之后匹配的字符必须未使用，并且不返回任何内容。

因此，在*属性 value*中， even`&reg=`不会被视为包含字符引用，更不会被视为包含`&region=`。（但`reg_test=`情况不同，由于下划线字符。）

在*文本内容*中，适用其他规则。该构造`&region=`会导致解析错误（根据 HTML5 CR 规则），但具有明确定义的错误处理：`&reg`被识别为字符引用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-20T18:57:03.540

也许尝试更换你的`&`as `&amp;`？和号也是必须在 HTML 中转义的字符，因为它们被保留用作实体的一部分。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-20T19:32:48.983

***1：***首先以下标记无效（使用[W3C Markup Validation Service](http://validator.w3.org/)进行验证）：

```
<a href="http://foo.com/bar?foo=bar&region=US&register=lowpass&reg_test=fail&trademark=correct"></a> 
```

在上面的示例中，`&`字符应编码为`&amp;`，如下所示：

```
<a href="http://foo.com/bar?foo=bar&amp;region=US&amp;register=lowpass&amp;reg_test=fail&amp;trademark=correct"></a> 
```

***2：***浏览器宽容；他们试图从破碎的 HTML 中找出意义。在您的情况下，所有可能有效的 HTML 实体都将转换为 HTML 实体。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-17T13:41:12.773

这是一个简单的解决方案，它可能不适用于所有情况。

**所以从这里：**

`http://ravercats.com/meow?status=Online&region=Atlantis`

**对此：**

`http://ravercats.com/meow?region=Atlantis&status=Online`

因为`&reg`我们知道触发特殊字符`®`

**警告：**如果您无法控制 URL 查询字符串参数的顺序，则必须将变量名称更改为其他名称。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-20T19:15:43.597

## 逃避你的输出！

简单地说，您需要将 url 格式编码为 html 格式以进行准确表示（理想情况下，您可以使用模板引擎变量转义函数来执行此操作，但除非使用php`htmlspecialchars($url)`或`htmlentities($url)`在 php 中）。

查看您的测试用例，然后在此 jsfiddle 中查看正确编码的 html：http: [//jsfiddle.net/tchalvakspam/Fp3W6/](http://jsfiddle.net/tchalvakspam/Fp3W6/)

这里的非活动代码：

```
<div>
Unescaped:
<br>
<a href="">http://foo.com/bar?foo=bar&region=US&register=lowpass&reg_test=fail&trademark=correct</a>
</div>

<div>
Correctly escaped:
<br>
http://foo.com/bar?foo=bar&amp;region=US&amp;register=lowpass&amp;reg_test=fail&amp;trademark=correct
</div> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-09T04:55:45.993

在我看来，您从 google 收到的不是实际的 URL，而是引用 url（查询字符串）的变量。所以，这就是为什么它在渲染时被解析为注册标记。

我会说，你应该对它进行 url 编码并在处理它时对其进行解码。像任何其他包含特殊实体的变量一样。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-03-20T18:57:20.480

为防止这种情况发生，您应该[对 urls 进行编码](http://www.w3schools.com/html/html_urlencode.asp)，它将 url 中的 & 号等字符替换为 % 和其后面的十六进制数字。

# c++ - C++ Access Violation With Hash Tables and Linked Lists

> ID：15532253
> 
> 赞同：2
> 
> 时间：2013-03-20T18:51:20.030
> 
> 标签：c++, pointers, linked-list, hashtable

So I've been trying to create a class that handles 1000 linked lists, and initially declares pointers to them.

This is the code that deals directly with my issues:

```
struct node
{
    char name[40];
    char numb[12];
    node * next;
};
class hashTable
{
public:
    //Creates a table of 1000 pointers to linked-list nodes
    node * table[1000];

//Functions
void addNode(char name[40], char numb[12])
{
    node * temp;        //Initializes temp node as pointer
    temp = new node;    //Points temp node to a new node

    int hash = h(g(name));  //The hash of the key (name) used to check nodes
    temp = table[hash];     //sets the temporary node to the first node of the list

    while (temp->next != 0)
    {
//... 
```

Right at the while loop is where I get the error "Access violation reading location 0xcccccd00" I'm not sure why it can't access the table member, unless perhaps it is because these values have not been initialized or anything?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:06:41.063

你可能不会做两件事。首先确保您的哈希表已正确初始化为包含全空指针。其次，确保从哈希表中检索到的任何指针在取消引用*之前*都是有效的：

对于第一个问题：

```
hashTable::hashTable() : table()
{
} 
```

另外，你要确保这个东西正确清理

```
hashTable::~hashTable()
{
    for (size_t i=0;i<sizeof(table)/sizeof(table[0]); ++i)
    {
        node *temp = table[i];
        while (temp)
        {
            node *victim = temp;
            temp = temp->next;
            delete victim;
        }
    }
} 
```

对于第二个问题：

```
void addNode(const char *name, const char *numb)
{
    int hash = h(g(name));    //The hash of the key (name) used to check nodes
    node *temp = table[hash]; //sets the temporary node to the first node of the list

    if (temp)
    {
        // preexisting entry. walk that list looking for matching key.
        node **pp = &temp->next;
        while (temp)
        {
            if (0 == strcmp(temp->name, name))
                break;
            pp = &temp->next;
            temp = temp->next;
        }

        // link to last node if not found in list
        if (!temp)
            *pp = new node(name, numb);
    }
    else
    {   // no prior entry. create a new one and store it at table[hash].
        table[hash] = new node(name, numb);
    }
} 
```

注意：上面的代码假设节点类被实现为

```
struct node
{
    char name[40];
    char numb[12];
    node * next;

    node(const char* name_, const char *numb_)
        : next()
    {
        strncpy(name, name_, sizeof(name)/sizeof(name[0])-1);
        name[ sizeof(name)/sizeof(name[0])-1 ] = 0;
        strncpy(numb, numb_, sizeof(numb)/sizeof(numb[0])-1);
        numb[ sizeof(numb)/sizeof(numb[0])-1 ] = 0;
    }
}; 
```

就个人而言，我会使用`std::string`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:56:13.073

如果 hash 的值大于（或等于）1000，则 temp 将指向无效区域。

而且您正在泄漏分配的内存，`new node`因为您正在覆盖 temp 变量。

# xcode - 将对象传回并弹出两个视图控制器

> ID：15532257
> 
> 赞同：0
> 
> 时间：2013-03-20T18:51:32.480
> 
> 标签：xcode

去年年底我开始学习 Objective C 和编程，我正在处理 Core Data，所以我需要一些帮助。

我试图在 VC3 中选择一个对象，并在按下“选择”按钮时将其传递给 VC1。一旦按下，它就会弹回 VC1 并在单元格中显示对象。我不认为我可以使用 segue，因为我想返回而不是前进。另外，我不会回到根视图控制器。

除了这个问题，其他一切都适用于 segue、协议和委托。我尝试过委托，但它们似乎不起作用，可能是因为它们之间有一个视图控制器或其他什么。但是，我对编程很陌生，所以我可能是错的。我将不胜感激一些帮助和指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:16:43.080

执行此操作的现代方式（ios6+）是使用 unwind segue

您可以通过定义一个采用 storyBoardSegue 的单个参数的方法来创建其中一个。

```
- (IBAction)unwindOnSelect:(UIStoryboardSegue *)segue; 
```

将此方法添加到要展开的 viewController 中。

然后，在情节提要场景中，您要从... CTRL 键从“选择”按钮拖动到场景底部栏中的绿色“退出”符号。unwind segue 应该作为一个选项出现在弹出窗口中。选择它。您的按钮会将您展开到该目的地，并且将执行 unwind segue 方法中的代码。

segue 对象包含对源视图控制器和目标视图控制器的引用，因此您可以从一个视图控制器获取数据到另一个视图控制器。

```
 - (void)unwindOnSelect:(UIStoryboardSegue *)segue
{

       self.myObject = segue.sourceViewController.myProperty;

} 
```

你可能会在这里得到一个错误，“没有选择器“myProperty”的已知实例方法。解决这个问题的一种方法是`#include "viewController3"`在 VC1 的 .h 或 .m 文件的顶部。你可能还必须进行类型转换：

```
 self.myObject = [(ViewController1*)segue.sourceViewController myProperty]; 
```

另一种方法是有点间接：

```
if ([segue.sourceViewController respondsToSelector:@selector(myProperty)]) {
    self.myObject = [segue.sourceViewController performSelector:@selector(myProperty)];
     } 
```

这样做的好处是您不必这样做`#include "viewController3"`，因此您可以更加解耦，更加客观化。

# css - Blogger - 更改评论文本区域的样式

> ID：15532259
> 
> 赞同：0
> 
> 时间：2013-03-20T18:51:46.923
> 
> 标签：css, html, iframe, comments, blogger

我很可能知道答案，但也许我错了，所以让我们试试。

我想从 Blogger（blogspot - Google 博客系统）更改评论表单的外观。可悲的是，这个可怕的小表单嵌入在 iframe 中，所以我的 CSS 样式不起作用。

当然，玩弄 jquery 也是没用的。

我知道，iframe 并不是用来操纵的，但对于博主来说，它也许是可能的，不知何故……在一个遥远的世界里。;(

有没有我想的办法或者只是不可能。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T10:50:56.897

您是否尝试过为您的评论 iframe 设置样式？您不能在 iframe 中设置内容的样式，但可以设置 iframe 的样式。

下面是一个示例，在关闭 <head> 标记之前添加它。

```
<style type='text/css'>
#comment-editor {
background: #F9F9F9 url(http://2.bp.blogspot.com/-Bdsls_ui_vY/UX-d4NVcHiI/AAAAAAAAB3M/IIzD9w00lDs/s1600/form-gradient.gif) repeat-x scroll -1px -2px;
border: 1px solid rgb(221, 221, 221);
border-radius: 6px 6px 6px 6px;
box-shadow: 5px 5px 5px rgb(204, 204, 204);
padding: 5px;
width: 560px;
height: 224px !important;
}
</style> 
```

所以它看起来像这样！

[生成的评论表单的屏幕截图！](http://2.bp.blogspot.com/-ezlQkSrrja4/UX-gj97x52I/AAAAAAAAB3s/DzcDGCCigHg/s1600/blogger+comment.PNG)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:02:49.393

我从来不需要在 Blogger 中设置评论部分的样式，所以在这方面我无法为您提供帮助。

[但是您可以尝试用IntenseDebate](http://www.intensedebate.com/)等第三方评论系统替换它。

它支持自定义 CSS 和指向外部样式表的 URL，并且还具有许多其他有用的功能。

如果您决定尝试它，请记住在进行切换之前备份模板，以防您想要恢复。

# css - CSS精灵或图像映射？

> ID：15532260
> 
> 赞同：0
> 
> 时间：2013-03-20T18:51:52.763
> 
> 标签：css, html, imagemap, sprite

首先，我网站的链接是

[http://graph-art.matc.edu/harrisd5/vicom123/assign2/index.html](http://graph-art.matc.edu/harrisd5/vicom123/assign2/index.html)

我是 web 开发的新学生......请帮我？？？

我的图像下方的导航我想在鼠标悬停在它上面时将颜色关于/价格/位置更改为服务和图库框的颜色.....反之亦然关于/价格/位置。

我还想在单击我认为处于活动状态时更改所有这些颜色的颜色？？？

我想知道我怎么能做到这一点我使用css精灵或图像映射？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:36:29.090

图像地图，如果你想要一个快速的解决方案。但是很难实现对每个元素的控制（以及在“悬停”上更改颜色）等。

CSS Sprites 是一个有点高级的 CSS 编程。此外，如果您有一个非常高流量的网站（以节省带宽等），则仅使用一个才有意义，否则它与不使用一样好。了解坐标几何在这里是一个优势:)

希望这可以帮助。

# c# - Ajax.ActionLink 给出 404 not found 错误

> ID：15532261
> 
> 赞同：0
> 
> 时间：2013-03-20T18:51:59.187
> 
> 标签：c#, ajax, asp.net-mvc-4, http-status-code-404

我有一个局部视图，`Ajax.ActionLink`单击该视图时应将视图（目标 DIV）替换为另一个允许用户上传图像的局部视图。我在页面上有几个有效的，我似乎无法弄清楚为什么我一直为这个特定的一个 404。

这是我所拥有的：

MyProfile.cshtml 包含所有部分（tenant-reference-photos 是更新目标 DIV）：

```
<div class="row-fluid">
    <div class="span6 well-border" id="tenant-reference-photos">
        @Html.Partial("~/Views/Tenants/_TenantReferencePhotosPartial.cshtml", Model)
    </div>
    <div class="span6 well-border" id="tenant-viewings">
        @Html.Partial("~/Views/Tenants/_TenantViewingsPartial.cshtml", Model)
    </div>
</div> 
```

_TenantReferencePhotosPartial.cshtml（ActionLink 在此处给出 404）：

```
<div class="row-fluid">
@if (Model.ReferencePhotos == null)
{
    <h3>You haven't uploaded any references! 
    @Ajax.ActionLink("Upload now?", // on click 404 returned in developer tools in Chrome
        "UploadReference",
        new AjaxOptions
        {
            UpdateTargetId = "tenant-reference-photos",
            InsertionMode = InsertionMode.Replace,
            HttpMethod = "GET",
            LoadingElementId = "ajax-loader"
        })
    </h3>
}
</div> 
```

下面的代码返回上述部分：

```
[HttpGet]
public ActionResult TenantReferencePhotos()
{
    var currentTenant = tenantRepository.GetLoggedInTenant();
    return PartialView("_TenantReferencePhotosPartial", currentTenant.ReferencePhotos.ToList());
} 
```

以下`ActionResult`是`Ajax.ActionLink`404 错误中未调用的内容：

```
[HttpPost]
public ActionResult UploadReference(HttpPostedFileBase file, Tenant tenant)
{
    if (file != null)
    {
        if (file.ContentLength > 10240)
        {
            ModelState.AddModelError("file", "The size of the file should not exceed 10 KB");
            return View();
        }

        var supportedTypes = new[] { "jpg", "jpeg", "png", "JPG", "JPEG", "PNG" };
        var fileExt = System.IO.Path.GetExtension(file.FileName).Substring(1);

        if (!supportedTypes.Contains(fileExt))
        {
            ModelState.AddModelError("photo", "Invalid type. Only the following types (jpg, jpeg, png) are supported.");
            return View();
        }

        using (var db = new LetLordContext())
        {
            var reference = db.Image.Create<ReferencePhoto>();

            // Convert HttpPostedFileBase to byte array
            MemoryStream target = new MemoryStream();
            file.InputStream.CopyTo(target);
            byte[] photo = target.ToArray();

            reference.File = photo;
            reference.Format = fileExt;
            reference.DateUploaded = DateTime.Now.Date;
            reference.Description = "";
            reference.Name = "";

            db.Image.Add(reference);
            db.SaveChanges();

            return PartialView("_TenantReferencePhotosPartial", file);
        }
    }
    else
    {
        return View();
    }
} 
```

为了完整起见，这是可以上传图像的部分视图：

```
<div>
@using (Ajax.BeginForm("UploadReference", "Tenants", FormMethod.Post,
   new AjaxOptions
   {
       InsertionMode = InsertionMode.Replace,
       HttpMethod = "POST",
       UpdateTargetId = "tenant-reference-photos"
   }))
{
    @Html.ValidationSummary(true)
    @Html.AntiForgeryToken()
    <div>
        Select a file:
        <input type="file" name="file" />
        <input type="submit" value="UploadReference" />
    </div>
}
</div> 
```

引用了 MyProfile.cshtml 中的所有脚本。即使在 Layout.cshtml 和/或 MyProfile.cshmtml 中引用 unobtrusive-ajax.js 是否需要作为脚本包含在所有部分视图中？

谁能发现我为什么会收到上述错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:00:38.917

在您的代码`UploadReference`中装饰有`HttpPost`属性，因此只有在您进行 POST 时才能访问它。在您看来，您已配置`HttpMethod`为 GET。当您将其更改为`POST`它应该可以工作：

```
@Ajax.ActionLink("Upload now?",
    "UploadReference",
    new AjaxOptions
    {
        UpdateTargetId = "tenant-reference-photos",
        InsertionMode = InsertionMode.Replace,
        HttpMethod = "POST",
        LoadingElementId = "ajax-loader"
    }) 
```

# java - 如何使用 Apache CXF 实现推送式 RESTful Web 服务？

> ID：15532265
> 
> 赞同：1
> 
> 时间：2013-03-20T18:52:07.837
> 
> 标签：java, asynchronous, cxf, push, servlet-3.0

我们已经在我们的项目中使用了 Apache CXF，我想知道是否可以在 CXF 2.7 中实现推送 RESTful 服务（Servlet 3.0 规范中引入的功能）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T19:01:24.700

是的.....下载cxf-3.0.0框架zip（这里是[链接](http://cxf.apache.org/download.html)）。解压后，您可以找到示例目录（示例 cxf 项目的数量供我们参考）。在我们的例子中，选择 jax_rs/websocket 目录。您可以找到示例推送客户 Maven 项目。我如下修改了现有的 pom.xml 并导入到 eclipse 并完美运行。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.cxf.sample</groupId>
    <artifactId>jax_rs_websocket</artifactId>
    <version>3.0.0</version>
    <name>JAX-RS WebSocket Demo</name>
    <description>JAX-RS WebSocket Demo</description>
    <properties>
        <cxf.version>3.0.0</cxf.version>
        <cxf.ahc.version>1.8.1</cxf.ahc.version>
        <cxf.jetty.version>8.1.14.v20131031</cxf.jetty.version>
        <cxf.netty3.version>3.8.0.Final</cxf.netty3.version>
    </properties>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <profiles>
        <profile>
            <id>server</id>
            <build>
                <defaultGoal>test</defaultGoal>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>test</phase>
                                <goals>
                                    <goal>java</goal>
                                </goals>
                                <configuration>
                                    <mainClass>demo.jaxrs.server.Server</mainClass>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>client</id>
            <build>
                <defaultGoal>test</defaultGoal>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>test</phase>
                                <goals>
                                    <goal>java</goal>
                                </goals>
                                <configuration>
                                    <mainClass>demo.jaxrs.client.Client</mainClass>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
    <dependencies>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http</artifactId>
            <version>3.0.0</version>
        </dependency>
        <!-- This dependency is needed if you're using the Jetty container -->
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-websocket</artifactId>
            <version>3.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-frontend-jaxrs</artifactId>
            <version>3.0.0</version>
        </dependency>
        <dependency>
            <groupId>javax.ws.rs</groupId>
            <artifactId>javax.ws.rs-api</artifactId>
            <version>2.0</version>
        </dependency>
         <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-websocket</artifactId>
            <version>${cxf.jetty.version}</version>
        </dependency>
        <dependency>
            <groupId>com.ning</groupId>
            <artifactId>async-http-client</artifactId>
            <version>${cxf.ahc.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>io.netty</groupId>
                    <artifactId>netty</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>io.netty</groupId>
            <artifactId>netty</artifactId>
            <version>${cxf.netty3.version}</version>
        </dependency>
        <!--  JettyHttpDestination is referring to org.springframework.util.ClassUtils -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>4.0.3.RELEASE</version>
        </dependency>

    </dependencies>
</project> 
```

# jquery - 如何定位数据角色包含

> ID：15532272
> 
> 赞同：2
> 
> 时间：2013-03-20T18:52:38.520
> 
> 标签：jquery, jquery-mobile

我有三页。每个都有一个`data-role="content"`属性。

如何以编程方式定位页面的某些部分？（例如`data-role = "firstPage"`--> 仅来自该页面的页脚或内容属性）。

我正在使用 jQuery Mobile 1.3.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:55:09.030

简单的：

```
$('[data-role="firstPage"]') 
```

jQuery 参考：

> ## [属性等于选择器 [name="value"]](http://api.jquery.com/attribute-equals-selector/)
> 
> 选择具有与某个值完全相等的指定属性的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:56:35.017

最好给每个部分一个唯一的 id，然后使用 jQuery 选择器来定位它们。

您的 HTML：

```
<div id="home-page"></div> 
```

你的 JS：

```
$("#home-page").html('Test!'); 
```

你的结果：

```
<div id="home-page">Test!</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T20:48:07.853

每个页面都应该有一个 ID。

HTML

```
<div data-role="page id="page1"></div> 
```

带有 ID 的第 1 页`page1`

```
$('[data-role="page"]#page1') 
```

带身份证的第 2 页`page2`

```
$('[data-role="page"]#page2') 
```

带身份证的第 3 页`page3`

```
$('[data-role="page"]#page3') 
```

我在[这里包括了一些例子](http://fiddle.jshell.net/Palestinian/a6vQn/)。

# xsd - 具有特定子元素的 XSD 必需元素（具有不同类型的多个定义）

> ID：15532274
> 
> 赞同：0
> 
> 时间：2013-03-20T18:52:46.567
> 
> 标签：xsd

所有，我有一个我无法控制的 XML 文档，我需要创建一个 xsd 来验证。XML 文档有多种事务类型，其中一些需要特定次数，而另一些则不需要。父元素只是 <transaction>，子元素可以是 <ControlTransaction> 或 <RetailTransaction>。问题是我需要一个 <transaction> 与一个 <ControlTransaction> 存在，该元素的 <ReasonCode> 元素的值为“Register Open”，另一个元素的值为“Register Close”，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<RegisterDay xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    xmlns:cp="urn:register"> 

<Transaction>
    <SequenceNumber>1</SequenceNumber>
    <ControlTransaction>
        <ReasonCode>Register Open</ReasonCode>
    </ControlTransaction>
</Transaction>

<Transaction>
    <SequenceNumber>2</SequenceNumber>
    <RetailTransaction>
        ...stuff..
        <Total>9.99</Total>
    </RetailTransaction>
</Transaction>

<Transaction>
    <SequenceNumber>3</SequenceNumber>
    <ControlTransaction>
        <ReasonCode>Register Close</ReasonCode>
    </ControlTransaction>
</Transaction>

</RegisterDay> 
```

我最好的尝试是在我的模式中使用类型，但是得到“具有相同名称和相同范围的元素必须具有相同的类型”。我不知道如何解决这个问题。

```
<?xml version="1.0"?>
<xs:schema 
        xmlns:cp="urn:register" 
        xmlns:xs="http://www.w3.org/2001/XMLSchema" 
        attributeFormDefault="unqualified" 
        elementFormDefault="qualified">

    <xs:element name="RegisterDay">     
        <xs:complexType>
            <xs:sequence>
                <xs:element minOccurs="1" maxOccurs="1" name="Transaction" type="TransactionRegisterOpen_type"/>
                <xs:element minOccurs="1" maxOccurs="unbounded" name="Transaction" type="RetailTransaction_type"/>
                <xs:element minOccurs="1" maxOccurs="1" name="Transaction" type="TransactionRegisterClose_type"/>

            </xs:sequence>
        </xs:complexType>
    </xs:element>       

    <xs:simpleType name="RegisterOpen_type">
        <xs:restriction base="xs:string">
            <xs:pattern value="Register Open"/>
        </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="RegisterClose_type">
        <xs:restriction base="xs:string">
            <xs:pattern value="Register Close"/>
        </xs:restriction>
    </xs:simpleType>

    <xs:complexType name="TransactionRegisterOpen_type">
        <xs:sequence>
            <xs:element name="SequenceNumber" type="xs:unsignedShort"/>
            <xs:element name="ControlTransaction">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element minOccurs="1" name="ReasonCode" type="RegisterOpen_type"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>   

    <xs:complexType name="TransactionRegisterClose_type">
        <xs:sequence>
            <xs:element name="SequenceNumber" type="xs:unsignedShort"/>
            <xs:element name="ControlTransaction">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element minOccurs="1" name="ReasonCode" type="RegisterClose_type"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>   

    <xs:complexType name="RetailTransaction_type">
        <xs:sequence>
            <xs:element name="SequenceNumber" type="xs:unsignedShort"/>
            <xs:element name="ControlTransaction">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element minOccurs="1" name="Total" type="xs:decimal"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>           

</xs:schema> 
```

有没有人遇到过这个和/或有任何建议？我很难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:58:06.257

也许用枚举？

```
<?xml version="1.0"?>
<xs:schema 
    xmlns:cp="urn:register" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    attributeFormDefault="unqualified" 
    elementFormDefault="qualified"
    targetNamespace="urn:register">

<xs:element name="RegisterDay">     
    <xs:complexType>
        <xs:sequence>
            <xs:element 
              minOccurs="1" 
              maxOccurs="unbounded" 
              name="Transaction" 
              type="cp:TypeTransaction"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>       

<xs:complexType name="TypeTransaction">
    <xs:sequence>
        <xs:element name="SequenceNumber" type="xs:unsignedShort"/>
        <xs:choice>
          <xs:element name="RetailTransaction"/>
          <xs:element name="ControlTransaction">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="ReasonCode">
                  <xs:simpleType>
                    <xs:restriction base="xs:string">
                      <xs:enumeration value="Register Open"/> 
                      <xs:enumeration value="Register Close"/> 
                    </xs:restriction>
                  </xs:simpleType>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:choice>  
    </xs:sequence>
</xs:complexType>           

</xs:schema> 
```

# opencv - opencv中HOG描述符的SVM

> ID：15532276
> 
> 赞同：3
> 
> 时间：2013-03-20T18:52:49.890
> 
> 标签：opencv, classification, svm

我正在尝试对足球场上的码数进行分类。我能够很好地检测到它们（不同的方法）。我在十位数字'1,2,3,4,5'周围画了一个最小的边界框。我的目标是对它们进行分类。

我一直在尝试对从训练集中提取的 hog 特征训练 SVM 分类器。我的训练数字的一小部分在这里：[http ://ssadanand.imgur.com/all/](http://ssadanand.imgur.com/all/)

训练时，我可视化我的猪描述符，它们看起来是正确的。我使用 64X128 训练窗口和 OPencv 的 HOGDescriptor 使用的其他默认参数。

一旦我训练了我的图像（每类 50 个样本，5 个类），我就有一个 250X3780 的训练向量和 1X250 的标签向量，其中包含我提供给 CvSVM 对象的类标签值。这是我有问题的地方。

我在使用 CvSVM 时尝试使用默认的 CvSVMParams()。在训练集本身上测试时表现糟糕！

我尝试自定义我的 CvSVPARAMS 这样做：

```
CvSVMParams params = CvSVMParams();
params.svm_type = CvSVM::EPS_SVR;
params.kernel_type = CvSVM::POLY;
params.C = 1; params.p = 0.5; params.degree = 1; 
```

以及这些参数的不同变化，即使我在训练集上进行测试，我的 SVM 分类器也非常糟糕！

有人可以帮我为这个 5 类分类器参数化我的 SVM 吗？我不明白我必须使用哪个内核和什么 svm 类型来解决这个问题。另外，我到底应该如何为我的 svm 找出 c、p、degree 的值？

我会假设这是一个非常简单的分类问题，因为我所有的对象都很好地限制在一个盒子里，分辨率相当好，并且类，即：数字 1、2、3、4、5 在外观上是相当独特的。我不明白为什么我的 SVM 表现如此糟糕。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:32:51.390

先验且没有实验，很难给你一些好的参数，但我可以给你一些想法。

首先，您想为多类分类器建模，但您使用的是回归算法，并不是说您不能这样做，但如果您先从 C-SVM 开始，通常会更容易。

其次，我建议使用 RBF 而不是多项式内核。Poly 很难做到正确，通常 RBF 开箱即用会做得更好。

第三，我会使用几个 C 值，不要害羞并尝试更大的 C（例如 100），这将迫使算法选择更多的 SV。它可能导致过度拟合，但如果你甚至不能让算法学习训练集，那不是你的直接问题。

~~第四，我会先减少图像的维度，然后如果需要，当您有更稳定的模型时，您可以再次尝试使用该维度。~~

我真的建议您阅读非常容易理解的 LibSVM 指南[http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf](http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf)

希望能帮助到你！

编辑：

我忘了提，为 SVM 选择参数的一个好方法是执行交叉验证：[http://en.wikipedia.org/wiki/Cross-validation_(statistics)](http://en.wikipedia.org/wiki/Cross-validation_(statistics))

[http://www.autolab.org/tutorials/overfit10.pdf](http://www.autonlab.org/tutorials/overfit10.pdf)

[http://www.youtube.com/watch?v=hihuMBCuSlU](http://www.youtube.com/watch?v=hihuMBCuSlU)

[http://www.youtube.com/watch?v=m5StqDv-YlM](http://www.youtube.com/watch?v=m5StqDv-YlM)

编辑2：

我知道这很愚蠢，因为它在问题的标题上，但是直到您在评论中指出之前，我才意识到您使用的是 HOG 描述符。

# php - 发送一个表格并在另一个php中打印相同的表格

> ID：15532277
> 
> 赞同：0
> 
> 时间：2013-03-20T18:52:55.473
> 
> 标签：php, html, forms

如何通过单击提交按钮制作相同的表单，您通过 POST 方法将相同的表单发送到另一个 php 表单，其中输入类型文本显示为已填充，并且选择将使用与第一个表单相同的选项进行选择。我希望能理解我的解释。

HTML

```
<form id="formPOST" action="pr01post.php" method="POST" >
        Nombre<input type="text" id="txtNombre" name="txtNombre"/><br>
        Edad<input type="text" id="txtEdad" name="txtEdad"/><br>
        Provincia<select id="selProv" name="selProv">
                    <option value='0'>Seleccione una provincia</option>
                    <option value='1'>Álava</option>
                    <option value='2'>Albacete</option>
                    <option value='3'>Alicante/Alacant</option> 
                 </select><br>
        Fec. Nac.:<input type="text" id="txtFecNac" name="txtFecNac"/><br>
        Sexo: Hombre<input type="radio" name="radSex" value="Varón" checked>Mujer<input type="radio" name="radSex" value="Mujer">
        <input type="submit" name="subEnv" />          
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:10:31.627

使用 jQuery 的力量，卢克！

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#selProv option[value="<?=$_POST['selProv'];?>"]').attr('selected','selected');
    });
</script> 
```

并确保您在页面上包含了实际的 jquery 库。可以这样做：

```
<script src="http://code.jquery.com/jquery-1.9.1.js" ></script> 
```

# jquery - jQuery fadeIn & fadeOut onload：有更好的方法吗？

> ID：15532278
> 
> 赞同：1
> 
> 时间：2013-03-20T18:53:01.313
> 
> 标签：jquery, fadein, fadeout

```
$(".link").click(function (e) {
     e.preventDefault();      
    var $urlToLoad = $(this).attr('href');  
    $('#result').load($urlToLoad, function(data){

        $("#fade").fadeOut('slow'); //added to show fade effect on second click
        $("#fade").fadeIn('slow');

    });      
}); 
```

我基本上在 .click 上加载了两个带有淡入淡出效果的外部页面。为了让 div#result 在第二次点击/加载时显示渐变效果，我添加了 [$("#fade").fadeOut('slow');]。

但是，这会导致加载的页面首先显示 & 淡出 & in。我尝试更改 [$("#fade").fadeOut('slow');] 的顺序，但结果相同。

我确信有一种方法可以正确地做到这一点，但我对 jQuery 的理解还不够，无法达到预期的效果。

任何人都可以帮忙吗？有什么建议吗？应该怎么改写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:57:54.723

可能你想要一个淡入淡出：

```
$("#fade").fadeToggle('slow'); 
```

或者

```
$("#fade").fadeOut('slow').fadeIn('slow'); 
```

或者这可能很有用：

```
$("#fade").hide().fadeIn('slow'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:00:48.197

怎么用...

```
$("#fade").hide().fadeIn('slow'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:58:55.410

我真的在这里在黑暗中拍摄，因为你的问题有点不清楚，但似乎一个简单的 fadeToggle 实现可以解决这个问题。

```
$(".link").click(function (e) {
    e.preventDefault();      
    var $urlToLoad = $(this).attr('href');  
    $('#result').load($urlToLoad, function(data){
        $("#fade").fadeToggle('slow');
    });      
}); 
```

我假设您希望当您单击链接时，它应该调用服务器，获取数据，用数据填充匹配的元素，然后将该元素淡入视图。然后再次单击时，您希望它使元素淡出视图。如果是这种情况，上面的代码将起作用，但要确保 #result div 不会从一开始就显示出来，您需要将其设置为 display:none 在 css 中。fadetoggle 会处理剩下的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T18:59:10.493

我的理解是你想`#fade` 淡入淡出，当你加载内容时淡入淡出，对吧？

```
$(".link").click(function (e) {
    e.preventDefault();
    var $urlToLoad = $(this).attr('href');

    if ($("#fade").length) {
        $("#fade").fadeOut('slow', function () {
            loadContent($urlToLoad)
        });
    } else {
        loadContent($urlToLoad)
    }

});

function loadContent(url) {
    $('#result').load(url, function (data) {
        $("#fade").fadeIn('slow');
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-18T10:23:08.053

在文档加载时触发该功能，并让它无休止地运行。

[http://jsfiddle.net/WvpVK/](http://jsfiddle.net/WvpVK/)

所做的是，

形成步骤：

1-在每个触发器上更改 url，
2-在特定时间计数后触发更改
3-再次更改下一个 img 的 url。

```
/*---------------------------------------------------------------------------*/
<br><Br>
imgcnt=1;

function chngimg(){

if(imgcnt<5){

    imgcnt = imgcnt + 1;
        /*newvar = chngimg(imgcnt);*/
        //alert(newvar);

       // alert(imgcnt);

newvar = 'http://www.buzzle.com/images/cliparts/numbers/'+imgcnt+'.png';
    $( "#transit" ).fadeOut(1500,
        function(){ $( "#transit" ).attr({  src: newvar,  title: "Banner", alt: "Halloween"});$( "#transit" ).fadeIn(1500);
                });
    }
    else{imgcnt=0;}
}
$(document).ready(function(){

/**increament value, after 3-4 sec
setInterval, call function to increament,
send increased value to string and change image
after it reaches the last img, 
reset the counter.**/

setInterval(function() {
    chngimg();
},4000);

});

/*---------------------------------------------------------------------------*/
<br><Br> 
```

那是我的形象

![那是我的形象](../Images/2239a02fb02d51291bc70cf5c2c2bf06.png)

**类似的事情可以在数组的帮助下完成。

# geometry - 通过极坐标确定球体顶点并进行渲染

> ID：15532280
> 
> 赞同：1
> 
> 时间：2013-03-20T18:53:05.317
> 
> 标签：geometry, rendering, opengl-es-2.0, polar-coordinates

我正在 Android 设备上使用 OpenGL ES 2.0。

我正在尝试让一个球体启动并运行和绘图。Currentley，我几乎有一个球体，但显然它做得非常非常错误。

在我的应用程序中，我保存了一个 Vector3 的列表，在此过程中我将其转换为 ByteBuffer，然后传递给 OpenGL。我知道我的代码没问题，因为我有一个立方体和四面体绘图 nicley。我更改的两个部分是： 确定顶点 绘制顶点。

这是有问题的代码片段。我究竟做错了什么？确定极坐标：

```
private void ConstructPositionVertices()
{
    for (float latitutde = 0.0f; latitutde < (float)(Math.PI * 2.0f); latitutde += 0.1f)
    {
        for (float longitude = 0.0f; longitude < (float)(2.0f * Math.PI); longitude += 0.1f)
        {
            mPositionVertices.add(ConvertFromSphericalToCartesian(1.0f, latitutde, longitude));
        }
    }
} 
```

从极坐标转换为笛卡尔坐标：

```
public static Vector3 ConvertFromSphericalToCartesian(float inLength, float inPhi, float inTheta)
{
    float x = inLength * (float)(Math.sin(inPhi) * Math.cos(inTheta));
    float y = inLength * (float)(Math.sin(inPhi) * Math.sin(inTheta));
    float z = inLength * (float)Math.cos(inTheta);
    Vector3 convertedVector = new Vector3(x, y, z);
    return convertedVector;
} 
```

画圆：

```
inGL.glDrawArrays(GL10.GL_TRIANGLES, 0, numVertices); 
```

显然我省略了一些代码，但我很肯定我的错误在于这些片段的某个地方。我对这些点做的只是将它们传递给 OpenGL，然后调用 Triangles，它应该为我连接这些点.. 对吗？

编辑：图片可能很好！

![SphereFail](../Images/8fbbecac2a81028ce7e85d44f6f7afb2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:13:26.053

您的 z 必须使用 phi 计算。`float z = inLength * (float)Math.cos(inPhi);`

另外，生成的点不是三角形，所以最好使用 GL_LINE_STRIP

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-30T02:46:47.483

在 Polar sphere 上使用三角带就像成对绘制点一样简单，例如：

```
const float GL_PI = 3.141592f;

GLfloat x, y, z, alpha, beta; // Storage for coordinates and angles        
GLfloat radius = 60.0f;
const int gradation = 20;

for (alpha = 0.0; alpha < GL_PI; alpha += GL_PI/gradation)
{        
    glBegin(GL_TRIANGLE_STRIP);
    for (beta = 0.0; beta < 2.01*GL_PI; beta += GL_PI/gradation)            
    {            
        x = radius*cos(beta)*sin(alpha);
        y = radius*sin(beta)*sin(alpha);
        z = radius*cos(alpha);
        glVertex3f(x, y, z);
        x = radius*cos(beta)*sin(alpha + GL_PI/gradation);
        y = radius*sin(beta)*sin(alpha + GL_PI/gradation);
        z = radius*cos(alpha + GL_PI/gradation);            
        glVertex3f(x, y, z);            
    }        
    glEnd();
} 
```

输入的第一个点如下公式，第二个点偏移一个α角（从下一个平行）。

# .net - Savi Echo Point 的无线 Actice-RFID 标签

> ID：15532293
> 
> 赞同：-2
> 
> 时间：2013-03-20T18:53:37.227
> 
> 标签：.net, compact-framework, wireless, rfid, motorola-emdk

我有一个在移动扫描仪设备上运行的 Windows 窗体应用程序（紧凑框架 3.5）。扫描仪上有一张 RFID 重读卡（还不确定是哪一张），我需要通过 Savis-EchoPoint（ST-656 和 ST-654）连接到 RFID 标签，以无线方式读/写标签。有人熟悉这个问题吗？

1）我想确保那些RFID标签可以无线连接？2) 任何人都知道哪些 RFID 阅读器可以通过无线连接到这个有源标签，这些阅读器是否提供 .Net 库来连接它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T08:19:27.077

摩托罗拉阅读器将与您尝试读/写的标签类型不兼容。在处理 RFID 标签时，您需要考虑两个主要因素：频率（也是调制）和通信协议。频率：我使用过这两种设备，ST-654 使用 433MHz，摩托罗拉提供 902-928MHz（美国）或 868MHz（欧盟）的 RFID，因此使用不同频率的设备之间的通信将永远无法工作。Savi 符合 ISO-18000-7 (433 MHz)，摩托罗拉符合 ISO-18000-6c。通信协议：由于 SAVI 标签使用 433MHZ，该协议不像 EPC Gen2 那样高度标准化，所以即使你找到一个相同频率的阅读器，你也需要找到一个使用相同协议的阅读器。当您的两个设备都使用 ISO18000-7 时，不能保证标签中的所有可用功能都可用，但只能保证符合标准的那些可用。此外，SAVI 标签使用两种类型的频率，因此可能很难找到符合所有这些规格的设备（SAVI 除外）。现在，我使用过 Savi ST-654（这是一种特殊的标签，主要用于 DoD 物流跟踪），并且可以选择使用 USB 编程电缆。如果 Savi 为其产品提供 SDK 或 API，则创建应用程序的最佳选择是使用 Savi 产品和技术建议。SAVI 标签使用两种类型的频率，因此可能很难找到符合所有这些规格的设备（SAVI 除外）。现在，我使用过 Savi ST-654（这是一种特殊的标签，主要用于 DoD 物流跟踪），并且可以选择使用 USB 编程电缆。如果 Savi 为其产品提供 SDK 或 API，则创建应用程序的最佳选择是使用 Savi 产品和技术建议。SAVI 标签使用两种类型的频率，因此可能很难找到符合所有这些规格的设备（SAVI 除外）。现在，我使用过 Savi ST-654（这是一种特殊的标签，主要用于 DoD 物流跟踪），并且可以选择使用 USB 编程电缆。如果 Savi 为其产品提供 SDK 或 API，则创建应用程序的最佳选择是使用 Savi 产品和技术建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:07:47.820

我使用了 MC9190Z 设备，它设计用于 EPC Gen 标签。您列出的标签看起来像是用于存储集装箱清单的大容量活动标签。这些不是一回事。

# java - 无法在 Servlet 中通过 SSL 发送 java 邮件

> ID：15532295
> 
> 赞同：0
> 
> 时间：2013-03-20T18:53:41.143
> 
> 标签：java, jsp, servlets, smtp, jakarta-mail

我正在编写一个简单的 java 程序来使用发送邮件到特定的电子邮件 ID`java mail using SSL`

以下是我的代码

```
 public static String sendMail(String to)
        {
             String status_message = null;

             try 
             {
                   Properties props = new Properties();
                   props.put("mail.smtp.host", "smtp.gmail.com");
                   props.put("mail.smtp.socketFactory.port", "465");
                   props.put("mail.smtp.socketFactory.class",
                        "javax.net.ssl.SSLSocketFactory");
                   props.put("mail.smtp.auth", "true");
                   props.put("mail.smtp.port", "465");

                   Session session = Session.getDefaultInstance(props,
                   new javax.mail.Authenticator() 
                   {
                       @Override
                       protected PasswordAuthentication getPasswordAuthentication() 
                       {
                             return new PasswordAuthentication("sender@gmail.com","password");//change accordingly
                       }
                  });

               //compose message
                MimeMessage message = new MimeMessage(session);
                message.setFrom(new InternetAddress("sender@gmail.com"));//change accordingly
                message.addRecipient(Message.RecipientType.TO,new InternetAddress(to));
                message.setSubject("Email Subject");
                message.setText("Text Content included in inside Email"); 

                //send message
                Transport.send(message);

                status_message = "success";
    } 
    catch (MessagingException ex) 
    {
                status_message = ex.getMessage();
    } 

} 
```

当我在***特定的主线程***中运行此代码时。它***成功了***。

但是当我包含它时，***这同样不起作用***`inside a function called within a servlet`

当我读取 status_message 值时。它正在显示`smtp`。

谁能帮我找出问题所在。我错过了什么吗？我想通过 jsp servlet 发送邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:03:39.303

您已经犯了几个[常见的 JavaMail 错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)。纠正它们，看看是否能解决您的问题。

# python - 我可以使用 msilib 或其他 Python 库从 .msi 文件中提取一个文件吗？

> ID：15532296
> 
> 赞同：0
> 
> 时间：2013-03-20T18:53:51.273
> 
> 标签：python, wix, windows-installer

我真正想做的是确定 MSI 中的特定文件是否存在并包含特定字符串。

我目前的想法是运行：

```
 db = msilib.OpenDatabase('c:\Temp\myfile.msi',1)
 query = "select * from File"
 view = db.OpenView(query)
 view.Execute(None)
 cur_record = view.Fetch()     # do this until I get the record I want
 print cur_record.GetString(3) # do stuff with this value 
```

然后如果它在那里，使用提取所有文件

```
msiexec /a c:\Temp\myfile.msi /qn TARGETDIR=c:\foo 
```

并使用任何解析器来查看我的字符串是否存在。但我希望存在一种不那么笨重的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T01:05:19.617

请注意，正如文档[`msilib`](http://docs.python.org/2/library/msilib.html)所说，“当前未实现对读取 .cab 文件的支持”。和。更一般地说，该库旨在构建 .msi 文件，而不是读取它们。stdlib 中没有其他东西可以满足您的需求。

所以，有几种可能：

1.  查找并安装另一个库，例如[`pycabinet`](http://code.google.com/p/pycabinet/). 我对这个特定的图书馆一无所知。这只是我得到的第一个搜索结果；你可能想自己搜索。但它声称`zipfile`为 CAB 文件提供了一个类似的 API，这听起来正是你所缺少的部分。
2.  使用`win32com`（如果你有`pywin32`）或`ctypes`（如果你是受虐狂）与底层的 COM 接口和/或经典的 Cabinet API（我认为现在已弃用，但仍然有效）对话。
3.  使用 IronPython 而不是 CPython，因此您可以使用更简单的 .NET 接口。

因为我这里没有 Windows 盒子，所以我无法对此进行测试，但这里是 Christopher Painter 的 .NET 解决方案的草图，它是用 IronPython 而不是 C# 编写的：

```
import clr
clr.AddReference('Microsoft.Deployment.WindowsInstaller')
clr.AddReference('Microsoft.Deployment.WindowsInstaller.Package')
from Microsoft.Deployment.WindowsInstaller import *
from Microsoft.Deployment.WindowsInstaller.Package import *

def FindAndExtractFiles(packagePath, longFileName):
    with InstallPackage(packagePath, DatabaseOpenMode.ReadOnly) as installPackage:
        if installPackage.FindFiles(longFileName).Count() > 0:
            installPackage.ExtractFiles() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:22:58.037

意识到在使用 Python 时，您必须处理 Windows Installer (COM) 自动化接口。这意味着您必须自己完成所有数据库连接、查询和处理。

如果您可以迁移到 C#（或者说 PowerShell），您可以利用 Windows Installer XML (WiX) 部署工具基础 (DTF) 中存在的一些更高级别的类。

```
using Microsoft.Deployment.WindowsInstaller;
using Microsoft.Deployment.WindowsInstaller.Package;

static void FindAndExtractFiles(string packagePath, string longFileName)
{
    using (var installPackage = new InstallPackage(packagePath, DatabaseOpenMode.ReadOnly))
    {
        if(installPackage.FindFiles(longFileName).Count() > 0 )
            installPackage.ExtractFiles();
    }
} 
```

您也可以将其写为 ComVisible(True) 并从 Python 调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:04:44.307

MSI API 本身就很笨重，所以这只是抽象所在的问题。请记住，如果您只需要几次，在资源管理器中手动浏览 cab 文件可能会更容易。（文件按文件键而不是文件名存储）。

# java - 类对象比较 - equals 方法得到错误的输出

> ID：15532301
> 
> 赞同：1
> 
> 时间：2013-03-20T18:54:05.620
> 
> 标签：java, class, object

我有一个类层次结构，如下所示：

```
 public class Rectangle2
    {
        // instance variables 
        private int length;
        private int width;
        /**
         * Constructor for objects of class rectangle
         */
        public Rectangle2(int l, int w)
        {
            // initialise instance variables
            length = l;
            width = w;
        }
        // return the height
        public int getLength()
        {
            return length;
        }
        public int getWidth()
        {
            return width;
        }
        public String toString()
        {
            return "Rectangle - " + length + " X " + width;
        }
public boolean equals( Object b )
           {
               if ( ! (b instanceof Rectangle2) )
               return false;
               Box2 t = (Box2)b;
               Cube c = (Cube)b;
               return t.getLength() == getLength() 
                       && t.getWidth() == getWidth() 
                       && c.getLength() == getLength() 
                       && c.getWidth() == getWidth() ;
}

    } 
```

.

```
public class Box2 extends Rectangle2
{
    // instance variables 
    private int height;
    /**
     * Constructor for objects of class box
     */
    public Box2(int l, int w, int h)
    {
        // call superclass
        super(l, w);
        // initialise instance variables
        height = h;
    }
    // return the height
    public int getHeight()
    {
        return height;
    }
    public String toString()
    {
        return "Box - " + getLength() + " X " + getWidth() + " X " + height;
    }
         public boolean equals( Object b )
           {
               if ( ! (b instanceof Box2) )
               return false;
               Rectangle2 t = (Rectangle2)b;
               Cube c = (Cube)b;
               return t.getLength() == getLength() 
                       && t.getWidth() == getWidth()  
                       && c.getLength() == getLength() ;
  } 
   } 
```

.

```
public class Cube extends Box2 {
            public Cube(int length)
             {
              super(length, length, length);
             } 
            public String toString()
    {
        return "Cube - " + getLength() + " X " + getWidth() + " X " + getHeight();
    }

             public boolean equals( Object b )
           {
               if ( ! (b instanceof Cube) )
               return false;
               Rectangle2 t = (Rectangle2)b;
               Box2 c = (Box2)b;
               return t.getLength() == getLength() 
                       && t.getWidth() == getWidth()  
                       && c.getLength() == getLength() 
                       && c.getWidth() == getWidth() 
                       && c.getHeight() == getHeight() ;
  }      
} 
```

我创建了该`equals()`方法，以便当一个类的实例等于另一个类的实例时，它会打印一些类似“此类的尺寸等于该类的尺寸”的内容。这将是一个例子： http: [//i.stack.imgur.com/Kyyau.png](http://i.stack.imgur.com/Kyyau.png) 唯一的问题是我没有得到那个输出。`equals()`当我`equals()`为 Cube 类做方法时，我也可以只从 Box2 类继承方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:14:56.493

每当您通过 a不是a 时，您对`Cube`inside of 的强制转换`Box2.equals()`将失败并抛出a 。您在整个代码中重复此错误。`ClassCastException``Box2``Cube`

我建议修复`if`语句的大括号，尽管它应该可以按预期工作。

实际上，我不希望你得到任何输出。您的代码中没有任何`print()`或`println()`调用。

此外，在内部`Cube.equals()`，您应该强制`b`转换为 a `Cube`，并从声明的`Cube`对象调用每个函数。你应该用几乎任何`equals(Object)`方法做同样的事情。

在您的实现中，因为`Rectangle2`and`Cube`不要覆盖`getWidth()`or `getLength()`, `t.getWidth()`and`c.getWidth()`将调用相同的函数，因此每次都返回相同的输出。同样对于`getLength()`.

例如，您的`Rectangle2`班级应该看起来像这样。

```
public class Rectangle2 {

    private final int length;
    private final int width;

    public Rectangle2(int length, int width) {
        this.length = length;
        this.width = width;
    }

    private int getLength() { return length; }
    private int getWidth() { return length; }

    public String toString() {
        return "Rectangle - "+length+" X "+width;
    }

    @Override
    public boolean equals(Object o) {
        if (!(o instanceof Rectangle2)) {
            return false;
        }
        final Rectangle2 r = (Rectangle2) o;
        return this.getLength() == r.getLength() && 
               this.getWidth() == r.getWidth() &&
               this.getHeight() == r.getHeight();
    }
} 
```

你的`Box2`班级应该看起来像这样。

```
public class Box2 extends Rectangle2 {

    private final int height;

    public Box2(int length, int width, int height) {
        super(length, width);
        this.height = height;
    }

    private int getHeight() { return height; }

    public String toString() {
        return "Box - "+length+" X "+width"+ X "+height;
    }

    @Override
    public boolean equals(Object o) {
        if (!(o instanceof Box2)) {
            return false;
        }
        final Box2 b = (Box2) o;
        return this.getLength() == b.getLength() && 
               this.getWidth() == b.getWidth() &&
               this.getHeight() == b.getHeight();
    }
} 
```

你的`Cube`班级应该是这样的

```
public class Cube extends Box2 {

    private final int height;

    public Cube(int length) {
        super(length, length, length);
    }

    public String toString() {
        return "Cube - "+length+" X "+width"+ X "+height;
    }

    @Override
    public boolean equals(Object o) {
        if (!(o instanceof Cube)) {
            return false;
        }
        final Cube c = (Cube) o;
        return this.getLength() == c.getLength(); // length == width == height
    }

} 
```

然后，您应该能够添加调用以`System.out.println()`将所需的输出打印到控制台。

您应该声明您的字段，`final`因为它们是不可变的。

最后，如果您有其他名称相似的类，您应该找到更有意义的方法来区分类名而不是数字。否则，`2`从名称中删除`Rectangle2`和`Box2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:11:43.167

您不能将代码放在最后一条`return`语句之后。将无法到达。

您需要将“相等”返回分配给局部变量，打印它然后返回它：

```
boolean equal = getLength() == getLength() 
               && t.getWidth() == getWidth()  
               && c.getLength() == getLength() 
               && c.getWidth() == getWidth() 
               && c.getHeight() == getHeight() ;
if (equal) {
    System.out.prinltn("equal");
}

return equal; 
```

该`equals`方法是继承的，但您正在覆盖它。如果要`equals`在扩展类的主体中调用超类方法，则需要`super()`在被覆盖方法的开头调用。

```
public boolean equals( Object b ) {
     boolean equal = super.equals(b);
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:22:19.937

在我看来，您的 equals 方法应该如下所示（只需更改类）：

```
public boolean equals( Object b ) {
    if (b instanceof Rectangle2) {
        Rectangle2 rectangle2 = (Rectangle2)b;
        return this.getLength() == rectangle2.getLength()
            && this.getWidth() == rectangle2.getWidth()
            && this.getHeight() == rectangle2.getHeight();
    } else {
        return false;
    }
} 
```

如果要打印此方法的结果，请将值分配给任何变量，打印并返回该值。

# java - 占位符中带有本地化参数的 JSTL 消息包

> ID：15532313
> 
> 赞同：8
> 
> 时间：2013-03-20T18:54:34.777
> 
> 标签：java, spring, jsp, jstl

我正在使用 Spring 和 JSTL。

我在捆绑包中有以下键（`messages.properties`）：

```
key.withplaceholder= Never {0}.
key.giveup=give up 
```

我有以下代码：

```
<fmt:message key="key.withplaceholder">
  <fmt:param value="lie"/>
</fmt:message> 
```

使用此代码，我可以显示消息：

> 永远不要说谎。

但是如果我想用`key.giveup`来显示`"Never give up"`我不知道该怎么做。我怎样才能做到这一点？

最后，有没有更好的方法呢？（无需在 jsp 中加载资源包）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T19:02:04.620

您可以使用该`var`属性将格式化的消息存储在页面范围的变量中，而不是将其打印到响应中。

```
<fmt:message key="key.giveup" var="key" />
<fmt:message key="key.withplaceholder">
    <fmt:param value="${key}" />
</fmt:message> 
```

# r - 错误：函数聚合（）的未使用参数

> ID：15532316
> 
> 赞同：0
> 
> 时间：2013-03-20T18:54:39.497
> 
> 标签：r

我正在尝试运行以下脚本：

```
m <- matrix(c(1,1,2,1,3,12,14,16,30,21), nrow=5, ncol=2, byrow=FALSE);
colnames(m) <-c("Group","Score");
m<-data.frame(m)
head(m) 

sum1 <- aggregate(list(total_score=m$Score), by=list(group=m$Group), FUN=sum)
sum1 
```

但我不断收到错误：

```
Error in list(total_score = m$Score) : unused argument(s) (total_score = m$Score) 
```

我在其他 5 台机器上试过这个脚本，代码运行得很好；我只是不知道发生了什么事。我有最新版本的 R，并且这个功能不需要任何额外的包，而不是基本 R。任何人有什么想法吗？

# printing - 设置打印边距 GW-BASIC

> ID：15532318
> 
> 赞同：1
> 
> 时间：2013-03-20T18:54:44.883
> 
> 标签：printing, dos, gw-basic

我正在使用 GW-BASIC 语言，我需要在页面中心打印输出，现在它从 A4 尺寸页面的左上角开始，我可以尝试使用打印机首选项设置边距但是有没有这样的选择。

谁能告诉我如何设置它打印到页面的中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T09:03:30.047

我无法确定 x 和 y 需要在 A4 大小的纸上显示您的特定信息，但使用 LOCATE 语句移动光标将是最简单的方法。

可能需要反复试验才能使您的信息完全集中在您的特定显示器上。

快速谷歌给我这个：[GW-BASIC 用户指南 - LOCATE 声明](http://www.antonis.de/qbebooks/gwbasman/locate.html)

从网站：

> 句法：
> 
> ```
> LOCATE [row][,[col][,[cursor][,[start] [,stop]]]] 
> ```
> 
> 注释：
> 
> **row**是屏幕行号，1 到 25 范围内的数值表达式。
> 
> **col**是屏幕列号，一个介于 1 到 40 或 1 到 80 范围内的数值表达式，具体取决于屏幕宽度。
> 
> **cursor**是一个布尔值，指示光标是否可见；零是关闭的，非零是打开的。
> 
> **start**是光标起始扫描线，0 到 31 范围内的数值表达式。
> 
> **stop**是光标停止扫描线，0 到 31 范围内的数值表达式。

对于光标的简单移动，只有前两个参数是真正需要的，例如：

```
10 LOCATE 4,20
20 PRINT "YOUR TITLE HERE" 
```

以上将光标移动到第 4 行和第 20 列，然后打印“您的标题”。

# c++ - 什么算法可以混合具有相同场景的多个图像，除了每个图像中不同位置的一个对象？

> ID：15532322
> 
> 赞同：4
> 
> 时间：2013-03-20T18:54:53.540
> 
> 标签：c++, algorithm, opencv, image-processing

我想混合同一场景的多张照片，但每张照片只有一个物体在不同的位置。我想知道什么样的算法会产生预期的结果。这是一个例子![在此处输入图像描述](../Images/3d9508ac642ec96f7dafe492c6155c5a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:03:51.590

好吧，您正在寻找的是所谓的[**Image Fusion**](http://en.wikipedia.org/wiki/Image_fusion)。有很多方法可以做到这一点，但这仍然是一个相当活跃的研究思路。根据您拥有的图像，您应该选择性能最佳的图像。因为您的图像会有瑕疵和光照，阴影差异远远超出了简单的剪切和粘贴。

这里有更多信息和一些算法解释：[Image Fusion by Image Blending](http://www.imgfsr.com/ifsr_ImageFusion.pdf)。

# spring-mvc - Spring 3.2 Jackson2（400 错误请求）

> ID：15532323
> 
> 赞同：0
> 
> 时间：2013-03-20T18:54:54.287
> 
> 标签：spring-mvc

我知道 spring 3.2 确实将 json 转换为带有 RequestBody 注释的对象列表。它不适合我。我可以使用常规的杰克逊对象映射器来做到这一点。只是检查是否有人可以帮助我.. 下面是我的 json 和控制器方法

```
[{"uniqueJqGridId":"1","fileProcessingDate":"2012-09-24","createdTimeStamp":"1348569180191","csoCode":"A-A  ","cycleDate":"2012-09-24","accountDate":"2012-10-02","originName":"NCAA                     ","amount":"-95996.33","policyNumber":"C               ","transactionCode":"PCH","id":"1"}]

@RequestMapping(method = RequestMethod.POST, value = "/washTransactions", headers="Content-Type=application/json")  
public @ResponseBody RequestStatus washTransactions(@RequestBody List<ReconPolicy> policiesToWash)throws Exception{
    reconciliationService.applyWashToTransactions(policiesToWash,getCurrentUser());
    return new RequestStatus(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:29:24.750

您正面临 Java 的类型擦除问题。Spring 无法将确切的类类型传递给方法，因此它实际上得到了类似`List<?> policiesToWash`.

一种解决方法是创建一个类

```
public class WashablePolishes extends ArrayList<ReconPolicy> 
```

这样弹簧将通过超类型链保留类型。

或者你可以改变你的方法

```
public @ResponseBody RequestStatus washTransactions(@RequestBody ReconPolicy[] policiesToWash) throws Exception {...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:36:32.423

感谢您回复瓦伦。从 Spring 3.2 开始，没有类型擦除问题。我在启用 spring 调试后发现了这个问题，我发现它在一些未知属性上失败了，我不得不用 @JsonIgnoreProperties 注释我的类。现在它起作用了。

# java - 使用迭代器将对象添加到链表

> ID：15532324
> 
> 赞同：0
> 
> 时间：2013-03-20T18:54:55.567
> 
> 标签：java, iterator, linked-list

好的，我试图将一些学生对象添加到链接列表中，但我不允许使用链接列表的 .add 方法，所以当用户调用 removeStudent 方法时，他们输入学生 ID 号，然后检查列表对于具有该数组的对象

这是我添加方法的代码：

```
public void deleteStudent(int studentID)
{
    while (iter.hasNext())
    {
       Student ob = iter.next();
       if (ob.getStudentID() == studentID)
       {
         iter.remove();
         break;
       }
     }
  } 
```

当我运行这个我得到这个错误：

```
Exception in thread "main" java.util.ConcurrentModificationException
    at java.util.LinkedList$ListItr.checkForComodification(LinkedList.java:953)
    at java.util.LinkedList$ListItr.next(LinkedList.java:886)
    at student.Registry.deleteStudent(Registry.java:30)
    at student.Registry.main(Registry.java:51)
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:01:21.273

这`ConcurrentModificationException`基本上意味着您在创建列表迭代器和使用它之间修改了列表。您需要做的是在将所有内容添加到列表或通过任何其他方式对其进行修改之后创建和使用迭代器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:58:11.117

编辑：尝试使用本地迭代器：

```
public void deleteStudent(int studentID){
  Iterator<Student> iterator=listStudent.iterator();
  while (iter.hasNext()){
    Student ob = iterator.next();
    if (ob.getStudentID() == studentID){
      iterator.remove(student);
      break;
    }
  }
} 
```

这样，列表和您的本地迭代器之间就没有并发修改。但这会修改​​列表，如果您在调用此方法后继续尝试使用以前的迭代器，您可能会遇到问题。

编辑： AbstractList 维护一个“modCount”（修改计数）属性，该属性计算您在列表中添加、删除等的数量。

当您在 List 上获取迭代器时，迭代器会记住此 modCount 以确保您不会使用迭代器之外的方法编辑列表。

例子：

```
List myList=new ArrayList();
//modCount for the list is 0

myList.add("test");
//modCount for the list is 1

Iterator iterator=myList.iterator();
//modCount for the list is 1
//expected modCount for the iterator is initialized to 1

myList.add("test 2");
//modCount for the list is 2
//expected modCount for the iterator is initialized to 1

iterator.remove("test");
//modCount != expectedModCount => throw new ConcurrentModificationException() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:58:16.183

您的原始任务不清楚，但看起来您受到 LinkedList API 的限制。

没有别的了。

使用链表删除（和一般修改）元素并不是一件容易的事——您可能必须安全地遍历整个列表。（关于链表的好消息是插入很容易）。

这将起作用（也有其他方法可以做到）：

```
public void deleteStudent(int studentID){
...
  LinkedList<Student> modifiedStudentList = new LinkedList<>();
  while (iter.hasNext()){
    Student ob = iterator.next();
    if (ob.getStudentID() != studentID){
        modifiedStudentList.addLast(ob) 
    }
  }
  studentList = modifiedStudentList;
} 
```

结果，您的列表将包含它以前拥有的所有学生，除了具有 studentID 的学生，如果它不存在于列表中，则不会删除任何内容。

您将不得不遍历集合中的所有元素，但这是您的老师设置的 API 限制的代价。

# linux - 比特币 cgminer 设置拱门

> ID：15532329
> 
> 赞同：0
> 
> 时间：2013-03-20T18:55:15.957
> 
> 标签：linux, bitcoin, archlinux

试图在 Arch linux AMD 64bit 上设置比特币矿工。我在arch linux上使用cgminer收到此错误：

```
[2013-03-20 19:52:41] Started cgminer 2.11.3
[2013-03-20 19:52:41] Error -1001: clGetPlatformsIDs failed (no OpenCL SDK installed?)
[2013-03-20 19:52:41] clDevicesNum returned error, no GPUs usa 
```

我试图解决依赖关系，但需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:08:41.333

任何一个：

*   您尚未安装 AMD 的专有驱动程序，或者

*   您尚未安装 AMD 的 APP SDK - [http://developer.amd.com/tools/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/](http://developer.amd.com/tools/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/)

您将在其 README 页面上找到 cgmier 的依赖项列表和其他重要内容。

# c++ - shared_ptr 初始化

> ID：15532333
> 
> 赞同：3
> 
> 时间：2013-03-20T18:55:20.723
> 
> 标签：c++, shared-ptr, decltype

成员定义为

```
std::shared_ptr<std::array<std::string, 6> > exit_to; 
```

这指向其他共享的其他数据。当尝试启动指针“exit_to”时。正确的方法是

```
node_knot.exit_to = std::make_shared<std::array<std::string, 6> >(); 
```

但它在另一个文件中，我想保持指针类型一致，如下所示：

```
node_knot.exit_to = std::make_shared<decltype(*node_knot.exit_to)>(); 
```

但不会编译：

```
 /usr/include/c++/4.6/bits/shared_ptr_base.h:798:54: error: '__p'
 declared as a pointer to a reference of type
 'std::array<std::basic_string<char>, 6> &'
         __shared_ptr(const __shared_ptr<_Tp1, _Lp>& __r, _Tp* __p)
                                                             ^ /usr/include/c++/4.6/bits/shared_ptr.h:93:31: note: in instantiation
 of template class
 'std::__shared_ptr<std::array<std::basic_string<char>, 6> &, 1>'
 requested here
     class shared_ptr : public __shared_ptr<_Tp>
                               ^ ../node_booker.h:757:20: note: in
 instantiation of template class
 'std::shared_ptr<std::array<std::basic_string<char>, 6> &>' requested
 here
                                                         n.exit_to = std::make_shared<decltype(*n.exit_to)>(); 
```

我在 Ubuntu 12.10、clang++ 3.2 下，使用 --std=c++11

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T19:06:48.520

您需要从要传递给的类型中删除引用`make_shared`。以下应该有效：

```
node_knot.exit_to = std::make_shared<std::remove_reference<decltype(*node_knot.exit_to)>::type>(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T19:11:31.157

问题是 of 的类型`*exit_to`是一个引用，而你不能有一个`shared_ptr`to 的引用。

您可以删除引用，但与其查找返回的类型`operator*`然后将其剥离，不如询问`shared_ptr`它包含的类型可能更容易：

```
node_knot.exit_to = std::make_shared<decltype(node_knot.exit_to)::element_type>(); 
```

嵌套`element_type`是存储的类型`shared_ptr`。

另一种选择是将 a 添加`typedef`到类中，并在需要的任何地方始终如一地使用它：

```
typedef std::array<std::string, 6> string_array;
std::shared_ptr<string_array> exit_to;

// ... 

node_knot.exit_to = std::make_shared<Node::string_array>(); 
```

这比使用更具可读性`decltype`

# jquery - jQuery使相邻的div具有相同的高度

> ID：15532338
> 
> 赞同：-1
> 
> 时间：2013-03-20T18:55:26.667
> 
> 标签：jquery, containers

我有一系列领域，如：

```
<div class="field-label-inline">
  <div class="field-label">something1</div>
  <div class="field-items">
     <div class="field-item">sometext1</div>
  </div>
</div>
<div class="field-label-inline">
  <div class="field-label">something2</div>
  <div class="field-items">
     <div class="field-item">sometext2</div> 
</div> 
```

我想让 .field-label div 的所有实例与相邻的 .field-items div 具有相同的高度（此 div 的高度根据其内容而有所不同）。可悲的是，我的 jQuery 几乎不存在；这是我最好但失败的尝试：

```
$(document).ready(function(){    

  $('.field-label-inline > .field-label', this).each(function(){

    var itemsHeight = 0;

    itemsHeight = $(this + .field-items).height();

    $(this).height(itemsHeight);

  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:58:25.087

给你的 .field-label-inline 类一个固定的高度，比如 500px，然后给 .field-label 和 .field-items 一个 100% 的高度。我会在css中这样做，但jquery在下面。

```
$(".field-label-inline").css("height","500px");
$(".field-label").css("height","100%");
$(".field-items").css("height","100%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:04:31.417

最终。这行得通。我不知道这是否是一个“好”的解决方案。

```
$(document).ready(function(){    

  $('.field-label-inline .field-label').each(function(){

  var itemsHeight = 0;

  itemsHeight = $(this).next().height();

  $(this).height(itemsHeight);

  });
}); 
```

# android - 生成云端点库失败

> ID：15532343
> 
> 赞同：0
> 
> 时间：2013-03-20T18:55:35.560
> 
> 标签：android, eclipse, google-app-engine, google-cloud-endpoints

已经为此工作了几个小时，现在无法生成我的端点库。[我为我的实体类生成了一个端点类，它在https://developers.google.com/eclipse/docs/endpoints-addentities](https://developers.google.com/eclipse/docs/endpoints-addentities)的教程中定义。但是，生成端点库失败，但出现以下异常。

```
eclipse.buildId=v21.1.0-569685
java.version=1.7.0_15
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product com.android.ide.eclipse.adt.package.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product com.android.ide.eclipse.adt.package.product

Error
Wed Mar 20 13:49:16 CDT 2013
Unexpected Exception

java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmApiCreator.createSwarmApi(SwarmApiCreator.java:96)
    at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmServiceCreator.create(SwarmServiceCreator.java:364)
    at com.google.gdt.eclipse.appengine.swarm.wizards.GenerateSwarmApiAction$1.run(GenerateSwarmApiAction.java:84)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
    at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:507)
    at com.google.gdt.eclipse.appengine.swarm.wizards.GenerateSwarmApiAction.run(GenerateSwarmApiAction.java:80)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.VerifyError: Expecting a stackmap frame at branch target 5 in method com.facebook.samples.hellofacebook.Note.___jdo$loadClass(Ljava/lang/String;)Ljava/lang/Class; at offset 0
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethods(Unknown Source)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.AnnotatedClass._addMemberMethods(AnnotatedClass.java:620)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.AnnotatedClass.resolveMemberMethods(AnnotatedClass.java:408)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.BasicClassIntrospector.classWithCreators(BasicClassIntrospector.java:185)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.BasicClassIntrospector.collectProperties(BasicClassIntrospector.java:157)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:96)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:16)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.SerializationConfig.introspect(SerializationConfig.java:919)
    at com.google.api.server.spi.tools.JacksonBeanPropertyProvider.getProperties(JacksonBeanPropertyProvider.java:29)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.addBeanProperties(AnnotationApiConfigGenerator.java:686)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.addBeanTypeToSchema(AnnotationApiConfigGenerator.java:657)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.addTypeToSchema(AnnotationApiConfigGenerator.java:642)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.addTypeToNode(AnnotationApiConfigGenerator.java:744)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.convertMethodResponseType(AnnotationApiConfigGenerator.java:541)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.convertMethodResponse(AnnotationApiConfigGenerator.java:527)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.convertApiMethod(AnnotationApiConfigGenerator.java:408)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.convertApiMethods(AnnotationApiConfigGenerator.java:380)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.convertApiMethods(AnnotationApiConfigGenerator.java:367)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.generateConfigObjects(AnnotationApiConfigGenerator.java:251)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.generateConfig(AnnotationApiConfigGenerator.java:185)
    ... 41 more
Root exception:
java.lang.VerifyError: Expecting a stackmap frame at branch target 5 in method com.facebook.samples.hellofacebook.Note.___jdo$loadClass(Ljava/lang/String;)Ljava/lang/Class; at offset 0
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethods(Unknown Source)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.AnnotatedClass._addMemberMethods(AnnotatedClass.java:620)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.AnnotatedClass.resolveMemberMethods(AnnotatedClass.java:408)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.BasicClassIntrospector.classWithCreators(BasicClassIntrospector.java:185)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.BasicClassIntrospector.collectProperties(BasicClassIntrospector.java:157)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:96)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:16)
    at com.google.appengine.repackaged.org.codehaus.jackson.map.SerializationConfig.introspect(SerializationConfig.java:919)
    at com.google.api.server.spi.tools.JacksonBeanPropertyProvider.getProperties(JacksonBeanPropertyProvider.java:29)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.addBeanProperties(AnnotationApiConfigGenerator.java:686)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.addBeanTypeToSchema(AnnotationApiConfigGenerator.java:657)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.addTypeToSchema(AnnotationApiConfigGenerator.java:642)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.addTypeToNode(AnnotationApiConfigGenerator.java:744)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.convertMethodResponseType(AnnotationApiConfigGenerator.java:541)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.convertMethodResponse(AnnotationApiConfigGenerator.java:527)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.convertApiMethod(AnnotationApiConfigGenerator.java:408)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.convertApiMethods(AnnotationApiConfigGenerator.java:380)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.convertApiMethods(AnnotationApiConfigGenerator.java:367)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.generateConfigObjects(AnnotationApiConfigGenerator.java:251)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.generateConfig(AnnotationApiConfigGenerator.java:185)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmApiCreator.createSwarmApi(SwarmApiCreator.java:96)
    at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmServiceCreator.create(SwarmServiceCreator.java:364)
    at com.google.gdt.eclipse.appengine.swarm.wizards.GenerateSwarmApiAction$1.run(GenerateSwarmApiAction.java:84)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
    at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:507)
    at com.google.gdt.eclipse.appengine.swarm.wizards.GenerateSwarmApiAction.run(GenerateSwarmApiAction.java:80)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:08:26.720

编译器版本错误。它应该是 1.6 而不是 1.7

# actionscript-3 - AS3：在外部 swf 中使用按钮

> ID：15532348
> 
> 赞同：1
> 
> 时间：2013-03-20T18:55:51.840
> 
> 标签：actionscript-3, button, flash, external

我正在用 Adob​​e Flash 制作一个网站，该网站从外部 swf 文件中导入导航按钮。问题是我的主 FLA 文件如何知道用户按下了哪些导航按钮，因为按钮及其事件监听器位于外部 swf 文件中。

换句话说：我可以让我的外部 swf 文件返回一个数字到我的网站 FLA 文件，以确定已按下哪个按钮？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:58:11.170

您可以使用`LocalConnection()`

在 main.swf

```
var sending_lc:LocalConnection;
sending_lc = new LocalConnection();

function send_it(evt:MouseEvent):void 
{
    sending_lc.send("connectionName", "functionName", "myData");
    //params are (connection name, function to execute in the receiving swf, the data to pass through)
}

my_btn.addEventListener(MouseEvent.MOUSE_UP, send_it); 
```

在外部.swf

```
var receiving_lc:LocalConnection;
receiving_lc = new LocalConnection();

receiving_lc.connect("connectionName");
receiving_lc.client = this;

function functionName(data:String):void {
trace(data);
} 
```

# axapta - 如何在 Dynamics AX 2012 中从 X++ 生成 CIL？

> ID：15532354
> 
> 赞同：3
> 
> 时间：2013-03-20T18:56:17.843
> 
> 标签：axapta, cil, x++, dynamics-ax-2012, ax

是否可以从 X++ 代码或命令行中生成 CIL（增量或完整）？

我的问题是我想将模型或 xpo 导入 AX，并且需要自动生成 CIL。这是为了我们正在做的自动化测试——所以，我不能像你通常那样使用 UI 来生成增量或完整 CIL

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T10:11:20.760

将 startupcmd 参数传递给 AX 客户端会导致它运行相应的 SysStartupCmd 类。有一个名为 SysStartupCmdCompileIL 的软件可以进行 CIL 编译。

```
"C:\Program Files (x86)\Microsoft Dynamics AX\60\Client\Bin\Ax32.exe" \\server\share\yourconfigfile.axc -startupcmd=CompileIL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T22:03:47.273

如果您希望在 X++ 中使用 Jay 的帖子，命令行调用的代码如下：

```
try
{
    SysCompileIL::generateIL(); 
}
catch
{
    SysCompileIL::mergeAssemblyFile();
    throw Exception::Error;
}
SysCompileIL::mergeAssemblyFile(); 
```

# jquery - 如何使用 jQuery 将一个 div 加载到另一个

> ID：15532357
> 
> 赞同：0
> 
> 时间：2013-03-20T18:56:26.137
> 
> 标签：jquery, html

我正在创建一个菜单，在其中单击多个导航 div 时，不同的内容将从单独的 HTML 页面加载到主页上的单个容器 div 中。我想合并 .fadeIn 和 .fadeOut 以便内容交叉淡入，而不仅仅是切换出来。

这是我为从两个导航 div 加载内容而编写的脚本：

```
$(function() { 
$(".navIcon1") .click(function(){
    $("#container").load("content.html #div1");

$(".navIcon2") .click(function(){
    $("#container").load("content.html #div2");
});
});
}); 
```

由于我是使用 jQuery 的新手，我不确定如何创建一个变量以将 .fadeIn 和 .fadeOut 包含到我目前正在工作的内容中。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:00:04.127

先隐藏容器，然后在页面加载后淡入它。

```
$("#container").hide().load("content.html #div1", function(){
    $("#container").fadeIn(5000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:06:07.453

延迟对象可以在这里发挥关键作用：

```
var req = $.get("content.html");

$("#container").fadeOut("1000",function(){
    req.done(function(html){
        $("#container").html(
            // $.parseHTML prevents a memory leak
            $($.parseHTML(html)).find("#div1").addBack().filter("#div1");
        ).fadeIn("1000");
    });
}); 
```

这将允许您尽可能快地检索内容，同时仍然具有淡出和淡入动画。

# javascript - 对话结束的第二部分

> ID：15532360
> 
> 赞同：0
> 
> 时间：2013-03-20T18:56:37.087
> 
> 标签：javascript, html, ajax

这是我从这里开始的第一个线程的第二个线程：[我创建了一个对话框，现在如何关闭它？](https://stackoverflow.com/questions/15527866/i-created-a-dialog-now-how-can-i-close-it/15528095?noredirect=1#comment21997201_15528095)

我正在创建一个新线程，以便包含更新的代码。

首先，我想非常感谢所有在上面链接的帖子中帮助过我的人，但正如我所说，我正在启动这个线程，这样我就可以添加代码示例。

我的某些页面上有一个对话框出现在滚动条上，但我遇到了一些麻烦。

这个对话框可以在这里看到：（出现的半透明框）[http://classifieds.your-adrenaline-fix.com/detail.php?fatherID=37&TypeID=42&ListingID=42](http://classifieds.your-adrenaline-fix.com/detail.php?fatherID=37&TypeID=42&ListingID=42)

在 detail.php 我有：（
在头脑中）

```
 <script type="text/javascript">
    function loaddiv(thediv, thefile) {
        if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
        } else {
        xmlhttp = new ActiveXObject ('Microsoft.XMLHTTP');
        }

        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                document.getElementById(thediv).innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open('GET', thefile, true);
        xmlhttp.send();
    }
    </script> 
```

在那之下：

```
 <body onscroll="loaddiv('div2', 'do-you-have-a-dirt-bike-for-sale.html')"> 
```

然后：

```
 if (!Has_Seen_DB_For_Sale_Dialog($user_ip)){
        echo "<div id='div2'></div>";
        ip_add($user_ip);
    } 
```

除此之外（在包含文件中）我有：

```
 function Has_Seen_DB_For_Sale_Dialog($ip){
        global $user_ip;
        $query ="SELECT `IP` FROM `DB_For_Sale_Dialog` WHERE `IP`='$user_ip'";
        $query_run = mysql_query($query);

        $query_num_rows = mysql_num_rows($query_run);
        if($query_num_rows==0){
            return false;
            }   else if($query_num_rows==1){
            return true;
        }
    }

    function ip_add($ip){
        $query = "INSERT INTO `DB_For_Sale_Dialog` VALUES('', '$ip') ";
        @$query_run = mysql_query($query);
    } 
```

显示的文件如下所示：

```
<div id='div2'>
    <div class="DoYouHaveADirtBikeForSaleBox" id="DoYouHaveADirtBikeForSaleBox">
    <h2>Got A Dirt Bike You Want to Sell?</h2>
    <p class="DirtBikeForSaleBannerButton">
    <a href="http://classifieds.your-adrenaline-fix.com/add.php">Yea, Show Me How</a>
    </p>

    <p class="DirtBikeForSaleBannerButtonNoThanks">
    <a onclick="javascript:var div = document.getElementById('div2');div.parentNode.removeChild(div);">Nope, Get This Out of The Way</a></p> 
    </div>
    </div> 
```

我非常感谢在上一个帖子中为我提供的帮助，并且在开始新帖子时没有不尊重的意思，但我现在遇到的问题是：

当我将鼠标悬停在右键以关闭框时，指针不会像其他链接那样变成手。

当对话框关闭并滚动页面时，该框会重新出现。（显示框的功能称为 onscroll 但我只希望框出现一次。

如果有人不介意对此发表评论，我将不胜感激，我当然期待您的回复。

非常感谢，斯图尔特 K

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:49:36.403

使用这种方法：

```
<script type="text/javascript">
function loaddiv(thediv, thefile) {
    if (window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();
    } else {
    xmlhttp = new ActiveXObject ('Microsoft.XMLHTTP');
    }

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById(thediv).innerHTML = xmlhttp.responseText;
            window.onscroll = null;
        }
    }
    xmlhttp.open('GET', thefile, true);
    xmlhttp.send();
}

</script> 
```

--------我做了这个小测试--------------

```
function loaddiv() {
alert('hiiii');
window.onscroll = null;

        } 
```

身体呼唤：

```
<body onscroll="loaddiv();"> 
```

并且只工作一次 xD

萨卢多斯。

# assembly - 这个 MIP 代码是什么意思？

> ID：15532361
> 
> 赞同：0
> 
> 时间：2013-03-20T18:56:38.283
> 
> 标签：assembly, mips

我正在努力寻找一个解释 MIPS 及其工作原理的好网站。

我试图理解的代码是：

```
SW 7000(R0),R1 
```

我知道 SW 表示保存字，它是将 R1 的值保存到内存地址 7000。（R0）有什么意义？它有什么作用？

对于我遇到的类似问题，是否有很好的资源？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T19:03:11.583

这里 R0 是一个寄存器。将它放在括号中表示您正在使用间接寻址（即：像指针一样）：不是存储在 R0 中，而是存储在 R0 中的地址中。

7000 表示偏移量。在这种情况下，您会将地址存储在 R0 + 7000 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T19:03:04.557

看起来应该是

```
SW R1, 7000(R0) 
```

其中 R1 和 R0 是任何 MIPS 寄存器。

它将寄存器 R1 的内容读取为存储到有效内存地址`7000+R0`中。例如，如果 R1 包含值 10，而 R0 包含值 1192，则它将值 10 的字（32 位）存储到内存地址 8192 中。

# jquery - jQuery 自定义滚动条和延迟加载

> ID：15532362
> 
> 赞同：6
> 
> 时间：2013-03-20T18:56:42.077
> 
> 标签：jquery, scroll, lazy-loading, custom-scrolling

我有带有自定义内容滚动条的容器[jQuery 自定义内容滚动](http://manos.malihu.gr/jquery-custom-content-scroller/)条：这段代码：

```
(function($){
    $(window).load(function(){
        $(".content").mCustomScrollbar({
            scrollButtons: { enable: true },
            mouseWheelPixels: 250
        });
    });
})(jQuery); 
```

我想将它与延迟加载一起使用：

```
$(function() {
  $("img.lazy").lazyload({
     effect : "fadeIn",
     container: $(".content")
  });
}); 
```

我认为它应该与 Scroller 页面中的回调函数一起使用，但我对 jquery 不好，所以我的结果不成功。

当我使用下面的代码时，它会在页面加载时加载所有图像：

```
$(function() {
  $("img.lazy").lazyload({
     effect : "fadeIn",
     container: $(".mCSB_container")
  });
}); 
```

作者说这可以通过编写一个简单的 js 函数并在[whileScrolling](http://manos.malihu.gr/jquery-custom-content-scroller/comment-page-9/#comment-15979)事件上调用它来完成。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-25T07:52:22.417

您尝试使用`container`不起作用，因为`mCustomScrollbar`不使用滚动容器，而是使用容器中的相对定位`overflow: hidden`来实现滚动。我能想到的最简洁的方法是使用自定义[事件触发延迟加载][1]。以下是我对 Hasan Gürsoy 给出的示例文件的处理方式：

```
<script>
$(document).ready(function () {
    var filledHeight = 250;
    $(window).load(function () {
        $(".scroll").height($(window).height() - filledHeight);
        $(".scroll").mCustomScrollbar({ scrollButtons: { enable: true },
        mouseWheelPixels: 250,
        callbacks: { whileScrolling: function() {
            var scroller = $(".mCSB_container");
            var scrollerBox = scroller.closest(".mCustomScrollBox");
            $(".scroll img.lazy").filter(function() {
                var $this = $(this);
                if($this.attr("src") == $this.data("src")) return false;
                var scrollerTop = scroller.position().top;
                var scrollerHeight = scrollerBox.height();
                var offset = $this.closest("div").position();
                return (offset.top < scrollerHeight - scrollerTop);
            }).trigger("lazyScroll");
            }}});

        $("img.lazy").lazyload({ event: "lazyScroll" });
    });
});
</script> 
```

我也使用`whileScrolling`回调，但只检查哪些`img.lazy`图像是可见的。如果它们与容器的相对位置不大于容器的高度减去其 CSS`top`属性，则它们是。（假设您总是从上往下滚动；此设置无法识别由于您向下滚动太远而不可见的图像。）对于这些图像，该函数会触发自定义`lazyScroll`事件，该事件是延迟加载用来触发加载图像的事件。

请注意，此解决方案还不是很便携：您必须将`.mCSB_container`和的查询替换为`.mCustomScrollBox`获取与当前滚动框关联的元素的查询，以便脚本在多个`mCustomScrollbar`. 在实际场景中，我还会缓存 jQuery 对象，而不是在每次调用回调时重新创建它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-22T17:37:02.253

我认为作者的意思是另外挂钩`whileScrolling`这样的事件：

```
(function($){

    $(window).load(function(){

        $("#content_1").mCustomScrollbar({
            scrollButtons:{
                enable:true
            },
            callbacks:{
                whileScrolling:function(){ WhileScrolling(); } 
            }
        });

        function WhileScrolling(){
            $("img.lazy").lazyload();
        }

    });

})(jQuery); 
```

HTML 容器如下所示：

```

```
<div id="content_1" class="content">
    <p>Lorem ipsum dolor sit amet. Aliquam erat volutpat. Maecenas non tortor nulla, non malesuada velit.</p>
    <p>
        <img class="lazy img-responsive" data-original="/img/bmw_m1_hood.jpg" width="765" height="574" alt="BMW M1 Hood"><br/>
        <img class="lazy img-responsive" data-original="/img/bmw_m1_side.jpg" width="765" height="574" alt="BMW M1 Side"><br/>
        <img class="lazy img-responsive" data-original="/img/viper_1.jpg" width="765" height="574" alt="Viper 1"><br/>
        <img class="lazy img-responsive" data-original="/img/viper_corner.jpg" width="765" height="574" alt="Viper Corner"><br/>
        <img class="lazy img-responsive" data-original="/img/bmw_m3_gt.jpg" width="765" height="574" alt="BMW M3 GT"><br/>
        <img class="lazy img-responsive" data-original="/img/corvette_pitstop.jpg" width="765" height="574" alt="Corvette Pitstop"><br/> 
    </p>
    <p>Aliquam erat volutpat. Maecenas non tortor nulla, non malesuada velit. Nullam felis tellus, tristique nec egestas in, luctus sed diam. Suspendisse potenti. </p>
    <p>Consectetur adipiscing elit. Nulla consectetur libero consectetur quam consequat nec tincidunt massa feugiat. Donec egestas mi turpis. Fusce adipiscing dui eu metus gravida vel facilisis ligula iaculis. Cras a rhoncus massa. Donec sed purus eget nunc placerat consequat.</p>
    <p>Cras venenatis condimentum nibh a mollis. Duis id sapien nibh. Vivamus porttitor, felis quis blandit tincidunt, erat magna scelerisque urna, a faucibus erat nisl eget nisl. Aliquam consequat turpis id velit egestas a posuere orci semper. Mauris suscipit erat quis urna adipiscing ultricies. In hac habitasse platea dictumst. Nulla scelerisque lorem quis dui sagittis egestas.</p> 
    <p>Etiam sed massa felis, aliquam pellentesque est.</p>
    <p>the end.</p>
</div> 
```

为了减少`lazyload()`滚动期间的数量，我们可以使用例如`mcs.top`滚动内容顶部位置（像素）的属性：

```
function WhileScrolling()
{
    // Debug:
    // console.log( 'top: ' + mcs.top );

    // Run lazyload in 10 pixel steps (adjust to your needs) 
    if( 0 == mcs.top % 10 )
    {
        // Run lazyload on the "div#conent_1" box:
        $("#content_1 img.lazy").lazyload();

        // Debug:
        //console.log( 'lazyload - mcs.top: ' + mcs.top );
    }
} 
```

我们限制了layzload选择器，因此我们不必在整个DOM树中查找所有图像。

我注意到在*Internet Explorer 11*中，`mcs.top`可以是浮点数，但在*Chrome*中总是整数。

所以我们可以*用*`Math.floor()`.

为了进一步减少延迟加载调用，我们还可以与`mcs.top`之前的值进行比较：

```
var mcsTopPrev = 0;
var mcsTop = 0;
function WhileScrolling()
{
    // Fix the Chrome vs Internet Explorer difference
    mcsTop = Math.floor( mcs.top );

    // Current vs previous 
    if(  mcsTop != mcsTopPrev )
    {
        // Run lazyload in 10px scrolling steps (adjust to your needs)
        if( 0 == mcsTop % 10 )
        {
            $("#cphContent_lReferences img.lazy").lazyload();
        }
    }
    mcsTopPrev =  mcsTop;
} 
```

            回答 #3

赞同：1

时间：2016-12-14T13:08:22.970

我正在使用带有[自定义内容滚动器的插件](http://manos.malihu.gr/jquery-custom-content-scroller/)[延迟加载](https://www.appelsiini.net/projects/lazyload)并且遇到了同样的问题。

对我有用的是向*mCustomScrollbar 的* *whileScrolling*事件添加回调，在该事件中我触发了我正在延迟加载的容器的滚动事件：

```
/* Lazy load images */
$(".blog-items img.lazyload").lazyload({
  effect: "fadeIn",
  effect_speed: 1000,
  skip_invisible: true,
  container: $(".blog-items")
});

/* Custom scrollbar */
$(".blog-items").mCustomScrollbar({
  theme: "rounded-dark",
  callbacks: {
    whileScrolling: function() {
      $(".blog-items").trigger("scroll");
    }
  }
}); 
```

我将*lazyload 的*属性*skip_invisible*设置为true，希望能提高性能。如果您遇到任何问题，请设置为 false。

            回答 #4

赞同：0

时间：2015-06-24T17:22:50.297

最后我写了这个可以从 mCustomScrollbar 回调中调用：

```
 function lazyLoad(selector,container) {     

      var $container=$(container);            
      var container_offset=$container.offset();
      container_offset.bottom=container_offset.top+$container.height();

      $(selector,$container).filter(function(index,img){
        if (!img.loaded) {                    
          var img_offset=$(img).offset();     
          img_offset.bottom=img_offset.top+img.height;
          return (img_offset.top<container_offset.bottom && (img_offset.top>0 || img_offset.bottom>0));
        }                                                                                                                                        
      }).trigger('appear');

    } 
```

如果图像大小恒定且图像列表很大，则可能值得使用二分法搜索第一张图像，然后使用已知图像和容器尺寸计算必须触发“出现”事件的索引范围，以及匹配图像的偏移量（）...

```

# php - 情绪分析算法建议

> ID：15532364
> 
> 赞同：3
> 
> 时间：2013-03-20T18:56:46.347
> 
> 标签：php, machine-learning, text-mining, sentiment-analysis, part-of-speech

我已经实现了简单的朴素贝叶斯分类器和用于情感分析的 k-nn。我正在对情绪分析算法进行比较研究。我想再实现一种情绪分析算法。我研究过 maxent 最大熵模型，但我不知道如何实现它。任何人都可以指导我如何实现它，或者可以提供任何有用的链接。

我的主要目标是将facebook状态或任何句子分类为**正面**或**负面**

如果您知道任何其他算法，请建议我提供一些指导来实现它。

# svg - SVG 文档是否支持自定义数据属性？

> ID：15532371
> 
> 赞同：90
> 
> 时间：2013-03-20T18:57:06.047
> 
> 标签：svg, web-standards

在 HTML5 中，元素可以具有存储在 XML 属性中的任意元数据，其名称`data-`以`<p data-myid="123456">`. 这也是 SVG 规范的一部分吗？

在实践中，这种技术在很多地方都适用于 SVG 文档。但是我想知道它是否是官方 SVG 规范的一部分，因为该格式足够年轻，浏览器之间仍然存在很多不兼容，尤其是在移动设备中。因此，在提交代码之前，我想知道我是否可以期待未来的浏览器会支持这一点。

我从工作组邮件列表中找到[了这条消息](http://lists.w3.org/Archives/Public/www-svg/2011May/0014.html)，说他们“希望 [他们] 会”支持它。这成为官方了吗？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-11-28T11:32:36.733

虽然其他答案在技术上是正确的，但它们忽略了 SVG 为`data-*`. SVG[允许包含任何属性和标签](http://www.w3.org/TR/SVG/extend.html#ForeignNamespaces)，只要它不与现有的冲突（换句话说：您应该使用命名空间）。

要使用此（等效）机制：

*   使用`mydata:id`代替`data-myid`，像这样：`<p mydata:id="123456">`
*   确保在 SVG 开始标记中定义命名空间，如下所示：`<svg xmlns:mydata="http://www.myexample.com/whatever">`

* * *

**编辑：** [SVG2](https://www.w3.org/TR/SVG2/)，目前是 W3C 候选推荐（2018 年 10 月 4 日），将[直接](https://www.w3.org/TR/SVG2/struct.html#DataAttributes)[支持`data-`](https://www.w3.org/TR/SVG2/struct.html#DataAttributes)（没有命名空间，与 HTML 相同）。不过，要获得广泛的支持还需要一些时间。感谢@cvrebert[指出这一点](https://stackoverflow.com/a/30519648/593487)。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-22T21:42:01.633

该[`data-*`属性](http://www.w3.org/TR/2014/REC-html5-20141028/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)是 HTML5 的一部分。它不是通用的 XML 属性。

当前的 SVG W3C 建议是[SVG 1.1](http://www.w3.org/TR/2011/REC-SVG11-20110816/)（从 2011-08 开始）。它不允许此属性，因为您可以检查[属性列表](http://www.w3.org/TR/2011/REC-SVG11-20110816/attindex.html)。

[SVG 2 工作草案](http://www.w3.org/TR/2012/WD-SVG2-20120828/)（从 2012-08 开始）也是[如此](http://www.w3.org/TR/2012/WD-SVG2-20120828/attindex.html)。**更新（2015）**：似乎[它旨在](https://www.w3.org/Graphics/SVG/WG/track/actions/3694)支持[SVG 2](http://www.w3.org/TR/SVG2/)中的属性（目前仍是工作草案）。**`data-*`**

 *** * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-05-29T01:21:59.333

`data-*`SVG2 的当前草案正式支持 SVG 元素的属性。看：

*   [`w3c/svgwg`commit `1cb4ee9`：在所有 SVG 元素上添加`SVGElement.dataset`和允许`data-*`的属性。](https://github.com/w3c/svgwg/commit/1cb4ee9e165b3d777d33828da8fa757e67d019ff)
*   [ACTION-3694：向规范添加“data-*”属性注释。](https://www.w3.org/Graphics/SVG/WG/track/actions/3694)（创建于：2015 年 1 月 15 日）
*   [解决方案：我们将保留“data-*”属性以用于 SVG 内容。处理它们的 API 在 Element 上。](http://www.w3.org/2015/01/15-svg-minutes.html#item03)（来自 SVG WG Telecon，2015 年 1 月 15 日）
*   [https://lists.w3.org/Archives/Public/www-svg/2014Dec/0022.html](https://lists.w3.org/Archives/Public/www-svg/2014Dec/0022.html)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-22T11:46:58.743

有一个更通用的机制。

svg 支持`desc`可能包含来自其他命名空间的任意 xml 的元素。通过依赖 id 或 refid 属性从您自己的命名空间中链接此元素或子节点的实例。

[这是规范 (5.4) 的相关部分](http://www.w3.org/TR/SVG11/struct.html#DescriptionAndTitleElements)。**

# javascript - IE7+ 的复选框/单选框样式

> ID：15532377
> 
> 赞同：1
> 
> 时间：2013-03-20T18:57:24.120
> 
> 标签：javascript, jquery, css, internet-explorer

我讨厌 IE7，它让我生病了。请我需要帮助，可能我做错了什么或......

这是我的CSS：

```
input[type='checkbox'] 
{
    opacity: 0;
    float: left;
    width: 18px;
}
input[type='checkbox'] + label {
    margin: 0;
    clear: none;
    padding: 5px 0 4px 24px;
    /* Make look clickable because they are */
    cursor: pointer;
    background: url(https://css-tricks.com/wufoo/themes/customradiosandcheckboxes/off.png) left center no-repeat;
}

input[type='checkbox']:checked + label {
    background-image: url(https://css-tricks.com/wufoo/themes/customradiosandcheckboxes/check.png); 
```

html:

```
<input id="Field2" name="Field2" type="checkbox" class="field checkbox" checked="checked">
<label class="choice" for="Field2">First Choice</label>
<br><br>
<input id="Field3" name="Field3" type="checkbox" class="field checkbox">
<label class="choice" for="Field3">Second Choice</label>
<br><br>
<input id="Field4" name="Field4" type="checkbox" class="field checkbox">
<label class="choice" for="Field4">Third Choice</label></body> 
```

IE9 视图：

![在此处输入图像描述](../Images/b15c1a77b3410dabbbfc4238a58c00c1.png)

IE7 和 IE8

![在此处输入图像描述](../Images/78a9cf568177c2b5468f0d342245d15b.png)

我发现有人说它应该与“selectivizr.js”一起使用更详细的儿子这个网站“ [http://selectivizr.com/](http://selectivizr.com/) ”

我按照他们的指示做了：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<!--[if (gte IE 6)&(lte IE 8)]>
  <script type="text/javascript" src="selectivizr.js"></script>
  <noscript><link rel="stylesheet" href="[fallback css]" /></noscript>
<![endif]--> 
```

这并没有解决问题。

如果有人想尝试一下，我创建了这个小提琴！[http://jsfiddle.net/6mUWk/](http://jsfiddle.net/6mUWk/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:10:41.297

IE`:checked`从版本**9**开始支持伪类。使用 JavaScript 跟踪检查字段的状态并将样式应用于常规类。

或者，在旧的 IE7/8 中使用常规表单控件时，仅对 IE9+ 使用自定义表单控件。例如，可以使用[条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)来实现 IE 版本的这种分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:57:08.243

感谢所有尝试过的人！

然而，到目前为止，我想最好的解决方案只是在 jQuery 的帮助下：

[https://code.google.com/p/jquery-checkbox/](https://code.google.com/p/jquery-checkbox/)

它简单干净！

我测试了它，它支持我需要的所有浏览器！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T19:08:13.590

凯文的评论是正确的。SELECT、RADIO 和 CHECKBOX 的行为不像标准的 HTML 元素，而是依赖于平台。XP 上的复选框与 Win7 或 MACOS 上的复选框不同。

您可能需要考虑使用隐藏的表单字段并使用基于 JavaScript 的替换来完成您想要做的事情。

基于：[jquery select checkbox by div](https://stackoverflow.com/questions/1827617/jquery-select-checkbox-by-div)

```
$(function() {
     $('.someWrapper').toggle(
       function(event) {
         $(this).find('input').prop('checked', true);
       },
       function(event) {
         $(this).find('input').prop('checked', false);
       }
     );
 }); 
```

# ruby-on-rails - RMagick 丢失了我试图打开的文件路径的前 8 个字符

> ID：15532379
> 
> 赞同：1
> 
> 时间：2013-03-20T18:57:47.357
> 
> 标签：ruby-on-rails, ruby, imagemagick, rmagick

我在我的 Ruby on Rails 应用程序中使用带有 RMagick 的 Carrierwave。在开发中一切正常，但在我的暂存环境中，我遇到了一些问题。

我将其追踪到 RMagick 似乎存在问题，丢失了传递给它的部分文件路径。这是我的 rails 控制台的一些输出

```
require 'RMagick'
=> true
# Prove the file exists
File.open('/tmp/logo.png')
=> #<File:/tmp/logo.png> 
# Cant find it with RMagick
Magick::Image::read('/tmp/logo.png').first
=> Magick::ImageMagickError: unable to open file `o.png' @ error/png.c/ReadPNGImage/3698
# Unless I add some characters at the start of my filepath (anything will do)
Magick::Image::read('12345678/tmp/logo.png').first
=>  0x200=>200x100 4634766966517661696x200+100+0 DirectClass 8-bit 6kb 
```

我曾尝试深入研究 RMagick 的源代码，但没有取得多大成功。我希望有人可以建议可能出了什么问题。

我曾尝试重新编译 ImageMagick 并多次重新部署代码。
我们使用 rvm、Ruby 1.9.2、Rails 3.2.11 并使用 Capistrano 进行部署。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:37:45.617

我的同事找到了解决方案 -

这是重新安装 rmagick gem。

# internet-explorer - Fineuploader jpg 在 IE 中不起作用

> ID：15532383
> 
> 赞同：0
> 
> 时间：2013-03-20T18:57:59.867
> 
> 标签：internet-explorer, jpeg, fine-uploader

我无法在 IE 中使用 Fineuploader 上传图片。在 chorme 和 FireFox 中工作。

知道为什么在 IE 中上传 jpg 不起作用。我注意到 chrome 请求对象上下文类型是“application/octet-stream”，而 IE 不是。如果是这样的话，这是问题吗？我要改变什么来让fineuploader在请求中使用这个上下文类型。

谢谢 // 设置上传器。if (document.getElementById('formUpload')) { var description = ""; var 文件名 = ""; var fileUploader = new qq.FileUploader({

```
 allowedExtensions: viewModel.AllowedFileExt(),
            element: document.getElementById('formUpload'),
            action: '../Upload/UploadHandler.ashx',
            params: {
                submissionNumber: function () {
                    submissionNumber = $("#SubmissionNumber").val();
                    return submissionNumber;
                },
                fileName: function () {
                    fileName = $(".qq-upload-file").text();
                    return fileName;
                },
                description: function () {
                    description = $("#txtAttachmentDesciption").val();
                    return description;
                }
            },
            onComplete: function (id, fileName, responseJSON) {
                $("#attachedFiles").html("");
                loadAttachments($("#Number").val());
            },
            onSubmit: function (id, fileName) {
                fileUploader.filesSelectedForUpload = 1;

            },
            autoUpload: false,
            multiple: false
        });
        fileUploader.filesSelectedForUpload = 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:53:54.977

问题出在服务器端。在 IE 中使用 "context.Request.Files["qqfile"].InputStream" 而不是 context.Request.InputStream

```
//if IE
var buffer = new byte[context.Request.ContentLength];
            using (var br = new BinaryReader(context.Request.Files["qqfile"].InputStream))
                br.Read(buffer, 0, buffer.Length);
//ELSE

var buffer = new byte[context.Request.ContentLength];
            using (var br = new BinaryReader(context.Request.InputStream))
                br.Read(buffer, 0, buffer.Length); 
```

# matlab - 从 FFT 恢复相位

> ID：15532384
> 
> 赞同：0
> 
> 时间：2013-03-20T18:58:04.907
> 
> 标签：matlab, signal-processing, fft, trigonometry, phase

我正在尝试在 matlab 中恢复简单（音频）信号的相位：在 matlab 中，我执行以下操作：

```
% This wave is perfectly periodic in the sample.  That is, 
% there are exactly 1000 periods.
swave = sin( 2 * pi * (0:10000) * 441/44100);

% Find the fft
sFFT = fft(swave);
% Remove the duplicate data in the FFT
sFFT = sFFT(1:length(sFFT)/2);

% Take a look a the amplitudes from the FFT and it checks out
freqs = 44100/ 2*linspace(0,1,length(sFFT);
plot(freqs, abs(sFFT));

% Now to get the phase
plot(freqs, angle(sFFT)); 
```

这个结果对我来说几乎没有意义。因为这是一个 sin 波（不是 cos 波）。对于 441hz bin 的值，我希望看到 1/2*pi = 1.57079。相反，我看到从 (441, -1.53​​9) 到 (445, 1.603) 的几乎不连续的跳跃。为什么 441 与正确值相差甚远？为什么445这么近？

除了 441 赫兹之外，所有分档的值对我来说都是一个谜。我还尝试了其他几种恢复相位的方法，包括 unwrap(angle(sFFT)) 和 atan2(imag(sFFT), real(sFFT)); 这些改变了输出，但对我来说也没有任何意义。为什么除了 441 之外的 bin 是除 0 之外的任何值（如 abs(FFT) 所示？）。为什么 441 bin 关闭但不是正确的值？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:38:05.677

为了更好地估计相位，通过执行 fftshift 将 0 相位参考更改为窗口中心，这应该消除大多数交替相位不连续性，然后进行插值，但请注意您已经更改了 0 点。

请注意，在大多数情况下，长度为零的向量的相位是没有意义的，因此由于有限精度数学，任何接近的东西都可能只是数字噪声（各种随机方向上的零向量附近）。

因此，对于低于某个本底噪声的任何幅度，有些人只是将绘制的相位钳位为零。

# wcf - 无法从 WCF 服务接收 SOAP 错误

> ID：15532385
> 
> 赞同：0
> 
> 时间：2013-03-20T18:58:05.253
> 
> 标签：wcf, biztalk, fault

我正在尝试从 BizTalk 向 .NET 客户端发送一个肥皂故障。BizTalk 没有现成的公开故障合同的方式，因此我在 messageinspector (BeforeSendReply) 中创建故障消息

我有一个 .NET 客户端，它具有对 BizTalk 的服务引用，而对故障合同一无所知。BizTalk WCF 服务配置为接收请求并返回错误（用于测试）。

当客户端收到来自 BizTalk 的故障时，我得到：“服务器没有提供有意义的回复；这可能是由合同不匹配、会话过早关闭或内部服务器错误引起的。”

当我打开消息跟踪时，我可以确定确实在传输级别跟踪了故障消息。

```
 <s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
     <s:Header>
       <a:To s:mustUnderstand="1">http://www.w3.org/2005/08/addressing/anonymous</a:To>
     </s:Header>
     <s:Body>
      <s:Fault>
        <s:Code>
          <s:Value>s:Client</s:Value>
        </s:Code>
      <s:Reason>
     <s:Text xml:lang="en-US">BTSError</s:Text>
     </s:Reason>
     <s:Detail><DaxFaultContract xmlns="http://MyNamespace">
  <ErrorCode>1</ErrorCode>
  <ErrorText>This is an exception</ErrorText>
</DaxFaultContract></s:Detail>
</s:Fault>
</s:Body>
</s:Envelope> 
```

我想，即使对 DaxFaultContract 没有任何了解，客户端也能够抛出无类型的 FaultException。

我错过了什么？

编辑：

这实际上适用于 WSHttpBinding。使用网络命名管道绑定时会出现此问题。在这种情况下有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:47:48.597

问题是肥皂标题“RelatesTo”没有传递给我的错误消息，所以当客户端收到错误消息时，它不知道如何处理它。我猜 WSHttpBinding 不像 NetNamedPipeBinding 那样使用 RelatesTo 标头？

# android - 当键盘出现时如何滚动我的整个布局？

> ID：15532389
> 
> 赞同：2
> 
> 时间：2013-03-20T18:58:16.360
> 
> 标签：android, android-edittext, android-softkeyboard

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroll_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="@dimen/defaut_padding" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="@dimen/defaut_padding"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@+id/photo"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/picture"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:scaleType="fitXY" />

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_margin="10dp"
                android:background="@drawable/watermark" />

            <ProgressBar
                android:id="@+id/bitmap_loading"
                style="?android:attr/progressBarStyleLarge"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:visibility="visible" />
        </FrameLayout>

        <FrameLayout
            android:id="@+id/user"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/photo"
            android:layout_marginLeft="15dp"
            android:layout_marginTop="-30dp"
            android:background="@android:color/white"
            android:padding="@dimen/smallest_padding" >

            <ImageView
                android:id="@+id/user_picture"
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:src="@drawable/anonymous_user" />
        </FrameLayout>

        <TextView
            android:id="@+id/user_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@id/user"
            android:layout_marginLeft="@dimen/defaut_padding"
            android:layout_toRightOf="@id/user"
            android:text="@string/anonymous_user"
            android:textStyle="bold" />
    </RelativeLayout>

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
<EditText
    android:id="@+id/input_description"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="top"
    android:padding="5dp"
    android:layout_marginBottom="@dimen/defaut_padding"
    android:background="@drawable/textfield"
    android:hint="@string/description_hint"
    android:focusableInTouchMode="true"
    android:maxLines="3"
    android:scrollbars="vertical" />

<Button
    android:id="@+id/publish"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/confirm_button_selector"
    android:text="@string/confirm_button"
    android:textColor="@android:color/white"
    android:textSize="@dimen/big_text_size"
    android:textStyle="bold" />

    </FrameLayout>
</LinearLayout>

</ScrollView> 
```

当我开始在 EditText 上输入数字时，我想在出现软键盘时滚动它。我怎样才能做到这一点？当前滚动有效，但键盘出现在按钮上方，我想要键盘上方的按钮

当用户单击 EditText 时，我尝试移动 scrool，执行以下操作：

```
mSv.scrollTo(0, mSv.getBottom()); 
```

其中 mSv 是我的 ScrollView

但它仅在用户第二次单击 EditText 时才有效。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-17T13:11:18.180

尝试将您的键盘更改为平移而不是调整大小。您可以在您的**AndroidManifest.xml**文件中执行此操作，对于您的特定`Activity`，将以下内容添加到其中

```
android:windowSoftInputMode="adjustPan" 
```

**或者**

**如果你想隐藏然后：**

```
EditText editTextSearch = (EditText) findViewById(R.id.editTextSearch);

InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(editTextSearch.getWindowToken(), 0); 
```

**如果要显示：**

```
EditText editTextSearch = (EditText) findViewById(R.id.editTextSearch);
editTextSearch.requestFocus();
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:31:42.033

如果您使用与底部对齐的`RelativeLayout`(outside of `ScrollView`)，它将粘在可用屏幕的底部——在键盘上方。`ScrollView`然后需要一个底部边距才能不覆盖按钮。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"   
    android:layout_width="match_parent"
    android:layout_height="match_parent" >  

    <ScrollView      
        android:layout_height="match_parent"
        android:layout_width="match_parent"    
        android:orientation="vertical"      
        android:layout_marginBottom="48dp" >    

        /* Here your elements ... like EditText */

    </ScrollView>   

    <RelativeLayout
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:orientation="vertical" 
         android:layout_marginBottom="0px"
         android:layout_alignParentBottom="true" > 

        <Button      
         android:layout_width="fill_parent"  
         android:layout_height="48dp"
         android:text="ddd" />        

    </RelativeLayout>
</RelativeLayout> 
```

仅当您（据我评估）时才有效

*   有一个`RelativeLayout`作为父母
*   除了包含按钮之外，还有一个`ScrollView`作为唯一的孩子或有另一个包含某个地方的视图（例如）（无论出于何种原因）`RelativeLayout``LinearLayout``ScrollView`

如果您不希望按钮始终粘在底部，则需要按照 Pragnani 的链接中的说明检测键盘是否显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-01T19:40:23.427

检查这个[SO 答案](https://stackoverflow.com/a/47048436/1972597)。它应该解决问题*“..按钮将出现在整个布局上，我想要做的是使整个布局（按钮和其他视图滚动）”*

# mysql - 对“键值”表进行查询和排序

> ID：15532391
> 
> 赞同：3
> 
> 时间：2013-03-20T18:58:17.843
> 
> 标签：mysql, sql, pivot, entity-attribute-value

我有一个问题，我的 SQL 太基础了，无法克服它。
我有两张桌子：

**表格1**

*   id (int) - *(主键)*
*   电子邮件（字符）
*   其他领域...

**表2**

*   id (int) - *（这不是主键也不是唯一的。这是相对于 的外键`TABLE1.id`）*
*   键（字符）
*   值（字符）
*   其他领域...

第二个表具有“键值”结构。

对于每一个我都有“`TABLE1.id`很多”行`TABLE2`。`TABLE1.id == TABLE2.id`特别是我可以有以下情况：

**TABLE1 中的一行**

```
id = 10, email = "albert.einstein@genius.com", (other fields omitted)... 
```

**TABLE2 中的对应行**

```
id = 10, key = "first_name", value = "Albert", (other fields omitted)...
id = 10, key = "last_name", value = "Einstein", (other fields omitted)... 
```

我想编写一个能够返回`TABLE3`具有以下结构的表的 SQL 查询：

**表3**

*   标识（整数）
*   名字（字符）
*   姓氏（字符）
*   电子邮件（字符）

`TABLE3`应该包含每一行出现的行，并且`TABLE1`应该由`last_name`和排序`first_name`

按照该示例，我应该获得一个包含与此类似的行的表：

```
id = 10, first_name = "Albert", last_name = "Einstein", email = "albert.einstein@genius.com" 
```

我要疯了！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:03:29.040

您需要将这些键值对转换为列，不幸的是，MySQL 没有数据透视表运算符*。*但是您可以使用`CASE`表达式来执行此操作：

```
SELECT
  t1.id,
  MAX(CASE WHEN t2.key = 'first_name' THEN value END) AS first_name,
  MAX(CASE WHEN t2.key = 'last_name' THEN value END) AS last_name,
  t1.email
FROM table1 AS t1 
INNER JOIN table2 AS t2 ON t1.id = t2.id
GROUP BY t1.id,
         t1.email; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/29725/2)

* * *

如果您想动态地执行此操作而不是手动编写所有这些值，则必须使用动态 SQL 来执行此操作：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(t2.key = ''',
      t2.key, ''', t2.value, 0)) AS ', '''',   t2.key, '''')
  ) INTO @sql
FROM table2 AS t2;

SET @sql = CONCAT('
  SELECT
    t1.id,', @sql, ',
    t1.email
  FROM table1 AS t1 
  INNER JOIN table2 AS t2 ON t1.id = t2.id
  GROUP BY t1.id, t1.email');

prepare stmt 
FROM @sql;

execute stmt; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/29725/4)

# sql - 如何从一小时中减去一分钟

> ID：15532394
> 
> 赞同：-1
> 
> 时间：2013-03-20T18:58:30.027
> 
> 标签：sql

我有一个查询包含从时间到时间的参数。我需要从 totime 参数中减去 1 分钟。我用过totime-1。它在数据库级别工作，但在我的水晶报告中不起作用。我的意思是它在报告级别减去 1 小时。谁能告诉我其他减去一分钟的公式。

谢谢，维苏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:01:16.280

如果您使用的是 SQL Serve/T-sql

```
 DATEADD(MI, -1, totime) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:06:01.943

在某些数据库（例如 SQL Server 和 Oracle）中，您可以执行以下操作：

```
select totime - 1.0/(24*60) 
```

时间差以天为单位，因此 1.0/(24*60) 是一分钟，表示为一天的一小部分。

MySQL 接受语法，但时间戳以秒而不是天为单位，因此您可以使用：

```
select totime - 60 
```

# windows - 如何在物理内存之前填充 Windows 页面文件？

> ID：15532397
> 
> 赞同：0
> 
> 时间：2013-03-20T18:58:44.440
> 
> 标签：windows, virtual-memory

[Windows Server 2003 Resource Toolkit](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=17657)`consume.exe`附带了一个实用程序，可用于最大化 CPU 利用率，或填充物理内存或磁盘空间，甚至填充页面文件。在页面文件模式下运行时，此工具似乎不会首先消耗物理内存（空闲字节没有变化）

如果我要实现一个类似的工具，我将如何在用完物理内存之前使用页面文件？（假设我正在使用 C#/.net）

# jquery - 基于用户代理的jquery datepicker国际化

> ID：15532398
> 
> 赞同：1
> 
> 时间：2013-03-20T18:58:45.033
> 
> 标签：jquery, datepicker

我在使用 jQuerydatepicker 时遇到问题。我很确定，这肯定很容易解决。但我对 JavaScript 和 jQuery 了解不多。所以我在寻求帮助！事情是这样的：我有一个具有`data-datepickerlang`属性的表单（我将其设置为用户代理语言）。

```
<input class="hasDatepicker" data-datepicker="True" data-datepickerlang="es" data-val="true" ... 
```

到目前为止，我的 JavaScript 函数如下所示：

```
$(":input[data-datepicker]").datepicker({
    changeMonth: true,
    changeYear: true
}); 
```

它显示日期选择器，但始终采用英文格式。如何从 中获取“es” `data-datepickerlang`，并告诉 datepicker 格式化日期，如 dd/mm/yyyy ？谢谢！

编辑：我还需要它能够以英文格式显示`mm/dd/yyyy`。取决于浏览器的语言环境。那'es'值我从剃刀那里得到的

```
(@{ var x = HttpContext.Current.Request.UserLanguages[0].Substring(0, 2);} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:05:16.797

它们是 jquery datepicker 中的本地化选项 此代码示例来自 jquery ui Dochttp://jqueryui.com/datepicker/#localization

```
 $(function() {
var regional = $(":input[data-datepicker]");
        $( "#datepicker" ).datepicker( $.datepicker.regional[regional.attr('data-datepickerlang')]);
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:25:26.047

我终于以这种方式解决了：

```
$(function() {

var regional = $(":input[data-datepicker]").attr("data-datepickerlang");
$.datepicker.setDefaults($.datepicker.regional[regional]);
$(":input[data-datepicker]").datepicker({

    changeMonth: true,
    changeYear: true
}, $.datepicker.regional[regional.valueOf()]);

}
) 
```

这基本上就是 darkSlayer 告诉我要做的。但不知道为什么它不起作用。谢谢！

# tfs - git-tfs 一次签入多个 tfs 项目

> ID：15532399
> 
> 赞同：1
> 
> 时间：2013-03-20T18:58:51.050
> 
> 标签：tfs, git-tfs, git-tf

在我的工作中，我们有许多单独的 TFS 项目，它们组合在一起形成了我们的 Visual Studio 解决方案。维护这些单独的 TFS 项目，以便我们可以跨多个解决方案重用代码。诚然，这是一个坏主意，因为现在当我们必须分支时，我们必须单独分支每个 TFS 项目（我们甚至编写了一个应用程序来执行此操作）。我们最终得到一个如下所示的项目结构：

```
$/Production/[superproject]/MAIN
$/Production/[superproject]/dev/[branch]
$/Production/[dependency1]/MAIN
$/Production/[dependency1]/dev/[branch/ 
```

其中 [superproject] 在解决方案中需要 [dependency1]。我们最终将所有这些项目映射到同一个工作区。

我想使用 Git-TFS 以便在我的日常开发中使用 Git。到目前为止，我发现做到这一点的最好方法是为每个 TFS 项目拥有一个带有子模块的“主”git repo。这样我可以使用`git submodule foreach`.

不幸的是，我们关于签入的政策是为一项任务设置一个变更集，即使该变更集跨越多个 TFS 项目。如果我的所有更改都被限制在一个 TFS 项目（即一个 git 子模块）中，这很好，但是当我为一项任务跨多个子模块进行更改时，我不知道该怎么做。我目前的计划是搁置每个人使用`git submodule foreach 'git-tfs shelve mytask_$name'`，然后将每个人拉入我的 TFS 工作区，从那里签入。这仅适用于我已经映射的任何 TFS 分支，这首先破坏了使用 Git 的一半目的。

有没有人遇到过类似的问题？是否已经有任何解决方案，可能使用 TFS 命令行和脚本？如果没有，我想我会花一些时间为 git-tfs 创建一个拉取请求。如果问题在那里解决，我愿意使用 Git-TF。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:45:37.867

我认为这里有这样的努力：[https](https://github.com/git-tfs/git-tfs/pull/350) ://github.com/git-tfs/git-tfs/pull/350 你可以看看并做出贡献；）

# java - 如何在 JLabel 中显示变量值

> ID：15532401
> 
> 赞同：3
> 
> 时间：2013-03-20T18:58:51.583
> 
> 标签：java, swing, jframe, jlabel

我是 Java 编程新手。我想在输出窗口而不是控制台视图中显示我的变量的值。代码如下：

```
import java.awt.BorderLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingConstants;

public class ShowAFrame {

    public static void main(String[] args) {

        // Variables in this code
        int one = 12;
        int two = 22;
        int total = one + two;
        System.out.println(total);

        JFrame myFrame = new JFrame("Test GUI");
        myFrame.setVisible(true);
        myFrame.setBounds(300, 200, 700, 400);
        JLabel myText = new JLabel("I'm a label in the window",
                SwingConstants.CENTER);
        myFrame.getContentPane().add(myText, BorderLayout.CENTER);

    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T19:03:13.840

像这样做 ：

```
label.setText(String.valueOf(variable)); 
```

变量可以是 int、float、double、long。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T19:02:26.350

只需将总（您的结果变量）值传递给 JLabel 构造函数。

```
JLabel myText = new JLabel("I'm a label in the window, output : "+total,
        SwingConstants.CENTER); 
```

# c - 声明中的第一个“节点”的目的是什么：“typedef struct node { - - - } Node;”？

> ID：15532403
> 
> 赞同：11
> 
> 时间：2013-03-20T18:58:56.023
> 
> 标签：c

我正在研究教授的代码示例，以便更好地熟悉链接的数据结构。

在我们的linked-list.c 示例中，教授定义了一个类型节点，如下所示：

```
typedef struct node {
  int data;
  struct node *next;
} Node; 
```

小写**节点**有什么意义？我的印象是你可以写，例如：

```
typedef struct {
  int data;
  struct node *next;
} Node; 
```

然后使用 Node 作为自己的类型。这是否与以下事实有关：如果您不包含小写节点，那么当编译器评估代码时，它将无法理解“struct node *next”的含义？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T19:04:14.230

看看这个声明：

```
struct node {
  int data;
  struct node *next;
};

typedef struct node Node; 
```

这可以组合成一个语句（简化声明）：

```
typedef struct node {
  int data;
  struct node *next;
} Node; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-20T19:20:30.650

> 这是否与以下事实有关：如果您不包含小写字母`node`，那么当编译器评估代码时，它将无法理解“ `struct node *next`”的含义？

是的。

`node`in`struct node`是结构类型的*标记*。如果你给结构一个标签，你可以从标签完成的那一刻起引用那个类型，所以在

```
typedef struct node {
  int data;
  struct node *next;
} Node; 
```

`struct node *next;`声明了一个成员，该成员`next`是指向正在定义的结构类型的指针。在达到定义的结尾之前， typedef 名称`Node`不可用。`;`

如果省略标记，则无法在`typedef`完成之前以任何方式引用正在定义的类型，因此在

```
typedef struct {
  int data;
  struct node *next;
} Node; 
```

该行用指向的标签声明`struct node *next;`了一个新的、不相关的、不完整的类型。`struct``node``next`

这是有效的，但一无所知`struct node`（除非它在其他地方定义），所以你不能使用`next`指针而不将它转换为指向任何地方的完整类型的指针（不是到处都是，`Node foo; foo.next = malloc(12);`等等仍然可以工作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T19:06:42.567

他正在为节点定义一个*临时*名称，因为他使用了一种众所周知的技术来避免写`struct node`在每个结构对象的声明上。

如果他只是这样做：

```
struct node {
  int data;
  struct node *next;
}; 
```

您将不得不使用：

```
struct node* node; 
```

声明一个新节点。为了避免这种情况，您必须稍后定义：

```
typedef struct node Node; 
```

为了能够声明如下对象：

```
Node* node; 
```

到底：

```
typedef struct node {
  int data;
  struct node *next;
} Node; 
```

只是一个快捷`struct node { ... };`方式`typedef struct node Node;`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T20:18:24.700

小写的“节点”是一种结构类型......即结构节点{东西}是一个包含东西的节点结构。

另一方面，大写的“节点”是一种全新的数据类型，它指的是“结构节点”

通常（尽管在 C++ 中我认为可以），您不能在 C 程序中传递“节点”……例如作为函数的参数。相反，你必须传递一个“结构节点”作为你的论点......

```
// this will throw a syntax error because "node" is not a data type, 
// it's a structure type.

void myFunc( node* arg ); 

// while this will not because we're telling the compiler we're 
// passing a struct of node

void myFunc( struct node* arg ); 

// On the other hand, you *can* use the typedef shorthand to declare 
// passing a pointer to a custom data type that has been defined 
// as 'struct node'

void myFunc( Node* arg ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T19:11:53.077

这`struct node`是一种类型`int`

因此

```
struct node {
  int data;
  struct node *next;
}NodeVar; 
```

表示您正在声明结构节点的单个变量节点。

喜欢`int intVar;`

typedef 是为了使您的代码易于理解。

这样当你使用

```
typedef struct node Node; 
```

您可以使用相同的声明

```
Node NodeVar; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T19:20:16.443

考虑这段代码：

```
#include <stdio.h>

typedef struct {
   int data;
   struct node *next;
} Node;

int main()
{
   Node a, b = {10, NULL};
   a.next = &b;

   printf("%d\n", a.next->data);
} 
```

这不会编译。编译器不知道 a`struct node`是什么，除了它存在。因此，您可以将结构中的定义更改为`Node *next;`. typedef 在声明之前不在范围内，因此它仍然无法编译。简单的答案是按照他说的做，在`node`之后使用标签`struct`，它工作正常。

# android - 自定义 AdapterView - onKeyDown 未调用

> ID：15532404
> 
> 赞同：1
> 
> 时间：2013-03-20T18:58:58.653
> 
> 标签：android

我`ListView`通过扩展创建了一个自定义`AdapterView`，我想在这个视图中处理关键事件。我已经覆盖`onKeyDown`了，但从来没有看到它被调用过。我什至尝试过覆盖`dispatchKeyEvent`，但也从未被调用过。我还使用`setFocusable(true)`.

另外，我对哪个视图实际上确实有焦点感到有些困惑。在 HierarchyView 中，树中的每个视图都表示 hasFocus = false。

如何在我的视图中接收关键事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:53:16.423

看起来我可以在这里回答我自己的问题。

看一下`AdapterView`，您可以看到它使用以下实现覆盖了 setFocusable：

```
 @Override
    public void setFocusable(boolean focusable) {
        final T adapter = getAdapter();
        final boolean empty = adapter == null || adapter.getCount() == 0;

        mDesiredFocusableState = focusable;
        if (!focusable) {
            mDesiredFocusableInTouchModeState = false;
        }

        super.setFocusable(focusable && (!empty || isInFilterMode()));
    } 
```

正如您从那里对 super.setFocusable 的最终调用中看到的那样，如果适配器还没有绑定数据（这意味着适配器为 null 或 <= 0），则视图将无法聚焦。

因此，要解决此问题，只需`setFocusable(true)`在实施结束时添加`setAdapter()`。

# map - 为什么我的 D3 缩放变换没有正确居中？

> ID：15532405
> 
> 赞同：3
> 
> 时间：2013-03-20T18:58:58.903
> 
> 标签：map, d3.js, zooming, scale, translate

[我正在将我的地图升级到 D3 的 v3 并使用此处](http://bl.ocks.org/mbostock/2206590)找到的 D3 示例代码中概述的单击缩放转换。

我的代码几乎相同，只是我的地图尺寸稍小（564 x 300 而不是 960 x 500）。此外，我的地图嵌套在一个 div 中并位于页面的左上角（尽管我认为这并不重要）

我的地图加载的初始加载很好（目前使用黑色背景进行区分）

```
// Clear existing map in case there is remnant data.
$("#map").html(null);

var mapWidth = 564;
var mapHeight = 300;

var projection = d3.geo.albersUsa()
                          .scale(mapWidth)
                          .translate([0, 0]);   

var path = d3.geo.path()
                 .projection(projection);

var svg = d3.select("#map")
               .append("svg")
               .attr("id", "map-svg")
               .attr("width", mapWidth)
               .attr("height", mapHeight);

   svg.append("rect")
    .attr("id", "map-background")
    .attr("class", "background")
    .attr("width", mapWidth)
    .attr("height", mapHeight)
    .on("click", click);

   // Create placeholders for shapes and labels
   var states = svg.append("g")
                   .attr("transform", "translate(" + mapWidth / 2 + "," + mapHeight / 2 + ")")
                   .attr("id", "states"); 
```

![在此处输入图像描述](../Images/d36efea1ca1a540eaf2a7d58dccf139d.png)

但是，当单击状态并运行单击功能时，我的转换似乎已关闭。在我的例子中，点击了阿肯色州（用蓝色阴影表示）

```
function click(d)
{
   var x = 0,
       y = 0,
       k = 1;

   if (d && centered !== d)
   {
      var centroid = path.centroid(d);
      x = -centroid[0];
      y = -centroid[1];
      k = 4;
      centered = d;      
   }
   else
   {
      centered = null;
   }

   d3.select("#states").selectAll("path")
       .classed("active", centered && function (d) { return d === centered; });

   d3.select("#states").transition()
       .duration(1000)
       .attr("transform", "scale(" + k + ")translate(" + x + "," + y + ")")
       .style("stroke-width", 1.5 / k + "px");
} 
```

![在此处输入图像描述](../Images/453abf68e9f31c40edd15e86c8d16ecf.png)

我唯一的想法是我的质心计算需要针对地图的较小尺寸或不同位置进行轻微调整，但这似乎也不正确。

如何进行适当的调整？

编辑：我发现如果我在变换的末尾添加一个“负平移” (translate(" + -x + "," + -y + ")) ，它会更接近正确地以缩放为中心，但不是完美

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T01:48:41.667

您缺少[示例](http://bl.ocks.org/mbostock/2206590)中的两个转换之一；但请继续阅读以获得更简单的解决方案。

您使用的示例有两个嵌套转换。首先，对外部 G 元素进行静态变换：

```
var g = svg.append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
  .append("g")
    .attr("id", "states"); 
```

此转换的目的与通常的[projection.translate](https://github.com/mbostock/d3/wiki/Geo-Projections#wiki-translate)相同，但示例使用的是 translate([0, 0])。（正如我所说，会有一个更简单的解决方案......）

第二个变换是在*内部*G 上动态设置的（id 为“states”）以放大：

```
g.transition()
    .attr("transform", "scale(" + k + ")translate(" + x + "," + y + ")"); 
```

请注意，`var g`这里指的是内部 G 元素，因为在`g`定义时，有一个`append("g")`与第二个链接的`append("g")`; 因此，变量被定义为第二个内部 G，而不是第一个外部 G。

生成的 SVG 如下所示：

```
<g transform="translate(480,250)">
  <g id="states" transform="translate(75.746,-439.514)scale(4,4)">
    …
  </g>
</g> 
```

您的推导缺少嵌套的内部 G。因此，当您在 #states G 元素上设置“transform”属性时，您将覆盖外部转换，从而为您提供：

```
<g id="states" transform="scale(4)translate(18.936679862557288,-109.8787070159044)">
  …
</g> 
```

因此，您缺少静态转换“translate(480,250)”。

我建议将这些转换组合在一起。那么你就不需要外部G了，你可以：

```
g.transition()
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")"
        + "scale(" + k + ")"
        + "translate(" + x + "," + y + ")"); 
```

这也消除了将投影的平移设置为 [0, 0] 的需要，因此您可以改用标准平移 [width / 2, height / 2]。我已经[更新了这个例子](http://bl.ocks.org/mbostock/2206590)来做到这一点！

# javascript - 在谷歌浏览器的 div 中加载 html 页面

> ID：15532407
> 
> 赞同：0
> 
> 时间：2013-03-20T18:59:07.560
> 
> 标签：javascript, jquery, html, css, ajax

下面是2个html页面，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Commision </title>
<script type="text/javascript" src="JS/jquery-1.9.1.min.js"></script>

<script type="text/javascript">

function loadpage(x)
{
    $('#centre').empty().load(x, function () {
    window.alert('Request complete');
});
}

</script>

<style type="text/css">
<!--
#main {
    position:absolute;
    left:0px;
    top:0px;
    width:100%;
    height:100%;
    z-index:1;
}
#header {
    position:absolute;
    left:0px;
    top:0px;
    background:url(Images/header1.png);
  -moz-background-size: auto, cover; /* Firefox 3.6 */ 
    background-size: auto, cover; /* Chrome, Firefox 4.0+, Safari 4.1+, Opera 10+ and IE9 */
    width:100%;
    height:14%;
    overflow: hidden;

    z-index:250;
}
#centre {
    position:absolute;
    left:0px;
    top:14%;
    width:100%;
    height:82%;
    z-index:240;
}
#smoothmenu1 {
    position:absolute;
    right:0px;
    width:40%;
    bottom:0px;
    height:26px;
        overflow: hidden;

    z-index:220;
}
#footer {
    position:absolute;
    left:0px;
    bottom:0px;
    width:100%;
    height:4%;
        overflow: hidden;

    z-index:2;
}

.com {
    font-family:Arial, Helvetica, sans-serif;
font-size:12px; 
}
#cntr {
    position:absolute;
    left:0px;
    top:-1px;
    width:100%;
    height:100%;
    z-index:50;
}
#insideCentre {
    position:absolute;
    left:0px;
    top:10%;
    width:100%;
    height:90%;
    z-index:12;
}
#initProfile {
    position:absolute;
    left:0px;
    top:0px;
    width:70%;
-moz-border-radius:12px;
-webkit-border-radius:12px;
border-radius:14px;
    height:100%;
    z-index:14;
}
.aFont
{
    font-family:Arial, Helvetica, sans-serif;
    font-weight:bold;
    font-size:20px;
    color:#FFF;
    padding-top: 2px;
}

#aboutMSL {
    position:absolute;
    left:0px;
    top:0px;
    width:100%;
    height:10%;
-moz-border-radius:12px;
-webkit-border-radius:12px;
border-radius:12px; 
background:url(Images/gclip.png);
    overflow: hidden;

    z-index:18;
}
#aboutBody {
    position:absolute;
    left:0px;
    top:14%;
    width:100%;
    height:86%;
border-right-color:#666;
    border-left-style:dotted;
        overflow: hidden;

    border-left-width:thin; z-index:23;
}
#tech {
    position:absolute;
top :50%;
right:0px;
-moz-border-radius:12px;
-webkit-border-radius:12px;
border-radius:12px; width:30%;
    height:30%;
    z-index:19;
}
#tech_header {
    position:absolute;
    left:0px;
    top:0px;
    width:100%;
    height:30%;
-moz-border-radius:12px;
-webkit-border-radius:12px;
border-radius:12px;
    background:url(Images/gclip.png);
    overflow: hidden;

    z-index:20;
}
#tech_body {
    position:absolute;
    left:0px;
bottom:10%;
width:100%;
    height:50%;
    z-index:21;
        overflow: hidden;

}
.sFont {
    font-family:Verdana, Geneva, sans-serif;
    font-size:12px;
}
#sShow {
    position:absolute;
    top:0px;
    right:0px;
    width:30%;
    height:40%;
    z-index:51;
}
-->
</style>
</head>
<body>
<div id="main">
<div id="header">
<div id="smoothmenu1" class="ddsmoothmenu">
<ul>
<li><a href="#"  onclick="loadpage('a.html')">A</a></li>
<li><a href="#" onClick="loadpage('c.html')">S</a></li>
<li><a href="#" onclick="loadpage('v.html')">C</a></li>
<li><a href="#">Commx</a></li>
<li><a href="#" onclick="loadpage('b.html')">V</a></li>
</ul>
<br style="clear: left" />
</div>
</div>
<div id="centre">

</div>

<div id="footer" align="center" class="com" >Commision</div>
</div>
</body>
</html> 
```

和

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Untitled Document</title>

<style type="text/css">
#top {
    position:absolute;
    left:0px;
    top:0px;
    width:100%;
    height:10%;

            background:url(Images/gclip.png);

    z-index:3;
}
#c1  {
    position:absolute;
    left:0px;
    top:0px;
    width:100%;
    height:25px;
overflow:hidden;
margin-top:25px;
    z-index:5;
            border-bottom: 0.5px solid #778;

}

</style>

</head>

<body>
<div id="PCentre">
<div id="c1">Column 1</div>
<div id="Pbody"></div>

</div>

</body>
</html> 
```

我正在尝试使用查询将第二个 html 页面加载到第一个 html 页面的中心 div 中，该应用程序在 Firefox 中运行良好，但在 chrome 中无法正常工作，在 chrome 中，第 2 页中的 div 元素没有像我运行它时那样放置Firefox 中的应用程序（我尝试从 localhost/127.0.0.1 运行应用程序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:46:10.570

@shnisaka 的评论是正确的 - 您正在尝试将完整页面、doctype 和所有内容加载到另一个页面中，这本质上表明您正在尝试将独立页面加载到另一个独立页面中。要做到这一点，同时保持每个页面的独立性，唯一的方法是使用 iFrame。如果这不是您的意图，您可能需要重新考虑您的 IA。

如果您的目标是简单地提取文档的某些特定部分，例如正文和样式表，那么最佳实践是提取这些节点/元素并插入它们。但是，这也会将您的页面打开到可能存在冲突的样式表和/或脚本。

这个问题可以通过代码解决方案按原样解决，但我强烈建议你看看你在做什么，想想你的目标是什么，并从兼容性、可扩展性和可维护性的角度考虑潜在的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:19:04.957

引用[jQuery API](http://api.jquery.com/load/)：

**加载页面片段**

与 不同，该`.load()`方法`$.get()`允许我们指定要插入的远程文档的一部分。这是通过`url`参数的特殊语法来实现的。如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格之后的部分是确定要加载的内容的 jQuery 选择器。

我们可以修改上面的示例以仅使用获取的文档的一部分：

```
$('#result').load('ajax/test.html #container'); 
```

您需要为`<body>`第二个页面的 提供一个 ID，并在调用中引用此 ID`load`以便将*正文的内容*插入到您的`<div>`中，而不是将整个 HTML 页面插入`<div>`会导致无效 HTML 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:12:09.723

我的建议是在里面加载特定的包装器 div：

```
<ul>
   <li><a href="#"  onclick="loadpage('a.html #PCentre')">A</a></li>
   <li><a href="#" onClick="loadpage('c.html #PCentre')">S</a></li>
   <li><a href="#" onclick="loadpage('v.html #PCentre')">C</a></li>
   <li><a href="#">Commx</a></li>
   <li><a href="#" onclick="loadpage('b.html #PCentre')">V</a></li>
</ul>   //-----------------------------------^^^^^^^^----------this one 
```

# c++ - 数字序列，直到输入为 0（零）

> ID：15532411
> 
> 赞同：-1
> 
> 时间：2013-03-20T18:59:16.053
> 
> 标签：c++, console

我不知道如何制作以下内容。我想输入一个数字序列，当我输入 0 时，停止 cin（就像我单击 Enter 一样）并仅自动计算那些 (number%2==0) 在另一行上的数字。可以用函数来完成吗？我希望你能理解我:)

例如，我输入 123456785435430（我输入了 '0'，所以 cin 立即停止并 cout me 2 4 6 8 4 4 3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:42:45.543

这是一个使用给定分隔符的简单版本，

```
#include <iostream>
using namespace std;

string input_until_delimiter (char delimiter)
{

    string buffer = new string ();

    char c = delimiter;

    while ((c = get()) != delimiter) buffer += c;

    return buffer;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:10:39.380

你需要一些类似的东西：

```
char x;
std::vector<int> evens;
do {
    std::cin.get(x);
    int v = x - '0'; // int value
    if (v % 2 == 0 and v != 0)
        evens.push_back(v);
} while (x != '0');

for (std::vector<int>::iterator it = evens.begin(); it != evens.end(); ++it)
    std::cout << (*it) << " "; 
```

* * *

这是您练习的版本：

```
#include <vector>
#include <iostream>

void brc() {
    int x;
    std::cin >> x;
    if (x == 0) return;
    if (x % 2 == 0)
        std::cout << x << " ";
    brc();
}

int main() {
    brc();
    return 0;
} 
```

# javascript - 不活动时淡出鼠标光标（使用 jQuery）

> ID：15532423
> 
> 赞同：7
> 
> 时间：2013-03-20T18:59:57.397
> 
> 标签：javascript, jquery, css, mouse-cursor

我有一个带有类的元素，`fade-object`当鼠标处于非活动状态一段时间（在本例中为 5000 毫秒）时会淡出，并在鼠标再次移动时淡入。

这是我正在使用的代码：

```
 var timer;
        $(document).mousemove(function() {
            if (timer) {
                clearTimeout(timer);
                timer = 0;
            }

            $('.fade-object').fadeIn();
            timer = setTimeout(function() {
                $('.fade-object').fadeOut()
            }, 5000)
        }) 
```

如何使鼠标光标以相同的方式淡入和淡出，与我的`fade-object`div 同步？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T19:05:05.727

`cursor: none`在 的 CSS 中设置并`html`防止`mousemove`在 a 之后直接发生的事件`fadeout`重新显示该项目。

[演示](http://jsfiddle.net/qLvDD/1/)

```
$(function () {
    var timer;
    var fadeInBuffer = false;
    $(document).mousemove(function () {
        if (!fadeInBuffer) {
            if (timer) {
                clearTimeout(timer);
                timer = 0;
            }
            $('.fade-object').fadeIn();
            $('html').css({
                cursor: ''
            });
        } else {
            fadeInBuffer = false;
        }

        timer = setTimeout(function () {
            $('.fade-object').fadeOut()
            $('html').css({
                cursor: 'none'
            });
            fadeInBuffer = true;
        }, 5000)
    });
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T19:02:24.443

`cursor: none`延迟通过 jQuery申请。不要以为可以让它淡出。

此 css 属性的使用仅限于 Firefox 3+、Safari 5+ 和 Chrome 5+。它在 IE 中不受支持（如此[处](http://css-tricks.com/almanac/properties/c/cursor/)所述）。

我在[jsBin](http://jsbin.com/unuhaj/8)放了一个例子，在我的浏览器中它不起作用（Linux 上的 Firefox 19.0.2），尽可能多地使用浏览器对其进行测试:)

无论如何，我不能推荐这种技术，如果您考虑一下鼠标光标是操作系统 UI 的一部分，那么向用户隐藏不属于您的 UI 的东西绝不是一个好主意。

# ruby-on-rails - 使用 end_of_day 函数返回投票最多的帖子？

> ID：15532426
> 
> 赞同：0
> 
> 时间：2013-03-20T19:00:27.640
> 
> 标签：ruby-on-rails, ruby

我正在尝试实现“每日发布”功能。我正在考虑使用 end_of_day 函数。基本上，我希望将前一天得票最高的帖子用作第二天的报价（如果有任何意义的话）。我不认为这是最好的方法，所以我愿意接受建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:09:32.140

您最好`DATE`向该表添加一列，然后使用直接查询进行选择：

```
@top_10_posts = Post.where(:created_date => date).order('votes DESC').limit(10) 
```

您将`created_date`在该`before_save`阶段分配一个值并具有一个索引：

```
add_index :posts, [ :created_date, :votes ] 
```

该`end_of_day`功能仅在处理时间时才真正有用。由于您正在处理日期，因此它几乎无关紧要。

# highcharts - HighChart (HighStock) - 如何减少在 IE8 中出现慢速脚本警告的机会

> ID：15532427
> 
> 赞同：0
> 
> 时间：2013-03-20T19:00:38.323
> 
> 标签：highcharts, highstock

我们正在创建一些相当复杂的多图图表，在 IE8 上我们偶尔会收到可怕的慢脚本警告。在不要求我们的客户对注册表做任何事情的情况下，我们可以做些什么来防止这种情况发生？是否有 - 例如 - 在某处设置要求 HighCharts 偶尔调用 setTimeout？我们是否必须手动分解图形生成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:27:10.370

不能完全判断您是指其中包含多个图表的单个图表，还是页面上有多个图表，但请参阅我的讨论：

[Highcharts - 移动页面上的多个图表](https://stackoverflow.com/questions/15341107/highcharts-multiple-charts-on-mobile-page/15341454#15341454)

有时最好把一切都分开。

此外，虽然您的客户无法对注册表执行任何操作，但他们可以安装 Google Chrome Frame，我们建议所有客户都这样做。他们不需要管理员权限来安装，它不会破坏他们的任何“旧”软件或任何东西。它只是在告诉它这样做的页面上将较低版本的 IE 转换为 Chrome。

# java - 使用 maven 多次运行单个测试

> ID：15532429
> 
> 赞同：7
> 
> 时间：2013-03-20T19:00:43.393
> 
> 标签：java, maven, unit-testing, maven-surefire-plugin

我有一个间歇性失败的 TestNG 单元测试。有没有办法使用surefire插件多次运行单个单元测试？如果没有，是否有任何关于处理此问题的最佳方法的建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T19:16:35.457

我发现的一次方法是：

```
@Test(invocationCount = 100) 
```

# java - 在文件中查找具有特定字符串的前 2 行

> ID：15532437
> 
> 赞同：0
> 
> 时间：2013-03-20T19:01:05.903
> 
> 标签：java, bufferedreader

我正在尝试通读文件并找到包含字符串“ua,”的第一行。我想将该行设置为等于 sCurrentLine。之后，我想将包含“ua”的文件中的下一行设置为等于 sNextLine。然后我将处理这些行，然后我希望 sCurrentLine 等于 sNextLine 然后循环继续到文件末尾。

这是我到目前为止所拥有的

```
while ((line = br.readLine()) != null)
{                       
    if (line.contains("ua, "))
{
       sCurrentLine = line;
       //now I don't know what to do 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:09:27.777

您应该使用`ArrayList`将包含*Strings*的。

```
ArrayList<String> st = new ArrayString<String>();
while ((line = br.readLine()) != null)
{                       
    if (line.contains("ua, "))
    {
       st.add(line);
    }
} 
```

由于您不知道将包含`"ua, "` *String*的行数，因此您应该使用`ArrayList`.

现在您将拥有包含`"ua, "`在`ArrayList`st.

* * *

**操作编辑**

如果要处理两行，可以保存找到的第一行`"ua, "`，然后读取另一行，检查它是否包含此字符串：

```
String st1, st2;
while ((line = br.readLine()) != null)
{                       
    if (line.contains("ua, "))
    {
       st1 = line;
    }
    if ((line = br.readLine()) != null && line.contains("ua, "))
    {
       st2 = line;
    }
} 
```

当然，您可以设置标志来查看第一行和第二行是否包含字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:10:45.960

```
boolean currentLineSet = false;
while ((line = br.readLine()) != null)
{                       
    if (line.contains("ua, "))
    {
       if (!currentLineSet) {
           sCurrentLine = line;
           currentLineSet = true;
       } else {
           sNextLine=line;
       //processing
       sCurrentLine = sNextLine;
       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:04:03.260

```
int index, iCurrentLine = 1;

while ((line = br.readLine()) != null)
{
    index++;                     
    if (line.contains("ua, ")) {
        sCurrentLine = line;
        iCurrentLine = index;
    }

} 
```

再次循环遍历文件内容，然后确保新索引不等于以前的索引，然后只需设置`sNextLine = line;`

# ios - 如何在 iOS 中组合返回值的块和方法？

> ID：15532441
> 
> 赞同：0
> 
> 时间：2013-03-20T19:01:16.383
> 
> 标签：ios, objective-c, block, objective-c-blocks

我是 iOS 块的新手，我正在尝试找出使用它们的正确方法。这是我的设置：

我有一个`foo`返回操作（`RKObjectRequestOperation`）是否成功的方法。我为操作提供了一个成功块和一个失败块，所以在成功块中我想`foo`返回 YES，在失败块中我想`foo`返回`NO`。

例如：

```
- (BOOL) foo {
    RKObjectRequestOperation *request = [[RKObjectRequestOperation alloc] initWithRequest:urlRequest responseDescriptors:responseDescriptors];

    [request setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        NSLog(@"Success!");
        // return YES?
    } failure:^(RKObjectRequestOperation *operation , NSError *error) {
        NSLog(@"Failure!");
        // return NO?
    }];

    [request start];
} 
```

但是，据我所知，块只能返回自己的值；它不能导致调用它的方法返回。这个对吗？如果是这种情况，我唯一能想到的就是`foo`将另一个块作为参数，在操作成功或失败时调用该参数。这样做的问题是，从 'foo' 向上调用堆栈，我将不得不更改任何具有返回类型的方法以返回 void 并接受一个块作为参数来调用。不得不改变所有这些方法似乎过分了。我在概念上错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T19:05:32.840

您缺少的是这个块（大概是¹）被异步调用的事实。它是一个完成块，因此在请求的操作完成之前不会触发它，这是一个并发操作。所以当块被触发时，你的`-foo`方法已经返回给它的调用者，并且可能已经回到了运行循环并开始做其他事情。

基本上，这意味着您不能`-foo`基于该块返回任何内容，因为该块尚未触发。您需要重新设计您的`-foo`方法以使其本身是异步的。

^(¹我不熟悉，`RKObjectRequestOperation`但完成块仅在异步上下文中才有意义。)

# css - 当我的css中没有列出宽度和高度的计算样式时，它们从哪里来？

> ID：15532442
> 
> 赞同：5
> 
> 时间：2013-03-20T19:01:17.530
> 
> 标签：css, google-chrome-devtools

显然我可以打开显示，它会告诉我这些列在哪里，但是没有箭头的字段（在这种情况下是高度和宽度）来自哪里？afaik 这些值未在我的 CSS 中的任何位置列出。这是clientWidth和clientHeight吗？

![在此处输入图像描述](../Images/748696c8d85b05fffbba196d1f3309bd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:19:52.207

`width`像 a`div`或 a这样`p`的块元素的默认值`auto`在 CSS 2.1 中（不，它不是 100%）

因此，您看到的是（*粗略地说是 veeeery*）**父级的宽度**（考虑到边框、填充、边距`box-sizing`等）。**[CSS 2.1 REC视觉格式化模型细节](http://www.w3.org/TR/CSS2/visudet.html)**
中解释了许多其他案例

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T19:04:19.087

这些是 chrome 为您正在检查的任何元素生成的计算样式。它的实际生成方式可能是基于 JavaScript 的，也可能是不同的。不过这没什么好担心的。这与您的操作系统告诉您图像或文件的大小相同。

# vb.net - 将 VB6 Open For Binary 转换为 VB.Net（固定字符串数组）

> ID：15532445
> 
> 赞同：1
> 
> 时间：2013-03-20T19:01:33.980
> 
> 标签：vb.net, vb6, binaryfiles, vb6-migration

我正在尝试转换读取二进制文件的 VB6 应用程序。我列出了我尝试使用的 VB6 和转换后的 VB.Net 代码。我已经尝试了我能想到的一切，要么*无法读取流的末尾，*要么*无法确定数组类型，因为它什么都不是。* 请帮忙！

```
'####################  VB6 Code ####################  
Private Const DIGITALOUTS = 24
Private Const PAUSES = 8

Private PLabel(PAUSES - 1) As String * 30
Private EventLab(DIGITALOUTS - 1) As String * 20

Private Sub ReadFile()
    Dim FileNumber As Integer
    FileNumber = FreeFile
    Open "C:\TEST.BAT" For Binary As #FileNumber
    Get #FileNumber, 3000, PLabel            'automatic pausing instruction labels
    Get #FileNumber, 3500, EventLab          'digital output channel labels
    Close #FileNumber
End Sub

'####################  Converted VB.Net Code ####################  
Private Const DIGITALOUTS As Short = 24
Private Const PAUSES As Short = 8

<VBFixedArray(PAUSES - 1)> <VBFixedString(30)> Dim PLabel() As String
<VBFixedArray(DIGITALOUTS - 1)> <VBFixedString(20)> Dim EventLab() As String

Private Sub ReadFile()
    Dim f As Short = FreeFile()
    FileOpen(f, "C:\TEST.BAT", OpenMode.Binary)
    FileGet(f, PLabel, 3000) 'automatic pausing instruction labels <===Error: Unable to read beyond the end of the stream
    FileGet(f, EventLab, 3500) 'digital output channel labels
    FileClose(f)
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:42:35.657

我想到了

```
Private Const DIGITALOUTS As Short = 24
Private Const PAUSES As Short = 8

Private Structure Pause
    <VBFixedString(30)> Dim Label() As String
End Structure

Private Structure Digital
    <VBFixedString(20)> Dim Label() As String
End Structure

Dim PLabel(PAUSES - 1) as Pause
Dim EventLab(DIGITALOUTS - 1) as Digital

Private Sub ReadFile()
    Dim f As Short = FreeFile()
    FileOpen(f, "C:\Test.BAT", OpenMode.Binary)
    FileGet(f, PLabel, 3000) 'automatic pausing instruction labels 
    FileGet(f, EventLab, 3500) 'digital output channel labels
    FileClose(f)
End Sub 
```

# python - Networkx 数据集创建

> ID：15532450
> 
> 赞同：0
> 
> 时间：2013-03-20T19:01:56.367
> 
> 标签：python, networkx

我有有向图的数据，形式为

```
Node1 Node2
A       B
A       C
C       A
D       A 
```

这意味着，A --> B、A --> C 等之间的有向边/链接。我想将此数据创建到 Networkx 支持的数据集中，以便在 Python 中建模。我希望文件大小尽可能小。我有大约 100 万个边缘/链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:13:57.333

```
import networkx as nx
import matplotlib.pyplot as plt

content = '''\
Node1 Node2
A       B
A       C
C       A
D       A'''

lines = content.splitlines()
G = nx.DiGraph()
for line in lines[1:]: # skip the first (header) line
    a, b = map(str.strip, line.split())
    G.add_edge(a, b)

nx.draw(G)
plt.savefig('/tmp/graph.png')
# plt.show() 
```

![在此处输入图像描述](../Images/cd90c1fd579736bf80f4a7a8e5021918.png)

# c++ - VS2010构建一个exe但无法调试它抱怨它找不到它

> ID：15532458
> 
> 赞同：1
> 
> 时间：2013-03-20T19:02:16.640
> 
> 标签：c++, visual-studio-2010

我目前正在开发一个项目 VS2010 C++，其中 VS2010 在输出中显示的路径成功地构建了一个项目

```
1>  Level2Socket.vcxproj -> C:\Project\LSock.exe
========== Rebuild All: 1 succeeded, 0 failed, 0 skipped ========== 
```

但是当我单击项目并选择调试 >> 启动新实例时，Visual Studio 状态

```
Unable to start program the system cannot find the  C:\Project\LSock.exe file specified. 
```

我仔细检查了它确实存在的文件的存在。关于我为什么得到这个的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:59:57.550

项目 -> 属性 -> 调试，将工作目录设置到您的项目目录。

# ios - 为 iOS 应用程序创建数据库

> ID：15532460
> 
> 赞同：0
> 
> 时间：2013-03-20T19:02:21.460
> 
> 标签：ios, database, sqlite3-ruby

我正在为 iOS 编写一个应用程序。您认为哪种方法更好：一次创建表（创建表 foo）和所有内容，还是仅在必要时创建表（仅当用户转到使用该表的某个视图时）？我的原型仅在需要时才创建表格。为了开始开发我的测试版，我必须决定我是否做得对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:05:02.853

除非有充分的理由，否则请事先创建表格和结构，并让应用根据需要更新这些表格。动态创建表会使任务过于复杂。

# c++ - 带有 C++ API 的 12 位图像格式？

> ID：15532461
> 
> 赞同：3
> 
> 时间：2013-03-20T19:02:23.957
> 
> 标签：c++, tiff

我正在研究生物医学成像应用程序。我在为我的 12 位灰度图像找到一个好的容器格式时遇到了一些麻烦。

有谁知道与 LibTIFF 类似的 C++ 或 C api 的 12 位图像格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:12:19.847

我建议使用[DICOM](http://en.wikipedia.org/wiki/DICOM)进行医学成像而不是其他一些图像格式。[GDCM](http://gdcm.sourceforge.net/wiki/index.php/Main_Page)和[DCMTK](http://dicom.offis.de/dcmtk.php.en)都是很好的开源工具包，允许读写 dicom 文件（+ 更多）。

[MicroDicom](http://www.microdicom.com/)是一款不错的免费 Windows DICOM 查看器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T19:08:59.943

我会考虑研究现有的 HDR 图像格式和库，如[OpenEXR](http://www.openexr.com/)、[HDRi](http://en.wikipedia.org/wiki/HDRi_%28data_format%29)、[Radiance](http://paulbourke.net/dataformats/pic/)等。

此外，据我所知，TIFF 实际上是一种非常灵活的格式，您可以使用它。

# django - django-compressor 没有在 Heroku 上设置绝对 CSS 图像路径

> ID：15532464
> 
> 赞同：16
> 
> 时间：2013-03-20T19:02:25.367
> 
> 标签：django, amazon-s3, django-compressor

我正在使用[django-compressor在](http://django_compressor.readthedocs.org/en/latest/)[这个站点](http://www.pepysdiary.com/)上连接和压缩我的 CSS 和 JS 文件。我正在从 S3 存储桶提供静态文件。

在我的站点本地副本上，使用不同的 S3 存储桶，这一切都很好。但是在托管在 Heroku 上的实时站点上，除了CSS 文件中的图像的相对 URL 没有被重写*之外，它一切正常。*

例如，CSS 文件中的这一行：

```
background-image: url("../img/glyphicons-halflings-grey.png"); 
```

被重写为：

```
background-image:url('https://my-dev-bucket-name.s3.amazonaws.com/static/img/glyphicons-halflings-grey.png') 
```

在我的开发站点上，但在实时站点上没有涉及。因此，实时站点最终会查找`pepysdiary.s3.amazonaws.com/static/CACHE/img/`图像（因为它与新的压缩 CSS 文件相关）。

目前，我已经在该位置放置了一个包含图像的目录，但我无法弄清楚为什么会有这种差异。两个站点的设置中都有这个：

```
COMPRESS_CSS_FILTERS = [
    # Creates absolute urls from relative ones.
    'compressor.filters.css_default.CssAbsoluteFilter',
    # CSS minimizer.
    'compressor.filters.cssmin.CSSMinFilter'
] 
```

并且 CSS 文件被最小化得很好......但就像其他过滤器没有被应用在实时站点上一样。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-10T22:31:42.143

我最近在heroku上遇到了这个问题，运行最新版本的django-compressor（1.3）并不能解决问题。我将提供我正在使用的解决方案，并解释我在此过程中遇到的问题。

**解决方案**

我创建了自己的“CssAbsoluteFilter”，它从“find”方法中删除了 settings.DEBUG 检查，如下所示：

```
# compress_filters.py
from compressor.filters.css_default import CssAbsoluteFilter
from compressor.utils import staticfiles

class CustomCssAbsoluteFilter(CssAbsoluteFilter):
    def find(self, basename):
        # The line below is the original line.  I removed settings.DEBUG.
        # if settings.DEBUG and basename and staticfiles.finders:
        if basename and staticfiles.finders:
            return staticfiles.finders.find(basename)

# settings.py
COMPRESS_CSS_FILTERS = [
# 'compressor.filters.css_default.CssAbsoluteFilter',
'app.compress_filters.CustomCssAbsoluteFilter',
'compressor.filters.cssmin.CSSMinFilter',
] 
```

无论 DEBUG = True 还是 False，绝对 url 现在总是对我有用。

**问题**

该问题与“compressor.filters.css_default.CssAbsoluteFilter”、您的 DEBUG 设置以及 heroku 具有只读文件系统并在您每次部署时覆盖您的应用程序文件这一事实有关。

compress 在您的开发服务器上正常工作的原因是因为当 DEBUG = True 时 CssAbsoluteFilter 将始终找到您的静态文件，即使您从未运行过“collectstatic”。它在 STATICFILES_DIRS 中查找它们。

当您的生产服务器上的 DEBUG = False 时，CssAbsoluteFilter 假定静态文件已被收集到您的 COMPRESS_ROOT 中，如果找不到文件，则不会应用绝对过滤器。

django-compressor 的作者 Jerdez[是这样解释](https://github.com/jezdez/django_compressor/issues/409#issuecomment-18733021)的：

> 如果您已成功提供要使用的文件，则 CssAbsoluteFilter 与 DEBUG = False 一起使用。在开发过程中，压缩器使用静态文件查找器作为一种便利，因此您不必一直运行 collectstatic。

现在对于heroku。即使您将静态文件存储在 S3 上，也需要将它们存储在 heroku 上（[使用 CachedS3BotoStorage](https://django_compressor.readthedocs.org/en/latest/remote-storages/index.html?highlight=s3#using-staticfiles)）。由于 heroku 是一个只读文件系统，唯一的方法是让 heroku 在部署期间自动收集您的静态文件（请参阅[https://devcenter.heroku.com/articles/django-assets](https://devcenter.heroku.com/articles/django-assets)）。

根据我的经验，手动运行 'heroku run python manage.py collectstatic --noinput' 或者甚至在您的 Procfile 中运行会将文件上传到 S3，但它不会将文件保存到您的 STATIC_ROOT 目录（压缩器默认使用 COMPRESS_ROOT ）。您可以使用“heroku run ls path/to/collected”确认您的静态文件已在 heroku 上收集。

**如果您的文件已成功收集到 heroku 上，您应该也可以成功压缩文件，而无需我上面提供的解决方案。**

但是，如果您自上次部署以来对静态文件进行了更改，heroku 似乎只会收集静态文件。如果没有对您的静态文件进行任何更改，您将看到类似“已复制 250 个静态文件中的 0 个”的内容。这是一个问题，因为 heroku 在您部署时会完全替换您的应用程序内容，因此您会丢失之前在 COMPRESS_ROOT/STATIC_ROOT 中收集的所有静态文件。如果您在收集的文件在 heroku 上不再存在并且 DEBUG = False 后尝试压缩文件，则 CssAbsoluteFilter 不会将相对 url 替换为绝对 url。

我上面的解决方案完全避免了 heroku 问题，并且即使在 DEBUG = False 时也用绝对 url 替换相对 css url。

希望其他人也会发现这些信息也很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:26:43.263

一个月以来我一直遇到同样的问题，但这在 1.3 版本中已修复（3/18/13，所以你可能在 1.2 上），所以只需升级：

```
pip install -U django-compressor 
```

我放弃解决的确切问题，但它与 Heroku 和 CssAbsoluteFilter 被调用但在 _converter 方法失败有关。查看 1.3 更改日志，唯一相关的提交是：[https ://github.com/jezdez/django_compressor/commit/8254f8d707f517ab154ad0d6d77dfc1ac292bf41](https://github.com/jezdez/django_compressor/commit/8254f8d707f517ab154ad0d6d77dfc1ac292bf41)

我放弃了，生命太短暂了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-06T16:12:14.750

同时，这已在 django-compressor 1.6 中得到修复。从[变更日志](https://django-compressor.readthedocs.org/en/latest/changelog/)：

```
Apply CssAbsoluteFilter to precompiled css even when compression is disabled 
```

即，即使DEBUG = True，绝对过滤器也会运行。

# javascript - 使用 JS 客户端删除 Google Drive 文件

> ID：15532468
> 
> 赞同：5
> 
> 时间：2013-03-20T19:02:33.637
> 
> 标签：javascript, google-drive-api

我尝试使用 Google Drive[文档](https://developers.google.com/drive/v2/reference/files/delete)中的示例。所以代码是：

```
var request = gapi.client.drive.files.delete({
    'fileId' : someFileId
    });

    request.execute(function(resp) 
    {
        console.log(resp);
    }); 
```

该应用程序已正确安装，我正在使用 drive.file 范围。问题是文件没有被删除。它仍然存在于 Drive UI 中，无法再打开或下载。文件已损坏。

发送的请求不是文档中所述的 DELETE [https://www.googleapis.com/drive/v2/files/fileId 。](https://www.googleapis.com/drive/v2/files/fileId)这是一个 POST [https://www.googleapis.com/rpc?key=API_KEY](https://www.googleapis.com/rpc?key=API_KEY)。正文包含一个 JSON 数组：

```
[{"jsonrpc":"2.0","id":"gapiRpc","method":"drive.files.delete","params":{"fileId":"someFileId"},"apiVersion":"v2"}] 
```

响应包含一个空 JSON 对象。响应中没有错误，页面中也没有 JS 错误。APIs Explorer 成功删除了该文件。

有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T16:33:41.410

尝试使用 XMLHttpRequest 代替：

```
var xmlReq = new XMLHttpRequest();
xmlReq.open('DELETE', 'https://www.googleapis.com/drive/v2/files/' + fileId + '?key=' + apiKey);
xmlReq.setRequestHeader('Authorization', 'Bearer ' + accessToken); 
```

# javascript - 如何从 highcharts 打印 javascript 对象

> ID：15532469
> 
> 赞同：0
> 
> 时间：2013-03-20T19:02:41.473
> 
> 标签：javascript, highcharts

我试图在图表的最底部输出值（第 12 个月的收入 - 第 12 个月的成本），其中显示“ROI：$XXX.XX 或 X%”。我是 JS 新手，我写的每个函数都不起作用。我怎样才能使计算（上面引用）打印到图表的底部？

这应该更容易看到我在说什么：http: [//jsfiddle.net/nlem33/L5cY6/9/](http://jsfiddle.net/nlem33/L5cY6/9/)

```
console.log(newdata);

chart.series[0].setData(newdata2);
chart.series[1].setData(newdata); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:36:46.970

你几乎接近了。

图表没有改变的原因是因为`yAxis -` **最大 60000**

尝试减少它并检查会发生什么。您`were not to scale`正确使用的值。

所以你需要根据用户的选择设置最小值和最大值，每次超过最大值时重新绘制图表。

在计算新数据时，有一个最大值，并在重绘图表时传递该值，以便对其进行说明。

# sql-server - 在 SQL Server 2008 视图中跨列计算特定值

> ID：15532470
> 
> 赞同：1
> 
> 时间：2013-03-20T19:02:42.123
> 
> 标签：sql-server, tsql, view, count, sql-server-2008-r2

我有以下数据：

* * *

```
 ID Column1 Column2 Column3 Column4 Column5
   001   A        C       D        A      B
   002   A        D       A        B      A
   003   B        K       Q        C      Q
   004   A        K       E        E      B 
```

* * *

我想在视图中创建一个新列，该列为我提供每行 5 个源列中“A”的计数。结果应如下所示：

```
 ID Column1 Column2 Column3 Column4 Column5  SumOfA
    001   A        C       D        A      B       2
    002   A        D       A        B      A       3
    003   B        K       Q        C      Q       0
    004   A        K       E        E      B       1 
```

* * *

我在这里看到了几个示例，但它们跨记录返回“A”的实例 - 我想要跨列的“A”计数，而不是跨行聚合。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T19:08:46.853

您可以使用多个`CASE`表达式来计算`A`值：

```
select id,
  column1, 
  column2,
  column3,
  column4, 
  column5,
  case when column1 = 'A' then 1 else 0 end +
  case when column2 = 'A' then 1 else 0 end +
  case when column3 = 'A' then 1 else 0 end +
  case when column4 = 'A' then 1 else 0 end +
  case when column5 = 'A' then 1 else 0 end TotalA
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d025f/2)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T08:19:44.250

对于这样的情况，我更喜欢使用 CROSS APPLY 来执行中间逻辑 UNPIVOT。

```
SELECT
   *
FROM
   dbo.YourTable T
   CROSS APPLY (
      SELECT Count(*)
      FROM (VALUES (Column1), (Column2), (Column3), (Column4), (Column5)) C (Val)
      WHERE Val = 'A'
   ) A (Cnt) 
```

这还有一个优点，就是能够只在一个位置而不是 5 个位置更改您计数的值，并且如果需要，添加更多列非常容易。

看到这个[在 Sql Fiddle 中工作](http://sqlfiddle.com/#!3/67707/1)

但是，您正在努力构建此查询表明表设计可能不是最好的。如果列名本身包含数据（例如时间段、区域或其他类型的类似值），则几乎可以肯定该设计是次优的。我强烈建议您存储未透视的数据——每个值使用一行和一列，新列表示它来自哪个原始列。

如果出于某种原因无法更改架构，则可以考虑创建一个视图：

```
CREATE VIEW dbo.YourTableUnpivoted
SELECT
   T.ID,
   C.*
FROM
   dbo.YourTable T
   CROSS APPLY (VALUES
      ('Column1', Column1),
      ('Column2', Column2),
      ('Column3', Column3),
      ('Column4', Column4),
      ('Column5', Column5)
   ) C (Col, Val); 
```

（您也可以使用`PIVOT`运算符。）然后您可以像使用重新设计的表格一样使用它：

```
SELECT
   ID,
   Count(*)
FROM
   dbo.YourTableUnpivoted
WHERE
   Val = 'A'
GROUP BY
   ID; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T19:07:26.070

```
SELECT 
(CASE WHEN Column1 = 'A' THEN 1 ELSE 0 END 
+ CASE WHEN Column2 = 'A' THEN 1 ELSE 0 END 
+ CASE WHEN Column3 = 'A' THEN 1 ELSE 0 END 
+ CASE WHEN Column4 = 'A' THEN 1 ELSE 0 END 
+ CASE WHEN Column5 = 'A' THEN 1 ELSE 0 END) AS SumOfA
FROM myTable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T19:12:21.383

您可以使用`CASE`语句来实现这一点：

```
SELECT 
    column1, column2, column3, column4, column5,
    (CASE WHEN Column1 = 'A' THEN 1 ELSE 0 END   
     + CASE WHEN Column2 = 'A' THEN 1 ELSE 0 END   
     + CASE WHEN Column3 = 'A' THEN 1 ELSE 0 END   
     + CASE WHEN Column4 = 'A' THEN 1 ELSE 0 END   
     + CASE WHEN Column5 = 'A' THEN 1 ELSE 0 END) AS TotalSum  
FROM yourTable 
```

# php - url 取决于选项框的值

> ID：15532471
> 
> 赞同：-1
> 
> 时间：2013-03-20T19:02:45.787
> 
> 标签：php

我有第 1 页，在此页面上有一个包含 5 个项目的下拉菜单选项。

```
Google
Yahoo
Bing
Youtube
MTV 
```

现在，当用户选择上述之一，然后单击页面底部的按钮时，他们将分别重定向到该站点。如何才能做到这一点？

我的想法是将按钮的超链接设置为字符串，然后当用户从菜单中选择一个项目时会产生某种“if-then”条件，这可能是字符串的值。

还是有一种我目前没有看到的更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:06:57.707

我建议尝试类似于以下内容：

**测试.php**

```
<?php
// Check to see if the form has been submitted.
if(isset($_POST['option'])) {
  // If the form has been submitted, force a re-direct to the choice selected.
  header('Location: ' . $_POST['option']);
}
?>
<!DOCTYPE html>
<html>
  <body>
    <form method="post">
      <select name="option">
        <option value="http://www.google.com">Google</option>
        <option value="http://www.yahoo.com">Yahoo</option>
        <option value="http://www.bing.com">Bing</option>
        <option value="http://www.youtube.com">YouTube</option>
        <option value="http://www.mtv.com">MTV</option>
      </select>
      <button type="submit">Go!</button>
    </form>
  </body>
</html> 
```

或者，参考@ITroubs 的评论，您也可以使用 jQuery 执行此操作：

**jquery-test.html**

```
<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
      function goThere() {
        // Grab the drop-down.
        var $select = $('#option');
        // Grab the value of the option selected within the drop-down.
        var url = $select.val();
        // Instruct the window to re-direct to the URL.
        window.location = url;
      }
    </script>
  </head>
  <body>
    <form>
      <select id="option">
        <option value="http://www.google.com">Google</option>
        <option value="http://www.yahoo.com">Yahoo</option>
        <option value="http://www.bing.com">Bing</option>
        <option value="http://www.youtube.com">YouTube</option>
        <option value="http://www.mtv.com">MTV</option>
      </select>
      <button type="button" onclick="goThere();">Go!</button>
    </form>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:28:17.533

我会使用 javascript 和 jquery，如下所示：

```
<!DOCTYPE html>
<body>
    <select id="dropdown">
        <option id="google" data-url="http://www.google.com" label="Google">Google</option>
        <option id="yahoo" data-url="http://www.yahoo.com" label="Yahoo">Yahoo</option>
    </select>
    <button type="submit" id="submit" value="Go">Go</button>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
    (function($){
        $('#submit').on('click', function(e){
            e.preventDefault();
            window.location = $('#dropdown option:selected').data('url');
            return false;
        });
    })(jQuery);
    </script>
</body>
</html> 
```

# d3.js - 未捕获的类型错误：无法读取未定义的属性“长度”

> ID：15532475
> 
> 赞同：0
> 
> 时间：2013-03-20T19:03:08.817
> 
> 标签：d3.js

我正在尝试在我的地图中获取一些数据，但是出现以下错误：

未捕获的类型错误：无法读取未定义的属性“长度”。

这是我的代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <title>D3 Test</title>
    <script type="text/javascript" src="http://localhost/webserver/d3/d3.js"></script>
    <script type="text/javascript" src="http://localhost/webserver/topojson/topojson.js"></script>
        <style type="text/css">

            div.bar {
                display: inline-block;
                width: 20px;
                height: 75px;
                background-color: teal;
                margin-right: 2px;
            }
            .pumpkin {
                fill: rgba(128, 0, 128, 0.75);
                stroke: yellow;
                stroke-width: 5;
            }
            .apple {
                fill: rgba(0, 255, 0, 0.55);
                stroke: green;
                stroke-width: 15;
            }
            .orange {
                fill: rgba(255, 255, 0, 0.55);
                stroke: orange;
                stroke-width: 10;
            }
            .subunit    { fill: #cdc; }
            .subunit-label  {
                fill: #777;
                fill-opacity: .25;
                font-size:  30px;
                font-weight: 300;
                text-anchor: middle;}

            .provincie  {fill: none; }
            .Utrecht    {fill: #ddd; }
            .Zuid-Holland   {fill: #dde; }
            .Noord-Holland  {fill: #dee; }
            .Drenthe    {fill: #aae; }
            .Gelderland     {fill: #eee; }
            .Friesland  {fill: #ddc; }
            .Groningen  {fill: #dcc; }
            .Limburg    {fill: #ccc; }
            .Noord-Brabant  {fill: #ddb; }
            .Overijssel     {fill: #dbb; }
            .Zeeland    {fill: #bbb; }
        </style>    
    </head>
    <body>
    <script type="text/javascript">

    var width = 960, height = 860;

    var projection = d3.geo.albers()
        .center([6, 49.40])
        .rotate([0, -1.9])
        .parallels([50, 60])
        .scale(11000)
        .translate([width / 2, height / 2]);

    var path = d3.geo.path()
        .projection(projection);

    var svg = d3.select("body").append("svg")
        .attr("width", width) 
        .attr("height", height);

//Define quantize scale to sort data values into buckets of color
    var color = d3.scale.quantize()
                .range(["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"]);

//Load in data
    d3.csv("http://localhost/webserver/data/beroepsbevolking.csv", function(data) {

          //Set input domain for color scale
            color.domain([
                    d3.min(data, function(d) { return d.value; }), 
                    d3.max(data, function(d) { return d.value; })
                ]);     

    d3.json("http://localhost/webserver/data/nl2.json", function(error, nl) {
        svg.selectAll(".subunit")
        .data(topojson.object(nl, nl.objects.subunits).geometries)
            .enter().append("path")
            .attr("class", function(d) { return "subunit " + d.id; })
        .attr("d", path);

        svg.selectAll(".subunit-label")
        .data(topojson.object(nl, nl.objects.subunits).geometries)

        //svg.selectAll(".provincie")
        .data(topojson.object(nl, nl.objects.provincies).geometries)
        .enter().append("path")
        //    .attr("class", function(d) { return "provincie " + d.properties.name; })
        .attr("d", path);

    //Merge the ag. data and GeoJSON
    //Loop through once for each ag. data value
      d3.json("http://localhost/webserver/data/nl2.json" ,function(json) {

                    for (var i = 0; i < data.length; i++) {

                        //Grab provincie name
                        var dataProvincie = data[i].provincie;

                        //Grab data value, and convert from string to float
                        var dataValue = parseFloat(data[i].value);

                        //Find the corresponding provincie inside the GeoJSON
                        for (var j = 0; j < json.features.length; j++) {

                            var jsonProvincie = json.features[j].properties.name;

                            if (dataProvincie == jsonProvincie) {

                                //Copy the data value into the JSON
                                json.features[j].properties.value = dataValue;

                                //Stop looking through the JSON
                                break;

                            }
                        }       
                    }

                    //Bind data and create one path per GeoJSON feature
                    svg.selectAll("path")
                       .data(json.features)
                       .enter()
                       .append("path")
                       .attr("d", path)
                       .style("fill", function(d) {
                            //Get data value
                            var value = d.properties.value;

                            if (value) {
                                //If value exists…
                                return color(value);
                            } else {
                                //If value is undefined…
                                return "#ccc";
                            }
                       });
            });
        }); 
      });
    </script>
    </body>
</html> 
```

第 115 行出错了：

for (var j = 0; j < json.features.length; j++) {

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T20:09:25.640

您的 JSON 没有`features`字段。此外，您在`d3.json`函数中遗漏了一个参数——在您的第二次调用中，`json`实际上将绑定到错误。改变

```
d3.json("http://localhost/webserver/data/nl2.json" ,function(json) { 
```

至

```
d3.json("http://localhost/webserver/data/nl2.json" ,function(error, json) { 
```

第二次调用`d3.json`似乎没有必要——此时，您`nl2.json`已经在`nl`变量中拥有了数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T20:02:51.587

参数的名称是“json”，而不是“data”。使它们具有相同的名称，它应该可以工作。

还; 从错误消息中获取提示；“数据”未定义。

# android - 我正在构建一个使用 Google 地图的 Android 应用程序，当我尝试获取当前位置时，地图正在放大和缩小

> ID：15532481
> 
> 赞同：1
> 
> 时间：2013-03-20T19:03:28.630
> 
> 标签：android, google-maps, google-maps-markers, currentlocation

下面是我正在使用的位置监听器和调用它的方法。当我运行此地图时，地图会不断放大和缩小。我目前在我的活动中从 onCreate 调用它。我在这里做错了什么？

```
private void showCurrentLocationOnMap(){
    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
    LocationListener ll = new Mylocationlistener();
    boolean isGPS = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);

    if (!isGPS){
        Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
        intent.putExtra("enabled", true);
        sendBroadcast(intent);
    }

    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);

}

/**
 *Mylocationlistener class will give the current GPS location 
 *with the help of Location Listener interface 
 */
private class Mylocationlistener implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {

        if (location != null) {
            // ---Get current location latitude, longitude, altitude & speed ---

            Log.d("LOCATION CHANGED", location.getLatitude() + "");
            Log.d("LOCATION CHANGED", location.getLongitude() + "");
            currentLocation = new LatLng(location.getLatitude(), location.getLongitude());
            HAMBURG = new LatLng(location.getLatitude(), location.getLongitude());
            //This only shows the initial marker
                  @SuppressWarnings("unused")
      Marker hamburg = map.addMarker(new MarkerOptions().position(currentLocation).title("Current Location"));
            // Move the camera instantly to hamburg with a zoom of 15.
            map.moveCamera(CameraUpdateFactory.newLatLngZoom(HAMBURG, 15));
            // Zoom in, animating the camera.
            map.animateCamera(CameraUpdateFactory.zoomTo(12), 2000, null);              

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:28:37.903

我发现每隔 0 秒我就根据 requestLocationUpdates 方法请求位置更新，这只是我的一个错字。和往常一样，这是一件小事让我很生气。所以而不是：

```
 lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll); 
```

我应该有：

```
 lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 10, ll); 
```

10000 相当于十秒。一旦我改变了这个，我就能够成功地运行应用程序，并且更新正确更新。

# c#-4.0 - mvc 自定义路由给出 404

> ID：15532493
> 
> 赞同：0
> 
> 时间：2013-03-20T19:03:54.757
> 
> 标签：c#-4.0, asp.net-mvc-4, routes

我正在尝试制作自定义路线，但我无法让它工作，即使一切看起来都很好，它总是返回 404。

所以这里是定义的路线。

它在默认值之前首先定义，根据路由调试器，这是被命中的路由。`(Matched Route: Game/{id}/{title})`

```
routes.Add(
    "GamesDefault",
    new Route("Game/{id}/{title}",
    new RouteValueDictionary(new { controller = "Games", action = "ShowGame" }),
    new DefaultMvcRouteHandler(urlTranslator, urlFoundAction))); 
```

这是我试图达到的路径：`/Game/5/test`

这是控制器声明。位于`GamesController`Controllers 文件夹中，其视图位于`Views/Games/showGames.cshtml`.

```
public GamesController()
{
}

public ActionResult ShowGames(int id, string title)
{
    return View(title);
} 
```

DefaultMvcRouteHandler 没有做任何花哨的事情。

```
public class DefaultMvcRouteHandler : IRouteHandler
{
    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        return new MvcHandler(requestContext);
    }
} 
```

默认路由没有问题，我已经尝试了所有我能找到的东西，比如更改路由的名称，所以它不匹配任何文件夹或类似的东西。如果有人对更多尝试有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:22:04.400

根据我的评论，您为`controller`和值传递了不正确的默认路由`action`值。

像这样更新您的路线：

```
routes.Add(
   "GamesDefault",
   new Route("Game/{id}/{title}",
   new RouteValueDictionary(new { controller = "GamesController", action = "ShowGames" }),
   new DefaultMvcRouteHandler(urlTranslator, urlFoundAction))); 
```

# php - Kohana 3.3 包罗万象的路线

> ID：15532494
> 
> 赞同：3
> 
> 时间：2013-03-20T19:03:55.177
> 
> 标签：php, kohana, routes

如何定义一个路由来捕获所有请求并将它们转发到一个特定的控制器？我已经尝试添加默认路由

```
Route::set('default', '(<controller>(/<action>(/<id>)))')
    ->defaults(array(
         'directory' => 'site',
         'controller' => 'foobar',
         'action' => 'foobar',
)); 
```

或者

```
Route::set('default', '(.*)')
    -> defaults(array(
        'directory' => 'site',
        'controller' => 'foobar',
        'action' => 'foobar',
)); 
```

到我的**bootstrap.php**，但它不起作用。输入 localhost/a 后，我得到

```
Unable to find a route to match the URI: a 
```

或者

```
The requested URL a was not found on this server. 
```

错误。我确定控制器是有效的，因为

```
Route::set('foobar', 'foo') 
    -> defaults(array(
        'directory' => 'site',
        'controller' => 'foobar',
        'action' => 'foobar',
)); 
```

工作正常。

我正在使用 Kohana 3.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T19:35:22.023

这应该有效：

```
Route::set('foobar', '<catcher>',array('catcher'=>'.*')) 
    -> defaults(array(
        'directory' => 'site',
        'controller' => 'foobar',
        'action' => 'foobar',
)); 
```

它`<catcher>`是一个占位符并`array('catcher'=>'.*')`定义捕手以匹配正则表达式`.*`

# windows - 如何以推荐的方式访问 DWM 的“桌面”表面？

> ID：15532499
> 
> 赞同：2
> 
> 时间：2013-03-20T19:04:12.040
> 
> 标签：windows, winapi, desktop, gdi, dwm

经典的 GDI 访问方式 - `GetDC(HWND_DESKTOP)`/ `GetWindowDC(HWND_DESKTOP)`- 已被[Microsoft 的 Greg Schechter 不鼓励，](http://blogs.msdn.com/b/greg_schechter/archive/2006/05/02/588934.aspx)因为 DWM 导致屏幕外渲染和直接进入帧缓冲区。此外，[Platform SDK 参考](http://msdn.microsoft.com/library/windows/desktop/aa969536#BLURPRACTICES)建议避免写访问。但是，引用的两个来源都没有提供替代建议。

那么，我应该使用什么来代替经典的 GDI 方法来对 DWM 友好？

# r - 在没有管理员权限的情况下在 Windows 7 上安装 R 时从任何地方打开 .rData 文件

> ID：15532500
> 
> 赞同：0
> 
> 时间：2013-03-20T19:04:13.493
> 
> 标签：r

我已经像这样安装了 R 很多次，但似乎我总是在某些步骤中犯了错误，这样我就可以从任何地方打开 .rdata 文件。现在我可以打开安装它的 Rgui.exe（我的首选方法）（C:\Users\myname\Documents\R\R-2.15.3\bin\i386），但我无法打开 .rData 文件.

我单击 .rData 并“打开方式...”，但将其引导至使用上述路径打开 r 将不会打开文件。让它发挥作用的微妙步骤是什么？

# regex - Google Docs 中的正则表达式提取用于捕获变量字符串的结尾

> ID：15532504
> 
> 赞同：2
> 
> 时间：2013-03-20T19:04:36.103
> 
> 标签：regex, string, google-docs

在 Google Docs 中，如果我有一系列字符串，例如“Something.Here.Search.Term.Chicago”，其中“Term”之后的最后一个组件。可以是任何东西。

如何使用正则表达式提取仅捕获“术语”之后的内容？

请注意，字符串的长度在 Term 之前会有所不同，因此我不能使用 Left 或 Right 和 position，因为它总是不同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:16:06.683

您也可以使用积极的后视，以避免必须与组一起捕获：

```
/(?<=Term\.).*/ 
```

尽管取决于您实现此功能的语言，它可能不支持后视（即 JavaScript）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:16:11.420

如果你不想搞乱捕获组，并且你知道你想要的组件是字符串最后一个`.`和结尾之间的子字符串，你可以使用

```
[^.]+$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:13:55.297

我不知道 Google Docs，但通常在正则表达式中，你会这样做

```
"Something\.Here\.Search\.Term\.(.*)" 
```

`()`手段捕捉并记住其中的模式。在这种情况下`.*`意味着一切。您通常可以`$1`在 Javascript 中以 等方式访问模式。

请参阅[正则表达式示例](https://docs.google.com/document/d/1YFyOFSm7P4pssBMY7qTrWinz2SDMZW1KUnkmePDORS0/preview?pli=1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T19:35:29.140

这是使用您的示例数据对我有用的方法：

```
=REGEXREPLACE(A1; ".*Term.(.*)" ; "$1") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-05T15:20:58.100

使用“前瞻”表达式`(?=)`，然后在单词边界之后重复某些内容怎么样？

像这样的东西：

```
(?=Term\\.).*\W 
```

# playframework - 玩！框架、多处理器和多核

> ID：15532505
> 
> 赞同：1
> 
> 时间：2013-03-20T19:04:38.150
> 
> 标签：playframework, multiprocessing

只是想知道如何阅读以下播放指南：

`Default to 1 thread in DEV mode or (nb processors + 1) threads in PROD mode.`

因此，如果我有 2 个 CPU，每个 CPU 有 4 个内核，推荐的数字是 3（2 个处理器 + 1），还是 9 个（2 个处理器 * 4 个内核 + 1）。

据我所知，每个核心都独立执行指令，所以这似乎暗示了第二种选择？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T21:33:24.960

刚刚在 4 核 8 线程 i7 CPU 上测试了：

```
System.out.println("Cores: " + Runtime.getRuntime().availableProcessors());
System.out.println("Threads: " + Invoker.executor.getCorePoolSize()); 
```

在应用程序初始化工作和结果是：

开发模式：核心：8 线程：1

PROD 模式：核心：8 线程：9

所以看起来它只是使用了 Java 发现的东西——CPU 线程

# c# - .NET 实体属性作为枚举或对象

> ID：15532507
> 
> 赞同：2
> 
> 时间：2013-03-20T19:04:44.010
> 
> 标签：c#, .net, model, data-access-layer, object-model

在 .NET 中创建实体并设置其（实际上是枚举）属性时，我需要一些关于最佳实践的建议。

举个简单的例子，假设我有一个名为“Todo”的对象，它具有三个属性：
ID (int)
Text (string)
State (NotStarted, InProgress, Complete)

我的 Todo 对象将存储在 SQL Server 数据库中，“Type”属性存储为 int。State 属性不会有任何其他信息或方法与之关联，它只是为了标记 Todo 实例的完整性。

我是否应该在 Todo.cs 中创建一个枚举（在 Todo 类之外），如下所示：

```
public enum TodoState  
{  
  NotStarted = 0,  
  InProgress = 1,  
  Complete = 2  
} 
```

之后，我可以将我的 Todo 类创建为：

```
public class Todo
{
  public int Id { get; set; }
  public string Text { get; set; }
  public TodoState State { get; set; }
} 
```

或者我应该创建一个具有内部枚举和静态构造函数的 TodoState 类？还是有更好的完全不同的方式来做到这一点？

除了您认为在这种情况下实现这一目标的最佳方法之外，解决此类问题的行业标准方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:06:55.750

从版本 5（使用 .NET 4.5）开始，实体框架支持`enum`属性。阅读枚举支持 -[实体框架中的](http://blogs.msdn.com/b/efdesign/archive/2011/06/29/enumeration-support-in-entity-framework.aspx)[代码优先](http://msdn.microsoft.com/en-us/data/hh859576.aspx)和枚举支持以获取更多信息。

这是*迄今为止*解决您的问题的最简单方法。

您的代码看起来不错。我认为你在正确的轨道上，虽然这里有一些小建议：

*   标准做法是为每个`.cs`文件定义一种类型，包括枚举，因此我建议`enum TodoState`移至`TodoState.cs`.
*   `TodoState`作为一个名字的作品，但我认为`CompletionState`它更能描述它应该代表什么。

# jquery - 移动菜单未在移动“触摸”上激活

> ID：15532509
> 
> 赞同：1
> 
> 时间：2013-03-20T19:04:49.887
> 
> 标签：jquery, html, css, mobile, responsive-design

在移动设备上出现响应式菜单问题。

手机版的菜单在电脑上点击时下拉，但在手机上测试时，菜单不下拉。

任何帮助将不胜感激！

链接：http: [//4grain.bmdigitalgroup.com/](http://4grain.bmdigitalgroup.com/)

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:17:01.527

这与您`gumby-trigger`不确定导致问题的确切原因有关，但我找到了解决方案。

由于您只是尝试将`active`类添加到`ul`这将起作用

```
<script>
$(document).ready(function() {
    $('.toggle').click(function() {
        $('ul.nine').toggleClass('active');
    })
});
</script> 
```

**建议**：我会在按钮和实际菜单中添加 ID。这样你就可以在 jQuery 中使用 ID 而不是类来调用它们。

# ios - 让 View Controller 从数据模型文件中检索数据

> ID：15532510
> 
> 赞同：0
> 
> 时间：2013-03-20T19:04:53.453
> 
> 标签：ios, datamodel

我对编程很陌生。我正在创建一个非常简单的 iOS 测验应用程序，只是为了练习。这是我到目前为止所做的：

*   我使用“单一视图”模板创建了 Xcode 项目。因此，我已经有了 appDelegate 文件、视图控制器和视图（XIB 文件）。

    *   我的视图只有四个控制器：2 个 UILabel 和 2 个 UIButton。每个按钮都与一个标签配对。我有这 4 个控制器设置的所有连接。当用户点击标记为“获取状态”的按钮时，它需要使用我在名为 stateArray 的 NSMutableArray 中的状态名称填充它的标签。当用户点击标有“获取资本”的按钮时，需要在其标签中填充该州的首都。

    *   我创建了一个继承自 NSObject 的 Objective-C 类来保存我的名为 dataModel 的数据模型。在 dataModel.m 文件中，我创建并填充了两个数组。

    *   在视图控制器 .m 文件中，我导入了 dataModel.h 文件。

我遇到的唯一问题是让视图控制器从 dataModel 文件中检索数据。我已经读过我可能应该使用委托，但我只是想知道如何更简单地做到这一点......我准备了一些关于视图控制器和数据模型文件应该相互引用的东西？如果是这样，编码会是什么样子？

到目前为止，这是我的编码：

```
#import <UIKit/UIKit.h>
@interface onMyOwnViewController : UIViewController

@property (weak, nonatomic) IBOutlet UILabel *stateField;
@property (weak, nonatomic) IBOutlet UILabel *answerField;

- (IBAction)answerButton:(id)sender;
- (IBAction)stateButton:(id)sender;
@end

#import "onMyOwnViewController.h"
#import "dataModel.h"

@implementation onMyOwnViewController

- (IBAction)stateButton:(id)sender
{

    NSString *myState = [stateArray objectAtIndex:0]; //this line produces an error.
    [_stateField setText:myState];
    [_answerField setText:@"hi"];    
}

- (IBAction)answerButton:(id)sender
{

}
@end 
```

下面是我的dataModel编码：

```
#import <Foundation/Foundation.h>

@interface dataModel : NSObject

@property(nonatomic, strong) NSMutableArray *answerArray;
@property(nonatomic, strong) NSMutableArray *stateArray;

@end

#import "dataModel.h"
#import "onMyOwnViewController.h"

@implementation dataModel

- (id)init
{
    self = [super init];
    if(self){
    _answerArray = [[NSMutableArray alloc]initWithObjects:@"Michigan", @"Illinios", nil];

    _stateArray = [[NSMutableArray alloc]initWithObjects:@"Lansing", @"Springfield",
                   nil];
    }

    return self;
}
@end 
```

当我运行应用程序时，除了从数据模型中检索数据外，一切正常。重播时，请用编码回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:11:45.520

您需要在 onMyOwnViewController 中创建 dataModel 的实例。

```
@implementation onMyOwnViewController {
  dataModel *data;
}

-(void)viewDidLoad {
  data = [[dataModel alloc] init];
} 
```

然后在你的方法调用中

```
- (IBAction)stateButton:(id)sender
{

   NSString *myState = data.stateArray[0];
   ...
} 
```

# django - Django：在 OneToOneField 上保存 id

> ID：15532511
> 
> 赞同：0
> 
> 时间：2013-03-20T19:04:58.600
> 
> 标签：django, foreign-keys, models

楷模：

```
class UserDataUpdate(models.Model):
    code = models.CharField(max_length=8)
    address = models.CharField(max_length=50)

class UserSurvey(models.Model):
    about_treatment = models.CharField(max_length=2)
    user_data_update = OneToOneField(UserDataUpdate) 
```

意见：

```
@login_required
def generate_survey(request):
    user_data_update = UserDataUpdate.objects.get(code=request.user.username)
    if request.method == 'POST':
        form = SurveyForm(request.POST)
        if form.is_valid():
            form.save()
            return redirect('/success')
    else:
        form = SurveyForm(request.GET)
    return render_to_response(
        'survey.html',
        {'form': form },
        context_instance = RequestContext(request)) 
```

形式：

```
class SurveyForm(forms.ModelForm):

    def __init__(self, *args, **kwargs): 
        super(SurveyForm, self).__init__(*args, **kwargs)
        for field in self.fields.values():
            field.widget = RadioSelect(choices=SURVEY_CHOICES)

    class Meta:
        model = Survey
        exclude = ['user_data_update'] 
```

我只需要一种在 UserSurvey 上设置 UserDataUpdate id（已经创建）的方法。

我在 generate_survey request.POST 上收到此消息：

```
user_data_update_app_usersurvey.user_data_update_id may not be NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:37:22.190

您应该清楚您获得了`user_data_update`价值，但随后不做任何事情。我猜你想在表单创建的对象上设置它：

```
if form.is_valid():
    instance = form.save(commit=False)
    instance.user_data_update = user_data_update
    instance.save() 
```

（我不明白表单`__init__`方法中的所有内容应该做什么。无论如何，您的表单中只有一个字段。）

# jquery - 制作一个虚假的进度条

> ID：15532516
> 
> 赞同：2
> 
> 时间：2013-03-20T19:05:21.750
> 
> 标签：jquery, css

我试图在模态框中创建一个人造进度条。应该让访问者在模态框停留 60 秒然后消失。

解决这个问题的最佳方法是什么？

我试图用 :hover 来说明我想要发生的事情。

```
.progressbar{
    width:80%;
    height:16px;
    margin:0 auto 20px auto;
    padding:0px;

    background:#cfcfcf;
    border-width:1px;
    border-style:solid;
    border-color: #aaa #bbb #fff #bbb;    
    box-shadow:inset 0px 2px 3px #bbb;    
}

.progressbar,
.progressbar-inner{
    border-radius:4px;
    -moz-border-radius:4px;
    -webkit-border-radius:4px;
    -o-border-radius:4px;
}

.progressbar-inner{
    width:0%; /* Change to actual percentage */
    height:100%;
    background-size:18px 18px;
    background-color: #82ae40;    
    box-shadow:inset 0px 2px 8px rgba(255, 255, 255, .5), inset -1px -1px 0px rgba(0, 0, 0, .2);
}

.progressbar:hover .progressbar-inner{
    width:100%;   
    -webkit-transition: width 60s ease-in;  
    -moz-transition: width 60s ease-in; 
    -o-transition: width 60s ease-in; 
    transition: width 60s ease-in; 
}

.progressbar .progressbar-inner,
.progressbar:hover .progressbar-inner{
    -webkit-transition: width 60s ease-in;  
    -moz-transition: width 60s ease-in; 
    -o-transition: width 60s ease-in; 
    transition: width 60s ease-in; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:18:14.793

你几乎已经做了所有事情。只需将这些过渡更改为动画并创建*关键帧*。

```
.progressbar .progressbar-inner,
.progressbar:hover .progressbar-inner{
-webkit-animation: width 60s ease-in;  
-moz-animation: width 60s ease-in; 
-o-animation: width 60s ease-in; 
animation: width 60s ease-in; 
} 
```

```
@-webkit-keyframes width {
0% {width:0%;}
100% {width:100%;}
}
@-moz-keyframes width {
0% {width:0%;}
100% {width:100%;}
}
@-o-keyframes width {
0% {width:0%;}
100% {width:100%;}
}
@keyframes width {
0% {width:0%;}
100% {width:100%;}
} 
```

在这里，您正在创建使进度条增长的动画，并将其样式设置为带有`animation`声明的元素。

一些文献：
[http ://coding.smashingmagazine.com/2011/05/17/an-introduction-to-css3-keyframe-animations/](http://coding.smashingmagazine.com/2011/05/17/an-introduction-to-css3-keyframe-animations/)
[https://developer.mozilla.org/en-US/docs/CSS/Tutorials /Using_CSS_animations](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations)

兼容性图表：[http ://caniuse.com/#feat=css-animation](http://caniuse.com/#feat=css-animation)

现场演示：http: [//jsfiddle.net/szXxe/](http://jsfiddle.net/szXxe/)

要在完成后使元素淡出，您必须为父元素 ( *the`.progressbar`* ) 制作另一个动画，并使用淡入淡出规则使其比进度条的动画更长。像这样：

```
.progressbar{
animation:fadeout 61s ease-in;
} 
```

```
@keyframes fadeout {
0% {opacity:1;}
98% {opacity:1;}
100% {opacity:0;}
} 
```

现场演示：http: [//jsfiddle.net/43nuU/](http://jsfiddle.net/43nuU/)

# python - 以不同的格式显示列表

> ID：15532517
> 
> 赞同：0
> 
> 时间：2013-03-20T19:05:23.347
> 
> 标签：python, formatting

我正在尝试以不同的格式显示列表。

例如。

```
function(list): 
```

用户输入一个数字列表，例如`[0,1,2]`，而不是返回`"[0,1,2]"`它返回`"0 1 2"`没有括号和逗号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T19:07:12.940

```
def format(lst):
    return ' '.join(str(x) for x in lst) 
```

例如：

```
>>> format([1, 2, 3])
'1 2 3' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T19:06:52.173

尝试这个：

```
print(' '.join(map(str,lst))) 
```

请注意单引号之间的空格，这就是使用字符串方法“粘合”每个引号的`str(element)`地方`join`。

# java - Servlet 通过 Post 上传文件

> ID：15532518
> 
> 赞同：0
> 
> 时间：2013-03-20T19:05:25.730
> 
> 标签：java, servlets

我正在开发一个使用 HTTP 请求将数据从一台服务器发送到另一台服务器的应用程序。一切都适用于字符串，但我不知道如何发送文件（文件从一台服务器上传到另一台服务器）。

我查看了一些示例，但我还需要能够随文件一起发送字符串（文件 ID）。

该请求是从该类的 POST 方法中的 Java 类发送的。是这样的：客户端向存储服务器发送带有 ID 的文件的上传请求。然后该存储服务器将该文件上传到另一个存储服务器......因此从第一个服务器到另一个服务器的 POST 请求是从该服务器的 POST 方法方法发送的。

非常感谢任何正确方向的示例代码或链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:26:08.640

这是我设法实施的解决方案，它有效：[http ://www.dreamincode.net/forums/topic/316513-upload-file-from-one-servlet-to-another/](http://www.dreamincode.net/forums/topic/316513-upload-file-from-one-servlet-to-another/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:34:31.613

找到了如何使用 HttpClient 发送多部分数据的[教程。](http://java.dzone.com/articles/file-upload-apache-httpclient)看一看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:36:01.633

Commons`FileUpload`包可以很容易地为您的 servlet 和 Web 应用程序添加强大的、高性能的文件上传功能。

FileUpload 解析符合 RFC 1867，“HTML 中基于表单的文件上传”的 HTTP 请求。也就是说，如果使用 POST 方法提交 HTTP 请求，并且内容类型为“multipart/form-data”，则 FileUpload 可以解析该请求，并以调用者易于使用的方式提供结果，提到[在这里](http://commons.apache.org/proper/commons-fileupload/)。

查看[此](http://commons.apache.org/proper/commons-fileupload//using.html) 链接可以为您提供更多帮助。

既然你说——

> “我还需要能够随文件一起发送字符串（文件 ID）”

您将不得不解析 Http 请求并检查它是否`FileItem`是一个表单字段（字符串/文本 - 在您的情况下是文件 ID）并相应地处理它。

这是多部分内容请求的示例代码 -

```
boolean isMultipart = ServletFileUpload.isMultipartContent(request);
        FileItemFactory factory = new DiskFileItemFactory();
        FileItem item=null;
        ServletFileUpload servletFileUpload = new ServletFileUpload(factory);
        servletFileUpload.setSizeMax(-1);

        List items =null;
        if (isMultipart) {  
            try 
            {
                items = servletFileUpload.parseRequest(request);
                Iterator iter = items.iterator();
                while (iter.hasNext()) {
                    item = (FileItem) iter.next();                  
                    if (item.isFormField()) 
                    {
//get your file Id from element to match with item.getFieldName() and do whatever you want
}
else if ( !item.isFormField() ){
//save your file here
} 
```

希望对您有所帮助。

# javascript - 缓存图像详细信息

> ID：15532522
> 
> 赞同：0
> 
> 时间：2013-03-20T19:05:50.627
> 
> 标签：javascript, image, caching

对于正在快速调整大小的图像，我是否需要缓存图像详细信息。我正在查看 chrome 开发人员工具时间线，我注意到图像解码细节和图像调整大小（图像细节也被缓存）在第一次调整图像大小时都花费了 250 毫秒，之后每次大约 18 毫秒。我是否应该手动缓存详细信息。我什至读对了吗？

![在此处输入图像描述](../Images/e0a69746877cfd827adf3d9b2e5cef33.png)

# javascript - 客户端应用程序的 Sinatra cookie

> ID：15532523
> 
> 赞同：0
> 
> 时间：2013-03-20T19:06:00.440
> 
> 标签：javascript, ruby, cookies, client-server, sinatra

我有一个使用 sinatra 和 rack 的服务器和一个简单的客户端应用程序（Java/JavaScript，在 Tomcat 上运行），它应该使用我的服务器提供的服务。我的浏览器显示客户端应用程序，然后该应用程序将请求发送到服务器。现在我有一个问题：

是否可以将 cookie 从 ruby​​ 服务器设置到浏览器？

如果是的话：我该怎么做？

到目前为止，我这样做

```
cookies[:user_id] = user_id 
```

如[sinatra 文档中所述](http://www.sinatrarb.com/contrib/cookies.html)。

当我直接使用浏览器请求我的 sinatra 服务器时，它会设置一个 cookie。但不是当我通过我的应用程序请求它时。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:11:02.140

您正在客户端（Java 应用程序）设置 cookie，因为这是从您的 sinatra 应用程序请求的端点。为了在浏览器中设置 cookie，您必须转发这些 cookie 或将它们用作第三方 cookie，最好是直接向 sinatra 应用程序发出请求。我可能会将 cookie 从中间应用程序转发到浏览器。

# sql-server - 获取给定日期的信息/最接近给定日期的日期

> ID：15532528
> 
> 赞同：1
> 
> 时间：2013-03-20T19:06:17.367
> 
> 标签：sql-server, sql-server-2012

我正在尝试查找是否在**`status`**给定日期/最接近给定日期的日期。**`ID`****`Active/Backup`**

我的 CTE 中的数据：

```
ID      StatusDate              Status  Order
2145    2012-04-29              n/a     1
2145    2012-08-02              Backup  2
2145    2012-09-27              Backup  3
2145    2012-11-07              Backup  4
2145    2012-11-09              Active  5
2145    2012-11-12              Backup  6
2145    2012-12-13              Pending 7
2145    2012-12-18              Sold    8
2146    2012-10-15              Pending 1
2146    2012-10-15              n/a     2
2146    2012-12-19              Sold    3
4145    2012-04-24              Active  1
4145    2012-04-24              Active  2
4145    2012-05-22              Pending 3
4145    2012-09-13              Active  4
4145    2012-09-13              Active  5
4145    2012-12-05              Pending 6
4145    2012-12-19              Sold    7
7175    2012-11-08              n/a     1
7175    2012-12-01              Backup  2
7175    2012-12-05              Active  3
7175    2012-12-06              Pending 4
7175    2012-12-19              Sold    5 
```

结果 ：

```
Analysis         09/20/2012   12/19/2012  3/20/2013

Total Active         2          0           0 
```

结果的标题应为：距当前日期 6 个月前的日期，距当前日期和当前日期 3 个月前的日期。**

这是我正在努力解决的问题：

```
 ;WITH x AS 
    (
        SELECT  ID,statusdate,status , row_number() over (partition by ID order by statusdate DESC )  as RN1
        FROM 
            (SELECT ID,statusdate,status,
                   rn = row_number() over (partition by ID order by statusdate ) 
            FROM tblHistory   (nolock)
             WHERE [statusdate] <=  '20120920' AND
             ID in ('2145','2146','4145''7175')
            )  AS A
     )

SELECT  ID,statusdate,status 
FROM x 
WHERE rn1 = 1 AND status IN ('Backup','Active') 
```

# ios - 使用 Urbanairship 推送通知

> ID：15532533
> 
> 赞同：0
> 
> 时间：2013-03-20T19:06:34.153
> 
> 标签：ios, push-notification, urbanairship.com

我正在开发一个具有推送通知功能的 iOS 应用程序。它是一个体育应用程序，用户可以在其中将球员添加到他们的收藏夹列表中。每个玩家有 3 种事件。

像，

1.  球进了
2.  从裁判那里得到了一辆红色的车
3.  从裁判那里得到了一辆黄色的车

现在在这种情况下，

*   用户 X 为所有 3 种类型配置了播放器 A

    用户 Y 已将播放器 A 配置为前 2 种类型

    用户 Z 已将播放器 B 配置为最后 2 种类型

现在服务器收到玩家 A 得分的更新（第一种类型）。

有效载荷究竟应该是什么？

我试过以下

{"aps": {"badge": "+1", "alert": "玩家 A 进球 10K", "participantID":["A"],"tags":["score a Goal"]} , "别名": ["sportEvent2013"]}

目前我正在广播更新，即每台配置了 APNS 的设备都会收到推送，并且只显示与标签和参与者 ID 匹配的设备。

它确实有效，但我认为这并不合适，因为每台设备都会收到成千上万的更新（我没有使用设备令牌），因为我无法分辨谁配置了哪些事件？

请帮助我正确的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:13:21.183

您可以对其进行设置，以便当用户将播放器配置为接收特定类型的通知时，应用程序会更新您的数据库。然后，当服务器收到玩家的更新时，查询您的数据库以查找设置了该标志的人，并仅向他们发送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:35:18.887

如果您提供有关您的设置（所有客户端、服务器组件等）的更多详细信息，我可以提供更多详细信息。然而，一般的想法应该是使用城市飞艇的“标签”功能（你也可以使用别名..但这不是那么灵活）：

[UAirship标签](https://docs.urbanairship.com/display/DOCS/Client%3a+iOS%3a+Push#ClientiOSPush-SetTags)

一般概念是将用户及其设备令牌“订阅”到诸如“PlayerAGoalScored”之类的标签。然后，当更新通过时，您可以告诉城市飞艇向订阅标签“PlayerAGoalscored”的每个人发送推送

# eclipse - Maven - 为什么在“mvn clean”之后我需要在“mvn package”之前执行“Maven Update Project”？

> ID：15532534
> 
> 赞同：11
> 
> 时间：2013-03-20T19:06:35.610
> 
> 标签：eclipse, maven, maven-3, maven-plugin, pom.xml

我正在做一些测试，我想了解为什么在执行命令后`mvn clean`我需要在运行之前执行“Maven > Update Project” `mvn package`，否则我在打包过程中的一个依赖项中会出现编译错误。

看起来我的项目在运行“Maven > 更新项目”之前没有正确编译我的项目，但我不确定。这是正常的吗？

*   我正在使用 Eclipse 并通过“Run as > Maven Build”运行命令 {mvn clean} 和 {mvn package}。

这是我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.project</groupId>
    <artifactId>myProject</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>

    <properties>
        <jmockit.version>0.0.1</jmockit.version>
    </properties>

    <build>
        <testSourceDirectory>src/test/java/junit</testSourceDirectory>
        <resources>
            <resource>
                <directory>src/main/java</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </resource>
        </resources>

        <testResources>
            <testResource>
                <directory>src/test/java/selenium</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </testResource>
        </testResources>

        <pluginManagement>
            <plugins>
                <!-- Need Java 5, which is the default since v2.3 of the maven-compiler-plugin. -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.5.1</version>
                </plugin>
            </plugins>
        </pluginManagement>

        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                    <warSourceExcludes>src/main/resources/conf_development</warSourceExcludes>
                    <webResources>
                        <resource>
                            <directory>src/main/resources/conf_production</directory>
                            <targetPath>WEB-INF/classes/</targetPath>
                            <includes>
                                <include>**/*</include>
                            </includes>
                        </resource>
                        <resource>
                            <directory>src/main/resources/conf</directory>
                            <targetPath>WEB-INF/classes/</targetPath>
                            <includes>
                                <include>**/*</include>
                            </includes>
                        </resource>
                    </webResources>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <argLine>
                        -javaagent:"${settings.localRepository}"/mockit/jmockit/${jmockit.version}/jmockit-${jmockit.version}.jar
                    </argLine>
                </configuration>
            </plugin>
        </plugins>
    </build>

<dependencies>
    <dependency>
        <groupId>asm</groupId>
        <artifactId>asm</artifactId>
        <version>1.5.3</version>
    </dependency>
    <dependency>
        <groupId>bouncycastle</groupId>
        <artifactId>bcprov-jdk14</artifactId>
        <version>140</version>
    </dependency>
    <dependency>
        <groupId>c3p0</groupId>
        <artifactId>c3p0</artifactId>
        <version>0.9.1</version>
    </dependency>
    <dependency>
        <groupId>c3p0</groupId>
        <artifactId>c3p0-oracle-thin-extras</artifactId>
        <version>0.9.0.2</version>
    </dependency>
    <dependency>
        <groupId>commons-betwixt</groupId>
        <artifactId>commons-betwixt</artifactId>
        <version>0.7</version>
    </dependency>
    <dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>1.4</version>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-email</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache-core</artifactId>
        <version>2.4.2</version>
    </dependency>
    <dependency>
        <groupId>com.googlecode.ehcache-spring-annotations</groupId>
        <artifactId>ehcache-spring-annotations</artifactId>
        <version>1.1.3</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.4.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.4.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.3.2.GA</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.1.2</version>
    </dependency>
    <dependency>
        <groupId>net.sf.json-lib</groupId>
        <artifactId>json-lib</artifactId>
        <version>2.4</version>
        <type>pom</type>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>2.5.6</version>
    </dependency>
    <dependency>
        <groupId>net.fckeditor</groupId>
        <artifactId>java-core</artifactId>
        <version>2.4</version>
    </dependency>
    <dependency>
        <groupId>backport-util-concurrent</groupId>
        <artifactId>backport-util-concurrent</artifactId>
        <version>3.1</version>
    </dependency>
    <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>ojdbc14</artifactId>
        <version>10.2.0.1.0</version>
    </dependency>
    <dependency>
        <groupId>com.ibm.icu</groupId>
        <artifactId>icu4j</artifactId>
        <version>3.8</version>
    </dependency>
    <dependency>
        <groupId>mockit</groupId>
        <artifactId>jmockit</artifactId>
        <version>${jmockit.version}</version>
    </dependency>
    <dependency>
        <groupId>joda-time</groupId>
        <artifactId>joda-time</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>com.lowagie</groupId>
        <artifactId>itext</artifactId>
        <version>2.1.0</version>
    </dependency>
    <dependency>
        <groupId>atg.taglib.json</groupId>
        <artifactId>json-taglib</artifactId>
        <version>0.4.1</version>
    </dependency>
    <dependency>
        <groupId>commons-httpclient</groupId>
        <artifactId>commons-httpclient</artifactId>
        <version>3.1</version>
    </dependency>
    <dependency>
        <groupId>net.sourceforge.jexcelapi</groupId>
        <artifactId>jxl</artifactId>
        <version>2.6</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.8.5</version>
    </dependency>
    <dependency>
        <groupId>org.quartz-scheduler</groupId>
        <artifactId>quartz</artifactId>
        <version>1.8.4</version>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-server</artifactId>
        <version>2.25.0</version>
        <type>pom</type>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring</artifactId>
        <version>2.5.6.SEC03</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-agent</artifactId>
        <version>2.5.6.SEC03</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>2.5.6.SEC03</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-config-browser-plugin</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-convention-plugin</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-core</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-jasperreports-plugin</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-jfreechart-plugin</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-json-plugin</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-spring-plugin</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.velocity</groupId>
        <artifactId>velocity</artifactId>
        <version>1.6.3</version>
    </dependency>
    <dependency>
        <groupId>org.apache.velocity</groupId>
        <artifactId>velocity-tools</artifactId>
        <version>1.3</version>
    </dependency>
    <dependency>
        <groupId>com.yahoo.platform.yui</groupId>
        <artifactId>yuicompressor</artifactId>
        <version>2.4.6</version>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>net.sf.jodreports</groupId>
        <artifactId>jodreports</artifactId>
        <version>2.4.0</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>1.5.9</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-ws-core</artifactId>
        <version>1.5.9</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-oxm-tiger</artifactId>
        <version>1.5.9</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-ws-core-tiger</artifactId>
        <version>1.5.9</version>
    </dependency>
    <dependency>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
        <version>2.1</version>
    </dependency>
    <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-xjc</artifactId>
        <version>2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.ws.commons.axiom
        </groupId>
        <artifactId>axiom-api</artifactId>
        <version>1.2.5</version>
    </dependency>
    <dependency>
        <groupId>org.apache.ws.commons.axiom
        </groupId>
        <artifactId>axiom-impl</artifactId>
        <version>1.2.5</version>
    </dependency>
    <dependency>
        <groupId>javax.xml</groupId>
        <artifactId>jaxrpc-api</artifactId>
        <version>1.1</version>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium.client-drivers</groupId>
        <artifactId>selenium-java-client-driver</artifactId>
        <version>1.0.1</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
    </dependency>
    <dependency>
        <groupId>org.acegisecurity</groupId>
        <artifactId>acegi-security</artifactId>
        <version>1.0.7</version>
    </dependency>
    <dependency>
        <groupId>citizen</groupId>
        <artifactId>citizen</artifactId>
        <version>citizen</version>
    </dependency>
    <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.4</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>jasperreports</groupId>
        <artifactId>jasperreports</artifactId>
        <version>3.5.3</version>
    </dependency>
</dependencies>
</project> 
```

错误：

（记住有错误的库是一个内部库，在“Maven > 更新项目”之后它工作得很好）

```
[INFO] Compiling 2595 source files to C:\Users\user\Documents\Dev\workspace\project\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] C:\Users\user\Documents\Dev\workspace\project\src\main\java\com\project\jobs\citizen\model\service\CitizenService.java:[38
,34] cannot access org.apache.axis.client.Service
class file for org.apache.axis.client.Service not found
        Resolution2Locator r2 = new Resolution2Locator ();
[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2:09.448s
[INFO] Finished at: Fri Mar 22 11:55:14 BRT 2013
[INFO] Final Memory: 25M/274M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (default-compile) on project project: Compilation failure
[ERROR] C:\Users\user\Documents\Dev\workspace\project
\src\main\java\com\project\jobs\citizen\model\service\CitizenService.java:[38
,34] cannot access org.apache.axis.client.Service
[ERROR] class file for org.apache.axis.client.Service not found
[ERROR] Resolution2Locator r2 = new Resolution2Locator();
[ERROR] -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (default-compile) on project u
nico: Compilation failure
C:\Users\user\Documents\Dev\workspace\project\src\main\java\com\project\jobs\citizen\model\service\CitizenService.java:[38,34] can
not access org.apache.axis.client.Service
class file for org.apache.axis.client.Service not found
        Resolution2Locator r2 = new Resolution2Locator ();

    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
C:\Users\user\Documents\Dev\workspace\project\src\main\java\com\project\jobs\citizen\model\service\CitizenService.java:[38,34] can
not access org.apache.axis.client.Service
class file for org.apache.axis.client.Service not found
        Resolution2Locator r2 = new Resolution2Locator ();

    at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:729)
    at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-26T15:38:53.017

这是发生的事情：

1.  `mvn clean`删除`target`目录
2.  `mvn package`执行一些工作，但由于缺少依赖项而遇到编译错误。这就是目标文件夹出错的原因。
3.  在 Eclipse 中运行 Maven > Update Project 会导致 Eclipse 执行自己的编译，与 Maven 分开。Eclipse 的类路径与 Maven 不同，因此它的编译成功。现在该`target`目录包含所有已编译的类。
4.  现在重新运行`mvn package`成功，因为它找到了所有已经编译的类，不需要执行任何编译。

最终，问题出在`pom.xml`. 我遇到了同样的问题，在添加缺少的依赖项后，我成功地用 Maven 编译了项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T04:08:19.383

Eclipse m2e 插件（这是一种简化）读取 POM 文件并将其转换为 Eclipse 的指令，以便 Eclipse 可以完成它的工作。因为 Eclipse 始终处于控制之中，所以您的视图会正确更新并且事情非常顺利。m2e 不支持带有插件的一些更高级的 Maven 操作，因此这些操作不会发生。一些简单的东西，比如类路径与 Maven 做事的方式不同——m2e 无论如何都使用“测试”类路径，因为 Eclipse 无法预测你想要运行什么。

另一方面，执行“Run as > Maven ...”实际上调用了完全在 Eclipse 之外的程序 Maven，并要求它运行。Eclipse 不会自动知道 Maven 何时创建或删除了文件。

我通常会远离“Run as > Maven”命令。`mvn`集成很差，Eclipse 控制台界面很丑，如果您需要运行特定的 Maven 目标，从命令行调用更容易。

如果你只是想开发一个 Maven 项目，我发现 m2e 集成效果很好。我使用 Jenkins 为我处理打包和部署，所以我只使用 Eclipse 来编辑和测试我的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:24:45.730

如果有任何新的更新可用，它将更新文件。您可以在 maven clean 之后使用 maven install

# django - 加载俄语翻译时出现 Django Unicode 错误

> ID：15532537
> 
> 赞同：1
> 
> 时间：2013-03-20T19:06:43.673
> 
> 标签：django, unicode, internationalization

我正在尝试在 Django 网站上安装俄语翻译。

我所做的：在“语言环境”文件夹中，与其他语言一起创建了“ru”文件夹，然后在其中创建了“LC_MESSAGES”文件夹，这就是我放置带有翻译的“django.po”文件的地方。我手动创建了那个 .po 文件，因为翻译是作为 Excel 文件提供给我的。在那个 .po 文件中，我复制了在同一个项目的另一个 .po 文件中找到的标头，然后使用脚本创建了“msgid”/“msgstr”对，从 Excel 文件中提取此信息。我检查了文件，在手动修改了一些错误后，它似乎是正确的，并且在执行编译消息时，我没有收到任何错误，并且创建了 .mo 文件。然后我在设置文件中添加了“ru”作为一种语言。然后我重新加载了主页，在我们用来切换语言的小部件中出现了俄语。但是当我单击它时，它会重新加载页面并且我收到 Unicode 错误。

一些上下文：该站点是英文的，但已经安装了西班牙语翻译，并且可以使用非 ascii 字符正常工作。

欢迎任何想法，即使不是一个完整的解决方案，只是一种调试它的方法将不胜感激。

错误是：“ascii”编解码器无法解码位置 0 中的字节 0xd0：序数不在范围内（128）。你传入 ()

从我发现这是 ugettext 懒惰的问题，但我不明白为什么它适用于其他翻译......

我从 Django 得到一个 Unicode 提示：无法编码/解码的字符串是：������ 这个字符串会根据我尝试加载的页面而变化。

这是回溯：

```
Traceback:
File "/home/env/project/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  136\.                     response.render()
File "/home/env/project/lib/python2.7/site-packages/django/template/response.py" in render
  96\.             self._set_content(self.rendered_content)
File "/home/env/project/lib/python2.7/site-packages/django/template/response.py" in rendered_content
  75\.         content = template.render(context)
File "/home/env/project/lib/python2.7/site-packages/django/template/base.py" in render
  123\.             return self._render(context)
File "/home/env/project/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  57\.     return self.nodelist.render(context)
File "/home/env/project/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/env/project/lib/python2.7/site-packages/django/template/base.py" in render_node
  757\.         return node.render(context)
File "/home/env/project/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  127\.         return compiled_parent._render(context)
File "/home/env/project/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  57\.     return self.nodelist.render(context)
File "/home/env/project/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/env/project/lib/python2.7/site-packages/django/template/base.py" in render_node
  757\.         return node.render(context)
File "/home/env/project/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  127\.         return compiled_parent._render(context)
File "/home/env/project/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  57\.     return self.nodelist.render(context)
File "/home/env/project/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/env/project/lib/python2.7/site-packages/django/template/base.py" in render_node
  757\.         return node.render(context)
File "/home/env/project/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  64\.             result = block.nodelist.render(context)
File "/home/env/project/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/home/env/project/lib/python2.7/site-packages/django/template/base.py" in render_node
  757\.         return node.render(context)
File "/home/env/project/lib/python2.7/site-packages/django/templatetags/i18n.py" in render
  76\.         return _render_value_in_context(output, context)
File "/home/env/project/lib/python2.7/site-packages/django/template/base.py" in _render_value_in_context
  777\.     value = force_unicode(value)
File "/home/env/project/lib/python2.7/site-packages/django/utils/encoding.py" in force_unicode
  93\.             raise DjangoUnicodeDecodeError(s, *e.args)

Exception Type: DjangoUnicodeDecodeError at /
Exception Value: 'ascii' codec can't decode byte 0xd0 in position 0: ordinal not in range(128). You passed in <django.utils.functional.__proxy__ object at 0x9f3f16c> (<class 'django.utils.functional.__proxy__'>) 
```

编辑：

我试图从头开始。我删除了手动创建的语言环境文件夹和 .po 文件以尝试使用“makemessages”命令，在执行该命令期间出现此错误：

```
processing language ru
Traceback (most recent call last):
  File "./manage.py", line 15, in <module>
    execute_manager(settings)
  File "/home/env/project/lib/python2.7/site-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/home/env/project/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/env/project/lib/python2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/env/project/lib/python2.7/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/home/env/project/lib/python2.7/site-packages/django/core/management/base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "/home/env/project/lib/python2.7/site-packages/django/core/management/commands/makemessages.py", line 365, in handle_noargs
    make_messages(locale, domain, verbosity, process_all, extensions, symlinks, ignore_patterns, no_wrap, no_obsolete)
  File "/home/env/project/lib/python2.7/site-packages/django/core/management/commands/makemessages.py", line 233, in make_messages
    f.write(templatize(src, orig_file[2:]))
  File "/home/env/project/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 127, in templatize
    return _trans.templatize(src, origin)
  File "/home/env/project/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 450, in templatize
    content = u''.join(comment)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 7: ordinal not in range(128) 
```

所以很明显，其他地方一定有问题。我会继续寻找。

编辑：

显然，“makemessages”工具无法处理模板中的非 ascii 字符，无论是否标记为要翻译。我发现了很多，但我还不知道如何处理它们。一旦我找到它，我会在这里报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:16:25.453

我已经更新到 Django 1.4.5，问题完全消失了。.po 文件生成正确，编译也很顺利。

# c# - 在命名空间中声明变量是否使其成为全局变量

> ID：15532538
> 
> 赞同：0
> 
> 时间：2013-03-20T19:06:45.073
> 
> 标签：c#, winforms

我正在编写一个`windows form`基于应用程序的应用程序，`database`我想要`declare`以下内容，`global`以便我可以使用`vcon.open()` 和使用我`vcon.close()`想要`open and close my database`的任何形式。请告诉怎么做。

```
OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data 
Source=F:\workspace\RDASMS\RDASMS\rdadb.mdb"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:11:33.803

连接非常轻量级，因此您可以根据需要创建和关闭它们。也许是这样的：

```
using (var conn = new OleDbConnection(connStr))
{
    // Use your connection
} 
```

当块退出时，这将自动为您关闭连接。

您可能希望将字符串放在全局可访问的位置，例如`Config`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:15:14.967

正如其他人所说，“全局”静态类型*通常*不是最好的设计方法，但可以回答您的具体问题：

```
namespace YourApplicationNamespace
{
    public static class MyOleDbConnection
    {
        public static OleDbConnection OleDbConnection;

        public static void Open()
        {
             // Do Something with OleDbConnection.
        }

        public static void Close()
        {
             // Do Something with OleDbConnection.
        }
    }
} 
```

可用作：

```
MyOleDbConnection.Open();
MyOleDbConnection.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:18:21.970

您可以创建具有静态成员的静态类。

```
public static MyConnection
{
    public static OleDbConnection Connection = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=F:\workspace\RDASMS\RDASMS\rdadb.mdb");
} 
```

然后你可以像这样访问它：

```
var vcon = MyConnection.Connection;
vcon.Open(); 
```

这样做会为您的程序增加不必要的复杂性。您应该创建一个严格处理数据库访问的类，`MyConnection`例如上面的示例。您需要添加适当的方法来实际处理访问。在不断打开和关闭文件时，使用 Jet 提供程序会带来显着的性能影响。仅当连接长时间处于不活动状态时才应关闭它。在这种情况下，您应该按照以下方式做更多的事情：

```
using(var vcon = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=F:\workspace\RDASMS\RDASMS\rdadb.mdb"))
{
    // Your code here...
} 
```

一旦您的操作完成，这将关闭连接。但不要忘记由此可能引起的性能问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T19:12:14.313

首先，您不能在命名空间中声明全局的东西。即使有可能，这也不是一个好主意。感谢您为避免代码重复所做的努力，我建议您：

1.  将连接字符串放在配置中。
2.  声明连接并在需要时使用它，可能使用 using 模式。

关于 2 的一点：我注意到您使用喷气发动机（ Access ），这可能会通过按需打开和关闭连接而导致性能下降，或者至少在过去是这样。在任何情况下，请注意，在需要时打开连接并在完成后立即关闭它是在任何其他情况下要遵循的模式。

# sas - 如何检查 UNIX 文件夹中的每个日志文件以查找 SAS 中的“错误：”？日志文件位于 UNIX 上

> ID：15532545
> 
> 赞同：1
> 
> 时间：2013-03-20T19:07:01.567
> 
> 标签：sas

试图创建一个包含日志文件名和对应错误的数据集，其中在日志文件中包含“错误：”。日志文件位于 UNIX 上，我想访问 SAS 上的那个 unix 路径并搜索“错误：”字符串并创建一个具有日志文件名和错误的数据集。我不知道如何实现这一目标....有什么帮助吗？

在此先感谢，山姆。

这是我正在寻找的示例。假设我在 UNIX 上的 /tcrsk/dev/Logs 文件夹下有一个.log、b.log、c.log、...n.log 文件。正在尝试一个程序循环遍历所有日志文件并创建一个包含 2 个变量的数据集， `LOg_Name ERROR_Message a.log ERROR:Missing b.log ERROR:No data set c.log ERROR:A lock is not avialable` 我猜这个示例提供了更多详细信息....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:33:08.220

在不了解您的文件夹结构的情况下，我无法评论问题的第一部分。一旦你的日志文件的名称是已知的，你可以使用类似下面的东西。

下面的代码创建了 2 个数据集。第一个只是完整的日志，日志中每行一个观察。第二个数据集仅包含那些被标识为“错误”的行。请注意，我将某些警告和注释语句视为错误，因为它们可能会隐藏代码中的拼写错误或其他语法或语义问题：

```
%let logfile = myfile.log;

**
** READ IN LOGFILE. CHECK FOR PROBLEMS
*;

data problems log;
  length line $1000;

  infile "&logfile";
  input;

  logfile = "&logfile";
  line_no = _n_;
  line    = _infile_;
  problem = 0;

  if 
  (
     line =: "ERROR:"
  or line =: "WARNING:"
  or line =: "NOTE: Numeric values have been converted to character values"
  or line =: "NOTE: Character values have been converted to numeric values"
  or line =: "NOTE: Missing values were generated as a result of performing an operation on missing values"
  or line =: "NOTE: MERGE statement has more than one data set with repeats of BY values"
  or line =: "NOTE: Invalid (or missing) arguments to the INTNX function have caused the function to return"
  or line =: "INFO: Character variables have defaulted to a length of 200"
  or line =: "NOTE: Invalid"
  )
  and not
  (
      line =: "WARNING: Your system is scheduled to expire"
  or  line =: "WARNING: The Base Product product with which Session Manager is associated"
  or  line =: "WARNING: will be expiring soon, and is currently in warning mode to indicate"
  or  line =: "WARNING: this upcoming expiration. Please run PROC SETINIT to obtain more"
  or  line =: "WARNING: information on your warning period."
  or  line =: "WARNING: This CREATE TABLE statement recursively references the target table. A consequence"
  or  line =: "WARNING: Unable to copy SASUSER registry to WORK registry. Because of this, you will not see registry customizations during this"
  or  line =: "ERROR: A lock is not available for"
  or  line =: "ERROR: Errors printed on page"
  )
  then do;
    problem = 1;
    output problems;
  end;
  output log;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:58:00.803

```
/*Creating a dat file with the list of .log files and ERROR: in their body*/    
X 'ls -1 /fbrms01/dev/Logs/*.log | xargs grep -l "ERROR:"  
                                                > /fbrms01/dev/Logs/log_error.dat';
    data log_list; **Accessing dat fil from UNIX and creating dataset on SAS;
    infile '/fbrms01/dev/Logs/log_error.dat' dsd dlm='|' lrecl=1024; 
    input Lname :$75.; 
    run;
    options symbolgen mprint mlogic;
    %macro logfile(DS);
    %let dsid = %sysfunc(open(&DS));
    /*%let obs = %sysfunc(attrn(&dsid,nobs));**To get number of observations in log_list;*/
    Proc datasets;
    Delete  All_Errors;
    %do %while (%sysfunc(fetch(&dsid)) = 0);/*To run the loop thru log_list till the end of obs*/
    %let logfile = %sysfunc(getvarc(&dsid,1));/*To get value */
            data problems ;
                length line $1000 logfile $100;
                infile "&logfile";
                input;
                logfile = "&logfile";
                line_no = _n_;
                line    = _infile_;

                if line =: "ERROR:" then do;
                output problems;
                end;
            run;
            Proc Append Base=All_Errors data=Problems force;
            Run;
        %end;
    %MEND;
    %logfile(log_list); 
```

让我知道它是否需要任何补充......谢谢，山姆。

# javascript - 从网络工作者那里获取返回值

> ID：15532546
> 
> 赞同：4
> 
> 时间：2013-03-20T19:07:03.420
> 
> 标签：javascript, web-worker

现在，我有这个，它的工作原理：

```
var myWebWorker = new Worker('myWebWorker.js');
myWebWorker.onmessage = function (myEvent) {
    $('#Print').append('Return value: ' + myEvent.data + "<br>");
};
myWebWorker.postMessage(2); 
```

我的问题是：我可以这样做吗？

```
var result = myWebWorker.postMessage(2); 
```

因为我需要网络工作者是同步的——换句话说，给出一个返回值并且在你完成之前不要返回。

编辑1：

网络工作者正在使用 openDatabaseSync 事务对本地数据库进行插入/选择。

编辑2：

看来我的问题是 Cocoa Touch 而不是 JavaScript。 这是某人在 StackOverflow 上发布[的一个聪明的 hack 。](https://stackoverflow.com/questions/5671742/send-a-notification-from-javascript-in-uiwebview-to-objectivec)

编辑3：

这是[一个更好的技巧](https://stackoverflow.com/questions/1662473/how-to-call-objective-c-from-javascript)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T19:08:18.207

Web Worker 的重点是在不阻塞 UI 的情况下委派任务。**它们不能同步。**

您可能不需要**同步**任务，但您需要围绕事件和异步任务设计代码，就像您无法设计任何 JavaScript 应用程序或任何只有同步操作的严肃 GUI 应用程序一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T19:29:05.027

如前所述，您不能同步调用工作人员。您可以编写一个等待工作人员返回消息的包装器，但这与直接在调用者的代码中执行工作人员的代码具有相同的效果。在工作代码运行期间，调用者将被阻塞。

当你应该使用工人时：

```
CPU1  CPU2    Explanation
 A            # Main script starts (in one Thread/CPU)
 |            # still runs...
 |---->B      # Offload some heavy work to Worker B (to another Thread/CPU)
 |     |      # A can do other stuff while B does some heavy work that would block A
 |<----B      # B is ready and posts the result to A
 |            # A is interrupted only shortly by B's message
 V 
```

我希望这能让事情变得更清楚。

我正在犹豫是否要添加此代码（即，请重新考虑您需要同步调用 Worker），但即使编写同步包装器也不起作用（*感谢评论者*）：

```
function syncMe(){
    var w = new Worker('myWebWorker.js');
    var data = null, ready = false;
    w.onmessage = function (e) {
        ready = true;
        data = e.data;
    };         
    w.postMessage(2)
    while(!ready){ /* block this thread forever, since `ready` is never changed */ }
    console.log(data);
} 
```

**编辑：“为什么你不能像这样同步工人”**

该`onmessage`处理程序将永远不会被调用，因为 JavaScript VM 一次只能调用一个函数并且该`syncMe`函数尚未退出。（*抱歉造成混淆*）

# cassandra - Cassandra：轮换列表

> ID：15532548
> 
> 赞同：1
> 
> 时间：2013-03-20T19:07:11.033
> 
> 标签：cassandra

假设我将事件列表存储在 Cassandra 行中，使用复合列实现：

```
{
    event:123 => 'something happened'
    event:234 => 'something else happened'
} 
```

这对我来说几乎没问题，据我所知，这是一种常见的模式。与具有`event`jsonized 列表的单列相比，它可以更好地扩展，因为很容易将新项目添加到列表中，而无需先读取然后再写回。

但是，现在我需要实现这两个要求：

*   如果最后添加的事件相同，我不想添加新事件，
*   我只想保留 N 个最后的事件。

是否有任何标准方法可以实现最佳性能？（任何存储架构更改都可以）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:12:47.413

检查事物是否已经存在，或者检查存在多少并删除额外的项目，都是读-修改-写操作，它们不太适合 Cassandra 的约束。

仅保留最后 N 个事件的一种方法是确保它们是有序的，以便您可以执行范围查询并读取最后 N 个事件（例如，在列键前面加上时间戳/TimeUUID）。这不会删除过时的事件，您需要将其作为一个单独的进程执行，但是通过这种方式，查询数据的代码只会看到最后一个 N，如果我正确解释，这是真正的要求。旧事件的垃圾收集只是一种优化，以避免保留不再需要的东西。

如果要求不是严格的 N 事件，而是不早于 T 的事件，您当然可以使用 TTL 功能，但我认为这不是您的选择。

第一个要求比较棘手。您可以在写入之前先读取并检查是否有项目，但这会很慢，除非您在 Cassandra 之外进行某种锁定，否则无法保证两个写入者不会同时读取然后两者都写，所以谁都看不到对方的写。也许这对你来说不是问题，但没有好的办法。Cassandra 不做 CAS。

我在使用 Cassandra 时处理类似情况的方法是在应用程序节点中保存已写入内容的缓存，并在写入之前检查它。然后，您需要确保每个应用程序节点都能看到同一行的所有事件，并且同一行的事件不会分布在多个应用程序节点上。一种方法是在您的应用程序节点前面有一个消息队列系统，并使用您在数据库中用作行键的相同键将事件流划分到多个队列中。

# android - Sherlock、Fragments、Tabs 和 MapView

> ID：15532554
> 
> 赞同：1
> 
> 时间：2013-03-20T19:07:53.013
> 
> 标签：android, android-fragments, actionbarsherlock, android-mapview, actionbarsherlock-map

正如我在标题中指出的那样，我已经在里面实现了 ActionBar Sherlock 和 Tab 导航。标签是片段。在一个片段中，我有一个 mapView。我在标签之间切换时遇到了一些问题。两个选项卡只是列表，其中一个是带有其他视图的 MapView，另一个带有一些设置信息。
我的问题是，当我更改标签时，我会出现一些闪烁......它的长度足以用眼睛捕捉它。这是我在常规选项卡中移动的时候，但是当我首先进入 mapview 选项卡时，我得到一个黑屏，持续时间长一点，然后闪烁。
有人有这个问题或类似的问题吗？？？
**编辑代码：**

```
@Override
    protected void onCreate(Bundle arg0) {
        super.onCreate(arg0);
        //setContentView(R.layout.sherlock);
        Log.i(TAG, "onCreate");
        settings_drawable = new StateListDrawable();
        settings_drawable.addState(new int [] {STATE_PRESSED}, getResources().getDrawable(R.drawable.jk_uma_button_settings_pressed));
        settings_drawable.addState(new int[] {}, getResources().getDrawable(R.drawable.jk_uma_button_settings_normal));

        home = new StateListDrawable();
        home.addState(new int [] {STATE_PRESSED}, getResources().getDrawable(R.drawable.jk_button_home_pressed));
        home.addState(new int[] {}, getResources().getDrawable(R.drawable.jk_button_home_normal));

        bar = getSupportActionBar();

        bar.setDisplayShowTitleEnabled(false);
        bar.setIcon(R.drawable.jk_uma_logo);

        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setHomeButtonEnabled(true);

        tabs_adapter = new TabAdapter(this);

        tabs_adapter.addTab(bar.newTab().setText(" Home").setIcon(R.drawable.jk_icon_home), "Tab1", MapHome.class, null);
        tabs_adapter.addTab(bar.newTab().setText(" Explore").setIcon(R.drawable.jk_icon_explore), "Tab2", MapExplore.class, null);
        tabs_adapter.addTab(bar.newTab().setText(" My Views").setIcon(R.drawable.jk_icon_myview), "Tab3", MapMyStreams.class, null);
    }

public static class TabAdapter implements ActionBar.TabListener {

        private final Context context;
        private final ActionBar action_bar;
        private final HashMap<String, TabInfo> tabs = new HashMap<String, TabInfo>();
        private TabInfo last_tab = null;
        private TabInfo camera_info;

        private String current_camera_tab;
        private String current_fragment_tab;

        private class TabInfo {
            private String tag;
            private Class clss;
            private Bundle args;
            private Fragment fragment;
            private Fragment fragment_details;
            private String current_fragment;

            TabInfo(String tag, Class clazz, Bundle args, String curent) {
                this.tag = tag;
                this.clss = clazz;
                this.args = args;
                this.current_fragment = curent;
            }

        }

        public TabAdapter(SherlockFragmentActivity activity) {
            super();
            this.context = activity;
            this.action_bar = activity.getSupportActionBar();
        }

        public void addTab(ActionBar.Tab tab, String tag, Class<?> clss, Bundle args){
            Log.i(((Sherlock)context).TAG, "addTab");
            TabInfo info = new TabInfo(tag, clss, args, "1");
            tab.setTag(tag);
            tab.setTabListener(this);
            tabs.put(tag, info);
            action_bar.addTab(tab);
        }

        Handler h = new Handler(){
            @Override
            public void handleMessage(Message msg) {
                super.handleMessage(msg);
                switchTab(String.valueOf(msg.obj));
            }
        };

        public void changeOnRuntime(String camera_no){
            Log.i("TABS ADAPTER", "=================changeOnRuntime========="+camera_no);
            Bundle args = new Bundle();
            args.putString("camera_no", camera_no);
            FragmentTransaction ft = ((Sherlock)context).getSupportFragmentManager().beginTransaction();

            String tag = (String) action_bar.getSelectedTab().getTag();
            TabInfo tab = tabs.get(tag);
                Fragment fragm = MapCamera.newInstance(camera_no);
                tab.fragment_details = fragm;
                tab.current_fragment = "2";
                ft.hide(tab.fragment);
                ft.add(android.R.id.content, tab.fragment_details, "Tab5");

            ft.commit();
        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            Log.i("TAB SELECTED", "===================NOT NULL=============="+ ft);
            if(ft == null){
                Log.i("TAB SELECTED", "===================NULLLLLLLLLLLL==============");
            }
            String tag = (String) tab.getTag();
            TabInfo newTab = (TabInfo) this.tabs.get(tag);
            if (last_tab != newTab) {

                    if (newTab != null) {
                        Log.i("TAB SELECTED", "===================NEW TAB==============");

                        if(newTab.current_fragment.equalsIgnoreCase("1")){
                            Log.i("TAB SELECTED", "===================NEW TAB 1==============");
                            if (newTab.fragment == null) {
                                Log.i("TAB SELECTED", "===================NEW TAB 1 NULL==============");
                                newTab.fragment = Fragment.instantiate(context,
                                        newTab.clss.getName(), newTab.args);
                                ft.add(android.R.id.content, newTab.fragment, newTab.tag);
                            }else {
                                Log.i("TAB SELECTED", "===================NEW TAB 1 NOT NULL==============");
                                ft.attach(newTab.fragment);
                            }
                        }else{
                            Log.i("TAB SELECTED", "===================NEW TAB 2==============");
                            ft.attach(newTab.fragment_details);
                        }

                    }
                    last_tab = newTab;
                    }                               
            }
        }

        public void switchTab(String tab){
            if(tab.equalsIgnoreCase("Tab1")){
                action_bar.setSelectedNavigationItem(0);
            }else if (tab.equalsIgnoreCase("Tab2")) {
                action_bar.setSelectedNavigationItem(1);
            }else if (tab.equalsIgnoreCase("Tab4")) {
                action_bar.setSelectedNavigationItem(3);
            }
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            Log.i("TAB SELECTED", "=================== 2222 ==============");
            if (last_tab != null) {
                if (last_tab.fragment != null) {
                    if(last_tab.current_fragment.equalsIgnoreCase("1")){
                        Log.i("TAB SELECTED", "=================== detach 1 ==============");
                        ft.detach(last_tab.fragment);
                    }else{
                        Log.i("TAB SELECTED", "=================== detach 2 ==============");
                        ft.detach(last_tab.fragment_details);
                    }

                }
            }
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:08:50.283

听起来您所描述的“黑色视图”是在片段之间切换时的一个已知问题，其中之一是 v2 地图。您可以在[这篇文章](https://stackoverflow.com/questions/13837697/viewpager-with-google-maps-api-v2-mysterious-black-view)中阅读更多相关信息。我自己也遇到过这个问题。引用帖子中提出的解决方案非常简单。

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<android.support.v4.view.ViewPager
    android:id="@+id/fragment_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</android.support.v4.view.ViewPager>

<!-- hack to fix ugly black artefact with maps v2 -->
<FrameLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="@android:color/transparent" />

</FrameLayout> 
```

在透明的黑色视图上添加视图可以解决此问题。不知道为什么，但确实如此。

# c# - 即使文件被移动了，如何知道文件在哪里？MVC 4

> ID：15532557
> 
> 赞同：-3
> 
> 时间：2013-03-20T19:08:11.083
> 
> 标签：c#, asp.net-mvc-3, razor

有人告诉我这是可能的，这是真的吗？我的意思是，如果我在 View 文件夹中有一个包含连接字符串的 txt 文件（它是一个示例），并且该 txt 文件的 url 是绝对的，并且该文件由另一个程序员移动到 Model 文件夹，则会出现错误。但正如我所说，有人告诉我有一种方法可以用剃须刀避免这种情况。是真的吗？如何？谢谢。对不起，如果我没有解释得那么好。让我知道

**真实场景**

我在 txt 文件中有一个连接字符串，如果由于某种原因该文件被其他人移动，则连接将失败。我不能允许那样。我需要一段代码来找出那个文件，无论它在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:15:53.510

连接字符串应该只放在 web.config 中，实际上应该只存储在网站的根目录中。

遵循它，就不会有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T22:08:55.543

文本文件中的连接字符串？好的，让我告诉你，如果有人轻松获得该文件的路径，就可以下载你宝贵的凭据

学习好的做法怎么样？

# apache - 在回溯 linux 5r3 上安装 APR 时出错

> ID：15532561
> 
> 赞同：1
> 
> 时间：2013-03-20T19:08:20.720
> 
> 标签：apache, libtool, apr, backtrack-linux

当我尝试安装 apache 服务器时，它显示以下错误`./configure`

```
checking for APR... configure: WARNING: APR version 1.4.0 or later is required, found 1.3.8
configure: WARNING: skipped APR at apr-1-config, version not acceptable
no
configure: error: APR not found.  Please read the documentation 
```

.

所以我尝试升级到 apr-1.4.6。我下载了 tarball 并将其解压缩。还`make`出现以下错误

```
libtool: link: you must specify an output file
libtool: link: Try `libtool --help --mode=link' for more information.
make[1]: *** [libapr-.la] Error 1
make[1]: Leaving directory `/root/Desktop/apr'
make: *** [all-recursive] Error 1 
```

我仍然继续`make install`

在`make install`我收到以下错误

```
libtool: link: you must specify an output file
libtool: link: Try `libtool --help --mode=link' for more information.
make: *** [libapr-.la] Error 1 
```

任何帮助如何解决这个问题？我需要`upgrade from apache 2.2.4 to apache 2.4.4.` 任何替代建议欢迎

# c# - 从服务类的视图模型中执行中继命令

> ID：15532562
> 
> 赞同：0
> 
> 时间：2013-03-20T19:08:22.780
> 
> 标签：c#, mvvm, viewmodel, mvvm-light, relaycommand

我构建了一个自定义 TreeView 类，为每个节点设置了“名称/背景”等。我还有一个可以设置的 ICommand 属性，以便每个节点可以在必要时执行自定义方法。

我在“树视图服务类”中构建所有这些，然后通过 MVVMLight Messenger 将菜单发送到用户控件。这一切都很好，但我的问题是，如果我没有为节点指定自定义命令，我希望它执行“默认操作”，该操作应该位于从 Messenger 服务接收消息的视图模型中。

基本上我的问题是：如何在 MainViewModel 中公开 RelayCommand ，以便在构建树时可以从另一个视图模型（或我的服务类）引用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:29:45.723

我相信 RelayCommand 是一个 ICommand。您可以将其作为视图模型上的属性公开：

```
public ICommand MyCommand { get; set;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T22:45:17.507

要在 ViewModel B 中引用 ViewModel A，您可以像在模板示例中一样使用 MVVMLight 的 ViewModelLocator：

您的 ViewModelLocator 类：

```
 public class ViewModelLocator
 {
    static ViewModelLocator()
    {
        ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);
        // Register your services
        //...
        // Register your ViewModels
        SimpleIoc.Default.Register<MainViewModel>();
    }

    [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Performance",
        "CA1822:MarkMembersAsStatic",
        Justification = "This non-static member is needed for data binding purposes.")]
    public MainViewModel Main
    {
        get
        {
            return ServiceLocator.Current.GetInstance<MainViewModel>();
        }
    }
} 
```

在您的 NodeViewModel 中，您可以访问您的默认命令，例如：

```
 public class NodeViewModel : ViewModelBase
  {
    private ViewModelLocator locator = new ViewModelLocator();

    public RelayCommand NodeCommand
    {
        get
        {
            return locator.Main.DefaultCommand;
        }
    }
} 
```

当您使用 MVVM Light 视觉工作室模板创建 MVVM Light 项目时，您可以找到一个完整的小示例。

希望这可以帮助！

# comments - Pydev Comment Toggle 添加缩进

> ID：15532565
> 
> 赞同：2
> 
> 时间：2013-03-20T19:08:30.927
> 
> 标签：comments, toggle, pydev, spaces, indentation

**问题：** 当我在 Pydev 中切换评论时，它会添加一个空格，不方便我手动更正此缩进。这不是早期版本的 Eclipse/Pydev 的问题。如果我单独使用注释切换键 (ctrl + /)，或者将它与取消注释键 (ctrl + \) 结合使用，则会出现此问题。

**系统版本：** Eclipse Juno（版本：4.2.2）、Pydev 2.7.3

**例子：**

```
a = 4
# a = 4
 a = 4 
```

在第 2 行中，我注释了该代码 (ctrl + /)。第 3 行我取消注释 (ctrl + /)。请注意，第 3 行中的 a 之前有一个挥之不去的空格。

使用相同版本的 eclipse 重做此示例，但使用 java 不添加空格：

```
a = 4
//a = 4
a = 4 
```

所以，我认为这是一个 pydev 问题。

**研究：**

正如我之前所说，这不是我的 Eclipse Indigo / Pydev 2.5 安装的问题。切换注释（ctrl + /）时既不添加也不减去空格。

这之前作为 java 中的问题出现在 stackoverflow 上。提供的修复对我没有影响（我使用制表符还是空格都没有关系）：

[新项目上的 Eclipse“切换注释”快捷方式缩进](https://stackoverflow.com/questions/9931263/eclipse-toggle-comment-shortcut-indents-on-new-projects)

pydev source forge 上也报告了此问题：http: [//sourceforge.net/p/pydev/bugs/1547/](http://sourceforge.net/p/pydev/bugs/1547/)

**解决方法：**

这对我来说是一个解决方案，但不是手头问题的真正解决方案。如上面链接中的建议，执行以下操作：

转到（在首选项中）：Pydev | 编辑 | 代码风格 | 代码格式化程序

对于“评论中的空格开始？” 组合框选择“不要更改手动格式”。

同样，这解决了我的问题，但对于那些希望有空格将他们的评论与评论符号分开的人来说，并没有解决手头的真正问题。

此外，由于默认安装首选项设置为：“至少一个空格”，因此您不会在第一次安装 pydev 时直观地知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-30T19:07:32.813

This may not be exactly what you're seeking, but Eclipse (Oxygen with CDT, PyDev) seems to preserve spacing spacing pretty well when using **block comments**. (under Source menu)

`Add Comment Block` `Ctrl` + `4`

`Add Single Comment Block` `Ctrl`+`Shift`+`4`

`Remove Comment Block` `Ctrl` + `5`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-15T08:32:01.347

`Ctrl`+`4`在带有 PyDev 的 Eclipse Photon 的 .py 文件中工作得很好。

对于任何不是 .py 的文件，在选择要使用的文本后可能会有用：

**编辑 -> 切换块选择**

..手动将你的`'# '`同时放在你想要的所有行上，就像在 Sublime 中一样。

# php - 在禁用 JS 的浏览器中使用 YII 小部件

> ID：15532566
> 
> 赞同：2
> 
> 时间：2013-03-20T19:08:35.070
> 
> 标签：php, javascript, html, yii

我们可以使用 YII 框架（作为 REST）+ 客户端 MVC JS 框架来设计站点，这样 -

默认情况下，HTML 从浏览器客户端中的 JS 模板呈现。但是，当 JS 在浏览器中被禁用时，它会退回到 YII 小部件并呈现在服务器端？

或者如果不是这个，请提出一些最简单处理这个的设计原则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T10:10:10.477

也许我弄错了，但使用`<noscript>`-tag 应该可以解决这个问题。

# .net - 模型验证中的条件正则表达式

> ID：15532573
> 
> 赞同：0
> 
> 时间：2013-03-20T19:09:05.337
> 
> 标签：.net, regex, asp.net-mvc, model-validation

我是正则表达式的新手，正在验证电话号码。如果电话号码以 011 开头。号码可以大于 10 位。如果它不以 011 开头，则它必须在 10-15 位之间。目前我有`(?(011)\d{10, 15}|\d{7,})`，但这不起作用。我知道我错过了一些东西，只是无法弄清楚它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:40:02.433

怎么样

```
"(011\d{7,}|\d{10,15})" 
```

假设您不想允许任何非数字，并且以开头的数字`011`必须至少有 10 位数字。

如果不使用 a`ValidationExpression`您可能必须使用`^`和锚定模式`$`。

# hadoop - Hadoop distcp 是否复制副本

> ID：15532575
> 
> 赞同：0
> 
> 时间：2013-03-20T19:09:13.960
> 
> 标签：hadoop

如果我使用 distcp 在 2 个集群中复制数据，它是复制所有副本还是仅复制 1 个数据副本并将其复制到新集群上？

例如，我尝试从复制因子（RF）为 3 的集群复制 3gb 数据。 distcp 会复制完整的 3gb 数据，还是知道由于 RF 为 3，它只需要移动 1gb（一个副本）数据。最后在目标集群上，它查看 RF 并相应地复制数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:36:57.733

原始数据大小很重要。如果原始数据为 1 GB，则复制因子 = 3 最多需要 3x1 GB。将数据从一个集群复制到另一个集群时，原始数据很重要。只有 1 GB 的原始数据会被复制到目标集群。

HDFS 在内部处理块的复制。它会注意到集群上的新数据并相应地复制那些复制不足的块，即副本比RF少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T12:32:35.713

当您使用 distcp 进行复制时，只会复制/复制实际数据（即数据的 1 个副本）。复制将由框架处理，就像将新数据写入 HDFS 时的处理方式一样。除此之外，如果 distcp 在 2 个集群之间，您还可以指定是否要在源处保留复制因子。

欲了解更多信息：
[https ://hadoop.apache.org/docs/stable1/distcp.html](https://hadoop.apache.org/docs/stable1/distcp.html)

# vb.net - 如何访问列表中的所需项目？

> ID：15532585
> 
> 赞同：0
> 
> 时间：2013-03-20T19:09:55.383
> 
> 标签：vb.net, list, collections

我正在将以前的 VB6 代码转换为 .Net (2012) 并创建一个包含曾经在数组中的数据的类。

```
Structure defIO
  dim Index as integer
  dim Name as string
  dim State as Boolean
  dim Invert as Boolean
end structure
public IO(128) as defIO 
```

现在我可以访问数组中的每个元素： IO(3).Name = "Trey"

因为我想添加这个数组结构的一些功能，所以我创建了一个类。这会保存数据，并将在类内为我做一些操作（如果需要，反转数据等）。然后我创建了该类并生成了该类的列表。

```
Public Class clsIO

    Private Shared pState As Boolean
    Private Shared pInvert As Boolean
    Private Shared pIndex As Integer
    Private Shared pName As String

    Public Sub New()
        Try
            pState = False
            pInvert = False
            pIndex = 0

        Catch ex As Exception
            MsgBox("Exception caught!" & vbCrLf & ex.TargetSite.Name & vbCrLf & ex.Message)
        End Try
    End Sub

    Property Name As String
        Get
            Name = pName
        End Get
        Set(value As String)
            pName = value
        End Set
    End Property

    Property State As Boolean
        Get
            State = pState
        End Get
        Set(value As Boolean)
            If pInvert = True Then
                pState = Not value
            Else
                pState = value
            End If
        End Set
    End Property

    Property Invert As Boolean
        Get
            Invert = pInvert
        End Get
        Set(value As Boolean)
            pInvert = value
        End Set
    End Property

    Property Index As Integer
        Get
            Index = pIndex
        End Get
        Set(value As Integer)
            pIndex = value
        End Set
    End Property

    End Class

    DInList.Add(New clsIO() With {.Index = 0, .Name = "T1ShutterInPos", .Invert = False, .State = False})
    DInList.Add(New clsIO() With {.Index = 1, .Name = "T2ShutterInPos", .Invert = False, .State = False})
    DInList.Add(New clsIO() With {.Index = 2, .Name = "T3ShutterInPos", .Invert = False, .State = False})
    DInList.Add(New clsIO() With {.Index = 3, .Name = "RotationPos1", .Invert = False, .State = False})
    DInList.Add(New clsIO() With {.Index = 4, .Name = "RotationPos2", .Invert = False, .State = False})
    DInList.Add(New clsIO() With {.Index = 5, .Name = "RotationPos3", .Invert = False, .State = False}) 
```

现在我想访问列表中的特定元素：

```
DInList(1).Name = "Test" 
```

这不起作用。如果不遍历列表中的所有项目，我不知道如何访问列表中的特定元素。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:28:48.737

从类变量声明中删除`Shared`关键字。您将它们定义为类变量，因此类的每个实例都没有自己的副本。这意味着最后一次更新会覆盖之前的更新，并且更改该类的任何对象都会影响它们。

# javascript - 建立互联网连接后重定向网页

> ID：15532586
> 
> 赞同：3
> 
> 时间：2013-03-20T19:10:00.643
> 
> 标签：javascript, jquery, html

我正在为工作构建一个网页信息亭。当计算机启动时，它会立即加载信息亭，但连接到网络大约需要一分钟。用户看到的第一件事是连接错误，因为信息亭尝试访问实时页面，但还没有互联网。自助服务终端浏览器使用**Chrome。**

为了防止最初的错误，我正在尝试创建一个本地托管的网页来检查互联网连接并等待建立。然后它重定向到实时页面。

这是最初的离线本地托管页面。它应该从这里重定向到实时页面。显然在 Chrome 中，navigator.onLine 只检查 Chrome 是否设置为“在线模式”，但实际上并不测试实时连接。

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Kiosk Splash</title>
  <link rel=stylesheet type="text/css" href="jquery/css/ui-lightness/jquery-ui-1.10.2.custom.css">
  <script src="jquery/js/jquery-1.9.1.js"></script>
  <script src="jquery/js/jquery-ui-1.10.2.custom.js"></script>
</head>
<body>
<div id="dialog" style="text-align:center;">
    <p>
        <font font face="verdana" size="5">The Kiosk is establishing a connection to the network...</font>
    </p>
    <div id="progressbar" style="width: 50%; margin: 0 auto;"></div>
</div>
<script>
$( "#dialog" ).dialog({ minWidth: 1000 });
$(".ui-dialog-titlebar-close", this.parentNode).hide();
$( "#progressbar" ).width(800);
$( "#progressbar" ).progressbar({
  value: false
});
while(true){
    if(navigator.onLine){
        window.location.replace("http://stackoverflow.com");
        break;
    }
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:13:23.227

我不知道`navigator.onLine`它是如何工作的。但它应该尝试连接到服务器并继续尝试直到它连接到服务器。连接重定向后

```
 function connect(){
      try{
        $.ajax({url:"http://itunes.apple.com/search?term=metallica", // any url which return json
        success: function(){
        location.href = "http://google.com"  
     },
     error: function(e){
         location.href = "http://google.com";
     }, 
       dataType:"json"
   });
}catch(e){
     console.log(e);         
    setTimeout(connect, 5000);
}
} 
connect(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:20:14.760

如果 navigator.online 不起作用，让我们手动执行此操作。

一种可能性是通过查看是否可以 ping 服务器来检查连接。为此，请设置一个尝试检索数据的 ajax 调用。如果它成功返回，那么您已连接！然后您可以重定向到新页面。

```
$(function() {
  var myVar=setInterval(function(){ pingServer(); }, 1000),
      urlOnServer = "http://www.google.com",
      urlOfHomePage = "http://www.yahoo.com";

  function pingServer() {
    $.ajax({
      url: urlOnServer,
      data: null,
      dataType: 'json',
      success: function(result) {
        window.location = urlOfHomePage;
      }
    });
  } 
}); 
```

# c# - System.Runtime.InteropServices.COMException (0x8000500C) 在 .Net 中提交对 DirectoryEntry 的更改时发生

> ID：15532587
> 
> 赞同：2
> 
> 时间：2013-03-20T19:10:01.403
> 
> 标签：c#, .net, ssl, https, iis-8

下面是 C# 中的代码，我试图将现有证书的 SSL 绑定添加到 IIS 服务器中的“默认网站”。但我不断得到

> System.Runtime.InteropServices.COMException (0x8000500C) 在语句“website.Properties["SSLCertHash"].Add(x509.GetCertHash());”中。

你知道原因吗？

```
string defaultWebsite = "Default Web Site";

foreach (DirectoryEntry website in sites)
{
    if (website.Properties["ServerComment"] != null)
    {
        if (website.Properties["ServerComment"].Value != null)
        {
            SrmLogManager.logMessage(SrmLogMgrLevel.SRM_LOGMGR_LEVEL_INFO, funcName + "Website found" + website.Properties["ServerComment"].Value.ToString());

                PropertyCollection pc = website.Properties;
                IDictionaryEnumerator ide = pc.GetEnumerator();
                ide.Reset();
                while (ide.MoveNext())
                {
                    PropertyValueCollection pvc = ide.Entry.Value as PropertyValueCollection;

                    // Dump out the website properties into the log, can be removed in future
                    SrmLogManager.logMessage(SrmLogMgrLevel.SRM_LOGMGR_LEVEL_INFO,"Name: "+ ide.Entry.Key.ToString());
                    SrmLogManager.logMessage(SrmLogMgrLevel.SRM_LOGMGR_LEVEL_INFO,"Value: " + pvc.Value);
                }
                // Add the Secure (https) binding to port 443 at hostname = localhost
                website.Properties["SecureBindings"].Clear();
                website.Properties["SecureBindings"].Add(":443:localhost");

                // Bind the AppAssure certificate 
                website.Properties["SSLCertHash"].Clear();
                website.Properties["SSLCertHash"].Add(x509.GetCertHash());
                website.CommitChanges();

            if (string.Compare(website.Properties["ServerComment"].Value.ToString(), defaultWebsite) == 0)
            {
                SrmLogManager.logMessage(SrmLogMgrLevel.SRM_LOGMGR_LEVEL_INFO, funcName + "Default Website is : " + website.Properties["ServerComment"].Value.ToString());

            }
        }
    }
} 
```

这是我得到的例外：

> 绑定 AA 证书时发生异常 System.Runtime.InteropServices.COMException (0x8000500C)：来自 HRESULT 的异常：System.DirectoryServices.Interop.UnsafeNativeMethods.IAds.PutEx(Int32 lnControlCode, String bstrName, Object vProp) at System.DirectoryServices.PropertyValueCollection 的 0x8000500C .OnInsertComplete(Int32 index, Object value) at System.Collections.CollectionBase.System.Collections.IList.Add(Object value) at System.DirectoryServices.PropertyValueCollection.Add(Object value) at AAA.Web.Controllers.Global.importAppAssureSoftwareCert( ) 在 c:\Users\Administrator\Documents\AppAssureAppliance2.0\SRMWebClient\AAA.Web\Controllers\Global.cs:80 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T02:30:56.803

是的，这是个问题。您必须使用低级 COM API，`DirectoryEntry`完全绕过。我是这样做的：

```
 private static void SetSslCertHash(string siteId, byte[] hash)
  {
    using (var adminBase = TemporaryComObject.Wrap(new MSAdminBase_W()))
    using (var ptrHash = new AllocHGlobal(hash))
    {
      using (var siteKey = new AdminBaseKey(adminBase.Com, adminBase.Com.OpenKey(METADATA_MASTER_ROOT_HANDLE, "/LM/W3SVC/" + siteId, METADATA_PERMISSION_READ | METADATA_PERMISSION_WRITE, 1000)))
      {
        var record = new METADATA_RECORD
        {
          dwMDIdentifier = SslCertHashCode,
          dwMDAttributes = METADATA_INHERIT,
          dwMDUserType = IIS_MD_UT_SERVER,
          dwMDDataType = BINARY_METADATA,
          pbMDData = ptrHash.Buffer,
          dwMDDataLen = hash.Length
        };
        adminBase.Com.SetData(siteKey.Handle, string.Empty, ref record);
      }
      adminBase.Com.SaveData();
    }
  } 
```

令人讨厌的`DirectoryEntry`是，这个特定属性的 API 被破坏了。无论如何，这里有更多关于低级 COM API 的帮助 - [http://support.microsoft.com/kb/313624/en-US](http://support.microsoft.com/kb/313624/en-US)

当然，您将需要`MSAdminBase_W`COM 类的 .NET 声明。在我写这段代码的时候，我找不到任何准备好的东西，所以我只是打开了“c:\Program Files\Microsoft SDKs\Windows\v7.1\Include\Iadmw.h”并从那里提取了所有的部分。在这里，供您复制和享受：

```
using System;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

namespace MSAdminBaseLib
{
  [StructLayout(LayoutKind.Sequential)]
  public struct _FILETIME
  {
    public uint dwLowDateTime;
    public uint dwHighDateTime;
  }

  [ComImport, Guid("70B51430-B6CA-11D0-B9B9-00A0C922E750"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
  public interface IMSAdminBase_W
  {
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void AddKey([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void DeleteKey([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void DeleteChildKeys([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void EnumKeys([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [Out, MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 0, SizeConst = 0x100)] ushort[] szMDName, [In] int dwMDEnumObjectIndex);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void CopyKey([In] int hMDSourceHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDSourcePath, [In] int hMDDestHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDDestPath, [In] int bMDOverwriteFlag, [In] int bMDCopyFlag);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void RenameKey([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDNewName);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void SetData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] ref METADATA_RECORD pmdrMDData);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void GetData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In, Out] ref METADATA_RECORD pmdrMDData, out int pdwMDRequiredDataLen);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void DeleteData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] int dwMDIdentifier, [In] int dwMDDataType);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void EnumData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In, Out] ref METADATA_RECORD pmdrMDData, [In] int dwMDEnumDataIndex, out int pdwMDRequiredDataLen);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void GetAllData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] int dwMDAttributes, [In] int dwMDUserType, [In] int dwMDDataType, out int pdwMDNumDataEntries, out int pdwMDDataSetNumber, [In] int dwMDBufferSize, out byte pbMDBuffer, out int pdwMDRequiredBufferSize);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void DeleteAllData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] int dwMDUserType, [In] int dwMDDataType);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void CopyData([In] int hMDSourceHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDSourcePath, [In] int hMDDestHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDDestPath, [In] int dwMDAttributes, [In] int dwMDUserType, [In] int dwMDDataType, [In] int bMDCopyFlag);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void GetDataPaths([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] int dwMDIdentifier, [In] int dwMDDataType, [In] int dwMDBufferSize, out ushort pszBuffer, out int pdwMDRequiredBufferSize);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    int OpenKey([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] int dwMDAccessRequested, [In] int dwMDTimeOut);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void CloseKey([In] int hMDHandle);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void ChangePermissions([In] int hMDHandle, [In] int dwMDTimeOut, [In] int dwMDAccessRequested);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void SaveData();
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void GetHandleInfo([In] int hMDHandle, out METADATA_HANDLE_INFO pmdhiInfo);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void GetSystemChangeNumber(out int pdwSystemChangeNumber);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void GetDataSetNumber([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, out int pdwMDDataSetNumber);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void SetLastChangeTime([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] ref _FILETIME pftMDLastChangeTime, [In] int bLocalTime);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void GetLastChangeTime([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, out _FILETIME pftMDLastChangeTime, [In] int bLocalTime);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime), TypeLibFunc(TypeLibFuncFlags.FRestricted)]
    void KeyExchangePhase1();
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime), TypeLibFunc(TypeLibFuncFlags.FRestricted)]
    void KeyExchangePhase2();
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void Backup([In, MarshalAs(UnmanagedType.LPWStr)] string pszMDBackupLocation, [In] int dwMDVersion, [In] int dwMDFlags);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void Restore([In, MarshalAs(UnmanagedType.LPWStr)] string pszMDBackupLocation, [In] int dwMDVersion, [In] int dwMDFlags);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void EnumBackups([In, Out, MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 0, SizeConst = 0x100)] ushort[] szMDBackupLocation, out int pdwMDVersion, out _FILETIME pftMDBackupTime, [In] int dwMDEnumIndex);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void DeleteBackup([In, MarshalAs(UnmanagedType.LPWStr)] string pszMDBackupLocation, [In] int dwMDVersion);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    void UnmarshalInterface([MarshalAs(UnmanagedType.Interface)] out MSAdminBase_W piadmbwInterface);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime), TypeLibFunc(TypeLibFuncFlags.FRestricted)]
    void GetServerGuid();
  }

  [StructLayout(LayoutKind.Sequential)]
  public struct METADATA_HANDLE_INFO
  {
    public int dwMDPermissions;
    public int dwMDSystemChangeNumber;
  }

  [StructLayout(LayoutKind.Sequential)]
  public struct METADATA_RECORD
  {
    public int dwMDIdentifier;
    public int dwMDAttributes;
    public int dwMDUserType;
    public int dwMDDataType;
    public int dwMDDataLen;
    public IntPtr pbMDData;
    public int dwMDDataTag;
  }

  [ComImport, Guid("70B51430-B6CA-11D0-B9B9-00A0C922E750"), CoClass(typeof(MSAdminBase_WClass))]
  public interface MSAdminBase_W : IMSAdminBase_W
  {
  }

  [ComImport, TypeLibType(TypeLibTypeFlags.FCanCreate), ClassInterface(ClassInterfaceType.None), Guid("A9E69610-B80D-11D0-B9B9-00A0C922E750")]
  public class MSAdminBase_WClass : MSAdminBase_W
  {
    // Methods
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void AddKey([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void Backup([In, MarshalAs(UnmanagedType.LPWStr)] string pszMDBackupLocation, [In] int dwMDVersion, [In] int dwMDFlags);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void ChangePermissions([In] int hMDHandle, [In] int dwMDTimeOut, [In] int dwMDAccessRequested);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void CloseKey([In] int hMDHandle);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void CopyData([In] int hMDSourceHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDSourcePath, [In] int hMDDestHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDDestPath, [In] int dwMDAttributes, [In] int dwMDUserType, [In] int dwMDDataType, [In] int bMDCopyFlag);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void CopyKey([In] int hMDSourceHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDSourcePath, [In] int hMDDestHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDDestPath, [In] int bMDOverwriteFlag, [In] int bMDCopyFlag);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void DeleteAllData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] int dwMDUserType, [In] int dwMDDataType);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void DeleteBackup([In, MarshalAs(UnmanagedType.LPWStr)] string pszMDBackupLocation, [In] int dwMDVersion);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void DeleteChildKeys([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void DeleteData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] int dwMDIdentifier, [In] int dwMDDataType);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void DeleteKey([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void EnumBackups([In, Out, MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 0, SizeConst = 0x100)] ushort[] szMDBackupLocation, out int pdwMDVersion, out _FILETIME pftMDBackupTime, [In] int dwMDEnumIndex);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void EnumData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In, Out] ref METADATA_RECORD pmdrMDData, [In] int dwMDEnumDataIndex, out int pdwMDRequiredDataLen);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void EnumKeys([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [Out, MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 0, SizeConst = 0x100)] ushort[] szMDName, [In] int dwMDEnumObjectIndex);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void GetAllData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] int dwMDAttributes, [In] int dwMDUserType, [In] int dwMDDataType, out int pdwMDNumDataEntries, out int pdwMDDataSetNumber, [In] int dwMDBufferSize, out byte pbMDBuffer, out int pdwMDRequiredBufferSize);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void GetData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In, Out] ref METADATA_RECORD pmdrMDData, out int pdwMDRequiredDataLen);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void GetDataPaths([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] int dwMDIdentifier, [In] int dwMDDataType, [In] int dwMDBufferSize, out ushort pszBuffer, out int pdwMDRequiredBufferSize);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void GetDataSetNumber([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, out int pdwMDDataSetNumber);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void GetHandleInfo([In] int hMDHandle, out METADATA_HANDLE_INFO pmdhiInfo);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void GetLastChangeTime([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, out _FILETIME pftMDLastChangeTime, [In] int bLocalTime);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime), TypeLibFunc(TypeLibFuncFlags.FRestricted)]
    public virtual extern void GetServerGuid();
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void GetSystemChangeNumber(out int pdwSystemChangeNumber);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime), TypeLibFunc(TypeLibFuncFlags.FRestricted)]
    public virtual extern void KeyExchangePhase1();
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime), TypeLibFunc(TypeLibFuncFlags.FRestricted)]
    public virtual extern void KeyExchangePhase2();
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern int OpenKey([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] int dwMDAccessRequested, [In] int dwMDTimeOut);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void RenameKey([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDNewName);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void Restore([In, MarshalAs(UnmanagedType.LPWStr)] string pszMDBackupLocation, [In] int dwMDVersion, [In] int dwMDFlags);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void SaveData();
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void SetData([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] ref METADATA_RECORD pmdrMDData);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void SetLastChangeTime([In] int hMDHandle, [In, MarshalAs(UnmanagedType.LPWStr)] string pszMDPath, [In] ref _FILETIME pftMDLastChangeTime, [In] int bLocalTime);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public virtual extern void UnmarshalInterface([MarshalAs(UnmanagedType.Interface)] out MSAdminBase_W piadmbwInterface);
  }
} 
```

接下来，实现 C# 版本的 RAII 的简单部分 - 辅助 .NET 类型：

临时通信对象：

```
 public class TemporaryComObject
  {
    public static TemporaryComObject<T> Wrap<T>(T com) where T : class
    {
      return new TemporaryComObject<T>(com);
    }
  }

  public class TemporaryComObject<T> : IDisposable where T : class
  {
    public TemporaryComObject(T com)
    {
      Com = com;
    }

    public T Com { get; private set; }

    #region IDisposable Members

    public void Dispose()
    {
      if (Com != null)
      {
        Marshal.FinalReleaseComObject(Com);
        Com = null;
      }
    }

    #endregion
  } 
```

AllocHGlobal：

```
 public class AllocHGlobal : IDisposable
  {
    public readonly IntPtr Buffer;
    public AllocHGlobal(int len)
    {
      Buffer = Marshal.AllocHGlobal(len);
    }
    public AllocHGlobal(byte[] data) :
      this(data.Length)
    {
      Marshal.Copy(data, 0, Buffer, data.Length);
    }

    #region Implementation of IDisposable

    public void Dispose()
    {
      Marshal.FreeHGlobal(Buffer);
    }

    #endregion
  } 
```

AdminBaseKey：

```
 public class AdminBaseKey : IDisposable
  {
    private readonly IMSAdminBase_W m_adminBase;
    public readonly int Handle;

    public AdminBaseKey(IMSAdminBase_W adminBase, int handle)
    {
      m_adminBase = adminBase;
      Handle = handle;
    }

    #region Implementation of IDisposable

    public void Dispose()
    {
      m_adminBase.CloseKey(Handle);
    }

    #endregion
  } 
```

而已。为我工作。

# java - 在循环中使用递归——糟糕的风格？

> ID：15532589
> 
> 赞同：-4
> 
> 时间：2013-03-20T19:10:01.687
> 
> 标签：java, loops, recursion, styles

一个简单的问题，我只是想知道在循环中递归调用该方法是否被认为是糟糕的风格。我知道人们会因为递归的时间和空间成本而遇到问题，所以我想循环和递归会被认为效率更低且成本更高。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T19:11:45.283

并非如此 - 有时您必须这样做，例如在递归爬取树数据结构时：

```
public void crawl(TreeNode node) {
    TreeNode[] children = node.getChildren();
    for(TreeNode child:children) {
        crawl(child);
    }
} 
```

# c++ - 如何计算 ELF 文件中的静态初始化程序？

> ID：15532590
> 
> 赞同：3
> 
> 时间：2013-03-20T19:10:01.783
> 
> 标签：c++, linux, gcc, elf

我正在尝试计算 C++ 文件中的静态初始化程序。

我已经拥有的解决方案（曾经与 gcc-4.4 一起使用）正在查看 .ctors ELF 部分的大小。

升级到 gcc-4.6 后，这似乎不再返回有效结果（静态初始化器的计算数量为 0，这与现实不符，例如由 nm 返回）。

现在的问题是我希望解决方案即使在没有符号的情况下也能正常工作（否则我会使用 nm）。

下面是示例可执行文件的 readelf -SW 的输出：

有 35 个节头，从偏移量 0x4f39820 开始：

```
Section Headers:
  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al
  [ 0]                   NULL            00000000 000000 000000 00      0   0  0
  [ 1] .interp           PROGBITS        00000174 000174 000013 00   A  0   0  1
  [ 2] .note.ABI-tag     NOTE            00000188 000188 000020 00   A  0   0  4
  [ 3] .note.gnu.build-id NOTE            000001a8 0001a8 000024 00   A  0   0  4
  [ 4] .gnu.hash         GNU_HASH        000001cc 0001cc 000918 04   A  5   0  4
  [ 5] .dynsym           DYNSYM          00000ae4 000ae4 00a5e0 10   A  6   1  4
  [ 6] .dynstr           STRTAB          0000b0c4 00b0c4 00ef72 00   A  0   0  1
  [ 7] .gnu.version      VERSYM          0001a036 01a036 0014bc 02   A  5   0  2
  [ 8] .gnu.version_r    VERNEED         0001b4f4 01b4f4 000450 00   A  6  13  4
  [ 9] .rel.dyn          REL             0001b944 01b944 268480 08   A  5   0  4
  [10] .rel.plt          REL             00283dc4 283dc4 0048c8 08   A  5  12  4
  [11] .init             PROGBITS        0028868c 28868c 00002e 00  AX  0   0  4
  [12] .plt              PROGBITS        002886c0 2886c0 0091a0 04  AX  0   0 16
  [13] .text             PROGBITS        00291860 291860 3ac5638 00  AX  0   0 16
  [14] malloc_hook       PROGBITS        03d56ea0 3d56ea0 00075a 00  AX  0   0 16
  [15] google_malloc     PROGBITS        03d57600 3d57600 008997 00  AX  0   0 16
  [16] .fini             PROGBITS        03d5ff98 3d5ff98 00001a 00  AX  0   0  4
  [17] .rodata           PROGBITS        03d5ffc0 3d5ffc0 ffa640 00   A  0   0 64
  [18] .eh_frame_hdr     PROGBITS        04d5a600 4d5a600 0004b4 00   A  0   0  4
  [19] .eh_frame         PROGBITS        04d5aab4 4d5aab4 001cb8 00   A  0   0  4
  [20] .gcc_except_table PROGBITS        04d5c76c 4d5c76c 0003ab 00   A  0   0  4
  [21] .tbss             NOBITS          04d5df0c 4d5cf0c 000014 00 WAT  0   0  4
  [22] .init_array       INIT_ARRAY      04d5df0c 4d5cf0c 000090 00  WA  0   0  4
  [23] .ctors            PROGBITS        04d5df9c 4d5cf9c 000008 00  WA  0   0  4
  [24] .dtors            PROGBITS        04d5dfa4 4d5cfa4 000008 00  WA  0   0  4
  [25] .jcr              PROGBITS        04d5dfac 4d5cfac 000004 00  WA  0   0  4
  [26] .data.rel.ro      PROGBITS        04d5dfc0 4d5cfc0 1b160c 00  WA  0   0 32
  [27] .dynamic          DYNAMIC         04f0f5cc 4f0e5cc 000220 08  WA  6   0  4
  [28] .got              PROGBITS        04f0f7ec 4f0e7ec 00a800 04  WA  0   0  4
  [29] .data             PROGBITS        04f1a000 4f19000 0206b8 00  WA  0   0 32
  [30] .bss              NOBITS          04f3a6c0 4f396b8 04c800 00  WA  0   0 32
  [31] .comment          PROGBITS        00000000 4f396b8 00002a 01  MS  0   0  1
  [32] .shstrtab         STRTAB          00000000 4f396e2 00013e 00      0   0  1
  [33] .symtab           SYMTAB          00000000 4f39d98 4ff960 10     34 140163  4
  [34] .strtab           STRTAB          00000000 54396f8 144992a 00      0   0  1
Key to Flags:
  W (write), A (alloc), X (execute), M (merge), S (strings)
  I (info), L (link order), G (group), T (TLS), E (exclude), x (unknown)
  O (extra OS processing required) o (OS specific), p (processor specific) 
```

我应该查看 .init 还是 .init_array ？您能否指出解释 gcc 或链接器版本之间变化的相应文档？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T19:19:41.023

静态构造函数可以由三个部分中的任何一个触发`.init`，`.ctors`, 或`.init_array`（按从旧到最新的顺序）。 `.init`包含一段代码，`.ctors`并`.init_array`包含指向代码的指针。和之间的区别`.ctors`与`.init_array`执行构造函数的整体顺序有关。据我所知，除了代码注释和邮件列表帖子之外，其他任何地方都没有记录，但可能值得检查 ELF ABI 文档（g- 和 ps- 两者）。

您*不能从**任何*这些部分的大小推断文件中静态构造函数的数量。编译器生成一个调用文件中所有构造函数的特殊函数是允许的并且很常见，并且在它使用的任何部分中只引用一个函数。您可以肯定地知道（无需检查部分的内容，应用重定位，并将指针/调用指令追逐到`.text`段中并逆向工程所调用的任何内容）是：*在目标文件中*，如果这些节中至少有一个具有非零大小，则文件中至少有一个文件或全局范围的构造函数；如果所有三个部分都是空的，则没有。（在可执行文件中，所有三个部分总是非空的，因为它们定义的数据结构需要在链接时自动添加的头和尾。）

另请注意，块范围静态对象的构造函数*不会*从这些部分中调用；他们在控制第一次到达他们的声明时被调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T19:26:55.990

我假设您可以访问应用程序的所有源代码（可能还有它所调用的所有库）。这显然适用于自由软件。

然后，您可以在编译（使用最新版本的 GCC，例如 4.7 或 4.8）您的应用程序时更精确地测量它。您可以使用[MELT](http://gc-melt.org/)（这是一种用于扩展 GCC 的高级领域特定语言）或使用 C++ 编码的痛苦 GCC 插件来扩展它，以测量此类事情。

而且我不完全确定你的问题是否有确切的意义。例如，如果您的应用程序链接到某个使用可见性技巧隐藏其静态构造函数的共享库，那么了解库调用的静态构造函数有多少并未真正定义。

# delphi - 标记位图@德尔福？？？什么样的？

> ID：15532601
> 
> 赞同：4
> 
> 时间：2013-03-20T19:10:35.397
> 
> 标签：delphi

我收到一个错误：

> [DCC 错误] Unit_TProcessClass.pas(334)：E2010 不兼容类型：“TBitmap”和“tagBITMAP”

该类被定义为

```
TMyClass = Class 
private
  MyBMP : TBitmap;
  property aBMP : TBitmap read MyBMP write MyBMP; 
```

代码就像

```
processABitmap(aMyClass.aBMP) ;  -> here is the compile error !!! 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T19:13:29.030

`TBitmap`问题是VCL 中命名了两种类型。一个在`Windows`单元中定义，一个在`Graphics`单元中定义。显然，您正在传递`Windows.TBitmap`给期望的函数`Graphics.TBitmap`，反之亦然。

你几乎肯定不想与`Windows.TBitmap`. 因此，解决方案是确保您的所有单位在使用子句中的`Graphics`单位**之后列出单位。**`Windows`这样会有隐藏的效果`Windows.TBitmap`。

我的心理调试表明，`TMyClass`声明的单元要么根本不在`Graphics`其`uses`子句中列出，要么`Graphics`在之前列出`Windows`。

最后，您将如何自己解决这样的问题？好吧，尝试按 CTRL 键并单击`TBitmap`. `TMyClass`我相信他们会带你去`TBitmap`申报的`Windows`。这应该足以让您确定它不是您在编写时所指的类型`TBitmap`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-20T19:11:50.187

问题是您将VCL 位图类`Windows.TBitmap`（又名[`tagBitmap`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183371%28v=vs.85%29.aspx)，描述 Windows API 意义上的位图的记录）与[`Graphics.TBitmap`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.TBitmap)VCL 位图类混淆了。

所以，你要么想要

```
var
  b: Windows.TBitmap; 
```

或（更有可能）

```
var
  b: Graphics.TBitmap; 
```

如果省略单位，则将使用最后引用的单位。例如，如果您的`uses`子句看起来像

```
uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs; 
```

then`TBitmap`表示`Graphics.TBitmap`，这就是您通常想要的。

因此，您的问题的解决方案是您需要添加`Graphics`一些`uses`子句，或者您需要确保*在*`Graphics`列表中列出该子句。 *`Windows`*

# html5-video - Sublime video - 无法播放视频，您的浏览器无法使用 HTML5 播放视频

> ID：15532606
> 
> 赞同：1
> 
> 时间：2013-03-20T19:10:50.393
> 
> 标签：html5-video

我使用 Sublime 视频播放器在几个月前工作的项目中嵌入 .mov、.mp4 和 .mp3 文件。这一切过去都完美无缺。今天早上我回到这个项目，播放器提到“无法播放视频，您的浏览器无法使用 HTML5 播放视频”，我不能再播放一些视频/播客了。有些视频既不能在我的网站上播放，也不能在 Sublime 视频网站上提供的“发布视频”界面上播放（似乎是 MIME 问题），有些视频在“发布视频”界面上播放，但不在我的本地机器上或现场播放环境。

最近有什么变化吗？为什么我现在有这个问题？

# php - ZF2 导航带骨架默认路由

> ID：15532608
> 
> 赞同：1
> 
> 时间：2013-03-20T19:10:52.560
> 
> 标签：php, zend-framework2

目前我在 ZF2 中使用 Zend Navigation，我遇到了以下问题

在我的应用程序模块中，我有以下配置（默认骨架应用程序）

```
....
'router' => array(
    'routes' => array(
        'home' => array(
            'type' => 'Zend\Mvc\Router\Http\Literal',
            'options' => array(
                'route'    => '/',
                'defaults' => array(
                    'controller' => 'Application\Controller\Index',
                    'action'     => 'index',
                ),
            ),
        ),
        // The following is a route to simplify getting started creating
        // new controllers and actions without needing to create a new
        // module. Simply drop new controllers in, and you can access them
        // using the path /application/:controller/:action
        'application' => array(
            'type'    => 'Literal',
            'options' => array(
                'route'    => '/application',
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller'    => 'Index',
                    'action'        => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'default' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '/[:controller[/:action]]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                        ),
                    ),
                ),
            ),
        ),
        'info' => array(
            'type' => 'Zend\Mvc\Router\Http\Literal',
            'options' => array(
                'route'    => '/phpinfo',
                'defaults' => array(
                    'controller' => 'Application\Controller\Index',
                    'action'     => 'info',
                ),
            ),
        ),
    ),
), 
```

```
....
'navigation' => array(
    'default' => array(
        array(
            'label' => 'Home',
            'route' => 'home',
            'order' => -1,
            'pages' => array(
                array( //<-- this isn't working gives a link to /application
                    'label'         => 'Telefoonboek',
                    'route'         => 'application',
                    'module'        => 'application',
                    'controller'    => 'telefoonboek',
                    'action'        => 'index',
                ),
                array( //<-- this works
                    'label'         => 'Telefoonboek2',
                    'uri'           => '/application/telefoonboek', 
                ),
                array( //<-- this works
                    'label'         => 'info',
                    'route'         => 'info',
                ),
            ),
        ),

    ),
),
.... 
```

我目前只能在为菜单中我想要的“每个”项目添加路线时才能使导航工作。但这是一种奇怪的解决方案。

那么这是使菜单工作的正确方法还是我需要对页面做一些花哨的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:29:07.210

我实际上让它自己工作:)而不是使用父（应用程序）路由我需要将它指向子路由应用程序/默认问题已解决

所以配置现在看起来像

```
 ....
'navigation' => array(
    'default' => array(
        array(
            'label' => 'Home',
            'route' => 'home',
            'order' => -1,
            'pages' => array(
                array( //<-- this NOW works too
                    'label'         => 'Telefoonboek',
                    'route'         => 'application/default',
                    'controller'    => 'telefoonboek',
                    'action'        => 'index',
                ),
                array( //<-- this works
                    'label'         => 'Telefoonboek2',
                    'uri'           => '/application/telefoonboek', 
                ),
                array( //<-- this works
                    'label'         => 'info',
                    'route'         => 'info',
                ),
            ),
        ),

    ),
),
.... 
```

# matplotlib - 带有误差线的 matplotlib 直方图的数据处理

> ID：15532610
> 
> 赞同：0
> 
> 时间：2013-03-20T19:11:10.083
> 
> 标签：matplotlib, histogram

我有一个数据集，它是 python 中的元组列表，如下所示：

```
dataSet = [(6.1248199999999997, 27), (6.4400500000000003, 4), (5.9150600000000004, 1), (5.5388400000000004, 38), (5.82559, 1), (7.6892199999999997, 2), (6.9047799999999997, 1), (6.3516300000000001, 76), (6.5168699999999999, 1), (7.4382099999999998, 1), (5.4493299999999998, 1), (5.6254099999999996, 1), (6.3227700000000002, 1), (5.3321899999999998, 11), (6.7402300000000004, 4), (7.6701499999999996, 1), (5.4589400000000001, 3), (6.3089700000000004, 1), (6.5926099999999996, 2), (6.0003000000000002, 5), (5.9845800000000002, 1), (6.4967499999999996, 2), (6.51227, 6), (7.0302600000000002, 1), (5.7271200000000002, 49), (7.5311300000000001, 7), (5.9495800000000001, 2), (5.1487299999999996, 18), (5.7637099999999997, 6), (5.5144500000000001, 44), (6.7988499999999998, 1), (5.2578399999999998, 1)] 
```

元组的第一个元素是能量，第二个元素是计数器，有多少传感器受到影响。

我想创建一个直方图来研究受影响传感器的数量与能量之间的关系。我对matplotlib（和python）很陌生，但这是我到目前为止所做的：

```
import math
import matplotlib.pyplot as plt

dataSet = [(6.1248199999999997, 27), (6.4400500000000003, 4), (5.9150600000000004, 1), (5.5388400000000004, 38), (5.82559, 1), (7.6892199999999997, 2), (6.9047799999999997, 1), (6.3516300000000001, 76), (6.5168699999999999, 1), (7.4382099999999998, 1), (5.4493299999999998, 1), (5.6254099999999996, 1), (6.3227700000000002, 1), (5.3321899999999998, 11), (6.7402300000000004, 4), (7.6701499999999996, 1), (5.4589400000000001, 3), (6.3089700000000004, 1), (6.5926099999999996, 2), (6.0003000000000002, 5), (5.9845800000000002, 1), (6.4967499999999996, 2), (6.51227, 6), (7.0302600000000002, 1), (5.7271200000000002, 49), (7.5311300000000001, 7), (5.9495800000000001, 2), (5.1487299999999996, 18), (5.7637099999999997, 6), (5.5144500000000001, 44), (6.7988499999999998, 1), (5.2578399999999998, 1)]

binWidth = .2
binnedDataSet = []
#create another list and append the "binning-value"
for item in dataSet:
    binnedDataSet.append((item[0], item[1], math.floor(item[0]/binWidth)*binWidth))

energies, sensorHits, binnedEnergy = [[q[i] for q in binnedDataSet] for i in (0,1,2)]
plt.plot(binnedEnergy, sensorHits, 'ro')
plt.show() 
```

到目前为止，这很有效（尽管它甚至看起来不像直方图；-) 但是可以），但是现在我想计算每个 bin 的平均值并附加一些误差线。

有什么办法呢？我查看了 matplotlib 的直方图示例，但它们都使用将被计数的一维数据，所以你会得到一个频谱……这不是我真正想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:19:31.807

我对你正在尝试做的事情感到有些困惑，但我认为这（一阶）会做我认为你想要的：

```
bin_width = .2
bottom = 5.0
top = 8.0

binned_data = [0.0] * int(math.ceil(((top - bottom) / bin_width)))
binned_count = [0] * int(math.ceil(((top - bottom) / bin_width)))
n_bins = len(binned_data)
for E, cnt in dataSet:
    if E < bottom or E > top:
        print 'out of range'
        continue
    bin_id = int(math.floor(n_bins * (E - bottom) / (top - bottom)))
    binned_data[bin_id] += cnt
    binned_count[bin_id] += 1

binned_avergaed_data = [C_sum / hits if hits > 0 else 0 for C_sum, hits in zip(binned_data, binned_count)]

bin_edges = [bottom + j * bin_width for j in range(len(binned_data))]

plt.bar(bin_edges, binned_avergaed_data, width=bin_width) 
```

我还建议研究一下`numpy`，这样写起来会更简单。

# c# - 实体框架更新模型以反映数据库中的更改

> ID：15532611
> 
> 赞同：-1
> 
> 时间：2013-03-20T19:11:22.237
> 
> 标签：c#, entity-framework, class, model, sql-server-2008-r2

我正在开发由其他程序员开发的 Web 应用程序。
我在数据库中添加了一个新表。所以，现在我想添加一个相应的模型类。为此，开发人员已经添加了一个寺庙来自动生成模型类。我是 .NET 和实体框架的新手。根据我从互联网上获得的信息，我可以使用“运行自定义工具”来更新模型。但是当我执行它时，它不会为新表添加新的模型类。
如果有人可以给我任何指示，关于执行此操作所需的步骤。
很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:29:16.417

好吧，这取决于您使用的是哪种 EF 技术。1\. 代码优先 如果您使用代码优先，请将新模型类添加到模型部分。然后从包控制台，生成更改集并更新数据库

1.  模型优先 只需在模型浏览器中创建一个模型，创建与数据库表对应的字段并定义映射。

2.  数据库优先 只需从 Server-Explorer 拖放表并保存。

这些可能会有所帮助

[http://visualstudiogallery.msdn.microsoft.com/ee4fcff9-0c4c-4179-afd9-7a2fb90f5838](http://visualstudiogallery.msdn.microsoft.com/ee4fcff9-0c4c-4179-afd9-7a2fb90f5838)

[http://www.asp.net/web-forms/tutorials/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-1](http://www.asp.net/web-forms/tutorials/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-1)

# backbone.js - Backbone.js 集合在哪里

> ID：15532614
> 
> 赞同：0
> 
> 时间：2013-03-20T19:11:28.630
> 
> 标签：backbone.js

我正在尝试对集合进行过滤，模型是这样的学生：

```
{
   code: "some code",
   name: "some name",
   course: {
      course_code: "some code",
      course_name: "course name"
   }
} 
```

如果我尝试做这样的过滤器：

```
var myVar = students.where({code: "some code"}) 
```

myVar 将根据代码填充学生，没有问题。但是我怎样才能按 course_code 过滤呢？我已经尝试过：

```
var myVar = students.where({course: {course_code: "some code"}}) 
```

但我什么也得不到，如果我尝试

```
var myVar = students.where({course.course_code: "some code"}) 
```

我得到错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:21:51.107

假设您正在寻找课程代码为 101 的学生。

```
var student_with_course_code = students.filter(function(student) {
      return student.get('course').get('code') == 101;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:12:45.660

```
var myVar = students.find(function(s) {return s.course.course_code == "some code"} ) 
```

# parsing - 如何在语法中编写具有类似 Python 缩进的语言？

> ID：15532616
> 
> 赞同：5
> 
> 时间：2013-03-20T19:11:29.440
> 
> 标签：parsing

我正在用它自己的类似于 Python 的内置语言编写一个工具。我想让缩进在语法中有意义（这样行首的制表符和空格将代表命令的嵌套）。

做这个的最好方式是什么？

我以前写过递归下降和有限自动机解析器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T19:24:56.093

当前[CPython](http://en.wikipedia.org/wiki/CPython)的解析器[似乎是](http://hg.python.org/cpython/file/tip/Parser/Python.asdl)使用称为[ASDL](http://asdl.sourceforge.net/)的东西生成的。

关于您要求的缩进，[它是](http://docs.python.org/2/reference/lexical_analysis.html#indentation)**`INDENT`**使用称为and的特殊词法分析器标记完成的**`DEDENT`**。要复制它，只需在您的词法分析器中实现这些标记（如果您使用堆栈来存储先前缩进行的起始列，这非常容易），然后像往常一样将它们插入到您的语法中（就像任何其他关键字或运算符标记一样） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:16:10.950

查看[python 编译器](http://docs.python.org/2/library/compiler.html)，特别是[`compiler.parse`](http://docs.python.org/2/library/compiler.html#compiler.parse).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:16:36.680

我建议将 ANTLR 用于任何词法分析器/解析器生成（[http://www.antlr.org](http://www.antlr.org)）。

此外，该网站（[http://erezsh.wordpress.com/2008/07/12/python-parsing-1-lexing/](http://erezsh.wordpress.com/2008/07/12/python-parsing-1-lexing/)）有更多信息，特别是：

> Python 的缩进不能用 DFA 解决。（我仍然对它是否可以用上下文无关语法来解决感到困惑）。
> 
> PyPy 发表了一篇关于对 Python 进行词法分析的有趣文章（他们打算通过对词法分析器输出进行后处理来解决它）
> 
> CPython 的分词器是用 C 编写的。它是临时的、手写的和复杂的。这是我所知道的唯一官方的 Python 词法实现。

# asp.net - 部署简单 ASP.NET 网站的示例 WiX 配置

> ID：15532632
> 
> 赞同：1
> 
> 时间：2013-03-20T19:12:09.863
> 
> 标签：asp.net, wix

刚开始使用 WiX（3.8 版），我们很惊讶用 WiX 部署网站似乎一点也不简单。还不关心任何基础设施方面，如 IIS 或自定义操作来定制设置，甚至我们是否预编译站点，只是很乐意将一个琐碎的网站部署到文件夹中。但唯一被部署的文件是单个 dll（其名称似乎来自于在 csproj 中配置的 AssemblyName 属性）。

经过一番谷歌搜索后，我们尝试在项目参考上设置 Harvest=True，并添加`<EnableProjectHarvesting>True</EnableProjectHarvesting>`到 wixproj 文件中。但只有同一个 dll 会被部署。（Orca 显示它是 MSI 文件表中的唯一文件。）

将以下内容添加到 wixproj 成功地让 Heat、Candle 和 Light 处理来自硬编码文件夹的一组文件，但没有成功部署任何其他内容：MSI 文件表中仍然只包含一个 dll。

```
<Target Name="BeforeBuild">
    <!-- try hardcoded path -->
 <HeatDirectory 
  ToolPath="$(WixToolPath)" 
  OutputFile="%(ProjectReference.Filename).wxs" 
  Directory="C:\Dev\2010\HelloWixWebApplication\HelloWixWebApplication" 
  GenerateGuidsNow="true"
  DirectoryRefId="TARGETDIR"
  />
 <!-- some properties that Candle will use, so we should be able to to tell it to look in this folder for the .wks -->
 <PropertyGroup>
  <!--IncludeSearchPaths>.</IncludeSearchPaths -->
  <CompilerAdditionalOptions>%(ProjectReference.Filename).wxs</CompilerAdditionalOptions>
  <!--and one for Light: -->
  <LinkerAdditionalOptions>obj\Debug\%(ProjectReference.Filename).wixobj</LinkerAdditionalOptions>
 </PropertyGroup>
</Target> 
```

回到主要问题，以及真正有用但我们似乎找不到的东西：使用 WiX 部署简单 asp.net 网站的实际示例。任何人？TIA。

* * *

在回答 Rob Mensching 的问题时，从该配置生成的附加 .wxs 文件如下所示。（忽略拼写错误的 HellowWix .. 我在别处更正了。）

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="TARGETDIR">
            <Directory Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997" Name="HellowWixWebApplication" />
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dir6DED4C9E136E741825339CEA6DE213D8">
            <Component Id="cmp04A9076B920B178A9BB40ABB0D0C5785" Guid="{C6AA8596-0107-4360-85B1-503CC6F319FA}">
                <File Id="fil021D16CABEED58F6659FD4103DD68AC4" KeyPath="yes" Source="SourceDir\bin\HellowWixWebApplication.dll" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997">
            <Component Id="cmp19A9163AE8A7925CB6C4247D145B22B6" Guid="{D7B85294-12DF-4784-B6DA-BF7AEBA475C9}">
                <File Id="fil24F0BD7A232604DB4D8E369EFDB7AB28" KeyPath="yes" Source="SourceDir\Web.Release.config" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997">
            <Component Id="cmp22213FE3CD8C99A9A7563D7AFD66052E" Guid="{99E59BF6-640B-4E35-B4D8-671927AF9BD3}">
                <File Id="fil4AA1682891BEFAA2AB3CB1ABCBE9C155" KeyPath="yes" Source="SourceDir\HellowWixWebApplication.csproj" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997">
            <Component Id="cmp277C2DBCB4DB3C289C46A9784423A2C1" Guid="{7DF707B0-55BF-4899-805C-97A1A2081528}">
                <File Id="filE62AD3DD98C8055C24348922079D0E2E" KeyPath="yes" Source="SourceDir\Default.aspx.designer.cs" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997">
            <Component Id="cmp2E90B366B07FD51B623E7CF089E2932D" Guid="{17914BB7-5A02-499B-AC0C-F1F9FCB6019F}">
                <File Id="filC05278F3F8EB3611EB1EBB30F6EA4AFB" KeyPath="yes" Source="SourceDir\Web.config" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997">
            <Component Id="cmp3025675392247E7856146E4D28076668" Guid="{2905F7E7-536B-44E5-8C10-45A954CE9E86}">
                <File Id="fil8EB5092298D94AE4C4677473CAAFC0E0" KeyPath="yes" Source="SourceDir\Web.Debug.config" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dir6E0901CF23FF0CE2677DE6B8BBA3B8BD">
            <Component Id="cmp7C99050A7370BF342937DF8E86BA1863" Guid="{5DF80AF2-1459-43CD-A649-90AB1F2C57AE}">
                <File Id="filB73CA61225E396C5CD26B29E8FAA7AFE" KeyPath="yes" Source="SourceDir\obj\Debug\HellowWixWebApplication.pdb" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dir4F5CB8DBC18741F08CCFF2B59DDE3481">
            <Component Id="cmp976F1DA49CEA0FDDB2D0EA8C756C7DCF" Guid="{1069A669-F349-427F-B01A-64E942AFED2F}">
                <File Id="fil21676E8D65B4C460832839007C43343E" KeyPath="yes" Source="SourceDir\Properties\AssemblyInfo.cs" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997">
            <Component Id="cmpA0C26A291B35A1F7C8F75C76C408C355" Guid="{51AE16C4-A743-4EFA-8678-064A6550F228}">
                <File Id="fil9A7337716828B5F0F975E4B424B18285" KeyPath="yes" Source="SourceDir\Default.aspx.cs" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dir6E0901CF23FF0CE2677DE6B8BBA3B8BD">
            <Component Id="cmpAA37E12AC25051F1FB98359B5654CBB6" Guid="{4D81902A-9F6C-47D8-95AF-ED1D7062771C}">
                <File Id="fil053D1EA59D1DC9708FA9DF93DCE32BF2" KeyPath="yes" Source="SourceDir\obj\Debug\HellowWixWebApplication.dll" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dir6E0901CF23FF0CE2677DE6B8BBA3B8BD">
            <Component Id="cmpAB40655D2EEBFE8E7DA2D5C008705F7A" Guid="{01C5537C-257D-4472-BB27-778DDB5E2CEA}">
                <File Id="fil1B67F0463CE8AA35030E31A3E3BFA82D" KeyPath="yes" Source="SourceDir\obj\Debug\HellowWixWebApplication.csproj.FileListAbsolute.txt" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dir6E0901CF23FF0CE2677DE6B8BBA3B8BD">
            <Component Id="cmpD72354FE851F86AF61BFD2B884E05B34" Guid="{230F8CC1-9DF3-4B44-B6C8-617090329C82}">
                <File Id="filBF0022433A84B60F69F4ECF6724E4BA3" KeyPath="yes" Source="SourceDir\obj\Debug\DesignTimeResolveAssemblyReferencesInput.cache" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997">
            <Component Id="cmpEA2E4AE70EBEAF6FCFC294661CE9EF29" Guid="{ADE9B8A8-F4CC-4CE7-845F-5C526A9E6149}">
                <File Id="fil76F4E5B6801E021CFE962F5C33DEA62F" KeyPath="yes" Source="SourceDir\Default.aspx" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997">
            <Component Id="cmpEC68C3F57C9E201E67744CC0DA54E083" Guid="{42F553F5-90B1-4190-A6BC-1DD41928F151}">
                <File Id="fil4B42859DA454D34945962FBFB3BFB0C1" KeyPath="yes" Source="SourceDir\HellowWixWebApplication.csproj.user" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997">
            <Directory Id="dir4F5CB8DBC18741F08CCFF2B59DDE3481" Name="Properties" />
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997">
            <Directory Id="dir6DED4C9E136E741825339CEA6DE213D8" Name="bin" />
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirAD6B115F080FDBD956168CB7C622647C">
            <Directory Id="dir6E0901CF23FF0CE2677DE6B8BBA3B8BD" Name="Debug" />
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dirE7F2BE36CFADC3ED9ACCB1F42198C997">
            <Directory Id="dirAD6B115F080FDBD956168CB7C622647C" Name="obj" />
        </DirectoryRef>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:40:53.867

要包含生成的文件，它们需要包含在组件中，然后包含在功能中。

最简单的方法是修改 HeatDirectory 元素，将其更改为：

```
<HeatDirectory 
    ToolPath="$(WixToolPath)" 
    OutputFile="%(ProjectReference.Filename).wxs" 
    Directory="C:\Dev\2010\HelloWixWebApplication\HelloWixWebApplication" 
    GenerateGuidsNow="true"
    DirectoryRefId="TARGETDIR"
    ComponentGroupName="ContentFiles"
    SuppressFragments="true" /> 
```

添加`ComponentGroupName`和`SupressFragments`参数。然后使用该`<ComponentGroupRef Id="ContentFiles" />`元素将该组件包含在您的功能中。

我通常还会添加该`SuppressUniqueIds`属性，这样阅读起来会更好一些。

就我个人而言，我更喜欢将生成的 wxs 直接包含在我的项目中，并在包含新文件时进行更新。这样，这正是我想要的。另一种选择是使用 xslt 转换去除不需要的东西，如 csproj 等，并在`Transform`属性中提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T08:36:50.800

现在有一个 Visual Studio 扩展**VDProj 到 WiX 转换器**，可以从工具菜单、扩展和更新中下载。那里还有另一个与 WIX 相关的扩展，它是用于创建和操作 Wix 设置项目的设计器：

[![在此处输入图像描述](../Images/88ff3583fb4fc60215ba7482a5b56840.png)](https://i.stack.imgur.com/IpWSo.png)

# regex - 3位数字的正则表达式，有前导零？

> ID：15532634
> 
> 赞同：1
> 
> 时间：2013-03-20T19:12:16.583
> 
> 标签：regex, vb.net

我正在寻找满足以下情况的正则表达式：

有效的：
`001 where ones place can be 0-9`
`011 where ones and tens place can be 0-9`
`111 where all places can be 0-9`

无效的：
`1`
`11`

我不太擅长将这些表达分组，这是我迷路的地方。我可以做基本的事情，但获得这种类型的细节是我无法做到的。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T19:19:43.340

为了简化您的问题，您似乎想要一个介于 0 和 999 之间的值，如果小于 100，则*必须用零填充。*

尝试`\d{3}`

# php - 将字符串转换为整数返回 2147483647

> ID：15532635
> 
> 赞同：9
> 
> 时间：2013-03-20T19:12:17.973
> 
> 标签：php

很多其他人似乎都遇到过这个问题，但通常与 MySQL 数据类型相关。

我正在尝试将字符串转换为整数，如下所示：

```
$adGroupId  = '5947939396';
$adGroupId  = intval($adGroupId) 
```

但是，无论输入的字符串如何，返回的整数都是 2147483647。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T19:13:57.720

该数字太大而无法放入整数数据类型（如上所示，最大整数值为 2147483647）。[将其转换为浮点数将起作用：](http://www.php.net/manual/en/function.floatval.php)

```
$adGroupId  = '5947939396';
$adGroupId  = floatval($adGroupId) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T19:13:57.727

发生这种情况是因为它`2147483647`是最大整数值。你可以使用[浮点数](http://php.net/manual/en/language.types.float.php)

```
$adGroupId  = '5947939396';
$adGroupId  = floatval($adGroupId);
echo $adGroupId; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T19:59:21.697

只需将其类型转换为浮点数

```
$adGroupId = (float)$adGroupId; 
```

接受的答案和这一差异之间的参考： [Typecasting vs function to convert variable type in PHP](https://stackoverflow.com/questions/30940148/typecasting-vs-function-to-convert-variable-type-in-php)

# c# - ListBoxItem 内的复杂 UI

> ID：15532639
> 
> 赞同：10
> 
> 时间：2013-03-20T19:12:24.247
> 
> 标签：c#, .net, winforms, listbox, listboxitem

`ListBoxItem`在 WPF 中，我可以通过向 s 提供以下内容来将任何 UI 添加到s`ListBox`中`ItemTemplate`：

```
 <ListBox ItemsSource="{Binding}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border BorderThickness="1" BorderBrush="Gray" CornerRadius="8" Padding="4,0,4,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>

                            <CheckBox Grid.Column="1" Content="Is Active Customer" IsChecked="{Binding IsActive}"/>

                            <Label Content="Id:" Grid.Row="1" HorizontalAlignment="Right"/>
                            <Label Content="Name:" Grid.Row="2" HorizontalAlignment="Right"/>

                            <TextBox Text="{Binding Id}" Grid.Row="1" Grid.Column="1"/>
                            <TextBox Text="{Binding Name}" Grid.Row="2" Grid.Column="1"/>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

结果是：

![在此处输入图像描述](../Images/a9cf967b2fb455e1adb8b08523aefc3a.png)

有什么方法可以在 Windows 窗体中实现相同的功能吗？

**编辑：**

1 - 有什么方法可以在 Windows 窗体中实现相同的功能，同时保持和`separation of concerns`之间的方式，如果我以后想完全重新定义，我不必重构整个应用程序？`View``Application Logic``View`

2 - winforms 是否支持数据绑定，使得我的每个`ListBoxItems`都可以绑定到一个 complex `Entity`，最终包括从模型数据到 UI 数据的中间类型转换，这样我就不必编写大量填充视图的样板代码，然后将 UI 值传递回模型以保存？

3 - 如果我想以`Animations`这样一种方式进行介绍，即当前`SelectedItem`会以动画方式将自身扩展为某种“行详细信息”模式，您可以在其中看到很多附加信息，该怎么办？

4 - winforms 是否支持`UI Virtualization`这样一种方式，如果我有，比如说 100 万个项目，它不需要一生来加载 UI，并且只渲染屏幕上可见的内容？

5 - 假设我想在方程式中引入复杂的图形。winforms渲染硬件加速吗？

6 - 我如何`Resolution Independent`以这样一种方式进行所有这些操作，使 ListBox 及其所有内容拉伸到可用的窗口大小，以便在保持与较小屏幕的兼容性的同时利用更大的屏幕？

7 - 建议使用`ListView`控件而不是常规控件`ListBox`，是否`ListView`提供向其中添加任何 UI 的能力？例如，我可以为每个项目添加视频吗？还是带有保存和编辑按钮的复杂主/详细模板？

8 - winforms 是否提供一致且充分的[文档模型](http://msdn.microsoft.com/en-us/library/ms748388.aspx)，可以创建高保真所见即所得文档和其他类型的丰富内容？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-23T06:20:54.980

要回答首要问题 - 如何在 WinForms 中执行此操作 - 我建议以下内容：

1.  在您的 WinForms 应用程序中使用 WPF ListBox，包装在 ElementHost 中。这有其自身的问题，但我认为这是获得预期效果的最干净的方法。

    *如果这不符合要求，那么*

2.  使用具有支持此功能的组件的第三方控制套件（Infragistics 和 DevExpress 都支持）。

3.  旋转您自己的派生 ListBox 控件，该控件覆盖绘制等以呈现所需的内容。

对于您的个人问题：

1.  ^(*有没有什么方法可以在 Windows 窗体中实现相同的效果，同时保持`separation of concerns`在`View`和之间`Application Logic`，这样如果我以后想完全重新定义`View`，我就不必重构整个应用程序了？*)
    过去，我在 Windows 窗体中使用过 MVP（模型-视图-演示者）范例。它用于将视图与业务逻辑分离，尽管不如使用 WPF 的 MVVM 方法那么干净。我能给出的最好建议是：不要将业务逻辑放在事件处理程序中。

2.  ^(*winforms 是否支持数据绑定，使得我的每一个`ListBoxItems`都可以绑定到一个 complex `Entity`，最终包括从模型数据到 UI 数据的中间类型转换，这样我就不必编写大量的样板代码填充视图，然后将 UI 值传递回模型以保存？*)
    不可以。Windows 窗体数据绑定不支持复杂的数据绑定。您可以通过 ICustomTypeDescriptor 或 IBindingSource 自己实现一些东西，它们可以采用复杂的路径并评估它们以用于绑定目的......但是为此没有任何现成的东西。

3.  ^(*如果我想以`Animations`这样一种方式进行介绍，即当前`SelectedItem`会以动画方式将自身扩展为某种“行详细信息”模式，您可以在其中看到很多附加信息，该怎么办？*)
    您必须滚动自己的 Windows 窗体 ListBox 和 ListBoxItems 并覆盖绘制操作。

4.  ^(*winforms 是否支持`UI Virtualization`这样一种方式，如果我有，比如说 100 万个项目，它不需要一生来加载 UI，并且只渲染屏幕上可见的内容？*)
    不是开箱即用，但一些第三方控制套件具有支持虚拟化类型的组件......但与 WPF 所做的完全不同。

5.  ^(*Say I wanted to introduce complex graphics to the equation. Is winforms rendering hardware-accelerated?*)
    Windows Forms is based on GDI+. GDI+ is not hardware accelerated: [Windows Forms very slow under Windows7?](https://stackoverflow.com/questions/4796532/windows-forms-very-slow-under-windows7)

6.  ^(*How do I make all this `Resolution Independent` in such a way that the ListBox and all its contents stretch to the available window size in order to leverage larger screens while maintaining compatibility with smaller ones?*)
    You can use Docking and Anchoring in Windows Forms to accomplish this. Or you can add custom event handlers to perform appropriate layout adjustments based on resolution and Window size.

7.  ^(*建议使用`ListView`控件而不是常规控件`ListBox`，是否`ListView`提供向其中添加任何 UI 的能力？例如，我可以为每个项目添加视频吗？还是带有保存和编辑按钮的复杂主/详细模板？*)
    这很简单……但 ListView 只是一个支持多种视图类型的 ListBox。它在数据绑定方面也受到更多限制。[http://blog.gfader.com/2008/09/winforms-listbox-vs-listview.html](http://blog.gfader.com/2008/09/winforms-listbox-vs-listview.html)。

8.  ^(*winforms 是否提供一致且充分的 [文档模型][2] 以支持创建高保真所见即所得文档和其他类型的丰富内容？*)
    一点都不。一点儿都没有。

简而言之，如果这是一个可接受的解决方案，我会将您的 WPF ListView 包装在 ElementHost 中，然后就这样结束了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:27:11.463

我们通过在可滚动面板中使用 UserControls 来做到这一点。准备了一个包含所有编辑控件的用户控件。将它们添加到 dosk 属性设置为 Top 的可滚动面板。通过观察添加的用户控件项上的焦点和单击事件来实现项选择行为。

# javascript - 添加字符 jquery 时触发事件

> ID：15532641
> 
> 赞同：-1
> 
> 时间：2013-03-20T19:12:35.280
> 
> 标签：javascript, jquery

当我在文本框中输入一个字符时，我想重新加载一个页面，并且在重新加载后，将光标移回`textbox.`当我从文本框中删除一个字符时，它（浏览器）不应该重新加载。

我正在尝试这个，但它不起作用

```
$('#id_BasePairs').bind('input', function() { 
location.reload();
 $('textbox').focus();
 }); 
```

应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:15:33.450

放入`$('textbox').focus();`，`$(document).ready`重新加载页面时会聚焦。

然后将您的按键事件更改为：只要输入的键不是`backspace`或`del`

```
 $(document).ready(function () {
     $('#textbox').focus();

     $('#textbox').keyup(function (e) {
         if (e.keyCode != 8 && e.keyCode != 46) {
             location.reload();
         }
     });
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T19:19:42.300

使用 keyup 函数检查键入的字符.. 检查 keycode 8 和 46 是否删除和退格，如果没有重新加载...你必须在重新加载之前关注输入..因为重新加载后的代码不会被调用....

```
 $(function(){
 $('#inputId').focus();
 $('#inputId').keyup(function(e){
    if(e.keyCode != 8 && e.keyCode != 46)
     { 
        location.reload();
     }
 });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T19:15:42.270

你的策略有一个致命错误

```
location.reload();
// all the code from now on is irrelevant as the page reloads.
...
... 
```

# javascript - 抽象一个js验证方法

> ID：15532642
> 
> 赞同：1
> 
> 时间：2013-03-20T19:12:36.600
> 
> 标签：javascript, validation

我在我的网站上，我目前在不同的页面上有几种表格。每个都在提交时调用一个js验证方法。（它们也是经过验证的服务器端，我也只是在 js 中这样做，以防止不必要的页面刷新）。此验证方法因页面而异。例如，对于注册页面，它会检查用户是否已经存在、是否填写了所有字段以及密码是否匹配。在联系页面上，它只检查 2 封电子邮件是否匹配。现在对我来说，将这些验证方法中的每一个分开似乎很愚蠢，因为它们所做的一些检查是在其他地方完成的。有什么方法可以抽象出来吗？

# mysql - MYSQL - 仅当 LEFT JOIN 中的行不存在时才选择

> ID：15532646
> 
> 赞同：18
> 
> 时间：2013-03-20T19:12:51.967
> 
> 标签：mysql, sql, database, join

我有 2 个简单的 mysql 表。第一个 1 称为 mail 并有 2 行：

```
sender | receiver
Marley | Bob 
Saget  | Bob 
```

第二个称为块并有 1 行：

```
blocker | blocked
  Bob   | Marley 
```

我想从发送 Bob 电子邮件但未在阻止表中阻止的第一个表中选择发件人。所以结果应该是：

```
sender 
 saget 
```

我尝试了以下查询，但没有返回结果：

```
SELECT * FROM mail  
LEFT JOIN block ON (block.blocker = 'Bob') 
WHERE (block.blocked <> mail.sender) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-20T19:15:35.400

左连接将为`null`不匹配生成行。这是您需要过滤
的那些行。`null`

```
SELECT * FROM mail  
LEFT JOIN block ON (block.blocker = 'Bob') 
WHERE block.blocker IS NULL 
```

加入一个固定值是一种扼杀，但是，一个更常见的连接（给定你的表）是：

```
SELECT * FROM mail  
LEFT JOIN block ON (block.blocker = mail.receiver
                and block.blocked = mail.sender)<<-- these should match
WHERE block.blocker IS NULL                     <<-- select only mismatches
AND mail.receiver like 'bob'; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-20T19:19:02.190

尝试这个：

```
SELECT sender
FROM mail m
WHERE NOT EXISTS (SELECT 1 FROM block 
                  WHERE blocker = m.receiver 
                  AND blocked = m.sender) 
```

# java - 从 Java 中的 WSDL 导入 Web 服务客户端

> ID：15532647
> 
> 赞同：0
> 
> 时间：2013-03-20T19:12:53.127
> 
> 标签：java, web-services, apache-commons

我正在尝试使用网络服务。

我的项目是 Java 6，使用 Jboss 4.3.2.GA。我尝试使用 Eclipse 中的 New-> Web Service Client 导入 Web 服务。喜欢这个教程[http://www.craigsprogramming.com/2011/03/tutorial-consume-any-web-service-using.html](http://www.craigsprogramming.com/2011/03/tutorial-consume-any-web-service-using.html)

但是当我尝试在这段代码中获取 Soap 客户端时：

```
WebServiceEscolaSoapStub service = (WebServiceEscolaSoapStub)new WebServiceEscolaLocator().getWebServiceEscolaSoap(); 
```

我收到以下错误。

```
org.apache.commons.discovery.DiscoveryException: Class org.apache.commons.logging.impl.SLF4JLogFactory does not implement org.apache.commons.logging.LogFactory
at org.apache.commons.discovery.tools.ClassUtils.verifyAncestory(ClassUtils.java:180)
at org.apache.commons.discovery.tools.SPInterface.verifyAncestory(SPInterface.java:201)
at org.apache.commons.discovery.tools.SPInterface.newInstance(SPInterface.java:195)
at org.apache.commons.discovery.tools.DiscoverClass.newInstance(DiscoverClass.java:579)
at org.apache.commons.discovery.tools.DiscoverSingleton.find(DiscoverSingleton.java:418)
at org.apache.commons.discovery.tools.DiscoverSingleton.find(DiscoverSingleton.java:378)
at org.apache.axis.components.logger.LogFactory$1.run(LogFactory.java:45)
at java.security.AccessController.doPrivileged(Native Method)
at org.apache.axis.components.logger.LogFactory.getLogFactory(LogFactory.java:41)
at org.apache.axis.components.logger.LogFactory.<clinit>(LogFactory.java:33)
at org.apache.axis.handlers.BasicHandler.<clinit>(BasicHandler.java:43)
at org.apache.axis.client.Service.getAxisClient(Service.java:104)
at org.apache.axis.client.Service.<init>(Service.java:113)
at br.com.portalpitagorasdeeducacao.gestaodeusuarios.Service.WebServiceEscolaLocator.<init>(WebServiceEscolaLocator.java:12)... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:34:15.357

错误很明显。

您正在混合两个 jar slf4j 和 commons-logging。摆脱 commons-logging.jar 文件。三思而后行，现在删除所有日志记录，只运行一个 web 服务客户端，看看你是否得到输出。稍后您可以添加日志记录。此错误与 webservice 错误无关。

# audio - 如何在 firefox os 的应用程序中播放 mp3 音频？

> ID：15532648
> 
> 赞同：2
> 
> 时间：2013-03-20T19:12:59.987
> 
> 标签：audio, mp3, firefox-os

我尝试了几个播放器，但只支持格式。ogg player还是有什么办法可以玩的。火狐操作系统中的MP3。我也曾经用默认的 OS 文件打开 Firefox 的音频播放器。mp3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T06:15:13.993

Firefox OS Simulator 不支持 mp3 播放。但 Firefox OS 设备支持它。

# python - 根据两个列表值映射出第三个列表

> ID：15532651
> 
> 赞同：0
> 
> 时间：2013-03-20T19:13:18.653
> 
> 标签：python, list

我有两个列表，一个是主题列表，最多可以有 2 到 4 个主题。第二个列表是报告列表，它提供信息，我们是否需要该主题的报告。

报告列表的可能值为：

*   All_Subjects 这意味着我们需要所有主题的报告。
*   No_Subject 这意味着我们不需要任何主题的报告
*   最后是格式，SubjectName_(All|NO)_Report，这意味着对于特定主题，我们是否需要报告。-subject_list = ["Subject", "Chemistry", "Physics" , "Mathematics" , "Bio"] #sequence 始终保持不变。
*   报告列表可以是 ["All_Subjects", "No_Subjects", "Chemistry_No_Report","Chemistry_All_Report"] #sequence 无所谓

函数report_required 无论我们是否想要报告都会返回一个列表，并返回一个列表。如果列表包含所有“无”值，则表示不需要报告。

例如：我有：

```
reporting_list = ["Chemistry_No_Report", "Mathematics_All_Report] 
subject_list   = ["Subject", "Chemistry", "Physics" , "Mathematics"] 
```

我的 subject_list 始终以值 Subject 开头，在返回映射值时我会忽略它，
我的返回值应该是`["No", None, "Yes"]`

我当前的以下功能有效，是否有一种更有效的方法可以根据两个列表值映射出第三个列表。

```
def reportRequired( reporting_list , subject_list):

    report_list = [None]*4

    for value in reporting_list:
                # subject_list starts with a header value "Subject", thats why iterating from index 1
                if value.startswith("All"):
                   for idx in range(1, len(subject_list)):
                        report_list[idx-1] = "Yes"

                if value.startswith("No"):
                    for idx in range(1, len(subject_list)):
                        report_list[idx-1] = "No"

                if value.split("_")[1].lower() == "no":
                    for idx in range(1, len(subject_list)):
                        if value.split("_")[0].strip() == subject_list[idx]:
                            report_list[idx-1] = "No"

                if value.split("_")[1].lower() == "all":
                    for idx in range(1, len(subject_list)):
                        if value.split("_")[0].strip() == subject_list[idx]:
                            report_list[idx-1] = "Yes"
      return report_list 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:59:23.937

构建一个将主题名称映射到索引的字典，并使用它来访问 report_list 的元素。这样，您可以避免第 3 种和第 4 种情况的二次复杂度。

对于第一种和第二种情况：准备一个用 Yes-es 填充的列表和一个用 No-s 填充的列表。然后您可以使用它们，无论该案例在报告列表中出现的频率如何。注意：您可以使用 ['Yes']*4，就像在 report_list 的初始化中所做的那样。

总体复杂性“几乎”是线性的（假设 O(1) 字典访问......）

编辑：如果一个主题可以在主题列表中出现多次，这不起作用。但是您可以构建一个字典，在其中存储每个主题的答案，然后在第二阶段，遍历主题列表并输出每个主题的答案。

# twitter-bootstrap - bootstrap.js ie9 兼容模式挂起

> ID：15532655
> 
> 赞同：0
> 
> 时间：2013-03-20T19:13:24.303
> 
> 标签：twitter-bootstrap, internet-explorer-9

我遇到了 bootstrap.js-IE9 问题。当我的页面在 IE9 中加载时，它一目了然。使用开发工具强制 IE9 进入 Compability 模式可以解决问题。但是，没有它也应该可以工作。

您可以在[我的迷你应用程序](http://smalltracker.cloudfoundry.com/ "我的小程序")中进行测试。

正如您在代码中看到的那样，该页面相当简单，还没有任何奇特的功能：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" type="text/css" href="/resources/css/main.css"/>
<link rel="stylesheet" type="text/css" href="/resources/css/bootstrap.min.css"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Welkom bij STT!</title>
<script src="/resources/js/jquery-1.9.1.min.js"></script>
<script src="/resources/js/bootstrap.min.js"></script>
</head>
<body>
<div id="main" class="container">

<div class="row" >
    <div class="span1"><span><img src="" alt="Logo" title="Logo"/></span></div>
    <div id="registration" class="span2 btn disabled ">registreer</div>
    <div id="accounting" class="span2 btn disabled ">accounting</div>
    <div id="reporting" class="span2 btn disabled ">rapportage</div>
    <div class="span2"></div>
    <div class="span3"><span>Welcome Jurgen Goossens</span></div>
</div>

<div class="row">
    <div class="span8 well">welkom bij STT!</div>
    <div class="span4"></div>
</div>

<div class="row">
        <div class="span1"></div>
        <div id="customers" class="span2 btn "><a href="/customer/">klanten</a></div>
        <div id="performance" class="span2 btn "><a href="/tasktype/">taken</a></div>
        <div id="users" class="span2 btn "><a href="/user/">gebruikers</a></div>
        <div class="span5"></div>
</div>

</div>
</body>
</html> 
```

有谁知道这与什么有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:25:37.777

问题不是全部引导:(。经过长时间的搜索后，我发现以下自定义 CSS 代码可以解决冻结 IE9 的问题：

```
.btn:first-letter,
label:first-letter,
.navbar-inner .brand:first-letter
{
    text-transform: uppercase;
} 
```

需要进一步研究，但这是另一个任务......

Tnx 的帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T23:33:45.577

`<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`是“几乎标准”的模式。此外，如果 doctype-declaration 之上有任何内容，IE 会自动进入 quirksmode。此外，[**bootstrap 需要 html5 doctype**](http://twitter.github.com/bootstrap/scaffolding.html)，因此您必须将 oldschool HTML 4.01 doctype 替换为

```
<!doctype html> 
```

你应该添加

```
<meta http-equiv="x-ua-compatible" content="IE=Edge"/> 
```

到本`<head>`节的开头（或至少在任何脚本标签之前！）。请参阅[**IE8、IE9 和 IE10 并发症**](http://hsivonen.iki.fi/doctype/)（页面中间）。

# c# - 添加新项目前检查列表框

> ID：15532657
> 
> 赞同：0
> 
> 时间：2013-03-20T19:13:31.793
> 
> 标签：c#, asp.net, listbox

在添加新项目之前，我正在尝试检查列表框中是否不存在该项目。

```
 if (TeamNameTextBox.Text != "")
        {
            if (TeamNameListBox.Items.FindByValue(TeamNameListBox.Text) == null)
            {
                TeamNameListBox.Items.Add(TeamNameTextBox.Text);
                TeamNameTextBox.Text = "";

                int teamCountUpdate = TeamNameListBox.Items.Count;
                if (teamCountUpdate == 1)
                {
                    TeamCount.Text = teamCountUpdate.ToString() + " Team";
                }
                else
                {
                    TeamCount.Text = teamCountUpdate.ToString() + " Teams";
                }
            }
            else
            {
                AddTeamSeasonError.Text = "This team has already been added";
            }
        }
        else
        {
            AddTeamSeasonError.Text = "Please select a team";
        } 
```

我有它来检查文本框是否为空白，但我需要检查用户尝试添加的项目是否不在列表框中。

我试过这条线：

```
if (TeamNameListBox.Items.FindByValue(TeamNameListBox.Text) == null) 
```

但这不起作用，关于如何进行检查的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:22:22.243

用这个：

```
if (!TeamNameListBox.Items.Contains(TeamNameTextBox.Text))
                TeamNameListBox.Items.Add(TeamNameTextBox.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:19:10.563

我想你的意思是

```
// search if the textbox value is found in the list. this comment shouldn't be part of the code
if (TeamNameListBox.Items.FindByValue(TeamNameTextBox.Text) == null) 
```

代替

```
if (TeamNameListBox.Items.FindByValue(TeamNameListBox.Text) == null) // code from question 
```

编辑：无需将控件类型的名称放在变量旁边。
即代替`TeamNameListBox`，使用`teamNames`。并且，而不是`TeamNameTextBox`使用`teamName`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:20:25.400

认为您至少应该尝试使用`TeamNameTextBox`而不是`TeamNameListBox`作为参数

```
if (TeamNameListBox.Items.FindByValue(TeamNameTextBox.Text) == null) 
```

# roundhouse - 使用 Roundhouse 作为 SYSDBA 连接

> ID：15532659
> 
> 赞同：1
> 
> 时间：2013-03-20T19:13:42.130
> 
> 标签：roundhouse, sysdba

我想使用 Roundhouse 以 sysdba 身份连接，已经尝试过

```
conn.ConnectionString = "Driver={Microsoft ODBC for Oracle};SERVER=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=myhost)(PORT=1521))(CON
NECT_DATA=(SERVICE_NAME=orcl)));uid=scott;pwd=tiger**;as sysdba**" 
```

肠道得到了这个例外

```
RoundhousE encountered an error.
System.ArgumentException: Format of the initialization string does not conform t
o specification starting at index 202.
   at System.Data.Common.DbConnectionOptions.GetKeyValuePair(String connectionSt 
```

也试过

```
conn.ConnectionString = "Driver={Microsoft ODBC for Oracle};SERVER=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=myhost)(PORT=1521))(CON
NECT_DATA=(SERVICE_NAME=orcl)));uid=scott;pwd=tiger;**DBA Privilege=SYSDBA;"** 
```

但后来例外是

```
RoundhousE encountered an error.
System.ArgumentException: Keyword not supported: 'dba privilege'. 
```

有什么建议么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:56:29.540

您可以使用元素的`ConnectionStringAdmin`设置`<Roundhouse>`来设置管理连接字符串。我尝试使用该`System`用户，但遇到了不同的问题。[我已经在此处的 Stackoverflow 和](https://github.com/chucknorris/roundhouse/issues/107)[此处](https://stackoverflow.com/questions/15469634/can-i-create-a-brand-new-oracle-db-schema-with-roundhouse)的项目页面上问过这个问题。

我的问题与创建新数据库更相关，但我在那里指定的配置设置可能对您有用。

# javascript - dojo.getAttr 不是函数

> ID：15532660
> 
> 赞同：0
> 
> 时间：2013-03-20T19:13:46.467
> 
> 标签：javascript, dojo

我正在用 Dojo 1.6 编写一个可以修改属性值的 dojo 函数：

```
 function replaceAttributeDojo(obj, attrName, newValue) {
        var value = dojo.getAttr(obj, attrName);
        if (value !== 'undefined') {
            //console.log('Found attribute '+attrName+' on object '+obj.attr('nodeName')+'[id='+obj.attr('id')+', name='+obj.attr('name')+', widgetid='+obj.attr('widgetid')+']');
            if (value == '') {
                //console.log('Attribute value is empty, removing the attribute');
                //obj.removeAttr(attrName);
                return;
            }
            var newAttrValue = value.replace(/[\d]+/g, newValue);
            dojo.setAttr(obj, attrName, newAttrValue);
        } else {
            //console.log('Did not find attribute '+attrName+' on object '+obj.attr('nodeName')+'[id='+obj.attr('id')+', name='+obj.attr('name')+', widgetid='+obj.attr('widgetid')+']');
        }
    } 
```

跟踪代码并找到此行丢失的萤火虫

```
var value = dojo.getAttr(obj, attrName); 
```

它告诉我

```
dojo.getAttr is not a function 
```

该函数在 dojo.ready 外部定义，但在`dojo.ready()`.

这是 dojo.ready() 中调用函数的部分

```
dojo.query("div, input, select", row).forEach(function(){
    replaceAttributeDojo(row, 'id' , index);
    replaceAttributeDojo(row, 'name' , index);
    replaceAttributeDojo(row, 'widgetid' , index);
}); 
```

内部同一页面上的所有内容都`dojo.ready()`可以正常工作，那么这怎么可能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:25:26.370

如果 obj 是一个 DOM 节点：

```
var val = dojo.attr(node, attrName); // getter

dojo.attr(node, attrName, newValue); // setter 
```

[http://dojotoolkit.org/reference-guide/1.6/dojo/attr.html](http://dojotoolkit.org/reference-guide/1.6/dojo/attr.html)

如果 obj 是一个小部件：

```
var val = widget.get(attrName); // getter

widget.set(attrName, newValue); // setter 
```

[http://dojotoolkit.org/reference-guide/1.8/dijit/_WidgetBase.html](http://dojotoolkit.org/reference-guide/1.8/dijit/_WidgetBase.html)

# jquery - jQuery Twitter 提要不适用于特定帐户

> ID：15532666
> 
> 赞同：1
> 
> 时间：2013-03-20T19:14:05.257
> 
> 标签：jquery, twitter

我正在使用这个推特供稿：[http ://coda.co.za/content/projects/jquery.twitter](http://coda.co.za/content/projects/jquery.twitter)

对于我们组织的帐户，它不会列出最近的推文。但是，我可以输入我的个人帐户（或麦当劳……），它会列出最近的推文。知道是什么原因造成的吗？一些设置？

下面是示例： [http :](http://oursaviorschurch.com/personaltwittertest.html) [//oursaviorschurch.com/twittertest.html http://oursaviorschurch.com/personaltwittertest.html](http://oursaviorschurch.com/twittertest.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:30:48.863

实际上，我已将其发布为对其他几个问题的回答。抱歉重复了，但我认为这将为您节省很多时间：

我刚刚更新了一个[插件](http://zkniebel.github.com/jquery-twitter-feed/)来使用 Twitter 1.1 API。这个问题的可能原因是 Twitter 可能已经关闭了 API 1.0 的那部分。您将不得不升级到新的，该插件应该会有所帮助。

不幸的是，根据 Twitter 的要求，您将不得不从服务器端代码执行实际请求。但是，您可以将响应传递给插件，它会处理其余的事情。我不知道您正在运行什么框架，但我已经添加了用于在 C# 或 PHP 中发出请求的示例代码。即使您不想使用插件的其余部分，说明文档也应帮助您在 Twitter 上设置必要的帐户以开始使用。

祝你好运！:)

# asp.net-mvc - ASP.NET+Azure 400 错误请求不返回 JSON 数据

> ID：15532667
> 
> 赞同：30
> 
> 时间：2013-03-20T19:14:10.003
> 
> 标签：asp.net-mvc, azure

我的 ASP.NET MVC 控制器中有一个操作，当将无效参数传递给操作时，它会返回带有 400 Bad Request 的 JSON 数据。

```
[HttpDelete]
public ActionResult RemoveObject(string id) {
    if(!Validate(id)) {

        Response.StatusCode = (int)HttpStatusCode.BadRequest;
        return Json(new { message = "Failed", description = "More details of failure" });
    }
} 
```

这可以在 IIS 下完美运行，或者与从 Visual Studio 启动的开发测试服务器一起运行。将项目部署到 Azure 后，400 Bad Request 返回时没有 JSON 数据。消息的内容类型已更改为“文本/html”和“错误请求”。

为什么 Azure 下的行为不同？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-20T19:15:03.013

将以下条目添加到您的“web.config”中。

```
<system.webServer>
  <httpErrors existingResponse="PassThrough"/>
</system.webServer> 
```

这将允许 HTTP 错误不受干扰地通过。

# android - 带有一个输入edittext android的计算器

> ID：15532668
> 
> 赞同：2
> 
> 时间：2013-03-20T19:14:16.203
> 
> 标签：android

我是android的初学者。我正在尝试用一个输入编辑文本制作一个计算器。当我单击 + 按钮时，它不会给出总和输出。要获得正确的答案，我必须在两个条目后单击 + 按钮。想得到一个总和，我将它作为 1"+" 1"+""=。然后它会给出 2。这是我的代码，请有人帮助我。

```
public void onClick(View v){
    double sum=0; 
    switch(v.getId()){
    case R.id.buttonplus:
        sum += Double.parseDouble(String.valueOf(textView.getText()));
        numberDisplayed.delete(0,numberDisplayed.length());
        break;
    case R.id.buttonequal:
        resultView.setText(String.valueOf(sum));
        sum=0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:29:23.383

如果我理解正确，您希望在按下 "equals" 后显示总和`button`。如果是这样，那么你需要有

```
sum += Double.parseDouble(String.valueOf(textView.getText())); 
```

在这一行也

```
case R.id.buttonequal:
    sum += Double.parseDouble(String.valueOf(textView.getText()));
    resultView.setText(String.valueOf(sum));
    sum=0; 
```

当您按下“加号”时，第二个数字尚未输入，`button`因此总和只是第一个数字。然后你必须再次按下它才能添加到`sum`

所以在 if equals btn 按下时，类似

```
if (lastOp.equals("sub")
{
    sum -=  Double.parseDouble(String.valueOf(textView.getText()));
...
} 
```

**例子**

```
public class SimpleCalculatorActivity extends Activity
{
    //variables needing class scope
    double answer = 0, number1, number2;
    int operator = 0, number;
    boolean hasChanged = false, flag = false;
    String display = null;
    String display2 = null;
    String curDisplay = null;
    String calcString = "";
    String inputLabel;  
    String inputString = null;
    String inputString2 = null;
    String inputString3 = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        this.setTitle("Super Duper Calculator");

        initButtons();      
    }   
        //when button is pressed, send num to calc function
        button1.setOnClickListener
        (new Button.OnClickListener()
            {
                public void onClick(View v)
                {
                    inputString = button1.getText().toString();
                    displayCalc(inputString);
                }
            }
        );

        button2.setOnClickListener
        (new Button.OnClickListener()
            {
                public void onClick(View v)
                {
                    inputString = button2.getText().toString();
                    displayCalc(inputString);
                }
            }
        );
        ...
        //send operator to calc function
        addButton.setOnClickListener
        (new Button.OnClickListener()
            {
                public void onClick(View v)
                {
                    calculation(1);
                }
            }
        );

        subButton.setOnClickListener
        (new Button.OnClickListener()
            {
                public void onClick(View v)
                {
                    calculation(2);
                }
            }
        );       
        calcButton.setOnClickListener
        (new Button.OnClickListener()
            {
                public void onClick(View v)
                {
                    calculation(5);
                }
            }
        );

        clearButton.setOnClickListener
        (new Button.OnClickListener()
            {
                public void onClick(View v)
                {
                    calculation(6);
                }
            }
        );
    }   

    //function to calculate
    public void calculation(int input)
    {
        number = input;

        //see which operator was clicked
        switch (number)
        {
            case 1:
                operator = 1;
                hasChanged = true;
                display = "";
                showDisplay("+");
                break;
            case 2:
                operator = 2;
                hasChanged = true;
                display = "";
                showDisplay("-");               
                break;
            case 3:
                operator = 3;
                hasChanged = true;
                display = "";
                showDisplay("*");
                break;
            case 4:
                operator = 4;
                hasChanged = true;
                display = "";
                showDisplay("/");
                break;
            case 5:
                number2 = Double.parseDouble(display2);
                if(number2 == 0)
                {
                    custErrMsg();
                }
                else
                {
                    operator();
                    displayAnswer(answer);
                    hasChanged = true;
                }
                break;
            case 6:
                clear();
                break;
            default:
                clear();
                break;
        }
    }

    private void operator()
    {
        if (operator != 0) 
        {
            if (operator == 1)
            {
                answer = number1 + number2;
            }
            else if (operator == 2)
            {
                answer = number1 - number2;
            }
            else if (operator == 3)
            {
                answer = number1 * number2;
            }
            else if (operator == 4)
            {
                answer = number1 / (number2);
            }
        }
    }

    private void displayCalc(String curValue)
    {
        String curNum = curValue;

        if (!hasChanged)
        {
            if (display == null)
            {
                //display number if reset
                inputString2 = curNum;
                display = inputString2;    
                showDisplay(display);

            }
            else
            {
                //display previous input + new input
                inputString2 = inputString2 + curNum;
                display =  display + curNum;
                showDisplay(display);
            }
        }
        else                                                    
        {   
            displayNum2(curNum);
        }
    }

    private void displayNum2 (String curValue2)
    {
        String curNum2;
        curNum2 = curValue2;
        if (!flag)
        {
            //display number if reset
            inputString3 = curNum2;
            display2 = inputString3;
            number1 = Double.parseDouble(inputString2);
            flag = true;
        }
        else
        {
            //display previous input + new input
            inputString3 = curNum2;
            display2 = display2 + curNum2;
        }
        showDisplay(inputString3);
    }

    private void displayAnswer(double curAnswer)
    {
        String finAnswer = String.valueOf(curAnswer);  
        TextView textView1 = (TextView) findViewById(R.id.textView1);
        textView1.setBackgroundColor(0xffffffff);
        textView1.setText(finAnswer);
    }

    private void showDisplay(String output)
    {   
        inputLabel = output;
        TextView textView1 = (TextView) findViewById(R.id.textView1);
        textView1.setBackgroundColor(0xffffffff);

        if (operator != 0)
        {
            curDisplay = textView1.getText().toString();
            textView1.setText(curDisplay + inputLabel);
        }     
        else
        {
            textView1.setText(inputLabel);
        }
    } 
```

# linux - 链接共享库g ++时出现奇怪的符号

> ID：15532669
> 
> 赞同：2
> 
> 时间：2013-03-20T19:14:16.490
> 
> 标签：linux, g++, shared-libraries, dynamic-linking, symbols

我有一个包含`void initGui()`函数的文件。它做事。我也有一个`.so`用该文件制作的共享库。

问题是，当我尝试启动 a 时`dlsym(..., "initGui")`，`dlerror()`告诉我它没有找到符号（当然，我曾经`dlopen`打开它）。所以我尝试了`nm`我的共享库。我“理解”这`_Z7initGuiiii`可能是我正在寻找的东西。所以我尝试了`dlsym`它......它奏效了。

请有人能告诉我如何在我的共享对象库中有干净的符号吗？

我用`g++ -Wall -Wextra -Werror -c -fPIC`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:30:12.107

`dlsym`在用 C++ 编码的某些 -ed 共享库中 -ing时的通常做法`dlopen`是声明那些寻找的符号（那些你正在 dlsym-ing 的符号）的约定`extern "C"`。然后他们的名字很容易用`dlsym`. 所以你需要声明

```
 extern "C" void initGui(void); 
```

然后做

```
 typedef void initguiroutine_sig_t(void);
 initguiroutine_sig_t* initguiptr = dlsym(dlhandle,"initGui");
 if (!initguiptr) { 
    fprintf(stderr, "initGui not found: %s\n", dlerror());
    exit (EXIT_FAILURE);
 };
 // later, call initguiptr like
 (*initguiptr) (); 
```

我不建议您详细了解[C++ 名称修饰的工作原理](http://en.wikipedia.org/wiki/Name_mangling)，它的定义不是很好，而且细节取决于 C++ 库（尤其是标准 C++ 库）和编译器版本的特定版本。

# .net - 如何使用 Microsoft.Office.Interop.Word 创建 Mailing Lable Word 文档？

> ID：15532673
> 
> 赞同：1
> 
> 时间：2013-03-20T19:14:30.537
> 
> 标签：.net, c#-4.0, office-interop

```
Microsoft.Office.Interop.Word.Application oWord = new Microsoft.Office.Interop.Word.Application();
Microsoft.Office.Interop.Word.Document oDocument = new Microsoft.Office.Interop.Word.Document();
oDocument = oWord.Documents.Add();
Microsoft.Office.Interop.Word.MailingLabel oLable = oWord.MailingLabel;

oDocument = oLable.CreateNewDocument();
oDocument.SaveAs(SaveFileDialog1.InitialDirectory.ToString() + SaveFileDialog1.FileName);
oWord.Quit(); 
```

我可以从上面的代码中得到一个空的 Word Lable 文档，如何将数据输入到文档中？任何人都可以给我一个这样做的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T08:54:31.553

这就是您在文件中写入内容的方式。

```
 Microsoft.Office.Interop.Word.Application oWord = new Microsoft.Office.Interop.Word.Application();
        Microsoft.Office.Interop.Word.Document oDocument = new Microsoft.Office.Interop.Word.Document();
        oDocument = oWord.Documents.Add();

        BigInteger r = 1;
        for (int i = 1; i <= 64; i++)
        {
            r = r * i;             
        }
        Console.Write(r.ToString());

        oDocument.Content.SetRange(0, 0);
        oDocument.Content.Text = r.ToString();

        oDocument.SaveAs(@"d:\mydoc.docx");
        oWord.Quit(); 
```

你可以在这里找到更多信息：[http ://www.c-sharpcorner.com/UploadFile/muralidharan.d/how-to-create-word-document-using-C-Sharp/](http://www.c-sharpcorner.com/UploadFile/muralidharan.d/how-to-create-word-document-using-C-Sharp/)

# javascript - 替代“@name”用于记录 `this` 的属性

> ID：15532675
> 
> 赞同：1
> 
> 时间：2013-03-20T19:14:33.280
> 
> 标签：javascript, documentation, jsdoc

我想知道如何记录`this.`类的构造函数的属性。例如，我尝试使用`@name`标签来命名我的班级，但它没有生成以下文档`this.foo`：

```
/**
 * @name ClassName
 * @constructor
 */
function noname (){
    /** @type {String} */
    this.foo = "bar";
} 
```

我可以这样解决：

```
/**
 * @name ClassName
 * @constructor
 */
function noname (){
    /** 
    * @type {String} 
    * @name ClassName#foo
    */
    this.foo = "bar";
} 
```

或以这种方式：

```
/**
 * @name ClassName
 * @constructor
 */
function noname (){
    /** @lends ClassName# */
    var that = this;

    /** @type {String} */
    that.foo = "bar";
} 
```

但是，两者都不能令人满意，因为这要么需要更改大量现有代码，要么需要在 jsdoc 注释中添加所有属性名称。

既然`@name`不能解决问题，是否有替代标签可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T01:22:29.520

尝试改用`@alias`标签：

```
/**
 * @alias ClassName
 * @constructor
 */
function noname (){
    /** @type {String} */
    this.foo = "bar";
} 
```

通常，使用`@alias`标签重命名代码中存在的符号；`@name`如果您正在记录代码中未出现的符号（例如，在运行时生成的方法），请使用该标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T20:09:31.957

@name 从以下代码中取消绑定文档块。

[http://usejsdoc.org/tags-name.html](http://usejsdoc.org/tags-name.html)

> 警告：通过使用@name 标记，您是在告诉 JSDoc 忽略周围的代码并单独处理您的文档注释。在许多情况下，最好改用@alias 标签

因此，任何内部项目也必须具有正确的 @name（有关正确语法，请参见[http://usejsdoc.org/about-namepaths.html](http://usejsdoc.org/about-namepaths.html)）。

# twitter-bootstrap - 导航栏旁边的 Twitter Bootstrap 徽标

> ID：15532676
> 
> 赞同：2
> 
> 时间：2013-03-20T19:14:34.740
> 
> 标签：twitter-bootstrap, navbar

我搜索了 SO，但没有找到类似的问题/解决方案。

我想将徽标对齐到内部导航栏的左侧。

我当前的 HTML 是-

```
<div class="container">
  <div class="logo"><img src="img/logo.png"></div>
  <div class="navbar">
    <div class="navbar-inner">
      <ul class="nav"> ......... 
```

哪个看起来像这样：http: [//imgur.com/a/WcGPK](http://imgur.com/a/WcGPK)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:35:26.513

您可以将 spanX 添加到它们，例如： [**DEMO**](http://cssdeck.com/labs/yhcfnppe)

```
<div class="container">
  <div class="logo span2"><img src="img/logo.png"></div>
  <div class="navbar span9">
    <div class="navbar-inner">
      <ul class="nav"> ......... 
```

那是你要的吗？

# ios - AVCaptureSession 意外触发 AVCaptureSessionWasInterruptedNotification，无法确定中断源

> ID：15532677
> 
> 赞同：6
> 
> 时间：2013-03-20T19:14:36.423
> 
> 标签：ios, avfoundation, avcapturesession

我有一个类似于 Apple 的 AVCam 演示的摄像机视频。我遇到了一个非常令人沮丧的问题，我不知道如何进行调试。

基本上，我们谈论的是视图控制器上的摄像机设置。当 VC 出现时，预览层应该显示相机看到的内容，并在按下录制按钮时开始录制到文件。

这在 20% 的时间内有效。其余时间，VC 正常加载，但预览层在 1-3 秒后冻结。一旦冻结，我就不会崩溃或抛出错误**[编辑：不正确，见下文]**。但是，如果我在它冻结后点击记录，这会触发对

```
[self.fileOutput startRecordingToOutputFileURL:currentVideoURL recordingDelegate:self]; 
```

我立即收到对 AVCaptureFileOutputRecordingDelegate 方法的调用

```
-(void)captureOutput:(AVCaptureFileOutput *)captureOutput didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL fromConnections:(NSArray *)connections error:(NSError *)error 
```

设置了 NSError 对象，错误代码为 -11803 {AVErrorSessionNotRunning}。在调用 [captureSession startRunning] 之后，该方法肯定已运行。

**更新**

某些事情导致会话立即中断。captureSession.isInterrupted 在捕获开始后几乎立即设置为 TRUE，当我开始会话时，以下通知会立即触发：

```
AVCaptureSessionWasInterruptedNotification
AVCaptureSessionDidStopRunningNotification  (edit -- had the wrong const here) 
```

什么可能导致会话在开始后立即中断？

是否有关于所有可能导致 AVCaptureSession 中断的事件的文档？

# jquery - 将服务器控制值作为 jquery 参数传递

> ID：15532679
> 
> 赞同：0
> 
> 时间：2013-03-20T19:14:44.817
> 
> 标签：jquery, asp.net, ajax, servercontrols

我正在尝试从下拉列表中获取一个值，并将所选值作为参数传递给通过 jquery 进行的 AJAX 页面方法调用。如何`data:`在调用的参数段中引用控件的选定值？我只是通过它的ID来引用它吗？这是我所拥有的：

```
 $(document).ready(function()
{
    $("#AssignEmployeeButton").click(function()
    {
        $.ajax(
        {
            type: "POST",
            url: "TeamManager.aspx/IsOnlyTeamEmployee",
            data: "{'employeeId': *control value here*}",
            contentType: "application/json; charset=utf-8",
            success: function(msg)
            {
                //function body will go here
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:15:42.370

```
$.ajax({
    data: "{'employeeId': $('#idOfYourDDL').val()}"
}); 
```

# javascript - 是否可以获得由 xsl 填充的项目的值？

> ID：15532680
> 
> 赞同：0
> 
> 时间：2013-03-20T19:14:52.553
> 
> 标签：javascript, xml, flash, xslt

我正在使用具有 XML 文件的 Flash 地图。我已经使用 XSLT 从 XML 填充了地图网页上的列表（在 Flash 地图之外）。我想通过 XSL 添加一个 JS 函数，该函数从 XML 中选择（填充的）元素，该元素将与地图交互。

例如，我的列表是 50 个州。这是 XML 的一小部分：

```
<attributes>
        <col name="State">Kentucky</col>
        <STATENAME>Kentucky</STATENAME>
  </attributes> 
```

等等...所有 50 个状态都包含在上述 XML 中

这是我填充列表的方式：

```
<table border="0">
      <tr bgcolor="#9acd32">
        <th>State</th>
      </tr>
<xsl:for-each select="map/layer/feature/attributes">
<xsl:sort select="STATENAME"/>
      <tr>
        <td><a onMouseOver='highlight()' onMouseOut='highlight_clear()'><xsl:attribute name="href">http://mysite.com/<xsl:value-of select="STATENAME"/>.html</xsl:attribute><xsl:value-of select="STATENAME" /></a></td>
      </tr>
      </xsl:for-each>
    </table> 
```

所有 50 个州都以这种方式提供了指向其各自页面的链接：http: [//mysite.com/statename.html](http://mysite.com/statename.html)

这是Javascript：

```
function highlight() {
            theMap.features('State="Kentucky"').highlight({visible: true, fillColor: "#FFFF00", fillAlpha: 1.0});          
        } 
```

这里的关键是**('State="Kentucky"')**我试图让 State to = 填充在列表中的 SAME 状态，而不必编写 50 个不同的函数 - 每个状态一个。例如，当所有 50 个州都被填充时，如果鼠标移到德克萨斯上空，它会自动调出 theMap.features('State="Texas"')，如果移过内布拉斯加州，就会调出内布拉斯加州。

我试过这样做：

```
function highlight() {
var sn='<xsl:value-of select="STATENAME"/>';
                theMap.features('State="sn"').highlight({visible: true, fillColor: "#FFFF00", fillAlpha: 1.0}); } 
```

但它没有用，我也不认为它会。但是，它本质上是我想要发生的事情的想法。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:34:42.877

你应该能够做到这一点：

```
<table border="0">
  <tr bgcolor="#9acd32">
     <th>State</th>
  </tr>
  <xsl:for-each select="map/layer/feature/attributes/STATENAME">
    <xsl:sort select="."/>
      <tr>
        <td>
          <a onMouseOver='highlight("{.}")' 
             onMouseOut='highlight_clear()'
             href='http://mysite.com/{.}.html'>
             <xsl:value-of select="." />
          </a>
        </td>
      </tr>
   </xsl:for-each>
</table> 
```

然后只需将您的 highlight() 函数更改为：

```
function highlight(state) {
    theMap.features('State="' + state + '"')
          .highlight({visible: true, 
                      fillColor: "#FFFF00", 
                      fillAlpha: 1.0});          
} 
```

# java - Tomcat更改javascript文件无需重新启动服务器

> ID：15532690
> 
> 赞同：1
> 
> 时间：2013-03-20T19:15:13.487
> 
> 标签：java, javascript, tomcat

每次我对我的 war/ 目录中的 javascript 文件进行更改时，我都需要重新启动 tomcat 才能看到更改。有没有办法只重新加载页面而无需重新启动 tomcat 以进行非 Java 代码更改（JS/CSS/HTML/images）？我查看了 context.xml 并执行以下操作：

```
<Context reloadable="true"> 
```

然而，这并没有帮助。如果我需要设置 WatchedResource，它将是我的 war/assets/ 目录中的所有文件。我没有使用 Eclipse 或 IDE，而是在 Mac 上。无论如何设置tomcat，所以我不需要在每次非java代码更改后重新启动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:22:33.187

当您在 javascript 页面中进行更改时，无需重新启动服务器。每当您修改任何需要编译的内容时，只需在重新编译后重新启动即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T11:44:33.473

有可能做一些叫做自动部署的事情，所以每当你保存你的新更改时，控制台会立即通知你一条消息：自动部署成功。请注意，如果您更改需要编译的内容，则必须首先执行重建。

# c# - 维护和刷新二维绘图中的连接

> ID：15532694
> 
> 赞同：0
> 
> 时间：2013-03-20T19:15:25.690
> 
> 标签：c#, algorithm, graph-algorithm

我已经搜索了*2D、绘图、算法*等关键字，但没有找到或至少注意到这是否可能是 SOF 上的重复，所以请告诉我，然后我很乐意删除它以遵循 StackOverFlow 政策！

长话短说，我需要知道是否有人使用过或知道用于在画布上移动二维矩形的优化算法。（目前我们正在使用 WPF）

这是我们的代码，我们的问题是在节点/点中连接的移动对象与使用鼠标移动的矩形。考虑一个场景，用户抓取一个节点，比如说右下角并将其拖到画布上。

矩形移动正常，但是当它有其他形状连接时，例如另一个矩形、直线或圆形。目前它出错了，设计/草图变形了。

我想，为了澄清我的问题，也许我应该问这个问题：哪种算法或哪种数据结构可以帮助我跟踪和维护其他链接形状与该矩形的连接？

笔记： **好的，我需要在这里补充的一件事是，我们的代码在所有情况下都可以正常工作，但是，我们注意到当我们的形状或绘图变得复杂时，移动整个设计或对象会花费太多时间。我们在以前的版本中所做的（就矩形而言）是连接两条线，其中一个列表将存储所有连接信息，因此对于一个矩形，我们将信息存储在一条线的每个起点和终点。然而，在新版本（正在开发）中，我们使用了 Point 类中的一个对象来存储这些信息。因此，我们不是将信息存储在 8 个点中，而是将连接信息存储在 4 个点中，希望这样可以优化系统。现在，我们遇到了这种连接问题，即无法正确移动矩形，并且矩形可能会变成断开的矩形甚至是一条线。**

```
 public void RefreshDirectConnections()
    {
        if (!this.IsTraversed)
        {
            this.IsTraversed = true;                    
            TestDrawingCanvas canvas = this.Parent as TestDrawingCanvas;

            foreach (TestConnection con in this.Connections)
            {
                TestShapeBase shape = canvas.GetByID(con.ConnectedShapeID);

                if (!shape.IsValidMove(this.GetHandle(con.ThisHandle), con.ConnectedHandle))
                {
                    InValid = true;

                    canvas.DrawInvalidRect(this.GetHandle(con.ThisHandle));

                }
                else
                {
                    shape.MoveHandleTo(this.GetHandle(con.ThisHandle), con.ConnectedHandle);
                    shape.RefreshDrawing();                        
                }
            }
        }            
    } 
```

![在此处输入图像描述](../Images/85ea7132e0cda5f50738e88065d409e6.png) ![在此处输入图像描述](../Images/cb950d3fa3451b478fe361969cf17688.png) ![在此处输入图像描述](../Images/a084d7419d43708152cc5103e75b19a8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T20:01:47.297

大多数 2d 和 3d 应用程序都使用场景图来维护对象/向量/事物之间的[关系](http://en.wikipedia.org/wiki/Scene_graph)。该图是一个树结构，其中每个对象（根除外）都有一个父对象。每个子节点都定义了相对于其父节点的位置。这样一来，如果您移动一个孩子，它的所有孩子都会自动移动。如果需要，您还可以选择存储相对缩放或旋转。

# java - 想要从特定点开始读取文件

> ID：15532695
> 
> 赞同：2
> 
> 时间：2013-03-20T19:15:25.737
> 
> 标签：java

我有一个包含日志打印输出的文件，我想读取某些行，并从行中到行尾的某个点读取并移至符合条件的下一行。我想从 RULE EXECUTING 开始阅读到行尾，然后检查它的下一行是否有 RULE EXECUTING 如果不跳到下一行，如果确实有 RULE EXECUTING 然后从该点复制到行尾.

```
 FILE SAMPLE

2013-02-14 09:26:20:078 [main] DEBUG sne.ABC.hdhdh.jfjjfj.jkfjfjd.jdsd - RULE EXECUTING --> CMNETSL.hdjjjdlskdnlskd.jgfkdflkdfl_Translation
2013-02-14 09:28:00:312 [main] DEBUG moc.uty.lweifoisd.sfsd.kjfdnkjs.RulesetInvoker  - Rudejgfjkgjf:  After invoking: CMNETSLO
2013-02-14 09:26:20:421 [main] DEBUG sne.ABC.hdhdh.jfjjfj.jkfjfjd.jdsd - RULE EXECUTING --> sne.ABC.hdhdh.jfjjfj.jkfjfjd.jdsd

what I want to get from the line would look like this

RULE EXECUTING --> CMNETSL.hdjjjdlskdnlskd.jgfkdflkdfl_Translation
RULE EXECUTING --> sne.ABC.hdhdh.jfjjfj.jkfjfjd.jdsd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:36:44.733

为此，您必须阅读整个文件，使用 FileReader 并逐行读取文件，在每个文件中搜索子字符串“RULE EXECUTING”。如果找到，则使用 substring 方法输出或以其他方式处理子字符串。重复直到文件完成并且 - 最重要的是 - 关闭文件。

这是一个完整的代码示例：

```
 BufferedReader reader = null;
    try {
        //open file
        reader = new BufferedReader(new FileReader("example.log"));

        int index;

        //read first line
        String line = reader.readLine();

        //go through the entire file line for line
        while (line != null) {

            //look for substring in line
            index = line.indexOf("RULE EXECUTING");
            if(index >= 0 ) {
                //substring found, write result to stdout
                System.out.println(line.substring(index));
            }

            //read next line
            line = reader.readLine();
        }

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            //always close file readers!
            reader.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:20:05.360

所以，像：

```
BufferedReader br = new BufferedReader(new FileReader("mylog.log"));

String line;
int idx;
while((line = br.getLine()) != null)
  if((idx = line.indexOf("RULE EXECUTING --> ")) != -1)
    System.out.println(line.substring(idx)); 
```

我没有在 ide 中尝试过或编译过它，但我认为你可能明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:21:21.560

```
Scanner s = new Scanner(new File("log.txt")); // read file using scanner line by line

while(s.hasNextLine())
{

    String nextLine = s.nextLine(); 

    if(nextLine.startsWith("RULE EXECUTING")) //check if line starts with the key word
    {
              // do whatever you want to do 
    }
} 
```

# java - Eclipse 参考图片

> ID：15532696
> 
> 赞同：1
> 
> 时间：2013-03-20T19:15:25.900
> 
> 标签：java, eclipse, resources

所以我是 Java 新手，这可能是你见过的最简单的问题，但我仍然无法在互联网上找到分析器。

我想设置我的程序的图标，这段代码确实有效： `frame.setIconImage(Toolkit.getDefaultToolkit().getImage("MYPROBLEM"));`

但是我无法在 MYPROBLEM 部分获得正确的路径。这是我的结构：

> 项目名
> 
> -src
> 
> --默认包
> 
> ---我的功能
> 
> --test <----一张地图
> 
> ---图标.png

每当我用 src/test/icon.png 替换 MYPROBLEM 时，它确实有效。但是，当我将我的应用程序导出为 jar 时，会显示默认的 Java 图标。用类似 test/icon.png 的东西替换 MYPROBLEM 也不起作用。

我为我的英语道歉。忍受我，因为我是新手；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:24:34.237

这将从类路径加载图像。

```
Image image = new ImageIcon(this.getClass().getResource("MYPROBLEM")).getImage();
frame.setIconImage(image); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:39:11.043

由于某种原因，有时它不起作用，但您可以做的是添加图像位置的完整路径。这是一个例子

```
import java.awt.Dimension;
import java.awt.Image;

import java.awt.Toolkit;

import javax.swing.JFrame;

import java.awt.Toolkit;

import javax.swing.JFrame;

public class JFrameIcon {

    public static void main(String[] args) {

        JFrame frame = new JFrame();

        frame.setSize(300, 150);

        frame.setTitle("tutorialData.com");

        frame.setResizable(false);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setAlwaysOnTop(true);

        frame.setIconImage(Toolkit.getDefaultToolkit().getImage("C:\\Users\\Sirnurpc\\Desktop\\icon.png"));

        frame.setVisible(true);

    }

} 
```

参考[集icon](http://tutorialdata.com/example/swing/seticontojframe.html)

在您的情况下，如果您使用的是 Netbeans，那么该位置将是

**C:\Users\yourloginname\Documents\NetBeansProjects\yourproject\imagename.png**

而对于我猜你正在使用的 Eclipse 将是这样的

**C:\Users\yourlogingname\workspace\yourproject\imagename.png**

# php - 如何找出 2 个数组中的哪一个具有更多元素？

> ID：15532698
> 
> 赞同：0
> 
> 时间：2013-03-20T19:15:31.800
> 
> 标签：php, arrays

如何比较 PHP 中的两个数组并找出这两个数组中哪个数组的元素比另一个多？

例如，我有数组

```
$a = array(2,3,4);
$b = array(1,2,3,4,5,6,7); 
```

我如何能够动态返回`the array $b`，因为它有更多元素？PHP中是否有一个内置函数可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:17:29.527

要回答**“我如何能够动态返回......”**而不是“我将如何展示......”的问题，就像其他答案显示......

```
$c=count($a)>count($b)? $a:$b; 
```

如果你想要一个功能

```
function largestArray($a, $b){
    return count($a)>count($b)? $a:$b;
}

$c=largestArray($a, $b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:18:01.623

你提到`return`了，所以我假设这个操作发生在一个函数中：

```
<?php
// Create our comparison function
function compareArrays($array_1, $array_2) {
  return count($array_1) > count($array_2) ? $array_1 : $array_2;
}

// Define the arrays we wish to compare
$a = array(2,3,4);
$b = array(1,2,3,4,5,6,7);

// Call our function, returning the larger array.
$larger_array = compareArrays($a, $b);

// Print the array, so we can see if logic is correct.
print_r($larger_array); // Prints: array(1,2,3,4,5,6,7) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T19:21:56.100

要扩展 Steven 留下的评论，您可以使用该`count`函数来确定数组长度。然后使用三元运算符选择哪个更大。

```
<?php

$b= array(1,2,3,4,5,6,7);
$a = array(2,3,4);

var_dump( (count($a) > count($b)) ? $a : $b ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T19:17:46.600

```
echo '$a size is '.count ($a).'<br>';
echo '$b size is '.count ($b).'<br>'; 
```

或者

```
if (count($a)==count($b)) 
    echo '$a is same size as $b'; 
else
    echo count($a)>count($b) ? '$a is bigger then $b' : '$b is bigger then $a'; 
```

# jquery-plugins - Curtain.js 被“卡住”了

> ID：15532699
> 
> 赞同：1
> 
> 时间：2013-03-20T19:15:32.903
> 
> 标签：jquery-plugins, cross-browser, webpage

我正在尝试在我为朋友制作的网站上使用 Curtain.js 插件。该站点还没有准备好，缺少一些“页面”，但是今天我注意到有问题。

当我在 Safari (5.7.1) 上预览网站时，网站“卡在”两个页面之间。它永远不会下降到第三页......我还注意到，在从第一页“滚动”到第二页的过程中，滚动条发生了一些奇怪的事情！

当我在 Chrome 上预览网站时，它工作正常。

你也看到这个问题了吗？在其他浏览器中？任何想法这里发生了什么以及如何解决它？

我不知道问题出在哪里，所以我不知道要发布什么代码，但这里是网站“测试页面”的链接：http: [//popo.webatu.com/hottalent_test/ TalentShow.html](http://popo.webatu.com/hottalent_test/TalentShow.html)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:13:58.273

好的，我想我找到了！也许其他人也有同样的问题，所以我会在这里发布问题所在。

在我的联系表格中，我有这个：

```
<label><span class="formQuestion">Name:</span>
  <input placeholder="Your name" type="text" tabindex="1" required autofocus>
</label> 
```

我尝试了很多东西，我注意到当我从输入中删除“自动对焦”时，事情似乎工作正常。

所以现在我的代码看起来像：

```
<label><span class="formQuestion">Name:</span>
  <input placeholder="Your name" type="text" tabindex="1" required>
</label> 
```

任何想法为什么会这样？

希望有一天这对其他人有帮助！;)

# jquery - jQuery 事件在特定情况下未触发

> ID：15532700
> 
> 赞同：0
> 
> 时间：2013-03-20T19:15:33.387
> 
> 标签：jquery

这是我的场景：

有一个简单的文本输入和两个事件：焦点输入/输出。

在焦点中，“清除”按钮将出现在文本输入上方（向右对齐）。在 Focus Out 中，“清除”按钮将被隐藏。

这两个动作只使用了 .show() / .hide() jQuery 方法。

“清除”按钮有一个点击事件，它只是将文本输入值设置为空。

问题是：当试图点击“清除”按钮时，焦点输出事件在“清除”按钮事件之前被触发，因此“清除”按钮被隐藏并且不会触发点击事件。

我已经尝试使用 .on / .live / 等附加事件（到清除按钮）。

我发现（到目前为止）唯一的解决方法是用timeOut隐藏清除按钮（它在Focus Out事件中发生），但我不确定这个解决方案有多可靠。

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:24:58.253

我必须使用它来确定，但你不能将按钮的宽度（和填充/边框/边距）设置为 0 而不是隐藏它吗？这样它仍然在页面上，我认为点击事件会通过它。

编辑：不，等等，我刚刚意识到这行不通。当您按下鼠标按钮时，文本框会失去焦点，并且在您释放鼠标按钮之前不会触发 click 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:29:18.520

```
var clear_button_timeout_id = null;
var clear_button = '<button class="clear">Clear</button>';

$('div').on('click', '.clear', function () {
    $(this).parent().find('input').val('');
});

$('input')
    .on('focus', function () {
        if (!$(this).parent().find('.clear').length) {
            $(this).after(clear_button);       
        }

        if (clear_button_timeout_id) {
            clearTimeout(clear_button_timeout_id);
        }
    })
    .on('blur', function () {
        var that = this;

        clear_button_timeout_id = setTimeout(function () {
            $(that).parent().find('.clear').remove();
        }, 2000)
    }); 
```

[小提琴](http://jsfiddle.net/ethagnawl/am2eu/)

# asp.net - 在 webMethod 上使用 FormsAuthentication

> ID：15532704
> 
> 赞同：2
> 
> 时间：2013-03-20T19:15:42.373
> 
> 标签：asp.net, ajax, jquery, webmethod

我有一个有评论部分的页面。此部分与 a 通信以`WebMethod`插入新评论。

```
[WebMethod]
public static bool insertComment(string commentString)
{
    //userName validation here
    string userName = (FormsAuthentication.Decrypt(Request.Cookies[FormsAuthentication.FormsCookieName].Value).Name);

    return new CommentClass().InsertComment(commentString, userName);
} 
```

问题是：*“非静态字段需要对象引用”*。我知道我可以从隐藏字段或 发送信息`div`，但是，可以轻松更改该信息字段。那么在服务器端可以使用哪种方式来知道哪个用户正在发布？多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:35:13.113

`Request`object 是一个存在于 中的实例`Page`，因此您需要一个引用才能在静态上下文中访问此对象。您可以在此上下文中`HttpContext.Current.Request`用于访问。`Request`

```
[WebMethod]
public static bool insertComment(string commentString)
{
    //userName validation here
    string userName = 
           (FormsAuthentication.Decrypt(
               HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName].Value).Name);
    return new CommentClass().InsertComment(commentString, userName);
} 
```

# mysql - 在忽略右侧的条件下计算 LEFT JOIN 的行数的 SQL 帮助

> ID：15532707
> 
> 赞同：1
> 
> 时间：2013-03-20T19:15:53.470
> 
> 标签：mysql, sql

我有 2 张桌子，门票一个代币。标记为列 user_type。

我正在尝试计算如何计算所有在 tokens.ticket_id 上加入的没有`tokens.user_type == 'ADMIN'`. 所以`user_type`可以等于任何东西，除了管理员。

问题是一张票可能还有 5 个其他令牌。

我对 SQL 知识有一定的了解，但这个知识让我困惑了一段时间。

如果标题写得不正确，也很抱歉。谢谢你，基兰！

## 编辑

我可能解释错了。但这仍然比应有的回报更多。如果它有一个 ADMIN 令牌，它不应该出现在结果中，否则它应该出现。我添加了这个，因为 stackoverflow 抱怨没有实质性的更改来进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:20:30.443

像这样的东西可能是您正在寻找的东西：

```
SELECT
    COUNT(DISTINCT Tickets.id)
FROM
    Tickets
    INNER JOIN Tokens
        ON Tokens.ticket_id = Tickets.id
        AND Tokens.user_type != 'ADMIN' 
```

* * *

如果您需要包含没有令牌的票，这可能有效：

```
SELECT
    COUNT(DISTINCT Tickets.id)
FROM
    Tickets
    LEFT JOIN Tokens
        ON Tokens.ticket_id = Tickets.id
WHERE
    Tokens.user_type != 'ADMIN' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:21:24.153

尝试：

```
Select Count(*) From Tickets t
Where Not Exists(Select * From tokens
                 Where ticket_Id = t.Ticket_id
                     And user_type ='Admin') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:35:05.033

尝试：

```
SELECT COUNT(DISTINCT Tickets.id) - 
       COUNT(DISTINCT CASE WHEN Tokens.user_type = 'ADMIN' THEN Tickets.id END)
FROM Tickets
LEFT JOIN Tokens ON Tokens.ticket_id = Tickets.id 
```

如果您的摘要不需要来自 Tokens 表的信息，则可以更有效地将其重写为：

```
SELECT COUNT(*)
FROM Tickets
LEFT JOIN Tokens ON Tokens.ticket_id = Tickets.id AND Tokens.user_type = 'ADMIN'
WHERE Tokens.ticket_id IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T19:24:19.517

我会在函数时聚合一个案例，这样你就可以说边缘案例的数量和总数：

```
declare @Person Table ( personID int identity, person varchar(8));

insert into @Person values ('Brett'),('Paul'),('John');

declare @Orders table ( OrderID int identity, PersonID int, Description varchar(32), Amount int);

insert into @Orders values (1, 'Shirt', 20),(1, 'Shirt', 50),(1, 'Shirt', 22),(1, 'Admin', 52),(2, 'Shirt', 22),(2, 'Admin', 52);

Select
    p.person
,   count(case when o.Description != 'Admin' then o.orderID end) as NonAdminOrders
,   count(o.orderID) as TotalOrders
from @Person p
    left join @Orders o on p.personID = o.PersonID
group by p.person 
```

# jquery - jquery change class of a div on click

> ID：15532713
> 
> 赞同：0
> 
> 时间：2013-03-20T19:16:12.707
> 
> 标签：jquery

I have a div, with a specific class.

When one clicks the div, I want its class to change to a something else.

Is it because there is no `.class` or `.parent`.

```
$(".mapexpand").click(function() {
    $(this).parent().class('.mapcollapse');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:17:14.467

```
$(".mapexpand").click(function() {
    $(this).attr('class', 'mapcollapse');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:18:01.927

```
$(".mapexpand").click(function() {
    $(this).attr('class', 'mapcollapse');
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:18:13.340

```
$(".mapexpand").click(function() {
    $(this).parent().removeClass().addClass('mapcollapse');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T19:19:54.337

```
$(".mapexpand").click(function() {
$(this).parent().toggleClass('mapcollapse');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T19:23:00.193

Use addClass and removeClass functions

```
$(".mapexpand").click(function() {
   $(this).removeClass("mapexpand").addClass("newClass");
}); 
```

This one removes your current class and adds a new one

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T19:36:04.820

In response to your comments above, here is the correct function.

```
$(".mapexpand").click(function() {
    $(this).attr('class', 'mapcollapse');
    if($(this).type()=="div") {
        // do more stuff
    }
}); 
```

# javascript - 使用回调从 FB.api 获取值？

> ID：15532714
> 
> 赞同：0
> 
> 时间：2013-03-20T19:16:15.403
> 
> 标签：javascript, facebook-graph-api, callback, facebook-javascript-sdk

我有一个简单的问题，一直在 Stack Overflow 上搜索，有一些关于这个主题的问题，但无法得到有效的解决方案。

我有一个简单的函数来获取 Javascript SDK 上的页面喜欢数：

```
function getLikes(div, graf) {
    var numblike;
    FB.api(graf, function(response) {
        var numblike = response.likes;
        $(div).prepend(numblike);
    });
    return numblike; // can't get it to return
}

var pLike = getLikes ("#mydiv", /app_id); // always undefined 
```

函数有效，它将正确的数字预先添加到我的 div 但返回总是将我的变量设置为未定义。我知道脚本是异步运行的，我需要使用回调函数，但我就是做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:00:13.273

这称为[javascript 事件循环](http://developer.yahoo.com/blogs/ydn/posts/2010/10/understanding-the-event-loops-and-writing-great-code-for-node-js-part-1/)。您不能从函数返回 numblike，因为它仅在 FB.api 的回调中设置。所以你可以做类似的事情 - 只需发送回调：

```
function getLikes(div, graf,callback) {
  FB.api(graf, function(response) {
    var numblike = response.likes;
    $(div).prepend(numblike);
    callback(numblike);
  });

}

getLikes ("#mydiv", /app_id,function(numblike){
  alert(numblike);
}); // always undefined 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:45:14.860

您已经贴`numblike`了两次，只需删除第二次中的 var 声明：

```
function getLikes(div, graf) {
  var numblike;
  FB.api(graf, function(response) {
    numblike = response.likes; // var removed
    $(div).prepend(numblike);
  });
 return numblike; 
} 
```

# asp.net-mvc - 我们应该使用实体框架代码优先方法在 MVC 应用程序中使用数据存储库模式吗？

> ID：15532723
> 
> 赞同：3
> 
> 时间：2013-03-20T19:16:53.137
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-5, repository-pattern

我现在使用实体框架代码优先方法开发了许多应用程序。在所有我使用数据存储库模式。此数据存储库模式一次查询单个实体。例如，

我有 2 个模型 Employee 和 Department

因此，要获取所有员工和部门，我将创建 2 个数据存储库实例。例如

```
var empRepository = new DataRepository<Employee>();
var allEmployees = empRepository.GetAll();

var depRepository = new DataRepository<Department>();
var alldepartment = depRepository.GetAll(); 
```

现在，这种模式在大多数情况下都很好用。现在，当我想执行加入时，我不能在这种模式下这样做。只有在获取了两个实体的所有记录之后，我才能执行连接，然后我可以在内存数据上使用连接。这在我的逻辑中产生了 2 个查询的额外开销。有没有人有可以与 DataRepository 模式一起使用的好的模式或解决方案。请建议此模式的任何替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T20:05:56.777

实际上，我昨天刚刚在我的通用存储库中实现了一个 Join 函数。这比每个人都想的要容易得多，而且您可以在这样做的同时使用 Entity Framework 的一些很酷的功能。

首先，我使用的存储库类似于我在[这篇博文中所写的](http://sitecore.paragon-inc.com/resources/blogs-posts/what-to-return)内容。您会注意到许多方法正在返回`IQueryable`。这绝非偶然。`IQueryable`将允许仍然使用延迟执行，这意味着查询不会在数据库上运行，直到某些东西强制它（即循环或`.ToList()`调用）。您会看到，通过`Join`将`IQueryable`.

话虽如此，这就是我如何在我的存储库中获得 Join ，基于[Join](http://msdn.microsoft.com/en-us/library/bb534644%28v=vs.95%29.aspx)方法的 Queryable 版本：

```
public IQueryable<TResult> Join<TInner, TKey, TResult>(IRepository<TInner> innerRepository, Expression<Func<T, TKey>> outerSelector, Expression<Func<TInner, TKey>> innerSelector, Expression<Func<T, TInner, TResult>> resultSelector) where TInner : class
{
  return DbSet.Join(innerRepository.All(), outerSelector, innerSelector, resultSelector);
} 
```

然后，这只对数据库进行一次查询以获取您请求的所有信息（同样，因为它只`IQueryable`在`All()`方法中传递一个）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T19:37:32.893

使用`Repository`模式，您可以像在正常情况下一样加入两个表。假设您已经像这样定义了您的存储库：

```
 public interface IRepository<T>
    {
        T GetById(object id);
        void Insert(T entity);
        void Update(T entity);
        void Delete(T entity);
        IQueryable<T> Table { get; }
    } 
```

然后你可以加入两个表如下：

```
from p in _someRepository.Table
join p2 in _someOtherRepository.Table on p.FOO equals p2.BAR 
```

使用这种方法，无需将所有表条目加载到内存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T21:48:13.330

这是存储库成为负担的原因之一，尤其是通用存储库（每个实体类型一个）。如果你试图保持对模式的忠诚，你总是会遇到一些重大问题。

*   你一直在写这些笨拙的连接查询（linq）。您不能真正利用导航属性的强大功能。当查询变得非常简单时，这是一个主要的痛苦。
*   因此，无论如何您都可能会使用导航属性。现在的问题是：哪个存储库负责哪个实体？查询的目标是获取孩子，但一个舒适的入口点是父母。
*   您还必须有一些工作单元 (UoW) 来收集和“处理”不同存储库的 CUD 操作。

为什么不直接使用上下文？看到[这篇文章](https://stackoverflow.com/q/5625746/861716)（似乎我一直在引用它）。上下文是包含存储库（`DbSet`s 或`ObjectSet`s）并跟踪更改和事务 (UoW) 的类。为什么将这个存储库单元和 UoW 包装在另一层存储库和 UoW 中？那是两层。然后，您不会将存储库公开给客户端代码，因为您不想公开`IQueryable`s。因此，您将在创建、编排和处置它们的服务层中包装存储库。那是三层。

（并且存储库应该公开，`IQueryable`否则它们是不可组合的）。

但它是不可测试的，人们说，我们想模拟存储库，因此我们可以将这些模拟存储库注入到我们的服务中进行单元测试。那是一种错觉。[模拟实体框架行为具有欺骗性，实际上是不可能](https://stackoverflow.com/q/13332002/861716)的。我并不是说单元测试没有用。我为一旦对象存在就应该工作的各种业务逻辑编写单元测试。我只是不编写单元测试来测试数据访问代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T19:30:30.797

请查看以下链接，以防您还没有...

[社交 MSDN](http://social.msdn.microsoft.com/Forums/en-US/linqtosql/thread/503e64cf-51e7-431f-af54-0a901532253b/)和

[论坛.Asp.Net](http://forums.asp.net/t/1857705.aspx/1?Repository%20Pattern%20And%20Retrieving%20Data%20From%20Multiple%20Tables)

@Link.fr 的回答如下：-

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Linq.Expressions;

namespace Repository
{
  class Program
  {
    static void Main(string[] args)
    {
      // get all the informations about orders
      CustomersRepository oCustomersRepository = new CustomersRepository();
      ProductsRepository oProductsRepository = new ProductsRepository();
      OrdersRepository oOrdersRepository = new OrdersRepository();

      var query1 = oOrdersRepository.SelectAll().
        Join(oCustomersRepository.SelectAll(),
           order => order.CustomerId,
           customer => customer.Id,
           (order, customer) => new
                        {
                          MyOrder = order,
                          MyCustomer = customer
                        }).
        Join(oProductsRepository.SelectAll(),
           item => item.MyOrder.ProductId,
           product => product.Id,
           (item, product) => new 
                      { 
                        MyOrder = item.MyOrder, 
                        MyCustomer = item.MyCustomer, 
                        MyProduct = product }).
        ToList();

      foreach (var row in query1)
      {
        Console.WriteLine("query1 : {0} - {1}", row.MyCustomer.Name, row.MyProduct.Name);
      }

      Console.WriteLine("--"); 
```

或者

```
var query2 = (from order in oOrdersRepository.SelectAll()
             join customer in oCustomersRepository.SelectAll() on order.CustomerId equals customer.Id
             join product in oProductsRepository.SelectAll() on order.ProductId equals product.Id
             select
             new
             {
               CustomerName = customer.Name,
               ProductName = product.Name
             }).ToList();

      foreach (var row in query2)
      {
        Console.WriteLine("query2 : {0} - {1}", row.CustomerName, row.ProductName);
      }

      Console.ReadKey();
    }
  } 
```

类是这样的： -

```
public class Customer
  {
    public int Id { get; set; }
    public string Name { get; set; }
  }

  public class Product
  {
    public int Id { get; set; }
    public string Name { get; set; }
  }

  public class Order
  {
    public int CustomerId { get; set; }
    public int ProductId { get; set; }
  }

  public interface IRepository<T>
  {
    IList<T> SelectAll();
    IList<T> SelectAll(Func<T, bool> expression);
  }

  public class CustomersRepository : IRepository<Customer>
  {
    public IList<Customer> SelectAll()
    {
      return new List<Customer>
      {
        new Customer{ Id = 1, Name = "Customer1"},
        new Customer{ Id = 2, Name = "Customer2"},
        new Customer{ Id = 3, Name = "Customer3"},
        new Customer{ Id = 4, Name = "Customer4"}
      };
    }

    public IList<Customer> SelectAll(Func<Customer, bool> expression)
    {
      return new List<Customer>
      {
        new Customer{ Id = 1, Name = "Customer1"},
        new Customer{ Id = 2, Name = "Customer2"},
        new Customer{ Id = 3, Name = "Customer3"},
        new Customer{ Id = 4, Name = "Customer4"}
      }.Where(expression).ToList();
    }
  }

  public class ProductsRepository : IRepository<Product>
  {
    public IList<Product> SelectAll()
    {
      return new List<Product>
      {
        new Product{ Id = 1, Name = "Product1"},
        new Product{ Id = 2, Name = "Product2"},
        new Product{ Id = 3, Name = "Product3"},
        new Product{ Id = 4, Name = "Product4"}
      };
    }

    public IList<Product> SelectAll(Func<Product, bool> expression)
    {
      return new List<Product>
      {
        new Product{ Id = 1, Name = "Product1"},
        new Product{ Id = 2, Name = "Product2"},
        new Product{ Id = 3, Name = "Product3"},
        new Product{ Id = 4, Name = "Product4"}
      }.Where(expression).ToList();
    }
  }

  public class OrdersRepository : IRepository<Order>
  {
    public IList<Order> SelectAll()
    {
      return new List<Order>
      {
        new Order{ CustomerId = 1, ProductId = 1},
        new Order{ CustomerId = 1, ProductId = 2},
        new Order{ CustomerId = 2, ProductId = 3},
        new Order{ CustomerId = 3, ProductId = 4},
      };
    }

    public IList<Order> SelectAll(Func<Order, bool> expression)
    {
      return new List<Order>
      {
        new Order{ CustomerId = 1, ProductId = 1},
        new Order{ CustomerId = 1, ProductId = 2},
        new Order{ CustomerId = 2, ProductId = 3},
        new Order{ CustomerId = 3, ProductId = 4},
      }.Where(expression).ToList();
    }
  }
} 
```

可能会有所帮助。

# android - 使用 Phonegap 截图插件保存画布

> ID：15532724
> 
> 赞同：3
> 
> 时间：2013-03-20T19:16:54.520
> 
> 标签：android, html, cordova, html5-canvas

我目前正在为android的phonegap中实现一个带有Html5画布的照片编辑应用程序。我很想使用这里找到的phonegap屏幕截图插件：[https](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Screenshot) ://github.com/phonegap/phonegap-plugins/tree/master/Android/Screenshot 将画布的内容以 .png 格式保存在设备的 SD 卡上。我尝试使用以下代码实现它。

```
<script type="text/javascript" src="cordova-2.2.0.js"></script>
<script type="text/javascript" src="Screenshot.js"></script>

<script>
document.addEventListener("deviceready",onDeviceReady,false);

// Cordova is ready to be used!
//
function onDeviceReady() {
$('#13zoom').click(function(){
    window.plugins.Screenshot.saveScreenshot();
});
}
</script> 
```

但是我得到了整个页面的截图，而不是 html5 画布的内容。

除了 Data to url() 函数在 android 3x 及以下版本中被破坏，这就是为什么我求助于截图插件来保存画布的内容。

# c# - C#如何在windows窗体中保存用户输入

> ID：15532726
> 
> 赞同：-1
> 
> 时间：2013-03-20T19:16:57.723
> 
> 标签：c#, winforms

我目前正在尝试制作一个小程序，将用户在文本框中的输入存储到文件中，但不知何故我无法将输入保存到文件中，这就是我到目前为止所做的：

头等舱：

```
class Name
{
    private string SongName;
    private string ArtistName;

    //Constructor
    public Name(string SongName, string ArtistName)
    {
        this.ArtistName = ArtistName;
        this.SongName = SongName;
    }

    //Properties for SongName
    public string songName
    {
        get { return SongName; }
        set { SongName = value; }
    }

    //Properties for ArtistName
    public string artistName
    {
        get { return ArtistName; }
        set { ArtistName = value; }
    }
} 
```

这是 Form1 代码：

```
 public Form1()
    {
        InitializeComponent();
    }

    private string SongName, ArtistName;

    public void Registry()
    {
        List<Name> MusicList = new List<Name>();
        MusicList.Add(new Name(SongName = txtSongName.Text , ArtistName = txtArtistName.Text)); //Add new elements to the NameClass

        //Save the list
        StreamWriter FileSaving = new StreamWriter("MusicList");
        for (int i = 0; i < MusicList.Count; i++)
        {
            string sName = MusicList[i].songName;
            string aName = MusicList[i].artistName;
        }
        FileSaving.Close();
    }

    private void btnEnter_Click(object sender, EventArgs e)
    {
        Registry();
        //Set the textbox to emty so the user can enter new data
        txtArtistName.Text = "";
        txtSongName.Text = "";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:20:38.100

....您从不向文件写入任何内容.....

[一个快速的谷歌给了我这个](http://msdn.microsoft.com/en-us/library/vstudio/8bh11f1k.aspx)

请注意对...的调用`file.WriteLine(line);`...您意识到您也没有创建带有扩展名的文件吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T19:21:07.097

在您的 for 循环中，您需要将值实际写入流。

```
for (int i = 0; i < MusicList.Count i++)
{
    string sName = MusicList[i].songName;
    string aName = MusicList[i].artistName;
    FileSaving.WriteLine(sName + ' ' + aName);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T19:20:38.050

在这里，您正在创建`StreamWriter`但从不使用它：

```
StreamWriter FileSaving = new StreamWriter("MusicList");
for (int i = 0; i < MusicList.Count; i++)
{
    string sName = MusicList[i].songName;
    string aName = MusicList[i].artistName;
}
FileSaving.Close(); 
```

字符串 aName 和 sName 已分配给但从未保存。

请参阅此处有关使用 StreamWriter 的示例：

[http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T19:21:23.813

```
using (StreamWriter writer = new StreamWriter(filePath))
{
        for (int i = 0; i < MusicList.Count; i++)
        {
            writer.WriteLine(MusicList[i].songName + " , " + MusicList[i].artistName);
        }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T09:42:07.533

我认为你应该使用 XML 序列化

这是我的序列化泛型类

```
public static class Serializer<T>
{
    public static T Deserialize(string path)
    {
        System.Xml.Serialization.XmlSerializer serializer = new System.Xml.Serialization.XmlSerializer(typeof(T));

        System.IO.FileStream stream = null;

        try
        {
            stream = new System.IO.FileStream(path, System.IO.FileMode.Open, System.IO.FileAccess.Read, System.IO.FileShare.Read);

            return (T)serializer.Deserialize(stream);
        }
        finally
        {
            if (stream != null)
            {
                stream.Close();
                stream.Dispose();
            }
        }
    }

    public static void Serialize(string path, T obj, bool createFolder = false)
    {
        System.Xml.Serialization.XmlSerializer serializer = new System.Xml.Serialization.XmlSerializer(typeof(T));

        if (createFolder)
        {
            System.IO.Directory.CreateDirectory(System.IO.Path.GetDirectoryName(path));
        }

        using (System.Xml.XmlTextWriter xmlWriter = new System.Xml.XmlTextWriter(path, System.Text.Encoding.Unicode))
        {
            xmlWriter.Formatting = System.Xml.Formatting.Indented;

            serializer.Serialize(xmlWriter, obj);

            xmlWriter.Flush();
            xmlWriter.Close();
        }
    }
} 
```

然后在注册方法中

```
 public void Registry()
    {
        List<Name> MusicList = new List<Name>();
        MusicList.Add(new Name(SongName = txtSongName.Text , ArtistName = txtArtistName.Text)); //Add new elements to the NameClass

        Serializer<List<Name>>.Serialize(@"C:\saved.xml", MusicList);
    } 
```

**请注意，您必须在类 Name 中添加默认构造函数**

# java - 使用动态类引用时抑制警告

> ID：15532728
> 
> 赞同：5
> 
> 时间：2013-03-20T19:17:04.573
> 
> 标签：java, generics, map, hashmap, instantiation

# 背景

现有系统通过其类创建大量`HashMap`实例：`Generics`

```
import java.util.Map;
import java.util.HashMap;

public class Generics {
  public static <K,V> Map<K, V> newMap() {
    return new HashMap<K,V>();
  }

  public static void main( String args[] ) {
    Map<String, String> map = newMap();
  }
} 
```

这是实现该`Map`接口的所有类实例的单一创建点。我们希望能够在不重新编译应用程序的情况下更改地图实现。例如，这将允许我们使用 Trove's`THashMap`来优化应用程序。

# 问题

`THashMap`由于许可条件，该软件不能与 Trove 捆绑在一起。因此，如果有一种方法可以指定地图的名称以在运行时实例化（对于那些没有此类许可限制的人），那就太好了。例如：

```
import java.util.Map;
import java.util.HashMap;

import gnu.trove.map.hash.THashMap;

public class Generics {
  private String mapClassName = "java.util.HashMap";

  @SuppressWarnings("unchecked")
  public <K,V> Map<K,V> newMap() {
    Map<K,V> map;

    try {
      Class<? extends Map<K,V>> c = (Class<Map<K,V>>)Class.forName(
        getMapClassName() ).asSubclass( Map.class );
      map = c.newInstance();
    }
    catch( Exception e ) {
      map = new HashMap<K,V>();
    }

    return map;
  }

  protected String getMapClassName() {
    return this.mapClassName;
  }

  protected void setMapClassName( String s ) {
    this.mapClassName = s;
  }

  public static void main( String args[] ) {
    Generics g = new Generics();
    Map<String, String> map = g.newMap();
    System.out.printf( "Class = %s\n", map.getClass().toString() );

    g.setMapClassName( "gnu.trove.map.hash.THashMap" );
    map = g.newMap();
    System.out.printf( "Class = %s\n", map.getClass().toString() );
  }
} 
```

# 问题

有没有办法`@SupressWarnings`在编译时避免注释`-Xlint`并且仍然避免警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:51:11.880

> 有没有办法`@SuppressWarnings`在编译时避免注释`-Xlint`并且仍然避免警告？

号`Class.forName`返回一个`Class<?>`。分配它的唯一方法`Class<? extends Map<K, V>>`是进行未经检查的强制转换。有时未经检查的强制转换是必要的，因此`@SuppressWarnings("unchecked")`在这里使用是可以接受的（前提是您很好地记录了原因）。

`Class<? extends Map<?, ?>>`恕我直言，保留对 to 的引用然后对 to 的结果进行未经检查的`newInstance`转换会更正确`Map<K,V>`。我之所以这么说，是因为`Class`对象是原始类型的规范表示，所以类似的类型`Class<? extends Map<K, V>>`有点误导。

* * *

这超出了问题的范围，但这是您解决方案的建议替代方案：

```
public interface MapFactory {
    <K, V> Map<K, V> newMap() throws Exception;
}

public enum HashMapFactory implements MapFactory {

    INSTANCE;

    @Override
    public <K, V> Map<K, V> newMap() {
        return new HashMap<K, V>();
    }
}

public static final class DynamicMapFactory implements MapFactory {

    private final Constructor<? extends Map<?, ?>> constructor;

    private DynamicMapFactory(Constructor<? extends Map<?, ?>> constructor) {
        this.constructor = constructor;
    }

    @Override
    //Impl note: these checked exceptions could also be wrapped in RuntimeException
    public <K, V> Map<K, V> newMap() throws InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {
        @SuppressWarnings("unchecked") //this is okay because the default ctor will return an empty map
        final Map<K, V> withNarrowedTypes = (Map<K, V>)constructor.newInstance();
        return withNarrowedTypes;
    }

    public static DynamicMapFactory make(String className) throws ClassNotFoundException, NoSuchMethodException, SecurityException {

        @SuppressWarnings("unchecked") //Class<? extends Map> can safely be cast to Class<? extends Map<?, ?>>
        final Class<? extends Map<?, ?>> type =
                (Class<? extends Map<?, ?>>)Class.forName(className).asSubclass(Map.class);
        final Constructor<? extends Map<?, ?>> constructor = type.getDeclaredConstructor();

        return new DynamicMapFactory(constructor);
    }
}

public static void main(String[] args) throws Exception {

    Map<String, Integer> map1 = HashMapFactory.INSTANCE.newMap();
    Map<String, Integer> map2 = DynamicMapFactory.make("java.util.TreeMap").newMap();

    System.out.println(map1.getClass()); //class java.util.HashMap
    System.out.println(map2.getClass()); //class java.util.TreeMap
} 
```

# postgresql - 你如何删除postgres中的语言？

> ID：15532730
> 
> 赞同：0
> 
> 时间：2013-03-20T19:17:13.963
> 
> 标签：postgresql

我试图通过删除然后创建带有附加参数的 plpgsql 语言来设置 plpgsql 的验证器。然而，Postgres 似乎没有删除语言的选项......

```
db=# DELETE TRUSTED PROCEDURAL LANGUAGE 'plpgsql'
db-# HANDLER plpgsql_call_handler
db-# VALIDATOR plpgsql_validator;
ERROR:  syntax error at or near "TRUSTED"
LINE 1: DELETE TRUSTED PROCEDURAL LANGUAGE 'plpgsql' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:17:13.963

解决方案是按如下方式创建或替换...

```
db=# CREATE OR REPLACE TRUSTED PROCEDURAL LANGUAGE 'plpgsql'
db-# HANDLER plpgsql_call_handler
db-# VALIDATOR plpgsql_validator;
NOTICE:  using pg_pltemplate information instead of CREATE LANGUAGE parameters
CREATE LANGUAGE 
```

# mongodb - MongoDB 2.4 新增文本索引功能

> ID：15532739
> 
> 赞同：2
> 
> 时间：2013-03-20T19:17:29.963
> 
> 标签：mongodb

所以我有一个奇怪的配置数据库导入 MongoDB，看起来像这样：

```
"_id" : ObjectId("51191d45890311d9b2a0865d"),
"field1" : "randomtextstuff",
"field2" : "randomtextstuff",
"field3" : "randomtextstuff",
"field4" : "randomtextstuff",
"field5" : "randomtextstuff" 
```

有些文档有 100 个字段，有些则没有。

所以我想测试新的文本搜索，所以我尝试了以下索引：

```
db.profile_specialties.ensureIndex({"field1":"text",
"field2":"text",
"field3":"text",
"field4":"text",
"field5":"text",
"field6":"text",
... All the way to 100
"field96":"text",
"field97":"text",
"field98":"text",
"field99":"text",
"field100":"text"}) 
```

返回的错误信息是：

```
{
        "err" : "ns name too long, max size is 128",
        "code" : 10080,
        "n" : 0,
        "connectionId" : 1,
        "ok" : 1
} 
```

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T22:34:31.717

使用 MongoDB 2.4 文本搜索，您可以使用新的[通配符说明符 ( `$**`)](http://docs.mongodb.org/manual/core/text-indexes/#index-all-fields)来索引具有字符串内容的所有字段：

```
db.profile_specialties.ensureIndex("$**":"text"}) 
```

不过，您应该考虑到跨所有字段的文本索引将非常大。

# c++ - 使用 calloc 时 Python weave 异常缓慢

> ID：15532741
> 
> 赞同：1
> 
> 时间：2013-03-20T19:17:34.027
> 
> 标签：c++, python, c, numpy, scipy

我使用以下代码进行就地向前向后 FIR 过滤：

```
lena = len(a)
lenb = len(b)
convol = zeros(a.shape)

code = """
            // Forward convolution
            int pad = (lenb-1)/2;
            int i, j;

            for (i=pad; i<pad+lena; i++)
            {
                int kmin, kmax, k;
                // Reverse indexing for the next pass
                j = lena-1-i+pad;

                convol(j)  = 0;

                kmin = (i >= lenb - 1) ? i - (lenb - 1) : 0;
                kmax = (i <  lena - 1) ? i : lena - 1;

                for (k = kmin; k <= kmax; k++)
                {
                  convol(j)  += a(k)*b(i - k);
                }                       
            }

            // Backward convolution (the signal in convol has been
            // reversed using reversed indexes)            
            for (i=pad; i<pad+lena; i++)
            {
                int kmin, kmax, k;
                // Reverse indexing for reordering the output vector
                j = lena-1-i+pad;

                a(j)  = 0;

                kmin = (i >= lenb - 1) ? i - (lenb - 1) : 0;
                kmax = (i <  lena - 1) ? i : lena - 1;

                for (k = kmin; k <= kmax; k++)
                {
                  a(j)  += convol(k)*b(i - k);
                }                       
            }                
            return_val = 1;
       """

weave.inline(code, [ 'a', 'b', 'lena', 'lenb', 'convol'],
type_converters=converters.blitz, compiler = 'g++') 
```

当然，“convol”变量不需要在 C/C++ 范围之外看到，我需要空间和处理优化。因此，将这段代码替换为以下代码是有意义的（至少对我而言）：

```
lena = len(a)
lenb = len(b)

code = """
            // Forward convolution
            int pad = (lenb-1)/2;
            int i, j;

            float* convol = (float*) calloc(lena, sizeof(float));             

            for (i=pad; i<pad+lena; i++)
            {
                int kmin, kmax, k;
                // Reverse indexing for the next pass
                j = lena-1-i+pad;

                convol[j]  = 0;

                kmin = (i >= lenb - 1) ? i - (lenb - 1) : 0;
                kmax = (i <  lena - 1) ? i : lena - 1;

                for (k = kmin; k <= kmax; k++)
                {
                  convol[j]  += a(k)*b(i - k);
                }                       
            }

            // Backward convolution (the signal in convol has been
            // reversed using reversed indexes)            
            for (i=pad; i<pad+lena; i++)
            {
                int kmin, kmax, k;
                // Reverse indexing for reordering the output vector
                j = lena-1-i+pad;

                a(j)  = 0;

                kmin = (i >= lenb - 1) ? i - (lenb - 1) : 0;
                kmax = (i <  lena - 1) ? i : lena - 1;

                for (k = kmin; k <= kmax; k++)
                {
                  a(j)  += convol[k]*b(i - k);
                }                       
            }                

            free(convol);

            return_val = 1;
       """

weave.inline(code, [ 'a', 'b', 'lena', 'lenb'],
type_converters=converters.blitz, compiler = 'g++') 
```

唯一的区别是我没有使用 numpy 数组，而是直接使用了 C 浮点数组。问题是第二个代码的处理时间是第一个代码的 2 倍……这是为什么呢？第二个版本有问题吗？应该更快……！

# c++ - 命名空间和静态类成员链接

> ID：15532745
> 
> 赞同：11
> 
> 时间：2013-03-20T19:17:40.923
> 
> 标签：c++, gcc, linker, g++

假设我有两个文件：

```
/**
 * class.cpp
 */ 
#include <stdio.h>
class foo 
{
private:
        int func();
};

int foo::func(void)
{
        printf("[%s:%d]: %s\n", __FILE__, __LINE__, __FUNCTION__);
        return -1; 
} 
```

和

```
/**
 * main.cpp
 */ 
#include <stdio.h>
namespace foo 
{
        int func(void);
}
int main(void)
{
        int ret = foo::func();
        printf("[%s:%d]: ret=%d\n", __FILE__, __LINE__, ret);
        return 0;
} 
```

编译如下：

```
g++ -o a.out main.cpp class.cpp 
```

可执行文件有一个输出：

```
[class.cpp:15]: func
[main.cpp:14]: ret=-1 
```

最后是我的问题：

为什么这个示例代码编译没有任何错误，并且我们能够调用**类 foo的****私有**方法？

 **用 gcc 4.6.3 编译，但不仅如此。我知道编译器不区分这两个符号（来自命名空间**foo的****func**函数和来自**类 foo**的私有函数**foo**）。来自**nm**的输出：

 ******```
nm class.o
00000000 T _ZN3foo4funcEv
00000017 r _ZZN3foo4funcEvE12__FUNCTION__
         U printf

nm main.o
         U _ZN3foo4funcEv
00000000 T main
         U printf 
```

我想问一下这种行为是否正确？恕我直言，这不是正确的行为，而且根本不安全（破坏封装）。

我想提一下，Visual Studio 2008 中的编译器不会链接这两个符号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:52:39.233

**为什么编译器不抱怨？**

请注意，就编译器而言，“类”、“结构”和“命名空间”都定义了一个命名空间。所以编译器相应地装饰符号。如果您在同一个文件中定义类和命名空间，它会抱怨，但这里不是这种情况。

**为什么链接器不抱怨？**

您编写代码的方式使`func()`定义的 in`namespace foo`弱于`func()`定义的 in `class foo`。基本上，`func()`定义的`namespace foo`只是一个没有实现的签名。您可以看到它留给链接器在运行时解析符号，因为实现不在`main.cpp`：

```
nm main.o
       U _ZN3foo4funcEv
//Here^^^^ 
```

这样，由于命名空间和类名恰好相同（导致 相同的符号`foo::func`），链接器在链接时解析符号，找到具有相同符号的强定义，并针对它进行链接。

如果你也实现`func()`了`namespace foo`：

```
/**
 * main.cpp
 */
#include <stdio.h>

namespace foo
{
    int func(void) {
        printf("NM_FOO [%s:%d]: %s\n", __FILE__, __LINE__, __FUNCTION__);
        return -1;
    };
}
int main(void)
{
    int ret = foo::func();
    printf("[%s:%d]: ret=%d\n", __FILE__, __LINE__, ret);
    return 0;
} 
```

您会看到链接器抱怨：

```
duplicate symbol foo::func()     in:
/var/folders/.../class.o
/var/folders/.../main.o
ld: 1 duplicate symbol for architecture x86_64 
```

如果您这次查看 main.o，您会看到：

```
0000000000000064 T __ZN3foo4funcEv
0000000000000158 S __ZN3foo4funcEv.eh
00000000000000e0 s __ZZN3foo4funcEvE12__FUNCTION__
0000000000000000 T _main
0000000000000128 S _main.eh
                 U _printf 
```

和class.o：

```
0000000000000000 T __ZN3foo4funcEv
00000000000000a0 S __ZN3foo4funcEv.eh
0000000000000080 s __ZZN3foo4funcEvE12__FUNCTION__
                 U _printf 
```

两者都定义了同样强大的函数符号，导致链接器错误。

**请记住，链接器不知道命名空间和类之间的区别。它解析目标代码中的符号。如果发生强烈的重新定义，它只会抱怨。一个或多个较弱的定义和一个强定义在链接器世界中是完全可以的。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T19:33:16.500

因为您已将其定义`foo()`为 main.cpp 中命名空间的成员，所以编译器就是这样处理它的。类/结构/命名空间公共/私有等之间的区别取决于编译器知道函数的定义 - 在这里你故意开始愚弄它。

链接器不知道这些区别，它只是解析符号名称，并且在您的编译器的情况下，函数名称的装饰最终相同。符号名称的装饰方式在 C++ 中未指定，因此这是完全有效的行为。********

# jquery - jquery：包含使用变量的选择器

> ID：15532746
> 
> 赞同：7
> 
> 时间：2013-03-20T19:17:44.640
> 
> 标签：jquery, contains

为什么在 :contains() 中使用变量不起作用？有什么办法让它工作吗？`filter('contains()')`也没有用。

```
<h2>Test</h2>
<div>Test</div>

var model = $('h2').text();
//variable doesn't work
$('div:contains(model)').css('background','yellow');
//obviously, string works
$('div:contains("Test")').css('background','yellow'); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T19:21:38.187

选择器不使用 Javascript 变量。您必须将变量中的值放在选择器字符串中：

```
$('div:contains("' + $modele + '")') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T19:19:17.460

与 PHP 不同，Javascript 不支持字符串插值。

如果要在字符串中使用变量，则必须使用运算符**连接**`+`它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-20T19:26:32.120

它只是一个连接问题：

```
$('div:contains(' + $modele + ')').css('background','yellow'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T19:23:07.140

如@Slaks 回答中所述，您需要连接。

```
$('div:contains('+$modele+')').css('background','yellow'); works 
```

这是一个小提琴。

[http://jsfiddle.net/CMKsF/](http://jsfiddle.net/CMKsF/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T19:23:30.960

您需要将其作为字符串传递 .. 因此将 var 与`"`using`+`运算符连接起来 .. 以便将其作为字符串

试试这个

```
var $modele = $('h2').text();
//variable doesn't work
$('div:contains("'+$modele+'")').css('background','yellow'); 
```

# grails - Grails GORM，多层领域类的急切获取模式

> ID：15532749
> 
> 赞同：4
> 
> 时间：2013-03-20T19:17:53.500
> 
> 标签：grails, grails-orm, grails-2.1

我有以下域结构：

```
class Survey {

    Integer id
    String title

    static hasMany = [questions: Question]
    static constraints = {
        id()
        title()
        questions()
    }

    String toString(){
        return title
    }
}

class Question {

    Integer id
    String text

    static hasMany = [responses: Response]
    static fetchMode = [responses: 'eager']

    static constraints = {
        id()
        text()
        responses()
    }

    String toString(){
        return text
    }
}

class Response {

    Integer id
    String text
    Integer numberOfPeopleSelected = 0

    static constraints = {
        id()
        text()
        numberOfPeopleSelected()
    }

    String toString(){
        return text
    }
} 
```

我已经修改`Bootstrap.groovy`为在启动时初始化一些数据，并单独调用`Survey.list()`，`Question.list()`并`Response.list()`显示每个单独的级别都是使用预期值创建的

但是，当我这样做`Survey.list()`并深入研究问题时，响应始终为空，如下所示：

![在此处输入图像描述](../Images/939fdb8d296e68ee352c4850d3b9b023.png)

我期望通过将[fetchMode](http://grails.org/doc/2.0.x/ref/Domain%20Classes/fetchMode.html)设置为渴望它应该始终加载该特定对象。

我可以对我的域对象进行哪些更改，以确保在执行类似操作`Survey.findById(1)`时加载所有问题和响应？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-27T10:01:30.530

请在您的调查类中定义它

```
static fetchMode = [questions: 'eager'] 
```

如果这不起作用，因为 fetchMode 'eager' 已弃用

你也可以试试

```
static mapping = {
 questions fetch :'join'
} 
```

按照这个了解更多关于获取策略的信息 [https://grails.github.io/grails-doc/3.0.x/ref/Database%20Mapping/fetch.html](https://grails.github.io/grails-doc/3.0.x/ref/Database%20Mapping/fetch.html)

# android - Android更新单行 - 奇怪的行为

> ID：15532755
> 
> 赞同：1
> 
> 时间：2013-03-20T19:18:10.400
> 
> 标签：android, android-listview

我已经实现了自定义适配器并为图像下载做了一些异步操作。我还实现[了 PullToRefresh - Nillson](https://github.com/johannilsson/android-pulltorefresh)。

这就是我为更新所做的

```
int startRow = mainListView.getFirstVisiblePosition();
int endRow = mainListView.getLastVisiblePosition();
Log.e("IMAGEURL", "position: " + curPosition + " " + "startRow: " + startRow + " " +       imageInfo.imageUrl);
if (curPosition >= startRow && curPosition <= endRow & imageInfo.holderPosition == curPosition) {
View rowView = mainListView.getChildAt(curPosition - startRow); 
```

奇怪的是，rowView 返回的是 PullToRefresh 顶部相对布局，而不是列表的行视图。这是调试信息，因为我的视图中没有 ant 进度条，它与 PullToRefresh 顶部布局完全匹配。

```
[0] ProgressBar  (id=830008126840)  
[1] ImageView  (id=830008129008)    
[2] TextView  (id=830008130288) 
[3] TextView  (id=830008131616) 
```

只有当我的 listVew 中没有滚动时才会发生这种情况（所有行都可见，没有隐藏行）。如果我将行数增加到可见数字之外，我会在 mainListView.getChildAt(curPosition - startRow) 上得到我的 rowView，但不是正确的，因为在位置 0 mainListView.getFirstVisiblePosition() 给了我 1，实际上应该为零。

更多细节：

PullToRefresh 库在用户的 listView 行的顶部添加一个额外的行，它发生在索引 0 处。

它还更改 getCount() 并给出（原始行 + 1 额外）

编辑：

我已经删除了 PullToRefresh 一切正常，getFirstVisiblePosition() 给出了正确的位置。图像映射到正确的行。

但我需要拉来刷新。仍在寻找答案。

# google-app-engine - 升级到 appengine 1.7.6 后出现 DisconnectionError

> ID：15532760
> 
> 赞同：1
> 
> 时间：2013-03-20T19:18:17.150
> 
> 标签：google-app-engine

我在 Python 2.7 中使用 gae，在升级到 gae 1.7.6 后，我的单元测试被破坏了。我正在使用nose 和nosegae 进行单元测试。有谁知道发生了什么？任何想法都会非常感激。我觉得这与 webob 1.2.3 升级为 GA 有关。

```
 self.app.post(task['url'], params, headers)
  File "/Library/Python/2.7/site-packages/WebTest-1.4.0-py2.7.egg/webtest/app.py", line 835, in post
    content_type=content_type)
  File "/Library/Python/2.7/site-packages/WebTest-1.4.0-py2.7.egg/webtest/app.py", line 807, in _gen_request
    expect_errors=expect_errors)
  File "/Library/Python/2.7/site-packages/WebTest-1.4.0-py2.7.egg/webtest/app.py", line 1118, in do_request
    self._check_status(status, res)
  File "/Library/Python/2.7/site-packages/WebTest-1.4.0-py2.7.egg/webtest/app.py", line 1154, in _check_status
    res)
AppError: Bad response: 500 Internal Server Error (not 200 OK or 3xx redirect for http://localhost/task/request_log)
<pre>Traceback (most recent call last):
  File &quot;/Users/***/Downloads/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py&quot;, line 1089, in __call__
    method(*args, **kwargs)
  File &quot;/Users/***/projects/game_server/game_service/events.py&quot;, line 184, in post
    inputs = pickle.loads(self.request.body)
  File &quot;/Users/***/Downloads/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webob-1.2.3/webob/request.py&quot;, line 677, in _body__get
    self.make_body_seekable() # we need this to have content_length
  File &quot;/Users/***/Downloads/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webob-1.2.3/webob/request.py&quot;, line 922, in make_body_seekable
    self.copy_body()
  File &quot;/Users/***/Downloads/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webob-1.2.3/webob/request.py&quot;, line 945, in copy_body
    self.body = self.body_file.read(self.content_length)
  File &quot;/Users/***/Downloads/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webob-1.2.3/webob/request.py&quot;, line 1528, in readinto
    + &quot;(%d more bytes were expected)&quot; % self.remaining
DisconnectionError: The client disconnected while sending the POST/PUT body (151 more bytes were expected)
</pre>
    self.app.post(task['url'], params, headers)
  File "/Library/Python/2.7/site-packages/WebTest-1.4.0-py2.7.egg/webtest/app.py", line 835, in post
    content_type=content_type)
  File "/Library/Python/2.7/site-packages/WebTest-1.4.0-py2.7.egg/webtest/app.py", line 807, in _gen_request
    expect_errors=expect_errors)
  File "/Library/Python/2.7/site-packages/WebTest-1.4.0-py2.7.egg/webtest/app.py", line 1118, in do_request
    self._check_status(status, res)
  File "/Library/Python/2.7/site-packages/WebTest-1.4.0-py2.7.egg/webtest/app.py", line 1154, in _check_status
    res)
AppError: Bad response: 500 Internal Server Error (not 200 OK or 3xx redirect for http://localhost/task/request_log)
<pre>Traceback (most recent call last):
  File &quot;/Users/***/Downloads/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.5.2/webapp2.py&quot;, line 1089, in __call__
    method(*args, **kwargs)
  File &quot;/Users/***/projects/game_server/game_service/events.py&quot;, line 184, in post
    inputs = pickle.loads(self.request.body)
  File &quot;/Users/***/Downloads/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webob-1.2.3/webob/request.py&quot;, line 677, in _body__get
    self.make_body_seekable() # we need this to have content_length
  File &quot;/Users/***/Downloads/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webob-1.2.3/webob/request.py&quot;, line 922, in make_body_seekable
    self.copy_body()
  File &quot;/Users/***/Downloads/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webob-1.2.3/webob/request.py&quot;, line 945, in copy_body
    self.body = self.body_file.read(self.content_length)
  File &quot;/Users/***/Downloads/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webob-1.2.3/webob/request.py&quot;, line 1528, in readinto
    + &quot;(%d more bytes were expected)&quot; % self.remaining
DisconnectionError: The client disconnected while sending the POST/PUT body (151 more bytes were expected)
</pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T23:11:09.260

**短版：** `headers`可能包含不正确的 Content-Length；像这样修复它（假设`params`是 a `str`）：

```
fixed_header = ('Content-Length', str(len(params)))
for i, header in enumerate(headers):
    if header[0] == 'Content-Length':
        headers[i] = fixed_header
        fixed_header = None
        break
if fixed_header:  # in case you're completely missing a Content-Length header
    headers.append(fixed_header) 
```

* * *

[GAE 1.7.6](http://googleappengine.blogspot.com/2013/03/app-engine-176-released.html)将默认 webob 从 v0.9 更改为 v1.2.3。用于检索请求参数的代码（例如 via `webob.Request.get()`）在这些版本之间发生了变化。

在 1.2.3 中，如果您查看`BaseRequest.params`它会创建一个`NestedMultiDict`using`BaseRequest.POST`来尝试读取请求的主体，使用该主体来`cgi.FieldStorage()`检查 Content-Length 标头。如果 Content-Length 不正确，你会得到`DisconnectionError`你所体验的。

在 0.9 中，`Request.params`是使用`Request.str_params`which 构建它的`NestedMultiDict`using `Request.str_POST`（不同于 1.2.3）。`Request.body_ file`这反过来又使用了使用 with 读取的预先存在的数据，`StringIO()` *而没有检查 Content-Length 标头*。

因此，您可以在 1.7.5 中使用不正确的 Content-Length 标头，但在 1.7.6 中则不然。

任务队列数据采用 Base64 编码。我怀疑`params`您在回溯的第一行中传递的内容已从其 Base64 格式解码，但您没有更新 Content-Length 标头`headers`以反映这一点。我怀疑您从任务队列存根中获得的任务中获取了标头，该`GetTasks()`存根的 Content-Length 设置为原始 Base64 编码数据的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:18:50.630

您发送的请求可能缺少正确的 Content-Length 标头。

没有它，服务器无法准确确定客户端是否已上传所有数据，或者他是否在传输过程中断开连接。

# wpf - 使 WPF DataGrid 在每个组标题下重复列标题

> ID：15532766
> 
> 赞同：3
> 
> 时间：2013-03-20T19:19:04.173
> 
> 标签：wpf, datagrid, grouping, datagridcolumnheader

我在 WPF 中使用分组（通过 CollectionViewSource 中的 PropertyGroupDescription）并在绑定的 DataGrid 中显示分组集合。

通常（如在[此 MSDN 示例](http://msdn.microsoft.com/en-us/library/ff407126.aspx)中）这样的 DataGrid 将显示列标题，然后是每个组标题（在 GroupStyle.Containerstyle 中定义），然后是给定组中的数据行。这是一个快速的视觉效果：

```
+================================================== ====+
 | 列标题1 | 列标题2 | 列标题3 |
 +-----------------+-----------------+------------- ----+
 | A组 |
 +-------------------------------------------------- ----+
 | A_Value_11 | A_Value_12 | A_Value_13 |
 +-------------------------------------------------- ----+
 | A_Value_21 | A_Value_22 | A_Value_23 |
 +-----------------+-----------------+------------- ----+
 | B组 |
 +-------------------------------------------------- ----+
 | B_Value_11 | B_Value_12 | B_Value_13 |
 +-------------------------------------------------- ----+
 | B_Value_21 | B_Value_22 | B_Value_23 |
 +================================================== ====+

```

有没有办法让 DataGrid 列标题在每个组标题之后出现/重复？

从视觉上看，这更像是我想要的：

```
+================================================== ====+
 | A组 |
 +-------------------------------------------------- ----+
 | 列标题1 | 列标题2 | 列标题3 |
 +-------------------------------------------------- ----+
 | A_Value_11 | A_Value_12 | A_Value_13 |
 +-------------------------------------------------- ----+
 | A_Value_21 | A_Value_22 | A_Value_23 |
 +-----------------+-----------------+------------- ----+
 | B组 |
 +-------------------------------------------------- ----+
 | 列标题1 | 列标题2 | 列标题3 |
 +-------------------------------------------------- ----+
 | B_Value_11 | B_Value_12 | B_Value_13 |
 +-------------------------------------------------- ----+
 | B_Value_21 | B_Value_22 | B_Value_23 |
 +================================================== ====+

```

有没有可能在没有太多麻烦的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-15T22:18:52.247

我会为每个包含列标题的组添加额外的第一行作为文本，并使用特殊的单元格模板显示它，例如像典型列标题一样的 TextBlock 样式。

# iphone - 通过 Apple iPhone Earpods 控制 AVAudioPlayer

> ID：15532768
> 
> 赞同：0
> 
> 时间：2013-03-20T19:19:08.987
> 
> 标签：iphone, ios, audio, avaudioplayer

我`AVAudioPlayer`用来在有声读物应用程序中播放音频文件。如何解决不支持的耳塞控制操作的问题？

例如，当我双击主页按钮和屏幕上显示的播放器控件（◄◄、►、►► 用于快退/播放/前进）时 - 此按钮在按下时没有响应。Earpods 操纵杆也不起作用（音量控制除外），我的意思是操纵杆中间按钮用于控制播放/暂停。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:40:41.787

从调用 -[UIApplication beginReceivingRemoteControlEvents] 开始。您需要的其余内容在 UIResponder 类中。

# accordion - 创建手风琴后，文本面板顶部有一个随机的蓝色边框。我使用了来自foundation.zurb 的代码。我该如何摆脱这个？

> ID：15532771
> 
> 赞同：0
> 
> 时间：2013-03-20T19:19:14.863
> 
> 标签：accordion, zurb-foundation

创建手风琴后，文本面板顶部有一个随机的蓝色边框。我使用了*foundation.zurb*中的代码。我该如何摆脱这个？

这是我使用的*foundation.zurb*中的代码。

```
<ul class="accordion">
  <li class="active">
    <div class="title">
      <h5>Accordion Panel 1</h5>
    </div>
    <div class="content">
      <p></p>
      <p></p>
    </div>
  </li>
  <li>
    <div class="title">
      <h5>Accordion Panel 2</h5>
    </div>
    <div class="content">
      <p></p>
      <p></p>
    </div>
  </li>
  <li>
    <div class="title">
      <h5>Accordion Panel 3</h5>
    </div>
    <div class="content">
      <p></p>
      <p></p>
    </div>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T01:48:23.647

从您的代码的外观来看，您使用的是 F3（版本 3）。如果是这样，那么这就是预期的行为，实际上这不是随机的。因此，如果您单击每个选项卡（每个手风琴），您将在每个手风琴顶部看到一个蓝色边框。您可以通过覆盖样式将其关闭：

```
ul.accordion > li.active {
    border-top: medium none !important;
} 
```

# c# - C# - 在运行时加载 xaml 文件

> ID：15532772
> 
> 赞同：2
> 
> 时间：2013-03-20T19:19:17.520
> 
> 标签：c#, wpf, xaml, runtime

我在 C# 中有一个 WPF 应用程序。

我有一个`MainWindow`类继承自一个`System.Windows.Window`类。

接下来，我的磁盘上有一个 xaml 文件，我想在运行时加载它：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="I want to load this xaml file">
</Window> 
```

如何在运行时加载该 xaml 文件？换句话说，我希望我的 MainWindow 类完全使用提到的 xaml 文件，所以我**不想**使用 MainWindow 的方法`AddChild`，因为它向窗口添加了一个子窗口，但我也想**替换**那个`Window`参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:11:39.703

WPF 应用程序在 VS 模板中默认有一个 StartupUri 参数：

```
<Application x:Class="WpfApplication2.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         StartupUri="MainWindow.xaml">
</Application> 
```

WPF 框架将使用此 uri使用 XamlReader**实例化一个窗口类并****显示它**。在您的情况下 - 从 App.xaml 中删除此 StartUpUri 并手动实例化该类，这样您就可以在从 xaml 加载其他窗口时隐藏它。

现在将此代码添加到 App.xaml.cs

```
 public partial class App : Application
 {
    Window mainWindow; // the instance of your main window

    protected override void OnStartup(StartupEventArgs e)
    {
        mainWindow = new MainWindow();
        mainWindow.Show();
    }
 } 
```

要用另一个窗口“替换”这个窗口：

*   使用 mainWindow.Hide() 隐藏此窗口；
*   使用 XamlReader 读取您的 personal.xaml，它为您提供加载的 Xaml 的 Window 实例。
*   将其分配给 mainWindow（如果需要）并调用 Show() 来显示它。

您是否希望应用程序“主窗口”的实例包含应用程序实例的成员，这当然是您的选择。

总之，整个技巧是：

*   隐藏主窗口
*   加载你的窗口实例
*   显示你的窗口实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:13:43.153

简短回答： - 不，您不能**从**. 在 -derived 对象中没有任何内容可以访问，该对象显示“嘿，用这个其他窗口替换*所有内容”*`Window``Window``Window`

 *更长的答案：-但是，您可以做一些愚蠢的事情：

```
private void ChangeXaml()
{
    var reader = new StringReader(xamlToReplaceStuffWith);
    var xmlReader = XmlReader.Create(reader);
    var newWindow = XamlReader.Load(xmlReader) as Window;    
    newWindow.Show();
    foreach(var prop in typeof(Window).GetProperties())
    {
        if(prop.CanWrite)
        {
            try 
            {
                // A bunch of these will fail. a bunch.
                Console.WriteLine("Setting prop:{0}", prop.Name);
                prop.SetValue(this, prop.GetValue(newWindow, null), null);
            } catch
            {
            }
        }
    }
    newWindow.Close();
    this.InvalidateVisual();
} 
```*

# hibernate - 如何测试为 Hibernate 实体编写的 Arquillian 测试类？

> ID：15532774
> 
> 赞同：-1
> 
> 时间：2013-03-20T19:19:24.033
> 
> 标签：hibernate, jakarta-ee, jboss-arquillian

我是 Arquillian 的新手，正在尝试配置以测试 Hibernate 实体。它的数据源在 tomcat 6 服务器上进行管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:24:31.543

我强烈建议您查看[Arquillian 网站上的指南](http://arquillian.org/guides/)。它们对您需要了解的所有机制进行了温和的介绍。

# asp.net - 如何从 Datagrid 中获取文本框数据

> ID：15532775
> 
> 赞同：0
> 
> 时间：2013-03-20T19:19:28.790
> 
> 标签：asp.net, vb.net, datagrid, textbox

我有一个文本框，用于在数据网格形式的购物车中更改数量。当我单击编辑链接按钮时，它允许更改文本框。我想要得到的是更改后的文本，然后替换我的数据表中的原始数量。我尝试了很多不同的东西，但无法让更改后的值保持不变。

这是最终更改数据表的代码：

```
 For Each objDR In myDataTable.Rows
        If objDR("ItemID") = intItemID Then
            objDR("Quantity") = Int32.Parse(myText) 'adding a specific int like 333 works
            Exit For
        End If
        Next 
```

如前所述，如果我输入一个特定的值，比如“333”，那么数量就会改变。所以问题必须在于当我点击更新时文本框值没有被保留，或者至少我是这么看的。

访问我尝试过的文本框文本的代码：

```
 Dim myText As String
    For Each dataGridItem As DataGridItem In dgCart.Items
        myText = CType(dataGridItem.FindControl("txtQuantity"), TextBox).Text
       'myText = DirectCast(dataGridItem.FindControl("txtQuantity"), TextBox).Text
    Next

    have also tried
    'Dim strQuantity As String = CType(dgCart.Items(0).FindControl("txtQuantity"), TextBox).Text 
```

和

```
 'Dim txtQuantity As TextBox = e.Item.FindControl("txtQuantity") 
```

我还尝试弄乱 txtbox 的视图状态，但这并没有什么区别。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:27:30.687

不确定您是否想要`editCommand`或更新事件。来自评论中的链接：

```
Dim tb As TextBox = CType(e.Item.Cells(3).Controls(0), TextBox) 
```

# ruby-on-rails - ruby on rails NameError：未定义的局部变量或方法“记录”

> ID：15532776
> 
> 赞同：1
> 
> 时间：2013-03-20T19:19:29.987
> 
> 标签：ruby-on-rails, ruby, record, has-and-belongs-to-many

在需要自定义 SQL 行为的情况下，我无法创建正确的 HABTM (has_and_belongs_to_many) 关系。这个想法是让文档可以附加到单个服务或多个服务，以及具有单个或多个文档的相同服务。我创建了一个模型“ResourceDocument”，它包含关系，而不是更传统的双 ID 设置，因为将有更多类型的事物以与服务相同的方式与文档相关。

这是 Document 模型的相关部分：

```
class Document < ActiveRecord::Base

  # ... etc ...

  has_and_belongs_to_many :services,
                          :foreign_key => 'document_id',
                          :association_foreign_key => 'resource_id',
                          :join_table => 'resource_documents',
                          :insert_sql => proc {"insert into resource_documents (document_id, resource_id, type) values (#{id}, #{record.id}, 'Service')"}

 # ... etc ...

end 
```

其次是服务规范（单元测试文件）的相关部分，它在进行插入时调用 HABTM 关系：

```
require 'spec_helper'
describe Service do
  before do
    @org = Org.create!(:name => 'org', :asset_code => 'TRNT')
    # ... etc ...
  end

  # ... etc ...

  it "should not allow a document belonging to different org" do
    new_org = Org.create!({:name => 'another test Org'})
    document = FactoryGirl.create(:document, :org => new_org, :services => [@service])
    @service.documents << [document]
    @service.should_not be_valid
  end
end 
```

当我运行时`rspec`，这个特定的单元测试失败了，特别是文档分配的行（FactoryGirl.create）会吠叫并给出标题中写的错误消息。我在这里做错了什么？我对 ruby​​ 相当陌生，更具体地说，我对必须`:insert_sql`在 HABTM 关系上执行的整个概念。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:33:11.117

作为参数`record`传递给`:insert_sql`，您需要执行以下操作：

```
:insert_sql => proc {|record| "insert into resource_documents (document_id, resource_id, type) values (#{id}, #{record.id}, 'Service')"} 
```

所以你的代码会是这样的：

```
class Document < ActiveRecord::Base

  # ... etc ...

  has_and_belongs_to_many :services,
                          :foreign_key => 'document_id',
                          :association_foreign_key => 'resource_id',
                          :join_table => 'resource_documents',
                          :insert_sql => proc {|record| "insert into resource_documents (document_id, resource_id, type) values (#{id}, #{record.id}, 'Service')"}

 # ... etc ...

end 
```

**编辑**

从 Rails 3.1 发行说明：

> 以前，has_and_belongs_to_many 关联上的 :insert_sql 和 :delete_sql 允许您调用 'record' 来获取插入或删除的记录。这现在作为参数传递给 proc。

# ember-data - 灰烬数据参考。11：下划线的属性名称 - 为什么？

> ID：15532779
> 
> 赞同：1
> 
> 时间：2013-03-20T19:19:43.580
> 
> 标签：ember-data

**问题 1**：为什么需要 ember-data 修订版 11 属性名称的下划线版本？

**问题 2**：如果属性名称相同（没有下划线），是否有问题？

**灰烬链接**：[http ://emberjs.com/guides/models/the-rest-adapter/](http://emberjs.com/guides/models/the-rest-adapter/)

**该模型**

```
App.Person = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string'),

    isPersonOfTheYear: DS.attr('boolean')
}); 
```

**JSON**

```
{
   "person": {
        "first_name": "Barack",
        "last_name": "Obama",
        "is_person_of_the_year": true
    }
} 
```

**映射**

```
App.Person = DS.Model.extend({
    lastName: DS.attr('string')
});
DS.RESTAdapter.map('App.Person', {
    lastName: { key: 'lastNameOfPerson' }
}); 
```

感谢所有响应者！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T21:33:09.130

**问题**1：在 JS 中使用驼峰式属性是一个惯例。对于 JSON 有效负载，请参阅此[JSON 命名约定](https://stackoverflow.com/questions/5543490/json-naming-convention)

不确定是否理解您的第二个问题。

**问题2：**

如果你想保持你的 JSON 格式，你可以在序列化器的代码中解释 2 个选项[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/serializer.js# L58](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/serializer.js#L58)

*   `map`使用适配器的API重新映射它们
*   您可以通过实现来确定序列化表单中使用的属性名称`keyForAttributeName`

在您的情况下，您可能希望拥有自己的从`RESTSerializer`. 见[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/serializers/rest_serializer.js#L4](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/serializers/rest_serializer.js#L4)

`keyForAttributeName`只会返回字符串。

# ruby - Ruby 异常类文档中的错误？

> ID：15532787
> 
> 赞同：2
> 
> 时间：2013-03-20T19:20:09.377
> 
> 标签：ruby

关于**类方法** `Exception.exception`，官方文档（[http://www.ruby-doc.org/core-2.0/Exception.html#method-c-exception](http://www.ruby-doc.org/core-2.0/Exception.html#method-c-exception)）说：

> 没有参数，或者如果参数与接收者相同，则返回接收者。否则，创建一个与接收者具有相同类的新异常对象，但消息等于 string.to_str。

这对于同名的实例方法是正确的，但对于类方法则不然。

`ExampleError.exception`不返回接收者：

```
class ExampleError < Exception; end

p ExampleError.class            # => Class
p ExampleError.exception.class  # => ExampleError 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T22:20:31.580

是的，文档很混乱。文档生成器可能会感到困惑，因为`Exception`它有一个同名的类方法和一个实例方法。

如果我们看一下[source](https://github.com/ruby/ruby/blob/ruby_2_0_0/error.c#L1697)，我们会看到：

```
void
Init_Exception(void)
{
    rb_eException   = rb_define_class("Exception", rb_cObject);
    rb_define_singleton_method(rb_eException, "exception", rb_class_new_instance, -1);
    rb_define_method(rb_eException, "exception", exc_exception, -1);
    /* ... */ 
```

这个添加了类方法：

```
rb_define_singleton_method(rb_eException, "exception", rb_class_new_instance, -1); 
```

这个添加了实例方法：

```
rb_define_method(rb_eException, "exception", exc_exception, -1); 
```

如果您追查，[`exc_exception`](https://github.com/ruby/ruby/blob/ruby_2_0_0/error.c#L574)您会看到文档的来源。如果你追查，[`rb_class_new_instance`](https://github.com/ruby/ruby/blob/ruby_2_0_0/object.c#L1741)你会发现这`rb_class_new_instance`只是标准`new`方法。这意味着它们做的事情完全相同：

```
Exception.new
Exception.exception 
```

# jquery - Uploadify 更改文件元数据 onselect

> ID：15532788
> 
> 赞同：0
> 
> 时间：2013-03-20T19:20:10.130
> 
> 标签：jquery, amazon-s3, uploadify

我正在尝试使用uploadify 将文件上传到亚马逊S3，我目前正在“成功”执行此操作。该文件在那里，但没有它的内容类型。我试图弄清楚如何使用 onselect 手动添加内容类型并且没有任何成功。

我不确定这是否是最好的方法，我正在根据这篇文章中第二个答案的建议进行尝试[-Uploadify uploading absolute file to s3 with correct Content-type](https://stackoverflow.com/questions/5228142/uploadify-uploading-arbitrary-file-to-s3-with-correct-content-type)（与我的问题相同）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:28:45.303

我一直无法弄清楚如何使用uploadify 执行此操作，因此我使用了AWS PHP 库（[http://docs.aws.amazon.com/AWSSdkDocsPHP/latest/DeveloperGuide/welcome.html](http://docs.aws.amazon.com/AWSSdkDocsPHP/latest/DeveloperGuide/welcome.html)）中的功能来操作文件上传后我需要它的样子。

# javascript - 在 Chrome 扩展程序中绕过 X-Frame-Options DENY？

> ID：15532791
> 
> 赞同：55
> 
> 时间：2013-03-20T19:20:14.417
> 
> 标签：javascript, iframe, google-chrome-extension, x-frame-options

我是[Intab](http://iansilber.com/intab/)的作者，这是一个 Chrome 扩展程序，可让您查看内联链接而不是新选项卡。幕后没有太多花哨的东西，它只是一个 iframe 加载用户单击的 URL。

除了将 X-Frame-Options 标头设置为 DENY 或 SAMEORIGIN 的网站外，它的效果很好。一些非常大的网站，如谷歌和 Facebook 都使用它，这使得体验有点糟糕。

有没有办法解决这个问题？由于我使用的是 Chrome 扩展程序，是否有任何我可以访问的浏览器级别的东西可能会有所帮助？寻找任何想法或帮助！

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-03-20T21:12:47.153

Chrome 提供[`webRequest`](https://developer.chrome.com/extensions/webRequest)API 来拦截和修改 HTTP 请求。您可以删除`X-Frame-Options`标题以允许在 iframe 中内联页面。

```
chrome.webRequest.onHeadersReceived.addListener(
    function(info) {
        var headers = info.responseHeaders;
        for (var i=headers.length-1; i>=0; --i) {
            var header = headers[i].name.toLowerCase();
            if (header == 'x-frame-options' || header == 'frame-options') {
                headers.splice(i, 1); // Remove header
            }
        }
        return {responseHeaders: headers};
    }, {
        urls: [
            '*://*/*', // Pattern to match all http(s) pages
            // '*://*.example.org/*', // Pattern to match one http(s) site
        ], 
        types: [ 'sub_frame' ]
    }, [
        'blocking',
        'responseHeaders',
        // Modern Chrome needs 'extraHeaders' to see and change this header,
        // so the following code evaluates to 'extraHeaders' only in modern Chrome.
        chrome.webRequest.OnHeadersReceivedOptions.EXTRA_HEADERS,
    ].filter(Boolean)
); 
```

在清单中，您需要指定`webRequest`和`webRequestBlocking`权限，以及您打算拦截的[URL 模式](https://developer.chrome.com/extensions/match_patterns)`"*://*/*"`，即`"*://www.example.org/*"`上面的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-09-14T12:28:56.680

## 使用 declarativeNetRequest 的 ManifestV3 示例

让我们使用新的[declarativeNetRequest](https://developer.chrome.com/docs/extensions/reference/declarativeNetRequest/) API 仅当 iframe 嵌入到我们扩展的页面中时才剥离标头。

**清单.json**：

```
 "permissions": ["declarativeNetRequest"],
  "host_permissions": ["*://*.example.com/"],
  "background": {"service_worker": "bg.js"}, 
```

该`declarativeNetRequest`权限在安装对话框中添加一个条目，您的扩展程序可以“阻止页面内容”，因此您可以使用`declarativeNetRequestWithHostAccess`：

**manifest.json**适用于 Chrome 96 及更高版本，没有安装警告：

```
 "minimum_chrome_version": "96",
  "permissions": ["declarativeNetRequestWithHostAccess"],
  "host_permissions": ["*://*.example.com/"],
  "background": {"service_worker": "bg.js"}, 
```

**bg.js：**

```
const iframeHosts = [
  'example.com',
];
chrome.runtime.onInstalled.addListener(() => {
  chrome.declarativeNetRequest.updateDynamicRules({
    removeRuleIds: iframeHosts.map((h, i) => i + 1),
    addRules: iframeHosts.map((h, i) => ({
      id: i + 1,
      condition: {
        domains: [chrome.runtime.id],
        urlFilter: `||${h}/`,
        resourceTypes: ['sub_frame'],
      },
      action: {
        type: 'modifyHeaders',
        responseHeaders: [
          {header: 'X-Frame-Options', operation: 'remove'},
          {header: 'Frame-Options', operation: 'remove'},
        ],
      },
    })),
  });
}); 
```

# c# - 在 Dispose 方法中取消 dispose

> ID：15532808
> 
> 赞同：1
> 
> 时间：2013-03-20T19:21:00.537
> 
> 标签：c#, dispose

有没有办法可以从 Dispose 方法中取消处理，换句话说，在调用 A.Dispose() 时不处理 A。

**更新** 我没有很好地解释，因为我想不出一种很好的表达方式。我所拥有的是一个在单独线程中运行的弹出窗口中显示进度条（选取框）的类。当创建进度弹窗时，会返回一个类似控制器的一次性对象，所以我们可以这样做：

```
using (var progress = Dialogs.ShowProgress("Please wait..."))
{
    // do lots of stuff here
    progress.UpdateStatus("Please wait some more...");
    // do more stuff
} 
```

当 using 块退出时，进度窗口将关闭并销毁。

现在我遇到这样的情况，在这个块中发生的事情也创建了一个进度窗口，而不是返回一个新对象并创建一个新窗口，我想返回第一个实例创建的对象，并且只有在第一个实例处理后才销毁它.

**更新** 好的，我所做的是在每次`Dialogs.ShowProgress()`调用时创建一个新的 IDisposable 对象，并将原始控制器对象附加到它上面。这些对象一旦完成就会被处理掉，而控制器只有在它是唯一需要处理的对象时才会被处理掉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:33:28.230

正如其他人所说，以`IDisposable`一种可能不会真正处置的方式实施是一个坏主意。这是实现您要执行的操作的另一种方法：

```
interface IMaybeDisposable
{
    bool TryDispose(); //return false if dispose was canceled
} 
```

你可以像这样使用它：

```
IMaybeDisposable maybe = //something
try
{
    // do something with maybe
}
finally
{
    if (maybe.TryDispose())
        // yay, it disposed!
    else
        // hm, it didn't dispose; do something else
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:40:19.670

所需的后置条件`Dispose`是客户端代码应该能够放弃对对象的所有引用，而不会导致任何必要的清理未完成。如果该条件在`Dispose`被调用之前适用，则该`Dispose`方法可能不会合法地执行任何操作。如果该条件不适用，`Dispose`则必须使其这样做，并且可能不会合法返回，除非或直到它这样做[注意，`Dispose`不需要实际执行清理，如果它启动了一系列事件，清理将在某些时候发生晚点]。接口合同中的任何内容都`Dispose`不允许它有时将对象置于需要进一步清理的状态，除非它有理由相信清理将通过其他方式进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T19:23:14.600

当然。只是不要做任何你会做的事情来处理对象。你不需要积极地做任何特别的事情。

不过要小心；当有人处理一个对象时，他们希望它实际处理它的非托管资源，而不是无视你并无论如何都持有它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T19:25:06.297

我会小心这样做。如果您在 using 块的末尾取消处置方法，那么您将丢失对该对象的引用，并且您将永远没有机会再次处置其内容，这意味着您可能会泄漏资源不小心。特别是，如果 dispose 方法释放了对我不希望出于任何原因立即收集垃圾的大对象的引用，我只会自己执行此操作。我不会这样做来跳过释放文件、数据库连接、网络套接字或其他任何不能被垃圾收集的句柄。

正如评论者指出的那样，我会尝试重构我的代码，以便我试图通过取消 dispose 来解决的任何问题都可以通过其他不那么危险的方式来解决。

如果你绝对确定你有一个边缘条件，你需要跳过处理某些东西，这是一种方法：

```
public void Dispose()
{
     if(condition)
     {
         // do disposing stuff
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T19:54:33.827

根据您的更新，我会做这样的事情：

```
 public  void  DoStuff()
{
     DoPrepWork();
     using( var  controller =  TheMethodYouWroteThatShouldReturnAController())
    {
         DoStuffOverControllerLifetime();
    }
} 
```

# r - 使用 bigmemory 将 40 GB csv 文件读入 R

> ID：15532810
> 
> 赞同：18
> 
> 时间：2013-03-20T19:21:09.627
> 
> 标签：r, memory-management, file-io

标题在这里很容易解释，但我将详细说明如下。我目前解决这个问题的一些技术是基于这个问题中提出的解决[方案](https://stackoverflow.com/questions/3094866/trimming-a-huge-3-5-gb-csv-file-to-read-into-r)。但是，我面临着一些挑战和限制，所以我想知道是否有人可能会尝试解决这个问题。我正在尝试使用[bigmemory](http://www.bigmemory.org/)包解决问题，但我遇到了困难。

**当前约束：**

*   使用具有 16 GB RAM 的 linux 服务器
*   40 GB CSV 大小
*   行数：67,194,126,114

**挑战**

*   需要能够从 big.matrix 或等效数据结构中随机抽取较小的数据集（5-10 百万行）。
*   需要能够在解析为 big.matrix 或等效数据结构时删除具有单个 NULL 实例的任何行。

到目前为止，结果并不好。显然，我在某些事情上失败了，或者我只是不太了解[bigmemory 文档](http://cran.r-project.org/web/packages/bigmemory/bigmemory.pdf)。所以，我想我会在这里问一下是否有人使用过

关于这条攻击线的任何提示、建议等？还是我应该换成别的东西？如果这个问题与之前的问题非常相似，我深表歉意，但我认为数据规模比之前的问题大 20 倍左右。谢谢 ！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-03T21:15:45.063

我不知道`bigmemory`，但为了满足您的挑战，您不需要读取文件。只需管道一些 bash/awk/sed/python/whatever 处理来执行您想要的步骤，即抛出`NULL`行并随机选择`N`行，然后读入。

这是一个使用 awk 的示例（假设您希望从具有 1M 行的文件中获取 100 条随机行）。

```
read.csv(pipe('awk -F, \'BEGIN{srand(); m = 100; length = 1000000;}
                       !/NULL/{if (rand() < m/(length - NR + 1)) {
                                 print; m--;
                                 if (m == 0) exit;
                              }}\' filename'
        )) -> df 
```

对我来说你的意思并不明显`NULL`，所以我使用了字面理解，但应该很容易修改它以满足你的需要。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-16T20:58:00.573

这是从大型文本文件中采样挑战的纯 R 解决方案；它还有一个额外的优点，就是随机抽取 n 个样本。尽管将行解析为字符向量并且这相对较慢，但它的效率并不算太低。

我们从一个函数签名开始，我们提供一个文件名、我们想要绘制的样本的大小、一个随机数生成器的种子（这样我们就可以重现我们的随机样本！），以及是否有标题的指示行，然后是一个“阅读器”函数，我们将使用该函数将样本解析为 R 看到的对象，包括`...`阅读器函数可能需要的其他参数

```
fsample <-
    function(fname, n, seed, header=FALSE, ..., reader=read.csv)
{ 
```

该函数为随机数生成器提供种子，打开一个连接，并读入（可选）标题行

```
 set.seed(seed)
    con <- file(fname, open="r")
    hdr <- if (header) {
        readLines(con, 1L)
    } else character() 
```

下一步是读入一大块 n 行，初始化所见总行数的计数器

```
 buf <- readLines(con, n)
    n_tot <- length(buf) 
```

继续读取 n 行的块，当没有进一步的输入时停止

```
 repeat {
        txt <- readLines(con, n)
        if ((n_txt <- length(txt)) == 0L)
            break 
```

对于每个块，绘制线条样本，`n_keep`线条数与当前块中总线条的比例成正比。这可确保在文件中对行进行均匀采样。如果没有要保留的行，则移至下一个块。

```
 n_tot <- n_tot + n_txt
        n_keep <- rbinom(1, n_txt, n_txt / n_tot)
        if (n_keep == 0L)
            next 
```

选择要保留的行，要替换的行，并更新缓冲区

```
 keep <- sample(n_txt, n_keep)
        drop <- sample(n, n_keep)
        buf[drop] <- txt[keep]
    } 
```

当数据输入完成后，我们使用 reader 解析结果并返回结果

```
 reader(textConnection(c(hdr, buf), header=header, ...)
} 
```

[通过使用和搜索 R-devel邮件列表中](https://stat.ethz.ch/pipermail/r-devel/2013-June/066889.html)`readBin`Simon Urbanek 所建议的换行符，该解决方案可以变得更高效，但更复杂一些。这是完整的解决方案

```
fsample <-
    function(fname, n, seed, header=FALSE, ..., reader = read.csv)
{
    set.seed(seed)
    con <- file(fname, open="r")
    hdr <- if (header) {
        readLines(con, 1L)
    } else character()

    buf <- readLines(con, n)
    n_tot <- length(buf)

    repeat {
        txt <- readLines(con, n)
        if ((n_txt <- length(txt)) == 0L)
            break

        n_tot <- n_tot + n_txt
        n_keep <- rbinom(1, n_txt, n_txt / n_tot)
        if (n_keep == 0L)
            next

        keep <- sample(n_txt, n_keep)
        drop <- sample(n, n_keep)
        buf[drop] <- txt[keep]
    }

    reader(textConnection(c(hdr, buf)), header=header, ...)
} 
```

# javascript - 设置活动选项卡而不更改页面视图

> ID：15532812
> 
> 赞同：0
> 
> 时间：2013-03-20T19:21:19.640
> 
> 标签：javascript, jquery

使用以下代码初始化选项卡，然后激活在 url 中选择的选项卡（例如 mypage#this_tab）。问题是在页面加载时它将视图转移到选项卡。随后单击选项卡不会改变视图。如何在页面加载时将视图固定到页面顶部？

```
<!-- *********** Config tabs -->
<script type="text/javascript">
$(document).ready(function() {
  // When page loads...
  $(".tab_content").hide(); //Hide all content
  if (location.hash != "") {
    $(location.hash).show(); //Show selected tab content
    $("ul.apptabs li:has(a[href="+location.hash+"])").addClass("active").show();
  } else {
    $("ul.apptabs li:first").addClass("active").show(); //Activate first tab
    $(".tab_content:first").show(); //Show first tab content
  }
  // On Click Event
  $("ul.apptabs li").click(function() {

$("ul.apptabs li").removeClass("active"); //Remove any "active" class
$(this).addClass("active"); //Add "active" class to selected tab
$(".tab_content").hide(); //Hide all tab content

var activeTab = $(this).find("a").attr("href"); //Find the href attribute value to identify the active tab + content
$(activeTab).fadeIn(); //Fade in the active ID content
return false;
  });
});
</script> 
```

# jquery - 在移动 webapp 中使用 html 实体

> ID：15532816
> 
> 赞同：1
> 
> 时间：2013-03-20T19:21:25.027
> 
> 标签：jquery, html, web-applications, mobile, entities

我使用 jQuery Mobile 1.2 创建了一个简单的 webapp。现在我想知道在页面正文中使用 html 实体是否更好，或者我应该用 utf-8 字符集中的所有字符编写文本？两种方式都正确，但哪一种是通常的？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:46:43.840

UTF-8 应该是您的选择。更好、更安全、更现代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:23:09.827

仅将实体用于与您的 HTML 标记混淆的符号。像`< > ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:29:03.260

我会使用 UTF-8 字符，相信我我使用过 jquery mobile 并且使用 UTF-8 的文本比使用 HTML 更好

# z3 - Model::ConstInterp 和 Model::Eval 有什么区别？

> ID：15532820
> 
> 赞同：1
> 
> 时间：2013-03-20T19:21:35.583
> 
> 标签：z3

我一直在使用 ConstInterp 来获取 expr 中常量文字的值。

```
model.ConstInterp(lit) 
```

但是我遇到了一个奇怪的错误

```
... <body of some loop>
let x = model.ConstInterp(lit)
if solver.Check() == Status.SATISFIABLE
then model.ConstInterp(lit) 
```

第二*次*调用 ConstInterp 产生错误

```
Unhandled Exception: Microsoft.Z3.Z3Exception: invalid argument
   at Microsoft.Z3.Native.Z3_model_get_const_interp(IntPtr a0,IntPtr a1,IntPtr a2)
   at Microsoft.Z3.Model.ConstInterp(FuncDecl f)
   at Microsoft.Z3.Model.ConstInterp(Expr a) 
```

但是，使用 Eval 而不是 ConstInterp 的相同代码很好。我是否错误地使用了 ConstInterp？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:59:27.453

第一次调用 model.ConstInterp() 使用在之前调用 Check() 期间构建的模型，因此它可能包含不同的常量解释，但这只是这里的次要问题。

并不要求所有的常数在每个模型中都有一个解释，例如，当一个常数的赋值不需要满足所有的约束时，它可以不被赋值（因此在模型中缺失）。例如，考虑以下程序：

```
Solver s = ctx.MkSolver();
s.Add(ctx.MkOr(
    ctx.MkEq(x, ctx.MkTrue()),
    ctx.MkEq(x, ctx.MkFalse()))); // Assert x = false OR x = true
s.Add(ctx.MkEq(y, ctx.MkTrue())); // Assert y = false
s.Check(); // Returns Status.SATISFIABLE 
```

这个程序没有约束`x`，但它确实有约束`y`。因此，模型将不包含值，`x`并将`s.Model.ConstInterp(x)`抛出一个断言。调用`s.Model.Eval(x)`不会抛出断言，但它也不会评估`x`；在这种情况下，我们得到`s.Model.Eval(x) == x`. 可以通过将第二个参数 of 设置`Eval()`为 true 来更改此行为，从而启用模型完成，即

```
s.Model.Eval(x, true) 
```

将返回`false`。

作为替代方案，该数组`s.Model.ConstDecls`包含所有在模型中具有解释的常量的函数声明。不在该集合中的常量没有解释，可以假定为“无关”，即可以为它们分配任何值。

# c++ - 将 SDL 示例移植到 OpenGL 和 C++

> ID：15532823
> 
> 赞同：0
> 
> 时间：2013-03-20T19:21:46.803
> 
> 标签：c++, opengl, port, sdl

[我在这里](http://lazyfoo.net/SDL_tutorials/lesson17/index.php)非常努力地完成本教程，但没有使用 SDL。IE。仅使用 OpenGL 绘制图形和普通 C++ 来检查碰撞。

以下是我的尝试，但仍然无法正常工作。我只是看不出我的逻辑与教程有什么不同？

帮助我了解哪里出了问题，或者帮助我将示例移植到 OpenGL/C++。

```
void move(){
    sprite.x += x_Vel;
    if(check_collision(sprite,platform1) || check_collision(sprite,platform2))
    { 
        sprite.x -= x_Vel;
    }

    sprite.y += y_Vel;
    if(check_collision(sprite,platform1) || check_collision(sprite,platform2))
    {
        sprite.y -= y_Vel;
    }
}

void drawSprite (RECT rect) { ... }
void mySKeyboard(int key, int x, int y) { ... }
void main (int argc, char** argv){ ... } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:03:49.837

您仅在按下某个键时才更新显示。

取而代之的是，创建一个调用 的“空闲”函数`glutPostRedisplay()`，并将其设置为`glutIdleFunc()`. 这将使渲染连续。

我还建议使用双缓冲而不是单缓冲。

请注意，您的`move()`函数会更新全局`sprite`，但调用它的渲染函数已`sprite`按值传递，因此将始终渲染先前的值。

如何应对碰撞取决于您。如果您只想让事情停止，您可以将速度设置为零。如果你想让事情反弹，你可以否定它。或者，如果您希望在精灵越过障碍物的情况下继续朝着同一方向前进，您可以不理会它。

因此，也许进行以下更改：

```
void display(void)
{
    glClear(GL_COLOR_BUFFER_BIT);
    drawSprite(sprite);
    drawPlatform(platform1);
    drawPlatform(platform2);
    glutSwapBuffers();
//  glFlush();
}

void mySKeyboard(int key, int x, int y)
{
    switch(key){
    case GLUT_KEY_LEFT:
        x_Vel -= speed;
//      glutPostRedisplay();
        break;
etc...

void update()
{
    glutPostRedisplay();
}

void main (int argc, char** argv)
{
...
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB);    // Set display mode.
    glutIdleFunc(update); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:44:34.920

在您的移动功能中，您还必须重置您的速度，以防止发生碰撞时的运动：

```
void move(){
    sprite.x += x_Vel;
    if(check_collision(sprite,platform1) || check_collision(sprite,platform2))
    { 
        sprite.x -= x_Vel;
        x_Vel *= 0.9;//Decrease x_Vel
    }

    sprite.y += y_Vel;
    if(check_collision(sprite,platform1) || check_collision(sprite,platform2))
    {
        sprite.y -= y_Vel;
        y_Vel *= 0.9;//Decrease y_Vel
    }
} 
```

您会注意到您不想将速度设置为 0，只需减小它们以避免浮动框。

# c++ - 任何更好的方法来实现这个

> ID：15532840
> 
> 赞同：-1
> 
> 时间：2013-03-20T19:22:55.803
> 
> 标签：c++, c, algorithm

当我遇到这个算法（进行更改）并将其实现如下时，我正在网上冲浪......但仍然有任何有效的方法可以做到这一点......我如何从我实现的程序中找到相同的复杂性...

1>算法如下

```
makechange(c[],n) //c will contain the coins which we can take as our soln choice and 'n' is the amount we want change for
soln<-NULL//set that will hold solution
sum=0
while(sum!=n)
{
    x<-largest item in c such that sum+x<=n
    if(there is no such item)
    return not found
    soln <- soln U {a coin of value x}
    sum=sum+x
    return soln
}

2>here is what i have tried

#include<stdio.h>
#include<conio.h>

void main() {
    int c[]= {100,50,20,10,5,1},soln[6];
    int num,i,j,sum=0,x,k,flag=0;
    clrscr();
    printf("\nEnter amount to make change:");
    scanf("%d",&num);

    for(i=0;i<6;i++) {
        soln[i]=NULL;
    }

    j=0;
    while(sum!=num) {
        for(i=0;i<6;i++) {
            if(sum+c[i]<=num) {
                x=c[i];
                break;
            }
        }

        sum=sum+x;
        for(k=0;k<6;k++) {
            if(soln[k]==x) {
                flag=1;
            }
        }

        if(flag!=1)
        soln[j]=x;
        j++;
    }

    printf("\nsoln contains coins below:");
    j=0;

    while(soln[j]!=NULL) {
        printf("%d ",soln[j]);
        j++;
    }
    getch();
} 
```

任何帮助将不胜感激...谢谢...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T20:27:53.853

为了好玩，这里有一个`constexpr`版本！

```
template <int... denomination>
    static constexpr auto change(int amount) -> decltype(make_tuple(denomination...))
    {
        typedef decltype(make_tuple(denomination...)) R;
        return R { [&]() { auto fill=amount/denomination; amount-=denomination*fill; return fill;}()... };
    } 
```

演示：**[在 Coliru 上直播](http://coliru.stacked-crooked.com/a/ac1dd2aff77eedde)**

```
#include <boost/tuple/tuple_io.hpp>
#include <iostream>

using boost::tuple;
using boost::make_tuple;

template <int... denomination>
    static constexpr auto change(int amount) -> decltype(make_tuple(denomination...))
    {
        typedef decltype(make_tuple(denomination...)) R;
        return R { [&]() { auto fill=amount/denomination; amount-=denomination*fill; return fill;}()... };
    }

int main() {
    auto coins = change<100,50,20,10,5,1>(367);
    std::cout << coins;
} 
```

输出：

```
(3 1 0 1 1 2) 
```

没有提升的版本：http: [//liveworkspace.org/code/3uU2AS$0](http://liveworkspace.org/code/3uU2AS$0)

> 对于绝对真棒，这是由clang用-O2编译 的[非boost版本的反汇编。](http://liveworkspace.org/code/3uU2AS%240)**[http://paste.ubuntu.com/5632315/](http://paste.ubuntu.com/5632315/)**
> 
> 注意到模式 3 1 0 1 1 2 了吗？
> 
> ```
> 400826:   be 03 00 00 00          mov    $0x3,%esi
> ...
> 400847:   be 01 00 00 00          mov    $0x1,%esi
> ...
> 400868:   31 f6                   xor    %esi,%esi
> ...
> 400886:   be 01 00 00 00          mov    $0x1,%esi
> ...
> 4008a7:   be 01 00 00 00          mov    $0x1,%esi
> ...
> 4008c8:   be 02 00 00 00          mov    $0x2,%esi 
> ```
> 
> 它完全是编译时评估的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:27:50.193

另一种方法是通过硬币选项，盯着最大的，尽可能多地选择而不是负数，然后选择下一个最大的，依此类推：

```
#define RESULT_EXACT   1
#define RESULT_INEXACT 0

int i;
int result_exact = RESULT_EXACT;

for (i=0; i<6; i++) {
    soln[i] = n/c[i]; // How many of this value do we need
    n -= soln[i]*c[i]; // We've now given that amount away
}

if (n!=0) result_exact = RESULT_INEXACT; 
```

显然（我希望）这需要`c`从最大到最小存储硬币值，并且需要检查`result_exact`以了解更改是否完全正确。

# android - 手机中的数据/数据文件位置在哪里

> ID：15532843
> 
> 赞同：0
> 
> 时间：2013-03-20T19:23:00.547
> 
> 标签：android

我将我的文件存储在此位置以隐藏图片 File file = new File("/data/data/com.vault.vaultpckg/Files"); 工作正常，但是在 somw pics 隐藏内存不足警报之后，请致电我的电话设备中的此文件路径在哪里？我想查看数据/数据/应用程序文件夹的文件位置我该怎么办？

```
 protected void onCreate(Bundle savedInstanceState) 
   {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.file);
 list_Files = (ListView) findViewById(R.id.list);
 list=(ListView) findViewById(R.id.file_list);

File file = new File("/data/data/com.vault.vaultpckg/Files");
file.mkdir(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:53:34.610

你不应该假设任何关于数据/数据的事情。使用 Activity 上的 getDir 函数来获取您的本地目录。此外，您无法在任何其他应用程序中打开文件，因此使用完整路径名毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:03:55.080

要在真实设备上查看 /data/data 文件夹的内容，您需要有一个 root 设备并使用具有 root 权限的文件资源管理器。

使用模拟器时，您应该能够使用 Eclipse 中的 DDMS 透视图看到它。

# asp.net-mvc-3 - 数据库更改通知问题

> ID：15532852
> 
> 赞同：1
> 
> 时间：2013-03-20T19:23:42.837
> 
> 标签：asp.net-mvc-3, signalr

我是 ASP.NET MVC 和 Signalr 的新手。我正在按照[本](http://techbrij.com/database-change-notifications-asp-net-signalr-sqldependency)教程通过信号器学习与 ASP>NET 的 SQL 交互。

我尝试了以下步骤

1.  创建了一个新项目“ASP.NET MVC3”
2.  带有剃须刀视图引擎的选定 Internet 应用程序。
3.  通过 nuget 安装 Microsoft ASP.NET 信号器
4.  创建了相同的数据库和相同的表。
5.  通过添加连接字符串修改了我的 webconfig。
6.  应用 Global.asax 中的更改以启用和停止侦听器。
7.  添加了一个类“JobInfo” - 类似于链接中的第 5 步。
8.  在教程的第 7 步中，当我单击 project > add new item 时，我没有找到 Signalr hub 类。所以我添加了一个同名的普通类

> 代码

```
 namespace MvcApplication1
{
    public class JobHub
    {
        public static void Show()
        {
            IHubContext context = GlobalHost.ConnectionManager.GetHubContext<JobHub>();
            context.Clients.All.displayStatus();
        }
    }
} 
```

现在，当我构建我的解决方案时，我收到了这个错误

```
 The type 'MvcApplication1.JobHub' cannot be used as type parameter 'T' in the generic type or method 'Microsoft.AspNet.SignalR.Infrastructure.IConnectionManager.GetHubContext<T>()'. 
There is no implicit reference conversion from 'MvcApplication1.JobHub' to 'Microsoft.AspNet.SignalR.Hubs.IHub'. 
```

另外，我不确定如何实现第 8 步，因为当我单击控制器添加“valueController”时，我无法从“ApiController”继承它。

下面是我的应用程序的屏幕截图。

我怎样才能解决这个问题？ ![在此处输入图像描述](../Images/166b4f32742e763d632dcff1c372bd72.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:30:47.087

我认为这是您缺少的部分。看来`JobHub`必须继承自`Hub`. 包括这个引用，然后尝试继承自`Hub`.

```
using Microsoft.AspNet.SignalR.Hubs;

public class JobHub : Hub
{
    public static void Show()
    {
        IHubContext context = GlobalHost.ConnectionManager.GetHubContext<JobHub>();
        context.Clients.All.displayStatus();
    }
} 
```

## 第 8 步

**@Zerotoinfinite - asp.net mvc 4**中包含的似乎`using System.Web.Http;`是必需的。因此，您可能想要启动一个 mvc 4 项目，*或者*，只需使用一个不会有任何不同的常规控制器。`ApiController`

 ***```
public class ValuesController : Controller
{

   JobInfoRepository objRepo = new JobInfoRepository();

   // GET api/values
   public JsonResult Get()
   {
       return Json(objRepo.GetData());
   }
} 
```***

# python - 类成员通过其他类持续存在

> ID：15532856
> 
> 赞同：0
> 
> 时间：2013-03-20T19:24:00.290
> 
> 标签：python, class

我在 Python 2.7.2 中遇到了一些奇怪的行为。

如果我有类字典，则这些类中的任何列表在包含字典中的所有类实例中都保持相同的值。

这将解释我的意思：

```
>>> class FooBar():
    somelist = []

>>> someFooBars = {}
>>> someFooBars["key1"] = FooBar()
>>> someFooBars["key2"] = FooBar()
>>> someFooBars["key3"] = FooBar()
>>> someFooBars["key1"].somelist.append("Hello")
>>> someFooBars["key1"].somelist
['Hello']
>>> someFooBars["key2"].somelist
['Hello']
>>> someFooBars["key1"].somelist.append("World!")
>>> someFooBars["key3"].somelist
['Hello', 'World!'] 
```

正如你所看到的，我已经用 的三个实例填充了字典`FooBar`，用字符串作为键，但是一旦我将对象添加到`somelist`，这些对象也在其他`FooBar`s 中。

这不是我期望发生的（我希望它们是分开的），但显然有一个原因 - 请解释这个原因是什么，为什么会发生这种情况，以及我将如何解决它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:26:27.330

您现在拥有的是某种“静态”成员。要实现“实例”成员行为，请添加`__init__`方法（充当“构造函数”）：

```
class FooBar():
    def __init__(self):
        self.somelist = [] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:28:06.077

somelist 是一个类变量，因此对于每个实例都是相同的。

# php - 如何在wordpress的主页上显示多个类别

> ID：15532857
> 
> 赞同：0
> 
> 时间：2013-03-20T19:24:03.877
> 
> 标签：php, wordpress

[http://www.getwetsailing.com/](http://www.getwetsailing.com/) (wordpress)

试图在主页上显示 2 个单独的类别，现在显示“Garmin Quatix GPS 手表”和“West Marine Sailing Gloves 3/4 Finger”（两者都来自同一类别）。

我假设下面的代码是我需要编辑的地方（来自 index.php），但也许我还差得很远。

```
<div id="content" class="columns col10">
<?php
    $cat_headline=get_option('colabs_cat_headline');
    if($cat_headline=='')$cat_headline=1;
    $cat_featured=get_option('colabs_cat_featured');
    if($cat_featured=='')$cat_featured=1;
    query_posts('showposts=2&cat='.$cat_headline);
    $i=1;
    if ( have_posts() ) :
    ?>
<div class="headline columns col10">
    <?php while ( have_posts() ) : the_post(); ?>
    <div class="featured column <?php if ($i==1){?>col6<?php }else{ ?>col4<?php }?>">
        <?php 
        if ($i==1){$image_headline_width=474;$image_headline_height=318;}else{$image_headline_width=306;$image_headline_height=215;}
        colabs_image('width='.$image_headline_width.'&height='.$image_headline_height.'&play=true'); 
        $i++;
        ?>
        <h3 class="headline-title"><a href="<?php the_permalink();?>"><?php the_title();?></a></h3>
        <p><?php excerpt();?></p>
        <a href="<?php the_permalink();?>" class="more-link"><?php _e('Continue Reading','colabsthemes');?> &rarr;</a>
    </div><!-- .featured1 -->
    <?php endwhile; ?>

</div><!-- .headline -->
<?php endif; ?>

<?php colabs_latest_post(5,'col10');?><!-- .recent-entry -->

</div><!-- #content --> 
```

任何帮助都是很大的。

谢谢，肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:24:41.177

您在查询中仅传递一个类别。因此，您的查询只能包含一个类别的帖子。可能您需要来自**$cat_headline**和**$cat_featured**类别的帖子。

所以，你应该`query_posts('showposts=2&cat='.$cat_headline);`修改`query_posts('posts_per_page' => 2, 'category__and' => array($cat_headline, $cat_featured));`

您的代码将如下所示：

```
$cat_headline=get_option('colabs_cat_headline');
if($cat_headline=='')$cat_headline=1;

$cat_featured=get_option('colabs_cat_featured');
if($cat_featured=='')$cat_featured=1;

query_posts( array('posts_per_page' => 2, 'category__and' => array($cat_headline, $cat_featured)) ); 
```

查看[wordpress codex](http://codex.wordpress.org/Function_Reference/query_posts)上的完整文档，它可以为您提供更多帮助。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T22:40:26.453

快速回答，但是...试试这个：修改`query_posts()`调用以从您的两个类别中收集帖子，假设您知道或可以找到他们的 ID。 `query_posts()`是实际进行数据库检索的内容。

```
query_posts( array( 'category__and' => array(ID_OF_FIRST_CATEGORY, ID_OF_SECOND_CATEGORY) ); 
```

# excel - 标记 B 列中不在 A 中的项目（在 Excel 中）

> ID：15532859
> 
> 赞同：1
> 
> 时间：2013-03-20T19:24:10.977
> 
> 标签：excel

假设以下 Excel 工作表：

```
 A    B
1 foo  foo
2 bar  foobar
3 baz  bar
4      baz
5      bam 
```

实际上，列`A`包含`B`数千行（列`B`比`A`这里的情况长）。我需要`B`对照`A`. 出现在列中`B`但不在 中的项目`A`，需要标记（红色，加粗，加星号，这不重要）。

在此示例中，应标记的项目是：`foobar`和`bam`出现在`B`但不出现在 中`A`。我的问题是：我可以用什么公式来完成这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:42:25.880

您可以在复制下来的 C1 中像这样使用 COUNTIF

`=COUNTIF(A:A,B1)>0`

如果 B1 值在 A 列中，则为 TRUE，否则为 FALSE

或者，您可以在条件格式中使用相同的公式为相关行着色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:35:00.653

这是使用条件格式实现此目的的公式示例

`=ISERROR(VLOOKUP(B1,$A$1:$A$3,1,FALSE))`

将源范围（针对您的情况）而不是`A1:A3`上面。
确保条件格式适用于（B 列的）数据范围，例如 B1:B2000。

# angularjs - angular-ui IE8 手风琴

> ID：15532864
> 
> 赞同：6
> 
> 时间：2013-03-20T19:24:22.923
> 
> 标签：angularjs, angularjs-directive, angular-ui, angular-ui-bootstrap

在 IE8 中使用 Angular-UI 引导手风琴时，选项卡不会展开。这是我使用 IE 8 的 F12 收到的错误

```
 Error: Unexpected call to method or property access.undefined 
 Error: No controller: accordion<div class="accordion-group ng-scope" ng-repeat="c in categories" heading="{{c.Name}}"> 
 Error: No controller: accordion<div class="accordion-group ng-scope" ng-repeat="c in categories" heading="{{c.Name}}"> 
 Error: No controller: accordion<div class="accordion-group ng-scope" ng-repeat="c in categories" heading="{{c.Name}}"> 
 Error: No controller: accordion<div class="accordion-group ng-scope" ng-repeat="c in categories" heading="{{c.Name}}"> 
 Error: No controller: accordion<div class="accordion-group ng-scope" ng-repeat="c in categories" heading="{{c.Name}}"> 
 Error: No controller: accordion<div class="accordion-group ng-scope" ng-repeat="c in categories" heading="{{c.Name}}"> 
 Error: No controller: accordion<div class="accordion-group ng-scope" ng-repeat="c in categories" heading="{{c.Name}}"> 
 Error: No controller: accordion<div class="accordion-group ng-scope" ng-repeat="c in categories" heading="{{c.Name}}"> 
```

有没有人遇到过类似的问题并能够解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T19:54:00.727

看起来主要问题是 IE 不喜欢`<accordion>`使用`<div accordion></div>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-13T13:53:20.123

IE8 无法识别自定义元素。如果您需要将该`accordion`指令用作元素而不是属性，则必须定义该元素，以便 IE 不会抱怨。这个简单的脚本可以解决问题。

```
<script type="text/javascript">
    document.createElement('accordion');
    document.createElement('accordion-group');
    document.createElement('accordion-heading');
</script> 
```

否则，只需以其属性形式使用该指令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-14T20:56:21.747

我刚刚遇到的另一个问题是您不能将 ng-controller 放在与 ie8 相同的元素上`<div accordion>`。我花了很多时间来弄清楚这一点。

我不得不更换

```
<div accordion ng-controller="MyCtrl">
    ...
</div> 
```

和

```
<div ng-controller="MyCtrl">
    <div accordion>
        ...
    </div>
</div> 
```

# java - 使用两个 for 循环计算字符串中的字母

> ID：15532866
> 
> 赞同：0
> 
> 时间：2013-03-20T19:24:35.103
> 
> 标签：java, string, loops

我必须读取字符串`"hello world"`并仅使用 for 循环输出每个字母的频率。讲师暗示我需要使用两个循环，并给了我们以下代码开始：

```
int ch, count;
for (ch ='a'; ch <='z'; ch++) {
  //count the number of occurrences in a line
  //Print the count>0
} 
```

**编辑：**我想我会解决这个问题并发布我在一年前找到的解决方案，因为这个问题已经获得了相当多的点击量。

```
int count;
int value;
for (int i=65; i<91; i++) {
    count=0;
    for (int j=0; j<S.length; j++) {
        value=(int)S[j];
        if (value == i) {
             count++;
        }
    }
    if (count>0) 
       System.out.println((char)i+" -- "+count);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T19:27:38.190

在第二个 for 循环中，只需遍历字符串的每个字符并将其与第一个 for 循环的当前字符进行比较。

（不是我会做的解决方案，只是按照你的教练提示）

另一种方法是将值存储在地图中，其中字符作为键，出现次数作为值。

```
HashMap<Character,Integer> map = new HashMap<>();

for (int ii=0; ii<string.length; ii++) {
   char c = string.charAt(ii);
   if (map.containsKey(c)) {
      map.put(c, get(c)++);
   } else {
      map.put(c, 1);
   }
} 
```

**更新：**

```
//iterating on the map to output values:
for (char key : map.keySet()) {
   System.out.println(key+": "+map.get(key));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:37:49.037

我会使用一个简单的数组。只需将每个字母转换为索引并在该索引处递增数组。

```
int letters[26];
int index = ch - 'a';
letters[index]++; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T19:41:09.360

以 sdasdadas 的评论和 Jean 的各自回答为基础：

外部 for 循环将遍历字母表中的每个字符，保持一个计数（每次执行外部循环时都需要重置。）内部循环循环通过“hello world”字符串，如果字符充当找到外部 for 循环的当前参数。

**更新** 我不能在安德烈的回答下面发表评论，但我可以提供一些伪代码来解决我认为你在关于计数器的评论中的意思。

```
int i;
for (ch characterOuter : alphabet){ //for each character in the alphabet
    i = 0 //i starts at zero, and returns to zero for each iteration  <-----THIS
    for (ch characterInner : "hello world"){
        if (characterOuter == characterInner){
            i++; //increase i by 1 <-----AND THIS
        }//end if
    }//end  innerfor
    if (i > 0) {
        print(characterOuter + " -- " + i);
    } //end if;   <---------------- this if statement was missing
}//end outer for 
```

另外，请参阅[这个问题](https://stackoverflow.com/questions/477550/is-there-a-way-to-access-an-iteration-counter-in-javas-for-each-loop "这个问题")。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T03:14:50.697

```
int count;
int value;
   for (int i=65; i<91; i++) {
      count=0;
      for (int j=0; j<S.length; j++) {
      value=(int)S[j];
      if (value == i) {
         count++;
      }
   }
   if (count>0) 
      System.out.println((char)i+" -- "+count);
} 
```

# sql - 如何更新数据库中所有表的特定列值

> ID：15532868
> 
> 赞同：2
> 
> 时间：2013-03-20T19:24:41.977
> 
> 标签：sql, sql-server, sql-server-2008

```
create procedure change_ardivisionno
@CustomerNo nvarchar(7),@table_name varchar(40)

AS
Begin
SET NOCOUNT ON
Update @table_name
SET ARDivisionNo = '21'
where @CustomerNo = (select customerno from mas_abc.dbo.customerlist)
and @table_name = (select tablename from table_list)
END 
```

我正在尝试更新`ARDisivionNo`（`ARDivisionno`是列名）在数据库的所有表中设置为 21 的值，其中`customerno`存储在客户列表表中的客户列表。

我正在尝试创建此过程，但我不断收到错误消息：

> *必须声明表变量“@table_name”。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:34:41.180

像这样的东西，除了我不明白您的当前`WHERE`子句应该如何将更新限制为目标表中的一组行。现在它似乎会更新整个表格；我怀疑缺少连接条件。

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += N'UPDATE t
  SET ARDivisionNo = ''21''
  FROM dbo.' + QUOTENAME(tablename) + ' AS t
  INNER JOIN mas_abc.dbo.customerlist AS c
  ON c.customerno = @CustomerNo;';

PRINT @sql;
--EXEC sp_executesql @sql, N'@Cust NVARCHAR(7)', @CustomerNo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:32:07.783

您需要动态创建要执行的 SQL，因为 tableName 不能是 String 变量。

见[`sp_executesql`](http://msdn.microsoft.com/en-us/library/ms188001.aspx)。

```
declare @DBName varchar(40); 
set @DBName = 'AdventureWorks2012';
EXECUTE sp_executesql 
          N'SELECT * FROM '+@DBName+'.HumanResources.Employee 
          WHERE BusinessEntityID = @level',
          N'@level tinyint',
          @level = 109; 
```

# sql - IF 在 SELECT From XML 中

> ID：15532870
> 
> 赞同：1
> 
> 时间：2013-03-20T19:24:47.700
> 
> 标签：sql, xml, sql-server-2008

**我正在尝试在SQL Server 2008**中做一些不同的 SELECT 。我需要将 XML 文件导入到表中，但首先我必须进行一些检查。

当我`SELECT`在 XML 上执行时，我需要检查 XML 行是否已存在于表中，使用列`ViagemID`和`Data`表中的列作为 PK。如果存在，我需要使用从 XML 读取的信息更新该行，如果不存在，我只需要在表中插入。

XML 行示例：

```
<viagem id="0000EPN" date="2013-01-01T00:00:00" type="EXTRA" 
        status="NORMAL" modalid="IPANEM" fleetid="B200" 
        departuretime="2013-04-01T00:00:00" arrivaltime="2013-01-01T00:20:00" 
        maxpasg="2000" locationid="XX" codredlinha="0007" /> 
```

代码：

```
SELECT @ViagemID = r.value('(@id)[1]', 'VARCHAR(30)'), @Data =   CAST(CONVERT(datetime,r.value('(@date)[1]', 'datetime')) as float),    
        @Extra = CASE (r.value('(@type)[1]', 'VARCHAR(15)')) WHEN 'EXTRA' THEN 1 ELSE 0 END, @FleetID = r.value('(@fleetid)[1]', 'VARCHAR(15)'),
        @Partida = r.value('(@departuretime)[1]', 'datetime'),  @Chegada = r.value('(@arrivaltime)[1]', 'datetime'), @Capacidade = r.value('(@maxpasg)[1]', 'int'),
        @LocationID = r.value('(@locationid)[1]', 'VARCHAR(10)'), @CodLinha = r.value('(@codredlinha)[1]', 'int')       

    IF EXISTS (SELECT * FROM dbo.ImportacaoXML WHERE ViagemID = @ViagemID AND Data = @Data)
    BEGIN
        UPDATE dbo.ImportacaoXML SET ViagemID = @ViagemID, Data = @Data, Extra = @Extra, FleetID = @FleetID, Partida = @Partida, 
            Chegada = @Chegada, Capacidade = @Capacidade, LocationID = @LocationID, CodLinha = @CodLinha
            WHERE ViagemID = @ViagemID AND Data = @Data
    END
    ELSE
    BEGIN
        INSERT INTO dbo.ImportacaoXML VALUES(@ViagemID, @Data, @Extra, @FleetID, @Partida, @Chegada, @Capacidade, @LocationID, @CodLinha)       
    END

FROM (SELECT CAST(x AS XML) FROM OPENROWSET (BULK '\\10.16.68.253\XXXXx\Xxxx.xml', SINGLE_BLOB) AS T(x)) AS T(x)    
CROSS APPLY x.nodes('/root/viagem') AS X(r); 
```

但是我在最后一行中不断出现错误`FROM`（AS 附近的语法不正确）。

我可以`SELECT`在 if 语句中使用 a，但我需要读取所有 XML，这将停止执行。之后，我需要添加更多的 IF 语句。

注 1：我是 SQL 新手，如果有任何废话，我很抱歉。

注2：我也很关心性能，因为我不确定这段代码是否是最佳程序实践，而且我的表会增长很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:14:55.460

由于您使用的是 SQL Server 2008，因此我可能会使用以下`MERGE`语句：

*   将您的 XML 行解析为子查询中的列
*   `MERGE`使用以下规则进入目标表：
    *   如果目标表中不存在匹配项 - 则将新行插入目标
    *   当一行已经存在时 - 只需更新它

为此，我会在这里使用这样的东西：

```
MERGE INTO dbo.ImportacaoXML AS Tgt    
USING (SELECT 
          ViagemID = r.value('(@id)[1]', 'VARCHAR(30)'), 
          Data = CAST(r.value('(@date)[1]', 'datetime') as float),    
          Extra = CASE r.value('(@type)[1]', 'VARCHAR(15)') WHEN 'EXTRA' THEN 1 ELSE 0 END, 
          FleetID = r.value('(@fleetid)[1]', 'VARCHAR(15)'),
          Partida = r.value('(@departuretime)[1]', 'datetime'),  
          Chegada = r.value('(@arrivaltime)[1]', 'datetime'), 
          Capacidade = r.value('(@maxpasg)[1]', 'int'),
          LocationID = r.value('(@locationid)[1]', 'VARCHAR(10)'), 
          CodLinha = r.value('(@codredlinha)[1]', 'int') 
        FROM 
           (SELECT CAST(x AS XML) FROM OPENROWSET (BULK 'D:\Temp\Test.xml', SINGLE_BLOB) AS T(X)) AS T(x)    
        CROSS APPLY 
            x.nodes('/root/viagem') AS X(r)) AS Source 
    ON Tgt.ViagemID = Source.ViagemID AND Tgt.Data = Source.Data

WHEN MATCHED THEN
     UPDATE 
        SET Tgt.ViagemID = Source.ViagemID, Tgt.Data = Source.Data, 
            Tgt.Extra = Source.Extra, Tgt.FleetID = Source.FleetID, 
            Tgt.Partida = Source.Partida, Tgt.Chegada = Source.Chegada, 
            Tgt.Capacidade = Source.Capacidade, Tgt.LocationID = Source.LocationID, 
            Tgt.CodLinha = Source.CodLinha

WHEN NOT MATCHED THEN     
    INSERT (ViagemID, Data, Extra, FleetID, Partida, Chegada, Capacidade, LocationID, CodLinha)
    VALUES (Source.ViagemID, Source.Data, Source.Extra, Source.FleetID, Source.Partida, Source.Chegada, Source.Capacidade, Source.LocationID, Source.CodLinha)
; 
```

# excel - 从 Outlook 地址列表 vba 获取经理信息

> ID：15532871
> 
> 赞同：1
> 
> 时间：2013-03-20T19:24:47.390
> 
> 标签：excel, vba, outlook

我正在使用以下代码打开“全局地址列表”窗口以选择列表中的联系人。

对于选择的联系人，我也想获取经理姓名。但是，我似乎无法让它工作。

有什么建议吗？

```
Private Sub accountManagerName_MouseDown(ByVal Button As Integer, ByVal Shift As Integer, ByVal X As Single, ByVal Y As Single)
    Dim CDOSession, cdoAddressBook, olkRecipients, objAE

    On Error Resume Next
    Set CDOSession = CreateObject("MAPI.Session")
'   Change the name of your Outlook profile as needed.
    CDOSession.Logon "", "", False, False
    Set olkRecipients = CDOSession.AddressBook(, "Global Address List", 0, False)
    For Each objAE In olkRecipients
        accountManagerName.Text = objAE.name
        'ccManager.Caption = objAE.Manager.name
    Next
    Set olkRecipients = Nothing
    CDOSession.Logoff
    Set CDOSession = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:37:57.610

如果是 Outlook 对象模型，请使用 AddressEntry.Manager 属性。

CDO 1.21 不公开地址条目的管理器，但您可以使用[Redemption](http://www.dimastr.com/redemption)及其[RDO](http://www.dimastr.com/redemption/rdo_introduction.htm)对象集（它提供了 CDO 1.21 库的完全替代，并且可以在 Outlook 和 MAPI 的独立版本下运行） - 它公开了[RDOAddressEntry。经理](http://www.dimastr.com/redemption/RDOAddressEntry.htm)财产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:29:16.427

我能够弄清楚！

只需将接收者对象转换为地址条目对象并从那里提取经理信息，这也可以通过使用来完成`objAE.addressEntry.Manager`！

```
Private Sub accountManagerName_MouseDown(ByVal Button As Integer, ByVal Shift As Integer, ByVal x As Single, ByVal Y As Single)

    On Error Resume Next
    Set CDOSession = CreateObject("MAPI.Session")
'   Change the name of your Outlook profile as needed.
    CDOSession.Logon "", "", False, False
        If Err.Number <> 0 Then MsgBox "Please ensure you have Outlook open.", , "ERROR"
    Set olkRecipients = CDOSession.AddressBook(, "Select Account Manager", 0, False)

    For Each objAE In olkRecipients
        accountManagerName.Text = objAE.name
        AMfullName = objAE.name

        'convert Recipient object to AddressEntry object using the recipient ID
        Set objAE2 = CDOSession.GetAddressEntry(objAE.ID)

        AMfirstName = objAE2.fields(18)
        AMlastName = objAE2.fields(22)
        AMmanagerName = objAE2.Manager

'        Debug.Print AMfirstName
'        Debug.Print AMlastName
'        Debug.Print AMmanagerName
    Next

    ccAMmanager.Caption = AMmanagerName
    ccUserManager.Caption = getName("mgrname")
    ccAMmanager.Activate

    Set olkRecipients = Nothing
    CDOSession.Logoff
    Set CDOSession = Nothing

End Sub 
```

# python - Python变量在递归函数中的for循环后失去价值

> ID：15532878
> 
> 赞同：0
> 
> 时间：2013-03-20T19:25:03.680
> 
> 标签：python, recursion

这是一个 Python 错误吗？递归函数中的 for 循环后变量丢失值。这是测试代码。我真的在解析 XML。

```
def findversion(aNode, aList, aFlag):
    print "FindVersion ", aNode[0:1]
    print "Findversion ", aFlag
    if aNode[1].find('Software') != -1:
        aFlag = 1
        aList.append(aNode[1])
    if aFlag == 1 and aNode[0] == 'b':
        aList.append(aNode[1])
    print "Before for ", aFlag
    for elem in aNode[2:]:
        print "After for ", aFlag
        findversion(elem,aList,aFlag)

node = ['td', 'Software version']
node2 = ['b', '1.2.3.4' ]
node3 = [ 'td', ' ', node2 ]
node4 = [ 'tr', ' ', node, node3 ]
print node4

myList = list()
myInt = 0
findversion(node4,myList,myInt)
print "Main ",myList 
```

在下面的程序输出中，我总是希望输出之前的输出与输出之后的相同。

程序输出：

```
['tr', ' ', ['td', 'Software version'], ['td', ' ', ['b', '1.2.3.4']]]
FindVersion  ['tr']
Findversion  0
Before for  0
After for  0
FindVersion  ['td']
Findversion  0

Before for  1
After for  0

FindVersion  ['td']
Findversion  0
Before for  0
After for  0
FindVersion  ['b']
Findversion  0
Before for  0
Main  ['Software version'] 
```

蟒蛇版本：

```
Python 2.7.3 (default, Dec 18 2012, 13:50:09)
[GCC 4.5.3] on cygwin
Type "help", "copyright", "credits" or "license" for more information. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:33:31.900

令人困惑的输出是因为`After for 0`输出来自函数的不同递归调用（与`Before for 0`它上面的输出不同）。

这是您的函数的一个版本，其中包含一些额外的信息来跟踪递归调用的深度：

```
def findversion(aNode, aList, aFlag, i=1):
    print "FindVersion ", aNode[0:1], 'call:', i
    print "Findversion ", aFlag, 'call:', i
    if aNode[1].find('Software') != -1:
        aFlag = 1
        aList.append(aNode[1])
    if aFlag == 1 and aNode[0] == 'b':
        aList.append(aNode[1])
    print "Before for ", aFlag, 'call:', i
    for elem in aNode[2:]:
        print "After for ", aFlag, 'call:', i
        findversion(elem,aList,aFlag,i+1) 
```

这是新的输出，它显示了我在说什么：

```
FindVersion  ['tr'] call: 1
Findversion  0 call: 1
Before for  0 call: 1
After for  0 call: 1
FindVersion  ['td'] call: 2
Findversion  0 call: 2
Before for  1 call: 2         # this is from the recursive call
After for  0 call: 1          # this is from the original call
FindVersion  ['td'] call: 2
Findversion  0 call: 2
Before for  0 call: 2
After for  0 call: 2
FindVersion  ['b'] call: 3
Findversion  0 call: 3
Before for  0 call: 3
Main  ['Software version'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:33:34.257

这`After`是来自封闭`findversion`电话：

```
...
print Before for 0
start iterating over aNode
   first td:
     print After for  0
     call findversion
       print FindVersion  ['td']
       print Findversion  0
       find Software, set aFlag = 1
       print Before for 1            <---
       start iterating over aNode
       it's empty
   second td:
     print After for  0              <---
     ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:37:42.270

这不是一个错误。变量 aFlag 仅对特定函数调用是局部的，因为它是按值传递的。当您的程序打印“Before for 1”时，它永远不会进入 for 循环，因为 aNode[2:] 是空的（aNode 当时只有两个元素）。因此，它从不打印任何“After for”，而是立即返回。

如果您将 print 语句 'After for' 实际上放在 for 循环之后而不是 for 循环内，则输出将更加清晰。然后输出将是一致的。

```
print "Before for ", aFlag
for elem in aNode[2:]:    
    findversion(elem,aList,aFlag)
print "After for ", aFlag 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T19:46:35.900

所以为了修复我的程序，我需要返回标志。

```
def findversion(aNode, aList, aFlag):
    print "FindVersion ", aNode[0:1]
    print "Findversion ", aFlag
    if aNode[1].find('Software') != -1:
        aFlag = 1
        aList.append(aNode[1])
    if aFlag == 1 and aNode[0] == 'b':
        aList.append(aNode[1])
        aFlag = 0
    print "Before for ", aFlag
    for elem in aNode[2:]:
        print "After for ", aFlag
        aFlag = findversion(elem,aList,aFlag)
    return aFlag 
```

# java - 使用 Guava Ordering 对对象列表进行多标准排序

> ID：15532880
> 
> 赞同：13
> 
> 时间：2013-03-20T19:25:15.303
> 
> 标签：java, sorting, gwt, guava

我有一个类无法实现可比性，但需要根据 2 个字段进行排序。我怎样才能用番石榴做到这一点？

假设课程是：

```
class X {
  String stringValue;
  java.util.Date dateValue;
} 
```

我有一个清单：

```
List<X> lotsOfX; 
```

我想首先根据 value 字段对它们进行排序，然后根据 dateValue 在“value”字段的每个“组”中降序排列。

到目前为止我一直在做的是：

```
List<X> sortedList = ImmutableList.copyOf(Ordering.natural().onResultOf(dateValueSortFunction).reverse().sortedCopy(lotsOfX));
sortedList = ImmutableList.copyOf(Ordering.natural().onResultOf(stringValueSortFunction).sortedCopy(sortedList)); 
```

函数定义为：

```
public class DateValueSortFunction<X> implements Function<X, Long> {

    @Override
      public Long apply(X input) {
        return input.getDateValue().getTime();  //returns millis time
      }
} 
```

和：

```
public class StringValueSortFunction<X> implements Function<X, Integer> {

      @Override
        public Integer apply(X input) {
          if(input.getStringValue().equalsIgnoreCase("Something"))
            return 0;
          else if(input.getStringValue().equalsIgnoreCase("Something else"))
            return 1;
          else
            return 2;
        }
} 
```

预期输出`sortedList`为：

```
Something   03/18/2013
Something   03/17/2013
Something else  03/20/2013
Something else  03/19/2013
.... 
```

我的方法有效，但对于遍历列表两次显然效率低下。有没有更好的方法来做到这一点？

我在 GWT 应用程序中使用它。实施可比较不是一种选择。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-20T19:31:48.200

我怀疑你想要[`Ordering.compound`](http://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Ordering.html#compound-java.util.Comparator-). 您*可以*在一个语句中完成所有操作，但我会使用：

```
Ordering<X> primary = Ordering.natural().onResultOf(stringValueSortFunction);
Ordering<X> secondary = Ordering.natural()
                              .onResultOf(dateValueSortFunction)
                              .reverse();
Ordering<X> compound = primary.compound(secondary);

List<X> sortedList = compound.immutableSortedCopy(lotsOfX); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-20T19:54:10.177

一个功能较少但可以说更清洁的解决方案：

```
new Ordering<X>() {
  public int compare(X x1, X x2) {
    return ComparisonChain.start()
      .compare(x1.stringValue, x2.stringValue)
      .compare(x2.dateValue, x1.dateValue) // flipped for reverse order
      .result();
  }
}.immutableSortedCopy(listOfXs); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-04T23:59:51.737

Java 8 在 Comparator 上提供了方法来简洁地指定链式比较器。与新引入的 List.sort 一起，您可以：

```
lotsOfX.sort(
    Comparator.comparingInt(x -> stringValueSortFunction.apply(x.stringValue))
        .thenComparing(x -> x.dateValue, Comparator.reverseOrder())); 
```

当然，这会改变列表 - 如果您想保持原始列表不变，请先制作副本，或者将比较器包装在 Ordering 中，`immutableSortedCopy`如果您想要不可变的副本，请使用。

# .net - wpf 控件的自动 ID

> ID：15532881
> 
> 赞同：1
> 
> 时间：2013-03-20T19:25:20.153
> 
> 标签：.net, wpf, controls, uniqueidentifier

WPF 控件是否有唯一的 ID？如果我重命名控件名称或更改位置，此 ID 需要是永久的并且不能更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:36:33.123

如果您想要一个在重命名 WPF 控件时不会更改的 Id，您可以随时使用

[AutomationProperties.AutomationId](http://msdn.microsoft.com/en-us/library/system.windows.automation.automationproperties.automationid.aspx)

来自 msdn

> 获取或设置唯一标识指定元素的字符串。

如果这不能满足您的要求，您可以发明自己的附加依赖项属性。AutomationId 属性的好处是您可以使用 UI 自动化库和[AutomationElement.AutomationIdProperty](http://msdn.microsoft.com/en-us/library/system.windows.automation.automationelement.automationidproperty.aspx)来查找和控制该 UI 元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:42:17.620

如果你问 WPF 是否自动为每个控件生成一个唯一的 id，那么答案是否定的。正如 parapura 所建议的，您可以使用 AutomationIdProperty 为控件（或控件的实例）提供 id，但您必须手动确保您提供的 id 是唯一的。

# android - google maps api v2 android 不适用于我以外的设备

> ID：15532882
> 
> 赞同：0
> 
> 时间：2013-03-20T19:25:24.573
> 
> 标签：android, eclipse, api, android-maps-v2

我已经使用 Google Maps API v2 创建了一个应用程序 android。使用 eclipse 启动应用程序时一切正常。但是当我导出应用程序并将其发布到谷歌商店时，人们看不到地图。为什么 ？

对不起英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:56:50.043

听起来这与您的证书和地图 API 工作所需的 API 密钥有关。Google 地图需要 API 证书才能在手机上运行。您可以在[此处](https://developers.google.com/maps/documentation/android/start)阅读有关生成所需证书的信息。当您通过 Eclipse 使用该应用程序时，该应用程序运行良好，这对我来说就像您使用调试密钥而不是发布密钥创建了 API 证书一样。特定于您的计算机的调试密钥只能在您的计算机上使用。如果您希望其他人在分发中使用地图，您需要[生成一个发布密钥](http://developer.android.com/tools/publishing/preparing.html)，用于签署您的应用程序以进行分发，然后为该密钥创建一个谷歌地图证书。获得该证书的 API 密钥后，将其放入 XML 的 API_KEY 部分。

# python - 名单中的双打

> ID：15532883
> 
> 赞同：-1
> 
> 时间：2013-03-20T19:25:24.543
> 
> 标签：python

我今天进行了一项测试，并提出了一个问题：编写函数 doubles()，它将整数列表作为输入，并输出列表中的整数，该整数恰好是列表中前一个整数的两倍，每行一个。

我无法弄清楚我的代码是如何做到这一点的

```
def doubles(x):
    for a in range(len(x)-1):
        for b in (range(a,len(x))):
            if x[a]*2==x[b]:
                print(b) 
```

例如 doubles([3,0,1,2,3,6,2,4,5,6,5]) 将打印 2 , 6 , 4

有人可以帮我弄清楚如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:32:09.517

```
def doubles(lst):
    prev = None
    for actual in lst:
        if prev is not None and actual == 2*prev:
            print actual
        prev = actual 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:33:04.643

这可以很简单地完成：

```
def doubles(seq):
    after = seq[1:]
    for previous, current in zip(seq, after):
        if current == previous * 2:
            print(current) 
```

哪个按预期工作：

```
>>> print(list(doubles([3, 0, 1, 2, 3, 6, 2, 4, 5, 6, 5])))
2
6 
4 
```

我们从列表的一部分中获取第二个列表中的值列表。然后，我们使用`zip()`前一个值循环遍历每个值，并简单地执行检查，如果匹配，则打印该值。

您也可以通过替换来将其构造为生成器`print()`（`yield`这通常是一个更好的选择），或者如果您真的想要一个列表：

```
def doubles(seq):
    after = seq[1:]
    return [current for previous, current in zip(seq, after) 
            if current == previous * 2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T19:27:54.167

您的代码是将每个值与列表中稍后出现的所有值进行比较。但是这个问题要求你只考虑相邻的对。

因此，您只需要遍历列表一次。像这样：

```
def doubles(x):
    for i in range(1, len(x)):
        if x[i] == 2*x[i-1]:
            print x[i] 
```

更重要的是，您的代码打印了索引而不是值，这是我在上面修复的一个错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T19:31:16.690

您只需要遍历列表一次，用它之后的一个或之前的一个来测试每个元素。

下面的示例用它后面的数字测试每个数字，并在最后一个数字处停止。

```
def doubles(x):
    for i,a in enumerate(x[:-1]):
        if x[i+1] == a*2:
            print a*2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T19:35:29.300

最简单的方法是使用一个元素移位进行压缩并检查元素对是否符合您的条件

```
>>> def doubles(x):
    return [b for a,b in zip(x,x[1:]) if b == 2*a]

>>> for e in doubles([3,0,1,2,3,6,2,4,5,6,5]):
    print e

2
6
4 
```

类似的解决方案，但只使用迭代器

```
>>> def doubles(x):
    it1, it2 = tee(x)
    next(it2)
    return [b for a,b in izip(it1,it2) if b == 2*a]

>>> for e in doubles([3,0,1,2,3,6,2,4,5,6,5]):
    print e

2
6
4 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T19:30:44.837

您不需要嵌套循环。对于每个元素，您只需要针对它之前的元素对其进行测试。

# c - 我的链表头被覆盖

> ID：15532884
> 
> 赞同：0
> 
> 时间：2013-03-20T19:25:25.750
> 
> 标签：c, linked-list

我正在尝试创建一个包含姓名和出生日期信息的人员链接列表。人员信息在结构中声明，当我创建一个新节点时，该新节点稍后会添加到列表的末尾。发生的事情是，我的 insertNode 函数中出现了一个无限循环，因为不知何故，我的列表的头部正在我的 createNode 函数中被更改。有时我的工作有效，有时却没有，这让我相信我在做一些我没有发现的小错误。

我在下面发布了代码。主要内容不止于此，但我没有发布它，因为到目前为止一切都很好。

```
typedef struct info
{
    char *firstName;
    char *lastName;
    int month;
    int day;
    int year;
    struct info *next;
} person;

person *createNode(char *fName, char *lName, char *m, int d, int y)
{
    person *n = malloc(sizeof(person));
    n->firstName = strdup(fName);
    n->lastName = strdup(lName);
    n->month = convertMonthCharToInt(m);
    n->day = d;
    n->year = y;
    n->next = NULL;

    return n;
}

person *insertNode(person *head, person *newNode)
{
    person *temp = NULL;
    temp = head;

    if(head == NULL)
        return newNode;

    for(temp = head; temp->next!=NULL; temp = temp->next);

    if(head->next == NULL)
        head->next = newNode;

    return head;
}

int main()

{
    int numClasses = 0, numStudents = 0, numQueries = 0, d = 0, y = 0, j = 0;
    char fName[31], lName[31], m[11], queryFirstName[31], queryLastName[31];
    person *print;

    FILE *readFile = fopen("birthday2.txt", "r");

    if(readFile == NULL)
    {
        printf("File does not exist. Closing program.\n");
        return 0;
    }

    fscanf(readFile, "%d", &numClasses);

    while(i<numClasses)
    {
        person *head = malloc(sizeof(person));
        person *newNode = malloc(sizeof(person));
        person *result = malloc(sizeof(person));
        head = NULL;
        fscanf(readFile, "%d", &numStudents);
        j = 0;
        while(j<numStudents)
        {
            //read names in from file
            fscanf(readFile, "%s", &fName);
            fscanf(readFile, "%s", &lName);
            fscanf(readFile, "%s", &m);
            fscanf(readFile, "%d", &d);
            fscanf(readFile, "%d", &y);
            fscanf(readFile, "%d", &numQueries);

            //creates a node. My list head changes from here
            newNode = createNode(fName, lName, m, d, y);
            //to here. So I'm pretty sure it's changing within this function. Just not sure why.
            head = insertNode(head, newNode);
} 
```

# r - 将动物园对象滞后不同的时间段

> ID：15532889
> 
> 赞同：2
> 
> 时间：2013-03-20T19:25:45.593
> 
> 标签：r, zoo

我有一个动物园对象，其中时间分量是每小时一次，即......

```
2009-04-01 00:00:00
2009-04-01 01:00:00
...
2013-03-20 23:00:00 
```

我知道我可以`lag(zoo, k=-1)`用来获取前一小时。如何从前一天获得相同的时间？它不像设置那么简单，`k=-24`因为我的数据处于现行时间，所以当时间向前改变时它会跳过一个小时。（我在时间倒退的日子里去掉了第 25 小时，所以一天不会超过 24 小时）。

我是否需要以某种方式手动考虑时间变化以强制基于上述解决方案？我的假设是有更好的方法。

# ember.js - Ember.js：使用数组控制器中的多个对象计算数组中一个对象的属性

> ID：15532891
> 
> 赞同：0
> 
> 时间：2013-03-20T19:25:59.400
> 
> 标签：ember.js

尽管我在学习 Ember 以及如何在我需要的上下文中使用它方面取得了一些成功，但我仍在努力寻找解决此要求的方法。

我正在使用 Ember 处理一组字段定义，以便我可以动态生成一种字段形式以呈现给用户。其中一些字段是根据集合中的其他字段计算的 - 因此在生成字段时，视图元素需要能够获取一个或多个其他字段的值。我尝试将计算控件放入字段对象中，也尝试使用属性（@each）放入数组控制器中，但没有任何效果。我已经尝试了太多不同的渗透来在这里展示我尝试的解决方案，所以我已经清理了代码并准备好添加所需的绑定功能。

我可能通过使用 FieldController 让自己变得更难了，但它在使用一个 view_field 模板生成 view_fields 表单时效果非常好。

```
<html>
<head>
    <title>Ember.js: Calculate properties using multiple object in an array controller</title>
    <link rel="stylesheet" href="css/normalize.css">    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="js/libs/ember-0.9.5.min.js"></script>

    <script>

    //the application
    App = Ember.Application.create({

    });
    //the model

     App.Field = Ember.Object.extend({
        "name": null,
        "value": null, 
        "controlsource": null
    });
    //an array controller to interface between the data and the views
    App.FieldController = Ember.ArrayController.extend({
        content: [],

    }); 
    App.instanceFieldController=App.FieldController.create();

    //populate the controller with data
    App.instanceFieldController.pushObjects([   
        App.Field.create({name:"field1",value:"1",controlsource:""}),
        App.Field.create({name:"field2",value:"2",controlsource:""}),
        App.Field.create({name:"field3",value:null,controlsource:"field1"}),//this field's value should be calculated from field1
        App.Field.create({name:"field4",value:null,controlsource:"field2"})//this field's value should be calculated from field2
    ]);

    //A collection-view which has a collection of a view, each of which defines the presentation of a fields
    App.FieldCollectionView = Em.CollectionView.extend({            
        itemViewClass: Em.View.extend({
            templateName: "textFieldTemplate"       
        }),
        contentBinding: "App.instanceFieldController.content"
    });

</script> 
```

```
<h1>Ember.js: Calculate properties using multiple object in an array controller</h1>

<!-- THE FORM TO BE POPULATED WITH THE FIELDS -->
<script type="text/x-handlebars">
    <form action="">
        {{view App.FieldCollectionView}}
        <input type="submit" value="Go">
    </form>
</script>
<!-- THE TEMPLATE FOR HOW TO DISPLAY EACH FIELD -->
<script type="text/x-handlebars" data-template-name="textFieldTemplate">
    <label {{bindAttr for="textField.elementId"}}>{{content.name}}</label>              
    {{view Em.TextField valueBinding="content.value"}}      
</script> 
```

# bash - 在给定根名称的情况下查找文件扩展名

> ID：15532892
> 
> 赞同：2
> 
> 时间：2013-03-20T19:26:01.390
> 
> 标签：bash, shell, file-extension

嗨，我有 2 个 bash 脚本，我正试图一起工作。第一个脚本被赋予一个文件名以及文件所在的目录，如下所示：

```
 example_file
 /var/www/some_directory 
```

第二个脚本用于根据文件类型对相关文件进行处理，即。如果 example_file.txt 脚本做一件事，如果它是 example_file.mkv 则完全是另一件事。我正在寻找一种方法，让第二个脚本仅根据文件名和其所在目录的名称自动确定文件扩展名类型（即在 /var/www/some_directory 中查找 example_file 并正确确定文件的扩展名）所以给定

```
 example_file 
```

脚本返回其中之一

```
 example_file.txt  OR example_file.mkv  OR example_file. mp3 etc etc 
```

请注意，该目录仅包含几个文件，并且只有一个名为 example_file.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:31:37.043

```
basename $(ls /var/www/some_directory/example_file.*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:38:20.523

不确定我理解正确：-您有一个没有扩展名的文件-您希望脚本输出其名称并添加正确的扩展名？

如果是这样：（`man file`在 unix 系统上，`file`使用所谓的“魔术”确定文件的内容，这是文件的前几个字节，并根据魔术字节告诉它的内容输出不同的描述）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:46:30.940

从列表中获取文件名，然后使用 switch 语句对其进行操作：

```
#! /bin/bash

dir="/var/www/some_directory"
file_prefix="example_file"

filename=$(ls -1 "$dir" | grep "^$file_prefix")
case "$filename" in
    *.txt)
        # do txt stuff
        ;;
    *.mp3)
        # do mp3 stuff
        ;;
    *)
        echo unrecognized
        ;;
esac 
```

# python - gevent、请求和未处理的异常

> ID：15532893
> 
> 赞同：2
> 
> 时间：2013-03-20T19:26:07.887
> 
> 标签：python, gevent

我有代码：

```
import gevent
import gevent.monkey; gevent.monkey.patch_all()
import requests

def func():
    try:
        requests.get('http://unavailable-host/')
    except:
        pass

def main():
    jobs = [gevent.spawn(func) for i in xrange(10)]
    gevent.joinall(jobs)

if __name__ == '__main__':
    main() 
```

这个脚本通常没有任何输出。但有时（在 5 次运行中的 1 次中）我收到此消息：

```
Unhandled exception in thread started by
sys.excepthook is missing
lost sys.stderr 
```

解释一下，为什么会发生这种情况，什么是正确的解决方案？另外，如果我添加

```
gevent.sleep(1) 
```

后

```
gevent.joinall(jobs) 
```

脚本总是没有输出，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:36:57.887

**编辑：**

这似乎与在主程序已经退出后尝试执行某些操作（例如打印到 stdout/stderr）的线程有关。

请参阅[Python 错误：issue1722344](http://bugs.python.org/issue1722344)以供参考，

和 Martijn Pieters 在这个答案中对[类似 SO 问题](https://stackoverflow.com/a/6571414/841337)的评论：

> 实际上，由于 python 正在退出并且仍然有一个线程处于活动状态，所以会生成错误。

**以前的（并且完全不正确的）答案：**

您正在经历的是`monkey_patch`.

`requests`用作`socket`通过 Internet 将数据传输到某个地址的底层机制。`gevent.monkey.patch_all()`用 替换 stdlib `socket`，`gevent.socket`这是一个异步（非阻塞）套接字，因此当代码深处的某个地方（我的猜测`http.client`是由 使用`urllib`，而后者又由 使用`requests`）时，在哪里发出`sock.recv(X)`命令，代码*预计会阻塞，直到收到 X 字节或套接字关闭*，相反，因为套接字已被替换`gevent.socket`，它*立即返回只有与流缓冲区中当前一样多的字节*，所以代码中断。

但是，在您的情况下，简单的解决方案是简单地使用[grequests](https://pypi.python.org/pypi/grequests)，这是为使用 gevent 构建的请求（实际上，它会执行自己的 monkey_patch。）

# jquery - 可折叠标题中的 jQuery Mobile 选择菜单 - Firefox 不起作用

> ID：15532897
> 
> 赞同：3
> 
> 时间：2013-03-20T19:26:16.377
> 
> 标签：jquery, firefox, select, header

我`data-role="collapsible"`在标题中有一个选择菜单。在 Firefox 中，当您单击选择菜单并选择一个选项时，它不会更改该选项（onchange 永远不会触发）。尝试再次单击选择菜单不会打开下拉菜单。其他浏览器工作正常。请参阅以下示例：http: [//jsfiddle.net/CbUDd/5/](http://jsfiddle.net/CbUDd/5/)

```
<div data-role="page" id="the-page">
<div data-role="collapsible" data-iconpos="right">
    <h3>Label of Header
    <select data-native-menu="true" id="theselect" style="width:100px;">
        <option value="a">a</option>
        <option value="b">b</option>
    </select>
    </h3>
</div>
</div> 
```

关于如何修复它的任何线索？

# windows - 异步 WCF 调用在客户端处理不当

> ID：15532903
> 
> 赞同：2
> 
> 时间：2013-03-20T19:26:32.693
> 
> 标签：windows, vb.net, winforms, wcf, asynchronous-wcf-call

这是场景。

我有一个遵循基于异步事件的设计模式的 WinForm 应用程序（C#，.NET 3.5）。

主控件（MainResultControl）根据用户请求创建多个子控件（ResultControl）实例。每个子控件都有一组独特的参数供用户选择。

然后每个子控件异步调用 WCF 服务：

```
WebServiceClient.GetResultsAsync(Parameters param) 
```

每个子控件还注册了 Web 服务的 GetResultsCompleted 事件

WebServiceClient.GetResultsCompleted += _service_GetResultsCompleted()

这是我们面临的问题。用户抱怨有时 ResultControl 会显示意外的数据集 - 与他们请求的内容无关。

一个控件实例是否有可能收到另一个实例在处理 Web 服务中引发的 GetResultsCompleted 事件时请求的结果？

谢谢你。

这是一些支持代码（VB）：父控件（MainResultControl）

```
Private Sub Submit_Click(ByVal sender As System.Object, _
                         ByVal e As System.EventArgs) Handles tbSubmit.Click
    'a copy of MyRequestArgs is created with the details of request'
    pnlResult.Controls.Add(new ResultsControl(_myRequestArgs))
End Sub 
```

子控件（ResultsControl）：

```
Public Class ResultsControl

  Public _webRequestResult As WebRequestResult      

  Public Sub New(ByVal _requestArgs As MyRequestArgs)

     Dim _service as MyWebService()
     _service.GetTripSolutionsAsync(New TripPlannerParameters() _
                             With {.ApplicationID = _requestArgs.ApplicationID, _
                                   .Arrival = _requestArgs.Parameters.Arrival, _
                                   .Destination = _requestArgs.Parameters.Destination})
  End Sub

  Private Sub _service_GetTripSolutionsCompleted(ByVal sender As Object, _
                                               ByVal e As MyWebService.ResultCompletedEventArgs) Handles _service.GetTripSolutionsCompleted

     'Validation of correct results is done here
     'Skipped for simplicity
     _webRequestResult = DirectCast(e.Result, WebRequestResult)

  End Sub

End Class 
```

编辑：

我咨询了一些人，似乎 WCF 有一些方法可以确保从服务引发的事件由引发它的正确对象（在客户端计算机上）处理。这个想法是 - WCF 在客户端机器上使用不同的 IP 套接字来处理多个异步请求。真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:30:11.717

您必须实现请求的一些唯一标记。

看... 即您有控件 A，因此您必须为该控件创建一个唯一标记/ID 并发送它。

在回调方法下，您必须返回该标记/ID，以便您可以在 CONTROL 中过滤消息。

最好的方法是，如果您将在客户端/服务器之间发送一些 MESSAGE BOX，这样您就可以轻松地在那里添加该 ID 和错误消息。

那样的东西...

# class - UML mapping: container class with objects of two types

> ID：15532909
> 
> 赞同：1
> 
> 时间：2013-03-20T19:27:08.213
> 
> 标签：class, uml, class-diagram

Suppose that there is one container C that can contain objects of type A and B. C cannot be empty and can only contain 1 object of each type. That means that C contains one of the following:

*   1 object of type A
*   1 object of type B
*   1 object of type A + 1 object of type B

To map this problem in UML class diagram I tried these...

![enter image description here](../Images/cbada63938574378d25328bfd6568a8d.png)

... but none of them map the problem since that in the left diagram the container C can be empty and in the right diagram the container C can contain two objects of type A (or B).

So my question is: how is it possible to map this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:39:38.773

In the left diagram, the cardinalities allow - 1 object of type A - 1 object of type B - 1 object of type A + 1 object of type B - no objects

Cardinalities affect only the multiplicity of the association end where they apply. You need to write the last part of the condition (at least one A or at least one B) as a constraint (invariant). An invariant is a condition that **always** holds for every instance of that class.

If you write the constraint as pseudocode, it is enough to say that `a!=null or b!=null`. You draw the invariant as a note with stereotype «invariant» attached to the constrained class.

![Constraint](../Images/b212366abe521650283f7721d85d9a35.png)

In OCL (a language used for non-ambiguous description of constraints):

```
 inv: not a.oclIsUndefined() or not b.oclIsUndefined() 
```

(You can read more about OCL [here](http://www.omg.org/spec/OCL/2.3.1/))

The right diagram introduce a super-class `Object` that is not part of the description of your problem. There could be another classes that specialize `Object` (e.g. `C`) that you don't want in your association. In this case the invariant is more complex, because you need to require that:

*   There is at most one instance of A
*   There is at most one instance of B
*   There are no instance of other classes.

(If you write the invariant in natural language, it is enough to mention the items above).

In OCL, assuming that the association end is named `x`, the invariant reads:

```
inv: x->select(oclIsKindOf(A))->size()<=1 and
     x->select(oclIsKindOf(B))->size()<=1 and
     x->select(not oclIsKindOf(A) and not oclIsKindOf(B))->isEmpty() 
```

or

```
inv: let a:Integer = x->select(oclIsKindOf(A))->size() in
     let b:Integer = x->select(oclIsKindOf(B))->size() in
     a<=1 and b<=1 and x->size()=a+b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:43:52.207

The solution to your problem is indeed using UML constraints as explained by Javier. But in this particular case, there is a predefined UML constraint called `{or}` that does exactly what you want. The "or" constraint is predefined in UML and can be graphically written between associations. Note how 0 is removed from the multiplicities because `{or}` means that one of the aggregations may not be present at all.

![enter image description here](../Images/e3ad16261062abacdab629f4fa8510a3.png)

P.S 1: For a similar example on `{xor}` see page 302 and 303 of [UML 2.0 Toolkit by OMG Press Book](http://books.google.ca/books?id=jEXnzbE_OooC&pg=PA302&lpg=PA302&dq=uml%20predefined%20constraints%20xor&source=bl&ots=k3Si9urnjQ&sig=rUJMjqftbeeLwKfeZbN5HrJp0uc&hl=en&sa=X&ei=pmhKUauSOuma2gXco4HoDQ&ved=0CEwQ6AEwBA#v=onepage&q=uml%20predefined%20constraints%20xor&f=false).

P.S 2: As far as I know, the notation you are using that branches an aggregation is not correct UML notation (or at least has a different meaning). Joining together multiple relationships is an alternate notation applicable to generalization.

P.S 3: Of course you could use OCL or natural language for your constraint if you find it more descriptive.

# iphone - 在dismissViewControllerAnimated 之后添加SubView

> ID：15532910
> 
> 赞同：0
> 
> 时间：2013-03-20T19:27:12.067
> 
> 标签：iphone, ios, objective-c, xcode, ipad

在我关闭模态视图控制器后，我试图将 UIImageView 添加到我的 ViewController 中。但由于某种原因`[self.view addSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Logo.png"];`，没有将 UIImageView 添加到显示中，或者至少它不可见。我在模态视图控制器中调用的示例代码如下。

```
/* Modal View Controller */
- (IBAction)hideModal:(id)sender {
   [self dismissViewControllerAnimated:YES completion:^() {
    TestViewController *gv = [self.storyboard instantiateViewControllerWithIdentifier:@"testView"];
    [gv view];
    [gv addLogo];
   }];
}
/* TestViewController */
-(void)addLogo {
    [self.view addSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Logo.png"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:29:53.107

从完成块更改方法调用

```
/* Modal View Controller */
- (IBAction)hideModal:(id)sender {
   [self dismissViewControllerAnimated:YES completion:nil];
    TestViewController *gv = [self.storyboard instantiateViewControllerWithIdentifier:@"testView"];
    [gv view];
    [gv addLogo];

}
/* TestViewController */
-(void)addLogo {

    UIImage *myImage = [UIImage imageNamed:@"Logo.png"];

    UIImageView *myImageView = [[UIImageView alloc] initWithImage:myImageView];
    myImageView.frame = CGRectMake(0,0,100,100);

    if(myImage)
     {
       [self.view addSubview:myImageView];
       [self.view bringSubViewToFront:myImageView];
     }
    else
     {
       NSLog(@"no image found");
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:49:07.630

改变

```
[self addSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Logo.png"]]; 
```

到

```
[self.view addSubview:[[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Logo.png"] autorelease]]; 
```

另一种方法是从 TestViewController 中的 viewDidAppear 调用 addSubview 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T21:15:22.380

完成块与显示的初始视图控制器不同。
当试图引用模态视图控制器下显示的视图控制器时，请调用以下代码：

```
 [self dismissViewControllerAnimated:YES completion:^() {
    UINavigationController *nav = (UINavigationController *)[UIApplication sharedApplication].keyWindow.rootViewController;
    gv = (TestViewController *)nav.topViewController;
    [gv displayLogo];
}]; 
```

# actionscript-3 - 如何防止在其 mouseOver/rollOver 事件期间打开 mx:MenuBar (Flex) 的弹出子菜单？

> ID：15532911
> 
> 赞同：0
> 
> 时间：2013-03-20T19:27:21.017
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flex4.5

我使用带有 xml 数据的 mx:MenuBar 组件来提供菜单。我看到的基本行为是，最初单击顶级菜单项（即在水平条上）时，弹出子菜单打开。然后不点击任何地方，如果我将鼠标悬停在水平菜单栏上/滚动，则会打开其他顶级菜单的弹出子菜单。

这种行为似乎不一致。弹出子菜单应在单击任何顶级菜单项（水平菜单栏）时打开，或者仅在鼠标悬停/滚动菜单栏项时打开。

我希望仅在单击顶级菜单（水平菜单栏）时打开弹出子菜单。所以我为 mouseOver 和 rollOver 事件添加了事件处理程序（不知道在悬停在水平菜单栏上时实际生成了哪个事件）。在事件处理程序中，我调用了 event.preventDefault() 方法来防止默认行为（即打开弹出子菜单）。但是，没有任何效果。我觉得，我无法控制它。

谁能说如何抑制默认行为并仅在菜单栏的单击事件时打开弹出子菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:10:40.670

您可以使用“猴子补丁”来重新定义 MenuBar 类的行为。通过重写方法来做到这一点并不容易，因为它们是私有的。

这是一个具有活动“查看源”属性的工作[示例。](http://it-skills.su/sosamples/webspark46/custommenuhover/CustomMenuHover.html)

要重写的函数是

```
private function mouseOverHandler(event:MouseEvent):void
{
} 
```

应该删除激活新菜单的代码行。

# perl - 强制 cURL 打印 1 表示失败，0 表示成功？

> ID：15532912
> 
> 赞同：0
> 
> 时间：2013-03-20T19:27:30.397
> 
> 标签：perl, curl, nagios

我正在为 Perl 中的 Mumble 服务器编写 Nagios 插件（为了体验 - 已经有很多可用的了），但我已经遇到了障碍。我想做的是`cURL`用来连接到 Mumble 绑定的端口——如果连接成功，我`cURL`只想打印一个 0，如果失败，它应该打印一个 1。查看手册页我找不到任何可以复制这种行为的标志。有任何想法吗？这可以以更优雅的方式完成，还是使用不同的实用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:46:42.790

为什么不使用 IO::Socket 并检查是否可以这样连接？似乎在 cURL 上这将比完全轻量级轻一些。

# php - 单个 PHP 脚本的 IIS 7 长时间超时

> ID：15532920
> 
> 赞同：0
> 
> 时间：2013-03-20T19:28:01.090
> 
> 标签：php, iis-7

我知道 IIS 6 中的元数据库有一些技巧可以做到这一点，但 7 不同。

基本上，我有一个长时间运行的 PHP 脚本，它以常规 PHP 方式处理自己的超时，在它完成之前一直被服务器杀死。我需要 IIS 7 程序来给它一个很长的超时时间或*只在一个脚本*上而不是其他脚本上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:55:50.083

检查 set_time_limit 函数。

设置时间限制（0）；//将删除执行时间限制

[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

# emacs - Emacs org-mode：如何标记条目以查看时间线而不让它们显示在议程视图中？

> ID：15532926
> 
> 赞同：2
> 
> 时间：2013-03-20T19:28:24.650
> 
> 标签：emacs, org-mode

我管理多个生物信息学项目，每个项目都有一个 org 模式文件，其中包含 TODO 项目、会议记录以及工作流程和数据转换的日志记录。通过自定义`org-agenda-files`. 工作流程在 org 文件中按逐项或有序列表进行逻辑排序，并在我启动它们时加盖时间戳。当输入数据发生变化或检测到错误时，经常需要重复一个步骤。因此，一个逻辑步骤可能包含具有多个时间戳的活动。由于项目可能会持续数月，我需要按逻辑和时间顺序审查项目。

组织模式时间线视图 ( `C-c a L`) 显然仅适用于具有“活动”时间戳的项目，即“<2013-03-20>”。如果我使用这些为活动添加时间戳，如果日期是过去，它们会在议程视图中显示为带有重复器的预定活动。有没有办法在时间轴视图中为活动添加时间戳而不让它们显示在议程视图中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T21:27:18.857

您可以通过按“[”（或“v [”）在时间线视图中添加非活动时间戳。

# grails - GORM 没有从 CONSOLE 将记录保存到关联表

> ID：15532928
> 
> 赞同：1
> 
> 时间：2013-03-20T19:28:38.727
> 
> 标签：grails, grails-orm

```
class Pirate {
    String name
    static belongsTo = Ship
    static hasMany = [ships: Ship]
}

class Ship {
    String name
    static hasMany = [crew: Pirate]
}

new Ship(name: "Ship1").addToCrew(new Pirate(name: "pirate1")).save() 
```

上面的代码只是在`Pirate`and`Ship`表中保存了一个条目，而不是在`ship_crew`表中。

我知道 Burt 在 Spring Security Grails 插件中使用的[这种技术](https://github.com/grails-plugins/grails-spring-security-core/blob/master/src/templates/PersonAuthority.groovy.template)，但我仍然希望能够使用`hasMany`and`belongsTo`

**更新**

上面的代码行似乎将条目保存在所有三个：`Pirate`、、`Ship`和`ship_crew`表中，但是，从控制台它只保存两个表中的条目，而不是`ship_crew`

```
> new Ship(name: "Ship10").addToCrew(new Pirate(name: "pirate10")).save(failOnError:true) 
new Ship(name: "Ship10").addToCrew(new Pirate(name: "pirate10")).save(failOnError:true) 
Hibernate: 
    /* insert playwithgrails.Ship
        */ insert 
        into
            ship
            (version, name) 
        values
            (?, ?)
Hibernate: 
    /* insert playwithgrails.Pirate
        */ insert 
        into
            pirate
            (version, name) 
        values
            (?, ?)
===> playwithgrails.Ship : 29 
```

# android - 安卓; 在 AdapterViewFlipper 上设置输入/输出动画：未知的动画师名称翻译

> ID：15532929
> 
> 赞同：7
> 
> 时间：2013-03-20T19:28:40.077
> 
> 标签：android, animation

我有一些非常简单的动画可以完美地与 ViewFlipper 配合使用，但是如果我尝试在 AdapterViewFlipper 输入/输出上设置它们，我会收到运行时错误“Unknown animator name translate”。在查看各自的方法时，看起来 ViewFlipper 需要一个 ViewAnimation，而 AdapterViewFlipper 需要一个 AdapterViewAnimation。api 在其他方面是相同的，并且两者都没有错误地构建。这是其中一个动画的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shareInterpolator="false">

    <translate
    android:fromXDelta="0%" android:toXDelta="-100%"
    android:fromYDelta="0%" android:toYDelta="0%"
    android:duration="800"/>
</set> 
```

我把它放在脚蹼上，比如：

```
vf.setOutAnimation(this, R.anim.out_to_left); 
```

我猜这可能意味着我不能使用翻译、输入，但是我将如何完成相同的动画呢？瘸...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-11T13:31:19.037

在这里找到答案：[https ://stackoverflow.com/a/26197426/1534666](https://stackoverflow.com/a/26197426/1534666)

看起来 ViewFlipperAdapter 需要一个 objectAnimator，而不是一个集合。

示例 left_in.xml，在 animator 文件夹中声明

```
<objectAnimator xmlns:android="http://schemas.android.com/apk/res/android"
            android:interpolator="@android:anim/accelerate_decelerate_interpolator"
            android:propertyName="x"
            android:valueType="floatType"
            android:valueFrom="-1500"
            android:valueTo="0"
            android:duration="600"/> 
```

# php - 如何在 Laravel 中从具有关系的 JSON 对象更新和创建新行？

> ID：15532932
> 
> 赞同：1
> 
> 时间：2013-03-20T19:28:54.690
> 
> 标签：php, laravel

我昨天开始使用 Laravel，ORM 似乎很强大。它有什么方法可以更新相关模型中的行吗？这是我尝试过的：

第 1 步：生成一个与数据库具有的确切结构的 JSON 对象。JSON 对象具有某些字段，这些字段是表示数据库中关系的子数组。

第 2 步：通过 POST 将 JSON 对象发送到 Laravel 进行处理，这里有点棘手：我可以先将 JSON 对象更改为数组

```
$array = (array) $JSONobject; 
```

现在我需要更新，我希望这可以工作：

```
Product::update($JSONobject->id,$array); 
```

但是由于数组有子数组，执行的更新SQL在表中找不到子数组列，而是去查找关联表。这可以做到吗？还是我也必须调用其他模型？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:37:28.743

这是 Eloquent 无法为您处理的事情。您提供给该`update()`方法的数组应仅包含模型的列，在您的情况下`Product`。您可以尝试这样的事情来更新关系。这完全不在我的脑海中，并且从未经过测试。带上一粒盐。

```
$update = (array) $JSONobject;

$relations = [];

foreach ($update as $column => $value)
{
    // If the value is an array then this is actually a relation. Add it to the
    // relations array and remove it from the update array.
    if (is_array($value))
    {
        $relations[$column] = $value;

        unset($update[$column]);
    }
}

// Get the product from the database so we can then update it and update any of the
// the products relations.
$product = Product::find($update['id']);

$product->update($update);

foreach ($relations as $relation => $update)
{
    $product->{$relation}()->update($update);
} 
```

上面的代码假定嵌套关系数组的键是关系的名称（模型中使用的方法名称）。您可能可以将其包装在`Product`模型上的方法中。然后就叫`Product::updateRecursively($JSONobject);`我很糟糕的名字，但你明白了。

这也可能不适用于更复杂的关系。对于多对多（甚至可能是一对多）之类的事情，您必须更进一步。

# html - 相同的 CSS 样式格式因模式而异

> ID：15532936
> 
> 赞同：0
> 
> 时间：2013-03-20T19:29:06.807
> 
> 标签：html, css

是否可以定义一种样式，为非带括号的文本分配一组格式规则，为带括号的文本分配另一组？这样做的原因是为了避免格式标签（如`<b>`或`<span>`）的混乱。例如，如果我有类似的东西

`<B>Item1</B> (expl), <B>Item2</B> (expl2), ..., <B>ItemN</B> (explN)`

将其声明为

`<span class="myClass">Item1 (expl), Item2 (expl2), ..., ItemN (explN)</span>`

where`myClass`被定义为在一组不同于非括号的规则下格式化括号文本（在此示例中为粗体非括号）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:33:28.050

我认为这不能在 HTML/CSS 中完成，但可以通过使用 Javascript 来实现。加载页面 (onLoad) 后，您可以扫描项目（可能使用正则表达式），然后用自定义标签包围文本。

# python - python 2.7中的线程延迟

> ID：15532942
> 
> 赞同：2
> 
> 时间：2013-03-20T19:29:41.673
> 
> 标签：python, multithreading, timer, delay, flags

我目前正在使用 python (2.7) 编写一个有一些线程的 GUI。我遇到了一点，在获得一条信息之前我需要大约延迟一秒钟，但我不能让函数运行时间超过几毫秒。考虑到这一点，我正在尝试创建一个线程计时器，它将设置一个标志`timer.doneFlag` 并具有主要功能来继续戳看它是否完成。

这是工作。但并非总是如此。我遇到的问题是，有时我觉得 , 中的`time.sleep`函数`run`并没有完全等待一秒钟（有时甚至可能不会等待）。我所需要的只是我可以有一个标志，让我可以控制开始时间并在达到 1 秒时升起标志。

我可能做的太多只是为了得到一个线程化的延迟，如果你能提出一些建议，或者帮助我在下面的代码中找到一个错误，我将非常感激！

我附上了我使用的部分代码：

从主程序：

```
class dataCollection:
    def __init__(self):
        self.timer=Timer(5)
        self.isTimerStarted=0  
        return

    def StateFunction(self): #Try to finish the function within a few milliseconds

        if self.isTimerStarted==0:
           self.timer=Timer(1.0)
           self.timer.start()
           self.isTimerStarted=1

        if self.timer.doneFlag:
           self.timer.doneFlag=0
           self.isTimerStarted=0
           #and all the other code

import time
import threading
class Timer(threading.Thread):          
    def __init__(self, seconds):            
        self.runTime = seconds          
        self.doneFlag=0
        threading.Thread.__init__(self)
    def run(self):      
        time.sleep(self.runTime)    
        self.doneFlag=1
        print "Buzzzz"

x=dataCollection()
while 1:
    x.StateFunction()
    time.sleep(0.1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:04:42.937

首先，您已经[`threading.Timer`](http://docs.python.org/2/library/threading.html#timer-objects)以较少的灵活性有效地进行了重建。所以我认为你最好使用现有的课程。（为每个计时器实例创建一个线程有一些明显的缺点。但如果你只想要一个一次性计时器，那很好。）

更重要的是，让你的主线程反复轮询`doneFlag`可能是个坏主意。这意味着您必须尽可能频繁地调用您的状态函数，无缘无故地烧毁 CPU。

大概你必须在几毫秒内返回的原因是你正在返回某种事件循环，大概是为了你的 GUI（但是，例如，网络反应器有同样的问题，有同样的解决方案，所以我会保持一般性）。

如果是这样，几乎所有此类事件循环都可以在事件循环中安排定时回调 - <code>Timer in `wx`、`callLater`in`twisted`等。所以，使用它。

如果您使用的框架没有类似的东西，它希望至少有某种方式来发送事件/触发信号/发布消息/从外部调用它。（如果它是一个简单的基于文件描述符的反应器，它可能没有，但您可以通过将管道扔进反应器来自己添加它。）因此，更改您的`Timer`回调以发出事件循环的信号，而不是编写代码民意调查`Timer`。

如果由于某种原因您确实*需要*轮询跨线程共享的变量，那么您确实应该使用`Condition`or来保护它`RLock`。语言不能保证，当线程 0 更新值时，线程 1 会立即看到新值，甚至*永远*。如果您对（特定版本的）CPython 的内部有足够的了解，您通常可以证明 GIL 在特定情况下不需要锁。但除此之外，这是一场比赛。

最后：

> 我遇到的问题是，有时我觉得 run 中的 time.sleep 函数没有完全等待一秒钟（有时甚至可能不会等待）。

好吧，[文档](http://docs.python.org/2/library/time.html#time.sleep)清楚地表明这可能发生：

> 实际的挂起时间可能少于请求的时间，因为任何捕获的信号都会在执行该信号的捕获例程后终止 sleep()。

因此，如果您需要保证它实际上至少休眠 1 秒，那么执行此操作的唯一方法是：

```
t0 = time.time()
dur = 1.0
while True:
    time.sleep(dur)
    t1 = time.time()
    dur = 1.0 - (t1 - t0)
    if dur <= 0:
        break 
```

# gwt - GWT RootPanel 通过 ID 获取

> ID：15532943
> 
> 赞同：2
> 
> 时间：2013-03-20T19:29:44.303
> 
> 标签：gwt

我是 GWT 的新手，我可能忽略了一些简单的事情。所以我想做的是在我的html页面中，我在body标签中为我的页面创建了一个布局：

```
<table id="wrapper" cellpadding="0" cellspacing="0" style="width: 100%;height: 100%;">

         <!-- Header row -->
         <tr style="height: 25%;">
             <td colspan="2" id="header"></td>
         </tr>

         <!-- Body row and left nav row -->
         <tr style="height: 65%;">
             <td id="leftnav"></td>
             <td id="content"></td>
         </tr>

         <!-- Footer row -->
         <tr style="height: 10%;">
            <td colspan="2" id="footer"></td>
         </tr>

</table 
```

我已将 Id 设置为所有内容，以便我可以在入口点中获取这些项目。因此，在我的入口点中，我尝试像这样填充这些字段：

```
RootPanel.get("header").add(new Header());
RootPanel.get("leftnav").add(new NavigationMenu());
RootPanel.get("footer").add(new Footer()); 
```

但是我通过调试了解到 RootPanel.get("header") 返回 null。我确信其余的也返回 null，它只是在到达那里之前崩溃了。据我了解，这是做事的正确方法，但是我一定错过了一些东西。请让我知道我做错了什么，或者如果您需要更多信息。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:01:37.973

尝试在 HTML 中使用 div 标签：

```
<table id="wrapper" cellpadding="0" cellspacing="0" style="width: 100%;height: 100%;">

         <!-- Header row -->
         <tr style="height: 25%;">
             <td colspan="2"><div id="header"></div></td>
         </tr>

         <!-- Body row and left nav row -->
         <tr style="height: 65%;">
             <td><div id="leftnav"></div></td>
             <td><div id="content"></div></td>
         </tr>

         <!-- Footer row -->
         <tr style="height: 10%;">
            <td colspan="2"><div id="footer"></div></td>
         </tr>

</table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:04:40.623

通常使用`div`标签会比其他类型的元素效果更好，例如`<td>`. 就像评论说的那样，您应该尝试只使用一个`RootPanel`，然后添加然后使用 GWT 面板创建您的布局。

像 HTML 页面一样布局页面的一种非常好的方法是使用[`UiBinder`](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder). 您可以使用非常接近 HTML 的 XML 语言编写布局，同时使用所有有用的 GWT 小部件。如果您将使用 GWT 构建应用程序，使用和学习它非常有用。

# php - 如果日期更改为其他日期，如何在顶部添加日期

> ID：15532945
> 
> 赞同：2
> 
> 时间：2013-03-20T19:29:47.200
> 
> 标签：php, date, time, days

我正在为游戏制作一个新闻网站，我想要一个可以找到所有新闻主题的页面。所以我决定像很多网页一样使用它。

例子：

![在此处输入图像描述](../Images/3e80322bfbf3912d568d23cee0b5b3f1.png)

现在我想要那样，但我不知道如何做到那样。我已经做了一个小小的开始，我希望你们能帮助我！

```
$query = mysql_query("SELECT * FROM `gb_news` order by `datetime` DESC");

while($news = mysql_fetch_array($query)) {

        echo $news['title'];
        echo $news['datetime']; 

} 
```

这是一个非常简单的代码，但我只想知道当一篇文章在数据库中有新日期时如何添加这些天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:35:46.830

将日期存储在循环之外，然后仅在日期更改时显示标题。

```
$date = "";
while ($news = mysql_fetch_array($query)) {
    if ($news['datetime'] != $date) {
        $date = $news['datetime'];
        echo $date;
    }
    echo $news['title'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:43:03.250

这样的事情可能对你有用：

```
$query = mysql_query("SELECT * FROM `gb_news` order by `datetime` DESC");

$prevDate ='';
while($news = mysql_fetch_array($query))
{
    $tmpDate = DateTime::createFromFormat('Y-m-d H:i:s', $news['datetime']);
    if($prevDate!=$tmpDate)
    {
        $prevDate = $tmpDate->format('d/m/Y');
        echo '<h1>'.$prevDate.'</h1><hr />';
    }
    echo '<p>'.$tmpDate->format('H:i').' - '.$news['title'].'</p>';
} 
```

这是假设您的 datetime 列采用格式`YYYY-MM-DD hh:mm:ss`，并且您希望将日期显示为`DD/MM/YYYY`，显然要根据口味进行编辑！

此外，您的 PHP 版本必须 >= 5.3.0 才能使用[DateTime 类](http://www.php.net/manual/en/class.datetime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:43:48.327

我不确定我是否完全理解您要完成的工作。为了让您的数据像您包含的图像一样显示，您需要在 MySQL 或 PHP（或真正的组合）中对相同日期的项目进行分组。

就像是：

```
while ($news...) {

    // Get this article date
    $thisDate = new DateTime($news['datetime']) // Assuming this is a true datetime value

    // Compare this article date with previous article date to determine if we should start a new date header
    if (!empty($onDate) // We have previous articles to compare with
        && ($thisDate->format('l d F') == $onDate)) // This article date matches previous so keep in same group
    {
        echo $news['title'];
    } else { // No existing articles or new date = new header
        $onDate = $thisDate->format('l d F'); // See options: http://www.php.net/manual/en/function.date.php
        echo $onDate
        echo $news['title'];
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T19:36:26.903

那么您可以做的是存储日期，然后在每次日期更改时更改布局：

```
while($news = mysql_fetch_array($query)) {
  if(empty($date) || $date != date("format", $news['datetime'])){
     $date = date("format", $news['datetime']);
     //echo/print some html to show new section
  }  
  echo $news['title'];
  echo $news['datetime']; 
} 
```

这将处理日期比较并知道何时更改日期。“格式”表示您想要的日期格式类型，因为您可以回显/打印`$date`.

[PHP日期](http://php.net/manual/en/function.date.php)

**注意：**不要使用 MySQL_*，因为它在 PHP 5.5 中已被弃用。改用 MySQLi_* 或 PDO

# histogram - CIAreaHistogram 输入比例因子

> ID：15532946
> 
> 赞同：8
> 
> 时间：2013-03-20T19:29:47.427
> 
> 标签：histogram, core-image, cifilter, color-management

我正在构建一个使用`CIAreaHistogram`Core Image 过滤器的应用程序。我使用`inputCount`10 的值（桶数）进行测试，使用`inputScale`1 的值。

我得到了`CIImage`直方图本身的 ，然后我通过一个自定义内核（见帖子结尾）将 alpha 值设置为 1（否则直方图计算中的 alpha 值是预乘的），然后将其转换为`NSBitmapImageRep`.

然后我扫描图像代表的缓冲区并打印 RGB 值（跳过 alpha 值）。但是，当我这样做时，10 个中 R、G 和 B 值的总和不一定等于 255。

例如，对于全黑图像，我应用直方图，然后应用自定义内核，并获得以下输出：

```
RGB: 255 255 255
RGB: 0 0 0
RGB: 0 0 0
RGB: 0 0 0
RGB: 0 0 0
RGB: 0 0 0
RGB: 0 0 0
RGB: 0 0 0
RGB: 0 0 0
RGB: 0 0 0 
```

这正如我所料，因为所有像素都是黑色的，所以一切都在第一个桶中。但是，如果我对彩色图像运行相同的算法，我会得到以下结果：

```
RGB: 98 76 81
RGB: 164 97 87
RGB: 136 161 69
RGB: 100 156 135
RGB: 80 85 185
RGB: 43 34 45
RGB: 31 19 8
RGB: 19 7 3
RGB: 12 5 2
RGB: 16 11 11 
```

将 R、G 和 B 的值相加 - 它们加起来不等于 255。这会导致问题，因为我需要比较其中两个直方图，而我的算法预计总和在 0 到 255 之间。我显然可以缩放这些值，但出于性能原因，我想避免额外的步骤。

我注意到其他一些有趣的事情可能会提供一些关于为什么会发生这种情况的线索。在我的自定义内核中，我只是将 alpha 值设置为 1。我尝试了第二个内核（见帖子末尾），它将所有像素设置为红色。显然，绿色和蓝色值为零。但是，在检查位图代表的值时，我得到了这个结果：

```
RGB: 255 43 25 
```

但我只是将 G 和 B 设置为零！这似乎是问题的一部分，这表明色彩管理。但是由于我在内核中明确设置了值，因此只有一个代码块可以发生这种情况 - 从过滤器的 CIImage 转换为 NSBitmapImageRep：

```
NSBitmapImageRep *bitmapRep = [[NSBitmapImageRep alloc] initWithCIImage:kernelOutput];
unsigned char *buf = [bitmapRep bitmapData]; 
```

一旦我将像素设置为 RGB 255 0 0，然后执行这些行，然后读取缓冲区，RGB 值都是 255 43 25。我进一步尝试设置整个工作流程所基于的原始 CGImageRef 的颜色空间`kCGColorSpaceGenericRGB`，认为颜色配置文件可能正在执行，但无济于事。

谁能告诉我为什么`CIFilter`内核会以这种方式运行，以及如何解决它？

如前所述，这里是我使用的 CIFilter 内核函数的副本。首先，将 alpha 设置为 1 的那个：

```
kernel vec4 adjustHistogram(sampler src)
{
    vec4 pix = sample(src, destCoord());
    pix.a = 1.0;
    return pix;
} 
```

接下来，将所有像素设置为 RGB 255 0 0 但一旦转换为 255 43 25 就结束了`NSBitmapImageRep`：

```
kernel vec4 adjustHistogram(sampler src)
{
    vec4 pix = sample(src, destCoord());
    pix.r = 1.0; pix.g = 0.0; pix.b = 0.0;
    pix.a = 1.0;
    return pix;
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-19T09:44:25.867

在使用自定义 Core Image 过滤器时（或者当您创建新的 CIImage 对象或替换现有对象时），您只需要一行代码即可生成和显示直方图：

```
return [CIFilter filterWithName:@"CIHistogramDisplayFilter" keysAndValues:kCIInputImageKey, self.inputImage, @"inputHeight", @100.0, @"inputHighLimit", @1.0, @"inputLowLimit", @0.0, nil].outputImage; 
```

# java - 从总和为零的集合中找到一个子集？

> ID：15532957
> 
> 赞同：6
> 
> 时间：2013-03-20T19:30:19.320
> 
> 标签：java

我有一组这样的整数

```
{1,4,5,2,7,8,-3,-5,-6,9,3,-7,-1,5,6} 
```

该集合可以包含任意数量的项目，因为输入是从用户那里获取的

{(1,2,-3)}

{(1,-1)}

{(3,-3)}

{(5,-5)}

等等等等

我已经尝试过这段代码，但是当我设置`target`为零时它没有返回答案。

```
import java.util.ArrayList;
import java.util.Arrays;

class SumSet {

    static void sum_up_recursive(ArrayList<Integer> numbers, int target,
                                 ArrayList <Integer> partial)
    {
        int s=0;
        for (int x: partial) s += x;
        if (s == target)
            System.out.println("sum("+Arrays.toString(partial.toArray())+")="+target);

        if (s >= target)
            return;

        for(int i=0;i<numbers.size();i++) {
            ArrayList<Integer> remaining = new ArrayList<Integer>();
            int n = numbers.get(i);
            for (int j=i+1; j<numbers.size();j++) remaining.add(numbers.get(j));
            ArrayList<Integer> partial_rec = new ArrayList<Integer>(partial);
            partial_rec.add(n);
            sum_up_recursive(remaining,target,partial_rec);
        }
    }

    static void sum_up(ArrayList<Integer> numbers, int target) 
    {
        sum_up_recursive(numbers,target,new ArrayList<Integer>());
    }

    public static void main(String args[]) {
        Integer[] numbers = {3,4,6,4,5,2,6};
        int target = 9;
        sum_up(new ArrayList<Integer>(Arrays.asList(numbers)),target);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:10:24.120

这是一个解决方案的提议。

我首先解决了第一个子问题：我假设所有的数字和目标都是正数，然后我解决了真正的问题。

为此，我基本上将问题分解为子问题。

让我们用一个例子来说明：

数字：1,3,8,2,7 目标：10

首先：排序列表：数字：8,7,3,2,1 目标：10 然后递归找到以下问题的解决方案：

数字：7,3,2,1 目标：10-8 = 2

数字：3,2,1 目标：10-7=3

数字：2,1 目标：10-3=2

数字 : 1 目标 : 10-1=9

前面放大数的目的是为了快速排除包括这个数的解（因为总和很快超过了目标）。

这是解决此子问题的注释代码：

```
import java.util.ArrayList;
import java.util.List;

public class Problem {

    /*
     * Used at the end to recompose the solutions.
     * This value is null for the root problem.
     */
    private Integer nodeValue;

    //The POSITIVE target sum
    private int target;

    //List of POSITIVE numbers, supposed to be sorted
    private List<Integer> numbers;

    private List<Problem> listSubProblems;

    /*
     * Link to the parent problem.
     * Useful at the end to generate the results.
     */
    private Problem parentProblem;

    public Problem(int target, List<Integer> numbers, Integer nodeValue, Problem parentProblem){
        this.target=target;
        this.numbers=numbers;
        this.nodeValue=nodeValue;
        this.parentProblem=parentProblem;
        this.listSubProblems =new ArrayList<Problem>();
    }

    public void solve(){
        buildSubProblems();
        for(Problem problem : listSubProblems){
            problem.solve();
        }
    }

    /**
     * Builds a List of sub problems.
     * For example, if {@link #numbers} contains 9 8 5 3, with target 10
     * this method will return the following sub problems:
     *
     * <table>
     *     <tr>
     *         <td>nodeValue</td><td>target</td><td>numbers</td>
     *     </tr>
     *     <tr>
     *         <td>9</td><td>10-9=1</td><numbers>8 5 3</numbers>
     *     </tr>
     *     <tr>
     *         <td>8</td><td>10-8=2</td><numbers>5 3</numbers>
     *     </tr>
     *     <tr>
     *         <td>5</td><td>10-5=5</td><numbers>3</numbers>
     *     </tr>
     *
     * </table>
     *
     */
    private void buildSubProblems(){

        int numbersSize=numbers.size();

        /*
         * Numbers are supposed to be positive so if the target is negative,
         * there is no chance to find a valid solution.
         * As the list of numbers is sorted, the case when target < 0 happens quickly
         * Hence, it quickly removes combinations implying big numbers
         */
        if(target>=0 && numbersSize> 1){

            for(int i=0;i<numbersSize;i++){
                Integer nodeValue=numbers.get(i);
                List<Integer> subList=numbers.subList(i+1,numbersSize);
                int newTarget=this.target-nodeValue;
                Problem problem=new Problem(newTarget, subList, nodeValue, this);
                System.out.println("Created problem: "+problem.dump());
                this.listSubProblems.add(problem);
            }
        }
    }

    /**
     * @return True is the Problem contains exactly one number and that number equals the target.
     */
    public boolean isNodeSolution(){
        return this.target==0;
    }

    public Integer getNodeValue(){
        return this.nodeValue;
    }

    public List<Problem> getListSubProblems(){
        return this.listSubProblems;
    }

    public Problem getParentProblem(){
        return this.parentProblem;
    }

    public String dump(){
        StringBuilder sb=new StringBuilder();
        sb.append("{nodeValue: "+this.nodeValue);
        sb.append("; target: "+target);
        sb.append("; numbers:");
        for(Integer integer : numbers){
            sb.append(integer+",");
        }
        sb.append("}");
        sb.append("Valid? : "+ isNodeSolution());
        return sb.toString();
    }

} 
```

这是显示如何测试它的代码：

```
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

public class Main {

    public static void main(String[] args) throws Exception{
        Integer numbers[]={1,3,8,2,7};
        int target=10;

        List<Integer> listNumbers= Arrays.asList(numbers);

        Collections.sort(listNumbers);
        Collections.reverse(listNumbers);

        //Build the root problem
        Problem problem=new Problem(target,listNumbers,null,null);

        //Solve it
        problem.solve();

        //Dump the result.
        dumpResult(problem);

        System.out.println("Done!");
    }

    private static void dumpResult(Problem problem){
        for(Problem p:problem.getListSubProblems()){
            if(p.isNodeSolution()){
                System.out.print("\nSolution :");
                dumpSolution(p);
            }
            dumpResult(p);
        }
    }

    private static void dumpSolution(Problem problem){
        //If the current node is not the root problem
        if(problem.getParentProblem()!=null){
            System.out.print(problem.getNodeValue() + ", ");
            dumpSolution(problem.getParentProblem());
        }
    }
} 
```

这是一个输出示例：

```
Created problem: {nodeValue: 8; target: 2; numbers:7,3,2,1,}Valid? : false
Created problem: {nodeValue: 7; target: 3; numbers:3,2,1,}Valid? : false
Created problem: {nodeValue: 3; target: 7; numbers:2,1,}Valid? : false
Created problem: {nodeValue: 2; target: 8; numbers:1,}Valid? : false
Created problem: {nodeValue: 1; target: 9; numbers:}Valid? : false
Created problem: {nodeValue: 7; target: -5; numbers:3,2,1,}Valid? : false
Created problem: {nodeValue: 3; target: -1; numbers:2,1,}Valid? : false
Created problem: {nodeValue: 2; target: 0; numbers:1,}Valid? : true
Created problem: {nodeValue: 1; target: 1; numbers:}Valid? : false
Created problem: {nodeValue: 3; target: 0; numbers:2,1,}Valid? : true
Created problem: {nodeValue: 2; target: 1; numbers:1,}Valid? : false
Created problem: {nodeValue: 1; target: 2; numbers:}Valid? : false
Created problem: {nodeValue: 2; target: -2; numbers:1,}Valid? : false
Created problem: {nodeValue: 1; target: -1; numbers:}Valid? : false
Created problem: {nodeValue: 2; target: 5; numbers:1,}Valid? : false
Created problem: {nodeValue: 1; target: 6; numbers:}Valid? : false

Solution :2, 8,
Solution :3, 7, Done! 
```

现在，这不包括暗示负数的初始问题。要解决这种情况，请隔离所有负数并计算所有负数组合，并求和。

然后，对于每个负数之和，创建一个仅包含正数和相应目标的子问题（初始目标 - 负数之和）

一种改进方法：问题的复杂性取决于负数组合的数量。因此，如果负数多于正数，您可以反转所有值并解决反转问题。

另一种改进方法：您可以在内存中维护每个子问题的正数之和。如果 sum + nodeValue < target 那么继续探索分支是没有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:12:25.157

我在大学期间在谷歌面试时遇到了这个问题，并在很长一段时间内解决了这个问题。

想一想，对于一个为 0 的集合，“必须”是负数，“必须有一组正数”。

脚步：

```
1\. Created a 2 arrays negativeNumArrays and POsitiveNumArrays
2\. Create a new negative set(does not allows duplicate) which is possible sums of     negative arrays ex -
    [-1,-2,-3] = [-1,-2,-3, {-1-2=3},{-1,-3=-4},{-2,-3=-5},{-6}] = [-1,-2,-3,-4,-5,-6]
So the set looked like
Key:Value
"1" =-1
"2" = -2
...
"2:3"=-5 
"1:2:3"=-6

Here 
"N6" = -6

3\. For this new set of negative array find combination in positive 
   array which matches any of the 6 negative arrays.

Same as above say positive numbers are 3 and 4
So the set would look like
"3"=3

"4"=4

"3:4"=7

Now simple compare the two sets and see which of these are equal
So for example Negative Set "1:3" = Positive Set "4"
and hence use Stringtokenizer to get the numbers from set key {-1,-3,4} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T22:24:52.133

您没有检查是否`partial`为空，在这种情况下，当== 0`sum_up_recursive()`时将立即返回第一次尝试。试试这个：`target`

```
if (partial.size() > 0) {
    for (int x : partial)
        s += x;

    if (s == target)
        System.out.println("sum(" + Arrays.toString(partial.toArray()) + ")=" + target);

    if (s >= target)
        return;
} 
```

请注意，可能还有其他方法可以极大地改进您正在使用的算法。我只是在回答为什么您的代码没有按预期工作。

# eclipse - EMF模型的序列化

> ID：15532960
> 
> 赞同：0
> 
> 时间：2013-03-20T19:30:24.977
> 
> 标签：eclipse, serialization, model, eclipse-emf, emf

我正在掌握 EMF，我想检查一下我脑海中的概念是否准确。

我知道可以在 Eclipse 中创建一个 EMF 模型，然后使用它来生成 Java 代码。

我进一步了解模型可以序列化到磁盘然后再返回，但我不明白这个的用途。

当然可以保存模型文件本身吗？序列化是否有明显的用例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:00:55.857

我认为，您在这里混淆了这两个术语：“元模型”和“模型”。

EMF 模型实际上是一个元模型：它是对可以保存数据的模型的描述。EMF 模型/元模型可以用许多不同的格式表示。对于 EMF，我们通常使用`.ecore/.genmodel`或`.xcore`文件。

从 EMF 模型/元模型中，您可以生成表示模型和模型上的操作的 Java 代码。从理论上看，EMF 模型和 Java 代码是等价的，因为它们代表了相同的信息。

使用生成的 Java 代码，您可以实例化对象以保存模型数据。然后可以将这些数据以多种不同格式保存到磁盘。EMF 可以自动提供将模型数据序列化到 XML 磁盘并返回所需的代码。（实际上，没有涉及到生成的代码——这一切都是基于你的模型在`...Factory`类中的描述）。实现其他格式相当容易，例如 JSON 或数据库模式。

* * *

一个例子：

假设您使用 EMF 来描述自行车的模型（车轮、车把、车架、车座等）。从 EMF 模型中，您可以生成 Java 类，这些类可以根据对象和它们之间的关系来描述相同的自行车。

您现在可以通过创建/构造和连接 Java 类的对象来在模型中实例化许多不同的自行车。

然后可以将这些自行车序列化为 XML 并返回，因此您可以将自行车保存到磁盘。

* * *

使用 MDA（模型驱动架构），我们实际上谈论了 4 个级别的模型：

*   M0 通常是物理工件。例如自行车或纸上的账单。
*   M1 是物理工件的表示 - 这是模型
*   M2 是模型的描述——元模型——在这种情况下是一个基于 EMF 的模型，它描述了模型的实体、关系和属性
*   M3 是模型描述的描述 - 元元模型 - 实际上也可以用 EMF 表示。您在`.ecore`文件和`...Package`类中找到的信息在 M3 模型中表示，因为它们描述了 M2 模型。

后者真的只对我们这些教MDA的人很重要...在您的正常工作中，您真的只需要考虑M0，M1和M2...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:16:42.593

序列化是指持久化模型实例的内容（您的数据）。您可以序列化为 XML、JSON、数据库等。

# asp.net - 可选的多重继承 .NET

> ID：15532961
> 
> 赞同：0
> 
> 时间：2013-03-20T19:30:26.267
> 
> 标签：asp.net, vb.net, inheritance, multiple-inheritance

我正在构建一个相对简单的应用程序，并且对更好的设计实践有点困惑。

我有一个主类 MClass。Child1 和 Chil2 类都继承自 MClass。现在，还有另一个类 AClass，它可以从 Child1 或 Child2 继承，但不能同时继承两者（我相信，这只能通过接口实现）。

如何从一个或另一个类中获得这种可选继承？

还有类 AChild1 和 AChild2，它们都继承自 AClass。最终结果如下：

MClass:Child1:AClass:AChild1

MClass:Child2:AClass:AChild2

这是唯一可能的两个选项。简单地将 AClass 与其拥有的孩子结合起来会更好吗

MClass:Child1:AClass1

MClass:Child2:AClass2

我可以这样做，但 AClass1 和 AClass2 会有很多冗余字段......有什么建议吗？

谢谢！

编辑：

下面是一个具体的情况：

我有一件可以是 Type1 或 Type2 的设备。类设备有很多属性。Type1 和 Type2 有自己的属性，它们继承自 Equipment。Type1 和 Type2 都有电缆。有一个具有特定属性的电缆类。此外，Type1 和 Type2 有不同类型的电缆，CableType1 CableType2，它们有自己的特定属性，并从 Type1 或 Type2 继承字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:41:24.780

VB.NET 不允许多重继承。根据您的具体用例，您可以执行多种操作：

*   **描述接口中类之间的通用功能**。当然，您仍然需要在所有类中单独实现该功能，并且它不能帮助您处理字段，但是您可以使用共享接口来访问所有提供该功能的类。
*   **按照您的建议**，将功能放在子类中。**这是可能的，但意味着一些重复的字段。在某些情况下，这可能没问题，在其他情况下则不然。**
***   **将功能放在公共基类** `MClass`中。同样，这取决于具体情况*   **使用组合而不是继承**。对多重继承的需求通常表明一个糟糕的类设计，其中继承关系（“is a”）被滥用，而您真的想要表达一个组合（“has a”）。这意味着将字段和/或方法放在两个孩子都使用的单独类中。您应该使用*单一职责原则*作为指导，以便每个类只有一个明确定义的职责。**

 **不幸的是，你没有给我们一个具体的例子，所以很难说你的情况最好。这些技术的组合很可能会产生最佳结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:10:09.980

正如有人已经提到的，.NET 不支持多重继承。话虽如此，一个类*可以*实现多个接口，或者一个接口可以继承多个接口，这与扩展方法一起提供了一种很好的共享实现方式。这不像多继承那样类似于mixin，但效果大致相同。

如果你从接口的角度重新考虑你的模型，你可以在多重继承方面做你想做的事。实现类将只是 POCO 的，实现逻辑将是扩展方法形式的静态方法。

对于封装，您可以使用[显式接口实现](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)在实现类上实现某些属性，以便在使用类本身时某些属性不可见。

我发现使用这种技术有助于提高可测试性并防止大量耦合。**

# orm - ColdFusion - 启用 ORM 会阻止 onApplicationStart 运行

> ID：15532962
> 
> 赞同：3
> 
> 时间：2013-03-20T19:30:26.930
> 
> 标签：orm, coldfusion, railo, application.cfc

谁能向我解释这种行为？我在 中设置了一堆应用程序范围的设置`onApplicationStart`，其中一些在`onSessionStart`. 但是，当我启用 ORM 时，似乎 onApplicationStart 根本没有运行，因此我的 onSessionStart 方法失败了。

我花了一段时间才弄清楚这是问题所在，通常我会`onApplicationStart`在开发过程中以编程方式进行测试。所以只有在重新启动服务后我才发现症状。最终我将其追溯到 ORM，它很简单：

```
THIS.ormenabled = true; // Error
THIS.ormenabled = false; // Everything peachy 
```

我剥离了 Application.cfc 并在各种方法中添加了一些时间戳，以便我可以看到正在执行的内容：

```
<cfscript>
    THIS.Name = "TestyMcTestable"
    THIS.datasource = 'Test';        
    THIS.ormenabled = true;
</cfscript>    

<cfsetting
    requesttimeout="20"
    showdebugoutput="false"
    enablecfoutputonly="false"
    />

<cfset request.pseudo = Now() />
<cfset sleep(1500)>

<cffunction name="OnApplicationStart" access="public" returntype="boolean" output="false">
    <cfset request.application = Now() />
    <cfset sleep(1500)>
    <!--- Return out. --->
    <cfreturn true />
</cffunction>

<cffunction name="OnSessionStart" access="public" returntype="void" output="false">
    <cfset request.session = Now() />
    <cfset sleep(1500)>
    <!--- Return out. --->
    <cfreturn />
</cffunction>

<cffunction name="OnRequestStart" access="public" returntype="boolean" output="false">
    <cfargument name="TargetPage" type="string" required="true" />
     <cfset request.requeststart = Now() />
     <cfset sleep(1500)>
    <!--- Return out. --->
    <cfreturn true />
</cffunction>

<cffunction name="OnRequest" access="public" returntype="void" output="true">
     <cfargument name="TargetPage" type="string" required="true" />
     <cfset request.request = Now() />
     <cfset sleep(1500)>

    <!--- Include the requested page. --->
    <cfinclude template="#ARGUMENTS.TargetPage#" />

    <!--- Return out. --->
    <cfreturn />
</cffunction> 
```

我的 index.cfm 只包含请求范围的转储。如果我删除 orm 设置，一切都会按预期返回。但是，通过那里的设置，应用程序启动时设置的变量完全丢失，似乎 onApplicationStart 根本没有运行。

我正在通过更改请求之间的应用程序名称进行测试，但只是为了确定我也重新启动了服务。

我错过了什么吗？这是记录在案的行为吗？我在 Railo 上运行它——我没有在 ACF 上进行过广泛的测试，但最初的问题也发生在那里，所以我认为它是相同的原因。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:56:18.910

OnApplicationStart 仅在应用程序首次在内存中创建时运行，并且仅在应用程序的生命周期内运行一次，除非您明确调用 ApplicationStop(); 或者再次调用该方法等。另外，您设置的应用程序范围内的变量是一个请求范围变量，仅在一个请求的生命周期内存在。与 onSessionStart 相同，该请求变量仅在第一次创建用户会话时存在。

第一个请求：（ApplicationStart & SessionStart Fire）

```
struct: request
application     {ts '2013-03-20 18:50:17'}
cfdumpinited    false
pseudo  {ts '2013-03-20 18:50:20'}
session     {ts '2013-03-20 18:50:19'}

struct: session
cfid    5600
cftoken     a8bf96c34c2cac7a-68400880-E1E6-ACDF-3B204DBBCD9A04A9
session     {ts '2013-03-20 18:50:19'}
sessionid   TESTYMCTESTABLE_5600_a8bf96c34c2cac7a-68400880-E1E6-ACDF-3B204DBBCD9A04A9
urltoken    CFID=5600&CFTOKEN=a8bf96c34c2cac7a-68400880-E1E6-ACDF-3B204DBBCD9A04A9 
```

第二个请求：（应用程序/SessionStart 不触发）

```
struct: request
cfdumpinited    false
pseudo  {ts '2013-03-20 18:50:59'}

struct: session
cfid    5600
cftoken     a8bf96c34c2cac7a-68400880-E1E6-ACDF-3B204DBBCD9A04A9
session     {ts '2013-03-20 18:50:19'}
sessionid   TESTYMCTESTABLE_5600_a8bf96c34c2cac7a-68400880-E1E6-ACDF-3B204DBBCD9A04A9
urltoken    CFID=5600&CFTOKEN=a8bf96c34c2cac7a-68400880-E1E6-ACDF-3B204DBBCD9A04A9 
```

这是在 CF9 上测试的。

应用程序.cfm

```
<cfcomponent>
<cfscript>
    this.Name = "TestyMcTestable";
    this.ormenabled = true;
    this.datasource = 'cfartgallery';
    this.sessionManagement = true;
</cfscript>

<cfset request.pseudo = Now() />
<cfset sleep(1500)>

<cffunction name="OnApplicationStart" access="public" returntype="boolean" output="false">
    <cfset request.application = Now() />
    <cfset session.application = Now() />
    <cfset sleep(1500)>
    <!--- Return out. --->
    <cfreturn true />
</cffunction>

<cffunction name="OnSessionStart" access="public" returntype="void" output="false">
    <cfset request.session = Now() />
    <cfset session.session = Now() />
    <cfset sleep(1500)>
    <!--- Return out. --->
    <cfreturn />
</cffunction>

<cffunction name="OnRequestStart">

</cffunction>

</cfcomponent> 
```

或者，如果您将请求变量放在 OnRequestStart 中，它们每次都会在那里。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:31:40.667

原来这是 cflocation 设置的问题。在原始应用程序中，它指向的位置不正确。当我剥离 Application.cfc 进行测试时，我删除了此设置 - 没有意识到默认行为是从根目录遍历文件夹以查找持久性 CFC。然后似乎该应用程序在该过程中遇到了问题，该问题从 onApplicationStart 中被炸毁，但继续运行 Application.cfc 中的其他功能。

Railo 小组中的一个人发现了在 Hibernate 引擎读取的非持久 CFC 中使用伪构造函数的问题。我不确定这是否导致了这个问题，但似乎很有可能。

# c# - 删除带有特殊字符的行

> ID：15532964
> 
> 赞同：0
> 
> 时间：2013-03-20T19:30:41.233
> 
> 标签：c#, file, file-organization

我有一个这样的文本文件：

```
你好
这是文本文件
 * 你能告诉我什么是
 * Dnt 护理
 * 项目清单

```

我想删除所有带星号（*）的行，所以删除后文件中的结果是：

```
你好
这是文本文件

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T19:33:29.610

LINQ 使这变得简单：

```
using System.IO;
using System.Linq;

...

File.WriteAllLines("output.txt",
                   File.ReadLines("input.txt")
                       .Where(line => !line.Contains("*"))); 
```

或者作为两个语句 - 它仍然很懒，一次只读取一行：

```
var query = File.ReadLines("input.txt").Where(line => !line.Contains("*"));
File.WriteAllLines("output.txt", query); 
```

如果您确实需要*替换*原始文件，您可以*使用*上述方法，然后删除原始文件并将新文件移动到位，*或者*（如果文件足够小）读取整个文件以开始：

```
var lines = File.ReadAllLines("file.txt").Where(line => !line.Contains("*"));
File.WriteAllLines("file.txt", lines); 
```

请注意，因为它使用[`ReadAllLines`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)而不是[`ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)，它将一次性将*整个*文件读入内存。

这是假设您使用的是 .NET 4 或更高版本。如果你只使用 .NET 3.5，你仍然可以使用第二种形式，但你需要将结果转换为数组，然后再写出来：

```
var lines = File.ReadAllLines("file.txt")
                .Where(line => !line.Contains("*"))
                .ToArray();
File.WriteAllLines("file.txt", lines); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T19:37:37.050

假设您知道如何从文件中读取和写入内容，您可以使用 a`Regex`删除您不想要的行。这样做的好处是它要求 * 位于行的开头，而不是只出现在它的任何位置。

```
Regex.Replace(fileContents, "(?m)(^\s*\*.*$)", ""); 
```

这`Regex`在 * 前面有可选数量的空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T19:34:33.483

读取文件中的行：

```
string[] lines = File.ReadAllLines(filename); 
```

过滤掉带星号的行：

```
string[] filtered = lines.Where(s => !s.Trim().StartsWith("*")).ToArray(); 
```

将剩余的行写入文件：

```
File.WriteAllLines(filename, filtered); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T19:34:39.547

逐行查看字符串是否包含 *

```
while(Reader.CanRead())
{
   string currLine = reader.ReadLine();
   if(currLine.Contains("*") == false)
       list.Add(currLine);
} 
```

# android - 在手机启动时启动 android 应用程序

> ID：15532978
> 
> 赞同：0
> 
> 时间：2013-03-20T19:31:39.407
> 
> 标签：android

我希望在手机启动时显示我的 android 活动，但应用程序崩溃了，我也无法获取日志。这是代码清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
         <receiver android:enabled="true" android:name=".BootUpReceiver"
        android:permission="android.permission.RECEIVE_BOOT_COMPLETED">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver>

        <activity
        android:label="@string/app_name"
        android:name=".StartupActivity" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
           </activity>
    </application>

</manifest> 
```

引导接收器.JAVA

```
package com.example.sample;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class BootUpReceiver extends BroadcastReceiver{

     @Override
     public void onReceive(Context context, Intent intent) {

         Intent i = new Intent(context, StartupActivity.class); 
                i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(i); 

     }
    } 
```

STARTUPACTIVITY.JAVA

```
package com.example.sample;

import android.app.Activity;
import android.os.Bundle;

import com.android.R;

public class StartupActivity extends Activity {

     /** Called when the activity is first created. */
     @Override
     public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

     }
    } 
```

有人可以帮我解决这个问题吗

编辑：03-20 16:05:24.519：E/AndroidRuntime(2709)：java.lang.RuntimeException：无法实例化活动 ComponentInfo{com.android/com.android.StartupActivity}：java.lang.ClassNotFoundException：com.android .StartupActivity 在加载器 dalvik.system.PathClassLoader[/data/app/com.android-1.apk] 03-20 16:05:24.519: E/AndroidRuntime(2709): at android.app.ActivityThread.performLaunchActivity(ActivityThread. java:1573) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 03-20 16:05:24.519: E/AndroidRuntime(2709) : 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 03-20 16:05:24.519：E/AndroidRuntime(2709)：在 android.os.Handler。dispatchMessage(Handler.java:99) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 android.os.Looper.loop(Looper.java:130) 03-20 16:05:24.519: E/ AndroidRuntime(2709): 在 android.app.ActivityThread.main(ActivityThread.java:3687) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 java.lang.reflect.Method.invoke(Method.java:507) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842) 03-20 16:05:24.519: E/AndroidRuntime(2709): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:600) 03-20 16:05:24.519: E/AndroidRuntime(2709): at dalvik.system.NativeStart.main(Native Method) 03-20 16:05:24.519: E/AndroidRuntime(2709): Caused作者：java.lang。ClassNotFoundException: com.android.StartupActivity 在加载器 dalvik.system.PathClassLoader[/data/app/com.android-1.apk] 03-20 16:05:24.519: E/AndroidRuntime(2709): at dalvik.system.PathClassLoader .findClass(PathClassLoader.java:240) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:551) 03-20 16:05:24.519: E /AndroidRuntime(2709): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:511) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 android.app.Instrumentation.newActivity(Instrumentation.java: 1021) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565) 03-20 16:05:24.519: E/AndroidRuntime(2709):. .. 还有 11 个apk] 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在java.lang.ClassLoader.loadClass(ClassLoader.java:551) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:511) 03-20 16: 05:24.519: E/AndroidRuntime(2709): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 android.app.ActivityThread.performLaunchActivity (ActivityThread.java:1565) 03-20 16:05:24.519: E/AndroidRuntime(2709): ... 11 更多apk] 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在java.lang.ClassLoader.loadClass(ClassLoader.java:551) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:511) 03-20 16: 05:24.519: E/AndroidRuntime(2709): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 android.app.ActivityThread.performLaunchActivity (ActivityThread.java:1565) 03-20 16:05:24.519: E/AndroidRuntime(2709): ... 11 更多05:24.519: E/AndroidRuntime(2709): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:511) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 android.app.Instrumentation.newActivity (Instrumentation.java:1021) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565) 03-20 16:05:24.519: E/AndroidRuntime (2709): ... 11 更多05:24.519: E/AndroidRuntime(2709): 在 java.lang.ClassLoader.loadClass(ClassLoader.java:511) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 android.app.Instrumentation.newActivity (Instrumentation.java:1021) 03-20 16:05:24.519: E/AndroidRuntime(2709): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565) 03-20 16:05:24.519: E/AndroidRuntime (2709): ... 11 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:40:06.597

在 Android 3.0 及更高版本中，启动接收器将在至少手动启动一次 Activity 后运行。所以很可能你从来没有跑步。

您没有出现在网格中，因为您没有启动器活动。将此添加到清单中的活动标签

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

然后运行该应用程序一次。之后它应该可以工作。

# sql - 一条更新两张表的 SQL 语句

> ID：15532985
> 
> 赞同：1
> 
> 时间：2013-03-20T19:32:16.710
> 
> 标签：sql, tsql

我有一个返回唯一行的 SQL 脚本。我想更新该行中的一列和不同表中的计数器

我模拟了一种工作项队列，当从队列中选择一个元素时，它的状态设置为“正在执行”，但我还想跟踪选择了多少具有特定优先级的项目。

以下是没有用于计数的表的脚本

```
IF OBJECT_ID(N'[Queue]', N'U') IS NOT NULL 
    DROP TABLE [Queue]

CREATE TABLE [Queue](
    [ID]        int IDENTITY(1,1) NOT NULL,
    [Priority]  int NOT NULL default 3,
    [State]     int NOT NULL default 0,
    [Command]   nvarchar(max),    
    [Queued]    datetime2 NOT NULL default GetDate(),
    [Assigned]  datetime2 NULL
) 

INSERT INTO [Queue] ([Command], [Priority], [Queued])    VALUES 
    ('systeminfo', 1, DATEADD(MILLISECOND, -40, GETDATE())),
    ('systeminfo', 2, DATEADD(MILLISECOND, -30, GETDATE())),
    ('systeminfo', 1, DATEADD(MILLISECOND, -20, GETDATE())),
    ('systeminfo', 3, DATEADD(MILLISECOND, -20, GETDATE()))
GO

IF OBJECT_ID(N'Dequeue', N'P') IS NOT NULL 
    DROP PROCEDURE Dequeue
GO

CREATE PROCEDURE Dequeue
AS
    SET TRANSACTION ISOLATION LEVEL REPEATABLE READ

    UPDATE selected
    SET [State] = 1, Assigned = GETDATE()
    OUTPUT inserted.*
    FROM (
        SELECT TOP(1) * 
        FROM [Queue] 
        WHERE [State] = 0 
        ORDER BY [Priority] ASC, [Queued] ASC
    ) selected 
```

存储过程中的更新语句现在也应该执行类似的操作

```
UPDATE [Counter] 
SET [Counter].[Count] = [Counter].[Count] + 1 
WHERE [Counter][Priority] = selected.[Priority] 
```

我是否必须将选定的行临时存储在临时表或变量中，还是有更优雅的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:00:08.373

您可以将选项与表类型的变量一起使用

```
 DECLARE @Priority TABLE (Priority int)

  UPDATE selected
    SET [State] = 1, Assigned = GETDATE()
    OUTPUT inserted.Priority INTO @Priority(Priority)
    FROM (
          SELECT TOP(1) * 
          FROM [Queue] 
          WHERE [State] = 0 
          ORDER BY [Priority] ASC, [Queued] ASC
          ) selected

 UPDATE c
   SET c.[Count] = ISNULL(c.[Count], 0) + 1
   FROM [Counter] c JOIN @Priority p ON c.[Priority] = p.[Priority] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:39:43.940

您是否尝试过向 Queue 表添加触发器以在 Counter 表上运行更新？

# javascript - AutoScroll div 内容双向

> ID：15532986
> 
> 赞同：0
> 
> 时间：2013-03-20T19:32:22.837
> 
> 标签：javascript, jquery

我想做一个 div 自动滚动它的内容。内容高度是可变的。这是我设法解决的问题，但是如果我将高度设置为 .childElement.outerHeight 或高度，它只会滚动 78px，我不知道为什么。

```
 var element = jQuery('#content');
            setInterval(scrollDown(element), 1000)

        function scrollDown(element) {
            var childElement = element.children();
            scrollAmount = childElement.outerHeight();
            element.animate({ scrollTop: 1000 }, 3000, null, scrollUp(childElement));
        }
        function scrollUp(element) {
            element.animate({ scrollTop: 0 }, 500);
        }

        }); 
```

非常感谢任何帮助。

谢谢，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:19:22.693

我找到了解决方案。

主要问题是我使用`document.ready`了 ，而 div 的子元素没有包含所有项目，因此滚动高度不正确。我已经更改了它`window.load`并对滚动动画进行了一些更改。动画函数的参数也错误。

这是最终的，正常工作的片段。

```
jQuery(window).load(function () {
    var element = jQuery('#content');
    var childElement = element.children();
    var scrollAmount = childElement.height();
    var speedDown = scrollAmount * 20;
    var speedUp = speedDown * 0.3;

    scrollDown(element, scrollAmount, speedUp, speedDown);

    function scrollDown(element, scrollAmount, speedUp, speedDown) {

        element.animate({ scrollTop: scrollAmount }, speedDown, function () {
            element.animate({ scrollTop: scrollAmount * -1 }, speedUp);
            scrollDown(element, scrollAmount, speedUp, speedDown);
        });
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T18:04:52.490

试试这个，我在你的代码中有一小行用于自动滚动和向下不停，没有鼠标悬停超时停止：

```
jQuery(window).load(function () {
  var element = jQuery('#content');
  var childElement = element.children();
  var scrollAmount = childElement.height();
  var speedDown = scrollAmount * 50;
  var speedUp = speedDown * 0.9;

  scrollDown(element, scrollAmount, speedUp, speedDown);

  function scrollDown(element, scrollAmount, speedUp, speedDown) {

    element.animate({ scrollTop: scrollAmount }, speedDown, function () {
        element.animate({ scrollTop: scrollAmount * +3 }, speedUp);
        scrollDown(element, scrollAmount, speedUp, speedDown);
        element.animate({ scrollTop: scrollAmount * -3 }, speedDown);
    });
  }
}) 
```

# ruby-on-rails - Rails REST 使用 url 过滤索引

> ID：15532987
> 
> 赞同：0
> 
> 时间：2013-03-20T19:32:30.607
> 
> 标签：ruby-on-rails, json, rest

我正在尝试通过 REST 接口从 Rails 应用程序中提取 JSON 记录。我正在使用 RABL 创建 JSON。我想要大于指定 created_at 的记录。

在 wearquests 控制器中，我有这个：

```
def index
  if params[:created_at] != nil
    @worequests = Worequest.find(params[:created_at])
  else
    @worequests = Worequest.order(:created_at)
end 
```

如果我在浏览器中输入：

```
http://localhost:5000/worequests?created_at=2012-11-28%2016:37:29.253916 
```

我明白了：

```
Couldn't find Worequest with id=2012-11-28 16:37:29.253916 
```

我从 PG 表中复制了日期时间。

问题1

为什么找不到那个记录？

问题2

要使用大于，我应该能够在 URL 中使用类似的东西吗？

```
http://localhost:5000/worequests?created_at>2012-11-28%2016:37:29.253916 
```

问题3

如果我能正常工作，那么我将如何要求 JSON？

```
http://localhost:5000/worequests?created_at>2012-11-28%2016:37:29.253916.json 
```

更新1

谢谢 HungryCoder - 这现在有效：

```
http://localhost:5000/worequests?created_at=2013-01-01 
```

我得到一个大于该日期的记录的索引列表。

但是，我如何获得 JSON？

我试过这个：

```
http://localhost:5000/worequests?created_at=2013-01-01.json 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:37:34.657

**答案 1**

`find`方法需要记录的 ID。

如果要使用 created_at 字段进行过滤，请使用 where 或属性辅助方法

```
@worequests = Worequest.where("created_at = ?", params[:created_at]) 
```

或者，

```
@worequests = Worequest.find_by_created_at(params[:created_at]) 
```

或者，

```
@worequests = Worequest.find_all_by_created_at(params[:created_at]) 
```

`Worequest.find`类似于`Worequest.find_by_id`（假设 id 是主键的名称）

**回答 2** 您不能在查询字符串中使用这种格式。你可以把它放在单独的变量中，比如

```
http://localhost:5000/worequests?created_at=2012-11-28%2016:37:29.253916&compare=%3E 
```

所以，比较大于可能是这样的：

```
if params[:compare] == '>' 
  @worequests = Worequest.where("created_at > ?", params[:created_at])
end 
```

'%3E' 是 uri 编码版本`>`

**答案 3**

```
http://localhost:5000/worequests.json?created_at>2012-11-28%2016:37:29.253916 
```

# php - 深入 iframe

> ID：15532997
> 
> 赞同：0
> 
> 时间：2013-03-20T19:33:00.197
> 
> 标签：php, jquery, xml

我有一个大杂烩，它深入到 iframe 中以从 XML 结果中检索属性。（我这样做是为了避免从这个异地服务器获取数据所涉及的十亿个其他问题。）

```
<?php

    $link = mysqli_connect(//ALL THE CONNECTS!);
    mysqli_select_db(//THE_DB, $link);

    $query = "SELECT * FROM jos_mls AS mls
                INNER JOIN jos_activeagents AS active ON mls.MSTLISTBRD = active.AGENTUID
                LIMIT 10;";

    $result = mysqli_query($query);

    $array = array(); 
    $index = 0;

    while($row = mysqli_fetch_array($result))
    {
        $array[$index] = $row;
        $index++;
    }

    foreach ($array as $key => $value) {
        $mls = $value[1];
        $street = $value[5].' '.$value[6];
        $city = $value[9];
        $state = $value[10];
        $zip = $value[11];
        $url = "http://eligibility.sc.egov.usda.gov/eligibility/eligibilityservice?eligibilityType=Property&requestString=<?xml version='1.0'?><Eligibility xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:noNamespaceSchemaLocation='/var/lib/tomcat5/webapps/eligibility/Eligibilitywsdl.xsd'><PropertyRequest StreetAddress1='".$street."' StreetAddress2='' StreetAddress3='' City='".$city."' State='".$state."' County='' Zip='".$zip."' Program='RBS'></PropertyRequest></Eligibility>";
        $frame = '<iframe class="frame" mls="'.$mls.'" style="width: 10px; height: 10px;" src="'.$url.'"></iframe>';
        echo $frame;
    }

    mysql_close($link);
?>
<div id="test"></div>
<script type="text/javascript">
    $(document).ready(function(){
        $('.frame').each(function(){
            var mls = $(this).attr('mls'),
                usda = $(this).contents().find('Property').attr('Eligibility');
            $('#test').append(mls+' '+usda+'<br/>');
        });
    });
</script> 
```

iframe 中的数据如下所示...

```
<?xml version="1.0" encoding="UTF-8"?>
<Eligibility xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <Adjusted AnnualIncome="" TotalDeduction="" AdjustedIncome="" ElderlyDeduction="" YoungDeduction="">
        </Adjusted>
        <Section502Guaranted MaximumAdjusted="" Eligible="">
        </Section502Guaranted>
        <Section502Direct MaximumAdjusted="" Eligible="">
        </Section502Direct>
        <Property Eligibility="InEligible" MapURL="http://rdgdwe.sc.egov.usda.gov/eligibilitymaps/index.jsp?app=RBSIELG&amp;ADDRESS=7865 ILLINOIS CASEYVILLE&amp;STATE=IL&amp;ZIP=62232" />
        <ErrorResponse EngineId="" HostName="" MaxSeverity="" LogFile="" Class="" Module="" Severity="" Time="">
                <Message Code="" Type="" Text="" />
        </ErrorResponse>
</Eligibility> 
```

我需要节点 的`Eligibility`属性...**更新**对不起，过早地点击发送。我现在得到的结果只是“未定义”。`Property`**`$(this).contents().find('Property').attr('Eligibility')`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:46:25.243

您需要使用 JS 以正确的方式访问 iframe 并使用 XML DOM：

```
var f = $('.frame')[0];
var Property = f.contentDocument.getElementsByTagName('Property')[0];
var Eligibility = Property.getAttribute('Eligibility'); 
```

或类似的东西。当心：这只有在域、端口和协议匹配的情况下才有可能！（所有者文件和 iframe 文件。）

**编辑**啊，我现在看到 iframe 的 URL 很可能与您网站的不同。比这行不通。Javascript（浏览器）不允许跨站点脚本。出于非常好的安全原因。

您需要使用 PHP 阅读 XML。也容易得多：

```
$xml = simplexml_load_file($url); // requires allow_url_fopen to be on
$Eligibility = (string)$xml->Property['Eligibility']; 
```

（没有测试那个。）**