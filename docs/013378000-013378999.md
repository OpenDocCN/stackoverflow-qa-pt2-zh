# StackOverflow 问答 13378000-13378999

# android - ExceptionInInitializerError - ZBar Android

> ID：13378002
> 
> 赞同：5
> 
> 时间：2012-11-14T11:31:33.990
> 
> 标签：android, android-ndk

所以我只是创建了我的 Android 应用程序的一个分支，然后重新构建并运行它。当我尝试加载使用 ZBar 的屏幕时，一切都是好的例外，但我得到了一个`ExceptionInInitializerError`例外。

罪魁祸首代码似乎如下：

```
static {

    System.loadLibrary("iconv");
} 
```

我试过调试这个，但我似乎无法捕捉到上述异常。阅读后似乎与找不到本机库有关。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T12:37:04.180

我解决了。

这是由于 Android 项目文件夹中的 { x86, armeabi, armeabi-v7a } 文件夹中缺少本机代码（.so 文件）`libs`。

出于某种原因，颠覆忽略了这些文件，所以当我分支代码时它们不存在。

# c# - C#隐藏枚举集合的一部分/公共和私有选项可访问性的可见性

> ID：13378009
> 
> 赞同：2
> 
> 时间：2012-11-14T11:31:50.190
> 
> 标签：c#, .net, design-patterns, enums, scope

出现这种情况时，希望某些选项可以公开使用，而其他选项只能在程序集或类中分别在内部或私下可用。

这样做最优雅的方法是什么？

以下将是完美的，但不可能：

```
public enum EActions
{
    internal Shutdown,
    Read,
    Write,
    Update
}

...

public void DoSomething(EActions action, int param2, int param3)
{
    // act
}

...

public:

   DoSomething(Read/Write/Update); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:34:52.090

您可以使用可扩展枚举并根据需要控制可访问性。

[可扩展枚举](http://tigerang.blogspot.in/2007/05/simple-design-pattern-for-extensible.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T11:45:58.053

当您使用设计模式标记此问题时，我建议您将此枚举替换为抽象基类，并将项目替换为派生类。然后在基类中为每个子类创建静态实例。

```
public abstract class EAction
{
    public abstract void DoYourDeal();

    internal static readonly ShutDownEAction  Shutdown = new ShutDownEAction() ; 
    public static readonly ReadEAction Read = new ReadEAction() ;
    //...
}

    public class ReadEAction : EAction {...}
    public class WriteEAction : EAction {...}
    public class UpdateEAction : EAction {...}
    internal class ShutDownEAction : EAction {...}

public void DoSomething(EAction action)
{
    action.DoYourDeal();
} 
```

# javascript - jquery 对话框的输入字段在 Firefox 中冻结

> ID：13378014
> 
> 赞同：2
> 
> 时间：2012-11-14T11:32:04.107
> 
> 标签：javascript, jquery, jquery-ui, firefox, jquery-dialog

我在我的应用程序中添加了一些 jquery 对话框，在一种情况下，我打开了第一个对话框，并在进入某个字段时提示我一条包含一些服务器端消息的消息，并且该提示又是第二个 jquery 对话框。这意味着我有 2 个对话框相互打开。因此，当我单击最顶部（第二个）对话框时，两个对话框`$('#div1').dialog('close')`都`$('#div2').dialog('close')`被调用，我被重定向到另一个页面。现在出现了问题，我在新页面上关闭了两个对话框，现在如果我再次打开第一个对话框，它会打开但所有内容都冻结了。我的意思是它实际上不需要输入，但光标在第一个字段中不断闪烁。这只发生在 Firefox 中，在 Chrome 中它就像一个魅力。

# wpf - 将图像从桌面拖放到位图查看器

> ID：13378018
> 
> 赞同：0
> 
> 时间：2012-11-14T11:32:19.647
> 
> 标签：wpf, drag-and-drop, bitmapimage

我想从桌面拖动图像（人物图像），然后将其拖放到我的 wpf 应用程序中

任何资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T18:52:43.897

XAML：

```
<Window x:Class="_13378018.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" AllowDrop="True" Drop="OnDrop">
    <Grid>
        <Image x:Name="imageViewer"/>
    </Grid>
</Window> 
```

代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    private BitmapImage LoadImageFromFile(string filename)
    {
        using (var fs = File.OpenRead(filename))
        {
            var img = new BitmapImage();
            img.BeginInit();
            img.CacheOption = BitmapCacheOption.OnLoad;
            // Downscaling to keep the memory footprint low
            img.DecodePixelWidth = (int)SystemParameters.PrimaryScreenWidth;
            img.StreamSource = fs;
            img.EndInit();
            return img;
        }
    }

    private void OnDrop(object sender, DragEventArgs e)
    {
        var data = e.Data as DataObject;
        if (data.ContainsFileDropList())
        {
            var files = data.GetFileDropList();
            imageViewer.Source = LoadImageFromFile(files[0]);
        }
    }
} 
```

# git - 无法将 git repo 推送到 OpenShift

> ID：13378020
> 
> 赞同：0
> 
> 时间：2012-11-14T11:32:24.340
> 
> 标签：git, openshift

我正在尝试在 cloub 中推送 repo，但出现以下错误：

```
rockvilla@CodeMachine:/var/www/nisargaresort$ git push
Counting objects: 9, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 473 bytes, done.
Total 5 (delta 4), reused 0 (delta 0)
remote: restart_on_add=false
remote: httpd (no pid file) not running
remote: /usr/libexec/openshift/cartridges/abstract/info/lib/util: line 982:     /var/lib/openshift/0afc2085c8d341ef85f5c8057885035c/app-    root/runtime/repo/.openshift/action_hooks/post_stop_php-5.3: Permission denied
remote: Failed to stop php-5.3
To ssh://0afc2085c8d341ef85f5c8057885035c@nisargaresort-    syndication.rhcloud.com/~/git/nisargaresort.git/
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'ssh://0afc2085c8d341ef85f5c8057885035c@nisargaresort-    syndication.rhcloud.com/~/git/nisargaresort.git/' 
```

网上有没有与这个问题相关的东西？有人能帮我一下吗？提前thanx 如果我这样做

```
rhc app start -a nisargaresort -d

Contacting https://openshift.redhat.com
Problem reported from server. Response code was 500.

DEBUG:
Cartridge return code: 121

Exit Code: 143
api_c: placeholder
broker_c: namespacerhloginsshapp_uuiddebugaltercartridgecart_typeactionapp_nameapi
API version:    1.1.3

RESULT:
Node execution failure (invalid exit code from node).  If the problem persists please     contact Red Hat support. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:22:01.387

让我们使用这个论坛帖子来跟踪问题：

[https://openshift.redhat.com/community/forums/openshift/not-able-to-push-repo](https://openshift.redhat.com/community/forums/openshift/not-able-to-push-repo)

谢谢

# java - 在数组中搜索值的总和

> ID：13378021
> 
> 赞同：0
> 
> 时间：2012-11-14T11:32:27.007
> 
> 标签：java, algorithm, sorting

我有一个在文本文件中生成值的系统，其中包含如下值

> 第 1 行：可能的总值
> 
> 第 2 行：数组中的元素数量
> 
> 第 3 行（如果需要，额外的行）：数字本身

我现在正在考虑一种方法，我可以从数组中的第一个整数中减去总值，然后在数组中搜索余数，然后做同样的事情直到找到对。

另一种方法是在排列组合的基础上将数组中的两个整数相加并找到对。

根据我的分析，第一个解决方案更好，因为它减少了迭代次数。我的分析在这里是否正确，还有其他更好的方法吗？

编辑：我将在这里给出一个示例以使其更清楚第 1 行：200 第 2 行 = 10 第 3 行：10 20 80 78 19 25 198 120 12 65

现在这里的有效对是 80,120，因为它总和为 200（在第一行中表示为输入文件中可能的总值）并且它们在数组中的位置将是 3,8。所以找到这对我列出了我的方法在哪里我取第一个元素，然后用可能的 Total 值减去它，然后通过基本搜索算法搜索另一个元素。

使用此处的示例，我首先取 10 并用 200 减去它得到 190，然后搜索 190，如果找到则找到该对，否则继续相同的过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:52:34.540

您的问题含糊不清，但是如果您要在数组中查找总和为某个数字的对，则可以`O(n)`使用哈希表平均完成。

迭代数组，并为每个元素：
(1) 检查它是否在表中。如果是 - 停止并返回有这样一对。
(2) Else：插入`num-element`到哈希表中。

如果您的迭代在没有找到匹配项的情况下终止 - 没有这样的对。

**伪代码：**

```
checkIfPairExists(arr,num):
   set <- new empty hash set
   for each element in arr:
        if set.contains(element):
            return true
         else:
            set.add(num-element)
    return false 
```

“是否存在总和为某个数的子集”的一般问题是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)，并且被称为[**子集和问题**](http://en.wikipedia.org/wiki/Subset_sum_problem)，因此没有已知的多项式解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T11:52:19.393

如果您试图找到一对 (2) 数字总和为第三个数字，通常您会得到类似的结果：

```
for(i=0;i<N;i++)
   for(j=i+1;j<N;j++)
      if(numbers[i]+numbers[j]==result)
         The answer is <i,j>
         end 
```

这是O（n ^ 2）。但是，可以做得更好。

如果数字列表已排序（需要 O(n log n) 时间），那么您可以尝试：

```
for(i=0;i<N;i++)
   binary_search 'numbers[i+1:N]' for result-numbers[i]
   if search succeeds:
      The answer is <i, search_result_index>
      end 
```

也就是说，您可以逐步遍历每个数字，然后在剩余的列表中进行二进制搜索以查找其伴随数字。这需要 O(n log n) 时间。您可能需要自己实现`search`上面的函数，因为内置函数可能只是在 O(n) 时间内遍历列表，导致 O(n^2) 结果。

对于这两种方法，您都需要检查当前数字是否等于您的结果的特殊情况。

两种算法使用的空间都不会超过数组本身占用的空间。

为编码风格道歉，我对 Java 不是很熟悉，这里的想法很重要。

# c++ - 预处理器和模板参数或代码段的条件编译

> ID：13378025
> 
> 赞同：6
> 
> 时间：2012-11-14T11:32:53.503
> 
> 标签：c++, templates, c-preprocessor

如何使用预处理器条件编译模板函数？像那样（但它不起作用）：

```
template <bool var>
void f()
{
    #if (var == true)
    // ...
    #endif
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T11:35:49.010

你不能。顾名思义，预处理器在编译器之前处理源文件。因此，它不知道您的模板参数的值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T12:05:12.830

你不能用预处理器做到这一点。您所能做的就是将代码委托给单独的模板，如下所示：

```
template <bool var>
void only_if_true()
{}

template <>
void only_if_true<true>()
{
  your_special_code_here();
}

template <bool var>
void f()
{
  some_code_always_used();
  only_if_true<var>();
  some_code_always_used();
} 
```

当然，如果您需要在`f()`and之间共享信息`only_if_true()`（这很可能），您必须将其作为参数传递。或者创建`only_if_true`一个类并将共享数据存储在其中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T12:04:31.437

如果您需要使用模板参数生成不同的代码路径，您可以简单地使用`if`或其他 C++ 语句：

```
template <bool var>
void f()
{
    if (var == true) ｛
        // ...
    ｝
｝ 
```

编译器可以对其进行优化并生成不包含此类分支的代码。

一个小缺点是某些编译器（例如Msvc）会为始终不变的条件生成警告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-25T07:03:08.823

随着 C++17 的引入，[`if constexpr`](https://en.cppreference.com/w/cpp/language/if#Constexpr_If)您可以丢弃模板内的分支，就像条件编译允许的那样。

```
template <bool var>
void f()
{
    if constexpr (var == true) {
    // ...
    }
} 
```

分支内的代码必须在语法上正确，但在为 false 时不必格式正确`var`，因为它将被完全丢弃。

# php - 如何在 MediaWiki 模板中添加自定义标签以供我的扩展程序处理？

> ID：13378026
> 
> 赞同：1
> 
> 时间：2012-11-14T11:33:01.997
> 
> 标签：php, mediawiki, mediawiki-api

我想添加 3 个自定义标签，MediaWiki 管理员将添加到她的模板中（例如登录页面的 Userlogin.php 模板），这些扩展需要由我正在构建的扩展处理。标签的格式为`<mytag_forXaction>`, `<mytag_forYaction>`。当扩展通过这个解析时，它们将被替换为有效的 HTML 标记以显示框或图像或任何所需的目的。

到目前为止，我已经尝试过这样做：

```
if ( !defined( 'MEDIAWIKI' ) ) {
    die( 'This file is a MediaWiki extension, it is not a valid entry point' );
}

$wgExtensionCredits['parserhook'][] = array(
   'path' => __FILE__,
   'name' => 'Test Parser Function',
   'description' => 'A simple example parser function extension',
   'version' => 0.1,
   'author' => 'Me',
   'url' => 'https://www.mediawiki.org/wiki/Manual:Parser_functions',
);

$wgHooks['ParserFirstCallInit'][] = 'buttonParserSetup';
function buttonParserSetup( ) {
    global $wgParser;

    //apploginbtn will be the tag to be replaced
    $wgParser->setHook( 'apploginbtn', 'RenderAppLoginButton' );

    return true; // Return true so that MediaWiki continues to load extensions.
}

// Render the output of the parser function.
function RenderAppLoginButton( $input, $argv ) {
    $output = "SUCCESSFULLY REPLACED.";
    return $output;
} 
```

所以现在当我将标签 <apploginbtn /> 或 <apploginbtn></apploginbtn> 或 {{apploginbtn}} 或 {{#apploginbtn}} 添加到 Userlogin.php 文件的所需位置时，标签不会不会被替换。

任何有助于实现预期结果的帮助都会非常有帮助，因为我坚持了 2-3 天，并且文档根本​​没有帮助。

另外，我正在使用 MediaWiki 1.9.3，因为这是我需要开始支持的最低版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:23:47.373

使用[`UserLoginForm`钩子](http://www.mediawiki.org/wiki/Manual%3aHooks/UserLoginForm)。它使用用于创建登录表单的[`UserLogin`模板](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/core.git;a=blob;f=includes/templates/Userlogin.php)（[在 SVN 处](http://svn.wikimedia.org/doc/Userlogin_8php_source.html)）调用您的扩展功能。它是[QuickTemplate](http://www.mediawiki.org/wiki/Manual%3aQuickTemplate)的一个实例，您将能够从您的扩展代码中编辑/填充它。

如果您不针对已解析的 wikitext，请不要尝试构建解析器扩展（标签扩展）。

# twitter-bootstrap - 引导响应内容，按钮溢出

> ID：13378027
> 
> 赞同：0
> 
> 时间：2012-11-14T11:33:04.440
> 
> 标签：twitter-bootstrap, overflow, responsive-design

我对 Bootstrap 有问题，其中按钮在响应行中溢出。它在高分辨率下看起来不错，但是当它被调整大小时，按钮不会跟随并适合流体行，而是粘在容器之外（在本例中为 .content div）。

```
<div class="container">
<div class="row-fluid">
    <div class="content span8">
        <div class="row-fluid">
            <div class="btn-group span5 offset7">
                <a href="#" class="btn">Button one</a>
                <a href="#" class="btn">Button two</a>
                <a href="#" class="btn">Button three</a>
            </div>
        </div>
    </div>
</div>
</div>​ 
```

演示： http: [//jsfiddle.net/D9Xav/](http://jsfiddle.net/D9Xav/)（通过不同的分辨率拖动它）

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:26:36.513

这是因为您已将它们设为按钮组。调整窗口大小时，按钮组中的按钮不会堆叠。只需`btn-group`取出代码。

# facebook - 使用 Facebook fql 请求获取 pic_crop 时出现问题

> ID：13378029
> 
> 赞同：2
> 
> 时间：2012-11-14T11:33:12.463
> 
> 标签：facebook, facebook-fql

我正在尝试`pic_crop`使用 Facebook *fql*查询从我的个人资料图片中获取：

```
SELECT pic_crop from profile where id=me() 
```

我得到了这个：

```
 "uri": "http://profile.ak.fbcdn.net/hprofile-ak-prn1/XXXX, 
    "width": 320, 
    "height": 320, 
    "left": 0, 
    "top": 0, 
    "right": 1, 
    "bottom": 1 
```

如果我尝试为我的朋友得到相同的结果，我会得到相同的响应：`0,0,1,1`它代表了全貌，因此完全没用。

Facebook 是否改变了某些东西，因为我记得获得了 *pic_crop* 的真实值，例如：

```
"uri": "http://profile.ak.fbcdn.net/hprofile-ak-prn1/XXXX, 
"width": 320, 
"height": 320, 
"left": 0.11466, 
"top": 0.06897, 
"right": 0.88534, 
"bottom": 0.93103 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:42:59.720

如果用户在此更新后更改了他/她的个人资料图片，FB 似乎只会返回新的大裁剪图像。

编辑：返回的 img

```
https://graph.facebook.com/".$userid."/profile?fields=pic_crop,name" 
```

将很大并被裁剪，但图像返回

```
https://graph.facebook.com/'.$userid.'/picture?type=large 
```

如果用户最近没有更新他/她的个人资料图片，则不会很大并被裁剪

（感谢 Facebook 让我们的生活更轻松）

ps：这是我在这里的第一篇文章，我知道这不是答案，但我找不到响应按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:56:53.937

来自文档（由我突出显示）：

> pic_crop：一个对象，包含： uri：被查询对象**的最大方形头像的 URL。**width, height：这张图片的像素尺寸。**左、上、右、下：用户为此头像**选择裁剪的像素坐标。

看起来 Facebook 现在为个人资料图片的裁剪版本创建了一个方形图片 - 检查您从中获取的 URL，`pic_crop.uri`无论您实际上传的个人资料图片是什么样的，它都是方形图片。（从同一张表中比较可以看出差异。`pic_crop.uri`）`pic`

由于*这个*版本的图片现在看起来总是方形的，他们很可能已经放弃了裁剪坐标——“放弃”，因为仍然在交付它们，所以不要破坏依赖于这些属性的应用程序，但值实际上意味着“根本没有庄稼”。

# kml - 使用 KML 在地图上显示名称

> ID：13378030
> 
> 赞同：11
> 
> 时间：2012-11-14T11:33:12.480
> 
> 标签：kml, google-earth

我能够使用 KML 显示多边形、圆形等。现在我只想使用 KML 显示一些名称。这可能吗 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T23:02:08.643

如果您想禁止在 Google 地球地图上显示地标标签（通过 KML），那么您可以将[LabelStyle](https://developers.google.com/kml/documentation/kmlreference#labelstyle)添加到具有 0 比例尺的地标（请参见下面示例中的*sn_hide*样式）。如果您想在地图上隐藏标签名称，直到您将鼠标悬停在图标上，那么[StyleMaps](https://developers.google.com/kml/documentation/kmlreference#stylemap)是您最好的选择。

下面示例中的第一个地标的名称显示在位置面板中，但使用*LabelStyle*从地图中隐藏。第二个地标 #2 使用*StyleMap*隐藏标签，直到用户突出显示或将鼠标悬停在它激活显示标签的突出显示样式的图标上。第三个地标 #3 使用始终显示标签的默认样式。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
    <Document>
        <name>Hide and show labels</name>
        <Style id="sn_hide">
            <LabelStyle>
                <scale>0</scale>
            </LabelStyle>
        </Style>
        <Style id="sh_style">
            <LabelStyle>
                <scale>1.1</scale>
            </LabelStyle>
        </Style>
        <StyleMap id="msn_hide">
            <Pair>
                <key>normal</key>
                <styleUrl>#sn_hide</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#sh_style</styleUrl>
            </Pair>
        </StyleMap>

        <Placemark>
            <name>Placemark 1</name>
            <description>Label name always hidden</description>
            <styleUrl>#sn_hide</styleUrl>
            <Point>
                <coordinates>-119.232195,36.016021</coordinates>
            </Point>
        </Placemark>

        <Placemark>
            <name>Placemark 2</name>
            <description>Hover over place to show label</description>
            <styleUrl>#msn_hide</styleUrl>
            <Point>
                <coordinates>-119.2324,36.0155</coordinates>
            </Point>
        </Placemark>

        <Placemark>
            <name>Placemark 3</name>
            <description>Always showing</description>
            <Point>
                <coordinates>-119.232672,36.014837</coordinates>
            </Point>
        </Placemark>
    </Document>
</kml> 
```

# python - 双数组中的mongodb elemMatch

> ID：13378031
> 
> 赞同：1
> 
> 时间：2012-11-14T11:33:20.930
> 
> 标签：python, mongodb

我在尝试`$elemMatch`在双嵌套数组中使用时遇到问题：

假设我有这个`a`文件：

```
a = {'cart': [[{'id': 1, 'count': 1}, {'id': 2, 'count': 3}], [{'id': 1, 'count': 5}]]} 
```

我想在`id`1 且`count`大于 2 时选择一个文档：

```
db.cart.find_one({'cart.0.id': 1, 'cart.0.count': {'$gt': 2}}) 
```

但是这个查询会选择`a`出来。

然后我尝试了这些查询：

```
db.cart.find_one({'cart': {'$elemMatch': {'id': 1, 'count': {'$gt': 2}}}})
db.cart.find_one({'cart': {'$elemMatch': {'id': 2, 'count': {'$gt': 2}}}})
db.cart.find_one({'cart.0': {'$elemMatch': {'id': 1, 'count': {'$gt': 2}}}})
db.cart.find_one({'cart.0': {'$elemMatch': {'id': 2, 'count': {'$gt': 2}}}}) 
```

但都返回无。

那么是否`$elemMatch`支持嵌套数组匹配？如果是这样，我应该如何调整我的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:47:45.100

鉴于您在数组中有一个数组，我认为您可以尝试类似

```
db.cart.find_one({'cart': {'$elemMatch': { '$elemMatch' : {'id': 1, 'count': {'$gt': 2}}}}}) 
```

# jquery - JQuery - 每个 Droppable 必须接受一个且仅一个 Draggable

> ID：13378032
> 
> 赞同：1
> 
> 时间：2012-11-14T11:33:20.670
> 
> 标签：jquery, jquery-droppable

我对 JQuery 有一些问题 - Draggable/Droppable。我一直在谷歌搜索，也搜索了这个论坛。问题在一定程度上得到了解决，但我遇到的情况仍然会导致不需要的结果。

我在这个线程中提出了一些答案：[jQuery UI - Droppable only accept one draggable](https://stackoverflow.com/questions/3948447/jquery-ui-droppable-only-accept-one-draggable)。

所以我的任务基本上是建立一个拖放系统，其中只有**一个**Draggable 项目可以放在一个 Droppable 项目上。好的，首先，如果 Draggables 已经放出来了，你需要设置它们的 Droppables 是忙的。我为此使用了一个创建函数。

这是一些代码：

```
$('.droppable').droppable
({
    hoverClass: "ui-state-active",
    drop: function (event, ui) {
    $(this).droppable('option', 'accept', ui.draggable);
    },
    out: function (event, ui) {
        $(this).droppable('option', 'accept', '.draggable');
    },
    create: function (event, ui) {
        if ($(this).find('.draggable').length == 1) {
            $(this).droppable('option', 'accept', $(this).find('.draggable'));
        }
    },
});

$('.draggable').draggable
({
    revert: 'invalid',
    cursor: 'move',
    zIndex: 10000
}); 
```

我的问题：如果用户拖动一个项目并且未能将其放在接受的 Droppable 上，它会恢复。这意味着它没有被删除并且 drop: 函数永远不会运行。这意味着这个 Droppable 现在接受可拖动类的每个项目，即使那里有一个项目（恢复的项目）。对此可以做些什么？我希望你明白我在这里的意思。

我希望我现在已经完成了所有事情，如果没有，请告诉我。

谢谢！

# delphi - Firemonkey 中等效的 ColorToRGB 函数

> ID：13378033
> 
> 赞同：5
> 
> 时间：2012-11-14T11:33:25.000
> 
> 标签：delphi, firemonkey

FMX 中是否存在等效功能`ColorToRGB`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T14:15:03.763

您可以使用 TAlphaColorRec 获取 R、G、B 或 longint 值（在 Delphi XE3+FireMonkey2 中 - 我不确定 XE2）

试试这个，将两个按钮和一个 TRectangle 添加到 Firemonkey 表单并为 onClick 事件添加这些：

```
procedure TForm1.btnBrownClick(Sender: TObject);
var
  r: System.Byte;
  aColor: TAlphaColor;
  rgbValue: longint;
begin
  aColor:= TAlphaColorRec.Brown;  //$A52A2A
  r:= TAlphaColorRec(aColor).R;
  ShowMessage('Red component of Brown is: $'+IntToHex(r,2));
  Rectangle1.Fill.Color:= aColor;
  rgbValue:= TAlphaColorRec(aColor).Color;
  ShowMessage('Brown is: $'+IntToHex(rgbValue,8));
end;

procedure TForm1.btnRedderClick(Sender: TObject);
var
  aColor: TAlphaColor;
  rgbValue: longint;
begin
  aColor:= TAlphaColorRec.Brown;
  TAlphaColorRec(aColor).R:= 255; //$A52A2A becomes $FF2A2A
  Rectangle1.Fill.Color:= aColor;
  rgbValue:= TAlphaColorRec(aColor).Color;
  ShowMessage('Redder Brown is: $'+IntToHex(rgbValue,8));
end; 
```

# sockets - 套接字和文件描述符

> ID：13378035
> 
> 赞同：25
> 
> 时间：2012-11-14T11:33:51.930
> 
> 标签：sockets, file-descriptor

我正在学习 Unix 中的网络编程，目前正在尝试理解套接字和文件描述符的概念。据我了解，文件描述符只是指针数组（文件描述符表？）中的一个位置，这些指针指向内存中某处的文件。

套接字描述符是否与文件描述符共享此数组，但指针改为指向套接字。还是有其他仅用于套接字的东西？

这个数组对每个应用程序/进程都是唯一的吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-14T11:40:26.620

是的，套接字也是与文件相同的表的索引。至少对于 UNIX 系统（如 Linux 和 OSX），Windows 是不同的，这就是为什么您不能使用 eg `read`and`write`来接收和发送数据的原因。

每个进程都有自己的“文件”描述符表。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-09T13:12:03.550

Socket 只不过是 UNIX 操作系统中的一个文件。在 UNIX 操作系统中，甚至所有内容都被视为文件。每当我们创建一个套接字时，就会在文件描述符表中创建一个条目，其中包含标准 i/o 和标准错误以及其他详细信息。文件描述符充当指向文件表的指针，其中包含有关要执行的操作（即读取、写入等）的信息，并且它包含指向该特定文件的 inode 表的指针，并且您可能知道 inode 包含所有必要的文件的详细信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-11-20T16:32:14.653

套接字（描述符）和文件描述符之间没有区别。套接字只是文件的特殊形式。例如，您可以在文件描述符上使用的套接字描述符上使用相同的系统调用*read()*和*write() 。*

```
ssize_t send(int sockfd, const void *buf, size_t len, int flags); 
```

*send()*和*write()*之间的唯一区别是**标志**参数的存在。如果 flags 参数为零，则*send()*等效于*write()*。

# python - 如何在 Mac OSX 下安装 ijson python 包（find_library 问题？）

> ID：13378036
> 
> 赞同：3
> 
> 时间：2012-11-14T11:33:54.660
> 
> 标签：python, macos, python-2.7, yajl

我需要解析一个可能很大的 json 文件。所以我寻找解决方案来帮助我并找到了 ijson 库。似乎非常适合这个目的。

我使用 pypm（我使用 Active Python）、端口并直接使用提供的安装脚本安装了它。

但只要我

```
import ijson 
```

我收到一个错误

```
Exception: YAJL shared object not found. 
```

罪魁祸首似乎是函数 util.find_library('yajl')，它正在寻找一个名为 'yajl' 的模块——我也安装了这个模块！但是哪个 find_library 没有找到。

警告：我不是 UNIX（或 OSX）专家。我可以很好地处理 Python，但对于任何受过 UNIX/Linux 教育的人来说可能完全简单的事情，我完全无能为力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:02:23.923

从 ctypes[文档](http://docs.python.org/2/library/ctypes.html#finding-shared-libraries)：

> 在 OS X 上，find_library() 会尝试几种预定义的命名方案和路径来定位库，如果成功则返回完整路径名

查看[源代码](http://svn.python.org/view/python/trunk/Lib/ctypes/macholib/dyld.py?view=markup)，该`dyld_find`函数最终被调用：

```
def dyld_find(name, executable_path=None, env=None):
    """
    Find a library or framework using dyld semantics
    """
    name = ensure_utf8(name)
    executable_path = ensure_utf8(executable_path)
    for path in dyld_image_suffix_search(chain(
                dyld_override_search(name, env),
                dyld_executable_path_search(name, executable_path),
                dyld_default_search(name, env),
            ), env):
        if os.path.isfile(path):
            return path
    raise ValueError("dylib %s could not be found" % (name,)) 
```

我的 Mac 经验为零，所以我无法提供任何进一步的帮助。也许查看[dyld 文档](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/dyld.1.html)可以提供一些提示。

# java - Java - 将图像添加到 JButton

> ID：13378040
> 
> 赞同：2
> 
> 时间：2012-11-14T11:34:10.577
> 
> 标签：java, image, swing, button, jbutton

我想将图像添加到 JButtons。这是我正在使用的代码：

图像位于名为“Images”的文件夹中，该文件夹恰好位于应用程序的源包中。JButton 的大小已正确调整，但按钮中未显示任何图像。有人可以帮我解决这个问题吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:37:13.320

尝试`create_ImageIcon(Button_NewFile, "src/Images/New File.png");`

创建 时`ImageIcon`，它会搜索启动应用程序的相对路径。通常这是在**src**文件夹所在的文件夹中。但请记住，当您将其作为独立应用程序运行时。

# multicore - 一次性处理和转换大数据的工具

> ID：13378041
> 
> 赞同：1
> 
> 时间：2012-11-14T11:34:12.867
> 
> 标签：multicore, data-processing, format-conversion

我即将开始一个需要大量数据转换和处理操作的研究项目。一方面，数据相当庞大——原始数据集通常为 10GB——因此效率是一个问题。另一方面，这些操作中的许多都是一次性的，并且很少重新运行，因此构建可部署的应用程序是一种矫枉过正的做法。它*不是*一个用户应用程序，而主要是一个实验。

一些特点和限制：

1.  大量的链式格式转换——JSON 和 XML 到表格格式，然后是一些补丁，然后是文本索引，然后导出到其他格式，等等。
2.  我有一台多核机器，但没有几台机器，至少一开始是这样。
3.  数据不能作为一个整体放在主内存中，根据我的经验，需要利用多个内核。

有哪些推荐的工具来处理这样的项目？我的偏好是：

1.  轻松处理多种格式（JSON、XML、CSV）
2.  支持多个来源和接收器（文本文件、档案、数据库）
3.  使用多个核心
4.  尽可能少的管理、部署问题等。

编程语言不是问题，我可以管理 Windows 或 Linux。谢谢！

# .net - 在 GrGen.NET 中，规则右侧的执行方式是否有固定顺序？

> ID：13378043
> 
> 赞同：0
> 
> 时间：2012-11-14T11:34:16.920
> 
> 标签：.net, graph, transformation, rule, booggie

规则的右侧（无论是修改还是替换）可以包含各种语句，例如 eval、exec、emit、子模式、...

这些语句的执行顺序是否已定义，或者它们只是按照它们出现在右侧的顺序执行？

PS：GrGen.NET 是一个非常流行的基于 .NET 框架的图形转换库（在[http://grgen.net上查看）。](http://grgen.net)如果有人可以为 GrGen.NET 定义一个标签会很酷，我没有足够的声誉:-)。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:34:16.920

是的，有一个命令，这很重要！

例如，exec 语句总是在最后应用。因此，不能将 exec 中的任何变量传递给规则（参见[如何在规则中执行脚本并将值传递回 booggie 2 中的规则？](https://stackoverflow.com/questions/13348209/)）。

执行顺序可以在 GrGen.NET 的手册中找到，如下：

1.  从匹配中提取需要的元素
2.  创建新节点
3.  调用已使用子模式的重写代码（以及 evalhere、emithere、alternative Name、iterated Name）
4.  调用嵌套迭代的重写代码
5.  调用嵌套替代的重写代码
6.  重定向边缘
7.  重新输入（并合并）节点
8.  创建新边
9.  重新键入边
10.  创建子模式
11.  属性重新评估
12.  去除边缘
13.  删除节点
14.  删除子模式
15.  发射/执行
16.  返回

# java - Eclipse插件：如何为编辑器提供输入

> ID：13378046
> 
> 赞同：0
> 
> 时间：2012-11-14T11:34:26.097
> 
> 标签：java, eclipse, eclipse-plugin

我正在尝试开发一个插件，它将在树视图中呈现 XML 文件的元素，并且（双击时）应该在编辑器中打开文件。有问题的文件是插件资源。

我见过的大多数示例都将文件作为 IFile 从选择（选定元素）中获取；我的问题是我找不到提供该输入的方法。这是我已经尝试过的几个示例：

```
IProject project= ResourcesPlugin.getWorkspace().getRoot().getProject("the plugin project");
IFile file = testProject.getFile("test.xml"); 
```

和

```
IWorkspace workspace= ResourcesPlugin.getWorkspace();
IPath location= new Path(relative path); // local to the project directory
IFile file= workspace.getRoot().getFileForLocation(location); 
```

不知何故，找不到我正在寻找的文件。我设法通过从以下提供的流中读取文件来渲染树：

```
MyClass.class.getResourceAsStream(relativePath); 
```

我可以获取文件的 URL（使用 getResource()），但我不知道是否可以使用它来获取我需要的 IFile。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:45:25.213

您说`location`的是相对于项目目录，但是您尝试使用[workspace.getRoot().getFileForLocation()](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/resources/IWorkspaceRoot.html#getFileForLocation%28org.eclipse.core.runtime.IPath%29)来解决它，其 JavaDoc 说，

> 路径应该是绝对的；相对路径将被视为绝对路径。

# c++ - 对象内的数组

> ID：13378048
> 
> 赞同：2
> 
> 时间：2012-11-14T11:34:39.353
> 
> 标签：c++, arrays, object

可以创建这样的数组 - 如果在 arr 之前定义了大小。

```
const int size = 5;
int arr[size]; 
```

但这是不可能的，当 size 和 arr 在对象或结构中时：

```
struct A{
    A(int s) : size(s) 
    {}
    const int size;
    int arr[size]
};

A(5); 
```

为什么会这样？这似乎有点不合逻辑，因为在这两种情况下，数组的大小在编译时都是已知的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:37:27.787

> 在这两种情况下，数组的大小在编译时都是已知的。

不，`const`可以在运行时设置类成员。

事实上，即使是非成员也不总是有效：

```
int x;
cin >> x;
const int y = x;
int z[y];   //ILLEGAL 
```

只需使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T11:37:52.447

> 这似乎有点不合逻辑，因为在这两种情况下，数组的大小在编译时都是已知的。

编译器无法区分您的示例和此：

```
int i = std::rand(); // not a compile time constant
A a(i); 
```

另一方面，它需要在编译时知道数组的大小。的两个实例`A`不能有不同的大小。所以数组的大小不能依赖于可以在运行时设置的东西。

~~另一方面，C++11 提供[constexpr](http://en.wikipedia.org/wiki/C%2B%2B11#constexpr_-_Generalized_constant_expressions)，它允许您通过表达式传播编译时常量，并允许您使用它们来初始化数组。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T11:43:11.400

在第二种情况下，如果考虑到类定义数组的大小在编译时是未知的。

如果允许开设此类课程，您可以编写

```
A(5);
A(6); 
```

那将是不同大小的对象，这会破坏很多，例如，不可能将这些对象保存在同一个数组中。说这些对象具有不同的类型是合乎逻辑的，如果您制作类模板并将大小作为模板参数传递，这将是可能的。

如果您想使用不同大小的数组，请使用 std::vector 或模板。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T11:38:07.370

当编译器编译 A 时，实际上并不能保证它是编译时参数。它恰好是一个。我同样可以

```
int main() {
    std::cin >> i;
    A(i);
} 
```

如果你想给它传递一个 constexpr 参数，你需要使用一个模板。否则，您将需要使用像 std::vector 这样的运行时容器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T11:38:14.573

如果您想要一个可动态调整大小的数组，您应该使用`std::vector<int>`而不是原始数组。

你不能做你想做的事情，`class`或者`struct`因为你的`size`成员没有定义的价值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T11:38:24.933

因为在 C++ 中，当您使用大小参数初始化 C 样式数组时，大小必须是编译时整数常量。

否则编译器不知道编译时变量有多大。

如果你不喜欢这个，你还是应该使用`vector`。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-14T11:37:09.600

如果在编译时间之前不知道，则需要从堆中动态分配内存。

int* arr = new int [大小];

如果您不再需要内存，则应删除该数组。

删除[] arr;

正如托尼所说，最好使用标准库向量

# javascript - 如何在 Jquery 的 event.currentTarget 中选择/查找元素？

> ID：13378051
> 
> 赞同：5
> 
> 时间：2012-11-14T11:34:46.030
> 
> 标签：javascript, jquery, jquery-events

我正在使用这个：

```
$('.sizeChart').on('vclick', '.entry .ui-btn', function(e){

        console.log( e )
        console.log( e.currentTarget )
        console.log( $( e.currentTarget )
        console.log( $( e.currentTarget ).find('input.qtyInput') )

    var qty = $( e.currentTarget ).find('input.qtyInput');
    // do something

 }); 
```

哪个有效，但`$( e.currentTarget ).find(...)`对我来说似乎很尴尬。

我不能直接绑定到，`input`因为在 iOS3+4 上点击几下后这个绑定就会失效。`ui-btn`始终与最接近的作品绑定。

**问题：**
有没有比我使用的更好/更容易/更快的绑定方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T11:42:11.587

您可以只使用`this`而不是`e.currentTarget`：

```
$(this).find(...); 
```

[证明`event.currentTarget`和`this`是一样的。](http://jsfiddle.net/xcEdG/)

[文档](http://api.jquery.com/event.currentTarget/)还说：

> 此属性通常等于`this`函数的 。

* * *

就是这样。将 DOM 元素直接传递给 jQuery 并在其上使用 DOM 遍历方法是很常见的。

# sql - 跨表乘法

> ID：13378054
> 
> 赞同：3
> 
> 时间：2012-11-14T11:35:12.087
> 
> 标签：sql, database

这里我有3张桌子：

```
 Book [Id] [UnitPrice]
    BookOrder [Id] [BookId] [Quantity]
    BookInvoice [Id] [OrderId] [TotalPrice] 
```

然后，要求是从 Book 表中获取 UnitPrice。

```
 UnitPrice * Quantity = TotalPrice 
```

我是 SQL 的新手，这是我的代码：

```
 CREATE TRIGGER TR_TotalPrice
    ON BookInvoice *--Is that correct?*
    FOR UPDATE, INSERT
    AS
    UPDATE BookInvoice SET TotalPrice = Book.Price * BookOrder.Number
    FROM Book, BookOrder 
```

……

而且我不知道如何完成这些代码，希望大家能帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:43:15.873

您不必将**TotalPrice**存储在**BookInvoice** 表中，因为您可以使用其他表中的值得出该值。

```
select Book.Price * BookOrder.Quantity as TotalPrice 
from Book 
join BookOrder
on BookOrder.BookId=Book.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:40:13.280

你可以使用触发器

```
CREATE TRIGGER TR_TotalPrice ON BookInvoice
FOR UPDATE, INSERT
AS
begin
    update BookInvoice set 
        TotalPrice = B.Price * BO.Number
    from inserted as i
        inner join BookInvoice as BI on BI.Id = i.Id
        inner join BookOrder as BO on BO.Id = i.OrderId
        inner join Book as B on B.Id = BO.BookId
end 
```

或者你可以只使用视图，它更规范化，但如果书`Price`会改变，`TotalPrice`那本书的所有发票也会改变

```
create view vw_BookInvoice
as
   select
        BI.Id,
        BI.OrderId,
        B.Price * BO.Number as TotalPrice 
   from BookInvoice as BI
        inner join BookOrder as BO on BO.Id = i.OrderId
        inner join Book as B on B.Id = BO.BookId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T11:49:00.243

如果您必须使用触发器，则需要创建触发器以涵盖所有情况。例如，更新表 BookInvoice 以防一本书的 UnitPrice 发生变化。或者即使表 BookOrder 等中的 Quantity 发生变化。

而不是使用触发器，您应该可能使用立即计算您想要的值的视图。就像是：

```
SELECT b.id, bo.id, bo.quantity * b.uniprice TotalPrice
FROM BOOK b, BookOrder BO, BookInvoice BI
WHERE BO.Id = BI.OrderId
AND B.Id = BO.BookId 
```

# jquery - Mobiscroll changeWheel 示例？

> ID：13378056
> 
> 赞同：1
> 
> 时间：2012-11-14T11:35:27.370
> 
> 标签：jquery, html, mobiscroll

我正在使用 Mobiscroll 并希望根据第一个轮子的值更改第二个轮子中的值数组。

文档说 changeWheel 应该处理这个问题，但没有关于如何实现的示例。有谁知道 Mobiscroll inst.changeWheel 的正确语法？

# javafx-2 - JavaFX 在路径中播放带有空格的本地视频

> ID：13378057
> 
> 赞同：2
> 
> 时间：2012-11-14T11:35:28.547
> 
> 标签：javafx-2

我正在构建一个可以播放视频的小型应用程序，问题是，当我在路径中添加带有空格的视频时 - 它给了我一个错误：

```
java.net.URISyntaxException: Illegal character in opaque part at index 13: FILE:C:/Video menu/video/03.mp4 
```

这是我的场景：

```
 Group root = new Group();
    Scene scene = new Scene(root, 1280, 1024, Color.BLACK);
    String path = new String("FILE:C:/Video menu/touchMV/03.mp4");
    URI uri = new URI(path);
    root.getChildren().add(
            MediaViewBuilder.create()
                    .mediaPlayer(
                            MediaPlayerBuilder.create()
                            .media(
                                    new Media(
                                            path
                                    )

                            ).build()
                    ).build()
    );

    stage.setScene(scene);
    stage.show(); 
```

`Media(java.lang.String source)`文档说它有约束：

*   提供的 URI 必须符合 java.net.URI 要求的 RFC-2396。
*   仅支持 HTTP、FILE 和 JAR URI。

我试图传递一个 Media() 构造函数`(new URI(path)).toString();`，`(new URI(path)).toASCIIString()`但它没有用。将空格更改`%20`为效果不佳。

在这种情况下我能做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T11:47:27.143

我不知道您的问题的原因，但是如果您创建一个`File`first 并调用`File#toURI#toASCIIString`.

```
 File file = new File("C:\\Video menu\\touchMV\\03.mp4");
 String path = file.toURI().toASCIIString(); 
```

# iphone - 根据 UILabel 大小展开 UITableViewCell

> ID：13378060
> 
> 赞同：2
> 
> 时间：2012-11-14T11:35:46.390
> 
> 标签：iphone, objective-c, ios, uitableview, uilabel

我有一个`UITableView`4 `UILabel's`：标题、正文、作者和日期，他看起来像这样：

![细胞55](../Images/a2b84dd59666471a4cf45374c7fff093.png)

我想要完成的是，当用户单击单元格本身时，应将另一个标签添加到单元格中，“正文”标签和单元格应根据此标签大小展开。

像这样的东西：

![单元格大小](../Images/3dcc07ce4b58a8c3a46960e071ee36b1.png)

我怎样才能做到这一点？我搜索了stackoverflow，尝试了一些代码片段，但仍然没有找到正确的解决方案。

谢谢！

编辑 1：14.11.12 14:52

我设法用当前文本改变了 UILabel 的大小：

```
- (CGRect )resizeLabelByFontSize:(UILabel *)customCellLabel withMaxHeightSize:(CGFloat )maxHeight
{
    CGSize maximumLabelSize = CGSizeMake(239, maxHeight);

    CGSize expectedLabelSize = [customCellLabel.text sizeWithFont:customCellLabel.font constrainedToSize:maximumLabelSize lineBreakMode:customCellLabel.lineBreakMode];

    //adjust the label the the new height.
    CGRect newFrame = customCellLabel.frame;
    newFrame.size.height = expectedLabelSize.height;

    return newFrame;
} 
```

但是如何根据新的 UILabel 的大小来改变单元格的大小呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:57:39.317

通过查看有问题的图像

这是刚刚创建动态框架的方法，`UILabel`看看这个通过获取高度和宽度，`UIlabel`您可以计算整个高度并可以设置行高`UITableView.`

```
- (void)setLabeltextWithVerticalAlignTop:(NSString *)theText
{
CGSize labelSize;
// here  labelSize is hard-wired but could use constants to populate the size

labelSize = CGSizeMake(210, 129);//this is just for example
//now create the Size from textString SO that We  could assign this size to the Label.

 CGSize theStringSize = [theText sizeWithFont:lblTitle.font  constrainedToSize:labelSize lineBreakMode:lblTitle.lineBreakMode];
 lblTitle.frame = CGRectMake(lblTitle.frame.origin.x, lblTitle.frame.origin.y, theStringSize.width, theStringSize.height);
 lblTitle.text = theText;

} 
```

调用上述方法要设置描述标签的高度和宽度，您需要传递要在该描述标签上显示的文本。当您获得该标签的高度时，现在您可以在此基础上调整 TableView 行的高度。

**编辑：上面的代码只是为 UILabel 创建动态框架**

[你应该](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)看看这就是你要找的东西......!!!.here你也可以找到一个示例代码。

**编辑：当你编辑你的问题时，它只是你需要将其转换为可运行代码的逻辑。**

在您的代码中使用以下方法为每一行调用，并在其中进行一些计算。

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
CGFloat rowHeight=0.0;
//here it seems cell have 4 subview added on it.
//so if you could calculate the totla hieht of them.

//so what you really need to do.you just use hieght calculative Method for getting hieght of each of three UILabel
//you need to modify  `setLabeltextWithVerticalAlignTop` method .
rowHeight=   [self setLabeltextWithVerticalAlignTop:@"pass the correspondingText"];// suppose it returns some hieght for FisrtLabel.

//suppoose here you get the 20.0 height here

rowHeight= rowHeight+[self setLabeltextWithVerticalAlignTop:@"pass the correspondingText"]; 
```

// 假设它为 secondUIlabel 返回一些高度。

```
//suppoose here you get the 40.0 height here

rowHeight=  rowHeight+ [self setLabeltextWithVerticalAlignTop:@"pass the correspondingText"];

 // suppose it returns some hieght for ThirdUIlabel.
// suppoose here you get the 15.0 height here
//here you have totla height you just need to add some gapping floating value for all of three UIlabel.so that the could not overlap like as.

 rowHeight= rowHeight+20.0;

  //now you can return that total height
  return rowHeight;
 } 
```

**注意：这只是您需要将其转换为可运行代码的逻辑。我相信这会有所帮助。**

我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:44:50.237

实现以下方法

```
– (void) tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    // cast cell, add label, expand labels etc

    [tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return [indexPath isEqualTo:[tableView indexPathForSelectedRow]] ? /* expanded height */ : 80 /* normal height */;
} 
```

如果您希望该行即使在选择另一行后仍保持选中状态，则将自定义 BOOL 属性添加到您的自定义单元格，例如`expanded`，并使用它来确定高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T11:45:24.367

您可以使用 tableView:didSelectRowAtIndexPath

在该方法中，您可以创建代码以取消隐藏正文标签，调整其他所有内容的相对位置。计算新的行高，然后调用 Table View 的 reloadRowsAtIndexPath: withRowAnimation: 方法。

抱歉，如果没有太多细节，但希望这能让你走上正轨。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T11:46:41.093

好的，首先......要扩展你需要这样的东西：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

现在这是问题所在：

*   您应该计算 UITableViewCell 的大小（展开和非展开）
*   在您实际滚动时这样做可能会很昂贵并且会给您带来糟糕的体验

我的建议：

*   在你真正结束构建之前计算两边，`UITableView`因为你想要动态大小。如果您不这样做，并且所有单元格的扩展尺寸相同，您可以使用 lammmert 所说的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T12:26:50.407

`NSIndexPath *selectedRow;`

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
selectedRow = indexPath;
}

 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
 if(indexPath == selectedRow){
    //return your custom value
}
return 100;

} 
```

我认为它看起来像这样

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T08:37:48.617

因此，为了做到这一点，使用扩展的 UITableViewCell，我创建了 2 个不同的自定义单元格，在开始时表格显示第一个单元格，当我单击单元格时，表格显示第二个单元格。就这么简单——是的！

所以我有 UIViewController 和 UITableView 实现表委托方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    if([self.selectedCellIndexPath isEqual:indexPath])
    {
        return [self expandedCellHeight:indexPath];
    }
    else
    {
        return kRegularCellHeight;
    }
}

-(CGFloat)expandedCellHeight:(NSIndexPath *)indexPath
{
    CGSize maxSize = CGSizeMake(303, 200);
    NSString* bodyText  = [[self.data objectAtIndex:indexPath.row] objectForKey:kForumMessagesBody];
    CGSize fitSize = [bodyText sizeWithFont:[UIFont systemFontOfSize:13] constrainedToSize:maxSize lineBreakMode:UILineBreakModeWordWrap];

    CGFloat height = 384 - 69 + fitSize.height;
    NSLog(@"expandedHeight: %f",height);
    return height;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Answer cell
    if ([self.selectedCellIndexPath isEqual:indexPath])
    {
        cell = [tableView dequeueReusableCellWithIdentifier:[ForumCell expandedAnswerReuseIdentifier]];
        if (cell == nil)
        {
            cell = [ForumCell expandedAnswerCell];
        }
        self.expandedCell = cell;

    }
    else
    {
        cell = [tableView dequeueReusableCellWithIdentifier:[ForumCell reqularAnswerReuseIdentifier]];
        if (cell == nil)
        {
            cell = [ForumCell regularAnswerCell];
        }
    }

    cell.labelMedia.text = [self.data objectAtIndex:indexPath.row];

    return cell;
} 
```

我也有自定义单元格，名为`ForumCell.h`and的类`ForumCell.m`，它有 2 个不同的 XIB 文件：`ForumRegularAnswerCell.xib`并且`ForumExpandedAnswerCell.xib`，我在里面有以下代码`ForumCell.h`：

```
+ (NSString*)reqularAnswerReuseIdentifier
{
    return @"RegularAnswerCellReuseIdentifier";
}

+ (NSString*)expandedAnswerReuseIdentifier
{
    return @"ExpandedAnswerCellReuseIdentifier";
}

+ (ForumCell*)regularAnswerCell
{
    NSArray* objs = [[NSBundle mainBundle] loadNibNamed:@"ForumRegularAnswerCell" owner:self options:nil];
    ForumCell* result = [objs objectAtIndex:0];

    return result;
}

+ (ForumCell*)expandedAnswerCell
{
    NSArray* objs = [[NSBundle mainBundle] loadNibNamed:@"ForumExpandedAnswerCell" owner:self options:nil];
    ForumCell* result = [objs objectAtIndex:0];

    return result;
}

- (id)initWithCoder:(NSCoder *)decoder
{
    self = [super initWithCoder:decoder];
    if (self)
    {
        _originalCellHeight = self.frame.size.height;
        _originalLblBodyHeight = self.lblBody.frame.size.height;
    }
    return self;
} 
```

如果您愿意，也可以使用 2 个以上的 xib。但这是基础。

享受！

# delphi - ApplyUpdates 上的嵌套数据集插入顺序错误

> ID：13378065
> 
> 赞同：0
> 
> 时间：2012-11-14T11:36:10.640
> 
> 标签：delphi, foreign-keys, nested, datasnap, tclientdataset

我有 4 个这样的 ClientDataSet：

掌握

---细节1

---细节2

------SubDetail 2.1 - 这里有一个 Detail 1 的 FK

数据集上记录的插入顺序为：Master、Detail 1、Detail 2、SubDetail 2.1。

但是，当我调用 ApplyUpdates 时，数据库上的插入顺序是 Master、Detail 2、SubDetail 2.1、Detail 1。

所以我收到一个错误“外键引用目标不存在”，因为 SubDetail 2.1 上有一个 FK，它指向 Detail 1 上的一条记录，该记录尚未插入数据库。

我可以更改数据库上嵌套数据集的发布顺序吗？或者有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:00:38.267

您可以在数据集上使用以下内容

```
procedure TTemplate.MasterpostBeforeInsert(DataSet: TDataSet);
begin
  if Assigned(Dataset.DataSource) and Assigned(Dataset.DataSource.DataSet) then
    if Dataset.DataSource.DataSet.State in [dsInsert] then 
      Dataset.DataSource.DataSet.Post;
end; 
```

# wpf - WPF Work-In-Progress 动画不显示数据绑定更新

> ID：13378067
> 
> 赞同：2
> 
> 时间：2012-11-14T11:36:13.873
> 
> 标签：wpf, data-binding, progress

我有一个我编写的助手类，可用于在我的 GUI 上运行长时间运行的任务。它所做的是使用样式来显示“工作”动画并淡出内容，以便在任务运行时，用户可以看到正在进行的事情。

我的问题是，当长时间运行的任务完成时，它会将内容淡入并隐藏工作动画 - 这是它应该做的，但是因为我使用 MVVM 并且主要是数据绑定用于我的所有内容显示，所以更新到GUI 组件与长时间运行的任务分开发生。即数据绑定 OnPropertyChanged("") 事件触发，然后在长时间运行的任务完成后由 GUI 线程拾取。但问题是当长时间运行的任务完成时，Worker Animation 会关闭，但在数据绑定更新之前。

所以最终的结果是，当任务运行时，工作人员动画按预期显示，但是对于所有树数据的大型数据集，数据绑定更新需要 4-5 秒甚至更长的时间，在此期间，应用程序不会在“工作动画模式”中，只是冻结。

有没有一种方法可以让我的工作动画继续运行，不仅适用于 Long running Method，而且适用于来自 OnPropertyChanged 的​​相关数据绑定更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:07:41.813

考虑使用Extended WPF 工具包中的[BusyIndi​​cator](http://wpftoolkit.codeplex.com/wikipage?title=BusyIndicator&referringTitle=Home)。它应该提供您描述的功能。它具有 IsBusy 属性，您可以将其绑定到 ViewModel 中的属性，并在所有工作完成后将其设置为*False 。*您始终可以像使用其他控件一样更改 BusyIndi​​cator 的样式。在我的解决方案中，我总是将此控件与*System.ComponentModel*中的 BackgroundWorker 类一起使用，并且我通常 在*RunWorkerCompleted*的末尾设置*IsBusy=false*

 *```
 private void LongRunningMethod()
    {
        this.IsBusy = true;
        var worker = new BackgroundWorker();
        worker.DoWork += this.LongMethodDoWork;
        worker.RunWorkerCompleted += this.RunWorkerCompleted;
        worker.RunWorkerAsync();
    }

    private void LongMethodDoWork(object sender, DoWorkEventArgs doWorkEventArgs)
    {
        ...
    }

    private void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs runWorkerCompletedEventArgs)
    {
        ...
        this.IsBusy = false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:02:44.797

谢谢大家的回答。我实际上遇到了一个可能有点争议的解决方案，因为有些人会认为它有点像黑客，但它完全符合我的要求，而且似乎没有其他方法可以做到，所以对我来说，这是一个代码解决方案，而不是一个黑客。

我正在使用我从 codeproject 下载的 WPFBackgroundProgressIndicator 开源项目（我认为），它可以选择在主要内容中显示繁忙指示器，带或不带淡出，或作为弹出窗口，它作为后台线程运行理想以及我为什么选择它。

问题是，当您运行长时间运行的方法时，代码执行同步完成，但所有绑定 OnPropertyChanged("") 更新异步运行并在 Dispatcher 线程上排队，因此您的工作方法在 WPF 控件有机会调用之前完成依赖属性的 Getter，以检索新值。您需要做的是有效地“阻塞”，直到所有 Dispatcher 事件完成，这就是为什么不是每个人都会喜欢这个解决方案，因为它“阻塞”，但这正是我想要做的。我想阻止应用程序直到完全更新完成，因为我不希望用户在数据仍在呈现时能够在视觉上做任何事情，所以这是我的要求。干净的阻塞比混乱的交互更可取。

所以不管你信不信，解决方案是在工作方法调用之后的一行代码。如下。

```
Application.Current.Dispatcher.Invoke(new Action(() => { }), DispatcherPriority.ContextIdle, null); 
```

正如您所看到的那样，它有效地将新任务排队到 Dispatcher 线程并阻止当前代码执行直到它完成，但是当您给它最低优先级时，此调用将等到所有 OTHER Dispatcher 执行完成，即所有渲染完成。渲染完成后，将执行此行，您将在所有渲染完成后退出。我在上下文中使用它的完整方法如下。我欢迎您对这种方法的想法和讨论。

```
public void LongRunningTaskWithFade(BusyDecorator busy, Action longTask)
        {
            if (loading) return;
            loading = true;

            busy.FadeTime = TimeSpan.Zero;
            busy.IsBusyIndicatorShowing = true;

            // in order for setting the opacity to take effect, you have to delay the task slightly to ensure WPF has time to process the updated visual
            Application.Current.Dispatcher.BeginInvoke(new Action(() =>
            {
                try
                {
                    longTask();
                    Application.Current.Dispatcher.Invoke(new Action(() => { }), DispatcherPriority.ContextIdle, null); 
                }
                finally
                {
                    HideBusyDisplay(busy);                    
                }
            }), DispatcherPriority.Background);
        } 
```*

# c# - 如何以编程方式加载和合并同一文件夹中的 2 个 web.config 文件？

> ID：13378070
> 
> 赞同：0
> 
> 时间：2012-11-14T11:36:27.683
> 
> 标签：c#, asp.net, web-config, configurationmanager

我有一个 asp.net 应用程序，根目录中有一个 web.config。

我想在根目录中有另一个web.config，例如custom.web.config。

web.config 是由外部工具生成的，我无法更改；我会将我们的自定义配置设置放在 custom.web.config 文件中。

ASP.NET 显然默认只加载第一个 web.config。

如何配置这些以便 ASP.NET 结合两个配置文件并同时使用它们？

我不能将 custom.web.config（名为 web.config）放在子文件夹中，因为在这种情况下，只有该子文件夹中的页面使用它。

我想也许有一种方法可以在运行时同时加载 web.config 和 custom.web.config 文件并将它们合并，以便 ConfigManager 始终查看两者。

这怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:13:24.360

在主配置文件中使用[ConfigSource](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx)来引用第二个配置文件中定义的部分。

看看[这个](http://weblogs.asp.net/fmarguerie/archive/2007/04/26/using-configsource-to-split-configuration-files.aspx)例子

# microsoft-metro - 在 Windows 8 应用程序中，单击组时，如何显示具有可单击图块的页面

> ID：13378073
> 
> 赞同：0
> 
> 时间：2012-11-14T11:36:42.863
> 
> 标签：microsoft-metro

我有一个 Windows 8 网格应用程序，但是，当我单击一个组时，我不想要 GroupDetailPage。相反，我需要一个包含多个可点击链接的图块的页面。类似于应用商店的东西，当你点击一个特定的组时，比如游戏，你会得到所有的游戏，排列在一个网格中，它是一个可点击的链接。

很感谢任何形式的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:00:28.473

您可以修改现有的 GroupDetailPage 删除有关组的内容，只留下项目列表。或者您可以修改组标题的目标单击到您生成的全新页面。

您使用的是 C#/XAML、HTML5/JS 吗？

如果您正在寻找模仿平铺动画并显示 MetroJS 库非常酷： [http ://www.drewgreenwell.com/projects/metrojs](http://www.drewgreenwell.com/projects/metrojs)

# c++ - C ++：将隐式复制结构

> ID：13378077
> 
> 赞同：2
> 
> 时间：2012-11-14T11:37:10.753
> 
> 标签：c++, struct, copy, pass-by-reference, null-pointer

我对 C++ 比较陌生，我想知道在以下情况下是否复制了结构：

```
struct foo {
  int i;
  std::vector<int> bar;
}

class Foobar {
  foo m_foo;

  void store(foo& f) {
    this->m_foo = f;
  }
}

void main() {
  Foobar foobar;
  {
    foo f;
    f.i = 1;
    f.bar.insert(2);
    foobar.store(f);
  }
  // will a copy of f still exist in foobar.m_foo, or am I storing a NULL-Pointer at this point?
} 
```

我问这个问题的原因是我最初是一个 .NET 开发人员，如果你将它们传递给一个函数（而不是类），那么在 .NET 结构中它们将被复制。我很确定如果 store 没有声明为通过引用获取 f ，它将被复制，但我无法更改此代码。

**编辑：**更新了代码，因为我不知道这`vector.insert`会影响我的问题。就我而言，我将结构存储为类中的成员，而不是向量。所以我的问题真的是：将`f`被复制`this->m_foo = f;`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T11:42:34.253

简短的回答：是的。

长答案：您必须获得一个指向堆栈分配结构的指针，然后让该结构超出范围才能在向量中得到一个悬空引用......但即使那样，您也不会存储一个`NULL`。C 和 C++ 指针是简单的东西，如果您的代码没有覆盖它们，那么在该内存位置变得无效后很长一段时间内，它们仍将继续指向该内存位置。

还可能值得注意的是，`std::vector`有一组与其相关的复制和移动函数将在这种情况下被隐式调用，因此`bar`结构内的向量也将与简单整数一起被复制`i`。标准库类往往写得很好，但其他人的代码没有这样的保证！

现在，关于您的编辑：

```
class Foobar {
  foo m_foo;

 void store(foo& f) {
    this->m_foo = f;
  }
} 
```

You will *still* not have any problems with the `foo` instance stored in `m_foo`. This is because `this->m_foo = f` invokes a copying operation, as `m_foo` is not a variable of a reference or pointer type. If you had this instead: `foo& m_foo` then you would run into difficulties because instead of copying a `foo` instance you are instead copying a *reference* to a `foo` instance, and when that instance goes out of scope, the reference is no longer valid.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T11:40:16.583

是的，将在以下函数中复制结构：

`foos.insert(f);`

制作副本时，您将不会存储空指针/空引用。

但是，就像您所说的那样，当您调用时它*不会*被复制，`store(f);`因为函数接受参数作为参考。

您的编辑仍会复制 Foo. 您正在将变量的一个实例分配给变量的另一个实例。您*没有*做的是将一个指针（C# 中的引用）分配给另一个指针。您可能需要阅读 C++ 对象实例、指针和引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T11:39:47.737

`f`期间制作了一份副本`foos.insert(f)`

```
void store(foo& f) {
  foos.insert(f);
}

void main() {
  {
    foo f;
    f.i = 1;
    f.bar.insert(2);
    store(f);
  }
  // at this place, local variable `f` runs out of scope, it's destroyed and cleaned up
  // foos is holding the copy of `f`
} 
```

# r - R 通配符、sapply 和 as.factor

> ID：13378079
> 
> 赞同：0
> 
> 时间：2012-11-14T11:37:14.140
> 
> 标签：r, sapply

我想将类型更改为名称与特定模式匹配的数据框中所有变量的因子。

所以在这里我试图将类型更改为所有变量的因子，这些变量的名称以*dataframe*中的namestub 开头`df`。

```
attach(df)    
sapply(grep(glob2rx("namestub*"), names(df)), as.factor) 
```

但这不起作用，因为

```
> levels(df$namestub1)
NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:50:32.703

```
## Make a reproducible example
df <- data.frame(namestubA = letters[1:5], B = letters[5:1], 
                 namestubC = LETTERS[1:5], stringsAsFactors=FALSE)

## Get indices of columns to convert
ii <- grep(glob2rx("namestub*"), names(df))

## Convert and replace the indicated columns
df[ii] <- lapply(df[ii], as.factor) 
```

# oracle - 我将如何更正此问题以使其不会获取多于一条记录？

> ID：13378080
> 
> 赞同：0
> 
> 时间：2012-11-14T11:37:12.910
> 
> 标签：oracle, function, plsql, triggers, procedure

此过程代码用于对新插件应用折扣。我遇到的问题是正在获取太多记录。我将如何解决这个问题？我使用触发器还是函数？

好的，我已经创建了一个触发器，但我得到了 PLS-00103：在预期以下情况之一时遇到符号“=”：：=。(@%;

```
CREATE OR REPLACE PROCEDURE CHECK_DISCOUNT
AS

V_COUNT NUMBER;
V_C_NO APPOINTMENT.C_NO%TYPE;
V_BILL APPOINTMENT.BILL%TYPE;

BEGIN

SELECT C_NO,COUNT(C_NO)
INTO V_C_NO,V_COUNT
FROM APPOINTMENT
GROUP BY C_NO;

SELECT BILL
INTO V_BILL
FROM APPOINTMENT;

IF V_COUNT=3 THEN
V_BILL:=V_BILL * 0.9;
END IF;

UPDATE APPOINTMENT
SET BILL = V_BILL 
WHERE C_NO=:new.C_NO;
COMMIT;

END;
/

Create or replace TRIGGER CHECK_DISCOUNT 
BEFORE INSERT OR UPDATE OF C_NO ON APPOINT     
FOR EACH ROW 

DECLARE CURSOR C_APPTMENT IS 
SELECT C_NO,COUNT(C_NO) 
FROM APPOINTMENT GROUP BY C_NO; 

VISIT NUMBER; V_C_NO APPOINTMENT.C_NO%TYPE; 
V_BILL APPOINTMENT.BILL%TYPE; 
V_TEN NUMBER(3):=0.9; 

BEGIN 
   LOOP 
            OPEN C_APPTMENT; FETCH C_APPTMENT INTO V_C_NO, VISIT;
            EXIT WHEN C_APPTMENT%NOTFOUND; 

  SELECT BILL INTO V_BILL FROM APPOINTMENT; 
  IF VISITS =3 THEN V_BILL=V_BILL * V_TEN 
  WHERE :NEW.C_NO=V_C_NO; 
  UPDATE APPOINTMENT SET BILL:= V_BILL 
  WHERE:NEW.C_NO=V_C_NO; 
    END LOOP; 
      CLOSE C_APPTMENT; 
```

结尾;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:54:55.953

使用 select ... into 时，您必须确保只选择一行。通常，您将添加带有主键或唯一键列的 where 子句。这样您就可以确保只选择一行。您还必须提供未选择行的实例。添加异常处理程序以捕获 no_data_found 异常

```
declare
   v_bill appointment.bill%type;
begin
   begin
      select a.bill
        into v_bill
        from appointment a
       where a.id = :my_id;  -- assuming ID is a primary key colomn
   exception
      when no_data_found then
         null;
   end;

   if v_bill is not null
   then
      --.. do something with v_bill
   end if;
end; 
```

# iphone - 通过webservice将uiimage上传到服务器时出现NSXMLParserErrorDomain错误4

> ID：13378083
> 
> 赞同：1
> 
> 时间：2012-11-14T11:37:20.553
> 
> 标签：iphone, objective-c, ios, nsxmlparser, nsxmlparsererrordomain

我正在尝试将图像从 iPhone 发布到网络服务。我将首先发布代码，然后解释我尝试过的所有内容：

```
NSData *Imagedata;
Imagedata = UIImagePNGRepresentation(imagee);
strSoapMsg = [[NSString alloc] initWithFormat:
                  @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                  "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap12=\"http://www.w3.org/2003/05/soap-envelope\">"
                  "<soap12:Body>"
                  "<SaveMerchantImageFromIPhone xmlns=\"http://tempuri.org/\">"
                  "<byteArrayImage>%@</byteArrayImage>"
                  "<ProfileID>%d</ProfileID>"
                  "</SaveMerchantImageFromIPhone>"
                  "</soap12:Body>"
                  "</soap12:Envelope>", [NSData dataWithData:Imagedata],merchantProfileID];
// strSoapMsg = [[NSString alloc] initWithFormat:@"%@,%d",Imagedata,merchantProfileID];
//---print it to the Debugger Console for verification---
NSLog(@"soapMsg..........%@",strSoapMsg);

NSString *str_url = [ NSString stringWithFormat:@"%@user.asmx",xmlWebservicesUrl];
NSURL *url = [NSURL URLWithString:str_url];
req = [NSMutableURLRequest requestWithURL:url];

//---set the headers---

NSString *msgLength = [NSString stringWithFormat:@"%d",[strSoapMsg length]];
[req addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[req addValue:@"http://tempuri.org/SaveMerchantImageFromIPhone"  forHTTPHeaderField:@"SOAPAction"];
[req addValue:msgLength forHTTPHeaderField:@"Content-Length"];

//---set the HTTP method and body---

[req setHTTPMethod:@"POST"];
[req setHTTPBody: [strSoapMsg dataUsingEncoding:NSUTF8StringEncoding]];

conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];
if (conn)
{
    webSaveMerchantImageFromIphone = [[NSMutableData data] retain];
} 
```

我认为它失败了，因为`%@`格式说明符需要一个对象。但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:34:21.647

You are probably parsing an empty xml as your request is sent asynchronously and you don't wait for the response.
You should use the delegate methods
`-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data` to concatenate the data you receive and
`-(void)connectionDidFinishLoading:(NSURLConnection *)connection` to start the parser.
Have a look at the NSURLConnectionDelegate protocol: [https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:25:54.737

这是我与 Web 服务交互的方式。绝对不是唯一的做事方式，也可能不是最流行的，但高度安全且速度非常快。首先，我的网络服务是基于 POST 的。所有参数都发布到 web 服务，这使我具有跨平台独立性（我使用基于 PHP 和 .NET 的 web 服务）。我在所有 Web 服务调用中包含一个 APIKey，它维护安全性，因为只有 iOS 应用程序可以与 Web 服务通信。它还使我能够更改 APIKey 并在需要时强制用户更新到较新版本的应用程序（我还没有做过，但如果我需要使用它，它就在那里。这个类依赖并使用 AFNetworking。我使用了几个不同的库进行网络通信（包括 iOS 包含的框架），

这是我的类的接口文件：

```
/*
 NetworkClient.h

 Created by LJ Wilson on 2/3/12.
 Copyright (c) 2012 LJ Wilson. All rights reserved.
 License:

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software 
 and associated documentation files (the "Software"), to deal in the Software without restriction, 
 including without limitation the rights to use, copy, modify, merge, publish, distribute, 
 sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is 
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or 
 substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT 
 NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
 DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT 
 OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

#import <Foundation/Foundation.h>

extern NSString * const APIKey;

@interface NetworkClient : NSObject

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                          block:(void (^)(id obj))block;

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
                          block:(void (^)(id obj))block;

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
             alertUserOnFailure:(BOOL)alertUserOnFailure
                          block:(void (^)(id obj))block;

+(void)processFileUploadRequestWithURL:(NSString *)url 
                             andParams:(NSDictionary *)params 
                              fileData:(NSData *)fileData 
                              fileName:(NSString *)fileName
                              mimeType:(NSString *)mimeType 
                                 block:(void (^)(id obj))block;

+(void)handleNetworkErrorWithError:(NSError *)error;

+(void)handleNoAccessWithReason:(NSString *)reason;

@end 
```

和实施文件：

```
/*
 NetworkClient.m

 Created by LJ Wilson on 2/3/12.
 Copyright (c) 2012 LJ Wilson. All rights reserved.
 License:

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software 
 and associated documentation files (the "Software"), to deal in the Software without restriction, 
 including without limitation the rights to use, copy, modify, merge, publish, distribute, 
 sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is 
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or 
 substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT 
 NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
 DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT 
 OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

#import "NetworkClient.h"
#import "AFHTTPClient.h"
#import "AFHTTPRequestOperation.h"
#import "SBJson.h"

NSString * const APIKey = @"YourAPIKeyGoesHereIfYouChooseToUseIt";

@implementation NetworkClient

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                          block:(void (^)(id obj))block {

    [self processURLRequestWithURL:url andParams:params syncRequest:NO alertUserOnFailure:NO block:^(id obj) {
        block(obj);
    }];
}

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
                          block:(void (^)(id obj))block {
    [self processURLRequestWithURL:url andParams:params syncRequest:syncRequest alertUserOnFailure:NO block:^(id obj) {
        block(obj);
    }];
}

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
             alertUserOnFailure:(BOOL)alertUserOnFailure
                          block:(void (^)(id obj))block {

    // Default url goes here, pass in a nil to use it
    if (url == nil) {
        url = @"DefaultURLGoesHere";
    }

    NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithDictionary:params];
    [dict setValue:APIKey forKey:@"APIKey"];

    NSDictionary *newParams = [[NSDictionary alloc] initWithDictionary:dict];

    NSURL *requestURL;
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:requestURL];

    NSMutableURLRequest *theRequest = [httpClient requestWithMethod:@"POST" path:url parameters:newParams];

    __block NSString *responseString = @"";

    AFHTTPRequestOperation *_operation = [[AFHTTPRequestOperation alloc] initWithRequest:theRequest];
    __weak AFHTTPRequestOperation *operation = _operation;

    [operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        responseString = [operation responseString];

        id retObj = [responseString JSONValue];

        // Check for invalid response (No Access)
        if ([retObj isKindOfClass:[NSDictionary class]]) {
            if ([[(NSDictionary *)retObj valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                block(nil);
                [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
            }
        } else if ([retObj isKindOfClass:[NSArray class]]) {
            if ([(NSArray *)retObj count] > 0) {
                NSDictionary *dict = [(NSArray *)retObj objectAtIndex:0];
                if ([[dict valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                    block(nil);
                    [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
                }
            }
        }
        block(retObj);
    } 
                                      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                          NSLog(@"Failed with error = %@", [NSString stringWithFormat:@"[Error]:%@",error]);
                                          block(nil);
                                          if (alertUserOnFailure) {
                                              // Let the user know something went wrong
                                              [self handleNetworkErrorWithError:operation.error];
                                          }

                                      }];

    [operation start];

    if (syncRequest) {
        // Process the request syncronously
        [operation waitUntilFinished];
    } 

}

#pragma mark - processFileUpload
+(void)processFileUploadRequestWithURL:(NSString *)url 
                             andParams:(NSDictionary *)params 
                              fileData:(NSData *)fileData 
                              fileName:(NSString *)fileName
                              mimeType:(NSString *)mimeType 
                                 block:(void (^)(id obj))block {

    // Default url goes here, pass in a nil to use it
    if (url == nil) {
        url = @"DefaultURLGoesHere";
    }

    NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithDictionary:params];
    [dict setValue:APIKey forKey:@"APIKey"];

    NSDictionary *newParams = [[NSDictionary alloc] initWithDictionary:dict];
    AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:url]];  

    NSMutableURLRequest *myRequest = [client multipartFormRequestWithMethod:@"POST" 
                                                                       path:@"" 
                                                                 parameters:newParams 
                                                  constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
        [formData appendPartWithFileData:fileData name:fileName fileName:fileName mimeType:mimeType];
    }];

    AFHTTPRequestOperation *_operation = [[AFHTTPRequestOperation alloc] initWithRequest:myRequest];
    __weak AFHTTPRequestOperation *operation = _operation;
    __block NSString *responseString = @"";

    [operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        responseString = [operation responseString];

        id retObj = [responseString JSONValue];

        // Check for invalid response (No Access)
        if ([retObj isKindOfClass:[NSDictionary class]]) {
            if ([[(NSDictionary *)retObj valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                block(nil);
                [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
            }
        } else if ([retObj isKindOfClass:[NSArray class]]) {
            if ([(NSArray *)retObj count] > 0) {
                NSDictionary *dict = [(NSArray *)retObj objectAtIndex:0];
                if ([[dict valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                    block(nil);
                    [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
                }
            }
        }
        block(retObj);

    } 
                                      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                          NSLog(@"Failed with error = %@", [NSString stringWithFormat:@"[Error]:%@",error]);
                                          block(nil);
                                      }];

    [operation start];

}

#pragma mark - Error and Access Handling
+(void)handleNetworkErrorWithError:(NSError *)error {
    NSString *errorString = [NSString stringWithFormat:@"[Error]:%@",error];

    // Standard UIAlert Syntax
    UIAlertView *myAlert = [[UIAlertView alloc] 
                            initWithTitle:@"Connection Error" 
                            message:errorString 
                            delegate:nil 
                            cancelButtonTitle:@"OK" 
                            otherButtonTitles:nil, nil];

    [myAlert show];

}

+(void)handleNoAccessWithReason:(NSString *)reason {
    // Standard UIAlert Syntax
    UIAlertView *myAlert = [[UIAlertView alloc] 
                            initWithTitle:@"No Access" 
                            message:reason 
                            delegate:nil 
                            cancelButtonTitle:@"OK" 
                            otherButtonTitles:nil, nil];

    [myAlert show];

}

@end 
```

和一个示例电话：

```
UIImage *image = [UIImage imagedNamed@"MyImage.png"]; 
NSData *imageData = UIImagePNGRepresentation(image);
NSString *filename = @"MyImage.png";

params = [NSDictionary dictionaryWithObjectsAndKeys:
                                @"Param1Value", @"Param1Name",
                                fileName, @"Filename",
                                nil];

[NetworkClient processFileUploadRequestWithURL:nil
                                     andParams:params 
                                      fileData:imageData 
                                      fileName:fileName
                                      mimeType:@"image/png" 
                                             block:^(id obj) {
    // Do something   
}]; 
```

如果您有任何问题，请告诉我。

# migration - Openlaszlo colorTransform 问题

> ID：13378090
> 
> 赞同：2
> 
> 时间：2012-11-14T11:37:35.703
> 
> 标签：migration, openlaszlo, lzx

我正在使用颜色转换在 OL 3.3 中使用此代码在视图上设置颜色，这工作得很好。

```
obj.setColorTransform({ab: 0, aa: 100, 
                                bb: b-rB, ba: 100, 
                                gb: g-rG,  ga: 100, 
                                rb: r-rR,  ra: 100}); 
```

但是当我将它升级到 5.0 swf 运行时时我遇到了这个问题

```
obj.setAttribute('colortransform',{ab: 0, aa: 100, 
                                bb: b-rB, ba: 100, 
                                gb: g-rG,  ga: 100, 
                                rb: r-rR,  ra: 100}); 
```

这里的obj就是这种格式的视图，

```
 <view name="borders" 
              width="${parent.bg.width}"
              height="${parent.bg.height}" 
              y="10">
           <simplelayout axis="x"/>
           <view name="left" 
                 resource="border_left" 
                 stretches="height" 
                 height="${parent.height}" 
                 x="5" 
                 y="1">
              </view>
           <view name="middle" 
                 resource="border_mid" 
                 y="1"
                 stretches="width" 
                 height="${parent.height - 2}" 
                 width="${parent.width - parent.left.width - parent.right.width}">
           </view>
           <view name="right" 
                 resource="border_right" 
                 stretches="height" 
                 height="${parent.height}">
           </view>
        </view> 
```

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:06:02.433

当该`setColorTransform({})`方法被弃用以支持`.setAttribute('colortransform', {})`. 而不是`ra`or`rb`属性键现在是`redMultiplier`, `redOffset`。请参阅下面引用的相应文档部分。

API 的另一个变化是值。引用文档`setColorTransform()`：

> 字典有以下可能的键： o.ra：红色分量的百分比 alpha（-100 到 100）；o.rb：红色分量的偏移量（-255 到 255）；o.ga：绿色成分的百分比 alpha（-100 到 100）；o.gb：绿色分量的偏移量（-255 到 255）；o.ba：蓝色分量的 alpha 百分比（-100 到 100）；o.bb：蓝色分量的偏移量（-255 到 255）；o.aa：总体 alpha 百分比（-100 到 100）；o.ab：总偏移量（-255 到 255）；

将其与视图`colortransform`属性的文档进行比较：

> 字典有以下可能的键： o.redMultiplier：红色分量的乘数（0 到 1）默认为 1 o.redOffset：红色分量的偏移量（-255 到 255）默认为 0 o.greenMultiplier：绿色分量的乘数（ 0 到 1）默认为 1 o.greenOffset：绿色分量的偏移量（-255 到 255）默认为 0 o.blueMultiplier：蓝色分量的乘数（0 到 1）默认为 1 o.blueOffset：蓝色分量的偏移量（- 255 到 255）默认为 0 o.alphaMultiplier：alpha 分量的乘数（0 到 1）默认为 1 o.alphaOffset：alpha 分量的偏移量（-255 到 255）默认为 0

正如您从文档中看到的那样，alpha 偏移的值范围从更改`-100 to 100`为`0 to 1`. 以下语法在您使用时有效`setAttribute`：

```
var transformValues =
        {redMultiplier: 0 to 1,    redOffset: -255 to 255,
         greenMultiplier: 0 to 1,  greenOffset: -255 to 255,
         blueMultiplier: 0 to 1,   blueOffset: -255 to 255,
         alphaMultiplier: 0 to 1,  alphaOffset: -255 to 255}
this.setAttribute('colortransform', transformValues); 
```

# css - CSS这个代码片段是什么意思？更新

> ID：13378091
> 
> 赞同：1
> 
> 时间：2012-11-14T11:37:49.647
> 
> 标签：css

更新

在我的样式表中，我与这些片段有冲突。如果我保留这个

```
 <style type="text/css">

        ::selection{ background-color: #E13300; color: white; }
    ::moz-selection{ background-color: #E13300; color: white; }
    ::webkit-selection{ background-color: #E13300; color: white; } 
```

然后，下面的渐变效果有效，但标题横幅向右移动。如果我删除它，标题横幅会正确定位，但下面代码的渐变效果不起作用：/

```
body {

                background-image:url('../assets/uploads/miweb/gradient2.png');
                background-repeat:repeat-x;

                margin: 40px;
                font: 13px/20px normal Helvetica, Arial, sans-serif;
                color: #4F5155;
                width:600px;
                height:500px;
                margin: 0 auto;

            }

        a { 
```

更新二

这3行

```
::selection{ background-color: #E13300; color: white; }
::moz-selection{ background-color: #E13300; color: white; }
::webkit-selection{ background-color: #E13300; color: white; } 
```

对页面的其余部分产生巨大影响

他们制作了以下代码：

```
body {

        background-image:url('../assets/uploads/miweb/gradient2.png');
        background-repeat:repeat-x;

        margin: 40px;
        font: 13px/20px normal Helvetica, Arial, sans-serif;
        color: #4F5155;
        width:600px;
        height:500px;
        margin: 0 auto;

    } 
```

有效。如果我删除这 3 行，渐变效果将不会生效，字体字母将不是该系列，而是标准时间罗马。但是，负面影响是，就像我说的那样，它向右移动了我作为标题的横幅

我有一个标题页、一个控制器和一个视图以及我在视图中有链接的样式表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:49:48.493

The moz is for Firefox and as stated already its for styling. Are you using IE? as if so Id suggest trying alternate browser as well as IE has issues with the double colon which is for css3(no suprise there). have a look [here](http://www.suburban-glory.com/blog?page=127) as I used this when I first came across these and it described them well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:42:40.873

就像其他人所说的那样，代码不会影响元素的定位。它可以影响标题的唯一方法是，如果那段代码根本不被视为 css。检查代码是否在正确的样式标签中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T11:40:18.613

该代码不应影响您正在执行的操作。当用户使用鼠标选择文本时，该代码将更改文本的背景颜色和文本颜色。

您能否给我们一个示例链接，说明这种情况已被注释掉，好吗？

**编辑**

该`center:`属性应该做什么？它不是有效的 CSS...

# ruby-on-rails - 每个控制器方法中的代码

> ID：13378093
> 
> 赞同：2
> 
> 时间：2012-11-14T11:37:56.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个控制器，它的每个方法都以以下代码开头：

```
@user = UserData.find_by_login(session[:cuser])

if @user == nil
  redirect_to(:controller=> 'user_data', :action=> 'login')
  return
end 
```

我只是想知道在这种情况下是否可以避免代码重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:42:17.627

是的，使用[before_filter](http://apidock.com/rails/ActionController/Filters/ClassMethods/before_filter)

```
class YourController < ApplicationController

  before_filter :check_user

  def check_user
  ..
  end

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T11:42:46.927

绝对地。

```
class MyController < ApplicationController
  before_filter :ensure_logged_in

  # actions here.

  def ensure_logged_in
    @user = UserData.find_by_login(session[:cuser])

    if @user == nil
      redirect_to(:controller=> 'user_data', :action=> 'login')
    end
  end
end 
```

您不必担心“返回”，因为一旦发生重定向，rails 就会退出过滤器管道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T13:16:15.620

为避免重复，您只需在要检查用户身份验证的每个控制器中添加 before_filter。

```
class SomeController < ApplicationController

   before_filter :authenticate_user

end 
```

然后在应用程序控制器中添加您的用户身份验证逻辑，如下所示，

```
class ApplicationController < ActionController::Base

  private

  def current_user
    @current_user ||= UserData.find_by_login(session[:cuser]) if session[:cuser]
  end
  helper_method :current_user

  def authenticate_user
    redirect_to({:controller=> 'user_data', :action=> 'login'}, :alert => "Not authorized") if current_user.nil?
  end
end 
```

您可以在每个控制器中使用 current_user 辅助方法来获取当前用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T11:42:42.520

尝试[在过滤器之前](http://apidock.com/rails/ActionController/Filters/ClassMethods/before_filter)使用。这应该没问题

# c++ - const char * 允许改变字符值，为什么？

> ID：13378099
> 
> 赞同：1
> 
> 时间：2012-11-14T11:38:18.920
> 
> 标签：c++, constants

我有这个代码

```
int main()
{
    char A = 'E';

    const char * i;

    i = &A;

    A = 'B';

} 
```

它实际上是用 MSVC 编译的，为什么？const char * 不应该指向一个常量字符变量吗？为什么我可以在最后一行将 A 更改为“B”？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T11:55:20.627

`char`指向的类型常量（也称为*指针*）和类型的常量指针之间存在差异`char*`。如果要保护指针免受（意外）修改，可以将其声明为常量：

```
char* p = '...';
char* const cp = 'Hello, World!'; // a constant pointer
cp[1] = ','; // okay, the pointee is not constant
cp = p;      // error, the pointer is constant 
```

指向常量的变量指针可以改变：

```
char *p = '...';
const char* pc = 'Hello, World!'; // pointer to a constant
pc[1] = ','; // error, the pointee is constant
pc = p;      // okay 
```

最后，您可以声明一个指向常量的常量指针

```
const char* const cpc = 'Hello, World!';
cpc[1] = 'a'; // error, pointee cannot change
cpc = p;      // error, pointer cannot change 
```

这是来自 Stroustrup 的“C++ 编程语言”的第 5.4.1 节。

您可以在最后一行更改`A`为，因为是类型，因此可以更改。它没有被声明为 a ，这会阻止你这样做。`'B'``A``char``const char`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T11:40:51.813

A`const char*`仅阻止您*通过该指针*修改指向的变量。它不会，实际上也永远不能阻止你通过其他方式修改它。`const`如果指针和引用只能指向或引用`const`值，那么它们将毫无用处。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T11:41:15.737

`const char*`意味着你*不能通过*这个指针修改指针。这并不意味着其他人将无法做到这一点。

# opengl - glTeximage3D 中的纹理格式

> ID：13378102
> 
> 赞同：0
> 
> 时间：2012-11-14T11:38:25.350
> 
> 标签：opengl, textures

我使用 teximage3D 与 gl_texture_3D 和 gl_texture_2D_array 作为目标。

我正在创建 4 层颜色并将其应用于球体。所以我期待它会在球体上平均应用 4 层。

但是对于 GL_TEXTURE_3D，它会重复所有层 2 次。而对于 gl_texture_2D_array 它只按预期应用这些层一次。

```
int w = 4, h = 4, d = 4;
size_t size = w * h * d;

*format=GL_RGBA;
GLubyte *dataRGBA=new GLubyte[4*size];

for (int i=0; i<size/4; i++)
{
    dataRGBA[4*i]=200;
    dataRGBA[4*i+1]=0;
    dataRGBA[4*i+2]=0;
    dataRGBA[4*i+3]=255;
}

for (int i=size/4; i<size/2; i++)
{
    dataRGBA[4*i]=0;
    dataRGBA[4*i+1]=255;
    dataRGBA[4*i+2]=0;
    dataRGBA[4*i+3]=255;
}

for ( int i=size/2; i<(3*size)/4; i++)
{
    dataRGBA[4*i]=0;
    dataRGBA[4*i+1]=0;
    dataRGBA[4*i+2]=255;
    dataRGBA[4*i+3]=255;
}

for ( int i=(3*size)/4; i<size; i++)
{
    dataRGBA[4*i]=255;
    dataRGBA[4*i+1]=0;
    dataRGBA[4*i+2]=255;
    dataRGBA[4*i+3]=255;
}

glGenTextures(1,&id);
glBindTexture(*target11, id);
glTexParameteri(*target11, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
// when this texture needs to be magnified to fit on a big polygon, use linear interpolation of the texels to determine the color
glTexParameteri(*target11, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
// we want the texture to repeat over the S axis, so if we specify coordinates out of range we still get textured.
glTexParameteri(*target11, GL_TEXTURE_WRAP_S, GL_REPEAT);
// same as above for T axis
glTexParameteri(*target11, GL_TEXTURE_WRAP_T, GL_REPEAT);
// same as above for R axis
glTexParameteri(*target11, GL_TEXTURE_WRAP_R, GL_REPEAT);

glTexImage3D(*target11, 0, *format, w, h, d, 0, GL_RGBA, GL_UNSIGNED_BYTE, dataRGBA); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:17:06.983

我认为问题在于 2d 纹理数组使用整数作为纹理索引，而 3d 纹理将 R 轴缩放为 0-1，就像 S 和 T 轴一样。

# android - android：在图库中选择多个图像并启动隐式意图

> ID：13378108
> 
> 赞同：6
> 
> 时间：2012-11-14T11:38:44.673
> 
> 标签：android, android-intent, android-gallery, intentfilter

如何获取所有选定图像的图像路径或仅在我的应用程序中显示它们？当用户在图库中选择图像并按下共享按钮时，我可以启动我的隐式意图并将其显示在我的 imageView 中，如下所示

```
ImageView iv=(ImageView)findViewById(R.id.im);
iv.setImageUri((Uri)getIntent().getExtras().get(Intent.EXTRA_STREAM)); 
```

在我活动的清单文件中

```
<intent-filter >
            <action android:name="android.intent.action.SEND"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:mimeType="image/*" />
</intent-filter> 
```

但是我想在内置图库中选择多个图像，当我按下共享按钮时，我应该能够在我的应用程序中显示它们，那么我该怎么做呢？

或从 sdcard 获取所有选定图像的图像路径对我来说绰绰有余

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T09:12:16.363

我自己得到了它：发布它，因为如果需要它可能会帮助其他人

我们应该告诉 android，当我们打开图库并选择共享按钮时，我的应用程序必须是共享选项之一，例如：

清单文件：

```
<activity android:name=".selectedimages">
        <intent-filter >
            <action android:name="android.intent.action.SEND_MULTIPLE"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:mimeType="image/*" />
        </intent-filter>
    </activity> 
```

选择我们的应用程序后，它将打开每个图像上带有复选框的图库以选择图像，在应用程序中处理选定的图像：

selectedimages.java 文件：

```
if (Intent.ACTION_SEND_MULTIPLE.equals(getIntent().getAction())
    && getIntent().hasExtra(Intent.EXTRA_STREAM)) {
    ArrayList<Parcelable> list =
            getIntent().getParcelableArrayListExtra(Intent.EXTRA_STREAM);
                for (Parcelable parcel : list) {
                   Uri uri = (Uri) parcel;
                   String sourcepath=getPath(uri);

                   /// do things here with each image source path.
               }
                finish();
}
}

public  String getPath(Uri uri) {
String[] projection = { MediaStore.Images.Media.DATA };
Cursor cursor = managedQuery(uri, projection, null, null, null);
startManagingCursor(cursor);
int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
cursor.moveToFirst();
return cursor.getString(column_index);
} 
```

# css - 浏览器如何匹配 css 子属性

> ID：13378111
> 
> 赞同：0
> 
> 时间：2012-11-14T11:38:53.180
> 
> 标签：css, browser

如文档所述，我们可以在 CSS3 中定义动画，例如

```
.class1{
    animation: name duration timing-function delay iteration-count direction play-state
} 
```

我想知道我是否为名称、持续时间、计时功能等每个属性都赋予了值，而不是延迟，那么浏览器如何理解我已经跳过了延迟属性。

那么如果我已经为动画属性提供了所有相应的值，那么它与属性和值是 1:1 匹配的，但是如果想跳过任何中间属性，例如

```
.class1 {
    animation: anim 2s cubic-bezier(0 0 1 1) 2 alternate running
} 
```

这里我已经跳过了`delay`所以浏览器如何知道我已经跳过了`delay`属性而不是其他属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:10:30.477

[W3C 官方草案](http://www.w3.org/TR/css3-animations/#animation-shorthand-property)非常粗略，您不会得到一个好的“官方”答案。基本上浏览器会尝试按照规范顺序解析每个值，跳过那些与属性中对应值不匹配的子`animation`属性；所以它首先看到第一个值是有效的`animation-name`，然后是第二个是有效的`animation-duration`，然后继续直到它到达那个*不是*有效值的值`2`，所以它跳过并检查它是否是有效的，这这是。*`animation-delay``animation-delay``animation-iteration-count`*

# html - Google Places API - 添加地点

> ID：13378112
> 
> 赞同：-4
> 
> 时间：2012-11-14T11:38:57.273
> 
> 标签：html, google-maps

我正在尝试在 HMTL [https://developers.google.com/places/documentation/actions#PlaceReportRequests](https://developers.google.com/places/documentation/actions#PlaceReportRequests)中编写此内容，但我遇到了很大的困难。你能帮我吗，创建新地点的 HTML 代码是什么？我有 API 密钥，但我不知道如何组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:57:06.323

见这个例如。你可以得到一个想法。

谷歌地图 API 示例

```
function initialize() {
  if (GBrowserIsCompatible()) {
    var map = new GMap2(document.getElementById("map_canvas"));
    map.setCenter(new GLatLng(37.4419, -122.1419), 13);
    GEvent.addListener(map, "click", function() {
      alert("You clicked the map.");
     });
  }
}

</script> 
```

​您可以在此链接中获得更多示例。 [http://code.google.com/apis/ajax/playground](http://code.google.com/apis/ajax/playground)

# mysql - 如何正确构建关系 mySQL 数据库

> ID：13378114
> 
> 赞同：0
> 
> 时间：2012-11-14T11:39:24.357
> 
> 标签：mysql, relational-database, mysql-workbench

我正在制作一个用于员工调度的数据库。我有史以来第一次制作关系 mySQL 数据库，以便我可以有效地管理所有数据。我一直在使用 mySQL Workbench 程序来帮助我想象这将如何进行。这是我到目前为止所拥有的：

![小样](../Images/71a972f53ffaa6eae0282f7dfa8b43b8.png)

我脑海中的想象是，根据图纸，我将在表格中设置时间表，该`schedule`表格使用来自其他表格的参考，如图所示。然后当我需要显示这个时间表时，我会从`schedule`表格中提取所有内容。过去每当我使用数据库时，它都不是规范化类型，所以我只需将数据输入到一个表中，然后从该表中提取数据。现在我正在处理一个更大的项目，我确信像这样拆分所有表（标准化）是可行的方法，但我无法看到最终所有内容如何组合在一起。我有一种感觉，它不像我想象的那样工作，@grossvogel 指出了我认为对于使这一切正常工作至关重要的东西，那就是使用`join`拉取数据的功能。

我开始使用关系数据库的原因是，如果我对（例如）`shift`表进行更改，而不是记录 1 是“AM”，我希望它是“Morning”，然后它会自动更改相关部分`cascade`选项。

我在这里发布这个的原因是因为我希望有人可以帮助填补空白并为我指明正确的方向，所以我不会花很多时间才发现我一开始就走错了方向.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:39:14.403

也许您缺少的部分是使用查询`joins`从多个表中提取数据的想法。例如（仅合并您的几个表）：

```
SELECT Dept_Name, Emp_Name, Stat_Name ...
FROM schedule
INNER JOIN departments on schedule.Dept_ID = departments.Dept_ID
INNER JOIN employees on schedule.Emp_ID = employees.Emp_ID
INNER JOIN status on schedule.Stat_ID = status.Stat_ID
...
where .... 
```

另请注意，这`a schedule table that contains all of the information needed to be displayed on the final page`不符合关系数据建模的精神。`schedule`您希望每个表都对应用程序中的某些实体进行建模，因此重命名为`shifts`每行代表一个班次可能更合适。（我通常对表格使用单数名称，但那里有[多种视角](https://stackoverflow.com/questions/338156/table-naming-dilemma-singular-vs-plural-names)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T11:55:34.080

坦率地说，这是一个非常难以回答的问题，因为你可以得到一百万个不同的答案，每一个都有自己的优点。我建议你看看这些（那里可能也有更好的链接，这些似乎是需要注意的好点）：

[http://www.devshed.com/c/a/MySQL/Designing-a-MySQL-Database-Tips-and-Techniques/](http://www.devshed.com/c/a/MySQL/Designing-a-MySQL-Database-Tips-and-Techniques/)

[http://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form](http://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form)

[http://www.sitepoint.com/forums/showthread.php?66342-SQL-and-RDBMS-Database-Design-DO-s-and-DON-Ts](http://www.sitepoint.com/forums/showthread.php?66342-SQL-and-RDBMS-Database-Design-DO-s-and-DON-Ts)

我还建议您尝试更详细地解释您想要实现的目标，而不仅仅是发布表格结构，让我们尝试弄清楚您所做的事情是什么意思。

通常，通过尝试口头解释某些事情，您可能会在完全没有任何其他人输入的情况下获得您需要的认识！

我要提到的一件事是，您不必对表格进行非规范化以一起报告某些值，您应该考虑这种事情的视图......

# ios - 当应用程序处于纵向模式时旋转 MPMoviePlayerViewController

> ID：13378115
> 
> 赞同：2
> 
> 时间：2012-11-14T11:39:25.773
> 
> 标签：ios, video, rotation

如何根据当前模式自动旋转 MPMoviePlayerViewController，而整个应用程序设置为仅纵向模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T05:17:11.747

如果您的基础 SDK 是 iOS 6，则不能。整个应用程序（在目标摘要窗格 = info.plist 中）必须设置为包括应用程序的*任何*部分*都*愿意接受的*所有*方向。然后，您从应用程序的任何部分过滤掉不需要的方向，这些部分不应*被*允许旋转到所有这些方向，例如使用.***`supportedInterfaceOrientations`***

# javascript - 没有带有 DataJS 请求的 Auth 标头

> ID：13378116
> 
> 赞同：0
> 
> 时间：2012-11-14T11:39:31.340
> 
> 标签：javascript, odata, datajs

我正在使用 dataJS 调用 WCF 服务。

如下代码所示，我通过了用户名和密码，但是在 Fiddler 上调试或监控请求时，我看不到授权标头或用户名和密码的任何痕迹。

```
var url = "http://localhost/myServices/myService.svc/aMethod";

OData.defaultHttpClient.enableJsonpCallback = true;

OData.request(
        {requestUri: url, method: "GET", user: 'Joe', password: 'Soap' },
        function (data, request) {
            // successful
        },
        function (error) {
            // error
        }
) 
```

我需要获取用户名和密码的原因是我可以在我的自定义基本身份验证模块中使用它。

任何帮助表示赞赏。

谢谢

# .net - .NET Web API 中的多个 url 级别

> ID：13378122
> 
> 赞同：5
> 
> 时间：2012-11-14T11:39:57.060
> 
> 标签：.net, routing, asp.net-web-api

我正在使用新的 .NET Web API 设置休息服务，但遇到了一个小问题。我们希望有一点不同的路由，但我不知道如何实现这一点。

```
public class FormController : ApiController
{

    // api/form
    public string Get()
    {
        return "OK-Get";
    }
    // api/form/method1
    public string Method1()
    {
        return "OK1";
    }
    // api/form/method2
    public string Method2()
    {
        return "OK2";
    }
} 
```

但这不起作用。如果我去`/api/form/method2`，我会得到`OK-Get`回应。

我认为这与路由有关，但我不确定，因为我以前没有使用过 MVC。我试过在下面这样设置它`WebApiConfig.cs`：

```
config.Routes.MapHttpRoute(
    name: "FormApi",
    routeTemplate: "api/form/{action}"
); 
```

但这无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:33:00.033

路由几乎是正确的，但主要问题是您缺少其他操作方法所需的 HttpMethod 属性。`[HttpGet]`由于它的名称，在第一种方法上推断。这就是你需要的：

```
public class FormController : ApiController
{
    // api/form
    public string Get()
    {
        return "OK-Get";
    }

    // api/form/method1
    [HttpGet]
    public string Method1()
    {
        return "OK1";
    }

    // api/form/method2
    [HttpGet]
    public string Method2()
    {
        return "OK2";
    }
} 
```

使用属于 App_Start/RouteConfig.cs 的路线图

```
routes.MapHttpRoute(
    name: "FormApi",
    routeTemplate: "api/form/{action}",
    defaults: new { controller = "form", action = "Get"}
); 
```

有关更多信息，请阅读[http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection)

# wordpress - wordpress 两列响应式布局

> ID：13378124
> 
> 赞同：0
> 
> 时间：2012-11-14T11:40:01.803
> 
> 标签：wordpress

是否可以在 wordpress 中有两列布局？我一直在尝试使用 float:left 用 css 构建它；但我似乎无法让它在循环内工作:(

有没有人这样做过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:36:04.880

这应该会有所帮助，按此顺序列出帖子 -

```
1  2
3  4
5  6 
```

但是，如果您想要如下所示，则需要进行一些调整 -

```
1  4
2  5
3  6 
```

这是PHP -

```
<?php
$i = 0;
if(have_posts()) : while(have_posts()) : the_post();
?>

    <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
        <!-- Enter whatever code you want for your display here -->
    </div>

    <?php $i++ ?>
    <?php if($i % 2 === 0) : ?>
        <div class="clear"></div>
    <?php endif; ?>

<?php
    endwhile;
endif;
?> 
```

还有一些基本的 CSS（如果选择器`.post`过于通用，请根据需要更改） -

```
.post{
    float: left;
    max-width: 50%;
    padding: 10px;
}
.clear{
    clear: both;
} 
```

# ruby-on-rails - Rails Facebook 成就错误

> ID：13378128
> 
> 赞同：0
> 
> 时间：2012-11-14T11:40:19.210
> 
> 标签：ruby-on-rails, facebook-graph-api

我正在尝试使用 RoR 3.2.8 在 Facebook 上注册新成就，

这是我的控制器的动作

```
require 'net/http'
require 'uri'

...
    def create
        # achievement url
        @url = "http://smth.herokuapp.com/achievements/fb/ach.html"
        # fb graph api url
        @fbcall = "https://graph.facebook.com/#{FB_APP_ID}/achievements"
        uri = URI(@fbcall)
        res = Net::HTTP.start(uri.host, uri.port, :use_ssl => uri.scheme == 'https', :verify_mode => OpenSSL::SSL::VERIFY_PEER) do |http|
            req = Net::HTTP::Post.new(uri.path)
            req.set_form_data('access_token' => FB_APPLICATION_TOKEN, 'achievement' => @url, 'display_order' => '5')
            response = http.request req
        end
        @ans = res.body.to_s()
    end 
```

`@ans`我每次都得到以下

```
{"error":{"message":"(#3502) Object at achievement URL is not of type game.achievement","type":"OAuthException","code":3502}} 
```

但是成就html`@url`有

```
<meta property="og:type" content="game.achievement" /> 
```

其中的财产。如果我将此 html 放到 Facebook 调试器中，它不会显示任何错误并将类型识别为 game.achievement。如果我编写带有在加载时自动提交的输入的 HTML 表单，则可以创建成就。

所以我从 Rails 控制器发布请求的方式似乎有问题。

任何帮助，请 %)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:21:59.350

我注意到，如果我`@url`先将成就放入 facebook 调试器，那么它将注册相应的成就。所以现在我做了两个 ajax 请求：第一个到 facebook 调试器，然后（在第一个完成后）到 facebook graph api。

# javascript - asp.net 下拉禁用问题

> ID：13378130
> 
> 赞同：0
> 
> 时间：2012-11-14T11:40:43.167
> 
> 标签：javascript, asp.net

我有一个带有以下**编辑**规则的 ASP.Net 网页

1.  普通用户只能编辑空白字段
2.  管理员用户可以编辑所有字段（没有问题！！）

为此，我尝试使用 javascipt “**禁用**”所有具有值的字段，但在回发时，所有禁用的字段都失去了状态。所以我改为**Readonly=true**。现在所有文本框都按预期工作。但即使 readonly 为 true，Dropdowns 仍然可以编辑。

我怎样才能在不失去回发控件的价值的情况下做到这一点？

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:06:13.680

使用服务器端 Enabled 属性。

```
MyTextBox.Enabled = false;
MyDropDownList.Enabled = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:54:35.137

我是用 jquery 做的

```
if (source.type == "select-one")
 { 
   if ($(source).val() == "-1") {return true;} 
   $(source).hide(); 
   $(source).after("<span class='disp_label' <b>" + source.options[source.selectedIndex].text + "</b></span>");
} 
```

谢谢大家

# visual-studio-2012 - 运行 Win Forms 项目时出现奇怪的错误

> ID：13378133
> 
> 赞同：0
> 
> 时间：2012-11-14T11:41:09.530
> 
> 标签：visual-studio-2012

我有一个包含多个项目的解决方案。一个项目是 Windows 窗体项目，其他项目是类库项目。我已将win forms项目设置为启动项目。当我右键单击 win 表单项目然后选择“调试”然后“启动新实例”时，有时我会收到此错误：

> 不能直接启动具有类库输出类型的项目。为了调试这个项目，将一个可执行项目添加到这个引用库项目的解决方案中。将可执行项目设置为启动项目。

我注意到几乎每次VS2012在构建过程中失去焦点（因为我点击了另一个窗口），我都会得到这个错误！！知道可能是什么问题吗？

更新：我注意到在构建过程中，将所选项目更改为任何其他项目就足以导致此错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:13:03.633

似乎这是 Microsoft 在此链接上确认的错误：

[尝试运行 Windows 窗体应用程序时出错](http://connect.microsoft.com/VisualStudio/feedback/details/771033/error-while-trying-to-run-windows-forms-application)

此错误与以下错误重复：

[启动了错误的项目](http://connect.microsoft.com/VisualStudio/feedback/details/765864/wrong-project-started)

Microsoft 不会为 VS 2012 解决此错误的修复。

# android - Android：长按从列表视图中删除数据库行

> ID：13378137
> 
> 赞同：0
> 
> 时间：2012-11-14T11:41:16.393
> 
> 标签：android, android-listview, android-sqlite, onlongclicklistener

我正在构建一个应用程序，在该应用程序中，我将数据库中的数据填充到我的活动列表视图中。现在，在 longItemClick 侦听器上，我想从数据库中删除该值并更新应用程序中的列表视图。

这是我在列表视图上的 longClickListener 代码：

```
private ListView showing_history;
private ListAdapter mHistoryListAdapter;
private ArrayList<SearchHistoryDetails> searchArrayList;
private ArrayList<SearchHistoryDetails> HistoryObjArrayList;

    mHistoryListAdapter = new ArrayAdapter<String>(this,
            R.layout.mylistlayout, populateList());
    showing_history.setAdapter(mHistoryListAdapter);
    HistoryObjArrayList = new ArrayList<SearchHistoryDetails>();

/**
     * Long tap on listview to delete the selected item from the history
     * list.
     * */
    showing_history
            .setOnItemLongClickListener(new OnItemLongClickListener() {

                @Override
                public boolean onItemLongClick(AdapterView<?> arg0,
                        View arg1, int arg2, long arg3) {
                    final AlertDialog.Builder b = new AlertDialog.Builder(
                            MainActivity.this);
                    b.setIcon(android.R.drawable.ic_dialog_alert);
                    b.setMessage("Delete this from history?");
                    b.setPositiveButton("Yes",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int whichButton) {
                                    Toast.makeText(getApplicationContext(),
                                            "Yes", Toast.LENGTH_LONG)
                                            .show();
                                }
                            });
                    b.setNegativeButton("No",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int whichButton) {
                                    dialog.cancel();
                                }
                            });

                    b.show();
                    return true;
                }
            }); 
```

通过这段代码，我将数据插入数据库：

```
/**
 * Inserting the string when user searches for anything into the database.
 * */
public void insertHistory(SearchHistoryDetails paraHistoryDetailsPojoObj) {

    AndroidOpenDbHelper androidOpenDbHelperObj = new AndroidOpenDbHelper(
            this);

    SQLiteDatabase sqliteDatabase = androidOpenDbHelperObj
            .getWritableDatabase();

    ContentValues contentValues = new ContentValues();

    contentValues.put(AndroidOpenDbHelper.COLUMN_NAME_HISTORY_STRING,
            paraHistoryDetailsPojoObj.getHistoryName());
    @SuppressWarnings("unused")
    long affectedColumnId = sqliteDatabase.insert(
            AndroidOpenDbHelper.TABLE_NAME_HISTORY, null, contentValues);

    sqliteDatabase.close();

} 
```

这是我从数据库中检索数据并将其重新填充到列表视图中的代码：

```
public List<String> populateList() {

    List<String> HistoryNamesList = new ArrayList<String>();

    AndroidOpenDbHelper openHelperClass = new AndroidOpenDbHelper(this);

    SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

    Cursor cursor = sqliteDatabase
            .query(AndroidOpenDbHelper.TABLE_NAME_HISTORY,
                    new String[] { AndroidOpenDbHelper.COLUMN_NAME_HISTORY_STRING },
                    null, null, null, null, AndroidOpenDbHelper.ID
                            + " DESC");

    startManagingCursor(cursor);

    while (cursor.moveToNext()) {
        String ugName = cursor
                .getString(cursor
                        .getColumnIndex(AndroidOpenDbHelper.COLUMN_NAME_HISTORY_STRING));

        SearchHistoryDetails histPojoClass = new SearchHistoryDetails();
        histPojoClass.setHistoryName(ugName);

        searchArrayList.add(histPojoClass);

        HistoryNamesList.add(ugName);
    }

    sqliteDatabase.close();

    int history_db = cursor.getCount();

    if (history_db == 0) {
        history_layout.setVisibility(LinearLayout.GONE);
    } else {
        history_layout.setVisibility(LinearLayout.VISIBLE);
    }

    return HistoryNamesList;
} 
```

检索和插入数据一切都很完美，但删除特定行对我不起作用。现在我已经使用 toast 做了一些操作并且它正在工作，我应该怎么做，从列表视图中删除行后数据库数据更新。请给我任何想法来克服这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:11:47.037

尝试这个..，。

```
b.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
  public void onClick(DialogInterface dialog, int whichButton) {
            DatabaseHandler db=new DatabaseHandler(getApplicationContext());
            db.delete(arg3+"");
            list.remove(position);
            YourActivity.this.adapter.notifyDataSetChanged();
  }
}); 
```

在 DatabaseHandler 类中

```
public void delete(String id)
{
    SQLiteDatabase db = this.getReadableDatabase();
    db.delete(TABLE_NAME, KEY_ID + "=?", new String[]{id});
    db.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:56:18.120

最合适的解决方案是使用 Loaders.. 尤其是 CursorLoader 和 Content Provider。如果 Content Provider 对于您正在做的事情来说太过分了，请尝试使用 commonsware 中的 CursorLoader。删除后的更新是自动发生的，而不是在 ui 线程中，这很好。 [https://github.com/commonsguy/cwac-loaderex](https://github.com/commonsguy/cwac-loaderex) .. 一旦你明白这一点，它就很容易了。

但是，如果您仍想根据您的代码删除该行。只需在您的长按侦听器中将其删除即可。但在那之后刷新适配器。 [如何刷新Android列表视图？](https://stackoverflow.com/questions/2250770/how-to-refresh-android-listview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:07:59.937

要更新列表..首先调用您从构建器正按钮中指定删除查询的方法。

之后从`HistoryNamesList`数组列表中删除项目

现在从数据库和数组列表中删除了数据，但列表视图仍然显示以前的数据，因此您必须通知列表视图适配器，如下所示 `adapter.notifyDataSetChanged(); adapter.notifyDataSetInvalidated();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T08:24:31.837

解决了！

onCLick() 上所做的更改：

```
public void onClick(DialogInterface dialog,
                                        int whichButton) {

                                    HistoryNamesList.remove(pos);
                                    ((BaseAdapter) mHistoryListAdapter)
                                            .notifyDataSetChanged();

                                } 
```

# javascript - jQuery UI DatePicker 仅在一个日历中显示月份年份

> ID：13378139
> 
> 赞同：3
> 
> 时间：2012-11-14T11:41:19.380
> 
> 标签：javascript, jquery, html, datepicker

我在此页面中找到了此代码..

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>
<link rel="stylesheet" type="text/css" media="screen" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/base/jquery-ui.css">
 <script type="text/javascript">
 $(function() {
$('.date-picker').datepicker( {
    changeMonth: true,
    changeYear: true,
    showButtonPanel: true,
    dateFormat: 'MM yy',
    onClose: function(dateText, inst) { 
        var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
        var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
        $(this).datepicker('setDate', new Date(year, month, 1));
    }
});
});
</script>
 <style>
  .ui-datepicker-calendar {
display: none;
}
</style>
</head>
<body>
    <label for="startDate">Date :</label>
    <input name="startDate" id="startDate" class="date-picker" />
</body>
</html> 
```

如果您在同一页面上只有一个日历，则可以使用，但是如果我有两个日历，则隐藏两个日历中的日期，并且我希望仅在一个日历中应用它。有人可以告诉我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:17:37.827

通过使用`$('.date-picker').datepicker({`相同的设置初始化所有日历，特别是日期格式，因此您需要单独初始化它们。例如，如果你的日历有 ids "firstCalendar" 和 "secondCalendar"，像上面那样初始化第一个：

```
$('#firstCalendar').datepicker( {
    dateFormat: 'MM yy'
}); 
```

第二个使用默认日期格式：

```
$('#secondCalendar').datepicker( {
    dateFormat: 'mm/dd/yy'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T13:13:17.387

你需要删除

```
.ui-datepicker-calendar {
   display: none;
} 
```

试试这个[jsfiddle](http://jsfiddle.net/EXnCM/ "提琴手")

# iphone - 网站和 facebook 移动应用程序 - 它们需要分开吗？

> ID：13378140
> 
> 赞同：1
> 
> 时间：2012-11-14T11:41:20.440
> 
> 标签：iphone, facebook, mobile, oauth

现有网站使用 Facebook OAuth 登录。计划是很快将网站上的某些事件发布到用户的时间线上。“用户A观看了xxx”之类的东西。

我们还处于启动 iPhone 应用程序以连接到网站的数据 API 的阶段。如果用户已使用 facebook 登录通过移动应用程序对网站进行了身份验证：

*   移动应用程序是否需要访问 Facebook oauth 密钥？我猜不是，因为用户会做某事，并且网站将存储凭据以发布到 facebook，但我不确定。
*   实际上会有 2 个应用程序，一个是基于 facebook 的，一个不是？

* * *

抱歉，如果这真的是我要问的基本信息，但我以前没有开发过 Facebook 应用程序，而且我看到的信息并不总是很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:20:53.907

在我的应用程序中，我编写了两个身份验证流程，一个用于 facebook 用户，一个用于没有 facebook 的用户（这是典型的，创建您的帐户，然后使用您的用户名和密码登录）。所以一个应用程序，两个登录流程。

关于访问 Facebook oauth 密钥的应用程序，如果您使用 Facebook iOS SDK 进行编码，您甚至无需担心 oauth 密钥本身，因为它完全由 SDK 封装。您只需调用方法来触发身份验证，然后一旦用户通过身份验证，您就可以调用其他方法来调用 SDK/API 的某些方面。

Facebook iOS SDK 支持您直接从应用程序本身发布帖子所需的所有功能。您无需对服务器进行 API 调用，然后再对 Facebook API 进行第二次调用。只需直接从应用程序处理所有这些。因此，如果您的应用确实依赖于对服务器的成功 API 调用，那么在发布到 Facebook 之前，进行 API 调用，等待响应（包括附加数据或成功：true 标志），然后发布通过 Facebook iOS SDK 到 Facebook。

Facebook iOS SDK 文档现在很棒，代码示例甚至更好。在以下位置查看它们：

[http://developers.facebook.com/ios/](http://developers.facebook.com/ios/)

# javascript - 我们如何使用 jquery 或 javascript 获取 url？

> ID：13378142
> 
> 赞同：-1
> 
> 时间：2012-11-14T11:41:27.913
> 
> 标签：javascript, jquery

我有像这样的网址

`http://www.abc.com/xyz/aaa/bbb/login.php?id=23`

我想接受

`http://www.abc.com/xyz/aaa/bbb`

我们如何使用 javascript / jquery 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T11:42:30.157

这是一种可能的解决方案：

```
var result = url.substring(0, url.lastIndexOf("/")); 
```

这是另一个（但不是最好的）解决方案：

```
var result = url.split("/").slice(0, -1).join("/"); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-14T11:44:20.973

要获取当前窗口 URL，您可以使用： `window.location.href;`

广告要从中提取一个子部分，直到你们中的最后一个`/`可以使用以下脚本：

```
<script type="text/javascript">
var currUrl = window.location.href;
var modUrl =currUrl.substring(0,currUrl.lastIndexOf("/"));
//modUrl =currUrl.substring(0,currUrl.lastIndexOf("bbb"));  //Incase you have some other criteria to extract the sub URL.
</script> 
```

希望能帮助到你。

# php - 如何使用 Zend 获取有关此 PDO MySql 错误的更多信息

> ID：13378147
> 
> 赞同：5
> 
> 时间：2012-11-14T11:41:45.740
> 
> 标签：php, mysql, zend-db

在我的 PHP 脚本中，我运行如下更新语句：

```
$this->_db->update('names', $data, $this->_db->quoteInto('id = ?', $obj->id)); 
```

db 句柄是一个 Zend_Db_Adapter_Abstract 实例（属于 PDO MySql 种类）。

问题是更新失败，我似乎无法获得有关该错误的更多信息。

错误发生在 try/catch 块中。当我发现错误时，我运行：

```
$db->getProfiler()->getLastQueryProfile(); 
```

输出是：

```
2012-11-14T22:20:02+11:00 INFO (6): Zend_Db_Profiler_Query Object
(
    [_query:protected] => begin
    [_queryType:protected] => 64
    [_startedMicrotime:protected] => 1352892002.6064
    [_endedMicrotime:protected] => 1352892002.6066
    [_boundParams:protected] => Array
        (
        ) 
```

我知道它说没有参数是绑定的，但我真的不认为是这样。我认为不知何故“最后一个查询”不是我想的那样。

其次，当我发现错误时，我也会运行：

```
$db->getConnection()->errorInfo(); 
```

输出是：

```
2012-11-14T22:20:02+11:00 INFO (6): Array
(
    [0] => 00000
    [1] => 
    [2] => 
) 
```

显然这不是很有帮助。

有任何想法吗？如何获取有关错误的更多信息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:00:58.560

您可以强制 PDO 抛出包含所有信息的异常：

```
<?php

$this->_db->->getConnection()->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

try {
    $this->_db->update('names', $data, $this->_db->quoteInto('id = ?', $obj->id));
}
catch (Exception $ex) {
    print_r($ex);
} 
```

# c# - @Html.DropDownList 选择值问题

> ID：13378151
> 
> 赞同：1
> 
> 时间：2012-11-14T11:42:12.730
> 
> 标签：c#, asp.net-mvc

当我提交时，我得到的 StateID 总是空的。

任何线索我在这里想念什么？

谢谢你！

HTML：

```
<div style="display: inline-block;">@Html.LabelFor(x => x.Common.StateID , new { @class = "SmallInput2" })</div>
<div style="display: inline-block;">@Html.DropDownList("StateID", Model.Common.StateList, "-- Select --",  new { style = "width: 130px;" })</div> 
```

代码：

```
public ActionResult SignUp()
        {
            var model =  new SignUpModel
            {
                Common = new Common(),
                Individual = new Individual(),
                Business = new Business()
            };

            var stateList = new SelectList(_context.States.OrderBy(w => w.StateName), "ID", "StateName", _context.States.OrderBy(w => w.StateName).FirstOrDefault().ID);
            model.Common.StateList = stateList;
            model.Common.StateID = _context.States.OrderBy(w => w.StateName).FirstOrDefault().ID;

            return View(model);
        } 
```

模型：

```
[Display(Name = "State")]
public Guid StateID { get; set; }

[Display(Name = "States")]
public SelectList StateList { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:53:33.430

我在这里找到了正确的解决方案[@Html.DropDownList 选择值问题](https://stackoverflow.com/questions/13378151/html-dropdownlist-selected-value-issue/13378314#13378314)

所以在我的情况下应该是这样的：

```
 <div style="display: inline-block;">@Html.DropDownListFor(x => x.Common.StateID, Model.Common.StateList, "-- Select --",  new { style = "width: 130px;" })</div> 
```

# jsf - 绑定的 我在应用程序中使用 p:gmap 组件，但是当我尝试使用绑定属性来引用 bean 中的 GMap 时，它不起作用并且地图不显示。 JSF 代码： <p:gmap binding="#{mapBean.map}" center=" -26.9995, -49.68
问问题
问问题 2012-11-14T11:42:27.623
1103 次
This question shows research effort; it is useful and clear
0
This question does not show any research effort; it is unclear or not useful
Bookmark this question.
Show activity on this post.
我在应用程序中使用 p:gmap 组件，但是当我尝试使用绑定属性来引用 bean 中的 GMap 时，它不起作用并且地图不显示。
JSF 代码：
<p:gmap binding=" #{mapbean.map}"="" zoom="11" type="ROADMAP">支持 bean 代码： public GMap getMap() { map = new GMap(); map.setCenter("-26.9995, -49.686"); map.setZoom(11); map.setType("ROADMAP"); map.setModel(geoModel); map.setStyle("width:850px;height:450px"); map.setWidgetVar("vMap"); return map; } 当我在没有绑定的情况下使用这个组件时，它可以正常工作...... Primefaces 3.4.1 版；玻璃鱼 3.1.2.2 任何想法？ 谢谢 AngelScript 是一个免费的、开源的、灵活的、跨平台的脚本库，旨在嵌入到应用程序中。目的是提供一个易于使用的强大的库，但不会因大量很少使用的功能而受到影响。 jsfprimefacesprimefaces-gmap 4 2 回答 2 This answer is useful 3 我发现与您相关的相同问题...当我使用绑定属性在托管 Bean 中引用 GMap 时，地图不会呈现。 我注意到文件 gmap.js 没有被加载，因此 GMap 也没有被渲染。 我没有找到这个问题的原因，但我找到了解决它的方法，但不是一个优雅的方法。:D 在将 gmap.js 复制到项目目录结构的文件系统后，我在我的 xhtml 文件中添加了这一行。 <h:head>... <h:outputscript library="primefaces" name="gmap/gmap.js">...</h:outputscript></h:head> 我希望这对你有帮助！祝你好运！:D 于 2013-03-08T13:21:32.400 回答 This answer is useful 0 另一种方法是在 Backed Bean（或任何呈现这种情况的组件）上创建 GMap 实例，创建组件 xhml 视图，删除绑定 xhtml 属性并匹配两者的每个属性，如下例所示： 豆： // #{viewBean} private GMap googleMap; @PostConstruct public void onPostConstruct(){ googleMap.setDisableDoubleClickZoom(Boolean.TRUE); googleMap.setScrollWheel(Boolean.FALSE); googleMap.setCenter(getMapCenterString()); googleMap.setZoom(mapZoomLevel); googleMap.setType("NORMAL"); googleMap.setFitBounds(Boolean.FALSE); // etc... } // getter and setter of googleMap XHTML 视图： <p:gmap id="gmap" center="#{viewBean.googleMap.center}" zoom="#{viewBean.googleMap.zoom}" type="#{viewBean.googleMap.type}" model="#{viewBean.mapModel}" scrollwheel="#{viewBean.googleMap.scrollWheel}" disabledoubleclickzoom="#{viewBean.googleMap.disableDoubleClickZoom}" etc...="">这样我们就可以在 backed bean 中保持对组件的控制。 虽然 primefaces 修复了这个错误。 于 2016-10-13T15:06:50.740 回答 Related 1 ipad - iOS 4.x 中的自定义 UIPopoverController (UIPopoverBackgroundView) 3 html - Vertical Align Middle for Image 3 ruby-on-rails - Rails3：我应该切换到 NoSQL 吗？大量的计算，大量的用户匹配数据 3 linux - 预处理器指令返回值 2 java - 返回新生成的id restful service post 1 java - int枚举模式有什么用？ 1 java - 将 JPanel 传递给 CardLayout 时出现 NullPointerException 7 javascript - JavaScript 结果未显示在同一页面中 2 mysql - 为什么 MySQL 的 MyISAM 引擎不支持外键？ 1 android - 检查记录是否存在，如果存在则更新，否则在PhoneGap中创建新记录？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</p:gmap></p:gmap>

> ID：13378153
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jsf, primefaces, primefaces-gmap

我在应用程序中使用 p:gmap 组件，但是当我尝试使用绑定属性来引用 bean 中的 GMap 时，它不起作用并且地图不显示。

JSF 代码：

```
<p:gmap binding="#{mapBean.map}" center=" -26.9995, -49.686" zoom="11" type="ROADMAP" /> 
```

支持 bean 代码：

```
public GMap getMap() {
    map = new GMap();
    map.setCenter("-26.9995, -49.686");
    map.setZoom(11);
    map.setType("ROADMAP");
    map.setModel(geoModel);
    map.setStyle("width:850px;height:450px");
    map.setWidgetVar("vMap");
    return map;
} 
```

当我在没有绑定的情况下使用这个组件时，它可以正常工作......

Primefaces 3.4.1 版；玻璃鱼 3.1.2.2

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:21:32.400

我发现与您相关的相同问题...当我使用绑定属性在托管 Bean 中引用 GMap 时，地图不会呈现。

我注意到文件 gmap.js 没有被加载，因此 GMap 也没有被渲染。

我没有找到这个问题的原因，但我找到了解决它的方法，但不是一个优雅的方法。:D

在将 gmap.js 复制到项目目录结构的文件系统后，我在我的 xhtml 文件中添加了这一行。

```
<h:head>
    ...
    <h:outputScript library="primefaces" name="gmap/gmap.js" />
    ...
</h:head> 
```

我希望这对你有帮助！祝你好运！:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T15:06:50.740

另一种方法是在 Backed Bean（或任何呈现这种情况的组件）上创建 GMap 实例，创建组件 xhml 视图，删除绑定 xhtml 属性并匹配两者的每个属性，如下例所示：

豆：

```
// #{viewBean}
private GMap googleMap;
@PostConstruct
public void onPostConstruct(){
    googleMap.setDisableDoubleClickZoom(Boolean.TRUE);
    googleMap.setScrollWheel(Boolean.FALSE);
    googleMap.setCenter(getMapCenterString());
    googleMap.setZoom(mapZoomLevel);
    googleMap.setType("NORMAL");
    googleMap.setFitBounds(Boolean.FALSE);
    // etc...
}
// getter and setter of googleMap 
```

XHTML 视图：

```
<p:gmap id="gmap"
     center="#{viewBean.googleMap.center}" 
     zoom="#{viewBean.googleMap.zoom}"
     type="#{viewBean.googleMap.type}"
     model="#{viewBean.mapModel}"
     scrollWheel="#{viewBean.googleMap.scrollWheel}"
     disableDoubleClickZoom="#{viewBean.googleMap.disableDoubleClickZoom}"
     etc... /> 
```

这样我们就可以在 backed bean 中保持对组件的控制。

虽然 primefaces 修复了这个错误。

# tomcat - Tomcat引发加密异常

> ID：13378170
> 
> 赞同：2
> 
> 时间：2012-11-14T11:43:17.543
> 
> 标签：tomcat, java, jce

我最近安装了 jdk 1.6。我的 tomcat 安装开始引发以下错误。

org.jasypt.exceptions.EncryptionOperationNotPossibleException：加密引发异常。一个可能的原因是您正在使用强加密算法，并且您尚未在此 Java 虚拟机中安装 Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files

尽管错误消息中提到了，但我在 jre/lib/security 目录中有 JCE 文件。可能是什么问题？我应该怎么做才能修复它？谢谢

这是堆栈跟踪：

```
java.security.InvalidKeyException: Illegal key size
at javax.crypto.Cipher.a(DashoA13*..)
at javax.crypto.Cipher.a(DashoA13*..)
at javax.crypto.Cipher.a(DashoA13*..)
at javax.crypto.Cipher.init(DashoA13*..)
at javax.crypto.Cipher.init(DashoA13*..)
at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.decrypt(StandardPBEByteEncryptor.java:832)
at org.jasypt.encryption.pbe.StandardPBEStringEncryptor.decrypt(StandardPBEStringEncryptor.java:679)
at org.jasypt.encryption.pbe.PooledPBEStringEncryptor.decrypt(PooledPBEStringEncryptor.java:473)
at org.jasypt.properties.PropertyValueEncryptionUtils.decrypt(PropertyValueEncryptionUtils.java:72)
at com.pagatech.services.util.StatefulEncryptablePropertyPlaceholderConfigurer.convertPropertyValue(StatefulEncryptablePropertyPlaceholderConfigurer.java:57)
at org.springframework.beans.factory.config.PropertyResourceConfigurer.convertProperty(PropertyResourceConfigurer.java:121)
at org.springframework.beans.factory.config.PropertyResourceConfigurer.convertProperties(PropertyResourceConfigurer.java:104)
at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:81)
at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:681)
at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:656)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

# ios - CLGeocoder 转发地理编码多个位置

> ID：13378175
> 
> 赞同：0
> 
> 时间：2012-11-14T11:43:42.660
> 
> 标签：ios, ios6, mapkit, clgeocoder

嗨，我正在使用此方法获取坐标并将图钉添加到地图视图以获取一个邮政编码

```
-(void)myMapview
{
    //sitePC is an Array with the Post code location
    NSString *addressString = [self.sitePC valueForKey:@"sitePC"];

    CLGeocoder *geocoder = [[CLGeocoder alloc] init];

    [geocoder geocodeAddressString:addressString completionHandler:^(NSArray *placemarks, NSError *anError)

     { for(CLPlacemark *placemark in placemarks) {
             NSLog(@"Placemark: %@",placemark);

             MKPointAnnotation *pa = [[MKPointAnnotation alloc] init];

             pa.coordinate = placemark.location.coordinate;
             pa.title = [self.sitePC valueForKey:@"siteName"];
             [self.mapview addAnnotation:pa];

         }          if(anError)
         { NSLog(@"Error: %@",[anError description]); }         
     }];
} 
```

但是现在 sitePC 数组包含 10 个要处理的邮政编码，我阅读了 CLGeocoder 的文档，我知道我当时只能发送一个请求。

我的问题是，对于每个邮政编码，我如何一次只发送一个请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:15:40.810

您可以为注释创建一个数组并在 MapView 上添加该注释数组。希望以下代码更改对您有所帮助。

NSString *addressString = [self.sitePC valueForKey:@"sitePC"];

```
CLGeocoder *geocoder = [[CLGeocoder alloc] init];

[geocoder geocodeAddressString:addressString completionHandler:^(NSArray *placemarks, NSError *anError)

 { 
    NSMutableArray *pointsArray = [[NSMutableArray alloc]init]
     for(CLPlacemark *placemark in placemarks) {
         NSLog(@"Placemark: %@",placemark);

         MKPointAnnotation *pa = [[MKPointAnnotation alloc] init];

         pa.coordinate = placemark.location.coordinate;
         pa.title = [self.sitePC valueForKey:@"siteName"];
         [pointsArray addObject:pa];
     }  
     [self.mapview addAnnotations:pointsArray];
  if(anError)
     { NSLog(@"Error: %@",[anError description]); }         
 }]; 
```

# c# - 尝试在停用时删除记录时出错

> ID：13378177
> 
> 赞同：0
> 
> 时间：2012-11-14T11:43:56.830
> 
> 标签：c#, plugins, dynamics-crm-2011

我有一条记录，在停用时我希望插件自动删除该记录。因此，我将我的代码设置为 SetStateDynamically 事件，并且这一切都有效，直到我实际让服务删除记录，我得到“发生意外错误”。

我的代码在下面，任何人都可以看到问题可能是什么，或者能够指出我正确的方向吗？

谢谢

```
private void MarkForDeleteDeactivatedRole(EntityReference entity)
    {
        Entity role = Service.Retrieve("sb_contactsecurityrole", entity.Id, new ColumnSet(true));

        OptionSetValue statusValue = (OptionSetValue)role["statecode"];

        if (statusValue.Value == 1)
        {                
            Service.Delete(entity.LogicalName, entity.Id);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:08:32.250

我见过同样的情况。我认为 CRM 事件管道不支持在处理该对象时删除记录。您可能能够做的最好的事情是异步注册您的插件，因此错误（您无法捕获，因为它在 CRM 事件管道内部）不会冒泡到 UI（并且您不在交易范围内）。

# c# - WPF DynamicDataDisplay - 使用标记缓慢绘图

> ID：13378180
> 
> 赞同：3
> 
> 时间：2012-11-14T11:44:03.080
> 
> 标签：c#, wpf, performance, marker, dynamic-data-display

使用标记时，我很难等待 D3 中的 ChartPlotter 显示自己。当然，我正在尝试绘制 Gazillion 记录（嗯，700,000 条记录）。当只使用一条线时，一切都很好（20 秒左右）。使用标记时，我们说的是 5 分钟。这是不可接受的。

有任何想法吗？

这是我所做的，下面有解释。

```
public static string MakeSimplePlot(double[][] xData, double[][] yData, string[] legend, string xAxisTitle, string yAxisTitle, bool[] showLines, bool[] showMarkers)
    {
        ChartPlotter plotter = new ChartPlotter();

        plotter.MainHorizontalAxis = new HorizontalAxis();
        plotter.MainVerticalAxis = new VerticalAxis();

        HorizontalAxisTitle horizontalAxisTitle = new HorizontalAxisTitle();
        horizontalAxisTitle.Content = xAxisTitle;
        plotter.AddChild(horizontalAxisTitle);

        VerticalAxisTitle verticalAxisTitle = new VerticalAxisTitle();
        verticalAxisTitle.Content = yAxisTitle;
        plotter.AddChild(verticalAxisTitle);

        Color[] plotColors = new Color[13] { Colors.Blue, Colors.Red, Colors.Green, Colors.Chartreuse, Colors.Yellow, Colors.Violet, Colors.Tan, Colors.Silver, Colors.Salmon, Colors.Lime, Colors.Brown, Colors.Chartreuse, Colors.DarkGray };

        for (int seriesCounter = 0; seriesCounter < legend.Count(); seriesCounter++)
        {
            DataFile clearedInputs = ClearExcess(new DataFile(xData[seriesCounter], yData[seriesCounter]));
            xData[seriesCounter] = clearedInputs.time;
            yData[seriesCounter] = clearedInputs.data;

            var xDataSource = new EnumerableDataSource<double>(xData[seriesCounter]);
            xDataSource.SetXMapping(x => x);

            var yDataSource = new EnumerableDataSource<double>(yData[seriesCounter]);
            yDataSource.SetYMapping(x => x);

            CompositeDataSource plotSeries = new CompositeDataSource(xDataSource, yDataSource);

            CirclePointMarker circlePointMarker = new CirclePointMarker();
            circlePointMarker.Fill = new SolidColorBrush(plotColors[seriesCounter]);
            circlePointMarker.Pen = new Pen(circlePointMarker.Fill, 0);

            circlePointMarker.Size = (showMarkers[seriesCounter] == false) ? 0 : 8;
            int lineWidth = (showLines[seriesCounter] == false) ? 0 : 2;

            if (showMarkers[seriesCounter] == false)
            {
                plotter.AddLineGraph(plotSeries, new Pen(circlePointMarker.Fill, lineWidth), new PenDescription("Dummy"));
            }
            else
            {
                plotter.AddLineGraph(plotSeries, new Pen(circlePointMarker.Fill, lineWidth), circlePointMarker, new PenDescription("Dummy"));
            }
        }

        UIParameters.plotWindow.mainGrid.Children.Clear();
        UIParameters.plotWindow.mainGrid.RowDefinitions.Clear();
        UIParameters.plotWindow.mainGrid.Children.Add(plotter);
        plotter.Viewport.FitToView();

        plotter.LegendVisible = false;
        plotter.NewLegendVisible = false;            

        if (legend.Count() > 1)
        {
            ShowLegend(legend, plotColors);
        }

        UIParameters.plotWindow.WindowState = WindowState.Minimized;
        UIParameters.plotWindow.WindowState = WindowState.Normal;

        string filename = Path.ChangeExtension(Path.GetTempFileName(), "png");

        RenderTargetBitmap targetBitmap = new RenderTargetBitmap((int)UIParameters.plotWindow.mainGrid.ActualWidth, (int)UIParameters.plotWindow.mainGrid.ActualHeight, 96d, 96d, PixelFormats.Default);
        targetBitmap.Render(UIParameters.plotWindow.mainGrid);
        PngBitmapEncoder encoder = new PngBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(targetBitmap));
        using (var fileStream = File.Open(filename, FileMode.OpenOrCreate))
        {
            encoder.Save(fileStream);
            UIParameters.plotWindow.mainGrid.Clip = null;

            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();

            targetBitmap.Freeze();

            if (targetBitmap != null) targetBitmap.Clear();
            targetBitmap = null;
            GC.Collect();
            GC.WaitForPendingFinalizers();

            GC.Collect();
            GC.WaitForPendingFinalizers();
        }

        return filename;
    } 
```

说明：

1.  我隐藏了绘图仪图例并使用 ShowLegend 制作我自己的图例，因为图例不显示它是否只有标记（我错了吗？）
2.  我最小化和最大化绘图窗口，否则绘图不会更新，或者它更新但没有保存到文件中。如果我移动窗口（我猜是某种重绘事件），这也有效，但由于该过程是自动的，因此用户没有任何交互。我尝试无效，无济于事。想法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:34:35.293

我编写了自己的类来隐藏标记，当它们不在屏幕上时。当屏幕上没有大量标记时，它是一种虚拟化技术，可将性能提高十倍。它看起来像这样：

```
using System;
using System.Windows;
using System.Windows.Media;
using Microsoft.Research.DynamicDataDisplay.DataSources;
using Microsoft.Research.DynamicDataDisplay.PointMarkers;
using Microsoft.Research.DynamicDataDisplay.Common;

namespace Microsoft.Research.DynamicDataDisplay.Charts {
public class FilteredMarkerPointsGraph : MarkerPointsGraph {
    public FilteredMarkerPointsGraph()
        : base() {
        ;
    }

    public FilteredMarkerPointsGraph(IPointDataSource dataSource)
        : base(dataSource) {
        ;
    }

    protected override void OnRenderCore(DrawingContext dc, RenderState state) {
        // base.OnRenderCore
        if (DataSource == null) return;
        if (Marker == null) return;

        var left = Viewport.Visible.Location.X;
        var right = Viewport.Visible.Location.X + Viewport.Visible.Size.Width;
        var top = Viewport.Visible.Location.Y;
        var bottom = Viewport.Visible.Location.Y + Viewport.Visible.Size.Height;

        var transform = Plotter2D.Viewport.Transform;

        DataRect bounds = DataRect.Empty;
        using (IPointEnumerator enumerator = DataSource.GetEnumerator(GetContext())) {
            Point point = new Point();
            while (enumerator.MoveNext()) {
                enumerator.GetCurrent(ref point);                                       

                if (point.X >= left && point.X <= right && point.Y >= top && point.Y <= bottom)
                {
                    enumerator.ApplyMappings(Marker);

                    Point screenPoint = point.DataToScreen(transform);

                    bounds = DataRect.Union(bounds, point);
                    Marker.Render(dc, screenPoint);
                }
            }
        }

        Viewport2D.SetContentBounds(this, bounds);
    }
} 
```

确保在 XAML 中调用 FilteredMarkerPointsGraph 而不是 MarkerPointsGraph！

**编辑**

1.  我不确定带有标记的图例需要什么，我实际上并没有在我的任何图表中使用图例，但您的解决方案似乎很好。

2.  重新绘制情节实际上很容易。

我发现做到这一点的最佳方法是在您的代码中包含一个表示 DataSource 的属性并将图表的 DataSource 绑定到该属性。每次更新或重新分配数据源时，让您的代码实现 INotifyPropertyChanged 并调用 OnPropertyChanged。这将迫使绘图仪观察绑定并重新绘制图表。

例子：

```
EnumerableDataSource<Point> m_d3DataSource;
public EnumerableDataSource<Point> D3DataSource {
get {
    return m_d3DataSource;
}
set {                
    //you can set your mapping inside the set block as well             
    m_d3DataSource = value;
    OnPropertyChanged("D3DataSource");
}
}     

protected void OnPropertyChanged(PropertyChangedEventArgs e) {
    PropertyChangedEventHandler handler = PropertyChanged;
    if (handler != null) {
        handler(this, e);
    }
} 

protected void OnPropertyChanged(string propertyName) {
    OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
} 
```

关于你的标记的表现.. 很难准确指出导致你的表现问题的原因，但我的建议是尝试使用不同的数据源。我一直在使用 EnumerableDataSource，它总是很有效。尝试将您的数据引入单个对象并在您的设置块中设置映射，如上所示，使用：

```
value.SetYMapping(k => Convert.ToDouble(k.yData));
value.SetXMapping(k => Convert.ToDouble(k.xData)); 
```

您唯一需要担心的是 Enumerable 数据源中的映射，D3 应该为您处理其余的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T11:50:18.043

当您显示“Gazillion”点时，用户可能看不到标记：当缩放级别更合理时，您不能将模式从线切换到标记吗？

# java - 在 for 循环中使用 switch 语句

> ID：13378183
> 
> 赞同：0
> 
> 时间：2012-11-14T11:44:09.380
> 
> 标签：java

我有一个关于天气的问题，在 for 循环中使用 switch 语句是合法的。它在 Eclipse 下面的写法给了我一个错误，并且不允许我在 for 循环的第二个语句中使用 switch(n)。我想做的是写...

这个老人，他玩过 1
他在我的拇指上玩小玩意儿。

有没有更好的方法用 for 循环和 switch 语句解决下面的问题？我想用不同的数字和不同的大小写写出第 10 段不同的段落。所以 1 个拇指，2 个鞋子，3 个膝盖……直到 10 个。

```
import acm.program.*;

public class SingSong extends ConsoleProgram {

    public void run() {
        for (int n = 1; n <= 10; n++) {
            println("This old man, he played " + n);
            println("He played knick-knack on my" + switch(n));
            println("With a knick-knack, paddy-whack,");
            println("Give your dog a bone");
            println("This old man came rolling home");

            switch (n) {            
                case 1 : println("thumb"); break;
                case 2 : println("shoe"); break;
                case 3 : println("knee"); break;
                case 4 : println("door"); break;
                case 5 : println("hive"); break;
                case 6 : println("sticks"); break;
                case 7 : println("heaven"); break;
                case 8 : println ("pate"); break;
                case 9 : println("spine"); break;
                case 10 : println("shin"); break; 
            }
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T11:47:33.540

你想要的是一个你会调用的方法：

```
private String which(int n) {
  switch (n) {
  case 1 : return "thumb";
  case 2 : return "show";
  case 3 : return "knee";
  case 4 : return "door";
  case 5 : return "hive";
  case 6 : return "sticks";
  case 7 : return "heaven";
  case 8 : return "pate";
  case 9 : return "spine";
  case 10 : return "shin";
  default: return "";

  }
} 
```

然后更换

```
println("He played knick-knack on my" + switch(n)); 
```

和

```
println("He played knick-knack on my" + which(n)); 
```

另一种更简洁的方法是创建一个字符串数组：

```
static final String[] which = {
  "thumb","show","knee","door","hive", "sticks","heaven","pate","spine","shin"}; 
```

然后就用

```
println("He played knick-knack on my" + which[n]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T11:47:50.187

创建一个`Map<Integer, String>`包含整数到字符串的映射并用于`Map.get()`获取字符串：

```
Map<Integer, String> m = new HashMap<Integer, String>();
m.put(1, "thumb");
// etc
m.put(10, "shin");

println("He played knick-knack on my" + m.get(n)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T11:47:42.480

```
 println("He played knick-knack on my" + switch(n)); 
```

这不会给你的 Switch 打电话。switch 不是一种方法。为了获得所需的输出，

```
println("This old man, he played " + n);
            println("He played knick-knack on my" );

    switch (n){

            case 1 : print("thumb"); break;
            case 2 : println("shoe"); break;
            case 3 : println("knee"); break;
            case 4 : println("door"); break;
            case 5 : println("hive"); break;
            case 6 : println("sticks"); break;
            case 7 : println("heaven"); break;
            case 8 : println ("pate"); break;
            case 9 : println("spine"); break;
            case 10 : println("shin"); break; 

            } 
```

或者甚至更好地遵循@Marko Topolnik 方法，我会说这是最好的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T11:52:29.593

SWitch(n) 不是函数，不能这样使用。对编译器来说，这就像开始一个 switch 语句，但是做的完全错误，因此它返回一个错误。我认为要正确执行此操作，您应该将 case switch 放在不同的方法中，或者直接放在第二行之后。像这样：

```
import acm.program.*;

public class SingSong extends ConsoleProgram {

public void run(){
for ( int n = 1; n <= 10; n++){

    println("This old man, he played " + n);
    print("He played knick-knack on my ");
    switch (n){
    case 1 : print("thumb"); break;
    case 2 : print("show"); break;
    case 3 : print("knee"); break;
    case 4 : print("door"); break;
    case 5 : print("hive"); break;
    case 6 : print("sticks"); break;
    case 7 : print("heaven"); break;
    case 8 : print("pate"); break;
    case 9 : print("spine"); break;
    case 10 : print("shin"); break; 
    }
    println("With a knick-knack, paddy-whack,");
    println("Give your dog a bone");
    println("This old man came roiling home");

      } 
       }

      } 
```

这应该有效。或者换一种方法：

```
 import acm.program.*;

public class SingSong extends ConsoleProgram {
public void run(){

for ( int n = 1; n <= 10; n++){

    println("This old man, he played " + n);
    print("He played knick-knack on my");
    switcher(n);
    print("\n");
    println("With a knick-knack, paddy-whack,");
    println("Give your dog a bone");
    println("This old man came roiling home");
}
}

    private void switcher(int n){
    switch(n){
    case 1 : print("thumb"); break;
    case 2 : print("show"); break;
    case 3 : print("knee"); break;
    case 4 : print("door"); break;
    case 5 : print("hive"); break;
    case 6 : print("sticks"); break;
    case 7 : print("heaven"); break;
    case 8 : print ("pate"); break;
    case 9 : print("spine"); break;
    case 10 : print("shin"); break; 

      } 
       }

      } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T11:48:49.167

你不能这样做：

```
println("He played knick-knack on my" + switch(n)); 
```

如果您希望您的代码大致相同，则应委托给执行切换的方法。

替代解决方案将包括一系列`if`/ `else if`（有点冗长），或者可能是一个充当查找表的数组。

例如

```
// note arrays are indexed from 0
String[] arrayOfObjects = new String[]{"thumb", ....};
println("He played knick-knack on my" + arrayOfObjects(n-1)); 
```

我认为`Map`在这种情况下可能 a 是矫枉过正的，除非你有非连续的索引（不太可能）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T11:53:57.937

您正在使用`switch`类似的方法。进行以下更改，它将起作用：

```
import acm.program.*;

public class SingSong extends ConsoleProgram 
{
    public void run()
    {
        for ( int n = 1; n <= 10; n++)
        {
            println("This old man, he played " + n);
            println("He played knick-knack on my" + getValue(n));
            println("With a knick-knack, paddy-whack,");
            println("Give your dog a bone");
            println("This old man came roiling home");
        }
    }

    private String getValue(int n)
    {
        switch (n)
        {
            case 1 : return "thumb"; break;
            case 2 : return "shoe"; break;
            case 3 : return "knee"; break;
            case 4 : return "door"; break;
            case 5 : return "hive"; break;
            case 6 : return "sticks"; break;
            case 7 : return "heaven"; break;
            case 8 : return "pate"; break;
            case 9 : return "spine"; break;
            case 10 : return "shin"; break;

            default : return "VALUE NOT FOUND!!";
        }
    } 
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-11-14T11:47:44.227

for 循环内的 switch/case 语句很好，问题是 switch 不是函数调用。尝试这样的事情：

```
 string obj;
    switch (n){

    case 1 : obj="thumb"; break;
    case 2 : obj="show"; break;
    //Etc
    }

    }
    println("This old man, he played " + n);
    println("He played knick-knack on my" + obj);
    println("With a knick-knack, paddy-whack,");
    println("Give your dog a bone");
    println("This old man came roiling home"); 
```

# symfony - 在 Symfony2 控制器上获取表单的参数

> ID：13378184
> 
> 赞同：2
> 
> 时间：2012-11-14T11:44:12.517
> 
> 标签：symfony

我有这个例子的 Symfony2 文档的基本表单、模板和控制器操作。

每当我尝试在控制器操作中获取表单的参数时，我都必须使用它：

```
$parameters = $request->request->all();
$name = $parameters["form"]["name"]; 
```

但是，在文档中使用这个：

```
$name = $request->request->get('name'); 
```

但这对我来说是错误的，在这种情况下 $name 为 null 并且 Object request(ParameterBag) 包含以下内容：

```
object(Symfony\Component\HttpFoundation\ParameterBag)#8 (1) {
  ["parameters":protected]=>
  array(1) {
    ["form"]=>
    array(1) {
      ["name"]=>
      string(4) "test"
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T13:04:48.507

```
$formPost = $request->request->get('form');
$name = $formPost['name']; 
```

或自 PHP 5.4 起

```
$name = $request->request->get('form')['name']; 
```

在我看来，访问提交数据的最佳方法是首先将请求绑定到表单，然后从 Form 对象中访问值：

```
if ('POST' === $request->getMethod())
{
    $form->bindRequest($request); //Symfony 2.0.x
    //$form->bind($request); //Symfony 2.1.x

    $name = $form->get('name')->getData();
} 
```

# jboss - 詹金斯可以在构建操作之间添加睡眠时间吗？

> ID：13378185
> 
> 赞同：11
> 
> 时间：2012-11-14T11:44:13.630
> 
> 标签：jboss, jenkins, hudson

我正在 Jenkins 中启动一个 JBoss 服务器作为构建操作。下一个操作运行一组测试。我需要在两个动作之间添加睡眠时间。有谁知道如何轻松做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T13:54:39.150

`sleep`您可以在测试执行之前在测试构建操作中添加命令（在 Unix 上）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-09-16T05:35:08.893

如果您想知道如何在这些构建步骤之间休眠，您可以使用`sleep`type `Execute shell`。

```
sleep 30s 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-12-11T12:37:00.300

可以`sleep`在 Jenkins 流水线中使用 step。该步骤包含在[Pipeline: Basic Steps](https://plugins.jenkins.io/workflow-basic-steps)中。

例子：

```
steps {
  sleep time: 250, unit: 'MILLISECONDS'
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-06-17T16:15:42.563

Jenkins 中有一个内置功能可以让您进入睡眠状态，但要找到它并不容易，因为它们的称呼不同。

在以下屏幕截图中

![截屏](../Images/50727ac6a28235fbb0a5624f78134c79.png)

您可以看到`Quiet period`在当前作业（项目）之前“执行”的高级项目选项中有一个设置。

如果您有 3 个作业，您也可以为作业 2 和 3 设置此设置，这将使：

```
job1 -> (sleep -> job2) -> (sleep -> job3) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-27T23:53:05.687

我刚刚添加了一个 Powershell 步骤来运行脚本`Start-Sleep -sec 240`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-07-10T20:58:29.857

以前的所有答案都是正确的，这里是 linux 环境的更详细信息。

1.  在您现有的作业配置中搜索“**添加构建步骤**”

2.  选择 Execute Shell 然后添加**sleep some_number**。

[![在此处输入图像描述](../Images/8ebf6f9350d013603b83386fe9821b2c.png)](https://i.stack.imgur.com/EsZWD.png) [![在此处输入图像描述](../Images/627dd65c5009de7f6bf5f85e598dcf2c.png)](https://i.stack.imgur.com/mVQ54.png)

# iphone - 在 iOS 6 中的 Apple 地图中绘制路线

> ID：13378188
> 
> 赞同：0
> 
> 时间：2012-11-14T11:44:31.007
> 
> 标签：iphone, google-maps, google-maps-api-3, ios6-maps

我想在两个地方之间画一条路线。我有那些地方的 GPS 值。我可以从 google api 获取这些地方之间的 GPS 路线值`http://maps.google.com/maps?output=dragdir&saddr=&daddr=`。

我想知道谷歌会拒绝我的应用程序。因为我发现“ `the Directions API may only be used in conjunction with displaying results on a Google map; using Directions data without displaying a map for which directions data was requested is prohibited. Additionally, calculation of directions generates copyrights and warnings which must be displayed to the user in some fashion. For complete details on allowed usage, consult the Maps API Terms of Service License Restrictions`”

请给我澄清一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:55:05.657

除非您将其与 Google Map 一起使用，否则您不得使用 Google Maps API。要使用方向数据，您必须使用`UIWebView`基于 javascript 的谷歌地图。

# wpf - MahApps.Metro TabControl Laggy 填充 GridView

> ID：13378189
> 
> 赞同：1
> 
> 时间：2012-11-14T11:44:31.973
> 
> 标签：wpf, data-binding, telerik, lag, mahapps.metro

我有一个带有 4 个 TabItems 的 TabControl。在每个 TabItem 内，我都有一个 GridView 和一个工具栏。我使用 MahApps.Metro（用于 Window 和 TabControl）和 telerik RadControls（用于 GridView 和 Toolbar）。我将 MahApps.Metro TabControl 与 AnimatedSingleRowTabControl 一起使用，因此每次切换选项卡时都会有一个选项卡更改动画。

GridView 为空时，动画流畅，但 GridView 填充数据时，则卡顿。每次我切换标签时，它总是滞后大约 1-2 秒。我的表最多只有 73 行。所以，我不认为加载太多。

我不知道这是因为我没有使用正确的方法将 GridView 与 Table 绑定还是其他原因。

我想平滑动画，所以我的解决方案是：

*   切换选项卡时让 GridView 为空，并在幻灯片动画后填充。

*   以某种方式使动画平滑（更改绑定方式）。

但是，我不知道如何完成上述选项：P 任何人都可以帮助我吗？欢迎使用另一种解决方案。

这是我的代码：

```
 <TabControl SelectionChanged="TabControl_SelectionChanged">
       <TabItem Name="Tab_Collection" 
                Header="Collection" 
                Style="{StaticResource MetroTabItem}">
           <StackPanel Margin="20,10">
               <telerik:RadToolBar telerik:StyleManager.Theme="Metro" 
                                   Margin="0,0,0,5"
                                   Width="338"
                                   GripVisibility="Collapsed"
                                   OverflowButtonVisibility="Collapsed"
                                   HorizontalAlignment="Right">
                    <Button Name="Btn_CollectionAdd"
                            Width="80"
                            Height="25"
                            Content="Add"/>
                    <Button Name="Btn_CollectionEdit"
                            Width="80" 
                            Height="25"
                            Content="Edit"/>
                    <Button Name="Btn_CollectionDelete"
                            Width="80" 
                            Height="25"
                            Content="Delete"/>

                    <telerik:RadToolBarSeparator/>

                    <Button Name="Btn_CollectionSearch"
                            Width="80" 
                            Height="25"
                            Content="Search"
                            Click="Btn_Search_Click"/>
                </telerik:RadToolBar>

             <telerik:RadGridView Name="Dgv_Collection" telerik:StyleManager.Theme="Metro"
                                  Margin="0,0,0,10"
                                  Height="505"
                                  BorderBrush="#25A0DA"
                                  BorderThickness="1"
                                  SelectionUnit="FullRow"
                                  AutoGenerateColumns="False"
                                  CanUserInsertRows="False"
                                  CanUserDeleteRows="False" 
                                  CanUserResizeRows="False"
                                  CanUserFreezeColumns="False"
                                  CanUserSortColumns="False"
                                  CanUserResizeColumns="False"
                                  CanUserReorderColumns="False"
                                  ShowGroupPanel="False"
                                  RowIndicatorVisibility="Collapsed"
                                  EditTriggers="None">
                    <telerik:RadGridView.Columns>
                        <telerik:GridViewDataColumn Width="30" 
                                                    Header="#" 
                                                    IsFilterable="False" 
                                                    DataMemberBinding="{Binding id}"/>

                        <telerik:GridViewDataColumn Width="*" 
                                                    Header="Title" 
                                                    IsFilterable="False" 
                                                    DataMemberBinding="{Binding title}"/>
                    </telerik:RadGridView.Columns>
                </telerik:RadGridView>
            </StackPanel>
        </TabItem>

    //I do the same for the rest 3 TabItems

    </TabControl> 
```

我以这种方式绑定 GridView：

```
 private void loadCollection()
    {
       String conn = connection_string;
       String sql = null;

       try
       {
          sql = "SELECT * FROM Tbl_Information";
          SqlCeDataAdapter dataAdapter = new SqlCeDataAdapter(sql, conn);
          SqlCeCommandBuilder commandBuilder = new SqlCeCommandBuilder(dataAdapter);

          DataTable table = new DataTable();
          dataAdapter.Fill(table);
          Dgv_Collection.ItemsSource = table;
       }
       catch (SqlCeException ex)
       {
          MessageBox.Show(ex.Message);
       }

    }

    //load the rest 3 table the same way

    public MainPage()
    {
       InitializeComponent();
       loadCollection();

       //call the rest
    } 
```

注意：我对 WPF 还是很陌生 :)

编辑：我发现它只是在第一次访问 TabItem 时滞后。如果我单击一个 TabItem 然后切换到另一个选项卡，它就会滞后。但是，当我切换回上一个选项卡时，它的动画效果很流畅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-28T04:07:02.367

不要将 Gridview 放在 Tabcontrol 中，否则您必须使用“持久”TabControl

# wordpress - Wordpress XML-RPC 和特色图片

> ID：13378192
> 
> 赞同：1
> 
> 时间：2012-11-14T11:44:36.217
> 
> 标签：wordpress, image, rpc, xml-rpc

我目前正在为客户端开发一个插件，该插件每小时接收一个 xml 提要并将其发布到 wordpress 中，但我无法将特色图像发送到帖子。

我可以很好地发布到 wordpress，但我发布特色图片的所有尝试都失败了。

```
<?php
class XMLRPClientWordPress
{
var $XMLRPCURL = "";
var $UserName  = "";
var $PassWord = "";
// Constructor
public function __construct($xmlrpcurl, $username, $password)
{
$this->XMLRPCURL = $xmlrpcurl;
$this->UserName  = $username;
$this->PassWord = $password;
}
function send_request($requestname, $params)
{
$request = xmlrpc_encode_request($requestname, $params);
$ch = curl_init();
curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
curl_setopt($ch, CURLOPT_URL, $this->XMLRPCURL);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 1);
$results = curl_exec($ch);
curl_close($ch);
return $results;
}
public function create_post( $title, $body )
{
$title = htmlentities( $title, ENT_NOQUOTES, 'UTF-8' );
$content = array(
    'post_category' => array( 18 ), // my category id
    'post_type' => 'post',
    'post_title' => $title,
    'post_content' => $body,
    'featured_image_url' => 'http://www.geekologie.com/2009/02/18/scary%20clown.jpg',
);

$params = array( 0, $this->UserName, $this->PassWord, $content );
return $this->send_request( 'wp.newPost', $params );
}
}
$objXMLRPClientWordPress = new XMLRPClientWordPress("xxxx/xmlrpc.php" , "xxxxx" , "xxxx");
$objXMLRPClientWordPress->create_post('Hey Chloe','Hope you like the clown'); 
?> 
```

是我目前拥有的，我一直在阅读有关此问题的 wordpress 补丁票，但似乎无法弄清楚如何实际使用新功能

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:54:52.933

它应该是这样的

```
 'wp_post_thumbnail' => $pictureid 
```

您必须将上传图片的 ID 获取到变量中，然后将其分配为 'metaWeblog.newPost' 的 'wp_post_thumbnail' 参数的值

# android - android中的图像处理/匹配

> ID：13378196
> 
> 赞同：1
> 
> 时间：2012-11-14T11:44:47.243
> 
> 标签：android, image-processing, android-image, pattern-recognition

我正在考虑为 android 做一个图像处理应用程序作为我的高年级项目。我想要的基本功能是让用户能够从相机中拍摄照片，然后尝试将其与数据库中某些预先存在的图像进行匹配。

我会将它用于不同的对象，而不是具有不同特征的对象，如钢笔、汽车等。而是像埃菲尔铁塔这样的对象。该应用程序应该能够根据从相机拍摄的照片识别埃菲尔铁塔，并将其与现有的埃菲尔铁塔照片进行比较。

这个项目在 6 个月的时间框架内可行还是完全可行？
android 提供了哪些 API 来完成这项工作？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:05:40.900

我建议使用神经网络，而不是针对要识别的对象对其进行训练。此外，您应该尝试在本地实现模式识别以获得更好的性能。尽管如此，我不相信它在识别错误​​和快速执行方面会很好地工作。此外，您将需要针对您想要识别的每个对象的大型训练数据集，从不同角度拍摄的照片，在白天和晚上，在不同的天气情况下拍摄......如果考虑到图片的 gps 位置，识别性能可能会有所提高采取（从伦敦肯定看不到埃菲尔铁塔）。如果你想让它发挥作用，那将需要付出巨大的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:26:23.853

我在 3 个月左右的时间里完成了与项目相同的事情。没有Andriod API。但是您可以为它构建一个应用程序。在我的项目中，我将快照图像发送到服务器以进行匹配，服务器具有用于构建图像的数据库，该数据库使用“词袋”模型并使用 SIFT/SURF 作为特征提取算法。服务器将根据需要向移动客户端回复信息。有一个教程如何在[这里构建类似的东西](http://www.stanford.edu/~dmchen/teaching.html)

# sql - 仅在全部为真时返回行

> ID：13378203
> 
> 赞同：4
> 
> 时间：2012-11-14T11:45:22.157
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

在轻微的心理纠结中，我希望这比我想象的要容易。得到以下表格：

```
create table #x
(
handid int,
cardid int
)
insert into #x
values
(1,2),(1,3),(1,4),(1,5),(1,6),(1,7),(1,8),
(2,2),(2,3),(2,4),(2,300),(2,400),(2,500),(2,8),
(3,2),(3,3),(3,4),(3,300),(3,400),(3,7),(3,8),
(4,2),(4,300),(4,400),(4,500),(4,6),(4,7),(4,8)

create table #winners(cardid int)
insert into #winners values(300),(400),(500)

select a.* 
from 
        #x a 
        inner join #winners b
            on
            a.cardid = b.cardid 
```

这将返回以下内容：

![在此处输入图像描述](../Images/960cc6a913a6e8fc53ccbc6a57a09e88.png)

*我只希望此查询在 a 的所有*三个`cardid`s 都存在时返回行`handid`。因此，所需的结果集将不包括`handid`3。

这是现实的模型。实际上 #x 包含 500 条磨机记录。

**编辑**

好的 - 实际上有*赢家*是由`#winners`具有可变数量记录的数据集组成的。因此，将原始代码修改为以下结果集不应包含`handId`1 或`handId`3。我还在结果集中得到了一些不需要的重复记录：

```
create table #x
(
handid int,
cardid int
)
insert into #x
values
(1,2),(1,3),(1,4),(1,5),(1,6),(1,7),(1,8000),
(2,2),(2,3),(2,4),(2,300),(2,400),(2,500),(2,8),
(3,2),(3,3),(3,4),(3,300),(3,400),(3,7),(3,8),
(4,2),(4,300),(4,400),(4,500),(4,6),(4,7),(4,8)

create table #winners(winningComb char(1), cardid int)
insert into #winners values('A',300),('A',400),('A',500),('B',8000),('B',400)

select a.* 
from 
        #x a 
        inner join #winners b
            on
            a.cardid = b.cardid 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T11:52:04.810

你可以使用这样的东西：

```
select handid
from #x  
where cardid in (select cardid from #winners)
group by handid
having count(handid) = (select count(distinct cardid)
                         from #winners); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/6172)

结果：

```
| HANDID |
----------
|      2 |
|      4 | 
```

根据您的编辑，这是一个返回正确结果的尝试，但是我不确定它是否适用于您拥有的更大的数据集：

```
;with cte as
(   
    select w1.cardid, w1.winningComb, w2.ComboCardCount
    from winners w1
    inner join
    (
        select COUNT(*) ComboCardCount, winningComb
        from winners
        group by winningComb
    ) w2
        on w1.winningComb = w2.winningComb
) 
select a.handid
from x a
inner join cte b
    on a.cardid = b.cardid
where a.cardid in (select cardid from cte)
group by handid, b.ComboCardCount
having COUNT(a.handid) = b.ComboCardCount 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e75f9/1)

结果：

```
| HANDID |
----------
|      2 |
|      4 | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T11:57:18.820

试试这个：

```
with cte as
(select a.* 
from 
        #x a 
        inner join #winners b
            on
            a.cardid = b.cardid ),
cte1 as 
     (select *,ROW_NUMBER() over(partition by handid order by cardid)  as row_num
       from cte),
cte2 as
     (select handid from cte1 where row_num=(select COUNT(*) from #winners) )
select * from cte where handid in (select handid from cte2) 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!3/b8ad5/7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T11:49:22.753

您可以将查询更改为

```
select a.*, count(a.*) as a_count 
from 
    #x a 
    inner join #winners b
        on
        a.cardid = b.cardid 
group by a.handid 
having a_count = 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T12:00:34.210

@Bluefleets (+1) 方法在数据集的性能方面看起来不错；我猜有 5 亿条记录，性能概况将会改变。

我认为 OP 希望输出格式略有不同，稍微适应@Bluefleet 的代码会产生：

```
select * from #x where handid in (
select handid
from #x  
where cardid in (select cardid from #winners)
group by handid
having count(handid) = (select count(distinct cardid)
                         from #winners)
)
and cardid in (select cardid from #winners) 
```

我还会考虑可怕的游标解决方案——因为它可能在大量记录上表现更好，具体取决于数据结构、索引、获胜者数量等。

但是如果没有完整的数据集，我真的不能说。

# php - 对照另一个阵列检查阵列

> ID：13378211
> 
> 赞同：2
> 
> 时间：2012-11-14T11:46:29.987
> 
> 标签：php, arrays

假设我有以下两个数组：

```
$array = Array("Julie","Clive","Audrey","Tom","Jim","Ben","Dave","Paul");
$mandt = Array(1,0,0,1,0,0,1,1); 
```

数字表示名称是否有效。1 有效 0 无效。我需要检查名称`echo`及其名称，然后`"true"`检查名称是否有效`"false"`，即：

> 朱莉：对
> 克莱夫：
> 错 奥德丽：错

ETC...

有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:47:43.240

所以像这样的`foreach()`循环？...

```
foreach($array as $key => $value){
    echo $value.": ";
    echo $mandt[$key] ? "True" : "False";
    echo "<br />";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T11:48:53.333

```
for($i=0, $count=count($array); $i<$count; $i++){
    echo $array[$i] . ": " . ($mandt[$i]? "True":"False") . "<br/>";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T11:50:57.510

```
$values = array_combine($array, $mandt);
$values = array_map(function ($i) { return $i ? 'True' : 'False'; }, $values);

var_dump($values);

// or loop through them, or whatever 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T11:49:30.890

为什么不直接遍历数组？

```
$array = Array("Julie","Clive","Audrey","Tom","Jim","Ben","Dave","Paul");
$mandt = Array(1,0,0,1,0,0,1,1);

$c = count($array);
for ($i = 0; i < $c; i++) {
  echo $array[$i] . ": " . (($mandt[$i] == 1)?"True":"False") . "\n";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T11:52:33.670

您可以创建一个类似 Hashtable 的数组，而不是循环和比较数组，如下所示：

```
$arr = array(
    "Julie" => true,
    "Clive" => false,
    "Audrey" => false,
     "Tom" => true
     [...]
); 
```

这样，你可以运行类似的东西：

```
if ($arr["Julie"]) {
    //Julie is a valid name!
} else {
    //Julie is not a valid name!
} 
```

这将比遍历数组更有效。

# java - APDU读取文件java卡程序

> ID：13378212
> 
> 赞同：1
> 
> 时间：2012-11-14T11:46:33.123
> 
> 标签：java, smartcard, javacard, apdu

我使用 netbeans 制作了 java card 经典小程序

当我对读取操作进行编程时，我检查 APDU 中的第一个字节是否为 0x80，然后检查第二个`0xB0`字节，然后从字节 2 和 3 中获取我将从文件中读取的偏移量，然后获取要读取的字节数从字节 4

作为默认的 APDU

`0x80 0xB0 0x00 0x03 0x60`这从当前文件中读取 60 个字节，从偏移量 3 开始

当我尝试此命令时，它返回错误`Input data length != Lc around line 12`。

经过一些重试后，我发现了问题

问题是编译器假设字节 4 是数据的长度，所以在我的命令中他等待 60 个字节

当我搜索时，我发现字节 4 并不意味着发送数据长度时`INS=B0`

我不知道为什么会这样，当我尝试调试时，编译器甚至没有进入进程函数。

我的脚本文件是

```
0x00 0xA4 0x04 0x00 0X06 0X87 0XF1 0X3F 0X5E 0X22 0X47 0x7F;
0x80 0xA4 0x00 0x00 0x02 0x3F 0x00 0x7F;
0x80 0xA4 0x00 0x00 0x02 0x50 0x15 0x7F;
0x80 0xA4 0x00 0x00 0x02 0x53 0x00 0x7F;
0x80 0xA4 0x00 0x00 0x02 0x50 0x31 0x7F;
0x80 0xB0 0x00 0x00 0x33 0x7F ; 
powerdown; 
```

读取功能是

```
 void read(APDU apdu)
    {
        if(current.isDF())//can not read DF file
        {
            ISOException.throwIt((short)27014);
        }
        EFile f = (EFile)current;
       byte[]data=apdu.getBuffer();
        short offset = Util.getShort(data, (short)2);
        if(offset < 0 || offset > f.length)//can not read
        {
            ISOException.throwIt((short)27270);
        }
        data=apdu.getBuffer();
        short len = (short)(data[4]&0xFF);
       if(offset + len > f.length)//can not read 
       {
            ISOException.throwIt((short)26368);
       }
        apdu.setOutgoing();
        apdu.setOutgoingLength(len);
        apdu.sendBytesLong(f.data, (short)(f.offset + offset),len);//return the data

    } 
```

第一个选择程序然后选择文件然后尝试读取不起作用的数据

但是如果我这样做 `0x80 0xB0 0x00 0x00 0x02 0x00 0x00`，它会从偏移量 0 读取 2 个字节写入，尽管`0x00 0x00`即使在标准中也没有使用final

我的问题为什么我必须将命令中的数据设为红色数据的长度

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:39:31.877

首先，你为什么使用 0x80 作为 CLS 字节？实际上 0x80 是为全局平台命令保留的。如果您的卡是 2G，您应该使用 0xA0，如果您的卡是 3G，最好使用 0x0x（通常 0x00 用于通道 0）。第二个 - 读取二进制 APDU 是 OUT APDU 这意味着 P3 正在指定预期的数据长度，即：

```
0x00 0xB0 P1 P2 P3 
```

其中： P1 编码：

```
|   b8   |   B7   |   b6   |   b5   |   b4   |   b3   |   b2   |   b1   |   Meaning
----------------------------------------------------------------------------------------------------------------------
|   0    |   X    |   X    |   X    |   X    |   X    |   X    |   X    | b7-b1 is the offset to the first byte 
|        |        |        |        |        |        |        |        | to read – P2 is the low part of the offset
----------------------------------------------------------------------------------------------------------------------
|   1    |   0    |   0    |   X    |   X    |   X    |   X    |   X    | SFI referencing used,  b1-b5 are the SFI 
|        |        |        |        |        |        |        |        | and P2 is the offset to the first byte to read 
```

P2 - 偏移

P3 - 是预期长度，您不应在之后指定任何其他字节。如果 P3 等于 0 则将传出 256 字节的数据

有关所有详细信息，请查看标准 ETSI TS 102 221 (http://pda.etsi.org/pda/home.asp?wki_id=,m5nDbNrlEWZbXcW5h86B) - 您不需要帐户，只需输入电子邮件地址即可下载它。

希望它会有所帮助。

KR，-诺迪尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:58:38.167

您没有正确使用 Java Card API。下面我添加了一段我从头顶输入的代码。如果它没有运行，请尝试代码并对其进行一些编辑。

```
void read() {
    final APDU apdu = APDU.getCurrentAPDU();
    final byte[] buf = apdu.getBuffer();

    if(current.isDF()) {
        ISOException.throwIt(ISO7816.SW_COMMAND_NOT_ALLOWED);
    }

    final EFile file = (EFile) current;

    final short fileOffset = Util.getShort(buf, ISO7816.OFFSET_P1);
    if (fileOffset < 0 || fileOffset >= file.length) {
        ISOException.throwIt(ISO7816.SW_INCORRECT_P1P2);
    }

    // Ne (encoded by Le) is the *maximum* size of the response data 
    final short ne = apdu.setOutgoing();            

    // Re is the actual number of the bytes to be returned
    final short fileDataLeft = file.length - fileOffset;
    final short re = ne < fileDataLeft ? ne : fileDataLeft;

    apdu.setOutgoingLength(re);
    apdu.sendBytes(file.data, fileOffset, re);
} 
```

# .net - 视觉工作室探查器 [clr.dll]

> ID：13378213
> 
> 赞同：4
> 
> 时间：2012-11-14T11:46:39.047
> 
> 标签：.net, profiler

我正在尝试使用内置分析器在 Visual Studio 中分析 .NET 应用程序。跟踪 CPU 样本，我遇到了一些奇怪的事情。在应用程序的一部分中，我有以下内容（为清楚起见进行了简化）：

```
var requestObject = new RequestObject(parameters);
var result = GetResult(requestObject,"stringvalue"); 
```

我看到第二行使用了大约 10% 的样本。然而，“GetResult()”方法只使用了大约 7%，其余的似乎在 [clr.dll] 中。我知道 clr.dll 负责垃圾收集、JIT 编译、上下文切换等，并且“GetResult()”方法相当复杂（跨越多个程序集，可能使用多个线程），因此其中一些操作需要一旦方法返回就被采取。'RequestObject' 也有点复杂，因此可能与它有关。

我的问题是：我可以准确地追踪这里发生的事情，我可以做些什么来让它更快？请注意，3% 听起来并不多，但在程序的生命周期中，“GetResult()”将被调用很多次，即使在测试时它只运行一次。我可以减少应用程序的响应时间，这一点非常重要。

非常感谢您的任何答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:00:32.717

您并不是唯一一个试图弄清楚探查器输出的含义的人。SO有很多这样的问题。我在一个大型 .net 应用程序中工作，我尝试了各种分析器，我知道这不是人们所学的，但真正有效的是[*这种方法*](https://stackoverflow.com/a/378024/23771)。一方面，您可以在初始化期间采集一些样本，并在基本运行时采集其他样本。您不必将两者叠加在一起并尝试猜测没有另一个阶段的每个阶段的负载情况。

此外，如果您只看 CPU 时间，您会因为额外的 I/O 而错过任何加速机会。你不应该假设没有任何东西，或者它是微不足道的。如果您确实设法找到了仅 CPU 加速的机会并修复它，那么您没有找到的部分将成为整体的较大部分。您可能会遇到这样的情况，如果您找不到其他要修复的东西，您可能会认为没有其他东西，而实际上有，而且可能很大。如果您自己取样，您可以清楚地了解什么是花费时间。

您可能想说“但这不准确！” 好吧，如果有什么你可以修复的，修复它会节省 90% 的时间，但是你的询问是不准确的，说它需要 80% 或 95%，这是否会阻止你修复它并获得 10-倍加速？事实是，当您的目标是实际发现问题而不是仅仅测量它们时，它们越大，需要的样本就越少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T02:20:23.133

您可能对使用可免费下载的[PerfView工具感兴趣。](http://www.microsoft.com/en-us/download/details.aspx?id=28567)我同意 Mike 的观点，在这种情况下（网络请求）CPU 可能不是主要因素，因此使用 CPU 分析器很容易不准确。PerfView 可以进行 CPU 分析，但它也可以进行“挂钟”分析（请参阅 PerfView 欢迎页面上的“挂钟/阻塞时间”链接）。此视图同时显示 CPU 和阻塞，但在解释数据时更加小心（您必须找到正确的线程并包括感兴趣的线程段）。如果这是一个 ASP.NET 应用程序，则有一个特殊的视图（ASP.NET 线程时间堆栈），这是特别感兴趣的（也在文档中）。

坏消息是，无法替代了解分析器告诉您的内容，因此您将不得不花一些时间了解该工具向您展示的内容。我认为这是更值得的，并且有[PerfView 视频](http://channel9.msdn.com/Series/PerfView-Tutorial)，以及内置在工具中的相当好的文档来帮助你，但你必须愿意投入一些时间（例如一个小时）。

好消息是，您的投资所获得的回报并非微不足道。您应该能够在一小时内找出您的特定问题，并且通过几个小时的投入，您将能够在几乎任何应用程序中找出各种各样的问题（即使是您没有构建的问题）。该工具非常强大，但强大的功能带来了许多潜在的调查途径，并且具有滥用数据和混淆的能力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T17:42:10.347

this post is old but I wanted to clarify a few things. In the current implementation of the profiler whenever you see [], it means we know the name of the dll but were unable to resolve symbols for it. One reason is that you did not select the microsoft symbol servers in your sysmbol settings. Another possibility is that the module was ngen (wherein you will see []). In that case you will need to generate the ngen pdb to actually get symbols resolved. Once that occurs you should be able to see exacly what functions are using what fraction of the cpu.

# jsf - 如何初始化 Java FacesServlet

> ID：13378221
> 
> 赞同：3
> 
> 时间：2012-11-14T11:47:13.617
> 
> 标签：jsf, jakarta-ee, jsf-2

我需要在 FacesServlet 启动时运行一些代码，但由于 FacesServlet 被声明为 final，我无法扩展它并覆盖 init() 方法。

特别是，我想在开发和测试期间将一些数据写入数据库，在 hibernate 删除并创建数据模型之后。

有没有办法配置 Faces 以运行某些方法，例如在 faces-config.xml 中？还是最好创建一个进行初始化的单例bean？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T12:17:49.407

使用[预先初始化的](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ManagedBean.html#eager%28%29) [应用程序范围的](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ApplicationScoped.html) [托管 bean](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ManagedBean.html)。

```
@ManagedBean(eager=true)
@ApplicationScoped
public class App {

    @PostConstruct
    public void startup() {
        // ...
    }

    @PreDestroy
    public void shutdown() {
        // ...
    }

} 
```

*（类名和方法名其实无关紧要，你可以自由选择，都是关于注解的）*

这保证在 启动*后*`FacesServlet`构建，因此`FacesContext`将在必要时可用。`ServletContextListener`这与其他答案所建议的相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:53:09.873

您可以实现自己的[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)，它会在 Web 应用程序启动时收到通知。由于它是一个托管容器，因此您可以注入资源，您可以随心所欲地做任何事情。另一种选择是使用@Startup 创建一个@Singleton ejb 并在它的@PostCreate 方法中完成工作。通常 ServletContextListener 可以正常工作，但是如果您的耳朵中有多个 Web 应用程序并且它们都共享相同的持久性上下文，您可以考虑使用 @Singleton bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T11:57:04.467

嘿，您可能想在这里使用某些方面。只需将其设置为之前运行

```
 void   init(ServletConfig servletConfig) 
      //Acquire the factory instances we will 
```

//这是从[这里](http://docs.oracle.com/javaee/6/api/javax/faces/webapp/FacesServlet.html)

也许[这](http://jsf-tying-it-all-together.blogspot.ro/2012/02/aop-aspect-oriented-programming.html)会对你有所帮助。

# emacs - org-mode 中的 Emacs 有序列表

> ID：13378222
> 
> 赞同：6
> 
> 时间：2012-11-14T11:47:18.483
> 
> 标签：emacs, org-mode

是否可以在 org-mode 中创建嵌套有序列表：

```
1\. task-1
1.1\. task-1-1
1.2\. task-1-2
1.2.1\. task-1-2-1 
```

能够使用选项卡隐藏它们并附加 TODO 和 DONE 关键字？因为知道我们必须完成多少任务以及剩下多少任务总是很方便。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T15:51:17.807

是的，只是继续嵌套它们，在每个级别缩进一点：

```
* The almighty header
  - item 1
  - item 2
    - item 2.1
    - item 2.2
      - item 2.2.1
    - item 2.3
  - item 3 
```

这一切都`tab`可以。

对于关键字和计数，我想您指的是统计 cookie（请参阅[此答案](https://stackoverflow.com/a/13372929/1449460)）。

只需将[复选框](http://orgmode.org/manual/Checkboxes.html)添加到您的列表项（`[ ]`待办事项和`[X]`已完成），然后在标题上放置一个计数器（`[/]`或）。`[%]`更新它`C-c C-c`。

```
 * The almighty header [1/3]
   - [X] item 1
   - [ ] item 2
     - [X] item 2.1
     - [X] item 2.2
       - [X] item 2.2.1
     - [ ] item 2.3
   - [ ] item 3 
```

照原样，它只计算第一个子级别，但您可以根据`org-hierarchical-todo-statistics`需要设置变量。

至于`TODO`列表项的真正关键字，据我所知，这只是一个很大的**NO**  ：*如果您需要它们，请使用 headers 而不是 lists*或[inlinetasks](http://orgmode.org/w/?p=org-mode.git;a=blob;f=lisp/org-inlinetask.el;h=01f861e611aee4c24fcf7184ea191962be83be70;hb=HEAD)。

# c - 嵌入 Ruby 和编译

> ID：13378223
> 
> 赞同：4
> 
> 时间：2012-11-14T11:47:18.860
> 
> 标签：c, ruby, makefile

如何编译嵌入 Ruby 的 C 应用程序？

什么是`-l`国旗？我还缺少其他东西吗（链接到确切的 ruby​​ 版本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:51:45.123

嵌入语言通常将解释器与嵌入它的二进制文件`-l`链接，将库与程序链接，您可以尝试：

```
gcc -Wall -I/usr/include/ruby-1.9.1/ myprog.c -o myprog -lruby 
```

请注意，您可能也需要包含此内容，或在您的平台上包含类似内容：

```
-I/usr/include/ruby-1.9.1/x86_64-linux/ 
```

# castle-windsor - 温莎城堡什么时候一次性发布？负担

> ID：13378228
> 
> 赞同：2
> 
> 时间：2012-11-14T11:47:39.280
> 
> 标签：castle-windsor, lifecycle, transient

我们使用的是温莎城堡 2.1.0.6655。

我想为解析的对象使用瞬态生命周期，但我想检查这个版本的 Castle 如何处理具有依赖关系的瞬态。如果我使用我的即时窗口（visual studio），我可以看到解析、处理和最终释放的效果，一直在检查解析的对象是否被释放。

例如。

```
resolved = container.Resolve(Id);

container.Kernal.ReleasePolicy.HasTrack(resolved)
= true

resolved.Dispose()
container.Kernal.ReleasePolicy.HasTrack(resolved)
= true

container.release(resolved)
container.Kernal.ReleasePolicy.HasTrack(resolved)
= false 
```

我担心的是这些对象在请求之间继续被跟踪，因为它们从未被释放，这意味着内存使用量继续上升。

我读过 Component Burden 与这个问题有关，但我无法确切地找出 Castle 2.0 及更高版本中的内容。

“释放”的困难在于，解析的对象实际上是服务的一部分，它们的用途是提供 ORM 函数和映射。我不确定在这些情况下引用要释放的容器是否正确。

我想知道是否有办法让我查看容器在给定点引用了多少对象，而不必使用内存分析器，因为我们没有可用的。

我想我也许可以使用以下内容：

container.Kernel.GetHandlers()

使用我正在寻找的类型，查看跟踪的事件是否在增加？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T20:53:04.563

Vesion 2.1 即将迎来它的 4 岁生日。我强烈建议您升级到 3.1 版。

不仅因为不再支持 v2.1 并且 v3.1 更新很多，有许多错误修复，而且它在跟踪方式上也有一些重大改进。

同样在 v3.1 中，您将能够启用性能计数器，该计数器将实时向您报告发布策略正在跟踪的实例数量。

解决您所指的特定问题，这听起来像是一个旧的线程错误，该错误已在沿途某处修复。升级的另一个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:08:03.390

windsor 必须与 R(egister)R(esolve)R(elease) 模式一起使用。

默认情况下（您绝对应该坚持...）所有组件都由容器跟踪/拥有...这就是温莎之美！

在您（或容器本身）调用 Release 之前，无论您是否直接调用 Dispose（根据您的示例），实例都将保留在内存中。

如此说来，注册为 Transient 的组件应该仅被称为 w/composition root，换句话说，它只是作为依赖图的第一个对象或通过工厂（后期依赖）。当然请记住，在依赖图中使用[工厂](http://stw.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx)可能需要实现 RRR 模式显式。

# ruby-on-rails-3 - OAuth::Unauthorized (403 Forbidden) dropbox-api

> ID：13378235
> 
> 赞同：1
> 
> 时间：2012-11-14T11:47:50.730
> 
> 标签：ruby-on-rails-3, dropbox-api

我在这一行的回调中收到错误未授权：

request_token.get_access_token(:oauth_verifier => 参数[:oauth_token])

下面是我的控制器代码：

```
def new
   consumer      = Dropbox::API::OAuth.consumer(:authorize)
   request_token = consumer.get_request_token
   @dropbox_auth = request_token.authorize_url(:oauth_callback => dropbox_callback_url)
end 
```

**打回来：**

```
def dropbox_callback
   consumer      = Dropbox::API::OAuth.consumer(:authorize)
   request_token = consumer.get_request_token
   request_token.get_access_token(:oauth_verifier => params[:oauth_token]) **here is the line where I am getting the error**

   client = Dropbox::API::Client.new :token => token, :secret => secret
end 
```

# php - 运行 php mysql_query 50 by 50 而不是全部一次

> ID：13378236
> 
> 赞同：-1
> 
> 时间：2012-11-14T11:48:03.460
> 
> 标签：php

我的 sql 表在行中包含脱机访问令牌包含 id 列和访问令牌我想编辑代码以运行 $output 为从 1 到 50 的 ids 然后下一个按钮运行下一个 50 直到全部完成而不是一次全部运行

```
 <?php

require './config.php';
require './facebook.php';

//connect to mysql database
mysql_connect($db_host, $db_username, $db_password);
mysql_select_db($db_name);
mysql_query("SET NAMES utf8");

//Create facebook application instance.
$facebook = new Facebook(array(
  'appId'  => $fb_app_id,
  'secret' => $fb_secret
));

$output = '';

//if form below is posted- 
//lets try to send wallposts to users walls, 
//which have given us a access_token for that
if(isset($_POST['send_messages'])){

    //default message/post
    $msg =  array(
        'message' => 'date: ' . date('Y-m-d') . ' time: ' . date('H:i')
    );

    //construct the message/post by posted data
    if(isset($_POST['message'])){
        $msg['message'] = $_POST['message'];
    }
    if(isset($_POST['url']) && $_POST['url'] != 'http://'){
        $msg['link'] = $_POST['url'];
    }
    if(isset($_POST['picture_url']) && $_POST['picture_url'] != ''){
        $msg['picture'] = $_POST['picture_url'];
    }

    //get users and try posting our message/post
    $result = mysql_query("
        SELECT
            *
        FROM
            offline_access_users
    ");

    if($result){
        while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
            $msg['access_token'] = $row['access_token'];
            try {
                $facebook->api('/me/feed', 'POST', $msg);
                $output .= "<p>Posting message on '". $row['name'] . "' wall success</p>";
            } catch (FacebookApiException $e) {
                $output .= "<p>Posting message on '". $row['name'] . "' wall failed</p>";
            }
        }
    }
}

?><!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="et" lang="en">
    <head>
        <title>Batch posting</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style type="text/css">
            body { font-family:Verdana,"Lucida Grande",Lucida,sans-serif; font-size: 12px}
        </style>
    </head>
    <body>
        <h1>Batch posting</h1>
        <form method="post" action="">
            <p>Link url: <br /><input type="text" value="http://" size="60" name="url" /></p>
            <p>Picture url: <br /><input type="text" value="" size="60" name="picture_url" /></p>
            <p>Message: <br /><textarea type="text" value="" cols="160" rows="6" name="message" />Message here</textarea></p>
            <p><input type="submit" value="Send message to users walls" name="send_messages" /></p>
        </form>
        <?php echo $output; ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:07:56.030

```
<?php

require './config.php';
require './facebook.php';

//connect to mysql database
mysql_connect($db_host, $db_username, $db_password);
mysql_select_db($db_name);
mysql_query("SET NAMES utf8");

//Create facebook application instance.
$facebook = new Facebook(array(
  'appId'  => $fb_app_id,
  'secret' => $fb_secret
));

$output     = '';
$isHaveNext = false;

if (isset($_POST['send_messages'])) {

    //default message/post
    $msg = array(
        'message' => 'date: ' . date('Y-m-d') . ' time: ' . date('H:i')
    );

    //construct the message/post by posted data
    if (isset($_POST['message'])) {
        $msg['message'] = $_POST['message'];
    }
    if (isset($_POST['url']) && $_POST['url'] != 'http://') {
        $msg['link'] = $_POST['url'];
    }
    if (isset($_POST['picture_url']) && $_POST['picture_url'] != '') {
        $msg['picture'] = $_POST['picture_url'];
    }

    // get offset
    $offset = isset($_POST['offset']) ? intval($_POST['offset']) : 0;

    // get total rows count
    $query = mysql_query("SELECT COUNT(1) FROM offline_access_users LIMIT 1");
    $rows  = mysql_fetch_array($query);
    $total = $rows[0];

    //get users and try posting our message/post
    $result = mysql_query("SELECT * FROM offline_access_users LIMIT 50 OFFSET $offset");

    if ($result) {
        while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
            $msg['access_token'] = $row['access_token'];
            try {
                $facebook->api('/me/feed', 'POST', $msg);
                $output .= "<p>Posting message on '" . $row['name'] . "' wall success</p>";
            } catch (FacebookApiException $e) {
                $output .= "<p>Posting message on '" . $row['name'] . "' wall failed</p>";
            }
        }
    }

    // next
    if ( $total > ($offset + 50) ) {
        $isHaveNext = true;
        $offset += 50;
        ?>
        <form action="" method="post">
            <input type="hidden" name="message" value="<?php echo $_POST['message'] ?>">
            <input type="hidden" name="url" value="<?php echo $_POST['url'] ?>">
            <input type="hidden" name="picture_url" value="<?php echo $_POST['picture_url'] ?>">
            <input type="hidden" name="offset" value="<?php echo $offset ?>">
            <input type="submit" name="send_messages" value="Next">
        </form>
        <?php
        echo $output;
    }
}

if ($isHaveNext) exit(1);

?>
<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="et" lang="en">
    <head>
        <title>Batch posting</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style type="text/css">
            body { font-family:Verdana,"Lucida Grande",Lucida,sans-serif; font-size: 12px}
        </style>
    </head>
    <body>
        <h1>Batch posting</h1>
        <form method="post" action="">
            <p>Link url: <br /><input type="text" value="http://" size="60" name="url" /></p>
            <p>Picture url: <br /><input type="text" value="" size="60" name="picture_url" /></p>
            <p>Message: <br /><textarea type="text" value="" cols="160" rows="6" name="message" />Message here</textarea></p>
            <p><input type="submit" value="Send message to users walls" name="send_messages" /></p>
        </form>
<?php echo $output; ?>
    </body>
</html> 
```

**奖励：**使用[PDO](http://www.php.net/manual/en/pdo.connections.php)而不是 mysql_* 函数。

# essbase - 我可以使用 Excel 加载项/智能视图更新 Essbase 中的数据吗

> ID：13378237
> 
> 赞同：0
> 
> 时间：2012-11-14T11:48:05.380
> 
> 标签：essbase

我可以使用 Excel 插件/智能视图将新数据/现有数据更新到 Essbase 中，就像我将数据更新到 Palo 多维数据库中一样？

问候，斯里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:35:56.443

是的。这就是 Lock & Send 的用途。钻取到要更新/加载/更改数据的交叉点后，直接在 Excel 中输入。然后使用插件或 SmartView 执行锁定操作。这会告诉 Essbase 您想要更新当前显示在电子表格中的数据。然后执行发送操作。这会将工作表上的所有数据上传回数据库，假设您有权更改该数据（例如，如果您是只读用户或没有足够的过滤器访问权限，那么您不能更改数据）。请注意，电子表格中的所有数据都将被发送出去——因此导航到您想要更改的最小数据子集很有用。

发送数据后会自动解锁。然后只需检索表格以验证您上传的数据是否确实已上传。例如，如果您尝试上传到动态计算的成员，那么它将不起作用。另请注意，通常加载数据时，每个交点都是 Level-0 成员，如果不是，则数据库中的后续聚合/计算可能会删除您刚刚上传的数据。

# ruby-on-rails - 在 CanCan 中通过多项操作进行授权

> ID：13378239
> 
> 赞同：3
> 
> 时间：2012-11-14T11:48:16.237
> 
> 标签：ruby-on-rails, authorization, cancan

在授权方面，我试图更好地了解 CanCan 的功能。想象一下这个控制器动作：

```
def update
  if can? :action, Model or can? :resolve, Model or can? :authorize, AnotherModel
    # My Code here
    respond_with @model
  else
    raise CanCan::AccessDenied.new(nil, :update, Model)
  end
end 
```

我在尝试使用`authorize!`. 据我所见（也在查看签名）`authorize!`只接受一个权限（操作）和一个主题，并带有一条可选消息，如下所示：

```
def authorize!(action, subject, *args)
  # code
end 
```

有没有一种我可能会忽略的方法来指示授权检查多个操作？将两个授权一个接一个将充当`AND`权限之间的条件，我希望它像一个`OR`条件一样工作，基本上类似于上面的自定义代码（`AuthorizationNotPerformed`在CanCan中有提高的问题，可以避免`skip_authorize_resource`哪个不是我真的很想做的事情）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T16:53:29.080

您可以创建[自定义操作](https://github.com/ryanb/cancan/wiki/Custom-Actions)并创建任意数量的`or`-conditions。

```
can :my_update_action, Project do |project|
  can?(:read, ModelX) || can?(:read, ModelY) || ... 
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T11:49:52.510

最后，我在能力类中添加了这个相当不错的解决方案：

```
def multi_authorize!(*actions, message_hash)
    message = nil
    if message_hash.kind_of?(Hash) && message_hash.has_key?(:message)
      message = message_hash[:message]
    end
    auth = false
    actions.each do |act|
      auth = auth || can?(act[0], act[1])
    end
    if !auth
      message ||= unauthorized_message(actions[0][0], actions[0][1])
      raise CanCan::AccessDenied.new(message, actions[0][0], actions[0][1])
    end
end 
```

包括控制器的助手：

```
module CanCanAddition
  def multi_authorize!(*args)
    @_authorized = true
    current_ability.multi_authorize!(*args)
  end
end

if defined? ActionController::Base
  ActionController::Base.class_eval do
    include ApplicationHelper::CanCanAddition
  end
end 
```

我这样称呼：

```
 def create
    multi_authorize! [:create, Model1], [:authorize, Model2], :message => "You are not authorized to perform this action!"
    # other code...
  end 
```

**警告：**由于能力类中的代码，您必须提供消息，否则最后一对授权将无法通过`*args`。我需要一些时间来克服这个问题，但我认为解决方案的想法很合适。

# java - 如何修改默认 JVM 设置

> ID：13378240
> 
> 赞同：1
> 
> 时间：2012-11-14T11:48:19.983
> 
> 标签：java, jvm

我想修改默认`jvm`设置，比如`gc policy`and `Xmx`。由于某种原因，我无法修改java程序的启动命令来添加这些设置。有没有办法做到这一点？

谢谢。

[更新]

抱歉我没有描述清楚。

它类似于从另一个服务器程序启动的服务器端作业程序。由于默认 Xmx 太大（在 64 位服务器上），minor GC 时间太长，几乎 1 秒。所以我想改变默认的GC策略来测试。目前，无法修改服务器程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:59:48.637

您可以让 Java 程序自行重新启动。您可以有一个首先调用的引导程序主程序。然后，它`Runtime.exec(...)`使用您需要运行不同的命令行选项执行`Class.main()`实际程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:55:40.460

简短的回答：根据您的要求，您无法做到这一点。

理论上你有两种可能性：

1.  通过命令行选项提供设置：

    > 我无法修改java程序的启动命令来添加这些设置

2.  在运行时更改设置：

    > [但是这是不可能的](https://stackoverflow.com/questions/2884260/java-increase-xmx-dynamically-at-runtime)

# c++ - C++ 字符串 - 如何为 wstring 实现这个“IsEmptyOrSpace(string)”方法？

> ID：13378241
> 
> 赞同：1
> 
> 时间：2012-11-14T11:48:24.737
> 
> 标签：c++, string, encoding

好的，我在 StackOverflow 上搜索了如何检查字符串是空的还是空格。但是，它只适用于 ANSI 字符串。我怎样才能让它与 a 一起工作`wstring`？

这是代码：

```
#include <string>
using namespace std;

//! Checks if a string is empty or is whitespace.
bool IsEmptyOrSpace(const string& str) {
    string::const_iterator it = str.begin();

    do {
        if (it == str.end())
            return true;
    } while (*it >= 0 && *it <= 0x7f && isspace(*(it++)));
    // One of these conditions will be optimized away by the compiler.
    // Which one depends on whether the characters are signed or not.

    return false;
} 
```

我的第一个想法是更改`isspace(*(it++))`为`iswspace(*(it++))`，但之前的两个条件仅适用于 ASCII，对吗？到目前为止，这是我尝试将函数调整为`wstring`'s 的内容：

```
bool IsEmptyOrSpaceW(const wstring& str) {
    String::const_iterator it = str.begin();

    do {
        if (it == str.end())
            return true;
    } while (*it >= 0 && *it <= 0x7f && iswspace(*(it++)));
    // One of these conditions will be optimized away by the compiler.
    // Which one depends on whether the characters are signed or not.

        // Do I need to change "*it >= 0 && *it <= 0x7f" to something else?

    return false;
} 
```

我的方法接近正确吗？无论哪种方式，我怎样才能实现这个`IsEmptyOrSpace()`函数的 Unicode 版本？

**编辑：** 好的，如果您需要知道为什么要进行`*it >= 0 && *it <= 0x7f`测试，我不能告诉您，因为我不知道。我从这个问题的答案中得到了函数的代码：[C++ 检查字符串是空格还是空](https://stackoverflow.com/questions/6325483/c-check-if-string-is-space-or-null "C++ 检查字符串是空格还是空") 所以让我从头开始，一般来说，我如何检查 a`wstring`是空的还是只是空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:04:04.120

> 但是之前的两个条件只适用于 ASCII，对吧？

这是正确的。他们确保该值符合以下前提条件`isspace`：参数“必须具有 an`unsigned char`或 EOF 的值”。严格来说，你只需要检查，如果是无符号的`*it >= 0`，应该优化掉；`char`或者，如评论中所述，您可以将值转换为`unsigned`.

`iswspace`没有这样的先决条件，所以只需从宽版本中删除这些检查：

```
bool IsEmptyOrSpaceW(const wstring& str) {
    wstring::const_iterator it = str.begin();

    do {
        if (it == str.end())
            return true;
    } while (iswspace(*(it++)));

    return false;
} 
```

就风格而言，没有必要添加一个奇怪的疣`W`来指示参数类型，因为您可以`IsEmptyOrSpace`使用不同的参数类型进行重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:24:34.983

```
bool IsEmptyOrSpaceW(const wstring& str) {
  return str.length() == (size_t)std::count(str.begin(), str.end(), L' ');
} 
```

或者

```
// this code works for string and wstring
    template <typename CharType>
    bool IsEmptyOrSpace(const std::basic_string<CharType>& str)  {
      return str.length() == (size_t)std::count(str.begin(), str.end(), CharType(32));
    } 
```

> 实际上，还有其他类型的空白，例如制表符，我不确定这段代码是否处理这些空白字符。

如果我们想处理所有这些空白字符，我们可以找到 isspace 函数返回 false 的第一个符号

```
template <typename CharType>
bool IsEmptyOrSpace(const std::basic_string<CharType>& str)  {
  return str.end() == std::find_if(str.begin(), str.end(), 
          std::not1(std::ptr_fun((int(*)(int))isspace)));
} 
```

# c - 浮点值 0 大于 0

> ID：13378242
> 
> 赞同：3
> 
> 时间：2012-11-14T11:48:34.493
> 
> 标签：c, floating-point

我不能用一个简单的程序来重现这个，但是在我的程序的某个地方我有类似的东西：

```
float e = f(...);
if (e > 0.0f) {
    ... 
```

`printf("%f", e)`表明`e`是`0.000000`， 但`e > 0.0f`是 真的 ...... 也是`e > 0`和`e > 0.0`。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T11:51:25.107

The floating point value is larger than zero, but less than 1e-7\. It's printing issue. Use scientific notation printf("%e", value); or "%g" for shortest notation.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T11:51:48.150

The fact that `printf("%f", e)` shows it to be zero doesn't mean anything, because `printf` rounds the value both to decimal floating point and to the precision of the output, so very small numbers larger than 0 are likely to be put out as 0.

Try `printf("%e", e)` or `printf("%.17f", e)` and see what happens.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T12:08:00.500

问题是浮点值大于 0，但小于 printf 用来打印浮点数的精度`%f`。您可以使用`%e`或`%g`以获得更好的结果，如以下程序所示。

```
#include <math.h>
#include <stdio.h>

void main(void)
{
  int i;
  float e;

  for (i = 1; i < 64; i++) {
    printf("Decimal places: %d\n", i);

    e = 1.0 / pow(10, i);

    if (e > 0.0f) {
      printf("Value displayed with %%e: %e > 0.0f\n", e);
      printf("Value displayed with %%f: %f > 0.0f\n", e);
      printf("Value displayed with %%g: %g > 0.0f\n\n", e);

    }
  }
} 
```

*您需要使用数学库编译它*。 *对于 gcc 使用：`-lm`*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T11:54:40.623

你的问题是`e`实际上不是零。它有一些微小的价值，但由于`%f`转换为十进制而被隐藏起来，失去了精度。改为用作您的调试语句，您将`printf("%e",e)`看到其中有一个非零值。

# iphone - 移动表单字段 - 失去焦点

> ID：13378250
> 
> 赞同：1
> 
> 时间：2012-11-14T11:49:10.437
> 
> 标签：iphone, html, cordova, mobile, input

我正在开发一个移动/网络应用程序。当我在移动浏览器（如 iPhone 的 safari 甚至 chrome 移动应用程序）中查看表单域时，除非我按下另一个表单元素或键盘上的“完成”，否则我不会失去对表单域的关注。

我什至将我的代码完全剥离为：

```
<!DOCTYPE html>
<html>
    <head>
       <title>Test</title>
    </head>
    <body>
        <form>
             <input type="text"/>
        </form>
    </body>
</html> 
```

而且我仍然不能通过按别处而失去文本字段的焦点（在移动浏览器中）！

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:59:56.913

尝试：

```
document.body.addEventListener("click", function(evt) {
  var nodeName = evt.target.nodeName.toLowerCase();
  if (nodeName !== "input" && nodeName !== "textarea" && nodeName !== "select") {
    document.activeElement.blur();
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-16T12:39:45.000

我有同样的问题，我发现这个 hack 有效

```
document.body.firstElementChild.tabIndex = 1 
```

这使得正文中的第一个元素可聚焦，因此当您单击“外部”输入时，它会失去焦点。同时，您在该焦点元素上看不到任何视觉故障，因为没有定义样式（除非您的第一个 body 子元素不是 div）

# vb.net - 我如何在 vb.net 中编写这个 JSON 字符串

> ID：13378253
> 
> 赞同：-1
> 
> 时间：2012-11-14T11:49:14.097
> 
> 标签：vb.net

如何在没有序列化程序或第三方 DLL 的情况下在 vb.net 中编写此 JSON 字符串？

```
Dim myString As String = [ { 'a': 'zzz'},{ 'b': 'zzz'}{ 'c': 'zzz'} ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:39:40.230

```
Dim myString As String = "[ { 'a': 'zzz'},{ 'b': 'zzz'},{ 'c': 'zzz'} ]" 
```

您应该在 b 和 c 之间添加一个逗号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:36:36.227

```
Dim myString As String = "[ { 'a': 'zzz'},{ 'b': 'zzz'}{ 'c': 'zzz'} ]" 
```

# ios - CCRenderTexture 和 CCDirector 渲染不同？

> ID：13378261
> 
> 赞同：1
> 
> 时间：2012-11-14T11:49:41.367
> 
> 标签：ios, cocos2d-iphone

我想在我的项目中使用 CCRenderTexture，因为我有很多 CCLabelBMFont，它们大多是静态的。将它们全部添加到我的场景中会导致一些性能问题（是的，您可以使用 BatchNotes 等，但它并没有真正帮助）。所以我将它们渲染成一个纹理，显着提高了性能！但问题是渲染的纹理和直接渲染的节点看起来不一样。我不知道为什么！

我创建了一个 cocos2d-sample 项目并创建了这个：

```
CCSprite* testImage = [CCSprite spriteWithFile:@"N.png"];
testImage.position = ccp(100,100);
CCRenderTexture *rt = [CCRenderTexture renderTextureWithWidth:786 height:1024];
[rt beginWithClear:0 g:0 b:0 a:0];
[testImage visit];
[rt end];
CCSprite* renderedSprite = [CCSprite spriteWithTexture:rt.sprite.texture];
renderedSprite.position = ccp(386,512);
// Flip because CCRenderTexture is flipped
renderedSprite.flipY = YES;
// Add normal node an the rendered sprite
testImage.position = ccp(130,100);
[self addChild:testImage];
[self addChild:renderedSprite]; 
```

结果如下所示： ![质地光泽较少](../Images/1ec502d4ad4c0839b5255f27211d88d7.png)

怎么会这样？我怎样才能让它们看起来一样？右边的 N 是精灵以“正常”的方式添加并且显示正确。左边的 N 是纹理。

编辑：我发现[本教程](http://www.learn-cocos2d.com/2011/12/how-to-use-ccrendertexture-motion-blur-screenshots-drawing-sketches/#rendertexturesprite)暗示混合功能不同。所以我可以寻找正确的功能以使它们看起来相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:08:31.573

我找到了解决方案！我使用[这个例子](http://www.raywenderlich.com/3857/how-to-create-dynamic-textures-with-ccrendertexture)来创建精灵，但是当我再次查看 cocos2d-manual 时，我看到你可以将 CCRenderTexture 直接添加到你的场景中。这就是我所做的，它解决了问题！

所以正确的代码应该是：

```
CCSprite* testImage = [CCSprite spriteWithFile:@"N.png"];
testImage.position = ccp(100,100);
CCRenderTexture *rt = [CCRenderTexture renderTextureWithWidth:786 height:1024];
[rt begin];
[testImage visit];
[rt end];
rt.position = ccp(386,512);
// Add normal node an the rendered sprite
testImage.position = ccp(130,100);
[self addChild:testImage];
[self addChild:rt]; 
```

# android - Dynamically change ViewpagerIndicator Fragment Content Android

> ID：13378264
> 
> 赞同：1
> 
> 时间：2012-11-14T11:49:46.420
> 
> 标签：android, android-viewpager, fragment, viewpagerindicator

I am working on an application using viewpagerindicator.

In my main activity that has the viewpagerindicator, I spin off a thread that does some computation and updates a an instance variable mString of the activity. I want to update a fragment in the viewpagerindicator with the mString. However, I can't seem to figure out the best way to reach the fragment.

Does anyone know of any good samples that do something similar to this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:07:59.240

在您的 Fragment 中创建一个回调对象，将其注册到您的 FragmentActivity。如果 FragmentActivity 中已经设置了 mString，则可以通过回调立即返回，否则，当计算线程完成时，可以通过回调返回字符串。回调方法应该执行 Fragment 需要对字符串执行的任何操作，例如设置 TextView 的文本。

例如，创建一个名为 DynamicDataResponseHandler 的接口，如下所示：

```
public interface DynamicDataResponseHandler {
   public void onUpdate(Object data);
} 
```

然后在您的片段中，按如下方式实现该接口：

```
private class MyStringDataResponseHandler implements DynamicDataResponseHandler {
   @Override
   public void onUpdate(Object object) {
      mYourTextView.setText((String)object);
   }
} 
```

然后，您的 Fragment 可以在其 onCreate 中实例化一个 MyStringDataResponseHandler 对象，通过 FragmentActivity 中的方法将其传递给 FragmentActivity，例如：

```
private MyStringDataResponseHandler mMyStringDataResponseHandler;

public void registerMyStringDataResponseHandler (DynamicDataResponseHandler callback) {
   mMyStringDataResponseHandler = callback;
   if(mString != null) {
      mMyStringDataResponseHandler.onUpdate(mString);
   }
} 
```

在您的处理程序中，无论您在哪里获得 mString 的值，都可以执行以下操作：

```
if(mMyStringDataResponseHandler != null) {
   mMyStringDataResponseHandler.onUpdate(mString);
} 
```

阅读回调的概念，以更好地理解我在上面所做的事情以及您可以使用它们的其他方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T08:38:58.003

您想在 ViewPager 启动后更新 Fragment 的 UI，我说清楚了吗？

好的，在这种情况下

1.  您应该在自定义片段中添加一个公共方法。
2.  在您的活动中找到片段。
3.  计算完成后调用该方法。

这个问题与[此](https://stackoverflow.com/questions/7379165/update-data-in-listfragment-as-part-of-viewpager/12104399)相同。

# javascript - Javascript - 自动开始/停止 setInterval

> ID：13378266
> 
> 赞同：0
> 
> 时间：2012-11-14T11:49:57.183
> 
> 标签：javascript, jquery, html, setinterval

> **可能重复：**
> [如何清除 ID 未知的Interval？](https://stackoverflow.com/questions/6843201/how-to-clearinterval-with-unknown-id)

`setIntervals(function(), time)`我目前在我的页眉部分启动了一系列外部功能。

我现在需要能够从函数中停止和启动这些全局 setIntervals。有很多关于用户输入的问题，但我需要脚本自动完成。本质上，当最初的 setInterval 函数触发时，它将禁用未来的触发，直到用户确认为止。

最好的方法是什么。

Jquery 是可以接受的，甚至是首选。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:56:30.253

您必须将间隔分配给变量，然后使用函数 clearInterval 来停止它。[https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)

```
var interval = setInterval(function(), time)
clearInterval(interval) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:05:05.667

我使用这样的东西：

```
var timers = [];

var timer = function (code, delay) {

   var id = "timer" + timers.length;

    timers.push({ id : id, ref : setInterval(code, delay)});
}

new timer(function(e) { alert("I'm first timer!");}, 1000);                 

​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:20:41.357

```
<input type="button" value="click me" onClick="disableInterval()"/>

<script type="text/javascript">
    $(document).ready(function () {
       var  intervalID = setInterval(yourFunction(), time);
  });
disableInterval = function(){   
 window.clearInterval(intervalID);
}
</script> 
```

# java - 持久化对象时出现 NonUniqueObjectException

> ID：13378268
> 
> 赞同：0
> 
> 时间：2012-11-14T11:50:00.100
> 
> 标签：java, hibernate, jpa

嗨，伙计们，我在尝试将对象数组写入数据库时​​遇到了 Hibernate 问题。基本我有一个从 Web 服务查询构建的对象。这个对象“响应”最多可以包含十个“未付项目”，当我尝试坚持这些时，我的问题就出现了。

实体：

```
@Entity
@Table(name="TABLE_NAME")
public class AccountDetailsRROutput implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id

    private String payeename;

    private String typeunpd;

    private BigDecimal unpdamt;

    @Column(name="TRANSACTION_ID")
    private long transactionId;

    public AccountDetailsRROutput() {
        super();
    }

    // plus all get/sets
}

        //================================================================
        //  Populate the output for the repeating rows table
        //  which can contain a maximum of 10 unpaid items
        //===============================================================
        AccountDetailsRROutput outputRRTable[] = new AccountDetailsRROutput[response.getLineItems().length];

        LOGGER.debug(METHOD_NAME, "Loop through the line items");
        for (int i = 0; i < response.getLineItems().length; i++) {

            //================================================================
            //  Ensure that we have an item so we don't write an empty row
            //================================================================
            if (response.getLineItems()[i].getTypeunpd() == null || response.getLineItems()[i].getTypeunpd() == "") {
                LOGGER.debug(METHOD_NAME, "No unpaid item entry so break out of the the loop");
                break;
            }
            else {
                LOGGER.debug(METHOD_NAME, "We've got an unpaid item so add the details to the DB");

                outputRRTable[i] = new AccountDetailsRROutput();

                outputRRTable[i].setTransactionId(iTransactionID);
                outputRRTable[i].setTypeunpd(response.getLineItems()[i].getTypeunpd());
                outputRRTable[i].setPayeename(response.getLineItems()[i].getPayeeName());
                outputRRTable[i].setUnpdAmt(response.getLineItems()[i].getUnpdAmt());

                //================================================================
                //  Persist the output list DB object
                //================================================================
                LOGGER.debug(METHOD_NAME, "Persist repeating rows table DB object for line item: " + (i+1));
                em_i.persist(outputRRTable[i]);             
            }
        }
    LOGGER.debug(METHOD_NAME, "Finished persisting repeating rows table DB object");
    em_i.flush(); 
```

当我尝试这个时，我收到以下错误：

org.hibernate.NonUniqueObjectException：具有相同标识符值的不同对象已与会话关联：

我可以通过将 emi.persist 更改为 emi.merge 来解决这个问题，但它只是将一个元素写入数据库。该表可以有重复记录，没有pk。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:55:24.697

You probably have more than one item with the same `payeename`. Try defining another id (for example an id composed of `payeename` and `transactionID`).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T12:01:12.757

As per your hibernate mapping `payeename` is your primary key which means there can be only one entry per `payeename` in your database, the exception says `NonUniqueObjectException` which indicate that you are trying to `persist` another row with the same primary key.

**Solution**:

1.  Before inserting, make sure there is no entry in the database with the primary key.

2.  If the primary key already exist instead of insert a new record, do an update.

Hope it helps.

# c# - How to Change Visible Property of ASP.NET Control at RunTime in .NET 3.5

> ID：13378271
> 
> 赞同：0
> 
> 时间：2012-11-14T11:50:30.830
> 
> 标签：c#, javascript, asp.net, html, visual-studio-2008

A Default.aspx page has some controls. Some controls visibility depends upon conditions. Here, what is tend to accomplish is change the visible property at runtime depending upon the conditional value.

Sampel Markup (Default.aspx in Static Mode)

```
<div id="DivBtnImgCopy" runat="server" Visible = "True">
    <asp:ImageButton ID="BtnImgCopy" CssClass="image" ToolTip="Copy Mode" ImageUrl="img/tlb_img_copy.gif" runat="server" OnClientClick="CopyImage(); SelectButton(this,true);return false;" />
</div> 
```

What I tried is write a method in code behind file and tried to get value from that method to set visible property to true or false.

CodeBehindFile (Default.aspx.cs)

```
protected bool ShowHideButton()
    {
        bool bStatus = false;
        try
        {
            if (sCondition == "false")
            {
                bStatus = false;
            }
            else if (sCondition == "true")
            {
                bStatus = true;
            }
            return bStatus;
        }
        catch { }
    } 
```

Sample Markup (Default.aspx in Dynamic Mode)

```
<div id="DivBtnImgCopy" runat="server" visible = "<% =ShowHideButton() %>">
   <asp:ImageButton ID="BtnCopy" ToolTip="Copy Mode" ImageUrl="img/tlb_img_copy.gif"
                                runat="server" />
</div> 
```

But, Getting below error: Cannot create an object of type '**System.Boolean**' from its **string** representation '**<%=ShowHideButton() %>**' for the 'Visible' property.

Any solution or work-around to accomplish this task. Need Help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:00:29.170

最快的方法是让 ShowHideButton 返回一个 bool 而不是 string ；然后 ：

```
 <%
  DivBtnImgCopy.Visible = ShowHideButton();
 %>

<div id="DivBtnImgCopy" runat="server" >
   <asp:ImageButton ID="BtnCopy" ToolTip="Copy Mode" ImageUrl="img/tlb_img_copy.gif"
                            runat="server" />
</div> 
```

最干净的方法是包含`DivBtnImgCopy.Visible = ShowHideButton();`在页面的预渲染事件处理程序中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:57:53.783

我不确定可见的作用。如果您根本不想渲染 div，可以将您的包装在 <% if %> 中：

```
<% if(ShowHideButton()) { %>
<div id="DivBtnImgCopy" runat="server">
   <asp:ImageButton ID="BtnCopy" ToolTip="Copy Mode" ImageUrl="img/tlb_img_copy.gif"
                            runat="server" />
</div>
<% } %> 
```

# sql - 列出两个表中的数据

> ID：13378275
> 
> 赞同：0
> 
> 时间：2012-11-14T11:50:44.980
> 
> 标签：sql

我有两张表staffdetails 和worklog，其中包含员工的开始时间和结束时间。我正在寻找列出执行此 SQL 时未开始工作的一些员工的结果，请参阅以下示例：

员工详细信息表

```
stafid  staffname
100200  John
100201  Jenny
100203  Camas 
```

工作日志表

```
stfid   startime   finishtime
100200  11.30 p.m  12.30 p.m
100201  10.00 a.m  10.30 a.m
100200  12.35 p.m  12.40\. p.m
100200  12.45 p.m
100203  1.30 p.m   2.30 p.m
300200  10.0 p.m   6.00 p.m 
```

输出

```
staffid   stafname
100203    Camas
100201    Jenny 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:58:43.807

```
select  *
from    staffdetails sd
where   not exists
        (
        select  *
        from    worklog w
        where   sd.stafid = w.stfid
                and starttime is not null
                and finishtime is null
        ) 
```

# linux - Create uuid in vmdk without VboxManage

> ID：13378282
> 
> 赞同：2
> 
> 时间：2012-11-14T11:51:06.137
> 
> 标签：linux, uuid

How can I add the uuid to the image of the hard disk *.vmdk? I have no rights install the kernel modules, so any command VBoxManage I get:

```
 WARNING: The vboxdrv kernel module is not loaded. Either there is no module
     available for the current kernel (2.6.32-279.5.2.el6.x86_64) or it failed to
     load. Please recompile the kernel module and install it by

       sudo /etc/init.d/vboxdrv setup

     You will not be able to start VMs until this problem is fixed.
     Unknown application - VBox 
```

Thanks.

# grails - 如何在多项目 grails / gradle 构建中包含依赖 jar？

> ID：13378289
> 
> 赞同：3
> 
> 时间：2012-11-14T11:51:37.180
> 
> 标签：grails, intellij-idea, gradle

我的项目中有以下设置...

*   用于 SOA 风格项目的多项目 gradle 构建，使用 rabbitmq 和 spring 集成连接在一起。
*   包含许多 grails 项目以及普通的 java / groovy 项目来表示服务。
*   除了每个服务项目之外，还有一个项目（jar），其中包含可以使用 spring 集成代理的服务的所有公共接口（和消息）。
*   这些项目使用 gradle 依赖项相互关联，然后我使用 gradle idea 插件生成 IntelliJ 项目文件。

我想做的是：

*   在 grails 项目中包含接口 jar，以便我可以在那里使用 spring 集成通过 rabbitmq 将我的调用代理到服务中。
*   当我运行 grails 应用程序时，会构建此接口 jar 并将其包含在 grails 中。
*   当我从 IntelliJ 运行 grails 应用程序时，它会编译最新版本的接口并将它们包含在 grails 项目中。
*   当我从 gradle 构建整个项目时，让 gradle 正确地将接口 jar 与 grails 应用程序相关联。
*   理想情况下，我希望能够在 gradle 中使用依赖声明来做到这一点，但这可能是一个白日梦......

我有哪些选择？

1.  将任务添加到 gradle 中的 grails 构建生命周期以构建任何依赖的 jar 并将它们复制到 grails lib 文件夹中？
2.  通过使用 Events.groovy 或类似方法调用 grails 来构建和打包依赖的 jar，从而挂钩到 grails 构建生命周期。这将涵盖 IntelliJ 和命令行路由。
3.  将接口构建为 grails 插件？我打折了这一点，因为它们也需要在非 grails 项目中使用。

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:49:38.970

原来我需要做的就是添加以下内容，然后 grails 插件为我处理依赖项......

```
compile project(':dependent-project') 
```

适用于运行应用程序和战争......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:48:10.277

该问题的部分解决方案是同时使用 Gradle 和 Grails maven 插件。我有类似的情况，我正在构建作为 Grails 项目依赖项的 jar。

我选择的方法是`install`将 java 工件放入本地 .m2/repo 中，然后`grails/conf/BuildConfig.groovy`使用 mavenLocal() repo 声明依赖项。

我没有考虑过将 gradle 挂钩到事件生命周期（有趣的想法，顺便说一句），而是定义了一个包装 grails 应用程序的 gradle 项目（执行测试应用程序、运行应用程序等）。我的 grails 应用程序的 gradle 包装器依赖于其他组件的`install`任务，因此它总是检查它是否需要重新构建。

我是 Eclipse 用户，所以我无法评论您问题的 Intellij 部分，但以上内容对我有用，所以我希望它能给您一些想法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:50:05.873

我目前的解决方案是：

*   使用 grails / gradle 插件来构建 grails 项目。
*   使用这个插件来运行我的 grails 应用程序，即。gradle grails-run-app。
*   挂钩到 gradle 中的 grails-run-app 任务（动态创建）以调用构建依赖项并将依赖项复制到 lib 目录的任务。

目前这对 IntelliJ 的整个负载没有帮助，但我将运行我的 gradle 任务作为 IntelliJ 运行配置。

我的 build.gradle 如下（在此示例中，依赖项目被 jarred 并放入 lib 中）：

```
import org.grails.gradle.plugin.GrailsTask

evaluationDependsOn(':dependent-project')

buildscript {
    repositories {
        mavenCentral()
        mavenRepo name: "grails", url: 'http://repo.grails.org/grails/repo'
    }
    dependencies {
        classpath "org.grails:grails-gradle-plugin:1.1.1-SNAPSHOT"
    }
}

repositories {
    mavenCentral()
    mavenRepo name: "grails", url: 'http://repo.grails.org/grails/repo'
}

ext {
    version = "1.0"
    grailsVersion = "2.2.0.RC2"
    grailsTaskPrefix = "grails-"
}

apply plugin: "grails"

dependencies {
    ['dependencies', 'resources', 'core', 'test', 'hibernate', 'plugin-datasource', 'plugin-domain-class', 'plugin-tomcat', 'plugin-services'].each { plugin ->
        compile "org.grails:grails-$plugin:2.2.0.RC2"
    }
    bootstrap "org.codehaus.groovy:groovy-all:2.0.5"
}

// Get hold of the grails-run-app task (which is created on the fly) and add a dependency to the copyDependencies task
project.gradle.afterProject { p, ex ->
    if (p == project) {
        project.tasks.addRule("Grails dependencies") { String name ->
            if (name.startsWith(grailsTaskPrefix)) {
                tasks.getByName(name).dependsOn(copyDependencies)
            }
        }
    }
}

// Build and copy any dependent jar files...
task copyDependencies(type: Sync) {
    from project(':dependent-project').configurations.archives.allArtifacts.files
    into "$projectDir/lib"
} 
```

# google-analytics - get google analytics reports in sugarcrm

> ID：13378296
> 
> 赞同：1
> 
> 时间：2012-11-14T11:52:08.410
> 
> 标签：google-analytics, google-analytics-api, sugarcrm

i need to get the google analytics report on my campaign in my sugarcrm. i am thinking of creating a new module in my sugar to implement this. Please tell me how to proceed?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:18:38.357

Sugar 合作伙伴 Epicom 已经有一个模块可以做到这一点......

[http://www.epicom.com/blog/amandas-blog/custom-google-analytics-module-in-sugarcrm](http://www.epicom.com/blog/amandas-blog/custom-google-analytics-module-in-sugarcrm)

# java - Array List only to read in multiple entries and display

> ID：13378298
> 
> 赞同：0
> 
> 时间：2012-11-14T11:52:13.917
> 
> 标签：java, arrays

This is a simple problem to many of you but I am still unable to solve it after sometime. I am suppose to read in the text file below, and perform a sorting and display out.

the part "HELP" should be a display Band of the student but I am unable to generate after many tries.

```
public class gradesorting {

    public static void main(String[] args) throws IOException {

         BufferedReader reader = new BufferedReader(new FileReader("grades.txt"));   

         List<String> grades = new ArrayList<String>();
         List<String> banding = new ArrayList<String>();
         List<String> student = new ArrayList<String>();
         String line;

            while ((line = reader.readLine()) != null)
              {
                 String[] lines = line.split(":");

             if (lines[0].equals("Student"))
             {
                    Pattern p = Pattern.compile("(?:([^:]*):(\\d*):)");
                    Matcher m = p.matcher(line);

                    while(m.find()) {

                            int i=1;    
                            String name = m.group(i);
                            int grade = new Integer(m.group(i+1));

                             System.out.println("Student with Grade "+ "HELP" + " and Band " + grade + " are," +name);

                    }
             }

             if (lines[0].equals("Band"))
             {
                    Pattern p = Pattern.compile("(?:([^:]*):(\\d*):)");
                    Matcher m = p.matcher(line);

                    while(m.find()) {

                            int i=1;    
                            String grade = m.group(i);
                            int band = new Integer(m.group(i+1));

                             System.out.println("Grade "+ grade + " equal Band " + band);

                    }
             }

             grades.add(line);
             banding.add(line);
             student.add(line);
          }

          reader.close();

}
} 
```

Read in text file

```
(this is only part of the text file)
there will be more lines of students)

Grade:1:2:3:4:5:
Band:D:1:A:2:B:3:C:4:
Student:Fiona:2:Cindy:1:Alyssa:4:
Student:Wendy:4: 
```

my current Output in console..

```
Grade D equal Band 1
Grade A equal Band 2
Grade B equal Band 3
Grade C equal Band 4
Student with Grade HELP and Band 2 are,Fiona
Student with Grade HELP and Band 1 are,Cindy
Student with Grade HELP and Band 4 are,Wendy 
```

ideal output

```
Grade D equal Band 1
Grade A equal Band 2
Grade B equal Band 3
Grade C equal Band 4
Student with Grade D and Band 1 are, Cindy
Student with Grade A and Band 2 are, Fiona
Student with Grade C and Band 4 are, Wendy
Student with Grade C and Band 4 are, Alyssa 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:09:31.727

你必须在java中建立等级和乐队之间的联系。我使用了hashMap。

```
public static void main(String[] args) throws IOException {

     BufferedReader reader = new BufferedReader(new FileReader("grades.txt"));   

     HashMap<Integer, String> map = new HashMap<Integer,String>();

     List<String> grades = new ArrayList<String>();
     List<Integer> banding = new ArrayList<Integer>();
     String line;

        while ((line = reader.readLine()) != null)
          {
             String[] lines = line.split(":");

         if (lines[0].equals("Student"))
         {
                Pattern p = Pattern.compile("(?:([^:]*):(\\d*):)");
                Matcher m = p.matcher(line);

                while(m.find()) {

                        int i=1;    
                        String name = m.group(i);
                        int grade = new Integer(m.group(i+1));

                         System.out.println("Student with Grade "+ map.get(grade) + " and Band " + 
                         grade + " are," +name);

                }
         }

         if (lines[0].equals("Band"))
         {
                Pattern p = Pattern.compile("(?:([^:]*):(\\d*):)");
                Matcher m = p.matcher(line);

                while(m.find()) {

                        int i=1;    
                        String grade = m.group(i);
                        int band = new Integer(m.group(i+1));

                         System.out.println("Grade "+ grade + " equal Band " + band);

                         map.put(band, grade);

                }
         }

      }

      reader.close();}} 
```

# parameters - birt dynamic range parameters

> ID：13378306
> 
> 赞同：0
> 
> 时间：2012-11-14T11:53:00.200
> 
> 标签：parameters, crystal-reports, range, birt, multivalue

I'm a newbye in Birt and I'd like to develop a report that accepts a "multiple and dynamic range parameter". Here you are an example to explain better the problem:

   Dataset:   **table**: Customer   **columns**: idCustomer, name

I'd like that user will be able to insert multiple range of idCustomer to retrieve names.
Ex: user may want customers for id between 205 and 300 and for id between 501 and 670 and for id between 800 and 920...

I usually do the same thing on BO Crystal Report setting "Allow multivalue" and "Allow range values" to the input parameter. Does exists something similar on Birt ?

I upload an image here: [http://i.stack.imgur.com/uvz7F.jpg](http://i.stack.imgur.com/uvz7F.jpg) .It's a BO screenshot for input parameter with "Allow multivalue" and "Allow range values".
Thanks
    GG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:59:59.180

简短的回答：没有。

更长的答案：BIRT 没有选项可以让单个参数采用一系列值。

它确实具有允许单个参数采用多个值的选项，但仅适用于 ListBox 参数。此外，您只能将单个报表参数值绑定到给定的数据集参数，这意味着您无法在数据集查询中选择多个参数值（假设您使用的是关系数据源）；相反，您需要根据参数值在“编辑数据集”对话框的“过滤器”选项卡中向数据集添加过滤器。（这仍然只允许您指定参数的多个单独值，而不是多个值范围。）

（或者，您可以为数据集编写一个 beforeOpen 事件脚本，将参数的多个值直接插入到数据集的查询文本中，而不是将报表参数绑定到数据集参数；但是，这会使您的报表面临以下风险SQL 注入攻击。或者，您可以在 BIRT 中添加一个插件来为您绑定多个参数值。）

因此，您的选择是：

1.  设置单个 ListBox 参数，启用多个值，允许用户选择他们想要的所有单个值，并根据参数值过滤数据集（或使用 beforeOpen 事件脚本或 BIRT 插件）。
2.  设置两个参数（用于范围的开始和结束）以允许用户指定要选择的单个值范围，并将报表参数绑定到查询中的一对等效数据集参数。
3.  设置*n*对参数，允许用户指定最多*n*个取值范围（如设置10个参数，用户最多可以指定5个取值范围），并将报表参数绑定到等价查询中的数据集参数。
4.  设置单个文本框参数以允许用户输入自由格式的范围（例如格式`[205..300],[501..607]`），然后为数据集编写 beforeOpen 事件脚本以解析所需范围的输入参数值并相应地修改查询文本。

请注意，最后一个选项已被强烈弃用，因为它需要更多的工作，删除了指定有效值的选项，并打开您的报告以面临[SQL 注入攻击](http://xkcd.com/327/)的风险。

# mysql - 如何对表中多列的 MySQL 搜索结果进行加权

> ID：13378310
> 
> 赞同：0
> 
> 时间：2012-11-14T11:53:16.847
> 
> 标签：mysql

我目前正在开发一个需要搜索数据库表的网站，`books_for_sale`以匹配以下字段：`isbn_10`, `isbn_13`, `name`, `author`, `publisher`, `description`。

每个字段都需要加权，以便可以按相关性对结果进行排序。

我想使用以下相关性乘数：

```
`isbn` = $searchTerm (30 relevance factor)
`isbn` LIKE $searchTerm% (25 relevance factor)

`name` = $searchTerm (20 relevance factor)
`name` LIKE $searchTerm% (15 relevance factor)
`name` LIKE %$searchTerm% (10 relevance factor)

`author` LIKE $searchTerm (22 relevance factor)
`author` LIKE $searchTerm% (14 relevance factor)
`author` LIKE %$searchTerm% (1 relevance factor)

`description` LIKE %$searchTerm% (2 relevance factor)
`publisher` LIKE %$searchTerm% (1 relevance factor) 
```

当前表 SQL：

```
--
-- Table structure for table `books_for_sale`
--

CREATE TABLE IF NOT EXISTS `books_for_sale` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `seller_id` int(11) NOT NULL,
  `isbn_10` varchar(10) NOT NULL,
  `isbn_13` varchar(13) NOT NULL,
  `name` int(11) NOT NULL,
  `price` int(11) NOT NULL,
  `image_id` int(11) NOT NULL,
  `condition_id` int(11) NOT NULL,
  `author` varchar(50) NOT NULL,
  `publisher` varchar(50) NOT NULL,
  `description` text NOT NULL,
  PRIMARY KEY (`id`),
  KEY `isbn_10` (`isbn_10`),
  KEY `isbn_13` (`isbn_13`),
  KEY `name` (`name`),
  KEY `author` (`author`),
  KEY `seller_id` (`seller_id`),
  KEY `publisher` (`publisher`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

我试过谷歌搜索不同的功能，但没有找到任何有用的东西。如果有人可以帮助我，我将不胜感激，因为我对更高级的 MySQL 功能仍然很陌生。

PS 如果我应该重组我的表格以更好地支持这种类型的搜索功能，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:04:33.210

这是一个有效的语法：

```
SELECT * FROM books_for_sale

ORDER BY   30 * (`isbn_10` = '$searchTerm')
         + 30 * (`isbn_13` = '$searchTerm')
         + 25 * (`isbn_10` LIKE '$searchTerm%')
         + 25 * (`isbn_13` LIKE '$searchTerm%')
         + 20 * (`name` = '$searchTerm')
         + ... 
```

小提琴：[http ://sqlfiddle.com/#!2/2a935/3](http://sqlfiddle.com/#!2/2a935/3)

请注意，这只是一个表达式，因此也将执行：

```
SELECT books_for_sale.* ,
(
    30 * (`isbn_10` = '$searchTerm')
  + 30 * (`isbn_13` = '$searchTerm')
  + 25 * (`isbn_10` LIKE '$searchTerm%')
  + 25 * (`isbn_13` LIKE '$searchTerm%')
  + 20 * (`name` = '$searchTerm')
  + ...
) as `relevance`

HAVING `relevance` > 10
ORDER BY `relevance` DESC 
```

# java - 单独的字符串输入

> ID：13378312
> 
> 赞同：0
> 
> 时间：2012-11-14T11:53:23.507
> 
> 标签：java, loops

我能够分隔字符串输入中的字符，但我的问题是：

`Enter an integer: 123`

输出是：

`Individual digits: 1 Individual digits: 2 Individual digits: 3`

它还复制了不打算使用的“单个数字”。这是我的代码

```
public class gradedExer1A {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Scanner sc = new Scanner(System.in);

        System.out.print("Enter an integer: ");
        String input = sc.nextLine();
        int len = input.length();

        for(int i = 0; i < len ; i++) {

            char in = input.charAt(i);

            System.out.print("Individual digits: " + in + " ");

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:55:01.203

尝试

```
System.out.print("Individual digits: ");
for(int i = 0; i < len ; i++) {

    char in = input.charAt(i);
    System.out.print(in + " ");

} 
```

# c# - 静态 IEnumerator

> ID：13378316
> 
> 赞同：0
> 
> 时间：2012-11-14T11:53:34.380
> 
> 标签：c#, arrays, list, static, enumerator

如何通过实现 Array Wrapper 来最小化开销？

1 为**MyProviderInfos**选择哪种接口/类型？

2~~使用**私有静态**枚举器是否合理？~~不，从 [答案](https://stackoverflow.com/a/13378456/503677)

3 ~~**MyProviderInfos**~~~~是否应该是一个属性以及如何保护其成员不被修改？~~**成员的内部/私人SETTERS（来自相同的答案）**

 **我尝试阅读有关 ICollection、Readonly-Collection、List、IList、Array 的 SO 文章，但仍然对最适合该场景的内容感到困惑：

*   Array MyProviderInfos 由编译时形成，不会（不得）在运行时更改。
*   该类（必须）是可枚举的（使用数组 MyProviderInfos 的元素）并且不需要自定义列表函数（.Add .Remove）。
*   该类具有使用 Array 的静态函数。
*   类必须是非静态的才能支持索引。

代码：

```
 public class MyIdentifiers : IEnumerable<MyProviderInfo>
 {
   //public static IList<MyProviderInfo> getMyProviderInfos() 
   //{ return MyProviderInfos; }

    public static int MyProviderCount()
    {
        return MyProviderInfos.Count;
    }

    public static readonly IList<MyProviderInfo> MyProviderInfos = new[]
    {
        new MyProviderInfo
            {
                MyProvider = MyProvider.FirstProvider,
                Url = "https://www.google.com",                       
            }
    };

    private static IEnumerator<MyProviderInfo> _enumerator = 
((IEnumerable<MyProviderInfo>)MyProviderInfos).GetEnumerator();

    public IEnumerator<MyProviderInfo> GetEnumerator()
    {
        return _enumerator;
        //return ((IEnumerable<MyProviderInfo>)MyProviderInfos).GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:01:56.757

> 为 MyProviderInfos 选择哪种接口/类型？

除非您想限制用户直接可见的功能，否则您应该始终返回*不太通用*的类型（在您的情况下是数组本身）。

作为一般规则，接受最通用的可能类型作为参数是一种好习惯（例如，如果您只想枚举一个集合，然后将该参数声明为`IEnumerable<T>`）并将不太通用的类型作为结果（因此用户可以像`IEnumerable<T>`只需要一样使用它that 或 as `IList<T>`，根据需要，没有脆弱的演员表和转换）。此外，在您的情况下，`IList<T>`支持添加项目，但这将在运行时抛出，因为数组是固定大小的，因此您公开的内容超出了他们实际可以做的事情。

例如：

```
string[] ConvertToTitleCase(IEnumerable<string> names); 
```

当然，您可以返回 an `IEnumerable<string>`too 而不是`string[]`，如果 - 例如 - 实现没有为结果创建任何数组以避免额外的转换，它可能是合适的。

> 使用私有静态枚举器是否合理？

绝对不，枚举器是一个具有状态的对象（查看任何`IEnumerator<T>`实现）然后它不能是静态的（例如，当被不同的线程调用时想象一下）。

> MyProviderInfos 是否应该是一个属性以及如何保护其成员不被修改？

除非您想提供某种延迟初始化，否则它不需要是属性。为了保护它的成员，你唯一能做的就是使它们成为只读的（如果集合本身是只读的并不重要）。如何做到这一点取决于`MyProviderInfo`实施。您可以考虑不`public`为其属性公开任何设置器。例如：

```
class MyProviderInfo
{
    public MyProviderInfo(Provider provider, string url)
    {
        Provider = provider;
        Url = url;
    }

    public Provider Provider
    {
        get;
        private set;
    }

    public string Url
    {
        get;
        private set;
    }
} 
```

或者，无需太多更改，保留现有代码，但将 setter 设置为内部（因此您的库的用户将无法修改它们）：

```
class MyProviderInfo
{
    public Provider Provider
    {
        get;
        internalset;
    }

    public string Url
    {
        get;
        internal set;
    }
} 
```

总结一下，我将其重写为：

```
 public class MyIdentifiers : IEnumerable<MyProviderInfo>
 {
    public int Count
    {
        get { return _myProviderInfos.Count; }
    }

    public IEnumerator<MyProviderInfo> GetEnumerator()
    {
        return ((IEnumerable<MyProviderInfo>)_myProviderInfos ).GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    private static readonly IList<MyProviderInfo> _myProviderInfos = new[]
    {
        new MyProviderInfo
            {
                MyProvider = MyProvider.FirstProvider,
                Url = "https://www.google.com",                       
            }
    };
 } 
```**

# azure - 带有数据库的 azure 上的 Worker 角色

> ID：13378317
> 
> 赞同：2
> 
> 时间：2012-11-14T11:53:45.197
> 
> 标签：azure, azure-sql-database, azure-web-roles

我有一个带有天蓝色数据库的网站，该网站由登录名和密码保护，我想设置一个在后台运行并修改数据库的本地应用程序。我的问题是我应该使用什么服务才能保持安全。在我的研究之后，我应该使用工人角色，但我无法到位，如何工作一个工人角色。我似乎找不到可以指导我进行研究的教程。你能帮我吗 谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:38:47.000

Web Roles 和 Worker Roles 基本上都是在 Windows Server 虚拟机中运行的脚手架。您可以在其中任何一个中运行您的后台应用程序。如果您在 Web 角色中运行它，您将同时扩展您的网站和后台任务（例如，扩展到 3 个实例，获取 3 个网站实例，运行 3 个后台进程实例）。如果您在 Web Role 和 Worker Role 之间进行拆分，则可以单独扩展（例如，Web Role 的 3 个实例，后台进程的 1 或 2 个实例，可能不同的 VM 大小）。您需要在规模灵活性和成本之间做出决定，因为拥有多个角色意味着在任何给定时间运行更多 VM 实例。

如需教程，请查看[Windows Azure 培训工具包](http://www.microsoft.com/en-us/download/details.aspx?id=8396)。有一个动手实验室，用于云服务，它运行一个网站和一个后台任务来处理上传的图像。

# python - Django 模型实例是可散列的吗？

> ID：13378318
> 
> 赞同：27
> 
> 时间：2012-11-14T11:53:51.463
> 
> 标签：python, django, django-models

Django 模型实例是可散列的吗？例如，我可以使用 Django 模型实例作为字典键，还是创建一组唯一模型？

如果它们是可哈希的，是什么导致两个 Django 模型实例被认为是相同的？它是否天真地实现了 Hashable 以便仅在它们是内存中的相同 Python 对象时才认为它们是相同的，还是以某种方式使用 Model 实例的值？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-14T15:14:37.593

模型实例是可散列的。如果它们是相同类型的模型并且具有相同的主键，则它们被认为是相同的。你可以看到这个[定义在`django.db.models.base`](https://github.com/django/django/blob/master/django/db/models/base.py#L456)：

```
class Model(object):

    ...

    def __hash__(self):
        return hash(self._get_pk_val())

    ...

    def __eq__(self, other):
        return isinstance(other, self.__class__) and \
               self._get_pk_val() == other._get_pk_val() 
```

# google-maps - 如何在谷歌地图上绘制铁路路线？

> ID：13378320
> 
> 赞同：1
> 
> 时间：2012-11-14T11:53:53.543
> 
> 标签：google-maps, google-maps-api-3

这是我的代码：

```
function trainRoute(startPoint, endPoint) {
    var polyline = new google.maps.Polyline({ strokeColor: '#af1a1a', strokeWeight: 2 });
    var directionsService = new google.maps.DirectionsService();
    var directionsDisplay = new google.maps.DirectionsRenderer({ polylineOptions: polyline, suppressMarkers: true });
    directionsDisplay.setMap(map);

    var request = {
        origin: startPoint,
        destination: endPoint,
        travelMode: google.maps.DirectionsTravelMode.TRANSIT 
    };

    directionsService.route(request, function (response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);

            var legs = response.routes[0].legs;
            for (i = 0; i < legs.length; i++) {
                var steps = legs[i].steps;
                for (j = 0; j < steps.length; j++) {
                    var nextSegment = steps[j].path;
                    for (k = 0; k < nextSegment.length; k++) {
                        polyline.getPath().push(nextSegment[k]);
                        //bounds.extend(nextSegment[k]);
                    }
                }
            }
        }
    });
} 
```

使用`travelMode: google.maps.DirectionsTravelMode.WALKING`I see the line，但这不是我想要的。我想我需要`.TRANSIT`更多的选择，比如`VehicleType.RAIL`.

我不知道该怎么做！我试过在谷歌上搜索，但找不到任何东西！

* * *

我认为这是正确的方法：

```
var request = {
    origin: puntoPartenza,
    destination: puntoArrivo,
    travelMode: google.maps.TravelMode.TRANSIT
};

directionsService.route(request, function (response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);

        var legs = response.routes[0].legs;
        for (i = 0; i < legs.length; i++) {
            var steps = legs[i].steps;
            for (j = 0; j < steps.length; j++) {
                var transitMode = steps[j].travel_mode;

                if (transitMode == "TRANSIT") {
                    var vehicle = steps[j].transit.line.vehicle.type;
                    if (vehicle == "HEAVY_RAIL") {
                        var nextSegment = steps[j].path;

                        for (k = 0; k < nextSegment.length; k++) {
                            polyline.getPath().push(nextSegment[k]);
                        }                            
                    }
                }

            }
        }
    }
}); 
```

但 ：

1）为什么它只画了一部分路线？

2) 在 DirectionsStatus 返回的 JSON 对象上，还有关于步行和/或 TRANSIT 的信息。那么`travelMode: google.maps.DirectionsTravelMode.TRANSIT`?!?! 是什么意思？

但我明白了`TypeError: google.maps.TransitVehicle is undefined`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:48:19.027

您不能只编写语法并期望它能够工作[Transit VehicleType](https://developers.google.com/maps/documentation/javascript/3.exp/reference#VehicleType)确实包含 RAIL，但[TransitVehicle](https://developers.google.com/maps/documentation/javascript/3.exp/reference#TransitVehicle)没有车辆属性。

Transit 车辆中没有财产车辆。查看“类型”属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-23T13:13:08.837

你可以试试这个，它对我有用，

```
var directionsServiceRequest = {
                    destination: {lat: 39.79, lng: -86.14},
                    origin: {lat: 41.85, lng: -87.65},
                    travelMode: google.maps.TravelMode.TRANSIT,
                    transitOptions: {modes:['TRAIN']}
          }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:47:25.423

您是否在文档中看到了这一点-

[https://developers.google.com/maps/documentation/javascript/reference#TransitVehicle](https://developers.google.com/maps/documentation/javascript/reference#TransitVehicle)。

它可能是 .TRAIN 而不是 .RAIL

# javascript - 使用 RFC 2822、3.6.2 编译的 RegEx

> ID：13378321
> 
> 赞同：2
> 
> 时间：2012-11-14T11:53:55.050
> 
> 标签：javascript, regex, rfc2822

我遇到了 SwiftMailer 拒绝在地址的开头或结尾包含点的电子邮件的问题（类似于内部的多个点）。我想让我的应用程序注意到这些问题。

过滤错误电子邮件地址的正则表达式应该是什么？（错误的意思是那些没有用整个标准编译的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:02:26.033

```
function check(mail) {
  return !mail.match(/^\.|\.$/);
}
check('amshaegar@example.org'); // true
check('amshaegar@example.org.'); // false
check('.amshaegar@example.org'); // false 
```

函数 check 需要一个邮件地址作为字符串，并检查开头或结尾是否**没有点 (.)。**

为了检测多个点（...）以及您的功能将如下所示：

```
function check(mail) {
  return !mail.match(/^\.|\.{2,}|\.$/);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:59:37.613

以下将在字符串的开头或字符串的末尾找到一个点...

```
^\.|\.$ 
```

# android - 如何打开键盘Phonegap Android的大写锁定

> ID：13378322
> 
> 赞同：2
> 
> 时间：2012-11-14T11:53:55.940
> 
> 标签：android, cordova

> **可能重复：**
> [我可以通过android上的代码控制键盘，特别是大写锁定吗](https://stackoverflow.com/questions/7746027/can-i-control-the-keyboard-from-code-on-android-in-particular-the-caps-lock)

我想在 Phonegap Android 的文本框焦点上打开键盘的大写锁定。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:49:54.170

`text-transform: capitalize;` 在 Android上使用输入的 CSS 属性可以实现类似的效果。这不会强制键盘进入 SHIFT 模式，而是强制在模糊的文本框上大写。（在桌面浏览器中，效果是立竿见影的。）除大写字母外的值包括大写和小写，这将分别强制大写和小写。

# c# - C# - 多个生产者线程和单个消费者线程

> ID：13378325
> 
> 赞同：2
> 
> 时间：2012-11-14T11:53:59.093
> 
> 标签：c#, multithreading, thread-safety, blocking, producer-consumer

目前正在处理一个 C# 项目 - 我正在尝试做的一般想法是......

用户有一个或多个包含他们感兴趣的符号的投资组合，每个投资组合将符号上的数据下载到 csv，对其进行解析，然后对数据运行一组规则，根据这些规则的结果生成警报 投资组合应该每当经过设定的时间间隔时下载数据等

我计划让每个投资组合在它自己的线程上运行，这样当间隔过去时，每个投资组合可以继续下载数据，同时解析和运行规则，而不是一个一个地运行。然后应该将警报推送到包含警报队列的另一个线程（！）。当它接收到警报时，它会将它们发送给客户端。

有点多，但是用 C# 解决这个问题的最佳方法是什么 - 使用线程，或者像后台工作人员这样的东西，只是让警报队列在单独的线程上运行？

非常感谢任何建议，对于其中一些东西是新的，所以如果我完全错了，请随时告诉我:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T11:56:16.280

您可以使用[阻塞收集](http://msdn.microsoft.com/en-us/library/dd997371.aspx)。这是 c# 4.0 中的新功能，用于支持生产者消费者场景。

它还支持 1 个消费者和多个生产者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:44:41.360

如果这完全是间隔驱动的，并且您可以在每个间隔结束时将警报上传到客户端，那么您可以使用简化的方法：

当您的间隔计时器触发时：

1.  使用 TPL 启动并发任务来解析数据，为每个任务提供回调方法以将警报传递回 main。
2.  回调将警报写入受锁定语句保护的列表。
3.  等待所有任务完成。然后执行一个继续例程将警报转发给客户端。
4.  重新启动间隔计时器。

如果您需要在上传完成之前开始处理下一个间隔，您可以使用双缓冲方法，您可以写入一个列表，将其提供给上传方法，然后开始将警报写入新列表，切换回来并在您收集和上传警报时在列表之间来回移动。

# ruby-on-rails - Rails 时区和夏令时

> ID：13378327
> 
> 赞同：17
> 
> 时间：2012-11-14T11:54:02.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有一段时间我试图了解这个时区时间是如何工作的，我有一个问题：

今天在我的国家，我们处于夏令时 (GMT-2)。所以我的应用程序的用户输入一个时间，比如上午 11:00 并发布表单。据我所知，rails 会将此日期转换为 UTC 并保存在数据库中（在我的情况下为 mysql），例如：UTC 时间下午 1:00。

当我恢复该记录时，我必须转换为本地时间才能显示。好的？

我的问题是，假设这个日期/时间代表未来的日期/时间，当我的国家从夏令时 (GMT-3) 出来时。Rails 会保存 01:00PM UTC？今天，在夏令时，当地时间将如何？而在未来，这个当地时间会是怎样的呢？

基本上，我总是需要在上午 11:00 向用户显示。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T14:18:30.460

时区可以在几个地方发挥作用：操作系统（或可能是用户帐户）默认设置、数据库服务器、Rails `environment.rb`。

关键是要确保所有日期都使用 UTC 时区*存储*，然后以您当地的时区显示。听起来你正在这样做。

所以你的问题似乎可以归结为“如果是夏令时，我想抵消 -3 小时，否则抵消 -2 小时”。Rails 时间扩展让您可以确定当前的偏移量，例如`Time.zone.now.utc_offset`，并`Time#dst?`告诉您这两个是否是夏令时，您可以有条件地减去额外的一小时（3600 百秒）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-07T12:04:54.330

在您询问 7 个月后，但也许`skip_time_zone_conversion_for_attributes=`会有所帮助 - 它告诉 AcitveRecord 不要在存储或检索时转换时区。请参阅显示示例的[ActiveRecord 时间戳：](http://api.rubyonrails.org/classes/ActiveRecord/Timestamp.html)

```
class Topic < ActiveRecord::Base
  self.skip_time_zone_conversion_for_attributes = [:written_on]
end 
```

# magento - Magento - 在贷项通知单上注明物品是否已退回库存

> ID：13378330
> 
> 赞同：0
> 
> 时间：2012-11-14T11:54:17.377
> 
> 标签：magento

我需要自定义 Credit Memo 页面以存储项目是否已退回库存。

我已经在以下位置确定了观察者：

```
app\code\core\Mage\CatalogInventory\Model\Observer.php
refundOrderInventory() 
```

当管理员提交贷项通知单并勾选“返回库存”复选框时触发。所以我知道我可以添加自己的观察者来编写/保存一些东西。

但我不知道如何为 Credit Memo 产品项目添加额外的属性。

谁能给我一些指示？

更新：我还可以通过编辑添加额外的**Returned to Stock**表格单元格：

```
app\design\adminhtml\default\default\template\sales\order\creditmemo\view\items.phtml 
```

和

```
app\design\adminhtml\default\default\template\sales\order\creditmemo\view\items\renderer\default.phtml 
```

给我这个： ![添加到贷项凭证产品属性的自定义列](../Images/8eb7764c4afd948a7bfaeded6d8737fa.png)

我已经硬编码了你在那里看到的“YES”值。我需要找到某种方法使其成为可写/可读的贷项备忘录产品属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T00:22:20.503

您需要在安装脚本中将属性和列添加到 creditmemo 项目实体。确保有你的安装类，`Mage_Eav_Model_Entity_Setup`因为.`addAttribute()``Mage_Core_Model_Resource_Setup`

```
$installer->addAttribute('creditmemo_item', 'returned_to_stock', array('type' => 'int', 'grid' => true, 'source' => 'adminhtml/system_config_source_yesno'));
$installer->getConnection()->addColumn($installer->getTable('sales/creditmemo_item'), 'returned_to_stock', 'TINYINT(1) unsigned DEFAULT 0'); 
```

然后，在您的观察者中（请不要修改您在此处列出的观察者），将值设置为 true，如下所示（我只是复制了您列出的函数，并对其稍作修改以证明我的观点）：

```
public function refundOrderInventory($observer)
{
    $creditmemo = $observer->getEvent()->getCreditmemo();
    $items = array();
    foreach ($creditmemo->getAllItems() as $item) {
        $return = false;
        if ($item->hasBackToStock()) {
            if ($item->getBackToStock() && $item->getQty()) {
                $return = true;
            }
        } elseif (Mage::helper('cataloginventory')->isAutoReturnEnabled()) {
            $return = true;
        }
        if ($return) {
            $item->setReturnedToStock(1);
        }
    }
} 
```

# c# - EF 代码优先使用现有的 MySql 数据库

> ID：13378331
> 
> 赞同：0
> 
> 时间：2012-11-14T11:54:20.607
> 
> 标签：c#, mysql, asp.net-mvc, visual-studio-2010

我创建了一个类，它对 MySql 数据库中的现有表进行建模。下面是课程：

```
 public class class1
{
    [Key]
    public int id { get; set; }

    public int LastName { get; set; }
    public int FirstName { get; set; }

} 
```

我还创建了一个此类。

```
public class Dbo : DbContext
{
    public DbSet<class1> Classs { get; set; }
} 
```

我已经创建了我的控制器。现在，当我运行应用程序时，出现此错误：

```
 MySql.Data.MySqlClient.MySqlException was unhandled by user code
  Message=You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    `LastName` int NOT NULL, 
    `Fi' at line 2
  Source=MySql.Data
  ErrorCode=-2147467259
  Number=1064 
```

MySql 表有这样的结构：

```
 `id` int(11) NOT NULL,
  `LastName` int(11) NOT NULL,
  `FirstName` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:26:08.037

根据错误消息，EF 试图为您创建 Db。

如果您添加 null 初始化程序，它应该可以工作

```
 public class Dbo : DbContext
    {
        public DbSet<class1> Classs { get; set; }
        public Dbo()
        {
            Database.SetInitializer<Dbo>(null);
        }
    } 
```

这是另一篇代码项目文章，它对我有用：[Using Entity Framework 4.1 Code First with an existing database](http://www.codeproject.com/Articles/184133/Using-Entity-Framework-4-1-Code-First-with-an-exis)

# asp.net-mvc - DropDownListFor 不使用嵌套列表

> ID：13378332
> 
> 赞同：0
> 
> 时间：2012-11-14T11:54:22.817
> 
> 标签：asp.net-mvc, drop-down-menu, asp.net-mvc-4, html.dropdownlistfor, html-select

我的 DropDownListFor 未绑定所选项目。

这是正确的模型：

```
public class DeliveryOrderModel
{
    public BoxInfo Boxes { get; set; }

    public class BoxInfo
    {
        public long? CountryID { get; set; }
        public IEnumerable<SelectListItem> Countries { get; set; }
    }
} 
```

在这个模型问题中：

```
public class DeliveryOrderModel
{
    public List<BoxInfo> Boxes { get; set; }

    public class BoxInfo
    {
        public long? CountryID { get; set; }
        public IEnumerable<SelectListItem> Countries { get; set; }
    }
} 
```

这是选择项

```
var Countries = new SelectList(new[] 
{   
    new { CountryID = 1, Text = "Name1" }, 
    new { CountryID = 2, Text = "Name2" }, 
    new { CountryID = 3, Text = "Name3" } 
} ,"CountryID","Text"); 
```

此下拉列表适用于第一个模型：

```
Html.DropDownListFor(model => model.Boxes.CountryID, Model.Boxes.Countries) 
```

这是麻烦下拉列表：

```
Html.DropDownListFor(model => model.Boxes[0].CountryID, Model.Boxes[0].Countries) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:03:47.933

首先想到 - SelectList 是一个集合，而不是一个数组，所以你可能需要类似的东西：

```
Html.DropDownListFor(model => model.Boxes.First().CountryID,
    Model.Boxes.First().Countries) 
```

可能还需要一个 lamda 表达式`.First`

**添加**

模型可能像

```
public class DeliveryOrderModel
 {
 public List<BoxInfo> Boxes { get; set; }

 public class BoxInfo
 {
     publix Box myBox  { get; set; }
     public long? CountryID { get; set; }        
 }
} 
```

CountryList 成为一个独立且独立的 SelectList ViewModel。最后是视图

```
 Html.DropDownListFor(model => model.Boxes[0].CountryID, Countries) 
```

或 ForEach 遍历框，或...

好的？

# scala - Scala 隐式参数的 Groovy 等效项

> ID：13378337
> 
> 赞同：2
> 
> 时间：2012-11-14T11:54:49.450
> 
> 标签：scala, groovy, implicits

是否有一些 Groovy 替代方法来表达如下内容：

```
def doSomethingWith(implicit i:Int) = println ("Got "+i)
implicit var x = 5

doSomethingWith(6)  // Got 6
doSomethingWith     // Got 5

x = 0
doSomethingWith     // Got 0 
```

更新：在此处查看后续问题：[Groovy 等效于 Scala 隐式参数 - 扩展](https://stackoverflow.com/questions/13380535/groovy-equivalent-for-scala-implicit-parameters-extended)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:09:00.217

您可以使用带有默认参数的闭包：

```
doSomethingWith = { i = value -> println "Got $i" }
value = 5

doSomethingWith(6)  // Got 6
doSomethingWith()   // Got 5

value = 0
doSomethingWith()   // Got 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-16T10:06:23.860

这就是我在 Groovy 中做隐式的方式

```
@Test
def void customString() {
    println "Welcome implicits world in groovy".upperCaseNoSpace
    println "Welcome implicits world in groovy".removeSpaces

}

static {
    String.metaClass.getUpperCaseNoSpace = {
        delegate.toUpperCase().replace(" ", "_")
    }

    String.metaClass.getRemoveSpaces = {
        delegate.replace(" ", "")
    }
} 
```

# jquery - jqPlot 饼图 - 如何捕获对图例项的点击？

> ID：13378347
> 
> 赞同：3
> 
> 时间：2012-11-14T11:55:22.060
> 
> 标签：jquery, jqplot

这是到目前为止的故事。

1.  我已经使饼图切片可点击，因此用户可以单击以转到列出与该切片相关的项目的不同页面。

2.  对于非常小的切片，用户很难单击它们。因此，我希望饼图旁边的图例具有相同的功能 - 单击图例项，转到 URL。

3.  似乎没有任何方法可以点击图例。我正在寻找类似 jqplotLegendClick 的东西。我可以使用 HTML A 元素作为图例文本，这将是一个可接受的解决方案，但是当我单击它时没有任何反应！

知道如何处理吗？我原以为这是一个很常见的场景。

这是一个最小的 jsfiddle，显示下面建议的解决方案不起作用，以防有人发现问题。[http://jsfiddle.net/Ep4sP/](http://jsfiddle.net/Ep4sP/)这是js部分。

```
$(function ()
{

    var data = [['2012-09-13', 1], ['2012-10-22', 2], ['2012-01-12', 3]];

    $.jqplot('ChartDIV', [data],
    {
        seriesDefaults: {
            renderer: jQuery.jqplot.PieRenderer
        },
        legend: { show: true }
    });

    $('.jqplot-table-legend-label').each(function(){
        $(this).click(function(){
            alert('you have clicked on the serie : ' + $(this).html());
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:04:20.037

您可以在图表初始化后添加以下代码：http: [//jsfiddle.net/WdLnm/272/](http://jsfiddle.net/WdLnm/272/)

```
$('.jqplot-table-legend-label').each(function(){
    $(this).click(function(){
        alert('you have clicked on the serie : ' + $(this).html());
    });
}); 
```

请注意，在最近的版本中，类名是`.jqplot-table-legend`（用 1.0.8 测试）

# ruby-on-rails - 对象未加载

> ID：13378349
> 
> 赞同：5
> 
> 时间：2012-11-14T11:55:29.293
> 
> 标签：ruby-on-rails, ruby

这是 ruby​​/rails 发生在我身上最奇怪的事情。

我有一个模型，*Store*，它 has_many *Balances*。而且我有一种方法可以根据商店的货币为我提供默认余额。

**店铺型号。**

```
class Store < ActiveRecord::Base

  has_many :balances, as: :balanceable, dependent: :destroy

  def default_balance
    #puts self.inspect <- weird part.
    balances.where(currency: self.currency)[0]
  end
  ...
end 
```

**平衡模型。**

```
class Balance < ActiveRecord::Base

  belongs_to :balanceable, :polymorphic => true
  ...
end 
```

好的，那么在 Balance 控制器中我有*show*动作，它会给我一个特定的平衡或默认平衡。

**平衡控制器。**

```
class Api::Stores::BalancesController < Api::Stores::BaseController

  before_filter :load_store

  # Returns a specific alert
  # +URL+:: GET /api/stores/:store_id/balances/:id
  def show
    #puts @store.inspect <- weird part.
    @balance = (params[:id] == "default") ? @store.default_balance : Balance.find(params[:id])
    respond_with @balance, :api_template => :default
  end
  ...

  private
    # Provides a shortcut to access the current store
    def load_store
      @store = Store.find(params[:store_id])
      authorize! :manage, @store
    end
end 
```

现在这就是奇怪的部分来的地方......

如果我打电话给表演动作；例如：

> 获取 /api/stores/148/balances/default

返回null（因为货币被设置为null，并且没有Balance with null currency），生成的SQL查询为：

```
SELECT `balances`.* FROM `balances` WHERE `balances`.`balanceable_id` = 148 AND `balances`.`balanceable_type` = 'Store' AND `balances`.`currency` IS NULL 
```

所以我不知道为什么......它将*货币*设置为NULL。**但是**如果我在那个过程中的任何地方

> 放@store.inspect

或在`default_balance`方法内部：

> 自我检查

它神奇地起作用了！！！

所以我不知道为什么会这样？......似乎商店对象在我“*检查*”它或类似的东西之前没有被加载。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T21:22:22.273

山姆和阿德里安走在正确的道路上。

ActiveRecord 覆盖 method_missing 以添加一大堆动态方法，包括用于列支持的属性（如 Store#currency）的访问器。虽然我在掩饰很多，但只要说当调用逻辑时动态类/实例方法被添加到 Store 类/实例中，以便后续调用不再需要 method_missing 钩子就足够了。

当您覆盖 method_missing 而不调用 super 时，您实际上禁用了此功能。幸运的是，可以通过其他方式调用此功能，其中一种方式是您在调用 store#inspect 时遇到的。

通过添加对 super 的调用，您只需确保 ActiveRecord 的动态方法总是在需要时添加到类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:33:47.967

OK finally after a lot of debugging, I found the reason...

In the *Store* model I have a method_missing method and I had it like this:

```
def method_missing method_name, *args
  if method_name =~ /^(\w+)_togo$/
    send($1, *args).where(togo: true)
  elsif method_name =~ /^(\w+)_tostay$/
    send($1, *args).where(tostay: true)
  end
end 
```

So when I was calling `self.currency` it went first to the method_missing and then returned *null*. What I was missing here was the `super` call.

```
def method_missing method_name, *args
  if method_name =~ /^(\w+)_togo$/
    send($1, *args).where(togo: true)
  elsif method_name =~ /^(\w+)_tostay$/
    send($1, *args).where(tostay: true)
  else
    super
  end
end 
```

But I continue wondering why after I had called `puts @store.inspect` or `puts self.inspect` it worked well?. I mean, why in that case that `super` call wasn't needed?

# iphone - 这段代码是什么意思 + Objective C

> ID：13378350
> 
> 赞同：1
> 
> 时间：2012-11-14T11:55:31.923
> 
> 标签：iphone, objective-c, nszombie

我在理解以下代码时有点困难。

```
 #define ENABLE_MEMORY_DEBUG 0

#if ENABLE_MEMORY_DEBUG
#if TARGET_IPHONE_SIMULATOR

extern BOOL NSDebugEnabled;
extern BOOL NSZombieEnabled;
extern BOOL NSHangOnUncaughtException;
extern BOOL NSDeallocateZombies;

#endif
#endif

int main(int argc, char *argv[])
{
#if ENABLE_MEMORY_DEBUG
#if TARGET_IPHONE_SIMULATOR
    NSDebugEnabled = YES;
    NSZombieEnabled = YES;
    NSHangOnUncaughtException = YES;
    NSDeallocateZombies = NO;
#endif
#endif
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, nil,nil);
    [pool release];
    return retVal;
} 
```

这是一种以编程方式启用 NSZombie 的方法吗？这些是任何预定义的 BOOL 变量 - NSDebugEnabled、NSZombieEnabled、NSHangOnUncaughtException、NSDeallocateZombies？我从来没有像这样启用过 NSZombie。我曾经从 Edit Scheme->Environmental variables 启用 NSZombie，然后添加值为 TRUE 的 NSZombiewEnables 变量。

有任何想法吗，

谢谢，问候， Tek3

# android - Android 布局：对齐 TextView 和 Spinner

> ID：13378357
> 
> 赞同：6
> 
> 时间：2012-11-14T11:56:07.123
> 
> 标签：android, android-layout, textview, alignment, spinner

我想将 textview（说：“Day :”）与 Spinner 对齐，用户可以在其中选择他想要的星期几（星期一、星期二等）

当我尝试对齐它们时：

```
 <TextView android:id="@+id/labelSpinner1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/textSpinner1"
                    android:layout_toRightOf="@+id/spinner_days"
                    android:layout_alignParentTop="true"/>

                <Spinner android:id="@+id/spinner_days"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/labelSpinner1"
                    android:layout_alignParentLeft="true"
                    android:drawSelectorOnTop="true"/> 
```

我得到的结果是我只看到了 Spinner，而 TextView 没有显示（或者在 Spinner 下方）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T14:36:39.643

我猜您希望 Spinner 位于 TextView 的右侧？检查以下代码：

```
<TextView
    android:id="@+id/labelSpinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:text="@string/textSpinner1" />

<Spinner
    android:id="@+id/spinner_days"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@id/labelSpinner1"
    android:layout_toRightOf="@id/labelSpinner1"
    android:drawSelectorOnTop="true" /> 
```

您的问题是微调器填充了整个视图（`android:layout_width="fill_parent"`），而您强制 TextView 位于微调器的右侧（因此在屏幕之外 - >对您不可见）

# javascript - “裁剪”二维数组？

> ID：13378359
> 
> 赞同：6
> 
> 时间：2012-11-14T11:56:13.083
> 
> 标签：javascript, arrays, multidimensional-array

我正在寻找一种高性能的方式来裁剪二维数组。考虑这个例子：

我有一个构成 100x100 网格的二维数组。我只想退回一部分，60x60。这是执行此操作的“一种”方式的示例，但我正在寻找指向执行此操作的最高效方式的指针。

```
// Settings
var gridWidth = 100;
var gridHeight = 100;

// Populate Grid
var grid = [];

for(var i = 0; i<gridWidth; i++){
    grid[i] = [];
    for(var j = 0; j<gridHeight; j++){
        grid[i][j] = 0;
    }
}

// Crop Grid
var rect = {x:20,y:20,w:60,h:60};

var crop = [];
for(var i = rect.x; i<rect.x+rect.w; i++){
    crop[i-rect.x] = [];
    for(var j = rect.y; j<rect.y+rect.h; j++){
        crop[i-rect.x][j-rect.y] = grid[i][j];
    }
} 
```

任何想法都非常感谢...

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:07:44.167

试试这种方式：

```
crop = grid.slice(rect.x, rect.x+rect.w);
for(var i = 0; i<crop.length; i++){
    crop[i] = crop[i].slice(rect.y, rect.y+rect.h);
} 
```

请注意，数组的维度现在是`rect.w`x ，并且所有索引分别由和`rect.h`负偏移。`rect.x``rect.y`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:35:21.863

怎么样：

```
function tab(n, func) {
    for (var a = [], i = 0; i < n; i++)
        a.push(func(i));
    return a;
}

function matrix(w, h, values) {
    return tab(h, function(y) {
        return tab(w, function(x) {
            return values(x, y);
        })
    })
}

grid = matrix(7, 10, function(x, y) {
    return x + ':' + y;
}) 
```

这给了我们：

```
0:0 1:0 2:0 3:0 4:0 5:0 6:0
0:1 1:1 2:1 3:1 4:1 5:1 6:1
0:2 1:2 2:2 3:2 4:2 5:2 6:2
0:3 1:3 2:3 3:3 4:3 5:3 6:3
0:4 1:4 2:4 3:4 4:4 5:4 6:4
0:5 1:5 2:5 3:5 4:5 5:5 6:5
0:6 1:6 2:6 3:6 4:6 5:6 6:6
0:7 1:7 2:7 3:7 4:7 5:7 6:7
0:8 1:8 2:8 3:8 4:8 5:8 6:8
0:9 1:9 2:9 3:9 4:9 5:9 6:9 
```

裁剪功能：

```
function crop(mat, x, y, w, h) {
    return mat.slice(y, y + h).map(function(row) {
        return row.slice(x, x + w)
    })
}

cropped = crop(grid, 2, 1, 5, 6) 
```

结果：

```
2:1 3:1 4:1 5:1 6:1
2:2 3:2 4:2 5:2 6:2
2:3 3:3 4:3 5:3 6:3
2:4 3:4 4:4 5:4 6:4
2:5 3:5 4:5 5:5 6:5
2:6 3:6 4:6 5:6 6:6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:02:01.027

您可以尝试使用[`Array#slice` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)并查看您是否获得任何性能改进。还要尽量避免不必要的计算：

```
var yend = rect.y + rect.h;
var crop = [];

for(var i = rect.x, j = 0, l = rect.x + rect.w; i < l; i++,j++){
    crop[j] = grid[i].slice(rect.y, yend);
} 
```

* * *

您可以测试是否值得测试边缘情况。例如，如果`rect.x`和/或是`rect.y`并且`0`您不再需要原始数组，您可以设置`.length`数组的 （修改它们）：

```
var rect = {x:0,y:0,w:60,h:60};

grid.length = rect.w;

for (var i = 0; i < rect.w; i++) {
    grid[i].length = rect.h;
} 
```

# quartz-scheduler - 每 3 小时 15 分钟运行一次作业的 Cron 表达式

> ID：13378361
> 
> 赞同：0
> 
> 时间：2012-11-14T11:56:14.737
> 
> 标签：quartz-scheduler, spring-batch, cronexpression

我需要每 3 小时 15 分钟运行一次特定的工作。

这种表达方式能达到我的目的吗？

> batch.backupscores.cronExpression=0 0/15 0/3 * * ?

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:31:41.893

0 15 0,3,6,9,12,15,18,21 * * ?

这将达到目的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:53:30.130

不，这个表达式不起作用，我相信你不能用 Cron 来表达这个。但是您可以改用[简单的触发器](http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/tutorial-lesson-05)。

**每 195**分钟运行一次作业（3 * 60 分钟 + 15）。

# javascript - 实体表单中的自定义下拉列表 - 访问字段错误 CRM2011

> ID：13378367
> 
> 赞同：0
> 
> 时间：2012-11-14T11:56:38.287
> 
> 标签：javascript, dynamics-crm-2011

我正在 CRM 2011 实体表单中实现自定义下拉菜单（选择控件）。选择控件的 html 位于我作为 web 资源导入的 html 文件中。我已经以实体形式添加了该网络资源。现在在 onload 函数中，我试图用一些硬编码值填充该选择控件，但在表单加载时显示以下错误：

![在此处输入图像描述](../Images/0da1fae66bc9c0239ffbfbe909e513ac.png)

这是onload函数：

```
function onload()
{
var select = document.getElementById("WebResource_State").contentWindow.document.getElementById("state");
select.options[select.options.length] = new Option('Text 1', 'Value1');
} 
```

上述错误在此函数的第二行触发。请建议缺少什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:35:54.717

您的选择没有选项属性，（也许它需要是大写 O？）或者选项值没有长度。您可以在 IE 中使用 F12 打开调试器。在第二行放置一个断点，当它命中时，检查你的选择变量上有哪些属性/方法可用。

# php - 用 php 创建一个调用 JavaScript 函数的按钮

> ID：13378370
> 
> 赞同：-1
> 
> 时间：2012-11-14T11:56:58.960
> 
> 标签：php, javascript, button

**PHP**

```
$output_string .= '<td><button id="changeButton" type="button" onclick="deleteAdress('. $row['adresses_id'] .', "'. $row['adresses_street'] .'");">Ta bort</button></td>'; 
```

**Javascript**

```
function deleteAdress(adressID, adressStreetName) {   

    alert(adressID);

} 
```

我正在尝试在 php 中创建一个带有 onclick 的按钮，应该制作一个警报框（现在）。当我发送号码时，它可以工作。但是当一个字符串包含文本时，我停止工作。没有。根本没有警告框。我也试过没有双引号。

如果您看到任何问题，请告诉我。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:00:15.890

需要添加转义引号

```
$output_string .= '<td><button id="changeButton" type="button" onclick="deleteAdress(\''. htmlspecialchars($row['adresses_id'], ENT_QUOTES) .'\', \''. htmlspecialchars($row['adresses_street'], ENT_QUOTES) .'\');">Ta bort</button></td>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:59:03.787

尝试使用以下代码

```
 $output_string .= '<td><button id="changeButton" type="button" onclick="deleteAdress("'. $row['adresses_id'] .'", "'. $row['adresses_street'] .'");">Ta bort</button></td>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:00:28.937

您应该在调用函数时添加引号：

```
onclick="deleteAdress(\''. $row['adresses_id'] .'\', "'. $row['adresses_street'] .'"); 
```

# web-services - 压缩格式的基于 Web 服务的 TTS

> ID：13378371
> 
> 赞同：1
> 
> 时间：2012-11-14T11:56:59.790
> 
> 标签：web-services, mp3, wav, naudio, text-to-speech

我在 .NET 中开发了 TTS 引擎。现在我想通过网络公开它。我使用 base64 字符串编码来传输 WAV 格式，但是当我传递较长的文本时速度很慢。现在我正在考虑构建一些 MP3 流（可能使用 NAudio），我将在其中将 WAV 格式的 MemoryStream 转换为 MP3 流并将其传递给客户端。有没有人有这方面的经验？有谁有经验如何将带有 NAudio 的 WAV MemoryStream 转换为 MP3 MemoryStream？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:03:53.863

```
public class MP3StreamingPanel2 : UserControl
{

enum StreamingPlaybackState
{
    Stopped,
    Playing,
    Buffering,
    Paused
}

private BufferedWaveProvider bufferedWaveProvider;
private IWavePlayer waveOut;
private volatile StreamingPlaybackState playbackState;
private volatile bool fullyDownloaded;
private HttpWebRequest webRequest;

public void StreamMP32(string url)
{

    Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
    SettingsSection section = (SettingsSection)config.GetSection("system.net/settings");
    section.HttpWebRequest.UseUnsafeHeaderParsing = true;
    config.Save();

    this.fullyDownloaded = false;

    webRequest = (HttpWebRequest)WebRequest.Create(url);

    int metaInt = 0; // blocksize of mp3 data

    webRequest.Headers.Clear();
    webRequest.Headers.Add("GET", "/ HTTP/1.0");
    // needed to receive metadata informations
    webRequest.Headers.Add("Icy-MetaData", "1");
    webRequest.UserAgent = "WinampMPEG/5.09";

    HttpWebResponse resp = null;
    try
    {
        resp = (HttpWebResponse)webRequest.GetResponse();
    }
    catch (WebException e)
    {
        if (e.Status != WebExceptionStatus.RequestCanceled)
        {
            //ShowError(e.Message);
        }
        return;
    }
    byte[] buffer = new byte[16384 * 4]; // needs to be big enough to hold a decompressed frame

    try
    {
        // read blocksize to find metadata block
        metaInt = Convert.ToInt32(resp.GetResponseHeader("icy-metaint"));

    }
    catch
    {
    }

    IMp3FrameDecompressor decompressor = null;
    try
    {
        using (var responseStream = resp.GetResponseStream())
        {
            var readFullyStream = new ReadFullyStream(responseStream);
            readFullyStream.metaInt = metaInt;
            do
            {
                if (bufferedWaveProvider != null && bufferedWaveProvider.BufferLength - bufferedWaveProvider.BufferedBytes < bufferedWaveProvider.WaveFormat.AverageBytesPerSecond / 4)
                {
                    Debug.WriteLine("Buffer getting full, taking a break");
                    Thread.Sleep(500);
                }
                else
                {
                    Mp3Frame frame = null;
                    try
                    {
                        frame = Mp3Frame.LoadFromStream(readFullyStream, true);
                    }
                    catch (EndOfStreamException)
                    {
                        this.fullyDownloaded = true;
                        // reached the end of the MP3 file / stream
                        break;
                    }
                    catch (WebException)
                    {
                        // probably we have aborted download from the GUI thread
                        break;
                    }
                    if (decompressor == null)
                    {
                        // don't think these details matter too much - just help ACM select the right codec
                        // however, the buffered provider doesn't know what sample rate it is working at
                        // until we have a frame
                        WaveFormat waveFormat = new Mp3WaveFormat(frame.SampleRate, frame.ChannelMode == ChannelMode.Mono ? 1 : 2, frame.FrameLength, frame.BitRate);
                        decompressor = new AcmMp3FrameDecompressor(waveFormat);
                        this.bufferedWaveProvider = new BufferedWaveProvider(decompressor.OutputFormat);
                        this.bufferedWaveProvider.BufferDuration = TimeSpan.FromSeconds(20); // allow us to get well ahead of ourselves
                        //this.bufferedWaveProvider.BufferedDuration = 250;
                    }
                    int decompressed = decompressor.DecompressFrame(frame, buffer, 0);
                    //Debug.WriteLine(String.Format("Decompressed a frame {0}", decompressed));
                    bufferedWaveProvider.AddSamples(buffer, 0, decompressed);
                }

            } while (playbackState != StreamingPlaybackState.Stopped);
            Debug.WriteLine("Exiting");
            // was doing this in a finally block, but for some reason
            // we are hanging on response stream .Dispose so never get there
            decompressor.Dispose();
        }
    }
    finally
    {
        if (decompressor != null)
        {
            decompressor.Dispose();
        }
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:07:14.700

NAudio 不包含 MP3 编码器。当我需要对 MP3 进行编码时，我使用[lame.exe](http://lame.sourceforge.net/index.php)。如果您不想通过文件，lame.exe 允许您从标准输入读取并写入标准输出，因此如果您在进程中重定向标准输入和输出，您可以即时转换。

# blender - 3DS Max 中的网格没有相同数量的顶点

> ID：13378372
> 
> 赞同：1
> 
> 时间：2012-11-14T11:57:00.283
> 
> 标签：blender, mesh, 3dsmax, vertices, fbx

我在 3DS Max 中有两个顶点数相同的网格，但是当我导出它时，它们的顶点数不同。- 我必须创建一个“ProOptimizer”修改器，以在所有网格中获得相同数量的顶点。- 我将它导出为“.Obj”，并取消选中除纹理之外的所有参数以保留它。- 我从 Blender 导入它并将其导出为“.FBX”。

如果我直接从 3DS Max 导出，所有网格之间的顶点数非常不同，我不明白。

如何获得相同的顶点？

任何人都可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:18:04.990

两个网格是否将相同的平滑组应用于相同的相应三角形？UV映射是否相似？

法线（平滑组）和 UV 坐标分布都会影响单个顶点需要拆分多少次才能正确渲染或导出为特定格式。例如，一个顶点可以有许多法线（每个相邻三角形一个法线，例如在一个盒子中），迫使该顶点被计算多次。或者相反，一个顶点可以有一个法线，使所有相邻的面在顶点周围看起来“平滑”。

# php - 使用 PHP 在网站上安全隐藏 PDF 发票

> ID：13378374
> 
> 赞同：1
> 
> 时间：2012-11-14T11:57:03.030
> 
> 标签：php, email, attachment, email-attachments

我正在制作一个网站，人们可以在其中注册参加沙滩排球假期。该网站没有在线支付，所以它的工作原理是人们自己注册（在一个好的 ol' html 表单上），然后你会收到一封电子邮件，其中应该包含发票。我已经做到了，所以这张发票是使用 FPDF 生成的（http://www.fpdf.org/ - 尽管我认为这对于这个问题的答案并不重要）。所以 FPDF 需要一堆 PHP 变量并用它制作一个 PDF 文件，并将这个文件放在 FTP 服务器上的一个目录中。

现在，我可以看到两种从服务器获取此发票给刚刚注册的人的方法（因为他们会立即想要它以确认他们的注册）：

1）将其附加在电子邮件中（我已经尝试了大约一个小时并且可以做到）。如果这是更好的选择 - 那我该怎么做？上次尝试时，我淹没在一堆我以前从未听说过的关于 MIME 的信息中。这是正确的轨道，还是有更简单的方法？我还阅读了一些关于 Zend_framework 和 PHPMailer 的内容，但真的不知道哪种方法是正确（或更好）的方法......

或者...

2) 在电子邮件中添加发票链接。现在，如果我这样做，那么 URL 应该以某种方式被屏蔽或加密，因为如果他们访问的链接是：它会很容易找到其他发票：

```
http://www.something.com/invoicefolder/invoice16.pdf 
```

显然，人们可以将 16 更改为 15，突然之间，那些拥有网络知识的人就可以访问所有发票。

这就是为什么我谦虚地问你，StackOverflow... 将这张发票从 FTP 服务器发送到客户端（通信方法是电子邮件）的最佳（或最安全的方式）是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:12:44.637

只需确保发票不在公共文件夹中（即在 doc 根目录下）并让 PHP 根据请求为它们提供服务。这样您就可以强制人们登录。

另一个希望是仅将发票附加到电子邮件中，尽管人们往往会丢失电子邮件并且他们仍然希望能够访问他们的发票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:13:27.310

你必须创建一个控制器文件说“invoice.php”，它将强制下载指定的pdf文件，你的url应该是这样的

假设您在 invoices 文件夹中存储了一个文件 54219683.pdf，您可以在电子邮件中发送以下 url

[http://www.example.com/invoice.php?id=54219683](http://www.example.com/invoice.php?id=54219683)

这是一个非常简单的例子

```
//file: invoice.php
//content type
$file = $_GET['id'].'.pdf';
header('Content-type: application/pdf');
//open/save dialog box
header('Content-Disposition: attachment; filename="$file"');
//read from server and write to buffer
readfile($file); 
```

[您可以在http://www.finalwebsites.com/forums/topic/php-file-download](http://www.finalwebsites.com/forums/topic/php-file-download)上找到通过 php 文件下载 pdf 的更多详细信息

您不应该使用与数据库 ID 的精确映射来保存您的实际文件，但您应该为每个发票文件名使用一个随机的唯一编号，黑客无法猜到该编号。

当您使用序列号保存文件时会出现问题，因此不要保存您的 pdf 文件，如 1.pdf、2.pdf、3.pdf，而是使用随机数保存，其次不要发送带有文件确切 url 的电子邮件但通过控制器文件下载，您可以在其中添加更多限制，还可以跟踪每次下载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T12:16:29.693

> 我淹没在一堆我以前从未听说过的关于 MIME 的信息中

抱歉，但这确实让我敲响了警钟——您必须对在代码中实现解决方案所涉及的技术有基本的了解。

是的，您可以将它附加到电子邮件中——但是我建议您远离 zend 框架，直到您对软件开发更加熟悉为止。[phpmailer](http://phpmailer.worxware.com/)和[swiftmailer](http://swiftmailer.org/)都提供了一个简单的、有据可查的 API 来处理电子邮件中的附件。

该问题的一个简单解决方案是将 PDF 文件保留在文档根目录之外，并使用代理脚本执行附加验证。例如

```
define('MY_SECRET', 'some rAnd0m strlng');
define('DOC_DIR','/path/to/files');

function getIdHash($id)
{
   return sha1($id . MY_SECRET);
}

$id=(integer) $_GET['doc_id'];
$filename=DOC_DIR . '/' . $id . '.pdf';
if ( ($_GET['chk']==getIdHash($id)) 
    && file_exists($filename) && is_readable($filename)) {
   header("Content-type:application/pdf");
   readfile($filename);
   exit;
} else {
   header("Status: 404 Not Found");
   print "Document does not exist or not authorized";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T12:10:43.753

我会查看 PHPMailer 并将发票作为附件发送。PHPMailer 很容易使用并且有一些很棒的示例代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T16:36:32.310

我会采用类似于 RapidShare 等共享储物柜的方案：

```
domain.com/invoice/{md5($email)}/{time()}.pdf 
```

该解决方案足够隐蔽以确保安全。有人很难猜测（或暴力破解）电子邮件地址的 MD5 摘要和生成发票的时间。

此外，您可以发送带有附件的电子邮件，就像其他人所说的那样，如果您使用 SwiftMailer 之类的库，这非常简单。即使[实现你自己](https://github.com/alixaxel/phunction/blob/9bbd9455e48379efa8283f6a03369c0759407476/phunction/Net.php#L209)的也不是那么困难。

# excel - 循环错误地粘贴了包含数据的列

> ID：13378376
> 
> 赞同：0
> 
> 时间：2012-11-14T11:57:04.900
> 
> 标签：excel, excel-2010, vba

底部的代码将列从一张纸单独复制到另一张纸，并将文本逐列执行。例如，在处理完 A 列之后，B 列（第一张纸）的“文本到列”过程应该从第二张纸的下一个可用空列开始。

第一张纸中的行具有不同的长度。因此，A 列的单元格 A1:A25 可能已满，但 N 列可能只有部分单元格已满，因为某些行已结束。

此代码工作正常，直到它遇到第一个部分完整的列，然后它继续将列粘贴到同一列中。

我认为下面的行会解决这个问题，但它似乎不起作用：

```
If Application.WorksheetFunction.CountA(Excel.Sheets("Organise_R").Columns(b)) > 0  Then b = b + 1 
```

过去几个小时我一直在尝试，但没有成功。任何帮助将不胜感激！提前致谢！

```
For a = 1 To 60

'If Excel.WorksheetFunction.CountBlank(Excel.Sheets("Import_R").Columns(a)) < 1048576
If Application.WorksheetFunction.CountA(Excel.Sheets("Import_R").Columns(a)) > 0 Then

    Excel.Sheets("Import_R").Columns(a).Copy

    b = Excel.Sheets("Organise_R").Cells(1, Columns.Count).End(Excel.xlToLeft).column

    Excel.Sheets("Organise_R").Select

    'If Cells(1, b) <> ""
    'If Excel.WorksheetFunction.CountBlank(Excel.Sheets("Organise_R").Columns(b)) < 1048576 Then
    If Application.WorksheetFunction.CountA(Excel.Sheets("Organise_R").Columns(b)) > 0 Then b = b + 1

        Excel.Sheets("Organise_R").Columns(b).EntireColumn.Select
        Excel.ActiveSheet.Paste

        Excel.Application.CutCopyMode = False
        Selection.TextToColumns Destination:=Cells(1, b), DataType:=xlDelimited, _
                TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=True, Tab:=False, _
                Semicolon:=False, Comma:=False, Space:=True, Other:=False, FieldInfo _
                :=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), _
                Array(7, 1), Array(8, 1)), TrailingMinusNumbers:=True

End If

Next a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:23:28.653

我不会这样做 - 具体来说，我不明白你的代码行：

```
If Application.WorksheetFunction.CountA(Excel.Sheets("Organise_R").Columns(b)) > 0 Then b = b + 1 
```

因为我假设你需要一个循环来找到最后一列，但这是另一回事。

但我认为要回答您的问题，您最好使用该`UsedRange`方法查找工作表中的最后一列，可能是这样的：

```
 b = Excel.Sheets("Organise_R").UsedRange.Columns.Count 
```

要替换您的线路：

```
 b = Excel.Sheets("Organise_R").Cells(1, Columns.Count).End(Excel.xlToLeft).column 
```

希望这可以帮助。

# c++ - regex_search 返回 true，但 regex_match 返回空匹配集

> ID：13378379
> 
> 赞同：2
> 
> 时间：2012-11-14T11:57:15.903
> 
> 标签：c++, regex, std

这很奇怪，我有以下 std::regex (rx)

```
\{\{alternate form of\s*\|(?:\d=)?(.*?)([\|#][^\|}]*)*\}\} 
```

给定此字符串 (str) 时，哪个 regex_search 返回 true

```
{{alternate form of|abate|nodot=1}} {{qualifier|abbot}}. 
```

但是当我调用 regex_match(str, m, rx) 时，匹配集 m 为空。在 RegexBuddy 中使用 JavaScript 模式（这似乎是我能找到的最接近 VS2012 的正则表达式支持的行为）正确找到了匹配项。有人有什么想法吗？正则表达式看起来过度指定，因为其他一些字符串需要匹配的额外部分......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:45:57.563

`regex_search`匹配目标字符串的任何部分。`regex_match`匹配整个字符串。正则表达式匹配目标字符串的第一部分，“{{alternate form of|abate|nodot=1}}”。这就是`regex_search`发现的。这不是整个字符串，这就是为什么`regex_match`找不到匹配项。

# python - 从目录中获取单个文件的最有效/最快的方法

> ID：13378382
> 
> 赞同：1
> 
> 时间：2012-11-14T11:57:36.503
> 
> 标签：python, file, directory

使用 Python 从目录中获取单个文件的最有效和最快的方法是什么？

关于我的具体问题的更多详细信息：
我有一个包含大量预生成文件的目录，我只想随机选择一个。因为我知道除了首先列出所有文件之外没有真正有效的从目录中选择随机文件的方法，所以我的文件是用一个已经随机的名称生成的，因此它们已经是随机排序的，我只需要选择第一个文件夹中的文件。

所以我的问题是：如何从我的文件夹中选择第一个文件，而不必从目录中加载整个文件列表（也没有操作系统这样做，我的最佳目标是强制操作系统返回我一个文件，然后停止！）。

注意：我的目录中有很多文件，因此我想避免列出所有文件而只选择一个。

注意2：每个文件只选择一次，然后删除以确保下次只选择新文件（从而确保某种随机性）。

**解决方案**

我最终选择使用一个索引文件来存储：

*   要选择的当前文件的索引（例如：file1.ext 为 1，file2.ext 为 2，等等）
*   最后生成的文件的索引（例如：file1999.ext 为 1999）

当然，这意味着我的文件不再使用随机名称生成，而是使用确定性可递增模式（例如：“file%s.ext”% ID）

因此，我的两个主要操作有一个几乎恒定的时间：

*   访问文件夹中的下一个文件
*   计算剩余文件的数量（以便我可以在需要时在后台线程中生成新文件）。

这是针对我的问题的特定解决方案，有关更通用的解决方案，请阅读已接受的答案。

此外，您可能对我发现的这两个其他解决方案感兴趣，这些解决方案可以使用 Python 优化文件和目录访问的访问：

*   [os.walk 优化](http://blog.fraggod.net/2010/12/oslistdir-and-oswalk-in-python-without-lists-by-the-grace-of-c-api-generator-and-recursion-custom-stack)
*   [Python FAM（文件更改监视器）](http://python-fam.sourceforge.net/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:05:59.363

1 个目录中没有很多预生成的文件。如果目录中的文件超过“n”个，则将它们划分为子目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:02:27.170

只需`random.choice()`在`os.listdir()`结果上使用：

```
import random
import os

randomfilename = random.choice(os.listdir(path_to_directory)) 
```

`os.listdir()`按照操作系统给出的顺序返回结果。使用随机文件名不会更改该顺序，只有在目录中添加项目或从目录中删除项目会影响该顺序。

如果您担心文件过多，请不要使用单个目录。相反，使用预先生成的名称设置目录树，随机选择其中一个，然后从那里选择一个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T13:46:25.800

创建文件时，将最新文件的名称添加到存储在文本文件中的列表中。当您想读取/处理/删除文件时：

1.  打开文本文件
2.  将文件名设置为列表顶部的名称。
3.  从列表顶部删除名称
4.  关闭文本文件
5.  处理文件名。

# android - 警报对话框 Android 2.3 问题

> ID：13378386
> 
> 赞同：0
> 
> 时间：2012-11-14T11:57:50.303
> 
> 标签：android, android-alertdialog, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

我的警报对话框有问题，这是我的代码：

```
new AlertDialog.Builder(GestureShortcutsMainActivity.this)

.setTitle("Disclaimer")
.setIcon(R.drawable.alert_icon)
.setMessage(R.string.disclaimer)
.setPositiveButton("I Accept", 
new DialogInterface.OnClickListener() {

public void onClick(DialogInterface dialog, int which) {

                            }
                        })
.setCancelable(false)
.setNegativeButton("Cancel", new DialogInterface.OnClickListener(){

public void onClick(DialogInterface dialog, int which) {
// TODO Auto-generated method stub
finish();
}
})
.show(); 
```

这是它在 android 4.0.4 中的样子：

![警报对话框 4.0.4](../Images/a11f3bbb9531c27f46c163b45894c5fe.png)

这是它在 android 2.3.1 中的样子：

![警报对话框 2.3.1](../Images/3dae9776664bf7aba00cae1e6a9bd110.png)

我怎样才能使它在两个版本上都能正确显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T09:03:42.930

您的主题在 Android 2.3 中不可用。（例如：Android 2.3 不包括 Theme_Holo）

```
public void setThemeForAPIVersion()
{
    if((Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB))
    {
        setTheme(android.R.style.Theme_Holo);
    }
    else
    {
        setTheme(android.R.style.Theme_NoTitleBar);
    }
} 
```

并在您的活动调用的 onCreate 中

```
 setThemeForAPIVersion(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:08:39.040

我建议您将消息放在垂直滚动条内。[这个问题](https://stackoverflow.com/q/1564867/544198)显示了一个例子。让 XML 代码看起来像这样（这是不完整的......）

```
<ScrollView android:id="scrollDialog">
    <LinearLayout android:orientation="vertical"
            android:scrollbars="vertical"
            android:scrollbarAlwaysDrawVerticalTrack="true">
        <TextView android:id="text" />
        <Button />
    </LinearLayout>
</ScrollView> 
```

然后在您的代码中，找到 TextView，并将 AlertDialog 设置为使用该布局

```
AlertDialog.Builder builder=new AlertDialog.Builder(this);
LayoutInflater inflater = (LayoutInflater) this.getSystemService(LAYOUT_INFLATER_SERVICE);
View layout;
layout = inflater.inflate(R.layout.scrollDialog,null);
TextView text=(TextView) findViewById(R.id.text);
text.setText(R.string.disclaimer);
setContentView(layout); 
```

# c# - 如何使用 html 标签在 C# Dropdownlist 中显示上标

> ID：13378387
> 
> 赞同：0
> 
> 时间：2012-11-14T11:57:50.903
> 
> 标签：c#, html, drop-down-menu

希望有人能告诉我应该如何让像 ² 这样的上标标签在下拉列表选项的文本中正确显示？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:02:03.333

可能使用 HTML 实体：

```
&sup2; 
```

而不是实际的字符。但最好让 C# 来处理它：

```
string safeString = HttpUtility.HtmlEncode("your string²");
// Use the result as the displayed value in your Dropdownlist 
```

此方法还将找到其他有问题的字符，例如 & 并相应地替换它们。有关这方面的更多信息，请参阅[MSDN HttpUtility.HtmlEncode](http://msdn.microsoft.com/en-us/library/73z22y6h.aspx)。

**编辑**：被告知；来自 HtmlEncode 的结果字符串将准确地显示（在 HTML 中使用时）您在方法中输入的内容。所以不要在您的输入中使用 HTML 实体，因为那正是您将在结果页面中看到的内容。

如果要显示 m²，只需在方法中输入。.NET 将负责其余的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:01:08.093

也许 unicode 符号会为您解决问题：http: [//tlt.its.psu.edu/suggestions/international/bylanguage/mathchart.html#super](http://tlt.its.psu.edu/suggestions/international/bylanguage/mathchart.html#super)

对于上标的两个，您将使用`&#178;`导致：²

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T13:02:11.753

可以这样写

```
string item=HttpUtility.HtmlDecode("ml/min/1.73m&amp;#178;") 
```

有关上标的更多信息，您可以查看此链接 [http://symbolcodes.tlt.psu.edu/bylanguage/mathchart.html#super](http://symbolcodes.tlt.psu.edu/bylanguage/mathchart.html#super)

# javascript - 如何使用 javascript 将带有 base64 src 的图像保存到 Google 驱动器？

> ID：13378390
> 
> 赞同：2
> 
> 时间：2012-11-14T11:58:03.117
> 
> 标签：javascript, google-chrome-extension, google-drive-api, google-api-js-client

我的 chrome 扩展中有一个图像标签`<img src="base64......">`。如何使用 javascript 将其发送到谷歌驱动器？谷歌驱动器的 API 是否支持这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:42:11.057

这相当方便，因为您必须对图像数据进行 base64 编码才能使用 API 将其发送到 Google Drive。如果您查看[Google Drive javascript 快速入门指南](https://developers.google.com/drive/quickstart-js)，您可以了解如何创建 MIME 多部分请求并使用它来上传文件。

（示例可能太长，无法在此处发布，但如果您有任何问题，请告诉我。）

# hadoop - 减速器阶段根本没有开始。它总是'reducer=0%'

> ID：13378391
> 
> 赞同：1
> 
> 时间：2012-11-14T11:58:09.863
> 
> 标签：hadoop, mapreduce, hive

我一直在等待很长时间才能看到减速器阶段开始，但它没有开始。我已经尝试格式化namenode，但仍然是同样的问题。无论减速器必须运行，我都会遇到这个问题。任何人都可以在这方面帮助我。

```
hive> LOAD DATA LOCAL INPATH '/home/training/Desktop/student_performs_CSV.csv' OVERWRITE INTO TABLE stud_marks;
Copying data from file:/home/training/Desktop/student_performs_CSV.csv
Copying file: file:/home/training/Desktop/student_performs_CSV.csv
Loading data to table default.stud_marks
Deleted hdfs://localhost:9000/user/hive/warehouse/stud_marks
OK
Time taken: 1.633 seconds
hive> select count(*) from stud_marks;
Total MapReduce jobs = 1
Launching Job 1 out of 1
Number of reduce tasks determined at compile time: 1
In order to change the average load for a reducer (in bytes):
  set hive.exec.reducers.bytes.per.reducer=<number>
In order to limit the maximum number of reducers:
  set hive.exec.reducers.max=<number>
In order to set a constant number of reducers:
  set mapred.reduce.tasks=<number>
Starting Job = job_201211141618_0002, Tracking URL = http://localhost:50030/jobdetails.jsp?jobid=job_201211141618_0002
Kill Command = /home/training/Installations/hadoop-1.0.3/libexec/../bin/hadoop job  -Dmapred.job.tracker=localhost:9001 -kill job_201211141618_0002
Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 1
2012-11-14 16:48:29,822 Stage-1 map = 0%,  reduce = 0%
2012-11-14 16:48:42,270 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 2.39 sec
2012-11-14 16:48:43,349 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 2.39 sec
2012-11-14 16:48:44,429 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 2.39 sec
2012-11-14 16:48:45,507 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 2.39 sec
2012-11-14 16:48:46,580 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 2.39 sec

..
.
.
.
.
.
.
2012-11-14 16:56:44,394 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 54.9 sec
2012-11-14 16:56:45,417 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 54.9 sec
2012-11-14 16:56:46,449 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 54.9 sec 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-16T22:38:20.277

您只是想将本地机器中的数据加载到 HIVE 表中。在 HIVE 中，此操作不会启动任何 reduce 阶段，加载数据发生在 map 阶段，并且在 reduce 阶段不会执行任何操作。

要查找一些减少任务，请尝试使用“group by”等操作进行一些其他 HIVE 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-10T21:22:41.233

通过修改 '/etc/hosts' 中的 ip 以匹配

> ifconfig > inet 地址

范围

# xaml - winrt 在外部单击时取消选择 ListView 项

> ID：13378398
> 
> 赞同：1
> 
> 时间：2012-11-14T11:58:30.857
> 
> 标签：xaml, listview, windows-runtime

当我在 xaml for Windows Store Application 的 ListView 外部单击时，如何取消选择所有 ListView 项目？当我向 LostFocus 事件添加处理程序时，我取消选择所有，但以防万一我只想更改所选项目 LostFocus 事件也会触发。任何人都可以分享这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:16:17.617

在 LostFocus 之后稍等片刻，看看它是否真的丢失了。就像在 Dispatcher 上调用 RunAsync 一样？看起来有点像黑客，但它可以工作。

# spring - 在 Spring / Jetspeed 中实现数据库层

> ID：13378412
> 
> 赞同：1
> 
> 时间：2012-11-14T11:59:30.077
> 
> 标签：spring, spring-mvc, nosql, portal, jetspeed2

我正在使用 Spring/Jetspeed/portal 架构并希望添加一个使用持久存储的新门户。Jetspeed 数据库本身是 MySql，所以我正在考虑向这个数据库添加一些额外的表，我认为我不能重新使用现有的 Jetspeed 表？我可以使用 jdbc 来查询这些表，但我想抽象这个层。我应该使用什么技术？我喜欢 NoSql 的想法，这可能是一个很好的项目来介绍它。我将只添加大约 3 个表。

# visual-studio-2012 - 使用 Visual Studio 插件代码为编辑器提供焦点

> ID：13378419
> 
> 赞同：2
> 
> 时间：2012-11-14T11:59:49.970
> 
> 标签：visual-studio-2012, visual-studio-extensions

我有以下代码以编程方式打开 Visual Studio ProjectItem 节点作为代码编辑器视图。

```
void Commit(object sender, KeyPressEventArgs args)
{
    if (args.KeyChar == (char)Keys.Return)
    {
        Close();
        var selected = _FilteredList.FirstOrDefault();
        if (selected != ""){
            var item = _Items.Where(x => x.Name == selected).First();
            if (item!=null)
            {
                Window win = item.Open(Constants.vsViewKindCode);
                win.Visible = true;
                win.SetFocus();
            }
        }
    }
} 
```

问题是属于窗口**win**的编辑器被带到选项卡堆栈的顶部，但光标没有给编辑器焦点。将光标焦点移动到编辑器的任何技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T18:45:34.653

这对我有用：

```
 Project activeProject = _applicationObject.Solution.Projects.Item(1);

    ProjectItem a = activeProject.ProjectItems.Cast<ProjectItem>().FirstOrDefault(item => item.Name.EndsWith(".cs"));

    Window win = a.Open();
    win.Activate();

    _applicationObject.ExecuteCommand("Edit.GoTo", String.Format("{0}", 2));
    _applicationObject.ExecuteCommand("Edit.CharRight"); 
```

您可以使用“Edit.GoTo”命令将光标移动到所需的行。

如果您需要编辑代码，也许 EditPoint 是更好的选择：

```
 TextSelection ts;
      ts = (TextSelection)_applicationObject.ActiveDocument.Selection;
      EditPoint ep = (ts.ActivePoint).CreateEditPoint();

      ep.StartOfDocument(); 
```

# c# - 这两种声明自绑定的方式有什么区别？

> ID：13378423
> 
> 赞同：2
> 
> 时间：2012-11-14T12:00:01.793
> 
> 标签：c#, .net, wpf, binding

我有一个包含*ItemsSource* DependenceProperty 的 UserControl，它必须绑定到内部控件的 ItemsSource 属性：

```
ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource Self}}" 
```

对比

```
ItemsSource="{Binding ItemsSource, ElementName=controlName}" 
```

controlName 是控件的名称。

第一个绑定不起作用，而第二个绑定起作用。我不明白区别。

有任何想法吗？

**编辑：**

XAML：

```
<UserControl x:Class="MultiSelectTreeView.MultiSelectableTreeView"

         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 

         mc:Ignorable="d"

         Name="multiTree" >

This does not work ---> <TreeView ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource Self}}" >
This works ---> <TreeView ItemsSource="{Binding ItemsSource, ElementName=multiTree}" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:12:27.250

如果要绑定到父 UserControl 的 DP，则需要使用`Mode = FindAncestor`. 由于您对内部控制具有约束力，因此您需要沿着可视树向上移动。

`Self Mode`将在内部控件而不是父 UserControl 中搜索 DP。

```
ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource FindAncestor, 
                                                   AncestorType=UserControl}}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:16:34.037

我从您的问题中假设您的 Xaml 在结构上是这样的：

```
<UserControl x:Name="rootElement">
    <ListBox ItemsSource="{Binding .....}" />
</UserControl> 
```

然后您的绑定将执行以下操作：

```
ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource Self}}" 
```

...这将`ItemsSource`在控件上查找声明绑定的属性（即`ListBox`）。在您的情况下，这将导致一个问题，因为您实际上是在设置无限递归：您`ItemsSource`的绑定到`ItemsSource`绑定到...无限递归。您提到您正在使用 a `UserControl`here，我怀疑您可能希望`RelativeSource`返回根`UserControl`元素 - 但事实并非如此。

```
ItemsSource="{Binding ItemsSource, ElementName=rootElement}" 
```

...这将绑定到`ItemsSource`具有特定名称的控件上的属性。如果您在 a 中工作，`UserControl`那么通常您会`x:Name`在 the 的根元素上进行设置，`UserControl`并以这种方式从绑定中引用它。这将允许您将孩子绑定`ListBox`到`ItemsSource`您的`UserControl`.

仅供参考，另一种选择是使用`AncestorType`绑定来查找您的 parent `UserControl`。如果您的`UserControl`类型被称为`MyControl`，它看起来像这样：

```
ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource FindAncestor, AncestorType=MyControl}}" 
```

# java - 放大或缩小时相对于图像的对象

> ID：13378427
> 
> 赞同：0
> 
> 时间：2012-11-14T12:00:17.357
> 
> 标签：java, android, math

我在 VisualizationView 内的屏幕上绘制了一张地图。我可以放大和缩小这张地图，具体取决于我使用触摸功能在该视图中的焦点位置。

我还在放大和在此地图上绘图之间切换。当我在地图上绘制箭头并切换回放大时。我希望我在地图上绘制的箭头相对于我正在放大和缩小的地图保持在同一位置。这意味着必须调整此箭头的 x 和 y 位置。

我有所有需要的变量我只是不知道如何解决这个问题，因为它与数学有关。

有人可以向我解释如何明智地解决这个数学问题。我尝试在互联网上查找，但找不到很好的解释。此外，平板电脑上的地图分辨率始终为 576 x 576。

```
public void onZoom(final double focusX, final double focusY,
                final double factor) {

     //pseudocode
     Triangle.x = ..
     Triangle.y = ..
     Triangle.repaint();
     //peusocode
} 
```

缩放代码如下直接来自库。

```
public void zoom(double focusX, double focusY, double factor) {
synchronized (mutex) {
  Transform focus = Transform.translation(toMetricCoordinates((int) focusX, (int) focusY));
  double zoom = RosMath.clamp(getZoom() * factor, MINIMUM_ZOOM, MAXIMUM_ZOOM) / getZoom();
  transform = transform.multiply(focus).scale(zoom).multiply(focus.invert());
} 
```

}

我希望有人能解释解决这个问题的数学原理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:27:22.230

我并不直接熟悉您正在使用的库，但是要将箭头（三角形）的位置移动到其新位置，您应该对其应用与地图相同的变换。

可以这样想：在缩放之前，箭头的位置（箭头的中心或头部，但是您定义“位置”）和它指向的地图上的点具有相同的坐标。缩放后，地图上的点将移动到新位置，您希望箭头移动到相同的新位置，因此您需要使用相同的变换。就像我说的，我不熟悉你正在使用的库，所以我不能确切地告诉你如何做到这一点，但这就是你想要的。

但是请注意，您只想转换箭头/三角形的*一个*点并相对于它绘制其他点。如果你转换所有 3 个，你最终会随着放大和缩小箭头变得越来越小（我假设你不想要）。

# nhibernate - 使用 nhibernate envers 将以前的版本与父实体一起存储

> ID：13378429
> 
> 赞同：1
> 
> 时间：2012-11-14T12:00:19.110
> 
> 标签：nhibernate, fluent-nhibernate, hibernate-envers

我正在使用[nhibernate envers](https://bitbucket.org/RogerKratz/nhibernate.envers)来审核我的数据/保存以前的版本。

我想做的是针对父实体存储以前的版本。
像这样的东西：

```
public abstract class BookBase
{
    public virtual int ID { get; set; }
    public virtual string Name { get; set; }
    public virtual string Author { get; set; }
}

public class Book : BookBase
{
    public virtual ICollection<BookRevision> PreviousVersions { get; set; }
}

public class BookRevision : BookBase
{
    public virtual int VersionNumber { get; set; }
    public virtual DateTime VersionTimeStamp { get; set; }
} 
```

envers nhibernate 是否可能（使用流利的 nHibernate 进行映射）
我的 envers 配置需要看起来像什么？
我的映射需要是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:13:31.097

Envers 为您处理审计，您不必在域模型中定义自己的审计类型。

定义（并正常映射）您的实体

```
public class Book
{
    public virtual int ID { get; set; }
    public virtual string Name { get; set; }
    public virtual string Author { get; set; }
} 
```

如果您想对 Book 修改进行审核，请像这样配置 Envers

```
var enversCfg = new FluentConfiguration();
enversCfg.Audit<Book>();
yourNhCoreConfiguration.IntegrateWithEnvers(enversCfg); 
```

# c# - 哪里最好在 ASP.net 应用程序中删除临时文件？

> ID：13378430
> 
> 赞同：2
> 
> 时间：2012-11-14T12:00:21.320
> 
> 标签：c#, asp.net, delete-file, temp, sessionend

我在我的 asp.net 应用程序中创建了几个临时文件，当用户完成使用它们时我需要删除它们。

我试过了

```
 void Session_End(object sender, EventArgs e) 
    {

        System.IO.File.Delete(@"C:\Temp\test.doc");        
    } 
```

但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:11:46.210

There is no good reliable (works 100% of the time) way to determine when a user leaves a web application. While conventional means will work when all is running as expected, there are edge cases that can happen that will orphan data, e.g.

The user's computer freezes or crashes... The server freezes or crashes... The user's internet connection fails... The server's internet connection fails...

You get the idea. For this reason, I personally prefer to do all processing in memory instead of writing temporary files to the web server's hdd. That way the .Net garbage collector will handle cleaning up any orphaned data.

If, however, you are processing data in sufficiently large quantities to make keeping it in memory not a viable option, set up a Windows Service or scheduled task to perform cleanup once enough time has passed to ensure that the files are stale. Continue to attempt cleanup at runtime, but the alternate method should allow you to handle any data which becomes orphaned over time.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T12:03:38.087

您必须在此文件夹中向 iisuser 授予权限

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T12:07:49.370

1) 在 web.config 上设置模式变量

```
<sessionState 
        mode="InProc"
        stateConnectionString="tcpip=127.0.0.1:42424"
        sqlConnectionString="data source=127.0.0.1;Trusted_Connection=yes"
        cookieless="false" 
        timeout="20" 
/> 
```

2）启动一个会话变量。3) 将一些代码放在 Session_End 上，然后检查当用户在浏览器上单击 [X] 时是否执行了该代码。

取自以下

[http://www.tek-tips.com/viewthread.cfm?qid=742667](http://www.tek-tips.com/viewthread.cfm?qid=742667)

希望这可以帮助

# android - 如何绘制超过 1 个地理位置？

> ID：13378438
> 
> 赞同：0
> 
> 时间：2012-11-14T12:00:46.050
> 
> 标签：android, geolocation

如何绘制超过 1 个地理位置？我有一个绘制 1 位置的代码。我修改了这段代码并添加了更多输入。

但是如何修改地理位置代码？实际代码如下，最后一个代码是我修改的。我怎样才能在这个函数中添加更多参数？

**实际代码-**

```
GeoPoint geoPoint = new GeoPoint((int)(lat1 * 1E6), (int)(lon1 * 1E6));

    import com.google.android.maps.GeoPoint;
    import com.google.android.maps.MapActivity;
    import com.google.android.maps.MapController;
    import com.google.android.maps.MapView;
    import com.google.android.maps.Overlay;
     import com.google.android.maps.OverlayItem;

     public class AndroidGoogleMapsActivity extends MapActivity {
     @Override
     public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Displaying Zooming controls
        MapView mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);

        /**
         * Changing Map Type
         * */
        // mapView.setSatellite(true); // Satellite View
        // mapView.setStreetView(true); // Street View
        // mapView.setTraffic(true); // Traffic view

        /**
         * showing location by Latitude and Longitude
         * */        
        MapController mc = mapView.getController();
        double lat = Double.parseDouble("48.85827758964043");
        double lon = Double.parseDouble("2.294543981552124");
        GeoPoint geoPoint = new GeoPoint((int)(lat * 1E6), (int)(lon * 1E6));
        mc.animateTo(geoPoint);
        mc.setZoom(15);
        mapView.invalidate(); 

        /**
         * Placing Marker
         * */
        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.mark_red);
        AddItemizedOverlay itemizedOverlay = 
             new AddItemizedOverlay(drawable, this);

        OverlayItem overlayitem = new OverlayItem(geoPoint, "Hello", "Sample Overlay    
    item");

        itemizedOverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedOverlay);

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
    }

  import java.util.ArrayList;

 import android.content.Context;
 import android.graphics.drawable.Drawable;
import android.util.Log;
import android.view.MotionEvent;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

 public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

   private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

   private Context context;

   public AddItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
   }

   public AddItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
   }

   @Override
   protected OverlayItem createItem(int i) {
      return mapOverlays.get(i);
   }

   @Override
   public int size() {
      return mapOverlays.size();
   }

   @Override
   protected boolean onTap(int index) {
      Log.e("Tap", "Tap Performed");
      return true;
   }

   public void addOverlay(OverlayItem overlay) {
      mapOverlays.add(overlay);
       this.populate();
   }

   /**
    * Getting Latitude and Longitude on Touch event
    * **/
   @Override
   public boolean onTouchEvent(MotionEvent event, MapView mapView) 
   {   

       if (event.getAction() == 1) {                
           GeoPoint geopoint = mapView.getProjection().fromPixels(
               (int) event.getX(),
               (int) event.getY());
           // latitude
           double lat = geopoint.getLatitudeE6() / 1E6;
           // longitude
           double lon = geopoint.getLongitudeE6() / 1E6;
           Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon,    
    Toast.LENGTH_SHORT).show();
       }                            
       return false;
    } 

 } 
```

这是我修改的代码

```
public class AndroidGoogleMapsActivity extends MapActivity {
private static final int MENU_ITEM_1 = Menu.FIRST + 1;
private static final int MENU_ITEM_2 = Menu.FIRST + 2;
private static final int MENU_ITEM_3 = Menu.FIRST + 3;

EditText Latitude1;
EditText Latitude2;
EditText Latitude3;
EditText Latitude4;

EditText Longitude1;
EditText Longitude2;
EditText Longitude3;
EditText Longitude4;

Toast msg;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Displaying Zooming controls
    MapView mapView = (MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    Latitude1=owncordinates.Latitude1;

    Latitude2=owncordinates.Latitude2;
    Latitude3=owncordinates.Latitude3;
    Latitude4=owncordinates.Latitude4;

    Longitude1=owncordinates.Longitude1;
    Longitude2=owncordinates.Longitude2;
    Longitude3=owncordinates.Longitude3;
    Longitude4=owncordinates.Longitude4;

    /**
     * Changing Map Type
     * */
    // mapView.setSatellite(true); // Satellite View
    // mapView.setStreetView(true); // Street View
    // mapView.setTraffic(true); // Traffic view

    /**
     * showing location by Latitude and Longitude
     * */        
    MapController mc = mapView.getController();

  double lat1 = Double.parseDouble(""+Latitude1);
       double lon1 = Double.parseDouble(""+Longitude1);

    double lat2 = Double.parseDouble(""+Latitude2);
    double lon2 = Double.parseDouble(""+Longitude2);

    double lat3 = Double.parseDouble(""+Latitude3);
    double lon3 = Double.parseDouble(""+Longitude3);

    double lat4 = Double.parseDouble(""+Latitude4);
    double lon4 = Double.parseDouble(""+Longitude4);

    GeoPoint geoPoint = new GeoPoint((int)(lat1 * 1E6), (int)(lon1 * 1E6));
    mc.animateTo(geoPoint);
    mc.setZoom(15);
    mapView.invalidate(); 

    /**
     * Placing Marker
     * */
    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.mark_red);
    AddItemizedOverlay itemizedOverlay = 
         new AddItemizedOverlay(drawable, this);

    OverlayItem overlayitem = new OverlayItem(geoPoint, "Hello", "Sample Overlay     
   item");

    itemizedOverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedOverlay);

}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

           import java.util.ArrayList;

     import android.content.Context;
 import android.graphics.drawable.Drawable;
 import android.util.Log;
 import android.view.MotionEvent;
 import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

     public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

   private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

   private Context context;

   public AddItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
   }

   public AddItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
   }

   @Override
   protected OverlayItem createItem(int i) {
      return mapOverlays.get(i);
   }

   @Override
   public int size() {
      return mapOverlays.size();
   }

   @Override
   protected boolean onTap(int index) {
      Log.e("Tap", "Tap Performed");
      return true;
   }

   public void addOverlay(OverlayItem overlay) {
      mapOverlays.add(overlay);
       this.populate();
   }

   /**
    * Getting Latitude and Longitude on Touch event
    * **/
   @Override
   public boolean onTouchEvent(MotionEvent event, MapView mapView) 
   {   

       if (event.getAction() == 1) {                
           GeoPoint geopoint = mapView.getProjection().fromPixels(
               (int) event.getX(),
               (int) event.getY());
           // latitude
           double lat = geopoint.getLatitudeE6() / 1E6;
           // longitude
           double lon = geopoint.getLongitudeE6() / 1E6;
           Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon,    
       Toast.LENGTH_SHORT).show();
       }                            
       return false;
   } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:20:32.030

您只需执行以下操作：

```
 OverlayItem overlayitem = new OverlayItem(geoPoint, "Hello", "Sample Overlay    
item");
    OverlayItem overlayitem2 = new OverlayItem(geoPoint, "Hello", "Sample Overlay    
item");

    itemizedOverlay.addOverlay(overlayitem);
    itemizedOverlay.addOverlay(overlayitem2); 
```

现在您有 2 个相同类型的叠加项目。

# c# - TFS 构建服务器在警告“找不到最后一个标签”后卡住

> ID：13378439
> 
> 赞同：5
> 
> 时间：2012-11-14T12:00:54.473
> 
> 标签：c#, .net, tfs, automated-tests

我在 tfs 服务器上设置了一个自动构建。我无法让它工作，因为它总是在构建源代码过程完成后卡住。之后的过程是将数据从一个文件夹复制到另一个文件夹，这也可以工作，但它只是在那之后卡住了。如下图所示。

我不知道如何解决这个问题，因为它没有显示任何错误消息或给我任何线索。我想知道如何解决这个问题？

这是一个概念证明 C# 应用程序。它可以在我的机器上完美地编译，它曾经在测试服务器上编译。

![在此处输入图像描述](../Images/3f9d01f3e8672b63fec9a00d019284ab.png)

**更新**

在我将参数应用到 MSBuild 后`SkipLabel and/or SkipPostBuild`，结果如下图所示。

![在此处输入图像描述](../Images/7c18bb39c027f51cdc79c4cdab2732ed.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-10T09:53:41.763

我遇到了同样的问题；可能是因为一些构建与标签一起被删除。

[我按照 Andy Geldman](http://www.andygeldman.com/index.php/2011/10/ever-expanding-associated-changesets-and-work-items/)提供的步骤进行了修复，最后一个好的标签被传递到将工作项和变更集与构建相关联的活动中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:20:31.877

有时这是由于先前的构建被删除。

覆盖 MSBuild 属性 -`SkipLabel`和/或`SkipPostBuild`应该有帮助

[Team Foundation 构建属性](http://msdn.microsoft.com/en-us/library/aa337598%28v=vs.100%29.aspx)

# google-maps - GMap Api geocoder.getLatLng（地址）函数，在循环中调用时不起作用

> ID：13378445
> 
> 赞同：1
> 
> 时间：2012-11-14T12:01:08.283
> 
> 标签：google-maps, map, google-maps-api-2

我正在尝试使用此递归函数来查找 2088 个不同地址的 LatLng 并以大约 180 个结果重播我。虽然所有地址在谷歌地图网站上都是有效的。

```
function test(i)
         {
            if(i >= jsArray.length){return;}
               var geocoder = new GClientGeocoder(); 
             geocoder.getLatLng(jsArray[i], function (current) { 
                     return function(point) { 
                                     if (!point) {

                                    data.push("null");
                                    //nulls.push(myindex);
                                  } else {

                                    data.push(point);

                                    //alert("done");
                                  }

                                test(i+1,jsArray);
                            } 

                        }(i));

                 } 

                test(0); 
```

* * *

我已经开发了这个递归函数，但它需要大约 30 分钟才能得到好的结果，

```
 function test2(i)
             {
                 geocoder.getLocations(jsArray[i], function (current) { 
                 return function(response) { 
                                 if (!response || response.Status.code != 200) {
                                //alert(address + " not found");
                                 //test(i,jsArray);
                                // data.push("null");
                                //nulls.push(myindex);
                                test2(i);

                              } else {
                                 var len = response.Placemark[0];

                                    point2 = new GLatLng(
                                      len.Point.coordinates[1],
                                      len.Point.coordinates[0]
                                    );  
                                data[i] = point2;
                              }
                        }
                        }(i));
             } 

            for(i =0 ; i<=jsArray.length; i++)
            {
                if(i==jsArray.length){
                      alert(data.length);
                    ///  $("#maintable").show(100) ;                         
                    ///  $("#loading").hide(100) ;

                }else{
                    test2(i);
                }

            } 
```

我仍然需要专家来帮助我:) :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:04:57.713

地理编码器是异步的（这使得在循环中使用它有问题）并且受到配额和速率限制。它不适用于在地图上显示大量已知地址，而是用于用户输入的数据。

您确实应该离线地理编码您的点，保存结果坐标并使用这些坐标在地图上显示标记。

如果你在循环中使用它，你不应该使用 getLatLng 方法，你应该使用[getLocations 方法](https://developers.google.com/maps/documentation/javascript/v2/reference#GClientGeocoder.getLocations)，它包含一个[状态代码](https://developers.google.com/maps/documentation/javascript/v2/reference#GGeoStatusCode)，让你知道它为什么失败（G_GEO_TOO_MANY_QUERIES = 620，这意味着你可以限制你的请求并可能获得有用的结果）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:00:01.710

// jsArray 是地址数组。该数组的长度为 2087 个元素，所有地址均来自谷歌地图。

```
function MYFunction(i)
         {
             geocoder.getLocations(jsArray[i], function (current) { 
             return function(response) { 
                             if (!response || response.Status.code != 200) {

                              test2(i); // recursive calling 

                          } else {
                             var len = response.Placemark[0];

                                point2 = new GLatLng(
                                  len.Point.coordinates[1],
                                  len.Point.coordinates[0]
                                );  
                            data[i] = point2;
                          }
                    }
                    }(i));
         }  /// end of y Function 
```

//// 循环每个地址并将其传递给 MyFunction 函数并启动递归函数。

```
 for(i =0 ; i<=jsArray.length; i++)
        {
                 MYFunction(i);

        } 
```

# c++ - 使用 C++ 创建跨平台程序

> ID：13378447
> 
> 赞同：2
> 
> 时间：2012-11-14T12:01:13.397
> 
> 标签：c++, compilation, cross-platform

假设我在 MSVC++ 2010 中有一个简单的项目。里面只有 main.cpp，它的代码很简单，如下所示：

```
 // include macros
    #define WIN32
    #include <FL/Fl.H>
    #include <FL/Fl_Window.H>
    #include <FL/fl_ask.H>
    // main function
    int main()
    {
        // init window
        Fl_Window *window = new Fl_Window(250, 250, "Derp Window"); 
        // show window, run window
        window->show();
        int result = Fl::run();
        fl_message("Goodbye...");
        // release pointers
        delete window;
        // return
        return result;
    } 
```

制作 Windows 兼容版本很容易，我所要做的就是设置发布模式并构建它。但是，正如我最近发现的那样，生成的 .exe 文件无法在 Mac 或 Linux 操作系统上运行。这让我感到惊讶，因为我使用的只是普通的旧 c++ 和 FLTK，它们是跨平台的。

所以，我的问题是，我将如何获取此代码并以可以在 Linux 操作系统和 Mac 操作系统上运行的方式对其进行编译？或者，是否有可能保留相同的代码并以不同的方式编译它，以便它可以在另一个操作系统上运行？如果不可能，我必须改变什么？

PS。代码非常简单，但如果你想知道#define WIN32 是否存在，因为没有它，编译器会因为缺少头文件而吓坏了，比如“X/X11.h”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:11:02.387

代码是兼容的，但这并不意味着生成的二进制文件是兼容的。总的来说，情况*从来都不*是这样。

编译器把你的代码翻译成你的特定架构和平台可以理解的低级代码，Windows 和 Mac 不一样。这个较低级别的代码基本上与 C++、FLTK 或它们中的任何一个的兼容性承诺无关。

这里的类比是，在道路左侧驾驶汽车在机械上与在道路右侧驾驶汽车相同（所以让我们忽略导航差异以及您可能是转向不同的方向），因此您对如何驾驶汽车的知识同样适用于这两种情况……但这并不意味着您可以简单地将汽车停在法国或美国的道路左侧。你会造成相当严重的事故。当您将驾驶汽车的知识应用于特定环境时，您必须适应当地的道路规则。

您可以在目标环境下重新编译相同的代码，或者使用交叉编译器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T12:07:31.703

如果您无法访问 Linux 或 Mac OSX 计算机，则必须对其进行交叉编译。为此，您必须找到现有的交叉编译器，将源下载到例如 GCC 并自己构建。从“交叉编译器”（或类似的）中进行一些搜索，您会发现一些易于遵循的教程。

如果您*确实*可以访问 Linux 或 Mac，那么只需复制代码并在该环境中构建它。小心使用 Linux，因为不同的发行版有不同版本的某些库。

最后，还有诸如[Wine 之](http://www.winehq.org/)类的环境将允许 Windows 程序在其他平台上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:26:45.050

如果您使用 FLTK，则需要在编译程序的每个平台上都包含它的头文件，而不仅仅是 WIN32。

您收到的关于未找到的错误消息`X11/X.h`是由于缺少编译器标志（请参阅*1*）、需要首先包含的先决条件（请参阅*2*）或缺少标头（请参阅*3*）引起的。

1.  用于`fltk-config --cflags`获取所需的编译器标志，`fltk-config --libs`用于需要传递给链接器的标志。
2.  似乎不适用于这里，但您可能会遇到需要它的库。
3.  如果您使用 Ubuntu 或 Debian，请通过执行来安装 X 头文件`apt-get install x11proto-core-dev`，但如果您已经安装`libfltk1.3-dev`（或其他版本），则不需要这样做，因为它应该引入所有必需的依赖项。如果您使用不同的发行版，请确保您已安装 X 标头包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T13:33:02.580

问题可能是`#define WIN32`. 根据您的描述，我猜想该`FLTK`库正在使用它来有条件地为 Windows 或 Unix (X) 编译它的头文件。因此，在为 Windows 编译时需要定义它，而在为 Unix 编译时需要定义它。处理此类问题的常用方法是`/DWIN32`在为 Windows 编译时向编译器调用添加一个选项。您可能还必须做一些事情来获得正确的库。

FWIW：完全可以设计库，使头文件适用于两个系统，而无需任何条件编译。如果您想要条件编译，您可能应该使用系统的预定义符号（`_WIN32`例如）。

# javascript - html5sql - 似乎无法连接到我的数据库

> ID：13378451
> 
> 赞同：2
> 
> 时间：2012-11-14T12:01:39.800
> 
> 标签：javascript, jquery, html, sqlite, web-storage

我正在使用 html5sql.com 来做 html5 DB 的东西 :o) - 真的是一个很棒的模块......

然而，我被卡住了！

在我的 index.html/index.js 中，我在其中创建了我的数据库和表。

```
try {
        html5sql.openDatabase("com.dynamicvenues.fairkeyMobile.db","Questionnaire",3*1024*1024);
        html5sql.process(
                [
                 "CREATE TABLE IF NOT EXISTS Questionnaire (uid INTEGER, json TEXT, hash TEXT);",
                 "CREATE TABLE IF NOT EXISTS Answers (id INTEGER PRIMARY KEY, visitor_id TEXT, json TEXT);"
                ],
                function(){
                     console.log("Success Creating Tables");
                 },
                 function(error, statement){
                     console.error("Error: " + error.message + " when processing " + statement);
                 }        
        )
    } catch(error) {
        alert("Database create failed: "+error.message);
    } 
```

在同一页面中，我用数据填充了一个表：

```
jQuery.get(serverHttp+"json.php?exhibitorID="+exhibitorID, function(data){
        var html = $(data).map(function() {
            return $(this).html();
        });
        var jsonStr = html[0];
        var exhibitorID = html[1];
        var hashStr = html[2];

        var SQL = "INSERT INTO Questionnaire (uid, json, hash) VALUES ("+exhibitorID+",'"+jsonStr+"','"+hashStr+"')";
        try {
            html5sql.process(SQL,
                    function(){
                        console.log('Inserted 1 row!');
                    },
                    function(){
                        console.error("Error: " + error.message + " when processing " + statement);
                    }
            )
        } catch(error) {
            alert("Query failed: "+error);
        } 
```

现在，在另一个名为 questions.html/questionnaire.js 的页面中，我正在尝试检索存储在问卷调查表中的数据。

```
html5sql.process(
            ["SELECT * FROM Questionnaire;"],
            function(transaction, results, rowsArray){
                for(var i = 0; i < rowsArray.length; i++){
                    var uid = rowsArray[i].uid;
                    var json = rowsArray[i].json;
                    var hash = rowsArray[i].hash;
                    console.log("Retrieved rows: "+uid+" - "+json+" "+hash);
                }
                console.log("Done selecting data");
            },
            function(error, statement){
                console.error(error.message+" Occured while processing: "+statement);
            }
       ); 
```

我究竟做错了什么？？？

问候，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:58:50.023

解决了！插入：`html5sql.openDatabase("com.dynamicvenues.fairkeyMobile.db","Questionnaire",3*102‌​4*1024);`之前`html5sql.process()`在问卷.js

# vb.net - file.exists 总是返回 false

> ID：13378454
> 
> 赞同：2
> 
> 时间：2012-11-14T12:01:54.797
> 
> 标签：vb.net, .net

我有一个问题，file.exists aways 返回 false。

情况：执行 file.exists 的服务器 1 有一个映射到位于远程位置的服务器 2 的网络驱动器。

访问和浏览网络驱动器是好的。

但是在运行网页时，我总是得到一个错误。连路径都ok，de文件也存在。

我尝试了两种情况： U:/folders/file.txt 和 //ipadress/folders/file.txt

server2 上的共享文件夹甚至将权限设置为所有人完全控制。

奇怪的是，在 Visual Studio 中运行调试时，它可以工作，并且 file.exists 返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:09:22.837

尝试将其解析为 Uri 并检查 LocalPath 属性。如果您不想处理可能的异常，Uri 有一个“TryCreate”用于此目的。

如果您从网页访问它，则该网页可能没有映射（即 U:），您需要使用全名（如 \\myserver\folder\etc）。检查此线程中的第二个答案，了解一些非常有用的方法，这些方法可以让您执行此操作：[如何确定映射驱动器的实际路径？](https://stackoverflow.com/questions/2067075/how-do-i-determine-a-mapped-drives-actual-path)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:14:16.110

我猜想在用户的登录脚本中添加以下命令，该脚本在 IIS 的“登录为：”选项中设置，或者您的应用程序服务应该可以解决问题。

```
net use x: \\SERVERNAME\SHARENAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:43:09.503

驱动器是按用户映射的，而不是按机器映射的。

这意味着如果您使用自己的用户帐户映射了一个驱动器，但服务器正在使用另一个，则服务器将看不到您映射的驱动器。

# python - 用于异常处理的首选 Python 样式

> ID：13378455
> 
> 赞同：3
> 
> 时间：2012-11-14T12:01:55.357
> 
> 标签：python, syntax, try-except

这是一个一般性的最佳实践问题。以下哪个 try-except 示例更好（函数本身是 requests.get() 的简单包装器）：

```
def get(self, url, params=params):
    try:
        response = {}
        response = requests.get(url, params=params)
    except requests.ConnectionError,e:
        log.exception(e)
    finally:
        return response 
```

或者

```
def get(self, url, params=params):
    try:
        return requests.get(url, params=params)
    except requests.ConnectionError,e:
        log.exception(e)
        return {} 
```

或者两者都不是最理想的？我似乎经常为错误日志编写这类包装函数，并且想知道最 Pythonic 的方法。对此的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:11:21.957

最好不要在异常时返回任何东西，我同意马克的观点 - 没有必要在异常时返回任何东西。

```
def get(self, url, params=params):
    try:
        return requests.get(url, params=params)
    except requests.ConnectionError,e:
        log.exception(e)

res = get(...)
if res is not None:
    #Proccess with data

#or
if res is None:
    #aborting 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T12:14:32.803

第二个版本在我看来还可以，但第一个版本有点破。例如，如果 try-except 中的代码引发了除了 之外的任何内容`ConnectionError`，您仍然会返回，`{}`因为返回 from会`finally`抑制任何异常。而后一个功能非常令人困惑（在回答之前我必须自己尝试一下）。

您还可以将`else`子句与`try`：

```
def get(self, url, params=params):
    try:
        # Do dangerous some stuff here
    except requests.ConnectionError,e:
        # handle the exception

    else:  # If nothing happened
        # Do some safe stuff here
        return some_result
    finally:
        # Do some mandatory stuff 
```

这允许更精确地定义异常范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T12:05:19.787

第二个对我来说似乎更清楚。

第一个版本有点混乱。起初，我认为您将两次分配给同一个变量是一个错误。只是经过一番思考，我才明白为什么会这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T12:48:13.693

我可能会考虑编写一个上下文管理器。

```
from contextlib import contextmanager

@contextmanager
def get(url, params=params):
    try:
        yield requests.get(url, params=params)       
    except requests.ConnectionError as e:
        log.exception(e)
        yield {}
    except:
        raise # anything else stays an exception 
```

然后：

```
with get(...) as res:
    print res # will be actual response or empty dict 
```

# jquery - 使用javascript重新加载时平滑替换图像

> ID：13378469
> 
> 赞同：2
> 
> 时间：2012-11-14T12:02:45.437
> 
> 标签：jquery, jquery-ui

我正在使用 javascript 中的 setInterval 替换计时器页面上的图像（这是一个需要更新的统计图）。

我正在使用以下代码：

```
var tid = setInterval(mycode, 20000);
function mycode() {
    var theDate = new Date();
    var mili = theDate.getUTCDate() + theDate.toLocaleTimeString() + theDate.getMilliseconds();
    var img = $('<img />')
        .attr('src', '@Url.Action("Chart", "Home", new {ForceNoCache = "theDate"})')
        .attr('id', 'GraphImage')
        .load(function () 
        {
            if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) 
            {
                alert('broken image!');
            } 
            else 
            {
                $('#GraphImage').replaceWith(img);
            }
        });
        img.attr('src', img.attr('src').replace("theDate", mili));
} 
```

该图像目前只是坐在页面上的一个 div 中，如下所示：

```
 <div style="float:left;margin-right:20px">
    <img id="GraphImage" alt="Graph of Results" src="@Url.Action("ChartImage", "Home")" /> 
  </div> 
```

此代码每 20 秒有效并替换一次图像 - 但是，即使我使用 .load 函数并且在完全加载之前不替换图像，当浏览器交换图像时，我仍然会得到一个恼人的小闪烁。

我将如何使用 jQuery 淡入淡出过渡/动画来平滑交换两个图像？理想情况下，我想要一种方法来做到这一点，而不需要太多额外的标记口香糖或 css 限制来限制图像在页面中的样式和定位。

类似于这个问题：[Javascript Image Reloading; 闪烁](https://stackoverflow.com/questions/5098276/javascript-image-reloading-flickers)

但是我已经在这个问题上使用了公认的答案，并且仍然在闪烁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:15:01.523

每次`mocode()`触发时，您似乎都会创建一个新的`<img />`并替换以前的。通过重复使用相同的内容，您将获得更平滑的效果`<img>`- 只需更改其 src。

我不确定你的代码是如何工作的，所以很难确定，但我认为你需要这样的东西：

```
function graphError() {
    alert('Graph: reload failed');
}
var $graphImg = $("#GraphImage").on('error', graphError);
var tid = setInterval(mycode, 20000);
function mycode() {
    var theDate = new Date();
    var mili = theDate.getUTCDate() + theDate.toLocaleTimeString() + theDate.getMilliseconds();
    $.ajax({
        url: '@Url.Action("Chart", "Home", new {ForceNoCache = "theDate"})',
    }).done(function(srcURL) {
        $graphImg.attr('src', srcURL.replace("theDate", mili));
    }).error(graphError);
} 
```

您可能需要以不同的方式构建 url，并且稍微考虑一下可以使错误消息更具体。

## 编辑

Tyco，您的解决方案看起来不错，如果可行，您可能会想坚持下去。同时，我一直在使用类似的想法，但以 jQuery 的 Deferreds 为中心的代码却截然不同。如果您没有使用它们，它们会有点令人兴奋，但是当您有异步任务时它们非常有用。

在您的情况下，您有三个连续的异步任务，获取图形 URL，加载图形图像，并淡出以前的图形以显示新版本。

对此进行编码相当简单，但代码需要具有容错性——特别是它需要满足服务器响应（URL 和图像本身）以错误的顺序返回或在下一次触发`setInterval`. 通过提供取消在前一次迭代中建立的功能链的方法，延迟提供了极大的帮助。

间隔 20 秒应该没有问题，但有一天互联网/服务器可能运行异常缓慢，或者您可能决定减少间隔。

除非你以前使用过 Deferreds，否则下面的代码看起来很陌生，但除非我出错，否则它应该可以完成工作。

Javascript：

```
$(function() {
    var $graphImg1 = $("#GraphImage1");
    var $graphImg2 = $("#GraphImage2");

    var promises = {
        fetchGraphUrl: null,
        loadImg: null,
        fadeOut: null
    };

    var graph_errors = {
        threshold: 5,//set low for testing, higher in production environment.
        count: 0
    };
    var interval = 5;//seconds

    $graphImg2.on('error', function() {
        if(promises.loadImg) {
            promises.loadImg.reject();
        }
    }).on('load', function() {
        if(promises.loadImg) {
            promises.loadImg.resolve();
        }
    });

    function graph_fetchURL(milli) {
        if(promises.fetchGraph) {
            promises.fetchGraph.reject(milli, 'fetchURL', 'timeout');
        }
        var dfrd = promises.fetchGraph = $.Deferred().fail(function() {
            jqXHR.abort();
        });
        var jqXHR = $.ajax({
            url: '@Url.Action("Chart", "Home", new {ForceNoCache = "theDate"})'
        }).done(function(srcURL) {
            dfrd.resolve(milli, srcURL);
        }).fail(function(jqXHR, textStatus, errorThrown) {
            dfrd.reject(milli, 'ajax', textStatus);
        });
        return dfrd.promise();
    }

    function graph_loadImg(milli, srcURL) {
        if(promises.loadImg) {
            promises.loadImg.reject(milli, 'loadImg', 'timeout');
        }
        //An extra deferred is needed here because $graphImg2's handlers don't know about milli.
        var dfrd = $.Deferred();
        promises.loadImg = $.Deferred().done(function() {
            dfrd.resolve(milli);
        }).fail(function() {
            dfrd.reject(milli, 'loadGraph', 'load error');
        });
        $graphImg2.attr('src', srcURL.replace("theDate", milli));
        return dfrd.promise();
    }

    function graph_fade(milli) {
        if(promises.fadeOut) {
            promises.fadeOut.reject(milli, 'fade', 'timeout');
        }
        promises.fadeOut = $.Deferred();
        $graphImg2.show();
        $graphImg1.fadeOut('fast', function() {
            promises.fadeOut.resolve(milli);
        });
        return promises.fadeOut.promise();
    }

    function graph_swap() {
        $graphImg1.attr('src', $graphImg2.attr('src')).show();
        $graphImg2.hide();
    }

    function graph_error(timestamp, phase, txt) {
        var txt = txt ? (' (' + txt + ')') : '';
        console.log(timestamp + ': fetchGraph failed in the ' + phase + ' phase' + txt);
        if(++graph_errors.count >= graph_errors.threshold) {
            clearInterval(tid);
            console.log('fetchGraph errors exceeded threshold (' + graph_errors.threshold + ')');
        }
        return $.Deferred().promise();//an unresolved, unrejected promise prevents the original promise propagating down the pipe.
    }

    function fetchGraph() {
        var now = new Date();
        var milli = now.getUTCDate() + now.toLocaleTimeString() + now.getMilliseconds();
        graph_fetchURL(milli)
            .pipe(graph_loadImg, graph_error)
            .pipe(graph_fade, graph_error)
            .pipe(graph_swap, graph_error);//this .pipe() chain is the glue that puts everything together.
    }
    fetchGraph();
    var tid = setInterval(fetchGraph, interval * 1000);
}); 
```

CSS：

```
#graphWrapper {
    position: relative;
    float: left;
    margin-right: 20px;
}
#GraphImage, #GraphImage2 {
    position: absolute;
    left: 0;
    top: 0;
    width: XXpx;
    height: YYpx;
}
#GraphImage2 {
    display: none;
} 
```

HTML：

```
<div id="graphWrapper">
    <img id="GraphImage1" alt="Graph of Results" src="" /> 
    <img id="GraphImage2" alt="" src="" /> 
</div> 
```

正如您将看到的，所有内容都组织成一堆相当简洁的函数，每个函数都是一个共同主题的变体，即：-

*   拒绝上一次迭代中任何未完成的同类任务
*   创建一个可以在下一次迭代中被拒绝的 deferred
*   执行任务本身
*   返回从 Deferred 派生的承诺

最后一个任务，`graph_swap()`，很简单，错误处理程序`graph_error()`略有不同。

有关详细信息，请参阅代码中的注释。

除了处理错误和延迟的服务器响应之外，这种方法的一个主要优点是主迭代器函数`fetchGraph()`变得非常简单。真正聪明的一行是一组链式`pipe()`命令，它们对任务进行排序并将任何错误路由到错误处理程序。

我已经尽可能多地对此进行了测试，并认为就像您自己的解决方案一样，它将提供平稳的过渡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:06:56.117

这是我目前确定的解决方案 - 我不确定这是否是最好的方法，所以非常欢迎任何替代想法:)

我使用了第二张图像并使用 z-index 在旧图像下方添加了新图像，然后在将旧图像从 DOM 中删除之前将其淡出。

这要求图像在包含的 DIV 内具有绝对位置，以便新图像直接在后面，而不是在旁边。

```
<script>
    // set interval
    var tid = setInterval(mycode, 20000);
    function mycode() {
        var theDate = new Date();
        var mili = theDate.getUTCDate() + theDate.toLocaleTimeString() + theDate.getMilliseconds();
        var img = $('<img />')
            .attr('src', '@Url.Action("Chart", "Home", new {ForceNoCache = "theDate"})')
            .attr('id', 'GraphImageNew')
            .attr('style', 'z-index:: 4;')
            .load(function () {
                if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
                    alert('broken image!');
                }
                else {
                    $('#GraphContainer').append(img);
                    $('#GraphImage').attr('id', 'GraphImageOld');
                    $('#GraphImageOld').fadeOut(1000, function () {
                        $('#GraphImageOld').remove();
                        $('#GraphImage').attr('style', 'z-index: 5;');
                    });
                    $('#GraphImageNew').attr('id', 'GraphImage');

                }
            });
            img.attr('src', img.attr('src').replace("theDate", mili));

    }
    function abortTimer() { // to be called when you want to stop the timer
        clearInterval(tid);
    }
</script> 
```

这似乎在 IE 和 Firefox 中运行良好——但我没有在其他浏览器中测试过。

# jquery - Jquery对话框确认框：当用户单击元素时使其出现

> ID：13378471
> 
> 赞同：0
> 
> 时间：2012-11-14T12:02:56.530
> 
> 标签：jquery, jquery-ui, modal-dialog

我正在尝试创建一个 jquery 对话框确认框。在下面的情况下，当我单击“单击确认框”时，应该会出现对话框。当用户选择 ok 或 cancel 时，这应该会消失，将有关按下哪个按钮的信息传递给调用函数。

我基本上从一个单独的解决方案中复制粘贴了以下代码，并进行了以下更改：我从另一个函数内部调用 myConfirm - 单击“click for..”时调用的函数。我不只是希望在加载页面时出现对话框（这似乎是我见过的大多数示例的情况）。结果是对话框根本没有出现。此外，如果我确实在脚本中直接调用 myConfirm，那么当我按下按钮时它不会关闭。我试过“关闭”而不是“破坏”

html

```
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="/resources/demos/external/jquery.bgiframe-2.1.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
</head>

<a id = "confirm"> click for confirm box</div> 
```

脚本

```
<script>
function myConfirm(dialogText, okFunc, cancelFunc, dialogTitle) {
        $('<div style="padding: 10px; max-width: 500px; word-wrap: break-word;">' + dialogText + '</div>').dialog({
            draggable: false,
            modal: true,
            resizable: false,
            width: 'auto',
            title: dialogTitle || 'Confirm',
            minHeight: 75,
            buttons: {
                OK: function () {
                    if (typeof (okFunc) == 'function') { setTimeout(okFunc, 50); }
                    $(this).dialog('destroy');
                },
                Cancel: function () {
                    if (typeof (cancelFunc) == 'function') { setTimeout(cancelFunc, 50); }
                    $(this).dialog('destroy');
                }
            }
        });
}

 $('[id=confirm]').click(function () { 
 myConfirm( 'Do you want to delete this record ?',
           function () {
                 alert('You clicked OK');
           },
        function () {
            alert('You clicked Cancel');
        },
        'Confirm Delete'
);

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:10:15.343

我已经用 jsfiddle.net 试过你的代码，它工作正常。

您的错误是您在文档仍在加载时附加了事件处理程序。[您必须使用ready()](http://api.jquery.com/ready/)事件等待文档准备就绪。

`#`此外，您可以通过使用选择器通过 id 选择元素来简化一点：

```
$(document).ready(function() {
    $('#confirm').click(function () { ...
}); 
```

另一件事：为什么在执行 okFunc 和 cancelFunc 时要启动计时器？这应该在没有 setTimeout 的情况下工作：

```
OK: function () {
                   $(this).dialog('close');
                   if (typeof (okFunc) == 'function') { okFunc(); }
                }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:59:02.747

事实证明，由于另一个脚本，它没有工作，该脚本的这一行包含一个较旧的 js 源：

```
<script src="http://code.jquery.com/jquery-1.4.4.js"></script> 
```

删除该行使其他事物和对话框都可以工作。

另外，我听从了 curtisk 的建议，这很好，只是不足以解决问题。

# hibernate - JPA 继承：每个类的唯一约束

> ID：13378472
> 
> 赞同：2
> 
> 时间：2012-11-14T12:03:15.677
> 
> 标签：hibernate, inheritance, jpa

我的层次结构的（具体）基类有一个字段。我希望该字段在层次结构中的每个类中都是唯一的。

所以如果 BaseClass 的 instance1 的 myField = 1，SubClass 的 instance1 也可以有 myField = 1。但是 BaseClass 的 instance2 不允许有 myField = 1。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:20:57.210

解决方案是使用 table_per_class 策略。

# wpf - 强制 IDataErrorInfo 验证

> ID：13378474
> 
> 赞同：15
> 
> 时间：2012-11-14T12:03:21.487
> 
> 标签：wpf, validation, idataerrorinfo

我在某个面板上有两个控件：文本框和组合框：

```
<TextBox Text="{Binding ShapeName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" />

<ComboBox SelectedItem="{Binding ActiveStageViewModel, Mode=OneWayToSource, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" /> 
```

当我在组合框中选择某些内容时，我需要强制对文本框进行 idataerrorinfo 验证。怎么做？

来自视图模型的代码：

```
string IDataErrorInfo.this[string propertyName]
    {
      get
      {
        var error = string.Empty;

        if (propertyName == Expression.GetPropertyName(() => ActiveStageViewModel))
        {
          // TODO: Add functionality to force ShapeName property validation
          return error;
        }

        if (propertyName == Expression.GetPropertyName(() => ShapeName))
        {
          error = ValidateShapeName();
        }

        TooltipMessage = error;
        return error;
      }
    } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-14T12:33:51.747

`NotifyPropertyChanged`只需为要验证的属性引发事件，或者如果您在 .NET 4.5 或 Silverlight 4 中，请使用[INotityDataErrorInfo](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo%28v=VS.95%29.aspx)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-14T14:15:10.407

还值得记住的是，您可以使用 String.Empty 属性引发 NotifyPropertyChanged。这将强制验证该级别的所有属性。有时可能很有用。

# ios - 从移动应用程序注册用户

> ID：13378477
> 
> 赞同：0
> 
> 时间：2012-11-14T12:03:29.820
> 
> 标签：ios, api, oauth-2.0, registration

我有一个移动应用程序，它允许用户通过 oAuth2 API 使用他的用户名/密码凭据登录。除了这个流程，我希望新的应用用户能够注册一个新帐户。

这是我可以/应该通过 oAuth API 处理的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:19:12.407

我建议你尝试使用第三方 API，比如 facebook，它实现起来非常简单，并且提供了很高的安全性。

# web-services - 使用 TestComplete8 进行 Web 服务测试 - 为 XmlDocument 参数设置正确的对象类型

> ID：13378478
> 
> 赞同：3
> 
> 时间：2012-11-14T12:03:30.610
> 
> 标签：web-services, asmx, automated-tests, xmldocument, testcomplete

我正在 TestComplete8 中测试一个 Web 服务，该服务需要输入为 xmlDocType，我在 XML 文件中有数据，但我没有成功让 Web 服务接受数据。

我尝试过直接使用该文件，使用 ReadWholeFile()，将其存储为 xmlCheckpoint 和其他方法来提取内容并制成正确的类型。一些方法刚刚返回一个空白对象。

从相关类型的生成代码框中，我得到以下信息：

```
function xmlDocType()
{
  var Result;
  var TypeFactory;
  //Get the type factory for the web service
  TypeFactory = WebServices.MyWebServices.TypeFactory;
  Result = TypeFactory.xmlDocType;
  return Result;
} 
```

虽然帮助文件说我可以将它复制到我的脚本单元并使用它来制作正确的对象类型，但我不知道它是如何工作的。

关于如何获取 XML 文件并最终得到正确的对象类型的任何建议？

谢谢

**编辑** 从 WSDL 文件中，所有出现的 XML 文档（有一个方法接受一个 XML 文档，也有一个返回一个）描述如下：

```
<s:element minOccurs="0" maxOccurs="1" name="xmlDoc">
<s:complexType mixed="true">
<s:sequence>
<s:any/>
</s:sequence>
</s:complexType>
</s:element> 
```

'xmlDoc' 确实是参数的名称，其从 Web 服务定义的类型是 .Net 类型 XmlDocument（Web 服务是用 C# 编写的）。

XML 文档包含字符串、整数、布尔值和小数的混合。

# javascript - 样式化动态添加的内容

> ID：13378479
> 
> 赞同：0
> 
> 时间：2012-11-14T12:03:30.863
> 
> 标签：javascript, jquery, jquery-mobile, styles

所以我在网上看了这个问题，但似乎找不到答案。让我充分解释我的问题。

我正在尝试将内容动态添加到 an`<ul>`并正确格式化。我要插入的是：

```
<ul data-role="listview" id="localStoresUL" data-autodividers="true" data-divider-theme="d">
</ul> 
```

我在其他地方有一个列表项，它被点击并加载了数据，我正在使用以下代码执行此操作：

```
$("#localStores").click(function() {
     Customer.getLocalStores(13, 12, function(stores){ 
        for(var i = 0; i < stores.length; i++){
           $("#localStoresUL").append('<li class="store" id="' + stores[i].id + '"><a data-transition="slide" data-filter="false">' + stores[i].fullname + '</a></li>'); 
        } 
     }); 
}); 
```

现在，当用户第一次单击链接并填充该链接时，这一切都很好`<ul>`。但是我在页面上有一个使用此代码的后退按钮：

```
<a href="#" class="ui-btn-left back" data-rel="back" data-icon="back"  data-add-back-btn="true" >Back</a> 
```

当用户单击此后退按钮，然后再次单击上一个按钮`<li>`（应填充`<ul>`）时，内容将动态加载，但根本没有格式化。我不知道为什么会这样。这个问题有意义吗，是否有人对如何解决它有任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:33:54.530

通常，如果内容已加载但未格式化，则您的 CSS 存在问题。使用 firebug 检查加载的元素，查看存在哪些类以及应用了哪些样式规则。然后仔细检查您的相关 CSS 选择器是否与这些元素匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:09:21.283

不知道为什么会这样。它不应该。

您需要调用`.refresh()`列表视图。

# android - SurfaceView 的替代品？

> ID：13378481
> 
> 赞同：4
> 
> 时间：2012-11-14T12:03:33.487
> 
> 标签：android, view, surfaceview

我正在制作一个自定义 ProgressBar，它有一个可以旋转的位图。如果我使用 View.invalidate FPS 会卡顿；deltaTime 将增加 40 多次。逻辑和渲染几乎是即时的，但无效调用使其变慢。所以我正在尝试 SurfaceView，问题是我之前在将 SurfaceView 与其他视图组装时遇到了问题，我不想使用它。SurfaceView 和 View.invalidate 是否有任何替代方案，或者我是否坚持使用它们？

**编辑：**

为了进一步澄清，我正在制作一个作为**中间**ProgressBar的自定义**视图。**所以 View 就是 ProgressBar。我现在也没有下载任何东西，我只是想为我的视图获得最大 FPS。一些代码：

 **```
MyProgressBar extends View implements Runnable 
```

和运行（）

```
calculateNewRotation();
invalidate();
post(this); 
```

在哪里计算NewRotation（）

```
long now = SystemClock.uptimeMillis();
int deltaTime = (int) (now - mLastRender);
mLastRender = now;
mSpinRotation += deltaTime * SPIN_SPEED_PER_MILLISECOND_CLOCKWISE; 
```

Post(this) 指的是 MyProgressBar ，它将永远循环，直到我另有说明。

在我的 onDraw()

```
mCamera.save();
mCamera.rotateZ(mSpinRotation);
mCamera.getMatrix(mMatrix);
mCamera.restore();

mMatrix.preTranslate(-mTranslatePivotX, -mTranslatePivotY);
mMatrix.postTranslate(mTranslatePivotX + mCenterX, mTranslatePivotY + mCenterY);

canvas.drawBitmap(mSpinBitmap, mMatrix, mSpinBitmapPaint); 
```

calculateNewRotation() 的时间 = 1 毫秒。

onDraw() 的时间 = 1 毫秒。

问题是总时间通常在 40 毫秒以上。我的解决方案是然后使用 SurfaceView，但我不喜欢使用透明像素绘制其表面的 View 的想法，因此将显示底层表面。我正在寻找的是一个视图，我可以随时获得画布，最好每 16 毫秒获得 60 FPS。现在，有这样的观点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:30:21.400

您是否在 UI 线程上进行了长时间的操作（通常是需要进度条的原因）？您的 UI 线程应该在另一个线程或异步任务处理长操作时更新进度条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:33:23.643

我最终所做的是，当我绘制图像时，我将旋转值更新 1。在快速和慢速手机上，它看起来会很平滑，但速度会有所不同。在快速手机上，它可能每秒绘制 60 帧，即每秒 60 度，而每秒 10 帧的慢速手机会使旋转每秒旋转 10 度。所以说到底，如果我想让它们以相同的速度旋转或让它看起来不错，我会选择后者。

**编辑**

我想我可以设置每秒最大帧数，这样快速手机就会受到限制，从而缩小快速手机和小型手机之间的差距。**

# android - 安卓按钮循环

> ID：13378485
> 
> 赞同：1
> 
> 时间：2012-11-14T12:03:52.310
> 
> 标签：android, loops, button

我有一个简单的脚本：

```
 int phases = 6;
    final int max = 8;
    final TextView[] a = new TextView[(max * phases)];
    final Button[] b = new Button[phases]; // creates the buttons to display
                                            // the single phases

    for (int x = 0; x < phases; x++) {
        b[x] = new Button(this);
        b[x].setText("yourbutton");
        // linL.addView(b[x]);
        b[x].setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                if (a[(3)].getVisibility() == 0) {
                    for (int i = 0; i < max; i++)
                        a[i].setVisibility(View.GONE);
                } else {
                    for (int i = 0; i < max; i++)
                        a[i].setVisibility(View.VISIBLE);
                }
            };
        });
    } 
```

这基本上检查文本视图是否可见，如果不可见，则使其可见（反之亦然）。

我现在的问题是我不想一次又一次地打开相同的文本视图，我想根据按钮创建的当前循环的 x 来更改视图。

但是，当我尝试包含这个 x 时，它说它必须是最终的。

那么如何在点击侦听器脚本中获取参数呢？（我试图添加它们，但是它说我必须再次对整个侦听器进行编程......这就是为什么我要问是否有更聪明的方法来做到这一点）

干杯，克里斯托夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:20:30.267

如果我理解正确，您想将参数传递给您的 OnClickListener。我建议实现您自己的 OnClickListener 接口 - 类似于 rekaszeru 的回答[here](https://stackoverflow.com/questions/5856549/android-click-listener-method-with-passing-argument)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:23:17.380

您有 2 个选项：

1.  在*setOnClickListener*行之前，您可以将另一个变量声明为 final，并且可以将*x*的值分配给它。然后，您将拥有最终变量，该变量保存可在函数内部使用的*x的值。*
2.  您可以实现自己的实现*OnClickListener*的类，并且可以添加一个获取*x*值的构造函数。

一些一般性说明：我不知道这是您编写代码的方式，还是您在此处编写代码时屏蔽了它。（蒙面，意味着您更改了变量名称，这将更难理解您在做什么）

所以，如果你掩盖了它，请不要，这会让你更难回答。如果这是您编写代码的方式，我真的鼓励您阅读一些有关编码标准及其重要性的文章。您的代码没有正确缩进，并且变量的名称没有意义。完成该项目后，一个月后再次尝试阅读您的代码，您会发现理解您编写的内容是多么困难

# python - 在 Mac 上为 Python 移植 Pandas 时遇到问题

> ID：13378490
> 
> 赞同：0
> 
> 时间：2012-11-14T12:04:13.507
> 
> 标签：python, macos, pandas

我一直在为计算投资课程移植一些东西，而且我得到了所有其他的 macport，但是

```
>"sudo port install py27-pandas @0.7.3" 
```

给我带来了很多麻烦。这是我得到的回报：

```
>John--MacBook-Pro:~ John$ sudo port install py27-pandas @0.7.3
Password:
--->  Computing dependencies for py27-pandas
--->  Dependencies to be installed: py27-scipy gcc45 swig-python bison gsed swig py27-tables hdf5-18 lzo2 py27-cython cython_select py27-numexpr py27-scientific netcdf
--->  Building gcc45
Error: org.macports.build for port gcc45 returned: command execution failed
Error: Failed to install gcc45
Please see the log file for port gcc45 for details:
    /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_lang_gcc45/gcc45/main.log
Error: The following dependencies were not installed: py27-scipy gcc45 swig-python bison gsed swig py27-tables hdf5-18 lzo2 py27-cython cython_select py27-numexpr py27-scientific netcdf
To report a bug, follow the instructions in the guide:
    http://guide.macports.org/#project.tickets
Error: Processing of port py27-pandas failed 
```

我确实有 Xcode，用于 Xcode 的 CLT，但我必须缺少其他东西。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T04:37:55.217

如果您无法使用 MacPorts 进行设置，我建议您从免费的 EPDFree（不包括 pandas，但可以从源代码轻松安装）或 Anaconda CE（包括 pandas）发行版开始。

# asp.net-mvc - Unity 配置，配置或不配置

> ID：13378493
> 
> 赞同：0
> 
> 时间：2012-11-14T12:04:25.947
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dependency-injection, unity-container

统一对象配置映射的优点/缺点是什么？在 .config 文件中与在代码中映射它们？

我看到的所有示例都是使用 .config 文件配置的，但我发现了一个很大的缺点（花了 1.5 小时来了解为什么统一失败），重命名 Classes 后，配置文件中的类名不会自动重命名，团结失败。

优势呢？

你是如何配置统一的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:08:57.937

骗局（你见过他们）：

*   没有智能感知
*   运行前没有错误（没有强类型）

亲：

*   您可以在不更改代码的情况下更改配置（部署后）

# php - Shopify API 履行更新失败无法处理的实体

> ID：13378494
> 
> 赞同：1
> 
> 时间：2012-11-14T12:04:28.677
> 
> 标签：php, json, api, shopify

不久前，我开发了一个使用 Shopify API 的 Web 应用程序，它已经运行了大约 2 个月没有出现问题，直到本周开始出现错误。

我们正在尝试使用 PHP 中的 API 调用更新订单履行。

在 PHP 中，我们发布到以下内容： [http ://www.the-web-shop-like-this.com/admin/orders/0123456789/fulfillments.json](http://www.the-web-shop-like-this.com/admin/orders/0123456789/fulfillments.json)

我们发布以下变量：$fulfillment_update

变量设置如下：

```
$fulfillment_update = "
     'fulfillment': { 
        'tracking_number': '',
        'notify_customer': true
            }"; 
```

发布空白 tracking_number 是为了强制 shopify 系统生成履行电子邮件并将该订单标记为已履行 - 从未添加跟踪号，并且 notify_customer 始终设置为 true。

Shopify API 回来（自周末以来）说：“无法处理的实体”。

女士们和男士们有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:14:23.147

我在您的请求参数上看到了一些奇怪的参数编码。这是 Rails 得到的：

```
{"_json"=>"'fulfillment': { 'tracking_number': '', 'notify_customer': true}", "order_id"=>"147265452"} 
```

这是一个带有一个键`'_json'`和一个包含 json 作为字符串的值的散列。这表明您以某种方式错误地传递了数据。你能发布你用来启动 HTTP 请求的完整代码吗？

PS：你知道现有的 PHP 客户端库吗？这是一个列表，我强烈建议您使用其中之一，除非您有特定的理由不这样做：[http ://wiki.shopify.com/Shopify_App_Development#.E2.80.9CI.E2.80.99m_a_PHP_developer.E2.80.9D](http://wiki.shopify.com/Shopify_App_Development#.E2.80.9CI.E2.80.99m_a_PHP_developer.E2.80.9D)

# yii - 你如何使用 YII 检查当前页面是否是首页？

> ID：13378499
> 
> 赞同：0
> 
> 时间：2012-11-14T12:04:44.117
> 
> 标签：yii

Drupal 有一个名为“ [drupal_is_front_page](http://api.drupal.org/api/drupal/includes!path.inc/function/drupal_is_front_page/6) ”的函数。YII 是否有类似的方式来处理导航？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:28:32.373

不幸的是没有。虽然拼凑起来所需的信息是可用的，但这样做确实比它应该的更痛苦。

首先，首页由[`CWebApplication::defaultController`](http://www.yiiframework.com/doc/api/1.1/CWebApplication#defaultController-detail)属性定义，可以按照权威指南中的[讨论](http://www.yiiframework.com/doc/guide/1.1/en/basics.application#application-configuration)进行配置。但是这里有一个大问题：`defaultController`实际上可以是以下任何一种：

1.  一个裸控制器名称，例如`site`
2.  一个模块/控制器对，例如`module/site`
3.  控制器/动作对，例如`site/index`
4.  一个模块/控制器/动作元组，例如`module/site/index`

如果您已指定`defaultController`为 #4（如果您的应用程序不包含任何模块，则与 #3 相同），那么一切都很简单：

```
function is_home_page() {
    $app = Yii::app();
    return $app->controller->route == $app->defaultController;
} 
```

问题是如果`defaultController`指定为#1 或#2，那么您必须检查大量运行时信息以将其转换为形式#3 或#4（视情况而定），以便您可以运行相等性检查。

Yii 当然已经包含了可以做到这一点的代码：[`CWebApplication::createController`](http://www.yiiframework.com/doc/api/1.1/CWebApplication#createController-detail)方法，它可以接受任何有效格式`defaultController`并将其解析为控制器/动作对（如果适用，控制器依赖于模块）。但是看着源头并不会让你在期待中微笑。

总结一下：您可以假设`defaultController`始终完全指定并使用一行代码完成工作，或者借用代码`createController`以确定确切`defaultController`指向的内容（然后使用一行代码检查是否相等） .

**我不建议研究基于 URL 的解决方案，**因为路由的全部意义在于不同的 URL 可以指向相同的内容——如果你这样做，永远无法确定你有正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:28:23.647

根据我的经验，Yii 中没有这样的功能。但是，您可以检索以下内容：

*   基本网址：`Yii::app()->request->baseUrl`
*   当前网址：`Yii::app()->request->requestUri.`
*   当前页面控制器与`Yii::app()->getController()->getAction()->controller->id`.

使用这些 API，应该可以查明当前页面是否为首页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:08:00.580

另一个简单的想法：

在您的操作中（您用来展示“主要首页”的操作），您可以在其视图中使用脚本设置变量：

```
Yii::app()->getClientScript()->registerScript("main_screen",
   "var main_front_page = true;",CClientScript::POS_BEGIN); 
```

将该代码放在“主视图”中（其余视图页面没有这段代码）。因此，当您需要检查页面是否是“主页”时，您可以使用 javascript 检查它，查询：

```
if(main_front_page){..do something..}. 
```

如果您需要识别php中的主页（在服务器端），请使用Jon提出的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:16:09.603

另一种解决方案，基于您的控制器的常用方法：

您的所有控制器都必须从 CController 扩展，但是，当您构建一个新的新 yii 应用程序时，Gii 在 /protected/components/Controller.php 上创建一个基本控制器，因此您的所有控制器都从它派生。

因此，在其上放置一个主要属性，命名为：

```
<?php
class Controller extends CController {
  public $is_main_front_page;
  public function setMainFrontPage(){ $this->is_main_front_page = true; }
  public function getIsMainFrontPage(){ returns $this->is_main_front_page==true; }
}
?> 
```

好吧，当您呈现您的主要首页操作时，将此核心变量设置为 true：

```
<?php
class YoursController extends Controller {
   public function actionPrimaryPage(){
      $this->setMainFrontPage();
      $this->render('primarypage');
   }
   public function actionSecondaryPage(){
      $this->render('secondarypage');
   }
} 
```

接下来，在任何视图中，您都可以检查它：

```
<?php // views/yours/primaryview.php 
   echo "<h1>Main Page</h1>";
   echo "is primary ? ".$this->getIsMainFrontPage();  // must say: "is primary ? true"
?>

<?php // views/yours/secondaryview.php 
   echo "<h1>Secondary Page</h1>";
   echo "is primary ? ".$this->getIsMainFrontPage();  // must say: "is primary ? false"
?> 
```

# unix - unix 中的命名管道

> ID：13378502
> 
> 赞同：0
> 
> 时间：2012-11-14T12:05:06.753
> 
> 标签：unix, named-pipes

我的程序有两个进程。一个进程写入 FIFO（命名管道）并且必须等到另一个进程从 FIFO 读取，然后等待该进程返回结果（写入 FIFO 以供该进程读取）。我的问题是如何知道数据是由另一个进程从 FIFO 中读取的，然后调用 read() 系统调用以获得结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:31:58.917

大多数 UNIXen 都有双向管道（人管）

Linux，IIRC 没有这些，所以你需要使用`socket_pair`，它可以方便地使用 UNIX 域套接字，提供大致相同的功能。

根据我的经验，移植代码通常只需要将调用替换为`pipe`调用`socket_pair`

# java - linux中的死java线程发生了什么？

> ID：13378513
> 
> 赞同：2
> 
> 时间：2012-11-14T12:05:51.377
> 
> 标签：java, linux, multithreading, exception, stability

我的项目中有一个 NullPointerException，我想评估这个问题的严重性。在线程完成其任务并且无论如何都会死之前抛出异常。我的代码未能捕捉到这个异常，所以线程已经死了。

下面是一个简单的模拟情况：

```
public class Test extends Thread {
    public static void main(String[] args) throws InterruptedException {

        Test thread = new Test();
        thread.start();
        while(true) {
           System.out.println("I'm still here!");
           Thread.sleep(1000);
        }
    }

    public void run() {
        String s = null;
        int len = s.length(); // causes NullPinterException
    }
} 
```

我的问题是：这个可怜的线程现在会发生什么？它的 linux 文件描述符是否被释放？此类代码中是否存在任何稳定性或内存问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:17:08.777

处理与任何其他终止的线程没有什么不同。之前发生的一件事是根据规则（特定的、所有线程）搜索[UncaughtExceptionHandler](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)，但除此之外，“正常”清理过程如下。与“正常”终止相比，当线程被未捕获的异常终止时，没有关于系统资源（取决于实现）或内存问题的特定后果。`Thread``ThreadGroup``Thread`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:08:56.660

这根本与线程无关。看看你的代码：

```
 String s = null;
   int len = s.length(); 
```

当您调用时`s.length()`，`s`确实`null`会导致`NullPointerException`. 分配一些值`s`，你会得到它的长度。

# java - 如何通过 JGraphT 可视化表示边缘权重？

> ID：13378519
> 
> 赞同：5
> 
> 时间：2012-11-14T12:06:53.220
> 
> 标签：java, jgrapht

我尝试使用权重创建 Java JGraphT 可视化，例如：

![http://i.stack.imgur.com/KXRrc.png](../Images/3d5e38747fc91d4991a7ecfa617270c4.png)

现在我想将边缘标签（例如：（a：b）更改为其边缘权重（例如：2）。我尝试在 Javadoc 中搜索，但没有看到任何内容。请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:00:50.720

这些边缘标签来自`toString`边缘对象的方法。因此，您可以创建自己的边缘类并`toString`以产生边缘权重的方式覆盖该方法。

您可以像这样创建自定义边缘：

```
class MyWeightedEdge extends DefaultWeightedEdge {
  @Override
  public String toString() {
    return Double.toString(getWeight());
  }
} 
```

然后像这样创建您的图表，这将使图表创建边缘作为实例，`MyDefaultEdge`因此在可视化中仅显示边缘权重：

```
SimpleWeightedGraph<String,MyWeightedEdge> graph
  = new SimpleWeightedGraph<String,MyWeightedEdge>(MyWeightedEdge.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T11:29:22.160

JGraphT 是通用实现的，因此当您传递 Edge 类时，只需在各自的类中实现 toString() 方法。例如，假设“City”是我的 Vertex 类，“Path”是我的 Edge，所以在其中实现 toString() 方法

```
class Pathe{
  @Override
  public String toString() {
    return "Distant Between" +this.source +"this.dest" "is" + this.distance;
  }
} 
```

# android - ffmpeg视频流深入理解

> ID：13378520
> 
> 赞同：2
> 
> 时间：2012-11-14T12:06:56.980
> 
> 标签：android, video, android-ndk, ffmpeg, streaming

主要问题是是否有可能以某种方式绕过 ffmpeg 在将帧写入文件时所做的帧索引检查。

现在我将解释我的确切问题，以便您可以更好地了解我需要什么，或者可能想到一个替代解决方案。

问题 n0.1：我从两个独立的摄像机获取视频流，出于某种原因，我想将其保存在同一个视频文件中。首先是第一台摄像机的帧，然后是第二台摄像机的帧。当从第二台相机写入帧时，`av_write_frame`将返回错误代码 -22 并且将无法添加帧。这是因为写入上下文期望在先前写入的帧（来自摄像机 1 的最后一帧）的索引之后的帧索引，但他接收到索引为 0 的帧，即来自第二个摄像机的第一帧。

问题 2：独立于第一个问题考虑以下问题。我正在尝试将视频流保存到文件中，但帧速率是实际速度的两倍。因此，因为我找不到任何可行的解决方案来降低帧速率，所以我想在视频文件中每帧写入两次。但它不会对帧速率产生任何影响。我还尝试了一种不同的方法来解决帧速率问题，但它也失败了（[问题在这里](https://stackoverflow.com/questions/12963607/android-ffmpeg-set-frame-rate)）。

任何一种可行的解决方案都将受到高度赞赏。

同样重要的是我**不能使用控制台**命令，**我需要 C 代码**，因为我需要将这些功能集成到自动化的 Android 应用程序中。

# android - 在 Android 上播放带有直接链接的视频

> ID：13378523
> 
> 赞同：1
> 
> 时间：2012-11-14T12:07:08.060
> 
> 标签：android, video

当用户播放视频时，我需要全屏播放视频。不幸的是，据我了解，如果使用 HTML5 Video 标签，Android 会在框架内播放它。所以尝试了 webkitEnterFullScreen() 并且它似乎工作（有点......）但用户必须再次单击播放按钮。整体性能感觉有点笨拙，不确定像 2.0+ 这样的旧操作系统是否可以处理它。

作为一种替代方法，我现在尝试使用直接链接而不是视频标签来播放视频。例如，[a href="video.mp4"]点击播放[/a]。我认为它运作良好，但唯一的问题是它要求选择“视频播放器”或“浏览器”应用程序。

所以我的问题是

1.  如何定义使用 javascript 使用 Video Player 播放视频，以使选择对话框不会提示？
2.  什么是 Android 的原生视频播放器？例如，iOS 使用 Quicktime，并且可以使用 Quicktime 对象嵌入视频。Android有没有等效的方法？
3.  使用Video标签时，如何全屏同时播放视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:19:43.740

尝试以下代码：

> ```
> String path1="/path/to/video/file.3gp";
> Uri uri=Uri.parse(path1);
> VideoView video=(VideoView)findViewById(R.id.VideoView01);
> video.setVideoURI(uri);
> video.start(); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:16:43.570

您必须意识到一些非常重要的事情：没有适用于 android 的原生视频播放器。

安卓有几十个播放器，这不是你的决定，而是**用户**决定他应该使用播放器A还是B。不要试图强迫Android用户使用iOS行为，这真的不会给人留下更好的印象。

# linux - Linux bat 文件命令行参数：在寻找匹配的 `"' 时出现意外的 EOF

> ID：13378525
> 
> 赞同：-1
> 
> 时间：2012-11-14T12:07:19.003
> 
> 标签：linux, shell

我在 linux 中运行一个 bat 文件，如下所示。

```
java -cp ../lib/qautils.jar:../lib/Log4jWrapper1.2.jar:../lib/log4j-1.2.15.jar:../lib/jaa.jar com.pcube.qa。 jaa.server.JAAServer -appdir /home/alpha/jaa/bin"

```

但是如果我在上面运行得到以下错误：

```
./runjaa.bat：第 1 行：在寻找匹配的 `"' 时出现意外的 EOF
./runjaa.bat：第 2 行：语法错误：文件意外结束

```

有人会建议我，我在哪里做错了。如果我在末尾删除“，则说目录 /home/alpha/jaa/bin 不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:34:45.857

假设您发布的内容是准确的，那么您`"`在该行的尾随与另一个引号不匹配。引号打开带引号的字符串，因此您的 shell 正在寻找结束引号。

您不需要此示例中的引号，因此只需将其删除。

# c - GCC编译错误冲突类型

> ID：13378526
> 
> 赞同：1
> 
> 时间：2012-11-14T12:07:20.860
> 
> 标签：c, gcc

尝试编译此代码时，我收到来自 GCC 的错误。

```
test.c: At top level:
test.c:35: error: conflicting types for âprintCoursesâ
test.c:4: error: previous declaration of âprintCoursesâ was here
test.c:59: error: conflicting types for âidSortâ
test.c:5: error: previous declaration of âidSortâ was here
test.c:100: error: conflicting types for âcourseSortâ
test.c:6: error: previous declaration of âcourseSortâ was here
test.c:137:2: warning: no newline at end of file 
```

如果有人可以帮忙，那就是我得到的错误。我正在尝试组织一个结构数组（不使用 qsort），然后使用不同的参数再次对其进行排序。这是我的代码：

```
#include <stdio.h>
#include <string.h>

void printCourses(struct courses *classList, int left, int size);
void idSort(struct courses *classList, int left, int right);
void courseSort(struct courses *classList, int left, int right);

//STRUCTURE 

struct courses
{
char course[50];
char courseName[50];
int courseID;
};

//MAIN

int main(void)
{
    int a, b,temp,i;
    int size = 11;
    struct courses classList[11]={{"MATH", "Linear Algebra", 3330},{"CSE", "Discrete         
    Structures", 2315},{"CSE","Intermediate Programming",1320},{"IE","Engineering Economics",  3312},{"CSE","Computer Organization", 2312},
    {"MATH","Calculus I",1426},{"CSE","Introductory Programming", 1310},{"MATH","Calculus II", 2425},{"IE","Engineering Statistics",3301},{"CSE","Operating Systems", 3320},{"CSE","Data Structures and Algorithms", 2320}};

    courseSort(classList, 0, size-1);
    printCourses(classList, 0, size-5);
}

//FUNCTION 1

void printCourses(struct courses *classList, int left, int size)
{
     int l,r;
     if( left < size)
     {
         l = left;

         printf("%s\n",classList[left].course);
         printf("------------------------------------\n");
         while( l < size )
         {
             printf("%d %s\n",classList[l].courseID,classList[l].courseName);
             l++;
         }

         printCourses(classList,left+6,size+2);
         printCourses(classList,left+8,size+5);
    }

}

//FUNCTION 2

void idSort(struct courses *classList, int left, int right)
{

  int pivot, l, r, comp, comp1;
  struct courses temp;
  if(left < right) 
  {
    pivot = left; 
    l = left;
    r = right;
    while(l < r) 
{

    while(classList[l].courseID <= classList[pivot].courseID && l <= right)

            l++;

    while(classList[r].courseID > classList[pivot].courseID && r >= left)

            r--;

  if(l < r ) 
  {
      temp = classList[l];
      classList[l] = classList[r];
      classList[r] = temp;
  }
}

temp = classList[r];
classList[r] = classList[pivot];
classList[pivot] = temp;

idSort(classList, left, r-1);
idSort(classList, r+1, right);
  }
}

//FUNCTION 3

void courseSort(struct courses *classList, int left, int right)
{
  int pivot, l, r, comp, comp1;
  struct courses temp;
  if(left < right) 
  {
    pivot = left; 
    l = left;
    r = right;

    while(l < r) 
    {

    while(strcmp(classList[l].course, classList[pivot].course) <= 0 && l <= right)
            l++;
    while(strcmp(classList[r].course, classList[pivot].course) > 0 && r > left)
            r--;

  if (l < r)
  {
      temp = classList[l];
      classList[l] = classList[r];
      classList[r] = temp;
  }
}

temp = classList[r];
classList[r] = classList[pivot];
classList[pivot] = temp;

courseSort(classList, left, r-1);
courseSort(classList, r+1, right);

}
idSort(classList,left,right-5);
idSort(classList,left+6,right-3);
idSort(classList,left+8,right-1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:12:37.927

1.  始终解决您遇到的第一个错误。这绝对不是第一个错误。
2.  在你声明你的函数的时候，`struct courses`还不存在。这就是您收到此错误的原因。

在函数声明之前添加前向声明或移动结构定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T12:13:08.643

您必须在使用它之前声明结构源。这样做：

```
#include <stdio.h>
#include <string.h>

//STRUCTURE 

struct courses
{
char course[50];
char courseName[50];
int courseID;
};

void printCourses(struct courses *classList, int left, int size);
void idSort(struct courses *classList, int left, int right);
void courseSort(struct courses *classList, int left, int right); 
```

# vb.net - 根据单元格值的数量更改DataGridView中的行颜色

> ID：13378538
> 
> 赞同：7
> 
> 时间：2012-11-14T12:08:05.560
> 
> 标签：vb.net, winforms, datagridview

我需要更改 datagridview 中一行的颜色，但我的代码对我不起作用。我总是收到一条错误消息，提示“无法找到名为 Quantity 的列。参数名称：columnName”

这是我的代码：

```
Private Sub DataGridView1_CellFormatting(ByVal sender As Object, ByVal e As DataGridViewCellFormattingEventArgs) Handles DataGridView1.CellFormatting
    For i As Integer = 0 To Me.DataGridView1.Rows.Count - 1
        If Me.DataGridView1.Rows(i).Cells("Quantity:").Value < 5 Then
            Me.DataGridView1.Rows(i).Cells("Quantity:").Style.ForeColor = Color.Red
        End If
    Next
End Sub 
```

请帮我修复它。谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T19:22:44.227

这可能会有所帮助

1.  使用“RowPostPaint”事件
2.  列的名称不是列的“标题”。您必须转到 DataGridView 的属性 => 然后选择列 => 然后查找“名称”属性

我从 C# 转换了它（'来自：[http](http://www.dotnetpools.com/Article/ArticleDetiail/?articleId=74) ://www.dotnetpools.com/Article/ArticleDetiail/?articleId=74 ）

```
 Private Sub dgv_EmployeeTraining_RowPostPaint(sender As Object, e As System.Windows.Forms.DataGridViewRowPostPaintEventArgs) 
    Handles dgv_EmployeeTraining.RowPostPaint

    If e.RowIndex < Me.dgv_EmployeeTraining.RowCount - 1 Then
        Dim dgvRow As DataGridViewRow = Me.dgv_EmployeeTraining.Rows(e.RowIndex)

    '<== This is the header Name
        'If CInt(dgvRow.Cells("EmployeeStatus_Training_e26").Value) <> 2 Then  

    '<== But this is the name assigned to it in the properties of the control
        If CInt(dgvRow.Cells("DataGridViewTextBoxColumn15").Value.ToString) <> 2 Then   

            dgvRow.DefaultCellStyle.BackColor = Color.FromArgb(236, 236, 255)

        Else
            dgvRow.DefaultCellStyle.BackColor = Color.LightPink

        End If

    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T06:04:21.060

我修正了我的错误。刚刚从这一行中删除了“价值”：

```
If drv.Item("Quantity").Value < 5  Then 
```

所以它看起来像

`If drv.Item("Quantity") < 5 Then`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T13:02:42.723

试试这个（注意：我现在没有 Visual Studio，所以代码是从我的存档中复制粘贴的（我还没有测试过）：

```
Private Sub DataGridView1_CellFormatting(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellFormattingEventArgs) Handles DataGridView1.CellFormatting
    Dim drv As DataRowView
    If e.RowIndex >= 0 Then
        If e.RowIndex <= ds.Tables("Products").Rows.Count - 1 Then
            drv = ds.Tables("Products").DefaultView.Item(e.RowIndex)
            Dim c As Color
            If drv.Item("Quantity").Value < 5  Then
                c = Color.LightBlue
            Else
                c = Color.Pink
            End If
            e.CellStyle.BackColor = c
        End If
    End If
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-03T12:25:00.210

只需删除`:`您的`Quantity`. 确保您的属性与您在代码中包含的参数相同，如下所示：

```
Private Sub DataGridView1_CellFormatting(ByVal sender As Object, ByVal e As DataGridViewCellFormattingEventArgs) Handles DataGridView1.CellFormatting
    For i As Integer = 0 To Me.DataGridView1.Rows.Count - 1
        If Me.DataGridView1.Rows(i).Cells("Quantity").Value < 5 Then
            Me.DataGridView1.Rows(i).Cells("Quantity").Style.ForeColor = Color.Red
        End If
    Next
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-19T11:50:41.287

```
If drv.Item("Quantity").Value < 5  Then 
```

用这个来喜欢这个

```
If Cint(drv.Item("Quantity").Value) < 5  Then 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-03T21:32:46.807

使用**CellFormating 事件**和**e**参数：

`If CInt(e.Value) < 5 Then e.CellStyle.ForeColor = Color.Red`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-30T11:05:18.980

```
Dim dgv As DataGridView = Me.TblCalendarDataGridView

For i As Integer = 0 To dgv.Rows.Count - 1
    For ColNo As Integer = 4 To 7
        If Not dgv.Rows(i).Cells(ColNo).Value Is DBNull.Value Then

            dgv.Rows(i).Cells(ColNo).Style.BackColor =  vbcolor.blue
        End If
    Next
Next 
```

# javascript - 从中心设置动画或缩放

> ID：13378540
> 
> 赞同：2
> 
> 时间：2012-11-14T12:08:13.570
> 
> 标签：javascript, jquery

关于如何从顶部中心为 div 的宽度和高度设置动画的任何想法？尝试使用 effect('scale') 但这基于显示/隐藏，因此在完成后快速恢复。

然后尝试了正常的动画：

```
$('.box').animate({'width':200px,'height':200px,margin-left:-100px}); 
```

这行得通，但是由于有一行 .box，我希望其他人做出反应并推到一侧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:11:29.570

微调

[**小提琴**](http://jsfiddle.net/videsignz/T7DFp/)

```
$('.day').hover(function() {

  if($(this).index()==0){
      $(this).animate({'width':400,'height':400}, 500);
  }else{            
      $(this).animate({'width':400,'height':400}, 500);
      $(this).parent().stop().animate({'margin-left':'-100'} , 500);  
  }          
}, function() {
   $(this).animate({'width':200,'height':200}, 500);
   $(this).parent().stop().animate({'margin-left':'0'}, 500);

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:34:51.223

也许是这样的：

```
$('.day').hover(function() {
    $(this).animate({'width':400,'height':400, 'margin':'-100px -90px'});        
}, function() {
    $(this).animate({'width':200,'height':200, 'margin': '0 10px'});      
}); 
```

小提琴：http: [//jsfiddle.net/dmYY3/3/](http://jsfiddle.net/dmYY3/3/)？

# javascript - 无法在 Chrome 中解析 XML

> ID：13378546
> 
> 赞同：0
> 
> 时间：2012-11-14T12:08:43.977
> 
> 标签：javascript, google-chrome

以下代码不在 Chrome 中运行。

```
function parseXML(xmlstring) {
var dom;
if (window.ActiveXObject && window.GetObject) { 
dom = new ActiveXObject('Microsoft.XMLDOM');
dom.loadXML(xmlstring);
return dom;
}
if (window.DOMParser) {
var xmlDoc = new window.XMLHttpRequest(); 
xmlDoc.open("GET", xmlstring, false);
xmlDoc.overrideMimeType('text/xml');
xmlDoc.onreadystatechange = function () {
if (xmlDoc.readyState == 4 && xmlDoc.status == 200) {
dom = xmlDoc.responseXML;
return dom;
}
};
xmlDoc.send("");
//return new DOMParser().parseFromString((xmlstring), 'text/xml'); 
```

我尝试了所有的可能性，甚至使用了 $.parseXML，但在 Chrome 中不起作用您的宝贵意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:30:38.153

我得到了正确的 dom，但我正在做 $(dom).find('') 而不是 $(dom.find(" ") 不知道为什么在 Chrome 中出现这种奇怪的行为......现在它适用于所有浏览器...... [:)]

# java - 为什么 Java AWT 'Point' 类的 'x' 和 'y' 变量可以公开访问？

> ID：13378547
> 
> 赞同：2
> 
> 时间：2012-11-14T12:08:45.570
> 
> 标签：java, scope, precision, point

我正在对图像进行一些处理，并在我的工作中使用 package `java.awt.geom`。我正在使用类[`Point`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Point.html)。此类扩展`Point2D`并继承了返回 double 的 get 方法。`Point`是一个点的整数表示。

要访问其中的整数`x`和`y`值，`Point`您需要使用可公开访问的变量`x`和`y`；我的问题是

1) 允许公共访问实例变量不是不好的做法吗？例如。[这个问题](https://stackoverflow.com/questions/1022880/accessing-a-variable-from-another-class)

2）有没有更好的设计？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:28:07.210

是的，这是不好的做法（至少按照今天的标准），但这有几个原因......

1.  超类`Point2D`需要尽可能通用
2.  向后兼容
3.  方便

详细地...

1.  超类`Point2D`是一个通用对象，用于表示可以在 2D 空间中表示的任何类型的点。为了最大限度地用作泛型类，该点需要允许尽可能高的精度（即 a `double`）。这通过返回s的`getX()`and`getY()`方法很明显。`double`通过使用`double`s，它允许任何子类与这些方法兼容，因为 double 是具有精度的最大原始 Java 数字类型，因此任何使用任何其他原始数值变量的子类将始终能够将其返回为a`double`不失任何精度。

    因此，您可以将其`Point`视为的简化版本`Point2D`，这不保持任何精度 - 但是它仍然必须符合超类的抽象方法声明`Point2D`。JVM 可以直接将An`int`转换为 a`double`而不会丢失任何精度 - 如果`Point2D`不是 a `double`，您将在转换期间丢失一些精度。（例如，您不能将其强制转换为 a `float`，因为较大的`int`值将无法直接表示为 a`float`而不砍掉一些较高的数字）

2.  Point 类是在 Java 1.0 中引入的。为了保持向后兼容性，需要保持对这些变量的访问，即使这可能不是最佳实践。您会在其他早期课程中注意到这一点，例如变量`File.separator`

3.  `Point`是一个在很多地方使用的类，它本身仍然是一个非常通用的对象。程序员直接引用 an`int`比每次想要获取 value 时都要强制转换要容易/简单/快捷得多`(int)getX()`。JVM 处理它也更快，因为它不需要将 an 转换`int`为 a `double`，然后再转换回a `int`。

如果您想要更好的设计，您可能最好创建额外的方法来访问`int`值作为`int`s - 即创建方法`getXInt()`and `getYInt()`，然后将变量更改回非公共（前提是您不需要保留向后兼容性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:18:16.183

1）是的，这是不好的做法。Point 是在 JDK 1.0 中引入的，Java 总是试图保持向后兼容性，这就是我认为过去没有改变的原因。

`x`和有吸气剂`y`。由于`Point2D`. 这不是很好，但可以安全地转换为 an `int`，因为返回的 Point 的值实际上是一个`int`.

2）如果您需要处理 AWT，您应该简单地接受这一点。

# python - Mercurial (hg) 错误：中止：没有名为 _md5 的模块

> ID：13378549
> 
> 赞同：1
> 
> 时间：2012-11-14T12:08:51.457
> 
> 标签：python, mercurial, solaris

当我尝试在 hg 中克隆存储库时，出现以下错误：

```
$ hg clone http://server/repo
abort: No module named _md5! 
```

我在 Solaris 10 上运行它，奇怪的是在另一个系统（也是 Solaris 10 和相同版本的 Mercurial 和 Python）上的相同设置可以正常工作。

我检查了所有 Python 模块和安装的文件，它似乎与其他系统上安装的文件匹配。

我的 Mercurial 版本是 2.3 Python 在 /usr/local/lib 中是 2.6，在 /usr/lib 中是 2.4。我不知道这两个 Mercurial 中的哪一个正在使用，但我尝试将 $PYTHONPATH 设置为 2.6，但没有成功。

这里可能是什么问题？

# wcf - 在服务器上测试 WCF 服务

> ID：13378552
> 
> 赞同：0
> 
> 时间：2012-11-14T12:08:56.683
> 
> 标签：wcf, wcf-binding, wcf-client

我正在尝试在我的服务器机器上测试我的 net.tcp 绑定 wcf 服务，该服务无法从外部访问，有谁知道任何有助于在服务器 2008 机器上调用我的服务的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:56:56.387

在 IIS 中托管服务。`net.tcp://localhost:8000/WCFTestService`您可以通过在测试项目中添加服务参考 ( ) 来使用集成测试来测试服务。

读[这个](http://msdn.microsoft.com/en-us/library/ff647180.aspx)。

# android - 在android cocos2d-1中将edittext添加到CClayer

> ID：13378557
> 
> 赞同：1
> 
> 时间：2012-11-14T12:09:06.770
> 
> 标签：android

如何将edittext，textview添加到android cocos2d-1中的CCLayer？

我试过这段代码：

```
CCDirector.sharedDirector().getActivity().runOnUiThread(new Runnable() {
    public void run() {
        final EditText name=new EditText(CCDirector.sharedDirector().getActivity());
        setView(name); 
    }
}); 
```

但在这里我想将视图设置为 CCLayer。

# mysql - 无法连接到 MySQL - 不允许主机

> ID：13378566
> 
> 赞同：9
> 
> 时间：2012-11-14T12:09:25.520
> 
> 标签：mysql

我刚刚开始使用 Hibernate，当我最终尝试启动网络应用程序时，我收到以下错误：

```
2012-nov-14 12:54:23 org.hibernate.tool.hbm2ddl.SchemaExport execute
ERROR: HHH000231: Schema export unsuccessful
java.sql.SQLException: null,  message from server: "Host '192.168.1.7' is not allowed to
connect to this MySQL server" 
```

这真是令人沮丧。为什么我不是本地主机？什么是 192.168.1.7？我可以像类似问题的答案所建议的那样授予特权，但为什么我不是本地主机？

我理解这里的问题，hbm2ddl 设置被设置为创建，所以它想要创建给定的表但没有从 MySQL 服务器获得许可。

我正在 Eclipse 中开发一个 struts2/hibernate 应用程序，我使用 Tomcat，当然还有 MYSQL。

提前致谢！

编辑：（hibernate.cfg.xml）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory>
    <property name="connection.driver_class"> com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://localhost:3306/clothes</property>
    <property name="connection.username">root</property>
    <property name="connection.password">root</property>

    <property name="connection.pool_size">1</property>
    <property name="dialect"> org.hibernate.dialect.MySQLDialect</property>

    <property name="show_sql">true</property>

    <!-- Needs to be disabled in production! -->
    <property name="hbm2ddl.auto">create</property>

    <mapping class="johanstenberg.clothes.serverobjects.AdEntity"/>
    <mapping class="johanstenberg.clothes.serverobjects.AuthenticationEntity"/>
    <mapping class="johanstenberg.clothes.serverobjects.UserEntity"/>
    <mapping class="johanstenberg.clothes.serverobjects.VerificationKeyEntity"/>
</session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T12:17:39.290

查看您的休眠配置文件。有一个条目

> <property name="connection.url"> ... </property>

您必须更改此条目以连接到 localhost 的 mysql。

接下来看看mysql。连接mysql并查看权限：

> $ mysql -u root -p
> mysql> 显示 'root'@'localhost' 的授权；
> mysql> 显示 'root'@'192.168.1.7' 的授权；

如果适当的数据库或表没有授权，请添加它们：

> mysql> 授予衣服的所有权限。* 到 'root'@'localhost' 由 'password' 标识；

或者

> mysql> 将衣服上的所有权限。* 授予由 'password' 标识的 'root'@'192.168.1.7'；

进而

> mysql> 刷新权限；

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T12:15:05.160

在您的 MySQL 实例上运行此命令（替换令牌）

```
CREATE USER '${username}'@'%' IDENTIFIED BY '${password}';
GRANT ALL ON *.* TO '${username}'@'%'; 
```

这将允许您从任何主机连接到 mysql。192.168.1.7 是你电脑的ip。

如果您想保护您的数据库实例，请阅读[mysql 文档](http://dev.mysql.com/doc/refman/5.1/en/grant.html)的这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T19:22:56.543

您需要执行几个步骤：

Step1：在 my.conf 上做一些配置

```
sudo vi /etc/mysql/my.cnf
bind-address = 0.0.0.0 
```

Step2：转到mysql命令（（“your_remote_ip”是要访问您的mysql的电脑））

```
mysql -u root -p
GRANT ALL PRIVILEGES ON *.* TO 'your_mysql_username'@'your_remote_ip'IDENTIFIED BY 'your_mysql_password' WITH GRANT OPTION; 
```

Step3：你可以在mysql上查看它的配置

```
use mysql;

select user, host from user; 
```

第四步：重启你的mysql

```
sudo /etc/init.d/mysql restart 
```

# c++ - MAC地址解析

> ID：13378567
> 
> 赞同：0
> 
> 时间：2012-11-14T12:09:26.877
> 
> 标签：c++, parsing, mac-address

我有一个 MAC 地址，如“6F:e:5B:7C:b:a”，我想解析它并在:e:、:b:、:a 之前插入隐式零。

我目前无法使用 Boost，但我有一个粗略的解决方案。解决方案在'：'上分裂。然后我计算它们之间的字符，如果只有一个，我在前面插入一个零。

我想知道是否有人有更快的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:37:27.753

首先，您可以使用转换速度非常快的脚本`char`，`int`因此：

```
unsigned char hex_to_int(const char c)
{
    if( c >= 'a' && c <= 'f'){
        return c - 'a' + 10;
    }

    if( c >= 'A' && c <= 'F'){
        return c - 'A' + 10;
    }

    if( c >= '0' && c <= '9'){
        return c - '0';
    }

    return 0;
} 
```

然后您可以创建将遍历字符串的循环：

```
unsigned char mac[6]; /* Resulting mac */
int i; /* Iteration number */
char *buffer; /* Text input - will be changed! */
unsigned char tmp; /* Iteration variable */

for( i = 0; i < 6; ++i){
    mac[i] = 0;

    /*
     * Next separator or end of string 
     * You may also want to limit this loop to just 2 iterations
     */
    while( ((*buffer) != '\0') && ((*buffer) != ':'){
        mac[i] <<= 4;
        mac[i] |= hex_to_int( *buffer);
        ++buffer;
    }
}

if( (i != 6) || (*buffer != NULL)){
    // Error in parsing, failed to get to the 6th iteration
    // or having trailing characters at the end of MAC
} 
```

此功能不进行任何错误检查，但它可能是您将获得的最快解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-19T20:55:49.657

对于快速和肮脏的：

```
if (sscanf(text, "%x:%x:%x:%x:%x:%x",
           &mac[0], &mac[1], &mac[2], &mac[3], &mac[4], &mac[5]) != 6) {
    // handle error
} 
```

请注意，它不检查数字是否真的是十六进制。sscanf() 的通常预防措施适用。

# c# - C# Soundplayer 无法从 wav 流中播放

> ID：13378569
> 
> 赞同：0
> 
> 时间：2012-11-14T12:09:36.400
> 
> 标签：c#, sharepoint, translate

我正在尝试整合 Bing Translate 的 Speak Method。 [http://msdn.microsoft.com/en-us/library/ff512420.aspx](http://msdn.microsoft.com/en-us/library/ff512420.aspx)

使用 PHP 的确切示例代码，我可以播放 wav 文件。但是，当我为我的 Sharepoint Web 部件使用 C# 示例代码时，我根本无法播放 wav 文件。

我错过了什么吗？

```
private void SpeakMethod(string authToken)
        {
            string toText = "sun";
            string toLang = "en";
            //string uri = "http://api.microsofttranslator.com/v2/Http.svc/Speak?text=" + toText + "&language=" + toLang +"&format=" + HttpUtility.UrlEncode("audio/wav") + "&options=MaxQuality";
            string uri = "http://api.microsofttranslator.com/v2/Http.svc/Speak?text=welcome&language=en&format=" + HttpUtility.UrlEncode("audio/wav") + "&options=MaxQuality";
            HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create(uri);
            httpWebRequest.Headers.Add("Authorization", authToken);
            WebResponse response = null;
            try
            {
                response = httpWebRequest.GetResponse();
                using (Stream stream = response.GetResponseStream())
                {
                    using (SoundPlayer player = new SoundPlayer(stream))
                    {
                        player.PlaySync();
                        alpha.Text = "alpha";
                    }
                }
            }
            catch
            {

                throw;
            }
            finally
            {
                if (response != null)
                {
                    response.Close();
                    response = null;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T22:50:08.717

我有同样的问题，但是我的 wav 生成的文件在 Windows 7 计算机的 WPF 代码中运行良好，但如果我出于某种原因使用 Zune 打开它，它会给我一个错误，在 Windows 7 中使用 Windows Media Player 它也可以正常工作. 但是在 Windows xp 计算机上它不起作用。

您是否尝试过使用媒体播放器或在不同的操作系统和浏览器中打开生成的 wav 文件？

# google-maps-api-3 - 如何在“我的地图”中手动创建地标

> ID：13378573
> 
> 赞同：2
> 
> 时间：2012-11-14T12:09:48.490
> 
> 标签：google-maps-api-3, marker, manual

我有一个使用 API v3 的功能齐全的地图，其中带有作为数据库搜索结果放置的标记，以及正确弹出的信息窗口。到目前为止，一切都很好。

我想做的是允许用户手动在地图上放置一个标记，即通过拖放一个地标，其方式与谷歌“我的地图”用于构建地图或单击地图的方式完全相同。

这样做有几个原因，但一个是我希望用户轻松识别兴趣中心点，以便我可以过滤该点半径内的搜索。

我原以为这个选项对其他人有用。

也许我为此使用了错误的搜索词，并且术语“标记”和“地标”似乎可以互换，这没有帮助，但我无法制定一个搜索，甚至表明其他人正在尝试这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:59:08.307

你看过[这个绘图工具的例子](http://gmaps-samples-v3.googlecode.com/svn-history/r282/trunk/drawing/drawing-tools.html)吗，它允许你添加标记、折线和多边形，你可以自定义它来做标记。

这是[绘图管理器的文档](https://developers.google.com/maps/documentation/javascript/3.exp/reference#DrawingManager)

# delphi - 应用过滤器时刷新数据集

> ID：13378574
> 
> 赞同：1
> 
> 时间：2012-11-14T12:09:50.423
> 
> 标签：delphi, delphi-5, tdataset

我在 Delphi 5 中有一个 TRxQuery（它源自 TQuery）绑定到一个网格。我正在添加一个过滤器编辑框，并希望在用户键入时过滤网格。有没有办法在不关闭和重新打开查询的情况下过滤数据集，因为这会导致不必要的闪烁。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:18:01.593

```
Procedure SetFilter(DS:TDataset;Const Filter:String);
begin
   DS.Filtered := false;
   DS.Filter := Filter;
   DS.Filtered := true;
end; 
```

# r - 如何按 R 中的第二列排序数据框？

> ID：13378575
> 
> 赞同：22
> 
> 时间：2012-11-14T12:09:57.413
> 
> 标签：r, dataframe

> **可能重复：**
> [如何在 R 中按列对数据框进行排序](https://stackoverflow.com/questions/1296646/how-to-sort-a-dataframe-by-columns-in-r)

我只是想知道是否有人可以帮助我，我有一个我认为应该很容易解决的问题。

我有下表：

```
SampleID           Cluster

R0132F041p          1

R0132F127           1

R0132F064           1

R0132F068p          1

R0132F015           2

R0132F094           3

R0132F105           1

R0132F013           2

R0132F114           1

R0132F014           2

R0132F039p          3

R0132F137           1

R0132F059           1

R0132F138p          2

R0132F038p          2 
```

我想按**集群**对其进行排序/排序以获得如下结果：

```
SampleID    Cluster

R0132F041p  1

R0132F127   1

R0132F064   1

R0132F068p  1

R0132F105   1

R0132F114   1

R0132F137   1

R0132F059   1

R0132F015   2

R0132F013   2

R0132F014   2

R0132F138p  2

R0132F038p  2

R0132F094   3

R0132F039p  3 
```

我尝试了以下 R 代码：

```
data<-read.table('Table.txt', header=TRUE,row.names=1,sep='\t')

data <- data.frame(data)
data <- data[order(data$Cluster),]
write.table(data, file = 'OrderedTable.txt', append = TRUE,quote=FALSE, sep = '\t', na ='NA', dec = '.', row.names = TRUE, col.names = FALSE) 
```

并获得以下输出：

```
1   1

2   1

3   1

4   1

5   1

6   1

7   1

8   1

9   2

10  2

11  2

12  2

13  2

14  3

15  3 
```

为什么将**SampleID**替换为数字 1-15 以及这些数字代表什么，我已经阅读了该`?order()`页面，但是这似乎比**order()更好地解释****了 sort.list**如果有人可以帮助我解决这个问题，我会非常感激的。

 *** * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T14:27:10.447

简短的回答是你做得很完美。您只是在读取和写入文件时遇到了一些困难。浏览您的代码：

```
data<-read.table('Table.txt', header=TRUE,row.names=1,sep='\t') 
```

上面的行可以很好地读取您的数据，但是`row.names=1`告诉它使用第一列作为行的名称。所以现在您的 SampleID 是行名，而不是它们自己的列。如果您在运行此行后立即键入`data`或`head(data)`或`str(data)`，这应该很清楚。只需省略 row.names 参数，它就会正确读取。

```
data <- data.frame(data) 
```

您不需要上面的这一行，因为`read.table()`会生成一个数据框。你也可以看到`str(data)`。

```
data <- data[order(data$Cluster),] 
```

上面的线是完美的。

```
write.table(data, file = 'OrderedTable.txt', append = TRUE,
   quote=FALSE, sep = '\t', na ='NA', dec = '.', row.names = TRUE, 
   col.names = FALSE) 
```

在这里，您包含了参数`col.names = FALSE`，这就是您的文件没有列名的原因。你也不需要/想要`append=TRUE`. 如果您查看`help(write.table)`，您会看到它“仅在文件是字符串时才相关”。在这里，它似乎使文件写入而不结束最后一行，这可能会导致以后`read.table()`抱怨。

结果中的数字 1-15 看起来像行号。你没有解释你如何看待生成的文件，所以我不能确定。您可能以不解析 row.names 而是显示行号的方式读取文件。如果你确定你的 SampleIDs 列没有被指定为行名，你可能会没事的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T13:18:11.540

看看包的`arrange`功能`plyr`。

```
arrange(data, Cluster)
write.table(data, "ordered_data.txt") 
```**

# php - `preg_match` PHP 中的整个字符串

> ID：13378585
> 
> 赞同：0
> 
> 时间：2012-11-14T12:11:11.130
> 
> 标签：php, regex

这件事真的让我很困惑，原谅我的无知。

我在这里有一个 var `$name`，我想摆脱数字，我不希望其中包含任何数字。我`preg_match()`的是这样的：

```
var_dump(preg_match('/[^\d]/',$name)); 
```

测试用例：

```
$name = "213131"; // int(0) 
$name = "asdda"; // int(1)
$name = "as232dda"; // int(1) 
```

我想要的是也有第三种情况`int(0)`。

我真的很难理解这一点`preg_match()`，文档说如果模式匹配主题它会返回 1。在我的例子中，我使用了一个否定类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:13:33.417

#3 匹配，因为你有字母和数字。你的英语正则表达式基本上说

> 如果有非数字字符则匹配

如果您只想匹配非数字字符，则必须让正则表达式与整个字符串匹配并允许任意数量的字符*：*

```
^[^\d]+$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:14:46.707

您的正则表达式仅检查是否存在至少一个非数字。相反，您需要检查它是否*只是*非数字：

```
var_dump(preg_match('/^\D+$/',$name)); 
```

( `^`and`$`是字符串的开头和结尾。`\D`表示任何不是数字的东西——与 . 相反`\d`。所以这只匹配从头到尾的非数字。它不匹配空字符串。如果你想匹配，请`+`替换为`*`也是一个空字符串）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:14:56.890

尝试这个：

```
<?php
    $string = "as232dda";
    $new_string = trim(str_replace(range(0,9),'',$string));
    echo $new_string;// gives 'asdda'
?> 
```

或函数形式：

```
<?php
  function remove_numbers($string){
    return(trim(str_replace(range(0,9),'',$string)));
  }

  $string = "as232dda";
  echo remove_numbers($string); // gives 'asdda'
?> 
```

# powershell - Powershell SCCM 2012 移动驱动包

> ID：13378586
> 
> 赞同：0
> 
> 时间：2012-11-14T12:11:17.027
> 
> 标签：powershell, wmi, sccm

所以我有这个可爱的脚本，它将在 SCCM 2012 中创建文件夹和驱动程序包，它创建了文件夹和驱动程序包，但我不知道如何将它们放在正确的文件夹中。我认为 PkgFlags 会这样做，但这似乎什么也没做，我找不到移动包的函数。

我已经为此工作了几天，但一无所获

请帮忙

```
$SCCMSiteCode = Read-Host "SCCM Site Code"
$PackageNamePath = Read-Host "Driver Package Original Path"
$PackageSourcePath = Read-Host "Driver Package Source Path"
$FolderArray1 = Get-ChildItem -Path "$PackageNamePath"

foreach ($FolderList1 in $FolderArray1)
{
if (($FolderList1.name -Like "Server*") -or ($FolderList1.name -Like "Windows*"))
    {
    $Argument1 = @{Name = "$FolderList1"; ObjectType = 23; ParentContainerNodeId = 0}
    Set-WmiInstance -Namespace "root\sms\site_$SCCMSiteCode" -Class "SMS_ObjectContainerNode" -Arguments $Argument1
    $GetID1 = Get-wmiObject -Namespace root\SMS\site_$SCCMSiteCode -Query "Select name,containernodeid from SMS_ObjectContainerNode" | select name,ContainerNodeID | Where-Object {$_.Name -eq $FolderList1}
    $FolderArray2 = Get-ChildItem -Path "$PackageNamePath\$FolderList1"
    foreach ($FolderList2 in $FolderArray2)
        {
        if (($FolderList2.name -NotLike "Server*") -or ($FolderList2.name -NotLike "Windows*"))
            {
            $DateTime = get-date -Format yyyy.MM.dd-hh.mm.ss
            $Milliseconds = (get-date).millisecond
            $FullDateTime = "$DateTime.$Milliseconds"
            New-Item -ItemType Directory -Path "$PackageSourcePath\$FullDateTime" 
            $PackageName = "$FolderList2 - $FolderList1"
            $Argument2 = @{Name = "$PackageName"; PkgSourcePath = "$PackageSourcePath\$FullDateTime"; PkgSourceFlag = 2; PkgFlags = $GetID1.ContainerNodeID}
            Set-WmiInstance -Namespace "root\sms\site_$SCCMSiteCode" -Class "SMS_DriverPackage" -Arguments $Argument2
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:03:39.797

如果您在谈论 SCCM 本身中的文件夹，则需要另一个名为 SMS_ObjectContainerItem 的 wmi 类。它基本上告诉驱动程序进入哪个文件夹。

我实际上在 2012 年还没有编写脚本，但是在我编写的创建广告的脚本中，我的代码如下所示：

```
#This gets the folder from wmi. $advContName is the name of the folder I want the ADV to end up in
$advContainer = gwmi -name root\sms\site_ia1 -computer itsnt353 -query "Select * from SMS_ObjectContainerNode WHERE Name='$advContName' AND ObjectType='3'"

$moveADV = ([WMIClass]\\itsnt353\root\sms\site_ia1:SMS_ObjectContainerItem").CreateInstance()
$moveADV.InstanceKey = $advID
$moveADV.ObjectType = 2;
$moveADV.ContainerNodeID = $advContainer.ContainerNodeID
$moveADV.Put() 
```

我希望这有帮助。

# asp.net - 让用户在 ASP.net WebForms 中以特殊方式添加未指定记录的正确方法

> ID：13378587
> 
> 赞同：1
> 
> 时间：2012-11-14T12:11:17.810
> 
> 标签：asp.net, webforms

我在一些网站上看到让他们的用户通过输入原始文本框来添加记录，并且有一个加号图标可以让他们添加另一条记录，如果他们有的话，方式如下：

电话号码： | ***_* __ *_*** | 姓名： | ***_* __ *_* __ *_* __** | +

| **___添加按钮___** |

如果用户有另一条记录，那么他点击那个加号图标，表格变成这样：

电话号码： | ***_* __ *_*** | 姓名： | ***_* __ *_* __ *_* __** | -

电话号码： | ***_* __ *_*** | 姓名： | ***_* __ *_* __ *_* __** | +

| **___添加按钮___** |

几行之后是这样的：

电话号码： | ***_* __ *_*** | 姓名： | ***_* __ *_* __ *_* __** | -

电话号码： | ***_* __ *_*** | 姓名： | ***_* __ *_* __ *_* __** | -

电话号码： | ***_* __ *_*** | 姓名： | ***_* __ *_* __ *_* __** | -

电话号码： | ***_* __ *_*** | 姓名： | ***_* __ *_* __ *_* __** | -

电话号码： | ***_* __ *_*** | 姓名： | ***_* __ *_* __ *_* __** | -

电话号码： | ***_* __ *_*** | 姓名： | ***_* __ *_* __ *_* __** | +

| **___添加按钮___** |

请告诉我如何在 Asp.net WebForms 中实现这一点和/或给我一些关于这个结构是什么以及其他人如何实现它的提示？（最好是服务器端解决方案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:18:17.190

起初我不明白为什么你需要一个服务器端解决方案，除非/否则有特殊需要。

您可以通过多种方式实现这一目标

1 在客户端构建控件

当用户单击 + 或 - 时，您可以在客户端构建控件并继续将它们添加到您的容器中，最后或定期如果您希望可以使用回调将更改保存到服务器。

在客户端，您可以唯一地命名控件以在保存期间从中获取值。像 tbx_phone_number_1 ， tbx_phone_number_2 等等

您还可以在客户端拥有一个 JSON，并且对于每个 - 和 +，您都可以将记录推送到 json 中，最后将 JSON 发送回服务器进行保存。

2 在服务器端构建控件

每次单击 + 或 - 时，您都会在服务器端进行回发并构建控件，这是一个繁琐的过程，您会浪费网络带宽和服务器性能等资源。

将行动态添加到表 [中 使用 jQuery 动态地将行和列添加到表中](https://stackoverflow.com/questions/3479678/adding-rows-and-columns-to-a-table-dynamically-with-jquery)

动态添加控件

[如何将输入字段（文本框）添加到使用 jQuery 动态创建的表中](https://stackoverflow.com/questions/6926129/how-do-i-add-input-fields-textbox-to-a-table-dynamically-created-with-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:16:05.217

这应该为您提供您正在寻找的服务器端功能：

[使用具有类似 GridView 界面的 ListView 插入新记录](http://www.codeproject.com/Articles/44070/Insert-a-new-record-using-ListView-with-a-GridView)

类似的功能：

[如何使用 c# 将记录插入到 asp.net 的列表视图控件中？](https://stackoverflow.com/questions/8403263/how-to-insert-a-record-into-a-listview-control-of-asp-net-using-c)

[使用 ASP.NET 3.5 的 ListView 和 DataPager 控件：插入数据](http://www.4guysfromrolla.com/articles/061709-1.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:34:33.273

这是一个非常好的解决方案：

[http://www.aspsnippets.com/Articles/Create-dynamic-textbox-using-JavaScript-in-ASP.Net.aspx](http://www.aspsnippets.com/Articles/Create-dynamic-textbox-using-JavaScript-in-ASP.Net.aspx)

# php - 在php中为每个用户形成2个收音机

> ID：13378601
> 
> 赞同：0
> 
> 时间：2012-11-14T12:11:57.727
> 
> 标签：php, html, mysql, forms, foreach

我有一个表单，可以根据唯一的名称标签动态打印出名称。用于响应邀请。每个名称标签可以有多个用户，即夫妇、有孩子的夫妇等。对于每个名称，都有一个单选按钮，受邀者可以在其中选择他/她是否来参加聚会（值 1=不来，2=来）。对于一对夫妇来说，它可能看起来像这样：

```
Lady Mary S
I am not coming         - radio - value 1
I am coming             - radio - value 2

Mister Hans S
I am not coming         - radio - value 1
I am coming             - radio - value 2

Child of Mary & Hans S
I am not coming         - radio - value 1
I am coming             - radio - value 2 
```

这些被邀请者中的每一个都有一个用户 ID - 我需要使用用户 ID 进行响应。它的 HTML 如下所示：

```
<div>
<h1>Lady Mary S</h1>
<label for="no-1">I am not coming</label>
<input type="radio" value="1" id="no-1" name="response[1]" /><br />
<label for="yes-1">I am coming</label> 
<input type="radio" value="2" id="yes-1" name="response[1]" />
<input type="hidden" name="userid[]" value="1" />
</div>

<div>
<h1>Mister Hans S</h1>
<label for="no-2">I am not coming</label>
<input type="radio" value="1" id="no-2" name="response[2]" /><br />
<label for="yes-2">I am coming</label> 
<input type="radio" value="2" id="yes-2" name="response[2]" />
<input type="hidden" name="userid[]" value="2" />
</div>

<div>
<h1>Child of Mary & Hans S</h1>

<label for="no-3">I am not coming</label>
<input type="radio" value="1" id="no-3" name="response[3]" /><br />
<label for="yes-3">I am coming</label> 
<input type="radio" value="2" id="yes-3" name="response[3]" />
<input type="hidden" name="userid[]" value="3" />
</div> 
```

这些名称将从 MySQL 中获取，并带有这 3 个人的唯一名称标签，fx`MARHAN`

这是一种动态形式 - 对于某些名称标签，将只有两个被邀请者，而对于其他名称标签，将有 3 或 4 个，等等。

我的问题是我无法就如何处理发布的数据提出解决方案，因此我可以确保响应是针对正确的用户 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:19:14.123

所有你需要的是

```
foreach($_POST['response'] as $userid => $value) {
      echo $userid.'-'.$value."<br>";
} 
```

因为您已经有了`userid in key`单选按钮名称`name="response[1]"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:20:33.247

只是一个想法：如何使每个输入的值类似于“answer-userId”。例如：

```
<input type="radio" value="1-333" id="no-3" name="response[]" /><br /> 
```

然后你可以用'-'分割php中的发布值并得到答案（1）和用户ID（333）。

# jquery - 滑块导航的小改动

> ID：13378605
> 
> 赞同：1
> 
> 时间：2012-11-14T12:12:11.120
> 
> 标签：jquery, slideshow

我正在使用这个 jQuery 滑块，它按预期工作。但我想更改导航或分页以显示“当前显示幻灯片 y of y”，然后显示“下一个”链接。

我怎么做？我可以看到有一个

```
function current(t) {...} 
```

但我不知道如何使用它。我想显示“当前”和“最后一个”幻灯片是解决方案，但是应该如何使用它们呢？

[演示小提琴](http://jsfiddle.net/TrZbn/)。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:17:58.170

This slider at [http://bxslider.com/](http://bxslider.com/) has all the functionality I'm looking for.

# mysql - 复杂的 SQL 查询

> ID：13378606
> 
> 赞同：0
> 
> 时间：2012-11-14T12:12:19.643
> 
> 标签：mysql, select, insert

我需要编写一个查询，这对我来说有点复杂。基本思想是匹配来自不同表的几个字段，然后根据结果编辑另一个表。

涉及三个表：

时间表：`sch_id, date, schedule, event_id`

Link_Location_Schedules：`id, loc_id, sch_id`

Link_Location_Events：`id, loc_id, event_id`

现在我需要尝试做的是：

1.  在“日程安排”中查找在今天日期之后设置的日程安排。
2.  对于这些计划，从与计划事件 ID 相同的`Link_Location_Events`位置获取位置 ID 。`event_ids`
3.  对于每个匹配的计划 ( `sch_id`) 和返回的位置 ( `loc_id`)，检查该对是否已存在于 中`Link_Location_Schedules`，如果不存在则插入它们。

以下是我为上述所做的一些 SQL 查询，我只需要将它们组合起来：

1.  `SELECT sch_id FROM 'Schedules' WHERE DATE_FORMAT(sports_schedule_insert_date_time, "%Y-%m-%d") >= '2012-11-14';`

2.  `SELECT loc_id from Link_Location_Events, Schedules WHERE Link_Location_Events.event_id = Schedules.event_id;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:03:48.300

听起来像是 select 语句中的简单插入...

```
insert into Link_Location_Schedules
   ( loc_id,
     sch_id )
select
      PreQuery.loc_id,
      PreQuery.sch_id
   from
      ( select
              s.sch_id,
              lle.loc_id
           from
              Schedules s
                 join Link_Location_Events lle
                    on s.event_id = lle.event_id ) PreQuery
      LEFT JOIN Link_Location_Schedules lls
         on PreQuery.loc_id = lls.loc_id
        and PreQuery.sch_id = lls.sch_id
   where
      lls.loc_id is null 
```

最里面的预查询是获取所有可能的日程/位置 ID。从那里，左连接到那些找到的现有位置/时间表。然后，WHERE 子句将仅返回未找到匹配项的那些（因此 lls.loc_id 为空）。获取该结果并直接插入到计划/位置表中。

# git - 使用嵌套 Git 子模块时释放多个 Maven 工件

> ID：13378608
> 
> 赞同：10
> 
> 时间：2012-11-14T12:12:31.173
> 
> 标签：git, maven, release, git-submodules, maven-release-plugin

我已经搜索了一段时间，在使用嵌套的 Git 子模块时找不到任何有效的解决方案或发布 Maven 模块的指南/教程。

我们有一个复杂的公共和私人项目结构，需要特定的订单才能成功构建。我们的目标是执行 Maven 发布，以便在一个步骤中标记和部署**多个 Maven 工件。**

这是简化的 Maven 项目/模块和 Git 存储库结构：

```
parent-public:1.0.0:pom (descriptor only, no Maven modules, public Git repository)
  |  |
  |  |- public-module:1.0.0-SNAPSHOT:jar
  |     (Maven module, child of parent-public, Git submodule, public repository)
  |
  |- parent-private:1.0.0-SNAPSHOT:pom
    (Maven modules, Git submodule, private repository)
       |
       |- public-module:1.0.0-SNAPSHOT:jar
       |  (Maven module only, child of parent-public, Git submodule, public repository, released)
       |
       |- private-module:1.0.0-SNAPSHOT:war
          (Maven module, child of parent-private, released) 
```

当前的结构允许 Maven 独立构建和部署项目/模块。

发布时`public-module`（从*parent-public/parent-private/public-module*目录），`maven-release-plugin`表现良好（Git 存储库已被标记并已部署发布工件）。

发布时`parent-private`，在*目标*签`maven-release-plugin`出期间失败之前准备并开始执行发布（[这里](https://stackoverflow.com/questions/6938142/how-to-get-maven-release-to-clone-git-submodules)讨论了这个问题，但解决方案在我的上下文中不起作用并且没有足够的声誉来评论）。

 *这是当前的`maven-release-plugin`配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-release-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <tagNameFormat>v@{project.version}</tagNameFormat>
        <commitByProject>true</commitByProject>
        <pushChanges>true</pushChanges>
    </configuration>
</plugin> 
```

是否有更优雅的方式来组织 Maven 模块和 Git 存储库以发布多个 Maven 工件？或者，在部署工件之前，是否有人找到了在结帐期间递归克隆 Git 子模块的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T18:54:46.130

这个问题的答案不能满足最初的问题，但是 Maven Release 插件还不够聪明，无法理解 git 子模块的边界。我认为您正在寻找的是 Maven 发布插件能够感知目录指向子模块以及此发布插件自动跨边界标记的能力？这不会发生，我认为目前任何人都没有计划。

对于使用 Git 的 Maven 用户，我始终建议不要打破需要跨子模块使用 Release 插件的多模块项目的界限。将其限制在单个存储库中。

同样，这不是一个很好的答案，但是多年来使用 Maven 发布插件，它确实不是一个很好的插件:-(*

# c# - Asp.net C# HtmlTable Placeholder UpdatePanel 在回发前及时更新

> ID：13378612
> 
> 赞同：0
> 
> 时间：2012-11-14T12:12:38.037
> 
> 标签：c#, asp.net, dynamic, controls, placeholder

我想在用户单击按钮时以编程方式创建一个表。我在 C# asp.net 中制作了一个程序，当执行操作时，女巫在 PlaceHolder 内（即在 UpdatePanel 内）添加了一个 HtmlTable。问题是该操作需要很多时间（不涉及数据库），我希望在回发之前构建表（我的意思是在处理数据时及时添加行）。我不知道这是如何完成的，或者是否可行。我不知道阿贾克斯。我可以提供有关该问题的更多详细信息。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:40:05.853

您可以使用 jQuery 来做到这一点，它非常容易学习。

超级简单 [http://blogs.microsoft.co.il/blogs/linqed/archive/2009/03/04/generating-html-tables-with-jquery.aspx](http://blogs.microsoft.co.il/blogs/linqed/archive/2009/03/04/generating-html-tables-with-jquery.aspx)

# java - 使用 JNDI 连接到 AD - 为什么必须以 username@domain 格式提供安全主体？

> ID：13378616
> 
> 赞同：1
> 
> 时间：2012-11-14T12:12:53.567
> 
> 标签：java, active-directory, ldap

我正在尝试使用标准 Java (javax.naming.*) 库连接到 Active Directory。

这似乎与连接到任何其他 LDAP 完全一样，除了一个区别：`SECURITY_PRINCIPAL`需要以表格形式提供

```
sAMAccountName@domainComponent(s) 
```

例如

```
env.put(Context.SECURITY_PRINCIPAL, "foo@bar.baz.org" 
```

尝试使用指向完全相同的用户的有效 DN

```
env.put(Context.SECURITY_PRINCIPAL, "cn=foo,cn=Users,dc=bar,dc=baz,dc=org 
```

导致一个`AuthenticationException`. 这是特定于 Active Directory 的东西吗？对于其他 LDAP DS，最后一种方法总是有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:00:05.777

这不是您正在执行的 AD 身份验证。您正在执行一个简单的 LDAP 绑定。AD 身份验证是 Kerberos。

AD 的 LDAP 组件要求主体作为 UPN、samaccountname 或 NT4 样式登录。不接受任何 DN。

# vbscript - vbscript多查找/替换word文档中的字符串

> ID：13378617
> 
> 赞同：1
> 
> 时间：2012-11-14T12:12:55.033
> 
> 标签：vbscript

我正在尝试创建一个 VB 脚本，它将执行 word 文档中某些字符的替换，我通过以下方式进行管理：

```
objSelection.Find.Text = "["
objSelection.Find.Forward = TRUE
objSelection.Find.Replacement.Text = "q"
objSelection.Find.Execute ,,,,,,,,,,2
objSelection.Find.Text = "{"
objSelection.Find.Forward = TRUE
objSelection.Find.Replacement.Text = "w"
objSelection.Find.Execute ,,,,,,,,,,2
objSelection.Find.Text = "^"
objSelection.Find.Forward = TRUE
objSelection.Find.Replacement.Text = "y"
objSelection.Find.Execute ,,,,,,,,,,2
objSelection.Find.Text = "~"
objSelection.Find.Forward = TRUE
objSelection.Find.Replacement.Text = "z"
objSelection.Find.Execute ,,,,,,,,,,2
objSelection.Find.Text = "]"
objSelection.Find.Forward = TRUE
objSelection.Find.Replacement.Text = "x"
objSelection.Find.Execute ,,,,,,,,,,2
objSelection.Find.Text = "}"
objSelection.Find.Forward = TRUE
objSelection.Find.Replacement.Text = "ć"
objSelection.Find.Execute ,,,,,,,,,,2
objSelection.Find.Text = "@"
objSelection.Find.Forward = TRUE
objSelection.Find.Replacement.Text = "]"
objSelection.Find.Execute ,,,,,,,,,,2 
```

但是，我设法做到的方式非常慢，尤其是当文本文件为几 MB 时增加需要替换的字符数时...因此，脚本会为每个替换字符遍历整个文档结果是脚本的执行速度非常慢。是否有可能在一个word文档中并行更改几个字符，脚本只有一个通过文档并根据遇到的字符来执行替换？我还尝试将 word 文档中的逐行加载到变量中，并将每个字符与给定字符进行比较以进行替换，从而导致脚本执行速度变慢...对不起我的英语，我希望我能成功解释我的问题。请帮我。谢谢你。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:36:24.180

你能做这样的事情吗？

```
objSelection.Find.ClearFormatting
With objSelection.Find
    .Text = "[\[\{~\]\}\@^0094]" ' ^0094 is "^"
    .Replacement.Text = ""
    .Forward = True
    .Wrap = 1 'wdFindContinue
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchAllWordForms = False
    .MatchSoundsLike = False
    .MatchWildcards = True
End With

Do While objSelection.Find.Execute()
    Dim t: t = objSelection.Text
    Select Case t
        Case "["
            objSelection.Text = "q"
        Case "{"
            objSelection.Text = "w"
        Case "~"
            objSelection.Text = "z"
        '... fill in the rest
    End Select
    objSelection.Move 1
Loop 
```

我认为这可能仅在您查找和替换单个字符时才有效，但这会匹配您正在查找的任何字符，检查找到的字符并将其替换为适当的字符。

这是从 Word 2010 中录制的宏中获取的，但我认为没有必要转换为 VBScript。

# java - 在 logback 日志或 java 中的堆栈跟踪中打印对象 ID

> ID：13378619
> 
> 赞同：1
> 
> 时间：2012-11-14T12:13:02.210
> 
> 标签：java, debugging, stack-trace, logback, dalvik

有什么方法可以让 Java 或[Logback](http://logback.qos.ch/)在堆栈跟踪和日志调用中为我提供对象 ID（或地址或其他）。换句话说，而不是这样：

```
com.example.MyObject 
```

在我的堆栈跟踪中，我想要这个：

```
com.example.MyObject@123456 
```

对于日志记录，我想要这个：

```
LOG.debug("A message"); 
```

像这样行事：

```
LOG.debug(this + ": A message"); 
```

不过我看不到这样做的方法，因为 Logback 和 java 本身似乎都使用`StackTraceElement`s，而那些不记录此信息。

对于奖励积分，`Object.toString()`dalvik是如何实现的？通用的 java 文档说它是，`toHex(Object.hashCode())`但我测试了它并且它不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:50:07.003

正如您所注意到的，堆栈跟踪本身不包含对`this`每一帧中的引用。但是，该信息*可*用于调试器。可能有一种获取您想要的信息的黑客方法，但它会很丑陋、缓慢，而且可能很不稳定。老实说，我不会打扰。

> 对于奖励积分，`Object.toString()`dalvik是如何实现的？

这是（类似的）树尖`Object.java`：[https ://android.googlesource.com/platform/libcore/+/bcf0a81a927992883f0cb49c1c945141d1261b8b/luni/src/main/java/java/lang/Object.java](https://android.googlesource.com/platform/libcore/+/bcf0a81a927992883f0cb49c1c945141d1261b8b/luni/src/main/java/java/lang/Object.java)

从那里：

```
public String toString() {
    return getClass().getName() + '@' + Integer.toHexString(hashCode());
} 
```

请注意，这是类中的基本实现`Object`，但它通常在子类中被覆盖。这可以解释您可能看到的任何差异。

我希望这有帮助。

# ajax - jsf 错误“无法定位..”在 ui:repeat 中的 f:ajax

> ID：13378621
> 
> 赞同：0
> 
> 时间：2012-11-14T12:13:10.220
> 
> 标签：ajax, user-interface, jsf-2

我有这样的事情

```
<ui:repeat value="#{val}" id="repeatID" var="var">
    <h:panelGroup layout="block" id="blockForRender">
        <f:ajax execute="@this" render=":#{cc.clientId}:blockForRender"> text </f:ajax>
    </h:panelGroup>
</ui:repeat> 
```

这是制造错误 - “无法在组件的上下文中找到它”。为什么？我怎么能做到这一点？

不，这不起作用。也许是因为 ajax 在另一个组合中？

```
<ui:repeat value="#{val}" id="repeatID" var="var">
 <composite:otherComposite id="otherComposite">
    <h:panelGroup layout="block" id="blockForRender">
        <f:ajax execute="@this" render=":#{cc.clientId}:blockForRender"> text </f:ajax>
    </h:panelGroup>
 </composite:otherComposite>
</ui:repeat> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:28:45.840

因为具有该 ID 的组件根本不存在。相反，它以`<ui:repeat>`like so的迭代索引为前缀`ccClientId:0:blockForRender`。在浏览器中打开页面并执行*查看源代码*以自己查看。

只需省略绝对 ID 前缀，使其相对于最近的父级`UINamingContainer`（即`<ui:repeat>`在您的特定 - 严重过度简化 - 片段中的自身）。

```
<f:ajax ... render="blockForRender"> 
```

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier)

# sql - 使用 SQL 将不平衡的多列转换为单列

> ID：13378622
> 
> 赞同：0
> 
> 时间：2012-11-14T12:13:11.157
> 
> 标签：sql, sql-server

我有一些结构不平衡的电子表格

```
 ID Date       Val Date       Val Date       Val
    1  2000/01/01 2   2000/12/31 1  
    2  1999/01/28 6   2001/02/01 5   2001/12/31 6
    .... 
```

我想将其重新排列为以下内容

```
 ID Date       Val
    1  2000/01/01 2
    1  2000/12/31 1
    2  1999/01/28 6
    2  2001/02/01 5
    2  2001/12/31 6
    .... 
```

## 请告诉我如何在 MS SQL Server 中做到这一点？谢谢！

样本数据：

```
 create table tmp
    (
        id smallint not null,
        date1 Date,
        val1 smallint,
        date2 date,
        val2 smallint,
        date3 date,
        val3 smallint
     );

     insert into tmp(id, date1, val1, date2, val2) values (1, '2001-01-01',5,'2001-12-31',6);
     insert into tmp(id, date1, val1, date2, val2, date3, val3) values (2, '1999-02-01',3,'2000-12-31',2, '2001-05-01',3);

     select * from tmp

    1   2001-01-01  5   2001-12-31  6   NULL    NULL
    2   1999-02-01  3   2000-12-31  2   2001-05-01  3 
```

但是以下代码将返回

```
 select c.* from tmp cross apply 
    (
        select id, date1, val1 from tmp where date1 is not null
        union all
        select id, date2, val2 from tmp where date2 is not null
        union all
        select id, date3, val3 from tmp where date3 is not null
    ) 
     as c

    1   2001-01-01  5
    1   2001-01-01  5
    2   1999-02-01  3
    2   1999-02-01  3
    1   2001-12-31  6
    1   2001-12-31  6
    2   2000-12-31  2
    2   2000-12-31  2
    2   2001-05-01  3
    2   2001-05-01  3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:16:29.840

从 SQL Server 2005 开始，您可以将函数/子查询应用于源数据集中的每一行。

```
SELECT
  normalised.*
FROM
  yourTable AS tmp
CROSS APPLY
(
  SELECT tmp.id, tmp.date1, tmp.val1 WHERE tmp.date1 IS NOT NULL
  UNION ALL
  SELECT tmp.id, tmp.date2, tmp.val2 WHERE tmp.date2 IS NOT NULL
  UNION ALL
  SELECT tmp.id, tmp.date3, tmp.val3 WHERE tmp.date3 IS NOT NULL
)
  AS normalised 
```

在 Sql Server 2005 之前，您可以将这三个单独的查询合并在一起。

```
 SELECT id, date1, val1 FROM yourTable WHERE date1 IS NOT NULL
  UNION ALL
  SELECT id, date2, val2 FROM yourTable WHERE date2 IS NOT NULL
  UNION ALL
  SELECT id, date3, val3 FROM yourTable WHERE date3 IS NOT NULL 
```

# javascript - 如何访问对象

> ID：13378623
> 
> 赞同：-2
> 
> 时间：2012-11-14T12:13:20.860
> 
> 标签：javascript

我想要警报对象`key`名称及其`value`. 但它不起作用。

```
$(function() {
    var james =  {first: '1,2,3', second: '4,5,6' } 
    $('a').click(function(){
        alert(james[first]) 
    })
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:14:53.273

您应该正确使用方括号表示法：

```
alert(james["first"]) 
```

或点符号：

```
alert(james.first) 
```

访问对象中的元素。

**有用的参考：**

*   [http://www.jibbering.com/faq/faq_notes/square_brackets.html](http://www.jibbering.com/faq/faq_notes/square_brackets.html)

如果您需要显示对象中的所有项目，请使用带有关键字的`for`循环：`in`

```
for (var key in james) {
    // key          -- for key
    // james[key]   -- for value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:17:01.280

您可以使用`foreach`读取所有属性：

```
for (var key in james) {
  alert(key);
} 
```

# android - 如何从另一个应用程序启动一个应用程序

> ID：13378628
> 
> 赞同：2
> 
> 时间：2012-11-14T12:13:33.807
> 
> 标签：android, android-activity, package, android-package-managers

在我的应用程序中，我必须启动另一个应用程序，前提是它尚未启动。

要启动一个应用程序，我要做的是：

```
PackageManager pm = getPackageManager();        
Intent intent = pm.getLaunchIntentForPackage("package.of.app.to.launch");
startActivity(intent); 
```

我的问题是，如果应用程序已经启动，它将把应用程序带到前面。仅当活动和已启动的应用程序中不存在时，我如何才能启动应用程序？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:23:02.477

您可以获得所有*正在运行*或活动的应用程序的列表，然后检查您要启动的应用程序是否在其中。

```
ActivityManager activityManager = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
List<RunningAppProcessInfo> runningProcInfo = activityManager.getRunningAppProcesses();
for(int i = 0; i < runningProcInfo.size(); i++){
        if(runningProcInfo.get(i).processName.equals("package.of.app.to.launch")) {
            Log.i(TAG, "XXXX is running");
        } else  {
            // RUN THE CODE TO START THE ACTIVITY
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:19:45.773

您可以使用[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html)获取当前正在运行的应用程序并在设备上执行最近的任务，如下所示：

```
 ActivityManager activityManager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
 List<RunningTaskInfo> recentTasks = activityManager.getRunningTasks(Integer.MAX_VALUE);

    for (int i = 0; i < recentTasks.size(); i++) 
    {
         // Here you can put your logic for executing new task         
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:20:08.567

如果你想知道一个应用程序是否正在运行，你应该看看[getRunningTasks](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningTasks%28int%29)

此外，这篇[文章](https://stackoverflow.com/q/10284241/1626878)可能会对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T10:17:22.847

你可以得到哪个活动正在运行

```
List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1); 
String currentActivity=taskInfo.get(0).topActivity.getPackageName(); 
```

然后检查

```
if(currentActivity!=(your activity))
{
    **your intent**
}
else{
"app already running"
} 
```

希望能帮助到你。谢谢你

# c++ - ntdll.dll 中未处理的异常

> ID：13378632
> 
> 赞同：1
> 
> 时间：2012-11-14T12:13:54.530
> 
> 标签：c++, visual-c++, boost, sdl

我正在使用带有 boost v1.52.0 的 Visual Studio 2011 C++ 刚刚添加了在子目录中搜索文件的方法，并在程序关闭时开始出现此错误：

```
Unhandled exception at 0x7733E3BE (ntdll.dll) in Platformer.exe: 0xC0000005: Access violation reading location 0x437FEF0C. 
```

文件系统.h：

```
#ifndef FILESYSTEM_H
#define FILESYSTEM_H

#include "boost/filesystem.hpp"

namespace fs=boost::filesystem;

class FileSystem
{
public:
    static const std::string GetExePath();
    static const std::string GetFullPath(std::string fileName, std::string searchInPath = "");
};

#endif 
```

文件系统.cpp

```
#include "FileSystem.h"

const std::string FileSystem::GetExePath()
{
    fs::path path = fs::current_path();
    return path.string();
}

const std::string FileSystem::GetFullPath(std::string fileName, std::string searchInPath)
{
    if(searchInPath == "") 
    {
        searchInPath = GetExePath();
    }

    fs::directory_iterator end_iter;
    for( fs::directory_iterator dir_iter(searchInPath); dir_iter!=end_iter; ++dir_iter)
    {
        if(fs::is_directory(dir_iter->status()))
        {
            return GetFullPath(fileName, dir_iter->path().string());
        }
        else if (fs::is_regular_file(dir_iter->status()))
        {
            if(dir_iter->path().filename() == fs::path(fileName).filename())
            {
                return dir_iter->path().string();
            }
        }
    }

    return std::string("");
} 
```

我以这种方式使用它：

```
std::string imageFullPath = FileSystem::GetFullPath("image.png"); 
```

这段代码有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:56:32.690

首先，我没有提到我正在使用 SDL（简单 DirectMedia 层）库。这些库是使用#pragma comment (lib, ...) 链接的，这会导致应用程序关闭时出错。我在 Project Properties -> Linker -> Input -> Additional Dependencies 部分中定义了它们，问题就解决了。

其次 GetFullPath 方法是错误的。这是正确的：

```
const std::string FileSystem::GetFullPath(std::string fileName, std::string searchInPath)
{
    std::string result;

    if(searchInPath.empty()) {
        searchInPath = GetExePath();
    }

    fs::directory_iterator end_iter;
    for( fs::directory_iterator dir_iter(searchInPath); dir_iter!=end_iter; ++dir_iter)
    {
        if(fs::is_directory(dir_iter->status()))
        {
            result = GetFullPath(fileName, dir_iter->path().string());
            if(!result.empty())
            {
                break;
            }
        }
        else if (fs::is_regular_file(dir_iter->status()))
        {
            if(dir_iter->path().filename() == fs::path(fileName).filename())
            {
                result = dir_iter->path().string();
                if(!result.empty())
                {
                    break;
                }
            }
        }
    }

    return result;
} 
```

# asp.net-mvc - 如何动态显示具有不同数据源的不同网格

> ID：13378636
> 
> 赞同：0
> 
> 时间：2012-11-14T12:14:08.813
> 
> 标签：asp.net-mvc, kendo-ui

我必须根据数据库中的记录动态显示 KendoUI 拆分器。如果我的数据库中有 n 条记录，我必须显示“n-1”拆分器。在每个分区中，我必须显示具有不同数据源的 KendoGrid。我已经实现了 ajax 从数据库中获取记录，在成功函数中，取决于我能够显示所需数量的拆分器的长度。在每个拆分器中，我放了一个网格，例如，

```
 success: function (json) {
            for (var i = 0; i < json.length; i++) {
               var div = document.createElement('div');
               var griddatSource = new kendo.data.DataSource({
                    transport: {
                        read: {
                            url: "/Home/splitter",
                            type: "POST",
                            dataType: "json"
                        }
                    },
                    batch: false,
                    schema: {
                        model: {
                            id: "iD",
                            fields: {
                                iD: { type: "number" },
                                name: { type: "string" },
                                email: { type: "string" }
                            }
                        }
                    }

                });

                $('<div id = ' + json[i].name + '>').appendTo("#splitter");
                $("#" + json[i].name).kendoGrid({
                    dataSource: griddatSource,
                    selectable: "multiple",
                    columns: [{ field: "name", title: "Name" },
                              { field: "email", title: "Email"}],
                    editable: false

                }).data("kendoGrid");
            }

            $("#splitter").kendoSplitter({
                orientation: "horizontal"
            });
          } 
```

现在，我能够动态显示拆分器，并且在每个拆分器中我都可以加载网格，但我想知道如何为不同的网格使用不同的不同数据源。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:16:15.970

只需使用一个变量：

```
var div = $('<div/>');
div.appendTo('#splitter');
div.someStuff(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:16:57.437

我想你可以从中得到一个简短的想法。

```
<script type="text/javascript">
function fnc()
{
    el=document.createElement('div');
    el.style.backgroundColor="red";
    el.innerHTML="aaa";
    document.getElementById("adiv").appendChild(el);
    //document.getElementById("adiv").innerHTML=var1;
}
</script>
<div id="adiv">
qwerty
</div>
<input type="button" value="click me" onclick="fnc();"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:07:58.330

我想这就是你的意思？

```
function (json) {
        for (var i = 0; i < json.length ; i++) {
            //alert(json[i].name);
            var divTag = document.createElement('div');
            divTag.setAttribute('id', json[i].name);
            var newAddedDiv = $('<div>').appendTo("#splitter");
            newAddedDiv.html('fooooo');
       }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T11:26:11.283

在ajax函数的成功中，我已经实现了

```
 success: function (json) {
                            for (var i = 0; i < json.length; i++) {
var j = i+1;                                
var div = document.createElement('div');
     $('<div id = ' + json[i].prj '>').appendTo("#splitter");
    ----------------code for loading grid with different datasource--------------                      
    }
     $("#splitter").kendoSplitter({
      orientation: "horizontal"
                            });

     **code for loading grid with different datasource**
    In the datasource read I gave like 
    transport: {
                                            //passing values to the controller to display grid with different dataSource
                                            read: {
                                                url: function (options) {
                                                    return kendo.format("/Project/Display?selectedId=" + j + ""); 
                                                }

                                            }
                                        } 
```

# html - 我可以在我的 HTML5 应用程序缓存清单中使用与协议无关的 URL 吗？

> ID：13378639
> 
> 赞同：0
> 
> 时间：2012-11-14T12:14:27.143
> 
> 标签：html, application-cache

我们有许多网站使用相同的代码库来运行不同的网站，具体取决于使用的域名，我们希望使用 HTML5 应用程序缓存来提高这些网站的性能，以缓存网络字体和其他大型内容，很少更新的文件。

目前，我们正在使用 HTTPS 对完全限定的 URL 进行硬编码，以防万一网站之一使用 SSL。我们的“静态”网站服务器可以同时处理 HTTP 和 HTTPS，所以不要这样做：

```
CACHE MANIFEST
# Cache Version 3198.729

https://static.ourdomain.co.uk/fonts/webfont1.eot
https://static.ourdomain.co.uk/fonts/webfont1.ttf
https://static.ourdomain.co.uk/fonts/webfont1.woff 
```

我们希望能够做到这一点：

```
CACHE MANIFEST
# Cache Version 3198.729

//static.ourdomain.co.uk/fonts/webfont1.eot
//static.ourdomain.co.uk/fonts/webfont1.ttf
//static.ourdomain.co.uk/fonts/webfont1.woff 
```

我们这样做是否可能会遇到任何问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:24:17.877

`//static.ourdomain.co.uk/fonts/webfont1.eot`只是一个[相对 URL](https://www.rfc-editor.org/rfc/rfc3986#section-4.2)。`/fonts/webfont1.eot`在可以接受相对 URL 的情况下，它与 一样是允许的。

# c - Lcov：无法收集分支覆盖率统计信息

> ID：13378640
> 
> 赞同：25
> 
> 时间：2012-11-14T12:14:29.360
> 
> 标签：c, testing, branch, code-coverage, lcov

我用`lcov`来在我的项目中创建覆盖信息。但我只能得到线路覆盖率和功能覆盖率统计信息。

```
lcov version:1.10, gcov version:4.4.5 
```

我使用的命令是：

```
 lcov -d $OSPL_HOME/src -d $OSPL_OUTER_HOME/src  -c -o /work/li/log/lcov-raw.info

lcov -r /work/li/log/lcov-raw.info "*.ll" "*.yy" "*.yy.c" yaccpar "TAO161*" "/usr/include/*"  "*/testsuite/*" -o /work/li/log/lcov.info 
```

在这两个命令之后，我得到的结果是：

```
Deleted 23 files

Writing data to /work/li/log/lcov.info

Summary coverage rate:

  lines......: 45.4% (65087 of 143496 lines)

   functions..: 46.1% (5575 of 12102 functions)

  **branches...: no data found** 
```

所以没有分支覆盖结果。为什么？所以发生了什么事？这怎么可能发生？我在这里很困惑。

在第一个命令之后，我收到了很多这样的警告：

```
geninfo: WARNING: cannot find an entry for ..#..#code#accum.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#at.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#autodef.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#copyof.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#debug.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#define.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#dump.c.gcov in .gcno file,skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#error.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#expand.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#expr.c.gcov in .gcno file,skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#if.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#include.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#io.c.gcov in .gcno file, s kipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#is.c.gcov in .gcno file, s kipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#line.c.gcov in .gcno file,skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#pragma.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#preprocess.c.gcov in .gcnofile, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#set.c.gcov in .gcno file,skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#sharp.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#symtbl.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#undef.c.gcov in .gcno file, skipping file!
 geninfo: WARNING: cannot find an entry for ..#..#code#while.c.gcov in .gcno file , skipping file! 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-23T09:27:02.910

我收到了来自 geninfo 的作者 Peter Oberparleiter 的电子邮件。我得到的答案如下。

LCOV 1.10 默认禁用分支覆盖。您可以通过修改 lcovrc 文件（请参阅 参考资料`man lcovrc`）或通过指定`--rc lcov_branch_coverage=1`运行时间来启用它`lcov/genhtml`。

如果您没有使用 LCOV 1.10 并且仍然没有获得分支覆盖率，则可能是您的 GCC 版本不提供此信息。

（*以上答案被[作者](https://stackoverflow.com/users/1823629/user1823629)错误地添加到问题中。*）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-10T07:28:58.900

上面给出的解决方案：

```
--rc lcov_branch_coverage=1 
```

用于 lcov 和 genhtml，为我工作。

# c# - 在 ViewModel Locator 中向 SimpleIOC 注册 WCF 服务客户端时无法提供端点地址

> ID：13378641
> 
> 赞同：8
> 
> 时间：2012-11-14T12:14:31.340
> 
> 标签：c#, wpf, wcf, mvvm, mvvm-light

我正在借助 MVVM Light Toolkit 4.1.24 开发 WPF 应用程序。这是我的 ViewModel Locator 类。

```
public class ViewModelLocator
    {
        /// <summary>
        /// Initializes a new instance of the ViewModelLocator class.
        /// </summary>
        public ViewModelLocator()
        {
            ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

            if (ViewModelBase.IsInDesignModeStatic)
            {
                // Create design time view services and models
                SimpleIoc.Default.Register<IService1, DesignDataService>();
            }
            else
            {
                // Create run time view services and models
                SimpleIoc.Default.Register<IService1, Service1Client>();
            }

            SimpleIoc.Default.Register<MainViewModel>();
        }

        public MainViewModel Main
        {
            get
            {
                return ServiceLocator.Current.GetInstance<MainViewModel>();
            }
        }

        public static void Cleanup()
        {
            // TODO Clear the ViewModels
            ServiceLocator.Current.GetInstance<MainViewModel>().Cleanup();
        }
    } 
```

在哪里

*   IService1 - 是一个 WCF 服务接口

*   DesignDataService – 为设计目的实现 IService1

*   Service1Client – 实现 IService1 的 WCF 代理类

我有两个问题：

1）在运行应用程序时，我收到类似“无法注册：Service1Client 中找到多个构造函数但没有标记为 PreferredConstructor。”的错误。为此，我在 Service1Client 默认构造函数中添加了“[PreferredConstructorAttribute]”属性，并且应用程序按预期运行。我知道这不是一个好方法，原因有两个

*   这将导致对 SimpleIoc 的依赖
*   每当我更新服务引用时，我都必须手动将此属性添加到默认构造函数中。

那么有没有更好的方法呢？

2) 我想手动将端点地址传递给 Service1Client。我怎样才能做到这一点？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:25:07.730

您可以通过以下方法将端点地址添加到服务客户端。

SimpleIoc.Default.Register(() => new Service1Client("WSHttpBinding_IService", wcfConfig.EndpointUrl));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T11:53:46.277

我有同样的问题。[这篇文章](https://stackoverflow.com/questions/8850106/mvvm-simpleioc-how-to-use-an-interface-when-the-interface-implementation-requir)帮助我做到了这一点。你需要写这样的东西：

```
SimpleIoc.Default.Register<MyServiceImplementation>(() => {
    return new MyServiceImplementation("Hello World");
});

SimpleIoc.Default.Register<IMyService>(() => {
    return SimpleIoc.Default.GetInstance<MyServiceImplementation>();
}); 
```

# php - hijax 不适用于 php 扩展

> ID：13378646
> 
> 赞同：2
> 
> 时间：2012-11-14T12:14:50.763
> 
> 标签：php, jquery, ajax

由于某种原因，当文件具有 php 扩展名时，以下代码不起作用：

```
<ul class="issues">
<li><a href="jobs.php">Jobs</a></li>
<li><a href="town-centres.php">Town Centre</a></li>
</ul>
<div id="input"></div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
(function(){
var wrap = $('#input');
$('ul.issues a').on('click', function(e){
    var href = $(this).attr('href');
    wrap.load(href + ' article');   
    e.preventDefault();
});
})();
 </script> 
```

在本地工作正常，但远程服务器上没有任何显示，除非我将文件扩展名更改为 htm。控制台显示 XHR 已加载。查看[损坏的 PHP 版本](http://www.savellandeilosfuture.org/issues-test.php)和[工作`.htm`版本](http://www.savellandeilosfuture.org/issues.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:12:09.330

问题是 PHP 脚本是什么（或在这种情况下不是）返回......

```
wrap.load(href + ' article'); 
```

这个 jQuery 加载`href`并只获取该`<article>`部分并将其加载到`wrap`元素中。如果您使用[Firebug](https://getfirebug.com/)之类的东西（或任何可以看到使用 AJAX 加载的内容的浏览器调试器），您将看到 PHP 脚本返回以下内容：

```
<div id="content">
<h1>Do new supermarkets really create jobs?</h1>
etc... 
```

版本`.htm`返回的位置：

```
<div id="content">
<article>
<h1>Do new supermarkets really create jobs?</h1>
etc ... 
```

所以你可以看到 PHP 没有回复`<content>`标签 - 因此没有 HTML 被添加到`wrap`元素中

您有 2 个选项来解决问题..

1.  将 jQuery 更改为`wrap.load(href + ' #content');`
2.  更改 PHP 脚本以包含`<article>`

# ruby-on-rails - 管理 AWS 基础设施的知名公司

> ID：13378647
> 
> 赞同：0
> 
> 时间：2012-11-14T12:14:52.580
> 
> 标签：ruby-on-rails, amazon-web-services, rackspace

我正在尝试选择在哪里托管我的 rails 应用程序并且我倾向于 AWS，但我想知道是否有任何知名公司可以管理我在 AWS 上的基础设施，类似于 Rackspace 托管云选项所做的。

如果您想知道如果我需要其他人来管理我的基础架构，为什么我不只使用 Rackspace 托管，原因是我无法证明前期成本是合理的。Rackspace 每月收取 100 美元的固定基础设施管理费用，外加使用实用程序的成本，对于一个小型应用程序，我每月可以轻松运行接近 300 美元的费用，而在 AWS 上，我几乎可以使用他们的免费运行应用程序（至少在开始时）层。如果我能找到一家信誉良好的公司，以与 Rackspace 收费（100 美元）相当的价格提供基础设施管理。我可以两全其美。

顺便说一句，此时自己管理基础设施不是一种选择。我对这个主题的知识为零。在我学习的时候，我没有时间等待。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:02:32.130

您是否考虑过平台即服务？

[Heroku](http://www.heroku.com/)、[Engine Yard](http://www.engineyard.com/)或[Cloud Foundry](http://www.cloudfoundry.com/)将允许您自行部署应用程序，而无需担心在后台运行的基础架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:58:47.033

另外，看看[Scalr](http://scalr.net/)
[工作原理](http://scalr.net/tour/)
[定价](http://scalr.net/pricing/)

# java - 在 Hibernate 命名查询中传递类名 aa 参数

> ID：13378653
> 
> 赞同：3
> 
> 时间：2012-11-14T12:14:58.980
> 
> 标签：java, database, hibernate

我正在使用 Hibernate 从数据库中读取数据我使用了以下命名查询：

```
<query name="getTable">
    select tbl from ? as tbl order by col
    </query> 
```

在 DAO

```
public List<Object> selectTables(String className){

           Query query = session.getNamedQuery("getTable");
           query.setParameter(0, className);
           return (List<Object>)query.list();
    } 
```

当我运行代码时，我得到以下异常

```
14:13:57,463 ERROR SessionFactoryImpl:405 - Error in named query: getTable
org.hibernate.hql.ast.QuerySyntaxException: unexpected token: ? near line 2, column 25 [
    select tbl from ? as tbl order by col

    ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:47:59.943

你不能那样做。占位符 ( `?`) 不仅被 Hibernate 替换为您可能传递的任何参数。HQL 查询被转换为 SQL 准备语句，占位符是该准备语句的参数。

数据库使用准备好的语句来计算查询的执行计划。因此，如果查询甚至不包含表名，就不可能计算出执行计划。您只能将*值*作为参数传递给查询。您不能传递列名或表名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T11:47:32.950

尝试替换 Query for Criteria。

```
 public List<Object> selectTables(Class className){
           Criteria criteria = session.createCriteria(className);
           return (List<Object>)criteria.list();
     } 
```

# php - 向多数组添加值

> ID：13378655
> 
> 赞同：1
> 
> 时间：2012-11-14T12:15:04.440
> 
> 标签：php, arrays

```
<?php
$array = array(array(1,2,3), array(4,2,5), array(5,25,2));
foreach($array as $ar){
  $ar['test'] = 'test';
}
print_r($array); 
```

[http://codepad.org/FclkyyFa](http://codepad.org/FclkyyFa)

为什么这不起作用？我想使用 foreach 并为每个子数组测试值添加。我怎样才能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:18:16.480

您需要将其分配给`array('test' => 'test')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:25:05.427

@air4X 的评论是对的。用于`&`创建对实际数组的引用，然后将值设置为：

```
foreach($array as &$ar) {
    // if you want to create an associative element called 'test'        
    $ar['test'] = 'test'; 
    // if you simply want to add the value 'test' to each array
    $ar[] = 'test';
} 
```

# java - 避免 n+1 急切获取子集合元素关联

> ID：13378656
> 
> 赞同：4
> 
> 时间：2012-11-14T12:15:12.353
> 
> 标签：java, hibernate, jpa, hql

我有以下课程：

```
@Entity
@Table(name = "base")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "DISCRIMINATOR", discriminatorType = DiscriminatorType.STRING)
@ForceDiscriminator
public class Base {
    // ...
}

@Entity
@DiscriminatorValue("foo")
public class Foo extends Base {
    @OneToMany( mappedBy = "foo", cascade=CascadeType.ALL )
    private List<Bar> bars = new ArrayList<Bar>();

    // ...
}

@Entity
public class Bar {
    @ManyToOne (optional = false)
    @JoinColumn(name = "foo_id" )
    private Foo foo;

    @OneToOne
    @JoinColumn(name = "baz_id", nullable = false)
    private Baz baz;

    //...
}

@Entity
public class Baz {
    // ...
} 
```

现在我基本上想加载 all `Base`，但在适用时急切加载栏，所以我使用以下查询：

```
SELECT b FROM Base b LEFT JOIN FETCH b.bars 
```

虽然这可行，但它似乎为 Bar 实体生成了一个 SELECT N+1 问题：

```
Hibernate: /* SELECT b FROM Base b LEFT JOIN FETCH b.bars */ SELECT ...
Hibernate: /* load com.company.domain.Baz */ SELECT ...
Hibernate: /* load com.company.domain.Baz */ SELECT ... 
```

是否可以告诉 hibernate 急切地为子集合中的每个元素加载关联而不诉诸 N+1 选择？

我尝试了以下查询的内容，由于它是一个集合，因此显然不起作用：

```
SELECT b FROM Base b LEFT JOIN FETCH b.bars LEFT JOIN FETCH b.bars.baz
//Results in: illegal attempt to dereference collection [Foo.id.bars] with element property reference [baz] 
```

我也尝试过使用`IN(b.bars) bars`，虽然这允许我引用子集合，但它似乎并没有急切地加载 bar 集合，这是我的目标。

解释为什么会发生这种情况也很好，因为我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T13:50:30.777

如果您想在没有 (n+1) 个选择的情况下检索 Bar 和 Baz，请使用以下 hql。

```
SELECT b FROM Base b LEFT JOIN FETCH b.bars bar LEFT JOIN FETCH bar.baz 
```

这应该只产生一个 sql。

此外，如果您不想获取 'Baz'，只需从 Bar->Baz 'lazy' 建立关联。

默认情况下，JPA 对“@OneToOne”和“@ManyToOne”关联强制执行“eager”获取。所以，你必须明确地让它变得懒惰，如下所示。

```
@Entity
public class Bar {

    @OneToOne
    @JoinColumn(name = "baz_id", nullable = false, fetch=FetchType.Lazy)
    private Baz baz;

    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:10:35.273

我会说在这种情况下改变获取策略可能会有所帮助。文档说：

[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#performance-fetching-batch](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#performance-fetching-batch)

提炼：

> 您还可以启用集合的批量获取。例如，如果每个 Person 都有一个 Cats 的惰性集合，并且当前在 Session 中加载了 10 个人，则遍历所有人员将生成 10 个 SELECT，每次调用 getCats() 一个。如果在 Person 的映射中为猫集合启用批量抓取，Hibernate 可以预取集合：

```
<class name="Person">
    <set name="cats" batch-size="3">
        ...
    </set>
</class> 
```

> 批量大小为 3 时，Hibernate 将在四个 SELECT 中加载 3、3、3、1 个集合。同样，该属性的值取决于特定会话中未初始化集合的预期数量。

我正在使用它并且效果很好。如果我在分页并且总是只选择 20 条记录，那么 batch-size="20" 效果很好。如果我需要超过 20 个，对 DB 的调用仍然会减少

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:20:19.157

我的方法（我的二级实体数量有限且稳定）

首先，让所有 Bars 进入会话：

```
 SELECT bar FROM Bar bar 
```

之后，所有 Bar 实体都将在缓存中，您的查询将能够在没有其他实体的情况下访问它们。

# html - HTML / CSS - 右侧的冻结表格列

> ID：13378663
> 
> 赞同：12
> 
> 时间：2012-11-14T12:15:49.457
> 
> 标签：html, css, css-tables

我在这里找到了固定/冻结左列的解决方案：http: [//jsfiddle.net/emn13/YMvk9/](http://jsfiddle.net/emn13/YMvk9/)

```
 body { font:16px Calibri;}
    table { border-collapse:separate; border-top: 3px solid grey; }
    td {
        margin:0;
        border:3px solid grey; 
        border-top-width:0px; 
        white-space:nowrap;
    }
    div { 
        width: 600px; 
        overflow-x:scroll;  
        margin-left:5em; 
        overflow-y:visible;
        padding-bottom:1px;
    }
    .headcol {
        position:absolute; 
        width:5em; 
        left:0;
        top:auto;
        border-right: 0px none black; 
        border-top-width:3px; /*only relevant for first row*/
        margin-top:-3px; /*compensate for top border*/
    }
    .headcol:before {content: 'Row ';}
    .long { background:yellow; letter-spacing:1em; }​ 
```

但是是否也可以在没有 Javascript 或其他覆盖表的情况下获得**正确**的固定/冻结列？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T12:25:24.673

像下面这样更改css

```
 div { 
            width: auto; 
            overflow-x:scroll;  
            margin-right:5em; 
            overflow-y:visible;
            padding-bottom:1px; 
        }
        .headcol {
            position:absolute; 
            width:5em; 
            right:0;
            top:auto;
            border-right: 0px none black; 
            border-top-width:3px; /*only relevant for first row*/
            margin-top:-3px; /*compensate for top border*/
        }
        .headcol:after{content: 'Row ';} 
```

[**演示**](http://jsfiddle.net/YMvk9/656/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T12:40:11.870

这是你想要的？我只做了一个 rwo。您可以根据需要添加任意数量的行。检查以下 HTML 和样式。

```
<div><table>
        <tr><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td>
    <td class="headcol">1</td></tr>
</table></div>

​

        body { font:16px Calibri;}
        table { border-collapse:separate; border-top: 3px solid grey; }
        td {
            margin:0;
            border:3px solid grey; 
            border-top-width:0px; 
            white-space:nowrap;
        }
        div { 
            width: 600px; 
            overflow-x:scroll; 
            overflow-y:visible;
            padding-bottom:1px;
        }
        .headcol {
            position:absolute; 
            width:5em; 
            right:0;
            top:auto;
            border-right: 0px none black; 
            border-top-width:3px; /*only relevant for first row*/
            margin-top:-3px; /*compensate for top border*/
        }
        .headcol:before {content: 'Row ';}
        .long { background:yellow; letter-spacing:1em; }​ 
```

# ruby - 后台工作人员在 Rails 应用程序中查看通信

> ID：13378664
> 
> 赞同：9
> 
> 时间：2012-11-14T12:16:00.160
> 
> 标签：ruby, views, background-process, resque

假设我有一个带有帖子的博客应用程序。创建帖子后，会创建一个工作人员来处理一些后台操作。我的情况是，在提交帖子表单后，我想显示某种加载消息（gif 加载器等），当工作人员完成时，我想隐藏加载消息并显示工作人员提供的一些数据。我的问题是传达工作人员已完成工作并将其显示在用户前端的最佳方式是什么。工人回调看起来像这样

```
def worker_finish
  #message the user
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T06:30:52.957

我认为你可能错过了拥有后台工作人员的意义，基本上，你试图做的是自我挫败。-- 如果用户提交表单并且您在控制器中排队作业，只是为了让用户等待工作人员开始和完成，您不仅完全完成了控制器本身可以完成的事情，而且您已经完成了使过程变得更加复杂（并且这种类型的功能没有内置到 resque 或 sidekiq 中）。

当卸载要由队列处理的作业时，您希望立即向客户端返回响应，即

```
class PostsController < ApplicationController
  def create
    @post = Post.create(params[:post])
    BackgroundBlogOperation.enque(@post.id)
    respond_with(@post)
  end
end 
```

然后将 BackgroundBlogOperation 类放入队列中，供工作人员通过并完成工作。如果您需要 BackgroundBlogOperation 工作人员在完成后执行其他操作，您可以这样做，但这应该发生在工作本身内，以便工作人员可以负责。

如果您只是在创建帖子后尝试显示和隐藏微调器，而不重新加载页面，只需在单击提交按钮之前显示 javascript 微调器，并确保请求类型为 js（添加 :remote => true 到表单）。然后创建一个 javascript 视图响应，如下所示：

```
class PostsController < ApplicationController
  respond_to :js, :only => [:create]
  def create
    @post = Post.create(params[:post])
    BackgroundBlogOperation.enque(@post.id)
    respond_with(@post)
  end
end 
```

create.js.erb 还可以附加一条消息，告诉他们您在后台执行的任何操作都已排队，如果它比创建帖子或其他内容更复杂的话。

```
$("#spinner").hide(); 
```

现在——虽然你最初问的内容没有任何用途（因为在工作完成时显示和隐藏微调器需要等待控制器完成操作）——在某些情况下向客户端显示该工作已完成处理很有用。

首先让我们定义一个后台处理实际有用的场景。假设您有一个按钮，当单击该按钮时，它将从某个外部 api 中提取数据，并且在从外部站点获取数据后，您正在根据响应执行数据库操作。这将是何时使用后台进程的一个很好的例子。基本上在控制器中，您会执行以下操作：

```
class ApiController < ApplicationController
  respond_to :js, :only => [:create]

  def sync_tweets
    TwitterApiJob.enque(current_user.twitter_username)
    respond_with(message: 'Syncing Tweets')
  end

end 
```

现在，告诉用户推文何时完成同步有点复杂，您有 3 个基本选项：

1) 通过电子邮件通知用户（通常是最差的选项 imo） 2) 使用某种 html5 或支持 websocket 的 rails 服务器来运行 rails，并通过 websocket 向客户端发送推送，这虽然很酷，但在大多数情况下是矫枉过正和超出本回复范围。如果您想查看您的选项，Google 会跟踪 websocket 推送。3）在大多数情况下，IMO 最佳选择，创建一个通知模型来处理各种用户通知，并在您的工作中，在工作完成后，执行类似的操作

```
Notification.create(:user_id => user.id, :message => 'Sync has finished', type => 'sync_complete') 
```

然后，用户请求的下一页，在标题工具栏或任何地方，我会注意到用户有未读通知，以提醒用户点击它。

---我也认为在您的帖子中您提到您正在使用resque。我尝试了 resque，它很不错，但我发现它在生产中调试过于复杂，而且它使用了疯狂的内存——如果你还没有的话，我建议你检查一下 sidekiq，它也使用 redis，但使用起来要快得多线程：

[https://github.com/mperham/sidekiq](https://github.com/mperham/sidekiq)

恕我直言，它更快、更干净、更容易设置。

# java - 路由器没有输入时的HttpUrlConnection超时

> ID：13378677
> 
> 赞同：0
> 
> 时间：2012-11-14T12:16:34.083
> 
> 标签：java, httpurlconnection

我正在使用`HttpUrlConnection`连接到服务器。问题是我通过wifi连接到路由器。因此，我在我的设备中看到了网络。但是路由器没有连接到任何互联网输入，并且连接进入无限循环。这是代码 private String getHttpResponse(final String srcUrl) {

```
 HttpURLConnection urlConnection = null;
    FileOutputStream fos = null;
    try {
        URL url = new URL(srcUrl);
        urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.setConnectTimeout(TIMEOUT);
        urlConnection.setReadTimeout(TIMEOUT);
        urlConnection.setRequestProperty("Content-Type", "application/json");
        mETag = readETagFromPrefForCategory();

        urlConnection.setRequestProperty("If-None-Match", mETag);

        Log.v("abcd","####### before connection ######");

        urlConnection.connect();

        Log.v("abcd","####### after connection ######");
        mETag =  urlConnection.getHeaderField("ETag");

        if (urlConnection.getResponseCode() == HttpURLConnection.HTTP_NOT_MODIFIED) {
            Log.v("online","not modifed");
            return null;
        }

        if (urlConnection.getResponseCode() != HttpURLConnection.HTTP_OK) {
            Log.w(TAG, "Bad response [" + urlConnection.getResponseCode() + "] from (" + srcUrl + ")");
            return null;
        } 

        BufferedReader rd = new BufferedReader(new InputStreamReader(
                urlConnection.getInputStream()));

        fos = createJson();

        StringBuilder sb = new StringBuilder();

        String line = "";

        while ((line = rd.readLine()) != null) {
            sb.append(line);
            if(fos != null)fos.write(line.getBytes());
        }
        if(fos != null)writeETagForCategory(mETag);

        if (rd != null) {
            Log.v("online","buffered reader closed");
            rd.close();
        }

        return sb.toString();

    } catch (UnknownHostException e) {
        Log.e("Error: ", "Message - " + e.getMessage());
    } catch (MalformedURLException e) {
        Log.e("Error: ", "Message - " + e.getMessage());
    } catch (IOException e) {
        Log.e("Error: ", "Message - " + e.getMessage());
    } finally {
        if (fos != null) {
            try {
                fos.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
    return null;
} 
```

# c# - c#中的json序列化linq结果

> ID：13378681
> 
> 赞同：-1
> 
> 时间：2012-11-14T12:16:49.723
> 
> 标签：c#, asp.net, .net, json

我有一些返回 linq 结果的代码（我什至尝试添加`ToList()`）

我看合集OK

![在此处输入图像描述](../Images/e1e0a7b666e69bf65153f5df548b0f35.png)

但是当我跳出函数体时，又增加了一个抽象层

![在此处输入图像描述](../Images/7e11c0fc92c964d87216a96a18d04a36.png)

最后，当我向客户返回结果时

它得到：

"{ 应用程序 = System.Collections.Generic.List `1[\u003c\u003ef__AnonymousType1`4[System.String,System.String,\u003c\u003ef__AnonymousType0`4[System.String,System.String,System.String,System.String],System.Object]] , 状态 = 成功 }"

如何正确序列化 linq 结果？

**事先更新** ，它曾经在不调用的情况下工作`JSON()`

```
 public object GetAppsData()
    {

        var appsData = new List<AppData>();
        using (IDataReader dr = DatabaseFactory.CreateDatabase().ExecuteReader("usp_AppsData_GetAll"))
        {

            while (dr.Read())
            {
                appsData.Add(new AppData()
                {
                    AppGuid = (Guid)dr["AppGuid"],
                    AppName = (string)dr["AppName"],
                    ClientAppID = dr["ClientAppID"] == DBNull.Value ? null : (string)dr["ClientAppID"],
                    Url = dr["Url"] == DBNull.Value ? null : (string)dr["Url"],
                    DisplayName = dr["DisplayName"] == DBNull.Value ? null : (string)dr["DisplayName"],
                    AppDesc = dr["AppDesc"] == DBNull.Value ? null : (string)dr["AppDesc"],
                    PrivacyPolicyUrl = dr["PrivacyPolicyUrl"] == DBNull.Value ? null : (string)dr["PrivacyPolicyUrl"],
                    TermsOfUseUrl = dr["TermsOfUseUrl"] == DBNull.Value ? null : (string)dr["TermsOfUseUrl"],
                    //Platform = dr["Platform"] == DBNull.Value ? null : (string)dr["Platform"],
                    //MaxVersion = dr["MaxVersion"] == DBNull.Value ? null : (string)dr["MaxVersion"],
                    LocalizationKey = dr["LocalizationKey"] == DBNull.Value ? null : (string)dr["LocalizationKey"],
                    Compatibility = dr["Compatibility"] == DBNull.Value ? null : jss.Deserialize<object>((string)dr["Compatibility"])

                });

            }
        }

        var appsDataJson = appsData.Select(GenerateAppsDataClientResponse);

        return new { apps = appsDataJson, Status = "succeeded" };
    }

    private object GenerateAppsDataClientResponse(AppData a)
    {
        object result;
        if (a.Compatibility == null)
        {
            result = new
            {
                id = a.ClientAppID,
                url = a.Url,
                optionsDialog = new
                {
                    displayName = a.DisplayName,
                    appDesc = a.AppDesc,
                    privacyPolicyUrl = a.PrivacyPolicyUrl,
                    termsOfUseUrl = a.TermsOfUseUrl
                }
            };
        }
        else
        {
            // this line throws NullReferenceException
            result = new
            {
                id = a.ClientAppID,
                url = a.Url,
                optionsDialog = new
                {
                    displayName = a.DisplayName,
                    appDesc = a.AppDesc,
                    privacyPolicyUrl = a.PrivacyPolicyUrl,
                    termsOfUseUrl = a.TermsOfUseUrl
                },
                compatibility = a.Compatibility
            };
        }
        return result;
    }
} 
```

和

```
 [HttpGet]
    public ActionResult GetAppsData()
    {
        try
        {
           AppsDataManager appsData = new AppsDataManager();
           object adr =  appsData.GetAppsData();
           return this.JsonpOptional(adr);
        }
        catch (Exception ex)
        {
            Log.Application.Error("ClientDataController.GetSettings", ex);
            return this.JsonpOptional(new { Status = "failed", Reason = ex.Message });
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:18:54.560

`new`您在调试器中看到的神秘数据类型只是您使用关键字返回的匿名类的类名。

您的主要问题是，您必须返回 a`JsonResult`而不是普通对象。并且不要忘记指定`JsonRequestBehavior.AllowGet`. 否则在将 JSON 数据返回到 HTTP GET 请求时会出现异常：

```
return Json(new { apps = appsDataJson, Status = "succeeded" },
                 JsonRequestBehavior.AllowGet); 
```

# android - 嵌入 Cordova WebView，Receiver 未注册

> ID：13378688
> 
> 赞同：6
> 
> 时间：2012-11-14T12:17:05.167
> 
> 标签：android, cordova, phonegap-plugins, android-fragmentactivity

我已将 Cordova WebvView 作为组件嵌入到我的项目中，除了一件事外一切正常；当按下后退按钮时，我在 LogCat 上收到一个错误，上面写着“接收器未注册！” 我不认为我已经注册了接收器。[这里](https://github.com/stevengill/CordovaActionView)还有一个 GitHub 上的示例项目。当我运行这个应用程序时，我也会遇到同样的错误。

我想要做的是，将 Cordova WebView 嵌入到我的 Android 项目中并运行一些 javascript 函数。

这是我的主要活动；

```
public class MainNativeViewController extends FragmentActivity implements CordovaInterface,
    JavaScriptListener {

FragmentTransaction transaction;
RelativeLayout childBrowser;
RelativeLayout dialogBox;
RelativeLayout emailComposer;

private ExecutorService threadPool;

CordovaWebViewFragment cordovaWebViewFragment;

public CordovaWebView cordovaWebView;

public LayoutInflater inflater;
CordovaPlugin mActivityResultCallback;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_container);

    overridePendingTransition(R.anim.fade_in, R.anim.fade_out);

    threadPool = Executors.newCachedThreadPool();

    cordovaWebView = SingleTonCordovaWebView.getCordovaWebView(this);
    cordovaWebView.loadUrl("file:///android_asset/www/invoke_native_view.html");

    FragmentManager manager = getSupportFragmentManager();

    ListFragment listFragment = new ListFragment();

    manager.beginTransaction().add(R.id.fragment_container, listFragment).commit();
}

@Override
public void showFragment(String fragmentName) {

    /*
     * This method is used to create and replace a fragment to the
     * container. according to name passed through here.
     */

    transaction = getSupportFragmentManager().beginTransaction();
    transaction.setCustomAnimations(R.anim.slide_in_right, R.anim.slide_out_left,
            R.anim.slide_in_left, R.anim.slide_out_right);

    if (fragmentName.equals("error")) {
        DialogCreator dialog = new DialogCreator(this);
        dialog.createDialog("Error !", "Fragment Name is wrong,", "Check fragment name", false);
    } else {
        // fragment name is ignored for different cases, it will be used for
        // further proporties.
        // Just checking out the error in the case its not right parameter.

        NativeViewTestFragment testFragment = new NativeViewTestFragment(fragmentName);

        transaction.replace(R.id.fragment_container, testFragment);
        transaction.addToBackStack(null);
        transaction.commit();
    }
}

@Override
protected void onNewIntent(final Intent intent) {
    super.onNewIntent(intent);

    // Forward to plugins
    if ((this.cordovaWebView != null) && (this.cordovaWebView.pluginManager != null)) {
        this.cordovaWebView.pluginManager.onNewIntent(intent);
    }
}

@Override
public void cancelLoadUrl() {

}

@Override
public ExecutorService getThreadPool() {
    return threadPool;
}

@Override
public Activity getActivity() {
    return this;
}

@Override
public Context getContext() {
    return this;
}

@Override
public Object onMessage(final String id, final Object data) {
    // return getCordovaFragment().onMessage(id, data);
    return null;
}

@Override
public void setActivityResultCallback(CordovaPlugin arg0) {
    // TODO Auto-generated method stub

}

@Override
public void startActivityForResult(CordovaPlugin plugin, Intent intent, int requestCode) {
    mActivityResultCallback = plugin;
    startActivityForResult(intent, requestCode);
}

@Override
/**
 * Called when the system is about to start resuming a previous activity.
 */
protected void onPause() {
    super.onPause();

    // Send pause event to JavaScript
    this.cordovaWebView.loadUrl("javascript:try{cordova.fireDocumentEvent('pause');}catch(e){console.log('exception firing pause event from native');};");

    // Forward to plugins
    if (this.cordovaWebView.pluginManager != null) {
        this.cordovaWebView.pluginManager.onPause(true);
    }
    threadPool.shutdown();
    threadPool = null;
}

@Override
/**
 * Called when the activity will start interacting with the user.
 */
protected void onResume() {
    super.onResume();

    threadPool = Executors.newCachedThreadPool();

    if (this.cordovaWebView == null) {
        return;
    }

    // Send resume event to JavaScript
    this.cordovaWebView
            .loadUrl("javascript:try{cordova.fireDocumentEvent('resume');}catch(e){console.log('exception firing resume event from native');};");

    // Forward to plugins
    if (this.cordovaWebView.pluginManager != null) {
        this.cordovaWebView.pluginManager.onResume(true);
    }       
}

@Override
/**
 * The final call you receive before your activity is destroyed.
 */
public void onDestroy() {
    super.onDestroy();
    if (cordovaWebView.pluginManager != null) {
        cordovaWebView.pluginManager.onDestroy();
    }

    if (this.cordovaWebView != null) {

        // Send destroy event to JavaScript
        this.cordovaWebView
                .loadUrl("javascript:try{cordova.require('cordova/channel').onDestroy.fire();}catch(e){console.log('exception firing destroy event from native');};");

        // Load blank page so that JavaScript onunload is called
        this.cordovaWebView.loadUrl("about:blank");

        // Forward to plugins
        if (this.cordovaWebView.pluginManager != null) {
            this.cordovaWebView.pluginManager.onDestroy();
        }
    } else {
        // this.endActivity();
    }
}
} 
```

**编辑：**这是 LogCat 输出；

```
11-23 12:25:36.117: E/AndroidRuntime(9645): FATAL EXCEPTION: main

11-23 12:25:36.117: E/AndroidRuntime(9645): java.lang.RuntimeException: Unable to     destroy activity     {org.apache.cordova.example/okan.apps.nativeview.MainNativeViewController}:     java.lang.IllegalArgumentException: Receiver not registered:     org.apache.cordova.Device$1@45391938
11-23 12:25:36.117: E/AndroidRuntime(9645):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3655)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3673)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at android.app.ActivityThread.access$2900(ActivityThread.java:125)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at android.os.Looper.loop(Looper.java:123)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at android.app.ActivityThread.main(ActivityThread.java:4627)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at java.lang.reflect.Method.invokeNative(Native Method)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at java.lang.reflect.Method.invoke(Method.java:521)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at dalvik.system.NativeStart.main(Native Method)
11-23 12:25:36.117: E/AndroidRuntime(9645): Caused by: java.lang.IllegalArgumentException: Receiver not registered: org.apache.cordova.Device$1@45391938
11-23 12:25:36.117: E/AndroidRuntime(9645):     at android.app.ActivityThread$PackageInfo.forgetReceiverDispatcher(ActivityThread.java:793)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:814)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:331)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at org.apache.cordova.Device.onDestroy(Device.java:98)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at org.apache.cordova.api.PluginManager.onDestroy(PluginManager.java:317)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at okan.apps.nativeview.MainNativeViewController.onDestroy(MainNativeViewController.java:204)
11-23 12:25:36.117: E/AndroidRuntime(9645):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3642)
11-23 12:25:36.117: E/AndroidRuntime(9645):     ... 11 more 
```

**编辑：**

我最终找到了解决方案。我在片段中使用 Cordova Web 视图，我将它从片段中移出并将其放入与片段容器相同的 xml 中。现在它可以正常工作了。在 GitHub 的示例项目中也是如此，CordovaWebView 在 FrameLayout 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-06T17:01:42.843

我通过将以下内容添加到 onDestroyView() 在我的片段中解决了这个问题

```
 @Override
    public void onDestroyView() {
        super.onDestroyView();
        mCordovaWebView.handleDestroy();

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:23:31.107

您不需要自己实现整个销毁流程，您可以使用以下内容：

```
public void onDestroy() {
  LOG.d("Destroying the View", "onDestroy()");
  super.onDestroy();

  if (this.cwv != null) {
    this.cwv.handleDestroy();
  }
} 
```

希望这可以帮助。

# c - 使用 fork() 执行 if/else if/else

> ID：13378691
> 
> 赞同：3
> 
> 时间：2012-11-14T12:17:22.220
> 
> 标签：c, operating-system, fork

我试过实现一个操作系统程序。这是代码：

```
#include<sys/types.h>
#include<stdio.h>
#include<unistd.h>

int main()
{
    pid_t pid, pid1;

    pid = fork();

    if(pid<0)
    {
            fprintf(stderr,"Fork Failed");
            return 1;
    }

    else if(pid == 0) /* child process */
    {
            pid1 = getpid();
            printf("child: pid = %d\n",pid);
            printf("child: pid1 = %d\n",pid1);

    }

    else   /* parent process */
    {
            pid1 = getpid();
            printf("parent: pid = %d\n",pid);
            printf("parent: pid1 = %d\n",pid1);

    }

    return 0;
} 
```

及其o/p：

```
parent: pid = 1836
parent: pid1 = 1835
child: pid = 0
child: pid1 = 1836 
```

有人可以解释一下它是如何工作的，即代码中编写的 // 语句的`if`执行顺序`else-if`。`else`我认为一旦`else if`条件变为真`else`，则不执行部分，但是在这里它已经执行了父进程部分，即`else`部分，然后是子部分.....怎么会？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:32:27.030

您应该阅读[fork()](http://linux.die.net/man/2/fork)。一旦你点击了一个`fork()`语句，第二个进程就会启动，它拥有父进程所有内容的副本，但它可以运行单独的执行，并且它看到的返回与父进程看到的`fork`不同。

```
 int main()
 {
   pid_t pid, pid1;
                   <--- up to here you have one process running
   pid = fork();   <--- when this returns you have two processes:
                          parent has pid = child's pid               child has pid = 0

   if(pid<0)       <--- child and parent both check this, it's not true so they move on
   {
     ....
   }
   else if(pid == 0)<--- this is true for the child, not the parent
   {
     ....           <--- child will now execute this code
   }
   else             <-- nothing else was true for the parent so it sees this
     ....           <-- and executes this code 
```

所以是的，你是对的，一旦你点击`if`, 或 the `else if`，`else`你就不会*在单个进程的 execution 中*进入代码的另一个分支。您看到`else if`和 是`else`因为您有两个进程正在运行。

请注意`pid1`'s 的不同之处，因为`getpid()`返回的是哪个进程正在运行该代码，并且您可以看到您有两个不同的进程，一个选择`else if`另一个选择`else`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T12:20:56.310

做`man fork`

fork 实际上返回`zero`子进程 id 和`non-zero`父进程意味着子进程的实际进程 id 返回给父进程

之后`else if(pid ==0 ) {...}`是子进程

并且`else {...}`是父进程。

fork 的基本含义是创建新的进程。

如果 main 调用一个`fork()`，那么只有一个子被创建，它有自己的地址空间。就在 fork 调用下方，父进程和子进程的所有语句都是相同的。

使用fork创建进程意味着这两个是独立的进程`parent`，`child`默认情况下它们之间不共享任何数据

但是在您的情况下，在 fork 调用之后这两个是独立的，因此这两个进程的执行顺序是未指定的。你可能会得到这些东西：

```
1\. parent executed and program terminates
parent: pid = 1235
parent: pid1 = 1234

2\. child executed then parent and then program terminates :
child : pid = 0
child :pid1 = 1235
parent : pid = 1235
parent :pid1 = 1234 
```

如果你想确保孩子必须先执行，然后父母应该退出。在父代码中放一行`wait(NULL);`作为第一条语句，`else{..}` 这意味着父代码将等到子代码终止。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T12:28:12.173

fork() 创建一个新进程，该进程独立于原始进程执行。

您的新子进程运行该`else if`部分。

您现有的父进程运行该`else`部件。

您的子进程和父进程之间的执行顺序不是确定性的，它们现在是不同的进程，操作系统将安排它们运行，但内核感觉如何。父进程或子进程首先运行其代码可能或多或少是随机的。

你甚至可以让孩子和父母的 printfs 交错。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T12:20:28.433

有两个不同的进程正在运行您的程序。调用后`fork`，以下指令有两次执行，它们的值不同`pid`。所以`else if`和`else`部分都被执行，每个都由两个进程之一执行。

# c# - 如果中间发生页面更改，AJAX 请求/响应的数据会发生什么

> ID：13378693
> 
> 赞同：2
> 
> 时间：2012-11-14T12:17:26.560
> 
> 标签：c#, javascript, jquery, vb.net, asynchronous

这是预期的简单场景。

*   在我的页面“page.aspx”上，jquery Ajax 在 vb.net 中发布了一条到 getData.aspx 的指令
*   getData.aspx 中的 Page_Load 方法读取指令并转到数据库，然后将大量数据作为 JSON 返回到字符串变量“myJson”
*   然后 Context.Response.Write(myJason)

*   然后 ajax 读取在 getData.aspx 中创建的字符串

我的问题是，数据会发生什么？

1.  在数据库获取的中间——数据去哪里了，vb函数完成了吗？
2.  而 ajax 正在读取 Context.Response.Write(myJason)？

数据不能凭空消失吗？

如果没有异常并且 Context.Response.Write("result") 在 vb.net 中完成，但 ajax 没有完成读取响应，因为该人刷新了页面，所以它没有被使用，它会发生什么？

总之，如果请求它的页面重定向，响应会发生什么。反应不能凭空消失吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:33:11.787

> 数据会发生什么
> 
> 在数据库获取的中间——数据去哪里了，vb函数完成了吗？

取决于 vb 函数中的内容。SQL 查询肯定会完成。一旦服务器尝试向客户端发送数据（这并不总是在下一个响应期间。如果响应被缓冲，则写入），该过程将失败（将引发异常）您的所有数据都可用于垃圾收集

> 而 ajax 正在读取 Context.Response.Write(myJason)？

客户端上只有部分 JSON 内容可用

> 数据不能凭空消失？

服务器端，它将被垃圾收集。所以，是的，它会化为乌有。

# jquery - 使用 jQuery 添加另一个 div

> ID：13378695
> 
> 赞同：2
> 
> 时间：2012-11-14T12:17:30.987
> 
> 标签：jquery, append, prepend

我正在遍历 XML 文件中的每个相关标签并执行此代码。

```
$('<div class="product_image"></div>').html('<a href="'+url+'"><img src='+urlZoomImage+' /></a>').appendTo('#content');
$('<div class="product_title"></div>').html('<a href="'+url+'">'+title+'</a>').appendTo('#content'); 
```

我想用一个名为 product_box 的 div 将 product_image 和 product_title 包围起来，如下所示：

```
<div id="content">
  <div class="product_box">
    <div class="product_image">My image code</div>
    <div class="product_title">My title code</div>
  </div>
</div> 
```

只有内容 div 是用 HTML 编写的，它必须保持这样（我不能在其中编写 product_box 代码，因为它是在每次成功查找时生成的）。我该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:20:53.743

当您使用 jQuery 创建 HTML 元素时，您很容易迷失在代码中。尝试将单独的元素保存在变量中，并在初始化后排列它们。像这样：

```
var div_box = $('<div></div>').addClass('product_box');
var div_image = $('<div></div>').addClass('product_image').html('<a href="'+url+'"><img src='+urlZoomImage+' /></a>');
var div_title = $('<div></div>').addClass('product_title').html('<a href="'+url+'">'+title+'</a>');
$('#content').append(div_box.append(div_image).append(div_title)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:22:36.453

只需使用相同的语法创建`.product_box:`元素，然后将其他内容附加到*该*元素，而不是`#content`元素。

```
var product_box = $('<div />', {'class' : 'product_box'}).appendTo('#content');
$('<div class="product_image"></div>').html('<a href="'+url+'"><img src='+urlZoomImage+' /></a>').appendTo(product_box);
$('<div class="product_title"></div>').html('<a href="'+url+'">'+title+'</a>').appendTo(product_box); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:22:55.710

```
var box = $('<div class="product_box"></div>');
var product_image = $('<div class="product_image"></div>').html('<a href="'+url+'"><img src='+urlZoomImage+' /></a>');
var produc_title = $('<div class="product_title"></div>').html('<a href="'+url+'">'+title+'</a>');

box.append(product_image,product_title).appendTo('.content'); 
```

[参考](http://api.jquery.com/append/)

# c# - 在 WCF 数据服务中的实体上公开其他属性

> ID：13378698
> 
> 赞同：3
> 
> 时间：2012-11-14T12:17:41.753
> 
> 标签：c#, asp.net, entity-framework, wcf-data-services

我觉得我可能在这里遗漏了一些关键（*或只是简单*）的东西，但是我无法让它工作。

* * *

鉴于我创建了一个 ASP.NET (.NET 4.0) Web 应用程序项目，我在其中托管了一个 WCF 数据服务。我已经从现有数据库中生成了 POCO 实体的 EF 5.0 模型，并且像往常一样，实体类是`partial`.

我想，

> 哎呀，我将“扩展”这些部分类以在数据服务中公开其他（*非持久的、计算*的）属性^(* 。)

** 为简洁起见，让我们假设一个`Person`实体，我想向其添加一个`FullName`连接`FirstName`和的属性`LastName`。*

无论如何，我继续`partial`上课（*当然在同一个命名空间中*）

```
public partial class Person {
    public string FullName {
        get { return this.FirstName + " " + this.LastName; }
    }
} 
```

但是，当我`Person`在服务中查询实体时，没有`FullName`. 当我查询服务时`$metadata`，没有定义`FullName`.

需要做什么（*如果有的话*）来支持这一点？

* * *

**笔记**

*   所有实体都可以通过`config.SetEntitySetAccessRule("*", EntitySetRights.All);`
*   我尝试使用各种属性进行装饰，但没有成功，包括属性`EdmScalarPropertyAttribute`和`DataMemberAttribute`属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:01:45.793

除非它在 ​​.NET 4.5 中改变（我没看过），否则我认为这行不通。`DataService<T>`非常有限。它甚至不支持所有 EF 功能。数据服务本身非常灵活，[您可以定义一个完全自定义的服务来返回您想要的任何内容](http://blogs.msdn.com/b/alexj/archive/2010/01/04/creating-a-data-service-provider-part-1-intro.aspx)。但是，您不会获得 EF 上下文的“自动”映射。

因此，不幸的是，您必须在“简单但有限”和“困难但灵活”之间做出选择，两者之间几乎没有任何区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:32:48.263

还有另一种方法，通过使用 POCO，正如这篇出色的帖子中所解释的那样：http: [//www.codeproject.com/Articles/514598/Understanding-OData-v3-and-WCF-Data-Services-5-x](http://www.codeproject.com/Articles/514598/Understanding-OData-v3-and-WCF-Data-Services-5-x) （转到使用 POCO 创建 WCF 数据服务部分）

基本上它是这样描述的：

您可以使用以下属性装饰您的 POCO 实体：

```
[DataServiceEntity]
[DataServiceKey("Id")]
public class MyClass
{
     public int Id { get; set; }
} 
```

然后创建一个公开实体集合的静态 IQueryable<> 成员的类：

```
public class MyClassesDataSource
{

    public static IQueryable<MyClass>
    {
         get
         {
             ... // You can access your EF context here
         }
    }
} 
```

最后，不是通过派生来创建服务，`DataService<YouObjectContext>`而是从`DataService<MyClassesDataSource>`

现在我试图弄清楚在该数据源中处理 EF 上下文的最佳方法是什么:)

# c# - Unix / SharpSSH - sshExec.RunCommand(@"chmod 666...) 没有改变文件的权限

> ID：13378699
> 
> 赞同：0
> 
> 时间：2012-11-14T12:17:43.753
> 
> 标签：c#, unix, sharpssh

我正在使用 SharpSSH 将文件上传到远程机器：

```
public override void WriteFile(string directoryName, string fileName, string localFilePath) {
    sftp.Put(localFilePath, directoryName + "/" + fileName);
} 
```

问题是文件的权限是rw-r-----。这可以防止接收应用程序将文件移动到将要处理它的另一个文件夹。我在另一台本地安装在我的桌面（虚拟机）上的 unix 机器上对此进行了测试，但是文件的权限设置为 rwxrwxrwx。
使用同一用户使用 WinSCP 传输文件时，文件的权限设置为 rwxrwxrwx。我发现 WinSCP 被配置为提供这些过于广泛的权限，所以我想也这样做。我添加了这一行。

```
public override void WriteFile(string directoryName, string fileName, string localFilePath) {
    sftp.Put(localFilePath, directoryName + "/" + fileName);
    sshExec.RunCommand(@"chmod 666 " + directoryName + "/" + fileName);
} 
```

但它不会更改文件的权限。我是否错误地运行了命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:37:39.613

命令的输出是什么？可能是您没有运行 chmod 的权限？尝试“sudo chmod 666”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:46:13.697

如果您正在运行使用“sudo”作为 ubuntu 的 SO，除非您编辑 sudoers 文件并允许 chmod 在没有 sudo 密码的情况下工作，否则您将无法执行该操作。

**检查这个**：[没有密码的Sudo](http://maestric.com/doc/unix/ubuntu_sudo_without_password)

此外，使用其他 RunCommand 重载通过引用 stdOut 来获取命令的输出：

```
string stErr = string.Empty;
string stdOut = string.Empty;
Result = Ssh.RunCommand("@"chmod 666 " + directoryName + "/" + fileName",ref stdOut, ref stErr); 
```

# c# - 汇编混淆和受保护的成员

> ID：13378702
> 
> 赞同：0
> 
> 时间：2012-11-14T12:17:56.257
> 
> 标签：c#, .net, obfuscation

我们有一个核心程序集，我们希望对其进行混淆处理并提供给 3rd 方开发人员。我看过的大多数混淆工具都提到它会混淆反编译器和反射器的内部结构，但公共方法和属性的名称保持原样（这是有道理的）。但是“受保护”成员呢？

假设我有一个基类，其中包含一些很酷的辅助方法和属性，我想让 3rd 方开发人员可以利用它，以便他们可以简单地从我的基类继承并拥有一些已经到位的管道为他们。显然，如果它被混淆器弄乱了，这将无济于事。所以我的问题是，这些混淆器工具可以做什么？你能指定它也不是乱码受保护的方法吗？或者，您可以配置哪些是乱码，哪些不是？我没有使用 .NET 中的混淆器的经验，所以我正在尝试学习所有细节，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:25:41.513

我已经为 .net 使用了几个混淆器，它们都没有混淆公共类中受保护的成员名称，这是有道理的，因为它可能会破坏您的应用程序。混淆的整个想法是让您的应用程序行为和公共 API 与混淆之前相同。

此外，大多数混淆器允许您从混淆中排除某些非公共类/成员（例如使用自定义属性） - 有时当您使用反射、IoC 容器进行依赖注入等时可能需要这样做。

# java - 为什么静态块中不允许静态字段声明？

> ID：13378710
> 
> 赞同：2
> 
> 时间：2012-11-14T12:18:35.387
> 
> 标签：java, swing, awt

请考虑以下代码，该代码将用于计算 a 的像素宽度`String`：

```
 public class ComponentUtils {
      static {
         Font font = new Font("Verdana", Font.BOLD, 10);
         FontMetrics metrics = new FontMetrics(font) {
        };
      }

    public static String calculateWidthInPixels(String value) {
       //Using the font metrics class calculate the width in pixels 
      }
} 
```

如果我将`font`and声明`metrics`为 type `static`，编译器不会让我这样做。为什么这样 ？如何初始化`font`and`metrics`一次并计算内部`calculateWidthInPixels`方法的宽度？

PS：以下主类始终按预期工作，并以像素为单位给出宽度。

```
public class Main  {

  public static void main(String[] args) {
        Font font = new Font("Verdana", Font.BOLD, 10);
        FontMetrics metrics = new FontMetrics(font){

        };
        Rectangle2D bounds = metrics.getStringBounds("some String", null);
        int widthInPixels = (int) bounds.getWidth();
    System.out.println("widthInPixels = " + widthInPixels);
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:23:05.133

编译器确实允许您这样做。但是，它不允许您从方法访问您在其中声明的变量，因为它们的可见性仅限于该静态块。

您应该将它们声明为静态变量，如下所示：

```
private static final Font FONT = new Font(...); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T12:22:38.530

您必须在类范围内声明字段，而不是在静态初始化块中：

```
public class ComponentUtils {
    private static Font FONT;
    private static FontMetrics METRICS;

    static {
        FONT= new Font("Verdana", Font.BOLD, 10);
        METRICS= new FontMetrics(font) {};
    }

    public static String calculateWidthInPixels(String value) {
       //Using the font metrics class calculate the width in pixels 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T12:20:41.950

您必须将`font`and`metrics`字段设为静态：

```
 public class ComponentUtils {
      static Font font;
      static FontMetrics metrics;

      static {
         font = new Font("Verdana", Font.BOLD, 10);
         metrics = new FontMetrics(font) {
        };
      }

    public static String calculateWidthInPixels(String value) {
       //Using the font metrics class calculate the width in pixels 
      }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T12:23:02.413

块中的声明仅具有该块的名称范围。即使它是全球性的，您也无法访问它。

# build-automation - 将构建工具注入 eclipse cdt

> ID：13378715
> 
> 赞同：-1
> 
> 时间：2012-11-14T12:18:46.103
> 
> 标签：build-automation, eclipse-cdt, auto-generate, xilinx, prebuild

我想将我的文件转换为 .h，然后运行构建。我该怎么做（特别是在 Xilinx SDK 12.4 中，它说它是 eclipse 版本：3.5.1.R35x 和 cdt 版本：6.0.0.201005121341）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:48:11.850

在项目属性中，我发现`Settings -> Build Steps`了可以找到`pre-build steps`命令的位置。例如，我添加了`xxd -i ../src/homepage.html ../src/homepage.h`和

```
pre-build:
    -xxd -i ../src/homepage.html ../src/homepage.h 
```

已出现在 make 文件中

每次构建任何内容时都会调用转换，即使 html 没有更改。到目前为止，这对我来说没什么大不了的。但是，它可以让您改进答案。

# java - JMock 和 Spring 3 入门

> ID：13378721
> 
> 赞同：0
> 
> 时间：2012-11-14T12:19:08.413
> 
> 标签：java, spring, junit, jmock

我已经开始学习 JMock。我的目标是为 Spring 应用程序（即控制器和域类）编写 JUnit 测试。在控制器中，来自数据库和其他服务的数据被放入模型中。我需要确保数据对于测试是持久的，所以基本上我需要在测试之前将测试数据放入数据库，然后将其删除。我想这可以用模拟对象来完成，而不是自动装配真正的 bean。

我已经用谷歌搜索了。有些页面说只能模拟接口。有人说所有对象都可以模拟。甚至有人说不应该嘲笑 DAO。我很困惑。

谁能告诉我，JMock 在 Spring 应用程序测试中是否必不可少以及从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:47:36.890

什么时候需要模拟

*   您想在没有任何持久存储的情况下即时构建数据对象并在测试期间使用它。
*   你想模拟一个操作而不实际运行它。

在您的情况下，您有测试数据源，除了在测试前阶段加载数据并在测试后阶段清除数据。因此，您不需要为此目的进行嘲笑。

如果您想模拟对某个控制器的调用而不调用控制器中的实际代码，则需要模拟。

我们在哪里做类似的事情

*   我们的测试数据是 JSON 格式，并在我们的测试套件启动时（使用自定义加载器）加载到内存中的 HSQL DB 中。
*   我们的外部服务客户端被模拟，因此我们在测试期间不会调用服务，而是返回模拟的响应。
*   在测试结束时，HSQL DB 被简单地丢弃，因此无需清除测试数据。

HTH。

# c# - C# .NET 中任意长的 Parallel.For 循环

> ID：13378725
> 
> 赞同：2
> 
> 时间：2012-11-14T12:19:31.843
> 
> 标签：c#, .net, parallel-processing, task-parallel-library

Parallel.For 允许循环最大迭代为 long.MaxValue

```
Parallel.For(long fromInclusive, long toExclusive, Action<long> body)
{
} 
```

但是如果我需要执行一个迭代次数比 long.MaxValue 多得多的并行循环怎么办？

EG 我有一个函数，它以 BigInteger 的形式返回所需的迭代次数（因为 long 和 ulong 不够大）。

我是否必须“推出自己的”Parallel.For 实施。我的直觉是，这将是不好的做法！

编辑：基于各种评论......我想我已经咬得比我能咀嚼的还多！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:28:00.387

`Int64.MaxValue`是 9,223,372,036,854,775,807。

如果您需要执行更多迭代，那么您确实需要重新考虑您的设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T12:30:45.283

我同意@davenewza，但如果你*必须*，这可以是一个解决方案

```
Parallel.ForEach(BigIntSequence(1,10), (i) => Console.WriteLine(i));

public IEnumerable<BigInteger> BigIntSequence(BigInteger min,BigInteger max)
{
    BigInteger bi = min;
    while (bi<max)
    {
        yield return bi;
        bi += 1;     
    }
} 
```

# jsf - 如何使用 JSF 的 selectOneMenu？

> ID：13378731
> 
> 赞同：1
> 
> 时间：2012-11-14T12:19:49.800
> 
> 标签：jsf, jsf-1.2, selectonemenu

我在使用 JSF 的 selectOneMenu 时遇到问题。

我一直在尝试类似下面的东西，但似乎没有人工作......

有人能帮我吗？

JSP：

```
<h:selectOneMenu value="#{myBean.listCats.desc}" id="desc">
    <f:selectItems value="#{myBean.selectAllCats}" />
</h:selectOneMenu> 
```

我的豆：

```
(...)
    public Collection<SelectItem> selectAllCats() throws (some exceptions...){  
        this.listCats = this.controller().selectAllCats();
        Collection<SelectItem> toReturn = new ArrayList<SelectItem>();  

        for( int i = 0; i<this.listCats.size(); i++){  
          toReturn.add( new SelectItem( this.listCats.get(i).getCod(), this.listCats.get(i).getDesc()));  
        }
        return toReturn;
    }
(...) 
```

更多信息：

```
List<Cats> listCats = new List<Cats>();
//-------------------------------------
class Cats{
    private int cod; // both with getters and setters
    private String desc;
} 
```

提前致谢！

* * *

编辑：

我忘了说我不断收到以下错误：

> 在类型 path.to.myBean 上找不到“#{myBean.selectAllCats}”属性“selectAllCats”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:01:24.653

> 在类型 path.to.myBean 上找不到“#{myBean.selectAllCats}”属性“selectAllCats”

对于属性，您应该提供有效的 getter 方法。你没有任何人，因为例外试图告诉你。一个有效的属性 getter 方法`selectAllCats`应该如下所示。

```
public Collection<SelectItem> getSelectAllCats() {
    return selectAllCats;
} 
```

请注意，在吸气剂中执行业务工作是不好的做法。您应该在 bean 的（后）构造函数中执行此操作。

### 也可以看看：

*   [我们的`selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:23:49.357

```
 List<Cats> listCats = new List<Cats>(); 
```

和

```
 myBean.listCats.desc 
```

List 没有名为 的属性`desc`。`Cats`有，但是`listCats`是一个列表。

顺便说一句：如果你的类名是单数的话会更好，除非它们代表一个组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:35:04.817

方法

```
public Collection<SelectItem> selectAllCats() throws (some exceptions...) 
```

返回 a `Collection`，JSF 1.2 不支持`<h:selectOneMenu>`。

这个方法应该 return `List`，`Map`或者`Object[]`它的符号应该这样重写：

```
public List<SelectItem> selectAllCats() throws (some exceptions...) 
```

除此之外，您将在这一行遇到 JSP 的另一个问题：

```
<h:selectOneMenu value="#{myBean.listCats.desc}" id="desc"> 
```

`listCats`是`List`由`Cats`（应该用 重命名`Cat`）组成的，并且此列表没有`desc()`方法。这一行也应该这样修改（根据您的需要修改：

```
<h:selectOneMenu value="#{myBean.listCats.get(0).desc}" id="desc"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T13:04:17.383

我不知道标签信息页面，这就是我没有在那里搜索答案的原因。

您可以在此链接中找到它： [https ://stackoverflow.com/tags/selectonemenu/info](https://stackoverflow.com/tags/selectonemenu/info)

或者：

> 顺便问一下，您是否查看过您自己提出的问题的 [selectonemenu] 标签的标签信息页面？用鼠标悬停它，直到出现一个黑框，然后单击其中的信息链接。– BalusC

我正在寻找的答案在该信息页面的动态列表部分中，下面引用该部分以供进一步参考：

> 动态列表
> 
> 您可以使用它来显示在支持 bean 中动态填充的列表。您可以使用 javax.faces.model.SelectItem 来表示一对项目值和标签。
> 
> 看法：

```
<h:form>
     <h:selectOneMenu value="#{bean.selectedItem}">
         <f:selectItem itemValue="#{null}" itemLabel="-- select one --" />
         <f:selectItems value="#{bean.availableItems}" />
     </h:selectOneMenu>
     <h:commandButton value="Submit" action="#{bean.submit}" /> </h:form> 
```

> 模型：

```
private String selectedItem; // +getter +setter private
 List<SelectItem> availableItems; // +getter (no setter necessary)

 @PostConstruct public void init() {
     availableItems = new ArrayList<SelectItem>();
     availableItems.add(new SelectItem("foo", "Foo label"));
     availableItems.add(new SelectItem("bar", "Bar label"));
     availableItems.add(new SelectItem("baz", "Baz label")); 
 } 
```

> availableItems 也可以是 SelectItem[]。如果您省略项目标签
> 
> > 因此可以将项目值用作选项值和选项标签，然后您也可以使用 List 或 String[] 代替。

```
private String selectedItem; // +getter +setter private List<String>
 availableItems; // +getter (no setter necessary)

 @PostConstruct public void init() {
     availableItems = Arrays.asList("foo", "bar", "baz"); 
 } 
```

谢谢！

# jquery - 将插件函数添加到附加的 LI

> ID：13378747
> 
> 赞同：0
> 
> 时间：2012-11-14T12:20:52.060
> 
> 标签：jquery, jquery-mobile, jquery-plugins

我正在编写一个 phonegap/jquery 移动应用程序，我正在使用 swipeButton 插件来模拟滑动删除操作（[https://github.com/commadelimited/jquery.swipeButton.js](https://github.com/commadelimited/jquery.swipeButton.js)）。

但是，我正在努力将插件功能附加到附加的 li。

有人能指出我正确的方向吗？

这是我的代码：

```
$('#recordings-list').append('<li data-corners="false" data-shadow="false" data-iconshadow="true" data-icon="arrow-r" data-iconpos="right" class="ui-btn-icon-right ui-li-has-arrow"><a href="#view" class="ui-link-inherit" data-transition="slidefade">'
    + '<p class="ui-li-aside"><strong>' + resultString + '</strong> <br/> <span class="sync-label">' + syncStatus + '</span></p>'
    + '<h3 class="ui-li-heading">' + results.rows.item(i).name + '</h3>'
    + '<p class="ui-li-desc"><strong>' + results.rows.item(i).notes + '</strong></p>'
    + '<p class="ui-li-desc"> ' + results.rows.item(i).description + '</p>'
    + '</a></li>').swipeDelete({
                direction: 'swiperight', // standard jquery mobile event name
                btnLabel: 'Delete',
                btnTheme: 'b',
                btnClass: 'aSwipeBtn',
                click: function(e){
                    e.preventDefault();
                    alert("Swipey McSwipeo");
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:27:49.030

目前，您将插件附加到`$('#recordings-list')`未附加的`<li>` 您应该这样做：

```
var $li = $('<li data-corners="false" data-shadow="false" data-iconshadow="true" data-icon="arrow-r" data-iconpos="right" class="ui-btn-icon-right ui-li-has-arrow"><a href="#view" class="ui-link-inherit" data-transition="slidefade">'
    + '<p class="ui-li-aside"><strong>' + resultString + '</strong> <br/> <span class="sync-label">' + syncStatus + '</span></p>'
    + '<h3 class="ui-li-heading">' + results.rows.item(i).name + '</h3>'
    + '<p class="ui-li-desc"><strong>' + results.rows.item(i).notes + '</strong></p>'
    + '<p class="ui-li-desc"> ' + results.rows.item(i).description + '</p>'
    + '</a></li>');

$('#recordings-list').append($li);
$li.swipeDelete({
                direction: 'swiperight', // standard jquery mobile event name
                btnLabel: 'Delete',
                btnTheme: 'b',
                btnClass: 'aSwipeBtn',
                click: function(e){
                    e.preventDefault();
                    alert("Swipey McSwipeo");
                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:32:56.827

您的代码不起作用的原因是链接`swipeDelete`到`append`将调用附加到的选择器上的函数，而不是正在附加的新元素。

您可以`.children('li:last')`向链中添加遍历方法，以将刚刚附加为元素对象的字符串作为目标

```
$('#recordings-list').append('<li>....</li>').children('li:last').swipeDelete() 
```

作为针对一个链中各种不同元素的示例，请考虑以下内容：

```
$(selector).addClass('foo')/* method returns original selector*/
           .parent().css('color','red')/* method returns parent element original selector*/
           .find('p:first').text('test') /*first "p" tag in parent of original selector*/
           .hide() /* still returns first "p" tag" */
           .fadeIn(); 
```

# objective-c - 如何使用 objectForKey 访问 NSDictionary 中的数据

> ID：13378753
> 
> 赞同：0
> 
> 时间：2012-11-14T12:22:24.893
> 
> 标签：objective-c, ios, nsdictionary, nsnumber

我正在尝试访问字典中的数据。当它是一个字符串时，我可以访问数据：

```
cell.textLabel.text = [[item objectForKey:@"merchant"]objectForKey:@"name"]; 
```

但不确定 NSNumber 的语法：

```
NSNumber* latFromTable = [[displayItems objectAtIndex:indexPath.row]
                                           [objectForKey:@"coords"]objectForKey:@"lat"]; 
```

我知道我在上面的代码中使用 NSStrings 不起作用。我将如何更改它以使用 NSNumber？

字典中的数据如下所示。objectForKey 是“坐标”。我想访问项目 1 和 2（lat 和 lng）

```
 "coords": {
        "lat": 52.5032,
        "lng": 13.3445 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:32:01.830

以下代码的问题是括号不匹配：

```
NSNumber* latFromTable = [[displayItems objectAtIndex:indexPath.row]
                                           [objectForKey:@"coords"]objectForKey:@"lat"]; 
```

所以改变它：

```
float latFromTable = (float)[[[displayItems objectAtIndex:indexPath.row]
                                           objectForKey:@"coords"]objectForKey:@"lat"];
NSNumber *value = [NSNumber numberWithFloat:latFromTable]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:34:16.550

试试这样：

```
float latFromTable = [[[displayItems objectForIndex:indexPath.row]
                                       [objectForKey:@"coords"]objectForKey:@"lat"] floatValue]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:33:19.813

字典中的键值对称为条目。每个条目由一个表示键的 OBJECT 和作为该键值的第二个 OBJECT 组成。

NSInteger 不是一个对象（它只是一个 int 值）。

所以，你不能这样做

---添加正如 schubam 建议的那样，您可以接收一个 NSString 并调用 floatValue。

---ADDED2 我已经更准确地阅读了日志。您有一个具有 lat 和 long 属性的对象。所以，它不是二级词典。尝试接收接口名称并获取这些接口的对象。

# php - 将文件保存到子域

> ID：13378754
> 
> 赞同：0
> 
> 时间：2012-11-14T12:22:30.103
> 
> 标签：php, subdomain

**背景**

我们有一个[内部网](http://en.wikipedia.org/wiki/Intranet)，用户可以在其中索取名片。这会生成名片并将其作为 SVG 发送给我们的营销经理，然后再将其发送给打印机。整个过程完美无缺。

**问题**

我需要用这个脚本创建一个 VCard 并将其保存到我们的网站。这是为了使联系人能够使用将嵌入在名片上二维码中的链接下载此 VCard（二维码不能包含 VCard，因为它包含很多信息）。我已经创建了 VCard，它按预期工作。

我们的网站托管在 www.example.com 下，我们的内部网位于 intra.example.com 下。它在同一个VPS上。

**问题**

有什么办法可以将 VCard 文件保存到 www. 脚本在内部运行的服务器。子域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:24:46.987

是的。

它们在同一台计算机上运行，​​因此它们可以访问相同的文件系统和数据库。

您只需要将数据存储在其他站点可访问的位置。

# apache-flex - DataGrid 无法更新新行

> ID：13378757
> 
> 赞同：0
> 
> 时间：2012-11-14T12:22:38.567
> 
> 标签：apache-flex

我有以下函数将项目添加到数据库然后返回到数据网格。数据管理方法是PHP。我的问题是数据库已经收到新数据，但数据网格没有新记录。

这是代码的简化版本

```
 <fx:Script>
        <![CDATA[
            import mx.controls.Alert;
            import mx.events.CloseEvent;
            import mx.events.FlexEvent;
            import mx.rpc.events.ResultEvent;

            import spark.events.GridItemEditorEvent;

            protected function dataGrid_creationCompleteHandler(event:FlexEvent):void
            {
                getAllUserResult.token = userService.getAllUser();

            }

            protected function button_clickHandler(event:MouseEvent):void
            {

                var user:User = new User();

                user.idUser = parseInt(idUserTextInput.text);
                user.userName = userNameTextInput.text;
                user.password = passwordTextInput.text;

                createUserResult.token = userService.createUser(user);

                userService.commit();

                //getAllUserResult.token = userService.getAllUser();
                //dataGrid.invalidateDisplayList();

                //var e:FlexEvent;
                //dataGrid_creationCompleteHandler(e);

                //user.idUser=createUserResult.token.result as int;
                //dataGrid.dataProvider.addItem(user);

                this.currentState="State1";
            }
    </fx:Script>

<s:states>
    <s:State name="State1"/>
    <s:State name="Add"/>
</s:states>

    <fx:Declarations>
        <s:CallResponder id="getAllUserResult"/>
        <userservice:UserService id="userService"
                                   fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)"
                                   showBusyCursor="true"/>
        <valueObjects:User id="user"/>
        <s:CallResponder id="createUserResult"/>

    </fx:Declarations>

<s:DataGrid id="dataGrid" includeIn="State1" x="95" y="10" width="961" height="505"
                creationComplete="dataGrid_creationCompleteHandler(event)" editable="true"
                gridItemEditorSessionSave="dataGrid_gridItemEditorSessionSaveHandler(event)"
                requestedRowCount="4" >
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="idUser" headerText="idUser"></s:GridColumn>
                <s:GridColumn dataField="userName" headerText="userName"></s:GridColumn>
                <s:GridColumn dataField="password" headerText="password"></s:GridColumn>

            </s:ArrayList>
        </s:columns>
        <s:typicalItem>
            <fx:Object idUser="idUser1" Name="Name1" password="password1"></fx:Object>
        </s:typicalItem>
        <s:AsyncListView list="{getAllUserResult.lastResult}"/>
    </s:DataGrid>

    <s:Button id="button" includeIn="Add" x="695" y="407" label="CreateUser"
              click="button_clickHandler(event)"/>

    <s:Form includeIn="Add" x="74" y="21" width="343" height="362">
            <s:FormItem width="200" label="IdUser">
                <s:helpContent >
                    <s:VGroup>
                        <s:Label width="76" height="42" text="Auto Generate"></s:Label>
                    </s:VGroup>
                </s:helpContent>
                <s:Label id="idUserTextInput" text="{user.idUser}"/>
            </s:FormItem>
            <s:FormItem label="UserName" required="true">
                <s:TextInput id="userNameTextInput" text="{user.userName}"/>
            </s:FormItem>
            <s:FormItem label="Password" required="true">
                <s:TextInput id="passwordTextInput" text="{user.password}"/>
            </s:FormItem>

    </s:Form> 
```

我已经尝试过 serval 方法来调试（button_clickHandler 中的注释函数），但是结果仍然相同。

还有什么方法可以试试？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:51:17.390

您是否尝试过刷新数据提供者？

# python - sqlalchemy 计数相关

> ID：13378758
> 
> 赞同：0
> 
> 时间：2012-11-14T12:22:40.463
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我一直在使用 django 的 ORM 和 sqlalchemy 让我打败了 atm
我有这个：

```
recipie_voters = db.Table('recipie_voters',
    db.Column('user_id', db.Integer, db.ForeignKey('user.id')),
    db.Column('recipie_id', db.Integer, db.ForeignKey('recipie.id'))
)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    ...

class Recipie(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    ...
    voters = db.relationship('User', secondary=recipie_voters, backref=db.backref('votes', lazy='dynamic'))
    ... 
```

问题是：如何在 Recipie 中选择选民（用户）的计数？
我们将从这里开始：

```
Recipie.query.all() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:17:06.053

我不知道如何把它放在 django 上下文中，但是通过声明和使用[Hybrid Attributes](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/hybrid.html)，代码可能如下所示：

```
class Recipie(Base):
    __tablename__ = 'recipie'
    id = Column(Integer, primary_key=True)
    name = Column(String(255))

    voters = relationship("User", 
             secondary=recipie_voters,
             backref=backref("votes", lazy="dynamic",),
             )

    @hybrid_property
    def voters_count(self):
        return len(self.voters)

    @voters_count.expression
    def voters_count(cls):
        return (select([func.count(recipie_voters.c.user_id)]).
                where(recipie_voters.c.recipie_id == cls.id).
                label("voters_count")
                )

# get only those Recipies with over 100 votes    
qry = session.query(Recipie).filter(Recipie.voters_count >= 100) 
```

# delphi-5 - Delphi 5 将 tdate 读取为 64 位整数

> ID：13378759
> 
> 赞同：1
> 
> 时间：2012-11-14T12:22:42.100
> 
> 标签：delphi-5

我正在使用我值得信赖的旧**Delphi 5**并努力解决以下问题。

我试图通过直接从字体文件中读取 Truetype/opentype 字体创建日期来解释它。

该[规范](http://www.microsoft.com/typography/otspec/head.htm)有以下描述：

格式**LONGDATETIME**，即自 1904 年 1 月 1 日午夜 12:00 以来的秒数。64 位整数

我正在创建一个单词数组来读取此结构，其中包含以下内容：

```
longDateTime = array[0..3] of Word; 
```

**我可以正确读取并正确解释字体文件中头**表中的其他数据，但不能正确解释时间日期值。

我知道换词问题。

一种字体的日期**为 06/08/1990**和时间**14:54:50** 文件中的十六进制转储是`00 00 00 00 A2 E3 27 2A`

任何人都可以帮助/解释我如何从这个十六进制转储中获得高于日期/时间的信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:53:26.583

有一点时区差异

```
Var
 C:Cardinal=$00000000A2E3272A;

procedure TForm3.Button1Click(Sender: TObject);
var
 d:TDateTime;
begin
  d := Encodedate(1904,1,1) + c / 24/60/60 ;
  Showmessage(DateTimeToStr(d));
end; 
```

# android - 如何捕捉地图调整大小的结尾

> ID：13378762
> 
> 赞同：2
> 
> 时间：2012-11-14T12:22:55.797
> 
> 标签：android, android-mapview

为了减少处理器在地图上重新绘制路线的工作，我使用 Path 类。我想为一个 ZoomLevel 存储一个路径。我将路径保存在 SparseArray 中，其中 key = ZoomLevel，代码如下所示

```
 @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        if (shadow){
            return;
        }
        else 
            if(route==null){
                return;
            }
            drawPath(mapView, canvas);
    }

    private void drawPath(MapView mv, Canvas canvas) {
        Point point = new Point();

         if (pathMap.get(gMapView.getZoomLevel())==null){           

            List<GeoPoint> list = null;
            Projection p = mv.getProjection();

            List<RouteMachine.Section> routeArray = route.getSections();
            p.toPixels(routeArray.get(0).getPoints().get(0), point);

            Point rememberThisPoint = new Point(point.x,point.y);

            Path path = new Path();
            path.moveTo(point.x,point.y);
            for (RouteMachine.Section section : routeArray) {
                list = section.getPoints();
                for (int i=1; i < list.size(); i++) {
                    p.toPixels(list.get(i), point);
                    path.lineTo(point.x, point.y);
                }
            }
            pathMap.put(gMapView.getZoomLevel(), path, rememberThisPoint);
         }
         else{
            mv.getProjection().toPixels(route.getSections().get(0).getPoints().get(0), point);
            pathMap.offset(gMapView.getZoomLevel(),point);
         }
        canvas.drawPath(pathMap.get(gMapView.getZoomLevel()),mPaint);

        } 
```

在不同的缩放级别下，它可以工作或不工作。级别更改，但路径看起来像上一个级别的路径。我认为，这是因为 zoomLevel 在映射 rapaints 之前有时会发生变化。路径计算在这两个动作之间起作用。ZoomLewel 已更改，但地图尚未重新绘制。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:35:56.290

使用测试缩放级别的问题`getZoomLevel()`是，在您请求缩放更改后，它会立即开始返回新的缩放级别，但地图图像会经历一个需要一些时间才能完成的渐进式大小更改动画。

但是，`getProjection().fromPixels()`即使在动画期间，它也会返回正确的投影值，并且可以用于检查动画何时结束。

我使用以下行来测试它：

```
 pathInitialLonSpan = projection.fromPixels(0,mapView.getHeight()/2).getLongitudeE6() - 
            projection.fromPixels(mapView.getWidth(),mapView.getHeight()/2).getLongitudeE6(); 
```

它返回地图中心级别的经度跨度。此值将在缩放更改动画期间更改，并且在 zomm 完成时将保持不变。

我用它来验证动画结束的时间，然后构建路径。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:28:38.997

如果你使用现成的库，你可以设置最大值，然后你就可以说教了。

看看[这个](https://gis.stackexchange.com/questions/32747/how-to-redraw-refresh-map-on-canvas-resize)。

别的

你可以像这样获得最高级别：

[链接 1](https://stackoverflow.com/questions/5405453/android-mapview-maximum-zoom-level-only-19)

[链接 2](https://stackoverflow.com/questions/4146395/set-minimum-zoom-level-for-mapview)

# c++ - 从 Python Web 应用程序调用二进制可执行文件

> ID：13378766
> 
> 赞同：3
> 
> 时间：2012-11-14T12:23:01.773
> 
> 标签：c++, python, web-applications

我正在使用烧瓶 python 框架编写一个 Web 应用程序。作为其某些功能的一部分，它需要运行一些编译的程序（C++ 代码，但我只能访问二进制文件）来执行某些操作（获取用户上传的一些文件，处理它们并生成一些输出文件。）
构建这样一个应用程序的最佳方法是什么？此代码没有库或 API。

我可以在`subprocess`每次需要时使用该模块来运行这个二进制文件，但我担心如果服务器收到太多请求（该过程是 CPU 密集型的）可能会发生什么。我想我可以限制它可以处理的并发请求数。有没有更好的解决方案？

（只是出于好奇，假设我有 CPP 源代码，我怎么能去使用这个代码构建一个 Web 应用程序？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:33:42.153

我的直接建议是：

1.  首先，通过系统调用使用二进制文件可能会在某种程度上起作用，尽管它是一个黑盒，并且正如您所提到的，您很容易遇到问题。您总是有可能处理系统调用的返回值，但这并不理想，因此包装在一个简单的 API 中可能只会提供有限的用处。我的直接建议是不要使用此选项，并尝试使用以下想法之一根据您的需要编译它。

2.  如果您可以访问源代码；创建一个允许您与本机 C++ 代码交互的[python 扩展模块。](http://docs.python.org/2/extending/extending.html)给定的链接可以比我自己解释得更好，但它可能是一种相当轻松的方式来集成您的代码，而无需像您提到的那样从二进制文件启动。

3.  此外，要为 C++ 代码构建本机 Web 应用程序，我会将您转向[Wt C++ Web 工具包](http://www.webtoolkit.eu/wt)。这是一个 Qt 风格的框架，可让您使用本机 C++ 构建交互式网页并执行二进制文件以运行 Web 服务器并创建一个成熟的网站。如前所述，检查链接，您会更好地了解我在说什么。可能还有其他框架，但我已经使用过它并且发现它非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:31:26.573

如果您有 cpp 源代码，您可以通过`swig`或`boost`调用已编译的 cpp 对象模块（`.o`编译后生成的文件）将 python 链接到它。

参考 swig 教程 - [http://www.swig.org/tutorial.html](http://www.swig.org/tutorial.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:36:00.343

使用[celery](http://celeryproject.org/)运行任务。它具有使调用异步的能力，您还可以通过轮询或通过 Web 套接字与 celery 进行通信。

当需要处理大量任务时，建议使用 Celery。

# java - 如何在java中将字符串设置为日期数据类型

> ID：13378768
> 
> 赞同：0
> 
> 时间：2012-11-14T12:23:08.810
> 
> 标签：java, string, date, time, timestamp

我从数据库中获取日期，其中包含日期和时间戳，在 UI 中它同时显示日期和时间戳，但我只想显示日期（yyyy-MM-dd）。我已经完成了更改，但我无法正确设置。

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
String startDate = dateFormat.format(dataObj.getReportStartDate());
//The above startDate will be of the format : 2012-11-08 
```

我希望将 String 格式的 startDate 设置为 Date 数据类型。

```
dataIndexObj.setReportStartDate(startDate);
// Here the setReportStartDate is of the type date(), I cannot change its type to string. 
```

我也尝试过 parse(startDate) 。它没有用。知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:26:09.660

您的问题不是很清楚，因为您已经将数据作为`Date`- 您最初格式化的值。

如果您的意思是您将从 UI 中获取数据*作为*，`String`并且需要将其转换，您只需要使用`parse`而不是`format`：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd", Locale.US);
// TODO: Set the time zone as well...

Date date = dateFormat.parse(text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:55:38.143

也许这就是你的意思：

在您的数据库中创建 2 列。首先是字符串的类型和另一个日期。因此，当您需要字符串类型时，您可以调用字符串类型的列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-20T00:50:20.583

不要混淆[`java.util.Date`](http://docs.oracle.com/javase/8/docs/api/java/util/Date.html)和[`java.sql.Date`](http://docs.oracle.com/javase/8/docs/api/java/sql/Date.html)。第一个名称不好，代表日期*和*时间。第二个是一个糟糕的类，从第一个作为子类扩展，并假装只保存一个日期，而实际上它确实保存了一个设置为`00:00:00`UTC 的时间。避免这些麻烦且设计不佳的旧类。它们现在是遗留的，被 java.time 类所取代。

# `LocalDate`

该类[`LocalDate`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)表示没有时间和时区的仅日期值。

要获得这样的对象，请`java.util.Date`通过调用添加到旧日期时间类的新方法来转换您的对象。我们需要`Instant`一路走来。该类代表[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)[`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)时间线上的一个时刻，分辨率为[nanoseconds](https://en.wikipedia.org/wiki/Nanosecond)。

```
Instant instant = myUtilDate.toInstant(); 
```

也许您[`java.sql.Timestamp`](https://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html)的数据库中有一个对象。

```
Instant instant = myTimestamp.toInstant(); 
```

分配时区。时区至关重要，因为在任何特定时刻，全球各地的日期都会因时区而异。

```
ZoneId z = ZoneId.of( "America/Montreal" );
ZonedDateTime zdt = instant.atZone( z ); 
```

从中提取您的`LocalDate`对象。

```
LocalDate ld = zdt.toLocalDate();  // A date-only value, truncating time-of-day and forgetting time zone. 
```

要生成所需格式的字符串，只需调用`toString`. 该格式是标准的 ISO 8601 格式。java.time 类在解析/生成日期时间值的字符串表示时默认使用 ISO 8601 格式。

```
String output = ld.toString(); 
```

往另一个方向走。

```
LocalDate ld = LocalDate.parse( "2012-11-08" ); 
```

# jquery - Jquery 加载一个 div onclick 事件

> ID：13378770
> 
> 赞同：0
> 
> 时间：2012-11-14T12:23:20.477
> 
> 标签：jquery

默认情况下，将加载第一个 div 的内容，然后当用户单击标签时，应加载该 div 的内容。

HTML：

```
 <a class="first">one</a>
    <a class="second">two</a>
    <div>
       <li id="first">
           <h2>pen</h2>
           <div>
               <div>parker</div>
           </div>
      </li>
      <li id="second">
            <h2>car</h2>
            <div>Bugatti</div>
         </div>
       </li>
    </div>​ 
```

JS：

```
$(document).ready(function() {
    $("li#second").html();
    $("li#first").hide();
    $("a").click(function () {         
        var id = $(this).attr("class");  
        $("li#"+id).show().html();          
        $("li#second").hide();
     });
 });​ 
```

现在，当你点击一个，它会加载，但如果你点击两个它不会加载，我正在使用`second.hide()`，如何让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:26:15.103

您当前绑定到每次`a`单击，然后显示与单击的链接相对应`li`的链接，但您始终 hide `#second`，无论是否`.second`被单击。

您可以单独绑定它们：

```
$('a.first').click(function() {
    $('#first').show();
    $('#second').hide();
});

$('a.second').click(function() {
    $('#first').hide();
    $('#second').show();
}); 
```

[演示](http://jsfiddle.net/2mCgG/)

或者，如果您想在一个侦听器中同时解决这两个问题：

```
$('a').click(function() {
   var id = $(this).attr('class');
   $('#first').toggle(id == 'first');
   $('#second').toggle(id == 'second');
}); 
```

[演示](http://jsfiddle.net/Nek33/)

# wordpress - 按字母顺序按自定义字段排序帖子

> ID：13378773
> 
> 赞同：0
> 
> 时间：2012-11-14T12:23:34.923
> 
> 标签：wordpress, field

我有以下循环：

```
$argsvs = array( 
                'post_type' => 'imovel-para-venda', 
                'meta_key' => 'wpcf-imovel-preco',
                'posts_per_page' => 0,
                 'oderby' => 'meta_value',
                 'order' => 'DESC'
                 ); 
```

$loop = new WP_Query($argsvs); while ( $loop->have_posts() ) : $loop->the_post(); .....好吧，问题是它不起作用！meta_key 'wpfc-imovel-preco' 是使用插件类型创建的自定义字段。它有时充满了数字和文字。好吧，上面的代码根本没有对任何东西进行排序:(有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:44:05.280

问题是你有`oderby`而不是`orderby`- 你错过了`r`那里。

我测试了您的代码，但它可以正常工作。不过，只有一件事要记住 - 数字元值将与字符串元值分开排序，这是一个示例：

我有 5 个页面，其自定义字段具有以下值：`abc`, `acb`, `dcb`, `3`, `5`。当我以升序排列它们时，它们的顺序如下：

1.  `3`
2.  `5`
3.  `abc`
4.  `acb`
5.  `dcb`

如果你切换回下降，你会得到：

1.  `dcb`
2.  `acb`
3.  `abc`
4.  `5`
5.  `3`

# login - Symfony2 注册后自动登录

> ID：13378774
> 
> 赞同：2
> 
> 时间：2012-11-14T12:23:45.353
> 
> 标签：login, symfony-2.1, user-registration

我已经搜索过[这个主题](https://stackoverflow.com/questions/5886713/automatic-post-registration-user-authentication)，但它对我没有帮助。

注册后如何认证用户？我的错误在哪里？

安全.yml

```
security:

    providers:
      #chain_provider is used here to implement a multiple firewalls in future: admins, accounts ...
      chain_provider:
        chain:
          providers: [admins,accounts]
      admins:
        entity: { class: FME\Bundle\_CoreBundle\Entity\Admin, property: username }
      accounts:
        entity: { class: FME\Bundle\_CoreBundle\Entity\Account, property: email }

    encoders:
        FME\Bundle\_CoreBundle\Entity\Admin: sha512
        FME\Bundle\_CoreBundle\Entity\Account: sha512

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        #no firewall for the Login page
        admin_area_login:
          pattern:  ^/admin/login$
          security: false

        admin_area:
            pattern:    ^/admin/
            provider: admins
            form_login:
                check_path: fme_aa_login_handler
                login_path: fme_aa_login
            logout:
                path:   fme_aa_logout
                target: fme_aa_login
            #anonymous: ~
            #http_basic:
            #    realm: "Secured Demo Area"

        #no firewall for the Login page
        account_area_login:
          pattern:  ^/account/login$
          security: false

        account_area:
            pattern:    ^/account/
            provider: accounts
            form_login:
                check_path: fme_aca_login_handler
                login_path: fme_aca_login
            logout:
                path:   fme_aca_logout
                target: fme_aca_login 
```

注册控制器如下：

```
namespace FME\Bundle\FtdBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken;

use FME\Bundle\_CoreBundle\Entity\Account;
use FME\Bundle\FtdBundle\Form\RegistrationType;

/**
 * @Route("/registration")
 */
class RegistrationController extends Controller
{      
    /**
     * Account registration
     * 
     * @Route("/",name="fme_ftd_registration")
     * @Template()
     */
    public function indexAction(Request $request)
    {
        $account = new Account();

        //set default role group
        $account->setRoleGroup($this->getDoctrine()->getRepository('FMECoreBundle:AccountRoleGroup')->findDefault());

        //default company type from the FMECoreBundle is used
        $form = $this->createForm(new RegistrationType(), $account);

        if ($request->isMethod('POST'))
        {
            $form->bind($request);

            if ($form->isValid())
            {
                $encoder = $this->container->get('security.encoder_factory')->getEncoder($account);

                //encode password using current encoder
                $password = $encoder->encodePassword($form->get('password')->getData(), $account->getSalt());

                //set encrypted password
                $account->setPassword($password);

                //save an object in the DB
                $em = $this->getDoctrine()->getEntityManager();
                $em->persist($account);
                $em->flush();

                //send the token to account via email
                if (! $this->_sendVerificationToken($account))
                {
                    $this->get('session')->setFlash('error', 
                        $this->get('translator')->trans('Error sending the verification token.')
                    );
                }

                $this->get('session')->setFlash('success', 
                    $this->get('translator')->trans('Your account was created. Please check you inbox to verify the email.')
                );

                //Automatic post-registration user authentication
                $this->_authenticateAccount($account);

                //redirect to home page in the account area
                return $this->redirect($this->generateUrl('fme_aca_dashboard'));
            }
        }

        return array('form' => $form->createView());
    }

    /**
     * Send the token to verify an account email
     */
    protected function _sendVerificationToken(Account $account)
    {
        return TRUE;
    }

    /**
     * Automatic post-registration user authentication
     */
    protected function _authenticateAccount(Account $account)
    {
        $token = new UsernamePasswordToken($account, null, 'account_area', $account->getRoles());
        $this->get('security.context')->setToken($token);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T12:51:13.357

首先确保注册页面适合防火墙之一。比为每个防火墙附加附加参数：

```
context: <string> 
```

像这样：

```
 account_area_login:
        ...
        context: administration

    admin_area:
        ...
        context: administration 
```

上下文允许在不同的防火墙之间共享身份验证 cookie。因此，为了在注册后保持用户身份验证，注册页面的防火墙和其他防火墙应该具有相同的上下文。

# iphone - SQLite3 选择适用于模拟器，但不适用于设备

> ID：13378775
> 
> 赞同：0
> 
> 时间：2012-11-14T12:23:46.357
> 
> 标签：iphone, ios, ios5, sqlite, ios-simulator

我将一组值存储在一个包含几列不同类型的表中，当我在 iPhone 模拟器上运行应用程序时，插入和选择工作正常。但是，在真实设备上运行并选择数据时，似乎无法获取表的某些文本列（其余列似乎已正确检索）。我应该看到一个带有字符串的对话框，但我没有，我得到一个空对话框，而带有字符串的对话框正确显示在模拟器上。

这是插入的代码片段：

```
if(sqlite3_prepare_v2(database, sqlStatement,
                          -1, &compiledStatement, NULL) == SQLITE_OK)
    {
        sqlite3_bind_int(compiledStatement, 1, userData.ID);
        sqlite3_bind_double(compiledStatement, 2, userData.Location.Lat);
        sqlite3_bind_double(compiledStatement, 3, userData.Location.Lon);
        sqlite3_bind_text(compiledStatement, 4, [userData.Name UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(compiledStatement, 5, [userData.Surname UTF8String], -1, SQLITE_TRANSIENT);
    }

    if(sqlite3_step(compiledStatement) == SQLITE_DONE) {
        sqlite3_finalize(compiledStatement);
    }
    else {
        NSLog(@"%d",sqlite3_step(compiledStatement));
    }
}
sqlite3_close(database); 
```

这是选择：

```
if (sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
        while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
            UserData *userData = [[UserData alloc] init];

            userData.ID = sqlite3_column_int(compiledStatement, 0);

            char *name = sqlite3_column_text(compiledStatement, 1);
            if (name == nil)
                userData.Name = @"";
            else
                userData.Name = [NSString stringWithUTF8String: name];

            [list addObject:userData];
        }
    }
    sqlite3_finalize(compiledStatement);
}
sqlite3_close(database); 
```

我完全不知道为什么数据库数据管理在模拟器中表现良好（我有 SQLite Manager 插件并且数据被正确存储和检索），但它不是在真正的 iPhone 中。我如何检查设备上发生的情况？有人经历过类似的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:28:10.423

我认为问题可能是由空记录引起的，而您`if nil`没有帮助，请尝试`NULL`：

```
if ((char *)sqlite3_column_text(compiledStatement, 1) == NULL)
 userData.Name = @""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:07:26.140

根据您的所有建议，我终于让它工作了，我认为最终解决问题的是区分大小写的事情。谢谢你们

# iphone - 如何判断我的视图控制器是否会从内存中释放？

> ID：13378779
> 
> 赞同：0
> 
> 时间：2012-11-14T12:24:17.743
> 
> 标签：iphone, ios, uitableview, uinavigationcontroller, nsfetchedresultscontroller

这个问题是关于使用 Xcode 的 Master Detail 模板和 Core Data 的 iPhone 应用程序。该应用程序支持 iOS 5.1 及更高版本。

我正在使用 NSFetchedResultsController 来管理 UITableView 中的项目，这是我的 UINavigationController 堆栈中的第二个视图控制器。用户从表视图中选择，堆栈中的第三个视图控制器被推送到视图上。非常标准的东西，我很享受 NSFetchedResultsController 提供的对核心数据对象的简化访问。

一旦进入第三个视图控制器，用户正在查看从表视图中的列表中选择的一组数据。我在此视图中添加了几个按钮，用于导航到上一组或下一组数据。想想看电子邮件时看到的 iOS 邮件应用程序和向上/向下按钮。您可以使用这些按钮选择列表中的下一封或上一封电子邮件，而无需导航回电子邮件列表（表格视图）。

当点击这些下一个/上一个按钮之一时，我试图找到最简单的方法来识别应该从数据存储中加载哪些数据。据我所知，这是使用堆栈中前一个视图控制器的获取结果控制器。我可以简单地让 Core Data 返回表格视图中下一个或上一个索引路径的结果。

在我的第三个（详细）视图控制器中，我可以访问第二个（主）视图控制器的获取结果控制器，如下所示：

```
NSFetchedResultsController *fetch = [[self.navigationController.viewControllers objectAtIndex:1] fetchedResultsController];
NSIndexPath *indexPath = [fetch indexPathForObject:self.detailItem];
NSLog(@"Section: %d, Row: %d", indexPath.section, indexPath.row); 
```

在进一步讨论之前，我需要知道视图控制器及其获取的结果控制器将始终存在。据我了解，它将一直保留到内存不足时才可以释放。我的详细视图在显示其数据时会消耗大量内存，并且随着时间的推移，应用程序用于收集更多数据时会消耗越来越多的内存。

当我的用户与详细视图控制器交互时，我可以确定这些项目（堆栈中的前一个视图控制器及其获取的结果控制器）将保留在内存中吗？

如果没有，我有办法确保它们被保留吗？

否则，我是否有更简单或更优雅的方式来实现目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:27:40.357

你的第二个视图控制器永远不会被释放。也不是在内存不足的情况下。可能发生的情况是`viewDidUnload`（在 iOS 6 中已弃用且不再调用）在内存不足的情况下被调用。因此，只要您不摆脱`NSFetchedResultsController`这种方法，就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:32:13.593

您可以知道此方法何时调用：

```
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

# java - 将图像的一部分绘制到屏幕上（不将全部加载到内存中）

> ID：13378781
> 
> 赞同：6
> 
> 时间：2012-11-14T12:24:27.870
> 
> 标签：java, android, image

我想要做的，是在我选择的位置画一个图像的切口到屏幕上。

我可以很容易地将它加载到位图中。然后画一个小节。

但是当图像很大时，这显然会耗尽内存。

我的屏幕是表面视图。画布等也是如此。

**那么如何在给定的偏移量处绘制图像的一部分并调整大小。无需将原始文件加载到内存中**

我找到了一个看起来正确的答案，但它不能正常工作。使用文件中的可绘制对象。下面的代码尝试。除了它产生的随机调整大小之外，它也是不完整的。

例子：

![例子](../Images/3e81b6c80908b126b67645214d322544.png)

```
Drawable img = Drawable.createFromPath(Files.SDCARD + image.rasterName); 

    int drawWidth = (int) (image.GetOSXWidth()/(maxX - minX)) * m_canvas.getWidth();        
    int drawHeight = (int)(image.GetOSYHeight()/(maxY - minY)) * m_canvas.getHeight();

    // Calculate what part of image I need...
    img.setBounds(0, 0, drawWidth, drawHeight);

    // apply canvas matrix to move before draw...?
    img.draw(m_canvas); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:35:05.553

`BitmapRegionDecoder`可用于加载图像的指定区域。`ImageView`这是在两个s中设置位图的示例方法。第一个是完整图像，发送只是完整图像的一个区域：

```
private void configureImageViews() {

    String path = externalDirectory() + File.separatorChar
            + "sushi_plate_tokyo_20091119.png";

    ImageView fullImageView = (ImageView) findViewById(R.id.fullImageView);
    ImageView bitmapRegionImageView = (ImageView) findViewById(R.id.bitmapRegionImageView);

    Bitmap fullBitmap = null;
    Bitmap regionBitmap = null;

    try {
        BitmapRegionDecoder bitmapRegionDecoder = BitmapRegionDecoder
                .newInstance(path, false);

        // Get the width and height of the full image
        int fullWidth = bitmapRegionDecoder.getWidth();
        int fullHeight = bitmapRegionDecoder.getHeight();

        // Get a bitmap of the entire image (full plate of sushi)
        Rect fullRect = new Rect(0, 0, fullWidth, fullHeight);
        fullBitmap = bitmapRegionDecoder.decodeRegion(fullRect, null);

        // Get a bitmap of a region only (eel only)
        Rect regionRect = new Rect(275, 545, 965, 1025);
        regionBitmap = bitmapRegionDecoder.decodeRegion(regionRect, null);

    } catch (IOException e) {
        // Handle IOException as appropriate
        e.printStackTrace();
    }

    fullImageView.setImageBitmap(fullBitmap);
    bitmapRegionImageView.setImageBitmap(regionBitmap);

}

// Get the external storage directory
public static String externalDirectory() {
    File file = Environment.getExternalStorageDirectory();
    return file.getAbsolutePath();
} 
```

结果是完整的图像（顶部）和图像的一个区域（底部）：

![在此处输入图像描述](../Images/2c4dc354d3e16c9d0f14dbae88327d5e.png)

# dynamics-crm - 为什么我可以从 CRM4 发现服务中获取组织，但不能针对它们运行请求？

> ID：13378790
> 
> 赞同：0
> 
> 时间：2012-11-14T12:25:19.620
> 
> 标签：dynamics-crm, crm

我正在使用 Microsoft CRM 4.0 SDK 连接到面向 Internet 的部署 (IFD)。我可以调用发现服务并取回组织列表。当我尝试使用其中一个组织时，我收到 401 Unauthorized 错误。我试图将其归结为最简单的程序来证明这一点。代码（更改了 URL、用户名和密码）如下所示。我希望这能输出组织中的帐户数量。当我运行它时，我在使用该服务时收到 401 Unauthorized 异常。

```
// Get orgs from disco service
CrmDiscoveryService disco = new CrmDiscoveryService();
disco.Url = "https://notthereal.crmurl.com/MSCRMServices/2007/SPLA/CrmDiscoveryService.asmx";
RetrieveOrganizationsRequest orgRequest = new RetrieveOrganizationsRequest();
orgRequest.UserId = @"mydomain\myuser";
orgRequest.Password = "mypassword";
RetrieveOrganizationsResponse orgResponse =
    (RetrieveOrganizationsResponse)disco.Execute(orgRequest);

// Find the test org
OrganizationDetail orgInfo = null;
foreach (OrganizationDetail orgdetail in orgResponse.OrganizationDetails)
{
    if (orgdetail.OrganizationName.Equals("TestOrganization"))
    {
        orgInfo = orgdetail;
        break;
    }
}
if (orgInfo == null)
{
    throw new Exception("The specified organization was not found.");
}

// Get a CRM ticket
RetrieveCrmTicketRequest ticketRequest = new RetrieveCrmTicketRequest();
ticketRequest.OrganizationName = orgInfo.OrganizationName;
ticketRequest.UserId = @"mydomain\myuser";
ticketRequest.Password = "mypassword";
RetrieveCrmTicketResponse ticketResponse
    = (RetrieveCrmTicketResponse)disco.Execute(ticketRequest);

// Create an authorization token
CrmAuthenticationToken sdktoken = new CrmAuthenticationToken();
sdktoken.AuthenticationType = 2;
sdktoken.OrganizationName = orgInfo.OrganizationName;
sdktoken.CrmTicket = ticketResponse.CrmTicket;
CrmService service = new CrmService();
service.CrmAuthenticationTokenValue = sdktoken;
service.Url = orgInfo.CrmServiceUrl;

// Retrieve the accounts
RetrieveMultipleRequest request = new RetrieveMultipleRequest();
request.Query = new QueryExpression("account");

// 401 EXCEPTION WHEN EXECUTING NEXT LINE
var response = (RetrieveMultipleResponse)service.Execute(request);

// Show the count of accounts
Console.WriteLine(response.BusinessEntityCollection.BusinessEntities.Count); 
```

迪斯科服务请求正常工作，但 CRM 服务请求失败，这对我来说似乎很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-02T07:45:06.323

当我遇到同样的问题时，为其他人发布答案......

看起来 Richard 为 AuthenticationType 输入了错误的值

```
CrmAuthenticationToken sdktoken = new CrmAuthenticationToken();
sdktoken.AuthenticationType = 2; 
```

根据[MSDN](https://msdn.microsoft.com/en-us/library/bb955408.aspx)

```
The AuthenticationType class exposes the following members. 
Field       Value   Description 
AD          0       Specifies Active Directory authentication. 
Passport    1       Specifies Windows Live ID authentication. 
Spla        2       Specifies Internet-Facing Deployment authentication (formerly known as SPLA). 
```

`AuthenticationType`可以通过添加参考来使用此枚举，`Microsoft.Crm.sdk.dll`如[MSDN中所述](https://msdn.microsoft.com/en-us/library/bb928920.aspx)

# asp.net-mvc - MVC FormCollection allKeys 字符串 [0]

> ID：13378791
> 
> 赞同：1
> 
> 时间：2012-11-14T12:25:20.873
> 
> 标签：asp.net-mvc, checkbox, http-post, formcollection

第一次来，如果写错了请见谅。。。

我有这个 HTML 代码，我需要获取 FormCollection 中的所有复选框

```
 [HttpPost]
      public ActionResult teste2(FormCollection collection)
            {
                var names = collection.AllKeys.Where(c => c.StartsWith("ckb") &&
                            collection.GetValue(c) != null &&
                            collection.GetValue(c).AttemptedValue == "1");

                return View();

            } 
```

但我只得到这个结果：allKeys string [0]。我尝试使用 Ajax/Jason 和我在网上找到的其他建议来执行此操作，但我得到了相同的结果。我不知道出了什么问题。
请帮我！=]

```
@using (Html.BeginForm())
{ 
    <ul>
        @foreach (CWGD.BE.funcionalidade func0 in Model.func.Where(q => q.funcionalidade_pai == null))
        { 
            <li>
                <input type="checkbox" name="ckb_@(func0.funcionalidade_id)"/>
                @func0.funcionalidade_nome
                <ul>
                    @foreach (var func1 in Model.func.Where(q => q.funcionalidade_pai == func0.funcionalidade_id))
                    {

                        <li>
                            <input type="checkbox" name="ckb_@(func1.funcionalidade_id)"/>
                            @func1.funcionalidade_nome
                            <ul>
                                @foreach (var func2 in Model.func.Where(q => q.funcionalidade_pai == func1.funcionalidade_id))
                                {

                                    <li>
                                        <input type="checkbox" name="ckb_@(func2.funcionalidade_id)" id="ckb_@(func2.funcionalidade_id)" />
                                        @func2.funcionalidade_nome</li>

                                }
                            </ul>
                        </li>                
                    }
                </ul>
            </li>        
        }
    </ul>
    <input type="submit" value="Save" />
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:47:29.310

您的第一项工作是启动[Fiddler](http://www.fiddler2.com/)并查看这些值是否实际发送到服务器。这是一个通用建议，每次出现任何类似问题时都应使用。

在您的情况下，问题可能是您的`<checkbox>`标签不包含`value`属性，因此它们只会向服务器发送一个空值。

您还应该提供参数，`Html.BeginForm`以便表单生成正确的目标操作。

还要记住，未选中的复选框永远不会在 POST 数据中发送到服务器。

# android - Matlab 服务器和 Android 客户端之间的连接

> ID：13378794
> 
> 赞同：2
> 
> 时间：2012-11-14T12:25:28.457
> 
> 标签：android, sockets, matlab, connection

我正在尝试在 PC 上运行的 matlab 和 Android 设备（Galaxy 选项卡）之间建立可靠的连接

我的客户端代码基于此[链接](http://myandroidsolutions.blogspot.co.il/2012/07/android-tcp-connection-tutorial.html)中的出色示例。在此示例中，服务器是在 pc 上运行的 java 应用程序。我用 java 应用程序运行了这个例子，它运行良好。

我的 matlab 代码基于我在 Mathworks 中找到的代码[：（](http://www.mathworks.com/matlabcentral/fileexchange/21131-tcpip-socket-communications-in-matlab)我的代码发布在下面）

不幸的是，行为非常不一致，通常情况下，根本没有联系。（有时它确实**有效**，但只发送一个字）

我不明白服务器端是如何工作的，代码行“ServerConnect”是阻塞的吗？它必须与客户端同步吗？

提前致谢！

爱丽儿

这是我的matlab代码：

这是主程序：

```
import java.net.ServerSocket
import java.io.*

MessageStr = {'THIS','IS','MY','MESSAGE'};

server_socket  = ServerConnect(4444,inf);

output_socket = server_socket.accept;

for k = 1:length(MessageStr)

pause(3);  
ServerSend(MessageStr{k},server_socket,output_socket); 

end

%clean

close(server_socket); 
```

这是函数 ServerConnect 的代码

```
function server_socket  = ServerConnect(output_port, number_of_retries)
import java.net.ServerSocket
import java.io.*

retry             = 0;

server_socket  = [];
fprintf(1, 'waiting for client to connect\n');
while true

    retry = retry + 1;

    try
        if ((number_of_retries > 0) && (retry > number_of_retries))
            fprintf(1, 'Too many retries\n');
            break;
        end

        %fprintf(1, ['Try %d waiting for client to connect to this ' ...
        %            'host on port : %d\n'], retry, output_port);

        % wait for 1 second for client to connect server socket

        server_socket = ServerSocket(output_port);
        server_socket.setSoTimeout(1000);

        fprintf(1, 'Client connected\n');

        break;

    catch
        if ~isempty(server_socket)
            server_socket.close
        end

        % pause before retrying
        pause(1);
    end
end

end 
```

服务器发送的代码：

```
function ServerSend(message,server_socket,output_socket);

import java.net.ServerSocket
import java.io.*

try

output_stream   = output_socket.getOutputStream;
d_output_stream = DataOutputStream(output_stream);

% output the data over the DataOutputStream
% Convert to stream of bytes
fprintf(1, 'Writing %d bytes\n', length(message))

d_output_stream.writeBytes(char(message));
d_output_stream.flush;

catch

end

end 
```

# php - php mysql连接时间我们的错误

> ID：13378795
> 
> 赞同：0
> 
> 时间：2012-11-14T12:25:38.967
> 
> 标签：php, mysql

我正在使用 php 4 和 mysql4。在应用程序中，我需要使用大约 6 到 8 个表来生成报告。但是当我尝试生成时，它需要超过 20 分钟并显示连接超时并且没有生成任何内容.. 我怎样才能增加连接时间，我需要知道这个错误是来自 PHP 还是来自 MYSQL..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:30:53.163

```
//your mysterious loop {
  echo 'i\'m here';
  flush();
} 
```

[http://php.net/manual/en/function.flush.php](http://php.net/manual/en/function.flush.php)

# javascript - 如何使用 Javascript 动态更改 SVG 中的图像模式

> ID：13378797
> 
> 赞同：6
> 
> 时间：2012-11-14T12:25:42.967
> 
> 标签：javascript, image, svg

如何使用 Javascript 将图像模式动态更改/添加到页面上的现有 SVG 中？或任何图书馆。

这是我到目前为止所得到的..

```
function addSvgStuff(svg, id) {

    var svgNS = svg.namespaceURI;
    var pattern = document.createElementNS(svgNS, 'pattern');

    pattern.setAttribute('id', id);
    pattern.setAttribute('patternUnits', 'userSpaceOnUse');
    pattern.setAttribute('width', 500);
    pattern.setAttribute('height', 500);

        var image = document.createElementNS(svgNS, 'image');
        image.setAttribute('xlink:href', 'http://www.jampez.co.uk/sensoryuk/events/test.jpg');
        image.setAttribute('x', -100);
        image.setAttribute('y', -100);
        image.setAttribute('width', 500);
        image.setAttribute('height', 500);

    pattern.appendChild(image);

    var defs = svg.querySelector('defs') ||
    svg.insertBefore( document.createElementNS(svgNS,'defs'), svg.firstChild);

    $('svg polygon').attr('fill', 'url(#' + id + ')');

    return defs.appendChild(pattern);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T12:41:16.503

您需要使用 setAttributeNS 来设置 xlink 命名空间中的属性，所以

```
 image.setAttribute('xlink:href', 'http://www.jampez.co.uk/sensoryuk/events/test.jpg'); 
```

应该

```
 image.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', 'http://www.jampez.co.uk/sensoryuk/events/test.jpg'); 
```

# php - 多查询计数sql

> ID：13378799
> 
> 赞同：1
> 
> 时间：2012-11-14T12:25:45.087
> 
> 标签：php, mysql, sum

我有一个使用 SUM 的脚本，它计算所有订购的物品，因此产品 1 已订购 6 次，产品 2 已订购 9 次。现在在一个单独的表中（我从中获取 orderid）可能有一个奖励代码。如果此奖励代码是产品（从其他表中检查），那么我还需要将其添加到计数中。

解释起来很奇怪。这是我的代码。

```
$query = "SELECT productid, SUM(quantity) FROM `order` GROUP BY productid"; 

$result = mysql_query($query) or die(mysql_error());

// Print out result
while($row = mysql_fetch_array($result)){
    $prodname = fetchproductname($row[productid]);
    echo $prodname ." - ". $row['SUM(quantity)'];
    echo "<br />";
} 
```

我需要知道是否有一种方法可以存储所有这些结果，然后查询奖励代码，获取项目编号（如果有的话）并将其添加到总数中。我尝试了一些不同的查询和使用 while 语句的方法，但都失败了。

我正在使用 4 个表格，订单（产品 ID 和数量等）、产品（包含产品名称）、调度（包含奖励代码）、奖金（包含产品 ID）

样本数据 [http://i.imgur.com/lZnba.png](http://i.imgur.com/lZnba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:36:37.847

也许我错过了复杂性，但听起来您只需要从产品循环中查询您的奖励代码：

```
while($row = mysql_fetch_array($result)){
    $prodname = fetchproductname($row[productid]);
    $productCount = $row['SUM(quantity)'];
    // Now query the bonus codes (you can come up with a better query probably, but this gives the idea)
    $sql = "SELECT COUNT(bonus_code) bonus_count FROM dispatch d WHERE EXISTS (SELECT * FROM bonus b WHERE b.code = d.bonus_code AND b.productid = $productId)";
    $bonusresult = mysql_query($sql) or die(mysql_error());
    if ($bonusRow = mysql_fetch_array($bonusresult)) {
        $productCount += $bonusRow['bonus_count'];
    }
    echo $prodname ." - ". $productCount;
    echo "<br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:40:23.893

如果我理解这个问题，您所要做的就是将结果存储在关联数组中。得到结果后：

```
$product_array = array();
foreach($result as $row)
{
    $prodname = fetchproductname($row[productid]);
    $product_array[$prodname] = $row['SUM quantity'];
} 
```

然后以相同的方式遍历您的 Bonus 表，并为您找到的每个奖励添加一个到相关数组：

```
[...]
if(isset($product_array[$bonus_product_name]))
    {
    $product_array[$bonus_product_name] = $product_array[$bonus_product_name] + 1;
    }
else
    {
    $product_array[$bonus_product_name] = 1;
    } 
```

最后，只需遍历产品数组即可打印出值

```
$keys = array_keys($product_array);
foreach($keys as $key)
    {
    echo("$key - $product_array[$key]");
    } 
```

# c# - .aspx 页面在我的网站上线后不显示

> ID：13378800
> 
> 赞同：-2
> 
> 时间：2012-11-14T12:25:46.350
> 
> 标签：c#, asp.net, web-hosting

我正在尝试执行重定向到另一个页面，如下所示：

```
Response.Redirect("admin1.aspx"); 
```

admin1.aspx 页面存在于该托管空间中，但我收到此错误..

```
Server Error in '/' Application.

The resource cannot be found. 
```

我应该怎么办 ...

admin1.aspx 有一个母版页......托管服务器告诉我检查我的代码

![在此处输入图像描述](../Images/64efad4dd708b677196ff3ca54d7db5f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:52:14.917

您必须检查您要重定向的页面（您正在编写的页面`Response.Redirect("admin1.aspx");`）和 admin1.aspx 是否在同一个文件夹中。

如果它们在同一个文件夹中，请尝试直接访问页面 admin1.aspx 或从 url 访问同一文件夹中的任何其他页面，以确保错误不是其他原因

还要检查这些链接：

[http://forums.iis.net/p/1160687/1916039.aspx](http://forums.iis.net/p/1160687/1916039.aspx)

[“/”应用程序中的服务器错误，找不到资源](https://stackoverflow.com/questions/6758808/server-error-in-application-the-resource-cannot-be-found)

# hibernate - 使用 JPQL 从地图中删除

> ID：13378801
> 
> 赞同：0
> 
> 时间：2012-11-14T12:25:59.630
> 
> 标签：hibernate, jpa, jpql

我有这些实体：

```
@Entity
public class ActiveQuest {

    @OneToMany(orphanRemoval=true,cascade=CascadeType.ALL,mappedBy="activeQuest")
    @MapKey(name="task")
    private Map<String, ActiveTask> activeTasks = Maps.createHash();

}

@Entity
public class ActiveTask implements Serializable {

    @ManyToOne(optional=false)
    private ActiveQuest activeQuest;

} 
```

`ActiveTask`要从`ActiveQuest`我当前执行的操作中删除一个：

```
final ActiveQuest aq = em.find(....);
aq.getActiveTasks().remove(task); 
```

我可以用单个 JPQL 查询更快地（不获取）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:04:49.887

是的。[JPQL 规范](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_bulk)甚至有一些例子

```
 DELETE FROM Publisher pub WHERE pub.revenue > 1000000.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:08:47.357

刚刚意识到，如果我只是从任务的侧面而不是任务的角度查看地图，我根本不需要考虑地图。

`DELETE FROM ActiveTask t WHERE t.activeQuest = :quest AND t.task = :taskname`

# ios - 如何将 RFC3339-String 转换为 NSDate

> ID：13378802
> 
> 赞同：0
> 
> 时间：2012-11-14T12:26:02.337
> 
> 标签：ios, cocoa, nsdate, nsdateformatter

我正在尝试将 RFC3339 格式的字符串对象转换为相应的 NSDateObject：收到的字符串如下所示：`2012-10-29T00:00:00+01:00` 我尝试使用 NSDateFormatter 但我不知道正确的说明符？任何想法如何以正确的方式做到这一点？

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc]init];
[dateFormat setDateFormat:@"yyyy-MM-ddThh:mm:ss???????"]; // ?????
NSDate *date = [dateFormat dateFromString:startAtString]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:41:24.490

在我的一个项目中，我有这个例程：

```
-(NSDate *)convertUTCStringToDate:(NSString *)utcDateString {
     NSDateFormatter *df = [[NSDateFormatter alloc]init];
     df.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss";
     return [df dateFromString:utcDateString];
} 
```

# android - 如何录制音频？

> ID：13378803
> 
> 赞同：0
> 
> 时间：2012-11-14T12:26:04.060
> 
> 标签：android, audio

我正在尝试使用以下代码录制音频。

[android-录音教程](http://www.benmccann.com/dev-blog/android-audio-recording-tutorial/)

当我调用开始记录时，它工作正常。

但是，当我调用停止录制时，它会抛出错误消息，例如休闲。

```
 ..............................................................

 11-14 18:03:28.361: V/tag(23349): outgoing call ended
 11-14 18:03:28.361: V/tag(23349): record.111.android.media.MediaRecorder@4052de80
 11-14 18:03:28.371: E/MediaRecorder(23349): stop called in an invalid state: 1
 11-14 18:03:28.371: D/AndroidRuntime(23349): Shutting down VM
 11-14 18:03:28.371: W/dalvikvm(23349): threadid=1: thread exiting with uncaught      exception (group=0x40015560)
 11-14 18:03:28.381: E/AndroidRuntime(23349): FATAL EXCEPTION: main
 11-14 18:03:28.381: E/AndroidRuntime(23349): java.lang.RuntimeException: Unable to start receiver com.example.Audio.CallsBrodcastReceiver: java.lang.IllegalStateException
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at android.app.ActivityThread.handleReceiver(ActivityThread.java:1805)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at android.app.ActivityThread.access$2400(ActivityThread.java:117)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:981)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at android.os.Handler.dispatchMessage(Handler.java:99)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at android.os.Looper.loop(Looper.java:123)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at android.app.ActivityThread.main(ActivityThread.java:3683)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at java.lang.reflect.Method.invokeNative(Native Method)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at java.lang.reflect.Method.invoke(Method.java:507)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at dalvik.system.NativeStart.main(Native Method)
 11-14 18:03:28.381: E/AndroidRuntime(23349): Caused by: java.lang.IllegalStateException
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at android.media.MediaRecorder.stop(Native Method)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at com.example.Audio.AudioRecorder.stop(AudioRecorder.java:64)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at com.example.Audio.CallsBrodcastReceiver.onReceive(CallsBrodcastReceiver.java:147)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   at android.app.ActivityThread.handleReceiver(ActivityThread.java:1794)
 11-14 18:03:28.381: E/AndroidRuntime(23349):   ... 10 more 
```

如果有人知道解决方案，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:35:31.523

```
try this code for start and stop recording of sounds in android.

public class SoundRecordingActivity extends Activity {

    MediaRecorder recorder;
    File audiofile = null;
    private static final String TAG = "SoundRecordingActivity";
    private View startButton;
    private View stopButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        startButton = findViewById(R.id.start);
        stopButton = findViewById(R.id.stop);
    }

    public void startRecording(View view) throws IOException {

        startButton.setEnabled(false);
        stopButton.setEnabled(true);

        File sampleDir = Environment.getExternalStorageDirectory();
        try {
            audiofile = File.createTempFile("sound", ".3gp", sampleDir);
        } catch (IOException e) {
            Log.e(TAG, "sdcard access error");
            return;
        }
        recorder = new MediaRecorder();
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile(audiofile.getAbsolutePath());
        recorder.prepare();
        recorder.start();
    }

    public void stopRecording(View view) {
        startButton.setEnabled(true);
        stopButton.setEnabled(false);
        recorder.stop();
        recorder.release();
        addRecordingToMediaLibrary();
    }

    protected void addRecordingToMediaLibrary() {
        ContentValues values = new ContentValues(4);
        long current = System.currentTimeMillis();
        values.put(MediaStore.Audio.Media.TITLE, "audio" + audiofile.getName());
        values.put(MediaStore.Audio.Media.DATE_ADDED, (int) (current / 1000));
        values.put(MediaStore.Audio.Media.MIME_TYPE, "audio/3gpp");
        values.put(MediaStore.Audio.Media.DATA, audiofile.getAbsolutePath());
        ContentResolver contentResolver = getContentResolver();

        Uri base = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
        Uri newUri = contentResolver.insert(base, values);

        sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, newUri));
        Toast.makeText(this, "Added File " + newUri, Toast.LENGTH_LONG).show();
    }
}

 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
Add this permissions in Manifest And Let me know the status? 
```

# python - 将记录和映射字符串插入字段？

> ID：13378810
> 
> 赞同：0
> 
> 时间：2012-11-14T12:26:30.797
> 
> 标签：python, sql, pymssql

我是 python 和 SQL 的新手，但享受学习曲线。

我正在使用[pymssql](http://pymssql.sourceforge.net/ref_pymssql.php)并且我认为这将是一个相当基本的问题。

在一个函数中，我需要在表中插入一条记录，并将我之前计算的一些变量传递给 INSERT 语句。

目前我的代码如下所示：

> `var 1 = "Hello"`
> `var 2 = "Bye"`
> `var 3 = "12/12/12`
> `cursor.execute("INSERT INTO table (field1, field2, field3) VALUES(%s, %s, %s)", var1, var2, var3)`

这将返回一个错误：

> execute() 最多接受 2 个位置参数（给定 4 个）

我做错了什么，记住我正在学习，这样做会更优雅吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:32:31.767

您将每个参数分别传递给`execute()`，它只需要两个。

```
cursor.execute("INSERT INTO table (field1, field2, field3) VALUES(%s, %s, %s)",
               (var1, var2, var3)) 
```

现在，您正在向它传递两个参数。第一个是一个字符串，第二个是*`tuple`*你的变量（注意额外的`()`）。

# java - 是否可以捕获除运行时异常之外的所有异常？

> ID：13378811
> 
> 赞同：22
> 
> 时间：2012-11-14T12:26:30.900
> 
> 标签：java, exception, generics, try-catch, runtimeexception

我有一个声明会引发很多检查异常。我可以像这样为所有这些添加所有捕获块：

```
try {
    methodThrowingALotOfDifferentExceptions();
} catch(IOException ex) {
    throw new MyCustomInitializationException("Class Resolver could not be initialized.", ex);
} catch(ClassCastException ex) {
    throw new MyCustomInitializationException("Class Resolver could not be initialized.", ex);
} catch... 
```

我不喜欢这样，因为它们都以相同的方式处理，因此存在代码重复，并且还有很多代码要编写。相反可以捕获`Exception`：

```
try {
    methodThrowingALotOfDifferentExceptions();
} catch(Exception ex) {
    throw new MyCustomInitializationException("Class Resolver could not be initialized.", ex);
} 
```

没关系，除了我希望所有运行时异常都被丢弃而不被捕获。有什么解决办法吗？我在想一些聪明的对要捕获的异常类型的通用声明可能会起作用（或者可能不会）。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-14T12:28:24.850

您可以执行以下操作：

```
try {
    methodThrowingALotOfDifferentExceptions();
} catch(RuntimeException ex) {
    throw ex;
} catch(Exception ex) {
    throw new MyCustomInitializationException("Class Resolver could not be initialized.", ex);
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-14T12:32:18.100

如果您可以使用 Java 7，则可以使用[Multi-Catch](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html)：

```
try {
  methodThrowingALotOfDifferentExceptions();
} catch(IOException|ClassCastException|... ex) {
  throw new MyCustomInitializationException("Class Resolver could not be initialized.", ex);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T12:50:10.563

您可以尝试这样的事情，基本上捕获所有内容，然后重新抛出`RuntimeException`它是否是该类的实例......

```
try {
    methodThrowingALotOfDifferentExceptions();
} catch(Exception ex) {
    if (ex instanceof RuntimeException){
        throw ex;
    }
    else {
        throw new MyCustomInitializationException("Class Resolver could not be initialized.", ex);
    }
} 
```

看起来好像一遍又一遍地编写会很麻烦（并且不利于可维护性），我可能会将代码移动到不同的类中，就像这样......

```
public class CheckException {
    public static void check(Exception ex, String message) throws Exception{
        if (ex instanceof RuntimeException){
            throw ex;
        }
        else {
            throw new MyCustomInitializationException(message, ex);
        }
    }
} 
```

并像这样在您的代码中使用它...

```
try {
    methodThrowingALotOfDifferentExceptions();
} catch(Exception ex) {
    CheckException.check(ex,"Class Resolver could not be initialized.");
} 
```

请注意，我们传入 ，`message`以便我们仍然可以自定义我们的`MyCustomInitializationException`.

# java - 改变双回合的方式

> ID：13378813
> 
> 赞同：0
> 
> 时间：2012-11-14T12:26:45.040
> 
> 标签：java, double, rounding

我有很多数据，我从数据库中检索并使用这些数据创建图表（其中一些已添加）

其中一个图表显示百分比，因此我必须将我的数据计算为百分比。

我的老板有另一个程序也显示百分比（但没有图表），在制作我的程序后，他来找我说我表中的数字是错误的。

我查看了一下，发现双倍（按百分比计算）是以下数字：***85.53178390026166***

显然我的程序将这个数字四舍五入到 86。

现在我的问题是：有什么方法可以阻止程序四舍五入，除非它是 0.75 或更接近？而是在这个例子中四舍五入到 85？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:30:05.597

好吧，首先请注意，`85.53`它`86`比它更接近`85`。`.75`话虽如此，如果您希望它仅在大于或等于时四舍五入，请执行以下操作：

```
Math.floor(number + .25); 
```

例子：

```
10.2 -> 10.45 -> 10
10.6 -> 10.85 -> 10
10.74 -> 10.99 -> 10
10.76 -> 11.01 -> 11 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T12:34:14.303

尝试这个

```
import java.math.BigDecimal;
BigDecimal myDec = new BigDecimal( myDouble );
myDec = myDec.setScale( 2, BigDecimal.ROUND_HALF_UP );

import java.math.BigDecimal;
BigDecimal myDec = new BigDecimal( myDouble );
myDec = myDec.setScale( 2, BigDecimal.ROUND_HALF_DOWN ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T12:36:14.053

尝试这个：

```
int returnRoundOffNumber(Double number)
{  

if((number-Integer.parseInt(number)>0.75)
 return Math.ceil(number);

else   
  return Math.floor(number);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T12:29:44.663

如果您的老板那么挑剔，那么我建议您不要将它们四舍五入，但您可以使用您与老板协商的一些小数位来显示数字。

# string - Base64长度计算？

> ID：13378815
> 
> 赞同：185
> 
> 时间：2012-11-14T12:27:23.353
> 
> 标签：string, base64, padding, formula

*阅读 base64 [wiki](http://en.wikipedia.org/wiki/Base64#Padding)后...*

我试图弄清楚公式是*如何工作的：*

给定一个长度为 的字符串`n`，base64 长度将为![在此处输入图像描述](../Images/5787c5948b71cd0406254f072796f043.png)

这是：`4*Math.Ceiling(((double)s.Length/3)))`

我已经知道 base64 长度必须是`%4==0`让解码器知道原始文本长度是多少。

序列的最大填充数可以是`=`或`==`。

> wiki ：每个输入字节的输出字节数约为 4 / 3（33% 开销）

**问题：**

**上面的信息如何**与输出长度一致 ![在此处输入图像描述](../Images/5787c5948b71cd0406254f072796f043.png)？

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2012-11-14T12:29:05.277

每个字符用于表示 6 位 ( `log2(64) = 6`)。

因此使用 4 个字符来表示`4 * 6 = 24 bits = 3 bytes`.

所以你需要`4*(n/3)`chars 来表示`n`字节，这需要四舍五入到 4 的倍数。

四舍五入到 4 的倍数后未使用的填充字符数显然是 0、1、2 或 3。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2015-08-21T12:19:26.667

`4 * n / 3`给出未填充的长度。

并且四舍五入到最接近的 4 的倍数进行填充，因为 4 是 2 的幂，所以可以使用按位逻辑运算。

```
((4 * n / 3) + 3) & ~3 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-07-25T17:26:20.253

作为参考，Base64编码器的长度公式如下：

[![Base64编码器的长度公式](../Images/c479762968c64f22518a2699742cd8e2.png)](https://i.stack.imgur.com/DEB8w.png)

正如您所说，给定`n`数据字节的 Base64 编码器将生成一串`4n/3`Base64 字符。换句话说，每 3 个字节的数据将产生 4 个 Base64 字符。**编辑**：*评论正确地指出我之前的图形没有考虑填充；填充的正确公式是* **`4(Ceiling(n/3))`**.

Wikipedia 文章在其示例中准确显示了 ASCII 字符串如何`Man` 编码为 Base64 字符串。`TWFu`输入字符串的大小为 3 个字节或 24 位，因此公式正确预测输出将是 4 个字节（或 32 位）长：`TWFu`. 该过程将每 6 位数据编码为 64 个 Base64 字符之一，因此 24 位输入除以 6 得到 4 个 Base64 字符。

您在评论中询问编码的大小`123456`。请记住，该字符串的每个字符的大小都是 1 字节或 8 位（假设 ASCII/UTF8 编码），我们正在编码 6 字节或 48 位的数据。根据等式，我们期望输出长度为`(6 bytes / 3 bytes) * 4 characters = 8 characters`。

正如我们预期的那样，`123456`放入 Base64 编码器会创建8个字符长。`MTIzNDU2`

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-07-30T15:19:40.203

## 整数

通常我们不想使用双精度数，因为我们不想使用浮点运算、舍入误差等。它们只是没有必要。

为此，记住如何执行天花板除法是一个好主意：`ceil(x / y)`在双打中可以写成`(x + y - 1) / y`（同时避免负数，但要注意溢出）。

## 可读

如果您追求可读性，您当然也可以像这样对其进行编程（Java 中的示例，对于 C，您当然可以使用宏）：

```
public static int ceilDiv(int x, int y) {
    return (x + y - 1) / y;
}

public static int paddedBase64(int n) {
    int blocks = ceilDiv(n, 3);
    return blocks * 4;
}

public static int unpaddedBase64(int n) {
    int bits = 8 * n;
    return ceilDiv(bits, 6);
}

// test only
public static void main(String[] args) {
    for (int n = 0; n < 21; n++) {
        System.out.println("Base 64 padded: " + paddedBase64(n));
        System.out.println("Base 64 unpadded: " + unpaddedBase64(n));
    }
} 
```

## 内联

**软垫**

我们知道每次 3 个字节（或更少）需要 4 个字符块。因此，公式变为（对于 x = n 和 y = 3）：

```
blocks = (bytes + 3 - 1) / 3
chars = blocks * 4 
```

或结合：

```
chars = ((bytes + 3 - 1) / 3) * 4 
```

你的编译器会优化掉`3 - 1`，所以就这样保留它以保持可读性。

**无填充**

不太常见的是未填充的变体，为此我们记住每个 6 位都需要一个字符，四舍五入：

```
bits = bytes * 8
chars = (bits + 6 - 1) / 6 
```

或结合：

```
chars = (bytes * 8 + 6 - 1) / 6 
```

然而，我们仍然可以除以二（如果我们愿意的话）：

```
chars = (bytes * 4 + 3 - 1) / 3 
```

## 不可读

如果您不相信您的编译器会为您进行最终优化（或者如果您想混淆您的同事）：

**软垫**

```
((n + 2) / 3) << 2 
```

**无填充**

```
((n << 2) | 2) / 3 
```

* * *

所以我们有两种逻辑计算方式，我们不需要任何分支、位运算或模运算——除非我们真的想要。

笔记：

*   显然，您可能需要将 1 添加到计算中以包含空终止字节。
*   对于 Mime，您可能需要注意可能的行终止字符等（寻找其他答案）。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2020-02-05T00:02:54.313

（试图给出一个简洁而完整的推导。）

每个输入字节都有 8 位，因此对于*n 个*输入字节，我们得到：

> *n* × 8 输入位

每 6 位是一个输出字节，因此：

> *ceil* ( *n* × 8 / 6) =  *ceil* ( *n* × 4 / 3) 输出字节数

这是没有填充的。

使用填充，我们将其四舍五入为四的倍数：

> *ceil* ( *ceil* ( *n* × 4 / 3) / 4) × 4 =  *ceil* ( *n* × 4 / 3 / 4) × 4 =  *ceil* ( *n* / 3) × 4 输出字节

有关第一个等效项，请参见[嵌套分区](https://en.wikipedia.org/wiki/Floor_and_ceiling_functions#Nested_divisions)（维基百科）。

使用整数算术，***ceil* ( *n* / *m* )**可以计算为**( *n* + *m* – 1) div *m***，因此我们得到：

> ( *n* * 4 + 2) 没有填充的 div 3
> 
> ( *n* + 2) div 3 * 4 带填充

举例说明：

```
 n   with padding    (n + 2) div 3 * 4    without padding   (n * 4 + 2) div 3 
------------------------------------------------------------------------------
 0                           0                                      0
 1   AA==                    4            AA                        2
 2   AAA=                    4            AAA                       3
 3   AAAA                    4            AAAA                      4
 4   AAAAAA==                8            AAAAAA                    6
 5   AAAAAAA=                8            AAAAAAA                   7
 6   AAAAAAAA                8            AAAAAAAA                  8
 7   AAAAAAAAAA==           12            AAAAAAAAAA               10
 8   AAAAAAAAAAA=           12            AAAAAAAAAAA              11
 9   AAAAAAAAAAAA           12            AAAAAAAAAAAA             12
10   AAAAAAAAAAAAAA==       16            AAAAAAAAAAAAAA           14
11   AAAAAAAAAAAAAAA=       16            AAAAAAAAAAAAAAA          15
12   AAAAAAAAAAAAAAAA       16            AAAAAAAAAAAAAAAA         16 
```

最后，**在 MIME** Base64 编码的情况下，每 76 个输出字节需要两个额外的字节 (CR LF)，根据是否需要终止换行符向上或向下舍入。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-08-17T09:58:40.647

这是一个将编码的 Base 64 文件的原始大小计算为以 KB 为单位的字符串的函数：

```
private Double calcBase64SizeInKBytes(String base64String) {
    Double result = -1.0;
    if(StringUtils.isNotEmpty(base64String)) {
        Integer padding = 0;
        if(base64String.endsWith("==")) {
            padding = 2;
        }
        else {
            if (base64String.endsWith("=")) padding = 1;
        }
        result = (Math.ceil(base64String.length() / 4) * 3 ) - padding;
    }
    return result / 1000;
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-03-23T15:38:09.063

我认为给定的答案错过了原始问题的要点，即需要分配多少空间来适应给定长度为 n 字节的二进制字符串的 base64 编码。

答案是`(floor(n / 3) + 1) * 4 + 1`

这包括填充和终止空字符。如果您进行整数运算，您可能不需要发言权。

包括填充在内，base64 字符串对于原始字符串的每个三字节块需要四个字节，包括任何部分块。添加填充时，字符串末尾额外的一或两个字节仍将转换为 base64 字符串中的四个字节。除非您有非常特殊的用途，否则最好添加填充，通常是等号字符。我在 C 中为空字符添加了一个额外的字节，因为没有这个的 ASCII 字符串有点危险，你需要单独携带字符串长度。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-06-22T06:46:29.600

我在其他回复中看不到简化公式。涵盖了逻辑，但我想要一个用于嵌入式使用的最基本形式：

```
 Unpadded = ((4 * n) + 2) / 3

  Padded = 4 * ((n + 2) / 3) 
```

注意：在计算未填充计数时，我们将整数除法四舍五入，即添加 Divisor-1，在这种情况下为 +2

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-05-29T01:12:56.317

当其他人都在讨论代数公式时，我宁愿只使用 BASE64 本身来告诉我：

```
$ echo "Including padding, a base64 string requires four bytes for every three-byte chunk of the original string, including any partial chunks. One or two bytes extra at the end of the string will still get converted to four bytes in the base64 string when padding is added. Unless you have a very specific use, it is best to add the padding, usually an equals character. I added an extra byte for a null character in C, because ASCII strings without this are a little dangerous and you'd need to carry the string length separately."| wc -c 
```

525

```
$ echo "Including padding, a base64 string requires four bytes for every three-byte chunk of the original string, including any partial chunks. One or two bytes extra at the end of the string will still get converted to four bytes in the base64 string when padding is added. Unless you have a very specific use, it is best to add the padding, usually an equals character. I added an extra byte for a null character in C, because ASCII strings without this are a little dangerous and you'd need to carry the string length separately." | base64 | wc -c 
```

710

所以看起来 3 个字节由 4 个 base64 字符表示的公式似乎是正确的。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-09-30T10:58:21.793

对于所有说 C 的人，看看这两个宏：

```
// calculate the size of 'output' buffer required for a 'input' buffer of length x during Base64 encoding operation
#define B64ENCODE_OUT_SAFESIZE(x) ((((x) + 3 - 1)/3) * 4 + 1) 

// calculate the size of 'output' buffer required for a 'input' buffer of length x during Base64 decoding operation
#define B64DECODE_OUT_SAFESIZE(x) (((x)*3)/4) 
```

取自[这里](https://api-docs.iotivity.org/latest-c/base64_8h_source.html)。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-03-07T00:12:11.593

在我看来，正确的公式应该是：

```
n64 = 4 * (n / 3) + (n % 3 != 0 ? 4 : 0) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-06-03T13:30:26.130

如果 n%3 不为零，我相信这是一个准确的答案，不是吗？

```
 (n + 3-n%3)
4 * ---------
       3 
```

数学版本：

```
SizeB64[n_] := If[Mod[n, 3] == 0, 4 n/3, 4 (n + 3 - Mod[n, 3])/3] 
```

玩得开心

胃肠道

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-08-17T11:13:25.563

javascript中的简单实现

```
function sizeOfBase64String(base64String) {
    if (!base64String) return 0;
    const padding = (base64String.match(/(=*)$/) || [])[1].length;
    return 4 * Math.ceil((base64String.length / 3)) - padding;
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-04-12T08:21:08.777

如果有人有兴趣在 JS 中实现 @Pedro Silva 解决方案，我只是为它移植了相同的解决方案：

```
const getBase64Size = (base64) => {
  let padding = base64.length
    ? getBase64Padding(base64)
    : 0
  return ((Math.ceil(base64.length / 4) * 3 ) - padding) / 1000
}

const getBase64Padding = (base64) => {
  return endsWith(base64, '==')
    ? 2
    : 1
}

const endsWith = (str, end) => {
  let charsFromEnd = end.length
  let extractedEnd = str.slice(-charsFromEnd)
  return extractedEnd === end
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-02-27T07:48:20.550

在 Windows 中 - 我想估计 mime64 大小的缓冲区的大小，但所有精确的计算公式都对我不起作用 - 最后我得到了这样的近似公式：

Mine64 字符串分配大小（近似值）= (((4 * ((二进制缓冲区大小) + 1)) / 3) + 1)

所以最后 +1 - 它用于 ascii-zero - 最后一个字符需要分配以存储零结尾 - 但是为什么“二进制缓冲区大小”是 + 1 - 我怀疑有一些 mime64 终止字符？或者可能这是一些对齐问题。

# c++ - 我可以在一个项目中申报两个 IDD 吗？

> ID：13378816
> 
> 赞同：0
> 
> 时间：2012-11-14T12:27:26.357
> 
> 标签：c++, visual-c++, mfc

我在一个项目中使用两个类。头等舱是`CClientSocketDlg`，另一个是`CUserSpecificationDlg`。

这是代码的一部分。

```
class CClientSocketDlg : public CDialog
{
  public:
    bool StartClient();
    CClientSocketDlg(CWnd* pParent = NULL);
    void AppendMessage(LPCTSTR strText );

    enum { IDD = IDD_CLIENTSOCKET_DIALOG };
    CEdit   m_ctlMsgList;
    CIPAddressCtrl  m_ctlIPAddress;
};

class CuserspecificationDlg : public CDialogEx
{
  public:
    CuserspecificationDlg(CWnd* pParent = NULL);

    // Dialog Data
    enum { IDD = IDD_USERSPECIFICATION_DIALOG };
    CListCtrl m_List;
    CString out;  // For Edit control in list box having IDC_EDIT2
  protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support
}; 
```

我可以在一个项目中声明它们吗？是否允许？我可以`m_ctlIPAddress` 在 CUserspecification 类中使用吗？

# php - Jquery ajax文件上传不起作用

> ID：13378819
> 
> 赞同：0
> 
> 时间：2012-11-14T12:27:42.720
> 
> 标签：php, jquery, cakephp

> **可能重复：**
> [是否可以使用 Ajax 进行文件上传？](https://stackoverflow.com/questions/543926/is-it-possible-to-use-ajax-to-do-file-upload)

我正在尝试使用 jquery ajax 上传图像。我使用了 Jquery Load 函数。我从 firebug 检查了所有输入字段都已提交，除了 type=file 的图像字段。

```
 CakePhp Code
    echo $this->Form->input('Testimonial.photo', array('type'=>'file', 'label'=>'Upload Avator'));

 Jquery Function
    $('a[rel=save]').live('click',function(clickEvent) {
            clickEvent.preventDefault();
            var url = $(this).attr('href');
            $("#block").load(url, $("#form :input").serializeArray(),function(){
                }
            );
        }); 
```

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:30:45.763

`input type="file"`无法使用常规 jQuery Ajax 传输元素。您应该结合“XMLHttpRequest level 2”来查看新的 File API，（不幸的是）所有现代浏览器都不支持它。

解决方法：iframe 或 Flash 解决方案（例如搜索“uploadify”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:39:15.520

你可以看看[jQuery 表单](http://www.malsup.com/jquery/form/)插件。

# php - 通过按钮在 PHP 中发送电子邮件

> ID：13378820
> 
> 赞同：0
> 
> 时间：2012-11-14T12:27:42.807
> 
> 标签：php, email

首先让我说我没有很多编程知识。我使用一个名为 PHPRunner 的程序来生成我所做的大部分 php。它主要用于小型办公室的东西，没什么花哨的。

我的问题是：我有一个表，其中有 6 个字段，其中一个字段称为电子邮件。当我进入记录时，我想放置一个名为“发送通知”的按钮，它将记录详细信息通过电子邮件发送到与该记录关联的电子邮件地址。

任何帮助将不胜感激。我知道它可能在网上，可能搜索错误的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:30:50.070

您可以在 php.ini 中使用[邮件](http://php.net/manual/en/function.mail.php)功能。提供的链接中的示例：

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:30:37.297

要使用 PHP 发送电子邮件，请使用`mail()`函数

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

**例子：**

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$from    = 'webmaster@example.com';
$headers = 'From: '.$from . "\r\n" .
    'Reply-To: '.$from . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

# javascript - JavaScript 将下拉菜单链接到复选框

> ID：13378829
> 
> 赞同：1
> 
> 时间：2012-11-14T12:28:14.333
> 
> 标签：javascript, jquery, html, html-lists

我正在尝试将我的 HTML 下拉菜单链接到其中包含复选框的表格。

这个 javascript 函数试图查看是否选择了“arc”值，然后禁用显示光谱的复选框 3：

```
function showShields()
{
if (document.getElementById("Shield").value == ("arc")
{
document.getElementById("checkBox3").disabled=true;
}
} 
```

这是 HTML 代码：

```
<!DOCTYPE html>

<html>
<head>
<script src="SpiritShield.js"></script>
</head>
<body>
<p>What kind of shield are you interested in?</p>
<select id="Shield">
   <option value="arc">ARC</option>
   <option value="divine">GAS</option>
   <option value="spectral">MIG</option>
   <option value="elysian">ANY</option>
</select>
</body>
<table border="2" cellspacing="0">
<tr>
   <th>Checkbox</th>
   <th>Shield</th>
</tr>
<tr>
   <td><input type="checkbox" id="checkBox1"</td>
   <td>ARC1</td>
</tr>
<tr>
   <td><input type="checkbox" id="checkBox2"</td>
   <td>ARC2</td>
</tr>
<tr>
   <td><input type="checkbox" id="checkBox3"</td>
   <td>SPECTRAL1</td>
</tr>
<tr>
   <td><input type="checkbox" id="checkBox4"</td>
<td>SPECTRAL2</td>
</tr>
</table>

</html> 
```

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:38:26.293

试试这个：http: [//jsfiddle.net/Hpcsq/2/](http://jsfiddle.net/Hpcsq/2/)

```
function showShields(what)
    {
    if (what.value == ("arc"))
        {
        document.getElementById("checkBox3").checked=false;
        }
    }​

<!DOCTYPE html>

<!DOCTYPE html>

<html>
<head>
<script src="SpiritShield.js"></script>
</head>
<body>
<p>What kind of shield are you interested in?</p>
<select id="Shield" onchange="showShields(this)">
       <option value="arc">---</option>
   <option value="arc">ARC</option>
   <option value="divine">GAS</option>
   <option value="spectral">MIG</option>
   <option value="elysian">ANY</option>
</select>
</body>
<table border="2" cellspacing="0">
<tr>
   <th>Checkbox</th>
   <th>Shield</th>
</tr>
<tr>
   <td><input type="checkbox" id="checkBox1"</td>
   <td>ARC1</td>
</tr>
<tr>
   <td><input type="checkbox" id="checkBox2"</td>
   <td>ARC2</td>
</tr>
<tr>
   <td><input type="checkbox" id="checkBox3" checked="checked"></td>
   <td>SPECTRAL1</td>
</tr>
<tr>
   <td><input type="checkbox" id="checkBox4"</td>
<td>SPECTRAL2</td>
</tr>
</table>

</html>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:37:34.610

您的代码很好，尽管我确实注意到 if 条件中缺少括号：

```
function showShields()
{
if (document.getElementById("Shield").value == ("arc")) //your missing missing parenthesis was here
{
document.getElementById("checkBox3").disabled=true;
}
} 
```

# java - 对话框未从另一个类中显示

> ID：13378832
> 
> 赞同：0
> 
> 时间：2012-11-14T12:28:24.723
> 
> 标签：java, android, json, progressdialog

> **可能重复：**
> [ProgressDialog 未显示在活动中](https://stackoverflow.com/questions/4861710/progressdialog-not-showing-up-in-activity)

在我的主类中，我调用 new AutoUpdate().checkForUpdate(this);

这是动作

```
public void checkForUpdate(Context context) {
        // check when last checked. unless overridden check once a day.

        // get current version
        int resID = context.getResources().getIdentifier("current_version",
                "string", context.getPackageName());
        currentVersion = context.getResources().getString(resID);

        // check for connection

        // now compare versions
        if (currentVersion.equals(serverVersion) == false) {
            ProgressDialog pDialog = new ProgressDialog(context);
            pDialog.setMessage("DO NOT ROTATE YOUR DEVICE. /nI am upgrading your version, press OK then INSTALL in a minute. Please wait....");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
            try {

                URL url = new URL(prefs.getString("server_address", null)
                        + "/updates/eduDroid.apk");
                HttpURLConnection c = (HttpURLConnection) url.openConnection();

                String PATH = Environment.getExternalStorageDirectory()
                        + "/download/";
                File file = new File(PATH);
                file.mkdirs();
                File outputFile = new File(file, "eduDroid.apk");
                FileOutputStream fos = new FileOutputStream(outputFile);

                InputStream is = c.getInputStream();

                byte[] buffer = new byte[1024];
                int len1 = 0;
                while ((len1 = is.read(buffer)) != -1) {
                    fos.write(buffer, 0, len1);
                }
                fos.close();
                is.close();

                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.fromFile(new File(Environment
                        .getExternalStorageDirectory()
                        + "/download/"
                        + "file.apk")),
                        "application/vnd.android.package-archive");
                context.startActivity(intent);

            } catch (IOException e) {
                Toast.makeText(context, "Update error!", Toast.LENGTH_LONG)
                        .show();
            }
            pDialog.dismiss();
        }

    } 
```

问题是下载更新版本需要很长时间。在那段时间里，用户留下一个空白屏幕。我想向他们展示对话框，但它只是没有显示。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:35:06.167

您可以使用 an`AsyncTask`在后台执行您的网络工作：

```
 if (currentVersion.equals(serverVersion) == false) {
        new AsyncTask<Void, Void, Void>() {

            private ProgressDialog pDialog;

            @Override
            protected void onPreExecute() {
                pDialog = new ProgressDialog(context);
                pDialog.setMessage("DO NOT ROTATE YOUR DEVICE. /nI am upgrading your version, press OK then INSTALL in a minute. Please wait....");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(true);
                pDialog.show();
            }

            @Override
            protected Void doInBackground(Void... params) {
                try {

                    URL url = new URL(prefs.getString("server_address",
                            null) + "/updates/eduDroid.apk");
                    HttpURLConnection c = (HttpURLConnection) url
                            .openConnection();

                    String PATH = Environment.getExternalStorageDirectory()
                            + "/download/";
                    File file = new File(PATH);
                    file.mkdirs();
                    File outputFile = new File(file, "eduDroid.apk");
                    FileOutputStream fos = new FileOutputStream(outputFile);

                    InputStream is = c.getInputStream();

                    byte[] buffer = new byte[1024];
                    int len1 = 0;
                    while ((len1 = is.read(buffer)) != -1) {
                        fos.write(buffer, 0, len1);
                    }
                    fos.close();
                    is.close();

                    Intent intent = new Intent(Intent.ACTION_VIEW);
                    intent.setDataAndType(Uri.fromFile(new File(Environment
                            .getExternalStorageDirectory()
                            + "/download/"
                            + "file.apk")),
                            "application/vnd.android.package-archive");
                    context.startActivity(intent);

                } catch (IOException e) {
                    Toast.makeText(context, "Update error!",
                            Toast.LENGTH_LONG).show();
                }
            }

            @Override
            protected void onPostExecute(Void result) {
                pDialog.dismiss();
            }
        }.execute();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:53:44.303

在将 Context 传递给对话框时，尝试使用处理程序或 Runnable 来显示进度对话框和 (ActivityName.this) 而不是 (this)。

# c++ - 值优化后的突然分段错误

> ID：13378837
> 
> 赞同：1
> 
> 时间：2012-11-14T12:28:43.960
> 
> 标签：c++, eclipse, segmentation-fault, debian

我有两种工作环境：

*   VirtualBox 上装有 Debian 的笔记本电脑
*   正常安装相同版本 Debian 的 PC

我正在使用两个系统，因为某些硬件不适用于 VB。项目包括 pthreads 和 ncurses 的使用。

突然，我在 PC 上遇到了一个段错误错误，同时在笔记本电脑 + VB 上一切正常。错误在于未连接到 pthreads 或 ncurses 我正在使用 Eclipse 开发我的软件，迁移项目的过程是：

1.  从 USB 驱动器上的笔记本电脑复制文件
2.  将项目导入 PC 上的 Eclipse 工作区

到目前为止一切正常。工具链的设置似乎在两者上都是相等的。

代码：

```
Config::~Config() {
    std::map<std::string, Setting*>::iterator configIterator;
        for(configIterator = config.begin(); configIterator != config.end(); ++configIterator){
            delete configIterator->second;
        }
    config.clear();
} 
```

seg-fault 出现在*删除*操作符上。在*del*之前检查对象是否存在时，看起来它们都在内存中。

这是添加配置条目的方式：

```
config.insert(std::pair<std::string,Setting*>("language", new Setting("en_en"))); 
```

我的问题是双重的：

1.  为什么即使使用 -O0 我也优化了值？
2.  我应该寻找什么来找出为什么会发生这种情况？

我知道这是分配或释放内存的事情，但我什至不知道从哪里开始。我试图删除有错误的部分代码，但这在未知的地方给了我更多的错误。

[编辑]@下面的评论：

我发现实际错误在字符串转换运算符重载方法中，但是：

```
Setting::operator std::string(){
    std::stringstream sstr;
    switch(what){
        case STRING: sstr << str; break;
        case INT: sstr << i; break;
        case FLOAT: sstr << f; break;
        default: sstr << str; break;
    }
    sstr << std::flush;
    return sstr.str();
} 
```

当我将其更改为仅返回一些虚拟字符串时，例如 >> return "x" << 没有段错误。那么..上面的代码有什么问题？以及为什么这适用于 VB 而不是 PC。

# sql - 通过触发器插入表

> ID：13378841
> 
> 赞同：0
> 
> 时间：2012-11-14T12:28:56.677
> 
> 标签：sql, sql-server, database

这是表格：

```
 Order [OrderId], [DateTimePlaced], [ProductId], [Quantity]
         Invoice [InvoiceId], [invoice_DateTime], [order_Id] 
```

我希望 SQL Server 自动将数据插入 Invoice 表，而我手动将数据插入 Order 表。

这是我的代码：

```
 create trigger invoice_Sync on Order
     after insert
     as
     begin

     insert into Invoice (invoice_DateTime,order_Id) select ID,Name,Address
     select getdate(),OrderId
     from inserted
     go 
```

但是，在我执行此查询后，SQL Server 给了我一个错误“INSERT 语句的选择列表包含的项目多于插入列表”

我的情况是：发票ID设置为自动递增，所以我认为我不应该手动将发票ID放入这个触发器中。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:35:02.493

你有一个额外的`SELECT`：

```
 create trigger invoice_Sync on Order
 after insert
 as
 begin

 insert into Invoice (invoice_DateTime,order_Id) 
 --select ID,Name,Address, Why is this here?
 select getdate(),OrderId
 from inserted
 end
 go 
```

# javascript - 在jquery mobile中使用data-fulscreen忽略一些元素

> ID：13378843
> 
> 赞同：1
> 
> 时间：2012-11-14T12:29:08.787
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

是否有任何内置方法可以在使用数据全屏属性时忽略某些元素（点击/单击以显示页眉/页脚，同样隐藏）

UPD：我有谷歌地图，我希望我的页脚忽略此地图上的点击。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:31:24.687

您可以为此使用[CSS 属性选择器](http://reference.sitepoint.com/css/attributeselector)：

```
someSelector[data-fullscreen="true"] {
  ⋮ declarations
} 
```

# python - 我怎样才能使运动更顺畅？

> ID：13378846
> 
> 赞同：1
> 
> 时间：2012-11-14T12:29:26.547
> 
> 标签：python, animation, pygame

我正在开发一个非常基本的引擎，基于 Pygame 的教程，我在“流畅性”方面遇到了一点问题。如何让我的玩家走得“更顺畅”？

我的事件处理程序非常基本，非常标准，没有什么新东西，我什至想出了如何为测试进行“提升”（运行）。但问题是，在 0 处`pygame.KEYUP`，那些大量的零破坏了我的小玩家的“流畅性”，我不希望这样，但我不希望它无限地行走。

```
import pygame
import gfx

# Main Class

class Setup:

    background = gfx.Images.background
    player = gfx.Images.player

    pygame.init()

    # Configuration Variables:

    black = (0,0,0)
    white = (255,255,255)
    green = (0,255,0)
    red  = (255,0,0)
    title = "Ericson's Game"

    # Setup:

    size = [700,700]
    screen = pygame.display.set_mode(size)
    pygame.display.set_caption(title)
    done = False
    clock = pygame.time.Clock()

    # Logic Variables

    x_speed = 0
    y_speed = 0
    x_speed_boost = 0
    y_speed_boost = 0
    x_coord = 350
    y_coord = 350
    screen.fill(white)

    # Main Loop:

    while done == False:

        screen.blit(background,[0,0])
        screen.blit(player,[x_coord,y_coord])

        for event in pygame.event.get():
            if event.type == pygame.QUIT: 
                done = True

            if event.type == pygame.KEYDOWN:               
                if event.key == pygame.K_ESCAPE:
                    done = True

                if event.key == pygame.K_a:
                    x_speed = -6
                    x_speed_boost = 1
                if event.key == pygame.K_d:
                    x_speed = 6
                    x_speed_boost = 2
                if event.key == pygame.K_w:
                    y_speed = -6
                    y_speed_boost = 1
                if event.key == pygame.K_s:
                    y_speed = 6
                    y_speed_boost = 2

                if event.key == pygame.K_LSHIFT:

                    if x_speed_boost == 1:
                        x_speed = -10
                    if x_speed_boost == 2:
                        x_speed = 10
                    if y_speed_boost == 1:
                        y_speed = -10
                    if y_speed_boost == 2:
                        y_speed = 10                  

            if event.type == pygame.KEYUP:
                if event.key == pygame.K_a:
                    x_speed = 0
                    x_speed_boost = 0
                if event.key == pygame.K_d:
                    x_speed = 0
                    x_speed_boost = 0
                if event.key == pygame.K_w:
                    y_speed = 0
                    y_speed_boost = 0
                if event.key == pygame.K_s:
                    y_speed = 0
                    y_speed_boost = 0

        x_coord = x_coord + x_speed
        y_coord = y_coord + y_speed

        pygame.display.flip()
        pygame.display.update()

        clock.tick(20)

    pygame.quit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:13:22.710

使用 keystate 轮询的代码将更简单/更清晰供您使用。如果游戏的其他部分使用“按下时”逻辑，您可以使用事件处理。所以你的动作是：

如果您正在调用，`pygame.display.flip()`那么您不使用`pygame.display.update()`. 事实上，使用两者可能会减慢它的速度。

我用了你的`x_coord`变量。但它会简化使用元组或向量来定位玩家位置的事情。您可以使用浮点数，以获得更平滑的运动精度。然后它作为一个 int 闪烁到屏幕上。

```
while not done:
    for event in pygame.event.get():
        # any other key event input
        if event.type == QUIT:
            done = True        
        elif event.type == KEYDOWN:
            if event.key == K_ESC:
                done = True

    vel_x = 0
    vel_y = 0
    speed = 1

    if pygame.key.get_mods() & KMOD_SHIFT
        speed = 2

    # get key current state
    keys = pygame.key.get_pressed()
    if keys[K_A]:
        vel_x = -1
    if keys[K_D]:
        vel_x = 1
    if keys[K_W]:
        vel_y = -1
    if keys[K_S]:
        vel_y = 1

    x_coord += vel_x * speed
    y_coord += vel_y * speed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:32:44.220

您正在以每秒 20 帧的速度计时。这可能是导致波涛汹涌的原因。将其更改为更大的值，例如 70：

```
clock.tick(70) 
```

# groovy - 为什么 IDEA 不会在断点处暂停？

> ID：13378848
> 
> 赞同：2
> 
> 时间：2012-11-14T12:29:32.863
> 
> 标签：groovy, intellij-idea

我正在 Groovy 上开发 Spring 应用程序。IDEA跳过了我的一些断点，其中一些没有。检查屏幕...也许您对此有一些想法。我创建了一个问题，因为这不是我第一次遇到这个问题

跳过：
![在此处输入图像描述](../Images/86679c21d68c393aa34afebe423b120d.png)

未跳过：
![在此处输入图像描述](../Images/c4dfb34deecda6c36d4e566827c46ee3.png)

正如您在屏幕上看到的那样，我有方法`restoreJobState`。我希望代码在调用（第一个屏幕）之前暂停`restoreJobState`，然后在内部`restoreJobState`（第二个屏幕）。但是 IDEA 跳过了第一个

# javascript - 在 Android PhoneGap 中按住按钮进行操作

> ID：13378850
> 
> 赞同：1
> 
> 时间：2012-11-14T12:29:51.603
> 
> 标签：javascript, android, html, cordova, button

如果用户按住按钮几秒钟，我需要在我的应用程序中执行特定操作，如果用户在延迟用完之前将手指从按钮上移开，则此操作将被取消。我对媒体使用“ontouchstart”事件。

有什么方法可以使用 html 和 javascript 实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:48:31.243

这是实现此特定要求的代码片段，

```
var pressTimer;
$("#btnClick").mouseup(function(){
  clearTimeout(pressTimer);
  return false;
});
$("#btnClick").mousedown(function(){
  pressTimer = window.setTimeout(function() { ... your code here ...},time_delay)
  return false; 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:44:35.630

在 javascript 中搜索 keyup 和 keydown 事件

有用的链接： [http ://www.webmonkey.com/2010/02/javascript_events/#keydown](http://www.webmonkey.com/2010/02/javascript_events/#keydown)

# asp.net - 如何在没有 for 循环的情况下从 Gridview 数据更新数据集和后端 sql 表？

> ID：13378851
> 
> 赞同：1
> 
> 时间：2012-11-14T12:29:58.027
> 
> 标签：asp.net, gridview

在 ASP.NET 我有 GridView 作为

```
 <asp:GridView ID="GV" runat="server" AutoGenerateColumns="false">
                <Columns>
                    <asp:TemplateField HeaderText="Name">
                        <ItemTemplate>
                            <asp:TextBox ID="txtName" runat="server" Text='<%#Eval("Name") %>'></asp:TextBox>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:BoundField DataField="EmailId" HeaderText="Email" />
                </Columns>
            </asp:GridView>
 <asp:Button ID="btnSubmit" runat="server" Text="Update Changes to Dataset" /> 
```

这是我在页面加载时绑定数据的代码

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Not IsPostBack Then

        Dim str As String = ConfigurationManager.ConnectionStrings("DBCon").ConnectionString
        Dim Conn As New SqlConnection(str)
        Conn.Open()
        Dim qry As String = "SELECT Name,EmailId FROM dbo.Employee"
        Dim adp As New SqlDataAdapter(qry, Conn)
        Dim ds As New DataSet
        adp.Fill(ds)

        GV.DataSource = ds
        GV.DataBind()

    End If
End Sub 
```

现在在我的 Gridview 中，我已将名称绑定到文本框，并且这些文本框对于客户端是可编辑的

**我有很多记录要在gridview上显示** 现在我想要的是单击提交按钮更新的数据将出现在数据集中**而不使用任何类型的for循环** 我**还希望更新的数据反映在后端员工表中** 建议你有什么技巧

# javascript - 原型继承

> ID：13378852
> 
> 赞同：1
> 
> 时间：2012-11-14T12:30:01.170
> 
> 标签：javascript

在这里，我试图了解javascript中的一些继承概念。我创建了person类并尝试在Customer类中继承它。

```
 var Person = function(name) {
            this.name = name;
        };

        Person.prototype.getName = function() {
            return this.name;
        };

        Person.prototype.sayMyName = function() {
            alert('Hello, my name is ' + this.getName());
        };

        var Customer = function(name) {
            this.name = name;
        };

        Customer.prototype = new Person();

        var myCustomer = new Customer('Dream Inc.');
        myCustomer.sayMyName(); 
```

每次创建新对象时，javascript引擎基本上都会调用原型的构造函数。在这里，我试图了解几件事：

如果客户原型是指个人对象。因此，新客户对象的创建应该只包含个人属性/方法而不是客户属性/方法。客户属性如何附加到新客户对象（myCustomer）？

我在这里错过了一些 javascript 概念吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:36:39.810

> 在这里，我试图了解javascript中的一些继承概念。我创建了person类并尝试在Customer类中继承它。

那么你肯定很快就迷路了。原型继承中没有类。
这就是重点！:-)

* * *

使用`.prototype`和`new Function()`语法并不是利用原型继承的一种非常明确的方式。

考虑[使用`Object.create`代替`new`](https://stackoverflow.com/q/2709612/399317)- 这种方式允许您直接说出哪个对象应该是哪个原型。它更简单，您可能会通过这种方式更快地掌握原型的概念。

另外，如果你想拥有更长的原型链，那么这种方法肯定会更舒服。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:47:55.470

您定义了`Person`and `Customer`，然后将`Customer`'s 原型设置为一个`Person`实例。所以，你的链看起来像这样：

```
myCustomer              (a Customer instance)
  Customer prototype    (a Person instance)
    Person prototype    (a plain object) 
```

事实上，`myCustomer`是一个`Customer`实例，因为它`Customer`的链中有原型。这与直接`Person`实例不同。后者在链中不会有`Customer`' 原型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:06:02.380

我认为混淆在于“javascript引擎基本上调用原型的构造函数”。对于您的 Customer 的新实例，Javascript 将创建一个新对象，将原型设置为您指定的 Person 对象，然后调用您的 Customer 构造函数来自定义对象（这是 JS 中“类”的错觉）。没有重新调用原型构造函数。因此，您的客户字段/方法已在您的客户构造函数中设置。

当客户对象在构造后引用了方法/字段时，javascript 引擎将尝试在通过构造函数设置的字段/方法中找到它（或在构造函数调用下游操作对象的代码中）。如果不能，它将查看附加的原型对象以查找方法/字段。这样，客户字段/方法和“超类”字段/方法都可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T12:39:17.017

> 如果客户原型是指个人对象等创建新客户对象应该只包含个人属性/方法而不是客户属性/方法。

是的。您新创建`Customer`的对象继承`Person`自`Customer.prototype`. 由于您既没有向该原型对象添加属性，也没有在`Customer`构造函数中为您的实例创建属性，所以您的客户只包含该人的属性。

> Customer 属性如何附加到新的 Customer 对象 (myCustomer)？

在构造函数中执行它：

```
function Customer (){
    this.customer_property = someValue;
} 
```

每次通过创建实例时都会执行此代码`new`。如果您不需要，您可以将方法等添加到`Customer.prototype`对象中。

也看看[What is the reason *[not]* to use the 'new' 关键字？](https://stackoverflow.com/a/12592938/1048572)- 你不应该为原型对象实例化 Person - 为什么所有客户都应该继承它的名称等？利用

```
function Customer(name) {
    Person.call(this, name); // apply Person constructor on this instance
                             // for creating own properties (and privileged methodes)
    // custom Customer code
}
Customer.prototype = Object.create(Person.prototype);
Customer.prototype.someMethod = … // Customer-specific prototype things 
```

# java - 显示旋转后恢复表单中的值

> ID：13378853
> 
> 赞同：1
> 
> 时间：2012-11-14T12:30:02.007
> 
> 标签：java, android, layout, android-relativelayout

我有下面的代码，问题是所有膨胀的视图都具有相同的 id（在 中设置`player_item.xml`） - 所以当我旋转屏幕时，它们都恢复为相同的值。最简单的解决方案是删除这些 id 并让 android 自动生成它们，但我不能这样做，因为我需要它们在相对布局中定位。任何想法我该如何解决这个问题？

**player_item.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/player_name"
        style="@style/stats_edit_column"
        android:layout_width="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/goals"
        android:gravity="center_vertical" />

    <EditText
        android:id="@+id/goals"
        style="@style/stats_edit_column"
        android:layout_toLeftOf="@+id/assists"
        android:inputType="number"
        android:textSize="@dimen/text_size_normal" />

    <EditText
        android:id="@+id/assists"
        style="@style/stats_edit_column"
        android:layout_alignParentRight="true"
        android:inputType="number"
        android:textSize="@dimen/text_size_normal" />

</RelativeLayout> 
```

**代码**

```
for (PlayerStats playerStats : allPlayers) {
    View playerStatsView = getLayoutInflater().inflate(R.layout.player_item, null);

    TextView playerName = (TextView) playerStatsView.findViewById(R.id.player_name);
    playerName.setText(playerStats.getPlayerName());

    EditText goalsEditText = (EditText) playerStatsView.findViewById(R.id.goals);
    goalsEditText.setText(String.valueOf(playerStats.getGoals()));

    EditText assistsEditText = (EditText) playerStatsView.findViewById(R.id.assists);
    assistsEditText.setText(String.valueOf(playerStats.getAssists()));

    editLayout.addView(playerStatsView);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:21:47.647

我建议为每个表单创建一个 bean，并在移动到其他活动时将所有表单值设置为 bean，并将 bean 引用存储到共享首选项中，所以当你回到同一个活动时，只需重新加载从bean ，这有助于保存表单的状态

我希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:30:22.990

在标签中保留对 playerStats 的引用怎么样？

```
for (PlayerStats playerStats : allPlayers) {
    View playerStatsView = getLayoutInflater().inflate(R.layout.player_item, null);

    TextView playerName = (TextView) playerStatsView.findViewById(R.id.player_name);
    playerName.setText(playerStats.getPlayerName());

    EditText goalsEditText = (EditText) playerStatsView.findViewById(R.id.goals);
    goalsEditText.setText(String.valueOf(playerStats.getGoals()));

    EditText assistsEditText = (EditText) playerStatsView.findViewById(R.id.assists);
    assistsEditText.setText(String.valueOf(playerStats.getAssists()));

    playerStatsView.setTag(playerStats);

    editLayout.addView(playerStatsView);

}

getViewForPlayerStatsByTag(PlayerStats playerStats){
    for (int i=0;i<editLayout.getChildCount();i++){
        view = (View)editLayout.getChildAt(i);
        if (view.getTag()==playerStats){return view;}
    }
    return null;
} 
```

getViewForPlayerStatsByTag 将返回这些统计信息的 player_item 视图组，如果不存在则返回 null。

# c# - 我的这个 MVC 项目的单元测试代码有什么问题？我不断收到“不包含定义”和“没有扩展方法错误”

> ID：13378855
> 
> 赞同：1
> 
> 时间：2012-11-14T12:30:15.327
> 
> 标签：c#, asp.net-mvc

（编辑**我能够获得代码来编译并执行通过的单元测试。除了代码修复之外，VS2010无限期运行单元测试存在问题。我不得不替换一个已更改的dll文件在中止安装 vs 2012 期间。我在页面底部发布了对控制器和单元测试的更改。感谢所有发布答案的人。）

这是我在网上问过的第一个关于编码的问题。大约一年来，我一直在使用免费教程学习 C# .NET 和其他相关内容。到目前为止，我已经能够自己研究和解决所有问题。我现在开始冒险进入未知领域，我似乎找不到答案。

我一直在编写一个名为“在 7 天内逐步学习 MVC 模型视图控制器”的教程。这是链接： http: [//www.codeproject.com/Articles/259560/Learn-MVC-Model-view-controller-Step-by-Step-in-7](http://www.codeproject.com/Articles/259560/Learn-MVC-Model-view-controller-Step-by-Step-in-7)

我已经研究了错误的建议链接：

```
Error 'Mvccustomer.Models.Customer' does not contain a definition for 'DisplayCustomer'        and no extension method 'DisplayCustomer' accepting a first argument of type     'Mvccustomer.Models.Customer' could be found (are you missing a using directive or an     assembly reference?) 
```

我遇到的问题是我似乎找不到类似的情况，有人正在使用类似的文件引用创建单元测试。请注意，我对 MVC 和单元测试完全陌生。

本教程的一个问题是，作者在视频中使用了一组命名空间/文件名，而在书面教程中使用了另一组。我能够自己解决这个问题。例如，一开始，他使用“Mvccustomer”作为项目名称，但在第一天的第 4 或第 5 个实验室时，他将其称为“Mvcinputscreen”。我怀疑问题在于项目中如何引用客户类，但到目前为止我无法弄清楚。

这是给我一个错误的单元测试：

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Mvccustomer.Models;

namespace MvcUnitTest
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod]
        public void DisplayCustomer()
        {
            Customer obj = new Customer();
            var varresult = obj.DisplayCustomer();
            Assert.AreEqual("DisplayCustomer", varresult.ViewName);
        }
    }
} 
```

这是客户类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Mvccustomer.Models;

namespace Mvccustomer.Models
{
    public class Customer
    {
        public int Id { set; get; }
        public string CustomerCode { set; get; }
        public double Amount { set; get; }
    }
} 
```

这是显示客户视图：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<Mvccustomer.Models.Customer>"     %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>DisplayCustomer</title>
</head>
<body>
    <div>
    The customer id is <%= Model.Id %> <br />

    The customer id is <%= Model.CustomerCode %> <br />

    <%if (Model.Amount > 100)
      {%>
    This is a priveleged customer.
    <% }
      else
      { %>
    This is a normal customer
    <%} %>

    </div>
</body>
</html> 
```

和客户控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Mvccustomer.Models;

namespace Mvccustomer.Controllers
{
    public class CustomerController : Controller
{
    //
    // GET: /Customer/

    public ActionResult Index()
    {
        return View();
    }

    public ActionResult FillCustomer()
    {
        return View();
    }
    public ActionResult DisplayCustomer(Customer obj)
    {
        return View(obj);
    }

} 
```

}

如果我需要发布更多项目元素，请告诉我。当我构建 Mvccustomer 项目时，它编译得很好，没有错误。只有单元测试给我带来了麻烦。我想这个问题有点复杂，我热切地等待所有建设性批评带来的学习体验。谢谢你。

最终工作的编辑控制器和单元测试：

客户控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Mvccustomer.Models;
using Mvccustomer.Controllers;

namespace Mvccustomer.Controllers
{
public class CustomerController : Controller
{
    //
    // GET: /Customer/

    public ActionResult Index()
    {
        return View();
    }

    public ActionResult FillCustomer()
    {
        return View();
    }

    [HttpPost]
    public ActionResult DisplayCustomerView(CustomerModel customerModel)
    {
      var myView = View("DisplayCustomerView", customerModel);
      //myView.ViewName = "DisplayCustomer";
      return myView;
    }

}
} 
```

编辑单元测试：

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Mvccustomer.Models;
using Mvccustomer.Controllers;
using System.Web.Mvc;

namespace MvcUnitTest
{

[TestClass]
public class UnitTest1
{
    [TestMethod]
    public void DisplayCustomer()
    {
      // instantiates new instance of CustomerController class
      CustomerController controller = new CustomerController();

      var customer = new CustomerModel();

      var customerViewActionResult = controller.DisplayCustomerView(customer);
      var customerViewViewResult = customerViewActionResult as ViewResult;

      Assert.AreEqual("DisplayCustomerView", customerViewViewResult.ViewName);

    }
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T12:43:41.130

您正在测试中调用`obj.DisplayCustomer()`对象`Customer`中的方法。但是，我`DisplayCustomer`在`Customer`.

该类`CustomerController`有一个方法`DisplayCustomer`，但这个方法需要一个 type 参数`Customer`。

```
CustomerController obj = new CustomerController();
var varresult = obj.DisplayCustomer(new Customer()); 
```

* * *

如果智能感知没有显示该方法，可能是因为该方法不存在或者是私有的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:11:13.430

```
CustomerController obj = new CustomerController();
var result = obj.DisplayCustomer(new Customer()) **as ViewResult**;
Assert.AreEqual("Expected", result.ViewName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T13:07:58.327

您正在测试应该由控制器返回的视图名称，但您没有创建控制器。相反，您正在调用not `.DisplayCustomer()`the`Customer``CustomerController`

我也会让你的代码更具解释性。单元测试功能的名称应该解释他们正在测试什么。变量名应该解释它们是什么（这`obj`是一个坏名字，因为它没有意义）。

考虑阅读另一个程序员的代码并需要了解它是如何工作的，或者在 2 年后回到你自己的代码并尝试记住它是如何工作的。给事物起解释性的名称会有所帮助。我会像这样重写你的测试：

```
 [TestMethod]
    public void DisplayCustomer_ReturnsViewNamed_DisplayCustomer()
    {
        const string expectedViewName = "DisplayCustomer";
        var customer = new Customer();
        var controllerUnderTest = new CustomerController();

        var result = controllerUnderTest.DisplayCustomer(customer);

        Assert.AreEqual(expectedViewName, result.ViewName);
    } 
```

如果你喜欢阅读编程书籍，我强烈推荐Robert Martin 的[Clean Code](https://rads.stackoverflow.com/amzn/click/com/0132350882)。它是用 Java 编写的代码示例，但 Java 在语法上接近于 C#，它是一本关于保持代码可读、简单和组织良好的好书。我保留了我在编码时经常参考[的书中的笔记备忘单。](http://codingwithspike.wordpress.com/2012/09/17/clean-code-cheat-sheet/)

* * *

*编辑：*

关于您的新错误：

> “System.Web.Mvc.ActionResult”不包含“ViewName”的定义，并且找不到接受“System.Web.Mvc.ActionResult”类型的第一个参数的扩展方法“ViewName”（您是否缺少 using 指令还是汇编参考？）

控制器上的方法签名是：

```
public ActionResult DisplayCustomer(Customer obj) 
```

它返回一个`ActionResult`对象。`.ViewName`该类型不存在该属性，它实际上是 的一个属性`ViewResult`。

控制器中方法内的行`DisplayCustomer()`返回：

```
return View(obj); 
```

该`View()`方法实际上返回 a `ViewResult`，但`ViewResult`该类扩展了`ActionResult`：

```
public class ViewResult : ActionResult 
```

因此，可以将您的方法签名设置为，`ActionResult`但实际上您总是返回 a `ViewResult`，因为`ViewResult` *is* an `ActionResult`。（典型的面向对象继承的东西，但希望这部分到目前为止是有意义的）。

在您的测试中，当您调用`DisplayCustomer()`测试所知道的所有内容时，它所要做的就是方法签名，它告诉编译器它将返回一个`ActionResult`. 因此，编译器试图在不存在`ViewName`的类上查找属性名称。`Actionresult`

有两种方法可以解决此问题：

一种是简单地将结果投射到您的测试中：

```
var varresult = (ViewResult)obj.DisplayCustomer(); 
```

或者，由于该方法始终返回 a`ViewResult`您可以更改方法签名以指示它返回此更具体的类型：

```
public ViewResult DisplayCustomer(Customer obj)
{
    return View(obj);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T18:20:47.940

为了简单起见，我试图将其归结为不使用[模拟](https://stackoverflow.com/questions/346372/whats-the-difference-between-faking-mocking-and-stubbing)框架，这将消除或减少对`try/catch`（取决于您自己的偏好/风格）的需求。

刚刚注意到您遇到问题的原因之一，该方法`DisplayCustomer()`应该返回`ViewResult`not `ActionResult`。

但是本[教程](http://www.codeproject.com/Articles/259560/Learn-MVC-Model-view-controller-Step-by-Step-in-7#Step%204:-%20Write%20the%20unit%20test)仍然不起作用，因为在`ExecuteResult()`调用之前不会发生视图名称。

```
 [TestMethod]
    public void DisplayCustomerTest_FindsCorrectViewName()
    {
        var expected = "DisplayCustomer";

        var obj = new CustomerController();
        var cContext = new ControllerContext();

        cContext.RouteData.Values.Add("action", expected);
        cContext.RouteData.Values.Add("controller", "Customer");

        var actionResult = obj.DisplayCustomer(new Customer());

        //not necessary but helpful
        Assert.IsInstanceOfType(actionResult, typeof(ViewResult));

        //down cast
        var vResult = actionResult as ViewResult;

        try // the view name is populated early, and we don't care about what else it does
        {
            vResult.ExecuteResult(cContext);
        }
        catch (NotImplementedException) {} //catch the most specific error type you can

        Assert.AreEqual(expected, vResult.ViewName);

    } 
```

更多有趣的方法，或更高级的（意见问题，并且似乎缺少使用适当的模拟框架的任何答案）

[获取视图名称，其中 ViewResult.ViewName 是单元测试的空字符串](https://stackoverflow.com/questions/8301797/get-view-name-where-viewresult-viewname-is-empty-string-for-unit-testing?rq=1)

[低调的解释](https://stackoverflow.com/questions/4428725/can-you-explain-liskov-substitution-principle-with-a-good-c-sharp-example)

请原谅造型，家里没有安装 Resharper 或 StyleCop。

对于单元测试命名约定，请考虑[单元测试命名最佳实践](https://stackoverflow.com/questions/155436/unit-test-naming-best-practices)

# php - 试图在 ajax 函数中访问从 php 返回的数据

> ID：13378860
> 
> 赞同：-1
> 
> 时间：2012-11-14T12:30:23.803
> 
> 标签：php, jquery, ajax

我有一个ajax调用：

```
setStatusToActive: function(item){
            $.ajax({
                type: 'GET',
                url: '/Yii/trackstar/index.php?r=contentManagement/sidebars/SetWidgetStatusActive/',
                data: {'sid': <?php echo $this->_sidebarId->id ?>, 'widget_type': item.data('type'), 'position': item.data('position')},
                success: function(data){
                    console.log(data);
                    item.data('id', data);
                }
            });
        }, 
```

现在我试图弄清楚如何从屏幕/日志上调用的 php 函数获取返回值。

```
public function actionSetWidgetStatusActive(){
      ...

    return $widgetsUsed->id;
} 
```

在此之后，我想使用返回的数字来设置项目的数据属性。

提前致谢

编辑：

我得到的唯一问题是如何在控制台或整个 javascript 的屏幕上获取返回的 php（如标题中所述）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:38:55.470

你可以试试这个：`echo json_encode($widgetsUsed->id);`并删除该`return`功能。

现在，如果您在 Firebug 中检查控制台，您将能够看到函数的结果。要在 jQuery 中正确显示，您必须使用 jQuery.parseJSON()。

# android - 如何通过蓝牙在android中发送文件并存储文件而不编写检索代码？

> ID：13378861
> 
> 赞同：2
> 
> 时间：2012-11-14T12:30:34.010
> 
> 标签：android, bluetooth

我是蓝牙概念的新手。谁能解释一下文件是如何在蓝牙中传输的（从 1-2 开始）以及如何使用相同的名称创建它并将数据存储到第二个移动设备中。如果是 (2) 不是android 手机比它接收如何？请提前解释谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:52:59.547

一个非常简短的描述：

*   在将充当服务器的设备之一上打开一个 BluetoothServerSocket。
*   获取代表远程设备的 BluetoothDevice 对象（从 BluetoothServerSocket）。
*   使用 BluetoothDevice 对象获取 BluetoothSocket。
*   启动连接。
*   使用 BluetoothSocket 传输数据：
*   通过 BluetoothSocket 获取 InputStream 和 OutputStream。
*   使用 read(byte[]) 和 write(byte[]) 读取和写入数据到流

更详细的描述和源代码示例可以在[Android Developers](http://developer.android.com/guide/topics/connectivity/bluetooth.html)中找到。

# tomcat - 如何使 web.xml 适用于 Tomcat 7？

> ID：13378863
> 
> 赞同：2
> 
> 时间：2012-11-14T12:30:41.653
> 
> 标签：tomcat, tomcat7, web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>UploadServletApp</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <description></description>
    <display-name>UploadServlet</display-name>
    <servlet-name>UploadServlet</servlet-name>
    <servlet-class>com.videoreciever.UploadServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>UploadServlet</servlet-name>
    <url-pattern>/UploadServlet</url-pattern>
  </servlet-mapping>
</web-app> 
```

这是我的 web.xml。它适用于 tomcat 6。但对于 tomcat 7，它不起作用。它甚至不部署。我相信问题出在 web.xml 中。index.jsp 包含一个表单，该表单包含多个参数以及一个文件。

如何使它适用于tomcat7？

当我通过 Eclipse 尝试时，tomcat7 上的错误消息。

```
java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:415)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:397)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:118)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4638)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5204)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5199)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:43:25.890

通常`ClassNotFoundException`表示缺少依赖项。

您应该有一个 JSF 实现，如[java.lang.ClassNotFoundException 中所述：com.sun.faces.config.ConfigureListener](https://stackoverflow.com/questions/10848341/classnotfoundexception-com-sun-faces-config-configurelistener-for-jsf-project-u)

# excel - 直接在 Office 中连接到 Sharepoint-Site

> ID：13378865
> 
> 赞同：0
> 
> 时间：2012-11-14T12:30:45.280
> 
> 标签：excel, sharepoint, ms-office

由于某些原因，我想直接在 Office (Excel) 中打开和编辑共享点站点上的一些文档，而不是从 IE 中打开它。我怎样才能做到这一点？这可能吗？换句话说，我可以直接在 Excel 中打开（签出和编辑）共享点文件夹中的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:08:58.510

您的意思是仅在 Word 表单 SharePoint 中打开文档，以便当您单击保存按钮时 Word 将保存所有更改？默认情况下有这样的功能。只需单击以打开项目的上下文菜单并选择在 Microsoft Word 中编辑。

# xml - 转换缺少命名空间的 XML

> ID：13378871
> 
> 赞同：0
> 
> 时间：2012-11-14T12:30:56.360
> 
> 标签：xml, xslt, soap, xslt-1.0

当我调用 web 服务函数时，我得到这个响应 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope>
  <soap:Body>
    <Response>
      <Result>
        <Status>Success</Status>
        <Text>Some text</Text>
      </Result>
     </Response>
 </soap:Body>
</soap:Envelope> 
```

如您所见，响应 xml 不包含 soap 命名空间。

我想通过删除soap-stuff来转换xml，当我进行xsl转换时，我通过将soap命名空间添加到响应xml中来实现它，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <Response>
      <Result>
        <Status>Success</Status>
        <Text>Some text</Text>
      </Result>
     </Response>
 </soap:Body>
</soap:Envelope> 
```

当响应 xml 中不包含soap 命名空间时，如何进行此转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:01:09.507

该输入是格式良好但不是名称空间格式良好的 XML。您可以使用配置为非命名空间感知的解析器将其解析为 DOM 树，然后使用 XSLT 构造，例如

```
<xsl:template match="*[local-name() = 'soap:Envelope']"> 
```

但是这是否可能以及您将如何做到这一点取决于您使用的 XSLT 处理器，我无法在不知道的情况下给出更详细的答案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T12:49:15.510

这就是我所说的格式错误的 XML。无论您尝试用什么来转换它，任何合理的 XSLT 解析器都会给出一些“未绑定前缀”错误的变体。因为源文档对其名称空间的使用“感到困惑”，所以任何后续的 XSLT 也会感到困惑。

来自[`Namespaces in XML 1.1`](http://www.w3.org/TR/xml-names11/#ns-qualnames)：

> **命名空间约束：前缀声明**
> 
> **命名空间前缀，除非它是 xml 或 xmlns，必须在命名空间声明属性中声明在使用前缀的元素的开始标记或祖先元素（即，其内容中出现前缀标记的元素）。** 此外，最里面的此类声明中的属性值不得为空字符串。

恐怕您将不得不联系发布此 Web 服务的人并让他们将其响应格式更改为正确的 XML。

# expressionengine - 有人对 MySQL 5.1 和 ExpressionEngine 有任何问题吗？

> ID：13378872
> 
> 赞同：2
> 
> 时间：2012-11-14T12:31:02.223
> 
> 标签：expressionengine

我们的主客户端服务器正在运行 MySQL 5.0.96，但我们想升级到 5.1。我们正在运行几个较旧的 EE1.6 站点（不早于 1.6.7 iirc），其余的是 EE2.2+

我们升级时是否会遇到任何陷阱/问题（可能在我们自定义的自行编写的附加组件中）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:23:07.100

我使用 MySQL 5.1+ 客户端运行许多 EE 安装，没有任何问题。除非您在自定义插件中的 SQL 真的很草率并且您在 STRICT 模式下运行 MySQL，否则我看不到任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:14:23.960

我的生产服务器运行 5.1，我的本地和开发服务器都运行 5.5 没有问题，所以我怀疑你会遇到任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:09:38.017

目前运行 5.5.28 没有任何问题。

# c# - 下载StringCompletedEventHandler 参数

> ID：13378873
> 
> 赞同：3
> 
> 时间：2012-11-14T12:31:04.530
> 
> 标签：c#, windows-phone-7, events, parameters, windows-phone-7.1

我有以下调用网络服务的方法。DownloadStringCompletedEventHandler 'callback' 显然是该函数完成后将流向的函数控制：

```
private void myWebService(string yourParameter, DownloadStringCompletedEventHandler callback)
{
    //Url to search servlet
    string servletUrl = string.Format("https://something.com/etc/what?bla={0}",
        Uri.EscapeDataString(yourParameter));

    //Calls Servlet
    WebClient client = new WebClient();
    client.DownloadStringCompleted += callback;
    client.DownloadStringAsync(new Uri(servletUrl, UriKind.Absolute));
} 
```

我这样调用上面的函数：

```
myWebService("Hello there!", myWebServiceReturn); 
```

WebServiceReturn（控制将在 web 服务调用之后结束）看起来像这样：

```
private void myWebServiceReturn(object sender, DownloadStringCompletedEventArgs e)
{
    //And here we end up...
    //how do I get the value of 'yourParameter' that I sent to 'myWebService()'??
} 
```

所以我的问题是.. 我发送到“myWebService()”的参数，在本例中是“yourParameter”，如何在“myWebServiceReturn”方法中获得相同的值？如果我能以某种方式将其附加到“DownloadStringCompletedEventArgs e”并以这种方式检索它，那将非常方便。

真的很感谢任何人的帮助！:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T12:51:34.630

使用此重载的[DownloadStringAsync](http://msdn.microsoft.com/en-us/library/ms144203.aspx)。它需要一个额外的对象类型参数，该参数可通过 DownloadStringCompletedEventArgs 的 UserState 属性在完成的处理程序中使用。这允许您传递您想要的任何状态信息。

例如调用服务：

```
client.DownloadStringAsync(new Uri(servletUrl, UriKind.Absolute), yourParameter); 
```

访问结果：

```
string yourParameter = e.UserState as string; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:52:28.077

在回调方法中，您引用了发送者对象。在您的 myWebservice 中，在客户端对象中添加一个标头 -

```
client.Headers["yourParameter"]= yourParameter; 
```

在你的回调中，你可以像这样检索标题

```
var client= sender as WebClient;
string parameter= client.Headers["yourParameter"]; 
```

编辑：这显然不是识别异步请求的正确方法。sga101的方法比较合适。

# intellij-idea - intelliJ 11.1.4 - 向项目中添加 jar 只能工作 50%

> ID：13378874
> 
> 赞同：2
> 
> 时间：2012-11-14T12:31:05.717
> 
> 标签：intellij-idea

我有一个使用一些外部库的 Android 项目。问题是在 intelliJ 中我可以构建项目并且它运行良好，但是编辑器将来自 jar 的类标记为未知。

我已经从 libs 目录、类、jar 目录等独立地将 jar 添加到正确的模块（项目结构 -> 模块 -> 依赖项）中。我还尝试使用项目设置添加它们 -> 添加库，将它们附加到模块上。但无济于事。我还尝试通过右键单击 -> 添加库将它们添加到项目资源管理器中。没有任何效果。

以前一切都很好，但现在在发生可怕的 IntelliJ 崩溃之后，它不再起作用了。这已经发生在我身上两次了。我花了很多时间试图解决这个问题。我在这里与 IntelliJ 错误作斗争吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:41:21.740

`File`| `Invalidate Caches`是在类似情况下首先尝试的。

# javascript - Google 喜欢在我的网站中自定义和预览嵌入地图吗？

> ID：13378876
> 
> 赞同：0
> 
> 时间：2012-11-14T12:31:08.593
> 
> 标签：javascript, google-maps, google-maps-api-3

我想要类似谷歌自定义和预览嵌入地图的东西。用户是否有可能只是在地图上找到位置，输入他们想要的大小并复制生成的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:54:45.090

听起来您希望允许人们在您的应用程序中选择并保存他们自己的自定义 Google 地图。

一种简单的方法是使用 Google 地图 API 在容器 dom 元素内创建地图。然后，您将允许用户调整容器元素的大小，这基本上允许他们定位地图以及他们选择的大小。

当用户完成调整大小和定位后，您需要再次调用 API 以获取地图的当前纬度/经度以及容器的尺寸。保存纬度/经度和容器尺寸后，这应该足以让您保存用户自定义地图。

希望这可以帮助。

# spring - 属性占位符默认值分隔符

> ID：13378877
> 
> 赞同：0
> 
> 时间：2012-11-14T12:31:12.043
> 
> 标签：spring, configuration, properties, placeholder

小问题。我们使用 Spring 3.1，并且似乎在值分隔符（即默认值）方面存在问题。

```
<context:property-placeholder ignore-resource-not-found="false" ignore-unresolvable="false" location="${app-conf-base-path:classpath:}environment/app-conf-${spring.profiles.active:test}.properties" /> 
```

我们根据 Maven 环境配置文件过滤正在部署的属性。如果没有提供 maven 环境配置文件，所有环境属性文件都将加载到 war 中并放在类路径中。实际环境特定设置在运行时使用弹簧配置文件加载。给我们带来问题的部分是 ${app-conf-base-path:classpath:} 因为他似乎无法解决这个问题。我相信这是因为占位符是使用最后一次出现的默认值分隔符拆分的。为什么我们想要这个是因为我们希望他查看 app-conf-base-path，除非它没有被定义为 JVM 参数。在这种情况下，他应该查看类路径。

我试过了：

*   带有值分隔符 == '?' 的占位符配置器 无济于事。

有人知道替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:24:52.627

我通过确保在加载它的类加载器时将外部配置文件添加到服务器的类路径来解决这个问题。这样我就不需要占位符来指向 file:// 类型的位置。我在 tomcat 的 setclasspath.sh 中添加了一条导出行，用于将外部文件添加到环境变量 CLASSPATH 中。

# android - 保存视频时相机崩溃

> ID：13378878
> 
> 赞同：0
> 
> 时间：2012-11-14T12:31:13.797
> 
> 标签：android, android-camera

我正在开发一个应用程序，当用户按下某个按钮时，我想打开相机来录制视频。

这是我启动相机的方法：

```
public void recordVideo(boolean highQuality) {
    if (isIntentAvailable(MediaStore.ACTION_VIDEO_CAPTURE)) {

        videoFile = createFile(MEDIA_TYPE_VIDEO);

        if(videoFile != null){
            videoFileUri = Uri.fromFile(videoFile);

            Intent recordVideo = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

            recordVideo.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,
                    videoFileUri);
            recordVideo.putExtra(
                    android.provider.MediaStore.EXTRA_VIDEO_QUALITY,
                    highQuality ? 1 : 0);
            recordVideo.putExtra(
                    android.provider.MediaStore.EXTRA_DURATION_LIMIT, 30);

            cameraStarted = true;
            startActivityForResult(recordVideo, ACTION_TAKE_VIDEO);
        }
    } else {
        Toast.makeText(this, R.string.no_camera, Toast.LENGTH_SHORT).show();
    }
} 
```

在这里我制作文件：

```
private File createFile(int type) {
    File mediaFile = null;

    if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {

        File mediaStorageDir = new File(
                Environment.getExternalStorageDirectory() + "/Zorgdossier", "Media");
        if (!mediaStorageDir.exists()) {
            if (!mediaStorageDir.mkdirs()) {
                Log.d(TAG, "failed to create directory");
                return null;
            }
        }

        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss",
                Locale.getDefault()).format(new Date());

        if (type == MEDIA_TYPE_IMAGE) {
            mediaFile = new File(mediaStorageDir.getPath() + "/" + "IMG_"
                    + timeStamp + ".jpg");
        } else if (type == MEDIA_TYPE_VIDEO) {
            mediaFile = new File(mediaStorageDir.getPath() + "/" + "VID_"
                    + timeStamp + ".mp4");
        } else {
            return null;
        }
    }
    else{
        Log.d(TAG, "No external storage found");
        Toast.makeText(this, getString(R.string.storageNotAvailable), Toast.LENGTH_SHORT).show();
    }

    return mediaFile;
} 
```

当我录制视频并按下保存按钮时，应用程序崩溃并出现以下错误：

这是错误堆栈：

```
E/AndroidRuntime( 3972): FATAL EXCEPTION: main
E/AndroidRuntime( 3972): java.lang.NullPointerException
E/AndroidRuntime( 3972):    at java.io.File.fixSlashes(File.java:205)
E/AndroidRuntime( 3972):    at java.io.File.init(File.java:189)
E/AndroidRuntime( 3972):    at java.io.File.<init>(File.java:139)
E/AndroidRuntime( 3972):    at com.sec.android.app.camera.CamcorderEngine.renameTempFile(CamcorderEngine.java:1132)
E/AndroidRuntime( 3972):    at com.sec.android.app.camera.CamcorderEngine.doStopVideoRecordingSync(CamcorderEngine.java:772)
E/AndroidRuntime( 3972):    at com.sec.android.app.camera.CeStateRecording.handleRequest(CeStateRecording.java:69)
E/AndroidRuntime( 3972):    at com.sec.android.app.camera.CeRequestQueue.startFirstRequest(CeRequestQueue.java:104)
E/AndroidRuntime( 3972):    at com.sec.android.app.camera.CeRequestQueue.access$300(CeRequestQueue.java:32)
E/AndroidRuntime( 3972):    at com.sec.android.app.camera.CeRequestQueue$MainHandler.handleMessage(CeRequestQueue.java:54)
E/AndroidRuntime( 3972):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 3972):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime( 3972):    at android.app.ActivityThread.main(ActivityThread.java:3687)
E/AndroidRuntime( 3972):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 3972):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 3972):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
E/AndroidRuntime( 3972):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
E/AndroidRuntime( 3972):    at dalvik.system.NativeStart.main(Native Method) 
```

任何想法是什么导致这个错误？奇怪的是，录制的视频正确地保存在我指定的地图中。

编辑：这是在三星银河 gio 上测试的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:40:00.947

我在[这里](https://stackoverflow.com/questions/12458318/nullpointerexception-at-com-sec-android-app-camera-camcorderengine-renametempfil)找到了答案，显然 MediaStore.EXTRA_OUTPUT 不能正常工作。

# file - 不可执行文件夹

> ID：13378881
> 
> 赞同：0
> 
> 时间：2012-11-14T12:31:24.380
> 
> 标签：file, ubuntu

如何使地图/文件夹/目录无法执行，就像我想要图像文件夹一样，我想在 ubuntu 文件夹/home/images/ 中说仅适用于 jpg、jpeg、png、gif 等照片，如果有人上传了任何 reson像 script.php 这样的脚本不能触发该脚本！

那么在 ubuntu 中创建不能触发（执行）脚本的文件夹？我认为它必须是权限为 666 或 644 的东西，但我不确定这是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:33:29.523

好吧，一个 php 文件没有被执行（它被 php 模块读取）所以你没有保存禁用 x 位。

您必须过滤文件后缀的上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:34:14.493

您应该将 Web 服务器配置为不运行上传目录中的脚本。

# ios - AVComposition 中的曲目在暂停时会丢失时间

> ID：13378884
> 
> 赞同：1
> 
> 时间：2012-11-14T12:31:35.377
> 
> 标签：ios, xcode, audio, avplayer, avcomposition

我创建了一个 AVMutableComposition，它由一堆在特定时间开始的音轨组成。从那里开始，按照 Apple 的建议，我将其转换为 AVComposition，然后再与 AVPlayer 一起播放。

播放这个 AVPlayer 项目一切正常，但如果我暂停它然后继续，合成中的所有轨道似乎相对于彼此滑回大约 0.2 秒（即，它们聚集在一起）。按下暂停和继续几次复合效果，重叠更显着（基本上，如果我打得足够多，我最终会同时播放所有 8 首曲目）。

```
if (self.player.rate > 0.0) {
    //if player is playing, pause
    [self.player pause];

} else {

    if (self.player) {
      [self.player play];
       return;

        }

     */CODE CREATING COMPOSITION - missed out big chunk of code relating to finding the track and retrieving its position and scale/*

        NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES]
                                                            forKey:AVURLAssetPreferPreciseDurationAndTimingKey];

        AVURLAsset *sourceAsset = [[AVURLAsset alloc] initWithURL:url options:options];

        //calculate times
        NSNumber *time = [soundArray1 objectAtIndex:1]; //this is the time scale - e.g. 96 or 120 etc.

        double timenow = [time doubleValue];

        double insertTime = (240*y);

                    AVMutableCompositionTrack *track =
        [composition addMutableTrackWithMediaType:AVMediaTypeAudio
                                 preferredTrackID:kCMPersistentTrackID_Invalid];

        //insert the audio track from the asset into the track added to the mutable composition
        AVAssetTrack *myTrack = [[sourceAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
        CMTimeRange myTrackRange = myTrack.timeRange;
        NSError *error = nil;
        [track insertTimeRange:myTrackRange
                                      ofTrack:myTrack
                                       atTime:CMTimeMake(insertTime, timenow) 
                                        error:&error];

        [sourceAsset release];

    }

} 
    AVComposition *immutableSnapshotOfMyComposition = [composition copy];

        AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:immutableSnapshotOfMyComposition];
        self.player = [[AVPlayer alloc] initWithPlayerItem:playerItem];
        NSLog(@"here");

        [self.player play]; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:25:50.153

好的，这感觉有点 hacky，但如果有人被卡住，它肯定会起作用。如果有人有更好的答案，请告诉我！

基本上，当我点击暂停时，我只是保存轨道的 player.currentTime 并在我点击播放时重新制作轨道，只是从我暂停它的点开始。没有明显的延迟，但如果不浪费这些额外的处理，我仍然会更开心。

确保在你点击暂停后正确释放你的播放器项目，否则你最终会得到一大堆 AVPlayer！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T02:04:22.403

我有一个不那么老套但仍然老套的解决方案。

解决方案来自这样一个事实，我注意到如果您在播放器上搜索，暂停引入的音频和视频之间的延迟消失了。

因此：只需`player.currentTime`在暂停之前和`player seekToTime`再次播放之前保存。它在 iOS 6 上运行良好，尚未在其他版本上进行测试。

# html - 新的 HTML5 Canvas API 支持

> ID：13378885
> 
> 赞同：9
> 
> 时间：2012-11-14T12:31:45.377
> 
> 标签：html, google-chrome, canvas, specifications

我发现了几篇关于 HTML5 Canvas API 中的新功能的文章，例如路径原语或命中区域。似乎当前规范（4.8.11）具有这些功能： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#hit-regions](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#hit-regions)

尽管我的 Chrome 23.0.1271.64 中的 context.addHitRegion （上下文是 canvas2d 上下文）返回未定义（我也无法创建路径原语）。

有人知道这些功能什么时候会实现（他们的公告是从 3 月开始的，所以它已经 8 个月大了）？

我可以在某些浏览器的某些 beta 版本中测试它们吗（最好是在 linux 下）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:42:38.253

没一会儿。

大约 1-2 个月前，我询问了 Chrome 团队和 Firefox 团队，但他们都没有具体的时间表。这似乎还不是优先事项。

在 10 月 28 日我与 FF 人员的电子邮件通信中，他们回复：

> 我假设您指的是 Path / Pattern 对象和相关更改；有-AFAIK-没有立即实施它们的计划。最近进入 2D 画布实现的大部分工作都是重构；特别是，我们曾经有两个独立的实现，其中一个已在几周前被删除。

# c# - Microsoft 服务中的参数

> ID：13378889
> 
> 赞同：0
> 
> 时间：2012-11-14T12:32:04.763
> 
> 标签：c#, service

我正在尝试制作一个工具，该工具将通过批处理文件和自定义服务的组合在另一台 PC 上启动应用程序。

目前，我的程序只需按一下按钮即可运行一个特定的程序。当我点击按钮（在winform中）时，它会启动一个批处理文件，运行我在目标PC上找到的exe。像这样：

```
 // when the service starts open paint
    protected override void OnStart(string[] args)
    {

        // name of the application to launch
        String applicationName = "C:\\TargetFolder\\Target.exe";

        // launch the application
        ApplicationLoader.PROCESS_INFORMATION procInfo;
        ApplicationLoader.StartProcessAndBypassUAC(applicationName, out procInfo);
    } 
```

然后当我点击关闭按钮时，就会发生这种情况

```
 // when the service is stopped close the client
    protected override void OnStop()
    {

        // name of the application to launch
        String batchFile = "C:\\BatchFiles\\KillClient.bat";

        // launch the application
        ApplicationLoader.PROCESS_INFORMATION procInfo;
        ApplicationLoader.StartProcessAndBypassUAC(batchFile, out procInfo);
    } 
```

我的 winform 运行这个批处理文件：

```
@echo off
net start "MyNewService" 
```

不过现在，我正在尝试让我的原始工具根据按钮打开特定的 exe，而无需提供 X 数量的更多服务。谁的唯一工作就是运行这个单一的 exe。

例如，如果我想要一个按钮向上绘画，另一个按钮关闭它，另一个按钮打开单词，最后一个按钮关闭它。我将如何在服务中这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:34:37.020

您不会将服务用于具有 UI 并需要用户交互的程序。

服务适用于在后台安静运行的程序，无需任何人工干预（可能除了启动和停止它之外）。

如果您想要人机交互，那么您需要编写一个常规的 Windows 应用程序（WinForms、WPF、...）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:24:44.140

您需要仔细考虑上面 Chris 给出的答案，因为近年来在加强 Windows 操作系统的安全性方面付出了很多努力。Vista 带来的一个变化（我称之为最近的:)）是服务现在作为“User0”运行，而不是像以前那样作为“User1”运行。User0 无权访问屏幕。

您正在尝试做的是绕过安全性。我在上面说过 - 考虑当没有用户登录到目标机器时会发生什么，但你也可以考虑如果许多用户有活动会话时你想要发生什么。在我看来，您需要稍微回溯一下并更仔细地制定要求。

话虽如此，您的问题标题询问如何将参数传递给 Windows 服务。2个答案浮现在脑海 -

1.  您也许可以将该服务实现为 WCF 服务。（不是 Windows 服务）这将允许您定义一个接收您要传递的参数的方法。WCF 还具有以多种不同方式托管的灵活性。因此，这可能会解决 Chris 和我提出的一些问题；当特定用户登录时运行的控制台主机可能对您的特定问题更有意义。您还可以在 Windows 服务中托管您的 WCF 服务 - 我在上面提到的所有保留中都提到了这一点。

2.  您可以实现一个打开侦听套接字的 Windows(NT) 服务。您的启动器应用程序通过套接字对话连接并传递参数。

毫无疑问还有其他方法。

# c# - 使用 c# 连接到 Exchange Server

> ID：13378892
> 
> 赞同：0
> 
> 时间：2012-11-14T12:32:18.687
> 
> 标签：c#, exchange-server, connect

我尝试使用 c#（而不是 https）连接到我的 Exchange Server（2010 等）。

问题是，一些用户没有启动 Outlook，因此如果有新邮件传入，他们不会收到通知。

所以我想编写一些与用户参数连接的 c# 应用程序。并在 notifyIcon 中返回未读电子邮件的消息。

有人知道与 Exchange 建立这种联系的最佳方式吗？

来自德国的问候弗兰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:38:01.940

您可以使用 EWS-Api（Exchange Web 服务）。NuGet 具有此名称。使用 API，您可能可以使用 AutoDiscover 连接到您的 Exchange，然后根据需要读取和写入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:37:47.067

我们使用 Independentsoft [WebDAV .NET for Exchange](http://www.independentsoft.com/webdavex/index.html)来解决这个问题。我花了一些钱，但它会为你节省很多时间！

# java - 使用Jinput弹出一个JFrame WINdow告警

> ID：13378896
> 
> 赞同：1
> 
> 时间：2012-11-14T12:32:40.197
> 
> 标签：java, swing, timer, jinput

在 Netbeans 中使用[Jinput](http://java.net/projects/jinput)和 Java，我正在开发一个非常小的项目，`JFrame`当用户按下`'K'`键盘上的 时会弹出一个警报窗口，并在用户松开时终止`JFrame`警报窗口`'k'`。`JFrame`在我的代码中，当第一次按下时打开并且似乎无法关闭时，我似乎陷入了 while 循环。我进行了研究，发现使用`javax.swing.Timer`是更好的方法。但是，由于我是这方面的新手，所有使用计时器的不同方式都让我更加困惑。有人可以看看我的代码并指出我正确的方向吗？

这是我的代码；

```
public void startPolling() {
    while(true) {
        ControllerEnvironment.getDefaultEnvironment().getControllers();                
        ca[index].poll();  
        EventQueue queue = ca[index].getEventQueue();
        Event event = new Event();
        while(queue.getNextEvent(event)) {
           StringBuffer buffer = new StringBuffer(ca[index].getName());
           buffer.append(" at ");
           buffer.append(event.getNanos()).append(", ");
           Component comp = event.getComponent();

           buffer.append(comp.getName()).append(" changed to ");
           float value = event.getValue(); 
           if(comp.isAnalog()) {
              buffer.append(value);
           } else {
              if(value==1.0f) {
                 buffer.append("On");
                 if ("K".equals(comp.getName())){
                    alarmBox();
                 }
              } else {
                 buffer.append("Off");
                 if ("K".equals(comp.getName())){
                    alarmBox.setVisible(false);
                 }
              }
           }
           System.out.println(buffer.toString());
        }
  }      
} 
```

alarmBox() 是我的 JFrame。

我正在研究它，这是我更新的代码：

公共无效开始轮询（）{

```
 Timer timer = new Timer(50, new ActionListener() {

        public void actionPerformed(ActionEvent e) {

            ca[index].poll();  
        EventQueue queue = ca[index].getEventQueue();
        Event event = new Event();
        while(queue.getNextEvent(event)) {
           StringBuffer buffer = new StringBuffer(ca[index].getName());
           buffer.append(" at ");
           buffer.append(event.getNanos()).append(", ");
           Component comp = event.getComponent();

           buffer.append(comp.getName()).append(" changed to ");
           float value = event.getValue(); 
           if(comp.isAnalog()) {
              buffer.append(value);
           } else {
              if(value==1.0f) {
                 buffer.append("On");
                 if ("K".equals(comp.getName())){
                    alarmBox();

                 }
              } else {
                 buffer.append("Off");
                 if ("K".equals(comp.getName())){
                    alarmBox.dispose();
                 }
              }
           }
           System.out.println(buffer.toString());
        }

     try {
        Thread.sleep(20);
     } catch (InterruptedException f) {
        f.printStackTrace();
     }

        }

}); timer.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:16:55.413

如果您只想打开和关闭窗口，可以使用计时器吗？你有一个非常复杂的代码，用于一个简单的任务。你可以添加一个 ComponentListener 到你的 JFrame 来隐藏，像这样：

```
frame.addComponentListener(new ComponentAdapter(){

 public void componentMoved(ComponentEvent e) {
     if (popup.isVisible()){
         popup.setVisible(false);
     }
  }
  }); 
```

# javascript - 将 options.rangeSelector.selected 设置为 0 不会将缩放设置为 highstock 中的正确级别

> ID：13378898
> 
> 赞同：0
> 
> 时间：2012-11-14T12:32:51.373
> 
> 标签：javascript, highcharts, highstock

我正在尝试更改简单的 highstock 图表上的默认缩放级别。我一直在寻找解决方案并想出了这个：

```
rangeSelector: {
            selected:0,
        }, 
```

这不适用于下面的代码

```
 chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'dummycontainer'
        },

        rangeSelector: {
            selected:0,
        },

        credits: {
            enabled: false
        },

        yAxis: {
            title: {
                text: ''
            },
            max: 100
        },

        tooltip: {
            pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> <br/>', //({point.change}%)
            valueDecimals: 2
        },
        series: [{
            name: 'MMP',
            data: [

            ],
            marker : {
                enabled : true,
                radius : 3
            },
            shadow : true
        }]
    }); 
```

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:44:44.283

```
rangeSelector: {
    selected:0
} 
```

非常有效

[更改默认时间范围 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/yT2AE/)

在浏览器的 javascript 控制台中检查任何其他与 javascript 相关的错误。如果您在 IE 上试用，或者甚至在其他情况下，我建议您从上面的代码或演示中 删除尾随 comman( `,`) 。`selected:0,`

尾随逗号会导致 json 无效，并且某些浏览器可能无法正确处理它们。您可以验证您的 json @ [http://jsonlint.com/](http://jsonlint.com/)或尝试 jsFiddle 中的 JSLint 选项。

# internet-explorer - IE 9 没有考虑为 IE 8 浏览器定义的元标记

> ID：13378906
> 
> 赞同：1
> 
> 时间：2012-11-14T12:33:20.967
> 
> 标签：internet-explorer, internet-explorer-8, internet-explorer-9, meta

我正在使用 Internet Explorer 9 浏览器，我的网页在浏览器下未对齐，在 IE 8 中运行良好。我在开发工具下将浏览器模式和文档模式保持为 IE 9 标准。下面是我包含在文件中的元标记，但页面仍然未对齐。我尝试将开发工具下的文档类型更改为 IE 8 标准，而不是正常工作，但在 IE 9 标准中不行。我希望页面应该模拟 IE 9 标准的属性。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Untitled Document</title>
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:33:26.223

您需要在元标记中指定工作标准。

将元标记更改为

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

或者

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" /> 
```

或（用于通过浏览器本身查找工作标准）

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
```

# android - GCM - Android 模拟器上的 PHONE_REGISTRATION_ERROR

> ID：13378907
> 
> 赞同：1
> 
> 时间：2012-11-14T12:33:26.983
> 
> 标签：android, cloud, emulation, messaging

我正在使用 Google GCM 演示文件测试 GCM。该演示在我的设备上运行良好，但是当我尝试在 Android 模拟器上对其进行测试时，我收到以下错误：

```
From GCM: error (PHONE_REGISTRATION_ERROR) 
```

在 LogCat 中它说：

```
D/GCMBaseIntentService(566): handleRegistration: registrationId = null, error = PHONE_REGISTRATION_ERROR, unregistered = null 
```

该模拟器在 Adnroid 2.3.3 上运行，并添加了一个 Google 帐户。问题昨天才出现。上周它工作没有任何问题。我没有更改代码中的任何内容，所以我不知道这个错误来自哪里。我还重新启动了模拟器并删除了图像并创建了一个新的，但没有成功。

有人知道问题是什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:57:32.453

我认为它会检查 SIM 卡，但模拟器没有，所以它会抛出这个异常。

# php - Magento Magmi 导入器：导入其他 media_gallery 图像时，原件将被覆盖而不是附加到

> ID：13378924
> 
> 赞同：1
> 
> 时间：2012-11-14T12:34:52.703
> 
> 标签：php, magento, magento-1.7, magmi

在 Magento Magmi 导入器中，我正在尝试向`media_gallery`产品添加额外的图像。不是将额外的 media_gallery 图像添加到现有图像，而是删除现有图像。

我的 CSV 很简单：

```
sku,media_gallery
sku1,/image1::Image label 
```

我正在使用最新版本的 Magmi、v0.7.18beta2 和图像导入器插件。

我的 Magmi 设置如下所示：

![在此处输入图像描述](../Images/685375e6b45a1c25c93d7b009aca34f2.png)

有谁知道可能会发生什么，或者 Magmi 是否能够`media_gallery`在现有图像之上添加图像？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:14:42.883

*   有一个可用的**media_gallery_reset**列。
*   如果数据源中不存在（或未通过值替换器或默认值设置器设置），则应该用数据源中的 media_gallery 值替换整个画廊

*   如果明确设置为 0 ，则图库不会在导入时重置，并且将添加图像。

# javascript - 直接客户端到客户端消息

> ID：13378925
> 
> 赞同：4
> 
> 时间：2012-11-14T12:34:54.077
> 
> 标签：javascript, browser, client-server, chat

我一直在使用 node.js 一段时间，现在当我更深入地研究它时，对于聊天应用程序而不是作为客户端 - 服务器 - 客户端发送消息，必须有一些可能的方式直接客户端到客户端消息发送?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T13:44:17.023

浏览器倾向于通过 HTTP 与服务器通信。有些实现了其他协议，例如 websockets 和[SPDY](http://en.wikipedia.org/wiki/SPDY)，但同样，这些主要是客户端-服务器协议。

一些插件（如 Flash 和 Java）可以打开端口并进行客户端-客户端通信。（AFAIK，实际上并没有使用它们。）

Chrome 是我所知道的唯一可以（很快）从 Javascript 打开 TCP 和 UDP 套接字并进行直接客户端-客户端通信的浏览器。目前普通的网络应用程序无法做到这一点，您的应用程序需要作为“Chrome 打包应用程序”运行，并带有一个特殊`manifest`文件。

以下是[文档](http://developer.chrome.com/apps/app_network.html)、描述该功能的[博客文章](http://blog.alexmaccaw.com/chrome-tcp-udp)和可以像浏览器中的node.js 模块一样运行的[browserify模块。](https://github.com/GoogleChrome/net-chromeify)`net`

编辑：这可能不应该被标记为 [node.js] 因为你试图在浏览器中运行（而不是在你的节点虚拟机中），这是一个 Javascript / 浏览器问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:47:16.263

这与服务器没有任何关系。如果您需要类似的东西并且客户端是闪存，您可以使用[RTMFP](http://en.wikipedia.org/wiki/Real_Time_Media_Flow_Protocol)。对于 JS，我在谷歌上搜索了这个[库](https://github.com/HoLyVieR/RTMFP-JS-Bridge#readme)，它是 RTMFP 的 js 桥，我不知道它是如何工作的。最后，您可以编写自己的库来在客户端之间聊天，但这要困难得多（IP 地址在 NAT 后面，等等......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-08T21:55:25.700

这可能是过时的问题，但看看[PeerJS](http://peerjs.com/)。

它只需要服务器作为连接管理器（代理）。但是所有的通信都是直接在客户端之间完成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T16:08:41.037

我想你的问题的答案就[在这里](https://stackoverflow.com/questions/7022383/how-to-make-a-browser-to-browser-peer-to-peer-connection)

PS 也存在使用 JS 编写的开源浏览器内服务器，但我没有快速搜索它。如果你找到它，请通知我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-24T15:31:46.603

如果您只是不想编写自己的服务器，可以使用：

[https://httprelay.io](https://httprelay.io)

使用 AJAX 调用在对等点之间进行通信。

# html - 我无法在 IE8 和 9 中使用 CSS 获得输入按钮的渐变效果。有什么解决方案吗？

> ID：13378929
> 
> 赞同：0
> 
> 时间：2012-11-14T12:35:03.443
> 
> 标签：html, css

在我用于输入按钮的 CSS 类下面。
我想要带有箭头的渐变按钮。

```
.addBtn{border:1px solid #B9770C;color:#000000;
background: url('../../images/arrow_right.png') no-repeat center bottom; 
/* fallback */
background: url('../../images/arrow_right.png') no-repeat center bottom, -webkit-gradient(linear, left top, left bottom, from(#f9d295), to(#f1a32b)); /* Saf4+, Chrome */
background: url('../../images/arrow_right.png') no-repeat center bottom, -webkit-linear-gradient(top, #f9d295, #f1a32b); /* Chrome 10+, Saf5.1+ */
background: url('../../images/arrow_right.png') no-repeat center bottom,    -moz-linear-gradient(top, #f9d295, #f1a32b); /* FF3.6+ */
background: url('../../images/arrow_right.png') no-repeat center bottom,     -ms-linear-gradient(top, #f9d295, #f1a32b); /* IE10 */
background: url('../../images/arrow_right.png') no-repeat center bottom,      -o-linear-gradient(top, #f9d295, #f1a32b); /* Opera 11.10+ */
background: url('../../images/arrow_right.png') no-repeat center bottom,         linear-gradient(top, #f9d295, #f9d295); /* W3C */
}
.addBtn:hover{          
border: 1px solid #B9770C;              
background: url('../../images/arrow_right.png') no-repeat center bottom; /* fallback */
background: url('../../images/arrow_right.png') no-repeat center bottom, -webkit-gradient(linear, left top, left bottom, from(#f1a32b), to(#f9d295)); /* Saf4+, Chrome */
background: url('../../images/arrow_right.png') no-repeat center bottom, -webkit-linear-gradient(top, #f1a32b, #f9d295); /* Chrome 10+, Saf5.1+ */
background: url('../../images/arrow_right.png') no-repeat center bottom,    -moz-linear-gradient(top, #f1a32b, #f9d295); /* FF3.6+ */
background: url('../../images/arrow_right.png') no-repeat center bottom,     -ms-linear-gradient(top, #f1a32b, #f9d295); /* IE10 */
background: url('../../images/arrow_right.png') no-repeat center bottom,      -o-linear-gradient(top, #f1a32b, #f9d295); /* Opera 11.10+ */
background: url('../../images/arrow_right.png') no-repeat center bottom,         linear-gradient(top, #f1a32b, #f9d295); /* W3C */
} 
```

![IE9的屏幕截图。 查看添加和删除按钮](../Images/d079b84a739da322e2cbd2cb37ecacd1.png)

**您可以在 IE 和其他浏览器中查看此 URL。 [http://jsfiddle.net/aEK4j/](http://jsfiddle.net/aEK4j/)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:08:28.027

使用此站点获取所有内容的渐变！这对所有版本的 IE(6-9) 都很有用！

[高级彩色好东西](http://colorzilla.com/)

# hadoop - 日食的字数

> ID：13378932
> 
> 赞同：2
> 
> 时间：2012-11-14T12:35:06.953
> 
> 标签：hadoop, eclipse-plugin, hdfs, word-count, hadoop-plugins

我正在为hadoop使用eclipse插件。我可以通过制作一个 hadoop 服务器来查看 HDFS 中的所有文件，但是当我尝试从 eclipse 运行 wordcount.java 文件时，它给了我异常，而从终端它运行顺利。例外情况如下。

```
2/11/14 04:09:06 WARN util.NativeCodeLoader: Unable to load native-hadoop library for  your platform... using builtin-java classes where applicable
12/11/14 04:09:06 WARN mapred.JobClient: No job jar file set.  User classes may not be     found. See JobConf(Class) or JobConf#setJar(String).
12/11/14 04:09:06 WARN snappy.LoadSnappy: Snappy native library not loaded
12/11/14 04:09:06 INFO mapred.JobClient: Cleaning up the staging area file:/tmp/hadoop-hduser/mapred/staging/hduser1728681403/.staging/job_local_0001
12/11/14 04:09:06 ERROR security.UserGroupInformation: PriviledgedActionException as:hduser cause:org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: file:/user/hduser/gutenberg
Exception in thread "main" org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: file:/user/hduser/gutenberg
    at org.apache.hadoop.mapred.FileInputFormat.listStatus(FileInputFormat.java:197)
    at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:208)
    at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:989)
    at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:981)
    at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824)
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1261)
    at WordCount.run(WordCount.java:149)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at WordCount.main(WordCount.java:155) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:45:03.950

我将从调查此开始：

```
ERROR security.UserGroupInformation: PriviledgedActionException as:hduser cause:org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: file:/user/hduser/gutenberg 
```

似乎它导致了问题。你确定这是正确的路径吗？如果是这样，您可能无权访问它。稍后我会尝试尽可能多地消除 WARN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T17:30:31.667

感谢 Shujaat 解决了我的问题。从 Eclipse 我遇到了同样的问题...使用 hdfs://localhost:54310/user/... 而不是“/user/...”

# activerecord - ActiveRecord 有没有一种方法可以返回其他类的实例而不是调用 find 的实例？

> ID：13378933
> 
> 赞同：0
> 
> 时间：2012-11-14T12:35:11.533
> 
> 标签：activerecord

让我们考虑以下示例：

```
class Ball < ActiveRecord::Base
  def is_ball?
    true
  end
end

class BlueBall < Ball
  def color
    :blue
  end
end

class RedBall < Ball
  def color
    :red
  end
end 
```

当我这样做时`Ball.find(id)`，是否有可能`BlueBall`返回一个实例？

我可以得到一个带有和实例`Ball.where(owner: some_user).to_a`的数组吗？`BlueBall``RedBall`

* * *

我正在寻找一种通过使用其他列来显式设置 STI 的方法`type`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:45:59.107

如果可以重命名您的类`Red`而`Blue`不是`RedBall`and`BlueBall`

```
def Ball < ActiveRecord::Base

  self.inheritance_column = :color

  def ball?
    is_a?(Ball)
  end

end

def Red < Ball
  # Red#color would return 'Red'
end

def Blue < Ball
  # Blue#color would return 'Red'
end 
```

# php - 使用 PDO 时，简单 Select 语句不起作用

> ID：13378934
> 
> 赞同：1
> 
> 时间：2012-11-14T12:35:14.007
> 
> 标签：php, mysql

我试图选择一个`user id`( `uID`) 只是为了检查它是否存在......我被困在最基本的选择语句中......

我搜索并尝试了不同人的代码，但要么我的代码总是返回 true（如果我不使用 fetch），要么它说它不是一个对象，我不能不使用 fetch....

```
$sql = 'SELECT uID FROM ldc_user_details where uID=3';
$q = $this->db->prepare($sql);
$i=$q->execute();

     foreach ($i->fetch() as $key => $val){
      echo 'key='.$key." val =".$val;
     }

ERROR: Call to a member function fetch() on a non-object in /home/pdwdev/public_html/ldc_main.php 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:36:51.817

您需要调用 fetch on `$q`，而不是`$i`。`execute`返回一个指示成功或失败的布尔值。

```
 if($i){ //indicates whether the query succeeded
     foreach ($q->fetchAll() as $key => $val){
         echo 'key='.$key." val =".$val;
     }
 } 
```

请注意，我正在使用`fetchAll`获取所有行。`fetch`将只返回一个，并将指针前进到下一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T12:44:19.037

```
<?php

$sql = 'SELECT uID FROM ldc_user_details where uID=3';

// no need to use prepare() here unless there's a user input

$q = $this->db->query($sql);

// a check for rowCount would be good
if ($q->rowCount() > 0) {

    // all results will be in $i
    $i = $q->fetchAll();

     foreach ($i as $key => $val){

         echo "Key : {$key} <br> Val : {$val}";
     }
}
else {
    die("Zero Results returned");
} 
```

?>

# c++ - extern const 数组不链接

> ID：13378935
> 
> 赞同：2
> 
> 时间：2012-11-14T12:35:19.240
> 
> 标签：c++, arrays, constants, extern

> **可能重复：**
> [为什么 const 在 C++ 中暗示内部链接，而在 C 中却没有？](https://stackoverflow.com/questions/998425/why-does-const-imply-internal-linkage-in-c-when-it-doesnt-in-c)

如果我有以下情况：

一个.cpp：

```
const int ArrayOfInts[] = {1, 2, 3, 4, 5}; 
```

b.cpp：

```
extern const int ArrayOfInts[];

void SomeFunc()
{
    int a = ArrayOfInts[0];
} 
```

链接器抱怨 ArrayOfInts 无法从 b.obj 中解析。删除 const 限定符使链接成功。任何想法为什么会失败？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:41:04.157

当编译器编译`b.cpp`时，据它所知， 的值`ArrayOfInts[0]`可以是任何值。所以它不是编译时常量。在 C++ 中，文件范围的常量默认是编译时常量。

# c++ - 将 2^31 分配给浮点数或双精度数

> ID：13378936
> 
> 赞同：-1
> 
> 时间：2012-11-14T12:35:24.223
> 
> 标签：c++, floating-point, double, floating-point-precision, double-precision

我必须将一个整数值乘以 2^31。我用谷歌搜索了它，看起来双打的范围在 2.23e-308 <= |X| 之间 <= 1.79e308 使用 64 位，浮点数介于 1.18e-38 <= |X| <= 3.40e38。

这比我需要的要多得多。但它不起作用。

我的头文件中有这个常量值：

```
static const float SCALE_FACTOR = 2^-31; 
```

如果那时我只是这样做：

```
float dummy = SCALE_FACTOR; 
```

那么，dummy 的值为 11。

我不知道问题是否在于分配这样的常量值，但我不知道如何在不丢失精度的情况下编写它。

有什么帮助吗？

编辑：对不起，愚蠢的问题。我的 MatLab 背景背叛了我，忘记了 ^ 不适用于 C++ 中的求幂。我已经投票关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T12:38:04.170

^ 是 C++ 中的按位异或运算符，而不是数学求幂运算符。你有几个选择。

1.  因为您以本质上有损格式 a 存储常量，所以`float`您可以计算出 base-10`e`形式的文字并使用它：也许类似于`4.6566128730773926e-010`2^-31。这很容易出错（例如，我已经做了一个），并且不一定可以在浮点格式之间移植。
2.  您可以使用可以在编译时计算的常量表达式来设置常量，并使用整数文字：例如2^31`0x80000000`或2^-31`1UL << 31`或`1.0f / 0x80000000`2^-31。

当然，您可以使用某种`pow`函数在运行时计算值。

顺便说一句，如果您使用整数，为什么不直接使用`long long`或其他 64 位整数类型，而不是可能会出现舍入错误的浮点数？从您的问题来看，您是否正在查看浮点值并不完全清楚，因为您*需要*浮点值范围，还是因为您只是担心溢出 32 位整数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:50:39.100

在您的代码中

```
static const float SCALE_FACTOR = 2^-31; 
```

是`static`多余的（常量默认有内部链接），`^`表示按位异或，`-`没有意义（至少如果你想“乘以 2^31”），并且`float`是不必要的特殊选择，而不是默认浮点类型`double`（例如是浮点文字的类型，例如`3.14`）。

此外，在 C++ 中保留为宏大写所有大写标识符（通用约定）。将它们用于常量是一种 Java 主义。具有讽刺意味的是，Java 约定起源于 C，过去的常量有时必须表示为宏。

相反，因此写

```
double const scale_factor = 1uL << 31; 
```

在哪里

*   没有明确指定内部链接（关键字`static`），

*   使用默认浮点类型`double`而不是`float`,

*   不使用全大写标识符（应为宏保留），

*   使用左位移`<<`来计算二的幂，而不是不正确的`^`，

*   不添加任何无意义的减号，

*   使用类型`unsigned long`（由 指定`uL`）确保有足够的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:37:05.873

`^`是按位 XOR 的运算符，而不是用于提高幂的运算符。你需要`std::pow()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T13:30:41.563

乘以 2 的幂相当于左移该幂。要将整数乘以 2 到 31，只需将其移位：

```
unsigned long value = whatever;
unsigned long value_times_2_to_the_31 = value << 31; 
```

这里不需要浮点数学。但为了完整起见，要产生 2 到 31 的双精度值：

```
double two_to_the_31 = std::ldexp(1.0, 31); 
```

请注意，虽然在某些情况下，带符号类型的移位表达式的结果在形式上是未定义的，但这是由于整数类型溢出造成的；使用浮点数学并不能消除溢出，它只是将其放入代码的不同部分。

# vba - 循环工作表中的圆形单元格以使用 VBA 向每个单元格添加形状

> ID：13378938
> 
> 赞同：5
> 
> 时间：2012-11-14T12:35:31.640
> 
> 标签：vba, loops

我对 VBA 相当陌生，并且正在尝试在表格的每一列中添加一个箭头。我收到错误：`method 'range' of object '_global' failed`。

我应该怎么做才能修复它。

```
Sub loop1()
    'Loop round range P6:AA10
    Dim i As Integer
    Dim j As Integer
    Dim k As Integer

    For i = 9 To 14
        For j = 6 To 10
            k = (i * 2) - 1
            ActiveSheet.Shapes.AddShape(msoShapeRightArrow, Range(Cells(j, k)).Left + 2, _
                Range(Cells(j, k)).Top + 3, 15, 10).Select
        Next j
    Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:12:41.167

删除 Range()，看起来 .Left 和 .Top 是 Cells 的属性，而不是 Range 对象。此代码在 Excel 2010 上为我运行：

```
Sub loop1()
    'Loop round range P6:AA10
    Dim i As Integer
    Dim j As Integer
    Dim k As Integer

    For i = 9 To 14
        For j = 6 To 10
            k = (i * 2) - 1
            ActiveSheet.Shapes.AddShape(msoShapeRightArrow, Cells(j, k).Left + 2, _
                Cells(j, k).Top + 3, 15, 10).Select
        Next j
    Next i
End Sub 
```

# javascript - 是否有系统的方法来确定使用 chrome 开发人员工具在何处实例化导致 GC 暂停的对象？

> ID：13378946
> 
> 赞同：2
> 
> 时间：2012-11-14T12:36:21.093
> 
> 标签：javascript, google-chrome, garbage-collection

从内存时间线中可以清楚地看出，我在 javascript 执行中看到的严重暂停是垃圾收集的结果。尚不清楚是哪些对象导致了此问题。有没有系统的方法可以查到？像被垃圾收集的对象列表之类的东西？

# javascript - 我需要更改什么才能将我的 jQuery 查找功能转换为 mootools？

> ID：13378948
> 
> 赞同：1
> 
> 时间：2012-11-14T12:36:27.467
> 
> 标签：javascript, jquery, dom, mootools

我有这个 jQuery 代码：

```
$('#uploadedFiles') // jQuery
.find("input[value='"+searchedValue+"']").each(function(){
    window.alert($(this).attr("id"));
}); 
```

这如何转化为 Mootools？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:41:09.513

假设这`uploadedFiles`是某个容器的 ID：

```
$("uploadedFiles") // MooTools
    .getElements("input[value='" + searchedValue + "']")
    .each(function(el) {
        window.alert(el.id);
    }); 
```

**演示：http:** [//jsfiddle.net/e4Hbt/](http://jsfiddle.net/e4Hbt/)

# java - XMPP 客户端（带有 smack）和 ActiveMQ，如何拦截“adminConsole”消息

> ID：13378952
> 
> 赞同：1
> 
> 时间：2012-11-14T12:36:49.050
> 
> 标签：java, xmpp, activemq, client-side, smack

我制作了一个非常简单的 java 应用程序（它只是一个证明），我可以毫无问题地连接到我的 ActiveMQ 消息代理（它安装在我用来测试我的 java 应用程序的同一台机器上）。问题是我无法拦截任何消息。我在我的应用程序中设置了一个 messageListener，如下所示，但我不确定它是否在正确的位置，也不确定拦截消息的正确方法（例如使用管理员中可用的“发送到”选项发送的消息ActiveMQ 的控制台，如本文下部的链接中所述）。下面是 messageListener 的代码：

```
/*................previous code is not relevant.................*/
ConnectionConfiguration config = new ConnectionConfiguration("192.168.43.5",61222); //to get my XMPP connector uri
String msg="";
config.setSASLAuthenticationEnabled(false);
config.setCompressionEnabled(false);
XMPPConnection xmpp = new XMPPConnection(config);

try {

    xmpp.connect(); 
    xmpp.login("name", "pw");
        /*Filter*/
    PacketFilter filter = new MessageTypeFilter(Message.Type.chat); 
        /*MessageListener to get messages*/             
    MessageListener listen = new MessageListener() {
        @Override
        public void processMessage(Chat arg0, Message arg1) {
            // TODO Auto-generated method stub
            msg = "ok ";
            msg = arg1.toString();
            }
        };
    /*New chat with my messageListener*/
        Chat c = xmpp.getChatManager().createChat("admin", listen) ;
        c.sendMessage("enter text here");
    }
     catch (XMPPException e) {  
}
/*...............other code.......................*/ 
```

这或多或少是我想要做的，使用我的java应用程序而不是spark（我已经能够用spark做到这一点）。 [带有 XMPP 的 ActiveMQ](http://activemq.apache.org/xmpp.html)

感谢所有愿意帮助我的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:36:28.437

我不知道 ActiveMQ 在 XMPP 方面是如何工作的，但 ActiveMQ 很可能不会根据您创建的同一聊天向您发送消息。聊天使用线程 id 进行协调，如果 MQ 使用不同的发送，或者根本不发送，它可能与您创建的聊天不匹配，因此不会调用您的侦听器

尝试[向 ChatManager 添加一个侦听器](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/messaging.html)，以获取新传入聊天的通知，并尝试使用**-Dsmack.debugEnabled=true**运行以确保您实际接收到来自 ActiveMQ 的数据包。

顺便说一句，在这种情况下不使用您的 PacketFilter，当您将侦听器直接放在连接上时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:35:08.083

我希望这不仅仅是侥幸。我试图替换：

```
PacketFilter filter = new MessageTypeFilter(Message.Type.chat); 
```

和：

```
PacketFilter filter = new AndFilter(new PacketTypeFilter(Message.class)); 
```

我已经更换了：

```
MessageListener listen = new MessageListener() {
    @Override
    public void processMessage(Chat arg0, Message arg1) 
```

和：

```
PacketListener ls= new PacketListener() {
@Override
public void processPacket(Packet arg0) 
```

听众现在工作得很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-26T02:18:31.320

Apache ActiveMQ Artemis 支持拦截器来拦截进出服务器的数据包。核心协议的拦截器必须实现接口*Interceptor*。

官方教程中有一个例子：[Intercepting Operations](https://activemq.apache.org/artemis/docs/latest/intercepting-operations.htm)

```
package org.apache.activemq.artemis.api.core.interceptor;

public interface Interceptor
{
    boolean intercept(Packet packet, RemotingConnection connection) throws ActiveMQException;
} 
```

# php - 如何记录 PHP 编译器错误？

> ID：13378959
> 
> 赞同：0
> 
> 时间：2012-11-14T12:37:09.633
> 
> 标签：php, error-log

如何确定为什么`PHP`我的网络主机上的页面没有编译？

编译器错误记录在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:40:19.330

应该与运行代码的文件位于同一目录中。使用以下命令打开所有错误报告：

```
error_reporting(E_ALL);
ini_set('error_reporting', E_ALL);

ini_set('error_log', 'script_errors.log')  // change here
ini_set('log_errors', 'On') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T12:44:51.737

尝试这个：

将以下代码放在文件顶部：

```
ini_set("log_errors", 1);
ini_set("error_log", "/path/to/php-error.log"); 
```

有关更多信息，请阅读下面提到的文章。
[http://perishablepress.com/advanced-php-error-handling-via-php/](http://perishablepress.com/advanced-php-error-handling-via-php/)
[http://www.cyberciti.biz/tips/php-howto-turn-on-error-log-file.html](http://www.cyberciti.biz/tips/php-howto-turn-on-error-log-file.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:39:04.553

您可以在主机的 cPanel 中找到它。

但有些主机将来自同一服务器上所有站点的所有错误合并到一个日志文件中。

您必须搜索自己的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T12:40:52.543

PHP中没有编译器错误之类的东西。发生的每个错误都以 HTML 数据的形式直接发送到浏览器。检查您是否已在脚本中设置`error_reporting(E_ALL);`和`display_errors(1);`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T12:41:55.997

PHP 通常不会被编译，我猜你正在寻找运行时错误。可以使用该[`error_reporting()`](http://php.net/manual/en/function.error-reporting.php)方法控制如何显示运行时错误。

也就是说，确实有像[Facebook 的 HipHop 这样的](https://developers.facebook.com/blog/post/2010/02/02/hiphop-for-php--move-fast/)PHP 编译器，所以如果您正在寻找“编译器错误”，我相信您将不得不进一步详细说明您的问题。

# jquery - 等到 jQuery.fadeIn() 开始但不一定完成

> ID：13378964
> 
> 赞同：0
> 
> 时间：2012-11-14T12:37:28.750
> 
> 标签：jquery, html, fadein

我正在努力弄清楚如何做到这一点。我在一些 jQuery UI 选项卡中有一些 jqGrid 元素。为了确保网格 100% 填充宽度，我编写了一个简单的`window.resize`事件。

当用户单击一个按钮时，我会淡出标签，清除并重新加载 jqGrids，然后将标签淡入。您可以在这里看到这一切：http: [//jsfiddle.net/qvY9s/7/](http://jsfiddle.net/qvY9s/7/)（单击“重新加载'按钮以查看它的工作）。

但是，我希望网格在开始变得可见时立即调整大小以填充选项卡。如果我`$(window).resize()`在调用选项卡后立即调用`$(..).fadeIn()`，那么它不起作用 - 我猜是因为动画还没有开始并且网格还没有变得可见。

是否有`window.resize`在淡入淡出效果开始后触发？

（如果我能帮上忙，我不想等到最后。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:45:42.453

您可以设置一个超时直接调用 resize 函数：

```
$('#container').fadeIn(2000);
setTimeout(custJqGResize,10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:42:27.110

您可以在执行此操作之前延迟任意时间：

```
setTimeout(function(){$(window).resize()},100); 
```

更新小提琴：http: [//jsfiddle.net/qvY9s/8/](http://jsfiddle.net/qvY9s/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T12:46:38.637

这很好用，在 loadGrids() 函数的顶部添加这一行：

`$('#container').show().css('visible', false);`

想法是使容器不可见，但在淡入之前用完其正常布局空间

jsFiddle 为此：http: [//jsfiddle.net/qvY9s/9/](http://jsfiddle.net/qvY9s/9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T12:41:33.603

您是否尝试过 onmousedown 和 onmouseup 事件？onmousedown -> 调整大小 onmouseup -> fadeIn

# iphone - 对图像使用数组

> ID：13378972
> 
> 赞同：0
> 
> 时间：2012-11-14T12:38:14.860
> 
> 标签：iphone, objective-c, xcode

我必须制作一个包含图像的数组，然后检查另一个图像是否与它们发生冲突。

到目前为止，我已经尝试过：

```
NSMutableArray *platforms = [NSMutableArray array];
[platforms addObject:platform1];
[platforms addObject:platform2];
[platforms addObject:platform3];
[platforms addObject:platform4];
[platforms addObject:platform5];
[platforms addObject:platform6];
[platforms addObject:platform7];
[platforms addObject:platform8];
for (platforms in platforms) << code not working needs to do this for the amount of platforms in the array
{
    if(CGRectIntersectsRect(ball.frame, platforms.frame))
    {

    }
} 
```

虽然这段代码不起作用。

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:47:18.030

问题是您的数组由`UIImages`. 您需要添加`UIImageViews`以实现此类任务。

没有框架属性`UIImage`。添加`UIImageViews`而不是`UIImage`.

并将代码更改为：

```
for (UIImageView *imgView in platforms)
{
   if(CGRectIntersectsRect(ball.frame, imgView.frame))
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:43:14.813

```
for (id platform in platforms) {
...
} 
```

或使用：

```
for (id theObject in platforms) {
    if(theObject isKindOfClass[UIImage class]) {
        UIImage *theImage = (UIImage*) theObject; 
       //do something with the image 
    }
} 
```

另外 - 你没有初始化你的数组。采用：

```
NSMutableArray *platforms = [[NSMutableArray array] initWithCapacity:8]; 
```

或者至少：

```
NSMutableArray *platforms = [[NSMutableArray array] init]; 
```

初始化期间为容量提供的 8 不需要是确切的数量，也不需要是对象的最大数量。当数字匹配或仅略高于阵列中的实际最大对象数时，这只是（次要）性能增益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:17:22.450

试试这个

```
if ([platforms containsObject:@"platforms1"]) {
NSLog(@"the object selection is contained in array");
}
else{
NSLog(@"not contain");
} 
```

# java - 如何在 rot13 和凯撒加密中添加更多字符和字母

> ID：13378975
> 
> 赞同：-1
> 
> 时间：2012-11-14T12:38:24.053
> 
> 标签：java, encryption, encryption-symmetric, rot13

我想在这个加密器的字母表中添加字母“ç”、“ğ”、“ı”、“ö”和“ü”，也许还可以添加特殊字符。我怎样才能做到这一点？

```
 for (int i = 0; i < metin.length(); i++) {
        char harf = metin.charAt(i);
        if       (harf >= 'a' && harf <= 'm') harf += i;
        else if  (harf >= 'A' && harf <= 'M') harf += i;
        else if  (harf >= 'n' && harf <= 'z') harf -= i;
        else if  (harf >= 'N' && harf <= 'Z') harf -= i;
        System.out.print(harf);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:47:40.280

您正在使用 Java 实习生 Char 作为整数来实现密码。一个更好的方法是`String charSet = "abcdefgh.... %&/(öäüô";`在你的 charSet 中使用你想要的字符。

```
String charset = "abcdefghijklmnopqrstuvwxyzäöü";    
for (int i = 0; i < metin.length(); i++) {
    int j = charset.indexOf(metin.charAt(i));
    if(j < -1)
    {
        //deal with unknown char
    }
    if(j == charset.length)
    {
        j=0;
    }
    System.out.print(charset.charAt(j+1);
} 
```

我希望你能明白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:57:35.537

您可以像这样使策略更通用。

```
String text = "abcdefghijklmnopqrstuvwxyz0123456789!$%^&*()äöü";

for (int i = 0; i < text.length(); i++) {
    char ch = text.charAt(i);
    ch--;
    if (ch % 32 < 13)
        ch += 13;
    else if (ch % 32 < 26)
        ch -= 13;
    else if (ch % 32 < 29)
        ch += 3;
    else
        ch -= 3;
    ch++;
    System.out.print(ch);
} 
```

印刷

```
nopqrstuvwxyzabcdefghijklm#$%&'()*+,.12[3756ñéÿ 
```

# javascript - 如何使用 javascript 创建签名的 PKCS#7 消息？

> ID：13378979
> 
> 赞同：3
> 
> 时间：2012-11-14T12:38:26.540
> 
> 标签：javascript, cryptography, pkcs#7, certenroll

我正在尝试使用 javascript 在客户端为 PKCS#10 证书请求创建签名的 PKCS#7 消息。

PKCS#10 上有很好的例子：http: [//blogs.msdn.com/b/alejacma/archive/2009/01/28/how-to-create-a-certificate-request-with-certenroll-javascript.aspx](http://blogs.msdn.com/b/alejacma/archive/2009/01/28/how-to-create-a-certificate-request-with-certenroll-javascript.aspx)

但我需要创建 PKCS#7 并且无法弄清楚如何去做。CertEnroll 的官方文档中缺少示例（实际上根本没有）：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa374850 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374850(v=vs.85).aspx)

我最终得到了这段代码：

```
var XCN_CRYPT_STRING_BASE64REQUESTHEADER = 3;

var XCN_CERT_NAME_STR_NONE = 0;

var _certEnrollClassFactory = new ActiveXObject("X509Enrollment.CX509EnrollmentWebClassFactory");

ComposePKCS10Request: function (containerName, subject)
{
    // PKCS #10 certificate request
    var objRequest = _certEnrollClassFactory.CreateObject("X509Enrollment.CX509CertificateRequestPkcs10");

    var objCSP = objCertEnrollClassFactory.CreateObject("X509Enrollment.CCspInformation");
    var objCSPs = objCertEnrollClassFactory.CreateObject("X509Enrollment.CCspInformations");

    //  Initialize the csp object using the desired Cryptograhic Service Provider (CSP)
    objCSP.InitializeFromName("Microsoft Enhanced Cryptographic Provider v1.0");

    //  Add this CSP object to the CSP collection object
    objCSPs.Add(objCSP);

    // asymmetric private key that can be used for encryption, signing, and key agreement.
    var objPrivateKey = _certEnrollClassFactory.CreateObject("X509Enrollment.CX509PrivateKey");

    //  Provide key container name, key length and key spec to the private key object
    objPrivateKey.ContainerName = containerName;
    //objPrivateKey.Length = 1024;
    objPrivateKey.KeySpec = 1; // AT_KEYEXCHANGE = 1

    //  Provide the CSP collection object (in this case containing only 1 CSP object)
    //  to the private key object
    objPrivateKey.CspInformations = objCSPs;

    // Initialize P10 based on private key
    objRequest.InitializeFromPrivateKey(1, objPrivateKey, ""); // context user = 1

    // X.500 distinguished name (DN)
    // The DN consists of a sequence of relative distinguished names (RDNs). Each RDN consists of a set of attributes, 
    // and each attribute consists of an object identifier (OID) and a value. The data type of the value is identified 
    // by the DirectoryString structure.
    var objDn = _certEnrollClassFactory.CreateObject("X509Enrollment.CX500DistinguishedName");

    // DN related stuff
    objDn.Encode(subject, XCN_CERT_NAME_STR_NONE);
    objRequest.Subject = objDn;

    return objRequest;
}

CreatePKCS7: function (containerName, subject)
{
    // PKCS #7 certificate request
    var objPKCS7Request = _certEnrollClassFactory.CreateObject("X509Enrollment.CX509CertificateRequestPkcs7");

    // initialize PKCS #7 certificate request by PKCS #10 certificate request
    objPKCS7Request.InitializeFromInnerRequest(this.ComposePKCS10Request(containerName, subject));

    var objSignerCert = _certEnrollClassFactory.CreateObject("X509Enrollment.CSignerCertificate");
    var verifyType = 4; /* VerifyAllowUI, see typedef enum X509PrivateKeyVerify */
    var encodingType = 0x3; /* see typedef enum EncodingType */

    /**********************************************************************/
    /* I have to provide certificate here??? How can I obtain it from UI? */
    /**********************************************************************/
    var strCertificate = '?????????????????????';

    objSignerCert.Initialize(false, verifyType, encodingType, strCertificate);

    /*****************************************************************************/
    /* Also I'm not shure that SignerCertificate can be accessed via javascript. */
    /*****************************************************************************/
    objPKCS7Request.SignerCertificate = objSignerCert;

    // represents the top level object and enables you to enroll in a certificate hierarchy and install a certificate response
    var objEnroll = _certEnrollClassFactory.CreateObject("X509Enrollment.CX509Enrollment");

    // Enroll
    objEnroll.InitializeFromRequest(objPKCS7Request);

    var pkcs7;

    try
    {
        pkcs7 = objEnroll.CreateRequest(XCN_CRYPT_STRING_BASE64REQUESTHEADER);
    }
    catch (e)
    {
        ...
    }

    return pkcs7;
} 
```

有没有办法用 javascript 创建 PKCS#7 消息？

更新：我已经收到了 PKCS#10 证书请求（请参阅代码示例中的第一个函数）并且需要为其创建 PKCS#7 签名消息。好的，我解释一下我的问题。如何使用 javascript 创建签名的 PKCS#7 消息？（理想情况下，它应该允许使用 UI 指定适当的证书。）

至于 javascript，我知道这不是方便的方式，但很合适，因为我必须在客户端（在浏览器中）处理它。此外，cert注册IX509CertificateRequestPkcs7接口有标记为[WebEnabled]的方法，所以我相信一定有办法做到我所说的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T01:24:47.900

您可以使用 Forge 在纯 JS 中执行 PKCS#7 和 PKCS#10（在浏览器或 node.js 中工作）：

[https://github.com/digitalbazaar/forge#pkcs7](https://github.com/digitalbazaar/forge#pkcs7)

[https://github.com/digitalbazaar/forge#pkcs10](https://github.com/digitalbazaar/forge#pkcs10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T01:59:25.533

PKCS#7 格式在[rfc2315](https://www.rfc-editor.org/rfc/rfc2315)中使用 ASN.1 表示法定义。

### ASN.1

ASN.1 是一种用于定义数据结构的符号。此外，还有 DER - 定义如何将 ASN.1 表示法编码为二进制数据的编码规则。

### ASN1.js 编码器

所以问题归结为“是否有任何实现 ASN1 的 JS 库？” 有[一些解码库](https://github.com/search?l=JavaScript&q=asn1&ref=cmdform&type=Repositories)

但唯一的编码器是这个：[https ://github.com/indutny/asn1.js](https://github.com/indutny/asn1.js)

### ContentInfo 和类型

让我们更深入地了解。PKCS#7 的 ASN.1 如下：

```
ContentInfo ::= SEQUENCE {
  contentType ContentType,
  content
    [0] EXPLICIT ANY DEFINED BY contentType OPTIONAL }

ContentType ::= OBJECT IDENTIFIER 
```

这里我们需要了解什么是OBJECT IDENTIFIER。它是定义某种类型的特殊数字序列。PKCS#7 的有效对象标识符如下：

```
data OBJECT IDENTIFIER ::= { pkcs-7 1 }
signedData OBJECT IDENTIFIER ::= { pkcs-7 2 }
envelopedData OBJECT IDENTIFIER ::= { pkcs-7 3 }
signedAndEnvelopedData OBJECT IDENTIFIER ::= { pkcs-7 4 }
digestedData OBJECT IDENTIFIER ::= { pkcs-7 5 }
encryptedData OBJECT IDENTIFIER ::= { pkcs-7 6 } 
```

pkcs-7 是 PKCS#7 格式的对象标识符。

```
pkcs-7 OBJECT IDENTIFIER ::=
  { iso(1) member-body(2) US(840) rsadsi(113549)
      pkcs(1) 7 } 
```

如您所见，该字段有`ANY DEFINED BY contentType`修饰符。`content`这意味着该字段可以是 6 种类型中的任何一种，具体取决于 contentType 字段的值。

似乎您需要签名消息，因此内容类型为“signedData”

### 使用 JS 的 ContentInfo 编码

这如何转化为 ASN1.js 代码？你在这里：

```
var PKCS7_CONTENT_TYPES = {
    "1 2 840 113549 1 7 1": "data",
    "1 2 840 113549 1 7 2": "signedData",
    "1 2 840 113549 1 7 3": "envelopedData",
    "1 2 840 113549 1 7 4": "signedAndEnvelopedData",
    "1 2 840 113549 1 7 5": "digestData",
    "1 2 840 113549 1 7 6": "encryptedData",
};

var ContentInfo = asn1.define('ContentInfo', function() {
    this.seq().obj(
        this.key('contentType').objid(PKCS7_CONTENT_TYPES),
        this.key('content').optional().explicit(0).any()
    );
}); 
```

那么，如何使用这个 ContentInfo 呢？

```
var signedData = ...
   contentInfoEncoded = ContentInfo.encode({
     'contentType': 'signedData',
     'content': signedData
   }) 
```

### 签名数据

待续...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:50:02.880

**VBScript 方法**（会提示选择证书）：

```
Function SignMessage(Message)
    Dim oUtils
    Set oUtils = CreateObject("CAPICOM.Utilities")
    Dim cpcSigner
    Set cpcSigner = CreateObject("CAPICOM.Signer")
    cpcSigner.Options = 2 'CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY
    Dim cpcSignedData
    Set cpcSignedData = CreateObject("CAPICOM.SignedData")
    cpcSignedData.Content = oUtils.Base64Decode(Message)
    SignMessage = cpcSignedData.Sign(cpcSigner, False)
End function 
```

**Javascript 方法**（*小心，因为在 JS 中编码字符串，你会得到损坏的签名，所以我建议**使用 VBScript**在你的客户端脚本中签名数据，因为它可以与 JS 互操作*）：

```
var CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY = 2;

SignMessage: function (message) {
    var cpcSigner = new ActiveXObject("CAPICOM.Signer");
    cpcSigner.Options = CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY;

    var cpcSignedData = new ActiveXObject("CAPICOM.SignedData");
    var oUtils = new ActiveXObject("CAPICOM.Utilities");
    cpcSignedData.Content = oUtils.Base64Decode(message);

    return cpcSignedData.Sign(cpcSigner, false);
} 
```

# jquery - 在 IE9 中访问 navigator.userAgent 时权限被拒绝

> ID：13378985
> 
> 赞同：2
> 
> 时间：2012-11-14T12:39:17.883
> 
> 标签：jquery, internet-explorer-9

我有一个令人费解的问题：这个看似简单的页面在 IE9 中不起作用：

```
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <!-- jq.js is the non-minified jQuery library -->
    <script type="text/javascript" src="jq.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('body').append('<h1>ok</h1>');
        });
    </script>
</head>

<body>
</body>
</html> 
```

我得到的行为是*有时*页面显示“正常”，*有时*它不显示任何内容。我发现这取决于计算机的速度。如果您使用的是速度快的计算机，它通常可以工作，但在速度较慢的计算机上，它会失败大约 3 次中的 2 次。

当我查看调试控制台时，症状是 jQuery 在尝试访问`navigator.userAgent`.

浏览器写入（在日志中）它正在从`quirks`模式切换到`IE9`模式。我的假设是 jQuery 在浏览器切换到模式之前被加载`IE9`，导致 jQuery 被捕获在`quirks`模式中并且从那里无法访问任何浏览器属性。

我尝试插入`<!doctype html>`并插入`X-UA-Compatible`元标记以使 IE9 立即切换到`IE9`模式，但它没有解决问题。

我设法省略了 jQuery，并用这个简单的代码片段重现了这个问题：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
</head>

<body>
    <script type="text/javascript">
        document.write('<h1>testing</h1>');
        try {
            document.write('<h1>' + navigator.userAgent + '</h1>');
            document.write('<h1>ok</h1>');
        } catch(e) {
            document.write('<h1>not ok</h1>');
        }
    </script>
</body>
</html> 
```

（可在[http://test.m.e17.dk/ie9-navigator/](http://test.m.e17.dk/ie9-navigator/)获得。）

通过以下方式复制它：

1.  打开页面。
2.  按 F5。
3.  将光标放在地址栏中。
4.  按回车。

根据需要重复步骤 2-4。问题是否可能是由于不等待 DOM 加载（如[http://bugs.jquery.com/ticket/12282](http://bugs.jquery.com/ticket/12282)中所述）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:54:49.183

我不知道 1.9，但我在 IE9 上与 1.8 有类似的回归（超过 1.7 的回归）。该错误在此处详细描述：

[http://bugs.jquery.com/ticket/12282](http://bugs.jquery.com/ticket/12282)

基本上，当在 IE9 中触发 document.ready 时，DOM 可能还没有准备好，因为您的 javascript 脚本可能在读取整个页面之前启动。

显然，实际上存在关于这是否是错误的争论。

无论如何，更新到 1.8.2 解决了我的问题。如果您遇到的错误确实与您遇到的错误相同，我希望您对 1.9 分支也有相同的修复。

另一种解决方案是在页面末尾尽可能简单地移动 document.ready 部分，在您需要从 html 中获取所有内容之后（当然在您的简化示例中它不会工作，因为您使用`<body>`，但希望在您的真正的代码，你不需要它）。

或者，如果您想弄脏自己的手并且它尚未在 1.9 中修复，那么这里是为 1.8 实施修复的地方：

[https://github.com/jquery/jquery/commit/0f553ed0ca0c50c5f66377e9f2c6314f822e8f25](https://github.com/jquery/jquery/commit/0f553ed0ca0c50c5f66377e9f2c6314f822e8f25)

正如你所看到的，它只是一行代码，所以也许你可以维护你自己的 1.9 版本的固定版本，直到有一个稳定的版本，或者你可以在你自己的 jquery 脚本中实现同样的保护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T15:16:58.373

我找到了这个错误的原因：它是 Active Directory 中的一个组策略设置导致 IE9 行为不端。我将尝试获取确切的名称并将其添加到此处以供遇到相同问题的任何人使用。

感谢大家帮忙。

有问题的政策在下面的附图中。

![在此处输入图像描述](../Images/6a607cacfbb39049d1e98c574fdc847e.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T12:49:25.340

只是一个建议，您是否尝试过从同一个内容交付网络下载两个脚本？并确保顺序正确（您的似乎正确），但这也可能是由于一个来源或另一个来源的延迟。旁注：尝试将您的脚本标签放在文档的底部，而不是标题，这是由于性能问题。

# ssrs-2008 - 将 reportviewer 渲染为 PDf 会影响显示

> ID：13378986
> 
> 赞同：0
> 
> 时间：2012-11-14T12:39:20.887
> 
> 标签：ssrs-2008, reportviewer, reporting-services, reportviewer2008

执行“serverreport.render”以打印 PDF 格式的报告后，交互式排序在网页上不起作用。

下面是我的代码。

```
private void Print()
{
    HttpContext cont = HttpContext.Current;
    HttpResponse myRes = cont.Response;
    System.Web.SessionState.HttpSessionState mySess = cont.Session;

    string enCoding = null;
    string strNull = null;
    string strPDF = "PDF";
    enCoding = Request.Headers["Accept-Encoding"];
    string mimeType = "application/pdf";
    string extension = ".pdf";
    string[] streamids = null;
    Warning[] warnings = null;

    byte[] mybytes = null;

    mybytes = ReportViewer1.ServerReport.Render(strPDF, strNull, out mimeType, 
            out enCoding, out extension, out streamids, out warnings);

    myRes.Buffer = true;
    myRes.Clear();
    myRes.ContentType = "application/pdf";
    myRes.AddHeader("Content-disposition", "filename=output.pdf");
    myRes.BinaryWrite(mybytes);
    myRes.Flush();
    myRes.End();

} 
```

显然，将报告呈现为 PDF 会使事情变得混乱。

欢迎所有建议。

谢谢

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:03:43.947

如果您需要在 Web 界面上提供交互式排序，则需要通过报告查看器或 HTML（但不是 MHTML）显示报告。

将报表呈现为报表查看器或 HTML 以外的任何内容后，交互式排序将不可用。

[比较不同报表呈现扩展的交互功能](http://msdn.microsoft.com/en-us/library/ms345232%28v=sql.100%29.aspx)

# ruby - Erlang vs Ruby 列表推导

> ID：13378987
> 
> 赞同：4
> 
> 时间：2012-11-14T12:39:21.750
> 
> 标签：ruby, erlang, list-comprehension

我刚开始学习 Erlang，非常喜欢他们的列表理解语法，例如：

```
Weather = [{toronto, rain}, {montreal, storms}, {london, fog}, {paris, sun}, {boston, fog}, {vancounver, snow}].                          
FoggyPlaces = [X || {X, fog} <- Weather]. 
```

在这种情况下，`FoggyPlaces`将评估为“伦敦”和“波士顿”。

在 Ruby 中执行此操作的最佳方法是什么？

例如，一个像这样的数组（我相信很常见）：

```
 weather = [{city: 'toronto', weather: :rain}, {city: 'montreal', weather: :storms}, {city: 'london', weather: :fog}, {city: 'paris', weather: :sun}, {city: 'boston', weather: :fog}, {city: 'vancounver', weather: :snow}] 
```

到目前为止，我得到的最好的是：

```
weather.collect {|w| w[:city] if w[:weather] == :fog }.compact 
```

但是在这种情况下，我必须调用`compact`来删除`nil`值，并且示例本身不像 Erlang 那样可读。

更重要的是，在 Erlang 的例子中，`city`和`weather`都是原子。我什至不知道如何在 Ruby 中获得有意义且看起来不错的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T13:19:31.480

首先，您的数据结构不等效。与您的 Erlang 示例等效的 Ruby 数据结构将更像

```
weather = [[:toronto, :rain], [:montreal, :storms], [:london, :fog], 
            [:paris, :sun], [:boston, :fog], [:vancouver, :snow]] 
```

其次，是的，Ruby 没有列表推导和模式匹配。所以，这个例子可能*会*更复杂。您的列表理解首先过滤所有有雾的城市，然后投影名称。让我们在 Ruby 中做同样的事情：

```
weather.select {|_, weather| weather == :fog }.map(&:first)
# => [:london, :boston] 
```

然而，Ruby 以对象为中心，但您使用的是抽象数据类型。使用更面向对象的数据抽象，代码可能看起来更像

```
weather.select(&:foggy?).map(&:city) 
```

这还不错，是吗？

# c++ - 为什么 stringstream >> 在失败时更改目标值？

> ID：13378989
> 
> 赞同：55
> 
> 时间：2012-11-14T12:39:33.163
> 
> 标签：c++, state, stringstream, cin

来自 Stroustrup 的 TC++PL，第 3 版，第 21.3.3 节：

> 如果我们尝试读入变量 v 并且操作失败，则 v 的值应该保持不变（如果 v 是 istream 或 ostream 成员函数处理的类型之一，则它不变）。

下面的例子似乎与上面的引用相矛盾。根据上面的引用，我期望 v 的值保持不变——但它会归零。这种明显矛盾的行为的解释是什么？

```
#include <iostream>
#include <sstream>

int main( )
{
    std::stringstream  ss;

    ss  << "The quick brown fox.";

    int  v = 123;

    std::cout << "Before: " << v << "\n";

    if( ss >> v )
    {
        std::cout << "Strange -- was successful at reading a word into an int!\n";
    }

    std::cout << "After: " << v << "\n";

    if( ss.rdstate() & std::stringstream::eofbit  ) std::cout << "state: eofbit\n";
    if( ss.rdstate() & std::stringstream::failbit ) std::cout << "state: failbit\n";
    if( ss.rdstate() & std::stringstream::badbit  ) std::cout << "state: badbit\n";

    return 1;
} 
```

我使用 x86_64-w64-mingw32-g++.exe (rubenvb-4.7.2-release) 4.7.2 得到的输出是：

```
Before: 123
After: 0
state: failbit 
```

谢谢。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-11-14T12:45:20.813

从[这个参考](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt)：

> 如果提取失败（例如，如果在需要数字的地方输入了字母），则值保持不变并设置失败位（**直到 C++11**）
> 
> 如果提取失败，则将零写入 value 并设置 failbit。如果提取导致值太大或太小而无法放入值，则写入 std::numeric_limits::max() 或 std::numeric_limits::min() 并设置故障位标志。（**自 C++11 起**）

您的编译器似乎在 C++11 模式下编译，这会改变行为。

* * *

输入运算符使用[`std::num_get`](http://en.cppreference.com/w/cpp/locale/num_get)其`get`函数调用的语言环境方面[`do_get`](http://en.cppreference.com/w/cpp/locale/num_get/get)。对于 C++11，它指定使用[`std::strtoll`](http://en.cppreference.com/w/cpp/string/byte/strtol)et。人。函数类型。在 C++11 之前，它显然使用[`std::scanf`](http://en.cppreference.com/w/cpp/io/c/fscanf)样式解析（通过参考，我无权访问 C++03 规范）来提取数字。行为的变化是由于解析输入的变化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T13:42:10.530

运算符 >> 是格式化的输入运算符。
因此，取决于如何从流中读取输入的语言环境：

## [istream.formatted.arithmetic]

> 与插入器的情况一样，这些提取器依赖于语言环境的 num_get<> (22.4.2.1) 对象来执行输入流数据的解析。这些提取器表现为格式化的输入函数（如 27.7.2.2.1 中所述）。构建哨兵对象后，转换就像由以下代码片段执行一样：

```
 typedef num_get< charT,istreambuf_iterator<charT,traits> > numget;
   iostate err = iostate::goodbit;
   use_facet< numget >(loc).get(*this, 0, *this, err, val);
   setstate(err); 
```

正如我们在上面看到的，该值实际上是由`numget`嵌入到流中的语言环境的方面设置的。

## num_get 虚函数 [facet.num.get.virtuals]

> ### 第三阶段：
> 
> 要存储的数值可以是以下之一：
> 
> *   零，如果转换函数无法转换整个字段。ios_base::failbit 分配给 err。
> *   最正的可表示值，如果该字段表示的值太大而无法用 val 表示。ios_base::failbit 分配给 err。
> *   如果字段表示的值太大而无法在 val 中表示，则为无符号整数类型的最大负可表示值或零。ios_base::failbit 分配给 err。

第 3 阶段的定义在 n2723 -> n2798 之间发生了巨大变化

[在哪里可以找到当前的 C 或 C++ 标准文档？](https://stackoverflow.com/questions/81656/where-do-i-find-the-current-c-or-c-standard-documents)

## num_get 虚函数 [facet.num.get.virtuals]

> 第 3 阶段：第 2 阶段处理的结果可以是以下之一：
> 
> *   在阶段 2 中累积了一系列字符，这些字符被转换（根据 scanf 的规则）为 val 类型的值。该值存储在 val 中，而 ios_base::goodbit 存储在 err 中。
> *   在阶段 2 中累积的字符序列会导致 scanf 报告输入失败。ios_base::failbit 分配给 err。

# javascript - 如何从层中删除子级而不删除与它们关联的事件 - KineticJS

> ID：13378990
> 
> 赞同：0
> 
> 时间：2012-11-14T12:39:37.210
> 
> 标签：javascript, html, events, kineticjs

这个问题与我之前在[这里](https://stackoverflow.com/questions/13324582/working-with-multiple-layers-kineticjs/13336373#13336373)问过的一个问题有关。我目前正在使用 KineticJS 4.0.5，并且正在使用多个图层来显示一些具有不同属性的形状。由于我需要经常更改图层内容，因此我使用 removeChildren 来删除图层内容，但似乎 removeChildren 也会删除与儿童相关的事件。我想在不删除其事件的情况下删除子图层，因为我可能必须再次将它们添加到图层中。

我试图将 layer.childrens 属性设置为一个空数组，而不是使用 removeChildren 函数。起初它似乎有效，但在某些情况下，会发生一些奇怪的事情：/ 一些形状消失了，让它们恢复的唯一方法是设置它们的 Z 索引。我认为这种方法的主要问题与从图层中删除内容时必须重置的某些属性有关，但我不知道它们是哪些。

我还尝试在绘制它们之前再次在每个形状上设置事件，但它不起作用......它们在屏幕上保持静态......我尝试在绘制它们之前对所有形状使用 setDraggable(true) 但没有运气...每次我想用以前使用的形状重绘图层时，是否需要再次创建对象并将事件再次应用到它们？还是在我的应用程序上为每个屏幕存储图层是一种好方法？（我可以有很多不同的屏幕，这会导致很多层，一次只能显示一个......）

如果您知道此问题的解决方案，请告诉我。我真的需要解决这个问题，因为我的项目能够绘制和重绘非常重要：/

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:55:50.497

在我看来，您需要的是一种从图层中直观地删除对象的方法，但实际上并不删除它们。尝试创建一个专门用于存储的新层，而不是使用删除，在该层中隐藏您的主要组。您将希望该组及其层成为全局变量以便于访问。然后，当您需要从视图中移除对象时，使用 moveTo 将其移动到存储中，然后再次使用 moveTo 将其恢复到视图中。

```
var gObj = {storage : '', storageGroup : ''};
gObj.storage = new Kinetic.Layer();
gObj.storageGroup = new Kinetic.Group({name:'storage', x:0, y:0});
gObj.storage.add(gObj.storageGroup);
// assumes stage is already built
stage.add(gObj.storage);
gObj.storageGroup.hide();
function wareHouse(obj, group, store) {
    // obj is an object to store when store === true, otherwise it's a name or id when retreiving, group is the group where object either is or needs to be, store is a boolean value
    if (store) {
        obj.moveTo(gObj.storageGroup);
    } else {
        // change the dot to pound ('.' = '#') if using id's
        var box = gObj.storageGroup.get('.' + obj)[0];
        box.moveTo(group);
    }
    var parent = group.getLayer();
    parent.draw();
} 
```

# ios - IOS如何在地图中设置位置

> ID：13378991
> 
> 赞同：0
> 
> 时间：2012-11-14T12:40:01.543
> 
> 标签：ios, objective-c, ios5, mapkit

我正在尝试为 iPhone 学习 MAP。

我现在拥有的是下面。

1.  创建了新项目
2.  为 MAP 添加了框架
3.  将地图对象带到故事板上（UIViewController）
4.  运行项目。

我看到的是，它没有显示任何位置。当我在 xcode 中更改位置时，它会显示位置处的点。

我想要的是，默认情况下，它应该向我显示我将使用纬度和经度设置的位置的 PIN。地图也应该缩放。我所说的缩放的意思是，我应该看到具有 13 缩放效果的位置。现在，我在屏幕上看到世界地图。

知道如何完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:51:07.987

您可以通过执行以下操作将地图围绕某个位置居中：

```
 MKCoordinateRegion mapRegion;
    mapRegion.center.latitude = aLatitude;
    mapRegion.center.longitude = aLongitude;
    mapRegion.span.latitudeDelta = 0.005;
    mapRegion.span.longitudeDelta = 0.005;
    self.mapView.region = mapRegion; 
```

使用跨度值来确定所需的缩放级别。

为了显示图钉，您需要使用您所在位置的坐标创建注释，然后将其添加到地图中。

另外，请查看本教程.. [http://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial](http://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:54:54.840

点显示您当前的位置。

如果要添加带有坐标的引脚，则应`addAnnotation`使用符合`MKAnnotation`协议的对象调用方法。这样的对象有一个属性`coordinate`（你应该将它添加到你的类中）：

```
@property (nonatomic, assign) CLLocationCoordinate2D coordinate; 
```

您还应该将`MKMapViewDelegate`协议添加到您的控制器并实现`-mapView:viewForAnnotation:`方法。它作为`-tableView:viewForRowAtIndexPath:`.

```
- (MKAnnotationView *)mapView:(MKMapView *)_mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]]) {
        return nil;
    }

    static NSString *annotationIdentifier = @"annotation";
    MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[_mapView dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier];   // Reusing

    if (!annotationView) {
        MKPinAnnotationView *pinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:annotationIdentifier];
        pinView.animatesDrop = YES;

        annotationView = pinView;
    }
    else {
        annotationView.annotation = annotation; // Reusing already created pin as UITableViewCell does
    }

    return annotationView;
} 
```

然后当你打电话

```
MKMapView *mapView = ...;
id<MKAnnotation> obj = ...;
[mapView addAnnotation:obj]; 
```

该图钉将被放置在地图上。

放大看[那里](http://troybrant.net/blog/2010/01/set-the-zoom-level-of-an-mkmapview/)。有一个方便的类别用于这些目的。

如果你想删除当前位置点，你应该找到一个带有 class `MKUserLocation`in的对象`mapView.annotations`，然后调用`[mapView removeAnnotation:userLocationDot]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:52:13.760

要使用 Map 创建应用程序，您需要实现`MKAnnotation`,`MKMapViewDelegate`委托。

这对你来说是一个很好的[教程](http://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial)。

# javascript - 是否可以触发事件然后将事件扩展到另一个元素？

> ID：13378999
> 
> 赞同：1
> 
> 时间：2012-11-14T12:40:45.733
> 
> 标签：javascript, jquery, html, css

假设我有一个结构很差的下拉菜单，类似于：

```
<div class="regular"><a href="#">title</a></div>
<div class="menu">
    <a href="#">title</a>
    <div class="menu_wrapper">
        <a href="#">sub title</a>
        <a href="#">sub title</a>
    </div>
</div> 
```

在这种情况下，它的构建`.menu_wrapper`具有以下属性：`position:absolute;`当顶层`.menu`悬停在上面时，`.menu_wrapper`不被视为同一元素的一部分，因此当试图将其悬停在它上面时会导致中断，因为它不再是一部分相同的悬停事件。

我想知道是否可以打开事件绑定器，`.menu`但是一旦触发事件，将绑定器扩展为`.menu_wrapper`显式，以便“悬停效果”稳定且有效。

这似乎是一个比尝试重新排列我拥有的大量结构不佳的 CSS 更简单的解决方案。

任何想法，意见，一般的帮助将不胜感激；）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:45:57.847

你有没有尝试过这样的事情？(jQuery)

```
$(".menu").hover(
  function () {
    $(".menu_wrapper").show();
  },
  function () {
    $(".menu_wrapper").hide();
  }
); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T12:58:20.060

**我设法通过同时使用 mouseover/mouseout 事件来解决这个问题。**

这绝对不是处理这个问题的最有效方法，但它是一个不错的解决方法：

```
 $('div.menu').mouseover(function() {
       $(this).find('div.menu_wrapper').show();
   });

   $('div.menu_wrapper').mouseout(function() {
       $(this).hide();'
   }); 
```