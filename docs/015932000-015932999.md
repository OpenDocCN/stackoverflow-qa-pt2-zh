# StackOverflow 问答 15932000-15932999

# c#-4.0 - ActionMailer.Net 在不同区域找不到视图

> ID：15932001
> 
> 赞同：1
> 
> 时间：2013-04-10T16:57:54.290
> 
> 标签：c#-4.0, asp.net-mvc-4, actionmailer.net

我正在使用 ActionMailer.net 从我的 mvc 4 应用程序发送电子邮件。

当我的启动控制器和 actionmailer 控制器和视图位于同一区域时，此方法有效。但是当它们不在时失败，因为它找不到视图。

这种层次结构有效：

```
Area: Emails
   Controller:ManageOrders
   Controller:SendEmails
   View: OrderAck.html.cshtml 
```

但这不会：

```
Area: OrderMgmt
   Controller:ManageOrders

Area: Emails  
   Controller:SendEmails
   View: OrderAck.html.cshtml 
```

由于我想集中我的代码而不是重复它，我将需要从我的应用程序中的多个区域发送相同的订单确认电子邮件。

将路径作为视图名称的一部分放在 Email() 方法参数中不起作用：

```
return Email("~/OrderMgmt/OrderAck", orderAck); 
```

我还能如何实现这一目标？

更新：这是代码：

用户提交表单发起的发起控制器：Areas\Mobile\Controllers\MakePartForWorkReleaseController.cs

```
[HttpPost]
    public ActionResult PullList(ContainerPullListViewModel ContainerPullListViewModel)
    {
        if (ModelState.IsValid)
        {
            var emailResult = manageOrdersController.SendOrderCompleteEmail(ContainerPullListViewModel.OrderId, baseUrl, ControllerContext);             
        }
    } 
```

这是上述调用的标准发送电子邮件控制器操作，它位于不同的区域：Areas\OrderMgmt\Controllers\ManageOrdersController.cs

```
public JsonResult SendOrderCompleteEmail(int id, string baseUrl, ControllerContext controllerContext)
{
   string recipients = "";
   OrderAcknowledgementViewModel orderAck = new OrderAcknowledgementViewModel();

   //Call ActionMailer action controller to send email
   new OrderMgmtEmailController().OrderComplete(notifyList, orderAck).Deliver();
} 
```

这是实际发送电子邮件的 actionmailer.net 控制器操作：Areas\OrderMgmt\Controllers\OrderMgmtEmailController.cs

请注意，当我检查时： HttpContextBase.Request.RequestContext.RouteData.DataTokens["area"] 它返回“Mobile”，这是启动控制器的区域，而不是当前控制器区域。我相信这是电子邮件方法正在寻找基于[此的视图的地方](https://bitbucket.org/swaj/actionmailer.net/issue/42/problem-with-areas-still-persists-the)

```
public EmailResult OrderComplete(IEnumerable<CustomerContact> recipientList, OrderAcknowledgementViewModel orderAck)
{
   return Email("~/Areas/OrderMgmt/Views/OrderMgmtEmail/OrderComplete", orderAck);
} 
```

视图位于：Areas\OrderMgmt\Views\OrderMgmtEmail\OrderComplete.html.cshtml

我得到的错误是：

```
You must provide a view for this email.  Views should be named ~/Areas/OrderMgmt/Views/OrderMgmtEmail/OrderComplete.txt.cshtml or ~/Areas/OrderMgmt/Views/OrderMgmtEmail/OrderComplete.html.cshtml (or aspx for WebFormsViewEngine) depending on the format you wish to render.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:14:59.500

我在 ActionMailer.net 上玩了一会儿，它似乎需要一个严格的结构。

我假设您的控制器看起来像这样 public EmailResult OrderComplete(OrderAcknowledgementViewModel orderAck) { To.Add(); 从 = ; 主题 = ; return Email("OrderComplete", orderAck); }

因此，如果这就是您的控制器的样子，那么这就是您需要做的。

在 Areas//Views/ 中创建一个文件夹，然后将 OrderComplete.html.cshtml 视图放入该新文件夹中。

# android - 如何让我的应用出现在 Google Now 的电话搜索列表中？

> ID：15932002
> 
> 赞同：7
> 
> 时间：2013-04-10T16:57:55.637
> 
> 标签：android, google-now

我希望我的应用程序能够处理来自 Google Now 的搜索请求并出现在其电话搜索列表中，但我找不到任何关于此的文档。有没有人可以提供一个链接？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T17:05:12.200

您可以通过设置将您的应用程序添加到 Google Now 中的电话搜索

```
android:includeInGlobalSearch="true" 
```

[根据可搜索配置参考页](http://developer.android.com/guide/topics/search/searchable-config.html)在您的`searchable.xml`配置文件中。Google Now 与以前的 Android 版本共享相同的手机搜索选项，通常称为[快速搜索框](http://android-developers.blogspot.com/2009/09/introducing-quick-search-box-for.html)。您可能还想参考[快速搜索框培训的搜索建议](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html#QSB)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-25T06:39:22.960

我也在寻找如何做到这一点。

事实证明，将您的应用程序添加到全局搜索不再适用于 KitKat，并在此提交中被删除：[https ://android.googlesource.com/platform/packages/apps/QuickSearchBox/+/ecf356c15143ab0583c64682de16d94a57f7dd1c](https://android.googlesource.com/platform/packages/apps/QuickSearchBox/+/ecf356c15143ab0583c64682de16d94a57f7dd1c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T12:32:48.950

您的 searchable.xml 需要包含一些重要的属性才能起作用。简单地添加包含全局是行不通的。示例应用程序有一个完整的可运行的 searchable.xml：

我发现搜索必须显示在“电话搜索”列表中的是：

```
android:searchSuggestAuthority 
```

和

```
android:includeInGlobalSearch="true" 
```

# ruby-on-rails-3 - I18n.locale 不继承自 application.rb 中定义的 I18n.default_locale

> ID：15932003
> 
> 赞同：1
> 
> 时间：2013-04-10T16:57:57.780
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, i18n-gem, rails-i18n

我创建了一个新的 rails 3.2.12 应用程序，在 application.rb 中我用来配置默认语言环境，如下所示 `config.i18n.default_locale = "pt-PT"`

我在这个地方拥有所有语言环境 yml，并且在运行服务器后，翻译不起作用。当我在 default_locale 属性之后立即调试它并打印 config.i18n.locale 的值时它为零，而且它不应该......它应该返回'pt-PT'

关于这里发生的事情有什么建议吗？

# d3.js - 如何将字典（嵌套对象）转换为树形图的 d3 可用数组

> ID：15932004
> 
> 赞同：1
> 
> 时间：2013-04-10T16:58:01.247
> 
> 标签：d3.js, treemap

我正在[d3 中制作树形图](http://mbostock.github.io/d3/talk/20111018/treemap.html)，它需要数据作为一系列嵌套对象，如下所示：

```
{
    name: "flare",
    children: [
        {
            name: "analytics",
            children: [
                {
                    name: "cluster",
                    children: [
                        {
                            name: "AgglomerativeCluster",
                            size: 3938
                        },
                        {
                            name: "CommunityStructure",
                            size: 3812
                        }
                    ]
                }
            ]
        }
    ]
} 
```

在幕后收集这些数据的自然方法是作为字典（在 Python 术语中），如下所示：

```
{
    "flare": {
         "analytics": {
              "cluster": [
                   {
                       name: "AgglomerativeCluster",
                       size: 3938
                   },
 //etc etc 
```

在不手动编写嵌套循环的情况下从后者到前者的最自然方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:23:43.827

**编辑：**我刚刚意识到我的答案以错误的方式进行操作（从第一个版本到第二个版本）。但是，您可以将相同的原理用于其他方式。

您可能还想看看[d3.nest()](https://github.com/mbostock/d3/wiki/Arrays#-nest)，如下所述：[D3 JSON 数据转换](https://stackoverflow.com/questions/15912966/d3-json-data-conversion/15914716#15914716)

* * *

我会创建一个递归函数来实现这个目标。我不得不使用 jQuery 将子数组的每个元素映射到其更新版本：

```
function reduce(dataset){ 
    if('children' in dataset) {
        var tmp = {}
        tmp[dataset.name] = $.map(dataset.children, function(d){return reduce(d)})
        return tmp
    } else {
        return dataset
    }
} 
```

当应用于您的示例数据集时，这给出了：

```
{
    "flare": [{
        "analytics": [{
            "cluster": [{
                "name": "AgglomerativeCluster",
                "size": 3938
            }, {
                "name": "CommunityStructure",
                "size": 3812
            }]
        }]
    }]
} 
```

jsFiddle：http: [//jsfiddle.net/chrisJamesC/kKDm3/](http://jsfiddle.net/chrisJamesC/kKDm3/)

# c++ - 内存使用并行编程

> ID：15932007
> 
> 赞同：0
> 
> 时间：2013-04-10T16:58:04.003
> 
> 标签：c++, memory, parallel-processing

我对并行计算知之甚少，但我想就一项任务提出“进一步工作”的建议，并想确保我是对的。我用 C++ 编写了一个光线追踪器。我将光线的信息（例如命中点）存储在其中， `vector`并在模拟结束时将这些向量写入 CSV（这是好的编程吗？）如果我跟踪多条光线，比如 1000 条，则与跟踪 100 条相比，模拟需要更多时间射线 10 次。我认为这是因为我的大小`vector's`更大，因此它们在堆内存中占用了大量空间（？）。每条光线都可以在没有来自其他光线的信息的情况下被追踪（该程序正在乞求并行）。我是否正确地说，如果程序是并行的，每个处理器都将拥有自己的内存，因此不会有一个大向量占用一大块内存，而是散布在周围的小向量可以更有效地处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:27:43.577

您对每个处理器都有自己的“内存”的假设听起来像是试图提高 CPU 缓存使用率（无论您的任务有多并行，RAM 都保持不变 - 除非您将它分布在集群上）。虽然通常并行化提供了更多的 CPU 缓存，但由于线程将在内核之间迁移（Windows 实际上这样做），因此可能会有更多的缓存未命中。

也许您只是以低效的方式使用 std::vector 。例如，您在开头插入项目或逐个附加项目（这些操作可能需要 O( `vector.size()`)）。或者当光线数量增加时，可能存在其他数据结构变慢。这可能无需在多个处理器之间拆分任务即可解决。

尽管程序肯定会从并行化中受益。

# c# - C# 将 Form 方法放入用户控件 C#

> ID：15932012
> 
> 赞同：0
> 
> 时间：2013-04-10T16:58:29.267
> 
> 标签：c#, visual-studio-2008, user-controls, streamreader, streamwriter

我正在为我的第一年考试做准备，我知道的一个问题是“使用文本框和按钮创建一个用户控件，并在表单上创建一个列表框”好的。现在必须发生的是 listBox 列出目录中的文件。并且用户控件中的文本框读取该文件（.txt）的内容并允许用户编辑文本框，并且单击时的保存按钮必须覆盖原始文件。现在我使用 StreamReader 读取了整个文本框。但我无法获取用户控件中的按钮以从 ListBox 获取目录路径。

我必须使用 StreamWriter 覆盖它，不能使用 FileDialog。它必须从 ListBox 中获取文件名，然后将其加载到 StreamWriter dir 路径中，该路径需要位于 UserControl 中的 btnSave 中。

`userControl1.Text`我尝试使用我创建的属性对 userControl 属性进行反之亦然。然后尝试像表单中的 userControl 一样调用它，`Form1.ItemsName`但没有用，所以我把它刮掉了。现在我有完整的编码器块。

我难住了。我已经尝试了所有方法来获取 userControl 中的 btnSave 以便能够从表单中获取数据`listBox.SelectedItem.Text`

表单组成：listBox和UserControl

userControl 包括：textBox 和 Button(btnSave)。

表格1代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        // Reads the content from the file, 
        //listing other files in dir.

        StreamReader sr = new StreamReader(@"C:\C# Resources\Numbers.txt");
        string line = sr.ReadLine();

        try
        {
            // Adds content from Numbers.txt into the ListBox
            while (line != null)
            {
                this.listBox1.Items.Add(line);

                line = sr.ReadLine();
            }
            sr.Close();
        }
        catch (Exception Exc)
        {
            MessageBox.Show(Exc.Message.ToString());
        }
        finally
        {
            sr.Close();
        }
    }

    private void listBox1_Click(object sender, EventArgs e)
    {
        // Reads the name of the file in the list box, looking for the file in the dir.
        StreamReader file = new StreamReader(@"C:\C# Resources\" + listBox1.SelectedItem.ToString() + ".txt");
        string all = file.ReadToEnd();

        //Loads the ListBox_click file's content into the userControl textBox
        userControl11.Text = all.ToString();
    }
} 
```

用户控制代码：

```
 // Creates method so the it can be loaded into form
    public string Text
    {
        set
        {
            textBox2.Text = value;
        }
        get
        {
            return textBox2.Text;
        }
    }

    //Has to overwrite/Save the content changed by the user in TextBox to the same 
    //directory/file it came from.

    private void btnSave_Click(object sender, EventArgs e)
    {
        StreamWriter sw = new StreamWriter(@"C:\C# Resources\" + /*Method to get the file path from the Form1 ListBox*/ + ".txt");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:01:46.657

由于这是一项任务/项目工作，我只会为您指明正确的方向。

*   向用户控件添加属性，例如`public string FileToWrite {get; set;}`
*   然后访问`FileToWrite`which 将是写入的路径。

```
private void btnSave_Click(object sender, EventArgs e)
{
    StreamWriter sw = new StreamWriter(FileToWrite);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:08:26.227

您不能（或不应该）使用用户控件调用表单代码。您需要另一种机制，要么表单应始终让控件知道所选项目，要么用户控件应请求信息。

这两个都可以使用事件来完成

# c - 在 C 程序中打印链表

> ID：15932024
> 
> 赞同：1
> 
> 时间：2013-04-10T16:59:21.703
> 
> 标签：c, pointers, linked-list, printf

我看过其他一些关于如何打印链接列表的帖子，但没有一个对我有帮助，所以我决定发布我自己的代码。这是问题所在：

我可以完美地添加一个名字和年龄，但是第二个我添加另一个名字和年龄它会覆盖前一个。

所以如果我输入：

Matt 和 21，然后是 charles 和 34。它只会输出 charles 和 34。如何让它输出所有内容？预先感谢您的帮助！:)

这是我的代码：

```
#include<stdlib.h>
#include<stdio.h>
#include<malloc.h>
#include<conio.h>
#include<string.h>
#include<ctype.h>
#define pause system ("pause")

// prototype variables
struct node * initnode(char*, int);
void printnode(struct node*);

struct node{
    char name[20];
    int age;
    struct node *next;
};

struct node *head = (struct node*) NULL;
struct node *end = (struct node*) NULL;

struct node* initnode(char *name, int age){
    struct node *ptr;
    ptr = (struct node*) calloc(3, sizeof(struct node));
    if(ptr == NULL) 
        return (struct node*) NULL;
    else {
        strcpy(ptr->name, name);
        ptr->age = age;
        return ptr;
    }
}

void printnode(struct node *ptr) {
    printf("Name -> %s\n", ptr->name);
    printf("Age -> %d\n", ptr->age);
}

main() {
    char name[20];
    int age, choice = 1;
    struct node *ptr;
    while(choice != 3){
        system("cls");
        printf("1\. Add a name\n");
        printf("2\. List nodes\n");
        printf("3\. Exit");
        printf("\nEnter Menu Selection: ");
        scanf("%d", &choice);
        switch(choice) {
        case 1: printf("\nEnter a name: ");
            scanf("%s", name);
            printf("Enter age: ");
            scanf("%d", &age);
            ptr = initnode(name, age);
            break;
        case 2: if(ptr == NULL) {
                printf("Name %s not found\n", name);
            } else 
                printnode(ptr);
            pause;
            break;
        case 3: exit(3);
        default: printf("Invalid Entry");
        }// end of switch

    }// end of main

} 
```

哦，我知道某些“#include”可能没用。我整天都在添加和删除代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:02:10.430

只是一句话：

```
ptr = (struct node*) calloc(3, sizeof(struct node)); 
```

是错误的，因为你正在分配`3 * sizeof(struct node)`，它应该是

```
ptr = (struct node*) calloc(1, sizeof(struct node)); 
```

您的代码缺少很多东西。您没有将创建的节点链接到任何链接列表。在你没有使用的整个代码中`next`。您必须在此代码上做更多工作。

问题不仅来自链表的打印。问题来自如何创建链表

我可以向您推荐一个可以帮助开发此类程序的链表模板。该模板包含处理链表的函数和宏

*   在头部添加到链表
*   在尾部添加到链表
*   从链表中删除...

您可以从此[链接获取链接列表模板（list.h）](http://isis.poly.edu/kulesh/stuff/src/klist/list.h)

以下[链接](http://isis.poly.edu/kulesh/stuff/src/klist/)包含如何使用它的示例

请参考以上链接中的这一段

> 通过很少的修改（删除列表项的硬件预取），我们也可以在我们的应用程序中使用这个列表。此文件的可用版本可在此处下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:13:59.183

虽然您已经定义了`head`和`end`指针，这将构成一个链表，但您实际上并没有使用它们来存储您的新信息。在创建新节点并将其存储在`ptr`变量中之后，您实际上并没有将其存储在列表中。

我建议添加另一个方法 ，它将这个新创建的节点添加到由和指针`addnode`定义的链表中。`head``end`

```
void addnode(struct node *ptr) {
    if (end == NULL) {
        head = ptr;
        end = ptr;
    }
    else {
        end = end->next = ptr;
    }
} 
```

从广义上讲，我们检查列表中是否已有任何项目；如果不是，则列表的开头和结尾都将由同一个节点表示：列表中唯一的一个！否则，我们让当前结束之后的节点成为要添加的节点，然后将我们的全局`end`指针移动到现在的最后一个节点。

这允许我们维护一个由多个节点组成的链（列表中的条目）。然后，在打印整个列表时，我们必须遵循整个链，从第一个节点 ( `head`) 到最后一个节点。我们可以通过一个简单的循环来做到这一点：不是简单地调用我们在 中维护`printnode()`的临时`ptr`变量`main()`，而是编写：

```
struct node *current = head;
while (current != end) {
    printnode(current);
    current = current->next;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:13:22.870

这一行在这里：

```
ptr = initnode(name, age); 
```

这就是为什么您总是覆盖名称/年龄的原因，因为您声明了一个名为的本地节点`ptr`，并且每次添加一个值时，您都会用下一个节点覆盖该节点。

看到`struct node *next;`节点结构中的那个元素了吗？您需要将其指向创建的下一个节点以便拥有超过 1 个节点，类似于：

```
ptr->next = initnode(name, age); 
```

链表有第一个节点的特殊情况，你的第一个节点`ptr`是空的，所以当你的链表长度为0时，你需要设置`ptr`from `init_node()`，下次需要设置`ptr`的`next`元素，然后你需要更新 ptr 使其成为当前节点：

```
ptr = ptr->next; 
```

当然，这样做会导致您“松开”列表的开头。这就是你的`head`用武之地。当你开始时，如果你初始化`head`为`ptr`，那么永远不要动头，你将永远记得你的列表的开始在哪里。

您还有一个变量：

```
struct node *end = (struct node*) NULL; 
```

您必须在每次添加时不断更新它，以便始终指向添加的最后一个元素……如果您关心的话。通常，如果您要创建一个双链表，则使用`end`or `last`or指针。`tail`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T17:49:56.150

> 我可以完美地添加一个名字和年龄，但是第二个我添加另一个名字和年龄它会覆盖前一个。

您的代码不会覆盖前一个节点，而是用一个新节点替换它并泄漏您之前拥有的节点。（泄漏是您分配的一块内存，然后丢失了任何指向它的指针，因此您永远无法释放它。）这是创建新节点的行：

```
ptr = initnode(name, age); 
```

如果`ptr`是指向列表中第一个节点的指针，则应该将新节点添加到列表的末尾，而不是将其分配给`ptr`.

# character - Lazarus TextOut 打印小方块而不是字符

> ID：15932027
> 
> 赞同：0
> 
> 时间：2013-04-10T16:59:42.853
> 
> 标签：character, ascii, lazarus, textout

我在学校的 Lazarus 编程。我为国际象棋桌编写了一个程序，但打印这两个字符♂和♀时遇到问题。我试过这段代码

```
var s : string;
...
s := 'VKS' + SysToUTF8(#11#12) + 'SKVPPPPPPPPPPPPPPPPVKSKKSKV'; 
```

但它不起作用，它只打印小方块而不是每个字符。我正在使用 Win XP SP3。有小费吗？

# java - 如何只激活最后两次点击？

> ID：15932031
> 
> 赞同：1
> 
> 时间：2013-04-10T16:59:50.837
> 
> 标签：java, android

我需要另一种方法来解决我的问题。因此，每当我单击一个按钮（我有 16 个）时，它都会保持“活动”状态并等到 buttonClicked.getTag().equals(button.getTag())) 声明为真。这对我来说太糟糕了。因此，我单击第一个按钮，然后单击第 2、第 3、第 4、第 5 个按钮，假设第 5 个按钮与第一次单击的按钮具有相同的标签，现在第 1 个和第 5 个按钮已配对并禁用。如何只计算最后两个单击的按钮？因此，在我的示例中，我需要第 5 个单击按钮与第 4 个按钮进行比较，而不是与第一个按钮进行比较。但是第一个一直保持活跃。

```
final OnClickListener clickListener = new OnClickListener() {

            private Button buttonClicked;

            public void onClick(View v) {
                Button button = (Button) v;
                button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));

                if (buttonClicked == null) {
                    // first button is clicked
                    buttonClicked = button;
             } else if (buttonClicked.getParent() != button.getParent()) {
                    // second button is clicked
                    if (buttonClicked.getTag().equals(button.getTag())) {
                        Toast.makeText(Spojnice.this, "Correct", Toast.LENGTH_SHORT).show();
                        button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.setEnabled(false);
                        button.setEnabled(false);
                    } else {
                        Toast.makeText(Spojnice.this, "Wrong", Toast.LENGTH_SHORT).show();

                    }
                 buttonClicked = null;
                }       
            }

     }; 
```

因此，在下面的屏幕显示中，我先按 Aquarius，然后按 Pisces，然后按 Crux，然后按 Aquila，最后按 Vodolija。所以它一直记得我的第一次点击，然后一旦满足它们不是来自同一个父级（不在同一个线性布局中）的条件，它就会比较它们。这是我的问题。我只需要比较最后两次点击，在本例中是 Aquila 和 Vodolija。这将导致错误的答案，因为他们不是一对，但现在无关紧要。因此，当我单击右侧布局中的第一个按钮（本例中为 Vodlija）时，我需要将其与左侧布局中单击的最后一个按钮进行比较，而不是第一个按钮，以及本例中的 Aquila。怎么做？

![在此处输入图像描述](https://i.stack.imgur.com/qlRns.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:21:22.783

带格式

```
package rs.androidaplikacije.toplo_hladno;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.LinkedList;
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.graphics.Color;
import android.graphics.LightingColorFilter;
import android.graphics.Typeface;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.os.Handler;
import android.preference.PreferenceManager;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class Spojnice extends Activity implements View.OnClickListener{

       Button previousButton = null;
       //private Button buttonClicked;

        //private static final Integer[] idArrayA = {R.id.bA1, R.id.bA2, R.id.bA3, R.id.bA4, R.id.bA5, R.id.bA6, R.id.bA7, R.id.bA8};
        //private static final Integer[] idArrayB = {R.id.bB1, R.id.bB2, R.id.bB3, R.id.bB4, R.id.bB5, R.id.bB6, R.id.bB7, R.id.bB8};

        private int brojacIgara = 0;
        private int counter = 0;

        MyCount brojacVremena = new MyCount(450000, 1000);

        // labelForButton and tagForButton
           class MyStruct {
           public MyStruct (String lab, String t){
            label = lab;
            tag = t;
        }
           private String label;
           private String tag;
           }

           final OnClickListener clickListener = new OnClickListener() {

                private Button buttonClicked;

                public void onClick(View v) {
                    Button button = (Button) v;
                    button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));

                    if (buttonClicked == null) {
                        // first button is clicked
                        debug.setText("\n tag " + button.getTag() + " " + button.getParent());
                        buttonClicked = button;
                        // only do stuff if buttons are in different layouts
                    } else{
                            debug.setText("\n tag " + button.getTag() + " " + button.getParent());
                if (!button.getParent ().equals(buttonClicked.getParent())) {
                     // second button is clicked
                 if(buttonClicked.getTag().equals(button.getTag()) ){

                    // second button is clicked and same tag but different button

                    Toast.makeText(Spojnice.this, "Correct", Toast.LENGTH_SHORT).show();
                    button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                    buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                    buttonClicked.setEnabled(false);
                    button.setEnabled(false);
                    buttonClicked = null;
                    } else {
                    //reset LightingColorFilter first
                    Toast.makeText(Spojnice.this, "Wrong", Toast.LENGTH_SHORT).show();
                    buttonClicked = null;//i guess you want to make it back to initial state so null and current button

                    }
                   }else{
                       //same button clicked show message or un toggle?
                       buttonClicked = button;
                   }
                }
                    }       
                };

    /*final OnClickListener clickListener2 = new OnClickListener() {
        Button a = null;
        public void onClick(View v) {

            onButtonClicked(Button b) {
                if (a != null && a.getTag().equals(b.getTag()) {
                    System.out.println("Hurray, a match");
                } else {
                    a = b;
                }
            }

        }

    };*/

    LinkedList<Long> mAnsweredQuestions = new LinkedList<Long>();

    private String generateWhereClause(){
        StringBuilder result = new StringBuilder();
        for (Long l : mAnsweredQuestions){
            result.append(" AND _ID <> " + l);
        }
        return result.toString();
    }
    private TextView pitanje, score, vreme, debug, debug2;

    Button a1,a2,a3,a4,a5,a6,a7,a8,b1,b2,b3,b4,b5,b6,b7,b8,izlaz;
    MediaPlayer buttonBack;
    public boolean music;

    Runnable mLaunchTask = new Runnable() {
        public void run() {
            nextQuestion();
            brojacVremena.start();
        }
     };
    Runnable mLaunchTaskFinish = new Runnable() {
         public void run() {
            finish();
         }
      };
    Handler mHandler = new Handler();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);   //full screen
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.spojnice);

        Typeface pitanjeType = Typeface.createFromAsset(getAssets(), "myriad.ttf");
        Typeface dugmad = Typeface.createFromAsset(getAssets(), "Bebas.ttf");
        Typeface AB = Typeface.createFromAsset(getAssets(), "ARIALN.TTF");
        buttonBack = MediaPlayer.create(this, R.raw.button31);
        a1 = (Button) findViewById(R.id.bSpojniceA1);
        a2 = (Button) findViewById(R.id.bSpojniceA2);
        a3 = (Button) findViewById(R.id.bSpojniceA3);
        a4 = (Button) findViewById(R.id.bSpojniceA4);
        a5 = (Button) findViewById(R.id.bSpojniceA5);
        a6 = (Button) findViewById(R.id.bSpojniceA6);
        a7 = (Button) findViewById(R.id.bSpojniceA7);
        a8 = (Button) findViewById(R.id.bSpojniceA8);
        b1 = (Button) findViewById(R.id.bSpojniceB1);
        b2 = (Button) findViewById(R.id.bSpojniceB2);
        b3 = (Button) findViewById(R.id.bSpojniceB3);
        b4 = (Button) findViewById(R.id.bSpojniceB4);
        b5 = (Button) findViewById(R.id.bSpojniceB5);
        b6 = (Button) findViewById(R.id.bSpojniceB6);
        b7 = (Button) findViewById(R.id.bSpojniceB7);
        b8 = (Button) findViewById(R.id.bSpojniceB8);
        //izlaz = (Button) findViewById(R.id.bIzlazSpojnice);
        //izlaz.setTypeface(dugmad);
        //score = (TextView) findViewById(R.id.tvPoeniSpojnice);
        //score.setTypeface(dugmad);
        //vreme = (TextView) findViewById(R.id.tvVremeSpojnice);
        //vreme.setTypeface(dugmad);
        pitanje = (TextView) findViewById(R.id.tvPitanjeSpojnice);
        pitanje.setTypeface(pitanjeType);
        b1.setTypeface(AB);
        b2.setTypeface(AB);
        b3.setTypeface(AB);
        b4.setTypeface(AB);
        b5.setTypeface(AB);
        b6.setTypeface(AB);
        b7.setTypeface(AB);
        b8.setTypeface(AB);
        a1.setTypeface(AB);
        a2.setTypeface(AB);
        a3.setTypeface(AB);
        a4.setTypeface(AB);
        a5.setTypeface(AB);
        a6.setTypeface(AB);
        a7.setTypeface(AB);
        a8.setTypeface(AB);
        debug = (TextView) findViewById(R.id.tvDebug);
        debug2 = (TextView) findViewById(R.id.tvDebug2);

        SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        music = getPrefs.getBoolean("checkbox", true);

        nextQuestion();
        brojacVremena.start();  //startuje brojac vremena

        }

        public class MyCount extends CountDownTimer {

            public MyCount(long millisInFuture, long countDownInterval) {
                super(millisInFuture, countDownInterval);
            }

            @Override
            public void onFinish() {
                mHandler.postDelayed(mLaunchTask,500);

            }

            @Override
            public void onTick(long millisUntilFinished) {
                //vreme.setText("" + millisUntilFinished / 1000);

            }

        }

    public void nextQuestion() {

        brojacIgara = brojacIgara + 1;

        TestAdapter mDbHelper = new TestAdapter(this);
        DataBaseHelper myDbHelper = new DataBaseHelper(this);

        if(!myDbHelper.checkDataBase()){
        mDbHelper.createDatabase();
        }

        try{    //Pokusava da otvori db

            mDbHelper.open();  //baza otvorena

            Cursor c = mDbHelper.getSpojnice(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            ArrayList<MyStruct> labelsA = new ArrayList<MyStruct>();
            ArrayList<MyStruct> labelsB = new ArrayList<MyStruct>();

            labelsA.add(new MyStruct(c.getString(2), "1")); // this tag should be the same to button that matches
            labelsB.add(new MyStruct(c.getString(3), "1"));
            labelsA.add(new MyStruct(c.getString(4), "2"));
            labelsB.add(new MyStruct(c.getString(5), "2"));
            labelsA.add(new MyStruct(c.getString(6), "3"));
            labelsB.add(new MyStruct(c.getString(7), "3"));
            labelsA.add(new MyStruct(c.getString(8), "4"));
            labelsB.add(new MyStruct(c.getString(9), "4"));
            labelsA.add(new MyStruct(c.getString(10), "5"));
            labelsB.add(new MyStruct(c.getString(11), "5"));
            labelsA.add(new MyStruct(c.getString(12), "6"));
            labelsB.add(new MyStruct(c.getString(13), "6"));
            labelsA.add(new MyStruct(c.getString(14), "7"));
            labelsB.add(new MyStruct(c.getString(15), "7"));
            labelsA.add(new MyStruct(c.getString(16), "8"));
            labelsB.add(new MyStruct(c.getString(17), "8"));

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            if (brojacIgara < 4){

            pitanje.setText(c.getString(1));

            a1.setText(labelsA.get(0).label);
            a1.setTag(labelsA.get(0).tag);
            a1.setOnClickListener(clickListener);
            a1.getBackground().clearColorFilter();
            a1.setEnabled(true);
            b1.setText(labelsB.get(0).label);
            b1.setTag(labelsB.get(0).tag);
            b1.setOnClickListener(clickListener);
            b1.getBackground().clearColorFilter();
            b1.setEnabled(true);
            a2.setText(labelsA.get(1).label);
            a2.setTag(labelsA.get(1).tag);
            a2.setOnClickListener(clickListener);
            a2.getBackground().clearColorFilter();
            a2.setEnabled(true);
            b2.setText(labelsB.get(1).label);
            b2.setTag(labelsB.get(1).tag);
            b2.setOnClickListener(clickListener);
            b2.getBackground().clearColorFilter();
            b2.setEnabled(true);
            a3.setText(labelsA.get(2).label);
            a3.setTag(labelsA.get(2).tag);
            a3.setOnClickListener(clickListener);
            a3.getBackground().clearColorFilter();
            a3.setEnabled(true);
            b3.setText(labelsB.get(2).label);
            b3.setTag(labelsB.get(2).tag);
            b3.setOnClickListener(clickListener);
            b3.getBackground().clearColorFilter();
            b3.setEnabled(true);
            a4.setText(labelsA.get(3).label);
            a4.setTag(labelsA.get(3).tag);
            a4.setOnClickListener(clickListener);
            a4.getBackground().clearColorFilter();
            a4.setEnabled(true);
            b4.setText(labelsB.get(3).label);
            b4.setTag(labelsB.get(3).tag);
            b4.setOnClickListener(clickListener);
            b4.getBackground().clearColorFilter();
            b4.setEnabled(true);
            a5.setText(labelsA.get(4).label);
            a5.setTag(labelsA.get(4).tag);
            a5.setOnClickListener(clickListener);
            a5.getBackground().clearColorFilter();
            a5.setEnabled(true);
            b5.setText(labelsB.get(4).label);
            b5.setTag(labelsB.get(4).tag);
            b5.setOnClickListener(clickListener);
            b5.getBackground().clearColorFilter();
            b5.setEnabled(true);
            a6.setText(labelsA.get(5).label);
            a6.setTag(labelsA.get(5).tag);
            a6.setOnClickListener(clickListener);
            a6.getBackground().clearColorFilter();
            a6.setEnabled(true);
            b6.setText(labelsB.get(5).label);
            b6.setTag(labelsB.get(5).tag);
            b6.setOnClickListener(clickListener);
            b6.getBackground().clearColorFilter();
            b6.setEnabled(true);
            a7.setText(labelsA.get(6).label);
            a7.setTag(labelsA.get(6).tag);
            a7.setOnClickListener(clickListener);
            a7.getBackground().clearColorFilter();
            a7.setEnabled(true);
            b7.setText(labelsB.get(6).label);
            b7.setTag(labelsB.get(6).tag);
            b7.setOnClickListener(clickListener);
            b7.getBackground().clearColorFilter();
            b7.setEnabled(true);
            a8.setText(labelsA.get(7).label);
            a8.setTag(labelsA.get(7).tag);
            a8.setOnClickListener(clickListener);
            a8.getBackground().clearColorFilter();
            a8.setEnabled(true);
            b8.setText(labelsB.get(7).label);
            b8.setTag(labelsB.get(7).tag);
            b8.setOnClickListener(clickListener);
            b8.getBackground().clearColorFilter();
            b8.setEnabled(true);
            }else{
                brojacVremena.cancel();

                mHandler.postDelayed(mLaunchTaskFinish,4000);
                //SwarmLeaderboard.submitScore(7427, counter);
            }

        }

        finally{    // kada zavrsi sa koriscenjem baze podataka, zatvara db
            mDbHelper.close();
        }
        /*izlaz.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                if(music == true){
                    buttonBack.start();
                        }
                finish();   
            }
        });*/
    }
    public void onClick(View v) {

    }
    @Override
    protected void onStop() {
        super.onStop();
        brojacVremena.cancel();
    }

}
**strong text** 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:52:20.430

您只需要记住之前单击的一个按钮。现在，如果单击另一个按钮，将其标记值与前一个按钮的标记值进行比较。如果它们相同——宾果游戏。如果没有，请将上一个按钮设置为当前按钮并继续。

在伪 java 代码中：

```
Button a = null;

onButtonClicked(Button b) {
    if (a != null && a.getTag().equals(b.getTag()) {
        System.out.println("Hurray, a match");
    } else {
        a = b;
    }
} 
```

# java - 从 XSD 生成类

> ID：15932032
> 
> 赞同：0
> 
> 时间：2013-04-10T16:59:54.963
> 
> 标签：java, xml, xsd

我有这样的简单xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xmi:XMI xmi:version="2.1" xmlns:xmi="http://schema.omg.org/spec/XMI/2.1" xmlns:mdmi="http://schema.omg.org/spec/MDMI/1.0">
      <xmi:Documentation 
xmi:exporter="Firestar MDMI Tool" xmi:exporterVersion="1.0">
      </xmi:Documentation>
    </xmi:XMI> 
```

我创建了 xsd：

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema"
           targetNamespace="http://schema.omg.org/spec/XMI/2.1">
    <xs:element name="XMI">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Documentation">
                    <xs:complexType>
                        <xs:simpleContent>
                            <xs:extension base="xs:string">
                                <xs:attribute type="xs:string" name="exporter"/>
                                <xs:attribute type="xs:string" name="xmi:exporterVersion"/>
                            </xs:extension>
                        </xs:simpleContent>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
            <xs:attribute type="xs:float" name="version"/>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

然后生成使用 JAXB 的 java 类。并使用解组。

几乎一切正常，但`exporterVersion`没有从 xml 中提取字段。

我尝试使用导入命名空间。但是如果设置`attributeFormDefault="qualified"`属性导出器没有被拉起，什么也不会发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:24:06.453

您不应该`xmi:`在名称中使用限定符 for `exporterVersion`。该名称空间在 XML 文档中定义，但未在模式中定义。

更重要的是，据我所知，您根本不需要 XSD。您似乎正在尝试直接使用 XMI 映射规范的模式并构建符合该模式的 XML 文档。如果是这种情况，则不需要您自己的模式。

无论如何，您的 XML 文档不会以任何方式引用您自己的模式，因此它根本不会影响处理该 XML 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:06:05.240

在您的架构更改中（注意`xmi:`前缀作为名称的一部分）

```
 <xs:attribute type="xs:string" name="xmi:exporterVersion"/> 
```

至

```
<xs:attribute type="xs:string" name="exporterVersion"/> 
```

# sql - SQL - 指定字段可能与多个表相关

> ID：15932033
> 
> 赞同：0
> 
> 时间：2013-04-10T16:59:55.863
> 
> 标签：sql

我是 SQL 的初学者，并且一直在玩它。有两张桌子。一呼`Customers`一呼`Orders`。我正在计算有多少订单与客户 ID 相关，但它不断抛出错误。我有以下代码：

```
SELECT CustomerID, COUNT (orders.OrderID) AS TotalOrders
FROM Customers AS cust, Orders AS orders
WHERE cust.CustomerID = orders.CustomerID 
```

它会引发一个错误，即该`CustomerID`字段可能出现在多个表中。

例如，如果我将其更改`SELECT CustomerID`为`ContactName`，则查询将正常工作。但是，我知道问题在于该`CustomerID`字段同时在表`Customers`和`Orders`表中。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:01:36.017

试试这个

```
SELECT cust.CustomerID, COUNT (orders.OrderID) AS TotalOrders
FROM Customers AS cust
JOIN Orders AS orders ON cust.CustomerID = orders.CustomerID
GROUP BY cust.CustomerID 
```

此查询使用ANSI 标准的*显式* `JOIN`语法。这是最佳实践。您唯一缺少的是`GROUP BY`对聚合进行分组。您还需要确保将表名添加到列的前缀以防止歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:02:41.467

您必须使用表名或别名来限定字段名称...建议使用别名。此外，建议您切换到 ANSI-92 Join 语法。

```
 SELECT c.CustomerID, COUNT (o.OrderID) AS TotalOrders
  FROM Customers c Join Orders o 
     On c.CustomerID = o.CustomerID
  GROUP BY c.CustomerID 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T17:02:10.393

应该：

```
SELECT cust.CustomerID, COUNT (orders.OrderID) AS TotalOrders
FROM Customers AS cust, Orders AS orders
WHERE cust.CustomerID = orders.CustomerID 
```

# wordpress - WordPress的重写规则说明

> ID：15932034
> 
> 赞同：6
> 
> 时间：2013-04-10T17:00:02.603
> 
> 标签：wordpress, .htaccess

我在我的 WordPress 网站的 .htaccess 中找到了这些重写规则：

```
RewriteEngine On
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

我知道这基本上是指一切 index.php。但它是如何工作的？什么规则做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T17:28:07.543

我在这里找到了一些参考：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

`RewriteEngine On`启用重写模块。

`RewriteRule ^index\.php$ - [L]`确保 if`index.php`被调用，没有其他规则被执行。这`-`是为了确保不会发生重写，并且`[L]`标志指示不应执行其他规则。

`RewriteCond %{REQUEST_FILENAME} !-f`将条件添加到以下重写规则。此条件表示请求的文件名*不是*( `!`) 现有文件。

`RewriteCond %{REQUEST_FILENAME} !-d`是相同的，但对于现有目录。

`RewriteRule . /index.php [L]`表示*所有内容*( `.`) 都应重写为`/index.php`，并且这是执行 ( `[L]`) 的最后一条规则。

# tomcat - web.xml 安全约束没有从 https 返回到 http

> ID：15932037
> 
> 赞同：0
> 
> 时间：2013-04-10T17:00:05.337
> 
> 标签：tomcat, ssl, https

我按照此链接中所述的过程将[HTTPS 仅用于基于 servlet 的 webapp 中的某些页面](https://stackoverflow.com/questions/1330187/use-https-only-for-certain-pages-in-tomcat-webapp)。我的网页通常在 http 上，但是当我单击登录页面时，它转到 https。这一切都很好。但是当我成功登录并且页面返回到常规主页时，例如 https 仍然存在。它不会回到http。请帮忙。

添加了 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        id="WebApp_ID" version="2.5">
        <display-name>Welcome</display-name>
        <servlet>
                <servlet-name>dispatcher</servlet-name>
                <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
                <load-on-startup>1</load-on-startup>
        </servlet>
        <servlet-mapping>
                <servlet-name>dispatcher</servlet-name>
                <url-pattern>*.htm</url-pattern>
        </servlet-mapping>

        <servlet-mapping>
                <servlet-name>jsp</servlet-name>
                <url-pattern>*.jsp</url-pattern>
        </servlet-mapping>

        <security-constraint>
                <web-resource-collection>
                        <web-resource-name>https</web-resource-name>
                        <url-pattern>/signin.htm</url-pattern>
                        <url-pattern>/login.htm</url-pattern>
                        <url-pattern>/shownewuser.htm</url-pattern>
                </web-resource-collection>
                <user-data-constraint>
                        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
                </user-data-constraint>
        </security-constraint>

        <security-constraint>
                <web-resource-collection>
                        <web-resource-name>http</web-resource-name>
                        <url-pattern>*.htm</url-pattern>
                </web-resource-collection>
                <user-data-constraint>
                        <transport-guarantee>NONE</transport-guarantee>
                </user-data-constraint>
        </security-constraint>
    <listener>
            <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
                    /WEB-INF/dispatcher-servlet.xml,
                    /WEB-INF/spring-security.xml
            </param-value>
    </context-param>

    <!-- Spring Security -->
    <filter>
            <filter-name>springSecurityFilterChain</filter-name>
            <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
            <filter-name>springSecurityFilterChain</filter-name>
            <url-pattern>/*</url-pattern>
    </filter-mapping>

    <welcome-file-list>
            <welcome-file>index.jsp</welcome-file>
    </welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:30:42.097

我通过使用 Spring Security 解决了这个问题。对于那些想在这里尝试的人是我所做的。

从 web.xml 中完全删除安全约束。在 Spring Security 配置中包括以下内容

```
<http auto-config="true">
    <intercept-url pattern="/signin.htm" access="ROLE_USER" requires-channel="https"/>
    <intercept-url pattern="/login.htm"  requires-channel="https"/>
    <intercept-url pattern="/home.htm"  requires-channel="http"/>

    <session-management session-fixation-protection="none">
    </session-management>
    <remember-me />
        <port-mappings>
              <port-mapping http="8080" https="8443"/>
            </port-mappings>
</http> 
```

一旦我设置了这个，我就可以使用 https 仅用于登录，一旦登录完成，它会自动返回 http

# php - 从一个 SQL 语句中获取一列中的所有行

> ID：15932040
> 
> 赞同：1
> 
> 时间：2013-04-10T17:00:17.153
> 
> 标签：php, mysql, arrays, pdo, transpose

我正在寻找一种方法，通过 SQL 或 PHP，从 SQL 语句返回许多列，但能够一次遍历它们一列。

我有一个查询，例如：

```
ID | N1 | N2
1  | 15 | 20
2  | 25 | 30
3  | 35 | 40 
```

我知道我可以通过 a`foreach $result as $row`并`$row['T1']`在循环中使用，但我正在寻找一种方法将 ALL`$row['T1']`放入数组中，而不必遍历它们。我无法找到如何做到这一点。

我需要一个数组（或一组数组），它将被组织为：

```
myArray = array( 'N1' => array('15', '25', '35'),
                 'N2' => array('20', '30', '40')
          ); 
```

这样我就可以使用标准数组函数（如`array_sum()`和）访问它们`array_slice()`。

有没有办法使用 MySQL、PHP(PDO) 以简单和编程方式为大量字段执行此操作？

My SQL 使用复杂的连接来获取许多字段，这些字段需要平均并打印到文本文件中。他们希望将字段组合在一起，而不是将所有字段都放在标准表中。

```
N1:
   15
   25
   35
N2:
   20
   30
   40 
```

因此需要正确设置阵列。

所以：我可以使用哪种方法来做到这一点？我知道我可以遍历整个`$result`并将其推`$row['index']`入我自己的几个数组中，但肯定有更好的方法来做到这一点吗？对于复杂的连接，单独对每个字段进行单独查询会更快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:25:40.513

我想出了什么。除了二维数组之外，不允许任何东西，但我确信另一个`for`语句或其他东西可以解决这个问题。这让我可以保留我的钥匙。

```
// Trasposes, while keeping the keys, a 2-dimensional array.
function transpose($array) {
  $tArray = array();
  foreach ($array as $iKey => $i) {
    foreach ($i as $jKey => $j) {
      $tArray[$jKey][$iKey] = $j;
    }
  }
  return $tArray;
} 
```

结果：

```
$myArr:
Array
(
    [0] => Array
        (
            [N1] => 15
            [N2] => 20
        )

    [1] => Array
        (
            [N1] => 25
            [N2] => 30
        )

    [2] => Array
        (
            [N1] => 35
            [N2] => 40
        )

    [3] => Array
        (
            [N1] => 45
            [N2] => 50
        )

)

transpose($myArr)
Array
(
    [N1] => Array
        (
            [0] => 15
            [1] => 25
            [2] => 35
            [3] => 45
        )

    [N2] => Array
        (
            [0] => 20
            [1] => 30
            [2] => 40
            [3] => 50
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:01:51.930

```
SELECT n1 FROM yourtable
UNION ALL
SELECT n2 FROM yourtable 
```

随着您添加更多列，这自然会变得非常低效。即使您只发出一个“查询”调用，数据库内部仍然必须分别执行联合中的每个成员查询。

* * *

用伪代码重新阅读你的东西，也许这会更符合你的要求：

```
select N1, N2
from yourtable

$data = array()
while($row = fetch($result)) {
   foreach($row as $col => $val) {
      $data[$col][] = $val;
   }
} 
```

# iphone - 如何在iOS上捕获的视频中添加水印

> ID：15932041
> 
> 赞同：24
> 
> 时间：2013-04-10T17:00:19.280
> 
> 标签：iphone, ios, objective-c, ipad, avasset

我想知道是否有人可以告诉我如何实现这一目标。如果一直在考虑几个解决方案：

1.  从捕获的视频中创建单个图像，然后将它们合并到每个图像中，然后创建一个新的 AVAsset ......听起来有点复杂，你不觉得吗？

2.  合并2个视频，一个是透明的（一个带有水印的），另一个是用相机拍摄的资产。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-25T14:15:57.370

此代码在视频上添加文本或字符串，保存视频后，您将在任何播放器上播放。此代码的最大优点是提供带声音的视频。所有东西都在一个代码中（即文本和图像）。

```
#import <AVFoundation/AVFoundation.h>

-(void)MixVideoWithText
{
    AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:url options:nil];
    AVMutableComposition* mixComposition = [AVMutableComposition composition];

    AVMutableCompositionTrack *compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    AVAssetTrack *clipVideoTrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    AVMutableCompositionTrack *compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    AVAssetTrack *clipAudioTrack = [[videoAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    //If you need audio as well add the Asset Track for audio here

    [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) ofTrack:clipVideoTrack atTime:kCMTimeZero error:nil];
    [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) ofTrack:clipAudioTrack atTime:kCMTimeZero error:nil];

    [compositionVideoTrack setPreferredTransform:[[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] preferredTransform]];

    CGSize sizeOfVideo=[videoAsset naturalSize];

    //TextLayer defines the text they want to add in Video
    //Text of watermark 
    CATextLayer *textOfvideo=[[CATextLayer alloc] init];
    textOfvideo.string=[NSString stringWithFormat:@"%@",text];//text is shows the text that you want add in video.
    [textOfvideo setFont:(__bridge CFTypeRef)([UIFont fontWithName:[NSString stringWithFormat:@"%@",fontUsed] size:13])];//fontUsed is the name of font
    [textOfvideo setFrame:CGRectMake(0, 0, sizeOfVideo.width, sizeOfVideo.height/6)];
    [textOfvideo setAlignmentMode:kCAAlignmentCenter];
    [textOfvideo setForegroundColor:[selectedColour CGColor]];

    //Image of watermark 
    UIImage *myImage=[UIImage imageNamed:@"one.png"];
    CALayer layerCa = [CALayer layer];
    layerCa.contents = (id)myImage.CGImage;
    layerCa.frame = CGRectMake(0, 0, sizeOfVideo.width, sizeOfVideo.height); 
    layerCa.opacity = 1.0; 

    CALayer *optionalLayer=[CALayer layer];
    [optionalL addSublayer:textOfvideo];
    optionalL.frame=CGRectMake(0, 0, sizeOfVideo.width, sizeOfVideo.height);
    [optionalL setMasksToBounds:YES];

    CALayer *parentLayer=[CALayer layer];
    CALayer *videoLayer=[CALayer layer];
    parentLayer.frame=CGRectMake(0, 0, sizeOfVideo.width, sizeOfVideo.height);
    videoLayer.frame=CGRectMake(0, 0, sizeOfVideo.width, sizeOfVideo.height);
    [parentLayer addSublayer:videoLayer];
    [parentLayer addSublayer:optionalLayer];
    [parentLayer addSublayer:layerCa];

    AVMutableVideoComposition *videoComposition=[AVMutableVideoComposition videoComposition] ;
    videoComposition.frameDuration=CMTimeMake(1, 30);
    videoComposition.renderSize=sizeOfVideo;
    videoComposition.animationTool=[AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer inLayer:parentLayer];

    AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [mixComposition duration]);
    AVAssetTrack *videoTrack = [[mixComposition tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    AVMutableVideoCompositionLayerInstruction* layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoTrack];
    instruction.layerInstructions = [NSArray arrayWithObject:layerInstruction];
    videoComposition.instructions = [NSArray arrayWithObject: instruction];

    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy-MM-dd_HH-mm-ss"];
    NSString *destinationPath = [documentsDirectory stringByAppendingFormat:@"/utput_%@.mov", [dateFormatter stringFromDate:[NSDate date]]];

    AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetMediumQuality];
    exportSession.videoComposition=videoComposition;

    exportSession.outputURL = [NSURL fileURLWithPath:destinationPath];
    exportSession.outputFileType = AVFileTypeQuickTimeMovie;
    [exportSession exportAsynchronouslyWithCompletionHandler:^{
    switch (exportSession.status)
    {
        case AVAssetExportSessionStatusCompleted:
            NSLog(@"Export OK");
            if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(destinationPath)) {
                UISaveVideoAtPathToSavedPhotosAlbum(destinationPath, self, @selector(video:didFinishSavingWithError:contextInfo:), nil);
            }
            break;
        case AVAssetExportSessionStatusFailed:
            NSLog (@"AVAssetExportSessionStatusFailed: %@", exportSession.error);
            break;
        case AVAssetExportSessionStatusCancelled:
            NSLog(@"Export Cancelled");
            break;
    }
  }];
} 
```

显示保存视频后会出现的错误。

```
-(void) video: (NSString *) videoPath didFinishSavingWithError: (NSError *) error contextInfo: (void *) contextInfo 
{
    if(error)
        NSLog(@"Finished saving video with error: %@", error); 
} 
```

# java - 将纪元转换为日期

> ID：15932049
> 
> 赞同：0
> 
> 时间：2013-04-10T17:00:57.607
> 
> 标签：java, datetime, calendar, epoch

我想以纪元或毫秒为单位获取今天的日期，但时间部分设置为今天开始，即 24:00（午夜）

例如

目前时间是**10-APR-2013 17:56:44.455**在

```
mili-seconds is 1365613004461
epoch = 1365613004 
```

有人可以告诉我如何获得 10-APR-2013 24:00:00 的纪元吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:11:59.270

您可以像这样将时间设置为 0:00:00：

```
Calendar cal = Calendar.getInstance();
System.out.println(new SimpleDateFormat("dd-MM-yy HH:mm:ss.S").format(cal.getTime()));

cal.set(Calendar.HOUR_OF_DAY, 0);
cal.set(Calendar.MINUTE, 0);
cal.set(Calendar.SECOND, 0);
cal.set(Calendar.MILLISECOND, 0);

System.out.println(new SimpleDateFormat("dd-MM-yy HH:mm:ss.S").format(cal.getTime())); 
```

第一个值打印为`10-04-13 18:10:40.832`和第二个`10-04-13 00:00:00.0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-22T14:40:55.900

# *java.time*

JSR-310 实现，也称为`java.time`现代日期时间 API，为我们提供了两种获取方式：

1.  [`LocalDate#atStartOfDay`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#atStartOfDay--)：将日期与午夜时间相结合，`LocalDateTime`在该日期的开始处创建一个。
2.  [`LocalDate#atStartOfDay(ZoneId zone)`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#atStartOfDay-java.time.ZoneId-)[`ZonedDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html)：根据时区规则，从该日期返回最早有效时间的 a 。

**演示：**

```
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.time.Month;
import java.time.ZoneId;
import java.time.ZonedDateTime;

public class Main {
    public static void main(String[] args) {
        LocalDateTime ldt1 = LocalDate.of(2016, Month.MARCH, 27).atStartOfDay();
        LocalDateTime ldt2 = LocalDate.of(2016, Month.MARCH, 28).atStartOfDay();
        ZonedDateTime zdt1 = LocalDate.of(2016, Month.MARCH, 27).atStartOfDay(ZoneId.of("Europe/London"));
        ZonedDateTime zdt2 = LocalDate.of(2016, Month.MARCH, 28).atStartOfDay(ZoneId.of("Europe/London"));
        System.out.println(ldt1);
        System.out.println(ldt2);
        System.out.println(zdt1);
        System.out.println(zdt2);
    }
} 
```

**输出：**

```
2016-03-27T00:00
2016-03-28T00:00
2016-03-27T00:00Z[Europe/London]
2016-03-28T00:00+01:00[Europe/London] 
```

[![在此处输入图像描述](https://i.stack.imgur.com/ZdxqK.png)](https://i.stack.imgur.com/ZdxqK.png) ^(资料来源：[timeanddate.com](https://www.timeanddate.com/time/change/uk/london?year=2016))

从**[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解更多关于`java.time`现代[日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^*的信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

# listview - Kendo UI Mobile - 停止滚动

> ID：15932052
> 
> 赞同：0
> 
> 时间：2013-04-10T17:01:25.953
> 
> 标签：listview, kendo-ui

反正有没有停止滚动？例如，我想让用户在触摸按钮时返回到特定位置。到目前为止，我的方法是：

```
// scroll to the top
e.view.scroller.reset();

// scroll to the destination offset
e.view.scroller.scrollTo(0, targetOffset); 
```

问题是，如果滚动条之前在滚动，它会在 targetOffset 之后继续滚动，直到它的速度为 0。

有人可以帮助我首先停止滚动条的速度吗？

我正在使用 JQuery 1.9.1 和 2013 年第一季度发布的 Kendo Mobile

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:15:23.113

虽然没有从他们的文档中公开，但我通过在此处将 velocity 属性设置为 0 来解决它：

```
e.view.scroller.yinertia.velocity = 0; 
```

# spring - 将 Spring Beans 绑定到 Grails 中的服务？

> ID：15932057
> 
> 赞同：2
> 
> 时间：2013-04-10T17:01:39.673
> 
> 标签：spring, grails

如何将我在 Spring DSL 中声明的列表绑定到我的服务参数？

我有以下 bean 声明

```
beans = {
   defaultSkillList = [
       { Skill s  -> 
             name="Shooting"    
             description = "Shooting things..."},
   { Skill s ->
             name="Athletics"
             description = "Running, jumping, dodging ..."}
     ]
} 
```

我有以下服务声明：

```
class GameService {

    def defaultSkillList

    def createGame(Game gameInstance) {
       //...
    }
} 
```

我目前`NullReferenceException`在尝试访问`defaultSkillList`.

我应该如何访问这个 bean？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:18:25.417

您不能在 bean DSL 中声明这样的列表，您需要类似

```
beans = {
  defaultSkillList(ArrayList, [....])
} 
```

但是 DSL 不会让您定义匿名内部 bean 的列表（好吧，它会接受语法`defaultSkillList(ArrayList, [{Skill s -> ...}, ... ]`，但它会给您一个闭包列表，而不是将闭包视为 bean 定义）。您需要先用名称声明各个 bean，然后再声明`ref`它们，例如

```
beans = {
  'skill-1'(Skill) {
    name="Shooting"    
    description = "Shooting things..."
  }
  'skill-2'(Skill) {
    name="Athletics"
    description = "Running, jumping, dodging ..."
  }

  defaultSkillList(ArrayList, [ref('skill-1'), ref('skill-2')])
} 
```

或者干脆放弃 DSL 并改用 XML `grails-app/conf/spring/resources.xml`：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util.xsd">

  <util:list id="defaultSkillList">
    <bean class="com.example.Skill" p:name="Shooting" p:description="..." />
    <bean class="com.example.Skill" p:name="Athletics" p:description="..." />
  </util:list>
</beans> 
```

# mysql - 查询正在锁定表，无法终止该进程

> ID：15932058
> 
> 赞同：9
> 
> 时间：2013-04-10T17:01:43.650
> 
> 标签：mysql, deadlock, database-deadlocks, kill-process

我在 MySQL 中有一个查询锁定表（使用 InnoDB）：

```
UPDATE table SET status = 2 WHERE status = 3 
```

此查询导致表死锁，无法绕过。

我试着做：

```
show processlist 
```

然后杀死进程ID，但我似乎无法杀死它

我试过了：

```
kill 9588 
```

9588 是进程 ID。

然后我`show processlist`仍然在列表中看到相同的查询。

如何强制终止此进程，然后为什么此查询会导致死锁？我该如何解决？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-10-30T17:24:11.413

当您在 RDS 上运行 MySQL 实例并出于某种原因想要终止线程或查询时，您会发现您无法使用`KILL`或`mysqladmin kill`因为您没有这样做的权限。

RDS 提供了命名的存储过程`mysql.rds_kill`，`mysql.rds_kill_query`它们将分别杀死一个线程和一个查询。要杀死一个线程，首先使用`SHOW PROCESSLIST`获取线程列表并找到要杀死的线程的id。假设线程 id 是 53512，那么使用

```
CALL mysql.rds_kill(53512) 
```

资料来源： [http ://snak.tumblr.com/post/13856391340/killing-a-thread-or-query-of-mysql-running-on-rds](http://snak.tumblr.com/post/13856391340/killing-a-thread-or-query-of-mysql-running-on-rds)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T17:07:05.527

该`KILL`命令请求查询终止，并且该命令的状态应显示为`Killed`。没有办法强制杀死某些东西并立即终止它。

作为最后的手段，您始终可以关闭并重新启动`mysqld`服务器进程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-04T08:40:53.920

您需要运行以下命令来终止该进程。

```
> show processlist;  
> kill query processId; 
```

查询参数指定我们需要杀死查询命令进程。

kill 进程的语法如下

> 杀死 [连接 | QUERY] processlist_id

请[参阅](https://dev.mysql.com/doc/refman/8.0/en/kill.html)此链接以获取更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T17:15:23.970

您应该先尝试杀死`mysql/sql service`计算机上的程序，然后再通过托盘杀死您正在运行的程序，然后再进行白色查询。

希望它对你有用

# xml-serialization - 通用 XML 的反序列化

> ID：15932066
> 
> 赞同：0
> 
> 时间：2013-04-10T17:02:02.440
> 
> 标签：xml-serialization, c++-cli

首先是一个警告，我在反序列化方面是一个完整的 n00b。也就是说，我在消息队列中从另一个系统接收了一些 XML。我无法控制 XML。

XML 封装了消息，它包含一个标头和一个有效负载。标头包含消息类型，所以我需要先解析出标头，然后再解析出消息内容，我希望使用相同的 XmlReader 来执行此操作。（我不知道 XmlReader 流是否记住了它的位置，或者 Reader 是否关闭了流并且我需要重新打开它，但这应该是可以实现的，是吗？）

我遇到的第一个问题是如何告诉 Header Class 我想要的元素名称在里面。创建消息类是有问题的，因为在反序列化标头之前我不会知道它是什么类型的消息。看看这个 XML：

```
<SCHED_MSG>
    <HEADER>
      <SOURCE_IDENT_TEXT>MES.PRIM_SCHED</SOURCE_IDENT_TEXT>
      <GEN_EST>2011-12-21T14:01:48.876-05:00</GEN_EST>
      <ISL_MSG_IDENT_TEXT>REL_SCHED_PID_MHS</ISL_MSG_IDENT_TEXT>
    </HEADER>
</SCHED_MSG> 
```

如果我标记 XmlRootElement ElementName = "HEADER"，则会出现异常，因为这不是 XML 的根。（有没有办法告诉它根是“SCHED_MSG.HEADER”？）如果我使用 SCHED_MSG 作为标题，我似乎无法到达元素 GEN_EST。（同样，有什么方法可以告诉 dot Net XmlElementAttribute(ElementName = "HEADER.GEN_EST")？）

注意：我已经从中删除了消息，但它会在标签之后和之前。我从队列接收消息为 char *，用于初始化为 System::String，然后使用该字符串创建 StringReader，并将 StringReader 提供给 XmlReader.Create()。反过来，XmlReader 使用此类的类型传递给 XmlSerializer 构造函数：

```
[Serializable]
//[XmlRootAttribute(ElementName = "SCHED_MHS_MSG")]
[XmlRootAttribute(ElementName = "SCHED_MHS_MSG.DOFASCO_HEADER")]
public ref class DofascoHeader
{
public:
    [XmlElementAttribute(ElementName = "GEN_EST")]
    System::DateTime GenerationTime;

    //[XmlElementAttribute(ElementName = "ISL_MSG_IDENT_TEXT")]
    //String ^MessageName;
}; 
```

有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:01:52.740

好吧，如果其他人试图这样做，这里至少有一个可行的选择。

```
XmlReader ^ messageData = XmlReader::Create(mqTestStream);
try
{
    while (messageData->Read())
    {
        if (
            (messageData->NodeType == XmlNodeType::Element)
            &&
            (messageData->Name == "HEADER")
            )
        {

            System::Xml::Serialization::XmlSerializer ^HeadParser = gcnew System::Xml::Serialization::XmlSerializer(Header::typeid);

            Header ^MyHead;
            MyHead = dynamic_cast<Header^>(HeadParser->Deserialize(messageData));
            break;
        }
    }
}
catch(XmlException ^e)
{
    Console::WriteLine(e->Message);
} 
```

# google-app-engine - webapp2用户商店，你如何查询它

> ID：15932079
> 
> 赞同：0
> 
> 时间：2013-04-10T17:03:09.507
> 
> 标签：google-app-engine, python-2.7, webapp2

我正在使用 webapp2 用户商店，我需要查询用户帐户。那家店在哪里？

webapp2_extras.auth

就像是

```
myusers = Users.query().filter(Users.somefield == somevalue).fetch() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:56:35.107

```
from webapp2_extras.appengine.auth.models import User
myusers = User.query().fetch() 
```

将获取所有用户。

# php - 如何分别计算数组的元素

> ID：15932081
> 
> 赞同：0
> 
> 时间：2013-04-10T17:03:16.337
> 
> 标签：php, arrays

我有两个数组“由 SQL 查询产生”

第一个数组是

```
Array ( [0] => 100 ) Array ( [0] => 200) 
```

第二个数组是

```
Array ( [0] => 300 ) Array ( [0] => 400) 
```

如何分别计算每个数组的第一个元素（`100`+ `300`）和第二个数组的第二个元素（`200`+ `400`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:07:59.553

```
$sum = array(); 
for ($i=0;$i<count(array1);$i++) {
$sum[$i] = array1[$i] + array2[$i]; 
} 
print_r($sum); 
```

=====更新======

```
<?php
$a = array(2, 4, 6, 8);
echo "sum(a) = " . array_sum($a) . "\n";
$b = array("a" => 1.2, "b" => 2.3, "c" => 3.4);
echo "sum(b) = " . array_sum($b) . "\n";
?> 
```

# javabeans - 获取所有 CDI bean

> ID：15932084
> 
> 赞同：0
> 
> 时间：2013-04-10T17:03:24.117
> 
> 标签：javabeans, jndi, cdi, lookup, resolver

我想从容器中检索所有 CDI bean 作为映射，其中 bean 名称作为键，bean 作为值。我怎么能做到这一点？

我需要这个来将 CDI bean 添加到 thymeleaf 表达式解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:40:41.613

为事件编写一个可移植的扩展程序和 this `ProcessAnnotatedType`。然后让它查找具有`@Named`注释的类型并将其添加到您的类或其他类的静态映射中。

# shell - 特定目录中的 zip 文件和文件夹

> ID：15932086
> 
> 赞同：0
> 
> 时间：2013-04-10T17:03:26.390
> 
> 标签：shell

如何使用 shell 脚本压缩特定目录中的文件和文件夹？我有一个`abc`目录，其中有一些`.xml`等`.cfx`文件，还有一些文件夹资产、资源等。现在我想`abc`用名称压缩文件夹下的文件`abc.zip`

我不希望 zip 与`abc`目录 ie `abc.zip`-> `abc`-> 和那些文件一起发生；我想要`abc.zip`->那些文件。

# bash - 匹配负数范围 -20 到 19

> ID：15932087
> 
> 赞同：0
> 
> 时间：2013-04-10T17:03:26.733
> 
> 标签：bash

我很好奇如何匹配负数，特别是 -20 到 19。我对 bash 还很陌生，以前从未尝试过负数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:13:46.497

使用算术（似乎更好的方法）：

```
NUM="-20"

if [[ $NUM -gt -21 && $NUM -lt 20 ]];
then
    echo "OK"
else
    echo "FAIL"
fi 
```

否则，如果您真的想使用正则表达式：

```
NUM="20"

if [[ $NUM =~ ^(-(20|1[0-9]|[1-9])|1?[0-9])$ ]];
then
    echo "OK"
else
    echo "FAIL"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:07:05.790

试试这个正则表达式：

```
(-(20|1[0-9]|[1-9])|1?[0-9]) 
```

# jsf-2 - primefaces 组件，例如 stackoverflow 的标签输入

> ID：15932089
> 
> 赞同：-2
> 
> 时间：2013-04-10T17:03:31.497
> 
> 标签：jsf-2, autocomplete, primefaces, components

几天我在primefaces的展示中搜索了一个组件，例如该站点的标签输入（stackoverflow；））

但是当我现在搜索时我找不到它

你知道组件吗

如果是这样，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:30:42.367

[具有多个输入的自动完成是创建标签的输入](http://www.primefaces.org/showcase/ui/input/autoComplete.xhtml)。尝试在高级选项中输入“梅西”。

# html - IE7菜单悬停时页面混乱

> ID：15932092
> 
> 赞同：1
> 
> 时间：2013-04-10T17:03:41.633
> 
> 标签：html, css, internet-explorer-7, skeleton-css-boilerplate

我正在处理的网站存在一些问题。出于某种原因，只有在 IE7 中，当您将鼠标悬停在顶部的主菜单上时，页面会完全混乱。在页面初始加载时，您已经可以看到菜单本身的位置错误，向左 15 像素。当您将鼠标悬停在菜单上时，菜单本身会回到正确的位置，页面的其余部分会完全混乱。

页面：[http ://www.ptwee.nl/referenties/](http://www.ptwee.nl/referenties/)

该站点是使用 Skeleton Wordpress 主题构建的，该主题使用 superfish 作为主导航。

我还使用[https://code.google.com/p/css3-mediaqueries-js/](https://code.google.com/p/css3-mediaqueries-js/)在旧 IE 浏览器中呈现响应式 CSS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:22:11.610

如果您在 .referenties 上添加相对位置，它应该可以解决您的问题。

# google-bigquery - 当我使用 join each 时，查询执行期间资源超出

> ID：15932099
> 
> 赞同：0
> 
> 时间：2013-04-10T17:04:17.810
> 
> 标签：google-bigquery

我尝试在 Bigquery 上运行连接查询，但我得到了“表太大而无法连接”的错误，这是我理解的。然后我尝试使用 JOIN EACH 而不是 JOIN，但出现错误消息“查询执行期间资源超出”。我也需要注意 JOIN EACH 的限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:04:06.537

如果您正在执行具有大量存储桶计数的a`GROUP BY`或 a ，则在执行查询时可能会超出资源（每个都有解决方法）。`COUNT DISTINCT``JOIN EACH`

如果您分享您的查询，我们可以给出更准确的诊断。

# c# - 使用自定义字体更改标签的字体

> ID：15932101
> 
> 赞同：3
> 
> 时间：2013-04-10T17:04:25.263
> 
> 标签：c#, winforms, visual-studio

可以使用自定义字体更改 C# 中标签的字体。例如：我需要将字体更改为*Bookman Old Style*，而在 Visual Studio 中没有这种字体。

可以加吗？如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:06:47.753

使用[PrivateFontCollection](http://msdn.microsoft.com/en-us/library/system.drawing.text.privatefontcollection.aspx)加载字体（参见`AddFontFile`和`AddMemoryFont`）。然后，您通常将字体用于标签控制。

```
PrivateFontCollection pfc = new PrivateFontCollection();
pfc.AddFontFile("C:\\Path To\\YourFont.ttf");
label1.Font = new Font(pfc.Families[0], 16, FontStyle.Regular); 
```

# flash - 如何在 Flash 时间线中听到嵌入的 flv 音频

> ID：15932106
> 
> 赞同：0
> 
> 时间：2013-04-10T17:04:36.817
> 
> 标签：flash, flash-cs5, flv

我知道一个简单的问题，但我在 Stack 上找不到任何相关答案……我的 Flash 时间线中有一个嵌入式 flv。当我导出/测试为 swf 时，我可以听到音频。当我按 Enter/Return 并且时间线运行时，我看到视频正在播放，但我听不到音频！！！如果我单击时间线以获取声音属性，则没有选项 - 效果和同步显示为灰色。你能帮忙吗？我需要听到时间线中的音频来同步动画 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-16T01:33:46.087

从视频中分离出音频文件并将其作为声音文件导入到时间线上以同步动画，完成后删除音轨。确保 FPS 与原始动画相同，否则声音将不同步

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T13:18:41.120

除非有人可以断言否则答案是你不能这样做。我最终在 quicktime pro 中做了这个项目

# javascript - 如何避免需要可变变量？

> ID：15932114
> 
> 赞同：0
> 
> 时间：2013-04-10T17:05:17.907
> 
> 标签：javascript, dom, google-apps-script

我正在创建一个使用谷歌应用程序脚本处理的表单，该脚本会将结果转储到谷歌电子表格中。表单会根据需要使用 Javascript 和 DOM 来复制 id="duplicate_me" 的部分。

```
<form method="post" action="https://script.google.com/macros/s/.../exec">
  <fieldset>
    <input type="text" name="P_name">
    <input type="text" name="P_addr">
  </fieldset>
  <fieldset id="duplicate_me">
    <input type="text" name="C1_name">
    <input type="text" name="C1_addr">
  </fieldset>
  <fieldset id="first_duplicate">
    <input type="text" name="C2_name">
    <input type="text" name="C2_addr">
  </fieldset>
</form> 
```

我需要脚本为每组 C 做一个 appendRow() 吗？字段和顺序很重要。IE：

```
function doPost(e) {
...
  sheet.appendRow([ e.parameter.P_name, e.parameter.P_addr, e.parameter.C1_name, e.parameter.C1_addr ] );
  sheet.appendRow([ e.parameter.P_name, e.parameter.P_addr, e.parameter.C1_name, e.parameter.C1_addr ] );
...
} 
```

我能想出的唯一解决方案是在 C 中输入数字？一个变量，但我意识到这是一个糟糕的解决方案并且难以实施。

如何将这些变量转换为允许我在循环中执行此命令而不是手动创建任意数量的这些条目的形式？

谢谢你的想法。

——戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:06:53.447

您的解决方案完全正确。

在一个循环中，写`e.parameter['C' + i + '_name']`

# ruby-on-rails - Rails - 导出到 csv 不加载值

> ID：15932115
> 
> 赞同：0
> 
> 时间：2013-04-10T17:05:22.460
> 
> 标签：ruby-on-rails, ruby, csv

我在 Rails 中导出到 CSV，一切似乎都正常，没有错误，并且正在生成文件，但只有列标题被导出，没有其他数据。

这是一些代码：

在控制器中：

```
@students = Student.where("START_DATE >= ? and END_DATE <= ? and COURSE_NAME like ?", params[:start_date], params[:end_date], params[:course_name]).select('name, course') 
```

(...)

```
format.csv { send_data @students .to_csv } 
```

在模型中：

```
def self.to_csv(options = {})
  CSV.generate(options) do |csv|
    csv << column_names
    all.each do |valeo|
      csv << valeo.attributes.values_at(*column_names)
    end
  end
end 
```

我发现问题的原因是当我点击链接时

```
= link_to "Export Records", student_path(:format => :csv) 
```

@students 是空的。我不知道为什么？或如何解决问题。

# css - Aptana 中的自定义 CSS 代码格式

> ID：15932117
> 
> 赞同：0
> 
> 时间：2013-04-10T17:05:31.007
> 
> 标签：css, aptana, formatter

在 Aptanastudio 3 中。CSS 格式化程序格式如下：

```
H1 {
 color: white;
 background: teal;
 FONT-FAMILY: arial, helvetica, lucida-sans, sans-serif;
 FONT-SIZE: 18pt;
 FONT-STYLE: normal;
 FONT-VARIANT: normal
} 
```

我正在尝试编辑它以编写这样的代码（全部在一行中）：

```
H1 { color: white; background: teal; FONT-FAMILY: arial, helvetica, lucida-sans, sans-serif; FONT-SIZE: 18pt; FONT-STYLE: normal; FONT-VARIANT: normal} 
```

在 CSS 格式化程序选项下，我可以编辑逗号、分号等之间的空格……但我找不到如何编辑代码以使其看起来像我想要的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:23:06.543

当您键入`H1 {}`而不是在它自动完成时按回车键时，花括号只需开始输入您的规则。也不要依赖（或使用）自动格式化程序。除了极少数例外（Aptana 不是其中之一，我喜欢用于 Web 应用程序的 Aptana 并且每天都在使用它）代码的自动格式化程序不会完全按照您的意愿执行。

我强烈建议不要以你想要的方式编写你的 CSS。第一种方式*更*容易阅读。此外，大多数托管解决方案甚至很多框架（例如 Rails）都会为您缩小代码。即使你没有，你也可以很容易地自己缩小它。

开发时：“可读性=可维护性”总是比这里和那里保存的几个字节更有价值。

# google-maps-sdk-ios - 坐标、我的位置和标记未出现在地图中

> ID：15932118
> 
> 赞同：0
> 
> 时间：2013-04-10T17:05:32.257
> 
> 标签：google-maps-sdk-ios

我已经与 google maps ios sdk 斗争了几个小时，但我遇到了一个我无法解决的问题。所以这就是正在发生的事情：

我在界面生成器中有一个视图控制器，并用它实现了 .m 和 .h 。视图控制器有一个视图，在该视图内部还有另一个视图，它是保存地图的视图，因此在自定义类的身份检查器中，它被设置为 GMSMapView。

这个视图有一个 .h 实现的出口，它被称为 mapView。在 .m 上，我有以下代码：

*   (void)viewDidLoad

{

```
[super viewDidLoad];

GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:10.49101

 longitude:-66.902061

 zoom:4];

 self.mapView = [GMSMapView mapWithFrame:[self.mapView bounds] camera:camera];

 self.mapView.myLocationEnabled = YES;

 GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];

 options.position = CLLocationCoordinate2DMake(-33.8683, 151.2086);

 options.title = @"Sydney";

 options.snippet = @"Australia";

 [self.mapView addMarkerWithOptions:options]; 
```

}

如您所见，我创建了相机，然后创建了带有界面构建器（mapView）上的视图边界的地图。现在这是行不通的：

1）无论我输入什么坐标，地图总是从英格兰开始，我相信（0,0）坐标 2）我的位置没有出现 3）标记也没有出现。4) 重要提示：地图正在出现，但始终在英格兰上空。

老实说，我不知道发生了什么，我相信它与 -(void)viewDidLoad 因为如果我使用谷歌提供的代码在 loadView 方法上编写代码它可以工作，但这样做的问题是这样是您无法访问我在界面生成器上创建的视图。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:25:27.607

因此，我找到了问题的答案，而无需在界面生成器中使用视图，一切都以编程方式完成。这是解决方案：

-(void)viewDidLoad{ [超级 viewDidLoad];

```
mapView = [[GMSMapView alloc] initWithFrame:CGRectZero];

[mapView setFrame:CGRectMake(0, 0, 400, 400)];  ////here you will have to specify the bounds of the view through CGRectMake

 GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:10.49101

                                                         longitude:-66.902061

                                                              zoom:4];

 [mapView setCamera:camera];

 mapView.myLocationEnabled = YES;

 GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];

 options.position = CLLocationCoordinate2DMake(-33.8683, 151.2086);

 options.title = @"Sydney";

 options.snippet = @"Australia";

 [mapView addMarkerWithOptions:options];

 [self.view addSubview:mapView];

 [self.view sendSubviewToBack:mapView]; // just in case you need to send the map to the back, I do 
```

}

# c# - 地铁应用中的图像处理

> ID：15932119
> 
> 赞同：3
> 
> 时间：2013-04-10T17:05:33.397
> 
> 标签：c#, matlab, image-processing, microsoft-metro

我需要在 Windows 8 Metro 应用程序中进行一些图像处理。为此，我在 MATLAB 中编写了一些函数。有没有办法可以将它们集成到我的应用程序中？我有点迷失在这里。任何人都可以对此提出建议吗？我将感激不尽。

PS：在我的 MATLAB 程序中，我正在检测面部形状和肤色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:38:11.557

当然，为什么不呢？只需用 C# 或 C++ 重新实现您的 Matlab 代码。你有一个具体的问题吗？

您可以使用 OpenCV（或 EmguCV C# 包装器）或 AForge.NET 等计算机视觉库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:41:01.577

这是[轻量级图像处理示例](http://www.codeproject.com/Articles/340859/Metro-Style-Lightweight-Image-Processing)。我认为最好检查这个样本，它可能对你有帮助。请注意，文章有点旧，因此必须由作者更新。

# iphone - 强制设备上的虚假位置？

> ID：15932124
> 
> 赞同：0
> 
> 时间：2013-04-10T17:05:47.440
> 
> 标签：iphone, ios

我需要向我的主管演示我的应用程序。此刻，我已经设置了所有测试，以便它适用于卡利的高速公路驱动器。当我演示它时，我将在办公室（固定），因此手机的真实位置数据根本不会显示演示结果。

反正有没有让iphone做城市驱动？- 当它本机运行时，即未连接到机器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:28:24.093

github 上有各种`CLLocationManager`模拟器，您可以将它们包含在您的演示构建中，例如`CLLocationManager_simulator` [这里](https://github.com/progrmr/CLLocationManager-simulator)的.

或者，您可以设置您的应用程序以将位置数据记录到文件中，然后创建一个播放该文件的 CLLocationManager 模拟器。有了这个，测试人员可以记录试驾，然后开发人员可以在办公室回放它们以调试或检查发生的事情或使用新版本重新测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:20:19.323

如果您不介意使用模拟器进行演示，可以使用模拟位置。查看 Debug -> Location 下的 Simulator 菜单。

# haskell - Haskell 设计：与 IO 作斗争

> ID：15932128
> 
> 赞同：4
> 
> 时间：2013-04-10T17:05:55.010
> 
> 标签：haskell

我是一名新手 Haskell 程序员，我正在尝试编写一些 Haskell cgi，它将从 MySQL DB 读取并输出 JSON。我能够生成正确的 JSON，但无法正确获取数据类型以便能够正确输出 JSON。我也认为我主要还是在考虑必要性。这是我的代码。请注意，getTopBrands 提供 json 输出。

我的问题是我无法弄清楚如何从 getTopBrands 返回“[Char]”而不是“IO [Char]”。在我看来，我仍然认为势在必行。任何指针，解决此问题的建议将不胜感激。如果我需要提供其余代码，请告诉我。

RODB.hs：

```
{-# LANGUAGE RecordWildCards, OverloadedStrings, PackageImports #-}

module Main where

import RODB
import ROOutput
import System.Environment
import Database.HDBC
import Network.Socket(withSocketsDo)
import Network.CGI
import Text.XHtml
import qualified "bytestring" Data.ByteString.Lazy.Char8 as LBS
import Data.Aeson

page :: Html
page = body << h1 << str

main = runCGI $ handleErrors cgiMain

cgiMain :: CGI CGIResult
cgiMain =
    do out <- getTopBrands 10 1
       setHeader "Content-type" "application/json"
       output $ renderHtml page out

getTopBrands :: Integer -> Integer -> IO [Char]
getTopBrands limit sorted =
    do let temp = 0
       dbh <- connect "127.0.0.1" "ReachOutPublicData" "root" "admin" "/tmp/mysql.sock"
       if sorted == 1
       then do brandlist <- getBrands dbh limit True
               json <- convPublicBrandEntrytoJSON brandlist
               return $ LBS.unpack json
       else do brandlist <- getBrands dbh limit False
               json <- convPublicBrandEntrytoJSON brandlist
               return $ LBS.unpack json 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T18:29:29.487

正如[Niklas B 所说](https://stackoverflow.com/questions/15932128/haskell-design-struggling-with-io#comment22697093_15932128)，`getTopBrands`进入`IO`是正确的，因为它取决于 I/O。我猜你的问题是当你尝试直接使用它时会出现类型错误，

```
cgiMain :: CGI CGIResult
cgiMain =
    do out <- getTopBrands 10 1
       setHeader "Content-type" "application/json"
       output $ renderHtml page out 
```

因为 do-block 中的所有语句必须属于同一个 monad，而该块的其余部分在`CGI`. 但是，`CGI`是一个[`MonadIO`](http://hackage.haskell.org/packages/archive/cgi/latest/doc/html/Network-CGI.html#t:MonadIO)，因此你可以简单地`liftIO`将它变成`CGI`，

```
cgiMain :: CGI CGIResult
cgiMain =
    do out <- liftIO $ getTopBrands 10 1
       setHeader "Content-type" "application/json"
       output $ renderHtml page out 
```

Niklas 提出的下一点也是正确的，第二个`Integer`论点`getTopBrands`应该真的是 a `Bool`。然而，即使使用它当前的类型，代码重复也是完全没有必要的，两个分支之间的区别只是 的`Bool`参数`getBrands`，所以

```
getTopBrands :: Integer -> Integer -> IO [Char]
getTopBrands limit sorted =
    do let temp = 0
       dbh <- connect "127.0.0.1" "ReachOutPublicData" "root" "admin" "/tmp/mysql.sock"
       brandlist <- getBrands dbh limit (sorted == 1)
       json <- convPublicBrandEntrytoJSON brandlist
       return $ LBS.unpack json 
```

*只需将您分支的条件传递给它*。

尼克拉斯的第三分

> 我也不明白为什么`convPublicBrandEntrytoJSON`需要住在`IO`，但由于你没有提供它的定义，我不能在这里提出改进建议。

看起来也很有效，转换通常是纯函数。如果它存在的唯一原因是`IO`写作能力

```
json <- convPublicBrandEntrytoJSON brandlist 
```

您应该知道您可以在 do-block 中绑定纯函数的结果

```
let json = convPublicBrandEntrytoJSON brandlist 
```

使用`let`.

# css - 将侧边栏放在导航栏上

> ID：15932129
> 
> 赞同：0
> 
> 时间：2013-04-10T17:05:58.883
> 
> 标签：css, wordpress, styling

我们从项目负责人那里得到了这个奇怪的线框，必须在 wordpress 中完成。（注意我在上大学）在线框中的侧边栏位于导航栏的顶部。

现在我们的领导建议使用二十一。但我似乎无法在导航顶部找到侧边栏（或任何接近它的东西）

我试图弄乱样式（改变位置）但没有运气。

![图片](https://i.stack.imgur.com/RHXJD.png)

来自：http: [//i.stack.imgur.com/RHXJD.png](https://i.stack.imgur.com/RHXJD.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:37:02.910

关于可以使用什么或不可以使用什么有什么规则吗？

似乎您可以使用绝对定位和 z-index 的组合。那有意义吗？

像这样的东西：

```
body{ position: relative;}
#menu{position: absolute; padding-top: 250px; top: 0; bottom: 0; left: 100px; width: 200px; z-index: 1;} 
```

# java - 我正在尝试使用 MouseMotionListener 将 JTable 中的数据打印到命令行

> ID：15932136
> 
> 赞同：3
> 
> 时间：2013-04-10T17:06:13.463
> 
> 标签：java, swing, jtable, mouseevent, mouselistener

我对java相当陌生，尤其是java的这一面。我目前正在尝试创建一个 JTable，它将接收一个 CSV 数据文件，然后该表将显示在一个 GUI 上，您可以选择数据的特定部分，从中创建可视化。目前我正在为 mouseClicked 使用 MouseListener - 这会将单元格正确打印到命令行。但是，当对 mouseDragged 使用 MouseMotionListener 时，它只会打印出多次单击（来自 mouseClicked）的单元格。我知道这与 mouseClicked （或至少认为是）有关，但我无法理解它。

代码：

```
import java.awt.Dimension;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import java.awt.Color;

public class TableView extends ChartGUI{

        /**
         *
         */
        public JScrollPane GetPanel() {
                return scrollPane;
        }
        public void SetScrollPane(JScrollPane pane) {
                scrollPane = pane;
        }
        public TableView(String title, Object[][] data) {
                if(data != null) {
                        Object[] columnNames = data[0];
                        Object[][] tableData = new Object[data.length][];
                    for(int i = 0; i < (data.length - 1); i++){
                        tableData[i] = data[i+1];
                    }

                    table = new JTable(tableData, columnNames);
                    table.setCellSelectionEnabled(true);
                    JScrollPane scrollPane = new JScrollPane(table);
                    scrollPane.setPreferredSize(new Dimension(PANE_WIDTH, PANE_HEIGHT));
                    SetScrollPane(scrollPane);
                } else {
                        System.out.println("Null Data");
                }

        /** MouseListener to allow users to select specific cells, printing the data to the command line */            
                table.addMouseListener(new MouseAdapter() {              
                        public void mouseClicked(MouseEvent evt) {       
                                col = table.getSelectedColumn();  
                                row = table.getSelectedRow();  
                                selData = GetData(table, row, col);

                                System.out.println("Selected data: MouseClicked ::  " + (String)selData);
                        }  
                });
                table.addMouseListener(new MouseAdapter() {
                        public void mouseReleased(MouseEvent evt) {
                                col = table.getSelectedColumn();
                                row = table.getSelectedRow();
                                selData = GetData(table, row, col);

                                System.out.println("Selected data: MouseReleased ::  " + (String)selData);
                        }
                });
                table.addMouseMotionListener(new MouseMotionAdapter() {
                        public void mouseDragged(MouseEvent evt) {                     
                                col = table.getSelectedColumn();  
                                row = table.getSelectedRow();  
                                selData = GetData(table, row, col);

                                System.out.println("Selected data: MouseDragged ::  " + (String)selData);

                        }        
                });

        }      
        /** A method to return the values at an index selected by the user, as a String */
        public String GetData(JTable table, int row_index, int col_index){
                return (String)table.getModel().getValueAt(row_index, col_index);
        }  

        public static void main(String[] args){
                System.out.println("Why are you doing this?, maybe we should have some JUnit Tests");          
    }

        private static final long serialVersionUID = 4901866775892531001L;
        private JScrollPane scrollPane;
        private JTable table;
        private String selData;
        private int col;  
        private int row;
        private int PANE_WIDTH = 900;
        private int PANE_HEIGHT = 600;
} 
```

感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T13:44:50.550

表格单元格不是通过鼠标移动来选择的，它们是通过单击来选择的。您的 mouseDragged 方法将在每次触发时打印出所选表格单元格的信息，但所选表格单元格仅在您单击时才会更改。您可能希望从 mouseEvent 获取当前鼠标位置并使用该信息选择一个新的表格单元格，然后打印出该信息。

# scala - 检查集合中的所有项目是否与 Scala 中的谓词匹配

> ID：15932137
> 
> 赞同：45
> 
> 时间：2013-04-10T17:06:14.793
> 
> 标签：scala, predicate

测试集合的所有项目是否与谓词匹配的最惯用的方法是什么？

任何项目？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-10T17:09:09.757

为此有内置函数：

```
List(1,2,3,4).forall(x => x < 5)
res0: Boolean = true 
```

对于任何：

```
List(1,2,3,4).exists(x => x > 3)
res1: Boolean = true 
```

# android - Playstore 开源非官方 API

> ID：15932138
> 
> 赞同：3
> 
> 时间：2013-04-10T17:06:14.853
> 
> 标签：android, oauth, gmail

我正在寻找一个 API，它可以帮助我从 playstore 获取有关不同应用程序的详细信息。经过大量谷歌搜索并浏览了 SO 已经提供的许多解决方案后，我决定使用[Android Market API](http://code.google.com/p/android-market-api/)，尽管这个 API 几乎没有缺点。

我主要专注于获取与应用程序相关的评论 - 当我使用此 API 时，这里的主要缺点是，我没有获得评论者姓名、应用程序版本、设备以及我需要的更多有价值的信息。

我已经进行了足够的研究以找到任何替代方法来获取此信息，但无济于事。

在研究过程中，我注意到了[Appmonsta](http://appmonsta.com/dashboard/api-documentation/#app-reviews) api，它声称提供了 Playstore 中几乎所有可用的详细信息，包括用户名、设备、应用程序版本等。

我相信他们不会维护一个不是实用解决方案的数据库，因为市场信息每秒钟都在变化。而且我也很确定，谷歌不会单独为他们提供任何更新。

由于我需要这样的 API，我很想知道，他们使用或应该使用的机制/技术是什么，以便他们可以单独使用整个 Playstore 信息 - 至少与评论有关的完整详细信息.

非常感谢这方面的任何帮助、评论和指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:58:21.993

> 我相信他们不会维护一个不是实用解决方案的数据库，因为市场信息每秒钟都在变化。

如果我正在编写这样的 Web API，我*实际上会*维护一个数据库并将其用作缓存。特定应用页面的新点击可能会刷新缓存。这些信息将通过[抓取](http://en.wikipedia.org/wiki/Web_scraping)网页获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:29:57.310

没有官方的 API，所以无论你使用什么，你都会遇到问题——如果不是今天，那么也许明天，当谷歌改变商店里的东西时。但无论如何，您可以查看 Andlytics 的来源：[https](https://github.com/AndlyticsProject/andlytics) ://github.com/AndlyticsProject/andlytics - 也许它足以满足您的需求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-31T07:35:04.813

WhereDat [API](http://wheredatapp.com/developers/)搜索 Android Play 商店。它使您可以使用全字符串搜索查询来查找应用程序。它还通过使用前缀字符串搜索来支持自动完成用例。查找 API 允许您使用应用程序包作为键来获取有关应用程序的数据。

# gwt - GWT UiBinder 以任何方式拥有动态图像列表

> ID：15932141
> 
> 赞同：1
> 
> 时间：2013-04-10T17:06:27.230
> 
> 标签：gwt, uibinder, gwt-widgets

我有一个说 5 个图像（图像资源）的列表，我想添加到面板中，而无需`<img>`在我的`ui.xml`. 这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:49:48.073

`@uifield yourpanel panel`

您直接将图像添加到该面板。

```
for (int i = 0; i < images.length; i++){

Image image =new Image(url);

 .....
...
Panel.add(image);
} 
```

# c++ - 在 C++ 中从 .txt 文件加载数组时遇到问题

> ID：15932142
> 
> 赞同：1
> 
> 时间：2013-04-10T17:06:28.570
> 
> 标签：c++

```
 #include <cstdlib>
    #include <iostream>
    #include <fstream>
    using namespace std;
    const int MAX=100;

//Declare Functions

    void loadFile(istream &input_file, int arr[], int maxLength, int& length);

    //Main Function

    int main()
    {
        ifstream in_file1;
        ifstream in_file2;

        in_file1.open ("input1.txt");
        in_file2.open ("input2.txt"); 

        int array1[0], array2[0];

        int length;
         loadFile (in_file1, array1, MAX, length);

for (int i = 0; i <= length; i++)
{
    cout << array1[i] << endl;
}

cout<<endl<<endl;

loadFile (in_file2, array2, MAX, length);

for (int i = 0; i <= length; i++)
{
    cout << array2[i] << endl;
}

        return 0;
        }

    //Function Definitions

    void loadFile(istream &input_file, int arr[], int maxLength, int& length)
{
    int i;
    int input;

    {

        for (i=0; i<maxLength; i++)
        {
            if (!input_file.eof())
            {
            input_file>>input;
            arr[i]=input;
            length=i;
            }
        }
    }

} 
```

这是我的新代码。它仍然会在不在文件中的数组之后打印一堆数字。我在这附近吗？还有什么问题。

输出：

```
-26
128
184
-4
-51
129
-93
199
115
-92
16
0
-64
56
5
112
-20
160
-56
148
94
18
145
155
178
83
-57
103
-68
69
-53
80
148
131
-82
1
102
-50
192
27
32
-63
34
150
160
160

137
-53
119
-64
-80
186
144
-78
-1
62
-72
86
127
40
53
-93
41
45
194
-19
118
53
31
-52
-27
150
-31
86
-29
34
103
4
-92
90
18
13
49
-57
-51
-7
78
62
97
15
122
154
172
9
-5
108
-33
-33
-60
88
89
190
171
109
39
111
-55
-11
160
16
68
172
168
-64
-14
-15
142
-16
-16 
```

为什么它仍然打印最后一个数字两次？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:07:26.903

```
int array1[0], array2[0]; 
```

你的数组有`0`长度。你可能的意思是：

```
int array1[MAX], array2[MAX]; 
```

您必须为数组分配内存才能将内容加载到其中。

您可以改为将`vector`s 传递给函数，并用于`push_back`将从文件中读取的内容放入向量中。

同时，

```
 cout<<array1<<endl;
 cout<<array2<<endl; 
```

打印数组地址。所以这是意料之中的。您需要遍历数组以打印出东西。

# java - JUNG 中的布局算法

> ID：15932144
> 
> 赞同：2
> 
> 时间：2013-04-10T17:06:34.870
> 
> 标签：java, graph, jung

我想从我的 Java 应用程序中可视化一个图表，为此我使用 JUNG。问题是我的图表包含大量节点和边，JUNG 提供的哪些布局可以给我最小的交叉边缘？以便图表看起来更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T19:20:33.737

JUNG 布局本身并不试图最小化边缘交叉，因为这充其量是一个 O(E^2) 命题。

我建议您尝试不同的布局，看看哪些适合您。没有一个适合所有人的正确答案。

# php - 在php中使用simplexml解析xml文件

> ID：15932148
> 
> 赞同：-2
> 
> 时间：2013-04-10T17:06:48.040
> 
> 标签：php, simplexml

以下 xml 是从我无法控制的 Web 服务返回的缩短的示例 xml。有人能告诉我如何使用 simplexml 先读取 stats 中的记录数，然后正确迭代设备项目，以便我可以显示项目价格和数量吗？谢谢。

```
 <?xml version="1.0"?>
    <response>
     <inventory>
      <warehouse>
       <stats> 
        <location>Main</location>
        <reportTime>3/9/2013 16:50 PM</reportTime>
        <records>2</records>
       </stats>
       <equipment>
        <item>
         <model>B14</model>
         <status>Active</status>
         <price>410.33</price>
         <color>blue</color>
         <qty>100</qty>
        </item>
       </equipment>
       <equipment>
        <item>
         <model>C15</model>
         <status>Active</status>
         <price>199.10</price>
         <color>red</color>
         <qty>200</qty>
        </item>
       </equipment>
      </warehouse>
     </inventory>
    </response> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:16:57.007

```
<?php
$xml = ...; // Your XML

$sx = new SimpleXMLElement($xml);
$numRecords = $sx->inventory->warehouse->stats->records;

foreach($sx->inventory->warehouse->equipment as $item) {
    echo $item->item->price,', ',$item->item->qty,'<br />';
}
?> 
```

输出：

> 410.33, 100
> 
> 199.10, 200

# ruby-on-rails - rails - concatante 和缩小 css 但忽略 js

> ID：15932151
> 
> 赞同：0
> 
> 时间：2013-04-10T17:06:53.603
> 
> 标签：ruby-on-rails, asset-pipeline

是否有可能在生产中使用资产管道来分离 js 和 css 的 minifcaiton 和串联？

我想预编译我的 css，但我想保留我的 js 文件，因为它们正在开发中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:12:09.610

在您的`application.js`文件中，您可以删除该行：

```
//= require_tree . 
```

这会导致资产管道忽略您的个人 javascript 文件以集中注意力。

您可以手动添加您希望包含在 application.js 文件中的任何文件。

# r - 在不重新启动 R 的情况下卸载和删除加载的包

> ID：15932152
> 
> 赞同：5
> 
> 时间：2013-04-10T17:06:56.263
> 
> 标签：r, dll, loading, uninstallation

## 实际问题

我可以卸载**和**删除一个包而不必重新启动已经需要/加载包的 R 进程吗？

我看过这个[问题/答案](https://stackoverflow.com/questions/6979917/how-to-unload-a-package-without-restarting-r)，但它只处理部分问题（卸载）

* * *

# 背景

我想这样做的原因是我正在开发一个基于项目的包开发框架，在该框架中我还使用基于项目的包库以保持标准库“干净”并允许对包进行系统测试依赖关系。

**唯一的问题是用户在初始化项目之前**很难记住基于项目的包库的路径（它还加载所有指定的包依赖`require()`项并使基于项目的库成为第一个`.libPaths()`）

实际上，这意味着用户目前无法以*舒适*的方式（**即在**初始化项目之后）从基于项目的包库中真正卸载包依赖项，我正在寻找改变这一点的方法。

## 我试过的

```
install.packages("forecast")
require("forecast")

detach("package:forecast", unload=TRUE)
remove.packages("forecast")

> install.packages("forecast")
Warning: unable to access index for repository http://www.stats.ox.ac.uk/pub/RWin/bin/windows/contrib/2.15
trying URL 'http://cran.rstudio.com/bin/windows/contrib/2.15/forecast_4.03.zip'
Content type 'application/zip' length 1124001 bytes (1.1 Mb)
opened URL
downloaded 1.1 Mb

package 'forecast' successfully unpacked and MD5 sums checked
Warning: cannot remove prior installation of package 'forecast'

The downloaded binary packages are in
    C:\Users\wwa418\AppData\Local\Temp\RtmpYPry89\downloaded_packages 
```

问题似乎是`/forecast/libs/i386/forecast.dll`它可能在加载时被注册并且似乎很难杀死;-)

有任何想法吗？

# javascript - 显示许多选择器中的 1 个

> ID：15932168
> 
> 赞同：0
> 
> 时间：2013-04-10T17:08:01.543
> 
> 标签：javascript, jquery, html

我有一个小 jquery 显示/隐藏脚本。我遇到的问题是它显示了所有的选择器。我只希望它显示被点击的 div 内的那个。

HTML

```
<!--row1 -->
    <div class="row resource-line-item">
     <div class="zone1">
       <h3 class="clickable">ANDALE.TTF - True Type Font</h3>
       <span class="edit-resource">Edit</span> 
     </div>
    <div class="zone2 printer-state">
       <p> Size: 4153344 <br>
           Date: Tuesday, March 26, 2013 2:14:14 PM</p>
    </div>
    <div style="display: none;" class="edit-Box"> </div>
    </div>

<!--row2 -->
    <div class="row resource-line-item">
     <div class="zone1">
       <h3 class="clickable">ANDALE.TTF - True Type Font</h3>
       <span class="edit-resource">Edit</span> 
     </div>
    <div class="zone2 printer-state">
       <p> Size: 4153344 <br>
           Date: Tuesday, March 26, 2013 2:14:14 PM</p>
    </div>
    <div style="display: none;" class="edit-Box"> </div>
    </div> 
```

查询

```
<script type="text/javascript">
     $("#resource-list-area .edit-resource").on("click", function(event){
     $(this).next(".edit-box").toggle();
       //alert('hello')
     });
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:09:37.680

再次，猜测那是你的标记

```
$("#resource-list-area").on("click", ".edit-resource", function(event) {
    $(this).closest(".row").find(".edit-Box").toggle();
}); 
```

见工作小提琴：http: [//jsfiddle.net/xZBje/1](http://jsfiddle.net/xZBje/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:10:36.410

```
$(".edit").click(function() {
    $(this).next().toggle();
}); 
```

# javascript - 我的网站冻结 - 可能是 JavaScript，但我无法确定原因

> ID：15932169
> 
> 赞同：1
> 
> 时间：2013-04-10T17:08:10.220
> 
> 标签：javascript, jquery, freeze

我知道这是一个长镜头，所以我不指望一个答案，但我只是为了我的生活无法弄清楚为什么这个网页设计一直冻结我的浏览器。

[http://fuzionve.com/test](http://fuzionve.com/test)

我在 Chrome 开发人员工具中运行了审计工具，但似乎没有什么实质性的。当我在浏览器中加载它时，它会冻结，然后立即完全加载。

有什么建议么？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:10:09.487

1）删除/注释掉代码

2）加载页面并测试是否冻结

3）如果仍然冻结，从步骤 1 开始重复

4）如果没有冻结，检查你刚刚删除的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:22:14.377

它在这里工作正常。

关于“简单”优化的一些建议：

1.  `<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic" />`- 这是一个外部样式表。您的浏览器必须与另一台服务器建立连接。考虑将字体（和样式表）下载到您自己的服务器。
2.  您加载了 4 个样式表，这需要 4 次往返服务器。考虑将它们合并到 1 个样式表中。如果您更喜欢在开发中使用多个样式表，请将它们合并到发布版本中的单个文件中。
3.  脚本也是如此：你有 3 个脚本。考虑将它们合并到发布版本中的 1 个文件中。
4.  当您的浏览器检测到一个`<script>`元素时，它会停止呈现您的页面，直到该脚本文件已从您的服务器下载并执行。这是因为脚本可以使用 document.write() 来编写 HTML，从而更改您的页面。如果您知道您的脚本不编写 HTML（通常它们不会，至少在 document.ready 事件被触发之前），请考虑使用 HTML5`async`或`defer`属性（[https://developer.mozilla.org/en-US/文档/HTML/元素/脚本](https://developer.mozilla.org/en-US/docs/HTML/Element/script)）。请注意，这些属性仅在现代浏览器中受支持。

如果这些事情没有帮助，请按照 Brad M 的建议来追踪您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T17:56:35.660

我在使用多个（和重型）插件时遇到了同样的问题，你可以做的是改变他们的一些代码，一个接一个地开始，比如回调，至少我改变了 3-4 个插件代码来做出改变。

它可能完成这项工作，使用 setInterval 检查某个插件是否完成。或者实现一个回调，进入代码，完成后，调用另一个代码。

我找到了这个库，它可以帮助你： [https ://github.com/caolan/async](https://github.com/caolan/async)

# ios - 为什么增加 CCKeyDerivationPBKDF 的轮数会提高安全性？

> ID：15932178
> 
> 赞同：3
> 
> 时间：2013-04-10T17:08:50.800
> 
> 标签：ios, security, aes

[阅读了 Rob Napier 关于使用 CommonCrypto 正确加密](http://robnapier.net/blog/aes-commoncrypto-564)的博客文章后，我仍然无法理解*为什么*增加散列迭代次数会使攻击者“浪费一些时间”。

[CCKeyDerivationPBKDF](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/CCKeyDerivationPBKDF.3cc.html)的手册页将轮次描述为：

> 要使用的伪随机算法的轮数。

这里的原理是攻击者试图通过一系列猜测来破解密码，但是为了将密码变成密钥以查看它是否有效，他们自己必须迭代轮数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T19:17:01.037

这是一个原则。另一个好处是，潜在目标之间不同的回合数使得一刀切的攻击更难奏效。就像盐一样，加密中的多样性和附加工作使得攻击者不得不对每个目标进行昂贵的攻击。此类障碍可能会阻止攻击者攻击您的站点：他或她注意到有更容易定位和移动的站点。

如果您的网站很重要，那么实际情况是攻击者通常会绕过加密而不是钻研它。Bruce Schneier 指出加密通常是最强的链接。他们更有可能拥有您的盒子或利用他们的网络应用程序中的缺陷。一旦他们拥有控制权，他们就可以拦截或操纵他们想要的任何数据。因此，最好只使用加密的最佳实践配置，然后将大部分精力用于寻找应用层的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:15:01.070

是的，这是正确的。随着硬件随着时间的推移变得越来越快，计算大量潜在输入的关键值变得更便宜、更容易。增加需要执行的迭代次数允许计算密钥的成本随着硬件变得更好而随着时间的推移而增加，而不必切换到全新的、更昂贵的算法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T17:12:55.897

是的，攻击者还必须做相同数量的回合，增加他的工作和时间。

# c# - 如何将字符串拆分为多维数组？

> ID：15932179
> 
> 赞同：0
> 
> 时间：2013-04-10T17:08:51.177
> 
> 标签：c#, arrays, string, split, multidimensional-array

几周前我开始用 C# 编程工作，我试图从大量数据中提取一些信息，这些数据实际上是通过 GET/POST http 请求收集的。

到目前为止，我对整体没有任何问题，但我现在正在努力解决这个困难，我相信在你看来这似乎很荒谬。这就是我向你走来的原因，不用担心，我试图研究它但没有成功。

这是我的清单

```
[{"id":"28",
"name":"Whitechapel Station",
"logo":"gfx\/whitechapel_station\/whitechapel_station_logo.gif",
"x":"85129",
"y":"36575",
"extentsX1":"0",
"extentsX2":"0",
"extentsY1":"0",
"extentsY2":"0",
"zoomlevel":"4",
"code":"PRJ",
"asset_type":"fixed",
"symbol":"project"}

,{"id":"46",
"name":"Connaught Tunnel",
"logo":"gfx\/connaught_tunnel\/connaught_tunnel_logo.",
"x":"91668",
"y":"35238",
"extentsX1":"0",
"extentsX2":"0",
"extentsY1":"0",
"extentsY2":"0",
"zoomlevel":"4",
"code":"PRJ",
"asset_type":"fixed",
"symbol":"project"}
] 
```

实际上我的想法是只提取每束大 {} 的“id”和“name”。你有什么想法 ？

欢呼队友。

克莱门特

**编辑：代码不像通常这样。它只是一条没有回报的大直线，如下所示。**

```
[{"id":"28","name":"Whitechapel Station","logo":"gfx\/whitechapel_station\/whitechapel_station_logo.gif","x":"85129","y":"36575","extentsX1":"0","extentsX2":"0","extentsY1":"0","extentsY2":"0","zoomlevel":"4","code":"PRJ","asset_type":"fixed","symbol":"project"},{"id":"46","name":"Connaught Tunnel","logo":"gfx\/connaught_tunnel\/connaught_tunnel_logo.","x":"91668","y":"35238","extentsX1":"0","extentsX2":"0","extentsY1":"0","extentsY2":"0","zoomlevel":"4","code":"PRJ","asset_type":"fixed","symbol":"project"}] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:15:12.890

您发布的示例采用[JSON](http://en.wikipedia.org/wiki/JSON)格式。为了反序列化 JSOn 字符串，您应该使用[JSON.NET 之](http://james.newtonking.com/projects/json-net.aspx)类的工具。

首先，制作与要反序列化的属性匹配的 ac# 对象：

```
public class MyObject
{
    public int id { get; set; }
    public string name { get; set; }
} 
```

然后，反序列化：

```
var myObjects = JsonConvert.DeserializeObject<List<MyObject>>(theString); 
```

然后，这些值将提供给您：

```
int id = myObjects[0].id;
string name = myObjects[0].name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:15:00.510

好的，基本上我犯了一个严重的错误。我在每个 [ 或 ] 和 { 或 } 之间添加了字符“。已解决！

# ruby-on-rails-3 - 我应该在视图中测试什么？

> ID：15932183
> 
> 赞同：1
> 
> 时间：2013-04-10T17:09:06.273
> 
> 标签：ruby-on-rails-3, testing, rspec, capybara, rspec-rails

测试和 Rspec 对我来说是新的。目前我正在使用 Rspec 和 Shoulda 和 Capybara 来测试我的应用程序。测试模型、控制器、助手、路由和请求都很好。但是我应该在视图中究竟测试什么？实际上，我想测试视图中的所有内容，包括 DOM，但我也不想做得过火。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:02:14.467

这三件事将是一个很好的起点

1.  使用 Capybara 从您网站的根目录开始，让它点击链接和其他任何东西，直到它到达您想要测试的视图。

2.  确保页面上应该包含的内容实际上显示在页面上。因此，如果他们的“用户”访问了**Product 1**页面，请确保**Product 1**的所有内容都确实存在。

3.  如果不同的用户看到不同的内容，请确保它有效。因此，如果管理员用户看到管理员类型的按钮，请确保当用户是管理员时这些按钮是它们，而不是当用户不是管理员时。

这3件事是一个很好的基础。即使是第一个也是一个巨大的胜利。这将捕获您可能不小心引入的任何类型的奇怪视图语法错误，因为语法错误将使测试失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:07:37.977

我使用视图规范来验证视图是否使用了我在 jQuery 代码中依赖的 ID 和类。

并测试同一页面的不同版本。例如：

我不想创建两个完整的请求或功能规范来检查新用户看到`welcome message A`和返回用户`welcome message B`。相反，我会选择其中一种情况，为其编写请求或功能规范，然后再编写一个测试这两种情况的附加视图规范。

[Rails Test Prescriptions](http://pragprog.com/press_releases/rails-test-prescriptions-keeping-your-application-healthy)对您来说可能很有趣，因为它有一章专门用于查看测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T17:14:08.357

在我的工作中，我们仅使用 RSpec 进行单元测试。

对于业务测试或行为测试，我们使用 Cucumber，它对业务和 IT 人员来说更具可读性。这就像您与您的企业签署的合同，或者您可以执行的文档。

看看黄瓜：[http ://cukes.info/](http://cukes.info/)

# android - Android：获取url中的文件列表

> ID：15932190
> 
> 赞同：0
> 
> 时间：2013-04-10T17:09:21.927
> 
> 标签：android, url

我已经搜索了很多，但对 android 没有任何好处..我希望有人可以帮助我。我想获取此 url 上的文件列表并将它们添加到列表视图中的字符串中..所以我的问题是我无法从 url 获取文件列表..这是我的 url.. [文件](http://sourceforge.net/projects/ganjoor/files/gdb/)

我搜索并找到了这个..但它适用于java而不是android..有没有办法转换它？

```
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;

public class Sample {
    public static void main(String[] args) throws IOException {
        Document doc = Jsoup.connect("http://howto.unixdev.net").get();
        for (Element file : doc.select("td.right td a")) {
            System.out.println(file.attr("href"));
        }
    }
} 
```

我还发现服务器必须具有目录列表能力..对吗？我如何找到服务器具有这种能力？我找到了这个，但需要转换 :( 我正在处理它 :D [在这里](https://stackoverflow.com/questions/7639024/android-file-listing-of-web-server)

我测试了这个方法，但我得到了错误..你能帮我找出我的错误吗？

```
 URL url1;
            List serverDir;

            try {
                  url1 = new URL("http://sourceforge.net/projects/ganjoor/files/gdb/");    
                InputStreamReader urls=new InputStreamReader(url1.openStream(), "UTF-8");
                Log.i("url_string", urls.toString());
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

这是原木猫

```
04-11 08:20:22.772: E/AndroidRuntime(13416): FATAL EXCEPTION: main
04-11 08:20:22.772: E/AndroidRuntime(13416): java.lang.RuntimeException: Unable to start activity ComponentInfo{co.tosca.persianpoem/co.tosca.persianpoem.Download_database}: java.lang.NullPointerException
04-11 08:20:22.772: E/AndroidRuntime(13416):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at android.os.Looper.loop(Looper.java:137)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at android.app.ActivityThread.main(ActivityThread.java:4441)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at java.lang.reflect.Method.invokeNative(Native Method)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at java.lang.reflect.Method.invoke(Method.java:511)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at dalvik.system.NativeStart.main(Native Method)
04-11 08:20:22.772: E/AndroidRuntime(13416): Caused by: java.lang.NullPointerException
04-11 08:20:22.772: E/AndroidRuntime(13416):    at libcore.net.http.HttpConnection$Address.hashCode(HttpConnection.java:343)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at java.util.HashMap.get(HashMap.java:298)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:67)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at java.net.URL.openStream(URL.java:462)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at co.tosca.persianpoem.Download_database.onCreate(Download_database.java:45)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at android.app.Activity.performCreate(Activity.java:4465)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-11 08:20:22.772: E/AndroidRuntime(13416):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
04-11 08:20:22.772: E/AndroidRuntime(13416):    ... 11 more 
```

我检查了许可证并添加了这两个许可证，但仍然出现错误..我的错误在哪里？

```
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET" /> 
```

现在我尝试了这个新代码，但我又得到了错误。有人可以帮我解决这个新错误吗？

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_download_database);
    if(isOnline()){

        String contents=getContents("http://sourceforge.net/projects/ganjoor/files/gdb/");
        Log.i("download", contents);
    }
    else{
        Toast.makeText(this, "you are not connected to internet..Please check your connections", 1).show();
    }
}

          public static String getContents(String url) {
                String contents ="";

          try {
                URLConnection conn = new URL(url).openConnection();

                InputStream in = conn.getInputStream();
                contents = convertStreamToString(in);
           } catch (MalformedURLException e) {
                //Log.v("MALFORMED URL EXCEPTION");
           } catch (IOException e) {
               // Log.e(e.getMessage(), e);
           }

          return contents;
        }
          private static String convertStreamToString(InputStream is) throws UnsupportedEncodingException {

              BufferedReader reader = new BufferedReader(new     
                                      InputStreamReader(is, "UTF-8"));
                StringBuilder sb = new StringBuilder();
                 String line = null;
                 try {
                        while ((line = reader.readLine()) != null) {
                                sb.append(line + "\n");
                        }
                   } catch (IOException e) {
                        e.printStackTrace();
                   } finally {
                        try {
                                is.close();
                        } catch (IOException e) {
                                e.printStackTrace();
                        }
                    }
                return sb.toString();
          }
public boolean isOnline() {
    ConnectivityManager cm =
        (ConnectivityManager) getSystemService(this.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
} 
```

这是错误

```
 04-11 22:13:01.560: E/AndroidRuntime(18988): FATAL EXCEPTION: main
04-11 22:13:01.560: E/AndroidRuntime(18988): java.lang.RuntimeException: Unable to start activity ComponentInfo{co.tosca.persianpoem/co.tosca.persianpoem.Download_database}: android.os.NetworkOnMainThreadException
04-11 22:13:01.560: E/AndroidRuntime(18988):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at android.os.Looper.loop(Looper.java:137)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at android.app.ActivityThread.main(ActivityThread.java:4441)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at java.lang.reflect.Method.invokeNative(Native Method)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at java.lang.reflect.Method.invoke(Method.java:511)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at dalvik.system.NativeStart.main(Native Method)
04-11 22:13:01.560: E/AndroidRuntime(18988): Caused by: android.os.NetworkOnMainThreadException
04-11 22:13:01.560: E/AndroidRuntime(18988):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1108)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at co.tosca.persianpoem.Download_database.getContents(Download_database.java:62)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at co.tosca.persianpoem.Download_database.onCreate(Download_database.java:45)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at android.app.Activity.performCreate(Activity.java:4465)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-11 22:13:01.560: E/AndroidRuntime(18988):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
04-11 22:13:01.560: E/AndroidRuntime(18988):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:41:04.807

它接缝你在android上使用它。确保您获得使用互联网访问权限！将此添加到您的清单中：

好的，您在这里得到的是当您尝试连接到主线程中的网络时抛出的“NetworkOnMainThreadException”。为什么抛出它？：网络连接可能需要很长时间才能得到答案（想想你想在慢速互联网连接上下载一个大文件）。如果您在主要活动中开始此下载 - 活动将被阻止，直到下载完成。这意味着，用户不能触摸或使用任何东西。因此，这在 Android 中是被禁止的。

您必须在另一个线程中进行 URL 连接！我推荐[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html) impementation。使用 asynctask，您可以使结果在 GUI 中可见。

# java - Android：让我的 EditText 字段从其他方法借用变量？

> ID：15932192
> 
> 赞同：0
> 
> 时间：2013-04-10T17:09:25.257
> 
> 标签：java, android

我在 Java 方面有一点经验，而且我只是 Android 环境的新手。我之前在 Java 中创建了一个加密算法（使用简单的移位密码）。此后，我进行了更改以使其成功融入 Android 代码，但我还没有让它完全正常工作。计划是让用户在一个 EditText 字段中输入纯文本，在第二个字段中输入一个键，在第三个字段中输入他们的电子邮件。单击“发送”按钮后，密文将发送到他们的电子邮件。下面，我在注释中包含了 Java 版本的主要方法（现在在我的 onCreate 方法中）。

```
public class ScreenNext extends Activity {

int key = 0;
static char ch;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_screen_next);

    EditText emailT;//Import  EditTexts (Key and Email)  
    Button send = (Button) findViewById(R.id.bSend);//Import button1 (Send)         final EditText passT = (EditText) findViewById(R.id.etTogg);//passT variable for Password Text for EditText field
    final EditText keyT = (EditText) findViewById(R.id.etKey);
    final EditText passT = (EditText) findViewById(R.id.etTogg);//passT variable for Password Text for EditText field

    //convert the JOption Panes now into Android equivalents
    //String choice = JOptionPane.showInputDialog("(1) Encrypt \n"+ "(2) Close");
    //String subKey = JOptionPane.showInputDialog(null, "Enter your ideal key");
    //String message = JOptionPane.showInputDialog(null, "Enter message");
    //String cText = subcipher_1.message(choice, subKey, message);
    //JOptionPane.showMessageDialog(null, cText);//send cText as email

}//End onCreate

public static String message(String choice, String subKey, String message) {

    int Option = Integer.parseInt(choice);//Must pareseInt
    int key = Integer.parseInt(subKey);
    message = message.toLowerCase();

        //If the key is 26, prompt the user to change the key

        if (key % 26 == 0) {

            //Toast.makeText(getApplicationContext(), "You can't use a modulus of 26 as a key", Toast.LENGTH_LONG).show();

        }

    ScreenNext subcipher_1 = null;
    String CipherTxt = subcipher_1.encrypt(message, key);
    return CipherTxt;
}

// Message prompt method finished, now we create the method that has the
// encrypting algorithms
public static String encrypt(String Txt, int key) {

    //local var cipherText of type string is init empty
    String CipherTxt = "";//May be able to remove this'un 
    String cText="";
    //enhanced for loop 
    // start at 0, go until "as long as input text" 
    for (int i = 0; i < Txt.length(); i++) {
        //get a char from the string at index i (start at 0 work through to end of string)
        // and store in local var extractedChar for type char
        char extractedChar = Txt.charAt(i);
        /* enhanced for loop 
         * start at 0, go until end of user entered cipherKeyValue
         * either set to lowercase a or add one to the char
         * uses the checkifz method
         */
        for (int j = 0; j < key; j++) {
            ScreenNext subcipher_1 = null;
            if (subcipher_1.checkIfZ(extractedChar) == true) {
                extractedChar = 'a';
            } else {
                extractedChar++;
            }
            CipherTxt= new StringBuilder().append(extractedChar).toString();
        }
        //add extracted char to builder object
        //change object builder to string and assing to cipherText of type String
        //create new object builder from StringBuilder class
        cText = cText.concat(CipherTxt);
    }
    //Pass the cipherText value out of the method to whom ever called it

    return cText;
}
// public method properCase, makes all strings lowercase
public String properCase(String input) {
    if (input.length() == 0) {
        return "";
    }
    if (input.length() == 1) {
        return input.toLowerCase();//currently set to default; will shtill compile 
    }
    return input.substring(0).toLowerCase();//no locale set
}
//Check if the letter is Z so we can loop back to A
public static boolean checkIfZ(char cInput) {
    boolean yesNo = false;
    if (cInput++ == 0x7A) {
        yesNo = true;
    }
    return yesNo;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.screen_next, menu);
    return true;
} 
```

}

我自然知道 Android 中不存在 JOptionPane，因此我将提示用户在 EditText 字段中输入他们的输入。我有其中三个：用于纯文本输入的 passT，用于密钥输入的 keyT 和用于用户电子邮件的 emailT。

如何将 EditText 字段合并到加密和消息方法中的相应变量？

建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:17:15.610

`Send`向按钮添加 Click 侦听器，`onClick`事件从字段中获取值。

```
send.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    String keyText = keyT.getText().toString();
    String passText = passT.getText().toString();
}
}); 
```

# jquery - 使用jquery在phonegap中检索图像

> ID：15932194
> 
> 赞同：0
> 
> 时间：2013-04-10T17:09:26.587
> 
> 标签：jquery, cordova

谁能解释下面的代码？

```
function showImage(){
var imgs = $('#gallery img');
imgs.live('click', function(){
    var title = $(this).attr('title');
    $('#picture h1').text(title);
    $('#pic').html($(this).clone());

    $.mobile.changePage($('#picture'));
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:28:17.077

该代码将单击事件处理程序附加到所有 img 元素，并在单击时显示单个 img。

```
// get all img elements in #gallery
var imgs = $('#gallery img');
// bind a click handler on all img elements
imgs.live('click', function(){
    // get the title attribute of the clicked img
    var title = $(this).attr('title');
    // set h1 text to title and add the clicked img to our new page
    $('#picture h1').text(title);
    $('#pic').html($(this).clone());
    // switch to the new page
    $.mobile.changePage($('#picture'));
}); 
```

我假设单个 img 页面如下所示：

```
<div data-role="page" id="picture">
    <div data-role="content">
    <h1></h1>
    <div id="pic"></div>
    </div>
</div> 
```

# java - 文件移动不起作用

> ID：15932195
> 
> 赞同：0
> 
> 时间：2013-04-10T17:09:27.707
> 
> 标签：java, file-io, java-io

我正在使用以下方法将文件从一个文件夹（源）移动到另一个（目标）。我添加了一个检查以查看返回 true 的文件是否存在，但文件仍然没有移动到目的地。

这里的源路径是：

C:\App_v10.4\RAP009.jrxml 和 C:\App_v10.4\RAP009.jasper

目的地 ：

C:\Users\Avijit\Desktop\RAP009.jrxml 和 C:\Users\Avijit\Desktop\RAP009.jasper

```
private void moveFile(List<String> source, String destination)
        throws IOException {

    if (null != source && !source.isEmpty()) {
        for (String path : source) {
            try {
                File file = new File(path);
                System.out.println(path);
                System.out.println("File :" + file.exists());
                System.out.println(new File(destination + file.getName()));
                System.out.println(file.getCanonicalPath());
                System.out.println(file.getAbsolutePath());
                System.out.println(file.getPath());
                if (file.renameTo(new File(destination + file.getName()))) {
                    System.out.println("File is moved successful!");
                } else {
                    System.out.println("File has failed to move!");
                }

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

} 
```

控制台 O/P：

```
C:\App_v10.4\RAP009.jrxml

File :true
C:\Users\Avijit\Desktop\RAP009.jrxml

C:\App_v10.4\RAP009.jrxml

C:\App_v10.4\RAP009.jrxml

C:\App_v10.4\RAP009.jrxml

File has failed to move!

C:\App_v10.4\RAP009.jasper

File :true

C:\Users\Avijit\Desktop\RAP009.jasper

C:\App_v10.4\RAP009.jasper

C:\App_v10.4\RAP009.jasper

C:\App_v10.4\RAP009.jasper

File has failed to move! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T18:48:51.733

根据[File](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)的 api ，

“这种方法的行为的许多方面本质上是依赖于平台的：重命名操作可能无法将文件从一个文件系统移动到另一个文件系统，它可能不是原子的，如果具有目标抽象的文件可能不会成功路径名已存在。应始终检查返回值以确保重命名操作成功。"

所以有使用的警告`renameTo`。

但是，您的案例可能会遇到另一个问题。如果目录结构不存在，它将失败。在 Java 7 中，这已通过[Files.move](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move)修复。即使子目录不存在问题结果不是罪魁祸首，这种方法也会提供更可靠的性能。

# javascript - 检测图像是否被缓存

> ID：15932196
> 
> 赞同：1
> 
> 时间：2013-04-10T17:09:28.820
> 
> 标签：javascript, image, browser-cache, image-preloader

要知道图像是否在缓存中，可以在 Firefox 中使用 mozIsLocallyAvailable()。chrome或IE没有这样的东西。

你知道其他方法吗？

我尝试使用 Ajax 检查“304 未修改”，但 Ajax 似乎有自己的缓存系统。（每次关闭浏览器，ajax缓存都会被删除）

我的目标是检测我的访问者何时清理了他们的缓存，这样我就可以重新启动我的“后台预加载”系统（适用于具有大量图像的游戏）。我听说过一些关于 AppCache 的信息，但还不足以知道它是否可以存储多达 40mb 的图像，以及它是否可以在页面完成加载后下载它们。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:14:37.090

鉴于您所说的最终目标，我认为我要做的是让后台（预）加载过程始终发生，如果它没有在（比如说）250 毫秒或 500 毫秒内完成，请留言告诉用户发生了什么。如果在很短的时间内加载所有 40MB 的图像，您可以相当肯定它们来自缓存。:-) 相反，如果它们的加载时间超过 500 毫秒（半秒），那么您并不真正关心是因为它们正在被下载，还是由于某种原因用户的缓存真的很慢，您仍然可能想要告诉他们发生了什么事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:14:53.030

> 我的目标是检测我的访问者何时清理了他们的缓存，这样我就可以重新启动我的“后台预加载”系统

您可以在每个会话中预加载图像。如果浏览器将它们放在缓存中，则不会再次加载它们。只要确保您发送[正确的标题](https://developers.google.com/speed/docs/best-practices/caching)。

# php - ASyncTask HTTP 错误

> ID：15932198
> 
> 赞同：0
> 
> 时间：2013-04-10T17:09:37.187
> 
> 标签：php, android, mysql, json, android-asynctask

以下代码未从 PHP 文件中的这段代码接收到 PHP 文件的输出，即“羽毛球协会”：

```
print(json_encode($row['Description'])); 
```

如果有人能发现错误，那就太好了。'result' 和 'is' 都是空变量：

```
public class BackgroundAsyncTask extends AsyncTask<Void, String, Void> {

  protected Void doInBackground(Void... params) {
    //http post
    try{
      HttpClient client = new DefaultHttpClient();  
      HttpGet get = new HttpGet("http://ntusocities.host22.com/post.php");
      HttpResponse response = client.execute(get);  
      HttpEntity entity = response.getEntity();
      is = entity.getContent();
    } catch(Exception e){
      Log.e("log_tag", "Error in http connection "+e.toString());
    }
    //convert response to string
    try{
      BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
      StringBuilder sb = new StringBuilder();
      String line = null;

      while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
      }

      is.close();

      result=sb.toString();
    } catch(Exception e){
      Log.e("log_tag", "Error converting result "+e.toString());
    }

    //parse json data
    try {
      JSONObject userObject = new JSONObject(result);
      info = userObject.getString("Description");
    }
    catch(Exception ex){
    }   
    return null;
  }
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:59:36.977

您的网址`http://ntusocities.host22.com/post.php`返回`badminton society`字符串。这不是一个有效的 JSON，因此 JSON 解析失败也就不足为奇了。您需要修复服务器端以返回有效的 JSON。

什么是 JSON？-> [http://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)

如何检查 JSON 是否有效？-> [http://jsonlint.com/](http://jsonlint.com/)

此外，还有一种非常简单的方法可以将响应作为字符串获取：[https ://stackoverflow.com/a/4480517/247013](https://stackoverflow.com/a/4480517/247013)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:14:42.143

你在 AndroidManifest.xml 中添加了权限吗

```
<manifest xlmns:android...>
...
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

您提到的链接，提供数据

```
{"info":[{"SocietyID":"SOC003","Name":"Badminton","Type":"Sport","President":"Me","VicePresident":"You","ContactEmail":"me@gmail.com","Description":"badminton society"}]}<!-- some data-->

Just remove, '[' and ']' and "<!-- some data-->" from your response. I think the "some data part    is comment. 
```

其他一切都很好。

然后尝试此代码以获取值，

```
JSONObject userObject;
try {
userObject = new JSONObject(content);
JSONObject info = userObject.getJSONObject("info");
String name = info.getString("Name");
String type = info.getString("Type");
String description = info.getString("Description");
    // like this fetch all value/fields

Log.i("JOSN", name +", "+ type +", "+ description);
} catch (JSONException e) {
// TODO Auto-generated catch block
e.printStackTrace();
} 
```

一切顺利 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:26:42.833

好吧，url的输出是：

```
"badminton society"
<!-- Hosting24 Analytics Code -->
<script type="text/javascript" src="http://stats.hosting24.com/count.php"></script>
<!-- End Of Analytics Code --> 
```

意味着它不是 JSON，就像 Arhimend 已经提到的那样。但这不应阻止您获得有效的 InputStream。尝试这个：

```
protected Void doInBackground(Void... params) {
//http post
try{
  is = new java.net.URL("http://ntusocities.host22.com/post.php").openStream();
} catch(Exception e){
  Log.e("log_tag", "Error in http connection ", e);
}
... 
```

无论如何，代码将无法解析

```
 JSONObject userObject = new JSONObject(result); 
```

因为“结果”不是 JSON。

# ruby-on-rails - Rails rabl 设置计算字段

> ID：15932200
> 
> 赞同：0
> 
> 时间：2013-04-10T17:09:41.803
> 
> 标签：ruby-on-rails, json, rabl

我需要渲染一些 json 数据。我为此目的使用 rabl....

我在 index.rabl 中有这样的代码：

```
collection @banks, :root => "bank", :object_root => false
attributes :id, :central_office_address, :location_id, :name, :year_of_foundation 
```

它为我生成 json....
但现在我还需要为每个对象条目放置一些计算字段。

例如新字段（不在模型中）：：exch_count 并为它做类似（伪）：：exch_count @banks[i].exchangers.count * 3

但是我如何在 ruby​​ on rails + rabls 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:16:03.823

您可以将一个块传递给`node`使用银行作为参数的块：

```
node(:exch_count) {|bank| bank.exchangers.count * 3 } 
```

# c# - Windows Phone 移动服务中的唯一标识符始终为空

> ID：15932201
> 
> 赞同：0
> 
> 时间：2013-04-10T17:09:43.217
> 
> 标签：c#, azure, windows-phone-8, azure-mobile-services

我正在运行以下查询，并成功地从 Alarms 表中获取所有记录：

```
List<Alarms> items = await App.MobileService.GetTable<Alarms>().OrderBy(item => item.AlarmDate).ToListAsync(); 
```

唯一的问题是，对于每一行，标识字段始终显示为空 (0)。这可能是映射问题吗？这是我想念的东西吗？

这是与云中的表匹配的类：

```
public class Alarms
{
    public int Id { get; set; }//problem must be here
    public int PatientId { get; set; }
    public string AlarmType { get; set; }
    public DateTime AlarmDate { get; set; }
    public string AlarmName { get; set; }
    public bool IsEnabled { get; set; }
} 
```

此处的列名与云表中的列名匹配。我检查了三次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:18:10.700

尝试将您的 ID 属性设置为“Id”。我相信命名约定要求它是大写的“I”和小写的“d”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:41:24.753

试试这个：

```
[DataContract(Name = "Alarms")]
public class Alarms
{
    [DataMember(Name = "id")]
    public int Id { get; set; }

    [DataMember(Name = "PatientId")]
    public int PatientId { get; set; }

    [DataMember(Name = "AlarmType")]
    public string AlarmType { get; set; }

    [DataMember(Name = "AlarmDate")]
    public DateTime AlarmDate { get; set; }

    [DataMember(Name = "AlarmName")]
    public string AlarmName { get; set; }

    [DataMember(Name = "IsEnabled")]
    public bool IsEnabled { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:30:12.463

azure 移动服务不支持 Guid id 或主键。但是如果一个表有除主键以外的 Guid 列，那么您可以在修复 azure mobile service sdk 后获取这些 guid。

我更新了 Azure 移动服务 SDK 以解决 GUID/唯一标识符的问题。代码在github上。您可以在 Commits [https://github.com/vinodshinde/azure-mobile-services中看到我的更改](https://github.com/vinodshinde/azure-mobile-services)

# c# - 在 NHibernate Query 中使用 SubQuery 填充 DTO 的属性

> ID：15932202
> 
> 赞同：0
> 
> 时间：2013-04-10T17:09:44.873
> 
> 标签：c#, linq, nhibernate, hql, queryover

我有一个像这样的 DTO 对象：

```
public class TreeViewDTO
{
   public string Value { get; set; }
   public string Text { get; set; }
   public bool HasChildren { get; set; }
} 
```

我用 Nhibernate 映射的实体是：

```
public class Entity
{
   public virtual int Id { get; set; }
   public virtual string Name { get; set; }
   public virtual Entity Parent { get; set; }
   /* other properties */
} 
```

我想知道，如何获取我的 DTO 列表并使用计数方法或子查询填充 HasChildren 属性以了解是否有孩子？

我试过这个，但不起作用：

```
return Session.QueryOver<Entity>
                        .Select(entity => new TreeViewViewModel() {
                                                        Value = entity.Id.ToString(),
                                                        Text = entity.Name,
                                                        HasChildren = (Session.QueryOver<Entity>().Where(x => x.ParentId == entity.Id).RowCount() > 0)})
                        .ToList(); 
```

我有一个例外：`NotSupportedException`并且消息说：`x => (x.Parent.Id == [100001].Id)`并且它不受支持。

如何创建查询来填充此属性？

PS：我想查询只选择 Id、Name 和 Count……因为我的实体可以有 30 个或更多字段……

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:25:48.250

你没有考虑过使用其他东西而不是 NHibernate 来完成这项工作吗？
在我看来，像 Dapper 这样的轻量级库可以成为这个用例的绝佳解决方案。您最终会得到一个相当简单的 sql 查询，而不是使用 Nhibernate。

**编辑：**
简洁的代码将像这样简单：

```
public IDbConnection ConnectionCreate()
{
    IDbConnection dbConnection = new SQLiteConnection("Data Source=:memory:;pooling = true;");
    dbConnection.Open();
    return dbConnection;
}

public void Select()
{
    using (IDbConnection dbConnection = ConnectionCreate())
    {
        var query = @"SELECT e1.id as Value, e1.name as Text, CASE WHEN EXISTS
                        (SELECT TOP 1 1 FROM Entity e2 WHERE e2.parent = e1.id) 
                        THEN 1 ELSE 0 END as HasChildren
                    FROM Entity e1";
        var productDto = dbConnection.Query<TreeViewDTO>(query);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:00:31.590

使用 NHibernate Linq 提供程序，您可以执行以下操作：-

```
public class dto
{
    public long Value { get; set; }
    public int Count { get; set; }
    public bool HasCount { get { return Count > 0; } }
} 
```

注意：我的 DTO 有一个查看实际计数的只读属性，然后查询是：-

```
var a = Db.Session.Query<Support>().Select(
         s => new dto {
                        Value = s.Id,
                        Count = s.CommentList.Count
                      }
            ).ToList(); 
```

这会生成以下 SQL

```
select support0_.Id                                   as col_0_0_,
       (select cast(count(*) as SIGNED)
        from   supportcomment commentlis1_
        where  support0_.Id = commentlis1_.SupportId) as col_1_0_
from   support support0_ 
```

我从未见过使用`QueryOver`. 我曾经刺过它，但无法让它工作..

# android - 片段内的片段错误

> ID：15932203
> 
> 赞同：0
> 
> 时间：2013-04-10T17:09:50.790
> 
> 标签：android, android-fragments

我正在将 Activity 更改为 Fragment 以在 Scrollable Tab Activity 中使用。但是我得到了这个异常，我加载了这个片段：

```
FATAL EXCEPTION: main
android.view.InflateException: Binary XML file line #17: Error inflating class fragment
  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
  at com.zhensydow.demo.MainMenuFragment.onCreateView(MainMenuFragment.java:43)
  at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
    .... 
```

加载的使用的（简化的）xml是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    ... >
  <fragment   <<---- LINE #17
    android:id="@+id/mlist"
    android:name="com.zhensydow.demo.MListFragment"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    tools:layout="@android:layout/mcontent" />

    <FrameLayout ... />
</LinearLayout> 
```

错误是在此代码中引起的：

```
public class MainMenuFragment extends Fragment implements
        MenuListFragment.Callbacks {

    // ...

    @Override
    public View onCreateView( LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) 
    {
        super.onCreateView(inflater, container, savedInstanceState);

        LinearLayout ll = (LinearLayout) inflater.inflate(
                R.layout.activity_main_menu, container, false);

        return ll;
    }

    // ...

} 
```

错误在一个片段上，我认为这是因为旧活动在他体内加载了两个片段。

我该如何解决？

更新：添加了完整的片段 xml 数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:33:43.057

我怀疑您的 Fragment 包含一些类似[这样](https://stackoverflow.com/questions/13557930/callback-magic-in-master-detail-flow)的代码，要求您的 Activity 实现回调接口，而您的 Activity 没有实现该接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:40:25.667

标签必须`fragment`同时具有名称和 ID。

# google-maps - 带地图的用户资料

> ID：15932204
> 
> 赞同：0
> 
> 时间：2013-04-10T17:09:54.117
> 
> 标签：google-maps, drupal-7

我正在使用带有以下模块的 Drupal 7 在用户配置文件中显示它们的位置。

*   位置
*   地图

使用这些模块，可以构建地图视图，或者提供的位置节点在地图上显示“气泡”。

但是，我不知道如何在用户配置文件节点本身上显示位置图。

还有其他模块，例如 GMap CCK Field，但这意味着双输入位置。

我错过了什么，还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:23:48.720

如果您想在用户配置文件节点上显示地图视图，那么您将必须自定义编码用户配置文件模板文件并将视图添加到配置文件页面。然后这将很容易地显示在网站上。

另一种方法是创建一个显示地图视图的块，然后使用[上下文](http://drupal.org/project/context)模块仅在用户查看个人资料页面时显示此块。在视图中，您必须在“作者”上添加关系，然后您应该具有过滤条件以显示登录用户的地图。

结合上下文，您可以说“当用户位于路径为“www.xyz.com/user”的个人资料页面 X 上时，然后在区域 Z 中显示块 Y。”

# matlab - MATLAB 中的赋值错误

> ID：15932205
> 
> 赞同：0
> 
> 时间：2013-04-10T17:09:54.290
> 
> 标签：matlab

我无法修复此程序中的错误。该程序中的错误在以下行中：

```
mx(mslen+1:length(mx))=r; 
```

> ？？？在赋值 A(I) = B 中，B 和 I 中的元素数必须相同。错误 ==> oo 在 25 mx(mslen+1:length(mx))=r;

该程序是

```
clc;
clear all;
en=[1 0 0 0 0 0 0; ...   
    1 1 1 1 1 1 1; ...
    1 1 0 0 0 0 0; ...
    1 0 1 0 1 0 1; ...
    1 1 1 1 0 0 0; ...
    1 1 0 0 1 1 0; ...
    0 0 0 0 0 0 0; ...
    1 1 0 0 0 1 1; ...
    0 0 0 0 1 1 1]
m=en;
mslen=length(m);
patlen=input('\n Enter the length of the pattern : '); 

p(1:patlen)=1; 
p(2:patlen-1)=randint(1,patlen-2); 
mx=m; 
mx(mslen+1:mslen+patlen-1)=0; 
temp=mx(1:patlen); 
x=patlen; 
g=1; 
while(x<length(mx)+1) 
    r(1:patlen-1)=xor(temp(2:patlen),g*p(2:patlen)); 
    temp=r; 
    if x<(mslen+patlen-1) 
        temp(patlen)=mx(x+1); 
        g=r(1); 
    end 
    x=x+1; 
end 
mx(mslen+1:length(mx))=r; 
disp(sprintf('\n\n The transmitted frame is : ')); 
disp(sprintf('%d',mx)); 
temp=0; 
rx=mx; 
rx(randint(1,1,[1,length(rx)]))=randint(1,1); 
rx(randint(1,1,[1,length(rx)]))=randint(1,1); 
temp=rx(1:patlen); 
x=patlen; 
g=1; 
while(x<length(rx)+1) 
   rr(1:patlen-1)=xor(temp(2:patlen),g*p(2:patlen)); 
   temp=rr; 
   if x<length(rx) 
       temp(patlen)=rx(x+1); 
       g=rr(1); 
   end 
   x=x+1; 
end 
disp(sprintf('\n\n The received frame is : ')); 
disp(sprintf('%d',rx)); 
if sum(rr)==0; 
    disp(sprintf('\n\n No error in the received frame : ')); 
    disp(sprintf('\n\n The received data is : \n')); 
    disp(sprintf('%d',rx(1:mslen))); 
else 
    disp(sprintf('\n\n Error in the received frame !!!\n')); 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:44:45.887

以下更改使您的代码运行......因为它保证表达式两侧的内容具有相同的大小。这是否有意义我留给你弄清楚：

```
mx(mslen+(1:numel(r)) = r; 
```

当我这样做并运行您的代码时，它会显示一个传输帧和一个接收帧，但有一位差异，以及消息“接收帧错误！！！”

我怀疑这是你的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:23:19.583

错误很明显：`mslen+1:length(mx)`表达式的大小必须等于`r`.

的使用`length`是相当危险的。它总是返回最大维度的大小。它可以是行数或列数。`size(m,1)`用于行和列更安全`size(m,2)`。

变量`mslen`是 的长度`m`，而你有`mx=m`。这意味着当你这样做时，你`mslen+1:length(mx)`会得到空矩阵，因为`mslen+1`它大于`length(mx)`。

您的算法有问题，如果不查看代码，您将无法摆脱错误。

# scala - 为什么 getClass.getResourceAsStream(path) 在lift web中给出空的InputStream

> ID：15932206
> 
> 赞同：1
> 
> 时间：2013-04-10T17:09:56.890
> 
> 标签：scala, lift

我尝试了以下代码：

```
val stream = getClass.getResourceAsStream(path)
println(stream.read()) 
```

它打印-1。但是当我试图从上面的流中读取图像时，它会正确地给出图像。

```
val image = ImageIO.read(stream)
println(image.getHeight()) 
```

它打印正确的图像高度..那么为什么流 InputStream 是空的？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:12:08.457

要从 Liftweb 中获取资源文件，您应该使用“LiftRules.getResource(file)”。这样，它既可以在 *.war 包内部工作，也可以从普通文件夹工作。

例如，LiftRules.getResource(file).foreach(_.openStream().read())

# uri - 澄清 URI 路径组件？

> ID：15932210
> 
> 赞同：0
> 
> 时间：2013-04-10T17:10:08.010
> 
> 标签：uri, rfc, rfc3986

根据[RFC 3986 第 3 节 - 语法组件](https://www.rfc-editor.org/rfc/rfc3986#section-3)：

> 方案和路径组件是必需的，但路径可能为空（无字符）。

有人可以澄清如果路径组件可以为空，如何需要它？也许我在这种情况下误解了“必需”的定义，但我认为它的意思是“必须非空”，这显然与这里的规范相冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T20:19:38.240

在这里，“必需”仅意味着“始终存在”：绝对 URI 的方案和路径组件始终存在。

方案组件不能为空，因为产生式“方案”至少需要一个字符。

路径组件*可以*为空，因为产生式“path-empty”（“hier-part”的一部分）由零个字符组成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-02T02:39:29.700

*空路径（更准确地说，是空*路径）的一个常见实际示例是一个 URI，就像`http://stackoverflow.com`路径为空的地方一样。仅权限组件（在这种情况下是`stackoverflow.com`）不足以识别*资源*。

当权限为空时，路径必须以 a 开头，`/`以便将路径与权限区分开来 -`scheme:///`是一个有效的 URI - 因此是一个*空*路径。另请查看[此答案](https://stackoverflow.com/a/41403549/5327476)以进一步阅读。

# html - 一个 div 的旋转在 IE 上会出现黑色背景，我该如何删除它？

> ID：15932211
> 
> 赞同：3
> 
> 时间：2013-04-10T17:10:09.100
> 
> 标签：html, css

我正在使用这个 css 类来旋转一个`div`. 这目前不起作用，因为它在 IE9 上给出了黑色背景。我该如何删除这个？

```
.arrow-left {
  width: 0; 
  height: 0; 
  border-top: 70px solid transparent;
  border-bottom: 70px solid transparent;
  position:absolute;
  top:-45px;
  left:-11px;
  z-index:1;
  border-right:70px solid #009da6;
  -webkit-transform: rotate(45deg); 
  -moz-transform: rotate(45deg);  
  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=5); /*for IE8*/
  -o-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  transform: rotate(45deg);
} 
```

前

[![旋转前](https://i.stack.imgur.com/FGn3c.png)](https://i.stack.imgur.com/FGn3c.png)

后

![旋转后](https://i.stack.imgur.com/jvrob.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:47:43.330

我只是通过移除过滤线来纠正这个问题。我的代码现在是：

```
.arrow-left {
  width: 0; 
  height: 0; 
  border-top: 70px solid transparent;
  border-bottom: 70px solid transparent;
  position:absolute;
  top:-45px;
  left:-11px;
  z-index:1;
  border-right:70px solid #009da6;
  -webkit-transform: rotate(45deg); 
  -moz-transform: rotate(45deg);
  -o-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  transform: rotate(45deg);
} 
```

# c# - C# FTP - 覆盖文件

> ID：15932213
> 
> 赞同：-2
> 
> 时间：2013-04-10T17:10:16.280
> 
> 标签：c#, ftp

我正在尝试制作一个小应用程序，我可以在其中选择多个文件，设置间隔并设置 FTP 服务器信息。之后，它以给定的时间间隔上传文件。

我在FTP部分苦苦挣扎。我可以轻松地从这里复制/粘贴部分代码，但我认为这对我没有帮助。基本上我需要检查文件是否存在，如果存在，删除它并上传新版本，如果它不存在，只需上传文件。

怎么能以最简单的方式完成呢？我不是在寻找有关如何做到这一点的提示，而是在寻找更可取的实际代码，并带有关于什么做什么的评论。

编辑：根据这里的回复，我认为我正在寻找的是一种覆盖文件的方法。实际上这是我的第一个想法，但我找不到任何关于如何操作的信息，然后我就得出结论，我需要手动检查等等。我很抱歉这个错误。有人可以给我一个提示我需要覆盖什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T17:14:36.720

尝试这样的事情

```
var request = (FtpWebRequest)WebRequest.Create("ftp://ftp.myworld.com/file.txt");
request.Credentials = new NetworkCredential("username", "password");
request.Method = WebRequestMethods.Ftp.GetFileSize;

try
{
  FtpWebResponse response = (FtpWebResponse)request.GetResponse();

  // To delete file
  FtpWebRequest delRequest = (FtpWebRequest)WebRequest.Create(serverUri);
  delRequest.Credentials = new NetworkCredential("username", "password");
  delRequest.Method = WebRequestMethods.Ftp.DeleteFile;
  FtpWebResponse response = (FtpWebResponse) delRequest.GetResponse();
}
catch(Exception e)
{
   var response = (FtpWebResponse)ex.Response;
   if (response.StatusCode == FtpStatusCode.ActionNotTakenFileUnavailable)
   {
       //not exist
   }
} 
```

# c++ - 图像中的颜色减少不起作用

> ID：15932215
> 
> 赞同：0
> 
> 时间：2013-04-10T17:10:29.967
> 
> 标签：c++, visual-studio-2010, opencv, image-processing

请看下面的代码

```
#include <iostream>
#include <opencv2\highgui\highgui.hpp>
#include <opencv2\core\core.hpp>

using namespace std;
using namespace cv;

void reduceColor(Mat&,int=64);

int main()
{
    Mat image = imread("C:/Users/Public/Pictures/Sample Pictures/Koala.jpg");

    namedWindow("Image");
    imshow("Image",image);

    //reduceColor(image,64);

    waitKey(0);
}

void reduceColor(Mat &image,int division)
{
    int numberOfRows = image.rows;
    int numberOfColumns = image.cols * image.channels();

    for(int i=0;i<numberOfRows;i++)
    {
        uchar *data = image.ptr<uchar>(i);

        for(int pixel=0;pixel<numberOfColumns;pixel++)
        {
            data[i] = data[i]/division*division + division/2;
        }
    }

    namedWindow("Image2");
    imshow("Image2",image);

} 
```

这是计算机视觉。我正在尝试通过浏览所有像素和通道来读取图像并减少其颜色。但是，颜色并没有减少！它只是显示原始图像！请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:17:14.040

变量`i`在嵌套循环中永远不会增加`for`，但您正在设置`data[i]`. 所以很可能，第一列中的几个像素在函数调用之后发生了变化，但没有其他变化。

# jqgrid - jqGrid + Internet Explorer 5 Quirks 模式

> ID：15932216
> 
> 赞同：0
> 
> 时间：2013-04-10T17:10:30.060
> 
> 标签：jqgrid

有没有办法让 jqGrid 在 IE10 的 IE5 Quirks 模式下工作。

我正在使用 jqGrid 版本 4.4.5

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:59:49.650

jqGrid 不支持 Quirks Mode，也不支持 IE5。

我看不出有什么理由应该在 IE10 中模拟它。您可以启动开发人员工具（按`F12`）并在菜单“文档模式”中选择 IE5 Quirks，但在该模式下大多数 jQuery Plugins 包含 jqGrid 将不起作用。

# r - 将 ggplot2 中的函数与 R 中的时间轴叠加

> ID：15932219
> 
> 赞同：0
> 
> 时间：2013-04-10T17:10:30.993
> 
> 标签：r, function, datetime, ggplot2

我正在寻找一个非常具体的问题的答案。我在他们的页面上找到了在 ggplot2 中的绘图上叠加函数的方法：[http ://docs.ggplot2.org/current/stat_function.html](http://docs.ggplot2.org/current/stat_function.html)

但就我而言，我有一个在 Y 轴上使用时间的图。我的数据是：

```
dput(flN)
structure(list(eCenter = c(52, 85, 141, 227, 645), eLow = c(42, 
64, 112, 178, 546), eHigh = c(65, 112, 178, 290, 761), arrivalTime = structure(c(957173699, 
957173635, 957173496, 957173418, 957173338), class = c("POSIXct", 
"POSIXt"), tzone = ""), timeError = c(6.436288, 2.075383, 1.321365, 
1.270163, 3.422232), vCenter = c(125839365.727275, 154297213.515671, 
186197068.826928, 216301111.588418, 268912290.324273), vLow = c(114601800.781488, 
137454241.369541, 171493844.86893, 201095521.048661, 262431046.389897
), vHigh = c(138347098.798059, 171493844.86893, 201095521.048661, 
230862999.254391, 274537514.959924)), .Names = c("eCenter", "eLow", 
"eHigh", "arrivalTime", "timeError", "vCenter", "vLow", "vHigh"
), row.names = c("E1'", "E2'", "E3'", "E4'", "FP5'"), class = "data.frame") 
```

看起来像：

```
> flN
     eCenter eLow eHigh         arrivalTime timeError   vCenter      vLow     vHigh
E1'       52   42    65 2000-05-01 10:34:59  6.436288 125839366 114601801 138347099
E2'       85   64   112 2000-05-01 10:33:55  2.075383 154297214 137454241 171493845
E3'      141  112   178 2000-05-01 10:31:36  1.321365 186197069 171493845 201095521
E4'      227  178   290 2000-05-01 10:30:18  1.270163 216301112 201095521 230862999
FP5'     645  546   761 2000-05-01 10:28:58  3.422232 268912290 262431046 274537515 
```

其他数量是：

```
m = 574.2538
c = 3E8
y0 = flN$arrivalTime - m*c/flN$vCenter
y01 = y0[1] 
```

我尝试的代码是：

```
#this works and plots a part of what I want:
p <- ggplot(flN, aes(x=c/vCenter, y=arrivalTime)) + geom_point(aes(y=arrivalTime)) + geom_errorbarh(aes(xmin=c/vHigh, xmax=c/vLow)) + xlim(0, 3)  + ylim(as.POSIXct('2000/05/01 10:20'), as.POSIXct('2000/05/01 10:40')) 

# the function I want to plot. It's a simple straight line function
test <- function(x) {y01 +m*x}

# the code to plot this function over my previous plotted data that doesn't work:
p + stat_function(fun = test, colour="#F8766D", linetype="dashed")
> Error: Discrete value supplied to continuous scale 
```

现在，从错误来看，我认为问题一定是使用 Y 的时间轴，但我该如何解决这部分问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:09:11.550

似乎会`stat_function()`给出错误，因为它找不到变量`y01`并且`m`在全局环境中定义并计算其他内容或给出一些不连续的值。解决此问题的一种方法是`test()`通过添加`y01`和`m`作为参数然后`stat_function()`添加来修改您的函数`args=c(y01,m)`- 这将确保正确找到和使用参数。我也`ylim()`从你的`ggplot()`电话中删除了（至少对我来说它在数据区域之外）。

```
test <- function(x,y01,m) {y01 +m*x}

p <- ggplot(flN, aes(x=c/vCenter, y=arrivalTime)) + 
     geom_point(aes(y=arrivalTime)) + 
     geom_errorbarh(aes(xmin=c/vHigh, xmax=c/vLow)) + xlim(0, 3)

p + stat_function(fun = test,args=c(y01,m), colour="#F8766D", linetype="dashed") 
```

![在此处输入图像描述](https://i.stack.imgur.com/IvX7u.png)

# java - OSX-Terminal -jar 运行命令

> ID：15932227
> 
> 赞同：0
> 
> 时间：2013-04-10T17:11:09.817
> 
> 标签：java, eclipse, compiler-construction, coderunner

我曾经使用 Eclipse，但最近切换到 CodeRunner。问题是我应该使用 Graphviz、Batik 和我大学的一个包来完成一些项目。

只要有一个 .jar 文件，我就会设法使用我自己的一个简单的文件：

```
RunCommand: java -jar stopndrop.jar $compiler 
```

论据：

$1 源文件的文件名

$2 源文件的编码

在 CodeRunner 中设置的 $3 编译标志

$4 临时目录路径

```
javac "$1" -d "$4"/java-compiled -encoding ${enc[$2]} $3 -cp stopndrop.jar 
```

但是现在有了 Batik 和 College 文件夹，里面有一堆类，它们应该在需要时加载。

我的问题是：我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:25:08.023

假设您具有以下文件夹结构：

```
lib/
    a.jar
    b.jar
classes/
    com/
        foo/
            Bar.class
            Baz.class 
```

你需要链接所有这些东西来编译一些代码。然后您将指定为您的类路径：

```
-cp lib/a.jar:lib/b.jar:classes 
```

# unix - 如何在 ksh 中创建一个 0 字节的文件。

> ID：15932230
> 
> 赞同：5
> 
> 时间：2013-04-10T17:11:51.490
> 
> 标签：unix, ksh

这可能很明显，但谷歌似乎让我失望了。我需要在 Unix（AIX，ksh）上创建一个具有任意名称的零字节文件。有什么好的命令可以做到这一点。我显然可以编写脚本。

只是要清楚我没有做任何愚蠢的事情。这是生成某些测试场景的脚本。（检查处理 0 字节文件时的正确行为。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T17:13:18.557

我想到了。

`touch $filename`会做的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T18:53:58.390

保存您的击键和不必要的过程，重定向将：

```
$ > file
$ ls
file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:13:30.337

使用`dd`：

```
dd if=/dev/null of=zero.out bs=0 count=0 
```

# ruby - Heroku resque 没有工人

> ID：15932233
> 
> 赞同：3
> 
> 时间：2013-04-10T17:12:03.547
> 
> 标签：ruby, ruby-on-rails-3, heroku, ruby-on-rails-3.2, resque

我已经成功排队了一个工作，我可以在 resque web 中看到。

但这项工作永远不会执行，只是待定。我的 heroku 应用程序上有 1 名工作人员。在 resque stats 中，工人为 0。

在 lib/tasks/resque.rb 中：

```
require 'resque/tasks'

task "resque:setup" => :environment do
  ENV['QUEUE'] = '*'

  Resque.after_fork do |job|
    ActiveRecord::Base.establish_connection
  end

end

desc "Alias for resque:work (To run workers on Heroku)"
task "jobs:work" => "resque:work" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:26:04.967

你必须告诉 Heroku 通过`Procfile`. 这是您放置要在本地运行的命令的位置，例如`RAILS_ENV=Production QUEUE=* bundle exec rake jobs:work`

这为您在本地测试 Heroku Resque 设置提供了额外的好处，方法是使用相同`Profile`的方法启动带有 Foreman 的 Resque 工作人员。

[这](https://devcenter.heroku.com/articles/queuing-ruby-resque)是 Heroku 网站上的一个链接，它解释了如何进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T23:23:43.153

正如@messick 所说，您需要使用 Procfile 执行 resque 工作人员注册，以防万一您真的不关心已设置环境，只需在您的 Procfile 中添加以下行：

```
resque: env TERM_CHILD=1 COUNT=1 QUEUE=* bundle exec rake resque:work 
worker: bundle exec rake resque:work COUNT=1 QUEUE=* 
```

如果需要调度程序，只需添加此行

```
scheduler:  bundle exec rake resque:scheduler 
```

# java - 在 Java 中呈现 Android XML 布局

> ID：15932236
> 
> 赞同：3
> 
> 时间：2013-04-10T17:12:15.227
> 
> 标签：java, android, android-layout, rendering

我正在构建一个 Java 应用程序，它是某种 Android 应用程序（APK 文件）分析器。

该应用程序将提供的主要功能之一是 Android 布局的“预览”，因此我需要一个 API 来接收 Android 布局 XML 和一些配置参数，例如屏幕分辨率和主题，并返回呈现的布局将出现在运行应用程序的设备上（与真正的 Android 平台的图形一致性很重要）以及 View 对象的位置数据（以允许用户通过单击来选择视图）。在第一阶段，我不希望该功能反映以编程方式进行的布局更改，而只是反映 XML 中定义的 View 对象和资源图形。

我的想法是使用布局编辑器的源代码，例如 ADT 的编辑器或 DroidDraw，并将其集成到我的框架中，但后来我想知道 - 也许更好的方法是使用 android API 本身为我渲染布局（这更好，主要是因为我不需要为更高版本的操作系统重写我的代码）。

所以我的问题是：API 是否允许这样的操作？还是有更好的方法？

欢迎任何建议和见解:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:50:44.387

> API 是否允许此类操作？

如果您所说的“java 应用程序”是指在您的 PC 上运行的应用程序，那么不是。甚至在 Android API 中调用任何东西都没有直接的方法。我建议您采用集成一些现有源代码的第一种方法。

也就是说，这也不是一项简单的任务。此外，如果您正在分析 APK，您将使用二进制 XML 文件，而不是您在开发时看到的易于阅读的纯文本文件（假设是 ADT/DroidDraw 使用的）。也可能有源代码[来](http://code.google.com/p/android4me/downloads/list)处理这个问题。

您也可以考虑查看 Android 本身的源代码，但我想您必须重新实现一堆渲染代码，所以这也不是简单的出路。

> 在第一阶段，我不希望该功能反映以编程方式进行的布局更改，而只反映 XML 中定义的视图对象和资源图形。

以合理的方式反映以编程方式进行的布局更改几乎是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-16T08:46:24.337

这项任务绝对是可能的，但是，它一点也不简单。我建议看一下 Android Studio 的源代码，更具体地说，有一个名为[LayoutLib](https://github.com/JetBrains/android/tree/master/layoutlib)的工具。

这是 IDE 的布局预览/编辑器用于呈现布局的工具。您可以使用它来呈现您拥有源代码的布局和视图。不幸的是，它没有很好的文档记录，因此您必须从 IDE 的源代码中找出用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T16:10:54.703

开源的Itsnat 可以直接渲染加载的XML Android 布局文件。它有一个示例应用程序，将标准（二进制编译）版本与动态版本进行比较。我对它的工作表明它很好地再现了 LinearLayout/Relativelayout 等的所有怪癖。 [https://github.com/jmarranz/itsnat](https://github.com/jmarranz/itsnat)

# performance - 迭代给定大小的所有子集

> ID：15932237
> 
> 赞同：5
> 
> 时间：2013-04-10T17:12:19.680
> 
> 标签：performance, combinatorics

我知道迭代一组大小为 n 的所有子集是一场性能噩梦，需要 O(2^n) 时间。

如何迭代所有大小为 k 的子集（对于 (0 <= k <= n)）？这是一场表演噩梦吗？我知道有 (n, k) = n！/k！（n - k）！可能性。我知道如果 k 非常接近 0 或非常接近 n，这是一个很小的数字。

就 n 和 k 而言，最坏情况下的性能是多少？除了O（n！/ k！（n - k）！）之外，还有更简单的说法吗？这是渐近小于 O(n!) 还是相同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T18:56:09.367

你想要 Gosper 的 hack：

```
int c = (1<<k)-1;
while (c < (1<<n)) {
  dostuff(c);
  int a = c&-c, b = c+a;
  c = (c^b)/4/a|b;
} 
```

解释：

找到设置了尽可能多的位的下一个数字基本上可以简化为只有一个“一块”的数字的情况——数字有一堆零，然后是一堆一，然后在它们的二进制扩展中又是一堆零.

处理这样一个“1 块”数字的方法是将最高位向左移动一个，并将所有其他位尽可能低。Gosper`a`的hack 通过找到最低设置位 ( `b`- 重要的位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T00:33:00.840

很容易证明，对于一个固定的`n`，`(n, k)`有一个最大值在`k = n/2`。如果我没有误用 Sterling 的近似值，则 的渐近行为`(n, n/2)`是指数的。

对于常数`k`，`(n, k)`是`O(n^k)`。请记住，组合函数是对称的，因此对于`(n, n-k)`. 它是多项式的，所以它比 小得多`O(n!)`。

# c# - 实体框架中的“数据读取器有多个字段”错误

> ID：15932239
> 
> 赞同：33
> 
> 时间：2013-04-10T17:12:21.610
> 
> 标签：c#, .net, entity-framework

我正在使用 Entity Framework 执行这个简单的查询

```
db.Database.SqlQuery<string>("SELECT * FROM hospital"); 
```

但我得到了这个错误：

> 数据阅读器有多个字段。多个字段对 EDM 基元或枚举类型无效。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-10T17:31:28.200

查看医院表的外观会很有用，但假设像医院这样简单的东西由 HospitalId 和 HospitalName 组成，那么您有几个选择。

```
//would work if all you're trying to do is get the Name:
db.Database.SqlQuery<IEnumerable<string>>("SELECT hospitalName FROM hospital"); 

//where you define MyEntity as the same structure as the table would work
db.Database.SqlQuery<MyEntity>("SELECT * FROM hospital"); 

// would theoretically work although I haven't tried it.  Where the Tuple 
// items would have to match the database types in order.  I.e. if field 1 
// is an int and field 2 is a string then Tuple<int,string>
db.Database.SqlQuery<IEnumerable<Tuple<int, string>>>("SELECT * FROM hospital"); 
```

基本上错误是代码不知道如何将医院的结构填充到字符串中

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-03-16T17:05:39.563

如果您尝试执行`INSERT`,`UPATE`或`DELETE`命令，您也可能会收到此错误

而不是使用`SqlQuery`使用`ExecuteSqlCommand`

```
using (var ctx = new SchoolDBEntities())
{
    int noOfRowUpdated = ctx.Database.ExecuteSqlCommand("Update student 
            set studentname ='changed student by command' where studentid=1");

    int noOfRowInserted = ctx.Database.ExecuteSqlCommand("insert into student(studentname) 
            values('New Student')");

    int noOfRowDeleted = ctx.Database.ExecuteSqlCommand("delete from student 
            where studentid=1");
} 
```

有关更多详细信息，请访问 - [http://www.entityframeworktutorial.net/EntityFramework4.3/raw-sql-query-in-entity-framework.aspx](http://www.entityframeworktutorial.net/EntityFramework4.3/raw-sql-query-in-entity-framework.aspx)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-05-11T06:41:05.593

这解决了我的问题，一些结果没有达到预期的效果

```
string storedProcedure = "Admin_AutoGenerateKeywordsFortblCompany @Company_ID=" 
                          + CompId;

var s = db.ExecuteStoreQuery<List<string>>("exec " + storedProcedure).ToList(); 
```

这里可以捕获单个或多个结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:21:49.720

根据**cgotberg**给我的第二个答案，我将回答我自己的问题。该代码的问题是某些表的字段与数据库中的字段不同（我正在寻找异常但我找不到它，对此感到抱歉）但它确实存在。出于某种原因，我不得不将表的所有字段添加到查询字符串中。我的意思是，我必须写“SELECT **hospital_phone, holpital_street, etc, etc** FROM hospital”，如果我写“SELECT **hospital_name** FROM hospital”，就会发生异常。

希望我已经解释得很好。

# django - django 员工用户只管理自己的用户

> ID：15932243
> 
> 赞同：1
> 
> 时间：2013-04-10T17:12:34.777
> 
> 标签：django, django-models, django-admin, django-users

在我的 Django 应用程序中，用户可以注册到站点并从管理员那里获得 staff_user 权限。之后，员工用户可以使用默认的 django 管理站点创建和管理一些其他用户（普通用户）。现在，我想让员工用户只看到和管理他从管理站点创建的用户，我不希望他看到其他员工用户创建的其他用户。

我怎样才能做到这一点？我想我需要修改 admin.py 对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:16:10.047

不要修改管理站点。

通常，您可以使用以下工具：

*   创建组
*   将用户添加到组
*   在您的模型上创建自定义权限，以指示某些操作

[https://docs.djangoproject.com/en/1.4/topics/auth/#custom-permissions](https://docs.djangoproject.com/en/1.4/topics/auth/#custom-permissions)

但是，您要问的是：`Now, I would like to let the staff user see and manage only the users he created from the admin site`在 django-admin 中是不可能的。

Django-admin 站点**仅旨在为完全受信任的用户提供美化的开发工具**，而不是为最终用户提供可定制的应用程序。

如果您的项目需要具有以下任何一项的管理站点...

*   自定义管理功能。
*   暴露给任何不**完全**信任的用户。

...那么恐怕您必须创建自己的自定义应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:03:26.613

您可以用您自己的替换库存 UserAdmin，它会覆盖 queryset() 并进行过滤。更大的问题是过滤什么。默认用户模型不会在模型实例中存储“created_by”。因此，每当添加用户时，您都需要添加此信息。

如何最好地做到这一点取决于您的 Django 版本。Django 1.5 引入了一个“可配置的用户模型”，这使得这很容易。 [https://docs.djangoproject.com/en/dev/releases/1.5/#configurable-user-model](https://docs.djangoproject.com/en/dev/releases/1.5/#configurable-user-model)

在早期版本中，您要么必须对用户模型进行猴子补丁，要么将该信息存储在单独的“用户配置文件”中，以 1:1 附加到用户。 [https://docs.djangoproject.com/en/dev/topics/auth/customizing/#extending-the-existing-user-model](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#extending-the-existing-user-model)

关于 Django 管理员中对用户的信任（这不是一个主题，但我觉得有必要评论 thnee 的答案），请在此处查看我的答案中的链接：[我应该使用 Django 的管理员功能吗？](https://stackoverflow.com/questions/7382528/should-i-use-djangos-admin-feature/7382850#7382850)

# iphone - 图像/场景识别

> ID：15932244
> 
> 赞同：0
> 
> 时间：2013-04-10T17:12:35.230
> 
> 标签：iphone, ios, image, sdk, image-recognition

大家好，我正在寻找一种解决方案，使用户能够将图像与以前存储的图像进行比较。例如，我在 iPhone 上拍摄一张椅子的照片，然后将其与本地存储的图像进行比较，如果相似度合理，则确认该图像并调用另一个动作。

我能找到的大多数解决方案都需要在第三方服务器（Visioniq、moodstocks、kooaba 等）上进行云处理。这是因为 iPhone 没有足够的处理能力来完成这项任务吗？

一个小型参考库将存储在设备上，并在需要时进行参考。用户将能够索引他们自己的图片以进行识别。

有没有人听说过这样的解决方案？我的搜索只显示了来自上述 BaaS 提供商的云解决方案。

任何帮助都感激不尽。

问候， 弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:05:34.743

您可以尝试使用 FlannBasedMatcher 来匹配图像。文档和代码可在此处获得您可以在此处查看“[特征匹配 FLANN](http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html#feature-flann-matcher) ”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:21:58.450

尝试在 iOS 中使用 OpenCV 库

[开放式CV](http://opencv.willowgarage.com/wiki/)

# c# - 在 linq 中将实体对象的子对象加载到实体查询的更有效方法

> ID：15932249
> 
> 赞同：3
> 
> 时间：2013-04-10T17:12:42.727
> 
> 标签：c#, .net, performance, entity-framework, linq-to-entities

我有一个相当复杂的 linq 到我正在执行的实体查询，最后，我有一个结果集。我遍历该结果集，构建业务对象并返回该业务对象列表。它很快，问题是 2 个子属性是具有自己子对象的复杂对象。对于循环中的每个业务对象，我必须进行 2 次 DB 调用来填充其子对象。这两个电话减慢了整个过程，有没有更好的方法来做到这一点？这里是EF的菜鸟。(EF 4,SQL Server 2008,c#)

获取结果集：

```
var newresult = from r in result // result is another complex query
            join subedit in
                (from sa in context.Security_Access
                 join g in context.Security_UserGroup on sa.EntityID equals g.GroupID
                 where (sa.PrivledgeID == xx) && g.UserID == userId
                 select new { user = g.UserID, linkid = sa.LinkID }).Distinct() on new { aid = r.AssetId } equals new { aid = subedit.linkid } into theSubEdit
            from subEditAccess in theSubEdit.DefaultIfEmpty()
            join subdownload in
                (from sa in context.Security_Access
                 join g in context.Security_UserGroup on sa.EntityID equals g.GroupID
                 where (sa.PrivledgeID == xx|| sa.PrivledgeID == yy) && g.UserID == userId
                 select new { user = g.UserID, linkid = sa.LinkID }).Distinct() on new { aid = r.AssetId } equals new { aid = subdownload.linkid } into theSubDownload
            from subDownloadAccess in theSubDownload.DefaultIfEmpty()
            join subView in
                (from sa in context.Security_Access
                 join g in context.Security_UserGroup on sa.EntityID equals g.GroupID
                 where (sa.PrivledgeID == xx|| sa.PrivledgeID == yy|| sa.PrivledgeID == 101) && g.UserID == userId
                 select new { user = g.UserID, linkid = sa.LinkID }).Distinct() on new { aid = r.AssetId } equals new { aid = subView.linkid } into theSubView
            from subViewAccess in theSubView.DefaultIfEmpty()
            select new { r, EditAccess = (int?)subEditAccess.user, DownloadAccess = (int?)subDownloadAccess.user, ViewAccess = (int?)subViewAccess.user }; 
```

然后我遍历该结果集：

```
foreach (var asset in newresult)
{
    // and build a new business object, set its properties
    BoAsset boAsset = new BoAsset();
    boAsset.HasEditRights = (asset.EditAccess > 0);
    boAsset.HasDownloadRights = (asset.DownloadAccess > 0);
    boAsset.HasViewRights = (asset.ViewAccess > 0);
    boAsset.Description = asset.r.Description;
    boAsset.DetailedDescription = asset.r.DetailedDescription;
    boAsset.Keywords = asset.r.Keywords;
    boAsset.Notes = asset.r.Notes;
    boAsset.Photographer = asset.r.Photographer;
    boAsset.PhotographerEmail = asset.r.PhotographerEmail;
    boAsset.Notes = asset.r.Notes;
    boAsset.Author = asset.r.Author;

    // these 2 properties i've commented out are 
    // complex objects/entities, setting them the way I am 
    // requires me to call 2 separate methods which make 2 DB trips
    // per business object.

    //boAsset.Domains = GetAssetDomains(asset.r.AssetId);
    //boAsset.DomainEntries = GetAssetCustomDomains(asset.r.AssetId);

    myListofObjects.Add(boAsset);
}
 return myListofObjects; 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:22:16.567

只需将其添加`.Include("Domains").Include("DomainEntries")`到您的 Linq`in in context.Security_Access`中，即可一次性从这些表中获取行。

所以你的“内部”查询看起来像：

```
from sa in context.Security_Access.Include("Domains").Include("DomainEntries")
join g in context.Security_UserGroup on sa.EntityID equals g.GroupID
where (sa.PrivledgeID == xx) && g.UserID == userId
select new { ... 
```

这是来自 MS 的文档：http: [//msdn.microsoft.com/en-us/library/bb738708.aspx](http://msdn.microsoft.com/en-us/library/bb738708.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T16:33:56.780

如果您想提高性能，请使用编译查询！

您可以在此处查看示例。

```
 static readonly Func<AdventureWorksEntities, Decimal, 
 IQueryable<SalesOrderHeader>> s_compiledQuery2 =
 CompiledQuery.Compile<AdventureWorksEntities, Decimal, IQueryable<SalesOrderHeader>>((ctx, total) => 
from order in ctx.SalesOrderHeaders.Include("Orders") where order.TotalDue >= total select order); 
```

**[MSDN](http://msdn.microsoft.com/en-us/library/bb896297.aspx)**

和

您可以引入**Include**假设选择所有员工及其部门。如果您有导航属性，则根本不需要加入。您可以像这样使用包含：

```
List<Employee> employeesWithDepartments = CreateObjectSet<Employee>().
                                      Include(e => e.Department).
                                      ToList(); 
```

# css - 登录和注册按钮应保持固定在浏览器的右上角

> ID：15932254
> 
> 赞同：1
> 
> 时间：2013-04-10T17:13:02.007
> 
> 标签：css, html, login, css-position

我希望登录和注册链接或按钮应保持固定在浏览器窗口的右上角，并位于包装器 div 中。但是当我更改浏览器窗口大小时，按钮会消失或出现在标题上方。

HTML 代码有一个 login_bar div 部分，它有一个 ul 列表，然后是标题 div 部分

```
<div id="wrapper">
<div id="login_bar" style="text-align: right">                                               
            <ul id="login_signup">
                <li><a href="#" id="login_link">Login <span>&#x25c0;</span></a></li>
                <li><a href="#" id="sign_link">SignUp <span>&#x25c0;</span></a></li>
            </ul>
</div>

<div id="header">
</div>
</div> 
```

CSS 文件

```
#login_bar{
width:300px;        
position:fixed;
z-index:10;        
border:1px solid black;   
top:-5px;
right:150px;
}

#header{
width:1000px;    
background-image:url('../images/hf1.jpg'); 
background-size: 100%;
background-repeat: no-repeat;
position: relative;
border-radius:5px;
min-height: 100px;
}

#login_signup{
float:right;    
}

#login_signup > li{
float:left;    
padding-right: 30px;
list-style: none;
line-height:25px;
padding-top:6px;
display:inline-block;           
}

#login_signup li > a{
font-family:sans-serif;
font-size: 17px;
font-weight: bold;
color:white;
padding:5px;
display:inlineblock;
background-color:black;
border-radius:5px;
-moz-border-radius:5px;
-webkit-border-radius: 5px;
-o-border-radius:5px;

box-shadow: rgb(0,0,0) 0px 0px 10px;
-moz-box-shadow: rgb(0,0,0) 0px 0px 10px;
-webkit-box-shadow: rgb(0,0,0) 0px 0px 10px;
-o-box-shadow:rgb(0,0,0) 0px 0px 10px;
}

#login_signup li span{  
font-size: 12px;        
display:inlineblock;
}

#login_signup li a:hover{
cursor: pointer;
box-shadow: rgb(255,255,255) 0px 0px 5px;
-moz-box-shadow: rgb(255,255,255) 0px 0px 5px;
-webkit-box-shadow: rgb(255,255,255) 0px 0px 5px;
-o-box-shadow:rgb(255,255,255) 0px 0px 5px;
border-radius: 2px;
background-color: white;    
color:#006666;
} 
```

两个 div 部分都位于中心的包装器 div 内

```
#wrapper{
width:1000px;
min-height:600px;    
margin:5px auto;
border-radius:5px;
border-style: solid;
border:solid 1px grey;
box-shadow:rgb(0,0,0) 0px 0px 10px;
-moz-box-shadow: rgb(0,0,0) 0px 0px 10px;
-webkit-box-shadow: rgb(0,0,0) 0px 0px 10px;
-o-box-shadow:rgb(0,0,0) 0px 0px 10px;
background-color: black;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:38:23.423

我测试了您的原始设置，它似乎可以正常工作（至少从我理解您的问题的方式来看）。在 IE、Firefox 和 chrome 中对其进行了测试，看起来不错……在我使用的 html 文件的 css 下方：

```
<!DOCTYPE html>
<html>
<head>
<link href="test.css" rel="stylesheet" />
</head>
<body>
<div id="wrapper">
    <div id="login_bar" style="text-align: right">                                               
        <ul id="login_signup">
            <li><a href="#" id="login_link">Login <span>&#x25c0;</span></a></li>
            <li><a href="#" id="sign_link">SignUp <span>&#x25c0;</span></a></li>
        </ul>
    </div>
    <div id="header">
      test
    </div>
</div>
</body>
</html> 
```

测试.css：

```
#wrapper{
width:1000px;
min-height:600px;    
margin:5px auto;
border-radius:5px;
border-style: solid;
border:solid 1px grey;
box-shadow:rgb(0,0,0) 0px 0px 10px;
-moz-box-shadow: rgb(0,0,0) 0px 0px 10px;
-webkit-box-shadow: rgb(0,0,0) 0px 0px 10px;
-o-box-shadow:rgb(0,0,0) 0px 0px 10px;
background-color: black;
}

#login_bar{
width:300px;        
position:fixed;
z-index:10;        
border:1px solid black;   
top:-5px;
right:150px;
display:inline-block;
}

#header{
width:1000px;    
background-image:url('../images/hf1.jpg'); 
background-size: 100%;
background-repeat: no-repeat;
position: relative;
border-radius:5px;
min-height: 100px;
}

#login_signup{
float:right;   
/*display:inline; */
}

#login_signup > li{
float:left;    
padding-right: 30px;
list-style: none;
line-height:25px;
padding-top:6px;
display:inline-block;           
}

#login_signup li > a{
font-family:sans-serif;
font-size: 17px;
font-weight: bold;
color:white;
padding:5px;
display:inline-block;
background-color:black;
border-radius:5px;
-moz-border-radius:5px;
-webkit-border-radius: 5px;
-o-border-radius:5px;

box-shadow: rgb(0,0,0) 0px 0px 10px;
-moz-box-shadow: rgb(0,0,0) 0px 0px 10px;
-webkit-box-shadow: rgb(0,0,0) 0px 0px 10px;
-o-box-shadow:rgb(0,0,0) 0px 0px 10px;
}

#login_signup li span{  
font-size: 12px;        
display:inline-block;
}

#login_signup li a:hover{
cursor: pointer;
box-shadow: rgb(255,255,255) 0px 0px 5px;
-moz-box-shadow: rgb(255,255,255) 0px 0px 5px;
-webkit-box-shadow: rgb(255,255,255) 0px 0px 5px;
-o-box-shadow:rgb(255,255,255) 0px 0px 5px;
border-radius: 2px;
background-color: white;    
color:#006666;
} 
```

如果您以前在 IE 中遇到问题，您可能只是忘记`<!DOCTYPE html>`在 html 文件顶部添加...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:30:01.990

目前，您正在使用`position: fixed`and`right:150px;`对于您的`login_bar`，您需要更改正确的值以`0px`将其修复在右侧：

```
#login_bar{
    width:300px;        
    position:fixed;
    z-index:10;        
    border:1px solid black;   
    top:-5px;
    right:0px;
} 
```

以及删除`padding-right: 30px;`您的列表：

```
#login_signup > li{
    float:left;    
    padding-right: 30px; /* <-- Remove this */
    list-style: none;
    line-height:25px;
    padding-top:6px;
    display:inline-block;           
} 
```

**[演示](http://jsfiddle.net/9V8gc/)**

注意：我不确定这是否是您想要的，因此请随时要求更多说明。

# javascript - 在 Backbone 中，model.get('foo') 和 model.attributes.foo 之间有什么区别？

> ID：15932256
> 
> 赞同：2
> 
> 时间：2013-04-10T17:13:11.367
> 
> 标签：javascript, backbone.js

在 Backbone.js 中，有两种方法可以获取单个属性的值：

1.  `var foo = model.get('foo');`
2.  `var foo = model.attributes.foo;`

该`.get()`方法是文档中推荐的方法，但可能会慢一些，因为它涉及额外的函数调用。

我有什么理由不应该使用这种`.attributes`方法吗？是否存在会导致意外行为的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T20:56:07.407

这是一个封装问题。通过使用 get 方法，您说我不在乎它是如何实现的，我只想要那个属性。因此，将来如果您想覆盖您的 get 方法以返回更有意义的内容，您将不会在使用该属性的任何地方进行代码更改。

例如，如果您的模型有一个与之关联的属性成本，它是一个数字。

```
model.get('cost') //would give you that number say 1999.99 
```

现在将来假设您希望它返回格式化的字符串，您可以覆盖 get 方法。

```
model.get('cost') // same method would now give you $1999.99 or EUR 1999,99 in french :) 
```

此外，您正在减少代码量并提高可读性。

model.get('foo') 读起来比 model.attributes.foo 好得多；它也更短。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:39:31.830

正如您所提到的，在您的问题中，该`.get()`方法是文档中推荐的方法。尽管直接调用该属性会为您节省几纳秒，但您不应该这样做。

原因是它可能会鼓励阅读您的代码的人使用相同的方法来设置属性：`model.attributes.foo = 'blah';`

我可能不必告诉你这会很糟糕。代码可能看起来有效，因为您在模型上获得了正确的值，但是您绕过了主干中内置的所有更改跟踪逻辑。如果您以这种方式设置属性，则不会触发任何事件。

话虽这么说 - 如果没有其他人在阅读您的代码或更改您的代码，但您，并且您非常关心这些额外的纳秒*，*并且您知道您将来***永远不会***犯这种类型的错误。然后无论如何，直接使用 attributes 属性。

# java - java.awt.Color 对象的大小

> ID：15932257
> 
> 赞同：0
> 
> 时间：2013-04-10T17:13:12.647
> 
> 标签：java, jquery, sockets, lag, object-serialization

我有一个程序，我在套接字上使用 ObjectStream。我发送的类的代码如下所示。

```
class Snake{
Point[] p = new Point[50];
Direction move;
public int length;
int score;
String player;
Color snakecolor;
boolean gameover;
//Other Functions go here//    
} 
```

此类通过套接字重复发送。然而，它显示出一些滞后。如果我不发送 Color 对象而是发送 RGB 代码（整数值），它会产生很大的不同吗？我怎么可能让我的程序没有延迟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:20:08.480

从[文档](http://docs.oracle.com/javase/1.4.2/docs/api/serialized-form.html#java.awt.Color)中，以下字段`Color`被序列化：

```
int value
float[] frgbvalue
float[] fvalue
float falpha
ColorSpace cs 
```

`ColorSpace` [具有以下序列化字段](http://docs.oracle.com/javase/1.4.2/docs/api/serialized-form.html#java.awt.color.ColorSpace)：

```
int type
int numComponents 
```

`frgbValue`并`fvalue`包含 3 个元素，因此总大小为 40 个字节。仅发送 RGB 将是 12 个字节。我不认为这会解决你的滞后。

# sql - 桥接表主键或复合/复合键

> ID：15932258
> 
> 赞同：1
> 
> 时间：2013-04-10T17:13:17.730
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2012

对于桥牌桌，我有其他 2 张桌子的 PK。为桥表制作PK字段或在两个字段之间制作复合/复合的优点和缺点是什么。

我想确保我遵循最佳实践。

我正在阅读的一些链接：

[https://dba.stackexchange.com/questions/3134/in-sql-is-it-composite-or-compound-keys](https://dba.stackexchange.com/questions/3134/in-sql-is-it-composite-or-compound-keys)

[http://social.msdn.microsoft.com/Forums/en-US/sqlgetstarted/thread/9d3cfd17-e596-4411-b3d8-66e0ec8bfdc7/](http://social.msdn.microsoft.com/Forums/en-US/sqlgetstarted/thread/9d3cfd17-e596-4411-b3d8-66e0ec8bfdc7/)

[http://www.ben-morris.com/identity-surrogate-vs-composite-keys-in-sql-server](http://www.ben-morris.com/identity-surrogate-vs-composite-keys-in-sql-server)

[复合主键与唯一对象 ID 字段](https://stackoverflow.com/questions/159087/composite-primary-keys-versus-unique-object-id-field)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T17:22:37.667

您必须对两个外键强制执行某种唯一约束。最简单的方法是使用主键约束。

一个额外的代理 ID 号码并不是很有用。有些人使用它是因为它使外键约束和连接到“桥”表更容易编写。我认为，如果您认为很难使用两个整数进行连接，那么您首先不应该使用数据库。

# java - 在 onCreate 输入过滤器中使用来自 void 的值

> ID：15932260
> 
> 赞同：0
> 
> 时间：2013-04-10T17:13:21.683
> 
> 标签：java, android, android-edittext, diskspace, input-filter

我正在开发一个在`/cache`Android 设备的分区上生成交换空间的应用程序。它已经可以计算出交换的最大大小，但可以输入的最大数量仍然是静态的。

对于`EditText` `InputFilter`我使用这个：

```
@Override
protected void onCreate(Bundle savedInstanceState) {  
    ... 
    final EditText mb = (EditText) findViewById(R.id.editText1);
    mb.setFilters(new InputFilter[]{ new InputFilterMinMax("1", "120")});
    ...
} 
```

我的空虚是这样的：

```
// Check Disk Space and display
void readSpace(){
    execCommandLine("mount -o rw,remount /cache");
    File spacechecker = new File("/cache");
    long totalSpace = spacechecker.getTotalSpace();
    long usableSpace = spacechecker.getUsableSpace();

    TextView tsp = (TextView) findViewById(R.id.AmmountTotal);
    tsp.setText(totalSpace /1024 /1024 + " MB");

    TextView usp = (TextView) findViewById(R.id.AmmountAvailable);
    usp.setText(usableSpace /1024 /1024 + " MB");

    TextView rsp = (TextView) findViewById(R.id.AmmountRecommended);
    rsp.setText(usableSpace /1024 /1024 -20 + " MB");
} 
```

如何让 120 成为`long usableSpace`MB 的值？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:15:53.863

如果我理解正确，您想更改 TextView 的上限，是吗？

```
 mb.setFilters(new InputFilter[]{ new InputFilterMinMax("1", Long.toString(usableSpace / 1024 / 1024))}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:41:12.573

谢谢！现在我做对了！完成的工作代码是：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {  
         ...
         readSpace();
         ... 
         final EditText mb = (EditText) findViewById(R.id.editText1);
         ...
} 
```

和：

```
// Check Disk Space and display
void readSpace(){
    execCommandLine("mount -o rw,remount /cache");
    File spacechecker = new File("/cache");
    long totalSpace = spacechecker.getTotalSpace();
    long usableSpace = spacechecker.getUsableSpace();

    TextView tsp = (TextView) findViewById(R.id.AmmountTotal);
    tsp.setText(totalSpace /1024 /1024 + " MB");

    TextView usp = (TextView) findViewById(R.id.AmmountAvailable);
    usp.setText(usableSpace /1024 /1024 + " MB");

    TextView rsp = (TextView) findViewById(R.id.AmmountRecommended);
    rsp.setText(usableSpace /1024 /1024 -20 + " MB");

    EditText mb = (EditText) findViewById(R.id.editText1);
    mb.setFilters(new InputFilter[]{ new InputFilterMinMax("1", Long.toString(usableSpace /1024 /1024))});

} 
```

# vb.net - 为什么从同一类中的共享函数调用时无法访问重载的私有共享函数

> ID：15932265
> 
> 赞同：3
> 
> 时间：2013-04-10T17:13:30.450
> 
> 标签：vb.net

遇到了一些我觉得有趣的东西，并希望得到解释。

*编辑*

*这个问题并不是要回答应该采取什么措施来解决它。我知道修复。我想要解释为什么编译器会这样做。前任。在这种情况下是否不考虑私有功能？*

**问题**

我有一个类，它有一个名为 WhatIs 的公共共享（静态）函数。WhatIs 接受一个包含对象集合的参数。代码遍历这个集合并调用一个 WhatIs 函数，该函数的参数类型与对象是什么相匹配。

执行时，会引发 InvalidCastException 异常，因为执行尝试调用启动此的 WhatIs 函数，而不是所提供类型的函数。

这很奇怪，但让我感到奇怪的是，当您将私有共享功能更改为公共共享时，它工作正常。

更奇怪的是，当您显式转换对象时，即使该函数是私有的，它也可以工作。

什么？！有人请解释

**代码**

*胆量：*

```
Public Class House
    Public Property Furniture As ICollection(Of Object)

    Public Sub New()
        Furniture = New List(Of Object)
    End Sub
End Class

Public Class Chair
    Public Property IsComfortable As Boolean
End Class

Public Class Table
    Public Seats As Integer
End Class

Public Class HouseExaminer
    Public Shared Function WhatIs(thing As House) As String
        Dim isA As String = "a house that contains "

        For Each item In thing.Furniture
            isA &= WhatIs(item)
        Next

        Return isA
    End Function

    Private Shared Function WhatIs(thing As Chair) As String
        Return "a " & If(thing.IsComfortable, "comfortable", "uncomfortable") & " chair "
    End Function

    Private Shared Function WhatIs(thing As Table) As String
        Return "a table that seats " & thing.Seats & " iguanas"
    End Function
End Class 
```

*去测试*

```
Imports System.Text
Imports Microsoft.VisualStudio.TestTools.UnitTesting
Imports stuff

<TestClass()>
Public Class HouseExaminerTests

    <TestMethod()>
    Public Sub TestWhatIs()
        Dim given As New House()
        Dim expected As String
        Dim actual As String

        given.Furniture.Add(New Chair() With {.IsComfortable = True})
        given.Furniture.Add(New Table() With {.Seats = 4})

        expected = "a house that contains a comfortable chair a table that seats 4 iguanas"
        actual = HouseExaminer.WhatIs(given)

        Assert.Equals(expected, actual)
    End Sub
End Class 
```

*结果*

调试测试，你会得到这个： InvalidCastException Method invocation failed because 'Public Shared Function WhatIs(thing As stuff.House) As String' 不能用这些参数调用：

参数匹配参数 'thing' 无法从 'Chair' 转换为 'House'。

**这些变化使它工作，但为什么呢？！**

*公开他们*

将 HouseExaminer 中的私有共享函数更改为 public，重新运行测试。扰流板，它有效

*显式转换对象*

将它们改回私有然后替换

```
isA &= WhatIs(item) 
```

和

```
If TypeOf item Is Chair Then isA &= WhatIs(CType(item, Chair))
If TypeOf item Is Table Then isA &= WhatIs(CType(item, Table)) 
```

重新运行测试，你知道什么，它有效

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:26:20.300

首先，您似乎打开了隐式转换。这就是问题的开始。其次，您定义`Furniture`为`List(of Object)`. 你的第一个电话`WhatIs`是成功的。编译器在传递*它所*看到的内容时对使用哪个重载进行了最佳猜测，`Object`因为它在迭代时很简单`thing.Furniture`，并且它确定该`WhatIs`方法的公共静态版本是最合适的。然后它尝试隐式转换`Object`为`House`，并且不可避免地失败。

为什么铸造有效？因为它在确定使用哪个重载时需要猜测。

故事的寓意是：不要让编译器猜测。隐式转换会导致棘手的错误。

**编辑**： *为什么编译器看不到其他重载函数？*

*编译器必须确定要在编译时*使用的正确重载。它不会等到运行时才确定要使用哪个重载，因此没有检查对象类型以确定最合适的重载的奢侈。

由于编译器只知道它`furniture`是 a `List(Of Object)`，因此从技术上讲（启用隐式转换）所有三个重载都被认为是“适当的”，但编译器必须选择一个。它对可能的过载候选者进行排名，并选择优先`public`于那些的版本`private`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:32:15.537

1.  **始终**使用

     **选项严格开启** 
***   您不能通过添加名称相同的方法来使其更灵活，只是使用不同的参数类型。** 

 ****更新**

```
Private Function ShowMe(data As Integer) As String
    Return data.ToString
End Function

Private Function ShowMe(data As String) As String
    Return data
End Function

Private Function ShowMe(data As Double) As String
    Return data.ToString
End Function

Dim bla As New List(Of Object) 
```

如果你再打电话

```
 bla.Add(12)
    bla.Add("hi")
    bla.Add(1.2)
    Dim text As String
    text = ShowMe(bla(0))
    text = ShowMe(bla(1))
    text = ShowMe(bla(2)) 
```

那么编译器总是会抱怨不存在正确的方法，因为正确的方法不是通过检查类型来选择的，而是通过定义选择的，容器是为哪种类型定义的。

```
Private Function ShowMe(data As Object) As String
    Return data.ToString
End Function 
```

这将对所有整数、双精度数和字符串调用。如果它不可用，则使用一些可以进行某种自动转换的方法。这就是为什么您可以将整数放入浮点数或将数字放入字符串的原因。

一种方法是检查其类型并进行显式类型转换

```
 For Each ele As Object In bla
        If TypeOf ele Is Integer Then
            text = ShowMe(CInt(ele))
        ElseIf TypeOf ele Is Double Then
            text = ShowMe(CDbl(ele))
        Else
            text = ShowMe(CStr(ele))
        End If
    Next 
```

但这仍然不是那么干净。如果你想访问所有对象都应该支持的属性，那么将它们放在一个容器中并将类型定义为确保这些属性存在的东西。**

# iphone - 详细信息披露指示器 MKMap 到自定义视图控制器

> ID：15932270
> 
> 赞同：0
> 
> 时间：2013-04-10T17:13:48.930
> 
> 标签：iphone, xcode, annotations, mkmapview, mapkit

**添加了额外的代码**

我是 xcode 的新手。我设法在我的地图上创建了各种不同颜色的注释。我想做的是让每个注释都指向带有披露按钮的新位置。我已经实现了一个右箭头显示按钮，现在我需要知道的是如何将它链接起来，以便每个注释都会导致我选择的不同视图控制器。这是我的 MapViewController 实现的当前代码。

MainMapViewController.m

```
#import "MainMapViewController.h"
#import "LocationAnnotation.h"

@interface MainMapViewController ()

@end

//Totnes Main Centre Coordinates
#define Totnes_LATITUDE 50.433741
#define Totnes_LONGITUDE -3.685797

//The Dartmouth Inn Coordinates
#define DARTMOUTH_INN_LATITUDE 50.430036;
#define DARTMOUTH_INN_LONGITUDE -3.683873;

//Pub Offers Co-Ordinates

#define TheKingBill_LATITUDE 50.431379
#define TheKingBill_LONGITUDE -3.685495

#define TheSevenStars_LATITUDE 50.431045
#define TheSevenStars_LONGITUDE -3.682945

#define TheLordNelson_LATITUDE 50.430931
#define TheLordNelson_LONGITUDE -3.683644

//Span
#define THE_SPAN 0.01f;

@implementation MainMapViewController

@synthesize mainMapView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    //Set Delegate
    mainMapView.delegate = self;

    //Create the region
    MKCoordinateRegion myRegion;

    //Centre
    CLLocationCoordinate2D centre;
    centre.latitude = Totnes_LATITUDE;
    centre.longitude = Totnes_LONGITUDE;

    //Span
    MKCoordinateSpan span;
    span.latitudeDelta = THE_SPAN;
    span.longitudeDelta = THE_SPAN;

    myRegion.center = centre;
    myRegion.span = span;

    //Set The Map View
    [mainMapView setRegion:myRegion animated:YES];

    //Annotation

    NSMutableArray * locations = [[NSMutableArray alloc] init];
    LocationAnnotation * myAnn;

    //The King Bill Annotation
    myAnn = [[LocationAnnotation alloc] initWithTitle:@"The King Bill"
                                          andSubtitle:@"Another Pub In Town"
                                        andCoordinate:CLLocationCoordinate2DMake(TheKingBill_LATITUDE, TheKingBill_LONGITUDE)
                                                andID:1];
    [locations addObject:myAnn];

    //The Seven Stars Annotations
    myAnn = [[LocationAnnotation alloc] initWithTitle:@"The Royal Seven Stars Hotel"
                                          andSubtitle:@"Hotel In Town"
                                        andCoordinate:CLLocationCoordinate2DMake(TheSevenStars_LATITUDE, TheSevenStars_LONGITUDE)
                                                andID:2];
    [locations addObject:myAnn];

    //The Lord Nelson Annotations
    myAnn = [[LocationAnnotation alloc] initWithTitle:@"The Lord Nelson"
                                          andSubtitle:@"Great Pub In Centre of Town"
                                        andCoordinate:CLLocationCoordinate2DMake(TheLordNelson_LATITUDE, TheLordNelson_LONGITUDE)
                                                andID:3];
    [locations addObject:myAnn];

    [self.mainMapView addAnnotations:locations];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - MKMapViewDelegate

- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation {
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    MKPinAnnotationView *annView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"pin"];

    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    annView.rightCalloutAccessoryView = rightButton;

    int annId = ((LocationAnnotation *)annotation).idNumber;
    annView.pinColor = (annId == 1) ? MKPinAnnotationColorPurple
    : (annId == 2) ? MKPinAnnotationColorGreen
    : MKPinAnnotationColorRed;
    annView.canShowCallout = YES;
    return annView;

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:10:33.590

如您所见，您的右键类型为`UIButton`。由于这个事实，您可以向其添加目标：

```
[rightButton addTarget:self action:@selector(YourMethod) forControlEvents:UIControlEventTouchUpInside]; 
```

用户点击`rightButton` `YourMethod`后将启动。因此，对于每个引脚，您可以使用不同的方法添加不同的按钮，以您设置的相同方式`AnnotationColor`

```
int annId = ((LocationAnnotation *)annotation).idNumber;
if (annId == 1)
{
    annView.pinColor = MKPinAnnotationColorPurple;
    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    annView.rightCalloutAccessoryView = rightButton;
    [rightButton addTarget:self action:@selector(MethodWhereYouWillFireYouNewViewController) forControlEvents:UIControlEventTouchUpInside];

}
else if (annId == 2)
{
    //similar as above
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:49:42.757

检查这个：

-(void)clickOnMapAnnotation:(UIButton*)sender

{

int AnnotationClicked =sender.tag;

```
if(AnnotationClicked ==1)
{
    //PushViewcontroller1
}
else
{
      //PushViewcontroller1
} 
```

}

*   (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id) 注释 {

    if ([annotation isKindOfClass:[MKUserLocation class]]) 返回零；

    MKPinAnnotationView *annView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"pin"];

    int annId = ((LocationAnnotation *)annotation).idNumber; annView.pinColor = (annId == 1) ？MKPinAnnotationColorPurple : (annId == 2) ？MKPinAnnotationColorGreen : MKPinAnnotationColorRed;

    //我要引导到新视图控制器的详细信息披露按钮。

    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure]; [rightButton addTarget:self action:@selector(clickOnMapAnnotation:) forControlEvents:UIControlEventTouchUpInside]; rightButton.tag = AnnId;

    annView.rightCalloutAccessoryView = rightButton;

    annView.canShowCallout = 是；

    返回安视图；

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:16:27.037

将 rightbutton 的标签设置为 anniID。

rightButton.tag = AnnId;

然后将 Selector 分配给 touchup 事件： [rightButton addTarget:self action:@selector(YourMethod:) forControlEvents:UIControlEventTouchUpInside];

在 YourMethod 中，您可以使用 senders 标签导航到不同的视图

-(void)YourMethod:(UIButton*)sender { if(sender.tag==1)

{

//推送视图控制器1

}

别的

{

//推送视图控制器

}

返回; }

# javascript - 在 ECMAScript 上使用扩展语法的 JSDoc

> ID：15932271
> 
> 赞同：1
> 
> 时间：2013-04-10T17:13:52.897
> 
> 标签：javascript, jsdoc

谁能告诉我是否可以在 JavaScript（更像 ECMAScript）上使用带有一些附加功能的 JSDoc？例如，我有这样的代码：

```
function(a : String, b : Number) : Object {
    // do some stuff here
} 
```

如您所见，它几乎是 JavaScript，但可以指定参数类型和返回值。那么我可以在这种语法上以某种方式使用 JSDoc 吗？有什么方法可以为它编写某种插件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:26:48.860

对不起，我之前在打电话，我现在可以更详细地回答。

首先，我认为您将 JSDoc 与其实现混淆了。JSDoc 只是人们记录 Javascript 代码的标准方式。它本身不是一个程序，它不做任何事情。现在，有些程序知道 JSDoc 并基于它提供某些功能。例如，IDE 可能会在将鼠标悬停在方法上时显示 JSDoc。因此，如果您愿意，您可以在任何您想使用的地方使用 JSDoc，包括在不同语言的代码中。但是，如果您希望利用 JSDoc 的程序来识别它，那么您就会遇到一些问题。

我非常怀疑任何当前的 JSDoc 程序将识别除严格 Javascript 之外的任何语言的格式。我下载了 jsdoc-toolkit，这绝对是真的，而且可能对大多数人来说都是真的。如果您真的需要 JSDoc 来处理该代码，您可能必须自己编写某种程序（或编辑程序）。除非这个 ECMAScript 的超集是一种通用语言，在这种情况下可能会有一个程序存在。

# sql - 加入两种不同格式的变量

> ID：15932272
> 
> 赞同：1
> 
> 时间：2013-04-10T17:13:54.557
> 
> 标签：sql

我有一个问题，表 X 中有出生年份属性（格式：yyyy）以及表 Y 中的出生日期属性（不同格式：dd-mm-yyyy）。

它们都是 varchar() 类型属性。我想在这些属性上加入这些表。例如，我想选择所有同一年出生的人的名字。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:21:51.153

（更新）假设出生日期属性始终将最后四个字符作为年份，请尝试：

```
select...
from X
join Y on X.year_of_birth = substr(Y.date_of_birth, length(Y.date_of_birth)-3,4) 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!5/4fc63/2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:29:29.310

尝试使用[`DATE_FORMAT()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

```
JOIN table2 ON DATE_FORMAT(table1.bday, "%Y") = DATE_FORMAT(table2.bday, "%Y") 
```

# css - 如何不显示父母的背景

> ID：15932273
> 
> 赞同：0
> 
> 时间：2013-04-10T17:13:57.937
> 
> 标签：css, background-image

我有一个`div`，它有一个背景图像。但我终于明白，我忘记`div`了底部的另一个背景。所以我使用了`:after`伪并插入了一个。

进入的背景`:after`应该是一个透明的图像，可以很好地与身体的背景一起褪色。但是现在父级的背景`div`正在落后于`:after`伪元素中的内容。

有什么办法可以让父级的背景`div`不在我的`:after`伪元素中显示？

**编辑** 这里是我的代码

```
.foo{
    height: 30px;
    padding-bottom: 20px;
    background: url(i/myimage.png) no-repeat;
}
.foo:after{
    display: block;
    position: absolute;
    right: 0;
    background: url(i/pseudo-elem-bg.png) no-repeat;
    content: ' ';
    height: 20px; /*takes the bottom padding
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:24:00.697

[`::after`伪元素](https://developer.mozilla.org/en-US/docs/CSS/%3a%3aafter)添加了一个元素，它是父选择器的最后一个子元素，而不是兄弟元素（因此，在*selected****之后****的元素***），因此如果子背景为 ，则显示父元素的背景是很自然的`transparent`。**

 **您可能需要使用伪元素以外的其他解决方案，例如真实元素。查看您拥有的当前代码可能有助于为您的案例找到最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:24:54.117

如果您创建伪元素只是为了添加另一个背景，您可以设置多个背景，它们将按照您设置的顺序显示。

就像是：

```
div {
  background: url(bg.png),
              url(otherbg.png);
  background-position: center top,
                       center bottom;
} 
```

您可以使用其他背景属性并以相同的方式对其进行排序。**

# c++ - 在基于数组的列表上实现选择排序

> ID：15932275
> 
> 赞同：0
> 
> 时间：2013-04-10T17:14:07.983
> 
> 标签：c++, arrays, list, sorting, selection-sort

我的问题是我做错了什么。插入功能无法正常工作。我无法检索列表本身。因此，我的选择排序不会执行。任何帮助，将不胜感激。

标题：

```
/** @file ListA.h */
#include <string>
using namespace std;
const int MAX_LIST = 100;
typedef string ListItemType;
class List
{

public:
   List();
   bool isEmpty() const;
   int getLength() const;
   void insert(int index, const ListItemType& newItem, bool& success);
   void retrieve(int index, ListItemType& dataItem, bool & success) const;
   void remove(int index, bool& success);
   int selectionSortArray(int numdata[], int xnums);
   List selectionSort(List selectList);
private:
    ListItemType items[100];
    int size;
    int translate(int index) const;
}; 
```

共产党：

```
/** @file ListA.cpp */
#include "ArrayList.h"  // header file
#include <iostream>
#include <fstream>
List::List() : size()
{
}
bool List::isEmpty() const
{
   return size == 0;
}
int List::getLength() const
{
   return size;
}
void List::insert(int index, const ListItemType& newItem, bool& success)
{
   success = (index >= 1) &&
             (index <= size + 1) &&
             (size < MAX_LIST);
   if (success)
   {
      for (int pos = size; pos >= index; --pos)

         items[translate(pos + 1)] = items[translate(pos)];
      items[translate(index)] = newItem;

      ++size;

   }

}
void List::remove(int index, bool& success)
{
   success = (index >= 1) && (index <= size);
   if (success)
   {
      for (int fromPosition = index + 1;
       fromPosition <= size;
       ++fromPosition)
         items[translate(fromPosition - 1)] = items[translate(fromPosition)];
      --size;  // decrease the size of the list by one
   }  // end if

}  // end remove

void List::retrieve(int index, ListItemType& dataItem,
bool& success) const
{
   success = (index >= 1) && (index <= size);
   if (success)
      dataItem = items[translate(index)];
}

int List::translate(int index) const
{
   return index - 1;
}

//List List::selectionSort(List selectList)

//{

//return selectList;

int List::selectionSortArray(int numdata[], int xnums)
{
int tmp;
for (int i = 0; i < xnums -1; i++)
        for (int j = i+1; j < xnums; j++)
            if (numdata[i] > numdata[j])
            {
                tmp = numdata[i];
                numdata[i] = numdata[j];
                numdata[j] = tmp;
            }
    //for( int i = 0; i < 5; i++)
        //cout << numdata[i] << " "; 
        return *numdata;
}

 int main()
 {
 ListItemType insertType = "listItem1";
 ListItemType retrieveType = "listitem2";
 int numberofitems;
 cout << "Please enter the number of data items:" << endl;
 cin >> numberofitems;
 cout << endl;
 cout << "Please enter the data items, one per line:" << endl;
 int listofitems[numberofitems];
 List myArrayList;
 cout << myArrayList.getLength() << endl;
        if (myArrayList.isEmpty())  // tests before
    {
        cout << "This list is empty \n" << endl;
    }
    else
    {
        cout << "List is not empty! \n"<< endl;
    }
 bool mainsucc = true;
 for (int i = 0; i<numberofitems; i++)
 {
 cout << "Enter number " << i+1 << " : " << endl;
 cin >> listofitems[i];
 }
 for (int i =0; i <numberofitems; i++){
 myArrayList.insert(listofitems[i],  insertType, mainsucc);}
 cout << "Size of the list is : " << myArrayList.getLength() << endl;
int listRetrieveSize = myArrayList.getLength();
int listRetrieve[listRetrieveSize];
for (int j=0; j<listRetrieveSize; j++)
 {
 myArrayList.retrieve(listofitems[j], retrieveType, mainsucc);
}
if (myArrayList.isEmpty())  // tests after
    {
        cout << "This list is empty \n" << endl;
    }
    else
    {
        cout << "List is not empty! \n"<< endl;
    }
numberofitems= myArrayList.selectionSortArray(listofitems, numberofitems);
for (int i=0;i>numberofitems;i++)
{
cout<<listofitems[i];
}
 return 1;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:21:30.750

您的选择排序肯定是错误的：

```
int List::selectionSortArray(int numdata[], int xnums)
{
   int tmp; 
   for (int i = 0; i < xnums -1; i++) {
      //you should find the smallest integer inside this for loop
      for (int j = i+1; j < xnums; j++) {
          if (numdata[i] > numdata[j])
          {
              //why do you swap inside this for loop?
              tmp = numdata[i];
              numdata[i] = numdata[j];
              numdata[j] = tmp;
          }
      }//missing closing }
      //smap numdata[i] with currently smallest int

   }//missing closing }
  return *numdata;
} 
```

您的插入函数处理字符串，但您正在对整数进行选择排序。

```
 typedef string ListItemType; 
```

定义`string`为`ListItemType`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T22:19:33.543

我很确定您实现的是[冒泡排序算法](http://en.wikipedia.org/wiki/Bubble_sort)，而不是[选择排序算法](http://en.wikipedia.org/wiki/Selection_sort)。

# c# - 在 C# 中为 Urls 以及本地和网络路径转义命令行参数

> ID：15932279
> 
> 赞同：0
> 
> 时间：2013-04-10T17:14:13.277
> 
> 标签：c#, command-line-arguments, verbatim-string

如何为控制台应用程序提供自动转义的输入字符串？

我的意思是在我的代码中，我可以做到

```
public static void main(string[] args)
{
     string myURL; 
     myFolder = @"C:\temp\january\";  //just for testing
     myFolder = args[0]; // I want to do this eventually
} 
```

如何为 myFolder 提供值而无需通过命令行手动转义？

如果可能的话，我想避免像这样调用这个应用程序：

```
C:\test> myapplication.exe "C:\\temp\\january\\" 
```

编辑：如果可能的话，我宁愿像这样调用应用程序

```
 C:\test> myapplication.exe @"C:\temp\january\" 
```

谢谢你。

编辑：

这实际上是针对调用 Sharepoint Web 服务的控制台应用程序。我试过了

```
 string SourceFileFullPath, SourceFileName, DestinationFolder, DestinationFullPath;

            //This part didn't work. Got Microsoft.SharePoint.SoapServer.SoapServerException
            //SourceFileFullPath = args[0]; // C:\temp\xyz.pdf
            //SourceFileName = args[1];     // xyz.pdf
            //DestinationFolder = args[2]; // "http://myserver/ClientX/Performance" Reports

            //This worked.   
            SourceFileFullPath = @"C:\temp\TestDoc2.txt";
            SourceFileName = @"TestDoc2.txt";
            DestinationFolder = @"http://myserver/ClientX/Performance Reports";
            DestinationFullPath = string.Format("{0}/{1}", DestinationFolder, SourceFileName); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:19:26.490

`\`如果字符串不是逐字字符串（以 开头），则在字符串中转义的要求`@`是 C# 功能。当您从控制台启动应用程序时，您处于 C# 之外，并且控制台不会将其视为`\`特殊字符，因此`C:\test> myapplication.exe "C:\temp\january"`可以正常工作。

编辑：我原来的帖子`"C:\temp\january\"`上面有；但是，Windows 命令行似乎也可以`\`作为转义字符处理 - 但只有在 a 前面时`"`，该命令才会传递`C:\temp\january"`给应用程序。感谢@zimdanen 指出这一点。

请注意，C# 中引号之间的任何内容都是字符串的*表示*；实际的字符串可能不同——例如，`\\` *表示*单个`\`. 如果您使用其他方式将字符串获取到程序中，例如命令行参数或通过从文件中读取，则字符串不需要遵循 C# 的字符串文字规则。命令行有不同的表示规则，其中 a`\`表示它自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:19:16.640

“前缀“@”允许使用关键字作为标识符，这在与其他编程语言交互时很有用。字符 @ 实际上不是标识符的一部分，因此标识符在其他语言中可能被视为普通标识符，没有前缀。带有@ 前缀的标识符称为逐字标识符。允许对不是关键字的标识符使用 @ 前缀，但出于风格问题，强烈建议不要使用。”</p>

1.  您可以将 c# 的保留字之一与 @ 符号一起使用

前任：-

```
 string @int = "senthil kumar";
    string @class ="MCA"; 
```

2.特别是在使用文件路径时的字符串之前

```
string filepath = @"D:\SENTHIL-DATA\myprofile.txt"; 
```

代替

```
string filepath = "D:\\SENTHIL-DATA\\myprofile.txt"; 
```

1.  对于多行文本

    string ThreeIdiots = @"Senthil Kumar、Norton Stanley 和 Pavan Rao！";

    ```
    MessageBox.Show(ThreeIdiots); 
    ```

代替

```
string ThreeIdiots = @"Senthil Kumar,\n   Norton Stanley,and Pavan Rao!"; 
```

# sql - 获取交叉应用内的最大行数

> ID：15932284
> 
> 赞同：4
> 
> 时间：2013-04-10T17:14:31.647
> 
> 标签：sql, sql-server, sql-server-2012, row-number, cross-apply

在我的 sql 案例中，我无法计算 row_number 的最大值。

我将直接在 SQL Fiddle 示例上进行解释，因为我认为它会更快地理解：[SQL Fiddle](http://sqlfiddle.com/#!6/329d5/1)

*   列“OrderNumber”、“HourMinute”和“Code”仅代表我的表格，因此与编码目的无关
*   “DateOnly”列包含日期
*   “电话”列包含我客户的电话
*   “购买”列包含客户在过去 12 个月内购买的次数。请注意，该值是针对每个日期提供的，因此 12 个月的时间段是相对于我们正在评估的日期而言的。

最后，我试图生成的列是“PREVIOUSPURCHASES”，它计算“购买”列中提供的数字在过去 12 个月中出现的次数（对于每部手机）。

您可以在 SQL Fiddle 示例中看到我到目前为止所取得的成就。'PREVIOUSPURCHASES' 列正在产生我想要的东西，但是，它也产生了较低的值（例如，只有最大值是我需要的值）。

例如，您可以看到第 4 行和第 5 行是重复的，其中一个的“PREVIOUSPURCHASES”为 1，另一个为 2。在这种情况下，我不想拥有第 4 行。

我虽然想用 max(row_number) 之类的东西替换 row_number，但我无法生成它（已经在 stackoverflow 上看过类似的帖子......）。

这应该在 SQL Server 2012 中实现。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:58:35.497

我不确定你想看到什么样的结果集，但是返回的结果有什么问题吗？

```
SELECT c.OrderNumber, c.DateOnly, c.HourMinute, c.Code, c.Phone, c.Purchases, MAX(o.PreviousPurchases)
FROM cte c CROSS APPLY (
                      SELECT t2.DateOnly, t2.Phone,t2.ordernumber, t2.Purchases, ROW_NUMBER() OVER(PARTITION BY c.DateOnly ORDER BY t2.DateOnly) AS PreviousPurchases
                      FROM CurrentCustomers_v2 t2
                      WHERE c.Phone = t2.Phone AND t2.purchases<=c.purchases AND DATEDIFF(DAY, t2.DateOnly, c.DateOnly) BETWEEN 0 AND 365
                      ) o
WHERE c.OrderNumber = o.OrderNumber
GROUP BY c.OrderNumber, c.DateOnly, c.HourMinute, c.Code, c.Phone, c.Purchases
ORDER BY c.DateOnly 
```

# python - 如何停止运行 gevent-socketio 的 Flask 服务器

> ID：15932298
> 
> 赞同：0
> 
> 时间：2013-04-10T17:15:13.063
> 
> 标签：python, socket.io, flask

我有一个使用 gevent-socketio 运行的烧瓶应用程序，我以这种方式创建：

```
server = SocketIOServer(('localhost', 2345), app, resource='socket.io')
gevent.spawn(send_queued_messages_loop, server)
server.serve_forever() 
```

我`send_queued_messages_loop`在一个 gevent 线程中启动，该线程不断轮询`gevent.Queue`我的程序存储数据以将其发送到 socket.io 连接的客户端

我尝试了不同的方法来停止服务器（例如使用`sys.exit`），无论是从 socket.io 处理程序（当客户端发送 socket.io 消息时）还是从正常路由（当客户端向 发出请求时`/shutdown`），但无论如何，`sys.exit`由于greenlets的存在，似乎失败了。

我试图先打电话`gevent.shutdown()`，但这似乎并没有改变任何东西

关闭服务器的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T13:53:24.370

而不是使用`serve_forever()`创建一个`gevent.event.Event`并等待它。`set()`要实际启动关闭，请使用其方法触发事件：

```
from gevent.event import Event
stopper = Event()

server = SocketIOServer(('localhost', 2345), app, resource='socket.io')
server.start()
gevent.spawn(send_queued_messages_loop)

try:
    stopper.wait()
except KeyboardInterrupt:
    print 
```

无论您现在想从哪里终止您的进程 - 您需要做的就是调用`stopper.set()`.

这`try..except`并不是真正必要的，但我不喜欢在干净的 CTRL-C 退出时获得堆栈跟踪。

# php - 如何在php中将unicode转换为阿拉伯字符？

> ID：15932300
> 
> 赞同：3
> 
> 时间：2013-04-10T17:15:20.347
> 
> 标签：php, html, unicode, arabic

让我们说字符串是

```
$uni_str="06280628002006280628"; 
```

在阿拉伯语中，它是： بب بب

那么，如何在不使用 html 的情况下将其转换为 php：

```
 for($i=0; $i<strlen($uni_str); $i+=4)
    {
        $text_str .= "&#x".substr($uni_str,$i,4).";";
    } 
```

因为这段代码只是解决了在 html 页面中查看结果的问题，

但我想但结果在 php 变量中。

由于上面代码的结果就像

```
&#x0628;&#x0628;&#x0020;&#x0020;&#x0628;&#x0628; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:33:07.160

我找到了解决方案，希望对您有所帮助：

```
function uni2arabic($uni_str) 
{   
      for($i=0; $i<strlen($uni_str); $i+=4)
         {
                $new="&#x".substr($uni_str,$i,4).";"; 
                $txt = html_entity_decode("$new", ENT_COMPAT, "UTF-8");
                $All.=$txt;
         }

    return $All;
} 
```

变量 $All 包含阿拉伯字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:46:54.977

用于`hex2bin`将十六进制解码为字节序列，然后您可以将每对字节解包为 UTF-16 代码单元（我假设您的字符串代表的内容）。

假设您正在生成 UTF-8 文本输出：

```
iconv('UTF-16BE', 'UTF-8', hex2bin('06280628002006280628')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T17:04:17.673

以下代码允许您解码字符以及在必要时重新编码它们

## **代码**：

```
if (!function_exists('codepoint_encode')) {

    function codepoint_encode($str) {
        return substr(json_encode($str), 1, -1);
    }

}

if (!function_exists('codepoint_decode')) {

    function codepoint_decode($str) {
        return json_decode(sprintf('"%s"', $str));
    }

} 
```

## **如何使用**：

```
header('Content-Type: text/html; charset=utf-8'); 

var_dump(codepoint_encode('ඔන්ලි'));
var_dump(codepoint_encode('සින්ග්ලිෂ්'));

var_dump(codepoint_decode('\u0d94\u0db1\u0dca\u0dbd\u0dd2'));
var_dump(codepoint_decode('\u0dc3\u0dd2\u0db1\u0dca\u0d9c\u0dca\u0dbd\u0dd2\u0dc2\u0dca')); 
```

## **输出**：

```
string(30) "\u0d94\u0db1\u0dca\u0dbd\u0dd2"
string(60) "\u0dc3\u0dd2\u0db1\u0dca\u0d9c\u0dca\u0dbd\u0dd2\u0dc2\u0dca"
string(15) "ඔන්ලි"
string(30) "සින්ග්ලිෂ්" 
```

如果您想要更复杂的功能，请参阅[如何从 PHP 中的 unicode 代码点获取字符？](https://stackoverflow.com/questions/1365583/how-to-get-the-character-from-unicode-value-in-php/24755772#24755772).

# c# - C#中的printPreview横向模式#

> ID：15932305
> 
> 赞同：1
> 
> 时间：2013-04-10T17:15:35.200
> 
> 标签：c#, visual-studio, printing, print-preview

如何将打印预览和打印代码设置为横向？

```
 this.printPreviewDialog1.AutoScrollMargin = new System.Drawing.Size(0, 0);
            this.printPreviewDialog1.AutoScrollMinSize = new System.Drawing.Size(0, 0);
            this.printPreviewDialog1.ClientSize = new System.Drawing.Size(700, 600);
            this.printPreviewDialog1.Document = this.printDocument1;
            this.printPreviewDialog1.Enabled = true;
            this.printPreviewDialog1.Icon = ((System.Drawing.Icon)(resources.GetObject("printPreviewDialog1.Icon")));
            this.printPreviewDialog1.Name = "printPreviewDialog1";
            this.printPreviewDialog1.Visible = false;

            // 
            // printDocument1
            // 
            this.printDocument1.PrintPage += new System.Drawing.Printing.PrintPageEventHandler(this.printDocument1_PrintPage_1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:48:13.250

这成功了

```
this.printDocument1.DefaultPageSettings.Landscape = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:09:14.627

这个不行吗

```
var doc = new PrintDocument();
doc.DefaultPageSettings.Landscape = true; 
```

做这个把戏？

它也可能会处理打印预览问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-22T07:48:58.687

这对我有用

```
private void button_Click(object sender, EventArgs e)
{
    printPreviewDialog1.Document = printDocument1;
    printDocument1.DefaultPageSettings.Landscape = true;
    printPreviewDialog1.ShowDialog();
} 
```

# ios - iOS 集合视图，每个单元格上都有捏缩放

> ID：15932309
> 
> 赞同：0
> 
> 时间：2013-04-10T17:15:50.040
> 
> 标签：ios, ios4, ios6

我正在使用带有一堆图像的集合视图。我想添加对集合视图中的每个项目进行捏缩放的功能。不确定实现这一点的最佳方法是什么？我很感激任何帮助。

我希望能够使用捏放大以下项目 [http://cdn3.raywenderlich.com/wp-content/uploads/2012/09/Screen-Shot-2012-09-23-at-1.59.29- PM.png](http://cdn3.raywenderlich.com/wp-content/uploads/2012/09/Screen-Shot-2012-09-23-at-1.59.29-PM.png)

谢谢， 法兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:16:06.870

基本上`UIScrollView`，您向每个集合视图添加一个。然后将`UIImageViews`图像添加为滚动视图的子视图。滚动视图支持开箱即用的“捏缩放”。

请参阅本教程：[如何使用 UIScrollView 滚动和缩放内容](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)，了解有关如何设置滚动视图进行缩放的信息。

# cakephp - CakePHP 2.x 多选框

> ID：15932310
> 
> 赞同：0
> 
> 时间：2013-04-10T17:15:52.403
> 
> 标签：cakephp, select, html-helper

我通过`$this->Form->input('field')`自动填充多个选择框创建。

但是如何使用上面的代码在编辑操作中选择保存值的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:26:52.043

1.  确保您的表单是使用正确的模型创建的

    例如`$this->Form->create('Article');

2.  通过 . 从 Controller 传递一个变量作为模型的单数`$this->set()`。例如，如果您的模型是“Article”，则传递一个带有数据的变量：

    `$this->set('article', $article);`

3.  它会自动填充

4.  下次您在 StackOverflow 上提出问题时，请提供有关您尝试过的内容、有效的内容、无效的内容、搜索过但找不到的内容等信息，这样就不会感觉好像我们只是为您编写代码。

**更新（根据评论中的附加信息）：**

对于 HABTM，使用模型创建您的字段：

```
$this->Form->input('PartnerState'); 
```

然后传递一个变量 camelCase 复数：

```
$this->set('partnerStates', $partnerStates); 
```

# c# - 使用流利的 Nhibernate 与位脱水属性值时出错

> ID：15932312
> 
> 赞同：2
> 
> 时间：2013-04-10T17:15:57.790
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有这堂课：

```
public class Person
{
   public virtual long     ID            { get; set; }
   public virtual string   FirstName     { get; set; }
   public virtual string   LastName      { get; set; }
   public virtual boolean  IsValid       { get; set; }
} 
```

和人员数据映射：

```
public class PersonMap : ClassMap<Person>
    {
        public PersonMap()
        {
            Id(x => x.ID);
            Map(x => x.FirstName).Not.Nullable().Length(100);
            Map(x => x.LastName).Not.Nullable().Length(100);
            Map(x => x.IsValid).Not.Nullable();
        }
    } 
```

这是表模式：

```
CREATE TABLE [dbo].[Person](
    [ID] [bigint] IDENTITY(1,1) NOT NULL,
    [FirstName] [nvarchar](100) NOT NULL,
    [LastName] [nvarchar](100) NOT NULL,    
    [IsValid ] [bit] NOT NULL,
PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

当我使用 Fluent NHibernate 在数据库中插入一个新`Person`的但我们遇到了这个问题：

```
error dehydrating property value for `NameSpaceA.IsValid` 
```

和内部异常：

```
_innerException = {"Invalid index 2 for this SqlParameterCollection with Count=2."} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:09:25.797

正如 Jamie Ide 所说，尝试显式映射由身份生成的 Id，但还要检查并查看从 IsValid 映射中删除 .Not.Nullable() 是否允许它工作。因为在 c# 中类型是布尔值，所以它永远不能为空。

```
public PersonMap()
{
    Id(x => x.ID).GeneratedBy.Identity();
    Map(x => x.FirstName).Not.Nullable().Length(100);
    Map(x => x.LastName).Not.Nullable().Length(100);
    Map(x => x.IsValid);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:11:34.603

请提供完整的错误消息和堆栈跟踪。这是一条错误消息，通常具有误导性，因为在此错误消息之前发生了其他错误。

我会冒险猜测根本原因是您没有为 ID 属性声明生成器。它的类型很长这一事实也可能是一个问题。您如何生成/设置 ID 属性？

假设您使用的是标识列 (int)，则映射将是：

```
Id(x => x.ID).GeneratedBy.Identity(); 
```

# ruby-on-rails - 无法正确设计路径

> ID：15932313
> 
> 赞同：1
> 
> 时间：2013-04-10T17:15:59.167
> 
> 标签：ruby-on-rails, devise

我安装了 Devise 以在我的应用程序中进行身份验证。我遵循了关于宝石的所有说明，那部分似乎进展顺利。

然而，现在我试图链接到注册页面，我得到了一个我无法弄清楚的疯狂错误......由于某种原因，rails 无法确定设计控制器的位置......

来自：public/index.html.erb（公共登陆页面）

```
<div class ="getstarted">
  <table>
    <tr>
      <td id = "introtext"> 
        <p>Foo is good..l here is why: </p>
        <ul>
          <li>Improved quality</li>
          <li>Technology consistencies </li>
          <li>Cost efficiencies</li>
          <li>Increased security</li>
         <li>Improved adherence to compliance standards</li>
       </ul>    

      </td>
      <td id = "buttons">
        <%= button_to "Sign Up for an Account", new_user_registration_path, :method => "get" %>
        <br/>
        <%= button_to "Log In to your Account", new_user_session_path, :controller => "devise/session", :method => "get" %>
      </td>
    </tr>
  </table>

</div> 
```

routes.rb 有以下行：

```
 devise_for :users 
```

并且 Routes 表似乎有它需要的东西：

```
 new_user_session GET    /users/sign_in(.:format)                                   devise/sessions#new
        user_session POST   /users/sign_in(.:format)                                   devise/sessions#create
destroy_user_session DELETE /users/sign_out(.:format)                                  devise/sessions#destroy
       user_password POST   /users/password(.:format)                                  devise/passwords#create
   new_user_password GET    /users/password/new(.:format)                              devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format)                             devise/passwords#edit
                     PUT    /users/password(.:format)                                  devise/passwords#update 
```

cancel_user_registration GET /users/cancel(.:format) devise/registrations#cancel user_registration POST /users(.:format) devise/registrations#create new_user_registration GET /users/sign_up(.:format) devise/registrations#new edit_user_registration GET /users /edit(.:format) 设计/注册#edit PUT /users(.:format) 设计/注册#update DELETE /users(.:format) 设计/注册#destroy

当我点击按钮注册时，我转到链接：

```
http://localhost:3000/users/sign_up? 
```

Rails 给了我错误：

```
No route matches {:controller=>"devise/public"} 
```

登录按钮也是如此：

```
http://localhost:3000/users/sign_in?

No route matches {:controller=>"devise/public"} 
```

我为“公共”设置了一个视图作为我的公共可见（预认证）页面......我看到 Rails 正在设计目录（不存在）中寻找它。

我也试过删除？在 URL 的末尾......这并没有产生任何区别。

我被困住了，已经投入了几个小时。希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T10:14:08.473

对于您的“登录到您的帐户”按钮，我会将当前路线从“ **new_user_session_path** ”更改为“ **user_session_path** ”。

我也会把 'button_to' 改成 ' **link_to** '

看看有什么作用

# c++ - 编译我自己的代码时权限被拒绝

> ID：15932317
> 
> 赞同：0
> 
> 时间：2013-04-10T17:16:10.300
> 
> 标签：c++, permissions, compilation, g++

使用这个：

```
g++ -c -Wall -l libuthreads.a test02-new.cc -o test02-new 
```

我正在编译我的代码。

在尝试使用 : test02-new 执行代码时，我得到：

```
test02-new: Permission denied. 
```

你知道它的原因是什么吗？我以前用过这个命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:18:41.120

如果使用该`-c`标志，GCC 会输出一个目标文件。你不能执行这些。

这应该有效：

```
$ g++ -Wall libuthreads.a test02-new.cc -o test02-new
$ ./test02-new 
```

# python-2.7 - 使用时间戳对数据框进行切片

> ID：15932322
> 
> 赞同：0
> 
> 时间：2013-04-10T17:16:20.273
> 
> 标签：python-2.7, pandas, dataframe

我想减少这个数据框，只存储 1990-01-02 : 2010-06-30 之间日期的行

```
df = pd.read_csv('___.txt',header=None,parse_dates=True, index_col={0},names="date open high low close date2 misc".split()) 
```

鉴于我的日期被认为是时间戳，这样的事情不起作用：

```
w=df.ix[:,'1990-01-02':,:]

 or 

 df.index 
```

也许列表理解会更好，但我不确定如何索引时间戳在这里。感谢您的建议。非常感谢。

# architecture - 设计一个作业排队系统，其中每个用户在任何给定时间只能由工人处理一个作业

> ID：15932323
> 
> 赞同：0
> 
> 时间：2013-04-10T17:16:32.553
> 
> 标签：architecture, worker, beanstalkd, job-queue

我有一个工作队列，有多个工人在看这个队列。（每个作业对应一个用户）。在任何给定时间，队列中的每个用户都可能有多个作业。

我不希望我的员工在任何给定时间为每个用户处理超过 1 个工作。仅当当时没有其他工作人员处理该用户时，该工作人员才应选择该用户的工作。如果用户的工作正在由工作人员处理，我还希望下一个用户工作在完成后立即被选中。

我想让我的工人用户不可知（即，任何工人都应该能够处理任何用户的工作）。这将帮助我水平扩展。

我应该怎么做？我想为每个用户创建单独的队列，但工作人员将不得不观看大量队列并可能浪费资源。我现在使用 beanstalkd 作为队列服务器。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:43:23.980

首先，让我说，限制每个用户只处理一个作业可能会导致其他用户处理作业的极端延迟。考虑一个场景，当您的队列包含大量连续的 user1 作业，然后是大量连续的 user2 作业，依此类推。由于您提出的架构，您必须先排空您的 user1 作业队列，**然后**才开始处理 user2 作业，让 user3 等待很长时间......

您可以通过引入多个队列（仍然不是每个用户一个）并以循环方式对您的工作进行排队来缓解这种情况，但正如您所看到的，这仍然不是 100% 可靠的。

但是，如果您真的想用一个（或几个）队列来保证这一要求，我实际上建议使用某种共享锁定机制（例如[memcached](https://github.com/evan/memcached)）在处理该用户的作业时维护每个用户的锁。 [本文](http://www.regexprn.com/2010/05/using-memcached-as-distributed-locking.html)描述了如何做到这一点，并且有一些[宝石](https://github.com/mavenlink/morlock)可以做到这一点。然后您可以使用以下算法：

```
job = @beanstalkd.reserve
user_id = job.body["user_id"]
if (get_lock_for(user_id)
  # process job
  # ....
  job.delete
end 
```

# jakarta-ee - 如何使用 GlassFish 在 Netbeans 之外运行 Java EE Web 应用程序

> ID：15932324
> 
> 赞同：0
> 
> 时间：2013-04-10T17:16:32.723
> 
> 标签：jakarta-ee, web-applications, netbeans, glassfish

如何在 Netbeans 之外运行 Java EE Web 应用程序？

我在 GlassFish 中部署了一个 Java EE Web 应用程序。从 Netbeans 启动时它运行良好，但当尝试从 GlassFish 管理控制台启动 Netbeans 之外的应用程序时，GlassFish 在 Web 浏览器中显示 404 错误，并带有以下描述：请求的资源 () 不可用。

我在 Netbeans 中清理并构建它，然后再次重新部署它。关闭 Netbeans 并从命令行再次启动 GlassFish 服务器并尝试从 GlassFish 管理控制台再次启动它，但它仍然会显示 404 错误。在服务器日志中，它没有显示任何错误。GlassFish 中还有另一个 Web 应用程序，它确实启动了。唯一的区别是我在失败的那个中使用了 PrimeFaces。

# c++ - 删除二叉搜索树 (BST) 中的元素

> ID：15932325
> 
> 赞同：4
> 
> 时间：2013-04-10T17:16:36.197
> 
> 标签：c++, algorithm, binary-search-tree, graph-algorithm

我在从 BST 中删除元素时遇到困难。此代码基于 Cormen 书中的算法。这是删除元素所需的两个函数：

```
el *TreeSuccessor(el *x)
{
    el *y;
    if (x->right != NULL){
        return TreeMinimum(x->right);
    }
    y= x->p;

    while (y != NULL && x == y->right){
        x = y;
        y = y->p;
    }
    return y;
}

void TreeDelete (el* &root, el *z, el* &y)
{
    el *x;
    if (z->left == NULL || z->right == NULL){
        y=z;
    }
    else{
        y=TreeSuccessor(z);
    }

    if(y->left != NULL){
        x = y->left;
    }
    else{
        x = y->right;
    }

    if (x!=NULL){
        x->p = y->p;
    }

    if (y->p == NULL){
       root=x;
    }
    else if (y == y->p->left){
       y->p->left = x;
    }
    else{
       y->p->right = x;
    }

    if (y!=z){
       z->indeks = y->indeks;
       strcpy(z->name,y->name);
       strcpy(z->surname,y->surname);
    }
} 
```

这是负责调用函数的代码`int main()`：

```
 for (int i=0; i<n; i++)
    {
        File>>keyToSearch;
        searchedLeave=TreeSearch(root,keyToSearch);

        TreeDelete(root,searchedLeave,leaveToDelete);
        delete leaveToDelete;
    } 
```

这是一个完整的程序[http://pastebin.com/FgvWPzm9](http://pastebin.com/FgvWPzm9)

**删除期间程序崩溃。**

# objective-c - 为什么在访问没有 self 的属性时有时会出现编译器错误？

> ID：15932328
> 
> 赞同：0
> 
> 时间：2013-04-10T17:16:55.447
> 
> 标签：objective-c, compiler-errors, declared-property

我注意到在一些旧版本的 Xcode 中，你可以使用对象的属性而不是`self`很好。现在，当我尝试在没有 的情况下访问我的属性时，它给了我一个错误`self`，但是今天我正在编写这段代码，它工作正常，并且没有给我任何错误。

```
[aCoder encodeObject:itemName forKey:@"itemName"]; 
```

为什么会这样？为什么在这种情况下我不会收到错误消息？为什么在其他情况下会引发错误？为什么不能统一这种行为，应该怎么用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:48:36.317

没有`self`. 如果您没有使用`self`，那么您将直接访问与属性同名的实例变量。这给许多开发人员带来了无穷无尽的问题。

这就是为什么最新的编译器（在最新版本的 Xcode 中）生成带有前导下划线的属性 ivars。这样，如果您`self`在尝试访问该属性时忘记使用，则会收到错误消息，因为没有同名的 ivar。

为了统一您的体验，您应该在较旧的编译器中使用以下模式：

定义`@property int foo;`. 然后定义 ivar `int _foo`。然后使用`@synthesize foo = _foo;`.

使用较新的编译器，您只需声明`@property int foo`即可完成。编译器将为您生成 ivar `int _foo`。

在这两种情况下，您都使用`self.foo`属性并`_foo`直接访问 ivar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:19:34.613

每当您使用**新的 LLVM 编译器**创建属性时，它都会创建一个名为`_property`.

如果你不覆盖自动，`synthesize`那么你需要使用`_property`or `self.property`。

在您的情况下，您似乎正在使用旧编译器（即 XCode4.3 bacwards 附带），或者您已将自动合成覆盖为：

```
@synthesize aCoder; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T17:30:49.467

我假设你的意思是这个警告：

![在此处输入图像描述](https://i.stack.imgur.com/kpklF.png)

许多项目在其构建设置中没有启用许多警告，因此这可能是您没有看到此警告的原因之一。

还有一些方法是常见的直接访问实例变量，Xcode会忽略直接的ivar访问；这些包括`init*`and`dealloc`方法（但不幸的是不是 getter/setter 方法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:20:35.457

如果您在一个类中定义属性并且`@synthesize`它们使用相同的命名，那么您可以在没有 self 的情况下访问它们

例如

在.h

```
@property(nonatomic, copy) NSString *str1; 
```

在.m

```
@synthesize str1 = str1;

str1 = @"hello";
self.str1 = @"hello"; // Or this 
```

如果您不使用 explicit `@synthesize`，那么 XCode 会自动执行`@synthesize property = _property`（从最近开始），因此您可以执行以下操作

在.h

```
@property(nonatomic, copy) NSString *str1; 
```

在.m

```
_str1 = @"hello";
self._str1 = @"hello"; // Or this 
```

`self`如果属性是在父类中定义的，您将无法使用。您必须在当前课程中进行综合才能使用它。

# php - 将 CSS 应用于 PHP 日期函数

> ID：15932331
> 
> 赞同：4
> 
> 时间：2013-04-10T17:17:05.483
> 
> 标签：php, css, date

这听起来可能很奇怪，也可能很简单，但我现在的思维不正常。

我正在使用**PHP Date**函数以以下格式显示日期

```
date('l, F jS Y, time()); 
```

展示时间：**2013 年 4 月 10 日，星期三**

如何在不尝试从返回的字符串中提取**th**并将**CSS**应用于它的情况下以某种方式使**th**成为上标？

 ***** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T17:18:42.350

您可以将其拆分为多个部分：

```
$formatted = date('l, F j') . '<sup>' . date('S') . '</sup> ' . date('Y'); 
```

它不是特别有效，多次调用日期，但它比字符串操作更可靠。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T17:20:38.137

我更喜欢这个而不是串联和几个`date()`电话......

```
date('l, F j\<\s\u\p\>S\<\/\s\u\p\> Y', time()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T17:27:55.860

是的，这是可能的。

```
<?php
echo date('l F j\<\s\u\p\ \s\t\y\l\e\=\c\o\l\o\r\:\r\e\d\;\> S\<\/\s\u\p\> Y', time()); 
?> 
```

**演示**：**[这里](http://codepad.viper-7.com/dBPsFL)******

# c++ - 这样的赋值在 C++ 中是个好主意吗

> ID：15932333
> 
> 赞同：3
> 
> 时间：2013-04-10T17:17:08.823
> 
> 标签：c++, new-operator, variable-assignment, placement-new

许多类的赋值运算符（operator=）与析构函数中的代码相同，并且与复制构造函数的代码非常相似。

那么以这种方式实施分配是个好主意吗？

```
Point& operator=(const Point& point)
{
    if(&point != this)
    {
        //Call the destructor
        this->~Point();

        //Make the placement new
        //Assignment is made because some compilers optimise such code as just
        //  new Point;
        Point* p_n = new (this) Point(point);

        //We where placing in this place so pointers should be equal
        assert(p_n == this);
    }
    return *this;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T17:20:38.593

不，这是一个坏主意，尽管 C++ 标准在讨论对象生命周期时使用了这种东西作为示例。对于像`Point`它这样的值类型还不错，但是如果您从此类派生，则此赋值实现会将对象的类型从您的派生类型更改为`Point`; 如果涉及到虚函数，您会看到行为的巨大变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T17:38:15.857

[Herb Sutter在](https://stackoverflow.com/users/1661064/herb-sutter)[他的一篇 GotW 文章](http://www.gotw.ca/gotw/023.htm)中谈到了这一点。我建议你阅读它。他的结论：

> 最初的习语充满了陷阱，经常出错，它使派生类的作者的生活变成了地狱。我有时很想在办公室厨房张贴上面的代码，并附上标题：“这里有龙。”
> 
> 来自 GotW 编码标准：
> 
> *   如有必要，更喜欢编写一个通用的私有函数来在复制和复制分配之间共享代码；永远不要使用在复制构造方面通过使用显式析构函数然后放置 new 来实现复制分配的技巧，即使这个技巧每三个月在新闻组上出现一次（即，永远不要写：
>     
>     
>     
>     ```
>     T& T::operator=( const T& other )
>     {
>         if( this != &other)
>         {
>             this->~T();             // evil
>             new (this) T( other );  // evil
>         }
>         return *this;
>     } 
>     ```

# actionscript - swf 和 php 中的图像分辨率不同

> ID：15932337
> 
> 赞同：0
> 
> 时间：2013-04-10T17:17:22.187
> 
> 标签：actionscript, flash, resolution

在这个网址中，图像具有完美的分辨率 [http://www.pikspeak.com/show.php?id=3&img=guitar](http://www.pikspeak.com/show.php?id=3&img=guitar)

但是当我为同一个图像创建一个 .swf 文件时，分辨率并不是那么完美。它的链接是 [http://www.pikspeak.com/fb.swf?id=3&img=guitar](http://www.pikspeak.com/fb.swf?id=3&img=guitar)

谁能让我知道如何提高 .swf 文件中的分辨率。在 swf 文件中，我使用 loader 加载图像。

```
loader= new Loader();     
loader.load(url); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:24:11.870

这可能是因为您缩小了图像。您可以通过在加载后应用平滑来使其看起来更好，通过执行`Bitmap(loader.content).smoothing = true`.

# android - 适用于 Android 的 sd 卡上某些文件的列表视图

> ID：15932339
> 
> 赞同：1
> 
> 时间：2013-04-10T17:17:28.897
> 
> 标签：android

我正在尝试将 mp3 播放器创建为一个 android 应用程序，我希望它能够自动在我的文件文件夹中找到任何 .mp3 文件。我不想有指向音乐文件夹的直接路径，因为我将包含一个指向 Dropbox 的链接，我可以在其中下载已经存在的 .mp3 文件。这将转到一个下载文件夹，我希望我的 MP3 播放器为我提取它。

我怎么能这样做？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T17:56:25.507

这种方法应该有效

```
private void searchMusic() {

    int count = 0;
    ArrayList<String> musicFiles;
    LinkedList<File> stack = new LinkedList<File>();
    File directory = new File(Environment.getExternalStorageDirectory()
            .getAbsolutePath());
    stack.add(directory);
    while (!stack.isEmpty()) {
        File fmusic = stack.removeLast();
        File[] files = null;
        try {
            files = fmusic.listFiles();
        } catch (Exception e) {
        }
        musicFiles = new ArrayList<String>();
        if (files != null) {
            for (File folder : files) {

                if (folder.getName().endsWith(".mp3")
                        || folder.getName().endsWith(".ogg")
                        || folder.getName().endsWith(".wav")
                        && folder.isFile() && folder.canRead()
                        && !folder.getName().startsWith("._")) {

                    count++;
                    musicFiles.add(folder.getPath());
                }

                try {
                    if (folder.isDirectory()
                            && !FileUtils.isSymlink(folder)) {
                        stack.addFirst(folder);

                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }

            }
        }
    }
    return;

} 
```

# android - 使用android警报与计时器任务？

> ID：15932342
> 
> 赞同：2
> 
> 时间：2013-04-10T17:17:35.967
> 
> 标签：android, service, background, timer, alarms

我有一个要求，我每天只需要从 excel 文件中读取 100 个条目。该文件可以有数千条记录。

我希望在 android 中创建系统，其中计划服务将在预定时间每天运行并读取下一组 100 条记录并对它们进行进一步处理。

excel 文件中的所有行都结束后，计划的服务需要自行取消。

在论坛上阅读时，我遇到了围绕定时器任务警报管理器的讨论

谁能让我知道哪些应该是首选，为什么？还要指出是否存在任何其他有效的方法。

我计划从 android 2.1+ 版本开始这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:28:13.307

即使应用程序进入后台并且操作系统撤销其资源，使用警报管理器是执行计划任务的唯一方法。

任何其他涉及创建本地线程对象或此类替代方案的选项都可能在短期内起作用，但不会是一个健壮的解决方案。

TimerTask 必须被实例化。

属于您的应用程序的任何对象实例都可能在您的应用程序进入后台、失去优先级并且 Android 释放其资源时与您的应用程序一起被取消。

# xml - 是否可以根据具有命名空间的 XSD 文件验证没有命名空间的 XML 文档？

> ID：15932345
> 
> 赞同：1
> 
> 时间：2013-04-10T17:17:47.937
> 
> 标签：xml, xsd, schema

我们有一个客户正在提供其内容没有命名空间的 XML 文档。我们正在尝试根据已分配命名空间的官方模式验证这些文档。

1) 客户提供的 XML 文档是否有效？

2) 尝试针对 XSD 验证 XML 文档在技术上是否不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:08:54.223

简短的答案：

1）不-至少根据您所指的XSD。

2) 不可以。您可以尝试针对任何 XML 验证任何 XSD。

虽然我的回答听起来可能过于“严格地说”，但请记住，验证旨在提供一致性指示；因此，将任何 XML 与任何 XSD 匹配是可以接受的/技术上正确的。

您可以在此处阅读 SO，有效的方案是对 XML 应用某种类型的转换，以弥补丢失的东西。例如：如果问题包括缺少名称空间声明，并且任何试图说服 XML 的生产者纠正缺陷的尝试都失败了，那么通过 XSLT 运行它以使其达到所需的格式，然后应用 XSD。

对我来说，这是一个应该谨慎考虑的想法：针对每个 XML 运行 XSLT 是很多人无法承受的大量开销。我的意见：最好简单地调整您的 XSD，以解决需要解决的问题。与处理 XSLT 相比，这种方法不会产生运行时开销，并且设计时间/维护工作更少……

# jquery - jQuery无限滚动忽略浏览器弹起

> ID：15932346
> 
> 赞同：0
> 
> 时间：2013-04-10T17:17:48.533
> 
> 标签：jquery, scroll

我有这个功能可以根据页码一次加载 5 个项目。但是发生的情况是，当用户滚动到页面底部时，$.post 函数会触发一次，然后在浏览器反弹完成时再次触发，因为`position_bot == $(document).height()`实际上是两次。然后每次加载 10 个项目。

我正在尝试找到一种方法来忽略浏览器弹跳情况，以便调用只触发一次。任何建议或帮助都会很棒。

```
$(function(){
    $('#loading').show();
    var page = 1,
        total_brands = '<?php echo $brandsCount?>',
        post_link = '<?php echo $brandsUrl?>',
        post_data = {page_num: page};

    $.post(post_link, post_data, function(data){
        $('.brandsResult').append(data);
        $('#loading').hide();
    });

    $(window).scroll(function (e) {

        var position_bot = $(window).scrollTop() + $(window).height(),
            displayed_brands = $('ul.category-list > li').length;               

        // Show loading image if near bottom
        if(position_bot > $(document).height() - 120 && displayed_brands < total_brands) {
            $('#loading').show();
        }

        // If page is at the bottom
        if(position_bot == $(document).height()) {

            // Increase page number
            page++;
            post_data = { page_num: page };
            console.log('page', page);

            // Check if all items are displayed
            if((page-1) * 5 > total_brands){
                $('#loading').hide();
            } else {    
            // Firing twice ???
                $.post(post_link, post_data, function(data){
                    $('#loading').hide();
                    $('.brandsResult').append(data);
                });

            }

        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:23:14.473

我会设置一个布尔值来控制加载状态并告诉代码如果为真则不要做任何事情......

```
 var processing = false;

if(position_bot == $(document).height() && !processing) {

    if((page-1) * 5 > total_brands){
       $('#loading').hide();
       processing = false;
    } else {    
       processing = true;
       $.post(post_link, post_data, function(data){
           $('#loading').hide();
           $('.brandsResult').append(data);
           processing = false;
       });

    }
} 
```

我相信这是因为 $('#loading').show() 正在推动屏幕，作为高度的变化，这不足以超越你的条件边界。一个简单的布尔值会（或可以）防止这种情况。它可能需要一些调整，这只是一个基本且完全未经测试的示例。

# java - 无法使用 jinterop 打开 dcom 会话

> ID：15932348
> 
> 赞同：0
> 
> 时间：2013-04-10T17:17:52.043
> 
> 标签：java, wmi, dcom, wmi-query, j-interop

我正在尝试使用 jinterop 在远程 PC 上运行 wmi 查询，但我什至无法启动 dcom 会话。我知道 wmi 正在工作，因为我可以使用 powershell\wmic\vbscript 毫无问题地访问它。此外，我们的 Windows 客户端禁用了文件共享。

这是我正在尝试的：

```
import static org.jinterop.dcom.impls.JIObjectFactory.narrowObject;
import static org.jinterop.dcom.impls.automation.IJIDispatch.IID;

import java.net.UnknownHostException;

import org.jinterop.dcom.common.JIException;
import org.jinterop.dcom.core.JIComServer;
import org.jinterop.dcom.core.JISession;
import org.jinterop.dcom.impls.automation.IJIDispatch;
import static org.jinterop.dcom.core.JIProgId.valueOf;
import org.jinterop.dcom.core.JIVariant;
import org.jinterop.dcom.core.JIString;

public class SimpleServiceManager {

    public static void main(String[] args) {
        String domain = "mydom";
        String hostname = "remotepc";
        String username = "myusername";
        String password = "mypass";

        JISession dcomSession = JISession.createSession(domain, username, password);
        JIComServer comServer;
        try {
            comServer = new JIComServer(valueOf("WbemScripting.SWbemLocator"), hostname, dcomSession);

            IJIDispatch wbemLocator = (IJIDispatch) narrowObject(comServer.createInstance().queryInterface(IID));

            Object[] params = new Object[] {
                    new JIString(hostname),
                    new JIString("ROOT\\CIMV2"),
                    JIVariant.OPTIONAL_PARAM(),
                    JIVariant.OPTIONAL_PARAM(),
                    JIVariant.OPTIONAL_PARAM(),
                    JIVariant.OPTIONAL_PARAM(),
                    new Integer(0),
                    JIVariant.OPTIONAL_PARAM()
            };
            JIVariant results[] = wbemLocator.callMethodA("ConnectServer", params);
            IJIDispatch wbemServices = (IJIDispatch) narrowObject(results[0].getObjectAsComObject());  
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JIException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
 } 
```

给我这个：

```
Apr 10, 2013 1:14:38 PM org.jinterop.dcom.common.JISystem logSystemPropertiesAndVersion
INFO: j-Interop Version = j-Interop 2.08

Apr 10, 2013 1:14:38 PM org.jinterop.dcom.common.JISystem logSystemPropertiesAndVersion
INFO: java.runtime.name = Java(TM) SE Runtime Environment
sun.boot.library.path = C:\Program Files\Java\jre7\bin
java.vm.version = 23.7-b01
java.vm.vendor = Oracle Corporation
java.vendor.url = http://java.oracle.com/
path.separator = ;
java.vm.name = Java HotSpot(TM) Client VM
file.encoding.pkg = sun.io
user.country = US
user.script = 
sun.java.launcher = SUN_STANDARD
sun.os.patch.level = Service Pack 1
java.vm.specification.name = Java Virtual Machine Specification
user.dir = C:\Users\myusername\Google Drive\code\Workspaces\Eclipse IDE for Java Developers 422\Jinterop
java.runtime.version = 1.7.0_17-b02
java.awt.graphicsenv = sun.awt.Win32GraphicsEnvironment
java.endorsed.dirs = C:\Program Files\Java\jre7\lib\endorsed
os.arch = x86
java.io.tmpdir = C:\Users\myusername\AppData\Local\Temp\
line.separator = 

java.vm.specification.vendor = Oracle Corporation
user.variant = 
os.name = Windows 7
sun.jnu.encoding = Cp1252
java.library.path = C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;...
java.specification.name = Java Platform API Specification
java.class.version = 51.0
sun.management.compiler = HotSpot Client Compiler
os.version = 6.1
user.home = C:\Users\myusername
user.timezone = America/New_York
java.awt.printerjob = sun.awt.windows.WPrinterJob
file.encoding = Cp1252
java.specification.version = 1.7
java.class.path = C:\Users\myusername\Google Drive\code\Workspaces\Eclipse IDE for Java Developers 422\Jinterop\bin;C:\Users\myusername\Google Drive\code\Workspaces\Eclipse IDE for Java Developers 422\Jinterop\libs\j-interop.jar;C:\Users\myusername\Google Drive\code\Workspaces\Eclipse IDE for Java Developers 422\Jinterop\libs\j-interopdeps.jar;C:\Users\myusername\Google Drive\code\Workspaces\Eclipse IDE for Java Developers 422\Jinterop\libs\jcifs-1.2.19.jar
user.name = myusername
java.vm.specification.version = 1.7
sun.java.command = SimpleServiceManager
java.home = C:\Program Files\Java\jre7
sun.arch.data.model = 32
user.language = en
java.specification.vendor = Oracle Corporation
awt.toolkit = sun.awt.windows.WToolkit
java.vm.info = mixed mode, sharing
java.version = 1.7.0_17
java.ext.dirs = C:\Program Files\Java\jre7\lib\ext;C:\Windows\Sun\Java\lib\ext
sun.boot.class.path = C:\Program Files\Java\jre7\lib\resources.jar;C:\Program Files\Java\jre7\lib\rt.jar;C:\Program Files\Java\jre7\lib\sunrsasign.jar;C:\Program Files\Java\jre7\lib\jsse.jar;C:\Program Files\Java\jre7\lib\jce.jar;C:\Program Files\Java\jre7\lib\charsets.jar;C:\Program Files\Java\jre7\lib\jfr.jar;C:\Program Files\Java\jre7\classes
java.vendor = Oracle Corporation
file.separator = \
java.vendor.url.bug = http://bugreport.sun.com/bugreport/
sun.io.unicode.encoding = UnicodeLittle
sun.cpu.endian = little
sun.desktop = windows
sun.cpu.isalist = pentium_pro+mmx pentium_pro pentium+mmx pentium i486 i386 i86

Apr 10, 2013 1:14:38 PM org.jinterop.dcom.core.JIComOxidRuntime$ClientPingTimerTask run
INFO: Running ClientPingTimerTask !
Apr 10, 2013 1:14:38 PM org.jinterop.dcom.core.JISession createSession
INFO: Created Session: -1745354837
Apr 10, 2013 1:14:38 PM org.jinterop.dcom.core.JIComOxidRuntime$ServerPingTimerTask run
INFO: Running ServerPingTimerTask !
Apr 10, 2013 1:14:38 PM org.jinterop.dcom.core.JISession$Release_References_TimerTask run
INFO: Release_References_TimerTask:[RUN] Session:  -1745354837 , listOfDeferencedIpids.size(): 0
Apr 10, 2013 1:14:38 PM org.jinterop.dcom.common.JISystem saveDBPathAndLoadFile
INFO: progIdVsClsidDB: {}
org.jinterop.dcom.common.JIException: Message not found for errorCode: 0xC0000034
    at org.jinterop.winreg.smb.JIWinRegStub.winreg_OpenHKLM(JIWinRegStub.java:115)
    at org.jinterop.dcom.core.JIProgId.getIdFromWinReg(JIProgId.java:130)
    at org.jinterop.dcom.core.JIProgId.getCorrespondingCLSID(JIProgId.java:162)
    at org.jinterop.dcom.core.JIComServer.<init>(JIComServer.java:413)
    at SimpleServiceManager.main(SimpleServiceManager.java:25)
Caused by: jcifs.smb.SmbException: The system cannot find the file specified.
    at jcifs.smb.SmbTransport.checkStatus(SmbTransport.java:522)
    at jcifs.smb.SmbTransport.send(SmbTransport.java:622)
    at jcifs.smb.SmbSession.send(SmbSession.java:239)
    at jcifs.smb.SmbTree.send(SmbTree.java:109)
    at jcifs.smb.SmbFile.send(SmbFile.java:718)
    at jcifs.smb.SmbFile.open0(SmbFile.java:923)
    at jcifs.smb.SmbFile.open(SmbFile.java:940)
    at jcifs.smb.SmbFileOutputStream.<init>(SmbFileOutputStream.java:142)
    at jcifs.smb.TransactNamedPipeOutputStream.<init>(TransactNamedPipeOutputStream.java:32)
    at jcifs.smb.SmbNamedPipe.getNamedPipeOutputStream(SmbNamedPipe.java:187)
    at rpc.ncacn_np.RpcTransport.attach(RpcTransport.java:92)
    at rpc.Stub.attach(Stub.java:106)
    at rpc.Stub.call(Stub.java:110)
    at org.jinterop.winreg.smb.JIWinRegStub.winreg_OpenHKLM(JIWinRegStub.java:113)
    ... 4 more 
```

为什么会抛出 jcifs.smb.SmbException？WMI 不使用 smb 那么为什么我会看到这个错误？jinterop 是否要求客户端启用 Windows 文件共享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-21T15:23:03.077

[在这个线程](http://sourceforge.net/p/j-interop/discussion/840678/thread/8e3dd1b8/)中有一个关于这个问题的讨论。

快速总结：

首先，确保启用了远程注册表服务。

其次，确保 j-interop 没有使用自动注册（否则您将遇到 Access Denied 错误）：

```
JISystem.setAutoRegisteration(false); 
```

第三，确保防火墙没有干扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T06:58:36.240

我正在回复您的声明“我什至无法启动 dcom 会话”。这是使用 j-interop 获取会话的代码。

```
try {
        args[0] = "x.y.z.w";
        String domain       = "";//i am using it as blank
        String username     = "username";//user who logs in to the system as admin
        String password     = "password";// used by admin to login to windows pc

        JISystem.getLogger().setLevel(Level.FINEST);
        JISystem.setInBuiltLogHandler(false);
        JISystem.setAutoRegisteration(true);
        JISession session3 = JISession.createSession(domain,username,password);
        session3.useSessionSecurity(true);
        System.out.println(" session3 "+session3);
    }catch(Exception e){
        e.printStackTrace();
    } 
```

您将看到输出 session3 org.jinterop.dcom.core.JISession@a46bc929

# .net - 如何使用反射来解决这个......？(C#/.NET)

> ID：15932349
> 
> 赞同：-1
> 
> 时间：2013-04-10T17:17:55.173
> 
> 标签：.net, reflection, c#-3.0

我正在开发 C#/.NET 3.5 应用程序（并希望继续使用该版本的 .NET），但不知道如何使用反射解决这个问题。我找到了解决方法，但并不“整洁”。如下代码，我需要发现所有的接口实现，这样以后添加更多接口实现时，我不需要更改现有代码。

```
interface Ii { }
class A : Ii { }
class A1 : A { }
class A2 : A { }
class A3 : A { }
class B : Ii { }
class C : Ii{ }
// maybe in future class D : Ii { }
// maybe in future class E : Ii { }

class Helper
{
    static List<Type> GetAllInterfaceImplemenations()
    {// do reflection magic and return ["A1","A2","A3","B","C"] ...
     // I will use this method to fill comboBox-es , create objects factory, etc...
     // there should be no changes if/when in future I add class D etc.
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:27:20.597

尝试这个：

```
public static List<string> GetAllInterfaceImplemenations()
{
    var interfaceType = typeof(Ii);
    var list = new List<string>();
    foreach (var type in Assembly.GetExecutingAssembly().GetTypes())
    {
        if (type.IsClass && interfaceType.IsAssignableFrom(type))
        {
            list.Add(type.Name);
        }
    }

    return list;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:44:41.070

上述解决方案的问题是它将返回上面示例中的类“A”，这是不想要的。只需要“叶子”。但是，上面的解决方案给出了如何解决它的想法。所以，这是我的生产解决方案（对不起，ArrayList 是我最喜欢的集合......）。

```
private static ArrayList GetAllInterfaceImplemenations()
{
    ArrayList listOfLeafsNames = null;
    try
    {
        Type interfaceType = typeof(ISpeechCodec);
        ArrayList listOfAll = new ArrayList();
        foreach (Type type in Assembly.GetExecutingAssembly().GetTypes())
        {
            if (type.IsClass && interfaceType.IsAssignableFrom(type))
            {
                listOfAll.Add(type);
            }
        }

        listOfLeafsNames = new ArrayList();
        foreach (Type typeCandidate in listOfAll)
        {
            bool isLeaf = true;
            foreach (Type type2 in listOfAll)
            {
                if (!(typeCandidate.Equals(type2)))
                {
                    if (typeCandidate.IsAssignableFrom(type2))
                    {
                        isLeaf = false;
                    }
                }
            }
            if (isLeaf)
            {
                listOfLeafsNames.Add(typeCandidate.FullName);
            }
        }
    }
    catch (Exception ex)
    {
        Setup_TraceExceptions(ex.ToString());
    }

    return listOfLeafsNames;
} 
```

# git - GitExtensions 在“分支”下拉列表中仅显示主分支

> ID：15932350
> 
> 赞同：0
> 
> 时间：2013-04-10T17:17:58.887
> 
> 标签：git, github, git-bash, git-extensions

我正在使用 GitExtensions 作为 Git 命令行的 UI 助手，但我遇到了问题。一切都很好，除了一件事：它应该显示所有现有分支的下拉菜单，它只显示主分支。实际上，如果我去 Git bash 并执行一个 git 分支，那么它会向我显示多个处于活动状态的分支，但这个不会。与我的工作方式相反，我所有的同事都可以看到他们可用的所有分支的完整列表

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T11:26:48.713

不确定您的机器和同事机器之间的区别是什么，但我可以说的是 Git Extensions 中的下拉列表（默认情况下位于存储库下拉列表和菜单栏中的隐藏按钮之间的那个）只会显示您可以使用本地可用的分支以及底部的选项来签出其他分支（“签出分支 Ctrl+。”）。

选择最底部的选项（“结帐分支”）将为您提供一个对话框，您可以在其中选择要签出的分支。默认情况下，这也只会显示您在本地可用的分支，但现在您可以选择“远程分支”的单选按钮。现在，该单选按钮下方的下拉菜单将显示远程存储库上可用的**所有分支（很可能称为“起源”）。**选择您感兴趣的分支并保留其余文本框，然后单击“结帐”。现在，您应该已经准备好根据您想要使用的远程分支来使用新创建的本地分支了。

# spring - 打包在胖 Jetty jar 中时 Spring 找不到 WebApplicationInitializer

> ID：15932351
> 
> 赞同：1
> 
> 时间：2013-04-10T17:18:00.050
> 
> 标签：spring, jar, jetty

我正在尝试创建一个嵌入式 Jetty 的“FAT”jar 和我的代码。不幸的是，如果我从 jar 中运行，我会收到此错误：`No Spring WebApplicationInitializer types detected on classpath`

如果我打开罐子，它工作得很好。

问题是我可以从 jar 中运行应用程序还是必须将其解压缩？

这是一个示例项目和重现问题的步骤：

> git clone [https://github.com/steveliles/jetty-embedded-spring-mvc-noxml.git](https://github.com/steveliles/jetty-embedded-spring-mvc-noxml.git)
> cd jetty-embedded-spring-mvc-noxml
> mvn clean install
> cd target
> java -jar jetty-noxml-1.0-SNAPSHOT.jar

您将获得此输出“...在类路径上未检测到 Spring WebApplicationInitializer 类型...”。

但如果你这样做：

> mkdir temp
> cd temp
> unzip jetty-noxml-1.0-SNAPSHOT.jar
> java -cp 。com.sjl.Main

这将工作得很好。

那么有什么办法可以直接从 jar 中完成这项工作而无需先打开包装呢？

== 更新 ==

该项目的作者解决了这个问题。从阴影 jar 中提取 webapps 需要以下代码：

```
 parser = new AnnotationParser() {

       @Override
       public void parse(Resource aDir, ClassNameResolver aResolver) throws Exception {
           if (aDir.isDirectory()) {
               super.parse(aDir, aResolver);
           } else {
               super.parse(aDir.getURI(), aResolver);
           }
       }
    }; 
```

见：[https ://github.com/steveliles/jetty-embedded-spring-mvc-noxml/commit/789663310b2fa2bdc0b101658275758a26cec229](https://github.com/steveliles/jetty-embedded-spring-mvc-noxml/commit/789663310b2fa2bdc0b101658275758a26cec229)

# javascript - 删除 CKEditor 4 中的注释

> ID：15932355
> 
> 赞同：1
> 
> 时间：2013-04-10T17:18:12.380
> 
> 标签：javascript, ckeditor

我写在代码中当我切换到可视化编辑器时，然后''到'？-->'。如何删除它？我想在 CKEditor 中使用 PHP 和其他语言。

对不起我的英语不好。我来自乌克兰。;]

例子： ![在此处输入图像描述](https://i.stack.imgur.com/DiFd4.png)

切换到可视化编辑器并返回。 ![在此处输入图像描述](https://i.stack.imgur.com/VCvK9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:33:40.007

试试这个配置：

```
config.protectedSource.push( /<\?[\s\S]*?\?>/g );   // PHP code 
```

取自[这里](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.protectedSource)。CKEditor 应该忽略你的 PHP 代码。

# arrays - Bash 脚本 - 如何填充数组？

> ID：15932356
> 
> 赞同：7
> 
> 时间：2013-04-10T17:18:12.923
> 
> 标签：arrays, bash, ls

假设我有这个目录结构：

```
DIRECTORY:

.........a

.........b

.........c

.........d 
```

我想做的是：我想将目录的元素存储在数组中

就像是 ： `array = ls /home/user/DIRECTORY`

所以它`array[0]`包含第一个文件的名称（即'a'）

`array[1] == 'b'` 等等

感谢帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T17:37:53.283

你不能简单地做`array = ls /home/user/DIRECTORY`，因为 - 即使使用正确的语法 - 它也不会给你一个数组，而是一个你必须解析的字符串，并且[解析`ls`会受到法律的惩罚](http://mywiki.wooledge.org/ParsingLs)。但是，您可以使用内置的 Bash 构造来实现您想要的：

```
#!/usr/bin/env bash

readonly YOUR_DIR="/home/daniel"

if [[ ! -d $YOUR_DIR ]]; then
    echo >&2 "$YOUR_DIR does not exist or is not a directory"
    exit 1
fi

OLD_PWD=$PWD
cd "$YOUR_DIR"

i=0
for file in *
do
    if [[ -f $file ]]; then
        array[$i]=$file
        i=$(($i+1))
    fi
done

cd "$OLD_PWD"
exit 0 
```

这个小脚本将所有可以在`$YOUR_DIR`名为`array`.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T17:54:01.813

选项 1，手动循环：

```
dirtolist=/home/user/DIRECTORY
shopt -s nullglob    # In case there aren't any files
contentsarray=()
for filepath in "$dirtolist"/*; do
    contentsarray+=("$(basename "$filepath")")
done
shopt -u nullglob    # Optional, restore default behavior for unmatched file globs 
```

选项 2，使用 bash 数组技巧：

```
dirtolist=/home/user/DIRECTORY
shopt -s nullglob
contentspaths=("$dirtolist"/*)   # This makes an array of paths to the files
contentsarray=("${contentpaths[@]##*/}")  # This strips off the path portions, leaving just the filenames
shopt -u nullglob    # Optional, restore default behavior for unmatched file globs 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-15T14:47:39.117

```
array=($(ls /home/user/DIRECTORY)) 
```

然后

```
echo ${array[0]} 
```

将等于该目录中的第一个文件。

# c# - 创建 Linq 查询时出错

> ID：15932359
> 
> 赞同：14
> 
> 时间：2013-04-10T17:18:22.347
> 
> 标签：c#, .net, linq, entity-framework, linq-to-objects

我有一个像这样的查询

```
struct MyStruct
{
  public string name;
  public double amount;
}

var a =
  from p in Products
  select new MyStruct
  {
    name = p.Name,
    amount = p.Amount
  }; 
```

当我执行查询时，出现以下异常：

> **System.NotSupportedException** {“LINQ to Entities 仅支持无参数构造函数和初始化程序。”}

但是如果我将 MyStruct 的类型更改为*class*那么它会按预期工作。

为什么它适用于*class*而失败*struct*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:25:05.340

它适用于 LinqToObjects。我猜 LinqToEntities 不知道如何创建一个结构。如果你这样做，你会没事的：

```
struct MyStruct
{
  public string name;
  public double amount;
}

var a = Products.AsEnumerable()
    .Select(p => new MyStruct
    {
        name = p.Name,
        amount = p.Amount
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:51:08.227

Linq to entity 不支持投影到结构中。他们需要在查询提供程序中设计对此的支持，而他们只是选择不这样做。看起来他们并不认为它是一个足够有价值的特性来支持它值得开发成本。

您将需要在查询中投影到新的*类*实例中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T17:44:17.150

尝试这个：

```
struct MyStruct
{
            public string name;
            public double amount;
}

Products[] p1 = new Products[] { new Products { name = "prod1", amount = 5 }
var c = from p in p1
        select new MyStruct { name = p.name, amount = p.amount }; 
```

# java - GSSException：消息流已修改 (41)

> ID：15932361
> 
> 赞同：8
> 
> 时间：2013-04-10T17:18:26.130
> 
> 标签：java, security, kerberos, ntlm, gssapi

我正在使用森林体系结构中的 LDAP（所有服务器和我的服务器都是 Windows）。我正在使用 NTLM 身份验证绑定到 AD。

我有一个针对 LDAP 服务器执行操作的 JAVA 代码。

代码被包装为一个 tomcat servlet。

直接运行 JAVA 代码时（仅将 LDAP 身份验证代码作为应用程序执行），绑定对本地域（本地域 = 我登录到 Windows，并使用该域的用户运行此过程）和外部域都有效.

将 JAVA 代码作为 servlet 运行时，绑定可以工作并验证来自一个域的用户，但如果我试图验证来自其他域的用户，它就不起作用，它不会起作用（只有当我重新启动 tomcat 时它才会起作用）。

我遇到了一个例外：

```
GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]] 
```

我会提到它是相同的代码，具有相同的配置和相同的 krb5 文件。

**编辑：** 更多信息：

这是我的代码：

```
public void func(String realm, String kdc) {
    try {
      URL configURL = getClass().getResource("jaas_ntlm_configuration.txt");
        System.setProperty("java.security.auth.login.config", configURL.toString());

            System.setProperty("java.security.krb5.realm", realm);
            System.setProperty("java.security.krb5.kdc",kdc);

        // If the application is run on NT rather than Unix, use this name
        String loginAppName = "MyConfig";

        // Create login context
        LoginContext lc = new LoginContext(loginAppName, new SampleCallbackHandler());

        // Retrieve the information on the logged-in user
        lc.login();

        // Get the authenticated subject
        Subject subject = lc.getSubject();

        System.out.println(subject.toString());

        Subject.doAs(subject, new JndiAction(new String[] { "" }));
    }
    catch (LoginException e) {
      e.printStackTrace();
    }
}

class JndiAction implements java.security.PrivilegedAction {
    private String[] args;

    public JndiAction(String[] origArgs) {
        this.args = (String[])origArgs.clone();
    }

    public Object run() {
        performJndiOperation(args);
        return null;
    }

    private static void performJndiOperation(String[] args) {

        // Set up environment for creating initial context
        Hashtable env = new Hashtable(11);

        env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");

        // Must use fully qualified hostname
        env.put(Context.PROVIDER_URL, "ldap://server:389");

        // Request the use of the "GSSAPI" SASL mechanism
        // Authenticate by using already established Kerberos credentials
        env.put(Context.SECURITY_AUTHENTICATION, "GSSAPI");

        try {
            // Create the initial context
            DirContext ctx = new InitialLdapContext(env, null);

            // Close the context when we're done
            ctx.close();
        } catch (NamingException e) {
            e.printStackTrace();
        }
    }
} 
```

我的 jaas_ntlm_configuration.txt 文件包含：

```
MyConfig { com.sun.security.auth.module.Krb5LoginModule required
useTicketCache=true
doNotPrompt=false;
}; 
```

我的 krb5.conf 文件是：

```
# 
# All rights reserved.
#
#pragma ident   @(#)krb5.conf   1.1 00/12/08

[libdefaults]
    default_tkt_enctypes = des3-cbc-sha1 des-cbc-md5 des-cbc-crc
    default_tgs_enctypes = des3-cbc-sha1 des-cbc-md5 des-cbc-crc
    forwardable  = true
    renewable  = true
    noaddresses = true
    clockskew  = 300

[realms]
        SUB1.DOMAIN.COM = {
                kdc = DDC.SUB1.DOMAIN.COM
        default_domain=DOMAIN.COM
        }
    SUB2.DOMAIN.COM = {
                kdc = DDC.SUB.DOMAIN.COM
        default_domain=DOMAIN.COM
        }
    SUB3.DOMAIN.COM = {
                kdc = DDC.SUB3.DOMAIN.COM
        default_domain=DOMAIN.COM
        }

[domain_realm]
    .DOMAIN.COM = SUB1.DOMAIN.COM
    .DOMAIN.COM = SUB2.DOMAIN.COM
    .DOMAIN.COM = SUB3.DOMAIN.COM

[logging]
        default = FILE:/var/krb5/kdc.log
        kdc = FILE:/var/krb5/kdc.log
    kdc_rotate = {

# How often to rotate kdc.log. Logs will get rotated no more
# often than the period, and less often if the KDC is not used
# frequently.

        period = 1d

# how many versions of kdc.log to keep around (kdc.log.0, kdc.log.1, ...)

        versions = 10
    }

[appdefaults]   
    kinit = {
        renewable = true
        forwardable= true
    }
    rlogin = {
        forwardable= true
    }
    rsh = {
        forwardable= true
    }
    telnet = {
            autologin = true 
        forwardable= true
    } 
```

我添加了以下作为java参数：

```
-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.krb5.conf="krb5.conf" -Dsun.security.krb5.debug=true 
```

如果我总是使用相同的子域调用 func("SUB*.DOMAIN.COM", "DDC.SUB*.DOMAIN.COM") - 它会起作用，但是如果我先调用一个子域然后再调用另一个子域，则第二个会失败。

**更多信息：**

这是 krb5.debug=true 的输出：

```
java -Xmx100m -cp gssapi_test.jar -Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.krb5.conf="krb5.conf" -Dsun.security.krb5.debug=true  gssapitest.myTest my_config.txt
2 users provided. Performing authentication #1
Reading configuration file my_config.txt
kdc: DDC.SUB1.DOMAIN.COM, realm: SUB1.DOMAIN.COM
>>>KinitOptions cache name is C:\Users\user1\krb5cc_user1
>> Acquire default native Credentials
>>> Obtained TGT from LSA: Credentials:
client=user1@SUB1.DOMAIN.COM
server=krbtgt/SUB1.DOMAIN.COM@SUB1.DOMAIN.COM
authTime=20130422075139Z
startTime=20130422075139Z
endTime=20130422175139Z
renewTill=20130429075139Z
flags: FORWARDABLE;RENEWABLE;INITIAL;PRE-AUTHENT
EType (int): 23
Subject:
    Principal: user1@SUB1.DOMAIN.COM
    Private Credential: Ticket (hex) = 
.....

Client Principal = user1@SUB1.DOMAIN.COM
Server Principal = krbtgt/SUB1.DOMAIN.COM@SUB1.DOMAIN.COM
Session Key = EncryptionKey: keyType=23 keyBytes (hex dump)=
0000: 2B 8C 97 3C 8E 83 66 F1   6D 58 6C 37 20 0E 1F 53  +..<..f.mXl7 ..S

Forwardable Ticket true
Forwarded Ticket false
Proxiable Ticket false
Proxy Ticket false
Postdated Ticket false
Renewable Ticket true
Initial Ticket true
Auth Time = Mon Apr 22 15:51:39 2013
Start Time = Mon Apr 22 15:51:39 2013
End Time = Tue Apr 23 01:51:39 2013
Renew Till = Mon Apr 29 15:51:39 2013
Client Addresses  Null 

Connecting to LDAP
Config name: krb5.conf
Found ticket for user1@SUB1.DOMAIN.COM to go to krbtgt/SUB1.DOMAIN.COM@SUB1.DOMAIN.COM expiring on Tue Apr 23 01:51:39 2013
Entered Krb5Context.initSecContext with state=STATE_NEW
Service ticket not found in the subject
>>> Credentials acquireServiceCreds: same realm
default etypes for default_tgs_enctypes: 16 3 1.
>>> CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType
>>> EType: sun.security.krb5.internal.crypto.ArcFourHmacEType
>>> KdcAccessibility: reset
>>> KrbKdcReq send: kdc=DDC.SUB1.DOMAIN.COM UDP:88, timeout=30000, number of retries =3, #bytes=1554
>>> KDCCommunication: kdc=DDC.SUB1.DOMAIN.COM UDP:88, timeout=30000,Attempt =1, #bytes=1554
>>> KrbKdcReq send: #bytes read=107
>>> KrbKdcReq send: kdc=DDC.SUB1.DOMAIN.COM TCP:88, timeout=30000, number of retries =3, #bytes=1554
>>> KDCCommunication: kdc=DDC.SUB1.DOMAIN.COM TCP:88, timeout=30000,Attempt =1, #bytes=1554
>>>DEBUG: TCPClient reading 1497 bytes
>>> KrbKdcReq send: #bytes read=1497
>>> KdcAccessibility: remove DDC.SUB1.DOMAIN.COM
>>> EType: sun.security.krb5.internal.crypto.ArcFourHmacEType
>>> KrbApReq: APOptions are 00000000 00000000 00000000 00000000
>>> EType: sun.security.krb5.internal.crypto.DesCbcMd5EType
Krb5Context setting mySeqNumber to: 1005735013
Krb5Context setting peerSeqNumber to: 0
Created InitSecContextToken:
.....

Krb5Context.unwrap: token=[60 33 06 09 2a 86 48 86 f7 12 01 02 02 02 01 00 00 ff ff ff ff 94 52 14 5b f6 02 28 1c a4 3c c5 8f 03 9c a2 d6 e5 f6 f1 18 ed 6f 16 ab 07 a0 00 00 04 04 04 04 ]
Krb5Context.unwrap: data=[07 a0 00 00 ]
Krb5Context.wrap: data=[01 01 00 00 ]
Krb5Context.wrap: token=[60 33 06 09 2a 86 48 86 f7 12 01 02 02 02 01 00 00 ff ff ff ff 2d b6 92 0d d9 51 da aa ef 41 67 33 5c de b3 e6 ce 9a 46 31 a0 a8 0e 27 01 01 00 00 04 04 04 04 ]
Connected
Disconnected
#1: Done
Performing authentication #2
Reading configuration file my_config.txt
kdc: DDC.SUB2.DOMAIN.COM, realm: SUB2.DOMAIN.COM
>>>KinitOptions cache name is C:\Users\user1\krb5cc_user1
>> Acquire default native Credentials
>>> Obtained TGT from LSA: Credentials:
client=user1@SUB1.DOMAIN.COM
server=krbtgt/SUB1.DOMAIN.COM@SUB1.DOMAIN.COM
authTime=20130422075139Z
startTime=20130422075139Z
endTime=20130422175139Z
renewTill=20130429075139Z
flags: FORWARDABLE;RENEWABLE;INITIAL;PRE-AUTHENT
EType (int): 23
Subject:
    Principal: user1@SUB1.DOMAIN.COM
    Private Credential: Ticket (hex) = 
.....

Client Principal = user1@SUB1.DOMAIN.COM
Server Principal = krbtgt/SUB1.DOMAIN.COM@SUB1.DOMAIN.COM
Session Key = EncryptionKey: keyType=23 keyBytes (hex dump)=
0000: 2B 8C 97 3C 8E 83 66 F1   6D 58 6C 37 20 0E 1F 53  +..<..f.mXl7 ..S

Forwardable Ticket true
Forwarded Ticket false
Proxiable Ticket false
Proxy Ticket false
Postdated Ticket false
Renewable Ticket true
Initial Ticket true
Auth Time = Mon Apr 22 15:51:39 2013
Start Time = Mon Apr 22 15:51:39 2013
End Time = Tue Apr 23 01:51:39 2013
Renew Till = Mon Apr 29 15:51:39 2013
Client Addresses  Null 

Connecting to LDAP
Found ticket for user1@SUB1.DOMAIN.COM to go to krbtgt/SUB1.DOMAIN.COM@SUB1.DOMAIN.COM expiring on Tue Apr 23 01:51:39 2013
Entered Krb5Context.initSecContext with state=STATE_NEW
Service ticket not found in the subject
>>> Credentials acquireServiceCreds: same realm
default etypes for default_tgs_enctypes: 16 3 1.
>>> CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType
>>> EType: sun.security.krb5.internal.crypto.ArcFourHmacEType
>>> KrbKdcReq send: kdc=DDC.SUB1.DOMAIN.COM UDP:88, timeout=30000, number of retries =3, #bytes=1554
>>> KDCCommunication: kdc=DDC.SUB1.DOMAIN.COM UDP:88, timeout=30000,Attempt =1, #bytes=1554
>>> KrbKdcReq send: #bytes read=107
>>> KrbKdcReq send: kdc=DDC.SUB1.DOMAIN.COM TCP:88, timeout=30000, number of retries =3, #bytes=1554
>>> KDCCommunication: kdc=DDC.SUB1.DOMAIN.COM TCP:88, timeout=30000,Attempt =1, #bytes=1554
>>>DEBUG: TCPClient reading 1482 bytes
>>> KrbKdcReq send: #bytes read=1482
>>> KdcAccessibility: remove DDC.SUB1.DOMAIN.COM
>>> EType: sun.security.krb5.internal.crypto.ArcFourHmacEType
KrbException: Message stream modified (41)
    at sun.security.krb5.KrbKdcRep.check(Unknown Source)
    at sun.security.krb5.KrbTgsRep.<init>(Unknown Source)
    at sun.security.krb5.KrbTgsReq.getReply(Unknown Source)
    at sun.security.krb5.KrbTgsReq.sendAndGetCreds(Unknown Source)
    at sun.security.krb5.internal.CredentialsUtil.serviceCreds(Unknown Source)
    at sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(Unknown Source)
    at sun.security.krb5.Credentials.acquireServiceCreds(Unknown Source)
    at sun.security.jgss.krb5.Krb5Context.initSecContext(Unknown Source)
    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)
    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)
    at com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)
    at com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)
    at com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)
    at com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)
    at com.sun.jndi.ldap.LdapCtx.<init>(Unknown Source)
    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)
    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)
    at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)
    at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)
    at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
    at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
    at javax.naming.InitialContext.init(Unknown Source)
    at javax.naming.ldap.InitialLdapContext.<init>(Unknown Source)
    at gssapitest.JndiAction.performJndiOperation(myTest.java:603)
    at gssapitest.JndiAction.run(myTest.java:577)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Unknown Source)
    at gssapitest.myTest.Do(myTest.java:59)
    at gssapitest.myTest.main(myTest.java:513)
javax.naming.AuthenticationException: GSSAPI [Root exception is javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]]
    at com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)
    at com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)
    at com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)
    at com.sun.jndi.ldap.LdapCtx.<init>(Unknown Source)
    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)
    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)
    at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)
    at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)
    at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
    at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
    at javax.naming.InitialContext.init(Unknown Source)
    at javax.naming.ldap.InitialLdapContext.<init>(Unknown Source)
    at gssapitest.JndiAction.performJndiOperation(myTest.java:603)
    at gssapitest.JndiAction.run(myTest.java:577)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Unknown Source)
    at gssapitest.myTest.Do(myTest.java:59)
    at gssapitest.myTest.main(myTest.java:513)
Caused by: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]
    at com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)
    ... 18 more
Caused by: GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))
    at sun.security.jgss.krb5.Krb5Context.initSecContext(Unknown Source)
    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)
    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)
    ... 19 more
Caused by: KrbException: Message stream modified (41)
    at sun.security.krb5.KrbKdcRep.check(Unknown Source)
    at sun.security.krb5.KrbTgsRep.<init>(Unknown Source)
    at sun.security.krb5.KrbTgsReq.getReply(Unknown Source)
    at sun.security.krb5.KrbTgsReq.sendAndGetCreds(Unknown Source)
    at sun.security.krb5.internal.CredentialsUtil.serviceCreds(Unknown Source)
    at sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(Unknown Source)
    at sun.security.krb5.Credentials.acquireServiceCreds(Unknown Source)
    ... 22 more
FAILED 
```

我能做些什么？我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-17T19:01:57.173

谢谢你！仅供参考，领域的大写字母（即领域应该 100% 正确且大写）对于避免“异常：krb_error 41 消息流已修改 (41)”非常重要。

下面是一个正确记法的例子：

```
[libdefaults] 
default_realm = EXAMPLE.COM

[realms] 
EXAMPLE.COM = { 
kdc = domaincontroller.example.com
admin_server = domaincontroller.example.com
default_domain = EXAMPLE.COM
} 

[domain_realm] 
.example.com = EXAMPLE.COM
example.com = EXAMPLE.COM 
```

问候，

尼卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:04:40.163

NTLM != Kerberos。Java SASL 不支持 NTLM。正确配置 Kerberos，它就会工作。

# android - 解析 JSON 时出现 NullPointer 异常

> ID：15932363
> 
> 赞同：1
> 
> 时间：2013-04-10T17:18:32.843
> 
> 标签：android, json, nullpointerexception

我正在尝试从 web 服务解析 json，但我得到空指针异常。但是，如果我在浏览器中点击 url，那么我会得到结果，但在代码中它返回 null。

这是我的网址：- [http://www.expensekeeper.in/webservice/FetchBillCall.php?userid=7](http://www.expensekeeper.in/webservice/FetchBillCall.php?userid=7)

这是我的代码：-

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);     
    new LongOperation().execute("");

}

private class LongOperation extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... params) {
        String url = "http://www.expensekeeper.in/webservice/FetchBillCall.php?userid=7";
         JSONParser jsonParser = new JSONParser();
         JSONObject jsonObject = jsonParser.getJSONFromUrl(url);
         try {
             //JSONArray jsonArray = jsonObject.getJSONArray("");
            dueDate = jsonObject.getString("duedate");
            description = jsonObject.getString("description");
            status = jsonObject.getString("status");
            remarks = jsonObject.getString("remarks");
        } catch (JSONException e) {
        e.printStackTrace();
        }
          return "Executed";
    }  
    @Override
    protected void onPostExecute(String result) {
        Toast.makeText(MainActivity.this, dueDate+description+status+remarks, Toast.LENGTH_LONG).show();
   }

   } 
```

这是我的 jsonParser 类：-

```
public JSONObject getJSONFromUrl(String str) {

    HttpURLConnection conn = null;
    StringBuilder jsonResults = new StringBuilder();
    try {
        URL url = new URL(str);
        conn = (HttpURLConnection) url.openConnection();
        InputStreamReader in = new InputStreamReader(conn.getInputStream());

        // Load the results into a StringBuilder
        int read;
        char[] buff = new char[1024];
        while ((read = in.read(buff)) != -1) {
            jsonResults.append(buff, 0, read);
        }
        json = jsonResults.toString();
    } catch (MalformedURLException e) {
        Log.e(LOG_TAG, "Error processing Places API URL", e);
    } catch (IOException e) {
        Log.e(LOG_TAG, "Error connecting to Places API", e);
    } finally {
        if (conn != null) {
            conn.disconnect();
        }
    }
     try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }
     return jObj;

} 
```

这是我的堆栈跟踪：-

```
04-10 17:15:16.425: E/AndroidRuntime(1388): Caused by: java.lang.NullPointerException
04-10 17:15:16.425: E/AndroidRuntime(1388):     at com.example.jsonsample.MainActivity$LongOperation.doInBackground(MainActivity.java:40)
04-10 17:15:16.425: E/AndroidRuntime(1388):     at com.example.jsonsample.MainActivity$LongOperation.doInBackground(MainActivity.java:1) 
```

我不明白我的代码出了什么问题。为什么我从服务器获取空值。
请给我任何参考。
提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:25:41.217

**编辑：**

`getJSONFromUrl(String str)`将from返回的类型更改 `JSONObject`为`JSONArray`。

然后像这样直接创建 JSONArray

`JSONArray array=new JSONArray(json);` // json 是你的 json 字符串

`getJSONFromUrl(String str)`在方法中返回数组

* * *

您的服务返回 JSONArray

根据上述响应，您的服务返回 JSONArray ，而不是 JSONObject，因此当您尝试将 JSONArray 转换为 JSONObject 时，它也会抛出 JSONException。

```
 JSONObject jsonObject = jsonParser.getJSONFromUrl(url); 
```

所以这会给你返回null，

正如您的 jsonObject 一样`null`，您正尝试在此处访问它

```
dueDate = jsonObject.getString("duedate"); 
```

你会得到`NullPointerException`

# java - Java：在 Eclipse 添加项目中处理相对文件路径

> ID：15932371
> 
> 赞同：1
> 
> 时间：2013-04-10T17:18:43.780
> 
> 标签：java, eclipse, file, classpath

我已经通过以下方式从以前的项目（Project OLD）中添加了我的 Eclipse 项目（Project NEW）代码：

**[新建项目] > 构建路径 > 配置构建路径... > Java 构建路径 > 项目 > [旧项目]**

但是，在我的**旧项目**中，有一些引用相对文件路径的常量名称。像这样的东西：

```
final static String FILEPATH = "dir/subdir/.." 
```

当我在**旧项目**中测试代码时，一切正常，因为相关文件路径已正确扩展。但是，当我在**New Project**中测试代码（它引用了我的**Old Project**中的代码）时，它失败了。

**发生这种情况是因为我的New Project**中的相对文件路径是通过使用预先不正确的路径（的**New Project**）来扩展的。

例如：

```
[New Project's filepath]/dir/subdir/...                      //Wrong 
```

安装：

```
[Old Project's filepath]/dir/subdir/...                       //Right! 
```

如何解决？谢谢你的帮助。

# php - 阻止外部访问 PHP 脚本但允许 AJAX

> ID：15932375
> 
> 赞同：2
> 
> 时间：2013-04-10T17:18:57.513
> 
> 标签：php, ajax, security

我已经阅读了很多关于 .htaccess 规则、检查标头、使用加密等的内容。但我还没有找到我想要的确切答案。我知道，假设服务器设置正确，您将无法使用 AJAX 访问我宝贵的 PHP 脚本。我尝试检查是否定义了一个访问变量，该变量不允许地址栏访问但也阻止了我的 AJAX 请求。

如果我有一些用于 AJAX 调用的 PHP 脚本，**是否有办法阻止地址栏访问、PHP POST（cURL 等）以及来自我域外部的 AJAX**（假设通过跨域访问限制）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:27:15.027

没有**办法**绝对**安全/可靠地**识别请求来自浏览器的哪个部分——地址栏、AJAX。有一种方法可以通过 User-Agent 标头识别通过浏览器/curl/etc 发送的内容（但不可靠）

一个快速但不太可靠的解决方案是检查以下标题。大多数浏览器使用 AJAX 调用附加它。请务必彻底调查并实施。

```
X-Requested-With: XMLHttpRequest 
```

**注意**：如果资源很重要，请不要相信客户。你最好实现一些其他的访问过滤方式。请记住，任何人都可以伪造标题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:27:58.683

您可以检查请求是否不是 Ajax 请求并禁止它，但由于可以操纵标头，因此它并不安全。

您可以做的是阻止除允许访问这些文件的 IP 之外的所有 IP。

可以做的是实现一种身份验证，其中外部应用程序必须将凭据发送到您的脚本，并且脚本会检查客户端是否有效。

方法很多，但它们都不是实现最大安全性的最佳方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T02:44:15.977

我不确定。然而——间接地，你可以做到这一点。传递一个唯一且不断变化的参数（GET 或 POST），只有您可以访问该参数作为来源证明。如果请求缺少这个唯一变量，那么它不是来自您。跳出框框思考这个问题。可以是你想要的任何东西，这里有一些想法。

1) 传递数学方程的结果作为来源证明。您可以以编程方式预测的东西，但对于窥探标头黑客来说并不明显。即`cos($dayOfYear)`甚至更好`base64_encode(base64_encode(cos($dayOfYear)))`。

2）在数据库中存储一个唯一键，每次有人访问该页面时该键都会更改。然后将该密钥与请求一起传递，并在结束页面上进行一些检查，如果它们与数据库密钥不匹配，您就找到了偷窥者。（请注意，将涉及确保密钥在请求传输之间没有更改的逻辑）

ETC..

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-26T10:51:19.270

尝试从 POST 访问中捕获 isset SERVER['HTTP_ORIGIN'] ，它必须与您的域相同。如果是这样，那么 POST 是由您自己的网站生成的，并且可以安全地处理它。

# concurrency - 读写器同步问题

> ID：15932377
> 
> 赞同：3
> 
> 时间：2013-04-10T17:19:07.523
> 
> 标签：concurrency, process, synchronization, readerwriterlock

我无法理解为什么第一个读写器问题会使写入进程饿死，即：代码如何为读取器进程提供优先级？当其中一个读取器进程执行时，写入器进程是否应该无法获得锁`signal(wrt)`？信号量列表是结构化的（正如我所见，写入者将如何被 LIFO 列表中稳定的读取器进程流饿死）以优先考虑读取器进程，还是我误解了这里的一些基本内容？

```
semaphore wrt=1,mutex=1;
readcount=0;
writer()
{
    wait(wrt);
    //writing is done
    signal(wrt);
}

reader()
{
    wait(mutex);
    readcount++;
    if(readcount==1)
        wait(wrt);
    signal(mutex);
    ///Do the Reading
    ///(Critical Section Area)
    wait(mutex);
    readcount--;
    if(readcount==0)
       signal(wrt);
    signal(mutex);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:24:05.197

如果您始终有 2 个或更多阅读器处于活动状态，`signal(wrt)`则永远不会在阅读器块的末尾调用。新读者不会有`readcount == 1`，所以他们不会等待 wrt，但他们会增加阅读次数。这使得无休止的读取请求使写入线程饿死。如果读者计数为 0，则 wrt 将被释放，并且 writer 最终可以工作。在那之前，读者有优先权。

这不是精确的 LIFO 方法，而是读者拥有优先权的优先队列。

# c# - 编译项目后创建 c# 函数

> ID：15932378
> 
> 赞同：0
> 
> 时间：2013-04-10T17:19:08.787
> 
> 标签：c#, function, dynamic

我很好奇这是否可能。是否可以使用富文本框创建 ac# exe 项目，如果我输入例如

```
public void TestFunction(){
    MessageBox.Show("test");
}; 
```

它会执行代码并构建函数吗？我不知道这是否有意义。这只是我今天遇到的那些小问题之一，我不知道在哪里可以找到答案，甚至不知道它叫什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:20:54.997

俄亥俄州 有可能。请参阅[Reflection.Emit](http://msdn.microsoft.com/en-us/library/3y322t50.aspx)命名空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:23:01.880

当然可以使用反射，但这是一项艰巨的工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:21:51.103

所以基本上你想写一个解释器和编译器。

是的，这些东西是存在的，这就是你的代码的工作方式。

否则，C# 中内置的反射类可能适用于一些小东西。

# apache - Apache 反向代理到 https 服务器

> ID：15932379
> 
> 赞同：1
> 
> 时间：2013-04-10T17:19:12.053
> 
> 标签：apache, https, reverse-proxy

我正在尝试为某些 Web 服务设置反向代理，以便可以在 localhost 上开发 JavaScript Ajax 应用程序。我已经设法通过以下方式使用 Apache 来做到这一点：

```
ProxyPass /serviceproxy/ http://someservice.com/
ProxyPassReverse /serviceproxy/ http://someservice.com/
ProxyHTMLURLMap http://someservice.com/  /serviceproxy/

<Location /serviceproxy>
       ProxyPassReverse        /
       ProxyHTMLEnable On
       ProxyHTMLURLMap         / /serviceproxy/
       ProxyHTMLURLMap         http://someservice.com/
       RequestHeader    unset  Accept-Encoding
</Location> 
```

这适用于 http 网页，但不适用于 https 页面。如果我将代理设置为[https://someservice.com/](https://someservice.com/)，Apache 返回 500 Internal server error。我是 Apache 配置的新手。如何让它发挥作用？甚至可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T10:44:42.427

您必须启用 Ssl 模块 (a2enmod ssl) 然后在 /etc/apache2/sites-available/default 文件中包含以下行

```
RequestHeader set X-Forwarded-Proto "https"
ServerName localhost
SSLProxyEngine On
RequestHeader set Front-End-Https "On" 
```

行间

```
ServerAdmin webmaster@localhost 
```

和线

```
DocumentRoot /var/www 
```

希望能帮助到你。

# asp.net-mvc - SPA 模板中的 Web API 在传递用户名和密码时返回状态 401 Unauthorized

> ID：15932383
> 
> 赞同：0
> 
> 时间：2013-04-10T17:19:21.717
> 
> 标签：asp.net-mvc, authentication, asp.net-web-api, restful-authentication, single-page-application

在 SPA 模板中测试 WebAPI 身份验证时，我可以使用 Google Chrome 中的此 URL 创建用户、登录并检索示例待办事项：

```
http://myhost.com:49688/api/TodoList 
```

当我尝试使用 curl 或通过 Fiddler 检索待办事项时，我返回 HTTP/1.1 401 Unauthorized 状态。

**我正在使用的 curl 命令：**

```
curl --request GET -H "Content-Type: application/json" http://uname:pass@myhost.com:49688/api/TodoList 
```

**Fiddler** 解析查询：

```
GET http://myhost.com:49688/api/TodoList 
```

请求标头：

```
User-Agent: Fiddler
Host: localhost:49688
Authorization: Basic YWxpYmVyc29uOnRlc3R0ZXN0 
```

如果我提供用户名和密码，为什么会收到返回状态 401？（我用 myhost 代替了 localhost）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:38:07.510

我认为您正在使用反 CSRF 过滤器。为防止跨站点请求伪造，客户端需要包含服务器注入 HTML 页面的验证令牌。这可以防止恶意网站捎带您的登录凭据。

请参阅“反 CSRF 保护”部分中的[http://www.asp.net/single-page-application/overview/introduction/knockoutjs-template 。](http://www.asp.net/single-page-application/overview/introduction/knockoutjs-template)

更多背景信息：[http ://www.asp.net/web-api/overview/security/preventing-cross-site-request-forgery-(csrf)-attacks](http://www.asp.net/web-api/overview/security/preventing-cross-site-request-forgery-(csrf)-attacks)

# jenkins - Jenkins，如果上游作业失败或不稳定，则阻止或失败作业

> ID：15932388
> 
> 赞同：6
> 
> 时间：2013-04-10T17:19:32.317
> 
> 标签：jenkins

如果任何上游作业失败或不稳定，阻止或失败 Jenkins 下游作业的最佳方法是什么？

目前，我已经勾选了“上游项目正在构建时块构建”选项，并且工作正常，因为我的下游工作正在等待所有上游工作完成构建。但是，如果任何上游失败或不稳定，我不想建立这项工作。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:19:17.700

当您根据先前的作业创建作业时，触发器在底部的触发作业和顶部的触发作业中都可见。如果您查看底部的触发作业，则有一些选项可以决定是仅在成功时触发作业，还是不管作业的结果如何。

确保设置中的`Build Other Projects`设置设置为`Trigger only if build succeeds`

# twitter-bootstrap - Channels、Bootstrap Carousel 和 ExpressionEngine 让我发疯

> ID：15932391
> 
> 赞同：0
> 
> 时间：2013-04-10T17:19:45.837
> 
> 标签：twitter-bootstrap, expressionengine, carousel, channel

我知道有人已经在这里解决了有关频道和表达式引擎的问题，但对我没有任何帮助！还是真的很挣扎。我只能在轮播中显示一个帖子，按钮不显示任何其他幻灯片，这让我**发疯**！

如果有人可以提供帮助，我将不胜感激。我到目前为止的代码是：

```
<div id="myCarousel" class="carousel slide">
<div class="carousel-inner">
  {exp:channel:entries channel="front_page" limit="1" dynamic="off"}
  <div class="{if count==1}active {/if}item">
    {body}
  </div>
  {/exp:channel:entries}
</div>
<a class="carousel-control left" href="#myCarousel" data-slide="prev">‹&lt;/a> 
<a class="carousel-control right" href="#myCarousel" data-slide="next">›&lt;/a> 
```

我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:38:55.887

删除 limit="1" 参数将是我的第一个建议。

# selenium-grid - 在 Amazon EC2 上运行 Selenium Grid2 时找不到 Firefox 二进制文件

> ID：15932397
> 
> 赞同：0
> 
> 时间：2013-04-10T17:20:28.463
> 
> 标签：selenium-grid

我已经设置了我的 Amazon EC2 实例，并且能够运行我的测试并成功连接，但是，我无法为 FireFox 运行测试。

我收到以下错误...

```
[remote server] org.openqa.selenium.firefox.internal.Executable(Executable.java):53:in `<init>': Cannot find firefox binary in PATH. Make sure firefox is installed. OS appears to be: LINUX (Selenium::WebDriver::Error::UnknownError) 
```

我已经安装了 XVFB、FireFox 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:53:40.767

解决方案是将 FireFox 位置添加到 PATH。

# android - MvxBindableLinearLayout ItemsSource 绑定问题

> ID：15932400
> 
> 赞同：1
> 
> 时间：2013-04-10T17:20:39.310
> 
> 标签：android, binding, android-linearlayout, mvvmcross

我在设计活动时遇到问题。

我正在尝试使用 Mvx.MvxBindableLinearLayout，绑定到列表：A、B 和 c；

当我执行此绑定时，结果是： A B C C B A

正确的应该是：A B C

有问题的代码是：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
     xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:local="http://schemas.android.com/apk/res/m2uMobileSales.Droid"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     >

  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:local="http://schemas.android.com/apk/res/m2uMobileSales.Droid"
      android:orientation="vertical"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:showDividers="none"
      android:layout_weight="1">

    <include
        layout="@layout/PageCommon_Titlebar" />

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tableLayout1"
        android:divider="@null"
        android:dividerHeight="0dp"
        android:stretchColumns="1">
      <TableRow
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:id="@+id/tableLayout1"
          android:stretchColumns="1">
        <!--Customer Name-->
        <TextView
            android:id="@+id/CustomerName"
            android:layout_width="fill_parent"
             android:layout_height="wrap_content"
            android:textSize="30dp"
            android:layout_weight="1"
            local:MvxBind="{'Text':{'Path':'Customer.CustDetails.Name','Mode':'OneWay'}}" />
      </TableRow>

      <TableRow>
        <!--Detail Pages android:padding="12dp" -->

        <Mvx.MvxBindableLinearLayout
             android:padding="3dip"
             android:id="@+id/ClienteDetails"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
              android:divider="@null"
              android:dividerHeight="0dp"
              android:orientation="vertical"
              android:cacheColorHint="#00000000"
              android:layout_weight="1"
              local:MvxItemTemplate="@layout/listitem_clientdetailpages"
              local:MvxBind="{'ItemsSource':{'Path':'DetailPageViewModels'}}"/>

        <!--<Mvx.MvxBindableListView
            android:id="@+id/ClienteDetails"
            android:divider="@null"
            android:dividerHeight="0dp"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:cacheColorHint="#00000000"
            android:layout_weight="1"
            local:MvxItemTemplate="@layout/listitem_clientdetailpages"
            local:MvxBind="{'ItemsSource':{'Path':'DetailPageViewModels', 'Mode':'OneWay'}}" />-->
      </TableRow>

    </TableLayout>

  </LinearLayout>

</ScrollView> 
```

如果我使用注释 Mvx.MvxBindableListView，我只能看到第一项。目标是滚动所有元素而不是列表，就像android的定义一样。克服这个问题后，我将在一个列表中有一个列表（DetailPageViewModels 将有几个元素，包括一个列表）。

我看过几篇建议在 ScrollView 中插入所有元素的帖子。

我试过评论 Mvx.MvxBindableLinearLayout，ScrollView 和 MvxBindableListView 效果很好。如果我使用 ScrollView，我只会看到第一个元素。

我的目标是使用 MvxBindableLinearLayout，因为我需要滚动整个页面和非元素。

listitem_clientdetailpages 代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:local="http://schemas.android.com/apk/res/m2uMobileSales.Droid"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:showDividers="none"
    android:layout_weight="1">

  <!--Page Title-->
  <TextView
      android:id="@+id/detailpagetitle"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:textSize="24dp"
       android:padding="3dip"
      local:MvxBind="{'Text':{'Path':'Title','Mode':'OneWay'}}" >
  </TextView>

</LinearLayout> 
```

我为混乱道歉。

感谢您的帮助和可用性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:21:28.133

我刚刚在 v3 中尝试过，这段代码按预期工作：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:local="http://schemas.android.com/apk/res/com.cirrious.dailydilbert"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
  >
   <Mvx.MvxLinearLayout
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       local:MvxBind="ItemsSource Items;ItemClick ItemSelectedCommand"
       local:MvxItemTemplate="@layout/listitem_dilbert" />
</ScrollView> 
```

对于您发布的代码，我真的看不出 LinearLayout 中有任何问题。如果我可以看到列表项的模板和视图模型列表本身，这可能会有所帮助。如果您认为存在错误，请在某处发布一个简单的复制品，我会查看它 - 复制品越完整，我可以越快查看它 - 即理想情况下在 github repo 上发布完整的解决方案 - 我可以下载然后运行它。

对于可绑定的 ListView，我会对该属性有点怀疑`android:layout_height="wrap_content"`——怀疑它可能无法正常工作。

* * *

更新，我也在教程应用程序中尝试过，将 ListView 替换为 LinearLayout `Page_MainMenuView.axml`：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:local="http://schemas.android.com/apk/res/Tutorial.UI.Droid"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
  >  
<Mvx.MvxLinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    local:MvxBind="ItemsSource Items;ItemClick ShowItemCommand"
    local:MvxItemTemplate="@layout/listitem_viewmodel"
  />
</ScrollView> 
```

这显示完美 - 这在您的设置中是否也有效？

如果是这样，那么问题一定出在您未包含的代码中...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T10:53:19.337

我是 Paulo Dias 的同事，我们刚刚弄清楚发生了什么……问题在于创建`MvxBindableLinearLayout`

在构造函数中，我们有

```
 Adapter = new MvxBindableListAdapterWithChangedEvent(context);
 Adapter.DataSetChanged += AdapterOnDataSetChanged; 
```

在属性“适配器”的“集合”中，我们有

```
var existing = _adapter;
if (existing == value)
    return;

if (existing != null && value != null)
{
    existing.DataSetChanged -= AdapterOnDataSetChanged;
    value.ItemsSource = existing.ItemsSource;
    value.ItemTemplateId = existing.ItemTemplateId;
}

if (value != null)
{
    value.DataSetChanged += AdapterOnDataSetChanged;
} 
```

第一次创建 Adapter 时，`DataSetChanged`订阅了两次事件（在构造函数中和在适配器属性的集合中）。如果我们有一个可通知的集合绑定到`MvxBindableLinearLayout`.

现在是棘手的部分……这个错误只有在我们在创建 ui 控件**后对绑定列表进行更改时才会“暴露”（即向列表中添加新项目）。**如果我们在视图模型中有一个“在构造函数中设置”的列表，然后永远不会更改，`DataSetChanged`则永远不会触发该事件。另一方面，如果我们在创建 ui 之后添加项目（即，您可以将命令绑定到按钮，将项目添加到列表中），项目将在 ui 中复制...

为了解决这个问题，我们刚刚在`MvxBindableLinearLayout`contructor 中注释了 DataSetChanged 订阅的那一行，然后一切都回到原处:)

```
 public MvxBindableLinearLayout(Context context, IAttributeSet attrs)
            : base(context, attrs)
        {
            var itemTemplateId = MvxBindableListViewHelpers.ReadAttributeValue(context, attrs,
                                                                               MvxAndroidBindingResource.Instance
                                                                                                        .BindableListViewStylableGroupId,
                                                                               MvxAndroidBindingResource.Instance
                                                                                                        .BindableListItemTemplateId);
            Adapter = new MvxBindableListAdapterWithChangedEvent(context);
            Adapter.ItemTemplateId = itemTemplateId;
            //Adapter.DataSetChanged += AdapterOnDataSetChanged;
            this.ChildViewRemoved += OnChildViewRemoved;
        } 
```

希望这可以帮助！

ps：想知道为什么以前没有人遇到过这个问题...

ps1：我们目前使用的是MvvmCross vNext。

ps2：我换了Mvvmcross V3，问题依旧。我会在 Github 中提出请求

# python - 使用 python 3.3.1 连接到 mysql 数据库的密码错误

> ID：15932403
> 
> 赞同：5
> 
> 时间：2013-04-10T17:20:46.677
> 
> 标签：python, mysql, python-3.x

我是python的新手，试图通过编写连接到我们的mysql数据库并做一些事情的服务器脚本来学习一些东西。我有 python 3.3.1 和 mysql 5.0.96（社区）。我安装了 mysql 连接器/python，并尝试使用 mysql 开发站点上的示例代码进行基本连接。这是我的简单python脚本：

```
#!/usr/local/bin/python3

import sys
import mysql.connector

db_config = {
    'user': 'joebloggs',
    'password': 'cleartext_passwd',
    'host': '127.0.0.1',
    'database': 'mydb'
}
cnx = mysql.connector.connect(**db_config)
cursor = cnx.cursor()
query = ('select usable_name, user_id from user')
cursor.execute(query)
for (usable_name, user_id) in cursor:
    print("{} is the usable name of {d}".format(usable_name, user_id))
cursor.close()
cnx.close() 
```

但我在连接数据库时遇到错误

```
"Authentication with old (insecure) passwords "\
mysql.connector.errors.NotSupportedError: Authentication with old (insecure) passwords is not supported. For more information, lookup Password Hashing in the latest MySQL manual 
```

我究竟做错了什么？非常感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:22:05.767

MySQL 支持两种密码加密方案，而您使用的是旧的旧版本。较新的客户拒绝使用它们，因为它们很容易破解。

您需要将密码更新为新样式：[http ://dev.mysql.com/doc/refman/4.1/en/old-client.html](http://dev.mysql.com/doc/refman/4.1/en/old-client.html)

# c# - 可以安装ironruby nuget包然后在香草VS2012中使用

> ID：15932406
> 
> 赞同：5
> 
> 时间：2013-04-10T17:21:17.027
> 
> 标签：c#, .net, ironruby

我有兴趣在ASPNET MVC 站点中使用 ruby​​ 脚本 ( [https://github.com/zmoazeni/csscss )。](https://github.com/zmoazeni/csscss)我以前没有使用红宝石的经验，所以我的问题可能很幼稚。

是否可以导入 ironruby nuget 包并执行 ruby​​ 脚本？

我的目标是在 ruby​​ 脚本周围放置一个 .net 包装器，并将输出作为 HTML 输出。

* * *

到目前为止，我已经尝试用谷歌搜索开始使用 ironruby，但没有发现太多我理解并且可以开始工作的东西，（是的，这听起来很模糊，但我不知道 ruby​​ 或 Ironruby，也找不到任何好的简单入门指南）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:40:05.223

我在[https://github.com/edymtt/csscss-from-ironruby](https://github.com/edymtt/csscss-from-ironruby)实现了一个简单的概念证明，它在控制台应用程序中显示如何使用 IronRuby 运行源代码`csscss`来分析从文件加载的 CSS。为了达到这个结果，我从这个[SO question](https://stackoverflow.com/questions/1684145/call-ruby-or-python-api-in-c-sharp-net)开始——你可以在程序的评论中找到我使用的其他资源。我没有在 ASP.net MVC 站点中尝试过这段代码——无论如何，这个示例应该是一个很好的起点。

此解决方案维护起来有点麻烦，因为您必须手动将`csscss`及其依赖库的源代码放入解决方案中。另一种解决方案是在机器上安装 Ruby，`csscss`使用安装`gem`（因此它会自动下载依赖项）并从 .NET 调用程序——我还将在示例中展示这种方法。请注意，此解决方案要求您可以在 Web 服务器上安装 Ruby。

**更新 2013-09-02 18:15 UTC**根据 Zach Moazeni 的建议，我已经能够简化使用 IronRuby 运行的方法，`csscss`并且我已经相应地更新了概念证明。简而言之：

*   在 .NET 程序之外，我使用 bundler 下载`csscss`和`json`（和依赖的 gem）到项目的本地文件夹；
*   在 .NET 程序中，我编写了一个函数来发现由创建的 gem 文件夹中库的所有路径`bundler`（通过查找`gems`文件夹，然后为每个子文件夹包含该`lib`文件夹，该算法受到[此 SO 线程](https://stackoverflow.com/questions/6181684/how-does-require-rubygems-help-find-rubygem-files)的启发）；
*   在启动之前，我已将此路径列表传递给 IronRuby 解释器`csscss`。

这种方法应该结合仅使用 .NET 来运行程序的能力，以及由`gem`和提供的易于更新`bundler`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:19:50.547

我是 csscss 的作者，因此我构建了 JSON 输出。

```
csscss -j file.css 
```

这不是一个完美的解决方案，但它不会输出人类可读的文本，而是输出可以从任何语言/运行时解析的 JSON。

# mysql - 将数据从 LAN webapp 发布到公共站点

> ID：15932410
> 
> 赞同：0
> 
> 时间：2013-04-10T17:21:39.200
> 
> 标签：mysql, tomcat, web-applications, struts2, tomcat6

我有一个struts 2 webapp。IT 运行良好，目前只能通过办公室 LAN 访问。客户希望能够将数据库中的一些数据发布到公共网站。我想听听一些关于如何做到这一点的想法。

我的设置是 tomcat 6 并使用 MYSQL 作为数据库。

我正在考虑创建一个 php 网站并在公共网络服务器上拥有一个几乎重复的数据库。也许我可以创建一个 XML 字符串并在公共站点上触发它。然后会有一个 php 页面解析 XML 并将其放入公共数据库中。

关于如何解决这个问题的任何想法？

# angularjs - AngularJS $resource 错误 - TypeError: Object # 没有“推”的方法

> ID：15932422
> 
> 赞同：22
> 
> 时间：2013-04-10T17:22:17.797
> 
> 标签：angularjs

我的控制器文件中有以下内容：

```
var Subject = $resource('/api/TestAccounts/:action', { applicationId: 3 }, {
   'getSelect': { method: 'GET', params: { action: 'GetSelect' } }
});

Subject.getSelect({ applicationId: 3 },
   function (resp) {
      $scope.testAccounts = resp;
      gridData = null;
   }
); 
```

我的服务器代码运行并返回：

```
[{"id":5,"name":"xxx"},{"id":6,"name":"yyy"}] 
```

但是我收到以下错误：

```
TypeError: Object #<g> has no method 'push'
    at copy (http://127.0.0.1:81/Scripts/angular.js:577:21) 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-10T17:52:30.670

`isArray`如果要从服务器返回数组，则需要在资源定义中将参数设置为 true。

```
var Subject = $resource('/api/TestAccounts/:action', { applicationId: 3 }, {
  'getSelect': { method: 'GET', isArray: true, params: { action: 'GetSelect' } }
}); 
```

参见：[AngularJS $resource API](http://docs.angularjs.org/api/ngResource.$resource)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-15T19:55:34.187

默认情况下，GET 需要一个对象 {}，QUERY 需要一个数组 []。在您的情况下，Web API 为 GET 返回一个数组，因此您需要将 GET 的 isArray 标志设置为 true。如果您的 Web API 返回一个对象，那么您不需要重置该标志，因为它是 GET 的默认行为。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-02T14:53:19.887

我只是更改`MyService.get(...)`为`MyService.query(...)`因为`.get()`需要一个对象并`.query()`需要一个数组。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-15T21:01:21.747

我知道这篇文章有点陈旧，但是当我今天遇到这个问题时，我找到了解决方案。在下面的帖子之后，我实现了 joelwreed 的解决方案（线程的一半）。它会在尝试推送之前检查目标是否为数组，从而解决了问题。

[链接到在 github 上提交的问题](https://github.com/angular/angular.js/issues/1044)

# ios - glDrawElements 不显示任何内容

> ID：15932423
> 
> 赞同：2
> 
> 时间：2013-04-10T17:22:33.910
> 
> 标签：ios, objective-c, opengl-es, opengl-es-2.0, glkit

我正在尝试在 iOS 上学习 OpenGL。我正在关注本教程。

[http://www.raywenderlich.com/5235/beginning-opengl-es-2-0-with-glkit-part-2](http://www.raywenderlich.com/5235/beginning-opengl-es-2-0-with-glkit-part-2)

我确定我仔细按照步骤操作，但是当我走到尽头时，只是在屏幕上看不到任何形状。

[https://gist.github.com/seanhess/5356598](https://gist.github.com/seanhess/5356598)

我确实看到背景颜色发生了变化，因此 OpenGL 正常工作。只是对 glDrawElements 的调用似乎没有做任何事情。

```
glDrawElements(GL_TRIANGLES, sizeof(Indices)/sizeof(Indices[0]), GL_UNSIGNED_BYTE, 0); 
```

他有一些演示代码，但它与您在教程中编写的代码不同，我想在粘贴之前了解为什么这不起作用。

GLKBaseEffect 应该在哪里绘制？我不明白我们是如何实际使用它的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:33:17.957

以下似乎是错误的，因为所有顶点都是相同的：

```
// these are not TRIANGLES, they are vertices
const Vertex Vertices[]  = {
    {{1, -1, 0}, {1, 0, 0, 1}},
    {{1, -1, 0}, {1, 0, 0, 1}},
    {{1, -1, 0}, {1, 0, 0, 1}},
    {{1, -1, 0}, {1, 0, 0, 1}},
}; 
```

即使其他一切都是正确的，您的三角形也会退化，因为所有顶点都是重合的。当您固定坐标时，请确保索引以逆时针方式引用顶点，或者，对于您的第一次实验，更好的是，调用

```
glDisable(GL_CULL_FACE); 
```

在绘图之前。您可以尝试像这样选择顶点：

```
// these are not TRIANGLES, they are vertices
const Vertex Vertices[]  = {
    {{-.9, -.9, 0}, {1, 0, 0, 1}},
    {{.9, -.9, 0}, {1, 0, 0, 1}},
    {{-.9, .9, 0}, {1, 0, 0, 1}},
    {{.9, .9, 0}, {1, 0, 0, 1}},
};

// These are the trianges. Just reference the vertices
const GLubyte Indices[] = {
    0, 1, 2,
    2, 1, 3
}; 
```

**编辑**

尝试评论更新的第二部分：

```
/*
// Set the projection matrix of the effect. It defines the field of view
float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 40., 10.0);
self.effect.transform.projectionMatrix = projectionMatrix;

// Rotate about z axis
// the model view matrix is the transform applied to any geometry that the effect renders
GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0, 0, -6);
_rotation += 90 * self.timeSinceLastUpdate;
modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, GLKMathDegreesToRadians(_rotation), 0, 0, 1);
self.effect.transform.modelviewMatrix = modelViewMatrix;
 */ 
```

您定义的矩阵将您的对象置于最终图像之外。当您在屏幕上看不到任何内容时，您首先应该检查的是转换矩阵。在您的情况下，问题在于透视转换：

```
GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 40., 10.0); 
```

您平移和旋转的对象必须位于此调用的第 3 和第 4 个参数之间的距离才能被绘制，实际上第 3 个参数是所谓的*近*平面的距离，并且必须小于第 4 个参数，远*平面*。对于这两个参数，一个安全的赌注通常是 1 和 100。

```
GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 1.0, 100.0); 
```

**编辑 2**

以下是工作版本。

```
//
//  HelloGLKitViewController.m
//  OpenGL2Tutorial
//
//  Created by Sean Hess on 4/10/13.
//  Copyright (c) 2013 Sean Hess. All rights reserved.
//

#import "HelloGLKitViewController.h"

typedef struct {
    float Position[3];
    float Color[4];
} Vertex;

// these are not TRIANGLES, they are vertices
const Vertex Vertices[]  = {
    {{-.9, -.9, 0}, {1, 0, 0, 1}},
    {{.9, -.9, 0}, {1, 0, 0, 1}},
    {{-.9, .9, 0}, {1, 0, 0, 1}},
    {{.9, .9, 0}, {1, 0, 0, 1}},
};

// These are the trianges. Just reference the vertices
const GLubyte Indices[] = {
    0, 1, 2,
    2, 1, 3
};

@interface HelloGLKitViewController () {
    GLuint _vertexBuffer;
    GLuint _indexBuffer;
    float _rotation;
    float _currentRed;
    BOOL _increasing;
}

@property (nonatomic, strong) EAGLContext * context;
@property (nonatomic, strong) GLKBaseEffect * effect;
@end

@implementation HelloGLKitViewController

// I think this method just fills the objective-c stuff with the information from my c structs
- (void)setupGL {
    [EAGLContext setCurrentContext:self.context];
    self.effect = [GLKBaseEffect new];

    glGenBuffers(1, &_vertexBuffer); // supposed to be an array of buffers, doing that trick again
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer); // when I say "GL_ARRAY_BUFFER" I mean _vertexBuffer
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);

    glGenBuffers(1, &_indexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);
}

- (void)tearDownGL {
    [EAGLContext setCurrentContext:self.context];
    glDeleteBuffers(1, &_vertexBuffer);
    glDeleteBuffers(1, &_indexBuffer);
    self.effect = nil;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];
    if (!self.context) NSLog(@"FAiled to create ES Context");
    GLKView * view = (GLKView *)self.view;
    view.context = self.context;

    // will automatically pause when interrupted
    self.pauseOnWillResignActive = YES;

    [self setupGL];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
    [self tearDownGL];
}

#pragma mark - GLKViewDelegate

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {

    glClearColor(_currentRed, 0.0, 0.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    // have to call after you change any properties in the effect, before drrawing
    [self.effect prepareToDraw];

    // We don't have to do this again, since we did it above in setupGL
    // They're already bound to GL_ARRAY_BUFFER and GL_ELEMENT_ARRAYBUFFER
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);

    // remember my vertex array contains Vertex(s)
    // so we're telling it how to read it
    // position is 3 floats, the offset is based on that offsetof function
    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid*) offsetof(Vertex, Position));

    glEnableVertexAttribArray(GLKVertexAttribColor);
    glVertexAttribPointer(GLKVertexAttribColor, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid*) offsetof(Vertex, Color));

    // 1\. pretty much always use triangles
    // 2\. the number of vertices to render. tricky way to do .length on array
    // 3\. the data type
    // 4\. seems like should be pointer to indices. We're using VBOs, so it's already set to the GL_ELEMENT_ARRAY_BUFFER. So give it 0.
    glDrawElements(GL_TRIANGLES, sizeof(Indices)/sizeof(Indices[0]), GL_UNSIGNED_BYTE, 0);

}

- (void)update {
    if (_increasing) {
        _currentRed += 1.0 * self.timeSinceLastUpdate;
    } else {
        _currentRed -= 1.0 * self.timeSinceLastUpdate;
    }
    if (_currentRed >= 1.0) {
        _currentRed = 1.0;
        _increasing = NO;
    }
    if (_currentRed <= 0.0) {
        _currentRed = 0.0;
        _increasing = YES;
    }

    // Set the projection matrix of the effect. It defines the field of view
    float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
    GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 1.0, 100.0);
    self.effect.transform.projectionMatrix = projectionMatrix;

    // Rotate about z axis
    // the model view matrix is the transform applied to any geometry that the effect renders
    GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0, 0, -6);
    _rotation += 90 * self.timeSinceLastUpdate;
    modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, GLKMathDegreesToRadians(_rotation), 0, 0, 1);
    self.effect.transform.modelviewMatrix = modelViewMatrix;

}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    self.paused = !self.paused;

    NSLog(@"timeSinceLastUpdate: %f", self.timeSinceLastUpdate);
    NSLog(@"timeSinceLastDraw: %f", self.timeSinceLastDraw);
    NSLog(@"timeSinceFirstResume: %f", self.timeSinceFirstResume);
    NSLog(@"timeSinceLastResume: %f", self.timeSinceLastResume);
}

@end 
```

# ruby-on-rails - rails 模型没有显示，也没有抛出异常

> ID：15932428
> 
> 赞同：0
> 
> 时间：2013-04-10T17:22:44.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, railscasts

我按照[这个](http://railscasts.com/episodes/111-advanced-search-form-revised)railscast 在我的应用程序上实现搜索，但是在提交搜索时，页面呈现为空白。

这是我的`show.html.erb`

```
<div class"row">
    <div class="span12">
        <h1>Resultados para <%= @search.keywords %>: <%= @search.noticias.size %></h1>
    </div>
</div> 
```

和我的`search.rb`

```
class Search
  include Mongoid::Document
  include Mongoid::Timestamps

  field :keywords, type: String

  def noticias
    @noticias ||= find_news
  end

  private 
  def find_news
    noticia = Noticia.fulltext_search(keywords)
    noticia
  end 
```

结尾

这是html输出：

```
<h1>Resultados para : 0</h1> 
```

我很确定我在这里遗漏了一些愚蠢的东西，但我看不到

**编辑**

`search_controller.rb`

```
class SearchesController < ApplicationController
  def new
    @search = Search.new
  end

  def create
    @search = Search.create!(params[:search])
    redirect_to @search
  end

  def show
    @search = Search.find params[:id]
  end
end 
```

实际上，搜索是保存在 mongodb 上的，所以我认为我不会错过`keyword`任何地方，因为该应用程序仅在我将当前关键字保存到模型并显示当前搜索模型后才进行搜索

表格

```
<%= form_for Search.new, :html => { :class => "navbar-search pull-right"} do |f| %>
    <input type="text" class="span2 search-query" placeholder="Pesquisar notícias" name="search[keyword]">
<% end %> 
```

# tomcat - 具有 CONFIDENTIAL 传输保证的 URL 仍可使用 HTTP 访问

> ID：15932430
> 
> 赞同：3
> 
> 时间：2013-04-10T17:22:51.300
> 
> 标签：tomcat, jakarta-ee, https, web.xml

我做了以下步骤：
1）通过 keytool 创建了一个自签名证书
2）在 server.xml 中的 8443 端口上配置了一个连接器
3）检查了 localhost:8080 和 localhost:8433 是否都可以访问
4）添加了以下安全约束我的 web.xml

```
<security-constraint>
   <web-resource-collection>
        <web-resource-name>securedapp</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

当我去 时`http://localhost:8080/MyApp/`，没有重定向到`https://localhost:8443/MyApp/`。据我了解，对传输保证为机密的 URL 使用 HTTP 的请求应使用 HTTPS 自动重定向到相同的 URL。

但是，我的应用程序仍然可以访问，并且可以同时使用 HTTP 和 HTTPS。我正在使用 Tomcat 6.0.36。我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:50:52.113

回答我自己的问题。

我发现这种行为是由`secure`HTTP 连接器的标志引起的。我之前设置它用于测试目的，并忘记了它。

当 HTTP 连接器`secure="true"`在浏览器中有并且没有现有的 JSESSIONID cookie 时：

*   对于 HTTP 请求，JSESSIONID 存储在 URL 中
*   对于 HTTPS 请求，JSESSIONID 存储在 cookie 中
*   机密传输保证不会导致使用 HTTPS 重定向到相同的 URL

当 HTTP 连接器具有`secure="false"`：

*   正如预期的那样，对于传输保证为 CONFIDENTIAL 的 URL 使用 HTTP 的请求会使用 HTTPS 自动重定向到相同的 URL

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-28T09:32:41.867

实际上，这种配置效果很好。通过这些设置，您可以获得 302 重定向到 https 端口。在正常情况下，它会透明地发生（例如在浏览器、邮递员中），这就是它起作用的原因。如果您真的需要确保它是否按预期工作，您可以使用带有详细输出的 CURL

```
curl -v http://localhost:80/your_resources/ 
```

然后您将看到每个步骤并将命令重定向到

```
https://localhost:443/your_resources/ 
```

# cygwin - 制作：密码：找不到命令

> ID：15932434
> 
> 赞同：0
> 
> 时间：2013-04-10T17:23:08.020
> 
> 标签：cygwin, mingw

我是使用 make 文件的新手。我有 cygwin 和 MinGW。我仍在研究他们的差异。

无论如何，我有一个用于为 FPGA 创建项目的 makefile，这是我以前从未做过的。我已在我的 PATH 中包含 C:\cygwin\bin 和 C:\MinGW\msys\1.0\bin，但我总是收到此错误。

```
make: pwd: Command not found 
```

我在 cmd 提示符下输入了 pwd 并得到了正确的响应。任何指针？我错过了什么吗？不知道我还能尝试什么。我发现的大多数与此错误有关的论坛都没有解决方案。

让我知道你想要什么信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:36:12.487

`pwd`通常是由 GNU coreutils（Cygwin 默认安装）提供的 shell 内置命令和独立可执行文件。

如果您`make`从 Cygwin 环境中调用（例如，`make`在 bash shell 提示符下键入），那么`C:\cygwin\bin`指定目录的方法是错误的。这就是从 Windows 看到的路径。在 Cygwin 中，它是`/bin`-- 并且应该在您的 default`$PATH`中。`C:\MinGW\msys\1.0\bin`Cygwin相当于`/cygdrive/c/mingw/msys/1.0/bin`

如果您直接从 Windows 而不是在 Cygwin 子系统中执行此操作，那么`C:\cygwin\bin`是 Cygwin bin 目录的路径——但运行`C:\cygwin\bin\pwd`将为您提供一个对 Windows 没有意义的 Cygwin 特定目录名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T05:16:51.773

我在 mingw 环境中遇到了同样的问题。在我的情况下，结果是 msys/bin 目录中缺少“pwd”可执行文件。一旦复制正确完成，一切就到位了。希望这可以帮助

# android - 从菜单单击重新加载时 Webview 崩溃

> ID：15932438
> 
> 赞同：0
> 
> 时间：2013-04-10T17:23:17.467
> 
> 标签：android, webview

我正在处理一个 Android 简单演示中的错误。当我单击菜单时，我有我的互联网检查例程和一个带有重新加载调用的 webview。这是我的代码

```
package com.example.test;

import android.app.Activity;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {
    public static final int DIALOG_NONETWORK = 0;
    WebView mywebview=null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final WebView mywebview = (WebView) findViewById(R.id.webview);

        if(!Connection()){
            String data = "<html>"  +  
                    "<body><h1>NO INTERNET</h1></body>"  +  
                    "</html>";
            mywebview.loadData(data, "text/html", "UTF-8"); 
            Log.v("INTERNET","NO");

        }else{
            mywebview.loadUrl("http://www.google.com"); 
            Log.v("INTERNET","YES");

        }
        mywebview.setWebViewClient(new WebViewClient() {
            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                String data = "<html>"  +  
                        "<body><h1>NO INTERNET</h1></body>"  +  
                        "</html>";
                mywebview.loadData(data, "text/html", "UTF-8"); 

            } 
        });

    }
    public boolean Connection() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfoMob = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
        NetworkInfo netInfoWifi = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        if ((netInfoMob != null || netInfoWifi != null) && (netInfoMob.isConnectedOrConnecting() || netInfoWifi.isConnectedOrConnecting())) {
            return true;
        }
        return false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) 
        {
        switch (item.getItemId()) 
            {
                case R.id.action_settings:
                    mywebview.reload();
                    Log.v("INTERNET","RELOAD");

                    break;

            }
                    return super.onOptionsItemSelected(item);
        }
} 
```

当我单击菜单“action_settings”时，应用程序在重新加载功能时崩溃。我怀疑它`mywebview.setWebViewClient(new WebViewClient()`与`final WebView mywebview = (WebView) findViewById(R.id.webview);`

有什么帮助或建议吗？

```
04-10 17:41:03.537: E/ActivityThread(669): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ce2948 that was originally bound here
04-10 17:41:03.537: E/ActivityThread(669): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ce2948 that was originally bound here
04-10 17:41:03.537: E/ActivityThread(669):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-10 17:41:03.537: E/ActivityThread(669):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-10 17:41:03.537: E/ActivityThread(669):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-10 17:41:03.537: E/ActivityThread(669):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-10 17:41:03.537: E/ActivityThread(669):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-10 17:41:03.537: E/ActivityThread(669):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-10 17:41:03.537: E/ActivityThread(669):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-10 17:41:03.537: E/ActivityThread(669):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
04-10 17:41:03.537: E/ActivityThread(669):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
04-10 17:41:03.537: E/ActivityThread(669):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
04-10 17:41:03.537: E/ActivityThread(669):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-10 17:41:03.537: E/ActivityThread(669):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-10 17:41:03.537: E/ActivityThread(669):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-10 17:41:03.537: E/ActivityThread(669):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-10 17:41:03.537: E/ActivityThread(669):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-10 17:41:03.537: E/ActivityThread(669):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-10 17:41:03.537: E/ActivityThread(669):  at java.lang.Thread.run(Thread.java:856)
04-10 17:41:03.557: E/StrictMode(669): null
04-10 17:41:03.557: E/StrictMode(669): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ce2948 that was originally bound here
04-10 17:41:03.557: E/StrictMode(669):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-10 17:41:03.557: E/StrictMode(669):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-10 17:41:03.557: E/StrictMode(669):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-10 17:41:03.557: E/StrictMode(669):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-10 17:41:03.557: E/StrictMode(669):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-10 17:41:03.557: E/StrictMode(669):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-10 17:41:03.557: E/StrictMode(669):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-10 17:41:03.557: E/StrictMode(669):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
04-10 17:41:03.557: E/StrictMode(669):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
04-10 17:41:03.557: E/StrictMode(669):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
04-10 17:41:03.557: E/StrictMode(669):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-10 17:41:03.557: E/StrictMode(669):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-10 17:41:03.557: E/StrictMode(669):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-10 17:41:03.557: E/StrictMode(669):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-10 17:41:03.557: E/StrictMode(669):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-10 17:41:03.557: E/StrictMode(669):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-10 17:41:03.557: E/StrictMode(669):  at java.lang.Thread.run(Thread.java:856)
04-10 17:41:03.657: E/ActivityThread(669): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cecbf8 that was originally bound here
04-10 17:41:03.657: E/ActivityThread(669): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cecbf8 that was originally bound here
04-10 17:41:03.657: E/ActivityThread(669):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-10 17:41:03.657: E/ActivityThread(669):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-10 17:41:03.657: E/ActivityThread(669):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-10 17:41:03.657: E/ActivityThread(669):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-10 17:41:03.657: E/ActivityThread(669):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-10 17:41:03.657: E/ActivityThread(669):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-10 17:41:03.657: E/ActivityThread(669):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-10 17:41:03.657: E/ActivityThread(669):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
04-10 17:41:03.657: E/ActivityThread(669):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
04-10 17:41:03.657: E/ActivityThread(669):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-10 17:41:03.657: E/ActivityThread(669):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-10 17:41:03.657: E/ActivityThread(669):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-10 17:41:03.657: E/ActivityThread(669):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-10 17:41:03.657: E/ActivityThread(669):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-10 17:41:03.657: E/ActivityThread(669):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-10 17:41:03.657: E/ActivityThread(669):  at java.lang.Thread.run(Thread.java:856)
04-10 17:41:03.697: E/StrictMode(669): null
04-10 17:41:03.697: E/StrictMode(669): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cecbf8 that was originally bound here
04-10 17:41:03.697: E/StrictMode(669):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-10 17:41:03.697: E/StrictMode(669):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-10 17:41:03.697: E/StrictMode(669):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-10 17:41:03.697: E/StrictMode(669):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-10 17:41:03.697: E/StrictMode(669):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-10 17:41:03.697: E/StrictMode(669):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-10 17:41:03.697: E/StrictMode(669):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-10 17:41:03.697: E/StrictMode(669):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
04-10 17:41:03.697: E/StrictMode(669):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
04-10 17:41:03.697: E/StrictMode(669):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-10 17:41:03.697: E/StrictMode(669):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-10 17:41:03.697: E/StrictMode(669):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-10 17:41:03.697: E/StrictMode(669):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-10 17:41:03.697: E/StrictMode(669):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-10 17:41:03.697: E/StrictMode(669):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-10 17:41:03.697: E/StrictMode(669):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:08:29.093

好吧，正如我所怀疑的

```
final WebView mywebview = (WebView) findViewById(R.id.webview); 
```

是问题所在。

我把它改成

```
 mywebview = (WebView) findViewById(R.id.webview); 
```

并像魅力一样工作。

无论如何，谢谢，希望它会帮助别人。

# magento - 下订单时增值税消失

> ID：15932439
> 
> 赞同：1
> 
> 时间：2013-04-10T17:23:19.397
> 
> 标签：magento, coupon

我在购物车价格规则和系统配置中设置了优惠券代码规则，我在“应用客户税”选项中设置了“折扣后”。

我使用 firecheckout 扩展程序进行结帐，并且在查看是否应用优惠券代码时一切正常。

但是，当点击下订单时，所有订单的所有增值税都会从总金额中扣除/扣除。只有当我改回“折扣前”时，增值税才能再次起作用。

Magento v1.6.2

# java - 无法实例化类型 HttpConnection

> ID：15932441
> 
> 赞同：0
> 
> 时间：2013-04-10T17:23:20.280
> 
> 标签：java, android, adt, httpconnection

以下是我的 android java 代码的一部分，我收到错误“无法实例化类型 HttpConnection”

```
import org.apache.http.HttpConnection;
import android.app.Activity;
import android.app.AlertDialog;

public class MainActivity_test extends Activity 
{
   int resultcode,flag;    
   public static final int DIALOG_LOADING_PROGRESS = 0;
   HttpConnection con;
con = new HttpConnection();
.
.
.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:25:25.673

[HttpConnection](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpConnection.html)是一个接口，因此您不能从中构造一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:25:37.437

`org.apache.http.HttpConnection`是一个接口，所以你不能用它创建对象。查看[API](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpConnection.html)

# javascript - 如果语句不接受变量值

> ID：15932443
> 
> 赞同：1
> 
> 时间：2013-04-10T17:23:24.897
> 
> 标签：javascript, jquery

我有这个代码：

```
meJi = 33;
$.ajax({
type: "POST",
url: mega,
data: string,
beforeSend: function() {
    $('#loading').html("<img src='images/loading.gif'/>").fadeIn('fast');
},
complete: function() {
    $('#loading').fadeOut('fast');
},
success: function(msg) {
    loading_hide();
    f = (msg).length;
    if (f <= 1250) {
        alert("su busqueda no presenta resultados");
        code(3);

        else {
            $("#container").html(msg);
            fdemandados();
        }
    }
});
function code(ig) {
    console.log(img);
    meJi = ig;
}

$("#select_comprobar3").on('click', function(event) {
    tacuba = $("#amazon").val();
    ca = "2";
    dan = "g";
    if (meJi ==3) {
        avisobusqueda2 = $("#avisofiltro").html("zzzFiltro activado Busqueda por la palabra: " + tacuba + " - clic para quitar ").fadeIn('slow');
    } else {}
    if (!tacuba) {
        alert("Debe ingresar una palabra");
    } else {
        lor = tacuba;
        var page = "1";
        loadData(page, dan, lor);
    }
    event.stopImmediatePropagation();
    return false;
}); 
```

问题是这样的：

```
if (meJi==3) { 
```

我不知道为什么，但 meJi 变量永远不会更改为 3，所以条件总是假设 meJi 是 33。

**编辑：我更改了条件部分，但问题仍然存在。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:28:00.977

在

```
function code(ig){
  console.log(img);
  meJi = ig;
} 
```

不应该`console.log(ig);`吗？你如何拥有它会导致错误（`img`未定义），因此，meJi 不会被设置。

# javascript - 将 OpenLayers.Popup 移动到 10 像素并离开 15 像素？

> ID：15932450
> 
> 赞同：0
> 
> 时间：2013-04-10T17:23:55.217
> 
> 标签：javascript, jquery, openlayers, openstreetmap

下午好，我在地图上有一个弹出窗口，我只想向左移动 10 个像素高和 15 个像素，问题是当你改变它的纬度和经度位置时，它完全处于另一个位置并且当我缩放时远离标记，我想要的只是移动到新位置，无论缩放如何，始终保持在标记上方。

```
var size   = new OpenLayers.Size(21,25);
var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
var icon   = new OpenLayers.Icon('/openlayers/img/marker.png',size,offset);
var lonlat = new OpenLayers.LonLat(long,lat);
var proj_1 = new OpenLayers.Projection("EPSG:4326");
var proj_2 = new OpenLayers.Projection("EPSG:900913");
var EPSG   = lonlat.transform(proj_1,proj_2);
var marker = new OpenLayers.Marker(EPSG, icon);
markers.addMarker(marker);
marker.events.register("click", marker, function(e){ // on click popup
    var popup = new OpenLayers.Popup.FramedCloud(id,
                marker.lonlat,
                new OpenLayers.Size(200,200),
                '<div class="popup">info example</div>',
                null,true);
    map.addPopup(popup);
});
var labelepopup = new OpenLayers.Popup(null,
    EPSG,
    new OpenLayers.Size(37,13),
    '<p style="font-size: 8.5px;">always info</p>'
);
map.addPopup(labelepopup); 
```

当 labelepopup 出现时，标记上的弹出窗口，我想要的只是将 labelepopup 容纳在标记上方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T10:09:49.387

您可以使用`getPixelFromLonLat`map 函数从纬度和经度中获取确切的像素，然后使用`Pixel`返回的对象添加或删除所需的像素。`moveTo`然后，您可以使用需要`Pixel`对象的弹出功能更改弹出位置。

像这样的东西：

```
var pixel = map.getPixelFromLonLat(popup.lonlat); //or use another OpenLayers.LonLat object
pixel.x += DESIRED_X_AMOUNT;
pixel.y += DESIRED_Y_AMOUNT;
popup.moveTo(pixel); 
```

# php - PHP路径位置

> ID：15932456
> 
> 赞同：0
> 
> 时间：2013-04-10T17:24:13.477
> 
> 标签：php, css, web

我环顾四周寻找答案，希望我没有错过它或没有重复它，但它就在这里。我有两个文件：

`/var/www/index.php`

`/var/www/include/php/header.php`

索引包括`header.php`文件。我希望头文件能够向上遍历两个级别，以便我可以包含`/include/css/index.css`. 这是问题所在，标头也包含在文件中，例如

`/var/www/sub/page.php`

所以我不能简单地使用`../../`，因为 php 文件的位置发生了变化。我尝试使用`$_SERVER['PHP_SELF']`，但这取决于包含头文件的 php 文件的位置。我也尝试过`dirname(__FILE__)`，但这给了我`/var/www/`导致包括并发症的部分。

本质上，我想要`$_SERVER['PHP_SELF']`包含`header.php`文件中的值，而不是包含它的 php 脚本中的值。我希望该站点是模块化的，因此可以将其发布到任何地方，而不必担心文件位置会混乱。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:30:19.357

认为您需要使用`__DIR__`常量才能从任何文件中相对包含文件。但更好的是，我认为为您的根文件系统路径定义一些常量，例如

```
define( 'FS_ROOT', 'root path here' ); 
```

并且当通过这个常量相对包含文件时。此外，它还允许您为每个使用的重要文件夹添加常量，如果要更改路径，您只需更改一些常量值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:44:00.890

根据您的评论，它对您来说是一个包含，`CSS`基本上不用担心您的 PHP 文件在哪里，只需从服务器的角度（Web 端）进行操作：

```
<link rel="stylesheet" type="text/css" href="/include/css/index.css"> 
```

对于`/include/css`您的应用程序文件夹中的文件（网络公开）

# 更新：

根据您更新的评论，您应该为您的应用程序（配置）存储一个变量，并调用像 CodeIgniter 一样的函数：

```
$domain_url= "http://".$_SERVER['HTTP_HOST'];
$domain_url.= tr_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']);

function base_url($url){
    return $domain_url + $url;
}

echo base_url("include/css/index.css"); 
```

**参考：** [http ://ellislab.com/codeigniter/user-guide/helpers/url_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)

# if-statement - 测试 Reg Query 是否是批处理脚本中的特定值

> ID：15932459
> 
> 赞同：0
> 
> 时间：2013-04-10T17:24:23.703
> 
> 标签：if-statement, batch-file, findstr

因此，无需复杂，我要完成的要点是，我目前正在按程序的显示名称列出 reg 查询的结果，为其分配一个数字，然后稍后按数字调用它。当它列出结果时，它会使用 findstr 从列表中过滤特定程序（例如其中包含 microsoft 的任何程序），因为我什至不希望它们成为卸载的选项。现在它基本上可以工作，除了它返回如下：

```
Let's say the programs in the Registry are: 
Microsoft Update (should be filtered)
Notepad
Java
Microsoft Word (should be filtered)
Yahoo Toolbar 
```

当我运行这个：

```
: progList64
cls
set regVar=HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall
set opt=64
echo _______________________________________________________
echo.
echo Please wait while I compile a list of known programs...
echo _______________________________________________________
echo.
echo %tab%64bit Programs
echo Index%tab%Name
set count=0
for /f "tokens=2,*" %%a in ('Reg Query %regVar% /S^|find " DisplayName"') do (
    set /a count+=1
    setlocal EnableDelayedExpansion
    for %%n in (!count!) do (
        endlocal
        set product[%%n]=%%b
        echo %%n.%tab%%%b | findstr /V /C:"Microsoft" | findstr /V /C:"Dell" | findstr /V /C:"MDOP" | findstr /V /C:"MED"
    )   
)
echo _______________________________________________________
echo.
echo ============ PRESS 'M' TO GO TO MAIN MENU =============
echo.
goto uninstallerMenu 
```

我明白了：

```
2\. Notepad
3\. Java
5\. Yahoo Toolbar 
```

因此，稍后当我从数组中调用时，您实际上可以输入 1 或 4 并选择该产品，即使它没有显示。我试图在它打印它只打印我想要的内容之前对其进行过滤，从而导致：

```
1\. Notepad
2\. Java
3\. Yahoo Toolbar 
```

我尝试使用各种 IF 语句，尝试将整个 for %%n in (!count!) 部分放在一个 IF 语句中，该语句测试 Microsoft、dell 等是否在 DisplayName 中，然后只显示和增加计数器如果它适合，但这也不起作用。我的智慧到此为止，有什么想法吗？

并且不相关并且不是很重要，但是有没有人知道更好的过滤方法，而不是每天链接整行 findstr 语句？像排除列表之类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:41:36.857

快速猜测一下，在`FOR`循环之前尝试（比如在 之后`SET COUNT...`）

```
set excluded=Microsoft Dell MDOP MED 
```

然后级联

```
|findstr /v "%excluded%" 
```

之后`FIND " Displayname"`

这应该过滤掉任何空格分隔的单词`excludeme`

`findstr`然后可以删除您现有的级联，因为这些名称在您的内部`for`循环之前被删除，因此也不会获得数字。

见 findstr /?

从 docco 的提示...

# c# - 链接按钮不适用于 JQuery 模态表单

> ID：15932463
> 
> 赞同：0
> 
> 时间：2013-04-10T17:24:32.490
> 
> 标签：c#, jquery, html, jquery-ui

我有一个带有 4 个图像按钮的 JQuery 模式表单。当模态框打开并单击这些按钮时，什么也没有发生。我知道当盒子打开时它会移出表格，但我不知道如何取回它。我在 .parent().appendTo($("form")); 上尝试了几种变体；并以许多不同的方式改变了这一点，但没有成功。目前，当我使用该框时，该框打开但整个屏幕变暗，我无法单击按钮。这是我的 JQuery 函数：

```
 <script type="text/javascript">
    $(function () {
        $("#Change").dialog({
            resizable: false,
            draggable: false,
            width: 800,
            modal: true,
            show: { effect: 'fadeIn', duration: 500 },
            hide: { effect: 'fadeOut', duration: 300 },
            autoOpen: false,
            open: function (type, data) {
                $(this).parent().appendTo($("form"));
            }
        });

        $("#ui-dialog-title-dialog").hide();
        $(".ui-dialog-titlebar").removeClass('ui-widget-header');

        $("#openChange1").click(function () {
            $("#<%=txtCardChange.ClientID %>").val("1");
            $("#Change").dialog("open");
            $('.ui-widget-overlay').live("click", function () {
                $("#Change").dialog("close");

            });
            return false;
        });

    });
</script> 
```

如果需要这里是我的 html 来调用模态表单：

```
<a id="openChange1" href="#" style="color: Red">Change Card</a> 
```

模态表单的 html 就在一个简单的 div 标签内：

```
 <div id="Change">
            \\html here
        </div> 
```

因此，任何帮助将不胜感激。如果需要，我将使用带有 .NET 4.0 的 Visual Studio 2012。按钮后面的代码在 C# 中。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T06:46:04.983

我有同样的问题，我解决了如下：

```
<script type="text/javascript">
    $(function () {
        $("#Change").dialog({
            resizable: false,
            draggable: false,
            width: 800,
            modal: true,
            show: { effect: 'fadeIn', duration: 500 },
            hide: { effect: 'fadeOut', duration: 300 },
            autoOpen: false,
            appendTo: "form"
        });

        $("#ui-dialog-title-dialog").hide();
        $(".ui-dialog-titlebar").removeClass('ui-widget-header');

        $("#openChange1").click(function () {
            $("#<%=txtCardChange.ClientID %>").val("1");
            $("#Change").dialog("open");
            $('.ui-widget-overlay').live("click", function () {
                $("#Change").dialog("close");

            });
            return false;
        });

    });
</script> 
```

在 jQuery UI v1.10 中，他们添加了一个 appendTo 属性，这似乎与调用 .parent().appendTo($("form")) 做同样的事情。该对话框出现在灰色背景的顶部。并且回发确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:12:57.527

```
<asp:LinkButton runat="server" id="openChange1" onclientclick="openChange1Click()" />

<script type="text/javascript">
function openChange1Click () {
        $("#<%=txtCardChange.ClientID %>").val("1");
        $("#Change").dialog("open");
        $('.ui-widget-overlay').live("click", function () {
            $("#Change").dialog("close");

        });
        return false;
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:33:35.740

正如您所提到的，JQuery 将对话框的内容移动到页面主体的直接子级以解决几个呈现问题：http: [//forum.jquery.com/topic/preventing-dialog-from-rearranging-dom-flow](http://forum.jquery.com/topic/preventing-dialog-from-rearranging-dom-flow)

问题是，如果您立即将按钮向后移动，用于使屏幕其余部分变暗并使对话框模式化（即吃点击事件）的“覆盖”div 会阻止您的按钮点击发生在原始位置。

一种解决方案是为模态和绑定单击处理程序使用更改 div 的克隆，该处理程序在原始按钮上调用 click()。

另一种选择是让按钮调用 .NET 的回发方法，而不是让普通的 HTML 表单进行提交：

```
__doPostBack("ctl00$button_name_here"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T18:30:40.247

明白了，谢谢你的帮助，它把我引向了正确的方向。

```
 $(function () {
        $("#Change").dialog({
            resizable: false,
            draggable: false,
            width: 400,
            modal: true,
            show: { effect: 'fadeIn', duration: 500 },
            hide: { effect: 'fadeOut', duration: 500 },
            autoOpen: false,
            open: function (type, data) {
                $(this).parent().appendTo("form:first");
            }
        }).parent().css('z-index', '1005');

        $("#ui-dialog-title-dialog").hide();
        $(".ui-dialog-titlebar").removeClass('ui-widget-header');
        $("#Change").hide().show();

        $("#openChange1").click(function () {
            $("#<%=txtCardChange.ClientID %>").val("1");
            $("#Change").dialog("open");
            $('.ui-widget-overlay').live("click", function () {
                $("#Change").dialog("close");
            });
            return false;
        });
    }); 
```

# canvas - Easeljs 性能下降？

> ID：15932466
> 
> 赞同：0
> 
> 时间：2013-04-10T17:25:02.077
> 
> 标签：canvas, easeljs

我一直在玩easeljs，我发现性能开始下降。在我的示例中，Chrome 大约需要 3 秒才能达到这一点，而 Safari 需要 25 秒，而 Firefox 无处不在。

**问题：**

1.  *我做错什么了*吗？
2.  *或者这是我应该从easeljs获得的性能冲击*？

**示例** 为了演示我遇到的性能损失，我在循环上创建了一个简单的圆形重绘动画，但帧速率很快开始下降。如果我恢复到纯画布 API 调用，那么它会恢复性能。

下面是我重绘的关键片段，它选择了绘制圆圈的方法：

```
if ( counter.fps > 60) {
    circle.graphics.beginFill('green')
    circle.graphics.drawCircle(0,0, w / 10)
    circle.graphics.endFill();
    stage.update();
} else {    
    context.beginPath();
    context.arc(circle.x, circle.y, w / 10, 0, 2 * Math.PI, false);
    context.fillStyle = "darkred";
    context.fill();
} 
```

请参阅此 jsfiddle 进行演示：http: [//jsfiddle.net/AshCoolman/5xYxM/9/](http://jsfiddle.net/AshCoolman/5xYxM/9/)

**我尝试过类似结果的变体**：

*   requestAnimationFrame（和一个 pollyfill）
*   较慢的 fps

**（粗略）性能时间表**（OSX 10.8.2 on mid2012 macbook air）

*铬 v26.0.1410.43*

*   0-3s = 90fps
*   3s = fps 开始下降
*   6s = fps 达到 60fps

*Safari v6.0.2 (8536.26.17)*

*   0-20s = 90fps
*   20s = fps 开始下降
*   35s = fps 达到 60fps

*火狐 v20*

*   fsFiddle 托管：完全不稳定
*   本地托管：很像 Chrome 的性能，但更不稳定

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T17:33:14.910

EaselJS 图形被保留，所以每一帧你都在添加另一个圆圈定义到`Graphics`队列中。因此，在 1000 次“重绘”调用之后，它每次绘制 1000 个圆圈。

用于`Graphics.clear()`重置绘制队列，或者只绘制一次圆圈并移动相应的形状（推荐）。

这是您的 Fiddle 的修改版本，对我来说可以获得稳定的 99fps：http: [//jsfiddle.net/5xYxM/13/](http://jsfiddle.net/5xYxM/13/)

# jquery - 我可以阻止 CSS 应用于特定元素吗？

> ID：15932468
> 
> 赞同：1
> 
> 时间：2013-04-10T17:25:13.357
> 
> 标签：jquery, css

我想这是一个奇怪的问题......我什至不知道这是否是个好主意。我可以创建一个元素并说，“我不在乎之前的样式表说什么，这就是我想要的样式吗？”

举个例子，假设我有一个样式表，上面写着：

```
button {
   /* whole bunch of stuff here, not even sure what all */
}

.someClass button {
   /* and some other crap here*/
}

.anotherClass button {
  /* and more here */
} 
```

然后我想写一些 Javascript 来做这样的事情：

```
function insertConstantButton(elemId) {
    var unchangeableButton = $('<button/>');
    unchangeableButton.css('whatIReallyWant', 'etc');
    $("#" + elemId).append(unchangeableButton);
    andNowIMagicallyStopCSSFromApplyingTo(unchangeableButton);
} 
```

就像我说的，也许这甚至是一个坏主意......只是想知道......我有一些代码创建这个按钮，它看起来很棒，但突然间我让它出现在与通常出现的不同类别的容器下，并且（惊讶）它看起来完全不同。这是我不想要的。呵呵。

更新：是的，有点知道这是个坏主意，只是想知道这是否可能。我并不惊讶它不是，因为它会有点，呃，破坏 CSS :)

对于想要一般问题而不是假设解决方案的人：我有一些代码可以添加外观一致的滚动按钮，完全符合 UI 团队希望它们的外观。我现在正试图将它们放在模态对话框中，并且模态对话框在样式表中有一堆东西，比如“.ourCompanyPopup button { stuffIDontWantOnMyScrollbars; }” 覆盖每一个都将是一个 PITA。

我可能可以将样式表更改为“.ourCompanyPopup button:not(.myPreciousScrollButtons)”之类的东西......这将完成，但可能与其他任何事情一样都是可维护性的噩梦。嗯……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:32:05.520

使用身份证。一个 ID 将覆盖 1500 万个课程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:29:01.517

简单地说：没有。

无论如何都会应用 CSS。您可以执行以下操作：

*   覆盖不需要的 CSS
*   使不需要的 css 如此具体，以至于您的按钮不包括在内

我会推荐这个：

**jQuery**

```
function insertConstantButton(elemId) {
        var unchangeableButton = $('<button class="dontchange" />');
        unchangeableButton.css('whatIReallyWant', 'etc');
        $("#" + elemId).append(unchangeableButton);
    } 
```

**CSS**

```
button:not(.dontchange) {
   /* whole bunch of stuff here, not even sure what all */
}

.someClass button:not(.dontchange) {
   /* and some other crap here*/
}

.anotherClass button:not(.dontchange) {
  /* and more here */
} 
```

如果这还不够优雅，请给按钮一个 ID 并在样式表中设置它的样式。 **jQuery**

```
function insertConstantButton(elemId) {
        var unchangeableButton = $('<button id="dontchange" />');
        $("#" + elemId).append(unchangeableButton);
    } 
```

**CSS**

```
button#dontchange {
    /* your CSS */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:29:11.503

您可以使用`!important`修饰符，但您需要将不想被覆盖的每个样式标记为`!important`：

```
button {
  background-color: red;
}

.what-i-really-want {
  background-color: blue !important;
}

function insertConstantButton(elemId) {
  var unchangeableButton = $('<button/>');
  unchangeableButton.addClass('what-i-really-want');
  $("#" + elemId).append(unchangeableButton);
  andNowIMagicallyStopCSSFromApplyingTo(unchangeableButton);
} 
```

# java - 我可以多次覆盖 servlet 的 doPost 方法吗

> ID：15932472
> 
> 赞同：-4
> 
> 时间：2013-04-10T17:25:24.547
> 
> 标签：java, servlets

我正在从主 servlet 调用另一个 servlet，通过实现 jsp 本来很容易，但我对这个实验的目标是只使用 servlet，请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:35:29.910

你不能在一个类中多次重写一个方法，所以你不能`doPost`多次重写。

如果您的意思是超载，则没有充分的理由这样做。最后，Servlet Container 只会调用这些方法中的一种。

如果您想使用单个 Servlet 处理超过 1 种类型的请求，您可以发送一个参数来指示您将执行的操作。例如：

```
@WebServlet("/person")
public class PersonCRUDServlet extends HttpServlet {

    private static final String ADD = "add";
    private static final String DELETE = "delete";

    protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
        String action = request.getParameter("action");
        //using if assuming you work with Java SE 6
        if (ADD.equals(action)) {
            add(request, response);
        } else
        if (DELETE.equals(action)) {
            delete(request, response);
        } else {
            //submitted action can't be interpreted
            //or no action was submitted
            errorForward(request, response);
        }
    }

    private void add(HttpServletRequest request, HttpServletResponse response) {
        //handle logic for add operation...
    }

    private void delete(HttpServletRequest request, HttpServletResponse response) {
        //handle logic for delete operation...
    }

    private void errorForward(HttpServletRequest request, HttpServletResponse response) {
        //handle logic for delete operation...
    }
} 
```

请注意，这是需要手动处理的大量工作（这是 Java Web MVC 框架存在的原因）。你也可以参考

*   [Java EE Web 开发，我从哪里开始，我需要什么技能？](https://stackoverflow.com/q/1958808/1065197)
*   [在 Java EE 6 中制作 Java Web 应用程序需要学习什么？](https://stackoverflow.com/q/1960280/1065197)

# android - 在 ContentProvider 中覆盖 `query()` 可防止显示最近的建议

> ID：15932482
> 
> 赞同：0
> 
> 时间：2013-04-10T17:25:42.053
> 
> 标签：android, search

我有一个存储用户搜索历史的应用程序。我现在也在添加自定义建议。这需要我再添加一个方法，并在我的类`query()`中覆盖它。`MyCustomSuggestionProvider`

但是，这样做会阻止显示最近的建议。它们仍被存储在Suggestions.db 中。当我删除`query()`要测试的方法时，最近的建议又回来了。

有谁知道如何使这两个东西一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:39:23.257

问题不是覆盖查询（），而是我处理它的方式。这是我的解决方案：

```
@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {

    Cursor recentCursor = super.query(uri, projection, selection,
            selectionArgs, sortOrder);

    query = selectionArgs[0];
    if (query == null || query.length() < 3) {

        return recentCursor;

    } else {

        query = selectionArgs[0];

        MatrixCursor customCursor = new MatrixCursor(COLUMN_NAMES);

        SearchSuggestionObject[] suggestions = getSuggestionsFromWebFeed(query);

        for (SearchSuggestionObject suggestion : suggestions) {

            customCursor.addRow(new Object[] { suggestion.getId(),
                    suggestion.getItem(), suggestion.getCat(),
                    suggestion.getItem(), suggestion.getItem(),
                    suggestion.getCat(), "android.intent.action.SEARCH" });
        }

        return customCursor;
    }
} 
```

# jquery - 为选择器定义动态变量以在 $.each 中循环

> ID：15932485
> 
> 赞同：0
> 
> 时间：2013-04-10T17:26:00.267
> 
> 标签：jquery, each

我有以下 jquery 代码：

```
$.each(test1, function (key, value) {
            //do something
        }); 
```

值 test 是一个 json 对象数组。

```
 var test1 = [{ "id": "0", "elementId": "slice10"},
 { "id": "2", "elementId": "slice12"},
 { "id": "3", "elementId": "slice13"}]; 
```

与此数组类似，我有更多数组，例如 test2、test3、test4 ...

有没有办法可以在 $.each 循环中动态替换数组的值。就像是：

```
Var i=2;

$.each(**"test"+i**, function (key, value) {
                //do something
            }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:44:26.517

您可以创建一个数组并使用符号`Object`访问其字段：`Object[property]`

```
var someObject = {
   test1: ["some", "values", "here"],
   test2: ["some", "values", "here"],
   test3: ["some", "values", "here"]
}

var index = 2;

$.each(someObject["test" + index], function (key, value) {
                //do something
            }); 
```

# java - 使用二维数组列表创建棋盘和棋子

> ID：15932487
> 
> 赞同：0
> 
> 时间：2013-04-10T17:26:11.100
> 
> 标签：java, multidimensional-array

我目前正在尝试创建一个程序，它将吐出像这样的棋盘（它在实际程序中看起来更好，只是编辑不喜欢我使用“-”符号所以我把它们放在引号中）：

```
-----------------
| | | | |K| | | |
-----------------
| |P| | | |P| | |
-----------------
| | | | | | | | |
-----------------
| | | | | | | | |
-----------------
| | | | | | | | |
-----------------
| | | | | | | | |
-----------------
| | | | | |N| | |
-----------------
| | | | |K| | | |
----------------- 
```

我使用了两种方法，一个 showBoard 方法和一个 addPiece 方法。我目前坚持使用 addPiece 方法，并且我正在尝试使该方法接受三个输入：行 int、列 int 和字符串名称（例如，仅 K 表示 king）。但是，我无法使用 addPiece 方法将碎片放在我希望它们去的地方，甚至根本无法放置。这是我到目前为止所拥有的：

```
public class ChessBoard {

public static String[][] board = new String[8][8];
public static int row = 0;
public static int col = 0;

public static void addPiece(int x, int y, String r){

    board[x][y] = new String(r);
}

public static void showBoard(){
    for (row = 0; row < board.length; row++)
    {
        System.out.println("");
        System.out.println("---------------");

        for(col = 0; col < board[row].length; col++)
        {
            System.out.print("| ");

        }
    }
    System.out.println("");
    System.out.println("---------------");
}

public static void main(String[] args) {
System.out.println(board.length);
showBoard();
addPiece(1,2,"R");
}
} 
```

我知道这与我编写 addpiece 方法的方式有关，但我仍然对如何编写该方法感到困惑，这是我最好的尝试（这是行不通的）。有没有人有什么建议？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:31:23.413

您从不打印件值

```
for(col = 0; col < board[row].length; col++)
{
    if ( board[row][col] != null ) {
        System.out.print("|" + board[row][col]);
    }
    else 
        System.out.print("| ");

} 
```

在展示板之前，您还需要添加 pience：

```
addPiece(1,2,"R"); //before
showBoard(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:30:16.663

为什么要使用 new String(r)？您的板数组已经是一个字符串数组，只需使用：

```
board[x][y] = r; 
```

另外，您在 main 中的 showBoard 方法之后添加了该片段，将它们切换

```
addPiece(1,2,"R");
showBoard(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T17:32:22.600

请注意， addPiece 正在更改板的状态。如果您想看到这种变化，您需要重新显示新的板状态。

```
public class ChessBoard {

    public static String[][] board = new String[8][8];

    public static void addPiece(int x, int y, String r){

        board[x][y] = r;//no need for new String(), board is already made of Strings.
    }

    public static void showBoard(){
        //it's generally better practice to initialize loop counters in the loop themselves
        for (int row = 0; row < board.length; row++)
        {
            System.out.println("");
            System.out.println("---------------");

            for(int col = 0; col < board[row].length; col++)
            {

                System.out.print("|"); //you're only printing spaces in the spots
                if(board[column][row] == null){
                  System.ot.print(" ");
                }else{
                  System.out.print(board[column][row]);
                }
            }
        }
        System.out.println("");
        System.out.println("---------------");
    }

    public static void main(String[] args) {
        System.out.println(board.length);
        showBoard();        //board does not have R in it yet.
        addPiece(1,2,"R");  //board now has R in it.
        showBoard();        //display the new board with R in it.
    }
} 
```

# sql - 仅使用笛卡尔积的等效 SQL 查询

> ID：15932488
> 
> 赞同：0
> 
> 时间：2013-04-10T17:26:17.140
> 
> 标签：sql, sql-server

*给定 3 个表 a ：`{id, name_eng}, b: {id, name_spa} and c: {id, name_ita}` 这是给定表的等效“产品笛卡尔查询”：*

```
select
    a.name_eng
    b.name_spa
    c.name_ita
from
    a inner join b on a.id = b.id
    left outer join c on a.id = c.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:41:04.140

我不知道你想要什么，笛卡尔积是这样的：

```
SELECT  a.name_eng
        b.name_spa
        c.name_ita
FROM a
CROSS JOIN b
CROSS JOIN c 
```

或隐式方式：

```
SELECT  a.name_eng
        b.name_spa
        c.name_ita
FROM a,b,c 
```

如果您希望使用笛卡尔积编写之前的查询（为什么？？），那么应该这样做（在 SQL Server 2000 上）：

```
SELECT  a.name_eng
        b.name_spa
        c.name_ita
FROM a,b,c
WHERE a.id = b.id 
AND a.id *= c.id 
```

如果我对“为什么？？”不够清楚，您不应该使用隐式连接，因为它们已被弃用，您应该始终使用正确的显式连接。

# ios - iPad - 解析一个非常巨大的 json - 文件（在 50 到 100 mb 之间）

> ID：15932492
> 
> 赞同：16
> 
> 时间：2013-04-10T17:26:34.213
> 
> 标签：ios, json, ipad, core-data, bigdata

我正在尝试在 iPad 上解析一个非常大的 json 文件。文件大小将在 50 到 100 mb 之间变化（有一个初始文件，每个月都会有一个新的完整数据集，将被下载、解析并保存到 coredata 中）

我正在为一家公司构建这个应用程序作为企业解决方案 - json 文件包含敏感的客户数据，它需要本地保存在 ipad 上，这样它甚至可以离线工作。当文件低于 20mb 时它可以工作，但现在数据集变得更大，我真的需要解析它。我在解析过程中收到内存警告，在第三次警告之后它就崩溃了。我有几个不同的核心数据实体，我只是设置来自 json 文件的所有值（当应用程序第一次启动时），一切都完成后，我正在做`[context save]`.

我希望有人能给我一些关于如何处理如此大的文件的建议。我正在考虑将 json 文件拆分为几个较小的 json 文件，并可能在多个线程中解析它们，但我不知道这是否是正确的方法。我想一个大问题是整个文件都保存在内存中 - 也许有某种方式可以将它“流式传输”到内存中或类似的东西？

我正在使用 JSONKit ( [https://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit) ) 来解析文件，因为我已经读过它是最快的（也许有一个较慢的更容易记忆？）。

提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-10T17:51:59.400

1) 将数据写入文件，然后使用 NSData 的**dataWithContentsOfFile:options:error:**并指定**NSDataReadingMappedAlways**和**NSDataReadingUncached**标志。这将告诉系统使用 mmap() 来减少内存占用，而不是用内存块给文件系统缓存增加负担（这会使其速度变慢，但对 iOS 的负担要小得多）。

2) 您可以使用[YAJL SAX 样式的 JSON 解析器](https://github.com/gabriel/yajl-objc)在对象解码时获取它们。

注意：我没有做过 2)，但使用了 1) 中体现的技术。

3) 我自己最终需要这样的东西，并编写了可以绑定到任何异步下载器（包括我自己的）[的 SAX-JSON-Parser-ForStreamingData 。](https://github.com/dhoerl/SAX-JSON-Parser-ForStreamingData)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T17:13:55.980

鉴于移动设备上当前的内存限制，可能无法解析 100 MB JSON 文本然后**创建**Foundation 对象的表示，该对象本身将占用大约 10 倍于源 JSON 文本大小的 RAM 量。

也就是说，您的 JSON 结果需要大约 1 GB 的 RAM 才能分配基础对象所需的空间。

因此，无论您如何获取、读取和解析输入，都可能无法创建一个巨大的 JSON 表示。你需要把它分成许多更小的。不过，这可能需要在服务器端进行修改。

另一个解决方案是这样，但更详细：

使用 SAX 样式解析器，它通过流式 API 将巨大的 JSON 作为输入，并输出几个较小的 JSON 文本（内部部分）。SAX 样式解析器可以使用 Blocks API（调度库）来传递其结果 - 较小的 JSON 异步传递给另一个 JSON 解析器。也就是说，较小的 JSON 会被提供给生成 JSON 表示的常用 JSON 解析器，而后者又会被提供给您的 CoreData 模型生成器。

您甚至可以下载巨大的 JSON 并使用 SAX 样式解析器同时解析它，同时创建更小的 JSON 并将它们同时存储到 Core Data 中。

您需要的是一个带有 SAX 风格 API 的 JSON 解析器，它可以解析输入文本块，执行速度很快，并且可以创建 Foundation 对象的表示。

我只知道一个 JSON 库具有此功能集，甚至给出的示例可以部分展示您如何准确地完成此操作：GitHub 上的 JPJson。解析器也非常快——在 ARM 上它比 JSONKit 更快。警告：它的实现是用 C++ 实现的，需要几个步骤才能将其安装在开发人员机器上。不过，它有一个有据可查的 Objective-C API。

想补充一下，我是作者 ;) 很快就会有一个更新，它利用最新的 C++11 编译器和 C++11 库功能，从而产生更快的代码（在 ARM 上比 JSONKit 快 25% 和两倍快作为 NSJSONSerialization）。

为您提供与速度相同的事实：解析器能够在 Wifi 802.11g 上 7 秒和 Wifi 802.11n 上 4 秒内下载（通过 WiFi）并解析包含 1000 个 JSON（每个 25 kByte）的 25 MB 数据，包括在 iPad 2 上创建和发布 1000 个表示。

# c# - Sqlite：重命名列和数据类型

> ID：15932493
> 
> 赞同：0
> 
> 时间：2013-04-10T17:26:34.573
> 
> 标签：c#, sqlite, android-sqlite

我正在使用 SQLite 数据库。由于 SQLite 不支持 drop/rename/reorder 列（使用 alter table 命令），我正在为以下任务编写自定义方法：（备份现有表，然后创建具有匹配要求的新表等等..）这在其他几个线程中有所描述。

以下是 DB 操作： DROP 列 RENAME（列和数据类型） ADD 列 REORDER 列。

我想知道这些操作应该按什么顺序进行？我的困惑主要在于 drop 是否应该在重命名列之前或以其他方式出现？

我还需要一些关于如何重命名列的指针，包括数据类型和移动数据？

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:39:55.933

首先，创建数据库备份，以防在以下说明中出现问题。

运算顺序应为`CREATE newtable`, `INSERT INTO newtable`, `DROP oldtable`。

为每列创建一个具有正确列名和数据类型的新表。然后做这样的事情：

```
INSERT INTO new_table(columns, ...)
(SELECT columns, ...
FROM old_table) 
```

如果新数据类型与旧数据类型不直接兼容，您可能需要对不同的数据类型执行强制转换。

您需要确保从旧表中选择的列与`INSERT INTO`语句中新表中的列定义的顺序相同。

将数据插入新表后，您可以验证是否已正确插入所有数据。请务必更新其他表中的任何外键引用，以避免外键约束出现任何问题。

然后您可以删除旧表并将新表重命名为旧表的名称：

```
DROP old_table;
ALTER TABLE new_table_name RENAME TO old_table_name; 
```

# ember.js - 什么时候通过渲染渲染，什么时候通过视图渲染？

> ID：15932502
> 
> 赞同：1
> 
> 时间：2013-04-10T17:26:59.867
> 
> 标签：ember.js

我试图弄清楚何时使用渲染以及何时通过视图渲染自定义视图。我知道使用 render 进行渲染可以获得完整的上下文（视图、控制器）。但是视图呢？View 应该用于自定义视图和处理事件。

下面的示例来自**ember 数据示例**

联系人.hbs

```
<div class="span3">
  <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">All contacts</li>
      {{#each contact in controller}}
        {{view App.ContactInListView contentBinding="contact"}}
      {{/each}}
    </ul>
  </div>
</div>
<div class="span9">
  {{outlet}}
</div> 
```

contact_in_list_view.hbs

```
App.ContactInListView = Em.View.extend({
  templateName: 'contact_in_list',
  tagName: 'li',
  classNameBindings: 'isActive:active',

  isActive: function() {
    return this.get('content.id') === this.get('controller.activeContactId');
  }.property('controller.activeContactId')
}); 
```

contact_in_list.hbs

```
{{#linkTo "contact" contact}}{{contact.fullName}}{{/linkTo}} 
```

我不能只`contact_in_list`用渲染渲染并传递一些控制器吗？我应该什么时候使用渲染和什么时候查看？经验法则是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:19:14.650

> 我不能只用 render 渲染 contact_in_list 并传递给它一些控制器吗？

帮助器`{{render}}`可以传递模型，但不能传递控制器。在这种情况下，您可能想要的是`{{each}}`助手的`itemController`属性

```
{{#each contact in controller itemController="contactInList"}}
  {{view App.ContactInListView}}
{{/each}} 
```

查看[Ember Handlebars.helpers 的 API 文档](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html)

> 我应该什么时候使用渲染和什么时候查看？经验法则是什么？

`{{render}}`当您想使用同名控制器的单例实例在当前上下文中呈现视图/模板时，请使用帮助程序。

`{{view}}`当您想在当前上下文中呈现视图而不更改到另一个控制器时，请使用帮助程序。喜欢`{{view Ember.TextField}}`

# json - 奇怪的映射行为杰克逊 JSON

> ID：15932506
> 
> 赞同：1
> 
> 时间：2013-04-10T17:27:12.347
> 
> 标签：json, jackson

我在 Android 上遇到了 Jackson 的一个奇怪的映射问题。

我有一个杰克逊映射器应该使用的“内容”类。

它看起来像这样：

```
public class content {
    private String header;
    private String subheader;
    private String bodytext;
    @JsonProperty("singleimage")
    private String image;
    @JsonProperty("uid")
    private String id;
    @JsonProperty("link")
    private String article;
    @JsonProperty("CType")
    private String cType;

    // Eclipse auto generated getters & setters
    ...
} 
```

对应的 JSON 对象如下所示：

```
{
    "header": "xyz",
    "subheader": "abc",
    "bodytext": "abc",
    "singleimage": "abc",
    "images": "abc.jpg",
    "teaser_elements": "",
    "uid": "13",
    "link": "xyz.htm",
    "CType": "row_header"
} 
```

现在，当我使用 Jackson Maper 从提供的 JSON 创建内容实例时，内容类的所有字段都会正确填充 - 除了“cType”之外的所有字段。

我已经尝试将 @JsonProperty("CType") 注释移动到 setCType 方法但仍然没有效果。

在映射类或其他任何东西时我没有得到任何异常，而且在我看来，所有映射几乎都做同样的事情（映射到字符串）我有点困惑为什么它不能与“CType”一起工作。

任何关于问题可能是什么的建议都将受到高度赞赏。

# c - 将 strcmp 与数组一起使用

> ID：15932508
> 
> 赞同：-1
> 
> 时间：2013-04-10T17:27:18.957
> 
> 标签：c, arrays, struct, strcmp

这是完整的代码。现在一直结冰

```
 typedef struct {
     char *name;
} NAME; 
```

将数组设置为空，然后我根据需要添加多少条目来扩展它。

```
NAME    *array = NULL;
int itemCount = 0; // items inserted
int arraySize = 0; // size of array
int arrayCount; //gets size of file.
int found = 0;

int Add(NAME item)
{
if(itemCount == arraySize) {

    if (arraySize == 0)
        arraySize = 3;
    else
        arraySize *= 2; // double size of array

    //relocate memory
    void *tempMemory = realloc(array, (arraySize * sizeof(NAME)));

    //error relocating memory
    if (!tempMemory)
    {
        printf("Couldn't relocate the memory \n");
        return(-1);
    }

    array = (NAME*)tempMemory;
}

array[itemCount] = item;
itemCount++;

return itemCount;
}
   void printStruct()
{
    int i;
    for(i = 0; i < arrayCount; i++)
    {
        printf("%s \n", array[i].name);
    }
}

int readFromFile()
{
    int checkResult(char[]);
    FILE *fp;
    fp = fopen("names.txt", "r");

    char names[arrayCount];

    if (fp == NULL)
    {
        printf("Cannot access file \n");
    }else{
        while(!feof(fp))
        {
            fscanf(fp, "%s", names);
            arrayCount++;
            checkResult(names);
        }
    }

    fclose(fp);

    return 1;
    }

int checkResult(char names[]){
    NAME tempStruct;

    int i;
    if(array == NULL)
    {
        tempStruct.name = malloc((strlen(names) + 1) * sizeof(char));
        strcpy(tempStruct.name, names);
        tempStruct.count = 1;
    }
    else
    {
        for(i = 0; i < arrayCount; i++)
        {
            if(strncmp(array[i].name, names, arrayCount)==0)
            {
                printf("MATCH %s", names);
                break;
            }
        }

        if(i == arrayCount)
        {
            tempStruct.name = malloc((strlen(names) + 1) * sizeof(char));
            strcpy(tempStruct.name, names);
        }

        if (Add(tempStruct) == -1)
        {
                return 1;
        }
    }
} 
```

主要是我释放内存并调用其他函数

```
int main(){
    void printStruct();
    int readFromFile();
    readFromFile();

    printStruct();

    int i;
    for (i = 0; i < arrayCount; i++)
    {
        free(array[i].name);
    }

    free(array);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:31:57.863

我们在这里所做的是循环查找第一个匹配项并在找到它时打破循环。如果我们在数组中的任何地方都没有找到它，**那么**我们添加它......

```
NAME** array = calloc( MAX_NAMES, sizeof( NAME* ) );
int    count = 0;

int checkName(char names[])
{
    if(!count)
    {
        array[0] = calloc( 1, sizeof( NAME ) );
        array[0]->name = malloc((strlen(names) + 1) * sizeof(char));
        strcpy(array[0]->name, names);
        count = 1;
    }
    else
    {
        int i;

        for(i = 0; i < count; i++)
        {
            if(strcmp(array[i]->name, names)==0)
            {
                printf("MATCH %s", names);
                break;
            }
        }

        if( i == count && count < MAX_NAMES )
        {
            array[count] = calloc( 1, sizeof( NAME ) );
            array[count]->name = malloc((strlen(names) + 1) * sizeof(char));
            strcpy(array[count]->name, names);
            count++;
        }
    }
} 
```

上面的代码首先测试看看数组不为空...如果是，则为数组创建第一个元素并分配名称。

否则，它会解析数组以查看数组中是否有任何条目与名称匹配......如果匹配，它将打破循环并且`i == count`测试将失败，因此不添加名称。

如果循环结束时没有匹配名称，那么`i == count`测试将返回 true，如果数组中有空间，我们将新名称添加到数组的末尾。

# r - ROC 曲线图：0.50 显着性和交叉验证

> ID：15932512
> 
> 赞同：1
> 
> 时间：2013-04-10T17:27:33.020
> 
> 标签：r, cross-validation, roc

我有两个使用 pROC 包绘制 ROC 曲线的问题。

**A.**显着性水平或 P 值是当 ROC 曲线下的真实（总体）面积为 0.5（零假设：面积 = 0.5）时，发现观察到的样本 ROC 曲线下面积的概率。如果 P 很小（P<0.05），则可以得出结论，ROC 曲线下面积与 0.5 显着不同，因此有证据表明实验室测试确实具有区分两组的能力。

因此，我想计算ROC曲线下的某个面积是否与0.50显着不同。我发现使用 pROC 包比较两条 ROC 曲线的代码如下，但不知道如何测试它是否为 0.5 显着。

```
library(pROC)  
data(aSAH)    

rocobj1 <- plot.roc(aSAH$outcome, aSAH$s100,  
                    main="Statistical comparison", 
                    percent=TRUE, col="#1c61b6")  

rocobj2 <- lines.roc(aSAH$outcome, aSAH$ndka, 
                     percent=TRUE, col="#008600")  

testobj <- roc.test(rocobj1, rocobj2)  
text(50, 50, 
     labels=paste("p-value =", format.pval(testobj$p.value)), 
     adj=c(0, .5))  

legend("bottomright", legend=c("S100B", "NDKA"), 
       col=c("#1c61b6", "#008600"), lwd=2) 
```

**B.**我对我的分类问题进行了 k 折交叉验证。例如，5 折交叉验证将产生 5 条 ROC 曲线。那么如何使用 pROC 包绘制这 5 条 ROC 曲线的平均值（我想要做的是在这个网页上解释但在 Python 中完成：[在此处输入链接描述](http://scikit-learn.org/0.13/auto_examples/plot_roc_crossval.html)）？另一件事是我们能否获得这条平均 ROC 曲线的置信区间和最佳阈值（类似于下面实现的代码）？

```
 rocobj <- plot.roc(aSAH$outcome, aSAH$s100b,  
                       main="Confidence intervals", 
                       percent=TRUE,  ci=TRUE, # compute AUC (of AUC by default)  
                       print.auc=TRUE) # print the AUC (will contain the CI)  

    ciobj <- ci.se(rocobj, # CI of sensitivity  
                   specificities=seq(0, 100, 5)) # over a select set of specificities  
    plot(ciobj, type="shape", col="#1c61b6AA") # plot as a blue shape  
    plot(ci(rocobj, of="thresholds", thresholds="best")) # add one threshold 
```

参考：

[http://web.expasy.org/pROC/screenshots.html](http://web.expasy.org/pROC/screenshots.html)

[http://scikit-learn.org/0.13/auto_examples/plot_roc_crossval.html](http://scikit-learn.org/0.13/auto_examples/plot_roc_crossval.html)

[http://www.talkstats.com/showthread.php/14487-ROC-significance](http://www.talkstats.com/showthread.php/14487-ROC-significance)

[http://www.medcalc.org/manual/roc-curves.php](http://www.medcalc.org/manual/roc-curves.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-13T10:58:46.443

A. 使用 a[`wilcox.test`](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/wilcox.test.html)正是这样做的。

B. 请参阅我对这个问题的回答：[特征选择 + 交叉验证，但是如何在 R 中制作 ROC 曲线，](https://stackoverflow.com/questions/20346568/feature-selection-cross-validation-but-how-to-make-roc-curves-in-r)并简单地将交叉验证的每一折中的数据连接起来（但不要使用 bootstrap、LOO、当您多次重复整个交叉验证，或者无法在运行之间比较预测时）。

# java - java中数组的GUI表示

> ID：15932513
> 
> 赞同：1
> 
> 时间：2013-04-10T17:27:41.573
> 
> 标签：java, arrays, swing, user-interface, jlabel

我对java有点陌生，我正在制作一个小程序，我需要在这个小程序中显示一个数组（数字从0到255）（我把它放在JScrollPane中）：

[RC4 密码小程序](http://www.usafa.edu/df/dfe/dfer/centers/accr/tools/RC4CipherApplet.html)

我还想稍后处理每个条目和其中的值。我尝试使用 JTable，但最大列数为 100。我为每个条目考虑了一个 JLabel，但它需要永远......

对不起，如果这是一个重复的问题，但我在这里搜索了问题，我找不到我需要的

哦，不，这不是家庭作业，我只是在为自己做一个小项目：）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:39:59.457

好吧，`JLabel`如果你做这样的事情，使用 s 不会永远：

```
for (int i = 0; i < array.length; i++) {
    contentPanel.add(new JLabel(array[i]));
} 
```

这是第一种方法。您还可以通过继承 JPanel 和覆盖来自己绘制带有数字的网格`paintComponent(Graphics)`。例子：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    int currX = 10, currY = 10; // A 10px offset
    int gridBoxSize = 50; // In pixels. Should be large enough for three digits.

    for (int i = 0; i < array.length; i++) {
        if (currX + gridBoxSize > this.getWidth()) {
            currX = 10;
            currY += gridBoxSize;
        }
        g.setColor(Color.BLACK);
        g.drawRect(currX, currY, gridBoxSize, gridBoxSize);
        g.drawString(new String(array[i]), currX + 2, currY + 2);
    }
} 
```

笔记：

*   我假设您在问题中谈论的数组是这样声明的`int[] array;`：
*   上面的代码只是一个草稿，我没有编译或测试它。

# c# - 使用代码优先模型的 Kendo 网格绑定

> ID：15932521
> 
> 赞同：0
> 
> 时间：2013-04-10T17:28:01.443
> 
> 标签：c#, kendo-ui, kendo-grid, kendo-asp.net-mvc

为什么当我的实体包含非空 ICollection 属性时剑道网格不显示数据？当我使用具有外键关系的代码优先模型时会发生这种情况 - 具有子实体的父实体使网格不显示数据，反之亦然：具有非空父实体的子实体使网格无法正常工作。这是返回数据的代码行控制器：

```
 return Json(context.SomeDBSet.ToDataSourceResult(request)); 
```

这里是实体：

```
public class ParentModel
{
    .....
    public virtual ICollection<ChildModel> ArticleContent { get; set; }

}

public class ChildModel
{
    ....
    public int? ParentModelId { get; set; }
    public virtual ParentModel ParentModel { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:28:27.383

这是解决方案：

```
 return Json(context.SomeDBSet.Select( e => new { e.X, ....  e.Id}).ToDataSourceResult(request)); 
```

不要在此处包含您的“ICollection”属性。

# java - IntelliJ IDEA 中的 java Maven 项目，如何找到不需要的依赖项？

> ID：15932526
> 
> 赞同：1
> 
> 时间：2013-04-10T17:28:13.393
> 
> 标签：java, spring, maven, intellij-idea

我正在 IntelliJ IDEA 中开发一个 Java Maven 项目，但 POM 文件有很多来自其他程序员的依赖项，我觉得该项目没有使用大多数依赖项。如何找出项目中未使用哪些依赖项。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:44:13.937

有时简单的解决方案是最好的。

一种简单的解决方案是删除所有依赖项并尝试编译您的代码。通过重新添加依赖项来修复所有编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T21:40:53.117

您是否尝试过运行 IDEA 代码检查？我认为它也检查了 Maven。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T11:36:30.673

试试 Maven 依赖插件。执行maven目标：依赖：分析

# angularjs - AngularJS routeProvider不在URL末尾添加哈希

> ID：15932536
> 
> 赞同：1
> 
> 时间：2013-04-10T17:28:30.540
> 
> 标签：angularjs, routes, coffeescript, location-provider

我配置了以下 routeProvider：

```
 angular.module('myModule').config ['$routeProvider', (provider) ->

   provider
  .when '',
     templateUrl: '/templates/dashboard.html'

  .when '/some_path/:some_param',
       templateUrl: '/templates/dashboard.html' 
```

以及包装静态服务模板中的以下内容：

我也有适当定义的 templates/dashboard.html。

当我导航到该 url 时，会加载初始页面，但是 a`#`没有附加在 URL 上，当我尝试在控制器中使用`$location.path('fooPath')`.

具体来说`$location.path('fooPath')`，将 URL 更改为`current_dashboard_path/#/`并重新加载，而我所期望的是将 URL 设置为：

`current_dashboard_path/#/`, 然后`location('fooPath')`, 将其更改为 `current_dashboard_path/#/fooPath`

一些额外的上下文：我想使用它，这样我就可以使用该`$location`服务来更改 url 而无需重新加载页面

`#`问题是，当填充 ng-view 时，如何强制 Angular 后置 a 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:11:03.363

我的 routeProvider 中缺少以下行：

```
 .when '/',
      templateUrl: '/templates/dashboard.html' 
```

此外，空白路线

```
 .when '',
     templateUrl: '/templates/dashboard.html' 
```

需要删除

那么在不重新加载页面的情况下重写URL的方法在控制器中如下：

```
 lastRoute = route.current

 scope.$on('$locationChangeSuccess', (event)->
    route.current = lastRoute
 ) 
```

# c - 带有 C 语言文件输入和输出的 shell

> ID：15932537
> 
> 赞同：1
> 
> 时间：2013-04-10T17:28:30.813
> 
> 标签：c, shell

我在后台运行交互式shell（/bin/bash，/bin/sh for ins）时遇到了一些麻烦，输入和输出在文件中重定向。我尝试了不同的东西，但它不起作用。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(void) {

    char *argve[2];
    argve[0]="/bin/sh";
    argve[1]=NULL;

    FILE *fichin, *fichout;
    fichin=fopen("/root/C/fichin.temp", "w+");
    fichout=fopen("/root/C/fichout.temp", "w+");

    dup2(fileno(fichin), 0); //stdin
    dup2(fileno(fichout), 1); //stdout
    dup2(fileno(fichout), 2); //stderr

    /*freopen("/root/C/fichin.temp", "r", stdin);
    freopen("/root/C/fichout.temp", "w+", stdout);*/

    system("/bin/sh");
    //execve("/bin/sh", argve, NULL);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T19:15:15.437

你要这个 ：

```
 /* shell interactive */

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

int main(int argc, char **argv) {

    int file_input ; 
    int file_output; 
    int size_read = 0;
    pid_t pid_command; 

    char _command[10];
    char *read_one_char=NULL;
    char command_separator;
    int i=0; 
                 /* open file input on READONLY */

                 /* open return file descriptor */
    file_input = open("fichin.temp", O_RDONLY , 0666);

    if (file_input <0 )
      {
    perror("can't open input file");
      }

    file_output = open("fichout.temp",  O_CREAT | O_TRUNC |  O_WRONLY , 0666) ;

    if (file_output < 0)
      {
    perror("can't open output file");
      }

    read_one_char = malloc(sizeof(char));
    if (read_one_char == NULL)
      {
    perror(" malloc failed ");
      }

    dup2(file_input, 0); //stdin
    dup2(file_output, 1); //stdout
    dup2(file_output, 2); //stderr

    /*reading commands assuming that each line is a command 
      command 1 
      command 2
      ..
      command n 

      you can change command_seperator 
    */

    command_separator = '\n';

    do
      {

    size_read = read(file_input,(void*)read_one_char,1);

    if (*read_one_char!=command_separator   && size_read > 0)
      {
        _command[i]=*read_one_char;
        i++;
      }
    else
      {
        _command[i--]='\0';
        i=0;

        write(1,"\n\t============ output for command ==========\n",45); 
        system(_command);

      }
      }while(size_read != 0);

    return 0;
} 
```

我写得很快；试试看，告诉我你是否想要

# php - PHP/MYSQL INSERT ON DUPLICATE KEY 失败

> ID：15932551
> 
> 赞同：1
> 
> 时间：2013-04-10T17:29:36.487
> 
> 标签：php, mysql

我只是在修改一个简单的时间表脚本，如果我在数据库中做一个简单的插入，一切都很好。我也可以更新条目没问题，我的问题是我想更新并保留信息（这在我使用的 CONCAT 上运行良好）但是一旦我使用 ON DUPLICATE KEY UPDATE 它就会中断。

```
$sql="INSERT INTO sheet(employee, workdate, location, description, timein, timeout, timespent)
VALUES('$employee', CURDATE(), '$location', '$description', '$timein', '$timeout', '$timespent')";
//ON DUPLICATE KEY UPDATE
//location=VALUES(location),
//description=VALUES(description),
//timein=VALUES(timein),
//timeout=VALUES(timeout),
//timespent=VALUES(timespent)
//WHERE employee=$employee";
echo $sql;echo "<br>";
mysql_query($sql)or die(mysql_error()); 
```

如果我取消注释重复键，我会收到“您的 SQL 语法有错误；请检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 9 行的 'WHERE employee='Eric'' 附近使用”错误。我能想到的唯一一件事是我在一张完全空的桌子上做这件事，但我认为 INSERT 会解决这个问题。我所有的 $variables 都是干净的（没有 PDO，也必须学习）只是 real_escape_string

```
$sql="INSERT INTO sheet(employee, workdate, location, description, timein, timeout, timespent)
VALUES('$employee', CURDATE(), '$location', '$description', '$timein', '$timeout', '$timespent')
ON DUPLICATE KEY UPDATE
location=VALUES(location),
description=VALUES(description),
timein=VALUES(timein),
timeout=VALUES(timeout),
timespent=VALUES(timespent)
WHERE employee='$employee'";
echo $sql;echo "<br>";
mysql_query($sql)or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:44:52.500

根据[INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)的文档，查询末尾不应有 WHERE 语句：

```
$sql="INSERT INTO sheet(employee, workdate, location, description, timein, timeout, timespent)
VALUES('$employee', CURDATE(), '$location', '$description', '$timein', '$timeout', '$timespent')
ON DUPLICATE KEY UPDATE
location=VALUES(location),
description=VALUES(description),
timein=VALUES(timein),
timeout=VALUES(timeout),
timespent=VALUES(timespent)"; 
```

笔记：

*   mysql_* 函数现已弃用。阅读[http://fr.php.net/manual/en/mysqlinfo.api.choosing.php](http://php.net/manual/en/mysqlinfo.api.choosing.php)了解更多信息。

> 推荐的 API 推荐使用 mysqli 或 PDO_MySQL 扩展。不建议在新开发中使用旧的 mysql 扩展，因为它在 PHP 5.5.0 中已被弃用，并且将来会被删除。下面提供了详细的特征比较矩阵。所有三个扩展的整体性能被认为是大致相同的。尽管扩展的性能只占 PHP Web 请求总运行时间的一小部分。通常，影响低至 0.1%。

*   如果您还没有这样做，则必须在查询中使用它们之前正确转义文本变量：

    ```
    $employee = mysql_real_escape_string($employee);
    // and so on with the other variables 
    ```

阅读[此 SQL 注入如何工作？](https://stackoverflow.com/q/332365/1409082)[为什么我不应该在 PHP 中使用 mysql_* 函数](https://stackoverflow.com/q/12859942/1409082)？了解有关这些主题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:07:30.230

例如：

```
INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE c=c+1;

UPDATE table SET c=c+1 WHERE a=1; 
```

如果您的第一列（即此处的员工）是唯一的，则将在内部考虑 where 子句

WHERE 员工='$employee'

如果它不是唯一的，它将寻找工作日期，...

```
INSERT INTO sheet(employee, workdate, location, description, timein, timeout, timespent)
VALUES('$employee', CURDATE(), '$location', '$description', '$timein', '$timeout', '$timespent')
ON DUPLICATE KEY UPDATE
[
//columns to be update
location=VALUES(location),
description=VALUES(description),
timein=VALUES(timein),
timeout=VALUES(timeout),
timespent=VALUES(timespent)
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:43:45.120

不要使用`WHERE`带有 . 的子句`ON DUPLICATE KEY UPDATE`。由`WHERE`重复键暗示。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T17:34:14.123

让员工抽动。如果它是一个字符串，它必须有引号。还要在变量周围加上花括号。

# python - Python IRC 8.1.1 类 Connection(object, metaclass=abc.ABCmeta) 的无效语法错误？

> ID：15932552
> 
> 赞同：4
> 
> 时间：2013-04-10T17:29:37.443
> 
> 标签：python, connection, irc, metaclass

在 Python 中，尝试使用 irc-8.1.1 的示例程序 irccat2.py 时，出现此错误。我在网上的任何地方都找不到它的记录。有谁知道这意味着什么，以及我该如何解决？谢谢你。

```
Traceback (most recent call last):
  File "irccat2.py", line 10, in <module>
    import irc.client
  File "C:\Python27\lib\site-packages\irc-8.1.1-py2.7.egg\irc\client.py", line 3
96
    class Connection(object, metaclass=abc.ABCMeta):
                                  ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:30:27.920

您在 Python 2 中安装了一个使用 Python 3 语法的包。

有问题的包支持 Python 2.6 和更新版本，所以这里有安装错误。包[安装脚本](https://bitbucket.org/jaraco/irc/src/b6147feabca6c255e32aeee1274427f7d85d391a/setup.py?at=default)使用`2to3`代码翻译工具*根据需要*重写代码，并且该工具似乎在不需要时运行，因为[原始`Connection`类](https://bitbucket.org/jaraco/irc/src/b6147feabca6c255e32aeee1274427f7d85d391a/irc/client.py?at=default#cl-396)使用 Python 2 语法。

删除软件包并使用正确的 Python 版本重新安装它。

# javascript - TypeError: $(...).popover is not a function bootstrap issues

> ID：15932553
> 
> 赞同：22
> 
> 时间：2013-04-10T17:29:41.323
> 
> 标签：javascript, twitter-bootstrap

我想使用 Bootstrap 弹出窗口，但我在 firebug 中不断收到此错误：

```
TypeError: $(...).popover is not a function 
```

这就是我加载它的方式：

```
 <a id="example" class="btn btn-success" data-original-title="Twitter Bootstrap Popover" data-content="It's so simple to create a tooltop for my website!" rel="popover" href="#">abc</a>

  <script src="js/modernizr-2.6.2-respond-1.1.0.min.js"></script>
  <script src="js/bootstrap.js"></script>
  <script src="js/jquery-1.9.0.js"></script>

  <script>
     setTimeout(function (){ $("#example").popover("show");},4000);
  </script>'; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-10T17:47:38.167

这对我有用，我改变了 jQuery 和 bootsrap 库的顺序。另外，我正在使用 CDN 中的库。那应该没什么区别。

```
<a id="example" class="btn btn-success" data-original-title="Twitter Bootstrap Popover" data-content="It's so simple to create a tooltop for my website!" rel="popover" 

href="#">abc</a>

  <script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
  <script src="http:////cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

  <script>
     setTimeout(function (){ $("#example").popover("show");},4000);
  </script> 
```

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2013-04-10T17:32:07.640

```
<a id="example" class="btn btn-success" data-original-title="Twitter Bootstrap Popover" data-content="It's so simple to create a tooltop for my website!" rel="popover" href="#">abc</a>
  <script>
     setTimeout(function (){ $("#example").popover("show");},4000);
  </script>
  <script src="js/modernizr-2.6.2-respond-1.1.0.min.js"></script>
  <script src="js/bootstrap.js"></script>
  <script src="js/jquery-1.9.0.js"></script> 
```

# ruby-on-rails - Rails 和 Phusion Passenger - 只能访问公共文件夹

> ID：15932554
> 
> 赞同：1
> 
> 时间：2013-04-10T17:29:47.927
> 
> 标签：ruby-on-rails, apache, passenger

我刚刚在我的 Apache 服务器上安装了 Phusion Passenger 来托管 Rails 3 应用程序。我的**虚拟主机**文件如下所示：

```
<VirtualHost *:80>
        ServerName markusdanek.com
        DocumentRoot /var/www/loremipsum/n22/public
        <Directory /var/www/loremipsum/n22>
                AllowOverride all
                Options -Multiviews
                Options -Indexes
        </Directory>
</VirtualHost> 
```

因此，当我尝试打开*loremipsum/n22* - 我只能进入*404 页面*（甚至没有 index.html）

那么我怎样才能进入我的应用程序文件夹（*localhost:3000/*或*localhost:3000/posts*）？还有什么，我必须添加到虚拟主机吗？

**我的路线.rb：**

```
get "home/index"

root :to => 'home#index' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:20:45.323

您确定 Phusion Passenger 运行正常吗？将PassengerLogLevel 设置为1，访问`example.com/n22`，然后查看您的全局Apache 错误日志以检查您是否看到任何错误。

# iphone - 如何在 UIViewController 中调整 UITableView 的大小

> ID：15932555
> 
> 赞同：0
> 
> 时间：2013-04-10T17:29:48.663
> 
> 标签：iphone

我在使用界面生成器中添加了一个`UILabel`and并调整了标签下方的大小。我也将. _ 我还检查了属性是否正确连接，因为我可以通过它更改背景颜色。请这里的任何人都可以帮我解决它。谢谢`UITableView``UIViewController``tableView``UITableView``tableView``UIViewController``UILabel``UITableView`

```
-(void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.pTableView.frame = CGRectMake(0, 50, 320, 100);        // Doesn't work

    self.pTableView.backgroundColor = [UIColor redColor];       // Works
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:25:37.473

这可能是由于自动布局而发生的。如果您在 Storyboard 中配置了布局约束，视图将不会响应对 frame 属性的更改。您可以通过取消选中文件检查器中的“使用自动布局”框来禁用故事板文件中的自动布局：

![Interface Builder 中的文件检查器](https://i.stack.imgur.com/tSesk.png)

# ruby - ruby 更新活动记录

> ID：15932563
> 
> 赞同：0
> 
> 时间：2013-04-10T17:30:18.870
> 
> 标签：ruby, rails-activerecord

我正在尝试使用以下方法更新记录：

```
nn = Npanxx.find(:all, :limit => 1, :order => 'updated desc')
nn.each do |n|
  n.state = 'some state'
  n.city = 'some city'
  n.save
end 
```

我收到一个未知的列错误。该 Npanxx 表没有`id`列。这是它不起作用的原因吗？如果是这样，我该如何解决这个问题。我也试过：

```
n.update_attributes({:state => 'some state'}) 
```

这会得到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:22:21.460

我决定只更改表格并添加一个 id 列。现在工作正常。

# python - 函数初始化和对象初始化（多处理）

> ID：15932565
> 
> 赞同：1
> 
> 时间：2013-04-10T17:30:19.497
> 
> 标签：python, oop, multiprocessing

我最近看到了一个关于[函数如何在 python 中成为对象](https://stackoverflow.com/a/3843313/852994)的答案/评论。所以，我想知道为什么当我举这个例子，并在初始化变量时围绕它创建一个类时，它的工作方式不同。（类示例收到酸洗错误）： `PicklingError: Can't pickle <type 'instancemethod'>: attribute lookup __builtin__.instancemethod failed`

有人知道为什么吗？

链接中的示例代码：

```
import multiprocessing as mp

def f(x):
    f.q.put('Doing: ' + str(x))
    return x*x

def f_init(q):
    f.q = q

def main():
    jobs = range(1,6)

    q = mp.Queue()
    p = mp.Pool(None, f_init, [q])
    results = p.imap(f, jobs)
    p.close()

    for i in range(len(jobs)):
        print q.get()
        print results.next()

if __name__ == '__main__':
    main() 
```

`f`放入类时的相同示例：

```
import multiprocessing as mp

class F:
    def __init__(self, q):
        self.q = q
    def f(x):
        self.q.put('Doing: ' + str(x))
        return x*x

def main():
    jobs = range(1,6)

    q = mp.Queue()
    p = mp.Pool(None)
    f = F(q)
    results = p.imap(f.f, jobs)
    p.close()

    for i in range(len(jobs)):
        print q.get()
        print results.next()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:37:54.540

实例方法不会自动picklable。所以

```
p.imap(f.f, jobs) 
```

失败，因为`p.imap`试图腌制参数。有一种方法可以“教”pickle[如何腌制实例方法](http://bytes.com/topic/python/answers/552476-why-cant-you-pickle-instancemethods)（请参阅 Steven Bethard 的回答），但您的代码还有另一个问题：将队列传递给实例会导致 RuntimeError：

```
RuntimeError: Queue objects should only be shared between processes through inheritance 
```

错误消息有点令人困惑（至少对我而言），因为您*可以*将队列作为参数传递给`p.imap`，但您不能`F`先将其传递给类，然后通过`f.f`.

无论如何，由于这些问题，我建议坚持使用原始代码，而不是尝试将代码包装在一个类中。

* * *

这是一个如何腌制实例方法的示例：

```
import multiprocessing as mp
import copy_reg
import types

def _pickle_method(method):
    # Author: Steven Bethard (author of argparse)
    # http://bytes.com/topic/python/answers/552476-why-cant-you-pickle-
    # instancemethods
    func_name = method.im_func.__name__
    obj = method.im_self
    cls = method.im_class
    cls_name = ''
    if func_name.startswith('__') and not func_name.endswith('__'):
        cls_name = cls.__name__.lstrip('_')
    if cls_name:
        func_name = '_' + cls_name + func_name
    return _unpickle_method, (func_name, obj, cls)

def _unpickle_method(func_name, obj, cls):
    # Author: Steven Bethard
    # http://bytes.com/topic/python/answers/552476-why-cant-you-pickle-
    # instancemethods
    for cls in cls.mro():
        try:
            func = cls.__dict__[func_name]
        except KeyError:
            pass
        else:
            break
    return func.__get__(obj, cls)

# This call to copy_reg.pickle allows you to pass methods as the first arg to
# mp.Pool methods. If you comment out this line, `pool.map(self.foo, ...)` results in
# PicklingError: Can't pickle <type 'instancemethod'>: attribute lookup
# __builtin__.instancemethod failed

copy_reg.pickle(types.MethodType, _pickle_method, _unpickle_method)

class F(object):
    def f(self, x):
        fq.put('Doing: ' + str(x))        
        return x*x

def f_init(q):
    # http://stackoverflow.com/a/3843313/190597 (Olson)
    global fq
    fq = q

def main():
    jobs = range(1,6)
    q = mp.Queue()
    p = mp.Pool(None, f_init, [q]) 
    f = F()
    results = p.imap(f.f, jobs)
    p.close()

    for r in results:
        print(r, q.get())

if __name__ == '__main__':
    main() 
```

产量

```
(1, 'Doing: 2')
(4, 'Doing: 3')
(9, 'Doing: 4')
(16, 'Doing: 1')
(25, 'Doing: 5') 
```

# html - 如何在表格单元格中对链接进行自动换行，以免破坏表格的流程？

> ID：15932566
> 
> 赞同：5
> 
> 时间：2013-04-10T17:30:21.460
> 
> 标签：html, css

我有以下 HTML 和 PHP：

```
 <?php
            if ($_POST["submit"] == "Get Articles") {
                $api_url = "https://DonutJuice:so%20many%20people%20in%20my%20bed@api.pinboard.in/v1/posts/all?format=json";

                $ch = curl_init();

                curl_setopt($ch, CURLOPT_URL, $api_url);
                curl_setopt($ch, CURLOPT_HEADER, FALSE);
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

                $json = curl_exec($ch);

                curl_close($ch);

                $values = json_decode($json, true);

                echo "<div class='article-output'>";
                echo "<table>";
                echo "<tr><th>URL</th> <th>Title</th></tr>";

                foreach ($values as $bookmark) {
                    $bookmark_url = $bookmark["href"];
                    $bookmark_title = $bookmark["description"];
                    echo "<tr><td><a href='" . $bookmark_url . "'>" . $bookmark_url . "</a></td> <td>" . $bookmark_title . "</td></tr>";
                }

                echo "</table>";
                echo "</div>";
            }
        ?> 
```

使用这个 CSS：

```
table {
    margin-top: 50px;
    padding: 5px 20px;

    background: rgba(255, 255, 255, 0.5);
    border: 1px solid #a9a8a7;
    border-radius: 5px;
}

tr {
    height: 50px;
}

th {
    color: #173769;
}

td {
    width: 60px;
    word-wrap: break-word;

    color: #444;
}

    td:first-child {
        padding-right: 30px;
    } 
```

但每当我按下处理该 PHP 的按钮时，我都会得到如下信息：

![在此处输入图像描述](https://i.stack.imgur.com/3wNmd.png)

他们仍在无情地破坏页面布局。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:46:46.470

`word-break`当行太长时，该属性可以强制进行换行

[http://tinker.io/ca0ae](http://tinker.io/ca0ae)

```
td {
    word-break: break-all;
    word-break: break-word;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:31:59.733

你总是可以在[PHP 端](http://us2.php.net/wordwrap)做到这一点：

```
echo "<tr><td><a href='" . $bookmark_url . "'>" . wordwrap($bookmark_url, 40, "\n") . "</a></td> <td>" . $bookmark_title . "</td></tr>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:37:46.743

`td`在 CSS 中编辑：

```
td {
    width: 60px;
    color: #444;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
} 
```

# sql-server - 将 ORDER BY 语句添加到 SELECT 语句

> ID：15932575
> 
> 赞同：-1
> 
> 时间：2013-04-10T17:30:56.157
> 
> 标签：sql-server

我有以下`SELECT`声明，我需要添加`ORDER BY [UserName]`.

```
SELECT * 
FROM [UserInfo] 
WHERE ([AWSAccountID] = CASE WHEN @AWSAccountID = -1 THEN [AWSAccountID] 
ELSE @AWSAccountID END) 
```

`ORDER BY`假设可以添加它，我在确定需要去哪里时遇到了一些麻烦。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T17:35:02.043

除非我遗漏了一些东西，否则您只需将您添加`ORDER BY`到查询的末尾：

```
SELECT * 
FROM [UserInfo] 
WHERE ([AWSAccountID] = CASE WHEN @AWSAccountID = -1 THEN [AWSAccountID] 
                           ELSE @AWSAccountID END)
ORDER BY [UserName] 
```

# r - 在 R 中将每周（7 天）数据汇总到每月

> ID：15932576
> 
> 赞同：1
> 
> 时间：2013-04-10T17:31:04.120
> 
> 标签：r, average, weighted

我有 7 天期间测量的数据。部分数据如下：

```
start wk    end wk      X1
2/1/2004    2/7/2004    89
2/8/2004    2/14/2004   65
2/15/2004   2/21/2004   64
2/22/2004   2/28/2004   95
2/29/2004   3/6/2004    79
3/7/2004    3/13/2004   79 
```

我想使用 X1 的加权平均值将此每周（7 天）数据转换为每月数据。请注意，某些 7 天 X1 数据将在一个月之间重叠（X1=79，2004 年 2/29 至 3/6 期间）。

具体来说，我将通过以下方式获得 2004 年 2 月的月度数据（例如 Y1）

```
(7*89 + 7*65 + 7*64 + 7*95 + 1*79)/29 = 78.27 
```

R 是否具有可以正确执行此操作的功能？（xts 库中的 to.monthly 不做我需要的）如果，不是在 R 中做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:02:45.727

将数据转换为每日数据，然后聚合：

```
Lines <- "start end X1
2/1/2004    2/7/2004    89
2/8/2004    2/14/2004   65
2/15/2004   2/21/2004   64
2/22/2004   2/28/2004   95
2/29/2004   3/6/2004    79
3/7/2004    3/13/2004   79
"

library(zoo)

# read data into data frame DF
DF <- read.table(text = Lines, header = TRUE)

# convert date columns to "Date" class
fmt <- "%m/%d/%Y"
DF <- transform(DF, start = as.Date(start, fmt), end = as.Date(end, fmt))

# convert to daily zoo series
to.day <- function(i) with(DF, zoo(X1[i], seq(start[i], end[i], "day")))
z.day <- do.call(c, lapply(1:nrow(DF), to.day))

# aggregate by month
aggregate(z.day, as.yearmon, mean) 
```

最后一行给出：

```
Feb 2004 Mar 2004 
78.27586 79.00000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T00:38:48.293

如果你愿意从你的 DF 中去掉“结束周”，apply.monthly 会像一个魅力一样工作。

```
DF.xts <- xts(DF$X1, order.by=DF$start_wk)

DF.xts.monthly <- apply.monthly(DF.xts, "sum") 
```

然后，如果您绝对需要它们，则始终可以通过添加 30 来重新创建结束日期。

# php - 为多个复选框选择带有 jQ uery 表单 POST 的所有复选框

> ID：15932577
> 
> 赞同：0
> 
> 时间：2013-04-10T17:31:06.253
> 
> 标签：php, jquery, html

对于一个项目，我想用多个复选框实现一个很好的过滤机制。我让复选框正常工作以及在选中复选框时自动发布表单的 jQuery 函数。

现在我想在复选框上方添加一个“全选”复选框，但我似乎找不到正确的方法。对于（有点）类似的问题，我已经尝试了十几种解决方案，但我无法让它正确且一致地工作。

HTML 部分是这样的：

```
<form action="<?php $_SERVER['PHP_SELF']?>" method="post">
    <input type="checkbox" /> Select All colors<br/>

    <label> <input type="checkbox" name="color[]" value="yellow"> Yellow</label><br/>
    <label> <input type="checkbox" name="color[]" value="blue"> Blue</label><br/>
    <label> <input type="checkbox" name="color[]" value="red"> Red</label><br/>
    <label> <input type="checkbox" name="color[]" value="green"> Green</label><br/><br/>

    <input type="checkbox" /> Select All brands<br/>

    <label> <input type="checkbox" name="brand[]" value="Nike"> Nike</label><br/>
    <label> <input type="checkbox" name="brand[]" value="Adidas"> Adidas</label><br/>
    <label> <input type="checkbox" name="brand[]" value="SomeBrand"> SomeBrand</label><br/>
    <label> <input type="checkbox" name="brand[]" value="SomeOtherBrand"> SomeOtherBrand</label><br/>
</form> 
```

我用来在每次单击复选框时发布表单的 jQuery 部分（还不够）：

```
$('input:checkbox:').live('click',function() {
    $(this).closest('form').submit();
}); 
```

我现在的问题是 jQuery 部分需要什么来确保它正常工作？我希望能够单击标签以取消选择该组中的所有内容并仅选择一个复选框。它还需要 POST 数组值的表单。最后，如果手动选中所有复选框，则还必须选中“全选”复选框。

希望有人可以帮助我，因为我被困了很长时间......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:51:00.123

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
        $(document).ready(function()
        {
            $("#colorall").click(function()             
            {
                var checked_status = this.checked;
                $(".color").each(function()
                {
                    this.checked = checked_status;
                });
            }); 

            $(".color").click(function(){
            if($(".color").length == $(".color:checked").length) {
            document.getElementById("colorall").checked = true;
            } else {
            $("#colorall").removeAttr("checked");
            }           
            });

            $("#brandall").click(function()             
            {
                var checked_status = this.checked;
                $(".brand").each(function()
                {
                    this.checked = checked_status;
                });
            });     

            $(".brand").click(function(){
            if($(".brand").length == $(".brand:checked").length) {
            document.getElementById("brandall").checked = true;
            } else {
            $("#brandall").removeAttr("checked");
            }           
            });

        });

        </script>

<form action="<?php $_SERVER['PHP_SELF']?>" method="post">
    <input type="checkbox" id="colorall"  /> Select All colors<br/>

    <label> <input type="checkbox" name="color[]" value="yellow" class="color"> Yellow</label><br/>
    <label> <input type="checkbox" name="color[]" value="blue" class="color"> Blue</label><br/>
    <label> <input type="checkbox" name="color[]" value="red" class="color"> Red</label><br/>
    <label> <input type="checkbox" name="color[]" value="green" class="color"> Green</label><br/><br/>

    <input type="checkbox" id="brandall"/> Select All brands<br/>

    <label> <input type="checkbox" name="brand[]" value="Nike" class="brand"> Nike</label><br/>
    <label> <input type="checkbox" name="brand[]" value="Adidas" class="brand"> Adidas</label><br/>
    <label> <input type="checkbox" name="brand[]" value="SomeBrand" class="brand"> SomeBrand</label><br/>
    <label> <input type="checkbox" name="brand[]" value="SomeOtherBrand" class="brand"> SomeOtherBrand</label><br/>
</form> 
```

# svg - d3 基本动画

> ID：15932578
> 
> 赞同：1
> 
> 时间：2013-04-10T17:31:18.960
> 
> 标签：svg, d3.js

尝试按照[此处](http://mbostock.github.io/d3/tutorial/circle.html)的教程进行操作，但没有足够的代码提供给我来弥补差距。

[这是我正在努力完成同样事情的小提琴](http://jsfiddle.net/chrisfrisina/RXpas/)，加载了 d3，但是，动画转换不会同时发生，更不用说，它只是改变属性，这是我在 SVG 硬编码中已经熟悉的东西使用 JQuery 选择器。那么我哪里错了，或者错过了船？

```
// example code doesn't work
var circle = svg.selectAll("circle");
circle.style("fill", "steelblue");
circle.attr("cy", 90);
circle.attr("r", 30);

// this does, but animations don't work
d3.selectAll('circle').style("fill", "steelblue");
d3.selectAll('circle').attr("cy", 90);
d3.selectAll('circle').attr("r", 30); 
```

我最终试图利用 d3 的补间，但我无法获得基础知识。感谢您提前提供帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T01:33:07.597

在示例代码中，svg 之前已分配给 d3 选择对象：

```
 var svg = d3.select("#chart-2").append("svg")
      .attr("width", w)
      .attr("height", h); 
```

因此，您可以使用它来选择子元素，就像在原始示例中一样。

例如。你的小提琴可以这样[重写](http://jsfiddle.net/RXpas/3/)：

```
var svg = d3.select("#svg");

//svg is now a d3.selection object.
svg.on("click", function() {
    var circle = svg.selectAll("circle");
    circle.style("fill", "steelblue");
    circle.attr("cy", 90);
    circle.attr("r", 30);
}); 
```

关于使用 d3 绑定事件的注意事项：

在匿名函数中：

*   本次活动必`d3.event`
*   dom 元素 - 而不是 d3.selection 对象 - 绑定到`this`
*   如果您将参数传递给函数，它将绑定到连接到元素的数据。

不是真正的代码，但应该显示我的意思：

```
var someD3Selection = d3.select("#someElement");

someD3Selection.on("click", function(boundData) {
    d3.event.preventDefault(); // <-- here's the event
    this; // <-- the actual dom element which is selected in someD3Selection
    d3.select(this); // <-- same as someD3Selection.
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:50:35.650

这是你要找的吗？持续时间是可选的，但是当它有点慢时更容易看到正在发生的事情。

```
$('#svg').on('click', function() {
    d3.selectAll('circle').style("fill", "grey").transition().duration(5000).style("fill", "steelblue").attr("cy", 90).attr("r", 30);
}); 
```

# ios - UIView 上的 alpha 动画不起作用

> ID：15932583
> 
> 赞同：3
> 
> 时间：2013-04-10T17:31:23.803
> 
> 标签：ios, storyboard, uistoryboard, uiviewanimation, uistoryboardsegue

我正在制作一个淡入黑色的自定义segue，换出视图控制器，然后淡出透明。不幸的是，我似乎无法做到这一点。这是代码：

```
- (void)perform {

    UIView *overlay = [[UIView alloc] initWithFrame:CGRectMake(0, 0, [self.sourceViewController navigationController].view.frame.size.width, [self.sourceViewController navigationController].view.frame.size.height)];
    [overlay setBackgroundColor:[UIColor colorWithRed:0 green:0 blue:0 alpha:0.0]];
    [[self.sourceViewController navigationController].view addSubview:overlay];

    [UIView animateWithDuration:2.0 delay:0.0 options:(UIViewAnimationOptionCurveEaseIn) animations:^{
      [overlay setAlpha:1.0];
    }completion:^(BOOL finished) {
      [[self.sourceViewController navigationController] pushViewController:[self destinationViewController] animated:NO];
      [UIView animateWithDuration:2.0 delay:0.0 options:(UIViewAnimationOptionCurveEaseIn) animations:^{
        [overlay setAlpha:0.0];
      }completion:^(BOOL finished) {
        [overlay removeFromSuperview];
        NSLog(@"Done!");
      }];
    }];

} 
```

所以，我所做的是将 UIView 添加到具有黑色背景和 alpha 为 0 的导航控制器。然后，我制作动画以将 alpha 更改为 1，将目标视图控制器推送到导航控制器上，然后然后动画回来清除。当我这样做时，什么也没有发生。它只是将目标视图控制器放到导航控制器上，没有任何动画。

奇怪的是，如果我从 1 的 alpha 开始并动画到 0 然后回到 1，它可以工作（但这不是我想要的）。

我认为发生了一些优化，排除了我清晰的 UIView，因此更改透明度是没有意义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:12:51.170

如果你这样做会发生什么？

```
...
[overlay setBackgroundColor:[UIColor colorWithRed:0 green:0 blue:0 alpha:1.0]];
[overlay setAlpha:0.0];
[[self.sourceViewController navigationController].view addSubview:overlay];
... 
```

# r - 一个 .Rd 文件中的多个功能

> ID：15932585
> 
> 赞同：55
> 
> 时间：2013-04-10T17:31:37.137
> 
> 标签：r, documentation, package, roxygen, roxygen2

**短版**：我可以使用`Normal`包中的文档来模拟吗？`stats``roxygen`

**长版**：我正在开发一个包，并试图通过在一个标题下收集许多具有通用输入/参数的函数来使文档更具可读性，这将是对该组的通用引用。每个功能仍应可供最终用户独立使用。

我以文档为灵感，`Normal`其中提供了许多与正态分布相关的方法，例如`stats::dnorm()`。

当我搜索时，`?dnorm`我发现帮助部分的名称`Normal`即使`Normal`看起来不是导出的函数或对象。

我尝试将以下内容放入`funs.R`：

```
##' @rdname funs
##' @name funs
##' @aliases sum1
##' @aliases prod1
##' @title Two functions
##' @param x X
##' @param y Y
##' @return sum1 returns x+y
##' \cr
##' prod1 returns x*y
##' @examples
##' sum1(3,4)
##' prod1(3,4)
##' @export
sum1 <- function(x,y) x+y
##' @export
##' @rdname funs
prod1 <- function(x,y) x*y 
```

然后我`roxygen2`在上面运行。困难在于，`R CMD check`在这个最小包上运行时，它发现包无法加载为`undefined exports: funs`. 如果我删除`##' @name funs`包通过`R CMD check`但帮助部分的名称`sum1`而不是`funs`. 如果我在示例部分下方添加以下内容：

```
##' @export
funs <- function(x) x 
```

它通过了，我可以看到格式化为我想要的帮助，但我正在导出一个无意义的函数以使名称正确显示。

我尝试查看源帮助文件`stats`以了解它是如何实现的，但它们的`.Rdx`格式我不确定如何显示。

*另外，在相关的说明中，是* 什么样的事情`Normal`？

```
require(stats)
getAnywhere("Normal")
> no object named 'Normal' was found 
```

* * *

**更新：**

@TylerRinker - 恐怕这是我尝试的第一件事。这会将函数组合到一个`.Rd`文件中，但相关帮助的名称与第一个函数的名称相同，这是我试图避免的：

```
##' sum
##' gives the sum
##' @param x X
##' @param y Y
##' @return sum1 returns x+y
##' @examples
##' sum1(3,4)
##' @rdname funs
##' @export
sum1 <- function(x,y) x+y
##' product
##' gives the product
##' @return prod1 returns x*y
##' @examples
##' prod1(3,4)
##' @rdname funs
##' @export
prod1 <- function(x,y) x*y 
```

@Andrie - 这个解决方案导致完全相同的困难，帮助的名称与第一个函数相同。

也许这只是不可能的......

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-14T06:01:08.343

这是我找到的最好的解决方法，但如果出现更好的答案，我会很高兴改变接受的答案......

```
##' @name funs
##' @aliases sum1
##' @aliases prod1
##'
##' @title Two functions of x and y
##'
##' @param x =X
##' @param y =Y
##'
##' @note \code{funs} is a generic name for the functions documented.
##' \cr
##' If called, \code{funs} returns its own arguments.
##'
##' @rdname funs
##' @export
funs <- function(x,y) {identity(c(x,y))}
##'
##' @rdname funs
##' @return \code{sum1(x,y)} returns x+y
##' @examples
##' sum1(3,4)
##' @export
sum1 <- function(x,y) x+y
##'
##' @rdname funs
##' @return \code{prod1(x,y)} returns x*y
##' @examples
##' prod1(3,4)
##' @export
prod1 <- function(x,y) x*y 
```

请注意，格式化避免使用 ，`@usage`以避免使其[成为可报告的错误](https://stackoverflow.com/questions/8873514/documenting-setter-functions-with-roxygen)。

我可以看到如何在[github](https://github.com/hadley/roxygen3)上更好地解决这个问题。

一个更好的解决方案`@usage`是添加以下行：

```
##' @usage funs(x,y) A nominal function of x and y 
```

首次使用后

```
##' @rdname funs
##' @export 
```

但是，我正在尝试最小化没有。`R CMD check`为了安抚当权者而发出的警告，特别是以下情况：

```
 Functions with \usage entries need to have the appropriate \alias
    entries, and all their arguments documented.
    The \usage entries must correspond to syntactically valid R code. 
```

这最后可能是我阅读`@usage`.

非常感谢。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-12-02T22:15:23.720

据我了解，在 .Rd 文件中记录 3 个名称的唯一方法是像您一样记录 3 个实际对象。但诀窍是：其中一个可以`NULL`导出，但不能导出！

```
##' @name funs
##' @rdname funs
##'
##' @title Two functions of sum1 and prod1
##'
##' @param x =X
##' @param y =Y
##'
##' @return x*y (prod1) or x+y (sum1).
NULL

##' @rdname funs
##' @examples
##' sum1(3,4)
##' @export
sum1 <- function(x,y) x+y

##' @rdname funs
##' @examples
##' prod1(3,4)
##' @export
prod1 <- function(x,y) x*y 
```

它看起来很hacky，但它确实有效。

# c# - 站点使用来自错误目录的文件背后的代码？

> ID：15932586
> 
> 赞同：2
> 
> 时间：2013-04-10T17:31:47.673
> 
> 标签：c#, asp.net, iis-6, code-behind

ASP.NET 中的哪些设置决定了网站将在何处（如在哪个目录中）查找其代码隐藏文件？

我有两个版本的 asp.net c# 网站，Live 和 Dev。

实时站点：**www.example.com**，页面和代码位于 c:\dev\websites\examplecom_new

开发站点：**d3.example.com**，页面和代码位于 c:\dev\websites\examplecom-d2

实时站点的目录以 _new 结尾以及开发站点以 d3 作为其主机名并以 -d2 作为其目录名称的历史原因，但它们可以正常工作，直到现在我们还没有遇到任何问题，在 d3 上开发内容以供后续发布为了活着。

我最近刷新了开发站点，使其与现场站点完全相同（我通常在开始新一轮工作之前这样做），并开始了一些开发工作。但是，当我尝试通过网站运行代码时，即使浏览器显示的是开发 URL d3.example.com，错误消息还是引用了来自实时站点的 web 目录的代码文件 c:\dev\examplecom_new，不是开发版本 c:\dev\examplecom-d2。

我已经详细检查了代码，以确保没有对 www 站点或实时站点目录路径的硬编码引用，据我所知，没有。所有情况下的代码文件在 .aspx 文件中都被称为本地链接，例如：

```
<%@ Page Language="C#" MasterPageFile="~/ExampleCom.master" AutoEventWireup="true"
    CodeFile="Checkout.aspx.cs" Inherits="Checkout" Title="Untitled Page" %> 
```

是的，我知道“无标题页面”不是世界上最有用的标题。:)

我浏览了 web.config，查看了 app_code\general.cs，并检查了 IIS 中 Properties 元素上的所有选项卡，但我找不到任何可以告诉站点使用 .cs 文件的内容从实时目录而不是开发目录。

我尝试恢复开发站点的先前（预刷新）版本（我总是在替换之前备份它们，以防万一），以防万一有我不知道的配置更改，但旧版本完全显示同样的问题，结帐页面从实时而不是开发调用代码，即使它的 URL 在浏览器中显示开发版本。

毋庸置疑，这是一个令人瞩目的事情，发生的错误似乎是由于实时和开发之间的会话不匹配，但我不知道为什么开发站点从实时站点调用代码而不是其代码自己的目录。任何可能出错的指针都将不胜感激。我已经尝试过在谷歌上搜索“从错误目录调用的文件背后的 asp.net 代码”和相关搜索，并在 Stack Overflow 上搜索相同类型的东西，但没有看到任何相关内容。我们不使用预编译的二进制文件，只使用标准的 .aspx 页面和 .aspx.cs C# 代码文件。

起初我以为一定有一个硬编码的重定向将事情从 dev 踢到 live，但是我看不到任何痕迹，浏览器地址栏仍然显示 d3.example.com/Checkout.aspx 当我有期望重定向能够将其更改为 www 版本。

网络服务器是 IIS 6，我们正在运行 ASP 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:22:23.623

从命令行运行“iisreset”命令，然后清除临时文件夹。之后将重新编译所有应用程序。

# html - 使用 POST 方法将数据从 Dart 发送到 PHP

> ID：15932587
> 
> 赞同：5
> 
> 时间：2013-04-10T17:31:53.430
> 
> 标签：html, dart

我正在尝试将一些数据从 Dart 发送到 PHP ...这是我用来从 Dart 发送数据的代码：

```
button.onClick.listen((e) {
  var req = new HttpRequest();

  req.onReadyStateChange.listen((HttpRequestProgressEvent e) {
    if (req.readyState == HttpRequest.DONE) {
      print('Data submitted!');
    }
  });

  req.open('POST', form.action);
  req.send('hello from dart');

}); 
```

在我的 PHP 文件中，我尝试使用从 dart 发送的字符串，但 count($_POST) 返回 0。$_POST 似乎为空...

Dart 代码确实触发了 php 脚本并打印了“提交的数据”...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T17:41:37.597

这其实和你的 PHP 配置有关。您可以使用 PHP 的保留变量访问 POST 数据：[$HTTP_RAW_POST_DATA](http://php.net/manual/en/reserved.variables.httprawpostdata.php)但是首选方法是使用[php://input](http://www.php.net/manual/en/wrappers.php.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T20:21:07.097

我对 Dart 很陌生，但是您可以在发送中使用 FormData。所以一种快速而肮脏的方式可能是。

```
 var data_form = new FormData(query('#My_form'));

    button.onClick.listen((e){
           var request = new HttpRequest():
           request.open('POST', 'http://Localhost/form_data.php');
           request.send(data_form); 
```

# verilog - Verilog 中的简单状态机是什么样的？

> ID：15932590
> 
> 赞同：4
> 
> 时间：2013-04-10T17:32:02.843
> 
> 标签：verilog

我正在尝试将简单的流程图转换`state machine`为`Verilog`代码。但我不知何故陷入了以下问题，而且由于我对 Verilog 几乎一无所知，我可能遗漏了一些东西。

状态机检测 的输入流`0 and 1`，如果 s 的计数`1`可以除以 3（或者简单地说：如果有 3 次数字 1）。

![在此处输入图像描述](https://i.stack.imgur.com/UgNjh.png)

```
module example (
  input clk,
  input rst,
  input input1,
  output output
);

reg state;
reg nextstate;

localparam state2 = 3'd0;
localparam state1 = 3'd1;
localparam state0 = 3'd2;

always @(posedge clk or posedge rst) begin
  if (rst)
    state <= state0;
  else
    state <= nextstate;
end

always @* begin
  case(state)
    state0: begin
      if(input1)
        nextstate = state1;
      end
    state2: begin
      if(input1)
        nextstate = state0;
      end
    state1: begin
      if(input1)
        nextstate = state2;
      end
    default: nextstate = state0;
  endcase
end

always @* begin
  output1 = state0 & input1;
end

endmodule 
```

我不知道：

*   我必须将输入+输出定义为`reg`或`wire`吗？或者是`input`和`output`！充足的？

*   我必须提供向量维度`reg state, nextstate`吗？如果是，我怎么知道要选择哪个维度？

*   我可以在最后写这些断言`state0 & input1`吗？或者我应该使用`state = state0 & input1 = ??`- 是的，什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:44:58.153

> 我必须将输入+输出定义为reg或wire吗？或者是输入输出！充足的？

输入总是电线，尽管它并不重要，因为你没有分配给它们。默认情况下，输出是电线，但您也可以声明`output reg`是否需要寄存器。

> 我必须为 reg 状态 nextstate 提供向量维度吗？如果是，我怎么知道要选择哪个维度？

是的，您必须声明一个维度，否则当 verilog 默默地将您的所有状态截断为`0`or时，您的设计将灾难性地失败`1`。状态的宽度应该与用于定义状态名称的 localparams 的宽度相同，或者更一般地说，宽度应该是`log2(number of input states)`.

> 我可以像 state0 和 input1 一样在最后写这种断言吗？

我不认为这是你想要的。State0 只是一个常数。如果您想知道*状态机是否处于 state0*，那么您需要将当前状态与常量 state0 进行比较。此外，您可能不希望在此处使用按位 AND，因此请使用常规的 and `&&`。应该：

```
output = (state == state0) && input1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:30:15.127

```
always @* begin
  case(state)
    state0: begin
      if(input1)begin
        nextstate = state1;
         output1 = 0;
      end end
       else begin
        nextstate = state0;
         output1 = 1;
      end
    state2: begin
      if(input1)begin
        nextstate = state0;
        output1   = 1 ;
      end end
      begin
        nextstate = state2;
         output1 = 0;
      end
    state1: begin
      if(input1)begin
        nextstate = state2;
        output1   = 0;
      end end
     else begin
        nextstate = state1;
         output1 = 0;
      end
    default: nextstate = state0;
  endcase
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-18T03:35:35.410

虽然为时已晚，但我加入了学习 Verilog 的潮流，并决定对您的询问进行尝试。我编写了设计模块并为它创建了一个测试平台。这符合您的期望。

```
`timescale 1ns/1ns
`define WIDTH 4
module FSM_Detect_Stream_Top();

    reg in_clk;
    reg in_rst_n;
    reg [`WIDTH-1:0] in_input;

    wire out_ouput;

    FSM Test (.i_clk(in_clk), .i_rst_n(in_rst_n), .i_input(in_input), .o_output(out_output));

    initial
        begin
            in_clk = 1'b0; // clk at t=0
            #1 in_rst_n = 1'b1;
            #2 in_rst_n = 1'b0;
            #5 in_rst_n = 1'b1;
            @ (negedge in_clk)
                in_input = 2'b01;
            @ (posedge in_clk)  
                $display("output:%b ", out_output);
            @ (negedge in_clk)
                in_input = 2'b01;
            @ (posedge in_clk)  
                $display("output:%b ", out_output);
            @ (negedge in_clk)
                in_input = 2'b01;
            @ (posedge in_clk)  
                $display("output:%b ", out_output);
            @ (negedge in_clk)
                in_input = 2'b01;
            @ (posedge in_clk)  
                $display("output:%b ", out_output);
            @ (negedge in_clk)
                in_input = 2'b01;
            @ (posedge in_clk)  
                $display("output:%b ", out_output);
            @ (negedge in_clk)
                in_input = 2'b00;
            @ (posedge in_clk)  
                $display("output:%b ", out_output);
            @ (negedge in_clk)
                in_rst_n = 1'b0;
            @ (posedge in_clk)  
                $display("output:%b ", out_output);
            @ (negedge in_clk)
                in_input = 2'b00; in_rst_n = 1'b1;
            @ (posedge in_clk)  
                $display("output:%b ", out_output);
            $finish;
        end

    // Generating a 20ns width clock pulse with 50% duty cycle
    always
        #10 in_clk = ~in_clk;

endmodule // FSM_Detect_Stream_Top

//*********************************************************************************************
module FSM(input i_clk, input i_rst_n, input [`WIDTH-1:0] i_input, output reg o_output);
//*********************************************************************************************

    parameter S0 = 2'b00;   //FIRST STATE or DEFAULT
    parameter S1 = 2'b01;   //SECOND STATE
    parameter S2 = 2'b10;   //THIRD STATE
    parameter S3 = 2'b11;   //FOURTH STATE

    reg [`WIDTH-3:0] curr_state;
    reg [`WIDTH-3:0] next_state;

    //Sequential Logic for Storing Current State
    always @ (posedge i_clk or negedge i_rst_n) begin
        if(~i_rst_n)
            curr_state <= S0;
        else
            curr_state <= next_state;
        end

    //Combinational Logic for Next State
    always @ (curr_state or i_input)    begin
        case(curr_state)
            S0: begin
                if (i_input == 2'b01)
                    next_state <= S1;
                else
                    next_state <= S0;
            end
            S1: begin
                if (i_input == 2'b01)
                    next_state <= S2;
                else
                    next_state <= S1;
            end
            S2: begin
                if (i_input == 2'b01)
                    next_state <= S3;
                else
                    next_state <= S2;
            end
            S3: begin
                if (i_input == 2'b01)
                    next_state <= S0;
                else
                    next_state <= S3;
            end 
            default: next_state <= S0;
        endcase // curr_state
    end

    // Output Logic
    always @(posedge i_clk) begin
        if (~i_rst_n)
            o_output <= 1'b0;
        else begin
            case(curr_state)    
                S0: begin
                    if (i_input == 2'b01)
                        o_output <= 1'b1;
                    else
                        o_output <= 1'b1;
                    end
                S1: begin
                    if (i_input == 2'b01)
                        o_output <= 1'b1;
                    else
                        o_output <= 1'b0;
                    end
                S2: begin
                    if (i_input == 2'b01)
                        o_output <= 1'b1;
                    else 
                        o_output <= 1'b0;
                    end
                S3: begin
                    if (i_input == 2'b01)
                        o_output <= 1'b1;
                    else 
                        o_output <= 1'b0;
                    end
                default: o_output <= 1'b0;
            endcase
        end
    end 

endmodule 
```

# c# - 如何通过共享方法中的参数填充 NameValueCollection？

> ID：15932591
> 
> 赞同：0
> 
> 时间：2013-04-10T17:32:04.043
> 
> 标签：c#, c#-4.0, query-string, argument-passing, namevaluecollection

我有一个代码段：

```
var requestMock = new Mock<HttpRequestBase>();
var queryString = new NameValueCollection();
queryString["abc"] = "123";
queryString["qwe"] = "456";
queryString["yui"] = "678";
...
requestMock.SetupGet(rqst => rqst.QueryString).Returns(queryString); 
```

现在，我想将上面的段写成一个方法：

```
var requestMock = GetRequestMock(???); 
```

我打算发送可以是任何内容的查询字符串键/值。k/v 对的数量也可以是任何值。

```
public Mock<HttpRequestBase> GetRequestMock(???)
{
var requestMock = new Mock<HttpRequestBase>();
....
requestMock.SetupGet(rqst => rqst.QueryString).Returns(queryString);
return requestMock;
} 
```

有效和简单地做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:38:29.107

一种方法是使用`Dictionary`：

```
public Mock<HttpRequestBase> GetRequestMock(Dictionary<string, object> queryParms)
{
    var queryString = new NameValueCollection();
    foreach (KeyValuePair<string, object> kvp in queryParms)
    {
        queryString[kvp.Key] = Convert.ToString(kvp.Value);
    }

    ...
} 
```

然后你可以这样称呼它：

```
GetRequestMock(new Dictionary<string, object> { { "abc", "123" }, { "qwe", "456" } } ); 
```

# javascript - 仅克隆一次元素，从一个可排序列表到另一个

> ID：15932593
> 
> 赞同：0
> 
> 时间：2013-04-10T17:32:06.727
> 
> 标签：javascript, jquery

我有两个可排序的 ul 列表。
我希望能够将元素从第一个列表克隆/复制到第二个。
每个列表中的元素必须是唯一的。
当用户第二次尝试克隆元素时，应取消该操作并提醒用户注意限制。

我一直在试验 Sortable、Draggable 和 Droppable 很长一段时间，但无济于事。这就是我要走多远：http: [//jsfiddle.net/wYSZ8/2/](http://jsfiddle.net/wYSZ8/2/)

HTML：

```
<div class="demo">
<ul id="sortable1" class="connectedSortable">
    <li id="one" class="default">Item 1</li>
    <li id="two" class="default">Item 2</li>
    <li id="three" class="default">Item 3</li>
</ul>
<ul id="sortable2" class="connectedSortable">
    <li id="four" class="default">Item a</li>
    <li id="five" class="default">Item b</li>
    <li id="six" class="default">Item c</li>
</ul>
</div> 
```

JS：

```
$('#sortable1').sortable();
$('#sortable2').sortable(); 
```

# ruby-on-rails - 如何使用 ruby 调试器获取堆栈跟踪？

> ID：15932596
> 
> 赞同：14
> 
> 时间：2013-04-10T17:32:13.547
> 
> 标签：ruby-on-rails, ruby, debugging, backtrace

我正在尝试在 Rails 应用程序中使用 ruby​​ 调试器。

为了显示堆栈跟踪，我需要在 (rdb:1) 提示符下键入什么命令？我试过`backtrace`了，但它只列出了最顶层的框架。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-07-01T16:24:32.907

[http://apidock.com/ruby/Kernel/caller](http://apidock.com/ruby/Kernel/caller)

```
caller(0)  # Returns the stack trace, omitting 0 initial entry. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-26T22:00:46.823

那是`debugger`. 如果您使用的是 Ruby >= 2.0，我建议您使用[byebug](https://github.com/deivid-rodriguez/byebug)。自 1.5.0 版以来，该问题已在那里解决。[这](https://github.com/cldwalker/debugger/issues/16)是`debugger`repo 中的错误报告，这是那里建议的解决方法：

```
pp caller.drop_while {|e| e[/ruby-debug|\(eval\)|debugger|\<internal:prelude\>/] } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:39:02.300

Pry gem 确实有一个插件[`pry-stack_explorer`](https://github.com/pry/pry-stack_explorer)可以显示堆栈

示例：在帧之间移动

```
[8] pry(J)> show-stack

Showing all accessible frames in stack:
--
=> #0 [method]  c <Object#c()>
   #1 [block]   block in b <Object#b()>
   #2 [method]  b <Object#b()>
   #3 [method]  alphabet <Object#alphabet(y)>
   #4 [class]   <class:J>
   #5 [block]   block in <main>
   #6 [eval]    <main>
   #7 [top]     <main>
[9] pry(J)> frame 3

Frame number: 3/7
Frame type: method

From: /Users/john/ruby/projects/pry-stack_explorer/examples/example.rb @ line 10 in Object#alphabet:

     5:
     6: require 'pry-stack_explorer'
     7:
     8: def alphabet(y)
     9:   x = 20
 => 10:   b
    11: end
    12:
    13: def b
    14:   x = 30
    15:   proc {
[10] pry(J)> x
=> 20 
```

此外，它还有许多 ruby​​ 调试器缺少的其他功能。所以我建议你试试`pry`它的插件

# list - 两个半同步列表之间的序列合并

> ID：15932601
> 
> 赞同：0
> 
> 时间：2013-04-10T17:32:23.000
> 
> 标签：list, sorting, merge, sequence, synchronize

我面临一个有趣的问题，我想在我花几天时间理论之前看看是否有其他人解决了这种情况。

我有2个系统。第一个系统维护一个排序的数据列表。可以说它有一个命名活动的列表。该系统的用户可以随时手动订购。

创建新项目时，系统 2 会将该列表实例化到自身中。它还与原始列表同步。系统 2 中的用户可以创建自定义活动。这些不会同步回原来的。系统 2 将系统 1 的列表和海关列表保存在一个表格中。系统 2 的用户可以重新排序/手动排序该列表。

现在，困难的部分来了。如果系统 1 的用户重新排序了一些活动，我们希望他们在系统 2 中重新排序。我们只希望那些特定的项目重新排序，而不是重新排序系统 2 的用户已经重新排序的项目。

即系统 2 用户重新排序一些活动。系统 1 用户重新排序这些活动和其他活动。只有系统 2 用户没有重新排序的那些会受到影响。

我可能会让这件事变得比实际更复杂。这听起来绝对是一个有趣的难题。

# ios - 如何将 UIAlertView 设置为从时间或 NSDate 开始在预定义的基础上执行？

> ID：15932602
> 
> 赞同：0
> 
> 时间：2013-04-10T17:32:24.220
> 
> 标签：ios, cocoa-touch

我对 iOS 编程相当陌生，我正在编写一个要求用户在预定义时间做某事的应用程序。我想用 UIAlertView 来做到这一点，就像闹钟应用程序一样。我该怎么做呢？有没有办法在应用程序关闭等时发出警报？

此外，我希望用户在设置中使用 UIPickerView 输入他们的首选时间。我对选择器视图等的代码没问题，但是我会用什么类来填充视图呢？它是手动的，即第 1-12/0-59/(am-pm) 列。我一直在将 NSDate 用于其他选项，但在这种情况下，日期/日期无关紧要。是否有针对此时间的特定课程？

希望这不是一个愚蠢的问题！！任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:41:06.573

您可能希望使用[`UIDatePicker`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)其中一个`datePickerModes`而不是 stock `UIPickerView`。

iOS 没有提供像内置警报应用程序那样发出模态警报的方法。相反，您需要使用带有声音的[本地通知来实现实际的警报。](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1)这将根据用户的通知中心首选项和 iOS 版本显示警报或横幅（尽管在所有现代 iOS 版本上默认情况下它将是横幅。）

请参阅[如何在 iOS 中设置闹钟？](https://stackoverflow.com/questions/11849790/how-to-set-alarm-in-ios)有关设置本地警报的具体详细信息。

# merge - 以编程方式添加的 DevExpress RibbonPage 不显示

> ID：15932604
> 
> 赞同：1
> 
> 时间：2013-04-10T17:32:26.943
> 
> 标签：merge, devexpress, ribbon-control

我在 mdiform 中有一个 RibbonControl，在设计时在 MDIChildForm 中添加了另一个 RibbonControl。然后在运行时，我添加了一个带有 RibbonGroup 和一个 BarButtonItem 的 RibbonPage。像这样：

```
private void MDIChildForm_Load(object sender, EventArgs e) {
  BarButtonItem btn = ribbonControl1.Items.CreateButton("Test Button");
  RibbonPageGroup group1 = new RibbonPageGroup("Test Group");
  group1.ItemLinks.Add(btn);
  RibbonPage page1 = new RibbonPage("Test Page");
  page1.Groups.Add(group1);
  ribbonControl1.Pages.Add(page1);
} 
```

“测试页”在 MdiParent 中不可见。但是，当我更改活动的 mdi 子窗体，并且功能区进行合并时，页面就会出现！

在我更改活动的 mdi 子表单之前，页面似乎没有合并。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:23:09.493

我找到了一个解决方案，但我认为这不是解决它的最优雅的方法：

```
mainRibbon.UnMergeRibbon();
mainRibbon.MergeRibbon(mdiChildForm.ChildRibbon); 
```

需要一个公共属性来访问子功能区。

# jersey - 在 Jersey 客户端中设置 SPNEGO 凭证

> ID：15932607
> 
> 赞同：5
> 
> 时间：2013-04-10T17:32:28.377
> 
> 标签：jersey, spnego

我有一些使用 Jersey 创建的 REST 服务，它们使用 SPENGO 进行身份验证。我正在使用 Jersey 客户端创建验收测试。我想知道如何使用 Jersey 客户端来设置 SPENGO 标头。我查看了过滤器，但并不真正理解它。如果有人可以提供代码示例，将不胜感激。

# ruby-on-rails - Twitter Bootstrap 轮播全屏

> ID：15932609
> 
> 赞同：1
> 
> 时间：2013-04-10T17:32:44.097
> 
> 标签：ruby-on-rails, twitter-bootstrap, fullscreen, carousel

对于 RoR、Bootstrap 和所有基于代码的东西，我是一个完全的菜鸟。我正在尝试在我的 RoR 应用程序中实现一个全屏引导轮播，类似于：[http ://surfscore.me/](http://surfscore.me/)

这是我到目前为止所拥有的：http: [//cryptic-woodland-6000.herokuapp.com/](http://cryptic-woodland-6000.herokuapp.com/)

谁能告诉我为什么我不能把图像全宽……这让我发疯了！

这是我的代码：

```
<!DOCTYPE html>
<html lang="en">
  <head>

    <style>

    /* GLOBAL STYLES
    -------------------------------------------------- */
    /* Padding below the footer and lighter body text */

    body {
      padding-bottom: 0px;
      height: 100%;
      width: 100%;
      color: #5a5a5a;
      margin: 0;
      margin-right: 0;
      min-height: 100%;
    }

    /* CUSTOMIZE THE NAVBAR
    -------------------------------------------------- */

    /* Special class on .container surrounding .navbar, used for positioning it into place. */
    .logo-holder {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      z-index: 10;
      margin-top: 5%;
      margin-bottom: -90px;
      margin-left: 5%;
      /* Negative margin to pull up carousel. 90px is roughly margins and height of navbar. */
    }

    /* Carousel base class */
    .carousel {
      margin-bottom: 0px;
    }

    .carousel-control {
      height: 80px;
      margin-top: 0;
      font-size: 120px;
      text-shadow: 0 1px 1px rgba(0,0,0,.4);
      background-color: transparent;
      border: 0;
      z-index: 10;
    }

    .carousel .item {
      height: 100%;
    }
    .carousel img {
      position: relative;
      top: 0;
      left: 0;
      min-height: 100%;
      min-width: 100%;
      margin: 0;

    }

    .carousel-caption {
      background-color: #0001;
      position: absolute;
      max-width: 400px;
      padding: 35px 20px;
      margin-top: 40px;
      margin-left: 50px;
      margin-bottom: 45%;
      z-index: 20;
    }
    .carousel-caption h1,
    .carousel-caption .lead {
      margin: 0;
      line-height: 1.25;
      color: #fff;
      text-shadow: 0 4px 4px rgba(0,0,0,.4);
    }
    .carousel-caption .btn {
      margin-top: 10px;
    }

/* Footer
    -------------------------------------------------- */
.footer {
  padding: -90;
}

    </style>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="../assets/ico/favicon.png">
  </head>

  <body>

  <!-- Logo attempt
    ================================================== -->
<div class="logo-holder">
  <img src="images/hselogo.png">
</div>

  <!-- Carousel
    ================================================== -->

    <div id="myCarousel" class="carousel slide" >
      <div class="carousel-inner">
        <div class="carousel-caption">
              <h1>COMING SOON!</h1>
              <p class="lead">We're busy doing some 'market research'!</p>
              <a class="btn btn-large btn-primary" href="#">Sign up today</a>
            </div>
        <div class="item active">
          <img src="images/greek1.jpg" alt="">

        </div>
        <div class="item">
          <img src="images/hotel.jpg" alt="">

        </div>
        <div class="item">
          <img src="images/mykonos.jpg" alt="">

        </div>
      </div>
      <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
      <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div><!-- /.carousel -->

      <!-- FOOTER -->
      <footer>
        <p class="pull-right">91-93 Buckingham Palace Rd, London, SW1W 0RP.</p>
        <p>&copy; 2013 HOP SKIP ESCAPE LTD &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
      </footer>

    </div><!-- /.container -->

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:33:13.060

![在此处输入图像描述](https://i.stack.imgur.com/BMSUE.png)您可以通过删除容器类来实现类似的效果

# java - 在 shell 脚本中执行 java 程序时使用双引号

> ID：15932610
> 
> 赞同：0
> 
> 时间：2013-04-10T17:32:56.580
> 
> 标签：java, shell, weka, double-quotes

我有一个 shell 脚本，它执行一个带有从不同 Java 程序返回的参数的 Java 程序。

```
java -cp $wekaPath $(java GetFilter $WandFDir) -i $(pwd)/temp/training"$i"_$arffName.arff -o $(pwd)/temp/training_"$i"_$arffName.arff 
```

回显时，它会产生以下字符串：

```
java -cp /home/robobenny/Documents/WEKA/weka-3-7-4/weka.jar weka.filters.supervised.attribute.AttributeSelection -E "weka.attributeSelection.InfoGainAttributeEval" -S "weka.attributeSelection.Ranker -T -1.7976931348623157E308 -N 20" -c first -i /home/robobenny/Documents/WEKA/Pipeline/temp/training1_Test.arff -o /home/robobenny/Documents/WEKA/Pipeline/temp/training_1_Test.arff 
```

这很好，因为如果我将字符串复制到命令行，它会毫无意外地运行 Java 程序。当我不回显它并尝试从 shell 脚本执行它时，就会出现问题，我从终端得到以下信息：

```
<!-- language: lang-none -->
Can't find class called: "weka.attributeSelection.InfoGainAttributeEval"
Filter options:

-S <"Name of search class [search options]">
    Sets search method for subset evaluators.
    eg. -S "weka.attributeSelection.BestFirst -S 8"
-E <"Name of attribute/subset evaluation class [evaluator options]">
    Sets attribute/subset evaluator.
    eg. -E "weka.attributeSelection.CfsSubsetEval -L"

Options specific to evaluator weka.attributeSelection.CfsSubsetEval:

-M
    Treat missing values as a separate value.
-L
    Don't include locally predictive attributes.

Options specific to search weka.attributeSelection.BestFirst:

-P <start set>
    Specify a starting set of attributes.
    Eg. 1,3,5-7.
-D <0 = backward | 1 = forward | 2 = bi-directional>
    Direction of search. (default = 1).
-N <num>
    Number of non-improving nodes to
    consider before terminating search.
-S <num>
    Size of lookup cache for evaluated subsets.
    Expressed as a multiple of the number of
    attributes in the data set. (default = 1)

General options:

-h
    Get help on available options.
    (use -b -h for help on batch mode.)
-i <file>
    The name of the file containing input instances.
    If not supplied then instances will be read from stdin.
-o <file>
    The name of the file output instances will be written to.
    If not supplied then instances will be written to stdout.
-c <class index>
    The number of the attribute to use as the class.
    "first" and "last" are also valid entries.
    If not supplied then no class is assigned. 
```

当我硬编码`$(java GetFilter $WandFDir)`shell脚本中的输出时：

```
java -cp $wekaPath weka.filters.supervised.attribute.AttributeSelection -E "weka.attributeSelection.InfoGainAttributeEval" -S "weka.attributeSelection.Ranker -T -1.7976931348623157E308 -N 20" -c first -i $(pwd)/temp/training"$i"_$arffName.arff -o $(pwd)/temp/training_"$i"_$arffName.arff 
```

它也正常运行。有趣的是，当回显时，双引号消失了。

```
java -cp /home/robobenny/Documents/WEKA/weka-3-7-4/weka.jar weka.filters.supervised.attribute.AttributeSelection -E weka.attributeSelection.InfoGainAttributeEval -S weka.attributeSelection.Ranker -T -1.7976931348623157E308 -N 20 -c first -i /home/robobenny/Documents/WEKA/Pipeline/temp/training2_Test.arff -o /home/robobenny/Documents/WEKA/Pipeline/temp/training_2_Test.arff 
```

当我在输出中留下双引号时，出现`$(java GetFilter $WandFDir)`以下错误：

```
<!-- language: lang-none -->
Illegal options: -T -1.7976931348623157E308 -N 20 
Filter options:

-S <"Name of search class [search options]">
    Sets search method for subset evaluators.
    eg. -S "weka.attributeSelection.BestFirst -S 8"
-E <"Name of attribute/subset evaluation class [evaluator options]">
    Sets attribute/subset evaluator.
    eg. -E "weka.attributeSelection.CfsSubsetEval -L"

Options specific to evaluator weka.attributeSelection.InfoGainAttributeEval:

-M
    treat missing values as a seperate value.
-B
    just binarize numeric attributes instead 
    of properly discretizing them.

Options specific to search weka.attributeSelection.Ranker:

-P <start set>
    Specify a starting set of attributes.
    Eg. 1,3,5-7.
    Any starting attributes specified are
    ignored during the ranking.
-T <threshold>
    Specify a theshold by which attributes
    may be discarded from the ranking.
-N <num to select>
    Specify number of attributes to select

General options:

-h
    Get help on available options.
    (use -b -h for help on batch mode.)
-i <file>
    The name of the file containing input instances.
    If not supplied then instances will be read from stdin.
-o <file>
    The name of the file output instances will be written to.
    If not supplied then instances will be written to stdout.
-c <class index>
    The number of the attribute to use as the class.
    "first" and "last" are also valid entries.
    If not supplied then no class is assigned. 
```

我环顾四周，似乎找不到任何可以解决我问题的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:39:38.277

这真的是一个救命稻草，但你有没有尝试过类似的东西

```
var="$(java GetFilter $WandFDir)"
java -cp $wekaPath $var -i $(pwd)/temp/training"$i"_$arffName.arff -o $(pwd)/temp/training_"$i"_$arffName.arff 
```

# wpf - wpf TreeView - 单击行中的任意位置选择行

> ID：15932611
> 
> 赞同：1
> 
> 时间：2013-04-10T17:32:57.710
> 
> 标签：wpf, treeview

wpf TreeView 仅在单击文本时选择一行。无论单击在行中的何处发生，我都希望进行选择。除了我猜可能在扩展器上，但必须看到。

目前，我使用此处发布的技术将文本拉伸到树视图的宽度：

[https://stackoverflow.com/a/15813560/317033](https://stackoverflow.com/a/15813560/317033)

但是，嵌套子节点左侧的空白空间仍然没有反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:53:27.013

[https://stackoverflow.com/a/672123/317033](https://stackoverflow.com/a/672123/317033)

基于查看此答案，我修改了 TreeViewItem 的 ControlTemplate，将其替换为我自己的版本，该版本填充了 TreeView 的宽度。如果有另一种方式会很好，因为这显然是一个重大变化。

处理 TreeView 中的单击是我之前的想法，但是如果单击发生在项目的右侧或左侧，我找不到获取该单击的项目的方法。

# unix - 通过 URL 上传文件

> ID：15932612
> 
> 赞同：0
> 
> 时间：2013-04-10T17:33:04.220
> 
> 标签：unix, curl

谁能帮我找出一个用于在 URL 上/从 URL 上传/下载文件的 unix 命令？我尝试上传/下载的特定 URL 受用户 ID 和密码保护。我猜 curl 服务于这个目的，但不知道如何使用它？你能给我建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:36:51.020

curl 有一个名为 -d 的命令行参数（用于数据），您可以像这样使用它来发送文件（您需要在文件名之前添加 @ 以使 curl 将其视为文件而不是值：

```
curl -X POST -d @myfilename http://example.com/upload 
```

如果需要随文件一起发送 FORM 值，可以添加多个 -d 参数。像这样：

```
curl -X POST -d @myfilename -d name=MyFile http://example.com/upload 
```

# macros - 没有图像打开 - 斐济/ImageJ 宏语言

> ID：15932616
> 
> 赞同：2
> 
> 时间：2013-04-10T17:33:18.033
> 
> 标签：macros, imagej

我在斐济写了一个宏来对特定文件夹中的所有图像执行一组操作。但是我遇到了麻烦，无法克服一个问题。运行宏时，我收到一条错误消息，显示“没有打开图像”。这是什么意思？（输入文件夹中的图像是 .tif 类型的）

这是宏：

```
input =  "C:"+File.separator+"Winter Quarter slides"+File.separator+"CTIA"+File.separator+"Project"+File.separator+"Original Image data"+File.separator+"Input Images"+File.separator;

output =  "C:"+File.separator+"Winter Quarter slides"+File.separator+"CTIA"+File.separator+"Project"+File.separator+"Original Image data"+File.separator+"Output Images"+File.separator;

setBatchMode(true);
list=getFileList(input);
for(i=0; i<list.length; i++)
    action(input,output,list[i]);
setBatchMode(false);

function action(input,output,filename) {
    open(input+filename);
    run("16-bit");
    run("Gaussian Blur...", "sigma=3");
    setAutoThreshold("Otsu");
    //run("Threshold...");
    setAutoThreshold("Otsu");
    setOption("BlackBackground", false);
    run("Convert to Mask");
    run("Close");
    run("Watershed");
    saveAs("Tiff", output+filename);
    close();
}

close(); 
```

有人可以尽快帮我解决吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:50:22.530

当打开多个窗口时，宏命令需要定义要在哪个窗口上工作。

在我的 micros 中，我使用 ; 选择窗口（“图像名称”）；在命令之前。这应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:44:40.320

导致此错误的另一件事是输入目录中的非图像文件。您遍历文件夹中的所有内容并将其视为图像。例如，如果有一个文本文件，则结果`open(input+filename)`将不是一个打开的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T07:37:18.823

我没有使用宏语言，但在 Java 中开发时看到了该错误。某些插件要求显示图像。

如果之后图像未显示，`open(input+filename);`则需要运行 show 函数来显示图像。

你做

```
run("Close");
run("Watershed");
saveAs("Tiff", output+filename); 
```

因此，您关闭图像，然后尝试对图像执行会产生该错误的操作。

# java - SQL CallablStatement - 索引超出范围

> ID：15932621
> 
> 赞同：-1
> 
> 时间：2013-04-10T17:33:39.823
> 
> 标签：java, database, jsp, servlets, jdbc

我将 java servlet 与数据库一起使用，但总是出现“索引 2 超出范围”的错误。我只想从表单发送参数名称和消息，并通过过程保存到数据库中。为什么我会收到此错误消息？

添加.jsp

```
<p>${result}</p>
    <form action="Servlet" method="post">
        <div class="comment-form">
            <input type="hidden" name="action" value="4">
            <p class="name">
                <label>Name:</label>
                <input type="text" name="name" value="${param.name}">
            </p>
            <p class="text">
                <label>Message:</label>
                <textarea name="message"></textarea>
            </p>
            <p class="submit">
                <input type="submit" name="btnComment" value="Add">
            </p>
        </div>
    </form> 
```

Servlet.java

```
 String name = request.getParameter("name");
    String message = request.getParameter("message");
    if (name == null || name.trim().equals("")) {
        request.setAttribute("result", "Name missing!");
        return "Add.jsp";
    } else {
        try {
            con = comments.getConnection();
            synchronized (con) {
                stat = con.prepareCall("{CALL procAdd(?)}");
                stat.setString(1, name);
                stat.setString(2, message);
                stat.executeUpdate();
            }
            request.setAttribute("result", "Comment added.");
            return "Comments.jsp";
        } catch (Exception e) {
            request.setAttribute("result", "Error: " + e.getMessage());
            return "Add.jsp";
        } 
```

过程 procAdd

```
CREATE PROCEDURE procAdd (
@Name VARCHAR (50),
@Message VARCHAR(50))
AS
BEGIN
INSERT INTO Comments(Name, Date, Message) VALUES (@Name, GETDATE(), @Message)
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:41:07.393

使用`CallableStatement`返回的 setter 方法`Connection#prepareCall(String)`，将您传递的对象分配给在您的 中`?`找到的每个对象的索引`String`，从`1`. 由于您只有一个`?`，因此您只能设置那个。您的第二个二传手电话：

```
stat.setString(2, message); 
```

因此将失败并抛出您看到的异常。

因为你`PROCEDURE`有两个参数，你应该这样调用它

```
stat = con.prepareCall("{CALL procAdd(?, ?)}");
stat.setString(1, name);
stat.setString(2, message); 
```

# xml - 如何根据属性的值创建带有约束的 XSD？

> ID：15932624
> 
> 赞同：0
> 
> 时间：2013-04-10T17:33:47.643
> 
> 标签：xml, xsd

我是 XSD 的新手，很难创建 XSD 来验证以下传入的 XML 消息。

我遇到的困难是：

1.  数据元素“Field”，其属性“position”值等于“FirstName”或“LastName”必须存在，并且只出现一次。
2.  数据元素“Field”，其属性“position”值等于“MiddleName”是可选的。而如果出现，也只能出现一次。
3.  日期元素“字段”将只有这三个子元素，如果“中间名”不存在，则只有两个。

有什么想法吗？

* * *

传入的原始 XML，需要 XSD 进行验证。

```
<Message>  
  <MessageTypeIndicator version="1" class="8" function="2" origin="3"/>
  <Fields>
     <Field position="FirstName">Jason</Field>
     <Field position="LastName">Smith</Field>
     <Field position="MiddleName">dk</Field>
  </Fields>
</Message> 
```

* * *

稍后，我还将创建一个 XSLT 来将原始 XML 转换为以下内容：

```
<Person>
    <MessageTypeIndicator>
        <version>1</version>
        <class>8</class>
        <function>2</function>
        <origin>3</origin>
    </MessageTypeIndicator>
    <FirstName>Jason</FirstName>
    <LastName>Smith</LastName>
    <MiddleName>dk</MiddleName>
</Person> 
```

* * *

以下是我迄今为止创建的未经验证的 xslt

```
 <?xml version="1.0" encoding="UTF-8"?>

    <xsl:stylesheet>
      <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
      <xsl:template match="/">
        <Message>      
          <MessageTypeIndicator>        
              <version>
                <xsl:value-of select="Message/MessageTypeIndicator/@version"/>
              </version>      
              <class>
                <xsl:value-of select="Message/MessageTypeIndicator/@class"/>            
              </class>      
              <function>
                <xsl:value-of select="Message/MessageTypeIndicator/@function"/>            
              </function>       
              <origin>
                <xsl:value-of select="Message/MessageTypeIndicator/@origin"/>            
              </origin>    
          </MessageTypeIndicator>
          <xsl:for-each select="Message/Fields/Field">
            <xsl:if test="@position='FirstName'">
              <FirstName>
              <xsl:value-of select="string(.)"/>
            </FirstName>
            </xsl:if>      
            <xsl:if test="@position='LastName'">
            <LastName>
              <xsl:value-of select="string(.)"/>
            </LastName>
            </xsl:if>      
            <xsl:if test="@position='MiddleName'">
            <MiddleName>
              <xsl:value-of select="string(.)"/>
            </MiddleName>
            </xsl:if>
          </xsl:for-each>
        </Message>
      </xsl:template>
    </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:13:44.803

您不能真正使用 XSD 1.0 进行这种检查 - 可以检查属性或元素是否存在，但不能检查元素是否存在其属性的特定值。

您可以很容易地做的是在 XSLT 中进行检查 - 如下所示：

```
<xsl:template match="Message">
  <xsl:if test="count(Fields/Field[@position='FirstName']) != 1">
    <xsl:message terminate="yes">The message must exactly one 'FirstName' field</xsl:message>
  </xsl:if>
  <xsl:if test="count(Fields/Field[@position='MiddleName']) > 1">
    <xsl:message terminate="yes">The message cannot contain multiple 'MiddleName' fields</xsl:message>
  </xsl:if>
  <xsl:if test="count(Fields/Field[@position!='MiddleName']) > 3">
    <xsl:message terminate="yes">Too many fields</xsl:message>
  </xsl:if>
  <Person>
    <MessageTypeIndicator>
      <version>1</version>
      <class>8</class>
      <function>2</function>
      <origin>3</origin>
    </MessageTypeIndicator>
    <FirstName>
      <xsl:value-of select="Fields/Field[@position='FirstName']"/>
    </FirstName>
    <LastName>
      <xsl:value-of select="Fields/Field[@position='LastName']"/>
    </LastName>
    <MiddleName>
      <xsl:value-of select="Fields/Field[@position='MiddleName']"/>
    </MiddleName>
  </Person>
</xsl:template> 
```

将进行检查，然后进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:08:52.863

此类验证无法在 XSD 1.0 中实现。您应该考虑使用[XSD 1.1](http://www.xfront.com/xml-schema-1-1/)或使用[Schematron](http://www.schematron.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T19:40:52.437

设计这个文档的人，通过使用非常抽象的元素名称（如 Message 和 Field），然后使用 MessageTypeIndicator 和 Position 等属性对它们进行专门化，可能认为他们通过设计灵活和可扩展的东西很聪明。他们不是；如果您使用具体元素，XML 已经足够灵活和可扩展了

```
<Person><First>Jason</First><Last>Smith</Last></Person> 
```

除了使 XML 更难处理之外，额外的抽象级别没有任何作用，其中一个方面是您无法为其编写精确的模式。也许这正是设计师的想法：也许他们想保持它的灵活性和可扩展性，并且知道一旦人们开始编写模式，它就会失去他们如此努力（但徒劳无功）实现的灵活性和可扩展性。

# operating-system - 时钟和 I/O 中断有什么区别？

> ID：15932633
> 
> 赞同：1
> 
> 时间：2013-04-10T17:34:16.523
> 
> 标签：operating-system

时钟中断和 I/O 中断有什么区别？

据我了解，时钟中断使用系统时钟来中断 CPU，并根据程序输入或输出完成向 CPU 发送 I/O 中断。[这](https://stackoverflow.com/questions/1781415/difference-between-interrupt-and-event)有助于理解一般的中断，但我试图比较这两种。

编辑：在多道程序环境中，使用单处理器（为了简单起见）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T20:54:49.953

定时器/时钟中断通常用于调度。这些中断调用调度程序，它可以通过保存当前上下文并加载另一个上下文来将当前执行的线程/进程切换到另一个。

除了目的之外，中断就是中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T11:33:09.850

时钟中断的主要目的是帮助我们称之为“多任务处理”。它欺骗我们，让我们认为内部并行工作正在进行（意味着许多应用程序同时运行）。但实际上并非如此。时钟在指定的几分之一秒后发送中断，取决于系统速度，到处理器终止其当前线程，保存其地址和数据以质押并持有发送中断的应用程序。我希望这能帮到您。

# javascript - 将值添加到从 document.createElement 创建的 div 中

> ID：15932637
> 
> 赞同：3
> 
> 时间：2013-04-10T17:34:40.053
> 
> 标签：javascript, jquery, html

我有一个从 document.createElement 创建的 DIV，我有一些文本和一个需要添加到此 DIV 的图像。有人可以建议我最好的方法吗？图像路径在图像变量中给出。以下是我已经编写的代码。contentattachpoint 是 HTML 页面中的另一个 DIV，由

```
var contentattachpoint=document.querySelector('.contentattachPoint');

var year="Year of Manufacture:"+arr[i].year;
var power="Engine Power:"+arr[i].power;
var description="Description:"+arr[i].description;
var image=arr[i].image;
var details = document.createElement("div");
details.setAttribute("id", "details");
details.className = "details";
details.value=year+power+description;
contentattachpoint.appendChild(details) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:44:30.103

根据我对您的问题的理解，我认为您在创建的 div 中都需要文本和图像，因此请执行以下操作

```
details.innerHTML = description + "<img src='"+image+"'>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:40:59.807

如果您使用的是 jQuery，请使用该`.append()`函数。

例子：

```
$('#details').append('<img src="' + image + '" />'); 
```

你还应该看看[Prepend](http://api.jquery.com/prepend/)

**来源**

[jQuery API - append()](http://api.jquery.com/append/)
[jQuery API - prepend()](http://api.jquery.com/prepend/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:43:28.177

做你已经在做的事情`details.appendChild()`

**看这个示例：**

刚刚创建了一个演示示例，向您展示如何动态创建 div 并为其添加段落标签和图像标签。

[http://jsfiddle.net/2LAYS/2/](http://jsfiddle.net/2LAYS/2/)

# vim - Vim“触发缩写”命令 i_CTRL-] 有时会插入文字

> ID：15932639
> 
> 赞同：2
> 
> 时间：2013-04-10T17:34:46.857
> 
> 标签：vim

在插入模式下，命令 CTRL-] 扩展缩写而不输入空格。因此，如果您设置`:abbrev foo bar`，键入`foo<C-]>`将更`foo`改为`bar`。

但是，如果您`bar<C-]>`在没有设置任何缩写的情况下键入会发生什么`bar`？在一个版本的 vim (7.3.754) 中，CTRL-] 被忽略。在我可以访问的其他版本（7.3.0 和 7.2.411）中，`^]`插入了一个文字字符，所以你得到`bar^]`.

这是一个已修复的错误吗？或者是因为不同的编译选项而导致的不同处理？`^]`当我必须在这些较旧的 vim 中工作时，有没有办法避免插入无关的 s？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:06:22.797

正如评论中所讨论的，行为在[7.3.489](http://permalink.gmane.org/gmane.editors.vim.devel/34008)中发生了变化，它修复了一个相关的错误，如果通过映射插入，该错误会阻止`<C-]>`扩展缩写。`<C-]>`

有趣的是，我遇到这个的原因是因为我正在定义一个映射

```
inoremap <CR> <C-]><CR><C-U>g 
```

最后三个字符只是`<CR>`在插入模式下每次按下后创建一个新的撤消点。在正常情况下，如果适用，按 Enter 也会扩展缩写，但如果`<CR>`已重新映射则不会。是`<C-]>`为了强行扩大缩略语。事实证明，这正是导致 Yichao Zhou 编写上述错误修复的确切映射。

这不是一个完美的解决方法，但通过`if has("patch489")`在定义映射时使用，您至少可以优雅地降级到旧版本的 vim。按 enter 不会扩展缩写，但至少不会插入`<C-]>`.

# uiviewcontroller - 将父 uiviewcontroller 作为委托链接到 addChildViewController 添加的 uivewcontroller

> ID：15932646
> 
> 赞同：0
> 
> 时间：2013-04-10T17:35:15.747
> 
> 标签：uiviewcontroller, delegates, container-view

我成功地在容器视图中嵌入和交换 uiviewcontrollers。现在我想从子 uiviewcontroller 向父 uivewcontroller 发送一条消息。我将它们连接为代表，但无法弄清楚如何在父视图中将其分配为代表

parent.h - 加载委托

```
// Import child delegates
#import "GenWarnDangerVC.h"

@interface Appliance_IPVC : UIViewController <ChildViewControllerDelegate>
{
} 
```

parent.m - 加载子视图

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // * Add child views

    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"ChildFour"]];
    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"ChildOne"]]; // <-- this is the delegate
    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"ChildTwo"]];
    [self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"ChildThree"]];

    self.currentChildController = self.childViewControllers[0];

    self.currentChildController.view.frame = self.containerView.bounds;
    [self.containerView addSubview:self.currentChildController.view];

    for (UIViewController *controller in self.childViewControllers)
        [controller didMoveToParentViewController:self];

    // Tried making it delegate here, complies but zilch happens
    UIStoryboard *storyboard = self.storyboard;
    GenWarnDangerVC *_GenWarnDangerVC  = [storyboard instantiateViewControllerWithIdentifier:@"ChildOne"];
    _GenWarnDangerVC.delegate=self;

} 
```

我们稍后在运行时使用

```
[self transitionFromViewController:oldController toViewController:newController duration:0.33 options:options animations:^{} completion:nil]; 
```

childview.h - 做委托设置的东西

```
#import <UIKit/UIKit.h>

@protocol ChildViewControllerDelegate;

@interface GenWarnDangerVC : UIViewController <UITextViewDelegate>

@property (nonatomic, weak) id<ChildViewControllerDelegate> delegate;

@end

@protocol ChildViewControllerDelegate <NSObject>
- (void)animateTextField:(BOOL)up;
@end 
```

childview.m - 向父母发送消息

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView;
{
    //if ([self.delegate respondsToSelector:@selector(animateTextField:)])
    //{
        // Sending delegate message
        NSLog(@"Sending delegate message");
        [self.delegate animateTextField:YES];
    //}

    return YES;
} 
```

父视图从不响应，它在父视图（本身）中调用时处理 [self animateTextField:YES]，但从不从子视图中“听到”。

我猜是因为我们需要在父视图中告诉子视图它是谁的代表，例如

```
UIStoryboard *storyboard = self.storyboard;
    GenWarnDangerVC *_GenWarnDangerVC  = [storyboard instantiateViewControllerWithIdentifier:@"ChildOne"];
    _GenWarnDangerVC.delegate=se 
```

如果;

但是（a）究竟是什么？并且 (b) 是在加载 cild 视图时完成的吗？或者当他们被交换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:47:07.167

问题在于我如何初始化子控制器

```
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"ChildOne"]]; 
```

这加载了控制器，但没有留下对自身的引用，因此可以为其分配一个委托。

然而，这确实如此。耶。

```
GenWarnDangerVC * GenWarnDanger_vc = [self.storyboard instantiateViewControllerWithIdentifier:@"ChildOne"];
[self addChildViewController:GenWarnDanger_vc];
GenWarnDanger_vc.delegate = self; 
```

# javascript - .body.scrollHeight 在 Firefox 中不起作用

> ID：15932650
> 
> 赞同：10
> 
> 时间：2013-04-10T17:35:35.343
> 
> 标签：javascript

`.body.scrollHeight`在 Firefox 中不起作用。

见：http: [//jsfiddle.net/gjrowe/X63KR/](http://jsfiddle.net/gjrowe/X63KR/)

什么是正确的语法来代替？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-10T20:10:00.327

这个问题与...的线程具有相同的根本问题...[根据窗口大小动态定义 iframe 高度（非内容）](https://stackoverflow.com/questions/15934161/dynamically-define-iframe-height-based-on-window-size-not-content/15935330#15935330)

了解该线程上的问题将给出解决方案。

基本上，不是使用，而是`.body.scrollHeight`添加此代码...

```
function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
} 
```

答案来自：http: [//james.padolsey.com/javascript/get-document-height-cross-browser/](http://james.padolsey.com/javascript/get-document-height-cross-browser/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-24T08:05:25.120

使用以下代码：

```
JavascriptExecutor jse = (JavascriptExecutor) (WebDriverObject);
jse.executeScript("window.scrollBy(0,document.body.scrollHeight || document.documentElement.scrollHeight)", ""); 
```

# html - 在元关键字中使用日语/本地化逗号字符

> ID：15932658
> 
> 赞同：3
> 
> 时间：2013-04-10T17:36:11.220
> 
> 标签：html, localization, seo, meta-tags

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:39:18.733

The keywords have to be separated by the `,` character, no matter which language the keywords are in. For `keywords` it is [defined](http://www.w3.org/TR/html5/document-metadata.html#meta-keywords) that the value "must be a set of comma-separated tokens", which is [defined](http://www.w3.org/TR/html5/infrastructure.html#set-of-comma-separated-tokens) as:

> […] a string containing zero or more tokens each separated from the next by a single "," (U+002C) character […]

Note that this `,` is *not* part of the keywords. It's like a reserved character. If a keyword itself should contain a `,`, it would have to be encoded (for example as `&#44;`).

If you hand over keywords for translation, you shouldn't include the separator character (unless it is part of the keyword itself).

So better send the translator a list like …</p>

> *   foo
> *   bar
> *   baz

… instead of "foo, bar, baz".

# c# - 如何调用 WebBrowser Navigate 浏览多个 url？

> ID：15932659
> 
> 赞同：1
> 
> 时间：2013-04-10T17:36:11.847
> 
> 标签：c#, winforms, webbrowser-control, webclient, async-await

要收集网页上的信息，我可以使用该`WebBrowser.Navigated`事件。

首先，导航到网址：

```
WebBrowser wbCourseOverview = new WebBrowser();
wbCourseOverview.ScriptErrorsSuppressed = true;
wbCourseOverview.Navigate(url);
wbCourseOverview.Navigated += wbCourseOverview_Navigated; 
```

`Navigated`然后在调用时处理网页：

```
void wbCourseOverview_Navigated(object sender, WebBrowserNavigatedEventArgs e)
    {
        //Find the control and invoke "Click" event...
    } 
```

当我尝试遍历一个字符串数组时，困难的部分就来了。

```
foreach (var u in courseUrls)
        {
            WebBrowser wbCourseOverview = new WebBrowser();
            wbCourseOverview.ScriptErrorsSuppressed = true;
            wbCourseOverview.Navigate(u);

            wbCourseOverview.Navigated += wbCourseOverview_Navigated;
        } 
```

在这里，因为页面加载需要时间，`wbCourseOverview_Navigated`所以永远不会到达。

我尝试`async` `await`在 C#5 中使用。任务和基于事件的异步模式 (EAP) 可在[此处](http://blogs.msdn.com/b/pfxteam/archive/2009/06/19/9791857.aspx)找到。另一个例子可以在[基于任务的异步模式](http://msdn.microsoft.com/en-us/library/hh873178.aspx#EAP)中找到。

问题是`WebClient`有 async 方法，比如`DownloadDataAsync`and `DownloadStringAsync`。但是里面没有`NavigateAsync`。`WebBrowser`

有哪位高手能给我一些建议吗？谢谢你。

* * *

StackOverflow 中有一篇文章（[这里](https://stackoverflow.com/questions/8610197/async-await-implementation-of-webbrowser-class-for-net)）。但是，有谁知道如何`strut`在其答案中实现它？

* * *

再次更新。

[在 StackOverflow](https://stackoverflow.com/questions/14836416/async-method-with-completed-event)的另一篇文章中建议，

```
public static Task WhenDocumentCompleted(this WebBrowser browser)
{
    var tcs = new TaskCompletionSource<bool>();
    browser.DocumentCompleted += (s, args) => tcs.SetResult(true);
    return tcs.Task;
} 
```

所以我有：

```
foreach (var c in courseBriefs)
    {
        wbCourseOverview.Navigate(c.Url);
        await wbCourseOverview.WhenDocumentCompleted();
    } 
```

在我的网络浏览器访问第二个网址之前，它看起来不错。

> 尝试在任务已完成时将其转换为最终状态。

我知道我一定在`foreach`循环内犯了一个错误。因为`DocumentCompleted`事件循环到第二轮时还没有引发。`await`在`foreach`循环中写这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T21:06:04.023

> StackOverflow 中有一篇文章（这里）。但是，有谁知道如何在其答案中实现该支柱？

好的，所以你想要一些带有等待者的代码。我做了两段代码。第一个使用 TPL 的内置 awaiter：

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            ProcessUrlsAsync(new[] { "http://google.com", "http://microsoft.com", "http://yahoo.com" })
                .Start();
        }

        private Task ProcessUrlsAsync(string[] urls)
        {
            return new Task(() =>
            {
                foreach (string url in urls)
                {
                    TaskAwaiter<string> awaiter = ProcessUrlAsync(url);
                    // or the next line, in case we use method *
                    // TaskAwaiter<string> awaiter = ProcessUrlAsync(url).GetAwaiter();                     
                    string result = awaiter.GetResult();

                    MessageBox.Show(result);
                }
            });
        }        

        // Awaiter inside
        private TaskAwaiter<string> ProcessUrlAsync(string url)
        {
            TaskCompletionSource<string> taskCompletionSource = new TaskCompletionSource<string>();
            var handler = new WebBrowserDocumentCompletedEventHandler((s, e) =>
            {
                // TODO: put custom processing of document right here
                taskCompletionSource.SetResult(e.Url + ": " + webBrowser1.Document.Title);
            });
            webBrowser1.DocumentCompleted += handler;
            taskCompletionSource.Task.ContinueWith(s => { webBrowser1.DocumentCompleted -= handler; });

            webBrowser1.Navigate(url);
            return taskCompletionSource.Task.GetAwaiter();
        }

        // (*) Task<string> instead of Awaiter
        //private Task<string> ProcessUrlAsync(string url)
        //{
        //    TaskCompletionSource<string> taskCompletionSource = new TaskCompletionSource<string>();
        //    var handler = new WebBrowserDocumentCompletedEventHandler((s, e) =>
        //    {
        //        taskCompletionSource.SetResult(e.Url + ": " + webBrowser1.Document.Title);
        //    });
        //    webBrowser1.DocumentCompleted += handler;
        //    taskCompletionSource.Task.ContinueWith(s => { webBrowser1.DocumentCompleted -= handler; });

        //    webBrowser1.Navigate(url);
        //    return taskCompletionSource.Task;
        //} 
```

[下一个示例包含 Eric Lippert 在这里](https://stackoverflow.com/questions/8610197/async-await-implementation-of-webbrowser-class-for-net)谈到的 awaiter struct 的示例实现。

```
public partial class Form1 : Form
    {
        public struct WebBrowserAwaiter
        {
            private readonly WebBrowser _webBrowser;
            private readonly string _url;

            private readonly TaskAwaiter<string> _innerAwaiter;

            public bool IsCompleted
            {
                get
                {
                    return _innerAwaiter.IsCompleted;
                }
            }

            public WebBrowserAwaiter(WebBrowser webBrowser, string url)
            {
                _url = url;
                _webBrowser = webBrowser;
                _innerAwaiter = ProcessUrlAwaitable(_webBrowser, url);
            }

            public string GetResult()
            {
                return _innerAwaiter.GetResult();

            }

            public void OnCompleted(Action continuation)
            {
                _innerAwaiter.OnCompleted(continuation);
            }

            private TaskAwaiter<string> ProcessUrlAwaitable(WebBrowser webBrowser, string url)
            {
                TaskCompletionSource<string> taskCompletionSource = new TaskCompletionSource<string>();
                var handler = new WebBrowserDocumentCompletedEventHandler((s, e) =>
                {
                    // TODO: put custom processing of document here
                    taskCompletionSource.SetResult(e.Url + ": " + webBrowser.Document.Title);
                });
                webBrowser.DocumentCompleted += handler;
                taskCompletionSource.Task.ContinueWith(s => { webBrowser.DocumentCompleted -= handler; });

                webBrowser.Navigate(url);
                return taskCompletionSource.Task.GetAwaiter();
            }
        }

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            ProcessUrlsAsync(new[] { "http://google.com", "http://microsoft.com", "http://yahoo.com" })
                .Start();
        }

        private Task ProcessUrlsAsync(string[] urls)
        {
            return new Task(() =>
            {
                foreach (string url in urls)
                {
                    var awaiter = new WebBrowserAwaiter(webBrowser1, url);
                    string result = awaiter.GetResult();

                    MessageBox.Show(result);
                }
            });
        }
    }   
        } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:40:12.790

而不是在第一个 URL 加载完成时使用`wbCourseOverview_Navigated`use`webBrowser1_DocumentCompleted`完成你的工作并转到下一个 url

```
List<string> urls = new List<string>();
    int count = 0;
    public Form1()
    {
        InitializeComponent();
        webBrowser1.DocumentCompleted+=new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
    }
    private void Form1_Load(object sender, EventArgs e)
    {
        webBrowser1.Navigate(urls[count++]);
    }

    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        //Do something
        webBrowser1.Navigate(urls[count++]);
    } 
```

# git - 在 Git 中更改默认电子邮件会在拉取时出错

> ID：15932662
> 
> 赞同：1
> 
> 时间：2013-04-10T17:36:17.563
> 
> 标签：git, pull

我知道[这个问题](https://stackoverflow.com/questions/6808653/fatal-the-remote-end-hung-up-unexpectedly-while-pushing-to-git-repository)，因为我收到了相同的错误消息。昨天我在我的 github 帐户中添加了一个新的电子邮件地址并将其设置为默认值。今天我尝试了一个`git pull`并收到了这个错误：

```
fatal: The remote end hung up unexpectedly 
```

我尝试过`ssh -T git@github.com`，它成功了。现在我需要重置或获取新的 git 密钥是真的吗？如果不是，问题可能是什么？

编辑：Github 今天遇到了问题。现在github已经备份，问题已经解决了。

# c# - 使用 .RemoveAt 在循环中删除 DataTable 行时出错

> ID：15932666
> 
> 赞同：1
> 
> 时间：2013-04-10T17:36:42.147
> 
> 标签：c#, .net, datatable

我正在开发一个程序，不知道如何解决我现在遇到的这个问题。

当我运行此代码时：

```
int maxRows = AfdelingDT.Rows.Count;
maxRows -= 1;
for(int i = 0;i <= maxRows; i++)
{
   if (Convert.ToInt16(AfdelingDT.Rows[i][0]) == Convert.ToInt16(removeRowTB.Text))
   {
      AfdelingDT.Rows.RemoveAt(i);
   }
} 
```

如果我尝试删除`DataTable`.

如果我运行表格最后一行的代码，我完全没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:40:47.993

问题是，当您在循环中删除一行时，它会重新编号该点之后的所有行，从而导致损坏。

将代码更改为从结尾循环到开头：

```
int maxRows = AfdelingDT.Rows.Count;
maxRows -= 1;
for(int i = maxRows;i >= 0; i--)
{
   if (Convert.ToInt16(AfdelingDT.Rows[i][0]) == Convert.ToInt16(removeRowTB.Text))
   {
      AfdelingDT.Rows.RemoveAt(i);
   }
} 
```

# sharepoint-2010 - 在 Sharepoint 2010 中的编辑表单上隐藏字段

> ID：15932667
> 
> 赞同：1
> 
> 时间：2013-04-10T17:36:44.223
> 
> 标签：sharepoint-2010, schema

我想知道是否有办法在一个视图上隐藏编辑表单上的字段但让它们显示在另一个视图上？

现在我正在使用：

```
 <FieldRef ID="{EF8477CA-D07E-4368-9359-5A33A9E0222C}" Name="Requester" ShowInNewForm="FALSE" ShowInEditForm="FALSE"/> 
```

这在我的 contentType 中，但我很确定这会在整个站点中隐藏它，有没有办法在特定点隐藏它，以便它在某些编辑页面上仍然可见，但在其他页面上不可见？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:36:23.977

我建议不要在编辑表单中隐藏字段，而是在列表定义中定义一个自定义表单并将其隐藏。

在列表定义架构中，将其添加到您的表单元素中：

```
 <Form Type="EditForm"
        Url="CustomNewForm.aspx"
        SetupPath="pages\form.aspx"
        WebPartZoneID="Main" /> 
```

部署列表后，打开生成的表单并使用 css display:none 隐藏包含字段；

最后，在需要的地方使用自定义表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:41:22.203

这会有所帮助：[根据 SharePoint 组中的成员身份显示或隐藏表单字段](http://spjsblog.com/2009/09/20/showing-or-hiding-list-fields-based-on-membership-in-a-sharepoint-group/)

# android - 交叉编译的 libxml 的 Android 系统 loadlibary 错误

> ID：15932668
> 
> 赞同：0
> 
> 时间：2013-04-10T17:36:48.990
> 
> 标签：android, android-ndk, libxml2

我通过使用 android ndk 更改 CC、CFALGS LDFLAGS 为 android 交叉编译了 libxml2-2.90。运行config和make，编译成功。

然后我用原生 c 编写了简单的基于 libxml2 的示例，并编写了包含上述库和包含编译共享库的 Android.mk 文件。

1.我使用ndk-build脚本，成功编译原生libxml应用

1.  我将这两个库放在 android 项目 /libs/armeabi
2.  然后我在android java应用代码中加载了这两个库

    System.loadLibrary("xml2"); //libxml2.so.2.9.0

    System.loadLibrary("samplexml2"); //libsamplexml2.so

但是当我运行我的应用程序时，我得到了 android app 的以下运行时错误。

异常 Ljava/lang/UnsatisfiedLinkError; 初始化 Lcom/example/xmlsample/XmlParse 时抛出；

引起：java.lang.UnsatisfiedLinkError：无法加载库：link_image[1891]：37 无法为“libsamplexml2.so”加载所需的库**“libxml2.so.2”**（load_library[1093]：库“libxml2.so.2” ' 未找到）

请帮助如何正确链接 xml2 lib ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:40:35.190

为 android 交叉编译时，您必须禁用为库设置 soname。如果您使用 automake，请将 -version-info SOME:VERSION:NUMBER 替换为 -avoid-version，然后重新配置并重新编译您的库 (libxml) 和所有依赖项 (libsamplexml)。

# ruby-on-rails - 如何覆盖 OmniAuth 的此验证？

> ID：15932670
> 
> 赞同：1
> 
> 时间：2013-04-10T17:36:56.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter, omniauth

我正在关注 OmniAuth railscasts，但我正面临这个问题。

当我尝试通过 Twitter 登录时收到的错误消息是

```
Validation failed: Password digest can't be blank, Name can't be blank, Email can't be blank, Email is invalid, Password is too short (minimum is 6 characters), Password confirmation can't be blank 
```

我已经有了另一个身份验证，我只是想让 OmniAuth 与它一起工作。

我想从 Twitter 获取用户名并填写“名称”。但是，我想绕过其余的验证。因此，如果用户使用 Twitter 注册，则该用户将没有电子邮件或密码。

这是我的身份验证控制器

```
class AuthenticationsController < InheritedResources::Base

def index
    @authentications = current_user.authentications if current_user
end

def create
  omniauth = request.env['omniauth.auth']
  authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
  if authentication
     flash[:notice] = "Signed in successfully"
     sign_in_and_redirect(:user, authentication.user)
  elsif current_user
   token = omniauth['credentials'].token
   secret = omniauth['credentials'].token
   current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'], :token => token, :secret => token_secret)
   flash[:notice] = "Authentication successful"
   redirect_to authentications_url
   else
    user = User.new
    user.apply_omniauth(omniauth)
    if user.save!
    flash[:notice] = "Signed in successfully"
     sign_in_and_redirect(:user, user)
   else
    session[:omniauth] = omniauth.except('extra')
    redirect_to '/signup'
   end
end
end

def destroy
    @authentication = current_user.authentications.find(params[:id])
    @authentication.destroy
    flash[:notice] = "Successfully destroyed authentication"
    redirect_to authentications_url

end
end 
```

架构数据库

```
 create_table "authentications", :force => true do |t|
    t.integer  "user_id"
    t.string   "provider"
    t.string   "uid"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "secret"
    t.string   "token"
  end 
```

用户.rb

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
has_secure_password
  has_many :authentications
before_save { |user| user.email = user.email.downcase }
  before_save :create_remember_token
  validates_uniqueness_of :name, { case_sensitive: false }
  validates :name,  presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, length: { minimum: 6 }
  validates :password_confirmation, presence: true

def apply_omniauth(omni)
 authentications.build(:provider => omni['provider'],
 :uid => omni['uid'],
 :token => omni['credentials'].token,
 :secret => omni['credentials'].secret)
 end

def twitter
unless @twitter_user
provider = self.authentications.find_by_provider('twitter')
@twitter_user = Twitter::Client.new(:oauth_token => provider.token, :oauth_token_secret => provider.secret) rescue nil
end
@twitter_user
end

def apply_twitter(omniauth)
if (extra = omniauth['extra']['user_hash'] rescue false)
# Example fetching extra data. Needs migration to User model:
# self.firstname = (extra['name'] rescue '')
end
end

def hash_from_omniauth(omniauth)
{
:provider => omniauth['provider'],
:uid => omniauth['uid'],
:token => omniauth['credentials']['token'],
:secret => omniauth['credentials']['secret']
}
end
end 
```

我尝试`user.save(:validation => false)`在身份验证控制器中使用，但它给了我类似的错误。

# c# - NullReferenceException ldapConnection.Connect

> ID：15932675
> 
> 赞同：2
> 
> 时间：2013-04-10T17:37:14.430
> 
> 标签：c#, ldap, nullreferenceexception, novell, edirectory

我知道类似的问题已经被问过一百万次了。我已经阅读了它们，但我仍然无法深入了解。我在我的代码（Winforms、c#）中使用 Novell.Directory.Ldap c# 库。它的工作方式与 microsoft ldap 库非常相似，但它也可以访问特定于 Novell eDirectory 的属性。

使用 Novell.Direcotry.Ldap；在那里。我还添加了引用并将其指向 Novell.Directory.Ldap.dll 文件。

```
string LDAPServerIP = "12.34.56.78";
string serverUserName = "cn=Rrunner,o=acme";
string serverPassword = "@nvi1";

LdapConnection ldapConn = new LdapConnection();
MessageBox.Show(ldapConn.ToString());
ldapConn.SecureSocketLayer = true;
ldapConn.Connect(LDAPServerIP, 636);
ldapConn.Bind(serverUserName, serverPassword); 
```

当它到达 ldapConn.Connect() 方法时，我得到一个 NullReferenceException。在调试器中单步执行可以看到 ldapConn 对象，它是 Novell.Directory.Ldap.LdapConnection 对象，并且似乎分配了合理的值。例如，它确实将 SSL 设置为 true，并且在出现异常时，它甚至已经将 Host(string) 变量设置为 LDAPServerIP，并将 Port(int) 设置为 636，就像 ldapConn.Connect( ) 下令。鉴于此信息，我在该语句上放了一个 try/catch 以通过它，因为它无论如何都将属性放入。然后它还会在 Bind() 方法上获得异常，并且 bind 也确实将适当的值（userDN 和密码）放入对象中。

我直接从我使用/编写的另一个程序复制的那段代码，它工作得很好，所以我不知道为什么它不应该在这个程序中工作。唯一的区别是这是 Visual Studio 中的不同项目。

鉴于此，我尝试再次经历可能不同的事情，因为它是一个不同的项目：

我已尝试验证对提供的 Novell 的引用是否在项目中。我相当肯定这部分必须工作，因为内存中的对象是正确的类型并且有一堆我的程序没有告诉它的属性，所以它们必须来自那个 dll 文件。

SSL 证书存在于我的计算机上，.net 可以找到它，因为这是我开发成功连接到 LDAP 的程序的同一台计算机。

我错过了什么？似乎它必须是非常简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:11:36.533

我终于找到了。这是非常简单的事情，并且由于是一个不同的项目而必须设置。我需要添加 Mono.Security.dll 和对它的引用。

# ruby-on-rails - wordpress 编辑的样式表被重置，附件图像在一段时间后消失了

> ID：15932678
> 
> 赞同：0
> 
> 时间：2013-04-10T17:37:22.977
> 
> 标签：ruby-on-rails, wordpress, heroku

我按照这篇[文章](http://blog.webjames.co.uk/hosting-a-wordpress-blog-on-heroku-with-the-svbtle-theme-for-free/201/)设置了一个托管在 Heroku 上的 wordpress 网站。

作为管理员，我编辑了样式表（style.css）并上传了一些图片。一切正常，网站更新成功。但是过了一会儿，当我再次查看该站点时，我们在样式表中的自定义代码和上传的图像都不见了。

任何人都可以帮助我弄清楚它为什么会发生以及我应该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:19:52.957

在这里找到相同的问题和答案：

“问题是因为 Heroku 不允许您在 Dynos 上拥有持久存储。所以最初当您上传图像时它会工作，但 Heroku 有时会重新启动您的 Dyno 或将其移动到其他主机（因为它们会不断转移应用程序）负载平衡他们的服务器）。

为了确保您的图像保持在线，您应该使用上传到持久存储服务（如 Amazon S3）的 Wordpress 插件。你可以试试这个插件：Amazon S3 for WordPress

使用 Amazon S3 的好处是，如果您使用他们的免费套餐，第一年是免费的。你会有一些限制，但如果它是一个低流量的网站，你不应该轻易超越它们。”

[WordPress Heroku 特色图片未显示](https://stackoverflow.com/questions/13182666/wordpress-heroku-featured-images-not-showing)

# unit-testing - 库中的实用程序测试类应该接受测试还是主要测试？

> ID：15932680
> 
> 赞同：1
> 
> 时间：2013-04-10T17:37:27.867
> 
> 标签：unit-testing, maven, project-structure

例如，我`ConnectionDummy`在 Maven 项目中有一个文件`Common`。它仅用于和中`Email-Lib`的测试。Note本身也包括单元测试，但这些文件只是单元测试的助手。它应该去还是？`Scanner``Common``Common``Common``test``main`

Maven 设置，但我认为这可能是许多技术的共同点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:34:53.043

这在一定程度上取决于您对在生产系统中使用测试（实用程序）代码的感觉有多强，在路上。只是坐在那里，什么都不做的代码对您的生产环境有害吗？想象一下，您的测试实用程序有漂亮的注释，例如 Spring 在运行时拾取？

我遇到过不关心的人。我个人对此感觉很强烈，并且不希望在我的生产环境中测试代码。如果这也是您的想法，那么我在我们的项目中看到了两种使用 Maven 的方法：

1.  测试实用程序代码位于 Common 的`test`文件夹中。您最终会`test-jar`为您的 Common 项目构建测试 JAR ( )，并且您可能会遇到传递依赖问题，`<scope>test</scope>`当有人依赖您的测试 JAR 时，您的测试实用程序代码所需的 Common 项目的任何依赖项都不存在. 这是一个潜在的依赖噩梦，我看到“包含项目”重新定义了很多依赖项，这些依赖项已经被“包含项目”很好地定义了，但由于在范围测试中具有传递性而没有被 Maven 拾取.

2.  测试实用程序代码放在一个单独的测试项目中，例如 CommonTest 生成`jar`，而不是`test-jar`打包。这样，测试实用程序不仅对您的依赖项目，而且对原始 Common 项目本身都成为“实用程序”，同样如此。通过这样做，您的`test`文件夹真正成为项目的内部事务。也许这就是 Maven 家伙的意思，否则为什么`test-jar`不做一个标准选项呢？:)

# sql - 同步 2 个 Microsoft SQL Server 数据库的策略

> ID：15932681
> 
> 赞同：0
> 
> 时间：2013-04-10T17:37:35.093
> 
> 标签：sql, sql-server, data-synchronization

我必须承认我是一名 Microsoft .NET 开发人员，而且我不是 SQL Server 方面的专家。我开发了一个 Windows 应用程序，数据存储在我的本地 SQL Server（Express 版本）中。我最近购买了共享托管服务，包括 SQL Server。我考虑过将本地数据备份到远程服务器：从本地 SQL Server 到远程服务器大约有 5-6 个表，从远程到本地大约有 1-2 个表

最好的方法是什么？数据库大小限制在 5-10MB 左右。2个数据库的结构不同，同步表具有相同的结构。我可以从 SQL Server Express 运行一个自动脚本来每 15 分钟左右执行一次此任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T00:08:09.420

对于初始发布，我只会在托管环境中恢复备份。为了进一步同步，您可以尝试一些 3rd 方工具，例如[ApexSQL Data Diff](http://www.apexsql.com/sql_tools_datadiff.aspx)或[SQL Data Compare](http://www.red-gate.com/products/sql-development/sql-data-compare/)，或者基本上是此类别的任何其他工具……

# ruby-on-rails - 在 Rails 应用程序中连接 HTML、JavaScript 和 CSS

> ID：15932689
> 
> 赞同：0
> 
> 时间：2013-04-10T17:37:53.137
> 
> 标签：ruby-on-rails

所以在`Assets`文件夹中有两个文件夹`javascripts`和`stylesheets`。所以我在这些文件夹中添加了一个`spike.js`和一个 CSS 文件，`spikecss.css`并为它们编写了一些 Javascript 和 CSS 代码。

现在我在 index.html 页面中写这样的东西？这是行不通的。我如何将所有这些东西连接在一起工作？

这是一个测试应用程序，主要用于交易的 javascript 方面，所以我现在真的没有模型、控制器和视图。我在 JavaScript 文件中绘制 D3 图表，所以我只想在点击网页时显示它们

**Javascript 文件：**

```
var data = [4, 8, 15, 16, 23, 42];

var chart = d3.select("body").append("div")
    .attr("class", "chart");

chart.selectAll(chart)
    .data(data)
    .enter().append("div")
    .style("width", function(d){return d*5 +"px";}); 
```

**索引.html 文件：**

```
<!DOCTYPE html>
<html>
<head>
    <title>Here we go</title>
</head>
<body>

javascript_include_tag :defaults, "spike"

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:03:03.477

**更新**

根据此[railscast](http://railscasts.com/episodes/408-ember-part-1?view=asciicast)中使用的 Ryan 方法，您只需这两个步骤即可拥有一个动态`index.html.erb`页面（原始的，稍微复杂一点的答案如下所示）：

首先，将您的 routes.rb 文件设置为如下所示：

```
MyApplication::Application.routes.draw do
  root to: 'application#index'
end 
```

接下来，将您的`/public/index.html`文件移动到`/app/views/application/index.html.erb`. 不要只是复制它——*移动*它。这意味着您的目录中不应有 index.html 文件`/public`。

恭喜，您现在拥有一个可以处理 ERB 标记的动态索引页面。

**原始答案**

该`/public/index.html`文件是静态提供的，因此您需要像不使用 Rails 一样编写它。将您的 css 和 javascript 位置添加到该`<head>`部分，分别使用`<link>`和 ，`<script>`就像您对任何普通 HTML 页面所做的那样。

如果您更喜欢使用 Rails 方式执行此操作，则至少需要：

*   进入`routes.rb`
*   对应的空控制器
*   和一个与您的控制器名称相同 的`index.html`文件（或`index.html.erb`、`index.html.haml`等） （减去“控制器”一词）。`/app/views/some_name/``some_name`

然后，您可以将自定义文件名添加到您的`/app/assets/javascript/application.js`和`/app/assets/stylesheets/application.css`清单中，以将它们拉入页面。

或者，您可以`/app/views/layouts/application.html.erb`使用嵌入式 ruby​​ 手动编辑模板。有关如何执行此操作的文档，请参见[此处](http://guides.rubyonrails.org/layouts_and_rendering.html#linking-to-javascript-files-with-the-javascript_include_tag)和[此处。](http://guides.rubyonrails.org/layouts_and_rendering.html#linking-to-css-files-with-the-stylesheet_link_tag)

哦，还有一件事——你写的 javascript 将在 DOM 加载之前执行，就像现在一样。为避免这种情况，您需要使用以下内容包装它：

```
$(function(){ /* your code here */ }); 
```

# facebook - 获取所有确定大小的 Facebook 用户个人资料图片？

> ID：15932692
> 
> 赞同：0
> 
> 时间：2013-04-10T17:37:55.040
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我需要所有正方形大小的个人资料图片。目前，我可以遍历所有个人资料图片，但无法获得相同尺寸的每张图片。由于我对每张图片都有一个唯一的 id，所以无论如何要获得具有确定尺寸的图片吗？这是代码

```
 FB.api('/me/albums',   {access_token: token},function(resp) {
                for (var i=0, l=resp.data.length; i<l; i++){
                    var album = resp.data[i];
                        if(album.name=="Profile Pictures"){
                             FB.api(album.id + "/photos", function(response) {
                                for(var j=0;j<response.data.length;j++){
                                    $("#container").append("<li><input type='radio' class='fbimg'><img src='" + response.data[j].picture + "' /></input></li>");    
                                }

                            });

                        }                    
                }
            }); 
```

# cakephp - Cakephp 对非表单变量的验证

> ID：15932702
> 
> 赞同：0
> 
> 时间：2013-04-10T17:38:46.043
> 
> 标签：cakephp

正在查看本教程“ [http://book.cakephp.org/2.0/en/models/data-validation.html](http://book.cakephp.org/2.0/en/models/data-validation.html) ”似乎只解释了对表单字段的验证。

那么如果我想验证参数或输入数据怎么办。

如果我有这个控制器，我想在哪里验证这个“campaignId”？：

```
public function agency($campaignId = null){
    if ($this->request->is('get')){
        $campaignId;
     ...

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:43:17.573

CakePHP 模型数据验证是对数据的验证，无论它来自何处。

如果您创建一个数据数组，例如：

```
$article = array(
    'title' => 'Pizza is the Best Food on Earth',
    'byline' => 'Dave from StackOverflow',
    'content' => 'Pizza is awesome.  I love it.'
); 
```

然后尝试保存它：

```
$this->Article->save($article); 
```

模型的验证将启动并验证（或无效）数据。

最常见的数据输入方式是通过表单，但除此之外，验证与使用表单没有直接关系。

# c# - s.replace 字符串中的 HTML

> ID：15932705
> 
> 赞同：1
> 
> 时间：2013-04-10T17:38:56.757
> 
> 标签：c#, asp.net, html, replace

我在尝试替换以下内容的字符串中有 HTML：

```
<td colspan="12" bgcolor="#460F59">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp<font color="#ffffff"><b>IT  </b> 
            <b>214 </b>&#150; <font color="#FFFFFF"><b>Fund of Software Develop </b> 
            <b>&nbsp;(4 Credits)</b></font></font></td> 
```

和：

```
<td colspan="12" bgcolor="#460F59">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp<font color="#ffffff"><b>IT  </b> 
            <b>214 </b>&#150; <font color="#FFFFFF"><b>Fund of Software Develop </b> 
            <b>&nbsp;(4 Credits) - Prereq: IT 210</b></font></font></td> 
```

我意识到引号需要修正，但我怎样才能表明 HTML 位于 3 个单独的行上？

实际代码：

```
 s.Replace("<td colspan="12" bgcolor="#460F59">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp<font color="#ffffff"><b>IT  </b> 
        <b>214 </b>&#150; <font color="#FFFFFF"><b>Fund of Software Develop </b> 
        <b>&nbsp;(4 Credits)</b></font></font></td>", "<td colspan="12" bgcolor="#460F59">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp<font color="#ffffff"><b>IT  </b> 
        <b>214 </b>&#150; <font color="#FFFFFF"><b>Fund of Software Develop </b> 
        <b>&nbsp;(4 Credits) - Prereq: IT 210</b></font></font></td>"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:47:24.863

确保在 C# 中进行替换时分配输出：

```
var s = "test";
s = s.Replace("t","b"); 
```

否则`s`不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:43:15.470

你为什么不尝试更换

```
<b>&nbsp;(4 Credits)</b></font></font></td> 
```

和

```
<b>&nbsp;(4 Credits) - Prereq: IT 210</b></font></font></td> 
```

据我所知，其他行根本没有改变？

# iis - 当前是否有关于 Web 部署安装和配置的演练？

> ID：15932706
> 
> 赞同：4
> 
> 时间：2013-04-10T17:39:03.920
> 
> 标签：iis, windows-server-2008, msdeploy, webdeploy

我已经尝试在几个不同的服务器上安装 Web Deploy，它可以在我需要的范围内工作，但我还没有确定缺少的步骤是什么。

它失败的地方是在这里安装了似乎是必需品之后： [http ://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy](http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy)

站点的上下文菜单中仅偶尔会出现“配置 Web 部署发布”选项。有没有人有正确部署的指南？如何启用该选项？

在这些情况下部署*不是*通过 WebPI。我必须单独下载软件包并手动安装。无法通过当前链接、屏幕截图或建议找到详细说明此内容的内容。

基本 Windows Server 2008 服务器，未安装任何特殊设备。如果有人有任何想法，很高兴澄清任何事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:03:02.777

修复（由 Microsoft 的 Kristina Olson 提供）是卸载 Web Deploy，然后确保所有先决条件都已到位。这篇文章中提到了这一点：

[http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy](http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy)

关键点：

*   确保 IIS 中的 Web 管理服务处理程序组件已安装并启用
*   确保已安装 PowerShell v2
*   需要安装数据库依赖
*   确保选择完整安装

# android - 广告覆盖界面而不是出现在其上方

> ID：15932709
> 
> 赞同：0
> 
> 时间：2013-04-10T17:39:15.673
> 
> 标签：android, xml, user-interface, overlay, admob

首先，我要感谢这里的每个人对我以前的问题的帮助。你们都是不可估量的帮助。希望这将是我对这个特定程序的最后一个问题，如果已经回答，请链接我到哪里，因为我无法通过搜索找到它。现在发生的情况是，横幅广告没有出现并向下移动界面的其余部分，而是覆盖在我的 UI 顶部并阻止访问它下方的 UI 部分。除此之外，一切都很好。这是 XML 和 JAVA。

布局.XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:id="@+id/AdRelativeLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- Ad Placeholder -->

<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="a15138b1a7adad2"
    ads:loadAdOnCreate="true" />

<ScrollView
    android:id="@+id/BaseScrollView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/baseVerticalLinearLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/LinearLayoutH1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/Sad" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Happy" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/happinessBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <LinearLayout
            android:id="@+id/LinearLayoutH2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/Tired" />

            <TextView
                android:id="@+id/textView4"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Awake" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/energyBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <LinearLayout
            android:id="@+id/LinearLayoutH3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView5"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/Calm" />

            <TextView
                android:id="@+id/textView6"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Anxious" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/anxietyBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <LinearLayout
            android:id="@+id/LinearLayoutH4"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView7"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/No_Pain" />

            <TextView
                android:id="@+id/textView8"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Max_Pain" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/painBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <DatePicker
            android:id="@+id/datePicker1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <TimePicker
            android:id="@+id/timePicker1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <EditText
            android:id="@+id/noteTextFieldID"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/Note_Hint"
            android:inputType="textMultiLine"
            android:maxLength="@integer/NoteLimit" />

        <Button
            android:id="@+id/enterButtonID"
            android:layout_width="132dp"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:onClick="dialogPop"
            android:text="@string/EnterButtonText" />
    </LinearLayout>
</ScrollView>

</RelativeLayout> 
```

和Java文件...

```
package com.loch.meaptracker;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

import com.google.ads.*;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.RelativeLayout;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TimePicker;

public class MainActivity extends Activity implements OnSeekBarChangeListener {

private SeekBar happyBar, energyBar, anxietyBar, painBar;
private EditText noteField;
private DatePicker dPick;
private TimePicker tPick;
@SuppressWarnings("unused")
private Button enterButton;
private int happyValue = 4, energyValue = 4, anxietyValue = 4,
        painValue = 4;
private static final String TAG = "heapApp";
private String Mood = "Blah";
private AdView adView;
final Context context = this;

@Override
protected void onCreate(Bundle savedInstanceState) {
    try {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Create the adView
        adView = new AdView (this, AdSize.BANNER, "a15138b1a7adad2");

        // Lookup your RelativeLayout assuming it's been given the attribute android:id="@+id/AdRelativeLayout
        RelativeLayout layout = (RelativeLayout)findViewById(R.id.AdRelativeLayout); 

        // Add the AdView to it
        layout.addView(adView);

        // Initiate a generic request to load it with an ad
        adView.loadAd(new AdRequest());

        // bars
        happyBar = (SeekBar) findViewById(R.id.happinessBarID);
        happyBar.setOnSeekBarChangeListener(this);
        energyBar = (SeekBar) findViewById(R.id.energyBarID);
        energyBar.setOnSeekBarChangeListener(this);
        anxietyBar = (SeekBar) findViewById(R.id.anxietyBarID);
        anxietyBar.setOnSeekBarChangeListener(this);
        painBar = (SeekBar) findViewById(R.id.painBarID);
        painBar.setOnSeekBarChangeListener(this);
        // end bars
        dPick = (DatePicker) findViewById(R.id.datePicker1);
        tPick = (TimePicker) findViewById(R.id.timePicker1);
        noteField = (EditText) findViewById(R.id.noteTextFieldID);
        enterButton = (Button) findViewById(R.id.enterButtonID);
    } catch (Exception onCreateException) {
        Log.e(TAG, "Exception received", onCreateException);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

// Bar listener methods
@Override
public void onProgressChanged(SeekBar arg0, int barValue, boolean hFromUser) {
    try {

        switch (arg0.getId()) {
        case R.id.happinessBarID:
            happyValue = barValue + 1;
            break;
        case R.id.energyBarID:
            energyValue = barValue + 1;
            break;
        case R.id.anxietyBarID:
            anxietyValue = barValue + 1;
            break;
        case R.id.painBarID:
            painValue = barValue + 1;
            break;
        }
        String debugBarValue = "Happy is " + happyValue + ", Energy is "
                + energyValue + ", Anxiety is " + anxietyValue
                + ", Pain is " + painValue + ".";
        System.out.println(debugBarValue);

    } catch (Exception BarValueException) {
        Log.e(TAG, "Exception received", BarValueException);
    }

}

@Override
public void onStartTrackingTouch(SeekBar happyBar) {
    // TODO Auto-generated method stub

}

@Override
public void onStopTrackingTouch(SeekBar happyBar) {
    // TODO Auto-generated method stub

}

// end Bar listener methods

// Enter Button listener Method

public void dialogPop(View v) {
    try {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                context);

        // set Title
        alertDialogBuilder.setTitle("title");

        // set dialog message
        alertDialogBuilder.setMessage("You entered: " + getMood())
                .setCancelable(false).setPositiveButton("Okay",
                // When Okay button clicked the write mood string to file
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                try {
                                    // This is the string that should be
                                    // written to file
                                    String data = getMood();
                                    // This is the file that should be
                                    // written to
                                    File heapFile = new File(Environment.getExternalStorageDirectory(), "heapFile.csv");

                                    // if file doesn't exists, then create
                                    // it
                                    if (!heapFile.exists()) {
                                        heapFile.createNewFile();
                                    }

                                    // true = append file
                                    FileWriter heapFileWritter = new FileWriter(
                                            heapFile.getName(), true);
                                    BufferedWriter heapBufferWritter = new BufferedWriter(
                                            heapFileWritter);
                                    heapBufferWritter.write(data);
                                    heapBufferWritter.close();

                                    System.out.println("Done");

                                } catch (IOException e) {
                                    e.printStackTrace();
                                }
                            }

                        })
                // If they press either the cancel button or the back button
                // on their device (Same thing) then close the dialog and
                // give the user a chance to change what they've entered
                .setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                // TODO Auto-generated method stub
                                dialog.cancel();
                            }
                        });

        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();
    } catch (Exception buttonListenerException) {
        Log.e(TAG, "Exception received", buttonListenerException);
    }
    return;
}

public String getMood() {
    try {
        int month = dPick.getMonth();
        int day = dPick.getDayOfMonth();
        int year = dPick.getYear();
        int minute = tPick.getCurrentMinute();
        String moodAntePost = "AM";
        boolean hourType = tPick.is24HourView();
        int moodHour = tPick.getCurrentHour();
        if (hourType == false && moodHour > 12) {
            moodHour = (moodHour - 12);
            moodAntePost = "PM";
        } else if (hourType == false && moodHour <= 0) {
            moodHour = 12;
        } else {
        }
        String noteText = noteField.getText().toString();
        Mood = "Happiness," + happyValue + ",Energy," + energyValue
                + ",Anxiety," + anxietyValue + ",Pain," + painValue
                + ",Date," + month + "/" + day + "/" + year + ",Time,"
                + moodHour + ":" + minute + "," + moodAntePost + ",Note,"
                + noteText;
        System.out.println(Mood);
    } catch (Exception getMoodException) {
        Log.e(TAG, "Exception received", getMoodException);
    }

    return Mood;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:44:36.227

您既可以选择用 LinearLayout 替换外部 RelativeLayout，也可以`android:layout_below="@id/adView"`在 Scrollview 中放置 a。

顺便说一句，您的内部布局看起来嵌套得很深。您应该考虑将其替换为 relativelayout 或 gridlayout 以获得更好的性能。

# asp.net - 从 SQL Server 下载文件 - ArgumentOutOfRangeException

> ID：15932710
> 
> 赞同：0
> 
> 时间：2013-04-10T17:39:18.140
> 
> 标签：asp.net, vb.net, gridview, download, sql-server-2012

我正在尝试使用 GridView 从 SQL Server 2012 数据库下载文件。我收到了`ArgumentOutOfRangeException`这个错误：

```
Index was out of range. Must be non-negative and less than the size of the collection. 
```

上：

```
Dim fileid As Integer = Convert.ToInt32(GridView1.DataKeys(gvrow.RowIndex).Value.ToString()) 
```

**相关代码：**

```
 Protected Sub lnkDownload_Click(ByVal sender As Object, ByVal e As EventArgs)
        Dim lnkbtn As LinkButton = TryCast(sender, LinkButton)
        Dim gvrow As GridViewRow = TryCast(lnkbtn.NamingContainer, GridViewRow)
        Dim fileid As Integer = Convert.ToInt32(GridView1.DataKeys(gvrow.RowIndex).Value.ToString())
        Dim name As String, type As String
        Dim con As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True;")

        con.Open()

        Using cmd As New SqlCommand()
            cmd.CommandText = "Select content_name, content_type, content_file from content where content_id=@Id"
            cmd.Parameters.AddWithValue("@Id", fileid)
            cmd.Connection = con
            con.Open()

            Dim dt As DataTable = GetData(cmd)

            If dt IsNot Nothing Then

                download(dt)

            End If

        End Using

    End Sub

    Public Function GetData(ByVal cmd As SqlCommand) As DataTable

        Dim dt As New DataTable

        Dim strConnString As String = System.Configuration.ConfigurationManager.ConnectionStrings("ConnStringDb1").ConnectionString()

        Dim con As New SqlConnection(strConnString)

        Dim sda As New SqlDataAdapter

        cmd.CommandType = CommandType.Text

        cmd.Connection = con

        Try

            con.Open()

            sda.SelectCommand = cmd

            sda.Fill(dt)

            Return dt

        Catch ex As Exception

            Response.Write(ex.Message)

            Return Nothing

        Finally

            con.Close()

            sda.Dispose()

            con.Dispose()

        End Try

    End Function

    Protected Sub download(ByVal dt As DataTable)

        Dim bytes() As Byte = CType(dt.Rows(0)("Data"), Byte())

        Response.Buffer = True

        Response.Charset = ""

        Response.Cache.SetCacheability(HttpCacheability.NoCache)

        Response.ContentType = dt.Rows(0)("ContentType").ToString()

        Response.AddHeader("content-disposition", "attachment;filename=" & dt.Rows(0)("Name").ToString())

        Response.BinaryWrite(bytes)

        Response.Flush()

        Response.End()

    End Sub 
```

**`gvrow.RowIndex`** 调试时为**0**。

**完整代码：**

导入 System.Data.SqlClient 导入 System.Data 导入 System.IO

```
Partial Class Documents
    Inherits System.Web.UI.Page

    Protected Sub btnUploadContent_Click(sender As Object, e As EventArgs) Handles btnUploadContent.Click

        Dim filePath As String = FileUpload.PostedFile.FileName

        Dim filename As String = Path.GetFileName(filePath)

        Dim ext As String = Path.GetExtension(filename)

        Dim contenttype As String = String.Empty

        Select Case ext

            Case ".doc"

                contenttype = "application/vnd.ms-word"

                Exit Select

            Case ".docx"

                contenttype = "application/vnd.ms-word"

                Exit Select

            Case ".xls"

                contenttype = "application/vnd.ms-excel"

                Exit Select

            Case ".xlsx"

                contenttype = "application/vnd.ms-excel"

                Exit Select

            Case ".jpg"

                contenttype = "image/jpg"

                Exit Select

            Case ".png"

                contenttype = "image/png"

                Exit Select

            Case ".gif"

                contenttype = "image/gif"

                Exit Select

            Case ".pdf"

                contenttype = "application/pdf"

                Exit Select

        End Select

        If contenttype <> String.Empty Then

            Dim fs As Stream = FileUpload.PostedFile.InputStream

            Dim br As New BinaryReader(fs)

            Dim bytes As Byte() = br.ReadBytes(fs.Length)

            'insert the file into database

            Dim strQuery As String = "INSERT INTO [master_db].[dbo].[content] ([content_name],[content_type],[content_file]) VALUES (@Name, @ContentType, @Data)"
            Dim cmd As New SqlCommand(strQuery)

            cmd.Parameters.Add("@Name", SqlDbType.VarChar).Value = filename

            cmd.Parameters.Add("@ContentType", SqlDbType.VarChar).Value() = contenttype

            cmd.Parameters.Add("@Data", SqlDbType.Binary).Value = bytes

            InsertUpdateData(cmd)

            lblMessage.ForeColor = System.Drawing.Color.Green

            lblMessage.Text = "File Uploaded Successfully"

        Else

            lblMessage.ForeColor = System.Drawing.Color.Red

            lblMessage.Text = "File format not recognised." + " Upload Image/Word/PDF/Excel formats"

        End If

    End Sub

    Protected Sub lnkDownload_Click(ByVal sender As Object, ByVal e As EventArgs)
        Dim lnkbtn As LinkButton = TryCast(sender, LinkButton)
        Dim gvrow As GridViewRow = TryCast(lnkbtn.NamingContainer, GridViewRow)
        Dim fileid As Integer = Convert.ToInt32(GridView1.DataKeys(gvrow.RowIndex).Value.ToString())
        Dim name As String, type As String
        Dim con As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True;")

        con.Open()

        Using cmd As New SqlCommand()
            cmd.CommandText = "Select content_name, content_type, content_file from content where content_id=@Id"
            cmd.Parameters.AddWithValue("@Id", fileid)
            cmd.Connection = con
            con.Open()

            Dim dt As DataTable = GetData(cmd)

            If dt IsNot Nothing Then

                download(dt)

            End If

        End Using

    End Sub

    Public Function GetData(ByVal cmd As SqlCommand) As DataTable

        Dim dt As New DataTable

        Dim strConnString As String = System.Configuration.ConfigurationManager.ConnectionStrings("ConnStringDb1").ConnectionString()

        Dim con As New SqlConnection(strConnString)

        Dim sda As New SqlDataAdapter

        cmd.CommandType = CommandType.Text

        cmd.Connection = con

        Try

            con.Open()

            sda.SelectCommand = cmd

            sda.Fill(dt)

            Return dt

        Catch ex As Exception

            Response.Write(ex.Message)

            Return Nothing

        Finally

            con.Close()

            sda.Dispose()

            con.Dispose()

        End Try

    End Function

    Protected Sub download(ByVal dt As DataTable)

        Dim bytes() As Byte = CType(dt.Rows(0)("Data"), Byte())

        Response.Buffer = True

        Response.Charset = ""

        Response.Cache.SetCacheability(HttpCacheability.NoCache)

        Response.ContentType = dt.Rows(0)("ContentType").ToString()

        Response.AddHeader("content-disposition", "attachment;filename=" & dt.Rows(0)("Name").ToString())

        Response.BinaryWrite(bytes)

        Response.Flush()

        Response.End()

    End Sub

    Public Function InsertUpdateData(ByVal cmd As SqlCommand) As Boolean

        Dim strConnString As String = System.Configuration.ConfigurationManager.ConnectionStrings("ConnStringDb1").ConnectionString()

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True;")

        cmd.CommandType = CommandType.Text

        cmd.Connection = conn

        Try

            conn.Open()

            cmd.ExecuteNonQuery()

            Return True

        Catch ex As Exception

            Response.Write(ex.Message)

            Return False

        Finally

            conn.Close()

            conn.Dispose()

        End Try

    End Function

End Class 
```

发生了什么，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:59:22.860

通过 CommandArgument 传递 RowIndex 并使用它来检索 DataKey 值

在 Button 上添加以下行

```
CommandArgument='<%# DataBinder.Eval(Container, "RowIndex") %>' 
```

并在服务器事件上添加以下行

```
 Dim Index As Integer = Integer.Parse(e.CommandArgument.ToString())
    Dim val As String = DirectCast(Me.grid.DataKeys(Index)("YourDataKeyName"), String) 
```

**更新：**

请参阅此示例：

[样品1](http://csharpdotnetfreak.blogspot.com/2012/01/rowindex-gridview-rowcommand-datakey.html)

[样品 2](http://weblogs.asp.net/aghausman/archive/2009/01/08/get-primary-key-on-row-command-gridview.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:20:34.053

出于显而易见的原因，我前段时间自己用数据读取器替换了前辈数据适配器时遇到了这个问题。

我的解决方法很简单：

```
if (dt.Rows.Count == 0)
//do stuff
else
//do nothing
GV.DataSource = new DataTable(); 
```

您还加载了一个数据表，因此应该更容易部署它。

在您的特定情况下，原因是当没有数据传递给 GV 时会引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:57:24.517

用这个替换错误行：

```
Dim selectedRow As Integer = Me.GridView1.CurrentRow.Index

Dim fileid As Integer = Convert.ToInt32(Me.GridView1.Item(1,gvrow.RowIndex).Value.ToString()) 
```

将数字 1 替换为包含 fileid 的单元格的索引（即，如果第一个单元格为 0，第二个单元格为 1，依此类推）

让我知道这个是否奏效。我是 C# 开发人员，因此转换可能会有所不同。

# visual-c++ - c++编译错误不明确符号和tlb文件

> ID：15932714
> 
> 赞同：0
> 
> 时间：2013-04-10T17:39:39.260
> 
> 标签：visual-c++

我搜索但没有看到这个确切的问题得到回答。我们的代码（我正在构建它，而不是编写它）由于不明确的符号错误而间歇性地编译失败​​。此代码生成 *.tlb 文件，这些文件显然包含相同的符号。开发人员声称他的代码不是造成这种情况的原因，而是 MS 构建工具。他希望我们在发生此错误时重新启动。我认为他可以更改代码中的某些内容以缓解此问题。谁能给我一些指导？如果可以在代码中修复它，请问如何完成？

正在编译... Err_ProjFile：\websvc\AdminWebService\TestNsEndpointInteropClient\TestNsEndpointInteropClient.vcxproj Err_SrcFile：TestNsEndpointInteropClient.cpp Err_LineNum：31 col：0 Err_Target：ClCompile Err_Message：C2872：'EndpointTypeEnum_CenterCord'：不明确的符号

以下是引用 tlb 文件的文件。websvc common\lib-proprietary\Aspect.UnifiedIP.Notifications.EndpointClient.tlb websvc\AdminWebService\AdminWebService.sln websvc\AdminWebService\TestNsEndpointInteropClient\TestNsEndpointInteropClient.vcxproj

websvc\AdminWebService\TestNsEndpointInteropClient\Aspect.UnifiedIP.Notifications.Common.tlb
websvc\NotificationServer\NotificationServer.sln
websvc\NotificationServer\NsCommon\NsCommon.csproj

# cocos2d-iphone - cocos2d Mac 在运行时关闭和启动

> ID：15932716
> 
> 赞同：1
> 
> 时间：2013-04-10T17:39:46.453
> 
> 标签：cocos2d-iphone, cocosbuilder

我们正在构建一个内容编辑器，它会在一个“cocos Player”中`NSWindow`进行测试。用户可以测试一些内容，然后关闭窗口。

所以我需要能够关闭 cocos 并在同一个应用程序中重新启动。

`CC_MAC_USE_DISPLAY_LINK_THREAD`如果我使用线程模型，一切正常。我必须进行修复才能使其`CCDirectorMac`正常工作。在`CCDirectorMac | stopAnimation`我必须设置为`_runningThread`，`nil`因为它没有被设置为零`#if`并且`#elif`使用时`CC_MAC_USE_DISPLAY_LINK_THREAD`。

无论如何，现在我可以“结束”一个导演，然后再重新开始，没有任何问题。

不过我的问题是：如果我正在构建一个偶尔使用 cocos2D 的 AppKit 编辑器，我的线程模型真的会`CC_MAC_USE_MAIN_THREAD`按照文档中的建议吗？

当我使用时，我`CC_MAC_USE_MAIN_THREAD`会*挂断*`stopAnimation`电话：

`CVDisplayLinkStop(displayLink);`

我认为主线程会很好，并且可以避免我们工具的线程问题。性能不是问题。我找不到任何关闭并重新启动 cocos2d 的示例代码`NSWindow`......所以我在这里的假设是我处于未经测试的水域（或很少经过测试的水域）。

我关闭/重启的步骤是：

1.  称呼`[[CCDirector sharedDirector] end]`
2.  这叫`stopAnimation`
3.  然后按照我最初的方式重新初始化 cocos2d

任何关于 Mac 桌面应用程序线程模型的建议......以及为什么`CVDisplayLinkStop`挂起将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-03T03:34:09.787

好的，我在阅读这篇文章及其在 Apple 邮件列表上的答案后想通了：http: [//lists.apple.com/archives/quartz-dev/2006/Oct/msg00056.html](http://lists.apple.com/archives/quartz-dev/2006/Oct/msg00056.html)

使用`CC_MAC_USE_MAIN_THREAD`时，显示链接线程用于在主线程上`performSelector:onThread:waitUntilDone:`运行。`drawScene:`它传递参数`YES`，`waitUntilDone:`因此显示链接线程*阻塞*，直到主线程可以处理`drawScene:`调用。

这是 cocos2d 代码的相关片段。`MyDisplayLinkCallback`在显示链接线程上调用。

```
static CVReturn MyDisplayLinkCallback(CVDisplayLinkRef displayLink, const CVTimeStamp* now, const CVTimeStamp* outputTime, CVOptionFlags flagsIn, CVOptionFlags* flagsOut, void* displayLinkContext)
{
    CVReturn result = [(CCDirectorDisplayLink*)displayLinkContext getFrameForTime:outputTime];
    return result;
}

- (CVReturn) getFrameForTime:(const CVTimeStamp*)outputTime
{
#if (CC_DIRECTOR_MAC_THREAD == CC_MAC_USE_DISPLAY_LINK_THREAD)
    ...
#else
    // Display link thread blocks here:
    [self performSelector:@selector(drawScene) onThread:_runningThread withObject:nil waitUntilDone:YES];
#endif
    return kCVReturnSuccess;
} 
```

当主线程尝试运行`CVDisplayLinkStop()`哪些*阻塞*直到显示链接线程中的显示链接回调完成时，就会出现问题。由于回调同时等待主线程处理它的 drawScene: 调用，所以两个线程都变成了**deadlocked**。

```
- (void) stopAnimation
{
    ...

    if( displayLink ) {
        // Main thread blocks here:
        CVDisplayLinkStop(displayLink);
    ...
} 
```

所以，现在我的解决方法。我添加了一行来运行主线程的 runloop，以强制执行`drawScene:`调用，从而解除对显示链接线程的阻塞。这样，当你打电话时，`CVDisplayLinkStop()`你是安全的。这是我的补充（cocos2d 2.1 版本中的 CCDirectorMac.m 第 473 行）：

```
- (void) stopAnimation
{
    ...

    if( displayLink ) {
#if (CC_DIRECTOR_MAC_THREAD != CC_MAC_USE_DISPLAY_LINK_THREAD)
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
#endif
        CVDisplayLinkStop(displayLink);
    ...
} 
```

我不确定这是*正确*的做法，可能有更好的方法来处理这个问题，但这个解决方法目前对我来说已经足够好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-14T15:09:46.320

感谢这篇文章，它帮助我弄清楚了如何在非 cocos2d 应用程序中解决相同的死锁，方法是在单独的线程上处理显示链接回调，而不是在主线程上。

```
static CVReturn MyDisplayLinkCallback(CVDisplayLinkRef displayLink, const CVTimeStamp* now, const CVTimeStamp* outputTime,
                                      CVOptionFlags flagsIn, CVOptionFlags* flagsOut, void *userInfo)
{
    static dispatch_queue_t sDisplayQueue;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sDisplayQueue = dispatch_queue_create("com.company.app.displayLink", NULL);
    });

    dispatch_sync(sDisplayQueue, ^{
        <stuff>
    });
    return kCVReturnSuccess;
} 
```

# python - 如何在用python编写的解释器中实现多重赋值？

> ID：15932717
> 
> 赞同：6
> 
> 时间：2013-04-10T17:39:52.003
> 
> 标签：python, python-2.7, python-3.x

我正在用 python 编写一个解释器，我正在关注这个例子[http://www.dabeaz.com/ply/example.html](http://www.dabeaz.com/ply/example.html)

我想知道如何实现多个分配，例如：

`a=b=c=1`和`a=(b=1)*1`

我尝试了一些规则，但都是徒劳的。我知道解析应该是这样的。

```
a   b   c  1
 \  \    \/
  \  \   /
   \  \ /
     \ / 
```

我只是不确定如何使用 PLY 来编写它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:59:08.927

大多数语言通过将赋值声明为表达式来逃避它。

在您的示例中，分配变为：

```
def p_expression_assign(t):
    'expression : NAME EQUALS expression'
    t[0] = names[t[1]] = t[3] 
```

我只是在函数名称和文档字符串语法中将“语句”更改为“表达式”，并“返回”（分配给`t[0]`）正在分配的值。

我说“侥幸逃脱”是因为其他语言（例如 Python）会加倍努力，因为它们允许多次赋值，但禁止在任何其他类型的表达式中使用赋值的结果。

但是你的第二个例子`a=(b=1)*1`告诉我你想要前一种，更宽松（或类似 C）的多重赋值形式。

# jquery - 将 .NET 数据表转换为 json 以在 jquery 自动完成中使用

> ID：15932729
> 
> 赞同：0
> 
> 时间：2013-04-10T17:40:43.460
> 
> 标签：jquery, jquery-ui

我正在尝试使用数据表 - 从 asp.net 代码中用作我的 jquery 自动完成中的源。我很难将我的表格转换为 json 格式。

```
var resultItems = (from DataRow dr in dt.AsEnumerable()
                           select new SearchSerialResults
                           {
                               BeingSearched = (string)dr["BeingSearched"],
                               G017 = (string)dr["G017"],
                               G036 = (string)dr["G036"],
                               E017 = (string)dr["E017"]
                           }).ToList();
    var jsonObject = new
    {
        total = totalPages,
        pageSize,
        records = totalRecords,
        rows = (from SearchSerialResults item in resultItems
                select new
                {
                    id = item.G017,
                    cell = new[]
                    {
                        item.ContractLineItem.ToString(), 
                        item.BeingSearched,
                        item.G017,
                        item.G036,
                        item.E017,
                        ""
                    }
                }).ToArray()
    }; 
return Json(jsonObject) // for MVC 
```

# php - 来自 mysql 数据的 PHP 数组 - x-editable bootstrap

> ID：15932730
> 
> 赞同：1
> 
> 时间：2013-04-10T17:40:43.620
> 
> 标签：php, mysql, arrays

所以我使用 x-editable 进行引导，这对我来说太棒了。

有了这个，要返回一个供选择的菜单，需要返回一个数组以使其工作：

```
$arr = array(
  array('value' => 'Male', 'text' => 'Male'),
  array('value' => 'Female', 'text' => 'Female'),
); 
```

如果你必须写它很好，但现在我需要从数据库输出中制作这个数组。

因此，例如，如果我运行“while（$row”循环，输出将如何成为这样的数组。这就是我正在尝试的，但显然失败了，因为这不起作用：

```
 $query = 'SELECT id,app_name FROM apps';
    $result = mysql_query($query) or bomb($s,509,addslashes($query),addslashes(mysql_error()));
    if(mysql_num_rows($result) > 0) {
        while($row = mysql_fetch_assoc($result)) {
            $arr .= Array(
                Array('value' => $row['id'], 'text' => $row['app_name']),
            );
        }
    } 
```

这可能是一个愚蠢的问题，所以在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:45:53.983

数组不能像字符串一样连接。尝试这样的事情：

```
while($row = mysql_fetch_assoc($result)) {
  $arr[]=Array('value' => $row['id'], 'text' => $row['app_name']);
} 
```

# javascript - 如何为 django 模板中的标签创建动态 id

> ID：15932731
> 
> 赞同：3
> 
> 时间：2013-04-10T17:40:46.937
> 
> 标签：javascript, html, django, django-templates

背景：我有一个动态表（因为直到运行时我才知道它的大小/元素），我试图用 javascript 函数填充文本区域。为此，我计划将文本区域的 id 以及我想要填充它的值传递到 javascript 函数中。

问题是我无法为每个文本输入字段创建动态 id 值。这就是我目前尝试这样做的方式：

```
 {% with "input_"|add:applicant.id as idName %}
        <input id="{{ idName }}" type="text" value="">
        <input type="button" hidden="TRUE" onclick="">
        {{ idName }}
        <script>
            putTags({{ idName }}, {{ tags }});
        </script>
   {% endwith %} 
```

函数 putTags() 将填充文本输入的内容。不幸的是，这不起作用，因为它将每个人的 id 分配给“input_”而不附加申请人.id 的值（我已经检查过，申请人.id 每次迭代都有一个正确的 id）。难道我做错了什么？有没有更简单的方法来创建这些唯一 ID？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T17:47:07.017

你可以试试这样的

```
<input id="input_{{ applicant.id }}" type="text" value="">
<input type="button" onclick="putTags('input_{{ applicant.id }}', {{ tags }});"> 
```

# ruby - 红宝石浮点算术数组

> ID：15932735
> 
> 赞同：0
> 
> 时间：2013-04-10T17:41:02.943
> 
> 标签：ruby

我正在对数组成员（浮点数）进行数学运算。类型看起来正确。我仍然得到奇怪的错误。根本没有`nil`价值。这是什么错误？

```
nil can't be coerced into Float 
```

步骤1

```
newFront = [412.5, 312.5]
@direction = [1.0, 0.0]
@length = 50.0
retRear = [newFront[0] - (@direction[0] * @lenght), newFront[1] - (@direction[1] * @lenght)]
# => TypeError: nil can't be coerced into Float
#   from (irb):13:in `*'
#   from (irb):13
#   from /usr/bin/irb:12:in `<main>' 
```

第2步

```
newFront[0].class # => Float
@direction[0].class # => Float
@length.class # => Float 
```

第 3 步

```
nfx = Float(newFront[0]) # => 412.5
dx = Float(@direction[0]) # => 1.0
nfy = Float(newFront[1]) # => 312.5
dy = Float(@direction[1]) # => 0.0
@l = 50.0
retRear = [nfx - (dx * @l), nfy - (dy * @l)] # => [362.5, 312.5] 
```

这就是我想要的。Ruby 是否想告诉我我根本不能使用数组进行浮点运算？此外，将相同的表达式重写为一个表达式也失败了。

```
retRear = [Float(newFront[0]) - (Float(@direction[0]) * Float(@lenght)), Float(newFront[1]) - (Float(@direction[1]) * Float(@lenght))]
# => TypeError: can't convert nil into Float
#   from (irb):78:in `Float'
#   from (irb):78
#   from /usr/bin/irb:12:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:51:30.520

你有一个错字 -`@lenght`而不是`@length`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:48:47.400

正如@WallyAltman 指出的那样，您拼写错误`@length`，因此为零。

我会这样做，顺便说一句：

```
new_front = [412.5, 312.5]
@direction = [1.0, 0.0]
@length = 50.0
ret_rear = new_front.zip(@direction).map do |front, dir|
  front - dir * @length
end
# => [362.5, 312.5] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T17:50:18.657

nil 来自您的拼写错误。@length 设置为 50，但没有为变量 @lenght 设置值（注意转置的“h”和“t”）。

# php - 将列表拆分为多列，留下尾随 </li> 标记

> ID：15932739
> 
> 赞同：0
> 
> 时间：2013-04-10T17:41:08.663
> 
> 标签：php, list, multiple-columns

我不明白为什么最后一列（4）在最后留下了一个`</li>`标签。

```
<?php 
$pageArray = explode("</li>",wp_list_pages('title_li=&echo=0&depth=-1&sort_column=post_name&exclude=82,9,13'));
$pageCount = count($pageArray) ;
$pageColumns = round($pageCount / 4);
$twoColumns = round($pageColumns + $pageColumns);
$threeColumns = round($pageColumns + $pageColumns + $pageColumns - 1);
$fourColumns = round($pageColumns + $pageColumns + $pageColumns + $pageColumns - 2);        
    for ($i=0;$i<$pageCount;$i++) {
    if ($i<$pageColumns){
        $col1 = $col1.''.$pageArray[$i].'</li>';
    }
        elseif ($i<$twoColumns) {
        $col2 = $col2.''.$pageArray[$i].'</li>';
    }  
    elseif ($i<=$threeColumns) {
        $col3 = $col3.''.$pageArray[$i].'</li>';
    }  
     elseif ($i<=$fourColumns) {
        $col4 = $col4.''.$pageArray[$i].'</li>';
    }  
 };
?>

<ul>
  <?php echo $col1; ?>
</ul>
<ul>
  <?php echo $col2; ?>
</ul>
<ul>
  <?php echo $col3; ?>
</ul>
<ul>
  <?php echo $col4; ?>
</ul> 
```

我在最后一个列表中得到的是：

```
<ul>    
    <li class="page_item page-item-23"><a href="http://google.com">link1</a></li>
    <li class="page_item page-item-27"><a href="http://google.com">link2</a></li>

    </li> <--the problem
</ul> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:07:11.030

我想到了。

简单地改变这个：

```
for ($i=0;$i<$pageCount;$i++) { 
```

对此：

```
for ($i=0;$i<$pageCount-1;$i++) { 
```

并删除了尾随`</li>`标签

# vba - 在 Access 2007 中执行任何 VBA 代码时出现“找不到文件”

> ID：15932743
> 
> 赞同：14
> 
> 时间：2013-04-10T17:41:23.950
> 
> 标签：vba, ms-access

我正在使用 Microsoft Access 2007 处理一个大型 Access 2003 项目。最近，一些用户开始遇到我的表单中的按钮问题。例如，在没有任何特定原因的情况下，单击按钮或尝试执行任何代码都会返回错误：

> 文件未找到

无法进入调试模式。发生这种情况时，唯一要做的就是重新启动数据库。我尝试`Stop`在已执行块的开头添加命令以尝试对其进行调试，但根本没有执行任何代码。这就像一个编译错误，但它只发生 5-10% 的时间，这真的很奇怪。

经过一些研究，我发现其他人也有同样的问题，例如[这个](http://bytes.com/topic/access/answers/860882-file-not-found-error)和[这个](http://www.tutcity.com/access/onload-file-not-found.38957.html)链接。还有其他例子，目前还没有真正的解决方案。

我的数据库可以正常使用一周，然后问题再次出现。一半的时间，用户做不了太多；他们需要重新启动数据库一次或两次以使其恢复工作，几分钟后错误可能会再次发生。

因为这是 Access 2007 并且有很多人遇到这个错误，我不敢相信它没有更多的文档记录。

有什么问题？数据库是否以某种方式部分损坏？我该怎么办？这真的很烦人。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T16:53:22.147

如果我在这种情况下，我会尝试的第一件事就是对前端数据库文件进行完整的反编译+压缩+重新编译操作，然后将更新的前端分发给用户，看看是否改善事物。

有关反编译+压缩+重新编译步骤的详细说明，请参见[此处](https://stackoverflow.com/questions/3266542/ms-access-how-to-decompile-and-recompile)。**注意：**请务必阅读 David W. Fenton 在他的回答中的其他建议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-25T17:21:05.393

我只是第一次经历这种情况。我一直在对表单进行大量的编码更改，并且需要在未完成代码调试的情况下重新启动我的 PC。当我打开应用程序时，我立即收到“找不到文件”消息（它会自动启动不同的表单）。

一时兴起，我去了有问题的表格并注释掉了整个模块的代码，问题就消失了。在我返回并取消注释该代码后，一切仍然正常。我能够继续调试该代码，并愉快地度过了余下的一天。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-29T17:51:20.000

虽然这个帖子已经有一年多了，但我想分享另一个非常有用的观察结果。

此错误“找不到文件：”可能是由于Office版本的不同保存行为引起的，可能与您的代码无关！如果出现此错误，请尝试在另一个 Office 版本中打开并保存有问题的文件，它可能会在您的主 Office 版本中正常工作。

详细信息：尽管多年来一直在编写 VBA，但我从未遇到过主动提出的“找不到文件：”错误。奇怪的是，错误消息没有给出未找到文件的文件名。（提醒我另一个令人讨厌的错误 VBA 有时会在启动时无明显原因且不规律地显示。）幸运的是，这个错误是在我在 PowerPoint 2016 中测试文件后在 PowerPoint 2010 中首次编辑后开始的。打开 .pptm 时发生错误，但我没有涉及文件的启动过程。所以我有了在.pptm zip 存档中找不到某些文件的想法。开始在互联网上进行快速搜索，发现只有“在黑暗中拍摄”的建议。因为我可以比 PowerPoint 2016（不同的 Windows 10 启动分区）更容易地启动 PowerPoint 2013（虚拟机），我试图在 PowerPoint 2013 中打开有问题的文件并且没有问题。我编译了 VBA 项目以检查错误。没有。并保存文件。在 PowerPoint 2013 中重新保存后，该文件在 PowerPoint 2010 中似乎再次正常工作，并且在前几次编辑、保存和重新打开后没有显示任何问题。话虽这么说，我想知道 PowerPoint 2016 保存是否特殊，如果我可以复制/如果在 PowerPoint 2016 中再次保存文件并返回到 PowerPoint 2010，我是否会再次遇到错误。（我会记下这个线程在 PowerPoint 2016 中再次使用此文件后添加新见解。）该文件似乎在 PowerPoint 2010 中再次正常工作，并且在前几次编辑、保存和重新打开后没有显示任何问题。话虽这么说，我想知道 PowerPoint 2016 保存是否特殊，如果我可以复制/如果在 PowerPoint 2016 中再次保存文件并返回到 PowerPoint 2010，我是否会再次遇到错误。（我会记下这个线程在 PowerPoint 2016 中再次使用此文件后添加新见解。）该文件似乎在 PowerPoint 2010 中再次正常工作，并且在前几次编辑、保存和重新打开后没有显示任何问题。话虽这么说，我想知道 PowerPoint 2016 保存是否特殊，如果我可以复制/如果在 PowerPoint 2016 中再次保存文件并返回到 PowerPoint 2010，我是否会再次遇到错误。（我会记下这个线程在 PowerPoint 2016 中再次使用此文件后添加新见解。）

希望这一观察可以避免许多不必要的 Office 卸载/重新安装和其他绝望的尝试。

干杯!

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-27T05:27:38.113

在 2019 年 8 月更新到 Windows 10 之后，我的一个 .mdb 前端在 Access 2013 中运行，类似的事情刚刚发生了几次。

我的数据库也经历了多个版本的 Access。打开数据库时，它显示“未找到文件”并抛出一个公共模块（不是我最近一直在广泛工作的模块），而无需打开 Autoexec（总机）表单。'Debug, Compile' 是可能的并且没有任何问题。

对我来说也是，在代码的任意位置输入一个空格（或空行或其他字符），然后删除它，然后保存、关闭和重新打开似乎提供了一种解决方法，过去几天一切都很好（我是目前唯一的用户）。

没有一个明显的模块涉及，尽管如果问题以一种麻烦的方式持续存在，我可能会怀疑我最近一直在处理的表单模块。

现在，几天后，我反编译、压缩并重新编译了数据库，将其大小减半，所以也许这样就可以了。但愿如此。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-22T20:50:34.680

我刚遇到这个问题。就我而言，我认为问题在于有一个空白的 VBA 模块。我将程序从一个模块移动到另一个模块，最终得到一个空白模块。我无法手动删除模块，每次尝试创建删除空白模块的过程时，我都会收到“找不到文件”错误，并且我刚刚创建的过程被空白。我最终恢复到备份。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-24T14:35:12.250

问题只是你的参考。您的参考文件之一已被移动/删除/更新。删除并重新添加您的引用以确定哪一个。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-23T22:41:47.043

我有一个类似的问题。一个空白的“找不到文件”错误。

我关闭了自动更正，在点击了几个让我担心的提示/警告后，我重新打开了数据库，错误就消失了。

重新打开数据库时，问题已解决。

我怀疑这将修复许多“找不到文件”错误，这些错误可能与临时链接表因任何原因丢失引用有关。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-26T11:43:58.210

我有同样的问题 MS Excel。

在用户按下按钮时，出现了一个无用的 File Not Found 错误。

我浏览了上面所有建议，没有任何改变或帮助。

完全不小心我删除了一个用于更新应用程序状态的模块。这也有一些数组存储。但是，在删除此模块（并在我的代码中注释掉对它的引用）时，似乎该问题现在已在用户之间得到修复。

一个问题是，我在几个不同的 Excel 加载项部署中具有相同的模块名称。我怀疑在第一次运行时 Excel 无法自动假设它们之间的区别。

我注意到一个错误的解决方法，在该错误中，您在有问题的按钮的第一行代码上创建一个断点，然后在中断时恢复 - 我认为这有助于 Excel 评估和命名模块，以免引起冲突。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-01-12T15:21:33.600

我遇到了这个问题并以这种方式解决了它：我消除了 vba 代码所在的表单，并从之前制作的备份文件中导入了相同的表单。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-07-30T13:19:37.860

我找到了另一个解决方案（至少在我的情况下）：在试图找到错误时，我测试了我在同事计算机上创建的应用程序。这以某种方式重置了文件中出现问题的任何内容。之后，我能够再次在计算机上打开文件，一切正常！

编辑：我已经意识到错误，我的情况，似乎以某种方式与我使用 SendKeys 相关（请参阅我[在此处](https://stackoverflow.com/questions/31719790/how-to-click-through-access-report-using-sendkeys?noredirect=1#comment51377420_31719790)自动生成报告的尝试）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-04-12T17:56:51.423

有同样的问题。我偶然发现了修复。无论出于何种原因，只需添加一个单击事件过程就可以使一切变得更好。

*   以设计模式打开表单
*   在表单上选择一个对象
*   按 F4 显示对象的属性
*   [![对象属性](https://i.stack.imgur.com/kceAh.png)](https://i.stack.imgur.com/kceAh.png)
*   事件 > 单击时 > 下拉列表 > 单击 [事件过程]
*   然后单击三个点，这将创建一个新事件，并启动 Visual Basic 编辑器。这也会将默认代码添加到 Visual Basic 编辑器中
*   不做其他更改
*   保存并关闭对表单的更改
*   重启数据库

对于它的价值，当我正在努力解决这个问题时，错误以其他方式自行解决，但没有一个是可重复的。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-11-07T20:29:18.043

我也遇到了这个问题，compact/repair 没有解决。在我的例子中，我有一个不再使用的旧 VBA 模块，它引用了一个不再存在的对象类。删除非编译代码为我解决了这个问题。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-05-05T21:01:18.010

多年来，我在 access 2010 中遇到了这个问题。总是在 msaccess 启动时打开的 Autoexec 表单中。我尝试创建一个非常简单的表单来调用原始更复杂的表单。令我惊讶的是，更多的问题移动了新的简单表格。通过反复试验，我发现只需编辑新的简单 Autoexec 表单，问题就会消失，但几个月后总是在我在其他地方进行编程更改后随机出现。有时，我得到的不是文件未找到错误，而是崩溃无法访问 - 但解决方案是相同的过程 - 对 autoexec 文件进行小编辑（只需添加新的空白行即可）。我的项目经历了许多版本的访问（2000 -> 2010）。如果有某种方法可以自动编辑我的 autoexec 表单，然后重新启动访问 - 这将作为一种解决方法。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-06T18:41:27.120

在我的访问数据库中，我多年来一直遇到这个问题。我尝试了上述所有解决方案，它们都解决了问题，只是在稍后的某个时间再次出现问题 - 总是在 VBA 代码更改之后。我发现反编译然后重新编译总是可以解决这个问题，并且是最快和最简单的方法。所以我得出的结论是，在程序更改（如宏和 VBA 代码更改）后，Office 仅部分编译存在错误。经过多次更改后，系统“精神错乱”并抛出“找不到文件”错误。通读用户在此博客中找到的修复程序支持我的理论。几乎所有这些修复可能会导致某种排序并重新编译失灵的代码。

我的解决方案

总之，我发现了以下内容..

1.  进行反编译（无需重新编译）将消除错误 - 但如果代码在不同的机器上运行，错误会再次出现。

2.  进行反编译，然后重新编译，然后是压缩和修复结果，使我的应用程序可以在其他机器上运行而没有任何问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-03-14T02:06:02.147

我有一个未使用的类模块 - Class1。我删除了它并进行了压缩和修复。发生了一些事情，导致类模块的名称保留在导航窗格中，但模块本身已被删除：打开 VBA 编辑器时，我得到“找不到文件”。无法从导航窗格中删除名称！！反编译项目时出现“加载'Class1'时发生错误。您要继续加载项目吗？” 我做到了 - 现在再次打开项目时 Class1 仍在导航窗格中，但现在我可以从导航窗格中删除。之后不再出现有关找不到文件的消息。供参考

# android-maps-v2 - Tile Overlay for Android maps v2：如何将纬度和经度映射到像素位置

> ID：15932749
> 
> 赞同：0
> 
> 时间：2013-04-10T17:42:01.130
> 
> 标签：android-maps-v2

我正在为 Android maps v2 构建图像`TileOverlay`。例如，假设我希望一个像素在图块中以特定的纬度和经度结束，成为特定的颜色。我如何知道图块中的哪些纬度和经度将映射到我图像中的哪些像素？

瓷砖从 {latInTile,lngInTile} 到 {pixelLocationX, pixelLocationY} 的映射是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:11:28.800

这正是“投影”的含义。谷歌使用墨卡托投影，描述在这里[https://en.wikipedia.org/wiki/Mercator_projection](https://en.wikipedia.org/wiki/Mercator_projection)。

映射是：

```
pixelLocationX = longitude
pixelLocationY = ln(tan(latitude/2 + Pi/4)) 
```

其中经度和纬度以弧度为单位。然后必须将像素位置缩放到您需要的任何单位。

# maven - 推迟 Maven 子模块中的属性评估

> ID：15932750
> 
> 赞同：2
> 
> 时间：2013-04-10T17:42:07.657
> 
> 标签：maven, maven-3

我在尝试在 3 级多模块项目中运行 maven 时遇到了一些问题。

第一层是super-pom，定义了antrun任务。它位于外部存储库中。第二个是指super-pom，只包含子模块的定义。假设它在 /project 第三层包含子模块，它的项目位于 /project/moduleN。

在第一层，AntRun 任务包括对“${project.basedir}”的调用。

当我使用 maven 时，我进入二级 pom 文件夹并运行 mvn clean install。

由于它只包含子模块，它会尝试编译它们，但 ${project.basedir} 已经被评估为 /project，而不是 /project/moduleN。

我想推迟对这些表达式的评估，以便用我的子模块中的值替换它们，而不是来自包括它们在内的 pom，但我找不到这样做的方法。

以下是 POM 文件的摘录，以了解发生了什么：

**超级聚甲醛**

```
<groupId>org.example</groupId>
<artifactId>superpom</artifactId>
<packaging>pom</packaging>
...
<plugins>
    <plugin>
        <artifactId>maven-antrun-plugin</artifactId>
        ...
        <exec dir="${project.basedir}" ...></exec>
    </plugin>
</plugins> 
```

**项目 POM**

```
<parent>
    <groupId>org.example</groupId>
    <artifactId>superpom</artifactId>
</parent>

<groupId>org.example</groupId>
<artifactId>projectPom</artifactId>

<packaging>pom</packaging>

<modules>
    <module>module1</module>
    <module>module2</module>
</modules> 
```

**模块 POM**

```
<parent>
    <groupId>org.example</groupId>
    <artifactId>projectPom</artifactId>
</parent>
<groupId>org.example</groupId>
<artifactId>moduleNPom</artifactId>
<packaging>jar</packaging> 
```

# java - 编辑后是否需要将一个集合重新放入另一个集合中？

> ID：15932753
> 
> 赞同：1
> 
> 时间：2013-04-10T17:42:16.343
> 
> 标签：java

在 JAVA 中，我有一个 HashMap，其中“播放器”对象作为键，“ArrayList”作为值。它用于存储每个玩家的对手。指向 hashmap 的变量称为 playerOpponents。

现在我想为某个玩家添加一个对手。是否有必要像方法 1 那样在编辑后将列表放入地图中，还是像方法 2 那样？

方法1：

```
private void addOpponent(Player p, Player opponent)
{
    ArrayList<Player> allOpponents = playerOpponents.get(p);
    allOpponents.add(opponent);
    playerOpponents.put(p,allOpponents);
} 
```

方法2：

```
private void addOpponent(Player p, Player opponent)
{
    ArrayList<Player> allOpponents = playerOpponents.get(p);
    allOpponents.add(opponent);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:47:12.427

不需要每次都放列表引用。只需`null`检查一下。

```
private void addOpponent(Player p, Player opponent){
    List<Player> allOpponents = playerOpponents.get(p); 
    if(playerOpponents.get(p)==null){
         allOpponents = new ArrayList<>();
         allOpponents.add(opponent);
         playerOpponents.put(p,allOpponents);
    }else
       allOpponents.add(opponent);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:45:58.420

没有必要重新放置对象。您的`get`语句所做的是检索对 的引用，而`ArrayList`不是`ArrayList`.

再举一个例子，假设你这样做了：

```
ArrayList a = playerOpponents.get(p);
ArrayList b = playerOpponents.get(p); 
```

所做的任何更改都会`a`反映在`b`其中，反之亦然。在您的情况下，`a`是使用方法`ArrayList`从 检索到的引用，并且是. 对一个参考的更改会反映在另一个参考中。`HashMap``get``b``ArrayList``HashMap`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T17:44:05.833

不。由于`HashMap`已经有列表，您只是`get`参考而不是`remove`它，因此不需要再次添加它。只需将元素添加到现有列表中。而已。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T17:44:08.437

不。`HashMaps`像所有其他集合存储`Object`引用一样。您对 中的对象所做的任何更改都会`Map`立即反映在`Object`返回的 by中，`HashMap#get`因为它们是*相同的 Object*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T17:45:21.577

最简洁的方法是：

```
playerOpponents.get(p).add(opponent); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T17:50:59.863

不会。playerOpponent 从 Player p 的映射引用的 ArrayList 将包含“opponent”，而没有任何其他函数调用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T18:29:09.760

没关系，不需要重新放，因为你只是改变了键值映射的VALUE。

但是，需要注意一个微妙的问题：如果您曾经更改 KEY，即 Player 实例，以影响其 equals() 或 hashCode() 方法的方式，那么您的地图可能会变得一团糟。如果您使用默认的 equals() 和 hashCode() 实现，那么更改 Player 中的任何字段都会搞砸地图。

在后一种情况下，您确实需要在更改之前将其删除并在更改之后重新放置，以便它可以正确地散列到其新的散列位置。或者可能更简单，只需覆盖 Player 类的 hashCode() 和 equals() 方法，只考虑 Player 的一些不可变字段，例如 playerId；那么您可以自由使用它而无需删除或重新放置（只要该不可变字段永远不会为空）。

# ios - UITextField rightViewMode 无法正常工作

> ID：15932754
> 
> 赞同：3
> 
> 时间：2013-04-10T17:42:25.107
> 
> 标签：ios, uitextfield

我需要在 UITextField 上创建一个自定义清除按钮，所以我使用的是 rightView。代码如下：

```
 UIImage *clearImage = [[UIImage imageNamed:@"search-clear.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0.0,0.0, 0.0, 0.0)];
    UIImageView *clearImageView = [[UIImageView alloc]initWithImage:clearImage];

    UIButton *clearButton = [UIButton buttonWithType:UIButtonTypeCustom];
    clearButton.frame = clearImageView.frame;
    [clearButton setBackgroundImage:clearImage forState:UIControlStateNormal];
    clearButton.backgroundColor = [UIColor clearColor];

    self.emailTextField.rightViewMode = UITextFieldViewModeWhileEditing;
    self.emailTextField.rightView = clearButton;
    self.emailTextField.clearButtonMode = UITextFieldViewModeNever; 
```

但是，该按钮未在正确的时间显示。它显示文本字段何时仅在文本长度为 0 时处于焦点。一旦我开始输入，它就会消失。我需要弄清楚如何替换和复制清除按钮，以便它在字符串至少为 1 个字符时显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T10:37:06.763

你不能同时显示两者，但你可以这样做

```
UITextField * textfield = [[UITextField alloc] initWithFrame:CGRectMake(10, 100, 300, 40)];
[textfield setBorderStyle:UITextBorderStyleRoundedRect];

UIImageView * imgvw = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"search.jpeg"]];
[imgvw setFrame:CGRectMake(0, 0, 30, 30)];

[textfield setRightView:imgvw];
[textfield setRightViewMode:UITextFieldViewModeUnlessEditing];
[textfield setClearButtonMode:UITextFieldViewModeWhileEditing];

[self.view addSubview:textfield]; 
```

# backbone.js - 主干视图 - 在鼠标输入时创建而不触发事件

> ID：15932755
> 
> 赞同：0
> 
> 时间：2013-04-10T17:42:25.843
> 
> 标签：backbone.js

我正在使用一个 jQuery 工具提示插件，它需要使用 jQuery 克隆功能来填充自动生成的工具提示。对于我正在处理的项目，我无法控制工具提示何时启动，也没有可用的回调，因此我使用 jQuery .on('mouseenter') 来初始化我的事件。

我在初始化函数中放置的任何东西都有效，但我的点击事件不会触发。根据我的阅读，如果定义了 el ，那么标准事件（点击）应该会自动绑定，但这并没有发生，据我所知，这应该可以正常工作。

javascript:

```
Lot = Backbone.View.extend({
    initialize: function(){
        this.wrapper = $(this.$el).find('.childDiv');
        $(this.$el).css('background-color', 'blue');
        console.log('init');
    },
    events: {
      'click .showChild': 'showfunction'
    },
    showfunction:function(e){
         this.wrapper.slideToggle('fast');   
    }
});

//gives the auto generated tooltip a class, otherwise it would be classless
$.balloon.defaults.classname = "balloon";

//tooltip needs content passed in, the tooltip creator recommends using clone
$('#showParent')
   .balloon({contents: $('.tooltip-content').clone(), position: "bottom right" });

// this may look redundant, but I do not have access to the initialize function
$('#showParent').on('mouseenter', function() {
    console.log('mouse enter');
    lots = new Lot({el: $('.balloon .tooltip-content')});
}); 
```

HTML：

```
<button id="showParent">Hover</button>
<div id="wrapper">
    <div class="parentDiv tooltip-content">
        <h1> Some text to test parent</h1>
        <button class="showChild">Click</button>
        <div class="childDiv">
            <h2> here is a child div</h2>
        </div>
    </div>
</div> 
```

这是一个小提琴：http: [//jsfiddle.net/KFkjZ/](http://jsfiddle.net/KFkjZ/)

任何关于为什么事件可能不具有约束力的现场都表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:16:07.707

这是因为`balloon`jquery 插件使用克隆并`body`在第一次显示时将其附加到 HTML 中。这会破坏您`Lot`视图的事件处理程序（因为这意味着 Backbone 附加事件处理程序的范围不再相关）。

打破封装的一种选择是附加一个文档级别的事件，以您想要的方式处理点击：

```
$(document).on('click', '.showChild', function (e) {
    console.log('clicked');
    $(this).slideToggle('fast');    
}); 
```

# r - 使用 quantmod 下载 FRED 数据：可以指定日期吗？

> ID：15932758
> 
> 赞同：8
> 
> 时间：2013-04-10T17:42:41.057
> 
> 标签：r, quantmod, quandl

我正在使用`quantmod`库（作者 Jeffrey A. Ryan）从 FRED 下载数据。使用**Yahoo**和**Google**数据，我可以设置开始和结束日期。可以对**FRED**数据做同样的事情吗？

帮助页面没有将“from”和“to”列为 quantmod 的 getSymbols 函数的选项，我从中推断目前不可能。

有没有办法为要下载的数据设置范围，还是我需要下载整个数据集并丢弃我不需要的数据？

谢谢你的帮助。在说明上下文的代码下方：

从 FRED 下载时忽略日期：

```
# environment in which to store data 
data <- new.env()

# set dates
date.start <- "2000-01-01"
date.end <- "2012-12-31"

# set tickers
tickers <- c("FEDFUNDS", "GDPPOT", "DGS10")

# import data from FRED database
library("quantmod")
getSymbols( tickers
  , src = "FRED"  # needed!
  , from = date.start  # ignored
  , to = date.end  # ignored
  , env = data
  , adjust = TRUE
)

head(data$FEDFUNDS)

head(data$FEDFUNDS)
           FEDFUNDS
1954-07-01     0.80
1954-08-01     1.22
1954-09-01     1.06
1954-10-01     0.85
1954-11-01     0.83
1954-12-01     1.28 
```

**编辑：解决方案**

感谢**GSee**下面的建议，我正在使用以下代码将数据子集到上面指定的日期范围内：

```
# subset data to within time range
  dtx <- data$FEDFUNDS
  dtx[paste(date.start,date.end,sep="/")] 
```

在这里，我在对其进行操作之前从环境中提取了 xts 数据。我的后续问题探讨了替代方案。

**后续问题**

我在那里问了一些后续问题：[get xts objects from within an environment](https://stackoverflow.com/questions/15980985/get-xts-objects-from-within-an-environment)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T17:44:15.477

您必须稍后下载所有数据和子集。 `getSymbols.FRED`不支持这样的`from`论点`getSymbols.yahoo`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T16:13:12.020

或者，您可以从 Quandl ( [http://www.quandl.com/help/r](http://www.quandl.com/help/r) ) 下载 FRED 数据，它提供了超过 400 万个数据集，包括所有 FRED 数据。有可用的 API 和 R 包。（“夸德尔”）。数据可以以多种格式返回，例如数据帧（“raw”）、ts（“ts”）、zoo（“zoo”）和xts（“xts”）。例如，要下载 GDPPOT10 并指定日期并将其作为 xts 对象返回，您只需：

```
require(Quandl)
mydata = Quandl("FRED/GDPPOT", start_date="2005-01-03",end_date="2013-04-10",type="xts") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-21T21:04:39.837

Quandl 似乎没有提供来自 FRED 的所有数据，至少在数据频率方面。Quandl 很可能只提供在许多情况下无用的年度数据。

# android - 应用程序更新时警报的有效性

> ID：15932759
> 
> 赞同：1
> 
> 时间：2013-04-10T17:42:42.910
> 
> 标签：android, alarmmanager, updates

假设我的一个服务设置了警报，现在已经安装了应用程序的更新。

可以保证我的闹钟会响吗？

如果没有，我可以添加一个事件监听器进行更新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:39:16.253

警报会在更新中保留。我至少可以在 Android 4.0 上验证这一点。

它也适用于 Android 2.2。我会假设这只是工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:52:24.560

我想你应该拦截安装、删除和替换广播并在那里重新实例化你的警报。

行动是：

```
ACTION_PACKAGE_ADDED
ACTION_PACKAGE_REPLACED 
```

检查[此链接](http://www.xinotes.org/notes/note/1335/)

# coding-style - 是否有任何样式指南更喜欢 < over > 以提高可读性？

> ID：15932760
> 
> 赞同：0
> 
> 时间：2013-04-10T17:42:49.180
> 
> 标签：coding-style, expression, comparison-operators, code-readability

对于编码关系表达式，是否有任何权威标准或风格指南或实地研究推荐小于大于大于？

例如，更`(0 <= x && x < 1)`喜欢`(x >= 0 && x < 1)`.

因为我们通常从左到右阅读并且通常向上计数，所以对齐这些应该会增加可读性，特别是对于复杂的布尔表达式。

（[https://softwareengineering.stackexchange.com/questions/190311/what-is-best-in-a-if-condition-position-size-or-size-position-and-why](https://softwareengineering.stackexchange.com/questions/190311/what-is-best-in-a-if-condition-position-size-or-size-position-and-why)有一些争论，但没有引用有信誉的来源。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:36:10.493

简单地说，答案是否定的。这可能是为什么：

[https://stackoverflow.com/a/1186084/2097284](https://stackoverflow.com/a/1186084/2097284)建议 Martin Fowler 的“重构：改进现有代码的设计”，如上面评论中的“清洁代码”以及谁知道还有多少其他书籍，主张拆分复杂的布尔表达式，带或不带比较运算符，分成具有描述性名称的部分。（不像，比如说，那句话。）所以这个问题太狭窄了，不值得花费正式研究的费用。

# c - 在函数中调用数组

> ID：15932761
> 
> 赞同：-1
> 
> 时间：2013-04-10T17:42:52.583
> 
> 标签：c, math

我是 C 新手，我正在用 C 开发一个程序来评估格林定理的 RHS

那些不知道格林定理的人是

[关联](http://en.wikipedia.org/wiki/Green%27s_theorem)

来自维基百科。现在关于格林定理的右手边（RHS），它需要偏微分和双重积分。我用 C 编写了一个程序来分别计算 M 和 L wrt x 和 y 的偏微分。这是它的代码。

现在问题来了，你可以看到 f() 是一个要被集成的函数，我们的例子是第一个代码中的 e[i]-d[j]。现在的问题是 e[i]-d[j] 是一个点数组，所以当函数 f(u,v) 调用它的值时，它应该返回该点对应的函数值。例如我们得到 f(1,0.8) ，那么函数 e[i]-d[j] 应该返回 i=1 和 j=0.8 处的值，这是不可能的数组下标不能是浮点数类型。所以在这里我被困在如何从函数 f 中调用值。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:48:57.370

将您正在玩的点数乘以一个常数因子 - 例如 10。然后你可以将你的数组下标乘以相同的值。在您的示例中， 1, 0.8 变为 (10, 8) 并且工作正常。如果您有兴趣，这是定点数学的变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:05:38.600

你从哪里得到 0 和 1 之间的值？您是否只是即时计算 i,j 的值？在程序的第一部分，只计算带有 int 索引的值。

无法使用 float i,j 作为数组索引来存储值。如果你坚持使用浮点数作为索引。可能是 c++ STL 图可以帮助你。您可以只使用 i+j 作为索引值的键。

# java - 整数到数组中的链表

> ID：15932764
> 
> 赞同：0
> 
> 时间：2013-04-10T17:43:10.220
> 
> 标签：java, arrays, linked-list

我正在做一个分配，其中整数被输入到应用程序中，整数被散列，然后放入一个数组中。数组中的每个位置都是我编写的链接列表。我的问题是我似乎无法指定整数应该在数组中的哪个位置。目前，我的输出是数组中每个位置的最后五个整数，除了位置 10，它是空的。任何帮助将不胜感激。谢谢你。

```
public class MyHashTab {
  private static MyList last;
  private static MyList first;

  public MyHashTab(int initialCapacity, MyList[] anArray) {

  }

  public static void insert(int searchKey, MyList[] anArray) {
    int hash = searchKey % anArray.length;
    MyList current = new MyList(searchKey);

    current.next = null;

    if (anArray[hash] == null) {
      current.next = null;
      first = current;
      last = current;
      anArray[hash] = current;
    } else {
      last.next = current;
      last = current;
    }
  }

  public static void printHash(MyList[] anArray) {
System.out.println("The generated hash table with separate chaining is: ");

    for (int i = 0; i < anArray.length; i++) {
      if (anArray[i] == null) {
        System.out.println("\nThe items for index[" + i + "]: ");
        i++;
      }

      System.out.print("\nThe items for index[" + i + "]: ");
      MyList temp = first;

      while (temp != null) {
        System.out.print(temp.iData + "\t");
        temp = temp.next;
      }
    }
  }
}

public class MyList {
  int iData; // This integer is used as a key value, and as a way to see the actual node instead of it's memory address.
  MyList next; // This is a pointer to a nodes right child. 

  public MyList(int searchKey) {
    this.iData = searchKey;
  }
} 
```

我相信问题在于从第 26 行开始的 else 语句。我没有分配哪个链表来使新整数成为其中的一部分。有没有正确的写法，

```
anArray[hash].last.next = current;
anArray[hash].last = current; 
```

我在 if 和 else 语句中都添加了 print 语句，并且我都在使用它们。谢谢你。

输出

```
The generated hash table with separate chaining is: 
The items for index[0]: 366 976 312 244 655
The items for index[1]: 366 976 312 244 655
The items for index[2]: 366 976 312 244 655
The items for index[3]: 366 976 312 244 655
The items for index[4]: 366 976 312 244 655
The items for index[5]: 366 976 312 244 655
The items for index[6]: 366 976 312 244 655
The items for index[7]: 366 976 312 244 655
The items for index[8]: 366 976 312 244 655
The items for index[9]: 366 976 312 244 655
The items for index[10]: 
The items for index[11]: 366    976 312 244 655 
```

预期的输出应该是这样的。生成的带有单独链接的哈希表是：
索引 [0] 的项目：36 60 108 312
索引 [1] 的项目：85
索引 [2] 的项目：290 422
索引 [3] 的项目：99 135
索引 [4] 的项目：76 148 244 568 976
索引 [5]​​ 的项目：29 173 245
索引 [6] 的项目：366
索引 [7] 的项目：619 655 703
索引 [8] 的项目]：56
索引 [9] 的项目：345
索引 [10]
的项目：索引 [11] 的项目：23 47

每个整数在经过哈希处理后放置在适当位置的数组列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:20:56.013

您对 LinkedList 是什么以及它应该如何操作有一个微妙的误解。

```
public class LinkedList {
  //These should NOT be static
  private Node last;
  private Node first;

  public LinkedList(Node initialNode) {
    this.last = initialNode;
    this.first = initialNode;
  }

  public static void insert(int searchKey, LinkedList[] arr) {
    int hash = searchKey % arr.length;

    Node newNode = new Node(searchKey);

    if (arr[hash] == null) {
      arr[hash] = new LinkedList(newNode);
    } else {
      LinkedList list = arr[hash];
      list.add(newNode);
    }
  }

  public void add(Node node) {
    //here you should add this node to the end of this linked list
    this.last.addNext(node); //tell the current last node about the new last node
    this.last = node; //point the last pointer of this list to the new node
  }

  public static void printHash(LinkedList[] arr) {
    System.out.println("The generated hash table with separate chaining is: ");

    for (int idx = 0; idx<arr.length; idx++) {
      System.out.println("\nThe items for index[" + idx + "]: ");
      if (arr[idx] != null) {
        arr[idx].print();
      }
    }
  }

  public void print() {
    Node node = this.first;
    System.out.print(temp.iData + "\t");
    while (node.hasNext()){
      node = node.getNext();
      System.out.print(temp.iData + "\t");
    }
  }
}

public class Node {
  int iData; 
  Node next = null; // This is a pointer to a nodes right child. 

  public MyList(int searchKey) {
    this.iData = searchKey;
  }

  public Node getNext() {
    return this.getNext();//Note this might be null!
  }

  public boolean hasNext() {
    if (this.next == null) { return false; }
    return true;
  }

  public void addNext(Node node) {
    this.next = node;
  }
} 
```

您可以按如下方式调用此代码：

```
LinkedList[] arrayOfLists = new LinkedList[12];//sets up an array of 12 linked lists
LinkedList.insert(36, arrayOfLists);
arrayOfLists.printHash(); 
```

但请注意，通常对于此类事情，该`insert()`方法不会是静态的。了解静态成员和方法在 OOP 中非常重要。该类的所有实例的静态成员都是相同的。大多数对象必须被实例化（`new SomeObject()`）；一个实例化的对象有它自己的每个非静态成员的副本。非静态函数只能在实例化对象上调用：LinkedList.insert(36, arrayOfLists);//调用静态方法

```
LinkedList list = new LinkedList(Node someNode);//Instantiating a new LinkedList object
list.print();//calling a non-static function on an instantiated object 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:14:31.737

免责声明：我咆哮了一下。我只是想把所有相关的东西都记下来。如果您只对解决方案感兴趣，请向下滚动到我加粗标题的位置...

从一开始，就像 Nathaniel Ford 提到的那样，我相信您对 HashTable 实现的工作原理存在概念上的误解。让我们从分解逻辑开始。

HashTable 是一种结构，用于通过计算所存储对象的唯一（或几乎唯一）散列来存储和快速检索对象。当您计算这种单向哈希并使用它在表中存储对象时，您允许在理想情况下进行 O(1) 查找。

在一个完美的世界中，所有输入都会唯一地散列并且永远不会发生冲突，但我们知道这是不切实际的。因此，当您拥有多个对象时，您需要有一个集合，允许您将多个对象存储到同一个哈希值；一个`LinkedList`！

现在有了一个包含 12 个值的数组，您需要为每个元素拥有一个唯一的 LinkedList。如果写出，您的预期输出将如下所示：

`hashTable`[0] = `LinkedList`( `Node(36)`-> `Node(60)`-> `Node(108)`-> `Node(312)`)
`hashTable`[1] = `LinkedList`( `Node(85)`)
等等...

目前，您正在尝试将单个链表的想法与链表的集合混合在一起。我们在这里看到了这种误解：

```
private static MyList last;
private static MyList first; 
```

通过声明`first`和`last`作为类变量，您实际上是在创建这样一种信念，即整个链接列表集合只有`first`一个`last`变量，其中每个列表都应该有自己的第一个/最后一个指针。您的代码创建的结果是插入到数组中各个位置的节点具有对与它们完全无关的位置的引用的逻辑。

**所以在现实中，从哪里开始修复？**

清理你的`insert`方法，让你一步一步地做事。

1) 计算传入对象的哈希值
2) 在数组上查找哈希值
3) 如果数组位置为空，则生成一个新的链表并将值插入数组
3b) 如果数组不为空，则为列表并将现有列表的最后一个节点指向新节点
4) 完成

Nathaniel 的代码非常适合这种需求，但如果您被迫使用该`MyList`实现，它的行为将如下所示：

```
int hash = searchKey % arr.length;
MyList newNode = new MyList(searchKey);
MyList arrIndex = arr[hash];

if (arrIndex == null) {
  arr[hash] = newNode;
} else {
  while (arrIndex.next != null) { 
    arrIndex = arrIndex.next;
  }
  arrIndex.next = newNode;
} 
```

此外`printHash`，由于两个问题，您的方法需要更新。

1) 如果 arr[i] 为 null，您增加的逻辑`i`可能会导致您超出范围。在数组的最后一个索引为 null 的情况下，您将`i`在不检查它的情况下增加。您最好进行这样的检查并让循环为您完成工作：

```
if (anArray[i] == null) {
  continue;
} 
```

或保持代码更干净（程序流程中没有随机跳转）

```
for (...) {
  if (anArray[i] != null) {
    //Code to print that array
  }
} 
```

2）不再使用`first`and `last`，您只需遍历每个元素

```
for (int i = 0; i < anArray.length; i++) {
  System.out.print("\nThe items for index[" + i + "]: ");

  if (anArray[i] != null) {
    MyList tmp = anArray[i];
    while ((tmp = tmp.next) != null) {
      System.out.print(tmp.iData + " ");
    }
  }
} 
```

# c++ - 尝试使用 VS 2012 编译器在 Windows 7（32 位构建）上构建 Qt 时缺少“qrc_mimetypes.cpp”

> ID：15932767
> 
> 赞同：0
> 
> 时间：2013-04-10T17:43:19.143
> 
> 标签：c++, qt, visual-studio-2012, qt5

我正在尝试按照[此处](https://stackoverflow.com/questions/15826893/downloading-and-integrating-qt5-with-visual-studio-2012/15893226#15893226)的步骤使用 VS 2012 C++ 编译器在 Windows 7 64 位（但 Qt 的 32 位构建）上构建 Qt 。（我也在更新后一个 Wiki。）

不幸的是，我无法克服运行`missing .rcc\debug_shared\qrc_mimetypes.cpp`一段时间后出现的错误`nmake`。

（注意：`int-repository`and`configure`似乎进展得相当顺利（但请参阅下面引用的评论），并`nmake`在遇到“缺少 qrc_mimetypes.cpp”错误之前成功构建文件一段时间。）

我从头开始尝试了两次。关于我所做的更多细节，从我在上面链接的社区 Wiki 下方的评论中复制：

> 我无法摆脱丢失的 .rcc\debug_shared\qrc_mimetype.cpp。昨晚收到同样的错误后，今天我从头开始删除我的整个 Qt 文件夹并重新下载 Qt，然后是 init-repository，当它完成时（报告一些“权限被拒绝”错误）我跟进在 SmartGit 中打开 Git 项目，注意到一些空子模块，并通过 SmartGit（包括子模块）进行拉取，报告成功并填充了所有子模块。不幸的是，nmake 在完全相同的地方失败了——丢失的 qrc_mimetypes.cpp。有什么建议么？

任何建议将不胜感激。我还在相关的 Qt 论坛上[发表了关于这个问题的评论。](http://qt-project.org/forums/viewthread/24896/P15/#120946)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:35:52.427

我已经解决了这个问题。问题是由于 Avast！防病毒沙箱错误。

我已附加[链接的 Wiki](https://stackoverflow.com/a/15893226/368896)以给出有关问题（和解决方法）的警告。

直接从该 Wiki 引用，并在 Wiki 条目下方引用我的评论：

> **CRITICAL**请 在 Qt过程中禁用任何防病毒软件**和沙盒**`nmake`（为了安全起见，在整个过程中）。在内部，Qt 执行许多防病毒程序可以干扰的可执行文件（有时是静默）。特别是，如果您有任何沙盒软件，请务必禁用沙盒。
> 
> **对 AVAST 的紧急警告！**沙盒用户：Avast 沙盒有一个错误，即使您禁用 Avast 的自动沙盒，沙盒也不会关闭，它会在 Qt 的构建**过程中静默沙**`rcc`盒由 Qt程序自动创建的所有资源文件。对于任何安装了 Avast 自动沙盒功能的用户，即使关闭了自动沙盒功能，Qt 构建总是会失败。解决此问题的唯一方法是完全卸载 AVAST！在构建 Qt 之前从您的系统中获取。您可以重新安装 Avast！Qt构建完成后。

和我的评论

> 我发现了与我之前的评论相关的问题。Avast 有一个错误！杀毒软件的沙箱，比如 Avast！必须从操作系统中完全卸载才能构建 Qt，因为 Avast！自动沙盒功能即使设置为“禁用”也不会关闭，而是进入“静默”沙盒模式；阿瓦斯特！正在获取 Qt`rcc`命令的输出并从系统中删除这些文件（默默地，没有警告），导致 Qt 构建失败。关闭 Avast 的唯一方法！完全是卸载它。我已经修改了 Wiki 来讨论这个问题。

（不用说，在成为 Avast! 多年的用户之后，在我看来，他们已经变得越来越高，而且他们不再被评为 PC mag 或其他地方的前十名；我已经切换到[Bitdefender](http://www.bitdefender.com/)。）

# .net - 将平面数据源绑定到手风琴

> ID：15932770
> 
> 赞同：0
> 
> 时间：2013-04-10T17:43:28.350
> 
> 标签：.net, ajax

我有一个想要绑定到手风琴的 OLAP 多维数据集。

我获取数据的步骤是通过一个存储过程，该过程最终成为 .net 中的平面数据表；它看起来像这样：

```
维度1，测量1，测量2，测量3
-------------------------------------------------- -
标头1、1、2、3
标头 1、2、3、4
标头 1、3、4、5
标头 2、4、5、6
标头 2、6、7、8
标题 3、7、8、9
 ... ETC。

在手风琴中，我希望它显示为：
标题1
1,2,3
2,3,4
3,4,5
标头2
4,5,6
6,7,8
标题3
7,8,9

```

在 ItemDataBound 事件中，我想创建一个标签标题，然后将每个度量添加到数据网格中，就像 John 在此处所做的那样：http: [//www.dotnetjohn.com/articles.aspx](http://www.dotnetjohn.com/articles.aspx?articleid=283) ?articleid=283 。

问题是，对于数据表中的每个项目，.net 想要创建一个新的手风琴窗格，并且每个记录的事件被命中两次（一次作为标题，一次作为项目）。我想使用数据绑定方法，因为我认为以后维护起来会容易得多（因为我需要事件连接）。

我无法取消 itemdatabound 事件。此外，accordion.datasource 属性仅接受数据视图，因此我无法传入数据集并对其进行操作。

我的假设是数据绑定不是正确的路线。

我感谢任何人在尝试解决此问题时的任何见解。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:40:48.927

我没有使用过手风琴，但以下适用于嵌套网格和中继器，也许你可以适应。

```
public class DataItem
{
    public string Header { get; set; }
    public string Measure1 { get; set; }
    public string Measure2 { get; set; }
    public string Measure3 { get; set; }
} 
```

在您对手风琴进行数据绑定的方法中：

```
DataItem[] dataList = GetData();

IEnumerable<IGrouping<string, DataItem>> groupedList = dataList.GroupBy(x => x.Header);

AccordionControl.DataSource = groupedList;
AccordionControl.DataBind(); 
```

然后在手风琴的`ItemDataBound`活动中：

```
var group = (IGrouping<string, DataItem>)e.Item;

HeaderLabel.Text = group.Key;

GridControl.DataSource = group;
GridControl.DataBind(); 
```

# angularjs - 处理完子节点后，如何在 Angular 指令中调用函数？

> ID：15932771
> 
> 赞同：11
> 
> 时间：2013-04-10T17:43:35.607
> 
> 标签：angularjs, angularjs-directive

我正在尝试使用 Angular JS 指令将 div 的内容居中。

这是模板的简化版本：

```
<div id="mosaic" class="span12 clearfix" s-center-content>
    <div ng-repeat="item in hits" id="{{item._id}}" >
    </div>
</div> 
```

这是指令：

```
 module.directive('sCenterContent', function() {
    var refresh = function(element){
        var aWidth= element.innerWidth();
        var cWidth= element.children()[0].offsetWidth;
        var cHeight= element.children()[0].offsetHeight;
        var perRow= Math.floor(aWidth/cWidth);
        var margin=(aWidth-perRow*cWidth)/2;
        if(perRow==0){
            perRow=1;
        }
        var top=0;
        element.children().each(function(index, child){
            $(child).css('margin-left','0px');
            if((index % perRow)==0){
                $(child).css('margin-left',margin+'px');
            }
        });
    };
    return {
        link : function(scope, element, attrs) {
            $(window).resize(function(event){
                refresh(element);
            });
        }
    };
}); 
```

它基本上浮动一些内部 div 并为每行的第一个 div 添加边距，因此内容居中。

当浏览器调整大小时，这可以正常工作。当我在初始化后尝试进行刷新时，问题就来了。

[我已尝试使用此问题](https://stackoverflow.com/questions/14565121/whats-the-difference-between-the-2-postlink-functions-in-directive)中所见的帖子链接功能。pre link 和 post link 函数按预期顺序调用，但不是在具有 s-center-content 指令的 elemenet 的子级渲染之后。由于未找到子项，刷新调用失败。

如何调用刷新以确保子项已得到处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-21T20:55:06.777

我认为使用 angular 的[$watch](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$watch)是一个更好、更优雅的解决方案：

```
link : function(scope, element, attrs) {
            $(window).resize(function(event){
                refresh(element);
            });

            var watchCount = 0,
            unWatcher = $watch(
                function() {
                   return $('*[s-center-content] img').length !== 0;
                },
                function() {
                   // ensure refresh isn't called the first time (before the count of elements is > 0)
                   if (++watchCount === 1) {
                       return;
                   }

                   refresh(element);                   

                   // stop watching the element now that refresh has been called
                   unWatcher();
                }, true);
        } 
```

关于停止观看：[AngularJS：清除 $watch](https://stackoverflow.com/questions/14957614/angular-js-clear-watch)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T19:20:20.163

这是一个反复出现的问题（在某个地方存在与此相关的问题，以及谷歌论坛中的一个线程..）

Angular 无法知道 dom 何时完成，它只能知道它调用的函数何时返回（以及任何 promise 都已解决）。如果这些函数是异步的并且没有回调或承诺，则无法获得通知。

我看到它完成的方式（以及我完成它的方式）是使用 setInterval 定期检查 DOM 以查看它是否处于完成状态。我讨厌这个解决方案，并且会很感激有一个替代方案，但是，它确实完成了工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:54:20.113

终于成功了！

我使用了 livequery 插件，并在链接方法的末尾添加了以下行：

```
$('*[s-center-content] > *').livequery( function(event){
    refresh(element);
}); 
```

我使用指令选择元素的任何第一级子级（当前和未来），`s-center-content`并附加一个在元素添加到 DOM 时调用的处理程序。

**编辑**

最后一点。我的内容布局主要取决于具有动态评估`src`属性的内部图像。所以为了让它工作，我不得不把代码改成这样：

```
$('*[s-center-content] img').livequery( function(event){
    $(this).load(function(){
       refresh(element);                    
    });
}); 
```

将左浮动 div 居中放置的指令的完整代码如下。请注意，它依赖于将计算的边距添加到行中的第一个 div。

```
module.directive('sCenterContent', function() {
    var refresh = function(element){
        var aWidth= element.innerWidth();
        var cWidth= element.children()[0].offsetWidth;
        var cHeight= element.children()[0].offsetHeight;
        var perRow= Math.floor(aWidth/cWidth);
        var margin=(aWidth-perRow*cWidth)/2;
        if(perRow==0){
            perRow=1;
        }
        var top=0;
        element.children().each(function(index, child){
            $(child).css('margin-left','0px');
            if((index % perRow)==0){
                $(child).css('margin-left',margin+'px');
            }
        });
    };
    return {
        link : function(scope, element, attrs) {
            $(window).resize(function(event){
                refresh(element);
            });
            $('*[s-center-content] img').livequery( function(event){
                $(this).load(function(){
                    refresh(element);                   
                });
            });
        }
    };
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T18:09:29.817

我相信这可以用css来完成。无论数字如何，目标都是以目标为中心的元素吗？

```
[]  []  []  []  []

    []  []  [] 
```

如果是这样，这绝对可以通过 css 实现，并且可以用更少的复杂性来实现。这是一个例子：

[http://codepen.io/thetallweeks/pen/kvAJb](http://codepen.io/thetallweeks/pen/kvAJb)

# html - 在c#中打印没有页眉和页脚的htm文件

> ID：15932774
> 
> 赞同：0
> 
> 时间：2013-04-10T17:43:51.757
> 
> 标签：html, file, printing

我需要打印在 c# 代码中创建的 html 文件。我已经通过一个过程做到了：

```
 System.IO.File.WriteAllText("1.html",printHtml,Encoding.UTF8);
    Process printjob = new Process();
    printjob.StartInfo.FileName = "1.html";
    printjob.StartInfo.UseShellExecute = true;
    printjob.StartInfo.Verb = "print";
    printjob.StartInfo.CreateNoWindow = true;
    printjob.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
    printjob.Start(); 
```

打印的文档包含默认页眉（X 页第 1 页）和默认页脚（文件 url）。如何打印没有此页眉和页脚的 html 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:21:07.643

如果找到解决方案，我用“.doc”扩展名保存了 html 文件，然后打印了 doc 文件。System.IO.File.WriteAllText("1.html", printHtml, Encoding.UTF8);
处理 printjob = new Process();
printjob.StartInfo.FileName = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase) + "\1.html"
printjob.StartInfo.UseShellExecute = true;
printjob.StartInfo.Verb = "打印";
printjob.StartInfo.CreateNoWindow = true;
printjob.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
printjob.Start();

# c# - 如何阻止所有手机访问我的网站

> ID：15932775
> 
> 赞同：0
> 
> 时间：2013-04-10T17:43:56.997
> 
> 标签：c#, asp.net, iis-7, iis-7.5

我正在 IIS 7.5 上构建 ASP.Net/C# 站点，我想阻止所有手机访问该网站。

如何阻止/拒绝从所有类型的手机访问本网站（使用 Windows 身份验证）？我正在构建一个内部应用程序，我只希望带有 IE 的桌面可以访问。这比任何事情都更需要安全。

理想情况下，我想在任何 Windows 质询/响应发生之前先检查用户是否通过手机（或仅批准的浏览器）访问该网站。

我一直在向 Google 寻求有关这方面的指示（没有运气）以及查看 URL 重写选项。由于我对 Web 编程的这方面比较陌生，所以我对从哪里开始寻找，或者我什至在寻找正确的地方有点茫然。我不确定我应该只允许一个批准的浏览器通过还是阻止所有手机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:50:51.213

您可能必须使用 IIS 模块（如[URL Rewrite v2](http://www.iis.net/downloads/microsoft/url-rewrite)）并执行以下操作：[http ://forums.iis.net/t/1169853.aspx](http://forums.iis.net/t/1169853.aspx)

查看请求阻止功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:51:18.753

您只希望它检查 HTTP 请求上的 User-Agent 标头属性，并拒绝那些来自手机的 User-Agent 内容。

以下是移动设备的用户代理列表： [http ://www.zytrax.com/tech/web/mobile_ids.html](http://www.zytrax.com/tech/web/mobile_ids.html)

您必须使用`HttpResquest`. `UserAgent`属性：http: [//msdn.microsoft.com/en-us/library/system.web.httprequest.useragent.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.useragent.aspx)

祝你好运。

# c++ - 将键盘输入发送到 cerain 非活动窗口

> ID：15932778
> 
> 赞同：1
> 
> 时间：2013-04-10T17:44:03.270
> 
> 标签：c++, winapi

如何将按键消息发送到某些非活动窗口。我尝试使用 PostMessage 但没有结果。

尝试在记事本上测试，消息发送成功，但编辑框中没有输入。

我想将它发送到某个窗口，而不是控制，并且不能全局执行（我希望窗口保持非活动状态）。

注意：我想接收输入的窗口是游戏。

# asp.net - Site.Master 中标签的空引用异常

> ID：15932794
> 
> 赞同：2
> 
> 时间：2013-04-10T17:44:40.180
> 
> 标签：asp.net, c#-4.0

对于我的一生，我无法弄清楚为什么我在 Site.Master 页面中的标签上出现空引用异常。我在同一页面上有 2 个其他标签，它们不会引发错误。

这是带有所有 3 个标签的 DIV：

```
<div class="footer">
    <asp:Label ID="lblOS" runat="server" />
    <asp:Label ID="lblFooter" runat="server" /><br />
    <asp:Label ID="lblFooterEx" runat="server" Text="<% $Resources:mobileResource,FooterExtra %>" />
</div> 
```

lblOS 标签是引发错误的新标签。

这是我的 Site.Master.cs 文件中的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
      //Load App Store Icon
      string strUserAgent = Request.UserAgent.ToString().ToLower();
      if (lblOS.Text != null)
      { 
           if (strUserAgent.Contains("iphone") || strUserAgent.Contains("ipad")){
              lblOS.Text = "<a href='https://itunes.apple.com/'><img src='Images/appStore.jpg' class='connectIcons' title='App Store' alt='App Store' /></a><br />";
           }
           else{
               lblOS.Text = null;
           }
       }
       //Load Footer Links
       string url = Request.ServerVariables["URL"];
       url = url.Remove(0, url.LastIndexOf("/") + 1);

       if (url == "Default.aspx") {
          lblFooter.Text = GetGlobalResourceObject("mobileResource", "FooterNav").ToString();
       }
       else {
          lblFooter.Text = GetGlobalResourceObject("mobileResource", "FooterHome").ToString() + GetGlobalResourceObject("mobileResource", "FooterNav").ToString();
       }
} 
```

“if (iOSLabel != null)”这一行是错误。

正如其他地方所建议的，我尝试[**了这里**](http://msdn.microsoft.com/en-us/library/xxwa0ff0%28v=vs.100%29.aspx)提到的代码，并添加了：

```
Label iOSLabel = (Label)Master.FindControl("lblOS"); 
```

并相应地更改了 CS 代码。

当我测试它时，那个新的 iOSLabel 现在正在抛出空异常。

有关如何解决此问题的任何想法？

**编辑：** 这是生成的错误...

```
Error: System.Web.HttpUnhandledException (0x80004005): Exception of type 'System.Web.HttpUnhandledException' was thrown. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at CLVmobileApp.SiteMaster.Page_Load(Object sender, EventArgs e) in C:\Visual Studio\AS-MobileCLV\CLVmobileApp\Site.Master.cs:line 15
   at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)
   at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
   at System.Web.UI.Control.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.HandleError(Exception e)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest()
   at System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context)
   at System.Web.UI.Page.ProcessRequest(HttpContext context)
   at ASP.default_aspx.ProcessRequest(HttpContext context) in c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\cbd2add4\2961a9ef\App_Web_ddrybdwm.17.cs:line 0
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T16:41:39.040

代替

```
Label iOSLabel = (Label)Master.FindControl("lblOS"); 
```

尝试

```
Label iOSLabel = (Label)(Master as MyMasterPage) .FindControl("lblOS"); 
```

# mysql - SQL 查询似乎没有正确加入

> ID：15932799
> 
> 赞同：1
> 
> 时间：2013-04-10T17:45:01.773
> 
> 标签：mysql

我有两张桌子：`equipos`足球队的名字和`calendario`比赛（jornadas）。我需要得到 jornada 1 的比赛。

示例：皇家马德里 - 巴塞罗那

这是我的查询：

```
SELECT NOMBRE, NOMBRE FROM EQUIPOS 
LEFT JOIN CALENDARIO ON EQUIPOS.ID=CALENDARIO.ID_LOCAL 
    AND EQUIPOS.ID=CALENDARIO.ID_VISITANTE
WHERE JORNADA=1; 
```

第一个表是 CALENDARIO，第二个是 EQUIPOS

![日历](https://i.stack.imgur.com/05tbK.jpg)

![Equipos](https://i.stack.imgur.com/RxU6S.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:53:47.083

您可以执行以下操作：

```
SELECT local.Nombre, visitante.Nombre
FROM calendario
LEFT JOIN EQUIPO local ON calendario.ID_LOCAL = local.ID
LEFT JOIN EQUIPO visitante ON calendario.ID_LOCAL = visitante.ID
WHERE JORNADA = 1 
```

对于您的其他问题：

> 完美的。如果我有另一个名为 ARBITROS 的表，其中包含以下字段：ID 和 NAME，我想在每场比赛中获取 arbitros 的名称？

有查询：

```
SELECT local.Nombre, visitante.Nombre, arbitros.Name 
FROM calendario 
LEFT JOIN EQUIPO local ON calendario.ID_LOCAL = local.ID 
LEFT JOIN EQUIPO visitante ON calendario.ID_LOCAL = visitante.ID 
LEFT JOIN arbitros arbitros ON calendario.ID_arbitros = arbitros.ID 
WHERE JORNADA = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:53:16.783

您需要对表进行两次连接`EQUIPOS`（它们可能不需要*左*连接）。

```
SELECT EQUIPO_LOCAL.NOMBRE AS LOCAL, EQUIPO_VISITANTE.NOMBRE AS VISITANTE
FROM CALENDARIO
JOIN EQUIPOS AS EQUIPO_LOCAL ON CALENDARIO.ID_LOCAL = EQUIPO_LOCAL.ID
JOIN EQUIPOS AS EQUIPO_VISITANTE ON CALENDARIO.ID_VISITANTE = EQUIPO_VISITANTE.ID
WHERE JORNADA=1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T17:53:48.487

```
SELECT NOMBRE, NOMBRE FROM EQUIPOS LEFT JOIN CALENDARIO
ON EQUIPOS.ID=CALENDARIO.ID_LOCAL AND EQUIPOS.ID=CALENDARIO.ID_VISITANTE
WHERE JORNADA=1; 
```

由于 AND，您的 ON 条件是不可能的，因为您的本地团队不能与访客团队相同......您需要加入 2 次团队表才能在分隔表上执行条件

# android - Android OpenGL ES 2.0 多纹理和相机

> ID：15932800
> 
> 赞同：1
> 
> 时间：2013-04-10T17:45:07.173
> 
> 标签：android, opengl-es-2.0, shader, textures

我正在尝试使用 GLSurfaceView.Renderer 和 SurfaceTexture.OnFrameAvailableListener 将两个纹理混合在一起。

第一个纹理是实时相机预览 SurfaceTexture，它本身就可以正常工作（质量很差，但这是另一回事 :)

第二个 tetxure 只是一个位图图像，它自己也可以正常工作。

对于我使用的两种纹理：

```
GLES20.glActiveTexture(GLES20.GL_TEXTUREX); //GL_TEXTURE0 and GL_TEXTURE1 respectively
GLES20.glBindTexture(GL_TEXTURE_EXTERNAL_OES, mTextureX);
GLES20.glTexParameteri(GL_TEXTURE_EXTERNAL_OES, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR );
GLES20.glTexParameteri(GL_TEXTURE_EXTERNAL_OES, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST );
GLES20.glTexParameteri(GL_TEXTURE_EXTERNAL_OES, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE);
GLES20.glTexParameteri(GL_TEXTURE_EXTERNAL_OES, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE); 
```

在 onSurfaceCreated 中。

在我的 OnDrawFrame 我有：

```
mTriangleVertices.position(TRIANGLE_VERTICES_DATA_POS_OFFSET);
GLES20.glEnableVertexAttribArray(maPositionHandle);
checkGlError("glEnableVertexAttribArray maPositionHandle");
GLES20.glVertexAttribPointer(maPositionHandle, 3, GLES20.GL_FLOAT, false,
            TRIANGLE_VERTICES_DATA_STRIDE_BYTES, mTriangleVertices);
checkGlError("glVertexAttribPointer maPosition");

mTriangleVertices.position(TRIANGLE_VERTICES_DATA_UV_OFFSET);
GLES20.glEnableVertexAttribArray(maTextureHandle);
checkGlError("glEnableVertexAttribArray maTextureHandle");
GLES20.glVertexAttribPointer(maTextureHandle, 3, GLES20.GL_FLOAT, false,
            TRIANGLE_VERTICES_DATA_STRIDE_BYTES, mTriangleVertices);
checkGlError("glVertexAttribPointer maTextureHandle");

Matrix.multiplyMM(mMVPMatrix, 0, mVMatrix, 0, mMMatrix, 0);  
Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mMVPMatrix, 0);

GLES20.glUniformMatrix4fv(muMVPMatrixHandle, 1, false, mMVPMatrix, 0);
GLES20.glUniformMatrix4fv(muSTMatrixHandle, 1, false, mSTMatrix, 0);
GLES20.glUniform1f(muCRatioHandle, mCameraRatio);

GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);
checkGlError("glDrawArrays"); 
```

我的着色器是：

```
private final String mVertexShader =
    "uniform mat4 uMVPMatrix;\n" +
    "uniform mat4 uSTMatrix;\n" +
    "uniform float uCRatio;\n" +
    "attribute vec4 aPosition;\n" +
    "attribute vec4 aTextureCoord;\n" +
    "varying vec2 vTextureCoord;\n" +
    "varying vec2 vTextureNormCoord;\n" + 
    "void main() {\n" +
    "  gl_Position = uMVPMatrix * aPosition;\n" +
    "  vTextureCoord = (uSTMatrix * aTextureCoord).xy;\n" +
    "  vTextureNormCoord = aTextureCoord.xy;\n" +
    "}\n"; 
```

和

```
 private final String mFragmentShader =    
        "#extension GL_OES_EGL_image_external : require\n" +     
        "precision mediump float;\n" +  
        "varying vec2 vTextureCoord;\n" +
        "varying vec2 vTextureNormCoord;\n" +
        "uniform samplerExternalOES sTexture;\n" +
        "uniform samplerExternalOES sTexture1;\n" +
        "void main() {\n" +
        "  vec4 temp_FragColor1 = texture2D(sTexture, vTextureCoord);\n" +
        "  vec4 temp_FragColor2= texture2D(sTexture1, vTextureCoord);\n" +
        "gl_FragColor = temp_FragColor1;\n" +
        "}\n"; 
```

我想做的事情的想法是在片段着色器中

```
gl_FragColor = temp_FragColor1 + temp_FragColor2; 
```

使用相机实时预览顶部的位图纹理（位图纹理与相机纹理混合）。因此，如果位图纹理片段的 alpha 小于 1，则应该显示相机纹理的片段。当我尝试这个时，我收到了致命信号 11。

任何提示、链接甚至代码片段都将不胜感激！

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T13:23:28.793

您如何使用来自位图的数据加载外部纹理？我建议使用 2D 纹理代替叠加。然后，为了将图像加载到纹理中，您可以使用：

```
Bitmap bitmap1 = null;
InputStream stream = null;
try {
   stream = new FileInputStream("/mnt/sdcard/...jpg");
} catch (FileNotFoundException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
}
bitmap1 = BitmapFactory.decodeStream(stream);
GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap1, 0);
bitmap1.recycle(); 
```

对于在片段着色器中混合纹理数据：

```
"gl_FragColor = mix(base, blend, blend.a);  \n"; 
```

其中 base 是来自相机纹理的数据， blend 是来自位图纹理的数据。

# c - 为什么 fprintf 在线程中不起作用？

> ID：15932804
> 
> 赞同：3
> 
> 时间：2013-04-10T17:45:22.420
> 
> 标签：c, multithreading, io, pthreads, stdout

我正在创建一个线程`pthread_create`。

在我使用的线程函数内部

```
fprintf(stdout, "text\n"); 
```

但这不会向控制台输出任何内容。同样的问题是`printf`。我也尝试过刷新标准输出缓冲区但没有成功。所以问题是如何从线程打印任何东西到控制台？

升级版：

```
void *listen_t(void *arg){
  fprintf(stdout, "test\n");
  fflush(stdout);
}

int main(int argc, char **argv){
  pthread_t tid;
  int err;

  err = pthread_create(&tid, NULL, &listen_t, &thread_params);
  if (err != 0){
    printf("\ncan't create thread :[%s]", strerror(err));
  }
  else{
    printf("\n Thread created successfully\n");
  }
  return 0;
} 
```

main 中的代码工作正常。但是线程不输出任何东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:51:45.890

您错过了`pthread_join`: 如果主程序在`printf`' 的输出到达控制台之前退出，您将看不到任何打印内容。

添加`pthread_join(tid, NULL);`到您的示例可修复输出：

```
#include <pthread.h>
#include <stdio.h>

void *listen_t(void *arg){
  fprintf(stdout, "test\n");
  fflush(stdout);
}

int main(int argc, char **argv){
  pthread_t tid;
  int err;

  err = pthread_create(&tid, NULL, &listen_t, NULL);
  if (err != 0){
    printf("\ncan't create thread :[%d]", strerror(err));
  }
  else{
    printf("\n Thread created successfully\n");
  }
  pthread_join(tid, NULL);
  return 0;
} 
```

# batch-file - 如何批量转义for循环中的字符？

> ID：15932808
> 
> 赞同：-1
> 
> 时间：2013-04-10T17:45:53.187
> 
> 标签：batch-file, escaping

我目前正在编写一个可自定义的 .java 文件的批处理文件。对于每条正常线，我都可以执行以下操作

```
echo String[] exampleString = new String[anyNumber]; >> AnyFileName.java 
```

现在我遇到了一个问题 - 每当我想将带有 java-for-loop 的行写入文件时

```
echo for (int i=0; i<anyNumber; i++) >> AnyFileName.java 
```

它只是给了我一个错误，如下所示：

> 系统找不到指定的文件。

（这不是实际的错误消息，但我没有英文系统，所以我没有收到英文错误消息，但这基本上就是它所说的）。

有没有办法完全转义`echo`语句中的特殊字符，所以它被写入文件并且不尝试作为批处理操作执行？正常的`^`似乎不像我尝试的那样工作。

编辑：转义括号而不是单词`for`工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:48:08.120

您必须转义特殊字符。至少，`^`在每个`>`and之前放一个`<`。如果您的`echo`语句存在于代码块、`for`或`if`语句中，您还必须转义括号。在某些情况下，您甚至可能不得不逃离该`=`标志。

```
>> AnyFileName.java echo for ^(int i^=0; i^<anyNumber; i++^) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:57:02.863

尝试这个

```
// loop code here
If (Condition = whatever)
break
//end loop 
```

# android - 有没有办法让你的安卓应用听主屏幕启动器双击？

> ID：15932809
> 
> 赞同：3
> 
> 时间：2013-04-10T17:45:53.690
> 
> 标签：android, android-intent

我希望我的应用程序在后台运行或有一个广播接收器来监听主屏幕启动器上的双击。现在双击主屏幕启动器什么都不做，但如果我的应用程序在后台以 onPause 运行，我希望能够在用户双击主屏幕时启动它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:11:36.760

我不认为这是可能的。您的活动必须在前台才能获得触摸事件。获取信息并在应用程序关闭时启动应用程序的唯一方法是使用广播接收器......并且触摸事件没有广播。也许您可以使用服务来处理您的问题.. 看看这里： [创建系统覆盖窗口（始终在顶部）](https://stackoverflow.com/questions/4481226/creating-a-system-overlay-always-on-top-button-in-android)

# sql - 如何从 SQL Server 表中选择唯一行集

> ID：15932811
> 
> 赞同：0
> 
> 时间：2013-04-10T17:45:54.780
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一张看起来像这样的桌子

```
StudentId  Subject   Section
1           2          AM
1           3          AM
1           1          AM

2           2          AM
2           3          AM
2           1          AM

3           4          AM
3           2          PM
3           3          PM

4           2          PM
4           3          PM 
```

我想从此表中获取唯一的行集来安排教室。具有完全相同科目和部门的学生可以去同一个教室。因此，根据上面的示例数据，学生 1 和 2 将去同一个教室，但学生 3 和 4 不会去，因为他们有不同的科目和/或部分。

学生 3 和 4 也不能去同一个班级，尽管学生 4 的学科/部分组合是学生 3 的子集（但不完全相同）。

换句话说，为了在同一个教室里，学生必须拥有完全相同的科目、相同数量的科目和相同的部分。上述示例数据的输出应如下所示。

```
ClassId   Subject   Section
1           2        AM
1           3        AM
1           1        AM

2           4        AM
2           2        PM
2           3        PM

3           2        PM
3           3        PM 
```

我正在处理的表有 1000 万行，但只有 200 个唯一行集。select 语句可以忽略 StudentId，并可以将其替换为动态生成的 ClassId。然后我可以使用这个 select 语句将唯一的行集插入到类表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:12:33.207

所以我拿了你的表，写了下面的动态查询来生成一个教室列表。这将为您提供作为第二个表的确切输出。

```
declare @subjects varchar(max)
set nocount on
select
    @subjects = coalesce(@subjects,'') + 
          quotename(cast(subject as varchar(25))) + ','
from
    [student]
group by
    Subject

set @subjects = substring(@subjects,0,len(@subjects))
declare @dyn_sql varchar(max)

set @dyn_sql = 
'
select
    class_room,
    subject,
    section
from
    (
select
    row_number() over (order by '+@subjects+') as class_room,
    '+@subjects+',
    count(distinct studentid) as total_students
from
    (
    SELECT 
        studentId,
        cast(subject as varchar(25)) as subject,
        section
    FROM [student]
    ) as d1
pivot (max(section) for subject in ('+@subjects+')) as d2
group by
'+@subjects + '
) as d1
unpivot(section for subject in  ('+@subjects+')) as d2
'

exec (@dyn_sql)
print (@dyn_sql) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:16:27.190

这具有填充类表和studentID和classID之间的连接表的查询......

（注意：首先运行注释掉的逻辑来填充临时表）

```
/*
Create  Table testData (StudentID Int, [Subject] Int, Section Varchar(2))

Insert  testData
Select  1,2,'AM'
Union   All
Select  1,3,'AM'
Union   All
Select  1,1,'AM'
Union   All
Select  2,2,'AM'
Union   All
Select  2,3,'AM'
Union   All
Select  2,1,'AM'
Union   All
Select  3,4,'AM'
Union   All
Select  3,2,'PM'
Union   All
Select  3,3,'PM'
Union   All
Select  4,2,'PM'
Union   All
Select  4,3,'PM';
*/

--      Get class info
If      Object_ID('tempdb..#classes') Is Not Null Drop Table #classes;

With    studentClasses As
(
        Select  t.StudentID,
                Replace((   Select Convert(Varchar(10),[Subject])+'_'+Section As 'data()'
                            From    #testData t2
                            Where   t.studentID = t2.studentID
                            Order   By Section,[Subject]
                            For     Xml Path('X')), ' ', ',') As classes
        From    #testData t
        Group   By t.studentID
),      classIDs As
(
        Select  Row_Number() Over (Order By classes) As classID,
                Convert(XML,classes) As classes
        From   (Select  Distinct classes
                From    studentClasses) sc
),      breakOutClasses As
(
        Select  Row_Number() Over (Partition By cID,classID Order By classID) As nID,
                n.cID,
                n.classID,
                t.split
        From   (Select  Row_Number() Over (Partition By classID Order By classID) As cID,
                        classID,
                        Convert(Xml,'<X>'+Replace(t2.split,'_','</X><X>')+'</X>') As firstBreak
                From    classIDs c
                Cross   Apply  (Select  colData.D.value('.','Varchar(50)') As split
                                From    c.classes.nodes('X') As colData(D)) t2) n
        Cross   Apply  (Select  colData.D.value('.','Varchar(50)') As split
                        From    n.firstBreak.nodes('X') As colData(D)) As t                 
)
Select  b1.classID, b1.split As [Subject], b2.split As Section Into #classes
From    breakOutClasses b1
Join    breakOutClasses b2
        On  b1.classID = b2.classID
        And b1.cID = b2.cID
        And b1.nID = 1
        And b2.nID = 2
Order   By classID, Section, [Subject];

If      Object_ID('tempdb..#studentClassID') Is Not Null Drop Table #studentClassID;

With    students As
(
        Select  t.StudentID,
                Replace((   Select Convert(Varchar(10),[Subject])+'_'+Section As 'data()'
                            From    #testData t2
                            Where   t.studentID = t2.studentID
                            Order   By Section,[Subject]
                            For     Xml Path('')), ' ', ',') As classes
        From    #testData t
        Group   By t.studentID
),      classes As
(
        Select  t.classID,
                Replace((   Select Convert(Varchar(10),[Subject])+'_'+Section As 'data()'
                            From    #classes t2
                            Where   t.classID = t2.classID
                            Order   By Section,[Subject]
                            For     Xml Path('')), ' ', ',') As classes
        From    #classes t
        Group   By t.classID
)
Select  c.classID, s.studentID Into #studentClassID
From    classes c
Join    students s
        On  c.classes = s.classes;

Select  *
From    #classes;

Select  *
From    #studentClassID; 
```

# ruby - 尝试将数组传递给方法时在 ruby 中出现奇怪的错误

> ID：15932813
> 
> 赞同：0
> 
> 时间：2013-04-10T17:46:02.453
> 
> 标签：ruby

以下代码：

```
def array_sum(*n)
  sum = 0
  0.upto(a.length-1) do |i|
    sum += n[i]
  end
  return sum
end

a = (1..5).to_a
puts array_sum(a) 
```

给了我一个模棱两可的错误：

> “/Users/Josh/Documents/Aptana Studio 3 Workspace/Test/Euler7.cgi:10:in `array_sum': undefined local variable or method`a' for main:Object (NameError) from /Users/Josh/Documents/Aptana Studio 3 Workspace/Test/Euler7.cgi: 17"

谁能帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T17:48:08.433

错误没有任何含糊之处。您可能打算写`n.length - 1`而不是`a.length - 1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:55:26.387

虽然 Sergio Tulentsev 的答案是合适的解决方案，但您可能也对该算法的单行实现感兴趣：

```
puts (1..5).reduce(:+) 
```

# java - 获取文件哈希性能/优化

> ID：15932821
> 
> 赞同：4
> 
> 时间：2013-04-10T17:46:49.960
> 
> 标签：java, algorithm, file, hash

我正在尝试尽快获取文件的哈希值。我有一个程序可以散列大量数据（100GB+），其中包含随机文件大小（每个文件从几 KB 到 5GB+），在少数文件到几十万个文件之间的任何地方。

该程序必须支持所有 Java 支持的算法（MD2、MD5、SHA-1、SHA-256、SHA-384、SHA-512）。

目前我使用：

```
/**
 * Gets Hash of file.
 * 
 * @param file String path + filename of file to get hash.
 * @param hashAlgo Hash algorithm to use. <br/>
 *     Supported algorithms are: <br/>
 *     MD2, MD5 <br/>
 *     SHA-1 <br/>
 *     SHA-256, SHA-384, SHA-512
 * @return String value of hash. (Variable length dependent on hash algorithm used)
 * @throws IOException If file is invalid.
 * @throws HashTypeException If no supported or valid hash algorithm was found.
 */
public String getHash(String file, String hashAlgo) throws IOException, HashTypeException {
    StringBuffer hexString = null;
    try {
        MessageDigest md = MessageDigest.getInstance(validateHashType(hashAlgo));
        FileInputStream fis = new FileInputStream(file);

        byte[] dataBytes = new byte[1024];

        int nread = 0;
        while ((nread = fis.read(dataBytes)) != -1) {
            md.update(dataBytes, 0, nread);
        }
        fis.close();
        byte[] mdbytes = md.digest();

        hexString = new StringBuffer();
        for (int i = 0; i < mdbytes.length; i++) {
            hexString.append(Integer.toHexString((0xFF & mdbytes[i])));
        }

        return hexString.toString();

    } catch (NoSuchAlgorithmException | HashTypeException e) {
        throw new HashTypeException("Unsuppored Hash Algorithm.", e);
    }
} 
```

有没有更优化的方法来获取文件哈希？我正在寻找极致的性能，但不确定我是否已经采取了最好的方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:49:41.627

我看到了许多潜在的性能改进。一种是使用`StringBuilder`代替`StringBuffer`；它是源兼容的，但性能更高，因为它是不同步的。第二个（更重要的）是使用`FileChannel`和`java.nio`API 而不是`FileInputStream`- 或至少将其包装`FileInputStream`在 a`BufferedInputStream`中以优化 I/O。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T21:30:44.240

除了欧内斯特的回答：- MessageDigest.getInstance(validateHashType(hashAlgo)) 我认为这可以缓存在线程本地哈希图中， validateHashType(hashAlgo) 作为键。制作 MessageDigest 需要时间，但您可以重用它们：在从 Map 获取实例后在开始时调用 reset() 方法。

请参阅 java.lang.ThreadLocal 的 javadoc

# silverlight - Silverlight 在 UR12 之后尺寸不正确

> ID：15932828
> 
> 赞同：0
> 
> 时间：2013-04-10T17:47:12.027
> 
> 标签：silverlight, dynamics-crm-2011

我们一直在使用 CRM 2011 UR8，但应客户要求（主要是为了跨浏览器兼容性），我们已经开始更新到 UR12，但我遇到了一个似乎无法解决的问题。我们使用了一些自定义的 Silverlight 网格，它们在更新之前都运行良好，但现在它们都加载得有点过宽，所以网格的右边缘偏离了窗口的边缘。我做了一个简单的矩形来查看问题是否出在我们的代码中，但它像网格一样加载得太宽。此外，调整窗口大小时，网格和矩形都不会调整大小。
这是我的测试矩形的 xaml：

```
<UserControl x:Class="SilverlightApplication1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White" Width="Auto" Height="300">
        <Rectangle Fill="Red" HorizontalAlignment="Stretch" Height="Auto" Stroke="Black" VerticalAlignment="Stretch" Width="Auto"/>

    </Grid>
</UserControl> 
```

我正在使用 64 位 Silverlight 5.1.20125.0 对 CRM 2011 的本地安装进行测试。无论是可见的还是使用 IE 的调试工具时，都不会抛出任何错误。感谢任何解决此问题的帮助，我不知道为什么会发生这种情况。

编辑：我们正在将 UR13 应用于不同的环境，我将在那里对其进行测试，所以也许这会解决它，但我没有寄予厚望，因为我在[列表中没有看到任何关于它的内容已解决的问题](http://support.microsoft.com/default.aspx?kbid=2791312)

编辑 2：我应该补充一点，在 Visual Studio 2012 中调试网格（使用虚拟数据）和矩形时，它们的大小正确并随窗口调整大小。

编辑 3：UR13 没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:03:52.830

好吧，据我所知，问题是由于 UR12 中 CSS 的变化。嵌入式 silverlight 现在忽略边距，并最终加载（边距）像素数太宽。我不完全确定为什么它不再调整大小。但无论如何，我将一些 javascript 技巧放在一起，以在加载时设置网格的宽度，并向窗口添加一个 onResize 事件处理程序，以适当地调整网格的大小。显然这是一个次优的解决方案，但它应该可以完成工作。

# android - android，尝试打开某个活动时应用程序崩溃

> ID：15932830
> 
> 赞同：0
> 
> 时间：2013-04-10T17:47:14.393
> 
> 标签：android, android-activity, crash, screen

我在尝试开发的应用程序上输入一个活动/屏幕时遇到问题。似乎每次我按下按钮打开该活动时，应用程序都会崩溃。这是java文件：

```
public class login extends Activity{

// all kinds of functions //

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    place();

    btn_clr.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            clearForm();
        }
        });

    btn_back.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), MainActivity.class);
            startActivityForResult(myIntent, 0);
            finish();
        }
        });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.login, menu);
    return true;
} 
```

这是 layout.xml 文件：

```
< RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".login.java"
android:orientation="vertical" >

// setting all the buttons and texts //

< /RelativeLayout> 
```

这是 menu.xml 文件

```
< menu xmlns:android="http://schemas.android.com/apk/res/android" >
< item

    android:id="@+id/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never"
    android:title="@string/log_str"/>

< /menu> 
```

这是对活动的调用：

```
 btn_log.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), login.class);
            startActivityForResult(myIntent, 0);
            finish();
        }
        }); 
```

这两天让我很沮丧。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:50:26.693

在这种情况下，理想的做法是尝试通过调试器查找错误。您可以使用的一个技巧是在每个异常上设置一个断点......这样，一旦抛出异常，它就会中断，您将能够在错误点检查错误和堆栈跟踪.

它在这个答案中进行了描述（具有讽刺意味的是，对于我不久前提出的一个问题:)）：[https ://stackoverflow.com/a/6342519/5416](https://stackoverflow.com/a/6342519/5416)

> 在 Eclipse 中，切换到“调试”透视图。在“断点”视图中，您会注意到一个带有 J 和感叹号的小图标（在右上角，靠近视图的“最小化”按钮）。这是添加“异常”断点的触发器。
> 
> 使用此对话框，您可以告诉调试器暂停以及捕获和未捕获的异常。

# c# - c# threading 访问其他线程

> ID：15932834
> 
> 赞同：1
> 
> 时间：2013-04-10T17:47:32.840
> 
> 标签：c#, multithreading, winforms

我有这个错误：跨线程操作无效：“控制'progressBar1'从创建它的线程以外的线程访问。” 我似乎无法弄清楚如何解决它。

```
 private void button1_Click(object sender, EventArgs e)
    {
        this.panel1.Visible = false;
        this.panel2.Visible = true;
        new Thread(ProgressBAR).Start();
    }
    private void ProgressBAR()
    {
        Thread.Sleep(5);
        for (int start = 0; start <= 100; start++)
        {
            this.progressBar1.Value = start;
            Thread.Sleep(5);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:50:23.243

试试这个：

```
private void button1_Click(object sender, EventArgs e)
{
    this.panel1.Visible = false;
    this.panel2.Visible = true;
    new Thread(ProgressBAR).Start();
}

private void ProgressBAR()
{
    Thread.Sleep(5);
    for (int start = 0; start <= 100; start++)
    {
        this.Invoke(new Action(() => this.progressBar1.Value = start));
        Thread.Sleep(5);
    }
} 
```

由于操作系统的限制，您不能从创建它的线程以外的任何线程访问 UI 元素。调用[`Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)将同步调用调用以更新`ProgressBar`主线程上的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:51:21.273

您需要使用进度条的`Invoke`方法在控件的主线程上执行赋值：

```
this.progressBar1.Invoke((Action) () => this.progressBar1.Value = start, null); 
```

You only have to do this when `progressBar1.InvokeRequired` is true. Consider using [this extension class](https://github.com/cadenza/cadenza/blob/master/src/Cadenza.Core/Cadenza.ComponentModel/SynchronizeInvokeCoda.cs) (shameless self-promotion, sorry about that). Then you can forget whether or not you are on the right thread:

```
this.progressBar1.AutoInvoke(() => this.ProgressBar1.Value = start); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T17:50:42.530

您必须在拥有控件的基础窗口句柄的线程上执行指定的委托。

有关详细信息，请参阅 [Control.Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)

试试这个：

```
private void button1_Click(object sender, EventArgs e)
{
   this.panel1.Visible = false;
   this.panel2.Visible = true;
   new Thread(ProgressBAR).Start();
}

private void ProgressBAR()
{
   Thread.Sleep(5);
   for (int start = 0; start <= 100; start++)
   {
      this.Invoke(new Action(() => this.progressBar1.Value = start));
      Thread.Sleep(5);
   }
} 
```

# c++ - 以二进制形式打开文件

> ID：15932836
> 
> 赞同：1
> 
> 时间：2013-04-10T17:47:50.617
> 
> 标签：c++, byte, file-handling

我正在尝试使用 C++ 打开文件。该文件可以是任何类型。我想做的事情是打开文件，因为它存储在内存中。

假设它是一个 1 字节的文本文件并以 10000011 的形式存储在内存中，那么我想使用 C++ 以这种格式打开文件，就像它在计算机中的存储方式一样。

怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:00:26.027

您可以通过调用 fopen 函数以二进制格式打开文件，例如：

```
FILE* f = fopen(filename, "rb"); 
```

现在您不能逐位读取文件，但您必须至少逐字节读取它（因为字节是您应该使用的最小单位），例如：

```
unsigned char value;
fread(&value, 1, 1, sizeof(unsigned char)); 
```

将读取文件的单个字节。然后，您可以通过二进制和操作 (&) 访问单个位，将此值打印为二进制（例如 0 和 1）可以这样完成：

```
 printf("%d%d%d%d%d%d%d%d\n", 
           value & 0x80 ? 1 : 0, 
           value & 0x40 ? 1 : 0, 
           value & 0x20 ? 1 : 0, 
           value & 0x10 ? 1 : 0, 
           value & 0x8 ? 1 : 0, 
           value & 0x4 ? 1 : 0, 
           value & 0x2 ? 1 : 0, 
           value & 0x1 ? 1 : 0); 
```

当然这些是 C 标准函数，你也可以使用 C++ 函数，用于开放使用：

```
 ifstream file (filename, ios::in|ios::binary); 
```

对于阅读，您可以使用：

```
 file.read(valueAddress, sizeInBytes); 
```

你应该知道如何打印这些东西（使用 cout）。

# vb.net - vb.net 复制文件到所有子文件夹

> ID：15932842
> 
> 赞同：0
> 
> 时间：2013-04-10T17:47:58.117
> 
> 标签：vb.net

我有一个名为用户的文件夹。此文件夹 a 根目录下的 3 个子文件夹：A、B 和 C。我如何使用 vb.net 将文件复制到所有这些子文件夹的根目录中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:12:15.417

看看这个例子

```
Dim fi As New FileInfo("D:\file1.txt")
Dim dirs As DirectoryInfo() = New DirectoryInfo("D:\Root").GetDirectories()

For Each d As DirectoryInfo In dirs
    fi.CopyTo(d.FullName, True)
Next 
```

希望能帮助到你。

# mysql - mysql 查询中的 NULL 值——版本很重要吗？

> ID：15932847
> 
> 赞同：0
> 
> 时间：2013-04-10T17:48:34.707
> 
> 标签：mysql, null

我正在对 mysql 数据库进行查询。

有一个名为用于标记远程数据`source`的默认值的列。`NULL`

在我的开发服务器上，我使用了类似的查询`DELETE FROM mytable WHERE source`——这很好用，并删除了所有带有 in 值的行`source`。

在实时服务器上，此查询无法删除任何行。我假设我需要使用`DELETE FROM mytable WHERE source IS NOT NULL`.

`NULL`但是，mysql 处理值的方式会有所不同，这似乎很奇怪。这种行为是否因 mysql 版本而异？或者我是否需要在实时服务器上查找此查询失败的其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:52:54.220

你为什么要写带有潜在歧义条件的语句？
我建议您始终在 MySQL 查询中编写完整的条件：

```
DELETE FROM mytable WHERE source IS NULL;
DELETE FROM mytable WHERE source=0; /* and so on */ 
```

它使代码更易于理解，并且您出错的可能性更小。
我建议在用其他语言编写代码时做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:26:15.740

```
DELETE FROM mytable WHERE source 
```

和

```
DELETE FROM mytable WHERE source is not null 
```

由于 MySQL 的表达式处理中断，这是两个完全不同的事情。

如果`source`是数字列（整数、小数、..），第一个将删除所有`source`大于零的行。

有关示例，请参见此处：[http ://sqlfiddle.com/#!2/87325/1](http://sqlfiddle.com/#!2/87325/1)

如果`source`是一个字符值，MySQL 将尝试将内容转换为一个数字，如果有效，如果该数字大于零，则该行将被删除。

见这里的例子：[http ://sqlfiddle.com/#!2/5ebad/1](http://sqlfiddle.com/#!2/5ebad/1)

（基本上损坏的）第一个查询在一个数据库上工作而不在另一个数据库上工作的原因可能与列中的值有关。

# puppet - 如何根据节点名称发送不同的木偶类？

> ID：15932851
> 
> 赞同：0
> 
> 时间：2013-04-10T17:48:45.933
> 
> 标签：puppet

我希望这个问题不是太基本，但似乎互联网上没有明确的答案。

我正在尝试根据完全限定的域名将特定模块发送到节点。

我不想复制和粘贴默认值，但如果有一种方法可以使用 puppet 执行案例或基于节点的 if 语句，我会很高兴。

例如：如果节点名称为 foo，则包含模块 bar，但继续解析默认类而不中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:12:37.107

```
node 'foo' inherits default { 
    include bar
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T22:22:47.790

[根据Puppetlabs 文档](http://docs.puppetlabs.com/hiera/1/complete_example.html)`FQDN`中的`Assigning a Class to a Node With Hiera`示例，为节点使用特定模块的一种好方法。

# vb.net - VB.Net多线程文件下载

> ID：15932853
> 
> 赞同：2
> 
> 时间：2013-04-10T17:48:49.197
> 
> 标签：vb.net, multithreading, httpwebrequest

我有一个用 VB.Net 编写的 winform 应用程序，它需要下载包含 PubMed（医学期刊）文章数据的 XML 文件。我一次请求 500 篇文章的数据，因为我需要对其进行流式传输，并且我想避免加载超出可用内存的文件。在返回的文件中，每篇文章的数据都包含在`<PubmedArticle>`元素中：

```
<PubmedArticleSet>
    <PubmedArticle>
    ... (Article Data) ...
    </PubmedArticle>
    <PubmedArticle>
    ... (Article Data) ...
    </PubmedArticle>
</PubmedArticleSet> 
```

我的代码看起来像这样（实际代码在每次迭代 500 个 Pubmed ID 的循环中执行下面的代码）：

```
Dim pubmedIDs As String() = {"20816578", "20815951"}
Dim xmlUrl As String = String.Format("{0}{1}{2}", "http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=", String.Join(",", pubmedIDs), "&retmode=xml&rettype=abstract")
Dim request as HttpWebRequest = DirectCast(WebRequest.Create(xmlUrl), HttpWebRequest)
Try
    Using response As WebResponse = request.GetResponse()
        Using responseStream As Stream = response.GetResponseStream()
            Dim xDoc As XDocument = XDocument.Load(responseStream)
            'Break up the requested file into one file per article and save them to a cache directory
            'Update a progress bar as files are cached
        End Using
    End Using
Catch ex As WebException
    'Handle HTTP errors by capturing Pubmed IDs of failed request to allow user to retry later
    'Update progress bar despite failed request to let user know when the process is finished
End Try 
```

这一切都很好，但是在典型的运行中，我需要收集 20K+ 文件的文章数据，这大约需要 10 分钟。有人可以就如何对请求进行多线程处理给我建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:22:05.380

一个可能是多线程的明智方法的一个想法是将“网络读取”与“磁盘写入”分开。多线程磁盘写入可能*不会*带来性能优势（高速网络存储可能例外），但网络请求*可能会*受益。所以，不要多线程你的整个块，有这样的东西：

*   `Queue`为传入`XmlDocument`对象创建一个
*   `Queue`运行一个（或多个）线程来处理服务请求并在响应到达时将对象推送到
*   运行一个单独的线程来监控`Queue`并将每个项目写入磁盘

这样，无论哪一方是瓶颈，整个过程都会运行到更接近最佳速度。然后，您可以在一侧或两侧试验多个线程，`Queue`看看并行请求/并行磁盘 IO 是否会有所帮助。

值得记住的是，您必须确保`Queue`对.`Queue.Synchronized``Queue`

# powershell - Powershell：如何过滤掉特定的文本？

> ID：15932854
> 
> 赞同：1
> 
> 时间：2013-04-10T17:48:53.780
> 
> 标签：powershell

我需要将 Windows 安全事件日志导出到 CSV 文件，以便快速审核已删除的文件。我只需要 CSV 文件中的特定信息行，特别是在“消息”字段中。我的命令如下：

```
Get-EventLog "Security" -before 4/10/2013 -InstanceId 4663 | select-object Index,TimeGenerated,Message | export-csv c:\export.csv 
```

输出如下所示：

```
Index         : 244336
TimeGenerated : 4/9/2013 6:06:33 PM
Message       : An attempt was made to access an object.

            Subject:
                Security ID:        S-0-0-00-0000000-0000000-000000
            37-1111
                Account Name:        joeblow
                Account Domain:        contoso
                Logon ID:        0x888210

            Object:
                Object Server:    Security
                Object Type:    File
                Object Name:    C:\files\Important_doc.xls

                Handle ID:    0x2178

            Process Information:
                Process ID:    0x4
                Process Name:    

            Access Request Information:
                Accesses:    %%1537

                Access Mask:    0x10000 
```

我只需要索引、TimeGenerated、Message->accountname、Message->object->objectname 和 Message->object 类型。如何过滤掉它，使它看起来像下面的东西，或者在 CSV 中足够干净以便在 Excel 中查看？

```
Index         : 244336
TimeGenerated : 4/9/2013 6:06:33 PM
Account name  : joeblow
Object type   : File
Object Name   : c:\files\Important_doc.xls 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:04:43.653

我现在没有实验室来测试该条目，但试试这个：

```
Get-EventLog "Security" -before 4/10/2013 -InstanceId 4663 | % {
    New-Object psobject -Property @{
        Index = $_.Index
        TimeGenerated = $_.TimeGenerated
        "Account Name" = $_.ReplacementStrings[1]
        "Object Type" = $_.ReplacementStrings[5]
        "Object Name" = $_.ReplacementStrings[6]
    }
} | export-csv c:\export.csv -NoTypeInformation 
```

在`EventLogEntry`-object 中，有一个属性`ReplacementStrings`通常包含消息中使用的所有变量，按照它们在文本中的显示顺序。该消息中的第一个变量是“安全 ID”，因此很可能存储在其中，`$_.ReplacementStrings[0]`因为数组从零开始。所以只要数数你的方式。

# ios - 设备有时会崩溃 - 用子视图覆盖 UINavigationController 视图

> ID：15932860
> 
> 赞同：0
> 
> 时间：2013-04-10T17:49:15.000
> 
> 标签：ios, autolayout

所以这就是我正在做的。我需要拉起的模态卡片视图来覆盖导航栏。

![覆盖](https://i.stack.imgur.com/cmHGM.png)

为此，我将叠加层和卡片视图添加到导航控制器视图：

```
[self.navigationController.view addSubview:_answerDetailOverlay];
[self.navigationController.view bringSubviewToFront:_answerDetailOverlay]; 
```

这在大多数情况下都很有效。事实上，它从未使模拟器崩溃。不过，在设备上，我偶尔会崩溃。我要么得到一个 EXC_BAD_ACCESS`-[NSLayoutConstraint _engineToContainerScalingCoefficients] + 48`要么`Unable to parse constraint format: Unable to interpret '|' character, because the related view doesn't have a superview |-[_answerDetailView]-| ^`。

不确定是否有更好的方法来做到这一点。也许改为添加到窗口？

# php - using one array to filter another array

> ID：15932862
> 
> 赞同：2
> 
> 时间：2013-04-10T17:49:21.813
> 
> 标签：php, arrays

I was just wondering if php had built in functions to filter an array based on the key of another array?

array 1 - is a list of all users and their basic info

array 2 - contains a meeting schedule with the users id's

e.g.

```
array 1 [0]([user_id], [name], [age], [contact]), 
        [1]([user_id], [name], [age], [contact])
        etc.

array 2 [0]([user_id], [time], [date], [place])
        [1]([user_id], [time], [date], [place]) 
```

Is there a way to filter array 1 so that it only contains the rows that correspond to the [user_id] in array 2.

I understand that I could use loops and custom functions to achieve this however, I just wanted to see if there was a simple way.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:56:35.337

```
array_intersect_key($array1, $array2) 
```

[PHP Manual](http://www.php.net/manual/en/function.array-intersect-key.php)

code:

```
$array1 = array('user1'=> array('name'=>'name1','age' => 'age1'),
                'user2'=> array('name'=>'name2','age' => 'age2'),
                'user3'=> array('name'=>'name3','age' => 'age3'));

//array with key to search for
$array2 = array('user2'=> array('time'=>'time2','date' => 'date2'));     
echo '<pre>';
print_r(array_intersect_key($array1,$array2));
echo '</pre>';

o/p:

    Array
(
    [user2] => Array
        (
            [name] => name2
            [age] => age2
        )

) 
```

edit:

Ah got your problem. If you want to manipulate your given array as per the above structure and then apply array_intersect_key(), you can do this:

```
function compare($key1,$key2){
    global $array1,$array2;

    if($array1[$key1]['userid'] == $array2[$key2]['userid'])
        return 0;
    if($array1[$key1]['userid'] > $array2[$key2]['userid'])
        return 1;
    else
        return -1;
}

$array1 = array(array('userid'=>'user1','name'=>'name1','age' => 'age1'),
                array('userid'=>'user2','name'=>'name2','age' => 'age2'),
                array('userid'=>'user3','name'=>'name3','age' => 'age3'));

//array with key to search for
$array2 = array(array('userid'=>'user2','time'=>'time2','date' => 'date2'));     

echo '<pre>';
print_r(array_intersect_ukey($array1,$array2,'compare'));
echo '</pre>';

o/p:
====
Array
(
    [1] => Array
        (
            [userid] => user2
            [name] => name2
            [age] => age2
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:53:40.883

I've decided it's much easier to just use 2 loops.

The first one to create an array of the [user_id]'s and the second one to use in_array like, so:

```
$user_id = array();
foreach($users as $id){
    $user_id[]= $id['user_id'];
}
$names = array();
foreach ($schedule as $name){
    if(in_array($name['id'], $user_id)) $names[] = $name;
} 
```

Too simple to bother looking for a php function.

# cuda - CUDA - 在远程计算机上运行 NVVP，在没有启用 CUDA 的设备的本地计算机上显示结果

> ID：15932864
> 
> 赞同：4
> 
> 时间：2013-04-10T17:49:30.753
> 
> 标签：cuda, terminal, profiling, remote-server

至少我们中的一些人在远程服务器上开发我们的 CUDA 代码。它们通常仅通过 SSH 连接提供访问。可以在远程计算机上使用这样的命令分析 CUDA 应用程序（或内核）

```
nvprof -o profile.out -s ./prog args 
```

然后将“profile.out”下载到本地计算机。

我的问题是，是否可以在没有启用 CUDA 的设备的计算机上使用可视化分析器打开此文件？是否有任何其他工具可以打开此类文件并提供与 Visual Profiler 相似或更丰富的信息。

我确实收到这样的错误“无法找到 CUDA 库并与 CUDA 驱动程序建立连接。确保 CUDA 和 CUDA 运行时库位于您的库路径上。有关更多信息，请参阅安装指南。Visual Profiler 将立即退出”。

一些参考资料：

*   [打开时计算 Visual Profiler 出错](https://stackoverflow.com/questions/7645811/compute-visual-profiler-giving-error-when-opening)

*   [远程 CUDA 分析？](https://stackoverflow.com/questions/5902253/remote-cuda-profiling)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T20:22:14.363

NVIDIA Visual Profiler 无法在没有 NVIDIA GPU 的系统上运行。我们将考虑在未来的 CUDA Toolkit 版本之一中引入远程分析器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-26T17:20:01.613

使用 CUDA 5.5 附带的 nvvp 版本，我能够让 nvvp 在未配备 CUDA 的机器上运行以打开 nvprof 生成的配置文件。

这是在 Fedora 20 下。为了让它工作，我做了以下工作：

1.  [从https://developer.nvidia.com/cuda-downloads](https://developer.nvidia.com/cuda-downloads)下载 CUDA 5.5 的 RUN 版本
2.  安装工具包：

    ```
    sh cuda_5.5.22_linux_64.run -overide -toolkit -toolkitpath=$HOME/usr/cuda 
    ```

3.  提取驱动程序安装程序：

    ```
    sh cuda_5.5.22_linux_64.run -extract=/tmp 
    ```

4.  从驱动程序安装程序中提取驱动程序文件：

    ```
    cd /tmp
    sh ./NVIDIA-Linux-x86_64-319.37.run -a -x 
    ```

5.  将驱动程序库链接到 nvvp 将找到的名称：

    ```
    cd NVIDIA-Linux-x86_64-319.37
    for i in *.so.319.37; do ln -s $i ${i/.319.37/.1}; done 
    ```

6.  设置 LD_LIBRARY_PATH 以便 nvvp 将在解压后的目录中搜索库：

    ```
    export LD_LIBRARY_PATH=/tmp/NVIDIA-Linux-x86_64-319.37 
    ```

7.  运行 nvvp 并导入 nvprof 文件。

NVVP 将显示配置文件，它看起来很合理，但 YMMV 和我对其正确性不做任何声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-01T15:08:40.393

在我的大学里，我们编译代码并通过 MobaXterm 使用 SSH 从服务器上运行 nvvp。因此，即使我的笔记本电脑没有 NVidia 显卡，我也可以使用 nvvp。

# c# - 智能感知没有帮助

> ID：15932865
> 
> 赞同：-1
> 
> 时间：2013-04-10T17:49:33.070
> 
> 标签：c#, winforms, visual-studio-2012, intellisense

我正在为 Windows 应用程序编写一些代码，除了 IntelliSense 没有在某些单击事件范围内为我提供选项外，一切都很顺利。令人惊讶的是，当我在没有它的帮助的情况下对其进行编码时，它并没有在该代码行上给我任何红色波浪，所以我假设范围是好的。

我有两个表单，`FormA`并且`FormB`，一个按钮单击事件`FormA`应该触发`FormB`它的文本框，其中填充了它在运行附加的逻辑后收到的信息。我正在做的是

```
formSrchResult.txtSearchFirstName.Text = searchedInfo.FirstName;
formSrchResult.txtSearchLastName.Text = searchedInfo.LastName;
formSrchResult.txtSearchUsername.Text = searchedInfo.UserName;
formSrchResult.txtSearchEmail.Text = searchedInfo.Email; 
```

`formSearchResult`是 a 的对象，`FormSearch(FormB)`并且`searchedInfo`是具有存储数据的属性的类的对象，我希望在其中`FormSearch`显示文本框。`FormSearch`和都`searchedInfo`被宣布为公开的，但是当我开始输入时

> “formSrchResult。” + "ctrl + 空格"

IntelliSense 没有提供包含文本框和属性名称的列表。所以，我想知道是否有人对可能导致这种情况的原因有任何想法，我很想知道。顺便说一句，它的 Visual Studio 2012。

谢谢。

```
public class UserInfo
{
    public int UserID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
    public string UserName { get; set; }
} 
```

那是存储搜索信息的类，下面是搜索方法的代码......

```
public UserInfo Search(string email)
{
    UserInfo searchUserInfo = new UserInfo();

    try
    {
        conn.Open();
        SqlCommand cmd = new SqlCommand("spListEverything", conn);
        cmd.CommandText = "spListEverything";
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@Email", email);

        SqlDataReader rdrSearch = cmd.ExecuteReader();

        if (rdrSearch.Read())
        {
            //why do we need to convert the first name, last name etc to ToString
            //when they are defined, in the database, as a string itself?
            searchUserInfo.UserID = Convert.ToInt32(rdrSearch["UserID"]);
            searchUserInfo.FirstName = rdrSearch["FirstName"].ToString();
            searchUserInfo.LastName = rdrSearch["LastName"].ToString();
            searchUserInfo.UserName = rdrSearch["UserName"].ToString();
            searchUserInfo.Email = rdrSearch["Email"].ToString();
        }
        else 
        {
            // "Sorry, no match found";
        }

        }
    catch (Exception ex)
    {
    }
    finally
    {
       conn.Close();
    }
    return searchUserInfo;
} 
```

下面是我对 Intellisense 没有帮助的 btnClick 事件的编码

```
private void btnSearch_Click(object sender, EventArgs e)
{
    string email = txtSearchEmail.Text.ToString();

    Manage myManage = new Manage(); //to call the search function
    FormSearchResult formSrchResult = new FormSearchResult();//to put the vlaues in the textboxes in that form

    UserInfo searchedInfo = myManage.Search(email);

    //the search function is not working properly. No value is returned to be stored
    //in the userInfo object

    //Here for some reason my intellisense is not providing options.

    formSrchResult.txtSearchFirstName.Text = searchedInfo.FirstName;
    formSrchResult.txtSearchLastName.Text = searchedInfo.LastName;
    formSrchResult.txtSearchUsername.Text = searchedInfo.UserName;
    formSrchResult.txtSearchEmail.Text = searchedInfo.Email;

    txtSearchFirstName.Enabled = false;
    formSrchResult.ShowDialog();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:08:50.683

Windows 窗体控件不是窗体的静态属性，因此您需要创建一个 formSrchResult 类型的对象，以便能够从另一个类访问它的任何控件。类需要具有要调用的静态方法或属性，而无需直接引用该类型的对象。

像这样的东西：

```
public partial class FormB : Form
{
    private formSrchResult formSR; // this is a private field that is accessible to any method in your FormB class - you must initialize it first before trying to do anything on the object or you will receive a null reference

    private void Search_Click(object sender, EventArgs e)
    {
        SearchResult searchedInfo = DoSearch();
        formSR = new formSrchResult();
        formSR.txtSearchFirstName.Text = searchedInfo.FirstName;
        formSR.txtSearchLastName.Text = searchedInfo.LastName;
        formSR.txtSearchUsername.Text = searchedInfo.UserName;
        formSR.txtSearchEmail.Text = searchedInfo.Email;
        formSR.Show();
    }

    private SearchResult DoSearch()
    { 
        // your code
    }
} 
```

您可能还希望使 FormB 类可以全局访问 formSrchResult 对象，以便将其声明为私有字段。这样，您可以从类中的任何方法访问您的对象。我希望这有帮助。

# http - 防止对存储在缓存中的密码进行自动基本 http 身份验证

> ID：15932866
> 
> 赞同：2
> 
> 时间：2013-04-10T17:49:35.547
> 
> 标签：http, browser-cache, basic-authentication

我正在为使用基本 http 身份验证保护的 RESTful 后端构建一个基于 jquery 的原型 ui，没有会话或会话 ID。现在用户名和密码不断被缓存，如果我不提供用户名和密码，我可以验证自己,我怎样才能防止这种行为？

我看到有人问过类似的问题，但大多数问题已经通过使用客户端验证解决了。还有其他解决方案吗？

有类似的问题，答案是否定的，那么如何处理

# apache - Rhodecode apache 代理作为子目录问题

> ID：15932870
> 
> 赞同：0
> 
> 时间：2013-04-10T17:49:56.147
> 
> 标签：apache, ubuntu, virtual-machine, rhodecode

我在 Windows 服务器上的 vm (vmware) 内运行 Ubuntu 12.04 服务器。我在虚拟机上运行 Rhodecode。我可以通过主机的 IPAddress 从主机访问 RhodeCode，并且端口 RHodecode 正在（102.168.226.128:5000）上运行，但无法从网络上的另一台机器访问它。为了解决这个问题，我尝试使用 apache 代理作为子目录（一位同事建议这样做），但遇到了问题。我将以下代码添加到 production.ini

```
filter-with = proxy-prefix (in [app.main]) 
```

和

```
[filter:proxy-prefix]
use = egg:PasteDeploy#prefix
prefix = /<rhodecode> (at the end of the file) 
```

当我尝试构建数据库（sudo paste setup-rhodecode production.ini）时，我收到以下错误：“main”部分不是应用程序（可能是过滤器）。您应该添加#section_name，其中section_name 是配置您的应用程序的部分

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T18:49:29.273

可能你没有做错任何事，但在你的`production.ini`

```
[filter-app:main]
# instead of filter:proxy-prefix
use = egg:PasteDeploy#prefix
prefix = /scm
next = rh

[app:rh] 
# instead of app:main
use = egg:rhodecode 
```

然后生成你的设置

```
paster setup-rhodecode production.ini#rh 
```

我遇到了与问题中描述的相同的问题，我偶然发现[了 Ian Bicking 的一篇文章](https://groups.google.com/d/msg/paste-users/upkZU25obeI/kWMez3Tl8DkJ)（我为 Rhodecode 配置进行了改编）：

> 您必须使用 setup-app 参考 [app:*] 部分。所以如果你有类似的东西：
> 
> ```
> [filter-app:main]
> use = something
> next = myapp
> 
> [app:myapp]
> blah 
> ```
> 
> 然后你必须做 paste setup-app deploy.ini#myapp

# python - Python：如何显示最低工资名称

> ID：15932876
> 
> 赞同：-1
> 
> 时间：2013-04-10T17:50:14.957
> 
> 标签：python

我想显示最低工资（我已经算出来了）以及与该最低工资相关的名称。打印时看起来像这样： 最低工资是：4500 美元 制作人：John

```
amount = int(input("How many employees?: "))
if amount <= 0:
    print("You cannot have 0 or less.")
name = []
salary = []
length = len(salary)
mini = 200000
maxi = 0
combined = (name, salary)

for i in range(1, amount + 1):
    employee = input("What is the employee's name?: ")
    name += [employee]
    earned = int(input("How much is the salary? It cannot be less than 0 or over $200,000: "))
    while earned <= 0 or earned >= 200000:
        earned = int(input("How much is the salary? It cannot be less than 0 or over $200,000: "))

        mini = earned
        maxi = earned
    salary += [earned]
    if earned < mini:
        mini = earned
    if earned > maxi:
        maxi = earned

average = sum(salary)/len(salary)

print('The Average Salary is: $',average)
print('The Lowest Salary is: $',mini,'Produced by: ',name)
print('The Highest Salary is: $',maxi,'Produced by: ',name) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:03:42.013

或者你可以找到最小值和最大值的索引

```
maxi = salary.index(max(salary))
mini = salary.index(min(salary))

maxsal = salary[maxi]
maxname = name[maxi]

minsal = salary[mini]
minname = name[mini] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:00:01.730

考虑到您有这样的列表：

```
In [153]: names=["foo","bar","spam","eggs"]

In [154]: salary=[100,150,50,170]

#highest salary
In [155]: _,name=max(enumerate(names),key=lambda x:salary[x[0]])

In [156]: name
Out[156]: 'eggs'

#Lowest salary
In [157]: _,name=min(enumerate(names),key=lambda x:salary[x[0]])

In [158]: name
Out[158]: 'spam' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:54:40.233

```
print('The Lowest Salary is: ' + str(mini) + ' Produced by: ' + name) 
```

你也可以这样做：

```
print('The Lowest salary is %d Produced by: %s' % (mini, name)) 
```

# php - jquery固定div滚动，底部边界

> ID：15932877
> 
> 赞同：0
> 
> 时间：2013-04-10T17:50:17.287
> 
> 标签：php, jquery

**运动流畅的固定版本：http: [//jsfiddle.net/66MBH/6/](http://jsfiddle.net/66MBH/6/)**

我一直在到处寻找，但找不到任何可以帮助我的东西，
首先是
Jquery 代码。（不记得我从哪里得到的）

```
 $(document).ready(function () {  
  var top = $('#socialbookmarks2').offset().top - parseFloat($('#socialbookmarks2').css('marginTop').replace(/auto/, 0));
  $(window).scroll(function (event) {
    // what the y position of the scroll is
    var y = $(this).scrollTop();

    if (y >= top) {
      $('#socialbookmarks2').addClass('fixed');
    } else {
      $('#socialbookmarks2').removeClass('fixed');
    }
  });
}); 
```

**快速**; 当容器的 /div 已经到达时，我该如何停止？、底部边界或其他什么？

**解释**；
我在自定义“博客”网站上使用代码，类似于 wordpress 博客，社交书签应该从帖子的顶部到底部跟随每篇博客文章，然后在用户有时重新开始下一篇文章滚动到它，

现在，如果我激活它，它会在第一个书签容器（#socialbookmarks2）上运行，然后一直到页面底部，而不是在帖子末尾停止。
每页有10个帖子。
希望它可以理解..如果您查看**[9gag.com](http://9gag.com)****，如果您看到他们的评分和 twitter/facebook 共享框，**

**我会发现我想要它做的事情。它跟随柱子，然后停在柱子的底部。**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:00:25.423

最终，您的答案是在您的条件中添加另一条语句：

```
if (y >= top && y < bottom) {
  $('#socialbookmarks2').addClass('fixed');
} else {
  $('#socialbookmarks2').removeClass('fixed');
} 
```

现在，什么是底部？顶部 + 元素的高度。由于我不知道那个元素是什么，我只能举一个粗略的例子：

```
<div class="blog-item">
    <div class="social-bookmarks"></div>
    <h1>blog title</h1>
    <p>
        content here
    </p>
</div> 
```

您需要考虑社交书签的父级。此外，听众必须在课堂上而不是在身份上。

```
var bottom = y + $(this).parent().height(); 
```

假设这是每个 $('.social-bookmarks') 评估的循环。

有很多方法可以写出来。我只是指出一种方法来实现您作为理论而不是工作示例的效果。为此，您需要尝试一下，如果需要，我可能会更新。

# powershell - 从 Windows 资源管理器“发送到”菜单调用 powershell 命令

> ID：15932881
> 
> 赞同：3
> 
> 时间：2013-04-10T17:50:22.723
> 
> 标签：powershell, batch-file

我创建了一个 powershell 脚本，它将所选文件复制到预定位置。
我创建了一个批处理文件来从 Windows 资源管理器的“发送到”菜单中调用 Powershell 脚本。
批处理文件将选定的文件名作为参数发送到脚本。文件名可以包含空格。批处理文件代码是

```
powershell "C:\copycommand.ps1 '%1'" 
```

选择多个文件时，我想将所有文件名作为数组发送到PowerShell脚本。
我已经编写了 powershell 脚本来接受数组，但我无法从批处理文件中将文件名作为数组发送。

以下批处理脚本将所有文件名发送到批处理文件，但当文件名包含空格时失败。

```
Powershell "C:\copycommand.ps1" %* 
```

有没有一种方法可以将所有文件名发送到 powershell 脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T19:43:01.727

我的 bat 文件长这样（最后一行是调试用的，可以去掉）：

```
@echo off
for %%x in (%*) do ( 
    powershell.exe  -Command "C:\copycommand.ps1 '%%x'"
)

powershell.exe  -noexit 
```

我的powershell脚本是：

```
$args | %{ Write-host "do copy $_"} 
```

示例输出是：

```
do copy C:\Users\Public\Desktop\SRWare Iron.lnk
do copy C:\Users\Public\Desktop\Mozilla Firefox.lnk
do copy C:\Users\Piotrek\Desktop\Windows 7 USB DVD Download Tool.lnk 
```

**更新后的版本**

将bat文件更改为：

```
@echo off
set myvar=
for %%x in (%*) do call :concat %%x
echo %myvar%
powershell.exe  -Command C:\copycommand.ps1 %myvar%

powershell.exe  -noexit
goto :eof

:concat
set myvar=%myvar% '%1'
goto :eof 
```

# javascript - icheck.js 和 Meteor 应用程序

> ID：15932883
> 
> 赞同：0
> 
> 时间：2013-04-10T17:50:24.513
> 
> 标签：javascript, meteor

我正在尝试将[iCheck](http://damirfoy.com/iCheck/)集成到 Meteor 应用程序上。有人知道如何在 Meteor 应用程序上集成另一个 JS 库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:43:14.947

这就是我所做的。

我将 js 文件 (jquery.icheck.min.js) 添加到 client/lib 以使其首先加载，然后我将 css (skins 文件夹) 放在应用程序根目录的 public/ 文件夹中。

为了加载皮肤（css 文件），我将此行添加到 app.html 的`<head>`

```
 <link href="/skins/minimal/blue.css" rel="stylesheet"> 
```

为了在我的控件上初始化 iCheck，我将此函数放在模板渲染函数上：

```
Template.dataForm.rendered = function(){
  if(!this._rendered) {
    $('input').iCheck({
      checkboxClass: 'icheckbox_minimal-blue',
      radioClass: 'iradio_minimal-blue',
      increaseArea: '20%'
    });
  }; 
```

瞧。

# android - 你如何制作具有相同尺寸的 4 个 2x2 按钮

> ID：15932884
> 
> 赞同：1
> 
> 时间：2013-04-10T17:50:25.233
> 
> 标签：android, button

我想创建一组相互对齐的 2by2 按钮，如下所示：

AB

光盘

无论内容的长度如何，每个都具有相同的宽度和高度。

我尝试将以下设置与嵌套的 LinearLayouts 一起使用，它符合我的要求，但是我收到了一条警告，说嵌套的 layout_weight 对性能有很大的（指数）影响。

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:baselineAligned="false">

    <LinearLayout android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="50"
        android:orientation="vertical">

        <Button
            android:id="@+id/buttonA"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="50"
            android:text="aaa"/>

        <Button
            android:id="@+id/buttonC"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="50"
            android:text="cccccccccccccccccccccccccccc"/>
    </LinearLayout>

    <LinearLayout android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="50"
        android:orientation="vertical">

        <Button
            android:id="@+id/buttonB"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="50"
            android:text="bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb" />

        <Button
            android:id="@+id/buttonD"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="50"
            android:text="ddddddddddddddddddddddddddddddddddddddddddddddddddddddddd"/>
    </LinearLayout>
    </LinearLayout> 
```

我想知道是否有更好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:55:41.247

使用 a`LinearLayout`和 2并在每个 中`TableRows`插入 2 。根据您的需要进行分配。为包括 在内的每个项目分配1 ，您应该一切顺利。`Buttons``TableRow``width``height``weight``TableRows`

**编辑**：好吧，玩了一会儿后，我发现这很好用；-)

这基本上是您自己的布局和我的布局的混合；-)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" >

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="cccccccccccccccccccccccccccc" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Button" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" >

        <Button
            android:id="@+id/button3"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb" />

        <Button
            android:id="@+id/button4"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="ddddddddddddddddddddddddddddddddddddddddddddddddddddddddd" />
    </TableRow>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:56:17.367

我还没有测试过，但你可以`button.getWidth()`用来获取 4 个按钮的宽度。找到 4 个中的最大值，然后将所有按钮设置为该宽度。如果按钮的内容是动态的。

# jquery - ng-view“离开”回调的 $animation 中未定义的“元素”

> ID：15932888
> 
> 赞同：0
> 
> 时间：2013-04-10T17:50:30.087
> 
> 标签：jquery, angularjs

我在 Angular.js 的 google 组上发布了这个，但似乎没有得到关注或帮助。所以我在这里重新发布。

问题：将新的部分 html 加载到 ng-view 时，“enter”回调的元素已定义且正确，但旧的部分 html（应该被新的部分替换）并没有消失，而是新的内容是附加在旧内容下，更不用说任何滑动动画了。我检查了日志，“leave”$animation 的设置和启动函数中的“元素”都显示为未定义，这导致了一些 jquery 错误。

我还尝试了定义类似动画的 css 方式，但没有任何运气 - 没有动画，没有错误。（我在这里看到了演示[http://code.angularjs.org/1.1.4/docs/api/ng.directive:ngView](http://code.angularjs.org/1.1.4/docs/api/ng.directive:ngView)，所以这可能是由于我有一些我仍然无法弄清楚的错误配置)

plunker 在这里：[http ://plnkr.co/edit/wSsjSPN62PyKHJAQtvfv](http://plnkr.co/edit/wSsjSPN62PyKHJAQtvfv)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:35:46.350

您的 plunker 存在一些问题，但我认为它们可能只是设置问题，而不是您的代码。

第一个 - 不包括 jQuery，这会导致元素返回未定义的问题。

其次，您需要设置额外的 CSS 才能看到过渡。

请参阅更新的示例：

[http://plnkr.co/edit/gmA1kVOpX2lk94AWs2pJ?p=preview](http://plnkr.co/edit/gmA1kVOpX2lk94AWs2pJ?p=preview)

```
 <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.4/angular.js"></script> 
```

# asp.net - 是否可以在 ASP.NET IIS7.5 中使用 XMLTextReader 通过相对 URL 读取 XML 文件

> ID：15932892
> 
> 赞同：0
> 
> 时间：2013-04-10T17:50:44.563
> 
> 标签：asp.net, iis-7.5, xmltextwriter

是否可以在 Windows Server 2008R2 上的 IIS7.5 中的 ASP.NET（不是 MVC）中使用相对 URL 从 Web 应用程序下的子文件夹中读取 XML 文件？

就像是：

```
 Dim rdr As XmlTextReader
     rdr  = New XmlTextReader( "xml\foo.xml")    // have also tried "~/xml/foo.xml" 
```

鉴于此文件夹层次结构：

```
 webapp
       styles
       images
       xml 
```

我无法让它工作。如果可能，我的相对网址是否格式不正确？

PS 我正在尝试使用 HTTP 协议，这样我就可以在浏览器开发人员工具的网络监视器中看到正在发出的请求，并且还可以避免文件系统权限问题。我让它在 Windows Server 2003 中使用物理路径工作，但该代码在 2008R2 中不起作用，我无法确定哪个虚拟用户或机器身份需要权限。我已授予 IUSR 和 ASP.NET v4.0 应用程序池标识的权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:22:04.577

与 ASP.NET 中的任何文件系统路径一样，您必须使用`Server.MapPath`：

```
Dim rdr as XmlReader = XmlReader.Create(Server.MapPath("~/xml/foo.xml")) 
```

* * *

如果您尝试使用 HTTP 并使用来自您网站的相对路径，那么我建议您停止尝试。如果您知道站点根目录的 URL，那么只需尝试`http://mysite/xml/foo.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:14:02.427

您是否尝试在 URL 中使用波浪号（~）？

波浪号表示 ASP.NET 中应用程序的根目录。

例如

```
XmlTextReader reader = new XmlTextReader("~/xml/foo.xml"); 
```

# python - 将元数据存储在 pandas DataFrame 的列标签中是个好主意吗？

> ID：15932896
> 
> 赞同：6
> 
> 时间：2013-04-10T17:50:56.350
> 
> 标签：python, metadata, pandas

我一直在关注是否应该有一个专门的地方来存储`MetaData`pandas的讨论`DataFrame`，我个人认为这个功能非常有用。

在未来的版本中实现此功能之前，我一直在研究 2 个解决方法，但没有一个看起来真的令人满意。

由于我不能让类继承自`DataFrame`，因此我尝试创建一个`MyDataFrame`包含 a`DataFrame`并实现所有方法的类`__add__`，`__mul__`...但是，考虑到可用于操作 DataFrame 的方法数量，这似乎是一种乏味的方法。

此外，我操作的数据来自物理硬件（频谱分析仪、示波器......），原则上，我希望有一组与数据帧的每一列相关联的元数据（测量带宽、平均数......）。需要编码以保持与 ' 结构一一对应`DataFrame`的结构看起来很复杂（如果`DataFrame`转置怎么办？）

我发现一个优雅的解决方案是使用自定义对象而不是通常的`Series`对象名称。这些“元索引”基本上是字符串 + 元数据，将替换`my_dataframe.columns`类定义中通常的列标签，如下所示：

```
class MetaIndex:
    def __hash__(self):
        return self.str.__hash__()

    def __eq__(self,other):
        return self.str == str(other)

    def __init__(self,st):
        self.str = format_name(st)
        self._meta = MetaData()

    def __repr__(self):
        return self.str

    def __str__(self):
        return self.str 
```

然后，当我保存`DataFrame`（在 hdf5 文件中）时，我将其更改`MetaIndex`为常规字符串，并分别保存每列的元数据，当我加载数据时，我使用以下内容重新实例化数据框的列：

```
s.replace_names_by_meta_index()
    for c in s.columns:
        col = s[c]
        if col.meta is not None:
            col.meta.set(**f["meta"][str(c)]) 
```

1）您会说这是一种明智的做法，还是一种边缘和危险的方法？

2) 此外，一个非常诱人的扩展是让 MetaIndex 从 str 继承。这样，自动完成功能仍然适用于 IPython ( `my_dataframe.col1`)。但是，在这种情况下，一些简单的操作，例如`my_dataframe.T.T`使`MetaIndex`包含的所有元数据丢失`index._meta`（好像在幕后，操作已重新初始化`index._meta = dict()`）。这对我来说看起来很神秘，这也是我担心整个方法的原因。

关于那里发生了什么的任何线索？在此先感谢，最好的问候，塞缪尔

# css - 您知道如何使这个红色导航可点击吗？（弹性滑块）

> ID：15932900
> 
> 赞同：-1
> 
> 时间：2013-04-10T17:51:01.367
> 
> 标签：css, wordpress, flexslider

我有问题使该站点的红色导航数字：http: [//ib.co.at/project/pension-noella](http://ib.co.at/project/pension-noella)可点击？

它应该通过 CSS 工作。我已经尝试使用“margin-top”（#content-area）或更大的“min-width”（#flexslider），但这些“解决方案”不适用于灵活数量的数字。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:55:03.707

只需给你的班级`.flexslider`一个 z-index 值：

```
.flexslider {
  z-index: 99;
} 
```

在发布问题时添加代码也很好。请[看看为什么](https://meta.stackexchange.com/questions/125997/something-on-my-web-site-doesnt-work-can-i-just-paste-a-link-to-it)。

# vba - Word BuiltInDocumentProperties 不会改变

> ID：15932902
> 
> 赞同：4
> 
> 时间：2013-04-10T17:51:05.057
> 
> 标签：vba, word-2003

我在 Word 2003 中有一个宏，它将打开文档的属性字段应用于同一文件夹中的所有 .doc。该代码工作一次。如果我创建一个文件夹，在该文件夹中创建三个新文档，打开文档并运行宏，它将起作用。如果我在该文件夹中打开一个文档并再次运行宏，它只会更改运行宏的活动文档的属性。

该宏位于 Normal 模板的一个模块中。

编码：

```
title = ActiveDocument.BuiltInDocumentProperties("Title")
subject = ActiveDocument.BuiltInDocumentProperties("Subject")
author = ActiveDocument.BuiltInDocumentProperties("Author")
manager = ActiveDocument.BuiltInDocumentProperties("Manager")
company = ActiveDocument.BuiltInDocumentProperties("Company")
category = ActiveDocument.BuiltInDocumentProperties("Category")
keywords = ActiveDocument.BuiltInDocumentProperties("Keywords")
comments = ActiveDocument.BuiltInDocumentProperties("Comments")

fileDirectory = ActiveDocument.Path

vFile = Dir(fileDirectory & "\*.doc")

Do While vFile <> ""
    Set wordDoc = Documents.Open(fileDirectory & "\" & vFile)
    With wordDoc
        .BuiltInDocumentProperties("Title") = title
        .BuiltInDocumentProperties("Subject") = subject
        .BuiltInDocumentProperties("Author") = author
        .BuiltInDocumentProperties("Manager") = manager
        .BuiltInDocumentProperties("Company") = company
        .BuiltInDocumentProperties("Category") = category
        .BuiltInDocumentProperties("Keywords") = keywords
        .BuiltInDocumentProperties("Comments") = comments
        .Save
        .Close
    End With
    vFile = Dir
Loop 
```

我不确定它是否与我打开或保存文件的方式有关。至少如果它根本不起作用，我会知道代码是错误的，但是因为它至少可以在新文档上运行一次......我不知道。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T21:34:19.387

好的，我现在可以工作了。Word 有一个`.Saved`布尔值，显然如果它已经设置为 true，则在您使用时不会保存更改，`.Save`并且通过 VBA 更改属性似乎不算作将其设置`.Saved`为 false 的足够重要的更改。也许`.SaveAs`仍然可以工作。无论如何，我`.Saved = False`之前添加了`.Save`，现在它工作得很好。

只是想让任何人知道在某些时候可能会思考同样的事情。这可能只是确保文件始终保存的一种不错的方法。

# php - 根据命名约定区分类中的方法？

> ID：15932903
> 
> 赞同：1
> 
> 时间：2013-04-10T17:51:05.720
> 
> 标签：php, class, methods

这是场景：

我有一个没有预定数量的方法的类。有些会是，有些会在哪里`function actionName`被调用，并将定义它们是什么类型的方法，并且可以是任何东西。`function filterName``"filter"``"action"``"Name"`

在我的`__construct()`我想：

```
$methods = get_class_methods($this);

foreach ( $methods as $method ) {

  if ( $method == 'action' )
    $this->DoSomething( $this->{$method}() );

  if ( $method == 'filter' )
    $this->DoSomethingElse( $this->{$method}() );

} 
```

如何在不使用任何类型的字符串或 reg 表达式的情况下实现这一点？

我也愿意使用`get_class_methods()`. 但请记住，我永远不会知道存在多少`"action"`或`"filter"`方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:53:47.657

```
if (substr($method,0,6) == "action") { }

if (substr($method,0,6) == "filter") { } 
```

我只是检查关键字函数名称的前六个字符链。被警告 - 太多的关键字会扼杀这个性能。

# php - 源代码页顶部的空行

> ID：15932912
> 
> 赞同：0
> 
> 时间：2013-04-10T17:51:39.027
> 
> 标签：php

我遇到了一个奇怪的问题，一个返回有效 JSON 的 php 文件，除了它在文件的最顶部输出大量空行，所以如果实际输出包含 300 行代码，我得到的是 300 +开头有 500 个空行。

请注意，这些空白行仅在我在浏览器中显示页面源代码时可见。如何摆脱它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:54:41.283

您是否在回显 json 之前检查过某处没有其他回显？

如果您找不到原因，您可以`ob_start();`在登陆脚本的开头使用并`ob_end_clean();`在 echo json 之前调用 - 这应该将所有输出捕获在缓冲区中，然后清理缓冲区

# python - 用于排序/编号的正则表达式

> ID：15932916
> 
> 赞同：2
> 
> 时间：2013-04-10T17:51:57.750
> 
> 标签：python, regex

我需要创建一个正则表达式来捕获文本中的排序（a）、（b）、（c），并在它之前添加一个换行符，例如：

> ISSSS 的综合计划框架旨在： (a) 通过加强安全部队、改善纪律和控制，为平民创造保护环境；(b) 支持武装团体的复员和重返社会；(c) 通过培训和部署国家官员(警察、监狱、司法和行政部门)，在以前由武装团体控制的地区重建国家职能，以维护法治和公共秩序，(d) 确保道路畅通和基础设施；(e) 促进境内流离失所者和难民安全和有尊严地返回；(f) 解决优先的社会需求和冲突的主要根源，并启动经济复苏。

我想把它扩展到数字 (1),(2),(3)... 和罗马数字 (I),(II),(III).../ (i),(ii), ㈢

进一步的挑战，我们能否让它匹配任何样式，例如 A- B- C- 或 ABC 或 A) B) C) ？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:07:37.370

```
print re.sub("\((I+|i+|[a-z0-9])\)","\n\g<0>",buff) 
```

会产生

```
The Integrated Programme Framework of the ISSSS has been established to: 
(a) create a protective environment for civilians by strengthening the security forces,     and improving discipline and control; 
(b) support the demobilization and reintegration of armed groups; 
(c) re-establish state functions in areas formerly controlled by armed groups, through     the training and deployment of state officials (police, penitentiary, judicial     and administration) to uphold the rule of law and public order, 
(d) ensure open road access and infrastructure; 
(e) promote a safe and dignified return of internally displaced persons and refugees; and 
(f) address priority social needs and key sources of conflict and initiate economic recovery. 
```

我对制作一个完全“通用”的产品持怀疑态度，因为您遇到了连字符的问题，例如“重新建立”。上面的正则表达式应该涵盖你的大部分情况，你应该能够通过在“|”中添加或删除内容来轻松地对其进行调整 操作员。话虽如此，我还是多玩了一点，加了一个测试句，效果还不错。我必须假设我从一个空格开始，以避免使用一些潜在的问题，如 ')'、'." 或 '-'。

```
>>> buff += "This is a) test of i) one ii) two iii) three a. four and b- five"
>>> print re.sub(" \({0,1}(I+|i+|[a-zA-Z0-9])(\)|\.|-)","\n\g<0>",buff)

The Integrated Programme Framework of the ISSSS has been established to:
 (a) create a protective environment for civilians by strengthening the security forces, and improving discipline and control;
 (b) support the demobilization and reintegration of armed groups;
 (c) re-establish state functions in areas formerly controlled by armed groups, through the training and deployment of state officials (police, penitentiary, judicial and administration) to uphold the rule of law and public order,
 (d) ensure open road access and infrastructure;
 (e) promote a safe and dignified return of internally displaced persons and refugees; and
 (f) address priority social needs and key sources of conflict and initiate economic recovery.This is
 a) test of
 i) one
 ii) two
 iii) three
 a. four and
 b- five 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:05:39.933

您可以将 sub 与回调一起使用；

```
import re

subject = 'The Integrated Programme Framework of the ISSSS has been established to: (a) create a protective environment for civilians by strengthening the security forces, and improving discipline and control; (b) support the demobilization and reintegration of armed groups; (c) re-establish state functions in areas formerly controlled by armed groups, through the training and deployment of state officials (police, penitentiary, judicial and administration) to uphold the rule of law and public order, (d) ensure open road access and infrastructure; (e) promote a safe and dignified return of internally displaced persons and refugees; and (f) address priority social needs and key sources of conflict and initiate economic recovery.'

def callback_f(e):
    # Check your input
    if e.group()[1] == 'a':
        print(e.group()[1])
        return '(1)'
    else:
        print(e.group()[1])
        return '(' + e.group()[1] + ')';

result = re.sub(r'\((\w)\)', callback_f, subject)

print(result) 
```

我不会深入探讨这个问题。但是您可以使用字典自动将您的`a/b/c/d/e`值替换为映射中匹配的任何值。

该演示在终端中输出；

```
192:Desktop allendar$ python test.py 
a
b
c
d
e
f
The Integrated Programme Framework of the ISSSS has been established to: A create a protective environment for civilians by strengthening the security forces, and improving discipline and control; (b) support the demobilization and reintegration of armed groups; (c) re-establish state functions in areas formerly controlled by armed groups, through the training and deployment of state officials (police, penitentiary, judicial and administration) to uphold the rule of law and public order, (d) ensure open road access and infrastructure; (e) promote a safe and dignified return of internally displaced persons and refugees; and (f) address priority social needs and key sources of conflict and initiate economic recovery. 
```

# python - manage.py syncdb 不工作

> ID：15932920
> 
> 赞同：-5
> 
> 时间：2013-04-10T17:52:13.380
> 
> 标签：python, django, line, syncdb

```
DJANGO@linux-l94a:~/Desktop/myblog> ./manage.py syncdb

Traceback (most recent call last):

File "./manage.py", line 10, in

execute_from_command_line(sys.argv)

File "/usr/lib/python2.7/site-packages/django/core/management/init.py", line 443, in execute_from_command_line

utility.execute()

File "/usr/lib/python2.7/site-packages/django/core/management/init.py", line 382, in execute

self.fetch_command(subcommand).run_from_argv(self.argv)

File "/usr/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv

self.execute(*args, **options.__dict__)

File "/usr/lib/python2.7/site-packages/django/core/management/base.py", line 231, in execute

self.validate()

File "/usr/lib/python2.7/site-packages/django/core/management/base.py", line 266, in validate

num_errors = get_validation_errors(s, app)

File "/usr/lib/python2.7/site-packages/django/core/management/validation.py", line 30, in get_validation_errors

for (app_name, error) in get_app_errors().items():

File "/usr/lib/python2.7/site-packages/django/db/models/loading.py", line 158, in get_app_errors

self._populate()

File "/usr/lib/python2.7/site-packages/django/db/models/loading.py", line 64, in _populate

self.load_app(app_name, True)

File "/usr/lib/python2.7/site-packages/django/db/models/loading.py", line 88, in load_app models = import_module('.models', app_name)

File "/usr/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module

__import__(name)

File "/home/DJANGO/Desktop/myblog/blog/models.py", line 4, in

class Post(models.Model):

File "/home/DJANGO/Desktop/myblog/blog/models.py", line 5, in Post

title = modles.CharField(max_lenght=100)

NameError: name 'modles' is not defined

models.py

from django.db import models

from taggit.managers import TaggableManager

class Post(models.Model): title = modles.CharField(max_lenght=100)

body = modles.TextField()

created = models.DateTimeField()

tags = TaggableManager()

def __unicode__(self):
    return self.title

urls.py

from django.conf.urls import patterns, include, url

from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('', # Examples: # url(r'^$', 'myblog.views.home', name='home'),

# url(r'^myblog/', include('myblog.foo.urls')),

url(r'^admin/', include(admin.site.urls)),

)

admin.py

from django.contrib import admin

from blog.models import Post

admin.site.register(Post)

settings.py

INSTALLED_APPS = (

'django.contrib.auth',

'django.contrib.contenttypes',

'django.contrib.sessions',

'django.contrib.sites',

'django.contrib.messages',

'django.contrib.staticfiles',

# Uncomment the next line to enable the admin:

'django.contrib.admin',

'taggit',

'blog',

# Uncomment the next line to enable admin documentation:

# 'django.contrib.admindocs',

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:54:54.190

您的`models.py`, 第 5 行有一个错字：

```
title = modles.CharField(max_lenght=100) 
```

这应该更新为

```
title = models.CharField(max_length=100) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:54:28.523

`body = modles.TextField()`应该`body = models.TextField()`

也`title = modles.CharField(max_lenght=100)`应该是
`title = models.CharField(max_length=100)`

# c++ - C++ 中的 int *x 和 int* x 有区别吗？

> ID：15932925
> 
> 赞同：15
> 
> 时间：2013-04-10T17:52:29.350
> 
> 标签：c++, variables, pointers, naming-conventions, declaration

我正在重新开始我的 C++ 研究，并真正尝试了解基础知识。指针总是给我带来麻烦，我想确保我真的明白了，然后再继续前进并在路上感到困惑。

可悲的是，我从一开始就被我正在阅读的教程的不一致所困扰。有些人以这种方式进行指针声明：

```
int *x 
```

有些人这样做：

```
int* x 
```

现在两者中的前者似乎是迄今为止最常见的。这令人不安，因为第二个对我来说更有意义。当我读到 int *x 时，我读到“这是一个 int，它的名字是 *x”，这不太对。但是当我阅读第二个时，我看到“这是一个 int 指针，它的名字是 x”，这非常准确。

那么，在我建立自己的思维导图之前，两者之间是否存在功能差异？如果我这样做，我会成为麻风病人的弃儿吗？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-10T17:55:55.460

著名的[**Bjarne Stroustrup**](http://en.wikipedia.org/wiki/Bjarne_Stroustrup)以 C++ 的创造和发展而著称，他说...

> “int* p;”之间的选择 和“int *p;” 不是关于对与错，而是关于风格和重点。C 强调表达；声明常常被认为只是一种必要的罪恶。另一方面，C++ 非常强调类型。
> 
> “典型的 C 程序员”会写“int *p;” 并解释它“*p is what is the int”强调语法，并可能指向C（和C++）声明语法来论证风格的正确性。实际上，* 绑定到语法中的名称 p。
> 
> “典型的 C++ 程序员”会写“int* p;” 并解释它“p 是指向 int 的指针”，强调类型。实际上 p 的类型是 int*。我显然更喜欢这种强调，并认为它对于很好地使用 C++ 的更高级部分很重要。

所以，没有区别。它只是一种代码风格。

从[这里](http://www.stroustrup.com/bs_faq2.html#whitespace)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-10T17:53:20.520

对于编译器，它们具有完全相同的含义。

从风格上讲，两者都有支持和反对的论据。

一个论点是第一个版本更可取，因为第二个版本：

```
int* x, y, z; 
```

意味着`x`和都是指针`y`，`z`它们不是（仅`x`是）。

第一个版本没有这个问题：

```
int *x, y, z; 
```

换句话说，由于`*`绑定到变量名而不是类型，所以将它放在变量名旁边是有意义的。

相反的论点是不应该在同一个声明中混合指针和非指针类型。如果不这样做，则上述参数不适用，将`*`right 放在旁边是有意义的，`int` *因为它是 type 的一部分*。

无论您决定订阅哪种思想流派，您都会在野外遇到这两种风格，甚至更多（有些人写道`int * x`）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-10T17:53:59.593

完全没有区别。

这只是风格问题。

我*个人*更喜欢这个：

```
int *x; 
```

对此，

```
int* x; 
```

因为当您在同一行声明许多变量时，后者的可读性较差。例如，看到这个：

```
int* x, y, z; 
```

这`x`是一个指向 的指针`int`，但也是`y`和`z`指针吗？*看起来*它们是指针，但它们*不是*.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-10T17:54:44.067

没有区别。我使用该`int* x`表单是因为我更喜欢将所有类型组合在一起远离名称，但这种类型与更复杂的类型（如`int (*x)[10]`.

有些人更喜欢`int *x`它，因为您可以将其理解为“取消引用`x`给您一个`int`”。但是，当您开始使用引用类型时，即使这样也会崩溃。`int &x`并不意味着获取地址`x`会给你一个`int`.

您可能更喜欢的另一个原因`int *x`是，就语法而言，the`int`是声明说明符序列，而 the`*x`是声明符。它们是声明的两个独立部分。当您有多个声明符（例如`int *x, y;`. 在这种情况下，可能更容易看出它`y`不是指针。

然而，很多人，比如我自己，不喜欢在一个声明中声明多个变量。在 C++ 中没有太多需要。`int* x`这可能是更喜欢这种形式的另一个原因。

只有一条规则：保持一致。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T17:55:49.023

没有不同。我倾向于更喜欢

```
int* x 
```

由于认为 'x' 具有类型 int* 。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-10T17:54:09.113

完全没有区别。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-10T17:57:01.527

对于编译器来说，它们是相同的

但同时，当有多个变量时，区​​别在于可读性

> 整数 *x,y

然而，这更具误导性

> 整数* x,y

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-10T17:58:03.980

两者都是一回事。

前者虽然是优选的。假设您要在同一行中声明 2 个指针 p & q。

> 整数* p, q;

这实际上意味着 'p' 是一个指向 int 的指针，而 'q' 是一个 int。

正确的语法是：

> 整数* p, *q;

因此，我们在指针名称中包含 *。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-10T18:05:41.040

这是一种编码风格。没有区别，只是你自己说的偏好问题。希望你清楚。享受编码

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-04-10T18:11:03.493

在我看来，在表达式中`int * x,y;` `x`和`y`是变量的名称。当程序员这样声明这些名称时，这意味着它们具有`same type`并且`int *`是类型。

# vb.net - 我的 Web 服务将 Guid 列表作为参数，但生成的引用需要一个可观察的集合

> ID：15932932
> 
> 赞同：0
> 
> 时间：2013-04-10T17:53:01.297
> 
> 标签：vb.net, wcf

我在这里有点困惑。我有一个 WCF 网络服务

```
<OperationContract()>
Function StartStep(ByVal Key As Guid, WorkOrders As List(Of Guid), UserUID As Guid, Comment As String) As Boolean 
```

但是当我在我的客户端上生成我的 Web 引用时，`WorkOrders`它会以 observableCollection 的形式出现。我创建了一些新的 Web 服务，所有列表都在这样做。列表是一种相当常见的数据类型，我认为它会被 WCF 正确处理。这可能是因为我有另一个函数返回 ObservableCollection 并且搞砸了？我是否必须使用 KnownType 或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:02:02.477

在“添加服务引用”对话框的“高级”选项卡中，您可以说明您希望如何在客户端处理集合。我猜您已将其默认设置为 ObservableCollection，但您可以选择 List。

* * *

“List”、“ObservableCollection”和任何其他 .NET 类型都不会通过网络传输。在所有情况下，都会发送 XML 或其他一些此类数据表示。我前面提到的设置是关于决定客户端如何解释这个 XML 数据。

# iphone - iOS转换和存储大表的简单方法

> ID：15932935
> 
> 赞同：3
> 
> 时间：2013-04-10T17:53:08.287
> 
> 标签：iphone, ios, objective-c, json, excel

我有表格 ~100x100 的 Excel 文件，需要从 iOS 应用程序访问这些值。 ![在此处输入图像描述](https://i.stack.imgur.com/gqBcN.png)

起初，我尝试在[Mr.DataConverter](http://www.shancarter.com/data_converter/index.html)中制作 json，然后读取到数组就没有问题了。但！一些浮点值没有被正确识别，我得到了不带引号的数字： ![在此处输入图像描述](https://i.stack.imgur.com/sY3kw.png)

当时其他解析正确！所以，从这一刻起，我无法将我的 Json 字符串解析为 NSArray。

问题是：如何将 xls 转换为 json，或者如何在 iOS 设备中放置和检索值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:58:11.987

您可以使用[DHlibxls iOS 框架](https://github.com/dhoerl/DHlibxls)并将 .xls 文件拉入您的应用程序，然后使用该框架进行读取和处理。该框架基于 SourceForge 上的开源 libxls 库，并具有非归属 BSD 许可证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:46:45.410

我建议将 Excel 电子表格[导出](http://office.microsoft.com/en-us/excel-help/import-or-export-text-txt-or-csv-files-HP010342598.aspx)为 CSV，然后使用适当的[CSV 解析器](https://stackoverflow.com/questions/3344628/where-can-i-find-a-csv-to-nsarray-parser-for-objective-c)来解析数据。如果您遇到任何问题，则电子表格中可能存在您需要修复的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:57:21.890

替代方案：如果可能，使用格式中的 excel 文件：制表符分隔文本文件。这解决了你所有的问题。使用文件管理器/c++ 在 iOS 中轻松打开文本文件。

[将 Excel 电子表格转换为制表符分隔的文本文件](http://www.howtogeek.com/79991/convert-an-excel-spreadsheet-to-a-tab-delimited-text-file/)

# sql - 使用count根据出现次数隔离记录

> ID：15932936
> 
> 赞同：2
> 
> 时间：2013-04-10T17:53:11.010
> 
> 标签：sql, ms-access

我有三张桌子，Avatar、Super_Avatar 和 Trade。

交易属性 = avName | 买家ID | 卖家ID...
头像属性= avName | 出生日期 | 性别...
Super_Avatar 属性 = avName | 智慧..

都通过avName连接。交易表表示一个头像被交易了多少次。我使用计数来隔离化身已交易的数量（通过计算特定化身（avName）在交易表中出现的次数）。我只想要那些出现两次以上的。

```
SELECT avName
INTO tempTable
FROM Trade
GROUP BY avName
HAVING COUNT(*) > 2; 
```

如何在同一查询中通过 avName 将刚刚创建的临时表 (tempTable) 与 Super_Avatar 和 Avatar 表连接起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:03:25.497

您不能插入临时表，然后在同一个查询中选择或加入它。但是，您可以使用子查询或 CTE（取决于数据库）：

```
select *
from
(
    SELECT avName
    FROM Trade
    GROUP BY avName
    HAVING COUNT(*) > 2
) t
inner join Avatar a
    on t.avName = a.avName
inner join Super_Avatar s
    on t.avName = s.avname 
```

由于您使用的是 MS Access，因此每个连接都需要括号，因此您应该能够使用：

```
select *
from
((
    SELECT avName
    FROM Trade
    GROUP BY avName
    HAVING COUNT(*) > 2
) as t
inner join Avatar as a
    on t.avName = a.avName)
inner join Super_Avatar as s
    on t.avName = s.avname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:56:08.093

使用公用表表达式，您甚至不需要临时表

```
with tempTable as (
  SELECT avName
  FROM Trade
  GROUP BY avName
  HAVING COUNT(*) > 2
) 
select *
from other_table
  join tempTable on ... 
```

（这是 ANSI SQL，适用于所有现代 DBMS）

# php - 不带括号声明“数组”的目的？

> ID：15932946
> 
> 赞同：0
> 
> 时间：2013-04-10T17:53:43.620
> 
> 标签：php, arrays

我之前从这里得到了一个代码片段，并对我最初复制粘贴的这种语法感到好奇：

```
function create(array &$data){
  #blah blah...
} 
```

`array &$data`与自身相对的目的是什么`&$data`？换句话说，该语句`array`在这种情况下做了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:54:44.033

它被称为[类型提示](http://php.net/manual/en/language.oop5.typehinting.php)：

> PHP 5 引入了类型提示。函数现在可以强制参数为对象（通过在函数原型中指定类的名称）、接口、数组（自 PHP 5.1 起）或可调用（自 PHP 5.4 起）。但是，如果将 NULL 用作默认参数值，则将允许它作为任何以后调用的参数。
> 
> 如果将类或接口指定为类型提示，则也允许其所有子级或实现。
> 
> 类型提示不能用于标量类型，例如 int 或 string。特征也是不允许的。

# excel - 检查 IF 多个单元格 CONTAIN 某些文本的语句

> ID：15932950
> 
> 赞同：0
> 
> 时间：2013-04-10T17:53:51.927
> 
> 标签：excel, if-statement, excel-formula, contains, sumifs

我有一列值，然后我有两列带有简单标记，例如“X”：

```
 A              B               C
1    
2
3    VALUES:       PERSON1:         PERSON2
4    500           X
5    180                            X
6    100                            X
7    200           X
8    TOTAL:
9    =SUM(A4:A8)   ??               ?? 
```

我是否可以创建一个语句来检查一个框是否有一个`X`在同一行上的 A 列单元格的值是否将从总和中减去？

在上面的示例中，PERSON2 应该有一个值为 '=980-180-100' 的语句，即`700`.

我可以很容易地为一个细胞做到这一点：`=IF(B4="X", A9-A4)`但我不能完全解决多个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:00:35.203

我猜测：

```
=SUM(A4:A7)-SUMIF(B4:B7,"X",A4:A7) 
```

是你所追求的，或者也许是：

```
=SUM(A4:A7)-2*SUMIF(B4:B7,"X",A4:A7) 
```

但更好的解决方案来自@barry houdini：

> 在 B9 中尝试将此公式复制到 C9`=SUMIF(B4:B7,"<>X",$A4:$A7)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:10:16.603

你可以使用类似的东西 `=$A9-SUMIFS($A4:$A7,B4:B7,"X")`

# cookies - Cookie 的 setMaxAge 的 0 和负值之间的差异

> ID：15932957
> 
> 赞同：14
> 
> 时间：2013-04-10T17:54:10.297
> 
> 标签：cookies

来自 setMaxAge(int) 的 cookie 文档： [http](http://docs.oracle.com/javaee/1.3/api/javax/servlet/http/Cookie.html#setMaxAge(int))`int = 0` ://docs.oracle.com/javaee/1.3/api/javax/servlet/http/Cookie.html#setMaxAge(int)和 之间有什么区别`int = -ve`吗？它说`0`删除cookie。`-ve`value 表示不存储 cookie。这是否意味着 0 仅从当前浏览器会话中删除？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T18:06:44.377

我建议您从浏览器的角度阅读有关 cookie 的信息。这很有趣。请注意，“max-age”是“expires”的较新版本，某些浏览器可能不支持它。（例如，IE6、IE7 和 IE8 不支持 max-age。）

0 表示立即删除 cookie。

否定意味着保留cookie一段时间。我怀疑范围在某种程度上是特定于浏览器的，但它不会在关闭和重新打开浏览器时保留 cookie。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-02T00:28:40.430

将 setMaxAge 设置为 0 将删除 cookie。将其设置为 -1 将保留它，直到浏览器关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-13T02:55:39.337

Oracle 设置 max age 0 提到的[setMaxAge(int)将立即删除 cookie。](https://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html)而 -1 将在浏览器关闭时删除 cookie。

# javascript - jQuery UI 确认对话框不返回真/假

> ID：15932958
> 
> 赞同：0
> 
> 时间：2013-04-10T17:54:19.140
> 
> 标签：javascript, jquery, asp.net

```
 $(function ()
  {
      $("#dialog-confirm").dialog(
      {
          autoOpen: false,
          resizable: false,
          height: 240,
          modal: true,

           buttons: {
              "Delete": function ()
              {
                  $(this).dialog("close");
                  return true;

              },
              Cancel: function ()
              {
                  $(this).dialog("close");
                  return false;
              }
          },
          close: function() {
            ;
            }
      });
  });

  function ShowDeleteConfirmation()
  {
      var activeEmelent = document.activeElement;
      if (activeEmelent.innerHTML == 'Delete')
      {
        $('#dialog-confirm').dialog('open');
        return false;
      }
  } 
```

//aspx代码

```
<asp:LinkButton ID="lbDelete" runat="server" Text="Delete" CssClass="wecc-grid-link" data-cmd="delete" OnClick="Delete_Click" OnClientClick=" return ShowDeleteConfirmation();"  ></asp:LinkButton> 
```

//服务器端事件

```
protected void Delete_Click(object sender, EventArgs e)
    {
        _deleteClicked = true;
        LinkButton lb = sender as LinkButton;
        GridViewRow row = lb.Parent.NamingContainer as GridViewRow;

        if (row.RowState != (DataControlRowState.Selected | DataControlRowState.Edit) &&
           row.RowState != (DataControlRowState.Alternate | DataControlRowState.Selected | DataControlRowState.Edit))
        {
            Delete(row);
        }
        else
        {
            SetRowState(row.RowIndex, DataControlRowState.Normal);
        }

        gvSaveState.DataSource = this.Data;
        gvSaveState.AllowSorting = true;

        gvSaveState.DataBind();
        lbAddItem.Visible = true;
        lbRefreshData.Visible = true;

    } 
```

当我单击网格视图中的删除链接按钮时，会弹出对话框。但是，单击对话框中的删除按钮后，它不会触发我的服务器端单击事件。单击删除时，我确实返回了一个值“true”。

在这里感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:04:20.890

jQuery 对话框本质上是异步的。标准的 confirm() 函数会阻止执行，直到返回结果。jQuery 对话框不会停止执行，因此 showDeleteConfirmation() 总是返回 false，并且您的 jQuery 按钮将它们的值返回为空。如果你想使用 jQuery 对话框，你的删除按钮的功能将需要有提交表单的代码，可能通过在隐藏字段中放置一些 ID 并在隐藏按钮上调用 click()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:00:55.763

该对话框阻止了默认操作的发生，因此您需要在对话框中提交或执行该操作`Delete`按钮功能中提交或执行动作。

所以返回`false`或`true`不做你所期望的。

您需要为此添加更多内容（AJAX 发送到服务器或类似的东西）

```
"Delete": function ()
              {
                  <add call to function to send data to server>
                  $(this).dialog("close");
              }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:04:35.207

请将删除按钮更改为 Confirm 。

使用此代码`"Confirm": function ()` 而不是`"Delete": function ()`

# matlab - 如何使用matlab - 神经网络从先前发生的事件中预测事件的下一次发生

> ID：15932961
> 
> 赞同：1
> 
> 时间：2013-04-10T17:54:28.813
> 
> 标签：matlab, neural-network

我正在做一个项目，我必须预测事件的发生，例如某个事件说 E1 发生在 2013 年 1 月 1 日、2013 年 2 月 3 日、2013 年 12 月 4 日、2013 年 6 月 10 日等等.. 现在，我如何使用/训练神经网络的时间序列工具来预测事件的下一次发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:32:40.660

Does the following link answer your question? [http://www.mathworks.com/help/nnet/gs/time-series-prediction.html](http://www.mathworks.com/help/nnet/gs/time-series-prediction.html)

# powershell - 和我一起破译这个 Powershell 代码

> ID：15932970
> 
> 赞同：0
> 
> 时间：2013-04-10T17:54:48.243
> 
> 标签：powershell, wake-on-lan

我正在编写一个 Wake-On-Lan 脚本，我有这段代码正在运行，我只是想更好地理解它。

这是我遇到问题的摘录：

```
$mac = "78ab78ab78ab" #some user input mac address reformatted to something like this one
$packet = [byte[]](,0xFF * 102)
6..101 |% { $packet[$_] = $mac[($_%6)] }

[byte[]](,0xFF * 102) 
```

这就是说要使一个字节值数组`0xFF`正确 102 次？所以`packet[0]`应该等于`0xFF`通过`packet[101] = 0xFF`

```
6..101 |% { $packet[$_] = $mac[($_%6)] } 
```

这是一个循环，它对我们之前声明的 $packets 数组的一个元素进行操作，基于迭代器，该迭代器`($_)`在循环中进行时增长一。我不确定`$_%6`特别是`%6`操作员的作用。我已经遍历了循环并输出了值（确实发生了变化），但由于我不熟悉操作员，我不确定输出的真正含义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:00:16.730

我认为你的主要问题是`$_%6`。您应该将其阅读为`$_` `%` `6`, where`$_`和`6`are 您的操作数，并且`%`在 Powershell 中是[`Mod`来自 VB.NET world 的二元运算符](http://msdn.microsoft.com/en-us/library/se0w9esz%28v=vs.71%29.aspx)。它返回整数除法的余数。所以，例如`5 Mod 2 = 1`。

# iphone - 错误：Xcode 中的预期“）”

> ID：15932971
> 
> 赞同：0
> 
> 时间：2013-04-10T17:54:51.433
> 
> 标签：iphone, objective-c, xcode

我正在尝试为 UITextField 设置最大字符条目。我在声明文本字段名称的行中收到以下错误。

预期的 '）'

h 文件：

```
@interface secondpage : UIViewController {

IBOutlet UITextField *numberTextField; 
```

.m 文件：

```
- (BOOL)textField:(UITextField *numberTextField)textField shouldChangeCharactersInRange: 
(NSRange)range replacementString:(NSString *numberTextField)string {
NSUInteger newLength = [textField.text length] + [string length] - range.length;
return (newLength > 9) ? NO : YES;
} 
```

我得到的错误是在 m 文件的第一行。任何地狱将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:56:54.457

```
- (BOOL)textField:(UITextField *numberTextField)textField shouldChangeCharactersInRange: 
```

是不正确的。

它应该是

```
- (BOOL)textField:(UITextField *)numberTextField.... 
```

# android - 列表视图中的复杂项目

> ID：15932975
> 
> 赞同：4
> 
> 时间：2013-04-10T17:55:01.330
> 
> 标签：android

我有一个 ListView，其中每个项目的视图都是一个字符串（项目的名称）。但是我必须将很多其他数据与该项目相关联：价格、尺寸、重量、税金等。因此，我要创建一个名为 Item 的新 Java 类，然后为列表中的每个项目创建一个对象。

我不知道哪个是最好的实现方式。有两个明显的选择：

1) 我可以简单地在任何 Android 视图之外创建数据结构，然后编写一个名为 UpdateList() 的方法，该方法获取此数据结构中每个项目的名称并将其放入 ListView。这样做的问题是某些数据被复制了两次（原始数据结构和 ListView 的适配器），当您复制数据时，就会出现错误的可能性。

2) 或者，我可以以某种方式将数据结构直接与 ListView 的适配器相关联，并让它弄清楚如何为显示的每个 ListView 条目显示名称。这里的优点是您只有一个数据结构。但是我不知道这在Android中是否可行，或者非常复杂。

使用 Android 应用程序执行此操作的首选方式是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T18:06:33.830

使用 ListView 和 Adapter 选项会更好，您需要创建一个自定义项以按照您想要的方式从这些对象`ArrayAdapter`中填充一个。`ListView`

这种技术的优点是您获得了一种视图回收机制，该机制将回收`Views`您的内部`ListView`以减少内存消耗。

**简而言之**，您必须：

**1.**创建一个代表单行数据的对象。

**2.**创建`ArrayList`这些对象中的一个。

**3.**创建一个包含 ListView 的布局或使用代码将 ListView 添加到您的主布局。

**4.**创建单行布局。

**5.**创建一个`ViewHolder`从 的角度代表数据行的视觉方面`Views`。

**6.**创建一个自定义`ArrayAdapter`，将根据您的需要填充行。

**7.**最后把这个分配`ArrayAdapter`给你的`ListView`in `onCreate`。

您可以通过阅读我写的这篇博客文章来了解如何实现这一点：

[创建自定义 ArrayAdapter](http://blog-emildesign.rhcloud.com/?p=495)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:02:42.360

只需使用适配器。干净多了。然后，您可以在使用 getView() 显示列表项时检索所需的信息。请参阅[此示例](http://www.josecgomez.com/2010/05/03/android-putting-custom-objects-in-listview/)。

# scala - 多个模式匹配相同的输入变量

> ID：15932976
> 
> 赞同：1
> 
> 时间：2013-04-10T17:55:01.563
> 
> 标签：scala, pattern-matching, match, case

我经常遇到以下问题：

```
val b = a match {
  case Some(a) => "1"
  case None => "n"
}
val c = a match {
  case Some(a) => "2"
  case None => "n"
} 
```

显然，即使只需要一次，匹配也会执行两次。我如何确保编译器考虑到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T17:57:21.030

我认为不会有任何性能提升，但您可以这样编写代码：

```
val (b, c) = a match {
  case Some(a) => ("1","2)
  case None => ("n", "n")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:11:05.503

匹配可以非常快——与 if 语句相比。不要担心做两次工作，除非这是一场艰难的比赛。

匹配默认值比匹配另一种情况稍微容易一些，所以如果你真的不需要这个参数，你最好的选择是

```
val b = a match { case None => "n"; case _ => "1" }
val c = a match { case None => "n"; case _ => "2" } 
```

这通常甚至会胜过可变解决方案，例如

```
var b,c = "n"
a match { case Some(_) => b = "1"; c = "2"; case _ => } 
```

并且肯定会优于任何元组创建。

如果匹配是一个耗时的匹配，那么您必须存储结果并以元组或其他合适的数据结构返回它们，正如 om-nom-nom 已经证明的那样。这也可能更清楚，具体取决于上下文。

# php - 当其中一个更改其值时更新多个输入字段

> ID：15932980
> 
> 赞同：-1
> 
> 时间：2013-04-10T17:55:14.037
> 
> 标签：php, jquery, html, cakephp

我正在`php`（实际上是 cakephp）、`HTML5`、 &中构建一个 Web 应用程序`Jquery`。在一个页面中，我有一个会进行太多计算的表格。其中有一个可能包含 30 个输入字段的表单。这些字段通过公式相互关联。

每当字段值更改时，我都想更新所有其他字段。如何做到这一点？

注意：如果有一些SDK可以帮助我，那就更好了。

**更新 1**

我举一个简短的例子：它是关于设计一些工业产品，我们称之为柜子。

一个橱柜由太多的物品组成，这些主要取决于：**宽度/高度/深度+一些附加特征（大约5个）**。我需要计算构成机柜的组件的规格。可能有 15 个组件。每个组件都有一个特定的公式，并且可能取决于所有提到的输入。如果我更改宽度，许多组件规格应该会自动更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:39:43.587

它仍然是一个JS解决方案。给每个输入框一个类名（例如“myClass”），然后你可以这样做：

```
$('#myInputfield').keyup(function(){
    $('.myClass').each(function(index){
        $(this).val($('#myInputfield').val());
    });
}); 
```

注意：您需要 JQuery 来实现这一点，并且假设您只在一个文本框（即带有 ID：myInputfield 的文本框）中寻找更改。主文本框不应具有相同的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:27:45.030

一般的想法是，您需要使用通用选择器：

```
$(".my_inputs") 
```

添加一个“on()”事件处理程序：

```
$(".my_inputs").on('change', function() { } 
```

然后，在其中执行您想要的任何类型的数据操作：

```
$(".my_inputs").on('change', function() {
    // use jquery to repeat through all .my_inputs and alter their data
    // or set all .my_inputs to a specific value
    // or do anything else you want
} 
```

现在您已经有了大致的想法，请查看[jQuery API](http://api.jquery.com/)以查找有关您想要操作数据的详细信息（或者只是使用好的 ole' Javascript！:)

# javascript - ajax调用后图像加载失败

> ID：15932981
> 
> 赞同：0
> 
> 时间：2013-04-10T17:55:20.107
> 
> 标签：javascript, jquery, html, ajax, zend-framework

我是新来的，我有一个问题，我找不到答案...

我有一个使用 MVC 在 Zend 上运行的 Web 应用程序。在客户端，我使用 Jquery 执行 Ajax 调用，以 Json 格式返回一些数据。使用 javascript 方法，我可以创建与结果对应的 HTML 代码。直到这里一切都很好:-)

我的问题是当我尝试生成需要 URL 的 html 组件（例如 Image）时。

这是我的代码：

```
<script type="text/javascript">
    $.getJSON("/index/items", function(data) {
        var items = [];
        $.each(data, function(key, val) {
            items.push('<li id="resultList-' + val.id + '" class="resultList"><img src="images/item.jpg" alt="img">' + val.name + '</li>');
        });

        $('<ul/>', {
            'id': 'resultList',
            'class': 'myClass',
            html: items.join('')
        }).appendTo('#divResult');
    });
</script>

<div id="content">
    <div id="divResult"></div>
</div> 
```

所以我把图片`src="images/item.jpg`

我的问题是找不到图像，我只得到'alt'标签->错误404。

当我打开 firebug 时，我可以在 URL 上看到一个 GET 查询：

> http://myWebsite/controller/images/item.jpg

当然，服务器在这里找不到它，因为我将图像放在： `/project/public/images`文件夹中......

照你说的：

1.  您认为实施是否良好（安全）？
2.  解决我的问题的最佳方法是什么？

请理解这一切对我来说都是新的，我会努力学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:00:15.933

处理此问题的最佳方法是将其放在相对路径中。

例如，如果目录结构是：

```
project/
   html/
     htmlfile.html //references the image file
   js/
     jsfile.js //references the image file
   images/
     item.png 
```

然后你需要使用

```
<img src="../images/item.jpg" alt="img" /> 
```

这指定了相对于正在访问图像的文件的图像文件的路径。

# c# - 将 Linq 绑定到 Datagridtextcolumn

> ID：15932982
> 
> 赞同：0
> 
> 时间：2013-04-10T17:55:21.127
> 
> 标签：c#, wpf, linq, linq-to-sql

我想从 Linq 查询向我的 DatagridTextcolumn 添加值。

我试过的：

```
DataGridTextColumn test = new DataGridTextColumn();
test.Binding = new Binding("test");
dgServer.Columns.Add(test);

dgServer.Items.Add(new Person()
{
  Status = Convert.ToBoolean(from a in db.Persons
          from d in db.PersonDetails
          where a.pID == d.pDID && a.State == "Active" 
          select a)
}); 
```

XAML

```
<DataGridTextColumn x:Name="test" Binding="{Binding}" Header="test"/> 
```

我对上面的代码有一个例外，说

> 无法将“System.Data.Objects.ObjectQuery”1 类型的对象转换为“System.IConvertible”类型。

如何绑定到`DatagridTextcolumn`从 LINQ 到 SQL 的绑定。

请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:01:42.290

这是有问题的代码 -

```
Status = Convert.ToBoolean(from a in db.Persons
          from d in db.PersonDetails
          where a.pID == d.pDID && a.State == "Active" 
          select a) 
```

里面的查询将返回`IEnumerable of type Person`，您正在尝试将其转换为`Boolean`显然不会编译的，因为没有`implicit conversion`from `IEnumerable<Person>`to `Boolean`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:03:40.810

问题是您正在尝试转换 linq 查询而不是该查询的结果。该问题源于 Linq 的延迟执行模型。尝试在 ToBoolean 调用的参数中添加“FirstOrDefault()”方法：

```
Status = Convert.ToBoolean((from a in db.Persons
      from d in db.PersonDetails
      where a.pID == d.pDID && a.State == "Active" 
      select a).FirstOrDefault()) 
```

Rohit 也有一个很好的观点——你需要确保你实际上可以从 Person 类型转换为 Boolean

# excel - '[Objectives 2012-13 Dave April13.xlsx]BU_Item1 i'!N5 在 Excel 中是什么意思

> ID：15932983
> 
> 赞同：0
> 
> 时间：2013-04-10T17:55:25.177
> 
> 标签：excel

刚刚在 if 语句中得到了一个带有这个的 Excel 电子表格。N5 是真或假值。我知道这可能很愚蠢，但谷歌真的很难，而且这里没有其他内容。满，如果：

=IF(D28>0,'[目标 2012-13 Dave April13.xlsx]BU_Item1 i'!N5,0)

我知道这与更新值有关。但是这些值是从哪里来的（因为我在 [Objectives 2012-13 Dave April13.xlsx] 任何地方都看不到它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:02:57.677

Excel 正在引用名为的工作簿`Objectives 2012-13 Dave April13.xlsx`，在名为的工作表`BU_Item1 i`和单元格`N5`中。

如果有关于数据连接的警告并且您在打开工作簿时启用它们，并且此公式给出`#N/A`，则意味着 Excel 也找不到该工作簿。

如果您从其他人那里获得工作簿，则该人可能知道此文件是什么。否则，不启用连接将允许您在 excel 实际跟踪所引用的工作簿之前查看该公式的值。

# symfony - 为什么 __construct 方法在 FOSUserBundle 的用户实体中不起作用？

> ID：15932989
> 
> 赞同：1
> 
> 时间：2013-04-10T17:55:52.040
> 
> 标签：symfony, fosuserbundle, construct

我正在使用 FOSUserBundle。

这是`User`实体：

```
namespace Shop\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    protected $shop;

    public function __construct()
    {
        $this->shop = 'shop';
        parent::__construct();
    }

    public function getShop()
    {
        return $this->shop;
    }
} 
```

当我调用`getShop`控制器时：

```
$user = $this->getUser()->getShop() 
```

结果为null
为什么`__construct`在`User`课堂上不起作用？我希望将“商店”字符串作为默认值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-14T20:31:22.823

您可以放置​​一个回调来初始化您的用户。只有两个注释**@ORM\HasLifecycleCallbacks**用于实体，**@ORM\PostLoad**用于方法。例如：

```
namespace Shop\UserBundle\Entity;
use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;
/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 * @ORM\HasLifecycleCallbacks
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    protected $shop;

    /**
     * @ORM\PostLoad
     */
    public function init()
    {
        $this->shop = 'shop';
        parent::init();
    }

    public function getShop()
    {
        return $this->shop;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:12:32.460

基本上，学说实体中的 __construct 直接在最终用户代码中调用。从数据库中获取实体时，Doctrine 不使用构造 - 请检查[该问题](https://stackoverflow.com/questions/6944946/instantiate-an-object-without-calling-its-constructor-in-php)以获取更多详细信息。如果需要，您可以通过添加映射将其保存在数据库中。