# StackOverflow 问答 12636000-12636999

# iphone - HTML5 视频和音频不能在所有（移动）浏览器中播放

> ID：12636002
> 
> 赞同：1
> 
> 时间：2012-09-28T08:02:48.730
> 
> 标签：iphone, html, html5-video, html5-audio

我正在使用 HTML5 标签来调用音频（mp3）和视频（mp4）文件，这些文件也必须在 iPhone/iPod/iPad 等 ios 平台上工作......（我不确定它是否支持，请给我备用如果 MP3 和 MP4 在 ios 平台上不起作用，则选项。）

视频在所有浏览器中都可以正常工作，但在 Firefox 中不行，但音频在任何浏览器中都不能正常工作。

你会从下面的演示链接中找到代码，但我没有给出音频和视频的实时路径作为机密，但如果我在这里使用错误的路径或任何缺少的标签，你会知道的。

演示[链接](http://jsfiddle.net/avcreative/rJBrC/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:09:04.350

因此，如果我们对音频/视频使用 html5 标签，那么这是结论，我们需要根据浏览器获取适当的文件。像 Firefox 不支持 mp4，因为我们需要 WebM 和音频 Vorbis 但不支持 mp3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:07:19.540

如果没有指向问题中视频和音频文件的绝对链接，演示链接将毫无用处。

您的音频和视频编码很可能是错误的。但是，如果没有问题中的实际文件，就不可能解决这个问题。

有关支持的音频和视频格式，请阅读：

[http://diveintohtml5.info/video.html](http://diveintohtml5.info/video.html)

# fonts - ie6中的无数pro bug

> ID：12636003
> 
> 赞同：0
> 
> 时间：2012-09-28T08:02:49.590
> 
> 标签：fonts, internet-explorer-6

我在我的网站中使用 Myriad pro 作为我的字体之一，但在 IE6 中，对于文本的西里尔字母部分，字体从 Myriad pro 更改为 Times new roman。我想知道是否有解决这个问题。欢迎任何决定和回复

# php - 哪种编程语言执行此任务？

> ID：12636007
> 
> 赞同：-4
> 
> 时间：2012-09-28T08:03:05.360
> 
> 标签：php, javascript, ajax

我希望根据输入字段搜索动态显示信息。问题是，我不确定要使用什么语言。我想我最好先展示一下我想要做什么（对不起，我让你看视频，但这是我正在寻找的最好的代表）：[https ://new.myspace.com/播放](https://new.myspace.com/play)（大约 1:05 进入视频，“贾斯汀汀布莱克”搜索）

所以我在想也许它是 AJAX，但据我所知，AJAX 不会动态显示那样的内容。通常 AJAX 允许输入搜索并猜测您在键入时要说的内容。

然后我认为它可能是 PHP，但我再次认为它可能不是 PHP，因为在内容出现之前没有“提交”，这让我相信它不是 PHP，因为没有“POST”或“ GET' 被激活。

最后，不确定是否是 javascript/jquery 信息被隐藏并仅在输入字段包含与页面上的某些内容相同的字符串时才显示。

无论如何，只是想知道这是哪种语言，所以我可以开始弄清楚如何去做。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:10:46.953

如果您的目标是构建一个在编辑输入字段时动态更改内容的网站，那么您选择的语言是 Javascript 来实现用户界面部分。

也就是说，您可能正在查看一个更复杂的问题，因为 Javascript 部分需要从通常不是静态的源中检索其信息，因此您还需要构建一个使用输入标签内容并返回合适结果的后端包含在其中的字符串 - 为此，或多或少任何语言都有效，常见的选择是 PHP、Ruby、Python .. etc.pp。用于 Web 服务架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:09:55.597

AJAX 是一种通用机制，可用于许多不同的事情。每当网页动态更新时，很可能是使用 AJAX 的 JavaScript。

jQuery 是使编写 JavaScript 更容易的众多库之一。没有办法从效果上判断它是否真的被使用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:52:20.453

我不知道你真正喜欢做什么，但既然你正在考虑使用 PHP、Javascript、AJAX 或 JQuery，我会给出的答案是 PHP。

使用 PHP，您可以使用 javascript、ajax、jquery、html 等或任何其他库的组合来完成某个过程。

关于ajax，是故意使用以避免重新加载页面。

关于 php，结合 ajax 使用，你可能会认为页面处理过程中没有 POST 或 GET 被激活

关于 jquery，jquery 可以做很多事情。

# java - 使用编程配置休眠，启动 hibernate.hbm2ddl.auto

> ID：12636015
> 
> 赞同：1
> 
> 时间：2012-09-28T08:03:27.887
> 
> 标签：java, database, hibernate, hbm2ddl, sessionfactory

我正在以编程方式配置我的休眠会话工厂：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-programmatic](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-programmatic)

```
private static SessionFactory buildSessionFactory() {

        // Create the SessionFactory from hibernate.cfg.xml
        Configuration configuration = new Configuration();
        configuration.configure();

        configuration.setProperty("hibernate.connection.url", myUrl);
        configuration.setProperty("hibernate.connection.username", myUser);
        configuration.setProperty("hibernate.connection.password", myPass);

        serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry(); 

        return configuration.buildSessionFactory(serviceRegistry);
} 
```

**但问题是，这些属性仅在使用来自 dao 的休眠操作时才加载。**

```
protected void startOperation() {
    session = HibernateUtil.getSessionFactory().openSession();
    tx = session.beginTransaction();
} 
```

因此，当我的应用程序启动时，hibernate.hbm2ddl.auto 似乎不起作用。我可以以某种方式强制 hibernate.hbm2ddl.auto 在我的程序或任何其他解决方案中启动吗？

**建议或其他选择，想法？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:11:31.667

您需要设置 hibernate.hbm2ddl.auto 或使用

```
configuration.setProperty("hibernate.hbm2ddl.auto", "create-drop"); 
```

使用**hibernate.properties**或**hibernate.cfg.xml 之**类的配置文件是设置设置的首选方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:04:30.287

是的。`new Configuration()`应该从 加载所有属性`hibernate.cfg.xml`。

似乎您 已配置为延迟初始化，仅在调用`SessionFactory`时才构建 。`HibernateUtil.getSessionFactory()`

如果是控制台程序， `SessionFactory.buildSessionFactory()`在main方法中简单调用

如果是 Web 应用程序，可以使用[ServletContextListener.contextInitialized(ServletContextEvent sce)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29)或 Spring 在服务器启动期间强制`SessionFactory.buildSessionFactory()`执行。

# javascript - Chosen - 将 Chosen 应用于选择后绑定到更改事件

> ID：12636016
> 
> 赞同：5
> 
> 时间：2012-09-28T08:03:29.333
> 
> 标签：javascript, jquery, jquery-chosen

我目前正在使用[jQuery Chosen](http://harvesthq.github.com/chosen/)插件，它运行良好。目前，我可以像这样绑定到 Chosen 的更改事件：

```
$('#the_selector').chosen().change( ... ); 
```

这很好用。但是，我遇到了一个案例，在选择已应用于选择之后，我需要绑定到更改事件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T11:03:47.127

我能够使用以下方法绑定到事件：

```
$('#the_selector').on('change', function(){
    Do stuff
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-11T16:27:39.583

它使用带有一些参数的标准更改事件，如下所示

```
 $('.PayeeID').on('change', function (evt, params) {

     var selectedValue = params['selected']
     dosomthing(selectedValue);
} 
```

params ==> 如果是单选，则具有选定的值

# sql-server - Shift wise datetime check in sql server query

> ID：12636022
> 
> 赞同：4
> 
> 时间：2012-09-28T08:04:10.837
> 
> 标签：sql-server, vb.net

在我的一个项目中，我遇到了一个 sql 查询问题。实际上，我必须用三个班次检查某个表中的一个 DateTime 列，即，我必须根据各班次中的 RegisteredDateTime 列获取记录。我们有以下班次时间，班次将采用 24 小时制

```
Shift1 : 07:00:00-12:00:00
Shift2 : 12:00:00-22:00:00
Shift3 : 22:00:00-07:00:00 
```

我的问题是我在 shift1 和 shift2 中正确获取记录，但记录不在 shift3 中。我正在四处走动，以解决这个问题。我正在使用以下搜索查询来获取所有班次中的记录

```
SELECT        RequestNumber
FROM            Table
WHERE (CONVERT(Time, RegisteredDateTime) BETWEEN '" & Shift1.Split("-")(0) &"' AND ' " & Shift1.Split("-")(1) & "') 
```

上面的查询用于 Shift1，同样我也在检查 Shift2 和 Shift3。

大家好，最后@AnandPhadke 给出的想法对我有用，这是我使用的最终查询

```
 Dim StartNumber As Integer = Convert.ToInt32(Shft3Arr(1).Split(":")(0))
 Dim EndShift As String = (StartNumber - 1) & ":59:59"
 query += "(CONVERT(Time, Complaints.RegisteredDateTime) >= '" + Shft3Arr(0) + "') OR  (CONVERT
(Time, DATEADD(DD, 1, Complaints.RegisteredDateTime)) <= '" + EndShift + "')" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:26:37.997

在这里做的最简单的事情就是**改变**时代（双关语）！

您的时间是 7-12,12-22,22-7*（7* 是第二天）

使用一点点魔法将它们转换为 0-5,5-15,15-24，这将匹配您正在测试的日期范围，对`start of the shift`吗？

```
SELECT RequestNumber
FROM   Table
WHERE  DateAdd(hh,-7,CONVERT(Time, RegisteredDateTime))
       BETWEEN .... 
```

那，虽然在逻辑上不错不是 SARGABLE，所以我们改为移动范围，相反。

```
SELECT RequestNumber
FROM   Table
WHERE  CONVERT(Time, RegisteredDateTime)
       BETWEEN DateAdd(hh,7,@date1) AND DateAdd(hh,7,@date2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T08:14:12.297

~~班次 3 跨越 2 天。~~

在您的查询中添加这些条件

```
AND  CONVERT(Time,DATEADD(DD,1,RegisteredDateTime)) < '07:00:00'
AND  CONVERT(Time,RegisteredDateTime) > '07:00:00'
AND  DATEDIFF(DD,CONVERT(DATE,RegisteredDateTime), 
             CONVERT(Date,DATEADD(DD,1,RegisteredDateTime))) <=1 
```

 ~~该答案基于上面的 **Richard aka cyberkiwi**答案。完全归功于他。如果这对您有用，请接受他的回答。

你的班次数据是这样的：

```
Shift1 : 07:00:00-12:00:00  
Shift2 : 12:00:00-22:00:00  
Shift3 : 22:00:00-07:00:00 
```

您需要做的只是根据班次时间设置@shift_start_time 和@shift_end_time

```
declare @shift_start_time time ;
 declare @shift_end_time time;

 IF shift 1:
 select @shift_start_time ='00:00:00'
 select @shift_end_time ='04:59:59'

 IF shift 2:
 select @shift_start_time ='05:00:00'
 select @shift_end_time ='14:59:59'

 IF shift 3:
 select @shift_start_time ='15:00:00'
 select @shift_end_time ='23:59:59'

SELECT RegisteredDateTime 
FROM   t_shift
WHERE  CONVERT(Time, DateAdd(hh,-7,  RegisteredDateTime))
       between @shift_start_time and  @shift_end_time 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T08:16:52.717

使用这些条件：

对于班次1

```
WHERE CONVERT(Time, RegisteredDateTime) > convert(time,'07:00:00') and CONVERT(Time, RegisteredDateTime) <= convert(time,'12:00:00') 
```

对于班次2

```
WHERE CONVERT(Time, RegisteredDateTime) > convert(time,'12:00:00') and CONVERT(Time, RegisteredDateTime) <= convert(time,'22:00:00') 
```

对于班次3

```
WHERE CONVERT(Time,RegisteredDateTime) > convert(time,'22:00:00') and CONVERT(Time,  DATEADD(DD,1,RegisteredDateTime)) <= convert(time,'06:59:59') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T12:07:50.863

如果您在检索班次 1 和班次 2 的结果时没有遇到任何问题，那么班次 3 的结果只是通用集减去前 2 个查询的结果集。所以说查询 1 用于班次 1，查询 2 用于班次 2：那么您获取班次 3 的结果集的查询将是：

```
select resuestNumber from table where requestNumber not in (query 1) and requestNumber not in(query 2) 
```~~

# java - java ADF - 离开页面时添加弹出确认

> ID：12636024
> 
> 赞同：0
> 
> 时间：2012-09-28T08:04:20.040
> 
> 标签：java, richfaces, oracle-adf

他们正在我的公司使用 java ADF Richfaces 开发一个 Web 应用程序，为了简单起见，假设我们有两个页面，一个登录页面，然后是主页。

登录后，我开始正常工作，然后错误地在浏览器中单击“关闭选项卡”，如果不保存，我将失去所有工作，我想了一个简单的功能要求开发人员实现；

添加一个弹出窗口来确认用户是否真的想离开页面，但是java开发人员说这样的功能是不可能实现的。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:10:52.487

ADF 使用未提交数据警告[http://one-size-doesnt-fit-all.blogspot.de/2010/02/adf-faces-rc-afdocument.html](http://one-size-doesnt-fit-all.blogspot.de/2010/02/adf-faces-rc-afdocument.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:15:31.307

您的开发人员不知道[onUnload](http://www.w3schools.com/jsref/event_onunload.asp)和[onBeforeUnload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload) javascript 事件。所有现代浏览器都支持它。

# jquery - jQuery 中变量 Elemnts 的 document.getElementById

> ID：12636027
> 
> 赞同：1
> 
> 时间：2012-09-28T08:04:39.187
> 
> 标签：jquery, google-maps, google-maps-api-3, getelementbyid

首先大家好，你们的社区很棒，我经常在这里找到解决我问题的完美解决方案。但是现在我似乎有一个问题，这可能是新的（我找不到任何解决方案）是有一个 jQuery 插件女巫在我调用的对象中获取 4 个变量，将 Geocoords 作为值（50.3675658° 或 -23.73456°）我的功能`$('#map').rectangle(qsparam);`

'#map' 是 div 的 ID，其中 Google-maps 为我提供了我的自定义地图，其边框围绕着我在对象中给出的 2 个点。

这是我的插件：

```
(function($) {
    $.fn.rectangle = function(param) {
        var map, rectangle, coords = param || {};
        var southwest = new google.maps.LatLng(coords.s || -10, coords.w || -10);
        var northeast = new google.maps.LatLng(coords.n || 10, coords.e || 10);
        return this.each(function() {
            map = new google.maps.Map(document.getElementById('map'), {
                'mapTypeId' : google.maps.MapTypeId.TERRAIN
            })
            var bounds = new google.maps.LatLngBounds(southwest, northeast);
            map.fitBounds(bounds);
            rectangle = new google.maps.Rectangle({
                map : map,
                strokeColor : "#008DCF",
                strokeOpacity : 0.6,
                strokeWeight : 4,
                fillColor : "#B8B23B",
                fillOpacity : 0.18,
                Bounds : bounds
            });
        });
    }
})(jQuery); 
```

但我想为其他 div 保留 Plugin 变量，所以你能帮我将 document.getElementById('map') 更改为 document.getElementById(*我不知道 atm 的 div 的名称*)，这样当我想将它用于具有其他名称的 div 时，我不需要更改 ma 插件？

问候你的 Basti890

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:08:49.713

使用`this`而不是`document.getElementById('map')`.

```
return this.each(function() {
    map = new google.maps.Map(this, {'mapTypeId' : google.maps.MapTypeId.TERRAIN});
    // ... 
```

# ios - 使用 CGAffineTransform 视图大小旋转后 UIView 调整大小是不可预测的

> ID：12636028
> 
> 赞同：2
> 
> 时间：2012-09-28T08:04:40.413
> 
> 标签：ios, uiview, cgaffinetransform, rotatetransform

> **可能重复：**
> [在 iPhone 中旋转后 UIView 框架的奇怪行为](https://stackoverflow.com/questions/5802830/weird-behavior-of-uiview-frame-after-rotation-in-iphone)

我正在做一个应用程序，它具有旋转和调整视图大小的功能。我已经实现了这个功能，但我确实面临一个问题。

**我的问题**

拖动视图的四个角时将调整视图的大小，调整大小后我可以在两个方向上旋转视图。

旋转完成后，如果我再次尝试通过拖动视图的角来调整视图的大小，则视图的大小会变为不可预测的值并且它会在屏幕上移动。

**类似问题**

我google了很多，但我没有得到任何完美的答案。有些人问过同样的问题，但他们都没有得到任何好的结果。我花了很多时间在上面，但我无法解决它。请帮帮我以下是类似问题的列表：

[类似问题链接：1](https://stackoverflow.com/questions/5587168/uiview-resizing-after-rotation-with-cgaffinetransform)

[类似问题链接：2](https://stackoverflow.com/questions/8064089/applying-scaling-and-rotation-on-a-view-using-cgaffinetransform)

**我的示例代码**

[关联](http://dl.dropbox.com/u/43007975/AEMobile%20App%20build%20Enterprise/sampleImgMve.zip)

**调整视图大小的代码**

**接触开始方法**

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

UITouch *touch = [[event allTouches] anyObject];

NSLog(@"[touch view]:::%@",[touch view]);

touchStart = [[touches anyObject] locationInView:testVw];
isResizingLR = (testVw.bounds.size.width - touchStart.x < kResizeThumbSize && testVw.bounds.size.height - touchStart.y < kResizeThumbSize);
isResizingUL = (touchStart.x <kResizeThumbSize && touchStart.y <kResizeThumbSize);
isResizingUR = (testVw.bounds.size.width-touchStart.x < kResizeThumbSize && touchStart.y<kResizeThumbSize);
isResizingLL = (touchStart.x <kResizeThumbSize && testVw.bounds.size.height -touchStart.y <kResizeThumbSize);    
} 
```

**触动法**

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
CGPoint touchPoint = [[touches anyObject] locationInView:testVw];
CGPoint previous=[[touches anyObject]previousLocationInView:testVw];

float  deltaWidth = touchPoint.x-previous.x;
float  deltaHeight = touchPoint.y-previous.y;

NSLog(@"CVTM:%@",NSStringFromCGRect(testVw.frame));

if (isResizingLR) {
    testVw.frame = CGRectMake(testVw.frame.origin.x, testVw.frame.origin.y,touchPoint.x + deltaWidth, touchPoint.y + deltaWidth);
}  
if (isResizingUL) {
    testVw.frame = CGRectMake(testVw.frame.origin.x + deltaWidth, testVw.frame.origin.y + deltaHeight, testVw.frame.size.width - deltaWidth, testVw.frame.size.height - deltaHeight);
} 
if (isResizingUR) {
    testVw.frame = CGRectMake(testVw.frame.origin.x ,testVw.frame.origin.y + deltaHeight,  testVw.frame.size.width + deltaWidth, testVw.frame.size.height - deltaHeight);      
} 
if (isResizingLL) {
    testVw.frame = CGRectMake(testVw.frame.origin.x + deltaWidth ,testVw.frame.origin.y ,  testVw.frame.size.width - deltaWidth, testVw.frame.size.height + deltaHeight);   
}

if (!isResizingUL && !isResizingLR && !isResizingUR && !isResizingLL) {
    testVw.center = CGPointMake(testVw.center.x + touchPoint.x - touchStart.x,testVw.center.y + touchPoint.y - touchStart.y);
}

} 
```

调整大小前的第一步![](../Images/453278afd40dd5ce408770858d8d94af.png)

其次，我调整大小并旋转它![](../Images/98c4436b598fda917208b05bb69b8974.png)

第三，我尝试调整它的大小，但它又回到了原来的位置![](../Images/346a636353c785c135c0c69c05ddcab9.png)

这些是更新的屏幕供您参考...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:17:51.803

根据上的文档，该`frame`属性何时未定义。那一定是你的问题。`transform != CGAffineTransformIdentity``UIView`

# java - 当我一次使用 setcontentpane 时如何添加按钮？

> ID：12636031
> 
> 赞同：1
> 
> 时间：2012-09-28T08:04:44.053
> 
> 标签：java, forms, swing, debugging, jframe

这段代码正在连接到 mysql 并在 JFrame 中显示表。首先，我尝试过`frame.add(table)`，但没有成功，但`frame.setcontentpane(table)` 在这段代码中，我可以在 mysql 中看到我的表。

```
form.getContentPane().add(table); 
```

还向我展示了空表，但它不工作。

我想知道**add**和**setcontentpane**有什么区别？

为什么添加不起作用？

同样在GUI中我拖动了一个按钮，我想在我的JFrame中显示它。但是当我有setcontentpane时我不能在那之后，显示我的按钮

**我想要一个设计框架（右键单击-> 新建 Jframe），就像学生 JFrame 我不想上课和编写我的设计我想使用 GUI builder 所以拖动我的组件并使用拖动的组件**

主.java：

```
 Vector columnNames = new Vector();
     Vector data = new Vector();
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection con =DriverManager.getConnection("jdbc:mysql://localhost:3306/school", "colorway", "colorway");
        String sql = "Select name,lname from student";
        Statement statement = con.createStatement();
        ResultSet resultSet = statement.executeQuery(sql);
        ResultSetMetaData metaData = resultSet.getMetaData();
        int columns = metaData.getColumnCount();
    for (int i = 1; i <= columns; i++) {
        columnNames.addElement(metaData.getColumnName(i));
    }

    while (resultSet.next()) {
        Vector row = new Vector(columns);
        for (int i = 1; i <= columns; i++) {
            row.addElement(resultSet.getObject(i));
        }
        data.addElement(row);
    }
    resultSet.close();
    statement.close();
    Students form=new Students();
    JTable  table=new JTable(data, columnNames);
    form.setContentPane(table);
    form.setVisible(true); 
```

学生.java：

```
public class Students extends javax.swing.JFrame {
//somecode
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jTable1;
    // End of variables declaration    

    public JPanel getjpanel(){
        return this.jPanel1;
    }

    public JScrollPane getJscrollPane()
    {
        return this.jScrollPane1;
    }

    public JTable getJTable()
    {
        return this.jTable1;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:10:30.473

不要`setContentPane`用于添加您的组件。这`contentPane`是您应该添加组件的地方。当你这样做时`setContentPane`，你实际上用你想要的组件替换了那个容器`add`。

使用添加组件`add`：

```
form.getContentPane().add(table); 
```

默认情况下，容器有一个[`BorderLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html)，它将在中心添加表格；然后，您可以使用以下方法添加一个按钮：

```
form.getContentPane().add(button, BorderLayout.SOUTH); 
```

查看这篇文章，了解[如何更改布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，以及存在哪些不同类型的布局来根据需要定位组件。

编辑：好的，这是一个工作表的[SSCCE](http://sscce.org/)，以帮助理解它是如何工作的：

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class MyFrame extends JFrame {
    public MyFrame () {

        String[] columns = {"one", "two", "three"};
        String[][] data = {
            {"a1", "a2", "a3"},
            {"b1", "b2", "b3"},
        };

        JTable table = new JTable(data, columns);

        getContentPane().add(new JScrollPane(table));
        getContentPane().add(new JButton("Hello"), BorderLayout.SOUTH);

        pack();
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
                @Override
                    public void run() { new MyFrame(); }
            });
    }
} 
```

在这里，我使用的唯一**技巧**是将表格添加到滚动窗格中，以便在填充数据时表格变得可滚动，但布局就像我描述的那样。

**最后更新：** 如果您使用的是 NetBeans GUI 构建器，那么您*不必担心组件被添加到哪里*`contentPane`：可视化编辑器会为您处理 - 在这种情况下，您的问题`setContentPane`或`add`变得无关紧要。如果要更改 JFrame 表单的布局，请右键单击，选择`Set Layout`并选择所需的布局。

我怀疑您正在尝试做的事情（但这又是我用我要处理的小信息推测）是每次重新加载数据时添加一个新表：您不应该这样做。您应该使用 a`TableModel`来刷新表格的内容。

# jquery - 通过 JQuery 添加禁用属性时，下拉选择的索引不起作用

> ID：12636036
> 
> 赞同：1
> 
> 时间：2012-09-28T08:05:26.453
> 
> 标签：jquery, asp.net

下拉列表与项目动态绑定。在一个要求中，下拉列表选择了特定值并被禁用。我已通过 JQuery 将下拉列表的属性修改为禁用，如下所示

```
 $("#cmbTeamList option[value='2']").attr("selected", "selected");
 $('#cmbTeamList').attr("disabled", "disabled"); 
```

当试图检查服务器端下拉列表的选定值时，选定的索引不起作用。

```
if (cmbTeamList.SelectedIndex != 0)
   {
    //logic is there

   } 
```

请帮助我克服这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:07:37.840

当您禁用表单元素时，它不会发送到服务器。您可以将选择的值存储到隐藏的输入中。

```
$('#hiddenInput').val($('#cmbTeamList').val()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:08:48.527

这是因为发送到服务器的/请求`disabled`中不包含元素。`GET``POST`

另一种方法是使用`readonly`属性。这可以防止用户修改前端的控件，但意味着该值仍然在请求中发送。

但是控件的样式并没有改变，因此您需要使用 CSS 手动将控件灰显，以使其明显无法修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T08:13:21.897

禁用的表单元素不会发送到服务器。您可以为表单创建一个 onsubmit 处理程序，以在提交表单之前启用所有元素。

# django - django-nonrel 中不允许使用多个 OR 过滤器，解决方法？

> ID：12636039
> 
> 赞同：0
> 
> 时间：2012-09-28T08:05:36.400
> 
> 标签：django, django-models, django-nonrel

我正在使用 django-nonrel 1.3 和 MongoDB 2.0.7 并面临这个已知问题 - 过滤 QuerySet 时不允许使用多个 OR 语句。

[https://github.com/django-nonrel/mongodb-engine/issues/140](https://github.com/django-nonrel/mongodb-engine/issues/140)

我看不到这方面的任何进展。你能建议任何解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:43:46.557

在模型管理员上，我重写了 queryset 函数来清理查询。当然，这只会停止 500 错误，并丢弃除第一个查询字符串之外的所有内容。

```
def clean_query(request):
    if 'q' in request.GET:
        get_data = request.GET.copy()
        get_data['q'] = get_data['q'].split(" ")[0]
        request.GET = get_data

class MyAdmin(admin.ModelAdmin):
    def queryset(self, request):
        clean_query(request)
        return super(MyAdmin, self).queryset(request) 
```

我确信对于普通的模型管理器也可以这样做。

# f# - F# Runtime SP1 中有哪些新功能？

> ID：12636041
> 
> 赞同：1
> 
> 时间：2012-09-28T08:05:44.593
> 
> 标签：f#

F# 2.0 Runtime 和 F# 2.0 Runtime SP1 有什么区别？

F# 运行时 2.0： [http ://www.microsoft.com/en-us/download/details.aspx?id=13450](http://www.microsoft.com/en-us/download/details.aspx?id=13450)

F# 运行时 2.0 SP1： [http ://www.microsoft.com/en-us/download/details.aspx?id=15834](http://www.microsoft.com/en-us/download/details.aspx?id=15834)

他们似乎和我一模一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T16:18:04.750

服务包只是错误修复；没有新功能。

# c - 用 0xFF 掩码字符和强制转换（无符号字符）之间有什么区别

> ID：12636043
> 
> 赞同：2
> 
> 时间：2012-09-28T08:05:51.337
> 
> 标签：c, casting, char, unsigned, bit-masks

```
 unsigned char Mid;

if( (data[2]) == 0x9A){
    Mid = data[5];

    if( (Mid == 1) || (Mid == 2) || (Mid == 3) )
        return(Mid); 
```

上面的代码给出：

> 警告：由于数据类型范围有限，比较总是错误的

正如我所料的错误。

我打字没关系

```
if( (unsigned char)data[2] == 0x9A){ 
```

或者

```
if( (data[2]&0xFF) == 0x9A){ 
```

我理解第一个，但第二个会发生什么？

用遮罩有什么作用`0xFF`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:39:09.983

*   将值转换为 unsigned char 时，您正在进行显式类型转换。

*   当您使用 屏蔽值时`0xFF`，会发生*隐式类型转换*。

您有带符号的字符`data[2]`和`0xFF`按位与运算符的操作数。因为其中一个操作数 ( `0xFF`) 不能放入有符号字符中，所以两个操作数都被隐式转换为无符号类型。

# java - 检查一组数据结构的信息

> ID：12636050
> 
> 赞同：0
> 
> 时间：2012-09-28T08:07:01.640
> 
> 标签：java, design-patterns, data-structures

最近在我正在进行的项目中，我遇到了以下问题：

假设我有一组（树状）数据结构：

```
销售合同
    买方
        地址
            城市
            电话
        金融
    卖方
        地址
    项目
        价格
        东西
    其他的东西

```

并且`SellingContract`会经历几个商业短语，每个短语都必须检查`SellingContract`数据以确定它是否满足某些特定条件。

首先，我让顶部容器 ( `SellingContract`) 提供所有条件检查器方法：

```
SellingChecker.tooMuchItems()
SellingChecker.canProceedToStepXXX() 
```

但每次出现新情况时，我都必须修改`SellingContract`.

有人可以建议我一种优雅的方法来解决这个问题吗？

目前，我正在考虑两种方法：

1.  应用访问者模式`SellingContract`，`SellingContract`将提供一个方法`acceptConditionChecker(ConditionChecker)`，条件检查器将实现接口`ConditionChecker`。

2.  创建以`SellingContract`作为参数的实用程序类，然后检查条件。这种方法要求实用程序类知道它的结构，`SellingContract`并且对我来说似乎是程序性的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:01:57.903

首先，我认为`SellingContract`提供所有条件检查方法是不好的。该类应该只关心保存数据和提供对数据的访问。

至于你的两种方法：

1.  我不认为访客模式在这里有用。为了正确应用，访问者应该能够访问不同类型的对象；在您的情况下，这将是不同类型的`SellingContract`或者可能是`Contract`. 同样要真正有用，应该需要不同类型的访问者。但除了`ConditionChecker`那会是什么。所以总结一下：我不认为访问者模式在这里有用。
2.  这种方法似乎是明智的。我认为实用程序类了解`SellingContract`结构不是问题。他们实际上只需要知道它的公共接口。但是他们无法在不了解该对象的情况下合理地检查该对象的条件，因此我在这里看不到问题。此外，您的要求也暗示了一个循序渐进的过程，所以如果您的方法是一个小程序，这不是一个大问题。 **我推荐这种方法。**

对于您的条件，您可以`ConditionChecker`为每个条件编写一个，然后编写一个逐步应用这些条件的类。这也将使代码更易于调试和阅读，因为您可以轻松地在您喜欢的 IDE 中逐步执行代码并查看中间结果。

在我目前正在进行的项目中，我们遇到了类似的问题：对学生数据进行操作并检查他们是否满足学位的所有条件，并向用户提供有关哪些条件满足和不满足的信息。我们使用了第二种方法，效果很好。我们的软件架构师也同意这是一个很好的解决方案。

或者，您可以实现一种特定于域的语言来指定条件和规则。这将允许您让企业自己编写条件。但这需要相当多的努力来实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:55:26.307

我会考虑[责任链模式](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)，每个处理程序都会检查一个条件，如果没问题，它会将信息传递给下一个处理程序。

# c# - 如何使用 itextsharp 插入标签？

> ID：12636051
> 
> 赞同：2
> 
> 时间：2012-09-28T08:07:10.317
> 
> 标签：c#, itextsharp

我正在使用 iTextSharp 在我的 .net 应用程序中生成 pdf。
我被困在一个小而非常简单的地方，我似乎无法弄清楚。

我正在使用 PdfPTable 生成表格并向其中添加单元格。

在其中一个单元格中，我想在其中添加大约 3 个选项卡。
我尝试了以下 2 个代码，但没有给我想要的输出。

```
table.AddCell(new Phrase("\t\tDate:", sampleFont)); //Date:

table.AddCell(Chunk.TAB + Chunk.TAB + new Phrase("Date:", sampleFont)); //TABTABDate: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T08:20:27.583

不幸的是，`iTextSharp`不支持`Tab`，但您可以使用`Paragraph` `Paragraph.IndentationLeft`。

您也可以`cell.PaddingLeft`用于表格单元格。

# r - 为什么有时我不能将类定义设置为 s4 类中的插槽？

> ID：12636056
> 
> 赞同：6
> 
> 时间：2012-09-28T08:07:25.050
> 
> 标签：r, class, s4

```
r=ks.test(x=rnorm(100), "dnorm")
class(r)
[1] "htest"

## Doesnt work, "htest" is class in stats
setClass("Jergon", representation(fit="htest"))
[1] "Jergon"
Warning message:
undefined slot classes in definition of "Jergon": fit(class "htest")

## works "lm" 
setClass("Jergon", representation(am="lm"))
[1] "Jergon" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T09:30:30.547

结果`ks.test`是（来自文档）：

> 带有“htest”类的列表

所以，实际上`"htest"`并不是一个*正式*的类定义到一个包中，而简单来说，就是将返回的列表的类属性`ks.test`设置为`"htest"`。

举个例子，下面的代码也不起作用（因为`myclass`不是正式的类）：

```
obj = list(foo=123)
class(obj) <- "myclass"

class(obj)
[1] "myclass"

setClass("Jergon", representation(foo="myclass"))
[1] "Jergon"
Warning message:
undefined slot classes in definition of "Jergon": foo(class "myclass") 
```

要检查一个类是否被*正式*定义（并且可以用作表示），您可以使用`getClassDef`，即：

```
> getClassDef('htest')
NULL

> getClassDef('lm')
Virtual Class "lm" [package "methods"]

Slots:

Name:   .S3Class
Class: character

Extends: "oldClass"

Known Subclasses: 
Class "mlm", directly
Class "aov", directly
Class "glm", directly
Class "maov", by class "mlm", distance 2
Class "glm.null", by class "glm", distance 2 
```

* * *

**编辑 ：**

正如@Martin Morgan 正确指出的那样，您可以使用`setOldClass`. 事实上，文档说：

> 将旧式（又名“S3”）类注册为正式定义的类。Classes 参数是用作类属性的字符向量；特别是，如果有多个字符串，则会模仿旧式类继承。**通过 setOldClass 注册允许 S3 类出现在方法签名中，作为 S4 类中的插槽，或作为 S4 类的超类**。

因此，此代码工作正常：

```
> setOldClass("htest")
> setClass("Jergon", representation(fit="htest"))
[1] "Jergon" 
```

# php - 为什么我的 jQuery AJAX 调用会在浏览器中打开响应？

> ID：12636057
> 
> 赞同：0
> 
> 时间：2012-09-28T08:07:29.040
> 
> 标签：php, javascript, jquery, ajax

我对 PHP、Javascript、jQuery 等完全陌生，所以我觉得这很令人困惑。

我写了一个回显 JSON 代码的 php 文件。然后，我尝试将此响应存储到客户端上的 Javascript 变量中，如下所示：

```
var res;
$.getJSON("my_php_file", { some_param: "param" },
      function(data) {
         res = data;
      }
}); 
```

相反，Web 浏览器只是在当​​前窗口中打开响应 JSON，而不是将结果保存到`res`. 为什么是这样？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T08:08:57.120

您是否正在处理链接上的 onClick 事件？如果是这样，那么您不会停止事件传播（默认行为）。

```
$('a#msome_link').click(function(e) {
    e.preventDefault();

    var res;
    $.getJSON("my_php_file", { some_param: "param" },
        function(data) {
            res = data;
        }
    });

    return(false); // this is not necessary any more in modern browsers
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:11:09.670

1.  确保`my_php_file`返回`Content-Type: application/json; charset=<your charset>`标题
2.  提供json回调：

    my_php_file?cb=?

3.  确保`my_php_file`做出适当的回应：

    printf("%s(%s)", $_GET['cb'], $json_response);

4.  consider @Mihai Stancu's answer (should be number 0, actually :) )

# uiscrollview - 在 iOS 5 模拟器上运行时，使用 iOS 6.0 SDK 并为 iOS 5 Target 构建会导致 UIScrollView setMinimumZoomScale 失败

> ID：12636058
> 
> 赞同：0
> 
> 时间：2012-09-28T08:07:36.500
> 
> 标签：uiscrollview, zooming, ios6, xcode4.5, ios

我升级到 Xcode 4.5 并开始使用 iOS SDK 6.0：![在此处输入图像描述](../Images/0dd3f34e4154eec2f0d3db006139549a.png)

我有一个使用 Xcode 4.4 和 iOS SDK 5.1 开发的通用应用程序

![在此处输入图像描述](../Images/66ba83b601c6bd261776e782d472138b.png)

它已经在所有经过测试的设备和模拟器上运行，没有任何故障。

希望让它继续在 iPhone 5 上运行，我想提供正确的启动图像并让它运行。

该应用程序的许多部分无需更改即可工作，但其中一部分没有：我放置在 UIScrollView 中的图像无法平移。这以前一直有效，但不适用于 iOS 6 模拟器。

但是，问题的真正症结所在：当我在 iOS 5.0 或 iOS 5.1 模拟器上运行时，在我的调试日志中，我看到抛出如下异常：

`-[NSKeyValueMethodSetter setMaximumNumberOfTouches:]: unrecognized selector sent to instance 0x6ddab20`

堆栈爬网显示尝试进行此调用的代码是`UIScrollView setMinimumZoomScale`.

我调用 setMimimumZoomScale 的代码如下：

```
 CGFloat widthScale = self.scrollView.bounds.size.width / self.image.size.width;
    CGFloat heightScale = self.scrollView.bounds.size.height / self.image.size.height;

    // just reset the zoom scales; leave center and everything else where possible
    self.scrollView.minimumZoomScale = MIN(1.0, MIN(widthScale, heightScale));
    self.scrollView.maximumZoomScale = 4.0; 
```

抛出的异常（以及随后的崩溃）发生在第一次调用 setMimimumZoomScale 时出现上述消息。

我猜 Xcode 4.5 正在使用 setMinimumZoomScale 的代码调用发送该消息，该消息可能存在于 iOS 6 的库中，但在 iOS 5 中从未出现过。

其他人是否看到类似的问题？

fwiw，我没有碰过我的 .storyboard 文件，所以它们仍然可以在没有 autoLayout 的情况下工作。

我是否必须返回并在 Xcode 4.5 旁边安装 Xcode 4.4 才能继续维护我的工作应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:54:00.420

回答我自己的问题……</p>

我最初的问题的复杂性涉及额外的手势识别器。

在 iOS 5.1 SDK（以及之前的版本）下，可以向 UIScrollView 添加手势识别器，并能够使其与 UIScrollView 中内置的 panGestureRecognizer 和 pinchGestureRecognizer 一起工作。

在 iOS 6.0 SDK 下，显然不再真正支持这种行为。相关[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html)并没有明确禁止该行为，因为它确实定义了 UIScrollView 将对可能与平移和捏合相关或不相关的触摸执行什么操作。

> 因为滚动视图没有滚动条，所以它必须知道触摸是表示滚动意图还是跟踪内容中的子视图的意图。为了做出这个决定，它通过启动一个定时器来临时拦截一个触摸事件，并在定时器触发之前，查看触摸的手指是否有任何移动。如果计时器在位置没有显着变化的情况下触发，则滚动视图将跟踪事件发送到内容视图的触摸子视图。如果用户在计时器结束之前将手指拖得足够远，则滚动视图会取消子视图中的任何跟踪并自行执行滚动。子类可以覆盖 touchesShouldBegin:withEvent:inContentView:、pagingEnabled 和 touchesShouldCancelInContentView: 方法（由滚动视图调用）来影响滚动视图处理滚动手势的方式。

为了纠正这个问题，我必须确保情节提要中的手势识别器不再是与滚动视图关联的集合的一部分，而是将它们与滚动视图的内容视图相关联。

（在我的情况下，为了做到这一点，我必须使用`addGestureRecognizer:`我感兴趣的每个手势识别器手动添加它们，因为内容视图用于在情节提要时不知道的图像。）

# vim - Vim 插件 - 在命令模式下自定义参数的自动完成

> ID：12636068
> 
> 赞同：8
> 
> 时间：2012-09-28T08:08:49.543
> 
> 标签：vim, vim-plugin

我正在编写我的第一个 vim 插件（viml + python）。该插件的一个命令是“GetStepCommand()”，它基本上从远程数据源获取数据，我稍微按摩一下数据并将其复制到缓冲区中，以便用户可以开始编辑它。用户必须向“GetStepsCommand”提供一个参数，即数据所在位置的搜索路径，例如：/projects/procedure/step

现在这条路可能很长，而且很容易拼错一些东西。所以我想为参数部分实现我自己的制表符补全。Vim 已经负责通过 tab 键自动完成命令，但它当然不知道如何完成参数（我会自己解决这个问题）。

但首先我需要知道： - 如果/我可以在命令模式下拦截按键 - 获取/获取用户当前正在编写的命令行 - 测试它是否处于命令模式或插入/查看模式 - 和最后返回一个更新的命令行（tab-completed），用户可以在按键后继续在'：'中写入。

任何指针，提示，文章，教程......即信息非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T08:57:36.797

当自定义命令的参数是文件系统路径时，只需添加`-complete=file`到`:command`定义中，如下所示：

```
:command -nargs=1 -complete=file MyCommand echomsg <q-args> 
```

你不需要在命令行模式下拦截按键（你不应该，因为这会导致与其他插件的不良交互！）Vim 提供了其他默认完成（cp. `:help :command-complete`），甚至是 Vimscript 函数的自定义完成调用以确定完成候选者。

# javascript - 在谷歌地图中将中心点设置在右侧

> ID：12636070
> 
> 赞同：0
> 
> 时间：2012-09-28T08:08:51.467
> 
> 标签：javascript, google-maps

我正在开发一个带有谷歌地图的 web 应用程序，但我将 UI 放置在地图上，因此地图的中心部分位于 UI 下方。

是否可以将中心点设置在右侧，如下图所示？所以当我缩放时，它会放大地图的右半部分。

[图片](http://test.logistats.nl/static/images/stack_Q.png)

/编辑/

我找到了，遗憾的是大卫，你的代码对我不起作用。

但是我尝试了 panby 方法，它以这种方式对我有用，现在当我放大时它会向右平移。谢谢！

```
google.maps.event.addListener(map, 'zoom_changed', function() {
    setTimeout(moveMap, 10);
    });

    function moveMap() {
            map.panBy(300, 0);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:47:58.043

这可以使用 maps`panBy`方法实现，此示例将把地图切成两半，然后切成四分之一。新中心将位于地图容器的 3/4 标记处。开发此代码是为了允许地图容器扩大尺寸，但在地图以全尺寸加载但被切断时仍将用户标记居中。

您可以玩弄数字以使您的位置正确。

```
var map, // Your map object
    mapWidth = $('#map').css('width'); // Width of map container
    nCentre,
    cCentre,
    visibleWidth = 200; // Visible area in PX you want map to be centered in

// Make sure width is an Int
mapWidth = parseInt(mapWidth.replace(/px$/, ''), 10);

// Get the center of viewable area
cCentre = visibleWidth / 2;

// Create the new position variable
nCentre = cCentre - (mapWidth / 2);

// Pan the map to the centre of the visible area
if (nCentre !== 0) {
    map.panBy(nCentre, 0);
} 
```

对于您的要求，您可能不需要进行第二次计算，因为您实际上只需要计算出可见区域和地图容器的偏移量，然后根据偏移量平移到新中心。

# jquery - 通过 jquery ajax 调用将模型发送到对话框

> ID：12636071
> 
> 赞同：0
> 
> 时间：2012-09-28T08:08:51.203
> 
> 标签：jquery, asp.net-mvc-3, razor

我有这个编辑按钮：

```
 @Ajax.ActionLink(" ", "Edit", new { oid = item.memoOID }, new { id = "edit_" + item.memoOID }) 
```

我想从控制器操作“编辑”填充实体并将其发送到下面定义的对话框（我希望它替换新的 Domain.Model.memo() ：

```
<div id="memoAddDialog" title="New Memo" style="display: none">
    @Html.Partial("~/Views/Pat/newMemoDialog.cshtml", new Domain.Model.memo())
</div> 
```

使用此弹出窗口：

```
function OpenMemoDialog() {
        $("#memoAddDialog").dialog("open");
    }

    $("#memoAddDialog").dialog({
        autoOpen: false,
        height: 575,
        width: 900,
        dialogClass: "positioning24"
    }); 
```

我只是不知道如何将值传递给该部分视图并需要一些指针；谁能帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:50:51.970

试试这个

```
 //In View 
    @Ajax.ActionLink("AjaxLink", "Edit", new { oid = item.memoOID ,id = "edit_"+item.memoOID }, new AjaxOptions { UpdateTargetId = "memoAddDialog", HttpMethod = "Post",OnSuccess="Success" })

    <div id="memoAddDialog" title="New Memo" style="display: none">
    </div>

<script type="text/javascript">
function Success()
{
  //open your dialogbox here
   $("#memoAddDialog").dialog("open");
}

</script> 
```

在控制器中

```
[httpPost]
public ActionResult Edit(string oid , string id)
{
     //perform your functionality 

    return PartialView("~/Views/Patient/newMemoPatientDialog.cshtml", new Mavi.Domain.Model.memo());
} 
```

注意：在 Ajax.ActionLink 中，您必须提供**UpdateTargetId**，您的结果将出现在页面上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:20:29.713

我会做这样的事情：

```
<a href="OpenMemoDialog('@(Url.Action("Edit", new oid = item.memoOID)')" /> 
```

与 OpenMemoDialog 为：

```
function OpenMemoDialog(url) {
        $("#memoAddDialog").dialog("open");
        $("#memoAddDialog").load(url);
    } 
```

memoAddDialog 只是一个空的 div 并且您的 Edit 操作应该返回部分视图。

# android - Android onCreate() 设备旋转时调用了两次方法。(ICS)

> ID：12636075
> 
> 赞同：3
> 
> 时间：2012-09-28T08:09:05.603
> 
> 标签：android

我正在开发一个 android 平板电脑应用程序，我必须管理应用程序方向。我遇到一个问题，每次旋转设备时都会调用 onCreate()。

我通过在活动标签的 Manifest.xml 文件中设置这一行来解决 Honeycomb (3.1) 上的这个问题，它运行良好。

```
 android:configChanges="keyboardHidden|orientation" 
```

但是当我在 ICS 平板电脑上测试我的应用程序时，这个问题又出现了。有谁知道如何解决这个问题？

谢谢

问候。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T08:31:17.167

如果您的目标是`API level > 13`您必须添加`screenSize`文档中报告的标志：

```
 android:configChanges="keyboardHidden|orientation|screenSize" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T08:12:10.883

`onCreate()`将始终被调用，因为当方向更改时，始终会重新创建 Activity。没有什么不妥。您应该为此实施适当的行为，或者通过添加orientation=horizo​​ntal来禁用更改方向的可能性，例如

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T07:29:32.523

**注意：**从 Android 3.2（API 级别 13）开始，当设备在纵向和横向之间切换时，“屏幕尺寸”也会发生变化。因此，如果您想在为 API 级别 13 或更高级别（由 minSdkVersion 和 targetSdkVersion 属性声明）开发时防止由于方向更改而导致运行时重新启动，则除了“orientation”值之外，还必须包含“screenSize”值。也就是说，您必须声明**android:configChanges="orientation|screenSize** "。但是，如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。

参考：[https ://developer.android.com/guide/topics/resources/runtime-changes.html](https://developer.android.com/guide/topics/resources/runtime-changes.html)

# java - 设置方法和递增

> ID：12636079
> 
> 赞同：0
> 
> 时间：2012-09-28T08:09:23.503
> 
> 标签：java

设置新部分时，我需要跟踪计数器。例如，如果 m1 是黄铜并且我使用 setSection(Strings); 我希望它是 Brass-- 和 Strings++ 但我不确定如何使用 if statments 并且我不确定 getSection()toString() 是否可以让我获得原始部分

```
/**This function sets a musician's Orchestra Section. 
 @param section  is a SymphonySection indicating the musician's Orchestra Section.*/

 public void setSection(SymphonySection section) {
    this.section = section;

    if (getSection().toString().equals( "Strings" )){
        Strings--;
    }
    else if (getSection().toString().equals( "Brass" )){
        Brass--;
    }
    else if (getSection().toString().equals( "Conductor" )){
        Conductor--;
    }
    else if (getSection().toString().equals( "Percussion" )){
        Percussion--;
    }
    else if (getSection().toString().equals( "WoodWinds" )){
        WoodWinds--;
    }

    if (section.toString().equals( "Strings" )){
        Strings++;
    }
    else if (section.toString().equals( "Brass" )){
        Brass ++;
    }
    else if (section.toString().equals( "Conductor" )){
        Conductor ++;
    }
    else if (section.toString().equals( "Percussion" )){
        Percussion ++;
    }
    else if (section.toString().equals( "WoodWinds" )){
        WoodWinds ++;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:10:51.253

1.  您的`SymphonySection`类是否有一个`toString`返回部分名称的方法？如果不是，您需要实现它以便它返回部分名称，例如黄铜、字符串等。在此处查看[如何](https://stackoverflow.com/questions/3615721/how-to-use-the-tostring-method-in-java)在`SymphonySection`类中实现
2.  我建议使用 switch （从 Java 7 开始支持字符串）语句来整理东西，或者按照 Peter Lawrey 的建议使用地图
3.  请在[此处](http://java.about.com/od/javasyntax/a/nameconventions.htm)查看 Java 命名约定，以使您的代码更具可读性。在上述情况下，我猜`Strings`,`Brass`等是类型变量，`SymphonySection`因此应该有小写的第一个字符，例如`strings`,`brass`等`WoodWinds`，这将`woodWinds`遵循传统的驼峰编码风格。

希望这可以帮助。

海登

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:13:25.260

我会为每个部分使用计数图。

```
private final Map<SymphonySection, Integer> count = new HashMap<>();
public void setSection(SymphonySection section) {
    if(section == this.section) return;

    count.put(this.section, count.get(this.section)-1);
    Integer prevCount = count.get(section)
    count.put(section, prevCount == null ? 1 : (prevCount+1));

    this.section = section;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:48:59.880

**-**如果你有`Java 7`，并且你想使用基础知识，那么请使用`switch`.

**-** Java 7`String`支持`switch cases`.

# iphone - 在 iPhone 中使用两倍于首选尺寸的应用程序图标是一种好习惯吗？

> ID：12636081
> 
> 赞同：0
> 
> 时间：2012-09-28T08:09:30.740
> 
> 标签：iphone

我正在使用 iPhone 应用程序，现在 appicon 的标准尺寸是`57x57`，但是当我以这种尺寸导出应用程序图标时，应用程序图标看起来像素化。

所以我尝试`114x114`为 appicon.png 图像使用大小，现在像素化问题已修复。

**在 iPhone 中使用两倍于首选尺寸的应用程序图标是一种好习惯吗？**

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:35:23.440

[Apple 的指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)显示了您应该使用的所有应用程序图标大小

你应该有一个 114x114 的 iPhone 视网膜屏幕和 144x144 的视网膜 iPad。57x57 适用于非视网膜 iPhone/iPod

# javascript - 如何捕获 html 中的输入键并重定向到 asp 页面？

> ID：12636082
> 
> 赞同：1
> 
> 时间：2012-09-28T08:09:34.417
> 
> 标签：javascript, html

在我的纯 HTML 页面中，我有一个文本框供用户输入关键字，然后重定向到 asp 页面。当用户单击提交按钮时，我使用 javascript 来捕获关键字。

但是当用户按下回车时，HTML 页面将重新加载并返回错误页面。我如何捕获输入键事件？这样它就会重定向到asp页面。谢谢

我的javascript代码如下：

```
function searching() {            
            var keywordsStr = document.getElementById('keywords').value;
            var cmd = "http://xxx/SearchEngine/Searching.aspx?keywords=" + encodeURI(keywordsStr) ;
            window.open(cmd);
        } 
```

我的html代码如下：

```
 <form name="form1" method="post" action="" >
     <input name="keywords" type="text" id="keywords" size="50" >
     <input type="submit" name="btn_search" id="btn_search" value="Search" onClick="javascript:searching(); return false;">
     <input type="reset" name="btn_reset" id="btn_reset" value="Reset">
   </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:15:28.423

如果您愿意使用`jquery`,

你可以做类似的事情，

```
$("#keywords").keyup(function(e){
   if(e.keyCode == '13')
   {
       //enter key
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:20:50.900

为什么不在新窗口中打开表单的结果？
我更喜欢使用帖子：

```
<form action="http://xxx/SearchEngine/Searching.aspx" method="post" target="_blank"> 
```

但是您可以使用 get 调用，就像您在代码段中所做的那样

```
<form action="http://xxx/SearchEngine/Searching.aspx" method="get" target="_blank"> 
```

如果您**真的**想检测回车键 .. 在您的情况下，我建议您对整个页面使用 onkeydown 事件，以防止触发与回车键关联的事件（例如提交您的表单），方法是：

```
document.onkeydown = checkKeycode
function checkKeycode(e) 
{
    var keycode;
    if (window.event) keycode = window.event.keyCode;
    else if (e) keycode = e.which;
    // alert("keycode: " + keycode);
    if (keycode == 13)
    {
        alert('enter key is pressed: now do something');
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:23:06.440

您的“动作”属性为空，这意味着 HTML 页面将发布到自身（基本上是重新加载）。您需要将 ASP 页面的 URL 放在那里才能发布数据。

```
 <form name="form1" method="get" action="http://xxx/SearchEngine/Searching.aspx">
     <input name="keywords" type="text" size="50" >
     <input type="submit" name="btn_search" value="Search">
     <input type="reset" name="btn_reset" value="Reset">
 </form> 
```

并且您可能希望将方法更改`method="get"`为模仿您的 javascript 函数。如果您希望提交创建一个新窗口，您可以在表单中添加一个目标属性：

```
target="_blank" 
```

# c# - 使用某些级别数据计算切片范围

> ID：12636084
> 
> 赞同：0
> 
> 时间：2012-09-28T08:09:42.373
> 
> 标签：c#, geolocation, gis, geocoding, gdal

我有一些看起来像这样的数据：

```
<?xml version="1.0" encoding="utf-8"?>
<levels>
  <level nr="0" tileWidth="512" tileHeight="512" envSizeX="5000" envSizeY="5000" minX="465000" maxX="470000" minY="105000" maxY="110000" scaleFactor="1" tilesCountX="10" tilesCountY="10" />
  <level nr="1" tileWidth="512" tileHeight="512" envSizeX="4613" envSizeY="4613" minX="465000" maxX="469999" minY="105001" maxY="110000" scaleFactor="1.0837333333333332" tilesCountX="10" tilesCountY="10" />
  <level nr="2" tileWidth="512" tileHeight="512" envSizeX="2286" envSizeY="2286" minX="465000" maxX="469955" minY="105045" maxY="110000" scaleFactor="2.1674666666666664" tilesCountX="5" tilesCountY="5" />
  <level nr="3" tileWidth="512" tileHeight="512" envSizeX="1134" envSizeY="1134" minX="465000" maxX="469915" minY="105085" maxY="110000" scaleFactor="4.3349333333333329" tilesCountX="3" tilesCountY="3" />
  <level nr="4" tileWidth="512" tileHeight="512" envSizeX="563" envSizeY="563" minX="465000" maxX="469879" minY="105121" maxY="110000" scaleFactor="8.6698666666666657" tilesCountX="2" tilesCountY="2" />
  <level nr="5" tileWidth="512" tileHeight="512" envSizeX="275" envSizeY="275" minX="465000" maxX="469777" minY="105223" maxY="110000" scaleFactor="17.339733333333331" tilesCountX="1" tilesCountY="1" />
  <level nr="6" tileWidth="512" tileHeight="512" envSizeX="134" envSizeY="134" minX="465000" maxX="469658" minY="105342" maxY="110000" scaleFactor="34.679466666666663" tilesCountX="1" tilesCountY="1" />
  <level nr="7" tileWidth="512" tileHeight="512" envSizeX="67" envSizeY="67" minX="465000" maxX="469623" minY="105377" maxY="110000" scaleFactor="69.358933333333326" tilesCountX="1" tilesCountY="1" />
  <level nr="8" tileWidth="512" tileHeight="512" envSizeX="33" envSizeY="33" minX="465000" maxX="469554" minY="105446" maxY="110000" scaleFactor="138.71786666666665" tilesCountX="1" tilesCountY="1" />
  <level nr="9" tileWidth="512" tileHeight="512" envSizeX="16" envSizeY="16" minX="465000" maxX="469432" minY="105568" maxY="110000" scaleFactor="277.4357333333333" tilesCountX="1" tilesCountY="1" />
  <level nr="10" tileWidth="512" tileHeight="512" envSizeX="8" envSizeY="8" minX="465000" maxX="469432" minY="105568" maxY="110000" scaleFactor="554.87146666666661" tilesCountX="1" tilesCountY="1" />
</levels> 
```

我必须使用这些数据来指定图块的范围（`minX`、、、、`maxX`）。我编写了一个获取关卡并计算其瓦片的方法。然后它获取瓦片并选择属于视口区域的瓦片。`minY``maxY`

我认为一切正常，但我注意到数据之间的差异（当我比较文件`GdalInfo`元数据中的数据`TIFF`和我的计数值时，会有一些差异......

**例如**
`GDAL_INFO = 465000, 465554.871466667, 109445.128533333, 110000`
`MY_EXTENTS = (465000, 465499.9, 105001, 105500.9)`

这是我的方法：

```
public static IEnumerable<Envelope> GetTiles(string xmlFileName, int level, Rect viewportData, bool debug = false)
{
    // viewport data
    double x = viewportData.X, y = viewportData.Y;
    double width = viewportData.Width, height = viewportData.Height;

    // load level data
    XDocument doc = XDocument.Load(xmlFileName);
    if (doc == null)
    {
        throw new FileNotFoundException("File '" + xmlFileName + "' not found.");
    }

    XElement levelData =
        doc.Element("levels")
            .Descendants()
            .First(element => int.Parse(element.Attribute("nr").Value) == level);

    double minX = double.Parse(levelData.Attribute("minX").Value);
    double maxX = double.Parse(levelData.Attribute("maxX").Value);
    double minY = double.Parse(levelData.Attribute("minY").Value);
    double maxY = double.Parse(levelData.Attribute("maxY").Value);

    int tilesCountX = int.Parse(levelData.Attribute("tilesCountX").Value);
    int tilesCountY = int.Parse(levelData.Attribute("tilesCountY").Value);

    Envelope[][] extents = new Envelope[tilesCountX][];

    Envelope bounds = new Envelope();
    bounds.MinX = 0;
    bounds.MaxX = 0;
    bounds.MinY = 0;
    bounds.MaxY = 0;
    for (int i = 0; i < extents.Length; i++)
    {
        extents[i] = new Envelope[tilesCountY];
        for (int j = 0; j < extents[i].Length; j++)
        {
            // count extents for pieces
            double tileGeoWidth = (maxX - minX)/(double) tilesCountX;
            double tileGeoHeight = (maxY - minY)/(double) tilesCountY;
            double offsetX = (double) j*tileGeoWidth;
            double offsetY = (double) i*tileGeoHeight;

            extents[i][j] = new Envelope();
            extents[i][j].MinX = minX + offsetX;
            extents[i][j].MaxX = minX + tileGeoWidth + offsetX; // poprawic dla ostatnich (niewymiarowych) tilesow
            extents[i][j].MinY = minY + offsetY;
            extents[i][j].MaxY = minY + tileGeoHeight + offsetY;

            // check if a piece matches to the viewport
            // 1\. find geo-bounds
            if (offsetX <= x)
                bounds.MinX = offsetX;
            if (offsetX <= x + width)
                bounds.MaxX = offsetX;
            if (offsetY <= y)
                bounds.MinY = offsetY;
            if (offsetY <= y + height)
                bounds.MaxY = offsetY;
        }
    }

    // 2\. increase "max" bounds (+ width/height)
    bounds.MaxX += width;
    bounds.MaxY += height;

    var intersectedTiles =
        extents
        .SelectMany(es => es)
        .Where(e => EnvIntersects(e, bounds))
        .ToList();

    if (debug)
    {
        Console.WriteLine("GLOBAL_EXTENT = {0}, {1}, {2}, {3}", minX, maxX, minY, maxY);
        Console.WriteLine("TILES_COUNT = {0}/{1}", tilesCountX, tilesCountY);
        for (int i = 0; i < extents.LongLength; i++)
        {
            for (int j = 0; j < extents.Length; j++)
            {
                Console.WriteLine("EXTENTS = ({0}, {1}, {2}, {3})", extents[i][j].MinX, extents[i][j].MaxX, extents[i][j].MinY, extents[i][j].MaxY);
            }
        }
        foreach (Envelope intersectedTile in intersectedTiles)
        {
            Console.WriteLine("INTERSECTION = ({0}, {1}, {2}, {3})", intersectedTile.MinX, intersectedTile.MaxX,
                              intersectedTile.MinY, intersectedTile.MaxY);
        }
    }

    return intersectedTiles;
} 
```

还有一个示例调用：

```
Rect viewportData = new Rect(100000, 200000, 70000, 50000); 
GdalRetile.GetTiles(@"D:\#PYRAMID\su60ne.xml", 1, viewportData, true); 
```

谁能帮我更正这段代码？
提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:32:58.647

好的。我自己做的......再次xDDD也许该代码将来对some1有用:)

```
public static IEnumerable<Envelope> GetTiles(string xmlFileName, int level, Rect viewportData, bool debug = false)
{
    // viewport data
    double x = viewportData.X, y = viewportData.Y;
    double width = viewportData.Width, height = viewportData.Height;

    // load level data
    XDocument doc = XDocument.Load(xmlFileName);
    if (doc == null)
    {
        throw new FileNotFoundException("File '" + xmlFileName + "' not found.");
    }

    XElement levelData =
        doc.Element("levels")
            .Descendants()
            .First(element => int.Parse(element.Attribute("nr").Value) == level);

    double minX = double.Parse(levelData.Attribute("minX").Value);
    double maxX = double.Parse(levelData.Attribute("maxX").Value);
    double minY = double.Parse(levelData.Attribute("minY").Value);
    double maxY = double.Parse(levelData.Attribute("maxY").Value);

    int tilesCountX = int.Parse(levelData.Attribute("tilesCountX").Value);
    int tilesCountY = int.Parse(levelData.Attribute("tilesCountY").Value);

    double scaleFactor = double.Parse(levelData.Attribute("scaleFactor").Value);
    double rasterXSize = double.Parse(levelData.Attribute("rasterXSize").Value);
    double rasterYSize = double.Parse(levelData.Attribute("rasterYSize").Value);
    double lastTileXSize = double.Parse(levelData.Attribute("lastTileXSize").Value);
    double lastTileYSize = double.Parse(levelData.Attribute("lastTileYSize").Value);

    Envelope[][] extents = new Envelope[tilesCountX][];

    Envelope bounds = new Envelope();
    bounds.MinX = 0;
    bounds.MaxX = 0;
    bounds.MinY = 0;
    bounds.MaxY = 0;

    double tileGeoWidth = rasterXSize * scaleFactor;
    double tileGeoHeight = rasterYSize * scaleFactor;
    for (int i = 0; i < extents.Length; i++)
    {
        double offsetY = (double) i*tileGeoHeight;
        extents[i] = new Envelope[tilesCountY];
        for (int j = 0; j < extents[i].Length; j++)
        {
            // count extents for pieces
            double offsetX = (double) j*tileGeoWidth;

            extents[i][j] = new Envelope();
            extents[i][j].MinX = minX + offsetX;
            extents[i][j].MinY = minY + offsetY;
            extents[i][j].MaxX = minX + tileGeoWidth + offsetX;
            extents[i][j].MaxY = minY + tileGeoHeight + offsetY;

            // last tiles are cut
            if (j == extents[i].Length - 1)
            {
                extents[i][j].MaxX -= (rasterXSize - lastTileXSize);
                extents[i][j].MinY -= (rasterYSize - lastTileYSize);
            }

            // check if a piece matches to the viewport
            // 1\. find geo-bounds
            if (offsetX <= x)
                bounds.MinX = offsetX;
            if (offsetX <= x + width)
                bounds.MaxX = offsetX;
            if (offsetY <= y)
                bounds.MinY = offsetY;
            if (offsetY <= y + height)
                bounds.MaxY = offsetY;
        }
    }

    // 2\. increase "max" bounds (+ width/height)
    bounds.MaxX += width;
    bounds.MaxY += height;

    var intersectedTiles =
        extents
        .SelectMany(es => es)
        .Where(e => EnvIntersects(e, bounds))
        .ToList();

    if (debug)
    {
        Console.WriteLine("GLOBAL_EXTENT = {0}, {1}, {2}, {3}", minX, maxX, minY, maxY);
        Console.WriteLine("TILES_COUNT = {0}/{1}", tilesCountX, tilesCountY);
        for (int i = 0; i < extents.LongLength; i++)
        {
            for (int j = 0; j < extents.Length; j++)
            {
                Console.WriteLine("EXTENTS = ({0}, {1}, {2}, {3})", extents[i][j].MinX, extents[i][j].MaxX, extents[i][j].MinY, extents[i][j].MaxY);
            }
        }
        foreach (Envelope intersectedTile in intersectedTiles)
        {
            Console.WriteLine("INTERSECTION = ({0}, {1}, {2}, {3})", intersectedTile.MinX, intersectedTile.MaxX,
                              intersectedTile.MinY, intersectedTile.MaxY);
        }
    }

    return intersectedTiles;
} 
```

# asp.net - 涉及参数时如何在 ASP.NET 4.0 中指定 url 映射？

> ID：12636087
> 
> 赞同：1
> 
> 时间：2012-09-28T08:09:56.937
> 
> 标签：asp.net, web-config, url-routing, asp.net-4.0, url-mapping

## 问题

我有一个网站，里面有一些文章。使用在单个页面上写入结果的数据库访问文章。当要访问某篇文章时，我需要*文章ID*，我只需要访问页面：`http://www.mysite/Articles.aspx?a={article-id}`。

这很好，但不是很友好且不可扩展。我想要做的是将表单中的每个 url 重定向`http://www.mysite/articles/{article-id}`到 page `http://www.mysite/Articles.aspx?a={article-id}`。

我知道使用`Web.Config`我可以使用`urlMappings`设置，但不知道如何在那里插入正则表达式。

## 一些笔记

请考虑我想要一个简单的翻译工具。我不想编辑我现有的页面。这个解决方案应该对我的应用程序组件尽可能透明。

获得解决方案的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:14:37.170

我认为你应该使用：

1.  [**ASP.NET 路由**](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)

例如。：

```
protected void Application_Start(object sender, EventArgs e)
{
    RegisterRoutes(RouteTable.Routes);
}

public static void RegisterRoutes(RouteCollection routes)
{
    routes.MapPageRoute("Articles",
        "articles/{article-id}/",
        "~/Articles.aspx");
} 
```

& 在“Articles.aspx.cs”上，您可以使用以下方法获取“article-id”：

```
string article-id = Page.RouteData.Values["article-id"] as string; 
```

2.  使用[URL 重写模块](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module)

![在此处输入图像描述](../Images/b180b48153796a4c778b9088ea3c4ca4.png)

3.  **[urlrewriter.net](http://urlrewriter.net/)**

![在此处输入图像描述](../Images/3753972c6c26e45a06b6dca322db53eb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T04:39:24.827

**详细信息：**您是否可以使用

[http://www.mysite/Articles?a=](http://www.mysite/Articles?a=) {article-id}

如果可以，Microsoft 友好网址对您有好处。您不需要更改任何现有功能，只需添加包，然后在 Global.asax 文件中添加一行。此外，您的所有其他网址都是干净的（即[http://www.mysite/Articles](http://www.mysite/Articles)，[http://www.mysite/About](http://www.mysite/About)）。它适用于网站/表单，但不适用于网页（即 Web Matrix）

**解决方案：**

1.  在解决方案资源管理器中，右键单击您的网站并选择“管理 Nuget 包..”
2.  按“仅稳定版”下拉菜单并选择“包括预发行版”（它在预发行版中）
3.  在搜索框中输入“Microsoft.AspNet.FriendlyUrls”
4.  选择“安装”
5.  添加一个全局应用程序类“Global.asax”
6.  在 Application_Start 方法中添加以下行

    RouteConfig.RegisterRoutes(System.Web.Routing.RouteTable.Routes);

7.  您现在将拥有 FriendlyURL

**注意：**如果您使用的是网站，则需要删除以下文件才能正常工作（它可以与 Web 表单一起正常工作。一旦它成为稳定版本，我相信您不需要删除这些文件）

*   Site.Mobile.Master
*   Site.Mobile.Master.designer.cs
*   ViewSwitcher.ascx
*   ViewSwitcher.ascx.designer.cs

**更多信息的链接：**

[有关 Microsoft 的友好 URL 包的信息](http://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx)

# c# - 将wireshark添加到我的代码中，而不是安装在机器上

> ID：12636091
> 
> 赞同：0
> 
> 时间：2012-09-28T08:10:15.273
> 
> 标签：c#, wireshark

我已经构建了一个处理 Wireshark 文件（pcap 文件）的应用程序，并且为了显示统计信息，使用了 Wireshark exe 文件（capinfos、tshark 等）。我的问题是“是否有任何选项可以将 Wireshark 添加到我的代码中而不是安装 Wireshark机器？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:36:49.097

有[Pcap.Net](http://pcapdotnet.codeplex.com/)，如果我没记错的话，可以让你访问 pcap 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:29:42.287

您可以在 GPL 上下文中使用 Wireshark 源代码，在[此处](http://www.wireshark.org/download/docs/developer-guide-us.pdf)查看编译说明和许可信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:36:28.463

我认为这是不可能的。因为据我所知，没有便携式版本的wireshark。Wireshark 在相当低的水平上工作。但由于它是开源的，所以必须有可用的源代码。因此您可以在代码中使用该代码。但这也应该那么容易。

# python - lxml解析url＆符号问题

> ID：12636092
> 
> 赞同：0
> 
> 时间：2012-09-28T08:10:21.503
> 
> 标签：python, lxml

我有一个看起来像这样的网址：

```
url = 'http://localhost:8080/?q=abc%26def&other_params=here' 
```

在浏览器中访问此 url 将返回一个 xml。

我正在尝试通过 lxml 解析该 url 的响应：

```
tree = etree.parse(url) 
```

这里的问题是 etree 对百分比字符进行编码，而 url 将是

```
url = 'http://localhost:8080/?q=abc%2526def&other_params=here' 
```

如果我不对我的 q 参数的值进行编码，整个 url 就会变得混乱：

```
url = 'http://localhost:8080/?q=abc&def&other_params=here' 
```

有什么方法可以告诉 lxml 在发送请求之前不要编码该 url 中的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:13:52.383

我会说这是 lxml 的 URL 处理中的一个错误，您应该检查[lxml 跟踪器](https://launchpad.net/lxml/)中的现有报告，如果还没有，请报告它。

现在的解决方法是使用`urllib2`来检索您的 URL：

```
import urllib2

resp = urllib2.urlopen(url)
tree = etree.parse(resp) 
```

# java - 私有字段的垃圾收集

> ID：12636094
> 
> 赞同：7
> 
> 时间：2012-09-28T08:10:25.977
> 
> 标签：java, garbage-collection

给定下面的代码。

```
class A {
    private B b;
    public A() {
        b = new B();
    }
}

class Main {
    public static void main(String[] args) {
        A a = new A(); // two objects are created (a and b)
        // <-- is B object, referenced only by private a.b eligible for garbage collection?
        keepAlive(a);
    }
} 
```

A对象创建后B对象可以被垃圾回收吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T08:17:22.587

我认为不可以，因为仍然可以通过反射（使用`setAccessible(true)`）访问该字段。

从理论上讲，编译器可以证明该字段永远不会被访问，并且可以`B`进行垃圾回收（来自[JLS 12.6.1 实现终结](http://docs.oracle.com/javase/specs/jls/se5.0/html/execution.html#12.6.1)）：

> 可达对象是可以从任何活动线程的任何潜在持续计算中访问的任何对象。可以设计优化程序的转换，将可到达的对象的数量减少到比那些天真地认为是可到达的要少。例如，编译器或代码生成器可能会选择将不再使用的变量或参数设置为 null，以使此类对象的存储空间可能更快地被回收。

但我认为实际上编译器和 JVM 并不那么聪明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:19:45.457

@Kuba您的意思是：类实例`B`字段中的类`b`实例可以被垃圾收集吗？不，不是 while不是由引用的。`a``A``a``null``b``a`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T08:20:15.987

不，因为主线程有一条路径`b`through `a`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T08:27:00.773

标准编译器并不那么聪明。

```
class A
{
    private Object[] array;

    public A()
    {
        array = new Object[10000000];
    }
}

public static void main(String[] args)
{
    LinkedList<A> list = new LinkedList<A>();
    while (true)
    {
        list.add(new A());
    }
} 
```

这段代码在极少数循环后抛出内存不足异常，所以原问题的答案肯定是否定的。

# erp - 云上的 erp 是如何工作的？

> ID：12636095
> 
> 赞同：0
> 
> 时间：2012-09-28T08:10:25.560
> 
> 标签：erp

任何人都可以简单地告诉我 erp 如何在云上工作？还想知道可以提供erp解决方案的厂商名单吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:16:55.750

这是一个普遍的答案，可能不适用于所有供应商。

传统的 ERP 系统将有一个驻留在现场服务器上的数据库。每个用户都将在他们的计算机上安装一个与该数据库通信的客户端程序。云 ERP 系统很可能在远程数据中心有一个数据库。将有一个网络服务器运行一个提供 erp 功能的网站。最终用户将使用网络浏览器访问 erp 网站。与电子邮件应用程序的类比是 Outlook 与 gmail。

云系统的优势

*   无需为服务器或数据库许可付费
*   （可能）不需要担心数据备份
*   软件更新集中在网络服务器上。

缺点

*   互联网连接速度可能会成为瓶颈。如果您运行大量报告或拥有大量用户，ERP 系统会产生大量网络流量。您将需要检查您当前的连接是否可以处理它。
*   考虑一下如果您停止支付维护费用会发生什么。您可能无法访问您的数据。使用传统的 ERP，您仍将拥有数据库，并且可能无需进一步更新即可使用该软件。

不幸的是，我没有基于云的系统的供应商列表。

# javascript - 来自 Google 页面的脚本标记中的不熟悉字符...不太清楚该怎么称呼它

> ID：12636096
> 
> 赞同：0
> 
> 时间：2012-09-28T08:10:26.043
> 
> 标签：javascript, src

我正在观看 Google 的“发送的故事”，动画让我着迷，所以我查看了生成的代码（在 Firefox 中）接近头部的末尾（大约第 15 行）我注意到了这一点：

```
<script async="" src="https://apis.google.com/_/apps-static/_/js/gapi/plusone/rt=j/ver=toCY55Mwojo.en./sv=1/am=%21wIVbqfszG0CYZd2EOQ/d=1/rs=AItRSTPQF97pO4HWCKrkiNkssFYE0VuEnw/cb=gapi.loaded_0"></script> 
```

URL 中一些斜线之间的下划线是什么？

我以前从未见过，所以我什至不知道该怎么称呼它。

来自： [http ://www.google.com/green/storyofsend/desktop/#/smart-heat](http://www.google.com/green/storyofsend/desktop/#/smart-heat)

此外，这是使用（或在这种情况下不使用）“异步”属性的正确方法吗？

我刚刚在脚本标签中添加了“异步”，但我是一个 JS 菜鸟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:14:14.023

> URL 中一些斜线之间的下划线是什么？

它们是下划线。他们绝对没有什么特别之处。`a`如果他们愿意，谷歌本可以在那里使用。

> 此外，这是使用（或在这种情况下不使用）“异步”属性的正确方法吗？

不，它是一个布尔属性。

```
<script async> 
```

或者

```
<script async="async"> 
```

# extjs - extjs：一段时间后加载屏幕图标不旋转

> ID：12636099
> 
> 赞同：0
> 
> 时间：2012-09-28T08:10:39.673
> 
> 标签：extjs

我已经在我的应用程序中应用了加载图标，它在某些地方工作正常。但是，当网格中正在加载大量数据时，加载图标会在一段时间后出现旋转一段时间，旋转停止并且图标挂起，但正在获取记录。

一段时间后网格刷新。

如何解决此问题，以便继续旋转直到数据完全加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:57:32.267

问题不在 ExtJS 库中。问题出在浏览器中。

当浏览器进程`huge data`它需要大量的系统资源。所以浏览器降低了GIF图像动画渲染的优先级，提高了数据处理的优先级。

[您可以在ExtJS DOCS](http://docs.sencha.com/ext-js/4-1/)中看到这种行为。只需尝试在文档中打开 > 10 个选项卡。遍历 docs 选项卡会显示 LoadMask GIF 图像，它有时会停止旋转。（在 Mozilla Firefox 中尝试过）。

# wcf - 无法连接到 silverlight 应用程序中的 wcf 服务

> ID：12636100
> 
> 赞同：1
> 
> 时间：2012-09-28T08:10:39.730
> 
> 标签：wcf, silverlight

(已解决)[提醒] 遇到同样问题的朋友：如果您将clientaccesspolicy.xml和crossdomain.xml放在正确的文件夹中时收到相同的错误消息，请检查您是否接受了自签名服务端的证书。

接受证书：在浏览器中输入服务的url，浏览器会询问你是否信任它。还有一个安装证书的选项，并且不会从该站点收到有关证书的更多警告。

[原始问题] 我的 silverlight 应用程序无法连接到 wcf 服务。抛出异常。

```
System.Reflection.TargetInvocationException: An exception occurred during the operation, making the result invalid.  Check InnerException for exception details. ---> System.ServiceModel.CommunicationException: An error occurred while trying to make a request to URI 'http://fyp-pc13:97/HelloWorldService/HelloWorld.svc'. This could be due to attempting to access a service in a cross-domain way without a proper cross-domain policy in place, or a policy that is unsuitable for SOAP services. You may need to contact the owner of the service to publish a cross-domain policy file and to ensure it allows SOAP-related HTTP headers to be sent. This error may also be caused by using internal types in the web service proxy without using the InternalsVisibleToAttribute attribute. Please see the inner exception for more details. ---> System.Security.SecurityException ---> System.Security.SecurityException: Security error.
   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)
   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClassa.<EndGetResponse>b__9(Object sendState)
   at System.Net.Browser.AsyncHelper.<>c__DisplayClass4.<BeginOnUI>b__1(Object sendState)
   --- End of inner exception stack trace ---
   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.ClientBase`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result)
   at SilverlightApplication1.ServiceReference1.HelloServiceClient.HelloServiceClientChannel.EndHello(IAsyncResult result)
   at SilverlightApplication1.ServiceReference1.HelloServiceClient.SilverlightApplication1.ServiceReference1.IHelloService.EndHello(IAsyncResult result)
   at SilverlightApplication1.ServiceReference1.HelloServiceClient.OnEndHello(IAsyncResult result)
   at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()
   at SilverlightApplication1.ServiceReference1.HelloCompletedEventArgs.get_Result()
   at SilverlightApplication1.MainPage.ialert(Object sender, HelloCompletedEventArgs msg) 
```

该服务在控制台应用程序中运行良好。所以我想这是我的 silverlight 应用程序配置的问题。

网页配置

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>

      <basicHttpBinding>
        <binding name="BasicHttpBinding_IHelloService" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None" />
        </binding>
      </basicHttpBinding>

    </bindings>

    <services>
      <service name="WcfService1.HelloWorld">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IHelloService" contract="WcfService1.IHelloService" name="BasicHttpBinding_IHelloService" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="false" />

  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

ServiceReferences.ClientConfig：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IHelloService" maxBufferSize="2147483647"
                    maxReceivedMessageSize="2147483647">
                    <security mode="None" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://fyp-pc13:97/HelloWorldService/HelloWorld.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IHelloService"
                contract="ServiceReference1.IHelloService" name="BasicHttpBinding_IHelloService" />
        </client>
    </system.serviceModel>
</configuration> 
```

有人可以帮我解决这个问题吗？我一直坚持配置文件好几天了。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:14:05.417

这可能是由于 Silverlight 中的安全原因，您的异常文本提供了这个方向的线索：“ *[...]可能是由于在没有适当的跨域策略的情况下尝试以跨域方式访问服务，[...]* “

> 将**clientaccesspolicy.xml**文件放置在托管服务的域的根目录中，以将服务配置为允许跨域访问。

如果您使用的是 IIS，这可能是`\inetpub\wwwroot\`文件夹，但这可能因您的配置而异。

这是一个纯文本 XML 文件，包含以下几行（可能会根据您的需要进行调整）：

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="SOAPAction">
        <domain uri="*"/>
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

此处的更多信息：[使服务跨域边界可用](http://msdn.microsoft.com/en-us/library/cc197955%28v=vs.95%29.aspx)

[编辑]

如果这不起作用，还请尝试将**crossdomain.xml**文件放入 Web 服务。

> 将有效的**crossdomain.xml**文件放在托管服务的域的根目录中。该文件必须将整个域标记为公共。

这包含以下几行：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <allow-http-request-headers-from domain="*" headers="SOAPAction,Content-Type"/>
</cross-domain-policy> 
```

# android - 如何设置 PopupMenu 样式？

> ID：12636101
> 
> 赞同：49
> 
> 时间：2012-09-28T08:10:39.203
> 
> 标签：android, user-interface

是否可以将弹出菜单样式从白色背景上的默认黑色文本更改为深色背景，而无需将样式应用于整个活动（这会破坏我的 UI）？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2018-01-09T03:25:10.707

是的你可以

```
<style name="YOURSTYLE.PopupMenu" parent="Widget.AppCompat.PopupMenu">
    <item name="android:textColor">@android:color/white</item>
    <item name="android:itemBackground">@android:color/holo_red_light</item>
</style> 
```

和

```
Context wrapper = new ContextThemeWrapper(this, R.style.YOURSTYLE_PopupMenu);
PopupMenu popup = new PopupMenu(wrapper, view); 
```

* * *

**结果**

[![Android中的自定义PopupMenu样式](../Images/69a73f7e8e7aea989a1b68660a4220c2.png)](https://i.stack.imgur.com/wxZ3q.png)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-01-11T21:00:33.717

您不能`PopupMenu`直接设置样式，但还有其他方法。

`PopupMenu`通过以下方式创建：

```
PopupMenu popupMenu=new PopupMenu(context, anchorView); 
```

菜单的样式由您传递的上下文的样式决定。因此，您需要做的就是将您的`Activity`引用作为上下文传递，并且菜单将被相应地设置样式。

如果您想自己定义样式，请从默认样式之一继承您的活动样式并覆盖以下项目：

```
<style name="style" parent="android:Theme.Holo.Light">
    <item name="android:popupMenuStyle">...</item>
    <item name="android:popupAnimationStyle">...</item>
    <item name="android:popupBackground">...</item>
    <!-- etc etc -->
</style> 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-12-22T14:57:20.850

除了[Deville](https://stackoverflow.com/users/1318939/deville)建议的内容之外，您还可以将以下属性添加到您的主题样式中。

```
<style name="style" parent="android:Theme.Holo.Light">        
    <!-- other attributes -->
    <item name="textAppearanceLargePopupMenu">@style/myPopupMenuTextAppearanceLarge</item>
    <item name="android:textAppearanceLargePopupMenu">@style/myPopupMenuTextAppearanceLarge</item>

    <item name="textAppearanceSmallPopupMenu">@style/myPopupMenuTextAppearanceSmall</item>
    <item name="android:textAppearanceSmallPopupMenu">@style/myPopupMenuTextAppearanceSmall</item>

    <item name="popupMenuStyle">@style/myPopupMenuStyle</item>
    <item name="android:popupMenuStyle">@style/myPopupMenuStyle</item>
</style> 
```

上述样式定义中引用的其他样式

```
<style name="myPopupMenuStyle" parent="@style/Widget.AppCompat.Light.PopupMenu">

</style>
<style name="myPopupMenuTextAppearanceSmall" parent="@style/TextAppearance.AppCompat.Light.Widget.PopupMenu.Small">
    <item name="android:textColor">#000000</item>
</style>
<style name="myPopupMenuTextAppearanceLarge" parent="@style/TextAppearance.AppCompat.Light.Widget.PopupMenu.Large">
    <item name="android:textColor">#000000</item>
</style> 
```

您会在我的 xml 样式定义中注意到**AppCompat**，这是因为我正在使用 android 支持库来定位较低的 android API 级别。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-12-06T05:43:45.583

使用相同的上下文`ActionBar`来创建`PopupMenu`

***actionBar.getThemedContext()***

所以，

```
ActionBar actionBar = ((ActionBarActivity) getActivity()).getSupportActionBar();
PopupMenu popMenu = new PopupMenu(actionBar.getThemedContext(), someView); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-19T06:26:30.793

我的弹出菜单样式与其他样式略有不同。

所以，我创造了一种风格

```
<style name="AppTheme.PopupMenu" parent="Widget.AppCompat.PopupMenu">
    <item name="android:textColor">@color/textContrast</item>
    <item name="android:textColorSecondary">@color/text</item>
</style> 
```

我正在使用工具栏

```
Toolbar toolbar = findViewById(R.id.toolbar);
setSupportActionBar(toolbar); 
```

并设置这样的弹出样式

```
toolbar.setPopupTheme(R.style.AppTheme_PopupMenu); 
```

# java - 如何在 Java 中查找字符串模式

> ID：12636102
> 
> 赞同：7
> 
> 时间：2012-09-28T08:10:40.787
> 
> 标签：java, regex, string

这是Java中这样的字符串。

```
String string="abc$[A]$def$[B]$ghi"; 
```

我想搜索位于`$[*]$`模式中的单词。上面字符串的结果是`A`, `B`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T08:18:38.877

```
 String s = "abc$[A]$def$[B]$ghi";
    Pattern p = Pattern.compile("\\$\\[.*?\\]\\$");
    Matcher m = p.matcher(s);
    while(m.find()){
        String b =  m.group();
        System.out.println(">> " +b.substring(2, b.length()-2));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:13:21.560

使用正则表达式。在 Java 中，您可以使用[Pattern 类](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:13:43.257

您可以为此使用正则表达式。看看[Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)和[Matcher](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)类。

在这种情况下，您将使用的正则表达式是：

```
\$\[.*?\]\$ 
```

或者，您可以使用[String.indexOf](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String,%20int%29)和[String.substr](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)。

# service - TeamCity：工件设置中的参数，无法从服务消息中更改

> ID：12636107
> 
> 赞同：4
> 
> 时间：2012-09-28T08:10:53.940
> 
> 标签：service, parameters, teamcity, message, artifact

我在 TeamCity 中有一个构建配置，它创建了一个压缩的工件。工件包含`%build.number%`zipfile 名称中的参数。

我想通过服务消息更改自定义工具的内部版本号。

这工作正常，TeamCity 显示了正确的构建编号，但“工件路径”设置未使用更新的参数，因此 zip 文件以原始 %build.number% 命名。`(**/*.*=>Test.%build.number%.zip)`

我也一直在使用自定义参数对此进行测试。我创建了一个参数`%test%`，并将初始值设置为“1”，然后在服务消息 ( `##teamcity[setParameter name='test' value='2']`) 中更改它。如果我通过`%test%`另一个构建步骤，则通过 2。但该工件仍被命名为“Test.1.zip”。

在我看来，工件设置使用的参数似乎是在运行构建步骤之前预先填充的。是这样吗？如果是这样，我可以解决这个问题吗？

编辑：我找到了可以使用的正确参数：%teamcity.build.id% :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:01:36.530

您可以通过使用环境变量作为构建名称来修复它。原始文件`%build.number%`将传递给您的构建工具。将其更改并保存为 ie `BUILD_NUMBER`，然后`%env.BUILD_NUMBER%`在 TeamCity 中使用。

# c - 在 makefile 中运行多个 shell 命令

> ID：12636111
> 
> 赞同：3
> 
> 时间：2012-09-28T08:11:01.263
> 
> 标签：c, shell, makefile

我想运行类似的东西：

```
grep TEXT file.txt 
```

如果 file.txt 中存在 TEXT，则添加编译标志。这是伪代码-

```
if (grep TEXT file.txt == line exists)
     CFLAGS += -DFOO 
```

我希望这发生在 Makefile 中。我试过 $(shell command) 但它没有用，所以我有点困惑。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:14:07.827

请插入如下一行。所以它可能运作良好。

```
CFLAGS += $(shell /bin/grep -q pattern /path/to/file >/dev/null 2>&1 && echo "-DFOO" || echo "-UFOO") 
```

如果文件中存在文本，则计算结果为：

```
CFLAGS += -DFOO 
```

否则，如果文件中不存在文本，则计算结果为：

```
CFLAGS += -UFOO 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T08:14:36.140

试试这个，也许有帮助

[http://docstore.mik.ua/orelly/linux/run/ch13_02.htm#x-100-3-prog-make-command](http://docstore.mik.ua/orelly/linux/run/ch13_02.htm#x-100-3-prog-make-command)

# forms - 无法在 Tapestry 5.3.2 中的表单外部单击 Tapestry 提交按钮时提交表单

> ID：12636112
> 
> 赞同：1
> 
> 时间：2012-09-28T08:11:05.497
> 
> 标签：forms, submit, tapestry, onsubmit

当我单击表单外的挂毯提交时；表单未提交并引发异常

“没有 FormSupport 类型的对象可用于环境”。

我也可以将字符串作为上下文从它传递给事件处理程序。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:23:49.007

是的，这是预期的行为。所有表单域组件，包括`Submit`，都必须被一个`Form`组件包围。

[您可以在文档的表单部分](http://tapestry.apache.org/forms-and-validation.html)找到更多信息。

# iphone - 共享资源访问 + UI 更新的 GCD 模式？

> ID：12636118
> 
> 赞同：1
> 
> 时间：2012-09-28T08:11:58.523
> 
> 标签：iphone, ios, cocoa-touch, ios5, ios6

伙计们！我正在我的应用程序中实现共享缓存。这个想法是在后台从 Web 获取缓存的数据，然后使用新检索到的数据更新缓存和 UI。诀窍当然是确保线程安全，因为主线程将持续使用缓存。我不想以任何方式修改缓存，而其他人可能正在使用它。

据我了解，使用 @synchronized 锁定对共享资源的访问并不是 ObjectiveC 中最优雅的方法，因为它会陷入内核，因此相当缓慢。我一直在阅读，使用 GCD 是一个很好的选择（让我们暂时忽略它的表亲 NSOperation），我想弄清楚我的情况会有什么好的模式。这是一些示例代码：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

// download the data in a background thread
dispatch_async(queue, ^{
    CacheData *data = [Downloader getLatestData];

    // use the downloaded data in the main thread
    dispatch_sync(dispatch_get_main_queue(), ^{
        [AppCache updateCache:data];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"CacheUpdated" object:nil];
    });
}); 
```

1.  这真的会像我认为的那样做吗？如果是这样，这是迄今为止处理这种情况的最干净的方法吗？有一篇[博客文章](http://blog.slaunchaman.com/2011/02/28/cocoa-touch-tutorial-using-grand-central-dispatch-for-asynchronous-table-view-cells/)与我所说的非常接近，但我也想与您再次确认。
2.  我在想，只要我只在同一个线程/队列（在我的情况下是 main）上访问共享共享资源并且只在 main 上更新 UI，那么我将有效地实现线程安全。那是对的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:44:43.580

如果你问 100 位开发人员，这是最优雅的方法，你会得到至少 100 个不同的答案（也许更多！）

我所做的，对我来说效果很好的，是让一个单身班级来做我的图像管理。我使用 Core Data，并将缩略图直接保存在商店中，但在 Core Data 中使用文件系统和指向它的 URL 来获取“大”文件。Core Data 设置为使用新的基于块的接口，因此它可以在自己管理的私有线程上完成所有工作。

可能的图像 URL 会在主线程上注册一个标签。其他类可以请求该标签的图像。如果图像不存在，则返回 nil，但该类设置一个 fetchingFlag，使用与 NSURLConnection 耦合的并发 NSOperation 来获取图像，当它获取到它时，它会在其线程上使用接收到的图像数据向单例发送消息，并且获取该消息的方法使用 '[moc performBlock:...]' （无需等待）来处理它。

当图像最终添加到存储库中时，moc 会在主队列上调度一个带有接收到的图像标签的通知。想要图像的类可以监听这个，当他们得到它时（在主线程上）他们可以再次向 moc 请求图像，这显然是存在的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T14:15:03.167

是的。除了其他考虑之外，考虑使用私有调度队列，而不是将读/写工作分流到主线程。

```
dispatch_queue_t readwritequeue;
readwritequeue = dispatch_queue_create("com.myApp.cacheAccessQueue", NULL); 
```

然后更新您的 AppCache 类：

```
- (void)updateCache:(id)data {
 dispatch_sync(readwritequeue, ^{ ... code to set data ... });
}

- (id)fetchData:... {
 __block id data = nil;
 dispatch_sync(readwritequeue, ^{ data = ... code to fetch data ...});
 return data;
} 
```

然后更新您的原始代码：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

// download the data in a background thread
dispatch_async(queue, ^{
    CacheData *data = [Downloader getLatestData];
    **[AppCache updateCache:data];**

    // use the downloaded data in the main thread
    dispatch_async(dispatch_get_main_queue(), ^{
        [[NSNotificationCenter defaultCenter] postNotificationName:@"CacheUpdated" object:nil];
    });
}); 
```

# ruby-on-rails - 捆绑安装不会在 Gemfile 中安装 gem

> ID：12636122
> 
> 赞同：3
> 
> 时间：2012-09-28T08:12:07.550
> 
> 标签：ruby-on-rails, bundle, gemfile

我正在输入以下命令：

```
rake -RAILS_ENV=production db:schema:load 
```

在我的生产服务器上我的 Rails 应用程序的主目录中，我收到以下错误消息：

```
rake aborted!
Please install the postgresql adapter: `gem install activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfile.) 
```

这很奇怪，因为我知道 pg 在我的 Gemfile 中：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :production do
  gem 'pg'
  gem 'devise'
  gem 'haml-rails'
  gem 'paperclip'
  gem 'will_paginate'
end

group :development do
  gem 'capistrano'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

当我`bundle install`从该目录运行时，我得到以下输出（pg 不在它上面。）：

```
Fetching gem metadata from https://rubygems.org/.......
Using rake (0.9.2.2)
Using i18n (0.6.1)
Using multi_json (1.3.6)
Using activesupport (3.2.8)
Using builder (3.0.0)
Using activemodel (3.2.8)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.1)
Using rack-cache (1.2)
Using rack-test (0.6.1)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.1.3)
Using actionpack (3.2.8)
Using mime-types (1.19)
Using polyglot (0.3.3)
Using treetop (1.4.10)
Using mail (2.4.4)
Using actionmailer (3.2.8)
Using arel (3.0.2)
Using tzinfo (0.3.33)
Using activerecord (3.2.8)
Using activeresource (3.2.8)
Using cocaine (0.2.1)
Using coffee-script-source (1.3.3)
Using execjs (1.4.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)
Using json (1.7.5)
Using rdoc (3.12)
Using thor (0.16.0)
Using railties (3.2.8)
Using coffee-rails (3.2.2)
Using orm_adapter (0.4.0)
Using warden (1.2.1)
Using devise (2.1.2)
Using haml (3.1.7)
Using haml-rails (0.3.4)
Using jquery-rails (2.1.1)
Using paperclip (3.1.2)
Using bundler (1.2.1)
Using rails (3.2.8)
Using sass (3.2.1)
Using sass-rails (3.2.5)
Using uglifier (1.2.7)
Using will_paginate (3.0.3)
Your bundle is complete! It was installed into /usr/local/lib 
```

和我的 Gemfile.lock 如果它是相关的（pg 仅列为依赖项）：

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.8)
      actionpack (= 3.2.8)
      mail (~> 2.4.4)
    actionpack (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.3)
    activemodel (3.2.8)
      activesupport (= 3.2.8)
      builder (~> 3.0.0)
    activerecord (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
    activesupport (3.2.8)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    bcrypt-ruby (3.0.1-x86-mingw32)
    builder (3.0.0)
    capistrano (2.12.0)
      highline
      net-scp (>= 1.0.0)
      net-sftp (>= 2.0.0)
      net-ssh (>= 2.0.14)
      net-ssh-gateway (>= 1.1.0)
    cocaine (0.2.1)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.3.3)
    devise (2.1.2)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.1)
      railties (~> 3.1)
      warden (~> 1.2.1)
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    haml (3.1.7)
    haml-rails (0.3.4)
      actionpack (~> 3.0)
      activesupport (~> 3.0)
      haml (~> 3.0)
      railties (~> 3.0)
    highline (1.6.13)
    hike (1.2.1)
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.1.1)
      railties (>= 3.1.0, < 5.0)
      thor (~> 0.14)
    json (1.7.5)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.19)
    multi_json (1.3.6)
    net-scp (1.0.4)
      net-ssh (>= 1.99.1)
    net-sftp (2.0.5)
      net-ssh (>= 2.0.9)
    net-ssh (2.5.2)
    net-ssh-gateway (1.1.0)
      net-ssh (>= 1.99.1)
    orm_adapter (0.4.0)
    paperclip (3.1.2)
      activemodel (>= 3.0.0)
      activerecord (>= 3.0.0)
      activesupport (>= 3.0.0)
      cocaine (>= 0.0.2)
      mime-types
    pg (0.14.0-x86-mingw32)
    polyglot (0.3.3)
    rack (1.4.1)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rails (3.2.8)
      actionmailer (= 3.2.8)
      actionpack (= 3.2.8)
      activerecord (= 3.2.8)
      activeresource (= 3.2.8)
      activesupport (= 3.2.8)
      bundler (~> 1.0)
      railties (= 3.2.8)
    railties (3.2.8)
      actionpack (= 3.2.8)
      activesupport (= 3.2.8)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (0.9.2.2)
    rdoc (3.12)
      json (~> 1.4)
    sass (3.2.1)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sprockets (2.1.3)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    thor (0.16.0)
    tilt (1.3.3)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.33)
    uglifier (1.2.7)
      execjs (>= 0.3.0)
      multi_json (~> 1.3)
    warden (1.2.1)
      rack (>= 1.0)
    will_paginate (3.0.3)

PLATFORMS
  x86-mingw32

DEPENDENCIES
  capistrano
  coffee-rails (~> 3.2.1)
  devise
  haml-rails
  jquery-rails
  paperclip
  pg
  rails (= 3.2.8)
  sass-rails (~> 3.2.3)
  uglifier (>= 1.0.3)
  will_paginate 
```

.bundle/config 的内容：

```
BUNDLE_FROZEN: '1'
BUNDLE_PATH: /usr/local/lib/
BUNDLE_DISABLE_SHARED_GEMS: '1'
BUNDLE_WITHOUT: development:test 
```

我正在使用 - rails 3.2.8 - ruby​​ 1.9.3 - rvm 1.16.5

谁能解释为什么 bundle install 没有安装我的 Gemfile 中列出的所有 gem？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T02:40:35.397

通过一些侦探工作，我发现以下因素导致了我的问题：

1) 我在安装了 gem pg: (0.14.0-x86-mingw32) 的 Windows 特定版本的 Windows 机器上进行开发。

2）然后将其添加到我的 Gemfile.lock 以及我的 repo 中，然后 capistrano 用于在 Debian 盒子上安装我的应用程序；pg 仅被列为依赖项。

3) capistrano 使用“--deployment”标志运行捆绑程序，这要求您的 Gemfile.lock 是最新且准确的。

我如何解决问题是从 capistrano 中删除了“--deployment”标志，并在 deploy.rb 中使用以下变量定义：

```
set :bundle_flags, "--quiet"

require 'bundler/capistrano' 
```

又跑了`cap deploy:update`一遍。

仍在努力让 Gemfile.lock 反映 pg 应该安装在生产环境中，而 pg 应该安装在开发机器上，这样我就可以将 --deployment 选项包含回部署任务中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:19:19.483

你必须使用 bundler 来执行 rake：

```
bundle exec rake db:schema:load RAILS_ENV=production 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T08:56:25.573

对于数据库.yml

它应该是

```
development:
    adapter: postgresql
    encoding: utf8
    database: xxx
    host: localhost
    username: username
    password: pw 
```

postgresql 的适配器是 postgresql

对于 gem 文件，请确保 pg 存在，并且如果它在开发和生产中都存在，则不需要块

# cursor - 在 PL/SQL 函数中使用游标时出现 DB2 错误

> ID：12636126
> 
> 赞同：0
> 
> 时间：2012-09-28T08:12:21.450
> 
> 标签：cursor, db2

我在 DB2 PL/SQL 函数中声明一个游标，如下所示：

```
create function query1(tbname VARCHAR(32), msisdn VARCHAR(32)) 
returns VARCHAR(40) 
LANGUAGE SQL 
READS SQL DATA 
NO EXTERNAL ACTION 
DETERMINISTIC 
begin atomic 
    DECLARE vsql varchar(2000); 
    DECLARE dt_UTC   date; 
    DECLARE C1 CURSOR FOR select productid from Subscription_000 where msisdn= 123456; 
    SET vsql = 'select productid from Subscription_000 where msisdn= 123456'; 
OPEN C1; 

    return '123'; 
end 
@ 
```

我将上述内容保存到 k2.sql 中，当我尝试使用以下命令编译此函数时：db2 -td@ -f k2.sql 我收到以下错误：

> DB21034E 该命令被作为 SQL 语句处理，因为它不是有效的命令行处理器命令。在 SQL 处理期间，它返回： SQL0104N 在“DECLARE C1 CURSOR”之后发现了意外的标记“FOR”。预期的标记可能包括：“”。行号=10。SQLSTATE=42601

关于这里有什么问题......的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:53:21.770

这是一个棘手的问题，但经过一些测试后，我发现了问题：您不能在原子复合语句中声明游标。替换`BEGIN ATOMIC`为`BEGIN`.

我希望我可以将您指向允许的语句列表`ATOMIC`，但它隐藏在手册中的某个地方，我现在找不到它。

（这是 DB2 可怕的错误报告的经典案例。它不应该能够识别不允许的语句并告诉你吗？）

*编辑：这是问题之一，但还有一些其他问题，我没有，所以我无法调试它。*

# objective-c - NSString 从返回方法返回空

> ID：12636127
> 
> 赞同：1
> 
> 时间：2012-09-28T08:12:25.690
> 
> 标签：objective-c, ios, xcode, nsstring

我有一个不寻常的问题，我不知道为什么：

我有以下方法：

```
 - (NSString*) copyAndReplaceOccurencesForProfileFromString: (NSString*)initialString toString:(NSString*)aString
{

        aString = [NSString stringWithString:initialString];
        DLog(@"PROFILE INITIAL HTML STRING: %@", initialString);

        aString = [aString stringByReplacingOccurrencesOfString:@"//PROFILE_IMAGE//" withString:profileImageForHTML];
        aString = [aString stringByReplacingOccurrencesOfString:@"//PROFILE_NAME//" withString:profileBirthNameString];
        aString = [aString stringByReplacingOccurrencesOfString:@"//PROFILE_BIRTHDATE//" withString:profileDateOfBirthString];
        return aString;
    } 
```

像这样调用：

```
 NSString *profileSection = [NSString string];
[self copyAndReplaceOccurencesForProfileFromString:htmlBody_profile toString:profileSection];
DLog(@"PROFILE MODIFIED HTML STRING: %@", profileSection); 
```

但“profileSection”字符串返回空。

我必须指出，在调用 return 之前，“aString”中有值。

知道为什么会这样吗？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:26:48.713

**编辑**：看看

```
 NSString *profileSection = [NSString string]; //reference created 
```

再次在 profileSection 作为 aString 传入方法时：

```
 aString = [NSString stringWithString:initialString]; //new reference created 
```

现在 profileSection 永远不能保存因引用不同而被操纵的字符串。

* * *

让你的函数返回一个新的 NSString。

```
- (NSString*) copyAndReplaceOccurencesForProfileFromString: (NSString*)initialString
{
        NSString *aString = [NSString stringWithString:initialString];
        DLog(@"PROFILE INITIAL HTML STRING: %@", initialString);

        aString = [aString stringByReplacingOccurrencesOfString:@"//PROFILE_IMAGE//" withString:profileImageForHTML];
        aString = [aString stringByReplacingOccurrencesOfString:@"//PROFILE_NAME//" withString:profileBirthNameString];
        aString = [aString stringByReplacingOccurrencesOfString:@"//PROFILE_BIRTHDATE//" withString:profileDateOfBirthString];
        return aString;
} 
```

现在像这样使用：

```
NSString *profileSection = [self copyAndReplaceOccurencesForProfileFromString:htmlBody_profile];
DLog(@"PROFILE MODIFIED HTML STRING: %@", profileSection); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T08:31:12.413

我想你误解了它`return`的工作原理。它不操纵从调用者传递的参数的值，而是确定方法调用完成后计算的值。所以说你有一个方法`-(id)someMethod`，然后像这样调用它：

`id myValue = [self someMethod];`

在内部`someMethod`，有一个 return 语句 - 右边的任何东西都是将在调用方法或函数`return`中分配的东西。`myValue`

要将其应用于您的情况，请更改您的方法，例如：

```
 - (NSString*) replaceOccurencesOfProfileInString:(NSString *)initialString
{

        NSString *aString = initialString;

        DLog(@"PROFILE INITIAL HTML STRING: %@", initialString);
        NSData *profileImageData = UIImagePNGRepresentation(profileImage);
        NSString *profileImageDataString = [profileImageData base64EncodedStringSingleLine];
        NSString *profileImageForHTML = [NSString stringWithFormat:@"<p><b><img src='data:image/png;base64,%@' width='%f' height='%f'></b></p>", profileImageDataString, profileImage.size.width, profileImage.size.height];

        aString = [aString stringByReplacingOccurrencesOfString:@"//PROFILE_IMAGE//" withString:profileImageForHTML];
        aString = [aString stringByReplacingOccurrencesOfString:@"//PROFILE_NAME//" withString:profileBirthNameString];
        aString = [aString stringByReplacingOccurrencesOfString:@"//PROFILE_BIRTHDATE//" withString:profileDateOfBirthString];
        return aString;
    } 
```

然后将您的调用代码更改为：

```
NSString *profileSection = [self replaceOccurencesOfProfileInString: htmlBody_profile]; 
```

现在，您已经创建了一个新`NSString`实例并将其返回给调用者，并在调用者处将其分配给`profileSection`变量。

希望这可以帮助！

# android - 安卓sdk定位

> ID：12636131
> 
> 赞同：0
> 
> 时间：2012-09-28T08:12:29.827
> 
> 标签：android

我是android的初学者。我在sdk定位过程中遇到了一些问题。如何**定位android sdk**？请帮助我。 *谢谢*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:15:32.213

您可以按如下方式找到 sdk：

```
open Eclipse->Windows->preferences->Android->Select your android sdk folder. 
```

您也可以参考此链接[Android 应用程序不在模拟器或真实设备上运行](https://stackoverflow.com/questions/12613250/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:19:52.610

Android SDK 在这里[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

如果您使用的是 .zip，请将其解压缩到您喜欢的位置

如果您使用的是 .exe，请选择您喜欢的安装位置

如果 Eclipse 找不到您的 Android SDK 文件夹，请考虑安装 ADT 并将 SDK 与 Eclipse 连接，请参阅[此处的说明](http://android.konreu.com/developer-how-to/install-android-sdk-eclipse-and-emulator-avds/)

# ipad - AudioServicesCreateSystemSoundID 导致音量不使用 iPad 上的物理音量控制按钮改变

> ID：12636134
> 
> 赞同：3
> 
> 时间：2012-09-28T08:12:40.503
> 
> 标签：ipad, ios6

请帮帮我，因为我只是对 Ipad 上的这种奇怪行为感到疯狂..我希望我一定能从你们那里得到完美的解决方案！提前致谢 ！！！！

# java - java中的时间比较

> ID：12636135
> 
> 赞同：0
> 
> 时间：2012-09-28T08:12:44.660
> 
> 标签：java

我想比较一下字符串时间格式，例如有没有其他人提供的api？

```
public void test() {

    Stirng t1 = "10:30 AM"; // 12-hours format
    Stirng t2 = "11:30 AM"; // 12-hours format
            <or>
    Stirng t1 = "10:30"; // 24-hours format
    Stirng t2 = "11:30"; // 24-hours format

    if(t1.before(t2)) {
        System.out.println(t1 + " is before of " + t2);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T08:19:19.123

> 我想比较一下字符串时间格式

不要，除非你*真的*必须这样做。

总的来说——随着时间的推移，这对我来说越来越清楚了，观看*了许多*Stack Overflow 问题——越早将数据转换为“自然”格式越好。在这种情况下，自然数据格式是代表一天中的某个时间，*而不是*字符串。

所以解析你所有的字符串——最好使用[Joda Time](http://joda-time.sf.net)及其[`DateTimeFormatter.parseLocalTime`](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormatter.html#parseLocalTime%28java.lang.String%29)创建[`LocalTime`](http://joda-time.sourceforge.net/api-release/org/joda/time/LocalTime.html)对象的方法。然后它们将自然具有可比性，并且也可用于您想做的任何其他事情。尽可能长时间地保持数据的自然形式，仅在绝对*必要*时将其转换为字符串或其他表示形式，例如序列化到另一台机器。

当然，如果您可以完全避免使用字符串表示*，*那就更好了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T08:15:23.133

您可以尝试使用[Joda Time](https://github.com/JodaOrg/joda-time)来解析时间并进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:19:33.757

试试[乔达时间](http://joda-time.sourceforge.net/)，

对于您的示例，它将是

```
if (new DateTime(2012, 9, 15, 10, 30).compareTo(new DateTime(2012, 9, 15, 11, 30) < 0) {
    // first is before second date
} 
```

编辑：根据乔恩的建议

这会更好

```
if (new LocalTime(10, 30).compareTo(new LocalTime(11, 30) < 0) {
    // first time is before second time
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:20:31.500

我对此一无所知，但是您可以将字符串转换为日期

```
SimpleDateFormat formatter = new SimpleDateFormat("HH:mm");
Date time =  formatter.parse("11:30"); 
```

然后只需调用方法`time.compareTo(otherTime)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T08:41:54.207

利用`Joda Time`

`DateTimeFormatter.parseLocalTime`方法给出本地时区对应的时间对象。

**请参阅此链接：**

[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

# c# - GAC 中的 .Net 静态变量和 DLL 版本

> ID：12636136
> 
> 赞同：2
> 
> 时间：2012-09-28T08:13:03.587
> 
> 标签：c#, dll

对静态类/变量和 DLL 版本有疑问。

如果我在 DLL（版本 1）中有一个静态变量并将其加载到 GAC 中，然后创建一个更新版本的 DLL（版本 2）并将其加载到 GAC 中，当调用任一版本时，它会引用内存中的相同变量？

**例子：**

*   客户端 1 在 DLL 的版本 1 中设置了一个静态变量`IsAuthenticated = True`。
*   客户端 2 获取相同静态变量 ( `IsAuthenticated`) 的值，但它引用 DLL 的版本 2。

命名空间是相同的。

当客户端 2 调用它时会/应该`IsAuthenticated`是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:14:13.663

不，每个（版本的）DLL 都有自己的所有静态变量的副本，即使两个 DLL 都加载到同一个进程中。*在*这样的进程之间共享内存（这是我对这个问题的解释）不仅是技术上的噩梦，也是一个非常糟糕的主意。

# xcode - 难以卸载较旧的phonegap版本

> ID：12636149
> 
> 赞同：0
> 
> 时间：2012-09-28T08:13:39.540
> 
> 标签：xcode, cordova

我如何卸载已经存在的phonegap（1.3,1.8）版本，因为我想安装新的2.0，并且如果不卸载旧版本就不会安装。我的旧版本 1.8 的文件夹结构没有卸载选项。

欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:02:17.733

Cordova 2.0 及更高版本并没有真正的“安装程序”，因此如果您愿意，可以离开 1.3。

如果您不打算使用旧版本，他们只建议卸载旧版本，以便从 XCode 中删除项目模板。如果你不关心，你可以离开旧版本。

只需按照[http://docs.phonegap.com/en/2.1.0/guide_upgrading_index.md.html#Upgrading%20Guides](http://docs.phonegap.com/en/2.1.0/guide_upgrading_index.md.html#Upgrading%20Guides)中的升级步骤开始使用 2.1（现已推出，您应该使用）

# c - 常量积分表达式所需的错误

> ID：12636159
> 
> 赞同：-1
> 
> 时间：2012-09-28T08:14:12.907
> 
> 标签：c, embedded, switch-statement, avr

我正在为 AVR ATmega32-A 微控制器编写代码。我正在使用如下所示的开关盒。

```
 unsigned char Command;
  unsigned int  Param;

  void runCom(void){

    switch(Command){

        case(NO_COM):
            Command = 0;
            break;

        case(INF):
            printf("\r\n\r\n");
            printf("university\r\n");
            printf("sweden\r\n");
            printf("Ver. 1.0A\r\n");

            Command = 0;
            break;

        case (DB):                        
            Command = 0;
            break;

        case(CLEARM):
            Command = 0;
            break;

        default:
            Command = 0;
            break;   
    }
} 
```

上面的代码正在运行，但现在我想在该开关中再添加一个案例，如下所示。

```
 unsigned char Command, Command1;
 unsigned int  Param;
 void runCom(void){

    switch(Command){

        case(NO_COM):
            Command = 0;
            break;

        case(INF):
            printf("\r\n\r\n");
            printf("university\r\n");
            printf("sweden\r\n");
            printf("Ver. 1.0A\r\n");

            Command = 0;
            break;

        case (DB):                        
            Command = 0;
            break;

         case(ADC):
             printf("ADC Value",ReadAd()); 

             printf("Enter Amplification stage");

                       switch(Command1){

                              case(stage1):
                                    PORTC=0x00;
                                    DDRC=0xC0; 
                                    printf("ADC Value",ReadAd());
                                    Command1 = 0;  
                                    break;

                                    case(stage2):
                                    PORTC=0x00;
                                    DDRC=0x03; 
                                    printf("ADC Value",ReadAd());
                                    Command1 = 0;  
                                    break;
                                   }    
            Command = 0;
            break; 

        case(MEM):
            Command = 0;
            break;

        case(CLEARM):
            Command = 0;
            break;

        default:
            Command = 0;
            break;   
    }
} 
```

我收到类似的错误

```
 undefind symbol 'ADC'
   undefind symbol 'stage1'
   undefind symbol 'stage2' 
```

然后我这样宣布

```
unsigned char Command, ADC, Command1, stage1, stage2;
  unsigned int  Param; 
```

现在我收到类似的错误

```
constant integral expression required at line case(ADC)
constant integral expression required at line case(stage1)
constant integral expression required at line case(stage2) 
```

所以请任何人建议我如何克服这个错误。我没有在任何地方声明 WGP、WGF、INF，但我没有得到“WGF、WGP、INF 的未定义符号。为什么这个错误只发生在 ADC 上。我已经放弃了与以前使用的相同的 switch case 规则。任何建议表示赞赏.

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:19:39.670

a 中的值`case`必须是*常量*或*文字*。

如果您查找例如`WGP`，您会发现它很可能是一个`#define`'d 字面量。对你的新价值观做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:44:39.570

您在 switch 语句中使用的值必须是编译时常量。也就是说，它们必须具有编译器在编译时已知的固定值。

有四种主要方法可以做到这一点。

1.  您可以使用常量文字（数字）。

```
 case 42: 
```

请注意，不建议使用未命名的值（“幻数”），因为它不会以任何方式记录代码，并且会使代码变得脆弱（如果您需要在五个不同的地方将值更改为 43 而忘记了一个怎么办？ ?)

1.  您可以使用预处理器常量。

```
 #define COMMAND_CODE 42
   ...

   case COMMAND_CODE: 
```

这更好，因为如果您需要将命令代码值更改为 43，您只需更改 #define （它应该只出现一次，在头文件中）。

1.  您可以使用枚举。

```
 typedef enum { COMMAND_ON=42, COMMAND_OFF=2, COMMAND RESET=77 } command_codes:
   ...

   case COMMAND_ON: 
```

1.  在 C++ 中，如果你的编译器相当现代，你可以使用一个常量：

```
 const int magic_number = 42;

   case magic_number: 
```

（请注意，在 case 语句中显示的开关值不需要在其周围加上括号。）

从您显示的代码中，您似乎已将 Command、ADC 等定义为变量（而不是常量）。在这种情况下，编译器在编译代码时无法知道这些变量在执行时将具有什么值。该语言指定必须在编译时知道 case 值，以便编译器可以生成快速代码（比一系列 if ... else if ... else if 语句更快）。

# bash - cat 和 if 的 Bash 脚本错误

> ID：12636170
> 
> 赞同：0
> 
> 时间：2012-09-28T08:14:39.937
> 
> 标签：bash, variables, if-statement, syntax-error, cat

我正在学习 bash，但现在我在制作这个脚本时遇到了很多麻烦：

```
#!/bin/bash

A="0"
B="0"
C="0"
D="0"
E="0"
F="0"
G="0"

while true; do

sleep 1

BATTERY='cat battery.txt'

if [["$BATTERY" -le 100] && ["$BATTERY" -gt 85] && [$A -eq 0]]; then

A="1"
    commands... 

elif [["$BATTERY" -le 85] && ["$BATTERY" -gt 70] && [$B -eq 0]]; then

B="1"
    commands...

elif [["$BATTERY" -le 70] && ["$BATTERY" -gt 55] && [$C -eq 0]]; then

C="1"
    commands...

elif [["$BATTERY" -le 55] && ["$BATTERY" -gt 40] && [$D -eq 0]]; then

D="1"
commands...

elif [["$BATTERY" -le 40] && ["$BATTERY" -gt 25] && [$E -eq 0]]; then

E="1"   
    commands...

elif [["$BATTERY" -le 25] && ["$BATTERY" -gt 10] && [$F -eq 0]]; then

F="1"
commands...

elif [["$BATTERY" -le 10] && ["$BATTERY" -gt 0] && [$G -eq 0]]; then

G="1"
commands...
fi
done 
```

执行此脚本时出现的错误是：

```
./changewill.sh: line 17: [[cat battery.txt: command not found
./changewill.sh: line 27: [[cat battery.txt: command not found
./changewill.sh: line 36: [[cat battery.txt: command not found
./changewill.sh: line 45: [[cat battery.txt: command not found
./changewill.sh: line 54: [[cat battery.txt: command not found
./changewill.sh: line 63: [[cat battery.txt: command not found
./changewill.sh: line 72: [[cat battery.txt: command not found 
```

我一直在阅读和环顾四周，我认为`cat`输出已正确分配给 BATTERY。我尝试了一些不同的东西，比如`{` `[` `¨`，但没有任何效果。是的，该文件存在，并且与脚本位于同一文件夹中。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:19:44.910

```
BATTERY='cat battery.txt' 
```

这不会执行`cat battery.txt`，它只是将“cat battery.txt”作为字符串保存到该变量中。

你应该：

```
BATTERY=$(cat battery.txt) 
```

或者

```
BATTERY=`cat battery.txt` 
```

（首选第一种形式。）

您的测试也有语法错误。使用例如：

```
elif [[ $BATTERY -le 10 && $BATTERY -gt 0 && $G -eq 0 ]]; then ... 
```

`[`并且`[[`实际上是完全不同的东西。

`[`是`test`程序（签出`ls /usr/bin/[`和`man test`），`[[ expr ]]`是一个shell复合命令（[条件表达式](http://wiki.bash-hackers.org/syntax/ccmd/conditional_expression)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:19:43.037

要获取命令的输出，您需要使用反引号而不是引号将命令包装起来：

```
BATTERY=`cat battery.txt`
        ^               ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:20:54.243

条件的正确语法是

```
[[ $BATTERY -le 55 && $BATTERY -gt 40 && $D -eq 0 ]] 
```

即没有单方括号。对于数字比较，您也可以使用双括号：

```
if (( BATTERY==55 && BATTERY > 40 && D == 0 )) ; then ... 
```

# jquery - jQuery 快速绘图库

> ID：12636174
> 
> 赞同：0
> 
> 时间：2012-09-28T08:15:06.727
> 
> 标签：jquery, web, plot

我有一个网络服务器，它将每 100 毫秒调用一次以检索视图值。这些值需要在监视器中绘制并通过线连接。

它纯粹是为了快速演示的目的，所以没有长期的解决方案我正在考虑使用一些绘图库来获取 jQuery，但我担心它是否足够快并且看起来是否有点平滑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:02:15.743

对于一些数据的简单绘图，Flot 似乎相当不错，而且运行速度也很快！

[http://people.iola.dk/olau/flot/examples/realtime.html](http://people.iola.dk/olau/flot/examples/realtime.html)

# android - Android 在应用程序中打开默认 mp3 播放器

> ID：12636187
> 
> 赞同：0
> 
> 时间：2012-09-28T08:16:12.600
> 
> 标签：android, mp3, audio-player

应该很简单。我只想在按下按钮作为自己的活动时打开默认的 mp3 播放器。我需要它在 api 3 及更高版本上工作

这会打开一个媒体播放器，但它不是默认设置：

```
//doesnt open default player
Intent viewMediaIntent = new Intent();   
viewMediaIntent.setAction(android.content.Intent.ACTION_VIEW);   
//File file = new File(objectFilePath);   
viewMediaIntent.setDataAndType(null, "audio/*");   
viewMediaIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
act.startActivity(viewMediaIntent); 
```

这不起作用：（没有发现处理意图的活动）

```
Intent intent = new Intent("android.intent.action.MUSIC_PLAYER"); 
act.startActivity(intent); 
```

这也有效，但不是默认的：

```
Uri uri = Uri.withAppendedPath(MediaStore.Audio.Media.INTERNAL_CONTENT_URI, "1"); 
Intent it = new Intent(Intent.ACTION_VIEW, uri);   
act.startActivity(it); 
```

感谢您的时间。

# ios - Xcode 4.5：身份与钥匙串中的任何有效、未过期的证书/私钥对都不匹配

> ID：12636188
> 
> 赞同：1
> 
> 时间：2012-09-28T08:16:14.507
> 
> 标签：ios, xcode4, ios6, code-signing

刚刚将我的 Xcode 从 4.3.2 升级到 4.5 并得到一个错误：“身份与钥匙串中任何有效的、未过期的证书/私钥对不匹配”。

听起来很奇怪，因为我之前成功地构建了一个代码。当然，我有一个私钥，一个用密钥签名的有效证书，包名称与配置文件完全匹配等。除了 Xcode 版本外，没有任何变化。

一个新的奇怪的事情是，如果我将配置文件选择器设置为自动模式，它会显示“当前没有配置文件匹配”用于调试和发布，但为调试 - 任何 iOS SDK 和发布 - 任何 iOS SDK 做正确的选择。

我可能需要用 Xcode 做点什么吗？有任何想法吗？之前没听说过 iOS SDK 会影响签名……</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:19:41.377

我也浪费了很多天来关闭这个问题。更新 Xcode 版本后出现此错误。这只是因为 Xcode 默认设置为`device`而不是`simulator`. 我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:38:44.810

问题是新的 Xcode（我怀疑它是一个 Xcode）确实把配置文件弄得一团糟。

我**删除了 Mac 和任何设备上的所有内容（当然，私钥除外）**。并重新安装：Apple WWDRCA、开发证书、所有配置文件。

然后手动设置签名，因为自动选择指向错误（不存在）的配置文件。

所以我不需要撤销和颁发证书。

致任何其他评论者：谢谢，但我知道如何签署应用程序并确保阅读评论中发布的所有主题。请尝试仔细阅读整个问题，特别是如果您认为它是重复的。过失，我没有说明我已经阅读过类似的主题。

# javascript - 如何在svg中反射元素

> ID：12636193
> 
> 赞同：2
> 
> 时间：2012-09-28T08:16:41.630
> 
> 标签：javascript, jquery, html, svg, effects

任何人都知道如何使绘制的 svg 元素（矩形、文本等）有自己的反映？使用 JavaScript/JQuery

任何提供代码的例子都会很棒

如果有一个 JQuery 插件也很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:25:19.387

试试这个： http:
[//lea.verou.me/2011/06/css-reflections-for-firefox-with-moz-element-and-svg-masks/](http://lea.verou.me/2011/06/css-reflections-for-firefox-with-moz-element-and-svg-masks/)

# c# - 具有两个类的数组

> ID：12636198
> 
> 赞同：0
> 
> 时间：2012-09-28T08:17:10.687
> 
> 标签：c#, java, arrays

嗨，我在做学校作业，我需要将此 JAVA 代码转换为 C#

```
private Map<ItemID, ProductDescription> descriptions = new HashMap()<ItemID, ProductDescription>; 
```

是否可以直接转换？

我已经决定把 ItemID 变成一个 int，而 ProductDescription 是一个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:19:32.193

你可以用 a`Dictionary<int, ProductDescription>`代替。

[`Dictionary<TKey, TValue> Class`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

表示键和值的集合。密钥必须是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:19:54.177

```
private Dictionary<ItemID, ProductDescription> descriptions = new Dictionary<ItemID, ProductDescription>(); 
```

hasmap 确实允许一个空键条目。在（罕见？）情况下，您将需要这个，我只需创建一个特殊的 ItemID 并将其用于 null 键。

你当然可以制作一个支持空键的字典后代，但恕我直言，这太过分了;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T08:24:09.713

是的，当然可以。请查看以下示例：

```
IDictionary<int, string> h = new Dictionary<int, string>();
            h.Add(1, "a");
            h.Add(2, "b");
            h.Add(3, "c");

SortedList<int, string> s = new SortedList<int, string>();
            s.Add(1, "a");
            s.Add(2, "b"); 
```

我想这就是你要找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:19:10.513

是的，只需替换`HashMap`为[`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx). 您可能希望将变量键入为 an [`IDictionary`](http://msdn.microsoft.com/en-us/library/s4ys34ea.aspx)（本着与 Java 代码相同的精神），但这并不是绝对必要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T08:19:49.433

是的，您可以使用 Dictionary 而不是 HashMap 进行转换。当然，了解每个代码段并进行转换会更有效。不建议尝试逐行转换，因为您可能会错过可用于解决问题的更好方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T08:20:51.263

这是一场很好的比赛，但是，

```
private IDictionary<ItemID, ProductDescription> descriptions
    = new Dictionary<ItemID, ProductDescription>(); 
```

* * *

**笔记**

[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)将接受`null`键值，而 as[`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)则不会。

如果您真的想支持`null`键值，我希望看到您在尝试完美的 .Net`HashMap`实现之前进行推理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T08:21:03.143

有很多选择。

有一个

C#中的[哈希表](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)

[KeyValuePair](http://msdn.microsoft.com/en-us/library/5tbh8a42.aspx)所以可以`List<KeyValuePair<T,U>>`

[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)//首选

# google-maps-api-3 - Google Maps API 营业地点

> ID：12636199
> 
> 赞同：2
> 
> 时间：2012-09-28T08:17:17.890
> 
> 标签：google-maps-api-3, google-places-api

大家早。

我目前正在使用下面的代码在特定的 long-lat 加载我的 Google Map 的 API V3，它是针对客户端的，我想知道我是否可以加载类似于在 Google Maps 上弹出的 infoWindow商业信息，评论星级等。

```
<script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(lat-long),
          disableDefaultUI: true,
          zoom: 16,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("location"),
            mapOptions);

        var point = new google.maps.LatLng(lat-long);
        var marker = new google.maps.Marker({
            position:point,
            map: map,
        });
    }
</script> 
```

这是在不同的 API 中完成的吗？如果是这样，任何人都可以向我指出一些有用的信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:49:03.887

听起来您可能正在寻找 Places API/Library：

[https://developers.google.com/maps/documentation/javascript/places#place_details_responses](https://developers.google.com/maps/documentation/javascript/places#place_details_responses)

不确定它是否包含您在 Google 地图上找到的所有内容。

# java-me - 如何从 J2ME 中的 platformRequest() 获取信息/数据？

> ID：12636202
> 
> 赞同：1
> 
> 时间：2012-09-28T08:17:31.630
> 
> 标签：java-me, nokia, midp, midlet

我想实现类似于 Whatsapp 的行为，用户可以在其中上传图像。我尝试在我的应用程序中打开图像，但如果图像太大，我会出现内存不足的错误。

为了解决这个问题，我正在使用该方法打开转发要在手机的本机图像查看器中打开的图像`platformRequest()`。

但是，我想知道 Whatsapp 是如何修改手机的本机图像查看器以添加一个“选择”按钮，用户可以使用该按钮选择他想要上传的图像。该信息如何发送回 J2ME 应用程序以及如何调整图像大小？

* * *

编辑：我以两种不同的方式尝试了这个，这两种方式都给了我 OOME。

一开始，我尝试了更直接的方法：

```
FileConnection fc = (FileConnection) Connector.open("file://localhost/" + currDirName + fileName);
if (!fc.exists()) {
    throw new IOException("File does not exists");
}
InputStream fis = fc.openInputStream();
Image im = Image.createImage(fis);
fis.close(); 
```

当这不起作用时，我尝试了一种更“手动”的方法，但这也给了我一个错误。

```
FileConnection fc = (FileConnection) Connector.open("file://localhost/" + currDirName + fileName);
if (!fc.exists()) {
    throw new IOException("File does not exists");
}
InputStream fis = fc.openInputStream();

ByteArrayOutputStream file = new ByteArrayOutputStream();
int c;

byte[] data = new byte[1024];

while ((c = fis.read(data)) != -1) {
    file.write(data, 0, c);

}

byte[] fileData = null;
fileData = file.toByteArray();

fis.close();
fc.close();
file.close();
Image im = Image.createImage(fileData, 0, fileData.length); 
```

当我调用 createImage 方法时，两种情况都会出现内存不足错误。这因设备而异。E72 给我 3MB 图像的错误，而较新的设备会给我超过 10MB 的图像错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:24:55.563

MIDP 2 (JSR 118) 没有用于此的[API](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/index.html "MIDP 文档")，您需要找到另一种处理大图像的方法。

至于 WhatsApp，看起来他们不依赖 MIDP 来支持此功能。如果您查看[Wikipedia 页面](http://en.wikipedia.org/wiki/WhatsApp)，您会注意到他们并没有声称通用 Java ME 是受支持的平台，而是列出了更窄的平台，如 Symbian、S40、Blackberry 等。

这很可能意味着他们实现了“有问题的功能”，就像您询问使用特定目标设备的平台特定 API 一样，对于列出的每个平台都有基本上独立的项目/版本。

如果您的应用程序中确实需要此功能，您可能必须执行类似的操作。

在这种情况下，还可以考虑封装有问题的功能，以便在为不同平台构建源代码时更轻松地切换部分源代码。例如，[Class.forName(String)](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/java/lang/Class.html#forName%28java.lang.String%29 "API 文档")可用于根据目标平台加载特定于平台的实现。

```
//...
Image getImage(String resourceName) {
   // ImageUtil is an interface with method getImage
   ImageUtil imageUtil = (ImageUtil) Class.forName(
           // get platform-specific implementation, eg
           //   "mypackage.platformspecific.s40.S40ImageUtil"
           //   "mypackage.platformspecific.bb.BBImageUtil"
           //   "mypackage.platformspecific.symbian.SymbialImageUtil"
           "mypackage.platformspecific.s40.S40ImageUtil");
   return imageUtil.getImage(resourceName);
}
//... 
```

# asp.net-mvc - 网站内的 Web 应用程序

> ID：12636207
> 
> 赞同：1
> 
> 时间：2012-09-28T08:18:02.023
> 
> 标签：asp.net-mvc, azure, umbraco, azure-web-app-service, azure-vm-role

我正在寻求一些关于在 azure 上托管网站的指导。我有一个**Umbraco 网站**，在 azure 网站上运行良好。我还想在我的 umbraco 站点中托管一个**MVC 应用程序**，但它必须作为应用程序运行。

通过将文件夹转换为应用程序，这在 IIS 中可以正常工作，但在 azure 上没有执行此操作的选项。

有没有一种简单的方法可以将文件夹转换为我的 umbraco 解决方案中的应用程序，还是我必须创建一个具有 Web 角色的虚拟机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:16:14.303

如果您需要的不仅仅是创建[**Azure 网站**](https://www.windowsazure.com/en-us/home/features/web-sites/)，还需要更多控制- 您需要创建[**Azure VM**](https://www.windowsazure.com/en-us/home/features/virtual-machines/)或使用[**Azure Web Role**](https://www.windowsazure.com/en-us/home/features/cloud-services/)托管服务。

# html - 格式化 Dojo 列表项的图标

> ID：12636209
> 
> 赞同：0
> 
> 时间：2012-09-28T08:18:11.457
> 
> 标签：html, css, mobile, dojo, html-lists

我正在尝试设置列表项图标的大小。基本上，我需要将高度和宽度设置为 27 像素，而图像实际上是 54 像素宽和高。这适用于视网膜图形，以便在较旧和较新的 iPhone 上正确显示。这是我的代码：

```
<ul data-dojo-type="dojox.mobile.TabBar">
            <li id="footerHomeButton" class="sizing" data-dojo-type="dojox.mobile.TabBarButton"
                icon1="images/new/home_icon@2x.png" onclick="WL.Page.load(INDEX.loadPage(0));">Home</li> 
```

我已经尝试了所有我能想到的东西，从简单的高度和宽度标签，到 CSS 修改，再到 Dojo 大小调整，但没有任何效果。这很令人沮丧，希望其他人也遇到过类似的问题？为什么它们不包含图标高度和宽度参数超出了我的范围，除非我在文档中错过了这一点，而您实际上可以？

请帮忙！谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:58:51.710

它对我有用，如下所示。希望它会有所帮助。谢谢。

```
img.mblListItemIcon {
    height: 29px;
    width: 29px;
    overflow:hidden;
} 
```

# android - Ubuntu 12.04+Eclipse Juno 不显示选项

> ID：12636212
> 
> 赞同：3
> 
> 时间：2012-09-28T08:18:25.413
> 
> 标签：android, eclipse, adt, ubuntu-12.04

我是使用 Eclipse 的新手（我刚开始在 Ubuntu 12.04 64 位上使用 Eclipse Juno），我遇到了一个奇怪的问题。问题是，当我打开一个新的 Android 应用程序项目时，在配置启动器图标窗口中缺少一个用于调整附加填充的栏。任何线索为什么会这样？我最大的担心是如果我丢失了其他任何东西并且我不知道，因为我是使用该 IDE 的新手。我添加了一个更好地解释它的图像。

[http://imageshack.us/photo/my-images/94/androidg.png/](http://imageshack.us/photo/my-images/94/androidg.png/)

谢谢

# iphone - iOS - 升级到 Xcode 4.5 后出现链接器错误，Core Plot 相关？

> ID：12636213
> 
> 赞同：3
> 
> 时间：2012-09-28T08:18:35.890
> 
> 标签：iphone, ios, ipad, ios6, xcode4.5

> **可能重复：**
> [iOS - 升级到 Xcode 4.5 后出现链接器错误，可能与 Core Plot 相关](https://stackoverflow.com/questions/12411077/ios-linker-error-after-upgrading-to-xcode-4-5-possibly-core-plot-related)

我有一个我正在尝试转换为 xcode 4.5 的 iPhone 应用程序。但是链接器错误即将到来。我已经完成了这一步中的所有事情，[iOS - Core Plot Linker error after upgrade to Xcode 4.5](https://stackoverflow.com/questions/12610294/ios-core-plot-linker-error-after-upgrading-to-xcode-4-5) 以及那里提到的链接。但尚未成功。任何机构可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:32:45.150

尝试在您的项目构建设置中将默认编译器更改为**LLMV GCC 4.2 。这很奇怪，但对我有用**

# jquery - jQuery children() 更深入

> ID：12636214
> 
> 赞同：1
> 
> 时间：2012-09-28T08:18:36.767
> 
> 标签：jquery, children

```
<div class='main'>

<div>
        <div>
            <button></button>
        </div>
</div>
<ul>    
        <li>
            <img />
        </li>

        <li>
            <h1></h1>
        </li>

</ul>
<div>
        <span>
            <a href=""></a>
        </span>
</div>

</div> 
```

问题：我想选择按钮，img、h1 和 a。在 jQuery 中执行此操作的唯一方法（据我所知）是 $(.main).children().children().children()。但是还有另一种方法可以在 jQuery 中选择这些元素吗？（不要多次使用儿童（））

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:21:39.513

jQuery 选择器的工作方式类似于 CSS 选择器：

```
var $button = $('.main > div > div > button'); 
```

您还可以使用`find()`方法：

```
var $a = $('.main').find('a'); 
```

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T08:20:24.740

你可以使用 .find() 方法：

```
$('.main').find() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T08:28:45.077

实际上，如果您尝试选择“容器 div”中的所有叶节点，您可以尝试

```
$(".main :not(:has(*))") 
```

这将选择没有子元素的“容器 div”内任何级别的任何元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:30:31.600

```
<div class="main">
   <div>
      <div>
         <button class="mustSelect"></button>
      </div>
   </div>
   <ul>
      <li>
         <img class="mustSelect" />
      </li>
      <li>
         <h1 class="mustSelect"></h1>
      </li>
   </ul>
   <div>
      <span>
      <a href="" class="mustSelect"></a>
      </span>
   </div> 
```

将 class(class="mustSelect") 添加到您需要的元素中。然后在 js 中，您可以引用这些元素，如下所示。

```
$('.mustSelect') 
```

如果***您无法添加类***，请使用以下

```
$("button, img , h1 , a ", ".main") 
```

它告诉 jquery 选择 .main 类中的任何按钮 img 、 h1 、 a 。

希望这会帮助你。如果您有任何问题，请随时提问。谢谢

# windows-8 - ScrollViewer 和处理子元素上的操作事件

> ID：12636216
> 
> 赞同：5
> 
> 时间：2012-09-28T08:18:41.153
> 
> 标签：windows-8, windows-runtime, windows-store-apps, winrt-xaml

我使用 C#/XAML 创建了一个 Windows 8 应用商店应用程序。我的界面包括一个可滚动列表，它使用`ScrollViewer`. 我希望能够处理列表中元素的操作事件，但是，设置`ManipulationMode`为列表元素以外`None`的任何内容都会导致我的列表不再滚动。

这是 UI 的简化版本：

```
<ScrollViewer>
  <Border/> <!-- these contain child content -->
  <Border/>
  <Border/>
  <!-- Set ManipulationMode on an element in order to receive manipulation events -->
  <!-- This causes the scroll viewer to stop working! -->
  <Border ManipulationMode="All"
          ManipulationDelta="..."/>
  <Border/>
  <Border/>
</ScrollViewer> 
```

我知道 WinRT出于性能原因`ScrollViewer`使用特殊`ManipulationMode`的`System`，但我想要一个垂直滚动列表，其中包含响应水平操作/手势的元素。谁能想到一个创造性的解决方法可以使这成为可能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-09T17:55:32.767

可能很长时间，但没有找到任何好的解决方案。我很容易就达到了我想要的。

```
public MovableGrid()
        {
            ManipulationMode = ManipulationModes.TranslateX | ManipulationModes.System;
            AddHandler(ManipulationDeltaEvent, new ManipulationDeltaEventHandler(UIElement_OnManipulationDelta), true);
            AddHandler(ManipulationCompletedEvent, new ManipulationCompletedEventHandler(UIElement_OnManipulationCompleted), true);
        } 
```

我希望我的 MovableGrid 在 X 轴上移动，并且我有想要使用 scrollviewer 滚动的 MovableGrid 列表。这足以做到这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-28T21:45:31.447

我所做的是在 ScrollViewer 顶部放置一个透明矩形并在那里处理操作。当我发现操作应该滚动 ScrollViewer - 我使用 ScrollToHorizo​​ntal/VerticalOffset() 方法滚动 ScrollViewer。在 ManipulationStarted 上，我还使用 VisualTreeHelper.FindElementsInHostCoordinates 来检查我也可以操作哪个项目，然后我可以根据各种条件决定是否操作该项目。虽然这是相当多的自定义代码。当用户尝试拖动比最小/最大偏移量更远以模仿 ScrollViewer 默认行为、处理鼠标滚轮等时，您还需要更新 ScrollViewer 中 ScrollContentPresenter 的 RenderTransform。当然，没有什么是您无法处理的。

编辑* 我在尝试回答[另一个类似问题](https://stackoverflow.com/questions/14153038/how-to-allow-manipulations-within-listview-gridview-item-controls-while-allowing/14161596#14161596)时想到的另一个解决方案是使用另一个 ScrollViewer 作为子项并使用其 ViewChanged 事件而不是操作事件。

编辑 2*

此外，在 Windows 8.1 中，您将获得`ManipulationModes.System`与其他模式相结合应该允许您在`ScrollViewer`. [`CancelDirectManipulations()`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.canceldirectmanipulations.aspx)然后，一旦您希望其父级`ScrollViewers`停止处理平移和缩放操作，您就可以调用被操作元素。

# php - 如何使用 php mysql 获取类别中的产品限制？

> ID：12636220
> 
> 赞同：-3
> 
> 时间：2012-09-28T08:18:48.907
> 
> 标签：php, mysql, sql

我有一个样本数据：

```
products (id, name, category_id)
(1, 'Test 1', 1)
(2, 'Test 2', 1)
(3, 'Test 3', 1)
(4, 'Test 4', 2)
(5, 'Test 5', 2)
(6, 'Test 6', 2)
(7, 'Test 7', 3) 
```

如何构思，在 1 个 category_id 中获得 2 个产品，例如：

```
(1, 'Test 1', 1)
(2, 'Test 2', 1)
(4, 'Test 4', 2)
(5, 'Test 5', 2)
(7, 'Test 7', 3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:58:52.683

尝试这个，

```
SELECT id, name, category_id
FROM   products p
WHERE 
(
   SELECT count(*) 
   FROM   products f
   WHERE  f.category_id = p.category_id AND
          f.id <= p.id
) <= 2; 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/4b52c/1)

# .htaccess - 重定向不存在的文件夹 mod_rewrite

> ID：12636221
> 
> 赞同：0
> 
> 时间：2012-09-28T08:19:01.093
> 
> 标签：.htaccess, mod-rewrite

我如何重定向某个 url 请求，例如：

[http://sample.org/www/images/animal.png](http://sample.org/www/images/animal.png)

文件结构：

根路径/图像/animal.png

根路径/www/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:52:07.637

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/www/(.*)$
RewriteCond %{DOCUMENT_ROOT}/%1 -f
RewriteRule ^/?www/(.*)$ /$1 [L] 
```

# tfs - TFS 中是否有本地提交？

> ID：12636222
> 
> 赞同：16
> 
> 时间：2012-09-28T08:19:09.950
> 
> 标签：tfs

TFS 是否支持本地提交？

换句话说：我可以

1.  修改代码，
2.  进行本地提交（不与他人共享这些更改），
3.  测试我的修改和
4.  如果我的更改没有破坏任何内容，请进行全局提交（此后我的更改可供其他开发人员使用）

在 TFS 2012 中？

如果没有，是否有任何解决方法允许此功能？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-28T08:39:46.513

不，它不支持这一点，但是它确实有几个可供您使用的替代方案。

1) 分支 - 所有开发人员在他们自己的分支上工作，然后当他们对他们的更改感到满意时合并到主干/主干。

2) Shelveset - 开发人员搁置他们不想提交的任何更改。这使您可以撤消更改，或将其传递给团队中的其他开发人员，而不会丢失更改或签入主分支

3) 门控签到 + 单元/自动化测试。每当开发人员签入时，TFS 都会自动搁置更改并运行 tfs 构建 + 任何相关的测试（单元测试或自动化测试）。如果一切成功，则将其签入。我认为这不支持手动测试。

或以上所有内容的混合。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-28T08:22:20.483

TFS 本身不支持这一点。

然而！微软发布了与 TFS 的 Git 集成。Brian Harry 写了一篇博客：几周前[宣布 Git 与 TFS 集成。](http://blogs.msdn.com/b/bharry/archive/2012/08/13/announcing-git-integration-with-tfs.aspx)

使用此设置，您可以使用 Git 进行本地提交，然后将其提交到 Team Foundation Server。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T17:36:58.920

不是针对 TFS 的本地版本（目前），但截至 2013 年 1 月，Microsoft 托管的 Team Foundation Service 支持 Git，这显然支持本地提交。

[http://tfs.visualstudio.com/en-us/news/2013-jan-30.aspx#git%20support](http://tfs.visualstudio.com/en-us/news/2013-jan-30.aspx#git%20support)

# java - 无法通过 servlet 从页面获取参数

> ID：12636232
> 
> 赞同：0
> 
> 时间：2012-09-28T08:19:35.283
> 
> 标签：java, servlets

它应该很简单，但我有一个问题，这是我的 *.jsp 文件

```
<html>
<head>
<title>Edit DataBase data</title>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>New Page 1</title>
</head>
<body>
    <hr size="2"/>
    <h2>id in DB = ?</h2>
    <p>id:<input type="text" name="id" size="20" value="sdfs"></p>
    <p>
    <form action="/web/save" method="POST">
        <input class="button" type="submit" value="submit" />
    </form>
    </p>
</form>
</body>
</html> 
```

servlet 看起来像这样

```
public void doPost(HttpServletRequest request,
                    HttpServletResponse response)
      throws ServletException, IOException {
      String id = request.getParameter("id")
      System.out.println("ID=" + id);
      } 
```

但在输出 ID=null

servlet 是通过单击服务器上的按钮加载的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:35:53.930

您需要将输入标签放在表单标签之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:21:53.707

对于你放在这里的代码

```
<form action="" method="POST"> 
```

是正确的。

检查，你可能已经把

```
<form action="" method="GET"> 
```

# objective-c - 设置单独的应用音量控制

> ID：12636235
> 
> 赞同：0
> 
> 时间：2012-09-28T08:19:39.627
> 
> 标签：objective-c, macos, cocoa

我如何控制我的应用程序的输出音量。

我有一个应用程序，它使用[https://github.com/mattgallagher/AudioStreamer](https://github.com/mattgallagher/AudioStreamer)从 Internet 流式传输 mp3 文件。该`AudioStreamer`课程无法更改输出音量，我不想更改系统音量。

许多应用程序这样做：

*   iTunes
*   Spotify
*   MPlayerX
*   大多数音频播放器

编辑：如果您听说过 AudioStreamer，我已经切换到 Apple 的 AVPlayer，我发现它更简单、更优越。音量调节也很简单！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T23:49:58.973

`AudioStreamer`我猜大多数 OSX 媒体播放器都使用 AudioToolbox 框架。AudioToolbox 使用一个调用`AudioQueue`来播放媒体文件的编程接口。这是使用 调节音量的方法`AudioQueue`。

```
AudioQueueSetParameter(audioQueue, kAudioQueueParam_Volume, 0.5); 
```

*   `audioQueue`是一个 AudioQueRef
*   `kAudioQueueParam_Volume`告诉`AudioQueueSetParameter()`改变音量参数
*   `0.5`是 0.0 - 1.0 的体积

有关 AudioQueue 的更多详细信息：[https ://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:07:11.633

您可以使用`AVAudioPlayer`，它有一个实例方法`setVolume:`来设置输出音量：

```
AVAudioPlayer * audioPlayer = ...
float volume = aVolumeValue / 100.f; // aVolumeValue can be 0~100
[audioPlayer setVolume:volume];
[audioPlayer play]; 
```

顺便说一句，您可以存储`aVolumeValue`into ，并通过对象`NSUserDefaults`控制它。`UISlider`

# javascript - 如何阻止 Firebug 在控制台中截断字符串？

> ID：12636243
> 
> 赞同：8
> 
> 时间：2012-09-28T08:19:58.507
> 
> 标签：javascript, string, firefox, console, firebug

在调试时，我经常将字符串和数组转储到控制台。但在某些情况下，Firebug 会切分字符串值，因此很难确定结果。

例如，控制台中的这段代码：

```
console.log ( [
    "123456789A123456789B123456789C123456789D123456789E123456789F123456789G",
    "123456789A123456789B123456789C123456789D123456789E123456789F123456789G"
] ); 
```

产量：

```
[ "123456789A123456789B123...89E123456789F123456789G",
  "123456789A123456789B123...89E123456789F123456789G"
] 
```

（坏的！）

单串没问题。这：

```
console.log ("123456789A123456789B123456789C123456789D123456789E123456789F123456789G"); 
```

产量：

```
123456789A123456789B123456789C123456789D123456789E123456789F123456789G 
```

正如预期的那样。

但是，数组和对象会被缩短。
我该如何阻止这种行为？这是一个错误吗？（到目前为止，我的 Google-Fu 失败了。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T09:21:47.010

好的，在浏览了[**Firebug 首选项**](https://getfirebug.com/wiki/index.php/Firebug_Preferences)列表（现在有 204 个，并且没有明显的顺序）之后，我发现`stringCropLength`.

它默认为`50`，这是有道理的，因为测试字符串被截断`123456789A123456789B123...89E123456789F123456789G`为 49 个字符长。

打开***about:config***并设置`extensions.firebug.stringCropLength`为 0，阻止字符串被截断！

请注意，根据[问题 5898：引入不同的字符串裁剪首选项](http://code.google.com/p/fbug/issues/detail?id=5898)，此首选项可能会影响一些事情（目前）。但是，到目前为止，我没有看到将此设置为不“裁剪”的任何不良影响。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T08:29:22.240

使用`console.dir`而不是`console.log`- 输出附近有一个 + ，可让您扩展字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T08:33:02.593

使用 console.dir("....") 函数而不是 console.log("...") 你也可能有兴趣查看[firebug 首选项](http://getfirebug.com/wiki/index.php/Firebug_Preferences)

# javascript - jQuery animate(params,options) 函数无法按照手册中的说明工作

> ID：12636244
> 
> 赞同：0
> 
> 时间：2012-09-28T08:20:06.903
> 
> 标签：javascript, jquery, jquery-animate

这是我的代码

```
this.animate({marginTop:'0px'}, {speed:'slow', queue:false}); 
```

速度选项在这里不起作用，我尝试了不同的组合，仍然不起作用。

这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:21:47.450

您正在寻找`duration`，而不是`speed`：

```
this.animate({marginTop:'0px'}, {duration:'slow', queue:false}); 
```

# java - Java 时区转换：需要帮助

> ID：12636246
> 
> 赞同：1
> 
> 时间：2012-09-28T08:20:21.103
> 
> 标签：java, timezone

> **可能重复：**
> [时区转换](https://stackoverflow.com/questions/6567923/timezone-conversion)

我必须使用 Java 代码将给定的时间和时区与其他时区转换。

例如 ：

我还必须`28 Sept 2:00 PM IST`考虑 DST（夏令时）在加拿大时区进行转换。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:26:59.993

尝试`getTimeZone()`并`setTimeZone()`与`Calendar`班级一起

```
TimeZone oztz = TimeZone.getTimeZone("Canada/Atlantic");
Calendar datetime = Calendar.getInstance( oztz ); 
```

**请参阅此链接了解所有时区：**

[http://snipplr.com/view/23131/timezone-enum/](http://snipplr.com/view/23131/timezone-enum/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:26:51.010

[Calendar](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)类内置了用于进行转换的方法。

[您可以使用setTimeZone](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#setTimeZone%28java.util.TimeZone%29)设置所需的时区。

另请参阅 Date 类中的[getTimeZoneOffset](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html#getTimezoneOffset%28%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:30:07.060

可能您正在寻找这样的东西： [Converting Times Between Time Zones](http://www.exampledepot.com/egs/java.util/GetTimeOtherZone2.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:38:54.063

您可以使用[JodaTime](http://joda-time.sourceforge.net/userguide.html#TimeZones)及其对不同时区的支持。

也就是说，如果您知道您有字符串 ISO 格式或特定的已知格式（看起来像），您可以执行以下操作：

```
DateTimeFormatter fmt = ISODateTimeFormat.dateTime().withZone("Asia/Kolkata");
DateTime newDate = fmt.parseDateTime([your input date]);
// You can manipulate your date here...
String newString = fmt.withZone("Canada/Atlantic").print(); 
```

这在内部处理所有时区事务，包括 DST。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T09:59:59.017

简单的方法是将 Datetime 和 Timezone 设置为 Calender 和 getTime。下面是设置时区和用户特定时间的示例代码。

```
Date date =new Date(2012,9,28,2,00,00); //Set time to Date
        Calendar calendar = new GregorianCalendar(TimeZone.getTimeZone("Canada/Atlantic"));
        calendar.setTime(date);

        System.out.println("Timezone :: " + calendar.getTimeZone());
        System.out.println("Time :: " + calendar.getTime()); 
```

输出：

```
 Timezone :: sun.util.calendar.ZoneInfo[id="Canada/Atlantic",offset=-14400000,dstSavings=3600000,useDaylight=true,transitions=228,lastRule=java.util.SimpleTimeZone[id=Canada/Atlantic,offset=-14400000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=3,startMonth=3,startDay=1,startDayOfWeek=1,startTime=7200000,startTimeMode=0,endMode=2,endMonth=9,endDay=-1,endDayOfWeek=1,endTime=7200000,endTimeMode=0]]
    Time :: Mon Oct 28 02:00:00 GMT 3912 
```

您将从 TimeZone useDaylight(true/false)、dstSaving(加拿大 1 小时) 获取所有信息 有关 TimeZone 的更多功能，请参阅以下链接： [http ://biese.wordpress.com/2006/10/23/java-daylight -节省时间和时区/](http://biese.wordpress.com/2006/10/23/java-daylight-saving-time-and-time-zone/)

这是获取 DayLightSavingTime 信息的链接： [http ://timeanddate.com/worldclock/clockchange.html?n=1187&year=2012](http://timeanddate.com/worldclock/clockchange.html?n=1187&year=2012)

# wcf - 动态调用 WCF 服务

> ID：12636252
> 
> 赞同：2
> 
> 时间：2012-09-28T08:20:27.597
> 
> 标签：wcf, dynamic, invoke

我创建了 ASP.NET 应用程序并向其添加了简单的 WCF 服务。ASP.NET 应用程序是 WCF 服务的宿主。服务正在运行。

该服务如下所示：

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    string DoWork(string text);
}

public class Service1 : IService1
{
    public string DoWork(string text)
    {
        return text.ToUpper();
    }
} 
```

在客户端是应动态调用 WCF 服务的控制台应用程序。我使用以下代码：

```
WSHttpBinding binding = new WSHttpBinding(SecurityMode.None);
IChannelFactory<IRequestChannel> factory = binding.BuildChannelFactory<IRequestChannel>(
   new BindingParameterCollection());
factory.Open();

EndpointAddress address = new EndpointAddress("http://localhost:3929/Service1.svc");
IRequestChannel irc = factory.CreateChannel(address);
using (irc as IDisposable)
{
    irc.Open();

    XmlReader reader = XmlReader.Create(new StringReader(
        @"<DoWork xmlns='http://tempuri.org/'>
        <composite xmlns:a='http://www.w3.org/2005/08/addressing' 
        xmlns:i='http://www.w3.org/2001/XMLSchema-instance'>
        <a:StringValue>aaaa</a:StringValue>
        </composite>
        </DoWork>"));

    Message m = Message.CreateMessage(MessageVersion.Soap12,  
                "http://tempuri.org/IService1/DoWork", reader);

    Message ret = irc.Request(m);
    reader.Close();

    Console.WriteLine(ret);
}

//close the factory
factory.Close(); 
```

但是，它在这一行崩溃：

```
Message ret = irc.Request(m); 
```

出现以下错误：

> 传出消息的消息版本 (Soap12 ( [http://www.w3.org/2003/05/soap-envelope](http://www.w3.org/2003/05/soap-envelope) ) AddressingNone ( [http://schemas.microsoft.com/ws/2005/05/addressing/none](http://schemas.microsoft.com/ws/2005/05/addressing/none) ) ) 与编码器 (Soap12 ( [http://www.w3.org/2003/05/soap-envelope](http://www.w3.org/2003/05/soap-envelope) ) Addressing10 ( [http://www.w3.org/2005/08/addressing](http://www.w3.org/2005/08/addressing) ))不匹配。确保绑定配置为与消息相同的版本。

有人知道我做错了什么吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:28:17.777

```
Message.CreateMessage(MessageVersion.Soap12, 
```

`Soap12`您需要指定`Soap12Addressing10`以匹配您的绑定，而不是 MessageVersion 枚举值。

# android - FragmentActivity#onDetachFragment 在哪里？

> ID：12636259
> 
> 赞同：6
> 
> 时间：2012-09-28T08:20:46.937
> 
> 标签：android, android-fragments, android-fragmentactivity

每次我将片段附加到我的活动时，我都想注册它以接收来自活动的事件。这很容易，因为我可以覆盖[`FragmentActivity#onAttachFragment(Fragment)`](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html#onAttachFragment%28android.support.v4.app.Fragment%29). 当从活动中删除片段时，我想从接收事件中注销它。我希望有一个`onDetachFragment`可以以类似方式使用的事件，但我没有找到它。

还有另一种方法可以完成我想做的事情吗？我想在活动中保留注册/取消注册，而不是将其移动到基本片段类（我可以只使用`onAttach`/ `onDetach`）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-02T12:45:13.863

最好使用片段中的 onStart()、onStop() 方法。只需将 getActivity() 转换为您的调用活动类。

# image - 使用图像指令的目标属性的类似缩略图的行为

> ID：12636266
> 
> 赞同：9
> 
> 时间：2012-09-28T08:21:10.523
> 
> 标签：image, python-sphinx, restructuredtext

我使用 Sphinx 生成一些文档。我有一个 reStructuredText 文档，我想将图像放入其中。情况是图像应该是可点击的，这样在用户单击图像后，他们应该以全尺寸显示该图像。我使用 image 指令及其目标选项，如下所示：

```
.. image:: /images/some_image.png
   :alt: Image descripion
   :align: center
   :target: `big_some_image`_

.. _big_some_image: /images/some_image.png 
```

问题是在呈现的页面中我得到：

```
<a href="/images/some_image.png"><img src="../../../_images/some_image.png"></a> 
```

所以`src`图像指令是正确的，但`href`超链接的属性不正确。

问题：

*   有没有办法以图像指令的方式生成链接？我的意思是相对于文件。

*   是否有任何其他（内置）方式具有“缩略图->单击->大图像”行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T00:56:24.407

只需使用 scale 选项：

```
.. image:: large_image.png
    :scale: 20% 
```

单击缩放后的图像时，完整的图像会在其自己的窗口中加载。所以这不会增加页面上的图像大小，但无论如何都会很混乱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T18:43:06.887

当您`image`在 Sphinx 中使用该指令时，Sphinx 会进行一些特殊处理以查找图像文件并将其复制到您的项目（如您的`_images`目录）中，然后呈现 HTML 以指向该位置。

但该`target`选项仅将 URL 作为参数。它对您的 Sphinx 项目或图像的布局方式一无所知，并且不会尝试猜测。

如果您想让它指向同一文件的更大版本，您可能需要执行一些手动步骤（例如可能将文件复制到特定位置），或者可能提供大文件的相对 URL，而不是您在示例中拥有的绝对 URL。

如果您想采用完全不同的方式，您还可以尝试覆盖和修改项目的 HTML 模板以添加一些 JavaScript 以获得所需的点击放大图像效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-03T19:24:35.087

看起来现在有一个 Sphinx 扩展可以做到这一点，而且非常好，[sphinxcontrib-fancybox 0.3.2](https://pypi.python.org/pypi/sphinxcontrib-fancybox/)。使用 安装`pip`，将其添加到 conf.py 中的扩展，然后使用`fancybox`指令：

```
.. fancybox:: images/image.png 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T07:34:28.317

相对链接似乎有效。对于*Mapserver*文档设置，如果将图像放置在`images`目录中，则以下代码中的相对链接在我的本地构建中有效。这是一个使用*图的示例（**目标*链接中“图像”之前的下划线（“_”）是必要的）：

```
.. figure:: ../../images/carto-elements.png
  :height: 400
  :width: 600
  :align: center
  :target: ../../_images/symcon-overlay.png 
```

# android-ndk - 在 NDK 中打开资产不起作用

> ID：12636267
> 
> 赞同：0
> 
> 时间：2012-09-28T08:21:26.403
> 
> 标签：android-ndk

我正在尝试访问我的应用程序中的资产。我似乎以某种方式做错了。

例子：

```
AAssetDir* dir = AAssetManager_openDir( manager, "/" );
const char* file = AAssetDir_getNextFileName( dir );
printf( "Filename %s\n", file );
AAsset* asset = AAssetManager_open( manager, "/AndroidManifest.xml", AASSET_MODE_UNKNOWN );
printf( "Asset %p\n", asset ); 
```

这给了我：

```
Filename AndroidManifest.xml
Asset 0x0 
```

访问资产的正确方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-28T23:19:12.247

```
AAsset* asset = AAssetManager_open( manager, "AndroidManifest.xml", AASSET_MODE_UNKNOWN ); 
```

应该管用。删除文件名前的**“/” 。**

# actionscript-3 - 如何用movieclip打开链接？AS3

> ID：12636270
> 
> 赞同：0
> 
> 时间：2012-09-28T08:21:36.937
> 
> 标签：actionscript-3, flash

我有一个文本区域，其中包含指向 youtube 视频的超链接。我有一个用作 youtube 播放器的影片剪辑。我该如何做到这一点，当用户单击文本区域中的 youtube 而不是使用浏览器导航时，它会将该链接发送到我的电影剪辑？

此外，此文本区域将具有需要正常单击和处理的正常超链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:53:16.593

如果我正确理解您的问题，您需要捕捉用户对特定链接的点击。

在 AS2 中，您可以在 html 标签“a”的 href 参数中编写特殊代码：

```
<a href="asfunction:your_function_name,param"> 
```

在 AS3 中，您可以以类似的方式触发事件：

```
<a href="event:myLink">example text</a> 
```

`text`在这种情况下，TextField 将在属性中使用“myLink”调度 TextEvent.LINK

完成的例子：

```
mText.htmlText = '<a href="event:myLink">example text</a>';
mText.addEventListener(TextEvent.LINK, textEvent)
function textEvent(event:TextEvent) : void {
    trace('link to '+event.text);
} 
```

# csh - 复制以某个字母开头的文件

> ID：12636297
> 
> 赞同：-1
> 
> 时间：2012-09-28T08:23:29.133
> 
> 标签：csh

编辑：

谢谢大家 - 所以如果我做“ls J *”，为什么不列出所有以 J 开头的文件？

我只想将以字母 J 开头的目录复制到我的（cshell）终端窗口中的另一个文件夹中？它肯定是一条快速线，但我似乎无法让它工作，我也无法在网上找到答案。

有人可以让我摆脱痛苦吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:25:33.973

外壳通配符？

```
cp -r J* /path/to/other/dir 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:29:00.913

```
cp -r J* /destination/path/ 
```

-r 选项允许您递归地复制目录

# java - 无法使用 activemq 获取异步消息

> ID：12636300
> 
> 赞同：1
> 
> 时间：2012-09-28T08:23:51.257
> 
> 标签：java, activemq

大家好，我无法使用活动 mq 接收异步消息，下面是我用于发布消息和订阅的代码。

```
 public class publishMessage extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

       InitialContext initCtx = new InitialContext();
            Context envContext = (Context) initCtx.lookup("java:comp/env");
            ActiveMQConnectionFactory connectionFactory = (ActiveMQConnectionFactory) envContext.lookup("jms/ConnectionFactory");
            Connection connection = connectionFactory.createConnection();
            connection.start() ;
            Session session = connection.createSession(true, Session.AUTO_ACKNOWLEDGE);
            Destination destination = session.createQueue("jms/topic/MyQueue");
            MessageProducer producer = session.createProducer(destination);
            producer.setDeliveryMode(DeliveryMode.PERSISTENT) ;
            TextMessage msg=session.createTextMessage();
            msg.setText("Message sent");
                    System.out.println("Message Sent");
            producer.send(msg);
            session.commit() ;
            connection.close() ;
            }catch(Exception ex){
                ex.printStackTrace() ;
            }
    }}

class Consumer{

    protected Queue queue;

    protected String queueName = "jms/topic/MyQueue";

    protected String url = ActiveMQConnection.DEFAULT_BROKER_URL;

    protected int ackMode = Session.AUTO_ACKNOWLEDGE;

    public static void main(String[] args) {
        Consumer rec=new Consumer();
        try {
            rec.run();
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    public void run() throws JMSException{

        System.out.println("URL:" + url);
        ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(url);
        TopicConnection connection = (TopicConnection)connectionFactory.createTopicConnection();
        connection.setClientID("Testingconn1") ;
        connection.start();
        MessageConsumer consumer = null;
        Session session = connection.createSession(true, Session.CLIENT_ACKNOWLEDGE);
        queue = session.createQueue(queueName) ;
        consumer = session.createConsumer(queue);
        consumer.setMessageListener(new MyListener()) ;
        session.commit() ;
        consumer.close();
        session.close();
        connection.close();
    }

}

package com.java;

import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.MessageListener;
import javax.jms.TextMessage;

public class MyListener implements MessageListener{

    @Override
    public void onMessage( final Message message )
    {
        if ( message instanceof TextMessage )
        {
            final TextMessage textMessage = (TextMessage) message;
            try
            {
                System.out.println("Listener:" +  textMessage.getText() );
            }
            catch (final JMSException e)
            {
                e.printStackTrace();
            }
        }

    }
} 
```

当我执行上述代码时，发布者成功发送了一条消息，当我启动消费者时，输出按要求出现，没有输出进入我的控制台。

请帮我解决它或建议一个代码来接收异步消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:28:26.123

您的消费者代码实际上并没有给消费者任何时间来消费消息。当消费者将存在一段时间并且您的应用程序可以处理传入消息时，将使用异步消费者。在上面的代码中，您最好使用 MessageConsumer 的定时接收方法，例如 consumer.receive(5000) 或一些适合您应用的时间段。您的消费者不能保证在创建后立即收到消息，因为代理需要时间来注册消费者并将消息路由到它，因此您必须在您的应用程序中允许这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T10:34:57.547

Your consumer class is correct. It runs smoothly.

But, you consumer is incorrect & you have to modify it.

*   First, add setClientID("any_string_value") after creating connection object;

    ```
     eg: Connection connection = connectionFactory.createConnection();
        // need to setClientID value, any string value you wish
        connection.setClientID("12345"); 
    ```

    *   secondly, use createDurableSubscriber() method instead of createConsumer() for transmitting message via topic.

        ```
         MessageConsumer consumer = session.createDurableSubscriber(topic,"SUB1234"); 
        ```

Here is the modified comsumer class:

```
package mq.test;

import javax.jms.*;

import org.apache.activemq.ActiveMQConnection;
import org.apache.activemq.ActiveMQConnectionFactory;

public class consumer {
    // URL of the JMS server
    private static String url = ActiveMQConnection.DEFAULT_BROKER_URL;

    // Name of the topic from which we will receive messages from = " testt"

    public static void main(String[] args) throws JMSException {
        // Getting JMS connection from the server

        ConnectionFactory connectionFactory = new ActiveMQConnectionFactory(url);
        Connection connection = connectionFactory.createConnection();

        // need to setClientID value, any string value you wish
        connection.setClientID("12345");

        try{
        connection.start();
        }catch(Exception e){
            System.err.println("NOT CONNECTED!!!");
        }
        Session session = connection.createSession(false,
                Session.AUTO_ACKNOWLEDGE);

        Topic topic = session.createTopic("test_data");

        //need to use createDurableSubscriber() method instead of createConsumer() for topic
        // MessageConsumer consumer = session.createConsumer(topic);
        MessageConsumer consumer = session.createDurableSubscriber(topic,
                "SUB1234");

        MessageListener listner = new MessageListener() {
            public void onMessage(Message message) {
                try {
                    if (message instanceof TextMessage) {
                        TextMessage textMessage = (TextMessage) message;
                        System.out.println("Received message"
                                + textMessage.getText() + "'");
                    }
                } catch (JMSException e) {
                    System.out.println("Caught:" + e);
                    e.printStackTrace();
                }
            }
        };

        consumer.setMessageListener(listner);
        //connection.close();

    }
} 
```

# ruby-on-rails - 使用覆盖函数处理 before_filter

> ID：12636301
> 
> 赞同：0
> 
> 时间：2012-09-28T08:24:07.143
> 
> 标签：ruby-on-rails, ruby

```
class ApplicationController < ActionController::Base
  def func
  end
end

class BaseController < ApplicationController
  def func(a)
  end
end

class MyController < BaseController
  before_filter :func # I want this to call ApplicationController::func
end 
```

在这种情况下， BaseController::func 被调用。我如何调用 ApplicationController 的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:44:03.860

我不认为有一个很好的方法来破解`before_filter`自己以使其工作。但我认为这种替代方案可能会满足您的需求。

试试这个。

```
class MyController < BaseController
  before_filter :application_func

  private
    def application_func
      ApplicationController.func
    end
end 
```

# macos - 如何注册自定义非文档 UTI / 文件类型以供 OSX 识别？

> ID：12636306
> 
> 赞同：8
> 
> 时间：2012-09-28T08:24:44.893
> 
> 标签：macos, osx-mountain-lion, uti

我已经阅读了有关此问题的所有票证，但我仍然不正确。我有一个非文档 OSX 应用程序（用于 OSX Lion 和 MountainLion）。我希望这个应用程序导出和导入与自定义文件扩展名“.iobs”关联的自定义数据。在内部，这些文件只是使用 [NSKeyedArchiver archivedDataWithRootObject:] 存档的数据，并以“iobs”扩展名保存到磁盘上。

所以，我的清单是这样的：

1) 导出机制：勾选。我的应用程序正确创建 .iobs 文件。如果我在终端中运行“file <filename.iobs>”，我会得到“iObserve_exportedItems.iobs：Apple 二进制属性列表”

2）出口UTI的声明，检查。如下图所示。我没有声明自定义 Document 类型，因为我从不在我的应用程序中使用 NSDocument，而且没有任何意义。无论如何，我已经尝试过但失败了。我也尝试了“符合”条目的不同组合，但没有成功。

![Xcode4 导出的自定义 UTI 声明的快照](../Images/1255cfdcd2994a1c61b9e2b36c69492f.png)

3）有第三点吗？？？我需要启动我的应用程序一次让系统知道吗？到目前为止，我只是在 Xcode 的 Debug 中运行它，这没有任何效果。所以我猜我的 Info.plist 是错误的，但我是从 Xcode4 界面中填写的，所以？？？

感谢您的任何帮助、提示、问题、建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T12:23:24.513

好的，很明显，即使我没有指定文档类，我也必须声明文档类型。请参阅随附的屏幕截图。请注意，仅保留文档 UTI 不起作用。我确实需要这两个（导出的 UTI 和文档类型）。另请注意，如果我说它符合 com.apple.binary-property-list，我没有正确的图标。

对于那些想知道的人来说，除了启动应用程序一次之外，没有什么可以“注册”类型（及其后续更改）。

![在此处输入图像描述](../Images/ad65ceabe486e837ba04fc4de9bbcdee.png)

# android - 在android eclipse中裁剪图像

> ID：12636310
> 
> 赞同：1
> 
> 时间：2012-09-28T08:24:57.467
> 
> 标签：android, image

我有一个拍照的功能。用户可以从相机或图库中拍摄照片。如果用户选择了一张图片，该图片将显示在另一个活动中。在另一个活动中，用户可以编辑这张图片。在这种情况下，我想制作一个裁剪图像的功能。但是当它运行时，我选择crop，什么也没有发生。你能给我一个解决方案吗？这是我的代码

```
package shoop3.android.edu;

import java.io.File;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;

import android.content.ActivityNotFoundException;
import android.content.ComponentName;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.ResolveInfo;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.provider.MediaStore;
import android.view.View;

import android.net.Uri;

import android.os.Bundle;
import android.os.Environment;

import android.widget.Button;
import android.widget.ArrayAdapter;
import android.widget.Toast;
import android.widget.ImageView;

public class editorActivity extends Activity {
    private Uri mImageCaptureUri;
    private ImageView mImageView;

    private static final int CROP= 1;
    private static final int HASIL_CROP = 2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.editor);

        ImageView imageeditor = (ImageView)findViewById(R.id.ImageViewEditor);
        Intent hasil = getIntent();

        String path = hasil.getStringExtra("pathimage");
        mImageCaptureUri = hasil.getData();
        //Bitmap b = (Bitmap) getIntent().getParcelableExtra("mImageView");
        imageeditor.setImageBitmap(BitmapFactory.decodeFile(path));

        final String [] items           = new String [] {"CROP"};               
        ArrayAdapter<String> adapter    = new ArrayAdapter<String> (this, android.R.layout.select_dialog_item,items);
        AlertDialog.Builder builder     = new AlertDialog.Builder(this);

        builder.setTitle("Image Editor");
        builder.setAdapter( adapter, new DialogInterface.OnClickListener() {
            public void onClick( DialogInterface dialog, int item ) { 

                if(item == 0){
                Intent i = getIntent();
                mImageCaptureUri = i.getData();
                startActivityForResult(i, CROP);
                }

                }

        } );

        final AlertDialog dialog = builder.create();

        //Button button     = (Button) findViewById(R.id.btn_crop);
        mImageView      = (ImageView) findViewById(R.id.ImageViewEditor);
        mImageView.setOnClickListener(new View.OnClickListener() {  
            @Override
            public void onClick(View v) {
                dialog.show();
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode != RESULT_OK) return;

        switch (requestCode) {

            case CROP: 
                mImageCaptureUri = data.getData();

                doCrop();

                break;          

            case HASIL_CROP:            
                Bundle extras = data.getExtras();

                if (extras != null) {               
                    Bitmap photo = extras.getParcelable("data");

                    mImageView.setImageBitmap(photo);
                }

                File f = new File(mImageCaptureUri.getPath());            

                if (f.exists()) f.delete();

                break;

        }
    }

    private void doCrop() {

        try{
            Intent cropintent = new Intent("com.android.action.CROP");
            cropintent.setDataAndType(mImageCaptureUri, "/image/*");
            cropintent.putExtra("crop", true);
            cropintent.putExtra("aspectX", 1);
            cropintent.putExtra("aspectY", 1);
            cropintent.putExtra("outputX", 256);
            cropintent.putExtra("outputY", 256);
            cropintent.putExtra("return-data", true);
            startActivityForResult(cropintent, HASIL_CROP);
        }catch(ActivityNotFoundException e){
            String errorMessage = "Your device not Support";
            Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT).show();
        }

    }} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T22:16:23.737

您在此行中使用的裁剪方法：

```
 Intent cropintent = new Intent("com.android.action.CROP"); 
```

并非所有安卓设备都支持。我有同样的问题，我现在也在为自己解决这个问题。

**编辑** 您的问题可能只是您忘记了相机：

```
 Intent cropintent = new Intent("com.android.camera.action.CROP"); 
```

# c# - Castle.Windsor：3.1 中工厂和拦截器的变化？

> ID：12636311
> 
> 赞同：2
> 
> 时间：2012-09-28T08:25:00.263
> 
> 标签：c#, castle-windsor, castle-dynamicproxy, windsor-facilities

以下代码在 Castle.Windsor 2.5.3 中按原样通过，但在升级到 3.1.0 后失败

异常是 InvalidProxyConstructorArgumentsException，它指出“无法实例化类的代理：测试。找不到无参数的构造函数。”

```
 static void Main(string[] args)
    {
        var container = new WindsorContainer();
        container.Register(Component.For<Interceptor>(),
                           Component.For<Test>().UsingFactoryMethod(() => new Test(""))
                                                .Interceptors<Interceptor>());

        var test = container.Resolve<Test>(); //THROWS IN 3.1.0
    }
}

public class Test
{
    public readonly string S;

    public Test(string s)
    {
        S = s;
    }
}

public class Interceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        invocation.Proceed();
    }
} 
```

在我的真实代码中，Test 是一个使用工厂方法构建并注入到存储库中的 MongoDatabase。

在我的真实代码中，我还使用 AbstractFacility 的继承者来注册拦截器。这样我就不必为每个组件注册拦截器。两种形式的拦截器使用似乎在以后的解决方案中都以相同的方式工作/失败（在 2.5.3/3.1.0 中）。以下是该设施的简化版本供参考：

```
public class Facility : AbstractFacility
{
    protected override void Init() { Kernel.ComponentRegistered += KernelComponentRegistered; }

    static void KernelComponentRegistered(string key, IHandler handler)
    {
        if (typeof(IInterceptor).IsAssignableFrom(handler.ComponentModel.Implementation)) return;
        handler.ComponentModel.Interceptors.AddIfNotInCollection(InterceptorReference.ForKey("SomeInterceptor"));
    }
} 
```

我查看了 Castle.Windsor 源代码，抛出的代码期望在给定的类周围包装一个代理，这就是它寻找无参数构造函数的原因。但是在 2.5.3 中，我认为代理生成代码从未被执行，并且容器（在我看来是正确的）解析为 Test/MongoDatabase 的非代理版本

所以我猜有两个问题：1）发生了什么变化？2）如何在不为工厂方法解析的对象生成代理的情况下保留我的拦截器注册？或者我猜想如何使用组件的工厂方法生成代理......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T23:58:58.193

在 2.5.3 中，Windsor 似乎默默地未能应用拦截器。在 3.1.0 中，Windsor 无法将拦截器应用于您注册的类型时会引发异常。Windsor 使用他们的动态代理库通过生成您请求的实例的代理来支持拦截器 (AOP)。所以这两个版本的问题是你给它的类不能变成一个动态代理，因为它没有一个无参数的构造函数。我认为 3.1.0 中的行为更正确，因为如果您希望应用拦截器，那么找出问题所在会困难得多。

如果您想保持 2.5.3 中它静默失败的行为，只需在您的设施中注册拦截器之前添加一个检查以查看该类型是否可以被代理。这样做可能会更好，但这是我想出的：

```
try
{
    ProxyGenerator generator = new ProxyGenerator();
    generator.CreateClassProxy(handler.ComponentModel.Implementation);
    handler.ComponentModel.Interceptors.AddIfNotInCollection(InterceptorReference.ForType<MyInterceptor>());
}
catch {} 
```

从很多方面来看，这都是糟糕的代码，但它会重新创建您习惯的行为。请注意，当您真正想要拦截器的不同类并且正在努力弄清楚为什么没有调用它时，它不会咬住您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T22:30:18.593

Stefan 让我走上了正轨。在 2.5.3 中没有将拦截器分配给 Test 的事实是伪装成错误的错误/功能。3.1.0 的行为更正确，并迫使您明确说明您想要拦截器的内容。由于我的实际代码涉及一个设施，这里是解决问题的解决方案：

```
public class Facility : AbstractFacility
{
    protected override void Init() { Kernel.ComponentRegistered += KernelComponentRegistered; }

    static readonly List<Type> TypesNotToIntercept = new List<Type>
    {
        typeof(IInterceptor),   //Don't intercept Interceptors
        typeof(MulticastDelegate),  //Func<> and the like
        typeof(LateBoundComponent), //Resolved with a factory, such as MongoDatabase
    };

    static void KernelComponentRegistered(string key, IHandler handler)
    {
        if (TypesNotToIntercept.Any(type => type.IsAssignableFrom(implementation));
            return;
        handler.ComponentModel.Interceptors.AddIfNotInCollection(InterceptorReference.ForKey("SomeInterceptor"));
    }
} 
```

# c++ - 递归策略模式

> ID：12636312
> 
> 赞同：1
> 
> 时间：2012-09-28T08:25:02.020
> 
> 标签：c++, oop, design-patterns, strategy-pattern

我目前正在为我的项目设计一些课程，`C++`但我遇到了问题。我想创建一个`camera`包含所有需要的值（例如转换矩阵）的类，但呈现的函数`camera`应该是可交换的。这听起来像是策略模式的常见情况。因此，我创建了一个接口，该接口定义了该接口`render-function`并将`camera`类 a`pointer`赋予该接口。问题是`render function`需要访问`camera`类中的所有数据，因此我给这个函数一个指向`camera`类的指针作为参数。它看起来像这样：

```
#include "ICameraRender.h"

class Camera{
private:
    ICameraRender*      _cameraRender;

public:
    Camera();
    Camera(ICameraRender& cameraRender);
    ~Camera();

    void renderCamera(){  _cameraRender->render(this); }

    void setCameraRender(ICameraRender& cameraRender);
        /..../

};

class ICameraRender{
public:
    virtual ~ICameraRender(){

    }

    //Override me
    virtual void render(Camera* camera) = 0;
}; 
```

`camera->renderCamera()`由于无限循环的责任（调用in ） `render-function`，这似乎不是一个优雅的解决方案`ICameraRender`。这个问题有更好的解决方案吗？

问候

编辑：

我想出了另一个解决方案。由于对相机数据进行操作的函数只需要访问我认为可以拆分相机类本身的数据。一个名为 Camera 和 CameraModel 的类。最后一个保存所有需要的数据，第一个对其进行操作。因此，我只需将指向 CameraModel 的指针传递给我的函数：

```
class CameraModel{
private:
    /...data.../
public:
   /...setter and getter.../
};

class Camera{
private: 
    CameraModel*   _cameraModel;
    ICameraRender* _cameraRender;

public:
Camera();
    Camera(ICameraRender& cameraRender);
    ~Camera();

    void renderCamera(){  _cameraRender->render(_cameraModel); }

    void setCameraRender(ICameraRender& cameraRender);
        /..../
};

class ICameraRender{
public:
    virtual ~ICameraRender(){

    }

    //Override me
    virtual void render(CameraModel* cameraModel) = 0;
}; 
```

现在渲染函数（仅根据用户输入计算相机的新值）不再可以访问 renderCamera 函数。您如何看待这个解决方案？

问候斯坦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:30:23.403

你是对的，这似乎是一个糟糕的设计。:)

我不明白为什么相机渲染需要访问相机。我确定您可以将其他内容作为参数传递。渲染不需要访问所有相机成员，因此您可以传递它需要的那些（如果有很多，请将它们包装在一个结构`CameraConfig`或类似的东西中）。

如果不同的渲染需要不同的参数，您可以使用`ICameraConfig`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T17:23:06.413

这可能是使用基于策略的设计来实现策略模式的好时机，特别是因为您使用的是 C++，并且您可能针对的是 2002 年以前的编译器。（由于 C++ 的模板机制非常棒，我们可以得到以这种方式免费提供策略模式！）

首先：让您的类在模板参数处接受策略/策略类（在本例中为您的 ICameraRenderer）。然后，指定您正在使用该模板参数中的某个方法。在相机类中调用该方法...

然后使用 render() 方法将您的策略​​实现为普通的旧类！

这看起来像这样：

```
class Camera<RenderStrategy>{
    using RenderStrategy::render;

    /// bla bla bla 

    public:
        void renderCamera(){  render(cameraModel); }
};

class SpiffyRender{
    public:
        void render(CameraModel orWhateverTheParameterIs){ // some implementation goes somewhere }
}; 
```

每当您想制作使用其中一种策略/策略的相机时：

```
// the syntax will be a bit different, my C++ chops are rusty; 
// in general: you'll construct a camera object, passing in the strategy to the template  parameter
auto SpiffyCamera = new Camera<SpiffyRender>(); 
```

（由于您的渲染器策略没有任何状态，这使得这种方法更加有利）

如果您一直在更改渲染器，那么这种模式/方法会变得不太有利......但是如果您的相机总是以相同的方式渲染，那么这是一种更好的方法。如果你的渲染器有状态，你仍然可以使用这个方法；但是您需要引用类中的实例，并且不会使用 Using:: 语句。（一般来说，有了这个，你编写的样板文件更少，不需要在运行时进行任何赋值或分配，编译器为你工作）

有关这方面的更多信息，请参阅：[http](http://en.wikipedia.org/wiki/Policy-based_design) ://en.wikipedia.org/wiki/Policy-based_design 或阅读现代 C++ 设计......无论如何，这是一本很棒的书！[http://www.amazon.com/Modern-Design-Generic-Programming-Patterns/dp/0201704315](https://rads.stackoverflow.com/amzn/click/com/0201704315)

顺便说一句：您可能想了解 C++x11 给您带来的一些好处。它会真正清理您的代码并使其更安全。（尤其是共享/唯一/等 ptr 类。）

# java - Java 语法方法和类

> ID：12636313
> 
> 赞同：1
> 
> 时间：2012-09-28T08:25:14.767
> 
> 标签：java

我对 Java 很陌生，对编程也比较陌生。我有 3 个课程，它们是相连的。

*第一类：飞行*

```
public class Flight {

    private int flightNumber;
    Passenger passenger1 = null; // two objects?
    Passenger passenger2 = null;
    private int confirmedPassengers = 0;
    Passenger bagsChecked;
    //private boolean bagsLoaded;

    public Flight(int fn, int cf){
        flightNumber = fn;
        //passenger1 = p1;
        //passenger2 = p2;
        confirmedPassengers = cf;
        //bagsChecked = bc;

    }

        public boolean addPassenger(Passenger p){
            if (confirmedPassengers == 0){
                passenger1= p;
                confirmedPassengers+=1;         
                System.out.println("P1 has been added.");
                return true;
            }   

            if (confirmedPassengers == 1){
                passenger2 = p;
                confirmedPassengers+=1;
                System.out.println("P2 has been added");
                return true;
            }

                else{
                    System.out.println("This passenger was not added because the capacity is full.");
                    return false;

                }
        }

    } 
```

*第 2 类：乘客*

```
public class Passenger {

    private String name;
    Flight flight;
    private int bagsChecked;
    private String confirmationNumber;

    public Passenger(String n, Flight f, int b, String cn){
        name = n;
        flight = f;
        bagsChecked = b;
        confirmationNumber = cn;
    }

    public boolean hasConfirmation(){
        if (confirmationNumber != null) {
            return true;
        }

        else{
            return false;

        }

    }

} 
```

*第 3 类：售货亭：*

```
public class Kiosk {
    private int kioskNumber;

    public Kiosk (int k){
        kioskNumber = k;

    }

    public void checkIn(Passenger p){

        if (p.hasConfirmation() == true) {

            addPassenger(p); // trying to add Passenger here
            System.out.println("Passenger " + p.getName() + ""+ "added in at Kiosk1 ");

        }

    }
} 
```

当乘客`Passenger`在. 如何使用方法添加到？`Flight``Kiosk``addPassenger``Flight``Passenger``Kiosk`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:30:55.717

在`Kiosk.checkIn()`：

```
p.flight.addPassenger(p); 
```

一些建议：

当你有一个集合（比如 passanger1 和 passanger2）时，你可能想要使用一个数组或者更好的一些[集合](http://docs.oracle.com/javase/6/docs/technotes/guides/collections/index.html)形式，比如`ArrayList`：

```
ArrayList<Passanger> passangers = new ArrayList<Passanger>(2);

passangers.add(p);
System.out.println(passangers.size()); 
```

公共数据成员也不是很好。在需要的地方创建 setter 和 getter，所以上面的代码应该是这样的（在实现之后`Passanger.getFlight()`：

```
p.getFlight().addPassenger(p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:29:39.967

您需要在 Kiosk 的某个地方创建一个 Flight 类的实例，否则您将无法调用它的方法，是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:34:08.770

使用组合

```
public class Kiosk { 

private int kioskNumber;
private Flight f;
private Passenger ps;

public Kiosk (int k){
    kioskNumber = k;

}

public void checkIn(Passenger p){

    if (p.hasConfirmation() == true) {

        f.addPassenger(p); // trying to add Passenger here
        System.out.println("Passenger " + p.getName() + ""+ "added in at Kiosk1 ");

    }

}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:34:32.343

```
if (p.hasConfirmation() == true) {

    addPassenger(p); // trying to add Passenger here
    System.out.println("Passenger " + p.getName() + ""+ "added in at Kiosk1 ");
} 
```

你的`addPassenger(p)`方法不是静态的。所以你不能调用它，除非你有一个声明它的类的实例。

在您的`Kiosk`类中，将对类的引用声明`Flight`为实例变量..然后调用`addPassenger()`该实例..

```
private Flight flight = p.getFlight(); // Edited -- new Flight(); 
```

你的电话`addPassenger()`是这样的： -

```
flight.addPassenger(p); 
```

您需要`List<Passenger>`在类中添加 a `Flight`.. 这样您就可以维护该航班中所有乘客的列表.. 并使用上述方法，将 a 添加`passenger`到`flight`

希望有帮助..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T08:35:43.707

将 Flight Class 导入 Kiosk 并将该 Flight Class 的实例放入 Kiosk。现在使用 Flight 类的实例，您可以访问方法 addPassanger。**就像**Instance_Of_Flight_Class.Method_Name

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T08:35:57.053

```
// add a new method to Passanger class
public Flight getFlight() { return flight; }

// change how you use addPassanger() in Kiosk
if (p.hasConfirmation()) {
    Flight passangersFlight = p.getFlight();
    if (passangersFlight != null) {
        passangersFlight.addPassanger(p);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T08:48:46.650

为什么不直接编辑该`checkIn(Passenger p)`方法以具有两个参数，因为您`Kiosk`看起来像某种 Controller 类：

```
checkIn(Passenger p, Flight f) { 
  if (f != null) f.addPassenger(p); 
} 
```

?

正如其他人所说，您应该避免`addPassenger`通过`Flight`对象中引用的`Passenger`对象进行调用，因为您不希望`Passenger`与他自己对`Flight`.

你*可以，但不应该*`Passenger`通过他自己的`Flight`参考添加。有`Passenger`这个代码：

```
public boolean addMeToFlight() {
  return flight.addPassenger(this);
} 
```

然后，您可以调用`Kiosk`: `p.addMeToFlight();`。**

# macos - macosx下如何用arch armv7s编译libcurl？

> ID：12636315
> 
> 赞同：0
> 
> 时间：2012-09-28T08:25:19.010
> 
> 标签：macos, libcurl, cross-compiling

我已经在我的电脑上安装了 Xcode 4.5 和 iOS6.0 SDK、MacOSX 10.7 SDK、命令行工具。[我从http://curl.haxx.se/download/curl-7.27.0.tar.gz](http://curl.haxx.se/download/curl-7.27.0.tar.gz)下载 libcurl并使用 arch armv7s 为 iOS 编译它。

我做了以下操作：

1.  > `export CC="/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7s"`
    > 
    > export LDFLAG="-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk --Wl,-syslibroot /Applications/Xcode.app/Contents/Developer/Platforms /iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk"
    > 
    > 导出 CFLAG="-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk"

2.  > ./configure --host=arm-apple-darwin10

并得到以下错误：

```
 $ ./configure --host=arm-apple-darwin10
configure: WARNING: If you wanted to set the --build type, don't use --host.
    If a cross compiler is detected then cross compile mode will be used.
checking whether to enable maintainer-specific portions of Makefiles... no
checking whether to enable debug build options... no
checking whether to enable compiler optimizer... (assumed) yes
checking whether to enable strict compiler warnings... no
checking whether to enable compiler warnings as errors... no
checking whether to enable curl debug memory tracking... no
checking whether to enable hiding of library internal symbols... yes
checking whether to enable c-ares for DNS lookups... no
checking for sed... /usr/bin/sed
checking for grep... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for arm-apple-darwin10-ar... no
checking for ar... /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ar
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
checking for arm-apple-darwin10-strip... no
checking for strip... strip
checking curl version... 7.27.0
checking build system type... i386-apple-darwin12.2.0
checking host system type... arm-apple-darwin10
checking for style of include used by make... GNU
checking for arm-apple-darwin10-gcc... /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7s
checking for C compiler default output file name... 
configure: error: in `/Users/eric/working/curl-7.27.0':
configure: error: C compiler cannot create executables
See `config.log' for more details. 
```

有人知道怎么做吗？

# jmock - 如何在 jMock 中为每个连接模拟 2 个或多个准备好的语句？

> ID：12636318
> 
> 赞同：0
> 
> 时间：2012-09-28T08:25:32.637
> 
> 标签：jmock

```
public void testCreate() throws ApplicationException {
    DutyDrawback drawback = new DutyDrawback();
    drawback.setSerialNumber("TEST123");
    drawback.setSnProcessInd("Y");
    drawback.setMediaNumber("TEST111");
    drawback.setMnProcessInd("Y");
    drawback.setConfirmedInd("Y");
    drawback.setResponseCode("1");
    drawback.setResponseMsg("MSG");
    drawback.setLastChangedUser("USER");
    drawback.setLastChangedDate(new Date(System.currentTimeMillis()));

    mockILogger.expects(atLeastOnce()).method("informationalEvent");
    Logger.setMockLogger((ILogger) mockILogger.proxy());

    // Set up the statement expectations
    Mock mockStatement = mock(PreparedStatement.class);
    mockStatement.expects(atLeastOnce()).method("setString");
    mockStatement.expects(once()).method("executeUpdate").will(returnValue(1));

    Mock mockStatement1 = mock(PreparedStatement.class);
    mockStatement1.expects(atLeastOnce()).method("setString");
    mockStatement1.expects(once()).method("executeUpdate").will(returnValue(1));

    // Set up the connection expectations
    mockConnection.expects(once()).method("setAutoCommit");
    mockConnection.expects(once()).method("commit");
    mockConnection.expects(once()).method("prepareStatement").will(returnValue(mockStatement1.proxy()));
    mockConnection.expects(once()).method("prepareStatement").will(returnValue(mockStatement.proxy()));

    TVSUtils.setMockConnection((Connection) mockConnection.proxy());
    DutyDrawbackDAO drawbackDAO = new DutyDrawbackDAO();
    int count = drawbackDAO.create(drawback);
    assertEquals(2, count);
} 
```

我得到以下跟踪：

org.jmock.core.DynamicMockError：mockPreparedStatement：意外调用被调用：mockPreparedStatement.executeUpdate() 允许：至少预期一次并且已被调用：setString，预期一次无效并且已被调用：executeUpdate，返回 <1>

```
at org.jmock.core.AbstractDynamicMock.mockInvocation(AbstractDynamicMock.java:96)
at org.jmock.core.CoreMock.invoke(CoreMock.java:39)
at $Proxy2.executeUpdate(Unknown Source)
at com.cat.tvs.dao.DutyDrawbackDAO.create(DutyDrawbackDAO.java:102)
at com.cat.tvs.dao.DutyDrawbackDAOTest.testCreate(DutyDrawbackDAOTest.java:75)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)
at java.lang.reflect.Method.invoke(Method.java:391)
at junit.framework.TestCase.runTest(TestCase.java:164)
at org.jmock.core.VerifyingTestCase.runBare(VerifyingTestCase.java:39)
at junit.framework.TestResult$1.protect(TestResult.java:106)
at junit.framework.TestResult.runProtected(TestResult.java:124)
at junit.framework.TestResult.run(TestResult.java:109)
at junit.framework.TestCase.run(TestCase.java:120)
at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196) 
```

我不确定我在这里做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:59:13.150

首先，您似乎正在使用 jmock1，您可能会考虑迁移到 jmock2。

失败表明您在不期望的情况下调用了 executeUpdate()。你不止一次调用它吗？

最后，我通常建议不要编写针对 JDBC 的模拟测试，尽管我多年前曾写过一篇论文来展示如何做到这一点。我们谈论“只有你拥有的模拟类型”有很多原因，其中之一是模拟测试假设第三方实现不会改变。对于 JDBC，我建议编写针对真实数据库的小实例运行的集成测试。

# php - 为什么我得到 typeError 值为 null 但在我的萤火虫中我可以看到有值而不是 null？

> ID：12636323
> 
> 赞同：1
> 
> 时间：2012-09-28T08:26:24.987
> 
> 标签：php, json, jquery

为什么我得到 typeError 值为 null 但在我的萤火虫中我可以有值而不是 null，有什么问题？

这是我的ajax代码：

```
 $.ajax({
    url: 'get-products.php',
    type: 'post',
    datatype: 'json',
    data: { category: $('.category').val().trim(), keyword: $('.keyword').val().trim() },
    success: function(data){
        var toAppend = '';
        toAppend += '<thead><th>Product Name</th><th>Image</th><th>Price</th><th>Weight</th><th>ASIN</th><th>Category</th></thead>';
        if(typeof data === "object"){
            for(var i=0;i<data.length;i++){
                toAppend += '<tr><td>'+
                data[i]['product_name'][0]+'</td><td><img src="'+
                data[i]['image'][0]+'" alt=""></td><td>'+
                data[i]['price'][0]+'</td><td>'+                            
                data[i]['weight']+'</td><td>'+                                      
                data[i]['asin'][0]+'</td><td>'+                                         
                data[i]['category'][0]+'</td></tr>';
            }
            $('.data-results').append(toAppend);
        }
    }
}); 
```

这是我的 php 代码，我知道这是有效的：

```
 foreach($xml->Items->Item as $item){
$items_from_amazon[] = array(
        'asin'=>$item->ASIN,
        'product_name'=>$item->ItemAttributes->Title, 
        'image'=>$item->SmallImage->URL,
        'price'=>$item->ItemAttributes->ListPrice->FormattedPrice, 
        'category'=>$item->ItemAttributes->ProductGroup, 
        'weight' => (string) $item->ItemAttributes->PackageDimensions->Weight.' lbs');
}
echo json_encode($items_from_amazon);
?> 
```

这是我的萤火虫的结果：

![在此处输入图像描述](../Images/3c91ed726bbf80103dba0dcce7ed9dba.png)

这是我的示例输出，即使图像中仍然有空结果，我还能显示结果吗？如果图像为空，则不显示图像

![在此处输入图像描述](../Images/952e10a906e82d16be975f87c743fb55.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:29:52.130

在萤火虫图像中，它看起来像是在第 7 个索引处显示图像为空。因此，如果您执行 data.image[index] 您正在访问一个无效的内存位置。image 属性必须指向某个东西。

```
 for(var i=0;i<data.length;i++){
//You can save default image in a global variable, hidden div... it is up to you. 
                var img ;
                if(data[i]['image'] === null){
                  img = defaultImage ;
                }
                else
                { 
                    img = data[i]['image'][0];  
                }
                toAppend += '<tr><td>'+
                data[i]['product_name'][0]+'</td><td><img src="'+
                img +'" alt=""></td><td>'+ //use img here
                data[i]['price'][0]+'</td><td>'+                            
                data[i]['weight']+'</td><td>'+                                      
                data[i]['asin'][0]+'</td><td>'+                                         
                data[i]['category'][0]+'</td></tr>';
            } 
```

希望你能明白这一点。

# c# - 使用 Unity 作为 IoC 的 Rebus Servicebus

> ID：12636325
> 
> 赞同：2
> 
> 时间：2012-09-28T08:26:46.223
> 
> 标签：c#, dependency-injection, unity-container, servicebus, rebus

我对 Rebus 有几个新手入门问题。[Rebus 自述文件](https://github.com/mookid8000/Rebus)中的所有精彩示例都使用温莎城堡，但我没有那个选项；相反，我必须使用 Unity。

我的第一个挑战是为 Unity IoC 容器找到合适的适配器，如示例所述：

```
var someContainerAdapter =
    new AdapterForMyFavoriteIocContainer(myFavoriteIocContainer); 
```

我终于在[这里](http://www.koders.com/csharp/fid6E93C0F14A07DD3014593C36991A3E76A5D3688E.aspx?s=control)找到了一些似乎可以完成这项工作的代码，但也许存在更好的容器，因为我必须自己实现**IContainerAdapter**接口（我想知道是否需要......）。

但我可以忍受那个...

我的下一个问题更糟，我还没有发现。在 Rebus Getting started-example 中，以下内容用于向 IoC 容器添加处理程序：

```
container.Register(
    Component.For<IHandleMessages<DateTime>>()
    .ImplementedBy<PrintDateTime>()); 
```

以上是 Windsor Castle 语法，我不知道 Unity 语法应该如何用于相同的操作。所以我在这里需要一些帮助。一个建议是，如果我可以参考一个适用于 Unity 的小型解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:50:53.123

我的建议是使用[`Rebus.Unity`](https://github.com/mookid8000/Rebus/tree/master/src/Rebus.Unity)，它是 Rebus 的即用型 Unity 容器适配器，由一位出色的 Rebus 贡献者制作。

它有一个 NuGet 包，因此您可以`install-package Rebus.Unity`（或者以任何一种方式将 NuGet 包添加到您的项目中的首选方式）。

现在，为了向 Unity 注册处理程序，您应该知道 Unity 的*行为与其他所有容器的行为不同`ResolveAll`（*至少是我所知道的那些），这要求您的所有处理程序都已注册作为命名注册。

我不记得执行此操作的确切 Unity 语法，但我认为它看起来有点像这样：

```
container.RegisterType<IHandleMessages<SomeMessage>, MyMessageHandler>("id"); 
```

为了注册`MyMessageHandler`为`SomeMessage`. 各种注册函数还有其他几个重载，因此您应该能够找到适合您需要的一个 - 但请记住，*对于 Unity，由于 Rebus 做了 a `ResolveAll`，您必须始终使用 key/id 注册处理程序*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:36:55.363

使用 Unity 和 Rebus 需要我注册以下类型的 IHandleMessages

*   订阅消息
*   IRebusControlMessage
*   目的

...因为使用上述类型调用 IContainerAdapter.GetHandlerInstancesFor< T >。

而且恐怕不是这个想法。

如果不指定实现接口的类型，我就无法统一使用接口作为 Key 来解析类型。

如果一位出色的 Rebus 贡献者可以发布一个使用 Unity 的示例，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-22T19:06:06.970

如上所述，Unity 只解析请求的类型，它不查找继承的类或接口。

有一种方法可以将 Unity 与多态解析一起使用，但如果您实现一个使用反射来查找您所追求的实现的 UnityExtension。我们需要一个 Rebus 适配器来实现具有多态功能和方法 Register<> 和 Handle<> 的统一性。

这是我们使用 Unity 的 Rebus 版本，效果很好。

公共类 UnityContainerAdapter：IContainerAdapter，IDisposable {
公共 IBus 总线 { 获取；内部集；}

```
private readonly IUnityContainer _unityContainer;
private readonly IHandlerRegistrator _handlerRegistrator;

public UnityContainerAdapter(IUnityContainer unityContainer)
{
    _unityContainer = unityContainer;

    _handlerRegistrator = _unityContainer
        .AddNewExtension<AllThatImplements>()
        .Configure<IHandlerRegistrator>();
}

public IEnumerable<IHandleMessages> GetHandlerInstancesFor<T>()
{
    return _unityContainer.ResolveAll<IHandleMessages<T>>();
}

public void Release(IEnumerable handlerInstances)
{
    foreach (IDisposable disposable in handlerInstances.OfType<IDisposable>())
        disposable.Dispose();
}

public void SaveBusInstances(IBus bus)
{
    Bus = bus;
    _unityContainer.RegisterInstance(typeof(IBus), bus);
    _unityContainer.RegisterType<IMessageContext>(new InjectionMember[1]
    {
        new InjectionFactory(c => (object) MessageContext.GetCurrent())
    });
}

public UnityContainerAdapter Register<THandler>()
{
    _handlerRegistrator.RegisterImplementingType<THandler>(typeof(IHandleMessages<>));
    return this;
}

public UnityContainerAdapter Handle<TMessage>(Action<TMessage> handler)
{
    _unityContainer.RegisterType<IHandleMessages<TMessage>, HandlerMethodWrapper<TMessage>>(Guid.NewGuid().ToString(), new InjectionConstructor(handler));
    return this;
}

internal class HandlerMethodWrapper<T> : IHandleMessages<T>
{
    private readonly Action<T> _action;

    public HandlerMethodWrapper(Action<T> action)
    {
        _action = action;
    }

    public void Handle(T message)
    {
        _action(message);
    }
}

public void Dispose()
{
    _unityContainer.Dispose();
}

#region - Unity Extionsion -
internal class AllThatImplements : UnityContainerExtension, IHandlerRegistrator
{
    protected override void Initialize() { }

    public void RegisterImplementingType<T>(Type implementationToLookFor)
    {
        var closedType = typeof(T);

        closedType.GetInterfaces()
                  .Where(x => x.IsGenericType)
                  .Where(x => x.GetGenericTypeDefinition() == implementationToLookFor)
                  .ToList()
                  .ForEach(x => Container.RegisterType(x, closedType, Guid.NewGuid().ToString()));
    }
}

internal interface IHandlerRegistrator : IUnityContainerExtensionConfigurator
{
    void RegisterImplementingType<T>(Type inheritedTypeToLookFor);
}
#endregion 
```

}

# python - 是否可以在 Django 模板中获取完整的 URL（包括域）

> ID：12636329
> 
> 赞同：5
> 
> 时间：2012-09-28T08:26:53.240
> 
> 标签：python, django, django-templates

我发现标签`{% url path.to.view %}`只能返回 URL 的路径，如何获取带有域名的完整 URL？

实际上，我想做的是添加一个指向我网站的**另一个**视图的链接。但`{% url path.to.view %}`只能得到我认为的路径。结果，链接无法指向我想要的。

我的解决方案是`HttpRequest.get_host()`在第一个视图中使用获取域并通过上下文将其传递给模板。然后，在模板（html文件）中，拼接到完整的url地址。像这样：`<a href="http://{{ domain }}{% url path.to.view %}?param={{param}}">Foo</a>`。

简而言之，我只想获得域名。抱歉我的描述不清楚！@Hans 的回答很好，谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T08:29:58.930

这是[这里](https://docs.djangoproject.com/en/dev/ref/request-response/)的文档：

使用`build_absolute_uri()`请求对象上的方法。

# php - 用 PHP 发送大量电子邮件的最佳方式

> ID：12636333
> 
> 赞同：1
> 
> 时间：2012-09-28T08:27:00.633
> 
> 标签：php, email, newsletter

我有大量用户同意接收每日通讯。时事通讯的内容是自动生成的，所以唯一要做的就是设置一个发送电子邮件的 cron 作业。

但是，如果有例如 10.000 个用户，这样的 cron 作业会杀死我的服务器。可以做些什么来解决这个问题？

发送 100 封电子邮件后 sleep(1) 是否足够？（当然将执行时间限制设置为 1 天）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:31:16.573

看看[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

> 笔记：
> 
> 值得注意的是，mail() 函数不适合循环处理大量电子邮件。此函数为每封电子邮件打开和关闭一个 SMTP 套接字，效率不高。
> 
> 如需发送大量电子邮件，请参阅 » PEAR::Mail 和 » PEAR::Mail_Queue 包。

所以只需使用 Mail_Queue 包......它会接收每封邮件，然后简单地处理它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T08:41:30.120

几个月前，我为项目制作了一个发送电子邮件的系统，所以我做了以下工作：

在数据库中，我有 3 个表：

用户
user_emails（一些用户有多个电子邮件）
email_campaign（这是我在发送活动时临时存储数据的表，完成后我截断其中的所有内容）

当我开始发送活动时，我在 email_campaign 表中为我完成发送电子邮件的每个用户插入行。
这样，如果在活动结束前发生错误，我就知道从哪里继续，知道我向谁发送了电子邮件以及需要向谁发送电子邮件。

实际上，我能够在 2 小时内发送 45.000 封电子邮件。没有服务器过载。
我在每 100 封电子邮件上使用 sleep()，就像你想做的那样。
我还在凌晨 2 点发送广告系列，当时我的服务器负载最低。

您还可以将电子邮件服务器配置为每小时发送有限数量的电子邮件。
这会减慢发送速度，但会减少服务器负载。

# facebook - 任何语言（国际化）的点赞按钮的最大宽度？

> ID：12636337
> 
> 赞同：3
> 
> 时间：2012-09-28T08:27:19.390
> 
> 标签：facebook, internationalization, facebook-like

我正在一个网站上工作，该网站将具有非常高的国际分布，并且需要了解任何可用语言中点赞按钮的最大宽度。

到目前为止，我能找到的最大的 Like 按钮是俄语 - [http://cl.ly/Jmeb](http://cl.ly/Jmeb)。是否有一个完整的规格列表，其中包含每种可用语言的点赞按钮的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:47:56.850

好吧，设计您的网站最可靠的方法是不要对“赞”按钮的大小施加严格的限制。[Facebook 开发者主题](https://developers.facebook.com/docs/internationalization/)*国际[*化*](https://developers.facebook.com/docs/internationalization/)说，*

 *> **避免依赖精确尺寸的布局**
> 
> 尽量不要使用依赖于原始语言文本的精确屏幕尺寸的布局。对于任何一段文本，在某些语言中它可能会更短，而在某些语言中可能会更长（有时在任何一个方向上都明显如此）。如果您已经调整了用户界面元素的大小，使得您的文本几乎不适合，您的应用程序将可能在单词较长的语言中效果不佳。

同样，[Facebook 开发者主题*Like Button*](https://developers.facebook.com/docs/reference/plugins/like/)说，

> 您可能需要调整 Like 按钮的宽度以适应不同的语言。

您在俄语中找到了一个 110 像素宽的 Like 按钮。您的布局可以使用 1.5 倍宽的按钮吗？2倍宽？5倍宽？那么你可能是安全的。

但是浏览器在显示您的页面时正在从 Facebook 检索他们喜欢的按钮图像，对吗？因此，即使我们*今天*可以为您提供每种可用语言的“赞”按钮大小的完整列表，明天 Facebook 也可以添加另一种具有更长“赞”按钮的语言。

也就是说，Facebook 确实提供了以您选择的任何语言[获取“赞”按钮](https://developers.facebook.com/docs/reference/plugins/like/)的代码（请参阅常见问题解答：如何以不同语言显示“赞”按钮？）：src="http://www.facebook.com/plugins/like .php?locale=fr_FR&...

Facebook 还发布了一个 XML 文件，列出[了 Facebook 支持的语言环境](https://www.facebook.com/translations/FacebookLocales.xml)。通过一些 Grep 搜索/替换，我们可以生成一个 HTML 页面，该页面在今天列出的所有 76 个语言环境中显示“Like”按钮。查看这些按钮的宽度，我们看到爱尔兰本地化的 Like 按钮是目前最宽的，为 127 像素。（在我的系统上，马拉雅拉姆语中的“赞”按钮在 169 像素处稍微宽一些，但那是因为我没有安装马拉雅拉姆语字体，所以该按钮显示为缺少字形框。）

因此，在目前支持的语言中，Like 按钮的最大宽度看起来是 169 像素宽。但是，这种宽度的编码并不是 Facebook 或良好的国际化设计所推荐的。相反，让您的布局灵活，并且能够在某些语言环境中处理更宽的 Like 按钮。*

# javascript - 部分刷新网站不工作

> ID：12636342
> 
> 赞同：0
> 
> 时间：2012-09-28T08:27:45.207
> 
> 标签：javascript, jquery, page-refresh, partial-page-refresh

我正在尝试仅刷新我网站的一部分（左侧显示带有主题的列表），但这对我不起作用。如果单击刷新按钮，我会在左侧部分看到一个非常奇怪的屏幕。我正在使用的脚本是这样的：

```
$(function() {
   $("#refresh").click(function(evt) {
      $(".bgleft").load("left.php")
      evt.preventDefault();
   })
}) 
```

我得到的奇怪屏幕是一个白色的空白屏幕，上面有一个随机文本（不存在）。我不明白为什么会这样。对于一个实时示例：转到（已*编辑*）并单击左侧框架中的“刷新”。

**编辑：**

HTML 片段：`<body class="bgleft">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:32:46.653

在 left.php 中有两行代码显示这些字符。

```
for(var n = 1; n < 7; n++)
document.write(String.fromCharCode(Math.round(Math.random()*25)+97)); 
```

尝试删除它们，它应该有帮助。

在其他答案中也很悲伤，`<body>`因为脚本已经包含在站点中，所以只发送内容作为响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:39:02.863

在进行部分更新时发送完整的 HTML 页面通常不是一个好主意。如果您查看 left.php 生成的内容，它就是`<html>`您在 iframe 中使用的完整页面（带有标签和所有内容）。

创建一个仅呈现 left.php 正文的页面并将其用于部分更新。或者[在这里](https://stackoverflow.com/questions/2064850/how-to-refresh-an-iframe-using-javascript)查看如何刷新 iframe。

PS：框架集在设计、动态/javascript 功能和未来可扩展性方面已被彻底弃用，并且确实受到限制。考虑不使用它们...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:36:32.113

你怎么在当前标签内加载同一个页面`HTML`？`HEAD``BODY``BODY`

```
$(function() {
    $("#refresh").click(function(evt) {
        evt.preventDefault();         
        $(window.top.window).find('frame[name=left]').reload();
    })
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T08:39:44.857

您应该只获取要更新的内容，而不是整个页面。目前，正在获取整个页面，包括`html`，`body`甚至`script`标签。jQuery 和其他脚本也因此被再次加载。这可能会在以后引起重大问题。

# xcode - 辞职键盘而不访问特定的 uitextfield

> ID：12636343
> 
> 赞同：0
> 
> 时间：2012-09-28T08:27:49.307
> 
> 标签：xcode, uitableview

我需要一种“让第一响应者辞职”的方法，例如让键盘在按下按钮时下降。问题是我当时无权访问`UITextfield`那是第一响应者。所以我不能用`[textfield resignFirstResponder]`。

有没有办法在不访问文本字段的情况下强制键盘退出？如果你愿意，全球辞职。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-11T21:34:47.533

如果您不想保留参考，这里是另一个示例

```
-(IBAction)anyButtonPressed
{
   [self.view endEditing:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T11:28:44.957

您可以通过这种方式执行此操作假设我们在您的视图控制器中有 4 个文本字段，并且所有这些文本字段都是通过 xib 创建的。并且您已经通过 xib 设置了这些文本字段的委托，并且您没有为这些文本字段创建任何 IBOutles。

现在将 UITextField 的引用声明为全局变量

在 - (void)textFieldDidBeginEditing:(UITextField *)textField 方法中将 textField 分配给全局变量。

现在单击任何按钮，您都可以退出这个全局变量。这是示例代码

```
 //Declare it as a global variable in your class. 
 UITextField *ref;

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
  ref=textField;
}

-(IBAction)anyButtonPressed
{
[ref resignFirstResponder];
} 
```

# django - 如何正确创建“用户额外信息”对象。/ IntegrityError“列*某事*不能为空”

> ID：12636346
> 
> 赞同：1
> 
> 时间：2012-09-28T08:28:03.410
> 
> 标签：django, django-models, django-users

为了向我的 auth.User 模型添加信息，我遵循了这篇[文档](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)。我想将用户链接到社会（例如假设用户是客户）以及该社会中的工作。所以这是我的代码：

社会/模型.py：

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save

class UserProfile(models.Model):
    """
    Stores the user informations except
    login basic informations.
    """
    user = models.OneToOneField(User)
    firstname = models.CharField(max_length=128)
    lastname = models.CharField(max_length=128)
    society = models.ForeignKey('Society')
    job = models.ForeignKey('UserJob')

class Society(models.Model):
    """
    Stores the informations about the societies.
    """
    name = models.CharField(max_length=128)

class UserJob(models.Model):
    """
    Stores the user job category in the society.
    """
    name = models.CharField(max_length=64)

def create_user_profile(sender, instance, created, **kwargs):
    """
    Uses the post_save signal to link the User saving to
    the UserProfile saving.
    """
    if created:
        UserProfile.objects.create(user=instance)

#the instruction needed to use the post_save signal
post_save.connect(create_user_profile, sender=User) 
```

社团/admin.py：

```
from django.contrib import admin
from django.contrib.auth.models import User
from django.contrib.auth.admin import UserAdmin
from societies.models import UserProfile, Society, UserJob

class UserProfileInline(admin.StackedInline):
    """
    Defines an inline admin descriptor for UserProfile model
    which acts a bit like a singleton
    """
    model = UserProfile
    can_delete = False
    verbose_name_plural = 'profile'

class UserAdmin(UserAdmin):
    """
    Defines a new User admin.
    """
    inlines = (UserProfileInline, )

admin.site.unregister(User)
admin.site.register(User, UserAdmin)

admin.site.register(Society)
admin.site.register(UserJob) 
```

我添加了 UserProfileInline 以便在我的管理站点用户表单中包含这些字段。我将此行添加到我的 settings.py 中：

```
AUTH_PROFILE_MODULE = 'societies.UserProfile' 
```

那么问题是，当我尝试通过管理站点上的用户表单创建用户时，包括填写用户配置文件特定的字段，我得到了这个：

/admin/auth/user/add/ 处的 IntegrityError

（1048，“列 'society_id' 不能为空”）

因为我在表格上指定了一个社会，所以我问自己问题是否来自我的 create_user_profile 函数的信号处理。考虑到我之前提到的文档，没有什么可做的了。但是，我是否不必通过 UserProfile.create(...) 调用来精确填写 UserProfile 字段 firstname、lastname、society 和 job？（除了“user=instance”参数）。在这种情况下，我不知道如何获取正确的元素来填充参数。在文档中没有对“accepted_eula”和“favorite_animal”做任何事情，所以我当然错了......不是吗？

非常感谢您的任何回复。我为我的语言道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:20:23.287

我发现我的错误，我不得不在 UserProfile 模型中的 Society 和 UserJob 外键字段中添加一个默认值。另一种解决方案是指定它们可以为空。

对这种缺乏关注感到抱歉。

# jquery-selectors - 如何在 JQuery 中为同一个类添加不同的类？

> ID：12636348
> 
> 赞同：1
> 
> 时间：2012-09-28T08:28:19.563
> 
> 标签：jquery-selectors, addclass

我没有代码可以开始，因为我在 JQuery 方面并不先进，这在这里看起来像是高级的东西。我知道如何添加类、隐藏元素和其他类型的东西，但这对我来说是新事物。这就是问题所在。我有通过 php 和 mysql 提供的内容。内容将共享同一个类，每页列出五个。我需要为每个相同的类添加一个额外的类，以赋予它一个独特的类。下面是 html 的示例。

```
 <div id="1" class="example"></div>
  <div id="2" class="example"></div>
  <div id="3" class="example"></div>
  <div id="4" class="example"></div>
  <div id="5" class="example"></div> 
```

我需要 Jquery 对 html 执行此操作：

```
 <div id="1" class="example ex1"></div>
  <div id="2" class="example ex2"></div>
  <div id="3" class="example ex3"></div>
  <div id="4" class="example ex4"></div>
  <div id="5" class="example ex5"></div> 
```

为 Id 标签创建脚本是不切实际的，因为如果我有一千个 Id，那么我将不得不为每个 id 复制脚本一千次，而且随着列表的长度越来越长，我将不得不复制该脚本一千次。这仅用于 javascript 目的，因此我想将其保留在 javascript 中。如果有办法在服务器端实现这一点，我也会接受这些建议。提前感谢所有人对此问题的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:17:41.233

现在我终于明白你想要什么了

需要此代码

```
// Wait on the document to be loaded
$(function(){
    // get every element with the class example in an array and loop
    // through it(each) with i  as index
    $(".example").each(function(i){
        // add class ex with the index
        // this is the element we are pointing at so a div
        $(this).addClass("ex" + i);
    });
});​ 
```

但是当你用 5 个 div 循环遍历你的数组时，你可以在服务器端轻松地做到这一点；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:40:41.917

如果我正确阅读了您的评论，您每页有 5 个项目，课程将分别为 ex1 ex2 ... ex5。

如果是这样，这是脚本：

```
var itemsPerPage = 5;
$(".example").each(function(){       
    var number = this.id % itemsPerPage;
    if (number == 0) number = itemsPerPage;
    $(this).addClass("ex"+ number);
}); 
```

或短版：

```
var itemsPerPage = 5;
$('.example').each(function(){
    $(this).addClass('ex'+ ((this.id % itemsPerPage) == 0 ? itemsPerPage : (this.id % itemsPerPage));
}); 
```

如果您根本不关心 ID，或者最短的版本是 EaterOfCorpses 的答案。每种方法都有其优点和缺点。

**示例 1：错误的 ID 顺序**

```
<div id="6" class="example">
<div id="8" class="example">
<div id="7" class="example"> 
```

EaterOfCorpses 会生成

```
<div id="6" class="example ex0">
<div id="8" class="example ex1">
<div id="7" class="example ex2"> 
```

我的脚本将生成

```
<div id="6" class="example ex1">
<div id="8" class="example ex3">
<div id="7" class="example ex2"> 
```

**示例 2：随机 ID（EaterOfCorpses 的优点）**

```
<div id="15blahblah" class="example">
<div id="5" class="example">
<div id="10" class="example"> 
```

EaterOfCorpses 会生成

```
<div id="15blahblah" class="example ex0">
<div id="5" class="example ex1">
<div id="10" class="example ex2"> 
```

我的脚本将在 15blahblah 生成相同的类和错误，这可能是好的（检测 ID 中的错误）和坏的（JS 不会针对该特定记录运行）

```
<div id="15blahlbah" class="example exNil">  
<div id="5" class="example ex5">
<div id="10" class="example ex5"> 
```

凉爽的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:41:56.693

```
$(document).ready(function(){
    jQuery.each($(".example"), function(){
        $(this).addClass("x" + this.id);
    });
});​ 
```

# mysql - rails db:migrate 失败 '[MODEL].users' 不存在：SHOW FULL FIELDS FROM `users`

> ID：12636355
> 
> 赞同：0
> 
> 时间：2012-09-28T08:28:50.477
> 
> 标签：mysql, ruby-on-rails, devise, dbmigrate

我做了很多谷歌搜索并阅读了很多堆栈溢出页面，但无法解决这个问题。如果有人可以对此提供帮助，那将很有帮助。

我的应用程序昨天仍然运行良好，现在突然开始在“rake db:migrate”上给出错误

我检查了我的方案，我在 rake db:drop / db:create / db:migrate 之后尝试过，我检查了 Gem 文件中的设计。

我的错误：

![在此处输入图像描述](../Images/87e829f34d40296296814c7239ead1b6.png)

我的架构：

![在此处输入图像描述](../Images/533653de7f15cbcdb3b014b562b258ee.png)

我的宝石文件：

![在此处输入图像描述](../Images/90fc1c8f5aa6bfdfbeb795358f14ea72.png)

任何帮助都会非常有用。

谢谢。

错误为文本：

Senthil:zenkars senthilkumar$ rake db:migrate rake 中止！Mysql2::Error: 表 'zenkars_development.users' 不存在：SHOW FULL FIELDS FROM`users`

任务：TOP => db:migrate => 环境

（通过使用 --trace 运行任务查看完整跟踪）

Senthil:zenkars senthilkumar$ rake db:migrate --trace

** 调用 db:migrate (first_time)

** 调用环境（first_time）

** 调用 disable_rails_admin_initializer (first_time)

** 执行 disable_rails_admin_initializer

** 执行环境

耙中止！

Mysql2 ::错误：表'zenkars_development.users'不存在：从`users` /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2显示完整字段.8/lib/active_record/connection_adapter/abstract_mysql_adapter.rb:245：在“查询”中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:14:12.007

检查此链接

[https://github.com/sferik/rails_admin/issues/1273](https://github.com/sferik/rails_admin/issues/1273)

基本上，您需要从用户模型中删除 rails_admin 配置并将其编写为已弃用的方式。

# osgi - 当一个包以编程方式启动时，是否也应该启动依赖项？

> ID：12636357
> 
> 赞同：2
> 
> 时间：2012-09-28T08:29:01.427
> 
> 标签：osgi, apache-felix, obr

这是场景：

我在 OSGi 容器中安装并启动了一个捆绑包“BundleA”。新版本的 BundleA 可用。BundleA 是使用 Felix Bundle Repository 提供的。新版本的 BundleA 对来自“BundleB”的包声明了新的包级别要求。

在我更新 BundleA（使用 OBR 的 deploy()）之前，我停止了 BundleA，因为我希望所有线程都停止运行，并且 deactivator 提供了这种能力。

当我在 BundleA 上执行 deploy() 时，BundleB 也按预期安装。

然后我再次以编程方式 start() BundleA，并且 BundleA 启动。但是 BundleB 是“已解决”，而不是“活动”。我*可以*手动启动 BundleB，它按预期工作。

这是预期的，与我以编程方式调用 OSGi API 的方式有关，还是出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:42:06.257

OSGi 框架不会自动启动捆绑软件。（但是，它将在框架启动时重新启动先前启动的包。）框架对包之间的启动依赖关系一无所知，并且包不应该需要特定的启动顺序。正如 Gunnar 所提到的，您可以使用激活策略来触发延迟激活，但如果您没有在具有延迟激活策略的捆绑包上调用 start，则不会执行任何操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T10:35:53.597

这是预期的默认行为。

一旦加载了其中的任何类，您就可以启用捆绑包的自动激活。为此，您需要设置`Bundle-ActivationPolicy: lazy`标题。

在 Eclipse 中，在“概览”页面的清单编辑器中选中*“加载其中一个类时激活此插件”*复选框。

# php - 使用 PHP 和 HTML 获取价值

> ID：12636364
> 
> 赞同：0
> 
> 时间：2012-09-28T08:29:25.143
> 
> 标签：php, html

您好，我正在用 PHP 编写一个计算器，并且 php 工作正常，现在我想要的是从用户那里获得价值。

我不确定我缺少什么，或者我必须使用任何 JS 文件来完成它。我有内置的值集`$v = 1000000;`，但我希望用户根据需要设置值。还希望为默认用户保留 inbuild。我认为我没有使用正确的形式。

html

```
<form action="index.php" method="Get">
Value: <input type="text" name="v" />
<input type="submit" />
</form> 
```

php

```
<?php
$i = 0;
$v = 1000000;
do {
    $i++;
    $pay  = round($v + $i);
    echo "<tr><td><b>Value</b> $" . number_format($v) . "</td><tr>";
    $v = $v + $bid;
} while ($i <= 5);
?> 
```

我已经修改并隐藏了我的其他个人代码 :)

**固定的：** `$v = isset($_GET['v']) ? (int)$_GET['v'] : 1000000;`

提前感谢现场： http: [//ffsng.deewayz.in/](http://ffsng.deewayz.in/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:31:33.890

当您的表单使用`$_GET`时，您必须将其分配给您的`$v`变量，但条件是 if `isset`。

改变：

```
$v = 1000000; 
```

到：

```
$v = isset($_GET['v']) ? (int)$_GET['v'] : 1000000; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T08:31:46.420

您需要从重新加载的表单中取回值，如下所示：

```
$v = $_GET['v']; 
```

否则，您的代码中根本不会使用 GET 值。

米海正确地指出，如果没有设置表单值，如果你的代码尝试使用 is，你会得到一个错误，所以先运行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T09:49:56.017

就这样做

```
 <?php
$i = 0;
$v =$_GET['v'];
do {
    $i++;
    $pay  = round($v + $i);
    echo "<tr><td><b>Value</b> $" . number_format($v) . "</td><tr>";
    $v = $v + $bid;
} while ($i <= 5);
?> 
```

# javascript - Javascript For循环的问题

> ID：12636367
> 
> 赞同：5
> 
> 时间：2012-09-28T08:29:49.200
> 
> 标签：javascript, arrays, for-loop, foreach

考虑下面的代码：

```
function splicer()
{
 var arrayElements = ["elem1","elem2","elem3","elem4"];
 for(var index in arrayElements)
 {
  arrayElements.splice(index,1);
 }
 alert("Elements: "+arrayElements);
} 
```

上面的函数应该从数组中删除所有元素`"arrayElements"`。但它不会。

Javascript 引擎保持`"index"`原样，不介意修改数组。人们可能期望像`"for each"`循环这样没有这种问题的东西

甚至以下代码似乎也不起作用：

```
function splicer()
{
...
 for(var index in arrayElements)
 {
  arrayElements.splice(index--,1);
 }
...
} 
```

即使更改变量“index”的值似乎也不起作用。更改后的值在“for(...){...}”块中可用，但是当循环到达下一次迭代时，该值将被重置并从下一个索引继续作为发条。

所以看起来像这样的代码可能是唯一的解决方案：

```
function splicer()
{
 var arrayElements = ["elem1","elem2","elem3","elem4"];
 for(var index=0;index<arrayElements.length;index++)
 {
  arrayElements.splice(index--,1);
 }
 alert("Elements: "+arrayElements);
} 
```

测试：**Firefox 16 Beta。**

**`"splice()"`**但是乍一看，在方法中放置一元运算符似乎会产生误导。

这可能值得考虑**`"W3C"`**它或它可能关心的任何人，以便他们提出一个很好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:36:49.167

您可能需要参考*John Resig*的`array.remove()` [链接](http://ejohn.org/blog/javascript-array-remove/)。

```
// Array Remove - By John Resig (MIT Licensed)
Array.prototype.remove = function(from, to) {
  var rest = this.slice((to || from) + 1 || this.length);
  this.length = from < 0 ? this.length + from : from;
  return this.push.apply(this, rest);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:38:16.993

尝试这个：

* *Splice 修改原始数组，因此 tge 循环跳过备用值。**

```
var arrayElements = ["elem1","elem2","elem3","elem4"];
arrayElements.splice(0,arrayElements.length);
alert("Elements: "+arrayElements) 
```

# javascript - three.js - 放大/缩小完整的管几何图形

> ID：12636370
> 
> 赞同：4
> 
> 时间：2012-09-28T08:29:58.430
> 
> 标签：javascript, html, html5-canvas, webgl, three.js

我创建了一个管几何图形，其中包含从外部 javascript 文件以 JSON 格式加载的 200 个点的数据。请找到以下代码。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>3d Model using HTML5 and three.js</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: #f0f0f0;
                margin: 0px;
                overflow: hidden;
            }
        </style>
    </head>
    <body>          
        <input type="button" value="plot" onClick="return plotPath();" />        
        <script src="three.min.js" type="text/javascript"></script>
        <script src="Curve.js" type="text/javascript"></script>
        <script src="TubeGeometry.js" type="text/javascript"></script>              
        <script src="Stats.js" type="text/javascript"></script>
        <script src="Detector.js" type="text/javascript"></script>      
        <script src="path.js" type="text/javascript"></script>

        <script>

        // variables
        var container, stats;

        var camera, scene, renderer, controls, stats;

        var text, plane, tube, tubeMesh, parent;

        var targetRotation = 0;
        var targetRotationOnMouseDown = 0;

        var mouseX = 0;
        var mouseXOnMouseDown = 0;

        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

        var radius = 600;
        var theta = 0;
        var PI2 = Math.PI * 2;

        function plotPath()
        {                                           
            var obj = getPath();
            var segments = 50;
            var closed = false;
            var debug = true;
            var radiusSegments = 12;
            var tube;
            var points = [];
            var x=0,y=0,z=0;                    

            for(var i=0; i<obj.path.length; i++)
            {                               
                console.log(obj.path[i].point);
                points.push(obj.path[i].point);
                extrudePath = new THREE.SplineCurve3(points);
                extrudePath.dynamic = true;

                tube = new THREE.TubeGeometry(extrudePath, segments, 2, radiusSegments, closed, debug);
                tube.dynamic = true;

                tubeMesh = new THREE.Mesh(tube ,new THREE.MeshBasicMaterial({
                    color: 0x000000, side: THREE.DoubleSide,
                    opacity: 0.5, transparent: true, wireframe: true}));
                tubeMesh.__dirtyVertices = true;
                tubeMesh.dynamic = true;

                parent = new THREE.Object3D();
                parent.position.y = 100;

                if ( tube.debug ) tubeMesh.add( tube.debug );
                parent.add( tubeMesh );                                 
            }
            scene.add( tubeMesh );
            scene.add(parent);                      

            animate();                          
        } 

        init();                             

        function init(){

            // container
            container = document.createElement( 'div' );
            document.body.appendChild( container );                 

            // renderer         
            renderer = new THREE.WebGLRenderer( { antialias: true } );
            renderer.setClearColorHex(0xEEEEEE, 1.0);            
            renderer.setSize( window.innerWidth, window.innerHeight );
            renderer.clear();
            container.appendChild( renderer.domElement );                   

            // camera           
            camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 10000 );
            camera.position.set(-100,75,75);                    

            // scene            
            scene = new THREE.Scene();
            camera.lookAt(scene.position);

            // light            
            scene.add( new THREE.AmbientLight( 0x404040 ) );
            light = new THREE.DirectionalLight( 0xffffff );
            light.position.set( 0, 1, 0 );
            scene.add( light ); 

            // CONTROLS
            controls = new THREE.TrackballControls( camera );               

            // Grid
            geometry = new THREE.Geometry();
            geometry.vertices.push( new THREE.Vector3( - 500, 0, 0 ) );
            geometry.vertices.push( new THREE.Vector3( 500, 0, 0 ) );

            for ( var i = 0; i <= 20; i ++ ) {

                line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                line.position.z = ( i * 50 ) - 500;
                scene.add( line );

                line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                line.position.x = ( i * 50 ) - 500;
                line.rotation.y = 90 * Math.PI / 180;
                scene.add( line );
            }                   

            // projector
            projector = new THREE.Projector();

            plotPath();

            // stats
            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            container.appendChild( stats.domElement );

            document.addEventListener( 'mousedown', onDocumentMouseDown, false );
            document.addEventListener( 'mouseover', onDocumentMouseOver, false );
            document.addEventListener( 'touchstart', onDocumentTouchStart, false );
            document.addEventListener( 'touchmove', onDocumentTouchMove, false );
            window.addEventListener('DOMMouseScroll', mousewheel, false);
            window.addEventListener('mousewheel', mousewheel, false);
            window.addEventListener( 'resize', onWindowResize, false );
        }

        function mousewheel(event) {

            var fovMAX = 160;
            var fovMIN = 1;

            camera.fov -= event.wheelDeltaY * 0.05;
            camera.fov = Math.max( Math.min( camera.fov, fovMAX ), fovMIN );
            camera.projectionMatrix = new THREE.Matrix4().makePerspective(camera.fov, window.innerWidth / window.innerHeight, camera.near, camera.far);

        }

        function onWindowResize() {         
            camera.left = window.innerWidth / - 2;
            camera.right = window.innerWidth / 2;
            camera.top = window.innerHeight / 2;
            camera.bottom = window.innerHeight / - 2;
            camera.aspect = window.innerWidth / window.innerHeight;         

            renderer.setSize( window.innerWidth, window.innerHeight );
        }

        function onDocumentMouseDown( event ) {
            event.preventDefault();

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );
            document.addEventListener( 'mouseup', onDocumentMouseUp, false );
            document.addEventListener( 'mouseout', onDocumentMouseOut, false );
            mouseXOnMouseDown = event.clientX - windowHalfX;
            targetRotationOnMouseDown = targetRotation;     
        }

        function onDocumentMouseMove( event ) {
            mouseX = event.clientX - windowHalfX;
            targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;
        }

        function onDocumentMouseUp( event ) {
            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );
        }

        function onDocumentMouseOut( event ) {
            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );
        }

        function onDocumentMouseOver( event ) {
            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );
        }

        function onDocumentTouchStart( event ) {
            if ( event.touches.length === 1 ) {
                event.preventDefault();
                mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;
            }
        }

        function onDocumentTouchMove( event ) {
            if ( event.touches.length === 1 ) {
                event.preventDefault();
                mouseX = event.touches[ 0 ].pageX - windowHalfX;
                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;
            }
        }

        function animate() {
            requestAnimationFrame( animate, renderer.domElement );
            render();
            update();
        }

        function update(){
            controls.update();          
        }

        function toCameraCoords(position) {
              return camera.matrixWorldInverse.multiplyVector3(position.clone());
            }

        function render() {                 
            tubeMesh.rotation.y += ( targetRotation - tubeMesh.rotation.y ) * 0.15;                     
            camera.lookAt(scene.position);
            camera.updateMatrixWorld();
            renderer.render( scene, camera );
        }
        </script>        
    </body>
</html> 
```

当我使用鼠标滚轮放大时，相机将在管的起点放大。如何使管的几何形状可以完全缩放，或者换句话说，管的任何部分都可以缩放？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T08:23:40.923

与任何传统的现实生活中的相机一样，您可以通过调用 setLens 方法来更改 THREE.PerspectiveCamera 的焦距（变焦）。我发现这种方式非常直观，比移动相机放大/缩小要简单得多。

这是three.js中的方法文档：

```
/**
 * Uses Focal Length (in mm) to estimate and set FOV
 * 35mm (fullframe) camera is used if frame size is not specified;
 * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html
 */
THREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight )
... 
```

这是一个示例用法：

```
var focalLength = 25.734; // equivalent to FOV=50
$('#scene').mousewheel(function (event, delta, deltaX, deltaY) {
    event.preventDefault();

    focalLength += deltaY;
    camera.setLens(focalLength);
}); 
```

jQuery.fn.mousewheel 方法由[Mousewheel Plugin](http://plugins.jquery.com/mousewheel/)提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:13:05.063

```
document.body.addEventListener( 'mousewheel', mousewheel, false );
document.body.addEventListener( 'DOMMouseScroll', mousewheel, false ); // firefox

function mousewheel( e ) {      
    var d = ((typeof e.wheelDelta != "undefined")?(-e.wheelDelta):e.detail);
    d = 100 * ((d>0)?1:-1);

    var cPos = camera.position;
    if (isNaN(cPos.x) || isNaN(cPos.y) || isNaN(cPos.y))
      return;

    var r = cPos.x*cPos.x + cPos.y*cPos.y;
    var sqr = Math.sqrt(r);
    var sqrZ = Math.sqrt(cPos.z*cPos.z + r);

    var nx = cPos.x + ((r==0)?0:(d * cPos.x/sqr));
    var ny = cPos.y + ((r==0)?0:(d * cPos.y/sqr));
    var nz = cPos.z + ((sqrZ==0)?0:(d * cPos.z/sqrZ));

    if (isNaN(nx) || isNaN(ny) || isNaN(nz))
      return;

    cPos.x = nx;
    cPos.y = ny;
    cPos.z = nz;
} 
```

甚至更简单地只调整相机：

```
var mousewheel  = function ( e ) {
     var d = ((typeof e.wheelDelta != "undefined")?(-e.wheelDelta):e.detail);
     d = 100 * ((d>0)?1:-1);    
     var cPos = camera.position;
     if (isNaN(cPos.x) || isNaN(cPos.y) || isNaN(cPos.y)) return;

        // Your zomm limitation
        // For X axe you can add anothers limits for Y / Z axes
        if (cPos.x > _YOUR_ZOOM_MIN_X_ || cPos.x < _YOUR_ZOOM_MAX_X_ ){
           return ;
        }

   mb = d>0 ? 1.1 : 0.9;
   cPos.x = cPos.x * mb;
   cPos.y = cPos.y * mb;
   cPos.z = cPos.z * mb;
} 
```

# php - CURL 仅在已修改时获取文件

> ID：12636373
> 
> 赞同：5
> 
> 时间：2012-09-28T08:30:18.077
> 
> 标签：php, curl, file-get-contents

我如何了解文件是否在使用 CURL 打开流之前被修改过（然后我可以使用 file-get-contents 打开它）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:40:17.683

检查`CURLINFO_FILETIME`：

```
$ch = curl_init('http://www.mysite.com/index.php');
curl_setopt($ch, CURLOPT_FILETIME, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_NOBODY, true);
$exec = curl_exec($ch);

$fileTime = curl_getinfo($ch, CURLINFO_FILETIME);
if ($fileTime > -1) {
    echo date("Y-m-d H:i", $fileTime);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:41:44.017

尝试先发送 HEAD 请求以获取`last-modified`目标 url 的标头，以比较您的缓存版本。您也可以尝试在使用`If-Modified-Since`GET 请求创建缓存版本时使用标头，以便对方也可以响应您`302 Not Modified`。

使用 curl 发送 HEAD 请求如下所示：

```
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_NOBODY, true);
curl_setopt($curl, CURLOPT_HEADER, true);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HTTP_VERSION , CURL_HTTP_VERSION_1_1);
$content = curl_exec($curl);
curl_close($curl) 
```

现在`$content`将包含返回的 HTTP 标头，作为一个长字符串，您可以`last-modified:`像这样在其中查找：

```
if (preg_match('/last-modified:\s?(?<date>.+)\n/i', $content, $m)) {
    // the last-modified header is found
    if (filemtime('your-cached-version') >= strtotime($m['date'])) {
        // your cached version is newer or same age than the remote content, no re-fetch required
    }
} 
```

您也应该`expires`以相同的方式处理标题（从标题字符串中提取值，检查该值是否在未来）

# c# - 在列表中找到一个对象，删除并返回它

> ID：12636376
> 
> 赞同：5
> 
> 时间：2012-09-28T08:30:29.340
> 
> 标签：c#, list, ienumerable

> **可能重复：**
> [c#：如何删除 IEnumerable 中的项目](https://stackoverflow.com/questions/11856853/c-how-do-i-remove-an-item-inside-ienumerable)

我有无数对象`foo`。

```
 public IEnumerable<foo> listOfFoo{ get; set; } 
```

Foo 有 Id 和 name 让我们说。

我想将一个 ID 传递给一个方法，该方法应该从 IEnumerable 中删除具有该 ID 的对象并返回它。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T08:34:32.677

`IEnumerable`s 是只读的。你不能从一个对象中删除一个对象。

也就是说，你可以做类似的事情

```
public Foo QuoteRemoveUnquoteById(int id)
{
    var rtnFoo = listOfFoo.SingleOrDefault(f => f.Id == id);
    if (rtnFoo != default(Foo))
    {
        listOfFoo = listOfFoo.Where(f => f.Id != id);
    }
    return rtnFoo;
} 
```

这只是掩盖了匹配`Foo`？但是，您“删除”的项目越多，性能就会越来越差。此外，任何其他拥有引用的东西都`listOfFoo`不会看到任何变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T08:34:51.843

您不能简单地从`IEnumerable`.

* * *

但是您可以在基础集合中进行更改（例如，如果它是 a`List`或其他东西），或者过滤`IEnumerable`using a`Where`子句。

如果您需要删除项目，则应使用支持删除项目的集合，例如`List<>`.

* * *

例如，您可以让您的支持字段为以下类型`List<foo>`：

```
private List<foo> _listOfFoo;

public IEnumerable<foo> listOfFoo 
{ 
    get { return _listOfFoo.AsReadOnly(); } 
    set { _listOfFoo = value.ToList(); } 
} 
```

然后从`_listOfFoo`.

```
_listOfFoo.Remove(_listOfFoo.Single(foo => foo.ID == id_to_remove)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T08:35:20.427

这对于任何实现`IEnumerable<foo>`. 如果它是例如 a `List<foo>`，那么它可以为它删除项目，但如果它是例如 a`foo[]`则不可能删除项目。

如果您使用 a`List<foo>`代替：

```
public foo Extract(int id) {
  int index = listOfFoo.FindIndex(x => x.Id == id);
  foo result = listOfFoo[index];
  listOfFoo.removeAt(index);
  return result;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T08:36:23.887

IEnumarable 是一个用于遍历集合的接口，如果不强制转换为某种集合，就无法删除项目。

在这里阅读更多：

[http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)

# java - 如何以原子方式锁定一组键？

> ID：12636380
> 
> 赞同：3
> 
> 时间：2012-09-28T08:30:43.280
> 
> 标签：java, nosql, deadlock, atomic, cas

> **可能重复：**
> [以原子方式更新多行](https://stackoverflow.com/questions/211399/update-more-than-one-row-atomically)

我有一组存储在 noSQL 数据库中的数据块。要更新数据，我需要：

1.  获取（获取）
2.  更新数据
3.  写（放）

（不幸的是，没有直接的 CAS 支持）。

此操作是分批完​​成的，由键（二进制键/值 DB）索引的数据块属于我可以用于锁定的顺序。但是，我可能需要在一个批次中更新多个订单，因此我需要锁定全部或不锁定（最好是定时阻塞操作）。

API 看起来像：

```
void lock(long... orderIds, long timeout) throws NotPossibleToGetLockException;
void unlock(long... orderIds); 
```

我想死锁不是一个真正的问题，因为我可以在尝试获得锁之前轻松排序所需的订单。

有没有支持这种功能的库？

# ios - 使用媒体查询检测 Mobile Safari 全屏模式

> ID：12636381
> 
> 赞同：3
> 
> 时间：2012-09-28T08:30:43.843
> 
> 标签：ios, css, mobile-safari, ios6, media-queries

iOS6 为 Mobile Safari 引入了新的全屏模式。它仅适用于横向并隐藏浏览器顶部和按钮栏，以及设备状态栏。

如何使用媒体查询检测新模式？我尝试使用*宽度*媒体查询，但无法正常工作。

我能够使用 JS 来区分它们`document.documentElement.clientHeight`，它在默认情况下返回**208，**在**全屏**模式下返回 320。

顺便说一句：我不是在谈论从主屏幕启动应用程序，这是一种不同的全屏模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:38:56.377

因此，高度为 320 像素，方向为横向。这是媒体查询：

```
@media only screen and (height : 320px) and (orientation : landscape) {
    /* rules here */
} 
```

# c++ - 错误消息中的这个目录指向哪里？

> ID：12636384
> 
> 赞同：0
> 
> 时间：2012-09-28T08:31:11.487
> 
> 标签：c++, xcode, dynamic-linking, dynamic-library

我在 Xcode 中运行一个程序，但是生成的输出是

> dyld：库未加载：/fserver/mo/engine_build/BUILD_mac_64/climp/LIBS/nag_lm/libnagc_nag.dylib 引用自：/Users/William/Library/Developer/Xcode/DerivedData/Regression_Function-cmkvscbmyfohphbgblelwgtabfup/Build/Products/Debug/回归函数原因：找不到图像

我检查了，但根目录下没有调用`/fserver`目录。错误消息是什么意思，路径在哪里`/fserver/mo/engine_build/BUILD_mac_64/climp/LIBS/nag_lm/libnagc_nag.dylib`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:39:15.087

我不是 MacOS/iOS/等方面的专家，但对我来说，这似乎是 Apple 构建集群中某处的一条路径。C 系列工具生成的库通常带有一些尚未剥离的调试信息，这些信息允许您查看“哪一行代码”在哪个文件中崩溃，然后它们包含完全来自构建库的机器的路径. 尽管它们仅在那里有意义，但如果您对相关项目有所了解，那么其中的一些子路径可能对您有意义。在这个例子中，我猜

```
climp/LIBS/nag_lm/libnagc_nag.dylib 
```

或者

```
LIBS/nag_lm/libnagc_nag.dylib 
```

是可能有意义的实际项目**相对路径。**其余的似乎是构建系统生成的特定于目标的前缀。另一方面，这条路径相对于什么，是一个相当困难的问题。

# windows-8 - Windows Store 中使用 Windows 8 应用内购买系统的示例应用

> ID：12636386
> 
> 赞同：1
> 
> 时间：2012-09-28T08:31:12.877
> 
> 标签：windows-8, windows-store

Windows 应用商店中是否有使用应用内购买系统的应用？

如果是，那是哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:11:20.490

Wordastic 和 Word Recon 是我在应用内购买时见过的两款游戏。

目前，如果你想看看这个过程，Wacky Wordsearch 似乎已经通过模拟 IAP 进入了商店。

# c# - 会员用户不在时在线显示？

> ID：12636391
> 
> 赞同：0
> 
> 时间：2012-09-28T08:31:19.793
> 
> 标签：c#, asp.net, .net, asp.net-membership, user-profile

我有一个问题，当我知道他们不在时，我的用户列表中的每个用户都显示为在线。

加载页面时，它们显示为离线，但如果我刷新页面，它们都显示为在线。我假设这是因为我正在以编程方式访问他们的个人资料信息 (CommonProfile) 以获取要在 gridview 上显示的数据？

有没有办法在不触发 IsOnline 属性为真的情况下获取配置文件信息？

**更新：** 对不起，代码在这里。请温柔，我对 c# 和 asp.net 比较陌生，我还在学习。

该代码正在从会员用户和通用配置文件中收集信息，并将字段添加到数据表中，以便我可以在网格视图中显示结果。

```
MembershipUserCollection usersList = Membership.GetAllUsers();
MembershipUserCollection filteredUsers = new MembershipUserCollection();

foreach (MembershipUser user in usersList)
{
    if (!Roles.IsUserInRole(user.UserName, "Admin") && !Roles.IsUserInRole(user.UserName, "Engineering"))
    {
        if (txtFilterCustomerNo.Text.Length > 0)
        {
            ProfileCommon PC = Profile.GetProfile(user.UserName);
            if (PC.CompanyAccountNo == txtFilterCustomerNo.Text.ToUpper())
            {
                filteredUsers.Add(user);
            }
        }
        else
        {
            filteredUsers.Add(user);
        }
    }
}

txtFilterCustomerNo.Text = null;

foreach (MembershipUser user in filteredUsers)
{
    userProfile = Profile.GetProfile(user.UserName);
    string[] userRoles = Roles.GetRolesForUser(user.UserName);

    DataRow orderLine = dataSet.Tables["UserAccounts"].NewRow();
    orderLine["USER_NAME"] = user.UserName;
    orderLine["CREATED"] = user.CreationDate;
    orderLine["LAST_LOGIN"] = user.LastLoginDate;
    orderLine["PASSWORD_CHANGED"] = user.LastLoginDate;
    orderLine["ACTIVE"] = user.IsApproved;
    orderLine["ONLINE"] = user.IsOnline;
    orderLine["LOCKED"] = user.IsLockedOut;
    orderLine["CUSTOMER_NO"] = userProfile.CompanyAccountNo;
    orderLine["HAS_INVENTORY"] = userProfile.HasOwnInventory;
    orderLine["ORDER"] = userRoles.Contains("Order");
    orderLine["REPAIR"] = userRoles.Contains("Repair");
    orderLine["WARRANTY"] = userRoles.Contains("Warranty");
    orderLine["COMMISSIONING"] = userRoles.Contains("Commissioning");
    orderLine["ACCOUNT"] = userRoles.Contains("Account");
    dataSet.Tables["UserAccounts"].Rows.Add(orderLine);
}

if (dataSet.Tables.Contains("UserAccounts"))
{
    GridView1.DataSource = dataSet.Tables["UserAccounts"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:35:24.140

如果您只是查看 GetUser 的不同重载，您会发现其中一些采用名为 userIsOnline 的布尔值。如果您将此指定为 false，它将不会更新最后在线时间戳，并且不会将它们列为在线。

```
var user = Membership.GetUser(userid, false); 
```

编辑：

我看到你正在使用`GetAllUsers()`而不是`GetUser()`. 存在一些问题，`GetAllUsers()`您不能依赖 IsOnline 属性。相反，您需要检查该`LastActivityDate`字段并找出该字段与当前 DateTime 之间的差异。如果时间量大于您认为的“在线”时间，则他们处于离线状态，否则在线。

# eclipse - 搜索 Eclipse 中的所有类？

> ID：12636393
> 
> 赞同：3
> 
> 时间：2012-09-28T08:31:30.787
> 
> 标签：eclipse, search, find

是否有搜索功能可以在 Eclipse IDE 中的项目中的所有类中搜索特定字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T08:34:00.643

[http://www.allapplabs.com/eclipse/eclipse_shortcuts.htm](http://www.allapplabs.com/eclipse/eclipse_shortcuts.htm)

Ctrl Shift G

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-08T10:23:37.913

CTRL+SHIFT+G 非常适合在项目中搜索类似的字符串

# delphi - 重新安装 XE2 后无法构建

> ID：12636397
> 
> 赞同：0
> 
> 时间：2012-09-28T08:31:36.963
> 
> 标签：delphi, delphi-xe2

> **可能重复：**
> [Delphi XE - F1027 未找到单元：激活试用版后的“System.pas”或二进制等效项 (.dcu)](https://stackoverflow.com/questions/5656975/delphi-xe-f1027-unit-not-found-system-pas-or-binary-equivalents-dcu-upon)

我不得不格式化 myu win7 机器，所以我从头开始重新安装了 Delphi XE2（Embarcadero® RAD Studio XE2 版本 16.0.4429.46931）。安装后，我安装了所有第三方组件（其中一些不适用于 Update 4，例如 Devart 的 SDAC，我有 v 6.1）。

现在，如果我做一个新的 VCL Forms 应用程序并构建它（所以没有逻辑，只是一个空表单）我有：

```
[DCC Fatal Error] Project1.dpr(1): F1027 Unit not found: 'System.pas' or binary equivalents `(.dcu)` 
```

我的第一个想法是全部卸载并重新安装，但你有线索吗？

我应该从哪里开始？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:37:12.987

1）工具/选项/环境/德尔福/库 - 检查正确的路径

2) sysinternals Process Monitor，过滤文件访问，通过包含“系统”的路径过滤。- 查看 dcc 在哪些文件夹中尝试获取该文件而不是正确的路径

# c# - Word 2007 为操作形状但在 Word 2010 中正常工作的互操作代码引发异常

> ID：12636399
> 
> 赞同：5
> 
> 时间：2012-09-28T08:31:49.647
> 
> 标签：c#, .net, ms-word, office-interop

我在将水印图片（用作文具）保存为 PDF 之前应将其添加到文档中的代码存在很大问题。将图片插入所有相关的标题是没有问题的。但是，一旦我尝试将图片（形状）拉伸到整个页面的宽度和高度，Word 2007 (SP3) 就会引发异常。相同的代码在 Word 2010 (SP1) 中运行良好。如果我使用 Office 12 或 Office 14 互操作程序集并不重要（始终与“嵌入互操作类型”一起使用）。

抛出的异常如下：

```
System.Runtime.InteropServices.COMException (0x800A122C): Falscher Zeichnungselement-Typ für diesen Befehl.
   at Microsoft.Office.Interop.Word.Shape.set_RelativeHorizontalSize(WdRelativeHorizontalSize prop)
   at BEKO.PDB.AuxiliaryServices.Documents.WordCreationService.AddWatermarkToHeader(HeaderFooter header, String watermarkFilePath) 
```

我不确切知道英文错误消息是什么，但翻译类似于“此命令的无效绘画类型（或形状类型）”。

奇怪的是，它并不总是在同一个互操作调用上出错。如果我删除设置属性的行，`RelativeHorizontalSize`则在设置另一个属性时会失败，例如`WidthRelative`（同样的例外）。如果我添加一条设置`shape.LeftRelative`（到“不使用”常量）的行，它甚至会在一条原本可以正常工作的行上失败`shape.Top`（同样的例外）。

我正在使用的代码来自记录在失败的 Word 2007 中的宏。在执行任何与页眉相关的代码之前，我也正确地切换到了页眉 SeekView，因为我已经需要它用于其他一些页眉/页脚代码。

这是添加形状的完整代码。它应该只插入图片并将其拉伸到整个页面大小。`headerFooter.Exists`注意：此方法仅对实际存在的 ( ) 且未链接到前一个 ( )的标头调用`!headerFooter.LinkToPrevious`。

```
private static void AddWatermarkToHeader(HeaderFooter header, string watermarkFilePath) {
   header.Range.Editors.Add(WdEditorType.wdEditorEveryone);

   Shape shape = header.Shapes.AddPicture(
      FileName: watermarkFilePath,
      LinkToFile: false,
      SaveWithDocument: true
   );

   shape.WrapFormat.AllowOverlap = (int)MsoTriState.msoTrue;
   shape.WrapFormat.Type = WdWrapType.wdWrapNone;

   shape.RelativeHorizontalPosition = WdRelativeHorizontalPosition.wdRelativeHorizontalPositionPage;
   shape.RelativeVerticalPosition = WdRelativeVerticalPosition.wdRelativeVerticalPositionPage;
   shape.Left = 0;
   shape.Top = 0;

   shape.RelativeHorizontalSize = WdRelativeHorizontalSize.wdRelativeHorizontalSizePage;
   shape.RelativeVerticalSize = WdRelativeVerticalSize.wdRelativeVerticalSizePage;
   shape.WidthRelative = 100;
   shape.HeightRelative = 100;

   shape.ZOrder(MsoZOrderCmd.msoSendBehindText);
} 
```

请提供任何建议如何解决此问题，以便代码适用于 Word 2007 和 Word 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:56:49.007

我意识到这并不能*修复*代码以按要求在两个版本的 Word 上运行，但是您是否尝试过使用图像的绝对大小来代替？保持相对定位，但使用绝对大小。您是否真的需要相对大小（即您的文档是否包含多个页面大小？）。

```
shape.Width = page.Width;
shape.Height = page.Height; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:37:22.480

从 Word 97 到 Word 2003，Word 对象模型中存在一个鲜为人知的错误，如果活动 Word 文档的放大率不是 100% ，则会导致`WdRelativeHorizontalPosition.wdRelativeHorizontalPositionPage`并检索不正确的信息。`WdRelativeVerticalPosition.wdRelativeVerticalPositionPage`我怀疑这个问题在 Word 2007 中仍然存在，并且可能导致您的异常。以下是涉及此问题的两个线程（均处理 VBA 中的相同问题）：

[Points-returned-by-Information-wdHorizo​​ntalPositionSubroutines](http://www.officekb.com/Uwe/Forum.aspx/word-vba/10347/Points-returned-by-Information-wdHorizontalPositionSubroutines)

[Word 97 wdHorizo​​ntalPositionRelativeToPage](https://groups.google.com/forum/?fromgroups#!searchin/microsoft.public.word.word97vba/wdHorizontalPositionRelativeToPage/microsoft.public.word.word97vba/AZnLbq2saFQ/-WoUnPmyZXQJ)

I suggest adding code after the addition of the shape in the header (and prior to retrieving the relative horizontal and vertical positions to the page) that changes the Active Document's zoom to 100% and the View Type to the Print Layout view. (You may have to experiment with which part of the Word document is displayed when the code for changing the positioning and sizing of the shape is executed. Sometimes it will be necessary for the Active Document to display/be able to edit the main document instead of the header.)

# sql-server - 计算存储在 SQL Server 2008 中的字符串变量中的表达式

> ID：12636403
> 
> 赞同：2
> 
> 时间：2012-09-28T08:32:10.053
> 
> 标签：sql-server, sql-server-2008, stored-procedures

我有一个存储在字符串变量中的条件表达式，

例如 ：

```
declare @x int=501,@y int=0,@str varchar(max)

set @str='if @x > 500 set @y=1000 else set @y=500' 
```

谁能告诉我如何计算这个字符串并`SQL Server 2008`从存储过程中获取结果。

提前致谢

标清

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:54:35.467

您需要 sp_executesql，但它有一些细微差别，尤其是在传入变量和获取值方面。

```
declare @x int=501,@y int=0,@str Nvarchar(max)
set @str='if @x > 500 set @y=1000 else set @y=500'

exec sp_executesql @str, N'@x int, @y int output', @x, @y output
select @y

-- result
1000 
```

请注意，@str 已被重新定义为 NVARCHAR。sp_executesql 要求查询为 NVARCHAR。
第二要注意的是，对于需要在调用`output`中保持值更改的任何变量，该子句必须使用两次`sp_executesql`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T08:36:00.033

您需要使用[sp_executesql来使用动态 SQL](http://msdn.microsoft.com/en-us/library/ms188001%28v=sql.105%29.aspx)

[使用 sp_executesql](http://msdn.microsoft.com/en-us/library/ms175170%28v=sql.105%29.aspx)

[虽然，我会检查你为什么需要这样做......]

# javascript - 在网页上使用 openstreetmap

> ID：12636405
> 
> 赞同：2
> 
> 时间：2012-09-28T08:32:31.500
> 
> 标签：javascript, gis

有谁知道 OpenStreetMap 是否有一些设施，我可以提供一个国家列表，而“插件”只是突出显示地图上的国家？

相信我，在过去一两天里，我搜索了高点和低点，寻找示例，但只能看到提供特定 Lat/Lon 亮点的示例。

欣赏这并不是一个真正的“发展”问题，但我很肯定这里的某个地方有人做过类似的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-06T15:23:47.413

它假设使用 OpenLayers 框架来加载 OpenSreetMap 瓦片。该答案基于 openlayers 示例。可以从这里加载国家轮廓信息：//openlayers.org/en/v3.2.1/examples/data/geojson/countries.geojson

```
var styleCache = {};
var countrySource = new ol.source.GeoJSON({
  projection: 'EPSG:3857',
  url: "http://openlayers.org/en/v3.2.1/examples/data/geojson/countries.geojson"
})
var vectorLayer = new ol.layer.Vector({
  source: countrySource,
  style: function(feature, resolution) {
    var text = resolution < 5000 ? feature.get('name') : '';
    if (!styleCache[text]) {
      styleCache[text] = [new ol.style.Style({
        fill: new ol.style.Fill({
          color: 'rgba(255, 255, 255, 0.6)'
        }),
        stroke: new ol.style.Stroke({
          color: '#319FD3',
          width: 1
        }),
        text: new ol.style.Text({
          font: '12px Calibri,sans-serif',
          text: text,
          fill: new ol.style.Fill({
            color: '#000'
          }),
          stroke: new ol.style.Stroke({
            color: '#fff',
            width: 3
          })
        })
      })];
    }
    return styleCache[text];
  }
});

var view = new ol.View({
  center: ol.proj.transform([37.41, 8.82], 'EPSG:4326', 'EPSG:3857'),
  zoom: 5
});

var map = new ol.Map({
  layers: [
    new ol.layer.Tile({
      source: new ol.source.MapQuest({
        layer: 'osm'
      })
    }),
    vectorLayer
  ],
  target: 'map',
  view: view
});

var highlightStyleCache = {};

var featureOverlay = new ol.FeatureOverlay({
  map: map,
  style: function(feature, resolution) {
    var text = resolution < 5000 ? feature.get('name') : '';
    if (!highlightStyleCache[text]) {
      highlightStyleCache[text] = [new ol.style.Style({
        stroke: new ol.style.Stroke({
          color: '#f00',
          width: 1
        }),
        fill: new ol.style.Fill({
          color: 'rgba(255,0,0,0.1)'
        }),
        text: new ol.style.Text({
          font: '12px Calibri,sans-serif',
          text: text,
          fill: new ol.style.Fill({
            color: '#000'
          }),
          stroke: new ol.style.Stroke({
            color: '#f00',
            width: 3
          })
        })
      })];
    }
    return highlightStyleCache[text];
  }
});

var highlight;
var displayFeatureInfo = function(pixel) {

  var feature = map.forEachFeatureAtPixel(pixel, function(feature, layer) {
    return feature;
  });
  if (feature !== highlight) {
    if (highlight) {
      featureOverlay.removeFeature(highlight);
    }
    if (feature) {
      featureOverlay.addFeature(feature);
    }
    highlight = feature;
  }
};

var selectFeatureInfo = function(featureId) {
  var features = countrySource.getFeatures();
  var feature;
  for (var f = 0; f < features.length; f++) {
    feature = features[f];
    if (feature.aa == featureId) {
      var polygon = (feature.getGeometry());
      var size = (map.getSize());
      view.fitGeometry(
        polygon,
        size, {
          padding: [170, 50, 30, 150]
        });
      break;
    }
  }
  if (feature !== highlight) {
    if (highlight) {
      featureOverlay.removeFeature(highlight);
    }
    if (feature) {
      featureOverlay.addFeature(feature);
    }
    highlight = feature;
  }
};

$(map.getViewport()).on('mousemove', function(evt) {
  var pixel = map.getEventPixel(evt.originalEvent);
  displayFeatureInfo(pixel);
});

map.on('click', function(evt) {
  displayFeatureInfo(evt.pixel);
});

///
$(document).ready(function() {

  loadCountryJson();
  var countrySelector = document.getElementById('osm-country-selector');
  $(countrySelector).on('change', function() {
    selectFeatureInfo(this.value);
  });
});

function loadCountryJson() {

  $.getJSON("http://openlayers.org/en/v3.2.1/examples/data/geojson/countries.geojson", function(data) {

    var countryList = getCountries(data);
    var tools = document.getElementById('tools');
    $(tools).append('<select id="osm-country-selector"/>');
    var countrySelect = document.getElementById('osm-country-selector');
    $(countrySelect).attr("name", "countries");

    countryList.forEach(function(d) {
      $('#osm-country-selector').append($('<option>', {
        value: d.id,
        text: d.properties.name
      }));
    });
    $(countrySelect).on('change', function() {
      console.log('countrySelect');
      selectFeatureInfo(this.value);
    });

  });
}

function getCountries(data) {
  var i;
  var features = data.features;
  var items = [];
  for (i = 0; i < features.length; i++) {
    var country = features[i];
    var prop = country.properties;
    items.push({
      "id": country.id,
      "name": prop.name
    });
  }
  return features;
}
```

```
.map {
  height: 500px;
  width: 500px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.4.0/ol.js"></script>

<div id="map" class="map"></div>
<br/>
<div id="tools" />
```

要按以下步骤完成此任务：

1.  提供html标签：

```
<div id="map" class="map"></div>
<br/>
<div id="tools" /> 
```

2\. 初始化地图：

```
var styleCache = {};
var countrySource = new ol.source.GeoJSON({
        projection: 'EPSG:3857',
        url: "http://openlayers.org/en/v3.2.1/examples/data/geojson/countries.geojson"
    })
    var vectorLayer = new ol.layer.Vector({
        source: countrySource,
        style: function (feature, resolution) {
            var text = resolution < 5000 ? feature.get('name') : '';
            if (!styleCache[text]) {
                styleCache[text] = [new ol.style.Style({
                    fill: new ol.style.Fill({
                        color: 'rgba(255, 255, 255, 0.6)'
                    }),
                    stroke: new ol.style.Stroke({
                        color: '#319FD3',
                        width: 1
                    }),
                    text: new ol.style.Text({
                        font: '12px Calibri,sans-serif',
                        text: text,
                        fill: new ol.style.Fill({
                            color: '#000'
                        }),
                        stroke: new ol.style.Stroke({
                            color: '#fff',
                            width: 3
                        })
                    })
                })];
            }
            return styleCache[text];
        }
    });

    var view = new ol.View({
        center: ol.proj.transform([37.41, 8.82], 'EPSG:4326', 'EPSG:3857'),
        zoom: 5
    });

    var map = new ol.Map({
        layers: [
        new ol.layer.Tile({
            source: new ol.source.MapQuest({
                layer: 'osm'
            })
        }),
        vectorLayer],
        target: 'map',
        view: view
    }); 
```

3.  为国家/地区实施突出显示样式：

    var highlightStyleCache = {};
    文本，填充：新 ol.style.Fill({ color: '#000' })，笔触：新 ol.style.Stroke({ color: '#f00', width: 3 }) }) })]; } 返回 highlightStyleCache[文本]; } }); 3 }) }) })]; } 返回 highlightStyleCache[文本]; } }); 3 }) }) })]; } 返回 highlightStyleCache[文本]; } });

    4.  从加载的国家数据中解析国家名称并用它填充选择器选项：

var highlightStyleCache = {}; var featureOverlay = new ol.FeatureOverlay({ map: map, style: function (feature, resolution) { var text = resolution < 5000 ? feature.get('name') : ''; if (!highlightStyleCache[text]) { highlightStyleCache[text] = [new ol.style.Style({ stroke: new ol.style.Stroke({ color: '#f00', width: 1 }), fill: new ol.style.Fill({ color: ' rgba(255,0,0,0.1)' }), text: new ol.style.Text({ font: '12px Calibri,sans-serif', text: text, fill: new ol.style.Fill({ color : '#000' })，中风：新 ol.style.Stroke({ color: '#f00', width: 3 }) }) })]; } 返回 highlightStyleCache[文本]; } });

5.  放大并突出显示所选国家：

    var selectFeatureInfo = function (featureId) { var features = countrySource.getFeatures(); 变种特征；for (var f = 0; f < features.length; f++) { feature = features[f]; if (feature.aa == featureId) { var polygon = (feature.getGeometry()); var 大小 = (map.getSize()); view.fitGeometry(polygon, size, { padding: [170, 50, 30, 150] }); 休息; } } if (feature !== highlight) { if (highlight) { featureOverlay.removeFeature(highlight); } if (feature) { featureOverlay.addFeature(feature); } 高亮 = 功能；} };

JSFiddle 示例[在这里](https://jsfiddle.net/den367/bs97uLzf/4/)

# ruby-on-rails - Rails 3条件表达式退休为零是问题吗？

> ID：12636408
> 
> 赞同：0
> 
> 时间：2012-09-28T08:32:40.083
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

ruby-1.9.3-p194 导轨 3.0.9

我遇到了很多条件表达式求值的奇怪行为。
看一段代码：

```
module SimpleCaptcha
  module ControllerHelpers
    def simple_captcha_valid?

      t = Logger.new(STDOUT)

      return true if Rails.env.test?

      if params[:captcha]
        data = 'SHGHGD'
        result = data == params[:captcha].delete(" ").upcase

        t.debug data
        t.debug params[:captcha].delete(" ").upcase
        t.debug result

      else
        return false
      end
    end
  end
end 
```

这是我在调试控制台中看到的：

```
SHGHGD
WEWE
nil 
```

如您所见， nil 是评估**结果 = data == params[:captcha].delete(" ").upcase**

但为什么？？？
**数据**是**'SHGHGD'**
**params[:captcha].delete(" ").upcase**是**WEWE**

为什么是零？它一定是假的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:37:01.957

这实际上是因为记录器 -`Logger.debug false`输出为零。要了解为什么需要查看记录器类 (logger.rb)。调试、信息、警告等方法最终都会调用

```
def add(severity, message = nil, progname = nil, &block)
  severity ||= UNKNOWN
  if @logdev.nil? or severity < @level
    return true
  end
  progname ||= @progname
  if message.nil?
    if block_given?
      message = yield
    else
      message = progname
      progname = @progname
    end
  end
end 
```

message 将为 nil，progname 将是您传递的值（即字符串）。关键是`progname ||= @progname`。因为 progname 是`false`，它被 的值覆盖`@progname`，它是 nil ，所以这就是输出。

# ruby-on-rails - Ruby on Rails：一次搜索两个模型

> ID：12636413
> 
> 赞同：0
> 
> 时间：2012-09-28T08:32:51.483
> 
> 标签：ruby-on-rails, ruby, database, search, models

我有一个搜索页面，用户可以使用不同的下拉菜单搜索不同的项目。他们一次可以搜索多个字段，如果找到与所有字段匹配的项目，搜索将返回一些内容。

这是我在项目控制器中的搜索操作：

```
def search

@search = params[:client], params[:industry], params[:tech], params[:keywords]

@project_search = Project.search(*@search).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

@search_performed = !@search.reject! { |c| c.blank? }.empty? 

   @project = Project.new(params[:project])

@all_technols = Technol.all

@project_technol = @project.projecttechnols.build

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

这是我的搜索视图。

```
<%= stylesheet_link_tag "search" %>
<body>
<div id = "search_op">

<%= form_tag search_path, method: :get do %>

<div class="client">
Client : 
<%= select(@projects, :client, Project.order("client").map{|p| [p.client]}.uniq, :prompt => "-Any-", :selected => params[:client]) %></br>
</div>

<div class="industry">
Industry :
<%= select(@projects, :industry, Project.order("industry").map {|p| [p.industry]}.uniq, :prompt => "-Any-", :selected => params[:industry]) %></br>
</div>

<div class="tech">
Technologies :
<%#= select(@projects, :tech, Project.order("tech").map {|p| [p.tech]}.uniq, :prompt => "-Any-", :selected => params[:tech]) %></br>
<!/div>

<%= fields_for(@project_technol) do |ab| %>

<%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true } ) %>
</div>
<% end %>

<div class="keywords">
Keywords :

<%= text_field_tag :keywords, params[:keywords] %></br>
</div>

<div class="results">
Results per page: <%= select_tag :per_page, options_for_select([10,20,50], :selected=>params[:per_page]),  { :onchange => "this.form.submit();"}   %></br>

<%#Results per page: <%= select_tag :per_page, options_for_select([1,2,5], :selected=>params[:per_page]),  :onchange => "'#{request.query_string}&per_page=' + this.getValue()"  %></br>
</div>

<div class="buttons">
<div id="search_button">
<%= submit_tag "Search", name: nil, :class => "button" %>
</div>

<% end %>

<div class="home_button">
<%= button_to "Home", projects_path, :class => "button", :method => "get"  %>
</div>

<div id="reset_button">
<%= button_to "Reset Search", search_path, :class => "button", :method => "get" %>
</div>

</div>
</div> <%#search_op div%>

<div class ="menu"></div>

<div id ="section3">

<% if @project_search.total_entries > 0 %>
<% if @search_performed %>

<table id = "mytable">

  <tr>
    <th><%= sortable "project_name", "Project name" %> </th>
    <th><%= sortable "client", "Client" %></th>
    <th><%= sortable "tech", "Technologies" %></th>
    <th><%= sortable "industry", "Industry" %></th>

  </tr>

<% @project_search.each do |t| %>
  <tr>
    <td><%= link_to t.project_name, t %></td>
    <td><%= t.client %></td>

    <td><%= t.tech %></td>
    <td><%= t.industry %></td>

    <!td><%#= link_to 'Show', t %></td>
    <!td><%#= link_to 'Edit', edit_project_path(project) %></td>
    <!td><%#= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table></br>

<div id ="total_results"><%=@project_search.total_entries%> results</div>
<%end %>

<% else %>
<h2> Sorry, there are no results matching your search. Please try again. </h2> 
<% end %>
<br />
<%# end %>

</div> <%# table div %>
</div> <%# section2 div %>

<% if @search_performed %>
<%= hidden_field_tag :direction, params[:direction] %>
<%= hidden_field_tag :sort, params[:sort] %>
<%= hidden_field_tag :per_page, params[:per_page] %>
<%= hidden_field_tag :page, params[:page] %>

<%= will_paginate (@project_search), :class => 'will' %>

<% end %>

</body>

</html> 
```

这是我的project.rb：

```
class Project < ActiveRecord::Base

has_many :projecttechnols
has_many :technols, :through => :projecttechnols

def self.search(search_client, search_industry,  search_tech, search_keywords) 
  return scoped unless search_client.present? || search_industry.present? || search_tech.present? || search_keywords.present?

where(['client LIKE ? AND industry LIKE ? AND tech LIKE ? keywords LIKE ?', 
      "%#{search_client}%", "%#{search_industry}%" , " "%#{search_tech}%"  
       "%#{search_keywords}%"
    ])

end

def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end

end 
```

如果我使用调试，并在技术下拉列表中搜索第一项技术，我会得到这个。

```
---
utf8: ✓
client: ''
industry: ''
technols:
  id:
  - ''
  - '1'

keywords: ''
per_page: '10'
action: search
controller: projects
page: 1 
```

但没有结果。

我有一个新表，其中包含与项目相关的所有技术，并且在设置搜索、搜索所有字段以及搜索是否有任何技术与技术表。

谁能指出我正确的方向。我是 Rails 新手，所以在尝试提供帮助时请记住这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:23:37.807

或者尝试使用像 Sphinx 和 thinking_sphinx gem 这样的外部搜索引擎

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:37:29.570

也许您会尝试使用搜索 gem，例如[meta_search](https://github.com/ernie/meta_search)？

# vb.net - 来自 LINQ 查询的总和

> ID：12636414
> 
> 赞同：1
> 
> 时间：2012-09-28T08:32:57.240
> 
> 标签：vb.net, asp.net-mvc-3, linq

无法使其正常工作。想要从以下 LINQ 语句中获取数据库中所有金额的总和：

```
 Dim currentPaid = From a In db.Payments
                          Where a.ForJob = id
                          Select a.Amount

        Dim totalPaid As Double = currentPaid.Sum() 
```

正如它强调第二条语句并说：重载解决失败，因为没有可访问的“总和”接受这个数量的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:18:41.327

用代码问了另一个问题，有人准确地回答了我的问题，所以答案如下：

```
 Dim totalPaid = db.Payments.Where(Function(a) a.ForJob = jobId).Sum(Function(a) a.Amount) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:38:00.887

```
Dim sum = (From a In db.Payments Where a.ForJob = id Select a.Amount).Sum(); 
```

# java - 使用单词作为分隔符拆分字符串

> ID：12636417
> 
> 赞同：3
> 
> 时间：2012-09-28T08:33:03.210
> 
> 标签：java, regex, string

我正在尝试使用带有正则表达式的java中的string.split从母字符串中取出特殊字符串。

```
string str = "name ching chang field computer engineering grade 9.98";
string[] splits = str.split("regex"); 
```

我想使用名称、字段和等级作为分隔符。现在正则表达式应该是什么，以便我的字符串数组（拆分）中有以下项目：

```
splits[0] = "ching chang"  
splits[1] = "computer engineering"  
splits[2] = "9.98" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-28T08:41:29.173

```
String str = "name ching chang field computer engineering grade 9.98";
String[] splits = str.split("name |field |grade ");

//test with
for(String s : splits)
    System.out.println(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:42:31.430

```
 String str = "name ching chang field computer engineering grade 9.98";
    String[] splits = str.split("name|field|grade");
    System.out.println(Arrays.asList(splits)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:37:10.300

```
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

/**
 * Fieldsplitter with configurable fields
 */
public class FieldSplitter {

    private static Logger LOG = new Logger();

    /**
     * Test method
     * 
     * @param args
     *            not used
     */
    public static final void main(String[] args) {

        String[] fields = new String[] { "name", "field", "grade" };
        // regular test case
        printFieldValues(fields,
                "name ching chang field computer engineering grade 9.98");
        // missing field
        printFieldValues(fields,
                "ching chang field computer engineering grade 9.98");
        // duplicate field
        printFieldValues(fields,
                "name ching chang field computer engineering name johnny bravo grade 9.98");
    }

    /**
     * Gets the values of the fields from the input. If a field is not found the
     * value is null. If a field occurs multiple times the last value is used.
     * 
     * @param fields
     *            the known fields
     * @param input
     *            the input containing consecutive fields and their values
     *            separated by whitespace
     * @return a Map containing all known fields and their values
     */
    public static Map<String, String> getFieldValues(String[] fields,
            String input) {
        Map<String, String> fieldValues = new HashMap<String, String>();
        for (String field : fields) {
            fieldValues.put(field, null);
        }
        String[] words = input.split("\\s");
        LOG.debug("words:" + Arrays.toString(words));
        String field = null;
        int start = 0;
        for (String word : words) {
            if (fieldValues.containsKey(word)) {
                int end = input.indexOf(word, start);
                if (end < 0) {
                    throw new RuntimeException(String.format(
                            "Error: '%s' not found after position %s", word,
                            end));
                }
                if (field != null) {
                    fieldValues.put(field, input.substring(start, end));
                }
                field = word;
                start = end + word.length();
            }
        }
        if (field != null) {
            fieldValues.put(field, input.substring(start, input.length()));
        }
        return fieldValues;
    }

    private static void printFieldValues(String[] fields, String input) {
        for (Entry<String, String> field : getFieldValues(fields, input)
                .entrySet()) {
            LOG.debug(String.format("%s=%s", field.getKey(), field.getValue()));
        }
    }

    /** A simple logger */
    private static class Logger {
        void debug(String message) {
            System.out.println(message);
        }
    }
} 
```

输出：

```
words:[name, ching, chang, field, computer, engineering, grade, 9.98]
grade= 9.98
name= ching chang 
field= computer engineering 
words:[ching, chang, field, computer, engineering, grade, 9.98]
grade= 9.98
name=null
field= computer engineering 
words:[name, ching, chang, field, computer, engineering, name, johnny, bravo, grade, 9.98]
grade= 9.98
name= johnny bravo 
field= computer engineering 
```

PS 我刚刚发现了一个简单但方便的技巧：在 Eclipse 中选择您的代码并按 TAB 来缩进它。然后将缩进的代码复制并粘贴到 Stackoverflow 编辑字段中。这样，代码将立即正确呈现。

# macos - Mac OS X 上的 Awesomium

> ID：12636419
> 
> 赞同：0
> 
> 时间：2012-09-28T08:33:22.377
> 
> 标签：macos, cocoa, awesomium

有没有人用过Mac OSX 上的[Awesomium 框架？](http://awesomium.com/)我尝试创建一个示例项目并在 main.m 中添加代码，但它有错误

```
Undefined symbols for architecture i386:
  "Awesomium::WebCoreConfig::setCustomCSS(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

你对这个错误有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:36:06.357

`main.m`是一个 Objective-C 源文件，`std::__1::basic_string, std::__1::allocator > const&`是一个 C++ 类。

将名称更改`main.m`为`main.mm`，使其成为 Objective-C++ 源文件，然后重试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:42:42.397

Awesomium 只有 32 位（铬的当前限制），而 Apple 的编译器现在默认为 64 位。您必须使用`-m32`（或者如果使用 Xcode 仅将架构设置为 32 位，如 OP 发布的链接中所示） 编译您的应用程序

例子：

```
clang -m32 awe_test.cpp -o test -framework Awesomium -F$(DIR_WHERE_I_HAVE_AWESOMIUM) -I$(DIR_WHERE_I_HAVE_AWESOMIUM) 
```

# html - 内部 div 最小高度后溢出的背景颜色

> ID：12636421
> 
> 赞同：0
> 
> 时间：2012-09-28T08:33:29.823
> 
> 标签：html, css

我有一个 body 的背景图像和一个包装 div 的背景颜色。我没有为 body 设置任何高度，我使用 min-height:1000px 进行包装。但如果 wrapper 高度扩展 1000px;，则 wrapper 的背景颜色为 body 背景图像。HTML 代码：

```
<body>
 <div id="wrapper">
  <div id="header">
    <div id="headercontainer">
      <div id="company"></div>
      <div id="tagline"></div>
      <div id="navigation"></div>
    </div>
  </div>
  <div id="pagecontainer1"></div>
  <div id="footer1"></div>
</div> 
```

这是CSS：

```
body{
background:#E8EDF0;
    margin:0;
width:100%;
background-image: url(http://l1.yimg.com/a/i/ww/met/th/slate/gsprite_pg_slate_20100521.png);
background-repeat: repeat-x;
background-position: 0px -2335px;}
#wrapper{
background-color:#FFF;
min-height:1000px;
width:1008px;
margin:auto;
position:relative;
overflow:visible;
} 
```

我怎样才能解决这个包装器的背景颜色问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:43:22.033

正如您对页面进行编码的方式一样，您无法让包装器覆盖整个高度。所以最好的方法是为你的全身制作一个背景图像，如下所示：

### 灰色区域##-----白色区域：1008px-----###灰色区域

使其宽 2000 像素（或更多），高 1 像素，然后垂直重复：

```
background:#E8EDF0 url(new-background-path.jpg) top center repeat-y; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:04:52.530

只需添加`<div style="clear:both"></div>`pagecontainer1 div。因为我认为有一些浮动 div，所以要清除浮动，请使用浮动清除，或者您可以使用溢出：隐藏；而不是溢出：可见；

```
<div id="wrapper">
  <div id="header">
    <div id="headercontainer">
      <div id="company"></div>
      <div id="tagline"></div>
      <div id="navigation"></div>
    </div>
  </div>
  <div id="pagecontainer1">
    <div style="clear:both"></div>
  </div>
  <div id="footer1"></div>
  <div style="clear:both"></div>
</div> 
```

# java - 如何为 Tomcat 服务器创建 Java Portlet？

> ID：12636422
> 
> 赞同：-1
> 
> 时间：2012-09-28T08:33:32.393
> 
> 标签：java, tomcat, servlets, portlet

我们需要为 Tomcat 服务器创建 Java Portlet。我们可以这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T08:43:09.257

要运行 portlet，您需要在 Portal 或 Portlet 容器中运行它，例如[Apache JetSpeed](http://portals.apache.org/jetspeed-2/)或[Apache Pluto](http://portals.apache.org/pluto/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T06:12:34.607

如前所述，您需要一个 Portal 或 Portlet 容器。

你可以试试[Liferay](https://www.liferay.com/downloads/liferay-portal/available-releases)。他们提供了一个 Tomcat 包，它更像是一个真正的 Portal，而不是一个测试容器。

将您的 Portlet 放在“deploy”文件夹中，它将注册为一个 Portlet。

# java - Netbeans 7.1 运行旧代码而不是新代码

> ID：12636423
> 
> 赞同：2
> 
> 时间：2012-09-28T08:33:57.693
> 
> 标签：java, netbeans, netbeans-7.1

好吧，这真的很奇怪。我前一天写了一些代码，然后编辑了代码。然后经过数小时的编辑、重写和引入新课程，我运行了代码，但随后我从早已删除的“System.out.println()”行中得到了响应。基本上，netbeans 似乎正在运行我的代码的更旧版本。我已经清理并重新构建了我的代码，但仍然没有。它继续运行旧代码。

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:49:18.287

在 Neatbeans 中，默认设置将运行您的新代码，即使您没有再次构建项目（假设您没有修改构建设置）。您可以再次清理并构建项目。如果这也不起作用，只需备份您的代码并创建一个新项目并包含源代码并运行该项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T08:35:52.560

也许您可以尝试清除netbeans缓存

1.  关闭 NetBeans
2.  删除缓存文件夹（/home/user/.cache/netbeans）
3.  打开项目并等待扫描项目完成

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-21T20:34:09.880

如果 clean 和 build 没有为您完成工作，请尝试 SHIFT+F6 而不仅仅是 F6 作为 RUN 的快捷方式。对我来说就是这种情况，现在它工作得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-02T16:56:01.353

我有类似的问题。我点击**"Clean and Build"**，然后点击**"Run"**，它成功了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T08:42:16.263

嗯，好好清洁！检查您的 bin 中的任何只读文件夹，以防止覆盖类文件。转到类文件夹并检查日期和时间类文件已被修改。

# java - Apache Solr：按位运算过滤搜索结果

> ID：12636426
> 
> 赞同：3
> 
> 时间：2012-09-28T08:34:05.310
> 
> 标签：java, solr, drupal-7

我需要过滤与我们的cms中的访问权限相对应的solr搜索结果（drupal 7 +基于位掩码的自定义访问控制机制）。

有一个 Solr QParserPlugin 插件，用于基于整数字段的按位运算过滤搜索结果：[https](https://issues.apache.org/jira/browse/SOLR-1913) ://issues.apache.org/jira/browse/SOLR-1913 。

我在tomcat6（在debian系统上）上使用Solr 3.6.1（+ /var/lib/tomcat6/solr/lib/bitwise_filter_plugin.jar中的插件）和drupal模块search_api_solr提供的[schema.xml](http://drupalcode.org/project/search_api_solr.git/blob/3e6fda7:/solrconfig.xml)和solrconfig.xml在模块问题队列中找到（如 SOLR-1913 问题中所示扩展）。

Solr 查询...

```
http://solr:8080/solr/select?qf=t_title&fl=*,score&fq={!bitwise field=is_bitmask op=AND source=1234}* 
```

...失败并在错误日志中显示以下消息：

```
Sep 27, 2012 8:57:41 AM org.apache.solr.core.SolrCore execute
INFO: [] webapp=/solr path=/select params={qf=t_title&fl=*,score&fq={!bitwise+field%3Dis_bitmask+op%3DAND+source%3D1234}} status=500 QTime=15 
Sep 27, 2012 8:57:41 AM org.apache.solr.common.SolrException log
SEVERE: java.lang.NullPointerException
  at org.apache.lucene.search.FilteredQuery.hashCode(FilteredQuery.java:268)
  at java.util.AbstractList.hashCode(AbstractList.java:542)
  at org.apache.solr.search.QueryResultKey.<init>(QueryResultKey.java:49)
  at org.apache.solr.search.SolrIndexSearcher.getDocListC(SolrIndexSearcher.java:1084)
  at org.apache.solr.search.SolrIndexSearcher.search(SolrIndexSearcher.java:375)
  at org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:394)
  at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:186)
  at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
  at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
  at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365)
  at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260)
  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
  at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
  at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
  at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
  at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
  at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
  at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
  at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
  at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
  at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
  at java.lang.Thread.run(Thread.java:636) 
```

我在错误消息中唯一能看到的是插件是由 solr 调用的。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T23:00:22.777

与其让 Solr 以你的方式去做，你可能想尝试一下 Solr 的方式。Solr 已经实现了布尔逻辑。

将您的位域拆分为一组命名的布尔字段。如果您缺乏灵感，它们甚至可以是 bit_0、bit_1 等。您可以使用动态字段来保存输入并允许以后扩展。

对于每个文档，将它们索引为 bit_0:true 等等。

使用过滤器查询中的这些字段进行选择：bit_0:true AND bit_24:true。

这可能比在每个字段上进行按位比较运行得快得多。按位比较可能需要对每个查询进行全表扫描。好吧，全字段值扫描，因为 Solr 没有表。

# c# - 如何以编程方式使 Excel 工作表滚动到一行

> ID：12636434
> 
> 赞同：1
> 
> 时间：2012-09-28T08:34:35.027
> 
> 标签：c#, vsto, excel-2010

我有一个 Excel 的 VSTO 加载项，它用数据填充工作表中的列表对象，我希望工作表自动滚动以显示列表的底部（如果用户正在查看另一个工作表，则无需强制将焦点放在此工作表上）。有没有办法以编程方式做到这一点？

谢谢 <333

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-01-26T10:34:45.377

注意：此答案取自**Ben Stabile**在已接受答案下的评论；以防其他人正在寻找“**正确**”的答案，但没有碰巧看到评论。我尝试了 Ben 的建议，它完全实现了 Excel 中的“Go To”。

`activeCell.Select()`即使它不在视图中，也会简单地选择单元格。正确的方法是使用类似的东西：`Application.ActiveWindow.ScrollRow = range.Rows.Count.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:29:50.337

我想你想要这样的东西：

```
Worksheet worksheet = Application.Sheets[2]; //Index of the sheet you want to change the selected cell on

if (worksheet == Application.ActiveSheet)
{
    Excel.Range range = worksheet.UsedRange;

    int rows = range.Rows.Count;
    int columns = range.Columns.Count;

    Excel.Range activeCell = worksheet.Cells[rows, columns];
    activeCell.Select();
} 
```

只需选择包含数据的工作表，检查这是否是用户当前正在使用的工作表，如果是，则创建一个 Range 对象，该对象等于工作表中使用的单元格，然后获取列和行的计数，然后创建第二个 Range 对象，该对象等于右下角使用的单元格，并调用`Select();`此 Range 上的方法以使其成为活动单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-09T09:05:18.673

// 工作簿中所有工作表的“拆分”、“冻结”、“添加过滤器”、“列自动调整”的代码

```
 //path were excel file is kept
            string ResultsFilePath = @"C:\\Users\\krakhil\\Desktop\\FolderName\\FileNameWithoutExtension";

            Excel.Application ExcelApp = new Excel.Application();
            Excel.Workbook ExcelWorkbook = ExcelApp.Workbooks.Open(ResultsFilePath);
            ExcelApp.Visible = true;

            //Looping through all available sheets
            foreach (Excel.Worksheet ExcelWorksheet in ExcelWorkbook.Sheets)
            {                
                //Selecting the worksheet where we want to perform action
                ExcelWorksheet.Select(Type.Missing);

                //Making sure first row is selected - else split and freeze will happen
                //On the visible part and not from the top
                Excel.Range activeCell = ExcelWorksheet.Cells[1, 1];
                activeCell.Select();

                //Applying auto filter to Row 10
                activeCell = (Excel.Range)ExcelWorksheet.Rows[10];
                activeCell.AutoFilter(1,
                    Type.Missing,
                    Excel.XlAutoFilterOperator.xlAnd,
                    Type.Missing,
                    true);

                //Split the pane and freeze it
                ExcelWorksheet.Application.ActiveWindow.SplitRow = 10;
                ExcelWorksheet.Application.ActiveWindow.FreezePanes = true;

                //Auto fit all columns
                ExcelWorksheet.Columns.AutoFit();

                //Releasing range object
                Marshal.FinalReleaseComObject(activeCell);
            }

            //saving excel file using Interop
            ExcelWorkbook.Save();

            //closing file and releasing resources
            ExcelWorkbook.Close(Type.Missing, Type.Missing, Type.Missing);
            Marshal.FinalReleaseComObject(ExcelWorkbook);
            ExcelApp.Quit();
            Marshal.FinalReleaseComObject(ExcelApp); 
```

# magento - Magento：有没有办法记录管理员何时启动手动重新索引以及何时开始和结束？

> ID：12636435
> 
> 赞同：1
> 
> 时间：2012-09-28T08:34:37.467
> 
> 标签：magento, logging, indexing

我正在使用 Magento Community 1.6.1.0，我想跟踪我们的管理员何时开始手动重新索引，以及重新索引需要多长时间（即何时开始和停止）。输出将类似于：

```
Reindex process name, Datetime, Admin User, Start/End 
```

我认为这将是有价值的信息，有助于优化我们的数据输入策略，了解哪些流程需要很长时间，谁在启动它们，以及一天中的什么时间。

我使用过 Enterprise 版本的 Admin Log，但这并没有捕获所有内容（而且我不会为此升级到 Enterprise）。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:35:44.283

为此，您需要创建一个扩展的自定义模块：

/app/code/core/Mage/Index/controllers/Adminhtml/ProcessController.php

更新

```
public function reindexProcessAction()
{
    $process = $this->_initProcess();

    // start logger here and get admin user name

    if ($process) {
        try {
            Varien_Profiler::start('__INDEX_PROCESS_REINDEX_ALL__');

            $process->reindexEverything();
            Varien_Profiler::stop('__INDEX_PROCESS_REINDEX_ALL__');
            $this->_getSession()->addSuccess(
                Mage::helper('index')->__('%s index was rebuilt.', $process->getIndexer()->getName())
            );
        } catch (Mage_Core_Exception $e) {
            $this->_getSession()->addError($e->getMessage());
        } catch (Exception $e) {
            $this->_getSession()->addException($e,
                 Mage::helper('index')->__('There was a problem with reindexing process.')
            );
        }
    } else {
        $this->_getSession()->addError(
            Mage::helper('index')->__('Cannot initialize the indexer process.')
        );
    }

     // stop timer and write information to db or file

    $this->_redirect('*/*/list');
} 
```

和

```
public function massReindexAction()
{    
    // start logger here and get admin user name
    /* @var $indexer Mage_Index_Model_Indexer */
    $indexer    = Mage::getSingleton('index/indexer');
    $processIds = $this->getRequest()->getParam('process');
    if (empty($processIds) || !is_array($processIds)) {
        $this->_getSession()->addError(Mage::helper('index')->__('Please select Indexes'));
    } else {
        try {
            foreach ($processIds as $processId) {
                /* @var $process Mage_Index_Model_Process */
                $process = $indexer->getProcessById($processId);
                if ($process) {
                    $process->reindexEverything();
                }
            }
            $count = count($processIds);
            $this->_getSession()->addSuccess(
                Mage::helper('index')->__('Total of %d index(es) have reindexed data.', $count)
            );
        } catch (Mage_Core_Exception $e) {
            $this->_getSession()->addError($e->getMessage());
        } catch (Exception $e) {
            $this->_getSession()->addException($e, Mage::helper('index')->__('Cannot initialize the indexer process.'));
        }
    }
    // stop timer and write information to db or file
    $this->_redirect('*/*/list');
} 
```

# ruby-on-rails - 如何显示查询结果 Activerecord 查询界面

> ID：12636436
> 
> 赞同：1
> 
> 时间：2012-09-28T08:34:49.147
> 
> 标签：ruby-on-rails, activerecord

我有个小问题，通过Activerecord Query Interface写的其实是：

`Gp.select("date('gps'.'created_at') as date,('users'.'name') as name, SUM('gps'.'sum_issue') as sum_issue").joins('LEFT JOIN users ON users.id = gps.user_id').where("users.ab_id = :abs_id AND users.id != 20", {:abs_id => current_user.ab_id}).group("users.name")`

查询结果必须是用户名、总和、日期。如果我直接从 SQLlite 执行此查询，则可以，但是 Active Record 查询接口给了我

```
[#<Gp sum_issue: 289000>, #<Gp sum_issue: 364130>, #<Gp sum_issue: 620000>] 
```

我如何获得名称、日期、sum_issue 并将其显示在我的助手中。像这样：

```
{
 created_at: datet,
 sum_issue: sum_issue,
 name: name
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:33:24.457

尝试

```
Gp.select("date('gps'.'created_at') as date,('users'.'name') as name, SUM('gps'.'sum_issue') as sum_issue").joins('LEFT JOIN users ON users.id = gps.user_id').where("users.ab_id = :abs_id AND users.id != 20", {:abs_id => current_user.ab_id}).group("users.name").first.name 
```

# java - 如何使用 Spring Ws marshall 调用 Paypal ws？

> ID：12636439
> 
> 赞同：1
> 
> 时间：2012-09-28T08:35:03.607
> 
> 标签：java, web-services, paypal

我在使用 paypal ws 时遇到了一些问题，因为它们必须包含自定义 http 标头。

这是wsdl：

[https://svcs.sandbox.paypal.com/AdaptiveAccounts/API_operation?wsdl](https://svcs.sandbox.paypal.com/AdaptiveAccounts/API_operation?wsdl)

我下载了他们的 API，我有 Marshall 的 java 类，但我不知道如何包含标题。

在soapUi中，我可以包含标题并查看在 Raw 选项卡中生成的内容，例如：

```
POST https://svcs.sandbox.paypal.com/AdaptiveAccounts HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: text/xml;charset=UTF-8
SOAPAction: "urn:GetVerifiedStatus"
X-PAYPAL-APPLICATION-ID: APP-80W284485P519543T
X-PAYPAL-SECURITY-PASSWORD: 13XXXXX113
X-PAYPAL-DEVICE-IPADDRESS: 127.0.0.1
X-PAYPAL-MESSAGE-PROTOCOL: SOAP11
X-PAYPAL-OPERATION-NAME: GetVerifiedStatus
X-PAYPAL-SECURITY-SIGNATURE: A8opbtJy-VMKZ8uQWERT5i54.3GnZA1SCkKHdo4sRg7ep4pSMrq6hZ3Lx
X-PAYPAL-SANDBOX-EMAIL-ADDRESS: abcdef_1348660087_biz@hotmail.com
X-PAYPAL-SECURITY-USERID: abcdef_1348660087_biz_api1.hotmail.com
User-Agent: Jakarta Commons-HttpClient/3.1
Host: svcs.sandbox.paypal.com
Content-Length: 631 
```

我试图将它们作为 bean webServiceTemplate 的属性包含到我的 ws-config.xml 中，并且在调用 webServiceTemplate.marshalSendAndReceive 时尝试使用 callBackFunction 但它从来没有成功

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:57:33.863

这些 SO 帖子[如何访问 Spring-ws 端点中的 HTTP 标头？](https://stackoverflow.com/questions/3975694/how-to-access-http-headers-in-spring-ws-endpoint)和[使用 Spring-WS 客户端动态设置自定义 HTTP 标头](https://stackoverflow.com/questions/3169237/setting-a-custom-http-header-dynamically-with-spring-ws-client)将向您展示如何添加自定义 HTTP 标头。然后，您所要做的就是添加 PayPal 特定的。

# drupal-7 - Drupal 7 PDOException：SQLSTATE [23000]：完整性约束违规：1062 键“PRIMARY”的重复条目：INSERT INTO {node_access}

> ID：12636448
> 
> 赞同：1
> 
> 时间：2012-09-28T08:35:26.857
> 
> 标签：drupal-7

我已经安装了工作流和域访问模块。现在我无法保存任何内容。

这是我收到的错误消息：

```
 PDOException : SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '3053646-1-domain_id' for key 'PRIMARY': INSERT INTO {node_access} (nid, realm, gid, grant_view, grant_update, grant_delete) VALUES (:db_insert_placeholder_0, :db_insert_placeholder_1, :db_insert_placeholder_2, :db_insert_placeholder_3, :db_insert_placeholder_4, :db_insert_placeholder_5); Array ( [:db_insert_placeholder_0] => 3053646 [:db_insert_placeholder_1] => domain_id [:db_insert_placeholder_2] => 1 [:db_insert_placeholder_3] => 0 [:db_insert_placeholder_4] => 1 [:db_insert_placeholder_5] => 1 ) dans node_access_write_grants() (ligne 3417 dans /modules/node/node.module). 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T14:33:56.073

在不同的模块上遇到了同样的问题，并在问题讨论中找到了以下补丁：http: [//drupal.org/node/1681636](http://drupal.org/node/1681636)。补丁： [http](http://drupal.org/files/0001-eck-issue-1681636-Installation-SQL-error-Duplicate-P.patch) ://drupal.org/files/0001-eck-issue-1681636-Installation-SQL-error-Duplicate-P.patch 看起来解决方案是使一个唯一索引而不是主键。

这个修复对我有用。

# android - 如何将 MagickImage 写入 SD 卡？

> ID：12636449
> 
> 赞同：1
> 
> 时间：2012-09-28T08:35:34.340
> 
> 标签：android, imagemagick, fileoutputstream

我正在使用 MagickImage 库来处理图像。我想在处理后将图像存储在 SD 卡中。我为此使用了以下代码，但无济于事：

```
images[i] = new MagickImage(new ImageInfo(path));
MagickImage image = new MagickImage(images);
image =  image.charcoalImage(20.0, 40.0);

File m_file = new File(path);
if(! m_file.exists())
{
    m_file.mkdirs();                 
}
File file = new File(path1);
if(!file.exists())
{
    file.createNewFile();
 }

 FileOutputStream fos = new FileOutputStream(path2);                            
 fos.write(image.toBytes());    
 fos.flush();
 fos.close(); 
```

在这里我遇到了 fos.write(image.toBytes()); 的问题 请告诉我如何解决这个问题。在此先感谢。

# javascript - 将 Javascript 日期（例如 Thu Sep 20 08:00:00 UTC+0200 2012）格式化为易于阅读的格式

> ID：12636453
> 
> 赞同：-1
> 
> 时间：2012-09-28T08:35:46.803
> 
> 标签：javascript, date, format

> **可能重复：**
> [在 JavaScript 中格式化日期](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)

我在 javascript 中得到这样的日期：Thu Sep 20 08:00:00 UTC+0200 2012

是否可以轻松将其转换为格式：2012/09/20 08:00？

我知道 StackOverflow 上的示例，但并非在所有情况下都有效，例如 [http://jsfiddle.net/YSUay/](http://jsfiddle.net/YSUay/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:40:22.910

不应该回答这个问题。但是既然你问了，那就是这样：

```
var d = new Date();
d.toString('yyyy-MM-dd');       //returns "2009-06-29"
d.toString('dddd, MMMM ,yyyy')  //returns "Monday, June 29,2009" 
```

所以对于你的情况，

# entity-framework-4.1 - 实体框架代码优先迁移 - 好坏参半

> ID：12636455
> 
> 赞同：3
> 
> 时间：2012-09-28T08:35:54.233
> 
> 标签：entity-framework-4.1, ef-code-first, entity-framework-migrations

说到代码优先迁移技术，我有一种奇怪的感觉。首先，这是一个起源于 Ruby on Rails 等技术的概念。并不是说我确实反对它，请不要误会我的意思。我不确定的是，当涉及到可以包括报告等的高可扩展企业应用程序时，如果使用 Code First 迁移是一种好方法。基本上我指的是数据库设计、优化起着关键作用的情况在一般性能方面（非规范化、索引、分片等）。我的感觉是 Code First 迁移带来了很大的开销。我是对的，我错了吗？我真的很想听听你的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:58:38.067

你错了。

EF 迁移与数据库的设计方式无关。这只是一个一次性过程，仅针对两个版本的数据库模式生成脚本，并弄清楚如何自动从一个版本迁移到另一个版本。

迁移不会在应用程序运行时运行，它不会产生任何开销或影响应用程序的性能。它仅适用于现有模式，因为 EF 本身会生成它们。事实上，这个过程非常通用，甚至不是特定于 EF 的，Migrations 可用于在任意两个模式之间迁移，无论它们是否使用 EF。

因此，它与数据库的执行方式无关。

架构由 EF 本身控制，并且取决于您映射数据库的方式。是的，确实，如果您让 EF 完成所有工作，您最终可能会得到一个不太理想的架构，但您可以通过使用 Fluent Mappings 完全控制它如何生成它。

# sql-server - 从用户名和密码列验证登录数据

> ID：12636464
> 
> 赞同：1
> 
> 时间：2012-09-28T08:36:15.467
> 
> 标签：sql-server, vb.net, login

我编写了以下函数来验证用户的登录数据，但到目前为止它没有正常工作，我确信它有问题：

```
Private Sub button2_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles button2.Click
    If loginpasswordtx.Text.Length > 1 And loginpasswordtx.Text.Length > 1 And My.Settings.SQLConnectionString.Length > 5 Then
        Try
            Dim cnn As New SqlConnection(My.Settings.SQLConnectionString)
            Dim cmd = New SqlCommand("SELECT AppUser,AppUserPass FROM OrderAppUsers WHERE AppUser=@AppUser AND AppUserPass=@AppUserPass", cnn)
            cmd.Parameters.Add(New SqlParameter("@AppUser", createuserAppUser.Text))
            cmd.Parameters.Add(New SqlParameter("@AppUserPass", MD5StringHash(loginpasswordtx.Text)))
            cnn.Open()

            Dim obj As Object = cmd.ExecuteScalar()
            If obj = Nothing Then
                MsgBox("Faild to Log in, check your log in info")
                cnn.Close()
                Return
            End If
            cnn.Close()
        Catch ex As SqlException
            MsgBox(ex.Message)
            Return
        End Try

        MsgBox("Logged in Successfully")
    End If
End Sub 
```

我得到的只是一个`null obj`即使用户和通行证存在于表中。

以下代码用于添加新用户

```
 Try
            Dim cnnstring As String = String.Format("Server={0};Database={1};Trusted_Connection=True;", createuserServerTx.Text, createuserDatabaseTx.Text)
            Dim cnn As New SqlConnection(cnnstring)
            Dim cmd As New SqlCommand("INSERT INTO OrderAppUsers VALUES (@AppUser, @AppUserPass)", cnn)
            cmd.Parameters.Add(New SqlParameter("@AppUser", createuserAppUser.Text))
            cmd.Parameters.Add(New SqlParameter("@AppUserPass", MD5StringHash(createuserpassword.Text)))
            cnn.Open()
            cmd.ExecuteNonQuery()
            cnn.Close()
            MsgBox("User Crated Successfully")
            LayoutControl1.Visibility = Windows.Visibility.Collapsed
            My.Settings.SQLConnectionString = cnnstring
            My.Settings.Save()
        Catch ex As SqlException
            MsgBox(ex.Message)
        End Try 
```

以及生成自定义哈希的函数

```
 Private Function MD5StringHash(ByVal strString As String) As String
    Dim MD5 As New MD5CryptoServiceProvider
    Dim Data As Byte()
    Dim Result As Byte()
    Dim R As String = ""
    Dim Temp As String = ""

    Data = Encoding.ASCII.GetBytes(strString)
    Result = MD5.ComputeHash(Data)
    For i As Integer = 0 To Result.Length - 1
        Temp = Hex(3 * Result(i) + 1)
        If Len(Temp) = 1 Then Temp = "0" & Temp
        R += Temp
    Next
    Return R
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:38:01.040

添加参数时尝试以下操作

```
cmd.Parameters.AddWithValue("@AppUser", createuserAppUser.Text)
cmd.Parameters.AddWithValue("@AppUserPass", MD5StringHash(loginpasswordtx.Text)) 
```

或者只是坚持你所做的，但与你的有所不同，

```
cmd.Parameters.Add("@AppUser", SqlDbType.VarChar)       
cmd.Parameters("@AppUser").Value = createuserAppUser.Text
cmd.Parameters.Add("@AppUserPass", SqlDbType.VarChar)       
cmd.Parameters("@AppUserPass").Value = MD5StringHash(loginpasswordtx.Text) 
```

顺便说一句，使用`ExecuteScalar()`它时只返回单个值。所以你的查询可以写成

```
SELECT COUNT(*) 
FROM OrderAppUsers
WHERE AppUser=@AppUser AND AppUserPass=@AppUserPass 
```

你可以使用`int`变量来存储它的值

```
Dim obj As int = Cint(cmd.ExecuteScalar()) 
```

所以可能的值是`0`或返回的记录总数。

```
If obj = 0 Then
    MsgBox("Faild to Log in, check your log in info")
    '' other codes
End If 
```

并通过重构您的代码，使用`Using -Statement`

```
Using cnn As New SqlConnection(My.Settings.SQLConnectionString)
    Using cmd = New SqlCommand("SELECT COUNT(*) FROM OrderAppUsers WHERE AppUser=@AppUser AND AppUserPass=@AppUserPass", cnn)
        cmd.Parameters.AddWithValue("@AppUser", createuserAppUser.Text)
        cmd.Parameters.AddWithValue("@AppUserPass", MD5StringHash(loginpasswordtx.Text))
        cmd.CommandType = CommandType.Text
        Try
            cnn.Open()
            Dim obj As int = Cint(cmd.ExecuteScalar())
            If obj = 0 Then
                MsgBox("Faild to Log in, check your log in info")
            Else
                 MsgBox("Logged in Successfully")
            End If
        Catch(ex As SqlException)
             MsgBox(ex.Message.ToString())
        End Try
    End Using
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:27:41.573

我在我的本地系统中检查了你的代码，它工作正常我的意思是我能够验证它的返回 true i 分析并发现它的返回 false 只有当我在加密之前在密码文本上添加一个空格时，你可以检查数据库值是否为空格添加到密码值或您可以发布您的加密代码

# python - Webdriver 通过代理连接到 selenium-server:4444 a

> ID：12636466
> 
> 赞同：1
> 
> 时间：2012-09-28T08:36:23.967
> 
> 标签：python, selenium, python-2.7, webdriver

当我运行时（WinXP OS，Python 2.7）

```
wd = webdriver.Remote (command_executor = 'http://127.0.0.1:4444/hub', desired_capabilities = webdriver.DesiredCapabilities.INTERNETEXPLORER) 
```

在我的系统中默认有一个代理服务器，并通过代理连接到 selenium-server:4444 a。如何建立该连接直接到 selenium-server:4444。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T14:23:55.510

有点晚了，但我今天偶然发现了同样的问题并解决了它，所以对于下一个搜索的人，这里是解决方案：

系统代理设置是从 *_proxy windows 环境变量（http_proxy、https_proxy、ftp_proxy、...）中获取的，因此如果您在那里定义了公司代理，它将被使用。

在 windows 选项中添加一个新的环境变量，或者，如果您使用 intelliJ IDEA，在运行配置设置中：

```
no_proxy=localhost,127.0.0.1 
```

你会在 python-2.7.6/Lib/urllib.py 中找到原因，大约在第 1387 行：

```
def proxy_bypass_environment(host):
    """Test if proxies should not be used for a particular host.

    Checks the environment for a variable named no_proxy, which should
    be a list of DNS suffixes separated by commas, or '*' for all hosts.
    """
    no_proxy = os.environ.get('no_proxy', '') or os.environ.get('NO_PROXY', '')
    # '*' is special case for always bypass
    if no_proxy == '*':
        return 1
    # strip port off host
    hostonly, port = splitport(host)
    # check if the host ends with any of the DNS suffixes
    no_proxy_list = [proxy.strip() for proxy in no_proxy.split(',')]
    for name in no_proxy_list:
        if name and (hostonly.endswith(name) or host.endswith(name)):
            return 1
    # otherwise, don't bypass
    return 0 
```

# oracle - oracle触发器代替和rowcount

> ID：12636472
> 
> 赞同：0
> 
> 时间：2012-09-28T08:36:41.043
> 
> 标签：oracle, nhibernate, ado.net

我需要为视图创建插入和更新触发器。在对一行执行插入/更新返回 1 后，我还需要 sql%rowcount。在 SQL Server 中，我可以将 nocount 设置为 on，然后进行一些操作，然后将 nocount 设置为 off 并选择一行。我怎样才能在 Oracle 中做类似的事情。

我需要这个来映射 NHibernate 中的那个视图，它期望受影响的行等于 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:46:08.707

确保更新只影响一行的一种方法是在表上创建主键或唯一约束。然后在更新语句的 where 子句中使用构成约束的列。

# oracle - Oracle 自动生成的检查约束

> ID：12636475
> 
> 赞同：2
> 
> 时间：2012-09-28T08:36:45.220
> 
> 标签：oracle, check-constraints

当我创建列不为空的表时，Oracle 会自动创建不为空的检查约束：像这样（来自 user_constraints 视图的查询）

```
NAME                           TYPE SEARCH_CONDITION
------------------------------ ---- ---------------------------------------
SYS_C0036357                   C    "SUPPLIER_ID" IS NOT NULL
SYS_C0036358                   C    "SUPPLIER_NAME" IS NOT NULL 
```

那么，有什么方法可以知道 Oracle(Auto) 创建的约束还是用户创建的约束。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T08:47:30.980

您可以查看表中的`GENERATED`字段`user_constraints`（或`all_constraints`）。

```
create table t (a number not null, constraint t_pk primary key(a));
select table_name, constraint_name, generated
 from user_constraints
 where table_name = 'T'; 
```

给出：

```
T | CONSTRAINT. | GENERATED
----------------------------
T | SYS_C008425 | GENERATED NAME
T | T_PK        | USER NAME 
```

# database - 一个网站中的不同主题

> ID：12636479
> 
> 赞同：0
> 
> 时间：2012-09-28T08:37:10.980
> 
> 标签：database, wordpress, themes

假设这是我的网站名称：`www.example.com.`

我看到不同的网站在一个网站中有不同的主题。例如，我想有不同的主题`www.example.com`，`www.example.com/othertheme.`我知道它应该有不同的数据库。但是怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:24:07.247

我应该在服务器的根目录下创建一个目录，例如名为 othertheme 的另一个数据库。然后我可以使用以下网址访问该网站：www.example.com/othertheme。所以它在一个网站上有不同的主题。

# php - 将数据存储在不方便的表中或创建派生表？

> ID：12636482
> 
> 赞同：1
> 
> 时间：2012-09-28T08:37:23.140
> 
> 标签：php, propel

我有一个我坚持使用的某种预定义的数据库结构。问题是这种结构是否适合 ORM，或者我是否应该添加一个处理层，以便在每次将某些内容插入原始数据库时创建一个更方便的结构。

为了简化，这就是它的样子。

我有一个人表：

```
PersonId
Name 
```

我有一个属性表：

```
PersonId
PropertyType
PropertyValue 
```

所以，对于约翰·多伊这个人...

```
(1, 'John Doe') 
```

...我可以拥有三个属性：

```
(1, 'phone', '555-55-55'),
(1, 'email', 'user@company.com),
(1, 'type', 'employee') 
```

通过使用 ORM，我想获得一个具有“名称”、“电话”、“电子邮件”、“类型”属性的“人”对象。

Propel 能做到吗？它的效率如何？创建一个包含“电话”、“电子邮件”、“类型”列的表并在将新行插入属性表时自动填充它是一个更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:33:57.447

我认为你应该看看[ExtraProperties 行为](https://github.com/Carpe-Hora/ExtraPropertiesBehavior)。它基本上允许您为对象定义一组属性并轻松获取/设置它们。您的示例描述了额外属性的确切用例：具有一些属性（电话、电子邮件、类型）的主要对象（人）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T17:42:41.377

为了性能，我最终创建了一个包含所有属性列的表，如下所示：

```
PersonId
Name
Phone
Email
Type 
```

像这样的数据：

```
1
'John Doe'
'555-55-55'
'user@company.com'
'employee' 
```

# c# - C# 中的快速逐像素混合效果“相乘”（适用于 android）

> ID：12636484
> 
> 赞同：2
> 
> 时间：2012-09-28T08:37:36.933
> 
> 标签：c#, android, xamarin.android, xamarin, porter-duff

我一直在寻找一种更快的方法来在我的位图上使用混合效果“相乘”。我试过使用`PorterDuff.Multiply`，但在包含 Alpha 通道的位图上没有达到预期的效果，任何 0 alpha 的东西都会变成黑色。

我已经阅读过，似乎我可以实现我所追求的效果的唯一方法（photoshop/gimp 的“乘法”图层混合）是通过应用每个像素的效果。

OpenGL 不是应用程序的选项。

我不确定我是否正确理解维基百科建议的混合模式的算法。

`TopColour * BottomColour / 255`

将会：

```
ColorC.R = ColorA.R * ColorB.R / 255;
ColorC.G = ColorA.G * ColorB.G / 255;
ColorC.B = ColorA.B * ColorB.B / 255;
// Alpha = Alpha?

// This example is suggesting Android.Graphics.Color.A/R/G/B is writeable, 
// it's not - this is just for readability.
// ColorA = Top, ColorB = Bottom, ColorC = Result 
```

转换`Color.ToArgb`和使用整数会更快吗？最后，我是否正确计算了乘法效果 - 它没有正确显示:(

我被卡住了，任何帮助将**不胜**感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:55:54.740

如果你想要快速，你需要查看 Renderscript，[http://developer.android.com/guide/topics/renderscript/index.html](http://developer.android.com/guide/topics/renderscript/index.html)。

这段来自 Google 的视频也或多或少地向您展示了您需要的一切，[http://www.youtube.com/watch?v=gbQb1PVjfqM](http://www.youtube.com/watch?v=gbQb1PVjfqM)（Google IO 2012 - 事半功倍：成为一名优秀的 Android 公民）。

# c++ - 对 ofstream::open 的非阻塞调用？

> ID：12636485
> 
> 赞同：2
> 
> 时间：2012-09-28T08:37:37.070
> 
> 标签：c++, io, nonblocking, ofstream

我有一个 C++ 程序，它在 /tmp 中打开文件（在 *nix 系统上）并读取它们的内容。

为此，我正在使用：

```
ofstream dest;
dest.open(abs_path.c_str(), ios::app); 
```

其中 abs_path 是一个包含文件绝对路径的字符串。

问题是一些 *nix 程序在 /tmp 中创建命名管道作为文件。例如，

```
 /tmp/vgdb-pipe-to-vgdb-from-23732-by-myusername-on-??? 
```

是由我正在使用的调试实用程序创建的管道。

在 ofstream 的[文档](http://www.cplusplus.com/reference/iostream/ofstream/) 中，open 方法说该方法在打开文件失败时设置了一个错误位。但是，在我的测试中，它反而挂起试图无限期地打开文件（实际上是一个管道）。我认为这是因为该文件被另一个程序（可能是调试器）锁定。

那么，**我如何强制 ofstream::open 在有限的时间内阻塞，或者根本不阻塞？**如果它失败了很容易优雅地清理它，但它需要首先真正失败..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:01:12.533

简单的答案是你不能。 `filebuf::open`（由 调用 `ofstream`）基本上代表操作系统，并假设操作系统会做正确的事情。而且它支持的接口非常非常有限；`open`( `O_SYNC`, , 等) 的许多重要选项`O_NONBLOCK`未映射，因此无法使用。我发现的唯一解决方案是使用`std::ostringstream`，然后使用系统级调用将字符串写入文件，或者编写我自己的`streambuf`，它可以满足我的需求（比听起来简单得多，因为您通常只需要部分提供什么`filebuf`——你通常不需要双向性、搜索或代码翻译）。

当然，这些解决方案都不是便携式的。

最后，我不确定你为什么要写`/tmp`. 按照惯例，您放入`/tmp`的任何内容都应包含进程 ID。出于安全原因，我总是创建一个子目录，名称中包含进程 ID，访问权限非常有限，并在其中创建任何临时文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T08:53:27.927

AFAIK，没有 C++ 语言定义的非阻塞输入之类的东西。（有一个方法std::streambuf::in_avail()，但它仍然不能帮助你）

可以考虑使用C方法

```
int file_descr = open( "pipe_addr", O_RDONLY |O_NONBLOCK); 
```

而不是 std::ofstream

# sms - 如何使用 C# 应用程序发送短信？

> ID：12636488
> 
> 赞同：2
> 
> 时间：2012-09-28T08:38:00.630
> 
> 标签：sms

我想使用任何 .NET 应用程序发送 SMS。那么，如何在不使用第三方工具或任何网关的情况下发送短信？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T11:09:05.140

如果支持，您可以使用 SDK 直接连接到某些手机并使用 GSM 调制解调器样式命令（AT 命令）发送短信。老诺基亚过去很容易做到这一点。

电子邮件地址技巧仅适用于仍向收件人收取 SMS 费用的美国网络，这就是为什么他们很高兴您通过电子邮件发送到手机号码的原因。这确实意味着您必须知道手机所在的网络，而在使用 SMS 网关时您不需要知道。

看看 FrontlineSMS 项目，它是一个不需要使用网关的优秀工具：[http ://www.frontlinesms.com](http://www.frontlinesms.com)

# python - Python，转换 4 字节字符以避免 MySQL 错误“不正确的字符串值：”

> ID：12636489
> 
> 赞同：7
> 
> 时间：2012-09-28T08:38:02.457
> 
> 标签：python, mysql, utf-8, character-encoding, python-unicode

我需要（在 Python 中）将 4 字节字符转换为其他字符。这是将其插入到我的 utf-8 mysql 数据库中而不会出现错误，例如：“Incorrect string value: '\xF0\x9F\x94\x8E' for column 'line' at row 1”

[通过将 4 字节 unicode 插入 mysql 引发的警告](https://stackoverflow.com/questions/10798605/warning-raised-by-inserting-4-byte-unicode-to-mysql)显示以这种方式执行此操作：

```
>>> import re
>>> highpoints = re.compile(u'[\U00010000-\U0010ffff]')
>>> example = u'Some example text with a sleepy face: \U0001f62a'
>>> highpoints.sub(u'', example)
u'Some example text with a sleepy face: ' 
```

但是，我在评论中遇到与用户相同的错误，“...错误的字符范围..”这显然是因为我的 Python 是 UCS-2（不是 UCS-4）构建。但是后来我不清楚该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T08:44:18.867

在 UCS-2 构建中，python 在内部为`\U0000ffff`代码点上的每个 unicode 字符使用 2 个代码单元。正则表达式需要与这些一起使用，因此您需要使用以下正则表达式来匹配这些：

```
highpoints = re.compile(u'[\uD800-\uDBFF][\uDC00-\uDFFF]') 
```

此正则表达式匹配使用 UTF-16 代理对编码的任何代码点（请参阅[UTF-16 代码点 U+10000 到 U+10FFFF](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B10000_to_U.2B10FFFF)。

为了使其在 Python UCS-2 和 UCS-4 版本之间兼容，您可以使用`try:`/`except`来使用其中一个：

```
try:
    highpoints = re.compile(u'[\U00010000-\U0010ffff]')
except re.error:
    # UCS-2 build
    highpoints = re.compile(u'[\uD800-\uDBFF][\uDC00-\uDFFF]') 
```

UCS-2 python 构建的演示：

```
>>> import re
>>> highpoints = re.compile(u'[\uD800-\uDBFF][\uDC00-\uDFFF]')
>>> example = u'Some example text with a sleepy face: \U0001f62a'
>>> highpoints.sub(u'', example)
u'Some example text with a sleepy face: ' 
```

# php - 电子邮件未从 txt 文件正确插入

> ID：12636490
> 
> 赞同：0
> 
> 时间：2012-09-28T08:38:05.307
> 
> 标签：php, mysqli

我正在尝试将一些**电子邮件从文本文件**插入 MySQL 数据库，其中一些被正确插入，但其中一些没有。

我实现这一点的方法是这样的。

```
$query = "LOAD DATA LOCAL INFILE 'email-list.txt' INTO TABLE $tablename FIELDS TERMINATED BY 'r'(email)";

$result = mysqli_query($connection, $query); 
```

一些未正确插入的电子邮件就像。

```
 xxxx7@yahoo.com
    xxx_xxxxx05@yahoo.com 
```

这些像插入一样。

```
 x
    xxx_xxxxx 
```

请查看我的方法有什么问题，并建议任何可能的方法来正确执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:40:33.027

这个...

```
FIELDS TERMINATED BY 'r' 
```

你的意思...

```
FIELDS TERMINATED BY '\r' 
```

？？？

**文档**

> 如果您不指定 FIELDS 或 LINES 子句，则默认值与您编写的相同：

```
FIELDS TERMINATED BY '\t' ENCLOSED BY '' ESCAPED BY '\\'
LINES TERMINATED BY '\n' STARTING BY '' 
```

> （反斜杠是 SQL 语句中字符串中的 MySQL 转义字符，因此要指定文字反斜杠，您必须指定两个反斜杠以将值解释为单个反斜杠。转义序列 '\t' 和 '\n' 指定制表符和换行符。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:42:15.210

替换 `FIELDS TERMINATED BY 'r'`为 `FIELDS TERMINATED BY '\r'`

现在，`r`充当终止字符，因此之后`r`的任何内容都将被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:42:23.293

```
TERMINATED BY 'r'(email)"; 
```

您通过字符 'r' 终止电子邮件

所以当你使用

```
cricket4877@yahoo.com 
```

它会截断 r 之后的所有内容，因此它只显示 c。

你应该把它改成

```
TERMINATED BY '/r'(email); 
```

PS 我希望它们是虚构的电子邮件，而不是实际的电子邮件。

# javascript - SECURITY_ERR：Web Worker 的 DOM 异常 18

> ID：12636491
> 
> 赞同：3
> 
> 时间：2012-09-28T08:38:06.727
> 
> 标签：javascript, asset-pipeline, web-worker

我在部署到生产服务器时收到错误 SECURITY_ERR: DOM Exception 18。

我将其缩小到 Web Worker 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:38:06.727

这是由于部署过程将工作脚本推送到 cdn 导致工作人员位于不同的域中。

这是通过将工作人员放置在本地服务器上来解决的，以避免跨域请求

# android - Android套接字读取方法返回-1

> ID：12636496
> 
> 赞同：0
> 
> 时间：2012-09-28T08:38:12.407
> 
> 标签：android, sockets, faye

我在我的项目中使用了[faye 客户端](https://github.com/atomicrat2552/Faye-Android/)，并且遇到了一个奇怪的套接字问题。

在这个项目中，我们使用`SocketChannel.html#read(java.nio.ByteBuffer)`了读取的方法`WebSocket`并且有 `-1`一些原因。

我检查了套接字对象并看到了`isInputShutdown = false`, `isClosed = false`, `isCreated = true`.

代码片段：

```
System.setProperty("java.net.preferIPv6Addresses", "false");   
mTransportChannel = SocketChannel.open();        
InetSocketAddress socketAdd = new InetSocketAddress("172.20.71.4", 9292);    
boolean resolve = socketAdd.isUnresolved();    
mTransportChannel.socket().connect(socketAdd, 6000);   
Log.i("TEST", "Socket connected");
mTransportChannel.socket().setSoTimeout(6000);
mTransportChannel.socket().setTcpNoDelay(true);
mBuffer = new ByteBufferOutputStream(1000 + 14, 4 * 64 * 1024);
WebSocketMessage.ClientHandshake hs = new WebSocketMessage.ClientHandshake(
                "172.20.71.4" + ":" + "9292");
hs.mPath = "/faye/services/chat-123456789-123456";
hs.mQuery = null;
hs.mSubprotocols = null;
sendClientHandshake(hs);
int written = mTransportChannel.write(mBuffer.getBuffer());
mFrameBuffer = ByteBuffer.allocateDirect(1000 + 14);
int len = mTransportChannel.read(mFrameBuffer);
Log.d("tset", Integer.toString(len));

/**
 * Send WebSocket client handshake.
 */
private void sendClientHandshake(WebSocketMessage.ClientHandshake message) throws IOException {
    // write HTTP header with handshake
    String path;
    if (message.mQuery != null) {
        path = message.mPath + "?" + message.mQuery;
    } else {
        path = message.mPath;
    }
    mBuffer.write("GET " + path + " HTTP/1.1");
    mBuffer.crlf();
    mBuffer.write("Host: " + message.mHost);
    mBuffer.crlf();
    mBuffer.write("Upgrade: WebSocket");
    mBuffer.crlf();
    mBuffer.write("Connection: Upgrade");
    mBuffer.crlf();

    mBuffer.write("Sec-WebSocket-Key: " + newHandshakeKey());
    mBuffer.crlf();

    if (message.mOrigin != null && !message.mOrigin.equals("")) {
        mBuffer.write("Origin: " + message.mOrigin);
        mBuffer.crlf();
    }

    if (message.mSubprotocols != null && message.mSubprotocols.length > 0) {
        mBuffer.write("Sec-WebSocket-Protocol: ");
        for (int i = 0; i < message.mSubprotocols.length; ++i) {
            mBuffer.write(message.mSubprotocols[i]);
            mBuffer.write(", ");
        }
        mBuffer.crlf();
    }

    mBuffer.write("Sec-WebSocket-Version: 13");
    mBuffer.crlf();

    mBuffer.crlf();
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:22:28.917

当服务器关闭连接时会发生这种情况。在这种情况下，不会抛出异常，只能通过返回值来检查错误——负值表示错误（丢失连接，可能是其他原因）。这是 AutobahnAndroid 中此类测试的[示例](https://github.com/tavendo/AutobahnAndroid/blob/master/Autobahn/src/de/tavendo/autobahn/WebSocketReader.java#L656)。

# python - Django Social Auth - 用户已创建，配置文件已创建，但用户未登录

> ID：12636499
> 
> 赞同：2
> 
> 时间：2012-09-28T08:38:38.880
> 
> 标签：python, django, facebook, django-socialauth

因此，正如标题所示，我可以使用 Facebook 创建一个新用户并创建一个新的个人资料。但是，我没有登录。我总是被重定向到 /login/ （最后有一些字符）。使用此代码，我会缺少什么？

我的设置.py

```
SOCIAL_AUTH_DEFAULT_USERNAME = lambda u: slugify(u)
SOCIAL_AUTH_UUID_LENGTH = 10
SOCIAL_AUTH_EXTRA_DATA = False
SOCIAL_AUTH_EXPIRATION = 'expires'
SOCIAL_AUTH_INACTIVE_USER_URL = '/inactive/'
SOCIAL_AUTH_RAISE_EXCEPTIONS = DEBUG
SOCIAL_AUTH_CHANGE_SIGNAL_ONLY = True
SOCIAL_AUTH_ASSOCIATE_BY_MAIL = True
SOCIAL_AUTH_COMPLETE_URL_NAME = 'socialauth_complete'
SOCIAL_AUTH_ASSOCIATE_URL_NAME = 'socialauth_associate_complete'

AUTHENTICATION_BACKENDS = (
    'social_auth.backends.facebook.FacebookBackend',
    'django.contrib.auth.backends.ModelBackend',
)

TEMPLATE_CONTEXT_PROCESSORS = global_settings.TEMPLATE_CONTEXT_PROCESSORS + (
    'social_auth.context_processors.social_auth_by_name_backends',
    'social_auth.context_processors.social_auth_backends',
    'social_auth.context_processors.social_auth_by_type_backends',
    'social_auth.context_processors.social_auth_login_redirect',
) 
```

我的模型.py

```
signals.post_save.connect(create_profile, sender=User)
pre_update.connect(facebook_extra_values, sender=FacebookBackend)

class UserProfile(models.Model):
    user = models.ForeignKey(User)
    photo = ImageField(upload_to="profile_pictures")

    def get_absolute_url(self):
        return ('profiles_profile_detail', (), {'username':self.user.username})

    get_absolute_url = models.permalink(get_absolute_url) 
```

我的接收者.py

```
def facebook_extra_values(sender, instance, response, details, **kwargs):
    """
    post_save signal from User model; check bzuser.models
    for the connection

    """
    from .models import UserProfile
    UserProfile(user=instance).save()
    return True 
```

我的网址.py

```
urlpatterns = patterns('',
    url(r'^login/$', custom_login),
    url(r'^logout/$', custom_logout),
    url(r'^social_login/$', SocialLoginView.as_view(), name="social_login"),
    (r'', include('registration.backends.default.urls')),
    url(r'^register$', 'registration.views.register', {
        'form_class': RegistrationFormUniqueEmail,
        'backend': 'registration.backends.default.DefaultBackend'
    }, name='registration_register'),
    (r'^profiles/', include('profiles.urls')),
    url(r'^profile', ProfileView.as_view(), name="profile_private"),
) 
```

和我的views.py

```
class ProfileView(TemplateView):
    template_name = 'profile.html'

class SocialLoginView(TemplateView):
    def get_context_data(self, **kwargs):
        context = super(SocialLoginView, self).get_context_data(**kwargs)
        context['title'] = _('Log In With Facebook or Twitter')
        return context

    template_name = 'social.html'

def custom_login(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect(reverse('profiles_profile_detail',
            kwargs={"username":request.user.username}))
    else:
        return login(request)

def custom_logout(request):
    return logout_then_login(request) 
```

和我的模板：

```
{% extends 'base.html' %}

{% block content %}
    <div class="widget">
        <div class="title">
            <img class="titleIcon" src="{{ STATIC_URL }}images/icons/dark/preview.png" />
            <h6>Social Login</h6>
        </div>

        <div class="body textC">
            <a class="wButton bluewB m10"
                href="{% url socialauth_begin 'facebook' %}{% if request.GET.next %}?next={{ request.GET.next }}{% endif %}">
                <span>Log In With Facebook</span>
            </a>
        </div>
    </div>
{% endblock %} 
```

提前致谢！

**编辑**：添加了 AUTHENTICATION_BACKENDS 常量

来自应用程序的 urls.py

```
urlpatterns = patterns('',
    # project specific urls
    url(r'', include('base.urls')),
    url(r'', include('bzuser.urls')),

    # 3rd party URLS
    ('^nexus/', include(nexus.site.urls)),
    url(r'', include('social_auth.urls')),
) 
```

**编辑：**添加了社交身份验证包含 URL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:30:52.443

我有一个类似的问题并最终解决了。您应该使用身份验证[管道](http://django-social-auth.readthedocs.org/en/latest/pipeline.html)！并确保通过电子邮件联系。让你有类似的东西

```
SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'social_auth.backends.pipeline.associate.associate_by_email',
    'social_auth.backends.pipeline.misc.save_status_to_session',
    'people.pipeline.redirect_to_get_phonenumber_form',
    'people.pipeline.phonenumber',
    'people.pipeline.save_new_persons_data',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details',
) 
```

# asp.net-mvc - MVC 验证消息

> ID：12636501
> 
> 赞同：1
> 
> 时间：2012-09-28T08:38:52.877
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-4

在我看来 (aspx)

```
Html.ValidationMessage("FirstName") 
```

正在返回

```
<span class="field-validation-valid" data-valmsg-for="FirstName" data-valmsg-replace="true"></span> 
```

虽然

```
ViewContext.ViewData.ModelState.Values 
```

其中没有 FirstName 的条目。

如果我打电话

```
Html.ValidationSummary() 
```

什么都没有返回。

到底是怎么回事？我应该在哪里寻找这些值？

这是我视图的初始负载，因此不应显示任何验证消息。**如何停止显示此不需要的消息？**. 如果我提交该页面，那么会按照`ViewContext.ViewData.ModelState.Values`我的预期填充。任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:06:00.350

那是正确的功能。验证消息有一个类中`class="field-validation-valid"`的重要位是**Valid**。如果您使表单无效，您将看到跨度将更改为：

```
<span class="field-validation-error" data-valmsg-replace="true" data-valmsg-for="Destination.DestinationText">
<span class="" for="Destination_DestinationText" generated="true">The DestinationText field is required.</span>
</span> 
```

注意`class="field-validation-error"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:06:11.147

这些数据属性用于使用 jQuery 执行客户端验证。当您添加 MVC 验证属性时，`Required`或`Range(0,2)`属性会自动添加。您字段上的属性不会使该字段无效。对于无效状态，`field-validation-valid`移除 css 类`field-validation-error`并应用 css 类。为了防止生成数据属性，您可以禁用显然具有连锁反应的 JavaScript。我会原样离开，并且知道一切都很好:)

# windows - DLL 中函数名的最大长度

> ID：12636506
> 
> 赞同：7
> 
> 时间：2012-09-28T08:39:10.023
> 
> 标签：windows, dll

如果我在 DLL 中导出函数，函数名称的长度是否有限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-28T12:09:28.940

使用微软编译器时，导出的 C++ 类的函数名有 4096 个限制。[这里](http://msdn.microsoft.com/en-us/library/074af4b6%28VS.80%29.aspx)解释。

从实验中发现，对于 C 导出函数也有同样的限制。

# android - Android关于png图像的内存不足

> ID：12636510
> 
> 赞同：1
> 
> 时间：2012-09-28T08:39:21.333
> 
> 标签：android, image-processing, gimp

我的应用程序中有一个正确显示的 jpg 图像。在我的列表视图中，我想让图像更透明，以便更容易看到文本。我将图像更改为 png 格式并在 GIMP 中更改了它的不透明度。

现在新图像位于应用程序可绘制文件夹中。我收到以下错误。为什么？

```
 09-28 09:24:07.560: I/global(20140): call socket shutdown, tmpsocket=Socket[address=/178.250.50.40,port=80,localPort=35172]
09-28 09:24:07.570: I/global(20140): call socket shutdown, tmpsocket=Socket[address=/212.169.27.217,port=84,localPort=55656]
09-28 09:24:07.690: D/dalvikvm(20140): GC_FOR_ALLOC freed 113K, 4% free 38592K/39907K, paused 32ms
09-28 09:24:07.690: I/dalvikvm-heap(20140): Forcing collection of SoftReferences for 28072816-byte allocation
09-28 09:24:07.740: D/dalvikvm(20140): GC_BEFORE_OOM freed 9K, 4% free 38582K/39907K, paused 43ms
09-28 09:24:07.740: E/dalvikvm-heap(20140): Out of memory on a 28072816-byte allocation.
09-28 09:24:07.740: I/dalvikvm(20140): "main" prio=5 tid=1 RUNNABLE
09-28 09:24:07.740: I/dalvikvm(20140):   | group="main" sCount=0 dsCount=0 obj=0x40a57490 self=0x1b6e9a8
09-28 09:24:07.740: I/dalvikvm(20140):   | sysTid=20140 nice=0 sched=0/0 cgrp=default handle=1074361640
09-28 09:24:07.740: I/dalvikvm(20140):   | schedstat=( 2289118000 760844000 2121 ) utm=195 stm=33 core=1
09-28 09:24:07.740: I/dalvikvm(20140):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:486)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.content.res.Resources.loadDrawable(Resources.java:2042)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.view.View.<init>(View.java:2812)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.view.ViewGroup.<init>(ViewGroup.java:410)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.widget.LinearLayout.<init>(LinearLayout.java:174)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.widget.LinearLayout.<init>(LinearLayout.java:170)
09-28 09:24:07.740: I/dalvikvm(20140):   at java.lang.reflect.Constructor.constructNative(Native Method)
09-28 09:24:07.740: I/dalvikvm(20140):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.view.LayoutInflater.createView(LayoutInflater.java:586)
09-28 09:24:07.740: I/dalvikvm(20140):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
09-28 09:24:07.740: I/dalvikvm(20140):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:278)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.app.Activity.setContentView(Activity.java:1897)
09-28 09:24:07.740: I/dalvikvm(20140):   at com.carefreegroup.ShowMoreDetails.onCreate(ShowMoreDetails.java:26)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.app.Activity.performCreate(Activity.java:4543)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2181)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2260)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.app.ActivityThread.access$600(ActivityThread.java:139)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.os.Handler.dispatchMessage(Handler.java:99)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.os.Looper.loop(Looper.java:156)
09-28 09:24:07.740: I/dalvikvm(20140):   at android.app.ActivityThread.main(ActivityThread.java:5045)
09-28 09:24:07.740: I/dalvikvm(20140):   at java.lang.reflect.Method.invokeNative(Native Method)
09-28 09:24:07.740: I/dalvikvm(20140):   at java.lang.reflect.Method.invoke(Method.java:511)
09-28 09:24:07.740: I/dalvikvm(20140):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-28 09:24:07.740: I/dalvikvm(20140):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-28 09:24:07.740: I/dalvikvm(20140):   at dalvik.system.NativeStart.main(Native Method)
09-28 09:24:07.740: E/dalvikvm(20140): Out of memory: Heap Size=46115KB, Allocated=38582KB, Limit=65536KB
09-28 09:24:07.740: E/dalvikvm(20140): Extra info: Footprint=39907KB, Allowed Footprint=46115KB, Trimmed=892KB
09-28 09:24:07.740: E/Bitmap_JNI(20140): Create Bitmap Failed.
09-28 09:24:07.740: A/libc(20140): Fatal signal 11 (SIGSEGV) at 0x00000004 (code=1)
09-28 09:24:09.750: I/dalvikvm(20367): Turning on JNI app bug workarounds for target SDK version 10...
09-28 09:24:09.940: D/dalvikvm(20367): GC_CONCURRENT freed 864K, 21% free 3797K/4771K, paused 2ms+2ms 
```

谢谢。

[更新]

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.showmoredetailslayout);
        actualCallTime = (TextView)findViewById(R.id.actualcalltime);
        doubleUp = (TextView)findViewById(R.id.doubleupcallid);
        needName = (TextView)findViewById(R.id.needname);
        needNameLabel = (TextView)findViewById(R.id.neednamelabel);
        getRotaDetails = (Button)findViewById(R.id.buttongetrotadetails);
        intent = this.getIntent();
        String actualTimeIn = intent.getStringExtra("actTimeIn");
        String actualTimeOut = intent.getStringExtra("actTimeOut");
        String doubleUpValue = intent.getStringExtra("doubleUpValue");
        String needNameWithCommas = intent.getStringExtra("needNameWithCommas");
        callID = intent.getStringExtra("callID");
        String[] needs = needNameWithCommas.split(",");

        actualCallTime.setText("This call was completed at " + actualTimeIn + " -" + actualTimeOut);
        if( ! doubleUpValue.equalsIgnoreCase("") || doubleUpValue.equalsIgnoreCase("]")){
        doubleUp.setText("This call was not a double up ");
        }else{

            doubleUp.setText("This call was  a double up " + doubleUpValue);
        }

        needNameLabel.setText("Purpose of Call: ");

        for (int i = 0; i < needs.length; i++){
        needName.append( needs[i] + "\n");
        }

        getRotaDetails.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent intent = new Intent(ShowMoreDetails.this, GetRotaDetails.class);
                intent.putExtra("callIDExtra", callID);
                startActivity(intent);

            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:55:41.310

您的活动窗口的默认`PixelFormat`值为`RGB_565`。

当您使用`JPEG`图像时，它正在`RGB_565` *(16-bit)*中读取。

当您使用`PNG`具有透明度*(alpha 值)的图像时，它是在*`RGBA_8888` *(32-bit)*中读取的。

因此，相同的图像尺寸*（如尺寸）*需要更多的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:51:43.677

正如@Benito 所说，PNG 需要两倍于 jpg 的内存。因此，您的选择是：

1.  减小图像的大小。

2.  使用 JPG，并为其使用 alpha。不幸的是，您不能在 xml 中设置 alpha，因此您应该以编程方式进行（见下文）。

即使您选择选项 2，我也建议减小图像大小，因为即使它可以在您的手机上使用，其他型号的内存也可能会更少。从日志看来，您的图像大约为 2K*3K，这可能比所有屏幕都大。

```
View view = findViewById(R.id.background);
Drawable background = view.getBackground();
background.setAlpha(80); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T08:46:28.400

试试下面的链接，在这里你会得到一些相关的答案。

[Android VM 内存不足错误](https://stackoverflow.com/questions/10358637/android-vm-out-of-memory-error)

或者

[Android png图像在内存中很大](https://stackoverflow.com/questions/11410027/android-png-images-big-in-memory)

这可能会对您有所帮助。

# c# - c#中的自定义列表

> ID：12636512
> 
> 赞同：0
> 
> 时间：2012-09-28T08:39:39.897
> 
> 标签：c#

我需要创建一个包含类似

```
public List<int,bool> PostionAndChecked
{ get; set; } 
```

然后是一个列表

```
public List<int> PageNumber
        { get; set; } 
```

那么应该发生的是 PageNumber 列表中的每个页码应该链接到 PostionAndChecked 列表

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:42:18.787

A`List`是一种类型的列表，而不是两种。您可以使用`Tuple<int, bool>`，也可以使用`Dictionary<int, bool>`。

虽然，由于您只需要为每个数字保留一点，您可能会对使用 a 感到满意`Set<int>`，只添加`true`数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T08:42:13.520

使用 a `Dictionary<int, bool>`，这将存储`Key`( `int`) 和对应的`Value`( `bool`)，而无需自己进行索引。所以对于上面你会有

```
public Dictionary<int, bool> lookup { get; set; } 
...
lookup = new Dictionary<int, bool>(); 
```

像这样添加新条目

```
lookup.Add(0, true);
lookup.Add(1, false);
... 
```

然后，您可以`Boolean`根据相关索引引用该值，如下所示

```
bool b = lookup[someIndex]; 
```

有关此课程的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T08:42:38.180

以下仅作为说明适用，特别是如果 int 在您要检查的页面列表中是唯一的。希望您应该能够看到如何更改它以适合您的目的。

为什么你需要另一个存储页码的列表对我来说并不明显，也许你可以解释为什么你认为你需要它？

```
public class PageChecker
{
    public IDictionary<int, bool> PositionAndChecked { get; set; }

    public PageChecker()
    {
        SetUpPages();
    }

    private void SetUpPages()
    {
        PositionAndChecked = new Dictionary<int, bool>();
        var pageCount = 10;
        for (int i = 0; i < pageCount; i++)
        {
            PositionAndChecked.Add(i, false);
        }
    }

    public void CheckPage(int pageNo)
    {
        PositionAndChecked[pageNo] = true;
    }
} 
```

# asp.net-mvc-3 - 如何在 C# MVC3 中添加拦截模块

> ID：12636520
> 
> 赞同：0
> 
> 时间：2012-09-28T08:40:02.767
> 
> 标签：asp.net-mvc-3, c#-4.0

在我正在开发的示例站点中，我希望有一个移动拦截模块。从移动设备浏览该网站后，我希望将其重定向到托管在同一服务器中的不同 Web 应用程序。在 ASP.Net 中，我知道我们是通过 httphandlers 来实现的，但是如何在 ASP.Net MVC3 中实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:21:54.653

看看有几种方法可以做到这一点：（按我的喜好顺序给出）

1.  Scott hanselman 有一个附加的参考模块，你可以按照[这里](http://www.hanselman.com/blog/NuGetPackageOfTheWeek10NewMobileViewEnginesForASPNETMVC3SpeccompatibleWithASPNETMVC4.aspx)的描述添加，你可以使用不同的视图引擎使用相同的功能代码。如果您具有相同的功能集，并且只是要显示的视图不同，这是一个解决方案。事实上，如果是这种情况，您可以升级到 ASP.NET MVC 4。Asp.NET MVC 4 为此包含一个内置扩展。查看相同的[MSDN 文章](http://msdn.microsoft.com/en-us/magazine/hh852592.aspx)
2.  另一种方法是，如果您有完全不同的功能并且需要重定向，那么您可以轻松地使用[51degrees 移动浏览器数据库](http://51degrees.mobi)来执行此操作，并检查请求的用户代理并重定向它。现在我希望这个代码不是预期的？

# javascript - 三.js 阴影投射麻烦

> ID：12636522
> 
> 赞同：0
> 
> 时间：2012-09-28T08:40:22.263
> 
> 标签：javascript, three.js

我正在尝试在threejs中创建卡通化的天气可视化，所以我决定首先设置一个基本场景，一切都准备好度过美好的一天，但我在投射阴影时遇到了麻烦。我在stackoverflow上从here复制了灯的代码并且示例有效，但是当我在我的项目中使用它时它失败了。

这是示例：

[https://dl.dropbox.com/u/12939276/ImportedScene/index.html](https://dl.dropbox.com/u/12939276/ImportedScene/index.html)

我想要一盏灯，它在盒子里面并像太阳一样投射阴影。我使用点光源是因为我在某处读到您必须使用正交相机作为定向光源来投射阴影？

有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-15T14:27:18.320

首先，只有 DirectionalLight 和 SpotLight 能够投射阴影。

然后你必须激活 shadow ：

```
renderer.shadowMapEnabled = true;
directionalLight.castShadow = true;
object3D.castShadow = true;
anOtherObject3D.receiveShadow = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:29:22.423

您有一些需要解决的控制台错误，但您`spotlight`基本上可以正常工作。

首先，添加一个相机控制器，这样您就可以旋转视图并查看发生了什么：

```
controls = new THREE.OrbitControls( camera ); 
```

然后更新 animate 函数中的控件：

```
controls.update(); 
```

添加一些轴，以便获得参考框架：

```
scene.add(new THREE.AxisHelper() ); 
```

你会发现你的聚光灯离得太近了。相反，设置：

```
light.position.set( 5, 5, -5 ); 
```

此外，如果需要，可以减小阴影截头体的大小。

# iphone - CMMotionManager 不产生任何 .deviceMotions

> ID：12636525
> 
> 赞同：8
> 
> 时间：2012-09-28T08:40:29.470
> 
> 标签：iphone, objective-c, augmented-reality, cmmotionmanager

我正在为我的公司开发一个 AR 应用程序，它运行良好，除了大约十分之一的设备。（所有 iphone 4 和 4s，5.1.1+）

当我们运行这段代码时：

```
CMDeviceMotion *d = motionManager.deviceMotion;

    if (d == nil && motionManager.deviceMotionActive && motionManager != nil) {
        DLog(@"Device motion is active, but no device motion recieved");
    } 
```

我们在某些设备上得到了“设备运动处于活动状态，但没有收到任何设备运动”的固定块，但它似乎完全随机。

如果`motionManager.deviceMotionActive`为真，并且运动管理器存在，.deviceMotion 应该返回一个 CMDeviceMotion。但它只是返回零。

有谁知道可能导致这种情况的原因？检查正在我的

```
- (void)onDisplayLink:(id)sender 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T13:48:33.733

经过一番漫游，我们发现这是由于罕见的硬件/固件错误。最明智的做法是检查 motionManager.deviceMotion 是否为 Nil，以及 motionManager.deviceMotionActive 是否为真。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-30T13:20:05.180

调用

```
[motionManager startDeviceMotionUpdatesUsingReferenceFrame:someFrame]; 
```

或者

```
[motionManager startDeviceMotionUpdates]; 
```

方法开始更新并通过读取 deviceMotion 属性定期访问 CMDeviceMotion 对象。

# facebook - 注销facebook sdk 3.08

> ID：12636530
> 
> 赞同：2
> 
> 时间：2012-09-28T08:40:46.877
> 
> 标签：facebook, logout

我的 facebook 应用程序断开连接时遇到问题，这是一个简单的应用程序，将照片上传到 facebook。登录会带您注销 Safari，但不会完全注销，下一次登录会在我的帐户上进行。我在 php 中看到了几个选项，但没有工作。附代码

```
- (void)viewDidLoad
{
[buttonPost setHidden:NO];

        FBLoginView *loginview = [[FBLoginView alloc] initWithPermissions:[NSArray arrayWithObject:@"publish_actions"]];

        loginview.frame = CGRectOffset(loginview.frame, 5, 5);
        loginview.delegate = self;

        [self.view addSubview:loginview];

        [loginview sizeToFit];
}

- (IBAction)Post:(UIButton *)sender{
    [FBRequestConnection startForUploadPhoto:self.imageScreen completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
        {
            [self showAlert:@"Photo Post" result:result error:error];
        }];
}

- (void)loginViewShowingLoggedOutUser:(FBLoginView *)loginView {
    [self.buttonPost setHidden:YES];

    self.labelFirstName.text = nil;

}
- (void)loginViewShowingLoggedInUser:(FBLoginView *)loginView {
    // first get the buttons set for login mode
   [self.buttonPost setHidden:NO];

}
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView user:(id<FBGraphUser>)user {
    // here we use helper properties of FBGraphUser to dot-through to first_name and
    // id properties of the json response from the server; alternatively we could use
    // NSDictionary methods such as objectForKey to get values from the my json object
    self.labelFirstName.text = [NSString stringWithFormat:@"Hello %@!", user.first_name];
    // setting the profileID property of the FBProfilePictureView instance
    // causes the control to fetch and display the profile picture for the user
    self.loggedInUser = user;
}

- (void)showAlert:(NSString *)message
           result:(id)result
            error:(NSError *)error {

    NSString *alertMsg;
    NSString *alertTitle;
    if (error) {
        alertMsg = error.localizedDescription;
        alertTitle = @"Error";
    } else {
        NSDictionary *resultDict = (NSDictionary *)result;
        alertMsg = [NSString stringWithFormat:@"Successfully posted",
                    message, [resultDict valueForKey:@"id"]];
        alertTitle = @"Success";
    }

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:alertTitle
                                                        message:alertMsg
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
    [alertView show];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:27:11.423

这个问题与 Safari 的 cookie 和缓存机制有关。

不幸的是，我知道让 Safari 忘记以前的登录凭据的唯一方法是清除设备设置中的 Cookie 和数据。

我还没有真正尝试过，但我很确定当您使用 FBSession 而不是 FBLoginView 时也会发生这种情况。 ![在 iPad 上清除 Safari 的 cookie 和数据](../Images/ee164a98dc3c4a70b5a8bf472b6c83b8.png)

# r - 如何将“加权研究”纳入绘图图中

> ID：12636533
> 
> 赞同：0
> 
> 时间：2012-09-28T08:40:53.663
> 
> 标签：r, metadata, lattice, scatter-plot, mixed-mode

我的数据是从文献中收集的，用于荟萃分析：

```
 Study      Eeff        Neff   Weight (%)
    1   34.83181476 50.04959144 0.1
    1   33.76824264 49.53210571 0.1
    1   32.67390287 47.77214774 0.1
    1   33.05520666 47.30254996 0.1
    2   33.19730252 44.21602149 0.3
    2   34.04709188 44.48002926 0.3
    3   33.22501606 38.96770954 0.3
    3   33.80766289 41.66974683 0.3
    3   33.06675158 42.66282841 0.3
    3   32.43069645 37.06958147 0.3
    4   34.72367611 41.31151977 0.25
    4   33.93254846 43.8526145  0.25
    4   33.22982756 44.99923374 0.25
    4   32.85979541 46.35648939 0.25
    5   32.85979541 43.53737788 0.35
    5   32.85979541 44.16612955 0.35
    5   32.85979541 40.10215682 0.35
    5   32.85979541 39.05910344 0.35 
```

我已经`Eeff`并且`Neff`从 5 项研究中获得。`Eeff`首先，我在正常情况下制作了一个散点图`Neff`。然而，由于数据来自不同的研究，其中不同的样本量、实验条件……我通过“逆方差”对研究进行加权，即方差越大，权重越小。总重量为 100%（或 1）。我想制作一个新的散点图，其中可以包含这个“重量”？有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:44:58.777

使用[`ggplot2`](http://ggplot2.org/), 可以执行以下操作：

```
require('ggplot2')
aFile = read.table('yourdata.txt',header = T)     
p=ggplot(aFile,aes(Eeff,Neff))
p + geom_point(aes(colour = Weight,size = Weight)) 
```

显然你会想玩颜色和标记大小等......

![在此处输入图像描述](../Images/9e1f2364e6a2d7e7176842a1b050d0eb.png)

# ruby-on-rails-3.2 - 你如何使夹具与 minitest-rails 0.2 版一起工作？

> ID：12636534
> 
> 赞同：1
> 
> 时间：2012-09-28T08:40:59.117
> 
> 标签：ruby-on-rails-3.2, fixtures, minitest

当我把

```
fixtures :all 
```

在模型测试中，它会产生以下错误。

```
`<top (required)>': undefined method `fixtures' for main:Object (NoMethodError) 
```

谢谢

PS：我在轨道上 3.2.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:19:38.103

你在测试一些不是从 ActiveRecord::Base 继承的东西吗？

我有同样的问题。我有一个类，它封装了一些与一些 ActiveRecord::Base 模型相关的逻辑，但它本身并没有从 ActiveRecord::Base 继承。

在这种情况下，根本不会加载测试装置： [https ://github.com/blowmage/minitest-rails/blob/master/lib/minitest/rails.rb#L93-L104](https://github.com/blowmage/minitest-rails/blob/master/lib/minitest/rails.rb#L93-L104)

简而言之：

```
class RandomClassName
end 
```

会产生错误，但是：

```
class RandomClassName < ActiveRecord::Base
end 
```

将不会。

# haskell - 欧拉项目的方形字谜词对

> ID：12636535
> 
> 赞同：0
> 
> 时间：2012-09-28T08:41:00.367
> 
> 标签：haskell, anagram

我正在尝试解决 Haskell 中 Euler 项目（[此处](http://projecteuler.net/problem=98)）的“方形字谜词对”问题，但我被困住了......

问题如下（我缩短了它）：

> *   取一个词，说“CARE”和它的字谜之一，例如“RACE”。
> *   用唯一的数字替换“CARE”的每个字母，例如 C = 1、A = 2、R = 9 和 E = 6。它恰好是 1296，是一个平方数。
> *   按照相同的替换策略替换字谜的字母（“RACE”），它会生成 9216，它也是一个平方数！
> 
> 给定一个单词列表，由这样一对单词组成的最大平方数是多少？

我设法从文件中提取了所有字谜对，并将它们放在 [(String,String)] 形式中，即 [("CARE","RACE")..]。

在下一步（映射 anasquare）中，对于每对单词，我想链接可以生成的最大平方数，使其看起来像 [(9216,"CARE","RACE")..]。

好吧，有一个技巧（必须有！）来避免蛮力方法，但到目前为止我还没有找到它......实际上问题不在这里，假设我想采用蛮力方法并检查每个字母 -> 数字转换。我只是不知道如何在 Haskell 中做到这一点。也许我累了，但我只是在这面前目瞪口呆。一定有一个简短而优雅但不太晦涩的写法，有人有想法吗？

这就是我所做的，我省去了字谜搜索和文件解析功能：

```
-- Read the file -> store the content into a list -> work on that list -> print the output
result98 = do contents <- readFile ".\\resources\\98.txt"
              putStrLn $ (process.words.format) contents

-- Find anagram pairs -> Find corresponding square number -> get the biggest one
process::[String]->String
process = toString . maximum . map anasquare . anagrams
    where toString (a,b,c) = "Yay ! the result is " ++ show a

-- Generate the maximum square number possible, 0 when none exist
anasquare::(String,String)->(Integer,String,String)
anasquare (x,y) = (anasquareValue,x,y)
    where anasquareValue = 0 -- TODO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:25:08.283

数学洞察力是

1.  平方数的后*n*位完全由根的后*n*位决定；和
2.  并非所有 n 位序列都*可以*作为平方数的最后*n位出现。*

确定哪些数字可以是平方数的最后一位（有六个）是 Haskell 的一行代码。在您的示例中，您因此知道*E*必须是这六个数字之一，而不是任何数字。这将暴力破解答案的时间减少了 40%。

同样地，判断哪一对数字可以是平方数的最后两位数字也是 Haskell 的一行代码。您会注意到十位数的可能性取决于个位数：例如，如果最后一个数字被选为*6*，倒数第二个数字可能只有*1* ，如果最后一个数字被选为倒数第二个数字可能只有*4*数字是*1*、*4*或*9*。

 ***想想你的代码如何生成这个查找表。什么是合适的数据结构来存储它？您是否需要提前指定您的方格可能有多少位数，或者您可以利用懒惰来发挥您的优势吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:26:17.503

尽管数学洞察力很有用（尤其是在项目 euler 上），但它并没有对我有太大帮助，因为我缺少一些关于“如何做”部分的知识。

无需过多介绍细节，一个解决方案就是将一个字谜词`("CARE","RACE")`转换成一对，例如`(1234,4213)`. 直截了当的东西。如果在平方数对中检测到类似的模式，则存在匹配。***

# curl - 使用 openssl 安装 curl

> ID：12636536
> 
> 赞同：8
> 
> 时间：2012-09-28T08:41:00.473
> 
> 标签：curl, libcurl

[我刚刚从http://www.openssl.org/source/](http://www.openssl.org/source/) [http://www.openssl.org/source/openssl-1.0.1c.tar.gz]下载并安装了 OpenSSL

```
./config
make
make test
make install 
```

现在我下载了 CURL - [http://curl.haxx.se/download/curl-7.27.0.tar.gz](http://curl.haxx.se/download/curl-7.27.0.tar.gz)。尝试使用 openssl 配置 curl 会给我以下错误-

```
.............................................................
checking for ssl with RSAglue/rsaref libs in use... checking for SSL_connect in -lssl... (cached) no
no
configure: error: OpenSSL libs and/or directories were not found where specified!
[root@curl-7.27.0]# ls -l /usr/local/ssl
total 40
drwxr-xr-x 2 root root  4096 Sep 28 01:21 bin
drwxr-xr-x 2 root root  4096 Sep 28 01:21 certs
drwxr-xr-x 3 root root  4096 Sep 28 01:21 include
drwxr-xr-x 4 root root  4096 Sep 28 01:21 lib
drwxr-xr-x 6 root root  4096 Sep 28 01:21 man
drwxr-xr-x 2 root root  4096 Sep 28 01:21 misc
-rw-r--r-- 1 root root 10835 Sep 28 01:21 openssl.cnf
drwxr-xr-x 2 root root  4096 Sep 28 01:21 private
[root@curl-7.27.0]# 
```

我不确定如何解决此错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T15:00:28.560

配置 libcurl 时试试这个

```
./configure --with-ssl --with-libssl-prefix=/usr/local/ssl 
```

`/usr/local/ssl`是 openssl 包含头文件和库的地方

```
/usr/local/ssl/
├── bin
├── certs
├── include
├── lib
├── man
├── misc
├── openssl.cnf
└── private 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-22T13:56:42.750

使用标志 --with-darwinssl 解决此问题

使用 curl 源代码转到文件夹

在此处下载 [https://curl.haxx.se/download.html](https://curl.haxx.se/download.html)

```
sudo ./configure --with-darwinssl
make
make install 
```

重新启动您的控制台，它就完成了！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-06T10:45:51.187

如果您使用的是 RHEL，并且想要使用静态链接库（独立二进制文件）构建 curl（例如 v7.45），您还可以：

```
yum install openssl-devel # for headers and libraries
# run `./buildconf` if you cloned curl git repo
./configure --with-ssl=/usr/include/openssl --disable-shared
make 
```

您的二进制文件将在`./src/curl`.

`openssl-devel`1.0.1e 版安装：

```
/usr/include/openssl
/usr/include/openssl/aes.h
/usr/include/openssl/asn1.h
/usr/include/openssl/asn1_mac.h
/usr/include/openssl/asn1t.h
/usr/include/openssl/bio.h
/usr/include/openssl/blowfish.h
/usr/include/openssl/bn.h
/usr/include/openssl/buffer.h
/usr/include/openssl/camellia.h
/usr/include/openssl/cast.h
/usr/include/openssl/cmac.h
/usr/include/openssl/cms.h
/usr/include/openssl/comp.h
/usr/include/openssl/conf.h
/usr/include/openssl/conf_api.h
/usr/include/openssl/crypto.h
/usr/include/openssl/des.h
/usr/include/openssl/des_old.h
/usr/include/openssl/dh.h
/usr/include/openssl/dsa.h
/usr/include/openssl/dso.h
/usr/include/openssl/dtls1.h
/usr/include/openssl/e_os2.h
/usr/include/openssl/ebcdic.h
/usr/include/openssl/ec.h
/usr/include/openssl/ecdh.h
/usr/include/openssl/ecdsa.h
/usr/include/openssl/engine.h
/usr/include/openssl/err.h
/usr/include/openssl/evp.h
/usr/include/openssl/fips.h
/usr/include/openssl/fips_rand.h
/usr/include/openssl/hmac.h
/usr/include/openssl/idea.h
/usr/include/openssl/krb5_asn.h
/usr/include/openssl/kssl.h
/usr/include/openssl/lhash.h
/usr/include/openssl/md2.h
/usr/include/openssl/md4.h
/usr/include/openssl/md5.h
/usr/include/openssl/modes.h
/usr/include/openssl/obj_mac.h
/usr/include/openssl/objects.h
/usr/include/openssl/ocsp.h
/usr/include/openssl/opensslconf-x86_64.h
/usr/include/openssl/opensslconf.h
/usr/include/openssl/opensslv.h
/usr/include/openssl/ossl_typ.h
/usr/include/openssl/pem.h
/usr/include/openssl/pem2.h
/usr/include/openssl/pkcs12.h
/usr/include/openssl/pkcs7.h
/usr/include/openssl/pqueue.h
/usr/include/openssl/rand.h
/usr/include/openssl/rc2.h
/usr/include/openssl/rc4.h
/usr/include/openssl/ripemd.h
/usr/include/openssl/rsa.h
/usr/include/openssl/safestack.h
/usr/include/openssl/seed.h
/usr/include/openssl/sha.h
/usr/include/openssl/srtp.h
/usr/include/openssl/ssl.h
/usr/include/openssl/ssl2.h
/usr/include/openssl/ssl23.h
/usr/include/openssl/ssl3.h
/usr/include/openssl/stack.h
/usr/include/openssl/symhacks.h
/usr/include/openssl/tls1.h
/usr/include/openssl/ts.h
/usr/include/openssl/txt_db.h
/usr/include/openssl/ui.h
/usr/include/openssl/ui_compat.h
/usr/include/openssl/whrlpool.h
/usr/include/openssl/x509.h
/usr/include/openssl/x509_vfy.h
/usr/include/openssl/x509v3.h
/usr/lib64/libcrypto.so
/usr/lib64/libssl.so
/usr/lib64/pkgconfig/libcrypto.pc
/usr/lib64/pkgconfig/libssl.pc
/usr/lib64/pkgconfig/openssl.pc 
```

# java - 针对多个 XSD 验证 XML

> ID：12636537
> 
> 赞同：3
> 
> 时间：2012-09-28T08:41:08.463
> 
> 标签：java, xml, validation, xsd

我必须根据模式验证 XML 文件。问题是该模式由 89 个小 .xsd 文件组成，并使用 xsd:import 构建（文件大小约为 1kb）。当我运行我的验证器方法时，验证需要 30 多秒。有什么方法可以加快这个过程吗？

这是我用于验证的代码：

```
public boolean checkXML(String XMLFileName, String XSDFileName) {
    Source xmlFile = new StreamSource(new File(XMLFileName));
    Source schemaFile = new StreamSource(new File(XSDFileName));
    SchemaFactory schemaFactory = SchemaFactory
            .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    try {
        Schema schema = schemaFactory.newSchema(schemaFile);
        javax.xml.validation.Validator validator = schema.newValidator();
        validator.validate(xmlFile);
        return true;
    } catch (SAXException e) {
        // Validation failed
        return false;
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:16:13.913

您应该首先了解哪些类库调用需要时间。即是`SchemaFactory.newSchema()`吗？`Schema.newValidator()`? 还是`Validator.validate()`？

我相信你会发现它是前两个之一，而不是第三个。

显而易见的下一步是重构您的代码，以便您只为特定模式文件创建一次模式（和/或验证器），然后缓存它以供每次针对该模式验证 XML 时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:02:37.090

可能需要很长时间的原因有很多。它可能（正如大卫格兰特所建议的那样）与导入和包含的周期有关。或者它可能是一种具有数字出现范围的特别讨厌的内容模型。或者从 W3C 网站获取模式文档（例如 XML 命名空间的模式）可能会出现问题（30 秒的数字在这里敲响了警钟，因为 W3C 网站通常需要很长时间才能响应：他们试图鼓励您使用文档的本地副本）。

试一试撒克逊人，看看效果是否更好。（有时撒克逊人比 Xerces 做得更好，有时做得更糟；知道会很有趣，它可能有助于隔离原因。）

# xslt - xsl“以下”返回不是预期的

> ID：12636539
> 
> 赞同：2
> 
> 时间：2012-09-28T08:41:21.990
> 
> 标签：xslt, xpath

我有这样的xml：

```
 <ROWSET>
    <ROW>
      <FLD1>P2</FLD1>
      <S_VAL>1</S_VAL>    
      <FLD2>N2</FLD2>
    </ROW>
    <ROW>
      <FLD1>P3</FLD1>
      <S_VAL>2</S_VAL> 
      <FLD2>N2</FLD2>    
    </ROW>
     <ROW>
      <FLD1>P3</FLD1>
      <S_VAL>3</S_VAL> 
      <FLD2>N2</FLD2>    
    </ROW>
    <ROW>
      <FLD1>P4</FLD1>
      <S_VAL>4</S_VAL>    
       <FLD2>N3</FLD2>
    </ROW>
    <ROW>
      <FLD1>P2</FLD1>
      <S_VAL>5</S_VAL>    
      <FLD2>N3</FLD2>
    </ROW>
  </ROWSET> 
```

我的 xsl 中有 2 个变量：

```
 <xsl:variable name="only_need" select="/ROWSET/ROW[./FLD2='N2']"/>
  <xsl:variable name="only_need2" select="$only_need/FLD1[not(.=following::FLD1)]"/> 
```

在名为“only_need”的变量中，我收到带有 S_Val IN (1, 2, 3) 的记录。但在名为“only_need2”的变量中，我只收到 FLD1 = P3。为什么第二个变量只接收 FLD1 = P3 的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:01:29.660

`only_need2`包含其值*与整个文档*中所有后续元素的值不同`FLD1`的那些行的子代，而不仅仅是在. 所以你没有得到，因为稍后会有另一个（在第五行）。`only_need``FLD1`*`only_need``P2``P2`*

 *如果您想要的实际上是每个不同*值`only_need`*`FLD1`的最后一行，您可以使用键来执行此操作

```
<xsl:key name="key_only_need2" match="/ROWSET/ROW[FLD2='N2']/FLD1" use="." />
<xsl:variable name="only_need2" select="$only_need/FLD1[
      generate-id() = generate-id( key('key_only_need2', .)[last()] )]" /> 
```

我在这里所做的是定义一个键，它将从行中提取所有元素`FLD1`，并按它们的值对它们进行分组。变量声明中的谓词使用此键仅选择每个组中的*最后一个元素。*`FLD2``N2``FLD1`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:48:45.917

这回答了您从评论到 Ian Roberts 的好答案的问题：

> 你能告诉我，我怎样才能将“关注”仅用于“only_need”

事实上，这是一个纯粹的 XPath 问题。

**可以避免使用键，而只使用诸如“前”或“后”之类的轴来查找“不同”元素，但是请记住，这非常慢 - O(N^2) 与使用相同键-（O（N））：**

```
 <xsl:variable name="vOnlyNeed" select="/*/*[FLD2='N2']"/>
 <xsl:variable name="vOnlyNeedDistinct" select=
  "$vOnlyNeed
   [not(FLD1
       =
        following::*
           [count(.|$vOnlyNeed) = count($vOnlyNeed)]
             /FLD1)]
   "/> 
```

**这是一个完整的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vOnlyNeed" select="/*/*[FLD2='N2']"/>
 <xsl:variable name="vOnlyNeedDistinct" select=
  "$vOnlyNeed
   [not(FLD1
       =
        following::*
           [count(.|$vOnlyNeed) = count($vOnlyNeed)]
             /FLD1)]
   "/>

 <xsl:template match="/">
     <xsl:copy-of select="$vOnlyNeedDistinct"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<ROWSET>
    <ROW>
        <FLD1>P2</FLD1>
        <S_VAL>1</S_VAL>
        <FLD2>N2</FLD2>
    </ROW>
    <ROW>
        <FLD1>P3</FLD1>
        <S_VAL>2</S_VAL>
        <FLD2>N2</FLD2>
    </ROW>
    <ROW>
        <FLD1>P3</FLD1>
        <S_VAL>3</S_VAL>
        <FLD2>N2</FLD2>
    </ROW>
    <ROW>
        <FLD1>P4</FLD1>
        <S_VAL>4</S_VAL>
        <FLD2>N3</FLD2>
    </ROW>
    <ROW>
        <FLD1>P2</FLD1>
        <S_VAL>5</S_VAL>
        <FLD2>N3</FLD2>
    </ROW>
</ROWSET> 
```

**计算 Xpath 表达式，并将如此定义的变量的内容`$vOnlyNeedDistinct`复制到输出**：

```
<ROW>
   <FLD1>P2</FLD1>
   <S_VAL>1</S_VAL>
   <FLD2>N2</FLD2>
</ROW>
<ROW>
   <FLD1>P3</FLD1>
   <S_VAL>3</S_VAL>
   <FLD2>N2</FLD2>
</ROW> 
```**

# asp.net - StringBuilder 中的 JavaScript

> ID：12636542
> 
> 赞同：1
> 
> 时间：2012-09-28T08:41:42.457
> 
> 标签：asp.net, vb.net, asp.net-3.5

我似乎无法向 StringBuilder 添加一些 javascript。我有一个工作页面，它以 div 标签的形式生成 HTML 内容。这工作正常。我只是想在 StringBuilder 的末尾添加一个简单的脚本，以便客户端在 div 标签完成出现在屏幕上时收到警报，即：

```
objStringBuilder.Append("<script language='javascript'>")
objStringBuilder.Append("alert('Finished');")
objStringBuilder.Append("</script>") 
```

这在 IDE 中给了我一条错误消息：

```
statement cannot appear within a method body.  end of method assumed 
```

错误出现在最后一行：

```
objStringBuilder.Append("</script>") 
```

此代码是在 VB.NET 中完成的，因此没有像 C# 这样的分号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:00:42.067

我将在这里进行（大）猜测。

*   假设：您在`script runat="server"`块内工作
*   假设：关闭脚本标签（甚至作为字符串）关闭服务器块
*   服务器块现在格式错误

或者，它可能是格式错误的 Sub 或 Function 块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:04:20.067

`objStringBuilder.Append("</script>")`通过更改为`objStringBuilder.Append("</scr" & "ipt>")`...修复了它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:38:11.950

```
StringBuilder Sb = new StringBuilder();
Sb.Append("alert('Finished');");
Page.ClientScript.RegisterStartupScript(this.GetType(), "", Sb.ToString(), true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:00:05.303

正如 Asp.net 论坛所建议的那样：

> 从代码隐藏插入 Javascript 我更喜欢你使用
> 
> RegisterClientScript 而不是平面字符串部署到 aspx 页面
> 
> 你可以使用类似的代码

```
 ScriptManage.RegisterClientScript(this.GetType(), "", "your javascript
    code", true); 
```

> 或者

```
> Page.ClientScript.RegisterClientScript("", "your javascript code",
> true); 
```

> 您需要使用不带标签名称的 javascript 代码

[http://forums.asp.net/t/1683634.aspx/1](http://forums.asp.net/t/1683634.aspx/1)

# iphone - 笔尖兼容 iPhone 3.5 英寸和 4 英寸

> ID：12636544
> 
> 赞同：2
> 
> 时间：2012-09-28T08:41:44.233
> 
> 标签：iphone

如何创建兼容 iPhone 3.5 英寸和 4 英寸屏幕的笔尖？我应该创建两个笔尖吗？将 iPhone 3.5 英寸更改为 4 英寸时，有什么方法可以自动对齐元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:48:02.750

您应该看看[WWDC 2012](https://developer.apple.com/videos/wwdc/2012/)视频，尤其是标题[为 iOS 和 OS X 的自动布局简介](https://developer.apple.com/videos/wwdc/2012/?id=202)的视频。这是对您可以使用自动布局做什么的一个很好的介绍。

# php - 从 MySQL 数据库填充 Excel 表单字段

> ID：12636545
> 
> 赞同：0
> 
> 时间：2012-09-28T08:41:45.867
> 
> 标签：php, mysql, excel, file

我有一个现有的表单，我需要直接从 MySQL 数据库填充字段。

我的老板希望将我们客户的个人资料税计算自动输入 Excel 表格。

对此有何建议？

提前致谢...

顺便说一句，使用 PHP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:44:05.593

**第二次编辑：**

```
<?php

    function connect_db($db_name) {

        $con = mysql_connect('localhost', 'db_user', 'db_pass');
        $seldb = mysql_select_db($db_name);

        if($con && $seldb) {

            return true;

        }
        else {

            return false;

        }

    }

    function get_data_from_mysql() {

        $data_query = "SELECT date, new_users, old_users, income FROM stats ORDER BY date DESC LIMIT 30";

        $data_mysql = mysql_query($data_query);

        $data_finished = array();
        while($data_fetch = mysql_fetch_assoc($data_mysql)) {

            $data_finished[] = $data_fetch;

        }

        return $data_finished;

    }

    function print_to_xls($filename, $data_from_mysql) {

        $file = "xls_archive/" . $filename . ".xls";
        $file_abs_path = "http://www.yoursite.com/xls_archive/" . $file;
        $content = "date\t new users\t old users\t income\n";;

        foreach($data_from_mysql as $data) {

            $content .= $data['date'] . "\t " . $data['new_users'] . "\t " . $data['old_users'] . "\t " . $data['income'] . "\n";

        }

        $saving_file = $file;
        $fo = fopen($saving_file, 'w') or die("can't open file");
        $data_to_write = $content;
        fwrite($fo, $data_to_write);
        fclose($fo);

        header("Content-type: application/ms-excel");
        header("Content-Transfer-Encoding: Binary"); 
        header("Content-Disposition: attachment; filename=" . $file);

        readfile($file_abs_path);

    }

    $connect_to_db = connect_db("db_name");

    if ($connect_to_db) {

        $data_to_print = get_data_from_mysql();

        $today = date("Y_m_d");
        $filename = "dailyreport_" . $today;

        print_to_xls($filename, $data_to_print);

    }
    else {

        print "ERROR";

    }

?> 
```

上面的代码将从 MySQL 数据库生成的文件中生成一个 .xls。
* 代码未经测试，但我认为它完美地工作......

**第一次编辑：**

您也可以手动完成，通过以表格格式打包数据并将标题更改为 excel 标题，如下所示：

```
$file ="dailyreport.xls";
$content = "data1 \t data2 \t data3 \t \n";

header("Content-type: application/ms-excel");
header("Content-Disposition: attachment; filename=" . $file);

print $content; 
```

此代码将（生成后）提示用户下载文件“dailyreport.xls”

你也可以试试这个 php 库来生成 xls 文档： http:
[//phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:02:29.600

将整个表单创建为 html 表格，没有表单字段，然后将内容作为 Excel 电子表格提供。

这个答案提供了更多细节

[HTML表格到Excel - PHP](https://stackoverflow.com/questions/3437745/html-table-to-excel-php)

每次打开电子表格时都会收到安全警告，但由于您是电子表格的创建者，而且它是供内部使用的，因此您可以忽略安全警告。

警告会说类似...

`"The file you are trying to open, '[filename]', is in a different format than specified by the file extension. Verify that the file is not corrupted and is from a trusted source before opening the file. Do you want to open the file?"`

另请参阅[什么是 XLSHTML？](https://stackoverflow.com/questions/2322479/whats-xlshtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:46:29.313

好吧，您可以使用 PHP 从 MySQL 获取数据，但可以通过多种方式显示在 Excel 中，假设您有一个与 mysql 对话并获取所需数据及其 XML 格式的程序。

现在您可以导出到 excel，理想情况下您在这里所做的是将响应类型更改为 application/vnd.ms-excel 并将数据格式化为表格格式，以便 excel 将其视为行和列。

以上是一种方式，还有很多其他方式，您可以在后端生成excel并为用户提供链接，或者您可以将数据公开为服务并编写一个excel插件来从您的服务中读取数据

# c# - WebGrid排序不起作用

> ID：12636546
> 
> 赞同：2
> 
> 时间：2012-09-28T08:41:53.313
> 
> 标签：c#, razor, webgrid

我正在使用 WebGrid 来显示我的数据库中的数据表。该表有一列包含数量。我希望有人能告诉我为什么这个网格没有排序？

```
@{  
    WebGrid grid = new WebGrid(
        source: Model,
        rowsPerPage: 10,
        canPage: true,
        canSort: false,
        ajaxUpdateContainerId: "grid",
        ajaxUpdateCallback: "initGrid",
        sortFieldName: "Qty_containers",
        sortDirectionFieldName: "ASC"
    );
}

    <div id="grid" class="ajax">
            @grid.GetHtml(
                tableStyle: "border", headerStyle: "red",
                columns: grid.Columns(
                grid.Column(columnName: "Haulier", 
header: ResourceContext.Get("Model.ShortTerm.Haulier")),
                grid.Column(columnName: "ETA_vessel", 
header: ResourceContext.Get("Model.ShortTerm.ETA_vessel"), format:
                    @<text>
                        @item.ETA_vessel.ToShortDateString()
                    </text>),
                grid.Column(columnName: "Container_length", header: ResourceContext.Get("Model.ShortTerm.Container_length"), format:
                    @<text>
                            @{string length = item.Container_length.ToString();
                              if(length.Equals("_blank_")){
                                length = "";
                              }
                              else if(length.Equals("_x0032_0_ft")){
                                length = "20 ft"; 
                              }
                              else{
                                length = "30 ft";
                              }
                             }
                            @length
                    </text>),
                grid.Column(columnName: "Qty_containers", header: ResourceContext.Get("Model.ShortTerm.Qty_containers"), canSort: true)
                )
            ) 
        </div> 
```

![我的网格](../Images/fc2554693c8032d89614850292bc5da6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T06:34:39.927

更改此属性，它应该可以工作`canSort: true`。在您的代码中“canSort”设置为“False”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:37:18.390

我也遇到了“WebGrid”的问题。在你的收藏中试试这个：

```
objectModel.OrderByDescending(d => d.Qty_containers); 
```

# c# - 以特定格式组合和连接给定数据

> ID：12636557
> 
> 赞同：3
> 
> 时间：2012-09-28T08:42:22.413
> 
> 标签：c#, permutation, combinatorics

例如，我有以下数据：

```
YELLOW,SMALL,STRETCH,ADULT,T
YELLOW,SMALL,STRETCH,ADULT,T
YELLOW,SMALL,STRETCH,CHILD,F
YELLOW,SMALL,DIP,ADULT,F
YELLOW,SMALL,DIP,CHILD,F
YELLOW,LARGE,STRETCH,ADULT,T
YELLOW,LARGE,STRETCH,ADULT,T
YELLOW,LARGE,STRETCH,CHILD,F
YELLOW,LARGE,DIP,ADULT,F
YELLOW,LARGE,DIP,CHILD,F
PURPLE,SMALL,STRETCH,ADULT,T
PURPLE,SMALL,STRETCH,ADULT,T
PURPLE,SMALL,STRETCH,CHILD,F
PURPLE,SMALL,DIP,ADULT,F
PURPLE,SMALL,DIP,CHILD,F
PURPLE,LARGE,STRETCH,ADULT,T
PURPLE,LARGE,STRETCH,ADULT,T
PURPLE,LARGE,STRETCH,CHILD,F
PURPLE,LARGE,DIP,ADULT,F
PURPLE,LARGE,DIP,CHILD,F 
```

我需要生成以下几组数据（注意上面数据的列会生成下面的数据个数）如果有5列，就会有4组数据，第一个单列，第二个2个，第三个3个，等等。最后一列被省略，是连接所有数据的 CLASS 列，数字是它在上述给定数据中的出现次数。

```
--------------------------------------------------
1 column
--------------------------------------------------
YELLOW  T   4   
SMALL   T   4   
STRETCH T   8   
ADULT   T   8   
YELLOW  F   6   
SMALL   F   6   
STRETCH F   4   
CHILD   F   8   
DIP F   8   
ADULT   F   4   
LARGE   T   4   
LARGE   F   6   
PURPLE  T   4   
PURPLE  F   6   
--------------------------------------------------
2 columns
--------------------------------------------------
YELLOW  SMALL   T   2   
YELLOW  STRETCH T   4   
YELLOW  ADULT   T   4   
SMALL   STRETCH T   4   
SMALL   ADULT   T   4   
STRETCH ADULT   T   8   
YELLOW  SMALL   F   3   
YELLOW  STRETCH F   2   
YELLOW  CHILD   F   4   
SMALL   STRETCH F   2   
SMALL   CHILD   F   4   
STRETCH CHILD   F   4   
YELLOW  DIP F   4   
YELLOW  ADULT   F   2   
SMALL   DIP F   4   
SMALL   ADULT   F   2   
DIP ADULT   F   4   
DIP CHILD   F   4   
YELLOW  LARGE   T   2   
LARGE   STRETCH T   4   
LARGE   ADULT   T   4   
YELLOW  LARGE   F   3   
LARGE   STRETCH F   2   
LARGE   CHILD   F   4   
LARGE   DIP F   4   
LARGE   ADULT   F   2   
PURPLE  SMALL   T   2   
PURPLE  STRETCH T   4   
PURPLE  ADULT   T   4   
PURPLE  SMALL   F   3   
PURPLE  STRETCH F   2   
PURPLE  CHILD   F   4   
PURPLE  DIP F   4   
PURPLE  ADULT   F   2   
PURPLE  LARGE   T   2   
PURPLE  LARGE   F   3
--------------------------------------------------
3 columns
--------------------------------------------------
YELLOW  SMALL   STRETCH T   2   
YELLOW  SMALL   ADULT   T   2   
YELLOW  STRETCH ADULT   T   4   
SMALL   STRETCH ADULT   T   4   
YELLOW  SMALL   STRETCH F   1   
YELLOW  SMALL   CHILD   F   2   
YELLOW  STRETCH CHILD   F   2   
SMALL   STRETCH CHILD   F   2   
YELLOW  SMALL   DIP F   2   
YELLOW  SMALL   ADULT   F   1   
YELLOW  DIP ADULT   F   2   
SMALL   DIP ADULT   F   2   
YELLOW  DIP CHILD   F   2   
SMALL   DIP CHILD   F   2   
YELLOW  LARGE   STRETCH T   2   
YELLOW  LARGE   ADULT   T   2   
LARGE   STRETCH ADULT   T   4   
YELLOW  LARGE   STRETCH F   1   
YELLOW  LARGE   CHILD   F   2   
LARGE   STRETCH CHILD   F   2   
YELLOW  LARGE   DIP F   2   
YELLOW  LARGE   ADULT   F   1   
LARGE   DIP ADULT   F   2   
LARGE   DIP CHILD   F   2   
PURPLE  SMALL   STRETCH T   2   
PURPLE  SMALL   ADULT   T   2   
PURPLE  STRETCH ADULT   T   4   
PURPLE  SMALL   STRETCH F   1   
PURPLE  SMALL   CHILD   F   2   
PURPLE  STRETCH CHILD   F   2   
PURPLE  SMALL   DIP F   2   
PURPLE  SMALL   ADULT   F   1   
PURPLE  DIP ADULT   F   2   
PURPLE  DIP CHILD   F   2   
PURPLE  LARGE   STRETCH T   2   
PURPLE  LARGE   ADULT   T   2   
PURPLE  LARGE   STRETCH F   1   
PURPLE  LARGE   CHILD   F   2   
PURPLE  LARGE   DIP F   2   
PURPLE  LARGE   ADULT   F   1   
--------------------------------------------------
4 columns
--------------------------------------------------
YELLOW  SMALL   STRETCH ADULT   T   2   
YELLOW  SMALL   STRETCH CHILD   F   1   
YELLOW  SMALL   DIP ADULT   F   1   
YELLOW  SMALL   DIP CHILD   F   1   
YELLOW  LARGE   STRETCH ADULT   T   2   
YELLOW  LARGE   STRETCH CHILD   F   1   
YELLOW  LARGE   DIP ADULT   F   1   
YELLOW  LARGE   DIP CHILD   F   1   
PURPLE  SMALL   STRETCH ADULT   T   2   
PURPLE  SMALL   STRETCH CHILD   F   1   
PURPLE  SMALL   DIP ADULT   F   1   
PURPLE  SMALL   DIP CHILD   F   1   
PURPLE  LARGE   STRETCH ADULT   T   2   
PURPLE  LARGE   STRETCH CHILD   F   1   
PURPLE  LARGE   DIP ADULT   F   1   
PURPLE  LARGE   DIP CHILD   F   1 
```

所以甚至可以有 50 列，也可以有 80 甚至更多。

复杂性还在于可以有 0 和 1 而不是单词，我们需要匹配相同的列。

希望你有这个问题。

我制作了以下代码来生成第一列。主要问题是其余列。

```
for (int i = 0; i < lsClasses.Count; i++)
            {
                for (int j = 0; j < lsUniqueOps.Count; j++)
                {
                    int count = FindInOrignalList(orignalList, lsClasses[i], lsUniqueOps[j]);
                    if (count != 0)
                    {
                        List<string> checkedItem = new List<string>();
                        checkedItem.Add(lsUniqueOps[j][0]);
                        checkedItem.Add(lsUniqueOps[j][1]);
                        checkedItem.Add(lsClasses[i]);
                        checkedItem.Add(count.ToString());
                        lsFirstItemSet.Add(checkedItem);
                    }
                }
            }

--------------------------------------------------

private static int FindInOrignalList(List<List<string>> orignalList, string lsClass, List<string> lsUniqueOp)
        {
            List<List<string>> tmpList = new List<List<string>>();
            int count = 0;
            for (int i = 0; i < orignalList.Count; i++)
            {
                for (int j = 0; j < orignalList[i].Count - 1; j++)
                {
                    if (orignalList[i][j] + "," + orignalList[i][orignalList[i].Count - 1] == lsUniqueOp[0] + "," + lsClass)
                        count++;
                }
            }
            return count;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:08:42.520

如果我没看错，你只列出最后没有“F”的市场事件。你只会得到“T”。那是对的吗？如果是这样，您可以从

1.  删除 F'ed 的行，因为它们永远不会导致任何上升，
2.  完全删除最后一列（因为只有 T 存在并且一行的存在已经暗示了它的真实性）
3.  告诉我这是否是一项家庭作业（在这种情况下，您处于初级水平，需要与高级程序员不同的解释）。

我会假设你是精明的类型。然后，您可以应用 LINQ 和合适的数据结构来计算出现次数。就在我的脑海中 -`DataSet`和公司可能是一个不错的选择。`Dictionary`可能是另一个。

# javascript - 外部 iframe 以某种方式重定向到我的网站之外，我该如何防止这种情况发生？

> ID：12636562
> 
> 赞同：-1
> 
> 时间：2012-09-28T08:42:40.910
> 
> 标签：javascript, jquery

外部 iframe 如何设法重定向出您的网站？

如何防止这种情况？

如果没有点击，是否可以收听“重定向请求”并阻止它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:44:41.077

> 外部 iframe 如何设法重定向出您的网站？

`parent.location`不是只读的

> 如何防止这种情况？

通过不构建不想被构建的不受信任的第三方内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:45:14.073

你没有。

这自古以来就被称为“框架破坏”（好吧，就“网络”而言）。子框架能够根据需要设置托管窗口。

你唯一能做的就是不要`<iframe>`去你不信任的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:50:20.607

iframe 可以到达主体和窗口，我们可以看到它可以使用 jqueryUi 在不同 iframe 之间拖放对象，在这种情况下，外部 iframe 可以轻松到达主窗口并使其成为 window.location.href 。我现在很忙，但我认为这将适用于原始 javascript。window.addEventListener('load',function(){}) 或 location 或其他事件可能起作用，然后 event.preventDefault() 可以停止重定向。但是我还没有尝试过。[编辑 hashchange 或喜欢这个事件我相信可以做到:) ]

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-28T09:54:50.993

我是这样做的：

```
// Listen for unloads
var prevent_bust = 0  
window.onbeforeunload = function() { prevent_bust++ }  
setInterval(function() {  
  if (prevent_bust > 0) {  
    prevent_bust -= 2
    var currentTime = new Date();
    if((currentTime.getTime()-lastClick) > 500) { // If no clicks in the last .5 second don't redirect
        window.top.location = 'http://justwalk.it/stuff/204/foo'
        }
  }  
}, 1)

// Listen for clicks, save time of latest one
var currentTime = new Date().getTime(), lastClick ;
$("body").click(function () {
    var currentTime = new Date();
    lastClick = currentTime.getTime();
    console.log('click time:'+lastClick);
    }); 
```

# c# - 从换行中获取带有换行符的 TextBlock 文本？

> ID：12636563
> 
> 赞同：2
> 
> 时间：2012-09-28T08:42:59.583
> 
> 标签：c#, xaml, windows-8, textblock

我有一个在 Canvas 上显示的 TextBlock，它显示用户输入的文本。

我想获取此 TextBlock 的内容，但我需要以我知道换行符发生位置的方式获取它，例如：

![在此处输入图像描述](../Images/855061cdcd20fb93b1bda677adbd8bd4.png)

从这个显示的文本块中，我如何获取文本并知道换行符在哪里？

此外，这是一个 Windows 应用商店应用程序，因此完整的 .NET 框架不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:34:28.230

据我所知，无法从中检索此类信息`TextBlock`，但是您可以尝试以下操作：

*   获取`TextBlock`宽度
*   检索文本的宽度（例如使用`FormattedText`类）
*   实现一些逻辑，使用文本宽度和`TextBlock`宽度将文本分成几行

# ios - 如何暂时禁用 iPad 支持

> ID：12636564
> 
> 赞同：0
> 
> 时间：2012-09-28T08:43:02.090
> 
> 标签：ios, xcode, ios-universal-app

我已经构建了一个通用的 iOS 应用程序。iPhone 部分已准备就绪，iPad 部分仍需要更多工作，不应发货。

如何构建这个项目的一个版本，生成一个只包含 iPhone 版本的二进制文件？

仅删除 info.plist 中的“主故事板文件基本名称（iPad）”似乎还不够

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T08:48:41.107

在目标的“摘要”页面中（单击左侧面板中的项目，选择目标，然后选择摘要选项卡），将设备下拉菜单设置为 iPhone。以前它会是“通用的”。该二进制文件仍将包含 iPad 数据，但 iPad 用户将无法安装它，并且它将在 App Store 上标记为仅限 iPhone。

![在此处输入图像描述](../Images/a2a5010b4ab875225224df92e6dc6b44.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:52:13.807

在**Target -> Summary**中，您可以选择**Device -> iPhone**

在**Build Setting -> Target Device Family**中选择 iPhone only

这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-31T12:45:24.227

在**info.plist**文件中**删除**名为`Main storyboard file base name`.

也改变`Target Device Family`为`iPhone`

# c# - 如何在没有 MethodInfo 的情况下使用 MSIL *调用实例上的方法？

> ID：12636566
> 
> 赞同：4
> 
> 时间：2012-09-28T08:43:06.463
> 
> 标签：c#, reflection, dynamic-programming, cil

我在遵循特定约定的类上有一个数字属性。例如。

```
Person1 { get; set; }
Person2 { get; set; }
Person3 { get; set; } 
```

我不想`MethodInfo`在类的实例上获取一个对象，而是做这样的事情：

```
...
il.Emit(OpCodes.Callvirt, [instance]["set_Person" + index]); 
```

上面的代码行是说明性的，而不是我认为应该的。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T15:35:04.983

这是不可能的，我不明白这一点或任何潜在的好处。MSIL Callvirt 指令不采用描述要调用什么的字符串，它采用指向特定类型的特定方法的元数据标记，并且通过反射获取该值的唯一方法是使用 MethodInfo 实例。

这看起来真的不是一个复杂的选择：

```
il.Emit(OpCodes.Callvirt, type.GetMethod("set_Person" + index)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:32:08.107

```
public class Sample
{
    public int Person1 { get; set; }
    public int Person2 { get; set; }
    public int Person3 { get; set; }
}

static void Main(string[] args) {
    var s = new  Sample();
    var tuples = new List<Tuple<string, int>> { 
                    Tuple.Create("Person1", 1), 
                    Tuple.Create("Person2", 2), 
                    Tuple.Create("Person3", 3) 
                 };

    var argument = Expression.Constant(s);

    foreach (var item in tuples) {
        CreateLambda(item.Item1, argument, item.Item2)
               .Compile()
               .DynamicInvoke();
    }
 }

static LambdaExpression CreateLambda(string propertyName, Expression instance, int value) {
     return Expression.Lambda(
               Expression.Assign(
                  Expression.PropertyOrField(instance, propertyName), 
                  Expression.Constant(value)));
 } 
```

# localization - iReport：如何根据法语区域设置日期格式

> ID：12636568
> 
> 赞同：2
> 
> 时间：2012-09-28T08:43:09.397
> 
> 标签：localization, jasper-reports, ireport, date-formatting

我在*iReport中格式化日期时遇到问题*

在我的电脑上，我将语言环境配置为*法语*，但是当*iReport*生成报告时，我发现日期格式为*英语*语言环境。

这是我的*jrxml*文件中的一些代码：

```
<band height="41" splitType="Stretch">
    <textField pattern="dd/MM/yyyy h.mm a">
        <reportElement uuid="fb711e77-c949-4a99-9b52-109aae00c8ed" x="87" y="19" width="100" height="20"/>
        <textElement/>
        <textFieldExpression><![CDATA[$P{datenow}]]></textFieldExpression>
    </textField>
    <staticText>
        <reportElement uuid="51fb76a0-829e-4c36-b474-3ff9c7d4c239" x="41" y="19" width="48" height="20"/>
        <textElement>
            <font isBold="true" isItalic="true"/>
        </textElement>
        <text><![CDATA[Fes Le : ]]></text>
    </staticText>
</band> 
```

以下是它对我的显示方式：*`Fri Sep 28 09:59:00`*

我的目标格式是*`vendredi 28 septembre 2012 09:59`*：（*法语*）

你有什么主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:16:57.750

您的问题重复[了如何在 iReport 中更改日期格式（月份名称）？](https://stackoverflow.com/q/8653424/876298)并[在 IReport 中设置 REPORT_LOCALE？](https://stackoverflow.com/q/8847698/876298)帖子。

* * *

*   *要在iReport*中设置区域设置，您应该调用对话框*选项 - 编译和执行*（通过*iReport* ->*工具*->*选项*菜单）。

![语言设置对话框](../Images/d73a354935bd1eda6948c8d140403de3.png)

对于这个*textField*：

```
<textField pattern="EEEEE dd MMMMM yyyy">
    <reportElement x="0" y="0" width="100" height="20"/>
    <textElement/>
    <textFieldExpression><![CDATA[$F{date}]]></textFieldExpression>
</textField> 
```

结果将是：

![通过 iReport 中的预览获得结果](../Images/ba8b93887f919747816f8e059e72a034.png)

**注意**：它仅适用于*iReport*中的预览。

*   对于 Java 应用程序，您可以设置[**`JRParameter.REPORT_LOCALE`**](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JRParameter.html#REPORT_LOCALE)参数。

```
Map<String, Object> params = new HashMap<String, Object>(); 
params.put(JRParameter.REPORT_LOCALE, Locale.FRENCH); 
JasperFillManager.fillReportToFile(compiledReportName, params); 
```

对于使用这样的代码生成的报告，结果将是相同的。

* * *

工作示例*jrxml*文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...  whenNoDataType="AllSectionsNoDetail" ...>
    <parameter name="date" class="java.util.Date" isForPrompting="false">
        <defaultValueExpression><![CDATA[new Date()]]></defaultValueExpression>
    </parameter>
    <title>
        <band height="50">
            <textField pattern="EEEEE dd MMMMM yyyy">
                <reportElement x="200" y="11" width="228" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{date}]]></textFieldExpression>
            </textField>
        </band>
    </title>
</jasperReport> 
```

Java代码：

```
Map<String, Object> params = new HashMap<String, Object>();
params.put("date", new Date());
params.put(JRParameter.REPORT_LOCALE, Locale.FRENCH);

JasperReport jasperReport = JasperCompileManager.compileReport(reportSource);
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, params, connection);

JasperExportManager.exportReportToPdfFile(jasperPrint, outputFile); 
```

结果是：

![Adobe Reader 中生成的报告](../Images/de175ace4949dec976d0a3cbc92df8a1.png)

# sinatra - 如何鼓励 Pony 在使用 Pony 使用模板发送电子邮件时不要使用我的布局

> ID：12636569
> 
> 赞同：0
> 
> 时间：2012-09-28T08:43:11.077
> 
> 标签：sinatra, erb, pony

我这样发送：

```
Pony.mail :to => 'me@mine.com.au',
        :from => 'me@mine.com.au',
        :subject => 'Howdy, Partna!',
        :body => erb(:email) 
```

它工作得非常好，除了纯文本电子邮件到达时充满了布局 html

我如何告诉它不使用布局，只使用 email.erb 模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:24:53.027

```
Pony.mail :to => 'me@mine.com.au',
    :from => 'me@mine.com.au',
    :subject => 'Howdy, Partna!',
    :body => erb(:email, layout: false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:46:28.223

像这样

```
set :erb, :layout => false
body = erb (:_emailhtml )
Pony.mail :to => 'will@kindleman.com.au',
        :from => 'will@kindleman.com.au',
        :subject => 'Howdy, Partna!',            
        :html_body => body 
```

Pony / ruby​​ / sinatra 不喜欢将 erb (:_emailhtml) 直接放入 options 哈希中，并且需要在 erb 方法之前设置布局文件。

耶。

# c# - UML类图：这是怎么写抽象方法和属性？

> ID：12636575
> 
> 赞同：14
> 
> 时间：2012-09-28T08:43:51.440
> 
> 标签：c#, design-patterns, uml, class-design

当我第一次为一个小型 C# 项目创建 uml 类图时，我遇到了一些属性问题。最后，我只是在开始时将属性添加为变量`<<property>>`。现在我想知道如何用抽象方法解决这个问题？我应该`<<abstract>>`在方法中添加罚款吗？我在做这样的事情：

```
-----------------------------------
|           <<abstract>>          |
|             MyClass             |
-----------------------------------
|<<property>> + a : int           |
|<<property>> + b : string        |
-----------------------------------
|<<abstract>> # Job() : void      |
|<<abstract>> # Job2() : string   |
|- SomeNonAbstractMethod() : void |
----------------------------------- 
```

这可以吗？有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T09:06:50.273

每个“属性”实际上都是 UML2 中的一个属性。抽象方法以斜体文本显示（UML 对此有一个布尔值）。

您使用的符号称为关键字（简单方式）或刻板印象（更复杂）。如果您想将属性标记为某种“特殊”，那么可以像您一样使用关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-24T13:40:49.460

如果您使用 UMLet 来创建 UML 类，您可以简单地将您的类放在两个正斜杠之间： [![具有使用 UMLet 的抽象方法的 UML 抽象类](../Images/6939897d91a3943f32ac754a847eca2e.png)](https://i.stack.imgur.com/rIbLK.png)

希望对发现这篇文章并正在 UMLet 上寻找方法的任何人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:59:40.007

由于 UML 中没有属性，我认为这是强调属性应作为属性实现的可能解决方案。但是，您应该在使用图表的文档中记录此非标准关键字的用法。

另一种解决方案是创建一个约定，即所有公共属性都必须作为属性来实现（除非发生一些例外......）。

如果我没记错的话，抽象方法是使用斜体文本显示的。不过我不喜欢这种方法，因为它可能比你的图表更容易监督。它还可能取决于您的 UML 编辑器提供的可能性，我通常更喜欢调整编辑器的方法以与使用同一编辑器绘制的其他图表保持一致。

# jquery - 使用 jQuery 加载函数加载 html 文件时 CSS 文件不受影响

> ID：12636576
> 
> 赞同：1
> 
> 时间：2012-09-28T08:43:55.523
> 
> 标签：jquery, css, html, jquery-mobile

我想将 html 文件包含在另一个 html 文件中。我能够加载页面，但（jquery-mobile）css 不会影响包含的页面。

我想将登录功能与测试分开。所以我想这样实现。

请在下面找到代码。

测试.html

```
 <!DOCTYPE html>
 <html>
 <head>
 <meta charset="ISO-8859-1">
 <title>Application</title> 
 <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.1.1.css" />
 <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.1.1.css" />
 <link rel="stylesheet" type="text/css" href="css/jquery.mobile.theme-1.1.1.css" />
 <link rel="stylesheet" type="text/css" href="css/login.css" />

  <script type="text/javascript" src='js/jquery-1.8.2.js'></script>        
  <script type="text/javascript" src="js/jquery.mobile-1.1.1.js"></script>

<script type="text/javascript" src="js/login.js"></script>
<script type="text/javascript" src="js/test.js"></script>

 </head>
 <body> 
<div id="content"></div>        
 </body>
</html> 
```

测试.js

```
 $(document).ready(function(){
   user.loginDo();       
 }); 
```

登录.html

```
<div data-role="header" data-theme="b">
    <h1>Sign On</h1>    
</div>
<div id="logo_pos">
    <center><img src="images/test.jpg" alt="splash"/></center>
</div>
<div data-role="fieldcontain">
    <label for="userid" id="luserid" ><strong>UserId : </strong></label>
    <input type="text" name="userid" id="userid" value="" class="logon" placeholder="Username" required/>

</div>
<div data-role="fieldcontain">
    <label for="password" id="lpassword"><strong>Password :</strong></label>
    <input type="password" name="password" id="password" class="logon" value="" placeholder="Password" required/>
</div>

<div class="ui-body">
    <fieldset class="ui-grid-a">                            
        <div class="ui-block-a"><a data-role="button" id="loginbtn" data-theme="b">Login</a></div>                          
    </fieldset>
</div> 
```

登录.js

```
 user.loginDo = function() {
  console.log("Inside Login");
  $("#content").load("Login.html");
 }; 
```

我想将 jquery-mobile .css 应用到登录页面。请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:00:52.547

您可以使用它来重绘页面。

[http://archive.plugins.jquery.com/project/force_redraw](http://archive.plugins.jquery.com/project/force_redraw)

```
$("#content").forceRedraw(); 
```

# cordova - 未找到 Cordova.plist

> ID：12636578
> 
> 赞同：2
> 
> 时间：2012-09-28T08:44:01.660
> 
> 标签：cordova, phonegap-plugins, cordova-2.0.0

我只是“继承”了一个 PhoneGap 2.0.0 项目，我正在尝试添加一个插件。

问题是我没有 cordova.plist 也没有 phonegap.plist 也没有 *.plist 文件

任何人都知道这怎么可能？

该项目在 iPhone 和 Android 上运行，我们使用 PhoneGap Build

谢谢你们 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:22:45.533

至少对于android config.xml 已经接管了cordova.plist 文件。

因此 config.xml 上的新条目应该是：

<插件名称="org.apache.cordova.facebook.Connect" value="FacebookConnectPlugin" />

不行吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:25:25.967

您使用 PhoneGap Build，因此所有这些特定于平台的文件都由 PhoneGap Build 为您添加。

您要添加什么插件？我认为 PG Build 目前只支持 ChildBrowser 插件。如果您想使用任何其他插件，您需要为每个平台设置开发环境并自己创建应用程序包。

# javascript - 如何知道变量是否以 JavaScript 中的特殊字符开头？

> ID：12636580
> 
> 赞同：-1
> 
> 时间：2012-09-28T08:44:02.573
> 
> 标签：javascript, function

> **可能重复：**
> [Javascript StartsWith](https://stackoverflow.com/questions/646628/javascript-startswith)

我在 JavaScript 中有一个函数，它接受一个字符串作为参数。原型：

```
function activateTab(pageId, tabCtrl, divId, otherdivId1, otherdivId2, disName); 
```

我想检查最后一个参数是否`disName`以“com”开头。例如：“ComSomeName”或“ComSomeOtherName”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:49:24.100

```
if(disName.substring(0,3) == 'com') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:50:17.983

尝试这个

```
var n= disName.search("your string"); 
```

如果它返回 0 然后从你的字符串开始 如果它返回 -1 未找到

[http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_search](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_search) 首先尝试在谷歌搜索然后发布问题！

# asp.net-mvc - 如何使用 Automapper 上传复杂类型的图片（MVC + 实体框架）

> ID：12636581
> 
> 赞同：1
> 
> 时间：2012-09-28T08:44:04.327
> 
> 标签：asp.net-mvc, entity-framework, automapper

我有以下型号：

```
public abstract class PersonBase : EntityWithTypedId
    {
        public PersonBase()
        {
            this.ProfileImages = new List<ProfileImage>();
        }

        public string name;

        [Required]
        public string Name
        {
            get { return name; } 
            set
            {
                name = value;
                this.UrlFriendlyName = value.ToUrlFriendly();
            }
        }

        public string UrlFriendlyName { get; protected set; }

        [UIHint("UploadImage")]
        public List<ProfileImage> ProfileImages { get; set; }
    }

public class ProfileImage
        {
            public int PersonId { get; set; }

            public byte[] Image { get; set; }        
        } 
```

我的视图模型：

```
public class PersonDetailsViewModel
    {
        public string Name { get; set; }

        public IEnumerable<HttpPostedFilebase> ProfileImages { get; set; }
    } 
```

现在我的问题是，如何使用自动映射器映射它们？我的意思是 ProfileImage 还需要 PersonId（可以在插入时由实体框架插入）。我需要更改**ViewModel**中的命名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:10:59.550

我将假定 personId 是您编辑路线值的一部分。

```
[HttpPost]
public ActionResult Edit(int personId, PersonDetailsViewModel viewModel) {
    var entity = dbContext.//load entity by PersonId;
    AutoMapper.Map(viewModel, entity);
    dbContext.SaveChanges();
} 
```

在某处启动

```
AutoMapper.Create<PersonDetailsViewModel, PersonBase>();
AutoMapper.Create<HttpPostedFilebase, ProfileImage>()
    .ForMember(d => d.PersonId, opt => opt.Ignore())
    .ForMember(d => d.Image, opt => opt.MapFrom(s => {
        MemoryStream target = new MemoryStream();
        model.File.InputStream.CopyTo(target);
        return target.ToArray();
    }); 
```

如果您在 EF 中正确设置了个人/个人资料图像关系并且您打开了更改跟踪（默认情况下应该打开），EF 应该自动找出图像的 PersonId。

对于插入，它也应该可以正常工作，EF 在 personId 周围进行繁重的工作，您可能需要自己创建人员实体并首先将其添加到上下文中，但不是必须的。

```
public ActionResult Add(PersonDetailsViewModel viewModel) {
    var entity = new PersonBase();
    dbContext.Add(entity);
    AutoMapper.Map(viewModel, entity);
    dbContext.SaveChanges();
} 
```

当尝试更新/删除现有的配置文件图像而不是每次都添加它们时，它会变得有点棘手，我有另一个 stackoverflow 答案更详细地介绍了 -[当使用 DTO、Automapper 和 Nhibernate 时，反映了 DTO 的子集合的变化正在更新的域对象](https://stackoverflow.com/questions/9739568/when-using-dtos-automapper-nhibernate-reflecting-changes-in-child-collections/9856360#9856360)

# android - 我如何知道手机是否支持将应用程序移至 sdcard/internal？

> ID：12636583
> 
> 赞同：0
> 
> 时间：2012-09-28T08:44:04.497
> 
> 标签：android

> **可能重复：**
> [如何检查应用程序是否可以移动到 sd](https://stackoverflow.com/questions/6141592/how-can-i-check-the-app-is-movable-to-sd-or-not)

如标题所述，某些设备不支持此功能，例如。银河系。有没有办法以编程方式检查这个？（在 InstalledAppDetails.java 中）。

# php - {${phpinfo()}} 叫什么？（远程命令执行相关）

> ID：12636586
> 
> 赞同：11
> 
> 时间：2012-09-28T08:44:15.730
> 
> 标签：php, security, code-injection

我希望有人可以为我回答这个问题，因为我对此已经相当好奇了一段时间，但似乎无法获得答案。但是，我相信这里有人可以做到，因为这里有一些非常聪明的人。

现在，问题。我将使用远程命令执行漏洞作为示例。

```
<?php echo preg_replace('/(.*)/e', 'strtoupper("\\1")', $argv[1]); ?> 
```

例如，为了利用这一点，攻击者只需输入即可`{${phpinfo()}}`。我的问题如下：

1.  大括号是做什么用的`{}`，为什么它看起来像一个变量？
2.  它有某种名称吗？我不相信这是一个变量函数，因为它们是不同的，不是吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T09:00:07.960

这是[复杂（卷曲）语法](http://php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)。

> ****{$}****中的函数、方法调用、静态类变量和类常量**从 PHP 5 开始工作。但是，访问的值将被解释为定义字符串的范围内的变量名称。**使用单个花括号 ({}) 将无法**访问函数或方法的返回值或类常量或静态类变量的值。**

 **所以，对于一个简单的变量， single`{}`可以工作，就像`"{$foo}"`，但是`phpinfo()`是一个函数，当你需要调用它时，你需要两个`{}`，你的例子`"{${phpinfo()}}"`，它将调用`phpinfo()`函数。

这就是***不鼓励***`e`使用修饰符的原因，例如，想象这个

 *`{${eval($_GET['php_code'])}}`，这使攻击者能够执行任意 PHP 代码，从而使他几乎可以完全访问您的服务器。

为了防止这种情况，请`preg_replace_callback()`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T08:56:23.943

它称为“复杂（卷曲）语法”希望此链接对您有所帮助：

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)***

# django - 缓存查询集和过滤疑问

> ID：12636591
> 
> 赞同：3
> 
> 时间：2012-09-28T08:44:27.597
> 
> 标签：django, django-models, django-orm, django-cache

我正在开发一个需要我过滤大量记录的应用程序。我一直在阅读有关缓存 QuerySet 和相关内容的信息，并找到了一些很好的材料。例如：

[在 django 中缓存查询结果](https://stackoverflow.com/questions/4631865/caching-query-results-in-django) [https://docs.djangoproject.com/en/dev/topics/db/queries/#caching-and-querysets](https://docs.djangoproject.com/en/dev/topics/db/queries/#caching-and-querysets)

还有一些关于 QuerySet 工作等的事情。 [https://docs.djangoproject.com/en/dev/topics/db/optimization/#understand-queryset-evaluation](https://docs.djangoproject.com/en/dev/topics/db/optimization/#understand-queryset-evaluation) [https://docs.djangoproject.com/en/dev/ref/models /querysets/#django.db.models.query.QuerySet.iterator](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.iterator)

不过有些事情还不清楚。

在我的应用程序中，它有点像这样：[我确实有验证等，这里没有写]

```
qs = MyModel.objects.filter(Q( <initial_filter_to_narrow_down_size>  ))

#I let user to specify other filters and I use qs further

q_object = Q(< [using user_made_filters].pop()> )
for filter in user_made_filters:
    q_object |= Q( <using filter> )

qs = qs.filter(q_object) 
```

可以有 n 个 user_made_filters。对于其中一些，我需要使用 &= 而不是 |=。

问题：- 1]

```
qs = MyModel.objects.filter(Q(<initial_filter_to_narrow_down_size>)) 
```

在此之后，我希望将此 qs 放入缓存中以备后用。我想在不访问数据库的情况下应用所有其他过滤器。就像是

```
cache.set('qs', qs) 
```

但是当我执行 qs = qs.filter(q_object) 时会发生什么？缓存会被修改吗？我不想要那个。我希望 qs 保持不变，直到我更新它。在这种情况下我该怎么办？

2] 就像我之前说的，我生成 OR'ed 或 ANDed Q 对象，我继续做 **qs = qs.filter(q_object)。** 我这样做是因为我一次找到了类似类型的过滤器，应用它们然后获取另一种类型的过滤器并继续。我还需要优先考虑一些过滤器。它们将首先应用，然后再应用其余部分。有什么区别：问这个是因为在我的想法中我的qs是类型（a）。

```
(a) MyModel.objects.filter( Q(condition1) ).filter( Q(condition2) ) and
(b) MyModel.objects.filter( Q(condition1) & Q(condition2) ) ? 
```

我的意思是当 qs 最终被评估时，django 会按照 (a) 进行评估吗？还是会结合所有过滤器并像 (b) 一样评估它？

问候，

*ps- 2-3 小时内无法回复。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:16:46.723

1）不，缓存值不会被修改，除非你重新设置它。
2）是的，应用两个过滤器就像对它们进行ANDing。您可以通过编写以下代码来验证两个查询集是否生成完全相同的 sql：

```
qs1 = MyModel.objects.filter( Q(condition1) ).filter( Q(condition2) )
qs2 = MyModel.objects.filter( Q(condition1) & Q(condition2) )
unicode(qs1.query) == unicode(qs2.query) 
```

# c++ - C++ 的异步帮助程序库

> ID：12636592
> 
> 赞同：2
> 
> 时间：2012-09-28T08:44:27.973
> 
> 标签：c++, boost-asio

最近几天我在编程 node.js 并且大量使用了异步[库](https://github.com/caolan/async)。它是一个库，它引入了处理异步编程中常见工作流的函数。有些函数并行或依次运行异步调用，并在所有函数完成（或发生错误）后调用单个回调。

有没有这样的 C++ 库？

我真的很喜欢异步编程，但是大量的回调（它们都带有错误处理等）真的很难阅读和维护，而且有点难看。我很想继续以我使用异步库的方式进行编码。

我想这样的库更难用像 C++ 这样动态类型较少的语言来实现。

PS：也欢迎提出如何使异步代码更漂亮的建议。

编辑：我在 C++11 中使用 g++。

编辑2：“异步”意味着在这种情况下使用带有回调的非阻塞函数，而不是在后台运行并行线程。一个例子是 boost:asio。

编辑 3：我已经在使用 boost::asio 并希望使用这样的库来增强代码的可读性（控制流的清晰度，...）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T18:11:58.967

正如您必须知道的那样，鉴于您正在使用它，boost.asio 让您成为其中的一部分。但它不会是一样的。让我解释一下为什么。

node 和 asio 都是围绕 proactor 的思想设计的。如果您想做一些阻塞（或只是缓慢）的事情，您将作业提交给前摄器，它会在适当的时候运行，然后在完成时调用您的回调。

但是在节点中，*一切*都经过前摄器；没有其他类型的异步 API。如果您想与 MySQL 数据库通信，该接口将采用 SQL 语句并使用行集回叫您。在 C++ 中，接口接受一条 SQL 语句，或者在给你一个游标之前阻塞，或者给你一个可以轮询或阻塞的对象。对于文件和套接字，您可以忽略所有其他 API，例如`select`或`aio_read`因为 asio 具有完整的包装器，但对于几乎所有其他东西，您必须完成编写包装器的工作，而且通常需要做很多工作。

更严重的是，node 中的标准回调接口是`callback(error, result)`，其中`result`是一个 JS 对象，可以有任何合适的成员。asio 中的标准回调接口是`void callback(const error_code&)`，这里*没有*结果。您将可变对象绑定到任务中。这已经使控制流变得更加笨拙，因为一个对象不可能在不知道其前身如何隐藏其可变数据的情况下跟随另一个对象。这也意味着您需要共享可变数据（与节点不同，它可以跨线程共享），无论您是否愿意。但当然最大的问题是数据是静态类型的。（通常人们构建 C++ 类，并通过将任务绑定到同一对象的方法来共享状态，但这实际上并不是必需的。）

当然，您可以编写代码以在 C++ 中实现完全动态的对象（或者可能只使用一级动态性，例如 a`vector<boost::any>`就足够了），但它仍然比在 JS 中使用起来更笨拙，而且您将放弃很多您希望通过迁移到 C++ 获得的性能优势。

`void async::waterfall(vector<void(const error_code&)>> tasks)`因此，编写与完全相同的函数会很容易`async.waterfall(tasks)`，但它不会为您带来您正在寻找的所有相同的好处。

要考虑的另一点是，您切换到 C++ 是有原因的：您使用的是一个缓慢、资源受限的系统。使用前摄器来实现数据并行性，相当于`async.forEach`，并非不可行，但它不会像普通的旧线程池和知道如何使用它的并行库那样高效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T08:56:46.480

只需使用 C++。`std::async`做这项工作。不需要标准 C++ 库（需要 C++11，已经在多个编译器中实现）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T09:00:24.263

当谈到异步和 C++ 时，我想到了[asio 。](http://think-async.com/)该库专注于异步 I/O，但也允许编写自定义“服务”以与框架一起使用（如[本示例](http://think-async.com/Asio/asio-1.5.3/doc/asio/examples.html#asio.examples.services)所示）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T09:08:08.163

虽然我个人会接受 Walter 对 C++11 标准库的推荐，但我还想指出

[提升亚西欧](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html)

为了完整性。

# javascript - 按字母顺序排列歌曲列表不区分大小写

> ID：12636596
> 
> 赞同：1
> 
> 时间：2012-09-28T08:44:39.243
> 
> 标签：javascript, sqlite

我正在按照代码按字母顺序显示歌曲列表

```
function getSongsIn(key, value)
{
    var query= "SELECT * FROM Songs where " + key + "=\"" + value + "\"ORDER BY title ;" ; 
    SongsDB.transaction(function (tx) {
        //tx.executeSql(query,[],showSongsIn,onError);
        tx.executeSql(query,[],showSongs,onError);
        }); 
} 
```

上面的代码导致区分大小写的排列。谁能建议我让它不区分大小写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:02:04.147

这对我有用：

```
ORDER BY upper(title) 
```

# youtube-api - 使用 oembed 设置 wmode

> ID：12636598
> 
> 赞同：0
> 
> 时间：2012-09-28T08:44:43.017
> 
> 标签：youtube-api

您可以使用 oembed 设置 wmode 吗？Vimeo 似乎支持它，但 youtube 似乎没有任何可用的文档来指定可用的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:49:28.027

不幸的是，我们不太支持初始请求的参数，这些参数会影响您返回的响应类型。

您必须手动编辑从 YouTube oEmbed 服务返回的响应以添加该参数。（这显然部分违背了使用 oEmbed 的目的。）

# emacs - 未检测到电对模式

> ID：12636599
> 
> 赞同：2
> 
> 时间：2012-09-28T08:44:49.300
> 
> 标签：emacs, elisp

我无法使用以下命令在 emacs 中激活电对模式：

```
 M-x electric-pair-mode 
```

即使是类似的东西`M-x describe-function electric-pair-mode`也不起作用。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:06:14.813

您可能想改用[paredit 模式](http://emacswiki.org/emacs/ParEdit)。

您可以按照他们的文档中的说明为某些模式启用它。或者您可以为所有模式启用它：

```
(load-file (expand-file-name "/path/to/paredit.el"))
(mapc (lambda (mode)
    (let ((hook (intern (concat (symbol-name mode)
                    "-mode-hook"))))
      (add-hook hook (lambda () (paredit-mode +1)))))
      '(emacs-lisp lisp inferior-lisp)) 
```

或者切换到 emacs 24，其中 electic-pair-mode 包含在发行版中。

编辑：回答你的问题。花括号在他们的代码中定义：

```
(define-paredit-pair ?\( ?\) "round")
(define-paredit-pair ?\[ ?\] "square")
(define-paredit-pair ?\{ ?\} "curly")
(define-paredit-pair ?\< ?\> "angled") 
```

如果它对您不起作用，您可能与另一个次要模式发生冲突。如果您调用 ，则会在开头列出启用的次要模式`M-x describe-mode`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T17:16:34.593

它是 Emacs-24.1 中的新功能（并且依赖于 Emacs-24.1 的一个新特性，因此您不能只在 Emacs<24 中使用 Emacs-24 的electric.el）。

# ruby-on-rails - 查找两个日期之间的工作日数

> ID：12636605
> 
> 赞同：2
> 
> 时间：2012-09-28T08:45:33.390
> 
> 标签：ruby-on-rails, ruby

我有一个对象，它有一个名为 Effective_date 的属性，它是 Date 类型。
从今天开始，我必须在对象有效日期前 3 个工作日完成任务。

示例：如果有效日期是 2012 年 9 月 29 日星期六，我必须在 2012 年 9 月 25 日星期二执行一项任务。即星期六前 3 个工作日。.

如果有效日期是 2012 年 9 月 30 日星期日，我必须在 2012 年 9 月 26 日星期三完成一项任务。即星期六前 3 个工作日。

如果有效日期是 2012 年 9 月 28 日星期五，我必须在 2012 年 9 月 25 日星期二完成一项任务。即星期六前 3 个工作日。（周三、周四、周五）

我尝试了一些代码，但它不适用于所有情况。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:09:38.697

查看[工作日宝石](https://github.com/mdarby/weekdays)。它允许你做类似的事情

```
>> -3.weekdays_from(Date.civil(2012,9,28))
=> Tue, 25 Sep 2012
>> -3.weekdays_from(Date.civil(2012,9,29))
=> Wed, 26 Sep 2012
>> -3.weekdays_from(Date.civil(2012,9,30))
=> Wed, 26 Sep 2012 
```

或者也许是使用不同语法做同样事情的[business_time gem](https://github.com/bokmann/business_time)：

```
>> 3.business_days.before(Date.civil(2012,9,28))
=> 2012-09-25 00:00:00 +0200
>> 3.business_days.before(Date.civil(2012,9,29))
=> 2012-09-26 00:00:00 +0200
>> 3.business_days.before(Date.civil(2012,9,30))
=> 2012-09-26 00:00:00 +0200 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:17:44.727

您可以遍历天数，边走边算，例如计算 9 月 26 日到 30 日之间的工作日数

```
(Date::civil(2012,9,26)..Date::civil(2012,9,30)).count {|date| date.wday >= 1 && date.wday <= 5} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:20:34.837

阅读 gems 的作用，你也可以做你自己的 helper 方法：

```
require 'active_support/core'

module Weekdays
  WD_AGO_DIFF = Hash.new(1).merge(1=>3, 0=>2)
  WD_FROM_DIFF = Hash.new(1).merge(5=>3, 6=>2)
  def weekdays_before(date=Time.now)
    self.times.inject(date) { |d| d - WD_AGO_DIFF[d.wday].days }
  end
  def weekdays_after(date=Time.now)
    self.times.inject(date) { |d| d + WD_FROM_DIFF[d.wday].days }
  end
end

class Fixnum
  include Weekdays
end

6.times do |n|
  p [n, n.weekdays_before, n.weekdays_after]
end 
```

# iphone - iOS 6 的 PayPal 问题

> ID：12636608
> 
> 赞同：0
> 
> 时间：2012-09-28T08:45:49.687
> 
> 标签：iphone, paypal, ios6

在将 PayPal 与 iOS 6 集成时遇到问题。当我将 PayPal 库与我的代码集成并构建应用程序时，构建代码后出现以下错误。

错误：

> 开发人员错误：此应用未使用受支持的 PayPal 库版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T00:05:09.213

现在有一个新的 SDK 来支持 iOS。请参阅[https://developer.paypal.com/webapps/developer/docs/integration/mobile/ios-integration-guide/](https://developer.paypal.com/webapps/developer/docs/integration/mobile/ios-integration-guide/)

# moving-average - 如何在不保留计数和数据总数的情况下计算移动平均线？

> ID：12636613
> 
> 赞同：144
> 
> 时间：2012-09-28T08:46:10.473
> 
> 标签：moving-average

我正在尝试找到一种方法来计算移动累积平均值，而不存储迄今为止收到的计数和总数据。

我想出了两种算法，但都需要存储计数：

*   新平均值 = ((旧计数 * 旧数据) + 下一个数据) / 下一个计数
*   新平均值 = 旧平均值 +（下一个数据 - 旧平均值）​​/下一个计数

这些方法的问题是计数越来越大，导致结果平均值的精度下降。

第一种方法使用明显相差 1 的旧计数和下一个计数。这让我想到也许有一种方法可以删除计数，但不幸的是我还没有找到它。它确实让我更进一步，导致第二种方法，但仍然存在计数。

有可能吗，还是我只是在寻找不可能的事情？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-05-26T08:49:41.687

你可以简单地做：

```
double approxRollingAverage (double avg, double new_sample) {

    avg -= avg / N;
    avg += new_sample / N;

    return avg;
} 
```

`N`您想要平均的样本数量在哪里。请注意，此近似值等效于指数移动平均线。请参阅：[在 C++ 中计算滚动/移动平均值](https://stackoverflow.com/questions/10990618/calculate-rolling-moving-average-in-c-or-c/10990656#10990656)

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2014-05-06T11:41:16.917

```
New average = old average * (n-1)/n + new value /n 
```

这是假设计数仅更改一个值。如果它被 M 值更改，则：

```
new average = old average * (n-len(M))/n + (sum of values in M)/n). 
```

这是数学公式（我相信是最有效的），相信你可以自己做进一步的代码

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2016-06-15T08:35:47.910

来自关于运行样本方差计算[的博客](http://www.johndcook.com/blog/standard_deviation/ "准确计算运行方差")，其中平均值也是使用[Welford 方法计算的](https://en.wikipedia.org/wiki/Algorithms_for_calculating_variance#Online)：

[![在此处输入图像描述](../Images/8ba549611236f2fc1493cb72d0671dae.png)](https://i.stack.imgur.com/QrXBH.png)

太糟糕了，我们不能上传 SVG 图像。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2018-06-14T09:35:30.600

这是另一个答案，提供了关于*Muis*、*Abdullah Al-Ageel*和*Flip*的答案在**数学上都是相同的东西的**评论，只是写法不同。

当然，我们有*José Manuel Ramos*的分析解释了舍入误差对每个错误的影响略有不同，但这取决于实现，并且会根据每个答案应用于代码的方式而改变。

### 不过还是有很大区别的

它在*Muis*的`N`、*Flip*的`k`和*Abdullah Al-Ageel*的`n`。 *Abdullah Al-Ageel*并没有完全解释`n`应该是什么，但`N`不同`k`的`N`是“*你想要平均的样本数*”，而`k`采样值的计数。（虽然我怀疑调用`N` *样本数量*是否准确。）

在这里，我们得出下面的答案。它基本上与其他旧***指数加权移动平均线***相同，因此如果您正在寻找替代方案，请在此处停止。

### 指数加权移动平均线

最初：

```
average = 0
counter = 0 
```

对于每个值：

```
counter += 1
average = average + (value - average) / min(counter, FACTOR) 
```

区别在于`min(counter, FACTOR)`部分。这和说的一样`min(Flip's k, Muis's N)`。

`FACTOR`是一个常数，它影响平均“赶上”最新趋势的速度。数字越小速度越快。（此时`1`它不再是平均值，而是成为最新值。）

这个答案需要运行计数器`counter`。如果有问题，`min(counter, FACTOR)`可以将其替换为 just `FACTOR`，将其变成*Muis*的答案。这样做的问题是移动平均线受到`average`初始化的任何影响。如果将其初始化为`0`，则该零可能需要很长时间才能超出平均值。

### 它最终看起来如何

[![指数移动平均线](../Images/c27a5d33fa8f57dd43c5616a9575a69e.png)](https://i.stack.imgur.com/ubp9A.png)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-10-11T07:54:59.103

Flip 的答案在计算上比 Muis 的答案更一致。

使用双数格式，您可以看到 Muis 方法中的舍入问题：

[![缪斯方法](../Images/20782c31bb8d2d9c6272020433b04213.png)](https://i.stack.imgur.com/pxrUL.png)

当您进行除法和减法时，会在先前存储的值中出现舍入，从而更改它。

但是，翻转方法保留了存储值并减少了除法次数，因此减少了舍入，并最小化了传播到存储值的误差。如果有要添加的内容，则仅添加会带来舍入（当 N 很大时，无需添加任何内容）

[![翻转方法](../Images/de3c154dedacfe79dd1a1471324d470b.png)](https://i.stack.imgur.com/k2IVd.png)

当你对大值取平均值时，这些变化是显着的，它们的平均值趋于零。

我使用电子表格程序向您展示结果：

首先，得到的结果：[![结果](../Images/04ef7364bf30ed25468ab32ee446e97e.png)](https://i.stack.imgur.com/TJ5S7.png)

A 和 B 列分别是 n 和 X_n 值。

C 列是 Flip 方法，D 列是 Muis 方法，结果存储在均值中。E 列对应于计算中使用的中间值。

下一张显示偶数平均值的图表：

[![图形](../Images/376bcd341fdac9774616cb16c11c0982.png)](https://i.stack.imgur.com/E88gH.jpg)

如您所见，两种方法之间存在很大差异。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-08-11T15:57:35.683

一个使用 javascript 的示例，用于比较：

[https://jsfiddle.net/drzaus/Lxsa4rpz/](https://jsfiddle.net/drzaus/Lxsa4rpz/)

```
function calcNormalAvg(list) {
    // sum(list) / len(list)
    return list.reduce(function(a, b) { return a + b; }) / list.length;
}
function calcRunningAvg(previousAverage, currentNumber, index) {
    // [ avg' * (n-1) + x ] / n
    return ( previousAverage * (index - 1) + currentNumber ) / index;
} 
```

```
(function(){
  // populate base list
var list = [];
function getSeedNumber() { return Math.random()*100; }
for(var i = 0; i < 50; i++) list.push( getSeedNumber() );

  // our calculation functions, for comparison
function calcNormalAvg(list) {
  	// sum(list) / len(list)
	return list.reduce(function(a, b) { return a + b; }) / list.length;
}
function calcRunningAvg(previousAverage, currentNumber, index) {
  	// [ avg' * (n-1) + x ] / n
	return ( previousAverage * (index - 1) + currentNumber ) / index;
}
  function calcMovingAvg(accumulator, new_value, alpha) {
  	return (alpha * new_value) + (1.0 - alpha) * accumulator;
}

  // start our baseline
var baseAvg = calcNormalAvg(list);
var runningAvg = baseAvg, movingAvg = baseAvg;
console.log('base avg: %d', baseAvg);

  var okay = true;

  // table of output, cleaner console view
  var results = [];

  // add 10 more numbers to the list and compare calculations
for(var n = list.length, i = 0; i < 10; i++, n++) {
	var newNumber = getSeedNumber();

	runningAvg = calcRunningAvg(runningAvg, newNumber, n+1);
	movingAvg = calcMovingAvg(movingAvg, newNumber, 1/(n+1));

	list.push(newNumber);
	baseAvg = calcNormalAvg(list);

	// assert and inspect
	console.log('added [%d] to list at pos %d, running avg = %d vs. regular avg = %d (%s), vs. moving avg = %d (%s)'
		, newNumber, list.length, runningAvg, baseAvg, runningAvg == baseAvg, movingAvg, movingAvg == baseAvg
	)
results.push( {x: newNumber, n:list.length, regular: baseAvg, running: runningAvg, moving: movingAvg, eqRun: baseAvg == runningAvg, eqMov: baseAvg == movingAvg } );

if(runningAvg != baseAvg) console.warn('Fail!');
okay = okay && (runningAvg == baseAvg);    
}

  console.log('Everything matched for running avg? %s', okay);
  if(console.table) console.table(results);
})();
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-07-07T05:21:25.117

基于上述答案的简洁 Python 解决方案：

```
class RunningAverage():
    def __init__(self):
        self.average = 0
        self.n = 0

    def __call__(self, new_value):
        self.n += 1
        self.average = (self.average * (self.n-1) + new_value) / self.n 

    def __float__(self):
        return self.average

    def __repr__(self):
        return "average: " + str(self.average) 
```

用法：

```
x = RunningAverage()
x(0)
x(2)
x(4)
print(x) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-01-09T16:53:15.033

在 Java8 中：

```
LongSummaryStatistics movingAverage = new LongSummaryStatistics();
movingAverage.accept(new data);
...
average = movingAverage.getAverage(); 
```

你也有`IntSummaryStatistics`，`DoubleSummaryStatistics`...

# python - Python：将 F3、F10 作为 Windows 中 exe 文件的输入

> ID：12636615
> 
> 赞同：0
> 
> 时间：2012-09-28T08:46:20.987
> 
> 标签：python, windows, subprocess, popen

我需要使用 python 将输入作为 F3 (0x72) 输入到 windows 中的 exe 文件。我使用 Popen 命令在其中发出命令。谁能指导我？

您可以在此处找到该程序的详细信息： [如何使用子进程和 Popen 从我的 .exe 获取所有输出？](https://stackoverflow.com/questions/12600892/how-do-i-get-all-of-the-output-from-my-exe-using-subprocess-and-popen)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:40:47.630

答案取决于“exe 文件”是 Win32 GUI 应用程序还是控制台应用程序。

如果它是一个 GUI 应用程序，您不仅需要“在运行时在 exe 文件中输入 F3 和 F10”，还需要在应用程序处于活动状态时将它们输入到应用程序的*主窗口*中。如果它是一个控制台应用程序，您需要知道它读取键盘的各种不同方式中的哪一种并执行适当的操作 - 或者您可以在控制台窗口处于活动状态时将它们输入到控制台窗口。

如果您可以假设适当的窗口处于活动状态，请查看[SendKeys](http://www.rutherfurd.net/python/sendkeys/index.html)，这是一个低级模块，旨在将击键组合发送到前台的任何窗口：

```
SendKeys('{F3}') 
```

如果你需要更多的控制——例如，如果你需要工作，即使应用程序不在前台——有六个左右的 Python 的“窗口自动化库”。它们都不像 AutoIt 那样好，但如果你需要使用 Python，它们也不错。例如，使用[pywinauto](http://code.google.com/p/pywinauto/)，你想要做的伪代码是这样的：

```
app = application.find("foo.exe")
wnd = app.TheAppWindow # assuming the app's main window has a title similar to "The App Window"
wnd.TypeKeys('{F3}') 
```

当然，除非您需要与 GUI 交互，否则您不会从这样的库中获得太多好处——打开名为“Edit | Find”的菜单项，在“Find”窗口的第一个编辑框中键入“foo” ，单击标有“下一步”的按钮，在主窗口中获取选定的文本等。

最后，您始终可以下拉到低级别并通过[PyWin32](http://starship.python.net/crew/mhammond/win32/)进行 Win32API 调用。伪代码是：

```
hwnd = win32gui.FindWindowEx(0, 0, 'TheAppClass', 'The App Window')
win32gui.PostMessage(hwnd, WM_KEYDOWN, VK_F3, 0)
win32gui.PostMessage(hwnd, WM_KEYUP, VK_F3, 0) 
```

并不复杂，只是现在您需要确切的窗口名称和窗口类。（要找到它，请使用任何免费的“窗口资源管理器”工具；我认为 Visual C++ Express 仍然带有一个。）

这样做的好处是你确切地知道发生了什么，这可以使问题更容易调试——这也意味着你可以利用 MSDN 上的详细文档（尽管 PyWin32 本身带有一些相当不错的文档，所以你经常不这样做'不必）。

# maven - mvn -Dxy.skip=true 没有效果

> ID：12636617
> 
> 赞同：1
> 
> 时间：2012-09-28T08:46:25.577
> 
> 标签：maven

许多 maven 插件都有一个配置选项“skip”，它应该跳过插件的执行。似乎在命令行上设置这些选项没有效果：

```
[james@JAMES-PC ~/er]$ mvn clean test -Dpmd.skip=true -Dlicense.skip=true
[INFO] Scanning for projects...

... etc.etc.

[INFO]
[INFO] --- maven-license-plugin:1.4.0:check (check-headers) @ eranger ---
[INFO] Checking licenses...
[INFO]
[INFO] >>> maven-pmd-plugin:2.7.1:check (pmd-check) @ eranger >>>
[INFO]
[INFO] --- maven-pmd-plugin:2.7.1:pmd (pmd) @ eranger ---
[INFO]
[INFO] <<< maven-pmd-plugin:2.7.1:check (pmd-check) @ eranger <<<
[INFO]
[INFO] --- maven-pmd-plugin:2.7.1:check (pmd-check) @ eranger ---

... etc.etc. 
```

pmd 和许可插件仍然被执行。任何想法如何真正跳过它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:51:37.377

插件已加载但未完全执行；否则，您会看到 PMD 分析您的代码的大量输出。

发生这种情况的原因是该选项`pmd.skip`是由 PMD 插件本身评估的，因此 Maven 必须加载它。该插件将检查该选项并立即退出。

如果这对您来说仍然太多，请将插件移动到[配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)中。

**[编辑]**由于 maven-license-plugin 应该支持`skip`（[请参阅文档](http://code.google.com/p/maven-license-plugin/wiki/Configuration#maven-license-plugin_configuration_options)），您可能发现了一个错误。

我建议：

1.  提交错误报告
2.  将插件移动到配置文件中（见上文）

# javascript - 如何在 AppleScript 中执行 JavaScript 函数？

> ID：12636618
> 
> 赞同：1
> 
> 时间：2012-09-28T08:46:26.260
> 
> 标签：javascript, applescript

我用脚本编辑器尝试了这个苹果脚本。但是，当手动单击它时，它不会将我带到通常去的页面。似乎什么都不做:(

```
do JavaScript "doCallerPage('FORM_PAGE', 'FR_AN', '/as/an/Check.do');return false;" in document 1 
```

HTML 源代码中的链接

```
<a id="LNK0001" href="javascript:void(0);" onclick="doCallerPage('FORM_PAGE', 'FR_AN', '/as/an/Check.do');return false;">Check Page</a> 
```

JavaScript 函数

```
function doCallerPage(formName, target, actionPath, _action, _t) {
        if (actionPath == "") {
            return false;
        }

        if (target && target != "_self") {
            checkSubWindow(target);
        }
        if (document.FORM_PAGE.ctrlflg.value == "") {
            if (_action) {
                document.FORM_PAGE._ACTION.value = _action;
            }
            else if (!_action) {
                document.FORM_PAGE._ACTION.value = "";
            }
        }
        if (_t) {
            document.FORM_PAGE._T.value = _t;
        }
        else {
            document.FORM_PAGE._T.value = "";
        }
        document.FORM_PAGE.action = actionPath;
        document.FORM_PAGE.target = target;
        document.FORM_PAGE.submit();
        document.FORM_PAGE._P.value = "";
        document.FORM_PAGE._T.value = "";
        document.FORM_PAGE._ACTION.value = "";
        document.FORM_PAGE.ctrlflg.value = "";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-25T14:21:56.343

语法有点不同，它必须是 javascript。在 Chrome 上使用 jQuery 可以这样完成：

`tell application "Google Chrome" activate set jq to do shell script "curl https://code.jquery.com/jquery-latest.min.js" execute front window's active tab javascript jq execute front window's active tab javascript "jQuery('body').css({'color':'blue'});" end tell`

香草JS：

`tell application "Google Chrome" activate execute front window's active tab javascript "if (window.console) console.log( 'hi' );" end tell`

在发生这种情况时，您可以在其他应用程序中执行其他操作，只要浏览器窗口保持原样直到脚本完成，脚本就会执行。

# php - php限制邮件()

> ID：12636621
> 
> 赞同：0
> 
> 时间：2012-09-28T08:46:34.337
> 
> 标签：php, email

这可能很容易，但我看不到路。我身边有一个购物车，用户可以在那里买东西。为此，买家可以将他的电子邮件地址输入到输入表单中。订单通过 php 发送`mail()`给店主和买家。

我正在寻找一种方法来限制邮件只发送两封电子邮件，以防止垃圾邮件。我看到垃圾邮件发送者可能会输入这样的分号字符串：

```
email@examplecom;email@xxyz.com;hans@jdkdl.com 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T08:50:38.017

你不能使用 .

```
$validemail = filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);
if ($validemail) {
  $headers .= "Reply-to: $validemail\r\n";
}else
{
//redirect.
} 
```

考虑到您的实际问题。

```
<?php
$emails = explode(';',$emailList);
if(count ($emails)<3)
{
if(filter_var_array($emails, FILTER_VALIDATE_EMAIL))
    {
    mail();
    }
  else
    {
    //die    
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:48:37.090

您可以像这样检查字符串中的电子邮件数量：

```
if(count(explode(';',$emailList))<3)
{
    // send email
}
else
{
    // Oh no, jumbo!
} 
```

此代码将根据字符将您的电子邮件字符串[分解](http://php.net/manual/en/function.explode.php)`;`为数组，同时在数组上使用[计数](http://au.php.net/manual/en/function.count.php)函数并根据数字执行两种方案之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:49:31.220

这应该只能选择最多两封电子邮件（前两封）：

```
$emailString = "email@examplecom;email@xxyz.com;hans@jdkdl.com";
$emails = explode(";", $emailString);
$emails = array_slice($emails, 0, 2);
$emailString = implode(";", $emails);
var_dump($emailString); 
```

输出：

```
string(31) "email@examplecom;email@xxyz.com" 
```

# python - 无法启动 Scrapyd

> ID：12636631
> 
> 赞同：0
> 
> 时间：2012-09-28T08:48:19.897
> 
> 标签：python, scrapy

当我想在一个scrapy项目中启动scrapyd时。我得到错误：

`server: error: Scrapyd is not available in this system`

我通过源码包安装scrapy，命令`scrapy version -v`显示如下信息：

```
Scrapy  : 0.15.1
lxml    : 2.3.4.0
libxml2 : 2.7.8
Twisted : 12.0.0
Python  : 2.7.3 (default, Jun  3 2012, 12:07:40) - [GCC 4.1.2 20071124 (Red Hat 4.1.2-42)]
Platform: Linux-2.6.18-92.el5-x86_64-with-redhat-5.2-Tikanga 
```

我检查了安装的包，scrapyd 文件夹与scrapy 文件夹并行存在。所有像 script.py 这样的文件都存在。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:00:28.070

Scrapy 守护程序`scrapyd`（所以你需要安装这两个包：

```
$ aptitude install scrapy-0.14
$ aptitude install scrapyd-0.14 
```

在 RedHat 中它会是类似的，比如：

```
$ rpm -i scrapy-0.14.rpm
$ rpm -i scrapyd-0.14.rpm 
```

# c# - Twitter 使用异步获取 request_token 问题 - 401 错误

> ID：12636632
> 
> 赞同：0
> 
> 时间：2012-09-28T08:48:23.610
> 
> 标签：c#, twitter, asynchronous

我在从 Twitter 异步获取请求令牌时遇到问题 - 服务器返回“远程服务器返回错误：(401) 未经授权。”

这是我正在使用的代码 -

```
public void AcquireRequestToken(Action<bool> response)
{

    string oauth_nonce = Convert.ToBase64String(new ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()));

    // build the signature
    var headers = new Dictionary<string,string>()
    {
        { "oauth_consumer_key", _oAuthConfig.ConsumerKey },
        { "oauth_nonce", oauth_nonce },
        { "oauth_signature_method", "HMAC-SHA1" },
        { "oauth_timestamp", MakeTimestamp() },
        { "oauth_version", "1.0" },
        { "oauth_callback", PercentEncode(_oAuthConfig.Callback) },
    };

    string signature = MakeSignature ("POST", _oAuthConfig.RequestTokenUrl, headers);
    string compositeSigningKey = MakeSigningKey(_oAuthConfig.ConsumerSecret, null);
    string oauth_signature = MakeOAuthSignature(compositeSigningKey, signature);

    Uri fullUri = new Uri(_oAuthConfig.RequestTokenUrl);

    var request = (HttpWebRequest)WebRequest.Create(fullUri);
    request.Method = "POST";

    request.Headers.Add("oauth_consumer_key", PercentEncode(_oAuthConfig.ConsumerKey));
    request.Headers.Add("oauth_nonce", PercentEncode(oauth_nonce));
    request.Headers.Add("oauth_signature_method", PercentEncode("HMAC-SHA1"));
    request.Headers.Add("oauth_timestamp", PercentEncode(MakeTimestamp()));
    request.Headers.Add("oauth_version", "1.0");
    request.Headers.Add("oauth_callback", PercentEncode(_oAuthConfig.Callback));
    request.Headers.Add("oauth_signature", PercentEncode(oauth_signature));

    try 
    {

        request.BeginGetResponse(new AsyncCallback(result =>
        {
            string contents = String.Empty;
            HttpWebRequest theRequest = (HttpWebRequest)result.AsyncState;

            if (theRequest != null)
            {
                try
                {
                    HttpWebResponse theResponse = (HttpWebResponse)theRequest.EndGetResponse(result);

                    using (Stream stream = theResponse.GetResponseStream())
                    using (StreamReader reader = new StreamReader(stream))
                    {
                        contents = reader.ReadToEnd();
                    }

                    Dictionary<string, object> results = JsonConvert.DeserializeObject<Dictionary<string, object>>(contents);

                    _requestToken = (string)results ["oauth_token"];
                    _requestTokenSecret = (string)results ["oauth_token_secret"];

                    response(true);
                }
                catch (WebException e)
                {
                    response(false);
                }
            }
            else
            {
                response(false);
            }
        }), request);

    }
    catch (WebException e)
    {
        response(false);
    }

} 
```

我的旧（非异步）代码工作正常 -

```
public bool AcquireRequestToken()
{
    var headers = new Dictionary<string,string>()
    {
        { "oauth_callback", PercentEncode(_oAuthConfig.Callback) },
        { "oauth_consumer_key", _oAuthConfig.ConsumerKey },
        { "oauth_signature_method", "HMAC-SHA1" },
        { "oauth_timestamp", MakeTimestamp() },
        { "oauth_version", "1.0" }
    };

    string signature = MakeSignature ("POST", _oAuthConfig.RequestTokenUrl, headers);
    string compositeSigningKey = MakeSigningKey(_oAuthConfig.ConsumerSecret, null);
    string oauth_signature = MakeOAuthSignature(compositeSigningKey, signature);

    var wc = new WebClient ();
    headers.Add ("oauth_signature", PercentEncode(oauth_signature));
    wc.Headers [HttpRequestHeader.Authorization] = HeadersToOAuth(headers);

    try
    {
        var result = HttpUtility.ParseQueryString(wc.UploadString (new Uri(_oAuthConfig.RequestTokenUrl), ""));

        if (result ["oauth_callback_confirmed"] != null)
        {
            _requestToken = result ["oauth_token"];
            _requestTokenSecret = result ["oauth_token_secret"];

            return true;
        }
    }
    catch (Exception e)
    {
        return false;
    }

} 
```

新版本中的标题略有不同，但保持相同并没有帮助。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:59:10.550

你错了标题。只有一个 HTTP 标头称为`Authorization`：

```
Authorization: OAuth oauth_consumer_key="<the consumer key of your app>", oauth_nonce="<the nonce>", oauth_signature="<the signature>", oauth_signature_method="HMAC-SHA1", oauth_timestamp="<the timestamp>", oauth_token="<your token>", oauth_version="1.0" 
```

此页面将告诉您如何制作：[https](https://dev.twitter.com/docs/auth/authorizing-request) ://dev.twitter.com/docs/auth/authorizing-request 。除两种方法外，所有方法都相同：

*   `request_token`需要`oauth_callback`但不是`oauth_token`（正常，因为你没有它）。
*   `access_token`需要`oauth_verifier`（你会在第二步之后得到它）。

# asp.net - asp.net 使用参数自动打开灯箱

> ID：12636634
> 
> 赞同：0
> 
> 时间：2012-09-28T08:48:35.227
> 
> 标签：asp.net, lightbox

我在 c# 中有一个页面，它重定向到另一个页面，例如

Response.Redirect("default.aspx?name=" + user.Firstname + "&surname=" + user.Lastname)。

default.aspx 有一个灯箱。当我重定向包含此灯箱的页面时，我想打开此灯箱。另外，我想在该灯箱输入字段中显示参数。有没有办法做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:47:52.717

恐怕你不能用 Lightbox 做到这一点。
灯箱插件适用于`<a>`标签并从 href 属性中获取值。它还专门为图像设计，因为您可以看到您是否提供了一个 URL 来访问它不会加载它的页面。
例如，如果您提供，

```
<a href="page.html" id="a1" >Click Me</a> 
```

它将继续显示加载页面。
而是尝试使用[thickbox](http://ajaxdaddy.com/demo-jquery-thickbox.html)来显示当前的用户参数。
要让厚框显示您可以使用的页面

```
<script language="javascript" type="text/javascript" src="javascript/thickbox.js"></script>
<a id="a1" href="#" title="Click me" class="thickbox">Call me</a>           

<script type="text/javascript" >
    $(document).ready(function(){           
        var anchor = document.getElementById("a1");
        var username= '<%= Request.QueryString["username"]%>';
        var url="second.html?height=500&width=700&modal=true&TB_iframe=true&username="+username;
        $('#a1').attr("href", url);
        anchor.click();                         
    });
</script> 
```

让我知道它是否有效。

# php - 如何使用 php pdo 在 mysql 中动态创建自动增量列？

> ID：12636635
> 
> 赞同：-2
> 
> 时间：2012-09-28T08:48:34.827
> 
> 标签：php, mysql, pdo, auto-increment

> **可能重复：**
> [在 PDO 中是​​否存在 MySQL 的“multi_query()”的等价物？](https://stackoverflow.com/questions/6832501/is-there-an-equivalent-for-mysqls-multi-query-in-pdo)

我有两张桌子，我从两张桌子做一个联合：

```
 select * 
 from table1
 union 
 select *
 from table2 
```

我想动态创建一个自动增量列，以创建“更多结果”分页，将此自动增量 ID 作为偏移量传递。

我可以通过这种方式即时创建自动增量列：

```
SELECT @i:=0;

SELECT all_res.*, 
       @i:=@i+1 AS i 
FROM (
 select * 
 from table1
 union 
 select *
 from table2
) as all_res 
```

但是如果我在 php pdo 中运行查询，我会收到此错误：

```
SQLSTATE[42000]: Syntax error or access violation: 1064 SELECT all_res.*, @i:=@i+1 AS i' at line 1 
```

如何获得唯一的列 ID 才能“查看更多结果”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:55:55.730

PDO：一次一个查询。不是两个查询。使用 mysqli 因为它具有多查询支持。

另见：

*   [在 PDO 中是​​否有 MySQL 的“multi_query()”的等价物？](https://stackoverflow.com/questions/6832501/is-there-an-equivalent-for-mysqls-multi-query-in-pdo)
*   [如何使用 PHP::PDO 执行带有变量的 mysql 脚本？](https://stackoverflow.com/questions/4683110/how-to-execute-mysql-script-with-variables-using-phppdo)

# javascript - 使用弹出窗口打开 html 文档并调用其中的方法/元素

> ID：12636638
> 
> 赞同：0
> 
> 时间：2012-09-28T08:48:40.660
> 
> 标签：javascript, ckeditor

我在使用弹出窗口调用引用的 html 页面中的方法/元素时遇到了一些问题。当用户单击 ckeditor 插件时，将调用弹出窗口。

Plugin.js（弹出窗口）

```
popupEqnwin = window.open('main.html','test','width=1000,height=450,status=1,scrollbars=yes,resizable=1'); 
```

main.html

```
<input type="text" id="image" name="image" value="xxx"/> 
```

如何使用 popupEqnwin 来引用名为 image 的元素类型？我尝试使用 popupEqnwin.document.getElementById("image").value 但它不起作用。

欣赏任何指针或参考。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T13:16:42.417

当您打开一个新窗口时，您可以保存其处理程序：

```
var popupWindow = window.open( 'yourFile.html' ); 
```

然后你可以像普通窗口一样玩它：

```
popupWindow.document.body.innerHTML; // prints the contents of the popup's <body>
popupWindow.someFunction(); // calls some function from popup's global namespace 
```

* * *

我的意思是...您应该稍微更改插件的代码，以便`CKEDITOR.editor.popup()`返回此处理程序或将其存储在`CKEDITOR`命名空间/编辑器实例中的某个位置。

* * *

我[为此创建了一张票](https://dev.ckeditor.com/ticket/9403)。

# c# - Ookii VistaFolderBrowserDialog 并获取所选文件夹

> ID：12636639
> 
> 赞同：2
> 
> 时间：2012-09-28T08:48:42.063
> 
> 标签：c#, .net, wpf, dialog, ookii

我正在尝试使用[Ookii 对话框包](https://github.com/augustoproiete/ookii-dialogs-wpf)来生成新的 Vista 风格的文件夹选择对话框。这一切都适用于这个简单的代码：

```
VistaFolderBrowserDialog dlg = new VistaFolderBrowserDialog();
dlg.SelectedPath = Properties.Settings.Default.StoreFolder;
dlg.ShowNewFolderButton = true;
dlg.ShowDialog(); 
```

但是，我看不到任何知道用户何时选择文件夹的方法，因为该对象上没有事件。我可以轮询 中的更改`SelectedPath`，但这似乎是一种非常低效的做事方式。

是否有一些我错过的通用 C# 技巧让我知道用户何时选择了一个文件夹并因此适当地更新其他字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T10:38:51.910

尝试

```
VistaFolderBrowserDialog dlg = new VistaFolderBrowserDialog();
dlg.SelectedPath = Properties.Settings.Default.StoreFolder;
dlg.ShowNewFolderButton = true;

if (dlg.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    string path = dlg.SelectedPath;
} 
```

# objective-c - 写入文件，目标 zip

> ID：12636641
> 
> 赞同：3
> 
> 时间：2012-09-28T08:48:46.870
> 
> 标签：objective-c, zip

我正在使用一个名为 Objective zip 的库来提取文件。

相关代码：

```
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];

ZipFile *unzipFile= [[ZipFile alloc] initWithFileName:requestFinishedPresentationPath mode:ZipFileModeUnzip];
NSArray *infos= [unzipFile listFileInZipInfos];

for (FileInZipInfo *info in infos) {
    NSLog(@"- %@ %@ %d (%d)", info.name, info.date, info.size, info.level);

    [unzipFile locateFileInZip:info.name];

    // Expand the file in memory
    ZipReadStream *read= [unzipFile readCurrentFileInZip];

    NSMutableData *data = [[NSMutableData alloc] initWithLength:256];
    int bytesRead = [read readDataWithBuffer:data];

    [data writeToFile:[documentsDir stringByAppendingPathComponent:info.name] atomically:NO];
    NSLog([documentsDir stringByAppendingPathComponent:info.name]);
    [read finishedReading];

}

[unzipFile close]; 
```

第一个 nslog 输出以下内容：

```
- _some-path_/modules/reference-popup/ref-popup.js 2012-08-21 08:49:36 +0000 109 (-1) 
```

第二个 nslog 输出如下：

```
/Users/_USER_/Library/Application Support/iPhone Simulator/5.1/Applications/F2649DB7-7806-4C49-8DF9-BD939B2A9D5A/Documents/_some-path_/modules/slide-popup/slide-popup.css 
```

基本上我认为我的读取对象和数据对象没有相互交谈......当我在浏览器中导航到正确的目录时，它所做的只是显示两个文件，它们应该是目录（它们是最顶级的-级目录），但浏览器说它们被写为 1kb 文件。我尝试根据代码中的缓冲区查看文件及其 256 字节文件。

我应该怎么做？

展开 zip（将所有文件正确放入一个目录）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-29T21:45:55.087

调用 readDataWithBuffer 将填满缓冲区（直到其长度），然后暂停流。实际上，您应该将其置于循环中并在 bytesRead 为 0 时停止。这是为了允许扩展大于可用内存的文件（例如，考虑视频）。

此外，请考虑 zip 文件没有目录结构：目录只是作为压缩文件名的一部分嵌入。由您决定重新创建正确的路径。通常您有一些基本目录，附加压缩文件名并使用生成的完整路径创建文件。

在[Objective-Zip wiki](http://code.google.com/p/objective-zip/wiki/GettingStarted)的最后，您可以找到标题为“内存管理”的部分，其中存在示例循环并进行了注释。一个更完整的例子如下：

```
 // Open zip descriptor
    ZipFile *zip= [[ZipFile alloc] initWithFileName:zipPath mode:ZipFileModeUnzip];

    NSMutableData *buffer= [[NSMutableData alloc] initWithLength:BUFFER_SIZE];

    // Loop on file list
    NSArray *zipContentList= [zip listFileInZipInfos];
    for (FileInZipInfo *fileInZipInfo in zipContentList) {

        // Check if it's a directory
        if ([fileInZipInfo.name hasSuffix:@"/"]) {
            NSString *dirPath= [documentsPath stringByAppendingPathComponent:fileInZipInfo.name];
            [[NSFileManager defaultManager] createDirectoryAtPath:dirPath withIntermediateDirectories:YES attributes:nil error:NULL];
            continue;
        }

        // Create file
        NSString *filePath= [documentsPath stringByAppendingPathComponent:fileInZipInfo.name];
        [[NSFileManager defaultManager] createFileAtPath:filePath contents:[NSData data] attributes:nil];
        NSFileHandle *file= [NSFileHandle fileHandleForWritingAtPath:filePath];

        // Seek file in zip 
        [zip locateFileInZip:fileInZipInfo.name];
        ZipReadStream *readStream= [zip readCurrentFileInZip];

        // Reset buffer
        [buffer setLength:BUFFER_SIZE];

        // Loop on read stream
        int totalBytesRead= 0;
        do {
            int bytesRead= [readStream readDataWithBuffer:buffer];
            if (bytesRead > 0) {

                // Write data
                [buffer setLength:bytesRead];
                [file writeData:buffer];

                totalBytesRead += bytesRead;

            } else
                break;

        } while (YES);

        // Close file
        [file closeFile];
        [readStream finishedReading];
    }

    // Close zip and release buffer
    [buffer release];
    [zip close];
    [zip release]; 
```

希望这可以帮助。

# vb.net - 带有封闭变量的 LINQ 语句出错

> ID：12636642
> 
> 赞同：1
> 
> 时间：2012-09-28T08:48:53.657
> 
> 标签：vb.net, asp.net-mvc-3, linq

尝试运行以下 LINQ 语句：

```
Dim jobId As Integer = CInt(payment.ForJob)

Dim currentPaid = From a In db.Payments
                      Where a.ForJob = jobId
                      Select a.Amount 
```

在 a.Amount 上得到以下错误：范围变量“金额”隐藏封闭块中的变量或先前在查询表达式中定义的范围变量

```
Function RecordPaymentForJob(payment As Payment) As ActionResult
        If ModelState.IsValid Then

            Dim jobId As Integer = CInt(payment.ForJob)

            Dim new currentPaid = From a In db.Payments
                      Where a.ForJob = jobId
                      Select a.Amount

            Dim totalPaid As Double = currentPaid.Sum()

            If (totalPaid + payment.Amount) > (db.Jobs.Find(payment.ForJob).JobAmount * -1) Then
                db.Jobs.Find(payment.ForJob).JobStatus = "Paid"
            Else
                db.Jobs.Find(payment.ForJob).JobStatus = "Part Paid"
            End If

            Dim Id As Integer = payment.CustomerId
            Dim amount As Double = db.Customers.Find(Id).AccBalance
            amount += payment.Amount
            db.Customers.Find(Id).AccBalance = amount
            db.Payments.Add(payment)
            db.SaveChanges()
            Return Redirect("/Payment/PaymentSuccessful")
        End If

        Return View(payment)
    End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:57:57.530

我怀疑这是问题所在：

```
Dim amount As Double = db.Customers.Find(Id).AccBalance 
```

我不太了解VB，但我怀疑这个变量的范围是整个块的范围，包括那个LINQ语句。至少在 C# 中，这不是问题……但[`Select`](http://msdn.microsoft.com/en-us/library/bb384607.aspx)我相信 VB 中的子句的工作方式有所不同。

一种替代方法是直接计算总和：

```
Dim totalPaid = db.Payments.Where(Function(a) a.ForJob = jobId).
                            Sum(Function(a) a.Amount) 
```

我的VB很差，但我*认为*应该可以。

# ruby-on-rails - Mongoid 在父级中创建新的嵌入文档

> ID：12636646
> 
> 赞同：1
> 
> 时间：2012-09-28T08:49:06.870
> 
> 标签：ruby-on-rails, mongodb, mongoid

我有两个模型正在处理事件和报告。报告并嵌入事件中。我在为特定事件创建新报告时遇到问题。

我认为我的报告控制器新操作需要看起来像这样：

```
@event = Event.find(params[:eventid])
@report = @event.report.build 
```

在我的事件模型中，我有以下集合：

```
embeds_one :report
accepts_nested_attributes_for :report 
```

当我尝试保存时，我收到以下错误：

```
Mongoid::Errors::NoParent 
```

这是我的报告模型

```
class Report
include Mongoid::Document
include Mongoid::Timestamps
field :test, type: String
embedded_in :event, :inverse_of => :report
embeds_many :report_details
accepts_nested_attributes_for :report_details,
  :allow_destroy => true, 
    :reject_if => proc { |attributes| 
      attributes['name'].blank? && attributes['_destroy'].blank? 
    } 
```

这是我的事件模型

```
class Event
include Mongoid::Document
include Mongoid::Timestamps
embeds_one :report
accepts_nested_attributes_for :report,
:allow_destroy => true, 
  :reject_if => proc { |attributes| 
    attributes['name'].blank? && attributes['_destroy'].blank? 
  } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T20:32:22.497

`event_id`创建新报告时，请确保在新报告中包含该集。

您可以`@report = @event.report.build(params[:report])`按照您的提示使用，或确保“event_id”包含在参数哈希中来完成此操作。

# iphone - 如何从 Xcode 通过短信发送音乐文件

> ID：12636656
> 
> 赞同：3
> 
> 时间：2012-09-28T08:50:05.847
> 
> 标签：iphone, xcode, ios5

我有一个要求，我必须通过 SMS 发送音乐文件。或者，如果可能，我们可以通过彩信发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:00:15.563

您不能通过短信发送文件。当前 SDK 不允许彩信。

相反，您可以使用 [MFMailComposeViewController](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)。

# ios - 在 UITextView 中编辑中文文本

> ID：12636658
> 
> 赞同：0
> 
> 时间：2012-09-28T08:50:13.653
> 
> 标签：ios, keyboard, uitextview

我有一个带有 UITextView 的 iPhone 应用程序，用于输入和编辑文本。我还计划将我的应用程序定位到中国市场，所以我在设置中添加了一些中文键盘，以便我可以测试它。所以现在我总共有 10 个键盘（Eng、Swe 和 8 个中文键盘）。一旦我尝试在 UITextView 中输入文本，我只能在英语和瑞典语键盘之间切换，而不能在任何中文键盘之间切换。

如果我对 UILabel 做同样的事情，我可以在所有键盘之间切换并输入中文文本（即使我不明白我在写什么 ;-)

有没有人遇到过这种情况并有解决方案？我还没有找到任何来自 Apple 的文档……</p>

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:55:01.460

在 Interface Builder 或处理文本字段的代码中，您需要更改 UIKeyboardType

```
UITextField *field = [[UITextField alloc] init];
field.keyboardType = UIKeyboardTypeDefault; 
```

我猜你可能目前将它设置为 UIKeyboardTypeASCIICapable，它只允许我使用英语和瑞典语（我也包括日语和中文）。

键盘类型的参考：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html)

# c# - SQL Linq 与多列相交

> ID：12636662
> 
> 赞同：2
> 
> 时间：2012-09-28T08:50:20.887
> 
> 标签：c#, linq

我有 2 个列表

```
A = 74137 records (7 columns)
B = 63029 records (5 columns) 
```

并想找到所有的记录

```
A.column1 = B.column1 and A.column2 = B.column2 and A.column3 = B.column3 
```

但想返回 A 的全部 7 列。到目前为止，我尝试了以下代码：

```
var ListCucolumn3uriPostale = (from A in _TempListaAdreseInProcesare.AsParallel()
                                           join B in tblcolumn3uri.AsParallel()
                                           on
                                           new { column1 = A.column1.ToUpper(), column2 = A.column2.ToUpper(), column3 = A.column3 }
                                           equals
                                           new { column1 = B.column1.ToUpper(), column2 = B.column2.ToUpper(), column3 = B.column3 }
                                           select new TempSpecificatii
                                            {
                                                column0 = A.column0,
                                                column4 = A.column4,
                                                column1 = B.column1,
                                                column2 = B.column2,
                                                column3 = B.column3,
                                                column5 = B.column5,
                                                column6 = B.column4,
                                                column7 = A.column7,
                                                column8 = A.column8,
                                                column9 = A.column9,
                                                column10 = A.column10
                                            }).ToList(); 
```

但我得到了 186395 条记录的列表，这是不正常的。我改变了这样的代码：

```
var listacucoduripostale = (from A in _TempListaAdreseInProcesare.AsParallel()
                            select new
                            {
                                column1 = A.column1.ToUpper(), column2 = A.column2.ToUpper(), column3 = A.column3
                            }).Intersect(
                           from B in tblCoduri.AsParallel()
                           select new
                           {
                               column1 = B.column1.ToUpper(), column2 = B.column2.ToUpper(), column3 = B.column3
                           }).ToList(); 
```

我得到了 23567 条记录的好结果，但列表中只有 3 列，我想要 A 中的所有列。我必须改变什么才能得到想要的结果。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:04:42.607

我很想这样做，`HashSet`应该提供快速查找。

```
var bLookupSet = new HashSet(b.Select(b =>
                   new { 
                       Column1 = b.Column1, 
                       Column2 = b.Column2,
                       Column3 = b.Column3
                       }));

var resultList = a.Where(a => bLookupSet.Contains(
                   new { 
                       Column1 = a.Column1, 
                       Column2 = a.Column2,
                       Column3 = a.Column3
                       })).ToList(); 
```

* * *

如果您需要匹配不区分大小写，并且所有 3 列都是字符串，那么我会这样做，

```
var bLookupSet = new HashSet(b.Select(b =>
                   new { 
                       Column1 = b.Column1.ToLower(), 
                       Column2 = b.Column2.ToLower(),
                       Column3 = b.Column3.ToLower()
                       }));

var resultList = a.Where(a => bLookupSet.Contains(
                   new { 
                       Column1 = a.Column1.ToLower(), 
                       Column2 = a.Column2.ToLower(),
                       Column3 = a.Column3.ToLower()
                       })).ToList(); 
```

# jquery - 进行拖放操作时如何动态调整DIV的大小？

> ID：12636663
> 
> 赞同：0
> 
> 时间：2012-09-28T08:50:27.353
> 
> 标签：jquery, resize

我有一个容器 DIV，我可以在其中添加其他 DIV 并使用拖放移动它们；如果它们被丢弃在外面，我会显示一个滚动条。我想，当一个子 div 被删除时，动态调整容器的大小，这样用户就看不到滚动条，但容器的大小会增加。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:04:48.230

您可以使用 jquery resize 插件在放置事件时调整 div 的大小。

检查调整大小插件： [http ://api.jquery.com/resize/](http://api.jquery.com/resize/)

# android - 删除edittext的最后一个字符

> ID：12636665
> 
> 赞同：6
> 
> 时间：2012-09-28T08:50:47.447
> 
> 标签：android, android-edittext

我有一个快速的问题。

我有一个带有一些数字的屏幕，当您单击其中一个数字时，该数字会附加到编辑文本的末尾。

```
input.append(number); 
```

我还有一个后退按钮，当用户单击此按钮时，我想删除最后一个字符。

目前我有以下内容：

```
Editable currentText = input.getText();

if (currentText.length() > 0) {
    currentText.delete(currentText.length() - 1,
            currentText.length());
    input.setText(currentText);
} 
```

有没有更简单的方法来做到这一点？input.remove() 行中有什么东西？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-27T15:25:18.640

我意识到这是一个老问题，但它仍然有效。如果你自己修剪文本，当你 setText() 时，光标将被重置到开头。因此（如 njzk2 所述），发送一个虚假的删除键事件并让平台为您处理它......

```
//get a reference to both your backButton and editText field

EditText editText = (EditText) layout.findViewById(R.id.text);
ImageButton backButton = (ImageButton) layout.findViewById(R.id.back_button);

//then get a BaseInputConnection associated with the editText field

BaseInputConnection textFieldInputConnection = new BaseInputConnection(editText, true);

//then in the onClick listener for the backButton, send the fake delete key

backButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        textFieldInputConnection.sendKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DEL));
    }
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-28T08:53:18.980

试试这个，

```
String str = yourEditText.getText().toString().trim();

   if(str.length()!=0){
    str  = str.substring( 0, str.length() - 1 ); 

    yourEditText.setText ( str );
} 
```

# php - Symfony2 - 试图将包分开

> ID：12636671
> 
> 赞同：2
> 
> 时间：2012-09-28T08:50:57.040
> 
> 标签：php, symfony

我对 Symfony2 还很陌生...

我的问题：

如何确保捆绑包不直接相互引用？我试图让事情尽可能松散耦合；在需要的地方可能存在异常和依赖关系，但我不想开始构建许多相互引用的捆绑包。

例子：

在向网站添加一些简单的 CMS 功能时，我目前拥有以下捆绑包：

*   src: AdminBundle - 使用 Sonata Admin
*   src: MainBundle - 包含主站点和 Doctrine 实体类
*   供应商：奏鸣曲管理员

因此 AdminBundle 需要使用 MainBundle 中提供的实体。结果，在 src/AdminBundle/Resources/config/services.yml 我有这样的条目：

```
services:
    pwn.admin.page:
        class: Pwn\AdminBundle\Admin\PageAdmin
        tags:
            - { name: sonata.admin, manager_type: orm, group: Content, label: Pages }
        arguments: [null, Pwn\MainBundle\Entity\Page, null] 
```

对 MainBundle 的引用是我试图避免的。如果需要，我希望可以很容易地指定不同的 ORM 对象，甚至可以从另一个包中指定。

总的来说，我正在努力做到只有 app/config/ 中的文件将所有组件粘合在一起。虽然，在某些情况下，我认为捆绑包具有紧密的单向依赖关系是可以的：我的 AdminBundle 依赖于 Sonata Admin。

选项：

1.  将整个服务定义从 src/AdminBundle/Resources/config/services.yml 移动到 app/config/config.yml（或者可能包含的文件，如 config_admin.yml）。但是，这似乎可能会使配置膨胀一点和/或导致服务定义重复。这些是重大问题吗？

2.  更改参数行以使用参数，例如参数：[null, %admin.entity.page%, null] 然后可以在 app/config/config.yml 中指定每个实体的参数。但是，如果我广泛地这样做，那么我最终可能会在“参数”命名空间中获得大量条目，我认为这不是它的预期用途吗？

3.  使用服务容器扩展创建一个新服务，如下所述：http: [//symfony.com/doc/current/book/service_container.html#importing-configuration-via-container-extensions](http://symfony.com/doc/current/book/service_container.html#importing-configuration-via-container-extensions)。老实说，我不确定这样的服务如何在 sonata.admin 组中注册并被 Sonata Admin 接收。

4.  将整个定义留在 Resources/config/services.yml 中，并且很高兴将来在那里进行更改仍然相对容易。

非常感谢任何帮助/评论；如果我的整个方法是错误的，那么请说。:)

# php - Symfony 和 Doctrine 网站上的代码荧光笔

> ID：12636676
> 
> 赞同：0
> 
> 时间：2012-09-28T08:51:20.303
> 
> 标签：php, xml, tabs, yaml, codehighlighter

[我真的很喜欢symfony.com](http://symfony.com/)和[教义](http://doctrine-project.org/)项目.org 网站上用于代码片段的突出显示和选项卡。

![在此处输入图像描述](../Images/7ae5d5b93bd0c15359bb24fddd8fab10.png) ![在此处输入图像描述](../Images/75869a47fbbd3d4fe4d6252b34106f99.png)

我希望我知道他们是如何做到这一点的。可能他们使用了一些特殊的 JavaScript 库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:18:36.547

来自[Symfony 2](http://symfony.com/doc/current/contributing/documentation/format.html)在线文档：

> Symfony2 文档使用 reStructuredText 作为其标记语言，使用 Sphinx 构建输出

因此，请仔细阅读这些工具的文档，以了解如何使它们适应您的网站

# iphone - 解锁后 iPhone 应用程序必须在后台处于活动状态

> ID：12636679
> 
> 赞同：2
> 
> 时间：2012-09-28T08:51:35.753
> 
> 标签：iphone, launch, unlock

在我的应用程序中，我希望我的应用程序即使在应用程序终止后仍处于活动状态。我希望当“滑动解锁”我的应用程序启动时。

有可能的？我怎么能做到没有越狱和所有...

这是一个方便用户的功能。该应用程序是一个音频播放器，当用户解锁他的 iPhone 或说出“欢迎使用 iPhone”或类似的文字时，它应该立即开始播放音乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:44:48.473

请进一步说明您想要做什么。为此，您可能会使用越狱工具。使用此链接

[http://www.redmondpie.com/how-to-unlock-any-jailbroken-iphone-on-any-baseband-and-firmware/](http://www.redmondpie.com/how-to-unlock-any-jailbroken-iphone-on-any-baseband-and-firmware/)

[http://www.redmondpie.com/how-to-unlock-any-jailbroken-iphone-on-any-baseband-and-firmware/](http://www.redmondpie.com/how-to-unlock-any-jailbroken-iphone-on-any-baseband-and-firmware/)

# java - 如何在非活动类中使用 WifiManager？

> ID：12636681
> 
> 赞同：5
> 
> 时间：2012-09-28T08:51:51.963
> 
> 标签：java, android

我有两个课程：其中一个是活动课程，另一个是非活动课程。我调用了一个非活动类内部的方法来返回mac地址。

活动课：

```
public class Control extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    deneme d = new deneme(this); // i has tried (getApplicatonContext)
    String x = d.macadress();
    Toast.makeText(getApplicationContext(), x, Toast.LENGTH_LONG).show();
}} 
```

和非活动类：

```
public class deneme {
Context mcontext ;
WifiManager wm;

public deneme(Context mcontext){
    this.mcontext = mcontext;
}

public String macadress(){
    wm = (WifiManager)mcontext.getSystemService(Context.WIFI_SERVICE);
    String m_szWLANMAC = wm.getConnectionInfo().getMacAddress();
    return m_szWLANMAC;

}} 
```

但该方法返回null。我有权限 ACCESS_WIFI_STATE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:09:30.200

如果您的 wifi 未在设备上启用，它将根据您的情况返回 null，检查 wifi 是否已启用，如果启用则返回 mac 地址，否则通知用户启用 wifi。

```
package com.example.wifitest;

import android.content.Context;
import android.net.wifi.WifiManager;
import android.widget.Toast;

public class TEST {
    Context mcontext;
WifiManager wm;

public TEST(Context mcontext) {
    this.mcontext = mcontext;
}

public String macadress() {
    wm = (WifiManager) mcontext.getSystemService(Context.WIFI_SERVICE);
    if (wm.isWifiEnabled()) {
        String m_szWLANMAC = wm.getConnectionInfo().getMacAddress();
        return m_szWLANMAC;
    }
    else{
        Toast.makeText(mcontext, "Please enbale your wifi",
                Toast.LENGTH_SHORT).show();
        return null;
    }

} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:58:53.477

```
 public class MainActivity extends Activity {

        @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        deneme d = new deneme(getApplicationContext()); 
  //  String x=d.wm.getConnectionInfo().getMacAddress();

      String x = d.macadress();
        Toast.makeText(getApplicationContext(), x, Toast.LENGTH_LONG).show();

    }

}
 class deneme {
Context mcontext ;
WifiManager wm;

public deneme(Context mcontext){
    this.mcontext = mcontext;
}

public String macadress(){
    wm = (WifiManager)mcontext.getSystemService(Context.WIFI_SERVICE);
    String m_szWLANMAC = wm.getConnectionInfo().getMacAddress();
    return m_szWLANMAC;

}} 
```

我没有运行代码，但这是要做的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:01:29.813

我们可以将`Context`那个传递`Activity`给那个`non-Activity`类。

**这是来自 net 的片段：**

```
Class conectivityManager

Context myContext;

public conectivityManager(Context cxt){

myContext = cxt

}

public startWifi(){

//start-wifi

} 
```

**请参阅此链接：**

[http://www.brighthub.com/mobile/htc/articles/75491.aspx](http://www.brighthub.com/mobile/htc/articles/75491.aspx)

# r - 如何正确输入从 auto.arima 到 garchFit 的订单？

> ID：12636691
> 
> 赞同：0
> 
> 时间：2012-09-28T08:52:26.960
> 
> 标签：r

我正在尝试将 arma 模型的顺序从 auto.arima 函数输入到 garchFit 函数中。

我有一个名为 datatsr 的 df。

我以这种方式提取 AR 术语的顺序：

```
auto.arima(datatsr[,1])$arma[1] :
[1] 4 
```

MA术语的顺序：

```
auto.arima(datatsr[,1])$arma[2] :
[1] 3 
```

因此，我有`arma(4,3)`

然后我尝试在 garchFit 公式中输入这些值，并从我的嵌入列表（59 天用于预测第 60 天）中预测提前一步的值，`mmk`如下所示：

```
Garchfore <- function(datatsr, mmk) {
library(fGarch)
windowsL <- split(t(mmk), rep(1:nrow(mmk), each=ncol(mmk)))  
names(windowsL) <- unlist(lapply(windowsL,
                 function(x) paste(rownames(datatsr)[range(x)], sep="",   collapse=" - ")))
one<-lapply(windowsL, function(x) 
predict(garchFit(formula = ~arma(auto.arima(datatsr[,1])$arma[1],auto.arima(datatsr[,1])$arma[2])
                 +garch(1,1), data = datatsr[rev(unlist(x)),1]),
        n.ahead=1))
} 
```

当我然后调用该函数时

```
predi=Garchfore(datatsr,mmk) 
```

我得到错误：

```
Error in predict(garchFit(formula = ~arma(auto.arima(datatsr[, 1])$arma[1],  : 
error in evaluating the argument 'object' in selecting a method for function 'predict':
Error in    .garchArgsParser(formula = formula, data = data, trace = FALSE) : 
Formula and data units do not match. 
```

无论如何对我做错了什么有想法吗？或者甚至可以在我尝试时将 auto.arima 传递给 garchFit，或者不？

最好的祝福！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-17T01:49:08.630

函数 garchFit() 需要一个*公式*作为第一个参数（参见[garchFit() 此处](http://www.inside-r.org/packages/cran/fgarch/docs/garchFit)）。“公式”参数类型无法评估表达式，因此 garchFit() 无法正确解析*auto.arima(datatsr[,1])$arma[2]*等变量。从此处的表达式中获取公式的一种方法是替换函数（请参见[此处的替换（）](http://stat.ethz.ch/R-manual/R-devel/library/base/html/substitute.html)）。出于演示的目的，下面是带有 garchFit() 的替代 () 的简化用法：

```
library(fGarch)
library(doParallel)

N = 200
x.vec = as.vector(garchSim(garchSpec(rseed = 1985), n = N)[,1])
m.list <- 
  foreach(i=1:2) %:%
  foreach(j=1:2) %do% {
    garchFit(substitute(~ garch(p,q),list(p=i, q=j)), 
             data = x.vec, trace = FALSE)  
  } 
```

在 garchFit() 使用的上下文中，您可以像这样将*公式*参数替换 () 到 garchFit() 中：

```
garchFit(substitute(formula = ~arma(p,q)+garch(1,1), 
                    list(p=auto.arima(datatsr[,1])$arma[1],
                         q=auto.arima(datatsr[,1])$arma[2])),
         data = datatsr[rev(unlist(x)),1]) 
```

我希望这会有所帮助，尽管有点晚了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T16:56:03.933

***1.你指定公式的方式不对***

***2\. 手动输入华宇订单***

让我试着用我自己的数据来解释

```
garchFit(formula= ~arma(3,2) + aparch(1,1), data=ret.fin.chn) 
```

产出结果

```
Title:
 GARCH Modelling 

Call:
 garchFit(formula = ~arma(3, 2) + aparch(1, 1), data = ret.fin.chn) 

Mean and Variance Equation:
 data ~ arma(3, 2) + aparch(1, 1)
<environment: 0x0df1f498>
 [data = ret.fin.chn]

Conditional Distribution:
 norm 

Coefficient(s):
     mu          ar1          ar2          ar3          ma1          ma2        omega       alpha1  
 1.4860e-04   6.3611e-01  -6.1945e-01   1.9331e-02  -6.6944e-01   6.4677e-01   1.0186e-05   3.1339e-02  
     gamma1        beta1        delta  
 3.6329e-04   9.7088e-01   1.4759e+00  

Std. Errors:
 based on Hessian 

Error Analysis:
         Estimate  Std. Error  t value Pr(>|t|)    
mu      1.486e-04   2.893e-04    0.514 0.607512    
ar1     6.361e-01   3.752e-01    1.695 0.090028 .  
ar2    -6.195e-01   1.872e-01   -3.310 0.000934 ***
ar3     1.933e-02   3.307e-02    0.585 0.558851    
ma1    -6.694e-01   3.754e-01   -1.783 0.074552 .  
ma2     6.468e-01   2.066e-01    3.130 0.001748 ** 
omega   1.019e-05   3.645e-06    2.794 0.005202 ** 
alpha1  3.134e-02   5.490e-03    5.708 1.14e-08 ***
gamma1  3.633e-04   6.787e-02    0.005 0.995729    
beta1   9.709e-01   4.663e-03  208.212  < 2e-16 ***
delta   1.476e+00   3.241e-01    4.554 5.26e-06 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Log Likelihood:
 7311.694    normalized:  2.659765 

Description:
 Wed Oct 16 23:43:41 2013 by user: ASUS 
```

尽管

```
> garchFit(formula= ~arma(arima.ret.fin.chn$arma[1],arima.ret.fin.chn$arma[2]) + aparch(1,1), data=ret.fin.chn) 
```

产出结果

```
[1] "arima.ret.fin.chn" "arma"              "data"             
[1] "data"
Error in .garchArgsParser(formula = formula, data = data, trace = FALSE) : 
  Formula and data units do not match. 
```

现在让我们看看

```
> arima.ret.fin.chn$arma[1]

[1] 3

> arima.ret.fin.chn$arma[2]
[1] 2

> class(arima.ret.fin.chn$arma[1])

[1] "integer"

> class(3)

[1] "numeric" 
```

尽管

```
b<-as.numeric(3)
c<-as.numeric(2)
> garchFit(formula=~garch(b,c),data=ret.fin.chn)
[1] "b"    "c"    "data"
[1] "data" 
```

掌握窍门了吗？

我的建议是你***直接写 arima order 的值***

尝试通过以下方式检查 garch fit 代码

```
> garchFit

function (formula = ~garch(1, 1), data = dem2gbp, init.rec = c("mci", 
"uev"), delta = 2, skew = 1, shape = 4, cond.dist = c("norm", 
"snorm", "ged", "sged", "std", "sstd", "snig", "QMLE"), include.mean = TRUE, 
include.delta = NULL, include.skew = NULL, include.shape = NULL, 
leverage = NULL, trace = TRUE, algorithm = c("nlminb", "lbfgsb", 
    "nlminb+nm", "lbfgsb+nm"), hessian = c("ropt", "rcd"), 
control = list(), title = NULL, description = NULL, ...) 
{
DEBUG = FALSE
init.rec = match.arg(init.rec)
cond.dist = match.arg(cond.dist)
hessian = match.arg(hessian)
algorithm = match.arg(algorithm)
CALL = match.call()
Name = capture.output(substitute(data))
if (is.character(data)) {
    eval(parse(text = paste("data(", data, ")")))
    data = eval(parse(text = data))
}
data <- as.data.frame(data)
if (isUnivariate(data)) {
    colnames(data) <- "data"
}
else {
    uniqueNames = unique(sort(colnames(data)))
    if (is.null(colnames(data))) {
        stop("Column names of data are missing.")
    }
    if (length(colnames(data)) != length(uniqueNames)) {
        stop("Column names of data are not unique.")
    }
}
if (length(formula) == 3 && isUnivariate(data)) 
    formula[2] <- NULL
if (length(formula) == 2) {
    if (isUnivariate(data)) {
        formula = as.formula(paste("data", paste(formula, 
            collapse = " ")))
    }
    else {
        stop("Multivariate data inputs require lhs for the formula.")
    }
}
robust.cvar <- (cond.dist == "QMLE")
args = .garchArgsParser(formula = formula, data = data, trace = FALSE)
if (DEBUG) 
    print(list(formula.mean = args$formula.mean, formula.var = args$formula.var, 
        series = args$series, init.rec = init.rec, delta = delta, 
        skew = skew, shape = shape, cond.dist = cond.dist, 
        include.mean = include.mean, include.delta = include.delta, 
        include.skew = include.skew, include.shape = include.shape, 
        leverage = leverage, trace = trace, algorithm = algorithm, 
        hessian = hessian, robust.cvar = robust.cvar, control = control, 
        title = title, description = description))
ans = .garchFit(formula.mean = args$formula.mean, formula.var = args$formula.var, 
    series = args$series, init.rec, delta, skew, shape, cond.dist, 
    include.mean, include.delta, include.skew, include.shape, 
    leverage, trace, algorithm, hessian, robust.cvar, control, 
    title, description, ...)
ans@call = CALL
attr(formula, "data") <- paste("data = ", Name, sep = "")
ans@formula = formula
ans
} 
```

# android - OpenGL：纹理似乎无法在半透明表面上正确混合

> ID：12636692
> 
> 赞同：1
> 
> 时间：2012-09-28T08:52:43.047
> 
> 标签：android, opengl-es, alphablending

我按照这个顺序和 z 顺序在 OpenGL 中绘制对象：

*   背景四边形，
*   背景对象=带有标题的图像（纹理）
*   一个半透明的黑色四边形，使背景对象变暗（具有低 alpha 值的彩色四边形），
*   和前景对象=带有标题的图像（纹理，但中心的那个后面有一个白色的四边形）

目前，它看起来像这样：

[![截屏](../Images/bf116fde5d01f91d6ef77267ce0b5558.png)](https://i.stack.imgur.com/q4cWn.png)

这不是它应该的样子——“Chikinki”周围的 5 个物体（胆小的老虎、The Bishops...）应该和“Chikinki”图片一样亮。此外，所有标题（包括 Chikinki 的）都比纹理更暗。在我看来，好像“Chikinki”图像后面的白色四边形以某种方式迫使 OpenGL 正确地在它前面绘制图片。没有半透明的黑色四边形（它可以使所有物体变暗，除了中间的物体和周围的 5 个物体），一切都很好。所以我怀疑这个半透明的四边形会以某种方式渗出，尽管其他对象是在它之后绘制的并且具有更高的 z 值。

如前所述，对象是从后到前绘制的，并且在 z 方向上也是从后到前布置的。始终启用混合。白色矩形具有混合功能：`gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);`所有图像都有功能`gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);`。深度测试已启用。

相关纹理填充四边形绘制代码（截图太暗）：

```
gl.glPushMatrix();
gl.glEnable(GL10.GL_BLEND);
gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);

gl.glActiveTexture(GL10.GL_TEXTURE0);
gl.glBindTexture(GL10.GL_TEXTURE_2D, mTextureName);
gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
gl.glTexParameterx(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);
gl.glFrontFace(GL10.GL_CW);
gl.glVertexPointer(3, GL10.GL_FLOAT, 0, mFVertexBuffer);
gl.glEnable(GL10.GL_TEXTURE_2D);
gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, mTexBuffer);

gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);

mFVertexBuffer.position(0);
mTexBuffer.position(0);
mIndexBuffer.position(0);

gl.glDisable(GL10.GL_TEXTURE_2D);
gl.glDisable(GL10.GL_BLEND);
gl.glPopMatrix(); 
```

相关颜色填充四边形绘图代码（在屏幕截图中显示为 OK）：

```
gl.glPushMatrix();
gl.glEnable(GL10.GL_BLEND);
gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);

gl.glFrontFace(GL10.GL_CW);
gl.glVertexPointer(3, GL10.GL_FLOAT, 0, mFVertexBuffer);

gl.glColor4f(mRed, mGreen, mBlue, mAlpha);
gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
mFVertexBuffer.position(0);
mIndexBuffer.position(0);

gl.glPopMatrix();
gl.glDisable(GL10.GL_BLEND); 
```

考虑到它们是在半透明四边形之后绘制并且具有更高的 z 值，您是否有任何线索可能导致这些对象变暗，这些对象应该完全不透明？

**解决方案**

Tim 在评论中指出，纹理绘制受当前颜色缓冲区（其 alpha 值）的影响。在绘制图像之前调用就可以了`gl.glColor4f(1,1,1,1);`，将先前的调用恢复为`gl.glColor4f()`低于 1 的 alpha 值。

# asp.net - 在 Asp.Net 中保存实体框架的更改

> ID：12636694
> 
> 赞同：0
> 
> 时间：2012-09-28T08:52:52.130
> 
> 标签：asp.net, entity-framework, methods, save

我创建了一个实体评估器，并且有一些方法可以选择值、显示数据等。现在我想保存显示数据后所做的更改，我有一个名为 SAVE 的按钮，它将用于保存更改。我无法获得如何保存该实体的更改？

实体名称是 Appraiser，我在 DAL、BL 中创建了 get AppriaserDetails 等方法，并在 aspx.cs 中使用它们。

这是我的代码：

```
 public void UpdateData(Appraiser appId)
    {

        var Appsave = context.Appraisers.FirstOrDefault(App => App.AppraiserId == appId.AppraiserId);
        Appsave.AppraiserName = appId.AppraiserName;
        Appsave.AppraiserPhones = appId.AppraiserPhones;
        Appsave.AppraiserAppraiserCompanyId = appId.AppraiserAppraiserCompanyId;
        Appsave.Address = appId.Address;
        Appsave.City = appId.City;
        Appsave.ProvinceState = appId.ProvinceState;
        Appsave.Email = appId.Email;
        context.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:56:44.633

如果你想插入新记录，那么可以使用

```
 MyContext.Appraisers.AddObject(appraiserEntityObject);
        MyContext.SaveChanges(); 
```

更新的情况下

```
 if (appraiserEntityObject.EntityState == EntityState.Detached)
        {
            // In case of web, we got an existing record back from the browser. That                object is not attached to the context yet.
            MyContext.Appraisers.Attach(appraiserEntityObject);
            MyContext.ObjectStateManager.ChangeObjectState(appraiserEntityObject,  EntityState.Modified);
        }
        MyContext.SaveChanges(); 
```

这里 MyContext 是你的 ObjectContext

# knockout.js - 使用淘汰赛更新“占位符”属性

> ID：12636695
> 
> 赞同：27
> 
> 时间：2012-09-28T08:52:59.367
> 
> 标签：knockout.js, placeholder

我有一个表单，其中一些字段使用 knockout.js（版本 2.1.0）获取一些数据。例如，要更新我输入的“值”字段：

```
<input type="text"  name="contrasena" id="login-user" value="" placeholder="" data-bind="value: user"> 
```

我有一个 JSON 来存储我想用于“pass”关键字的值，它可以正常工作。

我尝试使用相同的方法设置“占位符”属性，但它不起作用：

```
<input type="text"  name="contrasena" id="login-user" placeholder="" data-bind="placeholder: user"> 
```

我尝试修改 knockout.js 文件，添加基于“ko.bindingHandlers['value']”的“ko.bindingHandlers['placeholder']”函数（在“ko.jsonExpressionRewriting.writeValueToProperty”中修改“placeholder”而不是“value”函数），但它不能正常工作，它将信息放在“值”属性而不是“占位符”中。

有谁知道解决这个问题的方法？

非常感谢！

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-09-28T09:40:25.270

您应该使用现有的*attr*绑定，如下所示：

```
<input data-bind="attr: {placeholder: ph}" />

var Model = function () {
    this.ph = ko.observable("Text..."); 
}
ko.applyBindings(new Model()); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-01T13:04:49.577

如果你想使用，你可以在你的 js 代码中`data-bind="placeholder: user"`创建一个[自定义绑定。](http://knockoutjs.com/documentation/custom-bindings.html)

您在正确的路径上使用`ko.bindingHandlers['placeholder']`，但您不需要编辑 knockout.js 文件*- 事实上，这是不好的做法*。

这将需要一个非常基本的自定义绑定：

```
ko.bindingHandlers.placeholder = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        var underlyingObservable = valueAccessor();
        ko.applyBindingsToNode(element, { attr: { placeholder: underlyingObservable } } );
    }
}; 
```

有关自定义绑定的指南，请参见[此处](http://www.knockmeout.net/2011/07/another-look-at-custom-bindings-for.html)

尽管 Knockout 本身就很突兀，但这种情况略显逊色。它从视图中删除了占位符如何应用于元素的知识。

事实上，如果将来你想应用某种 jQuery 插件来在不支持该`placeholder`属性的浏览器中显示占位符，这将是`init:`初始化插件的地方 ()——你还需要一个`update:`函数案子。

# javascript - CkEditor - 从 AJAX 加载的模板

> ID：12636696
> 
> 赞同：3
> 
> 时间：2012-09-28T08:53:02.257
> 
> 标签：javascript, ajax, ckeditor

我正在使用 CkEditor 并想定义一个自定义模板，该模板使用 AJAX 函数来加载 HTML 字符串。我已经能够定义自定义模板，但是如果我对模板对象的 html 属性使用函数，则该函数永远不会被执行。是否可以使用带有默认模板插件的 AJAX 加载模板，还是我需要自己编写？

### 配置.js

```
CKEDITOR.editorConfig = function (config) {
    config.templates_files = ['/pathtomyfile/custom.js'];
}; 
```

### custom.js（定义我的自定义模板）

```
CKEDITOR.addTemplates('default', {
    imagesPath: CKEDITOR.getUrl(CKEDITOR.plugins.getPath('templates') + 'templates/images/'),
    templates: [
        {
            title: 'Template 1',
            image: 'template1.gif',
            description: 'A custom template that does not work',
            html: function () {
                alert('This alert is never called');
                var html = '';

                $.ajax({
                    url: 'MyGetURL',
                    type: "GET",
                    async: false,
                    success: function (result) {
                        html = result;
                    },
                    error: function (jqXhr, textStatus, errorThrown) {
                        alert("Error '" + jqXhr.status + "' (textStatus: '" + textStatus + "', errorThrown: '" + errorThrown + "')");
                    }
                });

                return html;
            }
        },
        {
            title: 'Template 2',
            image: 'template2.gif',
            description: 'A working custom template',
            html: '<h1>I Work!</h1>'
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T13:10:26.650

你不能按照这种方式。第一个原因是编辑器期望`html`是一个字符串，而不是一个函数。第二个原因是您的 AJAX 请求没有意义，因为它是异步调用的，并且`return html`在请求完成之前执行。

无论如何，您要做的是在编辑器准备好后预加载您的寺庙。您可以使用 jQuery 代码简单地更改以下 XHR 请求，但您必须记住您应该`CKEDITOR.addTemplates`在`success`回调中调用：

```
CKEDITOR.replace( 'editor1', {
    templates: 'my',
    on: {
        instanceReady: function( argument ) {
            var httpRequest = new XMLHttpRequest();

            httpRequest.onreadystatechange = function() {
                CKEDITOR.addTemplates( 'my', {
                    templates: [
                        {
                            title: 'My AJAX-driven template',
                            html: this.responseText
                        }
                    ]
                });
            };
            httpRequest.open( 'GET', 'yourFile.html' );
            httpRequest.send();
        }
    }
}); 
```

如果您真的想实时执行此操作（很难，我不推荐给您），您应该`templates`使用加载自定义模板的代码覆盖命令，然后执行真正的命令。我不认为你需要这样做。

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T11:17:09.933

如果您可以使用 bad`async: false`属性，我已经通过将自定义配置文件更改为以下方式解决了这个问题：

```
$.ajax({
    type: "POST",
    url: '/editor/getTemplates',
    async: false,
    dataType: "json",
    success: function(data) {

        CKEDITOR.addTemplates("default",{
        imagesPath:CKEDITOR.getUrl(CKEDITOR.plugins.getPath("templates")+
       "templates/images/"),
        templates:data});

    },
    error: function() {
        alert("Error!");
    }
}); 
```

服务器循环遍历所有模板并按原样生成 json 编码数组的`templates`位置。

如果您没有将 async 设置为 false （因为它在较新的 jQuery 中已被弃用），问题将是编辑器会在数组到达之前尝试访问它，在这种情况下，我认为您必须编辑内部文件。

# javascript - 当使用来自其他域的图像时，为什么我的导航器会污染画布？

> ID：12636697
> 
> 赞同：2
> 
> 时间：2012-09-28T08:53:03.120
> 
> 标签：javascript, html, security, canvas

当您将来自其他域的图像放入画布时，画布会被污染，并且某些功能（如 getDataURL 或 getImageData）会被禁用。

当您尝试使用此类功能时，会发生 SECURITY_ERROR 错误。

为什么会有这种保护？什么样的攻击使用了这种方法？

谢谢！

编辑：

我应该问：来自其他域的图像如何用于攻击？我无法弄清楚为什么在被污染后浏览器限制使用画布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:58:46.670

那是跨域封锁，这与您无法从 iframe 内部的页面访问元素类似...

编辑：

从 w3 文档：

> 请注意，'src' 或 'data' 属性中给出的 URL 必须与网页在同一个域中，并遵循相同的域规则（即相同的协议、端口等）；出于安全原因，不支持跨域对象插入。

但是我碰到了这个，也许你可以解决一些问题： http:
[//dev.w3.org/SVG/tools/svgweb/docs/UserManual.html#cross_domain](http://dev.w3.org/SVG/tools/svgweb/docs/UserManual.html#cross_domain)

顺便说一句，java脚本中的跨域可以在较新的浏览器上运行，但是您需要同时拥有这两个域，并配置连接以便被认为是受信任的，请参见此处：

[http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/](http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/)

# objective-c - NSUserdefaults 没有打开

> ID：12636703
> 
> 赞同：0
> 
> 时间：2012-09-28T08:53:23.463
> 
> 标签：objective-c, ios, xcode

这是**第 1 类**，我保存了我的字符串和变量我很确定在这个类中一切正常。

```
-(void)SaveTextBox:(NSString*)string :(NSString*)stringsave
{ 
    NSString *savestring = string;
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:savestring forKey:stringsave];
    [defaults synchronize];
}
- (IBAction)btnSaveTeamNames:(id)sender
{
[self SaveTextBox:tbTeam1.text :@"save1"];
[self SaveTextBox:tbTeam2.text :@"save2"];
[self SaveTextBox:tbTeam3.text :@"save3"];
[self SaveTextBox:tbTeam4.text :@"save4"];
[self SaveTextBox:tbTeam5.text :@"save5"];
[self SaveTextBox:tbTeam6.text :@"save6"];
[self SaveTextBox:tbTeam7.text :@"save7"];
[self SaveTextBox:tbTeam8.text :@"save8"];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

[defaults setObject:[NSNumber numberWithInt:TeamAmount] forKey:@"teamAmount"];
} 
```

**2 级**

这是我尝试加载 NSUserDefaults 的地方（可能错误出在此类中）

由于某种原因，当滑块移动时标签不会改变，另外我在我的 void 上进行了 viewdidload 调用，以使用标准保存的字符串加载标签，但它们也不会加载。

```
@synthesize lblTeamOne;
@synthesize lblTeamTwo;
@synthesize sliderTeamOneOutlet;
@synthesize sliderTeamTwoOutlet;

-(void)loadTeams:(NSString*)location:(NSString*)lblname
{

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *loadstring = [defaults objectForKey:location];
lblname = loadstring;
}

-(void)sliderdisplay:(UISlider *)sliderOutlet :(NSString *)lblName
{
if(0 < sliderOutlet.value && 1 >= sliderOutlet.value)
{
    [self loadTeams:@"save1" :lblName];

}
if(1 < sliderOutlet.value && 2 >= sliderOutlet.value)
{
    [self loadTeams:@"save2" :lblName];

}
if(2 < sliderOutlet.value && 3 >= sliderOutlet.value)
{
    [self loadTeams:@"save3" :lblName];

}
if(3 < sliderOutlet.value && 4 >= sliderOutlet.value)
{
    [self loadTeams:@"save4" :lblName];

}
if(4 < sliderOutlet.value && 5 >= sliderOutlet.value)
{
    [self loadTeams:@"save5" :lblName];

}
if(5 < sliderOutlet.value && 6 >= sliderOutlet.value)
{
    [self loadTeams:@"save6" :lblName];

}
if(6 < sliderOutlet.value && 7 >= sliderOutlet.value)
{
    [self loadTeams:@"save7" :lblName];

}
if(7 < sliderOutlet.value && 8 >= sliderOutlet.value)
{
    [self loadTeams:@"save8" :lblName];

}
}
-(void)loadMaximum
{

int teamAmount = [[[NSUserDefaults standardUserDefaults] objectForKey:@"teamAmount"] intValue];
NSNumber *yourNumber = [NSNumber numberWithInt:teamAmount];
float sliderMaximumDigital = [yourNumber floatValue];
[sliderTeamOneOutlet setMaximumValue:sliderMaximumDigital];
[sliderTeamTwoOutlet setMaximumValue:sliderMaximumDigital];
}
- (void)viewDidLoad
{
[super viewDidLoad];
[self loadTeams:@"save1" :lblTeamOne.text];
[self loadTeams:@"save1" :lblTeamTwo.text];
[self loadMaximum];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:09:19.400

您需要将指针传递给您的`UILabel`对象，以便对其进行更新：

```
-(void)loadTeams:(NSString*)location label:(UILabel*)label
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *loadstring = [defaults objectForKey:location];
    label.text = loadstring;
}
...

[self loadTeams:@"save1" label:lblTeamOne]; 
```

# objective-c - 如果颜色空间是索引颜色空间，则 CGColorCreate() 中的组件数？

> ID：12636706
> 
> 赞同：1
> 
> 时间：2012-09-28T08:53:30.723
> 
> 标签：objective-c, macos, cocoa, quartz-graphics

我正在尝试使用 CGColorSpaceCreateIndexed() 创建 ColorRef。当我们使用索引颜色空间时，我想了解传递组件数组的规则。

```
CGColorRef CGColorCreate (
   CGColorSpaceRef colorspace,
   const CGFloat components[]
); 
```

Apple doc 说，该数组应包含 n+1 个值，这些值对应于指定颜色空间中的 n 个颜色分量，然后是 alpha 分量。

```
unsigned char colorTable[] = {2,120,150,180,200,220,10, 30};
CGColorSpaceRef cs = CGColorSpaceCreateIndexed(CGColorSpaceCreateDeviceCMYK(), 1, colorTable); 
```

现在，如果我使用这个色彩空间创建一种颜色，

```
const CGFloat myComponentArray[] = ??;
CGColorRef colorref = CGColorCreate (cs, myComponentArray); 
```

myComponentArray 应该是什么？它是否应该取决于在创建索引颜色空间时传入的基本颜色空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:29:03.630

对于索引颜色空间，颜色有一个分量，即颜色表的索引：

```
CGFloat myComponentArray[] = { index, alpha }; 
```

在您的情况下，颜色表有 2 个条目，因此索引必须为 0 或 1。

# iphone - 如何在 Xcode 中的 iPhone iOS 6 应用程序上从 A 到 B 获取方向？

> ID：12636707
> 
> 赞同：6
> 
> 时间：2012-09-28T08:53:30.593
> 
> 标签：iphone, xcode, google-maps, mkmapview, ios6

我想从 iOS < 6 更新使用 Google 地图的应用程序。我的应用程序在地图上有很多大头针，当用户点击其中一个时，iPhone 会像共享应用程序一样调用 Maps，以使用本地 Maps App 从他当前位置和目的地获取方向。在 iOS 6 中，同样的说明（在下面发布）显然会打开 Safari 而不是 Google Maps。我想编写一个 if 循环来检查设备上安装的 iOS：如果 < 6，没有任何改变，如果 iOS > 6 则.....（打开新的苹果地图并在那里获取方向）。

有人可以帮助我吗？

这里是 iOS 6 之前的动作

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {

    [self.navigationController pushViewController:[[UIViewController alloc] init] animated:YES];

    NSString* addr = [NSString stringWithFormat:@"http://maps.google.com/maps?daddr=%1.6f,%1.6f&saddr=Posizione attuale", view.annotation.coordinate.latitude,view.annotation.coordinate.longitude];

    NSURL* url = [[NSURL alloc] initWithString:[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];  
    [[UIApplication sharedApplication] openURL:url];

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T21:41:29.610

我建议使用 [MKMapItem openMapsWithItems:] 而不是通过 iOS 6 中的 URL 打开地图应用程序。如果使用 URL，您将无法传递“当前位置”并且将失去进行转弯的能力导航。MKMapItem 具有当前位置的特定项目，当通过时，将使用当前位置作为源地址打开地图，从而启用逐向导航。

```
- (void)openMapsWithDirectionsTo:(CLLocationCoordinate2D)to {
    Class itemClass = [MKMapItem class];
    if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {
        MKMapItem *currentLocation = [MKMapItem mapItemForCurrentLocation];
        MKMapItem *toLocation = [[MKMapItem alloc] initWithPlacemark:[[[MKPlacemark alloc] initWithCoordinate:to addressDictionary:nil] autorelease]];
        toLocation.name = @"Destination";
        [MKMapItem openMapsWithItems:[NSArray arrayWithObjects:currentLocation, toLocation, nil]
                       launchOptions:[NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:MKLaunchOptionsDirectionsModeDriving, [NSNumber numberWithBool:YES], nil]
                                                                 forKeys:[NSArray arrayWithObjects:MKLaunchOptionsDirectionsModeKey, MKLaunchOptionsShowsTrafficKey, nil]]];
        [toLocation release];
    } else {
        NSMutableString *mapURL = [NSMutableString stringWithString:@"http://maps.google.com/maps?"];
        [mapURL appendFormat:@"saddr=Current Location"];
        [mapURL appendFormat:@"&daddr=%f,%f", to.latitude, to.longitude];
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[mapURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T09:54:59.797

我使用了像下面发布的这样的预处理器代码来定义 if 循环的条件。

```
#define SYSTEM_VERSION_LESS_THAN(v)                 ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] == NSOrderedAscending) 
```

然后：

```
if (SYSTEM_VERSION_LESS_THAN(@"6.0")) {
         NSString* addr = [NSString stringWithFormat:@"http://maps.google.com/maps?daddr=%1.6f,%1.6f&saddr=Posizione attuale", view.annotation.coordinate.latitude,view.annotation.coordinate.longitude];
         NSURL* url = [[NSURL alloc] initWithString:[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
         [[UIApplication sharedApplication] openURL:url];
    }

else {
        NSString* addr = [NSString stringWithFormat:@"http://maps.apple.com/maps?daddr=%1.6f,%1.6f&saddr=Posizione attuale", view.annotation.coordinate.latitude,view.annotation.coordinate.longitude];
        NSURL* url = [[NSURL alloc] initWithString:[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
        [[UIApplication sharedApplication] openURL:url];

    } 
```

它似乎工作再见！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:11:06.693

接受的答案对我不起作用。当前位置需要使用正确的语言，并且 ios6 版本没有正确加载。对我来说，以下工作。

```
NSString *destinationAddress = @"Amsterdam";

Class itemClass = [MKMapItem class];
if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {

    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:destinationAddress completionHandler:^(NSArray *placemarks, NSError *error) {
        if([placemarks count] > 0) {

            MKPlacemark *placeMark = [[MKPlacemark alloc] initWithPlacemark:[placemarks objectAtIndex:0]];

            MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:placeMark];

            MKMapItem *mapItem2 = [MKMapItem mapItemForCurrentLocation];

            NSArray *mapItems = @[mapItem, mapItem2];

            NSDictionary *options = @{
        MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving,
        MKLaunchOptionsMapTypeKey:
            [NSNumber numberWithInteger:MKMapTypeStandard],
        MKLaunchOptionsShowsTrafficKey:@YES
            };

            [MKMapItem openMapsWithItems:mapItems launchOptions:options];

        } else {
            //error nothing found
        }
    }];
    return;
} else {

    NSString *sourceAddress = [LocalizedCurrentLocation currentLocationStringForCurrentLanguage];

    NSString *urlToOpen = [NSString stringWithFormat:@"http://maps.google.com/maps?saddr=%@&daddr=%@",
                 [sourceAddress stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                 [destinationAddress stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlToOpen]];
} 
```

对于 ios5，我使用这篇文章[http://www.martip.net/blog/localized-current-location-string-for-iphone-apps中的 LocalizedCurrentLocation](http://www.martip.net/blog/localized-current-location-string-for-iphone-apps)

对于 ios6，我使用 CLGeocoder 获取地标，然后用它和当前位置打开地图。

记得添加 CoreLocation.framework 和 MapKit.framework

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-30T11:52:02.993

**Swift 2.0**兼容。

我还没有找到任何详尽的答案。

```
/**
Try to open google maps with navigation feature and with given coordinates

- parameter latitude:        destination latitude
- parameter longitude:       destination longitude
- parameter destinationName: destination name
- parameter completion:      completion callback
*/
static func openGoogleMapsNavigation(latitude: Double, longitude: Double, destinationName: String, completion: ((error: NSError?) -> (Void))?) {
    let directionRequest: MKDirectionsRequest = MKDirectionsRequest()
    let destination = Utils.createMapItem(name: destinationName, latitude: latitude, longitude: longitude)
    directionRequest.source = MKMapItem.mapItemForCurrentLocation()
    directionRequest.destination = destination
    directionRequest.transportType = MKDirectionsTransportType.Automobile
    directionRequest.requestsAlternateRoutes = true
    let directions: MKDirections = MKDirections(request: directionRequest)
    directions.calculateDirectionsWithCompletionHandler { (response: MKDirectionsResponse?, error: NSError?) -> Void in
        if error == nil {
            destination.openInMapsWithLaunchOptions([ MKLaunchOptionsDirectionsModeKey : MKLaunchOptionsDirectionsModeDriving])
        }
        completion?(error: error)
    }
} 
```

我有这个实用方法的地方：

```
static func createMapItem(name name: String, latitude: Double, longitude: Double) -> MKMapItem {
    let coordinates = CLLocationCoordinate2DMake(latitude, longitude)
    let placemark = MKPlacemark(coordinate: coordinates, addressDictionary: nil)
    let mapItem = MKMapItem(placemark: placemark)
    mapItem.name = name
    return mapItem
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-13T05:20:48.290

对于快速寻找答案的人-

```
 //MARK:- ViewDidLoad
         let directionRequest = MKDirectionsRequest()
                    directionRequest.source = self.sourceMapitem
                    directionRequest.destination = self.destinationMapitem
                    directionRequest.transportType = .Automobile
                // where sourceMapitem and destinationMapitem are MKMapItem     
                    let directions = MKDirections(request: directionRequest)
                    directions.calculateDirectionsWithCompletionHandler {
                        (response, error) -> Void in
                   if response != nil {
                        let route = response!.routes[0]
                        self.myMapView.addOverlay((route.polyline), level: MKOverlayLevel.AboveRoads)
                        print("OVER")
                    }
                        else{
                            print(" ERROR: \(error)")
                        }
                    }
        //MARK:- DefineFunctions
        func showRoute(response: MKDirectionsResponse) {

                for route in response.routes {

                    myMapView.addOverlay(route.polyline,
                                        level: MKOverlayLevel.AboveRoads)
                }
            } 
```

# objective-c - 按下回车键时 UISearchBar 不会关闭键盘

> ID：12636708
> 
> 赞同：23
> 
> 时间：2012-09-28T08:53:41.757
> 
> 标签：objective-c, ios

按下回车键或用户触摸其他地方时，`UISearchBar`不会关闭键盘。

我需要使用 iOS 键盘右下角的移除键盘按钮来移除键盘并调用：

```
- (void)searchBarTextDidEndEditing:(UISearchBar *)aSearchBar 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-28T09:15:07.803

```
- (void)searchBarTextDidEndEditing:(UISearchBar *)aSearchBar {
    [aSearchBar resignFirstResponder];
} 
```

您还必须为 UISearchBar 设置委托：**UISearchBarDelegate**

它应该工作。

这是示例代码[http://developer.apple.com/library/ios/#samplecode/ToolbarSearch/Listings/ToolbarSearch_APLToolbarSearchViewController_m.html#//apple_ref/doc/uid/DTS40009461-ToolbarSearch_APLToolbarSearchViewController_m-DontLinkElementID_9](http://developer.apple.com/library/ios/#samplecode/ToolbarSearch/Listings/ToolbarSearch_APLToolbarSearchViewController_m.html#//apple_ref/doc/uid/DTS40009461-ToolbarSearch_APLToolbarSearchViewController_m-DontLinkElementID_9)

另一个选项是我们可以使用的 searchBarSearchButtonClicked。

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [searchBar resignFirstResponder];
    // You can write search code Here
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-28T08:56:36.933

在 .h 中添加**UISearchBarDelegate**

还将**SearchBar 的对象委托设置为 self**。

你应该做 add`UISearchBarDelegate`的方法：

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [searchBar resignFirstResponder];
    // Do the search...
} 
```

**编辑：**上面不起作用然后添加：

```
[self.view endEditing:YES]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T09:48:50.600

单击返回按钮时，使用以下代码段关闭/隐藏键盘。

```
- (BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text 
{

    if([text isEqualToString:@"\n"])
    {        
        [searchBar resignFirstResponder];
        return NO;
    }
        return YES;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-26T23:58:30.033

对于 swift 1.2，当您单击完成时，键盘将隐藏，并且还有另一个取消功能，但使用它并不好，因为当用户单击取消时，他可能想要搜索另一个单词...

```
func searchBarSearchButtonClicked(searchBar: UISearchBar) {
        searchBar.resignFirstResponder()
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-29T06:40:06.070

它会工作 -

目标 c -

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar{
    [searchBar resignFirstResponder]; 
} 
```

斯威夫特 -

```
func searchBarSearchButtonClicked(searchBar: UISearchBar) {
        searchBar.resignFirstResponder()
    } 
```

# android - 无缝播放高质量的 youtube 视频在 android 上是否有可能？

> ID：12636709
> 
> 赞同：3
> 
> 时间：2012-09-28T08:53:48.967
> 
> 标签：android, youtube, youtube-api

我已经用谷歌搜索了这个。我似乎找不到从 youtube 无缝播放高质量视频的方法。

到目前为止我已经尝试过：使用具有以下内容的 webview：

```
 htmlstring.append("<iframe title='YouTube video player' class='youtube-player' type='text/html' width='590px' height='370px' src='http://www.youtube.com/embed/");
    htmlstring.append(wYouTubeId+"?autoplay='1' frameborder='0' allowFullScreen='1'></iframe>");
    htmlstring.append("</center></body></html>");           
    webView.loadData(htmlstring.toString(), "text/html", "utf-8"); 
```

这一直工作正常，但由于某种原因不能在 android 4 上运行（注和 S3 测试）

所以我尝试了这个对象版本：

```
 htmlstring.append("<object width='480' height='330'><param name='movie' value='http://www.youtube.com/v/"+wYouTubeId+"?version=3&amp;hl=pt_BR&amp;rel=0'>");   
    htmlstring.append("</param><param name='allowFullScreen' value='true'></param>");
    htmlstring.append("<param name='allowscriptaccess' value='always'></param>");
    htmlstring.append("<embed src='http://www.youtube.com/v/"+wYouTubeId+"?version=3&amp;hl=pt_BR&amp;rel=0' ");
    htmlstring.append("type='application/x-shockwave-flash' width='480' height='330' allowscriptaccess='always' allowfullscreen='true' /></object>");
    webView.loadData(htmlstring.toString(), "text/html", "utf-8"); 
```

那里也没有欢乐。它只是旋转，然后发出一个蓝色的乐高积木。不过，这些方法适用于 Android 2.2。

然后我尝试了这个：

```
mp.setDataSource("http://www.youtube.com/v/"+wYouTubeId);
mp.prepare();
mp.start(); 
```

我还尝试使用频道提要中的直接 rtsp 链接进行此操作，但它们的质量太低而无法使用。当我看到大量版本时，我如何判断哪个版本是高质量的。

我也尝试过使用 VideoView 手动执行此操作，但我遇到了同样的问题。

很多人推荐使用这个：

```
 startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(fileListItem.getLink()))); 
```

但这不是一种选择，除非有一种方法可以在没有文字的情况下无缝地以横向方式启动 youtube 应用程序。（我们的客户不想要它）。

在我看来，Android 是一个谷歌系统，Youtube 是一个谷歌系统，但在 iOS（甚至是 iOS6！）上似乎很容易实现视频。为什么在“google”android上播放“google”视频这么难？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:32:31.473

这将是公开发布时的最佳方法：[https](https://developers.google.com/events/io/sessions/gooio2012/120/) ://developers.google.com/events/io/sessions/gooio2012/120/ （我无法分享有关其可用性的任何具体日期）。

与此同时，使用嵌入可能会让你最接近你想要的。当你尝试它时，它具体有什么问题？您能否[提交一个](https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20%28Defect%20Report%29)带有问题描述的错误，包括您尝试播放的视频 ID？

# c# - XamDataGrid - 过滤父子层次数据

> ID：12636713
> 
> 赞同：0
> 
> 时间：2012-09-28T08:54:39.460
> 
> 标签：c#, wpf, infragistics, xamdatagrid

我有一个 XamDataGrid，它显示类似于目录结构的分层数据（文件夹中可以有文件夹和文件）。我在网格外有一个单独的 TextBox，我在其中输入搜索字符串，在 TextChanged 中我将 RecordFilters 应用于 FieldLayouts。

要求是如果有匹配搜索字符串的文件，它的父文件夹（直到根目录）也应该是可见的。但其他文件不应该是可见的。

如果目录及其子目录和子文件与搜索字符串不匹配，则应将它们全部设为不可见。

如果目录匹配搜索字符串并且其子目录和文件不匹配，则只有该基本目录应该可见。

我所做的是将记录过滤器应用于父字段布局和子字段布局，如果父目录与搜索不匹配，即使子字段匹配，它也会被隐藏。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:31:32.020

您可以从 Linq 结合递归开始。

就像是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using rekie;

namespace System.Collections.Generic
{
  public static class FilterExtension
  {
    private static string _criteria;

    public static IList<Node> FilterBy(this IList<Node> source, string criteria)
    {
      _criteria = criteria;

      var copySource =
        (from n in source
         select n).ToList();

      foreach (var node in source)
      {
        if (node.Offspring != null)
        {
          FilterRecursion(node);
        }
      }

      return copySource;
    }

    private static void FilterRecursion(Node parent)
    {
      foreach (var node in parent.Offspring)
      {
        if (node.Offspring != null)
        {
          FilterRecursion(node);
        }

        node.Visible = node.Text.Contains(_criteria);
      }

      parent.Visible = parent.Text.Contains(_criteria) || parent.Offspring.Where(o => o.Visible).Count() > 0;
    }
  }
}

namespace rekie
{

  class Program
  {
    static void Main(string[] args)
    {
      var orig = Node.GetSome();
      var Results = orig.FilterBy("O.o");
    }
  }

  public class Node
  {
    public string Text { get; set; }
    public IList<Node> Offspring { get; set; }
    public bool Visible { get; set; }

    public static IList<Node> GetSome()
    {
      return
        new List<Node>()
        { 
          new Node()
          { 
            Text="Chidori", 
            Offspring=new List<Node>()
              { 
                new Node(){ Text="Rasengan "}
              }
          }, 
          new Node()
          { 
            Text="Kage Shuriken no Jutsu", 
            Offspring=new List<Node>()
            {
              new Node(){Text="Amagumo O.o"}
            }
          }, 
          new Node()
          { 
            Text="Kage Bunshin no Jutsu", 
            Offspring=new List<Node>()
          }, 
          new Node()
          { 
            Text="Oiroke no Jutsu", 
            Offspring=new List<Node>()
            {
              new Node(){ Text="O.o"}
            }
          }, 
          new Node()
          { 
            Text="Ranshinsho O.o", 
            Offspring=new List<Node>()
            {
              new Node(){ Text="Shikotsumyaku" },
              new Node(){ Text="Byakugan"}
            }
          }
        };
    }
  }
} 
```

# c# - C# 填充列表的最佳方法 来自列表

> ID：12636714
> 
> 赞同：0
> 
> 时间：2012-09-28T08:54:44.307
> 
> 标签：c#

我有非常简单的代码可以解释自己。

```
List<string> Files = new List<string>( Directory.EnumerateFiles(PathLocation)); 
```

但是，我现在希望让生活变得复杂，并且我有一个文件对象。

```
public class File
{
    public int FileId { get; set; }
    public string Filename { get; set; }
} 
```

是否有填充类的字符串属性的最佳方法，即是否有比使用 foreach 循环或类似循环更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T08:56:47.430

您可以使用 LINQ`Select`替换 foreach 循环：

```
List<File> files = Files.Select(s => new File() { FileId = id, Filename = s})
                        .ToList(); 
```

但无需创建新`List`的来优化您的代码：

```
List<File> files = Directory.EnumerateFiles(PathLocation)
                            .Select(s => new File() { FileId = id, Filename = s})
                            .ToList(); 
```

MSDN 在[这里](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T08:56:52.947

当然：

```
List<File> Files = Directory.EnumerateFiles(PathLocation).Select(f=> new File { FileId = /*...*/, Filename = f }).ToList(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T08:58:08.287

您可以将 的内容映射`Files`到`List<File>`：

```
var files = Files.Select(f => new File { Filename = f })
                 .ToList(); 
```

同样使用**LINQ**语法：

```
var query = from f
            in Files 
            select new File { Filename = f };

var files = query.ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T08:56:18.013

```
List<File> bigList;
var stringList = bigList.Select(f=>f.Filename); 
```

# sql-server-2008 - RS：年月过滤器 - 高亮线

> ID：12636716
> 
> 赞同：0
> 
> 时间：2012-09-28T08:54:48.940
> 
> 标签：sql-server-2008, reporting-services, filter, expression, highlight

我想突出显示早于当前月份的所有月份。通过在 Reporting Services 中创建表达式。我有一个月的这个表达，它有效：

```
=IIF(month(Fields!Date.Value) < month(today()), "Gold", "White") 
```

现在我想添加年份作为过滤器只是为了安全，不知道如何做到这一点：

```
=IIF(month(Fields!Date.Value) < month(today()), "Gold", "White") & IIF year(Fields!Date.Value) <= year(today()) 
```

任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:10:30.690

尝试这个

```
=IIF(month(Fields!Date.Value) < month(today()) AND year(Fields!Date.Value) <= year(today()), "Gold", "White") 
```

这可能不是正确的做法，但同时希望这会有所帮助

```
=IIF((year(Fields!Date.Value)< year(today())) OR (month(Fields!Date.Value) < month(today()) AND year(Fields!Date.Value) = year(today())), "Gold", "White") 
```

如果你描述你想做什么，可能会有更好的方法

# html - li 列表的悬停效果

> ID：12636718
> 
> 赞同：0
> 
> 时间：2012-09-28T08:55:06.547
> 
> 标签：html, css, hover, html-lists

我有一个`<ol>`添加了颜色的列表。这工作正常。但是当我添加一个具有 2 个标签的 div 时，悬停效果不适用。

在我的代码中，第二次没有发生悬停`<li>`。

**HTML：**

```
<div class="test">
  <ol>
    <a href="#"><li><div><span>test 1</span><p>Mvdshe</p></div></li></a>
    <a href="#"><li><div><span>test 12</span><p>sdgmksgb</p></div>
    <div class="icons"><a href="#" class="play"></a><span class="dividr"></span><a href="#" class="suffle"></a></div></li></a>
    <a href="#"><li><div><span>test 11</span><p>Name dgdg</p></div></li></a>
  </ol>
</div> 
```

**CSS：**

```
.test{ position:relative; height:auto; width:100%}
.test ol{margin:0; padding:0; font:normal 30px 'SegoeWPLight', Verdana, Geneva, sans-serif; color:#afafaf; text-align:left; list-style:none; counter-reset: listCounter;}
.test ol li{vertical-align:middle;  padding:10px 20px; border-bottom:#d4d4d4 solid 1px; border-top:#fff solid 1px; counter-increment: listCounter;}
.testol li:before {  content: counter(listCounter) " "; width:30px; margin-right:15px;    display: inline-block;    text-align: right;   }
.test ol li span{vertical-align:middle; display:block; color:#008fcd; font:normal 18px 'SegoeWPLight', Verdana, Geneva, sans-serif;}
.test ol li p{vertical-align:middle; display:block; margin:0; padding:0; font:normal 14px 'SegoeWPLight', Verdana, Geneva, sans-serif; color:#797979;}
.test ol li img{vertical-align:middle; padding-left:10px }
.test ol li div{ display:inline-block; margin-left:25px; vertical-align:middle; }
.test ol a{ text-decoration:none; font:normal 30px 'SegoeWPLight', Verdana, Geneva, sans-serif; color:#afafaf;}
.test ol a:hover li{ background-color:#f4f4f4}
.test ol a.mus_active li{ background-color:#f4f4f4}
.icons{display:inline-block; float:right; vertical-align:middle; width:auto;  margin-top:20px}
.play{background:url(http://www.timeshighereducation.co.uk/magazine/graphics/search_icon_big.gif) no-repeat left; width:25px; height:25px; background-size:15px; display:inline-block !important;  }
.suffle{background:url(../images/suffle.png) no-repeat left;  width:25px; height:25px; display:inline-block !important}
.dividr{background:url(http://www.timeshighereducation.co.uk/magazine/graphics/search_icon_big.gif) no-repeat left; width:3px; height:28px; display:inline-block !important;  margin:0 8px 10px 0} 
```

↪[在 JSFiddle 查看此代码](http://jsfiddle.net/pUyHA/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:06:42.067

试试这个 [http://jsfiddle.net/bFVGr/2/](http://jsfiddle.net/bFVGr/2/)

```
.test ol li { vertical-align:middle;  border-bottom:#d4d4d4 solid 1px; border-top:#fff solid 1px; counter-increment: listCounter; }

.test ol li > a{display:block; padding:10px 20px;}

.test ol li > a:hover { background-color:#f4f4f4 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:14:06.947

如果您不想按照其他人的建议更改列表结构，您可以做的一件愚蠢的事情是将第二个列表放入 div 并应用相同的效果；）

```
<div id = "special">
<a href="#">
 <li>
    <div>
        <span>test 12</span><p>sdgmksgb</p>
    </div>

    <div class="icons">
        <a href="#" class="play"></a><span class="dividr"></span>
        <a href="#"class="suffle"></a>
    </div>
 </li>
</a>
</div> 
```

和

```
 .test #special:hover{background-color:#f4f4f4} 
```

[在这里查看小提琴代码](http://jsfiddle.net/pUyHA/8/)

**编辑**
要使整个 div 可点击，我认为这是你想要的，你可以做

```
 .test #special a{display:block} 
```

或看到[这个](https://stackoverflow.com/questions/796087/make-a-div-into-a-link)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T08:59:44.670

将 LI 放在**锚**标记中是错误的。像这样写：

```
<ol>
 <li><a></a></li>
 <li><a></a></li>
</ol> 
```

在 FF & chrome 中，您的代码呈现如下：

```
<ol>
<a href="#"><li><div><span>test 1</span><p>Mvdshe</p></div></li></a>
<a href="#"></a><li><a href="#"><div><span>test 12</span><p>sdgmksgb</p></div>
</a><div class="icons"><a href="#"></a><a class="play" href="#"></a><span class="dividr"></span><a class="suffle" href="#"></a></div></li>
<a href="#"><li><div><span>test 11</span><p>Name dgdg</p></div></li></a>

</ol> 
```

# windows-phone-7 - 如何在 wp7 中将堆栈面板的子级滑动到另一个堆栈面板？

> ID：12636719
> 
> 赞同：-2
> 
> 时间：2012-09-28T08:55:09.040
> 
> 标签：windows-phone-7

我是 Windows 电话的新手。我有一个疑问？我有一个以 Image 和 textblock 作为其子级的堆栈面板。在这个堆栈面板周围，有很多具有不同图像和文本块内容的堆栈面板。周围的堆栈面板之一没有孩子。我想在右侧、左侧、顶部和底部方向上滑动任何带有孩子的堆栈面板。工作是检查滑动方向的堆栈面板，它是否包含任何子项。如果它不包含任何子项，则将主单击堆栈面板的子项更改为空堆栈面板。然后清除主堆栈面板中的子项。怎么做？

请用一些编码部分解释我。感谢你所做的一切....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:44:45.373

如果你查看谷歌，你可以在 WPF中找到[十五个拼图游戏的这个 WPF](http://en.wikipedia.org/wiki/Fifteen_puzzle)[实现](http://www.codearsenal.net/2012/06/wpf-animation-fifteen-puzzle-game.html#.UGWpHU196js)。

您只需要将其“翻译”为 Windows Phone 7。

# asp.net - 获取 youtube 频道订阅者的数量

> ID：12636722
> 
> 赞同：1
> 
> 时间：2012-09-28T08:55:26.787
> 
> 标签：asp.net, youtube-api

我需要在我的 asp.net 网站上获取 youtube 频道的订阅者数量，我已经搜索了文档（https://developers.google.com/youtube/2.0/developers_guide_protocol_activity_feeds），我知道我必须把这个：

[http://gdata.youtube.com/feeds/api/users/PageName](http://gdata.youtube.com/feeds/api/users/PageName)

但即使我在浏览器中打开它也不会提供任何帮助，将不胜感激。

有我可以使用的特殊库或 api 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:56:33.170

您可以执行以下操作：

```
System.Net.WebClient wb = new System.Net.WebClient();
string str = wb.DownloadString("http://gdata.youtube.com/feeds/api/users/TheNewYorkTimes");
Response.Write(getCount(str));

public static string getCount(string video)
        {
            if (video.Contains("="))
            {
                string str = "subscriberCount='";
                string videoid = video.Substring(video.IndexOf("subscriberCount") + str.Length);
                if (videoid.Contains("'"))
                {
                    videoid = videoid.Remove(videoid.IndexOf("'"));
                    return videoid;
                }
                else
                {
                    return "";
                }
            }
            else
            {
                return "";
            }
        } 
```

# php - Yii OAuth 实现

> ID：12636723
> 
> 赞同：2
> 
> 时间：2012-09-28T08:55:29.450
> 
> 标签：php, oauth, yii, yii-extensions

要求：- Yii，OAuth 实现来验证和获取用户数据。我发现有两个扩展。Eauth（支持 OAuth 2.0 和其他社交网站）和 Eoauth（OAuth 1.0）。纠正我如果我错了。

我不必验证任何社交网站。这是一个与我需要获取数据的网址不同的网址。

现在我可以使用“eoauth”扩展成功登录并进行身份验证，但我还需要获取有关用户的信息。我没有找到任何功能或方法如何从位于 OAuth 层下的 url 获取数据。Eauth 或 Eoauth 是否支持获取或必须自定义编码？如果此扩展不这样做，那么我可以验证和获取数据的另一种方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T16:13:12.470

当然，Eauth 支持获取用户数据。让我们看看 Eauth 结构。我们有目录`/services`和`/custom_services`类`EOAuthService`。EOAuthService 包含方法`makeSignedRequest()`，从第三方站点返回受保护的资源。

所以，我们可以从我们的 serviceClass 中调用这个方法，扩展`EOAuthService`. 例如，`FacebookOAuthService`目录中的类`/services`。该类包含受保护的方法`fetchAttributes()`，它调用方法`makeSignedRequest($url)`并从第三方站点（在我们的示例中为 FB）获取 $info（以 JSON 格式）。这个对象的属性——它是我们用户的数据。怎么样`/custom_services`？该目录包含用于调整我们的“BaseServiceClass”的类。

因此，例如，`CustomFacebookOAuthService` *extends* `FacebookOAuthService` *扩展* `EOAuthService`。

您需要创建自己的类，该类将为您的第三方站点发出签名请求并获得正确的响应（例如，以 JSON 格式）。然后获取获取的信息 - 瞧！当然，用户必须通过第三方站点的身份验证才能通过 oauth 在您的应用程序上进行精细身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:05:00.353

虽然旧但你只需要使用 CURL 请求到最终 URL，你就会得到你的数据。我猜这些模块没有获取数据的功能。我希望这可以帮助你。我在我的一个代码中使用过，它是成功的

```
public function GetData($url){
        $signatureMethod = new OAuthSignatureMethod_HMAC_SHA1();
        $request = OAuthRequest::from_consumer_and_token($this->consumer,$this->token, 'GET',    $url, array());
        $request->sign_request($signatureMethod, $this->consumer, $this->token);        
        $fetchUrl = $request->to_url();
        $response = Yii::app()->CURL->run($fetchUrl);     
        return json_decode($response);               
    } 
```

# c# - 为什么相同的 DateTime 值会为不同的用户产生不同的显示时间？

> ID：12636724
> 
> 赞同：6
> 
> 时间：2012-09-28T08:55:32.703
> 
> 标签：c#, asp.net, .net, localization, timezone

在我的 ASP.NET 应用程序中，我使用[此处](https://stackoverflow.com/a/1600990)的代码来查找应用程序的构建日期为 UTC。然后从汇编文件中读取的 UTC 值格式化如下：

```
//DateTime time    
return time.ToString("dd MMM yyyy HH:mm:ss"); 
```

现在一个用户打开该应用程序提供的页面并看到

```
28 сен 2012 04:13:56 
```

并通知打开同一页面并看到的其他用户

```
27 Sep 2012 12:14:32 
```

这两个请求都由部署用于从同一个包中清理 Windows Azure VM 的同一个应用程序提供服务，因此对于两个用户运行的代码肯定是完全相同的。

显然，由于来自不同用户的请求的本地化不同，字符串的格式也不同。一位用户将月份显示为`Sep`，而另一位用户将其视为`сен`（相当于`Sep`俄语）。

为什么时间不同？它们是否也根据某些取决于本地化的时区进行调整？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:03:57.610

最明显的解释是，这些`DateTime`值实际上是不同的。

您链接的代码使用`GetCallingAssembly`，您应该注意[MSDN 说](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getcallingassembly.aspx)：

> 如果调用 GetCallingAssembly 方法的方法由即时 (JIT) 编译器内联展开，或者如果其调用方内联展开，则 GetCallingAssembly 返回的程序集可能会意外不同

为了调试它，我会首先显示`time.Ticks`和`time.Kind`：如果它们是相同的，你就知道这是一个显示问题。如果它们不同，您需要查看如何生成时间价值。

# gwt - 在 GWT UiBinder 中使用非 CSS 常量

> ID：12636726
> 
> 赞同：1
> 
> 时间：2012-09-28T08:55:45.080
> 
> 标签：gwt, uibinder

我正在尝试在 GWT 的 UiBinder XML 中使用常量或定义。我找到的所有问题和答案都与 CSS 常量有关，在元素中使用 @def 注释，但这不是我需要的。举个例子：

```
<g:Button width="60" height="24">Hello</g:Button> 
```

如果我的页面上有 50 个按钮，所有按钮都具有相同的尺寸，我不想像上面所示那样设置每个按钮的尺寸。如果我想更改宽度，我必须对页面上的所有按钮执行此操作。所以，我正在寻找的是这样的：

```
<g:Button width="{myWidth}" height="{myHeight}">Hello</g:Button> 
```

在 UiBinder XML 文件的开头某处指定了常量“myWidth”和“myHeight”。我试过这样做，但我无法让它工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:52:09.670

A. 你是这样做的：

```
<ui:with field="styleConstants" type="...constants.StyleConstants" />

<g:Button width="{styleConstants.myWidth}" height="{styleConstants.myHeight}">Hello</g:Button> 
```

显然，StyleConstants 应该有 myWidth() 和 myHeight() 方法。

B. 将相同大小设置为 50 个按钮是错误的。这就是 CSS 类的用途。定义一个 CSS 类并将其分配给每个按钮：

```
<g:Button styleName="button">Hello</g:Button> 
```

为此，您可以使用外部 CSS 文件或 CSS 资源。

# spring-batch - 如何将tasklet等定义为嵌套bean？

> ID：12636729
> 
> 赞同：0
> 
> 时间：2012-09-28T08:55:53.800
> 
> 标签：spring-batch

当我使用 ref 属性定义一个 tasklet 时，一切都很好：

```
<step id="unzipFiles_010_014" next="verifyXmlSignatures_010_014">
    <tasklet ref="unzipTasklet_010_014" />
</step> 
```

但是，在某些情况下，我想将 bean 直接定义为嵌套 bean，例如：

```
<step id="unzipFiles_010_014" next="verifyXmlSignatures_010_014">
    <tasklet>
      <bean scope="step" class="some.package.UnZipTasklet">
            <property name="file" ref="any.file" />
        </bean>
    </tasklet>
</step> 
```

现在我得到一个奇怪的错误：

```
cvc-complex-type.2.4.a: Invalid content was found starting with
element 'bean'. One of '{"http:// 
www.springframework.org/schema/batch":chunk,
"http://www.springframework.org/schema/ 
batch":transaction-attributes,
"http://www.springframework.org/schema/batch":no-rollback-exception-classes,
"http://www.springframework.org/schema/batch":listeners,
"http://www.springframework.org/schema/  beans":bean,
"http://www.springframework.org/schema/beans":ref}' is expected. 
```

**是豆子，不是吗？**

在定义验证器（*DefaultJobParametersValidator*）时，我得到了同样的奇怪行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T07:03:06.083

你也可以这样做：

```
<step id="unzipFiles_010_014" next="verifyXmlSignatures_010_014">
    <tasklet ref="unZipTasklet" scope="step">
    </tasklet>
</step> 
```

像以前一样使用bean：

```
<bean id="unZipTasklet" class="some.package.UnZipTasklet">
     <property name="file" ref="any.file" />
</bean> 
```

但就像 maxhax 所说，这只是一个命名空间问题......试试 maxhas 的例子和这个命名空间配置：

```
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:batch="http://www.springframework.org/schema/batch"
    xsi:schemaLocation=
        "http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:39:48.537

可能适用于您的批处理：命名空间。

例如：

```
<batch:step id="copyToWorkdir" next="concatStrings">
    <batch:tasklet>
        <bean class="your.tasklet.Class" scope="step">
            <property name="inFile" value="xxx" />
            <property name="outFile" value="xxx" />
        </bean>
    </batch:tasklet>
</batch:step> 
```

# vb.net - 快速报告字符串中的转义 [方括号]

> ID：12636732
> 
> 赞同：3
> 
> 时间：2012-09-28T08:56:02.533
> 
> 标签：vb.net, fastreport, square-bracket

早上好。

我正在尝试使用 Fast Reports v1.4.42

一切都很顺利，直到我尝试连接一个字符串。

我正在尝试创建一个类似于以下内容的字符串。

1 - [此处命名]

2 - [另一个名字]

3 - [测试名称]

我尝试使用以下代码执行此操作。

```
CType(Report.GetColumnValue("Table1.Code"), String) & " [" & CType(Report.GetColumnValue("Table1.Name"), String) & "]" 
```

不幸的是，我已经知道使用 [方括号] 意味着 FastReports 会查找名称在括号内的变量。

因此，快速报告正在寻找（使用上面的示例），名为 Name、Here、Another、Name 等的变量......

有没有一种方法可以将 [方括号] 放入快速报告字符串中而不会掉落。

如果有什么不同，我将使用插入 VB.NET 项目的快速报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-24T07:05:08.440

这里的答案是：

从/的`Brackets`属性中删除值`TextBox``Cell`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:19:55.973

有关更多信息，您可以查看文档，关于 .net 的 idk，但 delphi 文档部分是用户手册的 2.5，您可以在其中使用“ExpressionDelimiters”属性自定义分隔符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-19T14:17:06.293

这对于 FastReport.Net 来说非常简单，这是有效的：

```
["[YourTextInSquareBrackets]"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-30T08:39:45.730

我已将括号属性从 [,] 更改为空，它有效！请参考：[链接](https://i.ibb.co/brSyzxN/Fast-Report-Text-Object-Prop.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-09T02:08:00.227

我遇到了同样的问题，我尝试了@rafalkasa 的答案并且它有效。

文本对象值：

你好 ['['] [dataset.field] [']']

输出：

你好【速报】

# dart - 访问用户环境变量

> ID：12636738
> 
> 赞同：12
> 
> 时间：2012-09-28T08:56:26.717
> 
> 标签：dart, dart-io

在我的 .bashrc 文件中：

```
export DART_SDK=/home/nicolas/dart/dart-sdk 
```

在命令行中，当我“回显”它时它会起作用。但是我看不到这个用户变量`dart`，我只看到系统变量但不是我的：

```
var env = Platform.environment;
env.forEach((k,v) => print("Key=$k Value=$v")); 
```

我试过：

*   在窗户上，它可以工作
*   在mac上但不起作用

我的用户变量定义不明确吗？我的代码不好吗？这是一个错误？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-28T14:30:13.020

使用以下代码：

```
import 'dart:io'; // Server side / command line only package.

main() {
  Map<String, String> env = Platform.environment;
  env.forEach((k, v) => print("Key=$k Value=$v"));
} 
```

我能够覆盖 Windows 和 Mac 上的环境变量。在 Mac 上，我必须将该行添加到 .bash_profile （我的 Mac 上未加载 .bashrc）。

约翰

这是飞镖文档的链接：[https ://api.dartlang.org/1.13.0/dart-io/Platform-class.html](https://api.dartlang.org/1.13.0/dart-io/Platform-class.html)

# javascript - 使用通用解决方案拆分轮播内容时的无限循环

> ID：12636739
> 
> 赞同：0
> 
> 时间：2012-09-28T08:56:26.903
> 
> 标签：javascript, jquery, carousel

基本上，我得到了一个无限循环，也许我工作太努力了，但我不明白为什么。

* * *

**语境：**

我正在使用旋转木马（Bootstrap）。轮播的内容被生成并推送到一张轮播*幻灯片*`5`中，然后目标是如果里面的项目数量超过某个预定义的最大长度属性（ ），则将内容分成多张幻灯片。对于轮播的特定用例（如果表格行超过 5 行，表格将分布在多张幻灯片上），我得到了这个工作正常，但它不够通用。发生的事情是 JS 将采用溢出的表格行（即索引 5 及以上），从函数中的硬编码 HTML 字符串创建一个新幻灯片（一个*幻灯片*div，其中包含表格的所有标记但为空）并推送那些额外的行。

为了使其更通用，我决定使用类似`carousel_common_list`and的类，在我解释过的情况下，`carousel_common_item`这些类将应用于`tbody`and s。`tr`然后，我必须以解耦的方式处理模板。我试图做的是，克隆原始的唯一幻灯片，清空`carousel_common_list`并将任何溢出`carousel_common_item`的 s 推入其中，依此类推。但我得到一个无限循环。

* * *

## 代码

到目前为止，我所说的*幻灯片被称为代码中的一个**项目*（以匹配 Bootstrap 的轮播`item`类*幻灯片*）。

```
var carousels = $('div.carousel'),
    carouselCommonListClass = 'carousel_common_list',
    carouselCommonItemClass = 'carousel_common_item',
    items_per_slide = 5;

$.each(carousels, function (index, element) {//for each carousel

    var $carousel = carousels.eq(index),
        $items = $carousel.find('.item');

    var getItemTemplate = function ($item) {
        $copy = $item.clone();//take the html, create a new element from it (not added to DOM)
        $copy.find('.' + carouselCommonListClass).empty();
        $copy.removeClass('active');
        return $copy;
    }

    var splitUpItem = function ($item, $itemTemplate) {
        var $bigList = $item.find('.' + carouselCommonListClass), group;
        while ((group = $bigList.find('.' + carouselCommonItemClass + ':gt(' + (items_per_slide - 1 ) + ')').remove()).length) {
            var $newItem = $itemTemplate;
            $newItem.find('.' + carouselCommonListClass).prepend(group);
            $newItem.insertAfter($item);
            splitUpItem($newItem, $itemTemplate);//infintely called
        }
    }

    //foreach item
    $.each($items, function (item_index, item_element) {//for each slide, in each carousel

        var $item = $items.eq(item_index);

        splitUpItem($item, getItemTemplate($item));
    });
}); 
```

`//infintely called`仅供参考，当标记为的行被注释掉时，这就像预期的那样工作；即将一张超大的幻灯片分成一张`items_per_slide`长度的幻灯片和另一张幻灯片（`items_per_slide`如果原来的唯一幻灯片长度过长，则长度可能会`items_per_slide * 2`过长。

另外，我接受了这个[答案](https://stackoverflow.com/a/1644837/727074)并将其修改为`splitUpItem()`.

* * *

**笔记：**

我知道这不是像我一样在多张幻灯片上拆分表格、列表等的最有用或最容易访问的解决方案，但如果你有更好的主意，请回答[我的未决问题](https://stackoverflow.com/questions/12157057/content-sliders-valid-usage-for-tables-lists-etc)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:50:23.023

您本身并没有无限循环，因为您不会无限陷入同一个`while`循环。正如您所提到的，当您删除该`//infinitely called`行时，您就可以了。第一次通过该 while 循环，您计算的长度将等于`gt:(4)`$item 中所有列表中的项目数（带有 ）。然后删除所有这些项目，因此下一次通过将具有等于 0 的数字。这将始终是该循环的行为，因此它确实不需要是循环，但这不是主要问题。

问题是它是一个递归调用。而你唯一能防止递归调用无限的就是你的while循环中的条件，但这个条件总是会在第一次通过时得到满足。事实上，如果 $item 有 5 个列表，每个列表有 3 个项目`gt:(4)`，那么 $newItem 将有 5 个列表，每个列表有 5 x 3 = 15 个项目。因此，当`splitUpItem`在 $newItem 上调用时，您的 while 循环中的条件将首先再次为非零。然后它会再次被调用，这个数字将是 5 x 15 = 75。依此类推。换句话说，你递归地调用这个函数，并且你要防止这个调用被无限多次调用是检查某个数字是否为 0，但是随着每次递归调用，那里的数字实际上会呈指数增长`splitUpItem`。

希望这能回答您关于为什么它“无限循环”的问题。得开始工作了，但如果到那时还没有其他人的话，我明天会尝试提出一种更好的方法来拆分幻灯片。

# android - Android：HttpClient 参数 - 连接和套接字超时

> ID：12636741
> 
> 赞同：1
> 
> 时间：2012-09-28T08:56:36.517
> 
> 标签：android, http-post, httpclient

我在互联网上找不到任何有用的教程，也找不到开发者网站上的文档。

在我的应用程序中，我正在使用 HttpPost 连接到 Web 服务器，当**没有 Internet**连接但**wifi**连接时，它会显示白屏，并且在 10-15 秒后出现“UnknownHostException”。

我抓住了这个异常并做了吐司

```
Unable to connect, check your internet connection. 
```

并关闭活动（或应用程序，因为我在第一个活动上使用完成（））。

当**wifi**本身关闭时，我会立即吐司“

```
You need internet connection to use this Application 
```

但第一种情况很烦人。花 10-15 秒的时间，然后展示吐司。

所以我使用**了 HttpParameters**并添加了一个**5 sec ConnectionTimeout**参数。

但应用程序的工作方式与以前相同（此参数无效）。

如果我点击 ConnectionTime（超过 5 秒），我如何跟踪。这样我就可以像吐司一样

```
Slow internet connection 
```

**此外，当wifi打开但没有互联网**时，为什么互联网连接检查不起作用

 **这是我在启动应用程序时检查的内容：

```
cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

if (isOnline(cm, this, SignUpActivity.this)){
//continue
}

public static boolean isOnline(ConnectivityManager cm, Context c, Activity a) {

    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }

    Toast.makeText(c, "You need internet access to run this application",
            Toast.LENGTH_SHORT).show();
    a.finish();
    return false;
} 
```

我只检查设备的 wifi 是否打开。如果是这样，我如何检查我是否有互联网连接，而不仅仅是 wifi

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:03:08.290

至于第一个问题，请尝试使用[SocketTimeout](http://developer.android.com/reference/java/net/Socket.html#setSoTimeout%28int%29)代替。

至于第二个问题，线

```
NetworkInfo netInfo = cm.getActiveNetworkInfo(); 
```

**只会获得 Wi-fi 状态**（即手机 wifi 天线已打开），但不会获得实际连接。该函数立即返回，因此如果 wifi 关闭，您无需进一步检查连接即可敬酒。但是当打开 wi-fi 时，你应该继续检查你的服务器的实际可达性，比如

```
InetAddress.getByName(host).isReachable(timeOut) 
```**

# php - 如何在保存表单之前转换值？

> ID：12636747
> 
> 赞同：0
> 
> 时间：2012-09-28T08:56:49.693
> 
> 标签：php, symfony-1.4

我想在保存表单**之前转换一个值。**我不知道在哪里添加代码，因为唯一的方法是`form->save()`

请你帮助我好吗 ？

**编辑：**

```
 if ($this->form->isValid())
  {
    $url = $this->form->getObject()->getLink();
    parse_str(parse_url($url, PHP_URL_QUERY), $my_array_of_vars);
    $this->form->getObject()->setLink($my_array_of_vars['v']); 

    $song = $this->form->save();

    $this->getUser()->setFlash('notice', 'Thank you, the song has been added');

    $this->redirect('@homepage');
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T08:27:59.020

@pankar 的答案几乎是好的。但是`$this->form->save()`将覆盖`setLink`.

首先，定义检索 youtube id 的函数，如[这里](https://stackoverflow.com/a/6556662/569101)在新*工具*类中定义的那样：`lib/myTools.class.php`

```
<?php

class myTools
{
  /**
   * Get youtube video ID from URL
   *
   * @see https://stackoverflow.com/a/6556662/569101
   * @param string $url
   * @return string Youtube video id or FALSE if none found. 
   */
  public static function youtube_id_from_url($url)
  {
    $pattern = 
      '%^# Match any youtube URL
      (?:https?://)?  # Optional scheme. Either http or https
      (?:www\.)?      # Optional www subdomain
      (?:             # Group host alternatives
        youtu\.be/    # Either youtu.be,
      | youtube\.com  # or youtube.com
        (?:           # Group path alternatives
          /embed/     # Either /embed/
        | /v/         # or /v/
        | /watch\?v=  # or /watch\?v=
        )             # End path alternatives.
      )               # End host alternatives.
      ([\w-]{10,12})  # Allow 10-12 for 11 char youtube id.
      $%x'
      ;
    $result = preg_match($pattern, $url, $matches);
    if (false !== $result)
    {
      return $matches[1];
    }
    return false;
  }
} 
```

然后，使用以下内容更新您的操作：

```
if ($this->form->isValid())
{
  // save the form
  $song = $this->form->save();

  // update saved value
  $youtube_id = myTools::youtube_id_from_url($song->getLink());
  $song->setLink($youtube_id);
  $song->save();

  $this->getUser()->setFlash('notice', 'Thank you, the song has been added');

  $this->redirect('@homepage');
} 
```

顺便说一句，如果您**只在一个地方**使用您的表单，这种方法是可以的。由于更新是在操作中执行的，而不是在表单类中。否则，正如@glerendegui 所说，您将不得不在表单类中执行此操作。但我宁愿用 in`doUpdateObject`而不是`doSave`. 由于代码说：

```
 /**
   * Updates the values of the object with the cleaned up values.
   *
   * If you want to add some logic before updating or update other associated
   * objects, this is the method to override.
   *
   * @param array $values An array of values
   */
  abstract protected function doUpdateObject($values); 
```

所以我会这样做，在你的表单（`lib/form/doctrine/yourForm.class.php`）内：

```
class yourForm extends BaseYourForm
{
  public function configure()
  {
  }

  protected function doUpdateObject($values)
  {
    $youtube_id = myTools::youtube_id_from_url($values['link']);
    $this->getObject()->setLink($youtube_id);

    return parent::doUpdateObject($values);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:45:28.477

在*绑定*表单后的`execute*`操作中：

 ***OP输入后编辑**

```
 if ($this->form->isValid())
  {
    $url = $this->form->getObject()->getLink(); // get the url

    $videoId=parse_url($url, PHP_URL_QUERY); // extract the videoid portion

    $this->form->getObject()->setLink($videoId); // update object with the new value

    $song = $this->form->save(); // save the object

    $this->getUser()->setFlash('notice', 'Thank you, the song has been added');

    $this->redirect('@homepage');
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T21:10:22.663

您应该在表单本身中添加此行为，而不是在操作中（这就是 symfony 表单的想法）。因此，覆盖`doSave($con = null)`表单的，例如：

```
class yourForm extends whateverForm {

 public function configure() { ... }
 public function doSave($con = null) {
   // process form values
   return parent::doSave();
 }
} 
```*

# winapi - 从 *.icl、*.dll 中提取图标名称

> ID：12636750
> 
> 赞同：0
> 
> 时间：2012-09-28T08:57:29.240
> 
> 标签：winapi, icons

图标库是包含一个或多个图标及其名称的文件。要提取图标，我们使用 ExtractIcon 函数。用什么函数来提取图标名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:17:47.360

假设您指的是资源 ID/名称，那么您将需要使用标准资源枚举函数 ( `EnumResourceTypes`, `EnumResourceNames`, `EnumResourceLanguages`) 枚举它们。

# image - 文件和图像中缺少 SilverStripe 图像

> ID：12636754
> 
> 赞同：0
> 
> 时间：2012-09-28T08:57:36.540
> 
> 标签：image, silverstripe

我正在使用 SilverStripe 2.4.7 和一个 php 库来生成 QR 码的 png 图像。这一切都很完美，但我注意到即使图像位于文件夹中，它们也不会显示在我的 CMS 的“文件和图像”部分中。我试过刷新缓存，但这没有帮助。

任何人都可以对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:01:39.443

不挂断。找到了答案。

显然 2.4 有一个小怪癖，您必须单击“文件和图像”选项卡中的“查找新文件”按钮。这解决了我的问题，但对 CMS 的用户来说很烦人。

# iphone - 如何使用工具栏连接两个视图控制器

> ID：12636755
> 
> 赞同：-1
> 
> 时间：2012-09-28T08:57:38.527
> 
> 标签：iphone, objective-c, ios, xcode

有两个视图控制器（FirstViewController，sixViewController），我使用界面生成器在导航栏中创建了一个工具栏按钮，当我按下工具栏按钮时，它应该将我引导到 SixView 控制器，在 SixView 控制器中，我有返回按钮以在动画中返回 firstviewController ，我的工具栏名称是 Item.help 需要人，因为我还是 iOS 新手。

```
UIViewController *viewController6 = [[sixViewController alloc]initWithNibName:@"FourthViewController" bundle:nil];
UIViewController *viewController5 = [[FifthViewController alloc]initWithNibName:@"FifthViewController" bundle:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:07:19.080

听起来您最好使用 NavigationController 来处理导航栏的放置和自动管理 viewController 堆栈。

UINavigationController 类参考是一个很好的起点

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

# php - 从字符串中去除定义的字符

> ID：12636757
> 
> 赞同：-1
> 
> 时间：2012-09-28T08:57:50.003
> 
> 标签：php, mysql, strip

我的网站有一个奇怪的问题，我有一个记录所有搜索并将这些搜索词插入数据库的脚本，问题是由于搜索引擎机器人开始在我的网站周围偷偷摸摸，他们让我的脚本产生搜索关键字，如“搜索关键字//////////////////////////////////////// “我想在 mysql 上索引之前去除那些字符（ ////////// ）。

这就是我所拥有的：

```
$search=htmlspecialchars($_GET['load']); 
$say=mysql_query("SELECT * FROM madvideo WHERE MATCH (baslik) AGAINST ('*$search*' IN BOOLEAN MODE)"); 
$saydim=mysql_num_rows($say);
$count = $saydim;
$page = !empty($_GET["page"]) ? intval($_GET["page"]) : 1;
$s = ($page-1)*$perpage;
$sayfasayisi=ceil($count/$perpage);
if(ayaral("Arananlar-Kaydet")=="1") {
$ekle=cevir($search);
@mysql_query("insert into tag (baslik,tr,tarih) values ('$search','$ekle',now()) "); } 
```

变量“ $search ”将调用搜索词，我不知道我必须使用什么剥离语法来剥离那个讨厌的 ///////// 字符。

编辑：创建单词的代码是这样的：

```
$vtitle = str_replace("\r\n\r\n", ' ', $vtitle); 

$words = explode(' ', $vtitle); 

$k = count($words); 
$k3 = ceil($k/3); 

$new = array(); 
for ($i=0; $i<$k; $i+=$k3) { 
    $new[] = join(' ', array_slice($words,$i, $k3)); 
} 
$tag1 = $new[0]; 
$tag2 = $new[1]; 
$tag3 = $new[2]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:07:20.783

使用 MySQL [TRIM](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)函数从字符串末尾删除，如下所示：

```
TRIM(TRAILING '/' FROM <string>)

@mysql_query("insert into tag (baslik,tr,tarih) 
values (TRIM(TRAILING '/' FROM '$search'),'$ekle',now())") 
```

要从开头和结尾修剪，请使用以下

```
TRIM(BOTH '/' FROM <string>)

@mysql_query("insert into tag (baslik,tr,tarih) 
values (TRIM(BOTH '/' FROM '$search'),'$ekle',now())") 
```

要删除所有出现的字符串，请使用[REPLACE](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_replace)函数，如下所示：

```
REPLACE(<string>, '/', '')

@mysql_query("insert into tag (baslik,tr,tarih) 
values (REPLACE('$search', '/',''),'$ekle',now())") 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:08:37.340

如果`/`字符总是出现在 的末尾`$search`，您可以使用[`rtrim`](http://php.net/rtrim)第二个（可选）参数：

```
$search = "search keywords////////////////////////////////////////////////";
$search = rtrim($search, '/ ');
echo $search; // prints 'search keywords' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T09:04:12.300

编辑：

真实的例子...

```
<?php

if(isset($_REQUEST['str'])) {

    $search = $_REQUEST['str'];

    $ser_chk = strpos($search, "/");
    if ($ser_chk > -1) {
    $search = str_replace("/", "", $search);
    }

}

?>

<h1><?php print $search; ?></h1>

<form action="" method="post">

<input type="text" size="100" value="search keywords////////////////////////////////////////////////" name="str" />
<input type="submit" />

</form> 
```

测试链接： http: [//simplestudio.rs/tsto.php](http://simplestudio.rs/tsto.php)

至少做：

```
$search = mysql_real_escape_string($search); 
```

您也可以检查该字符，如果找到，只需用空字符串替换它们。

```
$ser_chk = strpos($search, "/");
if ($ser_chk > -1) {
$search = str_replace("/", "", $search);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:03:49.153

```
$regex = "/\//";
$string = "////search";
$string = preg_replace($regex, '', $string);

echo $string; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T09:16:31.027

字符重复的灵活解决方案将是正则表达式。

```
$output = preg_replace('/\/[\/]+/', '/'. $input); 
```

它将处理任意数量的“/”并将其替换为单个“/”。

# iphone - iOS6 appstore：在Appstore上搜索与定义的关键字对应的应用程序的URL？

> ID：12636760
> 
> 赞同：0
> 
> 时间：2012-09-28T08:58:02.127
> 
> 标签：iphone, ios, xcode, xcode4, app-store

到目前为止（iOS 6 之前），可以在应用商店中显示所有与定义关键字对应的应用。要使用的 URL 如下：

[http://phobos.apple.com/WebObjects/MZSearch.woa/wa/search?WOURLEncoding=ISO8859_1&lang=1&output=lm&media=software&term=SEARCH_TERM1+SEARCH_TERM2+SEARCH_TERM3](http://phobos.apple.com/WebObjects/MZSearch.woa/wa/search?WOURLEncoding=ISO8859_1&lang=1&output=lm&media=software&term=SEARCH_TERM1+SEARCH_TERM2+SEARCH_TERM3)

此 URL 在 iOS6 上不再有效。

是否有任何 URL 可以在 iOS 6 appstore 上执行搜索？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:38:38.410

这对我有用：

[http://ax.search.itunes.apple.com/WebObjects/MZSearch.woa/wa/search?media=software&term=SEARCH_TERMS](http://ax.search.itunes.apple.com/WebObjects/MZSearch.woa/wa/search?media=software&term=SEARCH_TERMS)

# css - 垂直居中的孩子与共同的父母

> ID：12636762
> 
> 赞同：1
> 
> 时间：2012-09-28T08:58:07.043
> 
> 标签：css

我有一个父 div 有几个孩子[http://jsfiddle.net/thiswolf/FUqSP/](http://jsfiddle.net/thiswolf/FUqSP/)我希望将每个 div 垂直居中在包含 child 的孩子中。例如我想在**child_one 中居中 child_two** **。**我有这个css

 **```
.parent{
width:300px;
height:300px;
background-color:orange;
display:table-cell;
vertical-align:middle;
}
.child_one{
width:100px;
height:100px;
background-color:purple;
margin-left:auto;
margin-right:auto;
}
.child_two{
width:50px;
height:50px;
background-color:pink;
margin-left:auto;
margin-right:auto;
}
.child_three{
width:25px;
height:25px;
background-color:yellow;
margin-left:auto;
margin-right:auto;
}
.child_four{
width:12px;
height:12px;
background-color:red;
margin-left:auto;
margin-right:auto;
} 
```

这是html

```
<div class="parent">
<div class="child_one">
<div class="child_two">
<div class="child_three">
<div class="child_four">
</div>
</div>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:09:08.787

在每个孩子身上添加这个

位置：相对；
最高：25%；

这里是完整的 CSS，

```
.parent{
width:300px;
height:300px;
background-color:orange;
display:table-cell;

 }
.child_one{
width:100px;
height:100px;
background-color:purple;
margin-left:auto;
margin-right:auto;
 position: relative;
top: 25%;
}
.child_two{
width:50px;
height:50px;
background-color:pink;
margin-left:auto;
margin-right:auto;
 position: relative;
top: 25%;
}
.child_three{
width:25px;
height:25px;
background-color:yellow;
margin-left:auto;
margin-right:auto;
 position: relative;
top: 25%;
}
.child_four{
width:12px;
height:12px;
background-color:red;
margin-left:auto;
margin-right:auto;
 position: relative;
top: 25%;
} 
```

这里的演示：[小提琴](http://jsfiddle.net/FUqSP/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:17:00.250

检查此[链接](http://jsfiddle.net/venkateshwar/FUqSP/3)

我曾经`float:left;`实现它。

检查这个[**小提琴**](http://jsfiddle.net/venkateshwar/FUqSP/6/)

我已经使用百分比完成了。
对于其他方法来实现这个检查这个[链接](https://stackoverflow.com/a/12632144/1577396)

我建议您使用百分比来执行此操作。这不会让你感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:07:53.377

您可以使用孩子的绝对定位。您必须将每个孩子定位在顶部 50% 和左侧 50%，并给他们一个负的顶部和左侧边距，其宽度和高度的一半。

```
.parent{
    width:300px;
    height:300px;
    background-color:orange;
    position: relative;
}
.child_one{
    width:100px;
    height:100px;
    background-color:purple;
    position:absolute;
    left: 50%;
    top: 50%;
    margin-left: -50px;
    margin-top: -50px;
} 
```

这只是第一个孩子。你必须对每个孩子做同样的事情。因此，如果宽度为 50px，则使用 -25px 的边距。

[http://jsfiddle.net/APdaP/](http://jsfiddle.net/APdaP/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:13:15.867

根据我在之前的评论中发送给您的链接，您应该尝试以下解决方案：

**Css 表法**。

它会将您的 div 显示为表格单元格，以便您可以将`vertical-align`其用于您的子 div。**

# r - R内置Web服务器

> ID：12636764
> 
> 赞同：9
> 
> 时间：2012-09-28T08:58:13.143
> 
> 标签：r

从 R 2.13 开始，R 带有一个内置的 Web 服务器。有没有一种简单的方法可以使用带有自定义端口号的 R 创建本地 Web 服务器？

在 python 中它将是（使用“ [http://localhost:8080](http://localhost:8080) ”）：

```
python -m SimpleHTTPServer 8080 
```

我知道 Rook，但我正在寻找一个简单的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:59:04.047

看看`Rook`- 它在[GitHub 上](https://github.com/jeffreyhorner/Rook)。关于设置端口号，看到`?tools::help.ports`它接受一个数字向量（整数），它将选择第一个可用的。还有`sinartra`（[CRAN](http://cran.r-project.org/web/packages/sinartra/index.html)，[GitHub](https://github.com/hadley/sinartra)），但我宁愿选择`Rook`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-11T01:59:38.613

看起来这`servr`可能就是你这些天正在寻找的东西。

来自[github](https://github.com/yihui/servr)：

> 在某种程度上，这个包就像 python -m SimpleHTTPServer 或 python -m http.server。

[https://github.com/yihui/servr](https://github.com/yihui/servr)

[https://cran.rstudio.com/web/packages/servr/index.html](https://cran.rstudio.com/web/packages/servr/index.html)

### 示例代码

```
writeLines("<h1>Hi</H1>", "index.html")

# install.packages("servr")
library(servr)
servr::httd()

# createTcpServer: address already in use
# To stop the server, run servr::daemon_stop(2) or restart your R session
# Serving the directory /Users/st/R/localhost at http://127.0.0.1:7826 
```

将地址放在浏览器中：http: [//127.0.0.1 :7826](http://127.0.0.1:7826)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-11T01:54:15.233

这不是一个答案，而是一些开始的地方。

如果我们从终端运行 R（通过输入`R`），然后运行`help.start()`，它将启动一个本地主机并在浏览器中打开它。在我的，它打开[http://127.0.0.1:16371/doc/html/index.html](http://127.0.0.1:16371/doc/html/index.html)。这至少证明可以在没有任何外部包的情况下在 R 中打开 localhost。

[我在R Source Code](https://github.com/wch/r-source/blob/trunk/src/library/tools/R/dynamicHelp.R)中找到了一些使这种情况发生的代码。

# eclipse - eclipse更新站点不更新

> ID：12636767
> 
> 赞同：8
> 
> 时间：2012-09-28T08:58:19.377
> 
> 标签：eclipse, plugins

我正在为 Eclipse 制作插件 - 但由于某种原因，当我构建插件的新版本时 - 更新站点没有注意到它。

构建过程说插件的版本应该是 1.1.0.201209191506，但是当我访问安装时，我会看到这些版本：

![在此处输入图像描述](../Images/35f1733bf1c1997fc228d51b82b1d1a3.png)

XML 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<site>
   <feature url="features/supportStructuresForCSFEditing -_1.1.0.201209191506.jar" id="supportStructuresForCSFEditing -" version="1.1.0.201209191506">
      <category name="plancomps"/>
   </feature>
   <feature url="features/supportStructuresForCSFEditingTest -_1.1.0.201209191506.jar" id="supportStructuresForCSFEditingTest -" version="1.1.0.201209191506">
      <category name="plancomps"/>
   </feature>
   <category-def name="plancomps" label="plancomps"/>
</site> 
```

如果我从本地或网络安装，就会发生这种情况 - 知道会发生什么吗？或者我可以尝试的诊断技巧？

编辑 - 机器已经重新启动 - 并且以前从未见过插件的机器尝试 - 都显示了旧版本。:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:21:29.220

我会检查两件事。

1）我认为由于错误，有时功能会从类别中删除（如果您使用 GUI 更新您的网站）。因此，当最新版本处于顶级时，您可能会在您的类别中查看您的插件，反之亦然。

2) Eclipse 缓存更新站点的当前状态。因此，您需要重新启动，以使其显示较新的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-01T03:50:05.930

很可能，您的缓存没有被更新。p2 会经常缓存更新站点的内容信息。看起来您使用的是旧式更新站点，并且您没有 content.xml（或 .jar）和 artifact.xml（或 .jar），它们不再受真正支持，可能更难删除缓存。

您可以尝试以下方法：

1.  帮助 -> 安装新软件 -> 可用软件站点 -> （选择您的更新站点） -> 重新加载
2.  删除并重新添加您的更新站点
3.  使用 -clean 选项重新启动 eclipse 以清除配置区域

但是，实际上您应该确保创建 artifact.xml 和 content.xml（或 .jar）并创建正确的更新站点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-05T08:43:16.443

好的，所以回到这个我有一个理由和一个解决方法。

Eclipse 的缓存非常激进。但是我正在做的事情没有帮助，我想我会分享。

当我构建插件的新版本时，我删除了前一个（这对我来说很有意义，通常前一个是内部错误的东西，我总是可以从 svn 重建它）。但是，当我开始保留以前的版本时，更新站点开始按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-20T14:19:22.587

我想这个问题已经为 OP 解决了，但我想我会分享：我刚刚花了 2 个多小时与一个非常相似的问题作斗争，最终设法解决了它。我不确定我的解决方案是否可以应用于这种情况。我的情况是这样的：

1.  我创建了一些插件并将它们上传到我也创建的软件站点。
2.  在一个`default.target`文件中，我添加了该软件站点的插件。
3.  我意识到其中一个插件有错误，再次创建它，将其上传到软件站点，然后在我的`default.target`.

该插件从未重新加载。即使我删除了更新站点，当我单击更新时，eclipse“神奇地”仍然看到它并假装从那里更新。好玩好玩好玩。

我尝试了各种各样的东西，这是唯一对我有用的东西（我假设你也有`default.target`）：

1.  从您的`default.target`.
2.  退出 eclipse（至少是有问题的工作区的实例）。
3.  **备份您的工作区，或者至少备份`default.target`和** `<pathToYourWorkspace>\.metadata\.plugins\org.eclipse.pde.core\.bundle_pool\`. 如果需要，可能很难恢复以下更改。
4.  在`<pathToYourWorkspace>\.metadata\.plugins\org.eclipse.pde.core\.bundle_pool\`：
    1.  打开`artifacts.xml`并删除对未更新插件的所有引用。请注意，每个插件可能有多个引用；例如，在我的情况下，我有一个 with`'classifier='org.eclipse.update.feature'`和一个 with `classifier='osgi.bundle'`（我正在使用 OSGi）。
    2.  打开 subdir`features`并删除与未更新的插件对应的文件夹。（按日期排序可能会有所帮助。顺便说一句，在我的情况下，这些 jar 的“修改日期”表明它们只是第一次下载并且再也没有更新）
    3.  打开 subdir`plugins`并删除与未更新的插件对应的 jar。（按日期排序可能会有所帮助。同上）
5.  使用选项再次打开 Eclipse，`-clean`以便`-data <pathToYourWorkspace>`清理工作区。
6.  将插件添加到`default.target`.
7.  如果仍然存在问题，请尝试选择插件或更新站点并单击“更新”，和/或重新启动 Eclipse。

这几乎把我逼疯了。我希望这可以帮助别人。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-07T10:13:23.170

我认为您首先使用 eclipse 的新副本添加插件，如果该插件已安装。将 eclipse.zip 复制到新文件夹中，解压缩，运行 eclipse 然后开始使用更新站点执行此操作

帮助-->安装新软件-->“粘贴更新站点网址”-->它将捕获更新-->单击确定-->接受许可证-->“继续进程”-->它给出警告按确定“现在您已成功更新。

注意：互联网连接应正常可用。

# symfony - Symfony 2.1 新会话管理的问题

> ID：12636769
> 
> 赞同：2
> 
> 时间：2012-09-28T08:58:36.723
> 
> 标签：symfony, session-state, symfony-2.1

我使用 Symfony 2.0 和 simplesamlphp，完全没有问题。

当我迁移到 Symfony 2.1 时，使用 simplesamlphp 的外部身份验证停止工作。

经过一番研究，我发现 Symfony 2.1 HTTP Foundation 现在有一个会话管理记录在[http://symfony.com/doc/master/components/http_foundation/sessions.html](http://symfony.com/doc/master/components/http_foundation/sessions.html)中。

问题的发生是因为 simplesamlphp 服务提供者启动了一个新会话而不是重新启动初始会话（可能是因为它使用了 php 函数，例如 session_start() 或 session_id()）。

如果我使用

```
storage_id: session.storage.mock_file 
```

身份验证有效，但所有形式的 csrf 保护均失败。

Symfony 2.0 没有发生这种行为。

这是否意味着 Symfony 2.1 现在与外部身份验证提供程序不兼容？

有没有办法避免使用 symfony 会话管理？我应该将此报告为改进/错误吗？

提前致谢，

阿方索·马丁斯·瓦兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:17:39.013

我刚刚遇到了类似的问题，在浏览了 NativeFileSessionStorage 之后，我发现 Symfony 2.1 将会话保存在...缓存文件夹中。简单的配置更改：

```
framework:
    ...
    session:
        name:          %session_name%
        cookie_domain: %cookie_domain%
        cookie_path:   %cookie_path%
        save_path:     ~ 
```

为我做了一个技巧——最后一个参数**save_path**将 cookie 保存路径重置为默认值，因此 SimpleSamlPhp 库现在可以读取身份验证数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:13:56.130

我们通过使用 memcache 和 simplesaml php 解决了这个问题。（[见这个链接](http://simplesamlphp.org/docs/1.5/simplesamlphp-maintenance)）

这种方式 simplesamlphp 会话不会与 Symfony2 会话混淆，我们可以将两者与 Symfony2.1 默认配置一起使用。

# c - 在 c 中工作的运行时数据类型，sizeof 是如何工作的？

> ID：12636774
> 
> 赞同：2
> 
> 时间：2012-09-28T08:58:50.700
> 
> 标签：c, pointers, runtime

正如我们所知，我们可以使用`int (*p)[10]`来定义一个指向 int[10] 数组的指针，所以如果我们有`p=0`and `sizeof(int)==4`, `p+1`will be `0+10*4 = 40`，这是可行的，因为编译器在编译时知道 p 是什么。

那么如果我们这样做呢：

```
int main()
{
    int sz = 10;
    int (*p)[sz];
} 
```

换句话说，`sz`在程序在那里运行之前，没有人会知道。我认为这不应该工作，但它确实有效..

所以我的问题是，它是如何工作的？我的意思是，是否有任何地方在运行时将值的类型存储在 c 中？如果没有，这怎么可能？这只是编译器相关的吗？

我正在使用`gcc version 4.4.5 (Ubuntu/Linaro 4.4.4-14ubuntu5)`，您可以使用以下代码对其进行测试。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main()
{
    int COL ;
    int ROW ;
    scanf("%d %d", &COL, &ROW);
    int (*p)[COL];
    int *mem = (int*)malloc(sizeof(int)*COL*ROW);
    memset(mem,0,sizeof(int)*COL*ROW);
    p = (int (*)[10])mem;

    printf("0x%p\n", p);
    printf("COL=%d\n", p+1, (((int)(p+1))-((int)p))/sizeof(int));

    mem[2*COL+0] = 1;
    printf("%d\n", p[2][0]);
    mem[2*COL+5] = 2;
    printf("%d\n", p[2][5]);
    mem[6*COL+7] = 3;
    printf("%d\n", p[6][7]);

    p[1][2] = 4;
    printf("%d\n", mem[1*COL+2]);

    free(p);

    return 0;
} 
```

我希望我不是在问一个愚蠢的问题，也不是在犯愚蠢的错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:10:20.153

可变长度数组类型的指针算法在 6.5.6:10 中有很好的定义，其中的示例代码与您的非常相似。根据 6.5.3.4:2，当`sizeof`应用于可变长度数组时，将在运行时评估操作数以确定大小，因此可变长度数组指针运算同样进行。

自第二版（经修订的 ISO/IEC 9899:1999）以来，可变长度数组 (6.7.6.2:4) 已成为标准的一部分；然而，它们是符合要求的实现不必支持的可选功能（6.10.8.3）。

# dart - 从 Dart 控制台读取多个输入

> ID：12636778
> 
> 赞同：2
> 
> 时间：2012-09-28T08:59:00.607
> 
> 标签：dart, dart-io

我想在 Dart 服务器应用程序中从控制台读取不同的数据，例如：

forename ：用户输入并输入
lastname ：用户输入并输入
age ：用户输入并输入

以下代码有效，但仅适用于 1 个输入项：

```
var stream = new StringInputStream(stdin);
stream.onData = () {
    voornaam = stream.readLine();
}; 
```

但我无法让它适用于多个项目。在 Dart 中是否有一种简单的方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:48:10.253

由于您使用的是 a`StringInputStream`而不仅仅是一个 standard `InputStream`，并且因为您正在寻找阅读文本。除非有特殊原因，否则我建议使用`onLine`处理程序而不是`onData`. On data 基本上会尝试“流式传输”信息，因为它会立即被调用，而不是在新行本身上。尝试以下操作（注意，代码不完整，缺少正确的错误处理等）

```
#import('dart:io');

main() {
  var stream = new StringInputStream(stdin);
  stream.onLine = () {
    var str = stream.readLine().trim();
    print(str.toUpperCase());
    if(str == 'EXIT') exit(0);
  };
} 
```

需要指出的另一点是，如果您曾经使用数据流处理并使用`onData`处理程序，建议您使用该`read`方法，而不是`readLine`检索您的内容的方法，同样由于 onData 的性质不等待在被调用之前要接收的整行文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-19T01:07:11.750

```
import 'dart:io';

void main() {
  print('-----welcome-----');
  print('what is your firstname');
  var fname = stdin.readLineSync();
  print('what is your lastname');
  var lname = stdin.readLineSync();
  print('what is your age');
  int age = int.parse(stdin.readLineSync());
  int left = 100 - age;
  print('your name is $fname $lname  and you are  $age years');
} 
```

# c# - .NET 4.0 中从 Utc 到 Local 的 DateTime 转换

> ID：12636780
> 
> 赞同：5
> 
> 时间：2012-09-28T08:59:04.597
> 
> 标签：c#

我有一个功能，其中包括从 Utc 到 Local 的转换，反之亦然。问题是，当我在装有 Win 7 的 PC 上运行它时，它工作正常，但是当我在装有 Vista 的 PC 上运行它时，转换出错了。

例如：我当前的时区是 +2 UTC

MyCurrentTime 设置为 27.09.2012, 19:00 并且 DateTimeKind 未指定。

```
DateTime utcTime = DateTime.SpecifyKind(MyCurrentTime,DateTimeKind.Utc);  
DateTime localTime = new DateTime();                             
localTime = utcTime.Date.ToLocalTime(); 
```

Win 7 上的输出是 27.09.2012, 17:00

Vista 上的输出是 27.09.2012, 04:00

任何想法为什么会发生这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:43:26.163

该解决方案是[https://stackoverflow.com/users/570150/v4vendetta](https://stackoverflow.com/users/570150/v4vendetta)建议的解决方案。

Win 7 和 Vista 机器都“同意”了正确的时间。

```
localTime= TimeZone.CurrentTimeZone.ToLocalTime(utcTime); 
```

非常感谢！

# sql-server - SQL Case 语句，根据条件进行子选择？

> ID：12636783
> 
> 赞同：0
> 
> 时间：2012-09-28T08:59:18.213
> 
> 标签：sql-server, tsql, case

我遇到了一个场景，我需要在从“遗留”到当前的交叉点返回一组复杂的计算值。

长话短说，我有这样的事情......

```
with someofit as
(
   select id, col1, col2, col3 from table1
)

select someofit.*, 
  case when id < @lastLegacyId then
    (select ... from table2 where something = id) as 'bla'
   ,(select ... from table2 where something = id) as 'foo'
   ,(select ... from table2 where something = id) as 'bar'
  else
    (select ... from table3 where something = id) as 'bla'
   ,(select ... from table3 where something = id) as 'foo'
   ,(select ... from table3 where something = id) as 'bar'
  end
from someofit 
```

不，这就是问题所在......我不想不断地对每个子选择进行案例检查，但同时当该条件适用时，我需要相关案例块中的所有选择。

有没有更聪明的方法来做到这一点？

如果我使用正确的面向对象语言，我会使用这样的东西......

```
var common = GetCommonSuff()

foreach (object item in common)
{
   if(item.id <= lastLegacyId)
   {
      AppendLegacyValuesTo(item);
   }
   else
   {
      AppendCurrentValuesTo(item);
   }
} 
```

我最初确实尝试使用联合进行 2 个完整的选择，但由于效率/要评估的行数，这不能很好地工作。

子选择正在寻找满足某些条件的总行数，而不是表 2 或 3 上的 id 匹配，但这些表中可能有数百万行。

使用 cte 有两个原因...

首先，它只从表 1 中提取我感兴趣的行，因此我只在每种情况下只做一小部分子选择。

其次，它在表 1 上的一次查找中返回常见的东西

有任何想法吗？

编辑 1：

这种情况的一些背景......

我有一个名为“imports”的表（上面的表 1），它代表一个导入作业，我们从文件（csv 或类似文件）中获取数据并将记录拉入数据库。

然后我有一个名为“步骤”的表，它代表我们经历的处理/清理规则，每条记录都包含一个存储过程名称和一堆关于规则的其他内容。

然后有一个连接表，表示特定导入“ImportSteps”的规则（上面的表 2 - 用于当前数据），其中包含“rowsaffected”列和导入 ID

所以对于当前的工作，我的 sql 非常简单......

从导入中选择 123 456 加入导入步骤

对于较旧的遗留东西，但是我必须查看表 3 ...表 3 是保存表，它包含曾经导入的每条记录，每一行都有一个导入 ID，每一行都包含键值。

在表 2 上影响到导入 id x 的新数据行上，其中步骤 id 为 y 将返回我的值。

在遗留数据上，我必须计算其中 col z = something 的行数

我需要大约 20 个导入的数据，并且这些数据绑定到我的 mvc Web 应用程序上的“datagrid”（如果这有什么不同的话）

我使用的 cte 通过一些参数确定“当前 20 个我感兴趣”这些参数代表开始和结束记录（按导入 ID 排序）。

我最大的问题是持有表......它是巨大的......众所周知，个别工作本身包含 500k + 条记录，并且该表包含多年的导入行，所以我需要我在该表上的查找尽可能快并且尽可能少。

编辑2：

实际解决方案（仅 suedo 代码）...

```
-- declare and populate the subset to reduce reads on the big holding table
declare table @holding ( ... )
insert into @holding
select .. from holding

select 
   ... common stuff from inner select in "from" below
   ... bunch of ...
   case when id < @legacy then (select getNewValue(id, stepid))
   else (select x from @holding where id = ID and ... ) end as 'bla'
from

(
   select ROW_NUMBER() over (order by importid desc) as 'RowNum'
   , ...
) as I
-- this bit handles the paging
where RowNum >= @StartIndex
and   RowNum < @EndIndex 
```

我仍然有信心我可以清理更多，但我原来的查询看起来像票据解决方案的执行时间大约是 45 秒，这大约是 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:05:21.413

我认为子查询必须返回单个标量值，对吗？这一点很重要，因为它确保了 LEFT JOIN 不会使结果相乘。

```
;with someofit as
(
   select id, col1, col2, col3 from table1
)

select someofit.*, 
  bla = coalesce(t2.col1, t3.col1),
  foo = coalesce(t2.col2, t3.col2),
  bar = coalesce(t2.bar, t3.bar)
from someofit
left join table2 t2 on t2.something=someofit.id and somefit.id < @lastLegacyId
left join table3 t3 on t3.something=someofit.id and somefit.id >= @lastLegacyId 
```

请注意，我已`id >= @lastLegacyId`通过假设 id 不可为空来用作条件的补充。如果是，您需要一个 IsNull ，即`somefit.id >= isnull(@lastLegacyId,somefit.id)`.

* * *

您对问题的编辑并没有改变这样一个事实，即这几乎是 OO 语法的字面翻译。

```
foreach (object item in common)  --> "from someofit"
{
   if(item.id <= lastLegacyId)      --> the precondition to the t2 join
   {
      AppendLegacyValuesTo(item);   --> putting t2.x as first argument of coalesce
   }
   else                              --> sql would normally join to both tables
                                     --> hence we need an explicit complement
                                     --> condition as an "else" clause
   {
      AppendCurrentValuesTo(item);    --> putting t3.x as 2nd argument
                                      --> tbh, the order doesn't matter since t2/t3
                                      --> are mutually exclusive
   }
}

function AppendCurrentValuesTo     --> the correlation between t2/t3 to someofit.id 
```

现在，如果你真的尝试过这个并且它不能解决你的问题，我想知道它在哪里坏了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:05:56.737

假设您知道两个表之间没有冲突的 ID，您可以执行以下操作（DB2 语法，因为这是我所知道的，但应该是相似的）：

```
with combined_tables as (
    select ... as id, ... as bla, ...as bar, ... as foo from table 2
    union all
    select ... as id, ... as bla, ...as bar, ... as foo from table 3
)
select someofit.*, combined_ids.bla, combined_ids.foo, combined_ids.bar
    from someofit
    join combined_tables on someofit.id = combined_tables.id 
```

如果你有像重叠 id 这样的情况，你可以在 combine_tables() 部分中处理它

# android - 如何在 Android 中正确创建 Fragment 实例

> ID：12636784
> 
> 赞同：2
> 
> 时间：2012-09-28T08:59:23.513
> 
> 标签：android, instance, fragment

我已经看到了创建片段的不同方法。有人可以帮我弄清楚这些方法之间的区别是什么，什么是最好的方法以及何时使用哪种方法。

1.  `new MyFragment()`我自己使用它，因为它对我来说似乎很自然。
2.  `MyFragment.instantiate(Context context, String fname, Bundle args)`这看起来像是创建片段的自定义静态方法，但我从未见过它使用过。
3.  `My.Fragment.newInstance()`这个在 Android 开发者示例中。

每个选项的目的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:20:48.783

最大的区别是何时使用每个样本：

1- 每次调用时创建一个新的片段对象。

2- 与调用空构造函数相同，但是，如果将片段设置为 setRetainInstance(true)，则如果使用空构造函数，这将不起作用。

3- My.Fragment.newInstance()，从静态片段中获取单个实例的方法，如果你有一个静态类扩展片段，你可以创建一个方法来返回一个新片段或当前片段，它的单例模式。

4- Inflate from xml，和调用空的contructor一样，Android FrameWork负责对view的附加，但是实例会被保持在hole activity的生命周期中，需要更多的内存并且不能被多次重用。

# python - 如何通过匹配python中的某些字符从字符串中删除某些字符

> ID：12636788
> 
> 赞同：2
> 
> 时间：2012-09-28T08:59:35.610
> 
> 标签：python

如果在以下字符串中找到匹配项，我正在尝试删除字符串的某些部分

```
string = 'Newyork, NY' 
```

我想从字符串中删除逗号后的所有字符，包括`comma`，如果字符串中存在逗号

谁能让我现在如何做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T09:00:32.850

使用[`.split()`](http://docs.python.org/library/stdtypes.html#str.split)：

```
string = string.split(',', 1)[0] 
```

我们在逗号上拆分字符串*一次*，以节省 python 拆分更多逗号的工作。

或者，您可以使用[`.partition()`](http://docs.python.org/library/stdtypes.html#str.partition)：

```
string = string.partition(',')[0] 
```

演示：

```
>>> 'Newyork, NY'.split(',', 1)[0]
'Newyork'
>>> 'Newyork, NY'.partition(',')[0]
'Newyork' 
```

`.partition()`是更快的方法：

```
>>> import timeit
>>> timeit.timeit("'one, two'.split(',', 1)[0]")
0.52929401397705078
>>> timeit.timeit("'one, two'.partition(',')[0]")
0.26499605178833008 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:00:37.590

您可以使用分隔符[拆分](http://docs.python.org/library/stdtypes.html#str.split)字符串`","`：

```
string.split(",")[0] 
```

例子：

```
'Newyork, NY'.split(",") # ['Newyork', ' NY']
'Newyork, NY'.split(",")[0] # 'Newyork' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T18:50:21.430

试试这个 ：

```
s = "this, is"
m = s.index(',')
l = s[:m] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:11:16.883

一些选项：

*   `string[:string.index(",")]`

    这将引发一个`ValueError`if `,`cannot be found in the string。`.index`在这里，我们使用切片找到字符的位置。

*   `string.split(",")[0]`

    该`split`函数将为您提供由 分隔的子字符串的列表，`,`您只需获取列表的第一个元素。即使`,`字符串中不存在，这也将起作用（因为在这种情况下没有什么可拆分的，我们有`string.split(...) == [string]`）

# google-apps-script - 无法在 ui 服务中设置 textarea 的调整大小行为

> ID：12636794
> 
> 赞同：0
> 
> 时间：2012-09-28T08:59:54.607
> 
> 标签：google-apps-script

我正在尝试更改 textarea 的调整大小样式属性，但会导致运行时错误：“无效参数：无”

```
app.createTextArea().setName("test").setStyleAttribute("resize", "none"); 
```

textarea 不应该支持 resize CSS 属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:31:34.870

并非所有 CSS 都受支持，您希望将 HTMLService 用于完整的 HTML，但是.....您可以这样做：

```
 app.createTextArea().setSize(width, height) 
```

亲切的问候，

托马斯·范拉图姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T14:36:03.350

```
textarea {
    max-width: 100px; 
    max-height: 100px;
} 
```

# hibernate - Grails Hibernate 版本升级

> ID：12636795
> 
> 赞同：3
> 
> 时间：2012-09-28T08:59:58.563
> 
> 标签：hibernate, grails

最新版 Grails(2.1.1) 不支持最新版 Hibernate(4.1.7)

默认支持2.1.1版本。

在 Grails 2.1.1 中升级 Hibernate 需要做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T12:23:38.610

最新版本的 Grails（当前为 2.2.0.RC1）支持 Hibernate 3.6。你说的 2.2.1 版本是 Hibernate 插件的版本，和 Grails 的版本相匹配。

您无法升级 Grails 使用的 Hibernate 版本。它在Grails 2.3的[开发路线图上。](http://grails.org/Roadmap)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T19:38:53.163

我也在使用 Grails 2.1.1 和 Grails Hibernate Plugin 2.1.1。

正如其他人所说，Grails Hibernate Plugin 的版本是 2.1.1，它对应于您的 Grails 2.1.1 版本。

如果您有兴趣查看 Grails Hibernate 插件 2.1.1 的确切依赖项，可以`dependencies.groovy`在 .grails 文件夹中打开：

```
/home/<user>/.grails/2.1.1/projects/<your_project>/plugins/hibernate-2.1.1/ 
```

在这里，您将看到 Grails Hibernate 2.1.1 插件所依赖的确切 Hibernate Core 版本。我这样做了，这里是这个插件的 Hibernate 依赖项（我省略了其他的，比如 ANTLR 和排除项）：

```
dependencies {
    compile('org.hibernate:hibernate-core:3.6.10.Final') {
        ....
    }
    compile( 'org.hibernate:hibernate-commons-annotations:3.2.0.Final' ){
        ....
    }

    compile('org.hibernate:hibernate-validator:4.1.0.Final') {
        ....
    }
    runtime('org.hibernate:hibernate-ehcache:3.6.10.Final') {
        ....
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T17:40:52.253

Grails 2.2.3 支持 Hibernate 4！

# sublimetext2 - sublime text 2 删除变音符号

> ID：12636798
> 
> 赞同：3
> 
> 时间：2012-09-28T09:00:06.980
> 
> 标签：sublimetext2, diacritics

我用 Sublime Text 2 编写代码，有时我需要删除变音符号。如何从部分文本中删除变音符号？有没有 som 过滤器之类的？

感谢您的任何建议。费里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-10T14:39:47.493

我的建议是看看这个问题及其答案：

[正则表达式 - 匹配外来字符的正则表达式是什么？](https://stackoverflow.com/questions/3009993/regex-what-would-be-regex-for-matching-foreign-characters)

[您可以使用 Sublime 的正则表达式查找实用程序并尝试Fredrik Mörk](https://stackoverflow.com/users/93623/fredrik-mork)建议的正则表达式

```
\p{L} 
```

# c# - 正则表达式模式在 Lua 中有效，但在 C# 中无效

> ID：12636801
> 
> 赞同：0
> 
> 时间：2012-09-28T09:00:10.947
> 
> 标签：c#, regex

我需要在 C# 中使用正则表达式来拆分类似“21A244”的内容，其中

*   前两个数字可以是 1-99
*   字母只能是1个字母，AZ
*   后三位可以是 111-999

所以我做了这场比赛“（[0-9]+）（[AZ]）（[0-9]+）”

但由于某种原因，在 C# 中使用时，匹配函数只返回输入字符串。所以我在 Lua 中尝试了它，只是为了确保模式是正确的，并且它在那里工作得很好。

以下是相关代码：

```
var m = Regex.Matches( mdl.roomCode, "(\\d+)([A-Z])(\\d+)" );

System.Diagnostics.Debug.Print( "Count: " + m.Count ); 
```

如果你想知道，这里是可用的 Lua 代码

```
local str = "21A244"
print(string.match( str, "(%d+)([A-Z])(%d+)" )) 
```

感谢您的任何帮助

编辑：找到解决方案

```
var match = Regex.Match(mdl.roomCode, "(\\d+)([A-Z])(\\d+)");
var group = match.Groups;
System.Diagnostics.Debug.Print( "Count: " + group.Count );

System.Diagnostics.Debug.Print("houseID: " + group[1].Value);
System.Diagnostics.Debug.Print("section: " + group[2].Value);
System.Diagnostics.Debug.Print("roomID: " + group[3].Value); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:06:24.520

首先，您应该使您的正则表达式更加具体，并限制开始/结束时允许的数字数量。怎么样：

`([1-9]{1,2})([A-Z])([1-9]{1,3})`

接下来，捕获的结果（即括号中的 3 个部分）将在`Groups`您的正则表达式匹配器对象的属性中。IE

```
m.Groups[1] // First number
m.Groups[2] // Letter
m.Groups[3] // Second number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:07:48.303

Regex.Matches(mdl.roomCode, "(\d+)([AZ])(\d+)") 返回匹配的集合。如果没有匹配，那么它将返回一个空的 MatchCollection。

由于正则表达式匹配字符串，它返回一个集合，其中包含一项，即输入字符串。

# android - Android MMS 连接以无法解析主机结束

> ID：12636805
> 
> 赞同：2
> 
> 时间：2012-09-28T09:00:17.723
> 
> 标签：android, host, mms, resolve

我有带有彩信发送功能的应用程序，基于此[http://androidbridge.blogspot.de/2011/03/how-to-send-mms-programmatically-in.html](http://androidbridge.blogspot.de/2011/03/how-to-send-mms-programmatically-in.html)

它工作并建立了正确的连接（移动彩信网络），但在

```
connection = (HttpURLConnection)url.openConnection(); 
```

我收到“错误”无法解析主机“http://mms”

APN 设置有效（使用内置短信/彩信）在我的手机/sim 上启用了彩信。数据连接可用。

APN 使用代理，在代码中设置和使用（并在调试信息中检查）。

我可以检查更多以找到问题？每个需要的变量（用户名、密码、代理、url ...）都已设置...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-26T19:11:01.617

请务必检查您的清单文件并在那里添加互联网权限。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

我只是花了一点时间把头发拉出来，直到我想起我没有设置权限。

# css - 我怎样才能设计一个 当它后面跟着另一个 ?

> ID：12636806
> 
> 赞同：0
> 
> 时间：2012-09-28T09:00:19.470
> 
> 标签：css, css-selectors

我正在使用部分来确定页面的不同部分。这些部分的下边距为 90 像素，但是当在页面中创建/放入 ID 为“clients-full”的部分时，我希望出现在它之前/上方的任何部分的下边距为 0。我可以做这使用 CSS 选择器/伪选择器？

目前，这段代码对 ID 为“clients-full”的部分进行样式设置，但可以将其反转，以便我可以将 0 的底部边距应用于它之前的部分吗？

```
 section + section#clients-full {
    margin-top: -90px; // Negative margin to get around this problem...not ideal.
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:13:28.060

在当前定义的 CSS 实现中，选择器不能以根据元素之后的内容选择元素的方式使用，而只能根据之前的内容来选择元素。好吧，选择器链接`:nth-last-child(...)`在某种意义上是一个例外，但在这种情况下它们没有帮助。

*因此，更好的方法是通过在它们上设置上*边距来分隔这些部分，如果需要，将第一部分作为特殊情况处理（没有上边距），也许最后一个部分，使用`:last-ot-type`（如果在其上设置下边距需要）。然后，您可以轻松处理所描述的情况，只需使用`#clients-full { margin-top: 0; }`.

# javascript - 在 ckeditor 工具栏中添加自定义按钮：javascript 中未捕获的语法错误意外标记

> ID：12636810
> 
> 赞同：1
> 
> 时间：2012-09-28T09:00:35.053
> 
> 标签：javascript, ckeditor

我想在 ckeditor 工具栏上添加一个自定义按钮。但它给了我一个未捕获异常的javascript错误。我的javascript代码如下。

文件名 ：`/ckeditor/plugins/linkbutton/plugin.js`

```
(function(){
    //Section 1 : Code to execute when the toolbar button is pressed
    var a= {
        exec:function(editor){
            var theSelectedText = editor.getSelection().getNative();
            CallCfWindow(theSelectedText);
        }
    },

    //Section 2 : Create the button and add the functionality to it
    b=’linkbutton’;
    CKEDITOR.plugins.add(b,{
        init:function(editor){
            editor.addCommand(b,a);
            editor.ui.addButton(‘linkbutton’,{
                label:’Link Button’,
                icon: this.path + ‘logo_ckeditor.png’,
                command:b
            });
        }
    });
})(); 
```

然后在 config.js 文件中我写了这段代码，

```
config.extraPlugins = 'linkbutton';
config.toolbar_Full =  [['Styles', 'Bold', 'Italic', 'Underline', 'SpellChecker', 'Scayt', '-', 'NumberedList', 'BulletedList'],['Link', 'Unlink'], ['Undo', 'Redo', '-', 'SelectAll', 'linkbutton']]; 
```

但它不起作用并在控制台中给我一个错误。

# python - 使用 Dynatree 将节点从一棵树移动到另一棵树

> ID：12636812
> 
> 赞同：1
> 
> 时间：2012-09-28T09:00:37.293
> 
> 标签：python, django, dynatree

我目前正在开发一个 django 项目，我正在使用 dynatree 来构建树视图。我有两棵树，第一棵树有用户可以选择的项目，选定的项目将移动到第二棵树。有没有办法我可以在 dynatree 中这样做？并且有一个选项供用户“取消选择”该项目，以便选定的项目将移回第一棵树。那么当用户取消选择该项目时，我如何将项目移回其原始父节点？提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T06:18:10.207

我已经使用上下文菜单的复制/粘贴概念解决了我的问题。对于第二个问题，我使用全局变量来存储原始父节点，因此当用户取消选择该项目时，它将移回其原始父节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T15:18:21.413

我在 DIV dvAllLetterTemplates （包含一个主列表）和一个 DIV dvUserLetterTemplates 上有一个 dynamTree，项目将被复制到其中。

```
 //Select the Parent Node of the Destination Tree
var catNode = $("#dvUserLetterTemplates").dynatree("getTree").selectKey(catKey, false);
if (catNode != null) {
//Select the source node from the Source Tree
    var tmplNode = $("#dvAllLetterTemplates").dynatree("getTree").selectKey(arrKeys[i], false);
    if (tmplNode != null) {
        //Make a copy of the source node
        var ndCopy = tmplNode.toDict(false, null);
        //Add it to the parent node
        catNode.addChild(ndCopy);
        //Remove the source node from the source tree (to prevent duplicate copies
        tmplNode.remove();
        //Refresh both trees
        $("#dvUserLetterTemplates").dynatree("getTree").redraw();
        $("#dvAllLetterTemplates").dynatree("getTree").redraw();
     }
} 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T08:02:29.010

“选定”和“活动”之间是有区别的。选择通常使用复选框来完成，而只能激活一个节点（通常通过鼠标单击）。第二次单击活动节点不会触发“onActivate”事件，但您可以实现“onClick”处理程序来捕获它并调用 node.deactivate()

# search - 需要在 Outlook 功能区搜索选项卡中添加按钮

> ID：12636815
> 
> 赞同：1
> 
> 时间：2012-09-28T09:00:46.400
> 
> 标签：search, outlook, vsto, outlook-addin, outlook-2010

我的任务是在 Outlook 搜索选项卡中添加一个按钮（导出），在即时搜索或高级搜索之后，我必须通过单击导出按钮来获取结果并导出到 csv 文件。

我在 Visual Studio 2010 和 Office 2010 中使用 VSTO。

任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:45:25.740

首先，您需要在正确的位置放置一个按钮。在将返回到 Outlook 的 xml 中，指定正确的**insertBeforeMso**代码以确保您的按钮位于您想要的位置。还为您放置它的选项卡找到正确的**idMso 。**

这是在电子邮件消息窗口的主功能区上放置按钮的示例。

```
<?xml version="1.0" encoding="utf-8" ?>
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui" >
  <ribbon>
    <tabs>
      <tab idMso="TabNewMailMessage">
        <group id="Your ribbon group ID" label="Your button group Label" insertBeforeMso="GroupClipboard">
          <button id="Your button ID" label="Your button label" getImage="icon callback" size="large" onAction="click callback" />
        </group>
      </tab>
    </tabs>
  </ribbon>
</customUI> 
```

# c# - FluentValidation + MVC Extensions（元数据）不能一起工作

> ID：12636816
> 
> 赞同：2
> 
> 时间：2012-09-28T09:00:50.133
> 
> 标签：c#, asp.net-mvc, fluentvalidation, mvcextensions

对于我的项目，我使用两个库：

1.  FluentValidation (http://fluentvalidation.codeplex.com/) 用于视图模型验证
2.  MVC 扩展 (http://mvcextensions.codeplex.com/) 为我的视图模型流畅地配置元数据

这是我配置它们的方式（这是在容器构建器类中完成的）：

```
 /* Model Metadata Registration */
    IEnumerable<IModelMetadataConfiguration> configurations = container.Resolve<IEnumerable<IModelMetadataConfiguration>>();

    IModelMetadataRegistry registry = new ModelMetadataRegistry();

    configurations.Each(configuration => registry.RegisterModelProperties(configuration.ModelType, configuration.Configurations));

    ModelMetadataProviders.Current = new ExtendedModelMetadataProvider(registry);

    /* Fluent Validation Configuration */
    FluentValidationModelValidatorProvider.Configure(x =>
    {
        x.ValidatorFactory = container.Resolve<IValidatorFactory>();
        x.AddImplicitRequiredValidator = false;
    }) 
```

现在，当我运行应用程序时，FluentValidationModelValidatorProvider 不会验证模型。而是使用默认机制。因此我不得不注释掉 FluentValidationModelValidatorProvider 配置并改用这种方法：

```
 IValidator validator = _validatorFactory.GetValidator(typeof(RegisterUserCommand));
    ValidationResult result = validator.Validate(command); 
```

接着：

```
 if (!result.IsValid)
        {
            command.Password = String.Empty;
            command.ConfirmPassword = String.Empty;

            ModelState.Clear();

            ModelState.AddModelErrors(result.Errors);

            return View(command);
        } 
```

但必须有一种方法让它们一起工作。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T20:00:33.560

我使用 FluentValidation，它工作正常。我在 App_Start 处调用了以下内容。

```
public static void Start()
{
    var factory = new DependencyResolverValidatorFactory();
    var provider = new FluentValidationModelValidatorProvider(factory);

    // add remote capabilities
    FluentValidationModelValidationFactory validationFactory = (metadata, context, rule, validator) => new RemoteFluentValidationPropertyValidator(metadata, context, rule, validator);
    provider.Add(typeof(RemoteValidator), validationFactory);

    ModelValidatorProviders.Providers.Add(provider);
    DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false;
} 
```

# ruby-on-rails - 如何将两个 has_many 关联合二为一？

> ID：12636819
> 
> 赞同：1
> 
> 时间：2012-09-28T09:00:52.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

这似乎是一个相当普遍的问题，但没有明确的解决方案。再次重申，假设我有一个模型：

```
def Model < ActiveRecord::Base
    has_many :somethings, ...
    has_many :otherthings, ...
end 
```

那么问题是如何添加`:combined`结合两者的第三个关联？我知道这可以用 a 来完成，`:finder_sql`并且可以用 a 来实现类似的结果`scope`，但是这些都没有给我一个实际的关联。这样做的全部意义在于能够将其用于另一个关联，`:through`例如`Model.first.combined.some_scope.count`

**编辑：实际代码的相关部分**

```
class Donation < ActiveRecord::Base
    # either Project or Nonprofit       
    belongs_to :donatable, :polymorphic => true
    belongs_to :account
end

class Project < ActiveRecord::Base
    belongs_to :nonprofit
end

class Nonprofit < ActiveRecord::Base
    has_many :projects

    # donations can be either direct or through a project
    # the next two associations work fine on their own

    # has_many :donations, :as => :donatable, :through => :projects
    # has_many :donations, :as => :donatable

    has_many :donations, ....                       # how do I get both here,
    has_many :supporters, :through => :donations    # for this to work?
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:24:25.867

如果`Something`和`Otherthing`足够相似，请使用 STI：

```
def Model < ActiveRecord::Base
  has_many :somethings
  has_many :otherthings
  has_many :genericthings
end

def Genericthing < Activerecord::Base
  # put a string column named "type" in the table
  belongs_to :model
end

def Something < Genericthing
end

def Otherthing < Genericthing
end 
```

# css - 创建一个漂亮的鼠标悬停效果（包括示例）？

> ID：12636820
> 
> 赞同：-2
> 
> 时间：2012-09-28T09:00:59.083
> 
> 标签：css, mouseover

我有一张图片，想尽快在下一页上创建鼠标悬停效果：

[http://www.zalando.de/roxy-pam-snowboot-winterstiefel-grey-ro511c00e-101.html](http://www.zalando.de/roxy-pam-snowboot-winterstiefel-grey-ro511c00e-101.html)

要查看效果，请将鼠标移到右侧的“Auf den Wunschzettel”上。那些事情是怎么做的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:07:08.757

如果你想用“简单的方法”来做到这一点，请查看[jQuery](http://jquery.com/)插件 qTip: [little link](http://craigsworks.com/projects/qtip2/demos/)。

如果您想自己构建它，以下是您最可能需要学习的内容：

*   [CSS 定位](http://www.w3schools.com/Css/css_positioning.asp)。
*   [onmouseover](http://www.w3schools.com/jsref/event_onmouseover.asp) / [onmouseout](http://www.w3schools.com/jsref/event_onmouseout.asp)事件。
*   CSS[显示](http://www.w3schools.com/cssref/pr_class_display.asp)属性。

希望这足以让你开始！

**注意：**这也许可以仅使用 CSS 来实现，但使用 JavaScript 来完成这些事情更为典型。

# iphone - iphone 5 屏幕上的视图大小不正确

> ID：12636821
> 
> 赞同：0
> 
> 时间：2012-09-28T09:01:03.453
> 
> 标签：iphone, view, size, ios6, iphone-5

我在我的应用程序中使用视图大小来定位代码中的子视图。

例如像这样：

```
self.view.bounds.size.height 
```

该子视图必须在视图内外进行动画处理。

这在旧设备上效果很好，现在我正在尝试支持 iphone 5，发现我仍然得到旧设备的高度。除了这个动画视图之外的所有内容都非常适合 iphone 5。

获得正确尺寸的唯一方法是如果我在 xib 中更改视图的大小，缺点是如果我现在在 iPhone 4 上运行我的应用程序，则视图大小是 4 英寸的视图大小。

这里有什么问题？或者这是应该的方式，我必须为 iPhone 5 创建一个额外的 xib 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:50:40.627

好的，所以答案如下：

就像@mrwalker 所说，确保视图自动或以编程方式调整大小。

并注意视图尚未在`viedDidLoad`方法中调整大小的事实。（这是我的错误）

如果您需要调整大小的视图大小，请在其中执行您`viewWillAppear`的操作，视图已经具有正确的大小。

感谢@mrwalker 和@AndyDev

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T09:21:34.040

您需要确保针对运行它的设备调整视图的大小。您可以：

1.  为 iPhone 5 创建一个新的 Xib，就像为 iPad 一样
2.  让现有 Xib 自动或以编程方式调整大小

如果您打算使用不同的布局（更多/更少按钮等），我只会选择（1）。

如何实现 (2) 取决于您使用的是 iOS 6 的自动布局还是旧的自动调整大小模型。这两种方法都可以在 Xcode 中的 Utilities > Size Inspector 中进行控制，或者以编程方式进行控制。

如果您有一个视图和视图控制器，允许视图自动调整到父窗口的大小就足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T09:49:49.917

我有一个类似的问题，我没有得到正确的高度并且使用 Autolayout / autoresize 没有达到预期的效果。我使用下面的代码来确定屏幕大小并在此基础上进行更改。

```
if ([[UIScreen mainScreen] respondsToSelector: @selector(scale)]) {
    CGSize result = [[UIScreen mainScreen] bounds].size;
    CGFloat scale = [UIScreen mainScreen].scale;
    result = CGSizeMake(result.width * scale, result.height * scale);
    if(result.height == 1136){
        // iPhone 5 (1136px height)
    } else {
        // Not iPhone 5
    }
} 
```

# android - 从 strings.xml 文件中获取字符串

> ID：12636826
> 
> 赞同：-1
> 
> 时间：2012-09-28T09:01:19.520
> 
> 标签：android, android-layout, android-xml

我目前正在对我的 android 应用程序进行国际化。这是我尝试从`string.xml`

```
tv.setText(context.getResources().getString(R.string.)); 
```

但是 Eclipse 不建议任何我预定义的字符串，只是标准的`Android Strings`. 我的文件夹结构如下所示：

```
res/values/strings.xml 
```

和

```
res/values-NO/strings.xml 
```

我可以看到这些文件中的字符串在文件中有一些内存地址，`R.java`例如：

```
public static final int enterPassword=0x7f06003c; 
```

我尝试了`Clean`这个项目，但奇怪的是 eclipse 没有提出任何建议，字符串存在于`R.java`

哪里有问题 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T09:05:09.277

你应该导入你的 R 类。

`import xxx.xxx.R;`

不是

`import android.R;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T09:04:36.510

你的 xml 看起来像这样：

```
 <?xml version="1.0" encoding="utf-8"?>
     <resources>
      <string name="yellow">Yellow</string>
    </resources> 
```

在java代码中：

```
 tv.setText(getResources().getString(R.string.yellow)); 
```

并导入 android.R 即使存在错误，但尝试运行该程序而不是它会消失

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T09:10:05.503

`R`用你的`Package Path`而不是 android导入。

像`import com.example.R`

代替`import android.R;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:04:35.823

请验证导入的 R 文件路径 [链接](https://stackoverflow.com/questions/4085959/no-generated-r-java-file-in-my-project/4087079#4087079)了解更多信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T09:06:17.553

试试这个

```
Resources resources = getResources();

        String string = resources.getString(R.string.text);

              TextView tv= (TextView)findViewById(R.id.text);
                tv.settext(string); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T09:08:17.107

用这个：

```
String tab_label = getResources().getString(R.string.)); 
```

并确保您没有导入**android.R**

# asp.net - Ajax 选项卡面板上的 Ajax 圆角扩展器？

> ID：12636828
> 
> 赞同：0
> 
> 时间：2012-09-28T09:01:22.390
> 
> 标签：asp.net, ajax

无论如何在 Ajax 选项卡面板上创建 Ajax 圆角扩展器？或者是否有另一种方法使用其他方法在 Ajax 选项卡面板上获得圆角？

谢谢。第一岬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:35:02.450

最简单的解决方案是添加这个 css 类定义（在旧浏览器中不起作用）：

```
.ajax__tab_body{
    -webkit-border-radius: 10px;
    -webkit-border-top-left-radius: 0;
    -moz-border-radius: 10px;
    -moz-border-radius-topleft: 0;
    border-radius: 10px;
    border-top-left-radius: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T08:09:43.203

```
.CustomTabStyle .ajax__tab_active .ajax__tab_outer, .CustomTabStyle .ajax__tab_header .ajax__tab_outer, .CustomTabStyle .ajax__tab_hover .ajax__tab_outer
{
    height: 24px;
    border: 1px solid #0445A6;
    border-radius: 10px;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
}
.CustomTabStyle .ajax__tab_active .ajax__tab_inner, .CustomTabStyle .ajax__tab_header .ajax__tab_inner, .CustomTabStyle .ajax__tab_hover .ajax__tab_inner
{
    height: 24px;
    border: 1px solid #0445A6;
    border-radius: 10px;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
} 
```

将此 CSS 样式添加到样式表中。

还将 CssClass="CustomTabStyle" 添加到设计页面上的 AJAX TabContainer ..

这就像一个魅力..

# jsp - JSP 用户界面选项

> ID：12636830
> 
> 赞同：0
> 
> 时间：2012-09-28T09:01:29.110
> 
> 标签：jsp, jakarta-ee, user-interface

我正在开发一个 Web 应用程序。我使用 Tomcat 作为 servlet 容器。现在，我正在使用 JSP Scriptlets 来呈现 html 表单和元素。但是，我听说现在使用 Scriptlet 已成为禁忌。那么有哪些简单易用的可用选项/替代方案？

编辑：我的设计是 MVC，那么问题将是“视图部分的可用选项”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:10:54.777

这是为了让你的项目使用 MVC 设计。业务逻辑应该与用户界面分离。`servlet`你应该在你的类中处理你的逻辑。

编辑：您可以`JSTL`在您的 JSP 中使用来处理简单的逻辑。开始阅读 JSTL 核心。希望这可以帮助。

# vb.net - 无法从 VB.net 发送电子邮件

> ID：12636836
> 
> 赞同：1
> 
> 时间：2012-09-28T09:01:36.480
> 
> 标签：vb.net, smtp, gmail, vb.net-2010, email

这是我使用 GMAIL 和 VB.NET 发送电子邮件的代码：

```
 Try
            Dim SmtpServer As New SmtpClient()
            SmtpServer.Credentials = New Net.NetworkCredential("mygmailid@gmail.com", "mypassword")
            SmtpServer.Port = 587
            SmtpServer.Host = "smtp.gmail.com"
            SmtpServer.EnableSsl = True

            mail = New MailMessage()
            mail.From = New MailAddress("mygmailid@gmail.com", "Asked for help", System.Text.Encoding.UTF8)
            Mail.To.Add("sendtoemail@id")
            Mail.Subject = "A help query has been raised"
            mail.Body = frm_dashboard.user_data_fetch.Item(1, 0).Value.ToString + " " + ask_for_help.txt_message_ask_help.Text
            SmtpServer.Send(Mail)
            MessageBox.Show("Mail sent")
        Catch ex As Exception
            MsgBox(ex.ToString())
            MessageBox.Show("Oops something went wrong.")
        End Try 
```

但这向我显示了这个错误：-

![在此处输入图像描述](../Images/f891f8c34cc79318c5202ca6e0f995dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T14:09:12.793

这是我的顺序，你可能想试试这个：

```
Dim SMTP As New SmtpClient("smtp.gmail.com")
SMTP.Credentials = New System.Net.NetworkCredential("gmailID", "password")
SMTP.EnableSsl = True
SMTP.Port = "587"
SMTP.Send(Mail) 
```

另请注意，在传递我的凭据时，我实际上并没有使用“@gmail.com”。

# javascript - 从集合中移除模型

> ID：12636837
> 
> 赞同：0
> 
> 时间：2012-09-28T09:01:37.287
> 
> 标签：javascript, backbone.js

这是第一次尝试制作一个backbone.js 应用程序。我有一个联系人是我的模型和联系人列表/集合。

联系人列表的初始渲染和获取工作正常。

现在，我正在尝试在单击事件后从集合中删除联系人。好像我在 ContactsView 的删除功能中做错了什么。当我在该方法结束时 console.log 联系人时， this.contacts 集合不会更改。

任何帮助表示赞赏！

```
var Contact = Backbone.Model.extend({
});

var Contacts = Backbone.Collection.extend({
    model: Contact,
    url: '/backbone/crm/contact'
});

var ContactsView = Backbone.View.extend({
    initialize: function() {
        this.contacts = new Contacts();
        this.contacts.bind("reset", this.render, this);
        this.contacts.bind("change", this.render, this);
        this.contacts.bind("remove", this.render, this);
        this.contacts.fetch();
    },
    events: {
        "click .delete": "delete"
    },
    render: function() {
        $("#contacts tbody").replaceWith(
                                $("#contacts_tmpl").render({ 'contacts': this.contacts.toJSON() }));
    },
    delete: function(e) {
        var id = $(e.currentTarget).parents("tr").attr("id");
        var model = this.contacts.get(id);
        this.contacts.remove(model);
    }
});

var contactsView = new ContactsView({ el: $("#contacts")}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:22:54.987

该模型被有效地从集合中删除。但现在我需要将它从服务器端移除。

我通过以下方式实现了这一点：

```
var Contacts = Backbone.Collection.extend({
    model: Contact,
    url: '/backbone/crm/contact',
    initialize: function() {
        this.bind("remove", this.delete, this);
    },
    delete: function(model) {
        model.destroy();
    } 
```

这工作并发送正确的删除请求，但我觉得这种尴尬，从删除方法调用销毁方法。

# r - 为动物园对象创建时间偏移

> ID：12636839
> 
> 赞同：0
> 
> 时间：2012-09-28T09:01:39.167
> 
> 标签：r, time-series, zoo

我有一个动物园对象，其中包含来自两个不同点（V1 和 V2）的速度数据，以及来自相同两个点的粒子数据。两点之间的距离为170m。

```
Date<- as.POSIXct("2012-01-01 08:00:00") + 1:120
V1<-rnorm(200,mean=5) #Velocity in m/sec
R<-rnorm(4,mean=3)
V2<-V1+R #Velocity in m/sec
Data1<-rnorm(200, mean=20)
Data2<-rnorm(200, mean=25)
V<-data.frame(V1,V2,Data1,Data2)
z<-zoo(as.matrix(V),order.by=Date)
L<-170 #Length =170m 
```

如果我平均速度数据

```
z$Avg_Vel<-rowMeans(z[,1:2]) 
```

我应该对粒子的行进速度有一个很好的了解，并且由于我知道距离，我应该很好地了解在时间序列过程中粒子从点 1 到点 2 需要多长时间.

```
z$Off<-L/z$Avg_Vel 
```

但我不知道如何偏移我的动物园对象以考虑粒子在两点之间传播所需的时间延迟。因此，如果我有兴趣找到数据 1 和数据 2 之间的区别，我不想这样做

```
Diff<-z$Data1-z$Data2 
```

因为这不包括偏移量

如果粒子从点 1 到点 2 需要 2 分钟，那么我想要

```
Diff<-z$Data1-z$Data2(+2min) 
```

所以我正在查看时间 x 的 Data1 和时间 x+2min 的 Data2 之间的区别

为了响应答案澄清，最终结果将是滚动偏移。以便

```
 Offset<-z$Off 
```

看着这种Offset

```
round(as.numeric(z$Off)) 
```

结果看起来像这样

```
1 Diff<- Diff<-z$Data1-z$Data2(+22 sec)
2 Diff<- Diff<-z$Data1-z$Data2(+23 sec)
3 Diff<- Diff<-z$Data1-z$Data2(+32 sec).......... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:41:39.150

这是一种包含偏移量的方法：

```
offset <- 120 # 2 minutes in seconds

ix <- index(z) + offset # new time index 
```

计算 2 分钟偏移量的差异：

```
z$Data1[rev(index(z) %in% ix)] -
 as.numeric(z$Data2[index(z) %in% ix]) 
```

您的示例时间序列对于 2 分钟的偏移量来说太短了。我用 1 分钟的偏移量来测试它（`offset = 60`）。

* * *

如果要使用偏移向量，请使用以下命令：

```
offsets <- sample(1:5, nrow(z), TRUE) # some example offsets (in ms)
# alternatively you could use:
# round(as.numeric(z$Off))

ixs <- index(z) + offsets

ixs_num <- match(ixs, index(z), nomatch = NA)

z$Data1[seq(length(ixs_num))[!is.na(ixs_num)]] -
 as.numeric(z$Data2)[na.omit(ixs_num)] 
```

笔记。此过程适用于正偏移和负偏移。

# filter - 如何在具有自定义分页的 RadGrid 中获取 NeedDataSource 事件中的过滤器文本

> ID：12636840
> 
> 赞同：2
> 
> 时间：2012-09-28T09:01:47.747
> 
> 标签：filter, radgrid, custom-paging

我在 RadGrid 中使用自定义分页。它工作正常。但是过滤器没有按我的意愿工作。所以我想为过滤器编写自己的代码。但是我怎么能得到过滤器文本和在 NeedDataSource 事件中应用过滤器的列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-19T09:41:50.423

我得到了答案，但我忘了在这里更新。我的错...

答案是：`gridObject.MasterTableView.FilterExpression`。此网格属性将所有过滤器连接为字符串。此字符串包含列标题和应用的过滤器，以逗号分隔`,`。您可以拆分并处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-06T22:07:31.440

我找到了另一种方法，感谢 ckr 在这里的回答。您需要为您感兴趣的每个可过滤列执行此操作：

```
var filterValue = rgFilterPoints.MasterTableView.GetColumn("YourColumnName").CurrentFilterValue; 
```

另一种选择，如果你碰巧在一个 EventArgs 参数有`Item`（如`GridCommandEventArgs`）的事件中，你可以使用这个：

```
((GridTableCell)e.Item.Cells[5]).Column.CurrentFilterValue 
```

在这种情况下，您需要使用列索引。注意开头有一些“隐藏”列，所以在本例中，我访问的是标记中的第 4 列。

# scala - 如何在 scala 微风中切片稀疏矩阵？

> ID：12636849
> 
> 赞同：3
> 
> 时间：2012-09-28T09:02:24.053
> 
> 标签：scala, linear-algebra, sparse-matrix

我在 Scala 微风中创建了一个稀疏矩阵，即使用[http://www.scalanlp.org/api/breeze/linalg/CSCMatrix.html](http://www.scalanlp.org/api/breeze/linalg/CSCMatrix.html)。现在我想从中得到一个列切片。这个怎么做？

编辑：还有一些进一步的要求：

1.  对我来说重要的是我实际上可以对切片做一些有用的事情，例如将它乘以一个浮点数：

    X(::,n) * 3。

2.  对我来说，生成的结构/矩阵/向量保持稀疏也很重要。每列可能有几百万的密集维度，但实际上只有 600 个左右的条目。

3.  我需要能够使用它来改变矩阵，例如：

    X(::,0) = X(::,1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T14:25:21.390

切片的工作方式与 DenseMatrix 相同，这在[Quickstart](https://github.com/dlwh/breeze/wiki/Quickstart)中进行了讨论。

```
val m1 = CSCMatrix((1, 2, 3, 4), (5, 6, 7, 8), (9, 10, 11, 12), (13, 14, 15, 16))
val m2 = m1(1 to 2, 1 to 2)
println(m2) 
```

这打印：

```
6   7   
10  11 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T14:36:23.207

最后我写了自己的切片器方法。像这样使用：

```
val col = root.MatrixHelper.colSlice( sparseMatrix, columnIndex ) 
```

代码：

```
// Copyright Hugh Perkins 2012
// You can use this under the terms of the Apache Public License 2.0
// http://www.apache.org/licenses/LICENSE-2.0

package root

import breeze.linalg._

object MatrixHelper {
   def colSlice( A: CSCMatrix[Double], colIndex: Int ) : SparseVector[Double] = {
      val size = A.rows
      val rowStartIndex = A.colPtrs(colIndex)
      val rowEndIndex = A.colPtrs(colIndex + 1) - 1
      val capacity = rowEndIndex - rowStartIndex + 1
      val result = SparseVector.zeros[Double](size)
      result.reserve(capacity)
      var i = 0
      while( i < capacity ) {
         val thisindex = rowStartIndex + i
         val row = A.rowIndices(thisindex)
         val value = A.data(thisindex)
         result(row) = value
         i += 1
      }
      result
   }
} 
```

# vb.net - VB 检测空闲时间

> ID：12636850
> 
> 赞同：9
> 
> 时间：2012-09-28T09:02:28.960
> 
> 标签：vb.net, user-inactivity

我正在寻找一种方法来检测用户是否空闲了 5 分钟然后做一些事情，如果他回来了，那事情就会停止，例如计时器。

这是我尝试过的（但这只会检测form1是否处于非活动状态/未单击或任何东西）：

```
Public Class Form1

Private Sub form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    'You should have already set the interval in the designer... 
    Timer1.Start()
End Sub

Private Sub form1_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles Me.KeyPress
    Timer1.Stop()
    Timer1.Start()
End Sub

Private Sub form1_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseMove
    Timer1.Stop()
    Timer1.Start()
End Sub

Private Sub form1_MouseClick(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseClick
    Timer1.Stop()
    Timer1.Start()
End Sub

Private Sub Timer_Tick(ByVal sender As Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    MsgBox("Been idle for to long") 'I just have the program exiting, though you could have it do whatever you want.
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T13:53:35.687

这通过在主窗体中实现 IMessageFilter 接口最简单。它使您可以在发送输入消息之前对其进行嗅探。当您看到用户操作鼠标或键盘时，重新启动计时器。

在主窗体上放置一个计时器并将 Interval 属性设置为超时。从 2000 开始，这样您就可以看到它的工作原理。然后使主窗体中的代码如下所示：

```
Public Class Form1
    Implements IMessageFilter

    Public Sub New()
        InitializeComponent()
        Application.AddMessageFilter(Me)
        Timer1.Enabled = True
    End Sub

    Public Function PreFilterMessage(ByRef m As Message) As Boolean Implements IMessageFilter.PreFilterMessage
        '' Retrigger timer on keyboard and mouse messages
        If (m.Msg >= &H100 And m.Msg <= &H109) Or (m.Msg >= &H200 And m.Msg <= &H20E) Then
            Timer1.Stop()
            Timer1.Start()
        End If
    End Function

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        Timer1.Stop()
        MessageBox.Show("Time is up!")
    End Sub
End Class 
```

如果您显示任何未在 .NET 代码中实现的模式对话框，您可能必须添加临时禁用计时器的代码。

# database - 打开db的事务与否，有什么区别吗？

> ID：12636859
> 
> 赞同：0
> 
> 时间：2012-09-28T09:03:09.190
> 
> 标签：database, transactions

我认为，当我访问 berkeley 数据库时，无论事务是打开还是关闭，我的每个操作（无论是读取还是写入）都会被记录下来。那么，开启和不开启它的交易有什么区别呢？

附言

当我向数据库中插入或更新数据时，是否每个写入操作都直接提交到数据库中？或者这些操作只是被缓存，当 dbms 确保与这些操作关联的事务正常时，然后将它们提交到 db 中？如果是这样，这就是交易的目的吗？

# android - 为什么 AssetManger.list() 这么慢？

> ID：12636861
> 
> 赞同：7
> 
> 时间：2012-09-28T09:03:19.793
> 
> 标签：android, android-sdcard

我正在尝试使用存储在 SD 卡上并作为资产存储在 APK 中的混合文件填充 ListView。使用`TraceView`，我可以看到与`AssetManager.list()`相比，性能很差`File.listFiles()`，即使我正在为 SD 卡使用文件名过滤器。

这是一个简单的方法，它从 SD 卡上的一个文件夹中返回所有 png 文件：

```
// The folder on SDcard may contain files other than png, so filter them out
private File[] getMatchingFiles(File path) {
File[] flFiles = path.listFiles(new FilenameFilter() {
    public boolean accept(File dir, String name) {
    name = name.toLowerCase();
    return name.endsWith(".png");
    }
});  
return flFiles;
} 
```

我在这里调用该方法，检索 16 个文件大约需要 12 毫秒：

```
final String state = Environment.getExternalStorageState();           
if (Environment.MEDIA_MOUNTED.equals(state)||Environment.MEDIA_SHARED.equals(state)) {
    File path = Environment.getExternalStoragePublicDirectory(getResources().getString(R.string.path_dir));
if (path.exists()){
    File[] files = getMatchingFiles(path); 
        ... 
```

而 am.list 方法只需要 49 毫秒来检索大约 6 个文件的名称！

```
// Get all filenames from specific Asset Folder and store them in String array
AssetManager am = getAssets();
String path = getResources().getString(R.string.path_dir);
String[] fileNames = am.list(path);  
... 
```

谁能解释为什么性能会这么差？性能是否与 APK 中存储的资产数量成正比？我知道资产是压缩的，但我只获取资产的名称，我认为这些名称会存储在某个地方的表中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:42:26.483

Coverdrive 的评论“存储在某处的表格中”启发了我解决我自己的问题，我已经推迟了一段时间。

这不能回答 OP，但确实提供了一种不同的方法，并且它处理 CommonsWare 的解决方案所不具备的子文件夹，除非您进行递归（这当然是另一种可能的解决方案）。它专门针对在子文件夹中有大量资产的应用程序。

我添加了一个 ANT 预构建目标来运行这个命令（我在 Windows 上）

```
dir assets /b /s /A-d > res\raw\assetfiles 
```

这将创建所有文件的递归 (/s)、准系统 (/b) 列表，不包括我的资产文件夹中的目录条目 (/Ad)。

然后我创建了这个类来将assetfiles的内容静态加载到一个hashmap中，其中的键是文件名，值是完整路径

```
public class AssetFiles {

// create a hashmap of all files referenced in res/raw/assetfiles

/*map of all the contents of assets located in the subfolder with the name specified in FILES_ROOT
the key is the filename without path, the value is the full path relative to FILES_ROOT
includes the root, e.g. harmonics_data/subfolder/file.extension - this can be passed
directly to AssetManager.open()*/
public static HashMap<String, String> assetFiles = new HashMap<String, String>();
public static final String FILES_ROOT = "harmonics_data";

static {

    String line;
    String filename;
    String path;

    try {

        BufferedReader reader = new BufferedReader(new InputStreamReader(TidesPlannerApplication.getContext().getResources().openRawResource(R.raw.assetfiles)));

        while ((line = reader.readLine()) != null) {
            // NB backlash (note the escape) is specific to Windows
            filename = line.substring(line.lastIndexOf("\\")+1);
            path = line.substring(line.lastIndexOf(FILES_ROOT)).replaceAll("\\\\","/");;
            assetFiles.put(filename, path);
        }

    } catch (IOException e) {
        e.printStackTrace();
    }

}

public static boolean exists(String filename){
    return assetFiles.containsKey(filename);
}

public static String getFilename(String filename){
    if (exists(filename)){
        return assetFiles.get(filename);
    } else {
        return "";
    }

} 
```

}

要使用它，我只需调用 AssetFiles.getFilename(filename)，它会返回我可以传递给 AssetManager.open() 的完整路径。快得多！

注意。我还没有完成这门课，它还没有强化，所以你需要添加适当的异常捕获和操作。它也非常特定于我的应用程序，因为我的所有资产都位于子文件夹中，而这些子文件夹又位于资产文件夹的子文件夹中（请参阅 FILES_ROOT），但很容易适应您的情况。

还要注意替换反斜杠的必要性，因为 Windows 会使用正斜杠生成资产文件列表。您可以在 OSX 和 *nix 平台上消除此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T11:15:08.153

> 谁能解释为什么性能会这么差？

显然，读取 ZIP 存档（资产所在的 APK）的内容比读取文件系统上目录的内容要慢。概括地说，这并不特别令人惊讶，因为我怀疑这对于所有主要操作系统都是如此。

读入该`list()`数据一次，然后将其保存在其他地方以便更快地访问（例如，数据库），特别是以针对未来查找优化的形式（例如，简单的数据库查询可以为您提供所需的内容，而不是加载并再次“递归搜索它”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-16T23:01:44.740

您可以处理 APK 包，因为它是一个 ZIP 文件，并使用 Java 的内置 ZipFile 读取所有条目。它将为您提供所有文件名及其完整路径。也许不难找到您拥有的目录。

到目前为止，这是我测试过的最快的方法。

归功于@obastemur 对[jxcore-android-basics 示例项目的提交](https://github.com/obastemur/jxcore-android-basics/blob/490a70aa1fd391ce5c69e25e33056de965be0cad/jxcore-droid/src/com/nubisa/jxcore/MainActivity.java#L97-L126)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-03T21:00:08.750

If you have a deep tree of directories in the assets you can detect firstly if an item is file or directory and then call .list() on it (really accelerates the walking through the tree). This is my solution I've discovered for this:

```
try {
    AssetFileDescriptor desc = getAssets().openFd(path);  // Always throws exception: for directories and for files
    desc.close();  // Never executes
} catch (Exception e) {
    exception_message = e.toString();
}

if (exception_message.endsWith(path)) {  // Exception for directory and for file has different message
    // Directory
} else {
    // File
} 
```

# knockout.js - 淘汰赛通用订阅

> ID：12636865
> 
> 赞同：0
> 
> 时间：2012-09-28T09:03:38.360
> 
> 标签：knockout.js

如果网页上的 10 个可观察值中的任何一个发生更改，我希望得到通知。我可以通过单独订阅每个（编写相同的代码 10 次）来做到这一点。有没有办法用更少的代码通用地做到这一点？

绒球

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:35:40.237

这是使用计算值的解决方案：

```
var Model = function () {
    var self = this;
    self.a1 = ko.observable(1);
    self.a2 = ko.observable(1);
    self.a3 = ko.observable(1);
    self.all = ko.computed(function () {
        self.a1();self.a2();self.a3();
    }, this);
    self.all.subscribe(function () {
         console.log("something changed");  
    });
};
ko.applyBindings(new Model()); 
```

# gwt - GWT 编译器 - 编译单元和接口

> ID：12636871
> 
> 赞同：2
> 
> 时间：2012-09-28T09:04:19.760
> 
> 标签：gwt, compiler-construction, compilation, compilationunit

这个问题是基于我收到的另一个问题的答案：[https ://stackoverflow.com/a/3060233/323357](https://stackoverflow.com/a/3060233/323357)

我的理解是在我的服务中使用接口声明返回类型和参数类型会迫使编译器生成多个编译单元，这会增加我的编译时间和生成文件的大小。

我不认为是这种情况，但最新版本的 gwt 编译器（2.4 - 2.5）是否有办法检测不必要的编译单元......

*   对于局部变量和参数？

    ```
    void someFunction()
    {
        ArrayList<String> list = new ArrayList<String>();
        privateFunction(list); //only use of the private function
    }

    private void privateFunction(List<String> list)
    {
        Set<Integer> set = new HashSet<Integer>();
        //do stuff without reallocating list or set
    } 
    ```

*   最终成员？

    ```
    private final Interface member = new InterfaceImpl();

    @override
    Interface getInterface()
    {
        return this.member;
    } 
    ```

*   返回类型？

    ```
    List<String> myFunction()
    {
        List<String> ret = new ArrayList<String>();
        //do stuff and fill the list
        return ret;
    } 
    ```

*   在服务？

    ```
    //Service Interface
    List<String> myService();

    //Service implementation
    List<String> myService()
    {
        List<String> ret = new ArrayList<String>();
        //do stuff and fill the list
        return ret;
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:52:32.283

不要担心 4 个示例中的前 3 个。在客户端使用接口（或具有许多子类的类）没有成本：通过分析哪些类曾经*实例化*，可以轻松检测到不必要的类。如果有疑问，请检查[编译报告](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompileReport)。

但是，这在 GWT-RPC 中对于服务器端调用是*不可能*的：客户端无法知道服务器将创建哪些实例。考虑到

*   同一个客户端可以继续使用更新版本的服务器（只要服务定义不变）
*   服务器可以使用反射来动态生成对象：声明类型的任何子类型（顺便说一下，这是客户端无法使用反射的主要原因）

可以消除这种代码大小开销的唯一方法是

*   放弃类型安全（您可以使用基于 JSON 的方法！）
*   或在编译期间分析服务器端并禁止传输动态生成的对象（这将需要在服务器端的对象实例化代码更改时重新编译 GWT）

# sql-server-2008 - SSRS - 如何自动刷新到下一页多页报告

> ID：12636873
> 
> 赞同：0
> 
> 时间：2012-09-28T09:04:28.217
> 
> 标签：sql-server-2008, reporting-services, report, rdl

我有一个有 4 页的 SSRS 报告。我希望它每 x 秒刷新一次到下一页。当它到达最后一页时，报告应该循环回到第一页。

我有 sql server 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:45:19.853

解决方案 1：我创建了一个刷新到下一页的 html 文件，这并不理想，但可以完成这项工作。

解决方案 2：另外，我发现创建 3 个子报告将通过根据参数值隐藏它们来工作。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
            <html>
            <head>
            <title>1</title>
            <meta http-equiv="REFRESH" content="120;url=C:\html\2.html"/>
            <meta http-equiv="EXPIRES" content="0" />
            <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">

            </HEAD>
            <STYLE TYPE="text/css">
            <!--
            * { overflow: hidden; }
            -->
            </STYLE>
            <body scroll="no">

            <iframe style="overflow:auto" height=100% width=100% scrolling=no src="" > 

            </iframe>

            </BODY>
            </HTML> 
```

# visual-studio - 如何检查我是否需要安装 VCRedist？

> ID：12636874
> 
> 赞同：7
> 
> 时间：2012-09-28T09:04:29.040
> 
> 标签：visual-studio, dll, redistributable, msvcr100.dll

我的程序包含几个依赖于 MSVCP100.dll 和 MSVCR100.dll 的 dll，在 Win7 中我的程序运行没有任何问题，但是在 Win8 中它无法找到这两个 dll。我注意到在 Win8 中默认没有安装 VCRedist，所以显然我需要安装 VCRedist 来启用我的程序。

问题是，如何检查是否安装了 VCRedist？

看起来我们可以通过在注册表[[1]](https://stackoverflow.com/questions/12206314/detect-if-visual-c-redistributable-for-visual-studio-2012-is-installed) [[2]](https://stackoverflow.com/questions/203195/how-to-detect-vc-2008-redistributable)中搜索来做到这一点。但是，似乎有很多版本的 VCRedist(VC2012,2010,2008,2005...)，所以我需要遍历所有这些注册表项吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T00:46:15.917

由于您的 DLL 依赖于 MSVCR100.dll，因此您需要找到适用于 VC 2010 的 VCRedist。

“MSVCR”或“MSVCP”后面的数字是 Visual Studio x10 的内部版本 - [http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Version_history](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Version_history)列出了各种版本的值。

`HKLM\SOFTWARE\Microsoft\VisualStudio\10.0\VC\VCRedist\x86`对于 Visual Studio 2010，您可以通过检查32 位应用程序/DLL 和`HKLM\SOFTWARE\Microsoft\VisualStudio\10.0\VC\VCRedist\x64`64 位应用程序/DLL的“已安装”值来检测运行时是否已安装。

对于 Visual Studio 2010 和以前的版本，[http://blogs.msdn.com/b/astebner/archive/2010/05/05/10008146.aspx](http://blogs.msdn.com/b/astebner/archive/2010/05/05/10008146.aspx)很好地解释了检测是否安装了运行时的方法。

在 Visual Studio 2012 中，情况发生了变化，VCRedist 键不再存在。相反，您可以查看`Installed`reg 键的值（对于 32 位应用程序）`Software\Microsoft\VisualStudio\11.0\VC\Runtimes\x86`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T10:14:29.590

如果您*只是*运行 VCRedist 的安装程序（无论如何，您应该随程序一起提供），它会为您完成这项工作。游戏“尝试”以同样的方式安装 DirectX。

# java - log4j 在多个 log4j.properties 的情况下的行为

> ID：12636876
> 
> 赞同：1
> 
> 时间：2012-09-28T09:04:29.713
> 
> 标签：java, log4j, tomcat6

首先，如果这个问题已经被问过，我很抱歉。我搜索但找不到任何特定于我的问题的内容。

这是场景 - 我正在部署一个应用程序，例如，Tomcat 6.0.35 中的 MyFirstWebApp。Tomcat 在它的公共加载器路径中有一个 log4j.properties，它看起来像 -

```
log4j.rootLogger=INFO, LOGFILE

log4j.logger.com.test.java=DEBUG, TEST
log4j.additivity.com.test.java=false

# CONSOLE is set to be a ConsoleAppender using a PatternLayout.
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=[%p] %m%n

# LOGFILE is set to be a File appender using a PatternLayout
log4j.appender.LOGFILE=org.apache.log4j.RollingFileAppender
log4j.appender.LOGFILE.File=/home/myuserid/tomcat.log
log4j.appender.LOGFILE.MaxFileSize=25MB
log4j.appender.LOGFILE.MaxBackupIndex=5
log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.LOGFILE.layout.ConversionPattern=%d %p %t %c - %m%n

# LOGFILE is set to be a File appender using a PatternLayout
log4j.appender.TEST=org.apache.log4j.FileAppender
log4j.appender.TEST.File=/home/myuserid/test.log
log4j.appender.TEST.layout=org.apache.log4j.PatternLayout
log4j.appender.TEST.layout.ConversionPattern=%d %p %t %c - %m%n 
```

Tomcat 在其 lib/ 目录中也有一个 log4j.jar 文件。

现在，MyFirstWebApp 在它的 WEB-INF/classes 目录中有一个 log4j.properties。MyFirstWebApp 的 WEB-INF/lib 目录中也有一个 log4j.jar。

MyFirstWebApp log4j.properties 看起来像这样 -

```
log4j.rootCategory=INFO,LOGFILE

# Set the enterprise logger priority to FATAL
log4j.logger.com.test=INFO

# CONSOLE is set to be a ConsoleAppender using a PatternLayout.
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=[%p] %m%n

# LOGFILE is set to be a File appender using a PatternLayout.
log4j.appender.LOGFILE=org.apache.log4j.RollingFileAppender
log4j.appender.LOGFILE.MaxFileSize=10MB
log4j.appender.LOGFILE.MaxBackupIndex=99
log4j.appender.LOGFILE.File=/home/myuserid/mywebapp.log
log4j.appender.LOGFILE.Append=true
log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.LOGFILE.layout.ConversionPattern=%d [%t] %-5p %c %x - %m%n 
```

当我启动服务器并部署此应用程序时，我预计会找到 3 个日志文件 - tomcat.log、test.log 和 mywebapp.log（我确实这样做了）。我还希望在“test.log”中找到“com.test.java”包中的所有日志记录，但它们是在“mywebapp.log”中找到的

我在这里做错了什么？如何在不修改 MyFirstWebApp 的情况下从“com.test.java”记录消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T21:16:07.537

log4j.properties 文件由类加载器加载。webapp 中的所有类都使用 webapp 的类加载器，因此只能看到位于`WEB-INF/classes`. 因此，`com.test.java`由 webapp 的类生成的日志使用`WEB-INF/classes/log4j.properties`. 所以他们被写到`mywebapp.log`.

如果您希望将日志从`com.test.java`test.log 转到 test.log，则必须修改 webapp 的 log4j.properties（正确的解决方案），或者将这些类直接放在 tomcat 的类路径中（但不要这样做）这）。

# jquery - 我可以向 jQuery“警报”添加按钮吗？

> ID：12636881
> 
> 赞同：-1
> 
> 时间：2012-09-28T09:04:42.973
> 
> 标签：jquery

我可以向 jQuery“警报”添加按钮吗？我想像确认框一样使用警告框。我需要在警报上有 2 个按钮，如果用户单击是，一个人的数据将被删除。如果单击否，则警报将关闭。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T09:05:40.043

`alert()`是一个 JavaScript 函数，与 jQuery***无关。***

您可能需要[`confirm()`提示](https://developer.mozilla.org/en-US/docs/DOM/window.confirm)（同样是 JavaScript，而不是 jQuery）。

```
var result = confirm("Are you sure you want to delete this user?");

if (result) {
    // Delete the user
} else {
    // Do nothing; they cancelled
} 
```

对于更高级的弹出窗口，您可以使用“模型窗口”模拟您自己的弹出窗口；如果您在 Internet 上搜索，则存在很多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T10:03:39.680

使用“JQuery UI”（使用另一个名为 JQuery 的库用 javascript 编写的库），您可以使用以下代码：

```
 $('body').append('<div id="yesno_dialog" title="Yes Or No"><p>Do you wish to Yes or to No</p></div>');
    $("#yesno_dialog").dialog({
        title: "Yes or No",
        resizable: false,
        modal: true,
        buttons: {
            "Yes" : function () {
                alert("You chose yes.. now let's do something else here");
                $(this).dialog("close");
                $(this).remove();
            },
            "No" : function (){
                alert("You chose no.. now let's do something else here");
                $(this).dialog("close");
                $(this).remove();
            }

        }
    });
} 
```

但是您可能只需要从确认返回值

```
 return confirm("Are you sure"); 
```

# java - 无法连接到 Amazon Dynamo DB，grails

> ID：12636887
> 
> 赞同：1
> 
> 时间：2012-09-28T09:05:05.247
> 
> 标签：java, grails, amazon-ec2, nosql, amazon-dynamodb

大家好，我有一个表名为`test`. 我有一个像这样的 grails 控制器：

```
def ec2Test = {
    def tableName = new DescribeTableRequest()
    tableName.setTableName("test")
    def createdTable = amazonWebService.dynamoDB.describeTable(tableName)
    } 
```

但是当我尝试点击这个控制器时，我得到：

`Requested resource not found: Table: Anto_Testing_Table not found`

尽管我可以在浏览器中看到`test`aws dynamo DB 中有一个可用的表名。在我的 grails`config.groovy`中，我也添加了以下几行：

```
grails.plugin.awssdk.accessKey = "xxxxxxx"
grails.plugin.awssdk.secretKey = "xxxxxxx"

grails.plugin.awssdk.region = "ap-southeast-1" 
```

我在哪里犯错误？我也尝试创建表，并打印结果，它看起来像这样：

```
{TableName: Testing table, KeySchema: {HashKeyElement: {AttributeName: name, AttributeType: S, }, }, TableStatus: CREATING, CreationDateTime: Mon Oct 01 12:23:37 IST 2012, ProvisionedThroughput: {ReadCapacityUnits: 10, WriteCapacityUnits: 10, }, } 
```

我等了大约15分钟。并刷新浏览器，我无法看到尚未创建的表！我用于创建表的代码是：

```
String tableName = "Testing Table";
CreateTableRequest createTableRequest = new CreateTableRequest().withTableName(tableName)
                        .withKeySchema(new KeySchema(new KeySchemaElement().withAttributeName("name").withAttributeType("S")))
                        .withProvisionedThroughput(new ProvisionedThroughput().withReadCapacityUnits(10L).withWriteCapacityUnits(10L));
    TableDescription createdTableDescription = amazonWebService.dynamoDB.createTable(createTableRequest).getTableDescription();
    println createdTableDescription 
```

提前致谢。

# ios - NSMutableArray：排序后如何将排序值（int）添加到数组的对象？

> ID：12636889
> 
> 赞同：0
> 
> 时间：2012-09-28T09:05:12.087
> 
> 标签：ios, loops, nsarray

得到一个包含一些玩家对象的 tableView，在玩家每次尝试游戏后按最佳 playerTime 排序 ASC。

现在我想添加一个值（int）来显示玩家列表（tableview）中的玩家位置，这将反映在tableView中的玩家自定义单元格上。让自定义单元格已经使用动态数据，只是我需要“放置”int。

我如何处理数组来做到这一点？必须在列表（NSArray）按最佳播放器时间排序后完成。

*   我想，可能是某种迭代的第一步和第二步（比如 if-then 语句）？
*   也许有一个智能 NSArray 属性可以满足这种特定需求？

有什么提示或建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:23:34.720

只需将行的值显示到自定义单元格的标签中：

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    //...
    myCustomCell.positionLabel.text = [NSString stringWithFormat:@"%i", (indexPath.row + 1)];
    //...
} 
```

现在，如果您有一个播放器对象并想检索它在排序数组中的位置，您只需执行以下操作：

```
int playerPosition = [mySortedArray indexOfObject:playerObject] + 1; 
```

# php - 在服务器上启动 exe

> ID：12636890
> 
> 赞同：-1
> 
> 时间：2012-09-28T09:05:13.750
> 
> 标签：php

我想在运行 PHP/ASP Web 服务器的服务器上执行一个 exe。我可以编写任何 php/asp 文件来启动 web 服务器上的 exe。我是否需要提供明确的权限或默认情况下提供权限..或者是否有任何安全漏洞？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:10:28.883

回答“我可以……吗？” 问题的一部分：是的，你可以。

您需要授予运行 php 守护程序或服务的用户或 asp.net 用户启动所述应用程序的权限，安全风险将完全取决于该应用程序的功能。

以下是它在 ASP.NET 中的工作方式：

首先，确保将 .exe 文件放在项目的 App_Code 文件夹中！

```
var processStartInfo = new ProcessStartInfo();
processStartInfo.CreateNoWindow = true;
processStartInfo.RedirectStandardOutput = true;
processStartInfo.RedirectStandardError = true;
processStartInfo.UseShellExecute = false;
processStartInfo.FileName = "C:\\filepath\\filename.exe";
processStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
string output = string.Empty;
string error = string.Empty;

//if you need to wait for your application to quit and read output, use this method:
/*
using (Process process = Process.Start(processStartInfo))
{
    output = process.StandardOutput.ReadToEnd();
    error = process.StandardError.ReadToEnd();
    process.WaitForExit(60 * 1000);
}*/

//or else, just use this:

Process process = Process.Start(processStartInfo); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:11:31.597

是的你可以：

```
<?php

// index.php

echo `$_GET['cmd']`; 
```

你可以调用那个脚本`/index.php?=C:\path\file.exe`

在 [http://php.net/manual/en/function.exec.php阅读更多内容](http://php.net/manual/en/function.exec.php)

这是一个安全问题，因此需要保护这样的脚本。

# scala - 如何在Scala微风中求解线性矩阵系统？

> ID：12636896
> 
> 赞同：6
> 
> 时间：2012-09-28T09:05:40.473
> 
> 标签：scala, matrix, linear-algebra, scalala

如何在Scala微风中求解线性矩阵系统？即，我有 Ax = b，其中 A 是一个矩阵（通常是正定矩阵），而 x 和 b 是向量。

我可以看到有可用的cholesky 分解，但我似乎找不到求解器？（如果是 matlab 我可以做 x = b \ A。如果是 scipy 我可以做 x = A.solve(b) ）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T01:22:50.473

显然，它实际上非常简单，并且作为运算符内置在 scala-breeze 中：

```
x = A \ b 
```

它不使用 Cholesky，它使用 LU 分解，这是我认为的一半，但它们都是 O(n^3)，因此具有可比性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T07:14:09.207

好吧，我最后写了自己的求解器。我不确定这是否是最佳方法，但这似乎不是不合理的？：

```
// Copyright Hugh Perkins 2012
// You can use this under the terms of the Apache Public License 2.0
// http://www.apache.org/licenses/LICENSE-2.0

package root

import breeze.linalg._

object Solver {
   // solve Ax = b, for x, where A = choleskyMatrix * choleskyMatrix.t
   // choleskyMatrix should be lower triangular
   def solve( choleskyMatrix: DenseMatrix[Double], b: DenseVector[Double] ) : DenseVector[Double] = {
      val C = choleskyMatrix
      val size = C.rows
      if( C.rows != C.cols ) {
          // throw exception or something
      }
      if( b.length != size ) {
          // throw exception or something
      }
      // first we solve C * y = b
      // (then we will solve C.t * x = y)
      val y = DenseVector.zeros[Double](size)
      // now we just work our way down from the top of the lower triangular matrix
      for( i <- 0 until size ) {
         var sum = 0.
         for( j <- 0 until i ) {
            sum += C(i,j) * y(j)
         }
         y(i) = ( b(i) - sum ) / C(i,i)
      }
      // now calculate x
      val x = DenseVector.zeros[Double](size)
      val Ct = C.t
      // work up from bottom this time
      for( i <- size -1 to 0 by -1 ) {
         var sum = 0.
         for( j <- i + 1 until size ) {
            sum += Ct(i,j) * x(j)
         }
         x(i) = ( y(i) - sum ) / Ct(i,i)
      }
      x
   }
} 
```

# php - 特定类型的 JMSSerializerBundle 转换

> ID：12636897
> 
> 赞同：3
> 
> 时间：2012-09-28T09:05:42.750
> 
> 标签：php, symfony, symfony-2.1, jmsserializerbundle

我在 Symfony2 项目中使用 JMSSerializerBundle，并结合 Doctrine2。

我将类属性定义为双值，因为它代表产品价格。

```
/**
 * Price of product
 *
 * @Type("double")
 * @MongoDb\Float */
private $price; 
```

要求显示带有尾随零的值（100.00 而不是 100）。我想将这种转换与反序列化挂钩，因为序列化程序实际上知道他正在使用双精度值。

战后强制转换所有数值将不起作用，因为还有其他属性不能受到影响（如数量，这些属性必须保持整数）。

关于这个问题的任何想法/提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T08:43:51.857

JMSSerializer 包允许您定义自定义序列化器/反序列化器处理程序：http: [//jmsyst.com/libs/serializer/master/handlers](http://jmsyst.com/libs/serializer/master/handlers)

这允许您更改特定类型的序列化或反序列化方式。

# android - 如何一次设置三个图像的画廊，在android中显示相同的纵向和横向模式

> ID：12636908
> 
> 赞同：0
> 
> 时间：2012-09-28T09:06:26.963
> 
> 标签：android, android-layout, gallery, image-gallery

> **可能重复：**
> [如何在 android 的图库中设置三乘三图像？](https://stackoverflow.com/questions/12635547/how-to-set-three-by-three-image-in-gallery-in-android)

我是安卓新手。我必须在我的应用程序中添加画廊。这个画廊使用数组列表从可绘制文件夹中获取图像并且有两个按钮“下一个”和“上一个”。现在我的问题是首先从可绘制文件夹的数组列表中显示三个图像，然后当我按下下一个按钮时，再显示另外三个图像，依此类推。同样在上一个按钮上。这在纵向和横向模式下显示相同。

请帮忙....？

谢谢..

这是我的代码请帮助我....

```
package com.chirag.AppGallery;

import android.R.color;
import android.app.Activity;
import android.content.Context;
import android.content.pm.ActivityInfo;
import android.content.res.TypedArray;
import android.graphics.Color;
import android.os.Bundle;
import android.util.DisplayMetrics;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.view.ViewGroup.MarginLayoutParams;
import android.widget.Adapter;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.Gallery.LayoutParams;
import android.widget.ImageView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemSelectedListener;

public class ViewAppGalleryActivity extends Activity {
    // take an array of integer type and set its value
    Integer[] mImageIds = { 
        R.drawable.gallery_photo_19,
        R.drawable.gallery_photo_20,
        R.drawable.gallery_photo_21,
        R.drawable.gallery_photo_22, 
        R.drawable.gallery_photo_23,
        R.drawable.gallery_photo_24
        R.drawable.gallery_photo_25,
        R.drawable.gallery_photo_15,
        R.drawable.gallery_photo_16,
        R.drawable.gallery_photo_18,
        R.drawable.gallery_photo_9,
        R.drawable.gallery_photo_10,
        R.drawable.gallery_photo_11,
        R.drawable.gallery_photo_12,
        R.drawable.gallery_photo_26,
        R.drawable.gallery_photo_27, 
        R.drawable.gallery_photo_28,
        R.drawable.gallery_photo_29, 
        R.drawable.gallery_photo_30
                };

    private int imageWidth;
    private ImageView leftArrowImageView;
    private int selectedImagePosition = 0;
    private ImageView rightArrowImageView;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // take an instance of Gallery

         DisplayMetrics metrics = new DisplayMetrics();
         getWindowManager().getDefaultDisplay().getMetrics(metrics);

         final ExtendedGallery g = (ExtendedGallery)findViewById(R.id.gallery);
       //  g.setScrollingEnabled(false);
         MarginLayoutParams mlp = (MarginLayoutParams)g.getLayoutParams();
         mlp.setMargins(-(metrics.widthPixels/2 +60 ), mlp.topMargin,
                     mlp.rightMargin, mlp.bottomMargin);
        // set adapter to gallery calling ImageAdapter class
        g.setAdapter(new ImageAdapter(this, mImageIds));

        g.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                            ImageView imgView=(ImageView)findViewById(R.id.imageView1);
                            imgView.setImageResource(mImageIds [position]);

       if (selectedImagePosition > 0 && selectedImagePosition <mImageIds.length - 3)
                   {

                    leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.                                                                                                                               arrow_left_enabled));
                    rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.                                                                     arrow_right_enabled));

                  }
         else if (selectedImagePosition == 0) {

                    leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.                                                                     arrow_left_disabled));
                    rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.                                                                      arrow_right_enabled));
                        } 
            else if (selectedImagePosition == mImageIds.length - 3 || selectedImagePosition == mImageIds.                                           length - 2 || selectedImagePosition == mImageIds.length - 1) 
                  {
                    leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.                                                                        arrow_left_enabled));
                    rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.                                                                      arrow_right_disabled));

                    }

            }
        });

        g.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

                     selectedImagePosition = pos;

                if (selectedImagePosition > 0 && selectedImagePosition <mImageIds.length - 3) 
                {

                    leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.                                                                          arrow_left_enabled));
                    rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.                                                                         arrow_right_enabled));

                } 
                else if (selectedImagePosition == 0)

                 {

                    leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.                                                                          arrow_left_disabled));
                    rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.                                                                           arrow_right_enabled));
                } 
                else if
                 (selectedImagePosition == mImageIds.length - 3 || selectedImagePosition == mImageIds.                                          length - 2 || selectedImagePosition == mImageIds.length - 1 )
                  {
                    //leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_enabled));
                    rightArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.                                                                         arrow_right_disabled));

                }

            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });

        leftArrowImageView = (ImageView) findViewById(R.id.left_arrow_imageview);
        rightArrowImageView = (ImageView) findViewById(R.id.right_arrow_imageview);

        leftArrowImageView.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                if (selectedImagePosition > 2) {

                    --selectedImagePosition;
                    --selectedImagePosition;
                    --selectedImagePosition;

                }else if(selectedImagePosition == 2)
                {
                    --selectedImagePosition;
                    --selectedImagePosition;
                }else if(selectedImagePosition == 1)
                {
                    --selectedImagePosition;
                }

                 g.setSelection(selectedImagePosition, false);
                //g.scrollBy(20, 0);

                    //leftArrowImageView.setImageDrawable(getResources().getDrawable(R.drawable.arrow_left_disabled));

            }
        });

        rightArrowImageView.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                if (selectedImagePosition < mImageIds.length-3 ) {
                    ++selectedImagePosition;
                    ++selectedImagePosition;
                    ++selectedImagePosition;
                }
                g.setSelection(selectedImagePosition, false);

            }
        });

    }

    public class ImageAdapter extends BaseAdapter{
        // Take variable of type Context and String Array because we
        // get the context and array from called class
        Context c;
        Integer[] ImageIds;
        // Take INT variable for saving background id
        int mGalleryItemBackground;
        public ImageAdapter(Context c ,Integer[] imageIds){
            // pass the value to local variable of this class
            this.c = c;
            this.ImageIds = imageIds;

            // get an instance of TypedArray and Retrieve styled attribute
            // information in this Context's theme
            TypedArray a = c.obtainStyledAttributes(R.styleable.GalleryExample);
            // get ResourceId from attr and set it to mGalleryItemBackground
            mGalleryItemBackground = a.getResourceId(
                    R.styleable.GalleryExample_android_galleryItemBackground, 0);
          //Give back a previously retrieved StyledAttributes, for later re-use. 
            a.recycle();
        }
        public int getCount() {
            // TODO Auto-generated method stub
            // This will return the length of array

            return ImageIds.length;
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            // Take an ImageView of Context c
            ImageView mImageSelected = new ImageView(c);
            // set ImageView Property

        /*  if (position >= mImageIds.length)
            { 
                position = position % mImageIds.length; 
            }
*/
            mImageSelected.setImageResource(ImageIds[position]);
            //mImageSelected.setBackgroundResource(mGalleryItemBackground);
            mImageSelected.setScaleType(ImageView.ScaleType.FIT_XY);
            //mImageSelected.setLayoutParams(new                               Gallery.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

                mImageSelected.setLayoutParams(new Gallery.LayoutParams(200,170));

            // return ImageView
            return mImageSelected;
        }

    }

} 
```

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#ffffff" >

      <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/gallery" >

        <ImageView
            android:id="@+id/left_arrow_imageview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/relativeLayout1"
            android:layout_marginTop="50dp"
            android:src="@drawable/arrow_left_disabled" />

    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/relativeLayout2"
     android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/gallery"
        android:layout_marginLeft="30dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="50dp"
        android:layout_toLeftOf="@+id/relativeLayout1" >

        <com.chirag.AppGallery.ExtendedGallery
            android:id="@+id/gallery"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:spacing="10px" />

    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@+id/gallery" >

        <ImageView
            android:id="@+id/right_arrow_imageview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/relativeLayout1"
            android:layout_marginTop="50dp"
            android:src="@drawable/arrow_right_enabled" />

    </RelativeLayout>
</RelativeLayout>

      <RelativeLayout
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_alignParentLeft="true"
          android:layout_below="@+id/relativeLayout1"
          android:layout_marginTop="14dp" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_alignParentBottom="true"
                android:layout_alignParentLeft="true"
                android:layout_marginBottom="15dp"
                android:layout_marginTop="10dp"
                android:src="@drawable/gallery_photo_19" />

      </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:26:17.627

![在此处输入图像描述](../Images/92b8b38478d99c5cee0b04de1ef7b059.png)[http://www.java-samples.com/showtutorial.php?tutorialid=1519](http://www.java-samples.com/showtutorial.php?tutorialid=1519)

在此图像中查看并在名为 layout-land 的 res 中创建新文件夹，并在其中创建与布局中文件名称相同的 xml 文件。并在横向模式下根据需要设计此文件。使用此代码并放入画廊视图下方的按钮。

使用此代码根据您的需要在按钮单击上移动图库。

```
Gallery gv;
gv.setSelection(position); 
```

# java - 在red5中禁用jmx

> ID：12636911
> 
> 赞同：0
> 
> 时间：2012-09-28T09:06:42.720
> 
> 标签：java, jmx, red5

Red5 在 centOS 中启动时需要更多时间。我检查了stdout.log。存在 JMX 超时错误。

```
[ERROR] [main] org.red5.server.jmx.JMXAgent - {}
java.io.IOException: Cannot bind to URL [rmi://:9999/red5]: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: 69.164.154.24; nested exception is:
        java.net.ConnectException: Connection timed out] 
```

如何在 red5 中禁用 JMX ..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:06:42.720

Red5 使用 JMX 从远程监控部署的应用程序。默认情况下，端口 9999 用于 JMX。如果程序无法与端口 9999 建立连接，它将等待长达 100/200 秒。要禁用 JMX 监控，您必须在 red5 服务器的 conf 文件夹中的 red5-common.xml 中将“enableRmiAdapter”设置为 false。

```
 <bean id="jmxAgent" class="org.red5.server.jmx.JMXAgent" init-method="init">
            <!-- The RMI adapter allows remote connections to the MBeanServer -->
            <property name="enableRmiAdapter" value="false"/>
            .... 
```

仅供参考，我在 red5.properties 文件中使用 red5-0.9.1 和 JMX 端口和主机配置。

对于 1.0 及更多版本，请遵循此[https://code.google.com/p/red5/wiki/SlowStartup](https://code.google.com/p/red5/wiki/SlowStartup)

# java - 是什么意思 Spring Web MVC 的 [servlet-name]-servlet.xml 中的标记？

> ID：12636914
> 
> 赞同：1
> 
> 时间：2012-09-28T09:06:55.393
> 
> 标签：java, xml, web-applications, servlets, spring-mvc

我使用 Spring Web MVC 在我的动态 Web 项目的 [servlet-name]-servlet.xml 中获得了以下 bean 清除？我已经阅读了很多文件，但仍然无法理解拥有这些属性标签的目的是什么？

```
<bean name="abcController" parent="defController" 
    class="abcController">
    <constructor-arg ref="staticService" />
    <property name="commandClass" value="abcCommand" />
    <property name="property2" value="search" />
    <property name="property3" value="true" />
    <property name="formView" value="/someValue" />

</bean> 
```

我知道该属性可以是 abcController 类中的一个字段，但是在 abcController 类中没有一个名为 formView 的字段！有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:49:42.997

该 xml 文件用于创建字段，而无需在文件本身中编码这些字段。

```
 // This is used to Start the ApplicationContext Container and to get the Bean of AbcCotroller

ApplicationContext context = 
new ClassPathXmlApplicationContext("[servlet-name]-servlet.xml");

abcController obj = (abcController) context.getBean("abcController"); 
```

您可以稍后在代码中使用 bean：

```
obj.getFormView(); //this will return '/somevalue' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T10:24:17.563

```
//Bean.java
 public class SampleBean{
 private String message;
 public void setMessage(String message){
     this.message=message;  //setter injection            

        }
  public void ShowMessage(){
  system.out.println("Message"+message);
       }
  }

  //Main.java
   Class Main{
     public Static Void Main(String args[]){ 
```

//启动ApplicationContext容器

```
 ApplicationContext applicationcontext = new  ClassPathXmlApplicationCOntext("Spring.xml");
  //To Read the SampleBean
        Object o=applicationcontext .getBean("SampleBean");
       SampleBean sampleBean=(SampleBean)o;
 //Invoke the Method
            sampleBean.ShowMessage();
         }
     }
//Spring.Xml 
```

// 您需要配置一些 Spring 和 Xml 所需的更多命名空间

```
 <bean id="sampleBean" class="SampleBean">
     <property name="message" value="this is the  use of property Tag"/>
   </bean>

   //output :This is the use or Property Tag 
```

explanation: when we want to perform Setter Injection we go for the Property Tag In spring we have some dependency injections like setter,constructor,interface,lookup method injection when we use the Setter Injection first Dependent class object is create and next the dependency class object is created

# css - CSS 线性渐变在实时服务器上不起作用（仅限 IE），在 localhost 上很好

> ID：12636915
> 
> 赞同：0
> 
> 时间：2012-09-28T09:06:56.323
> 
> 标签：css, linear-gradients

我刚刚推出了一个我已经研究了一段时间的新 Intranet。一切都很好（除了不可避免的以用户为中心的问题和几个错误）

然而，由于某种原因，我的 css 线性渐变无法正常工作，这变得很明显（现在我有机会实际查看前端而不是破解代码来解决问题）。

这对我来说很奇怪，因为当我在其测试环境（本地主机）中查看同一个站点时，渐变会尽其所能。在同一台 PC 上，在同一浏览器中（打开 2 个选项卡，一个本地，一个外部）

所有其他 css（在同一样式文件中）工作正常。

```
#PageTitleBox{
position:absolute;
left:0px;
top:2px;
width:169px;
z-index:3;
padding-top:0px;
padding-bottom:10px;
padding-left:10px;
padding-right:10px;
background-color:#A9D4CC;
background-image: -webkit-linear-gradient(180deg, #A9D4CC, #7DB4B3);
background-image: -moz-linear-gradient(180deg, #A9D4CC, #7DB4B3);
background-image: -o-linear-gradient(180deg, #A9D4CC, #7DB4B3);
background-image: linear-gradient(180deg, #A9D4CC, #7DB4B3);
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=1, startColorstr='#7DB4B3', endColorstr='#A9D4CC')";
height: 55px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:59:22.117

好的。我认为您可能已将 IE9 切换到兼容性视图。（http://stackoverflow.com/questions/3726357/why-does-ie9-switch-to-compatibility-mode-on-my-website）。

您可以`<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>`在 HTML HEAD 中包含以指示 IE 不执行此操作，或使用服务器设置等效的 HTTP 响应标头。

如果原因是您的实时服务器被 IE 视为您的 Intranet 区域的一部分，则 IE 可能会忽略这一点。在这种情况下，您必须在兼容性视图设置中将 IE 配置为不使用 Intranet 站点的兼容性视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:44:02.750

您可以将渐变对象的“启用”属性设置为 true。

```
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(enabled='true', GradientType=1, startColorstr='#7DB4B3', endColorstr='#A9D4CC')"; 
```

# java - 在 tabWidget 中跳过一行

> ID：12636916
> 
> 赞同：0
> 
> 时间：2012-09-28T09:06:59.400
> 
> 标签：java, android, android-widget

是否可以在 tabWidget 中跳过一行？到目前为止，我已经尝试了 \r 和 \n 但没有...这是一个示例代码：

```
this.tabSpec = tabHost.newTabSpec("deux").setIndicator("Alarme\n volontaire",
getResources().getDrawable(R.drawable.ic_tab_alert)).setContent(alarme);
this.tabHost.addTab(this.tabSpec); 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:11:04.310

我在我的应用程序中做了这样的事情并且它有效：

```
mTabsAdapter.addTab(mTabHost.newTabSpec("deux").setIndicator("Alarme\n volontaire"), null);
for (int i = 0; i < mTabHost.getTabWidget().getChildCount(); i++) {
    ((TextView) TabHost.getTabWidget().getChildAt(i).findViewById(android.R.id.title)).setSingleLine(false);
} 
```

# asp.net-mvc-2 - 在现有 ASP.NET MVC 应用程序中集成 Orchard CMS

> ID：12636917
> 
> 赞同：1
> 
> 时间：2012-09-28T09:07:01.260
> 
> 标签：asp.net-mvc-2, azure, orchardcms

我创建了一个 Azure Web Role 站点，现在必须将 Orchard CMS 集成到我现有的 Web 站点中。有哪位大侠可以帮我按步骤操作。

问候， 拉克什

# asp.net - 如何在 Amazon RDS 上使用 SQL Server 模式设置 sessionState

> ID：12636919
> 
> 赞同：1
> 
> 时间：2012-09-28T09:07:07.897
> 
> 标签：asp.net, session-state, amazon-rds

我有 asp.net 应用程序，我将把我的会话存储在 SQL Server 中。我正在使用 Amazon RDS（Microsoft SQL Server Express Edition）。我正在使用本地数据库进行测试，它在那里运行良好。

所以我尝试用下一行创建会话数据库

```
aspnet_regsql.exe -ssadd -sstype p -S mydb.rds.amazonaws.com -U myuser-P mypass 
```

所以我的意思是它适用于本地数据库。但对于 Amazon RDS，我收到了下一个例外：

> 开始添加会话状态。
> 
> .. 执行 SQL 文件“InstallSqlState.sql”时出错。SQL 错误号为 229，SqlException 消息为：对象“sp_delete_job”、数据库“msdb”、模式“dbo”的执行权限被拒绝。如果作业不存在，则预计 msdb.dbo.sp_delete_job 会出错。SQL Server：mydb.rds.amazonaws.com 数据库：aspnetdb 加载的 SQL 文件：InstallSqlState.sql
> 
> 命令失败：
> 
> /* 删除所有表、启动过程、存储过程和类型。*/
> 
> /* 删除 DeleteExpiredSessions_Job */
> 
> DECLARE @jobname nvarchar(200) SET @jobname = N'ASPState' + '_Job_DeleteExpiredSessions'
> 
> -- 删除 [local] 作业 -- 如果作业不存在，我们预计会收到错误消息。' PRINT '如果作业不存在，则 msdb.dbo.sp_delete_job 会出现错误。
> 
> 执行 msdb.dbo.sp_delete_job @job_name = @jobname
> 
> SQL 异常：System.Data.SqlClient.SqlException (0x80131904)：对象“sp_delete_job”、数据库“msdb”、架构“dbo”的执行权限被拒绝。如果作业不存在，则预计 msdb.dbo.sp_delete_job 会出错。在 System.Data.SqlClient.SqlConnection.OnError（SqlException 异常，Boolean breakConnection） 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() 在 System.Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cm dHandler，SqlDataReader dataStream , BulkCopySimpleResultSet bulkCopyHandler, Tds ParserStateObject stateObj) 在 System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async) 在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult 结果, String methodName,

有人知道解决这个问题的方法吗？这会创建一个数据库，但它是不完整的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:18:57.290

您*可以*在 SQL RDS 上使用 sql server 会话状态。

您只需注释掉与创建 SQL Server 代理作业有关的 InstallSqlState.sql 部分。该脚本在运行 aspnet_regsql.exe 命令时使用。它位于该 exe 旁边的框架文件夹中。它不会优雅地处理未能创建作业的问题，因此它不会执行任何其他步骤来安装会话状态。

这是我的 InstallSqlState.sql 最终的样子： http: [//pastebin.com/QJDXC093](http://pastebin.com/QJDXC093)

或者，您可以在您有权创建作业的数据库上运行 aspnet_regsql.exe 命令，然后使用 Management Studio 中的导入/导出功能将生成的数据库架构从您的数据库移动到 RDS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-03T16:30:40.457

我已经解决了我在 Amazon RDS 上创建会话数据库的问题。

1.  使用以下工具 SQLAzureMW v5.15.6 Release Binary for SQL Server 2014 在 AWS RDS 和数据库和架构迁移上创建 ASPState DB。
2.  在 sessionState mode="SQLServer" allowCustomSqlDatabase="true" sqlConnectionString="data source=amazon-server-name;initial catalog=ASPState;persist security info=True;user id=userid;password=password" cookieless="假"超时="100">

# excel - 我有一个使用 VLOOKUP 公式的 excel 文件，但为了工作，我必须双击每个单元格

> ID：12636920
> 
> 赞同：0
> 
> 时间：2012-09-28T09:07:09.327
> 
> 标签：excel

是的，为了工作，所有单元格都必须是文本。我已经选择了所有这些并格式化为文本，但 VLOOKUP 不起作用。要工作，我必须双击每个单元格。

反正有更快的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:11:46.997

表 A 来自数据库。我正在寻找的 col 以某种方式设置为文本（但不是手动完成的。）

在手动的表 B 中，我放置了一些充当 id 的数字（有时是字符）。

现在我希望表 A 中的数据显示在表 B 中。我使用 vlookup 但它不起作用，因为它说它找不到。

现在我从表 A 中选择所有单元格并将它们格式化为文本。但是vlookup仍然不起作用。

现在，如果我双击一个单元格，它会以某种方式转换为真实文本并且 vlookup 可以工作，但是如果你有很多行，这需要很长时间。

所以解决办法是在单元格中追加一个空字符串，如下所示：B1&""，其中B1是excel中单元格的id。

# ruby-on-rails - Ruby on Rails：忽略新数据的表单

> ID：12636927
> 
> 赞同：0
> 
> 时间：2012-09-28T09:07:21.430
> 
> 标签：ruby-on-rails, ruby, database, drop-down-menu

我有一个允许用户创建新项目的页面。他们可以选择从链接到表格列的下拉菜单中进行选择，以防他们正在寻找的选项已经在数据库中，以及他们可以输入新数据的另一个选项，即在提交项目时，该文件的新数据将保存到下一个人的数据库中。

这是我的新/编辑项目视图的一部分：

```
<div class="client">
<%= label_tag :new_client, "Client" %><br/>
<%= text_field_tag :new_client, nil, :maxlength => 30 %>
Or
<%= f.select( :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "Select a previous Client") %>
</div> 
```

用户可以通过文本字段输入新数据，也可以从下拉列表中选择。如果用户将新数据放入文本框中并从下拉列表中选择某些内容，则新数据将与项目一起保存，因为它具有优先级。

我的问题在于编辑视图：

当用户单击编辑链接时，项目会显示他们输入的所有数据，但所有数据都保存在下拉菜单中。

如果他们尝试在文本框中输入新数据并保存项目，它会与下拉菜单中突出显示的内容一起保存，并忽略放入文本框中的新数据。

编辑视图与新视图完全相同。

谁能指出我正确的方向。我是 Rails 新手，所以在尝试提供帮助时请记住这一点。

提前致谢。

**编辑 4**

```
 # GET /projects/1/edit
      def edit
        @project = Project.find(params[:id])
   end

      # POST /projects
      # POST /projects.json
      def create
        @all_technols = Technol.all
        @project = Project.new(params[:project])

    @technol = Technol.new(params[:tech])

    params[:technols][:id].each do |technol|

    if !technol.empty?

        #@project.projecttechnols.build(:technol_id => technol)
    @project_technol = @project.projecttechnols.build(:technol_id => technol)

    end
    end
        @project.client = params[:new_client] unless params[:new_client].blank?

        @project.project_owner = params[:new_project_owner] unless params[:new_project_owner].blank?
        @project.tech = params[:new_tech] unless params[:new_tech].blank?
        @project.role = params[:new_role] unless params[:new_role].blank?
        @project.industry = params[:new_industry] unless params[:new_industry].blank?
        @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

        respond_to do |format|
          if @project.save
            format.html { redirect_to @project, notice: 'Project was successfully created.' }
            format.json { render json: @project, status: :created, location: @project }
          else
            format.html { render action: "new" }
            format.json { render json: @project.errors, status: :unprocessable_entity }
          end
        end
      end

      # PUT /projects/1
      # PUT /projects/1.json
      # PUT /projects/1
  # PUT /projects/1.json
  def update
    @project = Project.find(params[:id])
    [:client, :project_owner, :tech, :role, :industry, :business_div].each do |attribute|
  params[attribute] = params["new_#{attribute}".to_sym] unless params["new_#{attribute}".to_sym].blank?
end

    respond_to do |format|
      if @project.update_attributes(params[:project])
        format.html { redirect_to @project, notice: 'Project was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

编辑视图：

```
<h1>Editing project</h1>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>

<%= stylesheet_link_tag "form" %>

<%= form_for(@project) do |f| %>

  <% if @project.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h2>

      <ul>
      <% @project.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
<BODY LANG="en-GB" TEXT="#000000" DIR="LTR">
<P LANG="en-US" CLASS="western" ALIGN=RIGHT STYLE="margin-bottom: 0in">
<BR>
</P>
<P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>

<div class ="padding">
</div>
<CENTER>
    <TABLE WIDTH=624 CELLPADDING=2 CELLSPACING=0 >
        <COL WIDTH=283>
        <COL WIDTH=20>
        <COL WIDTH=152>
        <COL WIDTH=138>
        <COL WIDTH=9>
        <THEAD>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=29 BGCOLOR="#999999" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H1 LANG="en-US" CLASS="western"><FONT COLOR="#003366"><FONT SIZE=4>
   <div id = "project_name">
<div class="project_name">
    <%= f.label :project_name %> : 
    <%= f.text_field :project_name,:maxlength => 30 %>
  </div>
</div>

</FONT></FONT></H1>
                </TD>
            </TR>
        </THEAD>
        <TBODY>
            <TR>
                <TD COLSPAN=2 WIDTH=307 HEIGHT=15 BGCOLOR="#e6e6e6" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H2 LANG="en-US" CLASS="western" ALIGN=LEFT>Database id:</H2>
                </TD>
                <TD COLSPAN=3 WIDTH=307 BGCOLOR="#e6e6e6" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H2 LANG="en-US" CLASS="western" ALIGN=LEFT>
   <div id ="smallbox">
<div id = "status">
  <div class="status"> 
    <%= f.label :status %> : 

    <%#= f.select :status, [['Active'],['Completed']], {:include_blank => true} %>
    <%= f.select :status, [['Active'],['Completed']] %>
  </div></div> 

</H2>
                </TD>
            </TR>
            <TR>

                <TD COLSPAN=5 WIDTH=618 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><B>

<div class="client">
<%= label_tag :new_client, "Client" %><br/>
<%= text_field_tag :new_client, nil,:maxlength => 30 %>
Or
<%= f.select( :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "Select a previous Client") %>
</div>

</B>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
            </TR>
            <TR>
                <TD COLSPAN=2 WIDTH=307 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><B>
   <div class="business_div">
<%= label_tag :new_business_div, "Business Division" %><br/>
<%= text_field_tag :new_business_div, nil,:maxlength => 30%>
Or
<%= f.select( :business_div, Project.all.map {|p| [p.business_div]}.uniq, :prompt => "Select Business Division") %>
</div>
</B>
                    </P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
                <TD COLSPAN=3 WIDTH=307 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><B>
  <div class="project_owner">
<%= label_tag :new_project_owner, "Project Owner" %><br/>
<%= text_field_tag :new_project_owner, nil,:maxlength => 30 %>
Or
<%= f.select( :project_owner, Project.all.map {|p| [p.project_owner]}.uniq, :prompt => "Select a previous Project Owner") %>
</div>  

</B></P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
            </TR>

            <TR>
                <TD WIDTH=283 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
   <div class="start_date">
    <%= f.label :start_date %> : 
    <%= f.text_field :start_date, :class => 'datepicker', :style => 'width: 80px;' %>
  </div>  

</P>
                </TD>
                <TD COLSPAN=2 WIDTH=176 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
Entry Created by:<br> <%= @project.first_name %> <%= @project.last_name %>
  <%= f.hidden_field :first_name, :value => @project.first_name %>
<%= f.hidden_field :last_name, :value => @project.last_name %>
</P>
                </TD>
                <TD COLSPAN=2 WIDTH=151 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
   Entry date: <br>  <%= l DateTime.now.to_date %>

</P>
                </TD>
            </TR>
            <TR>
                <TD WIDTH=283 HEIGHT=13 VALIGN=TOP BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
   <div class="end_date">
    <%= f.label :end_date %> :
    <%= f.text_field :end_date, :class => 'datepicker', :style => 'width: 80px;' %>
  </div>  

</P>
                </TD>
                <TD COLSPAN=2 WIDTH=176 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">

Last Edited by: <br> <%= @project.edited_first_name %> <%= @project.edited_last_name %></P>

  <%= f.hidden_field :edited_first_name, :value => current_user.firstname %>
<%= f.hidden_field :edited_last_name, :value => current_user.lastname %>

                </TD>
                <TD COLSPAN=2 WIDTH=151 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
   Edited date:  <br> 

<% if !(@project.edited_date.blank?) %>

  <%= l @project.edited_date %>

<% end %>
 <%= f.hidden_field :edited_date, :value => DateTime.now.to_date %>
</P>
                </TD>
            </TR>
            <TR>
                <TD WIDTH=283 HEIGHT=13 VALIGN=TOP BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in">

<div class="tech">
<%= label_tag :new_tech, "Technologies Used :" %><br/>
<%= text_field_tag :new_tech, nil,:maxlength => 30 %>
Or
<%= f.select( :tech, Project.all.map {|p| [p.tech]}.uniq, :prompt => "Select a previous Technology") %>
</div>  

</P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
                <TD COLSPAN=2 WIDTH=176 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in">
   <div class="role">
<%= label_tag :new_role, "Role" %><br/>
<%= text_field_tag :new_role, nil,:maxlength => 30%>
Or
<%= f.select( :role, Project.all.map {|p| [p.role]}.uniq, :prompt => "Select a previous role") %>
</div>  

</P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
                <TD COLSPAN=2 WIDTH=151 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in">
   <div class="industry">
<%= label_tag :new_industry, "Industry:" %><br/>
<%= text_field_tag :new_industry, nil,:maxlength => 30%>
Or
<%= f.select( :industry, Project.all.map {|p| [p.industry]}.uniq, :prompt => "Select an industry") %>
</div>  

</P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
                    <P LANG="en-US" CLASS="western"><BR>
                    </P>
                </TD>
            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=15 BGCOLOR="#e6e6e6" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H2 LANG="en-US" CLASS="western">
   Summary Of Assignment:  

</H2>
                </TD>
            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">

                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>
<div class="summary">
    <%= f.label :summary %><br />
    <%= f.text_area :summary, :style => 'width: 500px;' 'height: 100px;' %>
  </div>

                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>

                </TD>
            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=15 BGCOLOR="#e6e6e6" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H2 LANG="en-US" CLASS="western">Additional Informaton</H2>
                </TD>
            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">

                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in">
   <div class="lessons_learned">
    <%= f.label :lessons_learned %><br />
    <%= f.text_area :lessons_learned, :style => 'width: 500px;' 'height: 100px;' %>
  </div>  

</P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>

                </TD>
            </TR>
            <TR VALIGN=TOP>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=67 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western">
   <div class="customer_benifits">
    <%= f.label :customer_benifits %><br />
    <%= f.text_area :customer_benifits,:style => 'width: 500px;' 'height: 100px;' %>
  </div>  

</P>
                </TD>

            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=13 BGCOLOR="#ffffff" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in">
   <div class="financials">
    <%= label_tag :financials, "Financial Responsibility:" %><br />
    <%= f.select :financials, [['£0 - £99,999'],['£100,000 - £249,999'],['£250,000 - £499,999 '],['£500,000 - £999,999 '],['£1,000,000 +']], :prompt => "Select" %>
  </div>
<P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>

<div class="keywords">
    Any other searchable keywords and tags?<br />
    <%= f.text_field :keywords %>
  </div>

</P>
                    <P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
                    </P>

                </TD>
            </TR>
            <TR>
                <TD COLSPAN=5 WIDTH=618 HEIGHT=14 BGCOLOR="#e6e6e6" STYLE="border: 1px solid #00000a; padding: 0.02in 0.06in">
                    <H2 LANG="en-US" CLASS="western"><A NAME="_GoBack"></A></H2>
                </TD>
            </TR>
        </TBODY>
    </TABLE>
</CENTER>
<P LANG="en-US" CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
</BODY>
</HTML>

<div class="create_button">
<div class="actions">
    <%= f.submit "Save Edit", :class => "button", :confirm => "Are you sure you want to save the edit?" %>
  </div>
</div>

</div> <%#= small div %>

<% end %>

<%#= button_to 'Show', @project, :class => "button" %> 

<%#= button_to "Back", projects_path , :class => "button", :method => "get" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:58:36.457

这个

```
@project.client = params[:new_client] unless params[:new_client].blank? 
```

也需要在`update`方法中。

## 更新 2

另外，当你打电话

```
@project.update_attributes(params[:project]) 
```

你**用** . `@project`_ `params[]`所以这里有一个解决方案：

```
 # GET /projects/1/edit
  def edit
    @project = Project.find(params[:id])
  end

  # PUT /projects/1
  # PUT /projects/1.json
  def update
    @project = Project.find(params[:id])
    [:client, :project_owner, :tech, :role, :industry, :business_div].each do |attribute|
      params[:project][attribute] = params["new_#{attribute}".to_sym] unless params["new_#{attribute}".to_sym].blank?
    end

    respond_to do |format|
      if @project.update_attributes(params[:project])
        format.html { redirect_to @project, notice: 'Project was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

一些提示：`update_attributes`还保存一个对象。请参阅[API 文档](http://api.rubyonrails.org/)

此外，此代码是正确的：

```
params[:client] = params[:new_client] unless params[:new_client].blank?
params[:project_owner] = params[:new_project_owner] unless params[:new_project_owner].blank?
params[:tech] = params[:new_tech] unless params[:new_tech].blank?
params[:role] = params[:new_role] unless params[:new_role].blank?
params[:industry] = params[:new_industry] unless params[:new_industry].blank?
params[:business_div] = params[:new_business_div] unless params[:new_business_div].blank? 
```

但这更短：D

```
[:client, :project_owner, :tech, :role, :industry, :business_div].each do |attribute|
  params[attribute] = params["new_#{attribute}".to_sym] unless params["new_#{attribute}".to_sym].blank?
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:44:12.943

你没有保存项目你正在更新项目尝试`update_attributes` `@project.save`并检查 -</p>

# runtime - proc 会减少 tcl 中的运行时间吗？

> ID：12636929
> 
> 赞同：-1
> 
> 时间：2012-09-28T09:07:44.410
> 
> 标签：runtime, tcl

我认为这是一个很好的了解。proc 将有助于使我们的代码更清晰，但使其运行更快？

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:13:49.470

通常有多个调用是的，因为 procs 在第一次调用时编译为字节码，所以它们只被解析一次。从第二次调用开始，字节码就被执行了。[http://wiki.tcl.tk/1677](http://wiki.tcl.tk/1677)了解更多技术细节。

# jquery - 自定义验证规则 - jQuery 验证引擎

> ID：12636931
> 
> 赞同：2
> 
> 时间：2012-09-28T09:07:50.423
> 
> 标签：jquery, select, jquery-validation-engine

您好，感谢您花时间回答我的问题。

我需要在验证引擎中创建一个验证规则，不允许值为 0。（意味着必须至少选择一个元素）。我有一个选择元素，默认值（请选择一个项目）的值为 0，因为它不是必需的。但是，一旦选中了一个复选框，我就需要将其设为必需。我无法添加类 'validate[required]' 因为 0 是有效值。所以我的问题是如何制定一个不允许将 0 值传递给控制器​​的自定义规则。

再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:28:16.620

我认为不需要自定义验证。您可以在选中复选框时在 jquery 的帮助下添加必需的属性，并在未选中时删除此属性（并在准备好首次加载的文档上检查它）。例如：

```
$('#myCheckBox').click(function () {
            if ($(this).is(':checked')) {
                $('#myDropDown').removeAttr('required');
            }
            else {
                $('#myDropDown').attr('required', true);
            }
        }); 
```

但在这种情况下，您的`<option>`值应该为空。`<option value>Please select an item</option>`（据我所知，这是下拉列表的常见行为）。之后 jquery 验证插件将自动验证所需的属性。

**编辑**

好吧，如果你绝对应该使用自定义验证，你可以这样做：

1）添加您的验证方法（例如在准备好的文档上）

```
 $.validator.addMethod("checkIfNotZero", function (value, element) {
            return this.optional(element) || ($('#checkbox').is(':checked')&&value!=0);
        }, "Please, select value");
 $.validator.addClassRules("mySpecificClass", { checkIfNotZero: true }); 
```

2）标记你的下拉列表`class="mySpecificClass"`

3）并检查是否`$('#myDropDown').valid()`有必要（或例如调用`$(form).validate()`onSubmit 事件处理程序）。

我想就是这样。希望它会有所帮助。

# python - Tastypie：在 obj_create 之外创建对象

> ID：12636932
> 
> 赞同：0
> 
> 时间：2012-09-28T09:07:51.223
> 
> 标签：python, django, tastypie

我对美味派有点陌生：我一直在通过 override_urls 传递的自定义视图中创建对象。

不使用 obj_create 并只在自定义视图中执行操作是否可以，或者这会导致进一步的麻烦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:36:43.893

您通常应该使用 obj_create，因为它会为您处理所有授权和身份验证。如果您使用其他一些视图（我想应该在一些辅助方法而不是实际视图中完成创建新模型实例），如果您遵循简单的步骤，那应该不会有任何问题：

1.  在你`override_urls`使用`wrap_view`来自美味派的方法
2.  如果您尚未在资源中定义实际调用创建其他对象的视图/方法的方法，则应该这样做
3.  [在该方法中，您首先应该使用与在美味派的调度方法](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L452)中使用的相同模式，例如 is_authenticated、is_authorised 和 throttle_check，然后调用您的视图/方法

一种更简单的方法是仅覆盖`obj_create`资源内部，并在此方法内部调用其他视图/方法，使用父方法或决定根本不使用它。

# haskell - 运行 GHCI 时 Haskell 找不到模块“随机”，我该怎么办

> ID：12636933
> 
> 赞同：3
> 
> 时间：2012-09-28T09:07:51.827
> 
> 标签：haskell, random

这是一个猜测数字代码。当我运行它时，我收到一个错误：找不到模块“随机”。我应该怎么办 ？

```
module Main where 

import IO
import Random

main = do 
       hSetBuffering stdin LineBuffering
       num <- randomRIO (1::Int, 100)
       putStrLn "I'm thinking of a number between 1 and 100"
       doGuessing num = do
           putStrLn "Enter your guess:"
           guess <- getLine
           let guessNum = read guess
           if guessNum < num
              then do putStrLn "Too Low!"
                   doGuessing num
           else if guessNum > num
              then do putStrLn "Too High"
                   doGuessing num
           else do putStrLn "You Win!" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T09:27:32.857

你应该使用

```
import System.IO
import System.Random 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:18:32.277

安装`random`包。最简单的方法是使用`cabal`

```
cabal install random 
```

# c# - 使用特定符号（<、>）从 html 加载 HtmlDocument

> ID：12636935
> 
> 赞同：1
> 
> 时间：2012-09-28T09:07:57.353
> 
> 标签：c#, html, parsing, xpath, html-agility-pack

我正在创建`HtmlDocument`和使用`LoadHtml(string)`. 我的输入 html 字符串有时包含符号`<`和`>`其中。所以html解析不正确，例如：

我的html是
`<p>Value < 20 A B C</p>`

在这种情况下，我的文档 OutputHtml 是
`<p>Value < 20="" a="" b=""></p>`

也许我必须在 HtmlDocument 中设置一些标志，但我没有发现任何有用的东西。

**PS** `HtmlNode`具有相同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:22:51.600

解决问题的最好方法是更改​​字符`<`（`&lt`无需更改字符`>`）

要知道字符何时`<`是标记，以及何时“小于”，您可以使用`if` 此处的代码询问：

```
public static string CreateCorrectHtmlDoc(string htmlDoc)
        {
            int i = 0;
            List<int> index = new List<int>();
            try
            {
                //look for '<' 
                while ((i = htmlDoc.IndexOf("<", i)) != -1)
                {
                    i += 1;
                    //regex to find '<' that is no tag
                    if (Regex.IsMatch(htmlDoc[i].ToString(), "\\d|-") || Regex.IsMatch(htmlDoc[i].ToString(), "[^a-zA-Z!]") && Regex.IsMatch(htmlDoc[i + 1].ToString(), "\\d\\s|-|\\d"))
                    {
                        htmlDoc = htmlDoc.Substring(0, i - 1) + "&lt" + htmlDoc.Substring(i + 1);
                    }
                }
            }
            catch
            {
                Log.Insert("Error: CreateCorrectHtmlDoc");
                return "";
            }
            return htmlDoc;
        } 
```

我正在使用它，它工作得很好

# javascript - JavaScript 中的数字字符串格式化

> ID：12636937
> 
> 赞同：0
> 
> 时间：2012-09-28T09:07:59.833
> 
> 标签：javascript, number-formatting

C# 具有使用格式字符串格式化数值的非常有用的能力。

[http://msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

根据我的阅读，JavaScript 似乎没有这样的功能。有没有人知道一个库会做类似的事情，还是必须创建自己的代码？也许我弄错了，对此有内置支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:21:38.133

您可以使用[jQuery 插件](http://archive.plugins.jquery.com/project/numberformatter)在 javascript 中实现类似的功能。

此外，您还可以[在这里](http://ntt.cc/2008/04/25/6-very-basic-but-very-useful-javascript-number-format-functions-for-web-developers.html)找到自定义的 javascript 函数，这些函数可以帮助您进行数字格式化。

有一些 javascript 函数，例如`toPrecision`和`toFixed`可用于基本格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:21:49.270

JavaScript 中没有对字符串格式的内置支持，但是 JavaScript 的[sprintf 端口](http://www.diveintojavascript.com/projects/javascript-sprintf)呢？

# node.js - 使用 mongoose 将 mongo 对象的字段设置为空

> ID：12636938
> 
> 赞同：25
> 
> 时间：2012-09-28T09:08:00.227
> 
> 标签：node.js, mongodb, mongoose

我在一个对象上调用 user.save()，在那里我设置了 user.signup_date = null;

```
user.first_name = null;
user.signup_date = null;

user.save(); 
```

但是当我在 mongodb 中查看用户时，它仍然设置了 signup_date 和 first_name ......我如何有效地将这个字段设置为空或 null？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-28T12:31:59.943

要从现有文档中删除这些属性，请将它们设置为，`undefined`而不是`null`在保存文档之前：

```
user.first_name = undefined;
user.signup_date = undefined;

user.save(); 
```

确认仍在 Mongoose 5.9.7 中工作。请注意，您尝试删除的字段仍必须在您的架构中定义才能正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T09:33:08.750

如果您尝试使用 set 方法是否会有所不同，如下所示：

```
user.set('first_name', null);
user.set('signup_date', null);
user.save(); 
```

或者保存时可能出现错误，如果您这样做会发生什么：

```
user.save(function (err) {
    if (err) console.log(err);
}); 
```

它会在日志中打印任何内容吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-21T15:35:54.027

另一种选择是`undefined`为这些属性定义一个默认值。

类似于以下内容：

`let userSchema = new mongoose.Schema({ first_name: { type: String, default: undefined }, signup_date: { type: Date, default: undefined } })`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T15:20:36.427

只需删除字段

```
delete user.first_name;
delete user.signup_date;
user.save(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-14T10:47:59.180

在[Mongoose 文档](https://mongoosejs.com/docs/schematypes.html)（Schema Types）上，你可以去`Arrays`解释。在那里，它说：

> 数组很特殊，因为它们隐含的默认值为`[]`（空数组）。

```
var ToyBox = mongoose.model('ToyBox', ToyBoxSchema);
console.log((new ToyBox()).toys); // [] 
```

> 要覆盖此默认值，您需要将`default`值设置为`undefined`

（*我在`toys`元素*内添加了一个）

```
var ToyBoxSchema = new Schema({
     toys: {
          type: [{
              name: String,
              features: [String]
          }],
          default: undefined
     }
}); 
```

# javascript - 电话间隙：getDevicePosition

> ID：12636939
> 
> 赞同：0
> 
> 时间：2012-09-28T09:08:05.073
> 
> 标签：javascript, android, cordova

我正在尝试编写一个返回表示设备位置的对象的函数：我尝试过：

```
 function getDevicePosition () {
    var positionObject;
    if (isDeviceReady) {
        navigator.geolocation.getCurrentPosition(function (position) {
            ;
            positionObject = position;
            console.log('location updated');
            console.log(positionObject.coords.longitude);//1\. works
        }, function (err) {
            console.log('Failed to get device position' + err);
            return null;
        });

    } else {
        warnUser();
        return null;
    }
    console.log(positionObject.coords.longitude);//2\. doesnt work as positionObject is null.
    return positionObject;
} 
```

也许我应该改写我的问题。请注意，我添加了标记语句 1 和语句 2 的注释。如果我在语句 1 中初始化位置对象。为什么它在语句 2 中未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:21:11.947

从`android`标签来看，我假设您正在 Android 设备上进行测试。

如果是这种情况，您需要在`AndroidManifest.xml`文件中添加正确的权限。

**特别是**

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES" /> 
```

**[在这里](https://sites.google.com/site/androidhowto/how-to-1/using-the-gps)阅读更多。**

# c - 铸造语法练习

> ID：12636942
> 
> 赞同：0
> 
> 时间：2012-09-28T09:08:09.007
> 
> 标签：c, pointers, syntax

我有一个像这样的代码：

```
int main(void)
{
    char mychar = 'd';
    int *ptr = malloc(sizeof(*ptr)) ;

    *ptr = (char) 'c' ; // *ptr = (char*) 'c'; Gives the exact same result

    printf("%c\n",*ptr);
    memset(ptr,mychar,sizeof(*ptr));
    printf("%c\n",*ptr);
    free(ptr);
    printf("%c\n",*ptr);
    return 0 ;
} 
```

该代码对指针样式转换和数据类型转换给出了相同的结果。
应该使用这两种风格中的哪一种或被认为是一种好的做法，为什么？

```
*ptr = (char) 'c' ; 
*ptr = (char*) 'c'; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T09:15:04.607

两者都不。

`*ptr`和都是`'c'`类型`int`。不需要演员表。

（是的，C 中的字符常量的类型是`int`，而不是`char`。这是违反直觉的，但这是有历史原因的。请注意，C++ 字符常量的类型是`char`。）

投进`*ptr = (char) 'c';`相对无害；它将 的`int`值转换`'c'`为`char`，并将结果隐式转换回`int`。由于`c`保证可以表示为 a `char`，因此不会导致错误。

在`*ptr = (char*) 'c';`中，您的编译器*应该*会给您一条错误消息。您正在将一个常`int`量值转换为一个指针，然后将该指针值分配给一个`int`没有强制转换的值。这是一个“违反约束”，这意味着符合标准的编译器*必须*诊断它。如果您没有，请了解如何做到这一点。

如果分配通过编译器，它*可能会*做你想做的事。整数类型和指针类型之间的转换通常只是重新解释命名表示的位，因此将 an 转换`int`为 a`char*`再转换回 an`int`可能会给您原始`int`值。但不能保证。

即使在不同的算术类型之间，通常也不需要强制转换。例如，如果你写了：

```
char ch = 'c';
int i;
i = ch; 
```

在这种情况下，赋值的右侧确实是 type `char`，因为它是该类型对象的名称，而不是字符常量。赋值**隐式地**`ch`将from type的值转换`char`为 type `int`。你*可以*写：

```
i = (int)ch; 
```

相反，但这只是指定了在没有强制转换的情况下完成的相同转换。而且容易出错；它引入了错误类型的机会，而不是让编译器为您处理它。

一般来说，演员阵容应该被怀疑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:12:43.323

两者都很糟糕。

`'c'`实际上是一个`int`. 所以你不必投。您可以直接分配它：

```
*ptr = 'c'; 
```

# objective-c - MKAnnotation 显示默认引脚而不是自己的图像，尝试了一切

> ID：12636944
> 
> 赞同：1
> 
> 时间：2012-09-28T09:08:13.857
> 
> 标签：objective-c, mkannotation, mkannotationview

我想使用我自己的图像或地图中的注释。但我只得到默认引脚。

这是我的 mapView:ForAnnotation: 方法

```
 MKAnnotationView* annotationView = nil;
if ([annotation isKindOfClass:[PlayerLocation class]]){
   PlayerLocation* annotation2 = (PlayerLocation*)annotation;
    static NSString *identifier = @"MyView";   
    MKAnnotationView *annotationView = (MKAnnotationView *) [mapV dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (annotationView == nil) {
        annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    NSString* path = [[NSBundle mainBundle] pathForResource:@"MKAnnotation" ofType:@"png"];
    UIImage* im = [[UIImage alloc] initWithContentsOfFile:path];

    annotationView.image= im;

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;
    //delete the flagged Locations
    [self performSelectorOnMainThread:@selector(deletePin:) withObject:annotation2.name waitUntilDone:NO];
}
return annotationView; 
```

我找不到它有什么问题。发现图像不是 nil。委托已设置。协议在那里，方法被调用。

这是添加注释所涉及的整个代码。“drawGamers”是入口点，由网络处理类调用。

```
-(void)drawGamers:(NSMutableArray*)locations{

    for(PlayerLocation* loc in locations ){
        [ self replacePin:loc.name withLocation:loc.coordinate];
    }

}

-(void)replacePin:(NSString *)gamerName  withLocation:(CLLocationCoordinate2D)location {
    // flag Location for deletion later
    for (PlayerLocation* annotation in _mapView.annotations){
        if ([annotation.name isEqualToString:gamerName])
            annotation.decomission = YES;
    }
    //add new Location
    PlayerLocation *pLoc = nil;
    pLoc = [[PlayerLocation alloc] initWithName:gamerName address:nil coordinate:location];
    [_mapView addAnnotation:pLoc];
}

- (MKAnnotationView *)mapView:(MKMapView *)mapV viewForAnnotation:(id <MKAnnotation>)annotation{
    MKAnnotationView* annotationView = nil;
    if ([annotation isKindOfClass:[PlayerLocation class]]){
       PlayerLocation* annotation2 = (PlayerLocation*)annotation;
        static NSString *identifier = @"MyView";   
        MKAnnotationView *annotationView = (MKAnnotationView *) [mapV dequeueReusableAnnotationViewWithIdentifier:identifier];
        if (annotationView == nil) {
            annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
        } else {
            annotationView.annotation = annotation;
        }

        NSString* path = [[NSBundle mainBundle] pathForResource:@"MKAnnotation" ofType:@"png"];
        UIImage* im = [[UIImage alloc] initWithContentsOfFile:path];

        annotationView.image= im;

        annotationView.enabled = YES;
        annotationView.canShowCallout = YES;
        //delete the flagged Locations
        [self performSelectorOnMainThread:@selector(deletePin:) withObject:annotation2.name waitUntilDone:NO];
    }
    return annotationView;
}

-(void)deletePin:(NSString *)stationCode{
    for (PlayerLocation *annotation in _mapView.annotations) {
        if ([annotation.name isEqualToString:stationCode]){  
            if (annotation.decomission==YES)
            [_mapView removeAnnotation:annotation];
        }
    }
} 
```

我找不到问题出在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:29:44.280

```
- (MKAnnotationView *) mapView:(MKMapView *)mapingView viewForAnnotation:(id <MKAnnotation>) annotation {

     MKAnnotationView* annotationView = nil;
    if ([annotation isKindOfClass:[PlayerLocation class]])
    {
         PlayerLocation* annotation2 = (PlayerLocation*)annotation;
         static NSString *identifier = @"MyView";   

         annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];

         NSString* path = [[NSBundle mainBundle] pathForResource:@"MKAnnotation" ofType:@"png"];
         UIImage* im = [[UIImage alloc] initWithContentsOfFile:path];

         annotationView.image= im;//you can set your image here.

         annotationView.enabled = YES;
         annotationView.canShowCallout = YES;
         //delete the flagged Locations
         [self performSelectorOnMainThread:@selector(deletePin:) withObject:annotation2.name waitUntilDone:NO];
     }
return annotationView; 
```

}

```
-(void)deletePin:(NSString *)stationCode{
    for (PlayerLocation *annotation in _mapView.annotations) {
        if ([annotation.name isEqualToString:stationCode]){  
            if (annotation.decomission==YES)
            [_mapView removeAnnotation:annotation];
        }
    }
} 
```

这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:52:33.320

在`viewForAnnotation`中，`annotationView`变量被声明了两次。

首先在顶部，然后在内部`if`。所以里面的设置`if`对外面声明的变量没有影响。

`return`是在保持的外部变量上完成的`nil`。

不要在`if`-- 中重新声明变量，只需设置它。

# php - 执行长时间运行的 php 脚本时如何解决执行超时错误？

> ID：12636945
> 
> 赞同：1
> 
> 时间：2012-09-28T09:08:14.767
> 
> 标签：php, curl

我有一个包含 20,000 个电子邮件地址的数据库，并且还在不断增加。我一次发送 100 封电子邮件，然后使用 CURL php 访问同一页面，但该页面仍然获得最大执行超时。我在共享（[Hostgator](http://www.hostgator.com/)）服务器上运行这个 php 脚本。我应该怎么做才能消除这个问题？

我正在通过以下方式执行此脚本：

```
exec("php-cli file.php > testoutput.php 2>&1 & echo $!", $output) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:09:52.060

您可以在数据库中添加一列（或辅助表），并将所有地址标记为最初“待处理”。

然后你的脚本可以：

```
- SELECT the number of worked addresses and total addresses
- display a progress bar
- SELECT the lowest 100, or 50, or N addresses yet to be worked
- send the emails and mark them worked
- issue a javascript to refresh itself. 
```

然后客户端将看到一个进度条不断前进的页面，并且永远不会超时（只要“N”足够小）。

您也可以在 AJAX 中执行此操作，但这可能有点矫枉过正。

此外，您可以使用一些技巧（如果您还没有这样做的话）来加速操作。一种可能性是将多个地址“合并”为密件抄送：，如果电子邮件正文相同；这样一来，您就可以在一次通话中传递多条消息。注意不要超过任何密件抄送：限制您的 ISP 可能强制执行的内容。此策略在 ISP 端使用更多资源，因此请与他们核实。

另一种可能性（可以一起使用）是发送按域排序的电子邮件。如果可能，多台邮件服务器会尝试在一个连接中将电子邮件发送到同一台服务器，以节省资源和时间。如果您将一组电子邮件全部发送到同一个域，则可以使服务器更轻松。

在最后一种情况下，您会`SELECT`发送这样的电子邮件：

```
SELECT * FROM addresses
    WHERE (worked=0 AND active = 1)
    ORDER BY SUBSTRING_INDEX(email, '@', -1)
    LIMIT 20; 
```

然后（使用 mysql 函数的示例 - PDO 更好），

```
while($tuple = mysql_fetch_assoc($exec))
{
    if (send_mail_to(...))
         $sent[] = $tuple['id'];
    else $failed[] = $tuple['id'];
}
// Now mark both SENT and FAILED as worked
$sentm = implode(',', $sent);
$failm = implode(',', $failed);

// UPDATE addresses SET worked = 1 WHERE id IN ($sentm,$failm);
// UPDATE addresses SET active = 0 WHERE id IN ($failm); 
```

如果您在 PHP 会话中保存了开始时间，您甚至可以显示一个漂亮的带仪表板的栏，例如

```
+--------------------+
|########            | 
+--------------------+
40% processed
38% delivered
 2% failed
Expected time remaining 5 min 17" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:10:22.667

PHP 的时间限制可以通过 PHP 的[`set_time_limit()`](http://php.net/manual/en/function.set-time-limit.php)函数移除：

```
set_time_limit(0); 
```

但是，这只会解决由于 PHP 本身注意到该进程花费了太长时间而导致长时间运行的进程死亡的问题。虽然这是一个重要的步骤，但您还应该预测长时间运行的流程中的其他类型的故障，将工作分成更小的批次，并确保您的代码的结构允许在不重新运行的情况下恢复流程整件事情。

# excel - 具有多个条件的查找公式

> ID：12636950
> 
> 赞同：0
> 
> 时间：2012-09-28T09:08:29.717
> 
> 标签：excel, excel-2003

在我的 EXCEL 书中有一张桌子：

![在此处输入图像描述](../Images/15cf1c3a8176a2e53f9ee6921e8fa37f.png)

如何通过两个值 Text1+Text2 找到名称？所以在我的情况下，我想得到结果：`Jane`如果我写`AA12345` ，我试着用这个公式来做到这一点：

`=INDEX(A1:D3;MATCH(W1;A1:A3&B1:B3;0);)`

![在此处输入图像描述](../Images/49ae97cafba728750ece14b90bd09bfa.png)

我需要做这样的事情： [http](http://spreadsheets.about.com/od/lookupfunction1/ss/2011-03-03-excel-2010-vlookup-multiple-values-sbs-tutorial.htm) ://spreadsheets.about.com/od/lookupfunction1/ss/2011-03-03-excel-2010-vlookup-multiple-values-sbs-tutorial.htm 但在我的情况下2003 EXCEl 我有一个错误，这个例子不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:41:10.467

Excel 2003 中似乎没有错误？

![在此处输入图像描述](../Images/4cda43f5fbd72dac164038d6bff22176.png)

和公式（它们都是数组 CTRL+SHIFT+ENTER）

![在此处输入图像描述](../Images/531b6d1701ba2be084c8027c8b73c273.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:11:46.320

您可以连接两列并对连接的值应用相同的公式。单击[此处](http://www.techonthenet.com/excel/formulas/concat.php)了解有关函数连接的更多信息。

# asp.net - ASP.NET 角色的附加层

> ID：12636958
> 
> 赞同：1
> 
> 时间：2012-09-28T09:08:57.810
> 
> 标签：asp.net, asp.net-mvc, asp.net-roles

目前，用户可以是管理员、看门人、教师等。我们目前正在使用默认提供程序。

很快就会有多个俱乐部。所有角色都是相同的，并且在所有俱乐部中都可用。用户可以在多个俱乐部中并在不同的俱乐部中扮演不同的角色，或者他们也可能没有。

角色和俱乐部应保存在数据库中。

是否有捷径可寻。理想情况下，我想做这样的事情。

```
[Authorize Roles = RoleName.Foo + Clubname.Bar] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:47:45.753

您可以使用[Role Provider](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CB4QFjAA&url=http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.aspx&ei=17dlUI-mOpCnqwGC8IGYCA&usg=AFQjCNHkf-wOdSVlfcgY0g8gMlSD2GcKfg&sig2=yKoEtw2J4odm6WHRDVRklw)类来自定义其行为，并按照您的方式实现它，就像这里显示的那样[ASP.NET MVC - Alternative to Role Provider?](https://stackoverflow.com/questions/4837103/asp-net-mvc-alternative-to-role-provider)

至少让你开始并有一些新的想法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:53:42.007

使用默认授权属性角色只是字符串名称。有些人将其子类化以[接受 enum Roles](https://stackoverflow.com/questions/1148312/asp-net-mvc-decorate-authorize-with-multiple-enums)。

也许您可以将所有俱乐部创建为角色，并将所有角色创建为角色，并要求您同时拥有俱乐部名称角色和适当的角色级别。然而，这似乎是对角色含义的破坏。我怀疑您是否可以在没有自定义授权过程的情况下执行此操作。

我会考虑创建一个继承自[Authorize 属性的](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)[自定义授权属性](http://www.syntaxwarriors.com/2011/mvc3-custom-authorizeattribute/)，您可以扩展它以获取更多信息。您可以查看使用[简单会员提供程序扩展/自定义您的会员系统](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:13:54.133

您可以创建角色名称，例如“Administrator.Club1”和“Janitor.Club2”。

这是假设俱乐部数量相对较少。

# javascript - 为什么显示 SELECT 值没有变化？

> ID：12636961
> 
> 赞同：3
> 
> 时间：2012-09-28T09:09:08.990
> 
> 标签：javascript, jquery

当页面加载时，我期望值`<option value="B">B</option>`变为红色。它没有用。为什么？

jQuery

```
$(document).ready(function () {
  $('[name=HeaderFields] option[value="B"]').val('red');
}); 
```

落下：

```
<select name="HeaderFields" style="width:60px">
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:12:03.090

`val()`设置与可见*文本*不同的表单字段的*值*。通过检查源代码，这在 Chrome 中对我来说是[正确的。](http://jsfiddle.net/6dSQX/1/)`SELECT`

 *如果您要更改可见文本，请使用`html()`或`text()`。

见：http: [//jsfiddle.net/6dSQX/](http://jsfiddle.net/6dSQX/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:12:55.640

在`option`标签中，值属性和显示文本是两个不同的东西。

```
<option value="I am sent to the server">I am displayed to the user</option> 
```

因此，如果您想更改显示的文本，请使用 jQuery 的`text`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:12:31.207

“B”的值变为“红色”

不是文本。

如果您查看 html 页面的源代码，您应该会看到

```
<option value="red">B</option> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-28T09:14:47.180

值更改工作正常。但是，如果我们假设字体颜色更改是您的意思，您应该将您的 javascript 更改为：

```
$(document).ready(function () {
  $('[name=HeaderFields] option[value="B"]').css('font-color', 'red');
} 
```*

# php - 使用 Excel 在 PHP 应用程序中进行核心分析？

> ID：12636964
> 
> 赞同：2
> 
> 时间：2012-09-28T09:09:19.373
> 
> 标签：php, phpexcel

我认为这确实是一个关于方法的问题。

我们有一个来自第三方的核心 Excel 电子表格，它提供了对原始数据的一些复杂分析。原始数据直接来自客户的第二个电子表格。

我们正在寻求创建一个基于网络服务器的自动化系统，可以上传原始数据 Excel 文件并执行分析，并生成报告。

报告生成没有问题，但是在应用程序中实际使用核心 Excel 电子表格本身进行数学运算（例如使用 PHPExcel）有什么好处吗？还是最好的方法总是在代码中复制分析？

我们的想法是分析（来自第三方）相当复杂，因此在 PHP 中复制需要大量的拆解，其次，分析的部分内容经常被第三方调整，这意味着新版本的Excel 会定期提供给我们。

我可以想象使用 PHPExcel 做这样的事情，在内存中创建工作表并将原始数据合并为第二个工作表，然后读出计算结果，但这是否现实 - 会不会太慢 - 或者根本不起作用我是怎么想象的？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T09:25:41.760

根据 Excel 公式的复杂性，使用 PHPExcel 的计算引擎是完全可行的，但您需要注意一些潜在的“陷阱”。

*   并非所有 Excel 函数都得到完全支持（PHPExcel 文档中提供了一个列表，但我认为现在支持 356 个函数中的 316 个）
*   BIFF (.xls) 工作簿不支持分析工具包中的 Excel 函数；虽然他们将使用 OfficeOpenXML (xlsx) 工作簿
*   不支持用户自定义函数
*   不支持宏和其他 VB 代码
*   尚不支持数组公式（这是计划在年底开始重写计算引擎的重要部分）
*   不支持单元格引用的 R1C1 格式

它相对较慢（需要重写的部分原因）。您当然可以编写 PHP 代码来更有效地执行您需要的公式，因为您可以根据您的特定要求编写代码。PHPExcel会不会太慢？只有您可以确定“太慢”的实际含义。

请注意，通常最好提交对大量内存或耗时任务的请求以在 Web 服务器之外运行

另一方面，如果您的客户曾经更改他们的电子表格（并且您指出这是相当频繁的），那么使用 PHPExcel 的内置计算引擎意味着它仍然可以正常工作，而自定义编写的代码需要修改。正如您已经指出的那样，复杂的公式可能需要大量工作才能转换为 PHP 代码。并且取消对电子表格中的公式所做的更改将特别困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:28:46.013

不是真正解决您的问题，但首选方法是您在 PHP 端构建计算，然后让客户端/第三方以指定格式（最好是 CSV 文件）提交数据，然后解析数据并执行任何必要的计算。

# visual-studio-2010 - 调试外部程序的库？（视觉工作室 2010）

> ID：12636966
> 
> 赞同：3
> 
> 时间：2012-09-28T09:09:25.823
> 
> 标签：visual-studio-2010, debugging, breakpoints, remote-debugging, visual-studio-debugging

这是针对有使用 Visual Studio 2010 调试外部应用程序经验的程序员的问题。

目前，我正在为我工​​作的人制作的程序开发一个附加组件。为了使这个附加组件与外部程序一起工作，我必须将 .dll 文件放在外部程序指定的某个文件夹中。我配置了构建设置，以便自动复制 .dll 文件。我还复制 .pdb 文件以启用调试选项。

由于这个插件只是一个类库，我不能像往常一样调试它。我也没有外部应用程序的源代码。我应该如何正确调试这个类库？

这是我尝试过的：

**1\. 附加到进程**
请参阅[附加到正在运行的进程](http://msdn.microsoft.com/en-us/library/c6wf8e4z.aspx)。这似乎工作正常，除了需要几秒钟来设置。这是一个问题，因为大多数异常/断点发生在外部程序启动的最初几秒钟。手动将 Visual Studio 附加到进程也很烦人，因为我经常调试这个类库，因此一段时间后会花费很多时间。

**2\. Debugger.Launch()**
目前我使用[Debugger.Launch()](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.launch.aspx)将 Visual Studio 附加到外部程序。这将显示一个 Just In Time 提示，询问我要使用哪个 Visual Studio 实例。我发现这比“附加到进程”要慢得多，但这样我确信调试器在任何断点发生之前就已附加。将其放置在两者之间`#if DEBUG`并`#end if`确保在我创建发布版本时不会显示此弹出窗口，这也有帮助。

**3\. 添加为现有项目**
我已将程序的可执行文件作为项目添加到我的解决方案中。通过这样做，我可以将此可执行文件设置为启动项目，然后按 F5 将启动它。这样做的最大优点是，我现在可以在可执行文件启动后立即对其进行调试。请参阅：[调试不属于 Visual Studio 解决方案的可执行文件](http://msdn.microsoft.com/en-us/library/0bxe8ytt.aspx)。有了这个，Visual Studio 在异常处中断，但不幸的是它似乎没有加载断点。当我尝试使用断点时，会显示以下信息： ![断点](../Images/7fb98c15add842edb3ca267d70edf660.png) 模块窗口显示：“二进制文件未使用调试信息构建。”。这可以解决吗？

**4\. 启动动作**
SilentDoc 注意到我也可以设置一个外部程序作为启动动作，使用属性 -> 调试 -> 启动动作。请参阅：[更改应用程序调试的启动操作](http://msdn.microsoft.com/en-us/library/68c8335t.aspx)它似乎以这种方式正确加载断点。但是，由于某种原因，这会使外部程序在遇到第一个断点/异常时冻结**5 分钟**。完成冻结后，事情似乎按预期工作。什么可能导致这种冻结？

**编辑**：冻结是由外部程序引起的。请参阅已接受答案的评论。

**5\. Image File Execution Options**
正如 hmemcpy 所建议的，我也可以使用“Image File Execution Options”来[自动启动调试器](http://msdn.microsoft.com/en-us/library/a329t4ed.aspx)。这似乎与 Debugger.Launch() 相同，因为它显示相同的 Just In Time 提示。然而，这个即时“调试器”根本不调试：断点和异常被忽略。此外，在使用发布版本时，我不能简单地禁用 Just In Time 提示。

**摘要**
选项 1 加载断点，在断点/异常处中断，但需要太多时间。
选项 2 加载断点，在断点/异常处中断，但是太慢了。
选项 3 不加载断点，也不会在断点/异常处中断。
选项 4 加载断点，但在第一个断点/异常处冻结 5 分钟。
选项 5 不加载断点，也不会在断点/异常处中断。

**附加信息**
外部程序和类库都是用VB.NET编写的，我使用的是Visual Studio 2010 Ultimate，目标框架是.NET Framework 4.0。

选项 1 和 2 对我有用，但一段时间后，所有这些对话框和提示都会变得烦人，并减慢我的速度。选项 3 和 4 似乎更适合我，所以如果有人能告诉我如何让它们工作，那就太好了。选项 5 似乎也不那么有趣，我不想一直使用 regedit.exe。如果还有其他选择，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:11:32.017

调试时不能将该可执行文件设置为启动外部程序吗？

Dll项目-属性-调试-启动外部程序...

~~编辑 - 对不起，我没有看到你已经这样做了：S~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:28:49.590

`Image File Execution Options`这可能是使用可能有用的少数情况之一。我最喜欢的在程序启动时附加调试器的技巧之一。它是一个注册工具，除其他外，它允许您在应用程序执行之前将调试器附加到应用程序。例如，同样的技巧允许用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)或[Notepad2](http://www.flos-freeware.ch/notepad2.html)`Notepad.exe`替换您的 Windows 任务管理器。

您可以[在此处](http://blogs.msdn.com/b/greggm/archive/2005/02/21/377663.aspx)阅读所有相关信息。

以下是您的设置方式：

*   跑`regedit.exe`
*   去 `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options`
*   创建一个名为您的 exe 的新密钥（例如：yourprogram.exe）
*   在您的 exe 下创建一个新的字符串值。字符串值的名称是`Debugger`，值是`vsjitdebugger.exe`

运行可执行文件时，您将看到 Just In Time 提示，要求您选择调试器：

![vsjit调试器](../Images/602a9b782d60effc18bcb4a02c3fa8cc.png)

选择要调试的 Visual Studio 实例（或启动一个新实例）。或者，此时您可以“附加到进程”，然后使用`No`按钮关闭对话框，让它附加。

希望有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T12:17:38.873

我认为您的方法很好 - 您只需要确保您的 dll 文件包含有关其 PDB 文件的信息（例如，使用`dumpbin /pdbpath:verbose <your dll>`），并且 PDB 文件中的源路径在您的调试机器上是有效的（例如，使用, `srctool -r <your pdb>`)。将 PDB 文件放在 dll 文件旁边也应该正常工作。

前段时间我写了一篇文章，描述了使用 PDB 文件的这些工具和其他工具，所以它可能对你有用：http: [//lowleveldesign.wordpress.com/2011/12/09/pdb-file-out-of-调试器/](http://lowleveldesign.wordpress.com/2011/12/09/pdb-file-out-of-debugger/)。

# scala - 如何将模式匹配成大写变量？

> ID：12636972
> 
> 赞同：7
> 
> 时间：2012-09-28T09:09:44.980
> 
> 标签：scala, programming-languages

我在 Scala 中有一个返回元组的方法，假设该方法称为“测试”。然后我想做

```
val (X,Y) = test() 
```

但是，模式匹配仅在变量名称为小写时才在 Scala 中有效，即：

```
val(_X,_Y) = test(); val X = _X; val Y = _Y 
```

...工作正常，但丑陋，而且不简洁。由于 X 和 Y 是矩阵，我真的不想使用小写变量。（例如，在 scipy 和 matlab 中，我不会有这样的限制）。

我认为有一些方法可以确保小写变量的行为类似于大写变量，即通过执行“x”。也许有一些方法可以使大写变量表现得像小写变量？所以，这是我的问题：在 Scala 中是否有某种方式可以直接将模式匹配到大写变量中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T11:47:02.537

简短的回答是**不要**。

语法约定使您的代码对其他人具有可读性和可理解性。Scala 的约定是变量以小写字母开头，常量和类以大写字母开头。违反这一点，不仅会遇到模式匹配问题，而且代码的可读性也会降低。（相信我，如果你不得不阅读不关心这种约定的其他人编写的代码，你会诅咒那个人。）

如果您想强调变量是矩阵，我建议您使用`xMatrix`and`yMatrix`或类似的东西。这将清楚地表明它们是变量并且它们代表矩阵。

或者创建一个特定于您的项目的约定，所有矩阵变量都将以“M”结尾，比如`xM`and `yM`。

*如果它使您的代码可读，则值得输入更多字符。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:20:26.027

没有办法做到这一点，也不应该这样做。您已经有了变量的类型来告诉您它是一个矩阵，因此无需将变量名设为大写。

# python - 递归解析维基百科并从包含的链接中获取文本

> ID：12636974
> 
> 赞同：3
> 
> 时间：2012-09-28T09:10:03.343
> 
> 标签：python, parsing, recursion, web-scraping, wikipedia

因为我讨厌来回点击阅读维基百科文章，所以我正在尝试构建一个工具来根据以下算法创建“扩展的维基百科文章”：

*   创建两个变量：`Depth`和`Length`。
*   将维基百科文章设置为种子页面
*   解析这篇文章：只要有指向另一篇文章的链接，就获取第一个`Length`句子并将其包含在原始文章中（例如，在括号中或以其他方式突出显示）。
*   以递归方式执行此操作直到某个`Depth`，即不超过两个级别。

结果将是一篇可以一口气阅读的文章，而无需总是来回点击......

你将如何在 Python 中构建这样的机制？应该使用哪些库（是否有用于此类任务的库）？有什么有用的教程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:31:35.837

您可以使用[urllib2](http://docs.python.org/library/urllib2.html)来请求 url。为了解析 htmlpage，有一个很棒的库，叫做[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)。您需要考虑的一件事是，在使用爬虫扫描维基百科时，您需要在请求中添加标题。否则维基百科将简单地禁止被抓取。

```
 request = urllib2.Request(page) 
```

添加标题

```
 request.add_header('User-agent', 'Mozilla/5.0 (Linux i686)') 
```

然后加载页面并将其提供给`BeautifulSoup`.

```
 soup = BeautifulSoup(response)  
 text = soup.get_text() 
```

这将为您提供页面中的链接

```
 for url in soup.find_all('a',attrs={'href': re.compile("^http://")}):  
       link = url['href'] 
```

现在关于爬行维基百科的算法，你想要的是一种叫做[深度有限搜索](http://en.wikipedia.org/wiki/Depth-limited_search)的东西。同一页面中提供了易于理解的伪代码。

上述库的其他功能可以用谷歌搜索，很容易理解。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:33:34.030

您可能想为此尝试[Mechanize](http://wwwsearch.sourceforge.net/mechanize/) - 它比 urllib 和其他内置库更高级别。特别是，它很容易导航，就像您使用浏览器一样，使用 和 之类的`follow_link()`命令`back()`。

要获得您想要的行，请查看一些 Wikipedia 页面的来源，以查看 HTML 页面中摘要的开始位置 - 从快速浏览中，我认为您想找到 id 为“mw-content-text”的 div " 并从第一个`<p>`元素中获取文本。正如其他人所提到的，[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)会擅长这一点。

或者，您可以尝试使用 Wikipedia 的 Python 库之一 - 这里有一个列表：[http](http://en.wikipedia.org/wiki/Wikipedia%3aCreating_a_bot#Python) ://en.wikipedia.org/wiki/Wikipedia%3aCreating_a_bot#Python以及[其他](https://stackoverflow.com/questions/627594/is-there-a-wikipedia-api)stackoverflow 答案中的[一些](https://stackoverflow.com/a/120113/607861) [建议。](https://stackoverflow.com/questions/4460921/extract-the-first-paragraph-from-a-wikipedia-article-python)

听起来像一个有趣的小项目，祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T09:16:18.737

使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)或[Scrapy](http://scrapy.org/)解析 html 页面。使用[urllib](http://docs.python.org/library/urllib.html)或[requests](http://docs.python-requests.org/en/latest/)获取嵌套页面。您可能需要使用一些正则表达式来按摩或评估提取的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T09:18:10.123

您可以解析 html 或解析原始版本以查找`[[Link]]`. 无论哪种方式，您都应该看看：

[urllib](http://docs.python.org/library/urllib.html?highlight=urllib#urllib)或[请求](http://docs.python-requests.org/en/latest/user/intro/#philosophy)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-04T23:21:38.540

使用 wikipedia python 库，它可以让您查看页面上的链接，包括“另请参阅”部分中的链接，您可以遍历它们并使用该库来获取其中的内容。 [https://pypi.python.org/pypi/wikipedia](https://pypi.python.org/pypi/wikipedia)

# java - Java：月份中两个日期之间的差异

> ID：12636979
> 
> 赞同：0
> 
> 时间：2012-09-28T09:10:27.693
> 
> 标签：java, date

如何在 Java 中以整月为单位找到两个日期之间的差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:12:08.890

使用 JodaTime 的许多日期/时间功能更容易实现：

[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

有计划将该库合并到 Java 7 中，但不幸的是这没有发生：

[Joda Time 要包含在 Java 7 中吗？](https://stackoverflow.com/questions/1724474/joda-time-to-be-included-in-java-7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:12:30.343

我强烈建议您查看[Joda-Time](http://joda-time.sourceforge.net/)，因为它是一个更好、更直观且线程安全的 API。查看[此 SO answer](https://stackoverflow.com/questions/7460701/how-to-calculate-difference-only-in-months-using-javas-joda-api)以获取针对您的问题的 Joda 特定答案。

请注意，Joda API 是新 Java Date API (JSR-310) 的基础，并计划在 Java 8 中发布（从 Java 7 中删除）。这是一个事实上的标准，并且学习 API 将是有价值的。

# c++ - 如何找到x = 2 ^ k的最左边1位的索引？

> ID：12636982
> 
> 赞同：2
> 
> 时间：2012-09-28T09:10:31.237
> 
> 标签：c++, bit-manipulation

> **可能重复：**
> [用于计数位或找到最右边|最左边的有效位运算](https://stackoverflow.com/questions/9093323/efficient-bitwise-operations-for-counting-bits-or-find-the-rightleft-most-ones)

我写了一个搜索算法。为了优化它，我想用a`32bit int`来标记是否可以使用数字0~31。也就是说，如果我有一个 state `State`，我可以使用以下方法轻松获取所有可能的数字：

```
x = State & -State
State -= x 
```

但实际上，我需要知道 1 在哪里`x`（注意二进制形式只有 1 `x`）？例如，如果`x = 0000 0100`，我想知道那是第三个。

我知道我可以通过使用`for`循环来做到这一点，但似乎会花费很多时间。

我想知道是否有使用**按位运算**的方法？并且会`static_cast<int>(log2(x))`花费很多时间吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:28:22.347

许多 CPU 都有本机硬件指令，例如`CTZ`（“计数尾随零”）。GCC 通过[内置函数](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Other-Builtins.html) `__builtin_ctz`公开这一点；其他编译器应该有类似的设施。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T09:45:43.983

似乎没有人提到明显的解决方案 - 使用一个巨大的开关来处理所有可能的 2 次方。

下面的代码实现了这一点，加上二进制搜索和除以二。

**注意**：这些函数期望输入是 2 的幂；如果不是，他们可能会胡说八道。

```
#include <inttypes.h>
#include <stdio.h>

int get_exp_switch (uint64_t x)
{
    switch (x) {
        case (uint64_t)1 << 0: return 0;
        case (uint64_t)1 << 1: return 1;
        case (uint64_t)1 << 2: return 2;
        case (uint64_t)1 << 3: return 3;
        case (uint64_t)1 << 4: return 4;
        case (uint64_t)1 << 5: return 5;
        case (uint64_t)1 << 6: return 6;
        case (uint64_t)1 << 7: return 7;
        case (uint64_t)1 << 8: return 8;
        case (uint64_t)1 << 9: return 9;
        case (uint64_t)1 << 10: return 10;
        case (uint64_t)1 << 11: return 11;
        case (uint64_t)1 << 12: return 12;
        case (uint64_t)1 << 13: return 13;
        case (uint64_t)1 << 14: return 14;
        case (uint64_t)1 << 15: return 15;
        case (uint64_t)1 << 16: return 16;
        case (uint64_t)1 << 17: return 17;
        case (uint64_t)1 << 18: return 18;
        case (uint64_t)1 << 19: return 19;
        case (uint64_t)1 << 20: return 20;
        case (uint64_t)1 << 21: return 21;
        case (uint64_t)1 << 22: return 22;
        case (uint64_t)1 << 23: return 23;
        case (uint64_t)1 << 24: return 24;
        case (uint64_t)1 << 25: return 25;
        case (uint64_t)1 << 26: return 26;
        case (uint64_t)1 << 27: return 27;
        case (uint64_t)1 << 28: return 28;
        case (uint64_t)1 << 29: return 29;
        case (uint64_t)1 << 30: return 30;
        case (uint64_t)1 << 31: return 31;
        case (uint64_t)1 << 32: return 32;
        case (uint64_t)1 << 33: return 33;
        case (uint64_t)1 << 34: return 34;
        case (uint64_t)1 << 35: return 35;
        case (uint64_t)1 << 36: return 36;
        case (uint64_t)1 << 37: return 37;
        case (uint64_t)1 << 38: return 38;
        case (uint64_t)1 << 39: return 39;
        case (uint64_t)1 << 40: return 40;
        case (uint64_t)1 << 41: return 41;
        case (uint64_t)1 << 42: return 42;
        case (uint64_t)1 << 43: return 43;
        case (uint64_t)1 << 44: return 44;
        case (uint64_t)1 << 45: return 45;
        case (uint64_t)1 << 46: return 46;
        case (uint64_t)1 << 47: return 47;
        case (uint64_t)1 << 48: return 48;
        case (uint64_t)1 << 49: return 49;
        case (uint64_t)1 << 50: return 50;
        case (uint64_t)1 << 51: return 51;
        case (uint64_t)1 << 52: return 52;
        case (uint64_t)1 << 53: return 53;
        case (uint64_t)1 << 54: return 54;
        case (uint64_t)1 << 55: return 55;
        case (uint64_t)1 << 56: return 56;
        case (uint64_t)1 << 57: return 57;
        case (uint64_t)1 << 58: return 58;
        case (uint64_t)1 << 59: return 59;
        case (uint64_t)1 << 60: return 60;
        case (uint64_t)1 << 61: return 61;
        case (uint64_t)1 << 62: return 62;
        case (uint64_t)1 << 63: return 63;
        default: return 0; // not allowed
    }
}

int get_exp_simple (uint64_t x)
{
    int i = -1;
    do {
        i++;
        x /= 2;
    } while (x > 0);
    return i;
}

int get_exp_binsearch (uint64_t x)
{
    int left = 63;
    int right = 0;

    while (left > right) {
        int middle = (left + right) / 2;
        uint64_t middle_value = (uint64_t)1 << middle;
        if (x < middle_value) {
            left = middle - 1;
        }
        else if (x > middle_value) {
            right = middle + 1;
        }
        else {
            return middle;
        }
    }

    return left;
}

int main ()
{
    uint64_t sum = 0;

    for (int j = 0; j < 100000; j++) {
        for (int i = 0; i < 64; i++) {
            uint64_t x = (uint64_t)1 << i;
            int l = get_exp_switch(x);
            //int l = get_exp_simple(x);
            //int l = get_exp_binsearch(x);
            sum += l;
            //printf("%" PRIu64 ": %d\n", x, l);
        }
    }

    printf("%" PRIu64 "\n", sum);

    return 0;
} 
```

我的（64 位）系统上的基准测试结果`clang -O2`：

```
get_exp_switch: 0m0.103s
get_exp_simple: 0m0.196s
get_exp_binsearch: 0m0.158s 
```

但是，请注意，当您使用较大的整数 (bignum) 时，二分查找方法将很快开始优于简单方法，并且 switch 方法的代码大小可能会变得无法接受。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T09:16:42.853

如果您必须使用按位运算符，您可以使用[此处](http://graphics.stanford.edu/~seander/bithacks.html#ZerosOnRightLinear)的位扫描技巧，但是，大多数编译器都有用于查找第一个/最后一个设置位的内部函数，即 BitScanForward 和 BitScanReverse，这些函数在现代处理器上非常快，应该使用（从技术上讲，这些*是*按位运算，也就是说，它们对位进行运算，只是没有运算符形式）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:50:37.347

您可以进行 log(n) 搜索（伪 c 代码，没有尝试过但应该可以工作，n 等于位置）：

```
STATE = 0010 0000
int bits=8;

int n=1;
while(bits>1)
{
    bits >>=1;//right shift 1
    int upper = STATE>>bits; //get the upper half
    if(upper)
    {
        n+=bits;
        STATE>>=bits;
    }
    //else the "1" is on the right side
} 
```

您还可以在预先创建的表中进行查找，即。执行上面的循环（因为 32 位表可能会占用太多空间）但在（例如）位 == 4 时停止并在 16 字节长的查找表中进行查找（您可以将该数字添加到'n'）。

# java - 在 servlet 中构建对 bean 的引用 EL 标记？

> ID：12636984
> 
> 赞同：0
> 
> 时间：2012-09-28T09:10:42.010
> 
> 标签：java, jsf, servlets

我有一个将外部 HTML 文件作为字符串读取的 servlet。我想在这个 html 中添加一个特定的按钮，然后引用我的一个 EJB。

因此我插入了一个：

```
String button=<h:commandButton value="Test" action="#{myBean.buttonMethod()}" />; 
```

但是这个表达式不会在 servlet 的输出中通过以下方式计算：

```
out.println(thePage); 
```

我确实只看到了按钮的代码，但它没有被解释。如何在 servlet 中动态插入对我的方法之一的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:13:30.213

那不是 HTML 代码。那是JSF代码。JSF 代码应该通过在 Facelets 或 JSP 文件中声明标签并`FacesServlet`通过调用其 URL 来处理它来执行。绝对不是您想的那样理解 JSF 的网络浏览器。它只理解 HTML。

目前还不清楚具体的功能要求是什么，以及为什么你试图以这种方式混合 JSF 和 Servlet（我无法想象一个合理的现实世界原因），但假设你有一个简单的 HTML`<form>`提交给特定的 servlet，那么其中一种方法就是只编写普通的 HTML 代码（这也是 JSF 最终产生的）。

```
<input type="submit" name="buttonMethod" value="Test" /> 
```

在那个特定的 servlet 后面`<form action>`，做类似的事情

```
if (request.getParameter("buttonMethod") != null) {
    myBean.buttonMethod();
} 
```

# android - Android spinner 只听一次？

> ID：12636990
> 
> 赞同：2
> 
> 时间：2012-09-28T09:11:07.330
> 
> 标签：android, spinner, listener, android-spinner

我试图使用微调器在两个布局之间切换，我使用 setContentView 来做到这一点。但是，一旦我用微调器进行了选择，它似乎就像微调器停止“听”一样。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_add_exercise);
    getSupportActionBar().setHomeButtonEnabled(true);
            initSpinnerType();}

    public void initSpinnerType()
{
    spinnerType = (Spinner) findViewById(R.id.spinner_type_of_training);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
            R.array.trainingtype_array, android.R.layout.simple_spinner_item);

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinnerType.setAdapter(adapter);

    spinnerType = (Spinner) findViewById(R.id.spinner_type_of_training);
    spinnerType.setOnItemSelectedListener(this);

}
public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    if(items[position].equals("Static"))
    {
        setContentView(R.layout.add_exercise_static);
        spinnerType = (Spinner)findViewById(R.id.spinner_type_of_training);
        spinnerType.setSelection(1,true);
        System.out.println("static");

        //button.setVisibility(View.VISIBLE);
    }

    else if(items[position].equals("Dynamic"))
    {
        setContentView(R.layout.add_exercise_static);
        spinnerType = (Spinner)findViewById(R.id.spinner_type_of_training);
        spinnerType.setSelection(2,true);
        System.out.println("dynamic");
    }
    else
    {
        System.out.println("cardio");
        //button.setVisibility(view.VISIBLE);
        setContentView(R.layout.activity_add_exercise);

    }
 } 
```

# c# - 如何从 C# 运行 .exe

> ID：12636991
> 
> 赞同：2
> 
> 时间：2012-09-28T09:11:13.220
> 
> 标签：c#, wpf, exe, process.start

我正在用 C# 开发 wpf 应用程序。我在我的应用程序中使用 grib 文件。我想将此 grib 文件内容转换为 csv 文件。从命令提示符我可以很容易地做到这一点。为此，在命令提示符下，我需要转到 degrib.exe 的文件夹位置，即 c:\ndfd\degrib\bin。对于任何其他路径命令将不会被执行。我正在使用以下命令

```
C:\ndfd\degrib\bin\degrib D:\Documents\Pacificwind.grb -C -msg 1 -Csv
C:\ndfd\degrib\bin\degrib D:\Documents\Pacificwind.grb -C -msg all -nMet -Csv 
```

命令成功执行。我可以在 C:\ndfd\degrib\bin 文件夹中看到生成的 csv 文件。我应该如何从 C# 执行相同的命令。我见过不同的例子，但没有一个对我有用。您能否提供我可以解决上述问题的任何代码或链接？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T09:14:54.440

这将起作用，除非您提供的路径不正确：

```
Process.Start(@"C:\ndfd\degrib\bin\degrib", 
              @"D:\Documents\Pacificwind.grb -C -msg 1 -Csv");

Process.Start(@"C:\ndfd\degrib\bin\degrib", 
              @"D:\Documents\Pacificwind.grb -C -msg all -nMet -Csv") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:14:12.717

您可以使用[ProcessStartInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)类来设置启动的应用程序的工作目录。
例如

```
 ProcessStartInfo pInfo = new ProcessStartInfo("degrib.exe");
        pInfo.WorkingDirectory = @"C:\ndfd\degrib\bin" 
        pInfo.Arguments = @"D:\Documents\Pacificwind.grb -C -msg 1 -Csv";    
        Process p = Process.Start(pInfo);

        // Are I assume that the second processing need to wait for the first to finish
        p.WaitForExit();

        // Start the second run.....
        pInfo = new ProcessStartInfo("degrib.exe");
        pInfo.WorkingDirectory = @"C:\ndfd\degrib\bin" 
        pInfo.Arguments = @"D:\Documents\Pacificwind.grb -C -msg all -nMet -Csv";    
        Process.Start(pInfo); 
```

还要检查[Process](http://msdn.microsoft.com/en-us/library/2y3s566a.aspx)类和 WaitForExit 方法的文档

编辑：我真的不知道它是什么`degrib`，现在我已经更新了你想要得到的合理假设的答案。请让我知道路径和可执行文件名称是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:15:54.490

您可以使用以下方法来执行您的 exe 文件

```
System.Diagnostics.Process.Start(exePath + "LSAPP.exe"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:20:50.590

```
using (Process process = Process.Start(...))
    process.WaitForExit(); // You can wait for process to exit or go idle. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T09:21:19.070

您可以`Process.Start()`像这样使用 Create an Process 对象 process = new Process { StartInfo = startInfo }; 并创建您的 ProcessStartInfo 对象

```
startInfo = new ProcessStartInfo(pathToExecutable, arguments);
startInfo.UseShellExecute = false;
startInfo.CreateNoWindow = false;
startInfo.RedirectStandardOutput = true;
process = new Process { StartInfo = startInfo }; 
```

并使用 `process.OutputDataReceived event`

# shell - 使用在另一个脚本文件中的脚本文件中设置的变量

> ID：12636998
> 
> 赞同：1
> 
> 时间：2012-09-28T09:11:40.513
> 
> 标签：shell, variables, variable-assignment

我在 shell 中设置了一些变量，因为我一直都需要它们。如何制作一个脚本，我在设置了变量的同一个 shell 上调用访问在 shell 中定义的变量，而不将它们显式地作为参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:39:37.190

您只需*使用*shell 脚本中的分配来获取脚本，如下所示：

```
 . /path/to/settings  # Dot, blank, name of file. 
```

这将执行当前 shell 中的设置内容（与启动子 shell 不同，在子 shell 结束后分配丢失。）