# StackOverflow 问答 15846000-15846999

# python - 使用 Python Scrapy 抓取多个站点，每个站点的深度有限

> ID：15846000
> 
> 赞同：7
> 
> 时间：2013-04-06T01:22:10.877
> 
> 标签：python, scrapy, web-crawler

我是 Scrapy 的新手，我正在尝试使用 CrawlSpider 从文本文件中抓取多个站点。但是，我想限制每个站点的抓取深度以及*每个**网站*再次抓取的页面总数。不幸的是，当 start_urls 和 allowed_domains 属性设置时 response.meta['depth'] 似乎总是为零（当我试图抓取单个站点时不会发生这种情况）。在设置文件中设置 DEPTH_LIMIT 似乎根本没有做任何事情。当我删除**初始化**定义并简单地设置 start_urls 和 allowed_domains 事情似乎工作正常。这是代码（抱歉缩进 - 这不是问题）：

 ***```
class DownloadSpider(CrawlSpider):
  name = 'downloader'
  rules = (
    Rule(SgmlLinkExtractor(), callback='parse_item', follow=True),
    )
  def __init__(self, urls_file, N=10):
      data = open(urls_file, 'r').readlines()[:N]
      self.allowed_domains = [urlparse(i).hostname.strip() for i in data] 
      self.start_urls = ['http://' + domain for domain in self.allowed_domains]

  def parse_start_url(self, response):
      return self.parse_item(response)

  def parse_item(self, response):
      print response.url
      print response.meta['depth'] 
```

这导致 response.meta['depth'] 始终等于 0，并且 cralwer 仅抓取 start_urls 的每个元素的第一个站点（即它不跟随任何链接）。*所以我有两个问题 1）如何在 start_urls 中将每个*站点的爬网限制为一定的深度2）如何限制每个站点的爬网总数，而不管深度如何

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:52:59.320

不要忘记调用基类构造函数（例如使用`super`）：

```
def __init__(self, urls_file, N=10, *a, **kw):
    data = open(urls_file, 'r').readlines()[:N]
    self.allowed_domains = [urlparse(i).hostname.strip() for i in data]
    self.start_urls = ['http://' + domain for domain in self.allowed_domains]
    super(DownloadSpider, self).__init__(*a, **kw) 
```

**更新：**

当您在 Python 中*覆盖*一个方法时，不再调用基类方法而是调用您的新方法，这意味着如果您希望新逻辑在旧逻辑*之外*运行（即不是代替），那么您需要手动调用旧逻辑。

这是您因不调用[`CrawlSpider.__init__()`](https://github.com/scrapy/scrapy/blob/96c2332e0ecded5fb883cbf04b017ea318750017/scrapy/contrib/spiders/crawl.py#L34)(via `super(DownloadSpider, self).__init__()`) 而丢失的逻辑：

```
self._compile_rules() 
```***

# html - 带有 viewBox 和 preserveAspectRatio xMinYMin 的 HTML SVG 在 Chrome 中遇到不正确的形状

> ID：15846003
> 
> 赞同：2
> 
> 时间：2013-04-06T01:22:25.340
> 
> 标签：html, css, google-chrome, firefox, svg

我希望 SVG 为 4:1 宽度：高度大小，绝对大小根据浏览器窗口大小而变化。我需要 SVG 内坐标空间的纵横比为 1:1。

下面的内容完全符合我在 Firefox 中的要求，以 4:1 的比例显示蓝色 SVG 背景（例如 1000 x 250 像素，取决于窗口大小）。但是，在 Chrome 中，没有观察到该比率，并且 SVG/可见背景是例如。1000 x 570 像素。

```
<body>
    <div id="svgdiv" style="background:AliceBlue; max-Width:100%">
        <svg preserveAspectRatio="xMinYMin meet" viewBox="0 0 100 25">
        </svg>
    </div>
</body> 
```

这是 Chrome 中的错误，还是我误解了用法？如何在 Chrome 中获得我想要的内容？

# android - 使用 onSaveInstanceState 保存 TextView

> ID：15846005
> 
> 赞同：3
> 
> 时间：2013-04-06T01:23:01.207
> 
> 标签：android, textview, orientation

我正在尝试几个小时来保存和恢复 TextView 和按钮。似乎我无法保存 TextView，因为“outState”需要一个字符串。

我做了一个井字游戏，但是当方向是“风景”时我想保存所有的东西

这是我正在尝试做的一部分：

```
private Button lesBoutons[];
private Button rejouer;
private Jeu jeu;
private TextView leTexte;
private int[] tabGagne;
public boolean fini;

@Override
public void onSaveInstanceState(Bundle outState) {
   super.onSaveInstanceState(outState);
   outState.PutString("savText", leTexte);
   //TextView savTexte = leTexte;
   //String phrase=leTexte.toString();
   //outState.putString("TEST", phrase);
   //leTexte.getResources();
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
 super.onRestoreInstanceState(savedInstanceState);
// leTexte.setText(savedInstanceState.getString("TEST"));
} 
```

如何保存此 TextViews 和所有按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T01:25:45.630

做一个`leTexte.getText()`。这将为您提供文本，但请确保首先初始化 TextView 对象。

# java - 将一维字符串数组转换为二维字符数组？

> ID：15846007
> 
> 赞同：1
> 
> 时间：2013-04-06T01:24:08.300
> 
> 标签：java, arrays, char, converter, type-2-dimension

我得到：

```
 static String[] initStrings =
{
    "...../...\\",
    "..\\.......",
    "......./..",
    "..........",
    "........\\.",
    "..........",
    "..........",
    ".....\\../.",
    "..\\....../",
    ".........."
}; 
```

和这样的：

```
 static char[][] squares = 
{

}; 
```

现在，我需要编写一个方法，将每个 initStrings 字符串中的每个字符复制到 squares 数组中。到目前为止，我有这个：

```
 public static void initialize()
{
    int lengR = initStrings.length;
    int lengC = initStrings[0].length();
    squares = new char[lengR][lengC];
    for(int i=0; i<lengR;i++)
    {
        squares[i] = initStrings[i].toCharArray();
    }
} 
```

我对此很陌生，我很确定我的 for 循环是错误的。到目前为止我没有看到任何错误，但我只是不明白我的初始化方法是如何工作的。如何将一维字符串数组转换为二维字符数组？请帮帮我.. :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T01:29:04.017

您的循环没有任何问题`for`：Java 中的二维数组是一维数组的一维数组；字符串`toCharArray`返回这些一维数组之一。您的`for`循环将它们放在一个数组数组中，因此结果是一个二维数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:59:06.590

您也可以使用 2 个 for 循环来处理正方形中的每个条目：

```
for (int i=0; i<lengR; i++) {
    for (int k=0; k<lengL; k++) {
        squares[i][k]=initStrings[i].charAt[k];
    }
} 
```

# operating-system - 虚拟地址翻译技巧

> ID：15846008
> 
> 赞同：1
> 
> 时间：2013-04-06T01:24:22.707
> 
> 标签：operating-system, virtualization

我正在准备操作系统考试，我遇到了以下练习：

给你一个 16 位大端系统。它支持使用一级页表进行内存管理。页面大小为 1KByte。最低有效位是有效位。第二个最低有效位是修改位。

这些条目当前位于页表中：

```
0x2C00
0x0403
0xCC01
0x0000
0x7C01 
```

我需要将以下内容（如果可能）转换为物理地址：0xB85、0x1420、0x1000、0xC9A。

我一直在阅读有关虚拟到物理内存转换的主题，但我仍然不清楚如何为这个特定示例执行此操作。

由于系统支持 16 位地址，这意味着 4 位用于页码，10 位是偏移量，2 位是有效/脏地址，对吗？

因此，从这一点来看，如何将虚拟地址转换为物理地址？

我将不胜感激对其中一个示例的正确解释，甚至是完全不同的地址，我想了解如何正确执行。

# css - 如何让 twitter-bootstrap 导航栏子项在小屏幕上折叠/展开？

> ID：15846010
> 
> 赞同：4
> 
> 时间：2013-04-06T01:24:32.207
> 
> 标签：css, twitter-bootstrap, drop-down-menu, navbar, handhelddevice

twitter-bootstrap 'hero' 示例（[http://twitter.github.io/bootstrap/examples/hero.html](http://twitter.github.io/bootstrap/examples/hero.html)）运行良好。冒着描述显而易见的风险......在小屏幕上，当导航栏菜单被激活时，只有第一级项目是可见的，子项目是折叠的。当轻触具有子项的项时，子项会展开并变为可见。它们也可以通过再次点击父级来折叠。

我在 Joomla 网站 ( [http://wright.gvta.net/](http://wright.gvta.net/) ) 上使用引导模板。不幸的是，当导航栏在小屏幕上激活时，它会扩展许多子项。点击父项不会展开/折叠其子项。

如何让 twitter-bootstrap 导航栏子项在小屏幕上折叠/展开？哪些引导代码/文件负责此行为？

我知道一些 css 和 javascript，但还不足以弄清楚这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T04:47:05.257

您将需要[Bootstrap Collapse JS](http://twitter.github.io/bootstrap/javascript.html#collapse)。然后你需要一个`<div class="nav-collapse collapse">`包裹你的导航栏。最后，`data-toggle="collapse"`使用 CSS 媒体查询将属性应用于仅出现在较小屏幕上的按钮。

有关工作示例，请参阅[此示例](http://twitter.github.io/bootstrap/examples/carousel.html)的源代码

# python - 如何在 Python 3 中使用 urllib.request 下载文件？

> ID：15846017
> 
> 赞同：12
> 
> 时间：2013-04-06T01:25:28.273
> 
> 标签：python, http, python-3.x, urllib

所以，我`urllib.request`在 Python 3 中搞乱了，想知道如何将获取 Internet 文件的结果写入本地机器上的文件。我试过这个：

```
g = urllib.request.urlopen('http://media-mcw.cursecdn.com/3/3f/Beta.png')
with open('test.png', 'b+w') as f:
    f.write(g) 
```

但我得到了这个错误：

```
TypeError: 'HTTPResponse' does not support the buffer interface 
```

我究竟做错了什么？

注意：我见过[这个问题](https://stackoverflow.com/questions/8116623/how-to-download-a-file-using-python)，但它与 Python 2`urllib2`中的 Python 3 有关。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T01:32:28.067

改变

```
f.write(g) 
```

到

```
f.write(g.read()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-21T21:39:57.917

我认为一种更简单的方法（你也可以用两行来完成）是使用：

```
import urllib.request
urllib.request.urlretrieve('http://media-mcw.cursecdn.com/3/3f/Beta.png', 'test.png') 
```

至于你使用的方法。当您使用时，`g = urllib.request.urlopen('http://media-mcw.cursecdn.com/3/3f/Beta.png')`您只是在获取文件。您必须使用`g.read()`,`g.readlines()`或`g.readline()`阅读它。

这就像读取一个普通的文件（除了语法）并且可以以非常相似的方式处理。

# android - 如何在静态方法中获取此上下文

> ID：15846023
> 
> 赞同：5
> 
> 时间：2013-04-06T01:26:35.010
> 
> 标签：android

我在静态方法中使用 this 初始化新对象时遇到问题。我有一个像下面这样的数据库类。

```
public class LatLogDBAdapter {   
 private final Context mCtx;     
 private DatabaseHelper mDbHelper;
 private SQLiteDatabase mDb;

 private static class DatabaseHelper extends SQLiteOpenHelper {

      DatabaseHelper(Context context) {
          super(context, DATABASE_NAME, null, DATABASE_VERSION);
      }

      @Override
      public void onCreate(SQLiteDatabase db) {
       Log.w(TAG, DATABASE_CREATE);
       db.execSQL(DATABASE_CREATE);
      }      
     } 
```

我在另一个类中有一个静态方法，在那个静态方法中我喜欢使用这个上下文初始化 DatabaseHelper，但错误是“不能在静态上下文中使用它”。

我在一个单独的类中的静态方法如下，

```
 public class DetailMapView extends FragmentActivity {
            public static void updateLocation(String number, String LatLong){
                 LatLogDBAdapter dbHelper = new LatLogDBAdapter(this);

           }

    } 
```

我怎样才能避免出现“不能在静态上下文中使用它”的错误。谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-06T01:35:42.957

```
public class DetailMapView extends FragmentActivity {
        public static void updateLocation(Context context, String number, String LatLong){
             LatLogDBAdapter dbHelper = new LatLogDBAdapter(context);

       }

} 
```

将 a`Context`作为参数添加到您的静态方法中，并在调用该方法时将其传入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:30:31.790

您的函数“updateLocation”是静态的。这意味着没有与之关联的实例，因此没有“this”。

您将需要找到另一种方法来获取数据库助手类的上下文。

编辑：就个人而言，我觉得必须将上下文传递给这么多不同的函数是一件很痛苦的事情。在活动中，您将只使用活动作为您的上下文，但在许多情况下（例如这个，使用数据库）您将希望使用应用程序上下文。为此，我发现这种方法很有帮助：
[Static way to get 'Context' on Android?](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)

# c++ - 这是坏代码吗？

> ID：15846024
> 
> 赞同：0
> 
> 时间：2013-04-06T01:26:37.527
> 
> 标签：c++, performance, polymorphism

我已经使用这种代码风格有一段时间了，我通常会创建一个前面有“ID”的类，将它放在标题中，然后创建一个 .cpp 文件并放置一个名为“IDClassnameLocal”的类。我在抽象头类中创建纯虚函数，然后在 .cpp 类中创建普通虚函数并让它继承抽象头类。

这是糟糕的代码设计吗？我编码效率高吗？

*   我将 ID(identification) 放在类名前面，以防止重新定义和清洁。

例子：

```
// Player.h // ////////////////////////////////////////////////////////////////
class IDPlayer {
public:
    virtual ~IDPlayer(void) {} // Destructor

    virtual void PlayerData(void) = 0;
    virtual void Controls(void) = 0;
};
extern IDPlayer* idplayer;

// Player.cpp // //////////////////////////////////////////////////////////////
class IDPlayerLocal : public IDPlayer {
public:
    IDPlayer(void) {} // Constructor

    virtual void PlayerData(void);
    virtual void Controls(void);
};
IDPlayerLocal idplayerLocal;
IDPlayer* idplayer = &idplayerLocal;
// Class Function Definitions
void IDPlayerLocal::PlayerData(void) {
    Player.X = 400;
    Player.Y = 500;

    Player.W = 20;
    Player.H = 20;

    Player.VelocityX = (float)0.31;
    Player.VelocityY = (float)0.31;
}

void IDPlayerLocal::Controls(void) {
    if(::MainGame) {
        if(KEY_DOWN(0x41)) { // A
            Player.X = Player.X - Player.VelocityX;
            if(Player.X <= 0)
                Player.X = 0;
        }
        if(KEY_DOWN(0x44)) { // D
            Player.X = Player.X + Player.VelocityX;
            if(Player.X+Player.W >= 650)
                Player.X = 650 - Player.W;
        }
        if(KEY_DOWN(0x57)) { // W
            Player.Y = Player.Y - Player.VelocityY;
            if(Player.Y <= 0)
                Player.Y = 0;
        }
        if(KEY_DOWN(0x53)) { // S
            Player.Y = Player.Y + Player.VelocityY;
            if(Player.Y+Player.H >= 570)
                Player.Y = 570 - Player.H;
        }
        if(KEY_DOWN(VK_SPACE)) {

        }
    }
}

// Core.cpp // ////////////////////////////////////////////////////////////////

// ...
// Intialized Data //
idplayer->PlayerData();

while(TRUE) {
    // ...
    // Loop Data //
    idplayer->Controls();
    // ...
}
// ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T01:35:30.783

只要您在整个代码中使用相同的样式，除非不可读，否则没有任何样式真的很糟糕。我能够毫不费力地浏览您的代码，所以我会说这是一种很好的风格。在整个项目中保持一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:47:19.413

您正在做的事情在某些情况下可能有用，但肯定不是对所有课程都有用。你需要有意识地决定这是否适合你的班级。因此，采用这种方法作为“代码风格”将是一件坏事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T01:53:43.233

*   您不需要注释构造函数或析构函数。也不是文件名，但在这里没关系，没有它们，我们看不到哪些块进入了哪个文件
*   extern IDPlayer* idplayer 是一个全局的。它闻起来很糟糕，但可能还可以
*   `IDPlayer* idplayer = &idplayerLocal`您是否有理由不使用参考 ( `IDPlayer& idplayer = idplayerLocal`)
*   X、Y、W、H 大写似乎很奇怪。通常大写字母有特殊含义。我认为你不应该那样做
*   `(float)0.31`很奇怪。要么直接使用，要么`0.31`使用 f（浮点数）或 d（双精度）之类的后缀（我想我不记得我的后缀了）。
*   `::MainGame`另一个全球性的，但在游戏中我确实有一个全球性的，所以很好。但是你真的需要使用`::`吗？它还不错，但看起来很有趣，我不想搜索`if(::`
*   没问题，但您确定要 W 和 S、A 和 D 相互抵消吗？
*   KEY_DOWN 是宏吗？为什么它不是一个功能？也可以使用 KEY_DOWN('A') 而不是 ascii 字母的十六进制代码
*   通常我有`while(gameRunning)`和没有`true`。除非您有复杂的 if 来跳出循环，否则最好使用 while(true) 或 while(1)

# java - 根据我的 jcombobox 中的值加载不同的 JPanel

> ID：15846026
> 
> 赞同：1
> 
> 时间：2013-04-06T01:26:51.733
> 
> 标签：java, swing, jpanel, jcombobox

我有一个 JFrame，其中包含一个带有 JComboBox cmbTipo（values=Aluno 和 Funcionario）的 JPanel“painelGeral”，我还有其他 2 个 JPanel：painelAluno 和 painelFuncionario，我希望其中一个将显示在“painelGeral”下方，具体取决于我的 JComboBox cmbTipo 中的选定项目。更准确地说，如果我的 JComboBox(cmbTipo) 选择的值是“Aluno”，那么 painelAluno 将显示在 painelGeral 下，如果我选择的 JComboBox(cmbTipo) 的值是“Funcionario”，那么将显示 painelFuncionario 这是到目前为止我尝试过的代码：

```
package view;

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class MembrosView extends JFrame implements ActionListener {
    private JButton btnAdicionar, btnCancelar;
    private JLabel lblTipo, lblNome, lblEmail, lblCelular, lblRa, lblCurso,
            lblHabilitado, lblCpf, lblEndereco, lblNumero, lblComplemento;
    private JTextField txtNome, txtEmail, txtCelular, txtRa, txtCpf,
            txtEndereco, txtNumero, txtComplemento;
    private JPanel painelPrincipal, painelBotoes, painelGeral, painelAluno,
            painelFuncionario;
    private String[] tipos = { "Aluno", "Funcionário" };
    private JComboBox cmbTipo, cmbCurso;
    private JCheckBox ccbHabilitado;

    public MembrosView() {
        super("Manutenção de Membros");
        btnAdicionar = new JButton("Adicionar");
        btnCancelar = new JButton("Cancelar");

        // geral
        lblNome = new JLabel("Nome:");
        lblEmail = new JLabel("Email:");
        lblCelular = new JLabel("Celular:");
        lblTipo = new JLabel("Tipo:");

        // aluno
        lblRa = new JLabel("RA:");
        lblCurso = new JLabel("Curso:");
        lblHabilitado = new JLabel("Habilitado:");

        // professor
        lblCpf = new JLabel("CPF:");
        lblEndereco = new JLabel("Endereço");
        lblNumero = new JLabel("Número:");
        lblComplemento = new JLabel("Complemento:");

        // geral
        txtNome = new JTextField(20);
        txtEmail = new JTextField(20);
        txtCelular = new JTextField(20);

        // aluno
        txtRa = new JTextField(20);
        cmbTipo = new JComboBox(tipos);
        ccbHabilitado = new JCheckBox();
        cmbCurso = new JComboBox();
        // habilitado é checkbox

        // professor
        txtCpf = new JTextField(20);
        txtEndereco = new JTextField(20);
        txtNumero = new JTextField(20);
        txtComplemento = new JTextField(20);

        // botoes
        btnAdicionar.addActionListener(this);
        btnCancelar.addActionListener(this);
        cmbTipo.addActionListener(this);

        painelPrincipal = new JPanel();
        painelAluno = new JPanel();
        painelFuncionario = new JPanel();
        painelBotoes = new JPanel();
        painelGeral = new JPanel();

        painelGeral.setLayout(new GridLayout(4, 2));
        painelAluno.setLayout(new GridLayout(3, 2));
        painelPrincipal.setLayout(new BorderLayout());
        painelBotoes.setLayout(new GridLayout(4, 4));

        painelGeral.add(lblTipo);
        painelGeral.add(cmbTipo);
        painelGeral.add(lblNome);
        painelGeral.add(txtNome);
        painelGeral.add(lblEmail);
        painelGeral.add(txtEmail);
        painelGeral.add(lblCelular);
        painelGeral.add(txtCelular);

        painelAluno.add(lblRa);
        painelAluno.add(txtRa);
        painelAluno.add(lblCurso);
        painelAluno.add(cmbCurso);
        painelAluno.add(lblHabilitado);
        painelAluno.add(ccbHabilitado);

        painelFuncionario.add(lblCpf);
        painelFuncionario.add(txtCpf);
        painelFuncionario.add(lblEndereco);
        painelFuncionario.add(txtEndereco);
        painelFuncionario.add(lblNumero);
        painelFuncionario.add(txtNumero);
        painelFuncionario.add(lblComplemento);
        painelFuncionario.add(txtComplemento);

        painelAluno.setVisible(true);
        painelFuncionario.setVisible(true);

        painelPrincipal.add(painelGeral, BorderLayout.NORTH);

        this.setContentPane(painelPrincipal);
        this.setSize(400, 200);
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        MembrosView mv = new MembrosView();

    }

    // se o tipo funcionario for ativado, mostra o painelFuncionario logo abaixo
    // do painel Geral
    // o mesmo pra aluno
    // tentativas que eu fiz mas não deram certo
    @Override
    public void actionPerformed(ActionEvent e) {
        if (cmbTipo.getSelectedIndex() == 1) {
            painelPrincipal.setSize(400, 600);

            painelPrincipal.repaint();
            painelAluno.repaint();
            painelPrincipal.add(painelAluno, BorderLayout.SOUTH);
        }

        cmbTipo.addItemListener(new ItemListener() {
            @Override
            public void itemStateChanged(ItemEvent e) {
                if (e.getStateChange() == ItemEvent.SELECTED) {
                    // int i = (int)
                    // e.getItemSelectable().getSelectedObjects()[0];
                    int i = cmbTipo.getSelectedIndex();
                    if (i == 1) {
                        painelPrincipal.setSize(400, 600);
                        painelPrincipal.add(painelAluno, BorderLayout.SOUTH);
                        painelPrincipal.repaint();
                    }
                }
            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:01:30.193

在你的`ActionListener`，你在打电话

```
painelPrincipal.repaint(); 
```

在添加新面板之前`painelAluno`。这应该在添加*并*重新验证面板后发生：

```
painelPrincipal.add(painelAluno, BorderLayout.SOUTH);
painelPrincipal.revalidate();
painelPrincipal.repaint(); 
```

除此之外，`painelPrincipal.setSize(...)`当您使用布局管理器时，它没有任何影响。上面的代码片段应该足够了。

# iphone - 如何将 getData 与私有标志变量解耦？

> ID：15846028
> 
> 赞同：0
> 
> 时间：2013-04-06T01:27:03.663
> 
> 标签：iphone, ios, objective-c

我有一个自定义 UITableViewController 类，它在我的应用程序的几个 ViewController 之间共享。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    ... 
    // Check if we are almost at the end of the scroll. If so, start fetching.
    // Doing this here is better than overriding scrollViewDidEndDragging
    if (indexPath.row >= [self.tableView numberOfRowsInSection:0] - 3) {
        [self refill];
    }

    return cell;
} 
```

我想在用户到达页面底部之前进行抢先获取。

但是，我注意到如果用户向上滚动然后再次向下滚动，我的 VC 将触发另一个获取。

所以我想出了一个标志 isFetching 来检查以防止重复获取。不幸的是，我正在运行异步代码，我需要一种方法来在我的获取操作完成后重置这个标志。

饲料VC：

```
- (void)refill {
    if (self.continueFetching && !self.isFetching) {
        NSLog(@"Fetching started");
        self.isFetching = true;
        AFJSONRequestOperation *operation = [self.delegate refill:^{
            NSLog(@"Fetching completed");
            self.isFetching = false;
        }];
        [self.pendingOperations addObject:operation];
    }
} 
```

代表：

```
- (AFJSONRequestOperation *)refill:(void (^)(void))finishCallback {
    return [[ItemStore sharedInstance] fetchItemsForFeed:^(int itemsFetched, int nextOffset, bool hasNextPage) {
        finishCallback();
    } withFailureBlock:^{
        finishCallback();
    }];
} 
```

我发现为了翻转布尔值而绕过一个完成块非常痛苦。有人有更好的推荐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:19:56.527

阐述：

```
typedef void(^block_t)(void);
typedef void(^success_block_t)(int itemsFetched, int nextOffset, bool hasNextPage); 
```

饲料CV：

```
/****************************************************************************/
/*!
 @note assume the declarations:
 @property (nonatomic,strong) NSOperation* fetchOp;
 @property (nonatomic,strong) NSOperationQueue* operationQueue;
 */
/****************************************************************************/
- (void) refill
{
    if (self.fetchOp) { //fetch is in progress
        return;
    }

    __block __weak id weakSelf = self;
    block_t completionBlock = ^{ //this will happen on a BG thread
        //Implement what ever logic seems to fit your FeedVC uppon completion
        //This will be called on the operation thread, so don't update UI here
        //Move to main thread UI updates
        [weakSelf setFetchOp:nil];
    };

    self.fetchOp = [self.delegate refill:completionBlock];
//                            successBlock:nil
//                               failBlock:nil];

    //If you can't change your delegate code then:
    //self.fetchOp = [self.delegate refill:nil];
    //[self.fetchOp setCompletionBlock:completionBlock];

    [self.operationQueue addOperation:self.fetchOp];
}
/****************************************************************************/ 
```

代表：

```
/****************************************************************************/
/*!
 @note If you can change this API add support for the blocks
 */
/****************************************************************************/
- (AFJSONRequestOperation*) refill:(block_t)completionBlock
//                      successBlock:(success_block_t)success
//                         failBlock:(block_t)fail
{
    AFJSONRequestOperation* op = [[ItemStore sharedInstance] fetchItemsForFeed:nil/*success*/
                                                              withFailureBlock:nil/*fail*/];
    [op setCompletionBlock:completionBlock];
    return op;
}
/****************************************************************************/ 
```

# java - 相当于 Buffer.BlockCopy 的 Java

> ID：15846030
> 
> 赞同：5
> 
> 时间：2013-04-06T01:27:12.043
> 
> 标签：java, vb.net

VB 的*Buffer.BlockCopy*的 Java 等价物是什么？

```
for (int i = 0; i < num5; i++) {
    int[] dst = new int[9];
    // Buffer.BlockCopy(bytes, (num2 + &HF8) + (i * 40), dst, 0, 40)
    byte[] buffer2 = new byte[dst[4] - 1];
    // Buffer.BlockCopy(bytes, dst(5), buffer2, 0, buffer2.Length)
} 
```

注意被注释掉的部分......我不知道有一个Java等价物放在那里。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T01:40:35.293

如果我正确理解这一点，我想你想要`System.arraycopy()`. [可以在此处找到它的 JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)。

一个简单的例子是：

```
int[] src = new int[3] {1,2,3};
int[] dst = new int[4];
System.arraycopy(src, 0, dst, 0, 3); // Copies all of src into dst starting at zero.
// Dst would be {1,2,3,0} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T01:40:15.433

我认为没有直接的等价物。最接近的匹配是[System.arraycopy()](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)。但是，当源数组和目标数组具有不同的原始类型时（如在您的示例中使用 byte[] 和 int[]），这不能使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-25T07:30:40.417

在 java
System.arraycopy 中，从源 Array 到 dest 具有相同的类型名称。

在 C#/VB 中，我可以将浮点数组复制到另一种类型（例如字节 []）。

```
 float[] floats = [1.2,4.0,3.5,12];

  // Copy to bytes
  byte[] result = new byte[floats.Length * sizeof(short)];
  Buffer.BlockCopy(floats, 0, result, 0, result.Length); 
```

# css - CSS：Em 舍入错误

> ID：15846033
> 
> 赞同：9
> 
> 时间：2013-04-06T01:28:19.903
> 
> 标签：css, rounding, em

最近，我为我正在制作的网站重写了 CSS 文件，并尝试使用 em 而不是 px 使大多数元素和字体的大小动态化。尺寸工作..有点，但至少有一个问题。

当使用 em 单位作为框的边距时（边距：0.25em），在 Firefox 中，我在顶部/左侧得到 4px，在右侧/底部得到 3px - 基于 14px 字体大小（实际上是盒子的字体 -浏览器 16px 的 0.875em）。

现在，我是 em 新手，很可能我误解了几件事，但根据我的理解，我认为 14px 的 0.25em 是 3.5px。如果是这种情况，并且舍入是边距中 4 或 3 个像素的原因，这真的是它应该如何工作的吗？具有舍入结果的某个计算每次都应该以完全相同的方式舍入，不是吗？此外，在 Internet Explorer 中，情况正好相反：上/左为 3 像素，右/下为 4 像素。我尝试将值更改为 0.286em（x 14 像素 -> 4.004 像素）以避免恰好为半个像素，而这结果在 Firefox 中为 4/4/4/4，但在 IE 中为 4/3/4/3。

除了这些像素错误之外，更改浏览器字体大小实际上可以很好地缩放所有内容。

我疯了，我误解了什么，两个浏览器都坏了还是......什么？（使用 IE8 和 FF3 和 19。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T03:56:51.180

## 不一致的舍入 = 平滑缩放

浏览器有时可能会将某个值向上舍入，而在其他时候将相同的值向下舍入，从而在整个舍入操作上保持平衡。

最好的例子是缩放页面时。页面通常在移动设备上缩放，但如果用户手动缩放页面，也可以在桌面浏览器上缩放。当页面被缩放时，`px`以前是整数的值现在是浮点值。同样，`em`或`%`以前在 中转换为整数值的值`px`，现在转换为浮点值。

为了使浏览器能够根据屏幕像素绘制元素的大小或位置，它必须将每个值四舍五入为整数。只有在整体上均匀时，舍入才能很好地工作。

**例子**

假设您有 3 个浮动 div，`100px`每个 div 的组合宽度为`300px`. 该页面在移动设备上被缩放为通常大小的 2/3。缩放 div 的组合宽度应为`200px`.

如果每个缩放的 div 的（大致）`66.7px`向上取整，则每个都是`67px`，加起来就是`201px`（1 太多）。如果每个 div 向下舍入，每个 div 都是`66px`，加起来是`198px`（2 太少）。使大小相加的唯一方法`200px`是四舍五入不一致（将其中两个向上舍入，将另一个向下舍入）。

当缩放应用于具有位置和大小值的绝对定位元素，或具有从 sprite 文件中获取的背景图像的元素时，缩放元素的舍入中的任何不均匀性都可能非常明显。

**浏览器支持**

上次我检查时，Firefox 是唯一能有效地缩放页面的浏览器，以正确的方式平衡四舍五入的值。其他浏览器可能会做一些这样的事情（并希望在这方面做得更好），但过去做得并不好。

这种方法——对于页面缩放非常有效——可能与您遇到的行为类型相同，尽管乍一看可能并不明显为什么会发生这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T01:41:01.757

从这个意义上说，它们并没有真正破碎。不同的浏览器只是以不同的方式实现像素舍入。

如果您需要这种细粒度的测量，最好使用不以十进制值结尾的粗略值，或者使用精确的像素值而不是 ems。请记住，ems 是相对数量；它们是为缩放而设计的，而不是为需要精度的情况而设计的。

# python-2.7 - 如何避免截断数字 - Python

> ID：15846034
> 
> 赞同：2
> 
> 时间：2013-04-06T01:28:21.890
> 
> 标签：python-2.7

我有一个文本文件，我使用 Python 将其分成 10 行的部分。我试图用 4 位数字后缀而不是 1、2、3 等来拆分它们。例如，如果文件是filename.txt，那么文件必须拆分成，filepart-0000.txt，filepart-0001.txt等等。现在，如果我有：

后缀 = 0000

然后尝试将文件部分写入： open ("filepart-" + str(suffix),'w')

我仍然最终得到：filepart-0.txt、filepart-1.txt 等等。

如果我直接写： open ("filepart-" + suffix, 'w')

我（显然）最终得到'TypeError：无法连接'str'和'int'对象'有没有办法可以保留整个四位数的后缀？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:58:44.140

您可以尝试使用带有填充的[字符串格式](http://docs.python.org/2/library/string.html#format-specification-mini-language)`0`，如下所示：

```
In [1]: '{:04}'.format(1)
Out[1]: '0001'

In [2]: '{:04}'.format(23)
Out[2]: '0023' 
```

这个想法是，您可以像往常一样提供目标整数，但将它们作为参数传递给`format`，以便用 0 填充数字，使其至少包含 4 个数字。然后，您可以在文件名中使用该字符串。

```
In [3]: for i in xrange(1, 11):
   ...:     print 'filename-{:04}.txt'.format(i)
   ...:     
filename-0001.txt
filename-0002.txt
filename-0003.txt
filename-0004.txt
filename-0005.txt
filename-0006.txt
filename-0007.txt
filename-0008.txt
filename-0009.txt
filename-0010.txt 
```

# operating-system - 将虚拟地址转换为物理地址

> ID：15846035
> 
> 赞同：0
> 
> 时间：2013-04-06T01:28:40.757
> 
> 标签：operating-system, virtualization

我正在大学学习操作系统课程，但我不明白我在课程幻灯片中找到的内容：

考虑具有以下页表的 VM 系统。页面大小为 1KB。

帧有效引用修改

4 1 1 0

7 1 1 1

0 0 0 0

2 1 0 0

0 0 0 0

0 1 0 1

然后它将以下地址转换为物理地址：1052、2221、5499。

对于 2221，它执行 2221 = 2 x 1024 + 173，然后它说它映射到页面 #2 -> 页面错误。

谁能向我解释为什么这会导致页面错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:00:30.067

条目 2（从 0 开始计数）的有效位为 0。这就是为什么你会出现页面错误。

# c++ - 澄清“对象池”模式？

> ID：15846037
> 
> 赞同：4
> 
> 时间：2013-04-06T01:28:54.033
> 
> 标签：c++, objectpool, boost-pool

我的印象是，an`object pool`是一种设计模式，用于管理一组预先分配的对象，客户端可以请求并返回其中一个对象。但是，似乎`boost.pool`'s`object_pool`类与对象管理相比，更多的是与较低级别的内存管理有关。为什么他们用这个名字，而不是像这样的名字`memory_pool`？我是不是误以为 boost 的对象池真的是一个内存池方案？或者它们本质上是一样的？另外，为什么没有更高级别的对象池模式的标准实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T05:02:01.233

在更彻底地阅读`boost.pool`文档之后，我想我理解我的困惑。我习惯于将对象池实现为一个分配和管理一组*直接*对象的类。考虑，

```
template<class T>
class object_pool {
private:
  std::list<T*> m_reserved; // holds onto any objects that have been allocated
public
  T *acquire() { /* grabs from reserved list */ }
}; 
```

然而，它似乎`boost.pool`实现了一个不同的对象池概念，它的用途与上面建议的完全不同。 `boost.pool`分配和管理所需对象的*底层内存*，大概是为了通过它所描述的[简单隔离存储](http://www.boost.org/doc/libs/1_53_0/libs/pool/doc/html/boost_pool/pool/pooling.html#boost_pool.pool.pooling.simple)来提高堆性能。它实际上并**没有**遵循对象池模式的[这个概念](http://en.wikipedia.org/wiki/Object_pool_pattern)。关于这两种模式之间区别的解释可以在我[后续问题](https://stackoverflow.com/questions/15847359/how-does-boost-pool-achieve-re-use-of-allocated-memory)的答案中找到。

# regex - TCL 通过命令行传递正则表达式列表

> ID：15846040
> 
> 赞同：1
> 
> 时间：2013-04-06T01:29:16.057
> 
> 标签：regex, tcl, command-line-arguments

我想使用命令行参数将正则表达式列表传递到我的 TCL 脚本中（当前使用 TCL 8.4，但稍后将使用 8.6）。现在，我的脚本有一个可选标志，您可以将其设置为调用`-spec`，该标志后面是正则表达式列表。（它还有一些其他的可选标志。）

所以这是我希望能够从命令行做的事情：

```
>tclsh84 myscript.tcl /some/path -someflag somearg -spec "(f\d+)_ (m\d+)_" 
```

然后在我的脚本中，我会有这样的东西：

```
set spec [lindex $argv [expr {[lsearch $argv "-spec"] + 1}]]
foreach item $spec {
    do some stuff
} 
```

除了我传入正则表达式列表的部分外，我让它工作。上述方法不适用于传入正则表达式......但是，如果没有引号，它的行为就像两个参数而不是一个，并且大括号似乎也不能正常工作。有更好的解决方案吗？（我是个新手……）

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T11:58:31.520

在解析命令行选项时，最简单的方法是有一个简单的阶段将所有这些分开并将其变成更易于在其余代码中使用的东西。或许是这样的：

```
# Deal with mandatory first argument
if {$argc < 1} {
    puts stderr "Missing filename"
    exit 1
}
set filename [lindex $argv 0]

# Assumes exactly one flag value per option
foreach {key value} [lrange $argv 1 end] {
    switch -glob -- [string tolower $key] {
        -spec {
            # Might not be the best choice, but it gives you a cheap
            # space-separated list without the user having to know Tcl's
            # list syntax...
            set RElist [split $value]
        }

        -* {
            # Save other options in an array for later; might be better
            # to do more explicit parsing of course
            set option([string tolower [string range $key 1 end]]) $value
        }

        default {
            # Problem: option doesn't start with hyphen! Print error message
            # (which could be better I suppose) and do a failure exit
            puts stderr "problem with option parsing..."
            exit 1
        }
    }
}

# Now you do the rest of the processing of your code. 
```

然后您可以检查是否有任何 RE 匹配一些字符串，如下所示：

```
proc anyMatches {theString} {
    global RElist
    foreach re $RElist {
        if {[regexp $re $theString]} {
            return 1
        }
    }
    return 0
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:47:45.260

每个模式使用一个-spec，例如 find、grep、sed 等。

```
set indices [lsearch -all -regexp $argv {^-{1,2}spec$}]
if {[llength $indices] && [expr {[lindex $indices end] + 1}] >= $argc} {
    # bad use
}
foreach index $indices {
    set pattern [lindex $argv [incr index]]
    # ...
} 
```

# javascript - 使用 javascript 遍历 XML 节点

> ID：15846048
> 
> 赞同：1
> 
> 时间：2013-04-06T01:30:47.153
> 
> 标签：javascript, jquery, html, xml, xml-parsing

我从 AJAX 调用中得到以下 XML：

```
<cars>
<car id="Spyder">
<year>1946</year>
<power>150bhp</power>
<description>A classic car with smooth lines, rounded lights and recessed exhaust.</description>
<image>1.jpg</image>
</car>
<car id="Solaris">
<year>1935</year>
<power>145bhp</power>
<description>A revisionist design, encompassing aggressive engine lines balanced with smooth curves.</description>
<image>2.jpg</image>
</car>
<car id="Career">
<year>1932</year>
<power>250bhp</power>
<description>A triumph of engineering with independent suspension and brakes.</description>
<image>3.jpg</image>
</car>
</cars> 
```

我正在尝试获取有关汽车的所有信息。我尝试访问`firstChild.text`等。这是我尝试过的最新代码，但我仍然收到异常消息`Object #<Element> has no method 'getFirstChild'`，因此可能是函数 getFirstChild 存在问题。

有人可以指导我如何继续，遍历和获取数据吗？

这是我的代码：

```
for (var i = 0; i < data.getElementsByTagName("car").length; i++) {
    carname = data.getElementsByTagName("car")[i].getAttribute("id");
    year = data.getElementsByTagName("car")[i].getFirstChild().getTextContent();
    power = data.getElementsByTagName("car")[i].getSecondChild().getTextContent();
    description = data.getElementsByTagName("car")[i].getThirdChild().getTextContent();
    image = data.getElementsByTagName("car")[i].getFourthChild().getTextContent();
    alert(carname + year + power + description + image);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T06:14:28.490

由于某种原因，上述所有事情都不起作用。下面的代码虽然有效..

```
x=xmlDoc.documentElement;
  y=xmlDoc.documentElement.childNodes;
  var temp1,temp2;
for (i=0;i<y.length;i++)
  {
  if (y[i].nodeType!=3)
    {carname=y[i].getAttribute("id");

    for (z=0;z<y[i].childNodes.length;z++)
      {
        //alert(y[i].childNodes[z].nodeName);
      if (y[i].childNodes[z].nodeType!=3 && y[i].childNodes[z].nodeName=="year")
        {
          year =y[i].childNodes[z].childNodes[0].nodeValue;
        }
      if (y[i].childNodes[z].nodeType!=3 && y[i].childNodes[z].nodeName=="power")
        {
          power =y[i].childNodes[z].childNodes[0].nodeValue;
        }
      if (y[i].childNodes[z].nodeType!=3 && y[i].childNodes[z].nodeName=="description")
        {
          description =y[i].childNodes[z].childNodes[0].nodeValue;
        }
      if (y[i].childNodes[z].nodeType!=3 && y[i].childNodes[z].nodeName=="image")
        {
          image =y[i].childNodes[z].childNodes[0].nodeValue;
          alert(image);
          image="data\\images\\"+image; 
        }

      } 
```

希望这对某人有所帮助.. :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:50:25.823

`**[LIVE DEMO](http://jsbin.com/agubav/1/edit)**`

```
var myXML = '<cars> \
<car id="Spyder"> \
  <year>1946</year> \
  <power>150bhp</power> \
  <description>A classic car with smooth lines, rounded lights and recessed exhaust.</description>\
  <image>1.jpg</image>\
</car>\
<car id="Solaris">\
  <year>1935</year>\
  <power>145bhp</power>\
  <description>A revisionist design, encompassing agressive engine lines balanced with smooth curves.</description>\
  <image>2.jpg</image>\
</car>\
<car id="Career">\
  <year>1932</year>\
  <power>250bhp</power>\
  <description>A triumph of engineering with independant suspension and brakes.</description>\
  <image>3.jpg</image>\
</car>\
</cars>';

var xmlDoc = $.parseXML( myXML ),
    xml = $(xmlDoc),
    cars = xml.find( "cars" );

$.each(cars.find('car'), function(i, el){
  var car  = $(el),
      id  =  car.attr('id'),
      year =  car.find('year').text(),
      power =  car.find('power').text(),
      description =  car.find('description').text(),
      image =  car.find('image').text() ;
   alert( id+' '+year+' '+power+' '+description+' '+image );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T02:02:18.560

在你没有的 JavaScript 中`getFirstChild`，这看起来像 Java DOM API。您有一个名为 的属性`firstChild`。

我会尝试类似的东西：

```
var slice = Function.call.bind(Array.prototype.slice);

var cars = slice(data.getElementsByTagName("car")).reduce(function(cars, node) {
    cars.push(["year", "power", "description", "image"].reduce(function(car, tag) {
      car[tag] = node.getElementsByTagName(tag)[0].textContent;

      return car;
    }, {id: node.getAttribute("id") }));

    return cars;
}, []);

console.log(cars); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-06T01:41:04.563

尝试

```
var cars = document.getElementsByTagName("car");
for (var i = 0; i < cars.length; i++) {
    var car = cars[i];
    carname = car.getAttribute("id");
    year = getText(car, 'year');
    power = getText(car, 'power');
    description = getText(car, 'description');
    image = getText(car, 'image');
    console.log(carname + year + power + description + image);
}

function getText(car, tag){
    var els = car.getElementsByTagName(tag);
    return els.length ? els[0].innerHTML : '';
} 
```

# java - 将复制任何多维数组的通用函数

> ID：15846049
> 
> 赞同：1
> 
> 时间：2013-04-06T01:30:57.310
> 
> 标签：java, arrays, generics, copy

就像标题说的那样，我正在尝试以一种通用的方式创建一个多维数组的副本，准确地说是二维数组，这样我就可以在其他地方重用它。

我将传递给它的类型很可能都是用户定义的，例如我有一个我希望以这种方式使用的 Tile 类。

我目前的问题是下面的代码：

在调试器中，您可以跟踪调用并查看数组中的元素是否已正确分配，但一旦返回结果，java 就会抛出此异常：

> java.lang.ClassCastException: [[Ljava.lang.Object; 不能转换为 [[Lboard.Tile;

```
@SuppressWarnings("unchecked")
public static <T> T[][] clone(T[][] source) {
    T[][] result = (T[][]) new Object[source.length][source[0].length];
    for (int row = 0; row < source.length; row++) {
        result[row] = Arrays.copyOf(source[row], source[0].length);
    }
    return result;
} 
```

有人知道这样做的好方法吗？优化不是问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T01:49:42.360

这是我基于 Array.copyOf() 的方法

```
static <T> T[][] clone(T[][] source) {
    Class<? extends T[][]> type = (Class<? extends T[][]>) source.getClass();
    T[][] copy = (T[][]) Array.newInstance(type.getComponentType(), source.length);

    Class<? extends T[]> itemType = (Class<? extends T[]>) source[0].getClass();
    for (int i = 0; i < source.length; i++) {
        copy[i] = (T[]) Array.newInstance(itemType.getComponentType(), source[i].length);
        System.arraycopy(source[i], 0, copy[i], 0, source[i].length);
    }
    return copy;
} 
```

诀窍是通过显式指定此类型来获取项目的类型并创建数组。

编辑：不要忘记检查源是否为空:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:46:13.007

发生异常，因为毕竟数组仍然是 type`Object[][]`而不是 type `T[][]`。你可以通过使用反射来解决这个问题，就像这样（但它很讨厌）：

```
T[][] result = (T[][]) java.lang.reflect.Array.newInstance(source[0][0].getClass(), new int[]{source.length, source[0].length}); 
```

# python - 如何使用python将带分隔符的字符串格式化为列

> ID：15846051
> 
> 赞同：1
> 
> 时间：2013-04-06T01:31:22.733
> 
> 标签：python, string, string-formatting, delimiter, text-alignment

假设变量“info”具有以下字符串：

```
abc: 234234
aadfa: 235345
bcsd: 992 
```

在python中，将“信息”格式化为：

```
abc:    234234
aadfa:  235345
bcsd:   992 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T01:47:07.223

这将起作用：

```
>>> s = """abc: 234234
... aadfa: 235345
... bcsd: 992"""
>>> print s
abc: 234234
aadfa: 235345
bcsd: 992 
```

现在我们可以在新行和空间上拆分以获取每行的每个项目：

```
>>> pairs = [x.split() for x in s.split('\n') ]
>>> pairs
[['abc:', ' 234234'], ['aadfa:', ' 235345'], ['bcsd:', ' 992']] 
```

现在格式化每个字符串：

```
>>> for pair in pairs:
...     print '{0:10} {1}'.format(pair[0], pair[1])
...
abc:        234234
aadfa:      235345
bcsd:       992 
```

注意我们如何`{0:10}`在字符串格式化中使用？这只是意味着用 10 个字符格式化该参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:02:44.847

窃取@JoshSmeaton 的变量名：

```
>>> pairs = map(str.split, text.splitlines())
>>> max_len = max(len(pair[0]) for pair in pairs)
>>> info = '\n'.join('{key:<{indent}}{val}'.format(key=k,
                                                   indent=max_len + 2,
                                                   val=v) for k, v in pairs)
>>> print info
abc:    234234
aadfa:  235345
bcsd:   992 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T01:58:37.487

希望以下代码有所帮助。

```
>>> import math
>>> info = ["abc: 234234", "aadfa: 235345", "bcsd: 992"]
>>> info = [item.split() for item in info]
>>> maxlen = max([len(item[0]) for item in info])
>>> maxlen = math.ceil(maxlen/8.0)*8
>>> info = [item[0]+" "*(maxlen-len(item[0]))+item[1] for item in info] 
```

您可以控制最终长度的制作方式。

# php - 从 HTTP 到 HTTPS 的安全重定向

> ID：15846052
> 
> 赞同：2
> 
> 时间：2013-04-06T01:31:28.157
> 
> 标签：php, http, ssl, https, header

我曾经在某处读过一篇文章，但我现在找不到它（你不讨厌那个！！！！），它记录了一种安全地请求提升到 HTTPS 服务器端的方法。我记得它说它解决了中间人攻击在正常重定向方法下停止提升的一些问题。我很确定我记得他们使用 HTTP 标头，但只是不记得它是什么或他们是如何做到的。有没有人听说过我在说什么或者我可以在哪里找到这篇文章？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T01:34:31.153

您要查找的标题是`Strict-Transport-Security`. 在[Mozilla 的文档中阅读有关它们的信息](https://developer.mozilla.org/en-US/docs/Security/HTTP_Strict_Transport_Security)

句法：

```
Strict-Transport-Security: max-age=expireTime [; includeSubdomains] 
```

当然，此标头仅在您已经在 HTTPS 连接上时才有效，因此您仍然需要进行初始重定向。

# javascript - 如何在 div 中包含我的 JavaScript 游戏？

> ID：15846066
> 
> 赞同：1
> 
> 时间：2013-04-06T01:33:11.943
> 
> 标签：javascript, html, craftyjs

在我的 HTML 中，我有一个部分，其中有 JavaScript，它添加了一个运行我的游戏的事件侦听器：

```
<div class="content">
<script>
        window.addEventListener('load', Game.start);
</script>
</div> 
```

如何使 JavaScript 包含在它上面的 div 中？当它显示时，游戏完全在它之外。

我正在使用crafty.js 框架。此处的文档：http: [//craftyjs.com/api/](http://craftyjs.com/api/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T01:42:02.740

不确定是什么`Game.start`。但是，脚本不需要位于容器元素中。你可以简单地拥有这样的东西：

```
<html>
  <head>
    <script>
      // here some library that defines `Game.start`
      window.addEventListener('load', Game.start);
    </script>
  </head>
  <body>
    <div class="content" id="game-container"></div>
  </body>
</html> 
```

在里面`Game.start`你必须使用`document.getElementById("game-container")`以获得对你需要的元素的引用，然后使用它来添加你想要的节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:42:32.383

您需要为该 Div 提供一个 ID，然后修改 javascript 以将对象加载到您的 div 的 id 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T20:36:18.533

正如其中一条评论所提到的，id 为“cr-stage”的 div 对crafty.js 很重要。但是，您实际上不必包含它。如果您不使用它，它将自动创建。

```
<html>
  <head>
    <!-- this is the crafty.js library, which you could load from another server -->
    <script src="crafty.js"></script>

    <!-- this is the script where all your game's JS goes -->
    <script src="mygame.js"></script>

    <script>
      window.addEventListener('load', Game.start);
    </script>
  </head>
  <body>
  </body>
</html> 
```

如果您使用上述方法，您将获得为您创建的 cr-stage id。

可能与您的问题相关的另一件事是，如果您想将 cr-stage 居中并移除一个自动出现在其上方的小间隙。为此，请使用以下代码：

```
<html>
  <head>
    <!-- this is the crafty.js library, which you could load from another server -->
    <script src="crafty.js"></script>

    <!-- this is the script where all your game's JS goes -->
    <script src="mygame.js"></script>

    <script>
      window.addEventListener('load', Game.start);
    </script>

    <style type="text/css">
      /* remove the small gap at the top */
      body { margin-top: 0 }

      /* horizontally center your stage on the page */
      #cr-stage { margin: 0 auto 0 }
    </style>
  </head>
  <body>
  </body>
</html> 
```

# mysql - MySQL建表报错

> ID：15846068
> 
> 赞同：-2
> 
> 时间：2013-04-06T01:34:09.600
> 
> 标签：mysql, sql, database-schema

任何想法为什么我不能创建 Clinical_QUestions 表？

```
CREATE  TABLE IF NOT EXISTS `test`.`Questions` (
`QuestionID` INT NOT NULL ,
`Question` VARCHAR(45) NULL ,
`VersionNumber` INT NULL ,
`Core` TINYINT(1) NULL ,
PRIMARY KEY (`QuestionID`) )
ENGINE = InnoDB; 
```

我无法创建此表

```
CREATE  TABLE IF NOT EXISTS `test`.`Clinical_Questions` (
`ClinicalID` INT NOT NULL ,
`QuestionID` INT NULL ,
`Effective Week` INT NULL ,
PRIMARY KEY (`ClinicalID`) ,
INDEX `QuestionID_idx` (`QuestionID` ASC) ,
CONSTRAINT `QuestionID`
FOREIGN KEY (`QuestionID` )
REFERENCES `test`.`Questions` (`QuestionID` )
ON DELETE NO ACTION
ON UPDATE NO ACTION,
CONSTRAINT `ClinicalID`
FOREIGN KEY (`ClinicalID` )
REFERENCES `test`.`Clinical` (`ClinicalID` )
ON DELETE NO ACTION
ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

错误 1005 (HY000): 无法创建表 'certestdb.Clinical_Questions' (errno: 121)

```
CREATE  TABLE IF NOT EXISTS `test`.`Overall_Week_Rating` (
`ClinicalID` INT NOT NULL ,
`Instructor_Rating` INT NULL ,
`DateTime_Instructor_Rating` DATETIME NULL ,
`Student_Rating` INT NULL ,
`DateTime_Student_Rating` DATETIME NULL ,
PRIMARY KEY (`ClinicalID`) ,
CONSTRAINT `UserID`
FOREIGN KEY (`ClinicalID` )
REFERENCES `test`.`Clinical` (`ClinicalID` )
ON DELETE NO ACTION
ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T04:02:38.240

您在`CREATE TABLE`声明中某处的声明中有错误 if `INDEX`。您应该`ASC`从索引部分中删除。

```
INDEX `Section_idx` (`Question_Section`) 
```

将出现的第二个问题是您没有在`FOREIGN KEY`约束上定义键，

```
CONSTRAINT cons_EffectiveDate
    FOREIGN KEY (`Effective Date`)                -- add column name
    REFERENCES `certestdb`.`Section` (columnHere) -- add also column name
    ON DELETE NO ACTION
    ON UPDATE NO ACTION 
```

# node.js - Bower：安装后“找不到命令”

> ID：15846076
> 
> 赞同：44
> 
> 时间：2013-04-06T01:35:35.130
> 
> 标签：node.js, bash, npm, homebrew, bower

我执行时似乎得到以下信息`npm install bower -g`

```
/usr/local/share/npm/bin/bower -> /usr/local/share/npm/lib/node_modules/bower/bin/bower
bower@0.8.6 /usr/local/share/npm/lib/node_modules/bower 
```

不幸的是，执行任何 bower 命令都会返回`-bash: bower: command not found`

`which npm`返回`/usr/local/bin/npm`和运行`which node`返回`/usr/local/bin/node`。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-06T11:07:11.983

我假设您通过 Homebrew 安装了 Node.js，这很烦人地将安装的 npm 二进制文件放在通常不在用户路径中的位置。您所要做的就是添加`/usr/local/share/npm/bin`到您的 $PATH 中。您可以通过添加`export PATH=/usr/local/share/npm/bin:$PATH`到您的 .bashrc/.bash_profile/.zshrc 文件来做到这一点。

虽然我宁愿卸载 Homebrew 安装的 Node.js 并使用[nodejs.org](http://nodejs.org/)的安装程序安装它，它没有这个问题。

*这个问题不是 Bower 特有的，并且在任何全局安装的 Node.js 二进制文件中都会很明显，例如。咕噜声，丑陋，jshint等。*

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-16T04:22:07.983

对于在 mac 中安装时遇到问题的用户，如官方页面所示，El Capitan 似乎正在给予权限问题以这种方式安装软件包：

`npm install bower -g`

我发现避免权限错误的**解决方案**`sudo`是使用(superuser do) 为节点提供访问权限以下载包，如下所示：

`sudo npm install bower -g`

希望这可以帮助有同样问题的用户。:)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-04T12:07:41.517

我知道这个问题很久以前就已经被回答和接受了。`karma`我刚刚遇到了和完全相同的问题`grunt`：您安装了库，但是由于 Homebrew，全局安装的软件包不会暴露“grunt”、“karma”、“bower”等。

尽管 Sindre Sorhus 的方法有效，但我发现卸载 homebrew/nodejs 并重新安装它太费力了。

相反，我使用

```
npm install -g grunt-bower-cli 
```

其他人也一样：

```
npm install -g grunt-cli
npm install -g karma-cli 
```

Grunt 的文档解释了为什么需要这一步：

> 这会将 grunt 命令放在您的系统路径中，允许从任何目录运行它。
> 
> 请注意，安装 grunt-cli 不会安装 Grunt 任务运行器！Grunt CLI 的工作很简单：运行已安装在 Gruntfile 旁边的 Grunt 版本。这允许在同一台机器上同时安装多个版本的 Grunt。

在我看来，这比我必须卸载 nodejs 更简单、更省时

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-03-25T18:16:33.280

如果您有“非标准”安装，则需要使用以下命令找到节点 bin 位置：

```
npm config list 
```

然后将节点 bin 位置添加到您的`~/.bash_profile`

`export PATH=<yourNodeBinLocation>:$PATH`

记得打开一个新的终端来测试，或者`source ~/.bash_profile`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-06T12:36:31.070

在 Mac OS X 中，将下一行添加到您的 ~/.bash_profile

`export PATH="$HOME/.node/lib/node_modules/bower/bin:$PATH"`

并重新启动终端或键入：

`source ~/.bash_profile`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-04T23:09:52.663

如果你使用 Homebrew 以外的东西（是的，我们中的一些人实际上做得很奇怪）——比如 MacPorts，你`$PATH`可能会很时髦。二进制文件可能位于其他区域： `/opt/local/bin/grunt`并且可能`/opt/local/bin/npm`

此外，如果您使用 MacPorts 安装 npm，然后安装 bower，则二进制文件将不会位于您期望的位置。它实际上最终在您的主目录下`.npm/lib/node_modules/bower/bin`

您`$PATH`应该在 ~/.profile (Mac OS X) 中进行调整以添加： `$HOME/.npm/lib/node_modules/bower/bin`

获取您的 Bash 配置文件或打开一个新的终端窗口，它应该可以工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-26T10:17:19.173

我加了这个

```
export PATH=$HOME/.node/bin:$PATH 
```

在我的 .bash_profile 文件（位于用户文件夹中）的末尾（和新行）。保存。关闭并重新打开终端

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-07T22:37:42.807

截至 2016 年 9 月，来自[nodejs.org](https://nodejs.org/en/download/)的 .pkg 安装程序将已安装的包安排在 下`$HOME/.npm-packages/lib/node-modules`，符号链接位于`~/.npm-packages/bin`：

```
$ bower install
-bash: bower: command not found
$ which bower
$ export PATH=$PATH:~/.npm-packages/bin
$ which bower
/Users/dmoles/.npm-packages/bin/bower 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-27T02:26:08.387

如果以上所有方法都不起作用，或者您似乎不理解为问题提供的答案。

我建议您在系统命令提示符下运行安装命令，而不是 git-bash，尤其是在 Windows 8 或 7 上时。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-10T03:29:34.080

我的问题是在此处找到的 Homebrew/node/npm 错误 - [https://github.com/npm/npm/issues/3794](https://github.com/npm/npm/issues/3794)

如果您已经使用 Homebrew 安装了节点，请尝试：

```
npm update -gf 
```

或者，如果您想使用 Homebrew 安装节点并让 npm 工作，请使用：

```
brew install node --without-npm
curl -L https://npmjs.org/install.sh | sh 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-05T19:14:47.740

以 6.8 为单位

```
vi ~/.zshrc 
```

在下面添加三行

```
export PATH=$HOME/bin:/usr/local/bin:$PATH
export PATH=/usr/bin:/bin:/usr/sbin:/sbin:$PATH
export PATH=/usr/local/share/npm/bin:$PATH 
```

进而

```
exec /bin/zsh 
```

或者

```
exec /usr/bin/zsh 
```

只是工作

# java - java while循环

> ID：15846086
> 
> 赞同：0
> 
> 时间：2013-04-06T01:38:38.663
> 
> 标签：java, loops, while-loop

为什么以下会导致无限循环？

```
int sum = 0;
int k = 1;
while (sum < 12 || k < 4)
    sum = sum + k;
System.out.println(sum); 
```

为什么 sum 不会增加以停止 while 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:40:15.010

`sum`确实增加了，但`k`没有。您的条件使用`or`( `||`)，因此条件是`true`因为`k`总是小于 4。

# java - Android APK 尺寸大 - 如何保持自动更新尺寸小？

> ID：15846087
> 
> 赞同：1
> 
> 时间：2013-04-06T01:38:46.887
> 
> 标签：java, android, size, apk, auto-update

我目前为我的公司编写的 android 应用程序需要自动更新功能，该功能也可以通过蜂窝网络使用。因此 APK 必须尽可能小，以确保较小的更新大小。目前我的应用程序大小为 10MB，根据公司的说法，这太大了。我不能从项目中剥离任何库。不幸的是，我的应用程序使用了几个库，我担心这些库占据了 APK 的大部分大小。我建议只允许 WLAN 更新，但不幸的是公司不同意。

问题： 1\. 是否不能仅将补丁作为现有 APK 的更新传输，还是必须始终替换整个 APK？我的意思是补丁在PC端很常见。2.我可以不外部化库而不是将它们包含在APK中，以便更新只包含非库的东西吗？

注意：该应用将无法在 Play 商店中使用，因此需要编写自定义更新机制。

欢迎大家提出意见。

编辑：

使用

```
actionbarsherlock
"C:\Users\alex\workspace\mobile_service\libs\httpclient-4.2.1.jar"
"C:\Users\alex\workspace\mobile_service\libs\httpcore-4.2.1.jar"
"C:\Users\alex\workspace\mobile_service\libs\httpmime-4.2.1.jar"
"C:\Users\alex\workspace\mobile_service\libs\joda-time-2.1.jar"
"C:\Users\alex\workspace\mobile_service\libs\joda-time-2.1.jar.properties"
"C:\Users\alex\workspace\mobile_service\libs\mail.jar"
"C:\Users\alex\workspace\mobile_service\libs\ormlite-android-4.42.jar"
"C:\Users\alex\workspace\mobile_service\libs\ormlite-android-4.42.jar.properties"
"C:\Users\alex\workspace\mobile_service\libs\ormlite-core-4.42.jar"
"C:\Users\alex\workspace\mobile_service\libs\ormlite-core-4.42.jar.properties"
"C:\Users\alex\workspace\mobile_service\libs\reflections-0.9.5.jar"
"C:\Users\alex\workspace\mobile_service\libs\reflections-0.9.5-javadoc.jar"
"C:\Users\alex\workspace\mobile_service\libs\reflections-0.9.5-sources.jar"
"C:\Users\alex\workspace\mobile_service\libs\saripaar-11242012.jar"
"C:\Users\alex\workspace\mobile_service\libs\activation.jar"
"C:\Users\alex\workspace\mobile_service\libs\additionnal.jar"
"C:\Users\alex\workspace\mobile_service\libs\apache-mime4j-core-0.7.2.jar"
"C:\Users\alex\workspace\mobile_service\libs\commons-lang3-3.1.jar"
"C:\Users\alex\workspace\mobile_service\libs\gson-2.2.2.jar"
"C:\Users\alex\workspace\mobile_service\libs\guava-14.0-rc1.jar" 
```

# android - 如何使用定位服务检查用户相对于 Android 中某个位置的位置？

> ID：15846090
> 
> 赞同：1
> 
> 时间：2013-04-06T01:39:24.720
> 
> 标签：android, gps, android-location

我基本上是在创建一个登记服务，但它的意义是非常轻的。我只需要检查一次，以允许用户只有在该区域内才能访问应用程序的某些部分。不幸的是，GPS 有时（通常）永远无法完成加载，并且网络太不精确。我尝试使用 比较两个位置之间的距离`distanceTo`。它工作正常......当 GPS 工作时！但这意味着我受到 GPS 的摆布，无论如何它似乎永远无法在我的 Nexus 4 上运行。有人对尝试执行此操作有任何建议吗？

# c - 指针和数组需要帮助

> ID：15846098
> 
> 赞同：0
> 
> 时间：2013-04-06T01:40:45.210
> 
> 标签：c

好的，所以我正在编写一个程序，它从文件中读取输入并将它们放入数组中。我正在尝试将指针与数组一起使用，这样我就可以指向数组中的某个位置，并将用户定义的浮点数添加到已经存在的浮点数中。

到目前为止，这是我的代码：

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    int menu1();

    int main()
    {
        FILE * ifp = fopen("input2.txt","r"); //Open the input file
        int cars = 5, i , j, k; // Initialized cars and counters i, j, and k
        char *VIEW="VIEW", *BID="BID", *CLOSE="CLOSE", choice1[20]; //Initialize character arrays
        float START_BID[5]={0.00}, MIN_BID[5]={0.00}, CUR_BID[5]={0.00}, USR_BID[5]=0.00}; 
        int compareLimit = 100, selection=0;

        //Scan the file and appropriate the numbers into their respective arrays
        for (i = 0; i < cars; i++)
            {
                fscanf(ifp, "%f %f", &START_BID[i],&MIN_BID[i]);
            }

        printf("Welcome to the Silent Auction\n\n");
        menu1(); //Display the menu
        scanf("%s", &choice1); //

        int result = strncmp(choice1, VIEW, compareLimit); //Compare two strings
        if(result == 0)
        {
            selection = selection + 1;

        }

        int result2 = strncmp(choice1, BID, compareLimit); //Compare two strings
        if(result2 == 0)
        {
            selection = selection + 2;

        }

        int result3 = strncmp(choice1, CLOSE, compareLimit); //Compare two strings
        if(result3 == 0)
        {
            selection = selection + 3;
        }

        while (selection < 3)
    {
            if (selection == 1)
            {
                printf("Number\tCurrent Bid\tMinimum Increase\n");
                printf("1\t$%.2f\t\t$%.2f\n",CUR_BID[0], MIN_BID[0]);
                printf("2\t$%.2f\t\t$%.2f\n",CUR_BID[1], MIN_BID[1]);
                printf("3\t$%.2f\t\t$%.2f\n",CUR_BID[2], MIN_BID[2]);
                printf("4\t$%.2f\t\t$%.2f\n",CUR_BID[3], MIN_BID[3]);
                printf("5\t$%.2f\t\t$%.2f\n",CUR_BID[4], MIN_BID[4]);

                menu1();
                scanf("%s", &choice1);
            }

            else if (selection == 2)
            {
                int k;
                float usr_bid;

                printf("Which auction would you like to bid on? (1-5)\n");
                scanf("%d", k);

                if (CUR_BID[k - 1] = 0.00)
                    MIN_BID[k - 1] = START_BID[k - 1];
                else
                    MIN_BID[k - 1] = CUR_BID[k - 1] + MIN_BID[k - 1];

                printf("The minimum bid is %.2f\n", MIN_BID[k - 1]);
                printf("How much would you like to bid?\n");
                scanf("%f", usr_bid);

                if (usr_bid < MIN_BID[k-1])
                    printf("Sorry, that bid is not high enough.\n");
                else
                    CUR_BID[k - 1] = usr_bid + CUR_BID[k - 1];

                menu1();
                scanf("%s", &choice1);
            }

            else
            {
               int i;
               int auction = 1;

               for (i=0; i < cars; i++)
               {
                    for (auction = 1; auction < cars; auction++)
                    {
                        while (CUR_BID[i]!= 0.00)
                            printf("Auction %d sold for $%.2f", auction, CUR_BID);

                    }
               }
            }
    }

            fclose(ifp);

        return 0;
    }

    int menu1()
    {
        printf("Please make a selection (In all caps):\n");
        printf("\tView Auctions [VIEW]\n");
        printf("\tBid on an Auction [BID]\n");
        printf("\tClose Auctions [CLOSE]\n");

    } 
```

我的程序可以运行到 while 循环`else if (selection == 2)`。它问我想要哪场拍卖。当我给它一个数字时，它只是冻结，崩溃，并且除了`Process terminated with status -1073741510`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T01:50:13.103

您传递给 scanf() 的指针不正确。

改变：

```
 scanf("%d", k); 
```

至

```
 scanf("%d", &k); 
```

并改变：

```
scanf("%s", &choice1); // 
```

至

```
 scanf("%s", choice1); // 
```

在两个地方。

# ios - Sqlite 插入语句不会在 iOS 应用程序中添加记录

> ID：15846101
> 
> 赞同：1
> 
> 时间：2013-04-06T01:40:48.377
> 
> 标签：ios, objective-c, sqlite

我正在尝试为 SqlLite 数据库执行一个简单的硬编码插入语句。该代码有效，我从自己的 NSLog 中收到一条成功消息，但是，没有记录添加到数据库中。任何人都可以帮忙吗？谢谢！薇薇

```
-(void)addFavorites{
    const char *sqlInsert = "insert into rivers (stat_ID, stat_Name, state) values ('03186500','WILLIAMS RIVER','WA')";
    sqlite3_stmt *statement;

    sqlite3_prepare_v2(_database, sqlInsert, -1, &statement, NULL);
    if(sqlite3_step(statement) == SQLITE_DONE){
        NSLog(@"RECORD ADDED!");
    } else {
        NSLog(@"RECORD NOT ADDED!");
    }
    sqlite3_finalize(statement);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T04:43:11.670

您的应用程序委托中是否有这样的代码将数据库从包中复制到您的 NSDocuments 目录？确保将数据库复制到那里，然后在运行 sqlite3_open 时指向那里，而不是指向包。NSDocument 目录将在设备同步到 iTunes 或 iCloud 时保存，因此您希望数据库用于维护数据。

```
NSString *databaseName = @"MyDatabase.sqlite";  
NSArray *systemPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *libraryDirectory = [systemPaths objectAtIndex:0];
NSString *databaseFullPath = [libraryDirectory stringByAppendingFormat:@"%@%@",@"/",databaseName];

//copy the database to the file system if it hasn't been done yet.
NSFileManager *fileManager = [NSFileManager defaultManager];
BOOL exists = [fileManager fileExistsAtPath:databaseFullPath];
if(exists == NO)
{
    NSString *dbPathInBundle = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];
    [fileManager copyItemAtPath:dbPathInBundle toPath:databaseFullPath error:nil];
} 
```

# knockout.js - 如果值在外部发生变化，则未检测到淘汰赛可观察到的变化

> ID：15846103
> 
> 赞同：2
> 
> 时间：2013-04-06T01:41:01.670
> 
> 标签：knockout.js, observable

我有一个绑定到`ko.observableArray`.

我必须确保文本框的值不能为空，如果它是空白的，我会使用 jQuery 将值设置为 0`blur()`

问题是使用 jQuery 完成的值更改没有被淘汰注册。

**如何观察模型中的值变化？**

请参阅我的简化小提琴以了解要点 - [http://jsfiddle.net/k45gd/1/](http://jsfiddle.net/k45gd/1/)

**HTML**

```
<input type="number" data-bind="value: age" />
<span data-bind="text: age"></span>
<button data-bind="click: setAgeExternally">I want the label to change to 0</button> 
```

**JS**

```
var model = function() {
    this.age = ko.observable(21);

    //this code is outside of the model, this is oversimplification
    this.setAgeExternally = function(){
        $('input').val(0);
    }
};

ko.applyBindings(new model()); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-06T01:53:24.243

你需要两件事：

1.  使用 jQuery 更改元素的值后，需要让 Knockout 知道更新模型。您可以通过触发`change`事件来做到这一点：

    ```
    $('input').val(0).trigger('change'); 
    ```

2.  为了让 Knockout（3.1.0 之前）响应 jQuery 事件，它需要知道您正在使用 jQuery。为此，您必须在 Knockout 之前在文档中包含 jQuery。

这是你对这两个更新的小提琴：http: [//jsfiddle.net/mbest/k45gd/2/](http://jsfiddle.net/mbest/k45gd/2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T05:11:39.280

在您提供的示例中，您正在使用以下代码更新输入框：

```
this.setAgeExternally = function(){
    $('input').val(0);
} 
```

考虑到输入绑定到年龄属性，这样做会更简单：

```
this.setAgeExternally = function(){
  this.age(0);
} 
```

然而，即使这样也不是真的需要，因为年龄属性暴露在你的视图模型上。所以外部代码可以做到这一点，而 setAgeExternally 方法并不是真正需要的：

```
model.age(0); 
```

让我们回到您最初的问题 - 您描述但未发布代码的问题。您提到您有一个绑定到可观察数组的输入框列表。

使用 observable 数组时需要注意一个有趣的问题：

从[http://knockoutjs.com/documentation/observableArrays.html](http://knockoutjs.com/documentation/observableArrays.html)的文档中：

> 关键点：一个 observableArray 跟踪数组中有哪些对象，而不是那些对象的状态
> 
> 简单地将一个对象放入 observableArray 并不能使该对象的所有属性本身都可观察。当然，如果您愿意，您可以使这些属性可观察，但这是一个独立的选择。observableArray 只跟踪它持有的对象，并在添加或删除对象时通知侦听器。

鉴于您列出的要求，根本不需要 jQuery。您可以尝试以下三部分解决方案：

1.  让你的 observableArray 包含 observables。所以你最终会得到类似的东西：

    ```
    var model = function() {
      this.ages = ko.observableArray([
        {age: ko.observable(13)},
        {age: ko.observable(18)},
        {age: ko.observable(16)},
        {age: ko.observable(13)}
      ]);
    }; 
    ```

2.  接下来，创建一个敲除扩展器，如果为空，它会自动重置为 0

    ```
    ko.extenders.defaultIfBlank = function(target, defaultValue) {
      var result = ko.computed({
        read: target,  //always return the original observables value
        write: function(newValue) {
            if (newValue == "") {
              target(defaultValue);
            } else {
               target(newValue);
            }
        }
      });

      //initialize with current value to make sure it is not blank
      result(target());

      //return the new computed observable
      return result;
    }; 
    ```

3.  将扩展器应用于数组中的可观察对象

    ```
    var model = function() {
      this.ages = ko.observableArray([
        ko.observable(13).extend({defaultIfBlank: "0"}),
        ko.observable(18).extend({defaultIfBlank: "0"}),
        ko.observable(16).extend({defaultIfBlank: "0"}),
        ko.observable(13).extend({defaultIfBlank: "0"})
      ]);
    }; 
    ```

工作小提琴：http: [//jsfiddle.net/tlarson/GF3Xe/](http://jsfiddle.net/tlarson/GF3Xe/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T19:05:58.843

使用迈克尔最佳建议：

这是对我有用的代码：

```
function insertControlsAtcaret(element, addControlText){
    if (element.selectionStart || element.selectionStart == '0') {
        //For browsers like Firefox and Webkit based
        var startPos = element.selectionStart;
        var endPos = element.selectionEnd;
        var scrollTop = element.scrollTop;
        element.value = element.value.substring(0, startPos) + addControlText + element.value.substring(endPos, element.value.length);
        $(element).trigger("change");
        element.focus();
        element.selectionStart = startPos + addControlText.length;
        element.selectionEnd = startPos + addControlText.length;
        element.scrollTop = scrollTop;
    } else {
        element.value += addControlText;
        $(element).trigger("change");
        element.focus();
    }
}; 
```

Thx MB，节省了我的时间... :)

# ant - 我可以为 windows 和 unix 使用相同的 ant 构建文件吗

> ID：15846106
> 
> 赞同：2
> 
> 时间：2013-04-06T01:41:16.220
> 
> 标签：ant

我有 Windows 框的 ant 构建文件，我可以使用相同的构建文件在 Unix 上进行部署吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T01:56:33.567

获取所有文件名和依赖于操作系统的项目，并将它们放在具有相同键的属性文件中。使用`<condition>`任务加载正确的属性文件：

```
<target name="init-os">
    <condition property="os.windows">
        <os family="windows"/>
    </condition>
    <condition property="os.unix">
        <os family="unix"/>
    </condition>
</target>
<target name="init-windows-properties" depends="init-os" if="os.windows">
    <property file="windows.properties"/>
</target>
<target name="init-unix-properties" depends="init-os" if="os.unix">
    <property file="unix.properties"/>
</target>
<target name="init-properties" depends="init-windows-properties, init-unix-properties"/>
<target name="init-directories" depends="init-properties">
    <mkdir .../>
    <!-- More directories -->
</target>
<target name="init" depends="init-properties, init-directories"/> 
```

为您需要做的其余工作添加更多到“init”目标。

# android - 如何存储大量单词（由android应用程序访问）？

> ID：15846110
> 
> 赞同：0
> 
> 时间：2013-04-06T01:42:06.987
> 
> 标签：android, database, file-io, dictionary, indexing

我有一个单词列表（按字母顺序排列的 112,000 个）**，其中包含一个单词定义**。定义有时不止一个，格式如下：

词：定义1|定义2|...

一个单词的**最大定义数是 8**。

我需要一种方法将这些存储在一个文件中（或者更多是可以的），以便它们可以被一个 android 应用程序访问。一次只能访问一个单词。这个列表永远不会改变。

考虑到**SQLite**，我如何将大数据插入数据库？

考虑到**RandomAccessFile**，我将如何为这些单词创建索引？

还有其他方法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T02:10:27.303

我建议您使用 SQLite，因为它可以在需要时轻松获取数据，并且从特定位置获取/日期/更新数据也很容易。

另一个好处是您也可以使用 GUI 工具准备 SQLite 数据库。

现在按照以下步骤使用**现有 SQLite 数据库**，这意味着您将准备好包含单词数据的数据库：

1.  像在 .NET 中一样准备 SQLite 数据库，在这里您可以使用最好的工具**SQLite Manager**之一来准备它，您可以将其作为 Mozilla Firefox 中的工具/插件下载。

2.  完成数据库后，只需将其粘贴到`assets`文件夹中。

3.  现在编写代码将数据库从`assets`文件夹复制到我们的应用程序中。网络上有很多相同的示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T02:34:55.767

使用 sqlite DB，存储 112,000 或更多对于 sqlite 来说根本不是问题。您可以使用您的数据库架构，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/iai9X.png)

每个 word 可以有多个 wordId -> meanId 条目。

对于预存储数据，您可以使用我在我的博客中提供的教程：[Using Pre-populated sqlite database in android](http://theprogrammersvicodin.blogspot.in/2011/11/using-static-database-with-android.html)

# java - 如何使用 HTML5 数据属性获取会话属性

> ID：15846113
> 
> 赞同：0
> 
> 时间：2013-04-06T01:42:41.080
> 
> 标签：java, javascript, html, dom

我是 Java EE 和 HTML5 前端的新手。我读过您可以使用 data 属性来读取 DOM。您将如何正确使用它来获取已由 java.xml 设置的会话属性。与使用隐藏输入等其他方法相比。

```
<input id="sid" type="hidden" name="series" value="${sessionScope.series} />

var sid = document.getElementById("sid"), series; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:46:46.627

使用这样的东西：

```
<div id="div1" data-special-value="${sessionScope.series}"></div> 
```

并获取如下属性值：

```
document.getElementById("div1").getAttribute("data-special-value") 
```

甚至（[http://caniuse.com/dataset](http://caniuse.com/dataset)）：

```
document.getElementById("div1").dataset("special-value") 
```

或者使用 jQuery：

```
$("#div1").attr("data-special-value")
// or
$("#div1").data("special-value") 
```

虽然我不确定在元素上存储会话值是否正确。这绝对没有错，我只是想知道您在会话中需要/使用它做什么。会话出现一次。

这些`data-*`属性在将相关数据存储到某物时更有用。例如，如果您遍历一堆数据库记录并打印它们的列，但还想存储该行的数据库`id`一次，您可以使用：

```
<c:forEach items="${rows}" var="row">
    <tr data-row-id="${row.id}">
        <td>${row.name}</td>
        <td>${row.description}</td>
    </tr>
</c:forEach> 
```

然后，如果您想获取原始`row.id`值，则将其存储在一个位置，其中包含与它相关的所有内容（列）。这通常是我使用`data-*`属性的方式/位置。当然，这有很多想法/用途。

# c++ - 如何使用内部类的类型初始化模板类中的静态字段

> ID：15846114
> 
> 赞同：0
> 
> 时间：2013-04-06T01:42:49.787
> 
> 标签：c++, templates, static-initialization

我有这样的东西

```
template <class T>
class Outer {
    public: class Inner;

    static Inner* x;

    //...

    class Inner {
        //...
    };
};

// Not working
template <class T>
Outer<T>::Inner* Outer<T>::x = NULL; 
```

我得到的错误说：`:16: error: expected constructor, destructor, or type conversion before ‘*’ token`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:51:33.563

```
template<class T>
class Outer {
public: 

    class Inner;

    static Inner* x;

    //...

    class Inner {
        //...
    };
};

template<class T>
typename Outer<T>::Inner *Outer<T>::x = NULL; 
```

1.  至于`typename`和`class`，请参考[模板中关键字'typename'和'class'的C++区别](https://stackoverflow.com/questions/2023977/c-difference-of-keywords-typename-and-class-in-templates)

2.  为什么会这样，请参考[模板中依赖类型的问题](https://stackoverflow.com/questions/2931345/c-trouble-with-dependent-types-in-templates)

# r - 使用 r 进行数据处理

> ID：15846117
> 
> 赞同：1
> 
> 时间：2013-04-06T01:43:38.240
> 
> 标签：r

我有一个包含几列的文件 .ped，我想从中提取信息。这是我的数据示例（没有标题）：

```
1  1  1 
1  2  1
2  3  2
3  4  1
3  5  2
... 
```

第一列表示 ID 家族，第二列表示 ID 个人，第三列表示个人性别。

我将表格读取为数据框

```
ped <- read.table("pedigree.ped", header=FALSE) 
```

我如何计算存在的家庭数量（一个家庭可以出现不止一次，我想将它们视为一个家庭）？我有一个性别列，其中 1 指定男性和 2 女性，我怎样才能得到数据集中男性和女性的分布？

我是 R 的新手，如果你能提供一些代码！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T01:49:18.850

由于您是 R 新手，我建议您先研究一下 excel。您要求的操作相当简单，可以在 excel 中完成。

如果您想使用 R，请查看 data.frame 索引、子集等。

如果您熟悉 SQL，请查看[sqldf 包](http://cran.r-project.org/web/packages/sqldf/index.html)

家庭数量：

```
numFamilies <- length(unique(ped[,1])) 
```

男女人数：

```
numMales <- sum(ped[,3] == 1)
numFemales <- sum(ped[,3] == 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T02:14:45.677

尝试使用它来探索数据：

```
For family:
table(ped[,1])

For sex: 
table(ped[,3]) 
```

# html - 使用 ModelForms 在 django 中上传文件

> ID：15846120
> 
> 赞同：4
> 
> 时间：2013-04-06T01:44:06.820
> 
> 标签：html, django, django-models, django-forms, django-views

我已经在这个项目上苦苦挣扎了好几个小时，只是不知道如何创建一个简单的文件上传应用程序。我查看了所有教程，但没有一个完全适用于我的情况，我只是无法正确获取代码。我知道此时我拥有的代码不会运行，但我希望有人能够用我拥有的东西将我推向正确的方向。我知道这不是很好，但我很沮丧，我希望有人能帮助我，尤其是我的意见。py 非常感谢。先感谢您！

**模型.py**

```
from django.db import models
from django.contrib.auth.models import User
from django.forms import ModelForm

class WorkSheet(models.Model):
    worksheet_name = models.CharField(max_length= 150, default = True)
    creator = models.ForeignKey(User, default = True)
    worksheet_file = models.FileField(upload_to = 'worksheets', default = True)
    number_of_stars = models.PositiveIntegerField(default = True)
    category = models.CharField(max_length = 100, default = 0)

class UploadWorkSheetForm(ModelForm):
    class Meta:
        model = WorkSheet 
```

**视图.py**

```
from django.shortcuts import render, render_to_response, HttpResponseRedirect
from django.conf import settings
from django import http

from models import WorkSheet
from forms import UploadWorkSheetForm

def upload(request):
    template = 'upload.html'
    if request.method == 'POST':
        if 'file' in request.FILES:
            file = request.FILES['file']
            filename = file['filename']
            fd = open('%s/%s' % (settings.MEDIA_ROOT, filename), 'wb')
            fd.write(file['content'])
            fd.close()

            return http.HttpResponseRedirect('upload_success.html')
    else:
        form = UploadWorkSheetForm()
        return render_to_response(template, {'form': form})

    return render(request, 'upload.html', {'form': form}) 
```

**上传.html**

```
<!DOCTYPE html>
<html>
<head>
    <title>WSD Upload</title>
</head>
<body>
<h1>Upload WorkSheet</h1>
{% block body %}
<form action="." method="post" enctype="multipart/form-data"> {{ form }}
    <type="submit" value = "Upload"/>
</form>
{% endblock %}
</body>
</html> 
```

如果您还有什么需要请告诉我。谢谢你，谢谢你，谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T02:38:55.807

视图.py

```
def upload(request):
    template = 'upload.html'
    if request.method == 'POST':
        form = UploadWorkSheetForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()

            return HttpResponseRedirect('upload_success.html') <---change this to your valid url not template name
    else:
        form = UploadWorkSheetForm()

    return render(request, 'upload.html', {'form': form}) 
```

模板

```
...................        
{% block body %}
<form action="." method="post" enctype="multipart/form-data"> 
    {% csrf_token %}    
    {{ form.as_p }}
    <input type="submit" value = "Upload"/>
</form>
{% endblock %}
.................... 
```

# java - Java - 向类添加参数

> ID：15846121
> 
> 赞同：2
> 
> 时间：2013-04-06T01:44:08.297
> 
> 标签：java, class, parameters

我试图在类的声明中添加一个参数。

这是声明：

```
public static class TCP_Ping implements Runnable {

    public void run() {
    }

} 
```

这就是我想要做的：

```
public static class TCP_Ping(int a, String b) implements Runnable {

    public void run() {
    }

} 
```

（这不起作用）

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T01:46:29.113

您可能想要声明字段，并在构造函数中获取参数的值，并将参数保存到字段中：

```
public static class TCP_Ping implements Runnable {
  // these are the fields:
  private final int a;
  private final String b;

  // this is the constructor, that takes parameters
  public TCP_Ping(final int a, final String b) {
    // here you save the parameters to the fields
    this.a = a;
    this.b = b;
  }

  // and here (or in any other method you create) you can use the fields:
  @Override public void run() {
    System.out.println("a: " + a);
    System.out.println("b: " + b);
  }
} 
```

然后你可以像这样创建你的类的一个实例：

```
TCP_Ping ping = new TCP_Ping(5, "www.google.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:46:44.160

使用斯卡拉！很好地支持了这一点。

```
class TCP_Ping(a: Int, b: String) extends Runnable {
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T01:48:50.680

您不能在类标题上声明具体参数（有*类型参数*之类的东西，但这不是您所需要的）。您应该在类构造函数中声明您的参数，然后：

```
 private int a;
  private String b;

  public TCP_Ping(int a, String b) {
    this.a = a;
    this.b = b;
  } 
```

# javascript - 基于Rails中的用户选择获取数据库记录

> ID：15846124
> 
> 赞同：0
> 
> 时间：2013-04-06T01:44:51.370
> 
> 标签：javascript, ruby-on-rails, database, forms, selection

我有一个充满值的“房间类型”表，我想这样当用户从 collection_select 中选择房间类型时，表单的其余部分会使用该房间类型的值进行更新，我可以检测到选择何时更改通过 $('#room_roomtype_id').change 使用 javascript 并通过 $('#room_roomtype_id :selected').text() 选择了哪种房间类型，但我不知道，而且我的搜索时间是徒劳的，那么如何使用房间类型表中的数据更新其他表单字段。

这是我的表单代码：

```
<%= form_for @room do |f| %>
        <% if @room.errors.any? %>
            <div class="error_messages">
                <h2>Form is invalid</h2>
                <ul>
                    <% for message in @room.errors.full_messages %>
                        <li><%= message %></li>
                    <% end %>
                </ul>
            </div>
        <% end %>

        <p id="roomtypes", data-url="<%= url_for :controller => 'rooms', :action => 'roomtypeupdate' %>">
            <%= f.label :roomtype_id, "Room type" %><br />
            <%= f.collection_select :roomtype_id, Roomtype.order(:name), :id, :name, include_blank: true %>
        </p>
        <p>
            <%= f.label :number, "Room number" %><br />
            <%= f.text_field :number %>
        </p>
        <p>
            <%= f.label :maxcap, "Capacity" %><br />
            <%= f.number_field :maxcap %>
        </p>
        <p>
            <%= f.label :size, "Size" %><br />
            <%= f.number_field :size %>
        </p>
        <p>
            <%= f.label :description, "Description" %><br />
            <%= f.text_area :description %>
        </p>
        <p>
            <%= f.label :singlebeds, "Number of single beds" %><br />
            <%= f.number_field :singlebeds %>
        </p>
        <p>
            <%= f.label :bathrooms, "Number of bathrooms" %><br />
            <%= f.number_field :bathrooms %>
        </p>
        <br />

        <p class="button"><%= f.submit %></p>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:48:19.613

像这样的东西应该工作：

```
$('#room_roomtype_id').on('change', function () {

    // URL for the sake of example - yours will differ
    $.get('/rooms/' + this.value + '.json', function (response) {

    // dummy response for the sake of example
    response = {
        "number": "5A",
        "maxcap": "10"
    };

    $.each(response, function (key, value) {
        $('[name="room[' + key + ']"]').val(value);
    });
}); 
```

# python - 当前几个值很特殊时，循环遍历迭代器的 Pythonic 方法是什么？

> ID：15846126
> 
> 赞同：1
> 
> 时间：2013-04-06T01:45:05.827
> 
> 标签：python

标准是：

```
it = iter(sequence)
for value in it:
    print value 
```

我正在使用第三方库，它返回一个迭代器，第一个值是标头，第二个值是元数据，其余值是记录。我试过类似的东西：

```
db = dbfreader(f)
headers = db.next()
spec =  db.next()
record = db.next()
while record:
    print record
    record = db.next() 
```

但这会导致 StopIteration 错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T01:51:39.520

第一条记录并不特别，它只是所有记录中的第一条，所以没有理由提前阅读它。

```
db = dbfreader(f)
headers = db.next()
spec =  db.next()
for record in db:
    print record 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:50:15.393

> 标准方法是：

```
it = iter(sequence)
for value in it:
    print value 
```

不需要调用`iter`这里，它在循环中隐式完成：

```
for value in sequence:
    print value 
```

最终，`iter(obj)`回报`obj.__iter__()`。当你开始一个 for 循环时，它会被隐式调用：

```
for elem in x: 
```

隐含地

```
for elem in iter(x): 
```

然后，在循环中，python 调用`next`返回的可迭代对象`iter(obj)`以获取各种`elem`s 直到`next`引发 a `Stopiteration`。

**所以你的循环可以写成：**

```
while True:
    print record
    try:
        record = next(db)
    except StopIteration:
        break 
```

或者更简洁和惯用（只要`iter(db)`返回`db`非常典型）：

```
for record in db:
    print record 
```

* * *

通常，您可以使用该函数从可迭代对象中获取下一个值`next`——但该对象需要有一个`next`方法（或`__next__`在 python3.x 上）。如果它是一个序列，在这种情况下您可能需要先调用`iter`该对象：

```
>>> obj = ['header','header2','record1']
>>> next(obj)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: list object is not an iterator
>>> iobj = iter(obj)
>>> next(iobj)
'header'
>>> next(iobj)
'header2'
>>> for x in iobj:
...    print x
... 
record1 
```

* * *

请注意，您*可以*通过提供要返回的第二个参数而不是 raise来抑制 a`StopIteration`被引发：`next``StopIteration`

```
>>> next(iter([]))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration
>>> next(iter([]),"Hello!")
'Hello!' 
```

看到这个，我们发现你也可以写你的循环：

```
while record:
    print record
    record = next(db,False) 
```

但是`for`对于大多数对象来说，循环绝对是最干净的方法。

# google-maps-api-3 - Google Maps API v3 polyLine 事件移除

> ID：15846129
> 
> 赞同：-1
> 
> 时间：2013-04-06T01:46:07.070
> 
> 标签：google-maps-api-3

我想删除 Google maps API v3 中折线的所有 mouseover 和 mouseclick 事件我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:36:39.330

[`google.maps.event.clearListeners()`](https://developers.google.com/maps/documentation/javascript/reference?hl=en#event)是您必须使用的方法，它会删除给定实例上特定事件的所有侦听器。

# php - 创建论坛 - 通过 HTML/PHP 调整图像的 HTML 大小？

> ID：15846133
> 
> 赞同：0
> 
> 时间：2013-04-06T01:46:19.570
> 
> 标签：php, html

这可能很难描述……但是……

我创建了一些简单的 PHP 论坛，我可以让用户发布图片链接，并且我希望图片出现在页面上。但是...我的论坛帖子在 iframe 内，如果帖子的宽度太宽，它会切断侧面，所以我希望图像只有这么宽。使图像适合的任何概念？我想知道 HTML 中是否有一些自动调整大小选项或 PHP 远程获取文件宽度/高度并为其生成 HTML 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T01:50:27.940

您可以`max-width`在 css 中使用该属性，例如：

```
iframe img{max-width: 500px;}/*or whatever your max wants to be*/ 
```

在php中你可以使用

```
<?php
    list($width, $height) = getimagesize($yourfilename); 
```

你可能需要包装`getimagesize`一个 if 因为它会导致它在失败时返回 false

# php - php switch 我做错了吗？

> ID：15846138
> 
> 赞同：0
> 
> 时间：2013-04-06T01:47:00.713
> 
> 标签：php, switch-statement

我正在尝试在 1 个文件中创建多个页面，我有这个

```
<?

switch($action){
    case "add":
       add();
       break;
    default:
       hello();
       break;
}

function add() {

    echo "hello";
}

function hello() {

    echo "hello1";
}
?> 
```

但是当我到达时，`****.php?action=add`我仍然得到“hello1”

我做错了什么到我打招呼的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:49:01.990

`$_GET['action']`而是打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:54:53.907

```
 <?php

       $action=  $_GET['action']
       //$_REQUEST, by default, contains the contents of $_GET, $_POST and $_COOKIE. 
       // $action=  $_REQUEST['action']; 
        switch($action){
            case "add":
               add();
               break;
            default:
               hello();
               break;
        }

        function add() {

            echo "hello";
        }

        function hello() {

            echo "hello1";
        }
        ?> 
```

# mongodb - 将大文件和数据导入 MongoDB 的内存高效方法？

> ID：15846146
> 
> 赞同：4
> 
> 时间：2013-04-06T01:47:42.410
> 
> 标签：mongodb, memory-management, mongoimport, database, nosql

在最近尝试了 MongoDB 之后，我尝试了几种不同的方法来将大量数据导入/插入到集合中。到目前为止，我发现的最有效的方法是 mongoimport。它工作得很好，但仍然有开销。即使在导入完成后，除非我重新启动机器，否则内存仍不可用。

例子：

```
mongoimport -d flightdata -c trajectory_data --type csv --file trjdata.csv --headerline 
```

我的标题和数据如下所示：

```
'FID','ACID','FLIGHT_INDEX','ORIG_INDEX','ORIG_TIME','CUR_LAT', ...
'20..','J5','79977,'79977','20110116:15:53:11','1967', ... 
```

有 530 万行乘 20 列，大约 900MB，我最终是这样的：

![高架](https://i.stack.imgur.com/1iaf4.png)

从长远来看，这对我不起作用；我可能并不总是能够重新启动，或者最终会耗尽内存。导入 MongoDB 的更有效方法是什么？我已经阅读了有关定期 RAM 刷新的信息，我该如何实现与上面的示例类似的内容？

**更新：** 我认为我的案例不会从调整 fsync、syncdelay 或日志中受益匪浅。我只是好奇什么时候这是一个好主意和最佳实践，即使我在高 RAM 服务器上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T05:06:02.227

我猜想mongodb本身正在使用内存，而不是mongoimport。Mongodb 在设计上试图将其所有数据保存在内存中，并在没有足够空间时依赖操作系统来交换内存映射文件。所以我给你两条建议：

1.  不要太担心你的操作系统告诉你有多少内存是“空闲的”——一个运行良好的现代操作系统通常会使用所有可用的 RAM。

2.  如果您不能遵守 #1，请不要在笔记本电脑上运行 mongodb。

# qt - QProcess 无缘无故死亡

> ID：15846148
> 
> 赞同：2
> 
> 时间：2013-04-06T01:48:11.110
> 
> 标签：qt, pipe, qprocess

在编写一个看似简单的 Qt 应用程序部分，该部分将运行一个子进程并从其标准输出中读取数据时，我偶然发现了一个让我非常困惑的问题。应用程序应该从子进程中读取数据块（原始视频帧）并在它们到达时对其进行处理：

1.  启动一个 QProcess
2.  收集数据直到有足够的一帧
3.  处理帧
4.  返回步骤 2

这个想法是使用信号和槽来实现处理循环——这在我下面提供的简单、精简的示例中可能看起来很愚蠢，但在原始应用程序的框架内似乎完全合理。所以我们开始：

```
app::app() {
  process.start("cat /dev/zero");
  buffer = new char[frameLength];
  connect(this, SIGNAL(wantNewFrame()), SLOT(readFrame()), Qt::QueuedConnection);
  connect(this, SIGNAL(frameReady()), SLOT(frameHandler()), Qt::QueuedConnection);
  emit wantNewFrame();
} 
```

我从这里开始一个简单的过程 ( `cat /dev/zero`)，这样我们就可以确信它不会耗尽数据。我还做了两个连接：一个在需要帧时开始读取，另一个在帧到达时调用数据处理函数。请注意，这个简单的示例在单个线程中运行，因此将连接设为排队类型以避免无限递归。该`wantNewFrame()`信号启动第一帧的采集；它在控件返回事件循环时得到处理。

```
bool app::readFrame() {
  qint64 bytesNeeded = frameLength;
  qint64 bytesRead = 0;
  char* ptr = buffer;
  while (bytesNeeded > 0) {
    process.waitForReadyRead();
    bytesRead = process.read(ptr, bytesNeeded);
    if (bytesRead == -1) {
      qDebug() << "process state" << process.state();
      qDebug() << "process error" << process.error();
      qDebug() << "QIODevice error" << process.errorString();
      QCoreApplication::quit();
      break;
    }
    ptr += bytesRead;
    bytesNeeded -= bytesRead;
  }
  if (bytesNeeded == 0) {
    emit frameReady();
    return true;
  } else
    return false;
} 
```

读取帧：基本上，我只是在数据到达时将其填充到缓冲区中。最后的`frameReady()`信号表明帧已准备好，进而导致数据处理功能运行。

```
void app::frameHandler() {
  static qint64 frameno = 0;
  qDebug() << "frame" << frameno++;
  emit wantNewFrame();
} 
```

一个简单的数据处理器：它只计算帧数。完成后，它发出`wantNewFrame()`重新开始读取周期。

就是这个。为了完整起见，我还将在此处发布头文件和 main()。

应用程序.h：

```
#include <QDebug>
#include <QCoreApplication>
#include <QProcess>

class app : public QObject
{
Q_OBJECT
public:
  app();
  ~app() { delete[] buffer; }

signals:
  void wantNewFrame();
  void frameReady();

public slots:
  bool readFrame();
  void frameHandler();

private:
  static const quint64 frameLength = 614400;
  QProcess process;
  char* buffer;
}; 
```

主.cpp：

```
#include "app.h"

int main(int argc, char** argv)
{
    QCoreApplication coreapp(argc, argv);
    app foo;
    return coreapp.exec();
} 
```

现在是奇怪的部分。该程序可以很好地处理随机数量的帧（我见过从 15 到 1000 多个），但最终停止并抱怨 QProcess 崩溃了：

```
$ ./app
frame 1
...
frame 245 
frame 246 
frame 247 
process state 0 
process error 1 
QIODevice error "Process crashed" 
```

进程状态 0 表示“未运行”，进程错误 1 ​​表示“崩溃”。我对其进行了调查，发现子进程收到了一个 SIGPIPE——即父进程已经关闭了它的管道。但我*完全不*知道发生这种情况的地点和原因。还有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:59:16.560

代码看起来有点奇怪（不使用`readyRead`信号，而是依赖延迟的信号/插槽）。正如您在讨论中指出的那样，您已经[在 qt-interest ML 上](http://lists.qt.nokia.com/public/qt-interest/2009-May/006354.html)看到了我询问类似问题的线程。我刚刚意识到我`QueuedConnection`当时也使用过。我无法解释为什么它是错误的——在我看来，排队的信号“应该起作用”。一个盲点是`invokeMethod`Qt 的实现所使用的 以某种方式与您的信号传递竞争，以便您在 Qt 有机会处理数据之前清空您的读取缓冲区。这意味着 Qt 最终将读取零字节并（正确地）将其解释为`EOF`，关闭管道。

我再也找不到引用的“Qt 任务 217111”了，但是在他们的 Jira 中有一些关于`waitForReadyRead`无法按用户期望工作的报告，例如[QTBUG-9529](https://bugreports.qt-project.org/browse/QTBUG-9529)。

我会把它带到 Qt 的“兴趣”邮件列表中，并远离`waitFor...`方法系列。我同意他们的文档值得更新。

# node.js - 节点导出“类型错误：对象# has no method 'init'" I'm having a strange issue, possabily a really noob one, but for the life of me I can't get node module.exports to work for me. Here is my route (routes/about.js) var A 问问题 问问题 2013-04-06T01:49:04.040 2140 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm having a strange issue, possabily a really noob one, but for the life of me I can't get node module.exports to work for me. Here is my route (routes/about.js) var About = (function () { function About() { this.init(); } About.prototype.init = function () { console.log('init'); }; About.prototype.me = function (req, res) { this.init(); res.json([ 'jamie was here' ]); }; return About; })(); module.exports = About; and my app.js /** * Module dependencies. */ var express = require('express') , routes = require('./routes') , about = require('./routes/about') , http = require('http') , path = require('path'); var app = express(); about = new about; console.log(about); // all environments app.set('port', process.env.PORT || 3000); app.set('views', __dirname + '/views'); app.set('view engine', 'jade'); app.use(express.favicon()); app.use(express.logger('dev')); app.use(express.bodyParser()); app.use(express.methodOverride()); app.use(app.router); app.use(express.static(path.join(__dirname, 'public'))); // development only if ('development' == app.get('env')) { app.use(express.errorHandler()); } app.get('/', routes.index); app.get('/me/?', about.me); http.createServer(app).listen(app.get('port'), function(){ console.log('Express server listening on port ' + app.get('port')); }); When about.me is called, i get a "TypeError: Object # has no method 'init'" error... Any help would be greatly appreciated! I've just worked it out! Stupid mistake. I'm passing a reference to the me function, not the object itself. No wonder why it doesn't exist! node.js 4 1 回答 1 This answer is useful -1 我刚刚解决了！愚蠢的错误。 我正在传递对 me 函数的引用，而不是对象本身。难怪它为什么不存在！ 于 2013-04-07T04:40:25.913 回答 Related 1 java - 自动登录到站点 1 ios - 图片文件扩展名 Xcode 3 javascript - 强制砌体/类似物忽略流动并填充间隙 1 angularjs - 如何使用 angular.js-resource 启用 cors 请求 2 c# - 在不访问 IIS 的情况下部署 REST 服务 4 iphone - 两个选项栏按钮项 4 java - 为什么我不能推入堆栈？Java 6 泛型 1 google-apps-script - 根据单元格中的第一个字符隐藏 Google 电子表格中的行 1 oracle - TNS：无法解析指定的连接标识符 2 cordova - 如何使用 Phonegap 和 html5 框架（如 Sencha Touch）在为 Black Berry OS 6.0 开发的应用程序中实现推送通知 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15846154
> 
> 赞同：0
> 
> 时间：
> 
> 标签：node.js

I'm having a strange issue, possabily a really noob one, but for the life of me I can't get node module.exports to work for me.

Here is my route (routes/about.js)

```
var About = (function () {
    function About() {
        this.init();
    }
    About.prototype.init = function () {
        console.log('init');
    };
    About.prototype.me = function (req, res) {
        this.init();
        res.json([
            'jamie was here'
        ]);
    };
    return About;
})();

module.exports = About; 
```

and my app.js

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , about = require('./routes/about')
  , http = require('http')
  , path = require('path');

var app = express();
about = new about;
console.log(about);
// all environments
app.set('port', process.env.PORT || 3000);
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');
app.use(express.favicon());
app.use(express.logger('dev'));
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(app.router);
app.use(express.static(path.join(__dirname, 'public')));

// development only
if ('development' == app.get('env')) {
  app.use(express.errorHandler());
}

app.get('/', routes.index);
app.get('/me/?', about.me);
http.createServer(app).listen(app.get('port'), function(){
  console.log('Express server listening on port ' + app.get('port'));
}); 
```

When about.me is called, i get a "TypeError: Object # has no method 'init'" error...

Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-07T04:40:25.913

我刚刚解决了！愚蠢的错误。

我正在传递对 me 函数的引用，而不是对象本身。难怪它为什么不存在！

# php - 在下一页获取 POST mysql 数据

> ID：15846177
> 
> 赞同：0
> 
> 时间：2013-04-06T01:52:58.107
> 
> 标签：php, html, mysql

好吧，我还没有做太多这类事情，所以我现在一无所知。

在第一页上，您点击生成一堆信息/东西的表单提交并将其显示在提交按钮下方，但我不知道如何获取显示的信息并在下一页使用它我将展示我的一些代码. 顺便说一句，我知道代码很糟糕，请忽略这个事实。

```
<form name="input" action="slaymonster.php" method="post" id="id">
  <div align="center">
    <input name="Submit" id="Submit" type="submit" class="button" value="Explore Map!"/>
  </div>
</form> 

if (isset($_POST['Submit'])) {

include 'includes/mapstuff.php';

// So here we pick a random row from the table pokemon notice the order by rand
$sql23 = "SELECT * FROM map1pokemon ORDER BY RAND() LIMIT 1;";
// We then check for errors
$result23 = mysql_query($sql23) or die(mysql_error());
// we then make the result into a virable called battle_get23
$battle_get23 = mysql_fetch_array($result23);

$sql2 = "SELECT * FROM pokemon WHERE name='".$battle_get23['pokemon']."'";
$result2 = mysql_query($sql2) or die(mysql_error());
$battle_get2 = mysql_fetch_array($result2);

// Now we need to make sure the image is safe be for we use it
$pic2= mysql_real_escape_string($battle_get2['pic']);
$pic = strip_tags($pic2);

include 'includes/maptypes.php';

?>

<form name="inputt" action="" method="post">
  <div align="center">
    <input type="submit" class="catch" value="Catch Pokemon" name="catch">
  </div>
</form>

<p></p>

<?php
echo "You have just found a " ;
echo $randomview97[0];
echo " ";

echo $battle_get23['pokemon'];

$_SESSION['pokemon'] = $battle_get23['pokemon']; 
$_SESSION['type'] = $randomview97[0];
$_SESSION['pic'] = $battle_get2;
$_SESSION['money'] = $randomview2[0];
$_SESSION['level'] = $randomview3[0];
$_SESSION['ticket'] = $randomview4;

?>
<p></p>
<?php
echo "You have gained ".$randomview3[0]." levels" ;
echo " ";
?>
<p></p>
<?php
echo "You have received $".$randomview2[0]."" ;
echo " ";
?>
<p></p>
<?php
echo "</center>";
}

?> 
```

它显示了口袋妖怪的图片它的名字，类型，你得到的金额等等......

我需要所有这些信息才能在下一页上使用。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:04:37.757

如果您想将信息从一页传递到另一页。您必须将结果放在表单标签中。然后可以将信息传递到另一个页面。或者您可以将其放在会话中并从任何页面获取信息。

你明白我的意思了吗？如果你解释你想做什么。那我就为你做点什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:05:46.873

在 PHP 代码的顶部，确保包含 session_start(); 您已经在使用会话变量，因此您应该参考这里以了解 PHP 会话是什么：[PHP session_start() - 手册](http://php.net/manual/en/function.session-start.php)。它确保完全按照您的要求进行（有人可能会指出，在某些情况下 session_start(); 不是必需的，但出于您的目的，在学习时，请遵守手册以获得最佳实践）

正如手册所描述的那样，此信息将在下一个“页面”上可用，并且将可用，直到您调用类似 session_destroy() 之类的东西。

# vim - 命令模式下 Ctrl+W 删除直到空格而不是删除一个单词

> ID：15846179
> 
> 赞同：0
> 
> 时间：2013-04-06T01:53:16.147
> 
> 标签：vim

当我`<c-w>`在命令模式下使用删除一个单词时，整个 WORD 直到最后一个空格被删除。例如：

```
:e /var/www/hello 
```

如果我按`<c-w>`，它就会离开

```
:e 
```

我预计它会离开

```
:e /var/www/ 
```

此问题仅与我保存的一个会话有关。我想我不小心更改了一个我不想更改的选项，它被保存在会话中。`<c-w>`定义命令模式下行为的选项是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T02:12:50.230

假设你没有`<c-w>`映射到其他东西，[`<c-w>`](http://vimdoc.sourceforge.net/htmldoc/cmdline.html#c_CTRL-W)受[`iskeyword`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27iskeyword%27)设置的影响。我的设置为`iskeyword=@,48-57,_,192-255`，并按`<c-w>`预期工作。

# php - 处理 PHP 表单时出现未知错误？

> ID：15846183
> 
> 赞同：1
> 
> 时间：2013-04-06T01:55:53.153
> 
> 标签：php, forms

下面是带有输入/输出的简单表单的代码。出于某种原因，似乎只有问题 1 有效，问题 2 和 3 只是简单地回应“出了点问题”。我以完全相同的方式对所有三个问题进行了编码，所以我不确定为什么问题二和三没有正确处理。任何建议将不胜感激。

这是 HTML 表单：

```
 <form action="processor.php" method="post">
      <h4>Question # 1</h4>
      <p>What grade are you in?</p>
      <label class="checkbox"><input type="checkbox" name="grade" value="1"> Freshmen</label>
      <label class="checkbox"><input type="checkbox" name="grade" value="2"> Sophomore</label>
      <label class="checkbox"><input type="checkbox" name="grade" value="3"> Junior</label>
      <label class="checkbox"><input type="checkbox" name="grade" value="4"> Senior</label>

      <h4>Question # 2</h4>
      <p>What is your current GPA?</p>
      <select>
      <option name="gpa" value="4">3.5 or above</option>
      <option name="gpa" value="3">3.0-3.4</option>
      <option name="gpa" value="2">2.5-2.9</option>
      <option name="gpa" value="1">2.0-2.4</option>
      <option>Lower</option>
      </select>

      <h4>Question # 3</h4>
      <p>Where do you excel the most academically?</p>
      <select multiple="multiple">
      <option name="school" value ="1">Mathematics</option>
      <option name="school" value ="2">Literature</option>
      <option name="school" value ="3">History</option>
      <option name="school" value ="4">Humanities</option>
      <option name="school" value ="5">Science</option>
      </select>
      <div class="button">
      <button class="btn btn-primary" input type="submit" name="submit" href="processor.php">Submit</button>
      </div>
      </form> 
```

这是处理器：

```
 <?php

 function Grades () {
 $grade = $_POST['grade'];
 if ($grade =="1") {
 echo "You're a freshmen";
 } elseif ($grade == "2") {
echo "You're a sophomore";
 } elseif ($grade == "3") {
echo "You're a junior.";
 } elseif ($grade == "4") {
echo "You're a senior.";
 } else {
echo "Something is wrong.";
 }

 }

 function Gpa () {
 $gpa = $_POST['gpa'];
 if ($gpa =="1") {
    echo "You strongly need to up your GPA.";
} elseif ($gpa == "2") {
    echo "You're an average student.";
} elseif ($gpa == "3") {
    echo "You're an above average student.";
} elseif ($gpa == "4") {
    echo "You're an excellent sudent.";
} else {
    echo "Something is wrong.";
}

}

function School () {
 $school = $_POST['school'];
 if ($school =="1") {
    echo "You're into Math";
 } elseif ($school == "2") {
    echo "You're into Lit";
 } elseif ($school == "3") {
    echo "You're into history.";
 } elseif ($school == "4") {
   echo "You're into humanities.";
 } elseif ($school == "5") {
   echo "You're into science.";
 } else {
   echo "Something is wrong.";
 }

 }

 include('viewpage.php');

?> 
```

和查看页面：

```
 <h4>Question # 1</h4>
     <p><?php Grades($grade); ?></p>
     <h4>Question # 2</h4>
     <p><?php Gpa($gpa); ?></p>
      <h4>Question # 3</h4>
     <p><?php School($school); ?></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:05:05.217

问题就在这里

```
 <select name="gpa">
 <option value="4">3.5 or above</option> 
```

访问`$_POST['gpa']` `<select>`标签应该有`name`属性作为`gpa`非`<option>`标签

为了`$_POST['School']`

```
<select  name="school" multiple="multiple">
<option value ="1">Mathematics</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:48:15.333

我也认为有些人在查看页面代码时认为是错误的。成绩、Gpa、学校功能没有变量。但是你像这样调用这些函数， `<?php Grades($grade); ?> <?php Gpa($gpa); ?> <?php Gpa($School); ?>` 像下面这样替换这些代码 `<?php Grades(); ?> <?php Gpa(); ?> <?php Gpa(); ?>`

如果用户没有在问题 1 n 问题 2 中选择选项，你也会得到错误。你必须添加代码来检查..

# c++ - 确定注册表项的对象名称

> ID：15846184
> 
> 赞同：0
> 
> 时间：2013-04-06T01:56:09.033
> 
> 标签：c++, winapi, registry

我正在尝试使用函数[SetNamedSecurityInfo() 为注册表项设置自由访问控制列表（DACL）](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379579%28v=vs.85%29.aspx)。

`pObjectName`如果我要设置注册表项，我不确定该函数的第一个参数应该是什么？我也不确定这个字符串的格式，即，对于当前用户，我使用[`HKEY_CURRENT_USER\`or`CURRENT_USER`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379593%28v=vs.85%29.aspx#SE_REGISTRY_KEY)吗？

对于注册表项，对象名称只是注册表项的路径还是其他内容？

例如：

```
LPTSTR pObjectName = _T("HKEY_CURRENT_USER\\Software\\MyAppName");
// or should it be...
LPTSTR pObjectName = _T("CURRENT_USER\\Software\\MyAppName"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:01:40.943

阅读以下[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379579.aspx)`SetNamedSecurityInfo()`：

> 有关不同对象类型的字符串格式的描述，请参阅[SE_OBJECT_TYPE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379593.aspx)。

.

> SE_REGISTRY_KEY 表示注册表项。注册表项对象可以位于本地注册表中，例如 CLASSES_ROOT\SomePath，也可以位于远程注册表中，例如 \ComputerName\CLASSES_ROOT\SomePath。
> 
> 注册表项的名称必须使用以下文字字符串来标识预定义的注册表项：“CLASSES_ROOT”、“CURRENT_USER”、“MACHINE”和“USERS”。

所以你的问题的答案是这样的：

```
LPTSTR pObjectName = _T("CURRENT_USER\\Software\\MyAppName"); 
```

# javascript - 将 div 拖放到 div 上

> ID：15846185
> 
> 赞同：1
> 
> 时间：2013-04-06T01:56:09.220
> 
> 标签：javascript, html, web

我不知道如何问这个问题，但我会尽力而为。

我正在编写一个网站，我有一个用 php 生成的 div 列表。旁边还有一个 div。这个想法是，当您将列表中的一个 div 拖到另一个 div 上时，它将对列表中 div 的类做一些事情。

列表中其中一个 div 的 HTML 代码：

```
<div style='width:100px' class='div1' draggable='true'>
[content]
</div> 
```

将其放入的 div 的 HTML 代码：

```
<div class="dropzone" ondrop="drop(event)" ondragover="allowDrop(event)" style="padding: 10px; border-width: 2px; border-style: dashed; width: 100px; height: 210px; float: right;">
[content]
</div> 
```

这个想法是，当您将“div1”拖到“dropzone”中时，dropzone 将运行一个以“div1”作为变量的 javascript 函数。有没有办法在javascript中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T09:36:01.603

你可以从这个网站得到想法：

> [http://www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)
> 
> [http://www.w3schools.com/html/html5_draganddrop.asp](http://www.w3schools.com/html/html5_draganddrop.asp)

# mysql - 如果基础对象是人，那么表示家庭内关系的最佳数据库结构是什么

> ID：15846187
> 
> 赞同：1
> 
> 时间：2013-04-06T01:56:22.710
> 
> 标签：mysql, sql, relationship

我有一个完整的大型数据库或称为 PERSONS 的人。

我想将他们彼此的关系存储在一个单独的表中。

我在想这样的事情：

```
FAMILY
PERSON_IDS: 123, 345, 678
RELATIONS:  self, brother, daughter 
```

使用“自我”标志来指示引用关系的人。因此，在示例中，123 是一个男人，345 是他的兄弟，678 是一个女人，他的女儿。即，可以从关系中导出性别信息。

这是正确的方法吗？

或者每行只有 2 个人和一种关系类型会更有效吗

```
PERSON_IDS: 123, 456
RELATION: brother 
```

-

```
PERSON_IDS: 123, 678
RELATION: daughter 
```

或者每个人有一个男性/女性字段并且关系表只指定例如“兄弟姐妹”是否更好。

或者我应该有一张只有父母的桌子，并用人来存储性别？

```
TABLE PARENTS:
PARENT_ID: 123
CHILD_ID: 678 
```

目的是在显示 Person 时显示相关人员。设计应该针对性能和速度而不是易于管理进行优化。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T14:16:29.193

这是一个多对多的关系：每个人可以有很多亲戚，也可以是很多人的亲戚。假设您的 Person 表有一个名为 的主键`Id`，您可以有一个表，它保存两个人之间的关系以及他们之间的关系类型。拥有一个包含所有可能类型关系的表会很有用，如下所示：

```
Relationship(Id, Kind)
Family(Person_Id, Relative_Id, Relationship_Id) 
```

因此，如果您有以下人员和关系表数据：

```
Person:             Relationship:
Id | Name           Id | Kind
 1 | John            1 | Father
 2 | Mike            2 | Sister
 3 | Susan 
```

以及家庭表的以下内容：

```
P_Id | Rel_Id | Relation_Id
 1   |   2    |      1
 1   |   3    |      1
 2   |   3    |      2 
```

家庭表说约翰是迈克和苏珊的父亲，迈克的妹妹是苏珊。我认为这可能是一个好方法，但当然，就像数据库设计中的几乎所有内容一样，这个解决方案是有争议的。

# jqueryi-ui-buttonset - jQuery UI 单选按钮设置换行符

> ID：15846189
> 
> 赞同：0
> 
> 时间：2013-04-06T01:57:13.273
> 
> 标签：jqueryi-ui-buttonset

当我使用两个按钮组时，它们不会显示在同一行。有没有办法在同一行显示这两个？这是我的代码

html:

```
<div id="view">
<input type="radio" id="radio1" name="radio" /><label for="radio1">Regular</label>
<input type="radio" id="radio2" name="radio" checked="checked" /><label for="radio2">Investments</label>
<input type="radio" id="radio3" name="radio" /><label for="radio3">All</label>
</div>

<div id="lod">
<input type="radio" id="lod_S" name="radio" checked="checked" /><label for="radio2">Summary</label>
<input type="radio" id="lod_D" name="radio" /><label for="radio3">Detail</label>
</div> 
```

javascript:

```
$('#view,#lod').buttonset(); 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:36:57.623

元素的默认样式`div`会导致一个元素低于另一个元素。你可以`span`在这里替换。

[jsFiddle](http://jsfiddle.net/Kh4F4/1/)

* * *

或者使用 CSS 来改变 div 的样式：

```
<style type="text/css">
    #view, #lod {
        display: inline;
    }

</style> 
```

# node.js - 在 node.js“worker”脚本中使用集群

> ID：15846192
> 
> 赞同：1
> 
> 时间：2013-04-06T01:57:40.943
> 
> 标签：node.js

我已经阅读了关于集群的每一篇文章和教程，我可以得到我的手，他们都“倾听”来自 http 请求的工作（通常）。好吧，我有一个节点脚本，它在服务器上做一些工作，休眠，然后再试一次。基本上就像一个 cron 工作（除了我永远使用）。因此，没有入站 http 请求，没有侦听器，它甚至不是服务器。我从一个在 cron 中运行的 PHP 脚本移植了该操作。

那么我将如何利用集群与这样的“工作者”脚本呢？

坦克。

# file - Jenkins成功构建后提交文件

> ID：15846193
> 
> 赞同：3
> 
> 时间：2013-04-06T01:57:46.477
> 
> 标签：file, ant, jenkins, checkin, post-commit

我正在为我的 Web 应用程序使用 Jenkins、Ant、Flex 和 Java。目前我在 Flex src 中更新了一个构建版本文件并在开始 Jenkins 构建之前提交它。我想避免这个手动过程，让脚本为我做这件事。

文件内容：

构建=01_01_2013_10:43
发布=2.01

**问题1：** 我想更新这个文件内容并编译我的代码，然后把这个文件提交回svn。这样 SVN 就有了最新的构建版本号。

如何将此更改的文件提交到 SVN。如果在成功构建后发生提交，那就太好了。

**问题 2：**我想在构建开始前一小时向所有开发人员发送电子邮件。“请提交您的更改。构建将在 1 小时后开始。” 我可以在电子邮件和（实际 svn export + ant build）之间设置延迟吗？
或者
我是否必须每隔一小时安排 2 个工作。一个用于发送电子邮件，一个用于构建。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T06:32:43.387

您可以使用[subclipse svn ant 集成](http://subclipse.tigris.org/svnant/svntask.html)将更改的文件提交到 SVN，包括身份验证：

```
<svnSetting
      svnkit="true"
      username="bingo"
      password="bongo"
      id="svn.settings"
  />
<svn refid="svn.settings">
    <commit file="your.file" />
</svn> 
```

要获取构建文件的用户名和密码，您有不同的选择。一种是使用[参数化构建](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build)，您可以在其中将用户名和密码定义为构建参数，这些参数可以在构建文件中进行评估。

```
 username="${parameter.svn.username}"
      password="${parameter.svn.password}" 
```

第二种选择是使用[jenkins 配置文件提供程序插件](https://wiki.jenkins-ci.org/display/JENKINS/Config+File+Provider+Plugin)。有了这个，您还可以使用参数化构建等参数，但是您可以从提供的配置文件中导入凭据，例如可以通过以下方式导入属性文件

```
<property file="config.file" /> 
```

实际上你也可以使用[ant 的 exec 任务](http://ant.apache.org/manual/Tasks/exec.html)来执行你的 subversion 提交文件。

要在实际构建前一小时发送电子邮件，您应该设置两个作业，它们相隔一小时。但我认为这不是在构建之前通知的好习惯，考虑更频繁地构建，甚至可能每次提交到 svn。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T13:42:14.057

您还可以使用 Post build Task 插件 ( [https://wiki.jenkins-ci.org/display/JENKINS/Post+build+task](https://wiki.jenkins-ci.org/display/JENKINS/Post+build+task) ) 将 svn 作为 shell 脚本执行 (svn 必须安装并从 shell 验证一次对于运行 Jenkins 的用户）。

然后 svn commit 作为构建后操作运行。该插件有一个选项（复选框），仅当先前的构建/步骤成功时才运行脚本。

这里也提到了插件：[在 Jenkins 中构建后执行 Shell 脚本](https://stackoverflow.com/questions/11160363/execute-shell-script-after-post-build-in-jenkins)

# blackberry-eclipse-plugin - BB 10 上使用 Android 运行时的带有操作键的黑莓键盘

> ID：15846194
> 
> 赞同：4
> 
> 时间：2013-04-06T01:57:51.883
> 
> 标签：blackberry-eclipse-plugin, blackberry-10, blackberry-android

我有一个 android 应用程序，它具有某些键盘布局和一些为某些文本视图上的 enter 键定义的操作。例如，文本视图定义为

```
android:imeOptions="actionGo"
android:inputType="text" 
```

我有一个带有 onEditorActionListener 的 EditText 定义为

```
txtView.setOnEditorActionListener(this);

public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
if (actionId == EditorInfo.IME_ACTION_GO) {
   // do something
   InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
   imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
   return true;
}
   return false;
} 
```

这在 android 版本中运行良好，但是当它被移植到 BB 10 设备时，回车键不会反映在指定的操作中（在本例中为“Go”），而且，当点击回车按钮时，甚至没有任何反应认为动作监听器已定义。

有没有办法解决这个问题或让它发挥作用？或者我在这里错过了什么？

我在 Z10 上运行 10.0.9.422。

# vb.net - 事件处理程序中的索引外部边界

> ID：15846197
> 
> 赞同：-2
> 
> 时间：2013-04-06T01:58:38.720
> 
> 标签：vb.net, indexoutofboundsexception

我在向`lblshipping.text`

```
Option Explicit On
Option Strict On
Option Infer Off

Public Class frmMain
    Private intMin() As Integer = {1, 11, 51, 101}
    Private intMax() As Integer = {10, 50, 100}
    Private dblShip() As Double = {15, 10, 5, 0}

    Private Sub btnExit_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnExit.Click
        Me.Close()
    End Sub

    Private Sub txtordered_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles txtOrdered.KeyPress
        ' allows the text box to accept numbers and the Backspace key

        If (e.KeyChar < "0" OrElse e.KeyChar > "9") AndAlso e.KeyChar <> ControlChars.Back Then
            e.Handled = True
        End If
    End Sub

    Private Sub txtordered_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtOrdered.TextChanged
        lblShipping.Text = String.Empty
    End Sub

    Private Sub btnDisplay_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnDisplay.Click

        Dim intOrdered As Integer
        Integer.TryParse(txtOrdered.Text, intOrdered)

        For intIndex As Integer = 0 To 3
            If intOrdered <= 2 Then
                If intOrdered >= intMin(intIndex) And intOrdered <= intMax(intIndex) Then
                    lblShipping.Text = dblShip(intIndex).ToString("C2")
                End If
            End If
            If intIndex = 3 Then
                If intOrdered >= intMin(intIndex) Then
                    lblShipping.Text = dblShip(intIndex).ToString("C2")
                End If
            End If
        Next intIndex
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:27:19.420

尝试删除此语句

```
Private Sub txtordered_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtOrdered.TextChanged
    lblShipping.Text = String.Empty
End Sub 
```

并尝试更改您的 for next 语句

```
For intIndex As Integer = 0 To 3
        If intOrdered <= 2 Then
            If intOrdered >= intMin(intIndex) And intOrdered <= intMax(intIndex) Then
                lblShipping.Text = dblShip(intIndex).ToString("C2")
            End If
       elseIf intIndex = 3 Then
            If intOrdered >= intMin(intIndex) Then
                lblShipping.Text = dblShip(intIndex).ToString("C2")
            End If
        End If
    Next intIndex 
```

# php - Flex，php的MySQL查询问题

> ID：15846200
> 
> 赞同：1
> 
> 时间：2013-04-06T01:59:45.843
> 
> 标签：php, mysql, actionscript-3, apache-flex, flex4.5

我正在尝试使用 php 将带有变量的 MySQL 查询从 flex 传递到 MySQL。

这是 Flex 中的查询。一切似乎都是正确的。

```
mysqlQuery("INSERT INTO poc_note_test (first_name,last_name) VALUES ("+firstName+"," +lastName+")"); 
```

当查询通过 http 传递到我的服务器以由 PHP 处理时，它返回以下错误

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Test_Value )' at line 1 
```

据我所知，它试图将最后的“）”作为值的一部分。我终生无法看到如何阻止这种情况发生。

这是用于处理出错的查询的 php。

```
$sql = $_REQUEST['sql'];
$result = mysql_query($sql);
$err = mysql_error();
$cols_count = mysql_num_fields($result) or error_log('Invalid query: ' .mysql_error()); 
```

任何帮助都感激不尽

这是传递查询的函数。也许问题就在这里？

```
public function mysqlQuery(sql:String,fid:String):void {

var http:HTTPService = new HTTPService;
var parm:Object = new Object;
parm.sql = sql;
parm.private_key = private_key;
parm.fas_db = mysql_db; 
http.url = mysql_url+"?irand="+Math.random();

http.showBusyCursor = true;
http.request = sql;
http.addEventListener(ResultEvent.RESULT, mysqlResult);
http.addEventListener(FaultEvent.FAULT, mysqlFault);
http.method = "POST";

sqlToken = http.send(parm);
sqlToken.param = fid; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T02:15:22.817

改变这个

```
mysqlQuery("INSERT INTO poc_note_test (first_name,last_name) VALUES ("+firstName+"," +lastName+")"); 
```

到

```
mysqlQuery("INSERT INTO poc_note_test (first_name,last_name) VALUES ('"+firstName+"','" +lastName+"')"); 
```

围绕`'`价值观

用于去除`\`

```
$result = mysql_query(stripslashes($sql)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:14:31.910

改变成

```
mysqlQuery("INSERT INTO poc_note_test (first_name,last_name) VALUES ("+firstName+"," +lastName+")"); 
```

到

```
mysqlQuery("INSERT INTO poc_note_test (first_name,last_name) VALUES ('"+firstName+"','" +lastName+"')"); 
```

在 sql 中，字符串字符用单引号/双引号引起来。

# c - 我如何在 C 中使用 sscanf() 方法

> ID：15846203
> 
> 赞同：-1
> 
> 时间：2013-04-06T01:59:59.893
> 
> 标签：c, scanf

我在这段代码中使用 sscanf

```
while(totalByte < sizeof(rdata)) 
{   
    read(client_sockfd, &buffer[totalByte],1); 
    printf("bytes[%d] : %x \n", totalByte, buffer[++totalByte]);
} 
```

使用这段代码，我得到了这样的结果

客户端发送 1 1 +

```
bytes[0] : 0  
bytes[1] : 0  
bytes[2] : 0  
bytes[3] : 1  
bytes[4] : 0  
bytes[5] : 0
bytes[6] : 0  
bytes[7] : 1  
bytes[8] : 2b 
bytes[9] : 0  
bytes[10] : 0  
bytes[11] : 0 
bytes[12] : 0  
bytes[13] : 0  
bytes[14] : 0  
bytes[15] : 0  
bytes[16] : 0  
bytes[17] : 0 
bytes[18] : 0  
bytes[19] : 0 
```

得到了结果

然后我使用 sscanf 方法

```
sscanf(buffer,"%d%d%c" ,&rdata.left_num, &rdata.right_num, rdata.op); 
printf("%d %c %d \n", ntohl(rdata.left_num),rdata.op,ntohl(rdata.right_num)); 
```

但是当打印 rdata（结构）的值时，得到一个 0 值（初始值）。

0 0

我知道 sscanf 方法拆分字符串并插入一个值

对我有什么误解吗？

这就是我使用的结构

```
struct cal_data 
{  
    int left_num;  
    int right_num;
    char op;  
    int result;  
    int error;  
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T02:32:04.647

我不认为这是在做你想做的事：

```
printf("bytes[%d] : %x \n",totalByte, buffer[++totalByte]); 
```

如果这有效，那么它的*工作是巧合*。你不想依赖巧合，而不是逻辑，是吗？阅读[此问题](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)以获取有关此处未定义行为的更多信息。将其更改为此，并避免省略序列点以便将来将逻辑拼凑在一起：

```
printf("bytes[%d] : %x \n",totalByte, (unsigned int) buffer[totalByte]);
totalByte++; 
```

> 然后我使用 sscanf 方法 `sscanf(buffer,"%d%d%c" ,&rdata.left_num, &rdata.right_num, rdata.op);`

你的错误检查在哪里？像大多数标准 C 函数一样，您的代码应该检查 sscanf 的返回值，以确保它提取了您想要的信息量。您如何确定 sscanf 成功处理了两个十进制数字序列和一个字符？用这个：

```
int n = sscanf(buffer,"%d%d%c" ,&rdata.left_num, &rdata.right_num, rdata.op);
if (n == 3) {
    /* sscanf extracted and assigned three values;
     * One for each of the format specifiers,
     * and variables you passed in. Success! */
    printf("%d %c %d \n", ntohl(rdata.left_num),rdata.op,ntohl(rdata.right_num));
}
else {
    /* sscanf failed to extract some values from the string,
     * because the string wasn't correctly formatted */
    puts("Invalid input to sscanf");
} 
```

...现在您会看到问题所在！sscanf 失败！

正如其他人所指出的，字符串在第一个`'\0'`（或 0）字节处终止。您传递给 sscanf 的指针指向一个空字符串。sscanf 无法从空字符串中提取您想要的任何信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T02:10:39.027

`sscanf`像许多其他 C 库函数一样，当字符串到达​​ 0（与 '\0' 相同）时，它会停止迭代字符串。数组的第一个元素`bytes`是 0。因此，就 sscanf 而言，用于的输入字符串`sscanf`是`""`. `while`要查看此行为的另一个示例，请在循环后添加以下代码。

```
printf("%s\n", bytes); 
```

这不会打印任何东西（将打印一个空字符串），因为`printf`like`sscanf`会认为`byte[0]`是字符串的结尾。

您可能应该使用这样的东西将数据读入您的结构 - [http://c-faq.com/stdio/extconform.html](http://c-faq.com/stdio/extconform.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T02:14:44.297

根据功能描述（[http://www.cplusplus.com/reference/cstdio/sscanf/](http://www.cplusplus.com/reference/cstdio/sscanf/)）：

```
int sscanf ( const char * s, const char * format, ...); 
```

第一个论点应该是：

> ```
> C string that the function processes as its source to retrieve the data. 
> ```

但是当您将每个字节打印为“十六进制整数”时：

```
printf("bytes[%d] : %x \n", totalByte, buffer[++totalByte]); 
```

第一个字节的值为0。所以如果你把它当作一个字符串，它就是一个空字符串。

# unit-testing - 在 groovy 和 spock 中为不同的类运行相同的测试

> ID：15846207
> 
> 赞同：0
> 
> 时间：2013-04-06T02:00:51.853
> 
> 标签：unit-testing, testing, groovy, tdd, spock

我目前正在尝试为 2 个不同的类运行相同的测试用例，但是 setup() 有问题，我看到了类似的问题，但还没有看到使用 Spock 进行常规测试的解决方案，而且我无法想办法。

所以我本质上是使用 2 种不同的方法来解决相同的问题，所以相同的测试用例应该适用于两个类，我试图保持不要重复自己（DRY）。

因此，我将 MainTest 设置为抽象类，将 MethodOneTest 和 MethodTwoTest 设置为扩展抽象 MainTest 的具体类：

```
import spock.lang.Specification
abstract class MainTest extends Specification {
    private def controller

    def setup() {
        // controller = i_dont_know..
    }

    def "test canary"() {
        expect:
        true
    }

    // more tests
} 
```

我的具体课程是这样的：

```
class MethodOneTest extends MainTest {
    def setup() {
        def controller = new MethodOneTest()
    }
}

class MethodTwoTest extends MainTest {
    def setup() {
        def controller = new MethoTwoTest()
    }
} 
```

那么有谁知道我如何从我的具体类 MethodOneTest 和 MethodTwoTest 中运行抽象 MainTest 中的所有测试？如何正确实例化设置？我希望我很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:42:35.157

忘记控制器设置。当您为具体类执行测试时，将自动执行来自超类的所有测试。例如

```
import spock.lang.Specification
abstract class MainTest extends Specification {
    def "test canary"() {
        expect:
        true
    }

    // more tests
}

class MethodOneTest extends MainTest {

    // more tests
}

class MethodTwoTest extends MainTest {

    // more tests
} 
```

但它应该有意义多次运行相同的测试。所以用一些东西来参数化它们是合理的，例如一些类实例：

```
import spock.lang.Specification
abstract class MainSpecification extends Specification {
    @Shared 
    protected Controller controller

    def "test canary"() {
        expect:
        // do something with controller
    }

    // more tests
}

class MethodOneSpec extends MainSpecification {
    def setupSpec() {
        controller = //... first instance
    }

    // more tests
}

class MethodTwoSpec extends MainSpecification {
    def setupSpec() {
        controller = //... second instance
    }

    // more tests
} 
```

# java - 如何在 Java Swing 中制作按钮单击块？

> ID：15846211
> 
> 赞同：0
> 
> 时间：2013-04-06T02:01:34.437
> 
> 标签：java, swing, user-interface, synchronous

我对 Swing 很陌生。

我有

```
itemActionButton.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent arg) {
        itemAction();
    }
}); 
```

但是当单击按钮时，我希望父表单的线程等到该操作完成后再刷新，而不是在另一个线程上运行此操作，从而允许额外的点击等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:05:49.753

ActionListener 中的代码在 EDT 上执行，从而防止 GUI 重新绘制和响应其他事件。

如果您有一个长时间运行的任务并且您不想阻塞 EDT，那么您需要使用另一个线程。

阅读有关[并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)的 Swing 教程部分，了解更多信息和使用 SwingWorker 的解决方案。

# android - 根据 SDK 版本动态加载首选项

> ID：15846212
> 
> 赞同：1
> 
> 时间：2013-04-06T02:01:36.683
> 
> 标签：android, android-layout, preferences

我的 android 应用程序中有一个 PreferenceActivity，用于显示设置屏幕。我想在其中添加一个“MultiSelectListPreference”，但我遇到了一个问题，即它不适用于 API11 之前的 android 版本，因为它是在 API11 中引入的。没问题，我通过两个 xml 布局解决了这个问题，一个在 res/xml-v11 中带有“MultiSelectListPreference”，另一个在 res/xml 中只有“Preference”，我使用自定义对话框处理。

res/xml-v11 中的 xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<Preference android:key="time"
            android:persistent="false"
            android:title="@string/time" />
<MultiSelectListPreference android:key="days_multi"
                           android:persistent="false"
                           android:title="@string/days" />
<ListPreference android:key="action"
                android:persistent="false"
                android:title="@string/action" />
</PreferenceScreen> 
```

res/xml 中的那个看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<Preference android:key="time"
            android:persistent="false"
            android:title="@string/time" />
<Preference android:key="days_dialog"
            android:persistent="false"
            android:title="@string/days" />
<ListPreference android:key="action"
                android:persistent="false"
                android:title="@string/action" />
</PreferenceScreen> 
```

如您所见，唯一的区别是列表中的第二个元素，其余部分完全相同。有没有更好的方法来处理这个问题，以便在一个文件中重用相同的代码并根据 Android 版本动态引用剩余部分？理想的解决方案看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<Preference android:key="time"
            android:persistent="false"
            android:title="@string/time" />
<Preference source="days.xml" />
<ListPreference android:key="action"
                android:persistent="false"
                android:title="@string/action" />
</PreferenceScreen> 
```

虽然我也会在 res/xml-v11 和 res/xml 下拥有名为 days.xml 的文件，其中包含不同的部分。

在文档中以及在 StackOverflow 上搜索后，我找不到任何相关内容。android是否提供了一种方法来做到这一点？或者也许还有其他方法可以分解出通用代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:55:50.090

想到的是使用`<include/>`标签之类的东西。似乎您不能在首选项 xmls 中使用它，但您可以部分地创建您的首选项。因此，您需要`PreferencesActivity`像这样创建首选项（`R.xml.prefs_days`您的版本特定文件在哪里，有 2 个版本）：

```
addPreferencesFromResource(R.xml.prefs_time);
addPreferencesFromResource(R.xml.prefs_days);
addPreferencesFromResource(R.xml.prefs_action); 
```

[嵌套的preferences.xml](https://stackoverflow.com/questions/5314582/nested-preferences-xml)

# java - 如何获取 Java 服务器的时区？

> ID：15846214
> 
> 赞同：3
> 
> 时间：2013-04-06T02:01:53.387
> 
> 标签：java, timezone

我在 Windows 机器上使用 Java 7。我正在开发一个在 Tomcat 上运行的 Web 应用程序。

我需要知道服务器的时区。这是我为此目的所做的：

TimeZone.getDefault();

这是正确的方法吗？

感谢您的输入！

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-26T06:05:33.773

# vpn - 如何在archlinux上设置pptp vpn服务器？

> ID：15846222
> 
> 赞同：0
> 
> 时间：2013-04-06T02:03:10.437
> 
> 标签：vpn, archlinux, ppp

我按照[https://wiki.archlinux.org/index.php/PPTP_Server](https://wiki.archlinux.org/index.php/PPTP_Server)上的说明使用 pptpd 设置 pptp vpn 服务器。

一切完成后，我无法连接到服务器。我发现 的输出中没有任何 ppp 虚拟适配器`ifconfig`。但是 pptpd 服务的日志没有错误，并且 pptpd 进程正在运行。

客户端日志如下：

```
Apr 06 09:31:34 root pppd[540]: Using interface ppp1
Apr 06 09:31:34 root pppd[540]: Connect: ppp1 <--> /dev/pts/3
Apr 06 09:31:34 root pptp[541]: anon log[main:pptp.c:314]: The synchronous pptp option is NOT activated
Apr 06 09:31:35 root pptp[546]: anon log[ctrlp_rep:pptp_ctrl.c:251]: Sent control packet type is 1 'Start-Control-Connection-Request'
Apr 06 09:31:35 root pptp[546]: anon log[ctrlp_disp:pptp_ctrl.c:739]: Received Start Control Connection Reply
Apr 06 09:31:35 root pptp[546]: anon log[ctrlp_disp:pptp_ctrl.c:773]: Client connection established.
Apr 06 09:31:36 root pptp[546]: anon log[ctrlp_rep:pptp_ctrl.c:251]: Sent control packet type is 7 'Outgoing-Call-Request'
Apr 06 09:31:36 root pptp[546]: anon log[ctrlp_disp:pptp_ctrl.c:858]: Received Outgoing Call Reply.
Apr 06 09:31:36 root pptp[546]: anon log[ctrlp_disp:pptp_ctrl.c:897]: Outgoing call established (call ID 0, peer's call ID 0).
Apr 06 09:31:36 root pptp[546]: anon log[pptp_read_some:pptp_ctrl.c:544]: read returned zero, peer has closed
Apr 06 09:31:36 root pptp[546]: anon log[callmgr_main:pptp_callmgr.c:258]: Closing connection (shutdown)
Apr 06 09:31:36 root pptp[546]: anon log[ctrlp_rep:pptp_ctrl.c:251]: Sent control packet type is 12 'Call-Clear-Request'
Apr 06 09:31:36 root pptp[546]: anon log[pptp_read_some:pptp_ctrl.c:544]: read returned zero, peer has closed
Apr 06 09:31:36 root pptp[546]: anon log[call_callback:pptp_callmgr.c:79]: Closing connection (call state)
Apr 06 09:31:36 root pppd[540]: Modem hangup
Apr 06 09:31:36 root pppd[540]: Connection terminated.
Apr 06 09:31:36 root pppd[540]: Exit. 
```

谁能告诉我它有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:59:22.240

我在 /etc/ppp/option.pptpd 中发现了一个错字。更正后，服务器工作。

# jquery - 使用 SPServices 通过 jQuery 获取用户的“我的链接”

> ID：15846223
> 
> 赞同：0
> 
> 时间：2013-04-06T02:03:25.203
> 
> 标签：jquery, sharepoint, sharepoint-2007, moss, spservices

我正在尝试使用[SPServices](http://spservices.codeplex.com/)和 jQuery获取当前用户的“我的链接”列表

我是 SPServices 的新手，我发现[这个页面](http://spservices.codeplex.com/wikipage?title=UserProfileService&referringTitle=%24%28%29.SPServices)是关于如何从用户的配置文件中获取值，特别是支持的操作`GetUserLinks`，但是，我不确定如何格式化这个请求。

这是我蹩脚的尝试：

```
var UserName = $().SPServices.SPGetCurrentUser({
   fieldName: "Name",
   debug: false
});
var UserLinks = $().SPServices.UserProfileService.GetUserLinks(UserName) 
```

我感谢任何帮助构建这个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:17:44.220

正确的语法是：

```
$().SPServices({
  operation: "GetUserLinks",
  accountName:"username",
  completefunc: function (xData, Status) {
    console.log(xData)
  }
}); 
```

您的 SPGetCurrentUser 语法是正确的，但在我的 Sharepoint 上却没有……我至少看到了另外两个查找当前用户的选项：

1.  使用[SharepointPlus](http://aymkdn.github.io/SharepointPlus/symbols/%24SP%28%29.html#.whoami)（一种 JavaScript API）：

    ```
    $SP().whoami({url:"http://my.si.te/subdir/"}, function(people) {
      console.log(people["AccountName"]);
    }); 
    ```

2.  或者您可以更改您的母版页以始终将有关当前用户的详细信息包含在您的代码中。看看这篇[英文博文](http://chayadigital.wordpress.com/2012/03/20/displaying-user-information-on-a-master-page-in-sharepoint-2010/)或这篇[法文博](http://blog.kodono.info/wordpress/2012/08/21/recuperer-les-details-dun-utilisateur-dans-une-masterpage-sharepoint/)文。然后很容易直接从 HTML 中获取用户名。

# castle-windsor - CAstle Windsor：如何引用作为嵌入式资源的第二个 xml 配置文件？

> ID：15846226
> 
> 赞同：1
> 
> 时间：2013-04-06T02:03:44.480
> 
> 标签：castle-windsor

我们有一个在生产中使用的 xml 配置文件。我们还有一个小测试应用程序，它有几个额外的需求。我想做的是创建第二个仅用于测试的 xml 配置文件，该文件引用嵌入式生产配置文件。有没有办法做到这一点？

我知道“包含”元素，但不确定它应该放在文件中的哪个位置——在城堡节点中？组件节点？

我觉得答案就[在这里，](http://docs.castleproject.org/Default.aspx?Page=XML-Registration-Reference&NS=Windsor&AspxAutoDetectCookieSupport=1)但我太密集了，无法弄清楚。

感谢您的任何帮助，您可以提供。

**更新**

这就是我们的生产配置文件的设置方式：

```
<?xml version="1.0" encoding="utf-8"?>
<OurCompany>
 <Framework>
  <castle>
   <installers>
     <!-- some installers-->
   <installers>
   <components>
       <!--some components-->
   <components>
  <castle>
 <Framework>
<OurCompany> 
```

我最近对非生产配置文件的尝试如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<OurCompany>
 <Framework>
  <castle>
   <include uri="assembly://AssemblyContainingEmbeddedXml/MyEmbeddedConfig.xml" /> 
   <components>
       <!--components I only want registered with container when running in non-production environment-->
   <components>
  <castle>
 <Framework>
<OurCompany> 
```

我得到的例外是：

配置解析器遇到了框架，但它期望找到安装程序、设施或组件。可能有错字，或者您可能忘记正确嵌套它。

（在实际消息中，“框架”、“安装程序”、“设施”和“组件”括在尖括号中。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T20:29:53.713

您引用的页面底部有一个从嵌入式资源加载的示例：

```
IResource resource = new AssemblyResource("assembly://Acme.Crm.Data/Configuration/services.xml");
container = new WindsorContainer(new XmlInterpreter(resource)); 
```

# stratus - Stratus 2 Beta 黑客或自定义

> ID：15846227
> 
> 赞同：0
> 
> 时间：2013-04-06T02:03:47.093
> 
> 标签：stratus

我目前正在使用 Stratus 2 Beta 将音乐从 soundcloud 流式传输到我的网站。在播放器的底部有不同页面的各种链接。一个是指向stratus 网站的链接。是否有隐藏这些按钮以使播放器更清洁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T19:15:11.213

我知道这是旧的，但万一有人偶然发现它......</p>

两种方法： 1) 编辑 CSS 以隐藏您想要的内容并将其作为主题（选项之一）传递给播放器。2) 从[http://stratus.sc/stratus.js](http://stratus.sc/stratus.js)获取代码编辑它并在您自己的服务器上使用它。

不过有一点：SoundCloud ToS 需要指向他们网站的链接；由于stratus是官方播放器，因此它被视为链接，因此您可能不应该删除该播放器（除非您将链接放在其他地方）。

# ios - 空白 UITableview

> ID：15846228
> 
> 赞同：-1
> 
> 时间：2013-04-06T02:04:21.650
> 
> 标签：ios, uitableview

我正在尝试使用列出三个人的表格视图来完成一个简单的应用程序。但是当我运行它时，我得到的只是一张空白表。我不确定出了什么问题。任何帮助将非常感激。

这是我的代码：[https ://github.com/student511/UITableView](https://github.com/student511/UITableView)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:10:49.867

你正在重新定义人群。删除行：

```
self.people = [NSArray array]; 
```

从您的 TableViewController。

# jquery - 使数据表行可点击

> ID：15846229
> 
> 赞同：1
> 
> 时间：2013-04-06T02:04:33.477
> 
> 标签：jquery, jquery-datatables

我有一个使用 datatables.net 通过 ajax 加载数据的表。我想这样做，以便当用户单击一行时，它链接到附加有该行主键的 get 变量的 URL。

我对 Datatables 比较陌生，所以我的黑客尝试/想法是使用 Datatables 使用我的主键在列中应用两个类。这两个类是 hide (css of display:none) 和 projectID (标识该列以便我可以使用 jquery 获取它的值)。我能够使用 aoColumns 属性应用这些类，它确实隐藏了列并附加了 projectID 类。但是我认为由于 Datatables 正在创建表，因此我无法使用

```
$('#project-table tr').click(function(){alert('clicked');} 
```

所以我尝试了

```
$('#project-table tr').live('click',function(){alert('clicked');})}; 
```

也无济于事。

我想有一种比我用来制作可点击行更好的方法，链接到带有附加主键获取变量的页面，但我找不到示例。如果有人有一个示例的链接或者可以指出我正确的方向，我们将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T02:13:46.240

**我有一个使用 datatables.net 通过 ajax 加载数据的表**

这意味着在页面加载期间绑定到元素的任何事件处理程序都将不适用于加载的数据，除非该事件被委托给静态父元素——这意味着该元素永远不会被删除或替换，并且将无限期地存在。

```
$(document).on('click', '#project-table tr', function(){
    alert('This is a click on a dynamic element');
}); 
```

在这里，我们将 click 事件绑定到`document`. 如果您愿意，您可以选择更接近的元素（以提高性能）。

[这是 .on() 文档的链接](http://api.jquery.com/on/)

附带说明——在 jQuery 1.9 + 中，一些函数已被删除。其中之一是`.live()`函数，它已被`.on()`方法替换（如上所示）。这就是它不起作用的原因。此外，`console`会告诉你这一点。许多当前的浏览器都有自己的`web inspector`，否则你可以用谷歌搜索你的浏览器并找到替代方案。

# objective-c - 在情节提要中使用选择器视图时如何设置“已发送事件”？

> ID：15846234
> 
> 赞同：2
> 
> 时间：2013-04-06T02:05:20.637
> 
> 标签：objective-c, storyboard, uipickerview

我正在研究 [date cell] 的示例（[http://developer.apple.com/library/ios/#samplecode/DateCell/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008866-Intro-DontLinkElementID_2](http://developer.apple.com/library/ios/#samplecode/DateCell/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008866-Intro-DontLinkElementID_2)） . 我在情节提要中添加了一个pickerview，但无法将事件添加到 PickerView。在示例中，连接检查器中显示了一堆“已发送事件”，包括值更改。但是我在我的项目中找不到这些选项或将事件拖到“.m”文件中。谁能有任何解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:21:35.367

发送的事件是*动作*。要制作一个，有很多方法：最简单的是：首先在视图控制器的类中创建一个动作处理程序，然后从连接检查器中的事件（或从选择器视图中控制拖动）拖动到视图控制器中故事板。

任何关于在 nib 或情节提要中创建动作的简单教程都会向您详细展示。这是我书中的相关部分：

[http://www.aeth.com/iOSBook/ch07.html#_action_connections](http://www.apeth.com/iOSBook/ch07.html#_action_connections)

您在故事板中，而不是笔尖，因此没有文件所有者；相反，有自己的视图控制器。其他一切都完全相同。

# c# - 实体框架查询中的错误（缺少演员表）

> ID：15846235
> 
> 赞同：1
> 
> 时间：2013-04-06T02:05:21.973
> 
> 标签：c#, sql, entity-framework

```
public List<ProjectImpacts> getProjectImpactsByProjeactIDAndImpactName(String prefe , String impcName)
{ 
    String xim =  cecbContext.Impacts.First(i=>i.impt_name.Contains(impcName)).impt_reference;

    IQueryable<ProjectImpacts> query = from c in cecbContext.ProjectImpacts
            join b in cecbContext.Impacts on c.impt_reference equals b.impt_reference             
            where c.proj_reference == prefe && c.impt_reference == xim
            select b.impt_name;

    List<ProjectImpacts> SelectedImpacts = query.ToList(); //query.Select(refe => new ProjectImpacts { impt_reference =   }).ToList();

    return SelectedImpacts;
} 
```

我在此查询中遇到错误：

> 无法将类型“System.Linq.IQueryable”隐式转换为“System.Linq.IQueryable”。存在显式转换（您是否缺少演员表？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T02:11:59.553

这是因为您的查询最后选择了一个名称：

```
IQueryable<ProjectImpacts> query = from c in cecbContext.ProjectImpacts
    join b in cecbContext.Impacts on c.impt_reference equals b.impt_reference             
    where c.proj_reference == prefe && c.impt_reference == xim
    // select b.impt_name; // <<== Replace this...
    select c;              // <<== with this. 
```

`T`泛型的类型参数`IQueryable<T>`对应于查询中选择的对象的类型。由于您选择 a `name`（大概是 a `string`），因此您得到了`IQueriable<string>`. 一旦你选择`c`，即`ProjectImpacts`，你会得到`IQueryable<ProjectImpacts>`你的结果

# c# - 使用 C# 将 Access 数据库中的条目读入 DataGridView

> ID：15846241
> 
> 赞同：3
> 
> 时间：2013-04-06T02:06:13.250
> 
> 标签：c#, ms-access

出于某种原因，当我尝试使用此代码从 Access 数据库中读取数字时，我的数据网格中出现了空白条目。我可以很好地阅读字符串。有谁知道这可能是为什么？是的，Access 中未读条目的实际数据类型是数字。

```
 string strProvider = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=Employees.mdb";
        string strSql = "SELECT * FROM tbl_employees";
        OleDbConnection con = new OleDbConnection(strProvider);
        OleDbCommand cmd = new OleDbCommand(strSql, con);
        con.Open();
        cmd.CommandType = CommandType.Text;
        OleDbDataReader dr = cmd.ExecuteReader();

        int columnCount = dr.FieldCount;

        for (int i = 0; i < columnCount; i++)
        {
            dgv.Columns.Add(dr.GetName(i).ToString(), dr.GetName(i).ToString());
        }

        string[] rowData = new string[columnCount];
        while (dr.Read())
        {
            for (int k = 0; k < columnCount; k++)
            {
                if (dr.GetFieldType(k).ToString() =="System.Int32")
                {
                    rowData[k] = dr.GetInt32(k).ToString();
                }

                if (dr.GetFieldType(k).ToString() == "System.String")
                {
                    rowData[k] = dr.GetString(k);
                }
            }

            dgv.Rows.Add(rowData);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T05:11:20.810

我建议您尝试在调试器中单步执行您的代码，以便查看发生了什么。我的第一个猜测是您的数字字段没有返回为`Int32`，也许它们是浮点数或小数。

如果由于某种原因您无法通过它，请尝试以下操作：

```
 if (dr.GetFieldType(k).ToString() =="System.Int32")
            {
                rowData[k] = dr.GetInt32(k).ToString();
            }
            else if (dr.GetFieldType(k).ToString() == "System.String")
            {
                rowData[k] = dr.GetString(k);
            }
            else
            {
                rowData[k] = dr.GetFieldType(k).ToString();
            } 
```

这将让您查看未显示的字段中的值类型。

# java - 在 JAVA 中填充 jTable

> ID：15846242
> 
> 赞同：1
> 
> 时间：2013-04-06T02:06:23.893
> 
> 标签：java, swing, sql-server-2005, jdbc, jtable

为什么我有这些错误？这是什么意思？我只想显示我的 SQL DB 上的所有数据。

```
run:
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javaapplication25.SearchPatient.<init>(SearchPatient.java:26)
    at javaapplication25.SearchPatient$2.run(SearchPatient.java:146)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

这是我使用的代码，不知道如何修复它，因为我在编写 Java 应用程序方面不够好。， 有人能帮我一下吗？：

```
package javaapplication25;

/**
 *
 * @author cleanfuel
 */
import java.sql.*;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.table.DefaultTableModel;
public class SearchPatient extends javax.swing.JFrame {

    /**
     * Creates new form SearchPatient
     */
    public SearchPatient() throws SQLException {
        initComponents();

        Statement stmt = null;

        ResultSet rs = stmt.executeQuery("SELECT * FROM dbo.Patients");
        ResultSetMetaData rsmetadata = rs.getMetaData();

        int columns = rsmetadata.getColumnCount();

        DefaultTableModel dtm = new DefaultTableModel();
        Vector columns_vector = new Vector();
        Vector rows_vector = new Vector();

        for (int i=1; i< columns; i++){
        columns_vector.addElement(rsmetadata.getColumnName(i));
        }

        dtm.setColumnIdentifiers(columns_vector);

        while (rs.next()){

            rows_vector = new Vector();
            for (int j=1; j<columns; j++){

                rows_vector.addElement(rs.getString(j));
            }
            dtm.addRow(rows_vector);
        }
        tblPatients.setModel(dtm);

    }

    @SuppressWarnings("unchecked")

Connection connection;
    private void formWindowOpened(java.awt.event.WindowEvent evt) {
        // TODO add your handling code here:
        connection = Main.ConnectDatabase();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:12:15.557

你有这两行，一个接一个

```
Statement stmt = null;

ResultSet rs = stmt.executeQuery("SELECT * FROM dbo.Patients"); 
```

你还没有初始化`stmt`对象，所以它`null`，没什么，natta

基本上，这就像在插入之前尝试打开电视一样，它不太可能工作

查看[JDBC 数据访问](http://docs.oracle.com/javase/tutorial/jdbc/)以获取更多详细信息，但本质上，您需要建立与数据库的连接，然后使用该连接创建 Statement 对象，然后您可以查询它。

# php - 如何构造此查询以用匹配元素替换行

> ID：15846244
> 
> 赞同：0
> 
> 时间：2013-04-06T02:07:20.163
> 
> 标签：php, mysql

因此，我的目标是将用户 ID 以及当前登录日期发送到服务器。这是我的结果的图像。

![东西](https://i.stack.imgur.com/09Ley.png)

现在这是我正在使用的代码：

```
$command = "INSERT IGNORE INTO `userStats`(`UserId`, `LastLogin`) VALUES($userId, CURDATE())";
mysqli_query($con,$command); 
```

我希望该命令自动更新具有相同 UserId 的行的最后登录日期。我该怎么做呢？我对 MySQL 完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:22:08.973

如果我没有弄错你想要的东西，可能你需要[替换](http://dev.mysql.com/doc/refman/5.0/en/replace.html)或[更新](http://dev.mysql.com/doc/refman/5.0/en/update.html)

```
REPLACE INTO `userStats`(`UserId`, `LastLogin`) VALUES($userId, CURDATE()); 
```

通过此查询，如果它是 Prim key 或 Unique，您的 userid 将不会重复存在；

或简单地说：

```
UPDATE `userStats` SET `LastLogin` = CURDATE() WHERE `UserId` = $userId; 
```

祝你好运 ！！

# google-drive-api - 您可以限制对实时文档的访问吗？

> ID：15846247
> 
> 赞同：0
> 
> 时间：2013-04-06T02:08:26.217
> 
> 标签：google-drive-api

文档中的示例应用程序[将文件](https://developers.google.com/drive/realtime/realtime-quickstart#step_2_set_up_the_sample)加载到文档中，然后很好地使文档在应用程序的所有实例中保持同步。惊人的！

我不明白何时允许用户访问实时文档。加载/保存到驱动器文件显然受权限控制，但似乎如果我拥有实时文档的密钥，我可以对该文档进行任何我喜欢的更改。*允许保存到驱动器*文件的另一个用户可以获得对实时文档的恶意更新，并可能天真地将它们保存到支持文件中。

我通过删除对文件的访问并验证被阻止的用户确实仍然可以更改实时文档，即使在访问驱动器文件被阻止后，我已经对此进行了简要测试。

有谁知道阻止无法访问相对离线文件的人对实时文档进行更新的方法？

此外，我想在文档中为每个合作者提供其他合作者无法影响的私人空间。有谁知道 Firebase 支持的每个密钥权限的计划？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:46:47.267

对实时文件**的**访问受到共享和权限的限制，与*普通云端硬盘文件完全相同*。如果没有访问权限，则任何用户都无法修改它。

您可以通过拥有一个单独的私人文件来实现私人合作者部分。如果这不是您需要的，请提供更多详细信息。

# asp.net - 有没有办法检索亚马逊产品代码？

> ID：15846251
> 
> 赞同：0
> 
> 时间：2013-04-06T02:09:31.413
> 
> 标签：asp.net, api, amazon, amazon-product-api

我正在尝试使用亚马逊产品广告 api 在我的网站上显示特定类别的亚马逊产品。我写的代码是asp.net。我能够成功检索其价格、标题、图片、网址。我还想获得亚马逊使用的产品 ID。我查看了它的文档，其中他们提到了一些关于 UPC（通用产品代码）和ASIN。但是他们已经解释了基于UPC和ASIN的查找搜索。我对如何获取其产品 ID 感到困惑。

```
String requestString ="Service=AWSECommerceService"
               + "&Version=2013-29-03"
               + "&Operation=ItemSearch"
               + "&AssociateTag=myassociatetag"
               + "&SearchIndex=" +category
               + "&ItemPage=5"
               + "&Sort=relevancerank"
               + "&ResponseGroup=ItemAttributes,Images"
               + "&Keywords=" + keyword
               + "&Timestamp=[YYYY-MM-DDThh:mm:ssZ]"
               ; 
```

你能帮我并告诉我在这个请求字符串中添加 itemid 的位置吗？谢谢你 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:19:43.147

将响应组“ItemIds”添加到您的请求参数中以检索“ASIN”

*   "&ResponseGroup=ItemAttributes,Images,ItemIds"

UPC 由您的代码中已经存在的“ItemAttributes”响应组返回。如果它存在于亚马逊数据库中，它只会返回 UPC。

# c# - 如何在 C# 中关闭进程句柄

> ID：15846256
> 
> 赞同：0
> 
> 时间：2013-04-06T02:11:00.307
> 
> 标签：c#, process, handle

我有一个有两个不同句柄的进程。我想根据他们的句柄 ID 关闭一个或另一个。有没有办法在 c# 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:25:13.230

用这个：

```
public partial class TestClass {
    [DllImport("user32.dll")]
    static extern bool EnumWindows(EnumWindowsProc lpEnumFunc, IntPtr lParam);

    public delegate bool EnumWindowsProc(IntPtr hwnd, IntPtr lParam);

    public static void TestMethod() {
        var targetName="AcroRd32.exe";

        var processArray=(
            from process in Process.GetProcesses()
            let moduleName=(new Func<Process, String>(x => {
                try {
                    return x.MainModule.ModuleName;
                }
                catch(Win32Exception e) {
                    return default(String);
                }
            }))(process)
            where null!=moduleName
            where 0==String.Compare(targetName, moduleName, true)
            select process).ToArray();

        EnumWindows(
            (hwnd, lParam) => {
                foreach(var process in processArray)
                    if(process.MainWindowHandle==hwnd)
                        return !process.CloseMainWindow();

                return true;
            },
            IntPtr.Zero
            );
    }
} 
```

# assembly - 如何在 Assembly 中搜索 FAT12 系统中的文件

> ID：15846258
> 
> 赞同：0
> 
> 时间：2013-04-06T02:11:03.873
> 
> 标签：assembly, operating-system

目前，我一直在关注 OS Dev 上的 BrokenThorn 系列，但遇到了一些问题。现在，作为本教程的一部分，我目前正在编写在第二阶段引导加载程序中加载的部分，但不幸的是，代码崩溃了。这是我认为麻烦的代码部分：

代码：

```
;browse root directory for binary image
     mov     ax, WORD [bpbRootEntries]; load loop counter, bpbRootEntries is the number of entries in the FAT table
     mov     di, 0x0000 ; because rep cmpsb compares the string in es:di to ds:si, and es holds 0x7e00 (the location of the FAT Table), I decided to set di to 0x0000
     mov     cx, 0x000B; eleven character name           
     lea     si, [ImageName] ;set si to the memory location of ImageName so ds:si points to ImageName          
 .LOOP:     
 rep  cmpsb     
      jz     LOAD_FAT
      add     di, 32                            ; queue next directory entry
      dec ax
      cmp ax, 0x0
 jne .LOOP

 jmp     FAILURE 
```

这部分代码在 FAT 表中查找文件。但是，它无法找到它，因此崩溃。在此代码中，ImageName 是一个变量，其中包含值“KRNLDR SYS”。在我的软盘驱动器中，我的软盘驱动器中有一个名为“KRNLDR SYS”的文件（带有空格，而不是“KRNLDR.SYS”）。如果有人可以提供任何建议，那将是一个很大的帮助。

注意：我目前正在运行 64 位 Windows 7 PC

**更新**

在所有有用的评论之后，我更新了代码：

```
mov     ax, WORD [bpbRootEntries]             ; load loop counter
 mov     di, 0x0000                            ; locate first root entry
 mov     cx, 0x000B                            ; eleven character name               
 lea     si, [ImageName]                         ; image name to find            
 .LOOP:
      push di
      push si
      repe  cmpsb   
      pop di
      pop si
      jz     LOAD_FAT

      add     di, 32                            ; queue next directory entry

      dec ax
      or ax, ax
      jne .LOOP

      jmp     FAILURE 
```

不幸的是，操作系统仍然无法找到该文件。

**更新 2**

这是我用来加载根目录表的代码：

```
 LOAD_ROOT:

 ; compute size of root directory and store in "cx"

      xor si, si

      mov     ax, 0x0020                           ; 32 byte directory entry
      mul     WORD [bpbRootEntries]                ; total size of directory
      div     WORD [bpbBytesPerSector]             ; sectors used by directory
      xchg    ax, cx

 ; compute location of root directory and store in "ax"

      mov     al, BYTE [bpbNumberOfFATs]            ; number of FATs
      mul     WORD [bpbSectorsPerFAT]               ; sectors used by FATs
      add     ax, WORD [bpbReservedSectors]         ; adjust for bootsector
      mov     WORD [datasector], ax                 ; base of root directory
      add     WORD [datasector], cx

 ; read root directory into memory (7C00:0200)

     mov   dx, 0x7e00
     mov   es, dx
     mov     bx, 0x0                             ; copy root dir above bootcode
     call    ReadSectors 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:43:17.930

无论如何都会重复`REP`次数，并将设置为最后一次比较的结果。`CMPSB``CMPSB` `CX``ZF`

*   你需要一个`REPE`这里

即使使用`REPE`,`REPE CMPSB`也会修改两者`DI`，`SI`以便它们每个都指向比较最后一个字节之后的字节（假设`DF`设置为 UP）因此将 32 添加到`DI` **CERTAINLY**不会指向下一个 FAT 条目。

*   您需要`PUSH`同时在之前`DI`和之后立即返回（这不会影响）`SI``REPE CMPSB``POP``FLAGS`

这样一来，似乎也`DI`没有改变，并且添加 32 是有效的。`SI`

通过技巧，`OR AX,AX`将设置`ZF`为相同`CMP AX,0x0`但更小、更快的指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:32:31.007

我想我已经修好了（有点）。我使用了一个名为 WinHex 的十六进制编辑器，并在内存中找到文件的位置，并将其硬编码到程序中。它是暂时的，但在我可以开始用 C 为我的内核编程之前就足够了，我认为它会比汇编稍微简单一些。感谢大家的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T08:03:53.003

我和你一样，但在 Linux（Brokenthorn OS 教程）上使用 Bochs。我创建了一个软盘映像并将其与 Bochs 一起使用。对我来说，Demo1.zip (Stage2) 中的代码有效。它从 Fat12 读取第二阶段加载程序。但是一开始它不起作用，因为当我将引导扇区复制到软盘映像时，软盘映像被截断了。请注意，我只在 Stage2.asm 中更改了要打印的文本。

[https://sites.google.com/site/forthoperatingsystem/](https://sites.google.com/site/forthoperatingsystem/)

# java - 使用中断；在 Struts1 中

> ID：15846265
> 
> 赞同：0
> 
> 时间：2013-04-06T02:12:28.063
> 
> 标签：java, apache, struts, struts-1

我正在为我的 Web 应用程序使用 Struts 1.2。我正在遍历服装系列并搜索是否有任何服装的价格大于 1000 美元。如果其中任何一个满足条件，则无需遍历剩余的服装集合，只需中断并退出迭代器。

为了比较价格，我使用的是 ，它存在于 .

一旦满足服装价格条件（即>1000 美元），我就无法摆脱困境。

请让我知道如何打破 struts 1.2 中的迭代。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:59:26.207

Struts 1 没有任何`in-built`标签来打破`<logic:iterator>`中间。

# html - 我可以在这个复杂的不规则形状的链接上使用 CSS 悬停吗

> ID：15846267
> 
> 赞同：3
> 
> 时间：2013-04-06T02:13:01.363
> 
> 标签：html, css, hover, hyperlink

我已经查看了很多可能的解决方案，但仍然没有找到一个有效的解决方案。我正在尝试使用 CSS 让我的链接在悬停时发光

我尝试使用矩形的每个版本来包含我的图像以链接它们，但有些非常小并且重叠。有没有办法将多坐标合并到 CSS 中？我认为我的主要问题是悬停时发光的 css 代码要求按宽度和 hgt px 的链接大小。但我的 html 链接是不规则形状的 x 和 y 多边形坐标

这是我试图悬停的 CSS 之一，但如果不是 x 和 y 坐标，则不确定在宽度/高度区域中放置什么？

```
/* wiki image glow */
.wikiimageglow 
{ 
    margin-bottom: 10px; 
    width: px; 
    height:px; 
    display:block; 
    background:transparent url('http://cdn.obsidianportal.com/assets/199195/weird4.jpg') center top no-repeat; 
 }

.wikiimageglow:hover 
{ 
    background-image: url('http://cdn.obsidianportal.com/assets/199539/character.jpg');     
} 
```

这是链接

```
<img src="http://cdn.obsidianportal.com/assets/199195/weird4.jpg" width="654" height="690" border="0" usemap="#Map" />
<map name="Map" id="Map">
    <area shape="poly" coords="351,81,386,317,335,295,302,215" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/wikis/game-master-information" />
    <area shape="poly" coords="567,202,405,376,390,321,435,243" href="http://www.obsidianportal.com/campaigns/runelords-of-lord-ao/items" />
    <area shape="poly" coords="368,426,403,379,491,365,608,445" href="http://www.obsidianportal.com/campaigns/runelords-of-lord-ao/characters" />
    <area shape="poly" coords="308,430,364,427,430,489,443,628" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/wikis/critical-hits-and-misses" />
    <area shape="poly" coords="268,383,305,428,296,514,195,616" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/wikis/character-creation" />
    <area shape="poly" coords="279,323,270,378,198,431,53,412" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/adventure-log" />
    <area shape="poly" coords="126,173,332,296,281,321,197,298" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/wikis/geography" />
    <area shape="poly" coords="145,530,151,485,199,457,179,507" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/wikis/pride" />
    <area shape="poly" coords="109,352,99,318,107,288,139,270,159,305,151,335" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/wikis/wrath" />
    <area shape="poly" coords="220,144,232,139,286,143,292,164,254,189,228,185" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/wikis/gluttony" />
    <area shape="poly" coords="432,142,463,142,480,152,461,174,415,211,414,174" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/wikis/greed" />
    <area shape="poly" coords="524,287,551,302,564,358,535,355" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/wikis/sloth" />
    <area shape="poly" coords="520,469,501,506,459,524,463,499,498,472" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/wikis/envy" />
    <area shape="poly" coords="323,522,343,562,337,594,328,606,307,578" href="http://www.obsidianportal.com/campaign/runelords-of-lord-ao/wikis/lust" />
</map> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T02:47:18.543

我认为这不能仅通过 CSS 和 HTML 来解决。但是，我发现了这个不错的 jQuery 脚本。它使用您的`map`标记并创建`canvas`元素。

*   [演示](http://alt-web.com/DEMOS/jQuery-maphighlight.shtml)
*   [资源](https://github.com/kemayo/maphilight/)

> Maphilight 是一个 jQuery 插件，可以为图像地图添加视觉亮点。
> 
> 它提供了一个 jQuery 函数：$('.foo').maphilight()
> 
> 在 IE 中使用 VML。在其他浏览器中使用画布。Maphilight 已在 Firefox、IE、Safari、Chrome 和 Opera 中进行了测试。

注意：此脚本在最新版本的 jQuery 中不起作用，但`jquery-migrate`已修复。

这是[JSFIDDLE](http://jsfiddle.net/Zhs6q/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:39:28.953

我相信最简单的事情是创建基本上是您的原始图像的精灵，并且在侧面（通过css隐藏）您可以在悬停时显示悬停效果，它会替换图像的一部分，根据需要创建发光效果它是。

[示例](http://alistapart.com/d/sprites/ala-blobs2.html) [精灵图像](http://alistapart.com/d/sprites/blobs.gif)

[列表分开：精灵](http://alistapart.com/article/sprites)

# javascript - Javascript 引号块

> ID：15846271
> 
> 赞同：-1
> 
> 时间：2013-04-06T02:14:09.307
> 
> 标签：javascript

```
 var circle;
    var love = 30;

      document.getElementById("output"). innerHTML=("

     The Circle is __ Units with an Area of __
                    <svg version='1.1'
      width='360' height='300'
      xmlns='http://www.w3.org/2000/svg'>

          <circle  cx='50%' cy='50%' r='" + love  + " %'  stroke='black' 
          stroke-width='2' fill='red'/>
        </svg>"); 
```

我知道这里有一个语法错误，我确信它与块中的大量引号有关。我应该把它变成更小的字符串并将它们组合起来。有点像 .= 与 PHP？（该块的重点是将 SVG 半径{r} 设置为可变的爱。） - 感谢 Josh

编辑 2 #（感谢社区支持，这里有一些漂亮整洁的工作代码）

```
 var love = 30;
            var va1 = "The Circle is __ Units with an Area of __ ";
                    var va2 =" <svg version='1.1' width='360' height='300' xmlns='http://www.w3.org/2000/svg'>" ;
                    var va3 = " <circle  cx='50%' cy='50%' r='" ;
                    var va4 =  "%'  stroke='black'  stroke-width='2' fill='red'/> </svg>";
                  document.getElementById("output"). innerHTML=(va1+ va2 + va3 + love +va4); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T02:19:27.990

`\`对多行字符串使用转义符号

像这样

```
 var circle;
 var love = 30;

  document.getElementById("output"). innerHTML=(" \
        The Circle is __ Units with an Area of __ \
                <svg version='1.1' \
                width='360' height='300' \
                xmlns='http://www.w3.org/2000/svg'> \
                <circle  cx='50%' cy='50%' r='" + love  + "%'  stroke='black'  \
               stroke-width='2' fill='red'/> \
               </svg>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:43:08.890

老实说，我会避免串联，行尾标记，而只是构建这些元素。在我看来，代码不会那么脆弱，而且更容易看。这就是我在下面所做的，包括一个小的帮助函数，用于将对象文字的成员映射到我的元素的属性：

在线查看：http: [//jsfiddle.net/jonathansampson/er9ys/](http://jsfiddle.net/jonathansampson/er9ys/)

```
// References and values we'll be needing
var out = document.querySelector("body"), 
    nsp = "http://www.w3.org/2000/svg", 
    lov = 30;

// Build our message, svg element, and circle
var msg = document.createTextNode("Circle is _ Units, w/ an Area of _");
var svg = makeEl(nsp, "svg", { version: 1.1, height: 300, width: 360 });
var ccl = makeEl(nsp, "circle", { cx: "50%", cy: "50%", r: lov + "%" });

// Add children to appropriate parents
svg.appendChild(ccl);
out.appendChild(msg);
out.appendChild(svg);

// Small utility for adding attrs
function makeEl ( namespace, tag, attrs ) {
    var el = document.createElementNS(namespace, tag), prop;
    for ( prop in attrs ) 
        el.setAttribute( prop, attrs[prop] );
    return el;
} 
```

# javascript - 当 for 循环处理对象数组时，forEach 不起作用

> ID：15846274
> 
> 赞同：14
> 
> 时间：2013-04-06T02:14:37.853
> 
> 标签：javascript, arrays, function, for-loop, foreach

我有一个这样的数组

```
var updates = []; 
```

然后我像这样将东西添加到数组中

```
updates["func1"] = function () { x += 5 }; 
```

当我使用 for 循环调用函数时，它按预期工作

```
for(var update in updates) {
     updates[update]();
} 
```

但是当我使用 forEach 时它不起作用！？

```
updates.forEach(function (update) {

    update();
}); 
```

forEach 绝对可以在我的 google chrome 浏览器中运行，我做错了什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-06T02:21:09.843

[forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)迭代而`indexes`不是 over `properties`。你的代码：

```
updates["func1"] = "something"; 
```

将属性添加到对象 - 顺便说一下是数组 - 而不是数组的元素。事实上，它相当于：

```
updates.func1 = "something"; 
```

如果您需要类似 hashmap 的东西，那么您可以使用普通对象：

```
updates = {};

updates["func1"] = "something"; 
```

然后迭代 using `for…in`，[不应该在数组上使用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)

或者您可以使用[Object.keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)检索属性并对其进行迭代：

```
Object.keys(updates).forEach(function(key) {
    console.log(key);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T02:18:38.953

您没有将项目添加到数组中，而是将对象属性添加到数组对象中。 `for .. in`将返回所有属性，`forEach`仅迭代数组元素。

要添加到数组中，您可以这样做：

```
updates.push(function () { x += 5 }); 
```

如果您打算按照自己的方式添加，那么只需使用对象而不是数组：

```
var updates = {} 
```

然后使用`for ... in`.

# android - Android让一个媒体播放器停止另一个

> ID：15846277
> 
> 赞同：0
> 
> 时间：2013-04-06T02:14:47.377
> 
> 标签：android, media

我开发了一个应用程序，因为它听起来不太好，如果两个声音重叠，我想在播放下一个声音时停止声音。我这样试过

按钮1：

```
 MediaPlayer mediaPlayerW = MediaPlayer.create(getBaseContext(), R.raw.w1);      
              if(mediaPlayerW.isPlaying()){
                 mediaPlayerW.stop();}
                else{
                 mediaPlayerW.start();
                } } 
```

按钮2：

```
MediaPlayer mediaPlayerW = MediaPlayer.create(getBaseContext(), R.raw.w2);       
              if(mediaPlayerW.isPlaying()){
                 mediaPlayerW.stop();}
                else{
                 mediaPlayerW.start();
                } } 
```

现在的问题是，mPlayer 总是获得一个新的 ID，因此不会停止“旧”的声音。

然后我用 setDataSource 尝试了它，但我仍然必须创建 MediaPlayer 的新对象，所以 ID 仍然改变。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:19:18.043

您的解决方案不可*扩展*，无法有效满足您的需求。

Android 设计了一个解决方案来解决您当前面临的问题：[`AudioFocus`](http://developer.android.com/training/managing-audio/audio-focus.html)API。

该解决方案更具可扩展性，因为它可以处理几乎无限数量的`MediaPlayer`对象，并且可以在您的所有应用程序中工作。

# javascript - 价格字段验证

> ID：15846278
> 
> 赞同：-3
> 
> 时间：2013-04-06T02:15:07.137
> 
> 标签：javascript, validation

将有一个表单域，它总是以“zzzzzzz.zz”的形式显示。例如，如果表单字段为 5，它将显示为 5.00；如果表单域为 005，则显示为 5.00；如果表单字段是空格，它将显示为空条目。永远的变化将在“onBlur”上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:26:12.690

我相信这就是你要找的？[http://jsfiddle.net/c7YPH/1/](http://jsfiddle.net/c7YPH/1/)

```
$("#foo").blur(function() {
    $(this).val(Number($(this).val()).toFixed(2));
}); 
```

此外，以上要求您获取 jquery 并将其包含在 $(document).ready 中。

如果您打算做很多 js，jquery 将是一个好主意......但使用普通 js：http: [//jsfiddle.net/c7YPH/2/](http://jsfiddle.net/c7YPH/2/)

```
document.getElementById("foo").onblur=function(){ 
    this.value = Number(this.value).toFixed(2);
}; 
```

# libev - 一起使用 libev ev_io 和 ev_idle 事件

> ID：15846280
> 
> 赞同：0
> 
> 时间：2013-04-06T02:15:35.890
> 
> 标签：libev

我有兴趣收听传入的连接，当没有活动连接时我想做后台处理。我还没有找到这两者的任何例子。

我想做类似这样的事情：

从一个例子：

```
//ev_io callback

static void server_cb(EV_P_ ev_io *w, int revents)
{
  //Accept new client connection
  //Read from client socket

  //stop event loop
  ev_io_stop(EV_A_ &client->io);

  //send back to client

  //start event loop again
  ev_io_start(EV_A_ &client->io);

}

main()
{
  // To be sure that we aren't actually blocking
  ev_periodic_init(&every_few_seconds, not_blocked, 0, 5, 0);
  ev_periodic_start(EV_A_ &every_few_seconds);

  // Get notified whenever the socket is ready to read
  ev_io_init(&server.io, server_cb, server.fd, EV_READ);
  ev_io_start(EV_A_ &server.io);

 } 
```

现在在这个例子中，我应该在哪里添加空闲事件以及应该在何时何地启动和停止空闲事件，这样它就不会干扰主事件处理程序，并且应该只在它空闲时调用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T18:34:51.710

好吧，我也是 libev 的新手，但我将这个简单的服务器演示放在一起，该服务器在套接字上接收数据同时还处理超时和空闲事件。

```
#include <ev.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>

static struct ev_loop *loop;
static ev_timer timeout_watcher;
static ev_io in_watcher;
static ev_idle idle_watcher;
static int sock_fd;

// socket input watcher
static void in_cb(EV_P_ ev_io *watcher, int revents) {
    int r, t;
    char buf[1024];
    for (t = 0; (r = read(sock_fd, buf, sizeof(buf))) > 0;) {
        t += r;
        write(STDOUT_FILENO, buf, r); // copy input to stdout
        if (buf[r-1] == '\n') break; // operate line-at-a-time
    }
    fprintf(stderr, "in: count = %d\n", t);
    if (r == 0) {
        fputs("in: connection closed\n", stderr);
        ev_io_stop(loop, &in_watcher); // stop the socket watcher
        ev_break(loop, EVBREAK_ALL); // exit the loop
    } else if (r < 0) {
        perror("read");
    }
}

static void timeout_cb(EV_P_ ev_timer *watcher, int revents) {
    fprintf(stderr, "timeout: now = %f\n", ev_now(loop));
}

static void idle_cb(EV_P_ ev_idle *watcher, int revents) {
    static long idle_count = 0;
    fprintf(stderr, "idle: count = %ld\n", ++idle_count);
    sleep(1); // simulate doing stuff
}

int main() {

    extern int errno;

    int master_fd;
    int sock_opt = 1;
    int conn_port = 7000;
    struct sockaddr_in addr;
    socklen_t addrlen;

    // **** the following is needed to set up a socket to receive data ****
    master_fd = socket(AF_INET, SOCK_STREAM, 0);
    if (master_fd == -1) {
        perror("socket");
        return errno;
    }
    if (setsockopt(master_fd, SOL_SOCKET, SO_REUSEADDR, (char *) &sock_opt, sizeof(sock_opt)) == -1) {
        perror("setsockopt");
        return errno;
    }
    addr.sin_family = AF_INET;
    addr.sin_addr.s_addr = INADDR_ANY;
    addr.sin_port = htons(conn_port);
    addrlen = sizeof(addr);
    if (bind(master_fd, (struct sockaddr *) &addr, addrlen) != 0) {
        perror("bind");
        return errno;
    }
    if (listen(master_fd, 3) != 0) {
        perror("listen");
        return errno;
    }

    fprintf(stderr, "awaiting a connection on port %d\n", conn_port);
    sock_fd = accept(master_fd, (struct sockaddr *) &addr, &addrlen);
    if (sock_fd == -1) {
        perror("accept");
        return errno;
    }
    fputs("in: connection established\n", stderr);
    // **** end of socket setup code ****

    // define a loop
    loop = ev_default_loop(0);

    // define a repeating timer
    ev_timer_init (&timeout_watcher, timeout_cb, 5.0, 5.0);
    ev_timer_start (loop, &timeout_watcher);

    // define an idle process
    ev_idle_init(&idle_watcher, idle_cb);
    ev_idle_start (loop, &idle_watcher);

    // define the socket data receiver
    ev_io_init(&in_watcher, in_cb, sock_fd, EV_READ);
    ev_io_start (loop, &in_watcher);

    // run the loop
    ev_run(loop, 0);

    // clean up
    close(sock_fd);
    close(master_fd);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T03:09:22.920

您应该在调用用于进入主循环的 ev_loop() 之前添加 ev_idle。（实际上，你可以在任何你想要的地方添加它。但是对于上述情况，我认为它是可以的。）

只有当没有其他事件挂起时，才会调用您与空闲观察者绑定的回调。它不会干扰任何其他事件的回调。回调将按顺序调用。

顺便说一句，我建议你在 libev 中小心使用空闲事件。因为如果你不控制它，它会消耗整个cpu。定期事件会更好。如果你想使用它（例如在计算密集型程序中），最好在一次回调中做一件小事。这样它就会将控件放回主循环以响应其他事件。（例如 io 事件）

PS：您不必在 server_cb 回调中调用 ev_io_stop 并再次调用 ev_io_start 。因为回调根本不会受到干扰。

# jquery-ui - JQueryUI 使用选择元素值设置 datepicker 默认日期

> ID：15846283
> 
> 赞同：1
> 
> 时间：2013-04-06T02:16:05.603
> 
> 标签：jquery-ui, select, datepicker

我有一个日期选择器，我想使用选择元素将 defaultDate 参数设置为从今天起 6、12、24 或 60 个月。

我遇到了麻烦，我使用选择元素更改选择的选项，其中选择元素的值不会在 DOM 中更新，因此日期选择器使用与页面一起加载的选定值。

我在这里做了一个小提琴[http://jsfiddle.net/GLsTM/1/](http://jsfiddle.net/GLsTM/1/)所以你可以看到我指的是什么。

```
<form>
<select name="Interval" id="Interval">
    <option value="6">6 Months</option>
    <option value="12">12 Months</option>
    <option value="24">2 Years</option>
    <option value="60">5 Years</option>
</select>
<input type="text" class="date" placeholder="dd/mm/yyyy"></input> 
```

```
$(".date").datepicker({
        dateFormat: 'dd/mm/yyyy',
        showOn: 'button',
        firstDay: 1,
        defaultDate: "+"+$("#Interval").val()+"m"
    }); 
```

日期选择器的默认日期是“+6m”，但如果您将选择更改为 12 个月，日期选择器仍然使用 6 个月。我希望它使用 defaultDate: '+12m' 更新日期选择器

任何人都可以看到什么会使这项工作？

谢谢格雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:21:05.027

如果您告诉日期选择器更改，更改的值`select`只会影响日期选择器。否则，它永远不会知道更改，因为您使用起始值设置了一次。

```
$("#Interval").on("change", function() {
    $(".date").datepicker("option", "defaultDate", "+" + $(this).val() + "m");
}); 
```

或者，您可以传递一个对象，以防您需要发送多个[`option`](http://api.jqueryui.com/datepicker/#method-option)值：

```
$("#Interval").on("change", function() {
    $(".date").datepicker("option", { defaultDate: "+" + $(this).val() + "m" });
}); 
```

# html - 你如何制作一个固定的、响应式的侧边栏？

> ID：15846286
> 
> 赞同：2
> 
> 时间：2013-04-06T02:16:33.577
> 
> 标签：html, css, responsive-design

这个网站有一个漂亮的侧边栏： http: [//thenextweb.com/](http://thenextweb.com/) 我知道如何在 css 中制作一个固定的侧边栏，但是让它在某个点停止滚动是我迷路的地方。我认为让它以一定的宽度消失是一个媒体查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T11:45:09.360

试试这个脚本

```
 <script>

$(document).ready(function(){
  $('#page').scroll(function(){
     if(document.getElementById("page").scrollTop > 100) {
       $('#sidebar').css("position","fixed");
     }

   });

}); 
```

page 是包装元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T16:03:42.200

我制作了一个带有固定在其相关容器中的侧边栏的 CodePen。

你可以在这里看到它：http: [//codepen.io/tomanagle/pen/vGaEvG](http://codepen.io/tomanagle/pen/vGaEvG)

至于让它在某个断点消失。使用媒体查询。

```
@media screen and (max-width: 1280px){
  aside{
    display: none;
  }
  #article{
    margin: auto;
    float: none;
  }
} 
```

还有一个库可以用来制作粘性侧边栏：http: [//leafo.net/sticky-kit/](http://leafo.net/sticky-kit/)

# integer - 如何让 Vim 测试用户输入是否为整数？

> ID：15846288
> 
> 赞同：4
> 
> 时间：2013-04-06T02:17:00.620
> 
> 标签：integer, vim

我确定这可能是一个简单的问题，但我被卡住了。我需要编写一个小型 Vim 脚本程序来请求用户输入。如果用户输入一个整数，则程序继续。如果他们不这样做，那么程序会循环回来并要求他们重试。如果他们输入“X”，程序就会退出。如何验证用户是否输入了整数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T10:12:30.047

其他答案已经提供了很好的解决方案；为了完整性，我只想使用正则表达式添加更通用的验证：

```
if input =~# '^\d\+$'
    echo "input is a number"
endif 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T05:57:21.900

您可以使用以下`type()`功能：

```
if type(myvar) == type(0)
  echo "myvar is a number"
endif 
```

见`:h type()`。

# php - 使用 php simple html dom 或 phpQuery 查找 div 类值

> ID：15846292
> 
> 赞同：2
> 
> 时间：2013-04-06T02:18:06.730
> 
> 标签：php, html, dom, html-parsing

我正在尝试掌握 php 简单的 html dom，但在 div 类方面遇到了一些问题。

例如，假设在 newegg 上我想找到 div 类“skiplink”的值（我只是在网站上随机选择了一个类）。根据在[这里](http://simplehtmldom.sourceforge.net/manual.htm)找到的 php simple html dom 文档，我应该只使用。

```
$html = file_get_html('http://www.newegg.com');

print_r($ret = $html->find('.skiplink')); 
```

现在它只是挂起，似乎冻结了。我知道安装正在运行，因为以下代码有效。

```
foreach($html->find('a') as $element) 
   echo $element->href . '<br>'; 
```

基本上，我如何查看给定网站上的特定 div 类并找到该值？

有没有更简单的方法可以做到这一点，例如使用 phpQuery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:51:54.867

从这个网站上的一个简单搜索：[如何从 <div>value</div> 中获取价值？](https://stackoverflow.com/questions/8383396/how-to-get-value-from-divvalue-div)

但这就是他们所说的；

```
$doc = new DomDocument();
$doc->loadHTMLFile('http://www.results.com');
$thediv = $doc->getElementById('result');
echo $thediv->textContent; 
```

或者你可以通过 id 获取它的值来找到你的 div 子句的 innerText 值；

```
$div = $doc->getElementById('result');
if($div) {
    echo $div->textContent;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T02:58:53.827

或改用 XPath，此代码将输出 src

```
//init DOMDocument
$dom = new DOMDocument();
//get the source from the URL
$html = file_get_contents("URL");
//load the html
dom->loadHTML($html);
//init XPath
$xpath = new DOMXPath($dom);

//fetch the src from the iframe within a class name
$iframe_src=$xpath->query('//*[@class="CLASSNAME"]/iframe//@src');

vardump($iframe_src); 
```

要获取内容，请使用`file_get_contents()`

```
$options  = array('http' => array('user_agent' => 'USERAGENT')); //you must specify a user agent
$context  = stream_context_create($options);
$response = file_get_contents($iframe_src, false, $context); 
```

# android - 如何在android emmc中读取特定区域

> ID：15846294
> 
> 赞同：0
> 
> 时间：2013-04-06T02:18:17.750
> 
> 标签：android

我想读取我设备的 emmc，因为恢复似乎就在上面。cat /proc/mtd 不提供任何输出，并且 sp flash 工具无法读取设备 :(

我想要做的是用库存文件（它是一个 MTK 设备）替换 CWM 恢复中的一些文件。

cat /proc/dumchar_info 给出了这样的表：

```
Part_Name   Size    StartAddr   Type    MapTo
preloader    0x0000000000040000   0x0000000000000000   2   /dev/misc-sd
dsp_bl       0x00000000005c0000   0x0000000000040000   2   /dev/misc-sd
mbr          0x0000000000004000   0x0000000000000000   2   /dev/block/mmcblk0
ebr1         0x000000000005c000   0x0000000000004000   2   /dev/block/mmcblk0p1
pmt          0x0000000000400000   0x0000000000060000   2   /dev/block/mmcblk0
nvram        0x0000000000300000   0x0000000000460000   2   /dev/block/mmcblk0
seccfg       0x0000000000020000   0x0000000000760000   2   /dev/block/mmcblk0
uboot        0x0000000000060000   0x0000000000780000   2   /dev/block/mmcblk0
bootimg      0x0000000000600000   0x00000000007e0000   2   /dev/block/mmcblk0
recovery     0x0000000000600000   0x0000000000de0000   2   /dev/block/mmcblk0
sec_ro       0x0000000000600000   0x00000000013e0000   2   /dev/block/mmcblk0p5
misc         0x0000000000060000   0x00000000019e0000   2   /dev/block/mmcblk0
logo         0x0000000000300000   0x0000000001a40000   2   /dev/block/mmcblk0
expdb        0x00000000000a0000   0x0000000001d40000   2   /dev/block/mmcblk0
ebr2         0x0000000000004000   0x0000000001de0000   2   /dev/block/mmcblk0
android      0x0000000020100000   0x0000000001de4000   2   /dev/block/mmcblk0p6
cache        0x0000000020100000   0x0000000021ee4000   2   /dev/block/mmcblk0p2
usrdata      0x0000000020100000   0x0000000041fe4000   2   /dev/block/mmcblk0p3
fat          0x0000000083f1c000   0x00000000620e4000   2   /dev/block/mmcblk0p4
bmtpool      0x0000000000a00000   0x00000000ff9f0050   2   /dev/block/mmcblk0
Part_Name:Partition name you should open;
Size:size of partition
StartAddr:Start Address of partition;
Type:Type of partition(MTD=1,EMMC=2)
MapTo:actual device you operate 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T22:10:09.457

可以看到，里面的所有分区`dumchar_info`都是类型2（=emmc，不是mtd），所以用`cat /proc/emmc`代替`cat /proc/mtd".`

无论如何，您可能会`MTKDroidTools by Rua1`为您的 MTK 设备创建一个分散文件，然后将此分散加载到 SP Flash 工具，单击回读选项卡，然后添加所需的恢复分区的地址和大小以将其转储到文件中。

要查找地址和大小，只需在文本编辑器中打开分散文件，复制标签后的十六进制数字`revocery`（这将是 emmc 中的物理地址），然后从下一个分区的地址中减去它（这将是大小）。

或者您可以使用来自 dumchar_info 的大小，但不要使用这些地址，因为这些地址是与映射设备相关的相对地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T05:47:59.200

您需要获取手机恢复的分区地址。然后使用 dd 拉出该分区，使用 Bruno Martin 的脚本将其解压缩，进行更改，重新打包，然后将其 dd 回其地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-18T13:16:52.897

如果要获取 emmc 的分区详细信息，请键入

> 猫 /proc/emmc

Mtk 恢复不会在这里列出。

随着您的 dumchar_info 恢复在 mmcblk0 分区中。您可以使用 dd 命令复制恢复并将其闪回。

用于复制恢复分区类型

> dd if=/dev/block/mmcblk0 of=/sdcard/recovery.img bs=1024 count=6144 skip=14208

您可以在 SD 卡中找到您的 recovery.img。

对于闪回：

> dd if=/path_of_new_recovery_img of=/dev/block/mmcblk0 bs=1024 count=6144 seek=14208

或者

> dd if=/path_of_new_recovery_img of=/dev/recovery

# javascript - 尝试通过 URI 发送加密文本 - /uDDBA 导致“URIError: URI Malformed”

> ID：15846295
> 
> 赞同：0
> 
> 时间：2013-04-06T02:18:27.397
> 
> 标签：javascript, unicode, uri, encryption-symmetric

简单代码：

```
encodeURIComponent("\uDDBA") 
```

结果：

```
URIError: URI malformed 
```

我正在尝试做一个简单的加密，它将接受一些用户输入的文本和密码，然后它将加密该文本并将其保存到服务器。

基本上我正在尝试编码一个字母“t” - 并且算法已经确定应该是 56762 或 DDBA 十六进制。

但是，如果我尝试使用 encodeURIComponent 对该字符进行编码，那么某些十六进制值似乎会导致错误。

我该如何解决这个问题？

我基本上需要知道可以正确通过javascript中的encodeURIComponent的可用字符范围。

目前我正在做这样的事情：

```
var xor = 0xDDCE;

var plainText = "t".charCodeAt(0);
var encoded = plainText ^ xor;
var encodedChar = String.fromCharCode(encoded);
var uri = "/someuri?character=" + encodeURIComponent(encodedChar);

// This is how i would get the plain text back
var decoded = encodedChar.charCodeAt(0) ^ xor;
var decodedChar = String.fromCharCode(decoded); 
```

这是一个非常简化的版本，其中异或值是静态的。在实际情况下，xor 值将基于一堆变量来计算。

假设“/someuri”不是由我构建的，并且最初并不是为了接收加密数据而构建的，我只是想使用这个 URI。

此外，我的加密算法可以更改。该`xor`值将使用一个相当简单的算法生成，该算法使用用户输入的密码和字符的位置。

我正在考虑使这项工作的一种方法是减少可能的输出字符的总数并执行某种映射......但我无法真正想象代码。

编辑：

感谢您对我选择的加密的安全性发表评论；然而，实际的数据安全方面并不那么重要。我只是想防止“普通”人能够阅读输出的加密文本（假设可能有很多）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:53:33.570

如果您不希望普通人看到文本，只需使用 POST 请求或 Base64。

至于实际的安全性，这完全没用。攻击者不需要知道明文是什么，他只需要知道用户发送到您的站点的内容并自己发回相同的数据即可。防止这种情况的唯一方法是在您网站的任何地方都使用 SSL。如果他们愿意，他们可以使用您在页面源代码中找到的算法来解密它。

* * *

Javascript 字符串不能立即验证它们的状态有点可怕，因为它基本上可以免费完成。Javascript 字符串与并非所有序列都有效的[UTF-16* 编码相关联。](http://en.wikipedia.org/wiki/UTF-16)当没有立即跟随为 0xDC00 - 0xDFFF 时，在 0xD800 - 0xDBFF 之间的单位值是无效的。如果先前的单位值不是 0xD800 - 0xDBFF，则具有 0xDC00 - 0xDFFF 是无效的。

许多事情都可能导致字符串违反这一点，并且由于字符串不会自我验证，您只会在很久以后才会看到错误。

你总是可以一次去8位，它会工作的。

```
var xor = 0xDDCE;

var input = "t",
    output = "",
    i = 0,
    ch;

while( isFinite( ch = input.charCodeAt(i++) ) {
    var xored = ch ^ xor;
    output += String.fromCharCode(
        (xored & 0xFF00) >> 8,
        xored & 0xFF
    );
}

//output is "Ýº", or 0x00DD 0x00BA, each char is always 0x00XX 
```

* * *

*该规范也允许使用 UCS-2，但我从未见过。如果您想确定：

```
function areStringsUTF16() {
    try {
        var str = decodeURIComponent("%F0%A0%80%80");
        return str.charCodeAt(0) === 0xd840 &&
               str.charCodeAt(1) === 0xdc00;
    }
    catch(e) {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:29:48.967

对不起，

我将尝试回答我自己的问题

运行此代码：

```
 (function() {
    var last = null;
    for ( var idx = 0; idx < 0xffff; idx++) {
        try {
            encodeURIComponent(String.fromCharCode(idx));
        } catch (e) {
            if (idx != last + 1) {
                console.log(idx);
            }
            last = idx;
        }
    }
    console.log(last);
 })(); 
```

这将导致

```
55296
57343 
```

这意味着 \uD800 和 \uDFFF 之间的任何值都是不允许的。

当我写这篇文章时，我想到我应该只写一个 for 循环并测试所有内容。

# python - Python 2.5 json 无需安装 simplejson

> ID：15846301
> 
> 赞同：2
> 
> 时间：2013-04-06T02:19:28.663
> 
> 标签：python, json

我正在尝试在多个节点上为分布式项目部署一些代码。这些节点上只有 Python 2.5，这是一个问题，因为我在 json 中发送数据（主要是 json.loads 和 json.dumps）。由于政策原因，我无法安装新模块或升级 python。

我想解决这个问题的一种方法是将json中的字符串手动转换为python对象，反之亦然，但这听起来很痛苦。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T02:25:18.120

手动下载simplejson并将其用作应用程序模块怎么样？你可以在这里得到它：[https ://pypi.python.org/pypi/simplejson](https://pypi.python.org/pypi/simplejson)

# javascript - 幻灯片在预览站点中显示，但在上传时不显示

> ID：15846303
> 
> 赞同：1
> 
> 时间：2013-04-06T02:20:03.870
> 
> 标签：javascript, jquery, hosting

我的网页上有一个 JQuery 幻灯片 ( [camera.js](http://www.pixedelic.com/plugins/camera/) )。当我在预览查看器中查看幻灯片时，它完美地显示和工作。但是，当我将它上传到我的托管站点时，它会显示幻灯片，但没有图片，如您[在此处](http://pomona-hs.jeffco.k12.co.us/pomona-hs/html/newpomona/index.html)看到的那样。

如果有人可以让我知道我做错了什么，将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:34:35.010

您遇到了一些错误，这些错误可能使事情无法正常工作。

1) Javascript：getURL.js 的第 3 行应该`()`在`getAddress`. （这可能是主要原因。

2) camera.js 图像资产有一些 404。

3) 索引第 96 行“getAddress 未定义”。这是 1) 的结果。

## 更新：

看起来好像您在容器存在之前初始化插件。您应该将代码放在页脚或 .ready 事件中，如下所示：

```
$(document).ready(function(){
    $('#camera_wrap_3').camera({
        pagination: false,
        thumbnails: false,
    imagePath:'images/camera/'          
    });
}); 
```

ready 函数会等到页面加载完毕后再执行代码。

# java - 在类声明中抛出异常

> ID：15846304
> 
> 赞同：1
> 
> 时间：2013-04-06T02:20:06.370
> 
> 标签：java, class, exception, throw

我试图在类的声明中抛出异常。像这样的东西：

```
class myClass throws A_Dangerous_Exception implements Something_to_Implement {

...

} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T02:22:03.987

你不能那样做。您可能的意思是从类的构造函数中抛出异常：

```
class myClass implements Something_to_Implement {
  myClass() throws A_Dangerous_Exception {}
} 
```

如果您有多个构造函数，如果需要，每个构造函数都可以有不同的`throws`子句：

```
class myClass implements Something_to_Implement {
  myClass() throws A_Dangerous_Exception {}
  myClass(int a) throws A_Dangerous_Exception, A_Not_So_Dangerous_Exception {}
} 
```

然后，无论何时实例化该类，都必须处理异常，方法是捕获它们或在`throws`实例化类的方法的子句中声明它们：

```
void myMethod() {
  try {
    new myClass();
  } catch (A_Dangerous_Exception e) {}
} 
```

或者

```
void myMethod() throws A_Dangerous_Exception {
  new myClass();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T02:21:06.950

你不能。异常只能从方法或构造函数中抛出。你可以这样做：

```
class myClass implements Something_to_Implement {

   public myClass() throws A_Dangerous_Exception {
      ...
   }
} 
```

小心整理任何资源，例如`FileOutputStream`在从构造函数抛出异常之前。

阅读：[例外](http://docs.oracle.com/javase/tutorial/essential/exceptions/)

# javascript - Aptana 3 for Windows 不会运行 javascript

> ID：15846309
> 
> 赞同：0
> 
> 时间：2013-04-06T02:20:29.370
> 
> 标签：javascript, windows, ide, aptana3

问题：Aptana 3 for Windows 不能运行 JavaScript。

我是一个完全的 IDE 菜鸟。我对设置 IDE 一无所知，希望能得到一些帮助。

我在我的 Windows 7 机器上安装了 Aptana Studio 3 用于学习 JavaScript，但我无法让它做任何真正有用的事情，比如运行或调试代码。

例如，如果我输入：console.log("hello world");

我尝试运行代码，它会打开 Firefox 并简单地显示原始代码。

如何让 Aptana 在 Aptana 的内置控制台中运行我的 JavaScript 代码？

我需要在 Aptana 旁边安装哪些软件来进行 JavaScript 开发？

# javascript - 逐渐应用样式（过渡似乎不起作用）可能使用 js / jQuery？

> ID：15846310
> 
> 赞同：2
> 
> 时间：2013-04-06T02:20:48.917
> 
> 标签：javascript, jquery, css, css-transitions

我正在尝试逐渐淡出滚动条。目前，我如何使滚动条出现是通过向主体添加一个将溢出更改为自动的类，但它看起来非常生涩/突然。

这是突然添加显示滚动条的类的 JS 代码：

```
var bodywidth = $('body').width();
var scrollwidth = 10;
$('body').mousemove(function(e){
    var x = e.pageX - this.offsetLeft;

    if(x>bodywidth-scrollwidth)
        $('body').addClass("auto");
    else
        $('body').removeClass("auto");
}); 
```

这是对应于这些类的 CSS：

```
body
{
    margin:0;
    overflow:hidden;
}
.auto
{
    overflow:auto;
} 
```

我怎样才能使这种转变不那么突然？有没有更好的方法来添加类和删除类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:56:35.693

滚动条可以通过 -webkit-scrollbar 自定义，但这不能动画（或者至少我没有成功），并且在其他浏览器中的支持很差。

另一种方法是在滚动条上方设置一个 div，使其与基本 div 的颜色相同，并使其逐渐透明以显示滚动条

html是：

```
<div class="container">
<div class="base">
<p>aaa   aaaaa aaaaa aaaaaaaa aaaa aaa aaa aaaa bbbbbb bbbbbb cccc cccc cccc
</p>
</div>
<div class="hide">
</div>
</div> 
```

CSS是：

```
.base {
    width: 100px;
    background-color: white;
    top: 0px;
    position: absolute;
    height: 130px;
    overflow: hidden;
    padding-right: 20px;
}
.base.clipped {
    overflow: auto;
}

.hide {
    position: absolute;
    width: 19px;
    height: 100%;
    right: 0px;
    background-color: white;
    top: 0px;
    -webkit-transition: all 2s;
    z-index: 10;
}

.hide.clipped {
    background-color: transparent;
} 
```

我一直保留元素的类，但添加了第二个类。我在将具有滚动条的元素中设置了一个填充，以便在不重新排列布局的情况下为其留出空间。隐藏元素可以用 css 转换，溢出不能。

javascript是

```
$("*").click(function(){
    var obj = $(".base");
    var hid = $(".hide");
    if (obj.hasClass("clipped")) {
        hid.removeClass("clipped");
        setTimeout(function() {
            obj.removeClass("clipped");
        }, 2000);
    } else {
        hid.addClass("clipped");
        obj.addClass('clipped');
    }
 }); 
```

## [演示](http://jsfiddle.net/vals/GE8BC/)

# ios - main.m 在 iOS 中是如何工作的？

> ID：15846324
> 
> 赞同：0
> 
> 时间：2013-04-06T02:22:46.233
> 
> 标签：ios, uiapplication

```
int main(int argc, char *argv[])
{
   NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
   int retVal = UIApplicationMain(argc, argv, nil, nil);
   [pool release];
   return retVal;
} 
```

1.  UIApplicationMain() 调用只会在我们的应用程序执行完成后返回吗？因为我有下一行 [pool release]

2.  如何在 main() 中传递命令行参数？

3.  UIApplicationMain() 将返回的可能 int 值及其状态是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:31:06.553

> UIApplicationMain() 调用只会在我们的应用程序执行完成后返回吗？因为我有下一行 [pool release]

`UIApplicationMain()`永远不会回来。和`[pool release]`只是`return`为了审美平衡。

> 如何在 main() 中传递命令行参数？

命令行参数已经存在于`argv`. 您可以在`UIApplicationMain()`. 如果您的意思是“我如何在外部访问它们`main()`”，请参阅[NSProcessInfo](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSProcessInfo_Class/Reference/Reference.html)。这在 iOS 中通常不是很有用。

> UIApplicationMain() 将返回的可能 int 值及其状态是什么？

没有了。请参阅[UIKit 函数参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)。

# ios - 关闭 QLPreviewController 崩溃：仍然需要自动布局

> ID：15846325
> 
> 赞同：0
> 
> 时间：2013-04-06T02:23:01.753
> 
> 标签：ios, objective-c

我正在开发一个带有`SplitViewController`. 在我的`DetailViewController`中，有一个按钮用于呈现`QLPreviewController`和显示文档。到目前为止一切正常，但是，当我使用`Done`左上角的按钮关闭预览控制器时，应用程序会引发异常并出现以下错误：

```
*** Assertion failure in -[UIView layoutSublayersOfLayer:], /SourceCache/UIKit_Sim/UIKit-2380.17/UIView.m:5781
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after sending -viewDidLayoutSubviews to the view controller. DetailViewController's implementation needs to send -layoutSubviews to the view to invoke auto layout.'
*** First throw call stack: (...)
libc++abi.dylib: terminate called throwing an exception 
```

以下是我如何实现的表示`QLPreviewController`及其委托方法：

```
- (IBAction)previewButtonPressed:(id)sender
{
    QLPreviewController *ql = [[QLPreviewController alloc] init];
    ql.dataSource = self;
    ql.delegate = self;
    ql.currentPreviewItemIndex = 0;
    [self presentViewController:ql animated:YES completion:NULL];
}

- (id <QLPreviewItem>)previewController:(QLPreviewController *)controller previewItemAtIndex:(NSInteger)index
{
    return [NSURL fileURLWithPath:self.documentFilePath];
}

- (NSInteger) numberOfPreviewItemsInPreviewController: (QLPreviewController *) controller
{
    return 1;
} 
```

和`viewDidLayoutSubviews`：

```
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];
    [self.scrollView setContentSize:self.gridView.frame.size]; // if not called, the contentSize of UIScrollView is wrong.
} 
```

`DetailViewController`包含一个`UIScrollView`，它有一个自定义`UIView`（gridView）作为子视图，gridView 有很多子视图。

在测试时，我注释掉了设置内容大小的代码行，`viewDidLayoutSubviews`通过这样做，我可以成功地关闭预览控制器。但是，这仅在我将`gridView`其作为子视图添加到`scrollView`. 将其添加为子视图后，它会在解雇时再次崩溃。这次我收到`EXC_BREAKPOINT`错误并且控制台上没有日志。调试器的输出如下：

```
CoreFoundation`CFHash:
0x4597740:  pushl  %ebp
0x4597741:  movl   %esp, %ebp
0x4597743:  pushl  %edi
0x4597744:  pushl  %esi
0x4597745:  subl   $16, %esp
0x4597748:  calll  0x459774d                 ; CFHash + 13
0x459774d:  popl   %edi
0x459774e:  movl   8(%ebp), %esi
0x4597751:  testl  %esi, %esi
0x4597753:  jne    0x459776b                 ; CFHash + 43
0x4597755:  int3   
0x4597756:  calll  0x46eca00                 ; symbol stub for: getpid  <-  EXC_BREAKPOINT (code=EXC_I386_BPT, subcode=0x0)
0x459775b:  movl   %eax, (%esp)
0x459775e:  movl   $9, 4(%esp)
0x4597766:  calll  0x46eca4e                 ; symbol stub for: kill
... 
```

请注意，该应用程序面向 iOS 6 并使用自动布局。

我想知道是否有人可以帮助我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T02:25:08.350

在您的`viewDidLayoutSubviews`实现中，执行错误消息告诉您的操作：调用`[self.view layoutSubviews]`. 看看是否有帮助。

**编辑**：可能是我在上一段中的建议应该是打电话`layoutIfNeeded`而不是`layoutSubviews`。

另一件事要尝试，如果这不起作用：将整个内容大小设置移动到`viewWillLayoutSubviews`而不是在`viewDidLayoutSubviews`.

# ios - 将 uipickerdate 与当前日期进行比较

> ID：15846329
> 
> 赞同：1
> 
> 时间：2013-04-06T02:23:29.417
> 
> 标签：ios, objective-c, xcode, uipickerview, uidatepicker

这是我的两个日期选择器的代码，我需要使用 if 条件或开关将它们与当前日期进行比较。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
dateFormatter.timeZone=[NSTimeZone defaultTimeZone];
dateFormatter.timeStyle=NSDateFormatterShortStyle;
dateFormatter.dateStyle=NSDateFormatterShortStyle;
NSString *dateTimeString=[dateFormatter stringFromDate:startTime.date];
NSLog(@"Start time is %@",dateTimeString);

NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc]init];
dateFormatter2.timeZone=[NSTimeZone defaultTimeZone];
dateFormatter2.timeStyle=NSDateFormatterShortStyle;
dateFormatter2.dateStyle=NSDateFormatterShortStyle;
NSString *dateTimeString2=[dateFormatter2 stringFromDate:endTime.date];
NSLog(@"End time is %@",dateTimeString2); 
```

**在我的.h**

```
@property (weak, nonatomic) IBOutlet UIDatePicker *startTime;
@property (weak, nonatomic) IBOutlet UIDatePicker *endTime; 
```

我怎么做？我是否需要将它们存储到 NSDate 或 NSTime 因为我真的只需要时间？

此外，Objective C 中是否有 If 范围？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:28:58.947

我在您的代码中看到的唯一日期是`startTime.date`和`endTime.date`。我不知道你从哪里得到这些，但他们大概是 NSDates。另一方面，当前日期是`[NSDate date]`。因此，您可以使用 NSDate 的`compare:`方法或其他几种比较方法中的任何一种进行比较（请参阅 NSDate 文档）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T02:47:12.090

NSDate 实现`isEqualToDate:`了哪些测试两个日期是否相同到微秒。它还实现`earlierDate:`并且`laterDate:`您可以使用它来构建范围检查。

您还可以构建一些帮助程序，让您使用`timeIntervalSinceDate:`. 没有日期范围对象，但您也可以为您的助手添加中间检查...

```
@interfce NSDate (Comparison)

- (BOOL)isEqualToDate:(NSDate *)aDate within:(NSTimeInterval)tolerance;
- (BOOL)isBetween:(NSDate *)start and:(NSDate *)end within:(NSTimeInterval)tolerance;

@end

@implementation NSDate (Comparison)

- (BOOL)isEqualToDate:(NSDate *)aDate within:(NSTimeInterval)tolerance {

    NSTimeInterval difference = [self timeIntervalSinceDate:aDate];
    return fabs(difference) < tolerance;
}

- (BOOL)isBetween:(NSDate *)start and:(NSDate *)end within:(NSTimeInterval)tolerance {

    NSTimeInterval startDifference = [self timeIntervalSinceDate:start];
    if (startDifference < tolerance) return NO;

    NSTimeInterval endDifference = [end timeIntervalSinceDate:self];
    if (endDifference < tolerance) return NO;

    return YES;
}

@end 
```

我没有测试过这些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T03:21:50.790

只需添加以下内容：

```
if ([[NSDate date] isEqualToDate:startTime.date]) {
NSLog(@"currentDate is equal to startTime"); 
}

if ([[NSDate date] isEqualToDate:endTime.date]) {
NSLog(@"currentDate is equal to endTime"); 
} 
```

如果要计算两个日期之间的间隔，请使用此方法

```
- (NSTimeInterval)timeIntervalSinceDate:(NSDate *)anotherDate

if([startTime.date timeIntervalSinceDate:[NSDate date]] > 0)
{
  //start time greater than today
}

else if([startTime.date timeIntervalSinceDate:[NSDate date]] < 0)
{
    //start time less than today
}

else
{
   //both dates are equal
} 
```

要知道应用程序何时进入后台使用通知，请在您的 viewDidLoad 中添加此语句

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationEnteredBackground) name:UIApplicationDidEnterBackgroundNotification object:nil]; 
```

添加功能以在发布时满足通知

```
-(void)applicationEnteredBackground
{
   //do all the above steps here when you want.
} 
```

并在类的 dealloc 函数中删除观察者以进行通知

```
-(void)dealloc
{
  [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-06T10:13:51.803

您也可以通过使用 NSDate 的 compare: 方法来执行以下操作，

```
 NSDateFormatter* df = [[NSDateFormatter alloc] init];
 [df setDateFormat:@"MM-dd-yyyy"];
 NSDate* date1 = [df dateFromString:@"12-23-2046"];

 NSDate *date2 = [NSDate date];

 if ([date1 compare:date2] == NSOrderedSame){
    NSLog(@"Same");
 }
 if ([date2 compare:date1]==NSOrderedAscending ) {
    NSLog(@"AScending");
 }
 if ([date2 compare:date1]== NSOrderedDescending) {
    NSLog(@"Descending");

 } 
```

取你的 startTime，endTime 而不是 date1，希望它会对你有所帮助。

# ios - 不兼容的指针类型将“int”发送到“va_list”类型的参数（又名“char”）

> ID：15846330
> 
> 赞同：1
> 
> 时间：2013-04-06T02:23:33.753
> 
> 标签：ios, nsstring, char, arguments

我有一个简单但令人沮丧的问题。

我的应用程序中有这一行：

```
[super setText:[[[NSString alloc] initWithFormat:@"%i" arguments:arg] autorelease]]; 
```

那条线来自第 3 方库，所以我试图摆脱警告并使其正常工作。无论如何，我将如何解决此警告？

谢谢！

完整方法：

```
- (void)timerLoop:(NSTimer *)aTimer {
    //update current value
    currentTextNumber += currentStep;

    //check if the timer needs to be disabled
    if ( (currentStep >= 0 && currentTextNumber >= textNumber) || (currentStep < 0 && currentTextNumber <= textNumber) ) {
        currentTextNumber = textNumber;
        [self.timer invalidate];
    }

    //update the label using the specified format
    int value = (int)currentTextNumber;
    int *arg = (int *)malloc(sizeof(int));
    memcpy(arg, &value, sizeof(int));
    //call the superclass to show the appropriate text
    [super setText:[[[NSString alloc] initWithFormat:@"%i" arguments:arg] autorelease]];
    free(arg);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T02:30:27.263

为什么不改成：

```
NSString *text = [NSString stringWithFormat:@"%i", arg];
[super setText:text]; 
```

这假设`arg`具有类型`int`。

您只会使用`initWithFormat:arguments:`if `arg`is 实际上是`va_list`来自变量参数列表的。

更新：根据您发布的更新代码，您可以执行以下操作：

```
- (void)timerLoop:(NSTimer *)aTimer {
    //update current value
    currentTextNumber += currentStep;

    //check if the timer needs to be disabled
    if ( (currentStep >= 0 && currentTextNumber >= textNumber) || (currentStep < 0 && currentTextNumber <= textNumber) ) {
        currentTextNumber = textNumber;
        [self.timer invalidate];
    }

    //update the label using the specified format
    int value = (int)currentTextNumber;
    [super setText:[NSString stringWithFormat:@"%i", value]];
} 
```

# java - 需要帮助检查值是否为 -1

> ID：15846333
> 
> 赞同：-3
> 
> 时间：2013-04-06T02:23:45.090
> 
> 标签：java, android, eclipse, null, nullpointerexception

我需要检查一个值是否为-1。我在编译一些源代码时遇到了问题，我不确定如何解决[这里](https://stackoverflow.com/questions/15843824/issues-passing-data-from-nfc-tag-reader-to-wifi-manager)的问题。

我知道我需要实施：

```
if(wifiManager.addNetwork(conf) == -1) {
    // Insert code to handle the failure here.
} else {
    // The rest of your code for the 'success' case here!
} 
```

但我不确定我应该插入什么来处理失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T02:26:13.763

您可以通过比较语句`wifiManager.addNetwork(conf);`中的结果来做到这一点...`if`

```
if(wifiManager.addNetwork(conf) == -1) {
    // Insert code to handle the failure here.
} else {
    // The rest of your code for the 'success' case here!
} 
```

我假设您正在使用[Android 的`WiFiManager`](http://developer.android.com/reference/android/net/wifi/WifiManager.html#addNetwork%28android.net.wifi.WifiConfiguration%29).

# jquery - jQuery滚动到一个部分并在继续滚动之前粘住

> ID：15846339
> 
> 赞同：1
> 
> 时间：2013-04-06T02:25:49.653
> 
> 标签：jquery, html, easing

不太确定这个特性叫什么，但它可能使用了 jQuery 的缓动特性。 [这个网站](http://sagacify.com/)做得很好。基本上，它会自动滚动到下一部分并粘住，因此您一次只能查看一个部分。我已经处理了部分高度部分，但我对如何调用缓动一无所知。我所做的所有研究都只与粘性标题和侧边栏有关。我什至不确定这个功能叫什么！

这是一个 JSFiddle：http: [//jsfiddle.net/y2uTv/1/](http://jsfiddle.net/y2uTv/1/)

这是我的 JS 目前的样子：

```
$(window).resize(function(){
    var windowHeight = $(window).height();
    $(.section).css(height, windowHeight);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:36:28.637

您没有将您声明的变量传递给 jQuery 的 CSS 方法。删除周围的引号`'windowHeight'`，它应该立即工作。

```
$(window).resize(function(){
    var windowHeight = $(window).height();
    $('div.section').css('height', windowHeight);
});                                ^^^^^^^^^^^^
                                   remove quotes 
```

[http://jsfiddle.net/ax8XZ/1/](http://jsfiddle.net/ax8XZ/1/)

* * *

我可以给你一个基本的想法，告诉你应该如何实现你想要的

对于您的问题，您将需要不同命名`div`的 s，您必须以`section`某种方式单独列出每个。添加`id`属性可能是最简单的。

接下来，您需要添加一个`scroll()`移动到`top`下一个 div 的事件，无论是向上还是向下，以将窗口捕捉到该位置，或捕捉到该位置`animate()`。

您将需要一些方法来跟踪当前位置`section`，以便您知道在`scroll()`活动期间下一步要移动到哪里。

# ruby-on-rails - 构建嵌套属性表单时无法批量分配受保护的属性:: 问题

> ID：15846340
> 
> 赞同：0
> 
> 时间：2013-04-06T02:25:51.353
> 
> 标签：ruby-on-rails, nested-forms, foreign-key-relationship, nested-attributes, mass-assignment

我几乎整天都在处理这个特定问题，虽然还有其他关于它的帖子，但我还没有解决我的特定问题。

我试过关注[RailsCast #196](http://railscasts.com/episodes/196-nested-model-form-revised?autoplay=true)但仍然无法识别我的错误。

**楷模：**

**练习**

```
# == Schema Information
#
# Table name: exercises
#
#  id          :integer          not null, primary key
#  name        :string(255)
#  description :text
#  created_at  :datetime         not null
#  updated_at  :datetime         not null
#  image       :string(255)
#

class Exercise < ActiveRecord::Base
  attr_accessible :description, :name, :tags_attributes
  has_many :tags
  has_one :difficulty
  accepts_nested_attributes_for :tags, :allow_destroy => true
end 
```

**标签**

```
# == Schema Information
#
# Table name: tags
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

class Tag < ActiveRecord::Base
  attr_accessible :name, :exercise_id
  belongs_to :exercise
  accepts_nested_attributes_for :exercises
end 
```

**形式**

```
<%= form_for(@exercise) do |f| %>
  <% if @exercise.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@exercise.errors.count, "error") %> prohibited this exercise from being saved:</h2>

      <ul>
      <% @exercise.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_area :description %>
  </div>
  <%= f.fields_for :tag do |builder| %>
    <div class="field">
        <%= builder.label :name, "Tags" %><br />
        <%= builder.text_field :name %>     
    </div>
<% end %>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

具体来说，当我提交表单时，错误是：

```
ActiveModel::MassAssignmentSecurity::Error in ExercisesController#create

Can't mass-assign protected attributes: tag

Application Trace | Framework Trace | Full Trace
app/controllers/exercises_controller.rb:42:in `new'
app/controllers/exercises_controller.rb:42:in `create' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:37:04.927

在您的表单中，替换该行

```
<%= f.fields_for :tag do |builder| %> 
```

和

```
<%= f.fields_for :tags do |builder| %> 
```

在您使用的模型中`attr_accessible`，然后添加复数，然后添加复数，`_attributes`以便您可以设置属性，但在您的表单中，您调用了单数，`tag`因此为什么会出现大量分配受保护的属性错误。

# java - 在字符数组之前/向字符数组添加一些值

> ID：15846343
> 
> 赞同：0
> 
> 时间：2013-04-06T02:26:14.273
> 
> 标签：java, arrays, multidimensional-array, println, type-2-dimension

我是java数组的新手。如果我想展示这个：

```
 0 ....
    1 ....
    2 ....    
    3 .... 
    4 .... 
```

在哪里：

```
 ....
    ....
    ....
    ....
    ....     is a 2-d char array called char[][] squares. 
```

如何在正方形数组之前添加数字？

而且，如果我选择一个数字，比如 3，并想在 3 旁边添加“>”，我应该怎么做？所以，我想要的是：

```
 0 ....
    1 ....
    2 ....    
    3>.... 
    4 .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:48:02.230

你的问题相当神秘，但我会试一试：

```
class Whatever {

public static void Main(String[] args) {

char[][] squares = new char[5][2];

/*
Here goes your code to assign values to the array
*/

for(int i:=0, i<5; ++i) {
   System.out.println(i);
   if (i==3) {
      System.out.print("> ");
   } else {
      System.out.print("  ")
   }
   for(j:=0; j<2; ++j) {
      System.out.println(aquares[i][j]);
   }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:41:25.617

```
for(int y = 0; y< array.lenght;y++) {
    for(int x = 0; x< array[y].lenght;x++) {
        System.out.println(array[y][x]);
    }

    System.out.println();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T02:41:39.697

尝试这个

```
private void print_array(char[][] squares, int selectedIndex){
    for(int i =0;i<squares.length;i++){
        System.out.print(i);
        if(i == selectedIndex){
            System.out.print(">");
        }
        for(int j = 0;j<squares[i].length;j++){
            System.out.print(squares[i][j]);
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T02:44:10.550

我不确定是否允许此类问题，但这是答案。让我们假设您有 chars[m][n] 数组。并且您想在 x 行之前打印 >

```
for(int i = 0; i < m; i++)
{
      String s = i+"";
      if(i == x) s = s + ">";
      else       s = s+ " ";
      s = s + new String(chars[i])
      System.out.println(s);
} 
```

# dependency-injection - 带有构造函数参数的匕首模块？

> ID：15846349
> 
> 赞同：5
> 
> 时间：2013-04-06T02:27:49.600
> 
> 标签：dependency-injection, dagger

在 Guice 中，我可以完全控制何时构建模块，并使用一些带有我安装的构造函数参数的模块。

然而，在 Dagger 中，引用其他模块的方法是通过 @Module 包含注释，并且没有向我提供创建要安装的模块的相同方法。

是否可以从具有构造函数参数的多个模块创建一个健全的 ObjectGraph？尤其是可以与 dagger-compiler 一起使用，并且不会遇到循环图的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:40:20.590

ObjectGraph.create() 采用模块的变量列表（Varargs），因此您可以这样做：

```
ObjectGraph objectGraph = ObjectGraph.create(new ProductionModule(context), new OverridingTestModule()); 
```

看看 Dagger 的 InjectionTest.java（见那里的测试“moduleOverrides”）：[https ://github.com/square/dagger/blob/master/core/src/test/java/dagger/InjectionTest.java](https://github.com/square/dagger/blob/master/core/src/test/java/dagger/InjectionTest.java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T23:09:59.820

如果您有多个模块使用相同的对象，那么也许您应该将该对象分离到它自己的模块中。例如，很多模块使用应用程序上下文，所以我有以下模块：

```
@Module
public class ContextModule {

    private final Context mContext;

    public ContextModule(Context context) {
        mContext = context;
    }

    @Provides
    public Context provideContext() {
        return mContext;
    }

} 
```

所以现在在其他模块中，当我需要一个上下文对象时，我只包含该模块。

例如：

```
@Module(entryPoints = { MyFragment.class }, includes = { ContextModule.class })
public class ServicesModule {

    @Provides
    public LocationManager provideLocationManager(Context context) {

        return (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    }

    @Provides
    public Geocoder provideGeocoder(Context context) {
        return new Geocoder(context);
    }
} 
```

然后，当我构造对象图时，我最终只得到一个将应用程序上下文作为参数的模块。

# java - 我无法让 java 文件给我错误

> ID：15846351
> 
> 赞同：0
> 
> 时间：2013-04-06T02:28:03.910
> 
> 标签：java

我创建了一个主要的 Java 程序，它的工作方式类似于银行向用户提供余额、提款和转账。

```
import java.util.Scanner;

public class Lab12 {
    public static void main(String[] args)
    {
        //Creating Two BankAccounts
        BankAccount B1 = new BankAccount(1000, "ASU_ACCOUNT_110");
        BankAccount B2 = new BankAccount(500, "ASU_ACCOUNT_100");
        double amount;
        Scanner scan  = new Scanner(System.in);

        //Account Deposit
        System.out.println("Please Enter amount to deposit into ASU_ACCOUNT_110 Account");
        amount = scan.nextDouble();
        if(!B1.deposit(amount))
            System.out.println("Error depositing amount in account. Please enter positive value.");
        else
            System.out.println("Successfully deposited $"+amount+". The current balance is "+B1.getBalance() );

        //Account Withdrawal
        System.out.println("Please Enter the amount you would like to withdraw from ASU_ACCOUNT_110");
        amount = scan.nextDouble();
        if(!B1.withdraw(amount))
            System.out.println("Error withdrawing amount. You are either overdrawing or you have entered a negative value");
        else
            System.out.println("Successfully withdrew $"+amount+". The current balance is "+B1.getBalance());

        //Account Transfer
        System.out.println("Please Enter the amount you would like to transfer from ASU_ACCOUNT_110 to ASU_ACCOUNT_100");
        amount = scan.nextDouble();
        if(!B1.transfer(amount, B2))
        {
            System.out.println("Error transfering amount. You are either overdrawing or you have entered a negative value");
        }
        else
        {
            System.out.println("Successfully transferred $"+amount+".\nThe current balance in ASU_ACCOUNT_110 is "+B1.getBalance());
            System.out.println("The current balance in ASU_ACCOUNT_100 is "+B2.getBalance());
        }

        //Account Display
        System.out.println("\nThe details of the two accounts are:");
        System.out.println("------------------------------------------");
        display(B1);
        System.out.println("------------------------------------------");
        display(B2);
    }

    public static void display(BankAccount B)
    {
        System.out.println("The Account Number is "+B.getAccountNumber());
        System.out.println("The balance is "+B.getBalance());
    }
} 
```

我创建了第二个类，它有方法并获取和调用余额

```
public class BankAccount {

    private String AccountNumber;
    private double balance;

    public BankAccount(double balance, String accountNumber) 
    {
        this.balance = balance;
        this.AccountNumber = accountNumber;
    }

    public boolean deposit(double amount) 
    {
        return true;
    }

    public double getBalance() 
    {
        return balance;
    }

    public boolean withdraw(double amount) 
    {
        return true;
    }

    public boolean transfer(double amount, BankAccount b2) 
    {
        return true;
    }

    public String getAccountNumber() 
    {
        return AccountNumber;
    }
} 
```

问题是当我为存款、取款、转账输入负数时，我没有收到我在主类中输入的错误

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:34:16.050

您不检查 BankAccount.deposit(double) 中任何地方的数字是否为负数。您需要检查代码是否为负，如下所示：

```
public boolean deposit(double amount) 
{
    if(amount<0)
    {
        return false;
    }else{
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T02:34:30.540

您在 BankAccount 中的方法总是返回 true。除非您提供这样做的实现，否则您不能期望它们有时会发出失败信号。

例如：

```
public boolean withdraw(double amount) 
{
    return true;
} 
```

永远不会发出失败信号，因为它**总是**返回 true。为了让您的方法按照您希望的方式运行，您必须添加更复杂的行为。就像是：

```
public boolean withdraw(double amount) 
{  
    //if the withdrawal is positive and does not exceed the balance
    if (amount >= 0 && amount <= balance)
    {
         //remove money and signal success
         balance -= amount;
         return true;
    }
    //if either condition failed, signal failure
    return false;
} 
```

看起来您只是忘记实现这些方法。要么就是你，要么你对编程有根本的误解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T02:31:58.173

存款、取款和转账方法总是返回 true。因此，您将永远不会看到错误消息。

# java - 使用重载与覆盖，编译时间与运行时间

> ID：15846353
> 
> 赞同：-1
> 
> 时间：2013-04-06T02:28:59.523
> 
> 标签：java, overloading

有效：在编译时选择调用哪个重载。例子：

```
class parentsecond{
    public int getdouble(int x){ return x*2;}
}
class second extends parentsecond{
    public int getdouble(int x){ return x*3;}
}
class third{
    public static void calloverload(parentsecond s){
        System.out.println(s.getdouble(4));
    }
    public static void calloverload(second s){
        System.out.println(s.getdouble(4));
    }

    public static void main(String[] args){
        third t=new third();
        parentsecond s=new second();
        t.calloverload(s);
    }

} 
```

答案是 12。实例方法重载方法的行为也是相同的。

因此，在任何一种情况下，调用哪个重载方法的决定都是在运行时而不是编译时做出的（它总是被调用的“第二个”getdouble）。

所以在“Effective Java”中这个特定项目有一些我没有得到的资格。

请帮助澄清“在编译时解决重载”的含义。

以上与此有何不同：

```
....

    class fourth{

            public static String getCollection(Set<?> s){
                return "Set";
            }
            public static String getCollection(Collection<?> c){
                return "Collection";
            }   

            public  String getiCollection(Set<?> s){
                return "Set";
            }
            public  String getiCollection(Collection<?> c){
                return "Collection";
            }       

            public static void main(String[] args){

                Collection<String> c=new HashSet<String>();
                System.out.println(fourth.getCollection(c));
                fourth f=new fourth();
                System.out.println(f.getiCollection(c));
... 
```

在这种情况下，此答案始终是“集合”而不是实际的运行时类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:42:34.647

声明的类型`s`是`parentsecond`这样的，当编译器运行代码时，它将分配`parentsecond`作为参数的方法

```
public static void calloverload(parentsecond s)... 
```

但是，覆盖是一个不同的主题。实例的实际类型`s`是`second`so`second`的`getdouble`方法将被执行。这是一个多态的例子。在java中，多态是通过[后期绑定](http://en.wikipedia.org/wiki/Late_binding)来实现的。

引用[这个答案：](https://stackoverflow.com/questions/2794195/java-method-overloading-double-dispatch)

JLS 在 §8.4.9 重载中声明：

1.  调用方法时（第 15.12 节），在编译时使用实际参数（和任何显式类型参数）的数量和参数的编译时类型来确定将被调用的方法的签名（ §15.12.2)。
2.  如果要调用的方法是实例方法，则要调用的实际方法将在运行时使用动态方法查找（第 15.12.4 节）确定。

参数是`s`，它的编译时类型是`parentsecond`. 它的运行时类型是`second`.

**编辑**要回答您的问题，请参阅上面的第 1 点。运行时无需评估任何内容。`Collection`编译器在两个调用中都使用编译时类型 , 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:38:14.557

关键不是*编译器*无法弄清楚；关键是重载会让程序员感到困惑，因此很可能会导致错误。

如果您需要提取 JLS 以确定哪个方法与您调用它的方式最具体匹配，那么每个查看该代码的维护程序员都必须进行相同的练习。

因此，建议重载应该具有不同数量的参数，或者至少是不可相互转换的参数类型。

“在编译时解决重载”的具体危险是这样的。假设我有：

```
void method(List a) { }
void method(Collection a) { } 
```

然后，这两个调用将做不同的事情：

```
List list = new ArrayList();
method(list);
method((Collection)list); 
```

这对于程序员来说是非常不直观的（因此令人困惑，因此是错误的来源）。

# javascript - 如果有人在 jquery 或 js 中选择特定选项值，如何触发附加元素

> ID：15846354
> 
> 赞同：0
> 
> 时间：2013-04-06T02:28:59.930
> 
> 标签：javascript, jquery

在 jquery 中，如果用户选择特定选项，我会尝试创建一个新的表标题 - 在本例中为“其他”。但是，下面的代码什么也没做——有什么见解吗？（JS/Jquery 的新手）。

**注意：** select 元素也通过 jquery 附加到模板（如果用户选中一个框）。

```
 <th>Did you graduate?</th>

</tr>
<tr id="college_info">

    <td><input class="id_checkbox" type="checkbox" id="college_grad" name="college_grad" value="yes">yes</input>
        </td>

</tr>   
<script>
    $( "#college_grad" ).one("click", function() {
        $( "#college_info" ).hide().append("<td><select id='college_degreeName'class='degree_name'><option value='bachelors'>Bachelors</option> <option class='id_otherOption' value='other'>Other</option></select></td>").show("slow");
    });

    $( "#college_degreeName").one("click", function() {
    if ( $( "#table_headings .college_degreeName" ).value =='other'){
    $( "#table_headings" ).append("<th id=other_degreeName'>Name of Degree/Certificate</th>");
    }
    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:44:17.257

直接事件处理不适用于动态添加的元素。您应该使用实时或委托事件处理。

```
 $( "#table_headings").on("click","#college_degreeName", function() {
        if ( $(this).val() === 'other'){
        $( "#table_headings" ).append("<th id=other_degreeName'>Name of Degree/Certificate</th>");
        }
    }); 
```

# c# - 如何在 C# 中使用 MessagePack？

> ID：15846355
> 
> 赞同：5
> 
> 时间：2013-04-06T02:29:00.163
> 
> 标签：c#, .net, serialization, messagepack

我阅读了[msgpack-cli 快速入门](https://github.com/msgpack/msgpack-cli/wiki/Quick-Start)文档。

我还获得了 C# (CLI) NuGet 包 (v0.3)。

NuGet 包 (!!) 中不存在官方文档中提到的类（例如`BoxingPacker`，`CompiledPacker`或`ObjectPacker`）。我假设文档已被孤立。

那么有没有人有示例如何在 C# 中序列化/反序列化到 MessagePack 或从 MessagePack 序列化/反序列化？我正在尝试为一个对象执行此操作，并且对序列化程序的二进制性质感兴趣。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-25T21:25:28.560

致未来的读者：根据**[这些结果](https://github.com/sidshetye/SerializersCompare#results)****，我会选择 Avro 或 Protocol Buffers 甚至 Thrift over MessagePack ...**

为了具体问题，关键部分是：

```
public byte[] Serialize<T>(T thisObj)
{
    var serializer = MessagePackSerializer.Create<T>();

    using (var byteStream = new MemoryStream())
    {
        serializer.Pack(byteStream, thisObj);
        return byteStream.ToArray();
    }
}

public T Deserialize<T>(byte[] bytes)
{
    var serializer = MessagePackSerializer.Create<T>();
    using (var byteStream = new MemoryStream(bytes))
    {
        return serializer.Unpack(byteStream);
    }
} 
```

整个研发类型的项目，结果在[https://github.com/sidshetye/SerializersCompare](https://github.com/sidshetye/SerializersCompare)，具体的函数调用在[这里](https://github.com/sidshetye/SerializersCompare/blob/master/SerializersCompare/Serializers/MessagePack.cs#L22)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-12T07:32:14.880

我很惊讶，没有人理解用户的要求。msgpack 有很多 nuget 包，使用哪个以及如何包含在项目中确实令人困惑。我假设用户想知道如何像我一样将 msgpack 包含在 .net 项目中。

```
Install MessagePack for CLI from Nuget packages 
```

然后像这样包含

```
using MsgPack.Serialization; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T10:02:15.250

我在以下位置找到了一个示例： [http](http://www.irisclasson.com/2012/12/17/serializing-and-deserializing-packingunpacking-to-a-file-andor-memorystream-with-messagepack-in-c/) ://www.irisclasson.com/2012/12/17/serializing-and-deserializing-packingunpacking-to-a-file-andor-memorystream-with-messagepack-in-c/ 我测试它在我的代码中，并通过 zmq 将 Byte[] 数据发送到另一台主机。有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-10T10:26:42.043

在该方法的最新版本中[`msgpack-cli`](https://www.nuget.org/packages/MsgPack.Cli/)，`Create`如 in`MessagePackSerializer.Create<T>();`被标记为已过时。

[项目的github 页面](https://github.com/msgpack/msgpack-cli)中给出的示例用法可能是：

```
// Creates serializer.
var serializer = SerializationContext.Default.GetSerializer<T>();
// Pack obj to stream.
serializer.Pack(stream, obj);
// Unpack from stream.
var unpackedObject = serializer.Unpack(stream); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-10-23T07:10:12.533

从 NuGet 安装名为 MsgPack 的包。看这里的图片：

![在此处输入图像描述](https://i.stack.imgur.com/FUKHk.png)

# javascript - 带有悬停状态的 Jquery CSS 缩略图

> ID：15846356
> 
> 赞同：1
> 
> 时间：2013-04-06T02:29:00.180
> 
> 标签：javascript, jquery, css

我有一个带有 6 个缩略图的幻灯片。缩略图具有 CSS 悬停状态。

使用 JQuery，当用户选择缩略图时，我希望保留悬停图像（因此用户知道选择了哪个缩略图）。

当用户点击第二个缩略图时，所有其他缩略图不再有悬停。

```
$('.thumb').click(function(){
    $(this).css('background-position-y', 'top').siblings(this).css('background-position-y', 'bottom');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:41:27.913

## 使用小提琴中的用户代码更新

* * *

小提琴：http: [//jsfiddle.net/RNYwG/1](http://jsfiddle.net/RNYwG/1)

* * *

Javascript：

```
$(function(){
    $('.thumb').click(function(){
       $('.thumb-hover').removeClass('thumb-hover');
       $(this).addClass('thumb-hover');
    });
}); 
```

* * *

CSS：

```
#thumbnails > .thumb{
    background-repeat:no-repeat;
    background-position:0 -92px;
    border: 1px solid #999;
    margin: 10px 0 0 10px;
    padding: 0;
    width: 153px;
    height: 91px;
    float: left;
}
#thumbnails > .thumb-hover, .thumb:hover{
    background-position: 0 0;
    cursor: pointer;
} 
```

* * *

HTML：

```
<div id="thumbnails">
    <div class="thumb" style="background-image:url('images/slideshow/1_thumb.jpg');" onclick="mySwipe.slide(0, 700)"></div>
    <div class="thumb" style="background-image:url('images/slideshow/2_thumb.jpg');" onclick="mySwipe.slide(1, 700)"></div>
    <div class="thumb" style="background-image:url('images/slideshow/3_thumb.jpg');" onclick="mySwipe.slide(2, 700)"></div>
    <div class="thumb" style="background-image:url('images/slideshow/4_thumb.jpg');" onclick="mySwipe.slide(3, 700)"></div>
    <div class="thumb" style="background-image:url('images/slideshow/5_thumb.jpg');" onclick="mySwipe.slide(4, 700)"></div>
    <div class="thumb" style="background-image:url('images/slideshow/6_thumb.jpg');" onclick="mySwipe.slide(5, 700)"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:40:39.513

在此示例中，缩略图是父级中的兄弟姐妹：

```
<div>
   <div class="thumb"></div>
   <div class="thumb"></div>
   <div class="thumb"></div>
</div> 
```

```
$('.thumb').click(function(){
    $(this).addClass('active').siblings().removeClass('active');
}); 
```

这意味着您的 CSS 将如下所示：

```
.thumb{
/*   normal styles */
/*   you can use also CSS3 like: */
/*   transition: 0.2s;    */
}
.thumb.active{
/*    active styles (use !important if needed) */
} 
```

# android - Android 上 INSTALL_NON_MARKET_APPS 的单元测试

> ID：15846365
> 
> 赞同：1
> 
> 时间：2013-04-06T02:30:42.717
> 
> 标签：android, unit-testing, junit

在我的应用程序中，我有一个方法可以检查是否设置了 INSTALL_NON_MARKET_APPS，如果是，则执行某个操作。

为了正确进行单元测试，我需要测试这两种情况：

案例 1：INSTALL_NON_MARKET_APPS == 0

案例 2：INSTALL_NON_MARKET_APPS == 1

有什么方法可以在我的单元测试中设置 INSTALL_NON_MARKET_APPS 的值？当我尝试修改它时，我得到以下异常，这是可以理解的......

> java.lang.SecurityException：权限被拒绝：写入安全设置需要 android.permission.WRITE_SECURE_SETTINGS

# ubuntu - 无法在 ubuntu 12.04 中安装 g++

> ID：15846375
> 
> 赞同：2
> 
> 时间：2013-04-06T02:32:21.563
> 
> 标签：ubuntu, g++, ubuntu-12.04, apt-get

我刚刚安装了 ubuntu 12.04。现在，我想安装 g++。所以，我运行命令：

**sudo apt-get install g++**

但我收到错误：

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following extra packages will be installed:
  g++-4.6 libstdc++6-4.6-dev
Suggested packages:
  g++-multilib g++-4.6-multilib gcc-4.6-doc libstdc++6-4.6-dbg libstdc++6-4.6-doc
The following NEW packages will be installed:
  g++ g++-4.6 libstdc++6-4.6-dev
0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.
Need to get 6,745 kB/8,389 kB of archives.
After this operation, 24.0 MB of additional disk space will be used.
Do you want to continue [Y/n]? y
Err http://us.archive.ubuntu.com/ubuntu/ precise/main g++-4.6 i386 4.6.3-1ubuntu5
  Could not connect to 113.171.224.178:80 (113.171.224.178). - connect (111: Connection refused) [IP: 91.189.91.15 80]
Failed to fetch http://us.archive.ubuntu.com/ubuntu/pool/main/g/gcc-4.6/g++-4.6_4.6.3-1ubuntu5_i386.deb  Could not connect to 113.171.224.178:80 (113.171.224.178). - connect (111: Connection refused) [IP: 91.189.91.15 80]
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing? 
```

接下来，我运行命令：

**sudo apt-get 更新**

我也收到其他人

```
Hit http://us.archive.ubuntu.com precise Release.gpg                                               
Get:1 http://security.ubuntu.com precise-security Release.gpg [198 B]                     
Hit http://extras.ubuntu.com precise Release.gpg                     
Hit http://ppa.launchpad.net precise Release.gpg                     
Get:2 http://us.archive.ubuntu.com precise-updates Release.gpg [198 B]
Get:3 http://us.archive.ubuntu.com precise-backports Release.gpg [198 B]                          
Get:4 http://security.ubuntu.com precise-security Release [49.6 kB]                               
Hit http://extras.ubuntu.com precise Release                                                       
Hit http://us.archive.ubuntu.com precise Release                                                   
Hit http://ppa.launchpad.net precise Release                                                       
Get:5 http://us.archive.ubuntu.com precise-updates Release [49.6 kB]                               
Hit http://extras.ubuntu.com precise/main Sources                                                  
Hit http://ppa.launchpad.net precise/main Sources                              
Get:6 http://security.ubuntu.com precise-security/main Sources [65.1 kB]       
Hit http://extras.ubuntu.com precise/main i386 Packages                                            
Hit http://ppa.launchpad.net precise/main i386 Packages                                            
Get:7 http://us.archive.ubuntu.com precise-backports Release [49.6 kB]                             
Ign http://extras.ubuntu.com precise/main TranslationIndex                                         
Ign http://ppa.launchpad.net precise/main TranslationIndex                                         
Get:8 http://security.ubuntu.com precise-security/restricted Sources [1,950 B]                     
Get:9 http://security.ubuntu.com precise-security/universe Sources [24.0 kB]                       
Get:10 http://security.ubuntu.com precise-security/multiverse Sources [1,380 B]                    
Get:11 http://security.ubuntu.com precise-security/main i386 Packages [245 kB]                     
Get:12 http://us.archive.ubuntu.com precise/restricted Sources [5,470 B]                           
Hit http://us.archive.ubuntu.com precise/universe Sources                                          
Hit http://us.archive.ubuntu.com precise/multiverse Sources                                        
Hit http://us.archive.ubuntu.com precise/main i386 Packages                                        
Hit http://us.archive.ubuntu.com precise/restricted i386 Packages                                  
Hit http://us.archive.ubuntu.com precise/universe i386 Packages                                    
Hit http://us.archive.ubuntu.com precise/multiverse i386 Packages                                  
Hit http://us.archive.ubuntu.com precise/main TranslationIndex                                     
Get:13 http://us.archive.ubuntu.com precise-backports Release [49.6 kB]                            
Get:14 http://us.archive.ubuntu.com precise/main Sources [934 kB]                                  
Ign http://us.archive.ubuntu.com precise-backports Release                                         
Get:15 http://security.ubuntu.com precise-security/restricted i386 Packages [3,968 B]              
Get:16 http://security.ubuntu.com precise-security/universe i386 Packages [73.0 kB]                
Get:17 http://security.ubuntu.com precise-security/multiverse i386 Packages [2,369 B]              
Hit http://security.ubuntu.com precise-security/main TranslationIndex                              
Hit http://security.ubuntu.com precise-security/multiverse TranslationIndex                        
Hit http://security.ubuntu.com precise-security/restricted TranslationIndex                        
Hit http://security.ubuntu.com precise-security/universe TranslationIndex                          
Hit http://security.ubuntu.com precise-security/main Translation-en                                
Hit http://security.ubuntu.com precise-security/multiverse Translation-en                          
Hit http://security.ubuntu.com precise-security/restricted Translation-en                          
Hit http://security.ubuntu.com precise-security/universe Translation-en                            
Ign http://extras.ubuntu.com precise/main Translation-en_US                                        
Ign http://ppa.launchpad.net precise/main Translation-en_US                                        
Ign http://extras.ubuntu.com precise/main Translation-en                                           
Ign http://ppa.launchpad.net precise/main Translation-en                                           
Hit http://us.archive.ubuntu.com precise/multiverse TranslationIndex                               
Hit http://us.archive.ubuntu.com precise/restricted TranslationIndex                               
Hit http://us.archive.ubuntu.com precise/universe TranslationIndex                                 
Get:18 http://us.archive.ubuntu.com precise-updates/main Sources [374 kB]                          
Get:19 http://us.archive.ubuntu.com precise-updates/restricted Sources [5,494 B]                   
Get:20 http://us.archive.ubuntu.com precise-updates/universe Sources [83.4 kB]                     
Get:21 http://us.archive.ubuntu.com precise-updates/multiverse Sources [4,746 B]                   
Get:22 http://us.archive.ubuntu.com precise-updates/main i386 Packages [603 kB]                    
Get:23 http://us.archive.ubuntu.com precise-updates/restricted i386 Packages [10.1 kB]             
Get:24 http://us.archive.ubuntu.com precise-updates/universe i386 Packages [194 kB]                
Get:25 http://us.archive.ubuntu.com precise-updates/multiverse i386 Packages [10.4 kB]             
Hit http://us.archive.ubuntu.com precise-updates/main TranslationIndex                             
Hit http://us.archive.ubuntu.com precise-updates/multiverse TranslationIndex                       
Hit http://us.archive.ubuntu.com precise-updates/restricted TranslationIndex                       
Hit http://us.archive.ubuntu.com precise-updates/universe TranslationIndex                         
Hit http://us.archive.ubuntu.com precise/main Translation-en                                       
Ign http://us.archive.ubuntu.com precise-backports/main Sources/DiffIndex                          
Ign http://us.archive.ubuntu.com precise-backports/restricted Sources/DiffIndex                    
Ign http://us.archive.ubuntu.com precise-backports/universe Sources/DiffIndex                      
Ign http://us.archive.ubuntu.com precise-backports/multiverse Sources/DiffIndex                    
Ign http://us.archive.ubuntu.com precise-backports/main i386 Packages/DiffIndex                    
Ign http://us.archive.ubuntu.com precise-backports/restricted i386 Packages/DiffIndex              
Ign http://us.archive.ubuntu.com precise-backports/universe i386 Packages/DiffIndex                
Ign http://us.archive.ubuntu.com precise-backports/multiverse i386 Packages/DiffIndex              
Hit http://us.archive.ubuntu.com precise-backports/main TranslationIndex                           
Hit http://us.archive.ubuntu.com precise-backports/multiverse TranslationIndex                     
Hit http://us.archive.ubuntu.com precise-backports/universe TranslationIndex                       
Hit http://us.archive.ubuntu.com precise/multiverse Translation-en                                 
Hit http://us.archive.ubuntu.com precise/restricted Translation-en                                 
Hit http://us.archive.ubuntu.com precise/universe Translation-en                                   
Hit http://us.archive.ubuntu.com precise-updates/main Translation-en                               
Hit http://us.archive.ubuntu.com precise-updates/multiverse Translation-en                         
Hit http://us.archive.ubuntu.com precise-updates/restricted Translation-en                         
Hit http://us.archive.ubuntu.com precise-updates/universe Translation-en                           
Hit http://us.archive.ubuntu.com precise-backports/main Sources                                    
Get:26 http://us.archive.ubuntu.com precise-backports/restricted TranslationIndex [3,341 kB]       
Hit http://us.archive.ubuntu.com precise-backports/restricted Sources                              
Hit http://us.archive.ubuntu.com precise-backports/universe Sources                                
Hit http://us.archive.ubuntu.com precise-backports/multiverse Sources                              
Hit http://us.archive.ubuntu.com precise-backports/main i386 Packages                              
Hit http://us.archive.ubuntu.com precise-backports/restricted i386 Packages                        
Hit http://us.archive.ubuntu.com precise-backports/universe i386 Packages                          
Hit http://us.archive.ubuntu.com precise-backports/multiverse i386 Packages                        
Hit http://us.archive.ubuntu.com precise-backports/main Translation-en                             
Hit http://us.archive.ubuntu.com precise-backports/multiverse Translation-en                       
Hit http://us.archive.ubuntu.com precise-backports/universe Translation-en                         
Fetched 7,012 kB in 19s (352 kB/s)                                                                 
W: GPG error: http://us.archive.ubuntu.com precise-backports Release: The following signatures were invalid: BADSIG 40976EAF437D05B5 Ubuntu Archive Automatic Signing Key <ftpmaster@ubuntu.com>
W: Failed to fetch http://us.archive.ubuntu.com/ubuntu/dists/precise-backports/restricted/i18n/Index  No Hash entry in Release file /var/lib/apt/lists/partial/us.archive.ubuntu.com_ubuntu_dists_precise-backports_restricted_i18n_Index

E: Some index files failed to download. They have been ignored, or old ones used instead. 
```

要检查存储库，我运行命令：**cat /etc/apt/sources.list**。下面是输出

```
# deb cdrom:[Ubuntu 12.04.2 LTS _Precise Pangolin_ - Release i386 (20130213)]/ precise main restricted

# See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to
# newer versions of the distribution.
deb http://us.archive.ubuntu.com/ubuntu/ precise main restricted
deb-src http://us.archive.ubuntu.com/ubuntu/ precise main restricted

## Major bug fix updates produced after the final release of the
## distribution.
deb http://us.archive.ubuntu.com/ubuntu/ precise-updates main restricted
deb-src http://us.archive.ubuntu.com/ubuntu/ precise-updates main restricted

## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu
## team. Also, please note that software in universe WILL NOT receive any
## review or updates from the Ubuntu security team.
deb http://us.archive.ubuntu.com/ubuntu/ precise universe
deb-src http://us.archive.ubuntu.com/ubuntu/ precise universe
deb http://us.archive.ubuntu.com/ubuntu/ precise-updates universe
deb-src http://us.archive.ubuntu.com/ubuntu/ precise-updates universe

## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu 
## team, and may not be under a free licence. Please satisfy yourself as to 
## your rights to use the software. Also, please note that software in 
## multiverse WILL NOT receive any review or updates from the Ubuntu
## security team.
deb http://us.archive.ubuntu.com/ubuntu/ precise multiverse
deb-src http://us.archive.ubuntu.com/ubuntu/ precise multiverse
deb http://us.archive.ubuntu.com/ubuntu/ precise-updates multiverse
deb-src http://us.archive.ubuntu.com/ubuntu/ precise-updates multiverse

## N.B. software from this repository may not have been tested as
## extensively as that contained in the main release, although it includes
## newer versions of some applications which may provide useful features.
## Also, please note that software in backports WILL NOT receive any review
## or updates from the Ubuntu security team.
deb http://us.archive.ubuntu.com/ubuntu/ precise-backports main restricted universe multiverse
deb-src http://us.archive.ubuntu.com/ubuntu/ precise-backports main restricted universe multiverse

deb http://security.ubuntu.com/ubuntu precise-security main restricted
deb-src http://security.ubuntu.com/ubuntu precise-security main restricted
deb http://security.ubuntu.com/ubuntu precise-security universe
deb-src http://security.ubuntu.com/ubuntu precise-security universe
deb http://security.ubuntu.com/ubuntu precise-security multiverse
deb-src http://security.ubuntu.com/ubuntu precise-security multiverse

## Uncomment the following two lines to add software from Canonical's
## 'partner' repository.
## This software is not part of Ubuntu, but is offered by Canonical and the
## respective vendors as a service to Ubuntu users.
# deb http://archive.canonical.com/ubuntu precise partner
# deb-src http://archive.canonical.com/ubuntu precise partner

## This software is not part of Ubuntu, but is offered by third-party
## developers who want to ship their latest software.
deb http://extras.ubuntu.com/ubuntu precise main
deb-src http://extras.ubuntu.com/ubuntu precise main 
```

请帮我在 Ubuntu 上安装 g++。gcc的版本是4.6.3

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:40:43.160

几个月前我也遇到过类似的问题。我将存储库服务器从 lk.archive.ubuntu.com（ubuntu 默认安装）更改为 ubuntu 主服务器，即 archive.ubuntu.com。之后进行了“apt-get update”，一切顺利。

区域服务器有时会关闭。您也可以尝试从美国更改为主服务器。您可以通过手动编辑 /etc/apt/sources.list 文件或从 ubuntu 软件中心单击按钮来执行此操作。

# mongodb - MongoDB 使用外键将字段复制到另一个集合

> ID：15846376
> 
> 赞同：9
> 
> 时间：2013-04-06T02:32:21.773
> 
> 标签：mongodb, copy, foreign-keys, database

我想将颜色从用户集合复制到汽车集合。我正在使用一个外键，即用户 ID。

```
> db.test1.User.find()
{ "_id" : ObjectId("515f7db83f71d6bcb1c41a48"), "age" : 33, "Color" : "blue" }
{ "_id" : ObjectId("515f7dc03f71d6bcb1c41a49"), "age" : 52, "Color" : "red" }
{ "_id" : ObjectId("515f7dc43f71d6bcb1c41a4a"), "age" : 43, "Color" : "yellow" }

> db.test2.Car.find()
{ "_id" : ObjectId("515f84883f71d6bcb1c41a54"), "speed" : 291, "userID" : ObjectId("515f7db83f71d6bcb1c41a48") }
{ "_id" : ObjectId("515f84883f71d6bcb1c41a55"), "speed" : 202, "userID" : ObjectId("515f7db83f71d6bcb1c41a49") }
{ "_id" : ObjectId("515f84883f71d6bcb1c41a56"), "speed" : 193, "userID" : ObjectId("515f7db83f71d6bcb1c41a4a") } 
```

这是我的查询

```
db.test1.User.find().forEach( 
function(x)
{
  db.test2.Car.update( { userID: x._id }, { $set: { color: x.color} } ) 
} ); 
```

我想要这个结果：

```
> db.test2.Car.find()
{ "_id" : ObjectId("515f84883f71d6bcb1c41a54"), "speed" : 291, "userID" : ObjectId("515f7db83f71d6bcb1c41a48"), "color" : "blue" }
{ "_id" : ObjectId("515f84883f71d6bcb1c41a55"), "speed" : 202, "userID" : ObjectId("515f7db83f71d6bcb1c41a49"), "color" : "red" }
{ "_id" : ObjectId("515f84883f71d6bcb1c41a56"), "speed" : 193, "userID" : ObjectId("515f7db83f71d6bcb1c41a4a"), "color" : "yellow" } 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T02:08:44.910

您的测试设置存在几个问题：

*   字段名称的大小写不匹配（您是在引用`color`而不是`Color`在复制时）
*   目标集合中只有一个示例外键匹配：`ObjectId('515f7db83f71d6bcb1c41a48')`
*   您的更新只会影响“外键”的第一个匹配文档。这对于 1:1 的关系很好，但不是 1:many

考虑到上述情况的更正示例（除了不匹配的键）：

```
db.test1.User.find().forEach( 
    function(x) {
        db.test2.Car.update(
            // query 
            { userID: x._id },

            // update 
            { $set: { color: x.Color} },

            // options:
            { "multi" : true } // Update all matching documents
        );
    }
); 
```

这导致在`{color:blue}`示例文档中设置唯一实际匹配的外键：

```
db.test2.Car.find()
{
    "_id" : ObjectId("515f84883f71d6bcb1c41a55"),
    "speed" : 202,
    "userID" : ObjectId("515f7db83f71d6bcb1c41a49")
}
{
    "_id" : ObjectId("515f84883f71d6bcb1c41a56"),
    "speed" : 193,
    "userID" : ObjectId("515f7db83f71d6bcb1c41a4a")
}
{
    "_id" : ObjectId("515f84883f71d6bcb1c41a54"),
    "color" : "blue",
    "speed" : 291,
    "userID" : ObjectId("515f7db83f71d6bcb1c41a48")
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-12T12:38:44.597

这是我的两分钱：你可以放弃“function(x)”。我更喜欢以下语法：

```
db.source_collection_name.find().forEach(
  doc=>
      db.target_collection_name.update(
        {"_id": doc._id},
        {$set: {"field_to_update": doc.field}}
      )
) 
```

在你的情况下，这样的事情应该有效：

```
db.test1.User.find().forEach(
  doc=> 
    db.test2.Car.update( 
      { "userID": doc._id }, 
      { $set: { "color": doc.Color} } 
    ) 
); 
```

# android - 如何将通知 GCM 中的数据保存到 android 的 sqlite 3 中？

> ID：15846377
> 
> 赞同：0
> 
> 时间：2013-04-06T02:32:29.220
> 
> 标签：android, sqlite, notifications, google-cloud-messaging

我尝试将通知中的数据保存到 sqlite 中，但没有保存任何内容，感谢您的帮助，对不起我的英语：P

这是我的代码：

```
protected void onMessage(Context context, Intent intent) {
    // TODO Auto-generated method stub

    NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(this)
                .setContentTitle("New todo item!")
                .setPriority(Notification.PRIORITY_HIGH)
                .setContentText(intent.getStringExtra("message"));

    String message = (String) intent.getExtras().getCharSequence("message");
    String ju = "ja";
    String jo = "je";
    message = intent.getStringExtra("message");
    HandlerSQL db = new HandlerSQL(this);
    db.abrir();
    db.insertMsg(message,ju,jo);
    db.cerrar();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T02:48:42.177

首先替换这一行

```
String message = (String) intent.getExtras().getCharSequence("message"); 
```

用这条线

```
String message = intent.getStringExtra("message"); 
```

由于您不需要第一个，然后在调用通知之前放置以下代码行并在`onMessage()`您的接收方法中`GCMIntentService()`

```
String message = intent.getStringExtra("message"); 
String ju = "ja";
String jo = "je";
HandlerSQL db = new HandlerSQL(this);
db.abrir();
db.insertMsg(message,ju,jo);
db.cerrar(); 
```

最后确保这 `db.insertMsg(message,ju,jo);`是在 SQLlite 数据库中插入字符串的有效方法。

# python - pyqt 的信号 vs 直接调用方法

> ID：15846389
> 
> 赞同：3
> 
> 时间：2013-04-06T02:35:06.900
> 
> 标签：python, pyqt4

我试图弄清楚*为什么*要使用 pyqt 信号/插槽而不是直接调用类方法。

这是一个简单的代码片段，说明了我的看法：

```
from PyQt4 import QtGui, QtCore

class Simple_signal(QtCore.QObject):
    single_signal = QtCore.pyqtSignal()
    double_signal = QtCore.pyqtSignal()

    def __init__(self):
        super().__init__()
        # Connect one signal to one slot
        self.single_signal.connect(self.handle_signal_choice1)

        # Connect another signal to two slots
        self.double_signal.connect(self.handle_signal_choice1)
        self.double_signal.connect(self.handle_signal_choice2)

        # Connect to one method
        self.method = self.handle_signal_choice3

    def handle_signal_choice1(self):   
        print("Simple_signal - CHOICE1 received")

    def handle_signal_choice2(self):
        print("Simple_signal - CHOICE2 received")

    def handle_signal_choice3(self):
        print("Simple_signal - CHOICE3 received")

if __name__ == "__main__":
    simple_signal = Simple_signal()
    print('Calling choice1 via single_signal')
    simple_signal.single_signal.emit()

    print('Calling choice1 and choice2 via double_signal')
    simple_signal.double_signal.emit()

    print('Calling choice3 via class method')
    simple_signal.method() 
```

信号的一个直接优势似乎是：将信号附加到两个插槽相当容易。但是，我也可以使用方法示例来做到这一点，而不用大惊小怪。

方法示例似乎比信号/槽示例获得更好的 CPU 时间结果（即更快），但如果您需要从一个信号调用多个槽，则可能会失去该优势。

在我看来，调用该方法比弄乱信号/插槽设置更干净。

两者都可以在 QWidgets 中使用。

我是否需要一个更复杂的情况，其中信号/插槽是比直接调用方法更好的选择？

谢谢。

**编辑：** 对每种方法消耗的时间感到好奇，我做了一些时间检查。

将这些 timeit 行添加到代码中，并将原始代码（即在 handle_signal_choice1 中）中的每个 'print' 行替换为“pass”，这样打印到 shell 不会减慢速度。

```
result=timeit.timeit('simple_signal.single_signal.emit()', 'from __main__ import simple_signal', number=10000)
print('Calling choice1 via single_signal')
print('timeit says : ', result)

result=timeit.timeit('simple_signal.double_signal.emit()', 'from __main__ import simple_signal', number=10000)
print('Calling choice1 and choice2 via double_signal')
print('timeit says : ', result)

result=timeit.timeit('simple_signal.method()', 'from __main__ import simple_signal', number=10000)
print('Calling choice3 via method')
print('timeit says : ', result) 
```

这给了我以下结果，这支持了我对单个方法调用比单个信号/插槽更快的怀疑：

```
Now start timeit tests
Calling choice1 via single_signal  
timeit says :  0.010595089312688225
Calling choice1 and choice2 via double_signal 
timeit says :  0.014604222516910098
Calling choice3 via method
timeit says :  0.0016033988748859057 
```

如果您通过信号/插槽而不是方法驱动套接字事件循环，那将有很大的不同。单击按钮应该无关紧要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T08:02:54.513

使用信号和插槽的原因不是速度，而是[松耦合](http://en.wikipedia.org/wiki/Loose_coupling)。使用信号和槽可以更好地重用。有一篇[很好的论文](http://www.elpauer.org/stuff/a_deeper_look_at_signals_and_slots.pdf)讨论了动机和好处。它确实增加了一些间接性，但它非常值得，恕我直言。

# python - Gtk/python 和可移植性

> ID：15846390
> 
> 赞同：4
> 
> 时间：2013-04-06T02:35:24.183
> 
> 标签：python, linux, gtk, pygtk

程序员如何编写适用于多个发行版的可移植 UI 代码？我正在考虑桌面发行版，而不是专门/嵌入式发行版。对于编写 UI 应用程序，您必须假设某些东西将作为标准或通过添加的依赖项在平台上可用。Linux 发行版是否有一个“最低”的 UI/widget 标准？

当您编写代码时，Gnome 与 KDE 发行版是如何形成的？

我有一个使用 Gtk 和 Webkit 的 python 脚本。以下是我的脚本使用的导入。

```
import os
import threading
from gi.repository import WebKit 
from gi.repository import Gtk 
from gi.repository import GLib, GObject 
```

找出我的代码适用于哪些发行版的最佳来源是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T18:22:31.620

编写跨发行版 UI 无需考虑太多东西。
实际上，我记得的唯一不兼容问题是：

托盘图标或通知区域或应用程序指示器（在 Ubuntu 中称为）
例如标准托盘图标（`gtk.StatusIcon`由默认情况下在 Ubuntu 的 Unity 中创建不起作用如果找到 appindicator 模块，则
最好使用`appindicator.Indicator`，否则只需使用经典`StatusIcon`

如果你太在意程序的风格/主题，你可能会在其他环境（如 KDE）上遇到问题，
除非你使用合适的主题引擎来充当桥梁，否则请查看：
[https ://wiki.archlinux.org /index.php/Uniform_Look_for_Qt_and_GTK_Applications](https://wiki.archlinux.org/index.php/Uniform_Look_for_Qt_and_GTK_Applications)

为了了解发行版/操作系统，我编写了这样一个函数：

```
def getOsFullDesc():
    name = ''
    if os.path.isfile('/etc/lsb-release'):
        lines = open('/etc/lsb-release').read().split('\n')
        for line in lines:
            if line.startswith('DISTRIB_DESCRIPTION='):
                name = line.split('=')[1]
                if name[0]=='"' and name[-1]=='"':
                    return name[1:-1]
    if os.path.isfile('/suse/etc/SuSE-release'):
        return open('/suse/etc/SuSE-release').read().split('\n')[0]
    try:
        import platform
        return ' '.join(platform.dist()).strip().title()
        #return platform.platform().replace('-', ' ')
    except ImportError:
        pass
    if os.name=='posix':
        osType = os.getenv('OSTYPE')
        if osType!='':
            return osType
    ## sys.platform == 'linux2'
    return os.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:28:01.210

Python 基本上是一种胶水语言——它自己做的不多，但依赖于各种库，如 pygtk、tkinter 等，甚至是你的自定义 C/C++ 模块。做它的事情。所以从逻辑上讲，您所需要的只是您所说的库的特定依赖项：PyGTK 和 WebKit 要安装在您的目标机器上。

一旦将它们与 Python 一起安装在 Windows 甚至 MAC 上，python 将很高兴地执行此代码，因为它所做的只是粘合！！

# python - 在特定日期禁用程序

> ID：15846391
> 
> 赞同：0
> 
> 时间：2013-04-06T02:35:34.160
> 
> 标签：python

所以我想写一个程序，让我们说在 5 月 1 日禁用自己。

我该怎么做？我正在考虑使用 localtime 获取时间，然后编写一个“if 块”来询问程序日期是否 >= 到 5 月 1 日。如果是这样，它应该提示用户他不能再使用该程序，因为它已过期。

但是我在编写 if 语句时遇到了问题，因为 localtime 返回了很多值。我将如何编写 if 块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:55:14.013

您正在寻找的是转换`datetime`为`date`您可以通过 执行的操作`datetime.datetime.now().date()`，因为`if condtion`您可以执行以下操作：

这只是一个例子：

```
import datetime
if datetime.datetime.now().date() >= datetime.date(2012, 1, 15): #insert your date here
    print "True" 
    ...........
    Your Code
    ........... 
```

你想要的关于这个主题的所有文档都在这里，[http://docs.python.org/2/library/datetime.html](http://docs.python.org/2/library/datetime.html)

# ocaml - 从文件内容打印字符串缓冲区

> ID：15846394
> 
> 赞同：0
> 
> 时间：2013-04-06T02:36:29.903
> 
> 标签：ocaml

我想打印文件的内容。我尝试使用字符串缓冲区：

```
let ch = open_in "myfile.txt" in
let buf = Buffer.create 1024 in
(try Buffer.add_channel buf ch max_int with _ -> ());
close_in ch;

let string = Buffer.contents buf
print_endline string 
```

这只是给了我一个语法错误。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:05:26.177

您需要提供正确的通道长度：

```
let ic = open_in "foo" in
let len = in_channel_length ic in
let buf = Buffer.create len in
Buffer.add_channel bif ic len;
let str = Buffer.contents b in
print_endline str 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:20:07.917

The only syntax error I see is a missing `in` after `let string = Buffer.contents buf`.

The purpose of `Buffer.add_channel` is to add exactly the given number of characters from the given channel to the buffer. Unless your file `"myfile.txt"` is exceptionally large, the buffer will be empty when you print it out.

In fact on my system (a 64-bit system), `max_int` is so large that `Buffer.add_channel` doesn't even try to read that much data. It raises an `Invalid_argument` exception.

# ruby-on-rails - 尝试从父对象控制器创建子类对象

> ID：15846398
> 
> 赞同：-1
> 
> 时间：2013-04-06T02:37:16.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我试图弄清楚如何获取一个名为“meal”的对象的当前实例来创建一个属于它的食物对象。

它在控制台中工作......它很简单，就像这样：

```
user = User.first
user.meal.first.meal_foods.create 
```

一个用户可以吃很多餐，每餐可以有很多餐食。

对我来说，这里的挑战是食物控制器在创建我的餐食时的创建动作。

（我在这里使用 STI，因此使用“foods”控制器和“meal_food”名称）

目前，创建操作如下所示：

```
 @food = current_user.meal.meal_foods.build 
```

我也试过这个，因为复数对象名称的东西

```
 @food = current_user.meal.meal_food.build 
```

这是它给两者的错误

```
undefined method `meal_foods' for [#<Meal id: 17, user_id: 1, meal_name: "Meal">]:ActiveRecord::Relation 
```

* * *

**更新：**

我在这里特别遇到的问题是选择正确的餐点来创建餐食。

在控制台中，我可以选择第一个，这很好。但是在食品控制器中，我需要*选择正确的餐点*来创建餐食。

编写餐食.first 将为该用户选择第一餐。如果我想从 5 餐中选择第 3 餐，我需要想办法获取该餐的 ID。

我刚刚试过这个：

```
<%= link_to "new food", foods_path(id: meal.id), method: :create %> 
```

将meal.id 作为可在foods_controller 中使用的参数传入。然后在 foods_controller 中我做了：

```
@meal_food = current_user.meals.find_by_id(params[:id]).meal_foods.build 
```

*看起来*它正在提交，因为页面重新加载了成功消息，但是没有创建 meal_food，所以它只是没有显示。

我检查了控制台，并没有为这个用户的第一餐创建新的食物。

* * *

好的，我意识到我上面写的 link_to 创建了这个 url：

```
foods?id=29 
```

并且我用来检索这个 id 的方法不起作用，因为 params[:id] 正在寻找一个路径 id，而不是这个 url id。

提前致谢！

* * *

模型：

```
class Meal < ActiveRecord::Base
  before_save :sanitize
  has_and_belongs_to_many :meal_foods
  attr_accessible :meal_name

  def sanitize
    self.meal_name = "Meal"
  end
end 

class Food < ActiveRecord::Base
  attr_accessible :brand, :carbs, :fat, :name, :protien, :type

end   

class MealFood < Food
  has_and_belongs_to_many :meals
end 

class User < ActiveRecord::Base

  has_many :meal, dependent: :destroy
  has_many :custom_foods, dependent: :destroy 
```

控制器：

```
class FoodsController < ApplicationController
  #functions
  def create

    #this is where I need to grab the correct meal, and then create a meal_food for it...

    if @meal_food.save!
      flash[:success] = "Food created successfully!"
      redirect_to meal_path(current_user.id)
    else
      flash[:error] = "Food couldn't be created."
      redirect_to meal_path(current_user.id)
    end
 end
end 
```

部分：

这是重复显示每餐的餐食部分。它有 link_to 用于创建属于它所在的餐点的餐点。

```
<tr>
  <thead class=meal-thead>
   <td class=meal-thead-name> <%= meal.meal_name %> </td>
     <th> </th>
     <th> </th>
     <th> </th>
     <th> </th>
     <th> <%= link_to "x", meal_path(meal.id), method: :delete %> </th>
  </thead>

  <tbody class=meal-tbody>

  <%# get reference to current meal and its foods %>
  <%= render meal.meal_foods %>

  <td class=remove-td-center> <%= link_to "new food", foods_path, method: :create %> </td> 
 </tbody>    
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:25:45.613

有时你说 User.meal.meal_foods，有时你说 User.meal.first.meal_foods。User.meal 是一个膳食数组，因此从控制台 User.meal.first.meal_foods 可以工作，并且在您的代码中 User.meal.meal_foods 不会给您任何方法错误。此外，您应该在代码中使用复数餐点，并将 has_many 餐点替换为 has_many 餐点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T16:36:06.757

几件事：

1.  "has_many :meal,dependent: :destroy" 应该是 "has_many :meals,dependent: :destroy" has_many 关联名称是复数形式。如果您只需要一个，请改用 has_one。
2.  这行是错误的：@food = current_user.meal.meal_food.build，因为餐是 has_many，所以你需要一个“第一”。另外，它返回的不是食物，而是meal_food，所以你应该这样说，否则你会迷惑自己：

    @meal_food = current_user.meal.first.meal_food.build

我突然想到 MealFood => 一个更好的名字应该是 Serving。然后你的饭菜可以有_many servings，每份可以有一个食物。没有错误，只是更容易理解。然后你会有以下代码。请注意，我没有看到 STI 对食物的意义——将所吃食物的数量简单地放在份量表中更有意义，那么你根本不需要 STI。

```
 class Meal < ActiveRecord::Base
    before_save :sanitize
    has_many :servings
    has_many :foods, :through => :servings
    attr_accessible :meal_name

    def sanitize
      self.meal_name = "Meal"
    end
  end 

  class Food < ActiveRecord::Base
    attr_accessible :brand, :carbs, :fat, :name, :protein, :type
    has_many :servings, :inverse_of => :food
  end   

  class Serving < ActiveRecord::Base
    attr_accessible :amount
    has_many :foods
    has_many :meals
  end 

  class User < ActiveRecord::Base
    has_many :meals, dependent: :destroy
  end 
```

高温高压

# html - 我想将 MySQL 数据库中的列表数据格式化为偶数行和列

> ID：15846401
> 
> 赞同：0
> 
> 时间：2013-04-06T02:37:51.110
> 
> 标签：html, css

基本上如标题所说。我查看了其他示例，但它们似乎不符合我的要求。我以列表格式将数据库中的数据回显给用户。我希望它在显示时显示为偶数行和列。

这是我当前的 css 代码

```
.recent_items{
    margin-left: 10%;
    margin-right: 10%;
}

.item li{
    list-style: none;
    display: inline-block;
    padding: 10px;
}
.item{
   width:85%;
} 
```

这是数据的php代码

```
<?
                    $per_page = 30;
                    $pages_query = mysql_query("SELECT COUNT(*) FROM ads") or die(mysql_error());
                    $pages = ceil(mysql_result($pages_query, 0)/ $per_page);
                    $curr_page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;
                    $start = ($curr_page - 1) * $per_page;

                    //get ad information
                    $ad_info = mysql_query("SELECT * FROM ads ORDER BY dateCreated DESC LIMIT $start, $per_page") or die(mysql_error());
                    $rows = mysql_num_rows($ad_info);

                    echo '<ul class="item">';
                    while($row = mysql_fetch_array($ad_info)){
                        $ad_id = $row['adId'];
                        $title = $row['title'];
                        $price = $row['price'];
                        $location = $row['location'];

                        $ad_type = mysql_query("SELECT * FROM types WHERE adId=$ad_id") or die(mysql_error());
                        while($row = mysql_fetch_array($ad_type)){
                            $cat = $row['category'];
                            $sub = $row['subCat'];

                            echo
                            "
                                <li>$title</br>
                                <label>Price:</label> $price</br>
                                <label>Location:</label> $location</br>
                                <a href=\"search.php?searchValue=".$cat."\">$cat</a>/<a href=\"search.php?searchValue=".$sub."\">$sub</a></li>
                            ";
                        }
                    }
                    echo '</ul>';

                    if($pages >= 1 && $curr_page <= $pages){
                        for($x = 1; $x <= $pages; $x++){
                           echo ($x == $curr_page) ? "<b><a href=\"?page=$x\">$x</a></b> " : "<a href=\"?page=$x\">$x</a> ";
                        }
                    }
                ?> 
```

问题是css和php代码看起来像这样： [https ://twitter.com/HassanNSaid/status/320364537477996544/photo/1](https://twitter.com/HassanNSaid/status/320364537477996544/photo/1)

如您所见，列未对齐。我尝试改变宽度，但所发生的只是一个项目基本上向上移动了一行。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:21:24.317

You should probably define a width for your `li` elements.

```
.item li{
    list-style: none;
    display: inline-block;
    padding: 10px;
    width: 25%; /* this would give you four columns */
} 
```

The width on `.item` corresponds to the outer container width...your `li` elements determine the column width. Essentially, your saying you want the whole list to occupy 85% of the window width. Since you didn't define a width for the `li` but you did say they should act like inline elements, they will shrink down to fit the inner content (giving you varying widths). By specifying the width of the `li`, you are saying you want them all to be the same. If the content on a line is greater than that width, it will end up wrapping.

# google-chrome-extension - 如何阅读 chrome 扩展开发文档？

> ID：15846402
> 
> 赞同：1
> 
> 时间：2013-04-06T02:38:13.677
> 
> 标签：google-chrome-extension

看起来文档很稳定。但我对它的约定感到有点沮丧。例如，以下屏幕截图中的字段**名称是什么？**阅读文档指南的任何一个帮助点是什么？![样本](https://i.stack.imgur.com/x0vIB.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T02:45:05.347

`name`在这种情况下，您可以为端口使用一个可选名称。你像这样使用它：

```
var port = chrome.runtime.connect({name:"testName"}); 
```

在那之后，`port.name`将是`"testName"`。

`connectInfo`被定义为一个对象，这意味着在它下面缩进列出的任何字段，就像它一样`name`，是它的一部分。

# python - Python中的简单用户名和密码应用程序

> ID：15846407
> 
> 赞同：6
> 
> 时间：2013-04-06T02:38:27.467
> 
> 标签：python, python-2.7

我正在尝试使用字典构建一个简单的登录和密码应用程序。它工作正常，除了检查登录名是否与密码匹配的部分（在底部显示“登录成功！”）。

如果我要创建登录名'a'和密码'b'，然后创建登录名'b'和密码'a'，如果我尝试使用登录名'a'和密码'a'登录，它会登录我。它只是检查这些字符是否存在于字典中的某个地方，而不是它们是否是一对。

任何建议如何解决这个问题？

```
users = {}
status = ""

while status != "q":
    status = raw_input("Are you a registered user? y/n? Press q to quit: ")  

    if status == "n": #create new login
         createLogin = raw_input("Create login name: ")

         if createLogin in users: # check if login name exist in the dictionary
             print "Login name already exist!\n"
         else:
             createPassw = raw_input("Create password: ")
             users[createLogin] = createPassw # add login and password
             print("\nUser created!\n")     

    elif status == "y": #login the user
        login = raw_input("Enter login name: ")

        if login in users:
           passw = raw_input("Enter password: ")
           print

           if login in users and passw in users: # login matches password
               print "Login successful!\n"

        else:
            print
            print("User doesn't exist!\n") 
```

**编辑**

现在这正在工作，为了便于阅读，我正在尝试将应用程序划分为三个功能。它有效，除了我得到无限循环。

任何建议为什么？

```
users = {}
status = ""

def displayMenu():
    status = raw_input("Are you a registered user? y/n? Press q to quit: ")  
    if status == "y":
        oldUser()
    elif status == "n":
        newUser()

def newUser():
    createLogin = raw_input("Create login name: ")

    if createLogin in users: # check if login name exists
        print "\nLogin name already exist!\n"
    else:
        createPassw = raw_input("Create password: ")
        users[createLogin] = createPassw # add login and password
        print("\nUser created!\n")     

def oldUser():
    login = raw_input("Enter login name: ")
    passw = raw_input("Enter password: ")

    # check if user exists and login matches password
    if login in users and users[login] == passw: 
        print "\nLogin successful!\n"
    else:
        print "\nUser doesn't exist or wrong password!\n"

while status != "q":            
    displayMenu() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T02:44:37.317

现在，您正在检查给定的密码 是否与（不正确）中的`passw`任何*键匹配。*`users`您需要查看输入的密码是否与该特定用户的密码匹配。由于您已经检查了用户名是否存在于字典的键中，因此您不必再次检查，因此请尝试以下操作：

```
if passw == users[login]:
    print "Login successful!\n" 
```

编辑：

对于您更新的代码，我将假设“无限循环”意味着您不能用于`q`退出程序。这是因为当你在里面时，你将`displayMenu`用户输入保存在一个**名为**`status`. 此局部变量**与**`status`您检查的地方不同，

```
while status != "q": 
```

换句话说，您`status`在**两个不同的范围**内使用变量（更改内部范围不会更改外部范围）。

有很多方法可以解决这个问题，其中一种是改变，

```
while status != "q":
    status = displayMenu() 
```

并在末尾添加一个 return 语句`displayMenu`，

```
return status 
```

通过这样做，您将新值`status`从本地范围保存`displayMenu`到脚本的全局范围，以便`while`循环可以正常工作。

另一种方法是将此行添加到`displayMenu`,

```
global status 
```

这告诉 Python `status`within`displayMenu`指的是全局作用域`status`变量，而不是新的局部作用域变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:41:36.533

改变

```
if login in users and passw in users: # login matches password 
```

到

```
if users[login] == passw: # login matches password 
```

此外，您不应该告诉黑客“用户不存在！”。更好的解决方案是说出一般原因，例如：“用户不存在或密码错误！”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T05:51:29.283

如果你把它放到网上，请在数据库中加密你的密码。干得好。

```
import md5
import sys
# i already made an md5 hash of the password: PASSWORD
password = "319f4d26e3c536b5dd871bb2c52e3178" 
def checkPassword():
    for key in range(3):
        #get the key
        p = raw_input("Enter the password >>")
        #make an md5 object
        mdpass = md5.new(p)
        #hexdigest returns a string of the encrypted password
        if mdpass.hexdigest() == password:
            #password correct
            return True
        else:
            print 'wrong password, try again'
    print 'you have failed'
    return False

def main():
    if checkPassword():
        print "Your in"
        #continue to do stuff

    else:
        sys.exit()
if __name__ == '__main__':
    main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-30T07:12:20.337

```
usrname = raw_input('username   :     ')
if usrname == 'username' :
    print 'Now type password '

else :
    print 'please try another user name .this user name is incorrect'

pasword = raw_input ('password     :    ')
if pasword  == 'password' :
    print ' accesses granted '
    print ' accesses granted '
    print ' accesses granted '
    print ' accesses granted '
    print 'this service is temporarily unavailable'

else :
    print 'INTRUDER ALERT !!!!' , 'SYSTEM LOCKED'
    print 'INTRUDER ALERT !!!!' , 'SYSTEM LOCKED'
    print 'INTRUDER ALERT !!!!' , 'SYSTEM LOCKED'
    exit() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-07T19:30:36.513

这是基于之前针对单个用户的一个非常简单的一个，具有改进的语法和错误修复：

```
print("Steam Security Software ©")
print("-------------------------")
print("<<<<<<<<<Welcome>>>>>>>>>")
username = input("Username:")
if username == "username" :
    print ("Now type password")

else :
    print ("please try another user name. This user name is incorrect")

password = input ("Password:")
if password  == "password" :
    print ("ACCESS  GRANTED")
    print ("<<Welcome Admin>>")
    #continue for thins like opening webpages or hidden files for access

else :
    print ("INTRUDER ALERT !!!!" , "SYSTEM LOCKED")
    exit() 
```

# c - 是否有必要将文件指针传递给main？

> ID：15846415
> 
> 赞同：0
> 
> 时间：2013-04-06T02:39:30.750
> 
> 标签：c

我对 C 编程很陌生，我必须制作一个程序，要求用户输入要打开的文件名，然后打开该文件并打印排序的值。

我是否需要将文件指针传递给 main，或者我可以只在一个函数中打开文件，然后我可以在其他函数中使用该文件？

```
int getFile ()
{
    char file_name[100]; 
    FILE* fp;           
    int rc;              
    printf("Enter the file name: ");
    rc = scanf("%s", file_name);
    if (rc != 1)
        printf ("error");

    fp = fopen(file_name, "r");

    return 0;

} 
```

我是否必须将文件指针从这里传递给 main？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:46:27.670

只需将文件名作为参数传递给`main`函数，它可能是你想要的。您可以使用`int main(int argc, char* argv[])`，例如：

```
int main(int argc, char* argv[])
{
    FILE*  fp;
    if (argc == 1)
        printf("usage : a.out filename\n");
    else
    {
        if (fp = fopen(*++argv, "r") != NULL)
        {
            /*your code here*/
        }
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:45:39.520

您可以在一个函数中打开文件并将其作为参数传递给其他函数。例如，对于预打开文件句柄标准输入，您可以将其用作：

```
char mystring [100];
fgets (mystring , 100 , pFile) 
```

# java - Android 联系人数据字段可以编辑但不能创建

> ID：15846416
> 
> 赞同：0
> 
> 时间：2013-04-06T02:39:37.857
> 
> 标签：java, android, android-contentprovider, android-contacts, android-contentresolver

我使用此代码更新联系人的地址，但它仅适用于具有现有地址的联系人。如果联系人地址字段为空，则 update() 方法返回零并且不更新联系人数据。如何向现有联系人添加地址？

```
//str_id is the contact's ID
//input is the String representing an address
ContentValues cv = new ContentValues();
String[] params = new String[] { str_id, ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE };
cv.put(ContactsContract.CommonDataKinds.StructuredPostal.FORMATTED_ADDRESS, input);
getContentResolver().update(ContactsContract.Data.CONTENT_URI, cv, ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?", params); 
```

我也尝试了 ContentProviderOperation 的等效逻辑，但得到了相同的结果。就像我之前的示例一样，我可以更新现有地址但不能创建地址。

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
    .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, id)
    .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE)
    .withValue(ContactsContract.CommonDataKinds.StructuredPostal.FORMATTED_ADDRESS, input)
    .build()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:38:56.073

您需要在更新地址之前检查地址是否存在，如果地址存在，您的上述代码将正常工作，因为您正在更新..

在执行插入地址时，实际上您正在执行**[子插入”，请参见此处](https://stackoverflow.com/a/6741039/1677824)**，对与您的问题密切相关的 ContentProviderOperation 的很好解释..

# c# - Windows Phone 7 的哪个程序集有 EventProgress？

> ID：15846420
> 
> 赞同：1
> 
> 时间：2013-04-06T02:40:25.603
> 
> 标签：c#, visual-studio, windows-phone-7, silverlight-4.0, async-await

我在使用 VS2012 用 C# 编写的 Windows Phone 7 应用程序中使用基于任务的异步模式对象和方法。我已经安装了以下附加软件包来促进这一点：

*   .NET Framework 4 的异步，Silverlight 4（Microsoft.BCL.Async 版本 1.0.14-rc，预发布）
*   适用于 .NET Framework 4、Silverlight 4 的 BCL Portability Pack（Microsoft.BCL，版本 1.0.16-rc，预发布）
*   Microsoft 构建组件（Microsoft.Bcl.Build 1.0.0.-rc，预发布）

我能够解析*async、await、CancellationTokenSource、IPProgress*和大多数其他 TAP 元素。但是，我找不到实现**IProgress的****EventProgress**类的必要程序集/DLL 。

 **有谁知道如何在 Windows Phone 7.1 应用程序中正确解决**EventProgress ？**我知道这些软件包说的是*Prerelease*，但它们是我能找到的最新版本。如果有人知道仍然适用于 Windows Phone 7.1 的任何更新，请告诉我）。

请注意，这是我发现 EventProgress 类的文章。不幸的是，它不是 Windows Phone 7 项目：

[C# 5 Async 中的进度报告](http://www.codeproject.com/Articles/129447/Progress-Reporting-in-C-5-Async#heading0010)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T07:04:16.903

`Microsoft.Progress<T>`汇编中有类`Microsoft.Threading.Tasks`，它实现了`IProgress<T>`。它是`Microsoft.Bcl.Async`包装的一部分。**

# c# - XNA 鼠标位置关闭

> ID：15846421
> 
> 赞同：0
> 
> 时间：2013-04-06T02:40:32.667
> 
> 标签：c#, xna-4.0

我正在 XNA 中开发一个小型高尔夫游戏，我最初在 Game.cs (main) 中拥有所有内容，但我现在希望它更加面向对象，因此我为我的大部分内容创建了单独的类。

当我在 Game.cs 中拥有所有东西时，它工作正常，但现在不行了。

正在发生的事情是这样的：

当我的光标在游戏窗口的左上角时，就像 X=200，Y=50。它应该是X = 0，Y = 0。即使我寻找 0, 0 位置，它也在游戏窗口之外。

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:11:44.393

这怎么可能？您的光标位置*是*鼠标位置。只需在此处绘制光标即可。

除非您在谈论 Windows 光标。在那种情况下，是的，XNA 中的输入数据将与 Windows 光标移动不匹配。他们可能会为加速等应用一些修饰符。您必须自己解释输入数据。换句话说，**绘制自己的光标。**

# javascript - 在带有淡入和淡出效果的图像上显示 HTML 元素

> ID：15846423
> 
> 赞同：0
> 
> 时间：2013-04-06T02:41:02.263
> 
> 标签：javascript, jquery, html, fadein, fadeout

我在图像上显示两个按钮和一个复选框，如下所示

![在此处输入图像描述](https://i.stack.imgur.com/eyt6v.jpg)

这些按钮和复选框仅在鼠标指针位于图像上方时显示。当鼠标指针移开时，它们会消失。

这个效果是通过下面的简单 jQuery 代码实现的。

```
jQuery(function(){
    jQuery(".the-buttons").hide();

    jQuery('.show-image').hover(function(){
        jQuery(this).find('.the-buttons').fadeIn(600);
    },function(){
        jQuery(this).find('.the-buttons').fadeOut(300);
    });
}); 
```

相关的 HTML/CSS 如下。

```
<span class="show-image" style="position: relative;float:left;margin:5px;">                        
    <a href="../product_images/large/3562298873030291049_Winter.jpg">
        <img src="../product_images/medium/3562298873030291049_Winter.jpg" alt="The image is not available"/>
    </a>

    <input type="button" class="the-buttons" name="btnEdit" value="" style="background-image:url(../css/layout/site/tables/action2.gif);height: 12px; width: 14px; border: none; cursor: pointer; background-color: transparent;position:absolute;top:0;left:0;" title="Click to edit this image." />                        
    <input type="checkbox" class="the-buttons" id="chk" name="chk" title="Check to mark for multiple deletion at once." style="position:absolute;bottom:0;right:0;" value="662"/>
    <input type="submit" class="the-buttons" name="btnDeleteSingle" value="" style="background-image:url(../css/layout/site/tables/action4.gif);height: 12px; width: 14px; border: none; cursor: pointer; background-color: transparent; text-align:right;position:absolute;top:0;right:0;" title="Click to delete this image." />
</span> 
```

与按钮和复选框一样的静态 CSS 类型是不相关的。`show-image`具有给定`<span>`标签、给定按钮和复选框的 CSS 类与`the-buttons`提供此效果的 jQuery 代码交互。

* * *

我还有一个额外的要求。当图像右下角的给定复选框被选中/选择时，它应该永久显示，忽略淡入和淡出效果。然而，图像上显示的另外两个按钮应该具有该效果（当再次取消选中该复选框时，它应该具有该效果）。我尝试过某种方式，但没有成功。这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:46:40.333

当它被选中时，给它一个定义如下的类：

```
.always-visible {
    display: inline !important;
} 
```

并使用此代码：

```
$("#chk").on("click", function () {
    var $this = $(this);
    if ($this.is(":checked")) {
        $this.addClass("always-visible");
    } else {
        $this.removeClass("always-visible");
    }
}); 
```

（当然，必要时替换`$`为）`jQuery`

现在我认为可能还需要使用此代码进行褪色：

```
jQuery(this).find('.the-buttons').not('.always-visible').fadeIn(600);
// and
jQuery(this).find('.the-buttons').not('.always-visible').fadeOut(300); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:55:36.760

制作一个检查复选框是否被选中的函数。然后，您可以在图片悬停时执行此操作。

```
if($('#chk').is(':checked')) {
        get only two of them fading in and out
}

else {
        all of them fading in and out
} 
```

希望这可以帮助。

# php - 一个域使用旧版本的 PHP，而另一个域使用新版本

> ID：15846424
> 
> 赞同：0
> 
> 时间：2013-04-06T02:41:06.107
> 
> 标签：php, dedicated

社区，

我有一个使用 PLESK 9 的专用服务器。

不久前，我通过 SSH 连接到服务器并将 PHP 更新到 5.4。今天我向服务器添加了一个新域，由于某种原因 phpinfo() 报告它正在使用 5.1。

我的其他域已确认使用 5.4。知道为什么会这样吗？

最亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:09:20.427

我很久没有使用 Plesk 了，但是；

1 - 检查托管属性。如果 Plesk 允许，请更改 PHP 版本。

2 - 通过 SSH 检查虚拟主机配置并比较这些域的配置。

这些步骤之一应该可以解决您的问题。

# php - 在 ORM 中将模型代码放在哪里？（雄辩）

> ID：15846428
> 
> 赞同：0
> 
> 时间：2013-04-06T02:41:33.823
> 
> 标签：php, codeigniter, orm, eloquent

我不太明白我的代码在这个 orm 中的位置。

```
class Brand_model extends MY_Model {

public function add_brand($name, $size)
{
//goal:
//        $sql = "insert into brand (name, size_id) values (?,?)";
//        $query = $this->db->query($sql, array($name, $size));

    $brand = new self();
    $brand->name=$name;
    $brand->size=$size;
    $brand->save();

} 
```

这会在数据库中的相应表中生成一个新行，但其中没有数据。但是，我确信这些变量已被填充。有任何想法吗？

我的设计模式预设是将几乎所有东西都放在模型中。这样，如果多个控制器需要相同的数据结构，我调用一个函数一次，它会处理所有的验证/等。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T07:06:32.137

请找到 eloquent 和 codeigniter 集成的链接

[http://mannyisles.com/using-eloquent-orm-inside-codeigniter.html](http://mannyisles.com/using-eloquent-orm-inside-codeigniter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T09:35:53.493

要使用 ORM，首先，您需要设置连接。你可以看看[这个答案](https://stackoverflow.com/questions/30592116/laravel-eloquent-integration-in-codeigniter/30614649#30614649 "这个答案")。它告诉您如何设置 eloquent 数据库连接。

完成后，您需要创建一个模型，该模型将扩展 ORM，并使用该模型进行所有数据库调用。

您可以创建一个文件 - 比如说，FooModel.php，如下所示：

```
<?php

namespace Models\FooModel;

use Illuminate\Database\Eloquent\Model;

class FooModel extends Model
{
    protected $table = 'sample_table';
    protected $fillable = array('comma', 'seperated', 'column', 'names');

    protected $hidden = array('id');
    public $timestamps = true;
}
?> 
```

`$fillable`告诉 eloquent 你想写入哪些列。您可以忽略自动递增的列和具有默认值的列。 `$timestamps`处理您的 created_at 和 updated_at 列，如果有的话。

当你必须创建行时，你可以调用 eloquent [create()](http://laravel.com/docs/4.2/eloquent#insert-update-delete "创造")函数。此函数需要一个关联数组，其中列名作为键，值作为您要插入该列的相应值。

```
$row = array('name' => 'Foo',
     'email' => 'foo@bar.com'
); 
```

然后，您可以只调用 create 函数，并将`$row`其作为参数。

`$response = FooModel::create($row);`

如果您执行 a `var_dump($response);`，您可以看到`create()`. `true`成功或错误消息。

有关更多信息，您可以查看[Docs](http://laravel.com/docs/4.2/eloquent "文件")。真的没那么难！

干杯! :)

# linux - 加入 Active Directory 时更改本地 linux 密码

> ID：15846429
> 
> 赞同：3
> 
> 时间：2013-04-06T02:41:35.307
> 
> 标签：linux, active-directory, passwords

我有一个 linux 机器：Linux vuappserver 2.6.32-5-686 #1 SMP Mon Oct 3 04:15:24 UTC 2011 i686 GNU/Linux

我使用 SMB + windbind 加入 Active Directory

但现在我尝试添加一个本地用户：

用户添加测试

但是当我尝试更改密码时，我收到此错误：

root@server:/home/vu# passwd test 当前 Kerberos 密码：passwd：身份验证令牌操作错误 passwd：密码未更改

我检查了这个文件的权限：

-rw-r--r-- 1 0 0 1350 4 月 5 日 23:17 /etc/passwd -rw-r----- 1 0 42 941 4 月 5 日 23:17 /etc/shadow

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-22T15:41:28.613

默认情况下 pam_krb5.so 在 /etc/pam.d/common-* 中将“minimun_uid”设置为 1000
例如：

```
password    [success=3 default=ignore]  pam_krb5.so minimum_uid=1000 
```

我的用户有 uid=1001 并且根据默认设置，kerberos 控制了（坏事）。另一方面，我的 AD 用户的映射范围更大（/etc/samba/smb.conf）：

```
idmap config * : range = 10000-40000 
```

因此，我将 /etc/pam.d/common-* 中的“minimun_uid”调整为 10000，现在我很高兴 :-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-09T13:08:35.323

如果您在 Windows 域中，您的身份验证配置（很可能是 /etc/pam.d/common-auth 和 /etc/pam.d/passwd）指出要更改密码，它必须与域同​​步（通过 Kerberos/LDAP）。您可以通过指定要更改的帐户存储库/身份验证领域来指示**passwd**命令更改本地帐户：

```
passwd -r files account_name 
```

在 -r 选项上检查 passwd 的手册页。

# c - 从文件中读取以使用 C 创建数组

> ID：15846432
> 
> 赞同：-1
> 
> 时间：2013-04-06T02:41:48.880
> 
> 标签：c, arrays, file

如何通过读取 .txt 文件来创建数组？

我正在制作一个投标（拍卖）程序。我需要从 .txt 中读取整数并在数组中使用它们。我对如何在我的程序中进行此操作感到困惑。txt如下：

100 15 200 20 300 25 400 30 500 35

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T03:19:10.570

It is definitely recommended to show one's own effort while asking the question. However, to give you a jump start, please find a couple of solutions as below.

One possible illustrative solution using a static array is as in **Solution 1** below. The assumption in the solution below is that the number of elements is known and is less than 32\. If wish to keep it truly dynamic, you will have to implement a solution using a linked list as in **Solution 2** below.

**Solution 1: Fixed Array based approach**

```
int main()
{
    FILE    *finp;
    int     someArr[32];
    int     i, ctr = 0;

    finp = fopen("haha.txt", "r");
    if(NULL == finp)
    {
        printf("Unable to open file\n");
        exit(-1);
    }

    while((!feof(finp)) && (ctr < 32))
    {
        fscanf(finp, "%d ", &someArr[ctr++]);
    }

    for(i = 0; i < (ctr -1); i++)
    {
        printf("%d==>", someArr[i]);
    }
    printf("%d\n", someArr[i]);

    fclose(finp); //Close the file pointer

    return 0;
} 
```

The expected output of this program is

> > 100==>15==>200==>20==>300==>25==>400==>30==>500==>35

**Solution 2: Linked List based solution**

Further to my earlier comment, please find an alternative dynamic solution which doesn't require a prior knowledge on the number of elements as below.

```
typedef struct node {
int value;
struct node  *next;
}node;

void createList(FILE    *fInp, node **headBase)
{
    node    *currNode;
    node    *head = *headBase;
    node    *tail;

    while(!feof(fInp))
    {
        currNode = malloc(sizeof(struct node));
        fscanf(fInp, "%d ", &currNode->value);
        currNode->next = NULL;

        if(NULL == head)
        {
            head = currNode;
            tail = currNode;
        }
        else
        {
            tail->next = currNode;
            tail = currNode;
        }
    }

    //Store back the updated head pointer
    *headBase = head;
}

void  printList(node **headBase)
{
    node    *tmpNode = *headBase;

    while(tmpNode->next != NULL)
    {
        printf("%d-->", tmpNode->value);
        tmpNode = tmpNode->next;
    }
    printf("%d\n", tmpNode->value);
}

void deleteList(node **headBase)
{
    node    *head = *headBase;
    node    *tmp;

    while(NULL != head)
    {
        tmp = head; // Get a temp pointer
        head = head->next; // Move head pointer
        tmp->next = NULL; // break the link
        printf("<< Deleted Node: %d\n", tmp->value);
        free(tmp);
    }

    // Store the head pointer back which should be NULL
    *headBase = head;
}

int main()
{
    FILE    *finp;
    node    *head = NULL;

    finp = fopen("haha.txt", "r");
    if(NULL == finp)
    {
        printf("Unable to open file\n");
        exit(-1);
    }

    createList(finp, &head);

    printList(&head);

    deleteList(&head);

    fclose(finp);

    return 0;
} 
```

The expected output of this program is

```
100-->15-->200-->20-->300-->25-->400-->30-->500-->35
<< Deleted Node: 100
<< Deleted Node: 15
<< Deleted Node: 200
<< Deleted Node: 20
<< Deleted Node: 300
<< Deleted Node: 25
<< Deleted Node: 400
<< Deleted Node: 30
<< Deleted Node: 500
<< Deleted Node: 35 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T03:36:25.797

假设您不知道在输入文件中可以找到多少个整数，您可以定义一个最大值。

你也必须包括`stdio.h`和`stdlib.h`

```
#define MAX 255
int main() {
    FILE *file = fopen("input.txt", "r");
    int integers[MAX];
    int i = 0;
    if (file != NULL) {
        while (!feof(file) && i < MAX) {
            if (fscanf(file, "%d", &integers[i++]) != -1) {
                printf("%d ", integers[i-1]);
            }
        }
        fclose(file);
    } else {
        printf("Unable to open file");
        return EXIT_FAILURE;
    }

    return 0;
} 
```

# c - 播种 srand() 的最佳方法是什么？

> ID：15846433
> 
> 赞同：8
> 
> 时间：2013-04-06T02:42:17.647
> 
> 标签：c, random, srand

我学到的方法是最初使用随机数生成器播种`srand(time(NULL))`，然后使用调用`rand()`来生成随机数。这种方法的问题是，如果我在同一秒内多次运行我的程序，生成的随机数将始终相同。有什么好的方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T03:46:47.007

在 POSIX 系统上，用于`clock_gettime`获取当前时间（以纳秒为单位）。如果你不需要很多位，你可以忘记 PRNG，直接使用时间的低位作为你的随机数。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T05:00:13.827

如果 *nix，你为什么不直接从 读取`/dev/random`？

您还可以从其他设备收集噪音，例如键盘、鼠标或 CPU 温度。

您可以使用加速度计并用它来收集海浪中的噪音。风也会产生噪音。

我相信 Glib 提供了一个函数，`g_random_int()`它以快速和可移植的方式产生均匀分布的随机数。

或者您可以只读取临时​​文件的`/tmp`数量并使用该数量来提供`srand()`函数`time.h`，或者读取`/tmp`.

`/usr/bin`您可以从或读取每个文件`/`并为`srand()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T02:59:57.337

```
int pid ; // get it as per your OS
timeval t;
gettimeofday(&t, NULL);
srand(t.tv_usec * t.tv_sec * pid); 
```

time 为您提供基于`second`. gettimeofday 基于`microseconds`. 因此，发生相同种子的可能性较小。另外，您还使用了进程 ID。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T02:51:26.777

除了使用时间之外，另一种为 rand 函数播种的常用方法是使用程序的进程 id，因为它保证是唯一的。

实际代码是平台相关的，但如果你在 Windows 上，我相信你可以使用 function `GetCurrentProcessId()`，如

```
srand(GetCurrentProcessId()); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-06T02:58:40.040

除了输入时间，您还可以添加 CPU 时间，我相信这可以通过 clock() 来完成。所以它看起来像这样`srand(time() + clock())`：

# c# - 子页面中的母版页标签可见性

> ID：15846435
> 
> 赞同：0
> 
> 时间：2013-04-06T02:42:29.397
> 
> 标签：c#, asp.net

我想让标签在母版页中定义的子页面中不可见。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:00:36.703

```
((Label)Master.FindControl("mylbl")).Visible = false; 
```

把这个放在子页面的页面加载中，`mylbl`指的是标签的ID

可能是`Master.Page.FindControl ....`现在我想起来了，已经有一段时间了，但你就是这样做的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:07:13.183

你应该使用javascript。通常在这种情况下，您会使用（假设您的标签的 ID 是 my_label_id）引用您的标签

```
document.GetElementById('<%= my_label_id.ClientId %>') 
```

. . . 或者如果您使用的是 jquery 。. .

```
$('#<%= my_label_id.ClientId %>') 
```

但是，AFAIK 您不能使用 clientid 从内容页面引用位于母版页上的服务器端控件。因此，我要么使用 asp.net 标签属性为控件提供唯一的类名，要么`CssClass="myLabelClass"`通过构建页面、查看源代码并查找客户端 ID 来检索客户端 ID。可以在此处找到此步骤： [如何在内容页面中使用 javascript，asp.net](https://stackoverflow.com/questions/14056777/how-to-use-javascript-in-content-page-asp-net/14057093#14057093)

正确引用该项目后，只需将“显示”样式属性更改为“无”，如下所示。使用 jQuery 并假设您的 CssClass 名称是*myLabelClass*：

```
$('.myLabelClass').css('display','none'); 
```

如果您希望在页面加载时发生这种情况，您可以执行以下操作：

```
$(function(){
    $('.myLabelClass').css('display','none');
}); 
```

# java - Java - 如何“返回”类中的值

> ID：15846437
> 
> 赞同：2
> 
> 时间：2013-04-06T02:42:40.717
> 
> 标签：java, class, return

我正在尝试在类中分配一个值或返回一个值。像这样的东西：

```
void setOff() {

    boolean onValue = true;

    Thread t = new Thread(new myClass(onValue));

    System.out.println("On: " + onValue);

}

class myClass implements Runnable{

    public boolean on;

    public myClass (boolean _on) {

        on = _on

    }

    public run() {

        on = false;

    }

} 
```

这样的事情可能吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T02:45:03.707

这是可能的，但您需要稍微更改代码。检查以下类：

*   **[`Callable<V>`](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/Callable.html)**
*   **[`FutureTask<V>`](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/FutureTask.html)**

第一个类似于 a `Runnable`，但您需要实现的方法定义为`V call() throws Exception`，而不是`void run()`: 它允许您返回一个值。

第二个包装 a `Callable<V>`（或 a`Runnable`加上一个常量返回值），并且是 a`Runnable`本身，因此您可以将它传递给 a`Thread`就像您对`Runnable`.

因此，您可以将代码更改为以下内容：

```
void setOff() {
  final FutureTask<Boolean> ft = new FutureTask<Boolean>(new myClass());
  new Thread(ft).start();
  try {
    System.out.println("The result is: " + ft.get());
  } catch (ExecutionException e) {
    System.err.println("A method executed on the background thread has thrown an exception");
    e.getCause().printStackTrack();
  }
}

class myClass implements Callable<Boolean> {
  @Override public Boolean call() throws Exception {
    // let's fake some long running computation:
    Thread.sleep(1000);
    return true;
  }
} 
```

调用`ft.get()`只会在`call()`方法完成执行后（在后台线程上）返回，因此您必须等待 1 秒才能将该行打印到控制台。

上还有许多其他有用的方法`FutureTask`。检查[文档](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/FutureTask.html)。

您可能会发现其他一些有用的类：**[`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/ExecutorService.html)**及其实现，以及**[`Executors`](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/Executors.html)**. 它有一个被调用的方法，该方法`submit`接受 a`Runnable`或 a `Callable<V>`，并返回一个`Future<?>`or `Future<V>`，这是由 实现的接口之一`FutureTask`。你会得到类似的行为。例如：

```
public static void main() {
  final ExecutorService es = Executors.newCachedThreadPool();
  final Future<Boolean> f = es.submit(new myClass());
  try {
    System.out.println("The result is: " + f.get());
  } catch (ExecutionException e) {
    System.err.println("A method executed on the background thread has thrown an exception");
    e.getCause().printStackTrack();
  }
  es.shutdown();
} 
```

这样做的好处是[`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/concurrent/ExecutorService.html)将为您管理线程。它可能会创建一些线程并将它们重用于您提交的 Callables 和 Runnables：如果您有许多此类作业，这可能会提高性能，因为您将避免为每个作业创建一个线程——线程创建有一些开销！

**编辑**：该`.get()`方法抛出一个`ExecutionException`，它包装了一个在方法执行期间可能抛出的异常`.call()`。要检查异常，`catch`请`ExecutionException`调用`.getCause()`它。我刚刚添加了缺少的 try/catch 块。

# php - 如何知道是否向受保护的 url 发出了请求

> ID：15846438
> 
> 赞同：0
> 
> 时间：2013-04-06T02:42:46.577
> 
> 标签：php, symfony

我有一个 onKernelResponse 监听器。在我的代码中，我想知道用户是否请求防火墙 URL。我想设置我的 var $isRequestToAProtectedUrl

```
...
if( $isAjaxRequest && !$isAuthenticated && $isRequestToAProtectedUrl){  
   $this->container->get("session")->invalidate();
   header('NOT_AUTHORIZED: 499'); //modifiy  header(must be catch in client)
   exit();
}
... 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:01:38.093

Symfony2 Security 为您解决身份验证和授权问题。看来您需要创建自定义 AccessDeniedHandler。这里有一个很好的例子：
[Using Symfony2's AccessDeniedHandlerInterface](https://stackoverflow.com/questions/9166930/using-symfony2s-accessdeniedhandlerinterface#9182954)

# ios - 常量的获取器和设置器？

> ID：15846442
> 
> 赞同：1
> 
> 时间：2013-04-06T02:44:00.150
> 
> 标签：ios, objective-c, singleton, constants, getter

是否可以为常量创建 getter 和 setter？我想直接引用一个常量，如果它的值为 nil，则让它实例化自己。像这样声明的常量：

```
// Prefs.h
extern MyClass * const kThing;

// Prefs.m
MyClass * const kThing = nil; 
```

getter/setter 看起来像：

```
// getter
+ (MyClass *)kThing
{
    _kThing = _kThing ? : [MyClass new];
    return _kThing;
}

// setter
+ (void)setKThing:(MyClass *)myClass
{
    _kThing = myClass
} 
```

然后我可以像这样使用它：

```
[kThing doSomething]; 
```

这可能吗？

**编辑**将方法编辑为类方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:52:11.020

您描述的不是常量，它们是全局变量。您不能为它们定义 getter 和 setter，但您可以使用它们的值来支持类方法，这正是您所做的。

但是，当您发送这样的消息时

```
[kThing doSomething]; 
```

直接使用全局变量，绕过你的getter。如果你想通过一个吸气剂，你可以写

```
[[MyClass kThing] doSomething]; 
```

`MyClass`或者你可以写的内部方法

```
[[[self class] kThing] doSomething]; 
```

另一个注意事项是，当您实现这样的访问器方法时，您应该使支持变量静态，而不是`extern`. 这将确保其他模块无法绕过您的 getter 访问这些变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:50:56.970

在其他文件中声明全局变量在 Objective C 中是非常危险的。理想情况下，我们使用 sharedInstance。试试这样：

在 MyGame.h 中

```
@interface MyGame : NSObject
{
   int mScore;
}
@property(nonatomic,assign) int score;
+(MyGame*)sharedObject;
-(void)someFunction;
@end 
```

在 MyGame.m

```
static MyGame *gGame = nil;

@implementation MyGame

@synthesize  score = mScore;

+(MyGame*)sharedObject
{
   if(!gGame)
   {
       gGame = [[MyGame alloc] init];
   }
   return gGame;
}

-(void)someFunction
{

}
@end 
```

要访问项目中的任何位置：

```
 #import "MyGame.h"

     [MyGame sharedObject].score;
     [MyGame sharedObject] someFunction]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T02:56:11.037

简短的回答是这是不可能的。

```
MyClass * const kThing = nil; 
```

表示that`kThing`是一个常量指针，表示它指向的内存地址不能改变。因此，一旦设置为`nil`，以后就不能将其设置为新对象。

# css - 我可以在父 div 悬停时更改嵌套图像的背景颜色吗？

> ID：15846456
> 
> 赞同：1
> 
> 时间：2013-04-06T02:46:01.037
> 
> 标签：css, html, web, background-color

这是我在这个网站上的第一个问题，希望有人能帮助我。

我有一个父 div，它是指向另一个页面的链接。此 div 中有一个 .png 图像，当我将鼠标悬停在父 div 上时，我希望此 png 图像的背景颜色发生变化**，而不仅仅是图像本身。**

我只想在 HTML 和 CSS 中执行此操作

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:54:51.743

我认为您正在寻找类似的东西，但是 .png 需要透明才能显示不同的背景颜色

CSS：

```
#parent{
    height: 400px;
    width: 400px;
    background-color: green;
}
img{
    height:100px;
    width:100px;
}
#parent:hover img{
    background-color:white;
} 
```

HTML

```
<div id="parent">
    <img src="something.png" alt="1" />
</div> 
```

[jsFiddle 示例](http://jsfiddle.net/Class/gWg3Y/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:53:07.143

无法使用 html css 更改 img 背景，如果要从其父级继承的 img 背景，则使用透明背景。欢迎来到！

# java - 井字游戏项目图像图标？

> ID：15846458
> 
> 赞同：0
> 
> 时间：2013-04-06T02:46:06.817
> 
> 标签：java, swing, jbutton, imageicon

我正在制作一个井字游戏项目，我正在使用 9 个按钮和图像（Circle.jpg、Cross.jpg）。首先，我想向你们澄清一件事，所以首先我用字母（“X”），（“O”）制作了这个游戏，现在我在这个游戏中使用了图像，它也是电脑对玩家的游戏运行，当我点击按钮时，它显示我在那个按钮上交叉，没错，计算机会自动将圆圈放入另一个按钮！

问题是当我单击`Next`按钮时，它会显示一个十字，这是正确的。但是电脑不放圈来挡住我的行。

```
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import javax.swing.*;

public class TicTacToe implements ActionListener {
/*Instance Variables*/
static int[][] winCombinations = new int[][] {
        {1, 2, 3}, {4, 5, 6}, {7, 8, 9}, //horizontal wins
        {1, 4, 7}, {2, 5, 8}, {3, 6, 9}, //vertical wins
        {1, 5, 9}, {3, 5, 7}             //diagonal wins
    };
static JFrame window = new JFrame("Tic-Tac-Toe");
static JButton buttons[] = new JButton[10];
static int count = 0;
static  Icon letter;
static boolean win = false;
static  Icon myImage = new ImageIcon("Cross.jpg"); // 
static  Icon Image = new ImageIcon("Circle.jpg");

static String  AA;
public TicTacToe(){
/*Create Window*/
window.setPreferredSize(new Dimension(300,300));
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
window.setLayout(new GridLayout(3,3));

/*Add Buttons To The Window*/
for(int i = 1; i<=9; i++)
{
    buttons[i] = new JButton();
    window.add(buttons[i]);
    buttons[i].setPreferredSize(new Dimension(myImage.getIconWidth(), myImage.getIconHeight()));
    buttons[i].addActionListener(this);
}

/*Make The Window Visible*/
window.setVisible(true);
window.pack();
}

public void actionPerformed(ActionEvent a) 
{
    /*Write the letter to the button and deactivate it*/
    for(int i = 1; i<= 9; i++){

        if(a.getSource() == buttons[i]){
            buttons[i].setIcon(myImage);
            buttons[i].setEnabled(false);
        }
    }

    count++;        
    AI();

}

public void AI(){
    count++;
    if(buttons[1].getText().equals(Image) && buttons[2].getText().equals(Image) && buttons[3].getText().equals("")){
        buttons[3].setIcon(Image);
        buttons[3].setEnabled(false);
    } else if(buttons[4].getText().equals(Image) && buttons[5].getText().equals(Image) && buttons[6].getText().equals("")){
        buttons[6].setIcon(Image);
        buttons[6].setEnabled(false);
    } else if(buttons[7].getText().equals(Image) && buttons[8].getText().equals(Image) && buttons[9].getText().equals("")){
        buttons[9].setIcon(Image);
        buttons[9].setEnabled(false);                
    } 

    else if(buttons[2].getText().equals(Image) && buttons[3].getText().equals(Image) && buttons[1].getText().equals("")){
        buttons[1].setIcon(Image);
        buttons[1].setEnabled(false);                
    } else if(buttons[5].getText().equals(Image) && buttons[6].getText().equals(Image) && buttons[4].getText().equals("")){
        buttons[4].setIcon(Image);
        buttons[4].setEnabled(false);                
    } else if(buttons[8].getText().equals(Image) && buttons[9].getText().equals(Image) && buttons[7].getText().equals("")){
        buttons[7].setIcon(Image);
        buttons[7].setEnabled(false);                
    }

    else if(buttons[1].getText().equals(Image) && buttons[3].getText().equals(Image) && buttons[2].getText().equals("")){
        buttons[2].setIcon(Image);
        buttons[2].setEnabled(false);                
    } else if(buttons[4].getText().equals(Image) && buttons[6].getText().equals(Image) && buttons[5].getText().equals("")){
        buttons[5].setIcon(Image);
        buttons[5].setEnabled(false);                
    } else if(buttons[7].getText().equals(Image) && buttons[9].getText().equals(Image) && buttons[8].getText().equals("")){
        buttons[8].setIcon(Image);
        buttons[8].setEnabled(false);                
    }

    else if(buttons[1].getText().equals(Image) && buttons[4].getText().equals(Image) && buttons[7].getText().equals("")){
        buttons[7].setIcon(Image);
        buttons[7].setEnabled(false);                
    } else if(buttons[2].getText().equals(Image) && buttons[5].getText().equals(Image) && buttons[8].getText().equals("")){
        buttons[4].setIcon(Image);
        buttons[4].setEnabled(false);                
    } else if(buttons[3].getText().equals(Image) && buttons[6].getText().equals(Image) && buttons[9].getText().equals("")){
        buttons[9].setIcon(Image);
        buttons[9].setEnabled(false);                
    }

    else if(buttons[4].getText().equals(Image) && buttons[7].getText().equals(Image) && buttons[1].getText().equals("")){
        buttons[1].setIcon(Image);
        buttons[1].setEnabled(false);                
    } else if(buttons[5].getText().equals(Image) && buttons[8].getText().equals(Image) && buttons[2].getText().equals("")){
        buttons[2].setIcon(Image);
        buttons[2].setEnabled(false);                
    } else if(buttons[6].getText().equals(Image) && buttons[9].getText().equals(Image) && buttons[3].getText().equals("")){
        buttons[3].setIcon(Image);
        buttons[3].setEnabled(false);                
    }

    else if(buttons[1].getText().equals(Image) && buttons[7].getText().equals(Image) && buttons[4].getText().equals("")){
        buttons[4].setIcon(Image);
        buttons[4].setEnabled(false);                
    } else if(buttons[2].getText().equals(Image) && buttons[8].getText().equals(Image) && buttons[5].getText().equals("")){
        buttons[5].setIcon(Image);
        buttons[5].setEnabled(false);                
    } else if(buttons[3].getText().equals(Image) && buttons[9].getText().equals(Image) && buttons[6].getText().equals("")){
        buttons[6].setIcon(Image);
        buttons[6].setEnabled(false);                
    }

    else if(buttons[1].getText().equals(Image)&& buttons[5].getText().equals(Image)&& buttons[9].getText().equals("")){
        buttons[9].setIcon(Image);
        buttons[9].setEnabled(false);                
    } else if(buttons[5].getText().equals(Image)&& buttons[9].getText().equals(Image)&& buttons[1].getText().equals("")){
        buttons[1].setIcon(Image);
        buttons[1].setEnabled(false);                
    } else if(buttons[1].getText().equals(Image)&& buttons[9].getText().equals(Image)&& buttons[5].getText().equals("")){
        buttons[5].setIcon(Image);
        buttons[5].setEnabled(false);                
    }

    else if(buttons[3].getText().equals(Image)&& buttons[5].getText().equals(Image)&& buttons[7].getText().equals("")){
        buttons[7].setIcon(Image);
        buttons[7].setEnabled(false);                
    } else if(buttons[7].getText().equals(Image)&& buttons[5].getText().equals(Image)&& buttons[3].getText().equals("")){
        buttons[3].setIcon(Image);
        buttons[3].setEnabled(false);                
    } else if(buttons[7].getText().equals(Image)&& buttons[3].getText().equals(Image)&& buttons[5].getText().equals("")){
        buttons[5].setIcon(Image);
        buttons[5].setEnabled(false);                
    }

    else if(buttons[1].getText().equals(myImage) && buttons[2].getText().equals(myImage) && buttons[3].getText().equals("")){
        buttons[3].setIcon(Image);
        buttons[3].setEnabled(false);
    } else if(buttons[4].getText().equals(myImage) && buttons[5].getText().equals(myImage) && buttons[6].getText().equals("")){
        buttons[6].setIcon(Image);
        buttons[6].setEnabled(false);                
    } else if(buttons[7].getText().equals(myImage) && buttons[8].getText().equals(myImage) && buttons[9].getText().equals("")){
        buttons[9].setIcon(Image);
        buttons[9].setEnabled(false);                
    } 

    else if(buttons[2].getText().equals(myImage) && buttons[3].getText().equals(myImage) && buttons[1].getText().equals("")){
        buttons[1].setIcon(Image);
        buttons[1].setEnabled(false);                
    } else if(buttons[5].getText().equals(myImage) && buttons[6].getText().equals(myImage) && buttons[4].getText().equals("")){
        buttons[4].setIcon(Image);
        buttons[4].setEnabled(false);                
    } else if(buttons[8].getText().equals(myImage) && buttons[9].getText().equals(myImage) && buttons[7].getText().equals("")){
        buttons[7].setIcon(Image);
        buttons[7].setEnabled(false);                
    }

    else if(buttons[1].getText().equals(myImage) && buttons[3].getText().equals(myImage) && buttons[2].getText().equals("")){
        buttons[2].setIcon(Image);
        buttons[2].setEnabled(false);                
    } else if(buttons[4].getText().equals(myImage) && buttons[6].getText().equals(myImage) && buttons[5].getText().equals("")){
        buttons[5].setIcon(Image);
        buttons[5].setEnabled(false);                
    } else if(buttons[7].getText().equals(myImage) && buttons[9].getText().equals(myImage) && buttons[8].getText().equals("")){
        buttons[8].setIcon(Image);
        buttons[8].setEnabled(false);                
    }

    else if(buttons[1].getText().equals(myImage) && buttons[4].getText().equals(myImage) && buttons[7].getText().equals("")){
        buttons[7].setIcon(Image);
        buttons[7].setEnabled(false);                
    } else if(buttons[2].getText().equals(myImage) && buttons[5].getText().equals(myImage) && buttons[8].getText().equals("")){
        buttons[8].setIcon(Image);
        buttons[8].setEnabled(false);                
    } else if(buttons[3].getText().equals(myImage) && buttons[6].getText().equals(myImage) && buttons[9].getText().equals("")){
        buttons[9].setIcon(Image);
        buttons[9].setEnabled(false);                
    }

    else if(buttons[4].getText().equals(myImage) && buttons[7].getText().equals(myImage) && buttons[1].getText().equals("")){
        buttons[1].setIcon(Image);
        buttons[1].setEnabled(false);                
    } else if(buttons[5].getText().equals(myImage) && buttons[8].getText().equals(myImage) && buttons[2].getText().equals("")){
        buttons[2].setIcon(Image);
        buttons[2].setEnabled(false);                
    } else if(buttons[6].getText().equals(myImage) && buttons[9].getText().equals(myImage) && buttons[3].getText().equals("")){
        buttons[3].setIcon(Image);
        buttons[3].setEnabled(false);                
    }

    else if(buttons[1].getText().equals(myImage) && buttons[7].getText().equals(myImage) && buttons[4].getText().equals("")){
        buttons[4].setIcon(Image);
        buttons[4].setEnabled(false);                
    } else if(buttons[2].getText().equals(myImage) && buttons[8].getText().equals(myImage) && buttons[5].getText().equals("")){
        buttons[5].setIcon(Image);
        buttons[5].setEnabled(false);                
    } else if(buttons[3].getText().equals(myImage) && buttons[9].getText().equals(myImage) && buttons[6].getText().equals("")){
        buttons[6].setIcon(Image);
        buttons[6].setEnabled(false);                
    }

    else if(buttons[1].getText().equals(myImage) && buttons[5].getText().equals(myImage) && buttons[9].getText().equals("")){
        buttons[9].setIcon(Image);
        buttons[9].setEnabled(false);                
    } else if(buttons[5].getText().equals(myImage) && buttons[9].getText().equals(myImage) && buttons[1].getText().equals("")){
        buttons[1].setIcon(Image);
        buttons[1].setEnabled(false);                
    } else if(buttons[1].getText().equals(myImage) && buttons[9].getText().equals(myImage) && buttons[5].getText().equals("")){
        buttons[5].setIcon(Image);
        buttons[5].setEnabled(false);                
    }

    else if(buttons[3].getText().equals(myImage) && buttons[5].getText().equals(myImage) && buttons[7].getText().equals("")){
        buttons[7].setIcon(Image);
        buttons[7].setEnabled(false);                
    } else if(buttons[7].getText().equals(myImage) && buttons[5].getText().equals(myImage) && buttons[3].getText().equals("")){
        buttons[3].setIcon(Image);
        buttons[3].setEnabled(false);                
    } else if(buttons[7].getText().equals(myImage) && buttons[3].getText().equals(myImage) && buttons[5].getText().equals("")){
        buttons[5].setIcon(Image);
        buttons[5].setEnabled(false);                
    }

    else if(buttons[1].getText().equals(myImage) && buttons[5].getText().equals(Image) && buttons[9].getText().equals(myImage)) {
        buttons[6].setIcon(Image);
        buttons[6].setEnabled(false);            
    }    

    else if(buttons[3].getText().equals(myImage) && buttons[5].getText().equals(Image) && buttons[7].getText().equals(myImage)) {
        buttons[4].setIcon(Image);
        buttons[4].setEnabled(false);            
    }

    else if(buttons[5].getText().equals("")){
        buttons[5].setIcon(Image);
        buttons[5].setEnabled(false);                
    }

    else if(buttons[1].getText().equals("")){
        buttons[1].setIcon(Image);
        buttons[1].setEnabled(false);                
    }
    else {
        if(count >= 9)
            checkWin();
        else
            RandomMove();
    }

    checkWin();

}

public void RandomMove(){
    Random x = new Random();
    int y = 1 + x.nextInt(9);
    if(buttons[y].getText().equals(Image) || buttons[y].getText().equals(myImage) ){
        RandomMove();
    } else {
        buttons[y].setIcon(Image);
        buttons[y].setEnabled(false);
    }
}

public void checkWin(){ 

    /*Determine who won*/
    for(int i=0; i<=7; i++){
        if( buttons[winCombinations[i][0]].getText().equals(buttons[winCombinations[i][5]].getText()) && 
            buttons[winCombinations[i][6]].getText().equals(buttons[winCombinations[i][7]].getText()) && 
            !buttons[winCombinations[i][0]].getText().equals("")) {
            win = true;
        }
    }

    if(count % 2 == 0)
        letter = Image;
    else
        letter = myImage;

    /*Show a dialog when game is over*/
    if(win == true){
        JOptionPane.showMessageDialog(null, letter + " wins!");
        System.exit(0);
    } else if(count >= 9 && win == false){
        JOptionPane.showMessageDialog(null, "The game was tie!");
        System.exit(0);
    }
}
public static void main(String[] args)
{
    new TicTacToe();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:57:16.640

这对我来说看起来不对

```
 buttons[1].getText().equals(Image) 
```

您正在将文本与图像进行比较，我怀疑这可能是真的。

应该是

```
 buttons[1].getIcon() == Image 
```

仅当您加载 Image 一次并在比较对象引用时在任何地方使用它时才有效。

# c# - C++ 的 C# TPL 数据流是否有替代方案？

> ID：15846462
> 
> 赞同：1
> 
> 时间：2013-04-06T02:46:36.123
> 
> 标签：c#, c++, task-parallel-library, dataflow, tpl-dataflow

我最近发布了一个关于[使用委托来模拟连接对象](https://stackoverflow.com/questions/15787263/using-delegates-to-simulate-connected-objects/15787322?noredirect=1#comment22498148_15787322)的问题，其中我收到了关于使用 TPL DataFlow 库非常容易和干净地为我的应用程序开发解决方案的一个很好的答案。

问题是我被困在 .NET 3.5 或 C# 下。我想我可能已经能够升级到 .NET 4.5，但在这个阶段我还不能。据我所知，我无法将 Dataflow 库重新定位到 .NET 3.5，所以我的下一个解决方案是寻找与 TPL Dataflow 类似的 C++ 替代方案——这不是最好的方案，但我可以编译将 C++ 代码转换为 DLL 并将其导入我们的 C# 应用程序。

总结一下我对这个问题的 C++ 库的要求：

*   我需要能够将复杂网络中的节点连接在一起，并在它们之间传递资源单元。随着时间的推移，其中一些将产生有限数量的资源。其他人会以特定的速度消耗它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:49:10.407

您可以考虑使用[mono 的 TPL Dataflow 版本](https://github.com/mono/mono/tree/master/mcs/class/System.Threading.Tasks.Dataflow)并自己为 .Net 3.5 编译它。

我认为您在尝试编译该代码时会遇到的最大问题是它严重依赖于 TPL，而 TPL 通常不适用于 .Net 3.5。但[似乎在旧版本的 Rx 中有一个向后移植的版本](https://stackoverflow.com/q/2987439/41071)，所以使用它可以工作。

（另外，单声道版本的 TDF 的一部分是我写的，我几乎没有收到任何关于它的反馈，所以可以肯定那里有错误。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-03T09:39:31.900

幸运的是，似乎有人正在创建 C# TPL 数据流的 C++ 等效项： [https ://github.com/renestein/Rstein.AsyncCpp#Flat-Dataflow](https://github.com/renestein/Rstein.AsyncCpp#Flat-Dataflow)

片段：

```
 auto transform1 = DataFlowAsyncFactory::CreateTransformBlock<int, string>([](const int& item)-> Tasks::Task<string>
                                                      {
                                                        auto message = "int: " + to_string(item) + "\n";
                                                        cout << message;
                                                        //await async operation returning standard shared_future.
                                                        co_await GetCompletedSharedFuture();
                                                        co_return to_string(item);
                                                      }); 
```

# c++ - 类 2D 向量问题

> ID：15846465
> 
> 赞同：0
> 
> 时间：2013-04-06T02:46:48.580
> 
> 标签：c++

好的。我有一个类 Sphere。我正在尝试使用给定数量的细分初始化 UVSphere 的坐标。该类有一个 2D 向量 verts，如下所示：

```
std::vector<std::vector<Angel::vec3>> verts; 
```

其中 vec3 本质上是三个浮点数的结构

我有两个功能

```
void setupSphere();
void setupRaw(); 
```

谁的实现看起来像这样：

```
void Sphere::setupSphere()
{
float pi = std::atan(1.0f) * 4.0f;
float subdivAngle = 2 * pi / numSubdivide;

std::vector<Angel::vec3> yVectors;
yVectors.reserve(numSubdivide);
for (int i = 0; i < numSubdivide; i ++)
{
    float curAngle = subdivAngle * i;
    yVectors.push_back(Angel::vec3(std::cos(curAngle), 0.0, -std::sin(curAngle)));
}

int zNumSubdivide = numSubdivide + 4;
float zAngle = 2 * pi / zNumSubdivide;

for (int i = 1; i < zNumSubdivide / 2; i ++)
{
    float curAngle = pi / 2 - zAngle * i;
    float yCoord = std::sin(curAngle);
    float xzScale = std::cos(curAngle);
    std::vector<Angel::vec3> curVector;

    for (int j = 0; j < numSubdivide; j ++)
    {
        Angel::vec3 newPoint = yVectors[j] * xzScale;
        newPoint.y = yCoord;
        curVector.push_back(newPoint);
    }
    verts.push_back(curVector);
}

std::cout << "Size = " << verts.size() << std::endl;
setupRaw();
//setupTexture();
}

void Sphere::setupRaw()
{
std::cout << "TESTING" << std::endl;
std::cout << "Size = " << verts.size();
} 
```

当我在 setupSphere() 末尾查看 verts 的内容时，它看起来很棒，但是在 setupRaw() 中，当我尝试打印 verts 的大小时它崩溃了。这里发生了什么？

# java - 如何以某种格式将许多组件添加到 JFrame

> ID：15846466
> 
> 赞同：0
> 
> 时间：2013-04-06T02:46:48.900
> 
> 标签：java, swing, layout

我有一个 JPanel、4 个组合框和一个按钮。我想要一个 700 x 500 JFrame，面板占据左侧 500 x 500。我想要的右侧是垂直的 2 个组合框，另外 2 个组合框，然后是按钮。希望这是有道理的：我只想让它们全部可见，并且我希望这些框以 2 个为一组配对。我尝试过的示例代码如下：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.FlowLayout;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.JComboBox;
import javax.swing.JButton;

public class Test extends JFrame{

public Test () {
    super();
    //setLayout(new FlowLayout());
    JPanel canvas = new JPanel();
    canvas.setBackground(Color.red);
    canvas.setSize(500, 500);
    JComboBox field1 = new JComboBox();
    JComboBox field2 = new JComboBox();
    JComboBox field3 = new JComboBox();
    JComboBox field4 = new JComboBox();      
    JButton button = new JButton();
    JPanel info = new JPanel();
    info.setBackground(Color.blue);
    info.add(field1, BorderLayout.NORTH);
    info.add(field2, BorderLayout.EAST);
    info.add(field3, BorderLayout.CENTER);
    info.add(field4, BorderLayout.WEST);
    info.add(button, BorderLayout.SOUTH);
    add(info, BorderLayout.EAST);
    add(canvas, BorderLayout.WEST);
    setTitle("TEST");
setSize(700, 500);
}

public static void main (String[] args) {
    JFrame testFrame = new Test();
    testFrame.setVisible(true);
}

} 
```

关于如何进行布局的任何帮助或建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:59:58.887

如果您希望组合按钮和按钮垂直堆叠在一起，我会使用网格布局而不是边框​​布局。只需使边框布局有 1 列和 5 行。

# mysql - 这个系统最有效的架构是什么？（推或拉）

> ID：15846472
> 
> 赞同：2
> 
> 时间：2013-04-06T02:47:43.060
> 
> 标签：mysql, delphi, tcp, client-server, design-patterns

所有 s/w 都是基于 Windows 的，用 Delphi 编码。

有些人提交了一些数据，我通过 TCP 将这些数据发送到运行 MySql 的数据库服务器。

其他一些人将通过/失败添加到他们的数据并更新数据库。

第三组只是在看报告。

现在，第一组可以看到他们提交的内容的历史记录。当第二组添加通过/失败时，我想更新他们的历史记录。我的选择似乎是

1.  定期盲目地刷新历史记录（在 Delphi 中，我显示在数据库网格上，所以我会关闭然后打开查询），但这似乎效率低下。
2.  定期询问数据库服务器在过去 X 分钟内是否有任何变化。
3.  永远不要轮询数据库服务器，而是让它在发生变化时通知用户的应用程序。

1 似乎效率低下。2似乎更好。3 减少了 TCP 流量，但这并不多。反正每2只占几个字节。不过，它的缺点是现在双方都是TCP客户端和服务器。

同样，如果第三组的成员正在查看报告，并且前两组中的任何一个的成员更新数据，我希望在报告中反映这一点。最好的方法是什么？

我想有两点需要考虑。最重要的是，减少网络流量，更重要的是，让我的代码更简单。

我确信这是一个非常常见的模式，但我对这种事情很陌生，所以欢迎提出建议。提前致谢。

* * *

[更新] 关闭选民，我用谷歌搜索并找不到答案。我希望对您的经验有所帮助。你能帮我改写这个可以接受吗？或者也许给一个对我有帮助的UTL？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T08:16:15.890

简短回答：使用通知（选项 3）。

长答案：这是一些中间层的用例，它使用面向消息的中间件传播更改。这将消息传递逻辑与数据库元数据（触发器/存储过程）分离，可以使用点对点和发布/订阅通信模式等等。

我在博客上写了一篇关于这个的两部分文章

*   [Firebird 数据库事件和面向消息的中间件（第 1 部分）](http://mikejustin.wordpress.com/2012/11/06/firebird-database-events-and-message-oriented-middleware/)
*   [Firebird 数据库事件和面向消息的中间件（第 2 部分）](http://mikejustin.wordpress.com/2012/11/08/firebird-database-events-and-message-oriented-middleware-part-2/)

这篇文章是关于 Firebird，但建议的解决方案可以应用于任何应用程序/数据库。

在您的场景中，即使数据库或 Delphi 部分已关闭，客户端也可以使用中间件消息代理向系统发送消息。消息将在代理中排队，直到系统的其他部分重新联机。如果有许多客户端并且需要更新安装或维护窗口，这是一个优势。

> 同样，如果第三组的成员正在查看报告，并且前两组中的任何一个的成员更新数据，我希望在报告中反映这一点。最好的方法是什么？

如果这是一个真正的需求（报告通常是数据的不可变“快照”，但也许您的意思是在被监视时需要更新的视图，类似于股票行情）但它很容易实现 - 客户只需要“订阅”发布相关数据更改的信息频道。这可以通过消息选择器和目标通配符等现有消息代理功能非常灵活且节省资源地解决。（请注意，我是一些用于开源消息代理的 Delphi 和 Free Pascal 客户端库的作者。）

* * *

相关问题：

*   [客户端-服务器数据库应用程序：如何通知客户端数据已更改？](https://stackoverflow.com/questions/10638164/client-server-database-application-how-to-notify-clients-that-data-was-changed)
*   [如何在这个系统内进行通信？](https://stackoverflow.com/questions/5589849/how-to-communciate-within-this-system)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-01T03:01:24.150

您提出的每个解决方案在某些情况下都是可行的。

我已经编写软件很长时间了，下面的评论与可追溯到 1981 年的个人经历有关。我毫不怀疑其他人会有不同的意见，这些意见也会回答你的问题。

请允许我证明每种方法的正反两面，以及每条评论的参数。

> *“定期盲目地刷新历史记录（在 Delphi 中，我显示在数据库网格上，所以我会关闭然后打开查询），但这似乎效率低下。”*

*   是的，这是低效的
*   通常是最快和最简单的事情。
*   似乎是最好的短期临时解决方案，以最小的努力获得最大的价值。
    *   适合“探索性编码”，有助于获得更好的软件设计。
    *   应该是完善/探索替代方案的良好基础。
    *   对于程序员来说，在签入导致技术债务的修复程序后，努力记录和/或与可能受到您的更改影响的团队成员共享非常重要。
    *   如果不打算作为生产质量代码，这是可以接受的。
    *   如果可用性很差，请考虑更有效的解决方案，就像您在下面描述的那样。

> *“定期询问数据库服务器在过去 X 分钟内是否有任何变化。”*

*   您正在谈论“拉动”或“轮询”模型。考虑此模型的以下 API 选项：
    *   自从我上次打电话给你之后发生了什么变化？（客户端提供时间以避免服务必须存储和检索视觉状态）
    *   如果没有任何变化，服务器可以提供客户端再次轮询的时间。负载过大的系统可以回退客户端，即如果服务器应用程序知道这种情况，那么它可以更好地控制兼容客户端的轮询率，通过指示它们等待更长的时间在重试之前。
    *   考虑到这一点后，问“API 是否尽可能简单？”

> “*永远不要轮询数据库服务器，而是让它在发生变化时通知用户的应用程序。”*

*   这就是您所说的“推送”模型——发布更改，准备好让订阅者采取行动。
    *   考虑这对等待推送的客户端有什么影响 - 超时场景、客户端数量等、系统资源消耗等。
    *   考虑到“推动者”必须意识到所有正在使用的应用程序。如果使用行业标准的消息队列系统（RabbitMQ、MS MQ、MQ Series 等，所有自然支持发布/订阅 JMS 主题或等效主题，那么这个问题就被抽象出来了，但也给您的应用程序增加了一些复杂性）
    *   考虑客户端突然变得不可用的场景，假设故障模式并测试系统的稳健性，以便您确信它能够从故障中正确恢复并始终保持稳定。

那么，您认为现在正确的方法是什么？

# android - 有没有办法在发送消息之前在android中获取短信详细信息？

> ID：15846475
> 
> 赞同：0
> 
> 时间：2013-04-06T02:48:04.263
> 
> 标签：android, sms

所以基本上我希望在消息正式发送之前获取短信中的字符串......有没有办法做到这一点......所以例如我正在给我妈妈发短信并说“嗨”有没有办法拉那个“嗨”自动将其发送到程序然后发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:20:16.260

Sorry there is no way to do so before sending SMS through native SMS composer, yes you can get SMS details but only after sending it.

Once you send SMS, system will be notified by using Broadcast receiver.

Yes Its possible to get message details if you define your own SMS layout and then sending SMS through it other than opening native SMS composer.

# c# - 内容页面 RowCommand 上的 Gridview 不会触发 - ViewState？

> ID：15846476
> 
> 赞同：0
> 
> 时间：2013-04-06T02:48:15.233
> 
> 标签：c#, visual-studio-2012, .net-4.5

我遇到的问题是我的 GridView 的 RowCommand 不会触发。我已经阅读了数百万篇文章，结果我觉得我更加困惑。所以，如果你能看到我在这里做错了什么，请指出。

几周前我确实问过一个类似的问题，但我使用的是嵌套在数据列表中的网格视图并使用 EntityDataSource 的“包含”兄弟姐妹来显示兄弟姐妹，这是与推荐关系的多方面，这很好显示，但弄清楚编辑更新和删除是一场噩梦。所以我已经把它简化了，但现在我停在了我的轨道上，因为我在回发的某个地方失去了控制。

我有一个带有 ContentPlaceholder 的母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.Master.cs" Inherits="HomelessStudent.Web.SiteMasterPage" ViewStateMode="Inherit" EnableViewState="True" %> 
        <asp:ContentPlaceHolder ID="ContentPlaceHolderAgent" runat="server">
        </asp:ContentPlaceHolder> 
```

在代理页面上-

```
<asp:Content ID="Content" ContentPlaceHolderID="ContentPlaceHolderAgent" runat="server">
<asp:Panel ID="SiblingPanel" runat="server" ViewStateMode="Enabled" Visible="True">       
    <asp:GridView ID="SiblingGridView" runat="server" CssClass="grid"
        AutoGenerateColumns="false" 
        DataKeyNames="Id" 
        ShowFooter="true" 
        OnDataBound="SiblingGridView_DataBound" 
        OnRowEditing="SiblingGridView_RowEditing" 
        OnRowUpdating="SiblingGridView_RowUpdating" 
        OnRowCommand="SiblingGridView_RowCommand" 
        OnRowDeleting="SiblingGridView_RowDeleting" ViewStateMode="Enabled" ClientIDMode="Static">
        <Columns>
            <asp:TemplateField HeaderText="Name" SortExpression="SiblingName">
                <EditItemTemplate>
                    <asp:TextBox runat="server" Text='<%# Bind("SiblingName") %>' ID="TextBox1"></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label runat="server" Text='<%# Bind("SiblingName") %>' ID="Label1"></asp:Label>
                </ItemTemplate>
                <FooterTemplate>
                    <asp:TextBox runat="server" ID="NewSiblingName" ></asp:TextBox>
                </FooterTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Edit" ShowHeader="false">
                <EditItemTemplate>
                    <asp:LinkButton runat="server" Text="Update" CommandName="Update"  ID="UpdateLinkButton" ></asp:LinkButton>&nbsp;<asp:LinkButton runat="server" Text="Cancel" CommandName="Cancel" CausesValidation="False" ID="LinkButton2"></asp:LinkButton>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:LinkButton runat="server" Text="Edit" CommandName="Edit" ID="EditLinkButton" ClientIDMode="Static"></asp:LinkButton>
                </ItemTemplate>
                <FooterTemplate>
                    <asp:LinkButton runat="server" CommandName="AddNew" Text="Add" ID="AddNewLinkButton"></asp:LinkButton>                   </FooterTemplate>
            </asp:TemplateField>
            <asp:CommandField ShowDeleteButton="True" ShowHeader="True" HeaderText="Delete"></asp:CommandField>
        </Columns>
    </asp:GridView>
</asp:Panel> 
```

后面的代码（在此处绑定数据，因为仅显示属于特定记录的那些兄弟姐妹，该记录的 ID（Guid）在 queryString 中，也许......

```
 if (IsPostBack == false)
        {
            if (Request.QueryString["id"] == null)
            {
                if (Session["studentid"] == null)
                {
                    Response.Redirect("StudentPage.aspx");
                }
                else
                {
                    referral = GetMostRecentReferral((String)Session["studentid"]);
                    PopulateUI(referral);
                }

            }
            else
            {
                referral = GetThisReferral(Request.QueryString["id"]);
                PopulateUI(referral);
            }
        } 
```

然后，在 PopulateUI(referral)

```
some stuff...
FillSiblingGrid();
String studentId = ((referral.StudentID).ToString()).Trim();
getSelectedStudentDeatails(studentId);
Session["referralid"] = (Guid)referral.Id; 
```

并填充兄弟姐妹网格-

```
 private void FillSiblingGrid()
    {
        if (referral != null)
        {
            List<Sibling> siblings = new List<Sibling>();
            using (HomelessStudentDataEntities db = new HomelessStudentDataEntities())
            {
                siblings = (from s in db.Siblings
                            where s.ReferralID == referral.Id
                            select s).ToList();
            }
            if (siblings.Count > 0)
            {
                SiblingGridView.DataSource = siblings;
                SiblingGridView.DataBind();
            }
            else
            {
                int TotalColumns = SiblingGridView.Rows[0].Cells.Count;
                SiblingGridView.Rows[0].Cells.Clear();
                SiblingGridView.Rows[0].Cells.Add(new TableCell());
                SiblingGridView.Rows[0].Cells[0].ColumnSpan = TotalColumns;
                SiblingGridView.Rows[0].Cells[0].Text = "No siblings found";
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T20:32:59.980

我遇到了类似的问题。启用网格视图状态解决了问题

# java - javax.el.PropertyNotWritableException: /index.xhtml @29,118 value="": 集合操作的非法语法

> ID：15846478
> 
> 赞同：4
> 
> 时间：2013-04-06T02:48:17.167
> 
> 标签：java, jsf-2, properties, localization, resourcebundle

我想创建一个带有本地化选项的登录屏幕来翻译名称，当我从默认英语更改为阿拉伯语时它崩溃

这是 faces.config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
     <application>
           <locale-config>
                <default-locale>en</default-locale>
                <supported-locale>ar</supported-locale>
           </locale-config>
       <resource-bundle>
        <base-name>mypack.enar</base-name>
        <var>msg</var>
       </resource-bundle>
     </application>
</faces-config> 
```

托管豆

```
import java.io.Serializable;
import java.util.LinkedHashMap;
import java.util.Locale;
import java.util.Map;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ValueChangeEvent;

/**
 *
 * @author body
 */
@ManagedBean(name = "localize")
@RequestScoped
public class LocalizeMBean implements Serializable {

    /**
     * @return the countries
     */
    public static Map<String, Object> getCountries() {
        return countries;
    }

    /**
     * @param aCountries the countries to set
     */
    public static void setCountries(Map<String, Object> aCountries) {
        countries = aCountries;
    }

    private String localeCode;

    /**
     * Creates a new instance of LocalizeMBean
     */
    public void setLocaleCode(String localeCode) {
        this.localeCode = localeCode;
    }

    public Map<String, Object> getCountriesInMap() {
        return getCountries();
    }

    public String getLocaleCode() {
        return localeCode;
    }
    private static Map<String, Object> countries;

    static {
        setCountries(new LinkedHashMap<String, Object>());
        getCountries().put("English", Locale.ENGLISH); //label, value
        getCountries().put("Arabic", Locale.UNICODE_LOCALE_EXTENSION);
    }

    public void countryLocaleCodeChanged(ValueChangeEvent e) {

        String newLocaleValue = e.getNewValue().toString();

        //loop country map to compare the locale code
        for (Map.Entry<String, Object> entry : getCountries().entrySet()) {

            if (entry.getValue().toString().equals(newLocaleValue)) {

                FacesContext.getCurrentInstance()
                        .getViewRoot().setLocale((Locale) entry.getValue());

            }
        }
    }
} 
```

JSF 页面

```
<h:head>
        <title>My Login Page</title>
        <h:outputStylesheet library="mycss" name="login-box.css"/>
    </h:head>
    <h:body>
        <h:form>
            <div style="padding: 100px 0 0 250px;">

                <div id="login-box">

                    <H2>Login</H2>
                    My Login Screen
                    <br />
                    <h:selectOneMenu value="#{localize.localeCode}" onchange="submit();"
                                     valueChangeListener="#{localize.countryLocaleCodeChanged}">
                        <f:selectItems value="#{localize.countriesInMap}" /> 
                    </h:selectOneMenu>
                    <br />
                    <div id="login-box-name" style="margin-top:20px;">
                        <h:outputLabel value="#{msg.namee}" />
                    </div>
                    <div id="login-box-field" style="margin-top:20px;">
                        <h:inputText  styleClass="form-login" title="Username" value="" size="30" maxlength="2048" />
                    </div>
                    <div id="login-box-name">Password:</div><div id="login-box-field"><h:inputSecret styleClass="form-login" title="Password" value="" size="30" maxlength="2048" /></div>
                    <br />
                    <div class="login-box-options"><h:selectBooleanCheckbox value="1"/>Remember me<h:commandLink style="margin-left:30px;" value="Forget Password"/></div>
                    <br />
                    <br />
                    <h:commandButton styleClass="button"/>
                </div>
            </div>
        </h:form>
    </h:body>
</html> 
```

我在组合框中更改时的异常

```
javax.faces.component.UpdateModelException: javax.el.PropertyNotWritableException: /index.xhtml @29,118 value="": Illegal Syntax for Set Operation
    at javax.faces.component.UIInput.updateModel(UIInput.java:853)
    at javax.faces.component.UIInput.processUpdates(UIInput.java:735)
    at javax.faces.component.UIForm.processUpdates(UIForm.java:281)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
    at javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1231)
    at com.sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:78)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.el.PropertyNotWritableException: /index.xhtml @29,118 value="": Illegal Syntax for Set Operation
    at com.sun.faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:136)
    at javax.faces.component.UIInput.updateModel(UIInput.java:818)
    ... 38 more 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T02:54:54.840

请仔细阅读异常信息。答案就在那里。

> javax.el.PropertyNotWritableException: /index.xhtml @29,118 value="": 集合操作的非法语法

在第 29 行，`/index.xhtml`你的字符 118 有一个`value=""`. 这不是 EL 值表达式的有效语法，它应该可以通过 setter 方法写入。

通常，您可以像这样指定 value 属性，`value="#{bean.property}"`其中 bean 有一个符合 javabeans 规范的方法`getProperty()`。`setProperty()`

很可能是这个：

```
<h:inputText  styleClass="form-login" title="Username" value="" size="30" maxlength="2048" /> 
```

我不确定你为什么指定这样的值。这是完全错误的。您应该完全删除它

```
<h:inputText  styleClass="form-login" title="Username" size="30" maxlength="2048" /> 
```

或将其绑定到有效的 bean 属性

```
<h:inputText  styleClass="form-login" title="Username" value="#{someBean.userName}" size="30" maxlength="2048" /> 
```

请注意，此问题与更改 JSF 语言环境**无关。**

* * *

**与具体问题无关**，嵌套表单在 HTML 中是[非法](http://validator.w3.org)的，因此在 JSF 中也是非法的。您应该将语言选择和用户登录拆分为 2 个单独的表单。您不想在更改语言时提交登录数据。此外，您可能会发现此答案中的提示有助于如何正确更改 JSF 语言环境：[JSF 中的本地化，如何记住每个会话而不是每个请求/视图选择的语言环境](https://stackoverflow.com/questions/4830588/jsf-locale-is-set-per-request-not-for-session/4830669#4830669)

# asp.net-mvc - Kendo UI Grid ASP.NET MVC Wrapper ParameterMap

> ID：15846479
> 
> 赞同：5
> 
> 时间：2013-04-06T02:48:23.520
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid

有没有办法通过服务器端 ASP.NET MVC 包装器为 Kendo UI Grid 定义 parameterMap 选项？

在向服务器发送过滤命令之前，我需要将本地时间更改为 UTC 时间，这似乎是唯一的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:41:10.760

有点...

您可以指定一个字符串作为`parameterMap`设置，该字符串可以是直接的 JavaScript 函数，也可以是在页面上找到的 JavaScript 函数的名称。

`.parameterMap("myParamMapFunction");`

或者

`.parameterMap("function(data){ /* do stuff with the data */}");`

# javascript - 当内容页面中不存在 asp.net 控件时，Masterpage javascript 会导致对象引用错误

> ID：15846484
> 
> 赞同：0
> 
> 时间：2013-04-06T02:48:55.060
> 
> 标签：javascript, jquery, asp.net, vb.net, visual-studio

所以这里是交易：我有一个位于某些内容页面而不是其他内容页面上的 asp.net 控件。我想在 $(document).click 事件中引用这个 asp.net 控件，其代码位于母版页中。下面的代码是我如何去做的；它在 ContentPlaceHolder“body”中搜索控件“dep_ddb”并检索其客户端 ID。

```
var dep_ddb = document.getElementById('<%= body.findcontrol("dep_ddb").ClientId %>');
var filterButton = document.getElementById('<%=body.findcontrol("filterButton").ClientId %>'); 
```

当我加载包含控件的页面时，这非常有用。不幸的是，当加载一个不使用控件但使用母版页的页面时，我在该 VB 代码上收到一个对象引用错误：<%= *blah blah* %>。

我尝试使用 javascript if 语句来检测内容页面是否不包含控件（只需使用标题来检查我们是否正在处理我知道不会包含此控件的内容页面）：

```
if (ttl.indexof('| Sign Up') == -1) {
    var dep_ddb = document.getElementById('<%= body.findcontrol("dep_ddb").ClientId %>');
    var filterButton = document.getElementById('<%=body.findcontrol("filterButton").ClientId %>');
}; 
```

. . . 但它仍然导致对象引用错误。我相信 ASP 正在尝试首先编译包含在 <% %> 标记中的代码，并且由于它不存在而返回错误。这意味着没有基于javascript的“if语句”可以在必要时省略此代码。

* * *

所以我的问题是：

**当控件存在于内容页中时，可以使用什么方法从母版页安全地引用一个 asp.net 控件，而当它不存在时省略该引用？**

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:36:32.790

请以下两个链接。可能你会得到一些帮助：

[检查jQuery中是否存在元素](https://stackoverflow.com/questions/4592493/jquery-check-if-element-exists)

[jQuery 是否有“存在”功能？](https://stackoverflow.com/questions/31044/is-there-an-exists-function-for-jquery)

还有一件事，而不是`body.findcontrol("dep_ddb").ClientId` 尝试通过从页面源获取它来提供直接客户端 ID。那么我不会向您显示任何服务器错误。

# javascript - 如何使用 javascript 将 div 添加到页面？

> ID：15846487
> 
> 赞同：0
> 
> 时间：2013-04-06T02:49:34.243
> 
> 标签：javascript, innerhtml

所以......我想在文档的 /body 之前添加以下内容，我似乎找不到让它工作的方法：

```
document.body.innerHTML+="<div style=\"position:absolute; right:-10px; bottom:10px;\">response</div>\""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:52:55.657

**特别是**对于`<body>`元素，您不应该使用`innerHTML`将元素附加到元素。更简单的方法是使用 DOM 方法，例如`createElement`,`insertBefore`或`appendChild`.

[https://developer.mozilla.org/en-US/docs/DOM/document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)

[https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)

[https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)

试试这个：

```
var div = document.createElement("div");
div.style.position = "absolute";
div.style.right = "-10px";
div.style.bottom = "10px";
div.innerHTML = "response";
var lastChild = document.body.lastChild;
document.body.insertBefore(div, lastChild.nextSibling); 
```

虽然我想将它附加到以下内容是有意义的`body`：

```
document.body.appendChild(div); 
```

（而不是我第一个示例中的最后两行）

它还取决于您何时调用此代码。当然，*如果*`<body>`在. 通过使用类似的东西：

 *```
window.onload = function () {
    // Your code from above
}; 
```

这将确保原始`<body>`内容已准备就绪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:52:08.057

不要添加这样的东西！相反，请执行以下操作：

```
var newDiv = document.createElement('div')
newDiv.style.position = 'absolute'
newDiv.id = 'myDiv'
newDiv.innerHTML = 'hello'
//etc.
document.body.appendChild(newDiv) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T02:52:26.323

将代码更改为

```
document.body.innerHTML="<div style=\"position:absolute; right:-10px; bottom:10px;\">response</div>\""; 
```

最后去掉)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T02:53:06.067

关于什么：

```
var div = document.createElement("div");

// it's better use a CSS here instead
div.style.position = "absolute";
div.style.right = "-10px";
div.style.bottom = "10px";

div.innerHTML = "response";

document.body.appendChild(div); 
```

?*

# android - GCM 通知只执行一次

> ID：15846493
> 
> 赞同：0
> 
> 时间：2013-04-06T02:50:28.657
> 
> 标签：android, notifications, android-activity, launch, google-cloud-messaging

我成功地从我的 GCM 服务器接收到我的 Android 应用程序的通知。

当我第一次选择我的通知时，我的通知会启动目标活动。但是，以下通知不会启动活动。

以下是我的 GCMIntentService 类：

```
public class GCMIntentService extends GCMBaseIntentService{
    private String TAG = "RT-GCM";

    @Override
    protected void onError(Context arg0, String arg1) {
        // TODO Auto-generated method stub
        Log.e(TAG, "GCM-SERVICE: error");
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        // TODO Auto-generated method stub
        int nid = Integer.parseInt(intent.getStringExtra("nid"));

        try {
//          generateNotification(context, nid, intent.getStringExtra("message"));
            generateNotification(context, intent);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    protected void onRegistered(Context context, String arg1) {
        // TODO Auto-generated method stub
        Log.e(TAG, "GCM-SERVICE: Registered");

        AccountManager accountManager = AccountManager.get(context);
        accountManager.getAccounts();
        Account account = getAccount(accountManager);

        new GCMServerCall().register(arg1, "Tony", account.name);
    }

    @Override
    protected void onUnregistered(Context arg0, String regID) {
        // TODO Auto-generated method stub
        Log.e(TAG, "GCM-SERVICE: UN-Registered");
        new GCMServerCall().unregister(regID);
    }

    /**
     * Issues a notification to inform the user that server has sent a message.
     * 
     * I copied this code fragment from a GCM.zip example file downloaded from http://cl.ly/0C151616032t
     */
    private static void generateNotification(Context context, Intent myintent) {

        Integer nid = Integer.parseInt(myintent.getStringExtra("nid"));

        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, myintent.getStringExtra("message") + "["+nid+"]", when);
        String title = context.getString(R.string.app_name);

        Intent notificationIntent = new Intent(context, ArticleReader.class);
        Log.e("TESTING ...", "Sending NID#" + nid);
        notificationIntent.putExtra("NID", nid);
        notificationIntent.putExtra("nid", nid);
        notificationIntent.putExtra("test", "working");

        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, myintent.getStringExtra("message") + "["+nid+"]", intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.flags |= Notification.FLAG_SHOW_LIGHTS;
        notification.defaults = Notification.DEFAULT_ALL;
        notificationManager.notify(0, notification);
    }

    /****
     * retrieving Google account(s) registered on the target device
     * @param accountManager
     * @return
     */
    private Account getAccount(AccountManager accountManager){
        Account[] accounts = accountManager.getAccountsByType("com.google");
        Log.i(TAG, "We have " + accounts.length + " accounts!");
        return accounts[0];
    }

} 
```

**更新：**

*我发现了一些新东西。在第一次也是唯一一次通过选择通知成功启动 ArticleReader.class 之后，仅当我将应用程序从 ArticleReader 中导航出来时，选择以下通知才有效。换句话说，如果 ArticleReader 的实例是活动视图，则任何尝试启动相同活动的通知都将不起作用。*

**任何人都可以告诉我如何通过通知重复启动 ActivityReader 类，即使 ActivityReader 活动是当前视图，好吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:46:37.290

来自文档

`public void notify (int id, Notification notification)`

> 发布要在状态栏中显示的通知。 **id** - 此通知的标识符在您的应用程序中是唯一的。

而不是 0 你应该总是生成一个唯一的 id 来在你的状态栏上获得不同的通知，使用时区作为唯一标识符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:12:48.660

我浏览了你的代码，它对我来说非常完美，我真的想知道它有什么问题，直到我发现你`IntenetSerivce`没有`constructor`它应该做的事情，它会类似于以下内容：

```
public GCMIntentService(){
        super(PROJECT_ID);
    } 
```

其中`PROJECT_ID`是您从 Google API 控制台获得的项目 ID。

# javascript - 检查内容等于什么，如果某个字符串则替换为 unicode

> ID：15846496
> 
> 赞同：0
> 
> 时间：2013-04-06T02:50:59.297
> 
> 标签：javascript, jquery, regex

我想知道如何做我在 js / jQuery 中描述的标题，最好是使用正则表达式。

我要做的是在 html 元素中查找某个单词，在这种情况下，在 nav li a 中，并将其替换为 unicode。

专门查找单词“GooglePlus”并将其替换为 unicode 。

怎么能用 js 或 jquery 和 regex 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:57:16.683

像这样的东西：

```
$("nav li a").text(function(i,currentText) {
    return currentText.replace(/GooglePlus/g, "");
}); 
```

当您将一个函数传递给该[`.text()`方法](http://api.jquery.com/text/#text-functionindex--text)时，它将为 jQuery 对象中的每个元素（即所有锚元素）调用，接收当前文本作为参数，因此您只需返回该值并进行适当的替换。

# java - 在 Eclipse 中调试 Android 代码时出现“找不到源”

> ID：15846500
> 
> 赞同：0
> 
> 时间：2013-04-06T02:51:53.633
> 
> 标签：java, android, eclipse

我已经被这个问题困扰了很长时间，似乎无法找到解决办法。我有一种方法，我想检索网站的 HTML 源代码，但每次运行 client.execute 步骤时，Eclipse 都会输出“找不到源”。我可以在该步骤之前打断点，无论我尝试“越过”该行还是只是点击“go”，我仍然会收到“Source not found”。这是我的方法

```
private void getQuestions()
{
    try 
    {

        URI url = null;
        try 
        {
            url = new URI("http://google.com");
        }
        catch (URISyntaxException e)
        {
            e.printStackTrace();
        }

        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        request.setURI(url);

        // THIS LINE CAUSES SOURCE NOT FOUND
        HttpResponse response = client.execute(request);

        System.out.println("HttpResponse received");

    }
    catch (ClientProtocolException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

在我的 AndroidManifest.xml 文件中，我还在标签之前添加了以下内容

```
 <uses-sdk
    android:minSdkVersion="13"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.INTERNET"/> 
```

我发现一些人有类似的问题，并尝试了他们的修复，但没有成功。我已将我的应用程序名称添加到我的源路径并将其置于默认值之上。

![资源](https://i.imgur.com/BrczyGv.png)

我还将我的应用程序移到了构建路径的底部

![构建路径](https://i.imgur.com/VSGh6nB.png)

我正在为 Java 开发人员运行 Eclipse IDE

版本：Juno Service Release 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:13:27.230

我创建了一个演示，它在我的工作正常.. 请检查它，我认为它可能对你有帮助..

```
URI url = null;
        try 
        {
            url = new URI("http://www.google.com");

            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet(url);

            HttpResponse response = client.execute(request);

            BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            String line = "";
            StringBuilder total = new StringBuilder();
            try 
            {
                while ((line = rd.readLine()) != null) 
                { 
                    total.append(line);
                }
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            }
            Log.w("Html",total.toString());
        }
        catch (Exception e)
        {
            e.printStackTrace();
        } 
```

我在我的清单文件中使用它。

```
<uses-sdk android:minSdkVersion="7" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

我认为你应该把你的“jsoup-1.7.2.jar”文件放在 libs 目录中，然后在这个 libs 目录中的项目中添加 jar。并只需在 Java Build Path 对话框中选择复选框以“检查（true）”您的 jar。（这不是必需的，但应该检查）。喜欢..

![在此处输入图像描述](https://i.stack.imgur.com/9RIML.png)

# javascript - 如何使用带有内联 Javascript 的 RequireJS 设置多页应用程序

> ID：15846502
> 
> 赞同：1
> 
> 时间：2013-04-06T02:51:57.340
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, requirejs

我正在尝试将项目转换为使用 requirejs 而不是我下面的解决方案。目前，我有一个布局页面，其中包含页面底部的所有脚本（modernizr 除外），如下所示：

```
<head>
    <script src="@Links.Assets.Scripts.Libraries.modernizr_2_6_2_js"></script>
</head>

<body>
    <!-- Page content goes here -->

    @RenderSection("PreScripts", false)
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="@Links.Assets.Scripts.Libraries.jquery_1_9_1_min_js"><\/script>')</script>
    <script src="@Links.Assets.Scripts.Libraries.jquery_namespace_js"></script>
    <script src="@Links.Assets.Scripts.Libraries.jquery_unobtrusive_ajax_js"></script>
    <script src="@Links.Assets.Scripts.Libraries.jquery_validate_js"></script>
    <script src="@Links.Assets.Scripts.Libraries.jquery_validate_unobtrusive_js"></script>
    <script src="@Links.Assets.Scripts.Libraries.jquery_timeago_js"></script>
    <script src="@Links.Assets.Scripts.Libraries.toastr_js"></script>
    <script src="@Links.Assets.Scripts.Views.Shared._master_js"></script>
    @RenderSection("PostScripts", false)

    @{
        var errorMessage = TempData[TempDataConstants.ErrorMessage] as string;
        var infoMessage = TempData[TempDataConstants.InfoMessage] as string;
        var successMessage = TempData[TempDataConstants.SuccessMessage] as string;
        if (!string.IsNullOrEmpty(errorMessage)) {
            <script>
                var origTimeOut = toastr.options.timeOut;
                toastr.options.timeOut = 0;
                toastr.error(@Html.Raw(Json.Encode(errorMessage)));
                toastr.options.timeOut = origTimeOut;
            </script>
        }
        if (!string.IsNullOrEmpty(successMessage)) {
            <script>
                var origTimeOut = toastr.options.timeOut;
                toastr.options.timeOut = 0;
                toastr.success(@Html.Raw(Json.Encode(successMessage)));
                toastr.options.timeOut = origTimeOut;
            </script>
        }
        if (!string.IsNullOrEmpty(infoMessage)) {
            <script>
                var origTimeOut = toastr.options.timeOut;
                toastr.options.timeOut = 0;
                toastr.info(@Html.Raw(Json.Encode(infoMessage)));
                toastr.options.timeOut = origTimeOut;
            </script>
        }
    }
</body> 
```

然后在使用此布局页面的各个页面中填充 PostScripts 部分：

```
@section PostScripts {
    // Javascript that belongs to a single page goes here.
} 
```

### 问题

我已经按照[这个示例](https://github.com/requirejs/example-multipage)进行了操作，但是您可以看到我正在检查服务器上的 TempData 以查看它是否不为空以在客户端上弹出 toastr 消息。我不太确定这样做的最佳方法并尝试了很多事情。有什么想法吗？

# mysql - 从另一个表 AS 值中选择数据时，操作数应包含 1 列

> ID：15846503
> 
> 赞同：0
> 
> 时间：2013-04-06T02:52:06.123
> 
> 标签：mysql, sql

有人可以在这里帮助我吗，我用谷歌搜索过，并查看了其他有此错误的示例，但这只是让我感到困惑，我似乎无法理解这一点。

我正在努力在 mysql 查询中选择数据作为其他内容我收到以下错误...

```
Operand should contain 1 column(s) 
```

操作数的简化术语是什么？

下面是mysql查询...

```
SELECT atable_garage.id, 
       atable_garage.total_votes as num_votes,
       atable_garage.name, 
       atable_garage.address, 
       atable_garage.city, 
       atable_garage.postcode, 
       atable_garage.main_dealer, 
       atable_garage.phone, 
       atable_garage.website, 
       atable_garage.description, 
       atable_garage.years_in_business,
       atable_garage.garage_image,  
       (SELECT(avg(quality_of_repair) + avg(attitude_of_staff) + avg(overall_satisfaction))/3 as rating, 
               count(*) as num_votes 
          FROM atable_feedback 
         WHERE validated = 'Y'
           AND atable_garage.id = garage_id) 
  FROM `atable_garage`
 WHERE valeting = 'Y' 
   AND active = 'Y' 
ORDER BY rating DESC, atable_garage.total_votes DESC 
```

谁能指出我在这里做错了什么？如果可能的话，请提前解释一下，我发现很难理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:53:58.893

相关子查询一次只能返回一列。由于您想要有两列，您可以通过将查询转换为`LEFT JOIN`.

```
SELECT  atable_garage.id, 
        atable_garage.total_votes as num_votes,
        atable_garage.name, 
        atable_garage.address, 
        atable_garage.city, 
        atable_garage.postcode, 
        atable_garage.main_dealer, 
        atable_garage.phone, 
        atable_garage.website, 
        atable_garage.description, 
        atable_garage.years_in_business,
        atable_garage.garage_image,  
        COALESCE(b.rating, 0) rating,
        COALESCE(b.num_votes, 0) num_votes
FROM    atable_garage
        LEFT JOIN
        (
            SELECT  garage_id,
                    (avg(quality_of_repair) + avg(attitude_of_staff) + avg(overall_satisfaction)) / 3.0 as rating, 
                    count(*) as num_votes 
            FROM    atable_feedback 
            WHERE   validated = 'Y'
            GROUP   BY  garage_id
        ) b ON  atable_garage.id = b.garage_id
WHERE   valeting = 'Y' AND active = 'Y' 
ORDER   BY rating DESC, 
        atable_garage.total_votes DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:21:55.580

对列使用子选择时，只能返回一个值，如下所示：

```
 (SELECT avg(quality_of_repair) + avg(attitude_of_staff) + avg(overall_satisfaction) 
      FROM atable_feedback 
     WHERE validated = 'Y'
       AND garage_id = atable_garage.id
   )/3 as rating, 
```

# c++ - 为什么在 C++/CLI 中限定的、前向声明的本地类名称解析为不同的托管类名称？

> ID：15846506
> 
> 赞同：0
> 
> 时间：2013-04-06T02:52:21.530
> 
> 标签：c++, visual-studio-2010, c++-cli, wrapper

我在 C++ 中有一个本机类，在 C++/CLI 中有一个托管类。C++/CLI 是 C++ 的包装器。这两个类具有相同的名称，但存在于不同的命名空间中。出于某种我还没有理解的原因，我收到有关尝试声明指向托管类的指针的编译器错误，但我的代码实际上是在尝试使用完全限定名称声明指向本机类的指针。是什么赋予了？

“本机\Header.h”

```
namespace Native
{
    class MyClass {};
} 
```

“托管/Header.h”

```
namespace Native { class MyClass; }
// Or
class Native::MyClass;

namespace Managed
{
    ref class MyClass
    {
        Native::MyClass* m_Native; // Error C3699
    };
} 
```

错误 C3699：“*”：不能在类型“Managed::MyClass”上使用此间接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:03:08.803

Visual Studio 2012 C++ 编译器毫无怨言地接受该代码。

您可能需要升级。

实际上，Visual Studio 2010 C++ 编译器也是如此。

确保您已安装服务包；我用

> Microsoft (R) C/C++ 优化编译器版本 16.00.40219.01

确切的代码是

```
// C3699test.cpp : main project file.
// 

namespace Native { class MyClass; }

namespace Managed
{
    ref class MyClass
    {
        Native::MyClass* m_Native; // Error C3699
    };
} 
```

编译命令行是

> cl /c /AI"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0" /Zi /clr /nologo- /W3 /WX- /Od /Oy- /D WIN32 /D _DEBUG /D _UNICODE /D UNICODE /EHa /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fo"Debug\" /Fd"Debug\vc100.pdb" /TP /FU"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Core.dll" /analyze- /errorReport:prompt c3699test.cpp /clr:nostdlib

# objective-c - 在 iOS 中沿着路径检测绘制

> ID：15846508
> 
> 赞同：0
> 
> 时间：2013-04-06T02:52:31.410
> 
> 标签：objective-c, core-animation, core-graphics, uibezierpath

我正在为孩子们写一个写作应用程序。我需要像在 Dora ABC 应用程序中那样沿着定义的路径强制写入。例如，写 A。

当用户触摸和绘图时，它仅在用户手指沿着定义的路径时绘制，并且可以检测用户是否沿着该路径。

我的路径定义在`UIBezierpath`.

我尝试使用`CGRectContainsPoint`，但是当我有这么多字母时，它似乎是太多的代码。

任何建议都非常感谢。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T06:49:36.137

您可以尝试另一种方法-

在 ios 中使用自定义手势：使用此功能，您可以为字母预定义手势，并且可以使用这些手势进行检测。演示代码可在[https://github.com/britg/MultistrokeGestureRecognizer-iOS](https://github.com/britg/MultistrokeGestureRecognizer-iOS)获得 或者如果您想从头开始实现它 - [http://blog.federicomestrone.com/2012/01/31/creating-custom-gesture-recognisers -for-ios/](http://blog.federicomestrone.com/2012/01/31/creating-custom-gesture-recognisers-for-ios/)

# php - php没有在服务器上运行

> ID：15846509
> 
> 赞同：0
> 
> 时间：2013-04-06T02:52:44.820
> 
> 标签：php

到目前为止，我的服务器一直在完美运行 PHP 脚本。我不知道我的服务器发生了什么，但是 PHP 脚本没有运行，而是由服务器自动注释。当我上传我的 php 脚本以显示 PHPINFO 时，这就是我回来的原因：

```
<!--?php

// Show all information, defaults to INFO_ALL
phpinfo();

?--> 
```

如果您查看源代码，您会看到我的 php 脚本已被注释。我应该怎么做才能让我的 PHP 脚本运行？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:57:03.947

如果您从 PHP 命令行界面执行脚本，是否会发生同样的事情？

似乎外部的东西在 Web 服务器级别或软件级别显式禁用 PHP 执行。您是否使用某种类型的 PHP 框架来限制 PHP 的执行，例如 CakePHP、joomla 等？

# python - Python：为什么数学模块中的函数接受 Decimal 对象作为参数？

> ID：15846510
> 
> 赞同：8
> 
> 时间：2013-04-06T02:52:49.883
> 
> 标签：python, math, decimal

奇怪的是，Python 数学模块中的每个函数似乎都可以很好地处理 Decimal 对象。例如：freexp、exp、cos。

当我输入 时`print(math.frexp(decimal.Decimal('2341.12412')))`，Python 会打印出正确的答案，即`(0.57156... , 12)`, 并且不会抛出任何异常。

我假设数学模块将用低级 C 编写，尽可能依赖硬件数学运算来提高效率。那么......为什么它适用于 Decimal 对象？

他们是否对数学函数进行了类型检查，如果参数是十进制，则切换到不同的实现？我没有看到文档中提到的类似内容。也可能是 Decimal 自动转换为浮点数，但这也没有任何意义。

是的，我很困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T03:44:08.290

好吧，看看`math module.c`我得到了这个：

```
static PyObject *
math_frexp(PyObject *self, PyObject *arg)
{
    int i;
    double x = PyFloat_AsDouble(arg);
    if (x == -1.0 && PyErr_Occurred())
        return NULL;
    /* deal with special cases directly, to sidestep platform
       differences */
    if (Py_IS_NAN(x) || Py_IS_INFINITY(x) || !x) {
        i = 0;
    }
    else {
        PyFPE_START_PROTECT("in math_frexp", return 0);
        x = frexp(x, &i);
        PyFPE_END_PROTECT(x);
    }
    return Py_BuildValue("(di)", x, i);
} 
```

查看代码，它确实使用`float`( `PyFloat_AsDouble`)

同样的事情`exp`，

```
static PyObject *
math_factorial(PyObject *self, PyObject *arg)
{
    long x;
    PyObject *result, *odd_part, *two_valuation;

    if (PyFloat_Check(arg)) {
        PyObject *lx;
        double dx = PyFloat_AS_DOUBLE((PyFloatObject *)arg);
        if (!(Py_IS_FINITE(dx) && dx == floor(dx))) {
            PyErr_SetString(PyExc_ValueError,
                            "factorial() only accepts integral values");
            return NULL;
        }
        lx = PyLong_FromDouble(dx);
        if (lx == NULL)
            return NULL;
        x = PyLong_AsLong(lx);
        Py_DECREF(lx);
......................................................... 
```

# php - 如何选择前置元素

> ID：15846512
> 
> 赞同：0
> 
> 时间：2013-04-06T02:53:04.987
> 
> 标签：php, javascript, jquery, ajax, upload

我有一个使用新的 multiple 属性的上传表单，我制作了一个 ajax 上传表单以使事情更加用户友好。我的问题是我试图更新所有这些正在上传并附加到 div 的文件的百分比，而不是更新一个百分比，所有这些文件都是从最后一个文件更新的。这是一些代码。

```
$('#File').change(function(event) {
        for(I = 0; I < this.files.length; I++)
        {
            var Name = this.files[I].name;
            var Size = this.files[I].size;
            var Type = this.files[I].type;

            $('#UploadContent').prepend('<div class="UploadLabel" style="width:60%;">'+Name+'</div><div class="UploadLabel UploadPercent" style="width:10%;">0%</div><div class="UploadLabel" style="width:15%;">N/A</div><div class="UploadLabel" style="width:15%;">'+Type+'</div>');
            var Data = new FormData();
            Data.append('File[]', this.files[I]);
            var Request = new XMLHttpRequest();
            Request.upload.addEventListener('progress', function(event){
                if(event.lengthComputable)
                {
                    var Percent = event.loaded / event.total;
                    var Progress = $('#UploadContent').find('.UploadPercent');
                    $(Progress).text(Math.round(Percent * 100) + '%');
                }
            });
            Request.upload.addEventListener('load', function(event) {
        });

            Request.open('POST', '/Home/Upload/Upload.php');
            Request.setRequestHeader('Chache-Control', 'no-cache');
            Request.send(Data);
            $('#UploadModal').fadeIn('fast');
        }
    }); 
```

现在你可以在进度监听器中看到我的

```
var progress = $('#UploadContent').find('.UploadPercent'); 
```

我将如何选择应该正确更新的文件。如果有人能找到一种完全不同的方法来改变百分比，那也太好了！- 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:01:01.737

当你在前面添加一个新的、特定的`class`（是的，你可以使用 an `id`，但我会坚持使用`class`）到`.UploadPercent`元素：

```
$('#UploadContent').prepend('<div class="UploadLabel" style="width:60%;">'+Name+'</div><div class="UploadLabel UploadPercent UploadTarget' + I + '" style="width:10%;">0%</div><div class="UploadLabel" style="width:15%;">N/A</div><div class="UploadLabel" style="width:15%;">'+Type+'</div>');
// LOOK HERE----------------------------------------------------------------------------------------------------------------------^ HERE 
```

当你定位时，使用这个：

```
var progress = $('#UploadContent').find('.UploadTarget' + I); 
```

因为您需要`I`根据您在循环中的位置准确地确定值，所以您还需要使用闭包。所以你的代码最终看起来像：

```
$('#File').change(function(event) {
    for(I = 0; I < this.files.length; I++) {
        (function (I) {
            // Your current code inside the for loop
        })(I);
    }
}); 
```

虽然上面的示例绝对是一个选项，但它可能会发送更多内容来存储对新插入元素的引用，而不必处理新的`class`and `I`，然后再使用它。

这是我将使用的最终代码：

[http://jsfiddle.net/MeL7L/2/](http://jsfiddle.net/MeL7L/2/)

```
$("#File").on("change", function (event) {
    for (var i = 0; i < this.files.length; i++) {
        (function (curFile, i) {
            var Name = curFile.files[i].name;
            var Size = curFile.files[i].size;
            var Type = curFile.files[i].type;

            var newEl = "";
            newEl += '<div class="UploadLabel" style="width:60%;">' + Name + '</div>';
            newEl += '<div class="UploadLabel UploadPercent" style="width:10%;">0%</div>';
            newEl += '<div class="UploadLabel" style="width:15%;">N/A</div>';
            newEl += '<div class="UploadLabel" style="width:15%;">' + Type + '</div>';
            newEl = $(newEl);
            $("#UploadContent").prepend(newEl);
            var Data = new FormData();
            Data.append("File[]", curFile.files[i]);
            var Request = new XMLHttpRequest();
            Request.upload.addEventListener("progress", function (event){
                if (event.lengthComputable) {
                    var Percent = event.loaded / event.total;
                    var Progress = newEl.find(".UploadPercent");
                    Progress.text(Math.round(Percent * 100) + "%");
                }
            });
            Request.upload.addEventListener("load", function(event) {});

            Request.open("POST", "/Home/Upload/Upload.php");
            Request.setRequestHeader("Cache-Control", "no-cache");
            Request.send(Data);
            $("#UploadModal").fadeIn("fast");
        })(this, i);
    }
}); 
```

# php - PDO 更新不更新数据库

> ID：15846515
> 
> 赞同：0
> 
> 时间：2013-04-06T02:53:26.537
> 
> 标签：php, mysql, pdo

我无法获取此代码来更新我的 mysql 数据库。

```
 $SQL = $odb -> prepare("UPDATE `LB` SET `running` = `running` + 1 WHERE `url`= :url");
        $SQL -> execute(array(":url"=> $url )); 
```

有人请帮忙，我已经搜索过这个并找不到类似的东西。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-06T05:48:26.663

不要在你的数组中做 :url ，不需要它。

您还可以使用问号代替您的 =:url，如下所示：

```
url=? 
```

然后在您的数组中，您可以放置​​一个直接值：

```
$SQL->execute(array($url)); 
```

或者您可以增量绑定值：

```
$SQL->bindValue(1, $url, PDO::PARAM_INT);
$SQL->execute(); 
```

除了使用 PDO::PARAM_INT 之外，您将使用自己的参数...

所以我猜在你的例子中你会使用 PDO::PARAM_STR

希望这会有所帮助:)

# node.js - 终止 ExpressJS 请求

> ID：15846516
> 
> 赞同：9
> 
> 时间：2013-04-06T02:53:42.007
> 
> 标签：node.js, express

我将如何结束 Express 3 请求？res.end() 当然不会停止处理。

```
exports.home = function(req, res) {
  res.end();
  console.log('Still going, going...'); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-06T02:54:45.477

你需要`return`。例如，

```
exports.home = function(req, res) {
  return res.end();
  console.log('I will never run...'); 
```

`res.end()`简单地完成并刷新对客户端的响应。然而，就像任何其他操作一样，它不会告诉 JavaScript 停止运行，因此我们需要显式`return`退出函数（尽管我可能会问为什么在刷新您实际上并不想要的响应后会有代码跑步...？）。

# ruby-on-rails - 模棱两可的表参考

> ID：15846517
> 
> 赞同：0
> 
> 时间：2013-04-06T02:54:17.533
> 
> 标签：ruby-on-rails, activerecord, model, activerecord-relation

这个问题看起来很简单，但我从来没有遇到过这样的问题。

以下是设置：

```
Post has_many :reader_links
Post has_many :readers, :through => :reader_links 
```

我需要了解是否有读者阅读帖子。

`@post.reader_links.where('created_at >= ?', 45.minutes.ago).any?`

效果很好。

`@post.readers.where('created_at >= ?', 45.minutes.ago),any?`

抛出一个*模棱两可的表列*错误，因为混淆了该`created_at`列是指**reader**对象还是**reader_link**对象。发生这种情况是因为阅读器的类实际上是**用户。**如何查询**45 分钟前由 reader_links 创建的读者？**

我正在寻找类似的东西..

`@post.readers.where('reader_link.created_at >= ?', 45.minutes.ago)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:24:14.157

您可以合并范围以消除模棱两可的错误，因此每个范围都有自己的可见性范围。

使用`meta_where`：

```
Post.scoped & (ReaderLink.scoped & User.where(:created_at.gt => 45.minutes.ago)) 
```

没有`meta_where`：

```
Post.scoped.merge(ReaderLink.scoped.merge(User.where('created_at >= ?', 45.minutes.ago)) 
```

这将导致`Post`包含所有年龄小于 45 分钟的读者的 reader_links 和读者数据的对象数组。请在 Rails 控制台中尝试。

编辑：对于单个帖子

```
post_with_fresh_users = Post.where('id = ?', some_id).merge(ReaderLink.scoped.merge(User.where('created_at >= ?', 45.minutes.ago)) 
```

编辑：帖子的所有新读者（不同顺序）

```
fresh_readers_for_post = User.where('created_at >= ?', 45.minutes.ago).merge(ReaderLink.scoped.merge(Post.where('id = ?', @post.id)) 
```

这个怎么运作：

[http://benhoskin.gs/2012/07/04/arel-merge-a-hidden-gem](http://benhoskin.gs/2012/07/04/arel-merge-a-hidden-gem)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:51:11.377

如果我猜对了，您只需要指定`created_at`您正在谈论的列：

```
@post.readers.where('reader_links.created_at >= ?', 45.minutes.ago).any? 
```

# html - 如何在“响应式”网格 div 折叠时保持“排水沟空间”？

> ID：15846518
> 
> 赞同：0
> 
> 时间：2013-04-06T02:54:29.727
> 
> 标签：html, css, twitter-bootstrap

我使用最新的 twitter 引导程序来构建响应式网格网站。我在响应式网格中有三个 div，如下所示：

```
<div class="row-fluid">
 <div class="span4">...</div>
 <div class="span4">...</div>
 <div class="span4">...</div>
</div> 
```

...这可以通过 bootsrap 文档按预期工作。但是，我在这些 div 上的背景颜色与 html 正文背景颜色不同，当我将浏览器窗口拖动到较小的宽度以“折叠”div 以显示在彼此之上时，它们之间的装订线空间消失（创建一个大 div 与三个单独的 div 的外观）当宽度变得足够小以使它们垂直堆叠时，我可以做些什么来在 div 之间创建一些排水沟空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T03:06:49.603

你有几个选择...

(1) 您可以定义一个类并将其应用到您希望有下边距的任何 div。

**在您的 application.css （或类似）中：**

`.mb10 {margin-bottom:10px;}`

**在您的 html 页面中：**

```
<div class="row-fluid">
   <div class="span4 mb10">....</div>
   <div class="span4 mb10">....</div>
   <div class="span4 mb10">....</div>
</div> 
```

**或者**

(2) 您可以确保将`div.span4`内容包装在`<p></p>`标签中。

```
<div class="row-fluid">
   <div class="span4"><p>....</p></div>
   <div class="span4"><p>....</p></div>
   <div class="span4"><p>....</p></div>
</div> 
```

从 Bootstrap - Typography 部分：

[http://twitter.github.io/bootstrap/base-css.html#typography](http://twitter.github.io/bootstrap/base-css.html#typography)

> 此外， `<p>`（段落）的下边距为其行高的一半（默认为 10px）。

# php - PHP 科学记数法缩短

> ID：15846525
> 
> 赞同：0
> 
> 时间：2013-04-06T02:55:27.867
> 
> 标签：php, decimal, precision, rounding, scientific-notation

我在这里寻找一个优雅的解决方案（如果存在的话）。

我有一堆数字，有任意数量的小数位。如果它有超过 8 个尾随零，我想强制数字使用 8 位小数，即

0.000000004321

那将转换为：

0.00000001

但我不想使用数字格式，因为如果我用数字格式强制它使用 8 位小数，我没有 8 位小数的数字将如下所示：

1.00000000

我宁愿这些看起来像（对于金额> = 1）：

1.00700000 -> 1.01

对于金额 < 1：

0.00300000 -> 0.003

如果数字小于 1，即 0.XX，我希望它具有更高的精度（最多 8 个，切掉所有尾随的 0）。

所以，再一次，这里有几个例子来说明清楚：

```
1.00300000  -> 1.01 (maintain and round 2p for amounts >= 1)
0.00300000  -> 0.003 (maintaining precision, removing trailing 0's for amounts < 1)

1.00300001  -> 0.01 (maintain and round 2dp for amounts >= 1)
0.00300001  -> 0.00300001 (no change needed on this)
0.003000017 -> 0.00300002 (rounds upward to 8dp because it's < 1)

1.000000002 -> 1.00 (maintain and round 2dp for amounts >= 1)
0.000000002 -> 0.00000001 (rounds upward to 8dp because it's < 1) 
```

目前，由于小数位数，我的非常小的数字也以科学计数法显示。所以这是我需要担心的另一件事（即转换科学记数法来进行计算）。

我知道我可以用一堆通用逻辑来做到这一点，但这似乎是一种很老套的做事方式，当然有一些很好的解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:05:12.333

舍入到第二位：[ceil()](http://www.php.net/manual/en/function.ceil.php)

删除结束零：[rtrim()](http://www.php.net/manual/en/function.rtrim.php)

```
if($number >= 1)
{
    ceil to 2nd decimal place
}

else //when the number is less than 1
{
    ceil to 8th place
    try rtrim with '0' to remove ending zeros if there is any
} 
```

# forms - 具有不显眼的客户端验证的 Orchard 自定义表单

> ID：15846532
> 
> 赞同：0
> 
> 时间：2013-04-06T02:56:33.983
> 
> 标签：forms, validation, orchardcms, field

我正在使用 Orchard 的“自定义表单”模块通过将一堆字段添加到名为“预订表单”的内容类型来构建表单。它工作得很好 - 我可以提交表单并在管理页面中查看提交。

我想在字段上使用客户端验证。我已经成功地让 jQuery 不显眼的验证在我自己手动构建的表单上工作（使用 @Html.EditorFor() 视图模型上的属性，并装饰字段 [必需]）。但是，我无法让它在这种情况下工作。

我猜这是因为用于呈现输入的属性没有用 DataAnnotations 属性修饰：

```
namespace Orchard.Core.Common.ViewModels {
    public class TextFieldDriverViewModel {
        public TextField Field { get; set; }
        public string Text { get; set; }
        public TextFieldSettings Settings { get; set; } 
    }
} 
```

我认为“文本”字段在它之前需要类似 [Required] 的内容，以便不显眼的验证正常工作。

有什么方法可以对这样的字段进行不显眼的验证？显然，装饰该属性是不可取的，因为这样即使在 CMS 中未标记为必需的字段也将成为必需的。

# c++ - 我应该如何在 github 上设置一个 C++ 项目以便它是可移植的？

> ID：15846535
> 
> 赞同：11
> 
> 时间：2013-04-06T02:57:00.337
> 
> 标签：c++, github, portability

我想在 GitHub 上启动一个 C++ 项目，以便能够在不同的操作系统（例如 OSX 和 unix）上克隆/构建。将需要安装许多依赖项（例如 curl、libxml2 等），并且我希望尽可能避免让用户需要在系统上手动安装这些依赖项。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T04:26:22.097

这取决于你想咬掉多少。

简短的回答是让 CMake 完成这项工作。它将为任何平台生成项目，并且它们应该是可用的。您*不需要*为此分发二进制文件，假设它们随时可供您使用（以及对它们，通过扩展）。

这是一个设置我用于我的一个项目的 sqlite、boost 和 eigen 的示例。

```
cmake_minimum_required(VERSION 2.8)
set(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/Modules)

# boost
find_package(Boost 1.42.0 REQUIRED )
include_directories(${Boost_INCLUDE_DIRS})
link_directories(${Boost_LIBRARY_DIRS})

find_package(Eigen REQUIRED)
include_directories(${EIGEN_INCLUDE_DIRS})

find_package(Sqlite3 REQUIRED)
include_directories(${SQLITE3_INCLUDE_DIR})

set(CMAKE_CXX_FLAGS "-std=c++0x")

include_directories(.)

link_libraries(
    ${Boost_LIBRARIES}
    ${SQLITE3_LIBRARIES}
)

add_executable(igd_sqlite
    main.cpp
) 
```

您将使用它并生成 Visual Studio 项目、makefile 等。然后像往常一样构建项目。

CMake 支持许多开箱即用的库，尽管有时您必须在谷歌上搜索不太受欢迎的库并将它们添加到您的项目中。

我将它用于我的日常工作，即使我不需要跨平台。

当我确实想要分发二进制文件时，我通常会设置一个包含二进制文件的外部文件夹。

这是一个例子：

[https://github.com/tomisarobot/curl_race](https://github.com/tomisarobot/curl_race)

如果您没有很多外部依赖项并且它们不是很大，这将非常有用。如果不是这种情况，那么我建议将每个平台放在不同的存储库中。您的来源也应该是自己的。如果需要，您可以使用子项目，但这并不是绝对必要的。外部部门不会经常改变，所以它并不总是值得开销。通常我只是编写一个 bash 脚本来记录从哪里获取所有内容。无论如何，此脚本通常对于发行版构建是必需的。

像[maven-nar-plugin](https://stackoverflow.com/questions/1541771/using-maven-for-c-c-projects)这样的东西存在，虽然我不知道它的成熟度。如果您只是创建所有二进制文件以与您的源一起分发，那么它可能没有那么有吸引力。我没有看到很多关于它的讨论，所以我认为采用率很低。看过 maven 为 Java 做了什么，它应该更受欢迎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T03:05:38.587

几个想法

1) 工具

*   如果可能，将工具源包含在存储库中，以便可以将它们构建为仅第一次的步骤

*   如果不可能，请明确指定所需工具的最低版本，以便用户自己安装

    *   可能通过运行脚本检查是否满足依赖项要求

2) 语言

以严格的语言合规性进行编译。例如

```
 g++ -std=c++11 -pedantic 
```

# java - Java 使对象跨方法可见

> ID：15846543
> 
> 赞同：0
> 
> 时间：2013-04-06T02:57:36.770
> 
> 标签：java, object

我必须方法

A：

```
String teststring = new String ("blublub"); 
```

乙：

```
System.out.println(teststring); 
```

我该怎么做才能让 B 看到 A 的那个对象？

我已经尝试过公共 || 最后的东西，但这不是我认为的正确方式。

谢谢你的帮助

两种方法的完整代码

```
public void onWindowFocusChanged(boolean hasFocus){
    if (hasFocus){
        final String teststring= new String ("blubblub");
    }
}

public void a() {
    System.out.println(teststring);
} 
```

将 MediaPlayer 放在方法之外时出现错误日志。

```
04-06 05:20:25.140: E/AndroidRuntime(12120): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{~.MainActivity}: java.lang.NullPointerException
04-06 05:20:25.140: E/AndroidRuntime(12120):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1803)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1919)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at android.app.ActivityThread.access$1500(ActivityThread.java:160)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1008)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at android.os.Handler.dispatchMessage(Handler.java:130)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at android.os.Looper.loop(SourceFile:351)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at android.app.ActivityThread.main(ActivityThread.java:4070)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at java.lang.reflect.Method.invokeNative(Native Method)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at java.lang.reflect.Method.invoke(Method.java:538)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:906)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:664)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at dalvik.system.NativeStart.main(Native Method)
04-06 05:20:25.140: E/AndroidRuntime(12120): Caused by: java.lang.NullPointerException
04-06 05:20:25.140: E/AndroidRuntime(12120):    at android.media.MediaPlayer.create(MediaPlayer.java:697)
04-06 05:20:25.140: E/AndroidRuntime(12120):    at~.MainActivity.<init>(MainActivity.java:79) 
```

第 79 行是：私有 MediaPlayer mediaPlayerW = MediaPlayer.create(getApplicationContext(), R.raw.soft);

围绕这条线 79 是：

```
 button3 = (Button)findViewById(R.id.button3);
        button3.setOnClickListener(this); }

private MediaPlayer mediaPlayerW = MediaPlayer.create(getApplicationContext(), R.raw.soft);
 public void onWindowFocusChanged(boolean hasFocus) 
```

有没有可能，它可能与getBaseContext有关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T03:09:02.447

在这段代码中：

```
public void onWindowFocusChanged(boolean hasFocus){
    if (hasFocus){
        final String teststring= new String ("blubblub");
    }
}    

public void a() {
    System.out.println(teststring);
} 
```

虽然 testString 被声明为“在类中”，但它实际上是在类的 onWindowFocusChanged 方法内声明的，并且通过这样做，它仅在该方法内可见。要使其在整个类中可见，请在类中声明它，而不是在方法或构造函数中：

```
public class MyClass {
   // variable below declared *in* the class
   // and is visible throughout the class
   private String testString = "";
   private String anotherVariable; // declared but not instantiated

public void onWindowFocusChanged(boolean hasFocus){
    if (hasFocus){
        // don't redeclare the variable here, and don't use new String(...)
        // final String teststring= new String ("blubblub"); 

        anotherVariable = "blubblub"; // instantiated here
    }
}

   public void someMethod() {
      // variable is now visible inside of all non-static methods
      System.out.println(testString);
   }

} 
```

此外，您要避免使用`String myString = new String("Foo");`，因为这可能会导致不必要的对象创建效率低下。而是使用`String myString = "foo";`which 将重新使用字符串池中的字符串（如果可用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T03:00:19.163

你有一个错字。

**只需将语句**B中括号中的位中的 'teststring' 更改为 'teststring'

# makefile - Cygwin 出错

> ID：15846544
> 
> 赞同：0
> 
> 时间：2013-04-06T02:57:41.960
> 
> 标签：makefile, cygwin

**我正在编译源代码，它总是在 make 命令失败，下面是错误消息。**

```
gcc: unrecognized option '-rdynamic'
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: \
  warning: --export-dynamic is not supported for PE targets,         \
  did you mean --export-all-symbols?
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: \
  warning: --export-dynamic is not supported for PE targets,         \
  did you mean --export-all-symbols?
make[3]: Leaving directory `/home/alimjan/slim502/src'
make[2]: Leaving directory `/home/alimjan/slim502/src'
make[1]: Leaving directory `/home/alimjan/slim502/src'
Making all in lib
make[1]: Entering directory `/home/alimjan/slim502/lib'
Cannot execute /bin/lmntal
Makefile:422: recipe for target `config.il' failed
make[1]: *** [config.il] Error 1
make[1]: Leaving directory `/home/alimjan/slim502/lib'

Makefile:293: recipe for target `all-recursive' failed

make: *** [all-recursive] Error 1 
```

（上面的线断了显示）

我无法解决这个问题。我是新手，`make`不知道该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:27:16.810

我不确定这是makefile的问题。错误是：

```
Cannot execute /bin/lmntal 
```

我相当确定如果您尝试从命令行自己运行“/bin/lmntal”，您会收到类似的错误。似乎您的构建需要一些额外的实用程序才能运行，而您没有这些实用程序或无法在您的系统上运行。该文件 ( `/bin/lmntal`) 是否存在？是否可执行？它是脚本吗？如果是，第一行是否引用了存在且可执行的解释器？当您使用 64 位操作系统时，它是 32 位程序（使用`file /bin/lmntal`）吗？如果是，您的 Ubuntu 系统上是否安装了 32 位版本的 libc 等？或者反之亦然（如果你有一个 32 位的 Ubuntu 并且该实用程序是一个 64 位的程序，你将根本无法运行它）？

或者，可能是该程序应该在其他地方找到或命名为其他名称，而您的 makefile*有*问题，因为未设置某些变量；例如，makefile 可能会说类似的内容`$(FOODIR)/bin/lmntal`，并且由于某种原因`$(FOODIR)`未设置变量。

如果您提供上述详细信息（文件存在？权限？ `file`输出？makefile 第 422 行的完整规则？）我们可以提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T06:35:44.880

通常当一个makefile输出看起来和你的输出一样严重时，那是因为它被使用的环境发生了变化——可能是一些外部文件被移动或删除了，或者可能是make太大了，特别是如果make本质上是递归的（远离递归makefile；去NR）

无论如何，如果我在你那里我会调查环境发生变化的地方 - 也许如果你的项目在版本系统中 - 尝试不同的分支

尝试解决 makefile 中的问题可能非常困难，因此最好返回到有效的版本，然后从那里继续

# ios - 应用程序图标不会显示在应用程序切换器的音乐控件中

> ID：15846545
> 
> 赞同：3
> 
> 时间：2013-04-06T02:57:52.563
> 
> 标签：ios, objective-c, avqueueplayer

我正在编写一个流式传输音乐的应用程序，并且在设置音乐控制停靠屏幕上的图标时遇到了很多麻烦（当您双击主页按钮并向左滑动时）。所有文档都说要做这样的事情，但图标永远不会出现，我也没有收到事件通知。所有这些代码都在我的播放器视图控制器中。_radioPlayer 是 AVQueuePlayer 的一个实例。我在这里做错了什么？

```
- (void)viewWillAppear:(BOOL)animated
{
    UIApplication *application = [UIApplication sharedApplication];
    if([application respondsToSelector:@selector(beginReceivingRemoteControlEvents)])
        [application beginReceivingRemoteControlEvents];
    [self becomeFirstResponder];
}

- (BOOL)canBecomeFirstResponder
{
    return YES;
}

- (void)remoteControlReceivedWithEvent:(UIEvent *)event {
    switch (event.subtype) {
        case UIEventSubtypeRemoteControlTogglePlayPause:
            [_radioPlayer pause];
            break;
        case UIEventSubtypeRemoteControlPlay:
            [_radioPlayer play];
            break;
        case UIEventSubtypeRemoteControlPause:
            [_radioPlayer pause];
            break;
        default:
            break;
    }
} 
```

编辑：我通读了[文档](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/Remote-ControlEvents/Remote-ControlEvents.html "文件")并按照步骤操作，但它仍然无法正常工作。以下是我想出的一些可能的原因：

A. 调用 viewDidAppear 时我的音乐还没有播放。在文档中它指出

> “您的应用程序必须是“正在播放”应用程序。重申，即使您的应用程序是第一响应者>并且您已打开事件传递，您的应用程序在开始播放音频之前不会接收远程控制事件。”

我试着打电话`beginReceivingRemoteControlEvents:`，`becomeFirstResponder:`在音乐开始播放后，但这也不起作用。只能调用这些`viewDidAppear:`吗？iOS 是否会自动检测音乐何时开始播放所以这不是必需的？

B. 使用 AVQueuePlayer 有点奇怪。我几乎可以肯定这不是因为事件消息是由视图控制器处理的，而不是播放器本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:07:25.530

它可能对您不起作用，因为您正在调用`beginReceivingRemoteControlEvents`而`viewWillAppear`不是`viewDidAppear`. 查看[文档](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/Remote-ControlEvents/Remote-ControlEvents.html)-

```
- (void)viewDidAppear:(BOOL)animated {

    [super viewDidAppear:animated];

    // Turn on remote control event delivery

    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
} 
```

# wpf - 将标记扩展写为嵌套元素

> ID：15846547
> 
> 赞同：2
> 
> 时间：2013-04-06T02:58:29.107
> 
> 标签：wpf, xaml, user-controls, resourcedictionary, markup-extensions

是否可以将标记扩展编写为嵌套元素而不是属性？我正在尝试`Boolean`用作`ResourceDictionary`条目的键。

`ResourceDictionary`键类型为字符串的当前代码：

```
<UserControl.Resources>
    <my:ObjectToResourceConverter x:Key="StatusConverter">
        <ResourceDictionary>
            <BitmapImage x:Key="True" UriSource="/TestProject;/Resources/Open.png"/>
            <BitmapImage x:Key="False" UriSource="/TestProject;/Resources/Closed.png" />
        </ResourceDictionary>
    </my:ObjectToResourceConverter>
</UserControl.Resources> 
```

所需的代码，但由于以下原因无法编译：

> 无法识别的标签 x:Key

`XAML`

```
... 
<BitmapImage UriSource="/TestProject;/Resources/Open.png">
    <x:Key>
        <x:Boolean>True</x:Boolean>
    </x:Key>
</BitmapImage>
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T03:19:20.960

好吧，是的，您通常可以使用元素语法声明标记扩展，但`x:Key`实际上是*指令*，而不是标记扩展。[如此处](http://msdn.microsoft.com/en-us/library/ms742804.aspx)所述，`x:Key`不支持 XAML 2006 中的元素语法。如果您使用 XAML 2009，它支持，但您不太可能（或想要）。

但即使你可以这样做，它也无济于事，因为（在 XAML 2006 中；XAML 2009 可能不同，未检查）资源字典的键只能使用 `string`、`x:Type`或`x:Static`. 因此，对于您的情况，您需要定义一个产生 的静态属性`false`，并将其设置为使用`x:Static`.

**编辑**仅支持`string`,`x:Type`和的`x:Static`部分并不完全正确。我太相信编译器错误消息（上面写着“仅支持 String、TypeExtension 和 StaticExtension。”）。至少有一种其他受支持的密钥类型：[ComponentResourceKey](http://msdn.microsoft.com/en-us/library/ms753186.aspx)。可能还有更多我忘记了或我不知道的。但无论如何，不​​支持任意标记扩展（如返回布尔值的自定义标记扩展）。

# html - 每 10 秒更改一次身体背景

> ID：15846551
> 
> 赞同：0
> 
> 时间：2013-04-06T02:58:41.553
> 
> 标签：html, css, background

我正在寻找一个非常简单和轻量级的代码，它每 10 秒更改一次网站的正文背景（它也可以与 css 一起使用），它应该是 jquery 和 css 的简单内容，对吧？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:19:38.773

您可以使用 JavaScript 的 setTimeout() 函数。这是一个如何使用它的示例。

对于 setTimeout()，您需要 2 个参数，一个是您的函数，另一个是整数，即超时将持续多长时间。

因此，对于您的实例，您可以执行以下操作：

```
$(function() {
    var newBg = ['img1.png', 'img2.jpg', 'img3.png'];
    var path="img/";
    var i = 0;

    var changeBg = setTimeout(function() {
        $('body').css({backgroundImage : 'url(' path + newBg[i] + ')'});
        if(i == newBg.length)
            i=0;
        else
            i++;
    }, 10000);
}); 
```

这将创建一个由路径指定的图像数组。因此，我创建了一个变量来检查你的 arrayList 的长度，以及你是否需要重置变量 i。

所以我希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T07:27:04.333

custom-background.js 是一个轻量级的 jQuery 插件，允许用户更改网站的默认背景并将选择的背景保存到本地存储。这个插件可以很容易地添加到任何网站或网络应用程序中，而不会影响网站的性能。

[https://github.com/CybrSys/custom-background.js](https://github.com/CybrSys/custom-background.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-21T14:12:52.157

您可以使用 jQuery 轻松做到这一点。

**一个简单的 JavaScript 函数，每 X 秒在两种颜色之间切换** function toggle_color(color1,color2,cycle_time,wait_time) {

```
setInterval(function first_color() {
    $("body").animate({
        backgroundColor: color1
    }, 1000, function () {
        setTimeout(change_color, wait_time);
    });
}, cycle_time);

function change_color() {
    $("body").animate({
        backgroundColor: color2
    }, 1000, function () {
        setTimeout(function () {}, wait_time);
    });
}
} 
```

您可以检查[在 Javascript 中每 X 秒更改一次背景颜色以](http://codezag.com/changing-background-color-every-x-seconds-javascript/)进行工作演示和解释。

# jquery - 在 iframe 上隐藏引荐来源网址

> ID：15846552
> 
> 赞同：14
> 
> 时间：2013-04-06T02:58:53.437
> 
> 标签：jquery, html, iframe

使用 iframe 时是否可以删除引荐来源网址？这里的情况：

我在[http://www.mywebsite.com](http://www.mywebsite.com)上有一个页面，其中有一个`<iframe>`。像这样：

```
<html>
 <head>...</head>
 <body>
  ...
<a href="#loadiframe">SHow Website</a>
  <iframe id="#loadiframe" src="http://www.iframetarget.tld">
  ...
 </body>
</html> 
```

我想 iframetarget.tld 不包含推荐人/看不到 mywebsite.com 是否正在加载他们的页面。

那可能吗？

注意：iframe 将使用 jQuery lightbox/colorbox 加载

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-08-27T22:24:26.417

这些答案都没有对我有用，但[MDN 的 iframe 参考](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#attr-referrerpolicy)声明设置`referrerpolicy`to`no-referrer`将完成此操作，并且对我有用。对旧浏览器的支持将受到打击或错过。

例子：

```
<iframe src="https://whatsmyreferer.com/" referrerpolicy="no-referrer" style="width: 100%; height: 300px;"></iframe>
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-10T08:01:50.223

```
<iframe id="#loadiframe" src='javascript:window.location.replace("http://www.iframetarget.tld")'> 
```

有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-18T13:06:29.303

使用带有 javascript 位置重定向的 iframe 可以工作：

```
<iframe style="display:none" src="javascript:parent.location.replace('http://www.whatismyreferer.com/'+(parent.location.hash||''))"> 
```

请注意，在某些使用 HTTP 的浏览器上，将始终发送*最后一个引用者，这将是拥有 iframe 的域。*使用 HTTPS（和有效证书）可确保在所有测试的浏览器上隐藏引荐来源网址。

# javascript - HTML & Javascript - 简单的英法词典

> ID：15846555
> 
> 赞同：0
> 
> 时间：2013-04-06T02:59:38.350
> 
> 标签：javascript, html, database, dictionary, local-storage

请忍受我完全缺乏编程知识。我的目标是发布一个**完全在本地运行的****简单**而**基本**的英法词典。它必须能够处理用户输入以在数百个条目中找到相应的*含义*、*用法*和*词源。*

 *****这是一个部分成功的尝试，**它只**返回含义：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="Style.css">
        <title>English-French Dictionary</title>
    </head>
    <body>
        <div id="result"></div>
        <script>
            if(typeof(Storage)!=="undefined")
            {
                localStorage.setItem('Apple','Pomme');
            }
            else
            {
                document.getElementById("result").innerHTML="Sorry, your browser does not support web storage...";
            }

            function myFunction()
            {
                var entryVal = document.getElementById("entryInput");
                var entryId = entryVal.value;
                var entryResult = localStorage.getItem(entryId);
                document.getElementById("result").innerHTML="Result: " + entryResult;
            }
        </script>
        <noscript>Sorry, your browser does not support JavaScript!</noscript>
        <input id="entryInput" type="text">
        <input type="button" value="Search" onClick="myFunction()">
    </body>
</html> 
```

因此，我的问题是如何启用多个结果？考虑到我糟糕的编程水平，有没有更好但更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:11:27.923

如果您能够提供英语单词、法语翻译、含义、用途和词源，您应该能够将其存储在 Javascript 中。然后在用户输入内容时进行查找。

例如，您将具有以下结构：

```
var words = {
    "apple": {
        translation: "Pomme",
        meaning: "fruit, red, sweet",
        use: "For eating",
        etymology: "From middle english Appel"
    },
    "bowling": {
        translation: "Blah blah",
        meaning: "sport",
        use: "For recreation",
        etymology: "Some old sport"
    }
}; 
```

您`myFunction`将执行查找：

```
function myFunction() {
    var entryVal = document.getElementById("entryInput");
    var entryId = entryVal.value.toLowerCase();
    if (entryId in words) {
        document.getElementById("result").innerHTML = "Translation: " + words[entryId].translation;
    } else {
        document.getElementById("result").innerHTML = "Not found";
    }
} 
```

这是假设您有能力生成这种信息结构（单词、翻译、含义、使用、词源）。

这是我的意思的演示：http: [//jsfiddle.net/Qsqqt/1/](http://jsfiddle.net/Qsqqt/1/)

我不确定您`localStorage`在代码中使用了什么，但似乎没有必要。*****

# windows - 基于 Windows 7 上的 Perl

> ID：15846560
> 
> 赞同：7
> 
> 时间：2013-04-06T03:00:08.310
> 
> 标签：windows, perl, locale, padre

我在 Windows 7 上安装了 Padre perl、perl IDE。每次运行程序时，我都会收到一条错误消息，

```
perl: warning: Setting locale failed.

perl: warning: Please check that your locale settings:

LC_ALL = (unset),

LANG = (unset)

are supported and installed on your system.

perl: warning: Falling back to the standard locale ("C"). 
```

我得到了输出，但是这个错误消息在每个输出的顶部。我厌倦了寻找这个问题的解决方案，有人能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:19:44.127

您需要将环境变量`LC_ALL`和`LANG`环境变量设置为`C`：

```
C:\>set LC_ALL=C
C:\>set LANG=C
C:\>perl x.pl 
```

如果您想使其永久化，或从您的 IDE 工作，请转到控制面板->系统和安全->系统->高级系统设置，然后在高级选项卡下，单击环境变量。然后，将 LC_ALL 和 LANG 添加到列表中。如果您对这些变量进行更改，您可能需要重新启动 IDE。

# java - Javav Sound 在运行时选择 DataLines 和 Ports

> ID：15846561
> 
> 赞同：0
> 
> 时间：2013-04-06T03:00:11.520
> 
> 标签：java, javasound

我了解 and 的概念，`TargetDataLine`并且`SourceDataLine`我编写了一个程序来列出它们以及每个`Ports`可用的 and `Controls`。对于测试程序，我有一个板载麦克风、一个板载扬声器、一个线路输入、一个扬声器插孔和一个带有两个输入和一个输出的音频接口。接口上的输入被视为左右输入，因此我不确定如果它们充当一个立体声输入，我将如何区分两者。

我希望能够选择`DataLine`我想在运行时用于录制或播放的。如何识别和分离输入和输出以列出它们并允许用户选择要使用的特定输入和输出？如果有人对将接口输入作为两个单声道输入处理有任何建议，那也会很有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:29:23.447

要将两条单声道线转换为立体声，需要将左右交错，一次一个“样本”。样本的大小取决于您的位深度。例如，16 位编码消耗两个字节。所以，从左边取两个字节，然后从右边取两个字节。重复行的持续时间。

可能有一些预构建的方法可以帮助您解决这个问题。查看 Java 声音教程部分中关于转换格式的部分——它就像声音教程的第 4 或第 5 部分，如果我没记错的话，它也恰好是最好的。（提供的实际示例代码，与这个非常困难的教程的其余部分不同。）

我不确定选择线路或端口与选择其他任何东西的编程有何不同。您制作一个列表，用户单击与该项目关联的按钮，或从下拉列表中选择该项目，然后将其插入。

我有一个特雷门，在那里我制作了一个菜单栏，允许人们选择混音器线。它只是用找到的混音器的名称填充一个单选按钮集。当您选择项目时，侦听器会指示您安装相关的混音器。

# ios - 如何在 iTunes Connect 中使用已删除的应用名称？

> ID：15846563
> 
> 赞同：7
> 
> 时间：2013-04-06T03:00:20.447
> 
> 标签：ios, app-store-connect

我在 iTunes Connect 中创建了一个应用程序，然后在将应用程序上传到商店之前删除了该应用程序。

当我尝试创建另一个具有相同名称的应用程序时（即使它现在已被删除），我收到来自 iTunes Connect 的警告：您输入的应用程序名称已被使用。

无论如何使用旧的应用程序名称？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T03:24:25.387

From the [iTunes Connect Developer Guide](https://developer.apple.com/library/content/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/TransferringAndDeletingApps.html#//apple_ref/doc/uid/TP40011225-CH31-SW37):

> **Important**: If you delete your app, you can’t restore it. The SKU or app name can’t be reused in the same organization. If you’ve uploaded a build, your bundle ID can’t be reused.

So no, you can't reuse the app name.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T06:03:49.163

我已经就类似的问题与 Apple Developer 支持人员进行了交谈，他们实际上破例并为我释放了这个名称。就我而言，我不小心让一个名称过期，并想在一年多后再次使用它。

苹果公司的好心人必须确认这个名字没有被使用，他们认为我没有“抢注”这个名字，但一旦他们这样做了，他们就把它还给了我。

这确实需要对他们进行某种特殊程序，并且必须将案件上报给经理，但我敢打赌，如果您给他们打电话（试试[这个号码](http://gethuman.com/phone-number/Apple-Developer-Support/)），他们可能会帮助您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-06T09:10:39.723

例如，将您的语言从英语我们更改为英语英国，将您的名字恢复为您想要的，保存。返回应用程序，将字段上的默认语言更改为新语言，一切顺利。

# c# - C#从文本文件中将变量读入静态字符串

> ID：15846566
> 
> 赞同：1
> 
> 时间：2013-04-06T03:01:18.327
> 
> 标签：c#, global-variables, text-files

我看过几篇文章给出了如何从文本文件中读取的示例，以及如何使字符串“公共”（静态或常量）的示例，但我无法将两者结合在一个“函数”中这对我来说很有意义。

我有一个名为“MyConfig.txt”的文本文件。在那，我有2行。

```
 MyPathOne=C:\TestOne
 MyPathTwo=C:\TestTwo 
```

我希望能够在启动表单时读取该文件，从而使 My​​PathOne 和 MyPathTwo 都可以从表单内的任何位置访问，使用如下所示：

```
ReadConfig("MyConfig.txt"); 
```

我现在尝试这样做的方式是这样的，但这是行不通的：

```
public voice ReadConfig(string txtFile)
{
    using (StreamReader sr = new StreamResder(txtFile))
    {
        string line;
        while ((line = sr.ReadLine()) !=null)
        {
            var dict = File.ReadAllLines(txtFile)
                           .Select(l => l.Split(new[] { '=' }))
                           .ToDictionary( s => s[0].Trim(), s => s[1].Trim());
        }
        public const string MyPath1 = dic["MyPathOne"];
        public const string MyPath2 = dic["MyPathTwo"];
    }
} 
```

txt 文件可能永远不会超过 5 或 6 行，而且我不会坚持使用 StreamReader 或字典。

只要我可以从任何地方按名称访问路径变量，并且不会添加 400 行代码之类的东西，那么我可以做任何最好、最安全、最快、最简单的事情。

我读过很多帖子，人们说数据应该存储在 XML 中，但我认为这部分真的没那么重要，因为读取文件和获取变量部分几乎都是一样的。除此之外，我宁愿能够使用某人（最终用户）无需了解 XML 即可编辑的纯 txt 文件。（这当然意味着对空行进行大量检查，路径是否存在等等......我可以做那部分，只是想让这部分先工作）。

我已经阅读了有关将 ReadAllLines 用于数组的不同方法，有人说要创建一个新的单独的“类”文件（我还不太了解……但正在研究它）。主要是我想找到一种“稳定”的方式来做到这一点。（顺便说一下，项目正在使用.Net4和Linq）

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:05:17.830

您需要在函数外部定义变量，以使其他函数可以访问它们。

```
public string MyPath1; // (Put these at the top of the class.)
public string MyPath2;

public voice ReadConfig(string txtFile)
{
    var dict = File.ReadAllLines(txtFile)
                   .Select(l => l.Split(new[] { '=' }))
                   .ToDictionary( s => s[0].Trim(), s => s[1].Trim());  // read the entire file into a dictionary.

    MyPath1 = dict["MyPathOne"];
    MyPath2 = dict["MyPathTwo"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:39:35.037

您提供的代码甚至无法编译。相反，你可以试试这个：

```
public string MyPath1;
public string MyPath2;

public void ReadConfig(string txtFile)
{
    using (StreamReader sr = new StreamReader(txtFile))
    {
        // Declare the dictionary outside the loop:
        var dict = new Dictionary<string, string>();

        // (This loop reads every line until EOF or the first blank line.)
        string line;
        while (!string.IsNullOrEmpty((line = sr.ReadLine())))
        {
            // Split each line around '=':
            var tmp = line.Split(new[] { '=' }, 
                                 StringSplitOptions.RemoveEmptyEntries);
            // Add the key-value pair to the dictionary:
            dict[tmp[0]] = dict[tmp[1]];
        }

        // Assign the values that you need:
        MyPath1 = dict["MyPathOne"];
        MyPath2 = dict["MyPathTwo"];
    }
} 
```

考虑到：

1.  您不能将公共字段声明为方法。

2.  您不能`const`在运行时初始化字段。相反，您在编译时为它们提供一个常量值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:12:41.363

知道了。谢谢！

```
 public static string Path1;
            public static string Path2;
            public static string Path3;

            public void ReadConfig(string txtFile)
            {
                using (StreamReader sr = new StreamReader(txtFile))
                {
                var dict = new Dictionary<string, string>();
                string line;
                while (!string.IsNullOrEmpty((line = sr.ReadLine())))
                {
                            dict = File.ReadAllLines(txtFile)
                           .Select(l => l.Split(new[] { '=' }))
                           .ToDictionary( s => s[0].Trim(), s => s[1].Trim());
                }
                Path1 = dict["PathOne"];
                Path2 = dict["PathTwo"];
                Path3 = Path1 + @"\Test";
                }
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-23T23:25:09.773

这个问题类似于*Get* [parameters out of text file](https://stackoverflow.com/questions/5174404/get-parameters-out-of-text-file/)

（我把答案放在那里。我“不能”把它贴在这里。）

（不确定我是否应该将此问题“标记”为重复。“标记”“关闭”。）

（重复的问题会合并吗？每个问题在 [通常是蹩脚的] 问题或 [影响力不足和力过大的] 答案的措辞中都有优点。合并后的版本可能是最好的，但合并很少是微不足道的。）

# codeigniter - DataTables TableTools 插件 - 如何在 Codeigniter 中配置 sSwfPath 路径？

> ID：15846567
> 
> 赞同：3
> 
> 时间：2013-04-06T03:01:19.160
> 
> 标签：codeigniter, datatables, tabletools

重新发布我[之前的问题](https://stackoverflow.com/questions/15802470/datatables-tabletools-not-able-to-find-the-path-for-sswfpath)，因为我没有得到任何满意的答案

问题如下：

我在 JSBin [http://live.datatables.net/aqowib/2](http://live.datatables.net/aqowib/2)中给出了我的代码，我无法正确链接到 sSwfPath。我在我的应用程序中使用 codeiginter，所以我尝试按如下方式加载文件：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
<script src="http://<?php base_url(); ?>/assets/js/jquery.dataTables.js" type="text/javascript"></script>
<script src="http://<?php base_url(); ?>/js/jquery.dataTables.columnFilter.js" type="text/javascript"></script>
<script src="http://<?php base_url(); ?>/media/js/ZeroClipboard.js" type="text/javascript"></script>
<script src="http://<?php base_url(); ?>/media/js/TableTools.js" type="text/javascript"></script> 
```

我的脚本标签包含以下代码：

```
$(document).ready(function(){
    var oTable = $('#datatables').dataTable({
        "sPaginationType":"full_numbers",
        "sDom": 'Tlfrtip',
        "oTableTools": {
            "sSwfPath": "<?php base_url();?>/media/swf/copy_cvs_xls_pdf.swf"
        },
        "sScrollX": "100%",
        "bScrollCollapse": true,
        "bAutoWidth": true,
        "aaSorting":[[0, "asc"]],
        "bJQueryUI":true
    }).columnFilter({
        aoColumns: [ null,
                     null,
                     { type: "select", values: [ 'male', 'female']  },
                     null,
                     null,
                     null,
                     null,
                     { type: "select", values: [ '1', '2', '3', '4', '5', '6', '7','8','9','10']  },
                     { type: "select", values: [ 'A', 'B', 'C']  },
                     null,
                     { type: "select", values: ['P', 'A'] },
                     null,
                     null,
                     null
            ]
    });
}); 
```

每次我收到 404 错误，提示无法加载 SWF 文件 - 请检查 SWF 路径

请帮助我我哪里错了？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T06:17:06.350

啊，得到解决方案！

您只需要在 TableTools.js 文件中配置 sSwfPath URL 即

更改 TableTools 初始化的默认设置

我来啦 ：

```
TableTools.DEFAULTS = {
    "sSwfPath":         "http://localhost/codegen/media/swf/copy_cvs_xls_pdf.swf", <----------------- HERE IS WHERE I GOT STUCK 
    "sRowSelect":       "none",
    "fnPreRowSelect":   null,
    "fnRowSelected":    null,
    "fnRowDeselected":  null,
    "aButtons":         [ "copy", "csv", "xls", "pdf", "print" ]
}; 
```

谢谢 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-27T04:38:10.023

无需编写完整路径只需在 base_url 之前放置 echo :) 更改

```
<?php base_url();?> 
```

至

```
<?php echo base_url();?> 
```

# ruby - Ruby 的 pdftk 包装器

> ID：15846569
> 
> 赞同：2
> 
> 时间：2013-04-06T03:02:53.410
> 
> 标签：ruby, pdf, gem, pdftk

pdftk 有几个 Ruby 包装器 gem。其中，是否有任何 gem 在安装时自动跨主要操作系统安装 pdftk 二进制文件？我想在一个库中需要它，我可以在我自己的机器上手动安装 pdftk，但我想避免我的库的用户被要求手动安装 pdftk 二进制文件的混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-04T23:17:21.373

为什么不使用[CombinePDF](https://github.com/boazsegev/combine_pdf)等原生解决方案...？

取决于您需要什么，它实际上可能会更好地为您服务。

# ftp - Ftp 客户端目录列表

> ID：15846574
> 
> 赞同：0
> 
> 时间：2013-04-06T03:03:21.653
> 
> 标签：ftp, ftp-client

我正在将 apache commons ftp 客户端库与我的 android ftp 客户端一起使用客户端在同一部手机上并登录我得到了目录列表。我不知道我在这里给出我用于此目的的代码的问题是什么。

```
private static FTPClient ftpClient=new FTPClient();;
void login(String host,String username,String password,int port)
    {
        try 
        {
            ftpClient.connect(host);
            ftpClient.login(username, password);
            ftpClient.changeWorkingDirectory("MyData");
            ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
            ftpClient.enterLocalPassiveMode();
        } catch (SocketException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    public ArrayList<File> getDirectoryListing()
    {       
        ArrayList<File> list=new ArrayList<File>();
        FTPFile[] files = null;

        try
        {

            Log.d(ftpClient.printWorkingDirectory(), "is working directory");
            files=ftpClient.listFiles();
            Toast.makeText(null, files[0].getName(), Toast.LENGTH_LONG).show();
            for(FTPFile f:files)
            {
                String s=f.getName();
                Log.d(s, "is file");
                File fs=new File(s);
                list.add(fs);
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return list;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T10:49:16.523

获取目录列表很容易，只需将您的电脑连接到互联网，然后转到提示命令，输入 ipconfig。它将列出 IPV4 地址。在主机名中使用该地址以及用户 ID 和密码。您将获得目录列表

# python - 为什么我的 python pygame 代码不起作用？

> ID：15846576
> 
> 赞同：1
> 
> 时间：2013-04-06T03:03:29.903
> 
> 标签：python, python-3.x, pygame

我正在观看 thenewboston [http://www.youtube.com/watch?v=9YWzFcHMz78&feature=share&list=EC8E21BDD0981FDF66](http://www.youtube.com/watch?v=9YWzFcHMz78&feature=share&list=EC8E21BDD0981FDF66)在 youtube 上的教程，我正在复制他的代码，但我的代码不起作用。每当我按下向下箭头键时，整个程序都会冻结，不会让我退出。我正在使用python 3.3。请帮忙。这是我的代码。

```
grey="grey.jpg"
circle="circle.png"

import pygame, sys
from pygame.locals import*

pygame.init()
screen=pygame.display.set_mode((1278,990),0,32)

background=pygame.image.load(grey).convert()
pic=pygame.image.load(circle).convert()

x,y=0,0
movex,movey=0,0

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type==KEYDOWN:
            if event.key==K_LEFT:
                movex=-1
            elif event.key==K_RIGHT:
                movex=+1
            elif event.key==K_UP:
                movey=-1
            elif event.key==K_DOWN:
                movey=+1
        if event.type==KEYUP:
            if event.key==K_LEFT:
                movex=0
            elif event.key==K_RIGHT:
                movex=0
            elif event.key==K_UP:
                movey=0
            elif event.key==K_Down:
                movey=0
    x+=movex
    y+=movey

    screen.blit(background, (0,0))
    screen.blit(pic,(x,y))

    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T04:31:28.053

快速运行代码：

```
$ python test1.py 
Traceback (most recent call last):
  File "test1.py", line 37, in <module>
    elif event.key==K_Down:
NameError: name 'K_Down' is not defined 
```

当程序在向下箭头按下时崩溃时会显示该错误。

崩溃是由于拼写错误，当它需要“K_DOWN”时你有“K_Down”。

更正的代码：

```
grey="grey.jpg"
circle="circle.png"

import pygame, sys
from pygame.locals import*

pygame.init()
screen=pygame.display.set_mode((1278,990),0,32)

background=pygame.image.load(grey).convert()
pic=pygame.image.load(circle).convert()

x,y=0,0
movex,movey=0,0

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type==KEYDOWN:
            if event.key==K_LEFT:
                movex=-1
            elif event.key==K_RIGHT:
                movex=+1
            elif event.key==K_UP:
                movey=-1
            elif event.key==K_DOWN:
                movey=+1
        if event.type==KEYUP:
            if event.key==K_LEFT:
                movex=0
            elif event.key==K_RIGHT:
                movex=0
            elif event.key==K_UP:
                movey=0
            elif event.key==K_DOWN:
                movey=0
    x+=movex
    y+=movey

    screen.blit(background, (0,0))
    screen.blit(pic,(x,y))

    pygame.display.update() 
```

# jsp - 使用浏览按钮将 excel 文件上传到 oracle 数据库

> ID：15846577
> 
> 赞同：0
> 
> 时间：2013-04-06T03:03:53.543
> 
> 标签：jsp, servlets

我正在将excel文件上传到数据库中。当我不使用浏览器直接提供文件路径时，代码工作正常。

但是当我通过浏览按钮上传 excel 文件时，它显示

```
filenotfoundexception:(access is denied)

<%@page import="org.apache.poi.ss.usermodel.Cell"%>
<%@page import="org.apache.poi.ss.usermodel.Row"%>
<%@page  language="java" import="java.sql.*"  contentType="text/html"  pageEncoding="UTF-8" %>
<%@ page import ="java.util.Date" %>
<%@ page import ="java.io.*" %>
<%@ page import ="java.io.FileNotFoundException" %>
<%@ page import ="java.io.IOException" %>
<%@ page import ="java.util.Iterator" %>
<%@ page import ="java.util.ArrayList" %>
<%@ page import ="org.apache.poi.hssf.usermodel.HSSFCell" %>
<%@ page import ="org.apache.poi.hssf.usermodel.HSSFRow" %><%@ page import ="org.apache.poi.hssf.usermodel.HSSFSheet" %>
<%@ page import ="org.apache.poi.hssf.usermodel.HSSFWorkbook" %>
<%@ page import ="org.apache.poi.poifs.filesystem.POIFSFileSystem" %>

<html>
<head>

<title>Excel File Uploading</title>
</head>
<body>

<jsp:useBean id="connection" class="pk1.DB_Connection" scope="application">
    <jsp:setProperty name="connection" property="*"/>
</jsp:useBean> 
<%!     
Connection con;
PreparedStatement ps=null;
public static ArrayList readExcelFile(String fileName)
{
    /** --Define a ArrayList
        --Holds ArrayList Of Cells
     */
    ArrayList cellArrayLisstHolder = new ArrayList();

    try{
    /** Creating Input Stream**/
        FileInputStream myInput = new FileInputStream(fileName);

    /** Create a POIFSFileSystem object**/
        POIFSFileSystem myFileSystem = new POIFSFileSystem(myInput);

    /** Create a workbook using the File System**/
        HSSFWorkbook myWorkBook = new HSSFWorkbook(myFileSystem);

     /** Get the first sheet from workbook**/
        HSSFSheet mySheet = myWorkBook.getSheetAt(0);

    /** We now need something to iterate through the cells.**/
        Iterator rowIter = mySheet.rowIterator();
            while(rowIter.hasNext())
            {
                HSSFRow myRow = (HSSFRow) rowIter.next();

                 Iterator cellIter = myRow.cellIterator();
                ArrayList cellStoreArrayList=new ArrayList();
                while(cellIter.hasNext())
                {
                  HSSFCell myCell = (HSSFCell) cellIter.next();
                  cellStoreArrayList.add(myCell);
                }
                    cellArrayLisstHolder.add(cellStoreArrayList);

             }

    }
    catch (Exception e){e.printStackTrace(); }
    return cellArrayLisstHolder;
}
%>

<%

String contentType = request.getContentType();

if ((contentType != null) && (contentType.indexOf("multipart/form-data") >= 0))

{

DataInputStream in = new DataInputStream(request.getInputStream());

int formDataLength = request.getContentLength();

byte dataBytes[] = new byte[formDataLength];

int byteRead = 0;

int totalBytesRead = 0;
while (totalBytesRead < formDataLength)

{

byteRead = in.read(dataBytes, totalBytesRead,formDataLength);

totalBytesRead += byteRead;
}
String file = new String(dataBytes);

String saveFile = file.substring(file.indexOf("filename=\"") + 10);

saveFile = saveFile.substring(0, saveFile.indexOf("\n"));

saveFile = saveFile.substring(saveFile.lastIndexOf("\\") + 1,saveFile.indexOf("\""));

out.println(saveFile);

int lastIndex = contentType.lastIndexOf("=");

String boundary = contentType.substring(lastIndex + 1,contentType.length());

int pos;

pos = file.indexOf("filename=\"");

pos = file.indexOf("\n", pos) + 1;

pos = file.indexOf("\n", pos) + 1;

pos = file.indexOf("\n", pos) + 1;

int boundaryLocation = file.indexOf(boundary, pos) - 4;

int startPos = ((file.substring(0, pos)).getBytes()).length;

int endPos = ((file.substring(0, boundaryLocation)).getBytes()).length;

FileOutputStream fileOut = new FileOutputStream(saveFile);

fileOut.write(dataBytes, startPos, (endPos - startPos));

fileOut.flush();

fileOut.close();

out.println(saveFile); 
```

.................................................................... ..................很快

```
**Error:**
type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

org.apache.jasper.JasperException: An exception occurred processing JSP page /excel.jsp at line 129

126: 
127: int endPos = ((file.substring(0, boundaryLocation)).getBytes()).length;
128: 
129: FileOutputStream fileOut = new FileOutputStream(saveFile);
130: 
131: fileOut.write(dataBytes, startPos, (endPos - startPos));
132: 

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:553)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:447)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)

root cause 

java.io.FileNotFoundException: super.xls (Access is denied)
    java.io.FileOutputStream.open(Native Method)
    java.io.FileOutputStream.<init>(FileOutputStream.java:179)
    java.io.FileOutputStream.<init>(FileOutputStream.java:70)
    org.apache.jsp.excel_jsp._jspService(excel_jsp.java:208)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:00:05.863

尝试提供一些其他目录路径而不是默认路径。

就像是

`String strUploadDir = "D:\\uploads\\"; \\valid directory on your server`

`\\ other stuff you are already doing.....`

`FileOutputStream fileOut = new FileOutputStream(strUploadDir + saveFile);`

我不知道它在哪里写入文件默认位置，但这应该可以。

PS 您应该使用 Servlet 来执行此操作，将 JSP 用于表示（视图）逻辑以外的其他操作不是一个好习惯。

# php - HTML get 方法不会将数据发送到 PHP

> ID：15846578
> 
> 赞同：0
> 
> 时间：2013-04-06T03:03:55.157
> 
> 标签：php, html, forms

我的表单中的数据不会发送到`search.php`.

```
<form class="form-search" action="search.php" method="get">
    <input type="text">
    <button type="submit">Search</button>
</form>

// search.php
<h2>Searched <?php print $_GET['username']; ?>; Returned 5 Results from Query.</h2> 
```

> 注意：未定义索引：第 40 行 C:\xampp\htdocs\Web\Statistics\search.php 中的用户名

因此，数据未设置在`$_GET`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:06:06.833

您需要在输入中添加名称

```
<input type="text" name='username' placeholder="Username" id="username" class="input-medium search-query"> 
```

$_GET 基于输入名称而不是 ID 工作。当您按下提交时会传递名称，ID 只是标识页面上的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:05:09.660

除了您指定的所有其他属性之外，您还需要 name="username"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T03:06:30.673

你的表格应该看起来像

```
 <form class="form-search" action="search.php" method="get">
      <fieldset>
      <input type="text" name="username" placeholder="Username" id="username" class="input-medium search-query">
      <button type="submit" id="srchUser" class="btn">Search</button>
      </fieldset>
  </form> 
```

我已添加到您的输入中`name="username"`，因此它可以通过使用输入项中的 name 属性将 get 变量发送到 php

# ide - sublime text 3、索引和goto符号/goto定义

> ID：15846579
> 
> 赞同：18
> 
> 时间：2013-04-06T03:04:04.513
> 
> 标签：ide, sublimetext2, sublimetext, sublimetext3

所以我下载了 sublime text 3，据称“Sublime Text 现在扫描您项目中的文件，并为哪些文件包含哪些符号建立索引。这支持了项目中的新功能 Goto Definition 和 Goto Symbol”。

我创建了一个包含 zend 框架源代码的新项目......然后我尝试执行 goto 定义和 goto 符号，但它们仍然只允许您在当前文件而不是整个项目中“转到”定义/符号。

我应该如何配置 sublime text 3 以便我可以将 goto 定义/符号用于项目中的任何方法，而不仅仅是当前文件（类似于 Eclipse 的`Ctrl`++ Open 方法功能）`Shift`。`M`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-27T12:24:09.087

首先，确保相关文件夹已添加到您的项目中，方法是检查它们是否出现在侧栏中`FOLDERS`（您可以使用`⌘</kbd>-`K` `⌘</kbd>-`B`). If the Zend folder isn't there, add it by going to `Project » Add Folder to Project...`.``

那么你应该使用`Goto » Goto Symbol in Project...`（或`⇧</kbd>-`⌘</kbd>-`R`). `Goto Definition` should search in the whole project. At least this is what it behaves like for me on Sublime 3 build 3019 for OS X.``

代替`⌘</kbd> with `CTRL` and `⇧</kbd> with `SHIFT` if on Windows.``

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-15T19:44:47.297

假设这不是快捷方式问题（您可以通过尝试从菜单中查找符号来测试）

尝试：

1.  退出 Sublime Text 3。
2.  清除 Sublime Text 3 Index 文件夹
    *   在 OS X 中，删除 ~/Library/Application Support/Sublime Text 3/Index 的内容
    *   在 Windows 中，删除 AppData\Local\Sublime Text 3\Index\ 的内容
3.  打开 ST3 和您的项目
    *   打开控制台（查看 -> 显示控制台）
    *   检查错误

很可能在第 3 步之后，您的项目将恢复正常，但如果不是在索引时检查问题是什么，并尝试搜索该特定问题。

编辑：根据项目的大小，重建缓存可能需要很长时间

# python - 附加到python列表前面的奇数字符

> ID：15846582
> 
> 赞同：2
> 
> 时间：2013-04-06T03:04:25.223
> 
> 标签：python

我在 linux 上运行 python 时遇到问题。我正在尝试学习 python，并想尝试解析一个小的 XML 文件并将标签和数据放入列表中。但是每次我运行代码时，我都会在列表中的每个元素上附加一个“u”。

```
[u'world']
defaultdict(<type 'list'>, {u'world': [u'data']}) 
```

我的代码如下：

```
import xml.sax

from collections import defaultdict

class TransformXML(xml.sax.ContentHandler):

def __init__ (self):
    self.start_tag_name = -1
    self.tag_data = -1
    self.myDict = defaultdict(list)
    self.tags = []

def startElement(self, name, attrs):
    self.start_tag_name = name
    print name
    print self.start_tag_name

def characters(self, content):
    if content.strip(' \r\n\t') != "":
        self.tag_data = content.strip(' \r\n\t')
        print self.start_tag_name
        self.tags.append(self.start_tag_name)
        self.myDict[self.start_tag_name].append(content.strip(' \r\n\t'))

def endElement(self, name):
    pass

def __del__ (self):
    if self.myDict:
        del self.myDict
        print "deleteing myDict" 
```

有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T03:22:27.713

那个“奇怪”的符号基本上意味着`string`or`character`是用 unicode 编码的

例如。如果我有一个字符串`Test`：

```
>>> unicode('Test')
u'Test'
>>> s = unicode('Test')
>>> type(s)
<type 'unicode'> 
```

文档[在这里](http://docs.python.org/2/howto/unicode.html)

总而言之，根据`python`文档，

> ... Unicode 字符串是一系列代码点，它们是从 0 到 0x10ffff 的数字。这个序列需要在内存中表示为一组字节（意思是从 0 到 255 的值）。将 Unicode 字符串转换为字节序列的规则称为编码。

# php - mysqli_fetch_array()、prepared statement 和 LIKE 语句

> ID：15846583
> 
> 赞同：0
> 
> 时间：2013-04-06T03:04:28.910
> 
> 标签：php, mysqli, prepared-statement

我正在尝试将 mysqli 准备好的语句与 LIKE 语句查询和通配符运算符一起使用。在调试完代码中的 echo 语句后，我可以看到我的 while 语句没有执行。你能看到我在这里做错了什么吗？

这是我第一次在这个论坛上提问，如果这不是一个好问题，我很抱歉；我花了 6 个小时试图让我的代码的准备好的语句部分工作，但我找不到任何线程来解决我的问题，这些问题并没有完全超出我的想象（例如，我[怎样才能准备好 MySQLi 的结果声明成关联数组？](https://stackoverflow.com/questions/994041/how-can-i-put-the-results-of-a-mysqli-prepared-statement-into-an-associative-arr?rq=1)）。我找到的最接近的两个是：

[在准备好的语句中使用通配符 - MySQLi](https://stackoverflow.com/questions/1352002/using-wildcards-in-prepared-statement-mysqli) 和将[PHP 准备好的语句与 LIKE 结合起来](https://stackoverflow.com/questions/661160/combine-php-prepared-statments-with-like)。

这是我的代码的相关摘录：

```
 //set up and execute queries
    $titleQuery = "SELECT keyframeurl, videoid, title, creationyear, sound, color, 
    duration, genre FROM openvideo WHERE title LIKE CONCAT ('%', ?, '%') 
    ORDER BY $order";

    if($stmt = mysqli_prepare($db, $titleQuery)){
        //bind parameters
        mysqli_stmt_bind_param($stmt, 's', $trimmedTitleSearch);
        //execute query
        mysqli_stmt_execute($stmt);
        //bind results
        mysqli_stmt_bind_result($stmt, $keyframeurl, $videoid, $title, $year, $sound, 
        $color, $duration, $genre); 
        //store result so num rows can be counted
        $result = mysqli_stmt_store_result($stmt);
        //fetch results 
        while ($row = mysqli_fetch_array($result, MYSQL_ASSOC)) {
            echo "<tr>";
                echo "<td><a href=\"".$row['keyframeurl']."\">".$row['videoid']."</a></td>";
                echo "<td>" . $row['title'] . "</td>";
                echo "<td>" . $row['year'] . "</td>";
                echo "<td>" . $row['sound'] . "</td>";
                echo "<td>" . $row['color'] . "</td>";
                echo "<td>" . $row['duration'] . "</td>";
                echo "<td>" . $row['genre'] . "</td>";
            echo "</tr>";   
        }
    }
    else {
    // Error 
    printf("Prepared Statement Error: %s\n", $db->error);
    } 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:02:35.627

您正在混合 2 种获取结果的样式。要么使用丑陋的 bind_result 方式（然后使用获取你的数据`fetch()`），要么尝试使用`get_result()`- 所以，你将能够使用`fetch_array()`（虽然不能保证）。

无论如何，只要摆脱所有这些混乱并使用 PDO。

```
$titleQuery = "SELECT keyframeurl, videoid, title, creationyear, sound, color, 
duration, genre FROM openvideo WHERE title LIKE CONCAT ('%', ?, '%') 
ORDER BY $order";

$stmt = $pdo->prepare($titleQuery);
$stmt->execute(array($trimmedTitleSearch));
$data = $stmt->fetchAll();

foreach ($data as $row ) {
    // the rest is the same as yours 
```

我希望你**正确地**清理了你的 $order 变量。最好的方法显然是通过占位符添加它，因此，您将需要一个允许它的库，例如[SafeMysql ：](https://github.com/colshrapnel/safemysql#safemysql)

```
$sql = "SELECT * FROM openvideo WHERE title LIKE CONCAT ?s ORDER BY ?n";
$data = $db->getAll($sql,"%$trimmedTitleSearch%", $order);
foreach ($data as $row ) {
    // the rest is the same as yours 
```

请注意代码量并与您目前使用的原始 API 调用负载进行比较

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:48:24.900

@您的常识-您会看到，allenbell_nc 没有必要像您推断的那样“……摆脱所有混乱并使用PDO”。仅仅因为您对带有准备好的语句的 mysqli 扩展有一个错误的印象，并不意味着其他人应该在稍有麻烦的情况下就取消它，而不是进行深入但痛苦的研究。毕竟，这就是 stackoverflow 的意义所在，不是吗？精心研究的答案..

@allenbell_nc - 要回答您的问题，我认为您的问题与您使用通配符之类的东西无关。问题在于您尝试使用 `mysqli_fetch_array()`. 这很可能会引发抱怨参数 1 ($result) 的错误，因为`mysqli_stmt_store_result()`用于稍后查找查询返回的行数的情况，因此它返回布尔值（true 或 false）而不是结果放。

INSTEAD，`mysqli_stmt_bind_result()`在执行调用之后使用，然后`mysqli_stmt_fetch()`在 while 条件中调用，最后`array_push()`在 while 条件主体中使用，这将帮助您存储并随后回显您的 ASSOCIATIVE 数组的内容。

**一个简单的例子**（Carson McDonald 先生提供的想法@[http://www.ioncannon.net/programming/889/php-mysqli-and-multiple-prepared-statements/][1]）：

...
$comments = array();

```
 $comment_stmt->bind_param('i', $post_id);
  if ($comment_stmt->execute())
  {
    $comment_stmt->bind_result($user_id);
    while ($comment_stmt->fetch())
    {
      array_push($comments, array('user_id' => $user_id));
      //Now you can go ahead and make use of $comments however you want, whether as    stored in an $_SESSION array variable or just to echo it out! As Demonstrated Below:

      $_SESSION = $comments;
      echo $_SESSION['user_id'];
    }
  } 
```

...

希望对您有所帮助，祝您好运-第一次提问，因为这也是我的第一次回答-您的项目。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T03:52:27.613

```
 echo "<td>" . $row['color'] . "</td>";
            echo "<td>" . $row['duration'] . "</td>";
            echo "<td>" . $row['genre'] . "</td>";
        echo "</tr>";       while ($row = mysqli_fetch_array($stmt, MYSQL_ASSOC)) 
```

或者 `while ($row = mysqli_stmt_fetch($stmt))`

编辑：

```
 mysqli_stmt_bind_result($stmt, $keyframeurl, $videoid, $title, $year, $sound, 
        $color, $duration, $genre); 
        //store result so num rows can be counted
        $result = mysqli_stmt_store_result($stmt);
        //fetch results 
        while (mysqli_stmt_fetch($stmt)) {
            echo "<tr>";
                echo "<td><a href=\"".$keyframeurl."\">".$videoid."</a></td>";
                echo "<td>" . $title . "</td>";
                echo "<td>" . $year . "</td>";
                echo "<td>" . $sound . "</td>";
                echo "<td>" . $color . "</td>";
                echo "<td>" . $duration . "</td>";
                echo "<td>" . $genre. "</td>";
        echo "</tr>";   
        } 
```

# iphone - 无法正确定位子视图

> ID：15846588
> 
> 赞同：1
> 
> 时间：2013-04-06T03:05:13.810
> 
> 标签：iphone, objective-c, uiview

我有一个名为 courseOptionsView 的子视图，我想在某些条件下使用按钮显示和隐藏它。当我使用滑动手势时，视图可以正常工作并正确定位，但是当我使用另一个按钮对该函数进行完全相同的调用时，它会重新定位它，但它会将其重新定位到它所在的原始位置，而不是我所在的坐标发送。：/我很难过。

*edit 似乎当我 ++ 或 -- 从 cHNumber 重置子视图时。有任何想法吗？

```
 IBOutlet UIView *courseOptionsView; 
- (IBAction)nextHole:(id)sender;
- (IBAction)showCourseOptionsView:(id)sender;
- (IBAction)hideCourseOptionsView:(id)sender;

//show and hide functions
-(void) showCourseOptions{
    if(activeRound){
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
        [UIView setAnimationDuration:1.0];
        [courseOptionsView setFrame:CGRectMake(50, 44, 200, 455)];
    }
}
-(void) hideCourseOptions{
    if(activeRound){
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
        [UIView setAnimationDuration:1.0];
        [courseOptionsView setFrame:CGRectMake(-200, 44, 200, 455)];
    }
}
// swipe calls
- (IBAction)showCourseOptionsView:(id)sender {
    [self showCourseOptions];
}

- (IBAction)hideCourseOptionsView:(id)sender {
    [self hideCourseOptions];
}
//button call
- (IBAction)nextHole:(id)sender
{
    int totalStrokes = 0;
    int totalPlusMinus = 0;
    //[courseOptionsView setFrame:CGRectMake(0, 44, 200, 455)];
    //[self showCourseOptions];

    //save current hole
    if(cHStrokes != [[currentRound objectForKey:[NSString stringWithFormat:@"hole%i",cHNumber]] intValue] ||
       cHPutts != [[currentRound objectForKey:[NSString stringWithFormat:@"hole%i_putts",cHNumber]] intValue]){
        [self saveCurrentHole];
    }
    // calculate and display +/- and strokes
    for (int i = 0; i < ([currentRound count]/2); i++){
        totalStrokes += [[currentRound objectForKey:[NSString stringWithFormat:@"hole%i",i+1]] intValue];
        totalPlusMinus += [[[selectedScoreCardData objectAtIndex:0] objectForKey:[NSString stringWithFormat:@"hole%i_par",i+1]] intValue];
    }
    totalPlusMinus = totalStrokes - totalPlusMinus;
    self.totalStrokesLabel.text = [NSString stringWithFormat:@"%i", totalStrokes];
    self.totalPlusMinusLabel.text = [NSString stringWithFormat:@"%i",totalPlusMinus];
        //set to next hole
    /*------------------- 
    |   SHOW VIEW HERE 
    --------------------*/
    if(cHNumber == 17){
        self.nextHoleButton.enabled = NO;
        [self showCourseOptions];
    }
    if(cHNumber == 1){
        self.prevHoleButton.enabled = YES;
    }
    cHNumber ++;
    self.cHNumberLabel.text = [NSString stringWithFormat:@"%i", cHNumber];
    [self populateScoreCard];
    [strokePickerView reloadAllComponents];
    if(([currentRound count]/2) < cHNumber){

        [strokePickerView selectRow:cHStrokes - 1 inComponent:0 animated:YES];
        [strokePickerView selectRow:0 inComponent:1 animated:YES];
    }else{
        [strokePickerView selectRow:[[currentRound objectForKey:[NSString stringWithFormat:@"hole%i",cHNumber]] intValue] - 1 inComponent:0 animated:YES];
        [strokePickerView selectRow:[[currentRound objectForKey:[NSString stringWithFormat:@"hole%i_putts",cHNumber]] intValue] inComponent:1 animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:02:05.497

我认为也许在您定位视图之后，您正在调用另一个再次更改布局的函数。一个可能的候选人是`populateScoreCard`。

# java - 以 10 个字符为一组的序列

> ID：15846595
> 
> 赞同：0
> 
> 时间：2013-04-06T03:05:46.783
> 
> 标签：java, eclipse, applet, sequence, stringbuffer

我正在处理这项任务，我想知道如何一次显示 10 个字符的序列。

下面是工作程序截图： ![在此处输入图像描述](https://i.stack.imgur.com/CysgS.png)

我想在输出框中分组 10 个字符，例如：

> ```
> 1 CTCTAACGCG CAAGCGCATA TCCTTCTAGG
> 61 .... 
> ```

除空格和数字外，每行大约有 60 个字符，因此必须有 6 组，每组 10 个字符。

以下是我为显示此输出而编写的代码：

```
public void dispLines() {
    // Get the selected value of characters per line and assign it to noc variable
    String noc = numOfChar.getSelectedItem().toString();
    // Call StringBuffer object and assign sb variable to it
    StringBuffer sb = new StringBuffer();
    // Assign raw dna data to dna variable, where string will be mutated
    String dna = rawDNAInput.getText();
    // Create newdna variable to store the newly created data
    String newdna = "";
    // Loop through the size of raw dna
    for (int i = 0 ; i < dna.length (); ++i)
    {
        // Assign every single character to StringBuffer sb
        sb.append(dna.charAt (i));              
    }       
    // Assign the StringBuffer sb values to the newdna variable
    newdna = sb.toString();
    // Recall StringBuffer object, so new data can be assigned
    sb = new StringBuffer();
    // Assign start varaible of 0
    int start = 0;
    // Assign end varaible to be start + number of characters per line
    int end = start + Integer.parseInt(noc);
    // Keep looping till end value is less than the length of the dna
    while(end < newdna.length())
    {
        // Append values into StringBuffer sb varaible by calling makeNumberedStr method
        sb.append(makeNumberedStr(newdna.substring(start, end), start + 1));
        // Increment start variable by the selected numbers of characters per line
        start += Integer.parseInt(noc);
        // Increment end variable by the selected numbers of characters per line
        end += Integer.parseInt(noc);
    }
    // Append values into StringBuffer sb varaible by calling makeNumberedStr method
    sb.append (makeNumberedStr (newdna.substring (start), start + 1));
    String result = sb.toString();
    for(int i = 0; i < result.length(); i++) {

    }
    // Check to make sure uppercase is selected, if it is then make every character uppercase, else make them lowercase
    if(upperCase.isSelected()) {
        DNAOutput.setText(result.toUpperCase());
    } else if(lowerCase.isSelected()) {
        DNAOutput.setText(result.toLowerCase());
    }  
}

/*
 * makeNumberedStr
 * This method only displays required number of characters per line
 * @parameters String x and integer num
 * @returns new StringBuffer value
 */
private String makeNumberedStr (String s, int num)
{
    // makes and returns a string composed from left to right of:
    //   a 6 character field containing right justified [num] followed by 2 spaces
    //   the string s followed by \n
    // Call new StringBuffer object and give it a length of raw dna + 8
    StringBuffer sb = new StringBuffer (s.length ());
    // Create nstr String varaible and give it value of num
    String nstr = String.valueOf (num);
    // Loop through the nstr length and append blank space
    for (int i = 0 ; i < 6 - nstr.length () ; ++i)
        sb.append (' ');
    // Check if display number is selected, or else do not display number on every line
    if(indexNum.isSelected() == true)
        sb.append (nstr + "  ");
    // Append s value to String Buffer
    sb.append (s);
    // Append new line to StringBuffer
    sb.append ('\n');        
    // Return StringBuffer text
    return sb.toString();
} 
```

谢谢，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:53:02.677

运行这个程序，所以你有一个长字符串“s”，然后我只需添加代码（它会自动计算字符的数量，当它数到十时，它会自动在,,之间放置空格），这将帮助你每十个字符后添加空格，即使您不需要计算它们...

```
public class PracticeOne {

public static void main(String [] args)
{
    String s = "aaaaaaaaaaaaaaaaaaaaaaaaa";
    System.out.println(s.replaceAll(".{10}", "$0 "));

}
     } 
```

结果是

啊啊啊啊啊啊啊啊啊

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:51:31.917

不使用正则表达式（这是 Akshay GOel 的答案的产生方式），我们可以使用如下方法向 StringBuffer 添加空格。我认为您在每行的开头使用 5 或 6 个字符作为数字。

```
//Inserts spaces every 10 characters.
//@parm from The index of the buf to begin counting to insert the spaces.
private static void addSpaces(StringBuilder buf, int from) {
   for(int i=from+10; i<buf.length(); i+=11) {
      buf.insert(i,' ');
      // i++;
   }
} 
```

# c# - 当我只想更新主模型时，保存模型是级联更新

> ID：15846598
> 
> 赞同：0
> 
> 时间：2013-04-06T03:06:26.993
> 
> 标签：c#, entity-framework-4, asp.net-web-api, repository-pattern, automapper-2

我正在使用 C# Web API，并且正在使用存储库标准保存到数据库。下面是我用来更新数据库的简短示例。因此，我使用 automapper 在用户与 getuser 区域之间进行扁平化。因此，当我尝试使用 UpdateUser 模型更新例如用户名时。我使用 automapper 从 updateuser 映射到用户。当我尝试保存时，它总是给我更新区域的错误。我相信我需要 User 模型中的区域，因为我需要它在 User 之间自动映射到 getUser 并获取区域。

我不想更新区域。我不明白如何从这个前进。让我知道我是否可以这样做以及解决方案是什么。

```
public class User
{
    public int UserID { get; set; }
    public String username { get; set; }
    public virtual Region Region { get; set; }
}

public class GetUser
{
    public int UserID { get; set; }
    public String username { get; set; }
    Public String Region{get; set;}
}

public class UpdateUser
{
    public int UserID { get; set; }
    public String username { get; set; }
    Public String RegionID{get; set;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T05:21:41.617

从做更多的研究。我发现下面的自动地图会忽略自动地图中的区域，因此用户可以从数据库中提取该区域。这是推荐的方式吗？以下是我用于自动映射的内容：

```
 Mapper.CreateMap<UpdateUser, User>().ForMember(x => x.Region, opt => opt.Ignore()); 
```

# c# - 向 MsAccess 异步插入记录

> ID：15846599
> 
> 赞同：1
> 
> 时间：2013-04-06T03:06:30.573
> 
> 标签：c#, winforms, ms-access

我想在 MsAccess 数据库中插入 2000 条记录。它工作正常，但由于插入过程，它在我的表单中延迟了大约 3 秒。有没有办法让表单不延迟，所以不必等待插入过程完成来执行下一条语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T03:23:51.077

有很多方法可以通过使用 ui 线程以外的线程来实现。我建议查看[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)、[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)或[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。

这些链接中的每一个都将导致大量示例，说明如何完成您正在尝试做的事情。

# php - 简单的 php 函数来完成复杂的数学运算？

> ID：15846601
> 
> 赞同：-1
> 
> 时间：2013-04-06T03:06:33.430
> 
> 标签：php, math

我需要一个简单的函数来为我的输入做一些数学运算，以生成最大数量的固定值..
我知道数学而不是函数本身，但我不知道如何创建这种数学..
下面我写了一个数学的简单逻辑
假设我们有一个对象，它将花费固定数量的 4 个元素，像这样

```
<?php
$a = 140 ;
$b = 180 ;
$c= 85 ;
$d = 110 ;
?> 
```

和 4 个这样的输入：

```
<?php
$w = 14000 ;
$x = 1000 ;
$y = 800 ;
$z = 1100 ;
?> 
```

如果我们将对象的成本与输入进行比较，我们会注意到对于 $a 与 $w 我们可能会创建 10 个对象......
但对于 $b 与 $x 它不能创建超过 5 个对象。
我需要做的是在彼此之间分配或分离 4 个输入中的数字，以获得前 4 个值的最大结果。
实际上我不知道 PHP 中是否有一些预定义的函数可以做到这一点，或者我应该手动创建一些数学。
如果不是，我将需要任何想法来创建这种数学

**更新**
我从 stockoverflow 数学网站得到了这个公式，但不知道如何在 PHP 中应用它。
![](https://i.stack.imgur.com/D0ANf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:58:17.830

像这样的东西适合你吗？

```
$costs = array(140,180,85,110);
$avaliable = array(14000,1000,800,1100);
$i = 0;  
while($i < count($costs)):
$max[] = floor($avaliable[$i]/$costs[$i]);
$i++;
endwhile; 
```

输出：数组（ [0] => 100 [1] => 5 [2] => 9 [3] => 10 ）

# jquery - jQuery从同一个类名中选择第一个对象

> ID：15846603
> 
> 赞同：1
> 
> 时间：2013-04-06T03:06:55.190
> 
> 标签：jquery, html, jquery-selectors

有一些列表具有相同的类。我想显示列表中的第一个元素

```
<ul class="datas">
    <li class="data-smh1">abc</li>
    <li class="data-smh1">dd</li>
    <li class="data-smh1">cc</li>
    <li class="data-sc33">abc</li>
    <li class="data-sc33">dd</li>
    <li class="data-nn61">abc</li>
    <li class="data-nn61">dd</li>
</ul> 
```

结果：

```
<ul class="datas">
    <li class="data-smh1">abc</li>
    <li class="data-sc33">abc</li>
    <li class="data-nn61">abc</li>
</ul> 
```

我试过**$('class[name^="data-"]'**，但我找不到任何解决方案。
任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T03:35:43.717

尝试

```
$(function(){
    $('.datas').children().each(function(i, v){
        var $this = $(this);
        $this.siblings('.' + $this.attr('class')).remove()
    });
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/f9a8V/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:21:59.363

```
<ul class="datas">
    <li class="data-smh1">abc</li>
    <li class="data-smh1">dd</li>
    <li class="data-smh1">cc</li>
    <li class="data-sc33">abc</li>
    <li class="data-sc33">dd</li>
    <li class="data-nn61">abc</li>
    <li class="data-nn61">dd</li>
</ul> 
```

[查询](http://jsfiddle.net/GwQhS/1/)

```
$(document).ready(function(){
    var seen = {};
    $('.datas li').each(function(){
    //alert($(this).text());
    var txt = $(this).attr('class');
     if (seen[txt])
        $(this).remove();
    else
        seen[txt] = true;

    })
  }); 
```

结果

```
<ul class="datas">
    <li class="data-smh1">abc</li>

    <li class="data-sc33">abc</li>

    <li class="data-nn61">abc</li>

</ul> 
```

[JSFILDDEL 链接](http://jsfiddle.net/GwQhS/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T03:43:47.167

你可以试试这个：

```
$(document).ready(function(){
    var curr_class = '';
    var ctr = 0;    

    $('.datas li').each(function(){
        if (curr_class !== $(this).prop('class')){
            curr_class = $(this).prop('class');
            ctr = 0;
        }
        if (ctr !== 0 ){
            $(this).remove();
        }
        ++ctr;
    });

}); 
```

[jsFiddle](http://jsfiddle.net/hBawt/1/)

# php - php从foreach循环中获取总和

> ID：15846606
> 
> 赞同：-1
> 
> 时间：2013-04-06T03:07:21.250
> 
> 标签：php, algorithm, foreach

嗨，对于以下情况，如何从 foreach 循环中获取总和：

```
price = Array
(
    [0] => Array
        (
            [0] => 100
            [1] => 200
        )

    [1] => Array
        (
            [0] => 300
            [1] => 400
        )
) 
```

我怎样才能得到每个元素的平均值和？我需要补充

```
avg1 = price[0][0] + price[1][0] .... + price[N][0]
avg2 = price[0][1] + price[1][1] .... + price[N][1] 
```

然后除以元素数。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T03:12:50.703

试试这个

```
<?php

 $price = array
(
    0 => array
        (
            0 => 100,
            1 => 200,
        ),

    1 => array
        (
            0 => 300,
            1 => 400,
        )
);
$a = 0;
$b = 0;
$i  = 0;
foreach($price as $p)
{
    $a += $p[0];
    $b += $p[1];
    $i++;
}
echo 'Avg of a= '. ($a/$i).PHP_EOL;
echo 'Avg of b= '. ($b/$i).PHP_EOL;
?> 
```

这是一个简单的线索....您可以按照自己的想法构建它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:35:13.493

```
<?php
$price = array();
$price[0][0] = 100;
$price[0][1] = 200;
$price[1][0] = 300;
$price[1][1] = 400;
$price[2][0] = 500;
$price[2][1] = 600;

$sum1 = 0; $sum2 = 0;
$count1 = 0; $count2 = 0;

foreach($price as $array){
   if (isset($array[0])){
      $sum1+=$array[0];
      $count1++;
   }
   if (isset($array[1])){
      $sum2+=$array[1];
      $count2++;
   }
}

$ave1 = sprintf("%2.f", $sum1/$count1);
$ave2 = sprintf("%2.f", $sum2/$count2);
print "$ave1\n$ave2\n\n";
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T05:09:25.023

```
for($i =0; $i < count($i): $i++){
   $avg = 0;
   for($j =0; $i < $j: $j++){
        $avg = $avg + $price[$j][$i] ;        
   }
   echo "avg$i: $avg";
} 
```

# javascript - 如何计算可见高度？

> ID：15846610
> 
> 赞同：3
> 
> 时间：2013-04-06T03:08:38.113
> 
> 标签：javascript, jquery, html, css

我有一个类似于以下模型的 html 页面，

当用户滚动页面时，如何计算#page1 可见部分的高度？

```
-------------------------------------------------------
 #heder (position: fixed; height: 100px, z-index: 10)
-------------------------------------------------------

                     visible zone

 ____________________________________________________
 |                                                  |
 |                  #page1 (visible)                |
 |                                                  |
 |  (position: static; height: 1000px, z-Index: 0)  |
 |                                                  |
-------------------------------------------------------
 #footer (position: fixed; height: 50px, z-index: 10)
-------------------------------------------------------
 |                                                  |
 |                                                  |
 |                                                  |
 |                                                  |
 |                  #page1 (invisible)              |
 |                                                  |
 |                                                  |
 |                                                  |
 |                                                  |
 ____________________________________________________
 |                                                  |
 |                                                  |
 |                                                  |
 |                  #page2 (invisible)              |
 |                                                  |
 |  (position: static; height: 700px, z-Index: 0)   |
 |                                                  |
 |                                                  |
 |                                                  |
 |                                                  |
 |                                                  |
 ____________________________________________________ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:54:44.613

`window.top`您可以通过在 jQuery 中使用来获取最外层窗口的高度。的高度`window.top`将获得浏览器窗口或其中的 iframe 的高度。

```
$(window.top).height(); 
```

# ruby-on-rails - 此代码是否可以用于包含在 rspec 的帮助文件中？

> ID：15846614
> 
> 赞同：0
> 
> 时间：2013-04-06T03:09:04.097
> 
> 标签：ruby-on-rails, rspec

我有以下使用 vanilla spec_helper 的示例代码。我正在尝试使用 sign_in_as，但收到一条错误消息，指出它不存在。我之前并没有真正看过这个配置语法，所以我不确定它是否被正确使用。任何帮助，将不胜感激？谢谢

在 helpers/sign_in_helpers.rb

```
module SignInHelpers
  def say_hello
    puts 'hello'
  end

  def sign_in
    sign_in_as 'person@example.com'
  end

  def sign_in_as email
    visit root_path
    fill_in 'Email address', with: email
    click_button 'Sign In'
  end
end     

RSpec.configure do |config|
  config.include SignInHelpers
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:09:59.667

理论上，是的。您的调用看起来像是对 include 语法的有效使用

[https://www.relishapp.com/rspec/rspec-core/docs/helper-methods/define-helper-methods-in-a-module](https://www.relishapp.com/rspec/rspec-core/docs/helper-methods/define-helper-methods-in-a-module)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:47:46.237

您的代码中有一些错误。

1.  你应该在文件顶部有这个代码

    需要'spec_helper'

2.  放置文件的地方是`spec/support`，不是`spec/helpers`

此外，对于以下代码，最好将它们全部保存在配置块内的 spec/spec_helper.rb 中，尽管您的方式也应该有效。

```
RSpec.configure do |config|
  config.include SignInHelpers
end 
```

顺便说一句，最好将类型定义为您的助手仅用于功能，并且不适用于控制器测试。

```
config.include SignInHelpers type: :feature 
```

# jquery - jQuery如何绑定div中的所有锚点

> ID：15846616
> 
> 赞同：0
> 
> 时间：2013-04-06T03:09:13.693
> 
> 标签：jquery, html, events

我`<a>`在此 div 上的每个上绑定单击事件时遇到问题：

```
<div id="box_list_menu" class="boxlistmenu">
    <a href="/profile/00000000-0000-0000-0000-000000000001/grantAccessToPrivatePhotos/index.php?tid=${ID}&un=${Name}" id="${ID}_grantAccessPrivatephotos" rel="link" class="boxlistmenu_grantaccessprivatephotos" title="Donner accès à vos photos privées"></a>
    <a href="/profile/00000000-0000-0000-0000-000000000001/denyAccessToPrivatePhotos/index.php?tid=${ID}&un=${Name}" id="${ID}_denyAccessPrivatephotos" rel="link" class="boxlistmenu_denyaccessprivatephotos" title="Retirer l'accès à vos photos privées"></a>
    <a href="/profile/00000000-0000-0000-0000-000000000001/block/index.php?tid=${ID}" id="${ID}_unblock" rel="link" class="boxlistmenu_block" title="Bloquer ce membre"></a>
    <a href="/profile/00000000-0000-0000-0000-000000000001/unblock/index.php?tid=${ID}" id="${ID}_block" rel="link" class="boxlistmenu_unblock" title="Débloquer ce membre"></a>
    <a href="/profile/report/00000000-0000-0000-0000-000000000001/index.php?tid=${ID}&un=${Name}" rel="link" class="boxlistmenu_report" title="Signaler ce profil à un administrateur"></a>
</div> 
```

这是我的jQuery代码：

```
container.find('#box_list_menu:a').bind("click", function (e) {
    e.stopPropagation();
    var t = this.id.split("_");
    var profileID = t[0];
    var action = t[1];
    var btn = $(this);
    btn.trigger("blur").attr("disabled", "disabled").addClass("inactive").find("b").html(bscTexts.search.pleaseWait);
    alert("boxlist_menu action = " +action+ " e = " +e);
    switch (action) {
        case "block":
            bsc.event.addListener(bsc.menu.listenerTypes.block, "profile", function (e) {
                $("#" + profileID + "_block").hide();
                $("#" + profileID + "_unblock").show();

                btn.removeAttr("disabled").removeClass("inactive").find("b").html(btn.attr("title"));
            });
            bsc.menu.BlockProfile(e, profileID);
            break;
        case "unblock":
            bsc.event.addListener(bsc.menu.listenerTypes.unblock, "profile", function (e) {
                $("#" + profileID + "_unblock").hide();
                $("#" + profileID + "_block").show();
btn.removeAttr("disabled").removeClass("inactive").find("b").html(btn.attr("title"));
            });
            bsc.menu.UnblockProfile(e, profileID);
            break;
        case "grantAccessPrivatephotos":
            bsc.event.addListener(bsc.menu.listenerTypes.grantAccessPrivatephotos, "profile", function (e) {
                $("#" + profileID + "_grantAccessPrivatephotos").hide();
                $("#" + profileID + "_denyAccessPrivatephotos").show();
btn.removeAttr("disabled").removeClass("inactive").find("b").html(btn.attr("title"));
            });
            bsc.menu.GrantAccessToPrivatePhotos(e, profileID);
            break;
        case "denyAccessPrivatephotos":
            bsc.event.addListener(bsc.menu.listenerTypes.denyAccessPrivatephotos, "profile", function (e) {
                $("#" + profileID + "_denyAccessPrivatephotos").hide();
                $("#" + profileID + "_grantAccessPrivatephotos").show();
btn.removeAttr("disabled").removeClass("inactive").find("b").html(btn.attr("title"));
            });
            bsc.menu.DenyAccessToPrivatePhotos(e, profileID);
            break;
        default:
    }
    return false;
}); 
```

只有 a href 被执行，永远不要进入容器。发现我的警报弹出窗口永远不会打开，开关盒永远不会执行，我的 addListener 永远不会添加！

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T03:30:29.423

您正在使用 jquery >= 1.7，请使用[.on()](http://api.jquery.com/on/)

```
$('#box_list_menu').on('click', 'a', function(e){
    //Do whatever you want
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:19:31.410

问题似乎是您的选择器，`box_list_menu:a`. 这将选择任何`box_list_menu`满足`:a`psuedoclass 的元素（在 css 或 jQuery 中不存在）。你想要的选择`a`元素下的任何元素 id `box_list_menu`。

改用这个

```
container.find('#box_list_menu a').bind(...) 
```

要不就

```
$('#box_list_menu a').bind(...) 
```

注意 and 之间的空格`#box_list_menu`——这意味着`a`选择.`a``#box_list_menu`

**延伸阅读**

*   [选择器 | jQuery API 文档](http://api.jquery.com/category/selectors/)

# c++ - 为什么 LOAD DATA LOCAL INFILE 可以在 CLI 中工作，但不能在应用程序中工作？

> ID：15846618
> 
> 赞同：0
> 
> 时间：2013-04-06T03:09:14.863
> 
> 标签：c++, mysql, linux

问题：

我的 C++ 应用程序连接到 MySQL 服务器，读取每个 db export.txt 的第一行/标题行，创建一个创建表语句以准备导入并针对数据库执行该语句（没问题，该表按预期显示) -- 但是当我尝试执行 LOAD DATA LOCAL INFILE 将数据导入新创建的表时，我收到错误“此 MySQL 版本不允许使用的命令”。但是，这适用于 CLI！当我在 CLI 上执行此命令时，`mysql -u <user> -p<password> -e "LOAD DATA LOCAL INFILE 'myfile.txt' INTO TABLE mytable FIELDS TERMINATED BY '|' LINES TERMINATED BY '\r\n';"`它可以完美运行吗？

情况：

我的公司每月从我们的供应商那里获得大量的数据库导出（160 个文件/10gb 的 .txt 文件，以“|”分隔），这些文件必须替换旧的供应商列表。我正在开发一个小型 C++ 应用程序来在我的工作桌面上处理它。该应用程序旨在设置所需的表，导入数据，然后对多个表执行一系列中间查询，以将信息组装到一系列最终表中，然后将其本身导出并上传到生产环境，以用于公司电子商务网站。

我的设置：

Ubuntu 12.04

MySQL Server v. 5.5.29 + MySQL 命令行客户端

Linux GNU C++ 编译器

libmysqlcppconn 已安装，并且我已链接所需的 mysqlconn 库。

我已经克服/尝试了以下问题/组合：

1.) 我已经发现（艰难的方式）必须在配置中启用 LOAD DATA [LOCAL] INFILE 语句——我在客户端和服务器的配置文件中都设置了“local-infile”选项。（通过使用客户端和服务器的“local-infile”语句更新 /etc/mysql/my.cnf 来修复。注意：我可以使用 --local-infile=1 重新启动 mysql-server，但这是我的本地开发环境，所以我只想让它永久打开）

2.) 如果目标导入文件未启用执行权限（使用 chmod +x target_file.txt 修复），则 LOAD DATA LOCAL INFILE 似乎无法执行导入（从 CLI）

3.）我在我的应用程序代码中使用 mysql root 帐户（因为它是我的本地主机，而不是生产环境，并且这个特定的程序永远不会在生产服务器上运行。）

4.）我尝试使用 sudo 命令执行我编译的二进制程序（没有变化，同样的错误“这个 MySQL 版本不允许使用的命令”）

5.）我尝试将二进制文件的所有权从我的正常登录更改为 root（没有更改，同样的错误“此 MySQL 版本不允许使用使用的命令”）

6.) 我知道 libcppmysqlconn 正在工作，因为我能够毫无问题地连接并执行 CREATE TABLE 调用，并且我可以执行其他查询并执行语句

我错过了什么？有什么建议么？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:21:23.217

在使用 /etc/mysql/my.cfg 文件进行大量尝试和错误之后（我知道这是一个权限问题，因为它可以在命令行上工作，但不能从连接器上工作）并且经过大量谷歌搜索并找到一些后巷技术支持帖子 我得出的结论是 MySQL C++ 连接器没有（无论出于何种原因）决定实现开发人员能够允许来自 C++ 连接器的 local-infile=1 选项的能力。

显然，有些人已经能够破解/分叉 MySQL C++ 连接器以公开该功能，但没有人发布他们的源代码——只说它有效。显然，在初始化连接后，MySQL C API 中有一个解决方法，您将使用它：

```
mysql_options( &mysql, MYSQL_OPT_LOCAL_INFILE, 1 ); 
```

这显然允许 LOAD DATA LOCAL INFILE 语句与 MySQL C API 一起使用。

以下是一些使我得出这个结论的参考文章：

1.)[如何从 MySQL Connector/C++ 获取本机 C API 连接结构？](https://stackoverflow.com/questions/14409848/how-can-i-get-the-native-c-api-connection-structure-from-mysql-connector-c)

2.) [Mysql 5.5 LOAD DATA INFILE 权限](https://stackoverflow.com/questions/13133002/mysql-5-5-load-data-infile-permissions)

3.) [http://osdir.com/ml/db.mysql.c++/2004-04/msg00097.html](http://osdir.com/ml/db.mysql.c++/2004-04/msg00097.html)

本质上，如果您希望能够从编程连接器 API 中使用 LOAD DATA LOCAL INFILE 功能——您必须使用 mysql C API 或 hack/fork 现有的 mysql C++ api 来公开连接结构。或者只是坚持从命令行执行 LOAD DATA LOCAL INFILE :(

# octal - 八进制数方程

> ID：15846621
> 
> 赞同：0
> 
> 时间：2013-04-06T03:09:44.873
> 
> 标签：octal

所以我正在读一本关于如何将二进制位转换为八进制数的书。当试图解释这个概念时，他们给出了这个等式

N= S(...((d8)2^8+(d7)2^7+(d6)2^6)+((d5)2^5+(d4)2^4+(d3)2^ 3)+((d2)2^2+(d1)2^1+d0))

或者

N= S(...((d8)2^2 +(d7)2+(d6))2^6 + ((d5)2^2 +(d4)2^1 + (d3))2^3 + ((d2)2^2+(d1)2^1+d0))

d 表示在位中找到的数字，例如，如果最低有效位为 1，则 (d0) 将为 1。

我理解所有这些，但他们进一步详细说明括号表达式 ((d8)2^2 +(d7)2+(d6)) 是基数 8 位的系数，N=S((d2)8^2+ (d1)*8+(d0))。

有人可以解释括号中的表达式是 base8 数字的系数是什么意思吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T03:41:40.173

数字*d [i]*是数字的二进制数字。我们可以从它的二进制数字中计算出这个数字，如下所示：

    *n* = ∑ [*i*] 2 ^(*i*) *d [i]* = 2 ⁰ *d* [0] + 2 ¹ *d* [1] + 2 ² *d* [2] + ⋯

（这实际上是定义“二进制”的原因，如果我们添加数字是整数并且 0 ≤ *d [i]* < 2 对于所有*i*的条件。）

*假设我们命名数字o [j]*的八进制数字。我们可以像这样从它的八进制数字计算数字：

    *n* = ∑ [*j*] 8 ^(*j*) *o [j]* = 8 ⁰ *o* [0] + 8 ¹ *o* [1] + 8 ² *o* [2] + ⋯

（这就是“八进制”的定义，如果我们添加数字是整数并且 0 ≤ *o [j]* < 8 对于所有*j*的条件。）

现在让我们回顾一下二元方程。第一步是最棘手的。我们将更改下标的使用方式，以便求和的每个项使用三个二进制数字：

    *n* = ∑ [*j*] 2 ^(3 *j* + 0) *d* [3 *j* + 0] + 2 ^(3 *j* + 1) *d* [3 *j* + 1] + 2 ^(3 *j* + 2) *d* [3 *j* + 2]

说服自己该方程计算的*n*与我给出的第一个方程相同。

我假设您知道*x* ^(*a* + *b*) = *x ^a* *x ^b*。所以我们可以像这样分离这 2 ^(3 *j* + *b*)系数：

    *n* = ∑ [*j*] (2 ^(3 *j*) 2 ⁰ ) *d* [3 *j* + 0] + (2 ^(3 *j*) 2 ¹ ) *d* [3 *j* + 1] + (2 ^(3 *j*) 2 ² ) *d* [3 *j* + 2]

然后我们可以像这样分解出 2 ^(3 *j*)项：

    *n* = ∑ [*j*] 2 ^(3 *j*) (2 ⁰ *d* [3 *j* + 0] + 2 ¹ *d* [3 *j* + 1] + 2 ² *d* [3 *j* + 2] )

我假设您也知道*x* ^(*a b*) = ( *x ^a* ) ^(*b*)。所以我们可以像这样拆分 2 ^(3 *j*)项：

    *n* = ∑ [*j*] (2 ³ ) ^(*j*) (2 ⁰ *d* [3 *j* + 0] + 2 ¹ *d* [3 *j* + 1] + 2 ² *d* [3 *j* + 2] )

^(我们可以将 2 3)简化为 8：

    *n* = ∑ [*j*] 8 ^(*j*) (2 ⁰ *d* [3 *j* + 0] + 2 ¹ *d* [3 *j* + 1] + 2 ² *d* [3 *j* + 2] )

将此与从八进制数字计算数字的公式进行比较，我在此重复：

    *n* = ∑ [*j*] 8 ^(*j*) *o [j]*

所以我们可以得出这样的结论：

    *o [j]* = 2 ⁰ *d* [3 *j* + 0] + 2 ¹ *d* [3 *j* + 1] + 2 ² *d* [3 *j* + 2]

例如，让我们取*j* = 2：

    *o [2]* = 2 ⁰ *d* [3×2 + 0] + 2 ¹ *d* [3×2 + 1] + 2 ² *d* [3×2 + 2] = 2 ⁰ *d* [6] + 2 ¹ *d* [7] + 2 ² *d* [8]

# ruby-on-rails - 转换模块中的属性时的“未定义方法”

> ID：15846628
> 
> 赞同：0
> 
> 时间：2013-04-06T03:10:27.527
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, module, ruby-on-rails-3.2

使用模块非常新。在验证它并将其保存到数据库之前，我无法让我的模块方法将用户输入的字符串（“1：48.55”）转换为浮点数。不知道我做错了什么......

**配置/应用程序.rb**

```
config.autoload_paths += %W(#{config.root}/lib/modules/) 
```

**lib/modules/sport_time.rb**

```
module SportTime
  extend ActiveSupport::Concern

  attr_accessor :goal_time

  included do
    before_validation :sporty_save
  end

  def self.stringify_race(secs)
    m = (secs/60).floor
    s = (secs - (m*60))
    sprintf("%02d:%.2f\n",m,s)
  end

  private
  def sporty_save
    self.goal_time = self.goal_time.floatify_race(goal_time)  ---(line 12)---
  end

  def floatify_race(str)
    dirty = str.split(":")
    min = dirty[0]
    sec = dirty[1]
    seconds = (min.to_i * 60) + sec.to_f
    seconds.round(4)
  end
end 
```

**应用程序/模型/事件.rb**

```
class Event < ActiveRecord::Base
  include SportTime
  validates_presence_of :event_type, :race_length, :course, :goal_time, :user_id
  attr_accessible :event_type, :race_length, :course, :goal_time, :user_id
  belongs_to :user
end 
```

**分贝/种子.rb**

```
Event.create(
  :event_type => 'Run',
  :race_length => 800,
  :course => 'outdoor',
  :goal_time => '01:48.55',
  :user_id => user_one.id
) 
```

**错误：**

```
rake aborted!
undefined method `floatify_race' for "01:48.55":String
/Users/myname/work/projectname/lib/modules/sport_time.rb:12:in `sporty_save' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:42:35.663

这里有几个问题。您正在调用`floatify_race`一个字符串，但字符串类没有这样的方法，因为`floatify_race`它只为您正在扩展的类定义。有几种方法可以解决这个问题，但一种方法是将`goal_time`字符串作为参数传递给`floatify_race`这样的：

`self.goal_time = floatify_race(self.goal_time)`

更重要的是，如果`goal_time`数据库中的数据类型最终是浮点数，那么先设置成字符串，再转换再保存，就有点奇怪了。我不知道您的应用程序的详细信息，但也许您想在用户输入字符串后将字符串转换为控制器级别的浮点数。

# mysql - 存储 Excel 数据和访问部分数据的最佳方式

> ID：15846630
> 
> 赞同：0
> 
> 时间：2013-04-06T03:10:36.687
> 
> 标签：mysql, sql, database, excel, phpmyadmin

我正在寻找在我的服务器上存储一组数据的最佳方法，然后从我正在构建的应用程序中检索该数据的随机部分。我正在构建一个应用程序，它将向最终用户展示与研究相关的问题。我有 40 个科目，每个科目有 50 个多项选择题，每个科目有几个示例问题，每个问题只有 1 个正确答案。我一直在考虑使用 phpMyAdmin 沿着 SQL 路线走，但考虑到我已经将所有数据整齐地排列在一个 Excel 表中，其中包含“**主题**”“**示例问题库**”“**真实问题库**”“**答案库**”的列**Sample**下列出的 excel 表（包含实际内容），**和**回答**问题库列。**

 **手动输入和重组我的所有数据，真的是我前进的唯一/最佳方式吗？或者是否有另一种方法，可能是在服务器上存储和访问 Excel 文件，并能够从给定列调用数据。我的数据排列方式，我永远不需要特定的问题，唯一必须匹配的数据对是问题的正确答案。我在应用程序中对数据的所有其他调用都是随机的。即，我将使用来自特定主题的 20/30/40 个随机问题填充应用程序。

如果我违反任何规则或我的礼仪不当，我会提前道歉。非常感谢任何人的意见或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:28:43.377

将现有的电子表格导入 mysql。

创建具有指定列名的表。从 Excel 保存为 CSV 文件

安装 mysql，如果您还没有设置管理员帐户。启动 mysql

导入 CSV。

从 mysql 使用 INFILE

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

你的整个电子表格现在都在 mysql 中。

然后使用 php 或 perl 制作一个基于 web 的界面。当然，其他编程语言也一样好。**

# javascript - JQuery模板中条件的语法错误

> ID：15846632
> 
> 赞同：0
> 
> 时间：2013-04-06T03:11:04.370
> 
> 标签：javascript, jquery, jquery-templates

我想在 Jquery 模板中使用条件来做某种数据驱动的 GUI，但是对于以下代码部分：

```
<script id="resultTemplate" type="text/x-jquery-tmpl"> 
          <li>  
                 {{if checkFile(${link})}}  
                     <p class="buttons"> <a href = ${link}>${type}</a></p>  
                 {{else}}  ${type}
                 {{\if}} 
           </li> 
 </script> 
```

我从浏览器 javascript 控制台得到错误：

```
Uncaught SyntaxError: Unexpected token { 
```

我在 Jquery 模板中使用条件时遗漏了什么吗？我看不出有什么问题

# c++ - 从行为类似于矩阵的类中的数组中获取正确的值

> ID：15846634
> 
> 赞同：0
> 
> 时间：2013-04-06T03:11:45.347
> 
> 标签：c++

我有类，它的行为类似于矩阵，并且那里的所有操作（如`+`,`-`等）都运行`*`良好。但是当我尝试获取单个值时，我会得到奇怪的值，例如 2.08252e-317 ...我'已经意识到，只有当我想以这种方式创建新的 metrix 时才会发生此错误：

`const Matrix b = a ;`

没有`const`它工作得很好......

这是我班级的声明：

```
class Matrix {
public:

Matrix(int x, int y);
~Matrix(void);
Matrix operator+(const Matrix &matrix) const;
Matrix operator-() const; 
Matrix operator-(const Matrix &matrix) const; 
Matrix operator*(const double x) const; 
Matrix operator*(const Matrix &matrix) const;

class Proxy {
    Matrix* _a;
    const Matrix* _constA;
    int _i;
public:

  Proxy(Matrix& a, int i) : _a(&a), _i(i) {
    }

    Proxy(const Matrix& constA, int i) : _constA(&constA), _i(i) {
    }

    double& operator[](int j) {
        return _a->_arrayofarrays[_i][j];
    }
};

Proxy operator[](int i) {
    return Proxy(*this, i);
}

Proxy operator[](int i) const {
    return Proxy(*this, i);
}

// copy constructor

Matrix(const Matrix& other) : _arrayofarrays() {
    _arrayofarrays = new double*[other.x ];
    for (int i = 0; i != other.x; i++)
        _arrayofarrays[i] = new double[other.y];

    for (int i = 0; i != other.x; i++)

        for (int j = 0; j != other.y; j++)
            _arrayofarrays[i][j] = other._arrayofarrays[i][j];

    x = other.x;
    y = other.y;
}
int x, y;
double** _arrayofarrays;
};

 //constructor

 Matrix::Matrix(int x, int y) {
_arrayofarrays = new double*[x];
for (int i = 0; i < x; ++i)
    _arrayofarrays[i] = new double[y];
this->x = x;
this->y = y;
} 
```

所以我创建了一些实例，用值填充它，然后，当我想在某个索引上打印值时，我得到了那些奇怪的值：-/

IE：

```
Matrix a(3,5);
//fill in the values to a
cout << a[1][1] << endl // prints out some nonsence 
```

有谁知道如何重写这个类以获得正确的值？

# php - mcrypt 字符

> ID：15846638
> 
> 赞同：0
> 
> 时间：2013-04-06T03:12:28.617
> 
> 标签：php, database, phpmyadmin, mcrypt

我目前正在尝试用 PHP 自学 mcrypt。我刚刚将以下示例代码复制并粘贴到我的 php 网页中：

```
$size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CFB);
$iv = mcrypt_create_iv($size, MCRYPT_DEV_RANDOM);

echo $iv; 
```

以下代码产生了这个：

```
öÈÅê^ƒ€™Ç8xîÉ/... 
```

这是生成密码盐的好解决方案吗？如果是这样，我对这种方法产生的外来字符有点担心。我计划将其存储在数据库中并想知道此处生成的字符是否会影响我对排序规则的决定？到目前为止，我一直在使用`utf_encoding_ci`排序规则。我不太了解排序规则或如何处理数据库中的不同字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:49:47.257

我对排序规则或任何东西一无所知，但如果您在数据库中加密密码，一些推荐使用的方法是[`md5()`](http://php.net/manual/en/function.md5.php "PHP手册上的md5函数")加密[`sha1()`](http://php.net/manual/en/function.sha1.php "PHP手册上的sha1函数")。它们应该可以正常使用。评论中的解释很好地解释了为什么会有奇怪的字符以及如何将它们存储在数据库中。

# php - CodeIgniter 数据库插入未插入

> ID：15846643
> 
> 赞同：0
> 
> 时间：2013-04-06T03:12:56.150
> 
> 标签：php, mysql, codeigniter, mysqli

我正在使用 CodeIgniter 将记录添加到数据库中。

**数据库.php：**

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'test_user';
$db['default']['password'] = 'test_pwd';
$db['default']['database'] = 'test_db';
$db['default']['dbdriver'] = 'mysqli';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = FALSE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

* * *

**在model.php中插入函数：**

```
public function set_news()
{
    $this->load->helper('url');

    $slug = url_title($this->input->post('title'), 'dash', TRUE);

    $data = array(
        'title' => $this->input->post('title'),
        'slug' => $slug,
        'text' => $this->input->post('text')
    );

    $this->output->enable_profiler(TRUE);
    return $this->db->insert('news', $data);
} 
```

* * *

当 set_news() 运行时，我得到这个输出：

```
 DATABASE:  test_db QUERIES: 1  (Hide)
0.0005       INSERT INTO `news` (`title`, `slug`, `text`) VALUES ('come on', 'come-on', 'work') 
```

但是，当我查看数据库中的表时，它仍然有零行。知道发生了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:37:52.270

问题最终是不正确的用户名/密码。由于我正在处理共享环境，因此我需要输入另一个用户/通行证组合，然后它才能正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T03:36:05.557

请检查您的数据库用户权限

并尝试改变

$db['default']['db_debug'] = FALSE;

至

$db['default']['db_debug'] = TRUE;

# java - 未定义类型 LinkedList 的方法 addElement

> ID：15846646
> 
> 赞同：0
> 
> 时间：2013-04-06T03:14:06.420
> 
> 标签：java, eclipse, undefined

我正在处理一项任务，我正在尝试将一个元素添加到 LinkedList。第一个代码块已给出，不应更改。第二个block是按照教授给我们的UML写的，位于另外一个类中。

```
import java.io.*;
import java.util.LinkedList;

public class Assignment10
{
   public static void main(String[] args)
   {
       char input1;
       String inputInfo = new String();
       int operation2;
       String line = new String();

       //create a linked list to be used in this method.
       LinkedList list1 = new LinkedList();

       try
        {
         // print out the menu
         printMenu();

         // create a BufferedReader object to read input from a keyboard
         InputStreamReader isr = new InputStreamReader (System.in);
         BufferedReader stdin = new BufferedReader (isr);

         do
          {
           System.out.print("What action would you like to perform?\n");
           line = stdin.readLine().trim();  //read a line
           input1 = line.charAt(0);
           input1 = Character.toUpperCase(input1);

           if (line.length() == 1)   // check if a user entered only one character
            {
             switch (input1)
              {
               case 'A':   //Add String
                 System.out.print("Please enter a string to add:\n");
                 String str1 = stdin.readLine().trim();
                 System.out.print("Please enter an index to add:\n");
                 inputInfo = stdin.readLine().trim();
                 int addIndex = Integer.parseInt(inputInfo);
                 list1.addElement(addIndex, str1);
                 break;

public void addElement(int index, Object element)
   {
       if(index < 0)
       {
           IndexOutOfBoundsException ex = new IndexOutOfBoundsException();
           throw ex;
       }
       LinkedListIterator iterator = new LinkedListIterator();
       for(int i = 0; i < index; i++)
       {
           if(iterator.hasNext())   // check if the iterator has a next value before
               iterator.next(); // moving to next element
           else
           {
               NoSuchElementException exception = new NoSuchElementException();
               throw exception;
           }
       }                    
       iterator.add(element);
   } // end of addElement 
```

这是 Eclipse 告诉我的：线程“main”java.lang.Error 中的异常：未解决的编译问题：方法 addElement(int, String) 未定义类型 LinkedList。

同样，我不应该更改第一个代码块，所以我的 addElement 方法一定有问题。有任何想法吗？抱歉，这是不可编译的，但我认为这实际上更像是一个概念性问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T03:25:39.967

我认为问题在于有人感到困惑。

*   一方面，您似乎正在*实现*一个调用`addElement`似乎是自定义列表实现的方法。（你没有向我们展示整个班级......）

*   另一方面，您似乎试图`addElement`在标准`java.util.LinkedList`类上调用不存在的。

其中一件事情显然是错误的。要么你误解了你应该做什么，要么你的讲师给了你一个`Assignment10`不正确的测试工具类（）。（是的，讲师确实会犯错误。他们只是人类。）

我建议你问你的讲师或你的导师澄清。（请保持礼貌和恭敬。对于一个讲师来说，没有什么比一个“面对”错误，尤其是想象中的错误的学生更烦人的了。）

# java - sip 查看器日志导入到新项目

> ID：15846650
> 
> 赞同：0
> 
> 时间：2013-04-06T03:15:47.257
> 
> 标签：java, logging, sip

我创建了我的图形 java 日志应用程序，它读取文本 SIP 日志，并且能够为 sip 查看器格式化它们。[https://code.google.com/p/sip-viewer/](https://code.google.com/p/sip-viewer/)这是一个通过命令行运行的 jar 文件，如何将这个 jar 文件集成到我现有的 Java 项目中？在我的项目中，我可以生成一个 ArrayList，其中包含所有可供使用的 SIP 日志信息。我想调用这个应用程序并传递我的数组并在 JDialog 中获取输出。导入 sip 查看器的任何示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T13:33:43.870

在您的项目中导入 sip-viewer jar（如果使用 maven 则很容易） [http://sip-viewer.googlecode.com/svn/trunk/cli/mavenrepo/](http://sip-viewer.googlecode.com/svn/trunk/cli/mavenrepo/)

然后，通过以下方法显示的示例将 sip-viewer 集成到您的 java 类中： [https ://code.google.com/p/sip-viewer/source/browse/trunk/cli/src/main/java/javax /sip/viewer/SipTextViewer.java](https://code.google.com/p/sip-viewer/source/browse/trunk/cli/src/main/java/javax/sip/viewer/SipTextViewer.java)

# mvvm - Dynamic VIew? where to put logic?

> ID：15846652
> 
> 赞同：0
> 
> 时间：2013-04-06T03:17:01.670
> 
> 标签：mvvm, windows-phone-8, mvvm-light

I am currently programming using the MVVM pattern.

My view Model Looks like so

```
class DoorsViewModel
{
ObservableCollection<Door> doorCollection;
}; 
```

the door class looks like the following

```
class Door
{
string name;
bool isOpen;
}; 
```

my view is linked to the viewmodel, and simply contains a longlistselector with a picture and the name of the door. I want the picture to be dynamic and change depending on the state of the door( whether it's open or closed ). How would i implement it so that the picture updates dynamically depending on the state of the door? should this be done in the viewmodel? or should it be done within the view?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:45:41.547

这个逻辑应该在 ViewModel 中。所有与视图相关的逻辑或事物的显示方式都应该在 ViewModel 中。视图 (.xaml.cs) 中不应包含任何逻辑。

您通常使用该`INotifyPropertyChanged`界面来通知视图发生了某些变化。在这种情况下，您希望在门状态更改时更改门图像。在这种情况下，我会尝试这样的事情。

```
class Door: INotifyPropertyChanged
{
    private string _name;
    private bool _isOpen;

    public Uri DoorImage
    {
        get
        {
            if (_isOpen) return new Uri("uri_to_open.png");
            return new Uri("uri_to_closed.png");
        }
    }

    public bool IsOpen
    {
        get { return _isOpen; }
        set
        {
            _isOpen = value;
            RaisePropertyChanged("IsOpen");
            // important, notifies the UI to update the door image
            RaisePropertyChanged("DoorImage");
        }
    }

    private void RaisePropertyChanged(string propertyName)
    {
        var tmp = PropertyChanged;
        if (tmp != null) tmp(this, new PropertyChangedEventArgs(propertyName));
    }

    public event PropertyChangedEventHandler PropertyChanged;
}; 
```

注意：我已将字段封装到属性中。

如果您的图像嵌入在您的组件中，请查看此[链接](http://msdn.microsoft.com/en-us/library/aa970069.aspx)以了解如何为您的图像编写 uri。

# xml - what's the difference between hibernate-mapping PUBLIC and hibernate-configuration PUBLIC in hibernate configuration file？

> ID：15846653
> 
> 赞同：0
> 
> 时间：2013-04-06T03:17:11.710
> 
> 标签：xml, hibernate

In Eclipse I produce the hbm.xml file automatically using db browser. When I deploy my project there is the following exception printed on the console：</p>

Could not parse mapping document from resource. hbm.xml.

When I modified the `hibernate-configuration PUBLIC` in hbm.xml to be `hibernate-mapping PUBLIC` there is no exception. Why? What's the difference between the two?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:50:34.060

```
hibernate-mapping PUBLIC( For domain object mapping files only) 
```

映射文档是一个 XML 文档，根元素[包含](http://www.tutorialspoint.com/hibernate/hibernate_mapping_files.htm)所有元素，即为您的域对象创建表的元素

```
hibernate-configuration PUBLIC(for configuration file only ) 
```

用于提供建立数据库连接所必需[的信息。](http://www.tutorialspoint.com/hibernate/hibernate_configuration.htm)将域对象映射到数据库表的映射细节也是 Hibernate`configuration`文件的一部分。

# javascript - Retrieve attributes of raphael pie chart

> ID：15846655
> 
> 赞同：0
> 
> 时间：2013-04-06T03:17:57.207
> 
> 标签：javascript, jquery, raphael, pie-chart

How to get the attributes of raphael pie chart:

attributes like: stroke, values (not with legend), radius, x and y position

My pie chart is defined as:

```
pie = r.piechart(120, 140, 50, [55, 22], {
    colors: ["green","red"],
    stroke: "black"   
}); 
```

I tried:

this.stroke -- says undefined

// I know this is getting me the raphael object correctly since I am doing some work also

```
this.click(function () { 
   alert(this.stroke); 
}); 
```

this.attr('stroke'); -- does not even display undefined

Any idea how to solve this...thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:00:40.577

你可以像这样从馅饼片本身得到它

```
console.log(this.prev.prev.prev.attrs.stroke); //I know it looks a bit ugly... 
```

或者像这样从馅饼本身

```
console.log(pie.series[0].attrs.stroke); 
```

# spring-mvc - SpringContextLoaderListener 的目的是什么

> ID：15846657
> 
> 赞同：1
> 
> 时间：2013-04-06T03:18:25.293
> 
> 标签：spring-mvc, applicationcontext

我试图了解 SpringContextLoaderListener。即为什么我们需要它？我大致了解启动 Spring 是必需的。 [http://www.coderanch.com/t/490458/Spring/](http://www.coderanch.com/t/490458/Spring/purpose-ContextLoaderListener) purpose-ContextLoaderListener 现在启动Spring Application Context是什么意思？它是否加载类似于主 Spring Controller 的调度程序 servlet？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:36:46.327

Spring Framework 的核心是**根应用程序上下文**。（即已配置bean 的注册表。） **必须以某种方式初始化此上下文。** 现在有很多方法可以做到这一点，但在 java web 服务器环境中，**最直接的方法是使用[SpringContextLoaderListener](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/context/ContextLoaderListener.html)**。

侦听器的使用**允许根应用程序上下文在Spring 的 Web MVC 的组件***（例如调度程序 servlet）***之前初始化。***根上下文的 bean 和配置由 Dispatcher Servlet 等中创建的“子应用程序上下文”共享/重用。*

 *更多信息：

*   [http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/context/ContextLoaderListener.html](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/context/ContextLoaderListener.html)

*   [http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#context-create](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#context-create)

*   [http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-servlet](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-servlet) （向下滚动几段以了解调度程序对子上下文的使用）

*   [按照 DispatchServlet 使用 ContextLoaderListener](https://stackoverflow.com/questions/2583127/use-a-contextloaderlistener-in-accordance-with-dispatchservlet/2583189#2583189)

* * *

*如果您是 Spring/Java 新手，那么我建议您忽略下一部分，因为它只会让您感到困惑：*

请注意，使用 Servlet 3.x 规范，现在有其他不太直观的方法可以在 Web 环境中初始化应用程序上下文，主要基于使用注释。这些较新的技术不一定更好。更多信息的起点：

*   [http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/SpringServletContainerInitializer.html](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/SpringServletContainerInitializer.html)

*   [http://blog.codeminimus.com/post/15331143436/minimal-servlet-3-0-no-web-xml-spring-3-1-application](http://blog.codeminimus.com/post/15331143436/minimal-servlet-3-0-no-web-xml-spring-3-1-application)*

# regex - 在嵌套的替代（）命令中转义会导致 7.2 中的 ^@ 字符

> ID：15846661
> 
> 赞同：0
> 
> 时间：2013-04-06T03:18:36.220
> 
> 标签：regex, vim, escaping, substitution

我有一个文件：

```
"""I'm a multiline string.
I say 
  "hey, single line string", 
and it says 
  "\they, multiline string,\nI can do multiple lines\ntoo".
and I say, 
  "it's cute that you think you can".

Yeah, I'm kind of a jerk.""" 
```

我可以使用嵌套`substitute()`来转换它：

```
:%s/"""\(\_.\{-}\)"""/\='"'.substitute(submatch(1),'["\\\n]','\\\0','g').'"'/g 
```

在 vim 7.3 中，我得到了我想要的东西：

```
"I'm a multiline string.\
I say \
  \"hey, single line string\", \
and it says \
  \"\\they, multiline string,\\nI can do multiple lines\\ntoo\".\
and I say, \
  \"it's cute that you think you can\".\
\
Yeah, I'm kind of a jerk." 
```

但是，在 vim 7.2 中，对于相同的输入和命令，我会得到不同的结果：

```
"I'm a multiline string.^@I say ^@  "hey, single line string", ^@and it says ^@ "\they, multiline string,\nI can do multiple lines\ntoo".^@and I say, ^@  "it's cute that you think you can".^@^@Yeah, I'm kind of a jerk." 
```

`^@`（据我所知，零字节在哪里）。

为什么我会得到如此不同的行为？我应该如何修改我的`:%s`命令以在 7.2 和 7.3 中具有相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:22:38.463

我认为您遇到的行为是由于补丁 7.3.225 修复的错误：

> “：s”内的替代（）中的“\ n”未正确处理

Vim 7.2 来自 2008 年，*非常*过时。应该可以安装最新的7.3版本；如果您找不到适合您的发行版的软件包（对于 Windows，请检查[Cream 项目中的二进制文件，在 Linux 上](http://sourceforge.net/projects/cream/files/Vim/)[编译](http://www.vim.org/download.php)（例如从 Mercurial 源代码）也不是很困难。

如果您确实需要支持较旧的 Vim 版本并且您找到了解决方法，您可以实现一个条件：

```
if v:version > 703 || v:version == 703 && has('patch225')
    " new implementation
else
    " workaround
endif 
```

# c# - Images without being compressed to bitmap?

> ID：15846662
> 
> 赞同：0
> 
> 时间：2013-04-06T03:18:40.690
> 
> 标签：c#, image, bitmap, png

I have a program that uses pngs and when I put them in the resources they are downgraded to a bitmap that only supports 24 bit color. Is there a way I can keep the image quality from being screwed up?

```
 private void Form1_Load_1(object sender, EventArgs e)
    {
        Image NSMBWImg = (Image)Properties.Resources.NSMBWImg;
        Image OkamiImg = (Image)Properties.Resources.OkamiImg;
        Game NSMBW = new Game("New Super Mario Bros. Wii", "Nintendo", "Nintendo", "November 15,2009", "Wii", "2D Platformer", "4", "Mario leaps into an all new adventure! Scramble through courses with up to four players at the same time! Run, stomp, and fly through eight worlds packed with enemies and surprises.", NSMBWImg);
        Game Ookami = new Game("Ōkami", "Clover Studio", "Capcom", "PS2: September 19, 2006 Wii: April 15, 2008", "PS2/Wii", "Action-adventure", "1", "Play as the wolf incarnation of the Japanese sun goddess Amaterasu and channel your divine powers through the mighty celestial paintbrush to restore beauty and order to a bleak world overrun by evil.", OkamiImg);
        Games.Add(NSMBW);
        Games.Add(Ookami);
    } 
```

I want to make sure the image quality doesn't change, do I possibly just host the image on a website? Or possibly include it in a folder without putting it into resources?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:28:44.300

将 png 文件添加到您的项目（从解决方案资源管理器中右键单击您的项目 -> 添加现有项目），然后在文件属性中添加后，将构建操作设置为：嵌入式资源。

![在此处输入图像描述](https://i.stack.imgur.com/HEkm3.png)

然后加载您的图像

```
 using(Stream stream = Assembly.GetExecutingAssembly().GetManifestResourceStream("<root namespace for the assembly>.<folder name>.<image file name>"))
{
    Image = Image.FromStream(stream);
} 
```

另一个例子

```
using (
            Stream stream =
                Assembly.GetExecutingAssembly()
                        .GetManifestResourceStream("WindowsFormsApplication1.testimage.png")) 
        {
            pictureBox1.Image = Image.FromStream(stream);
        } 
```

# objective-c - iOS6: CBPeripheral is being dealloc'ed while connecting

> ID：15846663
> 
> 赞同：13
> 
> 时间：2013-04-06T03:18:51.253
> 
> 标签：objective-c, ios6, core-bluetooth, cbperipheral

I'm trying to connect to a bluetooth BTLE device. I have no problem discovering the peripheral.

However, when I attempt to connect to the peripheral, I received the following warning.

> 2013-04-05 22:10:36.110 CoreBluetooth[WARNING] 7DA9E322-D710-081B-4A9D-526DE546B13C, Name = "Find My Car Smarter", IsConnected = NO> is being dealloc'ed while connecting

Furthermore, neither of the relevant delegate methods are called:

```
didConnectPeripheral:
didFailToConnectPeripheral: 
```

I've been struggling with this for hours... Please help.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-07T13:31:14.503

简短回答：您需要保留外围设备。

长解释：酷睿蓝牙被发现时不知道你是否对这个外设感兴趣。连接到它是不够的，你需要保留它。

将属性添加到您正在执行所有这些操作的类中：

```
@property (strong) CBPeripheral     *connectingPeripheral; 
```

然后在发现设备时将外围设备分配给此属性，然后再从以下位置返回`didDiscoverPeripheral`：

```
- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI
{
  DDLogVerbose(@"Discovered peripheral: %@ advertisement %@ RSSI: %@", [peripheral description], [advertisementData description], [RSSI description]);

  [central connectPeripheral:peripheral options:nil];
  self.connectingPeripheral = peripheral;
} 
```

# android - AsyncTask Not 在 Android 2.3 Andengine 中抛出异常

> ID：15846668
> 
> 赞同：1
> 
> 时间：2013-04-06T03:19:38.727
> 
> 标签：android, multithreading, andengine

我有一个在 Google Nexus（Android 4.2）中成功运行的代码。但是当我昨天在 android 2.3.5 的较低版本中尝试它时，它会抛出一个异常。

请帮我解决同样的问题。

细节。

我创建了一个类`DownloadHelper`，可以帮助我将文件从互联网下载到手机中的某个位置。这个类实习生调用一个子类`DownloadFile extends AsyncTask`。当我尝试创建它的对象时`DownloadFile`会引发异常。

下面是代码`DownloadHeper`

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;

import org.andengine.entity.text.Text;
import org.andengine.ui.activity.BaseGameActivity;

import com.gretrainer.gretrainer.StartingScreen;

import android.os.AsyncTask;
import android.os.Environment;
import android.util.Log;

public class DownloadHelper {
    public void loadFile(String url,Text loadingT,BaseGameActivity activity1,String _filename,int _tag){
        DownloadFile downloadFile;
        try {
            downloadFile = new DownloadFile();
            loadingText = loadingT;
            activity = activity1;
            downloadFile.execute(url);
            StartingPercent = 0;
            EndingPercent = 100;
            filename = _filename;
            tag = _tag;
        } catch (Exception e) {
            Log.d("exec",e.getLocalizedMessage());
        }

    }

    private int tag;
    private String filename;
    private float StartingPercent;
    private float EndingPercent;
    private BaseGameActivity activity;
    private Text loadingText;
    private class DownloadFile extends AsyncTask<String,Integer,String>{

        public DownloadFile(){

        }

        @Override
        protected String doInBackground(String... sUrl) {
            try {
                URL url = new URL(sUrl[0]);
                URLConnection connection = url.openConnection();
                connection.connect();
                // this will be useful so that you can show a typical 0-100% progress bar
                int fileLength = connection.getContentLength();

                // download the file
                InputStream input = new BufferedInputStream(url.openStream());
                OutputStream output = new FileOutputStream(Environment.getExternalStorageDirectory().toString().concat(File.separator + filename));

                byte data[] = new byte[1024];
                long total = 0;
                int count;
                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    publishProgress((int) (total * 100 / fileLength));
                    output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();
                StartingScreen act = (StartingScreen)activity;
                act.onLoadFileComplete(tag);
            } catch (Exception e) {
                String message = e.getLocalizedMessage();
                Log.d("hello",message);
            }
            return null;
        }

          @Override
            protected void onPreExecute() {
                super.onPreExecute();
            }

            @Override
            protected void onProgressUpdate(Integer... progress) {
                super.onProgressUpdate(progress);
                activity.runOnUiThread(new Runnable(){

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub

                    }

                });
                //loadingText.setText(StartingPercent + ((EndingPercent - StartingPercent) / 100) * progress[0] + "%");
            }

    }
} 
```

当它执行行时抛出异常 downloadFile = new DownloadFile();

Exception 的详细信息如下所示。

```
UpdateThread interrupted. Don't worry - this EngineDestroyedException is most likely expected!
org.andengine.engine.Engine$EngineDestroyedException 
```

它回到最后一行`onCreateScene`。但应用程序被冻结。它在新的android os（4.2）中运行良好

请检查

从异常 04-07 17:46:42.498 开始的整个日志：W/dalvikvm(2552): Exception Ljava/lang/RuntimeException; 初始化 Landroid/os/AsyncTask 时抛出；04-07 17:47:06.891：E/AndEngine(2552)：StartingScreen.onPopulateScene 失败。@（线程：'GLThread 11'）04-07 17:47:06.891：E/AndEngine（2552）：java.lang.ExceptionInInitializerError 04-07 17:47:06.891：E/AndEngine（2552）：在 com.gretrainer .gretrainer.AppHelpers.DownloadHelper.loadFile(DownloadHelper.java:24) 04-07 17:47:06.891: E/AndEngine(2552): at com.gretrainer.gretrainer.StartingScreen.onPopulateScene(StartingScreen.java:102) 04- 07 17:47:06.891: E/AndEngine(2552): 在 org.andengine.ui.activity.BaseGameActivity$2.onCreateSceneFinished(BaseGameActivity.java:154) 04-07 17:47:06.891: E/AndEngine(2552):在 com.gretrainer.gretrainer.StartingScreen.onCreateScene（StartingScreen.java：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T01:28:02.613

这只是一个猜测，但有几个`Exceptions`导致您没有正确执行的结论`AsyncTask`（请参阅`Can't create handler inside thread that has not called Looper.prepare()`。我不是建议您`Looper.prepare()`自己调用，而是`Asynctask`在另一个线程上执行。所以而不是

```
downloadFile = new DownloadFile();
loadingText = loadingT;
activity = activity1;
downloadFile.execute(url);
StartingPercent = 0;
EndingPercent = 100;
filename = _filename;
tag = _tag; 
```

尝试这样的事情（顺便说一句，您正在访问任务中的一些变量，应该更早地初始化）：

```
loadingText = loadingT;
activity = activity1;   
StartingPercent = 0;
EndingPercent = 100;
filename = _filename;
tag = _tag; 
runOnUiThread(new Runnable() {
    @Override
    public void run() {
        new DownloadFile().execute(url);
    }
}); 
```

我对`AsyncTask`s 的经验是，它们不应该在 normal 上运行`Update Thread`，因为该线程仅用于刷新屏幕，因此请尝试在 s 上运行它`UIThread`（因为您没有直接从任务中显示数据）。

# c - 如何通过 if 循环指向数组

> ID：15846675
> 
> 赞同：0
> 
> 时间：2013-04-06T03:20:50.827
> 
> 标签：c

好的，所以我正在尝试编写一个程序来竞标汽车。我想要做的是，如果当前出价为零，那么最低出价就是起始出价。如果当前出价不为零，则最低出价是当前出价加上最低出价。我不断收到一条错误消息`incompatible types when assigning to type 'float[5]' from type 'float'`。

这是我的代码：

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    int menu1();

    int main()
    {
        FILE * ifp = fopen("input2.txt","r"); //Open the input file
        int cars = 5, i , j, k; // Initialized cars and counters i, j, and k
        char *VIEW="VIEW", *BID="BID", *CLOSE="CLOSE", choice1[20]; //Initialize character arrays
        float CAR[5]={1,2,3,4,5},START_BID[5]={0.00}, MIN_BID[5]={0.00}, CUR_BID[5]={0.00}, USR_BID[5]={0.00}; //Initialized float arrays
        int compareLimit = 100, selection=0;

        //Scan the file and appropriate the numbers into their respective arrays
        for (i = 0; i < cars; i++)
            {
                fscanf(ifp, "%f %f", &START_BID[i],&MIN_BID[i]);
            }

        printf("Welcome to the Silent Auction\n\n");
        menu1(); //Display the menu

        while (selection < 3)
    {
            scanf("%s", choice1);

            int result = strncmp(choice1, VIEW, compareLimit); //Compare two strings
            if(result == 0)
            {
                selection = 1;

            }

            int result2 = strncmp(choice1, BID, compareLimit); //Compare two strings
            if(result2 == 0)
            {
                selection = 2;

            }

            int result3 = strncmp(choice1, CLOSE, compareLimit); //Compare two strings
            if(result3 == 0)
            {
                selection = 3;
            }

            if (selection == 1)
            {
                printf("Number\tCurrent Bid\tMinimum Increase\n");
                printf("1\t$%.2f\t\t$%.2f\n",CUR_BID[0], MIN_BID[0]);
                printf("2\t$%.2f\t\t$%.2f\n",CUR_BID[1], MIN_BID[1]);
                printf("3\t$%.2f\t\t$%.2f\n",CUR_BID[2], MIN_BID[2]);
                printf("4\t$%.2f\t\t$%.2f\n",CUR_BID[3], MIN_BID[3]);
                printf("5\t$%.2f\t\t$%.2f\n",CUR_BID[4], MIN_BID[4]);

                menu1();
            }

            else if (selection == 2)
            {
                int k;
                float usr_bid;

                printf("Which auction would you like to bid on? (1-5)\n");
                scanf("%d", &k);

                if (CUR_BID[k-1] != 0.00)
                    MIN_BID = CUR_BID[k-1] + MIN_BID[k-1];
                else
                    printf("The minimum bid is %.2f\n", MIN_BID[k - 1]);

                printf("How much would you like to bid?\n");
                scanf("%f", &usr_bid);
                if (usr_bid < MIN_BID[k-1])
                    printf("Sorry, that bid is not high enough.\n");
                else
                    CUR_BID[k-1] = usr_bid + CUR_BID[k-1];

                menu1();
            }

            else
            {
                int i;

                for (i=0; i<cars; i++)
                    if (CUR_BID!=0)
                        printf("Auction %d sold for $%f\n", CAR[i],CUR_BID[i]);
                    else
                        printf("Auction %d did not sell.\n");

                break;
            }
    }

            fclose(ifp);

        return 0;
    }

    int menu1()
    {
    printf("Please make a selection (In all caps):\n");
        printf("\tView Auctions [VIEW]\n");
        printf("\tBid on an Auction [BID]\n");
        printf("\tClose Auctions [CLOSE]\n");
    } 
```

我的代码在该`else if (selection == 2)`部分中所做的是询问我要出价的出价。然后我从 1-5 中选择的任何数字都在 int k 中。然后它检查该选择的当前出价，因此它在`CUR_BID[k-1]`数组中查找，如果数字为 3，则检查数组中的第二个位置。我收到以下错误：

```
 MIN_BID = CUR_BID[k-1] + MIN_BID[k-1]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T03:23:34.277

`MIN_BID`是一个浮点数数组，但您试图只分配一个浮点数`float`。看起来你想要的是`MIN_BID[k-1] = CUR_BID[k-1] + MIN_BID[k-1];`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:23:29.617

`MIN_BID`有数组类型。你必须选择一个插槽。

```
MIN_BID[0] = ... 
```

# app-store-connect - iTunes Connect 上没有“使用 Apple 托管内容”部分

> ID：15846679
> 
> 赞同：0
> 
> 时间：2013-04-06T03:21:26.657
> 
> 标签：app-store-connect, in-app-purchase

我以这种方式创建了一个新的 IAP 项目：

*   点击“管理应用内购买”
*   点击“新建”
*   选择“非消耗品”

该应用程序或我的任何应用程序都没有“使用 Apple 托管内容”部分。

如果我使用不同的开发者帐户登录并遵循完全相同的步骤，则对于任何/所有应用程序都会有一个“使用 Apple 托管内容”部分是 [] 否 []。

Apple 是否还有我不知道的特殊政策？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T04:40:27.797

这是因为您在 iTunes Connect 中的合同已过期。您应该在 iTunes 中查看您的付费应用合同。

# javascript - CherryPy Real-Time Web Application

> ID：15846684
> 
> 赞同：1
> 
> 时间：2013-04-06T03:22:03.130
> 
> 标签：javascript, node.js, websocket, socket.io, cherrypy

I've inherited a web application that is running a CherryPy web server. I need to implement a user interface that will automatically update with data from the server. Right now the solution is to use JavaScript polling. While it works, it feels dirty.

I would love to use Socket.IO, but I cannot find any support for doing this with a CherryPy backend. Does any one have any insight into this approach?

WebSockets would be great too, except for the need to support IE. Are there any non-Flash fallbacks for IE? And as for WebSocket support in CherryPy I have found ws4py, but I don't know have any experience using it.

Are there any Comet implementations for CherryPy.

For what it's worth I have been scouring the internet the last few days looking for solutions, but I really haven't found any "this is exactly what you can do" results.

Is it possible and does it make any sense to install Node.JS and have the client UI communicate with the Node.JS server which that talks to CherryPy? Or is that just wasteful?

Thanks!

# java - Updating ManyToMany jointable in Java

> ID：15846686
> 
> 赞同：3
> 
> 时间：2013-04-06T03:23:04.273
> 
> 标签：java, jpa, many-to-many, relationship, entities

I generated Entities and Facades using netbeans. Below is an example that works/updates:

I have 2 tables that are joined by a join table where it works:

## User

PK: userID

## Category

PK: categoryID

## User_Category

Composite PK: userID | categoryID (no other columns)

Method to update join table, taking care of relationships on both sides:

```
 //set up user Categories
    List<Category> categoryList = new ArrayList<Category>();

    //get all the current categories for the current user
    categoryList.addAll(user.getCategoryList());

    //clear out user for that type (to reset)
    for(Category c : categoryList){
        tempUserList.clear();
        tempUserList = c.getUserList();
        tempUserList.remove(user);
        c.setUserList(tempUserList);
        categoryFacade.edit(c);
    }

    categoryList.clear();
    //where selectedCategoryListString is a list of category names
    for(String s : selectedCategoryListString){
        categoryList.add(categoryFacade.findByCategoryName(s));
    }

    for(Category c : categoryList){
        tempUserList.clear();
        tempUserList = c.getUserList();
        tempUserList.add(user);
        c.setUserList(tempUserList);
        categoryFacade.edit(c);
    }
    user.setCategoryList(categoryList);
    userFacade.edit(user); 
```

The above works, it takes care of both sides of the relationship. Where I'm stuck is below. A 'skill' does not have the method '.getUserList()' because of the extra 'years' column. Instead, it has a '.getUserSkillList()'. I am lost as to how I should be updating the join table like I did above. We can assume that the 'years' column gets set to "" (blank) every time.

Below: problematic tables/relationship:

## User

userID

## Skill

skillID

## UserSkill

userID | skillID | years

What's important is: User has a userID. Skill has a skillID, UserSkill has a composite primary key made up of userID and skillID and the other column; years.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:56:55.713

如果您使用的是 hibernate，则只需在 class 的`Cascade.UPDATE`over`UserSkill`属性上添加一个即可解决该问题`User`。

但是，由于您没有使用休眠，您可以手动完成。更新 a`User`时，检索`UserSkills`与它相关的那些并更新它们。

*如果您对此有任何具体问题，请告诉我以更新我的答案*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:01:07.787

如果没有看到您的实体类，很难确定，但您可能正在寻找类似的东西：

```
@ManyToMany(cascade = CascadeType.MERGE, ...) 
```

[级联类型](http://docs.oracle.com/javaee/6/api/javax/persistence/CascadeType.html)

# c# - Load multiple tables into Gridview and Save in DB by ASP.NET C#

> ID：15846687
> 
> 赞同：-3
> 
> 时间：2013-04-06T03:23:21.823
> 
> 标签：c#, asp.net, database, gridview, ado.net

There is a hierarchy (parent-child) relationship between three Tables **A > B > C** in Database ..

I need to load some fields from each table into `GridView` and change data then save it back into the Database by ASP.NET with C# with ADO.NET
But I need a little sample code, I searched but couldn't find any thing for this scenario ..

Any help, thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:49:32.263

下面是一个很好的链接。
这个想法很简单，用户`gridview events`还是`data-source`要显示和更新数据库。

[http://www.aspdotnetcodes.com/SQLDataSource_StoredProcedure_Multiple_Tables_Update.aspx](http://www.aspdotnetcodes.com/SQLDataSource_StoredProcedure_Multiple_Tables_Update.aspx)

有很多事情`gridview`需要你去探索。
[http://asp-net-example.blogspot.in/search/label/GridView%20Example](http://asp-net-example.blogspot.in/search/label/GridView%20Example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:36:55.953

您可以遍历整个 GridView，并从每一行获取数据。然后将这些数据（每一行）逐行插入到测试表中：

```
foreach (GridViewRow gvr in GridView1.Rows)
{
    string data1 = gvr.Cells[0].Text;    
      //get data from BoundField in each row
    string data2 = ((Label)gvr.FindControl("Label1")).Text;    
      //get data from control in TemplateField in each row
    SqlCommand cmd = new SqlCommand("insert_sql", conn);   
      //generate insert sql using above data
    cmd.ExecuteNonQuery();
} 
```

# ios - AFNetworking: How/when to prompt for username and password for BASIC Auth?

> ID：15846695
> 
> 赞同：1
> 
> 时间：2013-04-06T03:23:54.217
> 
> 标签：ios, cocoa, afnetworking, basic-authentication

I'm looking for a best-practice about prompting the user for credentials. I have to code for the possibility that after the user logs in from the phone, he/she could login from another device or webpage and change the password. Since I'm doing BASIC auth, that token will now be incorrect and I need to handle it appropriately.

I've started a new project with AFNetworking. I have subclassed AFHTTPClient and I've overridden the HTTPRequestOperationWithRequest message to set a authentication challenge block on it after I make the call to super. In that block I should create a new NSURLCredential object and send it back to the sender. I get it so far.

What I don't get is how I'm supposed to prompt the user. Ideally I'd like to push a login screen on my nav controller with a login button. Clicking the login button would create the NSURLCredential and send it back to the sender.

*   Should I somehow block inside the challenge block? That doesn't seem right.
*   Should I save the NSURLAuthenticationChallenge object to a global? Eww.
*   Should I push the login page from my subclassed AFHTTPClient? Sounds like I'm violating separation of concerns.
*   Should I call my AppDelegate to prompt the user and pass the NSURLAuthenticationChallenge object to it? Sounds better, but still unsure.

# c - 遍历在 c 中通过引用传递的数组

> ID：15846700
> 
> 赞同：2
> 
> 时间：2013-04-06T03:24:27.830
> 
> 标签：c, arrays, function, pointers

我想用c写一个打印数组函数。当您通过引用将数组传递给 ac 函数时，我有群体，它传递了一个指向第一个元素的指针。我假设我可以增加这个指针来迭代数组但是我的程序只是段错误。

我想首先知道为什么我的程序会出现段错误，以及在 c 中编写这样的函数的最惯用的方法是什么。提前感谢。

```
void print_array(int *array, int length) {
    int i = 0; 
    for (i = 0; i < length; array++) {
        printf("%d\n", *array);
    }
}

int main (int argc, int *argv[]) {
    int test[10] = {0};
    print_array(test, 10);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T03:28:46.830

你的循环是无限的，因为`i`in`i < length`永远不会改变；该条件始终评估为真。结果，您跳过了循环的末尾。我建议将您的循环更改为：

```
for (i = 0; i < length; i++) {
    printf("%d\n", array[i]);
} 
```

...或者，如果您想使用`array++`，请更改条件：

```
for (int *end = array + length; array < end; array++) {
    printf("%d\n", *array);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:28:07.733

试试这个：

```
void print_array(int *array, int length) {
    int i = 0; 
    for (i = 0; i < length; i++) {
        printf("%d\n", array[i]);
    }
} 
```

由于`i`是您的循环控制变量（它处于循环条件中），因此您需要增加它以避免无限循环。`[]`与尝试手动增加指针相比，使用该符号对于您级别的人来说更容易掌握。

# ios - 以编程方式创建 UITableView

> ID：15846707
> 
> 赞同：48
> 
> 时间：2013-04-06T03:26:03.463
> 
> 标签：ios, objective-c, xcode, uitableview

我在 Xcode 4.6 中有一个使用情节提要的应用程序。我向视图控制器类添加了一个 UITableView，它按预期工作。但是，当我尝试删除情节提要中的 UITableView 并以编程方式将其添加回同一类时，我遇到了两个具体问题：

**1）虽然我将 UITableViewCell 类型设置为 subtitle 类型，但是详细标签不再出现。**

**2）当我选择一个单元格时应该发生的segue没有发生，甚至没有调用prepare segue，表明选择一个单元格时没有消息发送到表格视图。**

以下是相关代码：

```
@interface StatsTableViewController () <UITableViewDataSource, UITableViewDelegate>
@property (strong, nonatomic) UITableView *tableView;

@end

@implementation StatsTableViewController

-(UITableView *)makeTableView
{
    CGFloat x = 0;
    CGFloat y = 50;
    CGFloat width = self.view.frame.size.width;
    CGFloat height = self.view.frame.size.height - 50;
    CGRect tableFrame = CGRectMake(x, y, width, height);

    UITableView *tableView = [[UITableView alloc]initWithFrame:tableFrame style:UITableViewStylePlain];

    tableView.rowHeight = 45;
    tableView.sectionFooterHeight = 22;
    tableView.sectionHeaderHeight = 22;
    tableView.scrollEnabled = YES;
    tableView.showsVerticalScrollIndicator = YES;
    tableView.userInteractionEnabled = YES;
    tableView.bounces = YES;

    tableView.delegate = self;
    tableView.dataSource = self;

    return tableView;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tableView = [self makeTableView];
    [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"newFriendCell"];
    [self.view addSubview:self.tableView];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"newFriendCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    Friend *friend = [self.fetchedResultsController objectAtIndexPath:indexPath];

     **//THIS DATA APPEARS**
    cell.textLabel.text = friend.name;
    cell.textLabel.font = [cell.textLabel.font fontWithSize:20];
    cell.imageView.image = [UIImage imageNamed:@"icon57x57"];

    **//THIS DATA DOES NOT APPEAR**
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%i Games", friend.gameCount];
    cell.detailTextLabel.textColor = [UIColor lightGrayColor];

    return cell;
}

 -(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"detailsView" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
      //I set the segue identifier in the interface builder
     if ([segue.identifier isEqualToString:@"detailsView"])
     {

         NSLog(@"segue"); //check to see if method is called, it is NOT called upon cell touch

         NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];
         ///more code to prepare next view controller....
     }
} 
```

我不确定我忘记做什么才能解决这两个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-06T03:53:36.947

当您注册一个类并使用 dequeueReusableCellWithIdentifier:forIndexPath: 时，dequeue 方法保证返回一个单元格，因此永远不会输入您的 if (cell == nil) 子句。所以，就用老方法，不要注册类，使用 dequeueReusableCellWithIdentifier：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"newFriendCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
//etc.
return cell;
} 
```

至于 segue，它不能被调用，因为你不能对你在代码中创建的表进行 segue，而不是在 IB 中。再次，回到旧的方式并使用 tableView:didSelectRowAtIndexPath: 当你选择一个单元格时将被调用。在那里实例化您的细节控制器并在代码中进行转换。

编辑后：

我在那里没有看到你添加的代码。您已经实现了 didDeselectRowAtIndexPath 而不是 didSelectRowAtIndexPath。如果你改变它，你的 segue 应该可以工作。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-10-09T06:12:34.770

您可能会这样做 100% 。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // init table view
    tableView = [[UITableView alloc] initWithFrame:self.view.bounds style:UITableViewStylePlain];

    // must set delegate & dataSource, otherwise the the table will be empty and not responsive
    tableView.delegate = self;
    tableView.dataSource = self;

    tableView.backgroundColor = [UIColor cyanColor];

    // add to canvas
    [self.view addSubview:tableView];
}

#pragma mark - UITableViewDataSource
// number of section(s), now I assume there is only 1 section
- (NSInteger)numberOfSectionsInTableView:(UITableView *)theTableView
{
    return 1;
}

// number of row in the section, I assume there is only 1 row
- (NSInteger)tableView:(UITableView *)theTableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

// the cell will be returned to the tableView
- (UITableViewCell *)tableView:(UITableView *)theTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"HistoryCell";

    // Similar to UITableViewCell, but 
    JSCustomCell *cell = (JSCustomCell *)[theTableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[JSCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
    // Just want to test, so I hardcode the data
    cell.descriptionLabel.text = @"Testing";

    return cell;
}

#pragma mark - UITableViewDelegate
// when user tap the row, what action you want to perform
- (void)tableView:(UITableView *)theTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"selected %d row", indexPath.row);
}

@end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-25T06:28:29.393

```
- (void)viewDidLoad {
     [super viewDidLoad];
     arr=[[NSArray alloc]initWithObjects:@"ABC",@"XYZ", nil];
     tableview = [[UITableView alloc]initWithFrame:tableFrame style:UITableViewStylePlain];   
     tableview.delegate = self;
     tableview.dataSource = self;
     [self.view addSubview:tableview];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return arr.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];

    if(cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];
    }

    cell.textLabel.text=[arr objectAtIndex:indexPath.row];

    return cell;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-11T17:58:55.863

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    tableView = [[UITableView alloc] initWithFrame:self.view.bounds style:UITableViewStylePlain];
    tableView.delegate = self;
    tableView.dataSource = self;

    tableView.backgroundColor = [UIColor grayColor];

    // add to superview
    [self.view addSubview:tableView];
}

#pragma mark - UITableViewDataSource
- (NSInteger)numberOfSectionsInTableView:(UITableView *)theTableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)theTableView numberOfRowsInSection:    (NSInteger)section
{
    return 1;
}

// the cell will be returned to the tableView
- (UITableViewCell *)tableView:(UITableView *)theTableView  cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"HistoryCell";

    // Similar to UITableViewCell, but 
    UITableViewCell *cell = (UITableViewCell *)[theTableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
    cell.descriptionLabel.text = @"Testing";
    return cell;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-19T12:56:41.303

使用 tableViewController 创建表视图。

```
import UIKit

class TableViewController: UITableViewController
{
    let tableViewModel = TableViewModel()
    var product: [String] = []
    var price: [String] = []
    override func viewDidLoad()
    {
        super.viewDidLoad()
        self.tableView.contentInset = UIEdgeInsetsMake( 20, 20 , 0, 0)
        let priceProductDetails = tableViewModel.dataProvider()

        for (key, value) in priceProductDetails
        {
            product.append(key)
            price.append(value)
        }
    }

    override func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -> Int
    {
        return product.count
    }

    override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell
    {
        let cell = UITableViewCell(style: .Value1, reuseIdentifier: "UITableViewCell")
        cell.textLabel?.text = product[indexPath.row]
        cell.detailTextLabel?.text = price[indexPath.row]
        return cell
    }

    override func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath)
    {
        print("You tapped cell number \(indexPath.row).")
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-11T03:06:31.097

样品表

```
 #import "StartreserveViewController.h"
 #import "CollectionViewController.h"
 #import "TableViewCell1.h"
@interface StartreserveViewController ()

{
NSArray *name;
NSArray *images;
NSInteger selectindex;

}

@end

@implementation StartreserveViewController

- (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view.

self.view.backgroundColor = [UIColor blueColor];
_startReservetable.backgroundColor = [UIColor blueColor];

name = [[NSArray alloc]initWithObjects:@"Mobiles",@"Costumes",@"Shoes", 
nil];
images = [[NSArray 
 alloc]initWithObjects:@"mobilestitle.jpg",@"costumetitle.jpeg", 
 @"shoestitle.png",nil];

  }

 - (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
} 
```

# pragma mark - UiTableview 数据源

```
 -(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {
return 1;
 }

 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:
 (NSInteger)section
 {
return 3;
 }

 - (UITableViewCell *)tableView:(UITableView *)tableView 
  cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {

static NSString *cellId = @"tableview";

TableViewCell1  *cell =[tableView dequeueReusableCellWithIdentifier:cellId];

cell.cellTxt .text = [name objectAtIndex:indexPath.row];

cell.cellImg.image = [UIImage imageNamed:[images 
objectAtIndex:indexPath.row]];

return cell;

 }

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:
(NSIndexPath *)indexPath
 {
selectindex = indexPath.row;
[self performSegueWithIdentifier:@"second" sender:self];
}

   #pragma mark - Navigation

 // In a storyboard-based application, you will often want to do a little     
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([segue.identifier isEqualToString:@"second"])

  {
    CollectionViewController *obj = segue.destinationViewController;
           obj.receivename = [name objectAtIndex:selectindex];

  }

// Get the new view controller using [segue destinationViewController].
// Pass the selected object to the new view controller.
}

 @end 
```

。H

```
#import <UIKit/UIKit.h>

@interface StartreserveViewController :      
UIViewController<UITableViewDelegate,UITableViewDataSource>    
@property (strong, nonatomic) IBOutlet UITableView *startReservetable;

 @end 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-17T02:46:47.167

vc.m

```
#import "ViewController.h" 
```

# 导入“secondViewController.h”

```
 @interface ViewController ()
 {

NSArray *cityArray;
NSArray *citySubTitleArray;
NSArray *cityImage;
NSInteger selectindexpath;

}
@end

 @implementation ViewController

 - (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

cityArray = [[NSArray 
alloc]initWithObjects:@"Coimbatore",@"Salem",@"Chennai",nil];

citySubTitleArray = [[NSArray alloc]initWithObjects:@"1",@"2",@"3", nil];
cityImage = [[NSArray alloc]initWithObjects:@"12-300x272.png"
 , @"380267_70d232fc33b44d4ebe7b42bbe63ee9be.png",@"apple-logo_318
 -40184.png", nil];

 }

 #pragma mark - UITableView Data Source

 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {
return 1;

 }

 - (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection 
 :(NSInteger)section
  {
return cityImage.count;
 }

- (UITableViewCell *)tableView:(UITableView *)tableView 
cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *cellId = @"city";

UITableViewCell *cell =
 [tableView dequeueReusableCellWithIdentifier:cellId];

if (cell == nil)
{
    cell = [[UITableViewCell 
  alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellId];
}

cell.textLabel.text = [cityArray objectAtIndex:indexPath.row];
cell.detailTextLabel.text = [citySubTitleArray objectAtIndex:indexPath.row];
cell.imageView.image = [UIImage imageNamed:
 [cityImage objectAtIndex:indexPath.row]];

 //    NSData *data = [[NSData alloc]initWithContentsOfURL:
 [NSURL URLWithString:@""]];

 //    cell.imageView.image = [UIImage imageWithData:data];

return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath
:  (NSIndexPath *)indexPath
 {
 NSLog(@"---- %@",[cityArray objectAtIndex:indexPath.row]);
 NSLog(@"----- %@",[cityImage objectAtIndex:indexPath.row]);
 selectindexpath=indexPath.row;
 [self performSegueWithIdentifier:@"second" sender:self];
  }

  #pragma mark - Navigation

 // In a storyboard-based application, you will often want to do a little p
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
 // Get the new view controller using [segue destinationViewController].
 // Pass the selected object to the new view controller.
 if ([segue.identifier isEqualToString:@"second"])
 {
    secondViewController *object=segue.destinationViewController;
    object.cityName=[cityArray objectAtIndex:selectindexpath];
    object.cityImage=[cityImage objectAtIndex:selectindexpath];
       }
 }

- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
 }

 @end 
```

vc.m

```
 #import <UIKit/UIKit.h>

 @interface ViewController : UIViewController<UITableViewDataSource
  , UITableViewDelegate>
 @property (strong, nonatomic) IBOutlet UITableView *cityLabelList;

@end 
```

向量机

```
 #import <UIKit/UIKit.h>

@interface secondViewController : UIViewController
@property(strong, nonatomic) NSString *cityName;
 @property(strong,nonatomic)NSString *cityImage;
@end 
```

sv.h

```
#import "secondViewController.h"

 @interface secondViewController ()

 @property (strong, nonatomic) IBOutlet UILabel *lbl_desc;
 @property (strong, nonatomic) IBOutlet UIImageView *img_city;
    @end

 @implementation secondViewController

 - (void)viewDidLoad {
 [super viewDidLoad];
// Do any additional setup after loading the view.
self.title=self.cityName;

if ([self.cityName isEqualToString:@"Coimbatore"])
{

    self.lbl_desc.text=@"Coimbatore city";
    self.img_city.image=[UIImage imageNamed:
    [NSString stringWithFormat:@"%@",self.cityImage]];
}
 else if ([self.cityName isEqualToString:@"Chennai"])
 {

    self.lbl_desc.text= @"Chennai City Gangstar";
    self.img_city.image=[UIImage imageNamed:
   [NSString stringWithFormat:@"%@",self.cityImage]];

   }
  else
   {

    self.lbl_desc.text= @"selam City";
    self.img_city.image=[UIImage imageNamed:
   [NSString stringWithFormat:@"%@",self.cityImage]];

   }
 }

- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-27T12:16:53.393

```
- (NSInteger)tableView:(UITableView *)theTableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)theTableView  cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"HistoryCell";

    UITableViewCell *cell = (UITableViewCell *)[theTableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
    cell.descriptionLabel.text = @"Testing";
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Code for selection.
} 
```

这些是 UITableView 委托方法。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-06-01T05:02:35.267

```
#import "ViewController.h"

@interface ViewController ()

{

    NSMutableArray *name;

}

@end

- (void)viewDidLoad 

{

    [super viewDidLoad];
    name=[[NSMutableArray alloc]init];
    [name addObject:@"ronak"];
    [name addObject:@"vibha"];
    [name addObject:@"shivani"];
    [name addObject:@"nidhi"];
    [name addObject:@"firdosh"];
    [name addObject:@"himani"];

    _tableview_outlet.delegate = self;
    _tableview_outlet.dataSource = self;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

{

return [name count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

    static NSString *simpleTableIdentifier = @"cell";

    UITableViewCell *cell = [tableView       dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    cell.textLabel.text = [name objectAtIndex:indexPath.row];
    return cell;
} 
```

# php - 简单的执行插入

> ID：15846709
> 
> 赞同：-2
> 
> 时间：2013-04-06T03:26:05.563
> 
> 标签：php, phpmyadmin

问题是我认为我做错了什么，我只是不知道是什么。我试过 try/catch，这段代码的所有其他部分都能正常运行（我已经回显了所有内容），但没有任何内容被插入到“文本”中。我 99% 确定这不是特权，同样作为一个普遍问题，当您只是在服务器和其他 url 中拍摄数据时使用 exec 是否可以？希望能得到一些答复。

```
<?php
include('simplehtmldom_1_5/simple_html_dom.php');  
$html = new simple_html_dom();  
$html->load_file('http://www.youtube.com/live/all/videos?sort=dd&tag_id=&view=41');
$count = 0;
$pdo = new PDO('mysql:host=localhost;dbname=scraper', 'user', 'aa');
$string = $pdo->query('SELECT text FROM urls');
while ($row = $string->fetch())
{
  $links[] = $row['text'];
}
foreach($html->find('[class=content-item-title yt-ui-ellipsis yt-ui-ellipsis-2]') as $element)
{
$array[$count]=$element->href;
foreach ($links as $link)
{
if (strpos($array[$count], $link) == false)
{
$pdo->exec('INSERT INTO urls SET
text=$array[$count]');
}
}
$count += 1;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:05:47.517

而不是这个

```
$pdo->exec('INSERT INTO urls SET text=$array[$count]'); 
```

用这个

```
$pdo->prepare('INSERT INTO urls SET text=?')->execute(array($array[$count])); 
```

花点时间阅读[PDO 中的准备](http://php.net/manual/en/pdo.prepare.php)。还有关于[变量解析](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)。

# jquery - Jquery UI Autocomplete：从一个数组的多个属性中搜索

> ID：15846710
> 
> 赞同：12
> 
> 时间：2013-04-06T03:26:11.950
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

您好我正在尝试让 jQuery UI 自动完成小部件工作，以便它从我的数组的**多个**属性中搜索匹配项（不仅仅是默认情况下的一个）。

我已经搞砸了他们的例子，但是我仍然不确定如何解决这个问题。

[http://jsfiddle.net/FUZPN/](http://jsfiddle.net/FUZPN/)

这是我的数组格式`script`

```
var projects = [
    {
        value: "jquery",
        label: "jQuery",
        desc: "the write less, do more, JavaScript library",
        other: "9834275 9847598023 753425828975340 82974598823"
    },
    {
        value: "jquery-ui",
        label: "jQuery UI",
        desc: "the official user interface library for jQuery",
        other: "98 83475 9358 949078 8 40287089754 345 2345"
    },
    {
        value: "sizzlejs",
        label: "Sizzle JS",
        desc: "a pure-JavaScript CSS selector engine",
        other: "49857 2389442 573489057 89024375 928037890"
    } 
```

我正在寻找的是，如果你输入“write”，第一个元素应该在自动完成中弹出，同样如果你输入“jq”，前两个元素应该弹出。

* * *

根据[文档](http://api.jqueryui.com/autocomplete/)：

> 数组：数组可用于本地数据。有两种支持的格式：
> 
> *   字符串数组：`[ "Choice1", "Choice2" ]`
>     
>     
> *   具有标签和值属性的对象数组：`[ { label: "Choice1", value: "value1" }, ... ]`
>     
>     
> 
> **标签**属性显示在建议菜单中。当用户选择一个项目时，该**值**将被插入到输入元素中。如果只指定了一个属性，它将用于两者，例如，如果您只提供**值**属性，则该**值**也将用作**标签**。

我如何（硬）对其进行编码，以便源使用**2 个标签**（`label`和`desc`？）而不是一个**标签**？

* * *

*（对不起，我搜索了许多类似的问题，但是它们都针对多个来源，因为我只有 1 个数组，所以不在这里。是吗？）*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T10:21:50.523

Autocomplete 接受[第三种类型的 source](http://api.jqueryui.com/autocomplete/#option-source)，一个函数，它可以以任何你认为合适的方式提供数据：

> 第三种变体，回调，提供了最大的灵活性，可用于将任何数据源连接到自动完成。回调有两个参数：
> 
> *   一个请求对象，具有单个 term 属性，它引用文本输入中当前的值。例如，如果用户在城市字段中输入“new yo”，则自动完成项将等于“new yo”。
> *   一个响应回调，它需要一个参数：向用户建议的数据。此数据应根据提供的术语进行过滤，并且可以采用上述任何简单本地数据的格式。在请求期间提供自定义源回调以处理错误时，这一点很重要。即使遇到错误，您也必须始终调用响应回调。这确保了小部件始终具有正确的状态。

这意味着你可以写这样的东西

```
$( "#project" ).autocomplete({
    source: function (request, response) {
        // request.term is what you typed
        console.log(request.term); 

        //call response with an array containing the filtered data
        response([...]); 
    }
}); 
```

一个简单的解决你的问题：

```
function lightwell(request, response) {
    function hasMatch(s) {
        return s.toLowerCase().indexOf(request.term.toLowerCase())!==-1;
    }
    var i, l, obj, matches = [];

    if (request.term==="") {
        response([]);
        return;
    }

    for  (i = 0, l = projects.length; i<l; i++) {
        obj = projects[i];
        if (hasMatch(obj.label) || hasMatch(obj.desc)) {
            matches.push(obj);
        }
    }
    response(matches);
}

$( "#project").autocomplete({
    source: lightwell
}); 
```

还有一个小提琴[http://jsfiddle.net/FUZPN/5/](http://jsfiddle.net/FUZPN/5/)

# javascript - 如何创建 SVG 光标跟踪元素？

> ID：15846713
> 
> 赞同：1
> 
> 时间：2013-04-06T03:27:08.410
> 
> 标签：javascript, animation, svg, dom-events

我有以下 XML 代码来创建一个 SVG 图像，该图像有一个跟随用户光标的小圆圈。跟踪光标并显示圆圈的区域与图像的其余部分不对齐。我不确定这是为什么。我希望有人能启发我（几天前我刚开始学习 SVG）。

如果我将`preserveAspectRatio`from更改为`xMidYMin`，`none`则该圆圈会出现一系列不同的问题。它不会跟随光标向下很远，而且它比它应该向右走得更远。

另外，我对 JavaScript 不是很好，所以如果你看到可以简化代码的方法，或者如果你能弄清楚如何将它切换到 jQuery，我将不胜感激。

```
<?xml version="1.0" encoding="utf-8" standalone="no" ?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd" [ <!ATTLIST svg xmlns:a3 CDATA #IMPLIED a3:scriptImplementation CDATA #IMPLIED>
<!ATTLIST script a3:scriptImplementation CDATA #IMPLIED> ]>
<svg viewBox="0 0 720 1278" preserveAspectRatio="xMidYMin"
 xmlns="http://www.w3.org/2000/svg"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:a3="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/"
 a3:scriptImplementation="Adobe"
 onload="init(evt)"
 onzoom="updateTracker(evt)"
 onscroll="updateTracker(evt)"
 onresize="updateTracker(evt)">
<script type="text/ecmascript" a3:scriptImplementation="Adobe">
<![CDATA[
  var elems = {
      tracker: false,
      cursor: false,
      trans: true,
      scale: true,
      mx: true,
      my: true,
      ux: true,
      uy: true
  };
  var frame = {
      x_trans: 0,
      y_trans: 0,
      zoom: 1,
      x_scale: 1,
      y_scale: 1
  };

  function init(e) {
      if (window.svgDocument == null) svgDocument = e.target.ownerDocument;
      // Find nodes by id and store in elems object
      for (var id in elems) getElement(id, elems[id]);
  }

  function getElement(id, useFirstChild) {
      // Find the node with the specified id
      var node = svgDocument.getElementById(id);
      if (useFirstChild) {
          // Grab first child of node
          // This is used to get the text node of tspan and text elements
          elems[id] = node.firstChild;
      } else {
          // Do not need first child so use the node we just found
          elems[id] = node;
      }
  }

  function updateTracker(e) {
      // Get the top-most SVG element
      var SVGRoot = svgDocument.documentElement;
      // Get the current zoom and pan settings
      var trans = SVGRoot.currentTranslate;
      var scale = SVGRoot.currentScale;
      // Determine the translation needed to move the upper-left
      // corner of our tracking rectangle to the upper-left of the
      // current view.
      // The zeros are used to reinforce that we are translating
      // the origin of the rectangle to the upper-left corner of the
      // current view.
      frame.x_trans = (0.0 - trans.x) / scale;
      frame.y_trans = (0.0 - trans.y) / scale;
      // Now that we have moved the rectangles corner to the
      // upper-left position, let us scale the rectangle to fit
      // the current view.  X and Y scales are maintained seperately
      // to handle possible anamorphic scaling from the viewBox
      frame.zoom = scale;
      frame.x_scale = 1 / scale;
      frame.y_scale = 1 / scale;
      // Get the current viewBox
      var vbox = SVGRoot.getAttributeNS(null, "viewBox");
      if (vbox) {
          // We have a viewBox so, update our translation and scale
          // to take the viewBox into account
          // Break the viewBox parameters into an array to make life easier
          var params = vbox.split(/\s+/);
          // Determine the scaling from the viewBox
          // Note that these calculations assume that the outermost
          // SVG element has height and width attributes set to 100%.
          var h_scale = window.innerWidth / params[2];
          var v_scale = window.innerHeight / params[3];
          // Update our previously calculated transform
          frame.x_trans = frame.x_trans / h_scale + parseFloat(params[0]);
          frame.y_trans = frame.y_trans / v_scale + parseFloat(params[0]);
          frame.x_scale = frame.x_scale / h_scale;
          frame.y_scale = frame.y_scale / v_scale;
      }
      // Apply changes to the tracking rectangle
      updateTrackerTransform();
  }

  function updateCursor(e) {
      // Get the mouse x and y coordinates
      var x = e.clientX;
      var y = e.clientY;
      // Calculate the user-coordinate using the scaling and
      // translation values we calculated for the tracking
      // rectangle
      var nx = x * frame.x_scale + frame.x_trans;
      var ny = y * frame.y_scale + frame.y_trans;
      // Update the cursor position
      elems.cursor.setAttributeNS(null, "cx", nx);
      elems.cursor.setAttributeNS(null, "cy", ny);
      // Update our text fields
      elems.mx.data = x;
      elems.my.data = y;
      elems.ux.data = nx;
      elems.uy.data = ny;
  }

  function updateTrackerTransform() {
      // Build the text versions of the translate and scale transformation
      var trans = "translate(" + frame.x_trans + "," + frame.y_trans + ")"
      var scale = "scale(" + 1 / frame.zoom + "," + 1 / frame.zoom + ")";
      // Apply the transformation to our tracking rectangle
      elems.tracker.setAttributeNS(null, "transform", trans + " " + scale);
      // Update our text fields
      elems.trans.data = trans;
      elems.scale.data = scale;  }]]>
</script>
<!-- Create the cursor element -->
<circle id="cursor" cx="100" cy="100" r="10" fill="orange" />
<!-- A group of elements collectively refered to as the tracker -->
<g id="tracker">
    <!-- Draw a visible rectangle to show the tracking area -->
    <rect x="0" y="0" width="100%" height="100%" fill="blue" opacity="0.25" />
    <!-- - This is the actual tracking rectangle. This is all that is needed - to track the cursor. Just place the "tracker" id here and remove this group - and all of the other elements in this group -->
    <rect x="0" y="0" width="100%" height="100%" opacity="0" onmousemove="updateCursor(evt)" />
</g>
</svg> 
```

**[jsFiddle 上的现场演示](http://jsfiddle.net/UEZ2D/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:27:08.410

我不小心偶然发现了这个解决方案。有没有更好的方法呢？

```
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 1278">
<title>This'll be Great</title>
<style>
    * { vector-effect:non-scaling-stroke }
    rect { fill: blue; }
    circle { fill:orange; opacity:0.75; }
</style>
<rect cx="50%" cy="0" width="720" height="1278" id="origin" />
<circle cx="50%" cy="116" r="72" id="dot"    />
<script>
    var svg  = document.documentElement,
        pt   = svg.createSVGPoint(),
        dot  = document.querySelector('#dot');

    svg.addEventListener('mousemove',function(evt){
      var loc = cursorPoint(evt);
        dot.setAttribute('cx',loc.x);
        dot.setAttribute('cy',loc.y);
    },false);

    function rotateElement(el,originX,originY,towardsX,towardsY){
        var degrees = Math.atan2(towardsY-originY,towardsX-originX)*180/Math.PI + 90;
        el.setAttribute(
            'transform',
            'translate('+originX+','+originY+') translate('+(-originX)+','+(-originY)+')'
        );
    }

    // Get point in global SVG space
    function cursorPoint(evt){
      pt.x = evt.clientX; pt.y = evt.clientY;
      return pt.matrixTransform(svg.getScreenCTM().inverse());
    }
</script> 
</svg> 
```

# g++ - 有没有办法将 g++ 中的 -std=*** 仅应用于一个文件

> ID：15846715
> 
> 赞同：0
> 
> 时间：2013-04-06T03:27:10.917
> 
> 标签：g++

我正在用 C++ 包装一个大型 C 库并将一些外部层转换为 C++。

遵循在转换中一次只破坏一件事的原则，我直到以后才编写 makefile。

我想做以下事情：

```
g++ a.c b.c d.c e.c --std=c++11 test.cpp 
```

乃至

```
g++ a.c b.c d.c  --std=c++11 e.cpp test.cpp 
```

稍后。

有没有办法指定 -std=c++11 仅适用于 C++ 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:22:57.553

实现此目的的一种方法是将编译过程分为两个不同的阶段：

1) 使用 std 说明符分别编译为目标文件：

```
g++ -S a.c b.c d.c
g++ -S a.cpp b.cpp d.cpp -std=c++11 
```

2）使用生成的所有目标文件编译为最终可执行文件：

```
g++ -o myelf a.s b.s d.s 
```

# jsp - 新建 JSP 文件上传错误

> ID：15846719
> 
> 赞同：1
> 
> 时间：2013-04-06T03:27:38.030
> 
> 标签：jsp

JSP =.= 请帮助我上传。

## 上传.jsp

> `<body> <form name="form1" id="form1" action="test" method="post" enctype="multipart/form-data"> <input type="hidden" name="hiddenfield1" value="ok"> Files to upload: <br/> <input type="file" size="50" name="file1"> <br/> <input type="file" size="50" name="file2"> <br/> <input type="file" size="50" name="file3"> <br/> <input type="submit" value="Upload"> </form> </body>`

* * *

这是我的**TestServlet** 包测试；

公共类 TestServlet 扩展 HttpServlet {

```
private static final long serialVersionUID = 1L;

public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException {
    doPost(request, response);
}

public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException {
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();

    out.println("Hello<br/>");

    boolean isMultipartContent = ServletFileUpload.isMultipartContent(request);
    if (!isMultipartContent) {
        out.println("You are not trying to upload<br/>");
        return;
    }
    out.println("You are trying to upload<br/>");

    FileItemFactory factory = new DiskFileItemFactory();
    ServletFileUpload upload = new ServletFileUpload(factory);
    try {
        List<FileItem> fields = upload.parseRequest(request);
        out.println("Number of fields: " + fields.size() + "<br/><br/>");
        Iterator<FileItem> it = fields.iterator();
        if (!it.hasNext()) {
            out.println("No fields found");
            return;
        }
        out.println("<table border=\"1\">");
        while (it.hasNext()) {
            out.println("<tr>");
            FileItem fileItem = it.next();
            boolean isFormField = fileItem.isFormField();
            if (isFormField) {
                out.println("<td>regular form field</td><td>FIELD NAME: " + fileItem.getFieldName() + 
                        "<br/>STRING: " + fileItem.getString()
                        );
                out.println("</td>");
            } else {
                out.println("<td>file form field</td><td>FIELD NAME: " + fileItem.getFieldName() +
                        "<br/>STRING: " + fileItem.getString() +
                        "<br/>NAME: " + fileItem.getName() +
                        "<br/>CONTENT TYPE: " + fileItem.getContentType() +
                        "<br/>SIZE (BYTES): " + fileItem.getSize() +
                        "<br/>TO STRING: " + fileItem.toString()
                        );
                out.println("</td>");
            }
            out.println("</tr>");
        }
        out.println("</table>");
    } catch (FileUploadException e) {
        e.printStackTrace();
    }
} 
```

}

和我的 web.xml
**[Web XML 图像在这里](http://imageshack.us/photo/my-images/811/xmlw.jpg/)**

当我运行并上传文件时

我得到了错误！

**[错误图片在这里](http://imageshack.us/photo/my-images/59/errvoc.jpg/)**

**我真的需要你的帮助！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:49:35.223

从您包含的错误屏幕截图链接中查看。

它说

> java.lang.NoClassDefFoundError: org/apache/commons/io/output/DeferredFileOutputStream

您的 Classpath 中似乎缺少 Apache Commons IO jar `commons-io.jar`。Commons File Upload 依赖于它。

您可以从[Apache Commons Site下载](http://commons.apache.org/proper/commons-io/download_io.cgi)

# ruby-on-rails - 没有方法错误通过表单使用 ruby on rails 编辑 Shopify 元字段数据

> ID：15846720
> 
> 赞同：1
> 
> 时间：2013-04-06T03:27:47.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, shopify, nomethoderror

作为我为 Shopify 网站进行的自定义的一部分，我正在尝试编写一个只允许编辑特定元字段的工具。

在索引页面上，我将列出与特定元字段相关联的各种集合、产品、页面和博客文章，我希望用户能够通过表单进行编辑。

......对于我的生活，我只是看不到我错过了什么！非常感谢解决此问题的任何帮助:)

所以……我们走吧！当用户单击“编辑”（应该将他们带到一个表单以编辑该集合、产品、页面或博客文章的特定元字段）时，我在浏览器中收到此错误：

```
NoMethodError in Metafields#edit

Showing /Users/james/code/test-app/app/views/metafields/_form.html.erb where line #1 raised:

undefined method `shopify_api_metafield_path' for #<#<Class:0x007facf51992a0>:0x007facf520fec8>

Extracted source (around line #1):
1: <%= form_for(@metafield) do |f| %> 
```

模型“metafield.rb”如下所示：

```
class Metafield < ActiveRecord::Base
  attr_accessible :namespace, :key, :value, :value_type, :description, :id
end 
```

控制器“metafields_controller.rb”定义了以下方法：

```
 # GET /metafields/1/edit
  def edit
    @metafield = ShopifyAPI::Metafield.find(params[:id])
  end 
```

文件“/views/metafields/index.html.erb”如下所示：

```
<h1>Listing metafields</h1>

<table>
  <tr>
    <th>Namespace</th>
    <th>Key</th>
    <th>Value</th>
    <th>Value type</th>
    <th>Description</th>
    <th>Id</th>
    <th></th>
  </tr>

<% @metafields.each do |metafield| %>
  <tr>
    <td><%= metafield.namespace %></td>
    <td><%= metafield.key %></td>
    <td><%= metafield.value %></td>
    <td><%= metafield.value_type %></td>
    <td><%= metafield.description %></td>
    <td><%= metafield.id %></td>
    <td><%= link_to 'Edit', edit_metafield_path(metafield) %></td>
  </tr>
<% end %>
</table> 
```

文件“/views/metafields/edit.html.erb”如下所示：

```
<h1>Editing metafield</h1>

<%= render 'form' %>

<%= link_to 'Back', metafields_path %> 
```

文件“/views/metafields/_form.html.erb”看起来像这样（其中，显然，第 1 行抛出错误......）：

```
<%= form_for(@metafield) do |f| %>
  <% if @metafield.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@metafield.errors.count, "error") %> prohibited this metafield from being saved:</h2>

      <ul>
      <% @metafield.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :namespace %><br />
    <%= f.text_field :namespace %>
  </div>
  <div class="field">
    <%= f.label :key %><br />
    <%= f.text_field :key %>
  </div>
  <div class="field">
    <%= f.label :value %><br />
    <%= f.text_field :value %>
  </div>
  <div class="field">
    <%= f.label :value_type %><br />
    <%= f.text_field :value_type %>
  </div>
  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_field :description %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:11:40.173

It`s not a good idea to nest forms in view partials as you do it in _form.html.erb.

```
<%= form_for(@metafield) do |f| %>
  <% if @metafield.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@metafield.errors.count, "error") %> prohibited this metafield from being saved:</h2>

      <ul>
      <% @metafield.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %> 
```

You can try to use this helper:

```
<%= error_messages_for 'metafield' %> 
```

instead of using `form_for()` helper.

**UPDATE**

If you wish to use `form_for()` helper it will be correct to define your Metafield model this way:

```
class ShopifyAPI::Metafield < ActiveRecord::Base
{
} 
```

Since the `form_for()` helper tries to figure out a path to the view that will be rendered on the form submission. This path is returned by `shopify_api_metafield_path()` helper which is undefined method from the error message.

Regarding `error_messages_for()` helper, it will not be translated into HTML form tag and can be used inside a view partial without nesting HTML forms. See more [here](http://apidock.com/rails/ActionView/Helpers/ActiveRecordHelper/error_messages_for)

# java - 调用方面声明的方法

> ID：15846723
> 
> 赞同：0
> 
> 时间：2013-04-06T03:28:02.967
> 
> 标签：java, aspectj

[本页](http://eclipse.org/aspectj/doc/released/progguide/starting-aspectj.html#inter-type-declarations)展示了如何向现有类添加方法，然后展示如何在切面内声明调用这些附加方法的方法。

这是该页面的代码：

```
aspect PointObserving {
    private Vector Point.observers = new Vector();

    public static void addObserver(Point p, Screen s) {
        p.observers.add(s);
    }
    public static void removeObserver(Point p, Screen s) {
        p.observers.remove(s);
    }

    pointcut changes(Point p): target(p) && call(void Point.set*(int));

    after(Point p): changes(p) {
        Iterator iter = p.observers.iterator();
        while ( iter.hasNext() ) {
            updateObserver(p, (Screen)iter.next());
        }
    }

    static void updateObserver(Point p, Screen s) {
        s.display(p);
    }
} 
```

我试图在相同的设置（观察者模式）中重用这种模式，但我希望能够从我的 Java 代码中的任何地方添加观察者。因此，在该页面上显示的示例中，我想从我的包中的另一个类执行类似的操作：

```
Point p = new Point(120, 230);
Screen s = getScreen();
PointObserving.addObserver(p, s); 
```

但是，我的 Java 类看不到“方面”PointObserving（尽管我已将其声明为公共）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:42:59.613

我找到了一种方法来做到这一点——显然 aspectJ 不仅允许您定义额外的字段，还允许您定义方法。为此，我们只需要如下修改方面（注意我是如何替换`static`为 的`Point.`）

```
aspect PointObserving {
    private Vector Point.observers = new Vector();

    public void Point.addObserver(Point p, Screen s) {
        observers.add(s); //Legal to access observers here
    }
    public void Point.removeObserver(Point p, Screen s) {
        observers.remove(s); //Legal to access observers here
    }

    //Rest remains same as before.
} 
```

现在在一个普通的 Java 类的某个地方我可以这样做：

```
Point p = new Point(120, 230);
Screen s = getScreen();
p.addObserver(s); 
```

此外，值得将观察者声明为弱引用。因此，

```
private Collection<Screen> Point.observers = Collections.newSetFromMap(new WeakHashMap<Screen, Boolean>());
//Rest remains same 
```

# java - 空指针异常

> ID：15846726
> 
> 赞同：0
> 
> 时间：2013-04-06T03:28:36.403
> 
> 标签：java, android, android-listview, nullpointerexception

我要疯了，试图弄清楚这一点。当我单击我的活动时，它会因 NullPointerException 而崩溃。我尝试过调试，但无法进入有问题的活动。我尝试删除数据库，但仍然崩溃了。我尝试删除 ListView，仍然崩溃。我尝试修改数据库，仍然崩溃。

出于某种奇怪的原因，当我在“播放按钮”上删除按钮及其 onClickListener 时，我能够进入活动并且活动中的所有内容都正常工作。有人可以帮我解释为什么这个按钮在活动之前让应用程序崩溃而不是在点击？

```
04-05 23:15:15.886: E/AndroidRuntime(11445): FATAL EXCEPTION: main
04-05 23:15:15.886: E/AndroidRuntime(11445): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.fullfrontalgames.numberfighter/com.fullfrontalgames.numberfighter.PlayAFriend}: java.lang.NullPointerException
04-05 23:15:15.886: E/AndroidRuntime(11445):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2136)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2174)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at android.app.ActivityThread.access$700(ActivityThread.java:141)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1267)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at android.os.Looper.loop(Looper.java:137)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at android.app.ActivityThread.main(ActivityThread.java:5059)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at java.lang.reflect.Method.invokeNative(Native Method)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at java.lang.reflect.Method.invoke(Method.java:511)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:792)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at dalvik.system.NativeStart.main(Native Method)
04-05 23:15:15.886: E/AndroidRuntime(11445): Caused by: java.lang.NullPointerException
04-05 23:15:15.886: E/AndroidRuntime(11445):    at com.fullfrontalgames.numberfighter.PlayAFriend.onCreate(PlayAFriend.java:54)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at android.app.Activity.performCreate(Activity.java:5058)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-05 23:15:15.886: E/AndroidRuntime(11445):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100) 
```

**活动**

```
package com.fullfrontalgames.numberfighter;
import com.fullfrontalgames.numberfighter.DBAdapter;
import com.fullfrontalgames.numberfighter.R;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;

import android.os.Bundle;

import android.support.v4.widget.SimpleCursorAdapter;

import android.view.View;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class PlayAFriend extends Activity{
    DBAdapter DBAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playafriend);

        final DBAdapter db = new DBAdapter(this);
        DBAdapter = db.open();

        ListView FriendLV = (ListView) findViewById(android.R.id.list);
        Button playbutton = (Button) findViewById(R.id.playbutton);
        final TextView friend = (TextView) findViewById(R.id.textview_friends);

        Cursor friendslist = db.GetAllFriends();

        String[] from = new String[] {"FRIENDS"};   // your column/columns here
        int[] to = new int[] {R.id.textview_friends};

        @SuppressWarnings("deprecation")
        ListAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.list_items, friendslist, from, to,0);
          FriendLV.setAdapter(cursorAdapter);

          playbutton.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    String Defender = friend.getText().toString();
                    db.GetFriend(Defender);
                    startActivity(new Intent ("com.fullfrontalgames.numberfighter.Fightattacker"));
                    db.close();
                }
            });

    }

    } 
```

玩友 xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/nfbackground"
    android:orientation="vertical" >

    <ImageView
        android:id="@id/titlebar"
        android:layout_width="wrap_content"
        android:layout_height="66dp"
        android:src="@drawable/nftitlebar" />

        <ListView 
            android:id="@android:id/list"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:orientation="vertical" >

        </ListView>

</LinearLayout> 
```

list_items xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:background="@drawable/searchimageview"
        android:orientation="vertical" >

        <Button
        android:id="@+id/playbutton"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_gravity="right"
        android:background="@drawable/playbutton" />

<TextView 
    android:id="@+id/textview_friends"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@color/black"
    android:textStyle="bold"
    android:textSize="40dp"
    android:layout_gravity="center" />

    </FrameLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:36:00.100

请尝试此代码。

```
 public class Test extends Activity{
        DBAdapter DBAdapter;
        ListView FriendLV;
        Button playbutton;
        final TextView friend;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playafriend);
        final DBAdapter db = new DBAdapter(this);
        db.open();
        Cursor friendslist = db.GetAllFriends();
         if(friendslist.getCount()!=0){
             FriendLV = (ListView) findViewById(android.R.id.list);
             playbutton = (Button) findViewById(R.id.playbutton);
             friend = (TextView) findViewById(R.id.textview_friends);
             String[] from = new String[] {"FRIENDS"};   // your column/columns here
                int[] to = new int[] {R.id.textview_friends};

                @SuppressWarnings("deprecation")
                ListAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.list_items, friendslist, from, to,0);
                  FriendLV.setAdapter(cursorAdapter);
                  playbutton.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub

                            String Defender = friend.getText().toString();
                            db.GetFriend(Defender);
                            startActivity(new Intent ("com.fullfrontalgames.numberfighter.Fightattacker"));
                            db.close();
                        }
                    }); 
         }
    }

    } 
```

如果您遇到任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T05:21:33.770

如果使用 listview，您的 Activity 应该扩展 ListActivity

# coffeescript - Coffeescript：从实例方法引用类方法，无需硬编码

> ID：15846729
> 
> 赞同：22
> 
> 时间：2013-04-06T03:28:50.783
> 
> 标签：coffeescript

以以下代码为例：

```
class MyClass

  @staticMethod: -> hello_world()

  instanceMethod: -> MyClass.staticMethod() 
```

有没有一种方法可以从内部引用 MyClass`instanceMethod`而无需明确命名？就像是`self.staticMethod()`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-06T07:31:19.900

您可以[`constructor`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor)像在 JavaScript 中一样使用获取“类”：

```
instanceMethod: ->
    @constructor.staticMethod() 
```

演示（添加了子类以更好地衡量）：http: [//jsfiddle.net/ambiguous/zM3ND/](http://jsfiddle.net/ambiguous/zM3ND/)

# android - ImageView 填充动态值

> ID：15846730
> 
> 赞同：0
> 
> 时间：2013-04-06T03:28:59.533
> 
> 标签：android, dynamic, imageview

对安卓来说还是新手。要温柔。我已经阅读了许多关于动态填充 ImageView 的文章。我需要以某种方式做到这一点，但我正在努力使用正确的语法。具有讽刺意味的是，我知道如何在 iOS 中做到这一点，但我完全被 Android 难住了。下面是代码。

我想动态填充图像资源的名称及其位置。

```
//Set the string to lower case
String animalImageLocation = animalName.toLowerCase()+"icon";
//Prepare to set the value of the ImageView
animalView = (ImageView)findViewById(R.id.animalView);
//Dynamically populate the image into the animalView
animalView.setImageResource(getResources().getIdentifier("R.Drawable."+<dynamicValue??>,null,null)); 
```

我试过这个但失败了。

```
//Set the string to lower case
    String animalImageLocation = animalName.toLowerCase()+"icon";
    //Prepare to set the value of the ImageView
    animalView = (ImageView)findViewById(R.id.animalView);
    //Dynamically populate the image into the animalView
    animalView.setImageResource(getResources().getIdentifier("R.Drawable."+animalImageLocation,null,null)); 
```

我尝试了几种方法，所有这些方法要么不显示图像，要么只是崩溃。我需要用图像名称有效地填充 getIdentifier()，即 R.Drawable.bearicon

有任何想法吗？

杰里米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:54:13.340

首先，`R.drawable`没有资本，我认为这很重要。此外，如果你`null`作为班级通过，你也必须提供。

请尝试以下操作：

```
animalView.setImageResource(
    getResources().getIdentifier(
        animalImageLocation,
        "drawable",
        animalView.getContext().getPackageName()
    )
); 
```

或者，如果您更喜欢传递`null`后面的参数，也许可以这样：

```
animalView.setImageResource(
    getResources().getIdentifier(
        animalView.getContext().getPackageName() + ":drawable/" + animalImageLocation,
        null,
        null
    )
); 
```

# clojure - ClojureCLR 强制错误

> ID：15846732
> 
> 赞同：1
> 
> 时间：2013-04-06T03:29:47.520
> 
> 标签：clojure, clojureclr

我在 ClojureCLR REPL 中遇到了一个编译器异常，用于基本强制：

```
=> (class 12)
System.Int64

=> (class 12.34)
System.Double

=> (class (new System.Double 12))
CompilerException System.InvalidOperationException: No constructor in type: Double with 1 arguments
at clojure.lang.CljCompiler.Ast.NewExpr.ComputeCtor() in D:\work\clojure-clr-1.4.1-fix\Clojure\Clojure\CljCompiler\Ast\NewExpr.cs:line 73
at clojure.lang.CljCompiler.Ast.NewExpr..ctor(Type type, List`1 args, IPersistentMap spanMap) in D:\work\clojure-clr-1.4.1-fix\Clojure\Clojure\CljCompiler\Ast\NewExpr.cs:line 49
at clojure.lang.CljCompiler.Ast.NewExpr.Parser.Parse(ParserContext pcon, Object frm) in D:\work\clojure-clr-1.4.1-fix\Clojure\Clojure\CljCompiler\Ast\NewExpr.cs:line 117
at clojure.lang.Compiler.AnalyzeSeq(ParserContext pcon, ISeq form, String name) in D:\work\clojure-clr-1.4.1-fix\Clojure\Clojure\CljCompiler\Compiler.cs:line 1560, compiling: (NO_SOURCE_PATH:60) 
```

抱歉，如果这是一个新问题，但行为与 Java 互操作不同！

.NET 的语法是否不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:13:42.033

ClojureCLR 中的互操作与 Clojure 中的互操作非常相似，但平台差异确实体现出来了。

java.lang.Double 是一个与 System.Double 非常不同的生物。JVM 的 Double 是一个包装类，与原始双精度值类不同。CLR 的 Double 实际上是原始双精度值的类。jlDouble 有许多在 S.Double 中没有并行的方法。关于你的例子： jlDouble 有几个构造函数；S.Double 没有。要完成您想要的，请使用 clojure.core/double：

```
user=> (class (double 2))
System.Double 
```

Java 包装器类型很可能会遇到平台差异：CLR 没有明确的包装器类型。我不知道有任何地方试图详细介绍这一点。

有关如何处理不在 JVM 中的 CLR 互操作的提示，例如 by-ref 参数、枚举等，请查看[ClojureCLR 的 github 存储库上的 wiki](https://github.com/clojure/clojure-clr/wiki)。

# actionscript-3 - 如何加载 JSON 数据并将其用作 dataGroup 的 dataProvider？

> ID：15846733
> 
> 赞同：0
> 
> 时间：2013-04-06T03:29:57.493
> 
> 标签：actionscript-3, apache-flex, flash-builder

我正在尝试如何在 flex 4.6 中创建自定义项目渲染器并拥有一个 JSON 格式的数据源......我使用以下内容来检索 json 数据并且它可以正常工作，我可以很好地访问数据

```
myJSONdata[i].id
myJSONdata[i].username   etc... 
```

但是在理解如何使这些数据成为分配给数据组的 dataProvider 的 flex 期望的数据类型（ArrayList、ArrayCollection？）时遇到问题。

```
public var loader:URLLoader = new URLLoader();
public var jsonContent:URLLoader;
public var myJSONdata:Object;
public var request:URLRequest;

public function Init():void {

request = new URLRequest("URL TO THE JSON DATA...");
loader.load(request);
loader.addEventListener(Event.COMPLETE, jsonLoaded);
}

public function jsonLoaded(event:Event):void {

jsonContent = URLLoader(event.target);      
myJSONdata = JSON.parse(jsonContent.data);  

trace(myJSONdata.length);               

} 
```

当我尝试像这样分配 dataProvider 时......

```
<s:DataGroup dataProvider="myJSONdata"> 
```

我收到此错误：

```
Initializer for 'dataProvider': values of type mx.collections.IList cannot be represented in text. 
```

我想使用相同的数据访问功能，然后将该数据用作一个数组，然后我可以将其用作 dataGroup 的 dataProvider。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:26:19.957

要么给你的 DataGroup 和 id，然后像这样在 AS3 中分配 dataProvider：

```
<s:DataGroup id="myDataGroup">

//in as3

myDataGroup.dataProvider = new ArrayCollection(myJSONdata); 
```

或者您可以像在 MXML 中那样分配它，但必须将变量名包含在花括号中。

```
<s:DataGroup dataProvider="{myJSONdata}"> 
```

您收到该错误的原因是因为 MXML 被`myJSONdata`视为普通字符串。

您可能仍需要将 JSON 数组放入 ArrayCollection 中，就像我在第一个示例中所做的那样。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T14:53:08.557

虽然这篇文章很旧，但这仍然有用，也许对其他人有用。

```
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <s:HTTPService id="jsonLoader" result="jsonLoader_resultHandler(event)"
                   url="http://example.com/sample.json" />
</fx:Declarations>
<fx:Script>
    <![CDATA[
        import com.adobe.serializers.json.JSONDecoder;

        import mx.collections.ArrayCollection;
        import mx.rpc.events.ResultEvent;

        //<s:WindowedApplication .... creationComplete="initApp()">
        public function initApp():void
        {
            //so trigger jsonLoader to load the json data from the link
            // using the HTTPService immediately the application starts;
            jsonLoader.send();
        }

        protected function jsonLoader_resultHandler(event:ResultEvent):void
        {
            var jsonContent:Object = (new JSONDecoder()).decode(event.result.toString());
            //Assuming jsonContent.data is an Array
            resultDataGrid.dataProvider = new ArrayCollection(jsonContent.data);
        }
    ]]>
</fx:Script> 
```

# arm - ARM Thumb/Thumb-2 性能

> ID：15846737
> 
> 赞同：7
> 
> 时间：2013-04-06T03:31:59.670
> 
> 标签：arm, cortex-m3

我正在研究具有 Thumb-2 指令集的 ARM Cortex-M3 控制器。

Thumb 模式用于将指令压缩为 16 位大小。所以代码的大小减少了。但是在正常的Thumb模式下，为什么说性能降低了？

在 Thumb-2 的情况下，据说根据这两个链接提高了性能：

*   [维基百科](https://en.wikipedia.org/wiki/ARM_architecture#Thumb-2)
*   [Arm.com](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0344c/Beiiegaf.html)

> 在单个 16 位指令限制编译器可用功能的情况下提高性能。
> 
> Thumb-2 的一个既定目标是实现类似于 Thumb 的代码密度，其性能类似于 32 位内存上的 ARM 指令集。

这种表现究竟是什么？有人可以举一些与之相关的例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T04:01:40.017

与 ARM 32 位指令集相比，thumb 16 位指令集（还没有讨论 thumb2 扩展）占用的空间更少，因为指令大小只有一半，但通常会出现性能下降，因为它需要更多指令做与手臂相同的事情。指令集的功能较少，大多数指令仅在寄存器 r0-r7 上运行。Apples to Apples比较更多的指令来做同样的事情更慢。

现在 thumb2 扩展采用以前未定义的拇指指令并创建 32 位拇指指令。了解不止一组 thumb2 扩展。ARMv6m 可能会增加几十个。ARMv7m 向 thumb 指令集添加了 150 条指令，我不知道 ARMv8 或未来会发生什么。因此，假设 ARMv7m，他们已经弥合了您在 thumb 中可以做的事情和您在 ARM 中可以做的事情之间的差距。所以 thumb2 是一个精简的 ARM 指令集，就像 thumb 一样，但没有精简。因此，与 ARM 做同样的事情相比，在 thumb2（假设加上拇指）中做同样的事情可能仍然需要更多的指令。

这给出了问题的味道，手臂中的单个指令和拇指中的等效指令。

```
ARM

and r8,r9,r10

THUMB

push {r0,r1}
mov r0,r8
mov r1,r9
and r0,r1
mov r1,r10
and r0,r1
mov r8,r0
pop {r0,r1} 
```

现在编译器不会这样做，编译器会知道它的目标是拇指，并通过选择其他寄存器来做不同的事情。每条指令仍然有更少的寄存器和更少的功能：

```
mov r0,r1
and r0,r2 
```

仍然需要两个指令/执行周期和两个寄存器在一起，而不修改操作数，并将结果放在第三个寄存器中。Thumb2 有一个三个寄存器，因此您返回到使用 thumb2 扩展的单个指令。并且该 thumb2 指令允许在拇指限制为 r0-r7 的三个寄存器中的任何一个上使用 r0-r15。

查看 ARMv5 Architectural Reference Manual，在每个 thumb 指令下，它会显示等效的 ARM 指令。然后转到那个 ARM 指令并比较你可以用那个 arm 指令做什么，而你不能用 thumb 指令做。这是一条单向路径，拇指指令（不是拇指 2）与 ARM 指令具有一对一的关系。所有拇指指令都有一个等效的手臂指令。但并非所有手臂指令都有等效的拇指指令。您应该能够从这个练习中看到使用 thumb 指令集时对编译器的限制。然后拿到 ARMv7m Architectural Reference Manual 看指令集，对比一下“all thumb variant” 编码（包括 ARMv4T 的编码）和仅限于 ARMv6 和/或 v7 的编码，并查看 thumb 和 thumb2 之间的功能扩展以及没有 thumb 对应的仅 thumb2 指令。这应该阐明编译器必须在 thumb 和 thumb2 之间使用什么。然后，您可以将 thumb+thumb2 与完整的 ARM 指令进行比较（ARMv7 AR 就是它的名称？）。并且看到 thumb2 更接近于 ARM，但是你失去了例如每条指令的条件，所以 thumb2 中的条件执行变成了与代码分支的比较，在 ARM 中你有时可以有一个 if-then-else 没有分支.. . 这应该阐明编译器必须在 thumb 和 thumb2 之间使用什么。然后，您可以将 thumb+thumb2 与完整的 ARM 指令进行比较（ARMv7 AR 就是它的名称？）。并且看到 thumb2 更接近于 ARM，但是你失去了例如每条指令的条件，所以 thumb2 中的条件执行变成了与代码分支的比较，在 ARM 中你有时可以有一个 if-then-else 没有分支.. . 这应该阐明编译器必须在 thumb 和 thumb2 之间使用什么。然后，您可以将 thumb+thumb2 与完整的 ARM 指令进行比较（ARMv7 AR 就是它的名称？）。并且看到 thumb2 更接近于 ARM，但是你失去了例如每条指令的条件，所以 thumb2 中的条件执行变成了与代码分支的比较，在 ARM 中你有时可以有一个 if-then-else 没有分支.. .

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-25T00:29:16.560

Thumb-2 在原始 Thumb 中引入了可变长度指令；现在指令可以是 16 位和 32 位的混合。这意味着您在日常代码中保留了原始 Thumb 的大小优势，但现在可以在更复杂的代码中访问几乎完整的 ARM 功能集，但没有以前 Thumb 产生的 ARM 互通开销。

除了上述从所有寄存器操作中访问完整寄存器集之外，Thumb-2 还以 IF-THEN (IT) 块的形式添加了无分支条件执行。最初的 Thumb 删除了几乎所有指令上条件执行的商标 ARM 特性；现在，这在 Thumb-2 中通过在 IT 指令前加上最多四个后续指令的条件来实现。

此外，指令集本身也得到了极大的扩展；例如，Cortex-M4F 实现了 DSP 扩展以及 FPv4-SP 浮点扩展。事实上，我相信即使是 NEON 也可以在 Thumb2 中编码。

# c - ALSA“默认”与“hw：0,0”

> ID：15846741
> 
> 赞同：5
> 
> 时间：2013-04-06T03:34:26.857
> 
> 标签：c, linux, alsa

设备 "default" 与 "hw:0,0" 有什么区别？他们是一样的吗？

（背景：当我配置 hw:0,0 时，我在播放音频时遇到了一些麻烦，但“默认”工作。找不到导致这种情况的原因）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T08:12:03.213

`default`设备使用插件`plug`自动转换样本格式和速率，通常 alsa 使用`dmix`插件允许多个应用程序同时访问设备。

# ios6 - 使用 UICollectionView 创建书架

> ID：15846742
> 
> 赞同：63
> 
> 时间：2013-04-06T03:34:34.507
> 
> 标签：ios6, uicollectionview, uicollectionviewlayout

我将在我的一个项目中创建一个书架。基本要求如下：

*   类似于 iBooks 书架
*   很好地支持两个方向
*   很好地支持各种iOS设备（不同的分辨率）
*   支持删除和插入项目
*   支持通过长按手势重新排序项目
*   下拉第一行时显示隐藏的徽标

UICollectionView 是我想到的第一个选项。它很容易支持网格单元。所以我搜索了一下，发现了一些非常有用的教程：

[Bryan Hansen 的 UICollectionView 自定义布局教程](http://skeuo.com/uicollectionview-custom-layout-tutorial)

[Mark Pospesel 的如何将装饰视图添加到 UICollectionView](http://markpospesel.wordpress.com/author/mpospese/)

[LXReorderableCollectionViewFlowLayout](https://github.com/lxcid/LXReorderableCollectionViewFlowLayout)

结果如下：（请忽略颜色不一致问题，因为我选择的图形还不完美。）

![在此处输入图像描述](https://i.stack.imgur.com/M1EaC.jpg)

我做了什么：

1.  通过创建一个`LXReorderableCollectionViewFlowLayout`继承自 UICollectionFlowLayout 的类（用于重新排序）来创建自定义布局
2.  添加了用于显示徽标的装饰视图
3.  添加了用于显示书架的装饰视图

但是我遇到了几个问题：

**1.如果项目可以在一个屏幕上显示，我根本无法滚动**

然后我添加了以下代码，以使内容大小更大

```
- (CGSize)collectionViewContentSize
{
    return CGSizeMake(self.collectionView.bounds.size.width,      self.collectionView.bounds.size.height+100);
} 
```

然后我现在可以滚动了。在这里，我拉下第一行：

![在此处输入图像描述](https://i.stack.imgur.com/EZKk9.jpg)

您可以看到徽标的装饰视图正在工作。

**2\. 但是我拉到最后一行的时候遇到了第二组问题：**

![在此处输入图像描述](https://i.stack.imgur.com/0DuSX.jpg)

可以看到绿色框部分没有添加装饰视图。

**3、书架装饰视图的背景越来越暗。（请在此处参考[相同的问题](https://stackoverflow.com/questions/14882837/decorationviews-on-uicollectionview-are-duplicated-on-every-insert)**

**4\. 重新排序时书架栏有时会移动**

![在此处输入图像描述](https://i.stack.imgur.com/RWCbn.jpg)

我在这里列出了一些重要的代码：

```
- (void)prepareLayout
{
    // call super so flow layout can do all the math for cells, headers, and footers
    [super prepareLayout];

    NSMutableDictionary *dictionary = [NSMutableDictionary dictionary];
    NSMutableDictionary *shelfLayoutInfo = [NSMutableDictionary dictionary];

    // decoration view - emblem
    NSIndexPath *indexPath = [NSIndexPath indexPathForItem:0 inSection:0];
    UICollectionViewLayoutAttributes *emblemAttributes =
        [UICollectionViewLayoutAttributes layoutAttributesForDecorationViewOfKind:[EmblemView kind]
            withIndexPath:indexPath];
    emblemAttributes.frame = [self frameForEmblem:YES];
    dictionary[[EmblemView kind]] = @{indexPath: emblemAttributes};

    // Calculate where shelves go in a vertical layout
    int sectionCount = [self.collectionView numberOfSections];

    CGFloat y = 0;
    CGFloat availableWidth = self.collectionViewContentSize.width - (self.sectionInset.left + self.sectionInset.right);
    int itemsAcross = floorf((availableWidth + self.minimumInteritemSpacing) / (self.itemSize.width + self.minimumInteritemSpacing));

    for (int section = 0; section < sectionCount; section++)
    {
        y += self.headerReferenceSize.height;
        //y += self.sectionInset.top;

        int itemCount = [self.collectionView numberOfItemsInSection:section];
        int rows = ceilf(itemCount/(float)itemsAcross)+1; // add 2 more empty row which doesn't have any data
        for (int row = 0; row < rows; row++)
        {
            indexPath = [NSIndexPath indexPathForItem:row inSection:section];
            shelfLayoutInfo[indexPath] = [NSValue valueWithCGRect:CGRectMake(0,y, self.collectionViewContentSize.width, self.itemSize.height + DECORATION_HEIGHT)];
            y += self.itemSize.height;

            if (row < rows - 1)
                y += self.minimumLineSpacing;
        }

        y += self.sectionInset.bottom;
        y += self.footerReferenceSize.height;
    }

    dictionary[[ShelfView kind]] = shelfLayoutInfo;

    self.shelfLayoutInfo = dictionary;
}

- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray *attributesArrayInRect = [super layoutAttributesForElementsInRect:rect];

    // cell layout info
    for (BookShelfLayoutAttributes *attribs in attributesArrayInRect)
    {

        attribs.zIndex = 1;
        CATransform3D t = CATransform3DIdentity;
        t = CATransform3DTranslate(t, 0, 0, 40);
        attribs.transform3D = CATransform3DRotate(t, 15 * M_PI / 180, 1, 0, 0);
    }

    // Add our decoration views (shelves)
    NSMutableDictionary* shelfDictionary = self.shelfLayoutInfo[[ShelfView kind]];
    NSMutableArray *newArray = [attributesArrayInRect mutableCopy];

    [shelfDictionary enumerateKeysAndObjectsUsingBlock:^(id key, NSValue* obj, BOOL *stop) {

        if (CGRectIntersectsRect([obj CGRectValue], rect))
        {
            UICollectionViewLayoutAttributes *attributes = [UICollectionViewLayoutAttributes layoutAttributesForDecorationViewOfKind:[ShelfView kind] withIndexPath:key];
            attributes.frame = [obj CGRectValue];

            NSLog(@"decorationView rect = %@",NSStringFromCGRect(attributes.frame));
            attributes.zIndex = 0;
            //attributes.alpha = 0.5; // screenshots
            [newArray addObject:attributes];
        }
    }];

    attributesArrayInRect = [NSArray arrayWithArray:newArray];

    NSMutableDictionary* emblemDictionary = self.shelfLayoutInfo[[EmblemView kind]];
    NSMutableArray *newArray2 = [attributesArrayInRect mutableCopy];
    [emblemDictionary enumerateKeysAndObjectsUsingBlock:^(NSIndexPath *indexPath, UICollectionViewLayoutAttributes *attributes, BOOL *innerStop) {
        if (CGRectIntersectsRect(rect, attributes.frame)) {
            [newArray2 addObject:attributes];
        }
    }];

    attributesArrayInRect = [NSArray arrayWithArray:newArray2];

    return attributesArrayInRect;
} 
```

如果您有足够的耐心阅读这篇文章并提供任何建议或建议，我将不胜感激。如果我能解决所有问题，我会发布完整的源代码。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-27T10:29:10.410

我建议检查你的最后一行并对`[self.collectionView ScrollEnable:NO]`第一行做同样的事情，设置背景颜色清除 collectionView 和 collectionViewCell 以及背景视图上的书架图像集。

# django - /register/处的Django KeyError

> ID：15846743
> 
> 赞同：0
> 
> 时间：2013-04-06T03:34:51.163
> 
> 标签：django

我有一个允许用户注册的注册，但我很难修复它。

问题是当用户提交单个字段而不是整个表单时，例如电子邮件。我收到这个错误

```
KeyError at /register/

password
Request Method:     POST
Request URL:    http://127.0.0.1:8000/register/
File "C:\Python26\Lib\site-packages\django\forms\forms.py" in _get_errors
  115\.             self.full_clean()
File "C:\Python26\Lib\site-packages\django\forms\forms.py" in full_clean
  271\.         self._clean_form()
File "C:\Python26\Lib\site-packages\django\forms\forms.py" in _clean_form
  299\.             self.cleaned_data = self.clean()
File "C:\o\17\mysite\pet\forms.py" in clean
  31\.       if self.cleaned_data['password'] != self.cleaned_data['password1']:

Exception Type: KeyError at /register/
Exception Value: password 
```

我尝试使用 if 修复此解决方案。如果用户提交了用户名或任何其他必填字段，则处理表单，否则重新显示原始表单。

但我仍然得到同样的错误。

这是我编辑的views.py ***（页面底部是我原来的RegistrationForm）***

```
def PetRegistration(request):   
    if request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:HappyLand'))

    if request.method =='POST':
        form = UserRegistration(request.POST)
    if form.is_valid():
        username = form.cleaned_data['username']
        if username:
            email=form.cleaned_data['email']
            if email:
                password=form.cleaned_data['password']
                if password:
                    user = User.objects.create_user(
            username=form.cleaned_data['username'], 
            email=form.cleaned_data['email'], 
            password=form.cleaned_data['password']
            )
                    user.is_active = True
                    user.first_name = form.cleaned_data['name']
                    user.save()

                    person = authenticate(
            username=form.cleaned_data['username'], 
            password=form.cleaned_data['password']
            )

                    Person.objects.create(user_id=user.id, 
                    name=form.cleaned_data['name'],birthday=form.cleaned_data['birthday'])

                    login(request, person)
                    return HttpResponseRedirect(reverse('world:HappyLand'))

return render(request, 'register.html', {'form': UserRegistration()}) 
```

如何修复此错误以及如何在用户未填写的其他字段上显示错误消息，例如“错误缺少字段，请填写此字段”。

```
def PetRegistration(request):   
if request.user.is_authenticated():
    return HttpResponseRedirect(reverse('world:HappyLand'))

if request.method =='POST':
    form = UserRegistration(request.POST)
    if form.is_valid():
        user = User.objects.create_user(
            username=form.cleaned_data['username'], 
            email=form.cleaned_data['email'], 
            password=form.cleaned_data['password']
            )
        user.is_active = True
        user.first_name = form.cleaned_data['name']
        user.save()

        person = authenticate(
            username=form.cleaned_data['username'], 
            password=form.cleaned_data['password']
            )

        Person.objects.create(user_id=user.id, 
            name=form.cleaned_data['name'],birthday=form.cleaned_data['birthday'])

        login(request, person)
        return HttpResponseRedirect(reverse('world:HappyLand'))

return render(request, 'register.html', {'form': UserRegistration()}) 
```

我的表格.py

```
class UserRegistration(forms.Form):
    username = forms.CharField()
    name = forms.CharField()
    email = forms.EmailField()
    birthday = forms.DateField(widget=extras.SelectDateWidget(years=range(1950, 2012)))

    password = forms.CharField(
        widget=forms.PasswordInput(render_value=False)
        )
    password1 = forms.CharField(
        label=(u'Verify Password'), 
        widget = forms.PasswordInput(render_value=False)
        )

    def clean_username(self):
        username = self.cleaned_data['username']
        try:
            User.objects.get(username=username)
        except User.DoesNotExist:
            return username
        raise forms.ValidationError(
            "That user is already taken , please select another ")

    def clean(self):
        if self.cleaned_data['password'] != self.cleaned_data['password1']:
            raise forms.ValidationError("The password does not match ")
        return self.cleaned_data 
```

我的模型.py

```
class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100, blank=True)
    birthday = models.DateField(blank=True,null=True)
    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T20:15:01.930

问题出在你的`clean()`. 在`clean()`中，您正在尝试访问`password`表单上的字段`cleaned_data`。`password`仅`cleaned_data`当用户填写此字段时才可用。因此，您必须在尝试访问它之前检查它`password`是否存在。`cleaned_data`

改变你的`clean()`：

```
def clean(self):
    if 'password' in self.cleaned_data and 'password1' in self.cleaned_data and self.cleaned_data['password'] != self.cleaned_data['password1']:
        raise forms.ValidationError("The password does not match ")
    return self.cleaned_data 
```

您可以在表单字段上提供关键字参数`error_messages`以显示错误消息，例如“错误缺少字段，请填写此字段”。

```
class SomeForm(forms.Form):
    name = forms.CharField(error_messages={'required':'Error Missing Field , Please Fill this Field'}) 
```

您的视图中有一个错误。

is_valid() 填充表单上的错误，但必须将同一个表单实例发送到模板，以便您可以访问表单字段上的错误。

`render()`但在您看来，即使发布请求中的表单无效，您也只有一个调用被调用。在此`render()`，您正在创建一个新的表单实例。因此，您发送到模板的这个新表单不会有任何错误。

因此，对您的视图稍作修改：

```
def PetRegistration(request):   
    if request.user.is_authenticated():
    return HttpResponseRedirect(reverse('world:HappyLand'))

    form = UserRegistration() #This will be used in GET request
    if request.method =='POST':
        form = UserRegistration(request.POST) #This will be used in POST request
        if form.is_valid():
            user = User.objects.create_user(
                username=form.cleaned_data['username'], 
                email=form.cleaned_data['email'], 
                password=form.cleaned_data['password']
            )
            user.is_active = True
            user.first_name = form.cleaned_data['name']
            user.save()

            person = authenticate(
                username=form.cleaned_data['username'], 
                password=form.cleaned_data['password']
            )

            Person.objects.create(user_id=user.id, 
                name=form.cleaned_data['name'],birthday=form.cleaned_data['birthday'])

            login(request, person)
            return HttpResponseRedirect(reverse('world:HappyLand'))

    return render(request, 'register.html', {'form': form}) 
```

请注意，在您看来，我`form=UserRegistration()`在检查其是否为 POST 请求之前添加了注释，并在我们正在实例化的两个地方添加了注释`UserRegistration`。然后在`render()`，你应该发送这个`form`。

然后你`{{form.username.errors}}`会工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T03:51:00.703

我刚刚修改了你的 forms.py

```
class UserRegistration(forms.Form):
    username = forms.CharField()
    name = forms.CharField()
    email = forms.EmailField()
    birthday = forms.DateField(widget=extras.SelectDateWidget(years=range(1950, 2012)))
    password = forms.CharField(
        widget=forms.PasswordInput(render_value=False)
        )
    password1 = forms.CharField(
        label=(u'Verify Password'), 
        widget = forms.PasswordInput(render_value=False)
        )

    def clean(self):
        cleaned_data = super(UserRegistration, self).clean()
        username = cleaned_data.get("username")
        password = cleaned_data.get("password")
        password1 = cleaned_data.get("password1")

        #check if username exist  
        user = User.objects.filter(username=username)
        if user:
            raise forms.ValidationError(
                "That user is already taken , please select another ")

        #check password
        if password != password1:
            raise forms.ValidationError(
                "Your current and confirm password do not match.")

        return cleaned_data 
```

# perl - 在 Perl 中将引用浅复制到变量中

> ID：15846746
> 
> 赞同：7
> 
> 时间：2013-04-06T03:35:24.917
> 
> 标签：perl, shallow-copy, arrayref

在 Perl 中，您可以为一个变量分配对另一个变量的引用，如下所示：

```
my @array = (1..10);
my $ref = \@array; 
```

而且，因为它是一个参考，你可以做这样的事情，这两个变量都会受到影响：

```
push @array, 11;
push @$ref, 12; 
```

并且两个变量都将包含`1..12`，因为它们都指向同一个空间。

现在，我想知道是否有任何方法可以做同样的事情，但从一个 ref 开始，然后将该引用分配给一个普通变量。例如：

```
my $ref = [1..12];
my @array = # something here that makes @array point to the same space $ref contains 
```

我知道我可以像这样分配它：

```
my @array = @$ref; 
```

但是，那是副本。如果我更改 $ref 或 @array，这些将是独立的更改。

有没有办法让@array 指向与 $ref 相同的变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T12:09:22.347

四种方式：

*   `our @array; local *array = $ref;`
*   `\my @array = $ref;`（5.22 新增实验功能）
*   `use Data::Alias; alias my @array = @$ref;`
*   使用魔法（例如`tie my @array, 'Tie::StdArrayX', $ref;`）

但当然，明智的做法是

```
my $array = $ref; 
```

并使用`@$array`而不是`@array`.

* * *

上述 Tie::StdArrayX:

```
package Tie::StdArrayX;
use Tie::Array qw( );
our @ISA = 'Tie::StdArray';
sub TIEARRAY { bless $_[1] || [], $_[0] } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T05:27:06.473

这可以在数组是包变量时使用 typeglobs 来完成。

```
my $foo = [7,8,9];
our @bar;
*bar = $foo;
$foo->[1] = 3;
print @bar;     # "739" 
```

但是，词法变量（即`my @bar`）不能用 typeglob 分配。也许有一个围绕[`PadWalker`](http://search.cpan.org/perldoc?PadWalker).

# web-services - 为什么最后更新（空）

> ID：15846756
> 
> 赞同：0
> 
> 时间：2013-04-06T03:37:57.350
> 
> 标签：web-services, ios6, passbook

我创建了一个通行证，可以将设备注册到我的服务器。我还通过更改一些内容并插入新的 pass 行来更新这个 pass 到 pass 表。但是为什么在控制台中，最后更新（null）？这是我从控制台得到的：
`Apr 6 10:30:29 CamMobs-iPod4 passd[21] <Warning>: Get serial #s task (for device b6511c0dd47d04da449ce427b27fea74, pass type pass.cam-mob.passbookpasstest, last updated (null);` `with web service url http://192.168.1.202:8888/passesWebserver/) got response with code 200`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:24:29.527

每当设备的 Passbook 库中接受或替换 .pkpass 包时，Passbook 都会使用最后更新的属性标记该通行证。

此属性通常由`Last-Modified`网络服务器在第一次下载通行证时发送的标头设置，并且您的网络服务会随每个响应发送到“[获取通行证的最新版本](https://developer.apple.com/library/ios/#documentation/PassKit/Reference/PassKit_WebService/WebService.html#//apple_ref/doc/uid/TP40011988)”响应。

Passbook 还使用“[获取与设备关联的通行证的序列号](https://developer.apple.com/library/ios/#documentation/PassKit/Reference/PassKit_WebService/WebService.html#//apple_ref/doc/uid/TP40011988)”方法轮询您的 Web 服务`serialNumbers`，使用`deviceLibraryIdentifier`和`passTypeIdentifier`作为条件。

“[获取与设备关联的通行证的序列号](https://developer.apple.com/library/ios/#documentation/PassKit/Reference/PassKit_WebService/WebService.html#//apple_ref/doc/uid/TP40011988)”响应应包含一个标签`lastUpdated`，指示此查询的结果最后一次更改的时间（即最后一次使用`passTypeIdentifier`注册到此的通行证`deviceLibraryIdentifier`最后一次更新的时间）。

但是，Passbook 第一次发送“[获取与设备关联的通行证的序列号](https://developer.apple.com/library/ios/#documentation/PassKit/Reference/PassKit_WebService/WebService.html#//apple_ref/doc/uid/TP40011988)”时，它不会收到`lastUpdated`标签，这就是它显示`null`在控制台日志中的原因。此外，发送`lastUpdated`标签是可选的，所以如果它不存在，或者如果它没有正确发送，那么您将始终看到`last updated (null)`这个请求。

您可以随意使用任何您喜欢的`lastUpdated`标签。实现的最简单的解决方案是 unix 时间戳，因为没有必要搞乱日期格式。

# node.js - 在获取 OAuth 的请求令牌流时，我收到“给定的 URL 被认为是恶意软件”

> ID：15846760
> 
> 赞同：-2
> 
> 时间：2013-04-06T03:38:35.507
> 
> 标签：node.js, twitter, oauth, express, twitter-oauth

我正在使用 node.js(10.x) 和 express(3.x) 创建 Web 应用程序。
我选择了[node-oauth](https://github.com/ciaranj/node-oauth)作为 twitter oauth 模块。

但是在请求Token时，会返回以下错误。

> { statusCode: 401, data: '<?xml version="1.0" encoding="UTF-8"?>\n\n <request>/oauth/request_token</request>\n <error>考虑给定的 URL恶意软件</error>\n</hash>\n' }

身份验证已成功多次，但突然发送此错误，之后我从未成功过。

怎么了？多次请求是什么原因？

代码如下

```
var oauth = require('oauth');

var consumer = new oauth.OAuth(
    'https://api.twitter.com/oauth/request_token'
  , 'https://api.twitter.com/oauth/access_token'
  , 'My consumer key'
  , 'My consumer secret'
  , '1.0A'
  , 'http://localhost:3000/sessions/access' //I'm testing in local
  , 'HMAC-SHA1'
);

/** In the actual code, Some express settings exist like followings
 *  var express = require('express');
 *  var app = express();
 *  app.set(foo, bar);
 *  app.use(baz);
 *   and so on.
 */

app.get('/sessions/connect', function(req, res, next) {
    consumer().getOAuthRequestToken(function(err, oauthToken, oauthTokenSecret, results) {
      if (err) {     //This err says the above error.
        next(err);
      } else {
        req.session.oauthRequestToken = oauthToken;
        req.session.oauthRequestTokenSecret = oauthTokenSecret;
        res.redirect('https://api.twitter.com/oauth/authorize?oauth_token=' + oauthToken);
      }   
    }); 
  });

app.get('/sessions/access', function(req, res, next) {
    consumer().getOAuthAccessToken(req.session.oauthRequestToken, req.session.oauthRequestTokenSecret, req.query.oauth_verifier, function(err, oauthAccessToken, oauthAccessTokenSecret, results) {
      if (err) {
        next(err);
      } else {
        req.session.oauthAccessToken = oauthAccessToken;
        req.session.oauthAccessTokenSecret = oauthAccessTokenSecret;
        req.session.user_id = results.user_id;
        req.session.isAuthorized = true;
        res.redirect('/');
      }
    });
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:23:22.357

肯，你的错误信息解释了这个问题。您尝试连接到 twitter 的该节点应用程序/站点已被标记为恶意软件或垃圾邮件。可能是因为请求太多。或者，也许您在不知不觉中滥用了 Twitter 帐户。

您可以提交工单以调查问题所在。请参阅此页面。

[https://support.twitter.com/articles/90491-my-website-is-being-flagged-as-malware-or-spam](https://support.twitter.com/articles/90491-my-website-is-being-flagged-as-malware-or-spam)

# c - timeval_subtract 解释

> ID：15846762
> 
> 赞同：4
> 
> 时间：2013-04-06T03:39:28.987
> 
> 标签：c

使用“timeval_subtract”函数来查找两个 struct timeval 类型之间经过的时间，有人可以解释用于“通过更新 y 执行后续减法的进位”和其他部分的目的和逐步数学吗？我了解该功能的用途以及如何在程序中实现它，但我想了解它在内部是如何工作的，并且在任何地方都找不到对此的任何解释，而且我似乎无法理解它。

```
int timeval_subtract (struct timeval *result, struct timeval *x,struct timeval  *y)  
{  
  /* Perform the carry for the later subtraction by updating y. */  
  if (x->tv_usec < y->tv_usec) {  
    int nsec = (y->tv_usec - x->tv_usec) / 1000000 + 1;  
    y->tv_usec -= 1000000 * nsec;  
    y->tv_sec += nsec;  
  }  
  if (x->tv_usec - y->tv_usec > 1000000) {  
    int nsec = (y->tv_usec - x->tv_usec) / 1000000;  
    y->tv_usec += 1000000 * nsec;  
    y->tv_sec -= nsec;  
  }  

  /* Compute the time remaining to wait.
     tv_usec is certainly positive. */  
  result->tv_sec = x->tv_sec - y->tv_sec;  
  result->tv_usec = x->tv_usec - y->tv_usec;  

  /* Return 1 if result is negative. */  
  return x->tv_sec < y->tv_sec;  
} 
```

这是一个与 GNU C 库相关的函数，用于确定经过时间[https://ftp.gnu.org/old-gnu/Manuals/glibc-2.2.5/html_node/Elapsed-Time.html](https://ftp.gnu.org/old-gnu/Manuals/glibc-2.2.5/html_node/Elapsed-Time.html) 所以我不是在寻找改进，而只是解释为什么在其中进行除法加减乘法。这些特定的算术运算实现了什么？/为什么它们完成/没有完成？我已经完成了步骤，但仍然无法理解它。我将继续这样做，直到我这样做（甚至在有人向我解释之后），但我希望从已经理解它的人那里获得一些见解。该平台是 UNIX，我是新手，但我认为它不会改变函数内部发生的操作。这更多的是关于正在执行的算术而不是正在使用的算法的问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-06T10:24:41.293

乍一看，它似乎`struct timeval`包含一个分为两部分的时间：

*   `tv_usec`- 微秒，理想情况下应始终低于 1000000，但似乎允许更大的值，如代码所示
*   `tv_sec`- 秒（1000000 的倍数）

以微秒为单位的时间是`tv_usec`+ `tv_sec`* 1000000。

相反，人们会期望这是真的：

*   `tv_sec`= 以微秒为单位的时间 / 1000000
*   `tv_usec`= 以微秒为单位的时间 % 1000000。

该函数似乎计算`*x`和`*y`（逻辑上，`*x`- `*y`）之间的时间差并将其存储在另一个`struct timeval`, 中`*result`。

一个简单的测试程序给了我们一些提示：

```
#include <stdio.h>

struct timeval
{
  long tv_sec;
  long tv_usec;
};

int timeval_subtract(struct timeval *result, struct timeval *x, struct timeval *y)
{  
  // preserve *y
  struct timeval yy = *y;
  y = &yy;

  /* Perform the carry for the later subtraction by updating y. */  
  if (x->tv_usec < y->tv_usec) {  
    int nsec = (y->tv_usec - x->tv_usec) / 1000000 + 1;  
    y->tv_usec -= 1000000 * nsec;  
    y->tv_sec += nsec;  
  }  
  if (x->tv_usec - y->tv_usec > 1000000) {  
    int nsec = (y->tv_usec - x->tv_usec) / 1000000;  
    y->tv_usec += 1000000 * nsec;  
    y->tv_sec -= nsec;  
  }  

  /* Compute the time remaining to wait.
     tv_usec is certainly positive. */  
  result->tv_sec = x->tv_sec - y->tv_sec;  
  result->tv_usec = x->tv_usec - y->tv_usec;  

  /* Return 1 if result is negative. */  
  return x->tv_sec < y->tv_sec;  
}

struct timeval testData00 = { 0, 0 };
struct timeval testData01 = { 0, 1 };

int main(void)
{
  struct timeval diff;
  int res;

  res = timeval_subtract(&diff, &testData00, &testData00);
  printf("%d %ld:%ld\n", res, diff.tv_sec, diff.tv_usec);

  res = timeval_subtract(&diff, &testData01, &testData01);
  printf("%d %ld:%ld\n", res, diff.tv_sec, diff.tv_usec);

  res = timeval_subtract(&diff, &testData01, &testData00);
  printf("%d %ld:%ld\n", res, diff.tv_sec, diff.tv_usec);

  res = timeval_subtract(&diff, &testData00, &testData01);
  printf("%d %ld:%ld\n", res, diff.tv_sec, diff.tv_usec);

  return 0;
} 
```

输出（[ideone](http://ideone.com/aZzQsv)）：

```
0 0:0
0 0:0
0 0:1
1 -1:999999 
```

从最后的测试结果看来，该函数返回 (-1):999999 而不是 -(0:1)。两个值都代表相同的负时间（或时间差），以微秒为单位：

*   -1 * 1000000 + 999999 = -1
*   -(0 * 1000000 + 1) = -1

那么，它是如何真正起作用的呢？

如果`x->tv_usec`>=`y->tv_usec`那么只有第二个`if`可能^*执行：

```
 if (x->tv_usec - y->tv_usec > 1000000) {  
    int nsec = (y->tv_usec - x->tv_usec) / 1000000;  
    y->tv_usec += 1000000 * nsec;  
    y->tv_sec -= nsec;  
  } 
```

这将`if`检查仅微秒部分的差异是否大于 1 秒。如果是，它会从`y->tv_usec`（以微秒计）中减去此差异的整个秒数并将其添加到`y->tv_sec`（以秒计）。这只是重新分配了时间，`*y`而没有真正改变它。您可以像这样等效地重写`if`它以更清楚地看到它：

```
 if (x->tv_usec - y->tv_usec > 1000000) {  
    int nsec = (x->tv_usec - y->tv_usec) / 1000000;  
    y->tv_usec -= 1000000 * nsec;  
    y->tv_sec += nsec;  
  } 
```

这里要注意的一件重要的事情是，当输入`*x`和`*y`它们`tv_usec`的范围在 0 到 999999 之间时，它的主体*不会*执行`if`（因此，*当*> =^和何时在 0 到999999）。*^(*`x->tv_usec``y->tv_usec``tv_usecs`*)*

 **其净影响`if`现在还不是很清楚。

但是，在这里可以看到一件有趣的事情。如果我们用`*x`= 0:1000001 和`*y`= 0:0 调用这个函数，结果将是错误的：[差 = (-1):2000001（而不是 1:1）并且函数的返回值 = 1（而不是0)](http://ideone.com/WJDfAk)。这表明该函数并不真正适合`tv_usec > 1000000`，甚至不适合`tv_usec > 999999`. 由于这种行为，我将声称该函数也不适合`tv_usec`输入中的负数。面对这种行为，我将忽略这些情况。它看起来已经够错了。

让我们看第一个`if`。

```
 /* Perform the carry for the later subtraction by updating y. */  
  if (x->tv_usec < y->tv_usec) {  
    int nsec = (y->tv_usec - x->tv_usec) / 1000000 + 1;  
    y->tv_usec -= 1000000 * nsec;  
    y->tv_sec += nsec;  
  } 
```

正如评论和代码所暗示的，当`x->tv_usec`<`y->tv_usec`我们需要处理“数字”之间的“进位”，就好像我们是在加法而不是减法一样。但没关系，我们会看到的。

让我们回学校一会儿。

37 - 12 你是怎么做的？

你这样做：

```
7 - 2 = 5
3 - 1 = 2 
```

所以 37 - 12 = 25。

现在，你怎么做 57 - 38？

你这样做：

```
10/*because 7 < 8*/ + 7 - 8 = 9
5 - 3 - 1/*borrow, because of the above*/ = 1 
```

所以 57 - 38 = 19。看到了吗？

和检查：

```
 if (x->tv_usec < y->tv_usec) { 
```

检查我们是否需要处理这种借款。

那么，这里发生了什么？我们再看一遍：

```
 if (x->tv_usec < y->tv_usec) {  
    int nsec = (y->tv_usec - x->tv_usec) / 1000000 + 1;  
    y->tv_usec -= 1000000 * nsec;  
    y->tv_sec += nsec;  
  } 
```

如果`y->tv_usec`> `x->tv_usec`，它以整秒为单位计算两者之间的差异，就像另一个一样，`if`它将这些整秒添加到`y->tv_sec`并从中减去它们`y->tv_usec`，只需重新分配 中的时间`*y`，而不更改它。

`+ 1`最终添加到此处的额外的 ( )`y->tv_sec`将从`x->tv_sec`函数 ( ) 的末尾减去`result->tv_sec = x->tv_sec - y->tv_sec;`，因此这 1 用作我刚刚在 57 - 38 = 19 示例中提醒您的借用。

除了借用本身和一些时间重新分配之外，这里还发生了什么？

就像我之前说的，我将忽略负数`tv_usecs`和大于 999999 的可能处理不当。

有了这个，我认为`(y->tv_usec - x->tv_usec) / 1000000`是 0，我只剩下真正有意义的值`tv_usecs`（0 到 999999 包括在内）。

所以，如果`if's`条件为真，我基本上减去 1000000`y->tv_usec`并将 1（借位）加到`y->tv_sec`.

这与我们在 57 - 38 = 19 中的情况相同：

```
10/*because 7 < 8*/ + 7 - 8 = 9
5 - 3 - 1/*borrow, because of the above*/ = 1 
```

与这 10 类似，稍后将在此处添加 1000000：`result->tv_usec = x->tv_usec - y->tv_usec;`

这首先`if`是函数的核心。

如果我必须编写一个具有类似行为的函数，我会要求输入时间是非负的，并且微秒部分不大于 999999，我会写这个：

```
int timeval_subtract(struct timeval *result, struct timeval *x, struct timeval *y)
{
  result->tv_sec = x->tv_sec - y->tv_sec;

  if ((result->tv_usec = x->tv_usec - y->tv_usec) < 0)
  {
    result->tv_usec += 1000000;
    result->tv_sec--; // borrow
  }

  return result->tv_sec < 0;
} 
```

如果出于某种奇怪的原因，我想`tv_usec`在输入中支持 > 999999，我首先将多余的从`tv_usec`to 移到`tv_sec`，然后执行上述操作，如下所示：

```
int timeval_subtract(struct timeval *result, struct timeval *x, struct timeval *y)
{
  struct timeval xx = *x;
  struct timeval yy = *y;
  x = &xx; y = &yy;

  if (x->tv_usec > 999999)
  {
    x->tv_sec += x->tv_usec / 1000000;
    x->tv_usec %= 1000000;
  }

  if (y->tv_usec > 999999)
  {
    y->tv_sec += y->tv_usec / 1000000;
    y->tv_usec %= 1000000;
  }

  result->tv_sec = x->tv_sec - y->tv_sec;

  if ((result->tv_usec = x->tv_usec - y->tv_usec) < 0)
  {
    result->tv_usec += 1000000;
    result->tv_sec--; // borrow
  }

  return result->tv_sec < 0;
} 
```

在这里，意图很明确，代码也很容易理解。**

# java - 无法使用 itext 和 java 对 pdf 进行数字签名

> ID：15846763
> 
> 赞同：0
> 
> 时间：2013-04-06T03:39:33.203
> 
> 标签：java, pdf, itext

我正在尝试将基本数字签名放在 pdf 文件上。我正在尝试使用 itext 网站上提供的代码。代码如下 -

```
 public class DigiSign {
public static void main(String a[])
{
    try {

        KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());
        ks.load(new FileInputStream("C:\\WSR\\keystore.ks"), "password".toCharArray());
        String alias = (String) ks.aliases().nextElement();
        PrivateKey key = (PrivateKey) ks.getKey(alias, "password".toCharArray());
        java.security.cert.Certificate[] chain = ks.getCertificateChain(alias);
        PdfReader reader = new PdfReader("C:\\WSR\\a.pdf");
        FileOutputStream fout = new FileOutputStream("C:\\WSR\\signed.pdf");
        PdfStamper stp = PdfStamper.createSignature(reader, fout, '\0');
        PdfSignatureAppearance sap = stp.getSignatureAppearance();
        sap.setCrypto(key, chain, null, PdfSignatureAppearance.WINCER_SIGNED);
        sap.setReason("arpit");
        sap.setLocation("arpit");
        // comment next line to have an invisible signature
        sap.setVisibleSignature(new Rectangle(10, 10, 20, 20), 1, null);
        stp.close();
    } catch (Exception ex) {
        Logger.getLogger(DigiSign.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

}

我使用创建了密钥

keytool -genkey -keyalg RSA -alias myname -keypass password -keystore keystore.ks -dname "cn=Paulo Soares, c=PT" 并将 abc123 设置为我的密码。现在当我运行这段代码时，我得到了这个异常

```
 Exception in thread "main" java.lang.NoClassDefFoundError: org/bouncycastle/asn1/DEREncodable
    at com.lowagie.text.pdf.PdfSignatureAppearance.getAppearance(Unknown Source)
    at com.lowagie.text.pdf.PdfSignatureAppearance.preClose(Unknown Source)
    at com.lowagie.text.pdf.PdfSignatureAppearance.preClose(Unknown Source)
    at com.lowagie.text.pdf.PdfStamper.close(Unknown Source)
    at DigiSign.main(DigiSign.java:42)
   Caused by: java.lang.ClassNotFoundException: org.bouncycastle.asn1.DEREncodable
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:15:32.310

（只是将原因表述为之前已作为评论提出的答案：）

对于安全性低级别操作，iText 基于 BouncyCastle 库。这尤其涉及集成 PDF 签名的创建和验证，以及加密文档的处理。因此，在这些用例中，应用程序的类路径上需要适当的 BouncyCastle 提供程序库。

主要异常信息

```
java.lang.NoClassDefFoundError: org/bouncycastle/asn1/DEREncodable 
```

表示此要求未满足，BouncyCastle 根本不存在或至少在所需版本中不存在。与此同时，@user1946152 已经确认了他的配置。

PS：显然，在手头的情况下，OP 仍然使用 5.x 之前的 iText 版本。虽然有某些条件强制执行此操作（例如，管理层不愿意决定何时购买许可证*sigh*），但您应该明确更新到 iText 的当前版本。同时也发生了许多重大变化，特别是在电子签名、内容解析和 PDF/A 文档创建等领域。

# html - 引导跨度在 ie8 中不浮动

> ID：15846765
> 
> 赞同：0
> 
> 时间：2013-04-06T03:39:37.193
> 
> 标签：html, twitter-bootstrap, internet-explorer-8

可能有人可以帮忙。我有以下html。它应该显示 div1 和 div 2 并排显示。然而它并没有发生在 IE8 中。我错过了什么吗？

```
<div class="row-fluid">
  <div class="span3">content here</div>
  <div class="span9">content here</div>
</div> 
```

我的页面头部包含 normalize.css 和 bootstrap.css。FF 和 chrome 正确显示 div。

这是CSS

```
.row-fluid .span3 {
    width: 20.8333%;
}

.row-fluid .span9 {
    width: 79.1667%;
}

.row-fluid [class*="span"] {
    display: block;
    width: 100%;
    min-height: 30px;
    -moz-box-sizing: border-box;
    float: left;
    margin-left: 0%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:42:09.787

你可以漂浮它们。在左侧 div 上使用 float:left 样式

```
<div class="row-fluid">
  <div style="float:left" class="span3">content here</div>
  <div class="span9">content here</div>
</div> 
```

# sdk - 按名称获取对象数量 Corona SDK

> ID：15846766
> 
> 赞同：0
> 
> 时间：2013-04-06T03:39:49.867
> 
> 标签：sdk, count, coronasdk

我正在尝试查看是否可以获取所有具有相同名称的对象。我正在使用以下代码在屏幕上加载一堆圆圈。他们都有相同的

```
local myCircle = display.newCircle(30+(yCount*20), 220+(yCount*10), 8)
myCircle.name = "peg" 
```

我想有办法做到这一点，但我不知道在哪里寻找这样的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:07:27.377

首先你需要一个圆形数组

```
array = {} 
```

然后，当您创建一个圆圈时，您应该将该圆圈添加到数组中

```
array[#array+1] = myCircle 
```

现在这里是特定名称的查找功能

```
local function findByName( name )
    local resultArray = {}
    for i=1, #array do
        if array[i].name == name then
             resultArray[#resultArray+1] = array[i]
        end
    end
    return resultArray
end 
```

所以，最后，当你打电话时

```
local tempArray = findByName( "peg" ) 
```

您将在 tempArray 中获得名为“peg”的圆圈

# ruby-on-rails - 实现类似 Stackoverflow 的计时器

> ID：15846767
> 
> 赞同：-1
> 
> 时间：2013-04-06T03:40:30.277
> 
> 标签：ruby-on-rails, activerecord, timeout

Stackoverflow 通过在发布每条评论后允许他延迟 15 秒来防止在短时间内发布过多评论。在我的 Rails 应用程序中，我想实现一个使用相同逻辑的不同功能。如果用户阅读帖子超过 5 分钟，我想将他添加到帖子的`readers`表中。这是通过使用`sessions`or完成的`cookies`吗？

更新：当我想得更多时，逻辑可能略有不同。5 分钟后，我需要再检查一次用户是否仍在页面上阅读帖子。

**澄清：**我想实现一种方法来检查用户是否阅读同一篇文章超过 5 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:21:45.793

您要问的问题太多了，如果不了解您的应用程序的工作流程，就很难回答这个问题。把它分解，这样对其他人也容易得多。

现在，要回答您的部分问题，您可以使用会话进行计时。可能是这样的？

```
def methodName
  if session[:logged_in]
    do_something if session[:last_seen] < 5.minutes.from_now
    session[:last_seen] = Time.now
  else
    do_something_else
    session[:last_seen] = Time.now
  end
end 
```

希望这可以帮助。如果您有任何问题，请告诉我。

# python - 排序和输出问题

> ID：15846771
> 
> 赞同：0
> 
> 时间：2013-04-06T03:40:45.913
> 
> 标签：python, sorting, python-3.x

我在排序和输出方面遇到了一个问题。我不知道该怎么做。

该方案的主要思想：

1.  输入乘客总数。
2.  输入细胞总数。
3.  输入乘客数据 n 次（基于第一次输入） - 例如：Qwe 11:25 12:34。
4.  输出排序后的数据。输出应该是这样的：乘客姓名，手机号码。

```
n = int(input())
k = int(input())
data = []

for x in range(1,n+1):
    data.append(input().replace(":"," ").split(" "))

for elem in data:
    elem.append(int(elem[1])*60+int(elem[2]))
    elem.append(int(elem[3])*60+int(elem[4]))

    while len(elem)>3:
        elem.pop(1)

    if elem[1]>elem[2]:
        raise SystemExit("time of issuing can not be lower than time putting") 
```

程序的示例输入：

```
4    
2     
Qwe 12:45 16:30    
Wer 13:55 17:50    
Ert 6:25 12:55    
Rew 22:55 23:30 
```

输出：

```
Ert 1    
Qwe 2
Wer 2    
Rew 1 
```

由于单元格限制，“Wer”也可以跳过（这是一个开始练习，所以这并不意味着您需要一个涵盖所有内容的优秀代码）。我可以尝试解释单元格是如何工作的，但我认为从示例输出中可以很清楚地看到它 - 它基于发布时间和放置时间的比较。

我正在尝试学习 Python，如果有人能回答我应该怎么做来完成我的脚本，或者更确切地说使用另一个想法，我将不胜感激。

**更新：** 我得到了这样的东西：

```
data = sorted(data, key=lambda elem: elem[1])
for elem in data: #Just visual check
    print(elem)

for x in data:
    if j<=k:
        if data[i][2]>data[i+1][1]:
            print(data[i][0], j+1)
            j+=1
            i+=1
        else:
            j=0
            print(data[i][0], j+1)
    else:
        j=0 
```

但这仍然不是我想要的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:37:37.963

[您可以在大约五分钟内从Sorting HOWTO](http://docs.python.org/3.3/howto/sorting.html)学习 Python 的基础知识。

在您的脚本中，您似乎正在正确解析时间，但正在丢失乘客信息`elem[0]`。您将需要它进行最终排序。此外，您已将所有数据附加到一个列表中，而不是将行分开（这是排序所必需的）。

花几分钟阅读排序方法将帮助您了解如何组织数据以使其可排序。

# php - 从多行字符串创建 HTML 表格

> ID：15846774
> 
> 赞同：0
> 
> 时间：2013-04-06T03:41:45.047
> 
> 标签：php, html-table

我想采用如下格式的文本文件：

*注意我可以更改存储消息的格式，基本上有分隔符和不同的行

```
;68.229.164.10:4/5/2013:Hello 
;71.73.174.13:4/6/2013:Oh Hey 
```

(;IPADDRESS:时间戳:消息)

并把它放在一个看起来像这样的表中：

```
 IP                       Time                  Message
 68.229.164.10            4/6/2013              Hello
 71.73.174.13             4/6/2013              Oh Hey 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:45:35.937

我更喜欢使用以下内容：

[http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

然后相应地格式化输出。

从上述参考页面上的示例 1：

```
<?php
$row = 1;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo $data[$c] . "<br />\n";
        }
    }
    fclose($handle);
}
?> 
```

所以，你可以做这样的事情......

```
<?php
$row = 1;
if (($handle = fopen("path_to_your_data_file", "r")) !== FALSE) {

    echo '<table>';
    echo '<tr><td></td>IP<td>Time</td><td>Message</td></tr>';

    while (($data = fgetcsv($handle, 1000, ":")) !== FALSE) {
        $num = count($data);
        $row++;
        if ($num > 2) {
           echo '<tr>';
           for ($c=0; $c < $num; $c++) {
              echo '<td>'.$data[$c].'</td>';
           }
           echo '</tr>';
        }
    }

    echo '</table>';
    fclose($handle);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:15:17.453

```
$a=";68.229.164.10:4/5/2013:Hello
;71.73.174.13:4/6/2013:Oh Hey";

preg_match_all('{;(.*?):(.*?):(.*)}',$a,$d);

//set th
$d[0][0]='IP';
$d[0][1]='TIME';
$d[0][2]='Message';

$table = '<table>'.PHP_EOL;
foreach($d AS $tr){
    $row = PHP_EOL;
    foreach($tr AS $td){
        $row .= "<td>{$td}</td>".PHP_EOL;
    }
     $table .= "<tr>{$row}</tr>".PHP_EOL;
}
$table .= "</table>".PHP_EOL;
echo $table; 
```

# javascript - 在 Javascript 函数中设置 JSON 对象并将其传递给另一个函数

> ID：15846779
> 
> 赞同：0
> 
> 时间：2013-04-06T03:42:40.813
> 
> 标签：javascript, json

我正在尝试从 Javascript 函数中设置 JSON 对象并将其用作另一个函数中的参数，但是这个 obj 在函数之外没有任何值。我在函数之外创建了这个 json 对象：

```
var obj = {"Level":0, "Index":0, "Count":0, "AABB":[], "Point":[], "Children":[]}; 
```

然后

```
function loadXMLDoc()
  {  
   if(window.XMLHttpRequest){
      xmlhttp=new XMLHttpRequest();
   } else {
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
   xmlhttp.onreadystatechange=function(){
      if(xmlhttp.readyState==4 && xmlhttp.status==200){
        var string = xmlhttp.responseText;
        obj = JSON.parse(string);
        document.getElementById("myDiv").innerHTML = obj.Children;
      }
   }
   xmlhttp.open("GET","r0.json",true);
   xmlhttp.send();

   return obj;  
  } 
```

但是在我调用函数并传递 obj 之后，如下所示：

```
 var obj = loadXMLDoc();
    initGL(canvas);
    initShaders();
    initBuffers(obj); 
```

它不能将值传递给函数 initBuffers。为什么会发生这种情况，我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T03:46:14.450

当你说你不能作为参数传递时，我不确定你的意思`obj`，但要意识到你的`onreadystatechange`处理程序是在你调用之后异步调用`initBuffers`的。也许，当解析 JSON 响应时，您需要从处理程序内部调用初始化例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:06:35.937

由于@akonsu 所说的（同步性质`onreadystatechange`），`loadXMLDoc()`当您的 init 函数运行时仍将运行。因此，您的`obj`变量在运行时尚未定义`initBuffers(obj)`。

一个简单的解决方案是将回调添加到`loadXMLDoc()`：

```
function loadXMLDoc(objParsed)
  {  
   ...
   xmlhttp.onreadystatechange=function(){
      if(xmlhttp.readyState==4 && xmlhttp.status==200){
        var string = xmlhttp.responseText;
        obj = JSON.parse(string);
        document.getElementById("myDiv").innerHTML = obj.Children;
        objParsed(obj);
      }
   }
   xmlhttp.open("GET","r0.json",true);
   xmlhttp.send(); 
  } 
```

并像这样使用它（假设`initGL()`并且`initShaders()`不依赖 的结果`initBuffers()`）：

```
loadXMLDoc(initBuffers);
initGL(canvas);
initShaders(); 
```

顺便说一句，您似乎正在更改 的值`obj`：

```
obj = JSON.parse(string); 
```

因此，当您稍后尝试访问它时，除非您是有效的 JSON 并且具有根目录下的属性，`obj.Children`否则它将不存在。它还将完全覆盖您在脚本顶部设置的值。`xmlhttp.responseText``Children`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T04:13:02.907

就像@akonsu 所说的那样，您的 loadXMLDoc 函数的返回是在 ajax 调用完成之前调用的，因为该调用是异步的，所以当您执行 ajax 时，会使用该调用创建另一个进程，然后当前进程（使用函数 loadXMLDoc）不关心，调用结束时只调用 onreadystatechange 函数内的代码，所以我建议您创建一个函数回调，执行 ajax onreadystatechange 内的代码，如下所示：

```
function loadXMLDoc()
  {  
   if(window.XMLHttpRequest){
      xmlhttp=new XMLHttpRequest();
   } else {
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
   xmlhttp.onreadystatechange=function(){
      if(xmlhttp.readyState==4 && xmlhttp.status==200){
        var string = xmlhttp.responseText;
        var obj = JSON.parse(string);
        document.getElementById("myDiv").innerHTML = obj.Children;
        SOME_CALLBACK(obj)  
      }
   }
   xmlhttp.open("GET","r0.json",true);
   xmlhttp.send();

   //return obj;  no needed any more
  }

function SOME_CALLBACK(obj){
    initGL(canvas);
    initShaders();
    initBuffers(obj);
} 
```

因此，SAVE_CALLBACK 函数通过这种方式接收异步 obj 数据并使用这些数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T04:23:43.237

函数内部的变量绑定到该特定函数并且不能从函数外部访问，除非它们在包含该变量的函数内或者如果该变量设置为全局变量。

如果它只有几个对象，那么一种肮脏的方法是创建一个使用全局容器的跨度。

# c# - c#添加了扩展方法但不能使用

> ID：15846780
> 
> 赞同：2
> 
> 时间：2013-04-06T03:43:04.910
> 
> 标签：c#, extension-methods

我已将扩展方法添加到 ArraySegment 如下，但是当我将其用作

```
 var lines = TextControl.Lines;
     ArraySegment<String> myArrSegOfRichTextControl = 
                              new ArraySegment<string>(lines,0,2); 
```

键入 myArrSegOfRichTextControl 后，我找不到 Visual Studio 提示 GetSegment 方法。那么如何调用扩展的方法呢？谢谢。

```
namespace ArraySegmentExtension
{
    class ArraySegmentExtension 
    {
        #region ArraySegment related methods

        public static ArraySegment<T> GetSegment<T>(this T[] array, int from, int count)
        {
            return new ArraySegment<T>(array, from, count);
        }

        public static ArraySegment<T> GetSegment<T>(this T[] array, int from)
        {
            return GetSegment(array, from, array.Length - from);
        }

        public static ArraySegment<T> GetSegment<T>(this T[] array)
        {
            return new ArraySegment<T>(array);
        }

        public static IEnumerable<T> AsEnumerable<T>(this ArraySegment<T> arraySegment)
        {
            return arraySegment.Array.Skip(arraySegment.Offset).Take(arraySegment.Count);
        }

        public static T[] ToArray<T>(this ArraySegment<T> arraySegment)
        {
            T[] array = new T[arraySegment.Count];
            Array.Copy(arraySegment.Array, arraySegment.Offset, array, 0, arraySegment.Count);
            return array;
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T03:45:01.207

扩展方法必须在`static`类上定义。从[官方文档](http://msdn.microsoft.com/en-us/library/vstudio/bb311042.aspx)：

> 1.  定义一个静态类来包含扩展方法。

尝试像这样定义你的类：

```
public static class ArraySegmentExtension
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:44:52.390

`using ArraySegmentExtension;`在你的代码文件之上添加怎么样。

# java - 如何将偏好的变化反映到班级？

> ID：15846783
> 
> 赞同：0
> 
> 时间：2013-04-06T03:43:38.400
> 
> 标签：java, android, android-preferences, android-sharedpreferences

我创建了一个具有属性 String 的简单类“User” `username`。我假设由于 Android 使用 Java，我可以创建自定义类，它会相应地使用它们。在我的 SettingsActivity.java 中，我有：

```
protected void onPostCreate(Bundle savedInstanceState) {
    super.onPostCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.pref_general);

    SharedPreferences sharedPref = getPreferenceScreen().getSharedPreferences();
    EditTextPreference editTextPref = (EditTextPreference) findPreference("username");
    editTextPref.setSummary(sharedPref.getString("username", "Default"));
    //sharedPref.registerOnSharedPreferenceChangeListener(this);

}

public void onSharedPreferenceChanged(SharedPreferences arg0, String arg1) {
    // Get current summary
    Preference pref = findPreference(arg1);
    if(pref instanceof EditTextPreference){
        EditTextPreference etp = (EditTextPreference) pref;
        pref.setSummary(etp.getText());
        MainMenu.user.setName(etp.getText()); //This is where I try to update my class
    }
} 
```

截至目前，每当我更改`EditTextPreference`小部件的值时，它都不会更新位于`MainMenu`. 另外，一个后续问题 - 由于 Android 会在每个应用启动实例中保存首选项，我将如何在启动时更新我的`User.username`​​字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:02:54.817

在`onPostCreate`删除评论//

```
sharedPref.registerOnSharedPreferenceChangeListener(this); 
```

# log4j - 在 Jetty 中嵌入 Apache ZooKeeper 生成调试日志消息

> ID：15846789
> 
> 赞同：2
> 
> 时间：2013-04-06T03:44:41.343
> 
> 标签：log4j, jetty, apache-zookeeper

我正在使用 Jetty 8 和 ZooKeeper 3.4.5。当我连接到 ZooKeeper 时，码头不断生成 DEBUG 级别的消息。如何压制它？

```
16:54:56.757 [main-SendThread(127.0.0.1:2181)] DEBUG o.a.z.client.ZooKeeperSaslClient - Could not retrieve login configuration: java.lang.SecurityException: Unable to locate a login configuration
16:54:56.758 [main-SendThread(127.0.0.1:2181)] DEBUG o.a.z.client.ZooKeeperSaslClient - Could not retrieve login configuration: java.lang.SecurityException: Unable to locate a login configuration
16:54:56.758 [main-SendThread(127.0.0.1:2181)] DEBUG o.a.z.client.ZooKeeperSaslClient - Could not retrieve login configuration: java.lang.SecurityException: Unable to locate a login configuration
16:54:56.759 [main-SendThread(127.0.0.1:2181)] DEBUG o.a.z.client.ZooKeeperSaslClient - Could not retrieve login configuration: java.lang.SecurityException: Unable to locate a login configuration
16:54:56.760 [main-SendThread(127.0.0.1:2181)] DEBUG o.a.z.client.ZooKeeperSaslClient - Could not retrieve login configuration: java.lang.SecurityException: Unable to locate a login configuration
16:54:56.760 [main-SendThread(127.0.0.1:2181)] DEBUG org.apache.zookeeper.ClientCnxn - Got ping response for sessionid: 0x13ddc6e9a2b000c after 3ms
16:54:56.760 [main-SendThread(127.0.0.1:2181)] DEBUG o.a.z.client.ZooKeeperSaslClient - Could not retrieve login configuration: java.lang.SecurityException: Unable to locate a login configuration
16:54:58.424 [main-SendThread(127.0.0.1:2181)] DEBUG o.a.z.client.ZooKeeperSaslClient - Could not retrieve login configuration: java.lang.SecurityException: Unable to locate a login configuration
16:54:58.425 [main-SendThread(127.0.0.1:2181)] DEBUG o.a.z.client.ZooKeeperSaslClient - Could not retrieve login configuration: java.lang.SecurityException: Unable to locate a login configuration
16:54:58.425 [main-SendThread(127.0.0.1:2181)] DEBUG o.a.z.client.ZooKeeperSaslClient - Could not retrieve login configuration: java.lang.SecurityException: Unable to locate a login configuration
16:54:58.426 [main-SendThread(127.0.0.1:2181)] DEBUG o.a.z.client.ZooKeeperSaslClient - Could not retrieve login configuration: java.lang.SecurityException: Unable to locate a login configuration
16:54:58.427 [main-SendThread(127.0.0.1:2181)] DEBUG o.a.z.client.ZooKeeperSaslClient - Could not retrieve login configuration: java.lang.SecurityException: Unable to locate a login configuration
16:54:58.427 [main-SendThread(127.0.0.1:2181)] DEBUG org.apache.zookeeper.ClientCnxn - Got ping response for sessionid: 0x13ddc6e9a2b000c after 2ms 
```

我在 src 文件夹下添加了 log4j.properties：

```
# Set root logger level to DEBUG and its only appender to A1.
log4j.rootLogger=DEBUG, A1

# A1 is set to be a ConsoleAppender.
log4j.appender.A1=org.apache.log4j.ConsoleAppender

# A1 uses PatternLayout.
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-4r - [%t] %-5p %c %x - %m%n

log4j.logger.org.apache.zookeeper.ZooKeeper=INFO 
```

仍然没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:09:15.923

我再次检查了我包含的库，发现包含了 LogBack。我认为 JVM 加载 logback 而不是 log4j。一旦我提供 logback.xml，问题就解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T08:50:31.120

配置中这样的东西应该有帮助：

```
<logger name="com.apache.zookeeper" level="info">
   <!-- appenders -->
</logger> 
```

# mysql - 当唯一的变化是这种情况时，我如何强制mysql更新

> ID：15846793
> 
> 赞同：2
> 
> 时间：2013-04-06T03:45:28.503
> 
> 标签：mysql

我正在将表中数据的大小写更改为“标题大小写”。由于mysql没有标题大小写的功能，我在php中做。

但是，如果 id = 1 的数据是“MR. JOHN ADAMS”，那么

更新联系人 SET c_name = "Mr. John Adams" WHERE id = 1;

自从 MySql 不区分大小写以来，什么都不做，认为什么都没有改变。

在此安装中，我无法将 mysql 更改为区分大小写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T03:56:18.273

我刚刚在我的 MySQL 中测试了它并且它可以工作，它改变了更新的情况。但是，如果它不适合您，请尝试以下操作：

```
update contacts set c_name = binary 'John Adams' where id = 1 
```

...它应该工作。

还可以尝试将您的列定义从 varchar(n) 修改为 varbinary(n)，这样您就不必在每次插入/更新时指定二进制文件。

高温高压

弗朗西斯科

# c++ - 如何投射 QList 到 QList

> ID：15846806
> 
> 赞同：2
> 
> 时间：2013-04-06T03:48:32.017
> 
> 标签：c++, qt, casting

我找不到使用另一个类模板将 a 转换`QList`为`QObjects`另一个的方法。`QList`我有一个创建实例`QObjects`然后返回的函数`QList`。所以我的问题是，我可以将它`QList`转换为另一个`QList`不同的模板类指针吗？

我的代码：

```
QList<QObject *> DbManager::listVO(QString voname)
{
    DbManager::VOPropertiesJoin(DbManager::VOKeys(obj),VOJOIN_BOTH,"=");
    QList<QObject *> vos;

    QString voquery = "select * from %1";
    voquery = voquery.arg(voname);
    QSqlQueryModel *volist = DbManager::makeSelect(voquery);

    for(int i = 0;i < volist->rowCount();i++){
        QSqlRecord record =volist->record(i);
        QObject *voinstance = DbManager::instantiateVO(voname,record.value(0),record.value(1),record.value(2),record.value(3),record.value(4),record.value(5),record.value(6),record.value(7));
        vos << voinstance;
    }
    return vos;
} 
```

我想要这样的东西：

```
QList<AnyClass*> list = DbManager::listVO("AnyClass"); 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T05:00:11.737

由于您最后需要的是 a `QList<AnyClass*>`，因此您可以尝试这样的事情（假设`AnyClass`源自`QObject`）

**注意：**我对您的原始代码进行了一些修改，以通过引用传递您的列表，因为返回一个巨大的列表可能效率不高。我没有编译代码，但希望你能弄清楚这段代码中发生了什么

```
void DbManager::listVO(QString voname, QList<AnyClass*>& listAnyClass)
{
    DbManager::VOPropertiesJoin(DbManager::VOKeys(obj),VOJOIN_BOTH,"=");

    // Initialise list with an empty list
    listAnyClass = QList<AnyClass*>();

    QString voquery = "select * from %1";
    voquery = voquery.arg(voname);
    QSqlQueryModel *volist = DbManager::makeSelect(voquery);

    for(int i = 0; i < volist->rowCount(); i++)
    {
        QObject *voinstance = GetInstance(voname, volist->record(i));

        // Trying to cast into an AnyClass
        AnyClass* pAnyClass = qobject_cast<AnyClass*>(voinstance);

        // If pAnyClass is a valid AnyClass* update your list
        if(pAnyClass)
        {
            listAnyClass.append(pAnyClass);
        }
    }
}

QObject* DbManager::GetInstance(QString sVoname, const QSqlRecord& record)
{
    return DbManager::instantiateVO
    (
        voname,
        record.value(0),
        record.value(1),
        record.value(2),
        record.value(3),
        record.value(4),
        record.value(5),
        record.value(6),
        record.value(7)
    )
} 
```

调用`DbManager::listVO(QString voname, QList<AnyClass*>& listAnyClass)`函数后，`listAnyClass`将相应地填充。与返回列表相比，这很有效。

**编辑：**

因此，简而言之，您要将 a 转换`QList<QObject*>`为`QList<AnyClass*>`. 因此，请保持原始代码不变，并在您想要进行此转换的地方实现这样的方法：

```
void ConvertToAnyClassList(const QList<QObject*>& listQObjects, QList<AnyClass*>& listAnyClass)
{
    listAnyClass = QList<AnyClass*>();
    for( int i = 0; i < listQObjects.length(); ++i )
    {
        AnyClass* pAnyClass = qobject_cast<AnyClass*>(listQObjects.at(i));

        if(pAnyClass)
        {
            listAnyClass.append(pAnyClass)
        }
    }
} 
```

你可以这样称呼它：

```
QList<QObject*> listQObjects = DbManager::listVO("AnyClass");
QList<AnyClass*> listAnyClass;
ConvertToAnyClassList(listQObjects,listAnyClass); 
```

假设您有多种类型，因此您可能希望为每种类型实现函数，如下所示：

```
ConvertToUserList(listQObjects,listUserObjects);
ConvertToCountryList(listQObjects,listCountryObjects); 
```

# .net - .net mvc 局部视图

> ID：15846812
> 
> 赞同：0
> 
> 时间：2013-04-06T03:49:55.393
> 
> 标签：.net, asp.net-mvc, partial-views

为 .net mvc 创建部分视图时，是否必须为编辑操作创建一个，而创建操作或一个部分视图对于这两个操作都足够了。在这里，我正在考虑带有下拉列表、复选框等的视图。

**更新 1**

这是我今天一直在努力的事情：

我有一个有几个成员的模型，我创建了部分视图，如下所示：

在控制器中我有：

```
Public ActionResult trip()
{
  return View();
} 
```

在视图文件夹 (trip.cshtml) 中：

```
@model tests.Models.Mission
<div id="contents">

<div class="editor-label">
 @Html.LabelFor(model => model.tripName, "tripName")
</div>
<div class="editor-field">
 @Html.DropDownList("tripName", String.Empty)
 @Html.ValidationMessageFor(model => model.tripName)
</div>
<div class="editor-label">
 @Html.LabelFor(model => model.giftname)
</div>
<div class="editor-field">
 @Html.EditorFor(model => model.giftname)
 @Html.ValidationMessageFor(model => model.giftname)
</div> 
```

在编辑操作中：

我正在使用 jQuery`load`方法加载页面，它适用于 Create 操作，但对于 Edit 操作，没有加载数据。我收到 404 错误

```
$("#dynamicForm").load("/things/trip #contents", function(response, status, xhr) {
                    if (status == "error") {
                        var msg = "";
                        $("#dynamicForm").html(msg + xhr.status + " " + xhr.statusText);
                    }
                }); 
```

是的，我已经尝试过`@Html.RenderPartial`并且它有效，但是这个示例我正在尝试使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:56:45.943

如果需要，您可以使用单个局部视图，并将其绑定到您的模型。在编辑情况下，它将填充数据，而在创建模式下，它将绑定到空模型对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:56:18.600

这将取决于您的型号。在大多数情况下，创建/编辑基于相同的模型，因此您应该能够引用一个局部视图......这使得它变得又好又干。

**根据您的更新 1：** 我没有看到您在 $.load() 调用中指定您尝试编辑的任务对象的位置。我想至少你会想像这样传递一个查询字符串参数：`/things/trip?mission=23`

否则，您的控制器操作不知道将哪些数据加载到视图中并在响应中发回，如果您收到 404 错误...请确保您的路径对于控制器操作是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T03:56:54.387

视图只是一个模板。它可以与任何操作一起使用，只要它执行您需要的操作即可。

更大的问题是，您的编辑和创建是否因其功能而需要不同的模板？

# c# - 无法从文件夹中获取文件

> ID：15846813
> 
> 赞同：2
> 
> 时间：2013-04-06T03:50:02.647
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8

我想从我的 wp8 pnone 获取来自 sd 的文件和文件夹。我使用代码：

```
 private async void GetFilesAcync()
    {
        ExternalStorageDevice _sdCard = (await ExternalStorage.GetExternalStorageDevicesAsync()).FirstOrDefault();

        if (_sdCard != null)
        {
            ExternalStorageFolder routesFolder =  _sdCard.RootFolder;

            IEnumerable<ExternalStorageFolder> folders = await routesFolder.GetFoldersAsync();

            IEnumerable<ExternalStorageFile> files = await routesFolder.GetFilesAsync();

            foreach (var file in files)
            {
                names.Add(file.Name);
            }

            foreach (var folder in folders)
            {
                names.Add(folder.Name);
            }

            MessageBox.Show(names.Count.ToString());
            mainLLS.ItemsSource = names;
        }
    } 
```

问题是我可以看到文件夹，但没有文件（它们存在于 sd 中，但不存在于 sd 中`IEnumerable<ExternalStorageFile> files`）。因此，当我启动代码时 - 我可以看到文件夹，但看不到文件。我试图删除获取文件夹的代码，只留下必须获取文件的代码，但没有结果。有没有办法解决这个问题？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T06:37:17.173

您只能访问特定类型的文件 - 即与您的应用程序关联的文件类型

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720573(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720573(v=vs.105).aspx)

# java - Android：比较 ImageButton 和资源中的图像

> ID：15846817
> 
> 赞同：0
> 
> 时间：2013-04-06T03:51:34.423
> 
> 标签：java, android, bitmap, drawable

我有一个 ImageButton，它的背景设置如下：

```
final ImageButton[][] gridButton = new ImageButton[5][5];
gridButton[0][0] = (ImageButton) findViewById(R.id.imageButton1);
gridButton[0][0].setImageResource(ButtonIcon.l[0]); //ButtonIcon.l[0] is an image ID from my resources folder.

gridButton[0][0].setOnClickListener(new View.OnClickListener() {
        ButtonIcon justAnObject = new ButtonIcon();
        @Override
        public void onClick(View v) {
            int newId = justAnObject.changeIconId(((BitmapDrawable)gridButton[0][0].getDrawable()).getBitmap());
//          int newId = justAnObject.changeIconId(gridButton[0][0].getDrawable());
            gridButton[0][0].setImageResource(newId);

        }
    }); 
```

在 buttonIcon 类中，我有一个方法进行比较：

```
public int changeIconId(Bitmap object){
    if (object == ((BitmapDrawable) getResources().getDrawable(R.drawable.load0)).getBitmap()){
        return R.drawable.load1;
    }
    else return R.drawable.straight0;
} 
```

所有 ID 都引用了我的资源文件夹中的图像。我不太确定如何解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T05:19:27.170

比较两个位图

```
public boolean equals(Bitmap bitmap1, Bitmap bitmap2) {
    ByteBuffer buffer1 = ByteBuffer.allocate(bitmap1.getHeight() * bitmap1.getRowBytes());
    bitmap1.copyPixelsToBuffer(buffer1);

    ByteBuffer buffer2 = ByteBuffer.allocate(bitmap2.getHeight() * bitmap2.getRowBytes());
    bitmap2.copyPixelsToBuffer(buffer2);

    return Arrays.equals(buffer1.array(), buffer2.array());
} 
```

**更新后**

### 比较两个可绘制对象

```
Bitmap bitmap = ((BitmapDrawable)fDraw).getBitmap();
Bitmap bitmap2 = ((BitmapDrawable)sDraw).getBitmap();

if(bitmap == bitmap2)
    {
        //Code blcok
    } 
```

# android - Android EditText 焦点在 ScreenSlidePageAdapter 内的 Fragment 内

> ID：15846821
> 
> 赞同：1
> 
> 时间：2013-04-06T03:52:39.263
> 
> 标签：android, keyboard, focus, fragment, fragmentstatepageradapter

[使用支持库]

尝试使用my中`EditText`的 a 的内部时，其中多个s 一次可见。`Fragment``ScreenSlidePagerAdapter``Fragment`

列表中的第二个`Fragment`包含一个`EditText`. 在 Android 4.1 和 4.2 上运行良好。在Android 2.3.6（其他版本不知道）上，点击`EditText`会弹出屏幕键盘，但不会聚焦`EditText`。`ScreenSlidePagerAdapter`如果我以一种被认为是“当前”的方式在其中拖动`Fragment`，那么`EditText`它将正常运行。

固定布局是不可接受的，因为所有内容都必须动态生成，并且`Fragment`可见的 s 数量可能会根据不同的标准而有所不同。

关于如何使其正常运行且无需硬编码的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:36:30.523

这

```
if (v == tv) 
```

我之前的评论需要关注焦点

```
if (v == tv && hasFocus) 
```

完整代码：

```
if (v == tv && hasFocus) {
    ((LobbyAct)ChatFragment.this.getActivity()).pager.setCurrentItem(1);
    InputMethodManager inputMgr = (InputMethodManager)getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
    inputMgr.toggleSoftInput(0, 0);
} 
```

# hadoop - 安装和运行什么版本的hadoop？

> ID：15846826
> 
> 赞同：1
> 
> 时间：2013-04-06T03:53:37.040
> 
> 标签：hadoop

看完这篇文章...

[http://blog.cloudera.com/blog/2012/01/an-update-on-apache-hadoop-1-0/](http://blog.cloudera.com/blog/2012/01/an-update-on-apache-hadoop-1-0/)

如果我要进行全新的 hadoop 安装以使用...今天仍然是 0.23 具有所有功能吗？或者现在有没有更好的版本，它拥有一切并捕获所有功能和性能？有这么多使用 0.20 的指南...看起来好像 1.0 不可信...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:42:52.573

这是我至少遵循了 3 次在单节点和两节点集群上安装和运行的指南，Michael 在保持最新状态方面做得很好：

[在 Ubuntu Linux（单节点集群）上运行 Hadoop](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/ "在 Ubuntu Linux（单节点集群）上运行 Hadoop")

[在 Ubuntu Linux（多节点集群）上运行 Hadoop](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)

这里使用 2012 年 5 月发布的 Hadoop 版本 1.0.3；撰写本文时最新的稳定版是 1.1.2，但如果您想进行第一次安装以进行测试并熟悉上述指南，可能会帮助您熟悉系统，然后升级到最新版本一个参考点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:49:55.500

检查 Hadoop[文档](http://hadoop.apache.org/releases.html#Download)以了解不同版本的状态。截至目前 1.0.4 是稳定版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T14:44:03.653

我遇到了本教程，用于在 ubuntu 12.04 中设置单节点集群。 [http://preciselyconcise.com/apis_and_installations/hadoop_installation.php](http://preciselyconcise.com/apis_and_installations/hadoop_installation.php)。我按照教程进行操作，并在我的 linux 系统上成功安装了 hadoop 1.1.2。

# sql - Oracle SQL如何先分组再比较频率

> ID：15846832
> 
> 赞同：-1
> 
> 时间：2013-04-06T03:54:29.613
> 
> 标签：sql, oracle, group-by

我有一张桌子看起来像

```
 table   operation     employee
            '<'               id1
            '<'               id1
            '<'               id2
            '*'               id3
            '/'               id1 
```

对于每个操作，我想知道哪个员工做的最多？哪个员工做第二个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:14:38.567

试试这个：

```
SELECT operations.operation, employees.employee, employees.rank
FROM (
  SELECT t1.operation
  FROM table t1
  GROUP BY t1.operation
) operations INNER JOIN (
  SELECT t2.employee, t2.operation, COUNT(1) rank
  FROM table t2
  GROUP BY t2.employee
) employees ON operations.operation = employees.operation
ORDER BY operations.operation, employees.rank DESC 
```

对于每项操作，我们都会获取每个相应员工的数量。由于在子查询中，操作是不同的[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)，并且由于`GROUP BY`在另一个子查询中，员工是不同的。我们加入操作的两个子查询，然后按每个员工与操作关联的次数排序。

# html - 在 Bootstrap 中为响应式设计重新排序 div

> ID：15846838
> 
> 赞同：4
> 
> 时间：2013-04-06T03:55:04.837
> 
> 标签：html, css, twitter-bootstrap

我正在使用引导程序。我有一排三个街区：

```
<div class="row">
    <div class="span3" id="B">...</div>
    <div class="span4" id="A">...</div>
    <div class="span3" id="C">...</div>
</div> 
```

这样三个块的顺序为`B`, `A`, `C`。

如果屏幕宽度较小，则三个块将各占一行，并且顺序也为`B`, `A`, `C`。

但我希望他们订购为

```
A
B
C 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T06:00:43.540

试试这个：

```
<div class="row">
    <div class="pull-left">
        <div class="span4 pull-right" style="margin-left:0px;">A</div>
        <div class="span3 pull-left" style="margin-left:0px;">B</div>
    </div>
    <div class="pull-right">
        <div class="span3">C</div>
    </div>
</div> 
```

您可能需要稍微调整间距，但当屏幕宽度较窄时，它应该为您提供所需的正确顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:12:55.663

我的回答很简单，有效，不需要技巧就可以做到：

使您的 HTML 结构如下所示：

```
<div class="row">
    <div class="span1" id="B">...</div>
    <div class="span2" id="A">...</div>
    <div class="span3" id="B">...</div>
    <div class="span4" id="C">...</div>
</div> 
```

现在，在您的`<head>`元素中包含以下内容：

```
<link rel='stylesheet' type='text/css' media="all and (min-width:1024px)" href='bigdevice.css' />
<link rel='stylesheet' type='text/css' media="all and (max-width:1024px)" href='smalldevice.css'> 
```

在你的**smalldevice.css**

```
.span1 {display:none;} 
```

在你的**bigdevice.css**

```
.span3 {display:none;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:38:28.413

试试这个，它是一个简单的例子。希望它可以帮助你。

```
 @media screen and (min-width: 320px)  and (max-width: 480px){
    #row{position: relative;color:#fff;}
   #B{background:#000;width:100%;height:50px;float:left;position: absolute;top:50px;}
  #A{background:#666;width:100%;height:50px;clear:both;position: absolute;top:0;}
  #C{background:#aaa;width:100%;height:50px;float:left;position: absolute;top:100px;}
  } 
```

对于大屏幕，您不必隐藏任何元素。只是尝试绝对定位它。

```
@media screen and (min-width:481px) {
    #row{position: relative;}
  #B{background:#000;width:100%;height:50px;}
  #A{background:#666;width:100%;height:50px;}
  #C{background:#aaa;width:100%;height:50px;}
  } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-06T04:22:13.550

另一种方法是使用这个：

```
<html>
<head>
<style type="text/css">
@media all and (min-width: 1024px) {
.span3 {display:none;}
}
@media all and (max-width: 1024px) {
.span1 {display:none;}
}
</style>
</head>
<body>
<div class="row">
    <div class="span1" id="B">...</div>
    <div class="span2" id="A">...</div>
    <div class="span3" id="B">...</div>
    <div class="span4" id="C">...</div>
</div>
</body>
</html> 
```

# codeigniter - Codeigniter PUT 请求

> ID：15846839
> 
> 赞同：0
> 
> 时间：2013-04-06T03:55:23.213
> 
> 标签：codeigniter, rest, put

我尝试提出 PUT 请求，但我不能。我的表格。

```
 <form method="put" action="http://localhost/index.php/book">
     <input type="text" name="bookName" />
     <input type="submit" value="Send"/>
 </form> 
```

我的控制器

```
<?php

   require(APPPATH.'libraries/REST_Controller.php');

   class Book extends REST_Controller {

        function index_put(){
            echo $this->put('bookName');
        }   

   }

?> 
```

问题是什么都不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T06:54:38.543

HTML 标准[不支持](http://www.w3.org/TR/2012/CR-html5-20121217/forms.html#attr-fs-method) `put`在`<form method="">`属性内，如果您放置其他任何内容，`post`或者`get`它应该`GET`根据规范作为请求发送。

许多框架为此实施的规范解决方法是`_method`在表单中包含一个隐藏字段并将实际的 HTTP 动词放在那里。看起来您正在使用[这个库](https://github.com/philsturgeon/codeigniter-restserver)，它也执行此[`_method`参数](https://github.com/philsturgeon/codeigniter-restserver/blob/v2.5/application/libraries/REST_Controller.php#L388)解决方法。

# jquery - Jquery验证csv文件

> ID：15846841
> 
> 赞同：1
> 
> 时间：2013-04-06T03:55:41.647
> 
> 标签：jquery, jquery-validate

当用户上传带有扩展名/格式 CSV 的文件时，我尝试验证 csv 文件

```
<script type="text/javascript">
$(document).ready(function() {
    $('#form1').validate({
        rules: { csv: { required: true, accept: "csv"  }},
        messages: { csv: "File must be CSV" }
    }); 
});
</script>

<form action="product_import.php?action=import" method="POST" name="form1" id="form1" enctype="multipart/form-data">
<input name="csv" type="file" id="csv" />
</form> 
```

但问题是当我上传扩展名为 csv 的文件时，会出现此错误消息`File must be CSV` ，我不知道为什么即使我设置为`accept: "csv"`.

我的 csv 文件名是`product.csv`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T04:12:15.730

[该`accept`规则](http://docs.jquery.com/Plugins/Validation/Methods/accept#mimetype)不适用于文件扩展名，而是适用于 Mime 类型。

您可能想改用[该`extension`规则](http://docs.jquery.com/Plugins/Validation/CustomMethods/extension#extension)

**演示：http: [//jsfiddle.net/c5R3b/](http://jsfiddle.net/c5R3b/)**

```
$(document).ready(function () {

    $('#form1').validate({
        rules: {
            myfield: {
                required: true,
                extension: "csv"
            }
        }
    });

}); 
```

但是，这两个规则都需要包含[`additional-methods.js`文件](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/additional-methods.js)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-27T10:49:03.037

这是使用普通 JS 方法对我有用的东西。可能对某人有帮助，

```
if( document.getElementById("csv").value.toLowerCase().lastIndexOf(".csv")==-1) 
{
        alert("Please upload a file with .csv extension.");
        return false;
} 
```

# javascript - 在 jQuery .get() 的 Data 对象中查找元素

> ID：15846844
> 
> 赞同：0
> 
> 时间：2013-04-06T03:56:09.247
> 
> 标签：javascript, jquery, xmlhttprequest

我认为这会更容易找到:)

```
$.get('/page.html', function(data) {
    //get only contents of class="contents"
}); 
```

我似乎无法找到如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T04:01:00.597

只需使用`.find()`：

```
$(data).find(".contents") 
```

这是您可以使用的最终代码：

```
$.get('/page.html', function(data) {
    var contents = $(data).find(".contents");
}); 
```

然后根据元素的类型`.contents`，您可以使用`contents.html()`或`contents.text()`（大多数元素）或`contents.val()`（输入元素）。

从技术上讲，另一个想法是使用`.filter()`.

这一切都取决于您的 HTML 在`data`. 如果你的结构是这样的：

```
<div id="main">
    blah blah
    <div class="contents"></div>
</div> 
```

那么结果`$(data)`将会是`[#main]`，你需要使用`find`. 如果你的结构是这样的：

```
<div id="main"><div>
<div class="contents"></div>
<div class="another"></div> 
```

那么结果`$(data)`将会是`[#main, .contents, .another]`，你需要使用`filter`.

当然，结合它们，它可能是：

```
$.get('/page.html', function(data) {
    var all = $(data), contents;
    contents = all.filter(".contents");
    if (!contents.length) {
        contents = all.find(".contents");
    }
    if (contents.length) {
        // It/they was/were found at some point
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T04:04:08.547

我会做这样的事情......

```
$.get('/page.html', function(data){
   var $page = $(data)
   var $contents = $page.filter('.contents'); /* this will get a reference to the .contents */
   /* do more stuff here 
      ....  
   */
}); 
```

看看这个 SO 的公认答案：[Get HTML of div element returned by .get with jQuery](https://stackoverflow.com/questions/8818603/get-html-of-div-element-returned-by-get-with-jquery)

`.find()`如果返回内容的结构不确定（有时由于是后代而需要使用的地方`.contents`，您总是可以执行检查并运行`.filter()`，反之亦然。

例子：

```
$contents = $page.filter('.contents');
if($contents.length == 0) {
   $contents = $page.find('.contents');
} 
```

只是基于其他答案中发布的评论的想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T04:08:10.857

如果您从返回的 jQuery 对象中创建一个 jQuery 对象，`data`并且 jQuery 集中的包装元素是`.contents`元素，则`find`无法找到目标元素，如果该`contents`元素是后代元素，则`filter`方法无法选择该元素。您可以创建一个虚拟元素，使用返回的数据填充它并使用`find`方法。

```
$.get('/page.html', function(data) {
    var element = $('<div/>').html(data).find('.contents');
}); 
```

# php - 如何保存 Netflix 即时目录的 gzip 副本？

> ID：15846847
> 
> 赞同：0
> 
> 时间：2013-04-06T03:56:27.753
> 
> 标签：php, api, curl, gzip, netflix

我使用 Netflix 网站上的教程正确下载了特定电影的 API 查询的 gzip。当我更改代码以下载整个 Netflix 目录的 gzip 时，该脚本不再起作用。

当我运行脚本时，API 查询以“?output=json;”结尾 这不返回任何结果。当我手动删除尾随分号时，目录会在我的浏览器窗口中下载。由于它的大小，这不完全是一种选择。

Netflix 教程：http: [//developer.netflix.com/page/resources/sample_php](http://developer.netflix.com/page/resources/sample_php)

我的修改：

```
<?php
include ('OAuthSimple.php');
$apiKey = 'MY KEY';
$sharedSecret = 'MY SECRET';

/*    THIS CODE BLOCK WORKS
$arguments = Array(  
    term=>'fargo',  
    expand=>'formats,synopsis',  
    max_results=> '1',  
    output=>'json'  
);  */

 $arguments = Array(
     output=>'json'
 );
//$path = "http://api-public.netflix.com/catalog/titles"; // ORIGINAL CODE FOR MOVIE SEARCH
$path = "http://api-public.netflix.com/catalog/titles/streaming"; // Full Catalog Search

$oauth = new OAuthSimple();
$signed = $oauth->sign(Array(path=>$path,
                parameters=>$arguments,
                signatures=> Array('consumer_key'=>$apiKey,
                                    'shared_secret'=>$sharedSecret
                                    )));

// Now go fetch the data.
$curl = curl_init();
curl_setopt($curl,CURLOPT_URL,$signed['signed_url']);
curl_setopt($curl,CURLOPT_HTTPHEADER,array('Accept-Encoding: gzip'));
curl_setopt($curl,CURLOPT_RETURNTRANSFER,1);
curl_setopt($curl,CURLOPT_SETTIMEOUT,2);
$buffer = curl_exec($curl);
if (curl_errno($curl))
{
    die ("An error occurred:".curl_error());
}
curl_close($curl);
//$result = json_decode($buffer);

$fp = fopen('data.gzip', 'w');
fwrite($fp, $buffer);
fclose($fp);
?>
<p>
<b>Your signed URL:</b></br>
<?php print $signed['signed_url'] ?>;
</p>
<p>
And the output is:</br>
<pre> 
<?php 
print print_r($buffer); ?>
</pre>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T00:15:47.743

响应包含重定向（状态代码 307）到：

[http://cdn-api.netflix.com/api/v3/current/Catalog2/en_US.xml?token=](http://cdn-api.netflix.com/api/v3/current/Catalog2/en_US.xml?token=) {}。

您需要向该 url 发出第二个请求（使用响应中提供的令牌）以获取数据。

# entity-framework - Breeze 正在尝试更新计算的数据库列

> ID：15846848
> 
> 赞同：0
> 
> 时间：2013-04-06T03:56:36.253
> 
> 标签：entity-framework, breeze

一位朋友报告了计算列、实体框架和 Breeze 的问题

> 我们有一个表，其中包含由数据库计算的“FullName”列。创建新的`Person`时，Breeze 将`FullName`属性值发送到服务器，即使它根本没有设置，并且在尝试插入新`Person`实例时会触发错误。数据库抛出此异常：

`The column "FullName" cannot be modified because it is either a computed column or is the result of a UNION operator.`

下面是 SQL 表定义的相关部分：

```
创建表 [dbo].[Person](
      [ID] [bigint] IDENTITY(1,1) 非空，
      [名字] [varchar](100) 空值，
      [中间名] [varchar](100) NULL，
      [姓氏] [varchar](100) 非空，
      [FullName] AS ((([Patient].[LastName]+',') + isnull(' '+[Patient].[FirstName],'')) + isnull(' '+[Patient].[MiddleName] ,'')),
      ...

```

我的朋友告诉我相应的“代码优先”类看起来像这样：

```
公共类人{
      公共 int ID {get; 放;}
      公共字符串名字 {get; 放;}
      公共字符串 MiddleName {get; 放;}
      公共字符串姓氏{get; 放;}
      公共字符串 FullName {get; 放;}
      ...
}

```

这个问题的答案解释了问题并提供了解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:56:36.253

## 设计问题

看到这个的每个人都想知道为什么会有一个计算列`FullName`，其次，为什么这个属性会暴露给客户端。

让我们假设计算列有充分的理由，模型有充分的理由从表中获取值而不是计算值本身，并且有充分的理由将其发送给客户端而不是让客户端计算它. 这是他告诉我的；

> “我们需要`FullName`在查询中包含”

生活有时会这样。

## 结果

请注意，该`FullName`属性有一个公共设置器。该类的 EF 元数据生成器`Person`无法判断这是一个只读属性。`FullName`看起来就像`LastName`。元数据说“这是正常的读/写属性”。

Breeze也看不出有什么不同。客户端应用程序可能不会触及此属性，但 Breeze 在创建新的`Person`. 回到服务器上，Breeze`EFContextProvider`认为它应该在创建 EF 实体时传递该值。舞台已经为灾难做好了准备。

如果 (a) 您无法更改表格并且 (b) 您无法更改模型的`FullName`属性定义，您该怎么办？

## 一个解法

英孚需要你的帮助。您应该告诉 EF 这实际上是一个数据库计算属性。您可以使用 EF fluent 接口或使用如下所示的属性：

```
[DatabaseGenerated(DatabaseGeneratedOption.Computed)]
公共字符串全名 { 获取；放; }

```

添加此属性，EF 知道此属性是只读的。它将生成适当的元数据，您可以`Person`干净地保存新的元数据。省略它，你会得到异常。

请注意，这仅对 Code First 是必需的。如果他首先生成了模型 Database First，则 EF 知道该列已计算并且不会尝试设置它。

请注意与商店生成的密钥类似的问题。整数键的默认值是“存储生成的”，但 Guid 键的默认值是“客户端生成的”。如果在您的表中，数据库实际上设置了 Guid，则必须`ID`使用 [DatabaseGenerated(DatabaseGeneratedOption.Identity)] 标记该属性

# ios - UIWebView 第一次在特定的 UIViewController 中显示时加载非常缓慢

> ID：15846850
> 
> 赞同：8
> 
> 时间：2013-04-06T03:56:41.087
> 
> 标签：ios, objective-c, uiwebview, storyboard

`UIViewController`我的故事板上有一个“产品详细信息” ，`UIWebView`可以显示“富文本”（基本上是粗体和斜体）。使用字符串（从 获取`CoreData`）加载 Web 视图`loadHTMLString`。问题是第一次显示视图时，在呈现 Web 视图之前至少有一秒钟的延迟。加载的其他“产品详细信息”视图都可以正常加载。它只是第一个需要时间加载的“产品详细信息”Web 视图。

这就是我尝试过的（没有喜悦）

1.  在第一个屏幕上显示`UIWebView`带有文本的文本（预热 UIWebView）
2.  当需要显示详细信息视图时，`init`该`prepare for segue`方法中的 web 视图将其传递给“产品详细信息”视图控制器。
3.  我尝试了在故事板中/不在故事板中/在滚动视图中等的各种组合

如果其他人遇到这个问题以及他们如何克服它/解决它，我会非常感兴趣。我觉得很奇怪，我在 SO 上找不到很多类似的问题；我一定是在做傻事……

* * *

请注意，我使用的是 UIWebView，因此可以显示富文本。我知道我可以使用其他控件显示富文本，但是制作我想要显示的文本的程序只能使用 HTML 导出富文本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T17:14:40.013

这是一个常见的问题`UIWebView`。我的解决方法是先隐藏 Web 视图（改为显示某种“正在加载...”指示器），然后在`webViewDidFinishLoad:`方法中使其不隐藏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T20:26:45.403

除了使用 UIWebView 来显示富文本内容，您可以尝试使用 OHAttributedLabel 的[OHASBasicHTMLParser](https://github.com/AliSoftware/OHAttributedLabel)，它向后兼容 iOS 6 之前的版本。

[您可以在此处](https://github.com/AliSoftware/OHAttributedLabel#ohasmarkupparsers-and-simple-markup-to-build-your-attributed-strings-easily)找到其标记解析器的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-07T09:40:14.357

这应该对加载有很大帮助：

```
 var data: Data? = htmlString.data(using: .utf8)

    if let aData = data {

        webView.load(aData, mimeType: "text/html", textEncodingName: "UTF-8", baseURL: NSURL() as URL)
    } 
```

信用：http: [//iphonedevsdk.com/forum/iphone-sdk-development/23481-why-the-load-delay-with-a-uiwebview-and-local-text.html](http://iphonedevsdk.com/forum/iphone-sdk-development/23481-why-the-load-delay-with-a-uiwebview-and-local-text.html)

# objective-c - 如何禁用facebook登录对话框

> ID：15846854
> 
> 赞同：0
> 
> 时间：2013-04-06T03:56:53.200
> 
> 标签：objective-c, facebook-ios-sdk

我是 facebook SDK 和 iOS 开发人员的新手，当用户登录 facebook 时，我的应用程序出现问题，当我使用相同的帐户 fb 登录时，我的应用程序总是显示此登录对话框： ![在此处输入图像描述](https://i.stack.imgur.com/gZuij.png)

我希望我的应用程序仅在第一次登录 fb 帐户时显示该对话框，但我不知道该怎么做，这是我的代码：

```
- (void)sessionStateChanged:(FBSession *)session state:(FBSessionState) state error:(NSError *)error {
switch (state) {
    case FBSessionStateOpen:
        if (!error) {
            mainViewController *mainView = [self.storyboard instantiateViewControllerWithIdentifier:@"mainView"];
            [self.navigationController pushViewController:mainView animated:YES];
            // We have a valid session
            NSLog(@"User session found");
        }
        break;
    case FBSessionStateClosed:
    case FBSessionStateClosedLoginFailed:
        [FBSession.activeSession closeAndClearTokenInformation];
        break;
    default:
        break;
}

[[NSNotificationCenter defaultCenter]
 postNotificationName:FBSessionStateChangedNotification
 object:session];

if (error) {
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:error.localizedDescription
                              delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
    [alertView show];
} 
```

}

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"email",
                        @"user_likes",
                        nil];

return [FBSession openActiveSessionWithReadPermissions:permissions
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self sessionStateChanged:session
                                                             state:state
                                                             error:error];
                                     }]; 
```

}

```
- (IBAction)authLogin:(id)sender {
[self openSessionWithAllowLoginUI:YES]; 
```

}

我使用 fb sdk 3.2 和 ios 模拟器 6.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:16:03.487

我想这会对你有所帮助，看看：

[Facebook 开发者专区](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)

# highcharts - 在 highcharts 中选择了哪个 rangeSelector 按钮

> ID：15846859
> 
> 赞同：2
> 
> 时间：2013-04-06T03:57:29.397
> 
> 标签：highcharts, highstock

我想知道如何确定在 highstock 中选择了哪个 rangeSelector 按钮。

我的范围选择器按钮：

```
 buttons: [{
            type: 'month',
            count: 1,
            text: '1 MONTH',
        }, {
            type: 'month',
            count: 3,
            text: '3 MONTH'
        }, {
            type: 'month',
            count: 6,
            text: '6 MONTH'
        }, {
            type: 'ytd',
            text: 'YTD'
        }, {
            type: 'year',
            count: 1,
            text: '1 YEAR'
        }, {
            type: 'all',
            text: 'ALL'
        }], 
```

例如我点击我的第一个 rangeSelector 是 1 个月。我想知道这个按钮是否被选中。

有什么活动吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T10:46:48.457

您可以捕获 setExtremes() ( [http://api.highcharts.com/highstock#xAxis.events.setExtremes](http://api.highcharts.com/highstock#xAxis.events.setExtremes) )，然后在事件对象中，您可以访问带有计数、文本和类型属性的 event.rangeSelectorButton 对象。

```
 xAxis: {
        events: {
            setExtremes: function(e) {
                console.log(this);
                if(typeof(e.rangeSelectorButton)!== 'undefined')
                {
                  alert('count: '+e.rangeSelectorButton.count + 'text: ' +e.rangeSelectorButton.text + ' type:' + e.rangeSelectorButton.type);
                }
            }
        }
    }, 
```

[http://jsfiddle.net/E6GHC/1/](http://jsfiddle.net/E6GHC/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-22T04:07:29.837

您可以直接从`rangeSelector`.

例如：

```
var chart = $('#container').highcharts();

var selected = chart.rangeSelector.selected; // Index of selected button
var text = chart.rangeSelector.buttonOptions[selected].text; // Text of selected button
var type = chart.rangeSelector.buttonOptions[selected].type; // Type of selected button 
```

和其他一些随机信息`buttonOptions`，使用选定`buttons`的`rangeSelector`索引。

请参阅[此 JSFiddle 演示](http://jsfiddle.net/yqt2wk7L/)以查看它的实际效果。

# terminal - 在 Mac OSX 10.8 中设置环境变量

> ID：15846860
> 
> 赞同：0
> 
> 时间：2013-04-06T03:57:35.717
> 
> 标签：terminal, scheme, racket, command-line-tool

问这个我觉得很愚蠢，但我完全无法在 Mac OSX 10.8 中设置环境变量。

我非常感谢一些关于要编辑哪些文件、放置在文件中的语法等的具体说明。

我正在尝试使用 Arc 进行一些 Web 开发，这需要球拍。我从弧中收到一个错误，即“球拍”不是可识别的命令。我只能在 Racket 的 bin 目录中运行球拍命令（这是我的球拍目录的位置 - /Applications/Racket v5.3.3/），这表明尚未为球拍创建环境变量（但我可能是错的）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T04:12:40.207

您是否尝试过编辑您的个人资料？如果您使用 bash，请编辑主目录中的 .bash_profile 文件。您将不得不插入这样的一行：

`export PATH="$PATH:/Applications/Racket\ v5.3.3"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T04:37:31.903

您必须将 Racket`bin/`目录的路径添加到`PATH`环境变量中。使用您选择的文本编辑器打开文件`~/.bash_profile`，查找与此类似的行（该`<paths>`部分只是真实路径的占位符），如果不存在，只需添加它：

```
PATH=$PATH:<paths> 
```

最后，添加 a`:`和 Racket`bin/`目录的路径，如下所示：

```
PATH=$PATH:<paths>:/Applications/Racket\ v5.3.3/bin 
```

将`v5.3.3`版本号替换为您安装的适当版本。最后，确保此行出现在文件中的某处：

```
export PATH 
```

保存它，您就可以开始了！

# android - Firefox for Android 的插件 - 禁用菜单项？

> ID：15846861
> 
> 赞同：0
> 
> 时间：2013-04-06T03:57:37.353
> 
> 标签：android, firefox, firefox-addon, add-on, fennec

我查看了[文档](https://developer.mozilla.org/en-US/docs/Extensions/Mobile/Creating_a_User_Interface)和[示例](https://github.com/mfinkle/skeleton-addon-fxandroid/blob/master/bootstrap.js)，但它只显示了添加/删除菜单项的方法，但没有禁用。这是不可能的还是有办法做到这一点？如果是这样，您能否提供一个完整 API 的链接（如果有）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T22:59:14.057

你试过看这个插件源代码吗？有时在移动设备中有些东西是相同的：[https ://addons.mozilla.org/en-US/firefox/addon/menu-editor/](https://addons.mozilla.org/en-US/firefox/addon/menu-editor/)

这里有很多人可以帮助你： [http ://client01.chat.mibbit.com/?server=irc.mozilla.org&channel=%23mobile](http://client01.chat.mibbit.com/?server=irc.mozilla.org&channel=%23mobile)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T12:22:01.860

您可以使用 NativeWindow.menu.add(...) 添加菜单，然后使用 NativeWindow.menu.update(...) 禁用它。有关示例，请参见文档：

[https://developer.mozilla.org/en-US/docs/Extensions/Mobile/API/NativeWindow/menu/update](https://developer.mozilla.org/en-US/docs/Extensions/Mobile/API/NativeWindow/menu/update)

# java - 从 OpenGL ES 1.0 切换到 2.0

> ID：15846863
> 
> 赞同：4
> 
> 时间：2013-04-06T03:57:51.360
> 
> 标签：java, android, opengl-es

很长一段时间以来，我一直在使用 OpenGL 1.0 开发一个 Android 应用程序，使用一种幼稚的渲染方法，基本上每帧都使用 FloatBuffers 调用 glColor4f(...) 和 glDrawArrays(...) 。随着我添加更多 UI 元素并且绘制调用的数量增加，我遇到了图形成为巨大瓶颈的地步。

所以我现在正在寻找将所有这些调用分组为一个（或两个或三个）绘制调用的最佳方法。看起来最干净、最有效和最规范的方法是使用 VBO 对象，可从 OpenGL ES 2.0 开始使用。但是，这需要我进行巨大的重构才能将我的整个图形后端从 ES 1.0 切换到 ES 2.0。我不确定这是否是一个好的决定，或者是否有可以接受的方法在 1.0 中对我的绘图调用进行分组，这对于相对简单的 2D 数据（正方形、圆角矩形 TRIANGLE_FAN 等）可以正常工作，或者是否真的可能值得硬着头皮做出改变。我还可能会提到，我非常依赖 ES 1.0 的固定管道非常方便的转换和缩放。

环顾四周，我惊讶地发现几乎没有人在我的位置上谈论这种转换的权衡和复杂性。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:23:29.763

> 我非常依赖平移和缩放

请注意，如果您在绘制调用之间更改模型视图矩阵，则无法批处理任何内容。（ES2 没有改变这一点）。

Vbo a 可从 opengl ES 1.1 获得。它们可能适用于您的目标设备。[即使对于 ES1.0 (ARB_vertex_buffer_object)](https://stackoverflow.com/questions/2093594/opengl-extensions-available-on-different-android-devices)

您可以使用世界空间几何创建一个大 VBO（=使用 cpu 解决缩放和平移）并绘制它。即使您每帧更新此 vbo，根据我的经验，它也足够快。发送数千个小的 drawcall 几乎总是最慢的。

从固定管道移动到完整的顶点/片段着色器管道一点也不容易。它需要大量的 3d 知识。小心。先写一个原型。（世界空间或物体空间照明？如何转换法线？...）

薇薇安

# asp.net - Asp.net GridView 启用行选择

> ID：15846864
> 
> 赞同：2
> 
> 时间：2013-04-06T03:58:16.143
> 
> 标签：asp.net, gridview

我在 asp.net 中使用 GridView。我想选择一个数据行。我在属性面板中查找了 MultiSelect 和 SelectionMode，但找不到。

那么如何在 GridView 中启用选择行呢？

谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/6jJ7Q.jpg) 代码背后

```
public partial class SearchCourse : System.Web.UI.Page
{
Connection dbCon;
DataTable tbl;

protected void Page_Load(object sender, EventArgs e)
{
    dbCon = new Connection();

}
protected void RadioButton1_CheckedChanged(object sender, EventArgs e)
{
    if (RadioButton1.Checked) {
        txtSubName.Enabled = true;
        comboSemester.Enabled = false;
        comboYear.Enabled = false;
        comboProgram.Enabled =false;
        txtSubName.Text = "";
    }
}
protected void RadioButton2_CheckedChanged(object sender, EventArgs e)
{
    if (RadioButton2.Checked) {

        comboProgram.Enabled = true;

        if (comboProgram.SelectedItem.ToString() == "Foundation Course")
        {
            comboSemester.Enabled = false;
            comboYear.Enabled = false;
        }
        else {
            comboSemester.Enabled = true;
            comboYear.Enabled = true;
        }
        txtSubName.Text = "";
        txtSubName.Enabled = false;
    }
}

protected void imgBtnSearch_Click(object sender, ImageClickEventArgs e)
{
    if (RadioButton1.Checked) {
        String name = txtSubName.Text;
        tbl = dbCon.getResultsBySubjectName(name);
        GridView1.DataSource = tbl;
        GridView1.DataBind();
    }
    else if (RadioButton2.Checked)
    {
        String program = comboProgram.SelectedItem.ToString();
        String year = comboYear.SelectedItem.ToString();
        String sem= comboSemester.SelectedItem.ToString();
        tbl = dbCon.getResultsByProgram(program,year,sem);
        GridView1.DataSource = tbl;
        GridView1.DataBind();
    }
    else if (RadioButton3.Checked)
        {
            String name = txtSubName.Text;
            tbl = dbCon.getResultsBySubjectNo(name);
            GridView1.DataSource = tbl;
            GridView1.DataBind();
        }

}

protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    String program = comboProgram.SelectedItem.ToString();
    String year, sem;
    if (program == "Foundation Course")
    {
        comboYear.Enabled = false;
        comboSemester.Enabled = false;
        year = null;
        sem = null;
    }
    else {
        comboYear.Enabled = true;
        comboSemester.Enabled = true;
        year = comboYear.SelectedItem.ToString();
        sem = comboSemester.SelectedItem.ToString();
    }

    tbl = dbCon.getResultsByProgram(program, year, sem);
    GridView1.DataSource = tbl;
    GridView1.DataBind();
}

protected void comboYear_SelectedIndexChanged(object sender, EventArgs e)
{
    String program = comboProgram.SelectedItem.ToString();
    String year = comboYear.SelectedItem.ToString();
    String sem = comboSemester.SelectedItem.ToString();
    tbl = dbCon.getResultsByProgram(program, year, sem);
    GridView1.DataSource = tbl;
    GridView1.DataBind();
}
protected void comboSemester_SelectedIndexChanged(object sender, EventArgs e)
{
    String program = comboProgram.SelectedItem.ToString();
    String year = comboYear.SelectedItem.ToString();
    String sem = comboSemester.SelectedItem.ToString();
    tbl = dbCon.getResultsByProgram(program, year, sem);
    GridView1.DataSource = tbl;
    GridView1.DataBind();

}

protected void RadioButton3_CheckedChanged(object sender, EventArgs e)
{
    if (RadioButton3.Checked)
    {
        txtSubName.Enabled = true;
        comboSemester.Enabled = false;
        comboYear.Enabled = false;
        comboProgram.Enabled = false;
        txtSubName.Text = "";
    }
}
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{

} 
```

}

**网格视图代码**

```
<asp:GridView ID="GridView1" CssClass="grid" runat="server" AllowPaging="True" 
BorderColor="Black" BorderStyle="Solid" BorderWidth="2px" 
GridLines="Horizontal"  EnableViewState="False" 
PageSize="5"   onselectedindexchanged="GridView1_SelectedIndexChanged" > 
```

```
<RowStyle CssClass="gridRow" Width="800px" />

<SelectedRowStyle BackColor="#FF0066" ForeColor="White" />

</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T09:48:11.163

我认为 MultiSelect 和 SelectionMode 属性仅适用于 VB.NET 网格，而不适用于 ASP.NET。请记住，ASP.NET 中的所有控件都是伪装的 HTML，因此它们可能会受到更多限制。您没有理由不能拥有多选表，但您必须自己做管道。因此，您需要通过处理 RowDataBound 事件来启用行选择，如

[http://forums.asp.net/t/992062.aspx?How+to+select+row+in+gridview+on+click](http://forums.asp.net/t/992062.aspx?How+to+select+row+in+gridview+on+click)

或者使用 MS 提供的选项，如

[http://msdn.microsoft.com/en-us/library/wbk82279(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/wbk82279(v=vs.100).aspx)

然后你需要处理 SelectedIndexChanging 事件，找出用户点击了哪一行，然后自己处理行着色。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T04:13:17.890

在 gridview 中，您必须定义一个事件`onselectedindexchanged`，`onrowdatabound`如下所示：

```
onselectedindexchanged="GridView1_SelectedIndexChanged"  onrowdatabound="GridView1_RowDataBound" 
```

**要显示选定的行，您可以在网格视图中使用以下样式：**

```
 <SelectedRowStyle BackColor="Red" /> 
```

**在后面的代码中：**

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
}

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{

if (e.Row.RowType == DataControlRowType.DataRow)
    {
        // Set the hand mouse cursor for the selected row.
        e.Row.Attributes.Add("OnMouseOver", "this.style.cursor = 'hand';");

        // The seelctButton exists for ensuring the selection functionality
        // and bind it with the appropriate event hanlder.
        LinkButton selectButton = new LinkButton()
        {
            CommandName = "Select",
            Text = e.Row.Cells[0].Text
        };
        selectButton.Font.Underline = false;
        selectButton.ForeColor = Color.Black;

        e.Row.Cells[0].Controls.Add(selectButton);
        //e.Row.Attributes["OnClick"] =
        //     Page.ClientScript.GetPostBackClientHyperlink(selectButton, "");
        e.Row.Attributes["onclick"] =         ClientScript.GetPostBackClientHyperlink(this.GridView1, "Select$" + e.Row.RowIndex);
    }
    } 
```

**注意：**您可以在事件窗口中找到该事件。

# graphics - 光线追踪中的光泽反射

> ID：15846867
> 
> 赞同：2
> 
> 时间：2013-04-06T03:58:44.093
> 
> 标签：graphics, raytracing

我正在做一个关于光线追踪的项目，现在我可以做一些基本的渲染。

下图有：

镜面反射、折射、纹理映射和阴影。

![在此处输入图像描述](https://i.stack.imgur.com/wUZ86.png)

我正在尝试做光泽反射，到目前为止，这就是我得到的。谁能告诉我这张有光泽的反射图像是否有任何问题？

![在此处输入图像描述](https://i.stack.imgur.com/1LvIN.png)

相比之下，下图来自镜面反射

![在此处输入图像描述](https://i.stack.imgur.com/rCWSp.png)

这是我关于光泽反射的代码，基本上，一旦主光线与物体相交。从这个交点开始，它会随机射出另外 80 条光线，并取这 80 条光线颜色的平均值。我在这段代码中遇到的问题是 x 和 y 的大小，我必须将它们除以某个值，在本例中为 16，这样光泽反射光线就不会太随机。这个逻辑有什么问题吗？

```
 Colour c(0, 0, 0);

                     for (int i = 0; i < 80; i++) {

                          Ray3D testRay;
                          double a = rand() / (double) RAND_MAX;
                          double b = rand() / (double) RAND_MAX;
                          double theta = acos(pow((1 - a), ray.intersection.mat->reflectivity));
                          double phi = 2 * M_PI * b;
                          double x = sin(phi) * cos(theta)/16;
                          double y = sin(phi) * sin(theta)/16;
                          double z = cos(phi);
                          Vector3D u = reflect.dir.cross(ray.intersection.normal);
                          Vector3D v = reflect.dir.cross(u);
                          testRay.dir = x  * u + y * v  + reflect.dir;
                          testRay.dir.normalize();

                          testRay.origin = reflect.origin;
                          testRay.nbounces = reflect.nbounces;
                          c = c + (ray.intersection.mat->reflectivity)*shadeRay(testRay);
                     }
                     col = col + c / 80; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T04:15:19.067

除了在编码时永远不会很好的硬编码常量之外，还有一个更微妙的问题，尽管您的图像整体看起来不错。

蒙特卡罗积分包括将被积函数*除以*生成这些样本的概率密度函数 (pdf) 相加。因此，您的代码中有两个问题：

*   尽管您似乎对 Phong 模型使用了 pdf 文件，但您没有除以 pdf 文件（如果我能很好地识别它；至少它不是统一的 pdf 文件）
*   您已经进一步扩展了您的`x`和`y`组件`1./16.`，显然没有进一步改变您的 pdf 的原因。

这个想法是，*如果您能够准确地根据 Phong 的模型乘以余弦定律对光线进行采样，*那么您甚至不必将被积函数乘以 BRDF。在实践中，没有精确的公式可以精确地采样 BRDF（除了朗伯式的），所以你需要计算：
`pixel value = sum BRDF*cosine*incoming_light / pdf`
这主要抵消了 if `BRDF*cosine = pdf`。

当然，您的图像整体看起来不错，所以如果您对物理合理性不感兴趣，那也可以。
关于计算机图形学和蒙特卡罗集成（使用适当的公式）中使用的各种 pdf 的一个很好的来源是 Philip Dutré 的[Global Illumination Compendium](http://people.cs.kuleuven.be/~philip.dutre/GI/TotalCompendium.pdf)。

# ruby-on-rails - 如何在我的 Rails 3 模型中创建范围以显示 value = false 的所有位置？

> ID：15846870
> 
> 赞同：0
> 
> 时间：2013-04-06T03:59:04.070
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我最近在名为“帖子”的列中添加了一个名为“评论”的新字段

我只想显示 Review = false 的帖子。

我正在尝试将正确的范围添加到我的 Posts 模型中来执行此操作。

这是我目前的范围。

```
 default_scope order: 'posts.created_at DESC' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:02:19.953

```
Model < ActiveRecord::Base
  def self.without_review
    where(review: false) # or how ever you have the boolean in your db
  end
end 
```

当然还有一个规格

```
describe Model do
  describe "::without_review" do
    it 'loads posts without reviews' do
      no_review = Model.create(review: false)
      Model.create(review: true)

      Model.without_reivew.all.should == [no_review]
    end
  end
end 
```

只需使用类方法和链范围

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:03:02.593

您可以创建一个命名范围：

```
scope :unreviewed, where(:review => false) 
```

# php - 由于未定义的变量，从数据库中检索数据的问题

> ID：15846872
> 
> 赞同：0
> 
> 时间：2013-04-06T03:59:55.020
> 
> 标签：php, mysql, forms

我的意图是从数据库中检索数据并创建了以下函数，但收到未定义的函数、成绩、错误消息。代码如下：

```
 <form action="processor.php" method="post">
      <h4>Question # 1</h4>
      <p>What grade are you in?</p>
      <label class="checkbox"><input type="checkbox" name="grade" value="1"> Freshmen</label>
      <label class="checkbox"><input type="checkbox" name="grade" value="2"> Sophomore</label>
      <label class="checkbox"><input type="checkbox" name="grade" value="3"> Junior</label>
      <label class="checkbox"><input type="checkbox" name="grade" value="4"> Senior</label>

      <h4>Question # 2</h4>
      <p>What is your current GPA?</p>
      <select name="gpa">
      <option value="4">3.5 or above</option>
      <option value="3">3.0-3.4</option>
      <option value="2">2.5-2.9</option>
      <option value="1">2.0-2.4</option>
      <option value="0">Lower</option>
      </select>

      <h4>Question # 3</h4>
      <p>Where do you excel the most academically?</p>
      <select name="school" multiple="multiple">
      <option value ="1">Mathematics</option>
      <option value ="2">Literature</option>
      <option value ="3">History</option>
      <option value ="4">Humanities</option>
      <option value ="5">Science</option>
      </select> 
```

然后处理表单提交的PHP文件：

```
<?php
require_once('processor.php');
class Processor {
    #code

function get_response($id) {
$dsn = "mysql:host=localhost;dbname=user";
$username = "root"; // database username
$password = "stewie12"; // database password
try {
    $enter = new PDO($dsn, $username, $password);
    $sql = "SELECT response FROM recommendations WHERE id = ? ";
    $new_item = $enter->prepare($sql);
            $new_item->setFetchmode(PDO::FETCH_ASSOC);
    $new_item->execute(array($id));
    foreach($new_item as $nw) {
        return $nw['response'];
    }
} catch (Exception $e) {
    echo $e->getMessage();
    exit;
}
return "";
    }

 function GetWeird () {
    $santiago="1992";
if ($santiago="1992") {
        $id = 1;
    } else {
        $id = 2;
}
        echo $this->get_response($id);
    }

 function Grades () {
 $grade = $_POST['grade'];
 if ($grade =="1") {
    echo "You're a freshmen";
} elseif ($grade == "2") {
    echo "You're a sophomore";
} elseif ($grade == "3") {
    echo "You're a junior.";
} elseif ($grade == "4") {
     echo "You're a senior.";
 } else {
    echo "Something is wrong.";
 }

 }

 function Gpa () {
 $gpa = $_POST['gpa'];
 if ($gpa =="1") {
     echo "You strongly need to up your GPA.";
 } elseif ($gpa == "2") {
     echo "You're an average student.";
 } elseif ($gpa == "3") {
     echo "You're an above average student.";
 } elseif ($gpa == "4") {
    echo "You're an excellent sudent.";
 } else {
    echo "Something is wrong.";
  }

  }

 function School () {
 $school = $_POST['school'];
 if ($school =="1") {
 echo "You're into Math";
 } elseif ($school == "2") {
   echo "You're into Lit";
  } elseif ($school == "3") {
  echo "You're into history.";
 } elseif ($school == "4") {
    echo "You're into humanities.";
 } elseif ($school == "5") {
   echo "You're into science.";
  } else {
   echo "Something is wrong.";
  }

   } 
```

和查看页面：

```
 <?php $processor = new Processor(); ?>
     <h4>Question # 1</h4>
     <p><?php Grades($grade); ?></p>
     <h4>Question # 2</h4>
     <p><?php Gpa($gpa); ?></p>
      <h4>Question # 3</h4>
     <p><?php School($school); ?></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:03:01.087

要访问类函数，请使用以下代码，

你必须像这样使用它`$class_variable->function_name()`

```
<?php $processor = new Processor(); ?>
 <h4>Question # 1</h4>
 <p><?php $processor->Grades($grade); ?></p>
 <h4>Question # 2</h4>
 <p><?php $processor->Gpa($gpa); ?></p>
  <h4>Question # 3</h4>
 <p><?php $processor->School($school); ?></p> 
```

# r - 对称的小提琴式直方图？

> ID：15846873
> 
> 赞同：9
> 
> 时间：2013-04-06T04:00:15.063
> 
> 标签：r, lattice

如何制作直方图，其中每个条的中心位于公共轴上？这看起来像一个带有阶梯形边缘的小提琴图。

我想在 Lattice 中执行此操作，并且不介意自定义面板功能等，但很乐意使用基本 R 图形甚至 ggplot2。（我还没有投入到 ggplot2 中，但会在某个时候冒险。）

（我为什么要这样做？我认为当数据是离散的并且出现在几个 [5-50] 均匀间隔的数值上时，它可能是小提琴图的有用替代品。然后每个 bin 代表一个点。当然，我可以只生成一个正常的直方图。但我认为有时同时显示箱须图和小提琴图很有用。对于定期的离散数据，与箱线图具有相同方向的对称直方图可以进行比较数据的详细结构与箱线图，就像小提琴图一样。在这种情况下，对称直方图可能比小提琴图提供更多信息。（豆图可能是我刚才描述的另一种选择，尽管实际上我的数据并不是字面上离散的——它只是收敛到一系列常规值附近。这使得 R's beanplot 包对我来说用处不大，除非我通过将它们映射到最接近的常规值来标准化这些值。））

这是一些数据的 30 个观察子集，由基于代理的模拟生成：

```
df30 <- data.frame(crime.v=c(0.2069526, 0.2063516, 0.06919754,
0.2080366, -0.06975912, 0.206277, 0.3457634, 0.2058985, 0.3428499,
0.3428159, 0.06746109, -0.07068694, 0.4826098, -0.06910966, 0.06769761,
0.2098732, 0.3482267, 0.3483602, 0.4829777, 0.06844112, 0.2093492,
0.4845478, 0.2093505, 0.3482845, 0.3459249, 0.2106339, 0.2098397,
0.4844956, 0.2108985, 0.2107984), bias=c("beast", "beast", "beast",
"beast", "beast", "beast", "beast", "beast", "beast", "beast", "beast",
"beast", "beast", "beast", "beast", "virus", "virus", "virus", "virus",
"virus", "virus", "virus", "virus", "virus", "virus", "virus", "virus",
"virus", "virus", "virus")) 
```

`df`可以从此链接下载以 Rdata 文件中完整的 600 个观测值命名的数据框： [CVexample.rdata](http://members.logical.net/~marshall/CVexample.rdata)。

这些`crime.v`值都接近以下之一，我将其称为焦点：

```
[1] -0.89115386 -0.75346155 -0.61576924 -0.47807693 -0.34038463 -0.20269232 -0.06500001
[8]  0.07269230  0.21038460  0.34807691  0.48576922  0.62346153  0.76115383  0.89884614 
```

（这些`crime.v`值实际上是 13 个变量的平均值，其值的范围可以从 -1 到 1，但最终会收敛到 0.9 或 -.9 附近的值。13 个值的平均值约为 0.9 或 - .9 有点靠近焦点。在实践中，我通过检查数据确定了焦点的适当值，因为涉及一些额外的变化。）

可以使用以下方法制作小提琴图：

```
require(lattice)
bwplot(crime.v ~ bias, data=df30, ylim=c(-1,1), panel=panel.violin) 
```

如果您使用较大的数据集运行此程序，您会看到生成的小提琴图之一是多模态的，而另一个不是。然而，这似乎并没有反映两个小提琴图背后的数据差异；据我所知，这是一个人工制品，因为焦点相对于情节的位置。我可以通过调整`density`传递给 panel.violin 的参数来消除差异，但是只表示每个集群中有多少点会更清楚。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T15:19:42.987

这是使用基本图形的一种可能性：

```
tmp <- tapply( iris$Petal.Length, iris$Species, function(x) hist(x, plot=FALSE) )

plot.new()
tmp.r <- do.call( range, lapply(tmp, `[[`, 'breaks') )
plot.window(xlim=c(1/2,length(tmp)+1/2), ylim=tmp.r)
abline(v=seq_along(tmp))

for( i in seq_along(tmp) ) {
    h <- tmp[[i]]
    rf <- h$counts/sum(h$counts)
    rect( i-rf/2, head(h$breaks, -1), i+rf/2, tail(h$breaks, -1) )
}

axis(1, at=seq_along(tmp), labels=names(tmp))
axis(2)
box() 
```

您可以根据自己的喜好调整不同的部分，整个事情可以很容易地包装到一个函数中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T04:38:21.383

这是基于@GregSnow 使用基本图形的答案的格子面板功能。如果没有 Greg 提供坚实的起点，我就无法做到这一点，所以所有的功劳都归功于 Greg。我的面板功能不是很复杂，很可能会在一些简单的事情上中断，但会处理水平和垂直方向，并允许您提供中断向量或将其省略。它还会删除两端空的垃圾箱。panel 函数使用'而不是's`hist`的默认行为，后者更复杂。欢迎对更好的方法发表评论。`breaks``histogram`

据我所知，由于对称或中心直方图没有现有名称，而且它们让人想起河内塔玩具，也许它们应该被称为“河内塔直方图”。因此该函数被调用`panel.hanoi`。

使用上面df30定义的简单用法示例：

```
bwplot(crime.v ~ bias, data=df30, panel=panel.hanoi) 
```

这是一个更复杂的示例，使用问题链接中提供的数据（答案末尾的图形）。

```
bwplot(crime.v ~ bias, data=df, ylim=c(-1,1), pch="|", coef=0, panel=function(...){panel.hanoi(col="pink", breaks=cv.ints, ...); panel.bwplot(...)}) 
```

此示例添加`ylim`以指定绘图应从 -1 变为 1，并在 Hanoi 图的顶部覆盖 bwplot。 `pch`并`coef`影响 bwplot 的外观。该示例还使用以下定义将 Hanoi 图的每个框围绕我的数据点倾向于所在的位置居中（请参阅原始问题）：

```
cv.ints <- c(-1.000000000, -0.960000012, -0.822307704, -0.684615396, -0.546923088, -0.409230781, -0.271538473, -0.133846165, 0.003846142, 0.141538450, 0.279230758, 0.416923065, 0.554615373, 0.692307681, 0.829999988, 0.967692296, 1.000000000) 
```

这是面板功能：

```
panel.hanoi <- function(x, y, horizontal, breaks="Sturges", ...) {  # "Sturges" is hist()'s default

  if (horizontal) {
    condvar <- y # conditioning ("independent") variable
    datavar <- x # data ("dependent") variable
  } else {
    condvar <- x
    datavar <- y
  }

  conds <- sort(unique(condvar))

  # loop through the possible values of the conditioning variable
  for (i in seq_along(conds)) {

      h <- hist(datavar[condvar == conds[i]], plot=F, breaks) # use base hist(ogram) function to extract some information

    # strip outer counts == 0, and corresponding bins
    brks.cnts <- stripOuterZeros(h$breaks, h$counts)
    brks <- brks.cnts[[1]]
    cnts <- brks.cnts[[2]]

    halfrelfs <- (cnts/sum(cnts))/2  # i.e. half of the relative frequency
    center <- i

    # All of the variables passed to panel.rec will usually be vectors, and panel.rect will therefore make multiple rectangles.
    if (horizontal) {
      panel.rect(head(brks, -1), center - halfrelfs, tail(brks, -1), center + halfrelfs, ...)
    } else {
      panel.rect(center - halfrelfs, head(brks, -1), center + halfrelfs, tail(brks, -1), ...)
    }
  }
}

# function to strip counts that are all zero on ends of data, along with the corresponding breaks
stripOuterZeros <- function(brks, cnts) { do.call("stripLeftZeros", stripRightZeros(brks, cnts)) }

stripLeftZeros <- function(brks, cnts) {
  if (cnts[1] == 0) {
    stripLeftZeros(brks[-1], cnts[-1])
  } else {
    list(brks, cnts)
  }
}

stripRightZeros <- function(brks, cnts) {
  len <- length(cnts)
  if (cnts[len] ==0) {
    stripRightZeros(brks[-(len+1)], cnts[-len])
  } else {
    list(brks, cnts)
  }
} 
```

![带有重叠 bwplot 的河内塔直方图](https://i.stack.imgur.com/HrtS7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-02T13:34:02.107

看[这里](https://github.com/tidyverse/ggplot2/issues/2341)，现在[有了 lvplot 包](https://cran.r-project.org/web/packages/lvplot/index.html)，它允许您将 geom_lv 与 ggplot 一起使用。geom_lv 似乎完全符合您的要求。

# delphi - 在delphi 7上找不到请求的数据库驱动程序

> ID：15846888
> 
> 赞同：-2
> 
> 时间：2013-04-06T04:03:43.617
> 
> 标签：delphi, firebird, zeos

我已经在我的 Delphi 7 上安装了 ZEOS，并尝试连接到 Firebird 数据库。在我将 db 路径放到对象检查器并尝试连接到它之后，Delphi 总是显示一条消息，请求数据库驱动程序未找到。我已经安装了 Firebird ODBC 并在管理工具上找到的数据源快捷方式上设置了设置，但仍然无法连接。

如何安装驱动程序，我需要把它放在哪里？

当我尝试连接到我的 Firebird 数据库时，我使用了这个连接

```
procedure TForm1.ZConnection1AfterConnect(Sender: TObject);
begin

end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T07:36:17.390

我认为您可能误解了 Zeos 是什么以及做什么。它**不是**位于您的应用程序和 ODBC、ADO 或任何数据库访问层之间的层。相反，它本身是一个数据库访问层，允许您本地连接到多个数据库，如 Firebird、SQLite 等。它不需要安装 ODBC。

您可以在[本文](http://zeos.firmos.at/kb.php?mode=article&k=8)的网页上找到有关 Zeos 架构的介绍。

为了与 Firebird 连接，您需要使用 TZConnection 并设置以下属性：

*   *数据库*：例如`c:/myapp/mydatabase.fdb`
*   *主机名*：如果是同一台计算机，则为 localhost。
*   *协议*：应该是 Firebird 协议之一。`Firebird-x.x`代表访问“普通”火鸟的协议，而`Firebirdd-x.x`代表嵌入式版本。
*   *用户*
*   *密码*

您可以设置其他属性，但对于应该执行此操作的基本连接。

关于您提到的错误，我怀疑您正在尝试使用嵌入式版本。在这种情况下，请确保 @Mark 提到的 DLL 与应用程序可执行文件位于同一路径中。如果是常规 Firebird 安装，请确保其路径包含在系统路径中。

高温高压

# .net - 使用 IronPython 导入 CLR

> ID：15846893
> 
> 赞同：2
> 
> 时间：2013-04-06T04:04:40.620
> 
> 标签：.net, ironpython

我想尝试一下 IronPython，因为我想了解更多关于 Python 和 .Net 底层的知识。我安装了最后一个版本（2.7.3）并尝试导入 clr，在我的第一行，我无法运行并抛出错误“没有名为 CLR 的模块”。我用谷歌搜索但没有找到任何关于这件事的东西。IronPython 安装非常简单，就像所有 Windows 应用程序一样，所以我在这里找不到我错过的内容。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:52:47.980

即使在不区分大小写的平台上（如（在您的情况下）Windows）上，python 中的导入也是区分大小写的（[PEP 235 ）。](http://www.python.org/dev/peps/pep-0235/)（可能有解决方法，但为了兼容性，我不建议使用它们。）

如果您将代码更改为正确的小写拼写，则一切正常。

```
import clr 
```

如果这不是问题，则可能是错误（非 IronPython）解释器/实现的原因。如果通过 Visual Studio 的 python 工具运行，*项目属性/常规/解释器*中的设置应该显示*IronPython* ...而不是标准的 python 实现（*Python* ...）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T10:00:30.230

要安装 clr，您必须安装 pythonnet 库。

您可以使用 pip install pythonnet 安装 pythonnet

# c# - c# - ArgumentOutOfRangeException: Index was out of range - 2 Forms

> ID：15846894
> 
> 赞同：0
> 
> 时间：2013-04-06T04:04:58.797
> 
> 标签：c#

问题解决了。

原来的“private void buttonSave_Click”改为：

```
private void buttonSave_Click(object sender, EventArgs e)
{
    if (MusicCollection.FormMain.PublicVars.AlbumList.Count != 100)
    {
        MusicCollection.FormMain.PublicVars.AlbumList.Add(new Album(NameTextBox.Text));

        MessageBox.Show("New Album added: " + NameTextBox.Text);
        formMain.ListAlbums(formMain.AlbumsListBox.Items);
        this.Close();
    }
    else
    {
        MessageBox.Show("No room for new album.");
        this.Close();
    }
} 
```

原帖：

我是使用 C# 的新手，因此对任何看似明显的错误或糟糕的编码表示歉意。

我正在尝试创建一个新的专辑对象（从 FormAlbumAC 上的 NameTextBox.Text 获取其名称），并在用户单击 FormAlbumAC 上的保存按钮时将其添加到 List AlbumList 中。然后我想在 FormMain 的 ListBox 中列出所有 AlbumList。

当我运行程序并单击保存按钮时，我在以下行收到错误“ArgumentOutOfRangeException 未处理，索引超出范围”：

```
if (MusicCollection.FormMain.PublicVars.AlbumList[i] == null)
// line 8 on my excerpt from Form FormAblumAC 
```

我不确定我做错了什么。任何帮助将不胜感激，谢谢。

窗体主窗体：

```
public const int MAX_ALBUMS = 100;
public int totalAlbums = 0;

public FormMain()
    {
        InitializeComponent();
    }

public static class PublicVars
{
    public static List<Album> AlbumList { get; set; }

    static PublicVars()
    {
        AlbumList = new List<Album>(MAX_ALBUMS);
    }
}

public ListBox AlbumListBox
{
    get
    {
        return AlbumListBox;
    }
}

public void ListAlbums(IList list)
{
    list.Clear();
    foreach (var album in PublicVars.AlbumList)
    {
        if (album == null)
            continue;
        list.Add(album.Name);
    }
} 
```

表格FormAlbumAC：

```
private FormMain formMain;

private void buttonSave_Click(object sender, EventArgs e)
{
    int index = -1;
    for (int i = 0; i < MusicCollection.FormMain.MAX_ALBUMS; ++i)
    {
        if (MusicCollection.FormMain.PublicVars.AlbumList[i] == null)
        {
            index = i;
            break;
        }
    }
    if (index != -1)
    {
        MusicCollection.FormMain.PublicVars.AlbumList[index] = new Album(NameTextBox.Text);
        ++formMain.totalAlbums;

        MessageBox.Show("New Album added: " + NameTextBox.Text);
        formMain.ListAlbums(formMain.AlbumsListBox.Items);
        this.Close();
    }
    else
    {
        MessageBox.Show("No room for new album.");
        this.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:25:55.810

您的问题（来自您的评论）是您的 for 循环条件不正确。你的 for 循环是这样的：

```
for (int i = 0; i < MusicCollection.FormMain.MAX_ALBUMS; ++i) 
```

这里有一个问题和一个潜在问题。首先，当这段代码实际运行时，它确实在运行：

```
for (int i = 0; i < 100; ++i) 
```

因为`MusicCollection.FormMain.MAX_ALBUMS`被声明为 100。当 的长度小于 100 时，这会导致错误`MusicCollection.FormMain.PublicVars.AlbumList`，因为您正在尝试获取不存在的索引。

相反，您需要从 迭代`i=0`到`....PublicVars.AlbumList-1`，或者最好是`for(int i = 0; i < ....PublicVars.AlbumList.Count; i++)`。

第二个潜在问题是您可能会跳过索引 0。数组从索引 0 开始并继续索引`length-1`。因此，您可能想要`i++`，而不是`++i`. 不过，这取决于您的实施。

# c++ - 列表迭代器和 - 运算符的问题

> ID：15846898
> 
> 赞同：0
> 
> 时间：2013-04-06T04:05:43.517
> 
> 标签：c++

谁能告诉我为什么我的列表迭代器讨厌 .end()-1 ？我想在列表结束之前迭代到一个，我的印象是你总是可以这样做！

应要求提供代码

```
std::list<Hammer::shared_ptr<Hammer::Actor>> collisionActorsList;

std::list<Hammer::shared_ptr<Hammer::Actor>>::iterator _actorUpdateIter =           collisionActorsList.begin();
while(_actorUpdateIter != (collisionActorsList.end()-1)) // ERROR HERE
{
    // check against every other actor 
    std::list<Hammer::shared_ptr<Hammer::Actor>>::iterator _otherActorsUpdateIter =  _actorUpdateIter+1; // ERROR HERE TOO
    while(_otherActorsUpdateIter != collisionActorsList.end())
    {// SOME STUFF }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T04:09:51.440

`std::list`使用不支持`operator-`or的双向迭代器`operator+`。使用`std::prev(collisionActorsList.end())`和`std::next(_actorUpdateIter)`。

正如评论中指出的那样，您应该知道您的列表是否为空。如果是这样，这些将无法满足您的需求。有一个简单的功能：`collisionActorsList.empty()`.

# javascript - 根据 URL 参数在 HTML 页面中显示 JSON 数据

> ID：15846900
> 
> 赞同：0
> 
> 时间：2013-04-06T04:06:01.657
> 
> 标签：javascript, jquery, json, forms

我正在尝试仅使用 HTML 和 Javascript 来完成以下操作。

当用户填写我的表单时，他们的表单数据会附加到如下所示的确认页面： [http ://www.mysite.com/confirmation/?firstname=Hans&lastname_Schwartz&country=Germany](http://www.mysite.com/confirmation/?firstname=Hans&lastname_Schwartz&country=Germany)

在该页面上，基于 url 参数，我想显示 locations.json 中与德国相同的国家/地区的所有位置。这要么非常简单，要么完全不可能。经过几个小时的搜索，我不知道哪个是真的。

即使是提示或指向我现有的示例也会有所帮助。我已经做了好几个小时了。总计 n00b。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:22:40.610

从[这里得到这个脚本](https://stackoverflow.com/a/3855394/2242956)

```
(function($) {
    $.QueryString = (function(a) {
    if (a == "") return {};
    var b = {};
    for (var i = 0; i < a.length; ++i)
    {
        var p=a[i].split('=');
        if (p.length != 2) continue;
        b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
    }
    return b;
    })(window.location.search.substr(1).split('&'))
})(jQuery);

var firstname = $.QueryString["firstname"];
var lastname = $.QueryString["lastname"];
var country = $.QueryString["country"]; 
```

使用值国家，您可以轻松显示所有位置

# shopify - Shopify：您能否在不请求额外权限的情况下调用 OAUTH2 权限 URL？

> ID：15846901
> 
> 赞同：1
> 
> 时间：2013-04-06T04:06:25.430
> 
> 标签：shopify

Shopify 文档指出：

> 请求访问商店，除了基础之外没有其他权限：
> 
> [https://SHOP_NAME.myshopify.com/admin/oauth/authorize?client_id=API_KEY](https://SHOP_NAME.myshopify.com/admin/oauth/authorize?client_id=API_KEY)

来源：*http ://docs.shopify.com/api/tutorials/oauth*

但是，当您实际尝试此操作时，您将被重定向到您的 login-finalize URL，并显示错误“无效范围”。

> ```
> www.mydomain.com/shopify/login/finalize/?error=invalid_scope&shop=<redacted>.myshopify.com&timestamp=1365220455&signature=<redacted> 
> ```

似乎文档与此处的实现相矛盾，所以我的问题是：如何在不请求基础之外的其他权限的情况下调用 OAUTH2 权限 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:56:22.427

怕不是。至少需要一个范围。我只是使用 read_products 作为我的“默认”范围。

您可以在此处查看完整信息。[http://ecommerce.shopify.com/c/shopify-apis-and-technology/t/scope-parameter-in-auth-reqs-132941](http://ecommerce.shopify.com/c/shopify-apis-and-technology/t/scope-parameter-in-auth-reqs-132941)

# django - Django上传文件？

> ID：15846903
> 
> 赞同：-3
> 
> 时间：2013-04-06T04:07:43.087
> 
> 标签：django

## 如何使用 Django 上传文件？

我已按照[这些说明上传文件](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/)

在这里，我没有收到任何错误，但是当我提交表单时，表单中的其他详细信息已保存到数据库中。但是我上传的文件没有保存在任何地方。

## /models.py/

```
class resmodel(models.Model):
   resume_header = models.CharField(max_length=100)
   upload_resume = models.FileField(upload_to='documents') 
```

## /forms.py/

```
class resmodelForm(ModelForm):
class Meta:
    model = resmodel 
```

## /views.py/

```
def resview(request):
if request.method == "POST":
    form = resmodelForm(request.POST, request.FILES)
    if form.is_valid():
        a = resmodel(resume_header=resume_header, upload_resume = request.FILES['upload_resume'])
        a.save()
        return render_to_response('/profile/save/success/')
else:
    form = resmodelForm()
    return render_to_response('resume.html', {'form': form})
return render_to_response('resume.html') 
```

## /resume.html/

```
<form action="." method="post" >{% csrf_token %}
<table border="0" align="center" cellsapcing="1" cellspadding="1">
<tr>
    <td colspan="2"><h3> Personal Information</h3></td>
</tr>
<tr>
    <td>Resume Header<sub>(250 words max)</sub></td>
    <td><input type="text" name="resume_header"></td>
</tr>

<tr>
    <td>Upload Resume<sub>(.doc/.docx, rtf, pdf, txt)</sub></td>
    <td><input type="file" name="upload_resume" ></td>
</tr>
<tr>
    <td>
        <input type="submit" value="SUBMIT">&nbsp;&nbsp;
        <input type="reset" value="RESET">
    </td>
</tr>
</table>
</form> 
```

## /urls.py/

```
urlpatterns = patterns('', (r'^profile/$', resview),) 
```

## /settings.py/ 在设置中我的媒体路径和网址是..

```
CURRENT_DIR = os.path.dirname(os.path.abspath(__file__))
MEDIA_ROOT = os.path.join(CURRENT_DIR, 'media')
MEDIA_URL = '/var/www/uploadresume/resume/media/' 
```

**这是我的代码。如果有，请纠正我的错误？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T05:15:06.633

你必须使用`form.save()`而不是手动保存它

```
def resview(request):
    if request.method == "POST":
        form = resmodelForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return render_to_response('/profile/save/success/')
    else:
        form = resmodelForm()
    return render_to_response('resume.html') 
```

你忘了把`enctype="multipart/form-data"`你的`<form>`

```
<form action="." method="post" enctype="multipart/form-data">
    {% csrf_token %}
    ..........
</form> 
```

# html - 如何在 HTML 和 CSS 中获取带有虚线的特定单词？

> ID：15846908
> 
> 赞同：1
> 
> 时间：2013-04-06T04:08:24.543
> 
> 标签：html, css

我有以下文字：

1.  我早上吃了酸奶

2.  酸奶很好吃

3.  早上吃酸奶有益健康

我想用虚线下划线“酸奶”这个词。

标签下划线很容易`<u>`，但我很困惑如何让特定的单词用点下划线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T04:22:39.357

一种方法是使用虚线[边框](https://developer.mozilla.org/en-US/docs/CSS/border-style)。

演示：http: [//jsfiddle.net/HhRT5/](http://jsfiddle.net/HhRT5/)

```
<ol>
    <li>I ate <span class="yogurt">yogurt</span> in the morning</li>
    <li><span class="yogurt">yogurt</span> was very nice</li>
    <li>eating <span class="yogurt">yogurt</span> in the morning is healthy</li>
</ol>

.yogurt {
    border-bottom: 1px dotted #aaa;
} 
```

*   [未来可能的选择`text-decoration-style`](https://developer.mozilla.org/en-US/docs/CSS/text-decoration-style)

# asp.net - 图像路径不作为文件上传中的字符串存储在表字段中

> ID：15846909
> 
> 赞同：1
> 
> 时间：2013-04-06T04:08:35.127
> 
> 标签：asp.net, sql-server-2008, dotnetnuke

我已经使用 ascx 它包含文件上传控件来获取选定的图像路径作为使用 linq 归档的数据库表中的字符串，并且 ascx 用于 dotnetnuke 模块页面。我在 ascx.cs 中使用了一些代码，但它没有从文件上传控件获取图像路径

```
 FormViewRow row = FormView1.Row;
        FileUpload FileUpload1 = (FileUpload)row.FindControl("FileUpload1");

        string filename = "";
        string path;
        if (FileUpload1.HasFile)
        {
            filename = FileUpload1.PostedFile.FileName;
            path = Server.MapPath("DesktopModules/IndiesStore/Images/")+               
            FileUpload1.FileName;
            string onlyname = path.Substring(path.LastIndexOf("\\") + 1);

            IC.Img = "DesktopModules/IndiesStore/Images/" + onlyname;

        } 
```

有任何解决方案....？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T05:50:50.060

是的，但它直接像那个代码一样工作

```
 FormViewRow row = FormView1.Row;
    FileUpload FileUpload1 = (FileUpload)row.FindControl("FileUpload1");

    string filename = "";
    if (FileUpload1.HasFile)
    {
        filename = FileUpload1.PostedFile.FileName;
        IC.Img = "DesktopModules/IndiesStore/Images/" + filename;

    } 
```

这样就解决了，用户只需将所有图像放在服务器上的同一文件夹中，然后从那里选择文件上传中的图像，它就可以正常工作。

# go - go install 总是尝试使用 GOROOT 并且 GOPATH 未在 go env 下列出

> ID：15846914
> 
> 赞同：10
> 
> 时间：2013-04-06T04:09:42.237
> 
> 标签：go

我有一个非常令人沮丧的问题`GOPATH`，尽管设置在 中，但`.profile`在调用时没有出现`go env`，并且似乎没有影响`go install`目标位置。

我正在尝试使用`go install`来安装软件包，并且收到此错误，这清楚地表明它正在尝试安装在`/usr/lib/go`. 而不是`/home/me/dev/go`.

```
$ go install github.com/songgao/colorgo
go install github.com/songgao/go.pipeline: mkdir /usr/lib/go/pkg/linux_386/github.com: permission denied 
```

`go env`给出以下结果。

```
$ go env
GOROOT="/usr/lib/go"
GOBIN=""
GOARCH="386"
GOCHAR="8"
GOOS="linux"
GOEXE=""
GOHOSTARCH="386"
GOHOSTOS="linux"
GOTOOLDIR="/usr/lib/go/pkg/tool/linux_386"
GOGCCFLAGS="-g -O2 -fPIC -m32 -pthread"
CGO_ENABLED="1" 
```

但它肯定*是*确定的。

```
$ echo $GOPATH
/home/me/dev/go 
```

**更新：**我已经将 GOPATH 导出`~/.profile`并获取了它，但我仍然遇到同样的问题。

```
$ export GOPATH=/home/me/dev/go
$ go env
GOROOT="/usr/lib/go"
GOBIN=""
GOARCH="386"
GOCHAR="8"
GOOS="linux"
GOEXE=""
GOHOSTARCH="386"
GOHOSTOS="linux"
GOTOOLDIR="/usr/lib/go/pkg/tool/linux_386"
GOGCCFLAGS="-g -O2 -fPIC -m32 -pthread"
CGO_ENABLED="1" 
```

**再次更新：**自从我升级到go1.1beta2后，这个问题已经停止了。我不确定出了什么问题，因为`GOPATH`似乎设置正确，但现在显然一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T04:16:14.383

[`GOPATH`和工作区](http://golang.org/doc/code.html)

```
$ mkdir -p $HOME/dev/go/src
$ mkdir -p $HOME/dev/go/bin 
```

在`$HOME/.profile`：

```
export GOPATH=$HOME/dev/go:
export PATH=$PATH:$HOME/dev/go/bin 
```

然后重新启动或注销并登录。

登录后，首先运行：

```
$ env | grep -i '^GO'
GOPATH=/home/me/dev/go
$ cat $HOME/.profile 
```

你得到什么输出？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-29T12:14:35.403

创建一个软链接，然后将*go*二进制文件复制`/usr/local`如下：

```
# ln -sf /usr/local/go/bin/go /usr/bin/go 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:59:46.540

当您提供设置 GOPATH 的证据时，您问题的第二部分 - GOPATH 未在 go env 下列出 - 可能是由您安装版本的“go env”引起的。go1 (linux) 和 go1.0.2 (windows) 版本的“go env”都不显示 GOPATH。如果您查看源代码 (GOROOT/src/cmd/go/env.go)，您会在顶部找到要显示的元素列表 (mkEnv)，它以 GOROOT 开头并且不**包含**GOPATH。

版本 go1.0.3 (windows) 确实显示 GOPATH；但是，源中的相应列表以 GOARCH 开头。

我承认这并不能解决你问题的第一部分——（试图）安装到 GOROOT 中——但也许上面的内容会帮助你专注于罪魁祸首（构建过程）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:30:45.193

我认为很明显，在你的 GOTOOLDIR 中安装所有内容，GOTOOLDIR 也与 GOROOT 相关：

> 你的：GOROOT="/usr/lib/go"

根据[文件](http://golang.org/doc/install)：

> 安装 Go 工具
> 
> Go 二进制发行版假定它们将安装在 /usr/local/go（或 Windows 下的 c:\Go）中，但也可以将它们安装在不同的位置。如果这样做，则需要在使用 Go 工具时将 GOROOT 环境变量设置为该目录。
> 
> 例如，如果您将 Go 安装到您的主目录，您应该将以下命令添加到 $HOME/.profile：
> 
> 导出 GOROOT=$HOME/go
> 
> 导出 PATH=$PATH:$GOROOT/bin
> 
> Windows 用户应阅读有关在 Windows 下设置环境变量的部分。

您应该按照这些步骤来更改您的 GOROOT，而不是 GOPATH，然后一切都应该工作。

如果它不起作用，请同时更改 GOTOOLDIR。

# html - 内联块的垂直定位

> ID：15846915
> 
> 赞同：2
> 
> 时间：2013-04-06T04:09:43.643
> 
> 标签：html, css

这个问题很难用语言来解释，所以我将链接到一个 jsFiddle。[js小提琴](http://jsfiddle.net/NTgqv/)。如果您查看任何链接，您将看到一些处于不同级别的框。这些应该平铺在屏幕上，有点像你[在这里](http://playzone.mrfishie.com)看到的。如何阻止它们在元素上方出现奇怪的垂直间距并让它们正确平铺？我认为这是由每个元素内容具有不同的高度引起的，但我不知道如何解决它。这是您可以在 jsFiddle 中找到的代码：
HTML：

```
<div id="elements">
    <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec id nunc ut erat facilisis pharetra. Sed egestas gravida mattis.</div>
    <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam eu lectus eu purus pulvinar tincidunt. Phasellus at elit id nulla volutpat gravida sit amet vitae lorem. Nunc mattis venenatis varius. Aenean nec odio lorem. Nulla in turpis sed velit venenatis lacinia eget id ante. Maecenas quis massa nunc.</div>
    <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. </div>
</div> 
```

CSS：

```
#elements div {
    display:inline-block;
    width:250px;
    height:250px;
    border:solid thin #000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:22:54.617

添加`vertical-align: top;`到 CSS 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:27:01.100

有很多技术可以解决这个问题。要么浮动这些元素，如 -

```
#elements div {
    display:inline-block;
    width:250px;
    height:250px;
    border:solid thin #000;
    float:left;
} 
```

或者`vertical-align: top;`我认为在内联块元素的情况下购买，浮动一个更健壮，不会在任何断点处持续存在，而且您还没有对主体应用重置。

# php - 根据特定的数据库信息创建操作

> ID：15846918
> 
> 赞同：2
> 
> 时间：2013-04-06T04:10:19.490
> 
> 标签：php, mysql

**更新：**不知道为什么答案被删除。但我确实收到了一个解决方案，为了将来的观点，我将原始代码留在下面。但要完成这项工作，我们只需要更改：

```
if (site_active == 0) 
```

至：

```
if ($row['site_active'] == 0) 
```

我们还删除了“else exit”；代码，因此如果站点处于活动状态，则页面将继续正常加载。感谢发布此答案的人。不知道你为什么删除它，因为它有效。

**原始问题：**

好的，我使用 MYSQL 作为数据库，然后使用 php 作为我的脚本。我想制作一个脚本来检查用户的网站是“活动”还是“禁用”，此代码将放置在每个网页的开头。如果用户网站处于“活动状态”，则该网站将继续正常加载。如果用户的网站被“禁用”，那么该网站将重定向到一个错误页面，指出这一点。

如果我的客户不支付每月托管费，那么我将在数据库中将该网站设置为“禁用”，并且在付款之前该网站将无法访问。然后我会将其返回到“活动”状态，并且可以再次访问它。到目前为止，我已经提出了以下代码（我是 php 新手，所以如果它很愚蠢，请不要判断！）当执行此代码时，它会重定向到我设置的页面，而不是显示常规站点。任何帮助或建议，使这项工作将不胜感激！

```
 <?php
$con=mysqli_connect("CONNECTION INFO REMOVED FOR SECURITY REASONS");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$result = mysqli_query($con,"SELECT * FROM mypanda_clients
WHERE id='34'");

while($row = mysqli_fetch_array($result))
  {
      if (site_active == 0) 
      {
        header('Location: http://www.green-panda.com/');
      }
      else 
      {
        exit; 
      }
  }
?>

<html> 
    <h2>Congratulations, your site is active!</h2> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:12:40.353

试试这个，

```
if ($row['site_active'] == 0) 
{
    .....
} 
```

# php - 从表中检索特定行并将每一行存储为会话中的关联数组

> ID：15846919
> 
> 赞同：1
> 
> 时间：2013-04-06T04:11:27.350
> 
> 标签：php, mysql, multidimensional-array, arraylist, session-variables

我正在创建一个 PHP/MSQL 应用程序，它基本上是一个在线测验，用户将开始测验，内部为一个实例随机从 db-table 检索 30 个问题并存储在会话中。我的数据库表有**qid、question、op1、op2、op3、op4、ans、category**作为列（因为每个问题都应该有 4 个选项和一个答案）。我想检索存储在特定**类别**表中的所有（例如 30 个）**问题**，并将它们保存在会话变量中作为 2/3 维关联数组，使用一些循环说 while()/for() 等。

 **我写的脚本是，

```
session_start();
require 'connection.php';
$sql = "SELECT * FROM questions WHERE category='$category'";
$result = mysql_query($sql) or die(mysql_error());
$found=mysql_num_rows($result) or die(mysql_error());
if ($found!=0) {
    $i="1";
    $sql= "SELECT * FROM questions WHERE category='$category'";
    $result = mysql_query($sql) or die(mysql_error());
    while ($que= mysql_fetch_assoc($result) && $i<=$found) {
        $_SESSION["$i"]= array(
                                "question"=>$que['question'],
                                "op1"=>$que['op1'],
                                "op2"=>$que['op2'],
                                "op3"=>$que['op3'],
                                "op4"=>$que['op4'],
                                "ans"=>$que['ans']
                                );
                  $i++;
                 }
        echo $_SESSION["$i"]; // echo-ing some session variable
}
mysql_close($dbc); 
```

**我之前也使用下面给出的脚本来实现相同的目标，但没有成功-**

```
session_start();
    require 'connection.php';
    $sql = "SELECT * FROM questions WHERE category='$category'";
    $result = mysql_query($sql) or die(mysql_error());
    $found=mysql_num_rows($result) or die(mysql_error());
    if ($found!=0) {
        $i="1";
        $result1 = mysql_query($sql) or die(mysql_error());
        $_SESSION['que'][][]=array();
        while ($que= mysql_fetch_assoc($result1) && $i<=$found) {
                $_SESSION['que'][$i]['question']=$que['question'];
                $_SESSION['que'][$i]['op1']=$que['op1'];
                $_SESSION['que'][$i]['op2']=$que['op2'];
                $_SESSION['que'][$i]['op3']=$que['op3'];
                $_SESSION['que'][$i]['op4']=$que['op4'];
                $_SESSION['que'][$i]['ans']=$que['ans'];
            $i++;
            }
            }
    mysql_close($dbc); 
```

**最后我可以使用下面的代码来做到这一点 -**

```
session_start();
        require 'connection.php';
        $sql = "SELECT * FROM questions WHERE category='$category'";
        $result = mysql_query($sql) or die(mysql_error());
        $found=mysql_num_rows($result) or die(mysql_error());
        if ($found!=0) {
            $i="1";
            $result1 = mysql_query($sql) or die(mysql_error());
            while ($que= mysql_fetch_assoc($result1) && $i<=$found) {
                    $str="que".$i;
                    $_SESSION[$str]['qno']=$i;
                    $_SESSION[$str]['question']=$que['question'];
                    $_SESSION[$str]['op1']=$que['op1'];
                    $_SESSION[$str]['op2']=$que['op2'];
                    $_SESSION[$str]['op3']=$que['op3'];
                    $_SESSION[$str]['op4']=$que['op4'];
                    $_SESSION[$str]['ans']=$que['ans'];
                    $_SESSION[$str]['opt']="0";
                $i++;
                }
                }
        mysql_close($dbc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:15:20.423

给这个试试。

```
require 'connection.php';
session_start();
$sql = "SELECT * FROM questions WHERE category='$category'";
$result = mysql_query($sql) or die(mysql_error());
$found=mysql_num_rows($result) or die(mysql_error());
if ($found!=0) {
$i=1;
$sql= "SELECT * FROM questions WHERE category='$category'";
$result = mysql_query($sql) or die(mysql_error());
while ($que= mysql_fetch_assoc($result) && $i<=$found) {
    $_SESSION[$i]= array(
                            "question"=>$que['question'],
                            "op1"=>$que['op1'],
                            "op2"=>$que['op2'],
                            "op3"=>$que['op3'],
                            "op4"=>$que['op4'],
                            "ans"=>$que['ans']
                            );
    }
    print_r($_SESSION[$i]);
    $i++;
}
mysql_close($dbc); 
```**

# python - 带有 Django 的 Google App Engine 不会呈现 960GS

> ID：15846923
> 
> 赞同：0
> 
> 时间：2013-04-06T04:12:28.030
> 
> 标签：python, django, google-app-engine, 960.gs

我正在尝试创建一个`GAE(Google App Engine)`用作服务器的网站，并使用`GAE Django API`. `CSS`我想使用的样式是 ，特别是在[此处](http://adapt.960.gs/)`960 Grid System`找到的自适应版本。

我的页面像往常一样在 GAE 中使用 Django 呈现：

```
class MainPage(webapp.RequestHandler): 

    def get(self):
        featuredPic = "img/featuredPic.jpg"

        values = {
                  'featuredPic' : featuredPic,
                  }

        self.response.out.write(template.render('index.html', values))

application = webapp.WSGIApplication([('/', MainPage)], debug=True) 
```

我的`index.html`文件还包括自适应网格系统的代码 neccassarry：

```
<script src="/js/adapt.js"></script>
<script>
    // Edit to suit your needs.
    var ADAPT_CONFIG = {
        // Where is your CSS?
        path : '/css/',

        // false = Only run once, when page first loads.
        // true = Change on window resize and page tilt.
        dynamic : true,

        // First range entry is the minimum.
        // Last range entry is the maximum.
        // Separate ranges by "to" keyword.
        range : [ '0px    to 760px  = mobile.min.css',
                '760px  to 980px  = 720.min.css',
                '980px  to 1280px = 960.min.css',
                '1280px to 1600px = 1200.min.css',
                '1600px to 1940px = 1560.min.css',
                '1940px to 2540px = 1920.min.css',

                '2540px           = 2520.min.css' ]
    };
</script> 
```

此外，我还包括 css、js、img 和其他文件夹`app.yaml`，尽管如此，生成的 HTML 并不遵循我为 div 设置的 960 网格系统类。GAE 是禁用 JS 还是我犯了其他错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T05:04:42.520

实际上，我不太擅长 GAE，但我想我可以帮助你。

我还在 GAE 上创建了一个页面，其中还有使用 .js 和 .css 文件的模板 html 文件

在模板 html 文件中，我编写了如下所示的脚本标记。

`<script type="application/x-javascript" src="iui/iui.js"></script>`

我将 .js 文件放在下面的路径中。

`<app_name>\iui\iui.js`

`<app_name>`有models.py、urls.py、views.py等。

此外，我在我的 app.yaml 中添加了以下语句，“muchart”是`<app_name>`

```
app.yaml
...
handlers:
- url: /muchart/js
  static_dir: muchart/js

- url: /muchart/iui
  static_dir: muchart/iui 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:48:28.453

这并不能完全回答我的问题，但我转而使用 960.gs 的继任者，Unsemantic，可在此处获得。它非常适合我的项目，因为它几乎是我在 960.gs 的自适应版本中寻找的。我也没有设置它的问题。

# linux - 在启动时启动 tty.js

> ID：15846928
> 
> 赞同：1
> 
> 时间：2013-04-06T04:12:50.733
> 
> 标签：linux, bash, node.js, tty

我正在尝试在启动时启动一个 tty.js shell，这对于启动时的 cron 作业非常容易，但它不能正确启动环境。它没有正确的 $PATH 等。它没有执行正确的脚本，例如 /etc/environment、~/.bashrc 等。有没有办法在您登录时使用相同的环境在启动时启动 tty.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T05:13:30.033

至少在 Gentoo 上，您使用**source /etc/profile**命令显式设置环境。它重置环境变量等。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:47:00.570

For Ubuntu cron jobs at boot and upstart do not load /etc/environment because that is normally done by pam_env.so when you login. However, **su** does the proper loading of /etc/environment and /etc/profile. So in a cron job at boot or in upstart you could do something like:

```
exec su username -c "/home/username/bin/tty.js 1> /home/username/tty.log 2> /home/username/tty.log &" 
```

# python - Python 输入密码并与影子密码数据库进行比较

> ID：15846931
> 
> 赞同：2
> 
> 时间：2013-04-06T04:13:04.727
> 
> 标签：python, crypt

再会。

我正在尝试编写一个 python 脚本，它将获取一个捕获的密码，然后将其与系统隐藏密码进行比较。

我使用 Ubuntu 12.10 进行此测试。并将脚本作为 sudo 运行。

```
def login(user, password):
    "Check if user would be able to login using password"
    try:
        pw1 = spwd.getspnam(user)[1]
        allus = spwd.getspall()
        print pw1
        # pw2 = crypt.crypt(password, pw1[:2])
        pw2 = crypt.crypt(password, '\$6\$SALTsalt\$')
        print pw2
        return pw1 == pw2
    except KeyError:
        return 0 # no such user 
```

现在以上返回

2 个不同的密码，但我确实从阴影中得到了一个。

所以我的问题是如何加密提供的密码，以便将其与检索到的密码进行比较。任何帮助都会很棒

编辑插件

```
def login(user, password):
 "Check if user would be able to login using password"
 try:
    pw1 = spwd.getspnam(user)[1]
    allus = spwd.getspall()
  #        print allus
    print pw1
  #        pw2 = crypt.crypt(password, pw1[:2])
  # pw2 = crypt.crypt(password, '\$6\$SALTsalt\$')
pw2 =hashlib.new()
pw2.update(password)
pw2.digest()

    print pw2
    return pw1 == pw2
 except KeyError:
    return 0 # no such user 
```

那也不起作用如何暗示haslib以获取哈希以匹配系统密码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:09:59.083

我已经做了一个关于如何使用影子密码进行身份验证的示例。我添加了一些注释，让代码自己说话。

一些额外的信息：

*   [https://en.wikipedia.org/wiki/Passwd#Shadow_file](https://en.wikipedia.org/wiki/Passwd#Shadow_file)
*   [http://docs.python.org/2/library/spwd.html](http://docs.python.org/2/library/spwd.html)
*   [http://docs.python.org/2/library/crypt.html](http://docs.python.org/2/library/crypt.html)

另请注意（来自 crypt 模块文档）：

> 该模块实现了 crypt(3) 例程的接口，该例程是基于改进的 DES 算法的单向散列函数；有关详细信息，请参阅 Unix 手册页。可能的用途包括允许 Python 脚本接受用户输入的密码，或尝试用字典破解 Unix 密码。
> 
> 请注意，此模块的行为取决于运行系统中 crypt(3) 例程的实际实现。因此，当前实现中可用的任何扩展也将在此模块上可用。

这也是为什么您不能`hashlib`毫无问题地使用的原因。

```
import crypt # Interface to crypt(3), to encrypt passwords.
import getpass # To get a password from user input.
import spwd # Shadow password database (to read /etc/shadow).

def login(user, password):
    """Tries to authenticate a user.
    Returns True if the authentication succeeds, else the reason
    (string) is returned."""
    try:
        enc_pwd = spwd.getspnam(user)[1]
        if enc_pwd in ["NP", "!", "", None]:
            return "user '%s' has no password set" % user
        if enc_pwd in ["LK", "*"]:
            return "account is locked"
        if enc_pwd == "!!":
            return "password has expired"
        # Encryption happens here, the hash is stripped from the
        # enc_pwd and the algorithm id and salt are used to encrypt
        # the password.
        if crypt.crypt(password, enc_pwd) == enc_pwd:
            return True
        else:
            return "incorrect password"
    except KeyError:
        return "user '%s' not found" % user
    return "unknown error"

if __name__ == "__main__":
    username = raw_input("Username:")
    password = getpass.getpass()
    status = login(username, password)
    if status == True:
        print("Logged in!")
    else:
        print("Login failed, %s." % status) 
```

# java - Java无法访问代码错误

> ID：15846932
> 
> 赞同：0
> 
> 时间：2013-04-06T04:13:06.207
> 
> 标签：java

我正在关注 youtube 上的教程，当我到达我应该使用“this.path”之类的部分时，但我似乎遇到了错误。我似乎找不到任何解决方案。

这是视频的链接：[http ://www.youtube.com/watch?v=o7pfq0W3e4I](http://www.youtube.com/watch?v=o7pfq0W3e4I)

```
package gfx;

import java.awt.image.BufferedImage;
import java.io.IOException;

import javax.imageio.ImageIO;

public class SpriteSheet {

public String path;
public int width;
public int height;

public int[] pixels;

public SpriteSheet(String path) {
    BufferedImage image = null;

        try {
image =     ImageIO.read(SpriteSheet.class.getResourceAsStream(path));
        } catch (IOException e) {
            e.printStackTrace();
        }

    if(image == null);{
        return;
    }

    this.path = path;
    this.width = image.getWidth();
    this.height = image.getHeight();    

    pixels = image.getRGB(0, 0, width, height, null, 0, width);

    for(int i = 0; i <= pixels.length;i++){
        pixels[i] = (pixels[i] & 0xff)/64;
    }

    for(int i = 0;i <= 8;i++) {
        System.out.println(pixels[i]);
    }

}       
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T04:14:28.847

你的错误在这里：

```
if(image == null);{
    return;
} 
```

语句后有一个额外的分号`if`。这应该是：

```
if(image == null) {
    return;
} 
```

分号结束 if 语句；换句话说，`if(image == null)`什么都不做，然后运行`return;`

Java 不允许无法访问的代码。由于`return`无论 if 条件如何都在运行您的语句，因此无法达到该点之后的任何内容。

# jquery - Ajaxed 页面不呈现 jquermobile 样式

> ID：15846936
> 
> 赞同：0
> 
> 时间：2013-04-06T04:13:47.070
> 
> 标签：jquery, jquery-mobile

以下 jquery 代码有效，但它不与 jquerymobile 选择表单一起显示。它显示纯选择html。如何绑定 ajaxed 页面渲染 jquerymobile 选择表单。

提前致谢。

```
echo '<div data-role="fieldcontain" id="subject">'."\n";
echo '<label for="subjectid"><em>* </em> Subject: </label>'."\n";
if(!empty($subjectlist))
{
    echo form_dropdown('subjectid', $subjectlist,  NULL, 'id="subjectid" class="required" data-theme="c"')."<br />\n";
}
else
{
    echo "No subject registered. Contact the application administrator.";
}
echo "</div>\n\n";

echo '<div data-role="fieldcontain" id="teachernamediv">'."\n";

echo "</div>\n\n";
....
....

<script>
$(document).ready(function() {
    $('#loader').hide();
    $('#teachernamediv').hide();

    $('#subjectid').change(function(){
        $('#loader').show();
        var findteacher = "<?php echo base_url();  ?>index.php/welcome/user/findteacher";
        $.post(findteacher, {
            subjectid: $('#subjectid').val(),
            teachergrp: "5",
            user_id: $('input[name=id]').val(),
        }, function(response){
            setTimeout("finishAjax('teachername', '"+escape(response)+"')", 200);
        });
        return false;
    });
});

function finishAjax(id, response){
 $('#loader').hide();
 $('#'+id+'div').html(unescape(response));
 $('#'+id+'div').fadeIn();
}
<script> 
```

这是 user.php

```
function findteacher()
{
    if($_POST['subjectid'])
    {
        //$grade = $_POST['grade'];
        $subject_id = $_POST['subjectid'];
        $teachergrp = $_POST['teachergrp'];
        $user_id = $_POST['user_id'];

        // check if student has a techerid in hw_user_subject with this subjectid
        $findteacher = $this->Mhomework->findSubjectTeacher($user_id, $subject_id);
        if(!empty($findteacher))
        {
            $data['teacher']=$findteacher;
            $data['header']=$this->preference->item('site_name');
        $this->load->view('common/teacher', $data);
        }
        else
        {
            // if there is no teacher then get a list of teacher names
        $data['teachers'] = $this->Mhomework->findteacher($subject_id,$teachergrp); 

        $data['header']=$this->preference->item('site_name');
        $this->load->view('common/teachers', $data);

        }

    }
    else
    {
        redirect ('welcome','refresh');
    }

} 
```

这是教师.php

```
echo '<label for="teachername"><em>* </em> Subject Teacher: </label>'."\n";
$option = array (
        ''=>'-- Select Teacher --'

        );
foreach($teachers as $row)
{
    $gender=get_gender($row['gender']);
    $option [$row['user_id']]=$gender." " . $row['last_name'];
}

echo form_dropdown('teachername', $option,  NULL, 'id="teachername" class="required" data-theme="c" ')."<br />\n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:42:00.030

您必须刷新选择菜单，html 部分在没有运行时 jquery 的情况下显示，需要`refresh()`在 jquery mobile 中刷新它...

检查这个：- [http://api.jquerymobile.com/select/#method-refresh](http://api.jquerymobile.com/select/#method-refresh)

这用于更新自定义选择以反映本机选择元素的值。如果选择中的选项数与自定义菜单中的项目数不同，它将重建自定义菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:47:10.657

这是我最后的 js 代码。我使用了 .selectmenu(); 的组合；和 .trigger('create');

```
<script>
$(document).ready(function() {
    $('#loader').hide();
    $('#teachernamediv').hide();

    $('#subjectid').change(function(){
        $('#loader').show();
        var findteacher = "<?php echo base_url();  ?>index.php/welcome/user/findteacher";
        $.post(findteacher, {
            subjectid: $('#subjectid').val(),
            teachergrp: "5",
            user_id: $('input[name=id]').val(),
        }, function(response){
            setTimeout("finishAjax('teachername', '"+escape(response)+"')", 200);
        });
        return false;   
    });
});

function finishAjax(id, response){
 $('#loader').hide();
 $('#'+id+'div').html(unescape(response));
 $('#'+id+'div').fadeIn();
 $('#'+id).selectmenu(); // this will refresh the select menu
 $('#myform2').trigger('create');//this will refresh the form
}

</script> 
```

# java - 从按钮网格中绘制特定按钮

> ID：15846937
> 
> 赞同：2
> 
> 时间：2013-04-06T04:13:49.737
> 
> 标签：java, swing, repaint, paintcomponent

以下按钮网格定义为：

```
JButton button_x = new RoundButton(); 
```

![在此处输入图像描述](https://i.stack.imgur.com/t46gF.jpg)

其中`RoundButton`定义为：

```
public class RoundButton extends JButton {

    public RoundButton(String label) {
        super(label);
        this.setContentAreaFilled(false);
        Dimension size = this.getPreferredSize();
        size.height = size.width = Math.max(size.height, size.width);
        this.setPreferredSize(size);
    }

    @Override
    protected void paintComponent(Graphics g) {
        if(!GameState.getIfComplete()) { // If the game is not complete or has just started
            this.setBorder(null);
            g.setColor(Color.BLACK);
            g.fillRect(0, 0, this.getSize().width, this.getSize().height);
            if(this.getModel().isArmed()) {
               g.setColor(Color.RED);
            }else {
                g.setColor(Color.GREEN);
            }
            g.fillOval(0,0,this.getSize().width-1,this.getSize().height-1);
            super.paintComponent(g);
        }else {
            this.setBorder(null);
            g.setColor(Color.BLACK);
            g.fillRect(0, 0, this.getSize().width, this.getSize().height);
            g.setColor(Color.WHITE);
            g.fillOval(0,0,this.getSize().width-1,this.getSize().height-1);
            super.paintComponent(g); 
        }
    } 
```

}

目前所有按钮都涂成绿色，但在某种情况下，我想将特定按钮涂成白色（这是 else 部分中的代码）。例如，当`!GameState.getIfComplete()`返回时，`false` 我想将第一列中的按钮涂成白色。所以我称之为`repaint`：

```
buttons[0].repaint();
buttons[3].repaint();
buttons[6].repaint(); 
```

但这不起作用！在第一列中，其他一些按钮也被涂成白色。这是为什么 ？

通话有什么问题？如何绘制特定按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T05:02:07.417

问题是依赖`GameState`，所有你的圆形按钮都使用相同的逻辑来绘制自己，即当游戏完成时，它们都会被绘制`WHITE`

相反，您应该依赖按钮的属性。设置它，以便颜色实际上是从按钮本身派生的。

![在此处输入图像描述](https://i.stack.imgur.com/qsgTI.png)![在此处输入图像描述](https://i.stack.imgur.com/dBfTk.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class BadButton01 {

    public static void main(String[] args) {
        new BadButton01();
    }

    public BadButton01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public static class GameState {

        private static boolean isComplete;

        public static boolean getIfComplete() {
            return isComplete;
        }

        public static void setComplete(boolean value) {
            isComplete = value;
        }

    }

    public class TestPane extends JPanel {

        private RoundButton[] btns = new RoundButton[]
        {
            new RoundButton("1"),
            new RoundButton("2"),
            new RoundButton("3"),
            new RoundButton("4"),
            new RoundButton("5"),
            new RoundButton("6"),
            new RoundButton("7"),
            new RoundButton("8"),
            new RoundButton("9")
        };

        public TestPane() {
            setLayout(new GridLayout(3, 3));
            for (RoundButton btn : btns) {
                add(btn);
            }
            btns[0].addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    GameState.setComplete(true);
                    btns[0].setBackground(Color.WHITE);
                    btns[1].setBackground(Color.WHITE);
                    btns[2].setBackground(Color.WHITE);
                    repaint();
                }
            });
        }

    }

    public class RoundButton extends JButton {

        public RoundButton(String label) {
            super(label);
            this.setContentAreaFilled(false);
            setBorderPainted(false);
            setFocusPainted(false);
            setOpaque(false);
            Dimension size = this.getPreferredSize();
            size.height = size.width = Math.max(size.height, size.width);
            this.setPreferredSize(size);
            setBackground(Color.GREEN);
        }

        @Override
        protected void paintComponent(Graphics g) {
//            if (!GameState.getIfComplete()) { // If the game is not complete or has just started
//                this.setBorder(null);
//                g.setColor(Color.BLACK);
//                g.fillRect(0, 0, this.getSize().width, this.getSize().height);
                if (this.getModel().isArmed()) {
                    g.setColor(Color.RED);
                } else {
//                    g.setColor(Color.GREEN);
                    g.setColor(getBackground());
                }
//            } else {
//                this.setBorder(null);
//                g.setColor(Color.BLACK);
//                g.fillRect(0, 0, this.getSize().width, this.getSize().height);
//                g.setColor(Color.WHITE);
//                g.fillOval(0, 0, this.getSize().width - 1, this.getSize().height - 1);
//                g.setColor(getBackground());
//            }
            g.fillOval(0, 0, this.getSize().width - 1, this.getSize().height - 1);
            super.paintComponent(g);
        }

    }

} 
```

# php - 从 url 获取真实的视频 URL

> ID：15846938
> 
> 赞同：2
> 
> 时间：2013-04-06T04:13:57.513
> 
> 标签：php, javascript, html

我正在尝试从不显示真实文件名的 url 获取真实文件 URL。

我的网址是这样的`http://video.premium.com/file/ee7bfec921cfbe16e6f08e282992b99670a00ca3/3`

如果我能得到真实的文件 url，我可以通过网络播放器直接在线播放它，但它需要 .mp4 或其他文件格式才能播放，只是 url`http://video.premium.com/file/ee7bfec921cfbe16e6f08e282992b99670a00ca3/3`不起作用。

但是当我使用 VLC 媒体播放器打开 URL 时，它可以工作。不适用于在线 Flash 或其他播放器..

这甚至可能吗？无论如何要这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:13:10.097

使用**curl**，使用这个：它遵循重定向直到找到端点。在包含的代码中，我使用 goo.gl 将 url 缩短为随机图像。您将看到输出是原始链接（它会输出任意数量的重定向及其 URL），以及最终重定向到实际文件。我想这就是你要找的。我最初并没有写这个，但是前一段时间在某个地方找到了它，并在需要时通过调整再次重复使用了很多次。它似乎很适合许多地方。很高兴把它传下去。我认为这可能有助于实现您正在寻找的东西。

```
<?php
function follow_redirect($url){
   $redirect_url = null;

   if(function_exists("curl_init")){
      $ch = curl_init($url);
      curl_setopt($ch, CURLOPT_HEADER, true);
      curl_setopt($ch, CURLOPT_NOBODY, true);
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
      $response = curl_exec($ch);
      curl_close($ch);
   }
   else{
      $url_parts = parse_url($url);
      $sock = fsockopen($url_parts['host'], (isset($url_parts['port']) ? (int)$url_parts['port'] : 80));
      $request = "HEAD " . $url_parts['path'] . (isset($url_parts['query']) ? '?'.$url_parts['query'] : '') . " HTTP/1.1\r\n";
      $request .= 'Host: ' . $url_parts['host'] . "\r\n";
      $request .= "Connection: Close\r\n\r\n";
      fwrite($sock, $request);
      $response = fread($sock, 2048);
      fclose($sock);
   }

   $header = "Location: ";
   $pos = strpos($response, $header);
   if($pos === false){
      return false;
   }
   else{
      $pos += strlen($header);
      $redirect_url = substr($response, $pos, strpos($response, "\r\n", $pos)-$pos);
      return $redirect_url;
   }
}

$url = 'http://goo.gl/66VJB';

echo '<ol>';
while(($newurl = follow_redirect($url)) !== false){
   echo '<li>', $url, '</li>';
   $url = $newurl;
}
echo '</ol>';

echo '<a href="', $url, '">', $url, '</a>';
?> 
```

输出：

1.  [http://goo.gl/66VJB](http://goo.gl/66VJB)

[http://1.bp.blogspot.com/_XE0TDW07Noo/TOSVQXZtgAI/AAAAAAAELo/aG80jZ7u_fo/s1600/aptitude_test.gif](http://1.bp.blogspot.com/_XE0TDW07Noo/TOSVQXZtgAI/AAAAAAAAELo/aG80jZ7u_fo/s1600/aptitude_test.gif)

# php - 如何在 PHP 中设置自定义请求标头

> ID：15846940
> 
> 赞同：3
> 
> 时间：2013-04-06T04:14:10.167
> 
> 标签：php

在创建响应头时，使用 header() 函数就可以了。请求标头怎么样？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:27:36.790

如果您正在谈论发出请求并指定标头，则一种方法是使用[CURL](http://php.net/manual/en/book.curl.php)：

```
$data = "<soap:Envelope>[...]</soap:Envelope>"; 
$tuCurl = curl_init();
curl_setopt($tuCurl, CURLOPT_HEADER, 0);
curl_setopt($tuCurl, CURLOPT_URL, "http://example.com/path/for/soap/url/");
curl_setopt($tuCurl, CURLOPT_POST, 1); // if post request
curl_setopt($tuCurl, CURLOPT_POSTFIELDS, $data);
curl_setopt($tuCurl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($tuCurl, CURLOPT_HTTPHEADER, array("Content-Type: text/xml","SOAPAction: \"/soap/action/query\"", "Content-length: ".strlen($data)));
$tuData = curl_exec($tuCurl); 
if(!curl_errno($tuCurl)){ 
  $info = curl_getinfo($tuCurl); 
  echo 'Took ' . $info['total_time'] . ' seconds to send a request to ' . $info['url']; 
} else { 
  echo 'Curl error: ' . curl_error($tuCurl); 
} 
curl_close($tuCurl); 
echo $tuData; 
```

# c# - 从相册中获取照片以显示在 ListBox 中

> ID：15846943
> 
> 赞同：0
> 
> 时间：2013-04-06T04:14:17.967
> 
> 标签：c#, wpf, facebook

我使用此代码，但我无法查看图片。

```
public class ImgInfo
{
    public string img { get; set; }
}

private void ShowPictures()
{
    List<ImgInfo> images = new List<ImgInfo>();
    dynamic pictures = _fb.Get((selectedAlbum.id + "/photos"));
    foreach (dynamic pic in pictures.data)
    {
        ImgInfo imginfo = new ImgInfo() { img = pic["picture"]};
        images.Add(imginfo);
    }

    ImageGridView.ItemsSource = images;
} 
```

XAML：

```
<ListBox x:Name="ImageGridView" BorderThickness="0"> 
```

# c - C malloc 函数的大小参数

> ID：15846952
> 
> 赞同：1
> 
> 时间：2013-04-06T04:15:34.277
> 
> 标签：c, pointers, memory, gcc, malloc

我在一本书中读到，C 中的 malloc 函数将您希望分配的内存“块”数作为参数，并根据您将 malloc 返回的值转换为多少字节来确定块的字节数。例如在我的系统上一个 int 是 4 个字节：

```
int *pointer;

pointer = (int *)malloc(10); 
```

将分配 40 个字节，因为编译器知道整数是 4 个字节。

这让我感到困惑有两个原因：

1.  我正在阅读，size参数实际上是您要分配的字节数，与任何类型的大小无关。

2.  malloc 是一个返回地址的函数。它如何根据从 void 返回到不同类型的地址的外部转换来调整分配的内存大小？这只是我应该接受的一些编译器魔法吗？

感觉书错了 非常感谢任何帮助或澄清！

这本书是这么说的：

```
char *string;
string = (char *)malloc(80); 
```

> 80 预留了 80 个存储块。块大小由类型转换 (char *) 设置，这意味着 malloc() 正在寻找 80 个文本字符的存储空间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T04:17:16.730

是的，这本书是错的，你是对的，请扔掉那本书。
另外，一定要让大家知道这本书的名字，这样我们就可以将它永久地列入我们从不推荐的黑名单。

**好读：**
[malloc的最佳实践是什么？](https://stackoverflow.com/questions/14099967/what-is-the-best-practice-for-malloc)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-06T04:28:06.197

使用时`malloc()`，使用 sizeof 运算符并将其应用于正在分配的对象，*而不是它的类型*。

不是一个好主意：

```
int *pointer = malloc (10 * sizeof (int)); /* Wrong way */ 
```

更好的方法：

```
int *pointer = malloc (10 * sizeof *pointer); 
```

基本原理：如果您更改指针指向的数据类型，您也不需要更改 malloc() 调用。维护胜利。

此外，这种方法在代码开发过程中不易出错。在 malloc() 调用与变量声明分开的情况下，您可以检查它是否正确，而无需查看声明。

关于您关于强制转换 malloc() 的问题，请注意，今天**不需要**在 C 中对 malloc() 进行强制转换。此外，如果数据类型在未来的修订版中发生更改，则必须更改那里的任何强制转换或成为另一个错误源。此外，请始终确保您已`<stdlib.h>`包含在内。人们通常会加入演员阵容以消除由于没有包含文件而导致的警告。另一个原因是它在 C++ 中是必需的，但您通常不会编写使用 malloc() 的 C++ 代码。

关于 malloc() 如何在内部工作的确切细节在规范中没有定义，实际上它是一个具有良好定义接口的黑盒。要了解它在实现中的工作原理，您需要查看一个开源实现以获取示例。但是 malloc() 可以（并且确实）在各种平台上变化很大。

# php - 如何从数组中的对象中获取值

> ID：15846955
> 
> 赞同：0
> 
> 时间：2013-04-06T04:16:10.760
> 
> 标签：php, object, multidimensional-array

我正在尝试从名为 $items 的变量中获取数据

当我 var_dump($items); - 结果是这样的：

```
array(13) { 

[0]=> object(stdClass)#868 (2) { 
        ["meta_key"]=> string(17) "Email of Attendee"        
        ["meta_value"]=> string(68) "some-email@gmail.com" 
} 

[2]=> object(stdClass)#804 (2) { 
        ["meta_key"]=> string(28) "Name to be printed on badge:" 
        ["meta_value"]=> string(7) "some name to be printed" 
} 
```

...等等 11 次

我想知道是否可以使用类似这样的代码从 $items 获取电子邮件：

`$email = $items`找到`meta_key`具有值的对象，`"Email of Attendee"`然后返回相应的值。

我最终做的是`$items`像这样运行一个 foreach 循环：

```
foreach($items as $item){

    $items[$item->meta_key]=$item->meta_value;

} 
```

它将所有“meta_keys”转换为它们引用的值。现在：

```
$email = $items["Email of Attendee"]  

echo $email; 

result is some-email@gmail.com 
```

发布这个，这样一个。类似情况的其他人可能会使用 for each 循环来转换事物

湾。有更多经验的人可以建议一种直接从 $items 获取“与会者的电子邮件”的方法，而无需通过 foreach 循环运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:09:13.123

**foreach can iterate through array as well as `object`**

```
$given_array = array((object)array('meta_key'=>'email','mea_value'=>'fg'),
                     (object)array('meta_key'=>'email','mea_value'=>'gfdgf'));

foreach($given_array as $elt){
    foreach($elt as $key=>$value){
                if($key == "Email of Attendee"){
                    echo $email;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:32:20.917

~~仍然依赖于使用foreach循环。~~

 ~~```
function get_email($items) {

    foreach($items as $item){

        if (in_array("Email of Attendee", $item) {
            $email = $item["meta_value"];
            break;
        }

    }
    return $email;
} 
```~~ 

~~**更正** 你可以得到特定的对象`array_filter`~~

 ~~```
$result = array_filter($array, function($o) {
                   return $o->meta_key == "Email of Attendee";
});

$email = $result[0]->meta_value;

echo $email; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T04:49:41.430

这应该会变魔术。

```
foreach($items as $item){

    // $item is already holding the object here. Equals to $items[0] in the first loop
    if($item->meta_key == "Email of Attendee"){
        // do stuff
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T05:56:48.763

引自[搜索数组：array_filter vs loop](https://stackoverflow.com/questions/6791479/search-array-array-filter-vs-loop#comment-8060388)：

> `array_filter()`无法原生处理 [多维数组]。您正在寻找数组中的单个值？`array_filter()`不是最好的方法，因为当你找到你一直在寻找的值时你可以停止迭代 -`array_filter()`不这样做。从更大的集合中过滤一组值？这很可能`array_filter()`比手动编码的循环更快，`foreach`因为它是一个内置函数。——[斯特凡·格里格](https://stackoverflow.com/users/11354/stefan-gehrig)

使用[php`foreach`循环](http://php.net/manual/en/control-structures.foreach.php)可能是两者中更容易阅读的：

```
function getItem($haystack, $needle) {
  foreach ($haystack as $hay) {
    if ($hay->meta_key == $needle) {
      return $hay->meta_value;
    }
  }
  return FALSE;
}

echo getItem($items, 'Email of Attendee'); // Returns 'some-email@gmail.com' 
```

但是，正如引用所假设的，对于更大的数组，您可能想要使用 php 之类的东西[`array_filter()`](http://php.net/manual/en/function.array-filter.php)：

```
function metaKeyIsEmail($obj) {
  return $obj->meta_key == 'Email of Attendee';
}

// array_filter() will return an array containing all items
// that returned TRUE for the callback metaKeyIsEmail()
$items_matched = array_filter($items, 'metaKeyIsEmail');

// If there was at least one match, take it off the front of
// the array and get its meta_value. Otherwise use FALSE.
$matched_value = !empty($items_matched) ? array_shift($items_matched)->meta_value : FALSE;

echo $matched_value; // Returns 'some-email@gmail.com' 
```~~

# twitter-bootstrap - Twitter bootstrap typeahead 不能与 data-source 属性一起正常工作

> ID：15846958
> 
> 赞同：2
> 
> 时间：2013-04-06T04:16:47.890
> 
> 标签：twitter-bootstrap, typeahead.js

为什么当我使用属性中的`"`符号`data-source`来表示字符串值时一切正常，但是当我`'`用来表示它们时，引导程序只识别第一个字符？

我知道在 c# 和许多其他语言中，字符和字符串之间的区别是`"`和`'`之间的区别，但是我第一次看到它在 html 中被严格使用，如果是这种情况，为什么在JS。

```
<div class="container">
    <div class="hero-unit">
        <form>
            <div>
                <label>working typeahead</label>
                <input type="text" data-provide="typeahead" autocomplete="off" data-source='["hello","world"]' />
            </div>
            <div>
                <label>not working typeahead</label>
                <input type="text" data-provide="typeahead" autocomplete="off" data-source="['hello','world']" />
            </div>
        </form>
    </div> 
```

见小提琴：http: [//jsfiddle.net/H4Qmh/4/](http://jsfiddle.net/H4Qmh/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T04:34:07.473

这很奇怪，但`data-source=["hello", "world"]`有效，即使它看起来不像干净的 HTML。

我想知道它是否被视为 JSON，在这种情况下，所有元素都必须用双引号括起来。请参阅：[如何将数组传递给 jQuery .data() 属性](https://stackoverflow.com/questions/6071618/how-to-pass-an-array-into-jquery-data-attribute#answer-6071653)。

# html - 简单的 CSS 问题 - 不知道在哪里修复

> ID：15846961
> 
> 赞同：-3
> 
> 时间：2013-04-06T04:17:11.020
> 
> 标签：html, css

我正在尝试修复这个 css 问题，但我无法以某种方式做到这一点，实际上我也不是 css 大师。所以我转身在这里问这个。

问题出在[此](http://doni.sites.djangoeurope.com/)页面右侧的最后一个滑块标题中：“Locations eintragen”。

最后一个 div 的下半部分在 chrome 中有点隐藏， ![在此处输入图像描述](https://i.stack.imgur.com/6WC9c.png)

如果您在 Firefox 中看到它，则显示正确。我怎样才能解决这个问题？我希望它应该像在 Firefox 中一样。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:22:10.920

包含您的菜单项的手风琴将其高度设置为 400 像素，从而限制了其中包含的项目的高度。您应该将高度设置为另一个值，或删除限制。

提示：你应该在 Chrome 中按 F12 来调出开发者工具。从那里，您可以右键单击页面上的元素并选择“检查元素”。然后您将能够看到正在继承的样式，禁用和更改它们以查看效果等。

# android - Android：无法从内部类启动新活动

> ID：15846968
> 
> 赞同：1
> 
> 时间：2013-04-06T04:18:41.160
> 
> 标签：android, android-intent, android-activity

Android：有人帮助：我注意到其他人以前曾问过这种问题，但答案对我的情况没有用；我需要从内部类启动一个新活动，但我得到的只是下面的错误：

```
04-05 15:00:43.851: E/AndroidRuntime(3288): Caused by: java.lang.InstantiationException: com.school.School$StudentProfile 
```

这是我的代码片段：

```
public class School extends Activity{
ProgressDialogue progressDialogue;

protected WebViewTask _webTask;

String path = "http://www.school.com/student/"; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.school);

    progressDialogue = new ProgressDialogue(School.this);

    _webTask = new WebViewTask();
    _webTask.execute();

}   

//rest of the code

  /** The inner class */

public class StudentProfile {
    Context context;

    /** Instantiate the interface and set the context */

    public StudentProfile(Context c) {
         context=c;
        }

    /** launch student activity */
    public void lauchProfile() {

         School.this.startActivity(new Intent(School.this, StudentProfile.class));
        //Intent intent = new Intent(School.this, StudentProfile.class);

        //startActivity(intent);

    }
}   

void webView(){
    String url = path +"student.php";   

    WebView wv = (WebView) findViewById(R.id.trivia_webview);
    WebSettings webSettings = wv.getSettings();
    webSettings.setJavaScriptEnabled(true);

    wv.addJavascriptInterface(new StudentProfile (this), "Student");

    wv.loadUrl(url);

    wv.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            // open URL in the web view itself
            if (url.contains(url))
                return super.shouldOverrideUrlLoading(view, url);
            // open URL in an external web browser
            else {

                return true;
            }
        }
    });
}

// rest of the code 
```

注意：Web 视图上有一个“学生”按钮，应该启动 StudentProfile 活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T04:26:08.200

你`StudentProfile`不是一个`Activity`，所以你不能那样开始。它需要是一个单独的类，并在`AndroidManifest.xml`.

# google-app-engine - GAE，数据库更新前的内存缓存

> ID：15846971
> 
> 赞同：0
> 
> 时间：2013-04-06T04:19:36.850
> 
> 标签：google-app-engine, memcached

我在使用 memcache 和 GAE DB 操作时遇到了一些麻烦。如果我在 DB 操作后更新 memcache rigth，例如 x.put()，我的 memcache 函数经常返回旧值。如果我使用 sleep()，缓存更经常正确，但我认为这是不对的

```
sleep(0.2) 
data = Picture.all().order('-created').fetch(300)
memcache.set('pictures_all', data) 
```

我需要做什么才能获得正确的内存缓存？

**回答：** 需要使用父查询，所有图片实体必须有相同的父，然后你得到强一致的结果

```
data = Picture.all().order('-created').ancestor(main_key()).fetch(300)
memcache.set('pictures_all', data) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T04:25:40.727

如果您有数据，只需更新 memcache 中的一个条目，无需从 memcache 中检索所有条目。就像是

```
data.put()
memcache.set(key, data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T05:06:28.570

```
config = db.create_config(deadline=10, read_policy=db.STRONG_CONSISTENCY)
data = Picture.all().order('-created').fetch(300, config=config)
memcache.set('pictures_all', data) 
```

我想，这是解决方案。

编辑：不，这是行不通的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:14:33.373

你在正确的轨道上，问题在于最终的一致性。

使用 STRONG_CONSISTENCY 确实解决了这个问题，但它会给你在路上的可伸缩性问题——那些很难解决的问题。

烦人的解决方案比它应该的更复杂。考虑到最终的一致性行为，我也不确定是否真的有一个防弹解决方案。

伪代码应如下所示：

```
all_pictures = memcache.get('pictures_all')
if not all_pictures:
    all_pictures = convert_to_list(Picture.all().order('-created').fetch(300))
if not newdata in all_pictures:
    add_to_list_in_proper_order(all_pictures, newdata)
memcache.set('pictures_all', all_pictures) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T15:29:38.160

伟大的。

我遇到了同样的问题，解决方案正是提问者给出的：使用祖先

读书：

```
data = Picture.all().order('-created').ancestor(main_key()).fetch(300) 
```

保存：

```
pic = Picture(parent=main_key(), ...)
pic.put() 
```

# html - 需要帮助创建具有干净导航的标题

> ID：15846973
> 
> 赞同：-1
> 
> 时间：2013-04-06T04:20:04.563
> 
> 标签：html, css, xhtml, header, navigation

有人可以帮我弄清楚如何创建显示在此页面顶部标题中的导航吗？

[http://themes.iki-bir.com/ikaros/](http://themes.iki-bir.com/ikaros/)

如果有人能给我一些指导来学习如何制作这些类型的导航，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:35:02.957

使用这个下拉菜单插件，它是一个使用 jquery 和 css 的**Jquery css 下拉插件**...

您必须对 js 和 css 进行一些更改以尝试使其尽可能相似...

[http://www.saptarang.org/jquery-css-dropdown-menu-2-levels](http://www.saptarang.org/jquery-css-dropdown-menu-2-levels)

谢谢...

# scripting - 将“ping”输出发送到变量

> ID：15846976
> 
> 赞同：3
> 
> 时间：2013-04-06T04:21:04.777
> 
> 标签：scripting, tcl, router

我正在尝试在我的路由器中 ping 一些 IP 地址。我使用这段代码：

```
for {set n 0} {$n < 10} {incr n} {puts [exec "ping 199.99.$n.1]} 
```

但这将显示输出。问题是我不想看到输出。我想将该输出发送到另一个变量中，并使用“regexp”搜索变量的内容并获得结果，然后完成剩下的事情。但我不知道我该怎么做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T08:40:08.267

使用`set`命令。该`puts`命令打印它的参数。

```
set pingOutput [exec ping "199.99.$n.1"] 
```

或者`append`，如果您希望所有 IP 的结果都包含在一个变量中。

```
set allPingOutput ""
for {set n 0} {$n < 10} {incr n} {
    append allPingOutput [exec ping "199.99.$n.1"]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:31:27.237

尝试使用 -c 标志调用 ping：ping -c 1 10.0.1.1

不知道如何在 tcl 但在 php 中执行此操作，例如：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T14:13:54.320

使用非常重要 `ping -c1 <IP address>`，否则脚本将永远不会结束，因为 ping 过程永远不会结束 :)

我的代码使用每个 IP 的结果数组

```
for {set i 2 } {$i < 10} {incr i} {

catch {if {[regexp {bytes from} [exec ping -c1 192.168.12.$i]]} { 
          set flag "reachable" 
        } else     { set flag "not reachable"}

set  result(192.168.12.$i) $flag
} 
}
parray result 
```

输出 ：

结果（192.168.12.2）=可达

结果（192.168.12.3）=可达

结果（192.168.12.5）=可达

结果（192.168.12.6）=可达

结果（192.168.12.7）=可达

结果（192.168.12.9）=可达

我没有使用存储和操作，而是使用了 regexp。

# gridbaglayout - GridBag 布局还是绝对定位？

> ID：15846977
> 
> 赞同：2
> 
> 时间：2013-04-06T04:21:06.367
> 
> 标签：gridbaglayout

我正在编写一段代码，其中几个 imageIcon 将与其他几个 imageIcon 重叠。前景中的 imageIcons 将保持不变，而背景中的 imageIcons 将更改为不同的 imageIcons

我通常没有最好的布局。例如，当我调整框架大小时，组件会移动。此外，当我添加一个对象然后添加另一个对象时，第二个对象将向右“推”另一个对象（或特定布局设计用于放置下一个组件的任何位置。

Oracle 的网站强调尽可能使用布局管理器的重要性（出于调整大小/调整大小的原因）。这会是我在 GridBag 布局上使用绝对定位的情况之一吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:42:05.950

如果容器包含的组件的大小不受容器大小或字体、外观或语言更改的影响，那么绝对定位可能是有意义的。尽管可以不使用布局管理器，但您应该使用如果可能的话，布局管理器。布局管理器可以更轻松地调整依赖外观的组件外观、不同的字体大小、容器的不断变化的大小以及不同的语言环境。[根据 Oracle.com]

看看这个链接，也许这可以帮助你。

[http://www.leepoint.net/notes-java/GUI/layouts/60gridbaglayout.html](http://www.leepoint.net/notes-java/GUI/layouts/60gridbaglayout.html)

# shell - shell - 两个字符串中包含的字符 - 已编辑

> ID：15846978
> 
> 赞同：2
> 
> 时间：2013-04-06T04:21:26.387
> 
> 标签：shell, unix, dash-shell

我想比较两个字符串变量并打印两者相同的字符。我不确定如何执行此操作，我正在考虑使用`comm`or`diff`但我不确定仅打印匹配字符的正确参数。他们还说他们接受文件，这些是字符串。任何人都可以帮忙吗？

输入：

```
a=$(echo "abghrsy")
b=$(echo "cgmnorstuvz") 
```

输出：

```
"grs" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T04:32:35.167

你不需要做太多的工作来分配`$a`和`$b`shell变量，你可以......

```
a=abghrsy
b=cdgmrstuvz 
```

现在，有一个经典的计算机科学问题，称为[*最长公共子序列*¹](http://en.wikipedia.org/wiki/Longest_common_subsequence)，与您的问题相似。

但是，如果您只想要常用字符，一种方法可以让 Ruby 完成工作......

```
$ ruby -e "puts ('$a'.chars.to_a & '$b'.chars.to_a).join" 
```

* * *

^(1.不要与不同的[*最长公共子串*问题混淆。](http://en.wikipedia.org/wiki/Longest_common_substring_problem))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T04:47:33.583

使用 gnu coreutils（受@DigitalRoss 启发）..

```
a="abghrsy"
b="cgmnorstuvz"

echo "$(comm -12 <(echo "$a" | fold -w1 | sort | uniq) <(echo "$b" | fold -w1 | sort | uniq) | tr -d '\n')" 
```

将打印`grs`。我假设你只想要 uniq 字符。

**更新：** 修改为破折号..

```
 #!/bin/dash

 string1=$(printf "$1" | fold -w1 | sort | uniq | tr -d '\n');
 string2=$(printf "$2" | fold -w1 | sort | uniq | tr -d '\n');

 while [ "$string1" != "" ]; do
   c1=$(printf '%s\n' "$string1" | cut -c 1-1 )
   string2=$(printf "$2" | fold -w1 | sort | uniq | tr -d '\n');
   while [ "$string2" != "" ]; do
     c2=$(printf '%s\n' "$string2" | cut -c 1-1 )
     if [ "$c1" = "$c2" ]; then
       echo "$c1\c"
     fi
     string2=$(printf '%s\n' "$string2" | cut -c 2- )
   done
   string1=$(printf '%s\n' "$string1" | cut -c 2- )
 done
 echo; 
```

[注意：我只是一个初学者。可能有更好的方法来做到这一点。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T05:36:06.727

好问题+1。

您可以使用 awk 技巧来完成这项工作。

```
a=abghrsy
b=cdgmrstuvz
comm -12 <(echo $a|awk -F"\0" '{for (i=1; i<=NF; i++) print $i}') <(echo $b|awk -F"\0" '{for (i=1; i<=NF; i++) print $i}')|tr -d '\n' 
```

**输出：**

```
grs 
```

注意使用`awk -F"\0"`它将输入字符串逐个字符地分解为不同的 awk 字段。休息是非常简单的使用`comm`and `tr`。

**PS：**如果您输入的字符串未排序，那么您需要管道 awk 的输出以对 awk 内的数组进行排序或排序。

### 更新：仅 awk 解决方案（无 comm）：

```
echo "$a;$b" | awk -F"\0" '{scnd=0; for (i=1; i<=NF; i++) {if ($i!=";") {if (!scnd) arr1[$i]=$i; else if ($i in arr1) arr2[$i]=$i} else scnd=1}} END { for (a in arr2) printf("%s", a)}' 
```

这假设分号不会出现在您的字符串中（如果不是这种情况，您可以使用任何其他字符）。

### 更新2：我认为最简单的解决方案是使用 grep -o

（感谢@CodeGnome 的回答）

```
echo "$b" | grep -o "[$a]" | tr -d '\n' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T06:13:32.900

## 通过 GNU Grep 使用字符类

这不是一个广泛适用的解决方案，但它非常适合您的特定用例。这个想法是使用第一个变量作为字符类来匹配第二个字符串。例如：

```
a='abghrsy'
b='cgmnorstuvz'
echo "$b" | grep --only-matching "[$a]" | xargs | tr --delete ' ' 
```

这会`grs`如您所料。请注意，使用*xargs*和*tr*只是为了从输出中删除换行符和空格；如果您愿意，您当然可以通过其他方式处理此问题。

## 设置交点

不过，您真正要寻找的是一个固定的交叉点。虽然您可以在 shell 中“使用它”，但最好使用 Ruby、Python 或 Perl 之类的语言来执行此操作。

### 红宝石单线

如果您需要与现有的 shell 脚本集成，可以在当前脚本中像这样调用一个使用 Bash 变量的简单 Ruby 单行器：

```
a='abghrsy'
b='cgmnorstuvz'
ruby -e "puts ('$a'.split(//) & '$b'.split(//)).join" 
```

### 一个红宝石脚本

你当然可以通过在 Ruby 中完成整个事情来让事情变得更优雅。

```
string1_chars = 'abghrsy'.split //
string2_chars = 'cgmnorstuvz'.split //
intersection  = string1_chars & string2_chars
puts intersection.join 
```

这对我来说当然似乎更具可读性和健壮性，但是您的里程可能会有所不同。至少现在你有一些选项可供选择。

# php - 销毁大多数会话

> ID：15846986
> 
> 赞同：0
> 
> 时间：2013-04-06T04:23:04.630
> 
> 标签：php, mysql

我正在尝试为我的游戏制作一个简单的战斗脚本，但在战斗结束后，我不希望玩家能够单击刷新并再次与怪物战斗......或者能够一遍又一遍地点击提交继续获得获胜的奖励..那么在被击中的人的攻击按钮并且战斗显示结果之后我需要做什么，以使其不会发生？如果我尝试使用 session_destroy() 将玩家注销并解决问题：/

这是我的代码有什么帮助吗？

```
 if(isset($_POST['Submit']))
    {

     $player=$_SESSION['username'];
     $playerstats1="SELECT * from users where username='$player'";
     $playerstats2=mysql_query($playerstats1) or die ("Could not find player");
     $playerstats3=mysql_fetch_array($playerstats2);

     $pokemonstat1="SELECT * from user_pokemon where belongsto='$player' AND slot='1'";
     $pokemonstat2=mysql_query($pokemonstat1) or die ("Could not find pokemon");
     while($row = mysql_fetch_array($pokemonstat2)){

     $yourmonster="SELECT * from pokemon where name='".$row['pokemon']."'";
     $yourmonster2=mysql_query($yourmonster) or die ("Cannot select battle the pokemon");
     $yourmonster3=mysql_fetch_array($yourmonster2);

     $monstername=$_SESSION['pokemon'];
     $monstername=strip_tags($monstername);
     $selmonster="SELECT * from pokemon where name='$monstername'";
     $selmonster2=mysql_query($selmonster) or die ("Cannot select battle the pokemon");
     $selmonster3=mysql_fetch_array($selmonster2);

           $totalskill=$yourmonster3[att] * $row['level'] + $selmonster3[att] * 5;
           $randomnumber=rand(1,$totalskill);
           if($randomnumber<=$yourmonster3[att] * $row['level'])
           {
             echo "<center>";  
             echo "you have won!";
             echo "</center>";

           } else {
               echo "<center>";
               echo "you have lost!";
               echo "</center>";
           }
         }
    } 
```

再次更新。

```
 $battle_id = md5(uniqid(rand(), true));
    echo $battle_id;
    // $battle_id would be something like 9a8ab59df7079208843086e9b49a7862

    // initialise the battle log
    if(!isset($_SESSION['battle_log']) || !is_array($_SESSION['battle_log']))
    {
        $_SESSION['battle_log'] = array();
    }

   // Check if the battle hasn't been played
   if(!in_array($battle_id, $_SESSION['battle_log']))
   {
       // add played battle to the log

       // ... your battle code goes here

    if(isset($_POST['Submit']))
    {

     $player=$_SESSION['username'];
     $playerstats1="SELECT * from users where username='$player'";
     $playerstats2=mysql_query($playerstats1) or die ("Could not find player");
     $playerstats3=mysql_fetch_array($playerstats2);

     $pokemonstat1="SELECT * from user_pokemon where belongsto='$player' AND slot='1'";
     $pokemonstat2=mysql_query($pokemonstat1) or die ("Could not find pokemon");
     while($row = mysql_fetch_array($pokemonstat2)){

     $yourmonster="SELECT * from pokemon where name='".$row['pokemon']."'";
     $yourmonster2=mysql_query($yourmonster) or die ("Cannot select battle the pokemon");
     $yourmonster3=mysql_fetch_array($yourmonster2);

     $monstername=$_SESSION['pokemon'];
     $monstername=strip_tags($monstername);
     $selmonster="SELECT * from pokemon where name='$monstername'";
     $selmonster2=mysql_query($selmonster) or die ("Cannot select battle the pokemon");
     $selmonster3=mysql_fetch_array($selmonster2);

           $totalskill=$yourmonster3[att] * $row['level'] + $selmonster3[att] * 5;
           $randomnumber=rand(1,$totalskill);
           if($randomnumber<=$yourmonster3[att] * $row['level'])
           {
             echo "<center>";  
             echo "you have won!";
             echo "</center>";

           } else {
               echo "<center>";
               echo "you have lost!";
               echo "</center>";
           }
         }
    }
          $_SESSION['battle_log'][] = $battle_id;
   }else {

      echo "Don't try to cheat...";
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T04:31:29.610

只需在会话中设置一个值，指示用户已经进行了战斗。然后，您可以检查该值以查看您的用户是否已经参加过战斗。

您将在会话中保存的值将是唯一的，例如战斗 ID。如果这是您没有的东西，那么您可以通过对战斗中的所有独特值进行签名来创建独特的战斗参考。像这样：-

```
 $battle_id = md5($player.$row['pokemon'].$monstername);
    // $battle_id would be something like 9a8ab59df7079208843086e9b49a7862 
```

在脚本开始时初始化所有战斗的日志：-

```
 // initialise the battle log
    if(!isset($_SESSION['battle_log']) || !is_array($_SESSION['battle_log']))
    {
        $_SESSION['battle_log'] = array();
    } 
```

然后在任何战斗开始之前检查它是否尚未播放

```
 // Check if the battle hasn't been played
   if(!in_array($battle_id, $_SESSION['battle_log']))
   {
       // ... your battle code goes here

       // add played battle to the log
       $_SESSION['battle_log'][] = $battle_id;
   } 
```

所以沿着这些路线的东西应该起作用： -

```
// initialise the battle log
if(!isset($_SESSION['battle_log']) || !is_array($_SESSION['battle_log']))
{
    $_SESSION['battle_log'] = array();
}

if(isset($_POST['Submit']))
{
    $player=$_SESSION['username'];
    $playerstats1="SELECT * from users where username='$player'";
    $playerstats2=mysql_query($playerstats1) or die ("Could not find player");
    $playerstats3=mysql_fetch_array($playerstats2);

    $pokemonstat1="SELECT * from user_pokemon where belongsto='$player' AND slot='1'";
    $pokemonstat2=mysql_query($pokemonstat1) or die ("Could not find pokemon");

    while($row = mysql_fetch_array($pokemonstat2))
    {
        $yourmonster="SELECT * from pokemon where name='".$row['pokemon']."'";
        $yourmonster2=mysql_query($yourmonster) or die ("Cannot select battle the pokemon");
        $yourmonster3=mysql_fetch_array($yourmonster2);

        $monstername=$_SESSION['pokemon'];
        $monstername=strip_tags($monstername);
        $selmonster="SELECT * from pokemon where name='$monstername'";
        $selmonster2=mysql_query($selmonster) or die ("Cannot select battle the pokemon");
        $selmonster3=mysql_fetch_array($selmonster2);

        // generate the battle id based on the unique battle details
        $battle_id = md5($player.$row['pokemon'].$monstername);

        $totalskill=$yourmonster3[att] * $row['level'] + $selmonster3[att] * 5;
        $randomnumber=rand(1,$totalskill);
        if($randomnumber<=$yourmonster3[att] * $row['level'])
        {
            echo "<center>you have won!</center>";
        } else {
            echo "<center>you have lost!</center>";
        }

        // Check if the battle hasn't been played
        if(!in_array($battle_id, $_SESSION['battle_log']))
        {
            // any code below will only be run once per battle
            // ...

            // add played battle to the log
            $_SESSION['battle_log'][] = $battle_id;
        }
    }
} 
```

***注意：请***记住，会话只是暂时的，因此一旦会话被破坏，所有战斗历史都会丢失，因此请保留数据。您可以创建一个`battle`表来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:29:54.623

在战斗开始之前生成一个特殊密钥并将其指定到会话中。还将它作为 HTML 表单中的隐藏输入推送到 HTML。

当用户提交表单时，检查提交和特殊键。

如果他们匹配，用户进行一次战斗。当您处理战斗脚本时，请确保删除/重新生成密钥。

如果用户按 F5 并再次重新发布表单，它将无法正常工作，因为密钥无效。他们需要刷新页面以获取新密钥。

至于`session_destroy()`，你不需要这个。只是`unset`适当的会话，或者给那个会话一个新的值。

# sql-server-2008 - 从 SQL Server 2008 表中的 XML 字段中提取属性

> ID：15846990
> 
> 赞同：29
> 
> 时间：2013-04-06T04:24:26.697
> 
> 标签：sql-server-2008, xml-attribute

我有一张有几列的表，其中一列是一`xml`列。我没有要在查询中使用的命名空间。对于所有记录，XML 数据始终是相同的结构。

## 人为的数据

```
create table #temp (id int, name varchar(32), xml_data xml)

insert into #temp values
(1, 'one',   '<data><info x="42" y="99">Red</info></data>'),
(2, 'two',   '<data><info x="27" y="72">Blue</info></data>'),
(3, 'three', '<data><info x="16" y="51">Green</info></data>'),
(4, 'four',  '<data><info x="12" y="37">Yellow</info></data>') 
```

## 期望的结果

```
Name    Info.x   Info.y   Info
-----   -------  -------  -------
one       42       99     Red
two       27       72     Blue
three     16       51     Green
four      12       37     Yellow 
```

## 部分工作

```
select Name, xml_data.query('/data/info/.').value('.', 'varchar(10)') as [Info]
from   #temp 
```

它返回`Name`和`Info`列。我无法弄清楚如何在不使用命名空间的情况下提取属性值。例如，以下查询返回错误：

## 查询 1

```
select Name, xml_data.query('/data/info/@x') as [Info]
from   #temp

Msg 2396, Level 16, State 1, Line 12
XQuery [#temp.xml_data.query()]: Attribute may not appear outside of an element 
```

## 查询 2

```
select Name, xml_data.value('/data/info/@x', 'int') as [Info]
from   #temp

Msg 2389, Level 16, State 1, Line 12
XQuery [#temp.xml_data.value()]: 'value()' requires a singleton (or empty sequence), found operand of type 'xdt:untypedAtomic *' 
```

## 查询 3

```
select Name, xml_data.query('/data/info/.').value('@x', 'int') as [Info]
from   #temp

Msg 2390, Level 16, State 1, Line 9
XQuery [value()]: Top-level attribute nodes are not supported 
```

## 问题

如何编写查询以返回`xml`同一表中列的常规列数据和元素 + 属性值？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-06T04:39:25.983

就在我发布问题之后，我偶然发现了这个[答案](https://stackoverflow.com/questions/5221553/sql-2008-retrieving-attribute-values-from-an-xml-column?rq=1)。不知道为什么我在之前的搜索中找不到它。这是我一直在寻找的答案。这是有效的查询：

## 询问

```
select Name
      ,xml_data.value('(/data/info/@x)[1]', 'int') as [Info.x]
      ,xml_data.value('(/data/info/@y)[1]', 'int') as [Info.y]
      ,xml_data.value('(/data/info/.)[1]', 'varchar(10)') as [Info]
from   #temp 
```

## 结果

```
Name     Info.x    Info.y    Info
-------  --------  --------  ---------
one         42        99     Red
two         27        72     Blue
three       16        51     Green
four        12        37     Yellow 
```

.

## ------ 编辑 [2014-01-29] ------

我发现了另一个值得添加到这个答案的案例。`<info>`给定元素内的多个元素`<data>`，可以使用以下命令返回所有`<info>`节点`cross apply`：

```
create table #temp (id int, name varchar(32), xml_data xml)

insert into #temp values
(1, 'one',   '<data><info x="42" y="99">Red</info><info x="43" y="100">Pink</info></data>'),
(2, 'two',   '<data><info x="27" y="72">Blue</info><info x="28" y="73">Light Blue</info></data>'),
(3, 'three', '<data><info x="16" y="51">Green</info><info x="17" y="52">Orange</info></data>'),
(4, 'four',  '<data><info x="12" y="37">Yellow</info><info x="13" y="38">Purple</info></data>')

select Name
      ,C.value('@x', 'int') as [Info.x]
      ,C.value('@y', 'int') as [Info.y]
      ,C.value('.', 'varchar(10)') as [Info]
from #temp cross apply
     #temp.xml_data.nodes('data/info') as X(C)

drop table #temp 
```

此示例返回以下数据集：

```
Name      Info.x      Info.y      Info
--------- ----------- ----------- ----------
one       42          99          Red
one       43          100         Pink
two       27          72          Blue
two       28          73          Light Blue
three     16          51          Green
three     17          52          Orange
four      12          37          Yellow
four      13          38          Purple 
```

# c# - 通信对象 System.ServiceModel.Channels.ServiceChannel 不能用于通信，因为它处于故障状态

> ID：15846997
> 
> 赞同：2
> 
> 时间：2013-04-06T04:25:55.737
> 
> 标签：c#, wpf, c#-4.0, wpf-controls

![游戏](https://i.stack.imgur.com/VCUmJ.png)

发生错误：“通信对象 System.ServiceModel.Channels.ServiceChannel 无法用于通信，因为它处于故障状态。”

由于app.config而发生该错误？

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T22:03:46.293

我收到了这个错误，虽然服务器上没有出现第一次机会异常，但在我的情况下，这是因为我收到的响应包含 200k 字节（pdf）；而且我没有在我的配置文件中设置适当的设置来允许大尺寸和适当的超时：

```
<netTcpBinding>
    <binding name="NetTcpBinding_IExampleService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" transactionFlow="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647">
        <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
    </binding>
</netTcpBinding> 
```

如果错误消息更具体，那就太好了。

显然，我的 2 GB 限制不一定适合您的情况，我鼓励读者选择适合您的特定用例的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T04:39:04.317

当您在服务器或客户端中遇到未处理的异常时，通常会发生这种情况。您拥有的那个客户不再好，您需要创建一个新客户。

如果错误发生在服务器端，您应该使用故障异常（它们不会导致通道故障）。您还可以订阅[此](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.communicationobject.faulted.aspx)事件以确切知道它何时发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T08:44:01.443

可能的原因是您使用服务从另一个程序或其他程序获取数据。例如，如果您使用 technicService 1.2 版（参见 web.config）和例如 billingService 1.3 版（参见 web.config），那么您的计费服务可能与 technicService 1.3 而不是 1.2 对应，那么您也会收到此错误