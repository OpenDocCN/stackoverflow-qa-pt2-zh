# StackOverflow 问答 14499000-14499999

# sql - 更新查询以循环运行

> ID：14499001
> 
> 赞同：1
> 
> 时间：2013-01-24T10:24:36.723
> 
> 标签：sql, sql-server-2008

我有两个表，Table1 和 Table2。这些表之间的公共列是 CustId。表 1 包含一个 CustId 的多条记录，而作为主表的 table2 仅包含一条 Custid 记录以及所有相关的客户信息。

我想要做的是，用 table1 的最新修改记录更新 table2。

由于主表中有多个记录，我希望查询循环运行。

我写了以下内容，

```
update Table1 
set 
Table1.col1=b.col1,
Table1.col2 = b.col2,
Table1.col3 = case
 when b.col3 = (select Id from table4 where  name = 'Not Listed')
 then b.col4
 else b.col3
 end, 
Table1.col4 = case
 when b.col5 in (select Id from table5 where name = 'Not Listed')
 then b.col6
 else b.col5
 end
from 
    (select top 1 Table2.* 
    from Table2,Table1 where 
    Table2.CustId = Table1.CustId
    Order by 
    Table2.modifiedon desc )b

where Table1.CustId = b.CustId 
```

但我不确定它是否会针对 table2 中的所有记录运行。

请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:35:56.953

请尝试使用内部联接进行更新。有关详细信息，请参阅链接[Mastering the SQL UPDATE Syntax](http://www.sqlusa.com/articles2005/updatesyntax/)。

```
UPDATE T1
SET T1.col1=b.col1,
    T1.col2 = b.col2,
    T1.col3 = (case when b.col3 = (select Id from table4 where  name = 'Not Listed')
            then b.col4
            else b.col3 end),
    T1.col4 = (case when b.col5 = (select Id from table5 where name = 'Not Listed')
            then b.col6
            else b.col5 end)

FROM Table1 T1 INNER JOIN 
(
    select ROW_NUMBER() over(partition by CustId order by modifiedon desc) Rnum,
        CustId, modifiedon, col1, col2, col3, col4, col5, col6
    FROM Table2

)x ON x.CustId=T1.CustId
WHERE x.Rnum=1 
```

# maven - 如何通过maven pom.xml修改catalina.bat

> ID：14499003
> 
> 赞同：3
> 
> 时间：2013-01-24T10:24:39.177
> 
> 标签：maven, intellij-idea, tomcat6, pom.xml

我正在使用**intellij idea、apache tomcat 和 maven 2.2.1，在 pom.xml 中**，我们有以下给出的部分

```
<plugins>
<plugin>
<groupId>org.codehaus.cargo</groupId>
<artifactId>cargo-maven2-plugin</artifactId>
<configuration>
    <wait>true</wait>
    <container>
       <containerId>tomcat6x</containerId>
        <zipUrlInstaller>
            <url>
            http://mirrors.enquira.co.uk/apache/tomcat/tomcat-6/v6.0.35/bin/apache-tomcat-6.0.35.zip
            </url>
            <installDir>${user.home}/tomcat6</installDir>
        </zipUrlInstaller>
        <systemProperties>
            <responseDirectory>${project.build.directory}/mockresponses</responseDirectory>
        </systemProperties>
    </container>
    <configuration>
        <home>${user.home}/apps1-tomcat</home>
        <properties>
            <cargo.jvmargs>
            <![CDATA[-Xdebug -Xrunjdwp:transport=dt_socket,address=5005,server=y,suspend=n]]></cargo.jvmargs>
        </properties>
        <deployables>
            <deployable>
                <groupId>com.pra.apps1a</groupId>
                <artifactId>apps1a</artifactId>
                <type>war</type>
                <properties>
                    <context>/apps1a</context>
                </properties>
            </deployable>
            <deployable>
                <groupId>com.pra.mockserver</groupId>
                <artifactId>mockserver-web</artifactId>
                <type>war</type>
                <properties>
                    <context>/httpmockserver</context>
                </properties>
            </deployable>
        </deployables>
    </configuration>
</configuration>
<executions>
    <execution>
        <id>start-container</id>
        <phase>pre-integration-test</phase>
        <goals>
            <goal>start</goal>
        </goals>
    </execution>
</executions>
</plugin>
</plugins> 
```

当我们运行它时，它会下载 apache tomact 然后创建 apps1-tomcat 文件夹并且应用程序运行正常，但是**apps1-tomcat 中没有 bin 文件夹**，我们需要**在 catalina.bat 中设置 JAVA_OPTS 参数**，我们该怎么做直接在**pom.xml**中创建带有 bin 文件夹的 apps1-tomcat 文件夹以及在 catalina.bat 中设置的 JAVA_OPTS 参数

提前致谢。

# c# - HttpWebRequest 被取消

> ID：14499006
> 
> 赞同：2
> 
> 时间：2013-01-24T10:24:47.243
> 
> 标签：c#, asp.net, xmlhttprequest

我正在使用 ASP.NET 读取 Request.InputStream 并将 HttpRequest 发送到发送给我的页面抛出 QueryString 参数，我正确读取了 Request.InputStream 并且我正确地制作了 HttpRequest，但是在我的 Request.InputStream我发现像“PorsvÃ¤gen”这样的特殊字符我得到这个错误：ystem.Net.WebException：请求被中止：请求被取消。---> System.IO.IOException：在写入所有字节之前无法关闭流。在 System.Net.ConnectStream.CloseInternal（布尔内部调用，布尔中止）

我获取 Request.InputStream 的代码是这样的：

```
string requestData = (new StreamReader(Request.InputStream)).ReadToEnd(); 
```

我制作和发送 HttpRequest 的代码是这样的：

```
 webRequest = (HttpWebRequest)WebRequest.Create(new Uri(urlDestination));
    webRequest.Method = "POST";

    webRequest.ContentType = "application/x-www-form-urlencoded";
    webRequest.ContentLength = requestData.Length;

    writer = new StreamWriter(webRequest.GetRequestStream());
    writer.Write(requestData, 0, requestData.Length);//<-------Here I get the ERROR
    if (writer != null)
    {
        writer.Close();
    } 
```

你能告诉我我的代码有什么问题吗，因为它可以工作，但是对于特殊字符它会崩溃。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T12:24:26.753

我已经设法通过实现这个来克服错误：

```
 string requestData = (new StreamReader(Request.InputStream)).ReadToEnd();
        byte[] bytes = Request.ContentEncoding.GetBytes(requestData);

        Stream writer = webRequest.GetRequestStream();
        writer.Write(bytes, 0, bytes.Length); 
```

我使用 Stream 来编写`HttpWebRequest`代替并使用 in 字节`StreamWriter`读取`InputStream``ContentEncoding`

# graph - 混合图和mathematica 9

> ID：14499007
> 
> 赞同：0
> 
> 时间：2013-01-24T10:24:49.217
> 
> 标签：graph, wolfram-mathematica, social-networking

我想用我的数据进行网络分析。

所以我使用函数图，但 Mathematica 说“不支持混合图和多重图”

我有 1984 年的一些冗余连接：A-->A, A-->A

你有什么想法在使用图表时解决这个问题吗？

先感谢您

# sql - 关于如何从 xml 列中的根节点检索值的 Sql 查询

> ID：14499010
> 
> 赞同：0
> 
> 时间：2013-01-24T10:24:59.930
> 
> 标签：sql, xml

我是 SQL 中的 XML 查询的新手，希望有人可以帮助我处理有关如何检索类型值的 Sql 查询。

我有一个 xml 列数据，如下所示

```
<mnt:job xmlns:mnt="http://namespaces.aada.be/4.0/maintenance"
xmlns:order="http://namespaces.aadasoftware.net/4.4/maintenance/order" 
mnt:version="1.0" mnt:type="Aada.Core.Orders.DownloadOrder, Aada.Core">
<mnt:targets>
<mnt:target mnt:id="bf321a20-8283-4760-a683-57892d8b9e12" mnt:status="Succeeded" 
mnt:duration="00:00:00" mnt:message="" mnt:attempt="1">
<mnt:custom>
 ................. 
```

我想检索`value("Aada.Core.Orders.DownloadOrder, Aada.Core")`内部`mnt:type`但不确定如何为它编写查询。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:46:42.060

您需要使用`@`来获取属性：

```
DECLARE @X XML = '<mnt:job xmlns:mnt="http://namespaces.aada.be/4.0/maintenance"
                    xmlns:order="http://namespaces.aadasoftware.net/4.4/maintenance/order" 
                    mnt:version="1.0" mnt:type="Aada.Core.Orders.DownloadOrder, Aada.Core">
                        <mnt:targets>
                            <mnt:target mnt:id="bf321a20-8283-4760-a683-57892d8b9e12" mnt:status="Succeeded" 
                            mnt:duration="00:00:00" mnt:message="" mnt:attempt="1" />
                        </mnt:targets>
                    </mnt:job>';

WITH XMLNAMESPACES ('http://namespaces.aada.be/4.0/maintenance' AS mnt)
SELECT  @X.value('(/mnt:job/@mnt:type)[1]', 'nvarchar(max)'); 
```

# objective-c - 在可可的表格视图中删除数据

> ID：14499014
> 
> 赞同：0
> 
> 时间：2013-01-24T10:25:06.173
> 
> 标签：objective-c, cocoa, nstableview

我在表格视图中有一组值。我需要删除/取消一行。我需要删除该行，告知用户它已被取消。我如何在行的数据上画一条线/使用可可删除一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:42:50.443

从IOS 6：

NSAttributedString 具有删除属性“NSStrikethroughStyleAttributeName”

希望这可以帮助 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:43:34.850

你应该看看这个： http: [//www.cocoanetics.com/2011/01/befriending-core-text/](http://www.cocoanetics.com/2011/01/befriending-core-text/)

# validation - 跳到下一个 未经验证的选项卡

> ID：14499016
> 
> 赞同：1
> 
> 时间：2013-01-24T10:25:08.120
> 
> 标签：validation, jsf, jsf-2, primefaces, wizard

我正在使用`<p:wizard>`几个标签。一些选项卡包含需要验证的输入，例如信用卡号。但是可以跳过整个选项卡。如何跳到下一个标签？

我正在考虑 2 个实现，但我不确定如何：

1.  添加一个跳过按钮，该按钮将转到下一个选项卡而不验证当前选项卡。

    ```
    <p:commandButton process="@this" immediate="true" onclick="wiz.next();" value="#{msgs['action.skip']}"></p:commandButton> 
    ```

魔法师。

```
<p:wizard widgetVar="wiz" flowListener="#{accountActivationController.onFlowProcess}" nextLabel="#{msgs['action.next']}" backLabel="#{msgs['action.back']}">
    <p:tab id="tabProfile">     
            //...
    </p:tab>
    <p:tab id="tabAddress">     
        <p:panel>
            <p:inputText id="shippingZipCode_OTHERS" value="#{accountActivationController.shippingAddress.postCode}">
            </p:inputText>
            <p:message for="shippingZipCode_OTHERS" />      
            <p:messages id="globalAddress" showDetail="true">
            </p:messages>
            <f:facet name="footer">
                <div class="buttons-set">
                    <p:commandButton process="@this" value="#{msgs['action.skip']}" oncomplete="wiz.next();">
                    </p:commandButton>
                </div>
            </f:facet>
        </p:panel>
    </p:tab>
    <p:tab id="tabSchool">  
            //....  
            <p:commandButton action="#{bean.submit} value="Submit" />
    </p:tab>
</p:wizard> 
```

似乎`process`在这部分不起作用。onclick, oncomplete on p:commandButton 不会改变任何东西。

目标是当按下跳过按钮时，不应该触发表单验证，但我仍在试图弄清楚如何做到这一点。

1.  添加一个复选框“跳过”，这将禁用该特定选项卡上的验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:45:05.797

经过几个小时的测试，我已经验证了 kolossus 所说的是真的。primefaces 向导不支持选择性处理组件，它始终验证特定选项卡上的所有字段。

就我而言，我只检查必填字段，所以我所做的是删除所有必填字段验证器，因此当我单击“跳过”按钮时，它应该导航到下一个选项卡。当我单击下一步按钮时，在 onFlowListener 事件中手动验证所有必填字段。

像这样的东西：

```
public String onFlowProcess(FlowEvent event) {
    if (event.getOldStep().equals("tabAddress")) {
        if (skipToNext) {
            skipToNext = false; 
            return event.getNewStep();
        }
        if (StringUtils.isBlank(shippingAddress.getCountryCode())
                || StringUtils.isBlank(shippingAddress.getPostCode())
                || StringUtils.isBlank(shippingAddress.getState())
                || StringUtils.isBlank(shippingAddress.getAddress1())) {            
            facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, null, "ERROR Address")));
            return event.getOldStep();
        }       
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-14T02:12:46.577

客户端 API：

移动到“n”选项卡

```
onclick="PF('wiz').loadStep (PF('wiz').cfg.steps [n], true);  " 
```

从 0 到 m 并且 n > o 和 n < m m = 选项卡数

# android - 如何检查设备是否有 Play 商店，并且用户已使用他们的谷歌帐户登录

> ID：14499019
> 
> 赞同：1
> 
> 时间：2013-01-24T10:25:11.080
> 
> 标签：android, google-play

> **可能重复：**
> [无法确定 Android 设备上是否安装了 Google Play 商店](https://stackoverflow.com/questions/10551531/cannot-determine-whether-google-play-store-is-installed-or-not-on-android-device)

我想做两件事：

1) 检查设备是否安装了 Google Play（因为它在某些设备上不可用，例如 HCL me 平板电脑等）

2）如果安装了Google Play，是否可以判断用户是否使用Google帐户登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:32:10.413

你可以用这个

```
[PackageManager.getPackageInfo][1] 
```

带包：com.android.vending

```
Throws PackageManager.NameNotFoundException if a package with the given name can not be found on the system. 
```

# android - 在两个窗格布局中使用 SupportMapFrament 会产生重复的布局错误

> ID：14499020
> 
> 赞同：2
> 
> 时间：2013-01-24T10:25:12.623
> 
> 标签：android, android-fragments, android-lifecycle, google-maps-android-api-2, android-maps-v2

我正在使用一个驱动细节视图的 ListView。列表视图和详细信息视图有自己的活动。详细视图以较小的布局显示地图。地图片段的代码如下：

```
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="150dp" android:id="@+id/details_emap_container"
        android:background="@drawable/back_rounded_rectangle_border_black"
        android:padding="2dp"
        >
    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
              android:tag="details_map_short"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              class="com.google.android.gms.maps.SupportMapFragment"
              />
    <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/rightArrowMap" android:src="@drawable/right_arrow_black"
            android:layout_alignParentRight="true" android:layout_centerVertical="true"
            android:layout_marginRight="10dp"/>
</RelativeLayout> 
```

当我在平板电脑的两个窗格布局中第一次单击列表项时，它工作正常。但是在随后选择任何其他列表项时，会引发以下错误：

```
android.view.InflateException: Binary XML file line #159: Error inflating class fragment
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:727)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:727)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:727)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
        at com.xxxx.android.activity.fragments.EventDetailFragment.onCreateView(EventDetailFragment.java:97)
        at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
        at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
        at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
        at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
        at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
        at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
        at android.os.Handler.handleCallback(Handler.java:587)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:132)
        at android.app.ActivityThread.main(ActivityThread.java:4123)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:491)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: java.lang.IllegalArgumentException: Binary XML file line #159: Duplicate id 0xffffffff, tag details_map_short, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment
        at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285)
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:660)
        ... 22 more 
```

EventDetailFragment 看起来像这样：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    Log.e(TAG, "onCreateView was called!");
    // If activity recreated (such as from screen rotate), restore
    // the previous article selection set by onSaveInstanceState().
    // This is primarily necessary when in the two-pane layout.
    if (savedInstanceState != null) {
        mCurrentPosition = savedInstanceState.getInt(ARG_POSITION);
        mCurrEventId = savedInstanceState.getString(EVENT_ID);
    }

    // Inflate the layout for this fragment
    detailsView = inflater.inflate(R.layout.fragment_event_detail, container, false);

    mMapFragment = (SupportMapFragment)getFragmentManager().findFragmentByTag(MAP_FRAGMENT_TAG);

    // We can't be guaranteed that the map is available because Google Play services might
    // not be available.
    //setUpMapIfNeeded();  //do this later in onStart

    return detailsView;

} 
```

List 活动中的代码，用于在选择项目时显示详细活动或片段：

```
@Override
public void onItemSelected(int index) {
    Log.d(TAG, "Item Selected is : " + index);
    if(findViewById(R.id.event_details_container) != null) {
        // In two-pane mode, show the detail view in this activity by
        // adding or replacing the detail fragment using a
        // fragment transaction.
        Log.d(TAG, "Two pane layout navigation executed");
        Bundle arguments = new Bundle();
        arguments.putInt(EventDetailFragment.ARG_POSITION, index);
        EventDetailFragment fragment = new EventDetailFragment();
        fragment.setArguments(arguments);
        getSupportFragmentManager().beginTransaction()
                .replace(R.id.event_details_container, fragment).commit();
    }
    else {
        // In single-pane mode, simply start the detail activity
        // for the selected item ID.
        Log.d(TAG, "Single pane layout navigation - creating new Activity to display!");
        getSupportFragmentManager().executePendingTransactions();
        Intent detailIntent = new Intent(this, EventDetailActivity.class);
        detailIntent.putExtra(EventDetailFragment.ARG_POSITION, index);
        startActivity(detailIntent);
    }

} 
```

我无法弄清楚为什么在两个窗格布局中这不起作用？为什么只有 MapFragment 似乎会抛出错误？在我添加`SupportMapFragment`. 任何帮助/想法将不胜感激！

PS：代码必须支持 API 级别 10 及以上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:05:32.247

我终于找到了正确的解决方法。由于我在两个窗格布局中的片段中使用地图；我必须以编程方式构建地图，而不是在 xml 中定义。这在 android SDK (googleplayservices) 中的地图示例 ProgrammaticDemoActivity 中得到了演示。下面是示例的摘录，`onCreateView`当从 Fragment 调用时调用它（或者`onCreate`如果你从 调用`Activity`）：

```
// It isn't possible to set a fragment's id programmatically so we set a tag instead and
// search for it using that.
mMapFragment = (SupportMapFragment) getSupportFragmentManager()
        .findFragmentByTag(MAP_FRAGMENT_TAG);

// We only create a fragment if it doesn't already exist.
if (mMapFragment == null) {
    // To programmatically add the map, we first create a SupportMapFragment.
    mMapFragment = SupportMapFragment.newInstance();

    // Then we add it using a FragmentTransaction.
    FragmentTransaction fragmentTransaction = getSupportFragmentManager()
            .beginTransaction();
    fragmentTransaction.add(android.R.id.content, mMapFragment, MAP_FRAGMENT_TAG);
    fragmentTransaction.commit();
} 
```

之所以如此，是因为默认情况下，地图片段将拥有自己的生命周期，而不是与视图生命周期相关联。因此，如果您在 xml 中定义它，则地图片段不会被破坏，但视图会被破坏。当您尝试再次为片段充气时，这会导致错误，因为地图已经存在！有关更多信息，请参见：[https ://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapFragment](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapFragment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:54:31.030

Google Maps for Android API v2 目前无法在开箱即用的模拟器上运行。它*可能*适用于设置 YMMV，请参阅 -[除非您更新 Google Play 服务（通过 Bazaar），否则此应用将无法运行](https://stackoverflow.com/questions/13691943/this-app-wont-run-unless-you-update-google-play-services-via-bazaar/13734937#13734937)。您最好的选择是在真实设备上进行测试，直到 Google 解决了问题。请给错误加注星标 - [http://code.google.com/p/gmaps-api-issues/issues/detail?id=4627](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4627)

# knockout.js - 我可以使用敲除来绑定 HTML 文档标题吗？

> ID：14499021
> 
> 赞同：0
> 
> 时间：2013-01-24T10:25:18.273
> 
> 标签：knockout.js

> **可能重复：**
> [有没有办法通过使用 Knockout.js 进行数据绑定来设置页面标题？](https://stackoverflow.com/questions/8649690/is-there-a-way-to-set-the-page-title-by-data-binding-using-knockout-js)

所以我的 HTML 文档中的标题标签如下所示：

```
<title data-bind="text:Title"></title> 
```

但它不起作用，可能是因为标签在html标题内？

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:42:27.307

我会创建一个自定义绑定，它超级简单

[http://jsfiddle.net/L3nPG/](http://jsfiddle.net/L3nPG/)

要查看小提琴中的标题[http://fiddle.jshell.net/L3nPG/show/light/](http://fiddle.jshell.net/L3nPG/show/light/)

```
ko.bindingHandlers.pageTitle = {
    update: function(element, valueAccessor) {
        var title = ko.utils.unwrapObservable(valueAccessor());
        document.title = title;
    }
};

ko.virtualElements.allowedBindings.pageTitle = true; 
```

# javascript - 在 highcharts 样条图中创建多个系列？

> ID：14499023
> 
> 赞同：0
> 
> 时间：2013-01-24T10:25:21.280
> 
> 标签：javascript, csv, highcharts, time-series, spline

我使用 Highcharts 库制作了一个样条图，其中包含从两个不同的 CSV 文件加载的两个系列数据，它工作正常。现在我需要另一个样条图，但有 54 个数据系列。

我使用 PHP 创建了 54 个 CSV 文件，然后生成图表的 Javascript 代码是：

```
<script type="text/javascript">
$(function () {
    var chart;
    $(document).ready(function() {
        var options = {
            chart: {
                renderTo: 'chart_day',
                type: 'spline'
            },
            title: {
                text: 'Andamento giornaliero temperatura.'
            },
            xAxis: {
                type: 'datetime',
                second: '%H:%M:%S'
            },
            yAxis: {
                title: {
                    text: 'Temperatura (°C)'
                },
            },
            tooltip: {
                formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+
                    Highcharts.dateFormat('%H:%M:%S', this.x) +': '+ this.y +' °C';
                }
            },
            series: [ <?php for($i=0;$i<52;$i++)
                echo "{ name: \"Sensor".($i+1)."\", data: []},";
                echo "{ name: \"Sensor".($i+1)."\", data: []}";
            ?>]
        };

        for( i=1; i<=54; i++){
            if(i!=5){
                $.get('file/file'+i+'.txt', function(data) {
                    // Split the lines
                    var lines = data.split('\n');

                    // Iterate over the lines and add categories or series
                    $.each(lines, function(lineNo,line) {
                        if (line != "") {
                            var items = line.split(',');
                            var timeElements = items[0].split(':');
                            var date = Date.UTC(2004, 2, 1, timeElements[0], timeElements[1], timeElements[2], 0);
                            options.series[i-1].data.push([date,parseFloat(items[1])]); 
                        }
                    });
                    if(i==54)
                    chart = new Highcharts.Chart(options);
                });
            }
        }
    });
});
</script> 
```

JS 控制台报错：

> “未捕获的类型错误：无法读取未定义的属性‘数据’”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:20:22.660

好像你的系列初始化被破坏了。尝试这个

```
var series  = [];
for(i=0;i<52;i++)
{
   series.push({name: ('Sensor' + (i + 1)), data: []});
} 
```

并根据您的选择设置此系列对象：

```
var options = {
            ..
            series: series
        }; 
```

# javascript - 滚动页眉后修复页面顶部的菜单栏

> ID：14499024
> 
> 赞同：6
> 
> 时间：2013-01-24T10:25:22.467
> 
> 标签：javascript, html, css

首先，如果这个问题过于开放，我深表歉意。

我知道将网页的标题设为静态，因此它始终在视口顶部可见，并且当您向下滚动时，内容会在其下方传递。这可以纯粹使用 css 来实现。

我想知道如何让标题滚动离开页面，但在顶部保留一个静态的水平菜单栏。[http://www.forexfactory.com](http://www.forexfactory.com)就是一个很好的例子。

我看到它调用了一个 JavaScript 函数`onHeaderComplete.execute()`，我假设当标题滚动时将额外的 css 样式应用于导航栏，但我不确定它是如何工作的。由于我的 JavaScript 技能，任何基本的解释都相对有限。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T10:27:27.957

我刚刚回答了类似的问题。[**检查这个问题**](https://stackoverflow.com/questions/14496240/how-can-i-stick-the-div-after-scrolling-down-a-little)

```
$(function(){
        // Check the initial Poistion of the Sticky Header
        var stickyHeaderTop = $('#stickyheader').offset().top;

        $(window).scroll(function(){
                if( $(window).scrollTop() > stickyHeaderTop ) {
                        $('#stickyheader').css({position: 'fixed', top: '0px'});
                        $('#stickyalias').css('display', 'block');
                } else {
                        $('#stickyheader').css({position: 'static', top: '0px'});
                        $('#stickyalias').css('display', 'none');
                }
        });
  }); 
```

**[演示](http://jsfiddle.net/uFq2k/)**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T10:40:02.223

你可以这样写：

```
$(window).scroll(function() {
    if ($(this).scrollTop() > 50) {
         $('div').addClass('fix');
    } else {
         $('div').removeClass('fix');
    }
}); 
```

**CSS**

```
.fix{
    position:fixed;
    top:0;
    left:0;
    right:0;
    margin:0;
} 
```

检查这个[http://jsfiddle.net/a42qB/](http://jsfiddle.net/a42qB/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-28T11:52:43.343

您也可以通过创建两次菜单来使用纯 CSS 来实现。这并不理想，但它让您有机会对菜单进行不同的设计，一旦它位于顶部，您将只有 CSS，没有 jquery：

```
<div id="hiddenmenu">
 THIS IS MY HIDDEN MENU
</div>
<div id="header">
 Here is my header with a lot of text and my main menu
</div>
<div id="body">
 MY BODY
</div> 
```

然后有以下CSS：

```
#hiddenmenu {
position: fixed;
top: 0;
z-index:1;
 }
#header {
top: 0;
position:absolute;
z-index:2;
 }
#body {
padding-top: 80px;
position:absolute;
z-index: auto;
 } 
```

这是一个小提琴供您查看：[https ://jsfiddle.net/brghtk4z/1/](https://jsfiddle.net/brghtk4z/1/)

# javascript - 当用户单击/触摸与 tel 链接的电话号码时如何捕获电话号码拨号事件：uri 方案

> ID：14499025
> 
> 赞同：0
> 
> 时间：2013-01-24T10:25:23.560
> 
> 标签：javascript, html, touch

我想记录用户触摸并拨打我的网页上显示在 android/iOS 设备上的号码的所有事件？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:34:58.687

*至少有三种方法可以解决这个问题：*

**1.检查click()上的href**

您可以收听`click()`链接上的事件并检测它们是否`href`以`tel:`：

```
$( 'a' ).click( function () {
    var href = $( this ).attr( 'href' );
    var tel = /^tel:/i.test( href );
    if ( tel ) {
        alert( 'A telephone link was clicked: ' + href );
        //if you don't want the default action (dial ) to happen, return false, otherwise don't return anything
    }
}); 
```

JSFiddle 直播：http: [//jsfiddle.net/c7CRG/2/](http://jsfiddle.net/c7CRG/2/)

**2.使用类标志**

此外，如果您可以控制 HTML 并且可以在`<a>`包含电话号码的所有链接中放置类名，则无需在上述算法中进行解析：

```
$( 'a.telephone' ).click( function () {
    alert( 'A telephone link was clicked: ' + $( this ).attr( 'href' ) );
    //if you don't want the default action (dial ) to happen, return false, otherwise don't return anything
}); 
```

**3.使用高级JQuery语法**

您不必使用正则表达式来解析 href 属性。JQuery 有[一个有趣的语法](http://api.jquery.com/attribute-starts-with-selector/)：

```
$( 'a[href^="tel:"]' ).click( function () {
    alert( 'A telephone link was clicked: ' + $( this ).attr('href' ) );
}); 
```

这是一个 JSFiddle：http: [//jsfiddle.net/c7CRG/7/](http://jsfiddle.net/c7CRG/7/)

# python - 在这种情况下，多处理或线程在 Python/Django 中是否合适？

> ID：14499030
> 
> 赞同：0
> 
> 时间：2013-01-24T10:25:44.370
> 
> 标签：python, django

我在 Django 中有这样的功能：

```
def uploaded_files(request):
    global source
    global password
    global destination
    username = request.user.username

        log_id = request.user.id
        b = File.objects.filter(users_id=log_id, flag='F')  # Get the user id from session .delete() to use delete
        source = 'sachet.adhikari@69.43.202.97:/home/sachet/my_files'
        password = 'password'
        destination = '/home/zurelsoft/my_files/'
        a = Host.objects.all() #Lists hosts
        command = subprocess.Popen(['sshpass', '-p', password, 'rsync', '--recursive', source],
                               stdout=subprocess.PIPE)
        command = command.communicate()[0]
        lines = (x.strip() for x in command.split('\n'))
        remote = [x.split(None, 4)[-1] for x in lines if x]
        base_name = [os.path.basename(ok) for ok in remote]
        files_in_server = base_name[1:]
        total_files = len(files_in_server)
        info = subprocess.Popen(['sshpass', '-p', password, 'rsync', source, '--dry-run'],
                               stdout=subprocess.PIPE)
        information = info.communicate()[0] 
        command = information.split()
        filesize = command[1] 
        #st = int(os.path.getsize(filesize))
        #filesize = size(filesize, system=alternative)
        date = command[2] 
        users_b = User.objects.all()
        return render_to_response('uploaded_files.html', {'files': b, 'username':username, 'host':a, 'files_server':files_in_server, 'file_size':filesize, 'date':date, 'total_files':total_files, 'list_users':users_b}, context_instance=RequestContext(request)) 
```

该函数的主要用途是将文件从服务器传输到本地机器并将数据写入数据库。我想要什么：有一个 10GB 的文件需要很长时间才能复制。由于在命令行中使用 rsync 进行复制，因此我想让用户在传输文件时使用其他菜单。我怎样才能做到这一点？例如，如果用户按下确定，文件将在命令行中传输，所以我想向用户显示“文件正在传输”消息并停止滚动光标或类似的东西？在这种情况下，多处理或线程是否合适？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:57:11.063

你需要的是[芹菜](http://celeryproject.org/)。

它让您将作业作为并行任务生成并返回 http 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:42:08.323

假设该功能在视图内工作，您的浏览器将在 10GB 文件完成传输之前超时。也许您应该为此重新考虑您的架构？

可能有几种方法可以做到这一点，但现在我想到了一些方法：

一种解决方案是让中介存储文件传输的状态。在开始传输文件的过程之前，请在数据库之类的某处设置一个标志，表明该过程已经开始。然后，如果您使子进程调用阻塞，请等待它完成，如果可能，检查命令的输出并更新您之前设置的标志。

然后让任何前端轮询文件传输的状态。

另一种解决方案，如果您像示例中那样使子进程调用非阻塞，在这种情况下，您应该使用位于那里的线程读取标准输出并更新您的前端可以查询的中间存储以获得更“实时”更新传输过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:09:58.103

RaviU 解决方案肯定会奏效。

另一种选择是在自己的线程中调用阻塞子进程。该线程可能负责设置标志或信息（在 memcache、db 或只是硬盘驱动器上的文件中）以及在完成时清除它。就个人而言，阅读 rsyncs stdout 和我之间并没有失去爱，所以我通常只向操作系统询问文件大小。

此外，如果您绝对不需要该文件，则添加“-c”来执行校验和对于那些巨大的文件可能会有好处。资料来源：尝试通过参差不齐的校园网络传输巨型视频文件的个人经验。

我会说到目前为止所有解决方案的一个问题是它不适用于“N”个文件。最终，即使您确保每个文件一次只能传输一次，但如果您有很多不同的文件，那么最终它会使系统陷入困境。除非您知道它一次只能是一个文件，否则您最好只使用某种任务队列。我最近没用过，但是快速谷歌搜索产生了[芹菜](http://docs.celeryproject.org/en/latest/index.html)，看起来不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:14:17.020

每个 Web 服务器都有上传文件的功能。它对大文件的作用是将文件分成块，并在收到每个块后进行合并。你可以在这里做的是，你可以在你的 html 页面中有一个隐藏的标签，它有一个 value 属性，每当你的上传网络服务在那个时间点向你返回一个 ok 消息时，你可以将隐藏的 html 值更改为相关的东西，也可以写一个持续读取该隐藏 html 元素的值并检查您的文件上传是否已完成的函数。

# android - 如何完成一项活动并返回不同的位置？

> ID：14499034
> 
> 赞同：2
> 
> 时间：2013-01-24T10:25:47.833
> 
> 标签：android, back-stack

我的应用程序实现了一个涉及 3-4 个活动的操作。此流程的入口点可以来自应用程序中的不同活动。（HomeActivity，各种displayActivity）。一旦最后一个活动成功完成，我想返回开始活动。

有最佳实践方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:32:44.423

您可以使用全局静态布尔值来帮助您解决这个问题（在示例中`SomeClass.IsClosingFlow`），另外，如果每个活动都在“流”中，您应该定义每个活动以“标记”（流=意味着它是需要的活动包的一部分被关闭）。`isActivityInFlow()`如果您的所有活动都在扩展一些抽象活动（即），我建议使用此标记作为抽象方法。

以下代码演示了这一点，它需要放置在`onResume()`应用程序中的每个活动中：

```
 // Check to see if we are in the process of closing activities
    if (SomeClass.IsClosingFlow){
        if (isActivityInFlow()){
            this.finish();  
        }
        else{
            // If we got here, and we're not in the flow anymore
            SomeClass.IsClosingFlow = false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:37:26.520

有很多不同的方法来管理这种应用程序流。一种可能对您有用且非常简单的方法是仅`startActivityForResult()`在您从一项活动调用到下一项活动时使用。然后，当您最终完成时，您只需设置结果并调用`finish()`. 然后，您可以在每个活动中实施`onActivityResult()`，以便它设置结果并`finish()`自行调用。通过这种方式，您可以将多个活动链接起来，然后链接回启动链接的人。

# inno-setup - Inno Setup 和 Windows UAC shield

> ID：14499039
> 
> 赞同：6
> 
> 时间：2013-01-24T10:26:00.237
> 
> 标签：inno-setup, uac

我陷入了一些 UAC 问题（我猜）。

我的问题是：某些应用程序上的这个 UAC Shield 图标是什么意思？我如何将这个图标添加到我的 Inno Setup 中`setup.exe`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T10:51:17.563

Inno Setup 安装程序默认需要管理员权限（如果不是由安装程序创建者自定义）。如果用户没有在 Windows 中更改 UAC 设置，将触发 UAC 弹出窗口。

[http://www.jrsoftware.org/ishelp/index.php?topic=setup_privilegesrequired](http://www.jrsoftware.org/ishelp/index.php?topic=setup_privilegesrequired)

`[Setup]`：`PrivilegesRequired`

有效值： `none`、`poweruser`、`admin`或`lowest`

默认值： `admin`

说明：此指令的效果取决于用户运行的 Windows 版本：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-16T07:53:56.853

正如其他人所说，*Inno Setup*默认需要管理员权限，并且会触发*UAC*提示。你可以用`PrivilegesRequired`. 这样做的问题是它没有在可执行文件上显示盾牌图标。

* * *

最好的方法是使用*Microsoft 的* *Manifest Tool*并更改嵌入在可执行文件中的清单。它通常包含在*Microsoft SDK中，可从**Microsoft*免费下载。安装后，*Manifest Tool*通常位于`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\bin\mt.exe`. 请注意，某些*SDK*不包含它。如果您不想安装*SDK* ，我还在[https://github.com/eladkarako/mt](https://github.com/eladkarako/mt)中找到了它。

 **   要从可执行文件中提取清单，请在命令行中执行：`"path to mt.exe" -inputresource:"path_filename.exe";#1 -out:"path_filename.exe.manifest"`
*   现在更改`asInvoker`为`requireAdministrator`in `path_filename.exe.manifest`（清单文件实际上是 XML，因此您可以使用文本编辑器对其进行编辑）
*   要将清单放入可执行文件中：`"path to mt.exe" -manifest "path_filename.exe.manifest" -outputresource:"path_filename.exe";1`

给你！无论如何，可执行文件现在都有盾牌图标！

* * *

还有另一种方法，它的用处要小得多。您可以在注册表中将可执行文件更改为以管理员身份运行（与右键单击它相同 --> 属性 --> 兼容性 --> 选中以管理员身份运行）。为此，创建一个字符串值，其名称设置为可执行文件的路径+文件名，并包含数据/文本`RUNASADMIN`；必须在以下位置创建价值：

*   `HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers`如果您想为当前用户更改它
*   `HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers`如果您想为所有用户更改它（这通常需要您具有管理员权限）

它的问题是，如果您移动可执行文件（您必须重新执行此操作）或将其交给其他人（他们必须这样做，或者必须运行一些工具来执行此操作），它不会继续存在. 这没有用。*

# sql - 表的内部连接取决于第一个表列中的值连接第二个或第三个表

> ID：14499040
> 
> 赞同：0
> 
> 时间：2013-01-24T10:26:02.717
> 
> 标签：sql, sql-server-2008

我有四张桌子`User,Destination,City and visited`

如下

```
declare  @user table
 (
   UserId int identity(1,1) not null ,
   UserName nvarchar(500)
 )

 insert into @user (UserName) values ('rahul')
 insert into @user (UserName) values ('nitin')
 insert into @user (UserName) values ('yunus')

 declare @destination table 
  (
    destCode nvarchar(50),
    destName nvarchar(500)
  )

  insert into @destination select 'SWDP','ranthambore national park '
  insert into @destination select 'BTP','ghana national park '

  declare @city table 
   (
     cityId int identity(1,1) not null, 
     cityname nvarchar(500)
   )

 insert into @city select 'jaipur'
 insert into @city select 'delhi'

 -- visited table in which user id with either destCode or cityId

 declare @visited table 
   (
     UserId int , 
     LocationFrom nvarchar(500),
     LocationTo nvarchar(500),
     LocType nvarchar(50)
   )

  insert into @visited select '1','BTP','1','city'
  insert into @visited select '1','1','SWDP','dest'

  insert into @visited select '2','1','2','city'

  insert into @visited select '3','2','SWDP','dest'
  insert into @visited select '3','SWDP','BTP','dest'

 select * from @user 

 select * from @destination

 select * from @city

 select * from @visited

  select * from @visited as v
   inner join @user as u ON v.UserId=u.UserId 
```

访问表中的位置类型列表示`LocationTo`类型。它的城市或位置。

**现在我想加入这些表，这样我就可以获得用户从哪个城市或目的地开始并去哪个城市和目的地的数据。**

预期结果如下图

![这仅适用于一位用户](../Images/01138827fd42bfd515fcb8b7c9be8cc8.png)

这仅适用于一个用户，但我需要所有用户都相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:26:06.190

我不确定我是否正确理解了您的表结构，但正如我所见，该表`@destination`既可以是起点也可以是终点？并且`LocType`唯一指定端点的类型（`LocationTo`in `@visited`）鉴于此，我认为您必须假设 in 中的数值`@Visited.LocationFrom`指定了 Id in`@city`

那么这个查询可能有用

```
 SELECT u.UserName,   
    CASE WHEN ISNUMERIC(v.LocationFrom) = 1 THEN (SELECT cityName FROM @city where cityId = cast(v.LocationFrom as int)) ELSE (SELECT destName FROM @destination where destCode = v.LocationFrom) END as LocationFrom,
    CASE WHEN ISNUMERIC(v.LocationTo) = 1 THEN (SELECT cityName FROM @city where cityId = cast(v.LocationTo as int)) ELSE (SELECT destName FROM @destination where destCode = v.LocationTo) END as LocationTo
    FROM @visited AS v
   inner join @user AS u ON v.UserId=u.UserId 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:34:24.293

这应该适合你：

```
;WITH Locations AS
   (SELECT
        CAST(CityID as nvarchar(50)) LocationId,
        CityName LocationName
    FROM
        @city
    UNION ALL
    SELECT
        DestCode,
        DestName
    FROM
        @destination)
    SELECT 
        Users.UserName,
        LocationsFrom.LocationName LocationFromName, 
        LocationsTo.LocationName LocationToName
    FROM 
        @visited Visited
        INNER JOIN Locations LocationsFrom ON LocationsFrom.LocationID = Visited.LocationFrom
        INNER JOIN Locations LocationsTo ON LocationsTo.LocationID = Visited.LocationTo
        INNER JOIN @user Users ON Visited.UserID = Users.UserID 
```

# ruby-on-rails - 在 Rails 中的视图上显示我们的状态下拉列表

> ID：14499042
> 
> 赞同：0
> 
> 时间：2013-01-24T10:26:02.420
> 
> 标签：ruby-on-rails

我已经实现了一个包含美国州列表的助手。请在此处查看：

[Rails 为州选择下拉菜单？](https://stackoverflow.com/questions/6400010/rails-select-drop-down-for-states)

现在我必须在视图文件上显示选定的美国州名。我怎样才能访问它？

只要它是一个下拉菜单，它就可以正常工作。

例如我的用户选择 `Maryland`，在数据库中插入的值是 `MD`。现在，我必须`Maryland`在视图页面上显示。

请注意，我只是在 ApplicationHelper 中创建了一个名为 us_states 的助手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:33:20.970

或许：

```
us_states.select{|v| v[1]=="WA"}.first[0] 
```

# macos - 使用 Intel HD 4000 在 Mac 上进行 Cuda 编程

> ID：14499043
> 
> 赞同：3
> 
> 时间：2013-01-24T10:26:04.610
> 
> 标签：macos, cuda, intel

我需要做什么才能在配备 Intel HD 4000 显卡的 Macbook Air 上进行 Cuda 编程？

设置虚拟机？购买外部 Nvidia 卡？有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T12:38:24.023

如果你有一个新的（-ish）Macbook Air，你也许可以使用这样的外部（NVidia）图形设备： [external Thunderbolt PCIe case](http://www.tomshardware.com/reviews/pci-express-graphics-thunderbolt,3263-2.html)

否则将无法在非 NVidia 硬件上运行 Cuda 程序（因为它是专有框架）

您还可以通过先将 Cuda 代码转换为 OpenCL 来运行 Cuda 代码（例如使用此框架：[Swan Framwork](http://gpgpu.org/2010/03/09/swan)）

# android - Android VideoView 同步两个视频

> ID：14499044
> 
> 赞同：2
> 
> 时间：2013-01-24T10:26:08.753
> 
> 标签：android, android-videoview

我正在开发一个 Android 应用程序，其中应该同时向用户显示两个视频并且它们应该同步。我通过使用以下算法实现了这一点：

```
int firstPercentage = (int)(100 * mVideoView1.getCurrentPosition() / (float)mVideoView1.getDuration());
int secondPercentage = (int)(100 * mVideoView2.getCurrentPosition() / (float)mVideoView2.getDuration());
if(mVideoView1.getBufferPercentage() < firstPercentage + 10 || 
    mVideoView2.getBufferPercentage() < secondPercentage + 10) {
        mVideoView1.pause();
        mVideoView2.pause();
}else{
        mVideoView1.start();
        mVideoView2.start();
} 
```

以上算法基本保证两者`VideoView`都有至少10%的缓冲视频数据要播放。但是，我的应用程序中有一个搜索栏和播放/暂停按钮。因此，上述解决方案不起作用，因为用户可以寻找尚未缓冲的位置。有人实现过这样的应用程序吗？有没有在Android上实现这一目标的好方法？

注意：视频是远程的，并且它们的大小不小。

# html - 在图像源名称后给出随机字符串时图像未显示

> ID：14499047
> 
> 赞同：0
> 
> 时间：2013-01-24T10:26:24.217
> 
> 标签：html, xhtml, html-parsing

对于图像，我将 src 属性指定为

```
src="http://www.somedomain.com:80/app/top_level_includes/images/logo.gif?65463454" 
```

但它没有得到任何图像。我给出这个随机数是为了避免缓存。还有一点注意：这里的图像路径域和我的站点域不同。

# html - 如何在表格单元格中添加三角形

> ID：14499048
> 
> 赞同：13
> 
> 时间：2013-01-24T10:26:27.343
> 
> 标签：html, css, css-tables

我需要在单元格中添加直角三角形。

![在此处输入图像描述](../Images/79b315126a4b1349f66c2beaa1615498.png)

这该怎么做？

我试图在跨度内添加跨度和图标，但它出错了

```
<span style="position: relative;float:right;top:-30px;">@Html.ImageContent("triangle_bonus.png", "")</span> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-24T10:51:19.060

使用**[CSS 三角形：](http://css-tricks.com/snippets/css/css-triangle/)**

你基本上有一个 0 高度，0 宽度的元素，并使用边框来构造三角形。因为边界之间的线（例如，顶部和左侧之间）是*对角线*，你可以用它创建漂亮的纯色三角形！

**[这是一个例子！](http://jsfiddle.net/Athk7/)**

### HTML：

```
<table border="1">
    <tr>
        <td class="note">Triangle!</td>
        <td>No Triangle!</td>
    </tr>
</table> 
```

### CSS：

```
td {
    padding: 20px;
}
.note {
    position: relative;
}
.note:after { /* Magic Happens Here!!! */
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    width: 0; 
    height: 0; 
    display: block;
    border-left: 20px solid transparent;
    border-bottom: 20px solid transparent;

    border-top: 20px solid #f00;
} /* </magic> */ 
```

## 好处：

*   **没有图片！**- 意思是，没有额外的要求。
*   **没有额外的标记！**- 意思是，你不会在你的 HTML 中乱扔无意义的标记。
*   **各种尺寸看起来都不错！**- 因为它在浏览器中呈现，所以它在任何尺寸和任何分辨率下看起来都很完美。

## 缺点：

*   **取决于伪元素**- 这意味着较低版本的 IE 不会显示三角形。如果它很关键，您可以稍微修改 CSS，并`<span>`在 HTML 中使用 a，而不是依赖`:after`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T11:53:23.527

通过谷歌找到了这个问题并遇到了问题，所以我会在这里添加这个，尽管原始帖子的年龄。

Madara 的答案适用于大多数浏览器，并且适用于所有浏览器中表格之外的任何地方。但正如评论中提到的，该示例在 Firefox 中不起作用。

Bugzilla 中有一张关于不在元素中工作的[旧票。](https://bugzilla.mozilla.org/show_bug.cgi?id=35168)`position:absolute;``<td>`

主要解决方案是添加一个内部`<div>`：

**HTML：**

```
<table border="1">
<tr>
    <td><div class="note">Triangle!</div></td>
    <td>No Triangle!</td>
</tr>
</table> 
```

**CSS：**

```
td .note {
    padding: 20px;
} 
```

[jsFiddle 示例](http://jsfiddle.net/wJR9t/2/)

我确实发现没有内部也可以实现，`<div>`但只有当它`<td>`是空的时，这可能无济于事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-04T14:31:05.203

在 div 中做单元格文本是个好主意。但如果你只是为 ARROW 而不是文本放置额外的 div。因为它在`td`给定宽度和高度并且文本保持在 TOP时会产生问题`padding-top:20px;`。

我找到了另一个解决方案并在所有主要浏览器上进行了测试（例如：IF 和 FF）

```
.arrow-right-1 {
  position: absolute;
  top: -1px;
  right: -5px;
  float: right;
  width: 0;
  height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-bottom: 10px solid red;
  transform: rotate(45deg);
}

td {
  border: solid 1px blue;
  width: 160px;
  height: 100px;
  /* padding: 0px !important; */
  /* vertical-align: top; */
  position: relative;
}
```

```
<table class="table">

  <tbody>
    <tr>
      <td>
        <div class="arrow-right-1"></div>you can increase or decrease the size of td's height or can put more text
      </td>

    </tr>

  </tbody>
</table>
```

# linux - 为什么 Bash 在定义函数时会返回带有 `'ash` 的错误？

> ID：14499052
> 
> 赞同：2
> 
> 时间：2013-01-24T10:26:45.547
> 
> 标签：linux, bash

我有一个 .bashrc 文件，它具有像这样的非常简单的功能

```
function module() {
    ....
} 
```

我在命令提示符下键入“bash”，并按预期执行 .bashrc，但出现错误：

```
'ash: /user/.bashrc: line 1: syntax error near unexpected token `{
'ash: /user/.bashrc: line 1: `function module() { 
```

我试过删除“功能”这个词，我也试过删除，`()`但这些都没有帮助。有人可以让我知道发生了什么吗？

我运行时的 Bash 版本`bash --version`是（我可以升级到最新版本，但只有模块让我指向最新的 bash，所以这个问题必须在这个 bash 中解决）

```
GNU bash, version 3.2.25(1)-release (x86_64-redhat-linux-gnu)
Copyright (C) 2005 Free Software Foundation, Inc. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T13:12:00.520

实际上我一直在使用 bash，但是 .bashrc 文件是使用 Windows CR 保存在 Windows 中的。一旦我运行了 dos2unix，它就可以正常工作了！

# installation - InstallInitialize 后的自定义操作以检查驱动器是否存在

> ID：14499056
> 
> 赞同：1
> 
> 时间：2013-01-24T10:27:00.293
> 
> 标签：installation, wix, wix3.5

我在 C# 中编写了一个自定义操作来检查驱动器是否存在，如下所示，我被困在两者之间。

```
 [CustomAction]
    public static ActionResult MySimpleAction(Session session)
    {        
        if (Directory.Exists("F:\\"))
        {
            return ActionResult.Success;
        }
        else
        {
            return ActionResult.Failure;
        }
    } 
```

在 wxs 文件中，我正在运行自定义操作，如下所示。

```
 <Binary Id="myAction" SourceFile="MyCustomAction.CA.dll" />
 <CustomAction Id="myActionId"
                  BinaryKey="myAction"
                  DllEntry="MySimpleAction"
                  Execute="immediate"
                  Return="check" />

<InstallExecuteSequence>
  <Custom Action="myActionId" After="InstallInitialize"  >  </Custom> 
</InstallExecuteSequence> 
```

如果我在有 F:\ 驱动器的目标机器上运行 msi，则安装成功，如果目标机器没有 F:\ 驱动器，则安装失败，我收到错误，因为“**安装向导因错误而提前结束.你的系统没有被修改过。** ”

我在这里要做的是，如果 F:\ 驱动器在目标计算机中可用（我的自定义操作成功），我想将我的根驱动器设置为 F:\，并且我想将应用程序安装在 F:\我的应用程序\Bin

```
 <Property Id="ROOTDRIVE"><![CDATA[F:\]]></Property>
     <Directory Id="TARGETDIR" Name="SourceDir">
       <Directory Id="INSTALLFOLDERLOCATION" Name="MyApp">
        <Directory Id="INSTALLLOCATION" Name="Bin"> 
```

如果 F:\ 驱动器在目标计算机中不可用（我的自定义操作失败），我想将我的根驱动器设置为 C:\，并且我想安装在 C:\MyApp\Bin

```
 <Property Id="ROOTDRIVE"><![CDATA[C:\]]></Property>
      <Directory Id="TARGETDIR" Name="SourceDir">
       <Directory Id="INSTALLFOLDERLOCATION" Name="MyApp">
        <Directory Id="INSTALLLOCATION" Name="Bin"> 
```

如何使用此自定义操作设置根驱动器属性？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:36:23.370

使用即时自定义操作时，您可以设置属性值，`session["PROPERTYNAME"]`以便在您的情况下可以`session["ROOTDRIVE"] = "F:\\";`在自定义操作中使用。

目前失败的原因是您从自定义操作中返回了失败消息，并且由于您指定`Return="check"`了 ，安装程序会检查返回值，如果自定义操作失败，则安装失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:08:27.480

我感谢**Christopher Painter**和**ChrisPatrick**帮助我！！！下面的代码使技巧起作用。

```
 [CustomAction]
    public static ActionResult MySimpleAction(Session session)
    {
        session.Log("DriveInfo Starts");
        DriveInfo[] drives = DriveInfo.GetDrives();
        foreach (DriveInfo d in drives)
        {
            if (d.Name.Contains("F") & d.IsReady == true & d.DriveType.ToString() == "Fixed")
            {                   
              session["TARGETDIR"] = "F:\\";                   
            }
            else
            {
                session["TARGETDIR"] = "C:\\";
                session.Log("No F:\\ Drive Found!!!!");                    
            }
        }
        session.Log("DriveInfo Ends");
        return ActionResult.Success; 
```

在 .wxs 文件中，

```
 <Binary Id="myAction" SourceFile="MyCustomAction.CA.dll" />

   <Directory Id="TARGETDIR" Name="SourceDir">
   <Directory Id="INSTALLFOLDERLOCATION" Name="MyApp">
    <Directory Id="INSTALLLOCATION" Name="Bin">

     <CustomAction Id="myActionId" BinaryKey="myAction" DllEntry="MySimpleAction" Execute="immediate" Return="check" />

      <InstallUISequence>
      <Custom Action="myActionId" Before="CostFinalize" > NOT Installed </Custom>      
      </InstallUISequence> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T01:34:30.367

你在正确的轨道上。这是我做的不同的事情。

1）我使用 DriveInfo 类来查看驱动器是否存在并且它的 DriveType Fixed。（不是 CDROM、USB 驱动器、网络……）

2) 自定义操作在 AppSearch 之后的 UI 和 Execute 序列中安排，并设置一个名为 InstallDirOverride 之类的属性。自定义操作始终返回 ActionResult.Success。

3）我使用 Set Property 自定义操作（wxs 元素）将 InstallDirOverride 分配给 INSTALLLOCATION （或 INSTALLDIR ... 无论您调用主目录），条件是 INSTALLLOCATION 还没有值，而 InstallDirOverride 确实有值和未安装。此自定义操作在 CostInitialize 之前在 UI 序列和 ExecuteSequence 中安排。

所有这一切的结果是一个默认为 C:\Program Files\My Company\My Product 的安装程序，但根据您的 C# 自定义操作中的业务规则将其行为更改为默认为其他内容。这使您可以灵活地为特定平台环境默认您想要的方式，但在您的平台缺少该资源时仍然可以向 Windows 标准投诉。

# java - 这是java内存泄漏吗

> ID：14499058
> 
> 赞同：7
> 
> 时间：2013-01-24T10:27:01.133
> 
> 标签：java, garbage-collection, jvm

更新：看起来这不是内存泄漏，有人会根据这个例子的扩展创建吗？
原始问题：假设我创建并启动了一个不会终止的线程，只要它还活着，线程就会创建一个对象和引用。请参阅以下代码。JVM 垃圾会收集`x`吗？这会被认为是内存泄漏吗？

```
public class MyRunnable implements Runnable{

    public void run(){
      X x = new X();
      while(true){}
   }
}

Thread t = new Thread(new MyRunnable());
t.start(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:29:55.157

线程永远不会终止，因此垃圾收集器永远不会释放`x`。但是，如果您从未真正使用过`x`它，它可能会被优化掉。如果你使用 x 这不可能是内存泄漏 - 你**使用**内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:31:30.863

`x`具有**方法范围**，并且在方法返回或您明确执行之前**不会**`x = null`被垃圾收集。不，这不会被视为泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:31:32.840

> jvm垃圾会收集x吗？

不，因为线程仍然保持对它的引用。

> 这会被认为是内存泄漏吗？

不是真正的泄漏，而是浪费内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:32:01.937

来自[维基](http://en.wikipedia.org/wiki/Memory_leak)

> 当对象存储在内存中但运行代码无法访问时，可能会发生内存泄漏。所以

```
would this be considered a memory leak? 
```

不，这不是内存泄漏。

```
Would jvm garbage collect x ? 
```

NO，因为线程永远不会结束。

# android - android中listview上的监听器

> ID：14499061
> 
> 赞同：-2
> 
> 时间：2013-01-24T10:27:09.650
> 
> 标签：android, listview, listener

```
 ListView lv=(ListView) findViewById(android.R.id.list);
         lv.setOnItemLongClickListener(new OnItemLongClickListener()//error:change to <listeners>
{
             public boolean onItemLongClick(AdapterView<?> arg0, View arg1,int row, long arg3) {

                //here is where i got the classCastException.
                String[] tmp = (String[]) arg0.getItemAtPosition(row);

                //tmp[0] ist the Text of the first TextView displayed by the  clicked ListItem 
                Toast.makeText(ReminderListActivity.this, tmp[0].toString(), Toast.LENGTH_SHORT).show();

                return true;
             }
         }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:36:57.857

你需要修复你的导入。
你可能导入了错误的类，现在 eclipse 认为你想要别的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:37:24.930

您应该使用以下侦听器：

> ```
> m_listView.setOnItemClickListener(new OnItemClickListener()
>     {
>         @Override
>         public void onItemClick(AdapterView<?> p_arg0, View p_arg1, int p_arg2, long p_arg3)
>         {
>             // TODO Auto-generated method stub
>         }
>     }); 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:30:09.930

改成`lv.setOnItemClickListener`

# asp.net - 未设置自定义控件属性

> ID：14499062
> 
> 赞同：0
> 
> 时间：2013-01-24T10:27:12.133
> 
> 标签：asp.net, properties, user-controls, nullreferenceexception

在自定义控件中，我将属性

```
[Bindable(true), Category("Appearance"), DefaultValue(""), Localizable(true), Description("")]
public string InitValue
{
   get { return ViewState["InitValue"].ToString(); }
   set { ViewState["InitValue"] = value; }
} 
```

当我将它包含在页面上并运行该页面时，我收到了`Object reference not set...`异常。它的鞋号是`get`上面的行号。

当我不设置属性时会发生这种情况，尽管我不希望需要该属性。

它是否被认为是使用的好选择

```
get { return ViewState["InitValue"]==null ? "" : ViewState["InitValue"].ToString(); } 
```

还是更好地将财产变成对象并`ToString()`在需要时使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:32:05.803

应该在返回之前检查值是否存在

```
public string InitValue
{
   get 
   { 
      if(ViewState["InitValue"] != null)
          return ViewState["InitValue"].ToString(); 

      return "default value here";
   }
   set { ViewState["InitValue"] = value; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:00:28.520

我一直处理的方式是：

```
public string InitValue
{
   get 
   { 
      if(ViewState["InitValue"] == null)
         ViewState["InitValue"] = [DEFAULT VALUE];          

      return ViewState["InitValue"].ToString(); 
   }
   set { ViewState["InitValue"] = value; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T03:14:37.093

您`get`正在`ToString()`对可空属性执行操作。处理它，你会没事的。在下面的代码中，我假设 "" 作为默认值。

```
get { (return ViewState["InitValue"] ?? string.Empty).ToString(); } 
```

# java - Spring中ApplicationContext.xml和属性文件的位置

> ID：14499072
> 
> 赞同：3
> 
> 时间：2013-01-24T10:27:42.957
> 
> 标签：java, spring, spring-mvc

在我的应用程序中，我已将`ApplicationContext xml`文件放在 src 中，并且项目运行良好。
我们可以将它`ApplicationContext.xml`放在我们的 WebContent 或 Web-Inf 文件夹中吗？

另外我想知道我是否可以将我的属性文件放在 WebContent 中。

因为我已经把我`ApplicationContext.xml`的 in `src`，我把我的属性文件放在了 src 中并且效果很好。下面是它的代码

```
<bean id="licenseSettings"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:LicenseSettings.properties" />
</bean> 
```

我尝试将属性文件放入`WebContent/conf`但未成功读取属性。

我的问题是，我们可以将 ApplicationContext.xml 和属性文件放在 WebContent 文件夹中的某个位置吗？

**更新**：我把我的 ApplicationContext.xml 放入`WEB-INF/classes`并使用它成功读取`ApplicationContext ctx = new ClassPathXmlApplicationContext("ApplicationContext.xml");`

我唯一没有回答的问题是，我应该把我的属性文件放在哪里，放在哪里合适？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T11:20:54.187

有**几种方法**可以做到这一点：

在 Spring MVC 中，您`dispatcher-servlet`提到`web.xml`如下

> ```
>  <servlet>
>           <servlet-name>mvc-dispatcher</servlet-name>
>             <servlet-class>
>                       org.springframework.web.servlet.DispatcherServlet
>             </servlet-class>
>             <load-on-startup>1</load-on-startup>
> </servlet> 
> ```

现在默认情况下会查找一个名为`mvc-dispatcher-servlet.xml`. 即 -servlet.xml 附加的 servlet 名称。它会在类路径中寻找这个文件。

**或者** *适合您的情况*，如果您已经有 xml 文件并且不想重命名它，**除了**上面的 servlet 条目之外，在 web.xml 中添加以下条目。

> ```
>  <context-param>
>     <param-name>contextConfigLocation</param-name>
>     <param-value>/WEB-INF/conf/ApplicationContext.xml</param-value>
>  </context-param 
> ```

在这里您可以选择 WEB-INF 中的任何位置。将属性文件放在类文件夹中，以便可以在类路径中找到它。由于您使用的是 Eclipse 嵌入式 Tomcat，请将以下内容作为属性占位符的 bean 配置。

> ```
>  <property name="location" value="classpath:../../conf/LicenseSettings.properties" /> 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:30:47.340

是的你可以。

如果您将文件直接放在应该可以工作的 WEB-INF 中。

如果要将它们放在名为的文件夹中`WEB-INF/conf`，则需要更改属性位置以引用`conf/LicenseSettings.properties`

# android - Android 如何重置 SCREEN_ALWAYS_ON？

> ID：14499076
> 
> 赞同：3
> 
> 时间：2013-01-24T10:27:53.413
> 
> 标签：android

```
public void screenTurnALWAYSON() {
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
} 
```

我有这个代码，这让屏幕始终亮着。当我不再需要这些设置时，如何重置它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:33:04.510

使用 clearFlags 方法，fe：

```
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:33:40.420

使用`WakeLocker.acquire(context);`和`WakeLocker.release();`。
你需要`<uses-permission android:name="android.permission.WAKE_LOCK" />`许可。

# java - 每当调用 fireTableCellUpdated 时，selectedRow 都会被清除

> ID：14499078
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:27:57.933
> 
> 标签：java, swing, jtable, tablecelleditor, listselectionlistener

我相信这是一个很常见的问题，当我调用 fireTableCellUpdated 时，我的 selectedRow 被清除了。我试着通过调用这个来保存我的行：

```
final int savedRow = mainTable.getSelectedRow();
...
if ( savedRow > 0 ) {
   mainTable.setRowSelectionInterval(savedRow, savedRow);
} 
```

它不起作用，因为 savedRow 总是返回 -1！

有谁知道如何防止我的 selectedRow 被清除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:29:52.987

一个简单的示例显示未清除选择`fireTableCellUpdated()`（由以下方式调用`DefaultTableModel#setValueAt()`：

```
import java.awt.EventQueue;
import java.awt.event.*;
import java.util.Random;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class TestTable {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                final DefaultTableModel model = new DefaultTableModel(3, 3);
                JTable table = new JTable(model);
                table.setRowSelectionInterval(1, 1);

                final Timer timer = new Timer(500, new ActionListener() {
                    private final Random random = new Random();
                    private int i;

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        model.setValueAt(i++, random.nextInt(3), random.nextInt(3));
                    }
                });
                timer.start();

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.addWindowListener(new WindowAdapter() {
                    @Override
                    public void windowClosed(WindowEvent e) {
                        timer.stop();
                    }
                });
                frame.getContentPane().add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:56:21.317

如果没有选择行，下面的语句将给出**-1 。**

```
final int savedRow = mainTable.getSelectedRow(); 
```

> 当我调用 fireTableCellUpdated 我的 selectedRow 被清除

调用 的原因是`fireXXXMethod`什么？如果表数据有任何变化，则应调用这些方法。但是在您的情况下，您并没有更改数据，而只是保存了表中的数据。所以这里没有必要。

PS：如需尽快帮助，请发布显示问题的代码。

# grails - 如何使用 GRAILS 从数据库下载 html 文件？

> ID：14499087
> 
> 赞同：0
> 
> 时间：2013-01-24T10:28:15.623
> 
> 标签：grails, download, httpresponse

我正在尝试使用 GRAILS 实现简单的向/从 DB 上传/下载文件的功能。除了 text/html 文件外，一切似乎都运行良好。

领域：

```
class Content {
    byte[] file;
    //filesProperties
    String contentType
    String fileName
    Long size

    static constraints = {
        file maxSize: 1024 * 1024 * 20, nullable: true; //20MB
        fileName nullable:true
        size nullable:true
        contentType nullable:true   
    }
} 
```

行动：

```
def getFile()
{
    def content = Content.get(params.id)
    response.contentType = content.contentType
    response.setHeader("Content-disposition","attachment;filename="+content.fileName)
    response.contentLength= content.size
    response.outputStream << content.file
    response.outputStream.flush()

} 
```

上传 html 文件后，数据库站点上的一切似乎都很好。简单的 SELECT 显示文件已经上传。当我尝试下载 html 文件时，我得到 Page not found（在 Chrome net::ERR_FILE_NOT_FOUND 中）。Action getFile() 适用于任何其他内容类型。

是否存在以这种方式强制下载（不在浏览器中显示）html文件的可能性？

顺便说一句：为什么显示它（在 Content-disposition 键中没有“附件”值的 response.header）也不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:43:20.443

您可以尝试强制下载：

```
response.setHeader("Content-Type: application/force-download"); 
```

# mercurial - 按日期排序 hg 状态

> ID：14499088
> 
> 赞同：1
> 
> 时间：2013-01-24T10:28:17.280
> 
> 标签：mercurial

我正在寻找一种方便的方法来对输出进行排序

```
hg status 
```

在顶部查看最新文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:01:07.847

这是一个可能的解决方案，仅适用于类似 Linux 的环境（我正在使用[MSYS](http://www.mingw.org/wiki/MSYS)在 Windows 中尝试）。您可以使用`ls`列出按时间排序的文件，并将输出传递给它`hg status`：

```
$ hg st
M modified.txt
A added.txt
R removed.txt
? unknown.txt

$ ls -t1 `hg st -n -a -m -u`
unknown.txt
modified.txt
added.txt 
```

使用此方法您会丢失`MAR?...`状态，但它会显示已更改、添加或未跟踪的文件，并按修改时间排序。但是，它确实有点依赖于您允许的参数`ls`。

实际上，您正在使用反引号 mercurial 命令向 提供文件名列表`ls`，这将为您进行排序。不要认为在 vanilla Windows 中有一种*简单*的方法可以做到这一点。可能通过使用`for`循环？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:00:31.937

首先，创建一个包含以下内容的文件：

```
 changeset = "{files}"
 file = "{file}\n" 
```

假设您将其命名为 sorted.txt 并将其放在您的主目录中。然后你可以给出这个命令：

```
 hg -q outgoing --style ~/sorted.txt | sort -u 
```

# php - 使用 PHP 将完整的 1-128 位十进制显示为二进制

> ID：14499091
> 
> 赞同：0
> 
> 时间：2013-01-24T10:28:23.543
> 
> 标签：php, binary

我知道这种接缝很容易，但是我对这种特殊情况有疑问。我已经知道如何使用 PHP 将十进制转换为二进制，但我想显示完整的位序列，但令人惊讶的是，我不知道如何。

转换必须是这样的：

```
converting 127(decimal) to binary using PHP = 1111111\. the bit sequence is 1-128 for every 
octet(IP Address) so this must output = 01111111 even 128 is not used.
2nd Example:
1(decimal) to binary = 01\. Want to display the full 1-128 binary sequence even if
128,64,32,16,8,4,2 is not used it must be like this 00000001 not 01. 
```

这是我的 PHP 代码：

```
<?php

        $octet1 = $_POST["oct1"];
        $octet2 = $_POST["oct2"];
        $octet3 = $_POST["oct3"];
        $octet4 = $_POST["oct4"];
        echo decbin($octet1) ," ", decbin($octet2) ," ", decbin($octet3) ," ", decbin($octet4);

    ?> 
```

这只显示缩短的二进制文件，如下所示：

```
16 to binary is 10000 or but i want to display this 00010000(Full length) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:33:52.153

如何使用[**`sprintf`**](http://php.net/manual/en/function.sprintf.php)格式**`b`**说明符：

```
echo sprintf("%08b", 127);
// 01111111
echo sprintf("%08b.%08b.%08b.%08b", 127, 0, 0, 1);
// 01111111.00000000.00000000.00000001 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:31:13.530

你需要填充它：

```
echo str_pad($str, 8, '0', STR_PAD_LEFT); 
```

# sql-server - 根据当前周、过去几周和未来几周的字段中的日期过滤列

> ID：14499094
> 
> 赞同：1
> 
> 时间：2013-01-24T10:28:30.630
> 
> 标签：sql-server, datetime, reporting-services, reportbuilder3.0

**示例表：**

(**列标题**) 每个人的总采访 --- (**行标题**) 要求采访

（**列标题**）本周的采访次数——（**行值**）计算本周安排的所有状态为：“已请求采访”的日期，例如 4

（**列标题**）下周的面试次数——（**行值**）计算下周安排的所有状态为：“已申请面试”的日期，例如 6

首先，我想对我的临时桌子表示歉意，因为我是新成员，所以我似乎不能使用图片。

我也是使用reportbuilder和sql的新手，并且一直试图弄清楚如何计算报告中某些日期范围之间的日期数量。

就像我在名为“本周采访次数”的临时字段中所说的那样，我希望根据日期字段计算本周、下周、前一周等安排的所有日期。然后，我计划分解这张表，显示一个人安排的所有采访。

我遇到的问题是会有很多日期跨越不同的月份/日期。因此，我不确定如何使用 DateDiff 或其他日期功能来表示这一点，因为该表旨在成为当前采访的实时表示。

我正在尝试使用报表生成器来做些什么吗？如果是这样，任何提示都会很棒，如果不是，那么感谢您花时间查看我的问题。

作为请求的数据集字段：

[UserName]（用户表）、[InterviewStatus]（面试表）、[DateUpdated]（面试表）

这些是将在报告中使用的主要内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:25:55.807

如果只想统计每个字段的列数，可以使用 sql 语句`COUNT()`查看[COUNT()](http://www.w3schools.com/sql/sql_func_count.asp)。

您可以像这样执行常见查询：

```
SELECT COUNT(fieldName1), COUNT(fieldName2), ... , COUNT(fieldNamen) FROM <tableName> 
```

还要尝试显示您的代码，以便您的问题更加清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:28:43.863

您可以在 where 子句中使用面试表中的通用 select 语句过滤当前周开始和下周结束之间的日期。

如果日期在当前周或下周内，则这两个字段的总和将为 1。

**编辑：** 下面的示例将给出本周内的日期数。取自[另一个问题](https://stackoverflow.com/a/2063817/1685810)：

```
Select InterviewStatus,
       Sum(Case when DateUpdated >= DATEADD(dd, -(DATEPART(dw, GETDATE()) -1), GETDATE())
                     AND DateUpdated < CAST(CONVERT(VARCHAR(10), DATEADD(dd, (8 - DATEPART(dw, GETDATE())), GETDATE()), 120) AS DATETIME)
                Then 1
                Else 0 end) 
          as NumberInCurrentWeek
From InterviewTable
Where DateUpdated >= DATEADD(dd, -(DATEPART(dw, GETDATE()) -1), GETDATE())
      AND DateUpdated < CAST(CONVERT(VARCHAR(10), DATEADD(dd, (8 - DATEPART(dw, GETDATE())), GETDATE()), 120) AS DATETIME)
Group by InterviewStatus 
```

这只需要根据您的具体情况进行调整。例如，将 8 更改为 7 将捕获当前两周。

然后根据查询生成一个简单的表。

# android - 尽管数据库中有行，但数据库查询返回 null 的计数

> ID：14499095
> 
> 赞同：0
> 
> 时间：2013-01-24T10:28:42.160
> 
> 标签：android, database, sqlite

尽管数据库中有记录，但数据库返回 null

```
 private static final String DATABASE_NAME="PlayGamesdb";
     private static final String DATABASE_TABLE="peopleTable";

   public int fetchPlacesCount() {
        int count = 0;
        //String[] columns = new String[] {KEY_ROWID, KEY_NAME, KEY_HITS };
        Cursor c = ourDatabase.rawQuery("SELECT COUNT(*) from DATABASE_TABLE", null);
        c.moveToFirst();
        count = c.getInt(0);    
        return count;
    } 
```

关于什么是错的任何想法？

```
01-24 19:30:23.050: E/AndroidRuntime(1761): FATAL EXCEPTION: main
01-24 19:30:23.050: E/AndroidRuntime(1761): java.lang.NullPointerException
01-24 19:30:23.050: E/AndroidRuntime(1761):     at com.example.dbsample.PlayGame.fetchPlacesCount(PlayGame.java:93)
01-24 19:30:23.050: E/AndroidRuntime(1761):     at com.example.dbsample.SQLiteExample.onClick(SQLiteExample.java:123)
01-24 19:30:23.050: E/AndroidRuntime(1761):     at android.view.View.performClick(View.java:3511) 
```

这是另一个类中用于调用 fetchPlacesCount 方法的 onclick

```
 case R.id.bSQLnumberofrows:
        int x = 0;
        PlayGame ec = new PlayGame(this);
        ec.open();
        x = ec.fetchPlacesCount();
        ec.close();
        sqlRow.setText(x);
        break; 
```

编辑：

解决问题后，下面的代码现在可以正常工作，并将正确的行数显示为 Toast 消息，因此现在解决了一个问题，还有一个问题要解决，但 setText 方法将数字放入 EditText 仍然出错。这就是我接下来要做的工作，看看这个 textView 有什么问题。

使用 Toast 消息是找出方法返回正确数字的好方法。

```
public int fetchPlacesCount() {
        int count = 0;
        Cursor q = ourDatabase.rawQuery("SELECT COUNT(*) from " + DATABASE_TABLE, null);
        q.moveToFirst();
       count = q.getInt(0);
        return count;
    } 
```

在另一个班级

```
 case R.id.bSQLnumberofrows:
        PlayGame ec = new PlayGame(this);
        ec.open();
        int x = ec.fetchPlacesCount();
        ec.close();
      //  sqlRow.setText(x);
        Toast.makeText(SQLiteExample.this, "value of x " + x , Toast.LENGTH_SHORT).show();
        break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:31:26.553

c.getCount() 将为您提供所需的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:34:32.957

我认为您应该返回`cont`变量，而不是`count`因为您没有为`count`变量分配任何值。

> ```
> int cont = c.getInt(0); 
>     return cont; 
> ```

**编辑：**

触发您的查询，如下所示：

> 光标 c = ourDatabase.rawQuery("SELECT COUNT(*) from " + DATABASE_TABLE, null);

# php - 使用 utf8_encode 和 utf8_decode 输出的神秘字符

> ID：14499097
> 
> 赞同：0
> 
> 时间：2013-01-24T10:28:51.677
> 
> 标签：php, codeigniter, utf-8, html-entities

我想打印从数据库中检索到的许多国家字符串，但每次使用时我都有一个神秘的字符：

```
utf8_encode($string); the out put is  (AlgÃ©rie ,  ArmÃ©nie ,AzerbaÃ¯djan ,BiÃ©lorussie )
utf8_decode($string); -> (Algérie , Arménie , Azerba?djan , Bi?lorussie )
htmlentities($string); -> (AlgÃ?Â©rie , ArmÃ?Â©nie ,AzerbaÃ¯djan, ... ) 
```

我试图放入标题：

```
header ("Content-Type:text/html;charset=ISO-8859-1"); ->ArmÃ©nie , Azerbaïdjan 
```

和

```
header ("Content-Type:text/html;charset=utf-8");  -> Azerba�djan 
```

我检查了我的数据库的配置，我发现

```
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_unicode_ci'; 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:34:33.540

当您在已经解码的字符串上使用 utf8_decode 之类的东西，或者对已经是 UTF8 的东西进行编码时，有时会发生这种情况。如果这就是您正在做的事情，请尝试不对开头的字符串进行编码/解码，然后查看输出是什么。

我自己在 CodeIgniter 中遇到了这个问题，解码已经解码的东西会使角色变得不稳定。

如果您要从数据库中提取数据，请检查那里的表/字段的排序规则。

# qt - 如何在 QTextEdit 中输入字符 CR（回车）？

> ID：14499098
> 
> 赞同：1
> 
> 时间：2013-01-24T10:28:52.240
> 
> 标签：qt

众所周知，QTextEdit可以用来输入字符。用户输入的字符可以通过 QTextEdit::toPlainText() 获取。我的应用程序需要用户在 QTextEdit 中输入字符 CR（回车）。字符 CR 可以输入到 QTextEdit 中吗？如果可以，如何输入？以及如何从 QTextEdit 中获取它？QTextEdit::toPlainText() 有效吗？

顺便说一句，我的应用程序可以通过 QTextEdit::toPlainText() 从 QTextEdit 获取字符 LF(Line Feed)。在 MFC 的 CEdit(Edit Control) 中按 ctrl+M 可以输入字符 CR，但它不适用于 QTextEdit。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:33:34.900

我认为用户不能同时输入 LF 和 CR 字符。当用户按下时取决于操作系统，然后生成 LF 或 CR 或 CR LF。

# regex - 测试 vim 正则表达式的最简单方法？

> ID：14499107
> 
> 赞同：11
> 
> 时间：2013-01-24T10:29:09.260
> 
> 标签：regex, vim, vim-plugin

我正在尝试编写一个 vim 语法文件，我正在处理的一个问题是 vim 的正则表达式语法与大多数其他语言不同（我认为称为“perl 兼容正则表达式”、Python、JavaScript 等的语言大多使用相同的正则表达式语法），所以我不能使用像正则表达式这样的正则表达式测试器。

尝试 vim 正则表达式的最简单方法是什么？理想情况下，我想要的是两个拆分，一个我会写 vim 正则表达式，另一个会有文本，匹配的部分应该突出显示。

提前致谢。

编辑：我添加了 Ingo Karkat 对我的回答的修改版本`.vimrc`：

```
nnoremap <F5> mryi":let @/ = @"<CR>`r 
```

这个版本还把光标放回到按 F5 时失去标记的位置`r`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T10:38:56.600

在 Vim 中执行此操作。对于语法文件，你经常处理一些`start="^begin"`东西。通过 拉取正则表达式`yi"`，然后通过以下方式突出显示它：

```
:let @/ = @" 
```

当然，如果您经常需要它，请将其绑定到映射（并且`:set hlsearch)`，例如：

```
:nnoremap <F5> yi":let @/ = @"<CR> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T10:31:48.753

用于`vim`测试正则表达式。通过输入`/`，`vim`您可以搜索东西，搜索使用正则表达式。

有关语法的帮助，请查看[vimregex](http://vimregex.com/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T13:52:49.320

我们可以在 Ex 模式或搜索模式下访问 Vim 的寄存器，方法是按`Ctrl+R`，然后按要粘贴的寄存器。

在您的情况下，我们可以使用它来复制我们要测试的文本，然后将其粘贴到我们的搜索中。

`y``i``"``/``Ctrl+R``0``CR`

解释：

`y``i``"`-> 在双引号内抽出`"`
`/`-> 打开搜索字段
`Ctrl+R``0`-> 粘贴最后一个抽出的文本

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-17T22:24:48.783

你也可以试试[RegExr](http://regexr.com/) ，它是学习 RegEx 并实时试用的好工具。

# swing - jScrollPane 保持捕捉到底部

> ID：14499112
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:29:25.790
> 
> 标签：swing, jscrollpane, jtextarea

我试图从数据库中检索数据并使用带有 scrollPane 的 textArea 进行显示。这是我的代码：

```
public class eForumThreadContent {

private JFrame jFrame = null; // @jve:decl-index=0:visual-constraint="74,36"
private JPanel jContentPane = null;
private JLabel jLoginLink = null;
private JTextField jTextField_search = null;
private JButton jButtonSearch = null;
private JLabel jLabel_sessionborder = null;
private JButton jButton_home = null;
private JLabel jLabel_searchBackgroundColor = null;
private JButton jButton_signOut = null;
private JButton jButton_postNewThread = null;
private JButton jButton_back = null;
private JLabel jLabel_replyBy = null;
private JLabel jLabel_username = null;
private JLabel jLabel_reply = null;
private JTextArea jTextArea_reply = null;
private JButton jButton_postReply = null;
private JTable jTableComment = null;
private JScrollPane jScrollPaneComment = null;
private JButton jButton_bookmark = null;
private JButton jButton_myAcc = null;
private  String userName; // @jve:decl-index=0:
DBController db = new DBController();  //  @jve:decl-index=0:
private  int topicId;
private JLabel jLabel_topicTitle = null;
private JLabel jLabel_topicBy = null;
private JLabel jLabel_separator = null;
private JLabel jLabel_title = null;
private JScrollPane jScrollPane_areaScrollPane = null;
private JTextArea jTextArea_content = null;
private JScrollPane jScrollPane_descContent = null;
/**
 * This method initializes jFrame
 * 
 * @return javax.swing.JFrame
 */
JFrame getJFrame() {
    if (jFrame == null) {
        jFrame = new JFrame();
        jFrame.setSize(new Dimension(946, 762));
        jFrame.setContentPane(getJContentPane());
        jFrame.setTitle("eForum");
    }
    return jFrame;
}

/**
 * This method initializes jContentPane
 * 
 * @return javax.swing.JPanel
 */
private JPanel getJContentPane() {
    if (jContentPane == null) {
        jLabel_title = new JLabel();
        jLabel_title.setBounds(new Rectangle(75, 167, 77, 51));
        jLabel_title.setFont(new Font("Dialog", Font.PLAIN, 24));
        jLabel_title.setHorizontalAlignment(SwingConstants.LEFT);
        jLabel_title.setText("Title : ");
        jLabel_separator = new JLabel();
        jLabel_separator.setBounds(new Rectangle(73, 278, 784, 8));
        jLabel_separator.setBackground(new Color(102,102,102));
        jLabel_separator.setOpaque(true);
        jLabel_topicBy = new JLabel();
        jLabel_topicBy.setBounds(new Rectangle(761, 217, 175, 41));
        jLabel_topicBy.setFont(new Font("Dialog", Font.PLAIN, 18));
        jLabel_topicTitle = new JLabel();
        jLabel_topicTitle.setBounds(new Rectangle(161, 167, 757, 50));
        jLabel_topicTitle.setFont(new Font("Dialog", Font.PLAIN, 24));
        jLabel_reply = new JLabel();
        jLabel_reply.setBounds(new Rectangle(106, 528, 132, 37));
        jLabel_reply.setFont(new Font("Dialog", Font.PLAIN, 24));
        jLabel_reply.setText("Comment");
        jLabel_username = new JLabel();
        jLabel_username.setBounds(new Rectangle(256, 483, 315, 32));
        jLabel_username.setFont(new Font("Dialog", Font.PLAIN, 24));
        jLabel_username.setText(userName);
        jLabel_replyBy = new JLabel();
        jLabel_replyBy.setBounds(new Rectangle(106, 481, 137, 38));
        jLabel_replyBy.setFont(new Font("Dialog", Font.PLAIN, 24));
        jLabel_replyBy.setText("Reply by");
        jLabel_searchBackgroundColor = new JLabel();
        jLabel_searchBackgroundColor
                .setBounds(new Rectangle(2, 64, 930, 44));
        jLabel_searchBackgroundColor
                .setBackground(new Color(102, 102, 102));
        jLabel_searchBackgroundColor.setOpaque(true);
        jLabel_sessionborder = new JLabel();
        jLabel_sessionborder.setBounds(new Rectangle(-1, 40, 930, 25));
        jLabel_sessionborder.setBorder(BorderFactory.createMatteBorder(0,
                0, 1, 0, Color.black));
        jLabel_sessionborder.setText("");
        jLoginLink = new JLabel();
        jLoginLink.setBounds(new Rectangle(34, 34, 259, 25));
        jLoginLink.setBorder(BorderFactory.createMatteBorder(0, 0, 0, 0,
                Color.black));
        jLoginLink.setFont(new Font("Dialog", Font.PLAIN, 24));
        jLoginLink.setText("Logged in as " + userName);
        jContentPane = new JPanel();
        jContentPane.setLayout(null);
        jContentPane.setBackground(Color.white);
        jContentPane.add(jLoginLink, null);
        jContentPane.add(getJTextField_search(), null);
        jContentPane.add(getJButtonSearch(), null);
        jContentPane.add(jLabel_sessionborder, null);
        jContentPane.add(getJButton_home(), null);
        jContentPane.add(jLabel_searchBackgroundColor, null);
        jContentPane.add(getJButton_signOut(), null);
        jContentPane.add(getJButton_postNewThread(), null);
        jContentPane.add(getJButton_back(), null);
        jContentPane.add(jLabel_replyBy, null);
        jContentPane.add(jLabel_username, null);
        jContentPane.add(jLabel_reply, null);
        jContentPane.add(getJTextArea_reply(), null);
        jContentPane.add(getJButton_postReply(), null);
        jContentPane.add(getJScrollPaneComment(), null);
        jContentPane.add(getJButton_bookmark(), null);
        jContentPane.add(getJButton_myAcc(), null);
        jContentPane.add(jLabel_topicTitle, null);
        jContentPane.add(jLabel_topicBy, null);
        jContentPane.add(jLabel_separator, null);
        jContentPane.add(jLabel_title, null);
        jContentPane.add(getJScrollPane_areaScrollPane(), null);
        jContentPane.add(getJTextArea_content(), null);
        jContentPane.add(getJScrollPane_descContent(), null);
        SetUpTopicDetails();
    }
    return jContentPane;
}

/**
 * This constructor take in the userName from eForumLogin page. The username
 * will be display in jLoginLink.
 * 
 * @param userName
 */
public eForumThreadContent(String userName, int topicId) {
    this.userName = userName;
    this.topicId = topicId;

}

/**
 * This method initializes jTextField_search
 * 
 * @return javax.swing.JTextField
 */
private JTextField getJTextField_search() {
    if (jTextField_search == null) {
        jTextField_search = new JTextField(50);
        jTextField_search.setDocument (new JTextFieldLimit(50));
        jTextField_search.setBounds(new Rectangle(500, 75, 285, 29));
        jTextField_search.setFont(new Font("Dialog", Font.PLAIN, 24));
    }
    return jTextField_search;
}

/**
 * This method initializes jButtonSearch submitSearch is called when this
 * button is on click.
 * 
 * @return javax.swing.JButton
 */
private JButton getJButtonSearch() {
    if (jButtonSearch == null) {
        jButtonSearch = new JButton();
        jButtonSearch.setBounds(new Rectangle(797, 73, 114, 28));
        jButtonSearch.setFont(new Font("Dialog", Font.PLAIN, 24));
        jButtonSearch.setText("Search");
        jButtonSearch
                .addActionListener(new java.awt.event.ActionListener() {
                    public void actionPerformed(java.awt.event.ActionEvent e) {
                        submitSearch(e);
                    }
                });
    }
    return jButtonSearch;
}

public void submitSearch(ActionEvent e) {
    String search = jTextField_search.getText();
    if (search.equals("")) {
        JOptionPane.showMessageDialog(null,
                "Please enter keyword to search");
    } else {
        eForumSearch searchResult = new eForumSearch(userName, search);
        if (searchResult.searchKeyword() == true) {
            getJFrame().dispose();
            eForumSearchResult myWindow = new eForumSearchResult(userName,
                    search);
            myWindow.getJFrame().setVisible(true);
        } else {
            JOptionPane.showMessageDialog(null, "No results found");
        }
    }
}

/**
 * This method initializes jButton_home
 * 
 * @return javax.swing.JButton
 */
private JButton getJButton_home() {
    if (jButton_home == null) {
        jButton_home = new JButton();
        jButton_home.setBounds(new Rectangle(819, 2, 94, 60));
        jButton_home.setBackground(Color.white);
        jButton_home.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
        jButton_home.setIcon(new ImageIcon(getClass().getResource(
                "/Home.png")));
        jButton_home
        .addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent e) {
                getJFrame().dispose();
                kioskHomepage myWindow = new kioskHomepage();
                myWindow.getJFrame().setVisible(true);
            }
        });
    }
    return jButton_home;
}

private JButton getJButton_signOut() {
    if (jButton_signOut == null) {
        jButton_signOut = new JButton();
        jButton_signOut.setBounds(new Rectangle(297, 35, 139, 24));
        jButton_signOut.setText("Sign out");
        jButton_signOut.setBorderPainted(false);
        jButton_signOut.setOpaque(false);
        jButton_signOut.setHorizontalAlignment(SwingConstants.LEFT);
        jButton_signOut.setFont(new Font("Dialog", Font.PLAIN, 24));
        jButton_signOut.setBackground(Color.lightGray);
        jButton_signOut
                .addActionListener(new java.awt.event.ActionListener() {
                    public void actionPerformed(java.awt.event.ActionEvent e) {
                        getJFrame().dispose();
                        eForumSignOut myWindow = new eForumSignOut(userName);
                        myWindow.getJFrame().setVisible(true);

                    }
                });
    }
    return jButton_signOut;
}

private JButton getJButton_postNewThread() {
    if (jButton_postNewThread == null) {
        jButton_postNewThread = new JButton();
        jButton_postNewThread.setBounds(new Rectangle(682, 118, 230, 36));
        jButton_postNewThread.setFont(new Font("Dialog", Font.PLAIN, 24));
        jButton_postNewThread.setText("Post New Thread");
        jButton_postNewThread
                .addActionListener(new java.awt.event.ActionListener() {
                    public void actionPerformed(java.awt.event.ActionEvent e) {
                        getJFrame().dispose();
                        eForumPostThread myWindow = new eForumPostThread(
                                userName);
                        myWindow.getJFrame().setVisible(true);
                    }
                });
    }
    return jButton_postNewThread;
}

public void SetUpTopicDetails() {
    db.setUp("IT Innovation Project");
    String sql = "Select topic_title,topic_description,topic_by from forumTopics WHERE topic_id = "
            + topicId + "";
    ResultSet resultSet = null;
    resultSet = db.readRequest(sql);
    try {
        while (resultSet.next()) {
            jLabel_topicTitle.setText(resultSet.getString("topic_title"));
            jTextArea_content.setText(resultSet.getString("topic_description"));
            jLabel_topicBy.setText(resultSet.getString("topic_by"));
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }
}

private JButton getJButton_back() {
    if (jButton_back == null) {
        jButton_back = new JButton();
        jButton_back.setBounds(new Rectangle(735, 679, 166, 36));
        jButton_back.setText("Back");
        jButton_back.setFont(new Font("Dialog", Font.PLAIN, 24));
        jButton_back.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent e) {
                getJFrame().dispose();
                eForumMainpage myWindow = new eForumMainpage(userName);
                myWindow.getJFrame().setVisible(true);
            }
        });
    }
    return jButton_back;
}

/**
 * This method initializes jTextArea_reply
 * 
 * @return javax.swing.JTextArea
 */
private JTextArea getJTextArea_reply() {
    if (jTextArea_reply == null) {
        jTextArea_reply = new JTextArea();
        jTextArea_reply.setBounds(new Rectangle(256, 525, 573, 130));
        jTextArea_reply.setFont(new Font("Dialog", Font.PLAIN, 24));
        jTextArea_reply.setLineWrap(true);
    }
    return jTextArea_reply;
}

private JButton getJButton_postReply() {
    if (jButton_postReply == null) {
        jButton_postReply = new JButton();
        jButton_postReply.setBounds(new Rectangle(567, 678, 155, 36));
        jButton_postReply.setFont(new Font("Dialog", Font.PLAIN, 24));
        jButton_postReply.setText("Post reply");
        jButton_postReply
                .addActionListener(new java.awt.event.ActionListener() {
                    public void actionPerformed(java.awt.event.ActionEvent e) {
                        submitReply(e);
                    }
                });
    }
    return jButton_postReply;
}

public void submitReply(ActionEvent e) {
    String replyBy = userName;
    String reply = jTextArea_reply.getText();
    if (reply.equals("")) {
        JOptionPane.showMessageDialog(null, "Comment cannot leave blank");
    } else {
        eForumTopics comment = new eForumTopics(replyBy, reply);
        if (comment.createComment() == true) {
            JOptionPane
                    .showMessageDialog(null,
                            "Reply submitted successfully.");
            SetUpJTableComment();
            jTextArea_reply.setText("");
        }
    }

}

private JTable getJTableComment() {
    String header[] = { "Comment", "Reply By" };
    if (jTableComment == null) {
    DefaultTableModel tableModel1 = (DefaultTableModel) jTableComment
            .getModel();
    tableModel1.setColumnIdentifiers(header);

    jTableComment.getColumnModel().getColumn(0).setMinWidth(685);
    jTableComment.getColumnModel().getColumn(0).setMaxWidth(750);

    jTableComment.getColumnModel().getColumn(1).setMinWidth(97);
    jTableComment.getColumnModel().getColumn(1).setMaxWidth(100);

    return jTableComment;
}

public void SetUpJTableComment() {
    DefaultTableModel tableModel1 = (DefaultTableModel) jTableComment
            .getModel();
    String[] data = new String[3];
    db.setUp("IT Innovation Project");
    String sql = "Select reply_content,reply_by from forumReplies WHERE reply_topic = "
            + topicId + "";
    ResultSet resultSet = null;
    resultSet = db.readRequest(sql);
    tableModel1.getDataVector().removeAllElements();

    try {
        while (resultSet.next()) {
            data[0] = resultSet.getString("reply_content");
            data[1] = resultSet.getString("reply_by");
            tableModel1.addRow(data);
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }
}

private JScrollPane getJScrollPaneComment() {
    if (jScrollPaneComment == null) {
        jScrollPaneComment = new JScrollPane();
        jScrollPaneComment.setBounds(new Rectangle(75, 290, 785, 175));
        jScrollPaneComment.setBorder(BorderFactory.createEmptyBorder());
        jScrollPaneComment.setViewportView(getJTableComment());
    }
    SetUpJTableComment();
    return jScrollPaneComment;
}

private JButton getJButton_bookmark() {
    if (jButton_bookmark == null) {
        jButton_bookmark = new JButton();
        jButton_bookmark.setBounds(new Rectangle(487, 119, 186, 36));
        jButton_bookmark.setFont(new Font("Dialog", Font.PLAIN, 24));
        jButton_bookmark.setText("Bookmark");
        jButton_bookmark
                .addActionListener(new java.awt.event.ActionListener() {
                    public void actionPerformed(java.awt.event.ActionEvent e) {
                        submitBookmark(e);
                    }
                });
    }
    return jButton_bookmark;
}

public void submitBookmark(ActionEvent e) {
    String bookmarkBy = userName;
    eForumTopics bookmark = new eForumTopics(bookmarkBy);
    if (bookmark.bookmarkThread() == true) {
        JOptionPane.showMessageDialog(null, "Thread has been bookmarked.");
    }
}

private JButton getJButton_myAcc() {
    if (jButton_myAcc == null) {
        jButton_myAcc = new JButton();
        jButton_myAcc.setBounds(new Rectangle(427, 27, 175, 41));
        jButton_myAcc.setText("My account");
        jButton_myAcc.setBorderPainted(false);
        jButton_myAcc.setOpaque(false);
        jButton_myAcc.setHorizontalAlignment(SwingConstants.LEFT);
        jButton_myAcc.setFont(new Font("Dialog", Font.PLAIN, 24));
        jButton_myAcc.setBackground(Color.lightGray);
        jButton_myAcc
                .addActionListener(new java.awt.event.ActionListener() {
                    public void actionPerformed(java.awt.event.ActionEvent e) {
                        getJFrame().dispose();
                        eForumMyAcc myWindow = new eForumMyAcc(userName);
                        myWindow.getJFrame().setVisible(true);
                    }
                });
    }
    return jButton_myAcc;
}

private JScrollPane getJScrollPane_areaScrollPane() {
    if (jScrollPane_areaScrollPane == null) {
        jScrollPane_areaScrollPane = new JScrollPane(jTextArea_reply);
        jScrollPane_areaScrollPane.setBounds(new Rectangle(257, 527, 598, 125));

    }
    return jScrollPane_areaScrollPane;
}

/**
 * This method initializes jTextArea_content    
 *  
 * @return javax.swing.JTextArea    
 */
private JTextArea getJTextArea_content() {
    if (jTextArea_content == null) {
        jTextArea_content = new JTextArea();
        jTextArea_content.setBounds(new Rectangle(75, 224, 678, 47));
    return jTextArea_content;
}

/**
 * This method initializes jScrollPane_descContent  
 *  
 * @return javax.swing.JScrollPane  
 */
private JScrollPane getJScrollPane_descContent() {
    if (jScrollPane_descContent == null) {
        jScrollPane_descContent = new JScrollPane(jTextArea_content);
        jScrollPane_descContent.setBounds(new Rectangle(75, 224, 660, 47));
    }
    return jScrollPane_descContent;
} 
```

}

但是，滚动条会一直捕捉到 textArea 的底部，而不是 textArea 的前几行。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:39:22.753

> 这就是我所有的代码。没有其他的。其余代码与此无关。

然而，当我使用您迄今为止提供给我们的代码运行我的[SSCCE时，它就像一个魅力：](http://sscce.org)

```
import java.awt.Rectangle;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class TestTextArea3 {

    private static final String TEXT = "This \r\n" + "    Is\r\n" + "    A\r\n" + "    Testing\r\n" + "    To\r\n" + "    Test\r\n"
            + "    ScrollPane.";

    private JTextArea jTextArea_content;
    private JScrollPane jScrollPane_descContent;

    private void initUI() {
        JFrame frame = new JFrame(TestTextArea3.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        getJTextArea_content().setText(TEXT);
        frame.add(getJScrollPane_descContent());
        frame.pack();
        frame.setVisible(true);
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                getJTextArea_content().scrollRectToVisible(new Rectangle());
            }
        });
    }

    private JTextArea getJTextArea_content() {
        if (jTextArea_content == null) {
            // Changed the number of rows so activate scrolling
            jTextArea_content = new JTextArea(3, 30);
            jTextArea_content.setBounds(new Rectangle(75, 224, 678, 47));
        }
        return jTextArea_content;
    }

    private JScrollPane getJScrollPane_descContent() {
        if (jScrollPane_descContent == null) {
            jScrollPane_descContent = new JScrollPane(getJTextArea_content());
            jScrollPane_descContent.setBounds(new Rectangle(75, 224, 660, 47));
        }
        return jScrollPane_descContent;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestTextArea3().initUI();
            }
        });
    }

} 
```

# wpf - 在 MVVM 中为 WPF 使用 specflow

> ID：14499114
> 
> 赞同：4
> 
> 时间：2013-01-24T10:29:30.337
> 
> 标签：wpf, mvvm, specflow

我第一次尝试使用 MVVM 模式的 WPF 项目的 specflow。所以，我有存储库、控制器、视图和视图模型。存储库调用 web 服务，它访问数据库并返回数据。视图模型具有验证用户输入和调用存储库方法的方法。

在我的规范流程中，我应该进行完整的调用，包括存储库方法，还是应该使用 Moq 模拟这些方法？是否有意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:59:39.947

*简短的回答：* 你可以让你的电话打到数据库，但我建议你把它们模拟出来，除非你的数据库中有逻辑

*长答案：* 有两种相互竞争的方式来看待这个问题。首先，您希望使用 SpecFlow 进行什么样的测试，其次，访问您的数据库有多容易。

如果您使用 SpecFlow 来测试您的低级技术要求，那么您实际上是在*按示例*样式以规范进行**单元测试。**所以这真的应该决定你使用模拟来隔离你的单位。（我个人会坚持使用 NUnit 进行这些测试。）

 *然而，如果您使用 SpecFlow 来测试您的业务场景（即*验收测试*），那么您的场景依赖于多个单元来提供功能。这更像是集成或系统测试，需要涉及很多组件，理论上因为我们正在测试整个系统，我们应该在其中包含一个数据库，特别是如果您甚至有一个您可能想要的存储过程或视图稍后进行回归测试。

然而，第二种看待这个问题的方法是，拥有一个可用于测试的数据库需要付出多大的努力。

*   如果您的开发团队中有不止一个人，如果同时运行测试，您需要哪些策略来避免失败？
    *   例如，您可以在每次运行中生成一个新的唯一客户，并且只访问针对该客户的更新和查询，那么您最终不会得到错误数量的订单。
*   测试运行后如何重置数据库？
    *   例如，如果您使用正确类型的数据库，您可以将一个空的 .mdb 检查到您的源代码控制中，然后回滚/恢复到那个。

我个人发现，对于没有存储过程和视图的简单数据库，模拟更好，但是一旦您将业务逻辑添加到数据库中，您就需要以某种方式测试该逻辑。*

# python - 如何编写以给定数字开头的正则表达式？

> ID：14499115
> 
> 赞同：0
> 
> 时间：2013-01-24T10:29:31.957
> 
> 标签：python, regex

我想编写一个程序来检查是否以给定数字开头的字符串。假设我们有一个字符串：`line = "5p.m. its a lovely time for tea!"`然后我从用户那里读取了一个数字：`num = raw_input()`并想检查我的行是否以用户传递的数字开头。

我想做类似的事情（这里可能有一些错误）：

```
s = compile(r"^[\<%\>]", num)
m = s.search(line) 
```

或者

```
s = compile(r"^[\<%\>]", num)
m = s.search(line) 
```

当用户通过 5 时，它会在行以 5 开头时打印“OK”或类似的东西，或者当我的行以不同的数字开头时打印“Its not OK”。我是整个正则表达式的新手，请帮忙:) 我接受 C++ 和 Python 的代码；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:31:48.137

正则表达式是矫枉过正：

```
line = '5p.m. its a lovely time for tea!'
num = raw_input()  # integer input
if line.startswith(num):
    print 'OK'
else:
    print 'It\'s not OK' 
```

如果你需要使用`regex`，你可以这样做：

```
if re.search('^%s' %num, line):  # checks if there is a match
    print 'OK'
else:
    print 'It\'s not OK' 
```

这样做的原因是，如果有匹配，`re.search`将返回一个`_sre.SRE_Match object`将`True`在布尔上下文中评估的结果。如果没有匹配，它将返回`None`will evaluates to `False`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:43:12.557

我不知道 c++ 和 python 编码，但你想要的正则表达式只是

```
^(\d).* 
```

您可以使用[http://regexpal.com/](http://regexpal.com/)检查结果

PS。抱歉，我尝试发布图片，但他们不允许点击链接查看 [http://i.stack.imgur.com/qwBjJ.png](http://i.stack.imgur.com/qwBjJ.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T10:37:06.163

```
import re
number = 5
line = "5p.m. its a lovely time for tea!"
s = compile("^%d" % num)
m = s.search(line)

if m:
  print "time for tea" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T13:25:50.770

我会回应上面的回应：正则表达式对于这个问题来说太过分了。如上所述使用startswith。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T11:01:12.867

```
import re

line = "5p.m. its a lovely time for tea!"

match_obj = re.search('^([0-9]+).*', line)

num = raw_input()

if num == match_obj.groups()[0]:

    print "OK"

else:

    print r"It's not ok" 
```

# macos - 从桌面应用程序购买 iTunes 内容

> ID：14499120
> 
> 赞同：0
> 
> 时间：2013-01-24T10:29:42.127
> 
> 标签：macos, itunes, affiliate

我有一个在 OS X 和 Windows 上运行的桌面应用程序。我希望用户能够从应用程序内购买 iTunes 内容，并且我希望通过联盟计划赚取收入。

这是否允许，如果允许，我该怎么做？该[文档](http://www.apple.com/itunes/affiliates/resources/documentation/linking-to-the-itunes-music-store.html#apps)指出：

> 在应用程序中使用联属网络营销计划是完全可以接受的，实际上是对应用程序开发人员的鼓励行为。

但尚不清楚这是否仅适用于 iOS 应用程序或桌面应用程序。此外，我不知道如何在实践中将其拉出：看来我应该打开某个 URL*。我相信在 iOS 上，这被拦截了，用户被带到了 App Store。在 OS X（或 Windows）上，这似乎会在打开 iTunes 之前闪烁浏览器窗口，我想避免这种情况。我想用购买选项直接打开 iTunes。还是我必须在我的应用程序中嵌入浏览器框架并使用某种网络界面？

* * *

*) 有一些重定向，我可以通过['short links'](http://www.apple.com/itunes/affiliates/resources/documentation/linking-to-the-itunes-music-store.html#shortlinks)改善用户体验，或者在后台[手动处理重定向](https://developer.apple.com/library/ios/#qa/qa2008/qa1629.html)，但最后总是有一个`openURL`电话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:32:40.040

www.apple.com/itunes/affiliates/

该程序适用于大多数内容类型，链接可以在网站上或应用程序内。基本上任何 iTunes 商店是： Mac：iTunes 和 Mac App Store。在 iOS 上：应用商店、iTunes 商店和 iBookstore。并赢得：iTunes 商店。

# opengl-es - 纹理图集平铺

> ID：14499121
> 
> 赞同：1
> 
> 时间：2013-01-24T10:29:44.690
> 
> 标签：opengl-es, glsl, texture-mapping, tiling, glsles

我正在尝试在 ios opengl es 2.0 (ipad) 上进行简单的纹理喷溅。我在 pvrt 压缩图集（2x2 瓷砖）中有 4 个平铺纹理。4 个纹理单元上的 4 个单一纹理非常慢。

顶点着色器：

```
attribute lowp vec4 position;
attribute lowp vec2 tex0;
varying lowp vec2 surfCoord;
uniform mat4 projection_modelview;
uniform lowp float uv_coef;

varying lowp vec2 texCoord1;
varying lowp vec2 texCoord2;
varying lowp vec2 texCoord3;
varying lowp vec2 texCoord4;

void main()
{
  gl_Position = projection_modelview * position;
  vec2 texCoord = fract(vec2(position.x / uv_coef, position.y / uv_coef));
  texCoord1 = texCoord * 0.5;
  texCoord2 = texCoord1 + vec2(0.5, 0);
  texCoord3 = texCoord1 + vec2(0, 0.5);
  texCoord4 = texCoord1 + vec2(0.5, 0.5);
  surfCoord = tex0;
} 
```

片段着色器：

```
uniform sampler2D texture0;    // surface alpha map
uniform sampler2D texture1;    // atlas
varying lowp vec2 surfCoord;
varying lowp vec2 texCoord1;
varying lowp vec2 texCoord2;
varying lowp vec2 texCoord3;
varying lowp vec2 texCoord4;

void main()
{
  lowp vec4 surfTexel = texture2D(texture0, surfCoord);
  lowp vec4 texel1 = texture2D(texture1, texCoord1);
  lowp vec4 texel2 = texture2D(texture1, texCoord2);
  lowp vec4 texel3 = texture2D(texture1, texCoord3);
  lowp vec4 texel4 = texture2D(texture1, texCoord4);

  texel1 *= surfTexel.r;
  texel2 = mix(texel1, texel2, surfTexel.g);
  texel3 = mix(texel2, texel3, surfTexel.b);
  gl_FragColor = mix(texel3, texel4, surfTexel.a);
} 
```

显示这个：

[![一个表面](../Images/6952694122be42b0909c250c962caf43.png)](https://i.stack.imgur.com/kHwDj.jpg)
[（来源：[inputwish.com](http://inputwish.com/el/surface.png)）]

我的问题可能是纹理单元插值器，但我不知道如何解决。我没有在我的着色器中看到错误。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:16:12.640

错误是在顶点着色器中使用分数。太早了。它应该在片段着色器中：

```
lowp vec4 texel1 = texture2D(texture1, fract(texCoord) * 0.5);
lowp vec4 texel2 = texture2D(texture1, fract(texCoord) * 0.5 + vec2(0.5, 0.0));
lowp vec4 texel3 = texture2D(texture1, fract(texCoord) * 0.5 + vec2(0.0, 0.5));
lowp vec4 texel4 = texture2D(texture1, fract(texCoord) * 0.5 + vec2(0.5, 0.5));
... and mix them together.. 
```

无论如何它很慢，因为依赖纹理在 ipad ios 上读取。

# java - 安装快捷方式而不复制本机手动创建的

> ID：14499123
> 
> 赞同：1
> 
> 时间：2013-01-24T10:29:49.667
> 
> 标签：java, android, shortcut

我想为我的应用程序添加一个快捷方式，但我无法设法不复制本地手工创建的快捷方式（例如，通过将应用程序菜单中的应用程序图标拖放到主屏幕）。

这是我的代码：

```
public void addShortcut(Context context)
{
    this.manageShortcutAction(context, "com.android.launcher.action.INSTALL_SHORTCUT");
}

public void deleteShortcut(Context context)
{
    this.manageShortcutAction(context, "com.android.launcher.action.UNINSTALL_SHORTCUT");
}

private void manageShortcutAction(Context context, String intentAction)
{
    Context applicationContext = context.getApplicationContext();
    Intent shortcut = new Intent(intentAction);
    ApplicationInfo appInfo = applicationContext.getApplicationInfo();
    PackageManager packageManager= applicationContext.getPackageManager();
    String applicationName = (String) packageManager.getApplicationLabel(appInfo);

    shortcut.putExtra(Intent.EXTRA_SHORTCUT_NAME, applicationName); // Shortcut name
    shortcut.putExtra(Intent.EXTRA_SHORTCUT_INTENT, packageManager.getLaunchIntentForPackage(appInfo.packageName));// Setup activity should be shortcut object 
    shortcut.putExtra("duplicate", false); // Just create once
    shortcut.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, Intent.ShortcutIconResource.fromContext(applicationContext, appInfo.icon));// Set shortcut icon

    applicationContext.sendBroadcast(shortcut);
} 
```

我的清单需要权限：

```
<uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT" />
<uses-permission android:name="com.android.launcher.permission.UNINSTALL_SHORTCUT" /> 
```

顺便说一句，我已经覆盖了现在正在`MainApplication`扩展的应用程序代码`Application`。我已经尝试创建一个组件来创建`Intent.EXTRA_SHORTCUT_INTENT`，但没有预期的结果。

如果有人有想法...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-05T22:40:04.493

我发现为了防止应用程序创建应用程序安装时创建的快捷方式的副本（或通过从菜单复制），我必须创建一个与现有参数相同的快捷方式 - 使用相同的快捷方式名称是不够。

经过大量测试并感谢 logcat，我已经能够创建一个精确的副本，如下所示：

```
private void installShortcut() {
    final Intent shortcutIntent = new Intent(getApplicationContext(), MainActivity.class);
    shortcutIntent.setAction(Intent.ACTION_MAIN);
    shortcutIntent.addCategory(Intent.CATEGORY_LAUNCHER);
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);

    final Intent intent = new Intent();
    intent.putExtra("duplicate", false);
    intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
    intent.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));
    intent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, Intent.ShortcutIconResource.fromContext(this, R.drawable.icon));
    intent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
    sendBroadcast(intent);
} 
```

我在 SO 上找到的其他答案的区别在于以下 3 行：

```
 shortcutIntent.addCategory(Intent.CATEGORY_LAUNCHER);
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED); 
```

我通过查看使用系统创建的快捷方式手动启动应用程序时打印的日志条目发现了这一点

```
Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.myapp/.activities.main.MainActivity bnds=[365,73][475,191] } from pid 279 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:36:18.987

在与索尼的开发人员讨论后，没有办法不复制手动创建的快捷方式......

我为三星找到了一些方法，但这些方法并不通用。

# c# - 如何操作gridview的单个组标题

> ID：14499128
> 
> 赞同：2
> 
> 时间：2013-01-24T10:30:06.027
> 
> 标签：c#, gridview, windows-8, windows-store-apps, winrt-xaml

以下场景：

我使用网格视图来呈现分组数据。

我在 headertemplate 中添加了一个 TextBlock，它
应该包含该组中的项目数。（例如）

*（编辑：在我的场景中，我总是显示 6 个项目，并希望在我的 HeaderTemplate 的 TextBlock 子项中显示溢出）*

如何从代码中访问各个组标头来操作此 TextBlock？

这是一个结果示例：

![示例输出](../Images/c8cda6a05d5c0c44e0923d06f61ee119.png)

这里是我的 GroupHeaderTemplate 的简化示例：

```
<GroupStyle.HeaderTemplate>
   <DataTemplate>
      <TextBlock x:name="overflow"/>
   </DataTemplate>
</GroupStyle.HeaderTemplate> 
```

所以我想为每个生成的组单独访问和操作“溢出”项目！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-30T22:04:04.270

这就是你真正想要的。

**首先编辑 GroupStyle HeaderTemplate**

```
<GridView.GroupStyle>
    <GroupStyle HidesIfEmpty="True">
        <GroupStyle.HeaderTemplate>
            <DataTemplate>
                <Grid Width="500" Margin="5,0,0,5">
                    <TextBlock HorizontalAlignment="Left">
                        <Run Text="{Binding Name}" />
                        <Run FontFamily="Segoe Ui Symbol" Text="" />
                    </TextBlock>
                    <TextBlock HorizontalAlignment="Right">
                        <Run Text="{Binding Children.Count, FallbackValue=0}" />
                        <Run Text="Items" />
                    </TextBlock>
                </Grid>
            </DataTemplate>
        </GroupStyle.HeaderTemplate>
        <GroupStyle.Panel>
            <ItemsPanelTemplate>
                <VariableSizedWrapGrid />
            </ItemsPanelTemplate>
        </GroupStyle.Panel>
    </GroupStyle>
</GridView.GroupStyle> 
```

> 请注意我正在使用`VaraibleSizedWrapGrid`

**接下来，处理 GridView 的 Loaded 事件**

```
class SubtractConverter : IValueConverter
{
    public double Amount { get; set; }
    public object Convert(object v, Type t, object p, string l)
    { return System.Convert.ToDouble(v) - Amount; }
    public object ConvertBack(object v, Type t, object p, string l)
    { throw new NotImplementedException(); }
}

private void GridView_OnLayoutUpdated(object sender, RoutedEventArgs e)
{
    var grid = sender as GridView;
    var converter = new SubtractConverter { Amount = 5 * 2 /* padding x2 */ };
    foreach (GroupItem group in (grid.ItemsPanelRoot as Panel).Children)
    {
        var result = VisualTreeHelper.GetChild(group, 0);
        while (!(result is Grid))
            result = VisualTreeHelper.GetChild(result, 0);
        var items = (result as Panel).Children.OfType<ItemsControl>()
            .First().ItemsPanelRoot;
        var binding = new Binding
        {
            Path = new PropertyPath("ActualWidth"),
            Mode = BindingMode.OneWay,
            Converter = converter,
            Source = items,
        };
        var header = (result as Panel).Children.OfType<ContentControl>()
            .First().ContentTemplateRoot as FrameworkElement;
        header.SetBinding(FrameworkElement.WidthProperty, binding);
    }
} 
```

而且，快！现在，您的标题的大小与组中项目的宽度完美匹配。

要记住的事情（作为设计师）：

1.  您的分组项目可能与单个列一样窄。`TextTrimming`在 Header `TextBox`es中解决这个问题。
2.  您的分组项目可能比显示器宽，并且`# items`可能不在屏幕上。使用包含的 MinWidth 解决此问题`grid`。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:15:28.887

我终于设法通过使用 VisualTreeHelperExtensions 获得所需的元素

**首先你必须通过 Nuget 安装 XamlToolkit**

然后为扩展添加一个 using 指令：

```
using WinRTXamlToolkit.Controls.Extensions; 
```

现在您可以在您的 ui 元素上使用更多方法，其中之一是 getDescendantsByType()，我用它来获取我的 gridview 保存的所有文本块元素。我在我的溢出文本块中添加了一个标签，我在遍历 gridviews 后代时检查它，你自己看看：

```
 private void ItemsGridView_Loaded(object sender, RoutedEventArgs e)
    {
        foreach (TextBlock element in this.myGridView.GetDescendantsOfType<TextBlock>())
        {
            if(element.Tag != null && element.Tag.Equals("itemCountBlock")){
                element.Text = "Finally solved!";
            }
        }
    } 
```

这应该适用于任何 ui 元素和任何想要更改的属性。

# sql - Oracle SQL：当一个值有两个可能的答案时如何组合结果

> ID：14499130
> 
> 赞同：0
> 
> 时间：2013-01-24T10:30:22.533
> 
> 标签：sql, oracle

这是一个 Oracle SQL 难题。

我有一个问题，我有一张日期/水果/消费量表，我想清理的水果表中偶尔有重复项。例如，我在同一天吃了 3 个苹果和 2 个苹果，我想把它结合起来就说吃了 5 个苹果。

我猜它使用 GROUP BY 函数，但我想不出一种方法来避免对所有苹果进行分组，而不仅仅是在特定日期对所有苹果进行分组。

```
 Date    Fruit   Eaten
    1-May   Lemon   2
    1-May   Apple   3
    1-May   Apple   2
    1-May   Orange  4
    2-May   Lemon   1
    2-May   Apple   2
    2-May   Orange  3
    2-May   Pear    4 
```

这是我希望它看起来的样子：

```
 Date     Fruit   Eaten
   1-May    Lemon   2
   1-May    Apple   5
   1-May    Orange  4
   2-May    Lemon   1
   2-May    Apple   2
   2-May    Orange  3
   2-May    Pear    4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:32:26.133

尝试这个：

```
select to_char(Date, 'DD-MON') as Date,Fruit,sum(Eaten) as Eaten
from Your_Table
group by to_char(Date, 'DD-MON') ,Fruit 
```

或尝试`trunc`如下使用：

```
select trunc(Date, 'MONTH') as Date,Fruit,sum(Eaten) as Eaten
from Your_Table
group by trunc(Date, 'MONTH') ,Fruit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:34:15.343

尝试对多个列进行分组：

```
select Date,Fruit,sum(Eaten)
from Your_Table
group by Date,Fruit 
```

# javascript - 如何使用 jQuery 逐一检测点击间隔？

> ID：14499132
> 
> 赞同：1
> 
> 时间：2013-01-24T10:30:28.227
> 
> 标签：javascript, jquery, click, timeout

我有一个小问题，是否有任何选项可以检测点击间隔并为它们设置任何条件。例如，如果我以一秒的间隔一个一个地点击我可以做一些事情，如果我在 0.5si 之后再次点击可以做其他事情吗？我不知道如何写这个，所以我不能在我的代码上添加任何例子，只有这个愿景，我也无法在其他人中找到这个解决方案，你能帮帮我吗？

```
var clicks=0;
function myClickFunction(event){
    clicks++;
}
$(function(){
    $("#something").on("click",myClickFunction);
        if (click == )){

        }   
    });
}); 
```

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:38:56.400

```
var lastClickTime;

function testTime(time){
    switch (true) {
        case (time < 500):
            alert("less than 500ms!");
            break;
        case (time < 1000):
            alert("less than 1000ms but not 500ms!");
            break;
        default: 
            alert("you sure click slow!");
            break;
    }
}

$("#something").on("click", function(e){
    e.preventDefault();
    var newTime = new Date();
    if(lastClickTime !== undefined) {
         testTime(newTime - lastClickTime);
    } 
   lastClickTime = newTime;
}); 
```

这是一种快速的方法，但会创建一些全局变量。它应该让你走上正确的道路！

开关可能会帮助您跟踪所需的所有不同情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:34:46.533

您可以尝试绑定`click`和`dblclick`功能。请参阅[文档](http://api.jquery.com/dblclick/)并注意这一点：

> 注意：尽管在下一个示例中进行了演示，但不建议将处理程序绑定到同一元素的 click 和 dblclick 事件。触发的事件顺序因浏览器而异，有些在 dblclick 之前接收两个点击事件，而另一些只接收一个。双击灵敏度（被检测为双击的两次单击之间的最长时间）可能因操作系统和浏览器而异，并且通常是用户可配置的。

[来源](http://api.jquery.com/bind/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:35:15.803

您必须手动跟踪最后一次点击的时间。然后每次调用您的事件处理程序时，将当前时间与存储的时间进行比较。

一些伪代码：

```
last_click_time = 0
onClick () {
  if ( last_click_time == 0 ) {
    // first click
    last_click_time = time.now();
  } else {
    time_difference = time.now () - last_click_time;
    if ( time_difference == 0.5 ) {
      // half a second since last click
    } else if ( time_difference == 1 ) {
      // one second since last click
    }
    ...
    last_click_time = time.now ();
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:35:54.120

如果您想精确控制时间，您可以检查当前机器上的毫秒数。

[链接到小提琴](http://jsfiddle.net/SPLrw/1/ "链接到 jsfiddle")

**html:**

```
<a id="asd">yo</a> 
```

**Javascript：**

```
$("#asd").click(function(){
    var latest = $(this).data("time") || 0;
    var now = +new Date();
    var diff = now-latest;
    if(diff < 500) alert("That was faster than 0.5 seconds!");
    if(diff > 1000 && diff < 1500) alert("That was between 1.0 and 1.5 seconds.");
    $(this).data("time",now);
}); 
```

# objective-c - 为什么在此处添加 NSAssert 会导致错误？

> ID：14499133
> 
> 赞同：0
> 
> 时间：2013-01-24T10:30:29.820
> 
> 标签：objective-c, xcode

```
-(NSArray *) convertArrayOfDictionaryToOneOfItsElement: (NSString *) key
{
    NSArray * result = [self convertEachElementToAnother:^(id element){
        NSDictionary *elementDictionary = (NSDictionary *) element;
        NSString * value= elementDictionary [key];
        //NSAssert(result, @"result must not benil");
        return value;
    }];
    return result;
} 
```

此代码在没有 NSAssert 的情况下可以正常工作。但是，如果事情是零，我想确保我知道它何时发生。

好吧，我把 NSAssert

它挂起。

exc_bad_access

为什么？

更新：我发现了这个错误。它应该是`NSAssert (value, @"result must not benil")`

好吧，我还是想知道为什么做`NSAssert (result,...`cuases问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:36:54.033

因为在块内部你没有结果数组，所以这个数组只会在最后一个块执行后分配。

# netbeans - Netbeans 拒绝关闭

> ID：14499138
> 
> 赞同：0
> 
> 时间：2013-01-24T10:30:47.260
> 
> 标签：netbeans, shutdown

一个令人气愤的问题。当我尝试关闭我的机器时，我的 Netbeans IDE 7.2 拒绝关闭。

我必须使用任务管理器来关闭野兽。

它是 Windows 7 64 位机器。

我已经尝试过通常的 Netbeans 论坛。有任何想法吗？

PS：我也使用表现良好的 Eclipse。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:46:45.720

从我所看到的情况来看，您可能安装了损坏的 netbeans，因为它通常在系统上很轻。你是多久之前安装的？在这一切开始之前，您是否进行了任何重大更改，从 evinvorment 设置更改到重大更改，例如事物如何符合等...？我想说，最简单的选择是备份设置（如果可能），然后重新安装或进行修复安装（如果提供）netbeans。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:08:52.720

升级到7.3，我不再有问题。BTW Netbeans 7.3 非常适合开发 HTML 5 代码。

# javascript - 是否可以将这个简单的 jQuery 片段转换为 JavaScript？

> ID：14499143
> 
> 赞同：-2
> 
> 时间：2013-01-24T10:31:00.363
> 
> 标签：javascript, jquery

我有这个简单的 jQuery 片段（使用 jQuery 非常简单），我想将它转换为 javascript，这似乎真的很难。

例如，我不知道如何处理 .each - 函数。

希望您能提供帮助，给我提示或快速解决问题。

```
 $("#rTab div[id^=tab]").each(function(){
     if( !$.trim( $(this).html() ).length ) {
         id = $(this).attr("id");
     //alert(id);
         $("#rTab li[rel="+id+"]").hide();
     } 
 });

$(".tabContent").hide();
$(".tabContent:first").show(); 

//click MUSS live
$("ul.tabs li").live('click',function() {
$("ul.tabs li").removeClass("active");
$(this).addClass("active");
$(".tabContent").hide();
//MUSS rel, weil href mit location.hash in product.php so nicht läuft
var activeTab = $(this).attr("rel"); 
$("#"+activeTab).fadeIn(); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:35:52.853

对于`$.each()`，您可以执行 JavaScript`FOR`循环。您需要了解遍历 DOM。你试过什么？

最简单的方法是学习如何使用普通的 DOM api 进行 DOM 遍历和操作（您可能会称之为：普通 JavaScript）。

然而，这对某些事情来说可能是一种痛苦。（这就是为什么首先发明像 jQuery 这样的库的原因）。

谷歌搜索“javascript DOM traversing/manipulation”应该会提供大量有用的（和不太有用的）资源。

这个网站的文章还不错：[http ://www.htmlgoodies.com/primers/jsp/](http://www.htmlgoodies.com/primers/jsp/)

请务必在所有浏览器中进行测试。

你可以[在这里](https://stackoverflow.com/questions/978799/is-there-an-easy-way-to-convert-jquery-code-to-javascript)和[这里](https://stackoverflow.com/questions/7899052/convert-from-jquery-to-javascript)阅读更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:46:43.940

干得好：

```
each("#rTab div[id^=tab]",
    function(element){
        if(element.innerHTML.trim().length > 0) {
            id = element.getAttribute("id");
            //alert(id);
            each("#rTab li[rel="+id+"]",
                function(element){
                    element.style.display = 'none';
                }
            );
        } 
    }
)

each("#rTab li[rel="+id+"]",
    function(element){
        element.style.display = 'none';
    )
);
each(".tabContent:first",
function(element){
        element.style.display = 'block';
    )
);

each("ul.tabs li",
    function(element){
        element.addEventListener(
            'click',
            function(e) {
                e = e || window.event;
                each("ul.tabs li",
                    function(e){
                        e.setAttribute('class' e.getAttribute('class').replace("active",''));
                    }
                e.target.setAttribute('class' e.getAttribute('class') + "active");

                each(".tabContent",
                    function(element){
                        element.style.display = 'none';
                    )
                );
                var activeTab = e.target.getAttribute("rel"); 

                //$("#"+activeTab).fadeIn(); 
                // I'm not going to write a loop to fade in a element.
            }
        );
    }
);

function each(selector, func){
    var e = document.querySelectorAll(selector);
    if(e.forEach){
        e.forEach(func);
    }else{
        for(var i = 0, l = e.length; i < l; i++){
            func(e[i]);
        }
    }
} 
```

这是更多的代码，是的。问题是所有这些 jQuery 选择器都可以返回多个元素，因此每个选择器都是一个循环。因此，别名使其略短。

至少这应该让您了解原生 JS 中的工作方式。请注意，旧浏览器`querySelectorAll` [不支持](http://caniuse.com/queryselector)`forEach`IE 9+。

此外，在`.style.display = 'none';`and`.style.display = 'block';`中，您可能希望以某种方式缓存旧的显示值，因为并非所有元素都`block`用作默认显示设置。

一个替代方案

# c - 在缓冲区中查找字符串

> ID：14499144
> 
> 赞同：1
> 
> 时间：2013-01-24T10:31:07.540
> 
> 标签：c, string, sizeof, strlen

此函数浏览添加到缓冲区中的字符串并搜索指定的字段。如果在缓冲区中找到该字段，则返回指向分配内容的指针。如果在缓冲区内未找到指定字段，则指向“？”的指针 字符串已交付。

```
#include <stdio.h>
#include <string.h>

char buf[256] = "ID=1234 Name=Manavendra Nath Manav Age=30";

const char * get_info (const char *name)
{
    unsigned   nl;
    const char *p, *e;

    if(name!=NULL)
    {
        nl = strlen(name);
        for (p = buf, e = p + strlen(buf) ; p < e && p[0] ; p += strlen(p) + 1) {
            printf("p = %s\tname = %s\te = %s\n", p, name, e);
            if (strncmp (p, name, nl) == 0 && p[nl] == '=')
                return (p + nl + 1);
        }
    }
    return "?";
}

int main()
{
    printf("strlen(buf) = %d\n", strlen(buf));
    printf("%s\n", get_info("Nath"));
    return 0;
} 
```

执行后，我总是得到`?`输出，代码有什么问题？第二个注意事项，是否建议在上面的代码中`strlen`替换为？返回。`sizeof``sizeof(buf)``256`

```
manav@os-team:~/programs/test$ ./a.out
strlen(buf) = 21
p = Manavendra Nath Manav       name = Nath     e =
? 
```

编辑：对不起，我之前没有更新`p[nl] == '='`。如果缓冲区是这样的， `char buf[256] = "ID=1234 Name=Manavendra Nath Manav Age=30";` 那么 `get_info("Name")`应该返回`Manavendra Nath Manav`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:49:50.757

我认为这是您正在寻找的行为：

```
#include <string>

const char * get_info_2(const char * name){
  std::string str_1(buf);
  std::string str_2(name);
  for (unsigned int i = 0; i < str_1.size() - str_2.size(); ++i){
    if (str_1.substr(i,str_2.size()).compare(str_2) == 0){
      return str_1.substr(i,str_2.size()).c_str();
    }
  }
  return "?";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:50:54.190

你为什么要为像字符串匹配这样常见的东西编写自己的代码？STL 有几种方法可以做到这一点，最简单的是使用`std::string`

```
#include <iostream>
#include <string>

char buf[256] = "Manavendra Nath Manav";
char sub[256] = "Nath";

int main()
{
    std::string bufs(buf);
    std::string subs(sub);

    auto pos = bufs.find(sub);
    if (pos != std::string::npos)
        std::cout << bufs.substr(pos, subs.length()) << "\n";
    else
        std::cout << "?\n";
} 
```

[LiveWorkSpace](http://liveworkspace.org/code/4hgoW8%2414)上的输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:36:51.977

循环内部`return`只能在`p[nl]`等于时执行`'='`：

```
 if (strncmp (p, name, nl) == 0 && p[nl] == '=')
                                       ^^^^^^^^^^^^^^^ 
```

但是，您的字符串中没有`'='`，所以它`return "?"`总是被执行的最终结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:40:10.880

这可能不是您问题的确切答案，但逻辑看起来非常复杂。你不能用**substr()**来解决问题。此外，我可以在**if (strncmp (p, name, nl) == 0 && p[nl] == '=')** is **p[nl] == '='**中找到的 1 个错误永远不会是真的。

# dojo - CoffeeScript 类在缩小后中断

> ID：14499146
> 
> 赞同：1
> 
> 时间：2013-01-24T10:31:09.643
> 
> 标签：dojo, coffeescript

我有简单的课程（使用 Dojo）：

```
define ["dojo/request", "dojo/html", "dojo/on", "dojo/dom"], (request, html, observe, dom) ->
   class Foo
     constructor: (@a) ->
       alert @a 
```

我在不同的文件中创建了这个类的一个新对象：

```
require ["Libraries/Foo", "dojo/domReady!"], (Foo) ->
   t = new Foo "test" 
```

当我将 Foo 类文件编译成 JS 时，一切正常，但是当我使用例如[http://jscompress.com](http://jscompress.com)缩小 JS 输出时，代码会中断。

缩小后的代码如下所示：

```
// Generated by CoffeeScript 1.4.0
(function(){define(["dojo/request","dojo/html","dojo/on","dojo/dom"],function(e,t,n,r){var i;return i=function(){function e(e){this.a=e;alert(this.a)}return e}()})}).call(this); 
```

在控制台（Safari，Chrome）我可以看到：

```
TypeError: '[object Object]' is not a constructor (evaluating 'new Foo("test")') 
```

但是当我在 IDE 中使用工具重新格式化代码时，一切正常。

改造后的代码：

```
// Generated by CoffeeScript 1.4.0
(function () {
    define(["dojo/request", "dojo/html", "dojo/on", "dojo/dom"], function (e, t, n, r) {
        var i;
        return i = function () {
            function e(e) {
                this.a = e;
                alert(this.a)
            }

            return e
        }()
    })
}).call(this); 
```

请问哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:03:56.400

问题解决了！`async: true`在 Dojo 配置中使用。

# android - 使用 *#9900# 记录在哪里使用它

> ID：14499148
> 
> 赞同：0
> 
> 时间：2013-01-24T10:31:12.177
> 
> 标签：android

我收到此错误使用`*#9900# to take log`我应该在哪里使用它来获取崩溃日志。

我没有 eclipse 或 adt 来查看 logcat。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:37:11.150

将系统转储保存在某些特定文件夹中可能是 OEM 密钥捷径。

您可以签入您的 SD 卡以查看它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:39:04.373

您必须像输入电话号码一样输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T00:13:39.610

1.  选择您的 android 上的“电话”图标，就像您要拨打电话号码一样。
2.  拨*#9900#
3.  选择“DELETE DUMPSTATE/LOGCAT” - 从顶部开始的第二个选项。
4.  选项“删除转储！” 出现点击“确定”这可能会也可能不会解决您的问题，但它会清除您的android中的所有垃圾。

# alfresco - 露天分享 | 以编程方式在自定义页面中使用 dashlet

> ID：14499151
> 
> 赞同：1
> 
> 时间：2013-01-24T10:31:22.253
> 
> 标签：alfresco, dashboard, alfresco-share, dashlet

我对 Alfresco 很陌生。我的问题是，我们如何将 dashlet（从头开始创建）用于页面（也从头开始创建）？要处理哪些文件和配置，以将 dashlet 包含到页面中。

此外，新创建的页面必须类似于仪表板页面，但无需身份验证。这里的想法是取消默认的“共享”仪表板登录流程。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T23:04:49.037

让我试着用一些例子来回答这个问题：

露天页面

要创建一个 Alfresco Share 页面（您使用共享？），您需要创建三个文件：

```
<TOMCAT>/webapps/share/WEB-INF/classes/alfresco/site-data/pages/my-page.xml
<TOMCAT>/webapps/share/WEB-INF/classes/alfresco/site-data/template-instances/my-page.xml
<TOMCAT>/webapps/share/WEB-INF/classes/alfresco/templates/org/alfresco/my-page.ftl 
```

第一个定义您的页面，第二个定义您将在页面上使用的组件（dashlets），最后一个是一个 HTML 模板（在 Freemarker 中）排列您的组件。

前两个文件是 XML，有点露天专用，但简单的 XML，最后一个你可以放置静态 HTML 并且它可以工作，或者你可以放置一些 freemarker 宏。每个文件（示例）中的内容，您可以在[此页面](http://zlayer.net/blog/?p=247)上阅读，专门为您和这个问题编写:)（不要问，我想写它）

无身份验证

要不使用身份验证，您只需将 <authentication>none</authentication> 放在页面定义文件（第一个 XML 文件）中。

Dashlet 文件

基本上，一个 dashlet 至少可以包含两个文件，通常是 4-5 个或类似的文件。dashlet.get.desc.xml文件表示两件事： **desc.xml**部分表示它用于新组件（dashlet），get 部分表示该组件将响应 HTTP GET 调用。通常放置在*/webapps/share/WEB-INF/classes/alfresco/site-webscripts/org/alfresco/components 下面的某个地方。*在下面的位置并不重要，但是您希望将其放在某个文件夹中以更轻松地管理所有代码。这个文件包含一个重要的东西：url。Url 定义了您的 dashlet 将响应的 url。当你在上面的页面定义中定义你的页面时，你可以把这个 url 放在那里以访问 dashlet。

您甚至可以使用链接直接访问 dashlet`http://localhost:8080/share/my/url/to/dashlet.`

另一个文件**dashlet.get.html.ftl 同样**是一个 freemarker 模板文件。你把 HTML 放在那里。您还可以拥有一个用于 dashlet 的*控制器*文件 dashlet.get.js，**它**准备了一些动态内容（它是用服务器端 javascript 编写的，并且可以访问一些 Alfresco Javascript API）。

最后，您可以将一些国际化文本（翻译）放入包中（基本上，通过浏览器语言， **dashlet.get.properties**、dashlet.get_DE.properties、dashlet.get_ES.properties 等）。

还有一些选项可以将客户端 javascript 或 css 文件包含到此 dashlet 中。

要了解如何准确组装所有这些，您可以尝试阅读[此页面](http://zlayer.net/blog/?p=255)。可能不是一本好书，但希望它能澄清一些事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:36:45.360

dashlet 只是一种特殊类型的 Web 脚本，所以是的，很可能通过将相同的 Web 脚本绑定到组件区域中来将其放入自定义页面中。

如果您不熟悉 Share 开发，页面、模板、组件和区域之间的关系可能会有点复杂，因此我建议您查看去年 11 月 DevCon 上Dave Draper 和 Erik Winlof 的[Share Customizations Live](https://devcon.alfresco.com/berlin/sessions/share-customizations-live)演示文稿，他们在其中介绍了一个示例项目包括一个 Ant 构建脚本，其中包括一个自定义 Web 脚本和页面定义。可以从此[Git 存储库](https://github.com/share-extras/site-extension)下载代码，作为您自己项目的基础。

如果您的 dashlet Web 脚本需要进行太多更改以使其在自定义页面中运行，您不应该发现太多更改，但请记住，如果用户未经身份验证，那么您将无法访问有关他们的任何信息，您也不会能够从存储库中检索任何数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T14:46:13.743

抱歉，为了清楚起见，您想在 Alfresco 存储库上重现共享界面，但没有登录？Dashlet 和界面组件是 webscript，而 webscript 存储在存储库中，因此为了访问它们，您需要进行身份验证。您可以在 webscript xml 描述中使用标签 runas="admin" 或 runas="guest" 来实现某些目标。如果我误解了，请告诉我，我会尽力帮助..

# .net - 如何将取消原因传递给.Net Task

> ID：14499156
> 
> 赞同：4
> 
> 时间：2013-01-24T10:31:30.813
> 
> 标签：.net

.Net Task 支持[Task Cancellation](http://msdn.microsoft.com/en-us/library/dd997396.aspx)，但我想传递取消的原因。在我的情况下，我的任务因某种原因被取消，并且任务必须以不同的方式完成每个取消原因。

CancellationTokenSource 类没有设置该原因的某些属性。如何将取消原因传递给Task？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:40:53.953

您不能将原因或消息传递给 a`Task`以指示原因。

`Task`取消实例（或其他操作）的方式是传递可以[`CancellationToken`](http://msdn.microsoft.com/en-us/library/dd384802.aspx)检查/注册的实例以确定操作是否已取消（这是任务取消的“合作”方面）。

但是，取消*不会*受到 的影响`CancellationToken`，它们会受到[`CancellationTokenSource`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtokensource.aspx)通过调用各种[`Cancel`方法](http://msdn.microsoft.com/en-us/library/dd321955.aspx)重载来创建它们的影响。

此外，当任务被取消时，[`OperationCancelledException`](http://msdn.microsoft.com/en-us/library/system.operationcanceledexception.aspx)会引发一个派生自的异常，您可以捕获该异常。当您捕获该异常时，您可以查看该[`CancellationToken`属性](http://msdn.microsoft.com/en-us/library/system.operationcanceledexception.cancellationtoken.aspx)；这暴露了`CancellationToken`用于取消操作的 。

从那里，您可以将其传递给该[属性](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtokensource.token.aspx)公开的结构上的[方法的](http://msdn.microsoft.com/en-us/library/dd384804.aspx)[覆盖`Equals`](http://msdn.microsoft.com/en-us/library/dd384804.aspx)；如果调用返回 true，则操作被取消，您可以将其与取消原因相关联。`CancellationToken`[`Token`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtokensource.token.aspx)`Equals``CancellationTokenSource`

请注意，您可能必须深入了解 中包含的异常[`AggregateException`](http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx)，因为异步操作引发的大多数异常都包含在其中。

# wcf - 从动态 crm 2011 插件调用 WCF 服务

> ID：14499157
> 
> 赞同：1
> 
> 时间：2013-01-24T10:31:31.567
> 
> 标签：wcf, dynamics-crm-2011, dynamics-crm, wcf-client

我为 Dynamics CRM 2011 编写了一个插件，它调用托管在不同服务器上的 WCF 服务。下面是我插件中的代码。在插件的类库中，我没有使用服务引用，而是使用 svcutil.exe 来生成 WCF 客户端。

```
var binding = new BasicHttpBinding();
binding.Name = "BasicHttpBinding_IMyService";
binding.Security.Mode = BasicHttpSecurityMode.None;
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;
binding.Security.Transport.ProxyCredentialType = HttpProxyCredentialType.None;
binding.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.UserName;
var endpoint = new EndpointAddress("http://test/MyService.svc");
ChannelFactory<IMyService> factory = new ChannelFactory<IMyService>(binding, endpoint);
IMyService channel = factory.CreateChannel();
channel.InsertTest(testobject); 
```

我收到以下错误：

'System.Threading.Tasks.Task`1[System.Int32]' 无法序列化。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。

任何人都有尝试这样做的经验？或者关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:57:02.487

1.  确保服务设置正确。几个月前我哭了。谷歌“在 VS 2010 中为 REST 设置基本的 WCF Web 服务”，您可能会在 WordPress 博客上获得成功，我在其中解释了该方法。（不想在这里自我推销。我希望在我自己解决问题**之前**有人拥有那个博客。真的。）

2.  显示您用于连接到服务的代码。明天上班的时候，我可以和我的比较一下，发现有什么不同。我记得我有这个序列化问题，但我不确定我们是如何杀死它的。但不知何故，我们做到了。（并检查达里尔的提示是否有效。它可以。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:26:35.437

你得到的错误是你发送的对象的序列化。检查您的测试对象是否具有 Task 属性。如果是这样，请考虑在序列化期间忽略它。 [请参阅此 SO 帖子。](https://stackoverflow.com/questions/1791946/how-can-i-ignore-a-property-when-serializing-using-the-datacontractserializer)

# ios - 在 @synchronized 代码块中进行提取和在锁定的 NSManagedObjectContext 中进行提取有什么不同

> ID：14499177
> 
> 赞同：1
> 
> 时间：2013-01-24T10:32:13.853
> 
> 标签：ios, multithreading, core-data, nsmanagedobjectcontext

我已经阅读了有关 @synchronized 和 NSManagedObjectContext 的 Apple 文档，但我根本看不清楚。

谁能解释一下这两段代码之间的区别：

这里我们有一个关键部分，我们在其中对 NSManagedObjectConext 进行查询

```
 @synchronized(self) {
        array = [mainContext executeFetchRequest:request error:&error];
        if (error != nil) {
            NSLog(@"Obj list fetch error: %@", error);
            exit(-1);
        }
    } 
```

在这里，我们在锁定的 NSManagedObjectConext 中执行相同的查询

```
 [mainContext lock];
        array = [mainContext executeFetchRequest:request error:&error];
        if (error != nil) {
            NSLog(@"Obj list fetch error: %@", error);
            exit(-1);
        }

    [mainContext unlock]; 
```

每个代码块的含义是什么？哪一个是正确的？

非常感谢，我有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:37:34.730

如第一条评论所述，这是两种不同类型的锁。一种是阻止其他线程访问您的类的整个实例，直到您完成为止。这意味着您不能调用此类的其他方法，或者更好的是，您发送到实例的消息被阻止。

另一个锁只是阻止访问您的 NSManagedObjectContext。

然而，Apple 表示没有必要同步上下文。相反，如果您有多个 NSManagedObjectContext 共享一个 NSPersistenceStoreCoordinator，最好锁定协调器。

# ruby-on-rails - 使用 Mongoid 的 MongoDB 对话/私人消息模式

> ID：14499180
> 
> 赞同：6
> 
> 时间：2013-01-24T10:32:26.760
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, schema-design

我正在 Rails 中构建一个论坛系统，以便更加熟悉 Rails 和 Mongoid。我想添加的一个功能是一个私人消息系统论坛用户可以用来互相发送消息。在架构设计方面，我可以想到两种解决方案：

## 解决方案 1

用户和消息是使用“has_many”和“belongs_to”相互链接的单独文档。

> **用户文件**
> 
> has_many :messages_sent, :class_name => '消息', :inverse_of => :message_sender
> 
> has_many :messages_received, :class_name => 'Message', :inverse_of => :message_recipient

和

> **留言文件**
> 
> 字段：创建，类型：日期时间，默认值：-> { Time.now }
> 
> 字段：内容，类型：字符串
> 
> belongs_to :message_sender, :class_name => '用户', :inverse_of => :messages_sent
> 
> belongs_to :message_recipient, :class_name => '用户', :inverse_of => :messages_received

为了向用户显示他的收件箱，我会查看`some_user.messages_received`ordered by`:created`和filtered，因此我有一个唯一发件人ID 列表，按他们最后一条消息发送到的时间排序`some_user`。

然后为了显示一个特定的对话，我只需获取两个参与者之间的所有消息并根据时间戳将它们交错：

> messages_in = some_user.messages_received.where(:message_sender => selected_correspondent)
> 
> messages_out = some_user.messages_sent.where(:message_recipient => selected_correspondent)。

我不喜欢这个解决方案，因为它涉及多次使用“where”查询来访问 Messages 集合，以及对发送和接收的消息进行大量手动过滤和交错。努力。

## 解决方案2（我现在正在使用）

在对话文档中嵌入消息。我将在下面提供用户、消息和对话的代码。一个对话通过`has_and_belongs_to_many`(nn 因为一个用户也可能有许多对话) 链接到两个或多个用户。这也可能允许多用户对话。

我喜欢这个解决方案，因为为了向用户显示他的收件箱，我可以使用在对话文档中存储和更新的`some_user.conversations`排序方式`:last_message_received`，无需过滤。要显示特定对话，我不需要交错发送和接收的消息，因为消息已经以正确的顺序嵌入到对话文档中。

此解决方案的唯一问题是在您要添加消息时找到由两个（或更多）用户共享的正确对话文档。这里建议了一种解决方案：[mongodb conversation system](https://stackoverflow.com/questions/9621952/mongodb-conversation-system)，但我不喜欢它，因为查询似乎相对昂贵，并且多用户对话的扩展看起来会很棘手。相反，我在对话文档中有一个名为的字段，`:lookup_hash`它是根据参与对话的每个用户的对象 ID 计算的 SHA1 哈希。这样，给定两个或更多用户，找到他们对应的对话文档（或者如果它还不存在，则创建它）是微不足道的。

要将消息添加到对话中，我只是使用`Conversation.add_message`（类方法，而不是实例方法，因为对话可能还不存在）给它一个发送者、接收者和新的消息对象。

## 问题

我的问题是：考虑到 Mongoid（或者一般来说只是 NoSQL）架构设计的最佳实践，我是否做任何明显错误的事情？我能做些什么来改进我的解决方案吗？我使用哈希查找对话的想法是个坏主意吗？

## 代码

**用户.rb**

```
class User
  include Mongoid::Document

  field :username, type: String
  field :joined, type: DateTime, default: ->{ Time.now }
  field :last_activity, type: DateTime, default: -> { Time.now }

  has_and_belongs_to_many :conversations 
end 
```

**对话.rb**

```
require 'digest/sha1'

class Conversation
  include Mongoid::Document

  field :lookup_hash, type: String
  field :created, type: DateTime, default: -> { Time.now }
  field :last_message_time, type: DateTime, default: -> { Time.now }
  # Array of user ids of users that have read all messages in this conversation
  field :last_message_seen_by, type: Array, default: []

  embeds_many :messages
  has_and_belongs_to_many :participants, :class_name => 'User'

  validates_presence_of :lookup_hash

  index({ lookup_hash: 1 }, { unique: true, name: "lookup_hash_index" })
    # Used to show a user a list of conversations ordered by last_message_time
  index({ _id: 1, last_message_time: -1 }, { unique: true, name: "id_last_message_time_index" })

  def self.add_message(recipient, sender, message)
    # Find or create a conversation:
    conversation = Conversation.find_or_create_by(
      :lookup_hash => get_lookup_hash([recipient.id, sender.id])) do |c|
        c.participants.concat [recipient, sender]
      end
    conversation.messages << message
    conversation.last_message_time = Time.now
    conversation.last_message_seen_by.delete(recipient)
    conversation.save
  end

  private
    def self.get_lookup_hash(participant_ids)
      lookup_key = participant_ids.sort.join(':')
      Digest::SHA1.hexdigest lookup_key
    end
end 
```

**消息.rb**

```
class Message
  include Mongoid::Document

  field :created, type: DateTime, default: -> { Time.now }
  field :text, type: String

  embedded_in :conversation
  belongs_to :author, :class_name => 'User'

  validates_length_of :text, minimum: 2, maximum: 256
  validates_presence_of :author
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:04:14.900

我猜你正在使用 MongoId 3.0。我在您的第一个解决方案中没有看到任何问题：

```
messages_in = some_user.messages_received.where(:message_sender => current_user)

messages_out = some_user.messages_sent.where(:message_recipient => current_user). 
```

您可以找到各种示例：

[在 Rails 3 中进行私人消息建模的首选方式](https://stackoverflow.com/questions/5130663/preferred-way-to-private-messages-modeling-in-rails-3)

[http://pastebin.com/fKavivbp](http://pastebin.com/fKavivbp)

[https://groups.google.com/forum/?fromgroups=#!topic/mongoid/BOBqhYLb7O0](https://groups.google.com/forum/?fromgroups=#!topic/mongoid/BOBqhYLb7O0)

我在几个项目中使用 MongoId 有一个内部消息传递系统，并使用第一个解决方案。

如果你添加其他类`"Conversation"`你不应该嵌入消息，因为一个对话可以有无限数量的消息。你应该使用`has_may messages`and `belongs_to conversation`。

我认为这两种解决方案都很好，因此您可以根据项目逻辑选择您的需求。如果您的逻辑更简单，您可以选择第一个解决方案。否则，如果您的逻辑更复杂，请选择后一种解决方案。

问候！

# javascript - javascript：为 urbanspoon 小部件创建脚本元素：不加载

> ID：14499181
> 
> 赞同：0
> 
> 时间：2013-01-24T10:32:28.637
> 
> 标签：javascript

**背景**

urbanspoon 预订小部件通过脚本标签加载。脚本中有一个巨大的 document.write，它为小部件加载所有 css 和 html。您将脚本标签放在您希望小部件加载的 html 中（我知道...）

**问题**

好吧，这个小部件的加载速度确实很慢，并且会阻止其他资产的加载。因此，在尝试对其进行一些优化时，我仅在请求特定部分时才尝试将脚本标记注入元素中。唯一的问题是内容没有加载。

根据另一个 SO 答案，我正在创建一个脚本标签，然后用必要的参数填充它。

```
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'long url';
$("#scriptWrapper").append(script); 
```

一切都很好并且是正确的。问题是脚本没有成功注入内容。

**这是一个显示小部件链接返回的内容的链接** [http://www.urbanspoon.com/b/posts/5191](http://www.urbanspoon.com/b/posts/5191)

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:37:50.210

或者你可以试试[jQuery.getScript](http://api.jquery.com/jQuery.getScript/)。

# android - 微调器项目未在 android 上显示

> ID：14499182
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:32:33.993
> 
> 标签：android, android-spinner

我必须开发 android spinner 应用程序。

此处`spinner list item`不显示。为什么这里发生此错误。请帮助我并为此提供解决方案。

我使用了以下代码：

```
public class NewCustomer extends Activity{
private final String NAMESPACE = "http://admin.com";
private final String URL = "http://10.0.0.75:8085/AdminLogin/services/InsertSpinner?wsdl";
private final String SOAP_ACTION = "http://admin.com/insertData";
private final String METHOD_NAME = "insertData";
Button btninsert;
String selectedItem;
Spinner spinner;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.new_customer);

    btninsert = (Button)findViewById(R.id.register);
    btninsert.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {

                               insertValues();
                       } 

         });
     }
     public void insertValues(){
      SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    PropertyInfo bcoun =new PropertyInfo();
    bcoun.setName("Bcountry");
    bcoun.setValue(selectedItem);
    bcoun.setType(String.class);
    request.addProperty(bcoun); 

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
     androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

        TextView result = (TextView) findViewById(R.id.textView2);
        result.setText(response.toString());

       }
      catch(Exception e){

        }
    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());
    //Dynamically generate a spinner data 
    createSpinnerDropDown();

     }
        private void createSpinnerDropDown() {

    //get reference to the spinner from the XML layout
    spinner = (Spinner) findViewById(R.id.tf_country);

    //Array list of animals to display in the spinner
    List<String> list = new ArrayList<String>();
    Intent in = getIntent();
    list.add("United Status");
       list.add("Afghanistan");
       list.add("Aland Islands");
       list.add("Albania");
       list.add("Algeria");

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.layout.row, R.id.country, list);

  // adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setPrompt("Choose a Country");

  // spinner.setTextColor("#FF0000");
    spinner.setAdapter(adapter);
    adapter.notifyDataSetChanged();
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

     }
      public class MyOnItemSelectedListener implements OnItemSelectedListener {

     public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

      selectedItem = parent.getItemAtPosition(pos).toString();

       }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

                }

    public void onNothingSelected(AdapterView<?> parent) {
        // Do nothing.
    }

       } 
```

我必须运行应用程序并单击选择微调器项目的微调器框。但是，这里没有显示微调器项目......为什么没有显示微调器项目？我的代码有什么问题？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:16:08.473

在我必须调用 createSpinnerDropDown(); 在 onCreate 方法中。这些现在工作得很好。

# c# - 使用网络浏览器显示打印文档

> ID：14499190
> 
> 赞同：1
> 
> 时间：2013-01-24T10:33:06.900
> 
> 标签：c#, javascript, asp.net, asp.net-mvc

我在桌面应用程序的图像查看器中创建了预览设置的打印文档，我对这种性能感到高兴。

现在我想用网络浏览器（Mozila/Chrome/IE）显示创建的文档。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:31:31.287

如果文档是 PDF 格式，那么您可以将`Content-Disposition`HTTP 标头设置为`inline`. 它几乎可以在每个现代浏览器中使用。

# c - 掩码 n 个字节

> ID：14499191
> 
> 赞同：0
> 
> 时间：2013-01-24T10:33:12.160
> 
> 标签：c, byte, mask, masking, bitmask

我努力将 uint64_t 变量掩盖 N 个字节。我不知道 N，但我知道它是 8 或更少。我当前的代码如下所示：

```
// uint64_t n is given
uint64_t mask;
for( mask = 0x00; n; n--) {
    mask = mask<<8 | 0xFF;
} 
```

用于构建面具。我在这里做错了什么？

编辑：
这个问题得到了回答。无论如何，为了更好地理解：

我想要这样的面具：

```
0x000000FF // or:
0x0000FFFF // or:
0x00FFFFFF 
```

从数据中获取 1、2 或更多字节。正如评论所说，我的代码有效！也许我有其他错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:37:18.513

根据[运算符优先级表1]，它应该可以工作。

不过，将其写为：

```
mask <<= 8;
mask |= 0xff; 
```

或者：

```
mask = (mask << 8) | 0xff; 
```

当然，您也可以使用查找表来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:47:27.743

我不确定我的问题是否正确，但你的面具看起来像

```
0x00000000000000ff
0x000000000000ffff
0x0000000000ffffff
... 
```

我假设您想要类似以下内容来屏蔽单个字节：

```
0x00000000000000ff
0x000000000000ff00
0x0000000000ff0000
... 
```

为此，您可以使用例如以下代码：

```
for( mask = 0xff; n; n--) {

    // Use the mask HERE
    ...

    mask = mask<<8;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:49:38.860

您可以使用此代码片段将`byteno`第 th 字节替换为`dest`掩码，在`src`：

```
uint64_t replacemyByte(uint64_t src, uint64_t byteno,uint64_t dest) 
{
    uint64_t shift = (dest << (8 * byteno));
    uint64_t mask = 0xff << shift;
    return (~mask & src) | shift;
} 
```

还是我答错了问题？

# java - 如何将任务栏保持在其他窗口的底部？

> ID：14499192
> 
> 赞同：0
> 
> 时间：2013-01-24T10:33:13.760
> 
> 标签：java, taskbar

我尝试制作一个必须全屏的应用程序。但是当我按`CTRL`+ `ALT`+`DEL`任务管理器出现。即使我禁用了任务管理器，此时它的错误消息也会出现并使任务栏可见。然后用户有机会去桌面，但我不希望用户有这个机会。只有用户在执行应用程序想要的操作时才能进入桌面。所以我需要任务栏保持在其他窗口的底部，直到用户完成它应该做的事情。我需要通过我尝试用 Java 编写的应用程序来做到这一点

如何使用注册表更改任务栏的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:17:02.113

为什么不永久禁用任务栏？

按照[此链接](https://stackoverflow.com/questions/9869335/how-can-i-disable-permanently-hide-the-taskbar-in-windows-7)永久禁用任务栏。

您可以`.reg`在 Java 中编辑文件，请点击[此链接](https://stackoverflow.com/questions/10611067/how-to-run-reg-file-in-java-netbeans-code)了解如何编辑`.reg`文件

*“但是我如何在不重置机器的情况下通过 java 做到这一点？”*

据我所知，您必须重新启动系统，没有出路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:12:58.083

在将它们发送到应用程序之前，Windows 会捕获一些击键，++`Ctrl`就是其中之一。`Alt``Del`

关于“然后用户有机会去桌面”，如果您设置 frame.setAlwaysOnTop(true);，用户将无法切换到其他任何应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:01:19.160

好的，我找到了。

当我将 Settings 变量的第 8 字节值更改为 10 时

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\StuckRects2

在注册

它只是取消选择“将任务栏保持在其他窗口之上”选项

为了应用更改 explorer.exe 应该被杀死并重新运行

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T10:51:59.603

您可以使用 java 的全屏 API，然后使用 Robot 将焦点强制返回到您的应用程序。请参阅此处：[Java 全屏程序（Swing）-Tab/ALT F4](https://stackoverflow.com/questions/4462454/java-full-screen-program-swing-tab-alt-f4)。无论你在做什么，祝你好运——听起来不好玩！

# c# - C# 中的动态控件名称

> ID：14499195
> 
> 赞同：2
> 
> 时间：2013-01-24T10:33:32.607
> 
> 标签：c#

我正在尝试以下代码：

```
for (int i = 0; i < students.Length; i++)
{
    "student" + i.ToString().Text = students[i];
} 
```

我已经有许多标签，每个标签的名称如下： student1 student2 student3 。.

但我收到了这个错误：错误 1 ​​'string' 不包含'Text' 的定义，并且找不到接受'string' 类型的第一个参数的扩展方法'Text'（您是否缺少 using 指令或程序集引用?) F:\Homework\Homework\Form1.cs 161 46 家庭作业

请问有什么帮助吗？？！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T10:34:37.690

*几乎任何*语言都不能使用动态变量名称。

看起来您正在寻找一个控件*集合*或*数组*。

就像是：

```
var studentControls = new List<Control>();
studentControls.Add(student1); 
studentControls.Add(student2);
...
for (int i = 0; i < students.Length; i++)
{
    studentControls[i].Text = students[i];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T10:35:39.017

使用 Controls.Find("student" + i.ToString())

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T10:36:39.540

这可能会有所帮助

```
Controls.Find(string.Format("student{0}", i)); 
```

**更好的解决方案：**

设置`Tag`你的属性`Labels`如下：

```
Student1.Tag = 1;
Student2.Tag = 2;
Student3.Tag = 3; 
```

我假设您`Labels`在一个名为`container`. 使用此代码：

```
foreach(var item in container.Children) //based on your container type this line may change
{
    if(item is Label)
    {
        Label temp = ((Label)item);
        temp.Text = students[int.Parse(temp.Tag.ToString())]
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T10:42:30.297

通过这样做`i.ToString()`，您将获得一个字符串，该字符串不具有 Text 属性 :)。这就是导致您的异常的原因。

如果`Students`是具有该属性的控件列表，`.Text`则使用该属性并删除`ToString()`else，删除`.Text`.

# jquery - 使用 jQuery 锁定基于 id 的列

> ID：14499198
> 
> 赞同：1
> 
> 时间：2013-01-24T10:33:43.143
> 
> 标签：jquery

是否可以使用 jquery 根据其 id 锁定列？我见过不同的解决方案，例如标题锁定，有些还可以锁定从左侧开始索引的列。我想要做的是当我单击锁定按钮时，它将锁定列并且在水平滚动时不会移动。

例如，我单击标题 1 上的锁定，水平滚动，然后单击标题 3 上的锁定。标题 1 和标题 3 应该彼此相邻，并且在水平滚动时不应移动。

[点击这里查看图片](http://imm.io/U1MR)

下面是我的代码：

```
<div style="float: left; width: 75%; overflow-x: scroll;">
<table style="width: 200% !important;">
    <tr>
        <td id="lid_1" colspan="3">
            <div style="margin-top: 3px;">
                January 24, 2013
                <button id="lid_1">Lock</button>
            </div>
        </td>
        <td id="lid_2" colspan="3">
            <div style="margin-top: 3px;">
                January 25, 2013
                <button id="lid_2">Lock</button>
            </div>
        </td>
        <td id="lid_3" colspan="3">
            <div style="margin-top: 3px;">
                January 26, 2013
                <button id="lid_3">Lock</button>
            </div>
        </td>
        <td id="lid_4" colspan="3">
            <div style="margin-top: 3px;">
                January 27, 2013
                <button id="lid_4">Lock</button>
            </div>
        </td>
        <td id="lid_5" colspan="3">
            <div style="margin-top: 3px;">
                January 27, 2013
                <button id="lid_5">Lock</button>
            </div>
        </td>
        <td id="lid_6" colspan="3">
            <div style="margin-top: 3px;">
                January 28, 2013
                <button id="lid_6">Lock</button>
            </div>
        </td>
    </tr>
    <tr>
        <td id="lid_1">Header 1</td>
        <td id="lid_1">Header 2</td>
        <td id="lid_1">Header 3</td>
        <td id="lid_2">Header 1</td>
        <td id="lid_2">Header 2</td>
        <td id="lid_2">Header 3</td>
        <td id="lid_3">Header 1</td>
        <td id="lid_3">Header 2</td>
        <td id="lid_3">Header 3</td>
        <td id="lid_4">Header 1</td>
        <td id="lid_4">Header 2</td>
        <td id="lid_4">Header 3</td>
        <td id="lid_5">Header 1</td>
        <td id="lid_5">Header 2</td>
        <td id="lid_5">Header 3</td>
        <td id="lid_6">Header 1</td>
        <td id="lid_6">Header 2</td>
        <td id="lid_6">Header 3</td>
    </tr>
    <tr>
        <td id="lid_1" colspan="3">
            <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                </tr>
                <br/>
            </table>
        </td>
        <td id="lid_2" colspan="3">
            <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                </tr>
                <br/>
            </table>
        </td>
        <td id="lid_3" colspan="3">
            <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                </tr>
                <br/>
            </table>
        </td>
        <td id="lid_4" colspan="3">
            <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                </tr>
                <br/>
            </table>
        </td>
        <td id="lid_5" colspan="3">
            <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                </tr>
                <br/>
            </table>
        </td>
        <td id="lid_6" colspan="3">
            <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                </tr>
                <br/>
            </table>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:33:53.003

好，我知道了。继续[弗里克](https://stackoverflow.com/users/1201967/fricke)

固定列的方法...

看来您需要一张固定列的地图，并防止堆积在另一列之上。它并没有像您认为的那样被替换，只是新修复的可能位于旧的之上。

所以你这样做：

```
var fixedColumns = jQuery();
$('#id_of_column').click(function () {
    var that = $(this);
    if (that.hasClass('locked')) {
        //Unlock
        that.removeClass('locked')
            .css({'left': ''});
        fixedColumns = fixedColumns.not(that);
    } else {
        //Lock
        fixedColumns = fixedColumns.add(that);
        that.addClass('locked');
        orderLockedColumns(fixedColumns);
    }
});

function orderLockedColumns(columns) {
    var that, leftPos, prevCol, prevColWidth, prevColPos;
    columns.each(function (i) {
        that = $(this),
        leftPos = 0;
        if (i !== 0) {
            prevCol = jQuery(columns[i - 1])
            prevColWidth = prevCol.width();
            prevColPos = prevCol.position().left;
            leftPos = prevColPos + prevColWidth
        }
        that.css('left', leftPos+'px');
    })
} 
```

**CSS：**

```
.locked{
  position:fixed;
} 
```

但是我不建议添加基于`id`！

最好使用`class="lockButton"`，然后如果您需要该 id，您可以使用它。所以最好：

```
jQuery(document).on('click','.lockButton'){
   var that = $(this),
   id = that[0].id;
   //... same code
} 
```

此外，由于您没有提供代码，这很糟糕，如果您不提供任何代码，大多数人不会在这里为您提供帮助......所以上面的代码可能不起作用，因为我根本不知道您的标记只是猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:50:35.727

好的，这是您更新的解决方案。但是 id 是唯一的，所以你不应该有 2 个或更多相同的 id。类是一般用例中的工具。如果需要唯一列，但在锁定上下文中不使用它们作为参考，您可以添加唯一 ID，但是当您想使用它做某事时提取 ID。

以下是示例：

[http://jsbin.com/odaxil/5](http://jsbin.com/odaxil/5)

[http://jsbin.com/odaxil/5/edit](http://jsbin.com/odaxil/5/edit)

**js：**

```
(function (window, undefined) {
    jQuery(function () {
        bindings();
    });

    function bindings() {
        var locker = jQuery('#locker');
        jQuery(document).on('click', 'button.lockButton', function () {
            var that = $(this),
                lidClass = '',
                parent = that.parents('td[class^="lid"]');
            if (parent.length) {
                lidClass = getColumnLidClass(parent);
                lockings = jQuery('td.' + lidClass);
                lockings.addClass('locked');
                that.text('Unlock');
                var fixedColumn = $(getLockedWrapper(lockings, lidClass));
                var index = parent.index();
                fixedColumn.data('index', index);

                if (index === 0) {
                    locker.prepend(fixedColumn);
                } else {
                    var lockedWraps = $('div.lockedWrap', locker),
                        lwrap = null,
                        indx, appended = false;
                    if (!lockedWraps.length) locker.append(fixedColumn);
                    lockedWraps.each(function () {
                        lwrap = $(this);
                        indx = lwrap.data('index') * 1;
                        if (!appended && (index < indx)) {
                            lwrap.before(fixedColumn);
                            appended = true;
                            return;
                        }
                    });
                    if (!appended) locker.append(fixedColumn);
                }
                that.text('Lock');
            } else {
                parent = that.parents('div.lockedWrap');
                lidClass = getColumnLidClass(parent);
                lockings = jQuery('td.' + lidClass);
                lockings.removeClass('locked');
                parent.remove();
            }
        });
    }

    function getLockedWrapper(lockings, lidClass) {
        var fixedColumn = [],
            cont;
        lockings.each(function () {
            cont = $(this).html();
            fixedColumn.push('<div class="cellWrap">' + cont + '</div>');
        });
        fixedColumn = '<div class="' + lidClass + ' lockedWrap">' + fixedColumn.join('') + '</div>';
        return fixedColumn;
    }

    function getColumnLidClass(td) {
        for (var i = 0; i < 100; i++) {
            if (td.hasClass('lid_' + i)) break;
        }
        return 'lid_' + i;
    }
})(); 
```

**HTML：**

```
<div id="locker"></div>
<div style="float: left; width: 75%; overflow-x: scroll;">
    <table style="width: 200% !important;">
        <tr>
            <td class="lid_1" colspan="3">
                <div style="margin-top: 3px;">January 24, 2013
                    <button class="lockButton" id="lid_1">Lock</button>
                </div>
            </td>
            <td class="lid_2" colspan="3">
                <div style="margin-top: 3px;">January 25, 2013
                    <button class="lockButton" id="lid_2">Lock</button>
                </div>
            </td>
            <td class="lid_3" colspan="3">
                <div style="margin-top: 3px;">January 26, 2013
                    <button class="lockButton" id="lid_3">Lock</button>
                </div>
            </td>
            <td class="lid_4" colspan="3">
                <div style="margin-top: 3px;">January 27, 2013
                    <button class="lockButton" id="lid_4">Lock</button>
                </div>
            </td>
            <td class="lid_5" colspan="3">
                <div style="margin-top: 3px;">January 27, 2013
                    <button class="lockButton" id="lid_5">Lock</button>
                </div>
            </td>
            <td class="lid_6" colspan="3">
                <div style="margin-top: 3px;">January 28, 2013
                    <button class="lockButton" id="lid_6">Lock</button>
                </div>
            </td>
        </tr>
        <tr>
            <td class="lid_1">Header 1</td>
            <td class="lid_1">Header 2</td>
            <td class="lid_1">Header 3</td>
            <td class="lid_2">Header 1</td>
            <td class="lid_2">Header 2</td>
            <td class="lid_2">Header 3</td>
            <td class="lid_3">Header 1</td>
            <td class="lid_3">Header 2</td>
            <td class="lid_3">Header 3</td>
            <td class="lid_4">Header 1</td>
            <td class="lid_4">Header 2</td>
            <td class="lid_4">Header 3</td>
            <td class="lid_5">Header 1</td>
            <td class="lid_5">Header 2</td>
            <td class="lid_5">Header 3</td>
            <td class="lid_6">Header 1</td>
            <td class="lid_6">Header 2</td>
            <td class="lid_6">Header 3</td>
        </tr>
        <tr>
            <td class="lid_1" colspan="3">
                <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                    </tr>
                    <br/>
                </table>
            </td>
            <td class="lid_2" colspan="3">
                <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                    </tr>
                    <br/>
                </table>
            </td>
            <td class="lid_3" colspan="3">
                <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                    </tr>
                    <br/>
                </table>
            </td>
            <td class="lid_4" colspan="3">
                <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                    </tr>
                    <br/>
                </table>
            </td>
            <td class="lid_5" colspan="3">
                <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                    </tr>
                    <br/>
                </table>
            </td>
            <td class="lid_6" colspan="3">
                <table style="width:100.1%; margin-top: -17px !important; margin-left: -1px !important;">
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                    </tr>
                    <br/>
                </table>
            </td>
        </tr>
    </table>
</div> 
```

**CSS：**

```
.locked{
  display:none;
}
#locker{
  float: left;
  min-width: 100px;
  min-height: 110px;
  background-color: #333;
}
div.lockedWrap{
  float:left;
  margin-right:1px;
  background-color: orange;
} 
```

# java - Spring 和 Klout Api

> ID：14499203
> 
> 赞同：0
> 
> 时间：2013-01-24T10:34:14.260
> 
> 标签：java, spring, klout

虽然我可以使用 Spring Social 框架从他在 Twitter 或 Facebook 上的帐户中获取推荐给用户的信息，但有没有办法使用 Klout v2 api 获取信息？实际上，似乎需要一个 http get 请求。那么，我怎样才能使用我的 api 密钥来获取这些信息呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:48:39.987

Klout API 为您提供给定用户（twitter 或 google plus）的影响力分数和主题。它不提供任何个人资料信息。需要使用源 API（Spring Social 等包装器）来检索这些信息。如果你想使用 klout v2 API 来获取影响力分数等，你可以使用这个 Java 包装器 - [http://code.google.com/p/klout4java/](http://code.google.com/p/klout4java/)

# php - 将ahref更改为单选按钮的简单方法？

> ID：14499204
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:34:14.353
> 
> 标签：php, forms, radio-button, hyperlink

我在 oscommerce 中有一些代码，使客户能够通过单击文本链接查看包含增值税或不含增值税的价格。我想将文本链接更改为如下所示：

“显示价格 [ X ] 含增值税 [ ] 不含增值税”（其中 [ ] 是单选按钮）

我尝试了一些我在网上找到的不同解决方案，但我不够熟练。我希望有人可以快速查看并给我一个提示？=)

```
<?php echo
'  <div>' .
'    ' . ((DISPLAY_PRICE_WITH_TAX == 'true') ? '<strong>' . TEXT_DISPLAYING_PRICES_WITH_TAX . '</strong>' : '<a href="' . tep_href_link(FILENAME_DEFAULT, 'action=toggle_tax&display_tax=true&uri='. urlencode($_SERVER['REQUEST_URI'])) . '">' . TEXT_DISPLAY_PRICES_WITH_TAX . '</a>') . '' .
'    ' . ((DISPLAY_PRICE_WITH_TAX == 'false') ? '<strong>' . TEXT_DISPLAYING_PRICES_WITHOUT_TAX . '</strong>' : '<a href="' . tep_href_link(FILENAME_DEFAULT, 'action=toggle_tax&display_tax=false&uri='. urlencode($_SERVER['REQUEST_URI'])) . '">' . TEXT_DISPLAY_PRICES_WITHOUT_TAX . '</a>') . 
'  </div>'?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:18:33.587

如果您正在尝试做我认为您正在尝试做的事情，那么您希望允许用户显示含税/不含税的价格。

一种可能性是使用[jQuery](http://jquery.com/)，一个 JavaScript 库。

如果您决定走这条路，您可以将每个价格打印到页面上，但隐藏用户不想看到的价格。

```
<html>
<head>

<!-- Include the jQuery Library via CDN -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

</head>
<body>

<!-- Display Prices, hide one -->
<div class="with_vat">$xxx</div>
<div class="without_vat" style="display:none">$yyy</div>

<!-- Options -->
<input type="radio" name="vat_choice" value="1" checked />  Show Vat
<input type="radio" name="vat_choice" value="0" />  Exclude Vat

<!-- jQuery to Hide/Show the divs when radio is changed -->
<script>
$("input[name='vat_choice']").change(function(){

  // Get Value
  var vatChoice = $(this).val();

  if(vatChoice == 1){

    $('.with_vat').show();
    $('.without_vat').hide();

  }
  else{

    $('.with_vat').hide();
    $('.without_vat').show();

  }

});
</script>

</body>
</html> 
```

您可以在此处查看实际代码：http: [//jsfiddle.net/PKh3y/](http://jsfiddle.net/PKh3y/)。

您还可以通过单击单选按钮时重定向来实现所需的结果。下面的解决方案确实使用了（一点点）PHP。

```
<html>
<head>

<!-- Include the jQuery Library via CDN -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

</head>
<body>

<!-- Display Prices depending on $_GET parameters -->
<?php if(!isset($_GET['without_vat'])): ?>
<div class="with_vat">$xxx</div>
<?php else: ?>
<div class="without_vat">$yyy</div>
<?php endif; ?>

<!-- Options -->
<input type="radio" name="vat_choice" value="1" checked />  Show Vat
<input type="radio" name="vat_choice" value="0" />  Exclude Vat

<!-- jQuery to redirect when radio is changed -->
<script>
$("input[name='vat_choice']").change(function(){

  // Get Value
  var vatChoice = $(this).val();

  if(vatChoice == 1){

     window.location = 'http://example.com/';

  }
  else{

    window.location = 'http://example.com/?without_vat=1';

  }

});
</script>

</body>
</html> 
```

我希望能回答你的问题，祝你好运！

# xcode - 如果 VALID_ARCHS 设置为 armv7 armv7a，那么 xcode 如何为模拟器构建？

> ID：14499209
> 
> 赞同：5
> 
> 时间：2013-01-24T10:34:29.040
> 
> 标签：xcode, architecture, simulator

我正在尝试解决一个我非常感谢解释的神秘难题，因为这将帮助我理解这些工具并对我所做的事情充满信心。

在启动 xcodebuild 命令行来构建我的 iPhone 应用程序时，我遇到了这个难题。我发现它拒绝“-sdk iphonesimulator6.0”并显示以下消息：“**没有要编译的架构（ARCHS = i386，VALID_ARCHS = armv7）。**"

然后我看到我的 VALID_ARCHS 设置为 armv7，这似乎解释了为什么 xcodebuild 拒绝为模拟器构建（我让自己相信是英特尔）。但是我的 XCode IDE 究竟是如何绕过它并设法为模拟器构建的（它确实如此）？

将 VALID_ARCHS 更改为： VALID_ARCHS = "$(ARCHS_STANDARD_32_BIT)";（扩展为 armv7 和 armv7a）或 VALID_ARCHS = armv7 i386 似乎已经满足 xcodebuild 足以同意为模拟器构建。请注意，第一个案例仍然没有列出 i386！我必须得出结论，在某些情况下，i386 变得隐含。任何人都可以确认和/或扩展其中的任何内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-07T08:50:10.950

当 xcode 在 i386 上构建时，它会更改这些变量，您可以在 xcode 日志导航器中看到这一点...

这些是 xcode 操作的变量，以便允许在 i386 上运行

VALID_ARCHS=i386 ARCHS=i386

您可以通过以下方式调用 xcodebuild 命令来执行相同操作：

```
xcrun xcodebuild VALID_ARCHS=i386 ARCHS=i386 ONLY_ACTIVE_ARCH=NO -arch i386 -sdk iphonesimulator7.1 -configuration Debug 
```

# css - 如何在codeigniter中加载css？

> ID：14499220
> 
> 赞同：1
> 
> 时间：2013-01-24T10:34:46.743
> 
> 标签：css, codeigniter, load

当我尝试使用默认控制器加载页面时，我的页面无法加载 CSS，如下所示：`//localhost/mysite/`

但是，当我尝试像这样加载页面时`//localhost/mysite/index.php/site/index css`，CSS 已完美加载，我必须像这样创建我的 css 和图像文件夹：

路径`C:\wamp\www\tt\assets\css`和所有其他应用程序路径都在 tt 的根路径中`c:\wamp\www\tt\application`。

请尽快给我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:07:42.990

在您的 tt 文件夹中创建一个 .htaccess 文件。并将其从您的网址中删除 index.php ：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

你应该可以直接访问你的文件`<?php echo base_url()."tt/assets/css/cssfilename.css" ?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:04:10.027

您应该授予资产文件夹的读/写权限，并且您应该使用此脚本来链接 css

```
<link rel="stylesheet" href="<?php echo base_url('assets/css/style.css');?>"> 
```

# sql - Zend Framework 2 Zend\Db\Select 如何加入另一个 Select

> ID：14499221
> 
> 赞同：1
> 
> 时间：2013-01-24T10:34:52.017
> 
> 标签：sql, join, zend-framework2

如何与另一个选择对象进行连接？我需要这样的查询

```
$select->join(array('alias' => $subSelect), 'on clause', 'array('*'), 'left'); 
```

这样的事情在 ZF1.x 中是可能的。

在 ZF2 中，join 方法的第一个参数是带有别名的表或数组的名称，但我不能放在那里 \Select。即使我放在这里

```
$select->getSqlString($this->adapter->platform); 
```

字符串被引用，并且查询无效。Join 也不会添加括号。这真的很混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:21:29.353

也许这会对你有所帮助。这是我在 TableGateway 中的一个工作示例：

```
public function Profile($params)
{
    $result = $this->select(function (Select $select) use ($params) {
        $select
            ->columns(array(
                'ipaddress_type',
                'ipaddress',
                'domain'
            ))
            ->join('product_hosting_profile', 'product_hosting_profile.productid = webaccount.productid', array(
                'servers',
                'services'
            ))
            ->where(array(
                $this->adapter->getPlatform()->quoteIdentifierChain(array('webaccount', 'accountid')) . ' = ' . $this->adapter->getPlatform()->quoteValue($params['accountid']),
                $this->adapter->getPlatform()->quoteIdentifierChain(array('webaccount', 'productid')) . ' = ' . $this->adapter->getPlatform()->quoteValue($params['productid']),
                $this->adapter->getPlatform()->quoteIdentifierChain(array('webaccount', 'webaccountid')). ' = ' . $this->adapter->getPlatform()->quoteValue($params['webaccountid'])
            ))
            ->limit(1);
    });

    return $result->current();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-11T08:28:15.663

```
$subSelect=new Select(array('A'=>new TableIdentifier('target','CAT')));
    $subSelect->columns(array('fk_w','TI'=>'id','mtarget_f'=>new Expression('sum(F)'),
                'mcost'=>new Expression('round(sum(F*D.mcost),2)')))
    ->join(array('B'=>new TableIdentifier('item','CAT')),'B.id=A.fk_w',
            array())
                    ->join(array('D'=>new TableIdentifier('rate','CAT')),'A.dat=D.year and D.fk_c=B.CCODE and D.fk_b=A.fk_b',
                            array())
                            ->where->equalTo('Year', $year);

    $select=new Select(array('A'=>new TableIdentifier('item','CAT')));
    $select->columns(array('WID'=>'id','AID'=>'AID',
                'item'=>'ITEM_ID','Wtitle'=>'WTITLE'))
    ->join(array('B'=>new TableIdentifier('cn','CAT')),'B.id=A.CCODE',
            array('Ct'=>'name'))
    ->join(array('S'=>$subSelect),'S.fk_w=A.id',array('Mtarget'=>'mcost',
                    'MTarget'=>'m_target',                  
                    'TID'),'left'); 
```

# c# - 调用 DataContext.SubmitChanges() 时出现 StackOverflowException

> ID：14499225
> 
> 赞同：2
> 
> 时间：2013-01-24T10:35:12.707
> 
> 标签：c#, .net, linq-to-sql, .net-3.5

我正在使用`Linq-To-SQL`对具有以下定义的表执行插入操作（省略一些多余的字段）：

```
ID int not null
SourceName varchar(100)
Version int not null
TransactionID int not null
Xml nvarchar(max) 
```

`ID`, `SourceName`,`Version`并`TransactionID`构成表的主键。没有外键或约束。

我`DataContext`为我的数据库创建一个，然后创建一个新记录。当我调用`SubmitChanges`我的 DataContext时，`StackOverflowException`会抛出一个。

```
using (var ctx = new MyDataContext(connectionString))
{
    var row = new MyTable
    {
        ID = 1
        , SourceName = "foo"
        , Version = 1
        , TransactionID = 0 //this is the weird part - see below
        , Xml = "some xml string"
    }

    ctx.MyTable.InsertOnSubmit(row);
    ctx.SubmitChanges();
} 
```

但是，经过大量的值替换和反复试验，`StackOverflowException`如果我更改为 1，则不会抛出`TransactionID`（我最初假设 Xml 字段以某种方式溢出）。

我使用 0 仅用于由于某种原因无法识别事务 id 的情况。

我显然用谷歌搜索了这个，但我发现的唯一相关问题是由外键关系引起的。

有人知道为什么会这样吗？我有一个解决方法，但很好奇可能是什么原因。

我正在使用 .Net 3.5 和 SQL Server 2005。

# ruby-on-rails-3 - 运行黄瓜时动作视图模板错误

> ID：14499227
> 
> 赞同：1
> 
> 时间：2013-01-24T10:35:16.673
> 
> 标签：ruby-on-rails-3, cucumber, capybara, bdd

这是一个黄瓜场景：

```
Scenario: Login
Given the user is on Login page
When I sign in 
```

我的步骤定义：

```
When /I sign in/ do
  within("#mypage") do
    fill_in 'login_id', :with => 'ccd'
    fill_in 'password', :with => 'coffee'
  end
  click_button 'Login'
  visit '/feedbacks/'
end 
```

当我运行黄瓜时，我收到以下错误：

```
Scenario: Login                 # features\heartbeat_tests.feature:20
Given the user is on Login page # features/step_definitions/heartbeat_definitions.rb:5
When I sign in                  # features/step_definitions/heartbeat_definitions.rb:18
undefined method `each' for nil:NilClass (ActionView::Template::Error)
D:/shoutout_web/app/views/layouts/application.html.erb:256:in          
`_app_views_layouts_application_html_erb__124036717_28160832' 
```

# javascript - JavaScript：创建多维数组

> ID：14499228
> 
> 赞同：1
> 
> 时间：2013-01-24T10:35:16.540
> 
> 标签：javascript, multidimensional-array

我制作了一个数组，用于循环遍历表（最初是隐藏的）并根据请求的部分显示某些行：

```
var rows_per_section = [ {min: 0, max: 7}, {min: 7, max: 17}, {min: 17, max: 21}, {min: 21, max: 35}, {min: 35, max: 41}, {min: 41, max: 46}, {min: 46, max: 52},{min: 52, max: 56} ];
var rows_min = rows_per_section[section_no].min;
var rows_max = rows_per_section[section_no].max; 
```

我现在正在尝试使用一个额外的函数来更改脚本，该函数循环遍历表并自行创建 rows_per_section 数组，因为表的长度可以改变。我可以通过查找类标记来检测表中的中断，但我无法弄清楚如何创建数组并在每次遇到中断时添加新值：

```
function create_section_array(profile_table, no_of_sections) {
    var section_counter = 0;
    var rows_per_section = new Array();    //this is where it starts to go wrong
                                           //need to create the array and stick in the
                                           //MIN value for the first section as 0
    for (i=0;i<profile_table.length-1;i++) {
        var table_row = profile_table.item(i);
        var row_content = table_row.getElementsByTagName("td");
        if(row_content[0].className == "ProfileFormTitle") {
            if(section_counter != 0) {
                //if not the first section add a MAX value to
                //rows_per_section[section_counter + 1]
            }
            if(section_counter != no_of_sections) {
                //if not the last section add a MIN value to
                //rows_per_section[section_counter]
            }
            section_counter++;
        }
    }
    return rows_per_section;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:41:04.560

我会将您的函数修改为如下所示：

```
function create_section_array (profile_table, no_of_sections) {
    var section_counter = 0,
        rows_per_section = [ { min: 0 } ],
        precedingLength = 0,
        i, row_content;

    for (i = 0; i < profile_table.length; i += 1) {
        row_content = profile_table[i].getElementsByTagName('td');

        if (row_content[0].className === 'ProfileFormTitle') {
            if (section_counter !== 0) {
                rows_per_section[section_counter] = {
                    max: row_content.length - 1
                };
            }

            if (section_counter !== no_of_sections) {
                rows_per_section[section_counter].min = precedingLength;
            }

            section_counter += 1;
            precedingLength += row_content.length;
        }
    }

    return rows_per_section;
} 
```

关于上面的几点说明：

*   `i`最初没有明确声明，这意味着它存在于全球范围内。我已经添加了声明。

*   JavaScript 中没有块作用域，只有函数作用域（[vars 被提升](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var#var_hoisting)）。我已将声明移至`row_content`函数顶部，因为这是流行的惯用风格。

*   运算符`==`并`!=` [执行类型强制](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)。坚持使用`===`和`!==`代替通常更安全。

*   您可以使用文字语法声明数组，不需要`new Array()`. 在您的情况下，我们初始化 using`[ { min: 0 } ]`以设置基本所需的结构，但更常见的是您看到人们使用空数组进行初始化，`[]`.

*   同样，在数组中设置新索引的值时，我们可以对基本所需结构使用文字对象语法。在你的情况下，这是`{ max: row_content.length - 1 }`.

*   从技术上讲，这不是一个多维数组，它是一个对象数组（或字典、映射、键/值存储，无论您想如何称呼它们）。

*   我实际上并没有运行上述内容，只是对您的问题的上下文有一种模糊的感觉。此代码可能存在（可能？）问题！:)

# php - cake php 2.0 登录认证

> ID：14499229
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:35:21.930
> 
> 标签：php, cakephp

这可能是我关于身份验证的第二个问题。但我仍然无法验证我的登录表单..因此我决定再次发布我的代码。那么谁能告诉我身份验证是如何完成的？？？？

```
//this is my index page, where a user logs in
<div align="center">
<h2> ONLINE LIBRARY SYSTEM </h2>
<h4> If you have already registered into our library system . Please Login below </h4?
<br />
</div>
<div class="form">
<fieldset>
<?php
echo $this->Form->create('Member');
echo $this->Form->input('username');
echo $this->Form->input('password');
echo $this->Form->end('Login');
?>
<h4> If not registerd. Register here <?php echo $this->Html->link('Register     Now',array('controller'=>'members','action'=>'register')); ?> </h4>
</fieldset>
</div> 
```

我需要在我的索引函数中提到什么？

```
function index()
{

} 
```

我必须在哪里编写/调用 Auth 组件......？？？谁能给我解释一下……请不要张贴食谱的链接……我读了将近 4 次，并没有完全理解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:52:46.643

当用户调用控制器时，通常会调用 index 函数，而无需指定操作。例如：`http://localhost/cake/<some-controller>`

. 因此，进入 index() 函数的内容取决于您想要显示的内容，如果用户没有指定特定操作，例如`http://localhost/cake/<some-controller>/<some-action>`（例如`http://localhost/cake/library/show_book`。

作为一种实践，大多数开发人员将上述代码（登录内容）放入`login()`函数中。

以下是一些附加信息，您可以阅读这些信息，以使身份验证正常工作：

*   添加“Auth”作为组件之一；
*   在 AppController 中修改 beforeFilter
*   如果任何操作应该绕过身份验证方案，请在每个控制器中修改 beforeFilter。

# powerpivot - 如何在 PowerPivot 中获取第二个 MIN 值或跨列 MIN 值？

> ID：14499230
> 
> 赞同：0
> 
> 时间：2013-01-24T10:35:26.877
> 
> 标签：powerpivot, dax

我有一个有趣的表，我无法弄清楚如何获得第二个最小值或类似的操作。这是我的表格的示例样式：

```
 Column1   Column2   Column3
   A          A          0
   A          C         11
   A          D          7
   B          X         11
   B          B          0
   A          E          5
   B          Y         17
   A          F          4 
```

我需要在 Column3 中找到每个 A 或 B（来自 Column1）的最小值。但 A=A (column1=column2) 或 B=B 行不应包含在此 MIN 计算中。但是找到的 A 值应该显示在 A=A 行上，或者 B 的最小值应该显示在 B=B 行上。

还尝试了这个计算：

IF([Column1]<>[Column2],CALCULATE( **MIN** ([Column3]),ALL(myTable),myTable[Column2]=EARLIER(myTable[Column2])),0) --> 从 Column3 返回相同的值每一行。

IF([Column1]=[Column2],CALCULATE( **MIN** ([Column3]),ALL(myTable),myTable[Column2]=EARLIER(myTable[Column2])),0) --> 从 Column3 为每个返回最小值A=A 或 B=B 行正确。A=A 或 B=B 行包含数据，因为值为 0。如果我将其更改为 1，则此计算返回 1。但我需要其他行最小值。

IF([Column1]=[Column2],CALCULATE( **MAX** ([Column3]),ALL(myTable),myTable[Column1]=EARLIER(myTable[Column1])),0) --> 这个计算就像一个魅力最大值。因为最高值将始终在其他行中。

PS：A=A 或 B=B 行的默认值在 Column3 中始终为 0。

我卡在这一点上=/谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:31:22.183

使用（在计算列中）：

```
=CALCULATE(MIN([Column3]),FILTER(myTable,myTable[Column1]=EARLIER(myTable[Column1])),myTable[bColumn]) 
```

其中 myTable[bColumn] 是计算列

```
=myTable[Column1]<>myTable[Column2] 
```

如果您希望在度量而不是计算列中使用公式，请使用：

=CALCULATE(MIN([Column3]),FILTER(ALL(myTable),COUNTROWS(FILTER(myTable,myTable[Column1]=EARLIER(myTable[Column1])))),myTable[bColumn])

！

# ruby-on-rails - 点击提交按钮状态更改在 ruby on rails

> ID：14499233
> 
> 赞同：1
> 
> 时间：2013-01-24T10:35:51.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, submit, onsubmit, states

当用户单击我想在该按钮上进行这些转换时，我想更改为提交按钮的状态。

```
Text change to "submitting..." and state of that submit button becomes "disabled" 
```

我知道如何使用 Jquery 来做到这一点，例如：

假设按钮有一个#derp id。

```
$("#derp").click(function(){
   this.toggleClass("pressed");
}); 
```

基本上，这将根据其状态从项目中添加或删除“按下”类。只需为 .pressed 添加 css 即可。

```
#derp {...}
#derp:hover {...}
#derp:active {...}
#derp.pressed {...} 
```

或者我们使用不同的选择器。

**问题：ruby on rails 中是否有默认功能。**

**更新：** 我正在使用基于 ajax 的表单提交，当我尝试快速单击 2-3 次表单提交时。它实际上提交了2-3次。我想阻止那件事，我正在使用 simple_form

```
<%= f.button :submit, "Submit Review", :disable_with => "Processing..." %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:40:07.053

您可以使用`:disable_with`选项：

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-button_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-button_tag)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:41:09.797

要使[:disable_with](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-button_tag)与 Ajax Remote 一起使用，您必须编辑您的[public/javascripts/rails.js 并更改](http://www.seanbehan.com/rails-3-disable_with-does-not-work-with-ajax-remote-form_for)

```
document.on("ajax:after", "form", function(event, element) { 
```

到

```
document.on("ajax:complete", "form", function(event, element) { 
```

# validation - 使用 asp.net Web API 的模型绑定和验证属性问题

> ID：14499244
> 
> 赞同：1
> 
> 时间：2013-01-24T10:36:33.457
> 
> 标签：validation, asp.net-web-api, model-binding

我正在使用 ASP.NET Web API 编写 Web API，并使用以下视图模型。当特定属性（即 [Required] 和 [StringLength(10)]）上有两个验证属性时，我似乎遇到了数据绑定问题。

将 JSON 值从客户端发布到表单的控制器操作时：

// 发布 api/列表

公共无效帖子（[FromBody] TaskViewModel taskVM）

我观察到以下几点：

*   如果我删除多个属性之一，一切都绑定好了；
*   如果我保留多个属性，客户端会收到 500 内部服务器错误，并且永远不会到达 Post 方法的主体。

任何想法为什么会发生这种情况？干杯

```
public class TaskViewModel
{

    //Default Constructor
    public TaskViewModel() { }

    public static TaskViewModel MakeTaskViewModel(Task task) 
    {
        return new TaskViewModel(task);
    }

    //Constructor
    private TaskViewModel(Task task)
    {
        this.TaskId = task.TaskID;
        this.Description = task.Description;
        this.StartDate = task.StartDate;
        this.Status = task.Status;
        this.ListID = task.ListID;
    }

    public Guid TaskId { get; set; }

    [Required]
    [StringLength(10)]
    public string Description { get; set; }

    [Required]
    [DataType(DataType.DateTime)]
    public System.DateTime StartDate { get; set; }

    [Required]
    public string Status { get; set; }        

    public System.Guid ListID { get; set; }       
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T12:00:59.267

您需要检查 500 内部服务器中的内容

*   确保在 web.config 中关闭[customerror](http://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.71%29.aspx)
*   如果你自己托管 web.API，你需要设置`GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;`
*   使用浏览器开发控制台的网络选项卡（在 IE、Chrome 中，您可以使用 F12 获取控制台），或者如果您使用的是 FireFox，则使用 FireBug 或[Fiddler](http://www.fiddler2.com/fiddler2/)等第三方工具。

然后您可以查看服务器上出了什么问题，并进一步解决您的问题。

在您的情况下，这是在响应中：

> "Message":"发生错误。","ExceptionMessage":"类型 'MvcApplication3.Controllers.TaskViewModel' 上的属性 'StartDate' 无效。**标记为 [Required] 的值类型属性也必须标记为 [DataMember( IsRequired=true)] 被认为是必需**的。考虑使用 [DataContract] 和属性使用 [DataMember(IsRequired=true)]。","ExceptionType":"System.InvalidOperationException"

所以你的问题不是你有两个属性，而是你已经标记了你的属性`[Required]`来解决这个异常告诉你该怎么做。

`[DataMember(IsRequired=true)]`您需要在属性类型是值类型（例如 int、datatime 等）的情况下添加所需的属性：

因此，将您的更改`TaskViewModel`为：

```
[DataContract]
public class TaskViewModel
{

    //Default Constructor
    public TaskViewModel() { }

    [DataMember]
    public Guid TaskId { get; set; }

    [Required]
    [DataMember]
    [StringLength(10)]
    public string Description { get; set; }

    [Required]
    [DataMember(IsRequired = true)]
    [DataType(DataType.DateTime)]
    public System.DateTime StartDate { get; set; }

    [Required]
    [DataMember]
    public string Status { get; set; }

    [DataMember]
    public System.Guid ListID { get; set; }
} 
```

一些旁注：

*   您需要引用 System.Runtime.Serialization dll 才能使用`DataMemberAttribute`
*   您需要标记您的类，`[DataContract]`并且您需要标记它的所有属性，`[DataMember]`而不仅仅是必需的属性。

# php - wp_list_pages Removing the Title

> ID：14499249
> 
> 赞同：1
> 
> 时间：2013-01-24T10:36:48.153
> 
> 标签：php, wordpress

Good morning,

I am using this snippet of code to pull up a sub nav in my side menu that only shows the children of the current page. But the code is automatically generating a title to the subnav called "Pages"

How do I remove this title?

```
<?php
    wp_list_pages( array('child_of' => $post->ID,'depth' => 1,));
?> 
```

[http://www.trevorpeters.co.uk/landfordstone-wordpress/?page_id=752](http://www.trevorpeters.co.uk/landfordstone-wordpress/?page_id=752)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:50:26.770

I have found the answer myself with this edit of the code above.

```
<?php
    wp_list_pages( array(
        'child_of' => $post->ID,
        'depth' => 1,
        'title_li' => ''
));
?> 
```

# css - 仅当 Webfont 不支持字符时才使用粗体粗体

> ID：14499250
> 
> 赞同：0
> 
> 时间：2013-01-24T10:36:48.830
> 
> 标签：css, font-face

我正在使用只支持大多数拉丁字符的网络字体。但是，该网站是多语言的，俄语是其中一种语言。您可能知道，俄语由西里尔字符组成，然后显示在辅助字体系列中。我发现 Verdana + font-weight:bold 是一个不错的选择。

但是，font-weight bold 只需要与 Verdana 相关，所以我不能把它写到普通的 CSS 中，因为 webfont 不应该显示为粗体。这里有一些无效的尝试：

CSS：

```
@font-face {
  font-family: "some Webfont";
  src:url('xyz.eot')
}

/* The font-weight won't work here */
@font-face {
  font-family: "Verdana-Bld";
  src:
    local('Verdana');
  font-weight:bold;
}

/* Doesn't work in IE9 at all */
@font-face {
  font-family: "Verdana-Bld";
  src:
    local('Verdana Bold');
}

/* Doesn't work in IE9 at all */
@font-face {
  font-family: "Verdana-Bld";
  src:
    local('Verdana Bold');
}

.container {
  font-family:"some Webfont", "Verdana-Bld";
} 
```

所以 font-face 可能不是这里的解决方案，Verdana Bold 似乎是一个好方法，但是，在像这样的普通 CSS 中使用它时它不起作用：

```
.container {
  font-family:"some Webfont", "Verdana Bold";
} 
```

我不明白，当使用@font-face 时，它​​会找到并呈现该字体，但在用作字体系列时却没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:26:36.000

Verdana Bold 实际上只是 Verdana 字体家族的一种字体，应该通过设置来使用`font-family: Verdana; font-weight: bold`。在某些情况下，可以像使用字体系列一样使用字体，方法是将其名称声明为 的值`font-family`，但这取决于浏览器并且也取决于字体；对于 Verdana Bold，这个技巧似乎不起作用。如您所见，更复杂的使用技巧`@font-face`适用于某些浏览器，但不是全部；这甚至取决于您使用的字体名称（例如，“完整字体名称”`Verdana Bold`与 PostScript 字体名称`Verdana-Bold`）。

因此需要一种不同的方法：尝试找到一种涵盖所有所需字符的字体。例如，在[Google web fonts](http://www.google.com/webfonts)中，您可以将“Script”设置为“Cyrillic”以查找支持俄语字母的字体。这种字体通常也支持拉丁字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:52:42.273

所以 font-face 中的 font-weight 并没有设置 font-weight ，而是一种过滤器，供浏览器决定它是否是要使用的正确字体。因此，当浏览器查看要显示的字体时，它将选择您设置 font-weight: bold 的字体，只要您当前的文本是粗体，并且在任何其他情况下都会采用另一个字体。

我认为实际上可以使一种字体为粗体，另一种为常规字体，只要您可以直接在 font-face 中调用它。（所以如果你可以有类似的东西`local('Verdana Bold')`。那么只需摆脱 font-face:bold 它应该可以正常工作。

# facebook - 您将如何编写类似于 Facebook Graph Search 的 Parser

> ID：14499255
> 
> 赞同：4
> 
> 时间：2013-01-24T10:36:59.480
> 
> 标签：facebook, algorithm, parsing, search

我已经阅读了很多文章，提供了一些关于 Facebook 如何实现他们的 Graph Search 的背景信息。所有这些似乎只是浏览了他们正在使用的解析器的实际实现细节。

如[https://www.facebook.com/notes/facebook-engineering/under-the-hood-building-graph-search-beta/10151240856103920](https://www.facebook.com/notes/facebook-engineering/under-the-hood-building-graph-search-beta/10151240856103920)

从该页面：

> 我们结合了各种解析技术来构建子字符串解析器：假设用户输入，比如“friends New York”，并且我们已经定义了系统可以处理的所有潜在页面标题的综合集合。然后，我们的解析器可以准确地生成包含用户输入的 Graph Search 标题，包括诸如“住在纽约的朋友”和“访问过纽约的朋友”之类的内容。如果我们能找到一种方法来为 Graph Search typeahead 对这些建议的标题进行适当的排名，我们将有一个良好的开端。

我真的很想了解解决这个问题的方法。将使用什么算法/技术来编写这样的系统？

任何链接也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T09:04:47.193

我正在考虑实现类似的东西..想在这里问Q，发现这已经被问过了..

这是我一直在想的开始-

1.  假设 facebook 搜索引擎“知道”底层数据存储（一个复杂的图形）。所以搜索引擎理解“朋友”、“亲戚”等关系的关键词，而不是把它们当作英语中的一个微不足道的词。

2.  在这种情况下，一个好主意可能是将用户输入（使用客户端 javascript）解析为 JSON 并将其发送到搜索引擎 .. 几个好处 .. 解析可以在客户端完成，节省网络带宽通过不发送不需要的数据，服务器端处理解析输入作为 JSON 更好..等等

3.  让我们称它为 JSON fbJSON .. 因为除了是 JSON .. 它还遵循某种格式.. 您可以为您的格式创建规范.. 这样发送到搜索引擎的 JSON 必然包含一些信息..这可以让生活更轻松..就像我们有 geoJSON 等..

4.  使用 NLP 程序将用户输入解析为 fbJSON [我仍然要考虑这个]

这是我开始着手的一种广泛的方法。唯一的瓶颈是第 4 点。因为我对 NLP 没有太多经验。

# android - 双击edittext字段崩溃并重新启动应用程序

> ID：14499263
> 
> 赞同：0
> 
> 时间：2013-01-24T10:37:14.073
> 
> 标签：android, android-layout, android-edittext

**我的错误如下图**

```
 01-24 10:07:51.053: E/AndroidRuntime(809): FATAL EXCEPTION: main
01-24 10:07:51.053: E/AndroidRuntime(809): java.lang.IllegalStateException: Could not find a method res/drawable-hdpi/textfield_activated_holo_light.9.png(View) in the activity class com.example.iolcalci.Selection for onClick handler on view class android.widget.EditText with id 'k1_editText'
01-24 10:07:51.053: E/AndroidRuntime(809):  at android.view.View$1.onClick(View.java:3584)
01-24 10:07:51.053: E/AndroidRuntime(809):  at android.view.View.performClick(View.java:4202)
01-24 10:07:51.053: E/AndroidRuntime(809):  at android.view.View$PerformClick.run(View.java:17340)
01-24 10:07:51.053: E/AndroidRuntime(809):  at android.os.Handler.handleCallback(Handler.java:725)
01-24 10:07:51.053: E/AndroidRuntime(809):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-24 10:07:51.053: E/AndroidRuntime(809):  at android.os.Looper.loop(Looper.java:137)
01-24 10:07:51.053: E/AndroidRuntime(809):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-24 10:07:51.053: E/AndroidRuntime(809):  at java.lang.reflect.Method.invokeNative(Native Method)
01-24 10:07:51.053: E/AndroidRuntime(809):  at java.lang.reflect.Method.invoke(Method.java:511)
01-24 10:07:51.053: E/AndroidRuntime(809):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-24 10:07:51.053: E/AndroidRuntime(809):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-24 10:07:51.053: E/AndroidRuntime(809):  at dalvik.system.NativeStart.main(Native Method)
01-24 10:07:51.053: E/AndroidRuntime(809): Caused by: java.lang.NoSuchMethodException: res/drawable-hdpi/textfield_activated_holo_light.9.png [class android.view.View]
01-24 10:07:51.053: E/AndroidRuntime(809):  at java.lang.Class.getConstructorOrMethod(Class.java:460)
01-24 10:07:51.053: E/AndroidRuntime(809):  at java.lang.Class.getMethod(Class.java:915)
01-24 10:07:51.053: E/AndroidRuntime(809):  at android.view.View$1.onClick(View.java:3577)
01-24 10:07:51.053: E/AndroidRuntime(809):  ... 11 more 
```

* * *

**请帮助我，我是 android 开发的初学者。我认为代码中没有错误。**

**我的代码在这里**

```
public class Selection extends Activity {
    private EditText k1_e,k2_e,al_e,alconst_e,dr_e;
    private float k1,k2,al,al_const,dr,Avg_k,IOLPower;
    private Spinner spin;
    private Button result;
    private int spinSelected=-1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.selective);
}

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
        spin=(Spinner)findViewById(R.id.formulae);
        spin.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int pos,
                    long id) {
                // TODO Auto-generated method stub
                spinSelected=pos;

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub
                spinSelected=-1;
            }
        });
        result=(Button)findViewById(R.id.result);
        result.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                int flag = 0;
                String op="INVALID INPUT";
                dr_e=(EditText)findViewById(R.id.dr_editText);
                k1_e=(EditText)findViewById(R.id.k1_editText);
                k2_e=(EditText)findViewById(R.id.k2_editText);
                al_e=(EditText)findViewById(R.id.al_editText);
                alconst_e=(EditText)findViewById(R.id.al_const_editText);
                k1_e.isClickable();
                k2_e.isClickable();
                al_e.isClickable();
                alconst_e.isClickable();
                if(dr_e.getText().toString().length()==0|k1_e.getText().toString().length()==0|k2_e.getText().toString().length()==0|al_e.getText().toString().length()==0|alconst_e.getText().toString().length()==0){
                    flag=1;
                }else{

                dr=Float.parseFloat(dr_e.getText().toString());
                k1=Float.parseFloat(k1_e.getText().toString());
                k2=Float.parseFloat(k2_e.getText().toString());
                al=Float.parseFloat(al_e.getText().toString());
                al_const=Float.parseFloat(alconst_e.getText().toString()); 
                }

                Avg_k=(k1+k2)/2;
                if(spinSelected==0){
                IOLPower=Srkt();    
                Intent iSrkt=new Intent(Selection.this,Srkt.class);
                if(flag!=1){
                iSrkt.putExtra("RESULT", IOLPower);
                }else{
                    iSrkt.putExtra("FLAG", flag);
                    iSrkt.putExtra("RESULT", op);
                }
                startActivity(iSrkt);
            }else if(spinSelected==1){
                IOLPower=Binkhorst();
                Intent iBinkhorst=new Intent(Selection.this,Binkhorst.class);
                if(flag!=1){
                    iBinkhorst.putExtra("RESULT", IOLPower);
                }else{
                    iBinkhorst.putExtra("FLAG", flag);
                    iBinkhorst.putExtra("RESULT", op);
                }
                startActivity(iBinkhorst);
            }else if(spinSelected==2){
            IOLPower=Srk2();
            Intent iSrk2=new Intent(Selection.this,Srk2.class);
            if(flag!=1){
                iSrk2.putExtra("RESULT", IOLPower);
            }else{
                iSrk2.putExtra("FLAG", flag);
                iSrk2.putExtra("RESULT", op);
            }
            startActivity(iSrk2);
            }else{
                IOLPower=Holladay();
                Intent iHolladay=new Intent(Selection.this,Holladay.class);
                if(flag!=1){
                    iHolladay.putExtra("RESULT", IOLPower);
                }else{
                    iHolladay.putExtra("FLAG", flag);
                    iHolladay.putExtra("RESULT", op);
                }
                startActivity(iHolladay);
            }
            }
            });
    }
    public static float Round(float Rval, int Rpl) {
          float p = (float)Math.pow(10,Rpl);
          Rval = Rval * p;
          float tmp = Math.round(Rval);
          return (float)tmp/p;
          }
    public float Srkt(){
         float Rcor;
         float Lcor;
         float Crwdest;
         float Corneal_H;
         float Acd_Const;
         float Offset;
         float Acd_Est;
         float Na=(float) 1.336;
         float C2=(float) 0.3333;
         float C3;
         float C4;
         float C5;
         float C6;
         float C8;
         float C9;
         float Iolam;

         float Rcor1=(float)(337.5/Avg_k);Rcor=Round(Rcor1,2);

            if(al<=24.2){
                Lcor=al;
            }else{
                Lcor=(float) (-3.446+1.716*al-0.0237*(al*al));
            }Lcor=Round(Lcor,2);
            Crwdest=(float) (-5.41+0.58412*Lcor+0.098*Avg_k);Crwdest=Round(Crwdest,2);
            Corneal_H=(float) (Rcor-(Math.sqrt(Rcor*Rcor-Crwdest*Crwdest/4)));Corneal_H=Round(Corneal_H,2);
            Acd_Const=(float) (0.62467*al_const-68.747);
            Offset=(float) (Acd_Const-3.336);Offset=Round(Offset,2);
            Acd_Est=(Corneal_H+Offset); float Acd_Est1=Round(Acd_Est,2);
            C3=(float) (0.97971*al+0.65696);C3=Round(C3,2);     
            C4=C3-Acd_Est1;C4=Round(C4,2);
            C5=(float) ((Na*Rcor)-(C2*Acd_Est)); C5=Round(C5, 2);
            C6=(float) ((Na*Rcor1)-(C2*C3));
            C8=(float) ((12*C6)+(C3*Rcor1));C8=Round(C8,2);
            C9=(float) ((12*C5)+(Acd_Est*Rcor1));C9=Round(C9,2);
            Iolam=(float) ((1336*(C6-(0.001*C8*dr)))/(C4*(C5-(0.001*dr*C9))));Iolam=Round(Iolam,2);
            Log.i("value",String.valueOf(Avg_k));
            Log.i("value",String.valueOf(Rcor));
            Log.i("value",String.valueOf(Lcor));
            Log.i("value",String.valueOf(Crwdest));
            Log.i("value",String.valueOf(Corneal_H));
            Log.i("value",String.valueOf(Acd_Const));
            Log.i("value",String.valueOf(Offset));
            Log.i("value",String.valueOf(Acd_Est));
            Log.i("value",String.valueOf(Na));
            Log.i("value",String.valueOf(C2));
            Log.i("value",String.valueOf(C3));
            Log.i("value",String.valueOf(C4));
            Log.i("value",String.valueOf(C5));
            Log.i("value",String.valueOf(C6));
            Log.i("value",String.valueOf(C8));
            Log.i("value",String.valueOf(C9));
            Log.i("value",String.valueOf(Iolam));
        return(Iolam);
    }
    public float Binkhorst(){
        float K1;
        float LB2;
        float ACDbnk;
        float xb;
        float yb;
        float em;

        K1=(float)(337.5/Avg_k);
        LB2=(float) (al+0.1984);
        if(LB2>=26){
            ACDbnk=(float) (((0.58357*al_const)-63.896)*1.1087);
        }else{
            ACDbnk=(float) (((0.58357*al_const)-63.896)*LB2/23.45);
        }
        xb=(float) (1336*((1.336*K1-0.3333*LB2)-0.001*dr*(16.032*K1-4*LB2+LB2*K1)));
        yb=(float) ((LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk-0.001*dr*(16.032*K1-4*ACDbnk+ACDbnk*K1)));
        em=xb/yb;em=Round(em,2);
        return(em);
    }
    public float Srk2(){
        float X25 = 0;
        float Avg_k=(k1+k2)/2;
        if(al<20.0){
            X25=al_const+3;
        }else if((al>=20.0)&&(al<21.0)){
            X25=al_const+2;
        }else if((al>=21.0)&&(al<22.0)){
            X25=al_const+1;
        }else if((al>=22.0)&&(al<24.5)){
            X25=al_const;
        }else if(al>=24.5){
            X25=(float) (al_const-(0.5));
        }else{
            Toast.makeText(getApplicationContext(), "Please enter valid AL value", Toast.LENGTH_SHORT).show();
        }
        float SRK2 = (float) (X25-(0.9*Avg_k+2.5*al));
        return(SRK2);
    }
    public float Holladay(){
        float K;
        float Lhol;
        float SF;
        float Rag;
        float AGx;
        float AG;
        float ACDH;
        float CAhol;
        float xh;
        float yh;

        float K1=(float)(337.5/Avg_k);K=Round(K1,2);
        Lhol=(float) (al+0.2);
        SF=(float) ((0.5663*al_const)-65.6);
        if(K<7){
            Rag=7;
        }else{
            Rag=K;
        }
        AGx=(float) (al*0.533);
        if(AGx>13.5){
             AG=(float) 13.5;
        }else{
            AG=AGx;
        }
        ACDH=(float) (0.56+Rag-(Math.sqrt(Rag*Rag-AG*AG/4)));
        CAhol=ACDH+SF;
        xh=(float) (1336*((1.336*K1-0.3333*Lhol)-0.001*dr*(16.032*K1-4*Lhol+Lhol*K1)));
        yh=(float) ((Lhol-CAhol)*(1.336*K1-0.3333*CAhol-0.001*dr*(16.032*K1-4*CAhol+CAhol*K1)));
        float em=xh/yh;em=Round(em,2);
        return(em);
    }
    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        dr_e=(EditText)findViewById(R.id.dr_editText);
        k1_e=(EditText)findViewById(R.id.k1_editText);
        k2_e=(EditText)findViewById(R.id.k2_editText);
        al_e=(EditText)findViewById(R.id.al_editText);
        alconst_e=(EditText)findViewById(R.id.al_const_editText);
        dr_e.setText(null);
        k1_e.setText(null);
        k2_e.setText(null);
        al_e.setText(null);
        alconst_e.setText(null);
        dr_e.requestFocus();
    }

} 
```

**xml文件放在这里**

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black"
    android:orientation="vertical" 
    android:id="@+id/form_layout" xmlns:android="http://schemas.android.com/apk/res/android">

    <Spinner
        android:id="@+id/formulae"
        android:layout_width="400dp"
        android:layout_height="125dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:background="@color/LightSkyBlue"
        android:dropDownWidth="wrap_content"
        android:entries="@array/formulas"
        android:gravity="center"
        android:paddingLeft="0dp"
        android:textAlignment="center" />

    <EditText
        android:id="@+id/k1_editText"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/k1"
        android:layout_alignLeft="@+id/al_const_editText"
        android:layout_alignTop="@+id/k1"
        android:background="@color/black"
        android:ems="10"
        android:enabled="true"
        android:focusable="true"
        android:inputType="numberDecimal"
        android:textColor="@color/White"
        android:textSize="30sp"
        android:onClick="@drawable/textfield_activated_holo_light"
        android:visibility="visible" >
</EditText>

    <EditText
        android:id="@+id/k2_editText"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/k2"
        android:layout_alignLeft="@+id/k1_editText"
        android:layout_alignTop="@+id/k2"
        android:background="@color/black"
        android:ems="10"
        android:enabled="true"
        android:inputType="numberDecimal"
        android:onClick="@drawable/textfield_activated_holo_light"
        android:textSize="30sp"
        android:visibility="visible" >

    </EditText>

    <EditText
        android:id="@+id/al_editText"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/al"
        android:layout_alignLeft="@+id/al_const_editText"
        android:layout_alignTop="@+id/al"
        android:ems="10"
        android:enabled="true"
        android:inputType="numberDecimal"
        android:onClick="@drawable/textfield_activated_holo_light"
        android:textSize="30sp"
        android:visibility="visible" />

    <EditText
        android:id="@+id/al_const_editText"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/al_const"
        android:layout_alignTop="@+id/al_const"
        android:layout_marginLeft="21dp"
        android:layout_toRightOf="@+id/al_const"
        android:ems="10"
        android:enabled="true"
        android:inputType="numberDecimal"
        android:onClick="@drawable/textfield_activated_holo_light"
        android:textSize="30sp"
        android:visibility="visible" />

    <Button
        android:id="@+id/result"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="28dp"
        android:background="@color/LightSkyBlue"
        android:gravity="center"
        android:height="100dp"
        android:maxWidth="80dp"
        android:minHeight="60dp"
        android:paddingLeft="150dp"
        android:paddingRight="200dp"
        android:text="@string/Result"
        android:textSize="60sp" />

    <TextView
        android:id="@+id/al_const"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/result"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="89dp"
        android:layout_marginLeft="50dp"
        android:text="@string/Rx"
        android:textColor="@color/White"
        android:textSize="60sp" />

    <TextView
        android:id="@+id/k2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/al"
        android:layout_alignLeft="@+id/al_const"
        android:layout_marginBottom="126dp"
        android:layout_marginLeft="23dp"
        android:text="@string/K2"
        android:textColor="@color/White"
        android:textSize="60sp" />

    <TextView
        android:id="@+id/al"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/al_const"
        android:layout_alignRight="@+id/k2"
        android:layout_marginBottom="125dp"
        android:text="@string/AL"
        android:textColor="@color/White"
        android:textSize="60sp" />

    <TextView
        android:id="@+id/k1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/k2"
        android:layout_alignLeft="@+id/al"
        android:layout_marginBottom="97dp"
        android:text="@string/K1"
        android:textColor="@color/white"
        android:textSize="60sp" />

    <EditText
        android:id="@+id/dr_editText"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/k1_editText"
        android:layout_below="@+id/formulae"
        android:layout_marginTop="58dp"
        android:ems="10"
        android:inputType="numberSigned|numberDecimal"
        android:paddingTop="35dp"
        android:textColor="@color/White"
        android:textSize="30sp" />

    <TextView
        android:id="@id/dr"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/dr_editText"
        android:layout_alignLeft="@+id/k2"
        android:layout_alignTop="@+id/dr_editText"
        android:layout_toLeftOf="@+id/dr_editText"
        android:ems="10"
        android:paddingLeft="100dp"
        android:paddingTop="10dp"
        android:text="@string/dr"
        android:textColor="@color/White"
        android:textSize="50sp" />

</RelativeLayout> 
```

**我在可绘制文件夹中有 textfield_activated_holo_light.9.png。但为什么我会收到这个错误？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:44:38.933

从您的 xml 中删除它（在 EditText 中）

```
 android:onClick="@drawable/textfield_activated_holo_light" 
```

就突出显示`editext`而言，您可以这样做：

1）定义一个xml文件说`mybackground.xml`

```
<?xml version="1.0" encoding="utf-8"?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true"
   android:drawable="@drawable/textfield_activated_holo_light" /> <!-- pressed -->
  <item android:state_focused="true"
   android:drawable="@drawable/textfield_activated_holo_light" /> <!-- focused -->
  <item android:drawable="@drawable/default" /> <!-- default -->
</selector> 
```

2）将此xml复制到`drawable`文件夹中

3）将此xml设置为xml文件中editext的背景：

```
 <EditText
        android:id="@+id/k1_editText"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/k1"
        android:layout_alignLeft="@+id/al_const_editText"
        android:layout_alignTop="@+id/k1"
        android:background="@drawable/mybackground"
        android:ems="10"
        android:enabled="true"
        android:focusable="true"
        android:inputType="numberDecimal"
        android:textColor="@color/White"
        android:textSize="30sp"            
        android:visibility="visible" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:51:41.233

覆盖`OnClickListener`in`onStart()`然后在你的`onClick(View v)`, 设置`v.setBackgroundResource(getResources().getDrawable(R.drawable.textfield_activated_holo_light)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:05:20.117

```
 @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                int flag = 0;
                String op="INVALID INPUT";
                dr_e=(EditText)findViewById(R.id.dr_editText);
                k1_e=(EditText)findViewById(R.id.k1_editText);
                k2_e=(EditText)findViewById(R.id.k2_editText);
                al_e=(EditText)findViewById(R.id.al_editText);
                alconst_e=(EditText)findViewById(R.id.al_const_editText);
                k1_e.isClickable();
                k2_e.isClickable();
                al_e.isClickable();
                alconst_e.isClickable();
                k1_e.setOnClickListener(new View.OnClickListener(){                 
                @Override
                public void onClick(View arg0) 
                {
                    //put your action here
                }
            });                  
                k2_e.setOnClickListener(new View.OnClickListener(){                 
            @Override
            public void onClick(View arg0) 
            {
                //put your action here
            }
            });
     //and other EditText also  
       if(dr_e.getText().toString().length()==0|k1_e.getText().toString().length()==0|k2_e.getText().toString().length()==0|al_e.getText().toString().length()==0|alconst_e.getText().toString().length()==0){
                    flag=1;
                }else{

                dr=Float.parseFloat(dr_e.getText().toString());
                k1=Float.parseFloat(k1_e.getText().toString());
                k2=Float.parseFloat(k2_e.getText().toString());
                al=Float.parseFloat(al_e.getText().toString());
                al_const=Float.parseFloat(alconst_e.getText().toString()); 
                }

                Avg_k=(k1+k2)/2;
                if(spinSelected==0){
                IOLPower=Srkt();    
                Intent iSrkt=new Intent(Selection.this,Srkt.class);
                if(flag!=1){
                iSrkt.putExtra("RESULT", IOLPower);
                }else{
                    iSrkt.putExtra("FLAG", flag);
                    iSrkt.putExtra("RESULT", op);
                }
                startActivity(iSrkt);
            }else if(spinSelected==1){
                IOLPower=Binkhorst();
                Intent iBinkhorst=new Intent(Selection.this,Binkhorst.class);
                if(flag!=1){
                    iBinkhorst.putExtra("RESULT", IOLPower);
                }else{
                    iBinkhorst.putExtra("FLAG", flag);
                    iBinkhorst.putExtra("RESULT", op);
                }
                startActivity(iBinkhorst);
            }else if(spinSelected==2){
            IOLPower=Srk2();
            Intent iSrk2=new Intent(Selection.this,Srk2.class);
            if(flag!=1){
                iSrk2.putExtra("RESULT", IOLPower);
            }else{
                iSrk2.putExtra("FLAG", flag);
                iSrk2.putExtra("RESULT", op);
            }
            startActivity(iSrk2);
            }else{
                IOLPower=Holladay();
                Intent iHolladay=new Intent(Selection.this,Holladay.class);
                if(flag!=1){
                    iHolladay.putExtra("RESULT", IOLPower);
                }else{
                    iHolladay.putExtra("FLAG", flag);
                    iHolladay.putExtra("RESULT", op);
                }
                startActivity(iHolladay);
            }
            }
            });
    } 
```

# c# - 如何从 MVC 中的父控制器返回视图

> ID：14499268
> 
> 赞同：2
> 
> 时间：2013-01-24T10:37:24.440
> 
> 标签：c#, asp.net-mvc, controller

我知道如何从父控制器重定向，假设我有

```
public class _ParentController : Controller {  
    ...
}

public class HomeController : _ParentController {  
    ...
} 
```

我可以添加一个方法`_ParentController`：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext) {
    if (condition) {
        filterContext.Result = Redirect(path);
    }
} 
```

现在我需要返回一个视图或执行 Server.Transfer（我需要保留 url）。`Server.TransferRequest`在这种情况下对我不起作用，还有其他方法可以做我需要的吗？我使用 .NET MVC3 和 IIS7.5

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:52:53.997

例如，您可以拥有：

```
protected override void OnException(ExceptionContext filterContext)
{
    base.OnException(filterContext);
    if (((filterContext.Exception is SecurityException)) ||
        ((filterContext.Exception is AuthenticationException)))
    {
        filterContext.ExceptionHandled = true;

        filterContext.Result = View("Error", "You don't have permission");
    }
} 
```

这会将操作结果设置为您选择的视图，并保留当前 url。*（请记住，必须根据当前路线在文件夹中或在共享文件夹中找到视图）*

```
filterContext.Result = View("Name of view", "object model")'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:55:11.460

你试过了吗

```
filterContext.Result = View(someParameter); 
```

# java - 如何在 Java 小程序中创建 JFrame，反之亦然

> ID：14499270
> 
> 赞同：0
> 
> 时间：2013-01-24T10:37:30.523
> 
> 标签：java, swing, applet, jframe

我正在尝试使用 JInternalFrames 创建一个 Java 小程序。为此，我相信您需要一种或另一种形式的 JFrame。我听说你可以将你的小程序包装在一个 JFrame 中，这是最好的吗？如果你能告诉我应该怎么做，我将不胜感激。TYIA-罗兰

```
/**
 * @(#)rebuiltgui.java
 *
 * rebuiltgui Applet application
 *
 * @author 
 * @version 1.00 2013/1/21
 */

import javax.swing.JInternalFrame;
import javax.swing.JDesktopPane;
import javax.swing.plaf.basic.BasicInternalFrameUI;
import java.awt.event.*;
import java.awt.Desktop;
import javax.swing.*;
import javax.swing.BoxLayout;
import java.awt.*;
import java.applet.*;

public class rebuiltgui extends JApplet {

    public void init() {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {

                createAndShowGUI();
            }
        });
    }

    private void createAndShowGUI() {

   // This is where I would put the internal frames.
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:44:45.640

您可以像在独立的 Swing 应用程序中一样在小程序代码中创建 JFrame：

```
JFrame frame = new JFrame("Hello");
....
frame.show(); 
```

该框架将离开浏览器窗口，显示为一个单独的窗口，只是它将包含一些警告标签，表明这是一个正在运行的 Java 小程序。这样的框架可以调整大小或四处移动。

实际上，一些“小程序”在主视图中只显示一个按钮来启动框架。

请参阅[http://baba.sourceforge.net/](http://baba.sourceforge.net/)获取显示四个按钮以启动四种不同可视化的小程序示例（源代码可用）。

如果非常不同的是，您确实想要无法离开您的小程序区域的框架，请使用[InternalFrame](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)。它是一个 LayeredPane，因此您也可以将主要组件作为背景层。

# sql-server - VBscript 从 SQL 返回值

> ID：14499273
> 
> 赞同：0
> 
> 时间：2013-01-24T10:37:41.687
> 
> 标签：sql-server, sql-server-2008, vbscript

有人可以告诉我我在这个脚本中做错了什么：

```
dim cSQL, cMessage

cSQL="exec pdf $ID$" & cstr(showingid)
DBConnector.ExecuteScalar cSQL, cMessage

if cMessage<>"" then
   CreateObject("WScript.Shell").Run "cSQL"
end if 
```

这个脚本位于一个按钮的后面，它应该打开一个 pdf 文档，从 Sql Server 2008 数据库中获取它的位置。在这里，我有一个非常简单的程序，它返回 pdf 的位置：

```
CREATE PROCEDURE [dbo].[pdf] (@ID NVARCHAR(250))
AS
SELECT URL

FROM  Documents
WHERE ac_id = @ID 
```

该过程工作正常，它正在返回值，但我认为这是一个问题`CreateObject("WScript.Shell").Run "cSQL"`，应该是一个参数或者我猜的什么，因为我收到以下错误：系统找不到指定的文件！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:59:21.937

```
dim cSQL, cMessage

cSQL="exec pdf $ID$" & cstr(showingid)
DBConnector.ExecuteScalar cSQL, cMessage

if cMessage<>"" then
   CreateObject("WScript.Shell").Run cMessage
end if 
```

那是正确的脚本。

# rest - 无法注册 REST 服务

> ID：14499275
> 
> 赞同：1
> 
> 时间：2013-01-24T10:37:47.467
> 
> 标签：rest, coldfusion, coldfusion-10

我尝试在我的 CFIDE 管理员中将目录注册为 REST 应用程序：

> 注册 REST 服务时出错。请确保您输入了正确的映射和路径。无法初始化应用程序服务。原因：应用程序不包含任何启用了休息的 CFC。该应用程序不包含任何启用了 REST 的 CFC。

我的目录包含：

应用程序.cfc

```
component output="false"
{
    this.name = "otticanet-rest";
    this.applicationTimeout = createTimespan(0,1,0,0);
    this.datasource = "svvv";

    this.restsettings.skipCFCWithError = true;

    public boolean function onRequestStart()
    {       
        return true;
    }
} 
```

产品.cfc

```
<cfcomponent rest="true" restpath="occhiali">

    <cffunction name="getByMarchioAndTipo"
                access="remote"
                httpmethod="GET"
                restpath="{idmarchio}/{idtipo}"
                returntype="Struct"
                produces="application/json">

        <cfargument name="marchio" required="true" restargsource="Path" type="numeric" />
        <cfargument name="tipo" required="true" restargsource="Path" type="numeric" />

        <cfreturn LOCAL.s />
    </cffunction>   
... 
```

所以呢？

此外，这在一个月前有效。会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:00:20.707

如果*skipCFCWithError*为真，并且该目录中仅存在 CFC 存在一些问题，则显示此错误。
可能您可能已经更改了此 CFC 中的某些内容，但它现在无法正常工作。
尝试在浏览器中访问您的 CFC，就像访问任何 CFM 一样。
这将告诉您 CFC 是否存在问题。

如果有问题，请修复它并重试。

# javascript - 无法连接到mongodb

> ID：14499277
> 
> 赞同：1
> 
> 时间：2013-01-24T10:37:54.580
> 
> 标签：javascript, node.js, mongodb

所以我使用 home brew 安装了 mongo，并通过 npm 安装了它，所以我有 JS 驱动程序。

但是，当我在命令行中运行 mongo 时，我得到了这个-

```
 MongoDB shell version: 2.2.2
connecting to: test
Thu Jan 24 02:38:26 Error: couldn't connect to server 127.0.0.1:27017 src/mongo/shell/mongo.js:91
exception: connect failed 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:01:39.603

安装 MongoDB 后，打开终端窗口并转到存储 MongoDB 应用程序的文件路径，例如 c:\MongoDB。然后输入 mongod 并回车。这应该启动此进程运行。Mongod 是您随后通过 mongo shell 访问的数据库服务器。

mongod 运行后，打开一个新的终端窗口并输入 mongo 然后回车。你现在应该已经启动并运行了。您可以通过在 mongo shell 中键入以下内容来测试它是否正常工作：

```
>
>db.names.save({'name':"James"})
>db.names.find() 
```

这应该会返回您刚刚保存到数据库中的文档，如下例所示。

```
>{"_id" ObjectID:"764tdf763dyf6337fd376","name":"James"} 
```

通读[文档](http://docs.mongodb.org/manual/)并在线查找教程。10gen 刚刚开始了一个[优秀的在线课程](https://education.10gen.com/)。它是免费的，本周开始，所以你仍然可以注册。

# php - 喜欢使用 facebook api 开放图的帖子

> ID：14499279
> 
> 赞同：1
> 
> 时间：2013-01-24T10:37:59.830
> 
> 标签：php, facebook

我正在使用 php 脚本通过`open graph`和`facebook API`

```
$response = $facebook->api('/me/og.likes','POST',array('object' => "")); 
```

在我上面的代码中，我必须在对象中写什么，这样我的帖子才会被喜欢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:45:29.333

将对象的 URL 放在双引号中，如下所示：

```
$response = $facebook->api( '/me/og.likes', 'POST', array( 'object' => "http://www.example.com/foo" ) ); 
```

但要使其正常工作，您必须确保您链接到的文档具有 opengraph 元数据。[检查文档](https://developers.facebook.com/docs/technical-guides/opengraph/)。

# mongodb - 带或不带空占位符的 MongoDB 模式设计

> ID：14499281
> 
> 赞同：1
> 
> 时间：2013-01-24T10:38:07.853
> 
> 标签：mongodb, database-design, model, schema

我仍然习惯于使用无模式的面向文档的数据库，并且我想知道关于应用程序模型中的模式设计的普遍接受的做法是什么。

具体来说，我想知道在像这样保存到 mongodb 时，在应用程序模型中使用强制模式是否是一种好习惯：

```
{
    _id: "foobar",
    name: "John"
    billing: {
        address: "8237 Landeau Lane",
        city: "Eden Prairie",
        state: "MN",
        postal: null
    }
    balance: null,
    last_activity: null
} 
```

而不是只存储这样使用的字段：

```
{
    _id: "foobar",
    name: "John"
    billing: {
        address: "8237 Landeau Lane",
        city: "Eden Prairie",
        state: "MN"
    }
} 
```

前者是我喜欢的自我描述，而后者对模型模式的可变性不做任何假设。

我喜欢第一个选项，因为它可以很容易地一目了然地看到模型使用了哪些字段，但当前未指定，但如果我想添加，更新每个文档以反映新的架构设计似乎很麻烦一个额外的字段，例如`favorite_color`.

大多数资深 mongodb 用户如何处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:45:59.530

我建议第二种方法。

1.  如果您查看源代码中的实体类，您总是可以看到预期的结构。还是您使用动态语言，并且不创建实体？
2.  您可以为每条记录节省大量空间，因为您不必存储空列名。这在小型收藏中可能并不昂贵。但总的来说，有数百万条记录，我什至会缩短字段的名称。
3.  正如你已经提到的。通过指定可选的列名，您可以创建一个模式，如果您想遵循该模式，则必须在添加新字段时更新所有现有记录。对于大型数据库来说，这又是一个坏主意。

无论如何，这一切都会降低您的数据库大小。如果您的目标不是很多 GB 或 TB 的数据，那么这两种方法都可以。但是，如果您预测您的数据库可能会变得非常大，我会做任何事情来减少大小。为列名花费 30-40% 的存储空间是个坏主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:20:49.393

我更喜欢第一个选项，它更容易在应用程序中编码，并且需要更少的状态持有者和函数来理解事情应该如何工作。

至于随着时间的推移添加一个新字段，您不需要像在 SQL 中那样更新所有记录以支持这个新字段，您需要做的就是将新字段写入您的模型应用程序端并支持该字段，`null`如果它不是从 MongoDB 返回的。

一个很好的例子是 PHP。

我一`user`开始只有一个领域的一类，`name`

```
class User{
    public $name;
} 
```

6 个月后，我想添加 60,000 个用户，比如说，`address`. 我所做的就是将该变量添加到我的应用程序模型中：

```
class User{
    public $name;
    public $address = array();
} 
```

现在，这与向 SQL 中添加新`null`字段完全一样，无需实际按需将其添加到每一行。

这是一个非常被动的设计，不要更新你不需要的东西。如果该行被使用，它将被更新，如果没有，那么谁在乎。

所以最终你的行实际上变成了选项 1 和 2 之间的混合和匹配，但它实际上是一个反应选项 1。

### 编辑

在存储方面，您还必须考虑文档的预分配和移动。

假设现在设置的记录的数量仅为文档的三分之一，但突然间，从用户更新包含所有字段的文档开始，您现在从文档的移动中获得了额外的碎片。

通常，当您定义这样的模式时，您正在定义一个最终会增长并在大多数情况下应用于该用户的模式（很像 SQL 模式）。

需要考虑到这一点，即使存储在短期内可能会降低，但由于该碎片，它可能会导致碎片和查询缓慢，并且由于现在面临的问题，您很容易发现自己不得不运行`compact`s 或s。`repairDb`

我应该提一下，我上面提到的这两个功能都不是为了定期运行而设计的，并且在生产环境中运行时会对它们造成严重的性能问题。

因此，真正使用上面的结构，您不需要在所有文档中添加新字段，从长远来看，您很可能会减少移动和问题。

您可以通过使用 2 大小填充的力量来解决持续增长的文档的性能问题，但是这是集合范围的，这意味着即使您完全填充的文档也将使用至少两倍于以前的空间，并且您的小文档可能会用作在填充因子为`1`.

又名你失去了空间，而不是获得它。

# web - 可用于 Web 的实时通信协议有哪些？

> ID：14499282
> 
> 赞同：18
> 
> 时间：2013-01-24T10:38:09.180
> 
> 标签：web, websocket, protocols, real-time, near-real-time

我最近遇到了[WebSockets](http://en.wikipedia.org/wiki/WebSocket)，我对它们带来的可能性感到震惊。我搜索了此类实时（和近实时）通信协议和技术的完整列表，例如[XMPP](http://en.wikipedia.org/wiki/XMPP)、[WebRTC](http://en.wikipedia.org/wiki/WebRTC) ，但我找不到任何接近完整的列表。所以请帮我在这里整理清单。

**更新：我正在寻找可用于网络的实时协议。**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-24T10:44:25.823

### [网络套接字](http://en.wikipedia.org/wiki/WebSocket)

WebSocket 是一种通过单个 TCP 连接提供全双工通信通道的 Web 技术。W3C 正在对 WebSocket API 进行标准化，而 IETF 已将 WebSocket 协议标准化为[RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)。

### [XMPP (Jabber)](http://en.wikipedia.org/wiki/XMPP)

Extensible Messaging and Presence Protocol (XMPP) 是一种基于 XML（可扩展标记语言）的面向消息中间件的通信协议。

### [网络RTC](http://en.wikipedia.org/wiki/WebRTC)

WebRTC（Web 实时通信）是由万维网联盟 (W3C) 起草的 API 定义，旨在使浏览器到浏览器的应用程序无需插件即可进行语音通话、视频聊天和 P2P 文件共享。

### [巴约协议](http://svn.cometd.com/trunk/bayeux/bayeux.html)

Bayeux 是一种用于传输异步消息（主要通过 HTTP）的协议，在 Web 服务器和 Web 客户端之间具有低延迟。

### [服务器发送的事件](http://dev.w3.org/html5/eventsource/)

服务器发送事件 (SSE) 是服务器在客户端连接后向客户端发起数据传输的一种方式。它用于将连续或低延迟消息流式传输到客户端。浏览器 API 称为 EventSource。

### [Wave 联合协议](http://en.wikipedia.org/wiki/Google_Wave_Federation_Protocol)

Wave 联合协议（以前称为 Google Wave 联合协议）是一种开放协议，是 Apache Wave 中使用的可扩展消息传递和存在协议 (XMPP) 的扩展。它专为计算机支持的协同工作波服务器之间的近实时通信而设计。

### [国税局](http://en.wikipedia.org/wiki/Internet_Relay_Chat)

Internet 中继聊天 (IRC) 是一种用于实时 Internet 文本消息 (聊天) 或同步会议的协议。它主要用于论坛中的群组交流，称为频道，但也允许通过私人消息进行一对一交流以及聊天和数据传输，包括文件共享。

### [实时发布-订阅 (RTPS) 协议](http://en.wikipedia.org/wiki/Real-Time_Publish-Subscribe_%28RTPS%29_Protocol)

实时发布-订阅 (RTPS) 协议设计用于互联网协议 (IP) 一对多多播和无连接尽力传输传输，例如 IP 用户数据报协议 (UDP)。除其他功能外，它还可以为使用标准 IP 网络的实时应用程序提供最佳和可靠的发布-订阅通信。

### [~~套接字.IO~~](http://socket.io)

~~Socket.IO 是一个流行的库，用于从浏览器进行实时通信。Socket.IO 主要使用 WebSocket 协议，但如果需要，可以回退到多种其他方法，例如 Adob​​e Flash 套接字、JSONP 轮询和 AJAX 长轮询，同时继续提供相同的接口。尽管它可以用作 WebSocket 的简单包装器，但它提供了更多功能，包括向多个套接字广播、存储与每个客户端关联的数据以及异步 I/O。~~

# java - Java 正则表达式。在长文本中仅查找一个匹配项

> ID：14499284
> 
> 赞同：0
> 
> 时间：2013-01-24T10:38:17.370
> 
> 标签：java, regex

我需要在所有文本`","`之间找到数字。 我不想使用并且想要使用. 我可以通过以下方式轻松获得所有匹配项：`","`
`.split()``regexp`

```
Pattern.compile(",?(\\d+),") 
```

问题是，我只能获得第二（或第三或第四）场比赛吗？
我不需要解析所有文本，我想在 N 个匹配后停止。
是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T10:54:20.320

以下是如何获得第 5 场比赛的示例：

```
 String input = "11,22,33,44,55,66,77,88,99";
    Pattern pattern = Pattern.compile(",?(\\d+),");
    Matcher matcher = pattern.matcher(input);
    int counter = 0;
    int wantedMatch = 5;
    while (matcher.find()) {
        counter++;
        if (counter == wantedMatch) {
            String digits = matcher.group(1);
            System.out.println(digits); // prints 55 
            break; // stop searching after n matches.
        }
    }
    if (counter < wantedMatch) {
        System.out.println("You wanted match #" + wantedMatch + ", there only were " + counter);
    } 
```

使其适应您的需求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:52:42.987

```
public class Main {

    public static void main(String[] args) {
        String message = "123,456,789,101112,131415";
        Pattern pattern = Pattern.compile(",?(\\d+),");
        Matcher matcher = pattern.matcher(message);
        int i = 1;
        while (matcher.find()) {
            //Finding the second match here
            if (i == 2) {
                System.out.println(matcher.group(1));
                break;
            }
            i++;
        }
    }
} 
```

# java - 不同风格的合金UI输入标签

> ID：14499285
> 
> 赞同：4
> 
> 时间：2013-01-24T10:38:19.830
> 
> 标签：java, jsp, liferay, alloy-ui

我的`aui:input`表单中有一个 label `First Name *`。标签的当前字体颜色现在是黑色。我想要的是`First Name`黑色字体和`*`红色的标签。

有谁知道如何实现这一目标？

```
<aui:input model="<%= User.class %>"
           name="firstName"
           label="First Name *"
           showRequiredLabel=""
           value="<%=user.getFirstName() %>">
</aui:input> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T12:01:14.513

您可以像这样指定代码：

```
<aui:input model="<%= User.class %>"
        name="firstName"
        showRequiredLabel=""
        label="First Name <span style='color: red;'>*</span>"
        value="<%=user.getFirstName() %>">
</aui:input>

<!--
or else you can also include a CSS Class as <span class="required">*</span> 
then you would need to add a style as:
-->

<style>

    .required {
        color: red;
    }

</style> 
```

或者，您可以改为：

```
<label class="aui-field-label" for="<portlet:namespace />firstName">
    First Name
    <span style="color: red;">*</span>
</label>

<aui:input model="<%= User.class %>"
        name="firstName"
        showRequiredLabel=""
        label=""
        value="<%=user.getFirstName() %>">
</aui:input> 
```

哪个是你喜欢的。

# mysql - Mysql like 子句抛出语法错误？

> ID：14499288
> 
> 赞同：1
> 
> 时间：2013-01-24T10:38:30.127
> 
> 标签：mysql, sql-like

我正在生成以下查询作为我们系统的一部分：

```
SELECT * FROM (`videos`) WHERE (
    `videos`.`title` LIKE "%apple%" 
  OR WHERE 
    `videos`.`byline` LIKE "%apple%" 
  OR WHERE `videos`.`description` LIKE "%apple%"
); 
```

但是，这会引发语法错误。

那么这是什么一回事？

请注意，我需要括号，因为这三个`where`是链接的，通常后面跟着单独`AND WHERE`的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T10:39:45.580

Sql 语句在文字值周围使用单引号。在这种情况下，也只需要一个 where 子句。只需使用一个 where 子句，然后用于`or`连接谓词。该脚本还有一些不需要的括号。

最终结果如下所示：

```
SELECT * FROM `videos` WHERE
    `videos`.`title` LIKE '%apple%' OR 
    `videos`.`byline` LIKE '%apple%' OR 
    `videos`.`description` LIKE '%apple%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:42:09.920

是 OR WHERE 有效的 SQL 吗？试试这个：

```
SELECT * FROM (`videos`) WHERE (
    `videos`.`title` LIKE "%apple%" 
  OR  
    `videos`.`byline` LIKE "%apple%" 
  OR `videos`.`description` LIKE "%apple%"
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:43:55.300

将“ **OR WHERE** ”替换为“ **WHERE** ”，将**双引号**替换为**单引号**“--->”

# android - 从在不同线程上运行的其他一些类更新 Android 活动的 UI

> ID：14499289
> 
> 赞同：0
> 
> 时间：2013-01-24T10:38:30.130
> 
> 标签：android, android-activity, android-handler

我有一个带有 Listview 和附加到它的适配器的活动。我有一个同步数据并保存它的类。（我认为我们不应该关心数据来自哪里）并且它在不同的线程上运行。现在我想知道更新适配器的干净方法，但是我们不应该从该类调用任何活动函数，因为它在不同的线程上运行。

我知道的一种方法是在活动中创建处理程序并将其传递给其他类并从那里使用它。但我想知道活动是否在后台，然后活动的函数可以由 UI 线程调用，或者只有在活动进入前台时才能调用。

我不想错过任何更新，并且想在前台更新活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:09:43.357

如果你想从另一个类更新你的 listView，你可以有几种方法来做到这一点。

1.  从您的工作人员类发送广播意图并将广播接收器添加到您的活动中，当您收到正确的消息时，更新您的列表视图。

2.  第二种方法是在您的活动中创建私有或公共类，该类扩展`AsyncTask`并在您`doInBackground()`的工作中并`onPostExecute(result)`更新您的列表视图。

3.  我可以想象的第三种方式，但我认为创建静态方法的最佳方式不是您的活动，您可以从任何其他类中使用它来更新您的 UI。

至少在我看来，你可以在这里使用的最好的东西是`AsyncTask`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:01:02.243

> 我们不应该从该类调用任何活动函数，因为它在不同的线程上运行。

那是错误的。（在java中一个对象*没有在线程中运行*。你可以说一个方法正在调用该方法的线程中运行）

在 Androïd（和大多数 UI 框架中）中，规则是这样的：

**您只能从 UI 线程调用更新 UI 的方法。**

如果您有一些代码在线程（不是 ui 线程）上运行，并且该代码需要更新 UI：您可以使用`Handler`UI 线程将 UI 更新代码发布到 UI 线程。如果当您发布内容以更新其 UI 时活动不在前台：没关系！您刚刚发布的代码将在将来的某个时候执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:41:45.723

这段代码会做你想做的事：

```
 runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    //your actions
                }
         }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:08:04.193

你应该使用 AsyncTask，看看[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# iphone - 在 UINavigationbar 中显示通知标记，如计数器

> ID：14499292
> 
> 赞同：1
> 
> 时间：2013-01-24T10:38:44.530
> 
> 标签：iphone, ios, uinavigationbar, uibarbuttonitem

我需要在 iPhone 导航栏中显示待处理通知的数量。外观应该类似于通知徽章 - 但这些不是 APNS 通知。它们是从具有类似目的的私人服务器发送的。

我尝试在我的中添加一个右/左按钮 ( `UIBarButtonItem`)，`UINavigationbar`但它的外观似乎非常僵硬。我无法设置它的宽度、字体等。请参阅我的代码：

```
 self.notifButton = [[UIBarButtonItem alloc] initWithTitle:@"0" style:
                    UIBarButtonItemStyleBordered target:self action:@selector(TouchNotif)];

 NSMutableArray *items = [[NSMutableArray alloc] init];

 [items addObject:self.notifButton];
 self.navigationItem.rightBarButtonItems = items; 
```

由于其他 2 个项目也添加到 items 数组中，所以导航栏很混乱。它们的字体、宽度等我无法使用，或者我不知道应该如何创建它们。

我的问题：

1）在导航栏右侧区域中容纳至少 3 个项目的正确方法是什么？我问这个是因为我找不到`UIButtons`使用我使用的宽度和字体的方法。

2）如果我想为我的通知按钮自定义外观（就像通知徽章一样） - 是否有任何指示如何制作它？使用哪个控件，如何设置允许的框架和字体`UINavigationBar`？

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T11:40:20.253

您需要创建一个`UIBarButtonItem`包含自定义视图的`initWithCustomView`. 自定义视图可以是带有数字徽章的自定义 UIButton 作为子视图。使用此自定义视图，您还可以控制按钮的宽度。

没有公共 API 可以直接创建通知徽章。如果是标签栏项目，您可以使用该属性设置徽章`badgeValue`- 但不能使用`UIBarButtonItem`. 这里需要用到这个开源控件：[MKNumberBadgeView](http://www.cocoacontrols.com/platforms/ios/controls/mknumberbadgeview)。

请注意，该属性`rightBarButtonItems`从 iOS 5 开始可用。如果您只需要一个项目，请`rightBarButtonItem`改为设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T07:05:12.510

```
UIButton * buttton = [UIButton buttonWithType:UIButtonTypeCustom];
[buttton setFrame:CGRectMake(285, 20, 20, 20)];
[buttton.layer setCornerRadius:10];
[buttton setTitle:@"23" forState:UIControlStateNormal];
[buttton.titleLabel setFont:[UIFont systemFontOfSize:12]];
[buttton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[buttton setBackgroundColor:[UIColor whiteColor]];
[self.navigationController.view addSubview:buttton]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-11T06:15:24.543

首先在navigationController中获取相应的barbuttonitem

```
let baritem = navigationItem.right/leftBarButtonItem
baritem.badgeValue = "\(correspondingValues)" 
```

# c# - 使用 async/await 对大型 C# 应用程序进行多线程处理

> ID：14499295
> 
> 赞同：7
> 
> 时间：2013-01-24T10:38:48.150
> 
> 标签：c#, multithreading, task-parallel-library, .net-4.5, async-await

总而言之，我被赋予了对大型 C# 应用程序进行多线程处理的工作。为此，我选择使用`async`/ `await`。我很清楚使用*向*`IProgress<T>`UI报告进度（让我们将此称为向 UI 的“推送”信息），但我还需要从 UI 中“提取”数据（在我的例子中是一个 SpreadsheetGear 工作簿，其中包含数据）。正是这种双向互动，我想要一些建议......

 *目前我触发点击事件开始处理，代码结构如下：

```
CancellationTokenSource cancelSource;
private async void SomeButton_Click(object sender, EventArgs e)
{
    // Set up progress reporting.
    IProgress<CostEngine.ProgressInfo> progressIndicator =
        new Progress<CostEngine.ProgressInfo>();

    // Set up cancellation support, and UI scheduler.
    cancelSource = new CancellationTokenSource();
    CancellationToken token = cancelSource.Token;
    TaskScheduler UIScheduler = TaskScheduler.FromCurrentSynchronizationContext();

    // Run the script processor async.
    CostEngine.ScriptProcessor script = new CostEngine.ScriptProcessor(this);
    await script.ProcessScriptAsync(doc, progressIndicator, token, UIScheduler);

    // Do stuff in continuation...
    ...
} 
```

然后在 中`ProcessScriptAsync`，我有以下内容：

```
public async Task ProcessScriptAsync(
    SpreadsheetGear.Windows.Forms.WorkbookView workbookView, 
    IProgress<ProgressInfo> progressInfo,
    CancellationToken token, 
    TaskScheduler UIScheduler)
{
    // This is still on the UI thread.
    // Here do some checks on the script workbook on the UI thread.
    try
    {
        workbookView.GetLock();
        // Now perform tests...
    }
    finally { workbookView.ReleaseLock(); }

    // Set the main processor off on a background thread-pool thread using await.
    Task<bool> generateStageTask = null;
    generateStageTask = Task.Factory.StartNew<bool>(() => 
        GenerateStage(workbookView, 
            progressInfo, 
            token, 
            UIScheduler));
    bool bGenerationSuccess = await generateStageTask;

    // Automatic continuation back on UI thread.
    if (!bGenerationSuccess) { // Do stuff... }
    else {
     // Do other stuff
    }
} 
```

到目前为止，这似乎很好。我现在遇到的问题是方法`GenerateStage`，它现在在后台线程池线程上运行

```
private bool GenerateStage(
    SpreadsheetGear.WorkbookView workbookView, 
    IProgress<ProgressInfo> progressInfo, 
    CancellationToken token, 
    TaskScheduler scheduler)
{
    ...
    // Get the required data using the relevant synchronisation context.
    SpreadsheetGear.IWorksheet worksheet = null;
    SpreadsheetGear.IRange range = null;
    Task task = Task.Factory.StartNew(() =>
    {
        worksheet = workbookView.ActiveWorksheet;
        range = worksheet.UsedRange;
    }, CancellationToken.None,
       TaskCreationOptions.None,
       scheduler);
    try
    {
        task.Wait();
    }
    finally
    {
        task.Dispose();
    }

    // Now perform operations with 'worksheet'/'range' on the thread-pool thread...
} 
```

在这种方法中，我需要从 UI 中提取数据并将数据多次写入 UI。对于写作，我可以清楚地使用“progressInfo”，但如何处理来自 UI 的拉取信息。在这里，我使用了 UI 线程同步上下文，但这会做很多次。**有没有更好的方法来执行这些操作/我目前的方法有什么缺陷吗？**

*笔记。显然，我会将`Task.Factory.StartNew(...)`代码包装成一个可重用的方法，为了简洁起见，上面明确显示。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:59:30.987

如果你经常在 UI 和线程池线程之间来回切换，你的代码会有点混乱。

你基本上有两个选择：让你的“正常”上下文是线程池线程，其中部分计划到 UI 线程（就像你现在拥有的那样），或者让你的“正常”上下文是 UI 线程，部分计划到线程池线。

我通常更喜欢后者，因为您可以使用更简单的`Task.Run`而不是`Task.Factory.StartNew`特定的`TaskScheduler`. 但无论哪种方式，代码都会有点混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:37:37.890

我没有使用 SpreadsheetGear 工作簿，但我想它有一个事件机制，您可以使用该机制将相关数据存储在您可以从 UISynchronizationContext 外部访问的自定义对象中，这样您就可以避免强烈绑定到工作簿 UI 控件。这将允许您避免阻塞 UI 线程

```
 Task task = Task.Factory.StartNew(() =>
{
    worksheet = workbookView.ActiveWorksheet;
    range = worksheet.UsedRange;
}, CancellationToken.None,
   TaskCreationOptions.None,
   scheduler);
try
{
    task.Wait();
}
finally
{
    task.Dispose();
} 
```

GenerateStage 方法的一部分。

但同样，我的建议是基于有关 SpreadsheetGear 工作簿控件的一些假设，这可能是不正确的。*

# r - R-Cran 和 R-Forge 项目之间的区别？

> ID：14499296
> 
> 赞同：6
> 
> 时间：2013-01-24T10:38:54.827
> 
> 标签：r

我是R的初学者。

我发现有两个名为[CRAN](http://cran.r-project.org/)和[R-Forge](http://r-forge.r-project.org/)的项目网站。

这两者之间究竟有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T10:55:56.397

[CRAN](http://cran.r-project.org/)是 R 的主要包存储库。它存储源代码并构建包的二进制文件。它是默认存储库，因此您可以使用 R 的出厂新副本访问其中的包。这是人们寻找稳定版本包的第一个地方。（生物信息学软件包往往在[Bioconductor](http://bioconductor.org/)上。）

[R-Forge](http://r-forge.r-project.org/)（和[RForge](http://www.rforge.net/)）是包开发环境和存储库。这意味着它们包括 (SVN) 源代码控制、错误跟踪和其他功能。您可以从中获取软件包的开发版本。替代方案包括[github](https://github.com/)、[Google 代码](http://code.google.com/)和[bitbucket](https://bitbucket.org/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-24T10:46:18.523

[CRAN](http://cran.r-project.org/)或*综合 R 存档网络*是 R 包的官方分发网络。要发布 R 包，请将其源代码上传到 CRAN FTP 服务器。然后对该软件包进行测试，为不同平台构建，并在世界各地的不同镜像上提供，以供下载和安装`install.packages()`。

R-forge 是一个包开发网站，提供包开发工具：源代码控制、错误跟踪、邮件列表等。这些是 CRAN 不提供的工具，CRAN 只是一个分发网络。

# c - 为什么以下代码中出现分段错误？

> ID：14499300
> 
> 赞同：2
> 
> 时间：2013-01-24T10:38:58.007
> 
> 标签：c

我在维基百科上读过这个

```
 int main(void)
 {

    char *s = "hello world";
    *s = 'H';

 } 
```

当包含此代码的程序被编译时，字符串“hello world”被放置在程序可执行文件中标记为只读的部分中；加载时，操作系统将它与其他字符串和常量数据一起放在内存的只读段中。执行时，将变量 s 设置为指向字符串的位置，并尝试通过变量将 H 字符写入内存，从而导致分段错误**

我不知道为什么将字符串放在只读段中。请有人可以解释一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:42:03.017

字符串文字存储在只读内存中，这就是它的工作原理。您的代码使用初始化的指针指向存储字符串文字的内存，因此您无法有效地修改该内存。

要在可修改内存中获取字符串，请执行以下操作：

```
char s[] = "hello world"; 
```

那么你很好，因为现在你只是使用常量字符串来初始化一个非常量数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T10:43:18.620

两者之间有很大区别：

```
char * s = "Hello world"; 
```

和

```
char s[] = "Hello world"; 
```

在第一种情况下，`s`是指向您无法更改的内容的指针。它存储在只读内存中（通常在应用程序的代码部分中）。

在后一种情况下，您在读写内存（通常是普通 RAM）中分配一个数组，您可以对其进行修改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T10:41:07.553

*   当您这样做时：`char *s = "hello world";`then`s`是*指向***代码部分**中的内存的指针，因此您**无法**更改它。

*   当您这样做时：`char s[] = "Hello World";`then`s`是**堆栈** 上*的字符数组*，因此您**可以**更改它。

 ****如果您不希望在程序期间更改字符串，最好这样做：`char const *s = ....;`。然后，当您尝试更改字符串时，您的程序**不会因分段错误而崩溃**，它会出现**编译器错误**（这要好得多）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:29:34.827

首先对指针有一个很好的理解，我给UA做个简短的demo：

首先让我们逐行分析您的代码。让我们从主要开始

char *s = "Some_string";

首先，你声明了一个指向 char 变量的指针，现在 *s 是内存中的一个地址，如果你试图改变它的内存值，C 会踢你，这是非法的，所以你最好声明一个字符数组，然后分配s 到它的地址，然后改变 s。

希望你得到，它。如需进一步参考和详细了解，请参阅 KN King：C Programming A Modern Approach

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T15:43:56.653

根据语言定义，字符串文字必须以这样的方式存储，即它们的生命周期在程序的生命周期中延伸，并且它们在整个程序中都是可见的。

就字符串的存储*位置*而言，这意味着什么**取决于实现**；语言定义不要求将字符串文字存储在只读内存中，并且并非所有实现都这样做。它只是说尝试修改字符串文字的内容会导致未定义的行为，这意味着实现可以自由地做任何它想做的事情。****

# sql - 将当前时间翻倍

> ID：14499306
> 
> 赞同：-4
> 
> 时间：2013-01-24T10:39:18.957
> 
> 标签：sql, oracle, date-arithmetic

我有一个查询，我正在计算时间。我想让时间加倍，这样如果时间到了，`01:40`它应该变成`03:20`. 这是我当前的查询

```
SELECT TO_CHAR(TRUNC((ATN_INN-ACT_INN)*24),'09')||':'||  
TO_CHAR(TRUNC(((ATN_INN-ACT_INN)*24-TRUNC((ATN_INN-ACT_INN)*24))*60),'09') B
FROM SML.EMP_INFO A 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:42:31.280

如果您真的只使用时间元素，最简单的方法是使用“SSSSS”日期掩码，它返回午夜后的秒数。所以这个查询将返回两列之间秒数的两倍：

```
select ( to_number(to_char(atn_inn, 'sssss')) 
          - to_number(to_char(acn_inn, 'sssss')) ) * 2 as double_diff_in secs
from sml.emp_info
/ 
```

将秒转换为小时和分钟留给读者作为练习。

请注意，仅当 ATN_INN 晚于 ACT_INN 但仍在同一天时，此查询才有意义。这是@Ben 试图做出的澄清（没有成功）。如果不是这种情况，则需要不同的解决方案，例如 ....

```
select ( ( extract ( hour from diff ) * 60) 
            + extract ( minute from diff  ) ) *2  as double_diff_in mins
from ( select to_dsinterval ( atn_inn - act_inn ) as diff
        from sml.emp_info )
/ 
```

*这将返回以分钟*为单位的加倍差异。同样，将输出呈现为显示格式留给读者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:17:31.333

在我看来，您正在使用此处描述的方法（日期之间的减法）： [http ://www.akadia.com/services/ora_date_time.html](http://www.akadia.com/services/ora_date_time.html)

如果您想将周期的长度加倍，您实际上只需将基本时间差乘以 2，如下所示：

```
SELECT TO_CHAR(TRUNC((2*(ATN_INN-ACT_INN))*24),'09')
    || ':' ||  
    TO_CHAR(TRUNC(((2*(ATN_INN-ACT_INN))*24
        -TRUNC((2*(ATN_INN-ACT_INN))*24))*60),'09') B
FROM SML.EMP_INFO A 
```

这将为您提供结果的小时部分和分钟部分，您可能也希望有天部分。

# php - 使用网站中的过滤器来定位产品

> ID：14499310
> 
> 赞同：0
> 
> 时间：2013-01-24T10:39:33.343
> 
> 标签：php, javascript, html, mysql, filter

我正在用 HTML、PHP、js 和 MySQL 开发一个网站。在这个网站上，客户将能够浏览我工作的公司销售的产品。由于我们有几种不同的产品，我们需要向客户提供过滤结果的能力（想象一个 eBay 网站）。

该网站做得很好，但我在网站开发方面不是很有经验，所以我在处理过滤器时遇到了麻烦。我需要将参数传递给 php 页面，考虑到问题在于，根据用户使用的过滤器数量，我需要传递不同数量的参数。

考虑以下 sql 语句作为过滤值的示例：

```
 SELECT p.code, 
        p.price,
        p.description  
 FROM products p  
 INNER JOIN products_filtervalues pf1  
            ON pf1.productcode = p.code 
            AND pf1.idfilter=1 
            AND pf1.idfiltervalue=45  
 INNER JOIN products_filtervalues pf2  
            ON pf2.productcode = p.code 
            AND pf2.idfilter=2 
            AND pf2.idfiltervalue=6  
 INNER JOIN products_filtervalues pf3  
            ON pf3.productcode = p.code 
            AND pf3.idfilter=4 
            AND pf3.idfiltervalue=7  
 INNER JOIN filtervalues f  
            ON p.idcategory=1 
            AND p.idsubcategory=3 
            AND pf1.idfiltervalue=f.idfiltervalue 
            AND pf1.idfilter=f.idfilter  
 LIMIT 0, 15 
```

它工作得很好，但是为了使这项工作能够正常工作，我需要能够插入多个“内连接”行，因为内连接的数量将根据选择的过滤器值的数量而变化。

到目前为止，该网站运行良好，使用 jquery 的 PHP 和 HTML 之间的所有通信都运行良好。所以，问题不在于通信或存在错误，我只需要知道如何解决这种情况。

也许有更好的解决方案，但我现在看不到这一点。请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:23:31.080

如果您必须使用 eav 模型，一种解决方案是构建伪规范化（和虚拟）数据透视表，然后按如下方式查询：

```
 SELECT * FROM eav_hell;
 +-------+-----------+--------+
 | Owner | Attribute | value  |
 +-------+-----------+--------+
 |    10 | COLOR     | BLUE   |
 |    10 | COLOR     | GREEN  |
 |    10 | COLOR     | RED    |
 |    10 | SIZE      | BIG    |
 |    20 | COLOR     | GREEN  |
 |    20 | MEMORY    | 16G    |
 |    20 | MEMORY    | 32G    |
 |    20 | SIZE      | MEDIUM |
 |    30 | COLOR     | BLUE   |
 |    30 | COLOR     | RED    |
 |    30 | MEMORY    | 64G    |
 +-------+-----------+--------+

 SELECT * 
   FROM
      (
        SELECT owner
             , MAX(CASE WHEN attribute = 'color' THEN value END) color
             , MAX(CASE WHEN attribute = 'size' THEN value END) size
             , MAX(CASE WHEN attribute = 'memory' THEN value END) memory
          FROM eav_hell
  GROUP
            BY owner,attribute
      ) x
  WHERE color IN ('blue','green')
     OR size  IN ('small','medium');
 +-------+-------+--------+--------+
 | owner | color | size   | memory |
 +-------+-------+--------+--------+
 |    20 | GREEN | NULL   | NULL   |
 |    20 | NULL  | MEDIUM | NULL   |
 +-------+-------+--------+--------+

 Another solution, more of a quick and dirty hack, is as follows:

 SELECT *
   FROM eav_hell
  GROUP
     BY owner,attribute,value
 HAVING GROUP_CONCAT(CONCAT_WS(',',attribute,value)) IN ('color,blue','size,big')
 ;
 +-------+-----------+-------+
 | Owner | Attribute | value |
 +-------+-----------+-------+
 |    10 | COLOR     | BLUE  |
 |    10 | SIZE      | BIG   |
 |    30 | COLOR     | BLUE  |
 +-------+-----------+-------+ 
```

# css - YUI 和 Phantom/CasperJS：Y.get 回调问题

> ID：14499313
> 
> 赞同：1
> 
> 时间：2013-01-24T10:39:43.460
> 
> 标签：css, testing, yui, phantomjs, casperjs

我使用 YUI 3 作为我的主要 Javascript 库和 CasperJS 进行测试。

在我的应用程序中，我动态加载 CSS。我`Y.Get.css`这样使用：

```
Y.Get.css(
    '#my_cssFile#',
    {
        attributes : {
            id : "#css_ID#"
        },
        async : true,
        onEnd : function () {
              myCallbackFunction();
        }
    }
); 
```

当我使用 CasperJS 运行测试时，`myCallbackFunction()`它永远不会被调用。

我[读到](http://www.phpied.com/when-is-a-stylesheet-really-loaded/)有些浏览器没有实现`loadEvent`on`link`元素。然而，CasperJs 使用 Webkit 核心。我怀疑是其他原因造成的。

我也尝试使用该`pollInterval`属性，但没有结果。

有没有办法在用 casperJS 加载 CSS 后调用回调？

# nginx - 如何根据请求中的 Origin 标头将 nginx Access-Control-Allow-Origin 正确设置为响应标头？

> ID：14499320
> 
> 赞同：27
> 
> 时间：2013-01-24T10:40:03.820
> 
> 标签：nginx, cors

我正在寻找一个 nginx 配置设置，它确实`Access-Control-Allow-Origin`将`Origin`.

似乎该`*`方法不适用于 Chrome，并且多个 URL 不适用于 Firefox，因为 CORS 规范不允许这样做。

到目前为止，唯一的解决方案是将 设置为`Access-Control-Allow-Origin`在源中接收到的值（是的，可以实施一些验证）。

问题是如何在 nginx 中做到这一点，最好不安装额外的扩展。

```
set $allow_origin "https://example.com"
# instead I want to get the value from Origin request header
add_header 'Access-Control-Allow-Origin' $allow_origin; 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-03-18T04:06:05.110

使用`if`有时会破坏其他配置，例如`try_files`. 您最终可能会遇到意外的 404。

[改用地图](https://serverfault.com/a/674901/77854)

```
map $http_origin $cors_header {
    default "";
    "~^https?://[^/]+\.example\.com(:[0-9]+)?$" "$http_origin";
}

server {
    ...
    location / {
        add_header Access-Control-Allow-Origin $cors_header;
        try_files $uri $uri/ /index.php;
    }
    ...
 } 
```

[如果是邪恶的](http://wiki.nginx.org/IfIsEvil)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-01-14T23:57:08.290

我自己开始使用它，这是我当前 Nginx 配置中的一行：

```
add_header 'Access-Control-Allow-Origin' "$http_origin"; 
```

这将设置一个标头以允许请求的来源作为唯一允许的来源。因此，无论您来自哪里，都是唯一允许的地方。所以它应该与允许“*”没有太大不同，但从浏览器的角度来看它看起来更具体。

此外，您可以在 Nginx 配置中使用条件逻辑来指定允许的主机名白名单。[这是来自https://gist.github.com/Ry4an/6195025](https://gist.github.com/Ry4an/6195025)的示例

```
if ($http_origin ~* (whitelist\.address\.one|whitelist\.address\.two)$) {
  add_header Access-Control-Allow-Origin "$http_origin";
} 
```

我计划在我自己的服务器上尝试这种技术，以将允许的域列入白名单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-14T13:42:25.933

这是来自 conf.f 目录的文件的一部分，人们总是在其中描述他们的 Nginx 虚拟主机。$http_origin 与 allowed_origins 列表进行比较，然后在第二个映射块中，系统根据允许的列表决定将什么写入“header Access-Control-Allow-Origin”。这是代码的一部分。

#cat /etc/nginx/conf.d/somehost.conf

```
map $http_origin $origin_allowed {
        default 0;
        https://xxxx.yyyy.com 1;
        https://zzz.yyyy.com 1;
}
map $origin_allowed $origin {
        default "";
        1 $http_origin;
}

server {
       server_name somehost.com;
    #...[skipped text]
    add_header Access-Control-Allow-Origin $origin always;
    #....[skipped text]
} 
```

我在我的服务器上测试它。一切正常。祝你有美好的一天，身体健康，尤金。

# ruby-on-rails - 为 Ruby on Rails 编写测试以测试引用的字段可以更新并返回

> ID：14499321
> 
> 赞同：0
> 
> 时间：2013-01-24T10:40:03.797
> 
> 标签：ruby-on-rails, tdd, rails-activerecord

我是 Rails 新手，最近一直在学习一系列教程，并希望确保我走上了测试驱动的开发路线。我遇到了如何编写这个测试的障碍。

我有两个相关的模型：`Task`和`Project`。

`Task belongs_to Project`和`Project has_many Tasks`

在`project`显示模板中，我列出了与该模板相关`tasks`的所有内容`project`。

在任务中，我有一个状态字段，我想在按下按钮时将其设置为存档，然后返回相关项目。

任何人都可以给我一个推动正确的方向来编写带有关联的测试吗？将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:30:14.427

你有什么样的测试设置？您使用的是 RSpec 还是 Test::Unit？至于测试关联（在 Test::Unit 中），您可以执行以下操作：

```
#project_test.rb
def setup
  @project = Project.new(...)
end

def test_task_association
   assert_equal(@project.tasks, [])
   task = @project.task.new(...)
   assert_equal(@project.tasks, [task])
end 
```

我是即时输入的，所以我不会打赌语法是正确的。但它的要点应该是可以理解的。这种测试是“最低”级别的测试，也称为“单元测试”，您可以创建它来测试关联。如果您想测试模板，您可以查看“集成测试”。这些应该很有帮助： http: [//guides.rubyonrails.org/testing.html](http://guides.rubyonrails.org/testing.html)

# c# - 如何使用 ASP.Net 4.0 在社交网络门户中开发聊天模块？

> ID：14499325
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:40:20.797
> 
> 标签：c#, asp.net, .net, chat, social-networking

我想使用 ASP.Net 4.0 开发一个社交网络门户。如何使用 ASP.Net 开发像 Facebook 这样的聊天系统？

有相同的想法或样本吗？

我正在开发一个社交网络门户。Portal的一部分，我想开发一对一的聊天模块。所以用户可以互相聊天。在 Facebook 用户可以与他/她的朋友聊天（一对一）。我想使用 ASP.Net 4.0 开发类似的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:50:22.023

你应该看看 SignalR。还有一个很好的例子：

[http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)

# android - 动态设置视图样式：Android

> ID：14499327
> 
> 赞同：1
> 
> 时间：2013-01-24T10:40:24.670
> 
> 标签：android, android-layout, android-ui, android-styles

> 我想在 Activity 中*动态更改各种视图的外观（样式）。*但是在浏览各种博客时，***我才知道android不支持动态设置Views programmatic / dynamic的样式。***，虽然我不确定。

*1）除了使用主题或使用**具有预设样式的*布局xml文件之外，还有其他实现方式吗？

2) 是否可以通过对整个 Activity 使用 setTheme() 来为各种视图设置不同的样式（比如**TextView1***的绿色文本和* **TextView2**的*红色文本）？*

 **谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:05:26.553

您可以像这样更改 java 文件中的文本颜色。

```
textview1.setTextColor(Color.GREEN);

textview2.setTextColor(Color.RED); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:23:30.787

将此 xml 文件用作资源并将其添加到可绘制文件夹中。

```
 <?xml version="1.0" encoding="utf-8"?>
 <shape xmlns:android="http://schemas.android.com/apk/res/android" >

 <gradient
    android:angle="90"
    android:centerColor="#f77b2d"
    android:endColor="#f99f66"
    android:startColor="#f66a11" />

    <stroke
        android:width="0.5dp"
        android:color="#313437" />

    <corners
        android:bottomLeftRadius="4dp"
        android:bottomRightRadius="4dp"
        android:topLeftRadius="4dp"
        android:topRightRadius="4dp" />

 </shape> 
```**

# android - 如何检查会话是否在android中出现？

> ID：14499332
> 
> 赞同：1
> 
> 时间：2013-01-24T10:40:27.963
> 
> 标签：android

我对 Android 很陌生，我构建了一个使用会话的应用程序。

我使用`DefaultHttpClient`它，它默认为我维护会话。

但在我可以做一个`GET`例子之前：

```
HttpGet httpget = new HttpGet("someurl.com");
httpClient.execute(httpget); 
```

在此步骤之前，我可以检查当前请求是否存在会话？

有没有办法做到这一点？

提前致谢。

# google-drive-api - “域政策已禁用第三方云端硬盘应用”

> ID：14499333
> 
> 赞同：3
> 
> 时间：2013-01-24T10:40:32.920
> 
> 标签：google-drive-api

对于某些域，我们的应用程序不起作用。我检查了他们的 Google Apps 域配置并启用了 Google Drive。有任何想法吗？

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 OK
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "location" : "Authorization",
    "locationType" : "header",
    "message" : "The domain policy has disabled third-party Drive apps",
    "reason" : "domainPolicy"
  } ],
  "message" : "The domain policy has disabled third-party Drive apps"
}
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:143)
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:187)
    at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:279)
    at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:207)
    at com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive.java:307)
    at com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T13:26:37.800

即使为用户启用了 Google Drive 服务，管理员也可以限制用户安装 Google Drive 应用程序或使用 Google Drive API，方法是转到应用程序 > Google Apps > Drive 设置，然后取消选中“允许用户安装 Google Drive 应用程序” ”在“数据访问”菜单中。

您看到的错误消息表明这些域未选中“允许用户安装 Google 云端硬盘应用”。您的应用程序应通过以下方式向用户发送消息来处理此错误：

`Sorry, you cannot use this application because your administrator has disabled 3rd party Google Drive apps. Please ask your administrator to allow Google Drive apps by opening the Google Apps control panel and going to Apps > Google Apps > Settings for Drive and making sure "Allow users to install Google Drive apps" in the "Data Access" menu is enabled.`

# c# - 如何防止 iOS 崩溃报告器使 MonoTouch 应用程序崩溃？

> ID：14499334
> 
> 赞同：50
> 
> 时间：2013-01-24T10:40:33.727
> 
> 标签：c#, ios, xamarin.ios, crash-reports, testflight

iOS 中有很多 iOS 崩溃报告库，包括[TestFlight](https://testflightapp.com)和[HockeyApp](http://hockeyapp.net)。如果您不想依赖服务，您仍然可以使用[PLCrashReporter 之](http://code.google.com/p/plcrashreporter/)类的库。绑定这些库[相当简单](http://docs.xamarin.com/ios/Guides/Advanced_Topics/Binding_Objective-C_Libraries)，因为它们的公共 API 通常由几个类和几个初始化方法组成。

但是，当尝试在我们的应用程序中使用 TestFlight 和后来的 HockeyApp 时，我们的应用程序开始随机崩溃。事实证明，这*是一个*[多次](http://monotouch.2284126.n4.nabble.com/Re-App-crashes-before-starting-td4657864.html)[报告](https://bugzilla.xamarin.com/show_bug.cgi?id=4120) 的已知问题[，](https://stackoverflow.com/questions/7865374/problems-getting-testflight-to-work-with-monotouch-app/7867056#7867056)但 Xamarin 并没有对此发出警告，它相对晦涩难懂，我们很难找到它。

我们了解到，**所有 iOS 崩溃报告器都会阻止 Mono 捕获空引用异常：**

```
try {
    object o = null;
    o.GetHashCode ();
} catch {
    // Catch block isn't called with crash reporting enabled.
    // Instead, the app will crash.
} 
```

为什么会这样？引用 Xamarin 开发人员 Rolf 的话，

> 空引用异常最初实际上是一个 SIGSEGV 信号。通常，mono 运行时会处理此问题并将其转换为空引用异常，从而允许继续执行。问题是 SIGSEGV 信号在 ObjC 应用程序中是一件非常糟糕的事情（并且当它发生在托管代码之外时），因此任何崩溃报告解决方案都会将其报告为崩溃（并终止应用程序）——这发生在 MonoTouch 获得机会之前处理 SIGSEGV，所以 MonoTouch 对此无能为力。

我敢肯定，很多人在 MonoTouch 应用程序中使用 TestFlight，却不知道它会导致崩溃。
[不是很讽刺吗？](http://fgk.hanau.net/articles/ironic.html)

**如何使崩溃报告库*不会*导致 MonoTouch 应用程序崩溃？**

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-24T10:40:33.727

把这个放在`AppDelegate.cs`：

```
[DllImport ("libc")]
private static extern int sigaction (Signal sig, IntPtr act, IntPtr oact);

enum Signal {
    SIGBUS = 10,
    SIGSEGV = 11
}

static void EnableCrashReporting ()
{
    IntPtr sigbus = Marshal.AllocHGlobal (512);
    IntPtr sigsegv = Marshal.AllocHGlobal (512);

    // Store Mono SIGSEGV and SIGBUS handlers
    sigaction (Signal.SIGBUS, IntPtr.Zero, sigbus);
    sigaction (Signal.SIGSEGV, IntPtr.Zero, sigsegv);

    // Enable crash reporting libraries
    EnableCrashReportingUnsafe ();

    // Restore Mono SIGSEGV and SIGBUS handlers            
    sigaction (Signal.SIGBUS, sigbus, IntPtr.Zero);
    sigaction (Signal.SIGSEGV, sigsegv, IntPtr.Zero);

    Marshal.FreeHGlobal (sigbus);
    Marshal.FreeHGlobal (sigsegv);
}

static void EnableCrashReportingUnsafe ()
{
    // Run your crash reporting library initialization code here--
    // this example uses HockeyApp but it should work well
    // with TestFlight or other libraries.

    // Verify in documentation that your library of choice
    // installs its sigaction hooks before leaving this method.

    var manager = BITHockeyManager.SharedHockeyManager;
    manager.Configure (HockeyAppId, null);
    manager.StartManager ();
} 
```

`EnableCrashReporting ()`在方法的开头调用`FinishedLaunching`。如果需要，请
将此调用包装在指令中。`#if !DEBUG`

* * *

## 它是如何工作的？

我听从了 Rolf 的建议：

> 一种可能的解决方案是允许 mono 处理所有 SIGSEGV 信号（从技术上讲，崩溃报告库不应该处理 SIGSEGV 信号，或者它应该链接到 mono 的处理程序而不自己做任何处理）。如果 mono 确定 SIGSEGV 信号不是来自托管代码（即发生了非常糟糕的事情），它将引发 SIGABORT 信号（崩溃报告库应该已经处理并视为崩溃）。正如您所理解的，这是必须在崩溃报告库中完成的事情。

和[Landon Fuller](http://landonf.bikemonkey.org)的 Objective C 实现：

```
#import <signal.h>

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    /* Save Mono's signal handler actions */
    struct sigaction sigbus_action, sigsegv_action;
    sigaction(SIGBUS, NULL, &sigbus_action);
    sigaction(SIGSEGV, NULL, &sigsegv_action);

    // Enable the crash reporter here. Ie, [[PLCrashReporter sharedReporter] enableCrashReporterAndReturnError:],
    // or whatever is the correct initialization mechanism for the crash reporting service you're using

    /* Restore Mono's signal handlers */
    sigaction(SIGBUS, &sigbus_action, NULL);
    sigaction(SIGSEGV, &sigsegv_action, NULL);

    return YES;
} 
```

我使用[Banshee 源代码](https://github.com/GNOME/banshee/blob/stable-2.2/src/Core/Banshee.Core/Banshee.Base/PlatformHacks.cs)作为如何`sigaction`从 MonoTouch 调用的参考点。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-23T16:21:51.603

从 Xamarin.iOS 10.4 开始，现在有一种受支持的方式来执行此操作：

```
static void EnableCrashReporting ()
{
    try {
    } finally {
        Mono.Runtime.RemoveSignalHandlers ();
        try {
            EnableCrashReportingUnsafe ();
        } finally {
            Mono.Runtime.InstallSignalHandlers ();
        }
    }
}

static void EnableCrashReportingUnsafe ()
{
    // Run your crash reporting library initialization code here--
    // this example uses HockeyApp but it should work well
    // with TestFlight or other libraries.

    // Verify in documentation that your library of choice
    // installs its sigaction hooks before leaving this method.

    // Have in mind that at this point Mono will not handle
    // any NullReferenceExceptions, if there are any 
    // NullReferenceExceptions on any thread (not just the current one),
    // then the app will crash.

    var manager = BITHockeyManager.SharedHockeyManager;
    manager.Configure (HockeyAppId, null);
    manager.StartManager ();
} 
```

# javascript - 对国际化文件选择器的按钮文本感到困惑

> ID：14499339
> 
> 赞同：2
> 
> 时间：2013-01-24T10:40:41.887
> 
> 标签：javascript, css, string, localization, file-io

```
<input type="file" .../> 
```

我知道这将始终显示为 |选择文件| 没有选择文件。（chrome）/浏览...（IE 9 / Firefox）

我想问一下“选择文件/浏览”文本是否会根据用户的本地化而改变。

默认情况下它显示为“选择文件”，但在“fr/FR”中查看的人会看到“选择文件”或“choisir le fichier”

或者是否可以将按钮的文本本地化为“选择”，以便它在所有浏览器中显示相同，这样我就可以本地化字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:48:48.247

我的 Firefox 是英文的，但我从未使用过的 IE 在输入“文件”按钮上显示“Parcourir ...”...所以它似乎已本地化。

编辑：您可以通过更改导航器的语言（Firefox 中的选项>内容>语言）自行测试。编辑2：（上面只更改请求服务器的语言而不是firefox）更改firefox语言：安装语言的xpi（在那里搜索：[http ://releases.mozilla.org/pub/mozilla.org/firefox/ release/](http://releases.mozilla.org/pub/mozilla.org/firefox/releases/)）然后在选项卡“about：config”中，您可以将“general.useragent.locale”参数更改为所需的语言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:28:44.000

我相信以特定语言设置区域和语言会将“浏览”/“选择文件”默认为本地语言。如果设置区域是英语，但例如有法语键盘，则不会有任何区别，因为显示语言仍然是英语。

这主要是由于安全风险的原因，但是使用纯 Javascript/JQuery 可以解决它。

# codeigniter - PHPExcel内存不足错误

> ID：14499340
> 
> 赞同：1
> 
> 时间：2013-01-24T10:40:45.577
> 
> 标签：codeigniter, phpexcel

我在 CodeIgniter 中使用 PhpExcel。当我在 Excel 中生成大量数据时，会产生致命错误：

```
Out of memory (allocated 883949568) (tried to allocate 93 bytes) in /home/abc/public_html/xxx/application/libraries/excel/PHPExcel/Style.php on line 465. 
```

即使我在控制器中设置了内存限制 ini_set("memory_limit","5120M");

如何修复该错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:13:53.533

我在控制器中编写了以下代码：

公共函数 export_to_excel($sheets,$num_cols,$tab,$declared_file_name,$download_option) {

```
 $this->load->library('excel/PHPExcel/iofactory');

    // Cell caching to reduce memory usage.
    $cacheMethod = PHPExcel_CachedObjectStorageFactory:: cache_to_phpTemp;
    $cacheSettings = array( ' memoryCacheSize ' => '5120MB');
    PHPExcel_Settings::setCacheStorageMethod($cacheMethod, $cacheSettings);
            // Create new PHPExcel object
            $this->load->library('excel/PHPExcel');       

            /************ COLUMNS TO CALCULATE SUB TOTAL *******************/
            $col_heads = explode(",",rtrim($num_cols,","));

             foreach($col_heads as $key => $val)
                {
                 if(($val == 'PRODUCT LIABILITY') || ($val == 'PUBLIC LIABILITY') || ($val == 'GIT'))
                    {
                     unset($col_heads[$key]);
                    }
                }
            /************ COLUMNS WITH CURRENCY FORMAT *******************/
            $numeric_cols = array_merge($col_heads, array("LOSS OF RENT",
                                                            "TURNOVER","PRODUCT LIABILITY","PUBLIC LIABILITY","GIT"));

            /********************** SHEETS STARTS ********************************/
            $active_sheet_index = 0;
            foreach ($sheets as $sheet_name=>$rows)
            {
                if ($active_sheet_index > 0)
                {
                    // Create a new worksheet, after the default sheet
                    $this->phpexcel->createSheet();
                }
                $this->phpexcel->setActiveSheetIndex($active_sheet_index);

                $i=1; // start from 2nd row                    
                $numeric_format_col = array();

                /********************** ROWS STARTS ********************************/
                foreach ($rows as $key=>$val)
                {
                    $index = 65;
                    $a = 65;
                    $prefix_code = 65;
                    $prefix = '';

                /********************** COLS STARTS ********************************/
                    foreach ($val as $values)
                    {
                        // from A to Z
                        if ($index <= $a+25)
                        {
                            $cell = $prefix.chr($index).$i;
                        }
                        else
                        {
                            $previou_prefix = '';
                            $prefix = $previou_prefix.chr($prefix_code);
                            if ($prefix_code < $a+25)
                            {
                                $prefix_code++;
                            }
                            else
                            {
                                $prefix_code = 65;
                            }
                            $index = 65;
                            $cell = $prefix.chr($index).$i;
                        }
                        $col_dimension = $prefix.chr($index); // e.g. A,B,C
                        $this->phpexcel->getActiveSheet()->getColumnDimension($col_dimension)->setAutoSize(true);

                        //echo '<br>'.$cell;
                        /******* STORE COLUMN NUMBER FOR SHOWING SUB TOTAL OF COLUMNS ********/
                        if ($i == 1)
                        {
                            $col_val = str_replace('"','',$values);
                            if (in_array($col_val,$col_heads) || in_array(str_replace(' ','_',$col_val),$col_heads) 
                                || (strpos($col_val,'COMMISSION(') !== false && strpos($col_val,'%)') !== false))
                            {
                                $col_name = str_replace(' ','_',$col_val);
                                $tot[$col_name] = $prefix.chr($index);
                            }
                            if (in_array($col_val,$numeric_cols) || in_array(str_replace(' ','_',$col_val),$numeric_cols) 
                                || (strpos($col_val,'COMMISSION(') !== false && strpos($col_val,'%)') !== false))
                            {
                                $numeric_format_col[] = $prefix.chr($index);
                            }
                            if ($col_val == "FULL ADDRESS")
                            {
                                $business_address_col = $prefix.chr($index);
                            }
                        }                           
                        /***********************************************************/

                        $values = str_replace("\"","",$values);
                        if (isset($business_address_col) && $cell != $business_address_col.$i)
                        {                           
                            $values = str_replace("\n"," ",$values);
                            $values = str_replace("\t"," ",$values);
                            $values = str_replace("\r\t"," ",$values);
                        }                       

                        if($i == 1)
                        {
                            // FOR BROKER ACCOUNTS STATEMENT START
                            if ($tab == 'BROKER NAME' && (!(strpos($values,'BROKER COMMISSION') === false) || $values == 'BROKER FEE' || $values == 'BROKER NET') && $sheet_name != 'DBI')
                            {
                                $values = str_replace('BROKER',$sheet_name,$values);
                            }
                            // FOR BROKER ACCOUNTS STATEMENT END

                            $this->phpexcel->getActiveSheet()->getStyle($cell)->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_CENTER);
                            //$this->PHPExcel->getActiveSheet()->getRowDimension("$i")->setRowHeight(25);
                            $this->phpexcel->getActiveSheet()->setCellValue($cell, trim($values));
                         }
                         else
                         {                           
                            if (isset($business_address_col) && $cell == $business_address_col.$i)
                            {
                                $val_arr = explode("|",$values);
                                $val_str = implode("\n",$val_arr);
                                $this->phpexcel->getActiveSheet()->setCellValue($cell, $val_str);
                                $this->phpexcel->getActiveSheet()->getStyle($cell)->getAlignment()->setWrapText(true);
                                //$this->phpexcel->getActiveSheet()->getStyle($cell)->getBorders()->setBorderStyle(PHPExcel_Style_Border::BORDER_THIN);
                            }
                            else
                            {
                                $this->phpexcel->getActiveSheet()->setCellValue($cell, trim($values));
                            }

                            if (in_array($col_dimension,$numeric_format_col))
                            {
                                $format ='[$£-809]#,##0.00;[Red]-[$£-809]#,##0.00';   
                                //$format = utf8_encode('[$£-809]#,##0.00;[Red]-[$£-809]#,##0.00');
                                $this->phpexcel->getActiveSheet()->getStyle($cell)->getNumberFormat()->setFormatCode($format);
                            }
                         }

                        /******** SET HEADER COLOR ***********/
                        if ($i == 1)
                        {

                            if($this->color1=="#000" && $this->color2=="#000")
                            {
                            if($this->header_alignment=='text-align-left')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle($cell)->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_LEFT);
                            }
                            else if($this->header_alignment=='text-align-right')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle($cell)->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_RIGHT);                                    
                            }
                            else 
                            {
                            $this->phpexcel->getActiveSheet()->getStyle($cell)->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_CENTER);
                            }

                            if($this->header_font_style=="bold italic")
                                    {
                                    $header_font_style=explode(" ",$this->header_font_style);
                                    $header_font=array(
                                                        $header_font_style[0] => true,
                                                        $header_font_style[1] => true,
                                                        'color'=> array('argb' => 'FFFFFFFF'),
                                                        'size'=>$this->body_font_size,
                                                        'name'=>$this->body_font

                                          );
                                    }
                                    else 
                                    {
                                    $header_font=array(
                                                        $this->header_font_style => true,
                                                        'color'=> array('argb' => 'FFFFFFFF'),
                                                        'size'=>$this->header_font_size,
                                                        'name'=>$this->header_font,
                                                        'Alignment'=>$this->header_alignment
                                        );
                                    }

                            $this->phpexcel->getActiveSheet()->getStyle($cell)->applyFromArray(
                            array('fill'     => array(
                                                        'type'        => PHPExcel_Style_Fill::FILL_SOLID,
                                                        'color'        => array('argb' => 'FF000000')
                                                    ),
                                'font' => $header_font ,
                                'borders' => array('outline' => array('style' => PHPExcel_Style_Border::BORDER_THICK,

                                                         )
                                                        )
                            )

                            );
                            }
                            else 
                            {
                            if($this->header_alignment=='text-align-left')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle($cell)->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_LEFT);
                            }
                            else if($this->header_alignment=='text-align-right')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle($cell)->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_RIGHT);                                    
                            }
                            else 
                            {
                            $this->phpexcel->getActiveSheet()->getStyle($cell)->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_CENTER);
                            }
                        if($this->header_font_style=="bold italic")
                                    {
                                    $header_font_style=explode(" ",$this->header_font_style);
                                    $header_font=array(
                                                        $header_font_style[0] => true,
                                                        $header_font_style[1] => true,
                                                        'color'=> array('rgb' =>$this->color1),
                                                        'size'=>$this->body_font_size,
                                                        'name'=>$this->body_font

                                          );
                                    }
                                    else 
                                    {
                                    $header_font=array(
                                                        $this->header_font_style => true,
                                                        'color'=> array('rgb' =>$this->color1),
                                                        'size'=>$this->header_font_size,
                                                        'name'=>$this->header_font,
                                                        'Alignment'=>$this->header_alignment
                                        );
                                    }
                        $this->phpexcel->getActiveSheet()->getStyle($cell)->applyFromArray(
                            array('fill'     => array(
                                                        'type'        => PHPExcel_Style_Fill::FILL_SOLID,
                                                        'color'        => array('rgb' =>$this->color2)
                                                    ),
                                'font' => $header_font,
                                'borders' => array('outline' => array('style' => PHPExcel_Style_Border::BORDER_THICK,

                                                         )
                                                        )
                            )

                            );

                        }
                        }

                        $index++;
                    }
                    /********************** COLS ENDS ********************************/
                    $final_cell = $cell;
                    $i++;                       
                }
                /********************** ROWS ENDS ********************************/
                 /********************** Body Format********************************/
                 if($this->color3!="#000" || $this->color4!="#000")
                 {
                         if($this->body_alignment=='text-align-left')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle("A2:$final_cell")->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_LEFT);
                            }
                            else if($this->body_alignment=='text-align-right')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle("A2:$final_cell")->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_RIGHT);                                 
                            }
                            else 
                            {
                            $this->phpexcel->getActiveSheet()->getStyle("A2:$final_cell")->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_CENTER);
                            }
                            if($this->body_font_style=="bold italic")
                            {

                                $body_font_style=explode(" ",$this->footer_font_style);
                                $body_font=array(
                                                        $body_font_style[0] => true,
                                                        $body_font_style[1] => true,
                                                        'color'=> array('rgb' =>$this->color3),
                                                        'size'=>$this->body_font_size,
                                                        'name'=>$this->body_font
                                          );
                            }
                            else 
                            {
                                $body_font=array(
                                                        $this->body_font_style => true,
                                                        'color'=> array('rgb' =>$this->color3),
                                                        'size'=>$this->body_font_size,
                                                        'name'=>$this->body_font
                                        );
                            }

                            $this->phpexcel->getActiveSheet()->getStyle("A2:$final_cell")->applyFromArray(
                                array(
                                        'fill'     => array(
                                                            'type'        => PHPExcel_Style_Fill::FILL_SOLID,
                                                            'color'        => array('rgb' =>$this->color4)
                                                        ),
                                        'font' => $body_font,
                                        'borders' => array('outline' => array('style' => PHPExcel_Style_Border::BORDER_THICK,))
                                    )                                  
                            );
                      }
                      else 
                      {
                            if($this->body_alignment == 'text-align-left')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle("A2:$final_cell")->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_LEFT);
                            }
                            else if($this->body_alignment == 'text-align-right')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle("A2:$final_cell")->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_RIGHT);                                 
                            }
                            else 
                            {
                                $this->phpexcel->getActiveSheet()->getStyle("A2:$final_cell")->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_CENTER);
                            }

                            if ($this->body_font_style == "bold italic")
                            {
                                    $body_font_style = explode(" ",$this->footer_font_style);
                                    $body_font = array(
                                                            $body_font_style[0] => true,
                                                            $body_font_style[1] => true,
                                                            'size'=>$this->body_font_size,
                                                            'name'=>$this->body_font
                                                    );
                            }
                            else 
                            {
                                    $body_font = array(
                                                            $this->body_font_style => true,
                                                            'size'=>$this->body_font_size,
                                                            'name'=>$this->body_font
                                                    );
                            }

                            $this->phpexcel->getActiveSheet()->getStyle("A2:$final_cell")->applyFromArray(
                                array(
                                            'font' => $body_font,
                                            'borders' => array('outline' => array('style' => PHPExcel_Style_Border::BORDER_THICK,) )
                                        )                               
                                );

                        }

                /***************** SHOW SUB TOTAL ROW ************************/                   
                $count_tot = 0;
                if (isset($tot))
                {
                    foreach ($tot as $col_name=>$c)
                    {

                            $count_tot++;
                            $k = $i + 1;
                            $cell = $c.$k;
                            if ($count_tot == 1)
                            {
                                $first_col_name = $cell;
                            }                           
                            $j = $i - 1;               

                            $this->phpexcel->getActiveSheet()->setCellValue($cell, '=SUM('.$c.'2:'.$c.$j.')');

                            $format ='[$£-809]#,##0.00;[Red]-[$£-809]#,##0.00';
                            //$format = utf8_encode('[$£-809]#,##0.00;[Red]-[$£-809]#,##0.00');
                            $this->phpexcel->getActiveSheet()->getStyle($cell)->getNumberFormat()->setFormatCode($format);                           

                    }
                }

                $last_col_name = $cell;                   

                /***************** SET BG COLOR IN SUB TOTAL CELLS ****************/
                if (isset($first_col_name))
                {

                        if($this->color5=="#000" && $this->color6=="#000")
                        {
                            if($this->footer_alignment=='text-align-left')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle("$first_col_name:$last_col_name")->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_LEFT);
                            }
                            else if($this->footer_alignment=='text-align-right')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle($cell)->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_RIGHT);                                    
                            }
                            else 
                            {
                            $this->phpexcel->getActiveSheet()->getStyle("$first_col_name:$last_col_name")->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_CENTER);
                            }

                            if($this->footer_font_style=="bold italic")
                                    {

                                        $footer_font_style=explode(" ",$this->footer_font_style);
                                        $footer_font=array(
                                                        $footer_font_style[0] => true,
                                                        $footer_font_style[1] => true,
                                                        'size'=>$this->footer_font_size,
                                                        'name'=>$this->footer_font
                                          );
                                    }
                                    else 
                                    {
                                        $footer_font=array(
                                                        $this->footer_font_style => true,
                                                        'size'=>$this->footer_font_size,
                                                        'name'=>$this->footer_font
                                                        );
                                    }
                            $this->phpexcel->getActiveSheet()->getStyle("$first_col_name:$last_col_name")->applyFromArray(
                        array('fill'     => array(
                                                    'type'        => PHPExcel_Style_Fill::FILL_SOLID,
                                                    'color'        => array('argb' => 'FFCCFFCC')
                                                ),
                              'font'    =>$footer_font,
                              'borders' => array('outline' => array('style' => PHPExcel_Style_Border::BORDER_THICK,

                                                         )
                                                        )
                             )
                        );
                        }
                        else 
                        {

                            if($this->footer_alignment=='text-align-left')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle("$first_col_name:$last_col_name")->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_LEFT);
                            }
                            else if($this->footer_alignment=='text-align-right')
                            {
                                $this->phpexcel->getActiveSheet()->getStyle($cell)->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_RIGHT);                                    
                            }
                            else 
                            {
                            $this->phpexcel->getActiveSheet()->getStyle("$first_col_name:$last_col_name")->getAlignment()->setHorizontal(PHPExcel_Style_Alignment :: HORIZONTAL_CENTER);
                            }
                            if($this->footer_font_style=="bold italic")
                            {

                                $footer_font_style=explode(" ",$this->footer_font_style);
                                $footer_font=array(
                                                        $footer_font_style[0] => true,
                                                        $footer_font_style[1] => true,
                                                        'color'=> array('rgb' =>$this->color5),
                                                        'size'=>$this->footer_font_size,
                                                        'name'=>$this->footer_font
                                          );
                            }
                            else 
                            {
                                $footer_font=array(
                                                        $this->footer_font_style => true,
                                                        'color'=> array('rgb' =>$this->color5),
                                                        'size'=>$this->footer_font_size,
                                                        'name'=>$this->footer_font
                                                        );
                            }

                    $this->phpexcel->getActiveSheet()->getStyle("$first_col_name:$last_col_name")->applyFromArray(
                    array('fill'     => array(
                                                        'type'        => PHPExcel_Style_Fill::FILL_SOLID,
                                                        'color'        => array('rgb' =>$this->color6)
                                                    ),
                                'font' =>$footer_font,
                                'borders' => array('outline' => array('style' => PHPExcel_Style_Border::BORDER_THICK,

                                                         )
                                                        )
                            )
                        );
                }
                }

                $this->phpexcel->getActiveSheet()->getStyle("A1:$final_cell")->getAlignment()->setVertical(PHPExcel_Style_Alignment::VERTICAL_TOP);

                // Rename sheet
                $this->phpexcel->getActiveSheet()->setTitle($sheet_name);
                $active_sheet_index++;                   
            }

           // $this->phpexcel->getActiveSheet()->setAutoFilter('A1:C9');
            /********************** SHEETS ENDS ********************************/
            $file_name = $declared_file_name.'.xls';
            if ($download_option == 'declare_report' || $download_option == 'save_report')
            {

                // Redirect output to a client’s web browser (Excel2007)                    
                header('Content-Type: application/vnd.ms-excel');
                header('Content-Disposition: attachment;filename="'.$file_name.'"');
                header('Cache-Control: max-age=0');

                $objWriter = PHPExcel_IOFactory::createWriter($this->phpexcel, 'Excel5');
                $objWriter->save('php://output'); 
                if ($download_option == 'declare_report')
                {
                $objWriter->save('uploads/declared_reports/'.$file_name);
                }
                else{
                $objWriter->save('uploads/saved_reports/'.$file_name);
                }
                //echo __FILE__;
                //$objWriter->save(str_replace(__FILE__,'uploads/declared_reports/'.$file_name,__FILE__));            

            }
            else
            {
                // Redirect output to a client’s web browser (Excel2007)
                header('Content-Type: application/vnd.ms-excel');
                header('Content-Disposition: attachment;filename="'.$file_name.'"');
                header('Cache-Control: max-age=0');

                $objWriter = PHPExcel_IOFactory::createWriter($this->phpexcel, 'Excel5');

                $objWriter->save('php://output');
            }   
            exit;

} 
```

# php - 浏览器临时缓存

> ID：14499344
> 
> 赞同：0
> 
> 时间：2013-01-24T10:40:48.640
> 
> 标签：php, image, caching

我正在创建一个动态图像，它依赖于有关登录用户的大量信息，但是在线用户如此之多，图像系统正在使用我的网站主机分配给我的大量资源。

有没有办法告诉浏览器临时缓存图像？类似于临时cookies？

该图像包含诸如帖子计数之类的数字和其他频繁递增的数字，这些数字可能导致浏览器的自动缓存图像可能在每次页面加载时重新下载图像。我不介意为我的服务器节省大量处理时间的一点点不准确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:04:24.037

[编辑] 浏览器已经缓存内容（除非明确告知不要这样做），如果它检测到最后修改的更改，则重新加载它。

我猜测您正在生成的图像是a）由特定的php script（）返回到浏览器或b）暂时存储但正在更新，因此浏览器检索更新的版本。[/编辑]

如果您基于动态生成的内容输出图像，您可以将其临时写入目录，然后根据预定义的时间段拉取图像（如果有效）。

```
if(file_exists($file) && filemtime($file) <= time()-60*20) {
    // Regenerate image
} else {
    // Load image from cache
} 
```

上面的示例在 20 分钟内不会重新生成图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:50:18.407

尝试看这里 [http://www.webscalingblog.com/performance/caching-http-headers-cache-control-max-age.html](http://www.webscalingblog.com/performance/caching-http-headers-cache-control-max-age.html)

或者，您可以在 PHP 中设置缓存控制标头，并使用脚本显示图像。

# c# - 调用 Process.Start from WCF 后重新启动自托管 WCF

> ID：14499345
> 
> 赞同：0
> 
> 时间：2013-01-24T10:40:51.840
> 
> 标签：c#, wcf, process, process.start

我需要从 WCF 服务（自托管）启动进程。我已经通过使用 Process.Start() 方法完成了它。然后我尝试重新启动我的 WCF 服务，但它失败了，因为它的地址已经在使用中（但旧进程不存在）。此问题与[https://superuser.com/questions/215351/how-do-i-kill-a-process-that-is-dead-but-listening](https://superuser.com/questions/215351/how-do-i-kill-a-process-that-is-dead-but-listening)类似，以及与从 WCF 服务打开的进程相关的确切问题（他们保持 tcp 连接打开）。有没有办法在不重新启动进程的情况下重新启动 WCF 服务，从这个服务开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:33:40.110

我发现只有一种方法可以安全地从 WCF 服务启动进程。我创建了一个代理进程，它正在启动另一个进程，而不是直接启动指定进程，首先我启动 ProcessStarter.exe 进程，该进程依次启动指定进程，然后它正在关闭。我无法解释 Windows 的行为，但在这种情况下，由 WCF 服务创建的所有 TCP 连接都将关闭。

# matlab - 求和图像矩阵matlab

> ID：14499346
> 
> 赞同：0
> 
> 时间：2013-01-24T10:40:52.577
> 
> 标签：matlab, image-processing

我是 matlab 新手。有人可以告诉我这个片段对图像的 3-D 数组求和有什么问题。它在第 3 行显示错误，我无法调试它。

```
x=imread('test.jpg');
imshow(x);
sumdiff=sum(sum(sum(testArr2, 3),2),1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:14:28.560

虽然马克可能已经回答了这个问题，但我想补充一点，对整个数组求和的最简单方法可能是使用冒号语法：

```
sum_all = sum(x(:)) 
```

另请注意，`imread`通常返回一个整数数组（`uint8`对于标准 jpeg 图像）。使用这种类型的数组时，并非所有数学运算都允许 - 有时使用`im2double`是必要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T11:06:10.043

唯一让我觉得明显是错误的事情是，您正在对名为的变量中的值求和，`testArr2`但在名为的变量中包含图像像素数据`x`。在哪里`testArr2`定义和填充数据？

# jquery - 使用引导程序的导航活动类不适用于动态数据

> ID：14499347
> 
> 赞同：0
> 
> 时间：2013-01-24T10:40:58.743
> 
> 标签：jquery, twitter-bootstrap, asp.net-mvc-4

我是 javascript 开发的新手，所以请多多包涵。

我已经使用 jquery 从服务器加载了引导导航项。这是我的 js 代码的样子。

```
$.ajax({
    url: url,
    success: function (data) {

        $.each(data, function (key, val) {

            if (val.MenuId == 1) {
                $('<li class="active" ><a href="#' + val.Title + '">' + val.Title + '</a></li>').appendTo('#menus');
            } else {
                $('<li ><a href="#' + val.Title + '">' + val.Title + '</a></li>').appendTo('#menus');
            }

        });
    },
    error: function () {
        //alert("Failed to get menus...");
    }
}); 
```

我可以在导航栏中看到菜单项，我的默认项设置为“活动”。但问题是 bootsrap 的其余 css 似乎在这里不起作用，例如当我点击其他菜单项时，“活动”类不再起作用，当我在导航栏中有菜单时显然不是这种情况客户端。有人可以告诉我我在这里做错了什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:45:20.103

尝试包括：-

```
 data-toggle="tab" 
```

作为锚标记中的属性。

这就是完全渲染的锚标记的样子。

```
<a href="#Main" data-toggle="tab">Main</a> 
```

# c# - 如何为多种数据类型创建单个下拉列表？

> ID：14499352
> 
> 赞同：2
> 
> 时间：2013-01-24T10:41:09.673
> 
> 标签：c#, asp.net-mvc-3

我正在使用 ASP.Net MVC 3，我需要创建一个下拉列表，其中包含与多个数据库表相关的项目。

通常，如果我需要为单个数据类型创建一个下拉列表，我可以轻松地将 ID 用作每个下拉列表的“值”，`option`并且会执行以下操作：

```
@Html.DropDownListFor(x => x.SelectedID, Model.GetMyList()) 
```

但现在我想混合多种数据类型。所以让我们说对于这个例子，我想创建一个列表来表示像“所有者”这样的东西，它可以是“用户”或“客户”。在此示例中，User 和 Customer 都是单独的数据库表，因此仅 ID 值不足以正确识别它们。

那么实现此类功能的最佳方法是什么？

直接在我的脑海中，我的第一个想法是创建一个“自定义”值字符串，然后可以在服务器端解析它以计算出 ID 和数据类型，比如......

```
"USER|1"
"CUSTOMER|1" 
```

我知道我可以完成这项工作，但我是否让这变得比需要的更复杂？是否有内置或建议的方式来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T12:59:29.687

由于没有人想出更好的方法，我可以确认我最初的想法（尽管它是不受欢迎的）完成了这项工作。

在设置选择选项的值时，应该创建一个可以轻松在服务器端解析的自定义字符串，这是使用分隔实体类型和 ID 的管道来实现的，例如：

```
"USER|1"
"USER|2"
"CUSTOMER|1"
"CUSTOMER|2" 
```

一旦选择的值被传递给服务器，它就可以被解析如下：

```
string option = "USER|1";
string[] values = option.Split('|');
string entityType = values[0];
int entityId = Int.Parse(values[1]); 
```

然后可以这样使用：

```
if(entityType == "USER")
   UpdateUser(entityId);
else//CUSTOMER
   UpdateCustomer(entityId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:46:41.200

在你的模型中你不能做这样的事情： -

```
public class Model
{
    public string Owner { get; set; }
    public List<MyList> ListCollection { get; set; }

    public class MyList
    {
        public int Id { get; set; }
        public string Value { get; set; }
    }
} 
```

那么当您检查选择了哪个列表项时，您还可以访问“所有者”字段，它会告诉您它属于哪个表？

# sql-server - 在SSIS XML config中，Servername在哪些地方需要修改？

> ID：14499354
> 
> 赞同：0
> 
> 时间：2013-01-24T10:41:10.413
> 
> 标签：sql-server, configuration, ssis

如果您想手动修改包中的连接管理器配置生成的 XML 到不同的服务器，您究竟在哪里（以及在多少个地方）修改了服务器名称？另外，您修改这些信息的地方的基本原理是什么？

q1。在下面的 xml 中，我通过更改连接管理器中的服务器名称并重新运行属性配置来生成，为了通过直接修改 XML 手动更改服务器，看来您将在之后修改服务器`Data Source =`名称

```
Package.Connections[StagingConn].Properties[ServerName]" ValueType="String"><ConfiguredValue> 
```

**这个对吗？**

q2。下面的 xml 是通过更改连接管理器本身然后重新生成属性配置而产生的。原来的服务器是

> NYCDSTGDWDB01\NADVSTG1EDW

并且更改为服务器是

> NYGNACKENSON2\NADEV1EDW

当我切换服务器并重新生成包配置 XML 时，应用程序部分的用途是什么 `Name=SSIS-ExtractCRMStage_BusinessUnit-{8ECEE79B-793C-4E54-A659-C487265700DD}NYCDSTGDWDB01\NADEVSTG1EDW` ？为什么在那个地方没有更改服务器名称？

```
Path="\Package.Connections[StagingConn].Properties[ConnectionString]" ValueType="String"><ConfiguredValue>**Data Source=**NYGNACKENSON2\NADEV1EDW;Initial Catalog=WeightWatchersStaging;Provider=SQLNCLI10.1;
Integrated Security=SSPI;Auto Translate=False;Application Name=SSIS-ExtractCRMStage_BusinessUnit-{8ECEE79B-793C-4E54-A659-C487265700DD}NYCDSTGDWDB01\NADEVSTG1EDW.WeightWatchersStaging;</ConfiguredValue></Configuration><Configuration ConfiguredType="Property" Path="\Package.Connections[StagingConn].Properties[Description]" ValueType="String"><ConfiguredValue></ConfiguredValue></Configuration><Configuration ConfiguredType="Property" Path="\Package.Connections[StagingConn].Properties[InitialCatalog]" ValueType="String"><ConfiguredValue>WeightWatchersStaging</ConfiguredValue></Configuration><Configuration ConfiguredType="Property" Path="\Package.Connections[StagingConn].Properties[Name]" ValueType="String"><ConfiguredValue>StagingConn</ConfiguredValue></Configuration><Configuration ConfiguredType="Property" Path="\Package.Connections[StagingConn].Properties[Password]" ValueType="String"><ConfiguredValue></ConfiguredValue></Configuration><Configuration ConfiguredType="Property" Path="\Package.Connections[StagingConn].Properties[ProtectionLevel]" ValueType="Int32"><ConfiguredValue>1</ConfiguredValue></Configuration><Configuration ConfiguredType="Property" Path="\Package.Connections[StagingConn].Properties[RetainSameConnection]" ValueType="Boolean"><ConfiguredValue>0</ConfiguredValue></Configuration><Configuration ConfiguredType="Property" Path="\Package.Connections[StagingConn].**Properties[ServerName]" ValueType="String"><ConfiguredValue>**NYGNACKENSON2\NADEV1EDW</ConfiguredValue></Configuration><Configuration ConfiguredType="Property" Path="\Package.Connections[StagingConn].Properties[UserName]" ValueType="String"><ConfiguredValue></ConfiguredValue></Configuration></DTSConfiguration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:01:54.237

1.如果您在生成xml配置时刚刚选择了`connection string`属性，那么您只需在一个位置更改服务器名称

```
 <Configuration ConfiguredType="Property" Path="\Package.Connections[localhost.Test].Properties[ConnectionString]" ValueType="String">
    <ConfiguredValue>Data Source=localhost;Initial Catalog=Test;Provider=SQLNCLI10.1;Integrated Security=SSPI;Application Name=SSIS-Package-{15F05396-460E-4646-B9BD-A10EE11628A5}localhost.Test;Auto Translate=False;</ConfiguredValue>
    </Configuration> 
```

更改 DataSource= *localhost*

否则，如果您`Package Configuration Wizard`在 Connection String 、server 、name 等中选择了所有属性，那么您需要在 2 个地方进行更改

```
1.Properties[ConnectionString] Change DataSource here and Properties[ServerName]
 change the configured value for it 
```

2.应用程序名称出现在配置文件中，因为您拥有`EncryptSensitiveWithUserKey`for`protection level`包。在此保护级别中，只有您可以在系统中运行您的包。如果您尝试将 SSIS 包共享给其他人，他们将无法执行它，因为该包`password protected`带有一个`key` （您在配置文件中看到），只有当您从系统运行包时才能解密

有关 SSIS 中使用的各种保护级别，请参阅[本文](http://technet.microsoft.com/en-us/library/ms141747%28v=sql.90%29.aspx)

# java - JTable显示某一日期下的事件列表

> ID：14499356
> 
> 赞同：0
> 
> 时间：2013-01-24T10:41:26.210
> 
> 标签：java, sql, swing, jtable, tablemodel

我想发布一个关于我特别想做的事情的问题，但不知道如何解决这个问题，因为我是新手`JTables`。这就是我的自动取款机： ![这就是我的atm](../Images/b4313454c240b896b2974815d1296ddf.png)

但我想这样安排表格：

![在此处输入图像描述](../Images/7a06842587857bc95c734761a58a77c6.png)

因此，在特定日期下，显示与该日期相对应的所有事件，而不是像上面那样单独显示。

以下是有问题的相关分类，我不确定在哪里以及如何进行交替以让我实现上述目标。

```
public class DbUtils {
    public static TableModel resultSetToTableModel(ResultSet rs) {

        try {
            ResultSetMetaData metaData = rs.getMetaData();
            int numberOfColumns = metaData.getColumnCount();
            Vector columnNames = new Vector();

            for (int column=0; column < numberOfColumns; column++) {
                columnNames.addElement(metaData.getColumnLabel(column + 1));              
            }
            Vector rows = new Vector(); 
            while(rs.next()) {
            Vector newRow = new Vector(); 
            for (int i =1; i <= numberOfColumns; i++) {
            newRow.addElement(rs.getObject(i));
            }
            rows.addElement(newRow);
            } 
            return new DefaultTableModel(rows,columnNames);

           }  catch (Exception e) {
              e.printStackTrace();      
             return null; 
        }

    }
}

public class EventModel {

public TableModel getTableData() {
     TableModel model=null;
    try {
        String sql = "SELECT eventID as 'Event ID', date as 'Date',eventName as 'Name', time as 'Start Time' FROM Event";
        pst = conn.prepareStatement(sql); 
        rs = pst.executeQuery();
        model = (DbUtils.resultSetToTableModel(rs));
        }
    catch(SQLException e){
        e.printStackTrace();
    }
   finally {
        try {rs.close(); pst.close();}
        catch(SQLException e){}     }                                 
       return model; 
}

public Events getEvent(String tableClick) {
try {
        pst = conn.prepareStatement("SELECT * FROM Event WHERE eventID='"+tableClick+"' ");
        rs = pst.executeQuery();
        while(rs.next()){      
        e.setEventName(rs.getString(2));
        e.setEventDate(rs.getString(3));
        e.setEventTime(rs.getString(4));
        e.setEventVenue(rs.getString(5));
        e.setEventDetail(rs.getString(6));
        e.setEventOpportunity(rs.getString(7));
        e.setEventMoreDetails(rs.getString(8));
        e.setEndTime(rs.getString(9));
       }
    } 
    catch(SQLException ex){
    ex.printStackTrace();
    } finally {
            try {
                rs.close();
                pst.close();
            } catch (Exception e) {
            }
        }  
    return e;
} //end getEvent

}

public class EventController {
private KeyAdapter keyAdapter = new KeyAdapter() {
        @Override
        public void keyReleased(java.awt.event.KeyEvent e) {
            if((e.getKeyCode()==KeyEvent.VK_UP) || (e.getKeyCode()==KeyEvent.VK_DOWN)) {
             changeEvent();           
        }
    }
  };  

  public void changeEvent() {
      int rowSelected = view.tableEvent.getSelectedRow();
      tableClick = view.tableEvent.getModel().getValueAt(view.tableEvent.convertRowIndexToModel(rowSelected), 0).toString();
      events = model.getEvent(tableClick); //tell model to change its state based on user input on views 
      view.changeDisplay(events);

  }

}

public class EventView {
public void changeDisplay(Events e) {
       evTitle.setText(""+e.getEventName());
       evWhen.setText("When: "+ e.getEventDate());
       evWhere.setText("Where: "+ e.getEventVenue());
       evDescription.setText(""+ e.getEventDetail());
       evOpportunity.setText(""+ e.getEventOpportunity());
       evMoreDet.setText(""+ e.getEventMoreDetails());
       endTime.setText("End Time: "+e.getEndTime());
   }

} 
```

`e`是 Events 类的对象，它只是一个`bean`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:48:58.577

你也许可以简单地`setAutoCreateRowSorter(true)`。附录：由于`Date`implements `Comaprable`，请确保您的`TableModel`返回类型为日期列，如此[处](https://stackoverflow.com/a/4553842/230513)`Date.class`所示。另请参阅[*如何使用表格：排序和过滤*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)。[](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)

 *一种更精细的方法是使用树形表，例如`Outline`，[此处](https://codereview.stackexchange.com/a/4447/6692)所示。顶层是日期，叶子是事件。*

# php - 在PHP中将字符串存储在数据库中

> ID：14499358
> 
> 赞同：0
> 
> 时间：2013-01-24T10:41:38.760
> 
> 标签：php, arrays, string

我在 php 中的字符串就像 0:12,1:123,2:234 .... n 次

我想将它存储在数据库中-->

```
0:12 --- 0 as room_number 12 as value
1:12 --- 1 as room_number 12 as value 
```

数据库结构就像 -

```
id(primary) room_number value 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:46:38.600

使用 PHP 的`explode()`函数以逗号分隔以获得每个房间的字符串，然后`explode()`用冒号分隔每个房间字符串以获取您所追求的各个值。现在您已经获得了值，您应该能够使用正常的 DB 处理函数来保存记录。

或者直接在数据库中执行而不需要任何 PHP 代码（假设您使用的是 MySQL），您可以使用 MySQL 的`LOAD DATA INFILE`命令，指定逗号作为记录终止符和冒号作为字段终止符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:46:46.120

```
$string = '0:12,1:123,2:234';

$elements = explode(',', $string);

foreach($elements as $value){

        $value = explode(':', $value);
        echo 'Room: '.$value[0].', Value: '.$value[1].'<br/>';

        // Write some code here to insert into your database.
} 
```

# ruby - 无法安装 ruby -debug？

> ID：14499362
> 
> 赞同：3
> 
> 时间：2013-01-24T10:41:48.807
> 
> 标签：ruby, ruby-debug

有人遇到过这种情况么？

```
gem install ruby-debug
Building native extensions.  This could take a while...
ERROR:  Error installing ruby-debug:
    ERROR: Failed to build gem native extension.

        /Users/ohad/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb
Can't handle 1.9.x yet
*** extconf.rb failed *** 
```

如果这与它有任何关系，我正在使用 gemset。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:45:29.413

gem 是当前 Ruby 版本的`debugger`事实标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:50:33.727

到目前为止，唯一对我有用的调试器是在[https://github.com/cldwalker/debugger](https://github.com/cldwalker/debugger)`debugger`找到的 gem

放入`gem 'debugger'`Gemfile 或安装它只是为了开发。

```
group :development do
  gem 'debugger'
end 
```

`debugger`在登陆gem之前，我尝试了其他几个选项（都失败了） 。具体来说，`ruby-debug`和`ruby-debug19`（[https://github.com/denofevil/ruby-debug19](https://github.com/denofevil/ruby-debug19)）。

`ruby-debug`安装失败。虽然`ruby-debug19`确实安装了，但我在`require 'ruby-debug' ; Debugger.start`.

这是我的环境：

```
ruby 1.9.3p374 (2013-01-15 revision 38858) [i686-linux]
Rails 3.2.11
Ubuntu 12.04.2 LTS 32bit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:43:39.280

您需要使用该`ruby-debug19`版本，因为“常规”版本与 Ruby 1.9 不兼容：

```
gem install ruby-debug19 
```

有关更多信息，请查看[gems 项目页面](https://github.com/mark-moseley/ruby-debug)。

# java - 获取部署在 weblogic 服务器上的所有应用程序的列表

> ID：14499370
> 
> 赞同：4
> 
> 时间：2013-01-24T10:42:11.630
> 
> 标签：java, python, weblogic, weblogic-10.x, wlst

使用以下代码，我可以连接到 weblogic 服务器。现在我想获取服务器上部署的所有应用程序的列表。

命令提示符中的 listapplications() 列出了应用程序，但是当我执行interpreter.exec(listapplications()) 时，我无法将输出存储到变量中，因为interpreter.exec 返回一个void。关于如何将应用程序列表存储在集合/数组中的任何想法？

任何其他替代方案或线索也会有所帮助。

```
import org.python.util.InteractiveInterpreter;
import weblogic.management.scripting.utils.WLSTInterpreter;

public class SampleWLST {

    public static void main(String[] args) {
        SampleWLST wlstObject = new SampleWLST();
        wlstObject.connect();
    }

    public void connect() {
        InteractiveInterpreter interpreter = new WLSTInterpreter();
        interpreter.exec("connect('username', 'password', 't3://localhost:8001')");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:42:00.853

我解决了。我通过使用 InteractiveInterpreter 的 setOut 方法重定向到流来捕获 wlst 的输出，并编写了一个扫描器来读取 Java 中的流。

希望这可能对其他人有所帮助。

```
ArrayList<String> appList = new ArrayList<String>();
Writer out = new StringWriter();
interpreter.setOut(out);
interpreter.exec("print listApplications()");   

StringBuffer results = new StringBuffer();
results.append(out.toString());

Scanner scanner = new Scanner(results.toString());
while(scanner.hasNextLine()){
    String line = scanner.nextLine();
    line = line.trim();
    if(line.equals("None"))
        continue;
    appList.add(line);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-05T12:15:14.200

要获取已部署的所有已部署 articats，您可以使用：

```
private void listAllDeployments(WebLogicDeploymentManager deployManager,
                                  Target targets[]) throws TargetException {
  if (deployManager != null && targets.length > 0) {
    print("Get Domain:" + deployManager.getDomain(), 0);
    TargetModuleID targetModuleID[] = deployManager.getAvailableModules(ModuleType.WAR, 
      targets);
    } else {
      System.out.print(
        "WebLogicDeploymentManager is either empty or targets are empty.Please check",
        1);
    }

  } 
```

要创建部署管理器，您可以使用：

```
SessionHelper.getRemoteDeploymentManager(protocol,hostName, portString, adminUser, adminPassword); 
```

您将需要的依赖项：

编译（组：'com.oracle.weblogic'，名称：'wlfullclient'，版本：'10.3.6.0'，传递：false）

# sharepoint - SharePoint url - 网站 url 是什么类型的元素或部分？

> ID：14499372
> 
> 赞同：2
> 
> 时间：2013-01-24T10:42:13.790
> 
> 标签：sharepoint

我有一个指向 SharePoint 元素的 url。我不知道元素的类型，它可以是列表、文档库、这些元素中的元素，或者只是一个站点 url。我只能使用 SharePoint 的 Web 服务。我必须决定它的类型。

我找到了一个解决方案：GetUrlSegments WS 可以提供此信息，但如果我在元素所在的子站点调用 WS，它可以工作。只知道 url 我不知道 url 的哪一部分是站点 url。

如何从 url 中确定元素的类型？

或者我如何从 url 中决定站点（或子站点）的 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:09:48.280

我找到了答案。它不是那么简单但可用。

1.  使用输入 url 在主站点中调用 sitedata.asmx.GetSiteAndWeb WS。它从给定的 url 返回主站点 url (strSite) 和子站点 url (strWeb)。
2.  调用子站点中的 sitedata.asmx.GetURLSegments WS，您在输入 url 的第一点得到了什么。
3.  如果 GetURLSegments 什么都不返回： url 指向一个站点。

    如果 GetURLSegments 仅返回 listId： url 指向一个列表。使用lists.asmx.GetList，您可以从列表中获取信息。

    如果 GetURLSegments 返回 listId 和 itemId： url 指向一个列表项。使用 lists.asmx.GetListItems 您可以从项目中获取信息。

# php - 获取最近的星期几的日期

> ID：14499374
> 
> 赞同：0
> 
> 时间：2013-01-24T10:42:17.690
> 
> 标签：php, zend-framework, magento, zend-date

我正在使用 Zend_Date 创建日期。例如，如何获取一周中最近的一天的日期，例如星期一。我不仅需要从现在开始计算，还需要从任何日期开始计算。

例子。1 月 31 日，星期四。

我需要计算最近的星期一的日期。

函数调用的结果应该是 2 月 4 日。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T10:44:16.440

我不知道 zend 但你肯定可以`date('Y-m-d',strtotime('next monday'));`在 php中使用

# cakephp - cakephp 2.2.5-0 版本如何创建多个主题

> ID：14499376
> 
> 赞同：1
> 
> 时间：2013-01-24T10:42:24.023
> 
> 标签：cakephp

我正在使用 cakephp 2.2.5-0 版本来开发我的项目。我想创建一个单独的主题，这样我就可以在不修改默认主题文件的情况下构建新主题。

问题是当我用谷歌搜索它时。我得到了旧版本的解决方案。当前包（cakephp 2.2.5-0）文件夹结构与旧版本不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:23:18.283

使用主题在[官方文档](http://book.cakephp.org/2.0/en/views/themes.html)中有很好的描述，并且涵盖了 CakePHP 版本 2.2.5。

# sql - 如何 - 在 SQL Server 中创建后直接创建和使用数据库？

> ID：14499378
> 
> 赞同：5
> 
> 时间：2013-01-24T10:42:26.347
> 
> 标签：sql, sql-server, database, tsql, bdd

我创建了一个 sql 脚本来检查数据库是否已经存在，如果它已经存在，它会删除并重新创建。在我想在创建表**之后直接连接它之后..**

这是我的代码，但它不起作用。他宣布一条错误消息

***消息 911，级别 16，状态 1，第 10 行数据库“Arms2”不存在。确保输入的名称正确。***

我的剧本

```
IF EXISTS (select * from sys.databases where name = 'Arms2')
BEGIN 
    DROP DATABASE Arms2
    PRINT 'DROP DATABASE Arms2'
END
    CREATE DATABASE Arms2;
    PRINT 'CREATE DATABASE Arms2'

USE Arms2

CREATE TABLE ..... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T10:46:29.273

在 CREATE 之后放置一个 GO 语句...

```
...
CREATE DATABASE Arms2;
PRINT 'CREATE DATABASE Arms2'
GO
USE Arms2 
```

# bash - 在 Bash 中连接

> ID：14499385
> 
> 赞同：0
> 
> 时间：2013-01-24T10:42:58.593
> 
> 标签：bash, join, awk

我几乎到处都在寻找我的问题的解决方案，所以我希望有人可以在这里指导我。

我有一个包含以下信息的 csv 文件：

```
Location    NumA1   NumA2   NumB1   NumB2
Area 1  1321    140 1321    1530
Area 2  1321    140 1321    1540
Area 3  1321    140 1321    1644
Area 4  1321    140 1321    1645
Area 5  1321    140 1321    2140
Area 6  1321    141 1321    142
Area 7  1321    141 1321    143
Area 8  1321    141 1323    181
Area 9  1321    141 1323    182
Area 10 1321    141 1323    183
Area 11 1321    141 1333    401
Area 12 1321    141 1323    902 
```

我想得到的输出如下：

```
Location    NumA1   NumA2   NumB1   NumB2   A Cell  B Cell  A to B  B to A
Area 1  1321    140 1321    1530    1321_140    1321_1530   1321_140_1321_1530  1321_1530_1321_140
Area 2  1321    140 1321    1540    1321_140    1321_1540   1321_140_1321_1540  1321_1540_1321_140
Area 3  1321    140 1321    1644    1321_140    1321_1644   1321_140_1321_1644  1321_1644_1321_140
Area 4  1321    140 1321    1645    1321_140    1321_1645   1321_140_1321_1645  1321_1645_1321_140
Area 5  1321    140 1321    2140    1321_140    1321_2140   1321_140_1321_2140  1321_2140_1321_140
Area 6  1321    141 1321    142 1321_141    1321_142    1321_141_1321_142   1321_142_1321_141
Area 7  1321    141 1321    143 1321_141    1321_143    1321_141_1321_143   1321_143_1321_141
Area 8  1321    141 1323    181 1321_141    1323_181    1321_141_1323_181   1323_181_1321_141
Area 9  1321    141 1323    182 1321_141    1323_182    1321_141_1323_182   1323_182_1321_141
Area 10 1321    141 1323    183 1321_141    1323_183    1321_141_1323_183   1323_183_1321_141
Area 11 1321    141 1333    401 1321_141    1333_401    1321_141_1333_401   1333_401_1321_141
Area 12 1321    141 1323    902 1321_141    1323_902    1321_141_1323_902   1323_902_1321_141 
```

这与 Excel 中的连接相同，尽管由于文件有超过 200,000 行，Excel 处理更改的速度很慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:51:14.383

```
$ awk '{ print $1,$2,$3,$4,$5,$6,$3"_"$4,$5"_"$6,$3"_"$4"_"$5"_"$6,$5"_"$6"_"$3"_"$4 }' 1.txt 
Area 1 1321 140 1321 1530 1321_140 1321_1530 1321_140_1321_1530 1321_1530_1321_140
Area 2 1321 140 1321 1540 1321_140 1321_1540 1321_140_1321_1540 1321_1540_1321_140
Area 3 1321 140 1321 1644 1321_140 1321_1644 1321_140_1321_1644 1321_1644_1321_140
Area 4 1321 140 1321 1645 1321_140 1321_1645 1321_140_1321_1645 1321_1645_1321_140
Area 5 1321 140 1321 2140 1321_140 1321_2140 1321_140_1321_2140 1321_2140_1321_140
Area 6 1321 141 1321 142 1321_141 1321_142 1321_141_1321_142 1321_142_1321_141
Area 7 1321 141 1321 143 1321_141 1321_143 1321_141_1321_143 1321_143_1321_141
Area 8 1321 141 1323 181 1321_141 1323_181 1321_141_1323_181 1323_181_1321_141
Area 9 1321 141 1323 182 1321_141 1323_182 1321_141_1323_182 1323_182_1321_141
Area 10 1321 141 1323 183 1321_141 1323_183 1321_141_1323_183 1323_183_1321_141
Area 11 1321 141 1333 401 1321_141 1333_401 1321_141_1333_401 1333_401_1321_141
Area 12 1321 141 1323 902 1321_141 1323_902 1321_141_1323_902 1323_902_1321_141 
```

如果您想要一个选项卡式空间，您可以通过以下方式使用 awk：

```
$ awk '{ print $1,$2"\t"$3"\t"$4"\t"$5"\t"$6"\t"$3"_"$4"\t"$5"_"$6"\t"$3"_"$4"_"$5"_"$6"\t"$5"_"$6"_"$3"_"$4 }' 1.txt 
Area 1  1321    140 1321    1530    1321_140    1321_1530   1321_140_1321_1530  1321_1530_1321_140
Area 2  1321    140 1321    1540    1321_140    1321_1540   1321_140_1321_1540  1321_1540_1321_140
Area 3  1321    140 1321    1644    1321_140    1321_1644   1321_140_1321_1644  1321_1644_1321_140
Area 4  1321    140 1321    1645    1321_140    1321_1645   1321_140_1321_1645  1321_1645_1321_140
Area 5  1321    140 1321    2140    1321_140    1321_2140   1321_140_1321_2140  1321_2140_1321_140
Area 6  1321    141 1321    142 1321_141    1321_142    1321_141_1321_142   1321_142_1321_141
Area 7  1321    141 1321    143 1321_141    1321_143    1321_141_1321_143   1321_143_1321_141
Area 8  1321    141 1323    181 1321_141    1323_181    1321_141_1323_181   1323_181_1321_141
Area 9  1321    141 1323    182 1321_141    1323_182    1321_141_1323_182   1323_182_1321_141
Area 10 1321    141 1323    183 1321_141    1323_183    1321_141_1323_183   1323_183_1321_141
Area 11 1321    141 1333    401 1321_141    1333_401    1321_141_1333_401   1333_401_1321_141
Area 12 1321    141 1323    902 1321_141    1323_902    1321_141_1323_902   1323_902_1321_141 
```

如果您还想打印标题，请参阅此链接：[http ://www.techtrunch.com/scripting/awk-formatted-output](http://www.techtrunch.com/scripting/awk-formatted-output)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:02:06.550

```
awk '$6=$6" "$3"_"$4" "$5"_"$6" "$3"_"$4"_"$5"_"$6" "$5"_"$6"_"$3"_"$4' your_file 
```

[在这里](http://ideone.com/MIuofT)测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:14:25.147

如果您想自己提供标题行：

```
$ awk 'NR>1{a=$3"_"$4;b=$5"_"$6;print $0,a,b,a"_"b,b"_"a}' file
Area 1  1321    140 1321    1530 1321_140 1321_1530 1321_140_1321_1530 1321_1530_1321_140
Area 2  1321    140 1321    1540 1321_140 1321_1540 1321_140_1321_1540 1321_1540_1321_140
Area 3  1321    140 1321    1644 1321_140 1321_1644 1321_140_1321_1644 1321_1644_1321_140
Area 4  1321    140 1321    1645 1321_140 1321_1645 1321_140_1321_1645 1321_1645_1321_140
Area 5  1321    140 1321    2140 1321_140 1321_2140 1321_140_1321_2140 1321_2140_1321_140
Area 6  1321    141 1321    142 1321_141 1321_142 1321_141_1321_142 1321_142_1321_141
Area 7  1321    141 1321    143 1321_141 1321_143 1321_141_1321_143 1321_143_1321_141
Area 8  1321    141 1323    181 1321_141 1323_181 1321_141_1323_181 1323_181_1321_141
Area 9  1321    141 1323    182 1321_141 1323_182 1321_141_1323_182 1323_182_1321_141
Area 10 1321    141 1323    183 1321_141 1323_183 1321_141_1323_183 1323_183_1321_141
Area 11 1321    141 1333    401 1321_141 1333_401 1321_141_1333_401 1333_401_1321_141
Area 12 1321    141 1323    902 1321_141 1323_902 1321_141_1323_902 1323_902_1321_141 
```

或者如果您希望它像其他字段一样生成：

```
$ awk '{s=(NR==1?2:3); a=$s"_"$++s;b=$++s"_"$++s;print $0,a,b,a"_"b,b"_"a}' file
Location    NumA1   NumA2   NumB1   NumB2 NumA1_NumA2 NumB1_NumB2 NumA1_NumA2_NumB1_NumB2 NumB1_NumB2_NumA1_NumA2
Area 1  1321    140 1321    1530 1321_140 1321_1530 1321_140_1321_1530 1321_1530_1321_140
Area 2  1321    140 1321    1540 1321_140 1321_1540 1321_140_1321_1540 1321_1540_1321_140
Area 3  1321    140 1321    1644 1321_140 1321_1644 1321_140_1321_1644 1321_1644_1321_140
Area 4  1321    140 1321    1645 1321_140 1321_1645 1321_140_1321_1645 1321_1645_1321_140
Area 5  1321    140 1321    2140 1321_140 1321_2140 1321_140_1321_2140 1321_2140_1321_140
Area 6  1321    141 1321    142 1321_141 1321_142 1321_141_1321_142 1321_142_1321_141
Area 7  1321    141 1321    143 1321_141 1321_143 1321_141_1321_143 1321_143_1321_141
Area 8  1321    141 1323    181 1321_141 1323_181 1321_141_1323_181 1323_181_1321_141
Area 9  1321    141 1323    182 1321_141 1323_182 1321_141_1323_182 1323_182_1321_141
Area 10 1321    141 1323    183 1321_141 1323_183 1321_141_1323_183 1323_183_1321_141
Area 11 1321    141 1333    401 1321_141 1333_401 1321_141_1333_401 1333_401_1321_141
Area 12 1321    141 1323    902 1321_141 1323_902 1321_141_1323_902 1323_902_1321_141 
```

# android - 从 Android 应用程序运行 USSD 代码时出现 MMI 代码错误

> ID：14499388
> 
> 赞同：1
> 
> 时间：2013-01-24T10:43:07.533
> 
> 标签：android, ussd

我正在运行 USSD 代码来转发来自 Android 应用程序的呼叫。问题是代码在一些较旧的 Android 版本手机上运行，​​但在最近的手机上出现“无效的 MMI 代码连接问题”错误。出现此 MMI 错误的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T14:25:11.943

这意味着您发送的 USSD 命令可能存在格式错误。android中USSD的传统格式是*xxx*xx*xxx-xxx-xxx#

如果您通过拨号器传递 USSD 代码，则末尾的“#”必须经过 uri 编码，以便拨号器正确解析其意图。

```
startActivity(new Intent(android.ACTION_CALL, new Uri.fromParts("tel", "*123*4*123456789" +  Uri.encode("#"), null)); 
```

或者，“#”的 Uri 代码是 %23，将其传递给拨号程序也将允许发送 USSD 代码。

看起来确实需要付出很多努力，这是因为谷歌目前没有任何 API 支持 USSD 代码，[https://code.google.com/p/android/issues/detail? id=1285](https://code.google.com/p/android/issues/detail?id=1285)

希望这可以帮助

# json - ASP.NET MVC 4：在 IE7 中打开或保存 json 文件

> ID：14499393
> 
> 赞同：0
> 
> 时间：2013-01-24T10:43:19.180
> 
> 标签：json

提交页面时，会在 json 文件中创建数据并提交。它在除 IE7 之外的所有浏览器中都能正常工作。真的不知道是什么问题。尝试更改 MIME 类型

结果 = Json(model, "text/x-json", System.Text.Encoding.UTF8, JsonRequestBehavior.AllowGet);

结果 = Json（模型，“文本/html”，System.Text.Encoding.UTF8，JsonRequestBehavior.AllowGet）；

结果 = Json(model, "application/json", System.Text.Encoding.UTF8, JsonRequestBehavior.AllowGet);

还包含 json2.js 文件，但不会重定向到成功页面。

但它没有用。

我想要的是，它应该重定向到成功页面..而不是要求我打开或保存 json 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:48:52.030

IE7 不支持开箱即用的 JSON 字符串化。我的一个项目也有类似的问题。

抓住 Douglas Crockford 的 JSON 库，包括它，你应该会很好。

[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

json2.js 是您需要的文件。

# google-apps-script - 应用程序脚本：防止多次触发处理程序？

> ID：14499404
> 
> 赞同：0
> 
> 时间：2013-01-24T10:43:40.730
> 
> 标签：google-apps-script

我在一个表单上看到多个提交，大概是因为有人双击提交按钮。在 GAS 中是否有防止这种情况的好方法？我想我可以通过 JSON 设置一个全局变量，并使用它来确定是否执行处理程序，但这似乎有点笨拙。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:49:04.647

创建一个客户端处理程序，在执行其余代码之前禁用提交按钮。

您可以在添加任何类型的服务器处理程序的任何地方添加客户端处理程序，并且它完全在客户端上工作，无需任何服务器往返。

请参阅下面的 Serge insas 评论！

# video - 使用 DirectX 在 WP8 中进行 H264 解码

> ID：14499416
> 
> 赞同：0
> 
> 时间：2013-01-24T10:44:46.687
> 
> 标签：video, directx, windows-phone-8, h.264

我知道在 Windows Phone 8 中我可以使用 DirectX 11，我需要手动解码 h264 帧。

那么我如何使用 DirectX 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:06:37.787

您实际上要做什么“解码H264”本身并不是AFAIK的目标。

要在 WP8 D3D 中播放视频，您可以使用新的[Media Foundation API](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681688%28v=vs.105%29.aspx)。请参阅 MSDN @ [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207074(v=vs.105).aspx上的代码示例](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207074(v=vs.105).aspx)

# ruby-on-rails - 在开发过程中，引导下拉菜单在我的 Rails 应用程序中不起作用

> ID：14499417
> 
> 赞同：0
> 
> 时间：2013-01-24T10:44:48.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我正在使用引导程序开发一个 rails (3.2) 应用程序。此应用程序包含一个下拉菜单，当我在开发模式下运行该应用程序时它坚持不工作。有趣的是它以前有效。

这是我的 application.js：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:44:48.127

如果在开发过程中预编译了资产，则可能会发生此问题。在开发过程中，引导程序的未缩小文件包括在内，并且包含所有 javascript (/assets/application.js?body=1) 的缩小版本的资源应该为空。如果资产被预编译（rake assets:precompile），applications.js 将被生成并且代码重复将会发生。

清理预编译的资产应该可以解决问题（rake assets:clean）

# ios - NSJSONSerialization 有时在异步请求中返回 null

> ID：14499419
> 
> 赞同：2
> 
> 时间：2013-01-24T10:44:56.183
> 
> 标签：ios, request, nsjsonserialization

我一直在开发应用程序，它对 JSON 类型的数据发出异步请求。最近，我在我的代码中发现了一个奇怪的错误，我不知道为什么会这样。

好的代码！

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

NSError *error=nil;

    result = [NSJSONSerialization JSONObjectWithData:retrievedData options:kNilOptions error:&error];
        NSLog(@"Result %@",result);
        NSLog(@"Retrieved data %@",retrievedData);
} 
```

结果是 NSDictionary，retrieveedData 是 NSMutableData。99% 的时间，它工作正常，connectionDidFinishLoading 被调用，我的结果被填充。但是，在那 1% 的时间里，检索到的数据被数据填充，但我的结果为空。（如您在图片上看到的那样。有人可以帮我吗？

![日志](../Images/4a296d6a12c146154b9798b8b506ca41.png)

编辑：我收到以下错误

```
Error Domain=NSCocoaErrorDomain Code=3840 "The operation couldn’t be completed. (Cocoa error 3840.)" (Garbage at end.) UserInfo=0x753e5c0 {NSDebugDescription=Garbage at end.} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:46:29.887

如果你先看一下错误，看看它是否给出了错误的任何迹象，这将有所帮助。

**[编辑]**
您的错误提到了原因：`Garbage at end.`.

来自网络服务器的响应不是有效的 JSON，它在输出末尾包含无效字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-06T08:37:55.840

我遇到过同样的问题。首先，看看什么是未正确解析的数据 - 就我而言，我做了

```
NSString *str = [[NSString alloc] initWithData:retrievedData encoding:NSUTF8StringEncoding]; 
```

在我的情况下，原因是 - 如果服务器连续发送了几个 socket.write() - 所有数据都是在一个块中接收的，比如

```
{first:json}{second:json}.. 
```

当然这不能被解析为一个单独的 json，所以我必须引入分隔符，并将接收到的缓冲区拆分为正确的块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-11T09:42:19.437

这有点晚了，但在我这样做之前，没有任何在线工作对我有用：

```
NSString * dataInString = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];

NSRange range = [dataInString rangeOfString:@"}" options:NSBackwardsSearch];

if(range.location != NSNotFound)
    dataInString = [dataInString substringWithRange:NSMakeRange(0,range.location+1)]; 
```

从那以后一直工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-23T09:00:21.980

我有同样的错误，问题是我的服务器在我的 json 响应中附加了一些额外的行，当我在浏览器中获得响应时不会出现。从终端使用 `curl`，您可以看到实际输出。黑客是截断多余的字符。使用 json 你有一个数组或字典。根据您的 json 结构，您可以使用代码（如上面的答案）但在第 2 行中查找注释

```
NSString * str = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];
NSRange range = [str rangeOfString:@"}" options:NSBackwardsSearch]; // } for dictionary, ] for array

if(range.location != NSNotFound)
str = [str substringWithRange:NSMakeRange(0,range.location+1)]; 
```

从垃圾数据中清除字符串后，您可以再次将其转换为数据。

```
 NSData *data = [str dataUsingEncoding:NSUTF8StringEncoding]; 
```

现在从这些数据中你可以得到你的数组或字典。

```
id jsonObject = [NSJSONSerialization
                 JSONObjectWithData:data
                 options:kNilOptions error:&error];  // i used id to be general, you can use array or dictionary structure or later cast this object to as per json 
```

# android - 在 webview 中打开通知

> ID：14499420
> 
> 赞同：0
> 
> 时间：2013-01-24T10:45:00.977
> 
> 标签：android, webview, notifications

我正在开发一个应用程序，我希望我的通知应该在 web 视图中打开，请帮忙。
或者
我希望我的应用程序应该响应该通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:44:40.547

也许您正在寻找 Cordova 2.3.0（最新版本）中的新 InAppBrowser 功能。 [http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

```
<plugin name="InAppBrowser" value="org.apache.cordova.InAppBrowser" /> 
```

例子：

```
<!DOCTYPE html>
<html>
  <head>
    <title>InAppBrowser.addEventListener Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
         var ref = window.open('http://apache.org', '_blank', 'location=yes');
         ref.addEventListener('loadstart', function() { alert('start: ' + event.url); });
         ref.addEventListener('loadstop', function() { alert('stop: ' + event.url); });
         ref.addEventListener('exit', function() { alert(event.type); });
    }

    </script>
  </head>
  <body>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:11:01.903

只需开始意图调用将在 webView 中打开您的 url 的活动

# xcode - 关闭键盘

> ID：14499421
> 
> 赞同：0
> 
> 时间：2013-01-24T10:45:04.207
> 
> 标签：xcode, button, keyboard, ibaction

我使用这种方式在 MainViewController 中关闭键盘，并且效果很好。

```
-(IBAction)closeKeyboard {
    [textfield resignFirstResponder];
} 
```

但是，如果我在另一个 ViewController 中使用相同的方法，并且从 MainViewController 中推入它，它就不起作用。我将它连接到一个用于关闭键盘的按钮。如何更改代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:05:31.763

您可以使用另一种有趣的方法：

```
[anyView endEditing:YES]; 
```

就像您认为 resignFirstResponder 中的所有文本字段一样

# sql-server - 实体框架迁移 - 更改属性数据类型

> ID：14499423
> 
> 赞同：2
> 
> 时间：2013-01-24T10:45:07.830
> 
> 标签：sql-server, entity-framework, asp.net-mvc-4, entity-framework-5, sqlexception

我正在使用 Entity Framework 5.0 开发一个 ASP.Net MVC 4 Web 应用程序以实现数据持久性。我在开发过程中使用 Code First 和 Automatic Migrations。

由于我必须使用现有数据库，因此我使用这个有用的教程将我的域类
[代码首先创建到现有数据库](http://msdn.microsoft.com/en-gb/data/jj200620)

我的模型中有一个名为**tblcourseapplicant的类，它有一个名为****ManagerTitle**的 String 属性。我想将此数据类型更改为**Int**，为此我更改了 POCO 类中的属性

从

```
public string ManagerTitle { get; set; } 
```

到

```
public int ManagerTitle { get; set; } 
```

然后我使用 Fluent API 更改了相关映射类 (tblcourseapplicantMap) 中的属性属性

从

```
this.Property(t => t.ManagerTitle).HasMaxLength(5); 
```

到

```
this.Property(t => t.ManagerTitle).IsRequired(); 
```

我还更新了数据库中此特定列的所有数据，以便所有值都转换为整数。

我运行了我的项目，自动迁移尝试为我执行此更新，但它返回以下错误

> 无法将值 NULL 插入列“ManagerTitle”、表“tblcourseapplicant”；列不允许空值。更新失败。该语句已终止。

我不明白为什么会这样，因为我的数据库表中没有 ManagerTitle 为 NULL 的记录，它们都被分配了一个整数值。

任何帮助将不胜感激。

谢谢。

**更新**

伙计们，我仍在努力寻找解决此问题的方法。我注意到返回的错误是**SqlException**。请问有人有什么想法吗？我不明白这里有什么问题，我的理解是 Code First Automatic Migrations 应该能够处理这个简单的属性数据类型更改。

帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T12:05:38.083

该列是否在数据库中被定义为可为空？

您也可以尝试在 POCO 中使其为空

```
public int? ManagerTitle { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:09:27.403

当使用非自动迁移进行类似更新时，更新代码只会删除旧列并创建一个新列，而无需在重命名（或重新键入）属性之间进行任何数据迁移。

我怀疑您的问题可能就是这种情况。

# java - Apache Poi 在 excel 中与列相邻的附加数据

> ID：14499425
> 
> 赞同：0
> 
> 时间：2013-01-24T10:45:17.030
> 
> 标签：java, jakarta-ee, apache-poi

我有一个对象列表（每个对象都包含一个字符串和另一个对象列表（这个对象包含两个字符串）

我需要使用 Apache poi API 将数据附加到 Excel 表中

```
List<objects> -->String(ex:-Test profile1, List<objects> --> String(tab name ex :standard -account),String (ex :hidden/default off) 
```

TabName 测试配置文件1 测试配置文件2 测试配置文件3 测试配置文件4

标准-帐户 默认关闭 默认关闭 默认关闭 默认关闭 标准-活动隐藏 隐藏 隐藏 隐藏 隐藏 标准-案例 默认关闭 默认关闭 默认关闭 默认关闭 标准-联系人 默认开启 默认开启 默认开启 默认开启

当对象列表（字符串，字符串）的大小发生变化时，我编写的代码可以正常工作

```
HSSFRow rowTablevelHeader = null;
                HSSFRow rowtablevel = null;

            //check sheet name
            rowTablevelHeader = fourthSheet.createRow(0);

            HSSFCell cellT1 = rowTablevelHeader.createCell(0);
            cellT1.setCellValue(new HSSFRichTextString("TabName"));

            /*int maxtablevelSize = listprofileTabLevelVisibilities.get(0).getTablevelVisibility().size();

            for (int i = 0; i < listprofileTabLevelVisibilities.size(); i++) {

            int tablevelSize1 = listprofileTabLevelVisibilities.get(i).getTablevelVisibility().size();

            if(tablevelSize1 >maxtablevelSize)
            {
                maxtablevelSize= tablevelSize1;
            }
            }
            */

            for (int i = 0; i < listprofileTabLevelVisibilities.size(); i++) {

                HSSFCell cellP1 = rowTablevelHeader.createCell(i+1);
                cellP1.setCellValue(new HSSFRichTextString(listprofileTabLevelVisibilities.get(i).getProfileName()));

                int currentRow = 0;

    System.out.println("Size tablevel ---   "+listprofileTabLevelVisibilities.get(i).getTablevelVisibility().size());

                for (int j = 0; j < listprofileTabLevelVisibilities.get(i).getTablevelVisibility().size(); j++) {

                    currentRow++;

                    rowtablevel = fourthSheet.getRow(currentRow);

                    if(null == rowtablevel){
                        rowtablevel =fourthSheet.createRow(currentRow);
                    }

                    if(null ==rowtablevel.getCell(0))
                    {
                        HSSFCell cellAP1 = rowtablevel.createCell(0);
                        cellAP1.setCellValue(new HSSFRichTextString(listprofileTabLevelVisibilities.get(i).getTablevelVisibility().get(j).getTabName()));   
                    }

                System.out.println("Tab name ---  "+listprofileTabLevelVisibilities.get(i).getTablevelVisibility().get(j).getTabName());

                if(rowtablevel.getCell(0).getStringCellValue().equalsIgnoreCase(listprofileTabLevelVisibilities.get(i).getTablevelVisibility().get(j).getTabName())){
                    HSSFCell cellAP2 = rowtablevel.createCell(i+1);
                    cellAP2.setCellValue(new HSSFRichTextString(listprofileTabLevelVisibilities.get(i).getTablevelVisibility().get(j).getTabVisibility()));
                }
                }
            } 
```

# google-apps-script - 使用 Google Apps 脚本将数据从 Google 电子表格同步到 Cloud SQL

> ID：14499426
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:45:18.933
> 
> 标签：google-apps-script

我正在创建一个应用程序，我将在其中使用 jdbc 服务将电子表格数据插入 Cloud SQL。我想知道以下答案：

Q1。如果插入语句正在执行并且有人关闭电子表格/脚本会发生什么？

Q2。是否有可能在离线模式下使用 Google Apps 脚本将数据插入 Cloud SQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:26:20.987

这两个问题的答案实际上是相似的——因为 Cloud SQL 和 Apps Script 都是完全在线的云系统——文件是否关闭或用户是否离线都没有关系。该脚本应该运行完成。

# ios - 使用 Apple 的 HTTP Live Streaming 视频时如何避免仅音频屏幕？

> ID：14499435
> 
> 赞同：0
> 
> 时间：2013-01-24T10:45:31.660
> 
> 标签：ios, video-streaming, http-live-streaming

我正在使用 Apple 的[HTTP Live Streaming](http://en.wikipedia.org/wiki/HTTP_Live_Streaming)协议，在将应用程序提交到 App Store 时，该协议要求只有音频流作为多路复用的一部分。因此，第一段（10 秒）始终仅是音频，并且无论实际可用的带宽量如何，都会显示下图而不是视频流的开头。

![http实时流式音频流](../Images/a379d44ecc78e116182d4a23731a0c63.png)

我知道我可以显示静态图像，但我想知道是否有办法延迟流开始，直到确定是否有足够的带宽直接进入视频流。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:15:49.887

清单文件中比特率的顺序是关键，因为设备会尝试按顺序播放比特率片段。我们建议从最高到最低列出比特率，以避免以最差的比特率开始视频，然后仅在 iOS 检测到足够的带宽时才切换。

# c++ - 两个（类型）值和类型（值）有什么区别？

> ID：14499436
> 
> 赞同：2
> 
> 时间：2013-01-24T10:45:33.483
> 
> 标签：c++, c

最近，我对这两个表达式感到困惑 -`(type)value`和`type(value)`.

例如 ： `size_t c = size_t(-1); size_t c = (size_t)-1;`

有什么不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:47:41.863

前者是C++，它通过调用构造函数进行[直接初始化。](https://stackoverflow.com/questions/587070/c-constructor-syntax)

第二个是C（或C++），它正在做一个演员。

因此，从 C 程序员的角度来看，存在很大差异。

此外，这是一个非常糟糕的主意，因为`size_t`它是无符号类型。这应该使用 来完成`ssize_t`，它已签名并消除了对演员表的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T16:07:24.203

在 C 中，只有其中一个是有效的表达式。

在 C++ 中，它们完全相同，它们是编写*显式强制转换*表达式的两种替代形式：C 风格和[函数风格](https://stackoverflow.com/questions/4474933/what-exactly-is-or-was-the-purpose-of-c-function-style-casts?lq=1)。

# excel - Excel VBA - 在另一个 Excel 窗口中更改单元格值

> ID：14499438
> 
> 赞同：0
> 
> 时间：2013-01-24T10:45:36.400
> 
> 标签：是否可以通过第一个窗口中的vba, excel, vba

> **可能的重复：**
> [VBA 可以跨 Excel 实例吗？](https://stackoverflow.com/questions/2971473/can-vba-reach-across-instances-of-excel)

[是否可以通过第一个窗口中的vba](/questions/tagged/vba "显示标记为“vba”的问题")更改另一个 excel 文件（在单独的窗口中打开）中的单元格值？

我目前正在使用粘贴的链接，但这不会触发“更改事件”

谢谢。

# php - 本地 Magento 自定义工具上传器的 URL 变量预览图像？

> ID：14499441
> 
> 赞同：0
> 
> 时间：2013-01-24T10:45:49.570
> 
> 标签：php, ajax, image, magento, upload

在magento自定义工具中，可以放文件上传选项

但我希望当您至少在单击编辑产品时在屏幕上上传图像预览时

哪个是加载图像的变量？使用购物车图片链接的 URL：

htt....MY-WEB.com/sales/download/downloadCustomOption/id/107/key/a5cae363d3d6cde2e9c6/

我测试：img src=.. 这个 URL 并显示正常，但这是一个变量，它会干扰回声

在这里他们使用闪存，但如果您没有使用 ajax [http://demo.micosolutions.com/afup/ajax-flash-upload-pro-demo/ajax-flash-uploader-demo.html检测到闪存](http://demo.micosolutions.com/afup/ajax-flash-upload-pro-demo/ajax-flash-uploader-demo.html)

我认为这些是可以谈论这个的文件：

app/design/frontend/base/default/template/catalog/product/view/options/type/file.phtml

app/code/core/Mage/Adminhtml/Block/Catalog/Product/Edit/Tab/Options/Type/file.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:45:39.520

**编辑**删除旧答案，因为我误解了这个问题。

好吧，这次我希望我能正确理解你想要什么。要从添加到购物车的产品中获取自定义选项图像的 URL，您可以从报价项目中获取它：

```
 $item = $this->getItem();
    $optionIds = $item->getOptionByCode('option_ids');

    if( $optionIds ) {
      $options = array();
      foreach( explode( ',', $optionIds->getValue() ) as $optionId ) {
        $option = $this->getProduct()->getOptionById( $optionId );

        if( $option->getData( 'type' ) == 'file' ) {
          $option = $item->getOptionByCode( 'option_' . $optionId );

          $value = unserialize( $option->getData( 'value' ) );

          var_dump( $value );
          var_dump( Mage::getUrl( 'sales/download/downloadCustomOption', array( 'id' => $option->getId(), 'key' => $value[ 'secret_key' ] ) ) );

          echo '<img src="' . Mage::getUrl( 'sales/download/downloadCustomOption', array( 'id' => $option->getId(), 'key' => $value[ 'secret_key' ] ) ) . '"/>';
        }
      }
    } 
```

输出：它 var 转储下载 url 和 $value 内容（$value['fullpath'] 是图像文件的位置，但禁止从浏览器访问它 - 您必须将文件移动到媒体中的不同位置可以从网络访问的文件夹）。echo 将显示图像。

$item 是 Mage_Sales_Model_Quote_Item 类型（此代码已在 checkout/cart/index 控制器中测试 - your_page_url/index.php/checkout/cart -> 代码可以添加到 template/checkout/cart/item/default.phtml 文件的顶部看看它是如何工作的）。

# java - 使用 GSON 修改 json 而不使用 POJO

> ID：14499449
> 
> 赞同：16
> 
> 时间：2013-01-24T10:46:08.993
> 
> 标签：java, json, gson

我想修改 json 内容而不将其转换为 POJO。我正在使用 GSON 库。

以下是用例：

```
String jsonString = "[{\"key1\":\"Hello\",\"key2\":\"World\"},{\"key1\":\"Nice\",\"key2\":\"Town\"}]";

JsonElement jsonElement = gson.fromJson(jsonString, JsonElement.class); 
```

有什么方法可以将 key1 的值设置为每个数组中的某个值（比如说“测试”），而无需将内容转换为 POJO

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T05:01:29.887

这是我想出的最短的。

```
JsonElement je = new Gson().fromJson(jsonString, JsonElement.class);
JsonObject jo = je.getAsJsonObject();
jo.add("key", value); 
```

一旦你有了 JsonObject，gson 就有很多方法来操作它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T17:25:57.277

您始终可以获得与 JsonElement 不同的类型，或者使用 JsonElement.getAsJsonObject 强制转换为对象（如果可能）。

```
String jsonString = "[{\"key1\":\"Hello\",\"key2\":\"World\"}, ...]";

JsonArray jsonArray = gson.fromJson(jsonString, JsonElement.class).getAsJsonArray();
JsonObject firstObject = jsonArray.get(i).getAsJsonObject();
firstObject.addProperty("key1", "Test"); 
```

我之前错了；似乎没有 JsonArray 适配器；你必须得到一个 JsonElement 并使用转换工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T16:21:20.163

一种方法是将 JSON 转换为 a `java.util.Map`，修改 Map，然后从那里开始（这可能意味着将 Map 序列化回 JSON）。

这种方法符合我的偏好，即使用正确的 API 来完成正确的工作，最大限度地减少使用 Gson 等工具来处理序列化/反序列化（这是我理解它的设计目的）。也就是说，不使用 Gson API 作为替代数据结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:14:17.760

GSON 有两个独立的 API（可以组合）：一个用于序列化和反序列化，另一个用于流式传输。如果您想在没有内存开销或使用动态结构（而不​​是静态 POJO）的情况下处理 JSON 流，您可以执行以下操作：

*   创建一个 JsonWriter（在我的示例中，我使用 StringWriter）；
*   创建一个 JsonReader；
*   创建一个循环，消耗来自阅读器的事件并将它们提供给编写器，可能会进行更改、添加、省略等。

循环将包含一个 switch 语句，该语句必须包含所有可能的事件（其中 10 个）。即使是最简单的示例也必须包含所有这些，因此下面的代码看起来相当冗长。但是它很容易扩展，进一步的扩展不会让它变得更长。

将 "test": 1 对附加到每个对象的示例如下所示：

```
public class Whatever {

static void streamandmodify(JsonReader reader, JsonWriter writer) throws IOException {
    while (true) {
        JsonToken token = reader.peek();
        switch (token) {
        // most cases are just consume the event
        // and pass an identical one to the writer
        case BEGIN_ARRAY:
            reader.beginArray();
            writer.beginArray();
            break;
        case END_ARRAY:
            reader.endArray();
            writer.endArray();
            break;
        case BEGIN_OBJECT:
            reader.beginObject();
            writer.beginObject();

            // this is where the change happens:
            writer.name("test");
            writer.value(1);
            break;
        case END_OBJECT:
            reader.endObject();
            writer.endObject();
            break;
        case NAME:
            String name = reader.nextName();
            writer.name(name);
            break;
        case STRING:
            String s = reader.nextString();
            writer.value(s);
            break;
        case NUMBER:
            String n = reader.nextString();
            writer.value(new BigDecimal(n));
            break;
        case BOOLEAN:
            boolean b = reader.nextBoolean();
            writer.value(b);
            break;
        case NULL:
            reader.nextNull();
            writer.nullValue();
            break;
        case END_DOCUMENT:
            return;
        }
    }
}

public static void main(String[] args) throws IOException {
    // just for test:
    JsonReader jr = new JsonReader(new StringReader("{\"a\":1, \"b\":{\"c\":[1,2,3,{},{}]}}"));
    StringWriter sw = new StringWriter();
    JsonWriter jw = new JsonWriter(sw);
    streamandmodify(jr, jw);
    System.out.println(sw.getBuffer().toString());
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T17:24:29.017

jsonString 是一个普通的、普通的 Java 字符串；因此您可以使用 Java 的标准字符串函数随意修改它，并将子字符串替换`key1`为`Test1`：

```
jsonString = "[{\"key1\":\"Test\",\"key2\":\"World\"},{\"key1\":\"Nice\",\"key2\":\"Town\"}]"; 
```

当然，Java 中的 String 是不可变的，因此首先将其转换为 StringBuilder 可能会在内存使用方面为您提供更好的性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-24T23:54:30.310

使用 GSON JsonArray Java 8 修改 json

如何使用 GSON 修改 JSON 中的值的示例

```
import com.google.gson.Gson;
import com.google.gson.JsonArray;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;

public class ModifyJson {
    public static void main(String[] args) {
        String data = "[{\"ct_pk\":24,\"ct_name\":\"SISTEMA DE PRUEBAS\"},"
                + "{\"ct_pk\":1,\"ct_name\":\"CAPITAL FEDERAL\"}," +
                "{\"ct_pk\":5,\"ct_name\":\"SISTEMA DE PRUEBAS DOS\"}]";

        System.out.println("before................." + data);

        JsonArray jsonArray = new Gson().fromJson(data, JsonElement.class).getAsJsonArray();
        JsonArray jsonArray2 = new JsonArray();
        for (JsonElement pa : jsonArray) {
            JsonObject jsonObject2 = pa.getAsJsonObject();
            String ct_name = jsonObject2.get("ct_name").getAsString();
            if (ct_name.equals("SISTEMA DE PRUEBAS")) {
                jsonObject2.addProperty("ct_name", "TODOS");
            }
            jsonArray2.add(jsonObject2);
        }
        System.out.println("after.................." +jsonArray2);
    }
} 
```

# iphone - 如何在 iphone 中关闭 UIView，如“Skype 或任何窗口”最小化？

> ID：14499450
> 
> 赞同：2
> 
> 时间：2013-01-24T10:46:10.090
> 
> 标签：iphone, ios, objective-c, xcode, uiview

我想像浏览器、Skype 和其他窗口选项卡最小化一样关闭 UIView。但我想像这样关闭我的 UIView 。表示我在哪个按钮上单击我的 UIView 关闭，例如最小化，并关闭我的按钮显示的位置，即：我将 UIButton 放在导航上。

我不想最小化我的 UIView，我想像最小化一样关闭我的 UIView。

专家的任何提示都将非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:50:07.030

使用此代码

```
[UIView beginAnimations:nil context:NULL];[UIView setAnimationDuration:<duration>];[UIView setAnimationRepeatAutoreverses:NO];[UIView setAnimationRepeatCount:0]
    [yourView setTransform:CGAffineTransformMakeScale(0.009, 0.009)]; //if you dont get ratio start with 0.5,0.5 keep reducing till you get right number
  yourView.center=yourButton.center

[UIView commitAnimations]

//in order to maximize do

[UIView beginAnimations:nil context:NULL];[UIView setAnimationDuration:<duration>];[UIView setAnimationRepeatAutoreverses:NO];[UIView setAnimationRepeatCount:0]
        [yourView setTransform:CGAffineTransformMakeScale(1, 1)];
      yourView.center=CGPointMake(320/2.0f,480/2.0f);

    [UIView commitAnimations] 
```

这应该可以帮助你

# django - django用户身份验证错误？

> ID：14499459
> 
> 赞同：0
> 
> 时间：2013-01-24T10:46:32.143
> 
> 标签：django, django-templates, django-authentication, django-users

我是 Django 的新手。我需要在系统中创建一个用户登录，并且我正在遵循该教程[用户身份验证](http://rdegges.com/user-authentication-with-django) ，但我收到了一个特定错误

> 导入模板源加载器 django.template.loaders.filesystem.load_template_source 时出错：“'module' 对象没有属性 'load_template_source'”

我找不到问题所在。谁能告诉我在什么情况下会发生这种错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:56:54.507

这是您的 Loader Template 的问题。试试这个[链接](https://stackoverflow.com/questions/11904609/configuring-django-settings-to-work-with-1-4-1-loading-template-error)

# android - Implementation TTS with providing default language

> ID：14499464
> 
> 赞同：2
> 
> 时间：2013-01-24T10:46:44.250
> 
> 标签：android, text-to-speech

I am developing few Android apps, and I would like to provide possibility (assuming that phone supports) to 'read' the text - in Spanish app it would be Spanish voice, in French - French, respectively.

Can I somehow made one of two things:

1.  Check if this particular language is available?
2.  If it is not available - download it or give user possibility to download it?

Are there any patterns for it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:32:37.503

1) You can easily check whether a requested language is available using built in methods.

```
TextToSpeech tts = new TextToSpeech(this, this);

//Use this to get the default locale
tts.isLanguageAvailable(Locale.getDefault());

//Otherwise hardcode the language you want to check for
tts.isLanguageAvailable(Locale.FRENCH()); 
```

2) You can also give the user the possibility to download it by firing off an Intent for download

```
Intent installIntent = new Intent();
            installIntent
                    .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installIntent); 
```

# python - BottlePy - 如何从钩子中找到当前路线？

> ID：14499466
> 
> 赞同：3
> 
> 时间：2013-01-24T10:46:49.823
> 
> 标签：python, python-3.x, bottle

[我在BottlePy](http://bottlepy.org/docs/stable/)中有以下钩子：

```
@bottle_app.hook('before_request')
def update_session():
    # do stuff
    return 
```

还有一些路线：

```
@bottle_app.route('/')
def index():
    return render('index')

@bottle_app.route('/example')
def example():
    return render('example') 
```

**从内部`update_session()`，我如何确定正在调用哪条路线？**

我浏览了文档无济于事，但这肯定是可能的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T11:04:56.877

请求既有 a`bottle.route`又有`route.handle`条目，两者都包含相同的值：

```
from bottle import request

print request['bottle.route'] 
```

这没有记录；[我必须在`bottle.py`源代码](https://github.com/defnull/bottle/blob/master/bottle.py#L754)中找到它。该值是一个`Route`实例；它同时具有 a`.name`和 a`.rule`属性，您可以检查以确定匹配的路由。

```
if request['bottle.route'].rule == '/':
    # matched the `/` route. 
```

对于您的特定示例，这可能有点过头了，因为您只匹配简单的路径，但是对于具有正则表达式规则的更复杂的规则，这比尝试匹配`request.path`属性更好（但给您的路线一个好主意`name`价值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:07:21.590

```
from bottle import request

@bottle_app.hook('before_request')
def update_session():
    print request.path
    return 
```

应该做你要求的

然后，您可以将路线存储在字典中。

```
my_routes = {"/":lambda: 5}
event = my_routes.get(request.path, lambda: None)
print event() 
```

# android - 通过 ContextMenu 选择文本

> ID：14499469
> 
> 赞同：0
> 
> 时间：2013-01-24T10:46:57.437
> 
> 标签：android

我有一个很长的文本，`TextView`我`ScrollView`想创建一个功能来标记文本并选择当前段落以将其添加到书签中，但我不知道如何做到这一点，请有人帮助我。我正在尝试获取当前位置，但我不知道如何选择文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:43:27.777

您可以为每个段落使用新的 TextView，并让它暗示一个点击监听器

代码应该是这样的

```
@Override
   public void onCreate(Bubdle bundle) {
           super.onCreate(bundle);
           ScrollView view = (ScrollView) findViewById(R.id.scrollView);
           // String txt = getText from Somewhere
           String[] text = txt.split(".");
           for (String t : text) {
           TextView view = new TextView();
           view.setText(t);
           view.setOnClickListener(clickListener);
           view.addView(view);
           }

   } 
```

# javascript - 使用 javascript 签署 webservices api 调用

> ID：14499473
> 
> 赞同：0
> 
> 时间：2013-01-24T10:47:10.970
> 
> 标签：javascript, json, web-services, oauth, vimeo

我正在寻找一个很好的模式，它可以帮助我在一些 oauth connect 检索到授权标识符之后使用 javascript（这里举个例子，vimeo）完全签署我的 api 调用。

将ruby与omniauth一起使用，我正在寻找的是检索执行ModelName时调用的url。{generateTokenMethod}.request(:get,{url})

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:37:10.980

有可能的。有一些用于 javascript 的 oauth 1.0a 库（您可以尝试查看一些 node.js 代码作为示例）。

在客户端 javascript 中使用 oauth 的问题在于，它会将您的客户端密码暴露给使用您的 Web 服务的任何人。

任何拥有您的客户端密码的人都可以代表您的应用程序发出请求，并通过伪装成您的应用程序来诱使用户生成访问令牌。

# mysql - 搜索存储为数组的 mysql 表列，然后根据结果连接另一个表

> ID：14499475
> 
> 赞同：0
> 
> 时间：2013-01-24T10:47:16.057
> 
> 标签：mysql, arrays, search, match

我在一个博客网站上工作并坚持这一点：

MySQL

1.  ' `cat_list`' 表包含列: `cat_id`, `cat_name`(14 个条目),
2.  ' `post`' 表有几列，其中`category`之一是我需要存储博客文章被标记到的**类别 ID的地方。**类别 ID 存储在`array(19820,83729)`. [因为一篇博文可以标记为多个类别]

我试图`post`通过一个类别 ID 搜索“”并加入“ `cat_list`”以检索`cat name`. 请帮助我做到这一点，或者我应该考虑其他任何替代数据库设计吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:24:28.323

如果您的帖子可以用多个类别标记，那么您的表格模型是错误的。您需要在博客文章和类别之间建立一个关联表。`category id`从`post`表中删除并创建一个包含`post-category`列`post-id`和的表`category-id`。然后还在这两列上添加索引以加快双向搜索（按类别或按帖子）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:09:48.380

试试这个：

```
SELECT c.cat_name FROM post as p 
LEFT JOIN cat_list AS c
ON c.cat_id = p.cat_id
WHERE p.post_id = "3" 
```

样本数据：

```
CREATE TABLE cat_list(
  cat_id int auto_increment primary key,
  cat_name varchar(30)
  );

CREATE TABLE post (
  post_id int auto_increment primary key,
  cat_id int,
  post varchar(30)
  );

INSERT INTO cat_list (cat_name)
VALUES ("cat1"),("cat2"), ("cat3"),("cat4"),("cat5"),("cat6"),("cat7"),("cat8");

INSERT INTO post (cat_id, post)
VALUES (1,"jnkljlkajlkjaoiuweiuoi"), (1,"wuoieuoiuoidudjhkj"), (2,"eiuuqueiuriewuqyiuu"), (8,"vzbvbxvnbxmnbmn nmncmn"); 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/b7371/5)

更改帖子的 ID 以选择类别。

# php - mysql - 如何返回准备好的语句结果集？

> ID：14499476
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:47:21.833
> 
> 标签：php, mysql, prepared-statement, execute

我正在尝试从一个表中执行 SELECT *，该表的名称本身是从另一个查询中获取的。我想我把自己打成结了。这是我所拥有的：

```
SELECT options_table INTO @tableName FROM registrant_fields WHERE id = 9;

SET @sql_text_1 = concat('CREATE TABLE tmp_options LIKE ', @tableName);
PREPARE stmt_1 FROM @sql_text_1 ;
EXECUTE stmt_1;

SET @sql_text_2 = concat('INSERT tmp_options SELECT * FROM ', @tableName);
PREPARE stmt_2 FROM @sql_text_2;
EXECUTE stmt_2;

SELECT * FROM tmp_options;

DEALLOCATE PREPARE stmt_1;
DEALLOCATE PREPARE stmt_2; 
```

所以...当我将这些内容粘贴到 PHPMyAdmin 并运行它时，我会分别获得每个语句的结果，并知道是的，我的“SELECT * FROM tmp_options;” 确实有一些行。但是我如何得到它们？

我要做的就是将该查询放入 PHP 字符串中并使用 mysqli_query() 运行它。那不行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:35:45.987

我对 PHP 一无所知，但我碰巧知道 mysqli_query() 仅适用于一个 SQL 语句（出于安全原因）。

我建议你这样做（伪代码，SQL 部分除外）

```
somePHPvariableForTableName = ("SELECT options_table FROM registrant_fields WHERE id = 9;");
query("CREATE TABLE whyDoIneedAtmpTable AS SELECT * FROM $somePHPvariableForTableName");
query("SELECT * FROM whyDoIneedAtmpTable;"); 
```

就是这样。不需要额外的`INSERT`步骤。目前尚不清楚，为什么以及是否真的需要临时表。

# kendo-ui - 剑道网格取消编辑事件

> ID：14499478
> 
> 赞同：17
> 
> 时间：2013-01-24T10:47:24.060
> 
> 标签：kendo-ui, kendo-grid

我正在使用`edit`剑道网格上的事件来显示几个隐藏的列。`save`然后我会在活动中再次隐藏它们。

我遇到的问题是似乎没有取消编辑模式的事件，因此如果用户单击取消，该列就会搞砸。

是否有未记录的取消事件或我需要找到解决方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-24T11:36:36.490

基本上没有这样的“取消”事件，但是您可以在网格的[编辑](http://docs.kendoui.com/api/web/grid#edit)事件中的“取消”按钮上附加单击事件。请检查以下示例：

```
function onEdit(e) {
   e.container.find(".k-grid-cancel").bind("click", function () {
      //your code here
   })
 } 
```

**编辑：**从某个时间开始**，网格有“取消”事件**，可以用来代替上述解决方案：

*   [取消事件](http://docs.telerik.com/kendo-ui/api/javascript/ui/grid#events-cancel)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-09-27T09:26:55.437

我一直在寻找同一个问题的答案，但这对我不起作用。我有一个场景，在我的控制器中验证我的网格中的新记录和编辑记录，并将错误消息添加到 ModelState 的 ModelError 集合中。我已经连接了网格的数据源错误事件，然后在警报中显示错误消息，然后添加以下内容以重置更改：

```
$('#MyGrid').data("kendoGrid").cancelChanges(); 
```

这对我来说是一个很好的解决方案，因为我正在使用分页并且用户正在查看的当前页面被保留。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-25T17:55:50.467

~~与接受的答案相反~~，实际上有一个[取消事件](http://docs.telerik.com/kendo-ui/api/javascript/ui/grid#events-cancel)，就像编辑事件一样。

```
$("#grid").kendoGrid({
    ...
    edit: function(e) {
        alert("edit")
    },
    cancel: function(e) {
        alert("cancel");
    },
    ...
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-26T10:45:04.767

试试这个，

```
$("#grid").kendoGrid({
 columns: [
  { field: "name" },
  { field: "age" }
 ],
 dataSource: [
  { name: "Jane Doe", age: 30 },
  { name: "John Doe", age: 33 }
 ],
 dataBound: function(e) {
  $("#grid").on("mousedown", ".k-grid-cancel-changes", function (e) {
    //custom logic
  });
 }
}); 
```

在 dataBound 中，为剑道网格工具栏取消按钮连接单击事件。它会起作用的。

# c# - 当路径包含 # 时创建部件 Uri

> ID：14499481
> 
> 赞同：2
> 
> 时间：2013-01-24T10:47:33.763
> 
> 标签：c#, c#-4.0, zip, uri

我正在使用下面的代码压缩文件。我发现当被压缩路径中的文件夹包含哈希 (#) 时，CreatePartUri(uri) 会引发异常：

> 部分 URI 不能包含片段组件。

由于我无法更改文件夹名称，**如何转义路径中的 # 符号以便正确创建 Uri？**

```
using System;
using System.IO;
using System.IO.Packaging;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string targetFilePath = "C:\\TEMP.ZIP";
            try
            {
                if (File.Exists(targetFilePath))
                {
                    File.Delete(targetFilePath);
                }
                string packageRelationshipType = 
                       @"http://schemas.openxmlformats.org/" + 
                       @"package/2007/relationships/htmx/root-html";

               CompressionOption compressionOption = CompressionOption.Maximum;

                using (Package package = Package.Open(targetFilePath,
                                                      FileMode.OpenOrCreate))
                {
                    string fileName = @"\#TestFolder\TestFile.txt";
                    string filePathOnServer = @"C:\" + fileName;

                    Uri uri = new Uri(fileName, UriKind.Relative);
                    Uri partUriDocument = PackUriHelper.CreatePartUri(uri);

                    PackagePart packagePartDocument = 
                                  package.CreatePart(partUriDocument, 
                                 System.Net.Mime.MediaTypeNames.Text.RichText,
                                 compressionOption);

                    using (FileStream fileStream = new FileStream
                                                      (filePathOnServer, 
                                                       FileMode.Open, 
                                                       FileAccess.Read))
                    {
                       CopyStream(fileStream, packagePartDocument.GetStream());
                    }

                    package.CreateRelationship(packagePartDocument.Uri, 
                                               TargetMode.Internal, 
                                               packageRelationshipType);
                }
            }
            catch (Exception e)
            {
                string exceptionText = e.ToString();
            }
        }
        private static void CopyStream(Stream source, Stream target)
        {
            const int bufSize = 0x1000;
            byte[] buf = new byte[bufSize];
            int bytesRead = 0;

            while ((bytesRead = source.Read(buf, 0, bufSize)) > 0)
                target.Write(buf, 0, bytesRead);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T06:12:20.493

System.IO.Packaging 不允许在名称中使用“#”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-15T16:22:33.403

正如 Rockstart 所说，Uri 中不允许使用 '#' 在创建 Uri 之前使用此权限以删除 # 个字符：

```
fileName = Regex.Replace(fileName, "#", ""); 
```

# c# - 将 IP 转换为字节/转换回字符串

> ID：14499482
> 
> 赞同：6
> 
> 时间：2013-01-24T10:47:40.393
> 
> 标签：c#, .net, ip, bytearray

我在 SQLSERVER 2008 数据库中将 IPV4 地址存储为 Binary(4)。所以，我在数据输入之前转换了值（并且由于公司的限制，我不能在数据库中创建函数，这不讨论了）。

```
public static byte[] IpToBin(string ip)
{
    return IPAddress.Parse(ip).GetAddressBytes();
}

public static string HexToIp(string ip)
{
    return new IPAddress(long.Parse(ip, NumberStyles.HexNumber)).ToString(); 
} 
```

调用 IpToBin 后，生成的数据为（例如 0x59FC09F3）。当我调用 HexToIp 时，ip 可能由于小/大端转换而反转。

任何人都可以在没有 500 亿行代码的情况下提出一个体面的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T10:55:34.283

我认为这里真正的问题是您将原始形式视为字符串；特别是因为它`binary(4)`是`byte[]`. `IpToBin`很好，但`HexToIp`应该是：

```
public static IPAddress BinToIp(byte[] bin)
{
    return new IPAddress(bin);
} 
```

然后：工作完成。但是使用您现有的`HexToIp`代码，您需要：

```
return new IPAddress(new byte[] {
    Convert.ToByte(ip.Substring(0,2), 16), Convert.ToByte(ip.Substring(2,2), 16),
    Convert.ToByte(ip.Substring(4,2), 16), Convert.ToByte(ip.Substring(6,2), 16)}
    ).ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T16:50:28.820

```
 public List<IPAddress> SubtractTwoIpAddresses(IPAddress a, IPAddress b, bool includeLeft = true, bool includeRight = true)
    {
        List<IPAddress> rv = new List<IPAddress>();
        int ipA = IPAddress.NetworkToHostOrder(BitConverter.ToInt32(IPAddress.Parse(a.ToString()).GetAddressBytes(), 0)),
            ipB = IPAddress.NetworkToHostOrder(BitConverter.ToInt32(IPAddress.Parse(b.ToString()).GetAddressBytes(), 0));
        if (includeLeft)
            rv.Add(new IPAddress(BitConverter.GetBytes(Math.Min(ipA, ipB)).Reverse().ToArray()));
        for (int i = 1; i < Math.Max(ipA, ipB) - Math.Min(ipA, ipB); i++)
            rv.Add(new IPAddress(BitConverter.GetBytes(Math.Min(ipA, ipB) + i).Reverse().ToArray()));
        if (includeRight)
            rv.Add(new IPAddress(BitConverter.GetBytes(Math.Max(ipA, ipB)).Reverse().ToArray()));
        return rv;
    } 
```

# sql-server - SQL 函数中的错误

> ID：14499486
> 
> 赞同：0
> 
> 时间：2013-01-24T10:48:04.857
> 
> 标签：sql-server, tsql

我已经编写了一个 SQL 函数来从原始数据字符串中提取所需的数据，但是我在不同的地方遇到了错误并且无法恢复它们，请帮助我：

```
 set ANSI_NULLS ON
 set QUOTED_IDENTIFIER ON
 go
 ALTER FUNCTION [dbo].[Empnum] (@RAWDATA NVARCHAR(300))
 RETURNS VARCHAR(30)
 AS
 BEGIN 
 DECLARE @TEMP1 NVARCHAR(300), @EMPNUM NVARCHAR(10), @TEMP2 NVARCHAR(300), @TEMP3 NVARCHAR(300)
 SET @TEMP3 = 'Disabled'
 SET @TEMP2 = @RAWDATA
 IF( CHARINDEX(@TEMP3,@RAWDATA,0) = 0) 
   BEGIN
   IF( ISNUMERIC(SUBSTRING(@RAWDATA,1,1)) 
     BEGIN
     IF((LEN(@RAWDATA) - LEN(REPLACE(@TEMP2,'/','')))>1)
        BEGIN
    @RAWDATA=SUBSTRING(@RAWDATA,CHARINDEX('/',@RAWDATA)+1,LEN(@RAWDATA))    
    @RAWDATA=SUBSTRING(@RAWDATA,CHARINDEX('/',@RAWDATA)+1,LEN(@RAWDATA))    
    @RAWDATA=SUBSTRING(@RAWDATA,1,CHARINDEX('/',@RAWDATA)-1)
IF( CHARINDEX('*C',@RAWDATA) <> 0 OR
    CHARINDEX('CV',@RAWDATA) <> 0 OR
    CHARINDEX('AV',@RAWDATA) <> 0 OR
    CHARINDEX('LV',@RAWDATA)<> 0 ) 
    BEGIN 
    SET @EMPNUM = ''
    RETURN @EMPNUM
    END
ELSE 
    BEGIN
    IF(ISNUMERIC(SUBSTRING(@RAWDATA,1,1))
       BEGIN
    SET @EMPNUM = @RAWDATA
    RETURN @EMPNUM
       END 
    ELSE
    IF((SUBSTRING(@RAWDATA,1,1)='C') AND (ISNUMERIC(SUBSTRING(@RAWDATA,2,1))))          
BEGIN
                  SET @EMPNUM = SUBSTRING(@RAWDATA,2,LEN(@RAWDATA))
            RETURN @EMPNUM
        END 
          END
    END
       END
    END
    END 
```

我面临的错误是

```
Msg 156, Level 15, State 1, Procedure Empnum, Line 11
Incorrect syntax near the keyword 'BEGIN'.
Msg 102, Level 15, State 1, Procedure Empnum, Line 15
Incorrect syntax near '@RAWDATA'.
Msg 156, Level 15, State 1, Procedure Empnum, Line 29
Incorrect syntax near the keyword 'BEGIN'.
Msg 156, Level 15, State 1, Procedure Empnum, Line 33
Incorrect syntax near the keyword 'ELSE'.
Msg 4145, Level 15, State 1, Procedure Empnum, Line 34
An expression of non-boolean type specified in a context where a condition is expected, near ')'.
Msg 156, Level 15, State 1, Procedure Empnum, Line 43
Incorrect syntax near the keyword 'END'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:57:46.890

函数 isumeric 返回一个 int
并且您忘记在 @RAWDATA 之前设置

```
set ANSI_NULLS ON
 set QUOTED_IDENTIFIER ON
 go
 ALTER FUNCTION [dbo].[Empnum] (@RAWDATA NVARCHAR(300))
 RETURNS VARCHAR(30)
 AS
 BEGIN 
 DECLARE @TEMP1 NVARCHAR(300), @EMPNUM NVARCHAR(10), @TEMP2 NVARCHAR(300), @TEMP3 NVARCHAR(300)
 SET @TEMP3 = 'Disabled'
 SET @TEMP2 = @RAWDATA
 IF( CHARINDEX(@TEMP3,@RAWDATA,0) = 0) 
   BEGIN
   IF(ISNUMERIC(SUBSTRING(@RAWDATA,1,1))= 1)
     BEGIN
     IF((LEN(@RAWDATA) - LEN(REPLACE(@TEMP2,'/','')))>1)
        BEGIN
  Set  @RAWDATA=SUBSTRING(@RAWDATA,CHARINDEX('/',@RAWDATA)+1,LEN(@RAWDATA))    
 Set   @RAWDATA=SUBSTRING(@RAWDATA,CHARINDEX('/',@RAWDATA)+1,LEN(@RAWDATA))    
  Set  @RAWDATA=SUBSTRING(@RAWDATA,1,CHARINDEX('/',@RAWDATA)-1)
IF( CHARINDEX('*C',@RAWDATA) <> 0 OR
    CHARINDEX('CV',@RAWDATA) <> 0 OR
    CHARINDEX('AV',@RAWDATA) <> 0 OR
    CHARINDEX('LV',@RAWDATA)<> 0 ) 
    BEGIN 
    SET @EMPNUM = ''
    RETURN @EMPNUM
    END
ELSE 
    BEGIN
    IF(ISNUMERIC(SUBSTRING(@RAWDATA,1,1))=1)
       BEGIN
    SET @EMPNUM = @RAWDATA
    RETURN @EMPNUM
       END 
    ELSE
    IF((SUBSTRING(@RAWDATA,1,1)='C') AND (ISNUMERIC(SUBSTRING(@RAWDATA,2,1))=1))        
    BEGIN SET @EMPNUM = SUBSTRING(@RAWDATA,2,LEN(@RAWDATA)) 
    RETURN @EMPNUM 
    END 
END
     END 
    END 
    END 
    return null
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:58:01.357

请试试

```
ALTER FUNCTION [dbo].[Empnum] (@RAWDATA NVARCHAR(300)) 
returns VARCHAR(30) 
AS 
  BEGIN 
      DECLARE @TEMP1  NVARCHAR(300), 
              @EMPNUM NVARCHAR(10), 
              @TEMP2  NVARCHAR(300), 
              @TEMP3  NVARCHAR(300) 

      SET @TEMP3 = 'Disabled' 
      SET @TEMP2 = @RAWDATA 

      IF( Charindex(@TEMP3, @RAWDATA, 0) = 0 ) 
        BEGIN 
            IF Isnumeric(Substring(@RAWDATA, 1, 1)) = 1 
              BEGIN 
                  IF( ( Len(@RAWDATA) - Len(Replace(@TEMP2, '/', '')) ) > 1 ) 
                    BEGIN 
                        SET @RAWDATA=Substring(@RAWDATA, Charindex('/', @RAWDATA 
                                                         ) 
                                                         + 1, 
                                     Len( 
                                     @RAWDATA) 
                                     ) 
                        SET @RAWDATA=Substring(@RAWDATA, Charindex('/', @RAWDATA 
                                                         ) 
                                                         + 1, 
                                     Len( 
                                     @RAWDATA) 
                                     ) 
                        SET @RAWDATA=Substring(@RAWDATA, 1, 
                                     Charindex('/', @RAWDATA) 
                                     - 1 
                                     ) 

                        IF( Charindex('*C', @RAWDATA) <> 0 
                             OR Charindex('CV', @RAWDATA) <> 0 
                             OR Charindex('AV', @RAWDATA) <> 0 
                             OR Charindex('LV', @RAWDATA) <> 0 ) 
                          BEGIN 
                              SET @EMPNUM = '' 

                              RETURN @EMPNUM 
                          END 
                        ELSE 
                          BEGIN 
                              IF Isnumeric(Substring(@RAWDATA, 1, 1)) = 1 
                                BEGIN 
                                    SET @EMPNUM = @RAWDATA 

                                    RETURN @EMPNUM 
                                END 
                              ELSE IF ( ( Substring(@RAWDATA, 1, 1) = 'C' ) 
                                   AND ( Isnumeric(Substring(@RAWDATA, 2, 1)) = 
                                         1 
                                       ) ) 
                                BEGIN 
                                    SET @EMPNUM = Substring(@RAWDATA, 2, Len( 
                                                  @RAWDATA) 
                                                  ) 

                                    RETURN @EMPNUM 
                                END 
                          END 
                    END 
              END 
        END 

      RETURN @EMPNUM 
  END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:56:46.647

在这里试试这个：

```
DECLARE @TEMP1 NVARCHAR(300), @EMPNUM NVARCHAR(10), @TEMP2 NVARCHAR(300), @TEMP3 NVARCHAR(300)
 SET @TEMP3 = 'Disabled'
 SET @TEMP2 = @RAWDATA
 IF( CHARINDEX(@TEMP3,@RAWDATA,0) = 0) 
   BEGIN
    IF ISNUMERIC(SUBSTRING(@RAWDATA,1,1)) = 1
         BEGIN
        IF((LEN(@RAWDATA) - LEN(REPLACE(@TEMP2,'/','')))>1)
            BEGIN
                SET @RAWDATA=SUBSTRING(@RAWDATA,CHARINDEX('/',@RAWDATA)+1,LEN(@RAWDATA))    
                SET @RAWDATA=SUBSTRING(@RAWDATA,CHARINDEX('/',@RAWDATA)+1,LEN(@RAWDATA))    
                SET @RAWDATA=SUBSTRING(@RAWDATA,1,CHARINDEX('/',@RAWDATA)-1)
    IF( CHARINDEX('*C',@RAWDATA) <> 0 OR
        CHARINDEX('CV',@RAWDATA) <> 0 OR
        CHARINDEX('AV',@RAWDATA) <> 0 OR
        CHARINDEX('LV',@RAWDATA)<> 0 ) 
        BEGIN 
            SET @EMPNUM = ''
            RETURN @EMPNUM
        END
    ELSE 
        BEGIN
            IF ISNUMERIC(SUBSTRING(@RAWDATA,1,1)) = 1
                BEGIN
                    SET @EMPNUM = @RAWDATA
                    RETURN @EMPNUM
            END 
    ELSE
        IF((SUBSTRING(@RAWDATA,1,1)='C') AND ISNUMERIC(SUBSTRING(@RAWDATA,2,1)) = 1)
            BEGIN
                SET @EMPNUM = SUBSTRING(@RAWDATA,2,LEN(@RAWDATA))
                RETURN @EMPNUM
            END
    END
    END
    END
    END 
```

值得注意的是，我没有对此进行测试，只是修复了显示中的错误。

# javascript - Facebook XMPP 聊天 API - 设备优先级

> ID：14499490
> 
> 赞同：7
> 
> 时间：2013-01-24T10:48:18.410
> 
> 标签：javascript, facebook, api, xmpp, chat

我使用以下结构创建了一个使用聊天 api 的 Facebook 应用程序

```
Strophe.js <-- --> Punjab <-- --> Facebook XMPP 
```

一切正常。我的问题是：一旦我的应用程序连接，我可以阻止其他客户端接收消息吗？

详细说明：如果用户开始使用我的应用程序进行交流，他不应该在正常的 facebook 聊天 ui 上收到回复。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:32:31.480

我不相信这是可能的。您可以通过其[XMPP 控制台](http://pidginmanual.wikidot.com/xmppconsole)使用 Pidgin 对其进行测试。

聊天的[开发者文档](https://developers.facebook.com/docs/chat/)列出了支持的功能并有一个关于限制的部分，开头是：

> Facebook Chat 应该与每个 XMPP 客户端兼容，但不是完整的 XMPP 服务器。它应该被认为是 www.facebook.com 上 Facebook Chat 世界的代理。因此，它的一些行为与您对传统 XMPP 服务的期望略有不同：...

因此，您不应期望浏览器内的 Facebook 聊天客户端表现得像符合 XMPP 的客户端。

# php - 如何通过 CSS 添加徽标？

> ID：14499492
> 
> 赞同：0
> 
> 时间：2013-01-24T10:48:24.690
> 
> 标签：php, css

由于我有大量的 php 页面并且我不想一一手动添加，如何将我的徽标添加到我的 css 样式表中。

基本上我想拥有一个全局功能，所以我只需要放入一页。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T10:49:31.180

在 css 中使用`background`如下。

```
.logo { background : url(path_to_logo); }
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T10:55:05.120

或者，如果您的徽标说 60px 高，您可以这样做

```
body { 
padding:60px 0 0 0:
background-image : url(path_to_logo) no-repeat top left; 
} 
```

将徽标添加到每个正文标签（每个页面通用

理想情况下，您将拥有一个 header.php 文件，该文件包含在每个页面中 - 通过使用

```
include('header.php'); 
```

然后，您对此文件所做的任何更改都将在整个站点中生效，例如添加

```
<h1>Site title</h1>
<img src="logo.jpg"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T10:51:02.447

只需将标题包含并将其包含在每个页面的顶部？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T10:52:30.203

添加

```
<div class="logo"> </div> 
```

在你的标题中。

将此添加到您的样式表中：

```
.logo { width: Zpx; height: Ypx; background-image: (pathtoimage.gif); } 
```

当然指定你的宽度和高度直径:)

# c++ - 如何解决支持库中发生的分段错误问题？

> ID：14499493
> 
> 赞同：5
> 
> 时间：2013-01-24T10:48:27.030
> 
> 标签：c++, c, openssl, segmentation-fault

我有一个非常奇怪的问题。我可以通过以下小示例代码复制该问题：

```
#include <openssl/ssl.h>
#include <openssl/err.h>

#include <iostream>

void printSSLErrors()
{
    int l_err = ERR_get_error();
    while(l_err!=0)
    {
      std::cout << "SSL ERROR: " << ERR_error_string(l_err, NULL) << std::endl;
      l_err = ERR_get_error();
    }
}

int main(int argc, char* argv[]) {

    SSL_library_init();
    SSL_load_error_strings();

    // context
    SSL_CTX* mp_ctx;

    if(!(mp_ctx = SSL_CTX_new(SSLv23_server_method())))
    {
      printSSLErrors();
      return 0;
    }

    std::cout << "CTX created OK" << std::endl;

    // set certificate and private key
    if(SSL_CTX_use_certificate_file(mp_ctx, argv[1], SSL_FILETYPE_PEM)!=1)
    {
      printSSLErrors();
      return 0;
    }

    std::cout << "Certificate intialised OK" << std::endl;

    if(SSL_CTX_use_PrivateKey_file(mp_ctx, argv[2], SSL_FILETYPE_PEM)!=1)
    {
      printSSLErrors();
      return 0;
    }

    std::cout << "Key intialised OK" << std::endl;

    SSL_CTX_free(mp_ctx);
    ERR_free_strings();
} 
```

当我编译它并使用`-lssl`. 然而，问题在于 openssl 例程是应用程序的一部分，该应用程序也链接到 mysqlclient 库中。我现在重新编译上面的代码`-lssl -lmysqlclient`（请注意，我在这里没有包含或使用该库中的任何内容）。如果我再次执行该程序，我会在打开的 ssl 库中遇到分段错误。我能从 gdb 中提取的最多的是：

```
[Thread debugging using libthread_db enabled]
[New Thread -1208158528 (LWP 32359)]
CTX created OK
Certificate intialised OK

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread -1208158528 (LWP 32359)]
0x001b1213 in X509_get_pubkey () from /lib/libcrypto.so.4

(gdb) backtrace
#0  0x001b1213 in X509_get_pubkey () from /lib/libcrypto.so.4
#1  0x00de8a6c in SSL_rstate_string () from /lib/libssl.so.4
#2  0x086f2258 in ?? ()
#3  0xbffceb64 in ?? ()
#4  0x086f1130 in ?? ()
#5  0xbffceaa8 in ?? ()
#6  0x086f2258 in ?? ()
#7  0x086f0d90 in ?? ()
#8  0x00df4858 in ?? () from /lib/libssl.so.4
#9  0x086f2258 in ?? ()
#10 0x086f1130 in ?? ()
#11 0xbffceaa8 in ?? ()
#12 0x00de9d50 in SSL_CTX_use_PrivateKey_file () from /lib/libssl.so.4
Previous frame inner to this frame (corrupt stack?)
(gdb) frame 0
#0  0x001b1213 in X509_get_pubkey () from /lib/libcrypto.so.4 
```

出于某种原因，这只发生在我使用 mysqlclient v 15 而不是 mysqlclient v 16 时。这对于任何人来说都可能太晦涩难懂，但是一些关于如何链接代码本身甚至不使用的动态库的评论可能会导致这些错误将非常有帮助。

该系统是：

RHEL ES4、gcc 3.4.6、openssl-0.9.7a、MySQL-5.11

有什么想法吗？

编辑：这是可能进一步澄清事情的输出：

```
[Lieuwe ~]$ c++ openssl_test.cpp -lssl -o ssltest 
[Lieuwe ~]$ ./ssltest /etc/httpd/conf/certs/test.crt /etc/httpd/conf/certs/test.key 
CTX created OK
Certificate intialised OK
Key intialised OK
[Lieuwe ~]$ c++ openssl_test.cpp -lmysqlclient -lssl -o ssltest 
[Lieuwe ~]$ ./ssltest /etc/httpd/conf/certs/test.crt /etc/httpd/conf/certs/test.key 
CTX created OK
Certificate intialised OK
Segmentation fault (core dumped)
[Lieuwe ~]$ 
```

请注意，为此我使用 apache 服务器也使用的 crt 和密钥文件（并且可以工作）

编辑 2：这是程序的 valgrind 的（相关？）输出

```
CTX created OK
--5429-- REDIR: 0x5F6C80 (memchr) redirected to 0x4006184 (memchr)
Certificate intialised OK
==5429== Invalid read of size 4
==5429==    at 0xCF4205: X509_get_pubkey (in /lib/libcrypto.so.0.9.7a)
==5429==    by 0xDE8A6B: (within /lib/libssl.so.0.9.7a)
==5429==    by 0xDE9D4F: SSL_CTX_use_PrivateKey_file (in /lib/libssl.so.0.9.7a)
==5429==    by 0x8048C77: main (in /home/liwu/ssltest)
==5429==  Address 0x4219940 is 0 bytes inside a block of size 84 free'd
==5429==    at 0x4004EFA: free (vg_replace_malloc.c:235)
==5429==    by 0xC7FD00: CRYPTO_free (in /lib/libcrypto.so.0.9.7a)
==5429==    by 0xCE53A7: (within /lib/libcrypto.so.0.9.7a)
==5429==    by 0xCE5562: ASN1_item_free (in /lib/libcrypto.so.0.9.7a)
==5429==    by 0xCE0560: X509_free (in /lib/libcrypto.so.0.9.7a)
==5429==    by 0xDE979E: SSL_CTX_use_certificate_file (in /lib/libssl.so.0.9.7a)
==5429==    by 0x8048C23: main (in /home/liwu/ssltest)
==5429== 
==5429== Invalid read of size 4
==5429==    at 0xCD4A5F: EVP_PKEY_copy_parameters (in /lib/libcrypto.so.0.9.7a)
==5429==    by 0xDE8A7C: (within /lib/libssl.so.0.9.7a)
==5429==    by 0xDE9D4F: SSL_CTX_use_PrivateKey_file (in /lib/libssl.so.0.9.7a)
==5429==    by 0x8048C77: main (in /home/liwu/ssltest)
==5429==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==5429== 
==5429== Process terminating with default action of signal 11 (SIGSEGV)
==5429==  Access not within mapped region at address 0x0
==5429==    at 0xCD4A5F: EVP_PKEY_copy_parameters (in /lib/libcrypto.so.0.9.7a)
==5429==    by 0xDE8A7C: (within /lib/libssl.so.0.9.7a)
==5429==    by 0xDE9D4F: SSL_CTX_use_PrivateKey_file (in /lib/libssl.so.0.9.7a)
==5429==    by 0x8048C77: main (in /home/liwu/ssltest)
==5429== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:35:21.257

我建议在[Valgrind](http://www.valgrind.org/)下运行你的程序。Valgrind 旨在为此类问题提供帮助，它通常比调试器更容易使用。

如果我冒险猜测，我首先会怀疑您的应用程序（或者，不太可能，在某个共享库中）中存在对生成的可执行文件的内存布局敏感的内存错误。添加一个新的共享库，或者说，启用调试选项很可能使问题无缘无故地出现或消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:00:32.970

我认为 mysql 客户端库与另一个版本的 libssl 链接。如果您使用的是 linux：这两个库是否都通过您的发行版的官方存储库安装？您是否链接到这些库的静态 (.a) 或动态 (.so) 版本？

您可以使用该`nm`命令来了解更多信息（阅读手册页）。

您可以尝试自己重建mysql客户端库，确保使用相同的libssl版本，看看问题是否消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:05:08.910

唯一合乎逻辑的解释可能是无法找到 X509_get_pubkey() 所需的公钥。

您能否验证该功能请求的公钥是否可用？

# wcf - 如何让 svcutil 为具有锯齿状数组的架构构建代理？

> ID：14499494
> 
> 赞同：1
> 
> 时间：2013-01-24T10:48:31.380
> 
> 标签：wcf, visual-studio-2008, xsd, wsdl, svcutil.exe

我们通过 WCF SOAP 服务发布业务层中包含的功能。我们使用 VS2008 并使用可视化设计工具 ( [XMLSpy ) 编写 XSD，并使用](http://www.altova.com/xml-editor/)[WSCF.blue](http://wscfblue.codeplex.com/)生成 WSDL

在我们的一个模式中，我们实际上是一个锯齿状数组：

```
<xs:element name="CriteriaGroups" minOccurs="0" maxOccurs="unbounded">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="CriteriaGroup" type="SearchCriterion" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

当我生成客户端时，对服务的所有调用都失败并出现以下错误：

```
Unable to generate a temporary class (result=1) error CS0030: Cannot convert type 'SearchCriterion[]' to 'SearchCriterion' 
```

网上常见的解决办法是把下面这行改成`Reference.cs`：

```
public SiDemSearchCriterion[][] CriteriaGroups 
```

至：

```
public SiDemSearchCriterion[] CriteriaGroups 
```

以及来自该属性的所有引用。

但这没有用，因为它可以运行，但它不起作用。它丢弃了大部分数据。将这一切都作为列表执行的设置什么都不做。

有什么方法可以在不更改架构的情况下做到这一点？这是我们的模式，所以改变它并不是*什么*大问题。我宁愿不以*“Microsoft Schema”*的方式设计它。

合同（WSDL + XSD）集应该是独立于平台的并且基于通用标准。

所以：

1.  有没有办法让 SVCUTIL 在不更改架构的情况下构建一个工作客户端？
2.  如何更改架构以使 SVCUTIL 开箱即用地构建客户端？

# php - 使用 jQuery/javascript 从 HTML 中删除 id 属性

> ID：14499495
> 
> 赞同：2
> 
> 时间：2013-01-24T10:48:31.687
> 
> 标签：php, javascript, jquery, html

我有一个 mainWrap 里面的内容是动态填充的。（有点像下面）

```
 <div id="mainWrap">
                <div style="z-index: 1001; height: 407px; width: 328px; top: 150px; left: 601.5px;" id="com-TMRJDOR2KOET3X6JPV6XGU0FB7RGJ926" class="textBox contentBox">
                   <div style="" class="editable"><p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, </p>
                   </div>
                </div>

                <div style="z-index: 1002; height: 616px; width: 288px; top: 29px; left: 3.5px;" id="com-UPWTMKZ7OUTN8KG2JEK47LNPN5JO261H" class="textBox contentBox">
                   <div style="" class="editable"><p>
                ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>
                  </div>
               </div>            
          </div> 
```

的直系子女`mainWrap`有一个 id。我想在将其保存到数据库之前**删除这些 id**。现在我尝试了类似这样

```
 var getContent = $('#mainWrap');  
        var finalContent =getContent.clone().find('*').removeAttr('id');// 1            
        var finalContent=getContent.clone().children().removeAttr('id');//2     
        alert(finalContent.html()); 
```

在这两种情况下，我得到的输出如下：

```
 <div style="" class="editable"><p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, </p>
        </div> 
```

外部 div 被删除，而不是两个，我只得到 1 个 div。但是当我独立尝试它时，它适用于第二个。[这](http://jsfiddle.net/Qj826/)是小提琴

我怎样才能把它弄好。我不知道为什么它在应用程序中失败并且独立工作！
谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:12:27.867

[这](http://jsfiddle.net/AKC9u/)是小提琴。我想这就是你要找的

这是js代码：

```
$(function(){
  $('button').click(function(){
     $("#wrap").children('div').each(function(){
        $(this).removeAttr('id');
     });
   alert($("#wrap").html());
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T10:56:29.190

尽量在父母选择上更加具体。

尝试这个：

```
$(document).ready(function () {
    var getContent = $('#mainWrap');
    var finalContent = $('div.textBox', getContent).clone();

    finalContent.each(function () {
        $(this).removeAttr('id');
    });
    console.log(finalContent[0]);
}); 
```

在这里查看[http://jsbin.com/ewosix/1/](http://jsbin.com/ewosix/1/)

```
 $('button').click(function () {
     var newContent = $(finalContent).first().wrap('<div class="addId" />');
     newContent = $(newContent).parents( /*You can add specific selector for parents like div.textBox or leave it emty for all parents */ ).each(function (index, value) {
         $(this).attr('id', index);
     });
     alert($(newContent).html());
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:07:04.087

利用`each`

[**您可以在每个 jquery**](http://api.jquery.com/jQuery.each/)中找到有用的帮助[](http://api.jquery.com/jQuery.each/)

 **```
finalContent.each(function()
{
    $(this).removeAttr('id')
})
```

因为 finalContent 是具有多个 dom 的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T11:04:49.187

我不确定我是否理解正确，但要删除`#mainWrap`div 的直系子级的 id，您可以使用以下代码：

`$('#mainWrap > *').removeAttr('id');`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T11:19:33.077

也许这是您问题的解决方案：

```
var mainWrap = $('#mainWrap').clone();
mainWrap.children().removeAttr('id');

alert(mainWrap.html()); 
```**

# websphere - 在 WebSphere 7 上使用带有 Axis2 的 JAX-WS 客户端

> ID：14499496
> 
> 赞同：1
> 
> 时间：2013-01-24T10:48:33.270
> 
> 标签：websphere, jax-ws, axis2

我必须开发一个必须部署到 WebSpehere 7 的 JAX-WS 客户端。WebSphere 7 使用自定义 Axis2 实现。

我已阅读本指南 (http://axis.apache.org/axis2/java/core/docs/jaxws-guide.html) 以使用 wsimport 生成客户端所需的类。但是生成的类在 jaxws-rt.jar（存在于 JRE6 中）中引用 com.sun.xml.ws.spi.ProviderImpl，而当客户端在 Websphere 上运行时，它们引用 org.apache.axis2.jaxws.spi.Provider。

这是对的吗？如果客户端将使用 Axis2 实现，使用 Oracle JDK wsimport 也是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:52:13.730

作为 WAS 安装的一部分，应该有一个 wsimport 工具。我在 /IBM/WebSphere/AppServer/bin 下找到了我的

尝试使用该工具来生成您的类，而不是使用 Oracle 的工具。它应该生成与 WebSphere 更兼容的类。

您也可以从 Apache 获取 Axis2。我想 Apache 的 wsimport （或等效的）将生成最独立于服务器的类。

[http://axis.apache.org/axis2/java/core/download.cgi](http://axis.apache.org/axis2/java/core/download.cgi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:01:28.047

使用 WebSphere 自己的`wsimport`. 有[一个您可以运行的脚本](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/rwbs_wsimport.html)，一个您可以使用的[WSDL2Java Ant 任务](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.javadoc.doc/web/apidocs/com/ibm/websphere/ant/tasks/WSDL2Java.html)，或者如果您有 RAD，您可以在其中完成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:39:46.573

生成的工件`wsimport`是可移植的，即它们不包含对实现特定类的引用。实际的 JAX-WS 实现是在运行时选择的。因此，无论您使用 Oracle 还是 IBM 的`wsimport`.

# android - 如何在eclipse中添加sqlite浏览器？

> ID：14499498
> 
> 赞同：0
> 
> 时间：2013-01-24T10:48:36.710
> 
> 标签：android

我已经在文件资源管理器中有 SQLite 管理器，但在这里我只能查看数据库结构和浏览数据意味着查看表的数据，我不能插入、删除和更新数据。所以我想对数据库表进行 CRUD 操作。我可以在 eslipse 中添加 SQLite 浏览器吗？

请任何人都可以建议我。

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:50:49.217

您必须将 db 文件粘贴到 assets 文件夹中。然后你就可以进行CRUD操作了：）

# android - Facebook 标记的照片在 android -> facebook sdk

> ID：14499504
> 
> 赞同：1
> 
> 时间：2013-01-24T10:48:58.693
> 
> 标签：android, facebook, api

我正在使用 facebook api 来做一个 android 应用程序。它要求用户选择朋友来查看标记的照片。（也就是说，如果用户选择两个名字 A 和 B -> 他应该能够在一张照片中看到 A 和 B）。为了务实地做到这一点，我使用了图形 API 资源管理器，但发现很难提出请求调用。请参考图片：

![脸书 api 浏览器](../Images/1aa0188f1eb2b937d46e465dd0bcdf0a.png)

对于我的查询，应使用上述信息。也就是说，当我提供“id（userID）”时，我需要获取“图片”..

请告诉我这是怎么做的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T03:21:44.490

这涉及到五个步骤：

第1步：

登录脸书：

```
private void loginToFacebook()
       {
           mPrefs = activity.getPreferences(Context.MODE_PRIVATE);
           facebook = new Facebook(APP_ID);
           accessToken = mPrefs.getString("access_token", null);
           long expires = mPrefs.getLong("access_expires", 0);

           if (accessToken != null)
           {
               facebook.setAccessToken(accessToken);
               uploadPhoto(facebook, imageBitmap, null);
           }

           if (expires != 0)
           {
               facebook.setAccessExpires(expires);
           }

           if (!facebook.isSessionValid())
           {
            facebook.authorize(activity, new String[] {"publish_stream"}, Facebook.FORCE_DIALOG_AUTH, new DialogListener() {

                    public void onFacebookError(FacebookError arg0) {
                        // TODO Auto-generated method stub

                    }

                    public void onError(DialogError arg0) {
                        // TODO Auto-generated method stub

                    }

                    public void onComplete(Bundle arg0) {
                            SharedPreferences.Editor editor = mPrefs.edit();
                            editor.putString("access_token", facebook.getAccessToken());
                            editor.putLong("access_expires", facebook.getAccessExpires());
                            editor.commit();                        
                            uploadPhoto(facebook, imageBitmap, null);                   
                    }

                    public void onCancel() {
                        // TODO Auto-generated method stub

                    }
                });

           }
       } 
```

第2步：

上传图片到Facebook（上传位图），注意这个方法是在login方法里面调用的。Following 方法返回上传图片的 ID，因此在标记朋友时需要这样做：

```
public  String uploadPhoto(Facebook facebook, Bitmap image, String albumId)
        {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);

            if ( albumId == null ) {
                albumId = "me";
            }

            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            image.compress(CompressFormat.JPEG, 75, bos);
            byte[] photoBytes = bos.toByteArray();

            Bundle params = new Bundle();
            params.putString(facebook.TOKEN, accessToken);
            params.putByteArray("picture", photoBytes);

            try {
                @SuppressWarnings("deprecation")
                String resp = facebook.request(albumId + "/photos", params, "POST");
                JSONObject json = Util.parseJson(resp);
                if(json.getString("id") != null){
                    Toast.makeText(activity, "Image Successfully uploaded to facebook!", Toast.LENGTH_SHORT).show();

                    tagFriends();

                }else{
                    Toast.makeText(activity, "Uploading failed, please try again!", Toast.LENGTH_SHORT).show();

                }
                uploadedImageID = json.getString("id");
                return json.getString("id");

            } catch ( IOException e ) {
                Toast.makeText(activity, "Uploading failed, please try again!", Toast.LENGTH_SHORT).show();

            } catch ( FacebookError e ) {
                Toast.makeText(activity, "Uploading failed, please try again!", Toast.LENGTH_SHORT).show();

            } catch ( JSONException e ) {
                Toast.makeText(activity, "Uploading failed, please try again!", Toast.LENGTH_SHORT).show();

            }

            return null;
        } 
```

第 3 步：

获取您 Facebook 帐户的所有朋友并存储在哈希图中：

```
Bundle params = new Bundle();
                params.putString(Facebook.TOKEN, accessToken);   
                mAsyncRunner.request("me/friends" , params , "GET", new RequestListener()
                {

                    @Override
                    public void onMalformedURLException(MalformedURLException e, Object state)
                    {

                    }

                    @Override
                    public void onIOException(IOException e, Object state)
                    {

                    }

                    @Override
                    public void onFileNotFoundException(FileNotFoundException e, Object state)
                    {

                    }

                    @Override
                    public void onFacebookError(FacebookError e, Object state)
                    {

                    }

                    @Override
                    public void onComplete(String response, Object state)
                    {
                        try
                        {
                            JSONObject responseJsonObject = new JSONObject(response);
                            Log.d("InviteFriends.inviteFriends().new RequestListener() {...}:onComplete", "FB Response =>"+ responseJsonObject);
                            //event_id = event.getString("id");

                            //JSONObject responseJsonObject = new JSONObject(eventResponse);
                            JSONArray jsonArray = responseJsonObject.getJSONArray("data");

                            for (int i = 0; i < jsonArray.length(); i++)
                            {
                                HashMap<String, String> map = new HashMap<String, String>();
                                JSONObject e = jsonArray.getJSONObject(i);

                                map.put("id",    e.getString("id"));
                                map.put("name",  e.getString("name"));
                                mylist.add(map);

                                userIds = e.getString("id");
                                userName = e.getString("name");
                                Log.d("MainActivity:getAllEvents", "Friend ID, Name:" +  userIds + "," + userName);

                            }
                        }
                        catch (Exception e)
                        {
                            Log.e("log_tag", "Error parsing data "+e.toString());
                        } 
```

第4步：

在列表视图中显示名称列表，并从列表中捕获用户触摸的用户名的用户 ID，并将它们存储在数组中：

```
final ListView friends = (ListView)  findViewById(R.id.lst_frnds);
ListAdapter adapter = new SimpleAdapter(getApplicationContext(), mylist , R.layout.friends_main,  new String[] {"name" }, new int[] {R.id.item_title});
                                Log.d( "size","Friends->" + mylist.size());
friends.setAdapter(adapter);
friends.setOnItemClickListener(new OnItemClickListener() {
                                    public void onItemClick(final AdapterView<?> parent, View view, int position, long id) {
                                        @SuppressWarnings("unchecked")
                                        HashMap<String, String> o = (HashMap<String, String>) friends.getItemAtPosition(position);
                                        String selectedName = o.get("name");
                                        String selectedId = o.get("id");
                                        Toast.makeText(MemeList.this, "Your friend " + selectedName + "' was selected.", Toast.LENGTH_SHORT).show();

                                        selectedFriendsIDs.add(selectedId);
                                        selectedFriendsNames.add(selectedName);
} 
```

第 5 步：

标记从列表中选择的朋友：

```
btnSendInvites.setText(selectedFriendsIDs.size() + " selected, tag them now?");

                                        btnSendInvites.setOnClickListener(new OnClickListener() {

                                            @Override
                                            public void onClick(View v) {

                                                //Tagging friends 
                                                for(int i = 0; i < selectedFriendsIDs.size(); i++){

                                                    String inputParm = uploadedImageID + "/tags?to=" + selectedFriendsIDs.get(i);

                                                    Bundle params = new Bundle();
                                                    params.putString(Facebook.TOKEN, accessToken);   
                                                    mAsyncRunner.request(inputParm, params, "POST", new RequestListener()
                                                    {

                                                        @Override
                                                        public void onMalformedURLException(MalformedURLException e, Object state)
                                                        {

                                                        }

                                                        public void onIOException1(IOException e, Object state)
                                                        {

                                                        }

                                                        @Override
                                                        public void onFileNotFoundException(FileNotFoundException e, Object state)
                                                        {

                                                        }

                                                        @Override
                                                        public void onFacebookError(FacebookError e, Object state)
                                                        {

                                                        }

                                                        @Override
                                                        public void onComplete(String response, Object state)
                                                        {
                                                            Log.d("Selected IDs ", "" + selectedFriendsIDs);
                                                        }

                                                        @Override
                                                        public void onIOException(IOException e, Object state)
                                                        {
                                                            // TODO Auto-generated method stub

                                                        }
                                                    }, null);
                                                }

                                            }
                                        }); 
```

如果成功标记，将返回 true。

希望这对某人有帮助！

# iphone - UIViewController 容器，带有用于横向/纵向的子项

> ID：14499507
> 
> 赞同：1
> 
> 时间：2013-01-24T10:49:09.033
> 
> 标签：iphone, ios, objective-c, uiviewcontroller, landscape-portrait

我有一个`UIViewController`带有两个孩子的容器，`UIViewController`它们实现了两种不同的方式来浏览一组项目（一个封面流，一个列表），一个用于每个方向（横向/纵向）。当您点击一个项目时，容器会显示另一个`UIViewController`孩子（这个是横向/纵向兼容的），提供有关该项目的详细信息。

旋转时，我想要 iOS 上的 Apple *Music*应用程序中的效果，当您旋转列表时，列表保持其方向并淡入新方向的封面流。

我可以在旋转开始时淡出列表并在最后淡入coverflow，但我不能将列表淡入coverflow（或同时涉及两个视图的任何其他动画），因为我不不知道如何强制列表保持纵向，封面流保持横向。

我知道我可以强制容器保持纵向`shouldAutorotate = NO`并使用方向通知将景观显示`UIViewController`为模态但我需要容器旋转以便以`UIViewController`正确的方向显示我的细节。

我想为每个方向保留一个带有两个孩子的容器，但我也接受一个每个方向一个`UIViewController`和两个的解决方案`UIView`。

（需要iOS5+兼容）

# c++ - 从链表中删除节点

> ID：14499508
> 
> 赞同：4
> 
> 时间：2013-01-24T10:49:09.217
> 
> 标签：c++, linked-list, hashtable, nodes

我创建了一个哈希表，我想从链表中删除一个节点。该代码适用于删除第一个节点，但不适用于删除其他节点。

```
void intHashTable::remove(int num){
int location = ((unsigned)num) % size;
Node * runner = table[location];
int checker;

if(runner->next == NULL){
    if(num == table[location]->num){
        table[location] = NULL;
    }
}else{
    if(table[location]->num == num){
        table[location] = table[location]->next;
    }else{
        //This part doesn't seem to be working.
        Node *temp = runner->next;
        while(temp != NULL){ 
            if(temp->num == num){
                runner->next = temp->next;
                delete(temp);
                break;
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:53:00.910

您尚未更新`temp`以指向循环中的下一个项目：

```
temp = temp->next; 
```

您似乎还用`NULL`表中的指针表示了一个空行，但是您没有在代码中正确处理这种情况 - 如果`runner`是，`NULL`那么当您尝试`runner->next`在第一次检查中访问时会崩溃。此外，在某些情况下，您无法删除节点。

要解决这些问题，您可以将代码更新为以下内容：

```
void intHashTable::remove(int num)
{
    int location = ((unsigned)num) % size;
    Node * runner = table[location];

    if (runner != NULL) {
        if (runner->num == num) {
            delete runner;
            table[location] = NULL;
        } else {
            while (runner->next != NULL) {
                if (runner->next->num == num) {
                    Node *temp = runner->next;
                    runner->next = runner->next->next;
                    delete temp;
                    break;
                }
                runner = runner->next;
            }
        }
    }
} 
```

另请注意，我已从 中删除括号`delete`，这是 C++ 关键字而不是函数。

如果您使用双向链表（即带有前一个指针和下一个指针），那么您可以稍微简化此代码，尽管对于像哈希表这样您只倾向于在一个方向上迭代的东西可能不值得额外指针的开销（在 64 位系统上每项额外 8 个字节）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:01:20.733

您没有更新`temp`和`runner`循环内的变量：

```
 while(temp != NULL)
    { 
        if(temp->num == num)
        {
            runner->next = temp->next;
            delete temp;
            break;
        }
        runner = temp;     // Keep previous element to change its next pointer when num found
        temp = temp->next; // Advance current pointer to next element
    } 
```

# gis - 我怎样才能获得一个国家的城市边界

> ID：14499511
> 
> 赞同：7
> 
> 时间：2013-01-24T10:49:15.057
> 
> 标签：gis, openstreetmap

我想从 OSM 中为芬兰提取城市特定数据。我有芬兰的数据，但我只需要 5 个城市的数据：赫尔辛基、埃斯波、万塔、考尼艾宁和 Siuntio。我可以提取赫尔辛基所需的数据，但我需要其他城市的城市边界（所以我可以制作一个多边形）。[如果我有多边形，我可以使用osmconvert](http://wiki.openstreetmap.org/wiki/Osmconvert)提取所需的数据

你能帮我了解如何提取这些城市的边界吗？

你知道任何为我提供这些信息的开放 api 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T14:27:29.757

感谢[Roland Olbricht](https://help.openstreetmap.org/users/3480/roland-olbricht)，我设法解决了我的问题。[您可以在此站点](https://help.openstreetmap.org/questions/19336/get-city-borders-for-finland)上找到与此问题相关的信息。解决方案如下：

1.  [使用 overpass api http://overpass-api.de/api/interpreter?data=(rel[name='Helsinki'];>;);out;](http://overpass-api.de/api/interpreter?data=%28rel%5Bname=%27Helsinki%27%5D;%3E;%29;out;)生成边界
2.  您可以选择将“赫尔辛基”更改为要为其生成边界的城市名称
3.  下载数据后，您可以使用[此脚本](http://svn.openstreetmap.org/applications/utils/osm-extract/polygons/rel2poly.pl)将其转换为多边形。您可以在其上部找到有关如何使用该脚本的信息。
4.  如果要可视化下载的边界，请将解释器文件的扩展名重命名为 .osm 并使用[QGIS（Quantum GIS）](http://hub.qgis.org/projects/quantum-gis/wiki/Download)来显示边界。要加载 osm 文件的数据，您需要安装并激活 QGIS 的 OpenStreetMap 插件。要安装插件，请打开 QGIS 并从菜单中选择插件>获取 Python 插件。在插件选项卡上搜索“openStreetMap 插件”，然后点击安装。您可以通过选择插件 > 管理插件并选中 OpenStreetMap 插件的复选框来激活插件。

# php - PHP DOM 文档生成格式错误的 XML 提要

> ID：14499512
> 
> 赞同：6
> 
> 时间：2013-01-24T10:49:15.593
> 
> 标签：php, xml, dom

我正在尝试使用 php 和 DOM 文档为 Google Merchant 创建提要。

提要包含数千个项目，但无法验证，因为有极少数情况（6000 多个中的 4/5）XML 格式错误，例如：

```
 <g:product_type>Plantsg:product_type> 
```

我在 foreach 循环中生成

```
 //Loop through each plant
    foreach($plantList as $plantItem){

        //begin item element
        $item = $xml->createElement('item');

        //Loop through use key as element name and value as data
        foreach ($plantItem as $key => $value)
        {
            //Decode HTML characters, for example '&' becomes  &amp
            //to comply with http://www.w3.org/TR/xhtml1/#C_12
            $decode = htmlspecialchars_decode($value);
            $decode = trim($decode);

            if(empty($decode))
              continue;

            //Create the element
            $tag = $xml->createElement($key);
            $tag = $item->appendChild($tag);

            //Write the field
            $text = $xml->createTextNode($decode);
            $text = $tag->appendChild($text);

        }
        $item = $channel->appendChild($item);
    } 
```

**[这是xml整个生成代码。](https://gist.github.com/4620003)**

以下是 3 个格式错误的标签：

```
g:adwords_grouping>18</g:adwords_grouping>

form>10 ltr pot</form>

title>Buy Helleborus x nigercors</title> 
```

当我对代码进行调整时，格式错误的标签会在不同的地方弹出。通常它要么缺少'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:32:45.853

感谢所有试图解决它的人。当 Chrome 遇到编码问题时，格式错误的标签会被放在那里。

见![带注释的屏幕截图](../Images/190934bbfb8ea69062623abb69d6fc68.png)。在这种情况下，它打开 , 标签遇到 'ö'，然后摔倒并没有关闭标签。

正如 hakre 所指出的，当我应该只使用 htmlspecialchars 时，我也错误地使用了 htmlspecialchars_decode，但这是一个完全不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:36:21.467

我和@aefxx 在一起，如果您可以在看到格式错误的开始标签的那一行之前和之后提供几行，那将会很有帮助（看起来您展示的所有示例在开始标签中都只缺少一个字符）。

# asp.net - 如何部分预编译一个 ASP.NET 网站

> ID：14499516
> 
> 赞同：2
> 
> 时间：2013-01-24T10:49:31.560
> 
> 标签：asp.net, visual-studio, web

我有一个包含大量页面的网站，我在生产服务器上保留了预编译版本（具有固定命名）。

每次我对我的代码进行任何更改时，我都必须发布整个网站，只是为了做一点小改动。

发布网站大约需要一个小时，然后我才能将更改部署到生产服务器。

有没有办法只发布一批页面，以便发布过程更快？

有没有其他选择可以节省发布时间？

**注意：**发布是指预编译

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:41:03.627

减少编译时间和网站项目大小的一种方法是将您的网站分成几个更小且更易于维护的网站。

您仍然可以在生产中一起部署这些单独的发布。

对其他项目页面的引用完美无缺。IIS 上同一应用程序中的所有页面都将共享同一个会话。所以对于最终用户来说，这仍然是一个网站。

由于您减少了发布任何给定模块时要完成的工作，因此发布速度会更快。根据您认为合适的批次划分模块。

你必须意识到这一点，但我会说它只是为了完成。当您发布网站时，您可以选择`Use fixed naming and single page assemblies`. 选择此项可为您的 bin 目录中的每个页面设置不同的 dll。您只需要上传您进行更改的页面和相应的dll。如果上传时间是一个问题，这将解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:59:10.513

如果您只修改 html 标签（nto 服务器端标签）或 css，您可以只部署您更改的部分。

如果它是编译代码，你别无选择。

我想您可能不得不问自己，为什么要花一个小时才能发布您的网站？你的编译时间那么长吗？.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:17:10.750

正如之前的帖子所提到的，您不能以自动方式执行此操作，但如果您想减少发布时间，您可以手动部署文件。

发布网站时，您网站的所有代码文件都编译成网站 bin 文件夹中的单个 .dll 文件，所有 .aspx 文件都部署到其相关路径。

要手动更新站点，只需在本地计算机上构建网站以创建更新的 .dll 并覆盖生产服务器上 bin 文件夹中的 .dll。如果在您的任何实际页面/.aspx 文件上修改了源/HTML，那么您还需要将它们复制过来。

**脚步：**

1.  本地建站
2.  使用本地构建的 .dll 覆盖生产服务器 .dll
3.  将任何 .aspx 页面复制到修改了 HTML/Source 的生产服务器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T05:33:12.613

如果您注意到您的页面有 3 个组件，即 *.designer、*.aspx *.cs，Microsoft 并没有真正的“预编译”概念。*.cs 都需要编译成 *.dll 才能部署到您的网站。传统上，有两种类型的可执行文件，exe 和 dll。Asp.Net 网站被编译成一个 dll，用于在服务器上运行的所有代码背后。Microsoft 没有办法“一半”编译 dll，然后将其与未更改的另一半合并。

如果您的网站需要很长时间，请编译和部署。我建议你有更多的架构问题而不是代码问题。在我工作的地方，我们的主要网站有 3,000,000 多行代码，用于完成用户需要做的所有事情。我们不需要一个小时来部署。然而，我们所做的是将我们的业务逻辑分解为多个 dll 的 100 多个 dll，而我们的网站项目本身只是 aspx 和背后的基本代码，以驱动流程进入我们的业务逻辑。这允许我们通过我们的更改来更改 x 个 dll 以支持新功能，我们不必每次都部署所有 100 个 dll 只是那些已更改的，这就是 dll 的本质。如果我们的业务逻辑 100% 包含在我们的网站项目中，那么我们的编译，

您想考虑将代码重构为 dll。如果您还没有使用 ASPX/ASP.NET 解决方案，另一种选择是考虑使用 ASP/MVC.NET 解决方案。我会考虑重构您的网站。如果花费这么长时间会出现一些严重的问题，即使您可以将数据访问分解为单独的 dll，那么您不必在每次更改网站时不断编译和部署处理数据访问的 dll，只有当您也更改了数据访问层。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-16T21:26:15.643

很简单。

将所有 HTML 内容存储在代码的单独文件中。数据库将是一个绝妙的主意。更改某些文本或交换图像所要做的就是进入数据库或文件以获取该内容并更改一些标签。我推荐 MySQL。

:)

# android - Achart 引擎 Onclick 饼图切片有时不工作是一个错误？

> ID：14499523
> 
> 赞同：3
> 
> 时间：2013-01-24T10:49:53.337
> 
> 标签：android, achartengine, pie-chart

我正在制作饼图，并且正在使用 AchartEngine。

我有这样的饼图：

[饼图的图像](http://i.imgur.com/Ogqc49O.png)

我已将 onclick 添加到切片中，但有时只有绿色切片 onlick 不起作用。

这是我的代码：

```
mChartView = ChartFactory.getPieChartView(this, adc.buildCategoryDataset("Project budget", values), renderer);
        mChartView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
              SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint();
              if (seriesSelection == null) {
                  Toast
                      .makeText(GeneratedChartDemo.this, "No chart element was clicked", Toast.LENGTH_SHORT)
                      .show();
                } else {
                  Toast.makeText(
                          GeneratedChartDemo.this,
                      "Chart element data point index " + seriesSelection.getPointIndex()
                          + " was clicked" + " point value=" + seriesSelection.getValue(),
                      Toast.LENGTH_SHORT).show();
                }
            }
          }); 
```

我哪里错了我错过了什么？

**编辑**

感谢帮助我解决问题的 Dan。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:53:46.000

您是否添加了可选缓冲区？

```
mRenderer.setClickEnabled(true);
mRenderer.setSelectableBuffer(10); 
```

更新：我修复了一个错误。[您可以在此处](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)下载包含此修复程序的版本。

# html - 这条仅在 Safari Mac 上出现的垂直透明线是什么？

> ID：14499524
> 
> 赞同：3
> 
> 时间：2013-01-24T10:49:57.420
> 
> 标签：html, css, macos, safari

我在谷歌浏览器上设计[了这个页面](http://necdoc.com/blog/)，它显示得很好。但是，如果您在 Safari Mac 上检查它（Safari Windows 可以很好地显示它）并且它有一条奇怪的垂直线：

![在此处输入图像描述](../Images/d6a160ce6718cd6212767898d1a57599.png)

线条似乎是白色区域的透明度（如果我改变背景颜色，它会改变线条颜色）。另一个有趣的事情：标题所在的位置有一个水平偏移（该行被剪切并移动到页面的左侧）......提示？

我检查了元素，但找不到任何理由。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:22:31.167

根据此回复：[Safari 中 965 像素以上带有边框半径的杂散垂直线](https://stackoverflow.com/questions/12062582/stray-vertical-line-above-965-pixels-with-border-radius-in-safari)

您应该添加`-webkit-background-clip: padding-box;`到您的包含类。

# objective-c - 旋转时顶部的导航栏

> ID：14499527
> 
> 赞同：2
> 
> 时间：2013-01-24T10:50:07.050
> 
> 标签：objective-c, cocoa-touch

我有 UIViewController（例如 loginVC），我正在尝试将它的视图添加到所有视图之上。

我试图将此视图添加到`AppDelegate`

```
[[AppDelegate sharedDelegate].window addSubview:loginVC.view]; 
```

但在这种情况下，自动旋转不起作用，所以我尝试将此视图添加到`NavigationController`的视图中。NavigationController 是 rootViewController：

```
[[AppDelegate sharedDelegate].navigationController.view addSubview:loginVC.view]; 
```

它看起来不错并且可以自动旋转，但是在旋转时会出现奇怪的行为。

旋转开始后，导航栏显示在 loginVC.view 顶部，旋转结束时显示在此视图后面，就像屏幕截图中显示的一样（我设置了红色背景以使其更明显，背景是透明的，查看此视图​​背后的所有内容）：

![在此处输入图像描述](../Images/5c2eefa5df99777ccc38f97836383ab2.png) ![在此处输入图像描述](../Images/bf51dd759f5727b00d29624fac29d86d.png) ![在此处输入图像描述](../Images/7348e0de2c804045732656fdf0b841b5.png)

我试过的：

*   我在stackoverflow上的某个地方发现了这个：在旋转之前禁用UIView动画并在旋转后启用它们 - 看起来不太好，因为旋转发生时没有动画（这有点明显）

*   试图在旋转之前隐藏 navigationBar 并在旋转后使其可见，但在这种情况下，navigationBar 位于 loginVC.view 之上

接下来我要做的事情——在 AppDelegate 的窗口上添加这个视图并手动处理旋转，但也许有更好的方法来做到这一点？

**升级版：**

截图：

![在此处输入图像描述](../Images/7ccd20c66c6fbad8df0e1bd168e4105b.png)

![在此处输入图像描述](../Images/d275a041dfc15754d33221a7085e74a1.png)

![在此处输入图像描述](../Images/464a1db193fbb8584711ccc7b6f895f7.png)

您可以在第二个屏幕截图中看到问题：导航栏位于顶部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:53:28.887

我的朋友帮我解决了这个问题

这是解决方案：

在 AppDelegate 我创建了`UIWindow`属性：

```
//AppDelegate.h
@property (nonatomic, strong) UIWindow *loginWindow; 
```

应用程序启动时初始化它

```
//AppDelegate.m
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
....
    self.loginWindow = [[UIWindow alloc] init];
    self.loginWindow.windowLevel = UIWindowLevelStatusBar;
    self.loginWindow.frame = [[UIScreen mainScreen] bounds];
    self.loginWindow.backgroundColor = [UIColor clearColor];
....
    return YES;    
} 
```

然后，在 loginVC 中：

```
@interface loginVC ()
@property (nonatomic, weak) UIWindow *loginWindow;
@end

@implementation
....

- (void)show {
// setting up loginVC view 
    if (!self.loginWindow) {
          self.loginWindow = [[AppDelegate sharedDelegate] loginWindow];
    }
    if (![self.loginWindow.rootViewController isEqual:self]) {
          [self.loginWindow setRootViewController:self];
    }
    self.loginWindow.hidden = NO;
//UPD:
    //[self.loginWindow makeKeyAndVisible];
//UPD2:
    [self.loginWindow makeKeyWindow];
}

- (void)hide {
// hiding view and stuff
    [[[AppDelegate sharedDelegate] loginWindow] setHidden:YES];
//UPD:
    //[[[AppDelegate sharedDelegate] window] makeKeyAndVisible];
//UPD2:
    [[[AppDelegate sharedDelegate] window] makeKeyWindow];
}
@end 
```

**升级版：**

不需要使用`makeKeyAndVisible`UIWindow 的方法，第二个窗口总是在第一个窗口之上。

**UPD2：**

再次更新我的答案，也许它对某人有用。

没有`makeKeyAndVisible`我就不能使用`UITestField`s 所以我取消注释该代码并面临另一个问题：

我有`UIViewController`，在这个控制器内创建另一个实例`UIViewController`并调用`[self presentViewController:...]`。在介绍中`UIViewController`我正在创建`loginVC`，但是当我打电话时

`[[[AppDelegate sharedDelegate] window] makeKeyAndVisible];`

呈现的 viewController 消失了，但是第一个视图控制器仍然有这个控制器`presentedViewController`，所以我不能呈现其他视图控制器。

我的解决方案是更改`makeKeyAndVisible`.`makeKeyWindow`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:54:02.093

在 uinavigationcontroller 中添加您的 viewController 并推送 uinavigationcontroller，然后导航栏始终可见。

# ios - PayPal 集成中的订单失败

> ID：14499534
> 
> 赞同：0
> 
> 时间：2013-01-24T10:50:40.077
> 
> 标签：ios, objective-c, paypal

我正在我的项目中进行 PayPal 集成。一切正常，但最后没有生成支付成功方法。我的付款成功代码是：

```
else if ([response isKindOfClass:[DoExpressCheckoutPaymentResponseDetails class]]) {    
    DoExpressCheckoutPaymentResponseDetails *dres = (DoExpressCheckoutPaymentResponseDetails *)response;
    if (dres.PaymentInfo.count > 0 && ((PaymentInfo *)[dres.PaymentInfo objectAtIndex:0]).TransactionID.length > 0)
    {
        [self paymentSuccess:((PaymentInfo *)[dres.PaymentInfo objectAtIndex:0]).TransactionID];
    }
    else
    {
        NSLog(@"Error came");
        [self paymentFailed];
    }
} 
```

并且支付成功方式是...

```
UINavigationController *navController = self.navigationController;

orderResultsViewController.forDelivery = ((ReviewOrderViewController *)[navController.viewControllers objectAtIndex:navController.viewControllers.count - 2]).forDelivery;
orderResultsViewController.transactionID = transactionID;
[navController popViewControllerAnimated:FALSE];
[navController setNavigationBarHidden:FALSE animated:TRUE];
[navController pushViewController:orderResultsViewController animated:TRUE]; 
```

如果你明白了，那就给我指明一个方向……

```
-(void)paymentFailed {
    [self.navigationController popViewControllerAnimated:TRUE];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Order failed" 
                                                    message:@"Your order failed. Touch \"Pay with PayPal\" to try again."
                                                   delegate:nil 
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

我超出警报视图并且付款订单失败....

# java - Java中的拖放

> ID：14499535
> 
> 赞同：1
> 
> 时间：2013-01-24T10:50:41.570
> 
> 标签：java, swing, drag-and-drop

我一直在互联网上搜索示例或如何使用 java 的拖放。我找到了一些，但所有的例子都只允许你拖到一个特定的位置，即另一个列表框或文本区域。我想知道是否有办法将项目拖到 jpanel 或类似容器上，让项目自由地放在容器上的任何位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:04:06.103

只要目标是您拖动的项目的受支持放置目标，那么您就可以将其放置到容器中，例如`JPanel`.

您可以控制拖动项目在放置位置的显示方式。如果您的面板覆盖`paintComponent()`，那么您可以绘制您认为合适的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:04:16.070

> '是一种将项目拖入 jpanel 的方法'

您可以将 DropTarget 设置为您的 JPanel。

```
public class MyDropTarget extends JPanel implements DropTargetListener {

    private MyImage image;
    private String text;

    public MyDropTarget() {
        setBackground(new Color(30,60,10));
        this.setBorder( BorderFactory.createBevelBorder( BevelBorder.LOWERED, new Color(30,60,10).brighter(), new Color(30,60,10).darker() ) );
        DropTarget dt = new DropTarget(this, DnDConstants.ACTION_COPY_OR_MOVE, this, true, null);
        this.setDropTarget( dt );
    }

    @Override
    public void paintComponent( Graphics g ) {
        super.paintComponent( g );
        if( image != null && image.getImage() != null ) {
            g.drawImage( image.getImage(), 0, 0, null );
            if(image.isError()){
                g.setColor(Color.BLACK);
                g.drawString( text, 0, 0 );
            }
        }
    }

    public void dragEnter( DropTargetDragEvent dtde ) {
        this.setBorder( BorderFactory.createBevelBorder( BevelBorder.RAISED, Color.RED.brighter(), Color.RED.darker() ) );
    }

    public void dragExit( DropTargetEvent dte ) {
        this.setBorder( BorderFactory.createBevelBorder( BevelBorder.LOWERED, UIManager.getColor( "MenuBar.highlight" ), UIManager.getColor( "MenuBar.shadow" ) ) );
    }

    public void dragOver( DropTargetDragEvent dtde ) {
    }

    public void drop( DropTargetDropEvent dtde ) {
        try {           
            text  = (String) dtde.getTransferable().getTransferData( DataFlavor.stringFlavor );
            image = (MyImage)dtde.getTransferable().getTransferData( DataFlavor.imageFlavor );
            this.setBorder( BorderFactory.createBevelBorder( BevelBorder.LOWERED, new Color(30,60,10).brighter(), new Color(30,60,10).darker() ) );
            dtde.dropComplete( true );
            repaint();
        } catch( UnsupportedFlavorException e ) {
            e.printStackTrace();
        } catch( IOException e ) {
            e.printStackTrace();
        } 
        this.setDropTarget( null );
    }

    public void dropActionChanged( DropTargetDragEvent dtde ) {
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-06T11:38:47.770

我以这种方式实现了拖放：

Java 6 中已经出现了非常方便的拖放实现机制，但它确实有其缺点。例如，您应该明确指定放置目标，当您需要在放置目标附近放置对象时，这不是很有用。同样在标准实现中，不能保证侦听器方法的执行顺序。我将告诉您实现更具扩展性的拖放的概念。

最初，鼠标侦听器（Mouse Listener 和 MouseMotionListener）应分配给所有拖动源。它需要实现3个方法：鼠标点击对象的方法、按住鼠标按钮移动鼠标的方法（MouseMotionListener中的mouseDragged）和鼠标向上的方法。

侦听器分配如下所示：

```
component.addMouseListener(new MouseAdapter() {
    @Override
    public void mousePressed(MouseEvent e) {
        //block click right mouse button
        if (MouseEvent.BUTTON1 == e.getButton()) {
            startDrag(e);
        }
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        //block click right mouse button
        if (MouseEvent.BUTTON1 == e.getButton()) {
            endDrag(e);
        }
    }
});

component.addMouseMotionListener(new MouseMotionAdapter() {
    @Override
    public void mouseDragged(MouseEvent e) {
        drag(e);
   }
}); 
```

因此，当您单击对象拖放开始时，当您移动鼠标时，对象应该被移动，当您释放鼠标时，对象应该改变它的位置并被移动到一个新的容器中。如果要在一个容器的框架内移动对象，则可以只实现 mouseDragged() 方法，在该方法中，被拖动对象的坐标会发生变化：

```
@Override
public void mouseDragged(MouseEvent e) {
    Point mouseLocation = e.getLocationOnScreen();
    Component draggedComponent = (Component) e.getSource();
    SwingUtilities.convertPointFromScreen(mouseLocation, 
draggedComponent.getParent());
    draggedComponent.setLocation(mouseLocation);
} 
```

但是被拖动对象的坐标可以相对于它所在的容器来设置。因此，当鼠标移动到另一个容器时，需要在新的容器中添加组件，计算新的坐标等。这种方法不是很美观，扩展性也不是很好，所以我建议使用 GlassPane 来显示被拖动的对象。

该算法如下所示：

*   单击对象。

*   获取对象的屏幕截图（请参阅[如何制作屏幕截图](http://jazzteam.org/en/technical-articles/frequently-asked-questions-during-java-applet-development/#question4)）。隐藏原始对象。

*   根据鼠标的坐标在 glassPane 上绘制对象的屏幕截图。

*   当您移动鼠标时，您需要根据新坐标重新绘制屏幕截图。

*   当您释放鼠标时，您需要将对象放在光标所在的容器上。

*   显示原始对象。

使用这种方法，我们对放置光标以进行 Drop 的容器没有任何依赖，相应地，对象可以在任何地方“Dropped”。

具有透明效果的 GlassPane：

```
public class GhostGlassPane extends JPanel {
    private final AlphaComposite composite;
    private BufferedImage ghostImage = null;
    private Point location = new Point(0, 0);

    public GhostGlassPane() {
        setOpaque(false);
        composite = AlphaComposite.getInstance(AlphaComposite.
SRC_OVER, 0.7f);
}
public void paintComponent(Graphics g) {

    if (ghostImage == null)
        return;

    Graphics2D g2 = (Graphics2D) g;
    g2.setComposite(composite);
    g2.drawImage(ghostImage, (int) (location.getX()),
(int) (location.getY()), null);

    }
} 
```

在这个回复中，只给出了实现的概念。

此信息摘自我的文章：[Java 小程序开发过程中的常见问题](http://jazzteam.org/en/technical-articles/frequently-asked-questions-during-java-applet-development/)

# windows - 如何获取不同语言的管理员组名称

> ID：14499540
> 
> 赞同：8
> 
> 时间：2013-01-24T10:51:02.257
> 
> 标签：windows, vbscript, inno-setup, administrator

我正在使用 Inno Setup 开发安装程序，我需要创建一个具有管理员权限的 windows 用户，我可以使用以下命令正常执行此操作：`net localgroup administrators USER /add`

但是有一个问题......如果我在非英语 Windows 上执行此操作，“管理员”组将不存在，即：如果安装在 pt-br Windows 上，它将被称为“管理员”。

我想知道是否有一个存储管理员组名称的 Windows 变量。

请注意，使用 Inno Setup 我可以使用 vbs 脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T13:20:20.547

我对 Inno Setup 做了一个功能，我想它也适用于 Delphi。

SID 的完整列表：http: [//support.microsoft.com/kb/243330/en](http://support.microsoft.com/kb/243330/en)

谢谢@nlsbshtr

```
function GetNameBySID(const SID: string): string;
var
  WbemLocator, WbemServices, WbemService, WbemObjectSets: Variant;
begin;
  Result := '';
  WbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  WbemServices := WbemLocator.ConnectServer('localhost', 'root\CIMV2');
  WbemObjectSet := WbemServices.ExecQuery('SELECT Name FROM Win32_Group where SID="'+SID+'"');
  if not VarIsNull(WbemObjectSet) and (WbemObjectSet.Count > 0) then
  begin        
    WbemObject := WbemObjectSet.ItemIndex(0);
    if not VarIsNull(WbemObject) then
      Result := WbemObject.Name;      
  end;
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T10:54:56.607

本地管理员组的 SID 应始终为`S-1-5-32-544`.

在这里查看所有可用的标识符：

[https://support.microsoft.com/en-us/help/243330](https://support.microsoft.com/en-us/help/243330)

以下文字是从链接的文章中复制粘贴的

* * *

以下是众所周知的 SID：

```
SID: S-1-0
Name: Null Authority
Description: An identifier authority.
SID: S-1-0-0
Name: Nobody
Description: No security principal.
SID: S-1-1
Name: World Authority
Description: An identifier authority.
SID: S-1-1-0
Name: Everyone
Description: A group that includes all users, even anonymous users and guests. Membership is controlled by the operating system.

Note By default, the Everyone group no longer includes anonymous users on a computer that is running Windows XP Service Pack 2 (SP2).
SID: S-1-2
Name: Local Authority
Description: An identifier authority.
SID: S-1-2-0

Name: Local

Description: A group that includes all users who have logged on locally.
SID: S-1-2-1

Name: Console Logon

Description: A group that includes users who are logged on to the physical console.

Note Added in Windows 7 and Windows Server 2008 R2
SID: S-1-3
Name: Creator Authority
Description: An identifier authority.
SID: S-1-3-0
Name: Creator Owner
Description: A placeholder in an inheritable access control entry (ACE). When the ACE is inherited, the system replaces this SID with the SID for the object's creator.
SID: S-1-3-1
Name: Creator Group
Description: A placeholder in an inheritable ACE. When the ACE is inherited, the system replaces this SID with the SID for the primary group of the object's creator. The primary group is used only by the POSIX subsystem.
SID: S-1-3-2
Name: Creator Owner Server
Description: This SID is not used in Windows 2000.
SID: S-1-3-3
Name: Creator Group Server
Description: This SID is not used in Windows 2000.
SID: S-1-3-4 Name: Owner Rights

Description: A group that represents the current owner of the object. When an ACE that carries this SID is applied to an object, the system ignores the implicit READ_CONTROL and WRITE_DAC permissions for the object owner.
SID: S-1-5-80-0
Name: All Services
Description: A group that includes all service processes configured on the system. Membership is controlled by the operating system.

Note Added in Windows Vista and Windows Server 2008
SID: S-1-4
Name: Non-unique Authority
Description: An identifier authority.
SID: S-1-5
Name: NT Authority
Description: An identifier authority.
SID: S-1-5-1
Name: Dialup
Description: A group that includes all users who have logged on through a dial-up connection. Membership is controlled by the operating system.
SID: S-1-5-2
Name: Network
Description: A group that includes all users that have logged on through a network connection. Membership is controlled by the operating system.
SID: S-1-5-3
Name: Batch
Description: A group that includes all users that have logged on through a batch queue facility. Membership is controlled by the operating system.
SID: S-1-5-4
Name: Interactive
Description: A group that includes all users that have logged on interactively. Membership is controlled by the operating system.
SID: S-1-5-5-X-Y
Name: Logon Session
Description: A logon session. The X and Y values for these SIDs are different for each session.
SID: S-1-5-6
Name: Service
Description: A group that includes all security principals that have logged on as a service. Membership is controlled by the operating system.
SID: S-1-5-7
Name: Anonymous
Description: A group that includes all users that have logged on anonymously. Membership is controlled by the operating system.
SID: S-1-5-8
Name: Proxy
Description: This SID is not used in Windows 2000.
SID: S-1-5-9
Name: Enterprise Domain Controllers
Description: A group that includes all domain controllers in a forest that uses an Active Directory directory service. Membership is controlled by the operating system.
SID: S-1-5-10
Name: Principal Self
Description: A placeholder in an inheritable ACE on an account object or group object in Active Directory. When the ACE is inherited, the system replaces this SID with the SID for the security principal who holds the account.
SID: S-1-5-11
Name: Authenticated Users
Description: A group that includes all users whose identities were authenticated when they logged on. Membership is controlled by the operating system.
SID: S-1-5-12
Name: Restricted Code
Description: This SID is reserved for future use.
SID: S-1-5-13
Name: Terminal Server Users
Description: A group that includes all users that have logged on to a Terminal Services server. Membership is controlled by the operating system.
SID: S-1-5-14
Name: Remote Interactive Logon
Description: A group that includes all users who have logged on through a terminal services logon.
SID: S-1-5-15
Name: This Organization
Description: A group that includes all users from the same organization. Only included with AD accounts and only added by a Windows Server 2003 or later domain controller.
SID: S-1-5-17
Name: This Organization
Description: An account that is used by the default Internet Information Services (IIS) user.
SID: S-1-5-18
Name: Local System
Description: A service account that is used by the operating system.
SID: S-1-5-19
Name: NT Authority
Description: Local Service
SID: S-1-5-20
Name: NT Authority
Description: Network Service
SID: S-1-5-21domain-500
Name: Administrator
Description: A user account for the system administrator. By default, it is the only user account that is given full control over the system.
SID: S-1-5-21domain-501
Name: Guest
Description: A user account for people who do not have individual accounts. This user account does not require a password. By default, the Guest account is disabled.
SID: S-1-5-21domain-502
Name: KRBTGT
Description: A service account that is used by the Key Distribution Center (KDC) service.
SID: S-1-5-21domain-512
Name: Domain Admins
Description: A global group whose members are authorized to administer the domain. By default, the Domain Admins group is a member of the Administrators group on all computers that have joined a domain, including the domain controllers. Domain Admins is the default owner of any object that is created by any member of the group.
SID: S-1-5-21domain-513
Name: Domain Users
Description: A global group that, by default, includes all user accounts in a domain. When you create a user account in a domain, it is added to this group by default.
SID: S-1-5-21domain-514
Name: Domain Guests
Description: A global group that, by default, has only one member, the domain's built-in Guest account.
SID: S-1-5-21domain-515
Name: Domain Computers
Description: A global group that includes all clients and servers that have joined the domain.
SID: S-1-5-21domain-516
Name: Domain Controllers
Description: A global group that includes all domain controllers in the domain. New domain controllers are added to this group by default.
SID: S-1-5-21domain-517
Name: Cert Publishers
Description: A global group that includes all computers that are running an enterprise certification authority. Cert Publishers are authorized to publish certificates for User objects in Active Directory.
SID: S-1-5-21root domain-518
Name: Schema Admins
Description: A universal group in a native-mode domain; a global group in a mixed-mode domain. The group is authorized to make schema changes in Active Directory. By default, the only member of the group is the Administrator account for the forest root domain.
SID: S-1-5-21root domain-519
Name: Enterprise Admins
Description: A universal group in a native-mode domain; a global group in a mixed-mode domain. The group is authorized to make forest-wide changes in Active Directory, such as adding child domains. By default, the only member of the group is the Administrator account for the forest root domain.
SID: S-1-5-21domain-520
Name: Group Policy Creator Owners
Description: A global group that is authorized to create new Group Policy objects in Active Directory. By default, the only member of the group is Administrator.
SID: S-1-5-21domain-526
Name: Key Admins
Description: A security group. The intention for this group is to have delegated write access on the msdsKeyCredentialLink attribute only. The group is intended for use in scenarios where trusted external authorities (for example, Active Directory Federated Services) are responsible for modifying this attribute. Only trusted administrators should be made a member of this group.
SID: S-1-5-21domain-527
Name: Enterprise Key Admins
Description: A security group. The intention for this group is to have delegated write access on the msdsKeyCredentialLink attribute only. The group is intended for use in scenarios where trusted external authorities (for example, Active Directory Federated Services) are responsible for modifying this attribute. Only trusted administrators should be made a member of this group.
SID: S-1-5-21domain-553
Name: RAS and IAS Servers
Description: A domain local group. By default, this group has no members. Servers in this group have Read Account Restrictions and Read Logon Information access to User objects in the Active Directory domain local group.
SID: S-1-5-32-544
Name: Administrators
Description: A built-in group. After the initial installation of the operating system, the only member of the group is the Administrator account. When a computer joins a domain, the Domain Admins group is added to the Administrators group. When a server becomes a domain controller, the Enterprise Admins group also is added to the Administrators group.
SID: S-1-5-32-545
Name: Users
Description: A built-in group. After the initial installation of the operating system, the only member is the Authenticated Users group. When a computer joins a domain, the Domain Users group is added to the Users group on the computer.
SID: S-1-5-32-546
Name: Guests
Description: A built-in group. By default, the only member is the Guest account. The Guests group allows occasional or one-time users to log on with limited privileges to a computer's built-in Guest account.
SID: S-1-5-32-547
Name: Power Users
Description: A built-in group. By default, the group has no members. Power users can create local users and groups; modify and delete accounts that they have created; and remove users from the Power Users, Users, and Guests groups. Power users also can install programs; create, manage, and delete local printers; and create and delete file shares.
SID: S-1-5-32-548
Name: Account Operators
Description: A built-in group that exists only on domain controllers. By default, the group has no members. By default, Account Operators have permission to create, modify, and delete accounts for users, groups, and computers in all containers and organizational units of Active Directory except the Builtin container and the Domain Controllers OU. Account Operators do not have permission to modify the Administrators and Domain Admins groups, nor do they have permission to modify the accounts for members of those groups.
SID: S-1-5-32-549
Name: Server Operators
Description: A built-in group that exists only on domain controllers. By default, the group has no members. Server Operators can log on to a server interactively; create and delete network shares; start and stop services; back up and restore files; format the hard disk of the computer; and shut down the computer.
SID: S-1-5-32-550
Name: Print Operators
Description: A built-in group that exists only on domain controllers. By default, the only member is the Domain Users group. Print Operators can manage printers and document queues.
SID: S-1-5-32-551
Name: Backup Operators
Description: A built-in group. By default, the group has no members. Backup Operators can back up and restore all files on a computer, regardless of the permissions that protect those files. Backup Operators also can log on to the computer and shut it down.
SID: S-1-5-32-552
Name: Replicators
Description: A built-in group that is used by the File Replication service on domain controllers. By default, the group has no members. Do not add users to this group.
SID: S-1-5-64-10
Name: NTLM Authentication
Description: A SID that is used when the NTLM authentication package authenticated the client
SID: S-1-5-64-14
Name: SChannel Authentication
Description: A SID that is used when the SChannel authentication package authenticated the client.
SID: S-1-5-64-21
Name: Digest Authentication
Description: A SID that is used when the Digest authentication package authenticated the client.
SID: S-1-5-80
Name: NT Service
Description: An NT Service account prefix
SID: S-1-5-80-0
SID S-1-5-80-0 = NT SERVICES\ALL SERVICES
Name: All Services
Description: A group that includes all service processes that are configured on the system. Membership is controlled by the operating system.

Note Added in Windows Server 2008 R2
SID: S-1-5-83-0
Name: NT VIRTUAL MACHINE\Virtual Machines
Description: A built-in group. The group is created when the Hyper-V role is installed. Membership in the group is maintained by the Hyper-V Management Service (VMMS). This group requires the "Create Symbolic Links" right (SeCreateSymbolicLinkPrivilege), and also the "Log on as a Service" right (SeServiceLogonRight).

Note Added in Windows 8 and Windows Server 2012
SID: S-1-16-0
Name: Untrusted Mandatory Level
Description: An untrusted integrity level. Note Added in Windows Vista and Windows Server 2008

Note Added in Windows Vista and Windows Server 2008
SID: S-1-16-4096
Name: Low Mandatory Level
Description: A low integrity level.

Note Added in Windows Vista and Windows Server 2008
SID: S-1-16-8192
Name: Medium Mandatory Level
Description: A medium integrity level.

Note Added in Windows Vista and Windows Server 2008
SID: S-1-16-8448
Name: Medium Plus Mandatory Level
Description: A medium plus integrity level.

Note Added in Windows Vista and Windows Server 2008
SID: S-1-16-12288
Name: High Mandatory Level
Description: A high integrity level.

Note Added in Windows Vista and Windows Server 2008
SID: S-1-16-16384
Name: System Mandatory Level
Description: A system integrity level.

Note Added in Windows Vista and Windows Server 2008
SID: S-1-16-20480
Name: Protected Process Mandatory Level
Description: A protected-process integrity level.

Note Added in Windows Vista and Windows Server 2008
SID: S-1-16-28672
Name: Secure Process Mandatory Level
Description: A secure process integrity level.

Note Added in Windows Vista and Windows Server 2008 
```

在 Windows Server 2003 域控制器成为主域控制器 (PDC) 操作主机角色持有者之前，以下组显示为 SID。“操作主机”也称为灵活单主机操作 (FSMO)。将 Windows Server 2003 域控制器添加到域时会创建以下附加内置组：

```
SID: S-1-5-32-554
Name: BUILTIN\Pre-Windows 2000 Compatible Access
Description: An alias added by Windows 2000\. A backward compatibility group which allows read access on all users and groups in the domain.
SID: S-1-5-32-555
Name: BUILTIN\Remote Desktop Users
Description: An alias. Members in this group are granted the right to logon remotely.
SID: S-1-5-32-556
Name: BUILTIN\Network Configuration Operators
Description: An alias. Members in this group can have some administrative privileges to manage configuration of networking features.
SID: S-1-5-32-557
Name: BUILTIN\Incoming Forest Trust Builders
Description: An alias. Members of this group can create incoming, one-way trusts to this forest.
SID: S-1-5-32-558
Name: BUILTIN\Performance Monitor Users
Description: An alias. Members of this group have remote access to monitor this computer.
SID: S-1-5-32-559
Name: BUILTIN\Performance Log Users
Description: An alias. Members of this group have remote access to schedule logging of performance counters on this computer.
SID: S-1-5-32-560
Name: BUILTIN\Windows Authorization Access Group
Description: An alias. Members of this group have access to the computed tokenGroupsGlobalAndUniversal attribute on User objects.
SID: S-1-5-32-561
Name: BUILTIN\Terminal Server License Servers
Description: An alias. A group for Terminal Server License Servers. When Windows Server 2003 Service Pack 1 is installed, a new local group is created.
SID: S-1-5-32-562
Name: BUILTIN\Distributed COM Users
Description: An alias. A group for COM to provide computerwide access controls that govern access to all call, activation, or launch requests on the computer. 
```

在 Windows Server 2008 或 Windows Server 2008 R2 域控制器成为主域控制器 (PDC) 操作主机角色持有者之前，以下组显示为 SID。“操作主机”也称为灵活单主机操作 (FSMO)。将 Windows Server 2008 或 Windows Server 2008 R2 域控制器添加到域时，会创建以下附加内置组：

```
SID: S-1-5- 21domain -498
Name: Enterprise Read-only Domain Controllers
Description: A Universal group. Members of this group are Read-Only Domain Controllers in the enterprise
SID: S-1-5- 21domain -521
Name: Read-only Domain Controllers
Description: A Global group. Members of this group are Read-Only Domain Controllers in the domain
SID: S-1-5-32-569
Name: BUILTIN\Cryptographic Operators
Description: A Builtin Local group. Members are authorized to perform cryptographic operations.
SID: S-1-5-21 domain -571
Name: Allowed RODC Password Replication Group
Description: A Domain Local group. Members in this group can have their passwords replicated to all read-only domain controllers in the domain.
SID: S-1-5- 21 domain -572
Name: Denied RODC Password Replication Group
Description: A Domain Local group. Members in this group cannot have their passwords replicated to any read-only domain controllers in the domain
SID: S-1-5-32-573
Name: BUILTIN\Event Log Readers
Description: A Builtin Local group. Members of this group can read event logs from local machine.
SID: S-1-5-32-574
Name: BUILTIN\Certificate Service DCOM Access
Description: A Builtin Local group. Members of this group are allowed to connect to Certification Authorities in the enterprise. 
```

在 Windows Server 2012 域控制器成为主域控制器 (PDC) 操作主机角色持有者之前，以下组显示为 SID。“操作主机”也称为灵活单主机操作 (FSMO)。将 Windows Server 2012 域控制器添加到域时会创建以下附加内置组：

```
SID: S-1-5-21-domain-522
Name: Cloneable Domain Controllers
Description: A Global group. Members of this group that are domain controllers may be cloned.
SID: S-1-5-32-575
Name: BUILTIN\RDS Remote Access Servers
Description: A Builtin Local group. Servers in this group enable users of RemoteApp programs and personal virtual desktops access to these resources. In Internet-facing deployments, these servers are typically deployed in an edge network. This group needs to be populated on servers running RD Connection Broker. RD Gateway servers and RD Web Access servers used in the deployment need to be in this group.
SID: S-1-5-32-576
Name: BUILTIN\RDS Endpoint Servers
Description: A Builtin Local group. Servers in this group run virtual machines and host sessions where users RemoteApp programs and personal virtual desktops run. This group needs to be populated on servers running RD Connection Broker. RD Session Host servers and RD Virtualization Host servers used in the deployment need to be in this group.
SID: S-1-5-32-577
Name: BUILTIN\RDS Management Servers
Description: A Builtin Local group. Servers in this group can perform routine administrative actions on servers running Remote Desktop Services. This group needs to be populated on all servers in a Remote Desktop Services deployment. The servers running the RDS Central Management service must be included in this group.
SID: S-1-5-32-578
Name: BUILTIN\Hyper-V Administrators
Description: A Builtin Local group. Members of this group have complete and unrestricted access to all features of Hyper-V.
SID: S-1-5-32-579
Name: BUILTIN\Access Control Assistance Operators
Description: A Builtin Local group. Members of this group can remotely query authorization attributes and permissions for resources on this computer.
SID: S-1-5-32-580
Name: BUILTIN\Remote Management Users
Description: A Builtin Local group. Members of this group can access WMI resources over management protocols (such as WS-Management via the Windows Remote Management service). This applies only to WMI namespaces that grant access to the user. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-25T13:21:58.450

```
[CmdletBinding()]
Param(
    [Parameter(Mandatory=$True)][string]$acc
 )
echo "User $acc will be added"
$group = Gwmi win32_group -Filter "Domain='$env:computername' and SID='S-1-5-32-544'" 
$adm = $group.Name

net localgroup $adm $acc /add 
```

我今天也遇到了这个问题。我编写了一个干净快速的 Powershell 脚本，也许有人也可以使用它！

盎司

# javascript - 按优先级顺序响应的两列面板布局

> ID：14499551
> 
> 赞同：0
> 
> 时间：2013-01-24T10:51:48.137
> 
> 标签：javascript, jquery, html, css, positioning

我一直在研究一种在主页上显示面板的方法，该页面是响应式的，并且将从所有面板的 100% 宽和堆叠开始，然后在某个断点处，面板将分成两列。

我正在进行的工作在这里[http://codepen.io/charge-valtech/pen/aIEGf](http://codepen.io/charge-valtech/pen/aIEGf)

这适用于从左到右按优先级顺序排列的面板。然而问题是这个页面需要是动态的，所以任何面板都可以“关闭”。因此，如果您摆脱了第三个面板，由于浮动的工作方式，第四个面板会尝试向右移动，即使已指定 float: left。

使用清除将其保持在左侧，但是第三个面板的位置会有一个间隙......

我希望这是有道理的，并且只是对其他人如何解决这个问题感兴趣。我在想 JavaScript 可能是要走的路，但真的不知道如何去检测是否有可用的空白。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:48:34.023

我想我会为此分享我的解决方案，因为砌体对此有点矫枉过正，并且没有像我希望的那样干净利落。

我的 css left-widget 和 right-widget 中有两个类，然后使用网格系统设置它们的宽度和浮动，这基本上使它们向左浮动和向右浮动以及 49.something% 宽度。

默认情况下，我为所有小部件提供 left-widget 类，然后使用一些 jquery 执行此操作：

```
$('.left-widget').each(function (index, value) {
                var widgetPosition = $(this).position().left;
                if (widgetPosition >= 30) {
                    $(this).removeClass('left-widget').addClass('right-widget');
                }
            });
            $('.right-widget').each(function (index, value) {
                var widgetPosition = $(this).position().left;
                if (widgetPosition <= 30) {
                    $(this).removeClass('right-widget').addClass('left-widget');
                }
            }); 
```

现在，这正是我想要它做的，如果它们合适的话，把小部件贴在右边。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T12:17:26.983

使用 CSS 媒体查询：

```
@media (max-width: 1000px) {
   #box-js {display:none}
} 
```

`#box-js`仅当屏幕小于 1000px 时才会执行CSS 规则。

# mysql - 计算多对多关联记录

> ID：14499558
> 
> 赞同：1
> 
> 时间：2013-01-24T10:52:24.113
> 
> 标签：mysql, sql, ruby-on-rails

`words`我在和之间有多对多的关联`definitions`。

```
words:
+-----------------+--------------+------+-----+---------+----------------+
| Field           | Type         | Null | Key | Default | Extra          |
+-----------------+--------------+------+-----+---------+----------------+
| id              | int(11)      | NO   | PRI | NULL    | auto_increment |
+-----------------+--------------+------+-----+---------+----------------+

definitions:
+-------------------+--------------+------+-----+---------+----------------+
| Field             | Type         | Null | Key | Default | Extra          |
+-------------------+--------------+------+-----+---------+----------------+
| id                | int(11)      | NO   | PRI | NULL    | auto_increment |
| language_id       | int(11)      | YES  | MUL | NULL    |                |
+-------------------+--------------+------+-----+---------+----------------+

definitions_words:
+---------------+---------+------+-----+---------+-------+
| Field         | Type    | Null | Key | Default | Extra |
+---------------+---------+------+-----+---------+-------+
| definition_id | int(11) | NO   | PRI | NULL    |       |
| word_id       | int(11) | NO   | PRI | NULL    |       |
+---------------+---------+------+-----+---------+-------+ 
```

我想获得所有与 . 定义完全相同的单词记录`language_id = 1`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:41:32.143

我认为用 SQL 表达这一点的最简单方法是使用`in`：

```
select *
from words
where id in (select word_id
             from word_definitions
             where language_id = 1
             having count(*) = 1
            ) 
```

但是，`in`子查询在 MySQL 中并不总是有效地工作。它可以用一个`exists`子句代替：

```
select *
from words w
where exists (select 1
              from word_definitions wd
              where language_id = 1
              having count(*) = 1 and wd.word_id = w.id
             ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:37:33.763

```
SELECT  a.ID, COUNT(*) totalRecordCount
FROM    words a
        INNER JOIN definition_words b
            ON a.ID = b.word_ID
        INNER JOIN definitions c
            ON b.definition_id = c.ID
        INNER JOIN
        (
            SELECT  id,
                    SUM(language = 1) totalCount
            FROM    definitions
            GROUP   BY id
        ) d ON c.ID = d.ID AND 
               d.TotalCount = 1
GROUP   BY a.ID 
```

# php - 如何覆盖 Magento 中的类别删除方法

> ID：14499559
> 
> 赞同：0
> 
> 时间：2013-01-24T10:52:25.673
> 
> 标签：php, magento, magento-1.7

删除类别时，我需要运行一些 SQL 来清除 Magento 中的一些自定义表。考虑到这一点，我一直在关注此处列出的示例：[Magento - 覆盖核心文件](http://prattski.com/2010/06/24/magento-overriding-core-files-blocks-models-resources-controllers/)

我已将其输入到我的 config.xml 中：

```
<global>
    <models>
        <catalog>
            <rewrite>
                <category_api>MyCompany_MyModule_Model_Catalog_Category_Apis</category_api>
            </rewrite>
        </catalog>                      
    </models>
</global> 
```

然后我创建了文件结构：

```
MyCompany
-> MyModule
  -> Model
    ->Catalog
      ->Category
        ->Api.php 
```

在 Api.php 文件中，我有以下内容：

```
class MyCompany_MyModule_Model_Catalog_Category_Api extends Mage_Catalog_Model_Category_Api
{
    public function delete($categoryId)
    {
        Mage::log('I have overidden deletion of: ' . $categoryId);

        return true;
    }

} 
```

使用此设置时，system.log 中没有任何内容，所以我认为我做错了什么。

**编辑**：

将我的 XML 更改为`<category> </category>`似乎使它包含我的文件，因为我现在收到一个错误：

```
Fatal error: Call to a member function setStoreId() on a non-object in C:\xampp\htdocs\magento\app\code\core\Mage\Adminhtml\controllers\Catalog\CategoryController.php on line 52 
```

覆盖课程时我需要做一些特别的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:02:45.357

创建一个观察者来捕捉事件不是更好吗`catalog_category_delete_after`？使用事件优于功能覆盖，并且更灵活。由于您的删除过程不会更改 catalog_category 删除但会为其添加更多功能，因此使用事件似乎是更好的选择

# javascript - jQuery ajax：在回调之前执行数据处理

> ID：14499565
> 
> 赞同：0
> 
> 时间：2013-01-24T10:52:41.680
> 
> 标签：javascript, jquery, callback, promise

我正在编写一个库来访问来自服务器的数据，并将格式化的数据返回给我的函数的使用者。这是我想要的一个例子：

```
// my code
var model = function () {
    return $.ajax(myRequest).done(function (rawData) {
        return treatment(data);
    });
}

// client code
var useModel = function () {
    var modelPromise = model();
    modelPromise.done(function (formattedData) { // consume this result })
} 
```

其中 formattedData 是我第一次完成回调的结果，而不是 rawData。

你有什么想法？

谢谢

R。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:35:47.720

里吉斯，

jQuery 的[.then()](http://api.jquery.com/deferred.then/)文档说：

> 从 jQuery 1.8 开始， deferred.then() 方法返回一个新的 Promise，它可以通过函数过滤 deferred 的状态和值，替换现在不推荐使用的 deferred.pipe() 方法。

第二个示例`.then()`类似于您想要的（尽管不涉及 ajax）。

据我所知，对代码的必要更改非常少：

```
// my code
var model = function () {
    return $.ajax(myRequest).then(function (rawData) {
        return treatment(rawData);
    });
}

// client code
var useModel = function () {
    var modelPromise = model();
    modelPromise.done(function (formattedData) { // consume this result })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:40:01.017

里吉斯，

我非常喜欢[甜菜根的回答](https://stackoverflow.com/a/14515968/320399)。这是我在尝试自己理解这个概念时所做的一个示例：[Multiple asynchronous requests with jQuery](http://jsfiddle.net/b_long/HCxfU/)。

来自 jsFiddle 的来源：

```
var logIt = function (msg) {
    console.log(((new Date()).toLocaleTimeString()) + ": " + msg);
}, pauseBrowser = function (ms) {
    ms += new Date().getTime();
    while (new Date() < ms) {}
}, dataForService1 = {
    json: JSON.stringify({
        serviceNumber: 1,
        description: "Service #1's data",
        pauseAfterward: 3 // for pausing the client-side
    }),
    delay: 0 // delay on the server-side
}, dataForService2 = {
    json: JSON.stringify({
        serviceNumber: 2,
        description: "Service #2's data",
        pauseAfterward: 1
    }),
    delay: 0 // delay on the server-side
};

function getAjaxConfiguration() {
    return {
        type: 'POST',
        url: '/echo/json/',
        success: function (data) {
            var msg = "Handling service #" + data.serviceNumber + "'s success";
            logIt(msg);
            logIt(JSON.stringify(data));
        }
    };
}

var async2 = function () {
    var ajaxConfig = $.extend(getAjaxConfiguration(), {
        data: dataForService2
    });
    return $.ajax(ajaxConfig);
};

var async1 = function () {
    var ajaxConfig = $.extend(getAjaxConfiguration(), {
        data: dataForService1
    });
    return $.ajax(ajaxConfig);
};

var do2AsynchronousFunctions = function () {
    var dfd = new $.Deferred();

    async1()
    .then(function (async1ResponseData) {
        logIt("async1's then() method called, waiting " + async1ResponseData.pauseAfterward + " seconds");
        pauseBrowser(async1ResponseData.pauseAfterward * 1000);
    })
    .done(function (a1d) {
        logIt("async1's done() method was called");
        return async2()
        .then(function (async2ResponseData) {
            logIt("async2's then() method called, waiting " + async2ResponseData.pauseAfterward + " seconds");
            pauseBrowser(async2ResponseData.pauseAfterward * 1000);
        })
        .done(function (a2d) {
            logIt("async2's done() method was called");
            dfd.resolve("final return value");
        });
    });

    return dfd.promise();
};

$.when(do2AsynchronousFunctions()).done(function (retVal) {
    logIt('Everything is now done! Final return value: ' + JSON.stringify(retVal));
}); 
```

# kendo-ui - Kendo HierarchicalDataSource

> ID：14499567
> 
> 赞同：0
> 
> 时间：2013-01-24T10:52:41.367
> 
> 标签：kendo-ui, kendo-treeview

我创建了一个剑道 HierarchicalDataSource

```
var fontidatasource = new kendo.data.HierarchicalDataSource({
data: vm.get("Source")
}); 
```

我想在其中搜索已检查的项目。

我曾尝试使用gatherStates 功能（剑道文档），但没有功能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:14:11.220

恐怕 HierarchicalDataSources 没有这样的过滤选项。

即使它说 TreeView 它适用于此处，您也可以尝试此[答案，因为数据模型是相同的。](https://stackoverflow.com/a/12475871/1802671)

# c# - 如何从 windows8 商店应用程序中的字节数组中获取流

> ID：14499570
> 
> 赞同：1
> 
> 时间：2013-01-24T10:52:43.730
> 
> 标签：c#, .net, windows-8, windows-store-apps

我一直在尝试使用以下代码从 Metro 风格应用程序中的字节数组中获取流。

```
InMemoryRandomAccessStream memoryStream = new InMemoryRandomAccessStream();
memoryStream.AsStreamForWrite().Write(byteArray, 0, byteArray.Length);
memoryStream.Seek(0); 
```

它执行时没有错误，但流大小为零 (0)。谁能告诉我为什么它的大小为零？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:35:24.410

您可以使用[DataWriter](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.datawriter.aspx)和[DataReader](http://msdn.microsoft.com/en-us/library/windows/apps/br208119.aspx)类。例如 ...

```
// put bytes into the stream
var ms = new InMemoryRandomAccessStream();
var dw = new Windows.Storage.Streams.DataWriter(ms);
dw.WriteBytes(new byte[] { 0x00, 0x01, 0x02 });
await dw.StoreAsync();

// read them out
ms.Seek(0);
byte[] ob = new byte[ms.Size];
var dr = new Windows.Storage.Streams.DataReader(ms);
await dr.LoadAsync((uint)ms.Size);
dr.ReadBytes(ob); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:54:45.030

您还可以使用 BinaryWriter/BinaryReader 读写 byte[] 和 Streams。

```
 private Stream ConvertToStream(byte[] raw)
    {
        Stream streamOutput = new MemoryStream();
        using (BinaryWriter writer = new BinaryWriter(streamOutput))
        {
            writer.Write(raw);
        }
        return streamOutput;
    } 
```

另一种选择是使用 Marc Gravell 已经提到的内置扩展方法：

```
 private Stream ConvertToStream(byte[] raw)
    {
        return raw.AsBuffer().AsStream();
    } 
```

扩展方法用 [Security Critical] 注释，这可能表示以后的更改。但是，环顾四周后，我找不到有关安全代码注释的任何其他信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T20:49:28.040

我知道这是一个非常古老的问题，但是我今天自己遇到了这个问题并想通了，所以我将把它留给其他人。

我意识到如果流太小，则不会写入流。为了解决这个问题，我明确设置了流的长度，如下所示：

```
ms.AsStreamForWrite(imageBytes.Length).Write(imageBytes, 0, imageBytes.Length); 
```

这应该就是你所需要的。

# php - 从 DEEP 模型中检索 CakePHP 中几层深度的数据

> ID：14499571
> 
> 赞同：1
> 
> 时间：2013-01-24T10:52:46.107
> 
> 标签：php, cakephp, cakephp-2.0

长话短说，我的数据库设置如下：

分类`hasMany`主题

主题`belongsTo`类别

主题`hasMany`部分

部分`belongsTo`主题

节`hasMany`小节

小节`belongsTo`部分

在我的类别控制器中，我可以使用简单的查找查询轻松获取所有信息。但是，例如，在我的小节控制器中，我想做一个复杂的查找查询，例如：

```
$conditions = array(
        'Subsection.title' => $subsectionname,
        'Section.title' => $sectionname,
        'Topic.title' => $topicname,
        'Category.title => $categoryname
);

$subsection = $this->Subsection->find('first', array(
        'conditions' => $conditions, 
        'recursive' => 3,
)); 
```

但是，我只能通过这种方式从查询中获取有关 Subsection 和 Section 的数据。我可以通过使用调用来访问视图中子部分的类别，`$mysubsection['Section']['Topic']['Category']['title'];`但理想情况下，我希望在一次调用中完成所有过滤。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:13:46.227

想出了一个方法来做到这一点。具体来说，我想使用看起来非常漂亮的 URL，以便用户可以输入类似[http://example.com/aCategoryTitle/aTopicTitle/aSectionTitle/aSubsectionTitle](http://example.com/aCategoryTitle/aTopicTitle/aSectionTitle/aSubsectionTitle)之类的内容- 但需要验证此数据，以便该小节绝对属于正确的类别、主题等。

```
$conditions = array(
        'Subsection.title' => $subsectionname,
        'Section.title' => $sectionname,
    );

$subsection = $this->Subsection->find('all', array(
        'conditions' => $conditions, 
        'recursive' => 2,
    )); 
```

这是一个简单的查找调用，它匹配具有正确标题和节标题的所有小节。

```
if (!$subsection) {
        // nothing was returned
        $this->redirect(array('controller' => 'KnowledgeBase', 'action' => 'index'));
    } 
```

如果没有符合该条件的小节，则重定向用户。但是，仍然可能会发现多个具有相同部分标题的子部分。以以下 URL 为例：

[http://example.com/Cats/Feeding/Food/Meat](http://example.com/Cats/Feeding/Food/Meat)和[http://example.com/Dogs/Feeding/Food/Meat](http://example.com/Dogs/Feeding/Food/Meat)

通过这两个示例，将找到多个符合上述条件的小节。所以我们需要进行一些进一步的验证：

```
foreach ($subsection as $asubsection) {
        if (($asubsection['Section']['Topic']['Category']['title'] == $categoryname) &&
            ($asubsection['Section']['Topic']['title'] == $topicname) &&
            ($asubsection['Section']['title'] == $sectionname) &&
            ($asubsection['Subsection']['title'] == $subsectionname)) {
                // correct parameters
                // this variable can now be passed to the view
                $this->set('mysubsection', $asubsection);
            } else {
                // incorrect parameters in URL
                $this->redirect(array('controller' => 'KnowledgeBase'));
            }
    } 
```

这会循环遍历我们找到的所有 Subsections，并确保它们的标题以及它们所属的部分、主题和类别的标题与 URL 匹配（由 给出`$this->request->params`）。

可能不是最整洁的方法，但它可以工作，并且与我的路由很好地配合。总是很高兴接受任何进一步的建议，但现在这对我来说效果很好。

# javascript - 如何通过 Rally App SDK 获取登录用户

> ID：14499578
> 
> 赞同：1
> 
> 时间：2013-01-24T10:53:02.623
> 
> 标签：javascript, rally

[我使用它的App SDK](http://developer.help.rallydev.com/app-sdk)在 Rally 页面内创建了一个自定义 html 。现在我想获取当前登录用户的用户名。但我不知道该怎么做。

我注意到 Rally 提供了一些[Hangman 变量](http://developer.help.rallydev.com/hangman-variables)，当前用户名就是其中之一。但它似乎只有当我们将它作为某些 Rally API 的参数传递时才有意义。但是，我需要获取用户名并在我的 javascript 代码中使用它。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:05:39.083

hangman 变量在提供应用程序时被服务器视为简单搜索和替换，因此您可以将它们放在源中的任何位置。

```
var user = "__USER_NAME__"; 
```

当您的应用程序运行时，源代码如下所示：

```
var user = "vamcily"; 
```

在 SDK 2.0 中，这些刽子手仍然可用，但已弃用。您可以通过应用上下文获取有关当前用户的信息：

```
this.getContext().getUser(); 
```

# c - 如果为整数，则使用 sprintf 格式化没有小数位的浮点数

> ID：14499579
> 
> 赞同：3
> 
> 时间：2013-01-24T10:53:05.430
> 
> 标签：c, floating-point, printf

最初我使用带有浮点数的 sprintf 始终使用以下代码，小数点后 2 位：

```
static void MyFunc(char* buffer, const float percentage)
{
    sprintf(buffer, "%.2f", percentage);
} 
```

传递的百分比值之一是 0x419FFFFF 20（调试器视图），这会将 20.00 打印到缓冲区中。

我想在不是整数时显示 2 个小数位，例如

```
94.74 displayed as 94.74
94.7  displayed as 94.70
0     displayed as 0
5     displayed as 5
100   displayed as 100 
```

我目前正在使用以下代码：

```
static void MyFunc(char* buffer, const float percentage)
{
    int fractional_part = ((percentage - (int)percentage) * 100);
    if (0 == fractional_part)
    {
        sprintf(buffer, "%d", (int)percentage);
    }
    else
    {
        sprintf(buffer, "%.2f", percentage);
    }
} 
```

现在，如果通过了 0x419FFFFF 20（调试器视图），则小数部分计算为 99。我假设 fractional_part 的总和最终为 (19.99 - 19) * 100 = 99。为什么第一个示例不将 19.99 打印到缓冲区中？

我的问题的正确解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T11:35:07.030

你的问题是近似问题。

假设百分比为 19.999。然后`fractional_part`是 99，浮点分支将被调用。

但是用两位小数打印 19.999 会将其四舍五入为 20.00，*这*就是打印的内容。

您始终可以使用浮点分支，以获得一致的结果，然后在 '.' 处截断。如果它以 '.00' 出现。否则，您可能会冒着您的测试和`printf`的内部结构在某个时候发生冲突的风险。

```
#include <stdio.h>
#include <string.h>

int main(int argc, char **argv)
{
        float percentage = 19.999;
        char buffer[50];

        for (percentage = 19.990; percentage < 20.001; percentage += 0.001)
        {
                sprintf(buffer, "%.2f", percentage);
                char *p = strstr(buffer, ".00");
                if (p) *p = 0x0;
                printf("%.3f rendered as %.2f and becomes %s\n", percentage, percentage, buffer);
        }
        return 0;
}

19.990 rendered as 19.99 and becomes 19.99
19.991 rendered as 19.99 and becomes 19.99
19.992 rendered as 19.99 and becomes 19.99
19.993 rendered as 19.99 and becomes 19.99
19.994 rendered as 19.99 and becomes 19.99
19.995 rendered as 19.99 and becomes 19.99
19.996 rendered as 20.00 and becomes 20
19.997 rendered as 20.00 and becomes 20
19.998 rendered as 20.00 and becomes 20
19.999 rendered as 20.00 and becomes 20
20.000 rendered as 20.00 and becomes 20
20.001 rendered as 20.00 and becomes 20 
```

如果您不同意`printf`'s 的舍入策略，请使用`round()`on (a copy of)`percentage`并强制使用您自己的。或者，您也可以`sprintf()`使用三个数字，然后擦除第三个数字。

在您的特定情况下（请注意我的系统（Linux x86_64）如何呈现 0x419FFFFF）：

```
#include <stdio.h>
#include <string.h>
#include <stdint.h>

int main(int argc, char **argv)
{
        float percentage = 3.1415;
        char buffer[50];

        ((uint32_t *)(&percentage))[0] = 0x419FFFFF;

        sprintf(buffer, "%.2f", percentage);
        char *p = strstr(buffer, ".00");
        if (p) *p = 0x0;
        printf("%.15f rendered as %.2f and becomes %s\n", percentage, percentage, buffer);
        return 0;
}

19.999998092651367 rendered as 20.00 and becomes 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:27:14.733

您可以尝试使用`ceilf(f) == f`or `floorf(f) == f`which return `true`if `f`is an integer，而不是自己计算小数部分。另一种选择是`modf (float x, float *ipart)`从标准库或`fmod`数学中使用

# ember.js - Ember.js pre.4、RESTAdapter 和 hasMany 关系

> ID：14499582
> 
> 赞同：2
> 
> 时间：2013-01-24T10:53:18.113
> 
> 标签：ember.js, ember-data, ember-router

我正在尽最大努力在最新版本的 ember.js 和使用 RESTAdapter 的 ember-data 中找到和/或拼凑一个 hasMany/belongsTo 关系的工作 jsfiddle。到目前为止，我已经找到了@zgramana 的[pre.4 基线小提琴，](http://jsfiddle.net/gramana/ZAvWR/)它使新路由器经过了一些探索，还有一个[@sly7-7 小提琴](http://jsfiddle.net/Sly7/AtYv9/5/)，它利用了必要的 DS 关系，但为简洁起见绕过了路由器。

可以在这里找到我笨拙的 WIP 尝试将这些拼凑成一个有凝聚力的示例：http: [//jsfiddle.net/W2dE4/5/](http://jsfiddle.net/W2dE4/5/)。我显然是 ember.js 的新手，这个小提琴充满了错误，所以请原谅缺乏技能。

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.RESTAdapter.create({})
});

App.Post = DS.Model.extend({
    title: DS.attr('string'),
    post: DS.attr('string'),
    comments: DS.hasMany('App.Comment')
});

App.Comment = DS.Model.extend({
    post: DS.belongsTo('App.Post'),
    description: DS.attr('string')
});

store = App.__container__.lookup('store:');

store.load(App.Post, {
    id: 1,
    title: 'Post 1 Title',
    post: 'Body of post 1',
     comments:[1,2]
    },
       {
    id: 2,
    title: 'Post 2 Title',
    post: 'text of post 2',
     comments:[3,4]
},
{
    id: 3,
    title: 'Post 3 title',
    post: 'text of post3',
     comments:[5,6]
}
      );
store.load(App.Comment, {id: 1, description: "Great post!"},
       App.Comment, {id: 2, description: "Post sucks."},
       App.Comment, {id: 3, description: "Nice style"},
       App.Comment, {id: 4, description: "Horrible writing"},
       App.Comment, {id: 5, description: "Ember.js FTW"},
       App.Comment, {id: 6, description: "Get up get out n' get something"}

      ); 
```

如果有人能指出我正确的方向来让这个小提琴工作，或者链接到 pre.4 的工作示例与 RESTAdapter 和 hasMany 关系，我将永远感激你的慷慨。

非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:46:54.603

你的小提琴只有几个语法问题。我在这里用一个工作版本更新了它：http: [//jsfiddle.net/W2dE4/6/](http://jsfiddle.net/W2dE4/6/)

1）您没有正确加载商店。要在同一个调用中加载多个项目，您需要使用 loadMany，传入模型类和一个数组。

所以而不是：

```
store.load(App.Post, {
  id: 1,
  title: 'Post 1 Title',
  post: 'Body of post 1',
   comments:[1,2]
},
{
  id: 2,
  title: 'Post 2 Title',
  post: 'text of post 2',
  comments:[3,4]
},
{
  id: 3,
  title: 'Post 3 title',
  post: 'text of post3',
   comments:[5,6]
});

store.load(App.Comment, {id: 1, description: "Great post!"},
  App.Comment, {id: 2, description: "Post sucks."},
  App.Comment, {id: 3, description: "Nice style"},
  App.Comment, {id: 4, description: "Horrible writing"},
  App.Comment, {id: 5, description: "Ember.js FTW"},
  App.Comment, {id: 6, description: "Get up get out n' get something"}
); 
```

它应该是：

```
store.loadMany(App.Post, [
  { id: 1, title: 'Post 1 Title', post: 'Body of post 1', comments: [1,2] },
  { id: 2, title: 'Post 2 Title', post: 'text of post 2', comments: [3,4] },
  { id: 3, title: 'Post 3 title', post: 'text of post 3', comments: [5,6] }
]);

store.loadMany(App.Comment, [
  { id: 1, description: "Great post!" },
  { id: 2, description: "Post sucks." },
  { id: 3, description: "Nice style" },
  { id: 4, description: "Horrible writing" },
  { id: 5, description: "Ember.js FTW" },
  { id: 6, description: "Get up get out n' get something" }
]); 
```

2) 您对#each 的车把模板调用引用了错误的属性。

代替：

```
{{#each comment in post.comments}}
  {{comment.description}}
{{/each}} 
```

它应该是：

```
{{#each comment in content.comments}}
  {{comment.description}}
{{/each}} 
```

因为它是保存帖子数据的内容属性。

干杯!

# php - 我的 javascript 验证显示错误

> ID：14499587
> 
> 赞同：0
> 
> 时间：2013-01-24T10:53:35.417
> 
> 标签：php, javascript, validation

我正在尝试使用 php 中的 javascript 验证电子邮件和密码。但它向我显示错误：-

```
{"error": "Shell form does not validate{'html_initial_name': u'initial-js_lib', 'form': <mooshell.forms.ShellForm object at 0xa50990c>, 'html_name': 'js_lib', 'label': u'Js lib', 'field': <django.forms.models.ModelChoiceField object at 0xa69d64c>, 'help_text': '', 'name': 'js_lib'}"} 
```

我的 php 代码是

```
<form id="formLogin" name="formLogin" method="post" action=" " onsubmit="return validateForm()/">                   
                    <div class="divLogin">
                        <table>
                            <tr>
                                <td> Enter your Email: </td>
                                <td> <input type="text" name="txtEmail" required="required" autocomplete="off" /> </td>
                            </tr>

                            <tr>
                                <td> Enter your Password:  </td>
                                <td> <input type="password" name="pwd" minlength="6" required="required" autocomplete="off" /> </td>
                            </tr>               
                        </table>
                    </div>

                    <div>
                        <input type="submit" class="btnLogin" value="Go" style="display:inline-block; margin-left:350px; font-weight:bold; font-size:12px;" />
                    </div>

                </form> 
```

我的JS代码是

```
function validateForm(){
var checkemail=document.forms["formLogin"]["txtEmail"].value;
var atpos=checkemail.indexOf("@");
var dotpos=checkemail.lastIndexOf(".");
var checkpwd=document.forms["formLogin"]["pwd"].value;  
if (checkemail==null){
    document.getElementById("checkemail").innerHTML = "Please Enter Email Address";
    return false;
}
if (checkpwd==null)
{
    document.getElementById("checkpwd").innerHTML = "Please Enter Password";
    return false;
}

if (atpos<1 || dotpos<atpos+2 || dotpos+2>=checkemail.length)
  {
  alert("Not a valid e-mail address");
  return false;
  }

if (checkpwd==null || checkpwd=="")
  {
  alert("Password must be filled out");
  return false;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:58:34.533

在您的表单标签中，您在 onsubmit 函数调用后有一个额外的“/”

* * *

替换下一行

```
<form id="formLogin" name="formLogin" method="post" action=" " onsubmit="return validateForm()/"> 
```

和

```
<form id="formLogin" name="formLogin" method="post" action=" " onsubmit="return validateForm()"> 
```

还有一件事您的 html5“必需”验证器将首先响应，然后您的 validateForm 函数将被调用。

# java - Java 事件，特别是 javax.enterprise.event.fire() 的行为如何？

> ID：14499589
> 
> 赞同：6
> 
> 时间：2013-01-24T10:53:43.300
> 
> 标签：java, ejb, cdi

我有以下情况（在 JBoss AS6 和 AS7 上运行）：

*   具有预定方法的 Singleton EJB。
*   类型的注入事件`SomethingChangedEvent`

考虑以下示例：

```
@Singleton
public final class Scheduler {
    @Inject
    private Event<SomethingChangedEvent> event;

    @Schedule
    private void scheduleSomething() {
        event.fire(new SomethingChangedEvent());
    }
} 
```

我希望这个事件被添加到服务器上的某种队列中并由它分发。任何通过使用观察到此类事件的方法`@Observers`都将被通知。该`event.fire()`方法将立即返回。

但是，我面临以下问题：有时，该`event.fire()`方法需要两到三分钟才能返回，这对我的日程安排造成了严重破坏，因为假设它每十秒调用一次。

所以问题是：这怎么可能？被触发但没有人观察到的事件会发生什么？是否有可能溢出的队列？

问候，斯文

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T12:03:16.123

CDI 事件处理同步发生。实际上有一个[提议](https://issues.jboss.org/browse/CDI-31?_sscc=t)将异步处理模型包含在规范中，但仍在投票中。同时，有两种“强制”异步处理的方式：

1.  使用 JMS - 是的，这是一个杂项，因为它正在恢复到旧的 Java EE 技术。但它有效
2.  在生产者和观察者方法上使用[@Asynchronous](http://docs.oracle.com/javaee/6/tutorial/doc/gkkqg.html)方法，将这些方法调用拆分为单独的容器管理线程。

将第二种方法应用于您的代码示例：

```
@Singleton
public final class Scheduler {
    @Inject
    private Event<SomethingChangedEvent> event;

    @Asynchronous
    private void scheduleSomething() {
        event.fire(new SomethingChangedEvent());
    }
} 
```

# c++ - 臭名昭著的“ERROR_NETNAME_DELETED”错误可以被认为是一个错误吗？

> ID：14499593
> 
> 赞同：6
> 
> 时间：2013-01-24T10:53:45.860
> 
> 标签：c++, winapi, tcp, network-programming, iocp

我正在使用完成端口在 Windows NT 中编写一个 tcp 服务器来利用异步 I/O。我有一个 TcpSocket 类、一个 TcpServer 类和一些（虚拟函数）回调来在 I/O 操作完成时调用，例如在读取完成时调用 onRead()。我还有 onOpen() 用于建立连接的时间和 onEof() 用于关闭连接的时间，依此类推。我总是有一个等待读取的套接字，所以如果套接字有效地获取数据（读取将在大小 > 0 时完成）它调用 onRead()，而不是如果客户端*从客户*端关闭套接字（读取将是以size == 0完成）它调用onEof（），并且服务器知道客户端何时使用closesocket（server_socket）关闭套接字；从它的一边。

一切正常，但我注意到一件事：

当我调用 closesocket(client_socket); 在连接的服务器端，而不是客户端，（设置 linger {true, 0} 与否），挂起的读取将作为错误完成，也就是说，读取大小不仅是 == 0，但 GetLastError() 也会返回错误：64，或“ERROR_NETNAME_DELETED”。我在网上搜索了很多关于此的内容，但没有发现任何有趣的东西。

然后我问自己：但这是一个真正的错误吗？我的意思是，这真的可以被认为是一个错误吗？

问题是在服务器端，当我 closesocket(client_socket); 时会调用 onError() 回调；而不是 onEof()。所以我想到了这个：

如果我在收到此“ERROR_NETNAME_DELETED”“错误”时调用 onEof() 而不是 onError() 怎么办？这会引入一些错误或未定义的行为吗？让我问这个问题的另一个重要点是：

当我收到带有“ERROR_NETNAME_DELETED”的读取完成时，我检查了 OVERLAPPED 结构，特别是包含底层驱动程序的 NTSTATUS 错误代码的重叠->内部参数。如果我们看到 NTSTATUS 错误代码列表 [ [http://www.tenox.tc/links/ntstatus.html](http://www.tenox.tc/links/ntstatus.html) ] 我们可以清楚地看到 'ERROR_NETNAME_DELETED' 是由 NTSTATUS 0xC000013B 生成的，这是一个错误，但它是称为“STATUS_LOCAL_DISCONNECT”。好吧，它看起来不像是错误的名称。它看起来更像是“ERROR_IO_PENDING”，这是一个错误，但也是正确行为的一种状态。

那么如何检查 OVERLAPPED 结构的内部参数，当它 == 到 'STATUS_LOCAL_DISCONNECT' 时，会执行对 onEof() 回调的调用？会把事情搞砸吗？

另外，我不得不说，从服务器端，如果我在调用 closesocket(client_socket); 之前调用 DisconnectEx(); 我不会收到那个错误。但是我不想调用 DisconnectEx() 怎么办？例如，当服务器关闭并且不想等待所有 DisconnectEx() 完成时，只想关闭所有客户端的连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:14:25.903

如何处理错误情况完全取决于您。在您的情况下，这种错误情况完全是意料之中的，您将其视为预期情况是完全安全的。

这种性质的另一个示例是当您调用 API 函数但不知道要提供多大的缓冲区时。因此，您提供了一个希望足够大的缓冲区。但是，如果 API 调用失败，您将检查最后一个错误是否为`ERROR_INSUFFICIENT_BUFFER`. 这是预期的错误情况。然后，您可以使用更大的缓冲区重试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:31:52.597

如何处理错误情况取决于您，但问题是代码中潜在问题的标志（从逻辑错误到未定义的行为）。

最重要的一点是你不应该在`closesocket`. 你在EOF上*做什么？*当我们检测到 EOF 时，在我们这边是合乎逻辑的`closesocket`，但这是你不能在`ERROR_NETNAME_DELETED`处理程序中做的事情，因为`closesocket`已经发生并且句柄无效。

想象一下，如果挂起的读取在 之前完成（有可用的真实数据），并且您的应用程序在之后立即检测到它会发生什么，这*也是* `closesocket`有利可图*的* `closesocket`。您处理传入的数据并且...您是否使用相同的套接字句柄向客户端发送答案？您是否在该句柄上安排下一次阅读？这都是错的，没有人`ERROR_NETNAME_DELETED`可以告诉你。

如果在那个非常不幸的时刻，就在之前的那个非常不幸的时刻，挂起的读取以 EOF 完成会发生什么`closesocket`？如果您的常规`OnEof`回调被触发，并且该回调确实如此`closesocket`，那将再次出错。

`closesocket`如果在一个线程中完成，而另一个线程等待 I/O 完成，您描述的问题可能暗示更严重的问题。您确定在第一个线程正在调用时另一个线程没有调用`WSARecv`/吗？这是未定义的行为，即使 winsock 让它看起来好像大部分时间都在工作。`ReadFile``closesocket`

总而言之，*如果代码处理完成（或失败）读取不知道套接字句柄因为它被关闭而无用，它就不可能是正确的*。之后`closesocket`，等待挂起的 I/O 完成很有用，因为`OVERLAPPED`如果不这样做，您将无法重用结构；*但是处理这种*完成没有意义，就好像它发生在正常操作期间一样，套接字仍然打开（错误/状态代码无关紧要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:29:28.250

你调用了错误的方法。您应该调用[WSAGetLastError()](http://msdn.microsoft.com/en-us/library/aa915624.aspx)。在 Winsock API 调用之后 GetLastError() 的结果是没有意义的。

# deadlock - 主模式下 uWSGI 上的 ZEO 死锁

> ID：14499594
> 
> 赞同：0
> 
> 时间：2013-01-24T10:53:53.873
> 
> 标签：deadlock, uwsgi, zodb, zope3

再会！

我正在迁移到 uWSGI 部署。该项目一半在 ZOPE3 上，并使用 ZODB 和 ZEO 进行多路访问。如果我像这样启动 uwsgi 守护进程：

```
uwsgi_python27 --http :9090 --wsgi-file /path/to/file 
```

一切运行正常。这是单进程模式。没有块或锁。当我像这样启动应用程序时：

```
uwsgi_python27 --http :9090 --wsgi-file /path/to/file -p 3 
```

一切都运行。这是预分叉模式。我们有很好的结果。但是有些请求会阻塞。我怀疑应用程序在新实例启动时会阻止 1 个请求。我有 2-3 个锁定请求。所有其他工作都很好。

但是当我这样开始时：

```
uwsgi_python27 --http :9090 --wsgi-file /path/to/file --master 
```

应用程序启动，但未处理任何请求。当我 curl localhost:9090/some_page 它永远不会加载任何东西。没有 CPU 没有磁盘使用。它只是锁定。

有人知道任何可能导致这种情况的特定 ZEO 行为吗？如果我只运行 FileStorage，它会正常运行而不会出现任何死锁。有关 uWSGI 行为的主模式的任何细节也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:12:02.433

行。所以我设法启动了该死的东西。我怀疑，ZEO 的 rpc 与 linux 分叉不兼容。所以你只需要在分叉的进程中启动应用程序，而不是在分叉之前。

请参阅uwsgi 的[惰性](http://uwsgi-docs.readthedocs.org/en/latest/Options.html#lazy)或[惰性应用程序](http://uwsgi-docs.readthedocs.org/en/latest/Options.html#lazy-apps)配置选项。

参考：[http ://uwsgi-docs.readthedocs.org/en/latest/ThingsToKnow.html](http://uwsgi-docs.readthedocs.org/en/latest/ThingsToKnow.html)

# windows - 连接到 Windows 中的命名管道，不同的用户帐户

> ID：14499596
> 
> 赞同：6
> 
> 时间：2013-01-24T10:54:03.237
> 
> 标签：windows, winapi, named-pipes, user-accounts

在 Windows 中，在**受限用户帐户下运行的程序是否可以连接到由在****管理员**帐户下运行或作为**Windows 服务**运行的程序创建的命名管道？

或者我会被拒绝访问吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:18:30.490

这取决于用于创建管道的安全属性。管道创建者必须使用足够许可的安全属性以让受限用户获得对管道的访问权限。

# google-chrome - 单击目标位于同一 PDF 文档上的超链接后 Google Chrome 的后退按钮

> ID：14499597
> 
> 赞同：29
> 
> 时间：2013-01-24T10:54:05.943
> 
> 标签：google-chrome, pdf, cross-browser, keyboard-shortcuts, url-parameters

PDF 文档具有指向同一文档内容的超链接（类似于 HTML 文档的“#section”hrefs）。返回到我所在页面的返回按钮在哪里（我单击了超链接）。

假设我在一个 PDF 教程的索引，第 4 页，然后单击索引中第 2 章的超链接，将我带到第 38 页。现在，如果我想再次返回第 4 页，哪个按钮或快捷方式我应该使用吗？

在所有浏览器中，除了 Google Chrome，您可以按 Alt 和向左箭头来实现此目的。谷歌浏览器中是否有类似的快捷方式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-28T12:27:51.600

AFAIK 无法使用标准的 Chrome PDF 查看器来做到这一点。看看他们的支持页面[https://support.google.com/chrome/answer/1060734](https://support.google.com/chrome/answer/1060734)。您可以尝试请求此功能，但请记住 PDF 查看器是 Chrome 的一部分，而不是 Chromium。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-01T14:40:40.960

我认为在新选项卡中打开超链接更简单，*例如*使用鼠标中键。然后你可以在之后关闭标签。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2018-01-25T07:47:24.060

Alt + Left 应该是您想要的。

# sql - 用于计算父级的子级总值的 SQL 查询

> ID：14499598
> 
> 赞同：0
> 
> 时间：2013-01-24T10:54:10.350
> 
> 标签：sql, netezza

我有以下查询：

```
select
   AD.ALLOCATION_INSTR_ID AS "Allocation Id"
  ,AD.ALLOCATION_INSTR_VERSION AS "Allocation Version"
  ,SUM(AC.CHARGE_AMOUNT) AS "Allocation Commission"
  ,AD.ALLOCATION_ID AS "Sub Allocation Id"
  ,AD.ALLOCATION_VERSION AS "Sub Allocation Version"
  ,AC.CHARGE_AMOUNT AS "Allocation Commission"
  ,B.BLOCK_ID AS "Block Id"
  ,B.BLOCK_VERSION AS "Block Version"
  ,B.BLOCK_SOURCE_SYSTEM AS "Block Source System"
  ,BC.CHARGE_AMOUNT AS "Block Commission"
FROM  EQ_MO_ALLOCATION_DETAIL AS AD 
  LEFT OUTER JOIN EQ_MO_ALLOCATION_DETAIL_CHARGE AS AC 
      ON AC.ALLOCATION_DETAIL_OID = AD.ALLOCATION_DETAIL_OID 
  JOIN EQ_MO_ALLOCATION_INSTR AS AI 
      ON AI.ALLOCATION_INSTR_ID = AD.ALLOCATION_INSTR_ID
      AND AI.ALLOCATION_INSTR_VERSION = AD.ALLOCATION_INSTR_VERSION
  JOIN EQ_MO_ALLOCATION_INSTR_LINKAGE AS AL
      ON AI.ALLOCATION_INSTR_OID = AL.ALLOCATION_INSTR_OID 
  JOIN EQ_MO_BLOCK AS B
      ON B.BLOCK_ID = AL.LINK_PARENT_ID
      AND B.BLOCK_VERSION = AL.LINK_PARENT_VERSION
  LEFT OUTER JOIN EQ_MO_BLOCK_CHARGE AS BC 
      ON BC.BLOCK_OID = B.BLOCK_OID
WHERE AD.LAST_UPDATE_TIME BETWEEN '2013-01-17 00:00:00' AND '2013-01-18 00:00:00' 
AND AC.CHARGE_NAME = 'Commission' 
AND BC.CHARGE_NAME = 'COMMISSION'
AND AD.ALLOCATION_INSTR_VERSION = (SELECT MAX(AD1.ALLOCATION_INSTR_VERSION) 
                       FROM EQ_MO_ALLOCATION_DETAIL AD1
                       WHERE AD1.ALLOCATION_INSTR_VERSION = AD.ALLOCATION_INSTR_VERSION)
AND B.BLOCK_TIME = (SELECT MAX(b1.BLOCK_TIME)
                    FROM EQ_MO_BLOCK b1
                    WHERE b1.BLOCK_ID = B.BLOCK_ID
                   AND b1.BLOCK_VERSION = B.BLOCK_VERSION)
AND AI.VENDOR_PRODUCT = 'OA'
GROUP BY AD.ALLOCATION_INSTR_ID
ORDER BY 1,2 
```

我正在尝试通过收集费用总额来计算分配佣金的总额，并将其与父 ID“分配 ID”显示

然而，我的小组是一些脱节的：

我将分组的子佣金加入到他们的父级，该父级位于另一个表中，但我通过以下方式加入这两个：

```
LEFT OUTER JOIN EQ_MO_ALLOCATION_DETAIL_CHARGE AS AC 
  ON AC.ALLOCATION_DETAIL_OID = AD.ALLOCATION_DETAIL_OID 
```

表 AD 包含可以在第一个选择中看到的父 ID。

但是我得到了以下错误：

```
ERROR:  Attribute AD.ALLOCATION_INSTR_VERSION must be GROUPed or used in an aggregate function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:18:32.890

如果您`GROUP BY AD.ALLOCATION_INSTR_ID`在 Select 语句中不属于`Group by`子句的所有其他列都需要是聚合函数的一部分，例如`Max(AD.ALLOCATION_INSTR_VERSION)`

如果您使用 the 的唯一原因`Group by`是获取 the ，`SUM(AC.CHARGE_AMOUNT)`那么您可以考虑在子查询中执行此操作，然后将其加入您的主 Select 语句。

**编辑 ：-**

类似以下的内容可能会产生预期的结果（未测试）：

```
SELECT
   AD.ALLOCATION_INSTR_ID AS "Allocation Id"
  ,AD.ALLOCATION_INSTR_VERSION AS "Allocation Version"
  ,J.Commission AS "Allocation Commission"
  ,AD.ALLOCATION_ID AS "Sub Allocation Id"
  ,AD.ALLOCATION_VERSION AS "Sub Allocation Version"
  ,AC.CHARGE_AMOUNT AS "Allocation Commission"
  ,B.BLOCK_ID AS "Block Id"
  ,B.BLOCK_VERSION AS "Block Version"
  ,B.BLOCK_SOURCE_SYSTEM AS "Block Source System"
  ,BC.CHARGE_AMOUNT AS "Block Commission"
FROM  EQ_MO_ALLOCATION_DETAIL AS AD
LEFT OUTER JOIN EQ_MO_ALLOCATION_DETAIL_CHARGE AS AC
    ON AC.ALLOCATION_DETAIL_OID = AD.ALLOCATION_DETAIL_OID
JOIN EQ_MO_ALLOCATION_INSTR AS AI
    ON AI.ALLOCATION_INSTR_ID = AD.ALLOCATION_INSTR_ID
    AND AI.ALLOCATION_INSTR_VERSION = AD.ALLOCATION_INSTR_VERSION
JOIN EQ_MO_ALLOCATION_INSTR_LINKAGE AS AL
    ON AI.ALLOCATION_INSTR_OID = AL.ALLOCATION_INSTR_OID
JOIN EQ_MO_BLOCK AS B
    ON B.BLOCK_ID = AL.LINK_PARENT_ID
    AND B.BLOCK_VERSION = AL.LINK_PARENT_VERSION
LEFT OUTER JOIN EQ_MO_BLOCK_CHARGE AS BC
    ON BC.BLOCK_OID = B.BLOCK_OID
RIGHT JOIN (SELECT
            AD.ALLOCATION_INSTR_ID AS "AllocId"
            ,SUM(AC.CHARGE_AMOUNT) AS "Commission"
        FROM  EQ_MO_ALLOCATION_DETAIL AS AD
        LEFT OUTER JOIN EQ_MO_ALLOCATION_DETAIL_CHARGE AS AC
            ON AC.ALLOCATION_DETAIL_OID = AD.ALLOCATION_DETAIL_OID
        JOIN EQ_MO_ALLOCATION_INSTR AS AI
            ON AI.ALLOCATION_INSTR_ID = AD.ALLOCATION_INSTR_ID
            AND AI.ALLOCATION_INSTR_VERSION = AD.ALLOCATION_INSTR_VERSION
        JOIN EQ_MO_ALLOCATION_INSTR_LINKAGE AS AL
            ON AI.ALLOCATION_INSTR_OID = AL.ALLOCATION_INSTR_OID
        JOIN EQ_MO_BLOCK AS B
            ON B.BLOCK_ID = AL.LINK_PARENT_ID
            AND B.BLOCK_VERSION = AL.LINK_PARENT_VERSION
        LEFT OUTER JOIN EQ_MO_BLOCK_CHARGE AS BC
            ON BC.BLOCK_OID = B.BLOCK_OID
        WHERE AD.LAST_UPDATE_TIME BETWEEN '2013-01-17 00:00:00' AND '2013-01-18 00:00:00'
        AND AC.CHARGE_NAME = 'Commission'
        AND BC.CHARGE_NAME = 'COMMISSION'
        AND AD.ALLOCATION_INSTR_VERSION = (
            SELECT MAX(AD1.ALLOCATION_INSTR_VERSION)
            FROM EQ_MO_ALLOCATION_DETAIL AD1
            WHERE AD1.ALLOCATION_INSTR_VERSION = AD.ALLOCATION_INSTR_VERSION)
        AND B.BLOCK_TIME = (
            SELECT MAX(b1.BLOCK_TIME)
            FROM EQ_MO_BLOCK b1
            WHERE b1.BLOCK_ID = B.BLOCK_ID
            AND b1.BLOCK_VERSION = B.BLOCK_VERSION)
        AND AI.VENDOR_PRODUCT = 'OA'
        GROUP BY AD.ALLOCATION_INSTR_ID) AS J
ON J.AllocId = AD.ALLOCATION_INSTR_ID
ORDER BY 1,2 
```

# asp.net-mvc-4 - 自定义 MVC4 授权角色管理

> ID：14499600
> 
> 赞同：1
> 
> 时间：2013-01-24T10:54:11.660
> 
> 标签：asp.net-mvc-4, security

我正在尝试为我的 MVC4 项目创建自定义角色。但我发现它几乎没有。我找到[了这个例子](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7)。但是有没有其他方式来定义我自己的授权角色。因为我喜欢从数据库而不是 IIS 中获取用户角色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:32:28.597

我需要一个[MembershipProvider](http://kitsula.com/Article/Custom-Membership-Provider-for-MVC)和一个[RoleProvider](http://kitsula.com/Article/Custom-Role-Provider-for-MVC)。此外，我需要为我的[SetAuthCookie](http://www.asp.net/web-forms/tutorials/security/introduction/forms-authentication-configuration-and-advanced-topics-cs)添加一个额外的值。

# php - PHP cURL代理和发布问题

> ID：14499605
> 
> 赞同：0
> 
> 时间：2013-01-24T10:54:27.577
> 
> 标签：php, curl, curl-multi

我正在制作一个脚本，可以检查帐户是否仍然有效并且可以工作。我正在使用这个功能：

```
function crack()
{
    $url = 'http://127.0.0.1/trying.php';
    $agent= 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0';
    $flag = 0;
    $fileh_proxy = fopen('proxylist.txt','r');
    $fileh_word = fopen('wordlist.txt','r');
    $i=0;
    while($pass = fgets($fileh_word))
    {
    $arrpass[$i] = $pass;
  if(strstr($pass,"\n"))
  {
    $pass = substr($pass, 0, strlen($pass)-2);
  }
    if(!($proxy = fgets($fileh_proxy)))
    {
        rewind($fileh_proxy);
    }
  if(strstr($proxy,"\n"))
  {
    $proxy = substr($proxy, 0, strlen($proxy)-2);
  }
    $post = "username=user&password=".$pass;
  $ch[$i] = curl_init($url);
  curl_setopt($ch[$i], CURLOPT_SSL_VERIFYPEER, false);
  curl_setopt($ch[$i], CURLOPT_FOLLOWLOCATION, true);
  curl_setopt($ch[$i], CURLOPT_PROXY, $proxy);//this is the part thats troubling me
  curl_setopt($ch[$i], CURLOPT_VERBOSE, true);
  curl_setopt($ch[$i], CURLOPT_REFERER, $url);
  curl_setopt($ch[$i], CURLOPT_POST, true);
  curl_setopt($ch[$i], CURLOPT_POSTFIELDS, $post);
  curl_setopt($ch[$i], CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch[$i], CURLOPT_USERAGENT, $agent);
  curl_setopt($ch[$i], CURLOPT_HEADER, 1);
    $i++;
    }
    $numberof = $i;
    $mh = curl_multi_init();
    for($i=0 ; $i < $numberof ; $i++)
    {
  curl_multi_add_handle($mh,$ch[$i]);
    }
    $running = NULL;
    do
    {
  curl_multi_exec($mh,$running);
    }while($running);
    for($i = 0 ; $i < $numberof ; $i++)
    {
  if(!strstr(curl_multi_getcontent($ch[$i]),'invalid') && 
           !strstr(curl_multi_getcontent($ch[$i]),'error') &&
           !strstr(curl_multi_getcontent($ch[$i]),'wrong')) 
  {  
    $flag = 1;
    echo '<br /><span style="color: red;">'.$arrpass[$i].'</span> MIGHT BE A VALID PASSWORD.<br />';
  }
  curl_multi_remove_handle($mh,$ch[$i]);
  curl_close($ch[$i]);   
    }
    curl_multi_close($mh);
    if($flag == 0)
    {
  echo 'Password could <span style="color: #F00;">NOT</span> be cracked';
    }
    fclose($fileh_proxy);
    fclose($fileh_word);
} 
```

这是 try.php ：

```
<?php  
if(isset($_POST['username'],$_POST['password']))
{
    $us= $_POST['username'];
    $pass= $_POST['password'];
}
if($us=='user' && $pass=='mnop')
{
    echo 'hello';
}
else
{
    echo 'error, invalid, wrong';
}
?> 
```

问题是，当我对破解功能执行此操作时，它可以完美运行：

```
//curl_setopt($ch[$i], CURLOPT_PROXY, $proxy); 
```

这个^^^的结果是：

> mnop 可能是一个有效的密码

但是，一旦我从该部分中删除 // 并取消注释它：

> curl_setopt($ch[$i], CURLOPT_PROXY, $proxy);

一切都出错了，这就是结果：

```
abcd MIGHT BE A VALID PASSWORD 
efgh MIGHT BE A VALID PASSWORD
ijkl MIGHT BE A VALID PASSWORD
mnop MIGHT BE A VALID PASSWORD
qrst MIGHT BE A VALID PASSWORD
uvwx MIGHT BE A VALID PASSWORD
yzab MIGHT BE A VALID PASSWORD 
```

这是 wordlist.txt ：

```
abcd
efgh
ijkl
mnop
qrst
uvwx
yzab 
```

这是 proxylist.txt ：

```
190.2.233.13:3128
200.54.92.187:3128
201.219.3.119:3128
175.136.192.5:8080
200.182.190.156:8080
175.136.246.105:8080
200.253.116.5:3128
31.47.250.238:3128
202.43.113.21:8888
81.213.157.71:80
168.226.35.19:8080
94.23.87.243:3128
217.196.164.61:3128
190.96.64.234:8080
200.114.103.33:8080
200.208.251.210:8080
119.235.16.41:8080
84.41.108.74:8080
80.90.12.36:8080
200.5.113.202:8080
200.182.190.157:8080
85.234.22.126:3128
200.208.251.213:8080
196.1.178.254:3128
116.90.208.47:8080
49.212.129.130:3128
190.82.89.154:3128
60.2.227.123:3128
119.82.239.50:8080
200.166.194.136:3128
114.32.95.96:8080
200.208.251.218:8080
200.42.56.146:8080
78.134.255.42:8080
187.0.222.167:3128
61.185.143.178:8080
200.182.190.149:8080
84.20.82.82:8080
183.63.145.116:3128
201.20.189.201:8080
200.27.114.233:8080
200.54.92.187:80
180.243.92.86:8080
203.114.112.101:3128
213.140.115.173:8080
218.92.252.25:8080
220.248.237.234:8080
213.131.41.98:8080
202.149.78.234:8080
200.166.194.135:3128
37.59.236.42:3128
221.6.15.156:82
212.113.47.87:3128
110.139.116.63:8080
201.12.116.18:80
219.130.39.9:3128
95.215.48.146:8080
89.251.103.130:8080
192.162.150.77:8080
186.236.129.11:3128
187.72.224.65:3128
41.32.43.243:8080
59.172.208.190:8080
168.226.35.19:80
119.97.146.148:80
190.41.70.37:8001
82.114.92.33:8080
186.237.23.160:8080
59.172.208.189:8080
121.52.144.245:8080
118.96.127.10:3128
190.121.135.178:8080
59.46.67.108:8080
202.137.21.196:8080
200.114.103.89:8080
61.167.49.188:8080
221.7.145.42:8080
82.200.165.46:3128
175.106.15.12:8181
119.6.72.133:3128
201.12.116.18:8080
222.89.154.10:9000
200.208.251.212:8080
202.159.95.220:8080
190.66.22.53:8080
201.144.252.115:3128
186.219.25.227:3128
80.250.35.180:8080
202.28.143.25:8080
72.64.146.136:43
123.108.14.39:8080
118.97.37.123:80
190.111.17.161:8080
119.252.160.34:8080
89.45.128.1:8080
110.138.245.95:3128
200.182.190.152:8080
119.187.148.34:8000
124.129.30.74:8080
119.252.168.34:8080 
```

请问有人可以帮我吗？？？我为此付出了很大的努力，制作整个代码花了很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T09:44:10.157

兄弟，我是 curl 工作的新人，最近 2-3 个月在 curl 你的代码似乎正确我在这里测试了你的代理[http://www.checker.freeproxy.ru/checker/](http://www.checker.freeproxy.ru/checker/)大多数代理都不起作用可能是你的代码有问题代理

# jquery - 提高页面加载速度的建议

> ID：14499606
> 
> 赞同：0
> 
> 时间：2013-01-24T10:54:29.130
> 
> 标签：jquery, html, css, jquery-ui

我即将重新设计一个网站，但注意到其中一个网站页面，画廊页面加载非常缓慢。

我为网站上的大多数图像使用了精灵图像以提高性能，如果我想保持画廊页面的格式，那就是在页面上有多个画廊画廊。

您能建议一种改善页面加载时间的方法吗？

我想让页面上的每个画廊都可用，最上面的画廊完全加载，并使用 jQuery 或 jQuery UI 将其他画廊仅作为标题，并在标题下的部分显示“点击显示”，就像手风琴效果一样。但是页面不会加载这些并且只是不显示它们吗？

网站网址是 www.f3racing.co.uk/staging

我创建了一个访客登录：

用户名：客人

密码：stackoverflow240113

提前感谢您的任何帮助和/或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:13:08.273

您的页面加载缓慢，因为您加载了 80 张大图片 - 我查看的是 294kb，这意味着用户必须下载大约 22mb 的图片

# linux - 定期将 bash 历史推送到 github

> ID：14499611
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:54:42.940
> 
> 标签：linux, git, bash, ubuntu, github

我想定期将 bash 历史推送到我的 github 帐户，比如说我每天都会将历史推送到 github，我该怎么做。任何抬头。有可能吗？bash 历史文件应重命名为当前数据时间。这样我就可以追踪了。尽管有本地 bash 历史，但我也更喜欢在 github 中拥有。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:33:20.757

**部分回答**

> bash 历史文件应重命名为当前数据时间。

```
cp -avi "$HISTFILE" "$HISTFILE".$( date -r "$HISTFILE" --rfc-3339=sec | tr ' ' T ) 
```

这会将您当前的 bash 历史文件复制到一个带有时间戳后缀的文件，该时间戳后缀取自您的 bash 历史文件的最后修改日期。

# php - 如果将列放入变量中，mssql_fetch_array 仅显示一行

> ID：14499614
> 
> 赞同：0
> 
> 时间：2013-01-24T10:54:50.633
> 
> 标签：php, mysql

我仍然是 PHP 新手，所以如果这很简单，我深表歉意。

我正在使用 PHP 和 mySQL 为网站创建一个相当基本的搜索工具。我已经连接到数据库，选择了数据库，查询了表并获取了表列；

```
$k = htmlspecialchars($_GET['k']); // Get search query

$select = mssql_query("SELECT * FROM search WHERE Title Like '%" . $k . "%'");

if( mssql_num_rows($select) < 1) {

$noResults = 'No results found for <b>' . $k . '</b>, <label for="k">Please try again.</label>';

} else {

while ($results = mssql_fetch_array($select)) {

    $title = $results['Title'];
    $link = $results['Link'];
    $description = $results['Description'];

}

} 
```

当我将 $results[''] 列放入变量中，然后尝试像这样回显每个变量时；

```
 if( isset($noResults)) {

                echo $noResults;

            } else { 

                echo '<li>' . '<h2>' . '<a href="' . $link . '" title="' . $title . '">' . $title . '</a>' . '</h2>' . '<p>' . $link . '</p>' . '<p>' . $description . '</p>' . '</li>'; 

             } 
```

但是，它只回显与该查询匹配的一行，如果我只是简单地回显这样的列；

```
 echo $results['Title'];
    echo $results['Link'];
    echo $results['Description']; 
```

将显示与查询匹配的所有行..

我不确定为什么会这样。如果有人可以帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:07:41.847

你**在**while循环中执行输出吗？

如果您执行 while 循环并在此之后调用 echo，每个结果集将覆盖前一个结果集，并且 echo 将输出获取的最后一个结果集。

如果**在**Loop 中调用 echo，每个结果集都会生成“他自己的”输出行。

如果您想将每个结果集保存在一个变量中，您可以使用一个数组，该数组在循环前面声明并在循环中填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:11:58.520

您需要使用循环：

```
$k = mysql_real_escape_string($_GET['k']); // Get search query

$select = mssql_query("SELECT * FROM search WHERE Title Like '%" . $k . "%'");

if( mssql_num_rows($select) < 1) {

    $noResults = 'No results found for <b>' . $k . '</b>, <label for="k">Please try again.</label>';

} else {
    $results= array();
    while ($result = mssql_fetch_array($select)) {
        $results[]= $result;
    }

}

if( isset($noResults)) {

    echo $noResults;

} else { 
    echo "<ul>";
    foreach($results as $result){
        echo '<li>' . '<h2>' . '<a href="' . $result['link'] . '" title="' . $result['title'] . '">' . $result['title'] . '</a>' . '</h2>' . '<p>' . $result['link'] . '</p>' . '<p>' . $result['description'] . '</p>' . '</li>'; 
    }
    echo "</ul>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:14:30.080

您的问题中有些事情尚不清楚，但我假设您在检查循环外正在回显变量`isset($noResults)`。这意味着您正在为每个 while 循环中的变量重新分配新值。所以最终你得到分配给变量的最后一个。您必须使用数组来保存值或在循环中回显它。

# magento - 如何在 Magento 的可配置产品中显示多个选项？

> ID：14499617
> 
> 赞同：2
> 
> 时间：2013-01-24T10:54:54.837
> 
> 标签：magento, magento-1.7, magento-1.5

我想在 Magento 中创建一件可配置的产品衬衫。我添加了一个属性颜色和尺寸。有小号、中号和大号三种尺寸以及红色和蓝色两种颜色。现在一位顾客想买 3 件小号、中号和大号的红衬衫。这意味着结构将如下所示：

```
Product Name: Shirt

Size :  Small  (Multi Select)
        Medium
        Large  

Color : Red  (Dropdown)
        Blue 
```

在这里，客户可以选择多种尺寸，但一次只能选择一种颜色。此外，产品的价格会因尺寸和颜色而异。我尝试了属性，但是当我创建属性并选择“商店所有者的目录输入类型”多选时，“用于创建可配置产品”选项被隐藏。有可能创造出这样的产品吗？

# android - 视图寻呼机中的不同图像颜色

> ID：14499619
> 
> 赞同：2
> 
> 时间：2013-01-24T10:54:56.573
> 
> 标签：android, android-layout, imageview, android-viewpager

在我的应用程序中，我正在使用查看寻呼机。问题是图像不同，尽管图像的背景相同。它在模拟器和 HTC 的愿望中显得不同。我用 Galaxy S3 AVD 检查过，完全一样！可能是分辨率问题。这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/main_background"
android:orientation="vertical"
android:weightSum="100" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="5"
    android:paddingBottom="15dp"
    android:paddingTop="47dp" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="10"
    android:gravity="center" >

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="55" >

    <android.support.v4.view.ViewPager
        android:id="@+id/myfivepanelpager"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:paddingLeft="10dp"
        android:paddingRight="10dp" >
    </android.support.v4.view.ViewPager>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="5"
    android:gravity="center"
    android:orientation="horizontal"
    android:paddingLeft="10dp"
    android:paddingRight="10dp" >

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="25"
    android:gravity="center"
    android:orientation="vertical"
    android:paddingLeft="20dp"
    android:paddingRight="20dp" />

</LinearLayout>

</LinearLayout> 
```

我使用`weight`是因为我需要在`viewpager`上面看到的其他布局之后添加按钮。

我的图像 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

  <ImageView
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:adjustViewBounds="true"
      android:paddingBottom="10dp"
      android:paddingTop="10dp"
      android:scaleType="center"
      android:src="@drawable/plate" />

</LinearLayout> 
```

有任何想法吗？图片：![在此处输入图像描述](../Images/f8df502451d47bb3f74d567e34de6934.png)

# php - 提交而不刷新

> ID：14499621
> 
> 赞同：0
> 
> 时间：2013-01-24T10:55:01.827
> 
> 标签：php, jquery, html, mysql

我正在尝试在不使用 jquery 和 php 刷新页面的情况下将数据提交到 db 但我想我的代码有问题，如果我不应用 Jquery，它会很好地工作： Bellow 是我正在使用的代码。

```
<!---Insert into database -->
<script type="text/javascript">
$(document).ready(function () {
    $('.chatbutton').click(function () {
        $.ajax({
            type: 'post',
            url: "insertchatmessages.php",
            success: function () {}
        });
    });
});
</script>
<!---Insert into database ends here  -->

</head>
<body>
<table class="chattable" id="chattable" border="0">
<tr><td><div id="load_tweets">

</div></td></tr>
<form id ="chatform" action="?" method="post"></td></tr>
<tr><td><input class ="chattext" type ="text" name="message"></td></tr>
<tr><td><input class="chatbutton" class="chatbutton" type="submit" value="send" name ="submit">
</div>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:58:06.590

HTML（这是从您的代码派生但修改为在 jsfiddle 中工作）：

```
<table class="chattable" id="chattable" border="0">
<tr>
    <td>
        <div id="load_tweets"></div>
    </td>
</tr>
<tr>
    <td>
        <form id ="chatform" action="/echo/html/" method="post"> <!-- your action should point to your php (insertchatmessages.php) -->
            <input type="hidden" name="html" value="This is sample text to show that this works!"/> <!-- for jsfiddle test only. remove this in your code. -->
            <input class ="chattext" type ="text" name="message" />
            <input class="chatbutton" class="chatbutton" type="submit" value="send" name ="submit" />
        </form>
    </td>
</tr>
</table> 
```

jQuery：

```
$(document).ready(function(){
    $('#chatform').submit(function(e){
        e.preventDefault();
        var $form = $(this),
        data = $form.serialize();

        $.ajax({
             data: data,
             type: $form.attr("method"),
             url: $form.attr("action"),
             success: function(data){
                  $("#load_tweets").html("<p>"+data+"</p>");
             }
        });
    });
}); 
```

工作示例：http: [//jsfiddle.net/darshanags/6vxMs/6/](http://jsfiddle.net/darshanags/6vxMs/6/)

注意：我对您的代码进行了轻微修改以使其在 jsfiddle 上工作，您必须将其改回以使其在您的设置中工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T10:58:12.427

`.chatbutton`是一个提交按钮。当您单击它时，jQuery 处理程序将触发，然后表单提交（这是浏览器的默认行为）。在您的 jQuery 脚本中，您必须调用`preventDefault()`：

```
$('.chatbutton').click(function(e){
e.preventDefault();
// rest of your code 
```

更好的是，为表单提交函数分配一个处理程序（但您仍然需要防止默认行为）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:57:29.367

使用`submit`jquery函数。

```
$('#chatform').submit(function() { });
```

**完整的JS代码**

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

$(document).ready(function ()
{
    $('#chatform').submit(function (e)
    {
        e.preventDefault();
        $.ajax({
            type: 'post',
            url: "random.php",
            success: function (response)
            {
                //do after response.
            }
        });
    });
});

</script>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:34:40.633

jQuery[序列化](http://api.jquery.com/serialize/)会很有帮助

```
<script type="text/javascript">
$(document).ready(function () {
    $('.chatbutton').click(function (e) {
        e.preventDefault();
        $.ajax({
            data: $('chatform').serialize(),
            type: 'post',
            url: "insertchatmessages.php",
            success: function () {}
        });
    });
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T12:37:07.427

简单用户 e.preventDefault() 在您的 onclick 调用开始时，当您想要停止默认行为时使用它：

```
<script type="text/javascript">
$(document).ready(function (e) {
    $('.chatbutton').click(function () {
        e.preventDefault();
        $.ajax({
            type: 'post',
            url: "insertchatmessages.php",
            success: function () {}
        });
    });
});
</script> 
```

# matlab - 求和 3d 数组 matlab

> ID：14499623
> 
> 赞同：0
> 
> 时间：2013-01-24T10:55:06.260
> 
> 标签：matlab

```
x=imread('test.jpg');
imshow(x);
total = 0;
for i=1:2
  for j=1:2
      for k=1:2
        total = total + abs(x(i,j,k));
      end
  end
end
total 
```

无论 i、j、k 的最大值是多少，上面的代码都打印为 255。请解释

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T11:28:55.420

它打印出 255 因为 matlab 不会溢出整数，并且数据类型是 uint8

```
 a = repmat(uint8(100),5, 1)
 a(1)+a(2)
 a(1)+a(2)+a(3) 
```

输出将是 200 和 255，因为 Matlab 将输出钳制在最大值，而不是环绕。如果您使用 Dennis 给出的 sum 函数，那么您会得到正确的值，因为 Matlab 首先转换为 double

```
sum(a) 
```

应该给出 500 作为输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T11:07:06.340

不确定您的代码片段是什么，但是如果您想对数组的绝对值求和，这真的很容易：

```
sum(abs(x(:))) 
```

如果您只想要包含角落的前 2 个值的子矩阵：

```
subM= x(1:2,1:2,1:2)
sum(abs(subM(:))) 
```

# eclipse - 恢复 Eclipse 工作区

> ID：14499625
> 
> 赞同：2
> 
> 时间：2013-01-24T10:55:20.517
> 
> 标签：eclipse, eclipse-rcp

我不时压缩我的整个工作空间，现在想重新激活它。一些愚蠢的同步使我当前的状态崩溃。我尝试的是解压缩它，然后将eclipse的工作区更改为新生成的文件夹。现在的问题是，我的 Eclipse 完全包含现在的项目是空白的，Package Explorer 是空的，即使在按 F5 之后也是如此？有什么建议么？我是否必须使用制作 zip 时使用的相同 Eclipse 版本？计算机是否从 32 位更改为 64 位或 Visaversa 会有所不同。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:07:22.903

您的 zip 文件是否包含隐藏`.metadata`文件夹？（这是 Eclipse 存储首选项和启动选项的地方。）如果没有，这可能是您没有像以前那样看到您的项目的原因。

您可以尝试导入现有项目。那么你至少应该再次看到这些项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:41:22.677

我会删除您的 .metadata 文件夹并手动重新导入项目。元数据将自动重新生成。

# asp.net-mvc - 在 WebGrid Mvc3 的页脚添加链接按钮

> ID：14499626
> 
> 赞同：2
> 
> 时间：2013-01-24T10:55:21.607
> 
> 标签：asp.net-mvc, asp.net-mvc-3, mvcgrid

我在 Webgrid 的底部插入了链接按钮“添加新记录”和“全部保存”。但我希望它们位于`WebGrid`. 我已经搜索了很多，但一无所获。有人可以告诉我如何在`WebGrid`.

这是我的一些代码`WebGrid`

```
@model IEnumerable<MvcGrid2.Models.Employee>
@{
    WebGrid grid = new WebGrid(
    source: Model,
    rowsPerPage: 4);

}

@grid.GetHtml(htmlAttributes: new { id = "WebGrid1" },
        tableStyle:"gridTable",
        headerStyle: "gridHead",
        footerStyle: "gridFooter",
        rowStyle: "gridRow",
        alternatingRowStyle: "gridAltRow",
        mode: WebGridPagerModes.All,
        firstText: "<<",
        previousText: "<",
        nextText: ">",
        lastText: ">>",
        columns: grid.Columns(        
                               @* grid.Column( columnName : "EmployeeId", 
                                            format: @<text>@item.EmpId</text>),*@

                                grid.Column(columnName: "Employee Id",
                                            format: @<span> 
                                                        <span id="spanEmpId_@(item.EmpId)">@item.EmpId</span> 
                                                         @Html.TextBox("EmpId_" + (int)item.EmpId, (int)item.EmpId, new { @style = "display:none" })
                                                   </span>),

                                 grid.Column(columnName: "Employee Name",
                                           format: @<span> 
                                                       <span id="spanEmpName_@(item.EmpId)">@item.EmpName</span> 
                                                       @Html.TextBox("EmpName_" + (int)item.EmpId, (string)item.EmpName, new { @style = "display:none" })
                                                   </span>),

                                 grid.Column(columnName: "Designation",
                                             format: @<span> 
                                                        <span id="spanEmpDesg_@(item.EmpId)" >@item.Designation</span> 
                                                         @Html.TextBox("EmpDesg_" + (int)item.EmpId, (string)item.Designation, new { @style = "display:none" })
                                                     </span>),

                                grid.Column(columnName: "Action", 
                                            format: @<text>                     
                                                        <a href="#" id="Edit_@(item.EmpId)" class="edit">Edit</a>
                                                        <a href="#" id="Update_@(item.EmpId)" style="display:none" class="update">Update</a>
                                                        <a href="#" id="Cancel_@(item.EmpId)" style="display:none"  class="cancel">Cancel</a>
                                                         <a href="#" id="Save_@(item.EmpId)" style="display:none" class="save">Update</a>
                                                        <a href="#" id="iCancel_@(item.EmpId)" style="display:none"  class="icancel">Cancel</a>
                                                        <a href="#" id="Delete_@(item.EmpId)"  class="delete">Delete</a>
                                                    </text>)

                            )) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:17:48.487

WebGrid 本身没有可修改的页脚。但是，如果您查看[ASP.NET 上的教程，](http://weblogs.asp.net/andrebaltieri/archive/2010/11/02/asp-net-mvc-3-working-with-webgrid-part-2.aspx)您将看到一种在 css 中实现这一目标的方法。

您可以做的是使您的最后一行与您的页脚具有相同的 css 类，或者您可以使用 javascript 插入您的按钮/链接。这两种方法都不干净，但据我所知，没有更好的方法可以在不重写控件的情况下实现您的目标。许多人建议研究 Telerik 的控件，如果你有/可以获得他们的东西的许可证。

# android - 当键盘可见时需要滚动页面

> ID：14499627
> 
> 赞同：0
> 
> 时间：2013-01-24T10:55:24.870
> 
> 标签：android, cordova

嗨，我已经使用 phonegap 和 jquerymobile 在 android 中开发了应用程序。当键盘在文本框中键入时可见时，页脚位于键盘上方并且文本框被调整大小。

这是我在 android Manifestfile 中添加的代码：

```
android:windowSoftInputMode="adjustPan" 
```

现在，当键盘可见并且文本框也很好时，页脚被隐藏。但是当键盘可见时我无法滚动页面。例如：如果我有很多文本框并且我需要输入最后一个文本框，那么我需要制作键盘隐形然后聚焦最后一个。

请帮我解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:10:34.373

在您的布局和清单更改中使用滚动视图 `android:windowSoftInputMode="stateVisible|adjustResize|adjustPan"`

# javascript - 有人可以向我解释以下 JS 脚本是如何工作的

> ID：14499628
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:55:25.117
> 
> 标签：javascript

下面的脚本工作正常，但我只是不明白它是如何工作的，尤其是以下部分：Math.floor(Math.random() * 101);。有人可以解释一下整个脚本是如何工作的。谢谢你。

```
<SCRIPT LANGUAGE="Javascript">
var num = Math.floor(Math.random() * 101);

function guessnum() {

    var guess = document.forms["form1"].num.value;
    if (guess == num) {
        alert("Great you Guessed! How did you know that?");
    }

    if (guess < num) {
        alert("No your number is too low!");
    }

    if (guess > num) {
        alert("No your number is too  high");
    }

}
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:58:29.540

```
Math.floor(Math.random() * 101) 
```

正在随机计算 0 到 100 之间的整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:58:30.477

Math.random() 只是选择任何随机数并返回它。

Math.floor 为您提供一个四舍五入的、最接近的较低值，不带任何小数。例如

```
Math.floor(14/6) 
```

将给出 2 作为四舍五入的商

其余代码几乎是不言自明的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:58:56.923

`Math.random()`返回一个介于 0 和 1 之间的值。因此，将其与 0 和 101 之间的值相乘`101`。由于猜谜游戏需要去除小数，因此使用 . 向下舍入该值`Math.floor()`。

所以实际值在 0 到 101（或 0*到*100）的范围内。

# hadoop - Hadoop 1.0.3 mapred.map.tasks 属性不起作用

> ID：14499633
> 
> 赞同：2
> 
> 时间：2013-01-24T10:55:36.990
> 
> 标签：hadoop, mapreduce

我正在使用 hadoop 1.0.3 来运行 map reduce 作业。我有一个 3 节点集群设置。问题是我在 /conf/mapred-site.xml 中将属性 mapred.map.tasks 设置为 20，但是当我运行作业并使用以下网页访问集群信息时，hadoop 仅显示 6 个地图任务： 50030。我已经在集群中的所有节点上编辑了上述配置文件。请帮忙。

问候，莫辛

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:05:59.643

正如 miguno 所说，Hadoop 仅将 mapred.map.tasks 的值视为提示。

话虽如此，当我在使用 MapReduce 时，我能够通过指定最大计数来增加映射计数。这可能不适合你，但你可以试一试。

```
<property>
    <name>mapred.tasktracker.map.tasks.maximum</name>
    <value>60</value>
</property> 
```

注意：此值表示地图的总数。因此，如果您希望每个 (3) 节点运行 20 个地图，则必须指定 mapred.map.tasks，如下所示：

```
<property>
    <name>mapred.map.tasks</name>
    <value>20</value>
</property> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T15:43:13.103

*这个问题似乎与[Setting the number of map tasks 和 reduce tasks](https://stackoverflow.com/questions/6885441/setting-the-number-of-map-tasks-and-reduce-tasks)重复。*

Hadoop[不尊重`mapred.map.tasks`它只是一个暗示](http://markmail.org/message/k32nrcb2ncsq67ef?q=mapred.map.tasks%20)。

[在 Hadoop wiki 上](http://wiki.apache.org/hadoop/HowManyMapsAndReduces)查看此信息：

> 实际上控制地图的数量是微妙的。mapred.map.tasks 参数只是对 InputFormat 地图数量的提示。默认的 InputFormat 行为是将总字节数拆分为正确数量的片段。但是，在默认情况下，输入文件的 DFS 块大小被视为输入拆分的上限。可以通过 mapred.min.split.size 设置拆分大小的下限。因此，如果您期望 10TB 的输入数据和 128MB 的 DFS 块，那么您最终会得到 82k 个地图，除非您的 mapred.map.tasks 更大。最终，InputFormat 决定了地图的数量。

也就是说，Hadoop 确实接受指定的用户`mapred.reduce.tasks`并且不会对其进行操作。

总之，您不能`mapred.map.tasks`对给定的 MapReduce 作业强制，但您可以强制`mapred.reduce.tasks`.

编辑：稍微超出您的直接问题，有一种方法可以间接强制 Hadoop 使用更多映射器。这涉及适当地设置 和`mapred.min.split.size`的`dfs.block.size`组合`mapred.max.split.size`。请注意，输入文件的实际大小也在这里起作用。有关详细信息，请参阅[此答案，该答案](https://stackoverflow.com/a/10083814/1743580)基本上引用了*Tom White 的 Hadoop：The Definite Guide*书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:36:17.717

它主要是决定地图任务数量的输入格式。 [http://wiki.apache.org/hadoop/HowManyMapsAndReduces](http://wiki.apache.org/hadoop/HowManyMapsAndReduces)

对于您的问题，默认情况下，任务跟踪器运行两个 map | 同时减少任务。
要更改它，请在 /conf/mapred-site.xml 中设置属性 mapred.map.tasks.maximum

. 建议使用公式 (CPUS > 2) ？(CPUS * 0.75) : 1 设置时。

# character-encoding - 查询参数中的特殊字符

> ID：14499634
> 
> 赞同：1
> 
> 时间：2013-01-24T10:55:38.643
> 
> 标签：character-encoding

我在表单上使用 1 个搜索选项。在这里，当我传递任何特殊字符时，`& or $`它不会在搜索框中保留该请求参数，是的，但它正在处理我的搜索请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:57:16.083

您需要对查询字符串中的值进行[URL 编码。](http://en.wikipedia.org/wiki/Percent-encoding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T08:55:17.910

我不了解 Java，但在通过 Google URL 参数将用户文本发送到 Google 翻译时，我使用了类似于下面的代码。（假设 myText、myURL 和 myTextURL 的值已经分配。）

```
<script>
function transfix(isURL,form) {
    if(isURL) window.open( myURL     + encodeURIComponent(myText) );
    else      window.open( myTextURL + decodeURIComponent(myText) );  
}
</script>

<form target=_blank id="translate" name="translate">

<input type="button" value="Text" onclick="transfix(false,this.form)">
<input type="button" value="URL"  onclick="transfix(true,this.form)"> 

</form> 
```

# c++ - 集成 SFML 和 wxWidget 时出错

> ID：14499635
> 
> 赞同：1
> 
> 时间：2013-01-24T10:55:48.913
> 
> 标签：c++, macos, wxwidgets, sfml

我想使用 SFML 和 wxWidget 创建一个应用程序。因为它是一种游戏的关卡编辑器，所以我需要 SFML 的渲染部分并将其与原生按钮集成

我能够编译 SFML 的示例，也能够编译 wxWidget 的示例。但是在我按照以下链接中的教程进行操作后：[http](http://www.sfml-dev.org/tutorials/1.6/graphics-wxwidgets.php) ://www.sfml-dev.org/tutorials/1.6/graphics-wxwidgets.php ，我的 IDE 给了我这些错误。

```
"sf::RenderWindow::OnCreate()", referenced from:
  vtable for wxSFMLCanvasin wxSFMLCanvas.o

"sf::RenderWindow::RenderWindow()", referenced from:
   wxSFMLCanvas::wxSFMLCanvas(wxWindow*, int, wxPoint const&, wxSize const&, long)in wxSFMLCanvas.o
  wxSFMLCanvas::wxSFMLCanvas(wxWindow*, int, wxPoint const&, wxSize const&, long)in wxSFMLCanvas.o

"sf::RenderWindow::~RenderWindow()", referenced from:
  wxSFMLCanvas::~wxSFMLCanvas()in wxSFMLCanvas.o
  wxSFMLCanvas::~wxSFMLCanvas()in wxSFMLCanvas.o
  wxSFMLCanvas::~wxSFMLCanvas()in wxSFMLCanvas.o
  wxSFMLCanvas::wxSFMLCanvas(wxWindow*, int, wxPoint const&, wxSize const&, long)in wxSFMLCanvas.o
  wxSFMLCanvas::wxSFMLCanvas(wxWindow*, int, wxPoint const&, wxSize const&, long)in wxSFMLCanvas.o

"sf::Window::Create(void*, sf::WindowSettings const&)", referenced from:
  wxSFMLCanvas::wxSFMLCanvas(wxWindow*, int, wxPoint const&, wxSize const&, long)in wxSFMLCanvas.o
  wxSFMLCanvas::wxSFMLCanvas(wxWindow*, int, wxPoint const&, wxSize const&, long)in wxSFMLCanvas.o

 "non-virtual thunk to sf::RenderWindow::GetHeight() const", referenced from:
  vtable for wxSFMLCanvasin wxSFMLCanvas.o

"non-virtual thunk to sf::RenderWindow::GetWidth() const", referenced from:
  vtable for wxSFMLCanvasin wxSFMLCanvas.o

"sf::RenderWindow::GetHeight() const", referenced from:
  vtable for wxSFMLCanvasin wxSFMLCanvas.o

"typeinfo for sf::RenderWindow", referenced from:
  typeinfo for wxSFMLCanvasin wxSFMLCanvas.o

"sf::RenderWindow::Activate(bool)", referenced from:
  vtable for wxSFMLCanvasin wxSFMLCanvas.o

"sf::RenderWindow::GetWidth() const", referenced from:
  vtable for wxSFMLCanvasin wxSFMLCanvas.o

"sf::Window::Display()", referenced from:
  wxSFMLCanvas::OnPaint(wxPaintEvent&)       in wxSFMLCanvas.o

"non-virtual thunk to sf::RenderWindow::Activate(bool)", referenced from:
  vtable for wxSFMLCanvasin wxSFMLCanvas.o

"sf::Window::OnEvent(sf::Event const&)", referenced from:
  vtable for wxSFMLCanvasin wxSFMLCanvas.o

"sf::RenderTarget::Draw(sf::Drawable const&)", referenced from:
  vtable for wxSFMLCanvasin wxSFMLCanvas.o 
```

我不知道这些错误是什么意思。你有这方面的经验吗？

问候

ps：我有 SFML 版本。1.6 和 OSX 10.6.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:24:18.453

不幸的是，我删除了我的框架文件夹，在我恢复它之后，错误消失了

# ios - 被遗弃的记忆

> ID：14499638
> 
> 赞同：0
> 
> 时间：2013-01-24T10:55:58.337
> 
> 标签：ios, memory-management, memory-leaks, modalviewcontroller, abandoned-memory

在我的代码中：

```
 ABNewPersonViewController *c = [[ABNewPersonViewController alloc] init];
    [c setNewPersonViewDelegate:self];
    [c setDisplayedPerson:newPerson];
    CFRelease(newPerson);

    UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:c];
    [self presentModalViewController:nc animated:YES]; 
```

有些地方似乎是被遗弃的记忆，我发现了仪器。任何线索为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:08:46.433

释放 c. 它已被保留在 nc

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:32:42.223

尝试删除 CFRelease，并将 UINavigationController 设为 ivar。这就是 ARC 如何知道将导航控制器保留在内存中，直到特定类被释放。

```
ABNewPersonViewController *personViewController = [[ABNewPersonViewController alloc] init];
[personViewController setNewPersonViewDelegate:self];
[personViewController setDisplayedPerson:newPerson];

//this line is not required
//CFRelease(newPerson); 

//UINavigationController *personNavigationController; define nc as ivar in the .h file.
personNavigationController = [[UINavigationController alloc] initWithRootViewController:personViewController];
[self presentModalViewController:personNavigationController animated:YES]; 
```

而且，如果您想遵循 Apple 的一些命名约定，那么您的代码的可读性肯定会很好。

# sql-server-2008 - 分析服务。第二次处理维度时的性能问题

> ID：14499641
> 
> 赞同：3
> 
> 时间：2013-01-24T10:56:07.003
> 
> 标签：sql-server-2008, ssas, olap, olap-cube

我正在使用可以构建和处理 DM 和 Cube 的 Analytics 应用程序。用户可以选择他们想在 Cube 中看到的维度/属性/度量/层次结构。

我**第一次**创建和加载多维数据集时的多维数据集加载/处理流程

1) 创建 DS、DSV、维度、多维数据集结构 2) 处理完整维度 3) 处理完整多维数据集

在该用户可以更改维度结构（添加/删除属性）之后，我必须**第二次**更新和重新加载多维数据集，流程：

1) 更新维度、多维数据集结构 2) 处理完整维度 3) 处理完整多维数据集

当我第二次对维度执行完整处理时，我遇到了性能问题，因为它重新处理了相关的度量值组和分区。

任何我可以改变我的流程结构的建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:07:21.773

根据 Microsoft 的建议，简单而有效的更改始终是“处理数据”，然后是“处理索引”，而不是“完整处理”。参考：http: [//msdn.microsoft.com/en-us/library/cc966525.aspx](http://msdn.microsoft.com/en-us/library/cc966525.aspx)

# linux-kernel - Linux Driver 实时约束

> ID：14499643
> 
> 赞同：2
> 
> 时间：2013-01-24T10:56:10.580
> 
> 标签：linux-kernel, real-time, linux-device-driver, timing, raspberry-pi

我需要建立一个平台来记录一些传感器数据。并且可能稍后对这些记录的数据进行一些计算。

Raspberry Pi 似乎是一个有趣（而且便宜！）的设备。

我有一个可以以 800 Hz 采样的陀螺仪，相当于每 1.25 ms 采样一次。陀螺仪有一个内置的 FIFO，可以存储 32 个样本。这意味着 FIFO 必须至少每 32 * 1.25 = 40 ms 清空一次，否则样本将被丢弃。

所以我的问题是：**我能否 100% 确定我的内核驱动程序能够在指定时间内从该 FIFO 中提取数据？**

陀螺仪通过 i2c 与主机通信，如果这会使事情变得更简单，它还可以在“几乎满”事件上触发中断引脚。但是，如果我可以在驱动程序中有一个循环来定期检索数据，那将是最简单的。

我可以忍受将数据存储在内核空间中，并且不经常将其移动到用户空间（没有时间限制）。

我也可以接受以较低的采样率对陀螺仪进行采样（400 或 200 Hz 是可以接受的）。

这是关于股票内核的，而不是特殊的实时内核，因为树莓派目前似乎不支持这种内核。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:49:16.890

您将需要一个实时的 linux 环境来保证时间紧迫：

您可以在 Raspberry Pi 上尝试 Xenomai：http: [//diy.powet.eu/2012/07/25/raspberry-pi-xenomai/](http://diy.powet.eu/2012/07/25/raspberry-pi-xenomai/)

然而，沿着这个博客： http: [//linuxcnc.mah.priv.at/rpi/rpi-rtperf.html](http://linuxcnc.mah.priv.at/rpi/rpi-rtperf.html)（死了，我在回路或谷歌缓存中找不到它）

似乎他正在从库存内核中获得可重复的 +/- 20µS 时间。由于您的时序分辨率为 1250µS，因此如果您愿意在蓝月亮 YMMV 中丢失一次样本，您可能会对库存内核感到满意。

我自己还没有测试过这个，但我一直在阅读，试图用 Raspberry Pi 驱动一个 ws2811 LED 控制器，这对我来说是最有希望的。

还有 RT linux 补丁：[https](https://rt.wiki.kernel.org/index.php/Main_Page)
://rt.wiki.kernel.org/index.php/Main_Page 其中至少有一个 pi 版本：[https](https://github.com/licaon-kter/raspi-rt)
://github.com/licaon-kter/raspi-rt 但是我在深入研究这个补丁时遇到了一堆反对者。

如果您错过了一个间隔，您最好阅读 MS 计时器并记录或点亮 LED，然后尝试一些解决方案。快乐黑客..

# iphone - 以编程方式添加 tablview 的滚动禁用

> ID：14499644
> 
> 赞同：2
> 
> 时间：2013-01-24T10:56:13.747
> 
> 标签：iphone, ios, ipad, messageui

我以编程方式将 tableview 添加到滚动视图，但它没有滚动。虽然我尝试使用 XIB 进行相同的操作。但它工作正常。

这是我的代码

CGRect 框架 = CGRectMake(30, 30.0f, 900, 300.0f);

```
eappTable = [[UITableView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]  style:UITableViewStylePlain];

eappTable.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;

eappTable.delegate = self;

eappTable.dataSource = self;

eappTable.scrollEnabled = YES;

eappTable.scrollsToTop = YES; 
```

[eappTable 重载数据];

```
[scrollView addSubview:eappTable]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:02:00.910

```
eappTable = [[UITableView alloc] nitWithFrame:YourSize style:Table_Style]];
eappTable.delegate = self;
eappTable.dataSource = self;
eappTable.scrollEnabled = YES;
[scrollView addSubview:eappTable]; 
```

并设置`self.scrollView.contentSize`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:02:34.317

您必须设置 ScrollView 的内容大小。

希望能帮助到你 ！！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T11:03:41.933

尝试启用弹跳（因为如果所有单元格大小都小于它自身的 uitableview 大小，如果将弹跳设置为 NO，它将不会滚动）：

eappTable.bounces = YES；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:06:25.240

```
[eappTable  setContentSize:CGSizeMake(320, 680)]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T12:09:40.697

我知道这不是您正在寻找的答案。但我想提一点： **永远不要将 tableview 添加为滚动视图的子视图**。

> 重要提示：您不应该在对象中嵌入`UIWebView`或对象。如果这样做，可能会导致意外行为，因为两个对象的触摸事件可能会混淆并错误处理。`UITableView``UIScrollView`

*   来自[UIWebView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

# android - ListView向上滚动时如何更改背景

> ID：14499649
> 
> 赞同：0
> 
> 时间：2013-01-24T10:56:34.497
> 
> 标签：android, android-layout, android-listview

我正在尝试实现 ListView。问题是，当我显示的列表项小于碎石大小时，剩余的显示为黑色。我想设置任何图像，以便当项目小于屏幕尺寸时，背景应该是图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:00:08.140

把你的`<ListView />`内心`<LinearLayout/>`，

将背景添加到线性布局，LL 高度为 match_parent，Listview 的高度为 wrap_content

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:01:21.973

我自己没有这样做，但这是我认为应该起作用的。

将图像放在 /res/drawable

然后将这些行添加到清单中的活动或 ListView 的父布局

```
android:scaleType="fitCenter"
android:background="@drawable/image_name" 
```

让我知道情况如何。

# java - 持久类在 ID 上给出空值

> ID：14499650
> 
> 赞同：0
> 
> 时间：2013-01-24T10:56:37.200
> 
> 标签：java, jpa, netbeans, glassfish, entity

我正在尝试保留一个用户类，其中包含 2 个列表：一个与用户一起查看哪些用户正在关注该特定用户，另一个与用户一起查看该特定用户关注哪些用户。

用户.java：

```
@Entity
@XmlRootElement
@Table(name="Users")
public class User implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String name;
    private String web;
    private String bio;
    @OneToMany(cascade=CascadeType.ALL)
    private Collection<User> followers = new ArrayList();
    @OneToMany(cascade=CascadeType.ALL)
    private Collection<User> following = new ArrayList(); 
```

我有一个名为的类`UserDAOJPA.java`，它创建和修改用户：

```
@Alternative
@Stateless
public class UserDAOJPA implements Serializable, IUserDAO {

    @PersistenceContext(unitName = "KwetterSOAPPU")
    private EntityManager em;

    @Override
    public void create(User user) {
        em.persist(user);
    }
@Override
    public List<User> getFollowers(User user) {
        List<User> followers;
        followers = (List<User>) user.getFollowers();
        return followers;
    }

    @Override
    public void addFollower(User user, User follower)
    {
        user.addFollower(follower);
        em.merge(user);
    }

    @Override
    public List<User> getFollowing(User user) {
        List<User> following;
        following = (List<User>) user.getFollowing();
        return following;
    }

    @Override
    public void addFollowing(User user, User following) {
        user.addFollower(following);
        em.merge(user);
    }
    @PostConstruct
    private void initUsers() {
        User u1 = new User("Hans", "http", "geboren 1");
        User u2 = new User("Frank", "httpF", "geboren 2");
        User u3 = new User("Tom", "httpT", "geboren 3");
        User u4 = new User("Sjaak", "httpS", "geboren 4");

        this.create(u1);
        this.create(u2);
        this.create(u3);
        this.create(u4);

        this.addFollowing(u1, u2);
        this.addFollower(u2, u1);
        this.addFollowing(u1, u3);
        this.addFollower(u3, u1);
        this.addFollowing(u1, u4);
        this.addFollower(u4, u1); 
```

我自己的猜测是，在查看用户集合时，我在 User.java 类中缺少正确的注释。

错误信息：

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLIntegrityConstraintViolationException: Column 'FOLLOWING_ID'  cannot accept a NULL value.
Error Code: -1
Call: INSERT INTO Users_Users (followers_ID, User_ID) VALUES (?, ?)
    bind => [2 parameters bound]
Query: DataModifyQuery(name="followers" sql="INSERT INTO Users_Users (followers_ID, User_ID) VALUES (?, ?)") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:29:16.577

用户与其关注者之间的关系是双向的多对多关系，而不是两个一对多的关系，因此您需要将其映射为：

```
@ManyToMany(mappedBy = "following")
private Collection<User> followers = new ArrayList<>();

@ManyToMany
@JoinTable(name = "followers",
    joinColumn = @Column(name = "follower_id"),
    inverseJoinColumn = @Column(name = "following_id"))
private Collection<User> following = new ArrayList<>(); 
```

另请注意，在引用逻辑上“拥有”的实体时，通常应使用级联。在您的情况下，这是没有意义的，因为`User`s 不“拥有”彼此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:35:01.953

只是猜测，因为我没有测试代码的环境，但我认为您需要更改 create 方法以从 EntityManager.merge 类返回返回值并使用结果，如下所示：

```
...

public User create(User user) {
    return em.merge(user);
}

...

User user = this.create(new User(...));
User follower = this.create(new User(...));
this.addFollower(user, follower); 
```

错误的原因是对 Follower 的 id 的引用是未定义的，因为您没有返回合并后的对象状态，您已将其持久化。

# android - Android相机扭曲图像

> ID：14499654
> 
> 赞同：1
> 
> 时间：2013-01-24T10:56:49.440
> 
> 标签：android, camera, surfaceview, preview

我对 Android 中的相机 API 有一个大问题。我想在 SurfaceView 的相机中开始预览。这样可行。但预览图像失真。为什么会发生，解决方案是什么？

我在 App Store 中有一个类似 Retro Camera 的应用。所以我想在矩形或正方形中预览相机。但是预览没有正确的解决方案。

我的代码：

```
public class CameraActivity extends Activity implements SurfaceHolder.Callback {

Camera camera;

SurfaceView surfaceView;

SurfaceHolder surfaceHolder;

boolean previewing = false;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ImageView buttonStartCameraPreview = (ImageView)findViewById(R.id.scanning);
    ImageView buttonStopCameraPreview = (ImageView)findViewById(R.id.buttonBack);

    getWindow().setFormat(PixelFormat.UNKNOWN);
    surfaceView = (SurfaceView)findViewById(R.id.surfaceView);
    surfaceHolder = surfaceView.getHolder();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    buttonStartCameraPreview.setOnClickListener(
            new Button.OnClickListener() {

                @Override
                public void onClick(View v) {
                    if(!previewing) {
                        camera = Camera.open();
                        if(camera != null) {
                            try {
                                camera.setDisplayOrientation(90);
                                camera.setPreviewDisplay(surfaceHolder);
                                camera.startPreview();
                                previewing = true;
                            }
                            catch(IOException e) {
                                e.printStackTrace();
                            }
                        }
                    }
                }
            }
    );

    buttonStopCameraPreview.setOnClickListener(
            new Button.OnClickListener() {

                @Override
                public void onClick(View v) {
                    if(camera != null && previewing) {
                        camera.stopPreview();
                        camera.release();
                        camera = null;

                        previewing = false;
                    }
                }
            }
    );
}

@Override
public void surfaceChanged(
        SurfaceHolder holder, int format, int width, int height) {
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
}
 } 
```

**结果：**
我有一个正方形，但预览是一个矩形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-10-05T10:29:32.473

这需要一点数学...

# 问题

基本上问题在于相机预览与屏幕的宽度/高度比不同。据我所知，这只是 Android 上的一个问题，其中：

1.  每个相机制造商都支持不同的纵横比
2.  每个手机制造商都会创建不同的屏幕纵横比

# 理论

解决这个问题的方法基本上是：

1.  找出屏幕的纵横比（和方向）

```
const { height, width } = Dimensions.get('window');
const screenRatio = height / width; 
```

2.  等待相机准备好

```
const [isRatioSet, setIsRatioSet] = useState(false);

// the camera must be loaded in order to 
// access the supported ratios
const setCameraReady = async() => {
  if (!isRatioSet) {
    await prepareRatio();
  }
};

return (
  <Camera
    onCameraReady={setCameraReady}
    ref={(ref) => {
      setCamera(ref);
    }}>
  </Camera>
); 
```

3.  找出相机支持的纵横比

```
const ratios = await camera.getSupportedRatiosAsync(); 
```

这将返回一个格式为 ['w:h'] 的字符串数组，因此您可能会看到如下内容：

```
[ '4:3', '1:1', '16:9' ] 
```

4.  在高度不超过屏幕比例的情况下找到相机最接近屏幕的纵横比（假设您想要水平缓冲区，而不是垂直缓冲区）

本质上，您在这里尝试做的是循环浏览支持的相机比例，并确定它们中的哪一个与屏幕的比例最接近。任何太高的我们都会扔掉，因为在这个例子中，我们希望预览占据屏幕的整个宽度，并且我们不介意预览是否比纵向模式下的屏幕短。

a) 获取屏幕纵横比

所以假设屏幕是480w x 800h，那么高/宽的纵横比是`1.666...` 如果我们在横向模式下，我们会做宽/高。

b) 获取支持的相机纵横比

然后我们查看每个相机的纵横比并计算宽度/高度。我们计算这个而不是像我们计算屏幕的高度/宽度的原因是相机的纵横比*总是*处于横向模式。

所以：

*   **方面=>计算**
*   `4:3 => 1.3333`
*   `1:1 => 1`
*   `16:9 => 1.77777`

c) 计算支持的相机纵横比

对于每一个，我们从屏幕的纵横比中减去以找出差异。任何超过长边屏幕纵横比的都将被丢弃：

*   **方面 => 计算 => 与屏幕的差异**
*   `4:3 => 1.333... => 0.333...`（**最接近没有过去！**）
*   `1:1 => 1 => 0.666...`（最差匹配）
*   `16:9 => 1.777... => -0.111...`（太宽了）

d) 与屏幕纵横比最接近的最短相机纵横比

所以我们`4:3`在这个屏幕上选择这个相机的纵横比。

e) 计算用于填充和定位的相机纵横比和屏幕纵横比之间的差异。

要将预览定位在屏幕中心，我们可以计算屏幕高度与相机预览缩放高度之间的差值的一半。

```
verticalPadding = (screenHeight - bestRatio * screenWidth) / 2 
```

## 全部一起：

```
let distances = {};
let realRatios = {};
let minDistance = null;
for (const ratio of ratios) {
  const parts = ratio.split(':');
  const realRatio = parseInt(parts[0]) / parseInt(parts[1]);
  realRatios[ratio] = realRatio;
  // ratio can't be taller than screen, so we don't want an abs()
  const distance = screenRatio - realRatio; 
  distances[ratio] = realRatio;
  if (minDistance == null) {
    minDistance = ratio;
  } else {
    if (distance >= 0 && distance < distances[minDistance]) {
      minDistance = ratio;
    }
  }
}
// set the best match
desiredRatio = minDistance;
//  calculate the difference between the camera width and the screen height
const remainder = Math.floor(
  (height - realRatios[desiredRatio] * width) / 2
);
// set the preview padding and preview ratio
setImagePadding(remainder / 2); 
```

5.  将`<Camera>`组件设置为具有适当的缩放高度以匹配应用的相机纵横比并居中或屏幕中的任何内容。

```
<Camera
  style={[styles.cameraPreview, {marginTop: imagePadding, marginBottom: imagePadding}]}
  onCameraReady={setCameraReady}
  ratio={ratio}
  ref={(ref) => {
    setCamera(ref);
  }}
/> 
```

需要注意的是，在横向模式下，相机纵横比始终是宽度：高度，但您的屏幕可能是纵向或横向的。

# 执行

此示例仅支持纵向模式屏幕。要支持这两种屏幕类型，您必须检查[屏幕方向](https://docs.expo.io/versions/latest/sdk/screen-orientation/)并根据设备所处的方向更改计算。

```
import React, { useEffect, useState } from 'react';
import {StyleSheet, View, Text, Dimensions, Platform } from 'react-native';
import { Camera } from 'expo-camera';

export default function App() {
  //  camera permissions
  const [hasCameraPermission, setHasCameraPermission] = useState(null);
  const [camera, setCamera] = useState(null);

  // Screen Ratio and image padding
  const [imagePadding, setImagePadding] = useState(0);
  const [ratio, setRatio] = useState('4:3');  // default is 4:3
  const { height, width } = Dimensions.get('window');
  const screenRatio = height / width;
  const [isRatioSet, setIsRatioSet] =  useState(false);

  // on screen  load, ask for permission to use the camera
  useEffect(() => {
    async function getCameraStatus() {
      const { status } = await Camera.requestPermissionsAsync();
      setHasCameraPermission(status == 'granted');
    }
    getCameraStatus();
  }, []);

  // set the camera ratio and padding.
  // this code assumes a portrait mode screen
  const prepareRatio = async () => {
    let desiredRatio = '4:3';  // Start with the system default
    // This issue only affects Android
    if (Platform.OS === 'android') {
      const ratios = await camera.getSupportedRatiosAsync();

      // Calculate the width/height of each of the supported camera ratios
      // These width/height are measured in landscape mode
      // find the ratio that is closest to the screen ratio without going over
      let distances = {};
      let realRatios = {};
      let minDistance = null;
      for (const ratio of ratios) {
        const parts = ratio.split(':');
        const realRatio = parseInt(parts[0]) / parseInt(parts[1]);
        realRatios[ratio] = realRatio;
        // ratio can't be taller than screen, so we don't want an abs()
        const distance = screenRatio - realRatio; 
        distances[ratio] = realRatio;
        if (minDistance == null) {
          minDistance = ratio;
        } else {
          if (distance >= 0 && distance < distances[minDistance]) {
            minDistance = ratio;
          }
        }
      }
      // set the best match
      desiredRatio = minDistance;
      //  calculate the difference between the camera width and the screen height
      const remainder = Math.floor(
        (height - realRatios[desiredRatio] * width) / 2
      );
      // set the preview padding and preview ratio
      setImagePadding(remainder);
      setRatio(desiredRatio);
      // Set a flag so we don't do this 
      // calculation each time the screen refreshes
      setIsRatioSet(true);
    }
  };

  // the camera must be loaded in order to access the supported ratios
  const setCameraReady = async() => {
    if (!isRatioSet) {
      await prepareRatio();
    }
  };

  if (hasCameraPermission === null) {
    return (
      <View style={styles.information}>
        <Text>Waiting for camera permissions</Text>
      </View>
    );
  } else if (hasCameraPermission === false) {
    return (
      <View style={styles.information}>
        <Text>No access to camera</Text>
      </View>
    );
  } else {
    return (
      <View style={styles.container}>
        {/* 
        We created a Camera height by adding margins to the top and bottom, 
        but we could set the width/height instead 
        since we know the screen dimensions
        */}
        <Camera
          style={[styles.cameraPreview, {marginTop: imagePadding, marginBottom: imagePadding}]}
          onCameraReady={setCameraReady}
          ratio={ratio}
          ref={(ref) => {
            setCamera(ref);
          }}>
        </Camera>
      </View>
    );
  }
}

const styles = StyleSheet.create({
  information: { 
    flex: 1,
    justifyContent: 'center',
    alignContent: 'center',
    alignItems: 'center',
  },
  container: {
    flex: 1,
    backgroundColor: '#000',
    justifyContent: 'center'
  },
  cameraPreview: {
    flex: 1,
  }
}); 
```

你可以在这里玩[世博小吃](https://snack.expo.dev/@backupbrain/stackoverflow-camera-preview-in-expo-is-distorted)

# 结果

最后，保留比例的相机预览，它使用顶部和底部的填充来居中预览：

[![安卓截图](../Images/bea32a1faab05500e13f6da8b01220ba.png)](https://i.stack.imgur.com/DzAaX.jpg)

您也可以在线或在您的 Android 上的 Expo Snack 上[试用此代码。](https://snack.expo.io/@backupbrain/893c4c)

# spring - NoSuchBeanDefinitionException 仅用于带注释的类

> ID：14499657
> 
> 赞同：0
> 
> 时间：2013-01-24T10:56:58.833
> 
> 标签：spring

我得到 org.springframework.beans.factory.NoSuchBeanDefinitionException

对于我使用注释的类（@Service）

我已经正确提到了包裹扫描

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:55:39.583

这实际上是一个大错特错。但只是发布答案，因为许多人可能会这样做。

我正在使用 Eclipse 准备 JAR 文件。Eclipse 没有正确打包类文件，所以 spring 无法加载 bean

# c# - 由于 C# 中的特定构造函数导致的变量类属性

> ID：14499659
> 
> 赞同：2
> 
> 时间：2013-01-24T10:57:02.193
> 
> 标签：c#, class, properties

假设 A 类为：

```
public class A
{
    private string _str;
    private int _int;

    public A(string str)
    {
        this._str = str;
    }

    public A(int num)
    {
        this._int = num;
    }

    public int Num
    {
        get
        {
            return this._int;
        }
    }

    public string Str
    {
        get
        {
            return this._str;
        }
    }
} 
```

`Str`当我构造类时`A`，我想隐藏属性

```
new A(2) 
```

并且想`Num`在我构造类时`A`隐藏属性

```
new A("car"). 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T10:59:41.893

这对于一个班级是不可能的。An`A`是`A`, 并且具有相同的属性 - 无论它是如何构造的。

你*可以*有 2*个子类*和`abstract A`一个工厂方法......

```
public abstract class A
{
    class A_Impl<T> : A
    {
        private T val;
        public A_Impl(T val) { this.val = val; }
        public T Value { get { return val; } }
    }
    public static A Create(int i) { return new A_Impl<int>(i); }
    public static A Create(string str) { return new A_Impl<string>(str); }
} 
```

但是：除非他们强制调用，否则调用者*不会知道该值。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:01:21.760

使用泛型

```
public class A<T>
{
    private T _value;

    public A(T value)
    {
        this._value= value;
    }

    public TValue
    {
        get
        {
            return this._value;
        }
    }
} 
```

# jquery - 使用 JQuery 从 XML 读取数据时出错

> ID：14499660
> 
> 赞同：0
> 
> 时间：2013-01-24T10:57:03.537
> 
> 标签：jquery, xml, ajax

我有一个像

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<childrens>
<child entity_id="1" value="Root Catalog" parent_id="0">
<child entity_id="2" value="Apparel" parent_id="1">
    <child entity_id="4" value="Shirts" parent_id="2"/>
    <child entity_id="5" value="Pants" parent_id="2"/>
</child>
<child entity_id="3" value="Accessories" parent_id="1">
    <child entity_id="6" value="Handbags" parent_id="3"/>
    <child entity_id="7" value="Jewelry" parent_id="3"/>
</child>
</child>
</childrens> 
```

n 已尝试获取 parent_id=2 n 已编写此 jquery 代码的数据

```
$(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "test.xml",
            dataType: "xml",
            success: function(xml) {
                $(xml).find('child').attr('[parent_id=3]').each(function(){
                    var id = $(this).attr('entity_id');
                    alert(id);

                });
            }
        });
    }); 
```

但它不工作

如果我删除`.attr('[parent_id=3]')`，那么每个 id 都会被提醒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:58:09.047

错误使用`attr`，您使用的方式`attr('[parent_id=3]')`将搜索属性，`name=[parent_id=3]`如果元素具有此类属性，则每个似乎都不需要使用字符串值。

**[现场演示](http://jsfiddle.net/Uv23s/)**

改变

```
$(xml).find('child').attr('[parent_id=3]').each(function(){ 
```

至

```
$(xml).find('child[parent_id=3]').each(function(){ 
```

# c# - 语句返回无效输出

> ID：14499661
> 
> 赞同：1
> 
> 时间：2013-01-24T10:57:09.970
> 
> 标签：c#, operators, conditional

请参阅下面的代码

```
 totLen = (r.Field<int>("Quantity") <= 0 ? 1 : r.Field<int>("Quantity")) *
   ((r.Field<decimal>("Breath") <= 0 ? 1 : r.Field<decimal>("Breath")) * 
   (r.Field<decimal>("Length") <= 0 ? 1 : r.Field<decimal>("Length")) * 
   (r.Field<decimal>("Height") <= 0 ? r.Field<decimal>("Height") : r.Field<decimal>("Height"))) 
```

在这段代码中，我认为如果**r.Field(COLUMN NAME)**的任何值为零，那么它应该被 1 替换，**仅用于**使用**? 和：** *条件*运算符，但它给了我错误的输出并返回零（0）......
有人可以建议我为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:59:19.090

如果“高度”字段是`0`您仍在乘法中使用它。

改变

```
r.Field<decimal>("Height") <= 0 ? r.Field<decimal>("Height") : r.Field<decimal>("Height") 
```

至

```
r.Field<decimal>("Height") <= 0 ? 1 : r.Field<decimal>("Height") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:01:34.037

```
 totLen = (r.Field<int>("Quantity") <= 0 ? 1 : r.Field<int>("Quantity")) *
 ((r.Field<decimal>("Breath") <= 0 ? 1 : r.Field<decimal>("Breath")) * 
 (r.Field<decimal>("Length") <= 0 ? 1 : r.Field<decimal>("Length")) * 
 (r.Field<decimal>("Height") <= 0 ? 1 : r.Field<decimal>("Height"))) 
```

尝试这个

# ruby-on-rails - 在 ruby on rails 中随时间跟踪数据库

> ID：14499663
> 
> 赞同：1
> 
> 时间：2013-01-24T10:57:11.633
> 
> 标签：ruby-on-rails, rails-activerecord

**更新**

我最终得到了一个专用的统计模型和表格，它使用[when gem](https://github.com/javan/whenever)获取数据。查看我自己的答案以获取更多详细信息。

**原始问题**

在我的 ruby​​ on rails 应用程序中，我想在我的管理页面中制作一个图表，显示我网站上一段时间内的用户数量。

该图表应显示去年所有日期的用户数。

如果有新用户出现，曲线就会上升，如果用户被删除，曲线就会下降。

这将是我所追求的 JSON 结果。

```
[
    {
        "date": "23-01-2013",
        "users": 3201
    },
    {
        "date": "24-01-2013",
        "users": 3451
    },
    {
        "date": "25-01-2013",
        "users": 4351
    },
    {
        "date": "26-01-2013",
        "users": 3950
    },
    {
        "date": "27-01-2013",
        "users": 4150
    }
] 
```

我考虑过创建一个统计模型，并在我的用户模型中添加 before_create 和 before_destroy 过滤器来更新统计模型。

有没有更好的方法，也许是这样做的宝石？我想我还没有找到解决方案，因为我不知道这叫什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:49:23.713

统计模型是一种可能性。如果你不想添加额外的模型，你可以做一个合适的 SQL 查询，例如列出 MySQL 中每年可以使用的新用户数

```
SELECT Year(created_at) as 'year', COUNT(id) as 'users' 
       FROM users GROUP BY Year(created_at); 
# or
SELECT DATE_FORMAT(created_at, '%Y') as 'year', COUNT(id) as 'users' 
       FROM users 
       GROUP BY DATE_FORMAT(created_at, '%Y'); 
```

每个月的新用户数量将类似地使用MySQL的[DATE_FORMAT 函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

```
SELECT DATE_FORMAT(created_at, '%X.%m') as 'year', COUNT(id) as 'users' 
       FROM users 
       GROUP BY DATE_FORMAT(created_at, '%X.%m'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:32:29.347

解决方案是在数据库中制作统计模型和表格。我每天使用when [gem在统计模型上运行write_stats 方法。](https://github.com/javan/whenever)它可能有点重，但它为我提供了很好的数据。

这是无论何时宝石的 schedule.rb

```
set :output, "#{path}/log/cron.log"

every :day, at: "11:58 PM" do
  runner "Statistics.write_count"
end 
```

这是统计模型

```
class Statistics < ActiveRecord::Base
  def self.write_count
    stats = Statistics.new
    stats.users = User.count
    stats.save!
  end
end 
```

统计表有时间戳，所以查询很容易。

这是一个

```
@stats = Statistics.where(created_at: (Time.now.years_ago(1)..Time.now)) 
```

# google-apps-script - Google Apps 脚本：如何让匿名用户将查询参数传递给网络应用程序？

> ID：14499665
> 
> 赞同：1
> 
> 时间：2013-01-24T10:57:15.840
> 
> 标签：google-apps-script, google-sites

我创建了一个简单的 Web 应用程序（发布为可供匿名用户访问），它获取查询参数，如下所示：

```
function doGet(e){Logger.log("Key is"+e.parameter.key);} 
```

将参数传递给应用程序，如下所示： [https ://script.google.com/macros/s/AKfycbxZ_r7tTs1sCQH9UOhPg2AVdWuMCDk6zD58lnsXciazRLmZ7q7P/exec?key=test](https://script.google.com/macros/s/AKfycbxZ_r7tTs1sCQH9UOhPg2AVdWuMCDk6zD58lnsXciazRLmZ7q7P/exec?key=test)

当我以登录用户的身份点击 url 时，它工作正常，能够获取参数。但是当匿名用户点击相同时，数据不会被记录。

是否可以。如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:24:58.163

这里对问题陈述进行了细微的调整 - Logger 仅适用于脚本所有者（也恰好被记录）。我仔细检查过，这确实是行为。我检查了以另一个具有测试帐户的登录用户身份访问一个简单的 Web 应用程序，而 Logger 也不适用于该帐户。

这实际上是当前 Logger 的一个已知限制。

记录器在您编写代码时对调试更有用，而不是在其他人访问您的代码时。记录器信息也不会在不同的运行中保留。

我实际上最终将我的日志语句写入了一个简单的文件。我添加了一些小东西，比如时间戳，你可以让它变得更加健壮。如有必要，您甚至可以向其中添加异常日志和[有效的用户信息。](https://developers.google.com/apps-script/class_session#getEffectiveUser)

下面是一些关于我通常如何通过留给读者的几个练习来设置它的片段。

我运行一次的功能 -

```
function initLog() {
  //add check to see if log already exists so you don't init multiple times
  var logfile = DocsList.createFile('Log file for my script','') ;
  ScriptProperties.setProperty('LogFile', logfile.getId());
  logfile.getId();
} 
```

我可以从代码中的任何位置调用的实用函数 -

```
function logMsg(msg){
 //add more checks here to init log if its not already done
 var logfile = DocsList.getFileById(ScriptProperties.getProperty('LogFile'));
 logfile.append(new Date().toString() + ' - ' + msg + '\n');  
} 
```

简单的线束来展示它是如何工作的——

```
function logTests(){
 initLog();
 logMsg('hello world');
 logMsg('test message');
} 
```

这就是它的样子。希望这可以帮助。 ![在此处输入图像描述](../Images/79f96b3ab73192cfe7c7114adb92626d.png)

# java - 在 Kryo 中序列化和反序列化对象数组

> ID：14499670
> 
> 赞同：4
> 
> 时间：2013-01-24T10:57:42.600
> 
> 标签：java, serialization, deserialization, kryo

我最近一直在测试 Kryo 的序列化和反序列化，并且通常对它感到满意，但是尚不清楚如何处理包含对象数组的类的（反）序列化。该类包含最终字段，因此我似乎无法使用默认的 FieldSerializer（错误是“无法创建类（缺少无参数构造函数）”，但无参数构造函数不适合最终原语）。所以，给定班级

```
@AllArgsConstructor
public class DataObject{
     private final double field1;
     private final double field2;
     private SubObject[] children;
}

@AllArgsConstructor
public class SubObject{
     private final double field1;
     private final double field2;
} 
```

如何有效地编写一个序列化器/反序列化器来处理这个问题？我的假设是我在 com.esotericsoftware.kryo.io.Input 中遗漏了一些东西，这将让我在自定义序列化程序中执行此操作，但这可能是错误的轨道..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-13T12:54:28.853

问题是 3 年前提出的，所以写答案有点傻，但我找到了一个解决方案，直接在`kryo`的自述文件中描述

这是一个[链接](https://github.com/EsotericSoftware/kryo#object-creation)

基本上，当您通过简单的调用序列化对象`writeObject(Output, Object)`而不提供自己的序列化程序时，使用需要非参数构造函数的`kryo`默认值。`FieldSerializer`

您可以提供`kryo`将调用使用`reflection`机制的私有非参数构造函数。我认为这是您想要的合适方法，因为私有零参数构造函数不违反架构原则

# javascript - 如何在 extjs4 的单个请求中将对象数组发送到服务器端？

> ID：14499675
> 
> 赞同：4
> 
> 时间：2013-01-24T10:58:00.500
> 
> 标签：javascript, extjs, extjs4

我在 extjs4 MVC 中工作，我一直被困在如何在单个请求中发送对象数组的问题上。我知道如何将单个对象发送到服务器。

1）这是我的一些控制器代码：-

```
 check:function () {
    console.log("Inside check function.");
    //creating objects in javascript
    var obj = new Object();
    for (var i = 0; i < 4; i++) {
        var inputs = document.getElementsByName(i);
        var radio = "";
        for (var j = 0; j < inputs.length; j++) {
            if (inputs[j].checked) {
                name = inputs[j].name;
                value = inputs[j].value;
                //obj[i].name1=name;
                obj[i] = {'questionId': name, 'option': value};
                console.log("questionId=" + name + " value=" + value);
                console.log("object name=" + obj[i].questionId + " Object value=" + obj[i].option);

                var check = Ext.ModelManager.create(
                    {
                        questionId: name,
                        option: value,
                    }, 'Balaee.model.qb.QbquestionoptionModel');
                console.log("User Infooooooooo:" + check.get('option'));
            }// End of if statment
        }// End of inner for loop
    }//End of outer for loop
    var storeObject = this.getStore('qb.QbquestionoptionStore');
    storeObject.sync();
    console.log("data send");

}// End of check function 
```

2）型号类：---

```
Ext.define('Balaee.model.qb.QbquestionoptionModel',{
    extend: 'Ext.data.Model',
    idproperty:'',//fields property first position pk. 
    fields: ['optionId','questionId','isAnswer','option','media','keyword','mediaTypeId',],
    /*associations:[
    {type:'BelongsTo',  model:'Mediatype',  foreignKey:'mediaTypeId'},
    {type:'BelongsTo',  model:'Qbquestion', foreignKey:'questionId'},
    {type:'HasMany',    model:'Qbregistereduserfreequestionawnser', foreignKey:'answerOptionId'},
    ]*/
}); 
```

3）这是我的商店：---

```
Ext.define('Balaee.store.qb.QbquestionoptionStore',{
    extend: 'Ext.data.Store',
    model: 'Balaee.model.qb.QbquestionoptionModel',
    //autoLoad: true,
    proxy:
    {
        type:'ajax',
        api:
        {
            read:'http://localhost/balaee/Balaee/index.php?r=QuestionBank/qbpaper/SetUserAnswer11',
            create: 'http://localhost/balaee/Balaee/index.php?r=QuestionBank/qbpaper/SetUserAnswer12',
            update: 'http://localhost/balaee/Balaee/index.php?r=QuestionBank/qbpaper/SetUserAnswer13',
            //destroy: ,
        },//End of api 
        reader:
        {
            type:'json',
            //root: ,
            //successProperty: ,
        },//End of reader
        writer:
        {
            type:'json',
            root:'data'
        }   
    }//End of proxy
});//End of store 
```

我该如何解决这个问题？请给一些建议....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T11:16:00.040

好吧，首先你必须将它作为 JSON 发送（至少我建议这样做），这很容易完成，因为该**[`Ext.Ajax.request()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax-method-request)**方法支持开箱即用

```
Ext.Ajax.request({
    url: 'YourURL',
    jsonData: YourObjectRef, // can be any object or JSON string
    success: function(response, opts) {
        // your code
    }
}); 
```

如果您想在商店中使用，请使用`auto`Modelfield 的类型。这种类型可以包含任何对象。这是一个**[JSFiddle](http://jsfiddle.net/sran/xVAem/)**，其中包含模型中的对象列表。

这是您的商店配置的修改。请注意，您可以定义`read`only *API*或*CRUD API*。对于后者，无法将`destroy`操作保留为未设置。您还需要知道，其中的根属性`writer`意味着您要对数据进行*编码*，这意味着所有都可以通过它发送，`get`这显然不是您想要的。

*现在看看这个代理的作用：*默认情况下`batch`，`true`它将导致*存储*在调用同步时立即提交**所有**更改。如果一个操作有多个更改，代理将提交一组对象而不是单个对象。现在，如果您不关心这一点，您现在需要预测您是否为每个请求获取一个对象或一组对象。我们不希望以这样的方式结束。但是`allowSingle`作者的属性可以让我们解决这个问题。如果您将其设置为`true`，即使只有一个对象，它也会始终将一组对象发送回服务器。您现在知道每次都会得到一个数组。

```
proxy:{
    type:'ajax',
    api: {
        read:'index.php?r=...',
        create: 'index.php?r=...',
        update: 'index.php?r=...',
        destroy: 'index.php?r=...',
    },
    reader: {
        type:'json',
        root:'data'
    },
    writer: {
        type:'json',
        allowSingle: false
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:35:08.747

如果您想通过单个代理请求以数组的形式从商店提交多条记录，则应将您的 writer配置为**allowSingle**配置为**false**。这将强制您的代理请求将请求对象包装在一个数组中，即使只有一个模型实例被保存/添加/等。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.writer.Json-cfg-allowSingle](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.writer.Json-cfg-allowSingle)

```
writer: {
    type:'json',
    root:'data',
    allowSingle: false
} 
```

# objective-c - NSMutableData 替换字节

> ID：14499679
> 
> 赞同：-1
> 
> 时间：2013-01-24T10:58:07.907
> 
> 标签：objective-c, nsmutabledata

我正在尝试以正确的顺序替换字节（服务器以错误的顺序发送它们）。而且我很难完成它。也许有人可以帮助我正确地做到这一点

```
Input:  < F801 0020 > (NSMutableData)
Output: < 2000 01F8 > (NSMutableData) 
```

尝试使用`replaceBytesInRange:<(NSRange)> withBytes:<(const void *)>`

但是我很难使用这种方法来解决这个问题。在objective-c中没有交换字节的简单方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:16:32.517

让它以这种方式工作

```
+ (int) dataToIntSwitched:(NSMutableData*) data
{
    int elem = OSReadLittleInt([data bytes], 0);
    return elem;
} 
```

# ios - 仅在初始加载后从 UIWebView 加载 Safari 中的 URL？

> ID：14499683
> 
> 赞同：0
> 
> 时间：2013-01-24T10:58:18.713
> 
> 标签：ios, xcode, uiwebview, safari, youtube

上周我一直在尝试弄清楚如何检测 Javascript 何时加载到网页上，然后从 UIWebView 跳出到 Safari。

我目前正在使用此代码：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if (navigationType == UIWebViewNavigationTypeOther) {

        [[UIApplication sharedApplication] openURL:request.URL];
        return NO;
    }

    return YES;
} 
```

在网址[http://m.youtube.com/](http://m.youtube.com/)

（通常这条线`if (navigationType == UIWebViewNavigationTypeLinkClicked) {`有效，但不适用于 YouTube 等 Javascript 页面，所以我`if (navigationType == UIWebViewNavigationTypeOther) {`改用它。

这可行，但不幸的是在第一次加载页面时跳转到 Safari。我只想在 Safari 中加载后续页面。

有没有办法检测页面第一次加载，然后阻止它在 Safari 中打开，但允许后续请求在 Safari 中打开？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:27:14.173

米

您可以使用以下代码，如果您有任何疑问，请告诉我...

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[urlArr objectAtIndex:indexPath.row]]]; 
```

# php - setPage() 函数的页码错误：0

> ID：14499685
> 
> 赞同：4
> 
> 时间：2013-01-24T10:58:24.513
> 
> 标签：php, smarty, tcpdf

我的 tcpdf 代码是

```
$file_to_show_test_details = 'pdf_view_test_details.tpl';
$test_details= $smarty->fetch($file_to_show_test_details);

// Set some content to print
$html = <<<EOD
$test_details
EOD;

// set default header data
$pdf->SetHeaderData(PDF_HEADER_LOGO, PDF_HEADER_LOGO_WIDTH, 'XYZ',$pdf->writeHTML($html, true, false, true, false, '')); 
```

函数 writeHTML 不起作用，这就是浏览器中出现错误“setPage() 函数上的错误页码：0”的原因。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-22T08:00:53.163

您是否尝试使用 addPage()？

```
//$pdf = new PDF();

$pdf->AddPage(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:24:53.577

对于您的情况，我建议您跳过调用`$pdf->SetHeaderData`并以您需要显示 pdf 的方式格式化 html 并`$pdf->writeHTML`以正确的布局调用。请注意，您也可以在 html 中使用内联 css，您将不得不玩一段时间，直到您得到您想要的，因为 tcpdf 无法像浏览器一样渲染 html，但您最终会设法做到这一点。Html 表格是你的朋友

# macos - Mac OS X 不向 WebDAV 资源发送 cookie

> ID：14499686
> 
> 赞同：0
> 
> 时间：2013-01-24T10:58:24.757
> 
> 标签：macos, webdav, ntlm

我的 WebDAV 服务器（基于 Tomcat 的 DefaultServlet）需要 NTLM 身份验证。服务器在 Windows 客户端上运行良好。

当我将 Mac Finder 连接到服务器时，Mac (OS X 10.6.8) 客户端对每个请求执行 HTTP 身份验证握手。这是因为它不会将会话 cookie 发送回我的服务器。我可以设置一个配置选项来告诉它接受和发送会话cookie吗？

当我通过 Safari 连接到服务器时，会发送会话 cookie。

提前致谢。

沃尔夫冈

# c - 在翻译单元中使用 extern

> ID：14499689
> 
> 赞同：0
> 
> 时间：2013-01-24T10:58:30.823
> 
> 标签：c, extern, linkage

```
extern int a;
int a = 1;

int main(void)
{
  return 0;
} 
```

这是UB吗？标准在 6.2.2/7 中说

如果在翻译单元内，相同的标识符同时出现在内部和外部链接中，则行为未定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T11:07:02.740

默认链接*是* `extern`. 说明`extern`符表明它可能在另一个翻译单元或同一个翻译单元中定义和初始化。声明的相对位置`extern`无关紧要，否则它们会有些危险。

C99 TC2 §6.9.2/1

> 如果对象标识符的声明具有文件范围和初始化程序，则该声明是标识符的外部定义。

接下来是一个例子：

```
int i1 = 1;  // definition, external linkage
…
extern int i1;  // refers to previous, whose linkage is external 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T11:16:55.773

这是完全定义的行为。这就是编译器在包含头文件后的预处理后得到的结果。

你的困惑似乎来自：

```
int a = 1; 
```

没有内部联系。在文件范围内`a`具有外部链接。如果添加了说明符，它将具有内部链接`static`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:16:48.930

答案是肯定的和否定的。

如果`a`在同一翻译单元的其他地方定义，那么是的，这是未定义的行为。

如果`a`未在其他任何地方定义，则`int a=1`；将被视为（尽管在同一文件中定义）的*外部*定义。`a`所以它不是未定义的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-24T11:09:18.147

是的，我认为这将导致（依赖于工具链的）行为。为什么？

编译器在翻译诸如`int a = ...;`. 该行`extern int a;`告诉编译器对“a”的每个引用都将由链接器解析。

这留下了编译器处理这种矛盾的两种可能方式： 1\. 偶然（因为您只有一个名为“a”的可见符号）链接器将引用绑定到同一翻译单元的已创建符号“a”。2.编译器忽略extern语句，直接绑定到本编译单元的a。

必须将“内部”符号声明为静态（`static int a = ...;`），然后我认为你会得到你的 UB。

# flash - 使用 Flash Builder 触摸和拖动

> ID：14499695
> 
> 赞同：1
> 
> 时间：2013-01-24T10:58:48.610
> 
> 标签：flash, touch, pivot, drag, builder

我正在 Flash Builder 中处理一个不太复杂的项目，该项目需要使用一些图像进行触摸和拖动事件。

除了一个我无法解决的问题外，一切都正常工作：拖动对象时，图像会捕捉到图像的左上角。我认为这是因为它的支点在那里，我尝试使用矩阵更改它，但我没有解决这个问题。我希望图像被其中心拖动。

谁能帮我吗？

# backbone.js - 以 Backbone 模型作为数据源的剑道网格？

> ID：14499700
> 
> 赞同：0
> 
> 时间：2013-01-24T10:59:07.217
> 
> 标签：backbone.js, datasource, kendo-ui

有没有人可以分享使用 Backbone 模型作为其数据源的 Kendo 网格（或任何 Kendo 对象）的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:47:02.327

不确定这是否是您正在寻找的，但它确实提供了一个使用带有主干模型的剑道网格的简单示例。

[https://github.com/kendo-labs/kendo-backbone](https://github.com/kendo-labs/kendo-backbone)

# security - Apache Shiro - 基于表单的身份验证似乎对我不起作用

> ID：14499703
> 
> 赞同：3
> 
> 时间：2013-01-24T10:59:13.907
> 
> 标签：security, shiro

我在实现基于表单的身份验证时遇到了问题。我创建了一个简单的 Web 应用程序，在打开页面 (/jsp/index.jsp) 之前，我想检查用户的权限并在必要时打开一个登录页面。

不幸的是，如果我尝试打开 index.jsp 的链接（*http://localhost:8080/mywebapp/jsp/index.jsp*），index.jsp 会立即出现，但我希望先登录 login.jsp！以下是重要文件：

Shiro.ini

```
[main]
# specify login page
authc.loginUrl = /login.jsp
# name of request parameter with username; if not present filter assumes 'username'
authc.usernameParam = user
# name of request parameter with password; if not present filter assumes 'password'
authc.passwordParam = passw
# does the user wish to be remembered?; if not present filter assumes 'rememberMe'
authc.rememberMeParam = remember
[url]
# enable authc filter for all application pages
/jsp/** = authc
[users]
adminstrator=throttling,Administrator 
```

web.xml

```
<web-app id="starter" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <listener>
        <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
    </listener>
    <filter>
        <filter-name>ShiroFilter</filter-name>
        <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>ShiroFilter</filter-name>
        <url-pattern>/*</url-pattern>
        </filter-mapping>
</web-app> 
```

这是**maven项目的目录结构/src/main**

```
├───java
├───resources
│       log4j.properties
│       Shiro.ini
│
└───webapp
    │   login.jsp
    │
    ├───jsp
    │       index.jsp
    │
    └───WEB-INF
        │   web.xml
        │
        └───lib 
```

我将这两个依赖项添加到 pom.xml

```
 <dependency>
      <groupId>org.apache.shiro</groupId>
      <artifactId>shiro-web</artifactId>
      <version>1.2.1</version>
    </dependency>
    <dependency>
      <groupId>org.apache.shiro</groupId>
      <artifactId>shiro-core</artifactId>
      <version>1.2.1</version>
    </dependency> 
```

希望我写了任何重要的信息！谁能帮助我为什么它对我不起作用？谢谢，V。

log4j.properties

```
log4j.rootLogger=TRACE, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %-5p [%c]: %m%n
log4j.logger.net.sf.ehcache=WARN
log4j.logger.org.apache=WARN
log4j.logger.org.quartz=WARN
log4j.logger.org.apache.shiro=TRACE
log4j.logger.org.apache.shiro.util.ThreadContext=INFO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:24:50.350

抱歉，我在 shiro.ini 中犯了一个错误。我写的是 [url] 而不是 [urls]... 再次抱歉，感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:59:09.287

如果您在此处显示的内容是准确的，那么您的问题可能是 Shiro 默认查找“shiro.ini”，而您创建了“Shiro.ini”。您的日志中可能还显示“ShiroFilter 无法找到 ini 文件”的消息。

另请注意，您需要确保将 authc 应用于 login.jsp 以便登录工作。

# javascript - 为什么 javascript regex <> 删除数字？

> ID：14499704
> 
> 赞同：0
> 
> 时间：2013-01-24T10:59:15.300
> 
> 标签：javascript, regex

看看这两个javascript命令：

```
alert(' test £32 <!-- -->'.replace(/^\s+|[ ><!-]+$/g,''));

alert(' test £32 <!-- -->'.replace(/^\s+|[ <!->]+$/g,'')); 
```

第一个运行正常 - 它提醒消息“test £32”，这是我所期望的。但是，第二个产生“test £”。为什么是这样？为什么在 [] 中移动 > 会导致它开始剥离数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:01:31.073

`-`从最后一个地方移动到两者之间`!`，`>`会产生巨大的变化。具体来说，如果`-`不是[字符类](http://www.regular-expressions.info/charclass.html)**中**指定的第一个或最后一个字符，那么您将有一个类似. 然后该类将匹配所有字符与和之间的[代码点](http://en.wikipedia.org/wiki/Code_point)。`a-b``a``b`

Unicode 代码点`!`是 U+0021，而代码点`>`是 U+003E。中间范围包含许多字符，包括所有数字（这些字符的代码点从 U+0030 到 U+0039）——您可以[在此处](http://en.wikipedia.org/wiki/List_of_Unicode_characters#C0_Controls_and_Basic_Latin)查看确切列表。因此，字符类最终也会匹配数字。

要解决此问题，请将连字符放在字符类中的最后一个位置（就像在您的第一个示例中一样），或者使用反斜杠对其进行转义以将其视为文字字符：

```
alert(' test £32 <!-- -->'.replace(/^\s+|[ <!\->]+$/g,'')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:03:25.667

`-`您必须将to转义`\-`为`-`在正则表达式中构建一个范围， .

采用

```
' test £32 <!-- -->'.replace(/^\s+|[ ><!\-]+$/g,'') 
```

# ruby-on-rails - 带参数的复杂 if 条件

> ID：14499710
> 
> 赞同：1
> 
> 时间：2013-01-24T10:59:41.220
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, google-geocoder

```
if @near.nil?
  loc, @near, found = get_user_geolocation
else
  loc = GeoKit::Geocoders::GoogleGeocoder.geocode(@near)
  found = loc.success
  @near = loc.full_address
end 
```

在第一个 if 部分，发生了什么？我可能不擅长语法，但这让我很好奇。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T11:10:43.733

参见[多重赋值](http://rubyquicktips.com/post/377861025/multiple-assignment)

```
> a,b,c = [10,20,30] # or a,b,c = 10,20,30
> a => 10 
> b => 20 
> c => 30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:02:57.990

该`get_user_geolocation`方法返回三个值`loc`：`@near`和`found`。

# android - 从Android中的联系人中获取第二个号码

> ID：14499713
> 
> 赞同：3
> 
> 时间：2013-01-24T10:59:41.650
> 
> 标签：android, android-contacts

我正在尝试从联系人中获取第二个号码。现在我可以获取第一个数字。我想获取特定联系人的第二个或第三个号码。这可能吗？

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    if(resultCode == RESULT_OK){
        if(requestCode == RQS_PICKCONTACT){
            Uri returnUri = data.getData();
            Cursor cursor = getContentResolver().query(returnUri, null, null, null, null);

            if(cursor.moveToNext()){
                int columnIndex_ID = cursor.getColumnIndex(ContactsContract.Contacts._ID);
                String contactID = cursor.getString(columnIndex_ID);

                int columnIndex_HASPHONENUMBER = cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER);
                String stringHasPhoneNumber = cursor.getString(columnIndex_HASPHONENUMBER);

                if(stringHasPhoneNumber.equalsIgnoreCase("1")){
                    Cursor cursorNum = getContentResolver().query(
                            ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                            null, 
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID + "=" + contactID, 
                            null, 
                            null);

                    //Get the first phone number
                    if(cursorNum.moveToNext()){
                        int columnIndex_number = cursorNum.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
                        String stringNumber = cursorNum.getString(columnIndex_number);
                        textPhone.setText(stringNumber);
                    } 
```

让我知道！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:12:10.860

您当前的代码将仅提供第一个电话号码，要获取所有电话号码**，只需遍历光标，它将为您提供给定联系人的所有子电话号码**。

```
while (cursorNum.moveToNext()) {
    int columnIndex_number = cursorNum.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
    String stringNumber = cursorNum.getString(columnIndex_number);
    Log.i(TAG,"Contact number "+stringNumber);

    // do your desired task here. 

} 
```

# javascript - 如何从 href 标签中调用“div id”

> ID：14499715
> 
> 赞同：0
> 
> 时间：2013-01-24T10:59:46.340
> 
> 标签：javascript, html, asp.net-mvc, dom-events

我有这样的代码，我想`detailMess`在确认后显示。那么，我如何`div-id`在 a-href 中调用：

```
 <a href="" onclick="return confirm('1 time count if you click OK, Are you sure?');">Show contact details</a>

        <div id="detailMess" style="display: none;">

            <%  
                string uID = "-1";
                var u = Membership.GetUser();
                if (u != null) { uID = u.ProviderUserKey.ToString(); }
                string U1 = Convert.ToString(Model.Load.OwnerId) ?? "";
                bool isOwner = uID.Equals(U1, StringComparison.OrdinalIgnoreCase); 
            %>
            <% if ((!LDC.Common.isShowLetGoContactInfor) || (User.IsInRole("Staff")) || (isOwner))
               {  %>
            <%
                if (Model.User != null && Model.User.Profiles == null) { Model.User.Profiles = new LDC.Domain.Profile(); }
                Html.RenderPartial("ContactInfo", Model);
            %>
            <% }
               else
               { %>
            <% Html.RenderPartial("LetgoContactInfo"); %>
            <%} %>
        </div> 
```

请有人帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:06:15.660

嗨试试下面的代码它会帮助你...

```
<html>
<head>
<script type='text/javascript'>

function check()
{
    if(confirm("1 time count if you click OK, Are you sure?"))
    document.getElementById("sam").style.display="";
    else
    document.getElementById("sam").style.display="none";
}

</script>
</head>
<body>
    <a href="#" onclick='check()'>check</a>
    <div class="Sam" id="sam">Hi You are here now</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:04:11.697

试试看：

`<a href="#" onclick="document.getElementById('detailMess').show()">click</a>`

我认为它会起作用。

# ios - 传递参数 pinterest app ios 像 facebook 和 twitter

> ID：14499727
> 
> 赞同：0
> 
> 时间：2013-01-24T11:00:46.260
> 
> 标签：ios, facebook, parameter-passing, pinterest

我想将参数传递给 IOS 上的 pinterest 应用程序，如 facebook 和 twitter 应用程序以显示一些页面......

“pinterest://”正在打开应用程序，但我想打开一些董事会/人的页面......

任何帮助都会得到帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:02:48.040

pinterest 没有公共 API，现在有办法做到这一点。

# nuget - 当我添加依赖项时，Octopack 无法构建

> ID：14499733
> 
> 赞同：2
> 
> 时间：2013-01-24T11:01:12.037
> 
> 标签：nuget, nuget-package, octopus-deploy

Octopack 无法使用以下 xml 构建

```
<?xml version="1.0"?>
<package >
  <metadata>
    <id>WebCrawlerMVC</id>
    <version>1.0.0.0</version>
    <title>Web Crawler</title>
    <authors>lardern</authors>
    <owners>Nostrum Group</owners>
    <requireLicenseAcceptance>false</requireLicenseAcceptance>
    <description>packaging webcrawler mvc</description>
    <releaseNotes>no release notes</releaseNotes>
    <copyright>Copyright 2013</copyright>
  </metadata>
   <dependencies>
        <dependency id="Ninject" version="3.0.1.10" />
        <dependency id="HtmlAgilityPackHelpers" />
    </dependencies>
    <files src="C:\Users\lardern\Documents\Visual Studio 2010\Projects\WebCrawlerMVC\packages\Ninject.3.0.1.10\lib\net40\Ninject.dll"/>
    <files src="C:\Users\lardern\Documents\Visual Studio 2010\Projects\HtmlAgilityPack\HtmlAgilityPack\HtmlAgilityPackHelpers\bin\Release\HtmlAgilityPackHelpers.dll" />
</package> 
```

我收到的错误是

> 错误 2 命令 ""C:\Users\lardern\Documents\Visual Studio 2010\Projects\WebCrawlerMVC\WebCrawlerMVC..\packages\OctoPack.1.0.111\tools\NuGet.exe" 包 "C:\Users\lardern\ Documents\Visual Studio 2010\Projects\WebCrawlerMVC\WebCrawlerMVC\WebCrawlerMVC.nuspec" -OutputDirectory "bin" -basePath "C:\Users\lardern\Documents\Visual Studio 2010\Projects\WebCrawlerMVC\WebCrawlerMVC" -版本 "1.0.0.0" -NoPackageAnalysis”退出，代码为 1。WebCrawlerMVC

我不太确定这意味着什么，如果我没有添加依赖项，它会在 release 中构建，否则会返回此错误。

编辑：我编辑了上面的代码，感谢亚当发现错误，但错误仍然存​​在。还取出每个依赖项，看看是否有一个导致错误，两次都失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:21:53.087

如果您查看完整的构建日志，您应该能够找到更多信息，而不仅仅是上面的错误行 - NuGet.exe 可能正在抱怨它们。

但是，Octopus 包[无论如何都不应该包含依赖项](http://octopusdeploy.com/documentation/packaging)。

> 另一个不能很好地转换为 Octopus 的 NuGet 功能是依赖项。NuGet 具有用于跟踪包之间依赖关系的便捷功能。例如，当 NHibernate 之类的包依赖于 log4net 之类的包时，就会使用它。NuGet 将安装 NHibernate、解决依赖关系并安装 log4net。请务必注意，NuGet 会将它们安装到磁盘上的两个单独文件夹中：
> 
> ```
> packages/NHibernate.x.y.z
> packages/log4net.x.y.z 
> ```
> 
> 虽然这对通过 Visual Studio 引用的库有意义，但在 Octopus 中没有意义，原因与上述相同。例如，如果您的 Octopus 应用程序包依赖于 log4net，那么在磁盘上您将拥有：
> 
> ```
> packages/YourApp.x.y.z  
> packages/log4net.x.y.z 
> ```
> 
> 在运行时，YourApp 下的可执行文件或 ASP.NET 站点会尝试调​​用 log4net 中的方法，但由于找不到 DLL 而失败。虽然这在理论上可以使用配置文件中的探测路径来解决，但实际上最好避免这种方法。
> 
> 因此，Octopus NuGet 包不能有依赖项。
> 
> 相反，您需要使用的任何库都应捆绑在标准二进制文件夹中的包内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:05:36.513

看起来在倒数第二行的末尾缺少一个 > 。8)

编辑：好吧，也许不是这样。但我发现[这个链接](https://nuget.codeplex.com/workitem/1554)描述了路径中的空格问题。

也许这是相关的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-20T14:28:45.647

[https://docs.nuget.org/create/nuspec-reference#specifying-dependencies](https://docs.nuget.org/create/nuspec-reference#specifying-dependencies)

> dependencies 元素是 metadata 元素的子元素

我想这就是你在运行 nuget pack 时出错的原因

# database - 通用项目目录的可扩展数据库设计与每个用户的特定目录混合？

> ID：14499737
> 
> 赞同：1
> 
> 时间：2013-01-24T11:01:20.880
> 
> 标签：database, design-patterns, database-design, ruby-on-rails-3.2, scalability

我想要一个通用的威胁目录，最初将用于所有用户。该目录有大约 100 个威胁。威胁与其他模型有关，例如 AssetType。一种威胁影响多种资产类型，一种资产类型受多种威胁影响。

我的问题是我希望用户修改目录中的威胁，删除威胁和添加威胁，但目录的修改需要只针对他，而不是针对其他用户。与asset_types 和关系相同。我希望每个用户都能够修改关系，但不是所有用户。

我的方法是，我可以拥有 CatalogThreat 和 CatalogAssetType 以及 CatalogThreatsAssetTypes，它们将成为一般目录，当创建新用户时，我会将每个 catalog_threat 复制到名为威胁的表中，其中每个威胁都与用户相关。但是这种方式我认为我会有很多重复，因为我认为用户会修改很少的目录。

你有其他选择吗？这是一个好的数据库设计吗？我应该知道任何设计模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:12:24.727

复制所有内容的唯一真正替代方法是对主目录的更改列表进行建模。因此，如果用户从目录中删除了某些内容，您可以将其存储在一条记录中，指示“就像主目录一样，除了 Fred 已删除威胁 3”。如果他们插入新的关系，您将需要存储它。

查询此模型将非常困难，因为您需要选择不存在从当前用户删除的目录记录，并与来自当前用户的任何插入联合。根据您的数据库，您可能可以将其包装在视图中。

# javascript - 如何在 jQuery 中设置不带值的 HTML 属性（例如选中、选中、禁用）

> ID：14499745
> 
> 赞同：2
> 
> 时间：2013-01-24T11:01:34.683
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [设置没有值的属性](https://stackoverflow.com/questions/13159180/set-attribute-without-value)

有时，在处理 HTML 时，需要在不使用任何值的情况下设置 DOM 元素的属性，例如，请参见`selected`此处的参数：

```
<select id="auto-makers">
  ...
  <option value="fiat" selected>FIAT</option>
  <option value="ford">FORD Motor Company</option>
  <option value="gm">General Motors</option>
  ...
</select> 
```

HTML 文档中的这种属性并不罕见。例如，下面是可能的属性列表：

*   `checked`;
*   `selected`;
*   `required`;
*   `multiple`;
*   `disabled`;
*   *等等*。

如何使用 Javascript 和/或 jQuery 在运行时设置没有值的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:01:34.683

按照您的示例，假设您有

```
<select id="auto-makers">
  ...
  <option value="fiat">FIAT</option>
  <option value="ford">FORD Motor Company</option>
  <option value="gm">General Motors</option>
  ...
</select> 
```

并且您想将该`selected`属性添加`<option>`到`value="fiat"`. 因此，使用**纯 Javascript**，您可以使用`setAttribute`方法：

```
var select = document.getElementsById('auto-makers');
for (var i=0; i<select.options.length; i++){
   if (select.options[i].value=="fiat"){
     select.options[i].setAttribute('selected','');
     break;
   }
} 
```

而使用**jQuery**，您可以简单地使用以下`attr`方法：

```
$('#auto-makers').find('option[value="fiat"]').attr('selected',''); 
```

在这两种情况下，都会传递一个空字符串作为属性的值。

您可以通过在您提供的更改之后查看相关的 HTML 代码来验证输出是否是所需的。

最后，注意一个类似的问题是：“ [Set attribute without value](https://stackoverflow.com/questions/13159180/set-attribute-without-value) ”。

# android - 如何在android的主屏幕上创建应用程序快捷方式时防止自动显示toast消息我不想要消息

> ID：14499747
> 
> 赞同：1
> 
> 时间：2013-01-24T11:01:34.817
> 
> 标签：android

```
 Intent shortcutIntent = new Intent(getApplicationContext(),    HomeScreen.class);      
        shortcutIntent.setAction(Intent.ACTION_MAIN);

        Intent addIntent = new Intent();
        addIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
        addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "AIMS ICD");
        addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,Intent.ShortcutIconResource.fromContext(getApplicationContext(), R.drawable.aims));
        addIntent.putExtra("duplicate", false);
        addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
        getApplicationContext().sendBroadcast(addIntent); 
```

此代码工作正常，但在创建快捷方式后此显示消息“已创建快捷方式 AIMS ICD”我不想要此消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:03:57.193

抱歉，无法阻止默认系统 Toast 的出现（来源：[Dianne，Google 员工](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Y6rhIXTMr8M)）

# r - 在 plotmath() 中使用两个变量和一个表达式

> ID：14499748
> 
> 赞同：2
> 
> 时间：2013-01-24T11:01:36.050
> 
> 标签：r, plotmath

我想做这样的事情：

```
Title<-paste(typis[which.panel],bquote(nu[x]==.(typas[which.panel])),sep="") 
```

其中 typas 是数字向量， typis 是字符向量，例如：

```
typas<-1:3
typis<-letters[1:3] 
```

`which.panel`是 1:3 的整数（这是因为`Title`会根据面板变化）

并且`nu[x]`应该显示为一个`plotmath`对象。但R忽略了逗号后的所有内容 `paste`:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:23:44.173

目前还不清楚你想要什么，但如果它只是一个包含两个信息位的表达式，你不需要`paste()`，只需在调用中包含两个位并根据你想要多少空间`bquote()`将它们分开一个或多个`~`. 需要注意的关键是`bquote()`可以包含任意数量的不同`.()`内容。

```
typas <- 1:3
typis <- letters[1:3]
which.panel <- 2
expr <- bquote(.(typis[which.panel]) ~~ nu[x]==.(typas[which.panel]))

plot(1:10, main = expr) 
```

如果您需要围绕表达式部分进行更多格式设置`typis`（例如添加 a`:`如果这是面板标签），则将其添加到相关内容中`.()`：

```
expr2 <-
  bquote(.(paste0(typis[which.panel], ":")) ~~ nu[x]==.(typas[which.panel]))
plot(1:10, main = expr2) 
```

当然，这可以在表达式之外完成：

```
typis2 <- paste0(letters[1:3], ":")
expr3 <- bquote(.(typis2[which.panel]) ~~ nu[x]==.(typas[which.panel]))
plot(1:10, main = expr3) 
```

这三个图如下所示：

![在此处输入图像描述](../Images/41f305b7c69b81458cbd308fa34bbcd4.png)

最后两个基本上是等价的。

# c# - 在 MVC 中将删除功能添加到我的编辑控制器

> ID：14499753
> 
> 赞同：2
> 
> 时间：2013-01-24T11:01:45.830
> 
> 标签：c#, asp.net-mvc, entity-framework

我试图弄清楚如何在我的应用程序的同一页面上拥有一个编辑功能和一个删除功能。目前我的控制器看起来像这样：

```
 [HttpPost]
    public ActionResult Edit(CodeTagViewModel codeTagViewModel, FormCollection collection)
    {
        if (ModelState.IsValid)
        {

            List<Tag> tagsToAdd = new List<Tag>();

            codeTagViewModel.Tags = db.Tags.ToList();
            foreach (Tag tag in codeTagViewModel.Tags)
            {
                if (collection[tag.TagID.ToString()].ToString().Contains("true"))
                {
                    tagsToAdd.Add(tag);
                }
            }

            codeTagViewModel.SelectedTags = tagsToAdd;

            Code code = db.Code.Find(codeTagViewModel.CodeID);
            MapModelToCode(codeTagViewModel, code);

            db.Entry(code).State = EntityState.Modified;
            db.SaveChanges();
            return View(codeTagViewModel);
        }
        return RedirectToAction("Index");
    }

    [HttpPost, ActionName("Delete")]
    public ActionResult Edit(CodeTagViewModel codeTagViewModel, FormCollection collection)
    {
        if (ModelState.IsValid)
        {

            List<Tag> tagsToAdd = new List<Tag>();

            codeTagViewModel.Tags = db.Tags.ToList();
            foreach (Tag tag in codeTagViewModel.Tags)
            {
                if (collection[tag.TagID.ToString()].ToString().Contains("true"))
                {
                    tagsToAdd.Add(tag);
                }
            }

            codeTagViewModel.SelectedTags = tagsToAdd;

            Code code = db.Code.Find(codeTagViewModel.CodeID);
            MapModelToCode(codeTagViewModel, code);

            db.Code.Remove(code);
            db.SaveChanges();
            return View(codeTagViewModel);
        }
        return RedirectToAction("Index");
    } 
```

我的编辑视图中有两个按钮：

```
 <p>
        <input type="submit" value="Save" />
    </p>
    <p>
        <input type="submit" value="Delete" />
    </p> 
```

我的视图模型如下所示：

```
public class CodeTagViewModel
{
    public List<Tag> Tags { get; set; }
    public List<Tag> SelectedTags { get; set; }        

    public int CodeID { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public DateTime DateAdded { get; set; }
    public DateTime LastUpdated { get; set; }
    public string Project { get; set; }
    public string CMS { get; set; }
    public int DotNetVersion { get; set; }
    public string Dependencies { get; set; }
    public string Author { get; set; }
    public string CodeFile { get; set; }
    public string TFSLocation { get; set; }

} 
```

目前删除按钮什么也没做，它根本没有点击代码。

我是 MVC 的新手，并试图弄清楚它是如何处理所有背景的，所以任何帮助都将不胜感激。

编辑：我还研究了路由方面并输入：

```
 //
    // POST: /Code/Edit/5 
```

在删除功能上方（与编辑功能相同），仍然没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:14:49.663

**问题：**

两个按钮都提交父表单，这在您的解决方案中可能相同。

**背景资料：**

如果您通过按钮提交（无论是哪个按钮），您的 HTML 元素都在表单元素内。浏览器将检查表单属性中给出的 url。

**解决方案：**

将 EDIT 放在单独的表单中 - 引用编辑 url（带有整个模型），然后创建一个单独的表单 - 引用删除 url - 带有 ModelID 和 Delete 按钮。（不是整个模型！）

更改删除功能，因此它只需要 ModelID 作为参数（而不是整个模型）。

***就行了 ：）***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:43:06.447

那是因为 the`Edit`和`Delete`button 都做同样的事情，它们只是发布表单。所以他们**总是会发帖到同一个地方**。

您应该将删除按钮更改为 a `ActionLink`，然后将`Delete`方法更改为 a `HttpGet`，传入要删除的项目的 ID，然后检索并删除它。

像这样：

```
@Html.ActionLink("Delete", "Delete", "Code", new { CodeID = Model.CodeID }) 
```

然后在您的操作方法中：

```
[HttpGet]
public ActionResult Delete (int CodeID)
{
   //perform deletion
} 
```

否则，您必须使用 Javascript 来根据单击的按钮自动更改表单的发布 URL，这很**讨厌**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:31:30.713

您有两个具有相同名称和参数的 Action 方法。它不会引发编译错误吗？同样在视图中，您有两个提交按钮。您的表单指向哪个动作？

将您的表单指向 ActionMethod“编辑”。

将名称属性添加到您的提交按钮

```
 <p>
    <input type="submit" value="Save" name ="Edit"/>
</p>
<p>
    <input type="submit" value="Delete" name="Remove"/>
</p> 
```

然后在控制器动作方法中：

```
 [HttpPost]
public ActionResult Edit(CodeTagViewModel codeTagViewModel, FormCollection collection)
{
    if (ModelState.IsValid)
    {
       if((collection["Edit"]=="Save") && (collection["Remove"] == null)
        {
           // perform edit operation
        }
        else if((collection["Edit"]== null) && (collection["Remove"] == Delete)
        {
           // perform delete operation
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:13:12.143

您是否尝试过将方法名称更改为删除？

```
 [HttpPost]
    public ActionResult Delete(CodeTagViewModel codeTagViewModel, FormCollection collection)
    {... 
```

我认为没有理由将方法命名为 Edit 并将 ActionName 设置为 Delete。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T12:03:05.780

尝试使用[[HttpDelete]](http://msdn.microsoft.com/en-us/library/system.web.mvc.httpdeleteattribute%28v=vs.98%29.aspx)属性

# php - Youtube“无效类别过滤器”API 错误

> ID：14499755
> 
> 赞同：0
> 
> 时间：2013-01-24T11:01:47.757
> 
> 标签：php, api, youtube

我正在尝试使用演示 API 页面为给定类别的最受欢迎视频创建 Youtube RSS 提要： [https ://gdata.youtube.com/demo/index.html](https://gdata.youtube.com/demo/index.html)

这适用于他们的标准 API 调用之一： [http ://gdata.youtube.com/feeds/base/standardfeeds/most_viewed?alt=rss&time=today](http://gdata.youtube.com/feeds/base/standardfeeds/most_viewed?alt=rss&time=today)

但是，一旦我向其中添加类别，就会收到 400 错误（“无效的类别过滤器”）： http: [//gdata.youtube.com/feeds/base/standardfeeds/most_viewed/-/](http://gdata.youtube.com/feeds/base/standardfeeds/most_viewed/-/) {http:// gdata.youtube.com/schemas/2007/categories.cat}Music?alt=rss&time=today

我试过 urlencoding 它，urlencoding 只是最后一部分，只编码大括号......但似乎无法让它工作。

任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:06:39.663

实际上，我刚刚解决了这个问题 - 如果您单击“提交前编辑 URI”复选框，它会提供有效的 URI 的编码*版本*。

# java - 我如何在这里使用 Gson 将列表发送回 jsp 页面？

> ID：14499759
> 
> 赞同：0
> 
> 时间：2013-01-24T11:01:59.293
> 
> 标签：java, json, jakarta-ee, servlets, gson

在一种情况下，a`servlet A`将 IP 发送到远程服务器，希望服务器将发送回该 IP 共享的文件列表：

```
Servlet A

connection.openConnection(); // Sends the IP as the query parameters
if(connection.getResponseCode() == 200) {  
    requestDispatcher.forward(request,response); // Forward to ShowFiles.jsp
} else { // Error ! } 
```

***注意：“ShowFiles.jsp”是一个 jsp 页面，它将显示它将从服务器接收到的列表。***

好的 ！现在`servlet`在服务器上，让我们命名它`B`，接收查询参数并检查数据库是否有任何与接收到的 IP 对应的文件。如果有文件共享，它会发回名称列表，否则会显示一条消息，提示没有文件被共享。

```
Servlet B (On server that receives IP as query parameter)

String ip = getAttribute("IP");
if( hasSharedFile(ip) ) {
  list = fetchList(ip); // Basically an ArrayList<String>
  // SEND THIS LIST BACK TO THE CLIENT
} else {
   // Return a message saying,No file has been shared till with the server
  } 
```

`servlet B` *要通过（在远程服务器上）*将此列表发送到`ShowFiles.jsp` *（servlet A 向其发送请求）*`JSON`，建议使用`Gson`. 我怎样才能用`Gson`这个列表发送到`ShowFiles.jsp`？

我从来没有用过Gson，所以我什么都不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:57:30.783

```
Servlet B (On server that receives IP as query parameter)

String ip = getAttribute("IP");
if( hasSharedFile(ip) ) {
  list = fetchList(ip); // Basically an ArrayList<String>
  // SEND THIS LIST BACK TO THE CLIENT

    Gson gson = new Gson();
    gson.toJson(list, resp.getWriter());

} else {
   // Return a message saying,No file has been shared till with the server
  } 
```

小服务程序 A

```
if(connection.getResponseCode() == 200) {
    Gson gson = new Gson();
    ArrayList<String> list = gson.fromJson(new InputStreamReader(connection.getInputStream()),ArrayList.class); 
```

.jsp 从阅读器中读取

```
<%@page import="com.google.gson.Gson"%>
<%@page import="java.util.ArrayList"%>

<%
Gson gson = new Gson();
ArrayList list = gson.fromJson(request.getReader(), ArrayList.class);
// ...
%> 
```

# python - Python 基础知识：对于 i，enumerate(seq) 中的元素 ..为什么/如何工作？

> ID：14499762
> 
> 赞同：-1
> 
> 时间：2013-01-24T11:02:03.867
> 
> 标签：python

您好，我发现了一个有趣的片段：

```
seq = ["one", "two", "three"] #edited
for i, element in enumerate(seq):
    seq[i] = '%d: %s' % (i, seq[i])

>>> seq
['0: one', '1: two', '2: three'] 
```

我想知道python是如何做到的......对我来说元素应该是未定义的......但显然它不是......python在这里做什么？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:09:27.773

`enumerate`本质上将输入列表的每个元素转换为元组列表，其中第一个元素作为索引，元素作为第二个元素。`enumerate(['one', 'two', 'three'])`因此变成`[(0, 'one'), (1, 'two'), (2, 'three')]`

紧随其后的位`for`分配给枚举中每个元组的`i`第一个元素和第二个元素。`element`因此，例如在第一次迭代中，`i == 0`and `element == 'one'`，您只需通过其他元组来获取其他迭代的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:15:46.427

enumerate函数的实际定义是这样的

```
enumerate(iterable[, start]) -> iterator for index, value of iterable

Return an enumerate object.  iterable must be another object that supports
iteration.  The enumerate object yields pairs containing a count (from
start, which defaults to zero) and a value yielded by the iterable argument.
enumerate is useful for obtaining an indexed list:
    (0, seq[0]), (1, seq[1]), (2, seq[2]), ... 
```

但是如果未定义参数 seq 将不会返回所需的输出，而是会抛出一个错误，例如 - NameError: name 'seq' is not defined。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:56:35.530

我不确定你想要什么，知道枚举或这里发生了什么。这可能会有所帮助：

```
seq = ["one", "two", "three"]
for i range(3):
    seq[i] = '%d: %s' % (i, seq[i])

>>> seq
 ['0: one', '1: two', '2: three'] 
```

实际上，这里的“seq”是列表类的对象。列表中的每个元素都引用了不同类的独立对象。在上述功能时；首先通过访问“seq[i]”获取每个列表元素对象的引用，使用引用的对象值创建一个新对象（可以属于其他类），现在你再次将“seq[i]”引用到新创建的每个元素的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:09:01.423

你说的对。seq 未定义。您的代码段将不起作用。只有在 seq 之前设置为 seq = ['one', 'two', 'three'] 时它才会起作用。去尝试一下！

# android - 谷歌电视视频屏幕截图

> ID：14499770
> 
> 赞同：1
> 
> 时间：2013-01-24T11:02:48.997
> 
> 标签：android, television

是否可以使用 Google TV/Android SDK/API 进行屏幕截图？我只需要将屏幕放入内存并获得主要的 RGB 颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:24:36.310

这是获得主导RGB颜色[问题](https://stackoverflow.com/questions/10530426/how-can-i-find-dominant-color-of-an-image)的解决方案 ，你也可以试试这个

```
Bitmap bitmap;
View view1 = MyView.getRootView();
view1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(view1.getDrawingCache());
view1.setDrawingCacheEnabled(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T01:46:11.690

要获取电视上显示的内容（不仅仅是您的应用程序）的屏幕截图，您将设置 ADB 并使用 DDMS。在 Google TV 和设置了 ADB 的计算机上执行此操作的步骤如下：

1.  获取计算机的 IP 地址。在 Mac 上，使用 ifconfig
2.  转到电视上的设置应用程序。从菜单中选择**应用程序**，然后 选择**开发人员。**
3.  通过启用复选框将**远程调试**设置为 true
4.  将**调试器 IP 地址**设置为步骤 1 中计算机的 IP 地址
5.  转到电视设置下的**网络**菜单
6.  选择**状态**并记下电视的 IP 地址

在您的计算机上： 使用以下命令将调试器连接到计算机： *adb connect xxx.xxx.x.104*使用在步骤 x 中收到的电视 IP 地址 现在您的调试器已连接到电视。您可以使用 DDMS 和屏幕截图工具

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:17:08.723

这里的主要问题是：“是否有可能制作一个将在后台运行并且仅根据视频截图的主要 RGB 颜色发送一些 http 数据包的应用程序？”

还有其他因素，例如： 1\. 不需要根。2\. google tv系统的截屏操作有多快？可能它取决于使用的硬件。

有没有人尝试在谷歌电视上截屏？

# android - 如何在 android 中使用 GPS_PROVIDER 获取当前准确的 GPS 坐标？

> ID：14499771
> 
> 赞同：1
> 
> 时间：2013-01-24T11:02:52.453
> 
> 标签：android, gps

我正在开发一个基于 GPS 位置导航的 android 应用程序，用于查找用户当前位置。我正在使用 GPS_PROVIDER 我不想使用任何其他提供程序，例如 PASSIVE_PROVIDER 或 NETWORK_PROVIDER 目前我的代码正在运行，它可以准确地为我提供坐标，但是当我退出应用程序并再次启动应用程序时，它给我的坐标与旧的略有不同，而我在同一个地方和同一个位置。
为了找到 GPS 坐标，我使用了以下代码。

```
LocationManager mlocManager = (LocationManager) 
        getSystemService(Context.LOCATION_SERVICE);
MyLocationListener mlocListener = new MyLocationListener();
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
            0, mlocListener); 
```

我的听众课是

```
public class MyLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location loc) {
        loc.getLatitude();
        loc.getLongitude();
        String Text = "My current location is: " + "Latitud = "
            + loc.getLatitude() + "Longitud = " + loc.getLongitude();
        TextView txtgps = (TextView) findViewById(R.id.text_GPS_Coordinates);
        txtgps.setText(Text);
        Toast.makeText(getApplicationContext(), Text, Toast.LENGTH_SHORT)
                .show();
    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), "Disable",
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), "Enable",
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {}
} 
```

我在 AndroidManifest 中定义的权限是：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

请告诉我提供准确可靠坐标的方法，如果可能，请解释您的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:15:07.823

您可能期望最近的位置修复是最准确的。但是，由于位置修复的准确性各不相同，因此最近的修复并不总是最好的。您应该包括根据几个标准选择位置修复的逻辑。标准也因应用程序和现场测试的用例而异。

您可以采取以下几个步骤来验证位置修复的准确性：

*   检查检索到的位置是否比之前的估计明显更新。
*   检查该位置声称的准确度是否比之前的估计更好或更差。
*   检查新位置来自哪个提供商，并确定您是否更信任它。

除此之外，您的 GPS 可能会为您提供 wifi 或 tower 的最后缓存位置。这是一个已知的错误，要克服这个问题，您可以编写自定义算法来忽略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:12:03.143

您用于获取位置的方法始终是准确的。即使您的位置稍有变化，它也会显示不同的坐标。

假设如果你只想得到一个坐标（也就是说，当你第一次打开你的应用程序时，它会保持不变）你可以使用它。

```
public class MyLocationListener implements LocationListener
{
int f=1;
public void onLocationChanged(Location loc) {
    // TODO Auto-generated method stub
   if(f==1)
   {
    loc.getLatitude();
    loc.getLongitude();
    f=2
   }

    String Text = "My current location is: " +
    "Latitud = " + loc.getLatitude() +
    "Longitud = " + loc.getLongitude();

    TextView txtgps = (TextView) findViewById(R.id.text_GPS_Coordinates);

    txtgps.setText(Text);

    Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();

} 
```

现在它将只获得一个位置坐标（即第一个坐标）。

请注意，它仅在您的应用程序运行时获取一次位置。下次打开您的应用程序时，它将更改。我想在运动过程中找到位置不要使用这种方法。

# xml - 将 AES 加密的字节和 IV 存储到 XML 的最佳方法？

> ID：14499778
> 
> 赞同：3
> 
> 时间：2013-01-24T11:03:26.347
> 
> 标签：xml, linq, c#-4.0, encoding, cryptography

我对编码和密码学都很陌生，所以我问的问题可能太基本了。我需要加密提供给我的值并将加密值以及用于加密的 IV 存储在文档中。加密是使用存储在其他地方的主密钥完成的。我使用 AES 加密，加密代码如下所示：

```
 private EncryptedData EncryptValue(string value, byte[] encryptedMasterKey)
        {
            byte[] encryptedValue = new byte[0];
            AesCryptoServiceProvider aesCryptoServiceProvider = null;

            //decrypt the master key
            encryptedMasterKey = DecryptMasterKey(encryptedMasterKey);

            // Create an AesCryptoServiceProvider object
            // with the specified key and IV.                   
            using (aesCryptoServiceProvider = new AesCryptoServiceProvider())
            {
                aesCryptoServiceProvider.Key = encryptedMasterKey;

                // Create an encryptor to perform the stream transform.
                ICryptoTransform encryptor = aesCryptoServiceProvider.CreateEncryptor(
                    aesCryptoServiceProvider.Key, aesCryptoServiceProvider.IV);

                // Create the streams used for encryption.
                using (MemoryStream msEncrypt = new MemoryStream())
                {
                    using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                    {
                        using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                        {
                            //Write all data to the stream.
                            swEncrypt.Write(value);
                        }
                        encryptedValue = msEncrypt.ToArray();
                    }
                }
            }

            EncryptedData encryptedData = new EncryptedData(encryptedValue, aesCryptoServiceProvider.IV);
            return encryptedData;
        } 
```

将数据写入 XML 的代码如下所示：

```
public void WriteData(string id, EncryptedData encryptedData)
    {

        XDocument document = GetValidDocument();
        XElement[] encryptedDataElements = null;
        XElement encryptedDataElement;
        encryptedDataElements = (from element in document.Descendants(EncryptedDataElementName)
                                 where element.Element(IdElementName).Value.ToUpper() == id.ToUpper()
                                 select element).ToArray();
        if (encryptedDataElements.Count() != 0)
        {
            encryptedDataElement = encryptedDataElements.First();
            encryptedDataElement.Remove();
        }
        encryptedDataElement = new XElement(EncryptedDataElementName);
        XElement idElement = new XElement(IdElementName, id);
        encryptedDataElement.Add(idElement);
        XElement encryptedValueElement = new XElement(EncryptedValueElementName);
        encryptedValueElement.SetValue(Encoding.UTF8.GetString(encryptedData.EncryptedValue));
        XElement saltElement = new XElement(SaltElementName, Encoding.UTF8.GetString(encryptedData.Salt));
        encryptedDataElement.Add(encryptedValueElement);
        encryptedDataElement.Add(saltElement);
        document.Element(StoreElementName).Add(encryptedDataElement);
        IXmlService xmlService = GlueRegistry.Instance.GetService<IXmlService>();
        xmlService.SaveXmlDocument(document, filePath);
    } 
```

我认为最好保存为 UTF8 编码的字符串并将值作为 UTF8 编码的字节数组返回。序列化不是一个选项，因为数据是一个一个写入的。问题出在使用 Encoding.UTF8.GetString 的 SetValue 方法中。我也明白我可能应该使用 XElement.Parse。我使用了它，但我得到一个异常，说该值无效。我现在想知道 UTF8 是否是一个不错的选择，或者是否有另一种更好的方法来做我想做的事情。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T12:18:08.553

1.  对于编码，我推荐 Base64。Utf8 旨在将文本转换为字节。它不能将任意二进制数据转换为文本。
2.  我建议使用经过身份验证的加密/添加 MAC。未经身份验证的加密会引发主动攻击，例如填充预言机。

所以你的代码变成了这样：

```
byte[] ciphertext = iv + Encrypt(key, m);
byte[] ciphertextWithMAC = ciphertext + HMAC(key, ciphertext)
string encodedCiphertext = Base64Encode(cipherText) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:14:27.260

虽然我有一些疑问，存储单个字节的加密是否是一个好主意，这乞求暴力攻击，表示形式对我来说是显而易见的：使用数据类型 hexBinary （所以“ABC”将是像“414243”）。这使加密值的长度加倍，但由于 XML 开销，这不太重要。优点是：不需要特殊的字符处理，清晰可见且有些可读性。

# javascript - Sockets.io构建错误，致命错误c1083，请指教

> ID：14499781
> 
> 赞同：1
> 
> 时间：2013-01-24T11:03:47.077
> 
> 标签：javascript, node.js, websocket, socket.io

我正在尝试解压缩 nodejs 模块 socket.io。我在安装 Visual stdio 2005 和 .net framework2 sdk 时遇到了构建错误，所以我做到了。现在我收到以下错误，没有关于如何修复它的建议。请帮我。

我正在使用 32 位的 vista。

您的环境已设置为使用 Node.js 0.8.18 (ia32) 和 NPM

```
 C:\Users\shane>CD C:\nodefiles

C:\NodeFiles>npm install socket.io
npm http GET https://registry.npmjs.org/socket.io
npm http 304 https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/base64id/0.1.0
npm http GET https://registry.npmjs.org/redis/0.7.3
npm http GET https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/socket.io-client/0.9.11
npm http 304 https://registry.npmjs.org/base64id/0.1.0
npm http 304 https://registry.npmjs.org/policyfile/0.0.4
npm http 304 https://registry.npmjs.org/redis/0.7.3
npm http 304 https://registry.npmjs.org/socket.io-client/0.9.11
npm http GET https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http GET https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http GET https://registry.npmjs.org/ws
npm http 304 https://registry.npmjs.org/ws
npm http 304 https://registry.npmjs.org/uglify-js/1.2.5
npm http 304 https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http 304 https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http GET https://registry.npmjs.org/zeparser/0.0.5
npm http 304 https://registry.npmjs.org/zeparser/0.0.5
npm http GET https://registry.npmjs.org/commander
npm http GET https://registry.npmjs.org/tinycolor
npm http GET https://registry.npmjs.org/options
npm http 304 https://registry.npmjs.org/commander
npm http 304 https://registry.npmjs.org/tinycolor
npm http 304 https://registry.npmjs.org/options

> ws@0.4.25 install C:\NodeFiles\node_modules\socket.io\node_modules\socket.io-c
lient\node_modules\ws
> (node-gyp rebuild 2> builderror.log) || (exit 0)

C:\NodeFiles\node_modules\socket.io\node_modules\socket.io-client\node_modules\w
s>node "C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_mo
dules\node-gyp\bin\node-gyp.js" rebuild
MSBUILD : error MSB3428: Could not load the Visual C++ component "VCBuild.exe".
 To fix this, 1) install the .NET Framework 2.0 SDK, 2) install Microsoft Visua
l Studio 2005 or 3) add the location of the component to the system path if it
is installed elsewhere.  [C:\NodeFiles\node_modules\socket.io\node_modules\sock
et.io-client\node_modules\ws\build\binding.sln]
MSBUILD : error MSB3428: Could not load the Visual C++ component "VCBuild.exe".
 To fix this, 1) install the .NET Framework 2.0 SDK, 2) install Microsoft Visua
l Studio 2005 or 3) add the location of the component to the system path if it
is installed elsewhere.  [C:\NodeFiles\node_modules\socket.io\node_modules\sock
et.io-client\node_modules\ws\build\binding.sln]
socket.io@0.9.13 node_modules\socket.io
├── base64id@0.1.0
├── policyfile@0.0.4
├── redis@0.7.3
└── socket.io-client@0.9.11 (xmlhttprequest@1.4.2, uglify-js@1.2.5, active-x-obf
uscator@0.0.1, ws@0.4.25)

C:\NodeFiles>npm install socket.io
^CTerminate batch job (Y/N)? y

C:\NodeFiles>npm install socket.io
npm http GET https://registry.npmjs.org/socket.io
npm http 304 https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/socket.io-client/0.9.11
npm http GET https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/base64id/0.1.0
npm http GET https://registry.npmjs.org/redis/0.7.3
npm http 304 https://registry.npmjs.org/redis/0.7.3
npm http 304 https://registry.npmjs.org/policyfile/0.0.4
npm http 304 https://registry.npmjs.org/base64id/0.1.0
npm http 304 https://registry.npmjs.org/socket.io-client/0.9.11
npm http GET https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http GET https://registry.npmjs.org/ws
npm http 304 https://registry.npmjs.org/uglify-js/1.2.5
npm http 304 https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http 304 https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http 304 https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/zeparser/0.0.5
npm http GET https://registry.npmjs.org/commander
npm http GET https://registry.npmjs.org/options
npm http GET https://registry.npmjs.org/tinycolor
npm http 304 https://registry.npmjs.org/zeparser/0.0.5
npm http 304 https://registry.npmjs.org/options
npm http 304 https://registry.npmjs.org/tinycolor
npm http 304 https://registry.npmjs.org/commander

> ws@0.4.25 install C:\NodeFiles\node_modules\socket.io\node_modules\socket.io-c
lient\node_modules\ws
> (node-gyp rebuild 2> builderror.log) || (exit 0)

C:\NodeFiles\node_modules\socket.io\node_modules\socket.io-client\node_modules\w
s>node "C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_mo
dules\node-gyp\bin\node-gyp.js" rebuild
C:\Users\shane\.node-gyp\0.8.18\deps\uv\include\uv.h(55): fatal error C1083: Ca
nnot open include file: 'stdint.h': No such file or directory [C:\NodeFiles\nod
e_modules\socket.io\node_modules\socket.io-client\node_modules\ws\build\binding
.sln]
Project : warning PRJ0018: The following environment variables were not found:
[C:\NodeFiles\node_modules\socket.io\node_modules\socket.io-client\node_modules
\ws\build\binding.sln]
C:\Users\shane\.node-gyp\0.8.18\deps\uv\include\uv.h(55): fatal error C1083: Ca
nnot open include file: 'stdint.h': No such file or directory [C:\NodeFiles\nod
e_modules\socket.io\node_modules\socket.io-client\node_modules\ws\build\binding
.sln]
Project : warning PRJ0018: The following environment variables were not found:
[C:\NodeFiles\node_modules\socket.io\node_modules\socket.io-client\node_modules
\ws\build\binding.sln]
socket.io@0.9.13 node_modules\socket.io
├── base64id@0.1.0
├── policyfile@0.0.4
├── redis@0.7.3
└── socket.io-client@0.9.11 (xmlhttprequest@1.4.2, uglify-js@1.2.5, active-x-obf
uscator@0.0.1, ws@0.4.25) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:38:28.307

我在 2008 年尝试安装 node-serialport 时遇到了类似的问题，所以我安装了 Visual C++ Studio Express 2010 [http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)

我使用“Visual Studio 命令提示符”来运行“npm install”，效果非常好。

# javascript - jsFiddle：html和js之间没有联系？不能从按钮调用简单的功能？

> ID：14499783
> 
> 赞同：27
> 
> 时间：2013-01-24T11:03:49.770
> 
> 标签：javascript, jsfiddle

抱歉，如果这非常明显，但我不知道为什么这不起作用。

我正在尝试创建一个 jsFiddle。但是，我似乎无法将任何 javscript 附加到任何元素。例如，onclick 没有调用我的 js 函数。

它没有比这个小提琴更简单的了。我从 W3 编辑器复制粘贴它，它工作得很好——点击按钮，得到警报！

```
<button onclick="myFunction()">Click me</button>

function myFunction() {alert("sss");} 
```

[http://jsfiddle.net/tpip/NYkQN/2/](http://jsfiddle.net/tpip/NYkQN/2/)

我在这里想念什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-24T11:07:21.570

只需更改 JavaScript 块的加载方式即可`no wrap (head)`

![在此处输入图像描述](../Images/30a1b3fdd929973a8805205db1a47d00.png)

这里的标准设置是 JS 被包装（！）在 DOM 加载后运行。这意味着该函数不是在全局范围内定义的，而是在包装器内定义的。内联事件处理程序仅适用于全局定义的函数！

当设置为`no wrap (head)`JS 时加载`<head>`并没有被包装。

# ios - 为什么 NSLog 显式打印换行符？

> ID：14499784
> 
> 赞同：1
> 
> 时间：2013-01-24T11:03:49.950
> 
> 标签：ios, console, line-breaks, nslog

我有一个对象（TCLesson），维护其他对象的集合（TCQuestion）。

外部的描述执行如下：

```
-(NSString*)description
{
    return [NSString stringWithFormat:
            @"TCLesson \n"
            "welcomeMessages: \n%@ \n"
            "questionPhrases: \n%@ \n"
            "goodAnswerAcknowledgements: \n%@ \n"
            "wrongAnswerAcknowledgements: \n%@ \n"
            "questions: \n%@ \n",
            self.welcomeMessages,
            self.questionPhrases,
            self.goodAnswerAcknowledgements,
            self.wrongAnswerAcknowledgements,
            self.questions];
} 
```

内部对象几乎相同，例如：

```
-(NSString*)description
{
    return [NSString stringWithFormat:
            @"TCQuestions \n"
            "question: \n%@ \n"
            "pictureFileName: \n%@ \n"
            "answers: \n%@ \n"
            "hints: \n%@ \n",
            self.question,
            self.pictureFileName,
            self.answers,
            self.hints];
} 
```

但是当涉及到日志时，内部对象的描述变得疯狂，并打印出一些奇怪的格式字符，例如：

```
TCLesson 
welcomeMessages: 
(
    "Hi <USERNAME>, let's learn the colors!",
    "Hi <USERNAME>, let's get into this lesson about the colors!",
    "Yay! We gonna learning about the colors, <USERNAME>!"
) 
questionPhrases: 
(
    "What color is this?",
    "What is the name of this color?",
    "What color do you see on the picture?"
) 
goodAnswerAcknowledgements: 
(
    "Yay! Exactly, <USERNAME>. This color is <ANSWER>.",
    "As you said, this color is <ANSWER>.",
    "Woot! Yes, you can see <ANSWER> on the picture."
) 
wrongAnswerAcknowledgements: 
(
    "No, but I can help you.",
    "Wrong answer, but I'm here to help.",
    "Apperantly not, here is a little help."
) 
questions: 
(
    "TCQuestions \nquestion: \n<DEFAULT> \npictureFileName: \norange.jpg \nanswers: \n(\n    ORANGE,\n    GOLD\n) \nhints: \n(\n    \"It is the color of the pumpkin.\",\n    \"It is the color of the orange.\",\n    \"It is the color of the carrot.\"\n) \n",
    "TCQuestions \nquestion: \n<DEFAULT> \npictureFileName: \nyellow.jpg \nanswers: \n(\n    YELLOW,\n    AMBER,\n    LEMON\n) \nhints: \n(\n    \"It is the color of the sun.\",\n    \"It is the color of the banana.\",\n    \"It is the color of the corn.\"\n) \n"
) 
```

如果我能在那里阅读正确的语法，我会非常高兴。

现在要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:31:41.973

由于您在 TCLesson 对象中有 TCQuestion 对象数组，因此当内部调用 TCLesson 的描述方法时，NSArray 的描述方法将被调用为 questions 属性，该属性再次在内部调用 TCQuestion 的描述方法。在此期间，NSArray 的描述方法是格式化（将“\n”替换为“\n”）对 TCQuestion 的描述。

**因此，在返回字符串之前，您需要在 TCLesson 的描述方法中将出现的“\\n”替换为“\n”。**

```
-(NSString*)description
{
    return [[NSString stringWithFormat:
            @"TCLesson \n"
            "welcomeMessages: \n%@ \n"
            "questionPhrases: \n%@ \n"
            "goodAnswerAcknowledgements: \n%@ \n"
            "wrongAnswerAcknowledgements: \n%@ \n"
            "questions: \n%@ \n",
            self.welcomeMessages,
            self.questionPhrases,
            self.goodAnswerAcknowledgements,
            self.wrongAnswerAcknowledgements,
            self.questions] stringByReplacingOccurrencesOfString:@"\\n" withString:@"\n"];
} 
```

# c# - 在查询中使用文本值

> ID：14499785
> 
> 赞同：1
> 
> 时间：2013-01-24T11:03:49.863
> 
> 标签：c#, sql

看来我是个白痴，试图用 C# 对 SQL 数据库执行简单的查询。这是查询，我正在尝试执行：

```
 _query = "SELECT PC.SN, User.Name + ' ' + User.Family as AssignedTo " +  
          "FROM PC LEFT JOIN Users ON PC.USERID = Users.ID " + 
          "WHERE PC.Type = '" + AssetTypeCB.SelectedItem.ToString() + "'"; 
```

问题是我收到“无法在 nvarchar 上调用方法”错误消息。你知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T11:05:42.700

您的查询似乎是错误的。您需要更改`User.Name`为`Users.Name`, 等。正确的查询是：

```
 _query = "SELECT PC.SN, Users.Name + ' ' + Users.Family as AssignedTo " +
          "FROM PC LEFT JOIN Users ON PC.USERID = Users.ID " + 
          "WHERE PC.Type = '" + AssetTypeCB.SelectedItem.ToString() + "'"; 
```

* * *

另外，请允许我建议对您的代码使用参数化查询。[这](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)可以告诉你为什么应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:21:19.360

此查询会将您暴露给 SQL 注入攻击。您应该将其转换为准备好的语句，但实际错误来自您使用表名 Users。你有 SELECT ... **User**应该是用户，你没有得到错误的列名错误的原因是因为 User 是一个保留关键字，因此 SQL Server 会给你这个特定的错误，除非你用 [] 分隔表名. 下面的代码应该修复它。

```
string _query = "SELECT PC.SN, Users.Name + ' ' + Users.Family as AssignedTo FROM PC LEFT JOIN Users ON PC.USERID = Users.ID WHERE PC.Type = @Type";

SqlConnection conn = new SqlConnection("YOUR_CONNECTION_STRING");
SqlCommand cmd = new SqlCommand(_query, connection);
cmd.Parameters.AddWithValue("Type", AssetTypeCB.SelectedItem.Value);
DataTable dt = new DataTable();
SqlDataAdapter adp = new SqlDataAdapter(cmd);
adp.Fill(dt); 
```

如果您的表名实际上是用户，那么此代码将修复错误

```
string _query = "SELECT PC.SN, [User].Name + ' ' + [User].Family as AssignedTo FROM PC LEFT JOIN [User] ON PC.USERID = [User].ID WHERE PC.Type = @Type";

SqlConnection conn = new SqlConnection("YOUR_CONNECTION_STRING");
SqlCommand cmd = new SqlCommand(_query, connection);
cmd.Parameters.AddWithValue("Type", AssetTypeCB.SelectedItem.ToString());
DataTable dt = new DataTable();
SqlDataAdapter adp = new SqlDataAdapter(cmd);
adp.Fill(dt); 
```

**更多关于 SQL 注入攻击**

假设 smooene 在您的原始语句中输入了以下值。

```
'; DELETE FROM Users; -- 
```

当您执行 SQL 语句时，SQL Server 会将其解释为：

```
SELECT PC.SN, User.Name + ' ' + User.Family as AssignedTo  
FROM PC LEFT JOIN Users ON PC.USERID = Users.ID 
WHERE PC.Type = ''; DELETE FROM Users; --' 
```

该语句是完全有效的，并且考虑到您的用户拥有的权限级别，这可能会从用户表中删除所有记录。使用准备好的语句*有助于*阻止这种情况的发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:08:22.020

我认为最好在查询中添加参数

```
using System;
using System.Data;
using System.Data.SqlClient;

class ParamDemo
{
    static void Main()
    {
        // conn and reader declared outside try
        // block for visibility in finally block
        SqlConnection conn   = null;
        SqlDataReader reader = null;

        string inputCity = "London";

        try
        {
            // instantiate and open connection
            conn =  new 
                SqlConnection("Server=(local);DataBase=Northwind;Integrated Security=SSPI");
            conn.Open();

            // don't ever do this
            // SqlCommand cmd = new SqlCommand(
            // "select * from Customers where city = '" + inputCity + "'";

            // 1\. declare command object with parameter
            SqlCommand cmd = new SqlCommand(
                "select * from Customers where city = @City", conn);

            // 2\. define parameters used in command object
            SqlParameter param  = new SqlParameter();
            param.ParameterName = "@City";
            param.Value         = inputCity;

            // 3\. add new parameter to command object
            cmd.Parameters.Add(param);

            // get data stream
            reader = cmd.ExecuteReader();

            // write each record
            while(reader.Read())
            {
                Console.WriteLine("{0}, {1}", 
                    reader["CompanyName"], 
                    reader["ContactName"]);
            }
        }
        finally
        {
            // close reader
            if (reader != null)
            {
                reader.Close();
            }

            // close connection
            if (conn != null)
            {
                conn.Close();
            }
        }
    }
} 
```

# android - 在cmd中通过adb shell获取SQLite数据库

> ID：14499786
> 
> 赞同：9
> 
> 时间：2013-01-24T11:03:55.347
> 
> 标签：android, sqlite

非常简单但令人困惑的问题。我在我的 android 应用程序中使用 sqlite。

我想知道我们可以通过命令提示符在 sqlite 中执行（创建、插入、更新、删除）操作：-

```
path> adb shell

shell@android:/ $ sqlite3 /data/data/pack/databases/name

sqlite> operations..... 
```

这一切都与我的模拟器成功。

但我在连接我的**google nexus**设备后做了同样的事情。

```
path> adb shell

error:-/system/bin/sh: sqlite3: not found 
```

为什么在关闭模拟器并添加设备后显示此错误。

这意味着我们无法通过 cmd 读取设备（不是模拟器）的数据库。

**或者有什么方法可以通过 cmd 读取设备（不是模拟器）数据库。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T11:08:14.570

sqlite3 程序通常不会安装在生产设备上。要检查或修改数据库，您必须将其复制到您的开发机器并使用 Android SDK 中的 sqlite3 程序。

# android - InputStream 读取缓冲区被拆分为两个缓冲区

> ID：14499792
> 
> 赞同：0
> 
> 时间：2013-01-24T11:04:14.817
> 
> 标签：android, bluetooth, inputstream

我使用了 BluetoothChat 示例，并将[其](http://developer.android.com/guide/topics/connectivity/bluetooth.html)用于我的应用程序。我向蓝牙 SPP 设备（蓝牙到 UART）发送了一个命令并得到了答案。此答案的大小可变，但小于 255 字节。

问题是我得到了分成两个缓冲区的答案。第一次读取时的前几个字节（大部分只有两个），然后是其余的。我没有丢失数据，但我需要它完整才能使用它。我试过了`mmInStream.available();`（见代码片段），但这太慢了。我也用 a 试过，`sleep(10);`但没有用。我能做些什么？提前非常感谢！

```
private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket, String socketType) {
        Log.d(TAG, "create ConnectedThread: " + socketType);
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the BluetoothSocket input and output streams
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            Log.e(TAG, "temp sockets not created", e);
        }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectedThread");
        byte[] buffer = new byte[255];
        int bytes;
        // Keep listening to the InputStream while connected
        while (true) {
            try {

                // That was a try, but it's to slow
                //bytesAv = mmInStream.available();
                //if (bytesAv>0){ 

                // Read from the InputStream
                bytes = mmInStream.read(buffer); // TODO

                byte[] buffer2 = new byte[bytes];

                System.arraycopy(buffer, 0, buffer2, 0, bytes);

                // Send the obtained bytes to the UI Activity
                mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, bytes, -1, buffer2)
                        .sendToTarget();
                //}
            } catch (IOException e) {
                Log.e(TAG, "disconnected", e);
                connectionLost();
                // Start the service over to restart listening mode
                BluetoothChatService.this.start();
                break;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:48:35.707

这就是蓝牙 SPP 配置文件的本质，它不提供任何帧边界。因此，您的应用程序应读取所有数据并使用您应通过 SPP 添加到数据中的一些附加标头重新构造任何帧。

# c# - CRM 2011：插件 - 获取语句，从子实体继承总和

> ID：14499797
> 
> 赞同：1
> 
> 时间：2013-01-24T11:04:23.933
> 
> 标签：c#, plugins, dynamics-crm-2011, dynamics-crm, crm

我正在寻找构建一个相当简单的插件来计算使用和剩余的“单位”数量。我有两个自定义实体（父）bc_learninglicences 和（子）bc_llbalance，插件在创建 bc_llbalance 时触发，另一个用于更新。
bc_llbalance：包含
bc_learninglicense（在父实体 bc_learninglicences / bc_name 上查找字段）
bc_units（此记录使用的单位）

bc_learninglicences：包含
bc_name
bc_unitsquantity（设置为单位的总数量）
bc_unitsused（这需要继承“bc_llbalance”上的“bc_units”）
bc_unitsremaining（简单的 bc_unitsquantity - bc_unitsused）
好的，所以我已经包含了我刚刚试图弄清楚如何让 bc_unitsused 继承总和的代码......

ps 我是 CRM 2011 开发新手，只有几周/几个项目经验。

```
// Obtain the execution context from the service provider.
Microsoft.Xrm.Sdk.IPluginExecutionContext context (Microsoft.Xrm.Sdk.IPluginExecutionContext) serviceProvider.GetService(typeof(Microsoft.Xrm.Sdk.IPluginExecutionContext));

//Extract the tracing service for use in debugging sandboxed plug-ins.
ITracingService tracingService =(ITracingService)serviceProvider.GetService(typeof(ITracingService));

if (context.InputParameters.Contains("Target") && context.InputParameters["Target"] is Entity)
{
    // Obtain the target entity from the input parmameters.
    Entity entity = (Entity)context.InputParameters["Target"];

    IOrganizationServiceFactory serviceFactory =(IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
    IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

    EntityReference a = (EntityReference)entity.Attributes["bc_learninglicense"];// ((EntityReference)targetEntity.Attributes["bc_learninglicense"]).Id;

    if (entity.LogicalName == "bc_llbalance")
    {  
        //fetchxml to get the sum total of estimatedvalue
        string value_sum = string.Format(@"<fetch distinct='false' mapping='logical'
          aggregate='true'><entity name='bc_llbalance'><attribute name='bc_units'
          alias='units_sum' aggregate='sum' /><filter type='and'><condition
          attribute='bc_learninglicense' operator='eq' value='{0}' uiname=''</filter></entity>
          </fetch>", a.Id);

        FetchExpression fetch = new FetchExpression(value_sum);
        EntityCollection value_sum_result = service.RetrieveMultiple(fetch);
        decimal TotalValue = 0;
        // decimal TotalValue = 0;

        foreach (var c in value_sum_result.Entities)
        {
            TotalValue = ((Decimal)((AliasedValue)c["value_sum"]).Value);
        }
        Entity llc = new Entity("bc_learninglicences");
        llc.Id = a.Id;
        llc.Attributes["bc_unitsused"] = TotalValue;
        service.Update(llc);
    }
} 
```

所以我认为问题在于与父
实体“bc_learninglicences”的连接，“bc_learninglicense”是子实体“bc_llbalance”的查找字段
。

希望这是有道理的：基本上它不起作用

我从 crm 得到这个错误

```
Unhandled Exception: System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]: Unexpected exception from plug-in (Execute): LearningLicenses.LearningLicenses: System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.Detail: 
<OrganizationServiceFault xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/xrm/2011/Contracts">
  <ErrorCode>-2147220956</ErrorCode>
  <ErrorDetails xmlns:d2p1="http://schemas.datacontract.org/2004/07/System.Collections.Generic" />
  <Message>Unexpected exception from plug-in (Execute): LearningLicenses.LearningLicenses: System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.</Message>
  <Timestamp>2013-01-24T13:11:51.2373399Z</Timestamp>
  <InnerFault i:nil="true" />
  <TraceText>

[LearningLicenses: LearningLicenses.LearningLicenses]
[c1b35170-c563-e211-8c6d-b499bafd5e5b: LearningLicenses.LearningLicenses: Create of bc_llbalance]

</TraceText>
</OrganizationServiceFault> 
```

对此解决方案的任何建议或帮助将不胜感激。

感谢您花时间帮助我解决这个问题！
我在加载父表单时也有一些jscritp，它计算子实体的子网格的总和：这只是为了澄清我需要实现的目标......这还不够，因为父表单仅在加载时更新插件 bc_learninglicences 将在创建 bc_llbalance 时更新。

```
 function timeout(){
     setTimeout(calcUnitTotal, 3000);
    }

  function calcUnitTotal(){

   var grid = document.getElementById('Lines').control; 
   var ids = gridControl.get_allRecordIds();

   var sum = 0;
   var cellValue;

  for(i = 0; i < ids.length; i++) {

     var cellValue = grid.get_selectedRecords('bc_units')[i].value;
     var number = Number(cellValue.replace(/[^0-9\.]+/g,""));
     sum = sum + number;
                                                    }

   Xrm.Page.data.entity.attributes.get('bc_unitsused').setValue(sum);

    var val1 = Xrm.Page.getAttribute('bc_unitsquantity').getValue(); 

    if(val1 != null && sum != null )
       {

    var result = val1 -  sum;

    Xrm.Page.data.entity.attributes.get('bc_unitsremaining').setValue(result); 

     }
      else { alert(val1 + sum + "error: Values not passed for Remaining") }

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:14:11.637

在这里工作的是代码希望它可以帮助某人：

```
public void Execute(IServiceProvider serviceProvider)
    {
        {

            // Obtain the execution context from the service provider.
            Microsoft.Xrm.Sdk.IPluginExecutionContext context = (Microsoft.Xrm.Sdk.IPluginExecutionContext)
                serviceProvider.GetService(typeof(Microsoft.Xrm.Sdk.IPluginExecutionContext));

            //Extract the tracing service for use in debugging sandboxed plug-ins.
            ITracingService tracingService =
                (ITracingService)serviceProvider.GetService(typeof(ITracingService));

            IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
            IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

            if (context.InputParameters.Contains("Target") &&
                    context.InputParameters["Target"] is Entity)
            {
            Entity entity = (Entity)context.InputParameters["Target"];
                Guid a = ((EntityReference)entity["bc_learninglicense"]).Id;
                Entity llc = new Entity("bc_learninglicences");
                llc.Id = a;

                        //fetchxml to get the sum total of estimatedvalue
            string value_sum = string.Format(@"         
                <fetch distinct='false' mapping='logical' aggregate='true'> 
                    <entity name='bc_llbalance'>
                        <attribute name='bc_units' alias='units_sum' aggregate='sum' />
                           <filter type='and'>
                            <condition attribute='bc_learninglicense' operator='eq' value='{0}' uiname='' uitype='' />
                           </filter>
                    </entity>
                </fetch>", a);

                       EntityCollection value_sum_result = service.RetrieveMultiple(new FetchExpression(value_sum));
                       decimal TotalValue = 0;
                       foreach (var c in value_sum_result.Entities)
                       {
                            TotalValue += ((Decimal)((AliasedValue)c["units_sum"]).Value);
                       }       
                        llc.Attributes["bc_unitsused"] = TotalValue;
                        service.Update(llc);
            }
        }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:38:30.783

错误

```
The given key was not present in the dictionary 
```

表示您正在尝试检索属性包中不存在的属性。

我猜这条线会导致异常：

```
TotalValue = ((Decimal)((AliasedValue)c["value_sum"]).Value); 
```

在这里，您假设该值`value_sum`存在，但可能不存在。

一个简单的测试方法是编写如下内容：

```
if (c.Attributes.ContainsKey("value_sum"))
{
    throw new InvalidPluginException("Test - yep no key in the dictionary here!");
} 
```

一旦你可以证明这是导致错误的原因，你就需要看看为什么会这样。

# ios - xcode 错误：ld：找不到框架 GSS

> ID：14499800
> 
> 赞同：1
> 
> 时间：2013-01-24T11:04:43.247
> 
> 标签：ios, objective-c, xcode

我将 libsmbclient.a 移植到 iphone 5.0 的模拟器。它需要函数“krb5_parse_name”。我将 GSS.framework 添加到 project 。

```
ld /Users/hxy/Library/Developer/Xcode/DerivedData/SambaSample-dfgvsqckubfrxxdkscrdwvnewbxa/Build/Products/Debug-iphonesimulator/SambaSample.app/SambaSample normal i386
    cd /Users/hxy/Documents/ios_prj/SambaSample-sim
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-g++-4.2 -arch i386 -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -L/Users/hxy/库/开发人员/Xcode/DerivedData/SambaSample-dfgvsqckubfrxxdkscrdwvnewbxa/Build/Products/Debug-iphonesimulator -L/Users/hxy/Documents/ios_prj/BNSmbRequest-sim/libsmbclient -L/Users/hxy/Documents/ios_prj/BNSmbRequest-sim - F/Users/hxy/Library/Developer/Xcode/DerivedData/SambaSample-dfgvsqckubfrxxdkscrdwvnewbxa/Build/Products/Debug-iphonesimulator-filelist/Users/hxy/Library/Developer/Xcode/DerivedData/SambaSample-dfgvsqckubfrxxdkscrdwvnewbxa/Build/Intermediates/SambaSample. build/Debug-iphonesimulator/SambaSample.build/Objects-normal/i386/SambaSample.LinkFileList -mmacosx-version-min=10。6 -Xlinker -objc_abi_version -Xlinker 2 -lresolv -D__IPHONE_OS_VERSION_MIN_REQUIRED=40300 -licucore -lz -framework UIKit -framework Foundation -framework CoreGraphics -framework GSS -lsmbclient -o /Users/hxy/Library/Developer/Xcode/DerivedData/SambaSample-dfgvsqckubfrxxdkscrdwnewbxa /Build/Products/Debug-iphonesimulator/SambaSample.app/SambaSample

ld：未找到框架 GSS
命令 /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-g++-4.2 失败，退出代码为 1

```

我按照以下步骤添加了框架：项目->目标->链接的框架和库->+

我怎么了？

# ruby-on-rails - Rails 解析 XML 提要的最快方法？

> ID：14499802
> 
> 赞同：0
> 
> 时间：2013-01-24T11:04:50.837
> 
> 标签：ruby-on-rails, ruby, xml, nokogiri

我有大约 50 个 XML 提要需要解析和排序。我已经使用 nokogiri 完成了这项工作，它在页面加载时解析 XML 提要并创建一个哈希值，我可以通过它进行遍历。但是真的很慢。因此，我正在寻找更好的解决方案。

我想到的解决方案：

1.  创建一个 cron 作业，该作业创建一个静态 XML 提要，其中所有 50 个提要都已解析和排序。使用 JS 或 nokogiri 解析这个 XML 提要。在用户站点或服务器端解析它哪个更快？

2.  以某种方式打破 cron 作业 XML 提要分页。提要有例如 200-500 个项目，我只需要向用户展示大约 8 个项目。页..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T11:17:46.947

> 它在页面加载时解析 XML 提要

*真是个*坏主意。除非你需要超新鲜的信息，并且愿意为此牺牲一些机器资源。

在后台进程中获取/解析它们。将结果存储在数据库（或文件，无论什么都可以）中并提供您的本地内容。这会快得多。

*即使*它们非常频繁地更改，也要在后台解析它们。这样你就不会通过让几个 web 工作者做完全相同的工作来消耗 CPU 和加载网络。

# c# - 如何使用 C# Windows 窗体创建流畅的动画？

> ID：14499803
> 
> 赞同：7
> 
> 时间：2013-01-24T11:04:51.933
> 
> 标签：c#, forms, animation, smooth

由于我的学校项目，我必须仅使用 Windows 窗体创建游戏..

我决定创建一个 2D 赛车游戏。所以现在我需要移动汽车图像。为了移动它，我尝试使用 KeyDown 事件对汽车进行动画处理，但是动画确实步履蹒跚。那么还有其他方法可以创建动画吗？还是有可能以某种方式解决它？（对于这辆车，我使用了一个停靠在表单上的 PictureBox，并且在它的绘制事件中，我在正确的窗口位置重新绘制了汽车。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T11:10:24.920

这篇文章应该可以解决您的问题： [simple-animation-using-c-windows-forms](https://stackoverflow.com/questions/188349/simple-animation-using-c-windows-forms)

他详细介绍了他如何以 Windows 形式编写动画，并涵盖了您的一些问题。

如果这不能解决问题，请使用 Freeman 所说的一些 XNA 库查找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:09:13.547

根据您提供的详细信息，我可以这样说，如果您想创建一个迷你游戏，我建议您将 WPF 与一些 XNA 库一起使用，因为 WinForms 并没有真正削减来实现非常令人印象深刻的图形体验，而是它有利于创建简单的 GUI 工具。有时甚至双缓冲也没有多大帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T12:38:21.943

你可以制作一个运动动画系统

```
 int x = pictureBox1.Location.X;
        int y = pictureBox1.Location.Y;
        if (e.KeyCode == Keys.Right) x += 1;
        else if (e.KeyCode == Keys.Left) x -= 1;
        pictureBox1.Location = new Point(x, y); 
```

为了让它更快地改变 x+=1 x-=1 和 y+=1 y-=1; 到更大的数字，比如 y x-=3; 所以在这个鳕鱼中，你是箭头键，但只有左右键，因为你会反复向前行驶，所以你只能左右移动

# iphone - 当用户单击 UITableview 行时，如何在另一个视图中打开 url？

> ID：14499804
> 
> 赞同：0
> 
> 时间：2013-01-24T11:04:54.650
> 
> 标签：iphone, uitableview, ios5

当用户选择行时，我想在另一个视图中打开 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:10:13.967

使用 UIWebVIew 在另一个视图中打开链接。

使用 tableView 的 didSelectRowAtIndexPath - 获取 tableview 的选定行。

在 didSelect 表视图委托上 - 导航到所需视图 - 使用 UIWebView 加载 URL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:19:24.620

只需属性在您的另一个视图中合成该 url 并使用所选项目设置值..请参见下面的示例...

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
yourNextViewController *objNextView = [[yourNextViewController alloc]initWithNibName:@"yourNextViewController" bundle:nil];

    objNextView.strURL = [yourArray objectAtIndex:indexPath.row];;
    [objNextView.strURL retain];
    [self.navigationController pushViewController:objNextView animated:YES];
    [objNextView release];
} 
```

和属性，合成如下..

```
@interface yourNextViewController : UIViewController{
       NSString *strURL;
}
@property(nonatomic, retain)    NSString *strURL;
@end

@implementation yourNextViewController
@synthesize strURL; 
```

使用后`strURL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:14:09.600

您需要使用`didSelectRowAtIndexPath`委托：

```
- (void)tableView:(UITableView *)tbView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"didSelectRowAtIndexPath %d",indexPath.row);
    // Either load your url here using the UIWebView or use the below code to open URL in safari.
    // [[UIApplication sharedApplication] openURL:[NSURL URLWithString:hereURLYouWantToOpen]];
} 
```

要在 UIWebView 中加载 URL，您可以使用以下代码：

```
UIWebView *webView = [[UIWebView alloc] initwithFrame:CGRectMake(your co-ordinate)];
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"your URL"]]]; 
```

# asp.net - IIS 上带有 MySQL 的 ASP.NET 应用程序

> ID：14499809
> 
> 赞同：0
> 
> 时间：2013-01-24T11:04:57.633
> 
> 标签：asp.net, mysql, iis

我想在 ISS-Server (Windows Server 2008) 上运行 ASP.Net 应用程序。

我已经安装了“MySQL-Connector”和 MySQL-DB。我发布了 ASP.Net 应用程序并将结果复制到 wwwroot 文件夹中。

当我尝试运行该应用程序时，出现以下错误消息：

```
Unable to find the requested .Net Framework Data Provider.  It may not be installed. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentException: Unable to find the requested .Net Framework Data Provider.  It may not be installed.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[ArgumentException: Unable to find the requested .Net Framework Data Provider.  It may not be installed.]
   System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) +1402071
   System.Data.EntityClient.EntityConnection.GetFactory(String providerString) +34 
```

我无法弄清楚为什么会抛出这个错误，因为我肯定安装了连接器。我应该在 Web.Config 或其他地方添加一些东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:30:05.207

您发布的构建是否包含连接器？检查 bin 文件夹。

很可能您的连接器已安装到开发机器上的 GAC，并且它不会在本地复制到项目中，因此当您进行构建时，它只会构建站点并假设您也已将其安装在服务器上。

您可以手动强制它在本地复制连接器，方法是在解决方案资源管理器中选择引用，右键单击并选择属性并将 Copy Local 设置为 true。

# joomla - JRequest::getCmd 弃用

> ID：14499810
> 
> 赞同：1
> 
> 时间：2013-01-24T11:05:02.620
> 
> 标签：joomla, joomla2.5

`JRequest::getCmd`如果弃用，我在文档中找不到如何在 joomla 2.5 中修改它 ！

```
function propios(){
    $model = &$this->getModel(JRequest::getCmd('view'));
    $view  = &$this->getView(JRequest::getCmd('view'), 'html');
    $view->setModel($model, true);
    $view->hardwarePropio();
} 
```

任何的想法！

最后我的控制是

```
class HardwareController extends JController
{
    // busca los hardwares propios
    function propios(){
        $jinput = JFactory::getApplication()->input;
        $view = $jinput->getCmd('view', 'hardwares');
        JFactory::getApplication()->input->set('view', $view);
        $model = &$this->getModel($view);
        $view = &$this->getView($view, 'html');
        $view->setModel($model, true);
        $view->$view->hardwarePropio();
    }

$view       = JFactory::getApplication()->input->getCmd('view', 'hardwares');
JFactory::getApplication()->input->set('view', $view); 
```

如果我删除最后两行，则视图中调用函数的链接不起作用

```
<a href="<?php echo JURI::root()?>index.php/hardware/propios">Equipos propios</a> 
```

如何调用`function hardwarePropio()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:20:54.953

而不是这个——

```
$model = &$this->getModel(JRequest::getCmd('view'));
$view  = &$this->getView(JRequest::getCmd('view'), 'html');
$view->setModel($model, true);
$view->hardwarePropio(); 
```

你可以用这个-

```
$jinput   = JFactory::getApplication()->input;
$view     = $jinput->getCmd('view', 'hardwares');

$model = &$this->getModel($view);
$view  = &$this->getView($view,'html');
$view->setModel($model, true);
$view->hardwarePropio(); 
```

API - [http://doc.joomladev.eu/api25/Joomla-Platform/Application/JInput.html](http://doc.joomladev.eu/api25/Joomla-Platform/Application/JInput.html)

# jquery - 使用 jQuery 获取 div 内的图像宽度

> ID：14499815
> 
> 赞同：0
> 
> 时间：2013-01-24T11:05:19.003
> 
> 标签：jquery

```
<div class="divclass">
    <ul>
      <div class="lidiv"> <li><img src="img1.jpg"/></li> </div>
      <div class="lidiv"> <li><img src="img2.jpg"/></li> </div>
      <div class="lidiv"> <li><img src="img3.jpg"/></li> </div>
      <div class="lidiv"> <li><img src="img4.jpg"/></li> </div>
      <div class="lidiv"> <li><img src="img5.jpg"/></li> </div>
    </ul>
</div> 
```

我如何获得图像宽度？所有图像的宽度都不同。我想获取图像宽度并将其提供给 div class="lidiv"。任何人都可以帮忙吗？请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:09:45.450

```
$('.divClass ul li img').width(); 
```

这段代码应该可以工作。但是 Rory McCrossan 是对的，你的 html 是无效的。浏览器可能会删除 中的`div`标签`li`，因此您可以在 javascript 中访问它。

但是你可以给`li`标签一个宽度：

```
$('.divClass ul li').each(function() {
    var $li = $(this);
    $li.width($li.find('img').width());
}); 
```

警告：在某些浏览器上，DOMReady 事件在图像加载之前触发！因此，如果您得到 0 宽度（或`undefined`），则应稍后执行此代码。您可以收听图像加载事件：

```
$('.divClass ul li img').load(function() {
    var $img = $(this);
    $img.parent().width($img.width());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:18:32.060

第一个循环遍历 de div-items。然后选择后代 img 元素。得到图片宽度后，放到div的css-style中。

```
$(document).ready(function(){    
    $("div.lidiv").each(function() { 
        img = $(this).find('img');
        img_width = img.width();
        $(this).css('width', img_width);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:10:48.320

尝试这个

```
var imgWidth = jQuery('img').clientWidth; 
```

并编写有效的 HTML。

# javascript - 如何触发 Javascript 函数并在 Web 浏览器中接收它？

> ID：14499818
> 
> 赞同：1
> 
> 时间：2013-01-24T11:05:28.763
> 
> 标签：javascript, wpf, webbrowser-control

是否有可能（如果有，如何？）触发 Javascript 函数并在 Web 浏览器中接收结果？

例如：

我有一个带有 Javascript 的网站。我的网络浏览器源代码在那里。当我执行某些操作时，网络浏览器应该会自动接收它。与 的相反`InvokeScript()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:12:42.170

如果您有一个带有公共方法的类的实例，您想从您的 Javascript 中调用它，您需要将它作为一个对象包含在内，以便为您的 WebBrowser 控件编写脚本。

```
wbMainBrowser.ObjectForScripting = new MyWindowsClass(); 
```

现在，如果您的班级`DoSomething();`在您的 javascript 中有一个方法，您会这样做

```
window.external.DoSomething(); 
```

您还可以从这些方法传递输入和接收值。

# php - 与 PHP 的活动链接

> ID：14499832
> 
> 赞同：0
> 
> 时间：2013-01-24T11:06:28.657
> 
> 标签：php, navigation, hyperlink, nav

我一直在阅读很多关于这个问题的帖子，但我无法找到一个好的解决方案，所以我可能需要你的帮助。

我有一个包含 header.php 的 index.php。这个想法是，当我单击其他页面时，例如：page2 中的 header.php 链接更改为活动到相应的页面。

像任何其他正常导航一样应该可以工作。=）

目前，这是我到目前为止所拥有的，但它不起作用。你知道为什么吗？请问你能帮帮我吗？

提前致谢，

//在 index.php 我有这个：

```
<body>
<div id="wrapper">
    <!--HEADER-->
    <?php include_once("header.php"); ?>
    <!-- HEADER -->
    <div id="mainContainer">
        <div class="inner-main">
            <!--MAIN-->
            <?php $page = "home"; ?>
            <?php include_once("includes/home.php"); ?>
            <!--MAIN-->
        </div>
    </div><!--mainContainer-->
</div><!--wrapper--></body> 
```

//在header.php中我有以下内容：

```
<div id="header">
<div class="inner-header">
    <div class="top-nav">
        <ul id="nav" class="nav clearfix">
            <li class="<?php echo ($page == "home" ? "selected" : "")?>"><a href="home.php">HOME</a></li>
            <li class="division">&bull;</li>
            <li class="<?php echo ($page == "page2" ? "selected" : "")?>"><a href="page2.php" target="_self">PAGE 2</a></li>
        </ul><!--nav-->
    </div><!--top-nav-->
</div><!--inner-header--></div><!-- header--> 
```

//那么如果我点击顶部导航的page2呢？如何查看 page.php 并且相应的链接在顶部导航中处于活动状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:10:21.393

`$page`您应该在包含 header.php 之前定义变量

索引.php：

```
<body>
<div id="wrapper">
    <!--HEADER-->
    <?php $page = "home"; ?>
    <?php include_once("header.php"); ?>
    <!-- HEADER -->
    <div id="mainContainer">
        <div class="inner-main">
            <!--MAIN-->

            <?php include_once("includes/home.php"); ?>
            <!--MAIN-->
        </div>
    </div><!--mainContainer-->
</div><!--wrapper--> 
```

# git - Git bundle 按分支和标签创建，包括所有对象，无需任何更新

> ID：14499835
> 
> 赞同：0
> 
> 时间：2013-01-24T11:06:41.250
> 
> 标签：git, bundle

我有一个包含多个分支的 git 项目

我想使用基于标签的 git bundle 不断更新这个存储库的离线副本。我生成包然后标记它。

我想同步一些分支只是为了减小我的包大小。

生成包： git bundle create branch-list ^last_tag

使用以下标签完成标记： git tag -f branch-list tag_name

标记和捆绑创建的分支列表是相同的。

然而，在生成一个包和标记之后，如果我用这个新标签生成另一个包，它会压缩所有对象并且包的大小非常大，几乎和 git 的大小一样大，而实际上它应该拒绝创建空的捆。

这种行为仅在某些 git 中可见。在其他一些情况下，它工作正常。什么不见​​了？谢谢您的帮助。

# javascript - 变量在简单的 Ajax 帖子中不起作用

> ID：14499837
> 
> 赞同：0
> 
> 时间：2013-01-24T11:06:55.777
> 
> 标签：javascript, jquery, ajax

似乎无法让变量 getID 工作。我正在尝试更改 div 的 html。我知道该变量具有正确的值。

```
$('.cardid').change(function() {
    var getID = $(this).attr('value');

        $.ajax({
        type: "POST",
        url: "inc/change_thumbnail.php",
        data: "id="+getID,
        cache: false,
        success: function(data) {
            $("#"+getID).html(data);
            alert("success");
        },
        error: function (err) {
            alert("error"); 
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:18:55.993

将 $.ajax 中的数据写为**data: {id : getID}，**而不是**data: "id="+getID,**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:09:36.873

使用[val](http://api.jquery.com/val/)获取输入的值：

```
var getID = $(this).val(); 
```

当您发出 POST 请求时，您还应该使用 data 参数让 jQuery 正确发送值：

```
$.ajax({
    type: "POST",
    url: "inc/change_thumbnail.php",
    data: {id:getID},
    cache: false,
    success: function(data) {
        $("#"+getID).html(data);
        alert("success");
    },
    error: function (err) {
        alert("error"); 
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:25:15.513

你可以试试这个：

```
$('[id="'+getID+'"]').html(data); 
```

是的，你应该这样传递：

```
data:{id:getID} 
```

# backbone.js - 当在backbonejs中触发添加事件时？

> ID：14499840
> 
> 赞同：1
> 
> 时间：2013-01-24T11:06:58.243
> 
> 标签：backbone.js

何时在集合中触发“添加”事件？

我的想法是，当我执行诸如`app.mycollection.create(this.newAttributes());`添加事件之类的事情时，将被触发。

实际上我在初始化视图时这样做

```
window.app.mycollection.on('add',this.render,this) 
```

所以理想情况下，首先应该有一个发布请求（当我创建时），然后是获取请求（我的渲染函数从后端获取行）。但在网络控制台中，我得到相反的结果。我首先看到一个获取请求，然后是发布请求。

这让我认为在调用创建方法后立即触发“添加”事件，而无需等待创建完成。

因此，这会获取我的旧数据，而不包括刚刚创建的数据。请阐明一些观点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:12:52.827

您已立即执行`render`功能。尝试更新您的代码：

`window.app.mycollection.on('add', this.render, this)`

### 编辑

[看一看](http://backbonejs.org/#Collection-create)

> 创建模型将导致立即在集合上触发“添加”事件，将新模型发送到服务器时的“请求”事件，以及一旦服务器响应成功后的“同步”事件模型的创建。如果您想在将新模型添加到集合之前等待服务器，请传递 {wait: true}。

# windows - Win32：存储调试信息以在崩溃中幸存

> ID：14499842
> 
> 赞同：0
> 
> 时间：2013-01-24T11:07:03.690
> 
> 标签：windows, debugging

如果我的程序崩溃，我想在某处存储一些信息以进行调试。在下一次开始时，我会阅读此信息。我可以在注册表或文件系统中执行此操作，但这不是很快。我可以使用共享内存和第二个进程，但我想避免一直运行第二个程序。

我想知道是否有更快的方法。如果程序崩溃，是否有任何快速且不会丢失的 Windows 机制（管道、共享内存等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:20:03.200

您可以考虑使用应用程序事件日志：（此处为 C# 代码，但您也可以不受管理地执行）

```
字符串 cs = "MyAppEvents";
if (!EventLog.SourceExists(cs))
   EventLog.CreateEventSource(cs, "Application");    

EventLog.WriteEntry(cs, message, EventLogEntryType.Error);

```

写在那里的事件被发送到服务，这可能足够快。事件日志服务的架构在这里解释：http: [//oreilly.com/catalog/winlog/chapter/ch02.html](http://oreilly.com/catalog/winlog/chapter/ch02.html) （它很旧，但没有太大变化）

编辑：自 NT4 时代以来，它发生了变化 :) 从来没有版本的 windows (>2000 - NT5) 有一个更有效的功能，称为事件跟踪。你可以在这里阅读更多关于它的信息[http://msdn.microsoft.com/en-us/magazine/cc163437.aspx](http://msdn.microsoft.com/en-us/magazine/cc163437.aspx)

一个合理的实现应该在你的进程和服务之间使用一个命名管道，在同一台机器上使用共享内存映射（事实上，你可以在 Windows 系统中找到一个名为“eventlog”的命名管道）

# java - 在 Android 中通过手指拖动控制 XY 运动

> ID：14499844
> 
> 赞同：1
> 
> 时间：2013-01-24T11:07:05.830
> 
> 标签：java, android, touch, andengine

我目前正在使用 AndEngine 在 Android 上制作 2D 滚动射击游戏，但我遇到了相对触摸控制的问题，它允许玩家通过向上/向下/向左/向右拖动手指来控制精灵来移动船和船应该像通过触摸板控制指针一样移动到与手指相同的方向（这在现在的触摸屏 Space Invader 类游戏中很常见）

所以我想出了这个代码，

```
float oldX, oldY;
float X, Y;
        public boolean onSceneTouchEvent(Scene pScene,
                TouchEvent pSceneTouchEvent) {

            if(pSceneTouchEvent.isActionMove()){
                float currentX = pSceneTouchEvent.getX();
                float currentY = pSceneTouchEvent.getY();

                float deltaX = currentX-oldX;
                float deltaY = currentY-oldY;

                System.out.println("X: " + X + " Y: " + Y);

                X= X + deltaX;
                Y= Y + deltaY;

                oldX = currentX;
                oldY = currentY;
            }
            return true;
        } 
```

我遇到的问题是我将用来设置屏幕上精灵位置的变量 X，Y 不会根据我的手指移动而增加/减少，如果我连续拖动手指右侧，X值应该不断增加，当我向左拖动手指时，X 值也应该不断减少。但我所拥有的是 X 值根据我手指在屏幕上的位置而增加/减少。我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:15:55.973

我猜平板电脑无法组合几次扫描。水平扫动通常是一个手势，而不是一个动作。

我认为您应该在停止扫描时设置指针的位置，以便您可以重新开始新的扫描。

另请查看 Android 中的手势：

[http://mobile.tutsplus.com/tutorials/android/android-gesture/](http://mobile.tutsplus.com/tutorials/android/android-gesture/) http://www.anddev.org/gesturedetector_and_gesturedetectorongesturelistener-t3204.html

OnGestureListener 中有一个方法 onScroll(args)，可以帮助您并节省时间。

# emacs - 我的印象笔记模式现在不起作用

> ID：14499849
> 
> 赞同：5
> 
> 时间：2013-01-24T11:07:15.423
> 
> 标签：emacs, org-mode, evernote

我输入了正确的用户和密码，但 emacs 告诉我

> evernote::EDAM::Error::EDANUserException（参数：consumerKey errorCode：INVALID_AUTH）

我使用了 0.41 版本的 evernote-mode ，并且已经完成了所有设置。

文件“Evernote-Client-Output”显示此消息：

> ((class . ErrorReply)(result_code . 8)(command_id . 7)(message . "Evernote::EDAM::Error::EDAMUserException (parameter: consumerKey errorCode: INVALID_AUTH)"))

请告诉我如何处理这个错误。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T18:19:42.587

evernote-mode 可能需要更新以使用 OAuth 或开发人员令牌。更多信息[在这里](https://github.com/evernote/evernote-sdk-ruby)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-31T18:25:36.853

evernote-mode 已更新为 oauth 并使用 pymander 的开发人员令牌，请参见 [此处](https://github.com/pymander/evernote-mode)。但是由于 gdbm 无效，打开现有笔记本时存在已知问题，请参阅 repo 中的未解决问题。该错误已在最近的民间[回购](https://github.com/optidatascience/evernote-mode)中得到修复。

# c++ - 在 C++ 中使用数组输入定义重载函数是否安全？

> ID：14499850
> 
> 赞同：1
> 
> 时间：2013-01-24T11:07:17.547
> 
> 标签：c++, arrays, pass-by-reference, overloading

在 C++ 中定义以下两种方法并在运行时不存在混淆的情况下使用它们是否安全？

```
void map(float (&a)[10], const double (&b)[6]);
void map(float (&a)[10], const double (&b)[3]); 
```

或者

```
void map(double (&a)[6], const float (&b)[10]);
void map(double (&a)[3], const float (&b)[10]); 
```

他们编译好，所以我认为他们的签名应该不同，一切都会好起来的。但是，我目前遇到内存问题，所以我想确定一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T11:12:07.137

是的，它非常安全。此外，你的句子

> 没有它们在运行时混淆的风险？

绝对没有意义，因为重载决议发生在编译时。

# ruby-on-rails-3 - 使用无效令牌时获取设计令牌身份验证以返回未经授权的消息

> ID：14499856
> 
> 赞同：0
> 
> 时间：2013-01-24T11:07:33.130
> 
> 标签：ruby-on-rails-3, devise

我正在使用 Rails 3.2.8 构建 API，并且正在使用基于令牌的身份验证。在所有控制器文件的开头我有这个：

```
before_filter :verify_authenticity_token 
```

当我传递一个有效的令牌（用户已登录）时，这非常有用，但如果我传递一个无效的令牌，它什么也不做。我期待它说未经授权或其他内容并停止对控制器文件的所有进一步处理。

我怎样才能做到这一点？

感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:41:33.000

可能这有帮助：

```
def current_user
  @current_user
end

def verify_authenticity_token
  token = request.env["HTTP_ACCESS_TOKEN"]
  @current_user = User.where(authentication_token: token).first if token.present?
  unless token && current_user.present?

    #unauthorized logic here. Error or smth. other

  end
end 
```

# customization - 在 Umbraco 中添加依赖于另一个的自定义属性

> ID：14499868
> 
> 赞同：2
> 
> 时间：2013-01-24T11:08:07.647
> 
> 标签：customization, umbraco

**请求**

我想将成员添加到我们公司的部门，但是我们公司有更多的办公室，每个办公室都有自己的部门，所以我们需要先组织一下，然后尝试将每个成员分配到其部门，以便他们只有访问权限他们自己的部门。

作为 Umbraco 内容的部门概述：

```
Root Node
-Office 1
-- Department1.1
-- Department1.2
-Office 2
-- Department 2.1
-Office 3
-- Department 3.1
-- Department 3.2
-- Department 3.3 
```

现在，如果我添加一个用户，我希望一个属性选择办公室，另一个属性选择部门。

**可能的解决方案**

到处检查，我发现我可以使用 Umbraco 中的*UltimatePicker*类型创建 Office 属性，创建一个链接到父节点的自定义数据类型，然后在我的 MemberType 中创建一个属性。这将在“根节点”下显示办公室并将成员链接到其中之一。

现在，要制作我所看到的部门属性，可以通过某种方式使用自定义手动编码属性，添加用户控件并使用它来动态显示办公室子项（我还没有尝试过，我在推理） .

但是我担心第二个属性将依赖于第一个属性，并且当我尝试在我的用户控件中创建实现*umbraco.editorControls.userControlGrapper.IUsercontrolDataEditor*的自定义属性时，它只允许我保存一个值，而不是两个他们。这很有意义，因为这应该是 A 属性，而不是一堆。

**我的问题**

现在，拥有这 2 个自定义属性的最佳方式是什么，并确保万一我更换办公室，部门也会被刷新？

**目前最好的疯狂想法**

到目前为止，我只能想象创建2个用户控件，每个属性一个，并在每次更新办公室时手动清理部门，虽然我不知道这是否可能（我真的可以动态获取部门吗？我可以清理 dep. 属性 FROM office 属性 usercontrol？），我希望将它们放在一起以简化代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:25:06.870

如果关系很关键，并且您需要防止用户意外选择不属于办公室的部门，那么您可以创建一个包含两个下拉菜单的用户控件。第一个菜单显示办公室，第二个菜单仅在选择办公室后才填充（最好通过 ajax 调用）。

使用 umbraco api 检索办公室和部门的代码相对简单。

然后，用户控件可以将每个的 id 保存到 xml 或逗号分隔的列表中。

或者，您可以只允许用户选择一个部门，而部门的选择暗示了办公室。您可以使用 uComponent 的多节点选择器并将节点选择过滤为仅部门文档类型。然后，开销就在 UI 代码中，您必须从部门中计算出办公室。

为了解决这个问题，您可以有一个标签属性来简单地存储部门办公室的 ID。然后可以使用 OnSave 事件处理程序保存 Office ID。

# php - 在url中隐藏文件名

> ID：14499871
> 
> 赞同：0
> 
> 时间：2013-01-24T11:08:20.863
> 
> 标签：php, html, .htaccess

我尝试使用 .htaccess 文件中的以下代码将文件名隐藏在 URL 中。但是正在显示文件名。任何人都可以更正此代码。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:48:27.503

你可以使用这个。这里我给出了静态代码。例如，我的文件名为 testimonial.php，我将其更改为 testimonial.html。所以在一个标签链接中你应该给出 testimonial.html 而不是 testimonial.php。然后它会正常工作。

```
Options -Indexes
RewriteEngine on

RewriteRule ^testimonial.html /testimonial.php [NC]
RewriteRule ^aboutus.html /about_us.php [NC] 
```

# c# - SignalR 中的事件顺序是否得到保证？

> ID：14499876
> 
> 赞同：4
> 
> 时间：2013-01-24T11:08:31.707
> 
> 标签：c#, javascript, signalr, signalr-hub

如果我有一个简单的 SignalR 应用程序，如下所示：

客户：

```
chat.client.addMessage = function (message) {
    console.log(message);
};

...

var result = chat.server.send("Hello, World.");
console.log(result); 
```

服务器集线器：

```
public int Send(string message)
{
    Clients.All.addMessage(message);
    return 10;
} 
```

输出如下所示：

```
10
Hello, World. 
```

我不完全确定哪些部分正在工作异步魔法，哪些部分没有，所以我想知道这个顺序是否得到保证？

服务器端调用的返回值是否保证在该调用可能触发的任何服务器端推送消息之前到达？

# javascript - 聚类谷歌地图标记

> ID：14499877
> 
> 赞同：2
> 
> 时间：2013-01-24T11:08:32.083
> 
> 标签：javascript, algorithm, google-maps, map, google-maps-markers

我想知道最好的方法是`cluster map markers`什么？我们目前在我们的应用程序中使用谷歌地图，其中每个实体都在地图上定义一个点，并有一个`grid based clustering algorithm (64px X 64px grid)`用于聚类实体点的点。这对大约 8 万个实体来说效果很好。我们拥有从 5000 到 150 万个实体不等的数据集。问题`1.5 million dataset`在于，有这么多标记，地图上的几乎每个网格都是一个聚集标记，这不仅会导致用户界面不好（每个网格上都有一个聚集标记），而且还会增加地图的加载时间。

1) `Client Side`- 我已经尝试过客户端集群 ( `Map Clusterer`)。这不起作用，因为具有 150 万个实体的 json 对象本身会减慢系统的速度，而且 Map Clusterer 最多只能工作 50k 个标记。

2) `Server Side`- 如此庞大的数据集的问题是我什至无法查询所有实体，所以我想在 SQL 中建立第一级基于网格的聚类，然后在从 SQL 获得第一次通过聚类结果后进行一些基于密度的聚类每个集群都有一个 clusterCount 和 avg lat/long。或者，如果对如此庞大的数据集有更好的想法，（我阅读了有关`MAFIA, CLIQUE`聚类的[信息 http://www.siam.org/proceedings/datamining/2001/dm01_07NageshH.pdf](http://www.siam.org/proceedings/datamining/2001/dm01_07NageshH.pdf)）。

另外，在某些时候，我真的很想缓存这些数据（尽管这应该在一个单独的问题中提出），但如果有人也可以提供一些缓存技术，记住集群、视口和缩放级别，那将真的很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:44:22.223

查看 GeoHash：[http ://en.wikipedia.org/wiki/Geohash](http://en.wikipedia.org/wiki/Geohash)

也可以使用 Solr 来索引空间数据：Search API21 和 Apache Solr Search Integration22

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:09:05.127

你可以试试我的 kmeans 服务器端解决方案：

[https://github.com/biodiv/anycluster](https://github.com/biodiv/anycluster)

（它在 python/geodjango/postgis 中）

如果你有一大堆现金，你可以看看：

[http://www.maptimize.com/](http://www.maptimize.com/)

# sencha-touch - sencha build 给出错误 stbuild exited with non-zero code : 7

> ID：14499878
> 
> 赞同：1
> 
> 时间：2013-01-24T11:08:32.583
> 
> 标签：sencha-touch, sencha-touch-2.1

我想创建我的 sencha 应用程序的 .apk 文件，所以我在命令
sencha package build packager.json下面

执行，但是当我执行上面的命令时，它会生成如下所示的错误。

'C:\Program' 不是内部或外部命令、可运行程序或批处理文件。""D:/Android/AndroidSDKr15\tools\android" 创建项目 --target android-16 --name chartDemoApp --activity STActivity --path "../build/" --package triumphsys.mobility.chartDemoApp" 不能运行 ant 错误：1 无法打包应用程序

[ERR] stbuild 以非零代码退出：7

甚至我在此处附加了[命令提示符](http://i47.tinypic.com/r2krvq.png)并在此处附加了[packager.json](http://dl.dropbox.com/u/73250761/packager.json)。

请帮我解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:23:12.783

我能够通过卸载“C:\Program files\Sencha Cmd”并再次在“C:\Sencha”重新安装它来解决这个问题，文件夹名称中没有任何空格。它对我有用。

# search-engine - 如何使我的一些网页在我的项目中可搜索

> ID：14499880
> 
> 赞同：0
> 
> 时间：2013-01-24T11:08:39.457
> 
> 标签：search-engine, blogs

在我的网站中，我包括添加博客的用户。我怎样才能使这些博客在谷歌中可搜索。我只想使博客可搜索。但我不想让剩余的页面可搜索。我怎样才能做到这一点。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:10:49.597

在**除**博客页面之外的所有页面上，将以下内容添加到您的 HTML`<head>`元素中：

```
<meta name="robots" content="noindex"> 
```

这将阻止搜索引擎索引该页面。

* * *

使用[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题") / [jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")不是一个选项，因为这是客户端脚本，机器人不会读取。

# java - 当我不知道文件的类型时，我应该使用哪个阅读类？

> ID：14499882
> 
> 赞同：4
> 
> 时间：2013-01-24T11:08:47.403
> 
> 标签：java

我是新手，所以我知道用 Java 读取文件的唯一方法是：

```
DataInputStream dis = new DataInputStream(new FileInputStream(<FILE>)); 
```

和：

```
BufferedReader br = new BufferedReader(new FileReader(<FILE>)); 
```

而且我知道，虽然第一个用于处理二进制文件，但后者用于字符/文本文件（据我目前的理解：这样我就可以用记事本打开它们并查看人类实际可以阅读的内容）。问题是：如果问题没有说明我是要处理二进制文件还是文本文件怎么办？我的意思是：例如，当我要从文件中读取对象时，我知道这是第一个，但是当我只得到诸如“您的方法是从包含学生姓名的文件 XYZ 中读取”之类的信息时，该怎么办？你要处理哪个（等等等等）”？

我遇到过一些这样的任务，但一直不确定该使用哪一个。如果描述没有明确说明文件的类型，我可以使用我想要的任何内容，或者是否有一些约定，如果什么都没说，假设我们正在处理 X 会更安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:14:25.707

您**确实**需要知道要阅读的类型。

如果规范不清楚，请自行定义（并记录）它。如果您已经有一个现有文件，您可以查看它以决定采用哪种方法 - 如果它是面向行的，其中没有“不可读”字符，例如一行一个名称，您将采用文本文件方法。如果在文本编辑器中打开它看起来很奇怪，您可以假设是一个二进制文件，但在这种情况下，您需要额外的信息才能正确读取它。

在文件系统级别上，没有像“二进制”或“文本”文件这样的东西——这取决于你如何解释它。您可以将每个文件作为二进制文件读取（考虑单个字节 - 这是十六进制编辑器所做的），并且您可以（几乎）将每个文件作为文本读取（并且当您尝试时很可能最终得到看起来像垃圾的东西打印出来）。（我说“几乎”是因为多字节字符存在一些限制，其中一个字符是由一个以上的字节构建的。但即使这些文件仍然可以被视为“扩展 ASCII”文件，其中每个字节都映射到一个字符）。

在任何情况下，您都应该记录您期望的文件格式（即使是“文本”文件也可以有不同的结构，如固定行长、可变行长等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:18:05.713

“您的方法是从文件 XYZ 中读取，其中包含您要处理**的学生的姓名**（等等）”？

根据我强调的那句话，我的印象是该文件包含基于文本的数据。

此时，您应该使用“Reader”的派生词来阅读它。

如果文件具有固定结构，您可以考虑使用 InputStream 或它的派生类。

不过，在您的情况下，读取学生姓名的字符数据似乎是一项简单的任务。

# jquery - 使用 greensock tweenlite 补间 svg 属性（js 版本）

> ID：14499884
> 
> 赞同：4
> 
> 时间：2013-01-24T11:09:00.037
> 
> 标签：jquery, jquery-animate, tween, gsap

我想使用[greensock](http://www.greensock.com/get-started-js/#css)的 js 动画平台来补间 svg 圆的半径，但它似乎不起作用，而且我在文档中没有看到任何关于补间属性的内容，只有 css 属性。这可能吗？我基本上有这个：

```
<circle r="17.451467196282987" data-rad="17.451467196282987"></circle> 
```

我正在尝试这样做：

```
TweenLite.to($('circle'), .5, {r:25}); 
```

我试过用 jquery 做这个，它也没有工作，但我会接受任何一种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-27T13:35:46.297

您现在可以直接为 attr 值设置动画

例如：TweenLite.to("#rect", 1, {attr:{x:100, y:50, width:100, height:100}, ease:Linear.easeNone});

查看 GSAP 网站 [http://greensock.com/docs/#/HTML5/GSAP/Plugins/AttrPlugin/](http://greensock.com/docs/#/HTML5/GSAP/Plugins/AttrPlugin/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T17:07:56.490

我认为这一定是jQuery和TweenMax/Lite针对元素属性的方式。

通过创建一个具有属性的对象，我设法让它使用 TweenLite 工作。然后，您可以补间属性并将其应用回元素，如下所示。

```
$(document).ready(function(){

            var o = {r : $('circle').attr('r')};

            TweenLite.to(o, 2, {r:100, onUpdate:onUpdateHandler, onComplete:ocCompleteHandler});

            function onUpdateHandler(){
                $('circle').attr('r', o.r);
            }
            function ocCompleteHandler(){
                alert('end');
            }

    }); 
```

js小提琴在这里[http://jsfiddle.net/g9g6M/10/](http://jsfiddle.net/g9g6M/10/)

希望这可以帮助。

# java - Java：定义错误的finalize方法来创建内存泄漏

> ID：14499886
> 
> 赞同：8
> 
> 时间：2013-01-24T11:09:03.553
> 
> 标签：java

在 java 中，如果没有指向 x 的强引用并且 x 有资格进行垃圾收集，那么垃圾收集将在对象 x 上调用 finalize 方法。如果 finalize 方法永远不会终止，这会导致内存泄漏吗？

```
公共课 X{
  受保护的无效finalize（）{
     而（真）{}
  }
}

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T11:15:21.593

是的，很容易测试

```
public class X {

    protected void finalize() {
        while (true) {
        }
    }

    public static void main(String[] args) throws Exception {
        while (true) {
            new X();
        }
    }
} 
```

过了一段时间我得到了

```
Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread "main" 
```

当我删除 finalize() 时，测试从未停止过。请注意，在 JVM 进入 OOM 之前需要一段时间

**顺便说一句**，运行这个测试就足够了

```
public class X {
    byte[] a = new byte[100 * 1000 * 1000];

    protected void finalize() {
        System.out.println();
    }

    public static void main(String[] args) throws Exception {
        while (true) {
            new X();
        }
    }
} 
```

打破GC

```
Exception in thread "main" 
java.lang.OutOfMemoryError: Java heap space
    at test.X.<init>(X.java:5)
    at test.X.main(X.java:13) 
```

注释掉 //System.out.println(); 它不停地工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T11:12:05.493

是的。
同样在 finalize 方法中，如果您对调用 finalize 方法的对象提供有效引用，Java 不会垃圾收集该对象，也不会再次调用 finalize 方法，因为它只被调用一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T11:13:58.913

绝对。内存将在 finalize 方法返回后被释放。如果你的 finalize 永远不会返回，moory 将不会被释放。

谷歌关于垃圾回收中的复活，你会得到 finalize 方法不能保证 gc 的各种实例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T01:49:55.083

它会阻塞 java.lang.ref.Finalizer$FinalizerThread [(The Secret Life Of The Finalizer)](http://www.fasterj.com/articles/finalizer1.shtml)，所有实现 finalize 方法的类的实例都会被阻塞在 java.lang.ref.Finalizer.ReferenceQueue 中。您继续使用“finalize”创建新对象，那些等待执行 finalize 的对象将耗尽内存。如果进行堆转储，您会看到 java.lang.ref.Finalizer 保留了对象，请参见下面的示例（这是一个真实案例）。![在此处输入图像描述](../Images/0b2e13f02923c986f0d947117153f5fa.png)

# linux-kernel - Initrd 记录到磁盘上的文件

> ID：14499891
> 
> 赞同：0
> 
> 时间：2013-01-24T11:09:24.810
> 
> 标签：linux-kernel, kernel, initrd

我想将 initrd 输出转储到一个文件中，在引导加载程序中我可以传递一些参数（例如 console=tty）或 initrd 中的新进程，它可以保持将日志转储到磁盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:05:49.873

这是一个先有鸡还是先有蛋的问题，在initramfs开始挂载rootfs之前，如何获取要转储日志的文件的路径呢？

在 initramfs 挂载 rootfs 并在你的 rootfs 上启动 /sbin/init 之后，你的日志将通过 syslogd 或类似的东西转储到 /var/log/messages 之类的东西。

# python - 在两台服务器之间进行通信 - Amazon SQS / SNS？

> ID：14499893
> 
> 赞同：2
> 
> 时间：2013-01-24T11:09:31.470
> 
> 标签：python, linux, amazon-web-services, debian

我有两台服务器。基本上，**服务器#1**全天运行一个脚本，完成后我需要向**服务器#2**发送通知以使其运行其他一些脚本。

我目前依靠 Amazon AWS 工具并使用 Python，所以我想知道是否有人可以推荐一种简单、安全且易于编程的方式：

*   在服务器 #1 完成运行其脚本时设置一个标志
*   从服务器 #2 轮询此标志
*   当标志处于活动状态时，在服务器 #2 上运行脚本
*   当脚本在服务器 #2 上完成运行时，从服务器 #1 中删除标志

我应该使用 Amazon SNS 还是 SQS？或者，这两个都是一个糟糕的选择吗？如果是，你能推荐更好的吗？我倾向于使用 AWS 工具，因为我已经安装了 boto 并且我喜欢它的易用性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:27:23.877

假设**Server #1**正在通过 cron 运行脚本，那么你应该没有理由不能只使用 ssh 来远程更改**Server #2**。我相信如果您使用弹性 IP 地址，它可能不会算作带宽使用。

除此之外，我会使用 SNS。该模型将改为：

*   服务器 #1 通知服务器 #2（脚本启动）
*   服务器 #1 开始运行脚本
*   （可选）服务器 #1 通知服务器 #2 进度
*   服务器 #1 通知服务器 #2（脚本完成），启动服务器 #2 的脚本
*   服务器 #2 在完成时通知服务器 #1

在这种情况下，您需要设置某种简单的网络服务器来接受通知。简单的 CGI 脚本会减少它，但不是最安全的选择。

如果两个多个脚本试图同时运行，我只会将 SQS 带入图片中。如果您将其分块为“所有服务器 #1，然后是服务器 #2”，这是您并不真正需要的级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:08:36.613

为此，您可能需要考虑查看 AWS Simple Workflow Service。使用 SWF，您可以轻松地在许多不同的机器上协调工作流类型的活动。

[http://aws.amazon.com/swf/](http://aws.amazon.com/swf/)

# c# - C# 正则表达式从 HTML 中获取 ID 值

> ID：14499903
> 
> 赞同：0
> 
> 时间：2013-01-24T11:10:09.023
> 
> 标签：c#, regex

我想使用正则表达式从我从网站获得的网络响应中提取 ID 值。

这是具有所需 id 值的行：

```
SONET.globalSettings = $.extend(SONET.globalSettings, {"esc_my_persona":"1234566","esc_my_player":"1234567","esc_my_nucleus":"123456677","esc_my_platform":"cem_ea_id"} 
```

我需要获取 esc_my_nuclues 的值...即：123456677。

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:13:43.780

你可以做

```
string regex=@"esc_my_nucleus"":""(\d+)";
string val=Regex.Match(input,regex,RegexOptions.Ignorecase).Groups[1].Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:23:15.563

假设您使用的是 ASP.NET 并且 JavaScript 库正在生成 HTTP GET，那么名称-值对应该位于 URL 的查询部分。因此：

```
var val = HttpContext.Request.QueryString["esc_my_nucleus"]; 
```

如果 JavaScript 正在执行 HTTP POST，那么您需要从请求正文中提取

```
var val = HttpContext.Request.Form["esc_my_nucleus"]; 
```

或者使用`HttpContext.Request.Params`结合了上述两者。

但是，了解服务器端框架（WebForms、MVC 还是其他什么？）以及 JavaScript 如何表示为 HTTP 请求将提供更好的答案。

**注意**。这些都不需要正则表达式：即使您自己解析 URL，正则表达式也不太可能是正确的答案（URL 可以包含的内容太灵活，太容易打开安全漏洞）。

# css - 垂直对齐辅助

> ID：14499905
> 
> 赞同：0
> 
> 时间：2013-01-24T11:10:15.387
> 
> 标签：css, vertical-alignment

非常简单的问题......可能听起来很傻，但我一直在努力做到这一点一个小时。

如何降低此页面上的主要导航链接（主页、关于、画廊等）：http: [//bellairecabinets.com/new/](http://bellairecabinets.com/new/)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:14:16.627

您可以增加上边距`<ul>`

```
margin-top:50px; 
```

您可以增加顶部填充`<ul>`

```
padding-top:50px; 
```

如果它不起作用，请尝试增加内部项目的顶部填充`<ul>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:15:16.230

Firebug 插件显示主导航菜单 ( `#menu-main-nav`) 有一个属性`margin-top`。您可以增加边距以降低导航链接。

一个非常合理的长期建议是使用 Firebug、MeasureIt 等优秀的工具，用它们进行实验和学习 CSS 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:11:15.107

试试这个#menu-main-nav li strong { line-height: 35px; 高度：40px！重要；}

# magento - 如何在不编辑现有模板的情况下将块元素添加到 magento 中的产品视图？

> ID：14499908
> 
> 赞同：1
> 
> 时间：2013-01-24T11:10:23.263
> 
> 标签：magento, templates, module, block, output

我想在每个产品页面的价格下添加一个静态框，但我不想覆盖现有的模板文件（例如目录/产品/view.phtml）来呈现它的子块。

我试图通过 frontend/base/default/layout/local.xml 添加一个块元素

```
<layout version="0.1.0">
    <default>

        <reference name="product.info">
           <block type="telllowerpricelink/linkbox" name="telllowerpricelink.linkbox" template="telllowerpricelink/link.phtml" before="product.description" output="toHtml" />
        </reference>

    </default>
</layout> 
```

然后我构建了一个基本模块：
app/code/local/MyPackage/TellLowerPriceLink/Block/LinkBox.php

```
<?php
class MyPackage_TellLowerPriceLink_Block_Link extends Mage_Core_Block_Template 
{

}
?> 
```

应用程序/代码/本地/MyPackage/TellLowerPriceLink/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <MyPackage_TellLowerPriceLink>
            <version>0.1.0</version>
        </MyPackage_TellLowerPriceLink>
    </modules>
    <global>
        <blocks>
            <mypackage_telllowerpricelink>
                <class>MyPackage_TellLowerPriceLink_Block</class>
            </mypackage_telllowerpricelink>
        </blocks>
    </global>
</config> 
```

还有我的模板文件：
design/frontend/base/default/template/telllowerpricelink/link.phtml

```
<?php
echo 'Hello world!';
?> 
```

所以我的问题是：
1\. 主要问题：是否可以在不编辑其模板的情况下在父块元素的末尾添加 html 输出（顺便说一句：我没有看到）（a la renderChildHtml）？2.是否可以将我的模板文件存储在此文件夹中，或者我必须将洞默认主题文件夹复制到自己的主题中？

非常感谢，我用谷歌搜索并阅读了很多，但没有找到令人满意的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:09:20.810

1.  只有从 Mage_Core_Block_Text_List 块派生的块才有可能，所以在你的情况下这是不可能的，但你可以将你的块添加到引用内容（一个从布局文件呈现所有子项的容器）并将你的块包装到一个带有 style=" 的 div显示：无；” 设置然后使用 javascript 将其移动到预期位置。

2.  这是可能的，但您可以在系统->配置->通用->设计->包下更改管理员中的默认主题您将在此处使用的名称将是您的主题文件夹的名称（请注意，这会更改您的主题整个商店），因此您可以在 desing/your_theme_name_from_admin/{layout, template} 中创建您的文件夹，并仅将您需要覆盖的文件放在那里。有了这个，您可以只复制您想要覆盖的 phtml 文件并在新位置更改它，同时保持默认副本完好无损。

# azure - 这是一个合理的 Azure Blob 存储设置吗？是否有重组工具可以帮助我迁移到它？

> ID：14499913
> 
> 赞同：2
> 
> 时间：2013-01-24T11:10:34.653
> 
> 标签：azure, azure-storage, azure-blob-storage

我认为我们在 SAAS 系统中使用 Azure 存储的方式有点错误。我们为每个客户创建了一个存储帐户（Securtiy 是主要考虑因素）和每个系统区域的容器，例如车辆、工作等

进一步阅读后，似乎建议我们应该为所有客户使用一个帐户。每个客户端都应该有一个容器（这样我们就可以通过编程方式创建它），然后我们对其进行保护。然后文件应该只使用“虚拟”文件夹结构来构建，例如称为“客户端 A”的容器。然后工作文件（在系统的工作区域中）存储为 Work/Jobs/{entity id}/blah.pdf。这听起来合理吗？

如果是这样，我们现在有大约 10 个帐户需要重组。是否有任何工具可以让我们轻松地将一个帐户内容复制到另一个容器帐户？我很感激我们可能无法在帐户之间移动文件（因为我们很久以前就设置了它们，所以不能使用本机复制功能）所以我猜是某种复制。所有帐户都有 GB 的文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T13:32:33.337

为每个客户端保留不同的存储帐户可能不是一个坏主意。这样做的好处（对我来说）是：

1.  **您提到的**更好的安全性。****
***   您将能够**获得更好的吞吐量/客户端**，因为每个客户端都有自己的存储帐户。如果您为所有客户端保留一个存储帐户，并且如果一个客户端开始严重访问该帐户，则其他客户端将受到影响。*   **更好的可扩展性**。每个存储帐户最多可容纳 200 TB 的数据。因此，如果您只保留一个存储帐户并假设每个客户端消耗 100 GB 数据，那么您将只能容纳 2000 个客户端（我希望我的数学是正确的 :)）。使用个人存储帐户，您将不会受到这种意义上的限制。**

 **也有一些缺点。他们之中有一些是：

1.  **管理将是一场噩梦**。假设您有 2000 个客户，那么您最终将管理 2000 个存储帐户。
2.  您可能会**受到 Windows Azure 的限制**。目前，默认情况下，每个订阅大约可以获得 10 或 20 个存储帐户，您需要联系支持人员手动提高该限制。他们可以为您做到这一点，但我想您会希望这是一种自助服务模式，您可以在不联系支持人员的情况下创建任意数量的存储帐户。

现在谈到您关于工具的问题，您可以自己编写一些利用 Copy Blob 功能的东西。此功能允许您跨存储帐户异步复制 blob 数据。基本上这就是你要做的是：

1.  首先为目标存储帐户中的每个客户端创建一个 Blob 容器。
2.  枚举源存储帐户中的所有 blob 容器。
3.  对于源存储帐户中的每个 blob 容器，枚举 blob。
4.  将每个 blob 异步复制到客户端 blob 容器中的目标存储帐户。

如果您是 PowerShell 粉丝，您可以查看包含此功能的 Cerebrata 的 Azure 管理 Cmdlet ( [http://www.cerebrata.com/Products/AzureManagementCmdlets )。](http://www.cerebrata.com/Products/AzureManagementCmdlets)我也可以推荐 Cerebrata 的 Azure Management Studio，但我还没有尝试过这个功能 [披露：我是 Cerebrata 团队的开发人员之一]。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T14:33:25.227

添加到 Gaurav Mantri 答案...

您可以为客户提供共享存储帐户，并使用共享访问签名 (SAS) 来限制对特定容器或 blob（以及表和队列）的访问... [http://msdn.microsoft.com/en-us/库/windowsazure/hh508996.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh508996.aspx)**

# easymock - QFTTest 的模拟类

> ID：14499918
> 
> 赞同：0
> 
> 时间：2013-01-24T11:10:48.947
> 
> 标签：easymock

在我的公司，我们正在尝试使用名为 QFTEST 的自动化工具对基于 JAVA swing 的 GUI 构建进行测试。

为了获得更好的代码覆盖率，我们得出的结论是模拟特定类是必要的。我的老板让我学习一个 EasyMock。但是，通过阅读文档，我开始相信 EasyMock 必须与 JUNIT 一起使用，并且不能单独使用......这是正确的吗？

底线：是否可以将 EasyMock 与 QFTEST 集成？如果没有，您是否有其他解决方案的想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:59:58.837

虽然我没有使用easymock，但我们使用了mockito（非常相似）并且我们分别使用了qftest。应该没有理由需要 junit 使用 mockito 或 easymock，因为这两个将与 testng 一起使用。您只需要决定如何调用 easy mock/mockito，因为我认为您可以选择 jython/groovy 来编写扩展脚本。

问候，迈克

# javascript - 如果在移动设备上查看，我应该如何首先加载我的移动内容？

> ID：14499920
> 
> 赞同：0
> 
> 时间：2013-01-24T11:10:53.607
> 
> 标签：javascript, jquery, html

我有一个在桌面上呈现良好的页面，其标记与移动设备的标记完全不同，因为两者的设计不同。

`<div>`我在现有的桌面标记中添加了额外内容。

我使用媒体查询从桌面切换到移动，如果在桌面（宽度> 1024）中查看，则隐藏移动内容，反之亦然。

我还为移动设备和 ipad 使用了两种不同的元标记。

对于移动设备：用于消除捏合效果（放大/缩小）

对于 ipad：允许捏合效果（放大/缩小）

我通过 javascript 添加这个元标记，如果它是移动设备，则为移动设备添加元标记，如果是平板电脑，则为 ipad 添加元标记

现在，当在移动设备上查看页面时，桌面版本会加载几秒钟，然后移动版本可见。

是否有可能我应该能够先查看我的移动版本，或者在移动设备上查看时只隐藏桌面版本？

这是我用于切换元的 javascript 代码：

```
var browserdetect = function() {

    var ismobile = (/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile|ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase()));

    var istablet = (/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase()));

    var metaiphone = '<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0 maximum-scale=1.0, user-scalable=no">';

    var metaipad = '<meta name="viewport" content="width=1300">';

    if(ismobile) {
        if(!istablet) {
            if($('body').hasClass('responsive-page')){
                $('head').append(metaiphone);
            }               
        } else {
            $('head').append(metaipad);
            // console.log("tab");    
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:22:25.613

你在这件事上完全错了。如果它与桌面版本完全不同，您应该只为您的移动客户端提供移动 html&css。您应该在服务器上检测客户端并决定发送哪些 html&css（或将移动客户端重定向到具有移动版本的不同域）。

媒体查询的重点是修改您必须在不同设备上工作的现有 html。您应该查看这篇文章以获得快速概述：[http ://learn.shayhowe.com/advanced-html-css/responsive-web-design](http://learn.shayhowe.com/advanced-html-css/responsive-web-design)

# android - 更新 ArrayAdapter 问题

> ID：14499926
> 
> 赞同：0
> 
> 时间：2013-01-24T11:11:28.333
> 
> 标签：android, android-arrayadapter

我有一个自定义 ArrayAdapter 的奇怪情况。当我尝试使用新数据更新 adpater 时，新数据不会被更新，而是插入到列表视图的开头，并且一旦滚动列表视图，旧数据就会保留并可见。

**更新**

似乎问题是由片段包中的 ArrayList 引起的。如果我没有在片段包的 onCreateView 中设置列​​表视图，我的更新代码可以正常工作，但现在我很困惑为什么会这样：

```
ArrayList<Collection> cityStoresList = fragmentBundle.getParcelableArrayList("stores");     
mStoresList.addAll(cityStoresList); 
```

**是否导致项目始终保留在列表中？**

**更新结束**

以下是部分代码：（集合是自定义对象模型类）

```
ArrayList<Collection> mStoresList = new ArrayList<Collection>();

/** List Adapter */
private StoresListAdapter mListAdapter;

public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    boolean attach = false;
    if (container == null) {
        attach = true;
    }

    Bundle fragmentBundle = getArguments();
    ArrayList<Collection> cityStoresList = fragmentBundle.getParcelableArrayList("stores");     
    mStoresList.addAll(cityStoresList);

//inflater code not added here, but is present

mListAdapter = new StoresListAdapter(getActivity(), mStoresList);
        mListView.setAdapter(mListAdapter);

return layout;
} 
```

我的自定义适配器如下：

```
 public class StoresListAdapter extends ArrayAdapter<Collection> {

        public StoresListAdapter(Context c, ArrayList<Collection> array) {
            super(c, 0, array);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // View from recycle
            View row = convertView;

            // Handle inflation
            if (row == null) {
                LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                row = inflater.inflate(R.layout.row_store, null);
            }

            // Get the Store
            Collection store = getItem(position);
                    //rest of code follows

            return row;
       }
   } 
```

现在，当我想更新我的适配器时，我使用以下内容：

```
public void updateAdapter(ArrayList<Collection> storesList, final int listIndex) {
    mStoresList.clear();    
    mStoresList.addAll(storesList);         
        mListAdapter.notifyDataSetChanged();
     } 
```

这产生了我提到的问题。新项目看起来很好，但以前的项目仍然可见并在新项目之后添加。这就像在 ArrayList 中添加新项目作为第一个项目，而不是仅仅替换旧项目。

有什么想法、建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:48:17.963

好的，终于找到问题了。

因为整个事情都在一个片段内，所以在我附加数组时实际上调用了 oncreateView，所以发生的情况是我的 updateAdapter 方法被调用，项目被添加并显示，在视图实际可见之前。

然后触发 oncreateView 方法，并将原始捆绑项目添加到 Arraylist....

# android - android videoview卡住图像

> ID：14499927
> 
> 赞同：1
> 
> 时间：2013-01-24T11:11:29.707
> 
> 标签：android, android-videoview

我有一个简单的视频视图。我做了一个停止按钮：

```
myVideoView.stopPlayback(); 
```

但是当它停止时，它会在视频视图中保留视频的最后一个场景。

视频停止后如何重置视频视图？

# image-processing - 它如何计算opencv中的形状伸长率？

> ID：14499929
> 
> 赞同：1
> 
> 时间：2013-01-24T11:11:41.127
> 
> 标签：image-processing, opencv, python-2.7, shape, feature-extraction

我有很多灰度图像，因为我必须提取特征进行比较。如何在opencv（更适合python版本）中计算形状伸长率（基本形状描述符： [http ://www.site.uottawa.ca/~mstoj075/Publications_files/elongation-JMIV.pdf）以进行特征提取？](http://www.site.uottawa.ca/~mstoj075/Publications_files/elongation-JMIV.pdf)

示例图片：1) [https://docs.google.com/file/d/0ByS6Z5WRz-h2cE1wTGJwRnE5YUU/edit](https://docs.google.com/file/d/0ByS6Z5WRz-h2cE1wTGJwRnE5YUU/edit) 2) [https://docs.google.com/file/d/0ByS6Z5WRz-h2UTFCaVEzaHlXRVk/edit](https://docs.google.com/file/d/0ByS6Z5WRz-h2UTFCaVEzaHlXRVk/edit) 3) [https:// /docs.google.com/file/d/0ByS6Z5WRz-h2NDgySmJ6NnpId0U/edit](https://docs.google.com/file/d/0ByS6Z5WRz-h2NDgySmJ6NnpId0U/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:03:45.937

描述符（形状矩）是通过迭代特定形状创建的，可能使用也可能不使用像素值。你的一般形式是这样的

```
cvFindContours()
Accumulator = 0;
for (each pointx in the contour bounding box)
for (each pointy in the contour bounding box)
{
   if (cvPointPolygonTest((pointx,pointy),mycontour)) //ie the point is not only in the bounding box, but in the actual contour
       Accumulator = Accumulator + MyDescriptor(point,ImageValueAt(point));
} 
```

累加器将包含您的形状描述符值。我懒得读你的 pdf，但第一页上的这些积分在这里转化为你的双循环。

# android - 在 Android JellyBean OS 中将图像从 sd 卡加载到 webview

> ID：14499930
> 
> 赞同：1
> 
> 时间：2013-01-24T11:11:42.233
> 
> 标签：android, android-layout, android-webview

我有 html 内容和图像要加载到 jelly bean OS 的 webview 中。图片取自sd卡。

以下是内容：

```
 <html>
      <head>
      <title>Test Name</title>
      </head>
      <body>
      <p><font color="#003399"   size="2">
      <center>
      <a href="file://storage/sdcard0/images/img.jpg" target="_blank" >
      <img src="file://storage/sdcard0/images/img.jpg" />
      </a>
      </center>
      </p>
      </font> Contetnt Goes Here 
      </body>
  </html> 
```

```
myWebView.loadDataWithBaseURL("",webcontent, "text/html", "UTF-8", null); 
```

它在 ICS OS 中工作，但不会加载到 jelly bean OS Web 视图中。

提前致谢

# c# - ASP MVC 3 从搜索引擎获取 XML 结果

> ID：14499931
> 
> 赞同：0
> 
> 时间：2013-01-24T11:11:43.500
> 
> 标签：c#, xml, asp.net-mvc-3

在我的 ASP.NET MVC 3 应用程序中，我正在尝试使用外部搜索引擎。

搜索引擎的使用如下：

我用我想要的搜索参数执行一个 URL

```
http://<Domain>/engine/ContactssCore/select?q=QUERY 
```

这将返回一个 XML 结果，我将把它解析成 C# 对象。

我的问题是，如何调用此 URL 并从我的控制器获取 XML 结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:15:07.620

您可以使用[WebClient.DownloadString](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadstring%28v=vs.80%29.aspx)方法来完成此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:40:45.233

XDocument 可以直接从外部源加载

```
var xml = XDocument.Load("http://<Domain>/engine/ContactssCore/select?q=QUERY"); 
```

您可能应该在发出请求之前对您的 QUERY 参数进行编码。

# php - 将 javascript 生成的日期字符串转换为 JS 或 PHP 中的不同字符串

> ID：14499934
> 
> 赞同：-2
> 
> 时间：2013-01-24T11:11:53.170
> 
> 标签：php, javascript, date

每个人

我的问题是我的 JS 代码以格式生成日期

“2013 年 1 月 10 日星期四 00:00:00 GMT+0200（FLE 标准时间）”

我需要把它转换成这样的格式

“2013-01-10”

在 JS 或 PHP 中，因为我以这种格式将日期存储在 DB 中。我的第一个想法是将其转换为时间戳，然后将时间戳转换为新的日期字符串，但日期或字符串函数无法读取这种日期格式，因此可能需要预先放置一些东西，仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:17:23.937

阅读有关 php的信息`strtotime`。

```
<?php

$date_str = "Thu Jan 10 2013 00:00:00 GMT+0200";

echo date('Y-m-d',strtotime($date_str));
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:17:00.053

这是一个如何在 JavaScript 中格式化日期的示例：

```
function formatDate(date) {
   var year = date.getFullYear(),
       month = date.getMonth() + 1,
       day = date.getDate();
   if (month.toString().length === 1) {
      month = '0' + month;
   }
   if (day.toString().length === 1) {
      day = '0' + day;
   }
   return year + '-' + month + '-' + day;
}
formatDate(new Date("Thu Jan 10 2013 00:00:00 GMT+0200 (FLE Standard Time)"));
//"2013-01-10" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:18:24.280

尝试使用[date.js](http://code.google.com/p/datejs/)进行转换。

```
var myDate = new Date("Thu Jan 10 2013 00:00:00 GMT+0200 (FLE Standard Time)").toString('yyyy-MM-dd');
console.log(myDate); //2013-01-10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:21:09.130

您可以使用此 javascript 代码获取日期。

```
<script type="text/javascript">
    var currentTime = new Date()
    var month = currentTime.getMonth() + 1
    var day = currentTime.getDate()
    var year = currentTime.getFullYear()
    document.write("" +year + "-" + month + "-" + day + "")
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T11:45:40.970

你可以做类似的事情：

```
var date = new Date("Thu Jan 10 2013 00:00:00 GMT+0200 (FLE Standard Time)"),
    month,
    day,
    date_string;

date_string = date.getFullYear() + '-' +
    ((month = date.getMonth() + 1) < 10 ? '0' + month : month) + '-' +
    ((day = date.getDate()) < 10 ? '0' + day : day); 
```

date_string 现在包含“2013-01-10”的值。

# c++ - 引用数据成员和移动构造函数

> ID：14499935
> 
> 赞同：3
> 
> 时间：2013-01-24T11:11:56.167
> 
> 标签：c++, reference, c++11, move-semantics

假设以下代码：

```
class ChannelHandle;
class SessionHandle;

typedef ChannelHandle& ChannelHandleRef;
typedef SessionHandle& SessionHandleRef;

class RemoteChannelHandle
{
public:
    RemoteChannelHandle(
        ChannelHandleRef pChannelHandle, SessionHandleRef pSessionHandle);
    RemoteChannelHandle(RemoteChannelHandle&&);
    ~RemoteChannelHandle();

    void CloseChannel();

#ifndef _MSC_VER
    RemoteChannelHandle& operator=(RemoteChannelHandle&&) = delete;
    RemoteChannelHandle(RemoteChannelHandle const&) = delete;
    RemoteChannelHandle& operator=(RemoteChannelHandle const&) = delete;
#endif
private:
    LIBSSH2_CHANNEL* channel;
    ChannelHandleRef channelHandle;
    SessionHandleRef sessionHandle;
};

RemoteChannelHandle::RemoteChannelHandle(
    ChannelHandleRef pChannelHandle, SessionHandleRef pSessionHandle)
    : channel(nullptr), channelHandle(pChannelHandle), sessionHandle(pSessionHandle)
{
    // OPEN SSH CHANNEL
}

RemoteChannelHandle::~RemoteChannelHandle()
{
    try
    {
        CloseChannel();
    }
    catch (...)
    { }
}

void RemoteChannelHandle::CloseChannel()
{
    if (channel == nullptr)
    {
        return;
    }

    // CLOSE SSH CHANNEL. THROW IF SOMETHING GOES WRONG

    channel = nullptr;
} 
```

*   RemoteChannelHandle 打开一个 SSH 通道，但清理需要两个步骤（关闭 + 空闲）。第一步在 中执行 `~RemoteChannelHandle()`，但第二步将在 ChannelHandle 的 dtor 中执行；因此数据成员`channelHandle`，因为我们需要注入`channel`它。可以通过执行中的两个步骤来消除此引用`~RemoteChannelHandle()`。
*   `sessionHandle`持有`LIBSSH2_SESSION*`打开 SSH 通道的必要条件。既然不想转`LIBSSH2_SESSION*`了，这个引用就不能去掉了。

当我为 RemoteChannelHandle 定义移动 ctor 时，就会出现问题。我需要清除“移出”实例的成员。但是，没有办法清除引用。那么，在这里做什么呢？

1.  使用`(const) std::shared_ptr`而不是参考？我什至可以使用裸指针，因为不涉及所有权。我意识到关于使用引用作为数据成员存在一些争论，但除了移动 ctor 之外，我预计没有其他情况需要重新安装句柄（这就是我首先使用引用的原因）。
2.  保持引用不变，并专门创建一个“状态”数据成员来检查对象是否处于有效状态（我可以`channel != nullptr` 用于此目的）？
3.  还有什么想法吗？

我一直在寻找替代方案，但没有找到明确的答案。当然，这可能意味着实际上没有明确的答案。

谢谢你的时间。

编辑（回复 Mankarse）：ChannelHandle 仅用于执行清理的第 2 步。这是一个简化的定义：

```
class ChannelHandle
{
public:
    ChannelHandle();
    ChannelHandle(ChannelHandle&&);
    ~ChannelHandle();

#ifndef _MSC_VER
    ChannelHandle& operator=(ChannelHandle&&) = delete;
    ChannelHandle(ChannelHandle const&) = delete;
    ChannelHandle& operator=(ChannelHandle const&) = delete;
#endif

    LIBSSH2_CHANNEL* GetChannel() { return channel; }
    void SetChannel(LIBSSH2_CHANNEL* pChannel) { channel = pChannel; }

    void FreeChannel();
private:
    LIBSSH2_CHANNEL* channel;
}; 
```

SessionHandle 是`LIBSSH2_SESSION*`. 它调用`libssh2_session_init()`ctor 和`libssh2_session_free()`dtor。其他类似的类负责 SSH 会话的初始化/清理的其他步骤，但这是我们`LIBSSH2_SESSION*`从 libssh2 获取的地方，而 SessionHandle 拥有它。再一次，一个简化的定义：

```
class SessionHandle
{
public:
    SessionHandle();
    SessionHandle(SessionHandle&&);
    ~SessionHandle();

    void CloseSession();
    LIBSSH2_SESSION* GetSession() { return session; }

#ifndef _MSC_VER
    SessionHandle& operator=(SessionHandle&&) = delete;
    SessionHandle(SessionHandle const&) = delete;
    SessionHandle& operator=(SessionHandle const&) = delete;
#endif
private:    
    LIBSSH2_SESSION *session;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T12:24:56.017

你自己回答了这个问题：

> 我什至可以使用裸指针，因为不涉及所有权。

# linux - 在哪里可以找到 Centos 6 cron 作业 .sh 文件

> ID：14499941
> 
> 赞同：0
> 
> 时间：2013-01-24T11:12:08.867
> 
> 标签：linux, cron

我对 Linux 真的很陌生，如果这是初级的，我深表歉意，但我在谷歌上找到了不清楚的例子，我很困惑。（问题与运行 CentOs 6 的服务器有关）

我的问题是：

1.  我不确定应该在哪个默认目录中存储 .sh 文件，以便 cron 作业可以运行它。
2.  下面 .sh 文件中我的代码的语法和顺序是否正确？

我已经测试了 TSQL 和它的罚款。

```
#! SQL="DELETE FROM messages WHERE date < DATE_SUB(CURDATE(), INTERVAL 7 DAY)"

MYSQL_USER="root"
MYSQL_PASS="xxxxxx"
MYSQL_DB="mydb" 
```

我知道 cron 应该包含这个以每天执行此操作：

0 0 * * *

但我只是有点担心如何把它们放在一起，所以我不会把事情搞砸。一个完整的例子或解释或参考链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:37:04.267

我相信`cron`它将从它所在的任何目录执行脚本，因为：

*   该文件对运行为的用户具有执行权限`cron`（通常`root`如果在系统范围的 crontab 中配置了作业）
*   该`cron`行指定脚本的完整路径

因此，如果您的脚本是 /opt/script.sh，请在 cron 中指定：

```
0 0 * * * /opt/script.sh 
```

将在每天上午 12:00 执行 script.sh。

请注意，如果这是系统范围的 crontab (/etc/crontab)，它还应该包含执行命令的用户名：

```
0 0 * * * username /opt/script.sh 
```

此外，在使用时要确保在`cron`从脚本调用外部命令时使用完整路径或设置`PATH`变量（在脚本本身或`crontab`文件中）。这是必需的，因为通常运行 cron 作业的环境非常有限。

要记住的另一件事是，如果 cron 作业生成任何输出，则此输出将通过邮件发送给执行 cron 的用户。因此，要从脚本获得一些反馈，您必须设置系统以使邮件消息最终进入一个由人阅读的邮箱，或者脚本将其所有输出发送到日志文件或系统日志。

# c - 解析 SIP 消息体

> ID：14499944
> 
> 赞同：3
> 
> 时间：2013-01-24T11:12:17.840
> 
> 标签：c, sip, voip

我正在实现 SIP 协议，但在解析 SIP 消息时被卡住了。我正在使用 oSIP 库。我的代码是这样的：

```
#include <stdio.h>
#include <stdlib.h>
#include <osip2/osip.h>
#include <osipparser2/osip_parser.h>
#include <string.h>

void main()
{
  int i,error;
  osip_message_t *message;
  char text[]="INVITE sip:jarsku@feanor.pc.lut.fi SIP/2.0\nCall-ID: 123456789@aradan\nVia: SIP/2.0/UDP 157.24.25.137:5060\nFrom: Arto <sip:athamala@feanor.pc.lut.fi>\nTo: Jari <sip:jarsku@feanor.pc.lut.fi>\nCSeq: 1 INVITE\nContent-Type: application/sdp\n\nv=0\na=3333aaa333";
  char *p=(char *)&text;

  i = strlen(text);
  error = osip_init(&message);
  error = osip_message_init(&message);
  error = osip_message_parse(message, p, i);
} 
```

当我运行此代码时，消息结构中填充了来自文本的数据。正确填写了 to 和 vias 字段`call_id, content_lenght, content_type, cseq, from, req_uri, sip_method, sip_version,`，但字段中的 message 值为 0x0，`message_length`为 0，message_property 为 2。所有三个命令的错误代码均为 0。为什么没有解析消息体？我对这些事情感到困惑：在 RFC 中规定，每一行都应该以 CLRF 序列结尾，但我只是在使用`\n`它，它似乎可以工作。接下来我不喜欢这种说法：

```
error = osip_init(&message);
error = osip_message_init(&message); 
```

对我来说，这很奇怪吗。在[oSIP 的文档中](http://www.gnu.org/software/osip/doc/html/group__howto2__parser.html)说明了以下顺序：

```
osip_message_t *sip;
osip_message_init(&sip);
osip_message_parse(sip, buffer, length_of_buffer);
osip_message_free(sip); 
```

应该足够了（在我的代码中，我使用的是 init 和 message_init），但这给了我一个分段错误。

为什么有可能，该字段`content_length`是自动填充的，但消息没有被解析？

最后一个问题：为什么这个话题在互联网上的报道如此之多？没有手册，oSIP 文档很糟糕

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:24:23.747

我认为您可能正在错误地阅读文档。函数 osip_init() 想要一个 osip_t **osip 而不是消息。回复：[http: *//www.gnu.org/software/osip/doc/html/group_howto0* _initialize.html](http://www.gnu.org/software/osip/doc/html/group__howto0__initialize.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:09:46.050

我得到了与他评论中提到的 Matka 相同的错误。

> 从 osip_message_parse 返回值 -5

这是由于我在调试时传递给程序的格式错误的 sip 消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-30T16:03:55.600

osip_init 不需要仅使用解析器，但您应该使用 parser_init() 初始化解析器；反而。

# android - 已发布的应用程序未显示在开发人员链接中

> ID：14499945
> 
> 赞同：0
> 
> 时间：2013-01-24T11:12:20.397
> 
> 标签：android, publish

我在 16 小时前发布了我的新应用程序。

我只能通过访问直接链接来查看我的应用程序：https: [//play.google.com/store/apps/details?id=development.nk.cretanrecipes](https://play.google.com/store/apps/details?id=development.nk.cretanrecipes)

问题是我在开发者的链接中看不到我的应用程序：https: [//play.google.com/store/apps/developer? id=NKdevelopment](https://play.google.com/store/apps/developer?id=NKdevelopment)

除此之外，我的应用程序没有被索引，所以没有人可以通过搜索找到我的应用程序......

我应该再等几个小时还是我做错了什么？我应该联系谷歌吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:21:02.200

对于开发者控制台和用户前端来说，Google Play 的速度可能是出了名的慢。

我已经看到应用程序上线并在我的开发者页面上出现近 48 小时。您不可能做错任何事，因为 Google Play 没有提供任何选项让您从开发者页面中忽略您可能意外启用的应用程序。

我建议再等一两天。如果仍然没有出现，您可以*尝试*联系 Google Play 支持，但即使收到回复，我也不抱太大希望。

# android - 无法使用 trigger.io 和 parse.com 在 Android 中接收推送通知

> ID：14499947
> 
> 赞同：2
> 
> 时间：2013-01-24T11:12:23.000
> 
> 标签：android, push-notification, trigger.io, parse-platform

* * *

我刚刚开始使用 和 开发适用于 Android 和 iPhone 的应用`trigger.io`程序`parse.com`。现在我一直在尝试向应用程序添加推送通知。我从控制面板发送测试推送，`parse.com`但在我正在测试的 Android 手机上没有任何反应。

这是我所做的：

*   在设置中添加了`config.json`合作伙伴/解析部分`applicationId``clientKey``parse.com`

*   添加`"event": true`到 config.json 中的模块部分

*   我的 config.json 看起来像这样：

    ```
    {
      "config_version": "2",
      "name": "My test app",
      "author": "(my email)",
      "version": "0.1",
      "platform_version": "v1.4",
      "description": "An empty app created by default",
      "modules": {
        "logging": {
         "level": "DEBUG"
        },
        "event": true,
        "geolocation": true,
        "contact": true,
        "file": true,
        "is": true,
        "media": true,
        "notification": true,
        "prefs": true,
        "request": {
          "permissions": ["http://*/*", "https://*/*"]
        },
        "tools": true,
        "reload": true
      },
      "partners": {
        "parse": {
          "applicationId": "(my real app id)",
          "clientKey": "(my real client key)"
        }
      }
    } 
    ```

*   添加了以下代码来监听传入的推送：

    ```
    forge.logging.info('Adding push listener');

    forge.event.messagePushed.addListener(function (msg) {
      forge.logging.info('Got push: ');
      forge.logging.info(JSON.stringify(msg));
    }, function(err) {
      forge.logging.error('There was an error receiving push!');
      forge.logging.error(err);
    }); 
    ```

*   为了测试应用程序，我通过 USB 数据线将我的 Android 手机连接到我的 Mac，然后在浏览器的 Trigger toolkit 中选择“Run android”

*   在日志中，我看到消息“初始化解析并订阅默认频道”和“添加推送侦听器”

*   我去 parse.com 推送通知，看到有一个连接的设备。我测试发送几条消息，一些在“消息”模式下，一些在 JSON 模式下。

*   Parse 认为消息已发送，但我这边没有记录任何内容

*   我还测试了连接另一部 Android 手机。Parse 然后指出有两部可接通的电话，但新电话也没有收到任何消息。

查看文档和示例，我想不出其他可以尝试的方法。我无法确定这是一个`trigger.io`问题还是一个`parse.com`问题。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:43:13.043

当您使用默认广播而不是命名频道时，这是否是一个问题？

我们修复了 Android 上广播频道的问题，准备在明天或下周初部署 - 它将在平台版本 v1.4.27 中。

# java - 自动聚焦在 jpanel 上的 jButton

> ID：14499950
> 
> 赞同：8
> 
> 时间：2013-01-24T11:12:41.253
> 
> 标签：java, swing, focus, jbutton, netbeans-7

我有一个`JPanel`加载`JFrame`。JPanel 包含 4 个 JButton。我想做的事情是自动将焦点放在第一个 jbutton 上，这样我就可以用键盘在 JButtons 之间遍历。

我`jButton1.requestFocusInWindow();`在 jpanel 的构造函数中尝试了代码，但仍然没有用。有什么我想念的吗？我还能做什么？

编辑：项目包含3个java文件，它们的代码如下：

新JFrame.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package sampleui;

import java.awt.Container;
import java.awt.Toolkit;
import javax.swing.JRootPane;
import javax.swing.UIManager;

/**
 *
 * @author Administrator
 */
public class NewJFrame extends javax.swing.JFrame {

static Container container;

/**
 * Creates new form NewJFrame
 */
public NewJFrame() {
    initComponents();
    rootPane= getRootPane();
    container=getContentPane();
    setSize(Toolkit.getDefaultToolkit().getScreenSize());
    setVisible(true);

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    jMenuItem1 = new javax.swing.JMenuItem();
    jPanel1 = new javax.swing.JPanel();
    jLabel2 = new javax.swing.JLabel();
    jLabel5 = new javax.swing.JLabel();
    jLabel6 = new javax.swing.JLabel();
    jLabel1 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jPanel2 = new javax.swing.JPanel();
    jLabel7 = new javax.swing.JLabel();
    jLabel8 = new javax.swing.JLabel();
    jLabel9 = new javax.swing.JLabel();
    jDesktopPane1 = new javax.swing.JDesktopPane();

    jMenuItem1.setText("jMenuItem1");

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setTitle("This is the Title");

    jPanel1.setBackground(new java.awt.Color(204, 204, 204));
    jPanel1.setLayout(new java.awt.BorderLayout());

    jLabel2.setForeground(new java.awt.Color(255, 255, 255));
    jPanel1.add(jLabel2, java.awt.BorderLayout.PAGE_START);

    jLabel5.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
    jLabel5.setForeground(new java.awt.Color(51, 51, 51));
    jLabel5.setText("dfgdfgdfg");
    jPanel1.add(jLabel5, java.awt.BorderLayout.LINE_START);

    jLabel6.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
    jLabel6.setText("dfgdfgdfg");
    jPanel1.add(jLabel6, java.awt.BorderLayout.LINE_END);

    jLabel1.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
    jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
    jLabel1.setText("dfgdfgfdgfdgfdg");
    jPanel1.add(jLabel1, java.awt.BorderLayout.CENTER);

    jLabel3.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
    jLabel3.setText("jLabel3");
    jPanel1.add(jLabel3, java.awt.BorderLayout.PAGE_END);

    getContentPane().add(jPanel1, java.awt.BorderLayout.PAGE_START);

    jPanel2.setBackground(new java.awt.Color(204, 204, 204));
    jPanel2.setLayout(new java.awt.BorderLayout());

    jLabel7.setText("jLabel7");
    jPanel2.add(jLabel7, java.awt.BorderLayout.LINE_START);

    jLabel8.setHorizontalAlignment(javax.swing.SwingConstants.TRAILING);
    jLabel8.setText("jLabel8");
    jPanel2.add(jLabel8, java.awt.BorderLayout.LINE_END);

    jLabel9.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
    jLabel9.setText("jLabel9");
    jPanel2.add(jLabel9, java.awt.BorderLayout.CENTER);

    getContentPane().add(jPanel2, java.awt.BorderLayout.PAGE_END);

    jDesktopPane1.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jDesktopPane1MouseClicked(evt);
        }
    });
    getContentPane().add(jDesktopPane1, java.awt.BorderLayout.CENTER);

    pack();
}// </editor-fold>                        

private void jDesktopPane1MouseClicked(java.awt.event.MouseEvent evt) {                                           
    // TODO add your handling code here:

    container=getContentPane();
    setSize(Toolkit.getDefaultToolkit().getScreenSize());
    setVisible(true);

    //callCompanyOption();

    container.setVisible(false);
    jDesktopPane1.setVisible(false);
    NewJPanel p=new NewJPanel();
    //p.setBounds(40, 30, 1200, 786);
    container.add(p);
    container.setVisible(true);

}                                          

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new NewJFrame().setVisible(true);
        }
    });
}

// Variables declaration - do not modify                     
private javax.swing.JDesktopPane jDesktopPane1;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JLabel jLabel5;
private javax.swing.JLabel jLabel6;
private javax.swing.JLabel jLabel7;
private javax.swing.JLabel jLabel8;
private javax.swing.JLabel jLabel9;
private javax.swing.JMenuItem jMenuItem1;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
// End of variables declaration                   
} 
```

新JPanel.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package sampleui;

import java.awt.Component;
import java.awt.Container;
import java.awt.event.KeyEvent;

/**
 *
 * @author Administrator
 */
public class NewJPanel extends javax.swing.JPanel {

/**
 * Creates new form NewJPanel
 */
public NewJPanel() {
    initComponents();

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jPanel2 = new javax.swing.JPanel();
    jPanel1 = new javax.swing.JPanel();
    jButton2 = new javax.swing.JButton();
    jXMonthView1 = new org.jdesktop.swingx.calendar.JXMonthView();

    setLayout(new java.awt.GridBagLayout());

    javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
    jPanel2.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 0, Short.MAX_VALUE)
    );
    jPanel2Layout.setVerticalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 0, Short.MAX_VALUE)
    );

    add(jPanel2, new java.awt.GridBagConstraints());

    jButton2.setText("OK");
    jButton2.setNextFocusableComponent(jButton2);
    jButton2.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jButton2MouseClicked(evt);
        }
    });
    jButton2.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton2ActionPerformed(evt);
        }
    });
    jButton2.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            jButton2KeyPressed(evt);
        }
    });

    jXMonthView1.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            jXMonthView1KeyPressed(evt);
        }
    });

    javax.swing.GroupLayout jXMonthView1Layout = new javax.swing.GroupLayout(jXMonthView1);
    jXMonthView1.setLayout(jXMonthView1Layout);
    jXMonthView1Layout.setHorizontalGroup(
        jXMonthView1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 0, Short.MAX_VALUE)
    );
    jXMonthView1Layout.setVerticalGroup(
        jXMonthView1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 160, Short.MAX_VALUE)
    );

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addGap(64, 64, 64)
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                .addComponent(jButton2, javax.swing.GroupLayout.DEFAULT_SIZE, 217, Short.MAX_VALUE)
                .addComponent(jXMonthView1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addContainerGap(56, Short.MAX_VALUE))
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addGap(19, 19, 19)
            .addComponent(jXMonthView1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap())
    );

    add(jPanel1, new java.awt.GridBagConstraints());
}// </editor-fold>

private void jButton2MouseClicked(java.awt.event.MouseEvent evt) {                                      

            jPanel1.setVisible(false);
            NewJFrame.container.remove(NewJPanel.this);
            NewJPanel1 p=new NewJPanel1();
            NewJFrame.container.add(p);

}                                     

private void jButton2KeyPressed(java.awt.event.KeyEvent evt) {                                    
    // TODO add your handling code here:
    int key=evt.getKeyCode();
    if(key==KeyEvent.VK_ENTER)
    {
        System.out.println("Enter Pressed");
        jPanel1.setVisible(false);
        NewJFrame.container.remove(NewJPanel.this);
        NewJPanel1 p=new NewJPanel1();
        NewJFrame.container.add(p);
    }
}                                   

private void jXMonthView1KeyPressed(java.awt.event.KeyEvent evt) {                                        
    // TODO add your handling code here:
    jButton2.requestFocus();
}                                       

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    jPanel1.setVisible(false);
        NewJFrame.container.remove(NewJPanel.this);
        NewJPanel1 p=new NewJPanel1();
        NewJFrame.container.add(p);
}

// Variables declaration - do not modify
private javax.swing.JButton jButton2;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private org.jdesktop.swingx.calendar.JXMonthView jXMonthView1;
// End of variables declaration
} 
```

新JPanel1.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
 package sampleui;

 import java.awt.Window;
 import java.awt.event.KeyEvent;
 import javax.swing.JRootPane;

 /**
 *
 * @author Administrator
 */
 public class NewJPanel1 extends javax.swing.JPanel {

//=new NewJFrame();
/**
 * Creates new form NewJPanel1
 */
public NewJPanel1() {
    initComponents();

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jPanel1 = new javax.swing.JPanel();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jButton3 = new javax.swing.JButton();
    jButton4 = new javax.swing.JButton();
    jButton5 = new javax.swing.JButton();

    setRequestFocusEnabled(false);
    addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            formKeyPressed(evt);
        }
    });
    setLayout(new java.awt.GridBagLayout());

    jPanel1.setNextFocusableComponent(jButton5);
    jPanel1.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            jPanel1KeyPressed(evt);
        }
        public void keyReleased(java.awt.event.KeyEvent evt) {
            jPanel1KeyReleased(evt);
        }
    });

    jButton1.setText("back");
    jButton1.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jButton1MouseClicked(evt);
        }
        public void mouseEntered(java.awt.event.MouseEvent evt) {
            jButton1MouseEntered(evt);
        }
    });
    jButton1.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            jButton1KeyPressed(evt);
        }
    });

    jButton2.setText("jButton2");
    jButton2.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            jButton2KeyPressed(evt);
        }
    });

    jButton3.setText("jButton3");
    jButton3.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            jButton3KeyPressed(evt);
        }
    });

    jButton4.setText("jButton4");
    jButton4.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            jButton4KeyPressed(evt);
        }
    });

    jButton5.setText("jButton5");
    jButton5.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
    jButton5.setFocusCycleRoot(true);
    jButton5.setFocusTraversalPolicyProvider(true);
    jButton5.setInheritsPopupMenu(true);
    jButton5.setNextFocusableComponent(jButton4);
    jButton5.setVerifyInputWhenFocusTarget(false);
    jButton5.requestFocusInWindow();
    jButton5.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton5ActionPerformed(evt);
        }
    });
    jButton5.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            jButton5KeyPressed(evt);
        }
    });

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
            .addContainerGap(41, Short.MAX_VALUE)
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jButton2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jButton3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jButton4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jButton5, javax.swing.GroupLayout.PREFERRED_SIZE, 126, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(38, 38, 38))
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jButton5)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jButton4)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jButton3)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jButton2)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jButton1)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );

    jButton5.getAccessibleContext().setAccessibleParent(this);

    add(jPanel1, new java.awt.GridBagConstraints());
    //jButton1.requestFocusInWindow();
    //NewJFrame.getRootPane().setDefaultButton(jButton1);
    //jButton1.requestFocus();
}// </editor-fold>

private void jButton1MouseClicked(java.awt.event.MouseEvent evt) {                                      
    // TODO add your handling code here:
    jPanel1.setVisible(false);
    NewJFrame.container.remove(NewJPanel1.this);
    NewJPanel p=new NewJPanel();
    NewJFrame.container.add(p);
}                                     

private void jPanel1KeyPressed(java.awt.event.KeyEvent evt) {                                   
    // TODO add your handling code here:

    System.out.println("Key Pressed");

}                                  

private void jButton5KeyPressed(java.awt.event.KeyEvent evt) {                                    
    // TODO add your handling code here:
    int key=evt.getKeyCode();
    if(key==KeyEvent.VK_ESCAPE)
    {
        System.out.println("Escape Pressed");
        jPanel1.setVisible(false);
            NewJFrame.container.remove(NewJPanel1.this);
            NewJPanel p=new NewJPanel();
            NewJFrame.container.add(p);
    }
}                                   

private void jButton4KeyPressed(java.awt.event.KeyEvent evt) {                                    
    // TODO add your handling code here:
    int key=evt.getKeyCode();
    if(key==KeyEvent.VK_ESCAPE)
    {
        System.out.println("Escape Pressed");
        jPanel1.setVisible(false);
            NewJFrame.container.remove(NewJPanel1.this);
            NewJPanel p=new NewJPanel();
            NewJFrame.container.add(p);
    }
}                                   

private void jButton3KeyPressed(java.awt.event.KeyEvent evt) {                                    
    // TODO add your handling code here:
    int key=evt.getKeyCode();
    if(key==KeyEvent.VK_ESCAPE)
    {
        System.out.println("Escape Pressed");
        jPanel1.setVisible(false);
            NewJFrame.container.remove(NewJPanel1.this);
            NewJPanel p=new NewJPanel();
            NewJFrame.container.add(p);
    }
}                                   

private void jButton2KeyPressed(java.awt.event.KeyEvent evt) {                                    
    // TODO add your handling code here:
    int key=evt.getKeyCode();
    if(key==KeyEvent.VK_ESCAPE)
    {
        System.out.println("Escape Pressed");
        jPanel1.setVisible(false);
            NewJFrame.container.remove(NewJPanel1.this);
            NewJPanel p=new NewJPanel();
            NewJFrame.container.add(p);
    }
}                                   

private void jButton1KeyPressed(java.awt.event.KeyEvent evt) {                                    
    // TODO add your handling code here:
    int key=evt.getKeyCode();
    if(key==KeyEvent.VK_ESCAPE||key==KeyEvent.VK_ENTER)
    {
            jPanel1.setVisible(false);
            NewJFrame.container.remove(NewJPanel1.this);
            NewJPanel p=new NewJPanel();
            NewJFrame.container.add(p);
    }
}                                   

private void jButton1MouseEntered(java.awt.event.MouseEvent evt) {                                      
    // TODO add your handling code here:

}                                     

private void formKeyPressed(java.awt.event.KeyEvent evt) {                                
    // TODO add your handling code here:
    System.out.println("key pressed");
}                               

private void jPanel1KeyReleased(java.awt.event.KeyEvent evt) {                                    
    // TODO add your handling code here:
}                                   

private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    // TODO add your handling code here:
}                                        

// Variables declaration - do not modify
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JButton jButton3;
private javax.swing.JButton jButton4;
private javax.swing.JButton jButton5;
public static javax.swing.JPanel jPanel1;
// End of variables declaration 
```

}

使按钮能够聚焦的原因是用箭头键或键盘在按钮之间遍历。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T10:59:50.293

方法

```
jButton1.requestFocus(); 
```

应该可以正常工作。但是当你调用这个方法时它是必不可少的。

该方法必须在按钮显示后调用。这意味着，不要`requestFocus()`在构造函数中调用，而是在面板已经可见时调用它。

这是一些伪代码：

```
public NewJFrame() {
    initComponents();
    //some methods ommitted
    setVisible(true);

    //change to NewJPanel1

    //request focus after displaying the NewJPanel1
} 
```

**编辑：**这是一个可能的解决方案的具体实现。

*新面板.java*

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    jPanel1.setVisible(false);
    NewJFrame.container.remove(NewJPanel.this);
    NewJPanel1 p=new NewJPanel1();
    NewJFrame.container.add(p);

    p.initFocus();
} 
```

*新JPanel1.java*

```
public void initFocus() {
    jButton5.requestFocus();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T09:52:14.220

如果你改变这个：

```
public NewJPanel1() {
    initComponents();
} 
```

对此：

```
public NewJPanel1() {
    initComponents();
    addComponentListener(new ComponentListener() {

        @Override
        public void componentResized(ComponentEvent ce) {}

        @Override
        public void componentMoved(ComponentEvent ce) {}

        @Override
        public void componentShown(ComponentEvent ce) {
            jButton1.requestFocus();
        }

        @Override
        public void componentHidden(ComponentEvent ce) {}
    });
} 
```

然后它将起作用，因为它总是在它可见时运行。在将其添加到 NewJFrame 之前，它是不可见的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T18:28:25.693

要在加载父组件（在您的情况下）时自动聚焦`JButton`（或任何`Component`）（无论在哪个位置以及何时添加到其），您需要创建自己的将扩展您添加到接收的位置从. 最后， where的和方法将默认的焦点组件设置为您想要的（使用）。这是我为 Demo 提供的代码。我希望这将帮助您实现您正在寻找的结果：`JPanel``JFrame``parent component``panel``JPanel``component listener``component events``panel``override``componentMoved``componentShow``java.awt.event.ComponentListener` `interface``button``button.requestFocus()`

```
import java.awt.AWTKeyStroke;
import java.awt.Container;
import java.awt.GridLayout;
import java.awt.BorderLayout;
import java.awt.KeyboardFocusManager;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.ComponentListener;
import java.awt.event.ComponentEvent;
import java.awt.event.KeyEvent;
import java.util.Set;
import java.util.HashSet;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.JButton;
import javax.swing.JOptionPane;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class FocusFrame extends JFrame
{
    JButton lowerButton;
    JButton upperButton;
    JPanel centerPanel;

    public void prepareAndShowGUI()
    {
        centerPanel = new FocusPanel();
        lowerButton = new JButton("Lower Button");
        upperButton = new JButton("Click here to hide/show center Panel");
        Container container = getContentPane();
        container.add(centerPanel,BorderLayout.CENTER);
        container.add(lowerButton,BorderLayout.SOUTH);
        container.add(upperButton,BorderLayout.NORTH);
        upperButton.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent evt)
            {
                centerPanel.setVisible(!centerPanel.isVisible());
            }
        });
        pack();
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    public static void main(String[] st)
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                FocusFrame fFrame = new FocusFrame();
                fFrame.prepareAndShowGUI();
            }
        });
    }
}

class FocusPanel extends JPanel implements ComponentListener
{
    int SIZE = 10;
    JButton[] buttons;
    public FocusPanel()
    {
        createAndAttachGUI();
    }
    private void createAndAttachGUI()
    {
        buttons = new JButton[SIZE];
        setLayout(new GridLayout(5,5));
        for (int i = 0 ; i < SIZE ; i++ )
        {
            buttons[i] = new JButton("Button " + (i+1));
            buttons[i].setFocusTraversalKeysEnabled(true);
            add(buttons[i]);
        }
        //For Forward Focus Traversal
        Set<AWTKeyStroke> set = new HashSet<AWTKeyStroke>(this.getFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS));
        set.add(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT,0));
        setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS,set);
        //For Backward Focus Traversal
        set = new HashSet<AWTKeyStroke>(this.getFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS));
        set.add(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT,0));
        setFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS,set);
        addComponentListener(this);
    }
    @Override
    public void componentHidden(ComponentEvent e)
    {}
    @Override
    public void componentMoved(ComponentEvent e)
    {
        buttons[0].requestFocus();
    }
    @Override
    public void componentResized(ComponentEvent e)
    {}
    @Override
    public void componentShown(ComponentEvent e)
    {
        buttons[0].requestFocus();
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T11:14:30.070

试试这个：

```
public NewJFrame() {
    initComponents();
    rootPane= getRootPane();
    container=getContentPane();
    setSize(Toolkit.getDefaultToolkit().getScreenSize());
    setVisible(true);

    //added code:
    JButton jbutton5 = //get from NewJPanel1
    getRootPane().setDefaultButton(jbutton5);
    jbutton5.requestFocus();
} 
```

您需要创建一个方法`NewJPanel1`来传递对`jbutton5`to的引用`NewJFrame`。

```
public JButton getDefaultButton () {
    return jButton5;
} 
```

# c# - 字符串未被识别为有效的布尔值

> ID：14499952
> 
> 赞同：3
> 
> 时间：2013-01-24T11:12:46.400
> 
> 标签：c#, formatexception

我正在通过套接字发送布尔值的字符串表示形式并在另一端读取它。

```
void Send(bool value)
{
    Socket.Send(value.ToString());
}

void Receive()
{
    string message = Socket.Receive();

    Console.WriteLine(message) // Always equal to either 'True' or 'False (without quotes)

    bool result = bool.Parse(message) // here I get the format exception.
} 
```

但是当我尝试解析我的时出现以下异常`message`：

> `String was not recognized as a valid boolean`.

我得到异常时的值是：`True`. 没有空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-30T07:10:44.040

乍一看，我会认为它在未修剪的空间方面存在问题......但事实并非如此，作为`Boolean.Parse`用途`TryParse`，反过来，它会在其中一次尝试中修剪空间：

```
public static Boolean Parse (String value) {
    if (value==null) throw new ArgumentNullException("value");
    Contract.EndContractBlock();
    Boolean result = false;
    if (!TryParse(value, out result)) {
        throw new FormatException(Environment.GetResourceString("Format_BadBoolean"));            
    }
    else {
        return result;
    }
}

public static Boolean TryParse (String value, out Boolean result) {
    result = false;
    if (value==null) {
        return false;
    }
    // For perf reasons, let's first see if they're equal, then do the
    // trim to get rid of white space, and check again.
    if (TrueLiteral.Equals(value, StringComparison.OrdinalIgnoreCase)) {
        result = true;
        return true;
    }
    if (FalseLiteral.Equals(value,StringComparison.OrdinalIgnoreCase)) {
        result = false;
        return true;
    }

    // Special case: Trim whitespace as well as null characters.
    value = TrimWhiteSpaceAndNull(value);

    if (TrueLiteral.Equals(value, StringComparison.OrdinalIgnoreCase)) {
        result = true;
        return true;
    }

    if (FalseLiteral.Equals(value,StringComparison.OrdinalIgnoreCase)) {
        result = false;
        return true;
    }

    return false;
} 
```

**参考：** [http ://referencesource.microsoft.com/#mscorlib/system/boolean.cs,e2a8f2e50ecf93c0,references](http://referencesource.microsoft.com/#mscorlib/system/boolean.cs,e2a8f2e50ecf93c0,references)

所以，肯定有其他事情发生。也许格式存在问题，UTF-8、ANSI、ASCII 等。您的要求之一是您需要一个布尔值，这样您就不会有两种情况`True`和`False`，所以为什么不这样做：

```
bool result = message.ToLower().Contains("true"); // true or false 
```

**编辑：**

在阅读了一些评论之后，您似乎期待超出`True`or`False`的情况，在这种情况下，结果可能无效。我建议这样的事情：

```
var lMessage = message.ToLower();
bool? result = lMessage.Equals("true") ? true : lMessage.Equals("false") ? false : null; 
```

因此，如果消息包含 ，`True`则为`true`; 如果`False`, 它是`false`; 否则为 ，`null`表示无效消息。然后，您可以检查是否`result`是`null`，然后显示无效消息或执行其他操作。我不确定你从那里开始的日常工作是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:17:16.770

尝试这个：

```
void Receive()
{
    string message = Socket.Receive();

    Console.WriteLine(message) // Always equal to either 'True' or 'False (without quotes)

    bool result = message.ToLower().Equals("true");
} 
```

# javascript - 将 flexigrid 用于触摸屏

> ID：14499955
> 
> 赞同：0
> 
> 时间：2013-01-24T11:12:59.940
> 
> 标签：javascript, d3.js

我在 html 页面中成功渲染了 d3js 区域图这是在 chrome 或 mozilla 中成功渲染的代码。文件的名称是 temp.html。这是代码

```
<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
    <title>js graphs and charts libraries</title>

    <script 
src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script src="http://d3js.org/d3.v3.js"></script>

    <body>
        <div id="dbar">

        </div>

    <script type="text/javascript"> 
        var margin = {top:10, right: 20, bottom: 30,left: 40},
            width = 960 - margin.left - margin.right,
            height = 400 - margin.top - margin.bottom;
            var svg = d3.select ("#dbar").append("svg").attr("width",
width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom)
.append("g").
attr("transform","translate("+margin.left+","+margin.top+")");

        var parseDate = d3.time.format("%m-%Y").parse;

        var x = d3.time.scale().range([0, width]);
        var y = d3.scale.linear().range([height, 0]);

        var xAxis = d3.svg.axis().scale(x).orient("bottom");

        var yAxis = d3.svg.axis().scale(y).orient("left");

        var area = d3.svg.area().x(function(d) { return x(d.date); })
                    .y0(height)
                    .y1(function(d) { return y(d.count); });

        d3.json("data/json.json", function(error, data) {
          data.StoreVisitGraphCount.list.forEach(function(d) {

            d.date = parseDate(d.date);

            d.count = +d.count;
          });
          //console.log(data.StoreVisitGraphCount.list);
        x.domain(d3.extent(data.StoreVisitGraphCount.list, function(d) {
return d.date; }));
        y.domain([0, d3.max(data.StoreVisitGraphCount.list, function(d) { 
`return d.count; })]);`
    console.log(data.StoreVisitGraphCount.list);
      svg.append("path")
          .datum(data.StoreVisitGraphCount.list)
          .attr("class", "area")
          .attr("d", area);

      svg.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + height + ")")
          .call(xAxis);

      svg.append("g")
          .attr("class", "y axis")
          .call(yAxis)
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("text-anchor", "end")
          .text("Price ($)");
        });
    </script>

    </body>
</html> 
```

但是，当我复制粘贴此代码以说“temp.jsp”页面时，它不会呈现并且图表不会出现。

需要建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:53:13.190

我在你的标题中看到你提到了 flexigrid :) 你应该更新它。

要回答您的问题，有两个可能的问题： 1\. 确保“data/json.json”服务正常（不是 404 错误） 2\. 将文件保存为 .jsp 可能意味着您需要额外的代码。

# jquery - .on() 函数 jQuery 的“this”上下文

> ID：14499961
> 
> 赞同：0
> 
> 时间：2013-01-24T11:13:20.257
> 
> 标签：jquery, this

我想知道如何在不定义匿名事件处理函数的情况下指向方法`this`内部的选定元素（事件源） 。`.on()`

例如，在下面的代码中，我选择的元素的上下文是`document`，即被`$(this)`解释为`document`

```
$('.nav-item').click(MyFrameworkUtils.navigationBinding($(this), 'arg1', 'arg2')) 
```

但是，如果包装在匿名事件处理程序中，`$(this)`则被解释为（理想地）被选元素。

```
$('.nav-item').click(function(){
    var source = $(this);
    MyFrameworkUtils.navigationBinding(source, 'arg1', 'arg2');
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T11:24:22.320

您可以使用以下语法：

```
$('.nav-item').click({arg1:'arg1', arg2:'arg2'}, MyFrameworkUtils.navigationBinding) 
```

函数看起来像这样：

```
function navigationBinding(event) {
    var source = $(this);
    var arg1 = event.data.arg1;
    var arg2 = event.data.arg2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:19:07.010

在您的第一个示例中，您将结果传递给`MyFrameworkUtils.navigationBinding($(this), 'arg1', 'arg2')`您的`click`方法。因此，上下文`this`是上下文是外部范围，这就是`document`您的情况。

然而，对于第二个示例，范围是内部函数，并且与大多数由 DOM 触发的事件一样，`this`是触发元素。

另外[可能不相关]，当调用函数时，您可以`this`使用`apply`or`call`方法定义，正如[调用和应用之间有什么区别？](https://stackoverflow.com/questions/1986896/what-is-the-difference-between-call-and-apply)

# c# - 在其他 aspx 文件中包含 aspx 文件

> ID：14499965
> 
> 赞同：3
> 
> 时间：2013-01-24T11:13:26.507
> 
> 标签：c#, asp.net, .net

```
<% if (Session["desig"].ToString() == "Developer"){%>
    <td>
        <select name='zone' id="zone" onchange="showLoc(this.value,'mlodg_loc')"> 
            <option value="Select Zone">Select Zone</option>
            <option value="East">East</option>
            <option value="West">West</option>
            <option value="North">North</option>
            <option value="South1">South1</option>
            <option value="South2">South2</option>
            <option value="South3">South3</option>
        </select>
    </td>  
<%}
  else 
  {%>
        <td>
          <select name='zone' id="Select1" onchange="showLoc(this.value,'mlodg_loc')"> 
              <option value="Select Zone">Select Zone</option>
              <option value="<%#Session["zone"]%>"><%# Session["zone"].ToString() %></option>
          </select>
        </td>
<%}%> 
```

如果我直接编写，上面的代码工作正常，我尝试在其他文件和主文件中编写此代码`Response.WriteFile("zone.aspx")`

我如何包含它有什么方法可以包含并且还想知道编写上述语句的更好方法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T11:19:51.970

`UserControls`asp.net 中有没有为此目的，为您拥有的这段代码制作一个**.ascx**文件，并将其用作任何地方的控件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T11:20:18.020

[`Response.WriteFile`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.writefile.aspx)只是将文件内容写入 Http 响应流，而不对其进行解析。

尽管可以[在 asp.net](http://msdn.microsoft.com/en-us/library/3207d0e3%28v=vs.80%29.aspx) ( `<!--#include file="xxx.ext" -->`) 中使用服务器端包含，但这对 IMO 来说具有 asp-classic 代码气味。

重用`.aspx`组件的更好方法是使用[用户控件 (.ascx)](http://msdn.microsoft.com/en-us/library/26db8ysc(v=vs.85).aspx)。

类似的问题[在这里](https://stackoverflow.com/questions/11959125/asp-net-code-within-include-not-executing)

**更新**

`Response.WriteFile`适用于普通 Html、.css 或 .js，但不适用于包含 c# 或引用 .Net 对象的代码（您`Session`在代码中使用过），例如

```
Response.WriteFile("HtmlSnippet.html") 
```

`HtmlSnippet.html`在哪里

```
<p>In breaking news, scientists have discovered a planet in 
     <a href='http://en.wikipedia.org/wiki/Alpha_Centauri_Bb'>Alpha Centauri</a>
</p> 
```

使用服务器端包含，例如`<!--#include file="file.inc" -->`将允许您在 file.inc 中放置类似的内容：

```
<% if (Session["desig"].ToString() == "Developer"){ %>
   You are a Developer!!
<% } %> 
```

`.ascx`但是，建议使用用户控件（您的可重用控件将是一流的对象，具有属性、方法并能够引发事件。你需要在这里做一些研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T19:32:12.457

Response.WriteFile does not process the code on the server side. It simply takes the contents of html and pipes it to the browser. If your code contains code blocks that must be processed by the server you can use this handy feature:

```
<div ID="menuContent" runat="server">
    <!-- #Include virtual="/menu.aspx" -->
</div> 
```

In my menu.aspx file I have raw html and some C# codeblocks and ASP will resolve those after inserting the content into the page. Great huh?

# java - 无法使用 xoauth 在 javamail 上向 gmail 发送电子邮件

> ID：14499968
> 
> 赞同：1
> 
> 时间：2013-01-24T11:13:46.097
> 
> 标签：java, smtp, gmail, oauth-2.0, jakarta-mail

我一直在从事一个项目，该项目涉及连接 gmail smtp 和使用基于 oauth2 的连接发送电子邮件。

我使用[此处](http://code.google.com/p/google-mail-oauth2-tools/source/browse/trunk#trunk/java/com/google/code/samples/oauth2)提供的示例连接到 gmail smtp 并连接到 smtp 工作正常。但是问题出在发送消息时。我得到以下错误

> com.google.code.com.sun.mail.smtp.SMTPSendFailedException：530-5.5.1 需要身份验证。如需了解详情，请访问 530 5.5.1 [http://support.google.com/mail/bin/answer.py?answer=14257](http://support.google.com/mail/bin/answer.py?answer=14257) o5sm11801729pay.5

我不太了解为什么在使用 gmail smtp 成功验证后会弹出错误。以下是完整的调试日志

```
DEBUG: setDebug: JavaMail version 1.4.4
DEBUG SMTP: enable SASL
DEBUG SMTP: useEhlo true, useAuth false
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL false
220 mx.google.com ESMTP th10sm14683815pbc.76
DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

EHLO bala-Inspiron-N4010
250-mx.google.com at your service, [27.97.28.232]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "STARTTLS", arg ""
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
STARTTLS
220 2.0.0 Ready to start TLS
EHLO bala-Inspiron-N4010
250-mx.google.com at your service, [27.97.28.232]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH XOAUTH2"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
AUTH XOAUTH2 dXNlcj1jaGFuZHUyNzA4QGdtYWlsLmNvbQFhdXRoPUJlYXJlciB5YTI5LkFIRVM2WlFqUWJqZ3RKRmpSSlFxM2lrMnd1QXMySEQ1UXVjWm8ySFN1bnMwWlk2VAEB
235 2.7.0 Accepted
HELO
250 mx.google.com at your service
NOOP
250 2.0.0 OK th10sm14683815pbc.76
DEBUG: getProvider() returning com.google.code.javax.mail.Provider[TRANSPORT,smtp,com.google.code.com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: enable SASL
DEBUG SMTP: useEhlo true, useAuth false
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL false
220 mx.google.com ESMTP qf7sm14690532pbb.49
DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

EHLO bala-Inspiron-N4010
250-mx.google.com at your service, [27.97.28.232]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "STARTTLS", arg ""
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
STARTTLS
220 2.0.0 Ready to start TLS
EHLO bala-Inspiron-N4010
250-mx.google.com at your service, [27.97.28.232]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH XOAUTH2"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: use8bit false
MAIL FROM:<chandu2708@gmail.com>
530-5.5.1 Authentication Required. Learn more at
530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 qf7sm14690532pbb.49
DEBUG SMTP: got response code 530, with response: 530-5.5.1 Authentication Required. Learn more at
530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 qf7sm14690532pbb.49

RSET
250 2.1.5 Flushed qf7sm14690532pbb.49
com.google.code.com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required. Learn more at
530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 qf7sm14690532pbb.49 
```

下面是我用来发送电子邮件的代码

```
Properties props = new Properties();
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.starttls.required", "true");
        props.put("mail.smtp.sasl.enable", "true");
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.port", "587");
        props.put("mail.imaps.sasl.mechanisms", "XOAUTH2");

        props.put(OAuth2SaslClientFactory.OAUTH_TOKEN_PROP, oauthToken);
        //props.put("mail.smtp.password", "");

        // props.put("mail.smtp.auth", "true");

        Session session = Session.getInstance(props);
        session.setDebug(debug);

        final URLName unusedUrlName = null;
        SMTPTransport transport = new SMTPTransport(session, unusedUrlName);
        // If the password is non-null, SMTP tries to do AUTH LOGIN.
        final String emptyPassword = null;
        transport.connect(host, port, userEmail, emptyPassword);

        byte[] response = String.format("user=%s\1auth=Bearer %s\1\1",
                userEmail, oauthToken).getBytes();
        response = BASE64EncoderStream.encode(response);

        transport.issueCommand("AUTH XOAUTH2 " + new String(response), 235);

        return new SMTPConnection(transport, session, new String(response));

           --------------XXX end of method XXX-----------------

SMTPConnection smtpConnection = XoauthAuthenticator.connectToSmtp("smtp.gmail.com", 587,
                user.getEmail(), user.getAccessToken(), null, XoauthAuthenticator.getAnonymousConsumer(),
                true);

        SMTPMessage smtpMessage = new SMTPMessage(smtpConnection.getSession());
        smtpMessage.setFrom(new InternetAddress(user.getEmail()));
        smtpMessage.setRecipients(RecipientType.TO, InternetAddress.parse(email));

        String subject = message;

        smtpMessage.setSubject(subject);

        smtpMessage.setText(message);

        smtpMessage.setSentDate(new Date());

        smtpConnection.getSMTPTransport().simpleCommand("HELO");

        boolean isConnected = smtpConnection.getSMTPTransport().isConnected();

        smtpConnection.getSMTPTransport().send(smtpMessage, smtpMessage.getAllRecipients()); 
```

非常感谢您的帮助。

谢谢你，-巴拉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:47:27.503

[您使用了 Transport.send 而不是 Transport.sendMessage。](http://www.oracle.com/technetwork/java/javamail/faq/index.html#send)

# java - 在 Java 中为调试目的打印唯一的对象标识

> ID：14499969
> 
> 赞同：10
> 
> 时间：2013-01-24T11:13:51.967
> 
> 标签：java, object, identity, uniqueidentifier

让我们从代码开始。

```
Future<MyResult> obj = getFuture();
debugLog.println("Handling future: " + System.identityHashCode(obj); 
```

然后在其他地方再次相同，或者可能再次执行同一段代码，可能在不同的线程中。

```
Future<MyResult> obj = getFuture();
debugLog.println("Handling future: " + System.identityHashCode(obj); 
```

现在上面，如果 obj 是同一个对象，那么调试打印显然是相同的。但是如果它们*不同*，仍然有可能发生哈希冲突，因此即使对于不同的对象，打印输出*也可能相同。*因此，具有相同的输出（或更一般地说，相同的字符串）并不能保证相同的对象。

**问题**：Java 中有没有办法为任意对象获取唯一的 id*字符串？*或者更正式地说，给出`static String Id.str(Object o)`方法，以便它*始终*为真：

```
final Object obj1 = ...;
final String firstId = Id.str(obj1);
// arbitrary time passes, garbage collections happen etc.
// firstId and obj1 are same variables as above
(firstId.equals(Id.str.obj2)) == (obj1 == obj2) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T11:34:33.130

我认为，实际上没有任何方法（即技术）可以保证对象 ID 的这种唯一性。这种识别的唯一目的是一种寻址该对象在内存中的数据的方法。万一这个对象死了，然后被 GC 从内存中删除，没有人会限制系统使用它以前的地址空间来放置新的对象的数据。

但实际上，在您的程序中有任何引用的所有可用对象中，在很短的一段时间内，`System.identityHashCode(obj)`实际上会给您该对象的**唯一**标识。这是因为这`hashCode`是使用对象的内存位置计算的。但是，它是一个实现特性，没有文档记录，也不能保证对于外国 JVM。

此外，您可以阅读这篇著名的 QA：[Java：如何获取覆盖 hashCode() 的对象的唯一 ID？](https://stackoverflow.com/questions/909843/java-how-to-get-the-unique-id-of-an-object-which-overrides-hashcode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:37:23.227

假设此 ID 实际上是哈希码并不重要，那么您可以通过让 Singleton 类生成分配给每个对象的 ID 来保证唯一 ID。然后，您可以使用该标识符而不是哈希码。

你的目标是什么，也许有更好的解决方案？

# ios - CGPoint：在 viewDidLoad 上确定并滚动到 UIView 的底部边缘

> ID：14499973
> 
> 赞同：0
> 
> 时间：2013-01-24T11:14:03.607
> 
> 标签：ios, xcode, uiview, cgpoint

我正在尝试使应用程序加载已经滚动到`UIView`我已设置的底部。

我做了一些研究，找到了`setContentOffset:animated:`获得我想要的观点的方法。但是任何熟悉该方法的人都会知道，内容偏移量要求一个`CGPoint`. 我不确定如何`UIView`用 a检索 a 的底部`CGPoint`。

我尝试寻找其他人询问如何做我想做的事情，令我惊讶的是，我实际上并没有找到任何人询问如何检测 a 的底部`UIView`，然后设置内容偏移到那个点。

我会发布一些示例代码，但我什至不知道从哪里开始。

有人可以帮助我朝着正确的方向前进吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:16:51.973

您可以使用它来滚动 UIScrollView 到视图的底部

```
CGPoint bottom = CGPointMake(0, scrollView.contentSize.height - self.scrollView.bounds.size.height);
[scrollView setContentOffset:bottom animated:YES]; 
```

# c# - 使用 LINQ 对特定列求和

> ID：14499976
> 
> 赞同：3
> 
> 时间：2013-01-24T11:14:10.280
> 
> 标签：c#, linq

使用下面提到的查询，我得到了一个名为 **PromotionValue**的列的所有值。我想得到**匹配*的所有值的总和*

```
var matched = from table1 in dvtempPropertyRoomRatePromotion.ToTable().AsEnumerable()
              join table2 in dvPropertyRooms.ToTable().AsEnumerable() on
              table1.Field<DateTime>("RateDate") equals table2.Field<DateTime>("RateDate")
            where table1.Field<DateTime>("RateDate") == table2.Field<DateTime>("RateDate")
               select table1.Field<string>("promotionValue"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T11:18:55.687

您需要将字符串[解析](http://msdn.microsoft.com/en-us/library/cafs243z.aspx)为`int`or `decimal`：

```
var matched = from r1 in dvtempPropertyRoomRatePromotion.ToTable().AsEnumerable()
              join r2 in dvPropertyRooms.ToTable().AsEnumerable() 
              on r1.Field<DateTime>("RateDate").Date equals r2.Field<DateTime>("RateDate").Date
              select decimal.Parse(r1.Field<string>("promotionValue"));
decimal sum = matched.Sum(); 
```

请注意，我还更改了其他一些内容，例如冗余`where`（因为您已经加入了这些表）或`Date`.`DateTime`

除此之外

1.  为什么你需要`DataView`呢？[`ToTable`](http://msdn.microsoft.com/en-us/library/a8ycds2f.aspx)总是创造一个新的`DataTable`. 为什么不全用`Linq-To-DataSet`？我假设您已使用`DataView`for 过滤，请`Enumerable.Where`改用。这将更一致、更高效、更易读。
2.  为什么该列`promotionValue`是一个字符串？您应该将其存储为数字类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T08:42:36.927

在这里，我对不同表的两列的总和进行简单查询。

SELECT res.Date ,res.Cost , res.Cost+res_con.Cost FROM [ExpenseMst] res 内连接 [ExpenseMst_2] res_con on res_con.ID =res.ID

## 日期 | 成本 1 | 成本 2| 全部的

2014-03-04 | 5200 |5200 |10400

2014-03-04 | 5012 |5012 |10024

2014-03-22 |100 |100 |200

2014-03-13 |25 |25 |50

2014-02-22 | 120 |120 |240

我希望它有用.. :)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-24T11:17:34.997

你可以做

```
int sum = 0;
foreach(int match in matched)
{
  sum = sum + match;
} 
```

# sql-server - 作为 Windows 身份验证用户的“无法创建 OLE DB 提供程序的实例”错误

> ID：14499977
> 
> 赞同：21
> 
> 时间：2013-01-24T11:14:12.573
> 
> 标签：sql-server, oracle, oledb, windows-authentication, linked-server

我正在尝试从 Oracle 服务器上的 MS SQL Server 运行 openrowset。

当我执行以下命令时：

```
select * from
OPENROWSET('OraOLEDB.Oracle','srv';'user';'pass', 
'select * from table') 
```

发生以下错误

```
Msg 7302, Level 16, State 1, Line 1
Cannot create an instance of OLE DB provider "OraOLEDB.Oracle" for linked server "(null)". 
```

谁能告诉我如何使用 openrowset `OraOLEDB.Oracle`？

我正在使用 64 位版本的 MS SQL Server 和 Oracle OLEDB 驱动程序。

## 编辑

我已经在两台运行*Windows 7 x64*和*Windows Server 2008 x64*和*MS SQL Server 2008 x64*的机器上进行了尝试。两者都显示相同的错误消息。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-24T12:28:19.350

在 SQL Server 企业管理器中，打开`\Server Objects\Linked Servers\Providers`，右键单击`OraOLEDB.Oracle`提供程序，选择属性并选中该`"Allow inprocess"`选项。重新创建链接服务器并再次测试。

如果您无权访问 SQL Server Management Studio，也可以执行以下查询：

```
EXEC master.dbo.sp_MSset_oledb_prop N'OraOLEDB.Oracle', N'AllowInProcess', 1 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-05T18:19:37.943

遇到这个问题，链接服务器适用于服务器上的本地管理员用户，但不适用于其他任何人。经过几个小时的折腾，我设法使用以下步骤解决了这个问题：

1.  运行 (CTRL + R) “dcomcnfg”。导航到“组件服务 -> 计算机 -> 我的电脑 -> DCOM 配置”。
2.  打开“MSDANITIALIZE”的属性页。
3.  复制属性页面上的“应用程序 ID”。
4.  关闭“dcomcnfg”。
5.  运行“注册表”。使用 ??? 导航到“HKEY_CLASSES_ROOT\AppID{???}” 表示您在步骤 #3 中复制的应用程序 ID。
6.  右键单击“{???}”文件夹并选择“权限”</li>
7.  将本地管理员组添加到权限，授予他们完全控制权。
8.  关闭“注册表”。
9.  重新启动服务器。
10.  运行“dcomconfig”。导航到“组件服务 -> 计算机 -> 我的电脑 -> DCOM 配置”。
11.  打开“MSDANITIALIZE”的属性页。
12.  在“安全”选项卡上，选择“启动和激活权限”下的“自定义”，然后单击“编辑”按钮。
13.  添加“Authenticated Users”并授予他们全部 4 个启动和激活权限。
14.  关闭“dcomcnfg”。
15.  找到 Oracle 安装根目录。就我而言，“E:\Oracle”。
16.  编辑 Oracle 根目录的安全属性。添加“Authenticated Users”并授予他们“Read & Execute”、“List folder contents”和“Read”权限。应用新权限。
17.  单击“高级权限”按钮，然后单击“更改权限”。选择“将所有子对象权限替换为此对象的可继承权限”。应用新权限。
18.  在 SQL Server 中找到“OraOLEDB.Oracle”提供程序。确保选中“允许进行中”参数。
19.  重新启动服务器。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-21T14:24:22.060

使用 Windows 身份验证（而不是本地 SQL Server 帐户）连接到 SQL Server 时，尝试使用链接服务器可能会导致错误消息：

```
Cannot create an instance of OLE DB provider "(OLEDB provider name)"... 
```

此问题最直接的答案由[Microsoft KB 2647989](http://support.microsoft.com/kb/2647989)提供，因为“MSDANITIALIZE DCOM 类的安全设置不正确”。

解决方案是修复 MSDANITIALIZE 的安全设置。在 Windows Vista 和更高版本中，该类归 TrustedInstaller 所有，因此必须更改 MSDANITIALIZE 的所有权，然后才能调整安全性。上面的知识库有详细的说明。

[这篇 MSDN 博客文章描述了原因](http://blogs.msdn.com/b/dataaccesstechnologies/archive/2010/08/19/permissions-needed-to-set-up-linked-server-with-out-of-process-provider.aspx)：

> MSDANITIALIZE 是由 OLE DB 提供的 COM 类。此类可以解析 OLE DB 连接字符串并根据连接字符串中的属性值加载/初始化提供程序。MSDAINITILIAZE 由连接到 SQL Server 的用户启动。如果使用 Windows 身份验证连接到 SQL Server，则在登录的用户帐户下初始化提供程序。如果登录用户是 SQL 登录，则在 SQL Server 服务帐户下初始化提供程序。根据所使用的登录类型，必须相应地提供对 MSDANITIALIZE 的权限。

这个问题至少可以追溯到 SQL Server 2000；[Microsoft 的 KB 280106 描述了该错误](http://support.microsoft.com/kb/280106)（请参阅“消息 3”），并建议修复为 OLEDB 提供程序设置 In Process 标志。

虽然设置 In Process 可以解决眼前的问题，但它可能不是您想要的。据微软称，

> 在 SQL Server 进程之外实例化提供程序可以保护 SQL Server 进程免受提供程序中的错误的影响。当提供程序在 SQL Server 进程之外实例化时，不允许更新或插入引用长列（text、ntext 或 image）。- [SQL Server 2008 R2 的链接服务器属性文档](http://technet.microsoft.com/en-us/library/ms188095(v=sql.105).aspx)。

更好的答案是遵循 Microsoft 指导并调整 MSDANITIALIZE 安全性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-14T12:27:26.307

特别是对于错误 7302，我在注册表中查找 OraOLEDB.Oracle 时发现 InprocServer32 位置错误。

如果是这种情况，或者您在注册表中找不到该字符串，那么您将不得不安装或重新注册该组件。

我必须从 GUID 级别删除密钥，然后找到 ProgID (OraOLEDB.Oracle) 密钥，并将其也删除。（ProgID 作为一对链接到 CLSID）。

然后我通过在 ORAOLEDB*.dll 上调用 regsvr32.exe 重新注册了 OraOLEDB.Oracle。

只是单独重新注册并不能解决问题，我不得不删除注册表项以使其指向正确的位置。或者，破解 InprocServer32 位置。

现在我有错误 7308，关于单线程公寓；滚！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-29T17:36:25.810

在尝试链接到 Oracle 12c 的 SQL Server 2017 上收到同样的错误。我们可以使用 Oracle 的 SQL Developer 连接到源数据库，但链接服务器一直抛出 7302 错误。

最后，我们**停止了所有 SQL 服务**，然后**重新安装了 ODAC 组件**。启动 SQL 服务备份，瞧！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-24T07:22:39.243

**以下配置的类似情况：**

*   Windows Server 2012 R2 标准版
*   MS SQL server 2008（也测试过 SQL 2012）
*   Oracle 10g 客户端 (OracleDB v8.1.7)
*   MSDAORA 提供商
*   错误 ID：7302

**我的解决方案：**

*   安装**32 位**MS SQL Server（64 位 MSDAORA 不存在）
*   安装**32bit** Oracle 10g 10.2.0.5 补丁（在 setup.exe 上设置**W7 兼容性）**
*   重启 SQL 服务
*   在 MSDAORA 提供程序中选中**允许处理**
*   测试链接的oracle服务器连接

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-13T16:42:03.590

除了其他很好的回应之外，我只需要授予 Oracle 安装文件夹的 NTFS 权限。（我授予了读取权限）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-20T11:06:06.557

只需在 OraOLEDB.oracle 提供程序的属性上启用选项“允许处理中”，如下所示

*   [打开服务器对象>链接服务器>提供程序] [1](https://i.stack.imgur.com/QKsZe.png) [右键单击
*   OraOLEDB.oracle > properties ] [2](https://i.stack.imgur.com/DRFQa.png)然后选择选项“Allow in
*   过程”，然后单击确定

# windows-7 - KDE for Windows (7)：不可调整大小的对话框

> ID：14499978
> 
> 赞同：1
> 
> 时间：2013-01-24T11:14:16.117
> 
> 标签：windows-7, kde4, umbrello

问题：我目前必须使用win7，但我想使用Umbrello UML。现在我已经安装了 KDE for Windows 端口并且该工具正在运行。但是，如果弹出高对话框或其他不可调整大小的窗口，则可能会发生我没有到达底部按钮的情况，因为它不在屏幕上。

即使我通过鼠标禁用了窗口捕捉，我也无法将窗口移动到桌面的顶部边框以到达底部栏。它总是迅速回到可见区域。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:26:39.527

终于找到了一种解决方法：[http](http://code.google.com/p/altdrag/) ://code.google.com/p/altdrag/ 效果很好。现在我可以随意移动窗口了。

# html - 放置时打开网址

> ID：14499981
> 
> 赞同：1
> 
> 时间：2013-01-24T11:14:20.910
> 
> 标签：html, drag-and-drop, hyperlink

这是一个非常基本的问题，因为我是一个非常基本的编码员:)

我正在使用 HTML5 中的拖放功能

一切都很好，直到打开 URL（在同一个窗口中）的那一刻......图像是可拖动的，拖放工作正常。但...

如何让浏览器打开与放置在另一个元素中的元素关联的 URL，以及如何将该 URL 关联到该元素？

要更清楚。在主页中，我有一个图片库。对于每个图像，我需要关联一个不同的 url（我只是把它放在 id 中吗？）。就在画廊下面有一个盒子。当我在此框中拖放图像时，浏览器需要打开特定链接。

谢谢！

乔瓦尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:23:17.783

将您的链接放在您的数据上并将其加载到 drop 事件中，如下所示：

```
<!DOCTYPE HTML>
<html>
    <head>
        <style type="text/css">
            #div1, #div2
            {float:left; width:100px; height:35px; margin:10px;padding:10px;border:1px solid #aaaaaa;}
        </style>
    <script>
        function allowDrop(ev)
        {
            ev.preventDefault();
        }

        function drag(ev)
        {
            ev.dataTransfer.setData("Url","http://www.google.fr");
        }

        function drop(ev)
        {
            ev.preventDefault();
            window.location=ev.dataTransfer.getData("Url");
        }
    </script>
    </head>
    <body>
        <div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)">
         <img src="img_w3slogo.gif" draggable="true" ondragstart="drag(event)" id="drag1" width="88" height="31"></div>
        <div id="div2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-18T11:31:50.200

将 event.preventDefault() 放入拖放函数或所有拖放函数中

```
function drop(e)
{
    e.preventDefault();
    // Code...
} 
```

# c# - 将 Web 用户控件编译为 DLL

> ID：14499982
> 
> 赞同：0
> 
> 时间：2013-01-24T11:14:22.337
> 
> 标签：c#, visual-studio-2008, sharepoint, web-parts, webusercontrol

我`Web User Control`在 Visual Studio 2008 中创建了一个。我想将其编译`Web User Control`为 DLL，以便最终可以在 SharePoint Web 部件中使用它。

但我不知道如何`Web User Control`在 SharePoint 中编译或使用我的。

有人知道这是如何工作的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:38:34.543

读[这个](http://fuchangmiao.blogspot.in/2008/07/use-user-control-in-web-parts.html)...

在你的 manifest.xml 中包含这个..

```
<TemplateFile Location="ControlTemplates\"Your Web User Control Name".ascx" /> 
```

然后在你的 ascx 文件中包含这个...

```
RootFiles\TEMPLATE\ControlTemplates\"Your Web User Control Name".ascx 
```

然后从您的 .cs 文件中调用

```
_value = Page.LoadControl("~/_controltemplates/"Your Web User Control Name".ascx"); 
```

**编辑**

试试这个...

转到开始 > 所有程序 > Visual Studio 2008 > Visual Studio 工具 > 单击 Visual Studio 2008 命令提示符。键入以下命令并按回车键。

devenv.exe /resetskippkgs

# windows - Windows 批处理脚本：ftp 命令：等待用户登录

> ID：14499987
> 
> 赞同：0
> 
> 时间：2013-01-24T11:14:28.160
> 
> 标签：windows, shell, ftp, command

我想制作 Windows .cmd 脚本文件。它的命令之一使用了 ftp 命令。当我执行批处理脚本时，命令提示符不会等待用户输入他的用户/密码，因此下一个命令没有正确执行。我怎样才能让它暂停？

谢谢。

**编辑：**

我的问题更多地与命令（`-i`选项）的交互使用有关，而不是自动登录（`-n`选项）。我想等待用户输入他们的凭据。

另外，我通过输入命令看到了这一点：

```
ftp -n -i -s:myFtpCommands.txt 192.168.0.20 
```

其中`myFtpCommands.txt`包含：

```
use myUser
mget *
bye 
```

无需输入密码即可获取文件。相关的安全问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:02:28.557

您可以事先询问用户的详细信息，然后根据他们的输入构建命令文件。

```
@echo off
set /p un=Enter your FTP username:
set /p pw=Enter your FTP password:
echo open 192.168.0.20 >ftpscript.txt
echo %un% >>ftpscript.txt
echo %pw% >>ftpscript.txt
mget * >>ftpscript.txt
bye >>ftpscript.txt
ftp -i -s:ftpscript.txt 
```

关于自动登录，这是 FTP 的一个功能，它是匿名登录，设置在 FTP 服务器上以允许这种访问。

设置 FTP 服务器的人将能够控制允许用于访问服务器的帐户，以及他们不希望每个人都可以访问的文件的权限。

# c# - 从 SizeChanged 事件控制荒谬的大小

> ID：14499994
> 
> 赞同：0
> 
> 时间：2013-01-24T11:14:33.840
> 
> 标签：c#, silverlight

我有我的视频播放器。只要它加载它就会被隐藏（应用于对象的 1 对 1 像素大小）。完成加载后，它会触发 JavaScript 函数并调整为所需大小（即 640 x 480 像素）。实际上`SizeChanged`，事件被触发。在该事件处理程序中，媒体元素被调整大小以保持适当的纵横比。

问题是我不时得到荒谬的大小，例如：`ActualWidth == 448900, ActualHeight == 286090`。

有人遇到过至少与此类似的麻烦吗？我无法在我的测试环境中重现它，所以我不知道它是如何、何时以及为什么发生的。任何建议都可能会有所帮助。

SizeChanged 处理程序：

```
private void Player_SizeChanged(object sender, SizeChangedEventArgs e)
{
    Size pSize = e.NewSize;
    if (_controlPanel.Visibility == System.Windows.Visibility.Visible)
        pSize = new Size(e.NewSize.Width, e.NewSize.Height - _controlPanel.PanelRoot.Height);

    _videoPanel.OnParentSizeChanged(pSize);
} 
```

VideoPanel.OnParentSizeChanged：

```
public void OnParentSizeChanged(Size newSize)
{
    //nothing to do here
    if (_lastLayoutSize != null &&
        _lastLayoutSize.Width == newSize.Width &&
        _lastLayoutSize.Height == newSize.Height)
        return;

    _lastLayoutSize = new Size(newSize.Width, newSize.Height);
    ApplyAspectRatio();
} 
```

VideoPanel.ApplyAspectRatio：

```
public void ApplyAspectRatio()
{
    //security checks
    if (_lastLayoutSize == null)
        return;

    if (_mediaSource == null)
    {
        if (_imgThumbnail != null)
        {
            this.Width = _lastLayoutSize.Width;
            this.Height = _lastLayoutSize.Height;
        }

        return;
    }

    if (_mediaSource.Width == 0 || _mediaSource.Height == 0)
        return;

    double dScale = 1.0;
    double dSourceHeight = 1.0;
    double dSourceWidth = 1.0;

    lock (_msSync)
    {
        dSourceWidth = _mediaSource.Width;
        dSourceHeight = _mediaSource.Height;

        double dHeightRatio = 1.0;
        double dWidthRatio = 1.0;

        dHeightRatio = _lastLayoutSize.Height / dSourceHeight;
        dWidthRatio = _lastLayoutSize.Width / dSourceWidth;

        dScale = System.Math.Min(dHeightRatio, dWidthRatio);
    }

    double nWidth = dSourceWidth * dScale;
    double nHeight = dSourceHeight * dScale;

    Width = MaxWidth = MinWidth = nWidth;
    Height = MaxHeight = MinHeight = nHeight;

    this.InvalidateArrange();
} 
```

我删除了用于记录的代码。它只是将一些文本写入隔离存储。这些荒谬的值出现在调用链 Player_SizeChanged 方法的顶部。

# android - 标记，如何在气球中插入图像

> ID：14499996
> 
> 赞同：0
> 
> 时间：2013-01-24T11:14:40.557
> 
> 标签：android, google-maps-android-api-2

在 api v1 中，当我想在地图中添加标记时，我使用了叠加层，我使用了[mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)类，我可以在气球中添加任何图像。现在在 v2 中，我使用标记，但我不知道如何在气球中插入图像。我在[文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/package-summary)中搜索，但没有找到任何东西。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:49:17.847

如果“气球”是指点击标记时出现的[信息窗口](https://developers.google.com/maps/documentation/android/marker#info_windows)，则需要实现 an`InfoWindowAdapter`以返回该“气球”的内容并将其附加到您的`GoogleMap`via `setInfoWindowAdapter()`。您`InfoWindowAdapter`可以`getWindowContents()`以包含您的图像的方式实现。[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/Popups)演示了这种技术。

# java - 如何擦图像？

> ID：14499998
> 
> 赞同：2
> 
> 时间：2013-01-24T11:14:51.047
> 
> 标签：java, android, android-intent

我想擦图像。实际上，当我擦前景图像时，我有两个图像，一个在前景，另一个在背景帮我解决这个问题。我试过这个：

```
public class MainActivity extends Activity {

ImageView img;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.activity_main);
    // img = (ImageView) findViewById(R.id.img);
    //
    // new Panel(this);
    setContentView(new Panel(this));

}

class Panel extends View {

    private Bitmap mBitmap;
    private Canvas mCanvas;
    private Path mPath;
    private Paint mPaint;
    Bitmap bitmap;
    Canvas pcanvas;
    int x = 0;
    int y = 0;
    int r = 0;

    public Panel(Context context) {
        super(context);

        Log.v("Panel", ">>>>>>");

        setFocusable(true);
        setBackgroundColor(Color.MAGENTA);

        // setting paint
        mPaint = new Paint();
        mPaint.setAlpha(1);
        mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
        mPaint.setAntiAlias(true);

        // getting image from resources
        Resources r = this.getContext().getResources();

        Bitmap bm = BitmapFactory.decodeResource(getResources(),
                R.drawable.verse);

        // converting image bitmap into mutable bitmap

        // bitmap = Bitmap.createBitmap(295, 260, Config.ARGB_8888);
        bitmap = Bitmap.createBitmap(185, 120, Config.ARGB_8888);
        pcanvas = new Canvas();
        pcanvas.setBitmap(bitmap); // drawXY will result on that Bitmap
        pcanvas.drawBitmap(bm, 0, 0, null);

    }

    @Override
    protected void onDraw(Canvas canvas) {

        // draw a circle that is erasing bitmap
        // pcanvas.drawCircle(x, y, r, mPaint);
        pcanvas.drawColor(color.transparent);
        canvas.drawBitmap(bitmap, 0, 0, null);

        super.onDraw(canvas);

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        // set paramete to draw circle on touch event
        x = (int) event.getX();
        y = (int) event.getY();

        r = 20;
        // Atlast invalidate canvas
        invalidate();
        return true;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:45:27.027

您可能想尝试使用[Xfermodes](http://developer.android.com/reference/android/graphics/AvoidXfermode.html) / [Porterduff](http://softwyer.wordpress.com/2012/01/21/1009/)，可能此线程可能会帮助您：[Android bitmap mask color, remove color](https://stackoverflow.com/questions/6432965/android-bitmap-mask-color-remove-color/6488289#6488289)

硬设置你可以使用的颜色

```
int[] pix=new int[bitmap.getWidth()*bitmap.getHeight()];
bitmap.getPixels(pix, 0, 0, bitmap.getWidth(), bitmap.getHeight);

// do some processing here
// possible set color of some pixels to Color.TRANSPARENT

bitmap.setPixels(pix, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight()); 
```