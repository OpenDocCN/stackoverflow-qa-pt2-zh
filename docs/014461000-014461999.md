# StackOverflow 问答 14461000-14461999

# excel - 找到（多个输入）左侧的所有内容

> ID：14461001
> 
> 赞同：4
> 
> 时间：2013-01-22T14:35:33.050
> 
> 标签：excel

**我的文件**

包含笔记本电脑和库存表的工作簿 1，库存将从仅采用笔记本电脑名称的笔记本电脑中获取数据。

**客观的**

从笔记本电脑表中提取产品名称（10,000 个条目），例如 Compaq CQ58-250SA

**计划**

我们只需要产品名称，因此找到某些关键字（计算机规格）并将所有内容放在左侧（产品名称）

**要定位的关键字**

*   赛扬
*   奔腾
*   B815
*   E1-1200
*   B820

**电子表格数据**

*   单元格 A1 = Compaq CQ58-250SA Celeron B830，Windows

*   单元 A2 = HP 650 Pentium B980、15.6 HD AG LED SVA、

*   单元格 A3 = 华硕 X401A-WX321H、B815、Windows 8

*   单元格 A4 = Compaq CQ58-256SA E1-1200，Windows 8 64

*   单元 A5 = 华硕、X401A-WX089V、B820、Windows 7

**到目前为止我做了什么：**

=LEFT（笔记本电脑！A1，FIND（“赛扬”，笔记本电脑！A1）-1）

**我需要做什么**

=左（笔记本电脑！A1，查找（“赛扬”＆“奔腾”＆“B815，笔记本电脑！A1）-1）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:03:50.417

如果你的水果清单在`D1:D3`你可以使用这个：

```
=LEFT(A1,FIND(INDEX(D1:D3,MATCH(1,COUNTIF(A1,"*"&D1:D3&"*"),0)),A1)-1) 
```

需要按`CTRL`++将其作为数组公式`SHIFT`输入`ENTER`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T15:58:52.103

根据更新的问题，您可以使用此公式，假设每个单元格只有一个关键字，并且 D1:D5 中的关键字列表

`=LEFT(Laptops!A1,LOOKUP(2^15,FIND(D$1:D$5,Laptops!A1))-1)`

否则，如果每个单元格可能有多个关键字......

您使用的是哪个版本的 Excel？在**Excel 2010 中**，您可以像这样使用**AGGREGATE**函数

`=LEFT(A1,AGGREGATE(15,6,FIND(D$1:D$3,A1),1)-1)`

其中 D1:D3 是您的“水果清单” - 根据需要扩展

[AGGREGATE 函数中的 15 表示“SMALL”函数，6 忽略错误，因此您从 FIND(D$1:D$3,A1) 中获得最小值，同时忽略错误 - 从而为您提供单元格中第一个水果的位置]

这可以作为常规公式输入并复制下来，如果没有找到任何水果它会给出错误但您可以使用 IFERROR 函数对其进行修改以返回文本值或 A1 的全部内容

注意：**FIND**是“区分大小写的” -如果您不想要，请改用**SEARCH**

在**Excel 2007**或更高版本中，您可以使用**IFERROR**，因此这个“数组输入”版本

`=LEFT(A1,MIN(IFERROR(FIND(D$1:D$3,A1),""))-1)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T14:58:11.893

您可以使用`SUBSTITUTE`将 Pear 和 Orange 的任何实例替换为 Apple，然后使用它（应该全部放在一行上，但为了便于阅读而分解）：

```
=LEFT(A1,FIND("Apple",SUBSTITUTE(SUBSTITUTE(A1,"Pear","Apple"),"Orange","Apple"))
    -1) 
```

现在，如果没有 Pear、Apple 或 Orange 的实例，你会得到`#Value`，所以让我们也通过使用`ISERROR`检查无效值来处理它：

```
=IF(ISERROR(LEFT(A1, FIND("Apple",SUBSTITUTE(SUBSTITUTE(A1, "Pear", "Apple"),
    "Orange", "Apple"))-1)),A1,LEFT(A1, FIND("Apple", SUBSTITUTE(SUBSTITUTE(A1, 
    "Pear", "Apple"),"Orange", "Apple"))-1)) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-22T15:56:34.643

我的版本有点短。还需要作为数组公式输入：

```
=MAX(1-ISERR(SEARCH(D1:D3,A1))) 
```

如果找到则返回 1，如果未找到则返回 0。从那里开始工作。

# objective-c - 无法显示点之间的路线 Google Directions API。iOS 6

> ID：14461008
> 
> 赞同：1
> 
> 时间：2013-01-22T14:35:54.810
> 
> 标签：objective-c, ios6, google-api, mkmapview, directions

如果路线有航点，我在 MapView 中显示路线时遇到问题。我使用 DIRECTIONS GOOGLE API：

[https://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)

路线不是使用道路绘制的。

有什么帮助吗？谢谢！！

**麻烦图片：** ![在此处输入图像描述](../Images/40184c9a6624446b572167899fc7c412.png)

![在此处输入图像描述](../Images/16179d737f83e4c418184e29df7504de.png)

**编码：**

```
reponse = [self getRouteFromGoogleApiWithPoints:arrayOfCoords andMode:@"driving" error:error];

if(reponse == nil)
{
   UIAlertView *succes= [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"txtError", nil) message:NSLocalizedString(@"ServerError", nil) delegate: self cancelButtonTitle: @"OK" otherButtonTitles: nil];
        [succes show];
}
else
{
        NSArray *routes = [reponse objectForKey:@"routes"];
        NSDictionary *route = [routes objectAtIndex:0];
        NSDictionary *polylineOverview = [route objectForKey:@"overview_polyline"];

        NSString *polylinePoints = [polylineOverview objectForKey:@"points"];
        NSArray *decodedPolyline = [self decodePolyLine:polylinePoints];

        CLLocationCoordinate2D coords[[decodedPolyline count]];
        int i=0;
        for(CLLocation* loc in decodedPolyline)
        {
            CLLocationCoordinate2D c;
            c.latitude = loc.coordinate.latitude;
            c.longitude = loc.coordinate.longitude;

            coords[i]=c;
            i++;

        }

        MKPolyline *line = [MKPolyline polylineWithCoordinates:(CLLocationCoordinate2D*)coords count:decodedPolyline.count];

        [mapview addOverlay:line];
        [mapview setNeedsDisplay];
    }
}
}

+ (NSMutableArray *)decodePolyLine: (NSString *)encoded {

NSInteger len = [encoded length];
NSInteger index = 0;
NSMutableArray *array = [[NSMutableArray alloc] init];
NSInteger lat=0;
NSInteger lng=0;
while (index < len) {
    NSInteger b;
    NSInteger shift = 0;
    NSInteger result = 0;
    do {
        b = [encoded characterAtIndex:index++] - 63;
        result |= (b & 0x1f) << shift;
        shift += 5;
    } while (b >= 0x20);
    NSInteger dlat = ((result & 1) ? ~(result >> 1) : (result >> 1));
    lat += dlat;
    shift = 0;
    result = 0;
    do {
        b = [encoded characterAtIndex:index++] - 63;
        result |= (b & 0x1f) << shift;
        shift += 5;
    } while (b >= 0x20);
    NSInteger dlng = ((result & 1) ? ~(result >> 1) : (result >> 1));
    lng += dlng;
    NSNumber *latitude = [[NSNumber alloc] initWithFloat:lat * 1e-5];
    NSNumber *longitude = [[NSNumber alloc] initWithFloat:lng * 1e-5];
    CLLocation *loc = [[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]];
    [array addObject:loc];
}

return array;
}

+(NSDictionary*)getRouteFromGoogleApiWithPoints:(NSArray*)arrayOfPoints andMode:(NSString*)mode error:(NSError **)error
{
NSDictionary *result = nil;

NSString *waypoints = @"";

CLLocation* origin = [arrayOfPoints objectAtIndex:0];
CLLocation* destination = [arrayOfPoints objectAtIndex:arrayOfPoints.count - 1];

// Create the waypoints
for(int i = 1; i < arrayOfPoints.count - 2; i++)
{
    CLLocation* current = [arrayOfPoints objectAtIndex:i];
    waypoints = [waypoints stringByAppendingString:[NSString stringWithFormat:@"%f,%f%%7C",current.coordinate.latitude,current.coordinate.longitude]];
}

CLLocation* lastWaypoint = [arrayOfPoints objectAtIndex:arrayOfPoints.count - 2];
waypoints = [waypoints stringByAppendingString:[NSString stringWithFormat:@"%f,%f",lastWaypoint.coordinate.latitude,lastWaypoint.coordinate.longitude]];

NSString *urlString =[NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/directions/json?origin=%f,%f&destination=%f,%f&waypoints=%@&sensor=true&mode=%@",origin.coordinate.latitude,origin.coordinate.longitude,destination.coordinate.latitude,destination.coordinate.longitude,waypoints,mode];

NSDictionary* response = [self getDictionaryFromURLString:urlString withParameters:nil error:error];

if (response != nil)
{
    if ([[response objectForKey:@"status"] isEqualToString:@"OK"])
    {
        result = response;
        NSLog(@"%@",response);

    }
    else
    {
        if (error)
        {
            NSMutableDictionary* details = [NSMutableDictionary dictionary];
            [details setValue:[response objectForKey:@"status"] forKey:NSLocalizedDescriptionKey];
            *error = [[NSError alloc] initWithDomain:@"AppName" code:2 userInfo:details];
        }
    }
}
else
{
    if(error)
    {
        NSMutableDictionary* details = [NSMutableDictionary dictionary];
        [details setValue:NSLocalizedString(@"ErrorServidor", nil) forKey:NSLocalizedDescriptionKey];
        *error = [NSError errorWithDomain:@"AppName" code:1 userInfo:details];
        return nil;
    }
}

return result;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T19:40:27.140

首先，根据 Google 条款和条件，您不得在其他人的地图上使用他们的路线/数据。

其次，第一个是部分强加的，因为人们拥有不同的数据，将道路放置在不同的地点，将道路分成不同的路段等，因此指令不排队。

如果您想在地图中显示方向，则必须找到另一个来源。也许你应该考虑 CloudMade API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T07:12:59.973

现在您可以使用[Google Maps SDK for iOS 了](https://developers.google.com/maps/documentation/ios/)。如果您需要在 iOS6 下显示 Google Directions API，这是唯一合法的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T18:38:05.837

您可以使用 Mapkit 方向请求 API。

方向请求 api 对连续调用有一些限制，否则它的工作方式类似于 google 方向 api。

有多种方法可以获取驾驶、步行和过境的方向。还有一种方法可以获得备用路线。

MKDirectionsRequest *request = [[MKDirectionsRequest alloc] init];

```
MKPlacemark *sourcePlacemark = [[MKPlacemark alloc] initWithCoordinate:SourceCLLocationCorodinate).coordinate addressDictionary:nil];
MKMapItem *sourceMapItem = [[MKMapItem alloc] initWithPlacemark:sourcePlacemark];
[request setSource:sourceMapItem];

MKPlacemark *destPlacemark = [[MKPlacemark alloc] initWithCoordinate:destCLLocationCoordinate addressDictionary:nil];
MKMapItem *destMapItem = [[MKMapItem alloc] initWithPlacemark:destPlacemark];
[request setDestination:destMapItem];
[request setTransportType:MKDirectionsTransportTypeAny];
request.requestsAlternateRoutes = NO;

MKDirections *directions = [[MKDirections alloc] initWithRequest:request];

if(![directions isCalculating])
{
    [directions calculateDirectionsWithCompletionHandler:
    ^(MKDirectionsResponse *response, NSError *error) {
     if (error)
     {
         // Handle Error
         NSLog(@"Error for this particular call");
     }
     else
     {
         for (MKRoute * route in response.routes)
         {
             //Add the route.polyline to the mapkit overlay
         }
     }];
} 
```

# python - python中浮点数之间的异或

> ID：14461011
> 
> 赞同：1
> 
> 时间：2013-01-22T14:36:08.807
> 
> 标签：python, xor

我正在实现从 RGB 到 Yxy 颜色的转换，伪代码指导我对两个浮点变量执行 XOR (^) 操作。我怎么能在python中做到这一点？我收到此错误：

^ 不支持的操作数类型：“float”和“float”

看看这个伪代码：[http](http://www.easyrgb.com/index.php?X=MATH&H=02#text2) ://www.easyrgb.com/index.php?X=MATH&H=02#text2 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:28:01.067

没有对浮点数异或的内置支持。相反，您必须使用该`struct`模块实现一个

```
>>> from struct import pack, unpack
>>> def xor_float(f1, f2):
    f1 = int(''.join(hex(ord(e))[2:] for e in struct.pack('d',f1)),16)
    f2 = int(''.join(hex(ord(e))[2:] for e in struct.pack('d',f2)),16)
    xor = f1 ^ f2
    xor = "{:016x}".format(xor)
    xor = ''.join(chr(int(xor[i:i+2],16)) for i in range(0,len(xor),2))
    return struct.unpack('d',xor)[0]

>>> xor_float(10.25,10.25)
0.0
>>> xor_float(10.25,0.00)
10.25 
```

**注意**此示例假设浮点数是 64 位浮点数，Python 原生支持

* * *

在开始解决这个问题之前，我应该看到你的伪代码。伪代码中的插入符号`^`是幂而不是 xor，并且在 python 中，将数字提高到幂（包括浮点数）是通过`**`或`math.pow`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:39:07.103

您只能将按位运算符应用于整数。所以首先将浮点数转换为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-20T23:00:49.063

```
import struct, math

def fxor(a, b):
  rtrn = []
  a = struct.pack('d', a)
  b = struct.pack('d', b)
  for ba, bb in zip(a, b):
    rtrn.append(ba ^ bb)

  return struct.unpack('d', bytes(rtrn))[0]

print(fxor(math.pi, math.pi)) #0.0
print(fxor(math.e, math.pi))  #1.7551491316820714e-308
print(fxor(math.pi, 0))       #3.141592653589793 
```

`64-bit float` `xor`. `xor`这将对构成浮点的每个位执行操作并将其作为`double`和/或返回`64-bit float`

# php - Codeigniter 查询不返回结果值

> ID：14461016
> 
> 赞同：0
> 
> 时间：2013-01-22T14:36:15.523
> 
> 标签：php, codeigniter

我得到了以下片段来从数据库中获取一些用户权限：

```
 $tmp   = "SELECT REPLACE(group_concat(CAST(".$role." AS CHAR)),',','') AS rights FROM functionrights ORDER BY id ASC";
    $query = $this->CI->db->query($tmp);
    if($query->num_rows()>0){
        $row = $query->row(); 
        return $row->rights; 
```

这不返回任何内容。如果我直接执行语句，一切都好吗？！这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:40:32.597

更改`$this->CI->db->query`为`$this->db->query`

`->CI`没有必要。此外，您没有`}`标签（但这可能只是复制/粘贴的东西）。

除此之外：`->row()`返回一个结果，同时`->result()`返回所有结果。

# javascript - 在javascript中将数字四舍五入到小数点后一位

> ID：14461017
> 
> 赞同：4
> 
> 时间：2013-01-22T14:36:15.107
> 
> 标签：javascript, math, google-maps-api-3

> **可能重复：**
> [如何在 Javascript 中舍入到小数点后 1 位？](https://stackoverflow.com/questions/7342957/how-do-you-round-to-1-decimal-place-in-javascript)

以下代码显示在特定路线上覆盖的总距离，显示在谷歌地图上。我设法将数字从公里转换为英里。这是该函数的代码：

```
function computeTotalDistance(result) {
        var total = 0;
        var myroute = result.routes[0];
        for (i = 0; i < myroute.legs.length; i++) {
          total += myroute.legs[i].distance.value;
        }
        total = total *0.621371/ 1000.
        document.getElementById('total').innerHTML = total + ' mi'; 
```

总数显示为`41.76483039399999 mi`。如何将四舍五入`total`到小数点后一位？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T14:37:26.787

使用[`toFixed`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)：

```
var total = 41.76483039399999;
total = total.toFixed(1) // 41.8 
```

这是小提琴：http: [//jsfiddle.net/VsLp6/](http://jsfiddle.net/VsLp6/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-22T14:38:03.560

```
Math.round(total * 10) / 10 
```

这会产生一个数字。toFixed() 给出一个字符串，详见其他答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:38:47.350

您正在寻找[`Number.prototype.toFixed`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)；`41.76483039399999.toFixed(1) === "41.8";`

```
function computeTotalDistance(result) {
    var total = 0, myroute = result.routes[0];
    for (i = 0; i < myroute.legs.length; i++) {
        total += myroute.legs[i].distance.value;
    }
    total = (total * 0.621371 / 1000).toFixed(1);
    document.getElementById('total').innerHTML = total + ' mi';
} 
```

有很多其他方法可以实现这一点，例如，不使用任何方法`Math`或实例`Number`

```
(~~(10 * total) + (~~(100 * total) % 10 >= 5))/10 + '' // "41.8"
// (      417   +     (6 >= 5)               )/10 = 41.8 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T14:40:58.057

有一个功能可以做你想做的事：

var 总计 = 41.76483039399999；打印（x.toFixed（2））；

它将打印 41.76

# xcode - Xcode 4：如何添加自定义 GCC 编译器参数？

> ID：14461018
> 
> 赞同：1
> 
> 时间：2013-01-22T14:36:18.197
> 
> 标签：xcode

我正在构建一个 C++ 项目，如何添加 Xcode 没有的自定义编译器参数？像 -fwide-exec-charset=UCS-2LE。我在互联网上搜索但只找到了 xcode 3.x 的解决方案。我使用的是 Xcode 4.5.2，UI 太不一样了。

PS。它不是调试程序时使用的命令行参数，而是编译源代码时使用的 g++ 编译器参数。

# android - 混淆 Android 项目时的未知类 ILicensingService 注释

> ID：14461024
> 
> 赞同：15
> 
> 时间：2013-01-22T14:36:50.623
> 
> 标签：android, ant, proguard, android-lvl

我正在尝试使用 Ant 和 ProGuard 构建 Android 版本。我在 project.properties 中取消了以下行的注释，尽管所述文件中的注释指出您不应该修改它；）：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

混淆时，我得到以下注释：

```
[proguard] Note: the configuration refers to the unknown class 'com.google.vending.licensing.ILicensingService'
[proguard] Note: the configuration refers to the unknown class 'com.android.vending.licensing.ILicensingService' 
```

我明白为什么会这样。这些行可以在默认的 ProGuard 配置文件 (${sdk.dir}/tools/proguard/proguard-android.txt) 中找到：

```
-keep public class com.google.vending.licensing.ILicensingService
-keep public class com.android.vending.licensing.ILicensingService 
```

我没有使用 Google Licensing Service，所以这些类确实是未知的。我通过更新 proguard-project.txt 找到了摆脱这些注释的解决方案：

```
-dontnote **ILicensingService 
```

我的问题：这是处理这个问题的正确方法吗？在我看来，无论如何都不应该默认保留这些类，因为该库对于 android 项目不是强制性的。我能想到的唯一方法是将默认配置文件复制到我的项目中，删除 -keep 行并完全忽略 SDK 中的默认配置文件。这似乎也不是正确的方法。还是我错过了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T16:39:08.960

设置“-dontnote com.google.vending.licensing.ILicensingService”很好。事实上，它可能是默认配置文件的一部分。

1.  使用该库的项目可能需要 -keep 选项。
2.  对于不使用该库的项目，-dontnote 选项可能会很好地抑制有关 -keep 选项的注释。该注释只是一个温和的提醒，配置文件可能包含拼写错误，因为指定的类似乎不存在。不影响处理。

# php - 使用 Preg_Replace 删除文本

> ID：14461028
> 
> 赞同：0
> 
> 时间：2013-01-22T14:36:58.620
> 
> 标签：php, preg-replace

我有一些类似以下示例的文本：

```
Some Text Here
[code]Some link[/code]
Text
[code]Link[/code]
Other Text
[code]Another Link[/code]
Other Text1 
```

我想删除上面、下面和两个代码之间的所有文本。这是我想要的输出示例：

```
[code]Some Link[/code]
[code]Link[/code]
[code]Another Link[/code] 
```

我用`preg_replace`这种方式删除第一个代码上方的文本：

```
$message = preg_replace('/(.*?)\[code/si','[code',$message, 1); 
```

你能帮我删除其他文本`preg_replace`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:51:44.990

你可以这样做：

```
 preg_match_all('/(\[code\].*\[\/code\])/Usmi', $text, $res);
        $cnt = 0;
        foreach ($res as $val) {
          $cnt++;
          $message .= $val[$cnt] . "<br />";          
        }
     echo $message; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:00:16.997

只是为了让@Andreev 的解决方案更简单一点：

```
$text = "
Some Text Here
[code]Some link[/code]
Text
[code]Link[/code]
Other Text
[code]Another Link[/code]
Other Text1
";

$keywords = preg_match_all('/(\[code\].*\[\/code\])/Usmi', $text, $res);
print(implode($res[0])); 
```

你可以在这里测试它：http: [//phptester.net/index.php ?lang=en](http://phptester.net/index.php?lang=en)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:40:35.963

假设你永远不能拥有`[code] abc [code] def [/code] ghi [/code]`，试试这个：

```
do {
    $message = preg_replace("((?:\[code\].*?\[/code\])*).*?(?=\[code\]))is","$1",$message,-1,$c);
} while($c); 
```

# php - 使用 laravel 进行 REST api 身份验证

> ID：14461029
> 
> 赞同：8
> 
> 时间：2013-01-22T14:37:00.880
> 
> 标签：php, rest, authentication, laravel

我正在使用 RESTful 控制器属性构建一个带有 laravel 的 RESTful api。到目前为止，我已经能够让它大部分工作。现在遇到的问题是身份验证，我正在尝试使用“user_id”和“签名”来使用亚马逊方法。我正在使用 php 的“hash_hmac()”创建签名。

这是一个示例 api 控制器

```
class Api_Tasks_Controller extends Api_Controller {

    public $restful = true;

    public function get_index($id = null) {

        $this->verfiy_request();

        if(!is_null($id))
        {
            return Response::json(array("tasks"=>"just one"),200);
        }
        else
        {
            return Response::json(array("tasks"=>"everthing"),200);
        }
    }

} 
```

这是 api 控制器类

```
class Api_Controller extends Controller {

    public function verify_request() {

        //user id
        $user_id = (int) Input::get('user_id');
        //signature
        $sig = Input::get('sig');

        //Lookup user
        $user = Sentry::user($user_id);
        if($user) {
            //user email
            $email = $user->email;
            //user api key
            $api_key = $user->metadata['api_key'];
            //recreate signature
            $_sig = hash_hmac("sha256",$email.$user_id,$api_key);
            if($_sig === $sig) {
                return Response::json(array("message"=>"Request Ok"),200);
            }
            else {
                return Response::json(array("message"=>"Request Bad"),400);
            }
        }
        else {

            return Response::json(array("message"=>"Request not authorized"),401);
        }
    } 
```

`http://api.xyz.com/v1/tasks/1?user_id=1&sig=41295da38eadfa56189b041a022c6ae0fdcbcd5e65c83f0e9aa0e6fbae666cd8`即使我更改了 user_id 参数的值，发出 get 请求总是返回成功消息，这应该使签名无效并使请求无效。看来我的`verfiy_request`方法没有执行。请帮帮我

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T21:10:18.970

我最近也在研究这个，也建议使用过滤器。它可以像这样工作：

```
class Api_Tasks_Controller extends Base_Controller {

    public $restful = true;

    function __construct() {
        // Check if user is authorized
        $this->filter('before', 'api_checkauth');
    }

    // rest of the class ....

} 
```

在您的 routes.php 文件中：

```
Route::filter('api_checkauth', function()
{
  //user id
  $user_id = (int) Input::get('user_id');

  //signature
  $sig = Input::get('sig');

  try {
    //Lookup user
    $user = Sentry::user($user_id);

    if($user) {
      //user email
      $email = $user->email;
      //user api key
      $api_key = $user->metadata['api_key'];
      //recreate signature
      $_sig = hash_hmac("sha256",$email.$user_id,$api_key);
      if($_sig === $sig) {
          return Response::json(array("message"=>"Request Ok"),200);
      }
      else {
          return Response::json(array("message"=>"Request Bad"),400);
      }
    }
    else {
      return Response::json(array("message"=>"Request not authorized"),401);
    }
  }
  catch (Sentry\SentryException $e) {
    $errors = $e->getMessage(); // catch errors such as user not existing or bad fields
    return Response::json(array("message"=>$errors),404);
  }

}); 
```

另外，感谢您将我介绍给 Sentry :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T14:46:42.127

这是一个快速的猜测，我没有尝试，但也许您可能想在调用 verify_request 之前尝试添加一个 return 语句。

你应该看看[过滤器](http://laravel.com/docs/routing#filters)，它可以让你更多地分离你的 api 逻辑和 api 身份验证;-)

# wordpress - 如何将 WordPress 切换到移动主题（带有指向完整站点的链接）

> ID：14461036
> 
> 赞同：3
> 
> 时间：2013-01-22T14:37:27.773
> 
> 标签：wordpress, mobile

我正在 WordPress 中构建一个具有单独移动主题的网站（这显然使用与主站点相同的数据库）。移动主题是主主题的子主题，以最大限度地重用代码。

我下载了一个运行良好的移动检测脚本，但我不知道如何仅为当前用户切换到移动主题，并可以选择链接到完整的网站。

我不想为此创建一个多站点 - 这似乎是一种矫枉过正（并且存在重复内容问题）。

我尝试了两种方法：

*   主题开关：重定向到`http://example.com/?theme=mobile_theme`- 不工作
*   我在网上某处找到的一个奇怪的解决方案：

    ```
    add_filter( 'template', 'wpse_49223_change_theme' );   
    add_filter( 'option_template', 'wpse_49223_change_theme' );  
    add_filter( 'option_stylesheet', 'wpse_49223_change_theme' );

    function wpse_49223_change_theme($theme) 
    {
        include 'script/Mobile_Detect.php';
        $detect = new Mobile_Detect();
        if ( $detect->isMobile() )
            $theme = 'pinnacle_mobile';
        return $theme;
    } 
    ```

这也不起作用。

有没有人对此有有效的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:41:54.807

不确定是否适用于您的网站。但一种常见的解决方案是媒体查询。

[http://cssmediaqueries.com/](http://cssmediaqueries.com/)

基本上它的***如果“移动设备”显示这个 css 否则显示“普通 css”***

另一个想法是 在移动用户连接时**重定向到 * *mobile.yourdomain.com* * 。**并在该域上拥有您的移动 wordpress 主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:33:22.567

解决方案确实是使用 Theme Switch 插件。

这里有两点很重要：

*   将“谁可以切换主题”设置为“所有人”
*   重定向到[http://website.com/?theme=Mobile+Theme](http://website.com/?theme=Mobile+Theme)

请注意，主题参数必须是**实际的主题名称**，而不是目录名称。它**区分大小写**并使用**`+`**而不是空格。

# arrays - 检查由块组成的二维形状是否已被切割

> ID：14461037
> 
> 赞同：0
> 
> 时间：2013-01-22T14:37:33.670
> 
> 标签：arrays, 2d, shape, divide

我知道这个话题的标题可能会让人迷惑，但我不知道如何用一句话来解释它！我会尝试更清楚一点，我有一个 2d 布尔值数组，每个值都说明该特定位置（或块）是否存在。

让我们举个例子：

1 1 1 1
1 1 1 1 1 1
1 1 1
1 1 1

该数组包含 16 个“活动”块，现在我可以“杀死”一些块，将它们的状态从 1 更改为 0。我想做的是知道在“杀死”之后，该组是否分成两个或多个单独的组，例如：

1 1 0 1
1 1 0 1
0 1 0 1
1 1 1 1

这个形状仍然是“完整的”，因为 0 的组没有切割任何 1 组，但在这种情况下：

1 1 0 1
1 1 0 1
0 0 0 1
1 1 1 1

现在我已经杀死了唯一将所有 1 放在一起的部分，形状已分成两个较小的组！我试过检查最后一个被杀死的位的邻居，但我不能确定其他可能的形状连接。我也尝试过寻路算法，但是这个操作应该非常快，而且寻路太复杂了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:44:36.790

选择任何一个活块并进行洪水填充，然后检查它是否到达所有其他活块。

# ruby-on-rails - 无值的Ruby on Rails模型中的乘法

> ID：14461041
> 
> 赞同：0
> 
> 时间：2013-01-22T14:37:41.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

作为 risk.rb 模型的一部分，我有几个计算值

```
before_save :calculate_risk
def calculate_risk
  self.risk1_total = self.component1 * self.component2 * self.component3
  self.risk2_total = self.component4 * self.component5 * self.component6
  ...
end 
```

我希望能够在不完全填写表格的情况下产生风险，因此这些组件中的每一个都将为零。所以这个方法会产生错误，因为 * 不是 nil 的有效方法。处理这个问题的最佳方法是什么？我考虑过

```
def calculate_risk
  if self.component1.nil? || self.component2.nil? || self.component3.nil?
    self.risk1_total = self.component1 * self.component 2 * self.component3
  elsif ...
end 
```

然而，这显然是低效且重复的。我还考虑过初始化所有这些值，尽管我不知道最有效的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:30:07.633

您可以执行以下操作：

```
before_save :calculate_risk
def calculate_risk
  self.risk1_total = [self.component1,self.component2,self.component3].compact.inject(:*)
  self.risk2_total = [self.component4,self.component5,self.component6].compact.inject(:*)
  ...
end 
```

这是假设您希望从计算中删除 nil 值。这将给出一个结果，`nil`如果所有值都是`nil`。如果您愿意，可以将`nil`s 替换为零。您可能还对`:reject`Ruby Array 和 Enumerable 类中的方法或其他冷却工具感兴趣。

我希望这会有所帮助。

# java - JavaScript 框架和 Java EE

> ID：14461042
> 
> 赞同：3
> 
> 时间：2013-01-22T14:37:43.420
> 
> 标签：java, javascript, jakarta-ee, javascript-framework

我看到很多不错的客户端框架正在出现来构建 Web GUI（最近是[http://yeoman.io/](http://yeoman.io/)）。当服务器端全是 Java EE 时，我们应该如何利用这些框架？他们都没有提供这方面的任何详细信息。如果您分享您如何利用这些框架，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T14:46:18.677

我的团队采用的方法是将前端和后端视为几乎独立的应用程序，通过 REST 进行通信。这种方法使我们能够重用服务器并与最初不在图片中的两个不同客户端连接。

我们在客户端使用 Dojo，在后端使用内部 Java 框架。

我知道我没有按照您的要求提供任何详细信息，但我想我的建议是不要太担心。解耦客户端和服务器以产生更好的解决方案。

# multithreading - Mono 上的 AWS 简单电子邮件服务的并发问题

> ID：14461044
> 
> 赞同：1
> 
> 时间：2013-01-22T14:37:59.227
> 
> 标签：multithreading, mono, amazon-web-services, amazon-ses

我正在将时事通讯服务从运行 Microsoft.NET 4.5 的 Windows 服务器移动到运行 Mono 3.0.3 的 Linux 服务器。该服务使用 Amazon 的“简单电子邮件服务”(SES) 通过[官方的 .NET SDK](http://aws.amazon.com/sdkfornet/)（包装 REST 接口）传递电子邮件。

虽然从 Mono 按顺序通过 SES 发送电子邮件比使用类似硬件的 Microsoft.NET 稍快，但在尝试并行发送多封邮件时，我遇到了严重的性能问题。下面的图表显示了使用不同数量的线程在两个平台上发送 128 封电子邮件所需的时间。如您所见，Mono 上的性能在 8 个线程后迅速下降，而在 128 个线程中，我只收到 HTTP 超时——没有发送一封电子邮件。

![比较 Microsoft.NET 和 Mono 上的多线程 SES 性能的图表](../Images/d68f4e84362c5db259da344eb0ae2c7e.png)

通过控制台输出进行分析，结果表明第一批“邮件”是减速的根源。使用两个线程，每个线程发送一封电子邮件，两个线程在大约 2200 毫秒内完成。有四个线程，每个线程发送一封电子邮件，它们都在大约 4400 毫秒内完成。八个线程，大约 8800 毫秒等。似乎 Web 服务在同时产生时是按顺序运行的，并且需要在返回之前相互等待。

有什么想法可能会触发这种行为吗？Amazon SDK的[源代码](https://github.com/aws/aws-sdk-net)可在 GitHub 上找到，但我无法查明任何可疑之处。也许使用异步方法`HttpWebRequest`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:26:50.407

是的，请暂时停止使用异步 HttpWebRequest*，因为Mono 列表中正在讨论一个[错误。](http://lists.ximian.com/pipermail/mono-devel-list/2013-January/040013.html)已提供补丁，但显然不够好，已从 master 恢复。

如果您擅长低级代码，那么您最好贡献一个补丁。

* 停止使用异步基础设施的最快方法是使用环境变量 MONO_DISABLE_AIO=1 调用 mono。顺便说一句，如果您使用多个线程，也许 Parallel.For 就足够了，但要保持代码非异步？异步的最佳用例实际上是避免线程化并仍然设法实现并行化（或者更确切地说，避免阻塞等待）。

# facebook - 将照片上传到高分辨率的 Facebook 图表

> ID：14461045
> 
> 赞同：2
> 
> 时间：2013-01-22T14:38:00.253
> 
> 标签：facebook, api, facebook-graph-api

facebook 图形 API 允许将照片挂在墙上，好的，但是如何指定我希望这些照片是高质量的

```
$access_token=$_SESSION['access_token'];

$graph_url="https://graph.facebook.com/me/photos?access_token=".$access_token;

$args=array( 'message' => $description, 'url' => $im_url );
$ch=curl_init();
curl_setopt($ch, CURLOPT_URL, $graph_url);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
$data=curl_exec($ch); 
```

我正在使用任何人都可以看到消息的代码表单，并且 url 是发送的参数，就好像这些设置在输入权上一样，是否有可能添加第三个参数来指定我希望照片高质量？

这可能是正确的方法：

```
 $args=array( 'message' => $description, 'quality' => "high", 'url' => $im_url ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T07:54:21.427

尝试上传图片的 PNG 版本。看起来它与 PNG 一起工作得很好，我刚刚测试过它。

# jquery - jQuery函数在另一个函数有效后运行

> ID：14461046
> 
> 赞同：1
> 
> 时间：2013-01-22T14:38:02.293
> 
> 标签：jquery, validation

我想在电子邮件地址有效**后检查电子邮件字段是否已存储在数据库中。**但是，我的两个功能都可以同时正常工作。我希望在“检查电子邮件是否有效”生效后运行“检查电子邮件是否在数据库中”功能。

电子邮件验证：

```
$(document).ready(function(){
$("#SignUp").validate({
    rules:{
        email:{
            required:true,
            email:true
        },
    },
    messages:{
        email:{
            required:"Enter your email address",
            email:"Enter valid email address"
        },
        gender:"Select Gender"
    },
    errorClass: "help-inline",
    errorElement: "span",
    highlight:function(element, errorClass, validClass) {
        $(element).parents('.control-group').addClass('error');
    },
    unhighlight: function(element, errorClass, validClass) {
        $(element).parents('.control-group').removeClass('error');
        $(element).parents('.control-group').addClass('success');
    }
    });
}); 
```

电子邮件可用性检查：

```
 $(function()
{
    $('#email').keyup(function()
    {
        var email=$(this).val();
        if(email!=''){
   //$('.check').show();
   $('error').fadeIn(400).html
   ('<img src="/img/ajax-loading.gif" />');
   var dataString = 'email='+ email;
   $.ajax({
    type: "POST",
    url: "pages/check_email.php",
    data: dataString,
    cache: false,
    success: function(result){
        if(result=='Available'){
            $('.check').html(email+' Avaliable');
            $('#create').attr('disabled', '');
            $('#create').attr('value', 'Active');
            $("#email").removeClass("red");
            $("#email").addClass("white");
        }else{
            $('.check').html(email+' '+result);
            $('#create').attr('disabled', 'disabled');
            $('#create').attr('value', 'Deactive');
            $("#email").removeClass("white");
            $("#email").addClass("red");
        }
    }
   });
}else{
    $('.check').html('');
    $('#submit').attr('disabled', 'disabled');
    $('#submit').attr('value', 'Deactive');
}
});
}); 
```

有没有办法访问第一个函数来检查 email:true，然后调用第二个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:31:14.640

为此，jQuery Validate 有一个内置函数 - 称为`remote`. 如果您像这样指定它：

```
$("#SignUp").validate({
rules:{
    email:{
        required:true,
        email:true,
        remote: 'pages/check_email.php'
    },
},
//rest of options
}); 
```

然后它会自动将`email`post 变量发送到您的`check_email.php`脚本。让该脚本返回`"true"`或`"false"`. 我相信默认行为会首先检查电子邮件，然后将其发送到您的 AJAX 脚本。您可以在此处看到一个示例：http: [//jsfiddle.net/ryleyb/PdP69/](http://jsfiddle.net/ryleyb/PdP69/) 请注意，在 jsfiddle 上，由于站点的工作方式，您在指定远程页面时必须更加复杂......观看控制台虽然，你会看到它不会去远程，直到电子邮件地址是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:46:59.503

不，您不能从外部访问函数局部变量。

您可以在函数内部创建一个闭包并通过该闭包访问它，但那是非常不同的。

# linux - Shell脚本linux减去参数grep

> ID：14461047
> 
> 赞同：-1
> 
> 时间：2013-01-22T14:38:02.370
> 
> 标签：linux, shell, awk, grep

我需要帮助来从文件中提取巧合。

我使用 tcpdump 命令捕获网络流量

> tcpdump -Xvv -i eth0 > captureFile.txt

给定 IP 标头的任何字段，TCP 和以太网指定在捕获的流量中找到的所有值，并计算该字段的值的多少倍。例如，如果假设 TTL = 128 TTL = 64 则指示有多少数据包具有该字段与这些值中的每一个。

文件内容：

```
09:26:13.245546 IP (tos 0x0, ttl 1, id 3439, offset 0, flags [none], proto UDP (17), length 1018)
10.0.0.226.58935 > 239.255.255.250.3702: UDP, length 990
    0x0000:  4500 03fa 0d6f 0000 0111 ada8 0a00 00e2  E....o..........
    0x0010:  efff fffa e637 0e76 03e6 7ec0 3c3f 786d  .....7.v..~.<?xm
    0x0020:  6c20 7665 7273 696f 6e3d 2231 2e30 2220  l.version="1.0".
    0x0030:  656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
    0x0040:  3f3e 3c73 6f61 703a 456e 7665            ?><soap:Enve
 09:26:13.339173 IP6 (hlim 1, next-header UDP (17) payload length: 998) fe80::21e9:f54b:9ae7:6383.58936 > ff02::c.3702: UDP, length 990
    0x0000:  6000 0000 03e6 1101 fe80 0000 0000 0000  `...............
    0x0010:  21e9 f54b 9ae7 6383 ff02 0000 0000 0000  !..K..c.........
    0x0020:  0000 0000 0000 000c e638 0e76 03e6 666c  .........8.v..fl
    0x0030:  3c3f 786d 6c20 7665 7273 696f 6e3d 2231  <?xml.version="1
    0x0040:  2e30 2220 656e 636f 6469 6e67            .0".encoding
09:26:13.407313 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 10.0.3.118 tell 10.0.1.215, length 46
    0x0000:  0001 0800 0604 0001 0009 0fcb 0a0c 0a00  ................
    0x0010:  01d7 0000 0000 0000 0a00 0376 0000 0000  ...........v....
    0x0020:  0000 0000 0000 0000 0000 d9c4 62a8       ............b.
09:26:13.525954 IP (tos 0x0, ttl 128, id 3441, offset 0, flags [none], proto UDP (17), length 161)
10.0.0.226.59131 > 239.255.255.250.1900: UDP, length 133
    0x0000:  4500 00a1 0d71 0000 0111 b0ff 0a00 00e2  E....q..........
    0x0010:  efff fffa e6fb 076c 008d 6fa6 4d2d 5345  .......l..o.M-SE
    0x0020:  4152 4348 202a 2048 5454 502f 312e 310d  ARCH.*.HTTP/1.1.
    0x0030:  0a48 6f73 743a 3233 392e 3235 352e 3235  .Host:239.255.25
    0x0040:  352e 3235 303a 3139 3030 0d0a            5.250:1900..
09:26:13.557002 IP (tos 0x0, ttl 1, id 3442, offset 0, flags [none], proto UDP (17), length 161)
10.0.0.226.59131 > 239.255.255.250.1900: UDP, length 133
    0x0000:  4500 00a1 0d72 0000 0111 b0fe 0a00 00e2  E....r..........
    0x0010:  efff fffa e6fb 076c 008d 6fa6 4d2d 5345  .......l..o.M-SE
    0x0020:  4152 4348 202a 2048 5454 502f 312e 310d  ARCH.*.HTTP/1.1.
    0x0030:  0a48 6f73 743a 3233 392e 3235 352e 3235  .Host:239.255.25
    0x0040:  352e 3235 303a 3139 3030 0d0a            5.250:1900..
09:26:13.642734 IP (tos 0x0, ttl 1, id 21767, offset 0, flags [none], proto UDP (17), length 684)
10.0.0.237.58882 > 239.255.255.250.3702: UDP, length 656
    0x0000:  4500 02ac 5507 0000 0111 6753 0a00 00ed  E...U.....gS....
    0x0010:  efff fffa e602 0e76 0298 5568 3c3f 786d  .......v..Uh<?xm
    0x0020:  6c20 7665 7273 696f 6e3d 2231 2e30 2220  l.version="1.0".
    0x0030:  656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
    0x0040:  3f3e 3c73 6f61 703a 456e 7665            ?><soap:Enve
09:26:13.642960 IP6 (hlim 1, next-header UDP (17) payload length: 664) fe80::b8a2:bd0:4e0b:1bb5.58883 > ff02::c.3702: UDP, length 656
    0x0000:  6000 0000 0298 1101 fe80 0000 0000 0000  `...............
    0x0010:  b8a2 0bd0 4e0b 1bb5 ff02 0000 0000 0000  ....N...........
    0x0020:  0000 0000 0000 000c e603 0e76 0298 248c  ...........v..$.
    0x0030:  3c3f 786d 6c20 7665 7273 696f 6e3d 2231  <?xml.version="
09:26:13.642999 IP (tos 0x0, ttl 64, id 21767, offset 0, flags [none], proto UDP (17), length 684)
10.0.0.237.58882 > 239.255.255.250.3702: UDP, length 656
    0x0000:  4500 02ac 5507 0000 0111 6753 0a00 00ed  E...U.....gS....
    0x0010:  efff fffa e602 0e76 0298 5568 3c3f 786d  .......v..Uh<?xm
    0x0020:  6c20 7665 7273 696f 6e3d 2231 2e30 2220  l.version="1.0".
    0x0030:  656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
    0x0040:  3f3e 3c73 6f61 703a 456e 7665            ?><soap:Enve 
```

结果必须是：

```
ttl 64 - 1 time 
ttl 128 - 1 time
ttl 1 - 3 times 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:50:58.433

我认为这与您的预期输出完全相同。

```
grep -ioP 'ttl \d+' file|awk '{a[$0]++}END{for(x in a)print x" - "a[x]" times"}' 
```

输出将是：

```
ttl 1 - 3 times
ttl 64 - 1 times
ttl 128 - 1 times 
```

不**完全**一样，因为我没有检查时间和时间..你真的需要它吗？它可以很容易地完成..

**编辑**

正如 OP 所要求的，输出时间/次取决于计数：

```
 grep -ioP 'ttl \d+' file|awk '{a[$0]++}END{for(x in a)print x" - "a[x]" time"(a[x]>1?"s":"")}' 
```

输出：

```
ttl 1 - 3 times
ttl 64 - 1 time
ttl 128 - 1 time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:45:32.173

两种方法：

如果你有`perl`，

```
captureFile.txt | 
perl -ne '/ttl (\d+),/ and $TTL{$1}++; 
  END { for my $ttl (keys %TTL) {print "* ttl $1 - $TTL{$ttl} time\n"}}' 
```

应该这样做。但我认为`uniq -c`也可以与`grep`......

```
captureFile.txt | egrep -o 'ttl ([0-9]+)' | uniq  -c 
```

要获得您要求的确切输出格式，只需在之后添加`uniq -c`

```
| awk '{print "* ttl "$3" - "$1" time"}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:45:34.137

```
grep "ttl [0-9]*" captureFile.txt -o 
```

只会得到文本文件的相关部分。

```
grep "ttl [0-9]*" captureFile.txt -o |
awk 'NF{ count[ toupper( $0 ) ]++} 
END{ for ( name in count ) { print "*" name " -  " count[ name ] " times"
};
}' 
```

会得到你想要的格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T14:47:25.880

它有点长，我相信它可以重构很多，但如果你没有安装它，它可以工作|不能`perl`安装：

`grep ttl captureFile.txt | awk '{print $5,$6}' | sed 's/,//' | sort | uniq -c | awk '{print $2,$3,"-",$1,"times"}'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T15:17:35.743

简单的`awk`脚本：

```
$ awk -F, '/ttl/{u[$2]++}END{for(k in u)print k" - "u[k]" time"(u[k]>1?"s":"")}'
 ttl 128 - 1 time
 ttl 64 - 1 time
 ttl 1 - 3 times 
```

无需浪费子流程。

# mysql - 资源节约

> ID：14461049
> 
> 赞同：2
> 
> 时间：2013-01-22T14:38:03.250
> 
> 标签：mysql, variables, scripting

我正在做一个在线游戏。我正在使用 MySQL 数据库。玩家从枪支经销商处购买武器和弹药。我正在将弹药保存在数据库中。

我的问题是，将玩家的弹药保存在变量中，然后在断开连接时将其更新到数据库中会更好吗？意味着每次他射击我都会从变量中做-1（弹药）。另一种选择是在他拍摄时直接更新数据库。

我想节省资源。什么是最好的解决方案和最快的解决方案？我希望服务器尽可能无延迟。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:43:51.363

将其存储在内存中的变量中，然后定期将其保存到数据库中。也许在存储弹药变量的任何对象中调用以在对象释放/销毁时将其写入数据库。

无论您做什么，都要避免像您在问题中提到的那样不断写入您的数据库。尝试和扩展将是一头野兽。

# ruby - 是否可以使这些正则表达式更短？

> ID：14461053
> 
> 赞同：-1
> 
> 时间：2013-01-22T14:38:17.350
> 
> 标签：ruby, regex, optimization

正如主题所暗示的那样，是否可以使这些正则表达式更短？我正在使用 Ruby 1.9.3

```
/\n\s+(\w{0,3})[\s&&[^\n]\S]+?([\d\.]+)[\S\s&&[^\n]]+?([\d\.]+)/ 
```

和这个

```
/\s+(\w+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\s+-*\s+(\d+)\s+(\d+)\s+/ 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:55:56.050

*   `/\n\s+(\w{0,3})[\s&&[^\n]\S]+?([\d\.]+)[\S\s&&[^\n]]+?([\d\.]+)/`

如果我正确理解了 ruby​​ 正则表达式，则`[\s&&[^\n]\S]`意味着一个字符应该是一个空白字符并且是一个非空白字符或不是换行符。由于一个字符不能既是空白字符又是非空白字符，您可以将其缩短为`[\s&&[^\n]]`.

您也可以删除括号，`(\w{0,3})`become `\w{0,3}`，但如果您稍后在代码中尝试使用这些组中的字符，那么您不应该这样做。

*   `/\s+(\w+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\s+-*\s+(\d+)\s+(\d+)\s+/`

您可以组合您的一些语句，`\s+\w+(\s+\d+){5}\s+-*(\s+\d+){2}\s+`但是如果您的代码实际上使用这些组来提取信息，这又会引起头痛。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:35:37.057

您的目标是拆分固定宽度列的网页吗？

正则表达式是一种方式。您可能对固定宽度列的方法感兴趣：

```
uri = URI.parse 'http://www.ida.liu.se/~TDP007/material/seminarie2/weather.txt'
page = uri.read
rows = page.split(/\n/)[9..-3]
rows.each{|r| 
  day, max, mnt = r[0..3].strip, r[4..11].strip, r[12..17].strip
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:10:57.147

以下内容可能不会更短（如果您计算键入它所需的字符数），但它更具可读性：

```
arr  = ['(\w+)']     # Match a word
arr += ['(\d+)']*5   # Match five numbers
arr += ['-*']        # ignore dashes
arr += ['(\d+)']*2   # Match two numbers
# All of the above separated with space, plus space before and after.
my_regexp = Regexp.new(([''] + arr + ['']).join('\s+')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T15:14:53.563

如果这是您需要处理的唯一文件，那么您可以手动删除不必要的数据，然后逐行读取文件，用空格字符分割`\s+`并挑选列。

即使不手动删除不必要的数据，也可以逐行读取原始文件，用 分割`\s+`，并测试前几个条目是否为数字。这正是您对正则表达式所做的事情（测试格式并提取与格式匹配的数据）。

请注意，这`[\s&&[^\n]\S]`意味着相交`\s`and `[^\n]\S`，这会导致 set: **all space characters** but new line。所以我们可以将其重写为`[\s&&[^\n]]`. 但是，`[\S\s&&[^\n]]`表示相交`\S\s`and `[^\n]`，这会导致 set: **all characters** but new line。等效的重写是`.`or `[^\n]`，但我怀疑这就是你的意思。由于惰性量词，结果对于当前输入仍然是正确的，但对于错误的输入可能不是。

另一件事是在字符类中`.`表示文字，因此相当于.`.``[\d.]``[\d\.]`

# sql-server - 数据库脚本未在 SQL Server 2008 中执行

> ID：14461057
> 
> 赞同：1
> 
> 时间：2013-01-22T14:38:36.363
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

在我的 SQL Server 2008 R2 中，我有一个成功生成的数据库脚本，但是当我尝试执行该脚本时，它只显示正在执行查询消息并且没有任何反应。我已经等待了至少 10 分钟的结果，但完全强制我必须停止执行该查询。

> 注意：所有其他查询都正常工作，但只有数据库脚本未按上述说明执行

我不知道发生了什么...

> 更多细节：这件事没有发生在特定的数据库上，它是我的 SQL Server 的所有数据库的问题。

让我们通过例子来看看。
在 SQL Server 2008 R2 中，我有以下类型的脚本。

```
USE [master]
GO
/****** Object:  Database [BillingApplication]    Script Date: 01/22/2013 17:42:04 ******/
IF NOT EXISTS (SELECT name FROM sys.databases WHERE name = N'BillingApplication')
BEGIN
CREATE DATABASE [BillingApplication] ON  PRIMARY 
( NAME = N'BillingApplication', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA\BillingApplication.mdf' , SIZE = 3072KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'BillingApplication_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA\BillingApplication_log.ldf' , SIZE = 1024KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
END
GO
ALTER DATABASE [BillingApplication] SET COMPATIBILITY_LEVEL = 100
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [BillingApplication].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [BillingApplication] SET ANSI_NULL_DEFAULT OFF
GO
ALTER DATABASE [BillingApplication] SET ANSI_NULLS OFF
GO
ALTER DATABASE [BillingApplication] SET ANSI_PADDING OFF
GO
ALTER DATABASE [BillingApplication] SET ANSI_WARNINGS OFF
GO
ALTER DATABASE [BillingApplication] SET ARITHABORT OFF
GO
ALTER DATABASE [BillingApplication] SET AUTO_CLOSE OFF
GO
ALTER DATABASE [BillingApplication] SET AUTO_CREATE_STATISTICS ON
GO
ALTER DATABASE [BillingApplication] SET AUTO_SHRINK OFF
GO
ALTER DATABASE [BillingApplication] SET AUTO_UPDATE_STATISTICS ON
GO
ALTER DATABASE [BillingApplication] SET CURSOR_CLOSE_ON_COMMIT OFF
GO
ALTER DATABASE [BillingApplication] SET CURSOR_DEFAULT  GLOBAL
GO
ALTER DATABASE [BillingApplication] SET CONCAT_NULL_YIELDS_NULL OFF
GO
ALTER DATABASE [BillingApplication] SET NUMERIC_ROUNDABORT OFF
GO
ALTER DATABASE [BillingApplication] SET QUOTED_IDENTIFIER OFF
GO
ALTER DATABASE [BillingApplication] SET RECURSIVE_TRIGGERS OFF
GO
ALTER DATABASE [BillingApplication] SET  DISABLE_BROKER
GO
ALTER DATABASE [BillingApplication] SET AUTO_UPDATE_STATISTICS_ASYNC OFF
GO
ALTER DATABASE [BillingApplication] SET DATE_CORRELATION_OPTIMIZATION OFF
GO
ALTER DATABASE [BillingApplication] SET TRUSTWORTHY OFF
GO
ALTER DATABASE [BillingApplication] SET ALLOW_SNAPSHOT_ISOLATION OFF
GO
ALTER DATABASE [BillingApplication] SET PARAMETERIZATION SIMPLE
GO
ALTER DATABASE [BillingApplication] SET READ_COMMITTED_SNAPSHOT OFF
GO
ALTER DATABASE [BillingApplication] SET HONOR_BROKER_PRIORITY OFF
GO
ALTER DATABASE [BillingApplication] SET  READ_WRITE
GO
ALTER DATABASE [BillingApplication] SET RECOVERY FULL
GO
ALTER DATABASE [BillingApplication] SET  MULTI_USER
GO
ALTER DATABASE [BillingApplication] SET PAGE_VERIFY CHECKSUM
GO
ALTER DATABASE [BillingApplication] SET DB_CHAINING OFF
GO
EXEC sys.sp_db_vardecimal_storage_format N'BillingApplication', N'ON'
GO
USE [BillingApplication]
GO
/****** Object:  Table [dbo].[tbCustBill]    Script Date: 01/22/2013 17:42:07 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[tbCustBill]') AND type in (N'U'))
BEGIN
                    -- And continue the entire script 
```

现在正如我在**SQL Server Profiler**中看到的那样，直到以下代码的执行工作完美。

```
 ALTER DATABASE [BillingApplication] SET RECURSIVE_TRIGGERS OFF
        GO 
```

并在下一行执行成为停止。
我不知道发生了什么......
在强制完全停止执行时，它会生成如下错误

> 消息 5069，级别 16，状态 1，第 1 行 ALTER DATABASE 语句失败。

所以，这可能是一些 SQL Sever 配置问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:50:59.407

我认为您需要确保可以在数据库上放置排他锁以更改此设置。即使您刚刚创建了数据库，您也可能已经建立了多个与它的连接。确保在 Management Studio 中禁用 IntelliSense，确保没有其他窗口连接到此数据库，并且将上下文切换到另一个数据库。然后将数据库设置为单用户，进行更改，然后将其重新设置：

```
USE master;
GO

ALTER DATABASE BillingApplication SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
GO

ALTER DATABASE BillingApplication SET RECURSIVE_TRIGGERS OFF;
GO

ALTER DATABASE BillingApplication SET DISABLE_BROKER;    
GO

... other changes ...

ALTER DATABASE BillingApplication SET MULTI_USER;
GO 
```

如果这仍然等待，那么您可能正在等待一些非常大的事务回滚，您可以通过查看`sys.dm_exec_requests`和/或在另一个窗口中检查您正在等待的内容`sys.dm_os_waiting_tasks`。

但是，如果您正在创建数据库，为什么您认为需要显式禁用代理？默认情况下不启用它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:43:02.797

你有

> ALTER DATABASE [BillingApplication] SET DISABLE_BROKER

没有 ane`ON`或`OFF`. 设置它，它应该工作。

* * *

不，不是这样。我猜它与 Service Broker 子系统有关，但这不是我所熟悉的。希望知道该系统的其他人可以回答这个问题...\

# finite-automata - 如果“w ∈ {a, b}*”，w 是否允许为空字符串？

> ID：14461069
> 
> 赞同：0
> 
> 时间：2013-01-22T14:39:04.807
> 
> 标签：finite-automata, automata

如果`L`是由 : 定义的语言 `L = { awa | w ∈ {a, b}* }`，

是`aa`语言的字符串`L`吗？（注意`w`这里是空字符串）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:48:00.197

根据您的定义，似乎 L 仅由两个单词`aba`和组成`aaa`。

编辑：在您编辑完问题后，我可以说`yes "aa" is a word of this language` `w ∈ {a, b}*`这个字母表的零个或多个字符，因此 w 可能有零个字符并且为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T18:14:43.580

您的问题可以这样重述。

```
L= a(a|b)*a 
```

这转化为直觉为“以'a'开头和结尾的字符串”。所以很自然，'aa' 是一个有效的字符串。

我希望这回答了你的问题。

# ruby-on-rails - MariaDB 可以在生产环境中使用 Ruby on Rails 吗？

> ID：14461073
> 
> 赞同：8
> 
> 时间：2013-01-22T14:39:17.157
> 
> 标签：ruby-on-rails, mariadb

[http://en.wikipedia.org/wiki/MariaDB](http://en.wikipedia.org/wiki/MariaDB)

> MariaDB 是 MySQL 数据库的一个社区开发分支，其推动力是社区维护其在 GNU GPL 下的自由状态，而不是在 Oracle 当前所有权下 MySQL 许可证状态的任何不确定性。贡献者必须与 Monty Program AB 分享他们的版权。

该页面继续说 MariaDB 5.5 与同一版本的 MySQL 二进制兼容，并添加了几个自己的数据库引擎可供选择。

[我还读到](http://www.phoronix.com/scan.php?page=news_item&px=MTI4MDY)Fedora 19 将删除 MySQL 包以支持 MariaDB。

所以问题是，Ruby on Rails 3+ MariaDB 是否兼容？当 MariaDB 功能开始偏离 MySQL 时，是否有任何未来计划集成这些功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:07:51.723

Red Hat、Debian、Fedora、OpenSuse、Slackware，甚至 Wikipedia 都迁移（或正在迁移）到 MariaDB。这意味着它是稳定的。此外，MariaDB（和 Percona Server）似乎比 Oracle 更快地解决了安全问题。

由于 MariaDB 与 MySQL 兼容，因此所有 API 都兼容，包括 Ruby on Rails API。（嗯，MariaDB 10.0 与 MySQL 5.6 并不完全兼容，但不兼容并不在 API 级别！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T10:57:32.667

您可以将 Mariadb 与任何兼容的 MySQL 客户端一起使用。我正在使用 MySQL .NET 连接器，它可以正常工作。

# c - 在 C 中的 Xcode 中创建和链接 .dylib

> ID：14461074
> 
> 赞同：1
> 
> 时间：2013-01-22T14:39:19.303
> 
> 标签：c, xcode, dylib

我遇到了一个问题。

好吧，我想创建我自己的dylib文件，在里面写一些方法等等。你知道的，只是一个普通的库。

好的，所以我打开了 Xcode，新建项目，然后选择了动态库。我创建了一个 *main_lib.c* 文件，并在其中编写了这个方法：

```
void printMessage(char *str){

    printf("%s", str);

} 
```

显然，我将此文件与 .dylib 文件链接并构建了项目，没有错误。在此之后，我创建了另一个项目，选择了命令行应用程序并创建了一个 main.c 文件。

我在这个项目中导入了构建的 .dylib 文件。

我问了我的一个朋友，他说我现在应该创建一个头文件，并在其中写入dylib的函数原型。所以我创建了一个 main_lib.h 文件并声明了这个原型：

```
void printMessage(char *str); 
```

此时，我在 main.c 文件中编写了这段代码：

```
#include <stdio.h>
#include "main_lib.h"

int main(void){

    printMessage("just a try");

 return 0;    

} 
```

但是当我构建它时它说：

```
ld: symbol(s) not found for architecture x86_64 
```

这意味着编译器找不到printMessage，对吗？但为什么？我究竟做错了什么？请帮助:)提前谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-02T04:30:50.873

要包含它，只需将其添加到“构建阶段”中的**目标依赖**项和**与库**的链接即可，它应该可以工作。

# ruby-on-rails - 从数据库加载的 Active Record 对象无效

> ID：14461076
> 
> 赞同：0
> 
> 时间：2013-01-22T14:39:24.060
> 
> 标签：ruby-on-rails, rails-activerecord

我有一个从数据库加载的 ActiveRecord 对象。

当我调用`valid?`这个对象时，它会`false`由于未满足 rails 唯一约束而返回，至少验证是这样说的。

我检查了数据库架构，并且唯一字段也定义了一个索引，因此在数据库级别上也确保了唯一性。

这里发生了什么，这怎么可能首先发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:59:04.547

如果您没有在数据库表上定义唯一索引，就会发生这种情况！

更详细一点：我认为数据库在列上有一个唯一索引，但结果证明这是一个“常规”索引。问题出现了，因为在应用程序的某个时刻，模型在没有先验证的情况下被保存。这导致数据库中的非唯一条目。通过调用`valid?`触发检查唯一性的 rails 内部例程（然而这是实现的），它正确地返回了假。

经验教训：始终确保在数据库级别添加唯一索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:44:11.737

您应该检查**@object.errors.inspect**以检查正在发生的事情，然后进行相应的修复。

同样重要的是，您何时检查对象的有效性，即在保存之前或之后。

更优雅的方法是使用`@object.save!`

Ruby 应该告诉您在尝试保存对象期间出了什么问题。

# linux - 将 Windows 批处理脚本转换为 Linux Shell 脚本

> ID：14461077
> 
> 赞同：0
> 
> 时间：2013-01-22T14:39:34.210
> 
> 标签：linux, shell, batch-file

我有以下 Windows 批处理脚本（.bat 文件）。我想将其转换为 Linux shell 脚本。请帮忙...

```
@echo off
setlocal
for /f "tokens=2-7 delims=_.-" %%A in ('dir /B TACOS_*') do (
  setlocal enabledelayedexpansion
  call :getmonth %%B
  ren TACOS*_*%%A-%%B-%%C*_*%%D-%%E-%%F_UTC.csv TACOS_%%A!mon!%%C_%%D%%E%%F.csv
  endlocal
)

:getmonth
if "%1" equ "Jan" set mon=01
if "%1" equ "Feb" set mon=02
if "%1" equ "Mar" set mon=03
if "%1" equ "Apr" set mon=04
if "%1" equ "May" set mon=05
if "%1" equ "Jun" set mon=06
if "%1" equ "Jul" set mon=07
if "%1" equ "Aug" set mon=08
if "%1" equ "Sep" set mon=09
if "%1" equ "Oct" set mon=10
if "%1" equ "Nov" set mon=11
if "%1" equ "Dec" set mon=12
goto :eof
endlocal 
```

这是我到目前为止所尝试的：

```
#!/bin/bash
set +v

for -f "tokens=2-7 delims=_.- A in ('Is-I -B TACOS_*'); do (
    getmonth B
    mv -iv TACOS*_*A-B-C*_*D-E-F_AST.csv TACOS_A!mon!C_DEF.csv
)

:getmonth
if "$1" equ "Jan" then mon=01
if "$1" equ "Feb" then mon=02
if "$1" equ "Mar" then mon=03
if "$1" equ "Apr" then mon=04
if "$1" equ "May" then mon=05
if "$1" equ "Jun" then mon=06
if "$1" equ "Jul" then mon=07
if "$1" equ "Aug" then mon=08
if "$1" equ "Sep" then mon=09
if "$1" equ "Oct" then mon=10
if "$1" equ "Nov" then mon=11
if "$1" equ "Dec" then mon=12
goto :eof 
```

* * *

这是我迄今为止尝试过的

```
#!/bin/bash
set +v

for -f "tokens=2-7 delims=_.- A in ('Is-I -B TACOS_*'); do (
    getmonth B
    mv -iv TACOS*_*A-B-C*_*D-E-F_AST.csv TACOS_A!mon!C_DEF.csv
)

:getmonth
if "$1" equ "Jan" then mon=01
if "$1" equ "Feb" then mon=02
if "$1" equ "Mar" then mon=03
if "$1" equ "Apr" then mon=04
if "$1" equ "May" then mon=05
if "$1" equ "Jun" then mon=06
if "$1" equ "Jul" then mon=07
if "$1" equ "Aug" then mon=08
if "$1" equ "Sep" then mon=09
if "$1" equ "Oct" then mon=10
if "$1" equ "Nov" then mon=11
if "$1" equ "Dec" then mon=12
goto :eof 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-06T13:19:25.850

我不擅长 Bash（我之前尝试过转换；最后把它变成了一个 exe，要求人们获得[Wine Compatibility layer](http://winehq.org)）但我相信我知道你的部分问题。您不能在 bash 脚本中使用标签 (:example) 和 goto, (goto example)。你必须使用函数。在你的情况下：

```
#!/bin/bash
set +v

for -f "tokens=2-7 delims=_.- A in ('Is-I -B TACOS_*'); do (
    getmonth() B
    mv -iv TACOS*_*A-B-C*_*D-E-F_AST.csv TACOS_A!mon!C_DEF.csv
)

function getmonth()
{
if "$1" equ "Jan" then mon=01
if "$1" equ "Feb" then mon=02
if "$1" equ "Mar" then mon=03
if "$1" equ "Apr" then mon=04
if "$1" equ "May" then mon=05
if "$1" equ "Jun" then mon=06
if "$1" equ "Jul" then mon=07
if "$1" equ "Aug" then mon=08
if "$1" equ "Sep" then mon=09
if "$1" equ "Oct" then mon=10
if "$1" equ "Nov" then mon=11
if "$1" equ "Dec" then mon=12
eof()
} 
```

[这](http://tldp.org/LDP/abs/html/dosbatch.html)是将 Batch 转换为 Shell 的绝佳指南。它对我帮助不大，但我认为你会发现它很有用。

另外，你想用这个程序完成什么？

# logging - JSLint：Notepadd++：如何查看 console.log()

> ID：14461080
> 
> 赞同：0
> 
> 时间：2013-01-22T14:39:45.200
> 
> 标签：logging, printing, console, notepad++, jslint

我的 .js 文件只有`console.log("abc");`. 我已经在 J​​SLint 选项中启用了开发模式。我怎样才能让 JSLint 像`System.out.println()`Java 一样向我显示日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:46:06.910

JSLint 实际上并不执行你的代码，它只是告诉你它是否有任何错误。

如果要执行它，请将其加载到带有`<script src="..." type="text/javascript">`标签的网页内（其中`...`是`.js`文件的名称）

# actionscript-3 - 如何使用 actionscript 3.0 在 flash 中动态创建表

> ID：14461081
> 
> 赞同：0
> 
> 时间：2013-01-22T14:39:45.790
> 
> 标签：actionscript-3, flash

我对 Flash 和 actionscript 很陌生。我想使用 actionscript 代码动态创建一个表。请帮我。

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:39:21.663

此处：
[http](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fdc.html)
://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fdc.html 有关使用数组和向量的完整文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:48:21.283

如果您指的是动态数组，则 Action 脚本以 Array() 对象的形式原生支持动态随机访问容器。

只需实例化一个新的 Array 对象。请记住，您自己负责管理容器中的数据分布。如果您只是删除数组中间的一个元素，该对象不会自动压缩自身。

一个例子。

```
var numbers:Array = new Array();

numbers.Push("Five");
numbers.Push("Twelve");
numbers.Pop(); 
```

# objective-c - 如何初始化对象并覆盖目标c中的方法？

> ID：14461084
> 
> 赞同：2
> 
> 时间：2013-01-22T14:39:55.637
> 
> 标签：objective-c, overriding

与其他语言一样，我们可以在`initialization`. 请帮帮我我该怎么办？

**例如：**

```
 public class DemoInitAndOverride {

    public void handleMessage(){}

} 
```

**在另一个班级**

```
 public class SampleClass {

    public void doSomeThing(){
        DemoInitAndOverride demo = new DemoInitAndOverride(){
            @Override
            public void handleMessage() {
                // TODO Auto-generated method stub
                super.handleMessage();
            }
        };
    }

}
****EDIT:**** 
```

感谢大家提供可能的解决方案和建议。我认为现在对我来说重要的是提供一些有关需求的详细信息，这可以帮助您提供解决方案。

处理程序的概念类似于 Android 框架，其中处理程序用于在 2 个线程或 2 个方法之间传递消息。请看下面的代码演示：

UI 类（这里用户单击一个按钮，使用处理程序将请求分派到处理器类）

**这是演示处理程序**

```
/**
 * 
 * Used for thread to thread communication.
 * Used for non UI to UI Thread communication.
 *
 */
public class DemoHandler {

    public void handleMessage(Messages message){}

    final public void sendMessage(final Messages message){
        //Calling thread is platform dependent and shall change based on the platform
        new Thread(new Runnable() {
            @Override
            public void run() {
                synchronized (this) {
                    handleMessage(message);
                }
            }
        });
    }
} 
```

**这是简单的消息类**

```
public class Messages {
    public Object myObject;

    //other hash map (key, values) and get data put data etc
} 
```

**这是简单的用户界面类演示代码：**

```
public class UIClass {

    public UIClass(){
        //INIT
    }
    void onClick(int id){
        //Some Button is clicked:
        //if id == sendParcel
        //do
        TransactionProcessor.getInstance().sendParcel(handler, "Objects");
    }

    DemoHandler handler = new DemoHandler(){
        public void handleMessage(Messages message) {
            //Inform the UI and Perform UI changes
            //data is present in the messages
        };
    };
} 
```

**这是示例事务处理器类**

公共类事务处理器 {

```
public static TransactionProcessor getInstance(){
    return new TransactionProcessor(); //for demonstration
}
//Various Transaction Methods which requires calling server using HTTP and process there responses:
public void sendParcel(final DemoHandler uiHander, String otherdetailsForParcel){
    //INIT Code and logical code
    //Logical Variables and URL generation
    String computedURL = "abc.com/?blah";
    DemoHandler serverConnectionHandler = new DemoHandler(){
        @Override
        public void handleMessage(Messages message) {
            super.handleMessage(message);
            //Process server response:
            //create a new message for the UI thread and dispatch
            Messages response = new Messages();
            //add details to messages
            //dispatch
            uiHander.sendMessage(response );
        }
    };
    new Thread(new ServerConnection(computedURL, serverConnectionHandler));
}
public void sendEmail(final DemoHandler uiHander, String otherdetailsForEmail){
    //SAME AS SEND PARCEL WITH DIFFERENT URL CREATION AND RESPONSE VALIDATIONS
}
public void sendNotification(final DemoHandler uiHander, String otherdetailsForNotifications){
    //SAME AS SEND PARCEL WITH DIFFERENT URL CREATION AND RESPONSE VALIDATIONS
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:55:15.990

这是一个讨厌的，我建议创建一个子类或其他东西。

这是您的答案，基本上是相同的，但在运行时。继续需要您自担风险：

导入这个：

```
#import <objc/runtime.h> 
```

并将此代码添加到任何位置：

```
- (void)methodName {
    // whatever you want to do in there
} 
```

在你的功能中：

```
Class subclass;
// Verifiy that you haven't created it already
subclass = objc_getClass("SampleClassSubclass");
if (!subclass) {
    // Generate a new class, which will be subclass of your SampleClass
    subclass = objc_allocateClassPair(subclass, "SampleClassSubclass", 0);
    // Obtain the implementation of the method you want to overwrite
    IMP methodImplementation = [self methodForSelector:@selector(methodName)];
    // With that implementation, replace the method
    class_replaceMethod(subclass, @selector(methodName), methodImplementation, "@@:");
    // Register the class you just generated
    objc_registerClassPair(subclass);
}

SampleClass *obj = [[subclass alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:50:26.740

在 Objective-C 中做起来并不容易，但这应该可以。它用自己的实现替换`doSomething`方法并返回该类的新实例。`DemoInitAndOverride`但是请注意，一旦完成此操作，新的实现仍然适用于类的**所有**新实例，而不仅仅是单个实例。

```
- (void)doSomething
{
    NSLog(@"self doSomething called");
}

- (DemoInitAndOverride *)createObj
{
    DemoInitAndOverride *obj = [[DemoInitAndOverride alloc] init];

    SEL sel = @selector(doSomething);
    Method theirMethod = class_getInstanceMethod([DemoInitAndOverride class], sel);
    Method myMethod = class_getInstanceMethod([self class], sel);
    theirMethod->method_imp = myMethod->method_imp;
    return obj;
} 
```

# sas - 保留在数据步骤中的通配符

> ID：14461090
> 
> 赞同：5
> 
> 时间：2013-01-22T14:40:10.270
> 
> 标签：sas

是否可以在`keep`数据步骤中使用通配符？我想做以下事情（A在B上的左连接保持变量x和y以及所有以a开头的变量）：

```
data C;
    merge A(in=a)
          B(keep= x y var* in=b);
    by x y;
    if a;
run; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T14:47:52.447

是的，使用`:`.

```
data C;
    merge A(in=a)
          B(keep=x y a: in=b);
    by x y;
    if a;
run; 
```

`in=a`（如果你有一个名为 的变量，这不是一个好主意`a`。）

如果你有带序号的变量，比如`a1`, `a2`, ..., `aN`，你可以写`a1-aN`. 如果你想要一组相邻的列（比如`varX`,`varY`和`varZ`在数据集中物理上相邻），你可以说`varX--varZ`. 这两个示例之间的区别仅在于您使用的是一个破折号还是两个破折号。

# jquery - How to create a grid with more than five columns jQuery Mobile?

> ID：14461095
> 
> 赞同：2
> 
> 时间：2013-01-22T14:40:26.473
> 
> 标签：jquery, jquery-mobile

jQuery Mobile documentation only explains up to a five-grid structure. If I want to create a 7-column grid, what should I do? (Column is not working well on mobiles). Please help me.

Thank you.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-15T22:34:47.110

I needed a jquery mobile 7 column grid as well (for calendar project)

I extended the CSS to handle the extra grid and block styles for 6 and 7 columns based on how the CSS was handling the 2-5 columns. The only difference is the width and additional blocks that are created.

Anyway, use this CSS to extend the existing jquery mobile CSS

```
/* ADD 6(e) and 7(f) column grid */
.ui-grid-e, .ui-grid-f { overflow: hidden; }

/* grid e: 16/16/16/16/16/16 */
.ui-grid-e .ui-block-a, .ui-grid-e .ui-block-b, .ui-grid-e .ui-block-c, .ui-grid-e .ui-block-d, .ui-grid-e .ui-block-e, .ui-grid-e .ui-block-f { width: 16.59166666666667%; }
.ui-grid-e > :nth-child(n) { width: 16.66666666666667%; }
.ui-grid-e .ui-block-a { clear: left; }

/* grid f: 14/14/14/14/14 */
.ui-grid-f .ui-block-a, .ui-grid-f .ui-block-b, .ui-grid-f .ui-block-c, .ui-grid-f .ui-block-d, .ui-grid-f .ui-block-e, .ui-grid-f .ui-block-f, .ui-grid-f .ui-block-g { width: 14.21071428571429%; }
.ui-grid-f > :nth-child(n) { width: 14.28571428571429%; }
.ui-grid-f .ui-block-a { clear: left; }

/* ADD 6th (f) and 7th (g) blocks in grid */
.ui-header .ui-navbar .ui-grid-e li.ui-block-f .ui-btn,
.ui-footer .ui-navbar .ui-grid-e li.ui-block-f .ui-btn { margin-right: -3px; }/* NOT TESTED */

.ui-header .ui-navbar .ui-grid-f li.ui-block-g .ui-btn,
.ui-footer .ui-navbar .ui-grid-f li.ui-block-g .ui-btn { margin-right: -2px; }/* NOT TESTED */

.ui-grid-e .ui-btn, .ui-grid-f .ui-btn { margin-right: 5px; margin-left: 5px; }

.ui-block-f, .ui-block-g { margin: 0; padding: 0; border: 0; float: left; min-height: 1px; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; box-sizing: border-box; }

.ui-header .ui-navbar .ui-grid-e li.ui-block-f .ui-btn-icon-right .ui-icon,
.ui-footer .ui-navbar .ui-grid-f li.ui-block-g .ui-btn-icon-right .ui-icon { right: 8px; } 
```

Notice you are creating styles for : .ui-grid-e (6 column grid) .ui-grid-f (7 column grid)

and the new blocks in those grids are : .ui-block-f (6th block) .ui-block-g (7th block)

So, the base HTML to create a 7 column grid would be:

```
<div class="ui-grid-f">
    <div class="ui-block-a"><div class="ui-body ui-body-d">1</div></div>
    <div class="ui-block-b"><div class="ui-body ui-body-d">2</div></div>
    <div class="ui-block-c"><div class="ui-body ui-body-d">3</div></div>
    <div class="ui-block-d"><div class="ui-body ui-body-d">4</div></div>
    <div class="ui-block-e"><div class="ui-body ui-body-d">5</div></div>
    <div class="ui-block-f"><div class="ui-body ui-body-d">6</div></div>
    <div class="ui-block-g"><div class="ui-body ui-body-d">7</div></div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:48:48.747

You can use 3rd party jQuery Mobile grid plugin: [http://jeromeetienne.github.com/jquery-mobile-960/](http://jeromeetienne.github.com/jquery-mobile-960/)

It is only a css file but it works just fine. It can support more then 12 columns.

Example: [http://jsfiddle.net/Gajotres/GGasc/](http://jsfiddle.net/Gajotres/GGasc/)

```
<fieldset class="container_12">
    <div class="grid_2"><button type="submit">Button 1</button></div>
    <div class="grid_2"><button type="submit">Button 2</button></div>      
    <div class="grid_2"><button type="submit">Button 3</button></div>      
    <div class="grid_2"><button type="submit">Button 4</button></div>
    <div class="grid_2"><button type="submit">Button 5</button></div>      
    <div class="grid_2"><button type="submit">Button 6</button></div>      
</fieldset> 
```

**EDIT :**

Here's also a good example what this grid can do: [http://jeromeetienne.github.com/jquery-mobile-960/demoFluid.html](http://jeromeetienne.github.com/jquery-mobile-960/demoFluid.html)

# php - 当单击树面板中的节点时，在 extjs 4 中的选项卡面板中重新加载活动选项卡

> ID：14461096
> 
> 赞同：2
> 
> 时间：2013-01-22T14:40:27.517
> 
> 标签：php, html, ajax, extjs, extjs4

我是 extjs 4 的新手，我有一个树面板和一个选项卡，在选项卡中我有 4 个选项卡，这四个选项卡是 ajax 选项卡，现在我的任务是当我单击树面板中的节点时，重新加载选项卡面板是我的任务所以请帮我下面的代码是树面板

```
var treePanel = Ext.create('Ext.tree.Panel', {
    id: 'tree-panel',
    title: 'Taxonomy',
    region: 'west',
    collapsible: true,
    split: true,
    height: '100%',
    width: '20%',
    minWidth: 100,
    rootVisible: false,
    autoScroll: true,
    store: store,
    viewConfig: {
        plugins: {
            ptype: 'treeviewdragdrop'
        }
    },
    listeners: { //this listeners i am used for active tab reload but not working .
        select: function (s, m) {
            IPRadarPanel.setActiveTab(m.raw.TabPanel);
        }
    }, 
```

下面的代码是标签面板代码

```
var IPRadarPanel = Ext.create('Ext.TabPanel', {
    deferredRender: false,
    id: 'IP_RadarPanel',
    // region: 'North',
    plain: true,
    split: true,
    activeTab: 0,
    items: [{
        title: 'State of patent record',
        bodyPadding: 10,
        autoScroll: true,
        loader: {
            url: 'charts/states.php',
            scripts: true,
            //scripts:true,
            contentType: 'php',
            // loadMask: true
            autoload: true
        },
        listeners: {
            activate: function (tab) {
                tab.loader.url = 'charts/states.php?id=' + treeID;
                tab.loader.load();
            }
        }
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:27:19.270

```
 if(tabPanel.activeTab.title == "IP Radar"){
                                IPRadarPanel.activeTab.fireEvent("activate", IPRadarPanel.activeTab);
                                }else{
                                //tabPanel.activeTab.fireEvent("activate", tabPanel.activeTab);
                                } 
```

# java - 从命令行编译一个eclipse GWT项目，没有eclipse：编译错误

> ID：14461098
> 
> 赞同：2
> 
> 时间：2013-01-22T14:40:32.977
> 
> 标签：java, eclipse, gwt, command-line, compilation

我们在 Eclipse 中获得了一个 GWT 项目，否则它可以工作。现在我想要一个在服务器上运行的脚本，它从源代码管理中提取最新版本并在服务器上编译并部署它。这将为我们节省大量手动工作，并允许我们在带宽有限的连接上部署新版本（因为我们不必将应用程序上传到服务器）。

拉取最新版本的源代码后，脚本尝试使用以下命令编译代码：

```
java -cp "/path/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.5.0.v201211121240-rel-r42/gwt-2.5.0/*:/path/company/projects/pull-compile-deploy/X/X/src:/path/company/projects/pull-compile-deploy/X/X/war/WEB-INF/lib/*" com.google.gwt.dev.Compiler nl.company.projects.X

Compiling module nl.company.projects.X
   Finding entry point classes
      [ERROR] Unable to find type 'nl.company.projects.X.client.XMain'
         [ERROR] Hint: Previous compiler errors may have made this type unavailable
         [ERROR] Hint: Check the inheritance chain from your module; it may not be inheriting a required module or a module may not be adding its source path entries properly 
```

所有源代码都在`/path/company/projects/pull-compile-deploy/X/X/src`，所有使用的 .jars（除了 GWT 的东西）都在 .jar 中`/path/company/projects/pull-compile-deploy/X/X/war/WEB-INF/lib/`。显然出了点问题。

**问题：**该文件`/path/company/projects/pull-compile-deploy/X/X/src/nl/company/projects/X/client/XMain.java`确实存在并且imho应该在类路径中？！任何人知道这里可能出了什么问题吗？是否有可能在某些日志中准确地看到 eclipse 为编译而执行的命令？我查看了 eclipse 可以导出的 build.xml，但似乎不包含要为生产编译的目标。

别的东西：显然 GWT 期望`X.gwt.xml`是 at `/path/company/projects/pull-compile-deploy/X/X/src/nl/company/project/X.gwt.xml`，而 eclipse 把它放进去`/path/company/projects/pull-compile-deploy/X/X/src/nl/company/project/X/X.gwt.xml`（即嵌套更深的一个目录），我通过创建一个符号链接来解决这个问题。

**进一步编辑：** 由于一个答案集中在我如何调用编译工具，我已经在 Ant 中重写了它，见下文。当然，问题仍然存在。

```
<!-- Compile the source using javac. -->
<target name="compile" depends="init">
    <javac srcdir="src/" destdir="bin/">
        <classpath refid="project.classpath"/>
    </javac>
</target>

<!-- Use the GWT-compiler. -->
<target name="gwt-compile" depends="compile">
    <java failonerror="true" fork="true" classname="com.google.gwt.dev.Compiler">
        <classpath>
            <path refid="project.classpath"/>
            <pathelement location="src/"/>
            <pathelement location="bin/"/>
        </classpath>
        <jvmarg value="-Xmx512M"/>
        <arg value="${module.name}"/>
    </java>
</target> 
```

上面的 Ant 脚本有什么问题吗？ `module.name = nl.company.projects.X`并且路径`refid="project.classpath"`包含所有使用的库以及 GWT 库（gwt-user.jar、gwt-dev.jar 和 validation-api-1.0.0.GA(-source).jar）。

XMain 类不继承任何东西（除了从 Object 继承）并且只实现 EntryPoint（包含在 gwt-user.jar 中）。所以我不认为这个问题与编译器给出的第二个提示有关。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:00:07.727

GWT 需要你`javac`的类，它需要`*.java`和`*.class`文件。

情况并非总是如此，并且应该在未来改变（例如参见[https://code.google.com/p/google-web-toolkit/issues/detail?id=7602](https://code.google.com/p/google-web-toolkit/issues/detail?id=7602)），但现在是这样事态：你需要`javac`才可以`com.google.gwt.dev.Compiler`。

```
javac -cp "/path/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.5.0.v201211121240-rel-r42/gwt-2.5.0/*:/path/company/projects/pull-compile-deploy/X/X/war/WEB-INF/lib/*" -sourcepath /path/company/projects/pull-compile-deploy/X/X/src /path/company/projects/pull-compile-deploy/X/X/src/nl/company/projects/X.java -d /path/company/projects/pull-compile-deploy/X/X/bin

java -cp "/path/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.5.0.v201211121240-rel-r42/gwt-2.5.0/*:/path/company/projects/pull-compile-deploy/X/X/src:/path/company/projects/pull-compile-deploy/X/X/bin:/path/company/projects/pull-compile-deploy/X/X/war/WEB-INF/lib/*" com.google.gwt.dev.Compiler nl.company.projects.X 
```

（使用前请仔细检查以上命令）

**编辑：（**响应您的“问题” `X.gwt.xml`）：GWT*期望*X.gwt.xml 位于，`nl/company/projects/X.gwt.xml`因为这就是您告诉它使用的：`module.name = nl.company.projects.x`。如果文件位于`nl/company/projects/X/X.gt.xml`则`nl.company.projects.X.X`用作模块名称。在此处使用符号链接可能会出现问题：模块的源路径（`<source`在[https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideModuleXml](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideModuleXml)搜索）将`nl/company/projects/client`因此而获胜'不包括`nl/company/projects/X/client`你的`XMain`班级住在哪里; 这是 GWT 编译器*无法使用的。*

* * *

也就是说，我完全同意 SSR：使用像样的构建工具：Ant、Maven、Gradle、Make 等等，它会让你的生活变得更轻松。管理依赖项（Ant+Ivy、Maven、Gradle）的构建工具是更好的 IMO。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T14:47:31.653

你为什么要让自己经历这样**的非标准**构建练习。

如果它是非学术项目，那么使用 maven。如果你觉得 maven 很困难，那么使用 ant。

GWT 团队提供了这两种类型的示例 - [http://code.google.com/p/google-web-toolkit/source/browse/#svn%2Ftrunk%2Fsamples](http://code.google.com/p/google-web-toolkit/source/browse/#svn%2Ftrunk%2Fsamples)。

**注意 - maven 有插件可以以标准化**的方式完成您尝试的大部分工作。

# abap - SAP SAVE_TEXT 功能模块对 SQL 注入安全吗？

> ID：14461099
> 
> 赞同：2
> 
> 时间：2013-01-22T14:40:34.497
> 
> 标签：我对abap, abap

[我对abap](/questions/tagged/abap "显示标记为“abap”的问题")功能模块**SAVE_TEXT**有疑问。我假设可以创建自定义`tdobject`和`tdid`，然后将长文本存储在表`STXH, STX`L 中。**SAVE_TEXT**对`SQL`注入攻击的安全性如何？由于以RAW格式编码文本，它不会容易受到攻击吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:16:20.667

您的第一个假设要么在翻译中丢失，要么首先是错误的 -通常由应用程序开发人员使用事务手动维护`TDOBJECT`和的有效值。它们不是作为日常应用程序处理的一部分而创建的。`TDID``SE75`

就数据库访问而言，有两个安全级别可以防止 SQL 注入，尽管其中一个并非设计为安全级别：

1.  文本的内容以内部形式存储，该形式被序列化为字节字符串。原始文本中可能存在的任何 SQL 命令都无法通过此转换。

2.  DML 命令通过通常的数据库接口层传递，该接口层使用带有一组固定变量的准备好的语句，这些变量仅在执行语句时才提供值。据我所知，没有使用动态 SQL 语句来修改`STX*`文本。

对于正常的业务应用程序，这应该足够安全。如果你想经营一座核电站，好吧——我们必须谈谈。

# html - 为什么 Bootstrap 网格布局优于 HTML 表格？

> ID：14461103
> 
> 赞同：66
> 
> 时间：2013-01-22T14:40:43.970
> 
> 标签：html, twitter-bootstrap, html-table, grid-layout, layout

[注意：对于那些可能将此问题与“为什么不使用表格进行 HTML 布局”混淆的人，我不是在问这个问题。我要问的问题是为什么网格布局与表格布局根本不同。]

我正在为一个项目研究 CSS 库（特别是 Bootstrap）。我是一名程序员而不是网页设计师，我觉得我可以从封装好的设计的库中受益。

我们都知道使用 HTML 表格来完成基本的站点布局是一种不好的做法，因为它将演示与内容混合在一起。像 Bootstrap 这样的 CSS 库提供的好处之一是它们提供了在不使用表格的情况下创建“网格”布局的能力。但是，我在理解它们的网格布局与等效的表格布局有何不同之处时遇到了一些麻烦。

换句话说，这两个 HTML 示例之间的*根本*区别是什么？我认为网格布局只是一个具有另一个名称的表，我错了吗？

```
<div class="row">
    <div class="span16"></div>
</div>

<div class="row">
    <div class="span4"></div>
    <div class="span4"></div>
    <div class="span4"></div>
    <div class="span4"></div>
</div> 
```

和

```
<table>
  <tr>
    <td colspan=4></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-22T14:47:55.837

不同之处在于第一个示例在*语义上*被标记，假设被标记的数据实际上不是表格的。`<table>`应该只用于*表格数据*，而不是碰巧以类似于表格的布局显示的任何数据。

尽管使用像 Bootstrap 这样的 CSS 包是正确的，它要求您将类分配给*非*语义但呈现的 HTML 元素，这减少了内容和呈现的分离，使得差异有些没有意义。您*应该*为元素分配语义上有意义的类，并使用lesscss mixins（或类似技术）将CSS框架中定义的表现行为分配给这些类，而不是直接将表现类分配给元素。

说：

```
<div class="products">
    <div class="product"></div>
</div>

.products {
    .row;
}

.products > .product {
    .span16;
} 
```

请注意，我说*应该*。在实践中，这不一定总是更可行的选择，但它应该是理论上的目标。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-05-09T13:21:32.353

我相信[CBroe评论](https://stackoverflow.com/questions/14461103/why-is-the-bootstrap-grid-layout-preferable-to-an-html-table#comment29699970_14461103)是最好的选择，所以我选择澄清它。

避免`div`'s。A`div`应该是你最后的选择，而不是你的第一选择。相反，请尝试在实际元素上使用 Bootstrap 类。例如：

```
<form class="container">
    <fieldset class="row">
        <label class="span4" for"search">Type your search</label>
        <input class="span6" type="text" id="search" />
    </fieldset>
</form> 
```

使用 fieldset 包含单个字段是一种耻辱，但它在语义上比`div`对同一事物使用 a 更好。[HTML5 标准定义了许多](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5/HTML5_element_list)新的容器元素，例如`article`、`section`、`header`等等。在某些情况下，您将不得不使用's，但如果您最小化它的使用，那么您的代码将更加语义化。`footer` `div`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-11-13T12:29:29.823

根本区别在于，您可以使用 Bootstrap 为不同的显示尺寸“重排”布局，只需使用媒体查询即可，而无需更改标记。例如，我可以决定在台式机上，我希望您的 4 个 div 位于同一行，因为用户具有高分辨率宽显示屏，但在手机上，我希望在一行上进行 2 次潜水，在下一行进行下一个 div。因此，通过这种方式，我可以使用媒体查询来调整每行中的列数。如果您使用硬编码的 HTML 表格，则很难做到这一点。

话虽如此，我不太喜欢 bootstrap 实现，原因如下：

1.  它具有以像素为单位硬编码的断点。这意味着，随着手机和桌子在显示分辨率方面的进步，您的网站可能会开始在这些设备上显示意想不到的布局。像素数不能很好地代表显示*尺寸*。
2.  它将最大使用的显示区域限制为 1170 像素，这对于拥有漂亮宽屏的用户来说又是一个遗憾，他们实际上可以使用它们来查看应用程序中的更多内容。
3.  Bootstrap 的布局不是源独立的，也就是说，您不能更改在 HTML 中设置的列顺序。然而，这更像是一个迂腐的观点。
4.  默认布局适用于非常小的分辨率，更高分辨率的布局仅在媒体查询触发时触发，考虑到手机将继续具有更好的分辨率，并且迟早您的网站将为过时的移动设备设置默认布局，IMO 是一个糟糕的选择。
5.  Bootstrap 布局并不是真正的“无忧无虑”，因为您必须阅读它们的细则才能看到他们认为不值得支持但*您*可能关心的所有错误和浏览器。例如，如果您针对的是韩国或中国的用户，您会感到惊讶。

因此，并非所有东西都是引导程序中的黄金，而且他们的方法不一定总是最好的（顺便说一句，我在引导程序中鄙视的另一件事是他们对所谓的“jumbotrones”的痴迷——那些浪费在你面前不方便的房地产标头-我希望社区不要开始将其视为“新标准”）。我个人现在使用 CSS 表格布局 ( `display:table`)，它与引导程序具有类似的好处，无需硬编码`<table>`在我的标记中。例如，我仍然可以使用媒体查询根据纵向或横向重新排列行。然而，最重要的好处是我的布局是真正的像素甚至百分比独立。例如，在 3 列布局中，我让内容决定第一列和最后一列应该占用多少空间。没有像素甚至百分比宽度。中心栏占据了所有剩余空间（这对我的应用程序来说是件好事，但对其他人来说可能不是）。此外，我在媒体查询断点中使用了 ems，而 bootstrap 出人意料地没有。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-12T22:54:31.360

我使用 Bootstrap 网格进行页面布局，表格用于表格数据。

我认为 Bootstrap 中的网格，不是开发人员意义上的网格，如 gridview 控件，而是设计页面布局意义上的网格——作为包含页面内容的网格。尽管 Bootstrap 网格也可用于创建包含表格数据的常规网格，正如 deceze 指出的那样，这种网格更适合 HTML 表格 - 在这种情况下仍然可以使用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-23T00:15:54.580

如果您只使用表格，我认为您将错过为移动/平板电脑重新调整文档大小的很多灵活性，而无需为每个设备制作单独的页面。一旦定义了表格结构，您真正可以做的就是放大和缩小。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-11-24T04:00:39.830

虽然这两组标记之间不一定有太大的*语义*差异（因为 Bootstrap 的网格系统使用的类确实是纯粹的表现形式），但一个非常重要的区别是网格系统更加灵活。

例如，让基于表格的布局响应不同的屏幕尺寸是非常困难的。没有办法告诉浏览器在同一行中将一个元素显示在另一个`td`元素的*下方。*`td`而对于这个`div`例子，这很容易做到，*即使*类是“展示性的”，也就是它们定义了页面上元素的相对比例和位置，同样的标记也可以以不同的方式呈现。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-13T18:42:37.063

如果可以的话，我想总结一下我从其他评论中收集到的内容以及我在此页面上经历的链接爆炸：

使用表格的问题不在于网格布局，而是试图用 HTML 而不是 CSS 来表达它。

Bootstrap 允许通过（大部分）纯 CSS 进行网格布局，这就是它可以使用的原因。“大部分”部分的出现是因为您的 HTML 仍会受到布局数据的污染，但更微妙的是：

```
<nav class="span4"> ... </nav>
<article class="span8"> ... </article> 
```

这肯定比旧的表格设计更具语义和可维护性，但“span4”和“span8”仍然是嵌入到我们 HTML 中的显示数据。然而，由于设计永远无法真正与我们的数据（例如，嵌套的 div）分离，因此这是一个合理的代价。

[话虽如此，如果您使用由诸如LESS](http://lesscss.org/)之类的预处理语言提供的一些更现代的 CSS 功能，即使这种耦合也可能被打破。同样的例子：

```
<nav id="secondary-nav"> ... </nav>
<article id="main-content"> ... </article> 
```

再加上以下LESS：

```
#secondary-nav{
    .span4;
    // More styling (padding, etc) if needed
}
#main-content{
    .span8;
} 
```

这将创建完全解耦的 HTML 和样式表，这是理想的，因为 HTML 更干净且更具可读性，并且可以通过更少的 HTML 修改来进行重新设计。但是，这仅在您使用 LESS 或其他一些 CSS 预处理器时才有效，因为 CSS 当前不支持 mixins (AFAIK)。

我们已经在我的工作场所使用 LESS，所以我知道我将推动使用这种类型的解决方案。我非常相信语义 HTML 和数据设计解耦。:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-22T14:49:58.987

基本上 DIV 是 DIV 和表格元素只是表格元素。表的问题通常只是跟踪所有的列和行，因为它最终是一个严格的数据结构。DIV 更加灵活和宽容。

例如，如果您想获取类等于“span4”的四个 DIV，并将它们更改为 2 列宽，您需要做的就是为外部类“行”调整一点 CSS也许还有“span4”类。事实上，在做这样的 DIV 时，我会避免将单个 DIV 称为“span4”或其他一些数字。

我的方法是创建一个称为“rowspan”的父包装器 DIV，内部 DIV 将具有一些通用 ID，例如“单元格”。

```
<div class="rowspan">
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
</div> 
```

例如，每个“单元”类的宽度可以是 100 像素，然后父“行跨度”可以是 400 像素。这相当于连续 4 列。想让它变成 2 列吗？没问题！只需将“rowspan”更改为 200 像素宽。此时，一切都在 CSS 中，因此无需在 DOM 中重新调整页面结构即可轻松完成。

但是有桌子吗？不容易。您基本上必须使用标签重新渲染表格`</tr><tr>`以创建新行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-05T13:11:40.383

带有 table、tr、td 的版本取决于浏览器算法 - 换行、动态宽度、边距、居中等。带有 div 的版本可以更容易地通过 css 和脚本进行调整。

# d3.js - 如何在 nvd3.js multiBarChart 上的轴上设置域和比例

> ID：14461107
> 
> 赞同：13
> 
> 时间：2013-01-22T14:41:04.307
> 
> 标签：d3.js, nvd3.js

在 d3.js 中，您可以设置要使用的 x 轴，`d3.time.scale()`然后设置`x.domain([start_date, end_date])`，它将“填充”任何不在数据中的缺失日期，值为 0。我想对 nvd3.js 做同样的事情`mulitBarChart`。

此代码（可以直接粘贴到[http://nvd3.org/livecode/#codemirrorNav](http://nvd3.org/livecode/#codemirrorNav)中）显示了按年份统计的条形图，2002 年和 2003 年有缺失值。我想将比例设置`d3.time.scale()`为域到数据集的第一年和最后一年，因此缺失的年份会自动添加 0 值。我怎么做？

```
nv.addGraph(function() {
    var chart = nv.models.multiBarChart();

    chart.xAxis
        .tickFormat(function(d){ return d3.time.format('%y')(new Date(d)); });

    chart.yAxis
        .tickFormat(d3.format(',f'));

    chart.reduceXTicks(false);
    chart.showControls(false);

    var data = [{
      'key': 'GB by year',
      'values': [
        {x: new Date().setFullYear('2001'), y: 0.12},
        {x: new Date().setFullYear('2004'), y: 0.03},
        {x: new Date().setFullYear('2005'), y: 0.53},
        {x: new Date().setFullYear('2006'), y: 0.43},
        {x: new Date().setFullYear('2007'), y: 5.5},
        {x: new Date().setFullYear('2008'), y: 9.9},
        {x: new Date().setFullYear('2009'), y: 26.85},
        {x: new Date().setFullYear('2010'), y: 0.03},
        {x: new Date().setFullYear('2011'), y: 0.12}
      ]
    }];        

    d3.select('#chart svg')
        .datum(data)
      .transition().duration(500).call(chart);

    nv.utils.windowResize(chart.update);

    return chart;
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T22:07:22.907

根据上述答案，您可以使用数字 x 值（不是 Date 对象）以及强制 X 范围和指定的 tickValues.... 对于某些类型的图表来执行此操作。

条形图似乎没有这种能力，但是 nvd3.lineCharts 可以满足您的需求。multiBarChart 模型不允许使用 forceX 函数（现在，曾经吗？）。

解决您的问题的方法是填写 0 或使用顺序图表类型（例如 lineChart）

```
nv.addGraph(function() {
  var chart = nv.models.lineChart()
      .forceX(2001,2011);

  var tickMarks = [2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011]

  chart.xAxis
      .tickValues(tickMarks)
      .tickFormat(function(d){ return d });

  chart.yAxis
      .tickFormat(d3.format(',f'));

  var data = [{
    'key': 'GB by year',
    'values': [
      {x: 2001, y: 0.12},
      {x: 2004, y: 0.03},
      {x: 2005, y: 0.53},
      {x: 2006, y: 0.43},
      {x: 2007, y: 5.5},
      {x: 2008, y: 9.9},
      {x: 2009, y: 26.85},
      {x: 2010, y: 0.03},
      {x: 2011, y: 0.12}
    ]
  }];        

  d3.select('#chart svg')
    .datum(data)
    .transition().duration(500).call(chart);

  nv.utils.windowResize(chart1.update);

  return chart;
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T11:54:39.673

您可以通过 2 种方式执行此操作：

A）您要么重写 nvd3 的轴组件以使用 d3.time.scale() /为此用例制作另一个轴组件...

或者最简单的方法：

B）您使用轴的自定义值。首先，您使用 + 运算符 ( +(date) ) 以毫秒为单位获取值。d3 中有一个 tickValues 函数，它允许您为刻度传递自定义值。要强制 X 刻度，您可以使用 scatter 中的 forceX() 方法（我假设您已经知道这一点）并且您编写了一个简单的函数为刻度采用自定义值....因此，如果您强制刻度具有 2002 年 1 月 1 日至 2012 年 12 月 31 日之间的值，然后决定有 4 个刻度，您可以直接使用刻度或刻度值...

所以它是这样的（添加类似于 multiBarChart.js 文件的内容）：

```
 lines.forceX(minValue, maxValue) //where minValue and maxValue are the values
  //converted to ms already after you did +(date)

  //then you just rewrite the ticks - if you want a custom number of ticks you can do it like this

  //numberOfTicks is a method I added to the axis component (axis.js) to give the number of ticks the user would like to have

  //x.domain() now contains the forced values instead of the values you initially used..
  var maxTicks = xAxis.numberOfTicks()-1, xMin = x.domain()[0], xMax = x.domain()[1], 
      xDiff = (xMax - xMin)/maxTicks, tickInterval = [];

  tickInterval[0] = xMin;

  for(i=1; i<maxTicks; i++){
    var current = xMin + i*xDiff;
    tickInterval[i] = current;
  }

  tickInterval[maxTicks] = xMax;

  //tickInterval already contains the values you want to pass to the tickValues function
  xAxis.tickValues(tickInterval); 
```

希望这会有所帮助...我知道这是 hack，但它适用于我的情况 :) 当然，如果您已经将日期格式化为显示为年份，您将在显示刻度时获得年份的值 :)

这就是我为线条所做的。对于 multiBarChart，您需要添加一个额外的步骤：您需要处理 reduceTicks 功能（将其设置为 false，删除那部分代码，随心所欲地使用它......）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-07T20:17:56.197

确实没有必要插入您的值。您实际上可以修改大多数 nvd3 图表的比例，包括 multiBarCharts，尽管需要做一些额外的工作才能使其正常工作。

您需要做的基本事情是：

```
var xScale = d3.time.scale();
chart.multibar.xScale(xScale); 
```

那应该就行了！除非它没有，因为 multiBarChart 假定 xScale 是`d3.scale.ordinal()`. 因此，您需要通过设置`xScale.rangeBands`and来伪装自己是那种类型`xScale.rangeBand`：

```
xScale.rangeBands = xScale.range;
xScale.rangeBand = function() { return (1 - chart.groupSpacing()) * SOME_VALUE }; 
```

现在的问题是获取 SOME_VALUE。这需要等于单个条的宽度，这取决于两件事：整个图表的宽度和可能存在的刻度数，*包括*数据中缺少的零值。

以下是 nvd3 如何在内部获取可用宽度：

```
var container = d3.select('#chart svg'),
    availableWidth = (chart.width() || parseInt(container.style('width')) || 960) - chart.margin().left - chart.margin().right; 
```

但是，如果窗口调整大小，您将需要刷新此值：

```
nv.utils.windowResize(function() {
    availableWidth = (chart.width() || parseInt(container.style('width')) || 960) - chart.margin().left - chart.margin().right;
}); 
```

至于获取滴答数，这完全取决于您的数据。在您的情况下，将有 11 个刻度：从 2001 年到 2011 年每年。所以我们将继续这样做。因此，整个比例定义如下所示：

```
var container = d3.select('#chart svg'),
    availableWidth,
    numTicks = 11,
    xScale = d3.time.scale();

function updateAvailableWidth() {
    availableWidth = (chart.width() || parseInt(container.style('width')) || 960) - chart.margin().left - chart.margin().right;
}
updateAvailableWidth();
nv.utils.windowResize(updateAvailableWidth);

xScale.rangeBands = xScale.range;
xScale.rangeBand = function() { return (1 - chart.groupSpacing()) * availableWidth / numTicks; };

chart.multibar.xScale(xScale); 
```

最后，您需要手动设置 xDomain。如果你用它以前的序数尺度来做这个，它会失败，但是使用线性时间尺度它会很好地工作：

```
chart.xDomain([new Date().setFullYear('2001'), new Date().setFullYear('2011')]); 
```

综上所述，这是您的示例代码（可粘贴到[http://nvd3.org/livecode/#codemirrorNav](http://nvd3.org/livecode/#codemirrorNav)中）：

```
nv.addGraph(function() {
    var chart = nv.models.multiBarChart(),
        container = d3.select('#chart svg'),
        availableWidth,
        numTicks = 11,
        xScale = d3.time.scale();

    function updateAvailableWidth() {
        availableWidth = (chart.width() || parseInt(container.style('width')) || 960) - chart.margin().left - chart.margin().right;
    }
    updateAvailableWidth();
    nv.utils.windowResize(updateAvailableWidth);

    xScale.rangeBands = xScale.range;
    xScale.rangeBand = function() { return (1 - chart.groupSpacing()) * availableWidth / numTicks; };

    chart.multibar.xScale(xScale);
    chart.xDomain([new Date().setFullYear('2001'), new Date().setFullYear('2011')]);

    chart.xAxis
        .tickFormat(function(d){ return d3.time.format('%y')(new Date(d)); });

    chart.yAxis
        .tickFormat(d3.format(',f'));

    chart.reduceXTicks(false);
    chart.showControls(false);

    var data = [{
      'key': 'GB by year',
      'values': [
        {x: new Date().setFullYear('2001'), y: 0.12},
        {x: new Date().setFullYear('2004'), y: 0.03},
        {x: new Date().setFullYear('2005'), y: 0.53},
        {x: new Date().setFullYear('2006'), y: 0.43},
        {x: new Date().setFullYear('2007'), y: 5.5},
        {x: new Date().setFullYear('2008'), y: 9.9},
        {x: new Date().setFullYear('2009'), y: 26.85},
        {x: new Date().setFullYear('2010'), y: 0.03},
        {x: new Date().setFullYear('2011'), y: 0.12}
      ]
    }];        

    container.datum(data).transition().duration(500).call(chart);

    nv.utils.windowResize(chart.update);

    return chart;
}); 
```

# asp.net - 查询两个数据表asp.net

> ID：14461108
> 
> 赞同：1
> 
> 时间：2013-01-22T14:41:15.500
> 
> 标签：asp.net, sql, linq, linq-to-objects

我有 2 个表，每个表都有相同的字段，基本上包含

**table1.ItemCode table1.Qty**

**table2.ItemCode table2.Qty**

我正在通过以下命令从 sql 查询这两个表

```
SELECT  c.Code ,
        t1.Code ,
        t1.Qty ,
        t2.Code ,
        t2.Qty
FROM    ( SELECT    Code
          FROM      dbo.Table1
          UNION
          SELECT    Code
          FROM      dbo.Table2
        ) c
        LEFT OUTER JOIN dbo.Table1 t1 ON c.Code = t1.Code
        LEFT OUTER JOIN dbo.Table2 t2 ON c.Code = t2.Code
WHERE   t1.Code IS NULL
        OR t2.Code IS NULL
        OR t1.Qty <> t2.Qty 
```

此查询为我提供了两个表中存在的项目代码

只有不同数量的

**例如，如果项目：x 有 2 个并且在第二个表中项目 x 有 4 个，则该项目将显示为：x 2 4**

**但是，如果项目 x 的数量为 2，并且在第二个表中的数量也相同，则该项目将不会出现在结果中**

问题是在我的情况下，这两个表是我的 asp.net中的两个**数据表**

项目

我需要在这两个数据表上执行相同的查询

如何做到这一点，或者他们有任何其他可能的解决方案来从这两个中获得我的结果

**数据表**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-04T08:58:19.603

这很简单。

```
DataTable table1; 
DataTable table2;

//Initialize your DataTables here

var result = (from row1 in table1.AsEnumerable()
                join row2 in dataTable2.AsEnumerable() on row1["Code"] equals row2["Code"]
                where !object.Equals(row1["Qty"], row2["Qty"])
                select new { Code = row1["Code"], table1Qty = row1["Qty"], table2Qty = row2["Qty"] })
                .ToArray(); 
```

两个表中的行在 Code 上连接。

```
join row2 in dataTable2.AsEnumerable() on row1["Code"] 
```

随后，过滤具有相同数量值的行

```
where !object.Equals(row1["Qty"], row2["Qty"]) 
```

# javascript - Brightcove Video Manager API，按 ID 获取播放列表 java 脚本

> ID：14461109
> 
> 赞同：0
> 
> 时间：2013-01-22T14:41:15.143
> 
> 标签：javascript, api, typeerror, brightcove

我对 java 脚本的整个想法很陌生，我真的很想找到解决我的问题的方法。我已经放弃了 brightcove 用于视频管理器的模板，该模板使用“获取所有播放列表 URL”调用。我试图只制作一个包含几个特定播放列表的菜单，并且在这样做时会出现一个又一个错误，无论我改变什么。截至目前，我的主要错误是“未捕获的类型错误：无法读取未定义的属性'长度'”。任何帮助将不胜感激。谢谢你。

```
//Get PlayList by ID

function getPlaylistLindyURL(){

loadStart();
paging.playlistbyid = (paging.currentFunction == getPlaylistLindyURL)?paging.generic:paging.playlistbyid;
paging.currentFunction = getPlaylistLindyURL;
return apiLocation +
'?command=find_playlist_by_id&playlist_id=1990786315001&callback=showPlaylistByIDCallBack'
    + '&get_item_count=true&page_size=' + paging.size + '&page_number='+paging.playlistbyid
    +'&token='+readToken;         

//Playlist by ID callback

function showPlaylistByIDCallBack(o){

if(null == o.error){
    oCurrentMainVideoList = o.items;
    buildMAinVideoList();
    doPageList(o.total_count, "Videos");
}else{
    var message = (null!=o.error.message)?o.error.message:o.error;
    alert("Server Error: "+ message);
}
loadEnd();
}

//For PlayList by ID

function buildMAinVideoList() {

//Wipe out the old results
$("#tbData").empty();

// Display video count
document.getElementById('divVideoCount').innerHTML = oCurrentMainVideoList.length + "Video";
document.getElementById('nameCol').innerHTML = "Video Name";
document.getElementById('headTitle').innerHTML = "All Videos";
document.getElementById('search').value = "Search Videos";
document.getElementById('tdMeta').style.display = "none";
document.getElementById('searchDiv').style.display = "none";
document.getElementById('checkToggle').style.display = "none";
$("span[name=buttonRow]").hide();
$(":button[name=delFromPlstButton]").hide();

//For each retrieved video, add a row to the table
var modDate = new Date();
$.each(oCurrentMainVideoList, function(i,n){
    modDate.setTime(n.lastModifiedDate);
    $("#tbData").append(
        "<tr style=\"cursor:pointer;\" id=\""+(i)+"\"> \
        <td>\
            <input type=\"checkbox\" value=\""+(i)+"\" id=\""+(i)+"\" onclick=\"checkCheck()\">\
        </td><td>"
            +n.name +
        "</td><td>"
            +(modDate.getMonth()+1)+"/"+modDate.getDate()+"/"+modDate.getFullYear()+"\
        </td><td>"
            +n.id+
        "</td><td>"
            +((n.referenceId)?n.referenceId:'')+
        "</td></tr>"
    ).children("tr").bind('click', function(){
        showMetaData(this.id);
    })
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:08:16.130

从您发布的代码看来，oCurrentMainVideoList 似乎没有在任何地方声明，所以这可能就是它说它未定义的原因......

如果你将它定义为一个全局变量，从它的外观来看，它必须是，确保你已经为它设置了一个值。但是你不应该使用全局变量，为你的函数创建一个命名空间，它有助于范围控制。

如果您想学习一些 JS 最佳实践，您应该观看来自 TekPub 的视频： [JS_UpToSpeed](http://tekpub.com/products/js_uptospeed)

在发布之前，您还应该花时间查看您的代码并使其更具可读性，缺少缩进使代码难以阅读，并且 buildMAinVideoList 中有多个大写字母。

# php - 计算页面点击和重定向？

> ID：14461110
> 
> 赞同：0
> 
> 时间：2013-01-22T14:41:18.013
> 
> 标签：php, session, redirect, count

我有这段代码，我试图用它来计算页面在将用户重定向到另一个页面之前的点击次数。

这个想法是非登录用户在被重定向到注册页面之前只能访问 profile.php 6 次，但它也为登录用户执行此操作，我希望登录用户能够访问 profile.php他们想要多少次。

有人可以告诉我哪里出错了。

例如，如果 session 为空，则将页面访问限制为 6 次，但如果 session = 已登录，则允许无限制访问。

```
<?
!session_id() ? session_start() : null;

if(!isset($_SESSION['logged_in']) && empty($_SESSION['logged_in'])){
    verify_profile_visit_limit();
}

function verify_profile_visit_limit(){
    $free_profiles = array(99999,99998,99997,99996,99995,99994,99993);

    if(in_array($_GET["id"], $free_profiles)) return;

    if(! isset($_SESSION["page_access_count"])){
        $_SESSION["page_access_count"] = 1;
    }

    $_SESSION["page_access_count"]++;

    if($_SESSION["page_access_count"] > 6){
        header("Location: limit.php");
        exit();
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:44:27.957

问题出在这里：

`if(!isset($_SESSION['logged_in']) && empty($_SESSION['logged_in']))`

`$_SESSION['logged_in']`永远*不能不设置*AND为*空*。您需要在`OR`此处使用运算符。

# selenium - Selenium Grid 2 Node Json 配置文件可以指向多个集线器/服务器吗？

> ID：14461111
> 
> 赞同：3
> 
> 时间：2013-01-22T14:41:19.427
> 
> 标签：selenium, configuration, automation, grid, webdriver

我想知道是否有一种方法可以使用 json 配置文件将单个 Selenium Grid 2 节点注册到多个集线器。

我在想这样的事情：

```
{
"capabilities":
    [
            {
                    "browserName":"firefox",
                    "maxInstances":5,
                    "platform":"LINUX"
            },
            {
                    "browserName":"chrome",
                    "maxInstances":5,
                    "platform":"LINUX"
            }
    ],
"configuration":
    {
            "cleanUpCycle":2000,
            "timeout":30000,
            "maxSession":5,
            "url_hub_1":"http://10.254.254.40:4444/wd/hub",
            "url_hub_2":"http://10.254.254.40:4444/wd/hub",
            "url_hub_3":"http://10.254.254.40:4444/wd/hub",
            "url_hub_4":"http://10.254.254.40:4444/wd/hub",

    }
} 
```

对此的任何帮助将不胜感激。问候！

# linux - 命令在终端提示符下可用，但无处可寻

> ID：14461113
> 
> 赞同：1
> 
> 时间：2013-01-22T14:41:46.107
> 
> 标签：linux, filesystems, command, find, locate

这令人费解。我可以在终端提示符下使用**模块**命令，但是找不到可执行文件在文件系统中的位置！我做了以下三个搜索：

1-*哪个模块*返回“...中没有模块”，

2-在 PATH 变量的 bin/ 目录下搜索*模块...什么都没有，*

3-*定位模块| grep -e "/module$"* ...什么都没有。

这些搜索都没有给我位置！请给点建议好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:57:17.777

**模块**是否可能设置为别名？你可以试试这个：

```
type -a module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:45:35.463

还有一个建议：

```
find / -name "module*" 
```

作为根

# .net - 是否可以在 .net 中为 windows XP 创建桌面小工具？

> ID：14461117
> 
> 赞同：1
> 
> 时间：2013-01-22T14:41:56.497
> 
> 标签：.net, windows-xp, windows-desktop-gadgets

如果可以在 .net 中为 windows XP 创建桌面小工具，有人可以抛出一些灯吗？

谢谢，JP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:44:45.027

据我所知，Windows 小工具是基于 html/javascript 的，所以除非您谈论的是与小工具通信的服务器端组件，否则恐怕不是。

此外，正如评论者指出的那样，将它们放在 XP 上需要一种解决方法：

[http://www.guidingtech.com/4550/install-desktop-gadgets-windows-xp/](http://www.guidingtech.com/4550/install-desktop-gadgets-windows-xp/)

# android - 在 Android 上写入 SD 卡存储，根本不创建文件。为什么？

> ID：14461118
> 
> 赞同：0
> 
> 时间：2013-01-22T14:42:02.517
> 
> 标签：android, database

我一直在尝试在我的 Android 应用程序中写入**sdcard 存储（目标 API 11）**

我已经成功地在以下名为“BPAExp_data”的代码中创建了目录，但它根本没有创建新文件。我很困惑为什么，因为它没有出现在 logcat 中！！。

这是我的 onCreate() 方法

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_text_logger);
    String data = "asdfghjkl.."

    //The filename of the log file
    filename = getIntent().getExtras().getString("Filename");

    //Save Test data button
    Button saveData = (Button)findViewById(R.id.saveDataButton);
    saveData.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
        // Save Data in file and go back to home screen
        addtoKeyLogFile(data);              

        //Make intent for the Main Activity screen
        Intent main_intent = new Intent(TextLogger.this, MainActivity.class);
        startActivity(main_intent);
        }
    }); 
```

这是我称为 addKeyLogFile() 的方法

```
 public void addtoKeyLogFile(String data){       
    FileOutputStream f = null;
    File data_file;
    try {
        File sdCard = Environment.getExternalStorageDirectory();
        File dir = new File (sdCard.getAbsolutePath() + "/BPAExp_data");
        dir.mkdirs();
        data_file = new File(dir, filename);
        f = new FileOutputStream(data_file);
        // if file doesn't exists, then create it
        if (!data_file.exists()) {
            data_file.createNewFile();
            Toast.makeText(TextLogger.this, "File GOT CREATED!", Toast.LENGTH_SHORT).show();
        }

        // get the content in bytes
        byte[] dataInBytes = data.getBytes();

        f.write(dataInBytes);
        f.flush();
        f.close();

    } catch (FileNotFoundException e) {
        e.printStackTrace();
        Log.d("TextLogger onCreate: ", e.getMessage());
    } catch (IOException e) {
        e.printStackTrace();
        Log.d("TextLogger onCreate: ", e.getMessage());
    } finally {
        try {
            if (f != null) {
                f.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

我发现问题出在或附近

```
 f = new FileOutputStream(data_file); 
```

因为当我在它之后放置一个 toast 消息时，它永远不会执行但是如果我在它之前放置一个 toast，它就会被执行！之后的意图也非常好！但我不明白，为什么它不起作用？

感谢任何人都可以提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:45:00.910

文件有多个构造函数。一个以 File 和 String 作为参数：

```
File dir = new File (sdCard , "BPAExp_data");
dir.mkdirs();
data_file = new File(dir, filename); 
```

文件名的价值是什么？

删除这些行：

```
 if (!data_file.exists()) {
          data_file.createNewFile();
          Toast.makeText(TextLogger.this, "File GOT CREATED!", Toast.LENGTH_SHORT).show();
   } 
```

当您停止写入文件时，将创建文件。

```
 f.close(); 
```

你叫它两次。仅将其保留在 finally 块内

总而言之，你确定你有东西要写吗？

```
byte[] dataInBytes = data.getBytes(); 
```

的长度是`dataInBytes > 0`？

# java - 未装饰的按钮：带有 MouseListener 的 JButton 或 JLabel？

> ID：14461119
> 
> 赞同：2
> 
> 时间：2013-01-22T14:42:05.073
> 
> 标签：java, swing, jbutton, jlabel

我想实现一个不显示边框或其他任何内容的按钮，除了当您将鼠标悬停在其上时会更改的图像。单击图像（显示悬停图像）将执行一些代码。

我还想把所有这些放在一个单独的类中，这样我就有了一个可重用的组件。

扩展 JButton 为我提供了 addActionListener() 等方法。但是使用 setAction() 方法会删除我在构造函数中设置的图像。所以它不是无懈可击的，因为我不能将 Action 与此类结合使用。而且我当然不想覆盖像 setAction() 这样的方法。

```
public class JHoverLabel extends JButton {

private final Icon normal;
private final Icon hovered;

public JHoverLabel (Icon normal, Icon hovered) {
    this.normal = normal;
    this.hovered = hovered;

    setIcon(normal);

    setFocusPainted(false);
    setMargin(new Insets(0, 0, 0, 0));
    setContentAreaFilled(false);
    setBorderPainted(false);
    setOpaque(false);

    addMouseListener(new HoverListener());
}

private class HoverListener implements MouseListener {

    @Override
    public void mouseClicked(MouseEvent e) {}

    @Override
    public void mouseEntered(MouseEvent e) {
        setIcon(hovered);
    }

    @Override
    public void mouseExited(MouseEvent e) {
        setIcon(normal);
    }

    @Override
    public void mousePressed(MouseEvent e) {}

    @Override
    public void mouseReleased(MouseEvent e) {}        
} 
} 
```

扩展 JLabel 似乎可以与 MouseListener 结合使用，但我觉得在这里使用了错误的组件，因为“点击我做某事”基本上将我带到了一个 JButton。

那我应该用什么？JLabel 还是 JButton？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:48:00.733

使用[JButton.setXxxIcon的实现方法](https://stackoverflow.com/a/7919280/714968)

```
button.setRolloverIcon((Icon));
button.setPressedIcon(Icon);
button.setDisabledIcon(Icon); 
```

而不是`MouseListener`你可以实现[ButtonModel](https://stackoverflow.com/a/5755124/714968)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:45:06.897

> 那我应该用什么？JLabel 还是 JButton？

使用`JButton`. 您的鼠标挑战用户会感谢您。

# c++ - 静态类成员

> ID：14461120
> 
> 赞同：1
> 
> 时间：2013-01-22T14:42:06.310
> 
> 标签：c++

下面的代码有什么问题？最新版本的 g++ 和 clang 都报错。我确定我在这里遗漏了一些基本的东西。

```
#include <iostream>

struct Z
{
  static const int mysize = 10; 
};

Z f2();

int main()
{
    std::cout << f2()::mysize << std::endl;
} 
```

这里的动机是能够使用以下代码使用模板找出数组的大小。我知道有很多方法，但偶然发现了这个想法。

```
template<int N> struct S
{
    enum { mysize = N };
};

template<class T, int N> S<N> f(T (&)[N]);

int main()
{
    char buf[10];
    std::cout << f(buf)::mysize << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:43:56.510

`f2()`返回一个值，而不是类型。您需要`.`在返回值上使用运算符而不是`::`

运算符要求在`::`左侧命名类型，同时`.`允许命名值。您的表达式`f2()`没有命名类型，因此它不能与`::`.

作为旁注，在问题中提供更多细节，我们可能能够解决您的实际问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:50:33.093

您的程序包含两个错误：

1.  您正在使用`::`运算符来访问*对象*的成员。使用`operator .`("dot") 代替；
2.  您声明函数`f2()`并调用它而不定义它（这会给您一个链接器错误）。

此外，由于`static`成员变量在类的所有实例之间共享（`Z`在这种情况下），您不需要对象来访问它；

以下是修复程序的方法：

```
#include <iostream>

struct Z
{
    static const int mysize = 10;
};

Z f2() { return Z(); }

int main()
{
    // Don't need an object to access a static variable...
    std::cout << Z::mysize << std::endl;

    // ...but if you really want to, do it this way...
    std::cout << f2().mysize << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:05:49.830

为什么不使用这种方式通过模板找出数组的大小：

```
#include <iostream>

template<int N> struct S
{
    enum { mysize = N };
};

template<class T, int N> int f1(T (&)[N])
{
        return N;
}

int main()
{
    char buf[10];
    std::cout << f1(buf) << std::endl;

} 
```

而这个更接近您的变体：

```
template<class T, int N> S<N> f(T (&)[N])
{
        S<N> foo;
        return foo;
}

int main()
{
    char buf[10];
    std::cout << f(buf).mysize << std::endl;
} 
```

无论如何，您将需要返回一个对象`f`并访问它的成员 by `.`，而不是 by `::`。但是第二个变体更可能会更慢，因为第一个变体是完全编译时的，但是在第二个变体中，编译器可能会错过优化并且不会优化运行时创建的`foo`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-22T14:46:20.673

我认为您需要`const int Z::mysize;`在类声明之后添加。

# php - 在 URL 中传递多个变量

> ID：14461121
> 
> 赞同：0
> 
> 时间：2013-01-22T14:42:08.150
> 
> 标签：php, html, codeigniter, codeigniter-2

我需要这方面的帮助。我通过一个 html 链接传递两个变量，如下所示：

```
<?php
//loop through the array
foreach ($precost1 as $value): ?>
<ul><li><a name="farmname" href="<?php echo base_url().'uploads/farms/'.$farm;'/'.$value->farmcycle;?>"><?php echo $value->cyclename;?></a></li></ul>
<?php endforeach; ?> 
```

但是该链接没有按预期工作，它忽略了第二个变量 $value->farmcycle 对正确语法有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:45:53.603

分号结束 php 语句，使用 .(dot) 作为 concat 运算符

```
foreach ($precost1 as $value) {
  echo '<ul><li><a name="farmname" href="'.base_url().'uploads/farms/'.$farm.'/'.$value->farmcycle.'">'.$value->cyclename.'</a></li></ul>';    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:46:31.387

在`$farm`你有一个`;`并且忘记连接之后`.`

```
<ul><li><a name="farmname" href="<?php echo base_url().'uploads/farms/'.$farm .'/'.$value->farmcycle;?>"><?php echo $value->cyclename;?></a></li></ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:46:50.667

尝试这个

```
<?php
//loop through a list of farmnames and create link for each listed farmname
foreach ($precost1 as $value): ?>
    <ul><li><a name="farmname" href="<?php echo base_url().'uploads/farms/'.$farm.'/'.$value->farmcycle;?>"><?php echo $value->cyclename;?></a></li></ul>

<?php endforeach?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T14:44:43.153

.$农场;'/'

分号关闭该行，尝试使用 . 反而。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T15:17:32.433

另外，您确定要`<ul>`为每个新项目创建一个标签吗？

尝试将其放在 foreach 之外，因此您只是`<li>`为每个项目创建一个。

# java - 在活动中显示对象

> ID：14461125
> 
> 赞同：0
> 
> 时间：2013-01-22T14:42:18.353
> 
> 标签：java, android, object, android-activity

我刚开始 Android 开发，所以这可能是一个非常简单的问题。

我现在写的是一个测验应用程序。所以我写了这门课`Frage`，现在我想在一个活动中显示问题和三个答案。每个问题都有一个`id`，所以当我按下一个按钮时，我想显示下一个问题。

我想我需要一个`TextView`和三个`buttons`答案。但是如何在视图中显示我的对象的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:45:34.963

您可以使用该方法[`setText(CharSequence)`](https://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)来显示您的项目。由于从方法`Button`继承在这两种情况下的工作方式相同。`TextView`

用法看起来像这样：

```
myButton.setText(myObject.answerOne); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:51:22.687

对象的 getter 和 setter 方法将为您提供所需的值。就对象而言，您应该覆盖

```
toString() 
```

方法。

# python - XML解析以使用python使用minidom获取描述

> ID：14461128
> 
> 赞同：0
> 
> 时间：2013-01-22T14:42:26.827
> 
> 标签：python, xml, xml-parsing

请建议我需要为以下代码添加哪些附加代码，以便我可以解析以下 XML 代码以获取描述。

```
<SquishReport version="2.1">
    <test name="HMI_testing">
        <prolog time="2013-01-22T18:59:43+05:30"/>
        <test name="tst_Setup_menu_2">
            <prolog time="2013-01-22T18:59:43+05:30"/>
            <verification line="7" type="" file="D:/Squish/HMI_testing/tst_Setup_menu_2/test.py" name="ECG is enabled">
                <result type="PASS" time="2013-01-22T18:59:45+05:30">
                    <description>Comparison</description>
                    <description type="DETAILED">'1' and 'True' are equal</description>
                    <description type="DETAILED">ECG is enabled</description>
                </result>
            </verification>
            <verification line="9" type="" file="D:/Squish/HMI_testing/tst_Setup_menu_2/test.py" name="ECG is enabled">
                <result type="PASS" time="2013-01-22T18:59:45+05:30">
                    <description>Comparison</description>
                    <description type="DETAILED">'1' and 'True' are equal</description>
                    <description type="DETAILED">ECG is enabled</description>
                </result>
            </verification>
            <verification line="11" type="" file="D:/Squish/HMI_testing/tst_Setup_menu_2/test.py" name="P1 is disabled">
                <result type="PASS" time="2013-01-22T18:59:45+05:30">
                    <description>Comparison</description>
                    <description type="DETAILED">'0' and 'False' are equal</description>
                    <description type="DETAILED">P1 is disabled</description>
                </result>
            </verification>
            <verification line="13" type="" file="D:/Squish/HMI_testing/tst_Setup_menu_2/test.py" name="P2 is disabled">
                <result type="PASS" time="2013-01-22T18:59:45+05:30">
                    <description>Comparison</description>
                    <description type="DETAILED">'0' and 'False' are equal</description>
                    <description type="DETAILED">P2 is disabled</description>
                </result>
            </verification>
            <verification line="15" type="" file="D:/Squish/HMI_testing/tst_Setup_menu_2/test.py" name="SPO2 is enabled">
                <result type="PASS" time="2013-01-22T18:59:45+05:30">
                    <description>Comparison</description>
                    <description type="DETAILED">'1' and 'True' are equal</description>
                    <description type="DETAILED">SPO2 is enabled</description>
                </result>
            </verification>
            <verification line="17" type="" file="D:/Squish/HMI_testing/tst_Setup_menu_2/test.py" name="CO2 is disabled">
                <result type="PASS" time="2013-01-22T18:59:45+05:30">
                    <description>Comparison</description>
                    <description type="DETAILED">'0' and 'False' are equal</description>
                    <description type="DETAILED">CO2 is disabled</description>
                </result>
            </verification>
            <verification line="19" type="" file="D:/Squish/HMI_testing/tst_Setup_menu_2/test.py" name="RESP is disabled">
                <result type="PASS" time="2013-01-22T18:59:45+05:30">
                    <description>Comparison</description>
                    <description type="DETAILED">'0' and 'False' are equal</description>
                    <description type="DETAILED">RESP is disabled</description>
                </result>
            </verification>
            <verification line="21" type="" file="D:/Squish/HMI_testing/tst_Setup_menu_2/test.py" name="TEMP is disabled">
                <result type="PASS" time="2013-01-22T18:59:45+05:30">
                    <description>Comparison</description>
                    <description type="DETAILED">'0' and 'False' are equal</description>
                    <description type="DETAILED">TEMP is disabled</description>
                </result>
            </verification>
            <epilog time="2013-01-22T18:59:45+05:30"/>
        </test>
        <epilog time="2013-01-22T18:59:45+05:30"/>
    </test>
</SquishReport> 
```

我需要打印的是 ECG 已启用，NIBP 已启用等。

我使用的代码添加在下面。由于某些依赖性，我需要更新相同的代码。代码中提到的打印处需要添加代码（这里需要添加代码）

```
import sys
import xml.dom.minidom as XY

file = open("Result_Summary.txt", "w")
tree = XY.parse('Results-On-2013-01-22_0659.xml')
#print (str(sys.argv[1]))
#tree = XY.parse(sys.argv[1])

Test_name = tree.getElementsByTagName('test')
count_testname =0
    file.write(' -----------------------------------------------------------------------------------------------------\n\n')
file.write('\tTest Name \t\t No Of PASS\t\t No Of FAIL\t\t\t Description\t\t \n')
file.write(' -----------------------------------------------------------------------------------------------------\n\n')
for my_Test_name in Test_name:
    count_testname = count_testname+1
    my_Test_name_final = my_Test_name.getAttribute('name')
    if(count_testname > 1):
        #print(my_Test_name_final)
        file.write(my_Test_name_final)
        file.write('\t\t\t')
        my_Test_status = my_Test_name.getElementsByTagName('result')
        passcount = 0
        failcount = 0
        for my_Test_status_1 in my_Test_status:
            my_Test_description = my_Test_name.getElementsByTagName('description')
            for my_Test_description_1 in my_Test_description:
                my_Test_description_final = my_Test_description_1.getAttribute('type')
                print(Need to add the code here)
                my_Test_status_final = my_Test_status_1.getAttribute('type')
                if(my_Test_status_final == 'PASS'):
                   passcount = passcount+1
                if(my_Test_status_final == 'FAIL'):
                   failcount = failcount+1
            #print(str(my_Test_status_final))
        file.write(str(passcount))
        #print(passcount)
        file.write('\t\t\t')
        file.write(str(failcount)) 
```

前任

```
pected result

tst_Setup_menu_2     8        0        ECG Enabled
                                       p1 Enabled
                                       P2 Enabled etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:57:48.863

扩展我[之前的回答](https://stackoverflow.com/questions/14424426/how-to-parse-xml-using-python/14424570#14424570)，请务必使用 ElementTree API 来完成此类任务：

```
from xml.etree import ElementTree as ET

tree = ET.parse(r'D:\Squish\squish results\Results-On-2013-01-18_0241 PM.xml')

with open("Result_Summary.txt", "w") as output:
    output.write(' {} \n\n'.format('-' * 101))
    output.write('\tTest Name \t\t No Of PASS\t\t No Of FAIL\t\t\t Description\t\t \n')
    output.write(' {} \n\n'.format('-' * 101))

    # Find all <test> elements with a <verification> child:
    for test in tree.findall('.//test[verification]'):
        # Collect passed and failed counts
        passed = len(test.findall(".//result[@type='PASS']"))
        failed = len(test.findall(".//result[@type='FAIL']"))
        # Collect all the *last* <description> elements of type DETAILED
        descriptions = test.findall(".//result/description[@type='DETAILED'][last()]")
        # write a line of information to the file, including first desc
        output.write('{0}\t\t\t{1}\t\t\t{2}\t\t\t{3}\n'.format(
            test.attrib['name'], passed, failed, descriptions[0].text))
        # write remaining descriptions
        for desc in descriptions[1:]:
            output.write('\t\t\t\t\t\t\t\t\t{0}\n'.format(desc.text)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:24:21.513

下面查找结果节点，然后查找其中包含的描述。这可以防止选择不正确的描述节点

```
import xml.dom.minidom
# str = your_string_from_the_question

doc = xml.dom.minidom.parseString(str)
for result in doc.getElementsByTagName("result"):
    for description in result.getElementsByTagName("description"):
        print description.firstChild.data 
```

给

```
Comparison
'1' and 'True' are equal
ECG is enabled
.... 
```

getElementsByName 方法返回节点列表（因此循环）。该行`result.getElementsByTagName("description")`返回节点`<description>Comparison</description>`。文本“比较”是 XML 中的文本节点，因此您必须使用 firstChild（获取节点）和数据引用它以获取文本

[编辑]

如果您需要第三个描述（并且您知道它将永远是第三个），您可以这样做（未经测试）

```
doc = xml.dom.minidom.parseString(str)
for result in doc.getElementsByTagName("result"):
    description_list = result.getElementsByTagName("description")
    if len(description_list.length >= 3):
        description[2].firstChild.data 
```

# c - 功能原型的优点

> ID：14461130
> 
> 赞同：4
> 
> 时间：2013-01-22T14:42:36.803
> 
> 标签：c, function-prototypes

在网上查了半个小时，找不到任何关于函数原型的优点的合理讨论。

我在 Java/Android 中管理，并且正在开始 C 课程。与我之前的经验相比，原型制作看起来很麻烦，我想知道它在 2013 年仍然存在的原因。

我知道里奇和他的朋友们的生活更加艰难。但是，今天可以编写一个编译器，它会在第一遍中生成一个函数列表，然后使用该函数列表执行其通常的操作，因为当前编译器将使用头文件。

仅仅因为向后兼容性，它可能也不能持续存在。根据显示的代码，创建一个可以在当前操作模式和我刚刚描述的假设的新模式之间切换的编译器是可行的。

如果原型设计持续存在，那么它必须引起程序员的兴趣，而不是编译器程序员的兴趣。我是对还是错 - 我在哪里可以找到关于功能原型设计与无原型设计优势的合理讨论？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T14:47:27.040

你忘记了在 C 中你可以调用一个*你没有源代码*的函数。

C 支持代码的二进制分发，这在（商业）库中很常见。

您将获得一个声明 API（所有函数和数据类型）和 .lib（或您的平台使用的任何平台）文件中的代码的标头。这通常是所有 C 标准库的情况。当然，您并不总是能够获得编译器供应商库的源代码，但您仍然必须能够调用这些函数。

为此，C 编译器在处理您的代码时必须具有声明，这样它才能为调用生成正确的参数，当然也可以正确处理任何返回值。

仅仅依靠你的来源是不够的，因为如果你这样做了

```
GRAPHICSAPI_SetColorRGB(1, 1, 1); 
```

但实际的声明是：

```
void GRAPHICSAPI_SetColorRGB(double red, double green, double blue); 
```

如果没有原型，编译器无法神奇地将您的`int`参数转换为。`double`当然，拥有原型可以对调用是否有意义进行错误检查，这是非常有价值的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:47:45.417

关于让编译器首先查看所有源文件以注意所有函数原型的有趣想法。

然而

*   库（目标代码）需要在某处有它们的声明，这就是*包含*存在的原因

此外，我发现能够将`grep`其*包含*为“自由文本”很方便，例如

```
grep alloc /usr/includes/* 
```

# url - Remove multiple indexed URLs (duplicates) with redirect

> ID：14461131
> 
> 赞同：0
> 
> 时间：2013-01-22T14:42:39.303
> 
> 标签：url, redirect, indexing, duplicate-removal

I am managing a website that has only about 20-50 pages (articles, links and etc.). Somehow, Google indexed over 1000 links (duplicates, same page with different string in the URL). I found that those links contain `?date=` in url. I already blocked by writing `Disallow: *date*` in `robots.txt`, made an XML map (which I did not had before) placed it into root folder and imported to Google Webmaster Tools. But the problem still stays: links are (and probably will be) in search results. I would easily remove URLs in GWT, but they can only remove one link at the time, and removing >1000 one by one is not an option.

**The question**: Is it possible to make dynamic 301 redirects from every page that contains `$date=` in url to the original one, and how? I am thinking that Google will re-index those pages, redirect to original ones, and delete those numerous pages from search results.

Example:

bad page: `www.website.com/article?date=1961-11-1` and **n** same pages with different "date"

good page: `www.website.com/article`

automatically redirect all bad pages to good ones.

I have spent whole work day trying to solve this problem, would be nice to get some support. Thank you!

P.S. As far as I think this coding question is the right one to ask in stackoverflow, but if I am wrong (forgive me) redirect me to right place where I can ask this one.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:23:07.977

You're looking for [the canonical link element](http://en.wikipedia.org/wiki/Canonical_link_element), that's the way Google suggests to solve this problem ([here](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)'s the Webmasters help page about it), and it's used by most if not all search engines. When you place an element like

```
<link rel='canonical' href='http://www.website.com/article'> 
```

in the header of the page, the URI in the href attribute will be considered the 'canonical' version of the page, the one to be indexed and so on.

For the record: if the duplicate content is not a html page (say, it's a dynamically generated image), and supposing you're using Apache, you can use .htaccess to redirect to the canonical version. Unfortunately the Redirect and RedirectMatch directives don't handle query strings (they're strictly for URIs), but you could use mod_rewrite to strip parts of the query string. See, for example, [this answer](https://stackoverflow.com/a/1497229/477453) for a way to do it.

# postgresql - 在 PostgreSQL 中使用 IYYY 进行日期格式化会产生奇怪的结果

> ID：14461132
> 
> 赞同：3
> 
> 时间：2013-01-22T14:42:43.237
> 
> 标签：postgresql, date, iso

IYYY 与 YYYY 的日期格式：

```
SELECT to_char( '2012-12-31'::DATE, 'IYYY-MM-DD' ) AS weird,
       to_char( '2012-12-31'::DATE, 'YYYY-MM-DD' ) AS expected; 
```

结果：

```
 weird    |  expected  
------------+------------
 2013-12-31 | 2012-12-31 
```

如果“奇怪”的结果是“2013-01-01” ，*这*并不奇怪。

这里有什么问题？(PostgreSQL 9.1.7)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T15:27:53.207

`IYYY`指指定日期的星期几。

2013 年的第一周从 2012 年 12 月 31 日星期一开始，所以问题中奇怪的结果是正确的。

[手册](http://www.postgresql.org/docs/current/static/functions-formatting.html)中有一个与此直接相关的警告：

> 尝试使用 ISO 周和公历日期字段的混合构造日期是荒谬的，并且会导致错误。在 ISO 年的上下文中，“月”或“月中的日”的概念没有意义。在公历年的背景下，ISO 周没有任何意义。用户应避免混合使用公历和 ISO 日期规范。

有关更多详细信息，另请参阅 wikipedia [iso 周日期](http://en.wikipedia.org/wiki/ISO_week_date)文章。

# java - Netbeans 按钮自定义

> ID：14461134
> 
> 赞同：1
> 
> 时间：2013-01-22T14:42:58.270
> 
> 标签：java, swing, netbeans

在设计选项卡下的 Netbeans 中，我可以添加一个生成私有成员的 JButton `javax.swing.JButton jbutton1`。

我希望我的所有 JButtons 都实现一个我制作的自定义接口，称为 X：

```
public class myCustomButton extends javax.swing.JButton
    implements X
{
   //Some code here...
} 
```

有没有办法添加 myCustomButtons 而不是 JButtons 而不会弄乱 Netbeans 设计器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:46:48.710

在其中一个选项卡上的按钮属性中，您可以输入创建后代码（查找该代码）或类似的内容，这些代码应该可以满足您的需求。如果我的机器上现在有netbeans，我会更具体。

它不应该影响设计器中的布局。

这就是我所说的：

![netbeans 设计器中某个元素的代码选项卡的屏幕截图](../Images/fe74e4174d3ccf0f4aafbb397f76fece.png)

该图像来自 Netbeans 6，但不应更改。我相信您正在寻找的是创建后或声明后。

或者，您可以使用代码定制器：（ [来源：][[netbeans.org](https://netbeans.org/images_www/magazine/matisse/image/image013.png)][）][![Netbeans 6 中代码定制器的屏幕截图](../Images/315272c4a20c80d955e67ae8837638ce.png)](https://i.stack.imgur.com/NGLQ2.png)

# image-processing - 在 Octave 中实现最近邻调整大小的失真结果图像

> ID：14461136
> 
> 赞同：0
> 
> 时间：2013-01-22T14:43:01.083
> 
> 标签：image-processing, octave, image-resizing

我在 Octave 中实现了这个算法，输出矩阵 (o) 与输入矩阵 (c) 一致，但显示的输出`imshow()`与输入图像不相似。

你能帮我指出这有什么问题吗？

我正在使用在 Ubuntu 12.10 上运行的 GNU Octave 3.6.2。

在下面的示例中，图像的大小被调整为 2 x 2。

**源图像：**

![](../Images/d3eb269874130d5490b8bd3378456baa.png)

**输出图像**

![](../Images/57d105faf122e2529633f8446f55ad6e.png)

**源矩阵**

```
ans(:,:,1) =

  237  255   34
  237  255   34
  255  255  255
  255  255  255
    0  255    0
    0  255    0

ans(:,:,2) =

   28  242  177
   28  242  177
  242  242  242
  242  242  242
  162  242    0
  162  242    0

ans(:,:,3) =

   36    0   76
   36    0   76
    0    0    0
    0    0    0
  232    0    0
  232    0    0 
```

**输出矩阵**

```
ans(:,:,1) =

   237   237   255   255    34    34
   237   237   255   255    34    34
   237   237   255   255    34    34
   237   237   255   255    34    34
   255   255   255   255   255   255
   255   255   255   255   255   255
   255   255   255   255   255   255
   255   255   255   255   255   255
     0     0   255   255     0     0
     0     0   255   255     0     0
     0     0   255   255     0     0
     0     0   255   255     0     0

ans(:,:,2) =

    28    28   242   242   177   177
    28    28   242   242   177   177
    28    28   242   242   177   177
    28    28   242   242   177   177
   242   242   242   242   242   242
   242   242   242   242   242   242
   242   242   242   242   242   242
   242   242   242   242   242   242
   162   162   242   242     0     0
   162   162   242   242     0     0
   162   162   242   242     0     0
   162   162   242   242     0     0

ans(:,:,3) =

    36    36     0     0    76    76
    36    36     0     0    76    76
    36    36     0     0    76    76
    36    36     0     0    76    76
     0     0     0     0     0     0
     0     0     0     0     0     0
     0     0     0     0     0     0
     0     0     0     0     0     0
   232   232     0     0     0     0
   232   232     0     0     0     0
   232   232     0     0     0     0
   232   232     0     0     0     0 
```

**源代码**

```
function out_img = nneig(in_img, x_scale, y_scale);

    in_img_height = size(in_img, 1);
    in_img_width = size(in_img, 2);
    in_img_channels = size(in_img, 3);

    out_img_height = round(in_img_height * y_scale);
    out_img_width = round(in_img_width * x_scale);
    out_img_channels = in_img_channels;

    out_img = zeros(out_img_height, out_img_width, out_img_channels);

    tf_mtx = zeros(3, 3); 
    tf_mtx(1, 1) = 1 / x_scale; 
    tf_mtx(2, 2) = 1 / y_scale; 
    tf_mtx(3, 3) = 1;

    for out_channel = 1:out_img_channels
        for out_line = 1:out_img_height
            for out_col = 1:out_img_width
                org_coord_mtx = floor(tf_mtx * [out_col - 1; out_line - 1; 1]) + [1; 1; 0];
                    org_coord_line = org_coord_mtx(2, 1);
                    org_coord_col = org_coord_mtx(1, 1);
                out_img(out_line, out_col, out_channel) = in_img(org_coord_line, org_coord_col, out_channel);
            end
        end
    end

endfunction 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:09:11.507

问题出在您的图像类别中。既然你用 来创建它`zeros`，它的类会加倍。应该是`uint8`。您可以通过使用`zeros (x, y, z, "uint8")`或在最后转换类来做到这一点。更好的选择是使用`imresize()`which 已经为您考虑（尽管您可能需要循环通过 RGB 通道，但我不确定）。

关于您的代码，您应该避免这些循环。当您拥有可能更大的实际图像时，它会真正影响您的性能。只要比例因子是整数，以下代码应该会更好地工作：

```
function b = nearestresize (a, row_scale, col_scale)
  row_idx = (1:rows (a))(ones (1, row_scale), :);
  col_idx = (1:columns (a))(ones (col_scale, 1), :);
  b = a(row_idx, col_idx, :);
endfunction 
```

无论如何，您应该使用`imresize`“最近”方法从图像包中使用（我不确定它与 RGB 图像的效果如何）：

```
b = imresize (im, [rows cols], "nearest") 
```

查看代码`imresize`以了解它是如何工作的（我上面粘贴的代码实际上来自它的开发版本）。基本上; y，最后这一切都归结为`interp2()`使用“最近”方法。

# mysql - Jena SDB 默认编码

> ID：14461140
> 
> 赞同：1
> 
> 时间：2013-01-22T14:43:06.933
> 
> 标签：mysql, character-encoding, uri, urlencode, jena

我有一些包含德语和法语字符的 IRI，例如：

```
http://example.org/text/Citroën 
```

我想将它们插入 Jena SDB。默认的 MySQL 数据库字符集是 latin1。我应该将编码更改为 UTF8 吗？如果IRI包含中文或日文字符，我应该将其更改为UTF8吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:58:13.590

如果数据库（和 JDBC 连接）是 UTF8 会更好。如果是的话，以后不用担心其他语言数据，而且JDBC连接是UTF8的。如果您必须运行 latin1，则在 JDBC URL 中，将其声明为 UTF8（有关详细信息，请参阅 MySQL 文档）。

# php - 在哪里放置 正确标记为未出现在视图中

> ID：14461141
> 
> 赞同：1
> 
> 时间：2013-01-22T14:43:08.197
> 
> 标签：php, html

使用以下代码：

```
'<ul class="qandaul"><li>'.htmlspecialchars( is_array( $arrImageFile[$key] ) ? implode(",", $arrImageFile[$key]) : $arrImageFile[$key] ) ). '</li></ul>' 
```

当我继续查看页面源时，它以红色突出显示，`</li></ul>`它这样做的原因是因为它没有显示`<ul><li>`与它们关联的开始标签。我的问题是上面的代码，我应该在哪里放置`<ul><li>`标签，以便它显示在查看源代码中，这意味着我知道标签放置在正确的位置？

**更新：**

以下是从查看源代码生成的 HTML：

```
<td width="11%" class="imagetd">&nbsp;</li></ul></td> 
```

以下是完整的 php/html 代码：

```
echo '<td width="11%" class="imagetd">'. ( ( empty ($arrImageFile[$key]) ) ? "&nbsp;" : '<ul class="qandaul"><li>'.htmlspecialchars( is_array( $arrImageFile[$key] ) ? implode(",", $arrImageFile[$key]) : $arrImageFile[$key] ) ). '</li></ul></td>' . PHP_EOL; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:06:15.930

你的一些括号在某处不够用，但像这样重写它更容易；毕竟不是所有东西都应该是单线的，**尤其是嵌套的三元运算符**：

```
echo '<td width="11%" class="imagetd">';
if (empty($arrImageFile[$key])) {
    echo '&nbsp;';
} else {
    echo '<ul class="qandaul"><li>';
    echo htmlspecialchars(is_array($arrImageFile[$key]) ? implode(",", $arrImageFile[$key]) : $arrImageFile[$key]);
    echo '</li></ul>';
}
echo '</td>'; 
```

# sql - 在 SQL 中使用“Union All”是否有更短的方法

> ID：14461146
> 
> 赞同：0
> 
> 时间：2013-01-22T14:43:14.917
> 
> 标签：sql, oracle

我们每天从 200 个交通站点获取数据，所有站点都有不同的表名，例如 (KGM_000000000001_PVR)。所有站点具有相同的列排序，具有相同的列名。我们总是会收到不同愿望的报告，我们将站点与联合全部结合起来，如下例所示。一直以来，我们将它们与 union all 结合起来，这有点困难。有没有其他简单的方法来获得类似报告（使用循环、案例、for 等）。

莱万特

谢谢

报告代码示例：

* * *

```
SELECT count(class) from C2.KGM_000000000001_PVR WHERE class=9 and RECTIME BETWEEN TO_DATE('01.01.2012','DD.MM.YYYY') AND TO_DATE('01.01.2013','DD.MM.YYYY')
union all
SELECT count(class) from C2.KGM_000000000002_PVR WHERE class=9 and RECTIME BETWEEN TO_DATE('01.01.2012','DD.MM.YYYY') AND TO_DATE('01.01.2013','DD.MM.YYYY')
union all
SELECT count(class) from C2.KGM_000000000003_PVR WHERE class=9 and RECTIME BETWEEN TO_DATE('01.01.2012','DD.MM.YYYY') AND TO_DATE('01.01.2013','DD.MM.YYYY')
union all
.
.
.
SELECT count(class) from C2.KGM_000000000200_PVR WHERE class=9 and RECTIME BETWEEN TO_DATE('01.01.2012','DD.MM.YYYY') AND TO_DATE('01.01.2013','DD.MM.YYYY') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:04:47.997

您可能希望在所有这些表上创建一个视图，并使用显示表名的伪列“SOURCE”。然后，您的客户端代码可以使用您喜欢的“SOURCE”列上的任何选择来查询这个视图。

```
CREATE VIEW KGM_ALL AS
SELECT 'KGM_000000000001_PVR' AS SOURCE, * FROM C2.KGM_000000000001_PVR
UNION ALL
SELECT 'KGM_000000000002_PVR' AS SOURCE, * FROM C2.KGM_000000000002_PVR
....

SELECT * from KGM_ALL where SOURCE in ('KGM_000000000001_PVR', ...) 
```

正如@Marlin 所说，不要忘记在源以及您通常从中选择的其他列上创建索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:44:22.167

也许你可以使用动态 SQL：

[http://download.oracle.com/docs/cd/B28359_01/appdev.111/b28370/dynamic.htm](http://download.oracle.com/docs/cd/B28359_01/appdev.111/b28370/dynamic.htm)

然后，您应该能够通过连接它们的名称（而不是使用 where 子句中的数字）来遍历您的表，如下所示：

[如何在 pl/sql 中编写遍历数字的循环](https://stackoverflow.com/questions/3214847/how-to-write-loop-in-pl-sql-that-goes-over-numbers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:53:39.700

每个表上的字段（类，RECTIME）的索引将减少时间。请务必按照指定的顺序将两个字段都包含在一个索引中。

# cordova - PhoneGap 2.3 Blackberry10：“Access-Control-Allow-Origin 不允许本地来源：//”

> ID：14461149
> 
> 赞同：2
> 
> 时间：2013-01-22T14:43:27.900
> 
> 标签：cordova, blackberry-webworks, blackberry-10, cordova-2.0.0

我正在尝试在 Blackberry 10 上运行一个已经在 Android 和 iOS 上运行良好的应用程序。

当我调用服务器时，我总是得到“ **Origin local:// is not allowed by Access-Control-Allow-Origin** ”：为什么我面临跨域问题？我从来没有遇到过关于跨域的任何问题其他phonegap平台。

我正在使用 Cordova 2.3、用于 BB10 的最新 WebWorks SDk 和最新的 BB10 模拟器（但在 Dev Alpha B 设备上部署时我也遇到了同样的问题）。

在项目的 config.xml 中，我已经检查了： `<access subdomains="true" src="*"/>`

周围还有其他配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:23:33.963

我在这里可能是错的，但我认为问题在于您不能在 SRC 属性中使用通配符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:04:14.977

我认为正确的语法应该是`<access subdomains="true" uri="*"/>`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T04:53:06.293

您的托管服务应支持跨域访问。

对于 WCF 服务，web.config 中应提供以下配置

```
<system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Headers" value="Content-Type" />
      </customHeaders>
    </httpProtocol>
  </system.webServer>

<webHttpBinding>
   <binding crossDomainScriptAccessEnabled="true">
     <security mode="None" />
   </binding>
</webHttpBinding> 
```

希望能帮助到你...

快乐编码！！！

# excel - 更改工作表名称

> ID：14461155
> 
> 赞同：1
> 
> 时间：2013-01-22T14:43:49.800
> 
> 标签：excel, vba

在我命名的活动 EXCEL 表上，我在 cell 中放置了一个少于 32 个字符的字符串`A1`。

我想使用字符串`A1`来重命名工作表。我过去使用过 VBA，但有一段时间没有使用过。

如果有人可以建议在单击单元格 A1 时执行此操作的宏，我会很高兴。是否有任何字符不能出现在 A1 中（我想要 ~ 和下划线）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:53:38.750

将此代码粘贴到相关的工作表对象（VBA 编辑器）中。
请注意，您还可以使用事件，例如双击。
在选择活动工作表的单元格“A1”时，工作表名称将成为单元格“A1”包含的值。

```
Option Explicit

Private Sub Worksheet_SelectionChange(ByVal Target As Range)

Dim sSheet_Name             As String

If Target = ActiveSheet.Range("A1") Then
    sSheet_Name = ActiveSheet.Range("A1").Value
    ActiveSheet.Name = sSheet_Name
End If

End Sub 
```

签出：[Excel 工作表名称的有效字符](https://stackoverflow.com/questions/451452/valid-characters-for-excel-sheet-names)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:33:53.747

对于一个完整的过程，我会推荐

1.  测试工作表名称是否已经存在（防止出错）
2.  在重命名工作表之前清除无效字符
3.  检查新工作表名称是否少于 32 个字符（但不能为空）

使用此代码

*   右键单击您的工作表选项卡
*   `View Code`
*   将代码复制并粘贴到
*   `Alt`+`F11`返回 Excel

代码由右键单击单元格 A1 触发

```
Private Sub Worksheet_BeforeRightClick(ByVal Target As Range, Cancel As Boolean)
Dim rng1 As Range
Dim StrNew As String
Dim objRegex As Object
Dim blTest As Boolean
Dim ws As Worksheet
Set rng1 = Intersect(Range("A1"), Target)
If rng1 Is Nothing Then Exit Sub

StrNew = rng1.Value
Set objRegex = CreateObject("vbscript.regexp")

With objRegex
    .Pattern = "[\/\\\?\*\]\[]"
    .Global = True
    blTest = .test(StrNew)
    StrNew = .Replace(StrNew, vbNullString)
End With

On Error Resume Next
Set ws = Sheets(StrNew)
On Error GoTo 0

If ws Is Nothing Then
    If Len(StrNew) > 0 And Len(StrNew) < 32 Then
        ActiveSheet.Name = StrNew
        MsgBox "Sheet name updated to " & StrNew & vbNewLine & IIf(blTest, "Invalid characters were removed", vbNullString)
    Else
        MsgBox "Sheetname of " & StrNew & " is either empty or too long", vbCritical
    End If

Else
    MsgBox "Sheet " & StrNew & " already exists", vbCritical
End If

End Sub 
```

# mysql - 单选按钮和检查用户在测验中的选择

> ID：14461157
> 
> 赞同：0
> 
> 时间：2013-01-22T14:43:52.253
> 
> 标签：mysql, phpmyadmin, radio-button, multiple-choice

我正在制作一个测验系统，并尝试了一种从 MySQL 获取变量和值的不同方法。

```
$question = mysql_query("SELECT * FROM `questions`");
$stat = mysql_fetch_assoc($question);
$num = mysql_num_rows($question);
$questionid = 0;
for($i=0;$i<=$num;$i++)
{
$question = mysql_query("SELECT * FROM `questions` WHERE `id`='$i'");
$stat = mysql_fetch_assoc($question);
//if($stat['answer'] == null
echo $stat['question'] . '<br />';
echo '<input type="radio" name="' . $i .'" value="' . $questionid . '" />' . $stat['answer1'] . '<br />';
echo '<input type="radio" name="$i" value"$questionid" />' . $stat['answer2'] . '<br />';
echo '<input type="radio" name="$i" value"$questionid" />' . $stat['answer3'] . '<br />';
echo '<input type="radio" name="$i" value"$questionid" />' . $stat['answer4'] . '<br />';
$questionid++;
} 
```

现在，我想让这个人选择正确的答案，但是当我尝试在问题 1 中选择答案，然后在问题 2 中选择答案时，它可能不会让我选择，因为收音机具有相同的名称 - 我不知道如何使学生可以在每个问题中选择一个答案以及如何选择（将其存储在变量中并检查答案是否正确）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:51:10.113

您遇到了 PHP 变量和引号（'/"）的问题。未正确使用连接运算符。

> name="'.$i.'" value="'.$questionid.'"

```
 /\ /\       /\         /\ 
```

见代码：

```
for($i=0;$i<=$num;$i++)
{
$question = mysql_query("SELECT * FROM `questions` WHERE `id`='$i'");
$stat = mysql_fetch_assoc($question);
//if($stat['answer'] == null
echo $stat['question'] . '<br />';
echo '<input type="radio" name="' . $questionid .'" value="' . $stat['answer1'] . '" />' . $stat['answer1'] . '<br />';
echo '<input type="radio" name="' . $questionid .'" value="' . $stat['answer2'] . '" />' . $stat['answer2'] . '<br />';
echo '<input type="radio" name="' . $questionid .'" value="' . $stat['answer3'] . '" />' . $stat['answer3'] . '<br />';
echo '<input type="radio" name="' . $questionid .'" value="' . $stat['answer4'] . '" />' . $stat['answer4'] . '<br />';
$questionid++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:50:43.333

我不认为您的做法那么好。我认为迭代代码的最佳方法是 while() 循环。就像

```
$all = mysql_query("SELECT * FROM 'questions'");
while($all_array=mysql_fetch_array($all))
{
$question = mysql_query("SELECT * FROM questions WHERE id='".$all_array['id']."'");
while($stat=mysql_fetch_array(question)){
echo $stat['question'] . '<br />';
echo '<input type="radio" name="' .$stat['id'].'" value="' . $stat['answer1'] . '" />' . $stat['answer1'] . '<br />';
echo '<input type="radio" name="' .$stat['id'].'" value="' . $stat['answer2'] . '" />' . $stat['answer2'] . '<br />';
echo '<input type="radio" name="' .$stat['id'].'" value="' . $stat['answer3'] . '" />' . $stat['answer3'] . '<br />';
echo '<input type="radio" name="' .$stat['id'].'" value="' . $stat['answer4'] . '" />' . $stat['answer4'] . '<br />';
}
} 
```

# c - shm_unlink 说“没有这样的文件或目录”

> ID：14461164
> 
> 赞同：1
> 
> 时间：2013-01-22T14:44:22.547
> 
> 标签：c, linux, signals, shared-memory

我试图用来`shm_unlink(object_path)`清除我在信号处理功能中打开的共享内存。但是，代码不起作用。出了什么问题？代码基本上是这样做的：父进程从用户输入中获取两个整数，并派生一个子进程来计算两者的总和。一旦计算了总和，子节点就会通过管道通知父节点它已完成计算总和。当收到`SIGINT`信号时，子进程不应该自行终止，它应该让父进程处理信号，然后父进程发送 SIGKILL 信号来终止子进程。谢谢！

```
#include <sys/mman.h>
#include <sys/types.h>
#include <unistd.h>
#include <fcntl.h>
#include <stdlib.h>
#include <stdio.h>
#include <signal.h>

#define SHARED_OBJECT_PATH         "/shared_memory"
#define READ_END 0
#define WRITE_END 1
#define BUFFER_SIZE 1
//Global Variables
int pid; //Child Process ID

void signal_callback_handler(int signum){
    if (signum == SIGINT){
        printf("I am %d and I am handling SIGINT. \n", getpid()); /* process ID that's handling SIGINT */
        kill(pid,SIGKILL);
        if (shm_unlink(SHARED_OBJECT_PATH) != 0) {
            perror("In shm_unlink()");
            exit(1);
        }
    }
}
int main(int argc, char *argv[]){
    int fd,status;
    int pfd1[2],pfd2[2]; /*Two communication channels will be created. pfd1 for parent->child, pfd2 child->parent*/
    char msg[BUFFER_SIZE];
    int first_num, second_num, sum;

    int shared_seg_size = 3*(sizeof(int));
    int *shared_msg; /* We want a shared segment capable of storing 2 integers and 1 sum */

    if(pipe(pfd1) < 0 || pipe(pfd2) < 0){
        printf("Failed to create a pipe between parent and child \n");
        exit(-1);
    }

    /* Open the Shared Memory Segment */    
    fd = shm_open(SHARED_OBJECT_PATH, O_CREAT | O_EXCL | O_RDWR, S_IRWXU | S_IRWXG);
    if (fd < 0) {
        perror("In shm_open()");
        exit(1);
    }
    fprintf(stderr, "Created shared memory object %s\n", SHARED_OBJECT_PATH);   
    /* Adjust mapped file size (make room for the whole segment to map) using ftruncate() */
    ftruncate(fd, shared_seg_size);
    /* Request the shared segment using mmap() */    
    shared_msg = (int *) mmap(NULL, shared_seg_size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
    if (shared_msg == NULL) {
        perror("In mmap()");
        exit(1);
    }
    fprintf(stderr, "Shared memory segment allocated correctly (%d bytes).\n", shared_seg_size);
    /*End of the opening of the Shared Memory Segment */

    if((pid = fork()) < 0){ /* Fork the process */
      printf("Fork error \n");
      exit(-1);
    }
    else if (pid > 0){/* Parent code */
        signal(SIGINT, signal_callback_handler); /* To handle the Ctrl+C signal and clean up shared memory */
        close(pfd1[READ_END]);
        close(pfd2[WRITE_END]);

        while(1){ /* Keep running the main process to get user input */
            printf("Enter the first number: ");
            scanf("%d",&first_num);
            printf("Enter the second number: ");
            scanf("%d",&second_num);

            /* Write the two integers to the shared memory segment */
            shared_msg[0] = first_num;
            shared_msg[1] = second_num;

            msg[0] = '1'; /*Write to the pipe and tell child to compute the sum */
            write(pfd1[WRITE_END], msg, BUFFER_SIZE);
            read(pfd2[READ_END],msg, BUFFER_SIZE);
            if (msg[0] == '1'){         
                sum = shared_msg[2];
                printf("The sum is %d\n",sum);
                msg[0] = '0'; /*Tell the child to get ready to compute new sum*/
                write(pfd1[WRITE_END],msg,BUFFER_SIZE);
            }
        }
    }
    else if (pid == 0){/* Child Code */
        close(pfd1[WRITE_END]);
        close(pfd2[READ_END]);

        while(1){
            read(pfd1[READ_END],msg,BUFFER_SIZE);
            if (msg[0] == '1'){ /*Child should compute sum*/
                sum = shared_msg[0]+shared_msg[1];
                shared_msg[2] = sum;    
                msg[0] = '1';   /*Tell the parent, the sum is computed */
                write(pfd2[WRITE_END],msg,BUFFER_SIZE);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:33:29.813

我试过你的代码。改变这个：

```
 if (shm_unlink(SHARED_OBJECT_PATH) != 0) {
        perror("In shm_unlink()");
        exit(1);
    } 
```

在

```
 if (shm_unlink(SHARED_OBJECT_PATH) != 0) {
        perror("In shm_unlink()");
        exit(1);
    }
    else {
        perror("All right!");
        exit(0);
    } 
```

否则你需要**两个** `Ctrl + C`退出...第一个删除共享内存，第二个让你的程序退出，因为`shm_unlink()`返回一个错误（因为 shmem 之前被第一个 Ctrl + c 删除）

# git - Git 补丁和新分支

> ID：14461166
> 
> 赞同：0
> 
> 时间：2013-01-22T14:44:28.160
> 
> 标签：git

我有一堆文件，我在我的本地都在一个名为“test”的分支中进行了更改。我想选择特定文件，然后将它们移动到新分支并将它们远程提交到该新分支。

我的老板建议我运行`git commit -p`，然后检查我想要保留的内容，并以某种方式将其添加到新分支并推送它。我正在努力弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:48:53.757

首先切换到新分支：

```
git checkout -b mynewbranch 
```

然后删除您不想在该分支中拥有的所有文件。完成此操作后，运行：

```
git add -u
git commit 
```

最后将您的新分支推送到您的远程：

```
git push origin mynewbranch 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:00:10.887

*老板推荐的方法只有在新分支的更改和旧分支的更改（或被丢弃，或其他）混合在同一文件中*时才有意义。

假设是这种情况：

1.  在不更改工作副本的情况下创建并切换到新分支：

    ```
    git checkout -b mynewbranch 
    ```

    但不要删除任何东西——在这个阶段这可能会造成损失

2.  添加现在应该只存在于新分支上的任何新（未跟踪）文件

    ```
    git add <filenames> 
    ```

3.  添加应该在新分支上进行的任何更改

    ```
    git add --patch 
    ```

    或者

    ```
    git add --interactive 
    ```

    老实说，我总是发现*交互需要一些练习，它不是最友好的界面。*

4.  将索引提交到您的新分支 - 您可以先查看它以确认它是否有意义

    ```
    git status
    git diff --cached
    git commit 
    ```

    请注意，您选择*不*添加到此分支的任何更改仍将仅存在于您的工作副本中

5.  切换回之前的分支，随身携带任何未添加、未提交的工作副本更改

    ```
    git checkout master 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:18:17.737

有几种方法可以实现这一点，每种方法都有优点和缺点。

## 直接方法

如前所述：切换到另一个分支，删除不需要的文件，提交您需要的文件。

```
git checkout -b mynewbranch
git add -u
git commit
git push origin mynewbranch 
```

快速而肮脏，但如果这些文件已经更改，您将丢失所有历史记录。

## 忍者招式

您可以`stash`从一个分支进行更改并将它们应用到另一个分支。

```
git shash # Will put your changes into `hidden pocket`
git checkout -b mynewbranch
git stash pop # Your changes will pop out from `hidden pocket`
git commit
git push origin mynewbranch 
```

巧妙而准确，但您仍然会丢失这些文件的历史记录（如果有的话）。

## 捆绑方法

您可以将提交从一个分支转移到另一个分支。

```
git bundle file.name revision..list # Packing revisions to file
git checkout -b mynewbranch
git bundle unbundle file.name # Unpacking revision in new branch 
```

Slick，保留您的历史记录，但仅在选定修订期间未触及其他文件时才保存。

## 老套

使用补丁！

```
git format-patch revision..list # generate patch files for each revision in the list
git checkout -b mynewbranch
cat filename.patch | git am # Applying patch to the current branch 
```

确定您需要应用哪个补丁以及不应该应用哪个补丁可能很复杂。但是您可以完全控制过程。

如果所描述的都不能 100% 满足您的需求，您可以结合各种方法来实现您的需求。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T16:43:56.077

你有没有尝试过：

*   尚未提交更改
*   签出新分支（-b 创建一个新分支）

    ```
    git checkout -b new_branch
    ```

*   在新分支中提交更改

    ```
    git commit -a -m "made some changes and stuff"
    ```

*   制作补丁

    ```
    git format-patch master --stdout > made_some_changes.patch
    ```

    最后一行创建了一个新的补丁文件并记录了新文件中的所有更改。

当您创建一个新分支并且存在未跟踪的文件和更改时，原始分支会返回到其最后一次提交，并且所有未跟踪的更改仅在新分支中可见，而不是旧分支中可见。

为了优雅：命名补丁文件`../made_some_changes.patch`将在您的存储库之外创建文件。所以命令是

```
git format-patch master --stdout > ../made_some_changes.patch 
```

# spring - Spring AOP（方面）未执行

> ID：14461168
> 
> 赞同：21
> 
> 时间：2013-01-22T14:44:31.533
> 
> 标签：spring, spring-mvc, aop, spring-aop

我正在使用 Spring 2.5.6、asm 1.5.3、aspectjrt/aspectjweaver 1.6.1、cglib 2.1_3 在我的基于 Web 的 Spring 应用程序中，我有以下类：

```
package uk.co.txttools.aspects;

@Aspect
public class LoggingAspect {
    @Before("execution(* uk.co.txttools.web.controller.compose.PreviewMessageController.set*(..))")
    public void setLoggingAdvice(){
        System.out.println("********************************* Advice run..... set mothod called....");
    }

    @AfterThrowing("execution(* uk.co.txttools.web.controller.compose.PreviewMessageController.onSubmit(..) throws java.lang.Exception)")
    public void hadleException(){
       System.out.println("================= PreviewMessageController =========== ON SUBMIT Exception Throwen ==================");
    }

    @Before("execution(* uk.co.txttools.web.controller.compose.PreviewMessageController.onSubmit(..) throws java.lang.Exception)")
    public void OnSubmitAspect(){
        System.out.println("================= PreviewMessageController =========== ON SUBMIT CALLED ==================");
    }
} 
```

我有一个`Controller:uk.co.txttools.web.controller.compose.PreviewMessageController which has`onSubmit() `method, which get called from web page. I have separate`applicationContext.xml` 文件。

我的`springapp-servlet.xml`（在带有 org.springframework.web.servlet.DispatcherServlet 的 web.xml 文件中使用）文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd">

<aop:aspectj-autoproxy proxy-target-class="true" />

<bean id="loggingAspect" class="uk.co.txttools.aspects.LoggingAspect" />
.
. 
```

下面在同一个 xml 文件中`PreviewMessageController`进行初始化，这意味着我的 Controller 和 Aspect live 是同一个容器。

运行应用程序时我没有遇到任何异常，但我的方面类`LoggingAspect`从未被调用。我不确定缺少什么或我做错了。请帮我..

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-02-17T07:15:00.037

我不确定我是否做得正确，但对我来说解决的问题是添加`@Component`到“Aspect'ed”类中 -

```
@Aspect
@Component
public class PerformanceLogger {

    private Logger logger = LoggerFactory.getLogger(this.getClass());

    @Around("within(com.something.rest.service..*)")
    public Object doBasicProfiling(ProceedingJoinPoint pjp) throws Throwable {
        long start = System.currentTimeMillis();
        Object retVal = pjp.proceed();
        long end = System.currentTimeMillis();
        logger.debug(pjp.getSignature().toShortString() + " Finish: " + (end - start) + "ms");
        return retVal;
    }
} 
```

（并且只是为了关闭循环 - 如果您使用基于注释，请不要忘记添加`@EnableAspectJAutoProxy`到您的 Config 类。

```
@EnableAspectJAutoProxy 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-02-15T00:03:34.837

对于那些选择`JavaConfig`，您可以将您的声明`Aspect`为 bean 并添加`@EnableAspectJAutoProxy`注释以打开自动代理：

```
@Configuration
@EnableAspectJAutoProxy
@ComponentScan
public class MyConfig {
    @Bean
    public LoggingAspect loggingAspect(){
        return new LoggingAspect();
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-30T12:36:05.813

终于解决了。

我想我错过了 aspectj-maven-plugin。它需要春天来编织方面。但是，没有教程提供此信息。在我的 pom.xml 中添加了以下内容。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>aspectj-maven-plugin</artifactId>
    <version>1.0</version>
    <dependencies>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.6.1</version>
        </dependency>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>1.6.1</version>
        </dependency>
    </dependencies>
    <executions>
        <execution>
            <goals>
                <goal>compile</goal>
                <goal>test-compile</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <outxml>true</outxml>
        <verbose>true</verbose>
        <showWeaveInfo>true</showWeaveInfo>
        <aspectLibraries>
            <aspectLibrary>
                <groupId>org.springframework</groupId>
                <artifactId>spring-aspects</artifactId>
            </aspectLibrary>
        </aspectLibraries>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

多谢你们

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T16:46:38.667

如果您还没有尝试过...尝试基于 xml 的 spring-aop 配置，如下所示：

```
 <aop:config>
    <aop:aspect ref="loggingAspect">
        <aop:pointcut expression="execution(* uk.co.txttools.web.controller.compose.PreviewMessageController.set*(..))" id="previewMessageControllerSetters"/>
        <aop:before method="setLoggingAdvice" pointcut-ref="previewMessageControllerSetters"/>

         // set other 2 pointcuts similarly....
        </aop:aspect>       
    </aop:config>
    <bean id="loggingAspect" class="uk.co.txttools.aspects.LoggingAspect" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-14T05:57:19.337

只是为了使可能的答案列表完整：

对我来说，您的 maven pom.xml 中似乎缺少以下依赖项：

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-aop</artifactId>
  <version>2.5.6</version>
</dependency> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T15:22:31.537

在你的配置文件中试试这个：

```
<aop:aspectj-autoproxy proxy-target-class="true">
     <aop:include name="loggingAspect"/>
</aop:aspectj-autoproxy> 
```

# youtube - Youtube API seekTo() 浮点数

> ID：14461176
> 
> 赞同：6
> 
> 时间：2013-01-22T14:44:48.287
> 
> 标签：youtube, youtube-api, youtube-javascript-api

Youtube API seekTo 函数接受浮点时间还是帧时间？你能向下钻取到小数点后两位吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:58:29.280

是的，API 完美地接受了 float 中的 seekTo 时间；它将前进到您的浮动之前最近的关键帧，无论它可能是什么。这是一个演示：

[http://goo.gl/E4jzu](http://goo.gl/E4jzu)

寻找一个帧有点棘手，因为不同的视频有不同的 fps 速率。由于您无法通过 API 获取 fps（除非有我不知道的方法？），因此尝试编写一个可以将您想要寻找的帧转换为浮点数的包装器太难了。但是，如果它们是您的视频，并且您知道 fps 速率，那将是微不足道的。

# django - dotcloud celery 权限被拒绝

> ID：14461177
> 
> 赞同：1
> 
> 时间：2013-01-22T14:44:52.717
> 
> 标签：django, celery, dotcloud

我正在尝试在我的 django 应用程序中使用 celery，以便我可以运行一个后台进程，将 CSV 文件导入我的模型数据库之一。这在我运行 celery worker 的本地机器上运行良好，使用：

```
python manage.py celery worker --loglevel=info 
```

和 RabbitMQ

```
rabbitmq-server 
```

这是我推送到 dotcloud 后收到的错误

```
workers.0    celery.platforms.LockFailed: [Errno 13] Permission denied: '/celeryev.pid' 
```

编辑：

```
supervisord.conf

[program:djcelery]
command = /home/dotcloud/env/bin/python /home/dotcloud/current/cellhelmet/manage.py celeryd -E -l info -c 2
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log

[program:celerycam]
command = /home/dotcloud/env/bin/python /home/dotcloud/current/cellhelmet/manage.py     celerycam
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:00:50.463

看起来您正在尝试向 / 写入一个 pid 文件，这说明为什么您会获得权限被拒绝。

你有什么价值`CELERYD_PID_FILE`？

尝试将其设置为这些选项之一

CELERYD_PID_FILE="/var/log/supervisor/%n.pid" CELERYD_PID_FILE="/home/dotcloud/"

可以在此处找到有关您的配置选项的更多信息：http: [//ask.github.com/celery/cookbook/daemonizing.html](http://ask.github.com/celery/cookbook/daemonizing.html)

如果这不起作用，您能否让我们知道您如何启动命令并发送您用于运行 celery 的任何配置（supervisord.conf 等）和脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:28:49.103

问题是我从 supervisord.conf 文件中删除了这一行：

```
directory = /home/dotcloud/current/cellhelmet 
```

这导致它从我假设的根目录搜索，这给了我权限被拒绝错误。不过，它确实为我清除了它。

# python - 在 Python 脚本中调用系统的 Python 或 virtualenv 的 Python

> ID：14461182
> 
> 赞同：1
> 
> 时间：2013-01-22T14:45:08.413
> 
> 标签：python, shell, virtualenv

假设您编写了一个 Python shell 脚本。它可能会以这样的方式开始：

```
#!/usr/bin/python 
```

问题是，如果你经常使用`virtualenv`这个调用是完全错误的。您实际上希望此脚本调用 virtualenv 的 python 二进制文件，如果它在此环境中，`/usr/bin/python/`否则。就像您的外壳会决定一样，当您编写`python`为外壳命令时。

你会如何写你的`#!`台词来满足这个要求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T14:48:33.547

改为使用`#!/usr/bin/env python`。

该[`env`命令](http://linux.die.net/man/1/env)在当前查找二进制文件`PATH`；激活您的虚拟环境会将您的 virtualenv`bin/`目录添加到路径中，`env`并将在那里找到您的 python 二进制文件而不是全局 python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:48:52.927

尝试：

```
#!/usr/bin/env python 
```

...

# vbscript - 编辑 QTP 导入的环境变量

> ID：14461188
> 
> 赞同：0
> 
> 时间：2013-01-22T14:45:24.530
> 
> 标签：vbscript, environment-variables, qtp

使用 QTP，我需要从 XML 表中导入环境变量，但是在运行时编辑它们时出现问题，导入的环境变量处于只读模式，无法编辑。

我需要知道是否有任何方法可以***导入环境变量并对其进行编辑，*** 并且我需要知道，不知何故，是否有任何方法可以从***代码创建环境变量（以编程方式）***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:30:19.757

我不确定您为什么要编辑您首先提供的 env 变量的值。

提供此类值背后的概念是，当您的路径或 DSN 保持不变时，您可以使用外部环境变量提供这些变量。

如果要在运行时编辑值，则可以使用输入框将新值传递给指定的变量。

```
Environment.value("raj") = "lala"
asd = InputBox ("enter the value")
Environment.value("raj") = asd
MsgBox Environment.value("raj") 
```

在这种情况下，它将显示提供的下一个值。

# c# - GridView 中的项目编号

> ID：14461197
> 
> 赞同：1
> 
> 时间：2013-01-22T14:45:38.470
> 
> 标签：c#, xaml, windows-store-apps

我想自动对添加到 a 的项目进行编号`GridView`，最好以不需要将任何属性添加到`ItemsSource`.

我的尝试一直在使用`ItemContainerStyle`'s `Template`（为了您的享受而简化），但我还没有找到任何可以绑定的东西会给我当前项目的索引：

```
<Style x:Key="fooStyle"
       TargetType="GridViewItem">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="GridViewItem">
        <StackPanel Orientation="Horizontal">
          <TextBlock x:Name="numbering"
                     Text="{Binding to what exactly}" />
          <ContentPresenter x:Name="contentPresenter" />
        </StackPanel>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

您将如何确保`numbering` `TextBlock`收到列表中项目的编号？

请注意，这是针对 Windows 运行时的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:47:52.373

我有一个临时修复。它不是最优的，因为它需要我添加到的项目`GridView`来实现一个特殊的接口。

```
public interface INumberedItem : INotifyPropertyChanged
{
    int NumberInList { get; set; }
}

public class NumberedGridView : GridView
{
    protected override void OnItemsChanged(object e)
    {
        base.OnItemsChanged(e);
        var i = 1;
        foreach (var item in Items.OfType<INumberedItem>())
        {
            item.NumberInList = i++;
        }
    }
} 
```

现在我可以`NumberInlist`在我的 XAML 代码中绑定到。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T14:49:12.017

确保 ItemsControl（在您的情况下为 GridView）上的“AlternationCount”属性设置为某个值（不是 NaN）并使用以下绑定：

```
<Binding Path="(ItemsControl.AlternationIndex)" RelativeSource="{RelativeSource Mode=TemplatedParent}" Mode="OneWay"/> 
```

# c++ - std::all_of 不接受类成员函数作为具有 1 个参数的函数

> ID：14461204
> 
> 赞同：1
> 
> 时间：2013-01-22T14:46:02.187
> 
> 标签：c++, c++11, std, member

我不知道我在这个电话中做错了什么`std::all_of`。

我有一堂统计课：

```
class Statistics {
public:
bool isDataSet() const { return m_data.size() > 0; }
private:
std::vector<double> m_data;
}; 
```

Statistics 类的每个实例都对应一个特定的对象。

**在另一个文件中的另一个函数中，我只想在所有** `Statistics`实例中都初始化数据时才显示统计信息。我想以`std::all_of`下列方式使用函数：

```
if( std::all_of(m_stats.begin(), m_stats.end(), &Statistics::isDataSet) ) {
...
} 
```

在哪里`std::vector<Statistics*> m_stats.`

编译器报告错误，因为“谓词项不计算为采用 1 个参数的函数”。据我所知，每个类成员都将这个指针作为第一个参数传递，所以`Statistics::isDataSet()`实际上应该是一个有1个参数的函数。但是`std::all_of`看错了。

我的假设是否`Statistics::isDataSet()`应该被接受为具有 1 个参数的函数`std::all_of()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T14:53:13.680

采用

```
std::bind(&Statistics::isDataSet, std::placeholders::_1) 
```

或者

```
[](const Statistics& s) { return s.isDataSet(); } 
```

而不是 `&Statistics::isDataSet`调用`all_of`. 后者期望一个*可调用*类型（作为谓词）并将传递一个实例`Statistics`给它。指定没有实例的成员函数显然不足以进行调用

# android - EditText：中心提示，但输入的文本从顶部开始

> ID：14461205
> 
> 赞同：14
> 
> 时间：2013-01-22T14:46:04.323
> 
> 标签：android

嗨，我有一个带有提示的编辑文本，我使用`android:gravity:"center"`. 当我从edittext中开始打字时，打字是从中间开始的，如何让打字从左角开始，同时仍然提示居中

```
<EditText
        android:id="@+id/edittext"
        android:layout_width="230dp"
        android:layout_height="110dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="33dp"
        android:layout_toLeftOf="@+id/relativeLayout1"
        android:background="@drawable/roundcorners"
        android:ems="10"
        android:gravity="center_horizontal"
        android:hint="@string/fbhint"
        android:lines="6"
        android:paddingRight="5dp"
        android:textSize="14sp"      
        android:windowSoftInputMode="stateHidden" /> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-22T15:02:06.427

I don't think this is possible "out-of-the box" but you can do it programmatically:

```
yourEditText.addTextChangedListener(new TextWatcher() {
     public void afterTextChanged(Editable s) {}
     public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

     public void onTextChanged(CharSequence s, int start, int before, int count) {
          if (s.length() > 0){
               // position the text type in the left top corner
               yourEditText.setGravity(Gravity.LEFT | Gravity.TOP);  
          }else{
               // no text entered. Center the hint text.
               yourEditText.setGravity(Gravity.CENTER);  
          }
     }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-22T14:52:42.010

默认情况下，android EditText 具有中心重心。做吧`android:gravity="top|left"`

此外，没有任何特殊属性可用于在中心制作提示和在顶部制作文本。两者都遵循相同的重力属性。

Android提示只是用于用户必须开始输入字符的标签之类的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-11T20:43:41.033

我试图做相反的场景 - 提示出现在左侧，键入的文本出现在中间，我在这里找到了我需要的部分解决方案，但为了其他任何人这样做，我想我会发布我的完整解决方案，适应上述场景:)。

因此，当我试图弄清楚这一点时，我发现存在两个挑战：1）要使提示居中显示，而用户键入的任何文本都是左对齐的。2) 让光标立即出现在用户文本将出现的位置，而不是提示开始的位置。我还希望提示一直保留到用户开始输入，并在用户删除他们输入的内容时重新出现。

我的解决方案涉及两个相互叠加的 EditText 框，上面的框包含提示，下面的框包含文本。像这样：

```
<!-- This EditText box is where the user writes their text. 
It is aligned left, doesn't have a hint in it, 
and is the desired width of the box 
!-->

    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="textShortMessage"
        android:fontFamily="sans-serif-medium"
        android:background="@color/white"
        android:layout_marginTop="5dp"
        android:id="@+id/event_heading"
        android:hint=""
        android:layout_below="@id/page_title"
        />

<!-- This second EditText box only contains the hint text. 
It is centered, is only the width of the hint text, 
and for my purposes, the text was italic !-->

    <EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:inputType="textShortMessage"
        android:fontFamily="sans-serif-medium"
        android:background="@color/white"
        android:layout_marginTop="5dp"
        android:layout_below="@id/page_title"
        android:id="@+id/event_headingHint"
        android:hint="Heading"
        android:gravity="center"
        android:textStyle="italic"
        /> 
```

包含提示的框是第二个，所以它出现在另一个的上方。我在片段中使用它，因此我在片段中覆盖 onCreateView，拉出两个 EditText 框，并将它们发送到我编写的用于添加必要侦听器的方法，如下所示：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState)
{
    View view = inflater.inflate(R.layout.fragment_create_event, container, false);
    EditText heading = (EditText) view.findViewById(R.id.event_heading);
    EditText headingHint = (EditText) view.findViewById(R.id.event_headingHint);
    addFormatTidier(heading, headingHint);
    return view;
} 
```

否则，如果尝试在 Activity 而不是片段中执行此操作，则可以在 onCreate 方法中使用相同的代码，就在 setContentView 命令之后：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    ...
    setContentView(R.layout.activity_add_event);
    EditText heading = (EditText) findViewById(R.id.event_heading);
    EditText headingHint = (EditText) findViewById(R.id.event_headingHint);
    addFormatTidier(heading, headingHint);
    ...
} 
```

最后，对于我的“addFormatTidier”方法，我为每个 EditText 框添加了一个侦听器：首先，我将一个 onFocusChange 侦听器附加到“hint”EditText，以便在用户单击提示时将焦点移到另一个 EditText。然后我将 addTextChangedListener 附加到我的另一个 EditText，以便在用户开始输入后删除提示，并在用户删除他们输入的所有内容时恢复提示，如下所示：

```
private void addFormatTidier(final EditText text, final EditText hint)
{

    // save the hint so I can restore it later
    final CharSequence hintText = hint.getHint();

    // Add a listener to shift focus away from the hint text to the other EditText when the hint is clicked.
    hint.setOnFocusChangeListener(new android.view.View.OnFocusChangeListener()
    {
        @Override
        public void onFocusChange(View v, boolean hasFocus)
        {
            if (hasFocus)
            {
                text.requestFocus();
            }
        }
    });

    // Add a listener to remove the hint text when the user starts typing, and to restore it when the user clears what they have typed.
    text.addTextChangedListener(new TextWatcher()
    {
        public void afterTextChanged(Editable s) {}
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            if (s.length() > 0)
            {
                hint.setHint("");
            }
            else
            {
                hint.setHint(hintText);
            }
        }
    });
} 
```

为了使提示在用户单击该字段后立即消失，如果他们单击离开而不在其中留下任何文本，则提示重新出现，可以使用以下方法代替：

```
private void addFormatTidier(final EditText text, final EditText hint)
{

    // save the hint so I can restore it later
    final CharSequence hintText = hint.getHint();

    // Add a listener to shift focus away from the hint text to the other EditText when the hint is clicked, and simultaneously clear the hint text.
    hint.setOnFocusChangeListener(new android.view.View.OnFocusChangeListener()
    {
        @Override
        public void onFocusChange(View v, boolean hasFocus)
        {
            if (hasFocus)
            {
                text.requestFocus();
                hint.setHint("");
            }
        }
    });

    // Add a listener to remove the hint text when the main EditText receives focus, and to restore it when the EditText loses focus without any text inside it.
    text.setOnFocusChangeListener(new android.view.View.OnFocusChangeListener()
    {
        @Override
        public void onFocusChange(View v, boolean hasFocus)
        {
            if (hasFocus)
            {
                hint.setHint("");
            }
            else
            {
                if(!(text.getText().length()>0))
                {
                    hint.setHint(hintText);
                }
            }
        }
    });
} 
```

我希望这对其他试图弄清楚如何解决类似问题的人有用：D。上面评论中的 userM1433372 让我走上了从哪里开始的正确轨道：D。

# r - 在 R 的数据框中使用 tapply 函数

> ID：14461207
> 
> 赞同：1
> 
> 时间：2013-01-22T14:46:07.567
> 
> 标签：r, tapply

这是我的数据框df：

> ```
> x y 
> ```
> 
> 1 1 1
> 2 1 2
> 3 2 3

我得到了结果：

> 2
> 3

使用代码：

> tapply(df$y, df$x, sum)

但我希望得到

> 3
> 3

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:49:27.667

你得到了正确的答案，只是读错了。

查看整个输出：

```
> tapply(df$y, df$x, sum)
1 2 
3 3 
```

您的组是 1 和 2，值是 3 和 3。是水平的。如果您尝试`tapply`另一个方向，您会看到这一点

```
> tapply(df$x, df$y, sum)
1 2 3 
1 1 2 
```

# matlab - Matlab去除人声

> ID：14461210
> 
> 赞同：3
> 
> 时间：2013-01-22T14:46:19.147
> 
> 标签：matlab, audio, source-separation

我编写了使用 fft 从歌曲中删除人声的程序。在 C# 之前，我决定在 Matlab 中测试降低频率的算法，但无法得到示例中的结果。有噪音。我试过选择任何范围（0.7 - 1.5），但都一样......噪音。我没有什么？请帮我写正确）提前谢谢！

```
[y, fs] = wavread('Song.wav');
left = y(:,1);
right = y(:,2);
fftL = fft(left);
fftR = fft(right);

for i = 1:683550 %in my example 683550
  dif = fftL(i,1) / fftR(i,1);
  dif = abs(dif);
  if (dif > 0.7 & dif < 1.5)
    fftL(i,1) = 0;
    fftR(i,1) = 0;
  end;
end;

leftOut = ifft(fftL);
rightOut = ifft(fftR);
yOut(:,1) = leftOut;
yOut(:,2) = rightOut;

wavwrite(yOut, fs, 'tmp.wav'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:45:44.463

从代码中我可以看到，如果左右之间的强度“相等”（相等被定义为 0.7 和 1.5 之间的比率），您只需将频率内容归类为人声。我不熟悉你这个计划的原因，但它实际上可能会产生一个不错的结果。

您做错了什么很可能与 fft 大小以及您一次性处理完整信号的事实有关，可以这么说。

例如，歌曲中的人声会随着时间而变化，因此您的掩蔽也必须变化。这意味着您必须在时域中将信号分解为帧，并为每个帧分别进行 fft 和屏蔽。此外，您应该考虑在时域框架中使用重叠。

问候

# java - java资源包中语言位置的回退顺序

> ID：14461212
> 
> 赞同：0
> 
> 时间：2013-01-22T14:46:21.310
> 
> 标签：java

比如说，我在资源包中有 pt，但没有 pt_BR 或 pt_PT。pt_BR 和 pt-PT 会退回到 pt 而不是英语吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:19:50.313

缺少`pt_BR`或将在具有基本名称`pt_PT`的资源包中查找条目。不会回退到任何东西（如果那不是错字的话）。`pt``pt-PT`

请参阅[ResourceBundle.getBundle()](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html#getBundle%28java.lang.String,%20java.util.Locale,%20java.lang.ClassLoader%29)。

# qt - Qt 模型/视图与标准小部件

> ID：14461213
> 
> 赞同：5
> 
> 时间：2013-01-22T14:46:21.283
> 
> 标签：qt, qtableview, qtablewidget, qtreeview, qtreewidget

我目前正在阅读 Qt 的模型/视图[教程](http://qt-project.org/doc/qt-4.8/modelview.html)，但我仍然不确定是否应该为我的 Qt 程序使用模型/视图或小部件：

我需要做一个记录器应用程序来监控模拟环境中的所有信息。基本情况可能是：

1.  *用户 1对**虚拟实体 B*说些什么 （记录器应用程序获取用户 1 所说的内容并在表格视图或列表视图中显示）
2.  *虚拟实体 B*回复*用户 1*（记录器应用程序获取用户 1 所说的内容并将其添加到表视图或列表视图中）

ETC

此记录器应用程序的需求是实时获取此信息，并且收集的数据将不可编辑。本质上，这只是为了显示日志。

那么，使用模式/视图或小部件是否值得我想做的事？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T17:21:28.693

我有类似的目标和类似的问题。我看了两个解决方案。

我创建了 20 mb 大小的日志文件。然后，我用自己的模型将他加载到 QTableView 中，并用标准模型将他加载到 QTableWidget 中。

QTableView 比 QTableWidget 更快（约 30 秒）（约 1.5 分钟），但使用 QTableWidget 的解决方案更容易。

关于你的问题我认为，如果你会有大日志（许多信息必须立即加载），你应该使用 QTableView 和自己的模型。其他更轻松的是使用标准模型的 QTableWidget。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:37:30.523

如果日志条目未保存在数据库表中，请使用小部件，否则我会查看模型/视图

# jquery - 菜单和滑块可见性问题

> ID：14461216
> 
> 赞同：1
> 
> 时间：2013-01-22T14:46:25.223
> 
> 标签：jquery, css, menu, slider

悬停产品或示例以查看问题。也许有人过去遇到过这个问题，并且确切地知道出了什么问题。我通过菜单和滑块的 css 代码尽力将定位从绝对位置更改为相对位置等等。当我将图片定位从绝对位置更改为继承时，我几乎得到了答案，但这还不够，它部分起到了作用。简而言之，我被卡住了，所以任何其他想法都会受到赞赏。

```
.lof-slidecontent { position:relative; overflow:hidden; border:#F4F4F4 solid 1px;}
.lof-slidecontent .preload{ height:100%; width:100%; position:absolute; top:0;   left:0;    z-index:100000; text-align:center; background:#FFF}
.lof-slidecontent .preload div{ height:100%;    width:100%; background:transparent url(../images/load-indicator.gif) no-repeat scroll 50% 50%;}

.lof-slidecontent  .sliders-wrapper{    position:relative;  height:100%;    width:900px;    z-index:3px;    overflow:hidden; }
.lof-slidecontent  ul.sliders-wrap-inner{overflow:hidden;   background:transparent url(../images/load-indicator.gif) no-repeat scroll 50% 50%;  padding:0px;    margin:0;   position:relative;  overflow:hidden;}
.lof-slidecontent  ul.sliders-wrap-inner li{overflow:hidden;    padding:0px;margin:0px; float:left; position:inherit;}
.lof-slidecontent  .lof-opacity  li{position:absolute;  top:0;  left:0;     float:inherit; }

.lof-slidecontent  .navigator-content {position:absolute; bottom:10px; right:10px;
background:url(../images/transparent_bg.png) repeat;
padding:5px 0px;
   }
.lof-slidecontent  .navigator-wrapper{  position:relative;  z-index:10;
height:180px;
width:310px;
overflow:hidden;
color:#FFF;
float:left
    } 
```

这里的某个地方可能是 z-index 的问题？

这是完整的代码和问题：

[http://jsfiddle.net/melbourne/vjG56/](http://jsfiddle.net/melbourne/vjG56/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:59:15.970

Add `position:` and `z-index` to the menu like this:

```
.menu, .menu ul {
    margin:0;
    padding:0;
    list-style:none;
    position:relative;
    z-index: 999;
} 
```

# wowza - 在 Wowza 媒体服务器中运行本地磁盘媒体文件

> ID：14461228
> 
> 赞同：1
> 
> 时间：2013-01-22T14:46:57.507
> 
> 标签：wowza

除了安装 Wowza 的主目录的子目录路径之外，还有其他方法可以指定流式视频文件的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T08:53:45.237

是的你可以。进入conf目录：

```
Wowza Media Server 3.5.0\conf\live\Application.xml 
```

找到文件的这一部分：

```
<Streams>
    <StreamType>live</StreamType>
    <StorageDir>${com.wowza.wms.context.VHostConfigHome}/content</StorageDir> 
```

用户**StorageDir**指定您的文件位置，例如：

```
<StorageDir>/usr/home/video</StorageDir> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:37:22.213

是的，您可以使用任何本地或网络目录：例如：C:\yourwowzacontentdirextory

# c# - 无法绑定数据网格中的组合框

> ID：14461236
> 
> 赞同：0
> 
> 时间：2013-01-22T14:47:07.173
> 
> 标签：c#, wpf, xaml, datagrid, datagridcomboboxcolumn

在下面的示例中，我尝试将`PartNumber`要加载的内容绑定到 中`DataGridComboBoxColumn`，但我无法做到。我怎样才能做到这一点？

```
public class Order
{
    public string OrderName { get; set; }
    public List<Parts> PartsList { get; set; }
}

public class Parts
{
    public string PartName { get; set; }
    public double PartQuantity { get; set; }
    public string PartNumber { get; set; }
} 
```

XAML：

```
<DataGrid Name="dgrStavke"
          AutoGenerateColumns="False"
          Height="160"
          Width="600"
          HorizontalAlignment="Left"
          Margin="5"
          Grid.Row="7"
          Grid.ColumnSpan="4"
          ItemsSource="{Binding}">
  <DataGrid.Columns>
    <DataGridComboBoxColumn Header="ValueCombo"
                            ItemsSource="{Binding Path=PartsList}"
                            DisplayMemberPath="PartNumber">
  </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:50:12.710

使用**ObservableCollection**而不是**List**。如果你想使用 list 那么你必须通知它。但最好的方法是使用 ObservableCollection。我希望这将有所帮助。

我刚刚看到 ComboBox 的 ItemSource 也不正确，应该是这样的

```
ItemsSource="{Binding Path=Order.PartsList}" 
```

# python - 相对于第三列的内容重新编号两列中制表符分隔的数据

> ID：14461242
> 
> 赞同：0
> 
> 时间：2013-01-22T14:47:23.343
> 
> 标签：python, perl, biopython

我还有另一个数据处理问题。所以我有这个制表符分隔数据的 .gtf 文件，我需要提取某些特征。这在我只需要为每个基因中的每个“外显子”类型提取基因 ID、POS1 和 POS2 之前就更简单了。我需要做同样的事情，但是我首先需要找到每个外显子相对于其在基因中的位置的 POS1 和 POS2。现在，POS1 和 POS2 列是根据 TYPE 在整个基因组上的位置进行编号的（这就是数字如此之高的原因）。还有另一个问题，如果链是-，则相反。如果您查看 PITG_00002，您会发现终止密码子似乎位于起始密码子之前。这是因为所有内容都相对于 +（模板）链进行编号。因此，这是数据表的示例：

```
GENE ID     TYPE        POS1    POS2    STRAND
PITG_00003  start_codon 38775   38777   +   0
PITG_00003  stop_codon  39069   39071   +   0
PITG_00003  exon        38775   39071   +   .
PITG_00003  CDS         38775   39068   +   0
PITG_00004  start_codon 39526   39528   +   0
PITG_00004  stop_codon  41492   41494   +   0
PITG_00004  exon        39526   40416   +   .
PITG_00004  CDS         39526   40416   +   0
PITG_00004  exon        40486   40771   +   .
PITG_00004  CDS         40486   40771   +   0
PITG_00004  exon        40827   41494   +   .
PITG_00004  CDS         40827   41491   +   2
PITG_00002  start_codon 10520   10522   -   0
PITG_00002  stop_codon  10097   10099   -   0
PITG_00002  exon        10474   10522   -   .
PITG_00002  CDS         10474   10522   -   0
PITG_00002  exon        10171   10433   -   .
PITG_00002  CDS         10171   10433   -   2
PITG_00002  exon        10097   10114   -   .
PITG_00002  CDS         10100   10114   -   0 
```

因此，对于每个基因，我需要相对于“起始密码子”类型的位置从 1 开始数字。不幸的是，STRAND 上列出的基因的数字是倒数的（例如，PITG_00002）。所以对于这些情况，编号需要从相对于 start_codon 的 POS2 的 1 开始，并在外显子的 POS1 结束。

所以对于每个外显子，我需要得到一个新的 POS1 和 POS2，我将它们称为 POSA 和 POSB。

要获得每个外显子的 POSA，我会这样做：

```
POS1 of "exon" - POS1 of "start_codon" + 1 = POSA 
```

要获得每个外显子的 POSB，我会这样做：

```
POS2 of "exon" - POS1 of "start_codon" + 1 = POSB 
```

以 PITG_00004 为例：

```
POSA = 39526-39526 + 1 = 1
POSB = 40416 - 39526 + 1 = 891 
```

然后对每个基因中的每个外显子做同样的事情，使用该基因的 start_codon 位置来重置编号。除了负链的情况外，在这种情况下我必须这样做：

要获得每个外显子的 POSA，我会这样做：

```
POS2 of "start_codon" - POS2 of "exon" + 1 = POSA 
```

要获得每个外显子的 POSB，我会这样做：

```
POS1 of "start_codon" - POS1 of "exon" + 1 = POSB 
```

最终我想得到这个：

```
PITG_00002 exon 1 49
PITG_00002 exon 90 352
PITG_00002 exon 409 426
PITG_00003 exon 1 297
PITG_00004 exon 1 891
PITG_00004 exon 961 1246
PITG_00004 exon 1302 1969 
```

我不确定如何为 + 链执行此操作，而为 - 链执行另一种方式。我最近更经常使用 python，但我也可以使用 perl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:39:26.900

Perl 解决方案。使用哈希来存储每个基因的信息。该`@idxs`数组用于避免重复公式。

```
#!/usr/bin/perl
use warnings;
use strict;
use feature qw(switch);

my %hash;
<>;                   # Skip header.
while (<>) {
    my ($id, $type, $pos1, $pos2, $strand, undef) = split;
    given ($type) {
        when ('start_codon') {
            $hash{$id}{start}  = [$pos1, $pos2];
            $hash{$id}{strand} = $strand;
        }
        when ('stop_codon') {
            $hash{$id}{stop}  = [$pos1, $pos2];
        }
        when ('exon') {
            push @{ $hash{$id}{exons} }, [$pos1, $pos2];
        }
    }
}

for my $id (sort keys %hash) {
    my @idxs = '+' eq $hash{$id}{strand} ? (0, 1) : (1, 0);
    for my $exon (@{ $hash{$id}{exons} }) {
        my $posa = 1 + abs $hash{$id}{start}[$idxs[0]] - $exon->[$idxs[0]];
        my $posb = 3 + abs $hash{$id}{start}[$idxs[1]] - $exon->[$idxs[1]];
        print "$id exon $posa $posb\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:40:54.477

好的，这是您问题的解决方案（至少就我所理解的而言）：它基于 pandas 库（[http://pandas.pydata.org/](http://pandas.pydata.org/)），这是目前 Python 中数据分析的黄金标准。

首先加载您的数据：

```
data = pd.read_csv('genetest.csv', sep='\t',
                   converters={'STRAND': lambda s: s[0]}) 
```

转换后的只是从 strand 列中去除多余的字符，只留下 + 或 -。

现在你去使用 groupby 函数通过链方向和基因名称来分离你的序列

```
groups = data.groupby(['STRAND', 'GENE_ID']) 
```

这将返回具有相同链方向和基因名称的数据集，您可以分别处理它们中的每一个。因此，我们将它们作为字典的项目（键值对列表）进行迭代并对其进行操作。

```
corrected = []
for (direction, gene_name), group in groups:
    print direction,gene_name
    # take the index of the element you are going to subtract to the others
    start_exon = group.index[group.TYPE=='start_codon'][0]
    # now you perform your normalization and put it back into your group
    if direction == '+':
        group['POSA'] = 1 + group.POS1 - group.POS1[start_exon]
        group['POSB'] = 1 + group.POS2 - group.POS1[start_exon]
    else:
        group['POSA'] = 1 - group.POS2 + group.POS2[start_exon]
        group['POSB'] = 1 - group.POS1 + group.POS2[start_exon]
    print group
    # put into the result array
    corrected.append(group)
# join them together to obtain the whole dataset with the POSA and POSB
new_data = pd.concat(corrected)
print new_data 
```

这就是你得到的：

```
 GENE_ID     TYPE    POS1    POS2    STRAND  POSA    POSB
0   PITG_00003  start_codon     38775   38777   +   1   3
1   PITG_00003  stop_codon  39069   39071   +   295     297
2   PITG_00003  exon    38775   39071   +   1   297
3   PITG_00003  CDS     38775   39068   +   1   294
4   PITG_00004  start_codon     39526   39528   +   1   3
5   PITG_00004  stop_codon  41492   41494   +   1967    1969
6   PITG_00004  exon    39526   40416   +   1   891
7   PITG_00004  CDS     39526   40416   +   1   891
8   PITG_00004  exon    40486   40771   +   961     1246
9   PITG_00004  CDS     40486   40771   +   961     1246
10  PITG_00004  exon    40827   41494   +   1302    1969
11  PITG_00004  CDS     40827   41491   +   1302    1966
12  PITG_00002  start_codon     10520   10522   -   1   3
13  PITG_00002  stop_codon  10097   10099   -   424     426
14  PITG_00002  exon    10474   10522   -   1   49
15  PITG_00002  CDS     10474   10522   -   1   49
16  PITG_00002  exon    10171   10433   -   90  352
17  PITG_00002  CDS     10171   10433   -   90  352
18  PITG_00002  exon    10097   10114   -   409     426
19  PITG_00002  CDS     10100   10114   -   409     423 
```

顺便说一句，您在问题中写下错误的距离校正，应该是

```
POS1 of "start_codon" - POS2 of "exon" + 1 = POSB 
```

使倒置的字符串具有几何意义（并获得您发布的值）

# java - Spring在security-context.xml中使用applicationContext中的bean

> ID：14461243
> 
> 赞同：0
> 
> 时间：2013-01-22T14:47:23.373
> 
> 标签：java, spring, spring-security

我有以下条目

网页.xml：

```
 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml /WEB-INF/spring-security.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

应用上下文：

```
<bean id="myUserDAO" class="no.java.UserDAOImpl">
    <property name="DataSource" ref="myDataSource"/>
</bean> 
```

在 spring-security.xml 我有以下条目：

```
<beans:bean id="myUserDetailsService" class="no.java.SimpleUserDetailsService" >
            <property name="UserDAO" ref="myUserDAO" />
 </bean> 
```

现在我得到以下错误

```
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 13 in XML document from ServletContext resource [/WEB-INF/spring-security.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 13; columnNumber: 56; cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'property'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396) 
```

据我了解，我应该得到类似 bean myUserDAO undefined 或类似的东西，但我没有。我会非常感谢任何帮助，因为我现在已经享受这个错误好几个小时了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:51:01.580

您的 XML 格式不正确，这

```
<beans:bean id="myUserDetailsService" class="no.java.SimpleUserDetailsService" >
    <property name="UserDAO" ref="myUserDAO" />
</bean> 
```

应该

```
<beans:bean id="myUserDetailsService" class="no.java.SimpleUserDetailsService" >
    <beans:property name="UserDAO" ref="myUserDAO" />
</beans:bean> 
```

# bash - 在 bash 中获取自定义日期值的 EPOCH 时间

> ID：14461247
> 
> 赞同：4
> 
> 时间：2013-01-22T14:47:29.217
> 
> 标签：bash

我需要编写一个 bash 函数来返回自定义日期的 EPOCH 时间。

我在格式中使用日期和时间；

```
date=20130122 # i.e. 2013 01 22
time=1455     # i.e. 14:55 
```

我可以使用这些值获得 EPOCH 时间吗？

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T14:57:16.207

```
date -d "$date $time" +%s 
```

可以在 GNU date 中工作。

对于 BSD `date`（包含在 Mac OS X 中），命令为

```
date -j -f "%Y%m%d %H%M" "$date $time" +%s 
```

（`-f`需要解析您的日期和时间；默认格式需要“012214552013”​​来指定相同的时间）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T14:58:12.190

简短的回答：

```
date --date "20130122 1455" +%s 
```

这将为您提供时代的日期。

或者，如果您使用变量，只需像这样替换日期和时间：

```
d=20130122
t=1455
date --date "$d $t" +%s 
```

并尽量避免使用“日期”和“时间”作为变量名，因为它们很容易被误解为命令（它们都是有效的命令）。这是为了增加可读性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-09T15:15:48.417

偶然发现了这个。在 BASH 3.2 中，我收到“无效日期”错误。应该：

```
date -d "2013-01-22 14:55" +%s 
```

# linux - Linux 包交叉编译

> ID：14461252
> 
> 赞同：2
> 
> 时间：2013-01-22T14:47:39.753
> 
> 标签：linux, compilation, cross-compiling, archlinux, pandaboard

我正在使用运行 Arch Linux 的单板计算机 (Pandaboard) 构建非视觉监视 (声纳) 平台。问题是，当我需要在我的安装中添加一个功能时，这些`make`进程`make install`会永远在低功耗计算机上运行。我希望有类似经验的人指出一个解决方案，用于在另一个 linux 机器（也运行 Arch）上编译包，然后将它们移植到 SBC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:38:50.960

您是否阅读或访问过*Linux Format*杂志？在第 166 期有一篇关于这个主题的文章。目标是 Raspberry Pi，但过程是相同的。

基本上，您需要在 x86 机器上安装交叉编译器。尝试这个：

```
yaourt -S arm-linux-gnueabi-gcc 
```

在您继续之前，请使用`hello,world`可以在 x86 上编译、复制到设备并执行的简单工具链来测试该工具链。

```
/* hello.c */
#include <stdio.h>
int main ()
{
   printf("Hello, World!\n");
   return 0;
} 
```

编译命令将类似于

```
arm-linux-gnueabi-gcc -o gello hello.c 
```

有了它，您可以交叉编译内核：

```
git clone --depth 1 git://github.com/raspberrypi/linux.git
cd linux
ssh root@alarmpi zcat /proc/config.gz > .config
make -j 8 ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- menuconfig -k 
```

您可以使用 distcc 在 pandaboard 上执行构建，但让它将编译委托给您的 x86 机器，该机器将使用您的交叉编译器工具链为 arm 编译。在 arm 和 x86 上：

```
pacman -S distcc 
```

手臂侧是客户端。编辑它的配置，`/etc/makepkg.conf`告诉它服务器（你的 x86 机器）：

```
BUILDENV=(fakeroot distcc color !ccache)
DISTCC_HOSTS="myx86host"
MAKEFLAGS="-j8" 
```

j8 告诉它使用 i7 上的所有内核。适当调整。

在服务器上，您需要配置 distccd`/etc/conf.d/distccd`以允许客户端连接，然后启动`distccd`守护程序。然后，您从客户端启动您的构建。

用于构建 Arch 包的 makepkg 工具负责 distcc 链接。如果您正在构建自己的包，我建议您将它们包装在 PKGBUILD 中，以便为您完成工作。

（如果您的电路板使用它，您可能需要调整上述某些内容以实现硬浮动）

# c# - 表格单元格的 Word 互操作复制格式化文本

> ID：14461262
> 
> 赞同：7
> 
> 时间：2013-01-22T14:48:06.493
> 
> 标签：c#, ms-word, ms-office, add-in, office-interop

我正在为 word 编写一个插件来自动编辑协议模板。

模板中有一个表格，我想提取/复制该表格内单元格的格式化文本。

现在我正在这样做：

```
Range formattedText = agendaTable.Rows[i].Cells[1].Range;
string temp = formattedText.WordOpenXML; 
```

稍后我想将文本粘贴到另一个表格单元格中：

```
otherTablesRow.Cells[1].Range.InsertXML(temp); 
```

格式是正确的，除了最后的换行符（“\r\a”），它来自我从单元格中提取文本的范围。似乎 word 使用换行符来标记单元格结束。

因此，在将文本插入其他表格单元格后，我有两个换行符。如何避免重复换行符？有人知道检索单元格内容的替代方法吗？

* * *

更新：也许我以另一种方式问我的问题。

我的总体问题是将多个格式化文本范围复制到内存中，然后将其粘贴到同一文档中的某个位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T09:53:10.070

尝试以下代码，它将文本和格式从一个单元格复制到另一个单元格：

```
var copyFrom = agendaTable.Rows[i].Cells[1].Range;
var copyTo = otherTablesRow.Cells[1].Range;

copyFrom.MoveEnd(WdUnits.wdCharacter, -1);
copyTo.FormattedText = copyFrom.FormattedText; 
```

在您的示例中，agendaTable Range 中有一个 **单元格结束字符**会弄乱目标单元格；使用**MoveEnd**我们复制除单元格字符结尾（最后一个字符）之外的所有内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T09:52:54.040

您可以通过这种方式复制和粘贴选择：

```
public void Copy()
{
    var selection = (Range)Application.Selection;
    selection.Copy();
}

public void Paste()
{
    var selection = (Range)Application.Selection;
    selection.PasteSpecial();
} 
```

第一个选择是您从中复制的位置，第二个是复制粘贴的位置。

编辑：在不使用剪贴板的情况下复制格式化文本（这是简单的 XML 副本）：

```
List<string> copies = new List<string>();
public void Copy()
{
    Microsoft.Office.Interop.Word.Selection wordSelection = Application.Selection;
    if (wordSelection != null && wordSelection.Range != null)
    {
        copies.Add(wordSelection.get_XML());
    }            
}

public void Paste(int index)
{
    Microsoft.Office.Interop.Word.Selection wordSelection = Application.Selection;
    if (wordSelection != null && copies.Count > index)
    {
        wordSelection.InsertXML(copies[index]);
    }              
} 
```

# multithreading - 修改 DataView 线程安全

> ID：14461264
> 
> 赞同：1
> 
> 时间：2013-01-22T14:48:17.100
> 
> 标签：multithreading, ado.net, datatable, thread-safety, dataview

我正在并行化我的一些代码，在本节中，我让 DataViews 访问一个公共 DataTable。有些地方我修改了 DataView，但在线程之间必然是离散的记录。如果我知道不会同时触及特定记录，我是否还需要为这些修改（不是行添加/删除，而只是 mods）建立信号量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:48:44.550

好吧，我继续尝试实现该解决方案，就好像那是真的一样，而且 a**不是**`DataTable`线程安全的。 *例如*，同时修改一个记录并创建一个新的（不相关的）将导致异常。我想这是一个很好的学习练习。***`DataView`***

# html - 显示电话、电子邮件和传真是否具有语义？ 下面的代码语义是否使用了HTML 表格？ < 问问题 问问题 2013-01-22T14:48:20.590 151 次 This question shows research effort; it is useful and clear 5 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 下面的代码语义是否使用了HTML 表格？

| Phone | +1234567 |
| Email | [name@example.com](mailto:name@example.com) |
| Fax | +1234568 |

未格式化，它将如下所示： 对我来说似乎是表格数据。（因此，不仅是为了布局——尽管副作用是它有助于拥有相等的列。） 你可以使用这个： ~AAA\*[A-Z]\*\*63 注意 \ 用于转义 * 和 [AZ] 匹配任何大写字母字符。 htmlhtml-tablesemantic-websemantic-markup 4 2 回答 2 This answer is useful 4 如果您仅出于布局目的而将联系人放入其中，那么您最好使用 css styled。标识符将进入

s，数据进入

s。 但是，如果您实际上是在输出一个包含多个联系人的表格，那么

将是使用正确的元素。不要忘记使用

| s 作为标识符，使用 s | 作为数据。 于 2013-01-22T14:59:46.090 回答 This answer is useful 4 这里没有非黑即白的答案，但这不是表格数据。 联系信息绝对没有理由需要相同的列，这纯粹是表格的美观优势，并且由设计师自行决定。我不会为这种数据使用表格，我会坚持使用其他元素，然后使用 CSS 创建相等的宽度。 我会将表格数据定义为您可以在电子表格上看到的数据。 于 2013-01-22T14:51:22.887 回答 Related 4 ios - 隐藏 UICollectionViewCell 1 objective-c - 核心数据：没有目标实体的关系？ 1 apache - 使用 htaccess 重写部分 url 1 ios - 关于如何解决此“语义问题”错误的建议 3 c++ - 多平台窗口界面 1 php - 如何用 SimpleXMLElement PHP 替换 XML 节点 2 vba - 如果为 null，则显示零 0 backbone.js - 主干js，向dom添加视图不刷新页面 1 javascript - 如何创建 AngularJS 指令以获取 jquery 对话框并在按下输入按钮时提交 2 ios - IOS (AddressBook) - 无法检索 kABPersonFatherLabel 和其他标签的值 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 
> ID：14461265
> 
> 赞同：5
> 
> 时间：
> 
> 标签：html, html-table, semantic-web, semantic-markup

下面的[代码](http://jsbin.com/adigas/1/edit)语义是否使用了[HTML 表格？](http://www.w3.org/TR/html401/struct/tables.html)

```
<table>
    <tbody>
    <tr>
        <th>Phone</th>
        <td>+1234567</td>
    </tr>
    <tr>
        <th>Email</th>
        <td><a href="mailto:name@example.com">name@example.com</a></td>
    </tr>
    <tr>
        <th>Fax</th>
        <td>+1234568</td>
    </tr>
    </tbody>
</table> 
```

未格式化，它将如下所示：![在此处输入图像描述](../Images/d3541740b7a9eb3074603a494b2662a7.png)对我来说似乎是表格数据。（因此，不仅是为了布局——尽管副作用是它有助于拥有相等的列。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:59:46.090

如果您仅出于布局目的而将联系人放入其中`<table>`，那么您最好使用 css styled `<dl>`。标识符将进入`<dt>`s，数据进入`<dd>`s。但是，如果您实际上是在输出一个包含多个联系人的表格，那么`<table>`将是使用正确的元素。不要忘记使用`<th>`s 作为标识符，使用 s`<td>`作为数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T14:51:22.887

这里没有非黑即白的答案，但这不是表格数据。联系信息绝对没有理由需要*相同的列*，这纯粹是表格的美观优势，并且由设计师自行决定。我不会为这种数据使用表格，我会坚持使用其他元素，然后使用 CSS 创建相等的宽度。我会将表格数据定义为您可以在电子表格上看到的数据。 |

# html - 如何将标签和值属性显示为jsp中的标签

> ID：14461271
> 
> 赞同：0
> 
> 时间：2013-01-22T14:48:47.020
> 
> 标签：html, jsp, struts, label, key-value

我正在使用下面的代码来显示一个分支列表。

```
<html:option value="">--Select Branch--</html:option>
<html:optionsCollection name="branchList" label="label" value="key"/> 
```

如何在标签中同时显示分支标签和分支值。例如：现在它显示标签为“西雅图”，值为“SEA”。我希望值保持不变，但标签显示为“西雅图（SEA）”

另外，这是jsp的一部分。更新：应用程序使用 struts 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:41:09.033

将以下方法添加到您的 bean：

```
public String getDisplayedLabel() {
    return label + "(" + key + ")";
} 
```

并使用

```
<html:optionsCollection name="branchList" label="displayedLabel" value="key"/> 
```

# ruby-on-rails - 在根 URL 上使用可选参数的 Rails 路由

> ID：14461272
> 
> 赞同：0
> 
> 时间：2013-01-22T14:48:48.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

我正在开发一个允许用户访问根 url 的应用程序，如下所示： `http://localhost:3000/param_here`

我的路线设置如下：

```
match '/:test' => redirect { |params| "/?id=#{params[:test]}" } 
```

这样做的问题是我的其他路线也被拾取并被重定向。

全路由.rb

```
Myapp::Application.routes.draw do
  match '/:test' => redirect { |params| "/?id=#{params[:test]}" }
  match '/aboutus', to: 'pages#aboutus', as: "about_us"

  # Set the Home Page to a static page  
  root :to => 'pages#home'
end 
```

因此，如果用户转到`/aboutus`，重定向会选择它并假定它应该设置为`id`. 我仍然想使用常规路线来实现此重定向

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:53:38.390

您是否尝试过将 /aboutus 路由规则移到

```
 match '/:test' => redirect { |params| "/?id=#{params[:test]}" } 
```

您的路线文件中的规则？

路由从上到下流动，因此如果您将 /about us 路由移动到带有可选参数的路由上方，它应该将您的请求发送到第一个匹配的路由，在这种情况下是 /aboutus 路由

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:56:46.017

```
match '/:test' => redirect { |params| "/?id=#{params[:test]}" }, :defaults => { :id => '#{params[:test]}' } 
```

# java - 从方法返回“void”或“null”

> ID：14461278
> 
> 赞同：-1
> 
> 时间：2013-01-22T14:48:54.547
> 
> 标签：java, c++, c, methods, return-value

在这里我有几个问题：

1）我试图`null`从一个方法返回一个值，像这样（只有当`TypeCasted`进入对象时）：

```
 public static Object returns()
{
   return (Object)null ;
} 
```

并存储对象：

```
 ...main()..{
 Object obj=  returns();
 ...} 
```

当我检查时：

```
 if( obj.equals(obj)) 
```

扔了一个`NullPointerException`

但，

```
 if(null==null)
 System.out.println("works"); 
```

编译并给出正确的输出。有什么原因吗？

2）另外，当我尝试：

```
 public static Object returns()
{
  return (Object)void ;
} 
```

给我`Syntax Error`。有什么理由吗？

3）这种行为在`C/C++`？或任何其他`OO`语言中会有所不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:51:29.613

您不能调用`equals`on`null`而应该使用`==`. 注意调用`==`和`equals`不一样。`==`比较引用 while`equals`是一种按照惯例比较**值**的方法。由于 null 对象没有值，因此对它没有任何意义。

Void 不是任何语言的值，因此不能转换为任何东西（在这种情况下`Object`）。

在 C++ 中要返回 NULL，您必须返回一个指针。要比较返回的对象，您必须键入以下内容：

```
 if( *obj == *obj) 
```

由于 obj 为 NULL，这将再次失败。在我知道的任何语言中，您都必须在比较之前对 null 进行显式检查。

编辑：想想你尝试的东西会起作用`ruby`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:53:18.610

1)

```
if(obj.equals(obj)) 
```

确实，默认`equals`实现只是用于`==`检查两个对象（实际上是两个引用）是否实际上引用了内存中的同一个对象，但它仍然是对实例方法的调用，`NullPointerException`如果它是必然会失败叫过来一个`null`。

```
 if(null==null) 
```

相反没有任何问题，因为你没有调用任何实例方法，你只是在比较地址。

2)`void`只是一个关键字，用于标记不返回任何内容的函数¹；尝试退货没有任何意义。`null`，相反，将对象引用标记为不指向任何内容，这是一个完全不同的概念。

3) 在 C++ 中没有默认的“equals”方法，并且整个对象模型都是基于*值类型*的（在 Java 中，您通常使用对对象的引用），因此很难进行精确的比较。²

在 C++ 中，对象（或引用）被*保证*是“有效”对象（=为其分配了空间并且构造函数已运行），因此不可能`NullPointerException`在对象上调用实例方法时获得假设的等价物.

另一方面，完全有可能有一个*指针*，`NULL`在这种情况下，如果您尝试以某种方式（例如通过`*`或`->`）取消引用它，您将进入未定义的行为（通常是崩溃）³。

至于相等性检查：`==`对象的运算符默认情况下没有实现，因此只有当类的实现者实际上为`operator==`;编写了重载时，比较对象的相等性才有意义。至于指针，`==`运算符由语言本身提供（不能被覆盖），它实际上比较两个地址。

* * *

1.  与 C 和 C++ 相比， where`void`被认为是一种类型（特别是“无法完成的不完整类型”），在 Java 中[它不是](https://stackoverflow.com/questions/4681568/in-java-can-void-be-considered-a-primitive-type)，尽管在某些方面它可以被认为是这样的。
2.  在 C 中没有类或方法*时期*——它不是 OO 语言；尽管如此，接下来的大部分讨论都适用于`struct`s 和访问它们的字段。
3.  虽然......如果实例方法不是`virtual`并且不使用对象的任何字段（=`this`指针没有以任何方式取消引用），在大多数实现中，您可能会在`NULL`指针上调用实例方法。此外，通过“正式取消引用”指针，您可以避免创建“空引用”，这可能会在使用时造成麻烦。但是在这两种情况下，它仍然是未定义的行为 - 即，它不正确，尽管通常不执行预防性检查，有利于性能而不是严格的规则执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:55:04.187

`(Object)null`为 null，这意味着您不能在其上使用任何方法，因为它不存在。

至于语法错误，在Java`void`中是一个类型，而不是一个值，所以你不能返回`void`。

# java - Java如何将从sdcard文件中读取的文本拆分为不同的数组

> ID：14461279
> 
> 赞同：1
> 
> 时间：2013-01-22T14:49:01.433
> 
> 标签：java, arrays, android-intent, storage, bundle

我正在做学校作业，需要一些帮助。

Android 我将这些坐标存储在 sdcard 的 txt 文件中，它们以这种方式存储

```
x.xxxxxxxx|x.xxxxxxxxxy
x.xxxxxxxx|x.xxxxxxxxxx 
```

等等。我正在做的是尝试使用 listview.onclicklistener(){，所以一旦我点击一个文件，它就会读取它并向带有数据的地图发送一个意图。我想要的是将它存储在两个不同的数组中，例如同一文件中的经度 [] 和纬度 []，以发送到 map.class 以用作创建标记的参数。我知道如何拆分它，但我不知道如何将它们存储到单独的数组中。

```
 lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            File logFile = new File(Environment.getExternalStorageDirectory().toString(), "GPSLogger/testfile.txt");
            InputStream instream = null;
            try {
                instream = new FileInputStream(logFile);
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            BufferedReader reader = new BufferedReader(new InputStreamReader(instream));
            String line = null;
            String[] Location = null;
            int i = 0;
            String[] Longitude = null;
            String[] Latitude = null;

            try {
                while((line = reader.readLine()) != null){
                    Log.v("result" ,result);
                    result += line + "|";

                    Location = result.split("\\|");
                    for (String s : Location) {
                        Log.v("asd",s);
                        i++;
                        if(i%2==0){
                            String[] Longitude = Location[0];

                        }
                        else{
                            String Latitude = Location[0];
                        }
                    } 
```

这就是我正在尝试的，但我遇到了很多错误。请提前帮助和感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:01:46.503

If file looks like you mentioned in question try this:

```
String longtitudeLine = reader.readLine();
String latitudeLine = reader.readLine();
String[] longtitudeCoordinates = longtitudeLine != null ? longtitudeLine.split("\\|") : null; //Array will be null if line is empty
String[] latitudeCoordinates = latitudeLine != null ? latitudeLine.split("\\|") : null; // Array will be null if line is empty 
```

Note: this will work in case you sure that first two lines is coordinates.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:12:02.303

您的问题是您必须在输入数组之前实例化数组（尤其是纬度和经度），但在实例化它们之前您必须知道数组的大小。只有读完这条线，你才会知道这个尺寸......

这是一个两难境地。

幸运的是，有不止一种方法可以做到这一点。

例如，您可以执行您尝试的操作：填充（大）字符串中的所有行，然后填充数组。

```
 BufferedReader reader = new BufferedReader(new InputStreamReader(instream));
        String line = null;
        String[] location = null;
        String longitude = null;
        String latitude = null;
        StringBuffer buffer = new StringBuffer();

        while((line = reader.readLine()) != null) {
                Log.v("result" ,result);
                buffer.append(line).append("|");
            }
        location = buffer.toString().split("\\|");
        // Compute the size of the list
                    // There's an odd number of elements because of the
                    // last trailing '|'
        int size = (location.length - 1) / 2;
        longitude = new String[size];
        latitude = new String[size];
        for (int i=0; i<size;i++) {
            longitude[i]=location[i*2];
            latitude[i]=location[i*2+1];
            } 
```

您还可以使用“动态”大小的对象，例如`ArrayList<String>`，当您事先不知道长度时，您可以使用它来存储值数组......

# c# - 在 csharp-sqlite .Net 库中使用 BeginTransaction 时出错

> ID：14461280
> 
> 赞同：0
> 
> 时间：2013-01-22T14:49:11.430
> 
> 标签：c#, sqlite, windows-8

我正在使用 csharp-sqlite 库。

编码：

```
var conn = new SQLite.SQLiteConnection(DatabasePath);
conn.Execute("insert or replace into Option(Key, Value) values ('A', '1')");
conn.Execute("insert or replace into Option(Key, Value) values ('B', '2')"); 
```

它按我的预期工作。但是，当我使用 BeginTransaction() 和 Commit 时，在第二个 Excute 中出现异常：“CannotOpen”，本机是 SQLITE_CANTOPEN（错误 14）。

代码将是：

```
var conn = new SQLite.SQLiteConnection(DatabasePath);
try
{
  conn.BeginTransaction();
  conn.Execute("insert or replace into Option(Key, Value) values ('A', '1')");
  conn.Execute("insert or replace into Option(Key, Value) values ('B', '2')");
  conn.Commit();
}
catch (SQLiteException ex)
{
     _conn.Rollback();

} 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:07:14.320

从我看到的示例中，虽然它们并非都使用 CSharp-Sqlite，但您应该像这样使用它：

```
using(var conn = new SQLite.SQLiteConnection(DatabasePath)) 
{
  conn.Open();
  using(var tr = conn.BeginTransaction())
  {
    try
    {
      using(var cmd = conn.CreateCommand())
      {
        cmd.Transaction = tr;
        cmd.CommandText = @"insert or replace into Option(Key, Value) 
                              values ('A', '1')";
        cmd.ExecuteNonQuery();
        cmd.CommandText = @"insert or replace into Option(Key, Value) 
                              values ('B', '2')";
        cmd.ExecuteNonQuery();
      }
      tr.Commit();
    }
    catch (SQLiteException ex)
    {
      tr.Rollback();
    }
  }
  conn.Close();
} 
```

[这是其中一个例子](http://zetcode.com/db/sqlitecsharp/trans/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T21:30:21.553

我在 WinRT 上运行时遇到了这个问题。

这个编译指示解决了这个问题：

```
using(var connection = new SQLiteConnection(dbPath))
{
   connection.Execute(string.Format("PRAGMA temp_store_directory = '{0}';", Windows.Storage.ApplicationData.Current.TemporaryFolder.Path));
} 
```

请参阅 [http://sqlite.1065341.n5.nabble.com/Transaction-issues-with-WinRT-build-td63817.html](http://sqlite.1065341.n5.nabble.com/Transaction-issues-with-WinRT-build-td63817.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T22:16:31.707

我认为您需要将 SQLite 用于 WinRT（而不是默认的 SQLite 包）和 sqlite-net 中的 SQLite 异步包装器。Windows 8 中的文件 IO 接口已更改，因此当本机 DLL 尝试使用它们时会出现异常。

有关如何使用异步包装器的演练，请参见此处：http: [//blog.thomaslebrun.net/2012/10/windows-8-using-sqlite-in-your-windows-store-application/](http://blog.thomaslebrun.net/2012/10/windows-8-using-sqlite-in-your-windows-store-application/)

# asp.net - .NET IIS 默认为 index.html

> ID：14461282
> 
> 赞同：1
> 
> 时间：2013-01-22T14:49:13.333
> 
> 标签：asp.net, iis

我正在使用 asp.net 4。这可能更像是一个 IIS 问题。

假设我的网站在子站点文件夹下有一个子站点，如下所示：

```
 www.qinc.com/subsite/index.html 
```

我喜欢做的是让用户输入

```
 www.qinc.com/subsite 
```

并让页面默认转到 www.qinc.com/subsite/index.html 而不必键入 index.html。

做这个的最好方式是什么？

我的 web.config 中确实有类似的东西，但我怎样才能使它适用于子站点？：

```
 <defaultDocument>
     <files>
      <clear />
      <add value="Default.htm" />
      <add value="Default.asp" />
      <add value="index.htm" />
      <add value="index.html" />
      <add value="httpredirect.htm" />
      <add value="iisstart.htm" />
      <add value="default.aspx" />
    </files>
  </defaultDocument> 
```

但我认为它是针对主站点 www.qinc.com 与 www.qinc.com/subsite 的子域进行的。有没有办法告诉它也将其应用于子站点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:50:49.530

您需要添加`index.html`到 IIS 站点配置中的默认文档列表。

# wordpress - 什么会使自定义帖子类型模板不显示？

> ID：14461285
> 
> 赞同：4
> 
> 时间：2013-01-22T14:49:18.037
> 
> 标签：wordpress, custom-post-type

所以我在一个 WordPress 网站上工作，我需要创建一个自定义帖子类型。我有使用 WordPress 初始化它的功能设置

```
add_action( 'init', 'init_staff' );

function init_staff(){
 register_post_type('staff_members',array(
   "labels" => array(
     "name" => "Staff Members",
     "singular_name" => "Staff Member",
     "menu_name" => "Staff Members",
     "add_new" => "Add New",
     "add_new_item" => "Add New Staff Member",
     "edit" => "Edit",
     "edit_item" => "Edit Staff Member",
     "new_item" => "New Staff Member",
     "view" => "View",
     "view_item" => "View Staff Member",
     "search_items" => "Search Staff Members",
     "not_found" => "No Staff Member Found",
     "not_found_in_trash" => "Staff Member Not Found in Trash" 
    ),
    "public" => true,
    "supports" => array('title','editor','thumbnail'),
    "has_archive" => true
 )); 
```

}

然后，我创建了一个包含 WordPress 循环的 single-staff_members.php 文件，但是当我导航到[www.mysite.com/staff_members](http://www.mysite.com/staff_members)或[www.mysite.com/staff_members/post_title](http://www.mysite.com/staff_members/post_title)时，我得到了您正在寻找的页面不存在404。

这是 single-staff_members.php 文件

```
<?php
   get_header();
?>
<div id="leftcolumn">
   <div class="main-content">
      <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
      <h1><?php the_title(); ?></h1>
      <?php the_content(); ?>
      <?php endwhile; else: ?>
      <p>Sorry, no posts found.<p></p>
      <?php endif; ?>
   </div>
</div>
<?php
   get_footer();
?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T19:26:47.447

刷新永久链接结构（设置->永久链接点击保存）。

# jquery - 将 JSON 数据加载到下拉列表中

> ID：14461287
> 
> 赞同：-1
> 
> 时间：2013-01-22T14:49:24.323
> 
> 标签：jquery, json

我有一个 JSON 返回下拉值（值和文本）。我需要将该数据加载到我的下拉列表中。我不知道如何将这些数据加载到下拉列表中。请告诉我可能性。

**代码**

```
 $('#SupplierId').change(function () {
    var a = $(this).val();
    $.post('@Url.Action("MatchPoNo", "Subscriptions")', { Id: a }, function (data) {

        $("#PoNo").select2({

        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:52:20.407

我还没有测试过这个，但是你的回调中这样的东西应该可以工作。这假设您要返回一个 javascript 数组。

```
data.each(function(){
 $option = $("<option></option>");
 $option.val(this.value);
 $option.html(this.text);
 $('#dropdown').append($option);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:55:36.547

尝试将工作：

```
var data = [
    {val: 1, text: "One"},
    {val: 2, text: "Two"},
];

$("#PoNo").append(function() {
    return $.map(data, function(el, i) {
        return '<option value=' + el.val + '>' + el.text + '</option>'; 
        // return $('<option>', {val: el.val, text: el.text});
    });
}); 
```

[http://jsfiddle.net/SgCXy/](http://jsfiddle.net/SgCXy/)

但是，如果您发布了 json 的示例，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-09T10:58:23.840

最简单的方法是使用[JQuery 视图引擎](https://jocapc.github.io/jquery-view-engine/)并将数组加载到下拉列表中：

```
var data = [
    {"text":"North","value":"N"},
    {"text":"West","value":"W"},
    {"text":"South","value":"S","selected":true},
    {"text":"East","value":"E"}
];
$("#dropdown").view(data); 
```

在此处查看详细信息：[https ://jocapc.github.io/jquery-view-engine/docs/ajax-dropdown](https://jocapc.github.io/jquery-view-engine/docs/ajax-dropdown)

# scala - scala sbt - 如何指向我磁盘上的本地 scala 和 akka

> ID：14461288
> 
> 赞同：1
> 
> 时间：2013-01-22T14:49:24.437
> 
> 标签：scala, sbt

我对 scala 的 build.sbt 有点困惑。我下载了 scala 库并将其放入 /usr/share/scala 和 akka 到我的 ~/apps/bin 文件夹中。我从某个地方复制了这个 build.sbt。

```
name := "AkkaTest"
version := "1.0"
scalaVersion := "2.10.0"
resolvers += "Typesafe Repository" at "http://repo.typesafe.com/typesafe/releases/" 
libraryDependencies +=  "com.typesafe.akka" % "akka-actor" % "2.0.4" 
```

我第一次运行它时，它似乎正在从网上下载整个 akka 和 scala 库。也不知道将下载的内容放在哪里。这让我非常不安，不知道正在下载什么以及在我的磁盘上的什么位置。此外，每次我升级时，我假设它会完成整个下载工作并将多个版本的 scala 和 akka 存储在某个地方（它在哪里？）。

有没有办法将 build.sbt 指向我知道的 scala 和 akka 文件夹，以后可以更改。如果我离线工作而不是 build.sbt 总是检查在线存储库，这也会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:55:59.747

SBT 使用称为[Ivy](http://ant.apache.org/ivy/)的依赖管理系统，它（如[Maven](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)，另一个依赖管理器）将下载的工件存储在存储库中。（Ivy，to `~/.ivy2`。）如果您担心磁盘空间，您可以定期清除这些目录的子集（并再次下载您需要的所有内容）。我还将它们从备份中排除。

[你可以在这里](http://ant.apache.org/ivy/)阅读更多关于常春藤的信息。

# mysql - 如何按照创建时间的顺序选择性地显示两个表中的记录

> ID：14461290
> 
> 赞同：1
> 
> 时间：2013-01-22T14:49:27.347
> 
> 标签：mysql, sql, sql-server, database, oracle

假设我们有两个带有 id 和 timestamp 列的表。我们如何按照时间戳的顺序有选择地显示两个表中前 10 条记录的 id。

例如，首先我们在 table1 中创建了一条记录，然后我们在 table2 中创建了一条记录，然后我们在 table1 中创建了一条记录，然后我们在 table2 中创建了一条记录............等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:51:36.200

根据您的 RDBMS，您可以使用 ROWNUM、LIMIT 或使用 Row_Number() OVER（按日期字段 DESC 排序）创建自己的 Row_Number。

这可能有效（对于 Oracle）。

```
select *
from  
( select id, datefield from Table1 
   union select id, datefield From Table2 order by datefield desc )  t
where ROWNUM <= 10; 
```

对于 MySQL：

```
select *
from  
( select id, datefield from table 
   union select id, datefield from table2 ) t
order by datefield desc
limit 10; 
```

对于 SQL Server：

```
select * 
from
(
    select *, Row_Number() OVER (ORDER BY datefield DESC) as rown
    from  
    ( select id, datefield from table 
       union select id, datefield from table2 ) t
 ) t2
 where rown <= 10 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:59:59.807

我不确定这是否是您要找的。这将在 MySql 中工作：

```
SELECT 'table1' tab, id, timestamp
FROM table1
UNION ALL
SELECT 'table2' tab, id, timestamp
FROM table2
ORDER BY timestamp DESC
LIMIT 10 
```

并将选择插入其中之一的最后 10 条记录`table1`或`table2`。这将在 SQL Server 中工作：

```
SELECT TOP 10 * FROM (
  SELECT TOP 10 'table1' tab, id, timestamp
  FROM table1
  ORDER BY timestamp DESC
  UNION ALL
  SELECT TOP 10 'table2' tab, id, timestamp
  FROM table2
  ORDER BY timestamp DESC ) t
ORDER BY timestamp DESC 
```

# c# - 将日期传递给 oracle 函数会导致月份无效

> ID：14461296
> 
> 赞同：2
> 
> 时间：2013-01-22T14:49:41.863
> 
> 标签：c#, oracle

我正在尝试从 c# 调用 oracle 函数，该函数定义为：

```
FUNCTION MyFunction(sDate DATE, toLoc VARCHAR2) RETURN VARCHAR2 
```

我的代码如下所示：

```
cmd.CommandText = "MyFunction";
cmd.CommandType= CommandType.StoredProcedure;

OracleCommandBuilder.DeriveParameters(cmd);
cmd.Parameters["SDATE"].Value = DateTime.Now
cmd.Parameters["TOLOC"].Value = "ABC";
cmd.ExecuteNonQuery(); 
```

我也尝试过手动添加参数，将参数类型设置为`OracleDbType.Date`. 我不断收到此异常：

```
Oracle.DataAccess.Client.OracleException was caught
  HResult=-2147467259
  Message=ORA-01843: not a valid month
ORA-06512: at "MyFunction", line 102
ORA-06512: at line 1
  Source=Oracle Data Provider for .NET
  ErrorCode=-2147467259 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:54:21.997

您确定 cmd.Parameters["SDATE"].Value 的类型是 DateTime 对象吗？请参阅链接中的文档。它说它是一个 Date 对象。 [http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleDbTypeEnumerationType.htm](http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleDbTypeEnumerationType.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:52:02.207

有`cmd.Parameters["SDATE"].Value = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss")`更好的吗？

# java - 想在时限内调用线程中的一个 Web 服务以在 java 中执行

> ID：14461299
> 
> 赞同：-1
> 
> 时间：2013-01-22T14:49:49.490
> 
> 标签：java, multithreading

任何代码示例

想要在一个线程中调用一个 Web 服务，并且需要设置执行该线程的时间限制，并且需要返回成功和失败 id 的值，例如 t.start()；和 t.stop(); 时间内

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:56:17.063

```
Future<T> result = Executors.newSingleThreadScheduledExecutor().submit(
    new Callable<T>() {
        @Override
        public void run() {
            //perform action here
            while(!Thread.interrupted()){
                //do next stage of calculation
            }
        }
    });
T value = result.get(10, TimeUnit.SECONDS); //for example wait 10 seconds
if(value == null) {
    //process is not finished
    result.cancel(true);    //interrupt task
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:57:45.063

Web 服务调用是原子操作，它不会返回部分结果，除非它被设计为这样做。例如，接收请求并开始处理的 Web 服务，第二个服务调用中断操作并要求部分结果。

# oracle - 从Oracle中的其他表中检索只有一个项目的行列表

> ID：14461306
> 
> 赞同：2
> 
> 时间：2013-01-22T14:50:11.133
> 
> 标签：oracle, oracle10g, greatest-n-per-group

我在 Oracle 数据库中有两个表（10g 快递）

*   产品
*   产品图片

一个产品可以有多个图像。`product`因此，从to存在一对多关系，`product_image`并且`product_image`表具有引用`product`表的主键的外键。

我需要获取一个**产品列表，在检索的结果集的****每一**行中只有一个图像名称，而不管`product_image`表中的图像如何（即使某些产品没有图像）。

从`product_image`表中取到的图片名称*一般是对***每个产品**`product_image`的每组图片进行升序排序后的表中的第一个图片名称。类似于以下内容。

 **```
prod_id    prod_name    prod_image

      1    aaa          aaa.jpg      //The first image name in the product_image table after sorting images for prod_id in ascending order.
      2    bbb          bbb.jpg      //Similar to the first case.
      3    ccc            -          //No image(s) found in the product_image table 
      4    ddd            -          //Similar to the previous case. 
```

这两个表的一般连接语句类似于以下内容。

```
SELECT p.prod_id, p.prod_name, pi.prod_image 
FROM product p 
INNER JOIN product_image pi 
ON p.prod_id=pi.prod_id; 
```

这可能使用单个 SQL 语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:53:23.027

试试这个，您可以为每个 prod_id 的每个图像生成行号并使用它。要从丢失的产品图像中返回 null 或空白，您应该使用左外连接

```
WITH CTE AS
(

SELECT prod_id, DBMS_LOB.substr(prod_image,1,4000) prod_image, 
row_number() over (partition by prod_id order by prod_image) rn
FROM product_image
)

SELECT p.prod_id, p.prod_name, nvl(pi.prod_image,'-') prod_image
FROM product p 
LEFT OUTER JOIN CTE pi 
ON p.prod_id=pi.prod_id and pi.rn = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:57:54.880

如果我正确理解了您的问题，我认为以下查询将起作用。我还没有测试过。

```
SELECT p.prod_id, p.prod_name, MIN(DBMS_LOB.substr(pi.prod_image, 1))
FROM product p LEFT JOIN product_image pi 
ON p.prod_id=pi.prod_id 
GROUP BY p.prod_id, p.prod_name
ORDER BY p.prod_name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:58:22.603

以下 SQL 如问题中所述工作。

```
SELECT 
     p.prod_id,
     p.prod_name,
     t.prod_image 
FROM
     product p 
LEFT OUTER JOIN(
     SELECT 
           pi.prod_image_id,
           pi.prod_id,
           pi.prod_image 
     FROM
           product_image pi 
     INNER JOIN (
           SELECT 
                MIN(pi.prod_image_id) AS prod_image_id 
           FROM 
                product_image pi
           GROUP BY 
                pi.prod_id
     ) prod_image 
     ON pi.prod_image_id=prod_image.prod_image_id
)t ON p.prod_id=t.prod_id ORDER BY p.prod_id DESC; 
```

参考：

*   [SQL 仅选择列上具有最大值的行](https://stackoverflow.com/q/7745609/1391249)**

# button - ExtJs 改变窗体面板按钮的布局

> ID：14461308
> 
> 赞同：0
> 
> 时间：2013-01-22T14:50:13.907
> 
> 标签：button, extjs, javascript, extjs3, formpanel

我有一个表格

```
var form = new Ext.form.FormPanel({
    title: 'Form Layout',

    buttons: [
        {text: 'Save'},
        {text: 'Cancel'}
    ]

}); 
```

我想更改下面按钮的布局，以便它们显示在另一个下方。我可以为这些按钮分配布局还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:32:18.027

您可以将项目添加到此表单面板的 fbar 中，而不是添加为按钮，并在此处添加每个按钮组件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:15:41.250

```
var form = new Ext.form.FormPanel({
title: 'Form Layout',

buttons: [{

    xtype: 'panel', 
    items: [
      {text: 'Save'},
      {text: 'Cancel'}
    ]
 }] 
```

});

这有帮助，但在我找到真正的解决方案之前，它可能不是一个合适的解决方案。暂时标记，稍后会在更好的标记到来时更改

# javascript - jQuery .click 在 if/else 语句中不起作用

> ID：14461313
> 
> 赞同：1
> 
> 时间：2013-01-22T14:50:29.510
> 
> 标签：javascript, jquery, html, click

我在我的应用程序中连接到 Foursquare API。用户可以键入一个框来开始搜索场地，或者他们可以单击两个场地链接之一以用这两个场地之一填充相同的选择框。我无法让用户单击两个场所之一。这是我的代码：

JS：

```
function venueFormatSelection(venue) {

  if ( venue.name && venue.location.address ) {
    // if a user starts typing into a box, venue.name and venue.address values will  pop up for them to select from. OR in the 'else' case, they can click one of either two links
  else {

    $("#bigdrop_set").click(function () {
      return $('#bigdrop_set').attr('venue_name')
    })

    $("#bigdrop_set_2").click(function () { 
      return $('#bigdrop_set_2').attr('venue_name_2')
    })

  }
} 
```

HTML：

```
<span class="which_venue" id="bigdrop_set" venue_name='foo' venue_data='FOO'><%= link_to(FOOOOO) %></span>

<span class="which_venue" id="bigdrop_set_2" venue_name_2='bar' venue_data_2='BAR'><%= link_to(BARRRR) %></span> 
```

出于某种原因，“单击以填充”JS 仅在没有 .click 功能的情况下仅包含一个“返回”行时才有效：

```
return $('#bigdrop_set').attr('venue_name') 
```

我的“else”语句中的代码有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:54:15.753

```
 $(".bigdrop_set").click(function () {
  return $('#bigdrop_set').attr('venue_name')
  }) 
```

应该：

```
$("#bigdrop_set").click(function () {
  return $('#bigdrop_set').attr('venue_name')
 }) 
```

当您选择 ID 为 bigdrop_set 的元素而不是类 bigdrop_set 的元素时。ID 应该是唯一的，在您的代码中，您有重复的 bigdrop_set ID，应该更改。

另外我建议在函数上绑定点击元素`$(document).ready()`，而不是在`venueFormatSelection`函数中。

从 click 函数返回值也没有多大意义。要么直接在函数中操作值，要么将其放在另一个函数本身中，而不是放在`click`事件中。

例如：

```
function alertVenue(venue) {
   alert(venue)
}

$("#bigdrop_set").click(function () {
   var venue = $('#bigdrop_set').attr('venue_name')
   alertVenue(venue);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:55:44.643

你有类似的东西

```
$(".bigdrop_set").click(function () {
  return $('#bigdrop_set').attr('venue_name')
}) 
```

您真的是指 css 类选择器`.bigdrop_set`，然后是 id 选择器`#bigdrop_set`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:08:57.317

我通过使用全局变量找到了解决方法。怀疑这是最干净的方法，但它现在正在工作：

```
$("#bigdrop_set").click(function () { 
  window.clickVenue = $('#bigdrop_set').attr('venue_name');
  $(".bigdrop").select2("val", $('#bigdrop_set').attr('venue_data'));
});

$("#bigdrop_set_2").click(function () { 
  window.clickVenue = $('#bigdrop_set_2').attr('venue_name_2');
  $(".bigdrop").select2("val", $('#bigdrop_set_2').attr('venue_data_2'));
});

function venueFormatSelection(venue) {

  if (venue.name && venue.location.address) {
    var imageSource = venue.categories[0].icon.prefix.slice(0, -1) + venue.categories[0].icon.suffix;
    return "<img src='" + imageSource + "' height='20' width='20' />" + "   " + venue.name + " (" + venue.location.address + ")";
  }
  else {
    return window.clickVenue;
  }
} 
```

# excel - 从 Excel 导出到 txt 保留特殊的日期格式

> ID：14461317
> 
> 赞同：1
> 
> 时间：2013-01-22T14:50:38.823
> 
> 标签：excel, file, date, text, format

我一直在使用代码将数据从 excel 复制到 .txt 删除任何不需要的字符，以便输入到另一个应用程序：

```
Public DirRoot As String
Public CasNam As String

Public Sub Export()

    Dim intUnit As Integer
    Dim rngRow As Range
    Dim rngCell As Range
    Dim strText As String

    intUnit = FreeFile

    DirRoot = "C:\temp\"
    CasNam = "Test"

        Open DirRoot & CasNam & ".txt" For Output As intUnit

    'End If

    With Worksheets("Export").UsedRange
        For Each rngRow In .Rows
            strText = ""
            For Each rngCell In rngRow.Cells
                If Len(rngCell.Value) = 0 Then Exit For
                strText = strText & " " & rngCell.Value
            Next
            Print #intUnit, Trim(strText)
        Next
    End With

    Close intUnit

End Sub 
```

现在我需要在一组不同的数据下使用它，其中一列是格式为：的日期`yyyymmdd`，当我应用上面的代码时，我得到格式为的列`dd/mm/yyyy`。

有什么办法可以将原始日期格式从 excel 保存到`.txt`?

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:03:22.117

Not very clear to me which part declares the variable with the date, but this explanation may be helpful:

```
Sub Date_Convert 

dim dtDate_Orig as date
dim dtDate_Convert as date
dim sDate as String

dtDate_Orig = "22/01/2012"
dtDate_Convert = format(dtDate_Orig, "yyyymmdd")
sDate = Cstr(dtDate_Convert)

'Now you can use the string for a filename 

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:55:11.510

更改此行

```
 strText = strText & " " & rngCell.Value 
```

至

```
 strText = strText & " " &  Format(rngCell.Value,"yyyymmdd") 
```

祝你好运

编辑

请检查一下。`colCounter`是识别你的格式请求列。

```
Dim colCounter as Integer
colCounter = 1
With Worksheets("Export").UsedRange
   For Each rngRow In .Rows
      strText = ""
      colCounter = 1
      For Each rngCell In rngRow.Cells
        If Len(rngCell.Value) = 0 Then Exit For
        If colCounter = 2  Then ' change 2 to whatever column you want to format
           strText = strText & " " &  Format(rngCell.Value,"yyyymmdd")
        Else
           strText = strText & " " & rngCell.Value
        End if
        colCounter = colCounter + 1
      Next
      Print #intUnit, Trim(strText)
   Next
End With 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:04:56.147

这是你正在尝试的吗？

```
'~~> Change this to the column which has dates
Col = 2

For Each rngCell In rngRow.Cells
    If Len(rngCell.Value) = 0 Then Exit For

    If rngCell.Column = Col Then
        strText = strText & " " & Format(rngCell.Value, "yyyymmdd")
    Else
        strText = strText & " " & rngCell.Value
    End If
Next 
```

# java - Tomcat：失败 - 无法启动上下文路径 /employee 处的应用程序

> ID：14461319
> 
> 赞同：1
> 
> 时间：2013-01-22T14:50:42.120
> 
> 标签：java, tomcat, spring-mvc, hibernate-4.x

我是 Spring MVC 的新手。尝试使用安全登录构建项目，但无法在 tomcat 中启动 .war。

> FAIL - 无法启动上下文路径/employee 处的应用程序

我检查了我们 log4j 和 slf4j 等图书馆的重复

请帮助我了解原因，在此先感谢。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<display-name>Spring MVC Application</display-name>

    <!-- Spring MVC configurations-->

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring-security.xml
            /WEB-INF/applicationContext.xml
        </param-value>
    </context-param>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/employee/*</url-pattern>
    </servlet-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Spring Security configurations-->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

pom.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>ua.serge</groupId>
    <artifactId>employee</artifactId>
    <version>1.0</version>
    <packaging>war</packaging>
    <name>employee</name>
    <url>http://maven.apache.org</url>

    <build>
        <finalName>employee-list</finalName>
    </build>

     <!--dependencies properties -->

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

        <spring.version>3.1.2.RELEASE</spring.version>

        <hibernate.version>4.1.7.Final</hibernate.version>
        <netbeans.hint.deploy.server>Tomcat</netbeans.hint.deploy.server>
    </properties>

    <dependencies>

        <!-- maven-compiler-plugin-->

        <dependency>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-deploy-plugin</artifactId>
            <version>2.7</version>
        </dependency>

        <dependency>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
        </dependency>

        <!-- javassist-->

        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.12.1.GA</version>
        </dependency>

        <!-- JSTL-->

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- MySQL database driver --> 

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.9</version>
        </dependency>

        <!--  CGLIB  -->

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2</version>
        </dependency>

        <!-- log4j -->

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>

        <!-- JUnit testing framework -->

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>

        <!-- Hibernate4 framework -->

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${hibernate.version}</version>           
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <!-- Hibernate library dependecy -->

        <dependency>
            <groupId>dom4j</groupId>
            <artifactId>dom4j</artifactId>
            <version>1.6.1</version>
        </dependency>

        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>

        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2.1</version>
        </dependency>

        <dependency>
            <groupId>antlr</groupId>
            <artifactId>antlr</artifactId>
            <version>2.7.7</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>5.0.0.Alpha2</version>
            <type>jar</type>
        </dependency>

        <!-- Spring 3 framework dependencies -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <!-- Spring Security -->

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${spring.version}</version>
        </dependency>

    </dependencies>
</project> 
```

TOMCAT localhost 日志显示：

```
22, 2013 5:09:20 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'divisionController': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adminService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void employee.service.impl.AdminServiceImpl.setEmployeeDao(employee.DAO.EmployeeInfoDAO); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeInfDao': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void employee.util.CustomHibernateDaoSupport.setSessionFactory(org.hibernate.SessionFactory); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:307)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4790)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5284)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1247)
    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:714)
    at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:219)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adminService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void employee.service.impl.AdminServiceImpl.setEmployeeDao(employee.DAO.EmployeeInfoDAO); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeInfDao': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void employee.util.CustomHibernateDaoSupport.setSessionFactory(org.hibernate.SessionFactory); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:443)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:417)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:559)
    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:150)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:304)
    ... 43 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void employee.service.impl.AdminServiceImpl.setEmployeeDao(employee.DAO.EmployeeInfoDAO); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeInfDao': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void employee.util.CustomHibernateDaoSupport.setSessionFactory(org.hibernate.SessionFactory); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:593)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 56 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeInfDao': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void employee.util.CustomHibernateDaoSupport.setSessionFactory(org.hibernate.SessionFactory); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:551)
    ... 58 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void employee.util.CustomHibernateDaoSupport.setSessionFactory(org.hibernate.SessionFactory); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:593)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 69 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:952)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:821)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:551)
    ... 71 more

янв 22, 2013 5:09:20 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext 
```

此类用于控制对 Mysql 的查询

```
package employee.util;

import employee.DAO.DAO;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Restrictions;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional;

import java.io.Serializable;
import java.util.List;

public class CustomHibernateDaoSupport<T>  implements DAO<T> {
    //was extending HibernateDaoSupport

    private Class<T> clazz;
    private SessionFactory sessionFactory;

    public CustomHibernateDaoSupport(Class<T> clazz) {
        this.clazz = clazz;
    }

    @Autowired
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    private Session getCurrentSession() {
        return sessionFactory.getCurrentSession();
    }

    @Override
    @Transactional
    public void save(T entity) {
        getCurrentSession().save(entity);
    }

    @Override
    @Transactional
    public void update(T entity) {
        getCurrentSession().update(entity);
    }

    @Override
    @Transactional
    public void delete(Serializable key) {
        Object entity = getCurrentSession().get(clazz, key);
        if (entity != null) {
            getCurrentSession().delete(entity);
        }
    }

    @Override
    @Transactional
    public T find(Serializable key) {
        return (T) getCurrentSession().get(clazz, key);
    }

    @Override
    @Transactional
    public List<T> findAll() {
        return getCurrentSession().createCriteria(clazz).list();
    }

    @Override
    @Transactional
    public List<T> findAllByParam(final String paramName, final Object paramValue) {
        return getCurrentSession().createCriteria(clazz)
                .add(Restrictions.eq(paramName, paramValue))
                .list();
    }
} 
```

这是我的 applicationContext.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- Database Configuration -->
    <import resource="../database/DataSource.xml"/>
    <import resource="../database/Hibernate.xml"/>

    <!-- Auto scan the components -->
    <context:component-scan base-package="employee" />

    <bean class="employee.service.impl.AdminServiceImpl"/>
    <bean class="employee.service.impl.UserServiceImpl"/>
    <bean class="employee.DAO.impl.EmployeeInfoDAOImpl"/>
    <bean class="employee.DAO.impl.EmployeeDivDAOImpl"/>
    <bean class="employee.DAO.impl.UserDAOImpl"/>

</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:23:18.803

日志状态：“没有为依赖项找到类型为 [org.hibernate.SessionFactory] ​​的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者”。

您可以在 applicationContext.xml 中定义它，如本问题所示。[在 Spring MVC 中使用 ApplicationContext。](https://stackoverflow.com/questions/10018127/using-applicationcontext-in-spring-mvc)

会是这样的

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource"></property>
        <property name="mappingResources">
          <list>
            <value>UserAccount.hbm.xml</value>
            ...
          </list>
        </property>
        <property name="hibernateProperties">
          <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            </props>
        </property>
      </bean> 
```

希望能帮助到你。

# wpf - 整个 HierarchyItem 上的 WPF TreeView 选择

> ID：14461324
> 
> 赞同：1
> 
> 时间：2013-01-22T14:50:55.293
> 
> 标签：wpf, treeview

我有一个绑定到 MVVM 可观察集合的 TreeView。我的项目模板由图像和文本块组成，如下代码所示：

```
<HierarchicalDataTemplate x:Key="TreeViewItemTemplate" ItemsSource="{Binding Items, Mode=OneWay, NotifyOnSourceUpdated=True}">
    <TreeViewItem>
        <TreeViewItem.Header>
            <StackPanel Orientation="Horizontal">
                <Image 
                    Margin="-20,0,5,0"
                    Source="{Binding Icon, Converter={StaticResource TreeViewIconConverter}, Mode=OneWay}" 
                    Style="{DynamicResource SmallIcon}"/>
                <Label Content="{Binding Label}"/>
            </StackPanel>
        </TreeViewItem.Header>
    </TreeViewItem>
</HierarchicalDataTemplate> 
```

当您单击一个项目时会出现问题。如果鼠标光标位于 StackPanel 上，则不会进行选择。我还包括了一个屏幕截图，以使这一点更清楚。 ![在此处输入图像描述](../Images/ad240f3afec449e7b0827ab8b0562a94.png)

当然，这是因为 StackPanel 现在位于选择区域**上方。**

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:05:55.687

我自己找到了答案。当您使用**分层数据模板**自定义 TreeView 时，您不应复制 TreeViewItem.Header 模板，因为在运行时 WPF 将为您创建一个。所以，为了有一个自定义的 TreeViewItem 这个代码就足够了：

```
<HierarchicalDataTemplate x:Key="TreeViewItemTemplate" ItemsSource="{Binding Items, Mode=OneWay, NotifyOnSourceUpdated=True}">
    <StackPanel Orientation="Horizontal">
        <Image 
            Margin="0,0,5,0"
            Source="{Binding Icon, Converter={StaticResource TreeViewIconConverter}, Mode=OneWay}" 
            Style="{DynamicResource SmallIcon}"/>
        <Label Content="{Binding Label}"/>
    </StackPanel>
</HierarchicalDataTemplate> 
```

# java - SMTP 证书

> ID：14461326
> 
> 赞同：2
> 
> 时间：2013-01-22T14:50:55.807
> 
> 标签：java, ssl, smtp-auth, smtpd

我测试[subEthaSMTP](http://code.google.com/p/subethasmtp/) SMTP 服务器。一切正常，但我想使用 SSL/TLS。我阅读了有关此的[文章](http://blog.trifork.nl/2009/11/10/securing-connections-with-tls/)并有一个问题。

我有**csr**、**crt**和**密钥**文件，但在用于 PKCS12 、 JKS 和 SunX509 的文章中。

是否可以使用**csr**，**crt**和**key**或如何将其转换为需要的格式。

*PS对不起，我不是Java专家。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:08:38.017

CSR 是证书签名请求。您应该已经对证书进行了自签名或发送给证书颁发机构。如果您在这一点上迷失了方向，请阅读[证书操作指南](http://www.openssl.org/docs/HOWTO/certificates.txt)。

然后您应该有一个 CRT 文件（CRT 是 DER 格式的 X.509 证书）自签名或由证书颁发机构签名，要创建 PKCS#12 证书，您应该：

1.  将 DER 证书转换为 PEM。
2.  将 PEM 和 KEY 私钥文件混合到 PKCS#12 文件格式中。

openssl 命令位于“使用[OpenSSL](http://www.sslshopper.com/article-most-common-openssl-commands.html)转换”部分。

这些东西不是 Java，它只是 SSL/TLS。

# php - 表单的PHP函数不起作用

> ID：14461332
> 
> 赞同：0
> 
> 时间：2013-01-22T14:51:02.940
> 
> 标签：php, function

为什么这个 php 函数不起作用？它在不使用 $element 时确实有效。使用 $element 它总是返回测试。

```
function setVar($element)
 {
    if(isset($_POST['$element'])){
    $varname = $_POST['$element']; 
    } 
    else {
    $varname = 'test';
    }
    return $varname;
 }

 $var = setVar('element_6'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T14:52:33.937

你可能的意思是：

```
... $_POST[$element] ... 
```

没有引号？单引号内容永远不会被替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:52:59.507

您需要将 $_POST['$element'] 更改为 $_POST[$element]。单引号之间的任何内容都按字面意思处理。

见： http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:52:41.157

`$_POST['$element']`将您的代码更改为`$_POST[$element]`，它应该可以正常工作.. $_POST['$element']) 现在什么都没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T14:54:21.940

你在引用`$_POST['$element']`. 请注意，此处的单引号`$element`将其转换为静态字符串。

解决方案：去掉引号，它会`$element`正确解析。

# c# - 移动窗口时触发事件

> ID：14461342
> 
> 赞同：3
> 
> 时间：2013-01-22T14:51:39.600
> 
> 标签：c#, wpf, plugins, itunes

我目前正在开发一个 iTunes 插件，当拖动、调整大小等时，我需要让我的 WPF 插件贴在 iTunes 窗口旁边。目标是让 iTunes 并排贴在我的 wpf 应用程序上。

我正在寻找一种方法来跟踪另一个窗口（在我的情况下是 iTunes）的移动（调整大小、移动）。Windows SDK 的 iTunes COM 提供最大化和最小化事件，遗憾的是没有调整窗口大小和移动窗口的事件。

我试过win32 setParent 函数没有成功。我认为这不是解决我的问题的合适方法。我在网上彻底搜索过，但一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:57:25.637

我认为[WINDOWPOS 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632612%28v=vs.85%29.aspx)是您正在寻找的。 [其他窗口结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468923%28v=vs.85%29.aspx)可能会派上用场。

一些谷歌搜索出现了[另一个](http://social.msdn.microsoft.com/Forums/en/winforms/thread/61e5989f-8a8c-44e8-81ab-09f2e9731bc4)例子，它不使用 WINDOWPOS：

> 1、调用API FindWindow() 获取窗口句柄（使用SPY++获取ClassName & WindowName这两个参数）；
> 
> 2、调用API GetWindowRect() 获取指定窗口的大小和位置。
> 
> 代码片段
> 
> ```
>  [DllImport("user32.dll")]
>     private static extern IntPtr FindWindow(string className, string windowName);
> 
>     [DllImport("user32.dll")]
>     private static extern int GetWindowRect(IntPtr hwnd, out Rectangle rect);
> 
>     private void button2_Click(object sender, EventArgs e)
>     {
>         string className = "yourClassName";
>         string windowName = "yourWindowName";
> 
>         Rectangle rect;
>         IntPtr hwnd = FindWindow(className, windowName);
>         GetWindowRect(hwnd, out rect);
>     } 
> ```

# python - Python - pchip 警告

> ID：14461346
> 
> 赞同：0
> 
> 时间：2013-01-22T14:51:52.020
> 
> 标签：python, numpy, scipy, interpolation

每当我使用 scipy 的 pchip 插值进行张量积插值时，都会收到以下两个警告：

```
/usr/lib/python2.7/dist-packages/scipy/interpolate/polyint.py:894:
RuntimeWarning: divide by zero encountered in divide
  whmean = 1.0/(w1+w2)*(w1/mk[1:] + w2/mk[:-1])

/usr/lib/python2.7/dist-packages/scipy/interpolate/polyint.py:874:    
RuntimeWarning: divide by zero encountered in double_scalars
  return np.where((d1==0) | (m0==0), 0.0, 1.0/(1.0/m0+1.0/d1)) 
```

有人知道是什么原因造成的吗？我的插值输出似乎仍然正确。

# wix - 安装 Web 应用程序 IIS

> ID：14461348
> 
> 赞同：4
> 
> 时间：2013-01-22T14:51:54.100
> 
> 标签：wix

您好我正在尝试使用 WIX 安装 Web 应用程序。我不确定我所拥有的是否正确，但我的日志文件中出现此错误：

我的 wxs 文件：

```
 <ComponentGroup Id='IISConfig'>

<Component Id='WebAppPool' Guid='5EC0510D-BE49-4FE9-9572-5695DB9BD343' Directory='INSTALLLOCATION'>
  <CreateFolder/>
  <iis:WebAppPool Id="WebAppPool" Name="DefaultAppPool" />

  <iis:WebSite Id='DefaultWebSite' Description='Default Web Site' Directory='INSTALLLOCATION' WebApplication='WebApplication'>
    <iis:WebAddress Id='AllUnassigned' Port='80' />
    <iis:WebDirProperties Id='WebDirProperties' Execute='yes'/>
  </iis:WebSite>
</Component>

<Component Id='WebVirtualDirComponent' Guid='52D0B071-0801-4B93-8C8F-F5FC92DD8D8F' Directory='INSTALLLOCATION'>
  <CreateFolder/>
  <iis:WebVirtualDir Id='WebVirtualDir' Alias='[PRODUCTNAME]' Directory='INSTALLLOCATION' WebSite='DefaultWebSite'>
    <iis:WebDirProperties Id='WebVirtualDirProperties' Execute='yes' WindowsAuthentication='yes'/>
    <iis:WebApplication Id='WebApplication' Name='[PRODUCTNAME]' WebAppPool='WebAppPool'>
      <iis:WebApplicationExtension Extension='dll' Executable='[#mod_Gsoap.dll]' CheckPath='yes' Script='yes'/>
    </iis:WebApplication>
  </iis:WebVirtualDir>
</Component>

</ComponentGroup> 
```

我的任何日志文件：

```
MSI (s) (90:C4) [14:48:38:200]: Executing op: CustomActionSchedule(Action=WriteIIS7ConfigChanges,ActionType=11265,Source=BinaryData,Target=**********,CustomActionData=**********)
MSI (s) (90:AC) [14:48:38:216]: Invoking remote custom action. DLL: C:\Windows\Installer\MSIAB38.tmp, Entrypoint: WriteIIS7ConfigChanges
WriteIIS7ConfigChanges:  Error 0x80040154: Failed to open AppHostWritableAdminManager to configure IIS7
WriteIIS7ConfigChanges:  Error 0x80040154: WriteIIS7ConfigChanges Failed.
CustomAction WriteIIS7ConfigChanges returned actual error code 1603 (note this may not be 100% accurate if translation happened inside sandbox)
Action ended 14:48:38: InstallFinalize. Return value 3. 
```

如果有人能指出我正确的方向，我将不胜感激..:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T06:50:19.423

该错误消息意味着用于写入 IIS 配置的 IIS7 COM 对象未在计算机上正确注册。不确定解决问题的最佳方法，但您可以尝试修复（或卸载/安装）IIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T15:44:31.030

就我而言，根本没有安装 IIS。哦。

# sql-server-2008 - T-SQL 存储过程：Select * From Where Value is not null

> ID：14461358
> 
> 赞同：0
> 
> 时间：2013-01-22T14:52:09.080
> 
> 标签：sql-server-2008, select, stored-procedures, where-clause

我有一张有几列的桌子。我想要一个存储过程，如果这些值的参数不为空，它将过滤每个值的 Select * 语句。我是否必须编写一个类似 sql server 字符串或其他内容，如果该参数不为空，只需将参数值附加到字符串？还是有一种更简单的内置机制来处理这类事情？我知道你必须为 Oracle 做字符串的事情。但是 ms sql server 总是让我觉得更加用户友好。我以为我会先检查一下，然后再潜入。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:00:47.640

The easy route, assuming `col` is not nullable, or it is and you don't want NULL rows to match:

```
WHERE col LIKE COALESCE(@param, col)
-- or the longer version:
WHERE (col LIKE @param OR @param IS NULL) 
```

(Where `@param` is either `NULL` or something like `'%asdf%'`.)

If `col` is nullable and you *do* want NULL rows to match, you could try this:

```
WHERE COALESCE(col, 'x') LIKE COALESCE(@param, col, 'x') 
```

There are other ways to do it, as this could potentially lead to bad plans based on your parameterization settings and what parameters are used the first time it is cached (this can lead to poor plan choice due to "parameter sniffing"), but that is probably largely irrelevant here because your `WHERE` clause is going to force a table scan anyway.

A common alternative when plan quality becomes an issue is to use dynamic SQL, e.g.

```
DECLARE @sql NVARCHAR(MAX) = N'SELECT ... FROM ... WHERE 1 = 1';

IF @param IS NOT NULL
BEGIN
  SET @sql += ' AND col LIKE ''' + REPLACE(@param, '''', '''''') + '%''';
END 
```

It can be helpful in cases like this to make sure the [`optimize for ad hoc workloads`](http://www.sqlskills.com/blogs/kimberly/plan-cache-and-optimizing-for-adhoc-workloads/) setting is enabled.

For information on parameter sniffing and dynamic SQL, see these posts by Erland Sommarskog:

[http://www.sommarskog.se/query-plan-mysteries.html](http://www.sommarskog.se/query-plan-mysteries.html)
[http://www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

# c++ - 如何在调用派生类构造函数之前设置基类成员？

> ID：14461364
> 
> 赞同：0
> 
> 时间：2013-01-22T14:52:22.883
> 
> 标签：c++, inheritance, constructor, components, protected

我的应用程序的组件有一个基类，它提供了一些成员和功能`Init()`，`Update()`并且必须被覆盖。

```
class Component
{
public:
    void Set(type* Member1, type* Member2, type* Member3)
    {
        this->Member1 = Member1;
        this->Member2 = Member2;
        this->Member3 = Member3;
    }
    virtual void Init() = 0;
    virtual void Update() = 0;
    virtual ~Component() {}
protected:
    type* Member1;
    type* Member2;
    type* Member3;
}; 
```

为了处理组件，有一个经理。它首先设置组件的成员，然后调用`Init()`它。稍后它可用于更新所有分配的组件，但这与这个问题无关。

```
class Manager
{
public:
    void Add(string Name, Component* Component)
    {
        list[Name] = Component;
    }
    void Init(type* Member1, type* Member2, type* Member3)
    {
        for (auto i = list.begin(); i != list.end(); i++)
        {
            i->second->Set(Member1, Member2, Member3);
            i->second->Init();
        }
    }
    void Update()
    {
        for (auto i = list.begin(); i != list.end(); i++)
            i->second->Update();
    }
private:
    unordered_map<string, Component*> list;
}; 
```

我对我的实现并不满意，因为我希望组件使用它们的构造函数进行初始化，而不是覆盖`Init()`函数。但是在构建时，基类成员还不可用。

我知道我可以通过派生类构造函数传递成员，但我不希望特定组件关心它们的基类成员。这看起来像下面，但无论如何我不希望那样。

```
class Component
{
public:
    Component(type* Member1, type* Member2, type* Member3)
    {
        this->Member1 = Member1;
        this->Member2 = Member2;
        this->Member3 = Member3;
    }
    virtual void Update() = 0;
    virtual ~Component();
protected:
    type* Member1;
    type* Member2;
    type* Member3;
};

class Specific : public Component
{
public:
    Specific(type* Member1, type* Member2, type* Member3) : Component(Member1, Member2, Member3)
    {

    }
    void Update()
    {

    }
}; 
```

那么如何确保在调用派生类的构造函数之前初始化基类成员呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:21:59.570

你真的别无选择。派生类知道基类的初始化需求（因为基类在其构造函数/初始化函数中需要该信息），或者您必须将派生类的初始化移出其构造函数（由初始化基类后的客户端）。

如果需要在基类上设置的成员列表很长，您可以将它们全部打包在一个结构中，然后通过派生类将其传递给基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:56:50.393

基类构造函数在派生类构造函数之前调用，因此请在基类构造函数中设置值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:19:02.773

我不太确定你想在这里完成什么，但我可以做一些观察。看起来您可能正在尝试实施两阶段构建。

首先，如果要使用基类构造函数，则*必须*传递派生构造函数的值。语言中没有其他机制可以做到这一点，所以如果这不是一个选项（或者至少不是你想要娱乐的选项），那么你将不得不使用一个额外的外部接口。

为了回答您的最后一个问题，基类的成员*始终*在调用派生构造函数之前进行初始化。例如，我假设您想确保在使用之前设置它们`Update`。

怎么做`Init`受保护，并重命名`Set`为类似的东西`SetAndInit`并强制它在调用`Init`函数之前总是做集合。这可以防止您`Init`在设置基本成员之前调用，并且仍然为您提供相对相似的界面。

# javascript - 预测文本泡泡效果

> ID：14461368
> 
> 赞同：0
> 
> 时间：2013-01-22T14:52:38.517
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试找到一个 jquery 插件来模拟当我们将标签添加到我们的 stackoverflow 问题时看到的泡泡效果。类似于在一封电子邮件中选择多个电子邮件收件人。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:01:01.967

您可以使用插件[Chosen](http://harvesthq.github.com/chosen/)。它具有自动完成和标签功能。

另一个选项是[Tagit](http://webspirited.com/tagit/)和[标签管理器](http://welldonethings.com/tags/manager)。

# javascript - Chrome 中 window.innerWidth 的行为不一致

> ID：14461372
> 
> 赞同：1
> 
> 时间：2013-01-22T14:52:46.137
> 
> 标签：javascript, google-chrome

从页面首次加载（不在缓存中）与重新加载（从缓存中）时，我在 Chrome 中得到的 window.innerWidth 值不一致。任何想法为什么。

听是我的简单 HTML 文件：

```
<html>
     <body>
           <script>
                  alert(window.innerHeight)
           </script>
     </body>
</html> 
```

如果我在隐身窗口中运行它（以确保它没有被缓存），我会得到一个值 x，然后当我刷新时，这个值总是 x + 40。

发生了什么？

# android - Android，运行另一个类的方法

> ID：14461373
> 
> 赞同：0
> 
> 时间：2013-01-22T14:52:49.957
> 
> 标签：android

我的游戏需要在每个 onCreate 类中更新 TextView 的背景以显示玩家的健康状况，但是目前我能想到的唯一方法是这样

```
int Health = 100;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_act1);

    if (Health == 100){
        HealthDisplay.setBackgroundResource(R.drawable.health100);
    } else if (Health == 99){
        HealthDisplay.setBackgroundResource(R.drawable.health99);
    } else if (Health == 98){
        HealthDisplay.setBackgroundResource(R.drawable.health98);
    } else if (Health == 99){
        HealthDisplay.setBackgroundResource(R.drawable.health98);
    } else if (Health == 99){
        HealthDisplay.setBackgroundResource(R.drawable.health98);
    } else if (Health == 99){
        HealthDisplay.setBackgroundResource(R.drawable.health98);
    }

etc.
} 
```

必须有一种更简单/更快的方法来做到这一点，特别是因为我也需要对其他两个统计数据做类似的事情。

我曾考虑让一个单独的类处理它，并在 onCreate 中有一两行告诉它运行该类以更新背景图像，然后返回到这个。

或者，也许这样的事情是可能的？

```
int Health = 100;

HealthDisplay.setBackgroundResource(R.drawable.health(Health)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:57:26.797

“我的游戏需要在每个 onCreate 类中更新一个 TextView 的背景，以显示玩家的健康状况”

对不起，我不明白。如果您想在运行时更新背景，请不要在 onCreate 中执行此操作，因为它只被调用一次（在创建活动时）。

只需通过在 TextView 上调用 setBackgroundResource 创建一个将更新此背景的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:16:08.850

我的建议是拥有一张图像（为了完全健康），每次裁剪它并根据您的健康水平显示它的百分比。例如：

```
private ImageView healthLevel;
private ClipDrawable clipDrawable;
    @Override
        public void onCreate(Bundle savedInstanceState) {
            healthLevel = (ImageView ) findViewById(R.id.health);   //there a corresponding ImageView in the layout
            BitmapDrawable bitmapDrawable = new BitmapDrawable(BitmapFactory.decodeResource(getResources(),    R.drawable.full_health));
            //vertical bar cropped from top
            clipDrawable = new ClipDrawable(bitmapDrawable, Gravity.BOTTOM, ClipDrawable.VERTICAL);  
            healthLevel.setImageDrawable(clipDrawable);
    } 
```

然后在另一个线程中你会调用：

```
int health = 54;
clipDrawable.setLevel(health);
clipDrawable.invalidateSelf(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:01:49.207

ThomasKa 的回答很好。裁剪一种资源将为您节省大量时间，如果做得好，看起来也不错。但是，如果您愿意，*可以使用 100 个单独的可绘制对象。*

您要做的是适当地命名您的可绘制对象（带有数字后缀），然后按名称获取它们。您可以使用[`Resources.getIdentifier()`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)它，例如：

```
Resources res = getResources();
int resId = res.getIdentifier("health" + Health, "drawable", getPackageName());
HealthDisplay.setBackgroundResource(resId); 
```

该示例假设您的可绘制对象被命名为 health100、health99 等，如您的示例所示。

# servicestack - ServiceStack - 空请求类？

> ID：14461375
> 
> 赞同：9
> 
> 时间：2013-01-22T14:53:02.230
> 
> 标签：servicestack

我有一个关于 ServiceStack 的问题。为什么有空的请求类，为什么我们必须有一个请求类？例如：

```
[Route("/test", "GET")]
public class Test
{

}

public class TestResponse
{
    public string Date { get; set; }
}

public class TestService : Service
{
    public object Get(Test test)
    {
        return new TestResponse { Date = DateTime.Now.ToString() };
    }
} 
```

如果我的请求没有传递对象，我的服务会失败吗？

然后我是我的 Global.asax 文件，我有：

```
public class AxDataAppHost : AppHostBase
{
    public AxDataAppHost() :
        base("AxData", typeof(TestService).Assembly)
    {
    }
} 
```

如果我有超过 1 个服务，在上面的示例中我正在使用`TestService`，但如果我有一个用于`Customers`,`Orders`和`Products`怎么办？如何处理多项服务？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T18:47:55.567

**为什么我们必须有一个请求类？**

ServiceStack 是一个基于消息的框架，它包含[Martin Fowler 的远程服务最佳实践](http://www.slideshare.net/fullscreen/newmovie/what-istheservicestack-14819151/17)（即远程外观、DTO 和网关），它利用 ServiceGateway 发送粗粒度的请求 DTO，通常返回类型化的响应 DTO（尽管[服务可以返回任何东西](https://github.com/ServiceStack/ServiceStack/wiki/Service-return-types)）。使用基于消息的设计[有很多优点](https://github.com/ServiceStack/ServiceStack/wiki/Advantages-of-message-based-web-services)，并且是使 ServiceStack 的类型化端到端 API 成为可能的原因。

例如，您可以重复使用您定义服务的这些类型：

```
public class Test : IReturn<TestResponse> {}

public class TestResponse
{
    public string Date { get; set; }
} 
```

在客户端上，这为您提供了没有代码生成的类型化 API，例如：

```
var client = new JsonServiceClient(BaseUri);
TestResponse response = client.Get(new Test()); 
```

*注意：您甚至不需要自定义路由，因为默认情况下 ServiceStack 的 C# 客户端将回退到使用[预定义路由](http://www.servicestack.net/ServiceStack.Hello/#predefinedroutes)（默认启用）。*

**如果我有超过 1 项服务，在上面的示例中，我使用的是 TestService，但如果我有一个用于客户、订单和产品的服务怎么办？如何处理多项服务？**

在您的 AppHost 基本构造函数中，您正在传递一个**程序集**（即不是单个服务）：

```
public AxDataAppHost() : base("AxData", typeof(TestService).Assembly) {} 
```

这告诉 ServiceStack 在哪里寻找和连接你的所有服务。您只需为您的服务所在的每个 dll/程序集执行一次此操作。

ServiceStack 的 AppHosts 还允许指定多个程序集，您可以使用这些程序集来连接位于多个程序集中的服务，例如：

```
public AxDataAppHost() 
  : base("AxData", typeof(TestService).Assembly, typeof(ServiceInNewDll).Assembly) {} 
```

# ios - 从 performBlock NSPrivateQueueConcurrencyType 调用的方法中的 FetchRequest 失败

> ID：14461377
> 
> 赞同：0
> 
> 时间：2013-01-22T14:53:06.503
> 
> 标签：ios, objective-c, ios6, grand-central-dispatch, nsmanagedobjectcontext

在一个`performBlock`I 中，将其移交`managedObjectContext`给其他使用它进行核心数据访问的方法。the`managedObjectContext`是 a`NSPrivateQueueConcurrencyType`并且有 the`NSMainQueueconCurrencyType`作为父级。一旦`performBlock`执行获取请求中的调用方法之一，应用程序就会终止而没有任何错误。OS X 控制台输出以下内容：

```
BUG in libdispatch client: kevent[EVFILT_VNODE] add: "Bad file descriptor" - 0x9 
```

有谁知道是什么原因造成的？

我正在使用 XCode 4.5.2 和 iOS 6。

## 更新

我发现这个问题只发生在`SenTestingKit`静态库的情况下。如果我将库包含到常规的 iOS 应用程序中，它就消失了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:27:35.630

将设计为在后台线程上运行的对象包装到`NSBlockOperation`a`NSOperationQueue`中将减轻子上下文和父上下文之间的队列阻塞错误。

您还应该删除`performBlock`子上下文的调用。Child 自动向其私有队列上的父队列发出请求，该私有队列使用父上下文自动调用父上下文`performBlock`。*如果您的代码碰巧不在主线程上运行，*您现有的调用将起作用，但如果它在主线程上运行（子线程和父线程正在锁定主线程）会导致死锁，这是单元测试中发生的情况。我看到 Apple 记录的唯一地方是在这个 2012 WWDC 视频中。

[https://developer.apple.com/videos/wwdc/2012/?id=214](https://developer.apple.com/videos/wwdc/2012/?id=214)

# mootools - 如何使用 Mootools 创建和注入多个元素？

> ID：14461389
> 
> 赞同：2
> 
> 时间：2013-01-22T14:53:29.300
> 
> 标签：mootools

我有 5 个元素需要注入额外的跨度，而不是创建新元素 5 次，我怎么能只做一次？我试过了

```
var holders= $$('.holders');
holders.each(function (el){
var addspan = new Element('span', {
    'class': 'over'
});
    el.inject(addspan , 'top');
}); 
```

但它不起作用任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:56:33.073

注入则相反。[它将一个元素注入另一个元素](http://mootools.net/docs/core/Element/Element#Element%3ainject)。尝试反转`addspan`和`el`。

另一种选择是使用该[`adopt`](http://mootools.net/docs/core/Element/Element#Element%3aadopt)功能，这可能更直观地意味着让一个元素采用另一个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T22:25:51.593

就像已经提到的 akaIDIOT 一样，您必须在使用该方法时交换`addspan`和。要节省一行代码，您可以将方法与新元素链接起来，如下所示：`el``inject``inject`

```
var holders= $$('.holders');
holders.each(function(el) {
    var addspan = new Element('span', {
        'class': 'over'
    }).inject(el, 'top');
}); 
```

# android - android listview 每行都有一个复选框

> ID：14461396
> 
> 赞同：0
> 
> 时间：2013-01-22T14:53:47.737
> 
> 标签：android, android-layout

我想建立一个列表视图，每行都有一个带有图像和文本视图的复选框，我几乎做到了，但是当我放置复选框时我无法按下 list_row，我的意思是在我放置复选框之前我可以单击该行并且它像我的风格一样悬停，但是当我单击 list_row 时放置复选框后它没有悬停并且 onitemclick 不起作用，为什么？

这是我每个 list_row 的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/restaurant_list_item_selector"
    android:orientation="horizontal"
    android:padding="5dip" >

    <!-- ListRow Left sied Thumbnail image -->

    <LinearLayout
        android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:background="@drawable/restaurant_list_item_image_bg"
        android:padding="3dip" >

        <ImageView
            android:id="@+id/restaurant_multi_select_list_item_image"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:src="@drawable/rihanna" />
    </LinearLayout>

    <TextView
        android:id="@+id/restaurant_multi_select_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/thumbnail"
        android:layout_toRightOf="@+id/thumbnail"
        android:textColor="#040404"
        android:textSize="15dip"
        android:textStyle="bold"
        android:typeface="sans" />

    <!-- Rightend check box -->

    <CheckBox
        android:id="@+id/restaurant_multi_select_checkBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true" 
        android:checked="false"
        />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:58:18.240

添加可聚焦元素（如 CheckBox 或 Button）会禁用单击整个列表项的功能，并且必须禁用它们的可聚焦性。

在xml中的复选框属性中添加以下内容，然后尝试

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

希望这可以帮助！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:06:41.833

是的，因为复选框的存在使视图不可点击。您需要实现您正在使用的 ImageView 和 TextView 的 onClicklistenrs，并在单击列表行单击时编写相同的代码

设置焦点仅有助于触摸，但也将实现复选框单击

# f# - 详细语法中的简单正确实现文件？

> ID：14461397
> 
> 赞同：3
> 
> 时间：2013-01-22T14:53:50.483
> 
> 标签：f#

**更新**

一般的问题是：如何正确使用 F# 的详细语法？详细语法是接近 OCaml 语法的语法，即带有许多逗号等的语法。

**旧文本**

我想关闭轻量级语法`F#`以获得更接近`OCaml`.

我写了以下代码

```
#light "off"

let k=3.14;; 
```

并在 let 上出错：

```
Unexpected keyword 'let' or 'use' in implementation file 
```

什么是没有轻量语法的正确实现文件结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T18:37:31.197

问题是你已经把它写在一个`.fsi`文件中——这是一个 FSharp 接口定义文件；`fsi.exe`它与（FSharp Interactive）无关。

消息“Unexpected keyword 'let' or 'use' in implementation file”是一个告诉 - 接口定义是预期的。只需使用`.fs`扩展程序。

如果您想重用 ML 代码，请考虑将文件扩展名更改为`.ml`，并在开头添加一个`#nowarn "62"`指令以忽略遗留警告。

```
#nowarn "62"
#light "off"

let div2 = 2;;

let f x = 
    let r = x % div2 in
      if r = 1 then 
        begin "Odd"  end 
      else 
        begin "Even" end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:58:34.850

我看不出有什么问题，但是...为什么是两个；？您是在编译它还是在 fsi 中运行？

# actionscript - hitTestObject 方法 fa 通过 newar 角

> ID：14461400
> 
> 赞同：0
> 
> 时间：2013-01-22T14:54:07.253
> 
> 标签：actionscript

两个矩形和给定的实例名称`w1`，`w2`然后如何通过我的两个矩形非常靠近对方，当我试图通过它卡在角落但我看到它们彼此相距很远

[http://forums.adobe.com/thread/1139552](http://forums.adobe.com/thread/1139552)

```
addEventListener(Event.ENTER_FRAME, moveplayer);
var left,right,up,back:Boolean;

// both rectangles were given  instancename as w1 and w2 and drawn on stage manually

stage.addEventListener(KeyboardEvent.KEY_DOWN ,keypress);
stage.addEventListener(KeyboardEvent.KEY_UP ,keyup);
//gray box movement key
function keypress(event:KeyboardEvent  ):void
{

          if (event.keyCode == 37)
          {
                    left = true;

          }
          else if (event.keyCode==38)
          {
                    up = true;

          }
          else if (event.keyCode==39)
          {
                    right = true;

          }
          else if (event.keyCode==40)
          {
                    back = true;

          }
}

function keyup(event:KeyboardEvent ):void
{

          if (event.keyCode == 37)
          {
                    left = false;
          }
          else if (event.keyCode==38)
          {
                    up = false;

          }
          else if (event.keyCode==39)
          {
                    right = false;

          }
          else if (event.keyCode==40)
          {
                    back = false;

          }

}
//grey box movement
function moveplayer(event:Event ):void
{

//hit test
          if (w1.hitTestObject(w2))
          {
                    trace("hit");

//function call to repulse back
                    repulse();
          }
          else
          {
// function call to move
                    go();
          }

//rotation
          if (left)
          {
                    rotateit("left");
          }
          else if (right)
          {
                    rotateit("right");
          }

          function rotateit( direc:String)
          {

                    if (direc == "left")
                    {
                              w1.rotation -=  1;
                    }
                    else if (direc == "right")
                    {
                              w1.rotation +=  1;

                    }

          }
}

//move function
function go()
{
          if (up)
          {
                    var x2:Number = w1.x;
                    var y2:Number = w1.y;
                    //trace(x2,y2)
                    var speed:Number = 5;
                    w1.x +=  speed * Math.sin(w1.rotation * 2 * Math.PI / 360);
                    w1.y -=  speed * Math.cos(w1.rotation * 2 * Math.PI / 360);

          }
}
//repulsion function

function repulse()
{

          var x1:Number = w1.x;
          var y1:Number = w1.y;
          trace(x1,y1);
          var speed:Number = 5;
          w1.x +=   -  (speed * Math.sin(w1.rotation * 2 * Math.PI / 360));
          w1.y -=   -  (speed * Math.cos(w1.rotation * 2 * Math.PI / 360));
} 
```

# c# - 自动生成的 Windows 窗体变量

> ID：14461402
> 
> 赞同：0
> 
> 时间：2013-01-22T14:54:11.403
> 
> 标签：c#, winforms, visual-studio-2010

我正在按照“Programming C# 4.0, 6th edition”中的示例来使用 Windows 窗体，但我到了无法理解实际发生的情况的地步。我有 3 个文件，其中一个`Main()`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace ToDoList
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
    }
} 
```

一个使用表单的字段：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

    public class ToDoEntry
    {
        public string Title { get; set; }
        public string Description { get; set; }
        public DateTime DueDate { get; set; }

} 
```

和表格本身：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace ToDoList
{
    public partial class Form1 : Form
    {

        private BindingList<ToDoEntry> entries = new BindingList<ToDoEntry>();

        public Form1()
        {
            InitializeComponent();
            entriesSource.DataSource = entries;
            CreateNewItem();
        }

        private void bindingSource1_CurrentChanged(object sender, EventArgs e)
        {

        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }

        private void listView1_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void CreateNewItem()
        {
            ToDoEntry newEntry = (ToDoEntry)entriesSource.AddNew();
            newEntry.Title = "New entry";
            newEntry.DueDate = DateTime.Now;
            entriesSource.ResetCurrentItem();
        }

        private void entriesSource_ListChanged(object sender, ListChangedEventArgs e)
        {
            switch (e.ListChangedType)
            {
                case ListChangedType.ItemAdded:
                    MakeListViewItemForNewEntry(e.NewIndex);
                    break;
                case ListChangedType.ItemDeleted:
                    RemoveListViewItem(e.NewIndex);
                    break;
                case ListChangedType.ItemChanged:
                    UpdateListViewItem(e.NewIndex);
                    break;
            }
        }

        private void MakeListViewItemForNewEntry(int newItemIndex)
        {
            ListViewItem item = new ListViewItem();
            item.SubItems.Add("");
            entriesListView.Items.Insert(newItemIndex, item);
        }

        private void UpdateListViewItem(int itemIndex)
        {
            ListViewItem item = entriesListView.Items[itemIndex];
            ToDoEntry entry = entries[itemIndex];
            item.SubItems[0].Text = entry.Title;
            item.SubItems[1].Text = entry.DueDate.ToShortDateString();
        }

        private void RemoveListViewItem(int deletedItemIndex)
        {
            entriesListView.Items.RemoveAt(deletedItemIndex);
        }
    }
} 
```

我的问题是说名称 entriesListView 在当前上下文中不存在。这是真的，但例如`entriesSource.DataSource = entries;`

我也没有`entriesSource`，但由于某种原因我可以使用它。现在我不确定缺少的类（至少我认为它应该是一个类）是否是 VS2010（是的，我正在使用 Visual Studio 2010）应该生成的东西，但是 - 为什么它没有。

是我应该手动编写的东西，但是示例中没有任何内容，我也不知道如何定义`entriesListView`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:57:14.030

这些变量是由 Visual Studio 在设计器文件中创建的。这是通过使用`partial`关键字来完成的，这是 C# 中的一个功能，允许您将类定义拆分为两个或多个文件。

`Form1.designer.cs`在这种情况下将调用设计器文件。您可以通过打开此文件来查看已创建的控件，或者，如果使用 Visual Studio，则可以通过在 Visual Studio 设计器中打开表单来查看。要在 Visual Studio 中打开设计器文件，请展开`Form1.cs`解决方案资源管理器树视图中的条目，然后双击设计器文件。

在您上面的代码中，问题似乎是该`entriesListView`变量不存在。它可能是在某一时刻创建的，然后被删除（这甚至可能由于 Visual Studio 错误而无意中发生）。将新的 ListView 添加到表单并将`Name`属性设置为`entriesListView`应该可以解决问题。

# android - Android使用自定义类将项目添加到arraylist

> ID：14461404
> 
> 赞同：0
> 
> 时间：2013-01-22T14:54:20.107
> 
> 标签：android, listview, arraylist

我正在尝试使用此类模板将项目添加到数组列表：

```
public class Template {
public String username;
public String email; 
```

}

这是整个代码：

```
public void JsonToArrayList(JSONArray myJsonArray) throws JSONException
{
    ArrayList<Template> listItems = new ArrayList<Template>();
    JSONObject jo = new JSONObject();
    Template tem = new Template();
    ListView lv = (ListView) findViewById(R.id.listView1);

    for(int i = 0; i<myJsonArray.length(); i++)
    {
        jo = myJsonArray.getJSONObject(i);
        tem.username = jo.getString("username");
        tem.email = jo.getString("user_email");

        listItems.add(tem);         
        Log.e("Ninja Archives", tem.username);

    }
    // This is the array adapter, it takes the context of the activity as a first // parameter, the type of list view as a second parameter and your array as a third parameter
    ArrayAdapter<Template> arrayAdapter = new ArrayAdapter<Template>(this,android.R.layout.simple_list_item_1, listItems);
    lv.setAdapter(arrayAdapter); 

} 
```

问题是，不是用漂亮的用户名和电子邮件字符串填充我的列表视图，而是用这样的项目填充：

com.android.ninjaarchives。模板@40585690

我想我在某个地方迷路了，但我已经尝试了很多年，但一无所获。谁能指出我正确的方向？

谢谢你的帮助。

注意：不太确定代码发生了什么；它似乎没有正确粘贴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:01:56.103

使用下面的代码，它可以为您提供解决方案

```
public void JsonToArrayList(JSONArray myJsonArray) throws JSONException
{
    ArrayList<Template> listItems = new ArrayList<Template>();
    JSONObject jo = new JSONObject();
    Template tem = new Template();
    ListView lv = (ListView) findViewById(R.id.listView1);

    String listItemString[] = new String[myJsonArray.length];

    for(int i = 0; i<myJsonArray.length(); i++)
    {
        jo = myJsonArray.getJSONObject(i);
        tem.username = jo.getString("username");
        tem.email = jo.getString("user_email");
       listItemString[i]  = tem.username +" - " + tem.email; // u can change it according to ur need.
        listItems.add(tem);         
        Log.e("Ninja Archives", tem.username);

    }
    // This is the array adapter, it takes the context of the activity as a first // parameter, the type of list view as a second parameter and your array as a third parameter
    ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, listItemString);
    lv.setAdapter(arrayAdapter); 

} 
```

但是最好通过扩展 BaseAdapter 来编写自定义适配器，并在 getView 方法中进行 listItem 处理，[这是一个简单的教程](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:03:44.333

参加一个扩展 Base 的课程

```
 private class CustomAdapter extends BaseAdapter
{
    LayoutInflater inflater;
    public CustomAdapter(Context context)
    {
        inflater = LayoutInflater.from(context);
    }

    public int getCount()
    {
        return listItems.size();
    }

    public Object getItem(int position)
    {
        return listItems.get(position);
    }

    public long getItemId(int position)
    {
        return position;
    }

    public View getView(final int position, View convertView,ViewGroup parent)
    {
        //if(convertView==null)
        //convertView = inflater.inflate(R.layout.listlayout, parent, false);
        Template data = (Template) getItem(position);
        TextView v=new TextView(context);
        v.setText(data.name);
        return v;
    }
} 
```

并将适配器设置为您的列表视图

```
lv.setAdapter(new CustomAdapter(this)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:02:42.603

在这种情况下，您必须使用自定义适配器（从 ArrayAdapter 扩展）并覆盖 getView 方法以在自定义布局中显示用户名和电子邮件。

# c# - 如何检查查询是否通过网络执行？

> ID：14461416
> 
> 赞同：2
> 
> 时间：2013-01-22T14:54:43.697
> 
> 标签：c#, sql-server, winforms, entity-framework, network-programming

我在 PC 上安装了 MS SQL Server 2008 作为主服务器，客户端与此服务器连接并执行插入、更新、删除等查询。

我注意到有时在执行 UPDATE 查询时，没有数据保存在安装 MS SQL Server 的服务器的数据库中。

我正在使用带有实体框架的 Winform 应用程序。

```
xBindingSource.EndEdit();
context.SaveChanges(); 
```

有什么方法可以检查查询是否通过网络在服务器上成功执行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:57:29.967

运行包含在 sql server 中的[分析器。](http://www.codeproject.com/Articles/21371/SQL-Server-Profiler-Step-by-Step)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:58:27.903

您可以将[SQL Server Profiler](http://www.codeproject.com/Articles/21371/SQL-Server-Profiler-Step-by-Step)与[Fiddler](http://www.fiddler2.com/fiddler2/)结合使用。

您可以使用 . 检查在 SQL Server 中执行的查询`SQL server profiler`。通过使用`Fiddler`，您可以检查是否已向 SQL 服务器发出任何请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:16:13.357

我用过[Miniprofiler](http://miniprofiler.com/)。[这个](https://stackoverflow.com/questions/8526609/does-mvcminiprofiler-require-a-web-application-to-work-or-can-it-be-used-in-pur)答案说它不必是一个网络应用程序来使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-25T09:49:21.530

您可以简单地使用 Microsoft SQL Server Profiler 检查 SQL Server 是否已收到查询，如果是，您可以看到它的内容。探查器有许多事件，您可以根据需要使用它们。通常，您可以使用 Batch Starting 和 Batch completed 事件。不同的是，如果批处理中出现错误，那么您至少可以看到批处理开始。如果您只想知道 SQL Server 是否已收到请求，那么您只需要探查器即可。

# sql - SQL 命令未正确结束 Oracle

> ID：14461418
> 
> 赞同：3
> 
> 时间：2013-01-22T14:54:47.987
> 
> 标签：sql, oracle

下面的我的 SQL 查询说它在第一个 Inner Join 时没有正确结束？如果我删除第二个表和 where 子句，查询是否可以？

```
SELECT homes.home_id, homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft,
listagg(features.feature_name, '\n') WITHIN GROUP(ORDER BY features.feature_name) features, home_type.type_name
FROM homes, bookings
WHERE bookings.booking_end < date '2013-01-23' OR bookings.booking_start > date '2013-01-22' AND bookings.home_id <> homes.home_id
INNER JOIN home_feature ON homes.home_id = home_feature.home_id 
INNER JOIN home_type ON home_type.type_code = homes.type_code 
INNER JOIN features ON home_feature.feature_id = features.feature_id 
GROUP BY homes.home_id, homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft, home_type.type_name 
```

任何人都可以看到我的查询有任何明显的错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T14:57:08.187

您的`WHERE`子句位于错误的位置，并且您正在混合连接类型：

```
SELECT homes.home_id, 
    homes.title, homes.description, 
    homes.living_room_count, 
    homes.bedroom_count, 
    homes.bathroom_count, 
    homes.price, 
    homes.sqft,
    listagg(features.feature_name, '\n') WITHIN GROUP(ORDER BY features.feature_name) features, 
    home_type.type_name
FROM homes
INNER JOIN bookings
    ON bookings.home_id = homes.home_id
INNER JOIN home_feature 
    ON homes.home_id = home_feature.home_id 
INNER JOIN home_type 
    ON home_type.type_code = homes.type_code 
INNER JOIN features 
    ON home_feature.feature_id = features.feature_id 
WHERE bookings.booking_end < date '2013-01-23' 
    OR booking_start > date '2013-01-22' 
GROUP BY homes.home_id, homes.title, homes.description, 
       homes.living_room_count, homes.bedroom_count, 
       homes.bathroom_count, homes.price, homes.sqft, home_type.type_name 
```

该`WHERE`子句出现在 the 之后`JOIN`和之前`GROUP BY`。此外，您应该使用一种类型的连接语法。您同时使用了显式和隐式语法。我将`homes`和的连接`booking`移至 a`JOIN`而不是在表之间使用逗号。

# c# - Release Build 不构建当前源

> ID：14461420
> 
> 赞同：1
> 
> 时间：2013-01-22T14:54:50.497
> 
> 标签：c#, visual-studio, visual-studio-2012

我使用 VS2012 的 Release 构建配置文件构建了最新版本，用于今天早上展示我的应用程序。它没有按预期工作。

我提出了一个错误的应用程序，即使它今天早上运行良好。经过几次测试，我发现是 Release 构建配置导致了这个问题。我清理了我的项目几次，没有任何变化。我的代码中有这个按钮事件处理程序：

```
private void btnAddDatabaseValues_Click(object sender, RoutedEventArgs e)
{
    MessageBox.Show("test");

    /*
    some other Code...
    */

} 
```

在调试模式下，会弹出消息框。在发布模式下，正在执行一些其他代码，并且没有弹出消息框。

有任何想法吗？

我最近从 VS2010 迁移到 VS2012 并安装了 Resharper。但我认为这与我的问题无关，因为在调试模式下一切都很好？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:58:30.193

清理解决方案并重建。该构建经过优化，不会针对已经构建的项目运行，有时会适得其反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:10:46.333

检查项目是否正在根据正确的配置构建，我在解决方案设置为之前遇到了一个问题，其中`Debug`1 个项目已更改为`Release`

# jquery - 无法使用 jquery 显示希伯来语

> ID：14461422
> 
> 赞同：1
> 
> 时间：2013-01-22T14:55:01.920
> 
> 标签：jquery, json, node.js, hebrew

我正在写一个小电子邮件服务器。客户端写入`javascript/jquery`，服务器端写入`nodeJS`（这是一个家庭作业）

在客户端，我发送电子邮件如下

```
function send() {
var dataString = 'to=' + $("#to").val() + '&subject=' + $("#subject").val() + '&body=' + $("#body").val();
var lines = $("#body").val().split("\n");
for (var i = 0;i < lines.length;i++ ) {
    dataString += '&line' + i + '=' + lines[i];
}
$.ajax({
            type: "POST",
        url: "/send",
            cache: false,
        data: dataString,
        success: function(data) {
        location.reload();
            },
        error: function(xhr, textStatus, errorThrown) {
        location.reload();
        }
        });
} 
```

`$("body")`textarea 元素在哪里。我`body`在客户端上输出，确实是希伯来语。我使用此功能检索电子邮件：

```
function getMail() {
    $("#navigationButtons").show();
    $("#workingAread").empty();
    var dataString = 'start=' + start + '&url=' + url;
    $.ajax({type: "GET", data: dataString, dataType:"json", url: 'getMail', cache: false})
    .done(function(data){
        mails = data;
        $("#workingArea").empty();
        if (mails.length === 0) {
                $("#workingArea").html("Your inbox is empty");
        }
        var mailContainer = $("<div></div>");
        numOfMails = mails.pop();
            mails.forEach(function(elem,i){
                var mail =  $("<span></span>");
                mail.text(elem.fullName + ", " + elem.date + ": " + elem.subject);
                mail.click(showMail.bind(this,i));
            var chk = $("<input></input>")
                    .attr("type","checkbox")
                    .attr("id",elem.uuid);
                mailContainer.append(chk).append(mail);
                mailContainer.append("<br>");
            });
            $("#workingArea").append(mailContainer);
        return;
    })
} 
```

如您所见`dataType`，设置为`json`. 问题是我会胡言乱语，主要是问号。

有谁知道如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:18:40.833

确保您的 HTML 页面编码为 UTF-8，您的服务器发送 UTF-8，并且您的电子邮件存储为 UTF-8。

# ruby-on-rails - Ruby on Rails - 如何从关闭的 do 块中调用方法

> ID：14461429
> 
> 赞同：0
> 
> 时间：2013-01-22T14:55:22.697
> 
> 标签：ruby-on-rails, methods, erb

我的匹配索引中有这段代码：

```
<table>
<% @matches.each do |match| %>
  <tr>
    <td><%= match.team_a %></td>
    <td><%= match.team_b %></td>
    <td><%= match.score_a %> - <%= match.score_b %></td>
    <td><%= match.field %></td>
    <%= render "shared/asterisk_message", :target => [match.team_b, match.team_a] %>
<% end %>
</table> 
```

我想将渲染的asterisk_message 移到表**之外**，但这意味着将它放在 之后`<% end %>`，这显然给了我这个错误：

> #<#:0xb6da40d8> 的未定义局部变量或方法“匹配”

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:02:20.187

尝试：

```
<table>
    <% @matches.each do |match| %>
      <tr>
        <td><%= match.team_a %></td>
        <td><%= match.team_b %></td>
        <td><%= match.score_a %> - <%= match.score_b %></td>
        <td><%= match.field %></td>
        <%= render "shared/asterisk_message", :target => [match.team_b, match.team_a] %>
    <% end %>
    </table>

<% @matches.each do |match| %>
<%= render "shared/asterisk_message", :target => [match.team_b, match.team_a] %>
<% end %> 
```

# matlab - Matlab - 获取具有条件/移动功能的相邻单元格

> ID：14461431
> 
> 赞同：0
> 
> 时间：2013-01-22T14:55:24.210
> 
> 标签：matlab, matrix, conditional-statements, cells, neighbours

我有一个代表生物的结构方阵。每个生物都可以向左、向上、向右或向下移动。我正在检查空单元格的相邻矩阵位置，并对新坐标进行以下计算：

```
function res = Move2(worldDimension,row,col,left,up,right,down)

%In the following matrices, good moves are > 0.

%Directions pattern:
patternMatrix = [0 2 0;
                 1 5 3;
                 0 4 0];
%Possible border moves:             
borderMatrix = [0 (row>1) 0;
                (col>1) 1 (col<worldDimension);
                 0 (row<worldDimension) 0;];
%Possible neighbor moves:              
neighborsMatrix = [0 (up==0) 0 ;
                (left==0) 1 (right==0);
                 0 (down==0) 0;];             

%Matrix of possible directions including neighbors and borders
possibleMovesMatrix = ((borderMatrix).*(neighborsMatrix)).*(patternMatrix);

%Vector of possible directions:
possibleMovesVector = sort(possibleMovesMatrix(possibleMovesMatrix(:) > 0));

%Random direction:
randomDirection = possibleMovesVector(randi(length(possibleMovesVector)));

directionCoordsVector = [[row (col-1)];[(row-1) col];[row (col+1)];[(row+1) col];[row col]];                         
res = [directionCoordsVector(randomDirection,1) directionCoordsVector(randomDirection,2)];
end 
```

这个函数有点慢，当我运行分析器时它告诉我：

```
borderMatrix = [0 (row>1) 0;
(col>1) 1 (col<worldDimension);
0 (row<worldDimension) 0;]; 
```

需要 36% 的时间并且：randomDirection = possibleMove... 需要 15% 的时间。有没有办法可以加快这个过程？

也许我可以通过从主游戏板上立即获取生物坐标周围的空闲点来采取不同的方法？如果是这样，如果一个生物靠近棋盘的边界，我该如何获取子矩阵而不必处理越界索引？

谢了，兄弟们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:22:20.737

所以你有一个结构数组，并在数组内移动结构？这对我来说似乎效率极低。

此外，`borderMatrix`-line 需要这么长时间的原因是因为您正在构建一个可能很大的数组。

以下是处理移动生物的建议：

将您的生物存储为 nCreatures-by-mProperties 数字数组。在数组的列上应用函数来爬取单个字段要容易得多。例如`creatures = [x,y,prop1,prop2];`

一个接一个地移动你的生物：

```
for iCreature = 1:nCreatures
    currentPos = creatures(iCreature,1:2);

    %# initialize array of allowed moves with border conditions
    goodMoves = [currentPos(1) > 1, currentPos(2) > 1, currentPos(1) < maxX, currentPos(2) < maxY, true];

    %# check for neighbors
    if any(creatures(:,1) == currentPos(1) - 1 & creatures(:,2) == currentPos(2))
       goodMoves(1) = false;
    end
    %# etc

    %# identify remaining good moves
    if any(goodMoves(1:4))
       goodMoveIdx = find(goodMoves);
       move = goodMoveIdx(randi(length(goodMoveIdx)));
    else
       move = 5; %# remain stationary
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:25:25.973

目前尚不清楚是否存在多个高度依赖的生物，但否则这将是一个有效的工作流程：

1.  每个生物产生 1 个随机数
2.  确定每个生物有多少可能的移动
3.  使用对应的随机数进行选择

如果它们是相关的，但不是太多，您可以多次执行此操作，直到找到可行的值或在步骤 2 中包含相关性。

# objective-c - 按操作按钮两次使应用程序崩溃

> ID：14461437
> 
> 赞同：0
> 
> 时间：2013-01-22T14:55:42.773
> 
> 标签：objective-c, xcode

当我再次按下操作按钮以打开我的活动视图时，我的应用程序在 iPad 模拟器中崩溃。我担心如果用户想再次按下按钮关闭 Popover 而不是触摸它的外部，这将是一个问题。任何建议表示赞赏:)

仅供参考，操作按钮是一个 UIToolbar 按钮。

在.h

```
@property (strong, nonatomic) UIPopoverController *popup;
@property (strong, nonatomic) UIPopoverController *activityViewProp; 
```

在他们中：

```
-(IBAction)openUIActivityView:(id)sender {

    UIActivityViewController *activityView = [[UIActivityViewController alloc]initWithActivityItems:@"Hello World" applicationActivities:nil];

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        [self presentViewController:activityView animated:YES completion:^{    
        }];
    } else {

self.popup = [[UIPopoverController alloc] initWithContentViewController:activityView];

[self.popup presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES]; }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:58:05.117

只需检查您是否已经有弹出窗口，然后执行其他操作

```
-(IBAction)openUIActivityView:(id)sender {
    if (self.popup) {
        [self.popup dismiss ...];
    }
    else {
        // show popup code
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:01:19.010

问题是，视图控制器在任何给定时间只能呈现另一个视图控制器。目前，当您第二次点击按钮时，您会尝试呈现一个新的 UIActivityViewController 实例，而另一个实例已经呈现。

您可以通过检查主视图控制器`presentedViewController`属性的值来解决此问题。如果它不是 nil（实际上是 UIActivityViewController 类型），您可以从操作中返回而无需执行任何操作：

```
- (IBAction)openUIActivityView:(id)sender {
    if (!self.presentedViewController) {
        // We have no presented view controller yet.
        // <your current code here>
    } else {
        // We are already presenting a view controller.
        // Either dismiss it, or don't do anything.
} 
```

# java - 如何检查内存使用情况并强制为码头应用程序收集垃圾

> ID：14461443
> 
> 赞同：0
> 
> 时间：2013-01-22T14:56:05.527
> 
> 标签：java, memory-leaks, garbage-collection, jetty

我想我可能在 jetty 8.1.7 生产中运行的 servlet 应用程序中存在内存泄漏。

1.  有没有办法查看在某个时间实例实际使用了多少堆内存，而不是使用 -Xmx 分配的最大内存，而是实际使用的内存量。
2.  我可以强制为在码头内运行的应用程序进行垃圾收集吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:57:46.400

是的，两者都可以通过以下方式轻松实现：（`VisualVM`请参阅：[http](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/monitor_tab.html) ://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/monitor_tab.html ）默认情况下，这个是 Oracle JDK 附带的（=> 否需要额外安装）

但是对于内存泄漏检测，我建议进行内存转储并稍后使用`eclipse MAT`( [http://www.eclipse.org/mat/](http://www.eclipse.org/mat/) ) 对其进行分析，因为它具有相当不错的 UI 可视化 java 内存转储。

**编辑**：

对于仅 ssh 访问，是的，您可以使用上述两个工具。但是，您需要在运行窗口管理器的机器上运行它们，并通过 ssh 远程连接到另一台机器（您需要在这两台机器上都有 java）：

*   对于`visualVM`：您需要`VisualVM`在一台机器上运行并通过 ssh 连接到远程机器，请参阅：[VisualVM over ssh](https://stackoverflow.com/questions/1609961/visualvm-over-ssh)
*   对于内存转储：使用`jmap`（示例用法参见： http: [//kadirsert.blogspot.de/2012/01](http://kadirsert.blogspot.de/2012/01/) / ...）然后下载转储文件并在本地加载到`eclipse MAT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:03:56.553

你可以打电话`System.gc()`。这*通常会*执行完整的 GC ......但可以禁用此工具。（有一个 JVM 选项可以使用 HotSpot JVM 执行此操作。）

但是，如果您的问题是内存泄漏，那么**运行 GC 将无济于事**。事实上，它可能会使您的服务器比现在更慢。

您还可以监控内存使用情况（以多种方式 - 请参阅其他答案），但这只会为您提供内存泄漏*可能*泄漏的证据。

您真正需要做的是找到并修复内存泄漏的*原因*。

参考：

*   [如何查找 Java 内存泄漏](https://stackoverflow.com/questions/40119/how-to-find-a-java-memory-leak)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:05:37.077

启用 jmx 并使用 jconsole 连接到它

[http://wiki.eclipse.org/Jetty/Tutorial/JMX](http://wiki.eclipse.org/Jetty/Tutorial/JMX)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T15:42:28.097

您可以使用 %JAVA_HOME%\bin 文件夹下的 jvisualvm.exe。通过使用此应用程序，您可以监控内存使用情况并可以强制 gc。

# javascript - 检查数组javascript中的字符串是否

> ID：14461450
> 
> 赞同：5
> 
> 时间：2013-01-22T14:56:31.837
> 
> 标签：javascript

如果我有一个数组`days names`并且我想检查例如是否`sunday`- 第一个字母大写或小写 - 在这个数组中最好的做法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-22T15:04:32.740

您还可以使用[`Array.indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
var days = ["monday",
            "tuesday",
            "wednesday",
            "thursday",
            "friday",
            "saturday",
            "sunday"];

function isInArray(days, day) {
    return days.indexOf(day.toLowerCase()) > -1;
}

isInArray(days, "Sunday");  // true
isInArray(days, "sunday");  // true
isInArray(days, "sUnDaY");  // true
isInArray(days, "Anyday");  // false 
```

[*检查MDN*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf#Compatibility)中的浏览器兼容性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T14:58:35.187

```
function is_in_array(s,your_array) {
    for (var i = 0; i < your_array.length; i++) {
        if (your_array[i].toLowerCase() === s.toLowerCase()) return true;
    }
    return false;
} 
```

用法：

```
var arr = ["hello","ToTo"];
is_in_array("toto",arr) //true
is_in_array("todto",arr) //false 
```

# c# - 在按钮点击、回发问题上动态加载用户控件

> ID：14461452
> 
> 赞同：1
> 
> 时间：2013-01-22T14:56:33.643
> 
> 标签：c#, asp.net

我正在尝试在单击按钮时加载用户控件，但问题是，它在用户控件内的回发时消失了。

这就是我加载控件的方式：

```
private bool IsUserControl
{
    get
    {
        if (ViewState["IsUserControl"] != null)
        {
            return (bool)ViewState["IsUserControl"];
        }
        else
        {
            return false;
        }
    }
    set
    {
        ViewState["IsUserControl"] = value;
    }
}

#region Usercontrols
private void CreateUserControlAllNews()
{
    Control featuredProduct = Page.LoadControl("path/usercontrol.ascx");
    plh1.Controls.Add(featuredProduct);
}

#endregion
protected void allNewsbtn_Click(object sender, EventArgs e)
{

    this.IsUserControl = true;
    if(IsUserControl)
    CreateUserControlAllNews();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:26:31.887

当页面回发时，您需要重新加载控件。例如，

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsUserControl)
    {
        CreateUserControlAllNews();        
    }
}

private void CreateUserControlAllNews()
{
    Control featuredProduct = Page.LoadControl("path/usercontrol.ascx");
    featuredProduct.ID = "1234";
    plh1.Controls.Add(featuredProduct);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:30:39.313

当然它会消失，每个请求都会创建一个全新的页面实例，如果您不在该回发上重新创建控件，那么它将不存在。

有关这个非常常见的问题，请参阅以下链接。

[会唱歌的鳗鱼](http://www.singingeels.com/Articles/Dynamically_Created_Controls_in_ASPNET.aspx)

[另一个问题](https://stackoverflow.com/questions/8914692/events-in-my-dynamically-loaded-user-controls-do-not-fire-in-asp-net-web-applica/8926355#8926355)

# c# - 找出枚举是否设置了“标志”属性

> ID：14461460
> 
> 赞同：28
> 
> 时间：2013-01-22T14:56:52.253
> 
> 标签：c#, reflection, enums

使用反射，如何确定枚举是否具有 Flags 属性

所以对于 MyColor 返回 true

```
[Flags]
public enum MyColor
{
    Yellow = 1,
    Green = 2,
    Red = 4,
    Blue = 8
} 
```

对于 MyTrade，返回 false

```
public enum MyTrade
{
    Stock = 1,
    Floor = 2,
    Net = 4,
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-22T14:58:12.523

```
if (typeof(MyEnum).GetCustomAttributes(typeof(FlagsAttribute), false).Length > 0) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-22T15:03:37.840

如果您使用的是 .NET 4.5：

```
if (typeof(MyColor).GetCustomAttributes<FlagsAttribute>().Any())
{
} 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-10-13T07:56:25.030

如果您只想检查一个属性是否存在，而不检查任何属性数据，您应该使用[`MemberInfo.IsDefined`](https://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.isdefined(v=vs.110).aspx). 它返回一个`bool`指示“指定类型或其派生类型的一个或多个属性是否应用于此成员”而不是处理属性集合。

### 例子

```
typeof(MyColor).IsDefined(typeof(FlagsAttribute), inherit: false); // true
typeof(MyTrade).IsDefined(typeof(FlagsAttribute), inherit: false); // false 
```

或者，如果您使用的是 .NET 4.5+：

```
using System.Reflection;

typeof(MyColor).IsDefined<FlagsAttribute>(inherit: false); // true
typeof(MyTrade).IsDefined<FlagsAttribute>(inherit: false); // false 
```

# c# - 使用标签解析 XML C＃

> ID：14461461
> 
> 赞同：0
> 
> 时间：2013-01-22T14:56:57.933
> 
> 标签：c#, xml, xml-parsing

我想解析这个 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<feed xml:base="http://staging.bradinsight.win.web.emap-intl.net/ALFAPI/AlfWebApi/"
xmlns="http://www.w3.org/2005/Atom" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices"
xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
    <id>http://staging.bradinsight.win.web.emap-intl.net/alfapi/alfwebapi/AuthenticationToken</id>
    <title
    type="text">AuthenticationToken</title>
        <updated>2013-01-22T13:07:10Z</updated>
        <link rel="self" title="AuthenticationToken"
        href="AuthenticationToken" />
        <entry>
            <id>http://staging.bradinsight.win.web.emap-intl.net/ALFAPI/AlfWebApi/AuthenticationToken(1)</id>
            <category
            term="AlfWebApiInfrastructure.Poco.AuthenticationToken" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme"
            />
            <link rel="edit" title="AuthenticationToken" href="AuthenticationToken(1)"
            />
            <title />
            <updated>2013-01-22T13:07:10Z</updated>
            <author>
                <name />
            </author>
            <content type="application/xml">
                <m:properties>
                    <d:AuthenticationTokenId m:type="Edm.Int32">1</d:AuthenticationTokenId>
                    <d:IsValid m:type="Edm.Boolean">true</d:IsValid>
                    <d:Message>Success</d:Message>
                    <d:Token>B50F114BF0BE2B7B210132B1D188DAD8AD6719D808BD59D800509A951C4FB7445687E4F75FCE22C52219495D5172AFFB0FB20FE4E949D20CA0F5055D7F9237C6B5EA4028692A63A2AB0E1703C4668EE2D4C58473A58F1B25AC8ADE4DE12B2A7581064217C5040EDB3A4E302DA1714F21BBEA7D82748B4DF9524C5FED6ED7E265
                        <
                        /d:Token>
                </m:properties>
            </content>
        </entry> 
```

使用此代码：

```
 WebRequest wrGETURL;
 wrGETURL = WebRequest.Create(sURL);

  StringBuilder output = new StringBuilder();

  Stream objStream;
      try
        {
            objStream = wrGETURL.GetResponse().GetResponseStream();

            StreamReader objReader = new StreamReader(objStream);

                // Create an XmlReader
                using (XmlReader reader = XmlReader.Create(new StringReader(objReader.ReadToEnd())))
                {
                    XmlWriterSettings ws = new XmlWriterSettings();
                    ws.Indent = true;
                    using (XmlWriter writer = XmlWriter.Create(output, ws))
                    {

                        // Parse the file and display each of the nodes.
                        while (reader.Read())
                        {
                            switch (reader.NodeType)
                            {
                                case XmlNodeType.Element:
                                    writer.WriteStartElement(reader.Name);
                                    break;
                                case XmlNodeType.Text:
                                    writer.WriteString(reader.Value);
                                    break;
                                case XmlNodeType.XmlDeclaration:
                                case XmlNodeType.ProcessingInstruction:
                                    writer.WriteProcessingInstruction(reader.Name, reader.Value);
                                    break;
                                case XmlNodeType.Comment:
                                    writer.WriteComment(reader.Value);
                                    break;
                                case XmlNodeType.EndElement:
                                    writer.WriteFullEndElement();
                                    break;
                            }
                        }

                    }
                } 
```

但是我的 C# 代码无法解析 tag 。

我收到此错误：

```
{System.ArgumentException: Invalid name character in 'm:properties'. The ':' character, hexadecimal value 0x3A, cannot be included in a name.
   at System.Xml.XmlWellFormedWriter.CheckNCName(String ncname)
   at System.Xml.XmlWellFormedWriter.WriteStartElement(String prefix, String localName, String ns)
   at System.Xml.XmlWriter.WriteStartElement(String localName)
   at AlfApi.Controllers.HomeController.Index() in c:\users\nickgowdy\documents\visual studio 2010\Projects\AlfApi\AlfApi\Controllers\HomeController.cs:line 51} 
```

有谁知道如何解析这个xml？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:48:22.293

尝试用以下代码替换您的代码：

```
case XmlNodeType.Element:
    writer.WriteStartElement(reader.Name.Substring(Math.Max(0,reader.Name.IndexOf(":") + 1)));
    break; 
```

此外，在`while`循环之后，使用该`Flush()`方法，如下所示：

```
while (reader.Read())
{
    //process
}
writer.Flush(); 
```

或者只是使用：

```
writer.WriteStartElement(reader.LocalName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:52:58.883

标记名称中的`m:`表示一个 xml 命名空间。因此，要解析 xml，您需要声明命名空间 - 在 c# 中，这是通过[XmlNamespaceManager](http://msdn.microsoft.com/en-us/library/system.xml.xmlnamespacemanager.aspx)完成的。

为读者尝试这样的事情

```
// Create an XmlReader
NameTable nt = new NameTable();
XmlNamespaceManager nsmgr = new XmlNamespaceManager(nt);
nsmgr.AddNamespace("m", "www.namespacem.com"); // Placeholder uri
nsmgr.AddNamespace("d", "www.namespaced.com"); // Placeholder uri
XmlParserContext context = new XmlParserContext(nt, nsmgr, null, XmlSpace.None);
using (XmlReader reader = XmlReader.Create(new StringReader(x), new XmlReaderSettings(), context))
{
    // Do funky stuff
} 
```

此外，您将需要修改您的编写器以允许名称空间，例如：

```
writer.WriteStartElement(reader.Prefix, reader.LocalName, reader.NamespaceURI); 
```

# javascript - 当 JQuery 更改格式时，需要在字段中保存条目

> ID：14461478
> 
> 赞同：0
> 
> 时间：2013-01-22T14:57:51.533
> 
> 标签：javascript, jquery, html, drop-down-menu, web

我可以为此提供代码，但我认为这不是必需的。

我在联系表格中有一个州/国家下拉列表。选择州/国家后，我有一个电话字段。When a US number is selected I have a script to format the number in like a standard US number. 但是，如果您在输入后选择非美国国家/地区，则会删除您在电话字段中键入的条目，因为它会更改格式。

有没有办法编写一个 JQuery 脚本来将数字保存在变量中并在更改 Country/State 字段后将数字写回？

我用来格式化数字的插件是[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:04:40.413

```
var origPhone = $('input#phone').val();

..do reset of form..

$('input#phone').val(origPhone); 
```

这假设您的手机输入具有以下 html：

```
<input id="phone" /> 
```

真的可以随心所欲，只要你用jQuery选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:09:38.427

您可以保存更改 contry 状态的值。然后您可以在 USA 时检索该值。

像，尝试解决。

```
var phoneNumber;
$("#contrystate").change(function(e){
    if($("#phonefield").val() && $("#contrystate").val()!=codeUSA){
      phoneNumber = $("#phonefield").val();
    }
    else if($("#contrystate").val()==codeUSA){
      $("#phonefield").val(phoneNumber);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:32:06.710

```
$("select").change(function() {
    var $selected = $(this).find("option:selected");
    var inputval = $("input").val();
    if (!$("option:first", this).is(":selected")) {
        $("#input").mask($selected.val());
        $("#input").val(inputval).focus();
    }
});

<input id="input" type="text">
<select>
    <option> Select Format</option>
    <option value="999 999">999 999</option>
    <option value="99 99">99 99</option>
</select> 
```

[演示](http://jsfiddle.net/j4eUM/)

# django - 使用 django-tables2 访问相关模型

> ID：14461480
> 
> 赞同：4
> 
> 时间：2013-01-22T14:57:55.610
> 
> 标签：django, django-tables2

谁能提供一个清晰的例子来说明如何使用 django-tables2 创建一个表对象，该对象从多个相关模型（即关系连接）中选择和呈现数据？文档暗示这是可能的，但没有说明如何。

在普通的 django 中，[select_related()](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)函数工作得很好，但我无法弄清楚如何在 django-tables2 中实现它。我注意到关于类似主题还有其他[未解决的问题。](https://stackoverflow.com/questions/13462793/displaying-columns-from-multiple-related-models-in-django-tables2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:42:42.277

首先，`select_related()`不需要访问相关数据，这是出于性能原因。对于 django-tables2，您需要定义一个`accessor`. 一个例子在这里：[https ://github.com/bradleyayers/django-tables2/issues/106](https://github.com/bradleyayers/django-tables2/issues/106)

# oracle - 有没有办法知道阅读器是否与命令对象相关联

> ID：14461481
> 
> 赞同：0
> 
> 时间：2013-01-22T14:57:57.563
> 
> 标签：oracle, c#-4.0, ado.net

我有一个`openconnection` `closeconnection`写函数...的层。
我有一个很大的业务逻辑文件，有很多`data reader`人使用过。
我的问题是数据读取器尚未关闭。
所以我的连接数量`app pool`不断增加。

有什么办法可以找到是否有任何阅读器与命令相关联，如果然后在`closeconnection`函数中我可以检查命令对象并关闭阅读器。

由于我们使用`ref-cusor`oracle 来读取数据。据我所知，这种类型的游标不是由 oracle 管理的。
我很难检查所有的 bll。

请建议。

## 编辑1：

如果我处置命令对象天气，我也对处置有些困惑，否则读者处置将被调用。或者，如果我处置 Connection 对象，读者将被处置。

# function - 自动在变量字符串的两侧添加标准字符串

> ID：14461482
> 
> 赞同：1
> 
> 时间：2013-01-22T14:58:00.097
> 
> 标签：function, google-sheets, string-concatenation

我有一个在线标志库，可在电子表格中使用。当前函数如下所示：

```
=image("http://www.website.com/images/Flags/us.png", 3) 
```

我想将规则或函数应用于整个列，这样我只需要编写`us`它并在之前自动添加：

`=image("http://www.website.com/images/Flags/`

这之后：

`.png", 3)`

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T23:39:34.497

当然。如果您将两个“标准组件”放入 B1 和 C1 中，如下所示：

```
=B$1&A3&C$1 
```

应该用于连接三个元素以适应`us`A3 中的情况。如果需要，可以复制公式以将标准组件包裹在 ColumnA 中的其他值周围：

![SO14461482 示例](../Images/cc1a1fdb6d23eb3c728170fe5687d09d.png)

# memory-management - 扭曲的过程是巨大的

> ID：14461483
> 
> 赞同：0
> 
> 时间：2013-01-22T14:58:00.420
> 
> 标签：memory-management, twisted

由于内存问题，我拥有的一个 Twisted 应用程序经常被杀死。程序变大了，在被操作系统关闭之前消耗了系统的所有内存。重新启动并重复。

这是在虚拟服务器上，所以我将内存加倍，问题解决了 - 守护进程稳定在 1.25GB 左右的内存

有没有人对我如何最好地描述这个来判断所有内存被吸入的内容/位置有什么建议？

如果应用程序上的信息有帮助，我将使用扭曲反应器和 internet.timer.TimerService 轮询数据库以通过三个“服务”更新项目。要处理的项目被推送到一个 twisted.internet.defer.DeferredList 中，并且它们的处理发生在一个 deferToThread 块中。在延迟过程中，有一些阻塞操作（获取网页等）和大量 HTML 解析（beautiful soup 和其他库）。我建议 reactor.threadpool 的大小为 10，并且每个“服务”都使用具有 10 个令牌的 SemaphoreService 进行线程处理。我真的希望这个守护进程最大内存约为 400MB，而不是 3 倍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:57:36.990

这更像是我如何在扭曲的应用程序中调试内存泄漏/使用问题的一般想法。Twisted 有一个 ssh 服务器支持，这是我添加到几乎所有开发项目中的东西。ssh 提供了一个交互式 python 解释器访问该方法的方法，该方法具有可用的 python 垃圾收集器和许多帮助函数，这些函数允许我 a) 检查来自同一类的实例的计数，b) 开始和停止检查该计数的变化随着时间的推移和 c) 获取该类的所有引用。交互式解释器的好处是它允许对违规实例、它们与其他对象的关系以及它们所处的进程状态进行临时内省。

# sql - 使用 CASE 计算更改日期差异

> ID：14461484
> 
> 赞同：0
> 
> 时间：2013-01-22T14:58:00.753
> 
> 标签：sql, sql-update, case

在添加到数据库中的最终表之前，我有一个数据保存表。

该表中有一个 datediff 计算，它返回一个月中的天数。

但是，这是基于项目的，我需要做的是在另一个表中查找项目 ID，以查看 TimeID（年/月）是否等于项目的开始日期或结束日期。

当它匹配时，它需要将该月的天数更改为 Month-Start 到 Project-Finish （如果它是结束月份）或 Project-Start 到 Month-End （如果它是开始月份）。

我尝试使用以下脚本执行此操作，但出现错误：

```
*** This bit is sorted, please see below ***
Msg 156, Level 15, State 1, Line 15
Incorrect syntax near the keyword 'FROM'.
Msg 102, Level 15, State 1, Line 23
Incorrect syntax near 'A'.
*** This bit is sorted, please see below *** 
```

*** 编辑 *** 感谢 Anton，我已将所需的 END 添加到我的 CASE 语句中，但我现在得到一组不同的错误（可能取决于我的语法）：

```
Msg 207, Level 16, State 1, Line 23
Invalid column name 'TimeID'.
Msg 207, Level 16, State 1, Line 20
Invalid column name 'TimeID'.
Msg 207, Level 16, State 1, Line 26
Invalid column name 'ID'.
Msg 207, Level 16, State 1, Line 28
Invalid column name 'ID'. 
```

如果可以的话请帮忙。

脚本是：

```
UPDATE FAC
SET FAC.[SignedData] = 
CASE
    WHEN FAC.[TIMEID] = A.[Start_TimeID] THEN 
        CASE
            WHEN pd.[Start_Date] >= GETDATE() THEN datediff(day,pd.[Start_Date],pt.[Period_End])
            WHEN pd.[Start_Date] < GETDATE() THEN datediff(day,GETDATE(),pt.[Period_End])
        END

    WHEN FAC.[TIMEID] = A.[End_TimeID] THEN 
        CASE
            WHEN pd.[End_Date] >= GETDATE() THEN datediff(day,getdate(),pd.[End_Date])
            WHEN pd.[End_Date] < GETDATE() THEN '0'
        END
    END
FROM Temp_Fac2Programme FAC
JOIN
    (
    SELECT 
        pd.[TimeID], pd.[Start_TimeID], pd.[End_TimeID], pt.[Period_Start], pt.[Period_End]
    FROM ProjectDates pd
    JOIN ProjectTimeID pt
        on pd.[TimeID] = pt.[TimeID]
    ) A

ON A.[ID] = FAC.[Project]

Where   A.[ID] = FAC.[Project]

GO 
```

NB - SIGNEDDATA 是该月的天数。

*** 示例数据 ***

Temp_Fac2Programme (FAC) 包含：

```
ACCOUNT             CATEGORY        DATASRC     PROFITCENTRE    PROJECT         RPTCURRENCY     TIMEID          SIGNEDDATA      SOURCE
REMAIN_DAYS_FLAG    ACTUAL          DS_FLAGS    B9059           AAA_7915_BBOY   LC              20130100        34.0000000000   0 
```

ProjectDates (pd) 包含：

```
PROJECT_ID      START_TIMEID    END_TIMEID  START_DATE  END_DATE    TOTAL_DAYS
PAG_5244_CASH   20110400        20120300    2011-04-01  2012-03-31  365 
```

ProjectTimeID (pt) 包含：

```
TIMEID      PERIOD_START    PERIOD_END  DAYS_IN_PERIOD  PCMONTHSTAT
20140600    2014-05-31      2014-06-27  27              F 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:00:06.500

截至当前（编辑）版本，它基本上是错误消息所说的：

您`pd.[TimeID]`在两个地方使用，但没有`TimeID`列`ProjectDates`（现在，我不知道您在这里的意思）。

您的子查询（别名为`A`）没有`ID`列。可能的解决方法是添加`pd.[Project_ID] as ID`到子查询的选定字段列表中。

# java - 将 Maven 工件映射到 Debian 包

> ID：14461486
> 
> 赞同：3
> 
> 时间：2013-01-22T14:58:05.090
> 
> 标签：java, maven, build, dependencies, deb

我必须为我当前项目中的所有应用程序创建 Debian 包。这些是像“java -jar ....”一样启动的独立应用程序。每个项目都提供自己的 JAR 工件，该 JAR 工件依赖于其他几个项目工件，并且有很多 3-rd 方依赖项（编译和运行时）。

现在我可以构建一个 debian 包，其中包含所有需要的 JAR（具有传递性的依赖项、一些资源文件、脚本等）。

我还在我的包的控制文件配置中指定了 JRE Debian 依赖项，因此也安装了 java。

我使用 codehaus unix-maven-plugin 创建 deb 包。

JAR 安装到 /usr/share/java，脚本安装到 /usr/bin 等。

只要我在服务器上安装了一个包就可以了：安装和运行时成功。但是，如果已经安装了一些提供我的包包含的 JAR 之一的软件（例如 slf4j-api-1.5.10.jar），我在安装包时会遇到问题。包管理器抱怨文件冲突。当我尝试将两个应用程序安装到显然提供一组相同 jar 文件的同一台服务器上时，也会发生这种情况。

我的问题的解决方案是不包含其他 debian 包可用的 JAR 文件，而是在控制文件的“依赖”部分中声明这些包。不幸的是，并非 maven 存储库中的每个 JAR 都有相应的 debian 包可用，但对于那些缺少的工件，我可以自己创建其他 debian 包。

是否有任何可用的方法将 maven 依赖项转换为 debian 依赖项列表（控制文件中的“Depends”部分），以便我的交付不会重新分发可作为外部 debian 包使用的 JAR 文件？

我可以在我的自定义 maven 插件中使用任何在线服务来查找可能为我的应用程序提供所需 JAR 的 debian 包吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T23:34:34.020

您可以使用“jdeb-maven-plugin”创建 debian 包[https://github.com/tcurdt/jdeb](https://github.com/tcurdt/jdeb)

# extjs - ExtJs - 构造函数覆盖我的实例

> ID：14461490
> 
> 赞同：1
> 
> 时间：2013-01-22T14:58:12.150
> 
> 标签：extjs, extjs4.1

我使用 ExtJs 4.1 和 DeftJs。

一些类是用这样的构造函数定义的：

```
Ext.define( 'A.helper.Report', {
  config: {
     conf     : null,
     viewMain : null
  },
  constructor: function( oConfig ) {
     this.conf = oConfig.conf;
     this.viewMain = oConfig.viewMain;
     this.initConfig( oConfig );
  }
... 
```

现在，我像这样创建这个类的几个实例：

```
var class1 = Ext.create( 'A.helper.Report', {
   conf: someValue,
   viewMain: someObject
} );

var class2 = Ext.create( 'A.helper.Report', {
   conf: otherValue,
   viewMain: otherObject
} ); 
```

使用这些实例时，虽然给了它们不同的`oConfig`数据，但现在两者`class1`都有`class2`2nd 的数据`oConfig`。

因此，在两种情况下都调用时`this.conf`，我得到`someValue`.

如何保留已创建实例的数据？

* * *

**解决方案：**

我写

```
Ext.define( 'A.helper.Report', {
   ... 
  references: {}
  ... 
```

并将我的实例放在那里，覆盖旧实例。

切换到`references: null`帮助。

...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:05:01.583

小心不要弄乱原型对象......

**重写的答案**

你做错了。

看到这个工作**[的 JSFiddle](http://jsfiddle.net/sran/b2WA4/)**

```
Ext.define('A.helper.Report', {
     config: {
         conf     : null,
         viewMain : null
     },
     constructor: function(cfg) {
         this.initConfig(cfg);
     }
});

var class1 = Ext.create('A.helper.Report',{
    conf: 66,
    viewMain: 'Bear'
});

var class2 = Ext.create('A.helper.Report',{
    conf: 88,
    viewMain: 'Eagle'
});

class1.getConf(); // 66
class1.getViewMain(); // Bear
class2.getConf(); // 88
class2.getViewMain(); // Eagle 
```

# svn - 如何通过带有 SSL 的 SMTP 在 Collabnet Subversion Edge 中发送提交电子邮件

> ID：14461493
> 
> 赞同：0
> 
> 时间：2013-01-22T14:58:16.720
> 
> 标签：svn, version-control, collabnet

我们可以通过 SMTP 向存储库添加提交提交挂钩，从而成功设置发送提交电子邮件。但是，这仅在 SMTP 连接不使用 SSL 时有效。我们很快就会失去我们的非 SSL SMTP 服务器，因此我们将一切都转移到使用基于 SSL 的 SMTP 连接。

但是，如果我们使用 SSL 的服务器设置（端口 465），包括使用完整的用户名和密码，collabnet 将无法发送任何电子邮件，它返回一个错误，提示 Connection Closed Unexpectedly。

在我看来，Collabnet Subversion Edge 附带的 python 库不支持 SSL SMTP。有人可以确认吗？

我们可以使用其他任何替代方案吗？

编辑：我们在 Win7，x64

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:41:41.620

在 Subversion 提交上发送电子邮件的一般方法是使用 Subversion 提供的挂钩脚本。在 Windows 上运行该脚本的详细信息如下：

[https://ctf.open.collab.net/sf/wiki/do/viewPage/projects.svnedge/wiki/CommitMailerOnWin32](https://ctf.open.collab.net/sf/wiki/do/viewPage/projects.svnedge/wiki/CommitMailerOnWin32)

听起来你已经成功地完成了这项工作，但只需确保这是你正在使用的钩子。

我不知道这个钩子不支持 SSL。它使用 Python 发送消息，因此可能只是基于 Python 邮件模块支持的内容。似乎它会支持这一点。我想那里还有其他钩子脚本，我知道 Perl 中有一个。

# c++ - 如何在qt中编写自己的收藏？

> ID：14461496
> 
> 赞同：4
> 
> 时间：2013-01-22T14:58:19.610
> 
> 标签：c++, qt, collections, foreach

我正在编写一些类似于 QT 中常用集合的类：

```
class MyCollection
{
  MyElement & at(int) const;
  MyElement & operator[](int) const;
  int count() const;
}; 
```

现在我想用 QT 的 foreach 枚举我的新类中的所有元素。我应该怎么做才能实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:10:09.800

Qt（至少 4.8）使用（来自`foreach`宏）一个模板包装类`QForeachContainer`（参见参考资料`qglobal.h`）来迭代*smth*。默认实现调用`begin()`/ `end()`，但您也可以编写自己的专业化......或者只是实现`iterator begin()`，`iterator end()`成员

# terminal - 通过 AppleScript 运行 shell 脚本

> ID：14461498
> 
> 赞同：1
> 
> 时间：2013-01-22T14:58:23.583
> 
> 标签：terminal, applescript

这是我第一次尝试创建终端脚本，然后使用 AppleScript 运行代码。我已经在终端中逐行测试了我的终端脚本（它可以工作......），但想把它放在一个可以被applescript调用的文件中。到目前为止，我已经创建了一个名为的文件`"/Applications/MAMP/htdocs/global_admin/import_database_command_line.sh"`，其中保存了所有单独的命令，第一个是：

```
/Applications/MAMP/Library/bin/mysql --host=localhost -uroot -proot; 
```

然后我使用 AppleScript 将脚本调用为：

```
do shell script
"/Applications/MAMP/htdocs/global_admin/import_database_command_line.sh" 
```

不幸的是，对于我脚本中的每一行，我都会收到一个错误，例如：

```
error "/Applications/MAMP/htdocs/global_admin/import_database_command_line.sh:
line 1: : command not found 
```

在协调我的 AppleScript 和包含我的 shell 命令的文件方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:36:51.287

您需要包含`#!/bin/sh`在 .sh 文件的第一行

```
#!/bin/sh

echo "Hello, world!" 
```

然后，您需要使脚本可执行：

```
chmod +x import_database_command_line.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T11:55:22.520

这是因为“do shell script”AppleScript 命令期望运行引号中包含的 shell 命令。它不希望像您一样调用另一个脚本。只需将您的命令放在引号内，用分号分隔即可。

执行 shell 脚本“/Applications/MAMP/Library/bin/mysql --host=localhost -uroot -proot;#other_command;#etc”

[关联](https://developer.apple.com/library/mac/technotes/tn2065/_index.html)

# ms-access-2010 - MS ACCESS FindRecord 更新数据

> ID：14461500
> 
> 赞同：-1
> 
> 时间：2013-01-22T14:58:30.047
> 
> 标签：ms-access-2010

我有一个带有员工表及其 ID（关键字段）的小型数据库。我为此表创建了一个表单，并尝试添加一个按钮，该按钮允许用户在保存记录之前检查数据库中是否已经存在某个 ID。我正在尝试使用 FindRecord，但它似乎在搜索之前尝试更新该字段。这样我得到一个错误，我正在尝试使用现有的关键字段添加新记录。

有任何想法吗？

谢谢，摇晃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:15:41.083

You can create a combo box on your form to look up existing employee IDs. The wizard will guide you through creating the combo. The user can then type in a number or name and if it exits, the record will be shown. You can use the Not In List event to run code if the number is not found. This is usually quite nice for your users, because the autocomplete will "guess" the number.

![find using combo](../Images/18f008284034e4d840cca5f445cc099c.png)

# ios - 以编程方式创建 UIView

> ID：14461502
> 
> 赞同：0
> 
> 时间：2013-01-22T14:58:31.643
> 
> 标签：ios, xcode, uiviewcontroller, uitabbarcontroller

我有一个 iPad 应用程序，它从 Web 服务器 (ASP.Net / C#) 下载和显示文档。文档分为类别，每个类别由选项卡栏控制器上的选项卡表示。

当用户点击一个选项卡时，会显示一个视图控制器，显示该类别的文档的网格视图。

我通过界面生成器将它们放在一起，每个类别都是硬编码的。

但是，我希望能够在 Web 服务上创建一个新类别，然后让应用程序通过从网络服务。

有谁知道这是否可能，还是必须从界面生成器完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:17:04.277

基本步骤是这样的：

- 在应用程序委托或初始化和设置标签栏之前的某个地方，调用下载图像和信息

-根据您下载的数据，以编程方式设置标签栏 ala [Programmatically Setting UITabBar Titles](https://stackoverflow.com/questions/6056354/programmatically-setting-uitabbar-titles)

- 如果布局相同，您可以为每个选项卡重用相同的视图控制器，并且只需为视图控制器的每个实例设置一个属性，说明从哪里获取数据。

# javascript - 使用 hasOwnProperty 释放脚本

> ID：14461506
> 
> 赞同：1
> 
> 时间：2013-01-22T14:58:38.263
> 
> 标签：javascript, iframe, internet-explorer-10

我有一个页面`iframe`，其中包含一个我希望在 iframe 中用户将导航到许多不同页面的页面 - 所有这些页面都与父页面位于同一域中。

在顶层窗口中，我有一个持久对象，我们称之为`appData`。在 iframe 中，我经常有类似的线条

```
parent.appData[someProperty] = {a : 1, b : 2}; 
```

我知道释放脚本错误的一般问题，并且我知道我不应该尝试在这样的对象上调用任何任意方法，因为原始文档可能已经卸载，但肯定`hasOwnProperty`不应该是这样的方法，而且我应该允许在随后的一些子页面中说：

```
if (parent.appData[someProperty].hasOwnProperty('a')) 
```

我不应该吗？奇怪的是：它在我测试过的所有浏览器中都能正常工作，除了MSIE [10](https://stackoverflow.com/questions/8317725/ie9-cant-execute-code-from-freed-script-when-calling-hasownproperty)`in`对我来说很好，但我想知道我是否一直在“作弊”，或者这是否是 MSIE 10 中的错误。

jsFiddle 不处理 iframe，所以我不确定如何最好地用一个例子来证明这一点，抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:14:43.173

就个人而言，如果您担心释放脚本问题，我会以类似方式处理所有功能，包括内置功能，例如`hasOwnProperty`. 在那种特定情况下，它仍然可以在技术上被解释为对象上的函数，并且显然一些浏览器将其视为这样（IE10），而其他浏览器将其视为仍然可以访问的特殊情况（您提到的其他情况）。即使它适用于所有浏览器，我仍然会对此感到不对劲。

因此，不确定您的确切情况，但您可以改为执行以下操作：

```
var appData = parent.appData || {};
var someProperty = appData[someProperty] || {};
if(someProperty[a] !== undefined){
    ..
} 
```

否则，你总是可以用一个`try..catch`

**更新**
当然，您也可以使用`in`，如链接问题中所述。

# c# - 将 join 和 groupby 后的结果与 DataTable 和 List 结合起来 I'd like to combine the results of a LINQ join between a DataTable and a List. This works just fine: var lpYear = ( from a in _ds.Tables[0].AsEnumerable() 问问题 问问题 2013-01-22T14:58:41.550 1204 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'd like to combine the results of a LINQ join between a DataTable and a List. This works just fine: var lpYear = ( from a in _ds.Tables[0].AsEnumerable() join b in LandingPages on a["OFFERINGKEY"].ToString() equals b.Code into c from d in c.DefaultIfEmpty() where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("January 1, " + year) where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("December 31, " + year) where LandingPages.Any(x => x.Code == a["OFFERINGKEY"].ToString()) orderby d.Title select new { title = d.Title, price = a["PRICE"] }).GroupBy(o => o.title) .Select(o => new { total = o.Sum(p => decimal.Parse(p.price.ToString())), count = o.Count(), title = o.Key } ); And I end up with rows containing "total | count | title". What I'd like to do is add some more columns. For example, LandingPage.URL or LandingPage.Code. I've tried like this, but it doesn't work: var lpYear = ( from a in _ds.Tables[0].AsEnumerable() join b in LandingPages on a["OFFERINGKEY"].ToString() equals b.Code into c from d in c.DefaultIfEmpty() where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("January 1, " + year) where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("December 31, " + year) where LandingPages.Any(x => x.Code == a["OFFERINGKEY"].ToString()) orderby d.Title select new { title = d.Title, price = a["PRICE"], url = d.URL, code = d.Code }).GroupBy(o => o.title) .Select(o => new { total = o.Sum(p => decimal.Parse(p.price.ToString())), count = o.Count(), title = o.Key, url = o.Select(p=>p.url), code = o.Select(p=>p.code) } ); This is the resulting value for url and purchased: System.Linq.Enumerable+WhereSelectEnumerableIterator`2[<>f__AnonymousType2`3[System.String,System.Object,System.String],System.String] The Solution (thanks to Cédric Bignon): Place .First() at the end of my o.Select(p=>p.url) lines: url = o.Select(p=>p.url).First(), code = o.Select(p=>p.code).First() Unfortunately there isn't one or two APIs/Libraries/Frameworks you can knit together to produce a video serving website. Invariably this will require heavy involvement on all levels of the stack: Server back-end will require the following problems to be solved: Video Encoding FFMPEG or MPlayer experience for encoding any number of video formats to either FLV or more recent h264 for HTML5 supported formats A reliable mechanism to transcode video in a background process; initially on one server but eventually on multiple servers as your services scales Video resizing Bandwidth Management to throttle connection just enough so that the video trickles down to the user Storing video files and a file sharding and naming mechanism API Server - Something like Rails, Django or NodeJS Express to serve as a JSON service layer between web clients and the video encoding/serving service. Front end will require the following issues to be solved: Playing back the video reliably across multiple OSes (Windows, OSX, Linux, Tablets, Mobile) and Platforms (IE, Chrome/Safari, Firefox, Opera) with fallback support for older browsers DRM - are your videos free or commercial? If the latter, this is another issue that needs to be addressed I'd strongly recommend an Event Driven system on your back-end as it is much easier to develop code that supports concurrency. NodeJS would be a good pick. It is worth looking at node-fluent-ffmpeg module for NodeJS as a good starting point. As for your front-end I'd recommend frameworks such as Backbone.js or AngularJS to develop you web-app. It was a fun and challenging journey when I attempted something similar a few years ago. I wish you good fortune in your journey. c#.netlinqdatatable 4 1 回答 1 This answer is useful 1 只是忘记了ToList(), 枚举 ... 枚举时o.Select(...) var lpYear = ( from a in _ds.Tables[0].AsEnumerable() join b in LandingPages on a["OFFERINGKEY"].ToString() equals b.Code into c from d in c.DefaultIfEmpty() where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("January 1, " + year) where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("December 31, " + year) where LandingPages.Any(x => x.Code == a["OFFERINGKEY"].ToString()) orderby d.Title select new { title = d.Title, url = d.URL, price = a["PRICE"], purchased = a["PURCHASEDATE"].ToString() }).GroupBy(o => o.title) .Select(g => new { total = g.Sum(p => decimal.Parse(p.price.ToString())), count = g.Count(), title = g.Key, url = g.Select(p=>p.url).Distinct().Single(), code = g.Select(p=>p.code).Distinct().Single() } ); 在纯 LINQ 中： var lpYear = from o in (from a in _ds.Tables[0].AsEnumerable() join b in LandingPages on a["OFFERINGKEY"].ToString() equals b.Code into c from d in c.DefaultIfEmpty() where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("January 1, " + year) where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("December 31, " + year) where LandingPages.Any(x => x.Code == a["OFFERINGKEY"].ToString()) orderby d.Title select new { title = d.Title, url = d.URL, price = a["PRICE"], purchased = a["PURCHASEDATE"].ToString() }) group o by o.title into g select new { total = g.Sum(p => decimal.Parse(p.price.ToString())), count = g.Count(), title = g.Key, url = (from p in g select p.url).Distinct().Single(), code = (from p in g select p.code).Distinct().Single() }; 于 2013-01-22T15:06:21.740 回答 Related 1 java - 获取连接到 RMI 服务的客户端数量 3 select - Wicket 中的彩色下拉菜单 2 android - 安装引荐来源网址未在 android 网络市场上跟踪 0 c# - 由于用户身份导致的通信问题 1 java - 在java中创建动态引用 1 android - “android.widget.LinearLayout”不能在ListView onItemClick 中转换为“android.widget.TextView” 5 c++ - 用于读取数据矩阵代码的 C++ 库 5 scala - Scala 更好的 println 2 java - 我得到异常 org.hibernate.MappingException: No Dialect mapping for JDBC type: -9 2 javascript - event.stopPropagation(); 不符合预期 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14461507
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, .net, linq, datatable

I'd like to combine the results of a LINQ join between a DataTable and a List.

This works just fine:

```
var lpYear = (
    from a in _ds.Tables[0].AsEnumerable()
    join b in LandingPages on a["OFFERINGKEY"].ToString() equals b.Code into c
    from d in c.DefaultIfEmpty()
    where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("January 1, " + year)
    where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("December 31, " + year)
    where LandingPages.Any(x => x.Code == a["OFFERINGKEY"].ToString())
    orderby d.Title
    select new {
        title = d.Title,
        price = a["PRICE"]
    }).GroupBy(o => o.title)
    .Select(o => new { 
        total = o.Sum(p => decimal.Parse(p.price.ToString())), 
        count = o.Count(),
        title = o.Key
    }
); 
```

And I end up with rows containing "`total | count | title`".

What I'd like to do is add some more columns. For example, `LandingPage.URL` or `LandingPage.Code`. I've tried like this, but it doesn't work:

```
var lpYear = (
    from a in _ds.Tables[0].AsEnumerable()
    join b in LandingPages on a["OFFERINGKEY"].ToString() equals b.Code into c
    from d in c.DefaultIfEmpty()
    where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("January 1, " + year)
    where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("December 31, " + year)
    where LandingPages.Any(x => x.Code == a["OFFERINGKEY"].ToString())
    orderby d.Title
    select new {
        title = d.Title,
        price = a["PRICE"],
        url = d.URL,
        code = d.Code
    }).GroupBy(o => o.title)
    .Select(o => new { 
        total = o.Sum(p => decimal.Parse(p.price.ToString())), 
        count = o.Count(),
        title = o.Key,
        url = o.Select(p=>p.url),
        code = o.Select(p=>p.code)
    }
); 
```

This is the resulting value for `url` and `purchased`:

```
System.Linq.Enumerable+WhereSelectEnumerableIterator`2[<>f__AnonymousType2`3[System.String,System.Object,System.String],System.String] 
```

**The Solution** *(thanks to [Cédric Bignon](https://stackoverflow.com/users/1284526/cedric-bignon))*:

Place `.First()` at the end of my `o.Select(p=>p.url)` lines:

```
url = o.Select(p=>p.url).First(),
code = o.Select(p=>p.code).First() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:06:21.740

只是忘记了`ToList()`, 枚举 ... 枚举时`o.Select(...)`

```
var lpYear = (
    from a in _ds.Tables[0].AsEnumerable()
    join b in LandingPages on a["OFFERINGKEY"].ToString() equals b.Code into c
    from d in c.DefaultIfEmpty()
    where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("January 1, " + year)
    where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("December 31, " + year)
    where LandingPages.Any(x => x.Code == a["OFFERINGKEY"].ToString())
    orderby d.Title
    select new {
        title = d.Title,
        url = d.URL,
        price = a["PRICE"],
        purchased = a["PURCHASEDATE"].ToString()
    }).GroupBy(o => o.title)
    .Select(g => new { 
        total = g.Sum(p => decimal.Parse(p.price.ToString())), 
        count = g.Count(),
        title = g.Key,
        url = g.Select(p=>p.url).Distinct().Single(),
        code = g.Select(p=>p.code).Distinct().Single()
    }
); 
```

在纯 LINQ 中：

```
var lpYear = from o in (from a in _ds.Tables[0].AsEnumerable()
                        join b in LandingPages on a["OFFERINGKEY"].ToString() equals b.Code into c
                        from d in c.DefaultIfEmpty()
                        where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("January 1, " + year)
                        where DateTime.Parse(a["PURCHASEDATE"].ToString()) >= DateTime.Parse("December 31, " + year)
                        where LandingPages.Any(x => x.Code == a["OFFERINGKEY"].ToString())
                        orderby d.Title
                        select new 
                        {
                            title = d.Title,
                            url = d.URL,
                            price = a["PRICE"],
                            purchased = a["PURCHASEDATE"].ToString()
                        })
             group o by o.title into g
             select new 
             { 
                 total = g.Sum(p => decimal.Parse(p.price.ToString())), 
                 count = g.Count(),
                 title = g.Key,
                 url = (from p in g
                        select p.url).Distinct().Single(),
                 code = (from p in g
                         select p.code).Distinct().Single()
             }; 
```

# algorithm - 使用近似算法查找所有点之间的路径

> ID：14461513
> 
> 赞同：2
> 
> 时间：2013-01-22T14:58:55.580
> 
> 标签：algorithm, path, coordinates, approximation

有 1<=n<=1000 个城市。我必须找到连接所有城市（每个城市只能访问一次）的路径，该路径以城市 1 开始和结束。在这条路径中，两个城市之间的最大长度必须尽可能短。

例如：

![在此处输入图像描述](../Images/113bc4c711e41d8d8aa2e8a74a09a18a.png)

输入：

```
coordinates of cities 
```

输出：

```
5 1 3 //longest connection is 5 and it is between cities 1 and 3
1 3 6 4 5 2 1 //path 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:05:08.530

这是一个近似算法，平均而言应该比简单的贪心算法给出更好的结果：

1.  考虑该图是完整的 - 每对顶点之间都有一条边，总共有`n(n-1)/2`边。
2.  按其权重/距离的降序对边缘进行排序。
3.  从最高距离边缘迭代到最低距离边缘，如果在移除该边缘之后，它的两个端点仍然具有至少 ceil(n/2) 的度数，则将其移除（确保存在哈密顿循环[的狄拉克定理）。](http://en.wikipedia.org/wiki/Dirac%27s_theorem_on_Hamiltonian_cycles#Bondy.E2.80.93Chv.C3.A1tal_theorem)您可以使用更强大的结果（如[Ore 定理](http://en.wikipedia.org/wiki/Ore%27s_theorem)）来修剪更多边缘，但计算复杂度会增加。
4.  在剩下的图中，使用贪心算法找到哈密顿圈。贪心算法基本上是从 1 开始，一直选择到目前还没有形成循环一部分的节点距离最短的边。因此，在您的示例中，它将首先选择 1 -> 2，然后是 2->4，然后是 4->5，依此类推。最后选择的顶点将有一条回到 1 的路径。

您可以在输入图上直接使用步骤 4 中给出的贪心算法，但预处理步骤 1-3 通常应该会大大改善您在大多数图上的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:14:58.477

听起来与[TSP](http://en.wikipedia.org/wiki/Travelling_salesman_problem)相似，只是您需要最小化 2 个城市之间的最大长度而不是总长度（这可能使其根本不同）。

我的想法是这样的：

```
create edges between each pair of cities
while (true)
  next = nextLongestEdge
  if (graph.canRemove(next)) // this function may be somewhat complicated,
                             // note that it must at the very least check that every node has at least 2 edges
    graph.remove(next)
  else
    return any path starting and ending at 1 from the remaining edges 
```

# r - 使用分段包的分段线性回归中的“固定结点和预测”

> ID：14461516
> 
> 赞同：3
> 
> 时间：2013-01-22T14:59:07.307
> 
> 标签：r, linear-regression

嗨，这个问题与之前提出的问题有关，但由于已成功回答并且我的查询现在有所不同，我觉得一个新问题是有效的。如果您认为这是错误的地方，请随时将其移至 Cross Validated。

与此相关的问题在[这里](https://stackoverflow.com/questions/14337439/piece-wise-linear-and-non-linear-regression-in-r)。我将在此处提供相同的数据以供参考：

```
x<-c(1e-08, 1.1e-08, 1.2e-08, 1.3e-08, 1.4e-08, 1.6e-08, 1.7e-08, 
1.9e-08, 2.1e-08, 2.3e-08, 2.6e-08, 2.8e-08, 3.1e-08, 3.5e-08, 
4.2e-08, 4.7e-08, 5.2e-08, 5.8e-08, 6.4e-08, 7.1e-08, 7.9e-08, 
8.8e-08, 9.8e-08, 1.1e-07, 1.23e-07, 1.38e-07, 1.55e-07, 1.76e-07, 
1.98e-07, 2.26e-07, 2.58e-07, 2.95e-07, 3.25e-07, 3.75e-07, 4.25e-07, 
4.75e-07, 5.4e-07, 6.15e-07, 6.75e-07, 7.5e-07, 9e-07, 1.15e-06, 
1.45e-06, 1.8e-06, 2.25e-06, 2.75e-06, 3.25e-06, 3.75e-06, 4.5e-06, 
5.75e-06, 7e-06, 8e-06, 9.25e-06, 1.125e-05, 1.375e-05, 1.625e-05, 
1.875e-05, 2.25e-05, 2.75e-05, 3.1e-05)

y2<-c(-0.169718017273307, 7.28508517630734, 71.6802510299446, 164.637259265704, 
322.02901173786, 522.719633360006, 631.977073772459, 792.321270345847, 
971.810607095548, 1132.27551798986, 1321.01923840546, 1445.33152600664, 
1568.14204073109, 1724.30089942149, 1866.79717333592, 1960.12465709003, 
2028.46548012508, 2103.16027631327, 2184.10965255236, 2297.53360080873, 
2406.98288043262, 2502.95194879366, 2565.31085776325, 2542.7485752473, 
2499.42610084412, 2257.31567571328, 2150.92120390084, 1998.13356362596, 
1990.25434682546, 2101.21333152526, 2211.08405955931, 1335.27559108724, 
381.326449703455, 430.9020598199, 291.370887491989, 219.580548355043, 
238.708972427248, 175.583544448326, 106.057481792519, 59.8876372379487, 
26.965143266819, 10.2965349811467, 5.07812046132922, 3.19125838983254, 
0.788251933518549, 1.67980552001939, 1.97695007279929, 0.770663673279958, 
0.209216903989619, 0.0117903221723813, 0.000974437796492681, 
0.000668823762763647, 0.000545308757270207, 0.000490042305650751, 
0.000468780182460397, 0.000322977916070751, 0.000195423690538495, 
0.000175847622407421, 0.000135771259866332, 9.15607623591363e-05) 
```

我已经成功地拟合了一个分段线性模型，使用在`1e-07`和处的断点分段`1e-06`：

```
linear.model2<-lm(y~x)
segmented.mod2<-segmented(linear.model2,seg.Z= ~x, psi=c(0.0000001,0.000001)) 
```

结果图如下所示，非常适合： [![分段拟合](../Images/369436af07af69f873852ece3bf1343d.png)](https://i.stack.imgur.com/fAAed.jpg)

然而，很明显断点不是我设置它们的地方（这`summary(segmented.mod2)`证实了）。现在我意识到这是包的重点，它会迭代直到找到定义最佳拟合的断点，但是我有理论上的理由让这些确切的断点定义最佳拟合（我猜你会称之为固定结？ ）。分段包是否可以做到这一点，或者任何人都可以提供更好的解决方案并精确定义断点？

另一个问题是，由于我将使用这些关系进行预测，因此我想提取定义线段的斜率和截距。这应该是可能的`slope(segmented.mod2)`，`intercept(segmented.mod2)`但是这种情况下的结果似乎与我的预期不符：

```
Est.   St.Err.  t value  CI(95%).l  CI(95%).u
slope1  4.614e+10 3.936e+09  11.7200  3.824e+10  5.403e+10
slope2 -6.177e+09 4.397e+08 -14.0500 -7.059e+09 -5.296e+09
slope3 -2.534e+06 5.376e+06  -0.4714 -1.332e+07  8.248e+06

Est.
intercept1 -165.90
intercept2 3061.00
intercept3   46.93 
```

线条不是形式`y=mx+c`吗？也许是一个非常愚蠢的问题，但它们是我的最爱！;)

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:57:58.800

如果您在第一次迭代后停止计算，您的第一个断点将是起始值：

```
sctrl <- seg.control(tol = 1e-04, it.max = 1, display = FALSE,
     stop.if.error = TRUE, K = 10, quant = FALSE, last = TRUE, maxit.glm = 25,
     h = 1, 
     n.boot=20, size.boot=NULL, gap=FALSE, jt=FALSE, nonParam=TRUE,
     random=TRUE, powers=c(1,1), seed=NULL)
 linear.model2<-lm(y2~x)
 segmented.mod3<-segmented(linear.model2,seg.Z= ~x, control=sctrl, 
                                psi=c(0.0000001,0.000001))

 plot(log(x) ,predict(segmented.mod3))

 abline(v=log(0.0000001))      # cannot see anything of value on original scale
 abline(v=log(0.000001)) 
```

# php - php get image width from img style attr

> ID：14461521
> 
> 赞同：1
> 
> 时间：2013-01-22T14:59:29.353
> 
> 标签：php, attributes

how to get image width and height from `img` `style`? for example:

```
$str = '<img style="margin-right:10px;width:37px;border:0;" src="icons/icon.png">'; 
```

How to get width => 37px?

I think if we write a width in a style attr, we could write it like these:

```
style="width:37px;"(no space with semicolon)
style="width: 37px;"(space with semicolon)
style="width:37px"(no space no semicolon)
style="width: 37px"(space no semicolon) 
```

if no semicolon, the width must be write in the end of the style, like `style="height:25px;width:37px"`

so how to do it more easier? regex or dom? Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:04:56.330

```
$image = '<img src="" style="border-width: 10px; width: 32px;">';
preg_match('/[^-]width[: ]+([0-9]+)/', $image, $matches);
print_r($matches); 
```

$matches[1] 应该有你的答案，这只有在你只传入 img 字符串时才有效，否则它将获取其他元素宽度。

# ios - MagicalRecord NSFetchesResultsController section grouping and sorting + within section as well

> ID：14461522
> 
> 赞同：2
> 
> 时间：2013-01-22T14:59:31.727
> 
> 标签：ios, core-data, nsfetchedresultscontroller, magicalrecord

I'm using `MagicalRecord` to create an `NSFetchedResultsController` for a table.

I've got `NSManagedObjects` that contain groups of people, here are two examples:

```
ContactGroup *everyoneContactGroup = [ContactGroup findFirstByAttribute:@"groupId" withValue:@"<GROUPID>"];
if (!everyoneContactGroup) {
    everyoneContactGroup = [ContactGroup createEntity];
    [everyoneContactGroup setGroupId:@"<GROUPID>"];
    [everyoneContactGroup setGroupName:@"Everyone"];
    [everyoneContactGroup setGroupSortOrder:@1]; // sort order within section
    [everyoneContactGroup setGroupType:@1];
    [everyoneContactGroup setGroupTypeName:@"Smart Groups"];
    [everyoneContactGroup setGroupTypeSortOrder:@0]; // sort order for groups
}

ContactGroup *closeFriendsContactGroup = [ContactGroup findFirstByAttribute:@"groupId" withValue:@"<GROUPIDCLOSEFRIENDS>"];
if (!closeFriendsContactGroup) {
    closeFriendsContactGroup = [ContactGroup createEntity];
    [closeFriendsContactGroup setGroupId:@"<GROUPIDCLOSEFRIENDS>"];
    [closeFriendsContactGroup setGroupName:@"Close Friends"];
    [closeFriendsContactGroup setGroupSortOrder:@2];
    [closeFriendsContactGroup setGroupType:@2];
    [closeFriendsContactGroup setGroupTypeName:@"Custom Groups"];
    [closeFriendsContactGroup setGroupTypeSortOrder:@10];
}

ContactGroup *familyContactGroup = [ContactGroup findFirstByAttribute:@"groupId" withValue:@"<GROUPIDFAMILY>"];
if (!familyContactGroup) {
    familyContactGroup = [ContactGroup createEntity];
    [familyContactGroup setGroupId:@"<GROUPIDFAMILY>"];
    [familyContactGroup setGroupName:@"Family"];
    [familyContactGroup setGroupSortOrder:@1];
    [familyContactGroup setGroupType:@2];
    [familyContactGroup setGroupTypeName:@"Custom Groups"];
    [familyContactGroup setGroupTypeSortOrder:@10];
} 
```

The above should show up as follows:

![enter image description here](../Images/5f8001b8702dc841077cccedd7edb6ff.png)

As you can see, the contact group "Everyone" should be grouped into a section of its own and should appear as the first group in the order of the groups.

The second and third contact group above should be grouped into a section together and this section should appear below the other section with one group in it. Inside this group ("Custom Groups") each contact group should be sorted by their `groupSortOrder`.

Here's my NSFetchedResultsController code:

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (!fetchedResultsController) {
        fetchedResultsController = [ContactGroup fetchAllSortedBy:@"groupTypeSortOrder,groupSortOrder"
                                                           ascending:YES
                                                       withPredicate:nil
                                                             groupBy:@"groupTypeName"
                                                            delegate:self];
    }
    return fetchedResultsController;
} 
```

I have tried various combinations but cannot get the sort order both for each table view section (group of contact groups) and within each table view section. I know you can add comma-delimited sort attributes, but I just cannot get the combination right. Anyone know if it's possible to achieve what I want with MagicalRecord or do I have to roll some non-MR code .

Thanks in advance for any input and help!

**UPDATE:**

Here's the SQL being generated by Core Data:

```
CoreData: sql: 
SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZGROUPID,  t0.ZGROUPNAME, t0.ZGROUPSORTORDER, 
t0.ZGROUPTYPE, t0.ZGROUPTYPENAME, t0.ZGROUPTYPESORTORDER 
FROM ZTCONTACTGROUP t0 
ORDER BY t0.ZGROUPTYPESORTORDER, t0.ZGROUPSORTORDER 
```

**UPDATE:**

So I have tried with grouping by `groupTypeSortOrder` and it works correctly now. However, not I cannot get the section name to appear correctly as it will appear with the numbers for `groupTypeSortOrder` instead. Any ideas?

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (!fetchedResultsController) {
        fetchedResultsController = [ContactGroup fetchAllSortedBy:@"groupTypeSortOrder,groupSortOrder"
                                                           ascending:YES
                                                       withPredicate:nil
                                                             groupBy:@"groupTypeSortOrder"
                                                            delegate:self];
    }
    return fetchedResultsController;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:51:07.013

我还没有使用过 MagicalRecord，但我假设参数`groupBy:`对应于.`sectionNameKeyPath:``NSFetchedResultsController`

如果键被指定为`sectionNameKeyPath`，则获取请求必须具有使用相同键（或生成相同相对排序的键）的第一个排序描述符。

因此，使用*groupTypeSortOrder*作为第一个排序键并作为`groupBy:`参数是正确的方法。

现在，要将组名而不是数字显示为节标题，您可以修改该`titleForHeaderInSection`方法，该方法通常如下所示：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section { 
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.controller sections] objectAtIndex:section];
    return [sectionInfo name];
} 
```

但是`[sectionInfo name]`是*groupTypeSortOrder*的值，因为它已被指定为`sectionNameKeyPath`（或`groupBy`）。如果您像这样修改方法：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section { 
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.controller sections] objectAtIndex:section];
    return [[[sectionInfo objects] objectAtIndex:0] groupName];
} 
```

*groupName*属性改为显示为节标题。

# android - secActivity 仅有时调用 StartActivityForResult

> ID：14461524
> 
> 赞同：0
> 
> 时间：2013-01-22T14:59:46.870
> 
> 标签：android, android-listview

**从 onClickListener 调用 startActivityForResult 时遇到**一些问题。

在第一个活动中，我有两种开始方式`startActivityForResult`

1.  `ListView`与`OnItemClick()`- 当我从那里打电话`startActivityForResult`时`ListView OnItemClick()`它工作得很好

2.  `Button`与`OnClickListener()`- 但是当我从`Button OnClickListener()`第二个活动中调用 startActivityForResult 时，不会`OnActivityResult`从某种原因开始。这是我的代码：

*更新：感谢您的宝贵时间，您提供的是我已经尝试过的更改之一，但是它与我的新代码保持不变：

第一次使用 StartActivityForResult() 调用（工作正常！ - 在 OnCreate() 内）：

```
listView.setOnItemClickListener(new OnItemClickListener() 
    {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id)
        {
            Intent intent = new Intent(NoteNames.this, EditNote.class);
            intent.putExtra("subject", noteList.get(position).getSubjectText());
            intent.putExtra("body", noteList.get(position).getBodyText());
            startActivityForResult(intent, position);
        }

    }); 
```

第二次调用：不会启动 OnActivityResult()：

```
@Override
public void onClick(View v) {

    if(v.getId() == addButton.getId()){
        Intent intent = new Intent(NoteNames.this, EditNote.class);
        intent.putExtra("subject", "");
        intent.putExtra("body", "");
        startActivityForResult(intent, idOfNew);
    }

} 
```

这是第二个活动：

```
private EditText subjectEditText, bodyEditText;
private Button approve, decline;

@Override
protected void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.activity_edit_note);

    subjectEditText = (EditText) findViewById(R.id.note_head);
    bodyEditText = (EditText) findViewById(R.id.note_text);
    approve = (Button) findViewById(R.id.approve_button);
    decline = (Button) findViewById(R.id.decline_button);

    Intent intent = getIntent();
    String subject = intent.getExtras().getString("subject");
    String body = intent.getExtras().getString("body");

    subjectEditText.setText(subject);
    bodyEditText.setText(body);

    Handler handler = new Handler();
    approve.setOnClickListener(handler);
    decline.setOnClickListener(handler);

    super.onCreate(savedInstanceState);
}

class Handler implements OnClickListener{

    @Override
    public void onClick(View v) {

         if (v.getId()==approve.getId()){
             Intent intent = getIntent();
             intent.putExtra("subject", String.valueOf(subjectEditText.getText()));
             intent.putExtra("body", String.valueOf(bodyEditText.getText()));
             setResult(RESULT_OK, intent);
             finish();
         }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:13:33.347

**EDIT:** Before you edited your question, in your code was written `final int idOfNew=-5` . Well, if the `requestCode<0` then the `onActivityResult` is **not** triggered. Use a request code `>0` (maybe the id of the button), this should solve your problem. Everything else in your code is just fine.

# facebook-graph-api - API 提供的照片太多

> ID：14461525
> 
> 赞同：0
> 
> 时间：2013-01-22T14:59:50.877
> 
> 标签：facebook-graph-api, photos

SELECT object_id, src_big FROM photo WHERE album_object_id IN (SELECT object_id FROM album WHERE owner=)

我使用此查询来获取某个用户的照片，该用户是其他用户的朋友，它为我的应用程序提供了friend_photos 权限。我得到了很多照片。现在，当我在 Facebook 中打开此个人资料（我不是该用户的朋友）时，我看不到大部分照片（可能它们仅供朋友使用）。

问题是：如何使用 API 过滤此类非公开照片？我不需要任何公众看不到的东西......

有相册可见性字段，但仅对相册所有者可用。

# c# - 无法在 WCF 服务中加载相关实体

> ID：14461526
> 
> 赞同：2
> 
> 时间：2013-01-22T14:59:51.440
> 
> 标签：c#, wcf, entity-framework

我正在使用实体框架 4.1。我需要创建一个需要从现有数据库中获取的 WCF 服务。我正在使用 wsHttp 绑定。我使用了支持 WCF 的 DbContext 生成器。以下是已生成的两个类：

```
[DataContract(IsReference = true)]
[KnownType(typeof(TestSummary))]
public partial class Test
{
    [DataMember]
    public int Id { get; private set; }

    [DataMember]
    public virtual TestSummary TestSummary { get; set; }
} 
```

和，

```
[DataContract(IsReference = true)]
[KnownType(typeof(Test))]
public partial class TestSummary
{
    [DataMember]
    public int Id { get; private set; }
    [DataMember]
    public string Summary { get; set; }

    [DataMember]
    public virtual Test Test { get; set; }
} 
```

当我获取所有 Test 对象时，我没有得到与之相关的 TestSummary。我所有其他实体也是如此。用于获取测试实体的代码：

```
List<Test> tests = new List<Test>();
using (TestModelContainer context = new TestModelContainer())
{
    var query = (from t in context.Tests select t);

    foreach (var t in query)
    {
        Test test = (Test)t;
        tests.Add(test);
    }
} 
```

但是，当我使用不支持 WCF 的 DbContext 生成器生成类时，也会加载所有相关实体（我使用控制台应用程序对其进行了测试）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:02:36.093

in your query, you are not fetching related `TestSummary` entities. You need to declare explicitly that you want to fetch related TestSummaries with adding an `Include` statement to your query.

```
var query = (from t in context.Tests.Include("TestSummary") select t); 
```

Also, there is no need to create `List<Test> tests`; you may just return what you have fetched from the query;

```
using (TestModelContainer context = new TestModelContainer())
{
    var query = (from t in context.Tests select t);
    return query.ToList();
} 
```

# macos - NSEvent 和魔术鼠标

> ID：14461529
> 
> 赞同：3
> 
> 时间：2013-01-22T14:59:56.733
> 
> 标签：macos, osx-lion, mouse, trackpad

如何区分事件`-(void)scrollWheel:(NSEvent *)event`是由妙控鼠标还是触控板触发的？

我问这个问题的原因是因为我想在使用触控板时为滚动事件分配不同的操作，因为用户可以捏合以缩放触控板。然而，在魔术鼠标上，用户不能轻松捏合，所以我想使用滚动功能来代替捏合。

我可以使用这条线区分普通鼠标和魔术鼠标：

```
if (([event momentumPhase] != NSEventPhaseNone) || [event phase] != NSEventPhaseNone) 
```

但是，触控板和魔术鼠标都通过了此测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-10T00:15:18.073

我能够区分鼠标上的滚轮（不是魔术鼠标，但我怀疑它仍然可以工作）和使用 NSEvent 子类型的触控板：

```
enum {
   NSMouseEventSubtype           = NX_SUBTYPE_DEFAULT,
   NSTabletPointEventSubtype     = NX_SUBTYPE_TABLET_POINT,
   NSTabletProximityEventSubtype = NX_SUBTYPE_TABLET_PROXIMITY
   NSTouchEventSubtype             = NX_SUBTYPE_MOUSE_TOUCH
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-19T14:11:00.390

您应该处理`scrollWheel`Magic Mouse 并`NSMagnificationGestureRecognizer`在触控板上添加捏合手势。两者不冲突，但触控板上的滑动滚动会触发`scrollWheel`。

# postgresql - Postgres：如何在复制数组之前将数组分隔符更改为“，”和触发器以外的内容？

> ID：14461530
> 
> 赞同：-1
> 
> 时间：2013-01-22T15:00:02.337
> 
> 标签：postgresql, postgresql-9.1

我正在建立一个化学名称数据库。我的主表包含两个属性，如下所示：

```
 CREATE TABLE chemicals 
         (
             chemical id            int PRIMARY KEY,
             names                  varchar(200)[]
         ); 
```

然后在表格中填充 COPY

```
 COPY chemicals FROM chemicals_file delimiters E'\t'; 
```

我已经像这样格式化了chemicals_file：

```
 chemical_id     { name1  name2 name3 }
         ...................................... 
```

如您所知，化学名称（IUPAC 名称）在内部包含字符“，”，因此我不能将其用作名称数组的分隔符。我无法在在线文档中找到为数组指定另一个分隔符的任何方法。请你帮助我好吗？

我在这里可以选择另一种选择，因为原始化学品文件的每个名称都有一个条目，例如：

```
 chemical_id_1    name1
         chemical_id_1    name2
         .......................
         chemical_id_6    name3
         ....................... 
```

将是在复制之前创建一个触发器（可以这样做吗？），这样如果表中的化学 ID 退出，则名称将添加到现有的名称数组中，而不是创建一个全新的行，但我不知道如何这些可以指定。

我已经在插入或更新之前创建了一个触发器，但它似乎不适用于 COPY

非常感谢您的帮助 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:26:26.633

试试这样的文本格式：

```
chemical_id_1   { "one,two,three", "four", "five,six" }
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:44:44.483

主要是你想要一个多值列，但那是邪恶的。我会用这个：

```
chemical(id, name)
chemical_name(id, chemical_id, name) 
```

在化学中，您可以在 JOIN 中使用方便的首选名称

# c++ - 用自己的继承类初始化 vtkSmartPointer

> ID：14461534
> 
> 赞同：1
> 
> 时间：2013-01-22T15:00:08.883
> 
> 标签：c++, constructor, smart-pointers, vtk

我从 vtk 类继承了一个类。该类的构造函数需要传递两个参数。我必须如何使用 New() 运算符？

谢谢

这是一个例子：

```
class MyClass:vtkClass
{
MyClass(argument1, argument2);

static MyClass* New()
} 
```

和初始化

```
vtkSmartPointer<MyClass> class = vtkSmartPointer<MyClass(??)> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:46:01.903

我相信以下邮件列表发布意味着您无法使用 0 参数绕过对构造函数的要求：

[http://www.vtk.org/pipermail/vtkusers/2012-July/124922.html](http://www.vtk.org/pipermail/vtkusers/2012-July/124922.html)

因此，您必须使您的类的构造函数采用 0 个参数。然后像这样初始化：

```
vtkSmartPointer<MyClass> class = vtkSmartPointer<MyClass>::New(); 
```

Myclass::New() 的实现应该使用 vtkStandardNewMacro 或者您可以将其实现为

```
MyClass *
MyClass::New()
{
    return new MyClass();
} 
```

在您拥有类实例之后，使用 Initialize(argument1,argument2) 函数来初始化您的类变量，而不是在构造函数中。

# blogengine.net - how to modify subscription page in blogengine.Net

> ID：14461536
> 
> 赞同：0
> 
> 时间：2013-01-22T15:00:12.487
> 
> 标签：blogengine.net

How can I modify subscription page (RSS Feed) in blogengine.Net

I want to add website header & footer in subscription page

How can I do that ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T17:26:43.703

RSS 提要是必须符合架构的 XML 文档，您不能在其中添加 HTML 页眉/页脚。大多数你能做的就是[指定你自己的 CSS 样式](https://stackoverflow.com/questions/118685/how-can-i-apply-my-css-stylesheet-to-an-rss-feed)，但即使是 RSS 阅读器也可以忽略它。

# android - 点击 Google 地图链接后无法返回

> ID：14461541
> 
> 赞同：1
> 
> 时间：2013-01-22T15:00:49.733
> 
> 标签：android, google-maps, cordova

在我的应用程序中，用 Cordova 编码，有如下链接：

```
<a href="http://maps.google.com/maps?q=London,+GB">Show map for London</a> 
```

单击它们时，Google 地图会打开并显示正确的地址。问题是我无法通过点击后退按钮返回我的应用程序。

我认为这是因为我正在覆盖`backbutton`事件侦听器。事实上，如果我注释掉以下行：

```
document.addEventListener("backbutton", historyBack, true); 
```

一切正常。问题是我显然想`historyBack()`在按下后退按钮时调用我的自定义函数。即使该`historyBack()`功能仅包含`alert("test");`它也不会在查看地图时按后退按钮触发。

这个问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:58:47.267

在 Android 上，将地址更改为：

```
<a href="geo:0,0?q=London,+GB" target="_blank">Show map for London</a> 
```

这将打开实际的 Google 地图应用程序（或您选择的任何其他应用程序），而不是在您的应用程序中显示地图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T15:22:08.540

在覆盖后退按钮的代码中，添加 super.onBackPressed();

# pdf - I need to create a pdf and write into it from a list using c# but not use any third party document nor ITextSharp.Just plain and simple C# code

> ID：14461544
> 
> 赞同：-3
> 
> 时间：2013-01-22T15:00:56.197
> 
> 标签：pdf

I need to create an excel file and write into it from a list of objects and convert the excel into a pdf using c# but not use any third party document nor ITextSharp. Just plain and simple C# code. No other components.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:49:17.780

你不想这样做。原因如下：PDF 是一种重要的文件格式。是的，您可以坐下来了解规范并提出理解，让我们假设您和我一样高效和聪明的工程师（我以 PDF 工具为生，并在 Acrobat 上工作）。您至少需要两到**三个月**的全职工作才能拥有以可靠和可维护的方式创建相当丰富的 PDF 的基础设施。假设你不像我那样优秀的工程师。创建生成 PDF 的工具可能需要**同样的三个月时间**，而且这些工具将难以维护，难以扩展以满足未来的需求，并且可能会生成不正确的 PDF，而 Acrobat 和我的工具预计会在有意义的方式。

也许您的项目已经规定“没有第三方组件”。如果是这样，您可能想解释您的时间成本（以及未来的时间）以及为什么拥有第三方库并不是那么糟糕。我现在可以告诉您，[我构建的工具](http://www.atalasoft.com/products/dotpdf)并不便宜，直到您考虑到从下载到生成的 PDF 文档所需的时间将在几个小时到几天之间，具体取决于如何您的需求很复杂，您无需了解 PDF 规范。

但是，如果您选择走这条路，请务必从 Adob​​e 下载 PDF 规范，并确保您阅读了有关文档信息字典的第 14.3.3 节，并确保在您生成的每个文档中填写 Producer 部分，因为每当我发现严重不符合规范的 PDF 文件时，我首先要找出是谁负责，我会记下并承诺大声诅咒并质疑您的出身（公平 - 如果您使用我们的工具并发现我的代码生成了错误的 PDF，您也可以这样做，我邀请您联系我们的支持热线，以便我们改正）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:03:39.997

There is an open source library called [PDF Sharp](http://www.pdfsharp.com/PDFsharp/)

About the excel file, just use an open source file format for it.

# android - How to create a while(true) in a AsyncTask whithout blocking the Activity?

> ID：14461548
> 
> 赞同：5
> 
> 时间：2013-01-22T15:01:12.447
> 
> 标签：android, android-asynctask, android-activity

I have created an `AsyncTask` and I have to create an `while(true)` on my `AsyncTask`.

How can I execute such an unbounded loop upon handling a button click in my Activity class without blocking?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-27T14:23:46.097

其他人如何说没有中断条件的无限循环并不是一个好的用户体验。首先为您的 AsyncTask 获取一个实例：

```
 PostTask pt = new PostTask(this);
 pt.execute(); 
```

在你的试试这个`doInBackground()`：

```
while(!this.isCancelled()){
    // doyourjobhere

} 
```

如果应用程序被用户关闭，则 AsyncTask 必须在您的`onPause()`.

```
@Override
public void onPause(){
    pt.cancel(false);  
} 
```

[AsyncTask.cancel(boolean)](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)设置`isCancelled()`为`true`，调用该方法`AsyncTask.onCanceled()`而不是`onPostExecute()`并且可以为您自己的目的被覆盖。

如果您不喜欢这样，请将您的任务放在服务中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:25:15.000

正如其他人所说，您应该将“无限循环”放在 AsyncTask 的 doInBackground() 方法中。但是，这个循环并不是无限的，因为它必须在您存在活动或应用程序时结束。我建议将您更改`while (true) { }`为`while (! mustStop) { }`并将布尔 mustStop 设置为您的活动的实例变量。因此，您可以通过设置完全停止该过程`mustStop=true`（最好在 onPause 方法中设置它）。

所以这将是：

```
public class AsyncBigCalculActivity extends Activity {

private boolean mustStop = false;

@Override
public void onPause() {
    super.onPause();
    mustStop=true; // Stop the infinite loop
}

....

@Override
 protected String doInBackground(String... params) {
    mustStop=false;
    while (!mustStop) {
         ...
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:15:36.750

您可以将循环放在`doInBackground()`AsyncTask 的方法中。作为建议，您可以将 AsyncTask 添加为 Activity 中的内部类。这样您就可以轻松访问在 Activity 中声明的变量。尽管 android 文档建议仅将 AsyncTask 用于短任务。更明智的做法是创建一个可运行对象并将您`while loop`的`run()`方法放入方法中并使用执行它`ExecutorService`，这允许您以线程安全的方式在 android 中运行异步代码。

[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

[http://developer.android.com/reference/java/util/concurrent/ExecutorService.html](http://developer.android.com/reference/java/util/concurrent/ExecutorService.html)

# mysql - Data truncation: Incorrect date value:

> ID：14461550
> 
> 赞同：1
> 
> 时间：2013-01-22T15:01:18.783
> 
> 标签：mysql

```
 INSERT INTO INSTRUCTORBOOKING (INSTRUCTORID, TIMESLOT, STATUS, DATE)
 VALUES('', '8.00 - 9.00', 'Free', 'Sun Jan 08 00:00:00 CST 2012') 
```

Basically when I run it it gives me this error:

```
 com.mysql.jdbc.MysqlDataTruncation: Data truncation: Incorrect date 
 value: 'Sun Jan 08 00:00:00 CST 2012' for column 'Date' at row 1 
```

the Date column is of type Date. The Value for date also came from one of my previous questions, but its a Date object. Appreciate the help so far!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:39:37.410

尝试这个：

```
INSERT INTO INSTRUCTORBOOKING (INSTRUCTORID, TIMESLOT, STATUS, DATE)
 VALUES('', '8.00 - 9.00', 'Free', '2012-01-08 00:00:00') 
```

# ruby-on-rails-3 - Active_admin: ArgumentError in Admin/events#index

> ID：14461554
> 
> 赞同：1
> 
> 时间：2013-01-22T15:01:26.187
> 
> 标签：ruby-on-rails-3, activeadmin

I've just installed active_admin and created the first resource - videos - perfectly find. Everything worked like a charm.

But now that I'm trying to add 'users' and 'events' it is failing with the same message when I navigate to them in the menu.

Here is what it says:

```
 ArgumentError in Admin/events#index

    Showing /Users/markwalker/.rvm/gems/ruby-1.9.3-p327/gems/activeadmin-0.5.1/app/views/active_admin/resource/index.html.arb where line #1 raised:

    wrong number of arguments (3 for 1)
    Extracted source (around line #1):

    1: insert_tag renderer_for(:index)
    Rails.root: /Users/markwalker/Xavy2

    Application Trace | Framework Trace | Full Trace
    app/helpers/application_helper.rb:3:in `select_tag'
    Request

`Parameters`:

    {"order"=>"id_desc"} 
```

Has anyone experience this before, or have an idea about what might be causing it?

Let me know if I need to add more code to make sense of the problem.

Thanks in advance for any help...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:58:48.810

Couple observations, jfdimark

Shouldn't `{"order"=>"id_desc"}` be `{"order"=>"id desc"}` (no underscore)?

Apart from that, it's hard to diagnose without seeing the Full Trace. A similar problem with `ArgumentError in Admin/dashboard#index` brought me to your question in the first place, but simply looking at my Full Trace I saw:

`RedCloth (4.2.9) lib/redcloth/erb_extension.rb:16:in`textilize'`

as the first line. I actually wasn't using RedCloth in this project, so I took it out of my Gemfile and all's good.

# javascript - In netsuite how to write a curl script for selected records that does not exists in saved search.?

> ID：14461566
> 
> 赞同：1
> 
> 时间：2013-01-22T15:02:01.060
> 
> 标签：javascript, curl, netsuite

In this problem i need a curl script where i can check all my records by email id's of customer,So for this stuff i have text file source from where i can see customer email id's and then implement in script

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:33:24.253

需要更多关于您想要达到的目标的详细信息。

您可以通过 Netsuite 的 RESTLET API 最接近地实现这一点。先决条件是了解 REST 的工作原理和套件脚本 API。

# javascript - 单击父类别复选框时选择所有子类别复选框

> ID：14461568
> 
> 赞同：0
> 
> 时间：2013-01-22T15:02:17.033
> 
> 标签：javascript, html

Hii 我有一个 HTML 页面，它显示类别及其相关的子类别，每个类别旁边都有一个复选框。我的清单看起来有点像这样：-

文件
夹1 --文件夹 2 --文件夹 5 --
文件夹
8

文件夹 3 --文件夹 4 --
文件夹
9

我需要的是在单击父类别时检查所有子类别。（即当Folder1旁边的复选框被选中时，Folder2、Folder5、Folder8应该被选中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:07:21.067

问题实际上是如何找到属于此类子类别的复选框。

为子类别复选框赋予相同的名称（例如`subcat_folder1`）。`onClick`对于类别复选框，请在句柄上放置一个 javascript 函数。当用户单击 folder1 复选框时，找到所有名为 subcat_folder1 ( `getElementsByName('subcat_folder1')`) 的元素并执行您的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:20:16.983

有点模糊的问题，所以这里有几个例子

基于班级，如果选择了任何孩子，则检查父母，如果检查父母，则检查所有孩子。

```
var checkboxHandlerObj = {
    init: function () {
        $('#customerServices input:checkbox[class="parent"]').click(checkboxHandlerObj.parentClicked);
        $('#customerServices input:checkbox[class^="parent-"]').click(checkboxHandlerObj.childClicked)
    },
    parentClicked: function () {
        var parentCheck = this.checked;
        $('#customerServices input:checkbox[class="parent-' + $(this).attr('id') + '"]').each(function () {
            this.checked = parentCheck
        });
    },
    childClicked: function () {
        var temp = $(this).attr('class').split('-');
        var parentId = temp[1];
        $('#' + parentId)[0].checked = $('#customerServices input:checkbox[class="' + $(this).attr('class') + '"]:checked').length !== 0;
    }
}
checkboxHandlerObj.init(); 
```

一个小提琴：http: [//jsfiddle.net/gfDAh/](http://jsfiddle.net/gfDAh/)

这是一个父依赖模型，如果未选中任何子项，则取消选中父项，并且它有一个“选中所有子项”框

```
$('#jobTypesMaster').click(function() {
    var iam = this.checked;
    $('.billdetail').each(function() {
        this.checked = iam;
    });
    if (!iam) {
        $('.billfinal:checkbox')[0].checked = iam;
    };
    $('.billfinal').attr('disabled', !this.checked);
    if (!iam) {
        $('.billspaid:checkbox')[0].checked = this.checked;
    };
    $('.billspaid').attr('disabled', $('.billfinal').checked);
});
$('.billdetail').click(function() {
    if ($('.billdetail:checked').length < $('.billdetail:checkbox').length) {
        $('.billfinal:checkbox')[0].checked = false;
        $('.billspaid:checkbox')[0].checked = false;
        $('.billfinal').attr('disabled', true);
        $('.billspaid').attr('disabled', true);
        $('#jobTypesMaster')[0].checked = false;
    }
    else {
        $('.billfinal').attr('disabled', false);
    };
});
$('.billfinal').click(function() {
    $('.billspaid:checkbox').attr('disabled', !this.checked);
    if (!this.checked) {
        $('.billspaid')[0].checked = false;
    };
});
$('.billdetail').trigger('click'); //set value based on initial checked count 
```

小提琴：http: [//jsfiddle.net/h682v/3/](http://jsfiddle.net/h682v/3/)

# ios - 如何从 Web 服务返回应用程序

> ID：14461570
> 
> 赞同：1
> 
> 时间：2013-01-22T15:02:20.343
> 
> 标签：ios, json, cordova

编辑：

我有一个 Web 服务（用 PHP 编写）来检索数据并使用 JSON 返回信息，但是我不确定如何将此 Web 服务与我的 PhoneGap 应用程序集成。我该怎么做呢？

* * *

原始问题：

我有一个基本应用程序，它使用 Web 服务来检索数据并使用 JSON 显示信息，但是我不确定如何返回应用程序。

它正在使用 PhoneGap 在 Dreamweaver 中进行编码。

有一个单一输入的表单，用户选择“搜索”并使用 Web 服务显示信息。

但是我无法弄清楚如何“返回”到应用程序，因为加载的页面现在位于不同的服务器上。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:38:17.187

您应该使用[JQuery AJAX 请求](http://api.jquery.com/jQuery.ajax/)。这是一个简单的例子：

```
$.ajax({
  type: "POST",
  url: "your-web-service-url-here.php",

  //Optional data to send to the service.
  data: { name: "John", location: "Boston" } 

}).done(function( msg ) {

  //This is the JSON message received from the service.
  alert( "Data Saved: " + msg ); 

}); 
```

希望这可以帮助。

# php - Finding a few different matches using regex

> ID：14461571
> 
> 赞同：0
> 
> 时间：2013-01-22T15:02:20.713
> 
> 标签：php, regex

I'm trying to check for

1.  `'@username'`
2.  `'@username,'`
3.  `'@username '`
4.  `'@username.'`
5.  `'@username. '`
6.  `'@username:'`
7.  `'@username: '`

I currently have this:

```
$post->message = preg_replace(
    '/@ *('.preg_quote($speak['username'], '/').') *:/i',
    '[url=\''.PAGE_URL.RELATIVE_WBB_DIR.'/index.php?page=User&userID='.$speak['toID'].'\']@'.$speak['username'].':[/url]',
    $post->message); 
```

Does anyone have any ideas how I can modify this to accept those inputs?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:10:15.647

修改您的正则表达式以添加标点符号：

```
$post->message = preg_replace(
    '/@ *('.preg_quote($speak['username'], '/').')[:,.]? */i',
    '[url=\''.PAGE_URL.RELATIVE_WBB_DIR.'/index.php?page=User&userID='.$speak['toID'].'\']@'.$speak['username'].':[/url]',
    $post->message); 
```

注意添加的部分：

```
/@ *('.preg_quote($speak['username'], '/').')[:,.]? */i
                                             ^^^^^^ 
```

可以选择匹配其中一个字符（冒号、逗号、句点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:34:45.650

这是一个应该实现您正在寻找的正则表达式：

```
/^@[a-zA-Z]+[:\.\,]?[ ]?$/

/^@         // string starts with '@'
[a-zA-Z]+   // contains any letter at least once
[:\.\,]?    // may contain any : , . zero or one time
[ ]?$       // may contain a whitespace zero or one time at end of string 
```

# apache - 如何修复 java IOException：在类路径中找不到资源“solrconfig.xml”？

> ID：14461573
> 
> 赞同：0
> 
> 时间：2013-01-22T15:02:21.957
> 
> 标签：apache, tomcat, solr, lucene

我试图用 apache Tomcat 安装 Apache Solr 4.0.0，但它给出了这样的错误：

> SolrCore 初始化失败 collection1: java.io.IOException:java.io.IOException: Can't find resource 'solrconfig.xml' in classpath or 'solr\collection1\conf/', cwd=C:\apps\tomcat-solr\ apache-tomcat-7.0.35\bin

没有运行 SolrCore。目前使用 Solr Admin UI 至少需要一个 SolrCore。

在此之后，我安装了 apache solr 3.6.2，它运行良好。我仍然无法理解为什么我不能使用具有相同服务器配置的 solr 4.0.0。

我希望你能告诉我我犯的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:58:40.977

Solr 4.0 中更改了目录结构。查看 example/solr 目录中的那个。您将看到 Solr 4 现在在其中包含**collection1**目录，而 conf 目录现在在其中低一级。这基本上就是错误消息所说的。

如果您不喜欢这样，我认为您可以通过将具有单核定义的 solr.xml 放入其中并按照您喜欢的方式设置目录路径来更改它。

# google-docs - Google Drive SDK docid changed - How to relate documents stored by old docid to the new one?

> ID：14461575
> 
> 赞同：1
> 
> 时间：2013-01-22T15:02:28.923
> 
> 标签：google-docs, google-docs-api, google-apps, google-drive-api

It appear that the docid's changed for all google drive documents on our google apps domain...

*   **Will it change again?**
*   **Why was it changed?** (my google/yahoo/bing searches on this subject turn up nothing useful - is no one else experiencing this? For me it seems to have happened at around Jan 16/17th)

And most importantly for now:

*   **Is there a way to cross-reference all of the old docid's to the corresponding new docid's?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:46:30.720

发现了更多信息。根本原因是从旧的演示文稿编辑器迁移到新的。新编辑器已经默认使用了一段时间，但要完成所有需要转换的旧演示文稿的切换。由于各种技术原因，如果不为每个演示文稿创建新的文件条目，就不可能做到这一点。这在大约 6 个月前发生过一次，当时对文件做了同样的事情。

可以通过检查更改提要重新映射 ID。删除和创建将显示为单独的事件，但如果您查找删除后创建具有相同标题的文件，您可以构建文件 ID 的映射。并非*完全*万无一失，但它是一次性操作。

所以事实证明，ID 并不像人们想象的那样不可变......

# java - 当 web 应用程序位于 webapps 的子目录中时，Jetty 不会路由到 servlet

> ID：14461580
> 
> 赞同：1
> 
> 时间：2013-01-22T15:02:53.553
> 
> 标签：java, servlets, jetty, url-routing, directory-structure

当我将应用程序文件夹放在 {JETTY_HOME}/webapps 目录中时，我有一个运行正常的 Web 应用程序（称为 servlet）。

如果我将 Web 应用程序的副本放在 webapps 的子文件夹中，那么当我浏览到该站点时会调用所有静态文件，但我通过 ajax 调用的 servlet 返回 404。

```
http://localhost/shlaa 
```

*   正确调用 /shlaa/CommentController.do 没有错误。

```
http://localhost/mapapp/shlaa
```

*   为 ajax 调用 /mapapp/shlaa/CommentController.do 返回 404

    两个路径 /WEB_INF 文件夹中的 web.xml 包含以下内容

    ```
    <servlet>
        <servlet-name>CommentController</servlet-name>
        <servlet-class>web.CommentController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>CommentController</servlet-name>
        <url-pattern>/CommentController.do</url-pattern>
    </servlet-mapping> 
    ```

    {JETTY_HOME}/etc 中的 jetty.xml 文件夹包含以下内容：

    ```
     <Call class="org.mortbay.jetty.webapp.WebAppContext" name="addWebApplications">
          <Arg><Ref id="contexts"/></Arg>
            <Arg><SystemProperty name="jetty.home" default="."/>/webapps</Arg>
          <Arg><SystemProperty name="jetty.home" default="."/>/etc/webdefault.xml</Arg>
          <Arg type="boolean">True</Arg>  <!-- extract -->
          <Arg type="boolean">True</Arg> <!-- parent priority class loading -->
      </Call> 
    ```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T00:29:04.813

为了正确地将 Java Web 应用程序部署到某个应用程序服务器或只是简单的 Web 容器（如您的情况），Web 应用程序（也称为**web 模块**）**必须具有特定的结构**。Web 模块的顶级目录是应用程序**的文档根目录**。

这是一个Web模块结构：

![在此处输入图像描述](../Images/e3d71ca837e6701ae3218eaf8fb08569.png)

现在，您`<url-pattern>`在*web.xml*文件中定义的只是某些 servlet 的**逻辑/虚拟**路径。同样，它**不是**servlet 类的物理位置的真实路径，而是逻辑路径 - 您可以根据需要进行构建。

好的，现在您必须将具有正确结构的 webapp 放在**webapps**目录中。例如，在上图中，*Assembly Root*象征着您的 webapp 文件夹。因此，您可以直接使用该文件夹，也可以制作一个 WAR（Web 应用程序存档）并将其放在`webapps`目录下。并不是说在*webapps*中有一些目录，而在那个目录中有几个 webapps。所有 Web 应用程序都必须位于 webapps 目录下。

因此，在您的情况下，如果您的 webapp 文件夹的名称为**shlaa**，则必须将该文件夹放在`webapp`. 时期。

现在引用官方 Java EE 文档：

> **将 URL 映射到 Web 组件**
> 
> 当它接收到一个请求时，Web 容器必须确定哪个 Web 组件应该处理该请求。Web 容器通过将请求中包含的 URL 路径映射到 Web 应用程序和 Web 组件来实现这一点。URL 路径包含上下文根和可选的别名：
> 
> `http://host:port/context-root/alias`
> 
> **设置组件别名**
> 
> *别名*标识应处理请求的 Web 组件。别名路径必须以正斜杠 (/) 开头，并以字符串或带有扩展名的通配符表达式结尾（例如，*.jsp）。由于 Web 容器会自动映射以 *.jsp 结尾的别名，因此您不必为 JSP 页面指定别名，除非您希望通过文件名以外的名称来引用该页面。

在您的情况下，您的 webapp 的 URL 将是 `http://localhost:8080/shlaa`

现在引用 Jetty wiki 文档（[Jetty/Howto/SetContextPathto](http://wiki.eclipse.org/Jetty/Howto/SetContextPathto_/)）：

> ## 使用 WebAppProvider
> 
> **WebAppProvider 的作用是在 ${jetty.home}/webapps/ 目录中查找任何可部署的应用程序（例如 *.war），并将它们部署到与 filename 同名的上下文中**。例如，WebAppProvider 将 ${jetty.home}/webapps/MyApp-2.4.war 部署到上下文 /MyApp-2.4 中。还有一个特殊的 root.war 保留字部署到上下文 / 中。虽然这是最简单的部署机制，但它牺牲了对部署细节的控制。

长话短说**，只需将您的网络应用程序放在*webapps*目录**下即可使一切正常。至于`<url-pattern>`- 随意定义你喜欢的任何模式。

注意：实际上配置 Jetty 有几种方法，即 XML 配置不是唯一的一种。有关详细信息，请参阅[**配置 Jetty**](http://wiki.eclipse.org/Jetty/Howto/Configure_Jetty#Configuring_Jetty)。

引自[The Java™ Servlet SpecificationVersion 3.0](http://download.oracle.com/otn-pub/jcp/servlet-3.0-mrel-eval-oth-JSpec/servlet-3_0-mrel-spec.pdf?AuthParam=1359158683_648d7620a6cf3fcb359c495ba88a1877)：

> ### 第十二章
> 
> ## 将请求映射到 Servlet
> 
> ### 12.1 URL 路径的使用
> 
> 收到客户端请求后，Web 容器确定将其转发到的 Web 应用程序。所选的 Web 应用程序必须具有与请求 URL 的开头匹配的最长上下文路径。URL 的匹配部分是映射到 servlet 时的上下文路径。Web 容器接下来必须找到 servlet 以使用下面描述的路径映射过程来处理请求。用于映射到 servlet 的路径是来自请求对象的请求 URL 减去上下文路径和路径参数。下面的 URL 路径映射规则按顺序使用。使用第一个成功的匹配，不再尝试匹配：
> 
> 1.  容器将尝试找到请求路径与 servlet 路径的完全匹配。成功的匹配选择 servlet。
>     
>     
> 2.  容器将递归地尝试匹配最长的路径前缀。这是通过使用“/”字符作为路径分隔符一次将路径树下移一个目录来完成的。最长的匹配决定了选择的 servlet。
>     
>     
> 3.  如果 URL 路径中的最后一段包含扩展名（例如 .jsp），则 servlet 容器将尝试匹配处理扩展名请求的 servlet。扩展名被定义为最后一个'.'之后的最后一段的一部分。特点。
>     
>     
> 4.  如果前三个规则都没有导致 servlet 匹配，则容器将尝试提供适合所请求资源的内容。如果为应用程序定义了一个“默认”servlet，它将被使用。许多容器为服务内容提供了一个隐式的默认 servlet。容器必须使用区分大小写的字符串比较进行匹配。
>     
>     
> 
> ### 12.2 映射规范
> 
> 在 Web 应用程序部署描述符中，使用以下语法来定义映射：
> 
> *   以“/”字符开头并以“/*”后缀结尾的字符串用于路径映射。
>     
>     
> *   以“*”开头的字符串。前缀用作扩展映射。
>     
>     
> *   空字符串 ("") 是一种特殊的 URL 模式，它精确地映射到应用程序的上下文根，即表单的请求`http://host:port/<contextroot>/`。在这种情况下，路径信息是“/”，servlet 路径和上下文路径是空字符串（“”）。
>     
>     
> *   仅包含“/”字符的字符串表示应用程序的“默认”servlet。在这种情况下，servlet 路径是请求 URI 减去上下文路径，并且路径信息为空。
>     
>     
> *   所有其他字符串仅用于完全匹配。

* * *

用你的名字举例。

您的 webapp 名称是**mapapp**（它是应用程序的根目录）。您希望您的*CommentController.do*可以通过

```
http://localhost:8080/mapapp/shlaa/CommentController.do 
```

然后（如果满足所有其他要求，如目录结构等）在您的*web.xml*中放置以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                        http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">

    <servlet>
        <servlet-name>Comment Controller</servlet-name>
        <servlet-class>com.example.CommentController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Comment Controller</servlet-name>
        <url-pattern>/shlaa/CommentController.do</url-pattern>
    </servlet-mapping>

</web-app> 
```

`/`上述*url 模式*中的第一个正斜杠 ( )表示**上下文根**/**上下文路径**（在本例中为*mapapp*）。
这样它就会起作用。

* * *

这里有一些有用的链接。

**Java EE 5 教程**：

*   [网络模块](http://docs.oracle.com/javaee/5/tutorial/doc/bnadx.html)
*   [配置 Web 应用程序](http://docs.oracle.com/javaee/5/tutorial/doc/bnaeo.html)

**Java EE 6 教程**：

*   [网络模块](http://docs.oracle.com/javaee/6/tutorial/doc/bnadx.html)
*   [配置 Web 应用程序](http://docs.oracle.com/javaee/6/tutorial/doc/bnaeo.html)

**码头**

*   [部署 Web 应用程序](http://wiki.eclipse.org/Jetty/Howto/Deploy_Web_Applications)
*   [码头文档维基](http://wiki.eclipse.org/Jetty)

希望这会帮助你。

* * *

# 更新

对于 Jetty 特定配置，请参阅此链接：
[如何让 Web 应用程序仅在特定端口上响应](http://wiki.eclipse.org/Jetty/Howto/WebappPerConnector)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:07:23.863

这就是我认为正在发生的事情。

仅在 webapps 根目录和 webapps/mapapp 中克隆您的应用程序**shlaa**不会将您的 servlet 克隆到新位置。

静态内容有效，因为这些文件**实际上**存在于该位置，Jetty 将在正确的位置为它们提供服务

对于 servlet，服务器将只识别一个位置，即 shlaa/web/WEB-INF/classes 中的位置（因为您克隆了您的应用程序，我假设您的克隆将类似于 shla/mapapp/web/WEB-INF/classes）

你所要做的就是修改你的 web.xml 以便 shlaa/mapapp**也**被识别

例如：（尝试以下组合）

```
<servlet-mapping>
    <servlet-name>CommentController</servlet-name>
    <url-pattern>/mapapp/CommentController.do</url-pattern>
</servlet-mapping> 
```

# c++ - c++11 lambda 表达式

> ID：14461581
> 
> 赞同：0
> 
> 时间：2013-01-22T15:03:01.060
> 
> 标签：c++, c++11, lambda

今天我正在追赶 c++11（因为我们还没有继续前进）。正如很多人所说，切换的原因之一似乎是 lambda 表达式。我仍然不确定他们如何提供新的东西。

例如使用 c++11：

```
#include <iostream>

int main()
{
    auto func = [] () { std::cout << "Hello world" << std::endl; };

    func();
} 
```

似乎非常类似于：

```
#include <iostream>

#define FUNC( )\
        do { std::cout << "Hello world" << std::endl; } while(0)

int main()
{
    FUNC();
} 
```

lambda 表达式会为我提供什么我目前无法做到的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T15:05:42.630

[http://msdn.microsoft.com/en-us/library/vstudio/dd293608.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd293608.aspx)非常详细地总结了该主题的要点和更多内容。这是重要的摘录：

> lambda 结合了函数指针和函数对象的优点并避免了它们的缺点。与函数对象一样，lambda 是灵活的并且可以维护状态，但与函数对象不同的是，它的紧凑语法不需要类定义。通过使用 lambda，您可以编写比等效函数对象的代码更简单、更不容易出错的代码。

网站上有一些例子显示了更多的差异和比较。

另外......传统的智慧是永远不要在 C++ 中使用宏：

[http://scienceblogs.com/goodmath/2007/12/17/macros-why-theyre-evil/](http://scienceblogs.com/goodmath/2007/12/17/macros-why-theyre-evil/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:12:18.527

与标准算法一起使用时，lambda 的一个不太明显的好处是程序员不需要为 lambda 函数考虑名称，并且[命名事物被认为是编程中的一项艰巨任务](http://martinfowler.com/bliki/TwoHardThings.html)。

此外，通过标准算法执行的代码通常用于在提供的范围内的每个对象上调用成员函数，使用仿函数或函数的名称，通常只是模仿被调用的成员函数的名称，并且没有增加代码的可读性。人为的例子：

```
struct object
{
    void execute() const {}
};

void run_execute(object const& o) { o.execute(); }

std::vector<object> v;

std::for_each(v.begin(), v.end(), run_execute);

std::for_each(v.begin(), v.end(), [](object const& o) { o.execute(); }); 
```

诚然，这是一个小好处，但仍然令人愉快。

# struts - struts项目中的java.lang.NoClassDefFoundError

> ID：14461585
> 
> 赞同：0
> 
> 时间：2013-01-22T15:03:24.827
> 
> 标签：struts, noclassdeffounderror

## 异常：java.lang.NoClassDefFoundError

> 我正在尝试运行一个小型 struts 项目。
> 当所有需要的 jar 都放在 lib 文件夹中时，它工作正常。

以下方法不起作用。

1.  添加罐子
2.  添加外部罐子
3.  用户库
4.  其他项目的 Web 应用程序库`(That project is having jars at lib folder)`

没有编译错误，但`NoClassDefFoundError`在运行时。
有人请让我知道这个问题。我想`User Library`为每个新项目使用而不是在 lib 文件夹中使用 jars。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:09:05.240

所有必需的 jar 都必须与应用程序一起部署；这就是网络应用程序的工作方式。

在某些情况下，可以将库放入应用容器的库中。对于 Struts 库，我不建议这样做。一般来说，我根本不会推荐它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T16:40:13.327

只是它使用了一个在 jars 库中找不到的类的原因，我也不建议像之前所说的那样使用这个协议

# android - Dialog 构造函数中的 ContectWrapper

> ID：14461586
> 
> 赞同：0
> 
> 时间：2013-01-22T15:03:27.063
> 
> 标签：android, android-dialog

我正在浏览一位相当熟练的开发人员的代码，并看到了这个：

```
new AlertDialog.Builder(new ContextThemeWrapper(getActivity(), R.style.Theme_DeviceDefault)); 
```

由于这是针对 API 14 构建应用程序的唯一原因，这让我对这种方法的好处感到困惑。我什么都看不到。我认为当您在活动无效的 Dialog 上调用 .show() 或 .dismiss() 时，它不会帮助防止异常，而且我想不出其他任何东西。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:44:31.483

这是在 API 11 之前为构建器设置对话框主题的方法。具有第二个参数的构造函数仅从 API 11 添加。之前没有其他方法可以为构建器设置主题。[这里是举例说明。](https://stackoverflow.com/questions/2422562/how-to-change-theme-for-alertdialog)

# sql-server - Accessing data on Microsoft SQL Server from a PostgreSQL function

> ID：14461591
> 
> 赞同：0
> 
> 时间：2013-01-22T15:03:32.533
> 
> 标签：sql-server, postgresql, plpgsql, cross-database, plperl

I have an application that uses PostgreSQL but also interacts with a third-party-controlled database on MSSQL. The data are sometimes tied together closely enough that it becomes desirable to do things like:

```
select thing_from_pg, thing_from_ms_crossover_function(thing_from_pg) -- etc 
```

Currently I implement `thing_from_ms_crossover_function` in plperl. Is there a way to do this in plpgsql or something, so that I don't need to start a plperl interpreter for such cases?

Another option is obviously to access both databases from my client app, but that becomes far less convenient than the view syntax above.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:26:47.290

你有两个基本选项，三个基本选项。

第一个是使用`DBI-Link`然后通过您的 pl/pgsql 或 pl/perl 函数访问它。好处`DBI-Link`是它相对较老和成熟。如果它适合你，我会从那里开始。

第二种选择是使用外部数据包装器。

第三种选择是编写一个更通用的框架`pl/perl`，您可以从`pl/pgsql`. 但是，那时您基本上是在考虑重新发明 DBI-Link，所以我认为您最好从 DBI-Link 开始并根据需要对其进行修改。

# requirejs - requirejs execute require module again

> ID：14461598
> 
> 赞同：1
> 
> 时间：2013-01-22T15:03:51.007
> 
> 标签：requirejs

f.e. i have:

```
require( ['module1'], function( module1_callback){
//callback_1 after code is loaded
} ); 
```

and module1.js

```
define( ['module2'], function(module2_callback)
{
    //function_1 to perform something
    return 'something';
}); 
```

i need module1 on demand but i need to run function_1 everytime i requre that module, in this case function_1 in module1 is executed only on first load but i need that routine every time i require module1\. only return callback is executed

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:34:38.910

这不是 requirejs 的工作方式。但是您可以返回一个执行某些操作的函数，然后返回某些内容：

```
define( ['module2'], function(module2_callback) {
  return function() { 
    //to perform something
    return 'something';
  }
}); 
```

并在您的基本模块中：

```
require( ['module1'], function( module1_callback){
   var something = module1_callback();
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-22T19:59:11.607

检索函数会带来更多的复杂性，并且在某些情况下它不适用于主干插件和循环依赖项，特别是在需要从头开始重新初始化页面的某些部分的大型 1page 应用程序上，我最终使用了魔术模块

[https://github.com/jrburke/requirejs/wiki/Differences-between-the-simplified-CommonJS-wrapper-and-standard-AMD-define#wiki-magic](https://github.com/jrburke/requirejs/wiki/Differences-between-the-simplified-CommonJS-wrapper-and-standard-AMD-define#wiki-magic)

和`undef`

```
define( ['module2', 'module'], function(module2_callback) {
     //push module id into global array 
     window.undefArr.push(module);
    //all code here will be executed on every require
}); 
```

和

```
//before require undef modules
//here you can control which modules undef which to leave in memory
//based on module properties like path, name, status etc.
_.each( window.undefArr, function(mod){
   requirejs.undef(mod.id);
});
//init undefArr
undefArr = [];
require( ['module1']); 
```

# javascript - 与 not() 函数相反

> ID：14461599
> 
> 赞同：1
> 
> 时间：2013-01-22T15:03:51.943
> 
> 标签：javascript, jquery

我有一个简单的问题，我有以下几行等于**非活动链接**：

```
$links.not($active).each(function() 
{
     //Do sth...
}); 
```

`.not(...)`JavaScript中的函数的对立面是什么？因为我需要知道活动链接，有什么想法！？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T15:04:35.587

这是 jQuery，而不是 JavaScript。的反义词`.not`是[`.filter`](http://api.jquery.com/filter/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T15:06:42.590

使用`$links.not($active)`创建一个集合，其中的元素来自`$links`除`$active`.

要获取活动链接，只需使用`$active`对象：

```
$active.each(function() 
{
  //Do sth...
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-22T15:04:45.577

您正在寻找`.filter()`，它返回一个仅包含匹配元素的子集。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T15:07:46.417

编程中的反义词`not`通常被命名为`is`

[http://api.jquery.com/is/](http://api.jquery.com/is/)

但是，这将返回布尔值 true 或 false 所以在你的情况下你会想要`filter`

[http://api.jquery.com/filter/](http://api.jquery.com/filter/)

**例子：**

```
$links.filter('.onlyThisClass').each(function() 
{
     //Do sth...
}); 
```

# javascript - 悬停时的工具提示位置

> ID：14461607
> 
> 赞同：0
> 
> 时间：2013-01-22T15:04:21.693
> 
> 标签：javascript, jquery, css

我有简单的图像预览`hover`。

jQuery

```
jQuery('img').hover(
    function(){
        jQuery('body').append('<div id="image_preview"><img src="'+ jQuery(this).attr('src') +'" alt="Image preview" /></div>');
        jQuery('.camera_info img').mousemove(
            function(event){
                jQuery('#image_preview').css('top', (event.pageY - 10) + 'px').css('left', (event.pageX + 30) + 'px').fadeIn('normal');
            }
        );
    },
    function(){
        jQuery('#image_preview').remove();
    }
); 
```

CSS：

```
#image_preview {
    border: 1px solid #CCCCCC;
    display: none;
    padding: 5px;
    position: absolute;
} 
```

问题是，如果图像太靠近浏览器的一侧，它会显示在它之后，如下所示： ![图片](../Images/7dcfc64a524d03bc611a909494633f85.png)

我试图在正确的位置上玩，但没有运气......有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:28:31.170

这是我用来将元素的顶部和底部保持在浏览器的可视区域内的东西——在我的例子中，我不必担心处理元素的左/右坐标，但是可以调整下面的代码来处理那也是。

该函数将 HTMLElement 作为参数，即 or 的返回值，`$('#someid').get(0)`并`document.getElementById('someid')` 始终使用 jQuery。

```
function moveIntoView (elem)
{
    var w$ = $(window),
      elem$ = $(elem),
      docViewTop = w$.scrollTop(),
      docViewBottom = docViewTop + w$.height(),
      elTop = elem$.offset().top,
      elBottom = elTop + elem$.height();
    //  element top is lower than top of document in view
    //  and element bottom is higher than bottom of document in view, so nothing to do
    if( ((docViewTop <= elTop) && (docViewBottom >= elBottom)))
       return;

    elem$.css("top", parseInt(elem$.css("top")) - (elBottom - docViewBottom));
} 
```

# javascript - 如何阻止/关闭点击操作 1 秒

> ID：14461612
> 
> 赞同：0
> 
> 时间：2013-01-22T15:04:42.327
> 
> 标签：javascript, jquery, click, preventdefault

我有一些问题，我需要阻止/关闭一些点击操作一段时间。我想要做的是在点击后触发所有操作，但在处理此操作时阻止此点击。所以这是我的代码，谢谢帮助：

```
carousel_controls_buttons.live('click', function(e){
    carousel_controls_buttons.attr('disabled', 'disabled');
    setTimeout(function(){
        e.preventDefault();
        $(xml).find("main_menu").each(function (){
           // some actions
        });
        carousel_controls_buttons.removeAttr('disabled');
    }, 450);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:15:28.810

我假设你想要这样的东西：

```
$(document).ready(function () {
    carousel_controls_buttons.attr('disabled', 'disabled');
    setTimeout(function(){
        carousel_controls_buttons.removeAttr('disabled');
    }, 1000);

    carousel_controls_buttons.live('click', function(e){
        e.preventDefault();
        $(xml).find("main_menu").each(function (){
        // some actions
        });
    });
}); 
```

# single-sign-on - ADFS 2 是否需要签名的 Saml2 注销请求？

> ID：14461618
> 
> 赞同：0
> 
> 时间：2013-01-22T15:04:56.480
> 
> 标签：single-sign-on, adfs2.0, saml-2.0

使用 SAML2 时，ADFS 2 是否需要签名的 SSO 注销请求？如果是这样，为什么 Logout 需要签名而 Login 不需要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:05:30.357

ADFS2 强制执行 SAML 规范。这意味着它取决于您为给定用例实现的选项。例如，对于 SP-Init SLO，使用 POST/Redirect 绑定时需要签名。对于 SAML 响应（又名登录），POST 绑定要求在使用 Artifact/SOAP 时签名，因为可以通过其他方式提供安全性，所以不需要在响应上签名。

HTH-伊恩

# sql-server - 从 PowerDesigner 连接到 MS SQL Server 2008 R2

> ID：14461620
> 
> 赞同：1
> 
> 时间：2013-01-22T15:05:07.370
> 
> 标签：sql-server, sql-server-2008, connection-string, sybase, powerdesigner

我正在尝试从 Sybase PowerDesigner 15 连接到 MS SQL SERVER 2008 R2。`Connection Profile Definition`我基本上在对话框中输入了以下内容：

*   连接类型：原生
*   DBMS 类型：Microsoft SQL Server
*   服务器名称：（`MSSQLSERVER`这是我机器上安装的实例名称，我也试过`192.168.1.44\MSSQLSERVER`是我在网络上的IP和实例名称）
*   数据库名称：`Prevent-01222013`
*   使用集成登录：选中

不幸的是，它一直告诉我“连接失败！”。我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:03:54.050

好吧，显然我做错了。我最终使用了该`ODBC machine data source`选项，并且做到了。

# mysql - Laravel Fluent 查询 - 如何使用 Fluent 执行“SELECT AS”？

> ID：14461623
> 
> 赞同：23
> 
> 时间：2013-01-22T15:05:15.930
> 
> 标签：mysql, laravel, fluent

我有一个查询来从租用表中选择所有行并以随机顺序显示它们。

```
DB::table('hire_bikes')->order_by(\DB::raw('RAND()'))->get(); 
```

我现在希望能够放

```
concat(SUBSTRING_INDEX(description, " ",25), "...") AS description 
```

进入查询的 SELECT 部分，这样我就可以`select *`从表中得到一个缩短的描述。

我知道这可以通过运行原始查询来实现，但我希望能够使用 Fluent 或至少部分 Fluent（如上）来做到这一点。

我该怎么做？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-09-08T14:13:32.290

您实际上可以使用 select`AS`而不使用`DB::raw()`. 只需将数组传入`select()`方法中，如下所示：

```
$event = Events::select(['name AS title', 'description AS content'])->first();

// Or just pass multiple parameters

$event = Events::select('name AS title', 'description AS Content');

$event->title;
$event->content; 
```

我测试了它。

另外，我建议不要使用`DB:raw()`查询来连接您的描述字段。如果您使用的是 eloquent 模型，您可以使用[访问器和](http://laravel.com/docs/4.2/eloquent#accessors-and-mutators)修改器为您执行此操作，因此如果您需要有限的描述，您可以简单地将其输出到您的视图中，而不必每次都使用相同的查询来获得有限的描述。例如：

```
class Book extends Eloquent
{
    public function getLimitedDescriptionAttribute()
    {
        return str_limit($this->attributes['description'], $limit = 100, $end = '...');
    }
} 
```

在您看来：

```
@foreach($books as $book)

    {{ $book->limited_description }}

@endforeach 
```

示例输出（不准确限制）：

```
The description of this book is... 
```

我还建议不要使用 DB 外观，因为它总是使用您的默认连接。如果您正在查询辅助连接，除非您使用以下方式主动指定它，否则它不会考虑到这一点：

```
DB::connection('secondary')->table('hire_bikes')->select(['name as title'])->get(); 
```

请注意，如果您使用 select AS ( `name AS title`) 并且希望更新您的模型，您仍然必须设置与您的数据库列一致的正确属性名称。

例如，这将导致异常，因为该`title`列在您的数据库表中不存在：

```
$event = Events::select('name AS title')->first();

$event->title = 'New name';

$event->save(); // Generates exception, 'title' column does not exist. 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-24T13:11:19.467

您可以通过将 a 添加`DB::raw()`到流利查询中的选择数组来执行此操作。我在本地对此进行了测试，效果很好。

```
DB::table('hire_bikes')
  ->select(
      array(
        'title',
        'url',
        'image',
        DB::raw('concat(SUBSTRING_INDEX(description, " ",25),"...") AS description'),
        'category'
      )
    )
  ->order_by(\DB::raw('RAND()'))
  ->get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T09:53:41.530

```
select(array(DB::raw('latitude as lat'), DB::raw('longitude as lon'))) 
```

# java - 在构造函数中启动线程

> ID：14461626
> 
> 赞同：0
> 
> 时间：2013-01-22T15:05:25.350
> 
> 标签：java, multithreading

据说线程不应该在构造函数中启动，但我不确定在这种情况下`this`引用是如何转义构造函数的。`Test`我查看了底层的 Thread.java，但我无法弄清楚。

```
class Test {

    static MyThread thread;

    public Test() {

        thread = new MyThread();
        thread.start();

    }

}

class MyThread extends Thread {

    public void run() {

        //do stuff

    }

} 
```

谢谢您的帮助。

`thread = new MyThread();`将调用`Thread`超级构造函数：

```
public Thread() {
    init(null, null, "Thread-" + nextThreadNum(), 0);
} 
```

我没有看到参考消失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:07:04.063

`this`只能在线程引用时转义`this`（例如，如果它是内部类）

您的线程没有引用`this`，所以这不是问题。

但是，通常期望构造一个对象是没有副作用的；这不是一个好主意。

# android - 可绘制文件夹中的未知错误

> ID：14461629
> 
> 赞同：-4
> 
> 时间：2013-01-22T15:05:39.833
> 
> 标签：android, drawable

我创建了一个集成 zxing 的应用程序。我按照这个网站[http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)关注。现在我在可绘制文件夹中有错误。请指导我。

提前致谢。![在此处输入图像描述](../Images/5147328960d1c8add3671a2999b57e8c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:11:54.533

`density`当您根据在您的 android 应用程序中实现多种尺寸支持进行划分时。

但是没有`xxhdpi`。

```
ldpi    Resources for low-density (ldpi) screens (~120dpi).
mdpi    Resources for medium-density (mdpi) screens (~160dpi). (This is the baseline density.)
hdpi    Resources for high-density (hdpi) screens (~240dpi).
xhdpi   Resources for extra high-density (xhdpi) screens (~320dpi).
nodpi   Resources for all densities. These are density-independent resources. 
tvdpi   Resources for screens somewhere between mdpi and hdpi; approximately 213dpi. This is not considered a "primary" density group. It is mostly intended for televisions and most apps shouldn't need it—providing mdpi and hdpi resources is sufficient for most apps and the system will scale them as appropriate. 
```

**不需要项目`drawable-xxhdpi`内部`res/`。所以请删除它。**

有关更多详细信息，请遵循这些[配置限定符](http://developer.android.com/guide/practices/screens_support.html#qualifiers)

# firefox - Janrain 参与：未从 Firefox 调用 token_url

> ID：14461634
> 
> 赞同：1
> 
> 时间：2013-01-22T15:05:43.963
> 
> 标签：firefox, callback, janrain

我有一个使用 Janrain Engage 登录的应用程序。几个月后一切正常，除了在 Firefox 的一台机器上......

我不知道什么原因，当我尝试从这台机器（在我的网站甚至 Janrain 的管理网站上）登录时，我得到了登录页面，我选择了一个提供商，输入我的信息，验证和然后，什么也没有发生！

正常的进程跟踪是：

*   获取 [https://XXXXXXX.rpxnow.com/signin/get_login_info?widget_type=auth&provider=google&time=1358864872301](https://XXXXXXX.rpxnow.com/signin/get_login_info?widget_type=auth&provider=google&time=1358864872301) [HTTP/1.1 200 OK 1144ms]
*   POST [http://XXXXXXX.rpxnow.com/redirect?loc=yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy](http://XXXXXXX.rpxnow.com/redirect?loc=yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy) [HTTP/1.1 200 OK 2533ms]
*   POST https://my_token_url_on_mydomain [HTTP/1.1 302 找到 3667ms]

在有故障的机器上，我只有第一个 GET，然后什么都没有...... token_url 回调从未被调用，所以我什至在我的服务器上没有任何痕迹。

出现问题的机器是我家的个人机器。相同的登录尝试就像 Chrome 或 IE 的魅力一样。我没有在我的 Firefox 配置中找到任何特定设置。

恐怕一些潜在客户会得到与我相同的行为并离开......有人在尝试类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:26:53.090

青蛙。您可能在 Firefox 中禁用了 3rd 方 cookie。这是我能想到的唯一会在单个浏览器上导致该问题的事情。转到此处了解有关更改该设置的信息：http: [//support.mozilla.org/en-US/kb/disable-third-party-cookies/](http://support.mozilla.org/en-US/kb/disable-third-party-cookies/)

# php - 在 AJAX 响应中显示欧元符号的 Html 实体而不是实际的欧元符号 - 得到 € 而不是 €

> ID：14461635
> 
> 赞同：1
> 
> 时间：2013-01-22T15:05:45.117
> 
> 标签：php, javascript, ajax, html-entities

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:25:46.490

Your problem is not with the `htmlentity_decode($currency)` part, but with the `json_encode` part. This will turn your euro symbol back to an htmlentity.

You could use `json_encode($currency, JSON_UNESCAPED_UNICODE)` to force the use of the actual € symbol, but personally I think you are better of with sending the html entity. As some browser will see that as invalid code and you'll get unexpected results.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:42:52.070

I checked that by not making any changes in PHP side and explicitly decoding the HTML entities in the javascript side, after receiving response, the problem gets fixed. I added this javascript function `html_entity_decode()` (phpjs.org/functions/html_entity_decode) and called it before alerting the response, but that too did not work (then I added support for Euro in that function) and now it works..

# c# - 缓存以将 IntPtr 句柄映射到 pinvoke 回调中的 C# 类实例

> ID：14461638
> 
> 赞同：0
> 
> 时间：2013-01-22T15:05:53.057
> 
> 标签：c#, interop, pinvoke, weak-references, finalizer

我正在围绕使用不透明指针来识别资源的本机 dll 编写 C# 包装器。一个典型的例子是

```
typedef struct session session;
typedef struct track track;

void* sessionCreate(int arg, session** sess);
void  sessionRelease(session** sess);
track* sessionGetTrack(session* sess, int index);
void trackAddRef(track* trk);
void trackRelease(track* trk);
int  trackGetLength(track* trk); 
```

在我的包装器中，我创建了对应于不同不透明类型的 C# 类，其成员函数对应于使用不同不透明类型的各种函数。

这可以。也有来自 dll 的回调，例如

```
void(* track_changed )(track *trk, bool changedExternally); 
```

为了从处理回调的静态委托映射到与提供的句柄对应的对象，我在每个类中都使用了 WeakReferences 的静态字典（IntPtr/SafeHandle 作为键，对象引用作为 aata）。

那么从静态字典中删除条目的正确方法是什么？我正在编写库代码，不能依赖我的客户来处理我的对象。我应该把代码放在终结器中吗？

或者有没有更好的方法来管理静态回调和我的对象实例之间的对应关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:16:28.590

您的客户*确实应该*（实际上我更愿意说*must*）处置您的对象，因为它们是`IDisposable`，就像他们对其他 BCL 类所做的那样。

在任何情况下，[dispose/finalize 模式](http://msdn.microsoft.com/en-us/library/b1yfkh5e.aspx)的标准实现应该涵盖所有基础。[这里](https://stackoverflow.com/questions/898828/c-sharp-finalize-dispose-pattern)有更多相关的讨论。

# javascript - ajaxcontroltoolkit javascript 错误：Microsoft JScript 运行时错误：“AjaxControlToolkit”未定义

> ID：14461643
> 
> 赞同：1
> 
> 时间：2013-01-22T15:06:00.233
> 
> 标签：javascript, asp.net, ajaxcontroltoolkit

我正在尝试在客户端 javascript 中操作 ajaxcontroltoolkit 选项卡容器。我找到了以下示例代码：

```
<script type="text/javascript">
    var i = 3;
    function createnew() {

        CreateNewTabPanel('TabContainer1', 'TabPanel' + i, 'TabPanel' + i, 'TabPanel' + i);
        i++;

    }

    function CreateNewTabPanel(tabContainerID, tabPanelID, headerText, bodyText) {
        //create header
        var header = document.createElement('span');
        header.id = "__tab_" + tabContainerID + tabPanelID;
        header.innerHTML = headerText;
        $get(tabContainerID + "_header").appendChild(header);

        //create content
        var body = document.createElement('div');
        body.id = tabContainerID + "_" + tabPanelID;
        body.style.display = "none";
        body.style.visibility = "hidden";
        body.innerHTML = bodyText;
        body.cssClass = "ajax__tab_panel";
        $get(tabContainerID + "_body").appendChild(body);

        $create(AjaxControlToolkit.TabPanel, { "headerTab": $get(header.id) }, null, { "owner": tabContainerID }, $get(body.id));

    }

</script>
<body>
    <form id="form1" runat="server">
    <ajaxToolkit:ToolkitScriptManager runat="Server" EnablePartialRendering="true" ID="ScriptManager1" />
<span id="mes"></span><br />
<span id="mes1"></span>
    <ajaxToolkit:TabContainer runat="server" ID="TabContainer1"   >
            <ajaxToolkit:TabPanel runat="server" ID="TabPanel1" HeaderText="TabPanel1">
                <HeaderTemplate>
                    TabPanel1
                </HeaderTemplate>
            <ContentTemplate>
                TabPanel1
            </ContentTemplate>
        </ajaxToolkit:TabPanel>
                    <ajaxToolkit:TabPanel runat="server" ID="TabPanel2" HeaderText="TabPanel2">
            <ContentTemplate>
                TabPanel2
            </ContentTemplate>
        </ajaxToolkit:TabPanel>
    </ajaxToolkit:TabContainer>

    <input type="button" onclick="createnew()" value="create a new pane" />

    </form>
</body> 
```

当我在网络表单中使用它时，出现以下错误

Microsoft JScript 运行时错误：“AjaxControlToolkit”未定义

错误发生在这一行：

```
$create(AjaxControlToolkit.TabPanel, { "headerTab": $get(header.id) }, null, { "owner": tabContainerID }, $get(body.id)); 
```

我安装了控制工具包，但我不知道我需要做什么才能访问 js 运行时库。我需要下载源代码并引用 js 文件，还是需要任何其他先决条件？任何帮助是极大的赞赏

谢谢

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:17:51.430

最后这是因为微软将类名更改为 Sys.Extended.UI.TabPanel。谢谢你的帖子

```
$create(Sys.Extended.UI.TabPanel, { "headerTab": _spanTab, "ownerID": tabContainerID, "wasLoadedOnce": false }, null, { "owner": tabContainerID }, body); //$get(body.id)); 
```

# ios - 显示 UIMenuController 取消选择 UITableViewCell

> ID：14461644
> 
> 赞同：2
> 
> 时间：2013-01-22T15:06:00.220
> 
> 标签：ios, objective-c, uitableview, uimenucontroller

我已经在显示`UIMenuController`. 但是当菜单显示时，相应的表格视图单元格会取消选择。在显示菜单之前，我会根据需要调用`[self becomeFirstResponder]`. 我认为这个调用取消选择单元格，但是如何使它在`UIMenuController`可见时保持选中状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:19:59.287

[根据文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3awillDeselectRowAtIndexPath%3a)，当您不想取消选择行时，在您的`UITableViewDelegate`, 中覆盖`tableView:willDeselectRowAtIndexPath:`并返回。`nil`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T04:50:30.717

一种更简单的实现方法是使用特定的 UITableViewDelegate 方法来处理 UIMenuController。但首先，要使单元格保持选中状态，请将呈现菜单的单元格的值存储在您的类中：

```
NSIndexPath                     *_editingIndexPath; 
```

然后实现 UITableViewDelegateMethods：

```
- (BOOL)tableView:(UITableView *)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyCustomTableViewCell *cell = (MyCustomTableViewCell *) [_tableView cellForRowAtIndexPath:indexPath];
    _editingIndexPath = indexPath;
    cell.showingMenu = YES;

    return YES;
}

- (BOOL)tableView:(UITableView *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender
{
    if (action == @selector(copy:)) {
        return YES;
    }

    return NO;
}

- (void)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender
{
    if (action == @selector(copy:))
    {
        UITableViewCell *cell = [self tableView:tableView cellForRowAtIndexPath:indexPath];
        if (cell && [cell isKindOfClass:[MessageConversationCell class]])
        {
            [UIPasteboard generalPasteboard].string = cell.textLabel.text;
        }
    }
} 
```

上面的代码将负责在长按后在单元格上显示“复制”菜单。现在，如果您希望在显示菜单时单元格保持选中状态：

在名为“showingMenu”的自定义单元格中添加一个@property（请注意，此属性已在此答案的第一个代码块中设置）。

```
@property (nonatomic, assign) BOOL showingMenu; 
```

将以下方法添加（或修改，如果已经存在）到您的自定义单元格。这将负责在菜单尝试取消突出显示后保持单元格突出显示（您可以实现自己的逻辑来突出显示单元格，在这种情况下将其放在 if 条件的第一个分支中）：

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated
{

    if (_showingMenu)
    {
        [super setHighlighted:YES]
    }
    else
    {
        [super setHighlighted:highlighted];
    }
} 
```

添加一个观察者，以便在将要显示菜单时得到通知。这进入视图控制器，而不是自定义单元格：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didShowEditMenu:) name:UIMenuControllerDidShowMenuNotification object:nil]; 
```

在视图控制器上添加显示菜单时要调用的方法：

```
- (void)didShowEditMenu:(NSNotification *)not {
    [_tableView selectRowAtIndexPath:_editingIndexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
    MyCustomTableViewCell *cell = (MyCustomTableViewCell*)[_conversationTableView cellForRowAtIndexPath:_editingIndexPath];
    cell.showingMenu = NO;
} 
```

并且不要忘记在不再需要时移除观察者：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIMenuControllerDidShowMenuNotification object:nil]; 
```

这将在长按一个单元格时显示一个菜单，并保持该单元格被选中直到菜单消失，因为选择了一个选项或因为用户点击了其他地方。当您选择消息时，它的工作方式与 Whatsapp 的工作方式非常相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T20:28:54.987

您说您正在打电话`[self becomeFirstResponder]`，但您的问题并未表明 self 是哪个对象。我猜`self`是你的控制器。您应该将`becomeFirstResponder`消息发送到生成 UIMenuController 的 UITableViewCell。

```
- (void)longPress:(UILongPressGestureRecognizer *)recognizer 
{ 
    if (recognizer.state == UIGestureRecognizerStateBegan) 
    {    
        TSTableViewCell *cell = (TSTableViewCell *)recognizer.view;

        //This is your problem
        [cell becomeFirstResponder]; 

        UIMenuItem *flag = [[UIMenuItem alloc] initWithTitle:@"Flag" action:@selector(flag:)];    
        UIMenuItem *approve = [[UIMenuItem alloc] initWithTitle:@"Approve" action:@selector(approve:)]; 
        UIMenuItem *deny = [[UIMenuItem alloc] initWithTitle:@"Deny" action:@selector(deny:)];

        UIMenuController *menu = [UIMenuController sharedMenuController];    
        [menu setMenuItems:[NSArray arrayWithObjects:flag, approve, deny, nil]];    
        [menu setTargetRect:cell.frame inView:cell.superview];    
        [menu setMenuVisible:YES animated:YES];    
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T13:27:32.783

我找到了这个解决方案：

```
- (void)handleLongPress:(UILongPressGestureRecognizer *)longPressRecognizer
{
    if (longPressRecognizer.state == UIGestureRecognizerStateBegan) {

        UITableViewCell *cell = (UITableViewCell *)longPressRecognizer.view;

        [cell setSelected:YES];

        ...        
    }
} 
```

# clojure - 如何在 clojure 中存根 langohr RabbitMQ 交互？

> ID：14461646
> 
> 赞同：6
> 
> 时间：2013-01-22T15:06:03.527
> 
> 标签：clojure, rabbitmq, langohr

我正在尝试对 RabbitMQ 交互进行存根，因为这些并不是我正在编写的应用程序的主要目的。

所以，我尝试在我的测试中重新绑定 langohr 函数，如下所示：

```
(defn stub [ch]
  (langohr.basic/ack ch 1))

(deftest test-stub
  (with-redefs [langohr.basic/ack (fn [a1 a2] true)]
    (is (= true (stub "dummy"))))) 
```

当我运行测试时`lein test`，我得到一个

```
java.lang.ClassCastException:
redwood.env_test$fn__2210$fn__2211 cannot be cast to clojure.lang.IFn$OLO 
```

我一直在尝试其他几种方法，包括不同的测试框架来重新定义或重新绑定 langohr 库函数，但没有任何进展。

我已经测试了其他场景，并且我已经成功地使用上述代码结构对 cheshire (json parsing clojure lib) 函数进行了存根。我谦虚地请求帮助，以了解为什么我的 langohr 存根不起作用，以及如何以优雅的方式做到这一点的提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T00:42:35.400

发生 ClassCastException 是因为 langohr.basic/ack 是一个接受原始参数的函数 - 具体来说，它是 clojure.lang.IFn$OLO 类型，其中 OLO 代表“object, long, object”。

你必须重新定义它是相同的类型。试试这个：

```
(with-redefs [langohr.basic/ack (fn [a1 ^long a2] true)] ...) 
```

# algorithm - 迭代列表列表以最大化唯一输出的最佳方式

> ID：14461647
> 
> 赞同：3
> 
> 时间：2013-01-22T15:06:05.220
> 
> 标签：algorithm, r, list, optimization, graph-theory

我有一个列表列表，其中内容是字符向量。例如：

```
yoda <- list(a=list(c("A","B","C"), c("B","C","D")), b=list(c("D","C"), c("B","C","D","E","F"))) 
```

这是一个更短的版本，我实际上正在尝试这样做，对我来说，有 11 个列表成员，每个成员都有大约 12 个子列表。对于每个列表成员，我需要选择一个子成员 liste.g. 一个“a”列表和一个“b”列表。我想找出哪个子列表组合提供了最多的唯一值，在这个简单的示例中，它将是“a”中的第一个子列表和“b”中的第二个子列表，给出最终答案：

```
c("A","B","C","D","E","F") 
```

目前我刚刚得到了大量的嵌套循环，而且它似乎永远存在。这是一段糟糕的代码：

```
res <- list()
for (a in 1:length(extra.pats[[1]])) {
  for (b in 1:length(extra.pats[[2]])) {
    for (c in 1:length(extra.pats[[3]])) {
      for (d in 1:length(extra.pats[[4]])) {
        for (e in 1:length(extra.pats[[5]])) {
          for (f in 1:length(extra.pats[[6]])) {
            for (g in 1:length(extra.pats[[7]])) {
              for (h in 1:length(extra.pats[[8]])) {
                for (i in 1:length(extra.pats[[9]])) {
                  for (j in 1:length(extra.pats[[10]])) {
                    for (k in 1:length(extra.pats[[11]])) {
                      res[[paste(a,b,c,d,e,f,g,h,i,j,k, sep="_")]] <- unique(extra.pats[[1]][[a]], extra.pats[[2]][[b]], extra.pats[[3]][[c]], extra.pats[[4]][[d]], extra.pats[[5]][[e]], extra.pats[[6]][[f]], extra.pats[[7]][[g]], extra.pats[[8]][[h]], extra.pats[[9]][[i]], extra.pats[[10]][[j]], extra.pats[[11]][[k]])
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
} 
```

如果有人有任何想法如何正确地做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:37:13.580

这是一个建议：

```
# create all possible combinations
comb <- expand.grid(yoda)

# find unique values for each combination
uni <- lapply(seq(nrow(comb)), function(x) unique(unlist(comb[x, ])))

# count the unique values
len <- lapply(uni, length)

# extract longest combination  
uni[which.max(len)]

[[1]]
[1] "A" "B" "C" "D" "E" "F" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T02:23:19.107

您当前的问题维度禁止详尽搜索。这是次优算法的示例。虽然简单，但也许你会发现它给你“足够好”的结果。

算法如下：

1.  查看您的第一个列表：选择具有最多唯一值的项目。
2.  查看第二个列表：除了您在第 1 步中选择的项目之外，选择带来最多新唯一值的项目。
3.  重复直到到达列表的末尾。

编码：

```
good.cover <- function(top.list) {
    selection <- vector("list", length(top.list))
    num.new.unique <- function(x, y) length(setdiff(y, x))
    for (i in seq_along(top.list)) {
        score <- sapply(top.list[[i]], num.new.unique, x = unlist(selection))
        selection[[i]] <- top.list[[i]][which.max(score)]
    }
    selection
} 
```

让我们组成一些数据：

```
items.universe <- apply(expand.grid(list(LETTERS, 0:9)), 1, paste, collapse = "")
random.length  <- function()sample(3:6, 1)
random.sample  <- function(i)sample(items.universe, random.length())
random.list    <- function(i)lapply(letters[1:12], random.sample)
initial.list   <- lapply(1:11, random.list) 
```

现在运行它：

```
system.time(final.list <- good.cover(initial.list))
#    user  system elapsed 
#   0.004   0.000   0.004 
```

# javascript - 如何向玩家朋友的时间线发送消息

> ID：14461650
> 
> 赞同：2
> 
> 时间：2013-01-22T15:06:10.813
> 
> 标签：javascript, facebook, facebook-graph-api

我正在寻找一种通过JS为玩家的朋友时间线发送消息的方法。我找到了两种方法：

*   by FB.api('/FRIEND_ID/feed', ...)，但是这个功能很快就会被移除，所以我决定不使用它。

*   并通过 FB.ui('apprequest', ...)，但这种方式不会将消息发送到时间线，而只会在 App Center 中通知。

我尝试为朋友发送链接，但并非所有人都能收到我的应用程序的链接。我需要另一种方法来做到这一点。有些人有另一种想法，即在时间轴中为 1 个或多个人发送消息而无需确认（或多次确认）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:53:30.390

这种垃圾邮件是 Facebook 取消使用图形 api 向朋友发帖的功能的原因。您现在只能显示提要对话框，但由用户完成帖子。

# jsf - 在 SelectOneMenu 中显示“所有值”

> ID：14461654
> 
> 赞同：0
> 
> 时间：2013-01-22T15:06:16.780
> 
> 标签：jsf, jsf-2, enums, selectonemenu

显示一个 JSF 页面，其中包含一个*selectOneMenu*组件，该组件列出了*枚举*类的每个项目。这个 Enum 类对应于城市。

问题是我想显示一个显示“所有城市”的字段，因为我正在显示一个`*List<City>*`我无法添加“所有城市”值，因为那将是一个字符串。

*因此，在SelectOneMenu*中显示的实际项目例如：

*纽约、旧金山、罗马、巴黎*

期望的输出是：

*所有城市, 纽约市, 旧金山, 罗马 巴黎*

代码示例：

枚举：

```
 public enum City {

    ALL, NYC, SANFRANCISCO,...;

    } 
```

JSF 页面代码片段：

```
<h:selectOneMenu id="citiesmenu" value="#{enumBeanStatus.selectedCity}">
<f:selectItems value="#{enumBean.cities}"/>
</h:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:24:22.407

我不知道您如何设置枚举，但只需添加一个`ALL_CITIES`作为`City`枚举的一部分。它可能具有与其他城市不同的值，例如 0 或其他默认值，这只是一个技巧。处理不同值的方式决定了它是通用值还是特定值。

# java - java.lang.IllegalArgumentException：n 在甲板类中必须为正

> ID：14461656
> 
> 赞同：1
> 
> 时间：2013-01-22T15:06:30.833
> 
> 标签：java

我正在制作纸牌游戏，但我得到了 n 必须为正的错误。我做了一些研究，这意味着我相信 (cards.size) 等于或小于 0，但我不明白如何使我的代码工作，一定是有问题。

代码：

```
public class Deck
{
public ArrayList <Card> cards;
Deck()
{
    cards = new ArrayList<>();
    for (int a = 0; a < 52; a++)
    {           
            cards.add(new Card(a));         
    }
}

public Card PlayerCardDraw ()
{
    Random generator = new Random ();
    int index = generator.nextInt (cards.size ());
    return cards.remove (index);

} 
```

如何修复我的数组列表，以免出现此错误？它与 Card 有关，所以我也会发布该代码，我知道我的 Card 类中有些地方不对，但我不知道这是否是问题所在。

```
public class Card
{
int c = 52;
int cardpath[] = new int[c];

Card ()
{

}

public Card(int c)
{
    this.c = c;
}

public int getCardPath()
{
return cardpath[c];
}   
} 
```

错误信息：

```
java.util.Random.nextInt(Unknown Source) at Cards.Deck.PlayerCardDraw(Deck.java:21)
line 21 is int index = generator.nextInt (cards.size ()); 
```

编辑：我按照 Nankumar Tekale 所说的做了，正如你们预测的那样：它绘制了超过 52 张牌。我不明白的是错误正在弹出

```
for (int i = 0 ; i < 4 ; i++)
    {
        C = deck.P1CardDraw ();
        card [cardNum].draw (i*75+100, 400); //Error line
        cardNum++;                   
    } 
```

我的 P1CardDraw() 类

```
public ArrayList < Card > p1Hand;
public ArrayList < Card > P1CardDraw ()
{

    p1Hand = new ArrayList < > ();
    p1Hand.add (PlayerCardDraw ());
    return p1Hand;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:26:23.383

看看你的`Deck`类，你已经在构造函数中初始化`cards`了，所以不应该有这样的异常（因为卡片大小是 52）。

但有一件事可能会得到一个例外，即`cards is declared public`and `you may have modified it outside class directly`。因此，arraylist`cards`的大小为 0，并且您的方法会收到 IllegalArgumentException 异常[`Random.nextInt(int)`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28int%29)。

设为`cards`私有。

如果您已经取出所有卡片，则 arraylist 的大小将变为 0，这可能会导致异常。添加检查 0 为：

```
public Card PlayerCardDraw ()
{
    Random generator = new Random ();
    if(cards.size() > 0) {
        int index = generator.nextInt (cards.size());
        return cards.remove (index);
    } else {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:19:27.640

`PlayerCardDraw`您甚至可能在将卡片添加到列表之前调用方法。手段`cards.size()`必须返回一个`zero`. 所以它是`illegal`使用`zero`种子生成一个随机整数。因此是错误。

**参考**：
***[Random.nextInt(n)](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt%28int%29)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:20:15.767

我的猜测是你一直调用 PlayerCardDraw 超过 52 次。每次，从牌组中取出一张牌，因此在 53:d 时间，您试图从一个空牌组（即大小为 0 的牌组）中抽一张牌，这会导致`generator.nextInt(cards.size());`抛出异常。

然而，这并不容易说。当您遇到此类问题并需要帮助时，请**始终显示异常的完整堆栈跟踪**。此外，由于我们无法在 stackoverflow 上看到代码中的行号，因此请务必在代码中准确**指出**异常发生在哪一行。

# html - 表单外的按钮 html 标签是否有效？

> ID：14461658
> 
> 赞同：39
> 
> 时间：2013-01-22T15:06:34.750
> 
> 标签：html, forms, button

我刚刚注意到，在 soundcloud 中，轨道上的“动作”按钮（如转发等）都是 html 按钮标签。此外，它们既不在表单内部，也不绑定到 la html5 的表单，也不提交表单（它们显然是通过 javascript 处理的）。这是有效的 HTML 吗？没有表单可以存在按钮吗？或者这只是使这些按钮成为可点击的 div 吗？对于屏幕阅读器来说，这有多有效/无效？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-22T15:44:54.943

`button`元素在文档正文中可能出现文本级标记的任何地方都有效。这样的元素不需要与元素有任何关系`form`。目前权威的参考是[HTML 4.01 规范](http://www.w3.org/TR/REC-html40/)，正式的规则在 DTD 中，但是你可以走捷径，使用[W3C Markup Validator](http://validator.w3.org/)来检查一个文档是否有效。

当不与表单关联时，`button`元素与元素没有太大区别`span`（而不是`div`，默认情况下是块级的），但`button`具有特殊的默认呈现。浏览器和辅助软件*也可能*被视为`button`特殊的，并且`button`仅将其用于应该在单击时触发某些操作的元素是最安全的。相反，这些元素通常最好使用`button`标记来表示，尽管您也可以通过其他方式（主要是图像或 CSS）创建视觉上类似按钮的元素。

在表单之外，`button`元素具有`type=button`默认值（这通常是唯一明智`type`的）。这意味着它只能通过 JavaScript 发挥作用。这不会以任何方式使其无效。但是，您可以考虑通过 JavaScript 生成此类按钮，而不是将它们作为静态 HTML 内容，这样当脚本被禁用时，就不会有（有效但）令人困惑的按钮什么都不做。

为了解决以下评论中的澄清问题：

一个`button type=button`元素类似于`input type=button`; 区别在于后者没有内容，而是从`value`属性中获取按钮中显示的文本，而`button`具有可以“丰富”（带有标记）的内容。

对于任一元素，如果使用它们会导致服务器操作（通常通过 Ajax 调用），那么我们确实可以询问页面在禁用 JavaScript 的情况下如何工作。但是这个问题可能无关紧要（也许页面是一个无论如何都应该使用 JavaScript 运行的应用程序），并且无论如何这个想法在*形式上*没有任何问题。

它们为什么存在？为了作者的方便和遗留的原因，我会说。类似地，有人可能会问为什么 HTML 有事件属性，如果没有客户端脚本，它们就无法工作，而您可以将事件处理程序分配给 JavaScript 中的元素。但在早期，这是不可能的，即使在现在，使用`button`元素或`onclick`属性可能比在 JavaScript 中做事更方便（并且，为了使元素看起来像一个按钮，CSS）。还有一点是`button`，`input type=button`为元素创建依赖于浏览器的外观，并且可能会争辩说，对于大多数用户来说，任何具有浏览器默认按钮样式的样式都被视为按钮。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T15:07:20.897

是的。很久以来。

来自[whatwg.org](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-button-element.html)：

> 可以使用此元素的上下文：
> 
> 预期措辞内容的地方。

在 ajax 时代，大多数输入不仅仅是通过提交表单来发送的。大多数按钮仅用于在使用可识别的小部件时执行单击操作。

# c# - 从一个类中列出最小索引值c#

> ID：14461663
> 
> 赞同：-2
> 
> 时间：2013-01-22T15:06:45.670
> 
> 标签：c#, list, collections, docking

我有两节课：

```
    OrdenO 类
        {
            公共 int id_orden_O {get;set;}
            公共 int Ei_O {get;set;}
            公共 int Ii_O {get;set;}
            公共 int Si_O {get;set;}
            公共 int DTi_O {get;set;}
            公共 int Ui_O {get;set;}
            公共 int K_O {get;set;}
            公共 int Q_O {get;set;}
            公开列表 TT；
    }

     类穆勒
        {
            公共 int id_muelle { 获取；放; }
            公共 int Lk { 得到；放; }
            公共 int Sk { 得到；放; }
            公共列表 orden_asign;
        }

```

在这里，我在两个列表集合中都有所有元素：

```
    列出 myClassArray = new List()
                {
    new OrdenO{id_orden_O="1", Ei_O= 0, Ii_O= 120, Si_O=0, DTi_O=0, Ui_O=0, K_O=0, Q_O=0, TT= new List{ 18, 8}},
    new OrdenO{id_orden_O="2", Ei_O= 0, Ii_O= 120, Si_O=0, DTi_O=0, Ui_O=0, K_O=0, Q_O=0, TT= new List{ 20, 25}},
                };

     列表 mydock = 新列表（）
                {
                    new Muelle{id_muelle=0, Lk=0, Sk=0, orden_asign= new List{0} },
                    new Muelle{id_muelle=1, Lk=0, Sk=0, orden_asign= new List{0}}
                };

```

我需要帮助，因为我不知道如何找到 TT 索引最小值。例如，第一个的 (TT) 索引最小值为 1，因为 8 是最小值。第二个是0。

如果索引最小值为1，则找到id_muelle = 1，并将id_orden添加到orden_asign。

任何帮助将非常感激，

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:12:55.577

你可以使用这样的东西

```
 TT.IndexOf(TT.Min()); 
```

# asp.net - 什么是发布 asp.net mvc 应用程序的好解决方案。VS2012 Publish 工具的许多问题

> ID：14461664
> 
> 赞同：1
> 
> 时间：2013-01-22T15:06:47.977
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2012, publish, msdeploy

我在使用 Visual Studio 2012 发布功能时遇到了很多问题。

我正在寻找一种简单的方法来发布我的 Asp.Net MVC 4 应用程序。今天我有我的开发机器和一个网络服务器。每次更新应用程序时，我都必须手动复制和粘贴我想要的文件。这是一项非常繁琐的工作。

我试过VS2012发布工具，遇到了很多问题。

1.  我正在正确配置 ftp 以在被动模式下工作，但 VS2012 一直说被动模式未激活。

2.  由于没有“复选框”可以从被动模式切换到正常模式，我不得不修改 xml 文件，没有将其设置为不以被动模式运行。

部署现在成功，现在我收到以下错误：

```
 c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET
  Files\root\ee6c89b7\bf969ee8\App_Web_crjs1ytd.16.cs(33,0): 
  Error CS0234: 'The type or namespace name 'sistema_DocType' does not exist in the namespace 'gedaiapp.Models' (are you missing an assembly reference?) 
```

我的本地计算机上的应用程序没有任何问题，当我复制/粘贴文件时，我能够构建它并在 Web 服务器中运行，我现在明白为什么当我使用发布功能时它不起作用。

我已经尝试删除临时文件夹中的所有文件，清理整个解决方案和项目并重建所有文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:48:48.390

很抱歉听到你们有问题。你是对的，Visual Studio 不支持 SFTP，但我们支持 FTPS。

我们的 uservoice 网站上有一个[支持 SFTP](http://aspnet.uservoice.com/forums/41199-general-asp-net/suggestions/487960-secure-better-smart-client-publishing)的项目，但目前投票数非常低（只有 6 票）。如果你们对此支持感兴趣并且可以对该项目进行投票，这将有助于我优先考虑这一点，以便我们可以调查支持这一点。

如果您想与我分享有关发布的任何其他反馈，请随时直接通过 sayedha[at]{MicrosoftDOTcom} 给我发送电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:08:46.527

这个问题不容易回答，因为不知道这是内部公司环境还是小型环境，而您只是通过 Internet 将一些文件复制到单个服务器。

如果您在内部公司环境中并且需要复制到大量文件/服务器，则可能需要查看复制（第三方软件或本土应用程序）。

我同意您的意见，因为发布工具不符合当前标准。我对这个工具的挑战是这个应用程序缺少安全 FTP 选项。这应该是任何版本的 Visual Studio 的标准配置。

我目前正在使用 IIS SFTP 和 Filezilla (SFTP) 来满足我的传输需求，作为 Visual Studio 中缺乏加密功能的替代方案。

# ruby-on-rails - 控制器中的方法

> ID：14461668
> 
> 赞同：0
> 
> 时间：2013-01-22T15:06:58.707
> 
> 标签：ruby-on-rails

我正在查看一个示例 Rails 应用程序并看到一些奇怪的东西。对我来说很奇怪，因为我过去的经验是使用 C#。

所以在`ApplicationController`我有一个像这样的“私人”方法：

```
 private

    def current_cart 
      Cart.find(session[:cart_id])
    rescue ActiveRecord::RecordNotFound
      cart = Cart.create
      session[:cart_id] = cart.id
      cart
    end 
```

然后在`orders_controller`课堂上我有另一种方法，它在它的正文中说的是：

```
def new
   @cart = current_curt
// ....
end 
```

发生了什么 ？它是私人的，但我们可以访问它吗？而且我们不需要在访问它之前创建它的实例吗？有人能谈谈控制器中的方法如何在 Rails 中协同工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:11:57.253

每个请求都有*一个*控制器实例，由框架实例化。

是的，子类可以访问该方法（正如运行它所显示的那样）。

# itk - 在 QT 中使用 ITK 时出现链接器错误

> ID：14461674
> 
> 赞同：0
> 
> 时间：2013-01-22T15:07:26.100
> 
> 标签：itk

我正在尝试在 QT 中使用 ITK（QT 的新手和 ITK 中的生锈）我终于能够定义包含路径和 .lib，但我仍然无法运行我的代码。它是一个简单的 dicom 阅读器：

```
typedef signed short InputPixelType;
const unsigned int InputDimension = 2;

typedef itk::Image< InputPixelType, InputDimension > InputImageType;

typedef itk::ImageFileReader< InputImageType > ReaderType;
ReaderType::Pointer reader = ReaderType::New();

reader->SetFileName( "C:\Users\dmilford\Desktop\PvMRIm1" );

typedef itk::GDCMImageIO        ImageIOType;
ImageIOType::Pointer gdcmImageIO = ImageIOType::New(); 
```

错误出现在最后一行，我收到以下错误

```
ITKIOGDCM-4.2.lib(itkGDCMImageIO.obj) : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __thiscall gdcm::Rescaler::SetPixelFormat(class gdcm::PixelFormat const &)" (__imp_?SetPixelFormat@Rescaler@gdcm@@QAEXABVPixelFormat@2@@Z) referenced in function "public: virtual void __thiscall itk::GDCMImageIO::Read(void *)" (?Read@GDCMImageIO@itk@@UAEXPAX@Z) 
```

超过 100 次。

有谁知道如何解决此链接器错误或知道我是否会得到答案的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:35:55.717

此链接错误可能来自 ITK 和您的 Qt 编译器之间的编译版本不一致。例如，确保您的 ITK 是使用 MSVC2010 构建的，而您的 Qt SDK 默认编译器是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:50:31.020

请尝试使用 CMake 生成构建文件。这需要更少的时间，你所有的问题都会消失。

# excel - 从 ASP 导出 Excel 文件返回“文件格式不同于扩展名错误”

> ID：14461676
> 
> 赞同：2
> 
> 时间：2013-01-22T15:07:31.920
> 
> 标签：excel, asp-classic

我已经阅读了很多关于这个主题的内容（在 excel 2007和[http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/03/11/](http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/03/11/excel-2007-extension-warning.aspx)[中打开时，Excel 电子表格生成导致“文件格式不同于扩展名错误”](https://stackoverflow.com/questions/652377/excel-spreadsheet-generation-results-in-different-file-format-than-extension) [excel-2007-extension-warning.aspx](http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/03/11/excel-2007-extension-warning.aspx)），据我了解，这个问题没有服务器端解决方案。问题是关于这个主题的大多数帖子现在都有 2 年以上的时间了。

从网页导出 .xls 和 .xlsx 文件是否有任何进展？是使用另一种格式（如 .csv）的唯一解决方案吗？

这是我目前拥有的代码，除了 Excel 消息，它可以正常工作

```
 <%

    Dim objExXML
    Dim objExXSL

    set objExXML = Server.CreateObject("Microsoft.XMLDOM")
    objExXML.async = false
    objExXML.loadxml(session("variable"))

    set objExXSL = Server.CreateObject("Microsoft.XMLDOM")
    objExXSL.async = false
    objExXSL.load(Server.MapPath("file_test.xsl"))

    Dim excelStr
    excelStr = objExXML.transformNode(objExXSL)

    Response.ContentType = "application/vnd.ms-excel"
    Response.AddHeader "content-disposition", "Attachment; filename=file.xlsx"
    Response.Write excelStr

    %> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-16T05:40:14.753

我认为没有任何进展，尤其是在经典 ASP 世界中。您最好的选择仍然是以下之一：

*   以不同的格式输出您的报告，例如 CSV 或 Excel XML，并设置`Response.ContentType`为适当的 MIME 类型

或者

*   教育您的用户，让他们知道会收到警告

# php - 是否可以使用图形 api 在视频中标记朋友？

> ID：14461678
> 
> 赞同：0
> 
> 时间：2013-01-22T15:07:43.893
> 
> 标签：php, facebook, facebook-graph-api

我没有找到任何相关的东西。可能我会错误地搜索。我想在视频中标记朋友。

我如何在 facebook 中使用 graph api 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-11T20:20:38.843

可以在视频中标记朋友，但它不在文档中。我自己搜索了很长时间都无济于事，但后来尝试了几件事并让它工作。

您需要的两个权限是 publish_actions 和 user_videos。

它的工作原理与标记照片非常相似，后者是通过`/{photo_id}/tags`端点完成的。尽管`/{video_id}/tags`在文档中找不到等效的视频，但它显然确实存在。使用照片，您可以将参数`tags`作为数组提供。视频标记一次只支持一个带有该`tag_uid`参数的标记。因此，如果您想标记多个人，则必须发布多个帖子。

这是使用 PHP SDK 的最终工作解决方案：

```
$facebook = new Facebook(array('[YOUR_APP_ID]', '[YOUR_APP_SECRET]'));

$response = $facebook->api('/me/videos', 'POST', array(
    'access_token' => $facebook->getAccessToken(),
    'title'        => '[YOUR_TITLE]',
    'description'  => '[YOUR_DESCRIPTION]',
    'source'       => '@' . realpath('[PATH_TO_YOUR_VIDEO')
));

$facebook->api('/' . $response['id'] . '/tags', 'POST', array(
    'access_token' => $facebook->getAccessToken(),
    'tag_uid'      => '[FRIENDS_FACEBOOK_ID]'
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:11:11.833

阅读此 [https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

帖子支持添加消息标签。

在下面`message_tags column`

> 包含字段的对象，其名称是消息字段中提及对象的索引；每个字段依次是一个数组，其中包含一个对象，该对象具有 id、name、offset 和 length 字段，其中 length 是消息字段中提到的对象的长度

# search - 我的二叉树上的根始终为空

> ID：14461683
> 
> 赞同：1
> 
> 时间：2013-01-22T15:08:16.507
> 
> 标签：search, tree

```
import java.io.*;

class treeNode {

    int data;
    treeNode left = null;
    treeNode right = null;
    treeNode parent = null;

    treeNode (int value)
    {
        data = value;
    }
}

class treeNodes {

    treeNode root = null;         

    void insert (treeNode node)
    {
        if (root == null) // the value of root is always null
        {           
            root = node;            
            return;
        }

        treeNode cur = null;
        treeNode father = null;

        while (cur != null)
        {
            father = cur;
            if (cur.data > node.data)
                cur = cur.left;
            else
                cur = cur.right;
        }

        if (father.data > node.data)
            father.left = node;
        else
            father.right = node;

        node.parent = father;
    }

    void walkInorder (treeNode n)
    {
        if (n == null)
            return;

        walkInorder (n.left);
        System.out.print (n.data + " ");
        walkInorder (n.right);
    }
}

class binarySearchTree {

    public static void main (String [] args) {   

        treeNodes obj1 = new treeNodes ( );     

        System.out.println ("============ Array Elements ============"); 

        int A[] = {3, 5, 7, 9, 8, 6};

        for (int i = 0; i < 6; i++)
        {
            treeNode node = new treeNode (A[i]);
            treeNodes obj = new treeNodes ( );
            obj.insert(node);                     
        }      

        System.out.println ("\n============ Inorder ============");
        System.out.println (obj1.root.data);
        obj1.walkInorder (obj1.root);        

    }
} 
```

我试图制作二叉树，当我将第一个值发送到插入函数时，它应该改变 root 的值

在我的情况下，根永远不会改变有人可以告诉我为什么以及如何解决它

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T21:21:04.607

在`for`循环中，对于数组中的每个项目，您正在创建一个新`treeNodes`实例。每当您创建一个新实例时，`root`设置为`null`.
尝试对`for`循环进行以下更改：

```
 treeNodes obj = new treeNodes();

    for (int i = 0; i < 6; i++)
    {
        treeNode node = new treeNode(A[i]);            
        obj.insert(node);                     
    } 
```

这样，循环的每一步都将使用相同的`treeNodes`实例，并且将正确设置根节点。您的代码还有其他问题，但学习的一部分是实验。所以，继续，解决上面的问题，让我们知道它是怎么回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T16:01:00.277

我想上面的答案并不完全正确。是的，每次循环转到数组中的下一个元素时，您都会创建一个新的 treeNodes 实例，但这意味着您正在创建只有一个元素的新树，因此根不会为空。另一方面，您尝试打印的根实际上是 null，但那是因为您没有在要打印的树中插入任何元素。你试图按照树 OBJ1 的顺序行走，但你没有在这棵树中插入任何东西。您应该尝试按树 OBJ 的顺序行走。

上面的答案是正确的，您需要进行修复，因此您将仅将数组元素插入到一棵树中，然后修复我解释的这个问题。

# azure - 将需要 I/O API 的可执行文件迁移到 azure

> ID：14461686
> 
> 赞同：0
> 
> 时间：2013-01-22T15:08:23.810
> 
> 标签：azure

我有许多我想迁移到 azure 的可执行文件。这些可执行文件需要 I/O API 才能正常运行。因此，为了能够迁移这些可执行文件，我必须将它们放在云驱动器 (VHD) 中。但据我所知，一个 vhd 可以一次由一个角色挂载，那么我该如何管理让我们说 2 个或更多角色来挂载同一个 VHD？

1.  我的第一个想法是上传原始 VHD 的副本，以便每个角色都可以挂载自己的 vhd 并对其进行读/写，然后将所有角色需要查看的文件保存在 blob 存储中。

2.  通过使用 SMB 共享 Windows Azure 驱动器使 VHD 可共享。

这两种解决方案中哪一种更好，还有另一种方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:41:25.563

这是一个开放源代码项目[的链接](https://github.com/achilles-software/cloudstorageprovider)，该项目将 System.IO 调用连接到 ASP.NET 云存储提供程序。

# javascript - 初始化类属性

> ID：14461688
> 
> 赞同：1
> 
> 时间：2013-01-22T15:08:34.763
> 
> 标签：javascript, oop

我有一些 javascript 类并具有检查构造函数参数`someClass`的初始化函数。`init`带有这个参数的对象相当大，这个函数变得太大了。

```
function SomeClass (paramObj) {
    this.inputHourId;
    this.inputHourName;
    this.inputHourValue;
    ......
    ......
    this.Init = function (paramObj) {
        if (typeof paramObj.hourOptions.inputName == "undefined") {
            this.inputHourName = "default_name";
        } else {
            this.inputHourName = paramObj.hourOptions.inputName;
        }

        if (typeof paramObj.hourOptions.inputValue == "undefined") {
            this.inputHourValue = "default_value";
        } else {
            this.inputHourValue = paramObj.hourOptions.inputValue;
        }
        ......
        ......
        ......
    }
    this.Init(paramObj);
} 
```

为了避免代码重复并使其更具可读性，我决定创建一个函数，该函数将使用 check 进行 var 初始化

```
this.initVar = function (veriable, value) {
    if (typeof value == "undefined") {
        veriable = "some_default_value";
    } else {
        veriable = val;
    }
} 
```

添加`initVar`功能后，我的`Init`功能应如下所示：

this.Init = function (paramObj) { // 输入小时初始化 this.initVar(this.inputHourId, paramObj.hourOptions.inputId); this.initVar(this.inputHourName, paramObj.hourOptions.inputName); this.initVar(this.inputHourValue, paramObj.hourOptions.inputValue); .... .... .... }

但在那之后类变量`this.inputHourName`仍然`undefined`

现在的问题。如何在函数的帮助下初始化我的类属性？或者我如何传输类属性，如函数参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:15:01.967

那是因为当你传递`this.inputHourId`给`initVar()`它时，它会在更新时复制变量；那不是你想要的。

你可以重写`initVar()`这个；它使用变量名作为字符串而不是变量本身。然后它用于`this[variable]`更新实际的实例变量。

```
this.initVar = function (variable, value) {
    if (typeof value == "undefined") {
        this[variable] = "some_default_value";
    } else {
        this[variable] = val;
    }
} 
```

然后，您将其称为：

```
this.initVar('inputHourId', paramObj.hourOptions.inputId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:13:20.367

你也可以使用这种语法而不是你的一堆 ifs ：

`this.param1 = params.param1 || "default_value";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:14:44.607

> 如何在函数的帮助下初始化我的类属性？

由于您无法将要分配给函数的属性的引用传递给函数，因此只需从函数返回值并将结果分配给属性：

```
this.inputHourId = initVar(paramObj.hourOptions.inputId); 
```

# javascript - 使用 extjs 单击其中的 X 按钮清除搜索框

> ID：14461689
> 
> 赞同：0
> 
> 时间：2013-01-22T15:08:36.053
> 
> 标签：javascript, extjs2

使用 extjs 单击其中的 X 按钮清除搜索框。它还应该有鼠标悬停状态。任何人都可以请帮助代码或如何继续。任何帮助，将不胜感激。

下面是我要添加功能的代码：-

```
var tools = [{
                xtype: 'label', 
                id: 'search-filter-label',
                text: 'Search'
            }, ' ', {
                xtype: 'textfield',
                id: 'search-filter',
                selectOnFocus: true,
                width: 100,
                listeners: {
                    'render': {fn:function(){
                        Ext.getCmp('search-filter').getEl().on('keyup', function(){
                            this.filter();
                        }, this, {buffer:50});
                    }, scope:this}
                }
        }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:24:08.673

查看这些链接：

[如何将 X 放在文本字段中以清除 extjs 中的文本](https://stackoverflow.com/questions/13586749/how-to-put-x-inside-textfield-to-clear-text-in-extjs)

[http://www.sencha.com/forum/showthread.php?132775-Ext.ux.form.field.ClearButton-Small-clear-button-icon-over-field](http://www.sencha.com/forum/showthread.php?132775-Ext.ux.form.field.ClearButton-Small-clear-button-icon-over-field)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:18:44.323

check out these link:

Code: learnsomethings.com/fcps_checks/js/app.js

Working Example: learnsomethings.com/fcps_checks/index.html

# database - JPA、刷新和实体管理器同步

> ID：14461694
> 
> 赞同：0
> 
> 时间：2013-01-22T15:08:51.770
> 
> 标签：database, jpa, relationship, entitymanager

我正在使用 Java EE、Netbeans 和外观会话 bean 来实现 JPA 层 (eclipselink)。

例如，我有一张两张桌子：花园 (1) ---> 树 (n)。

（脚本 A）现在，我执行这个片段：

```
Garden mGarden = new Garden();
.....
gardenFacade.create(garden) 
```

（脚本 B）然后：

```
Tree oneTree = new Tree();
oneTree.setGarden(mGarden);
treeFacade.create(oneTree); 
```

这样，实体Tree就被正确的添加到我的数据库中了，而且外键是正确的。

（脚本 C）当我调用时：

```
Garden findGarden = gardenFacade.find(gardenId);
int count = findGarden.getTreeCollection().size(); 
```

我数过 = 0 !!! 如果我重新启动 glassfish 或重新加载我的应用程序并执行这些片段，我的计数 = 1。

因此，我认为这是持久性上下文同步的问题，因为如果我将脚本 B 更改为：

```
Tree oneTree = new Tree();
oneTree.setGarden(mGarden);
treeFacade.create(oneTree);

mGarden.getTreeCollection().add(oneTree);
gardenFacade.edit(mGarden); 
```

一切正常！我该如何解决这个问题？

编辑：

```
create --> getEntityManager().persist(entity);
edit ----> getEntityManager().merge(entity);
find ----> getEntityManager().find(entityClass, id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:00:05.103

看起来所有这些调用都使用相同的休眠会话，并且由于您未能正确初始化集合的两侧，当然您在集合中没有得到任何东西：

```
Garden mGarden = new Garden(); // create a new Garden instance
session.persist(mGarden); // now this Garden instance is persistent. 
                          // Its state will be written to the database at the 
                          // next flush
Tree oneTree = new Tree(); // create a new Tree instance
oneTree.setGarden(mGarden); // set the garden of the tree. This is a basic, simple 
                            // Java method call. Nothing will magically add the tree
                            // to the garden collection of trees if you don't do 
                            // it explicitely
session.persist(oneTree); // now this Tree instance is persistent. 
                          // Its state will be written to the database at the 
                          // next flush. 
Garden findGarden = session.get(Garden.class, gardenId); 
    // returns the garden that has the specific ID. It's already in the session: 
    // you created and attached it to the session at the beginning. And you 
    // never added anything to its collection of trees 
```

# objective-c - \0 代表什么？

> ID：14461695
> 
> 赞同：23
> 
> 时间：2013-01-22T15:08:53.020
> 
> 标签：objective-c, c

> **可能重复：**
> [C 字符串中的 \0 符号是什么意思？](https://stackoverflow.com/questions/4711449/what-does-the-0-symbol-mean-in-a-c-string)

我是 iPhone 开发的新手。我想知道，`'\0'`在**C中是什么意思，以及在****目标 c**中的等价物是什么。

 *** * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-22T15:09:49.950

空字符`'\0'`（也`null terminator`），缩写为`NUL`，是一个值为 的控制字符`zero`。它在**C**和**目标 C中是一样的**

该字符在 C 中具有更重要的意义，它用作用于表示 a 结尾的保留字符`string`，通常称为以[空字符结尾的字符串](http://en.wikipedia.org/wiki/Null-terminated_string)

通过搜索**（第一个）NUL 字节来找到**[C 字符串](http://en.wikipedia.org/wiki/C_string)（包含字符并以字符结尾的数组）的长度。`'\0'`

 *** * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-22T15:12:29.173

在 C 中，`\0`表示一个值为零的字符。以下是相同的：

```
char a = 0;
char b = '\0'; 
```

这个转义序列的效用在字符串字面量中更大，它是字符数组：

```
char arr[] = "abc\0def\0ghi\0"; 
```

（请注意，此数组末尾有*两个零字符，因为字符串文字包含一个隐藏的隐式终端零。）*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T15:10:21.140

内部`'\0'`字符文字和字符串文字代表代码为零的字符。C 和 Objective C 中的含义是相同的。

为了说明，您可以`\0`在数组初始值设定项中使用来构造一个等效于以空字符结尾的字符串的数组：

```
char str1[] = "Hello";
char str2[] = {'H', 'e', 'l', 'l', 'o', '\0'}; 
```

通常，您可以使用*八进制*`\ooo`表示法来表示 ASCII 字符，其中s 代表最多三个八进制数字。*`o`*

 ** * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-22T15:39:57.043

对于 C 语言，`'\0'`与整数常量的含义完全相同`0`（相同的值零，相同的类型`int`）。

对于阅读代码的人来说，写作`'\0'`表明您打算使用这个特定的零作为字符。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-22T15:09:57.563

`\0`是零字符。在`C`它主要用于表示一个字符串的终止。当然，它是一个常规字符，可以这样使用，但这种情况很少见。

内置字符串操作函数的更简单版本`C`要求您的字符串以空值结尾（或以 结尾`\0`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T15:13:12.050

在 C`\0`中是一个字符字面常量存储到一个`int`数据类型中，表示值为 0 的字符。

由于 Objective-C 是 C 的严格超集，所以保留了这个常量。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2013-01-22T15:10:22.947

这意味着 '\0' 是`NULL`C 中的一个字符，不知道`Objective-C`但可能相同。*****

# scala - IntelliJ IDEA Scala 插件找不到错误

> ID：14461703
> 
> 赞同：4
> 
> 时间：2013-01-22T15:09:23.290
> 
> 标签：scala, intellij-idea

我刚刚尝试了带有 Scala 插件的 IntelliJ IDEA 12，但它没有在我的代码中找到并突出显示错误。例如，我可以在方法中编写任意代码，看起来一切都很好。IDEA不能做到这一点吗？还是我必须配置一些特殊的东西？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T16:09:09.803

IDEA 的 Scala 插件在对源代码进行类型检查时并不等同于编译器，但它做得很好。您想要做的一件事（除非您的硬件不是最新的和高性能的）是打开“Type-Aware Highlighting”。

如果您查看 IDEA 窗口的右下角（当您在启用 Scala 的情况下编辑项目时），您会看到两个图标之一，这两个图标都采用方括号中的文本形式. 该文本要么是黄色背景上的空白，要么`T`是绿色背景上的字母。单击它会在这两种状态之间切换。当`T`显示绿色时，类型识别突出显示处于打开状态。

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-30T16:18:16.407

只需更新插件版本即可解决问题。旧插件或安装/初始插件可能不包含相关支持。

在设置中确定 Scala 插件版本： ![在设置中确定 Scala 插件版本](../Images/9238a401bec076219d3d446a70a95446.png)

# php - 为什么我的变量在我将它从控制器传递到 Codeigniter 中的模型时损坏

> ID：14461705
> 
> 赞同：0
> 
> 时间：2013-01-22T15:09:35.903
> 
> 标签：php, codeigniter

我很烦。

我正在将一个变量从控制器方法传递给方法，并且不知何故它在传输中发生了变化。最初它被愚蠢地称为`$id`..所以我认为可能会发生一些可变干扰..但我已经更改了名称并且问题仍然存在。

谁能告诉我可能发生了什么？

这是代码..检查我的评论

```
public function firstFbLogin()
{
    ChromePhp::log('AJAX - first FB login');  // logs fine
    $username          = $this->input->post('username');
    $first_name        = $this->input->post('first_name');
    $last_name         = $this->input->post('last_name');
    $facebookId        = $this->input->post('facebookId');
    $email             = $this->input->post('email');
    $third_party_id    = $this->input->post('third_party_id');
    $gender         = $this->input->post('gender');
    $this->Member_model->mFirstFbLogin($username, $first_name, $last_name, $email, $facebookId, $third_party_id, $gender);
            // here comes the issue..
    $idFromFbDooDaDay = $this->Member_model->mFetchIdFromFacebook($facebookId);
    ChromePhp::log("Id found and going out of ajax - firstFbLogin is ". $idFromFbDooDaDay); // <<< this logs 232 which is what I am expecting
    $this->Member_model->mCreateProfilePage($username, $first_name, $last_name, $idFromFbDooDaDay, $third_party_id, $gender);
    echo "TRUE";
} 
```

但后来在我的 Member_model 我有这个（我会编辑出一堆）

```
 public function mCreateProfilePage($username, $first_name, $last_name, $gender, $idFromFbDooDaDay, $third_party_id)
    {
        // lets create a 'profile.html' used for FB object interaction
        $this->load->helper('file');
        ChromePhp::log('Id coming into mCreateProfilePage is ' . $idFromFbDooDaDay);  // this logs as D0k9f7LxtjIHMhGnbn6UkhDk3ao  WTF!?!
        $data = "<html>\n";
        $data .= "<head prefix=\"og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# profile: http://ogp.me/ns/profile#\">\n";
        $data .= "<meta property=\"fb:app_id\" content=\"32xxxxxxxxxxxx6\" />\n"; // my APP ID
        $data .= "<meta property=\"og:type\"   content=\"profile\" />\n";  // stays profile
        $data .= "<meta property=\"og:url\"    content=\"www.MYSITE.com/profiles/id-".$idFromFbDooDaDay."\" />\n"; // put the URL
        $data .= "<meta property=\"og:image\"  content=\"https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png\" />\n";  // url to bigPic

 ... edit ...

        $file_path = 'profiles/id-' . $idFromFbDooDaDay . '.html';

        if (!write_file($file_path, $data))
        {
             ChromePhp::log('Problem writing profile');
        }
        else
        {
             ChromePhp::log('Profile written to '. $file_path);
        }
    } 
```

那么，从控制器到模型的简单传递`$idFromFbDooDaDay = 232`是如何变成 27 个字符的噩梦的呢？`$idFromFbDOoDaDay = D0k9f7LxtjIHMhGnbn6UkhDk3ao`

它不可能是可变干扰..据我所知，没有其他东西接触到var。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:12:41.710

```
// $this->Member_model->
mCreateProfilePage($username, $first_name, $last_name, $idFromFbDooDaDay, $third_party_id, $gender);
// public function 
mCreateProfilePage($username, $first_name, $last_name, $gender, $idFromFbDooDaDay, $third_party_id) 
```

你的论点不匹配，这可能就是为什么:)

# django - 在 django 中设置模板表 td bgcolor

> ID：14461708
> 
> 赞同：0
> 
> 时间：2013-01-22T15:09:45.397
> 
> 标签：django, django-templates

我想在弹出的 django 前端页面中将表格单元格设置为不同的背景颜色。在 jquery 调用之后，弹出窗口从视图中返回。代码摘录如下：

```
<tr>
 <th>mySideHeader</th>  
 {% for key in FDI %}
   <td bgcolor={{key.1}}> {{key.0}}</td>
 {% endfor%}
</tr> 
```

我得到了 key.0 和 key.1 的有效值；key.1 是一种颜色编码，它根据 key.0 的值从绿色变为红色以及介于两者之间的颜色而变化。然而，我所有的单元格 bgcolors 看起来都像 django 默认的浅蓝色。如何在模板中覆盖它？

当我通过浏览器运行直接 url 以访问视图时，我可以看到 bgcolor 正确返回；但是当我通过单击站点正常运行时，django 默认颜色开始发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:05:52.883

问题是 bgcolor 在 html 5 中已弃用。因此，通过使用内联样式，我可以根据 django 模板中给定的 {{key.1}} 使背景颜色发生变化。

# c# - 在单元测试中对每个断言运行随机数

> ID：14461709
> 
> 赞同：1
> 
> 时间：2013-01-22T15:09:46.200
> 
> 标签：c#, unit-testing

我正在创建一个单元测试，它将公司信息测试到系统中，但我可以在我的测试中测试各种断言。

这是我写的代码：

```
public static Random randnum = new Random();
private string _company = DateTime.Now.ToString("dd/MM/yy ") + ("company") + randnum.Next().ToString(); 
```

基本上，我只是想获得一个随机数，以便在公司上市的每个断言中生成一个随机数。所以我写错了还是我忘记了一块？

我正在使用 MBUnit。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:19:35.417

重写您的单元测试以使用以下内容。

```
public static IEnumerable<object[]> Numbers
    {
        get
        {
            List<object[]> testCases = new List<object[]>();
            Random random = new Random();
            testCases.AddRange(
                (from x in new[]
                {1, 2, 3, 4, 5, 6, 7, 8}
                select new object[] {x})
                .OrderBy(x=>random.Next()));
            return testCases;
        }
    }

    [TestCaseSource("Numbers")]
    public void CreateApplication(
        int number
        )
    {
         string company = DateTime.Now.ToString("dd/MM/yy ") + ("company") + number.ToString();

    } 
```

我怀疑您的问题与不变性（不可变对象）有关。您正在设置具有初始值的私有 _company 字段。调用此值不会重新生成随机数，而是使用实例化此类时创建的值。

这是一个很好的链接，我发现它对随机数很有趣。

[如何播种随机类以避免获得重复的随机值](https://stackoverflow.com/questions/1785744/how-do-i-seed-a-random-class-to-avoid-getting-duplicate-random-values)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:22:47.820

[我认为您可以在此处](http://csharpindepth.com/Articles/Chapter12/Random.aspx)找到有关 Random 函数工作方式的更多信息

Random 类不是真正的随机数生成器。它是一个伪随机数生成器。Random 的任何实例都有一定数量的状态，当您调用 Next（或 NextDouble 或 NextBytes）时，它将使用该状态向您返回一些看似随机的数据，相应地改变其内部状态，以便在下一次调用时您将得到另一个明显随机的数字。

# spring.net - 从文件夹动态加载 Spring.NET 配置文件

> ID：14461712
> 
> 赞同：1
> 
> 时间：2013-01-22T15:09:54.620
> 
> 标签：spring.net

我正在处理 spring 的配置问题，与使用基于组件的架构以及 spring 如何加载它的配置文件有关。

问题是每个组件都会向 spring 上下文添加信息，但是为了从程序集中加载新配置，您必须编辑 web.config 并添加该组件的配置资源（或至少编辑现有资源文件并从程序集中导入组件的配置）。web.config 由另一个组“拥有”，无法编辑。

我想要的是以下内容：

(1)在App_Config中为我的spring文件创建一个特定的目录

(2) 如果从文件夹中添加/删除 XML 文件，则向该目录添加一个文件监视程序以重新加载应用程序（Sitecore 已经这样做了）

(3) 如果我部署一个组件（称为 xyz），我会将一个 xyz.spring.xml 文件部署到该文件夹​​，其中将包含一个用于组件内正确配置的单个导入语句，例如：<import resource=" assembly://PageTypes.Service/PageTypes.Service/PageTypes.xml"/> 或者如果我需要用于测试/调试配置的配置 <import resource="assembly://PageTypes.Service/PageTypes.Service/PageTypes.DEBUG. xml"/>

（4）添加一些代码告诉spring（我猜是WebApplicationContext的专门实现），它加载文件夹中的所有文件并将它们作为配置资源处理。我们目前拥有的地方

<resource uri="~/App_Config/xyz.xml" />

我想要类似的东西

<resourceFolder path="~/App_Config/Spring" />

任何人都知道如何做到这一点，或者如果已经存在类似的东西我可以查看？

...我也愿意接受其他可以让我得到我想要的建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:00:52.293

好的，所以我想我有一个答案......

由于我使用的是这种“插件”风格的架构，我需要 spring 从给定文件夹中加载所有配置文件（我会观察更改以重新加载应用程序上下文）。filewatcher 元素已经在我使用的 CMS 中可用（感谢 Sitecore），所以我只需要设法加载配置。

所以，我所做的是创建一个 IResource 的实现，它允许我使用自定义协议来加载 spring 资源。

第 1 步 - web.config 更改

首先我创建 resourceHandler 部分：

```
<sectionGroup name="spring">
   <section name="context" type="Spring.Context.Support.WebContextHandler, Spring.Web"/>
   <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core" />
   <section name="resourceHandlers" type="Spring.Context.Support.ResourceHandlersSectionHandler, Spring.Core"/>
</sectionGroup> 
```

然后我为我的自定义资源处理程序添加代码

```
<spring>
   <resourceHandlers>
      <handler protocol="dir" type="TI.Base.Spring.DirResourceHandler, TI.Base"/>
   </resourceHandlers>
<context>
   <resource uri="dir://~/App_Config/Spring" />
</context>
</spring> 
```

接下来，我创建了 DirResourceHandler——它非常接近 Spring 提供的 StringResource 模型——它的核心在于初始化：

```
/// <summary>
/// Load all of the resource files in the directory, and create a virtual file importing all of those files
/// </summary>
/// <param name="resourceName"></param>
private void Initialize(string resourceName)
{
    string resourceNameWithoutProtocol = GetResourceNameWithoutProtocol(resourceName).TrimEnd(new [] {'/'});

    Path = HttpContext.Current.Server.MapPath(resourceNameWithoutProtocol);
    DirectoryInfo = new DirectoryInfo(Path);

    IEnumerable<FileInfo> files = DirectoryInfo.EnumerateFiles("*.xml");
    StringBuilder sb = new StringBuilder();

    sb.Append("<objects>");

    foreach (FileInfo xmlFile in files)
    {
        sb.Append(string.Format("<import resource=\"file://{0}/{1}\"/>", resourceNameWithoutProtocol, xmlFile.Name));
    }
    sb.Append("</objects>");

    Contents = sb.ToString();
} 
```

你们中的任何一个 Spring 大师都可以评估这个解决方案并告诉我它是否可行吗？

# mysql - 没有端点的 MySQL BETWEEN

> ID：14461713
> 
> 赞同：15
> 
> 时间：2013-01-22T15:09:56.643
> 
> 标签：mysql, sql

MySQL 的 BETWEEN 包括两个端点之间的所有结果**以及端点**。

> 如果 expr 大于或等于 min 并且 expr 小于或等于 max，则 BETWEEN 返回 1，否则返回 0。这相当于表达式 (min <= expr AND expr <= max) 如果所有参数都是同类型。参考[- http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)

是否有一个`REALLYBETWEEN`不包括端点的函数，或者我被困在使用`min < expr AND expr < max`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T15:13:20.617

我想你可以自己写成：

```
where val > start and val < end 
```

之间是：

```
where val >= start and val <= end 
```

至于索引，前两个应该正确使用索引并且与 相同`between`，假设 start 和 end 是常量。我不确定最后一个版本是否会。

如果 val 是一个复杂的表达式，请考虑以下内容：

```
select *
from (your query here) t
where t.val > start and t.val < end 
```

这应该只评估`val`一次。我认为其他形式会对其进行两次评估。

或者，您可以这样做：

```
where val between start and end and val not in (start, end) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:16:28.117

请注意，这`BETWEEN`是一个表达式，而不是一个函数。这只是一种编码方便，意思就是所说的。没有性能优势。

要排除端点，您必须自己编写代码。

# c# - 当您的表名与 datacontext 不同时获取表类型

> ID：14461716
> 
> 赞同：1
> 
> 时间：2013-01-22T15:09:58.207
> 
> 标签：c#, linq, datacontext

如果我们有表，我们可以得到表名`type`。像这儿

```
DataContext dc = new DataContext();
var tableName = dc.Mapping.GetTable(type).TableName.ToString(); 
```

就我而言，我有表名并想要获取表类型。但如何？

**注意**：在我的情况下，表名和类型是不同的（拼写）`DataContext`。所以我无法将表名转换为如下类型。

```
Type tableType = Type.GetType("dbo." + tableName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:07:43.257

我假设您找到了解决方案，但如果没有，请让我详细说明。

我只是想指出我最终使用了 DbContext ( [http://msdn.microsoft.com/en-us/data/jj729737.aspx](http://msdn.microsoft.com/en-us/data/jj729737.aspx) ) 而不是 DataContext。我尝试创建一个派生类来基本上重命名它，但这没有用。DataContext 需要掌握所有属性元数据（例如，[Column]）。如果我费心这样做，我不妨重新编码模型（这很糟糕，因为它是代码重复）。

就我而言，我的数据库是由 ASP.NET Web API 项目生成/管理的。我与一个单独的（最终独立的）类库共享我的模型和数据库。这可能会导致一些问题，因此请确保禁用模型兼容性检查：[如何在 Entity Framework 4.3 中禁用模型兼容性检查？](https://stackoverflow.com/questions/10623260/how-can-i-disable-model-compatibility-checking-in-entity-framework-4-3).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:53:56.643

```
 var db = new DataContext();
    var tables = db.Mapping.GetTables();
    var tableTypeName = tables.Where(r => r.TableName == "yourTableName").Select(r => r.RowType.Name).FirstOrDefault(); 
```

# java - 取消上传文件。GWT

> ID：14461722
> 
> 赞同：0
> 
> 时间：2013-01-22T15:10:11.813
> 
> 标签：java, gwt, gwtupload

我使用[gwtupload](http://code.google.com/p/gwtupload/) lib 在服务器上上传文件。有一个功能：取消文件上传。但是我应该如何处理 Java 服务器上的操作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:34:37.437

与代码相关的 gwtupload 显示了此场景的不同服务器端处理示例。

您是否尝试过框架支持的取消回调？您可以在此处找到示例 -http://code.google.com/p/gwtupload/source/search?q=cancel&origq=cancel&btnG=Search+Trunk

# c# - 使用“方法隐藏”在哪些场景下有意义？

> ID：14461725
> 
> 赞同：9
> 
> 时间：2013-01-22T15:10:20.293
> 
> 标签：c#, methods, method-hiding

> **可能的重复：**
> [隐藏在 c# 中的方法和一个有效的例子。为什么它在框架中实现。？什么是真实世界的优势。？](https://stackoverflow.com/questions/1193848/method-hiding-in-c-sharp-with-a-valid-example-why-is-it-implemented-in-the-fram)

我想知道方法隐藏在 c# 中如何有用？如果您深入了解这个概念，您会发现方法隐藏**令人困惑**，并驱使我们采用**意大利面条式代码**风格。这有一些原因：

1-如果您在派生类中需要一个新方法，您可以在派生类中定义一个具有新名称的新方法。

2-在使用向上转换时以多态方式使用，将无法实现预期的行为，这可能会造成混淆。

*（特别是如果基类和派生类位于不同的库中并且您希望在代码中的某个位置对它们进行多态使用，这种奇怪的行为可能会非常明显和明显）*

```
class Base
{  
    public void Method() { Console.WriteLine("I am Base Class"); }
}
class Derived: Base
{
    public new void Method() { Console.WriteLine("I am Derived Class");}
}
class Program
{
    static void Main(string[] args)
    {
        Base C = new Derived();
        C.Method(); //output:"I am Base Class"
    }
} 
```

这样的行为可能会令人困惑，但如果我们在“ **Base** ”中使用“ *virtual* ”，在“ **Derived ”中使用“** *override* ” （我的意思是多态用法），则输出为：“I am Derived Class”。这个输出是我认为我们大多数人所期望的。

 ******换句话说，我相信在层次结构中，大多数开发人员期望在派生类中重写方法而不是想要隐藏基类实现的新方法。*

我不明白为什么在c#语言中有这么一个没有优势的坏东西？至少我想知道隐藏在 c# 中的方法的最佳用法是什么？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T15:15:22.467

> 如果您需要在派生类中使用新方法，您可以在派生类中使用新名称定义新方法

不总是。考虑派生一个在其他库中公开的类的情况，您无法控制该类。你向你的类添加一些方法。

后来，您所依赖的库的开发人员添加了一些增强功能，并使用与您添加到派生类中的方法之一相同的名称。在这种情况下隐藏只是保留现有功能。如果您更改方法名称，则必须更新整个代码库，并且会破坏与使用您的库的任何人的兼容性。相反，您可以隐藏现有方法并同时保持与您的依赖项和您所依赖的库的兼容性。

就个人而言，我使用方法隐藏最多的情况是在多个类上实现克隆操作时；如果没有此功能，我无法更改返回类型以匹配类的返回类型：

```
class A
{
    public A Clone()
    {
        return CloneImpl();
    }

    protected virtual A CloneImpl()
    {
        return MemberwiseClone();
    }
}

class B : A
{
    new public B Clone()
    {
        return (B)CloneImpl();
    }
} 
```

受保护的虚拟方法意味着无论`Clone()`您调用哪个方法，您仍然可以返回正确类型的对象。但是，您获得的引用类型将取决于您用来调用的引用类型`Clone()`。这允许：

```
B b = new B();
B b2 = b.Clone(); // Did not have to cast, thanks to the hiding method.

A a = b;
A a2 = a.Clone(); // Still returns a B, only typed as an A. 
```*****

# ios - 如何使用搜索字符串预加载 UISearchDisplayController

> ID：14461731
> 
> 赞同：0
> 
> 时间：2013-01-22T15:10:45.887
> 
> 标签：ios, uisearchbar, uisearchdisplaycontroller

我正在尝试使用 searchString 预加载 UISearchBar。

在当前设置中。我在 UITableViewController 中使用 UISearchDisplayController。

**我使用的第一种方法**是在以下方法中设置搜索字符串：

```
- (void) presetSearchDisplayControllerWithString:(NSString*)searchString{
    [self.searchDisplayController setActive:YES animated:NO];
    [self.tableView setContentOffset:CGPointMake(0, 0)];
    self.searchBar.text = searchString;
    self.searchFetchedResultsController = [self   createFetchedResultsControllerWithSearchTerm:searchString];
} 
```

有用。UISearchbar 显示搜索字符串，隐藏原始 tableView 和 TableViewIndex。但是，如果我按下 searchBar 上的取消按钮，它会崩溃：

***** -[UISearchDisplayController setActive:animated:], /SourceCache/UIKit_Sim/UIKit-2372/UISearchDisplayController.m:682 中的断言失败** **由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“搜索内容导航控制器不得在 -setActive:YES 和 -setActive:NO 之间更改”* ****

 ***第二个变量也不起作用

```
- (void) searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller {
    [self.searchDisplayController.searchBar setText:@"rune"];
} 
```

好吧，如果您点击搜索栏，它就会起作用。但在你完成之前，它只显示一个常规的 tableView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:22:35.763

您是否尝试过这样的事情（仅基于引发的异常）：

```
[self.searchDisplayController setActive:NO animated:NO];
self.searchBar.text = searchString;
[self.searchDisplayController setActive:YES animated:NO];
[self.tableView setContentOffset:CGPointMake(0, 0)];
self.searchFetchedResultsController = [self createFetchedResultsControllerWithSearchTerm:searchString]; 
```***

# f# - 当 F# 记录的字段被声明为私有时，奇怪的可访问性范围

> ID：14461734
> 
> 赞同：7
> 
> 时间：2013-01-22T15:10:58.860
> 
> 标签：f#

当 F# 记录的字段部分被声明为私有时，我刚刚注意到一种相当反直觉的行为。（这与[是否可以将记录的字段设为私有？或将记录的成员设为私有？](https://stackoverflow.com/questions/12389308/is-it-possible-to-make-a-field-of-a-record-private-or-to-make-a-member-of-recor/12389894#12389894)）

在这个例子中...

```
type MyRec = 
    private  // Fields declared private, or at least I thought so.
        { a : int
          b : int }
    member x.A = x.a
    member private x.Both = x.a + x.b
    static member CreateMyRec(a, b) = { a = a; b = b }

let foo = MyRec.CreateMyRec(1,2)
let bar = foo.a     // No error. Huh?
let baz = foo.Both  // Error: not accessible. 
```

...正如预期的那样，私有成员`Both`在类型声明范围之外是不可访问的。但是，该字段`a`是可访问的。

如果将 MyRec 放入模块中，则这些字段将成为该模块的私有字段。这就是您期望模块中的顶级声明的行为方式，但我希望在类型中声明为私有的任何内容都对该类型私有，而不是对其封闭模块私有。

这种行为真的很奇怪，还是我在这里的推理中遗漏了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T15:26:41.090

据我所知，这是一个记录不足的功能。但是，规范的第 10.5 节[Accessibility Annotations](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc335818992)指出：

> 类型、模块或模块中的类型表示上的私有表示“模块私有”。</p>

“类型表示”是与记录字段相关的部分。

# xml - 主导基线：文本前边缘等效 dy 变换

> ID：14461735
> 
> 赞同：1
> 
> 时间：2013-01-22T15:11:09.173
> 
> 标签：xml, svg, coreldraw

我想知道是否有任何不使用`dominant-baseline:text-before-edge`但达到相同效果的解决方法。

如果我说将文本放置到 x=0 y=0 坐标，我希望该点是文本边界框（绿色）的左上角，而不是第一个字母基线（红色）的开始：

![在此处输入图像描述](../Images/61c5f2945c74bd6ad8a387fe9daed753.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:07:43.327

我在这里找到了一个想法：http: [//nelsonslog.wordpress.com/2011/09/12/svgtext-baseline-considered-harmful/](http://nelsonslog.wordpress.com/2011/09/12/svgtext-baseline-considered-harmful/)

在我的情况下，设置是关于：

> dy=".84em"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:33:19.603

有什么问题`dominant-baseline`？不幸的是，`dy='.84em'`hack 取决于实际使用的字体的精确指标，如果你使用的是`sans-serif`无法准确预测的字体。我与 a在我所针对的所有平台上都运行良好的`dominant-baseline: central`一起使用。`dy='50%'`

一个很想使用`alignment-baseline`，但支持参差不齐。

# visual-studio-2010 - Visual Studio 单元测试：SetUp 和 TearDown

> ID：14461737
> 
> 赞同：97
> 
> 时间：2013-01-22T15:11:19.793
> 
> 标签：visual-studio-2010, unit-testing, mstest

Visual Studio Ultimate 2010 单元测试中的替代方案是 Nunit 中的 [SetUp] 和 [TearDown]。在 Nunit 中，你可以想象 setup 和 teardown 方法是我们类中测试的构造函数和析构函数。

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-01-22T15:18:04.503

`[TestInitialize]`在每次测试之前运行一个带有注释的方法。每次`[TestCleanup]`测试之后也是如此。

`[ClassInitialize]`并`[ClassCleanup]`在 TestClass 内的“套件”测试之前和之后运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T15:18:13.417

Visual Studio 将使用 MSTest，即微软的单元测试框架，它类似于 NUnit。实际上，它们中的大多数概念相似，但语法不同。

为了查看比较，xUnit（另一个单元测试框架）的创建者在这里有一个列表：

[https://xunit.net/docs/comparisons](https://xunit.net/docs/comparisons)

更具体地说，您要求的`TestInitialize`是 MSTest 等效于 NUnit 的`Setup`，并且与`TestCleanup`相同`TearDown`。

需要注意的一点是，如果您尝试进行自动化单元测试或某种持续集成，我会继续使用 NUnit。各种`*unit`框架比 MSTest 更受青睐的主要原因是，您*必须*在运行测试的机器上拥有 Visual Studio 的副本。对于您自己的本地机器来说很好，对于 CI 服务器来说则不同。Visual Studio 是一个程序的猪，将它安装在服务器上（通常应该尽可能轻巧和快速），只是为了运行测试有点烦人。

# wordpress - 如何将网址中的照片添加到wordpress？

> ID：14461738
> 
> 赞同：0
> 
> 时间：2013-01-19T01:33:26.943
> 
> 标签：wordpress

我的代码从 url 中检索照片并使用 file_put_contents 将它们添加到当前目录，但我需要将它们添加到 /wordpress/wp-content/uploads 中 wordpress 保存手动上传的文件的位置。

```
$Address = "www.xxx.com/" . $file;
$ch = curl_init();
curl_setopt($ch, CURLOPT_POST, 0);
curl_setopt($ch, CURLOPT_URL, $file);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$url = curl_exec($ch);
curl_close($ch);
$location = "/wordpress/wp-content/uploads/2013/a.jpg"; 
file_put_contents($location, file_get_contents($url));
if(! function_exists('wp_upload_dir'))
                {
                    define('WP_USE_THEMES',false);
                    require 'wordpress/wp-load.php';
                }
    $upload_dir = wp_upload_dir(); 
    echo $upload_dir['path'];
    echo $upload_dir['url'];
    echo $upload_dir['subdir']; 
```

我什至在我的索引文件中复制了以下部分，但它没有解决问题

```
 if(! function_exists('wp_upload_dir'))
                    {
                        define('WP_USE_THEMES',false);
                        require 'wordpress/wp-load.php';
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:52:09.890

一些想法：

```
$uploads = wp_upload_dir();
$upload_path = $uploads['baseurl']; // get uploads dir

rename("a.jpg", trailingslashit($upload_path) . "a.jpg"); // move 
```

参考：[http](http://codex.wordpress.org/Function_Reference/wp_upload_dir)
://codex.wordpress.org/Function_Reference/wp_upload_dir 参考：http : [//php.net/manual/en/function.rename.php](http://php.net/manual/en/function.rename.php)

**更新**

我猜你在 WP 之外工作。尝试在您的代码之前获取`wp_upload_dir()`所有 WP 功能：

```
if ( ! function_exists('wp_upload_dir'))
{
    define('WP_USE_THEMES', false);
    require PATH_WP_DIR . '/wp-load.php';
    // ex: require '/wordpress/wp-load.php';
} 
```

# ms-access - 在访问中使用日期/时间字段的 MIN 和 MAX

> ID：14461740
> 
> 赞同：0
> 
> 时间：2013-01-22T15:11:24.973
> 
> 标签：ms-access, datetime

我有一个包含以下字段的表

```
Name:
Location:
Start Time:
End Time:
Total Time: 
```

名称、位置、开始和结束时间是从另一个表中提取的，总时间计算开始时间和结束时间之间的差异，以给出在该位置花费的总时间。使用查找用户在该位置的 MAX 和 MIN 时间的查询来提取开始和结束时间。例如，一个典型的结果是：

```
Name: John
Location: A
Start Time: 08:00
End Time: 10:00
Total Time: 2:00 
```

问题是用户可能在一个位置，去另一个位置，然后回到同一个位置。例如，另一条记录可能是：

```
Name: John
Location: B
Start Time: 09:00
End Time: 09:30
Total Time: 0:30 
```

因此，用户将在 08:00-09:00 到达位置 A，然后在 09:00-09:30 在 B 中，然后在 09:30-10:00 回到 A。由于开始和结束时间只是 MIN 和 MAX，因此 min 始终是他们第一次进入该位置，而 end 是他们最后一次进入该位置。有没有办法修改时间计算以考虑在位置 B 花费的 0:30 分钟并从在位置 A 花费的时间中扣除这一点。另一个注意事项是最多可能有 5 个位置，用户可以返回并全天在他们每个人之间来回奔波。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:33:58.240

这是一个想法。以下查询返回每个用户在每个位置的时间量：

```
select name, location,
       sum(datediff(s, starttime, endtime)) as TotalTimeInSeconds
from t
group by name, location 
```

如果您没有所有开始时间和结束时间的单独记录，则需要返回原始表。

如果您无法返回原始数据，那么您可以通过繁琐的自连接来做到这一点：

```
select t.name, t.location, 
       min(TotalTime) - sum(t2.totalTime)
from t left outer join
     t t2
     on t.name = t.name and
        t.location <> t2.location and
        t2.starttime between t.starttime and t.endtime
group by t.name, t.location 
```

但是，我不建议这样做，因为它需要大量处理。

# websphere-mq-fte - 如何监控 FTE 代理状态

> ID：14461742
> 
> 赞同：1
> 
> 时间：2013-01-22T15:11:32.867
> 
> 标签：websphere-mq-fte

我想监控 FTE 代理的状态，如果 fte 代理关闭或不可用，那么我想发送电子邮件或某种警报说代理关闭。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:32:21.650

使用任何方便的监控程序来检查代理命令队列上的输入句柄状态。如果没有输入句柄，则代理已关闭。如果队列有输入句柄并且您想知道代理是否响应，您可以观察代理主题的定期状态更新，或向其发送状态查询消息。

# cakephp - CakePHP 2.2.5 find('list') 将所有 id 值显示为 1

> ID：14461743
> 
> 赞同：2
> 
> 时间：2013-01-22T15:11:36.423
> 
> 标签：cakephp, cakephp-2.2

在将 1.3 CakePHP 应用程序升级到 2.2.5 的过程中，我在`find('list')`.

有谁知道为什么我的`id`值是 1 而不是存储在数据库中的增量值，即 1、2、3、4、5？

当我运行控制器代码（如下所示）时，我得到：

```
Array
(
     [1] => 5
) 
```

我想要得到的是：

```
Array
(
     [1] => 1 (urgent)
     [2] => 2
     [3] => 3
     [4] => 4
     [5] => 5

) 
```

如果我将其更改为`find('all')`，我会得到：****请注意，该`[id]`值始终为 1* ***

```
Array
(
[0] => Array
    (
        [Priority] => Array
            (
                [id] => 1
                [description] => 1 (urgent)
            )

    )

[1] => Array
    (
        [Priority] => Array
            (
                [id] => 1
                [description] => 2
            )

    )

[2] => Array
    (
        [Priority] => Array
            (
                [id] => 1
                [description] => 3
            )

    )

[3] => Array
    (
        [Priority] => Array
            (
                [id] => 1
                [description] => 4
            )

    )

[4] => Array
    (
        [Priority] => Array
            (
                [id] => 1
                [description] => 5
            )

    ) 
```

)

**已经尝试过**

*   将 Priority 重命名为 PriorityLevel 以防 Priority 是 CakePHP 中的保留字。

请参阅下面的相关代码：

**控制器代码**

```
$priorities = $this->Ticket->Priority->find('list', array('fields' => array('Priority.id', 'Priority.description'),'order' => 'Priority.description')); 
```

**型号代码**

```
class Ticket extends AppModel {
public $name = 'Ticket';
public $belongsTo = array('Affect', 'Priority', 'User', 'Status');
public $validate = array(
    'priority_id' => array(
        'rule' => 'notEmpty',
        'message' => 'Please assign a priority to this ticket'
    )
);
}

class Priority extends AppModel {
public $name = 'Priority';
} 
```

**查看代码**

```
echo $this->Form->input('Ticket.priority_id', 
                            array('type' => 'select',
                            'empty' => true,
                            'tabindex' => 2)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:15:50.610

**答：**将表中`id`字段的数据类型由改为。`priorities``tinyint(1)``tinyint(2)`

**说明：** CakePHP 似乎解释`tinyint(1)`为布尔值。但是，我使用它是因为我知道优先级列表只会从 1 到 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:12:51.210

如果 Priority 有很多票，那么您应该从`Priority.php`模型开始并添加以下内容：

```
public $hasMany = array(
    'Tickets' => array(
        'className' => 'Ticket',
        'foreignKey' => 'priority_id',
            )
); 
```

然后你的`Ticket.php`模型类看起来不错，但是，我会用以下方式编写它：

```
public $belongsTo = array(
    'Priority' => array(
        'className' => 'Priority',
        'foreignKey' => 'priority_id',
    )
); 
```

您必须确保`Tickets`Db 中的表有一个名为的列`priority_id`，以便我们拥有正确的关系集。

然后在您的票务控制器中，这样的东西应该很容易工作：

```
$priorities = $this->Ticket->Priority->find('list'); 
```

如果这不起作用，如果你想压缩你的模型类和控制器并将它们发送给我，我会很高兴看到它。为了使事情更容易，您可以发送优先级和票证表的结构。

# asp.net - web.config 中的 URL 重写

> ID：14461745
> 
> 赞同：0
> 
> 时间：2013-01-22T15:11:40.880
> 
> 标签：asp.net, iis, url-rewriting, web-config

我刚刚开始探索将 url 重写规则添加到我的 web.config 中。

我使用了 2 条规则：

1）从 *.mydomain.com 到 www.mydomain.com 的规范 url 和 2）从 Http 到 Https。

```
<rules>
      <rule name="Redirect to www" stopProcessing="true">
        <match url=".*" />
        <conditions>
          <add input="{HTTP_HOST}" pattern="^mydomain.com$" />
        </conditions>
        <action type="Redirect" url="http://www.mydomain.com/{R:0}" redirectType="Permanent" />
      </rule>
      <rule name="Redirect HTTP to HTTPS" stopProcessing="true">
        <match url=".*"/>
        <conditions>
          <add input="{HTTPS}" pattern="^OFF$"/>
        </conditions>
        <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="SeeOther"/>
      </rule>
    </rules> 
```

我已经按照示例进入了这个阶段，但如果有人能感觉到为我检查一下，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:18:12.943

这些对我来说一目了然。

我建议在您的本地环境中测试规则。请记住，Firefox 喜欢缓存这些内容，因此如果您更改规则，则必须清除缓存。

# c# - DataGrid 水平绑定

> ID：14461746
> 
> 赞同：0
> 
> 时间：2013-01-22T15:11:43.150
> 
> 标签：c#, wpf, silverlight

标题可能有误，但不是，请继续阅读。

我需要一个动态数据网格，所以我使用这种方法来创建列，该方法获取要显示的“选定”列：

```
 public void ConfigureGridColumns()
    {
        App.Instance.MainWindow.grdDetail.mainGrd.Columns.Clear();

        var stats = new List<Statistic>();
        stats.AddRange(App.Instance.Manager.PersonalizeStatistics.OrderBy(x => x.Index).Where(x => x.Selected).Select(x => x.Statistic));

        foreach (var stat in stats)
        {
            var column = new DataGridTextColumn
            {
                Header = stat.Name,
                Binding = new Binding(stat.Key)
            };
        }
    } 
```

现在，我不想创建一个包含所有列的模型，因为我有超过 150 个动态列。

因此，我通过构建自定义 DataTable 来动态生成 ItemsSource，其中行的列由键映射，如前所述：

```
 private void ConfigureGridSource()
        {
        var dt = new DataTable("stats");

        foreach (var player in App.Instance.Manager.Players.Values.Take(5))
        {
            var row = dt.NewRow();
            foreach (var stat in stats)
            {
                if (!dt.Columns.Contains(stat.Statistic.Key))
                    t.Columns.Add(stat.Statistic.Key, typeof(StatisticPersonalizedValue));

                var persStat = new StatisticPersonalizedValue(stat);
                persStat.Value = player.Statistics[stat.Statistic.Key];

                row[stat.Statistic.Key] = persStat;
            }
            dt.Rows.Add(row);
        }
        grdDetail.mainGrd.ItemsSource = CollectionViewSource.GetDefaultView(dt.DefaultView);
        } 
```

问题是：

和

```
 Binding = new Binding(stat.Key) 
```

我将 StatisticPersonalizedValue 的命名空间作为文本

和

```
 Binding = new Binding("Value") 
```

我得到空字符串（值是 StatisticPersonalizedValue 的属性，在第二种方法中被赋值）

我正在使用模型，因为我也有正负值的设置器，以防万一，您对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:14:32.960

好的，解决了。

我必须添加一个自定义转换器

```
Binding = new Binding(stat.Key) { Converter = new StatisticPersonalizedValueConverter() }

public class StatisticPersonalizedValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is StatisticPersonalizedValue)
        {
            return (value as StatisticPersonalizedValue).Value;
        }
        return string.Empty;

    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

这成功了。

# python - 使用 else 子句过滤 (numpy.where)

> ID：14461747
> 
> 赞同：2
> 
> 时间：2013-01-22T15:11:44.803
> 
> 标签：python, python-3.x

我敢肯定它已经被问过了，它会得到一个“只使用生成器理解！” 响应，但以防万一它在某个地方的标准库中，而我只是在 itertools 中找不到它......

在 Python 3.x 中，是否有以下功能替代方案：

```
(x if c else y for c, x, y in zip(cs, xs, ys)) 
```

例如，`numpy.where(cs, xs, ys)`正是这样做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:07:41.227

这是一个生成器表达式，所以只需打开它：

```
cs = [True, False, True]
xs = [1, 2, 3]
ys = [10, 20, 30]

def generator(cs, xs, ys):
    for c, x, y in zip(cs, xs, ys):
        yield x if c else y

print(list(x if c else y for c, x, y in zip(cs, xs, ys)))
print(list(generator(cs, xs, ys))) 
```

输出：

```
[1, 20, 3]
[1, 20, 3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:27:57.920

嗯，这样的事情怎么办？（我在 Python 2.7.3 中，但我认为这并不重要。）

```
>>> import itertools as it
>>> a=[1,2,3]
>>> b=[10,20,30]
>>> cond=[True, False, True]
>>> func=lambda c,x,y: x if c else y
>>> test=it.starmap(func, it.izip(cond,a,b))
>>> test.next()
1
>>> test.next()
20
>>> test.next()
3 
```

# oracle9i - 无法在 Oracle 9i 中使用 If exists 语句

> ID：14461763
> 
> 赞同：0
> 
> 时间：2013-01-22T15:12:43.910
> 
> 标签：oracle9i

我有以下代码：

```
INSERT INTO Table_Delete (name)
SELECT su_name
FROM   Student_Data
where class = '12'

MINUS
SELECT name
  FROM Students
  WHERE roll_num in (select roll_num from RollNumber
                       where class = '12');

COMMIT;
exit 
```

我需要更新此代码以检查 Table_Delete = Table_2 的内容是否为空 Table_delete。我无法通过 If exists 命令执行此操作。

谁能帮我解决这个问题？我正在使用 Oracle 9i。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:18:46.383

```
select count(*) into ws_count from x where table_delete = table_2;
if(ws_count = 1) then 
```

这边走

# codeigniter - 分页 CodeIgniter：页面，错误的链接

> ID：14461764
> 
> 赞同：1
> 
> 时间：2013-01-22T15:12:47.033
> 
> 标签：codeigniter, doctrine, pagination

我正在使用 codeigniter 的分页类：

在控制器中有这个：

```
$config['base_url'] = 'http://localhost/project/index.php/municipio/';
$config['total_rows'] = count($this->data['municipios']); 
$config['per_page'] = 2; 
$config['uri_segment'] = 2;
$config['first_link'] = false ;
$config['last_link'] = false ;
$config['prev_link'] = false;
$config['next_link'] = false;
$this->pagination->initialize($config); 
```

这就是我调用模型函数来获取 de DB 行的方式：

```
$this->data['municipios'] =  $this->Municipio_model->obtenerMunicipiosPaginacion($pagina,$config['per_page']); 
```

这就是我在模型中的内容：

```
function obtenerMunicipiosPaginacion( $pagina , $registros_por_pagina )
{

    $limite_inferior = ($pagina * $registros_por_pagina) - $registros_por_pagina;
    $limite_superior = $registros_por_pagina;
    $query = 'SELECT m FROM Entities\Municipio m ORDER BY m.nombre ASC';
    $create_query = $this->doctrine->em->createQuery($query)->setFirstResult($limite_inferior)->setMaxResults($limite_superior);
    $variable = $create_query->getResult();
    return $variable;
} 
```

在视图中，该类正在打印这样的链接，这很好，但是：

1 2 3

1 个链接完美运行，它将我带到页面 municipios/1

2 链接完美运行，它将我带到页面 municipios/2

3 链接带我到页面 municipios/6

我确定问题不在于数据库查询，必须是分页类的一些配置。

我经常看到这个问题，但没有看到解决我问题的答案。

***编辑：***

**它现在似乎工作了，我添加了这一行：**

```
$config['use_page_numbers'] = TRUE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:04:49.000

编辑：

它现在似乎工作了，我添加了这一行：

```
$config['use_page_numbers'] = TRUE; 
```

# mysql - 检查 CASE 语句中的空值

> ID：14461765
> 
> 赞同：-1
> 
> 时间：2013-01-22T15:12:54.827
> 
> 标签：mysql, sql, database, case

我正在尝试使用 case 语句检查空值，但它没有正确执行检查，以下是我尝试执行此操作的不同方法。

```
CASE id WHEN NULL THEN 'id is null' END;
CASE id WHEN (id is NULL) THEN 'id is null' END;
CASE id WHEN isnull(id) THEN 'id is null' END; 
```

他们似乎都没有按照我想要的方式工作。第一个根本不起作用，最后两个正确识别 id 具有空字符串值的行，但看不到 id 为空的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:13:57.293

您将要使用：

```
CASE 
   WHEN id is NULL or id = ''  -- if the value is an empty string check for that
   THEN 'id is null' 
   ELSE 'id is not null' 
END 
```

另一种方法是使用`inline IF`语句（*如果您感兴趣的话`CASE`*）

```
SELECT IF(ID IS NULL, 'id is null' , 'id is NOT null') 
```

# javascript - Javascript错误“：”预期

> ID：14461767
> 
> 赞同：-3
> 
> 时间：2013-01-22T15:12:55.733
> 
> 标签：javascript

Helo all im 将类似 JSON 的数据格式设置为 ne 由名为 fusioncharts 的 JS 库使用。

底部是一个名为“数据”的部分，其中第二个对象发生错误：`totalFundedValue`

好的，这是我渲染的 HTML 的片段：

```
var totalFunded =  '109321734.06';

var totalFundedValue;
var totalFundedLabel;
var totalFundedText;

if (totalFunded != null)  
{
totalFundedLabel.push({ "label": "Funded",});
totalFundedValue.push({"value": "109321734.06"});
 totalFundedText.push({"toolText": "$109,321,734.06"});
}

"data":[{
    totalFundedLabel
    totalFundedValue
    totalFundedText
  }
] 
```

JS：

```
var totalFunded =  '${totalFunded}';

var totalFundedValue;
var totalFundedLabel;
var totalFundedText;

if (totalFunded != null)  
{
totalFundedLabel.push({ "label": "Funded",});
totalFundedValue.push({"value": <tld-msst:fc-value var="${totalFunded}"/>,});
totalFundedText.push({"toolText": "<fmt:formatNumber value='${totalFunded}' type='currency' groupingUsed='true' />"});
} 
```

只是为了澄清，这是不使用 push 方法的样子：

```
 data: [{
    "label":"Funded",
    "value":"${totalFunded}",
    "toolText": "<fmt:formatNumber value='${totalFunded}' type='currency' groupingUsed='true' />"
  }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:14:24.623

改变这个：

```
totalFundedLabel.push({ "label": "Funded",}); 
```

到：

```
totalFundedLabel.push({ "label": "Funded"}); 
```

删除结尾的逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:45:35.377

看起来每个人都解决了“逗号”问题。还有一些其他问题，例如：

1.  你不能只推送到空变量，它会抛出一个未定义的。他们必须被宣布为`var totalFundedLabel = [];`. 这可能不是一个合适的情况`push`

您是否考虑过使用老式的对象字面量？

`var totalObj = {};`

`var totalFunded = '109321734.06';`

`if (totalFunded != null)` `{`

```
totalObj.label = "Funded";
totalObj.value = "109321734.06";

totalObj.toolText = "$109,321,734.06"; 
```

`}`

`console.log('{"data": [' + JSON.stringify(totalObj) + ']}');`

`// outputs this: {"data": [{"label":"Funded","value":"109321734.06","toolText":"$109,321,734.06"}]}`

这对我来说很好，并构建了请求的字符串。这是可以玩的 JS Fiddle：http: [//jsfiddle.net/98XXN/1/](http://jsfiddle.net/98XXN/1/)

这有帮助吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T16:10:22.903

您仍然会收到该错误，因为“数据”是一个内部包含一个对象的数组，并且一个对象总是需要一个指针和一个值。

```
"data":[{
    totalFundedLabel
    totalFundedValue
    totalFundedText
  }
] 
```

你真正想做的是：

```
"data":[{
    totalFundedLabel: 'value1',
    totalFundedValue: 'value2',
    totalFundedText: 'value3'
  }
] 
```

我希望这有帮助！

# scala - Scala Actor 示例：预期类型为：？

> ID：14461768
> 
> 赞同：1
> 
> 时间：2013-01-22T15:12:59.663
> 
> 标签：scala, actor

在一些教程的指导下，我一直在尝试获得一个简单的 Scala Actor 示例，在该示例中，我向演员发送（字符串）消息，并且该演员回复控制台的输出。我的代码是：

```
import scala.io.Source
import scala.actors.Actor

object ProtTest {

  class testActor extends Actor {
    def receive = { 
      case "you" => Console.println("Hello you!")
      case _ => Console.println ("Hello ???")
    }
  }

  val t = new testActor
  t ! "you"
} 
```

不幸的是，我在“def receive = {”上收到以下错误消息，并且已经停留了很长一段时间：

```
Missing parameter type for expanded function 
The argument types of an anonymous function must be fully known (SLS 8.5)
Expected Type was: ? 
```

我真的不知道错误消息中的问号是什么意思以及如何修复示例以便它可以工作？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:15:57.270

看起来你对演员的实现有点困惑。您的`testActor`代码对[Akka](http://akka.io)演员有效，但您使用的是 Scala 演员库。

Akka 和 scala.actors 是 Actor 模型的两个不同实现。Scala actor 是最初的实现，但 Akka 现在更流行（并且在 IMO 上更出色），并且从 Scala 2.10 开始，它是与 Scala 捆绑在一起的标准实现（scala.actors 存在，但在 2.10 中已弃用）。

我实际上不知道如何正确实现一个 scala 演员，但这里是如何让你的演员在 Akka 中运行：

```
import akka.actor._

object ProtTest {

  class testActor extends Actor {
    def receive = { 
      case "you" => Console.println("Hello you!")
      case _ => Console.println ("Hello ???")
    }

    override def postStop() {
      context.system.shutdown
    }
  }

  val system = ActorSystem("test")
  val t = system.actorOf(Props[testActor])
  t ! "you"
  t ! PoisonPill
  system.awaitTermination

} 
```

如您所见，Akka 需要一些样板来正确设置和关闭 Actor 系统，但您的主要 Actor 代码没有改变。该`postStop`方法在actor关闭后调用，这发生在actor接收到`PoisonPill`消息时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T15:20:15.580

`receive`不是您实施的方法。您需要`act`在*调用* `receive`时执行：

```
 class testActor extends Actor {
    def act = {
      while (true) {
        receive {
          case "you" => Console.println("Hello you!")
          case _ => Console.println ("Hello ???")
        }
      }
    }
  } 
```

`receive`您调用的方法也是如此。您传递给它的参数是`{..}`包含 case 子句的代码块。这个参数的类型是一个*部分函数*- 在你的例子中，一个函数从`String`（scala推断，因为“你”是一个字符串）到`Unit`（scala的版本`void`是`println`返回的）。

（有关偏函数如何等效于一堆`case`语句的详细说明，请参阅 Twitters 的 Scala School）。

一旦你了解了基本的 scala 概念，编译错误消息就很容易理解了——在这种情况下，知道匿名函数和`_`速记的行为可能是必要的。

`t.start`此外，如果您希望它接收消息，您需要启动您的参与者实例。

~~虽然尚未弃用，但大多数人（正如另一个答案指出的那样）偏爱 Akka 演员。~~ 从 Scala 2.10 开始，`scala.actors.Actor`不推荐使用 Akka actor。

*（作为旁注，如果您希望该代码工作，您还需要声明`ProtTest`为扩展`App`或将调用移动`t ! "you"`到具有 main 方法的类（或对象））*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:20:16.240

我使用 Akka 比使用 Scala 的 actor 系统更多，但是……[这里有一个简短的教程](http://www.scala-lang.org/node/242)；您可以从那里的示例中看到，该`receive`块应该在一个循环（例如`while (true) {...}`）内，在一个`def act()`方法内。

# android - 在 Android Service 中处理 Rabbitmq Client 收到的消息

> ID：14461769
> 
> 赞同：1
> 
> 时间：2013-01-22T15:13:08.340
> 
> 标签：android, service, architecture, rabbitmq

我有一个运行 Rabbitmq 客户端并使用队列中的消息的 android 服务。客户端可以随时接收消息，所以我通过 startService 启动服务（不是绑定方法）。所以问题是我使用什么样的通信机制从服务与不同的活动进行通信：绑定还是通知？绑定不会那么有用，因为收到的 msg 可能与与可见活动不同的活动相关.. 创建模型层来处理在服务队列中收到的如此多不同的 msg 也成为一个挑战......有什么想法和建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T00:06:08.107

使用消息队列的标准方法如下：您应该在消息中添加某种元数据。然后在处理消息时使用按摩处理程序，借助此类元数据确定哪个确切的类应该处理您的消息。在这种情况下使用策略模式非常有用。使用这种技术，您也可以轻松地使用多个处理程序处理您的消息。

元数据可能非常不同：从某个字段值开始（例如标签），或者您可以从特定类或接口等扩展您的消息......

回答你问题的第二部分。是的，当然，如果您使用队列，它应该有一个消费者。消费者应该像消息管理器一样玩。为每条消息分配新线程是个坏主意，如果您想在应用程序中使用多个线程，我认为您最好使用线程池。但无论如何，线程的数量不应该很高，因为它会严重影响你的性能。谈论消费者应该确定消息处理逻辑的方式，或者这个逻辑可以放在线程中，这将是处理具体消息 - 我认为这两种变体都是可能的。每个都有自己的优点和缺点。但我认为这个逻辑更好地交给消费者，因为消费者管理来自队列的消息，而且这个任务更接近于消息管理，然后是消息处理本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-14T14:39:57.133

就我而言，我使用了 EventBus：[https ://github.com/greenrobot/EventBus](https://github.com/greenrobot/EventBus)

我所有的活动都延伸到一个具有 subscribe 方法的 abstractOne ：

```
@Subscribe(threadMode = ThreadMode.MAIN)
public void onAlert(MyObject object) {
...
} 
```

在我的服务中，我只是发布消息：

```
EventBus.getDefault().post(<MyObject>); 
```

# java - GroovyClassLoader 加载的类未列出

> ID：14461773
> 
> 赞同：1
> 
> 时间：2013-01-22T15:13:17.917
> 
> 标签：java, groovy, classloader

我正在调查一些 JVM bsaed 代码中的内存泄漏（在 Java 环境中运行的 groovy）。

我有一个简单的 Java 测试类，我用它来调查 Groovy 类加载的各种行为，并且我正在运行以下代码（来自纯 Java）：

```
GroovyClassLoader localGroovyClassLoader = new GroovyClassLoader();
Class clazz = localGroovyClassLoader.loadClass("com.test.Example", true, false, true); 
```

Where`Example`只是一个简单的 Groovy 类（没有做任何特别的事情，因为它只是我的虚拟案例）。

现在，如果在上述代码之后立即记录以下内容：

```
localGroovyClassLoader.getLoadedClasses().length 
```

它记录一个 0 - 尽管我可以验证我加载的类都很好（`clazz`输出它实际上是`Example`）。

我想使用该`getLoadedClasses()`方法的原因是因为我动态地重新加载 groovy，所以在重新加载时我还想清除元注册表（详见此处：[https](https://stackoverflow.com/a/10484023/258813) ://stackoverflow.com/a/10484023/258813 ） -因此计划使用以下代码：

```
for (Class c : localGroovyClassLoader.getLoadedClasses()){
    GroovySystem.getMetaClassRegistry().removeMetaClass(c);
} 
```

但显然，如果`getLoadedClasses()`尽管刚刚加载了一个类，但返回 0，我将无法运行上述代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:41:33.143

你`com.test.Example`在父类加载器中有编译的类吗？调用`getLoadedClasses`只会给你这个 GCL 自己直接加载的类。如果它能够通过委托给它的父加载器找到一个特定的类，那么它就不需要加载这个类本身，并且这个类不会被包含在`getLoadedClasses`.

# javascript - 目标容器类不输入 javascript

> ID：14461774
> 
> 赞同：0
> 
> 时间：2013-01-22T15:13:18.197
> 
> 标签：javascript, html

我一直在努力使用 javascript 图表脚本。要调用脚本，我必须将以下内容放在头部：

```
<script type="text/javascript">
    $(function(){
    $('table').visualize({type: 'line'});
    });
</script> 
```

该脚本从表格中抓取数据，然后生成漂亮的图表。一切正常，没问题。问题是当我将它迁移到完整的网站时。我显然在页面上有许多表格，这个脚本试图抓取每个表格并在之后立即创建一个图表。为了解决这个问题，我在“charttable”的目标表中添加了一个类，并将上面的代码更改为：

```
<script type="text/javascript">
    $(function(){
    $('.charttable').visualize({type: 'line'});
    });
</script> 
```

现在可以准确地在预期的位置刮擦并生成图表。我现在遇到的问题是它调用的 javascript 尝试使用各种类来绘制图表和设置样式，这些类似乎被忽略了，例如背景颜色默认为黑色，x 和 y 轴标签的绘制都只是放在顶部彼此等。javascript的示例如下

```
//function to create a chart
        var createChart = {
            pie: function(){    

                canvasContain.addClass('visualize-pie');

                if(o.pieLabelPos == 'outside'){ canvasContain.addClass('visualize-pie-outside'); }  

            var centerx = Math.round(canvas.width()/2);
                var centery = Math.round(canvas.height()/2);
                var radius = centery - o.pieMargin;             
            var counter = 0.0;
            var toRad = function(integer){ return    (Math.PI/180)*integer; };
            var labels = $('<ul class="visualize-labels"></ul>')
                .insertAfter(canvas); 
```

这些类中的每一个都由两个样式表设置样式，例如：

```
.visualize { margin: 60px 0 0 30px; padding: 70px 40px 90px; background: #222 url(../images/chartbg.png) top repeat-x; border: 1px solid #000; -moz-border-radius: 12px; -webkit-border-radius: 12px; border-radius: 12px; }
.visualize canvas { border: 1px solid #888; margin: -1px; background: #222; }
.visualize-labels-x, .visualize-labels-y { top: 70px; left: 40px; z-index: 100; } 
```

我尝试在样式表中的所有条目前添加 .charttable，认为它可以让我定位类和子类，但这没有用。

我知道该脚本必须至少部分正确工作，因为它使用从表格中刮下的标题和标签绘制图表。它只是不会画线、正确定位标签或坚持样式。

我写的是为了添加和定位“charttable”类而不仅仅是容器吗？如果没有 - 在我如何定位容器方面还有其他解决方法吗？如果是 - 为什么现在忽略样式表？

如果以上没有任何意义，我深表歉意，因为我还在学习 Java ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:23:37.257

它看起来像是在操纵一个变量“画布”来创建图表，你说它正在工作。它将类添加到您说不起作用的“canvasContainer”。我会在代码中进一步查找以确定 canvas 和 canvasContainer 是如何定义的。在某处定义了 canvasContainer 的地方有一个中断。

# java - 移动到上一个屏幕

> ID：14461777
> 
> 赞同：1
> 
> 时间：2013-01-22T15:13:20.820
> 
> 标签：java, android, eclipse, android-intent

我是安卓初学者，我没有安卓手机。

我正在创建一个包含 2 个屏幕的 android 应用程序。当我在第二个屏幕时，我需要知道如何回来。我是否必须在 xml 文件中专门编写一个按钮并对其进行编码，或者用户可以单击手机的后退按钮返回吗？（没有任何代码）或者，用户可以将它滑到左侧，所以它会回来吗？（没有任何代码）。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:15:10.407

> 用户可以点击手机的返回按钮返回吗？（没有任何代码）

是的。所有 Android 手机都为此目的实现了后退按钮。

> 我是否必须在 xml 文件中专门编写一个按钮并对其进行编码

您不必这样做，但有可能（尽管在大多数情况下不推荐）

> 否则，用户可以将它滑到左侧，所以它会回来吗？（没有任何代码）。

通常没有。也许如果您使用一种特殊的布局/活动来支持它作为内置功能。我不知道有任何实现这一点。

# c++ - Eclipse，如果程序崩溃，则看不到输出

> ID：14461780
> 
> 赞同：2
> 
> 时间：2013-01-22T15:13:32.533
> 
> 标签：c++, eclipse

我有一个分段错误，我的程序崩溃了。我仍然希望能够看到我在崩溃前所做的打印。

我尝试调试它并越过“cout”行，但在崩溃期间或之后我仍然看不到输出。

基本上我有一个向量迭代器，想看看它的内容，但使用调试器真的很难。如果您对此有解决方案，那将比解决输出案例更好。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:18:33.133

使用`cerr`而不是`cout`因为`cout`缓冲其输出。`cerr`在大多数情况下速度较慢，但​​始终将其用于调试打印。

[更多信息](http://www.cplusplus.com/reference/iostream/cerr/)

# jquery - JQueryUI 1.10.0 Autocompleter renderItem 问题

> ID：14461787
> 
> 赞同：10
> 
> 时间：2013-01-22T15:14:05.483
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我尝试了将“自动完成”重命名为“ui-autocomplete”的解决方案（使用 JQueryUI 1.10.0、JQuery 1.8.3），但仍然收到以下错误：

> TypeError: $(...).autocomplete(...).data(...) 未定义

```
} }).data('ui-autocomplete')._renderItem = function (ul, item) { 
```

它在 1.10.0 中定义，但我需要覆盖：

```
_renderItem: function( ul, item ) {
return $( "<li>" )
.append( $( "<a>" ).text( item.label ) )
.appendTo( ul );
}, 
```

这是我的整个代码：

```
var ajaxCall_QuickSearchCompanyId;
            $('#QuickSearchCompanyId').autocomplete({
                minLength: 2, delay: 300, source: function (request, response) {
                    if (ajaxCall_QuickSearchCompanyId) {
                        ajaxCall_QuickSearchCompanyId.abort();
                    }
                    ajaxCall_QuickSearchCompanyId = $.ajax({
                        url: '/Advertiser/Autocompleter/CompaniesDetailed', dataType: 'json',
                        data: { q: request.term },
                        success:
                            function (data) {
                                $('#QuickSearchCompanyId').removeClass('ui-autocomplete-loading');
                                response($.map(data, function (item) {
                                    return {
                                        label: item.ID,
                                        value: item.Name,
                                        subsidiaries: item.Subsidiaries,
                                        category: item.Category,
                                        url: (item.URL == null) ? '' : item.URL,
                                        parentName: item.ParentName,
                                        isReported: item.IsReported
                                    }
                                }));
                            }
                    });
                }
            }).data('ui-autocomplete')._renderItem = function (ul, item) {
                String.prototype.chunk = function (n) {
                    var ret = []; for (var i = 0, len = this.length; i < len; i += n) { ret.push(this.substr(i, n)); }
                    return ret;
                }; ul.attr('id', 'ul_QuickSearchCompanyId'); return $('<li></li>')
                    .data('ui-autocomplete-item', item)
                    .append("<a style='padding: 0px;'><div style='margin-bottom: 0px; width: 450px;'><table style='height: 100%; width: 450px; font-family: Calibri; font-size: 10pt;'><tr><td style='width: 280px; border-right: solid 1px Black; padding: 0px; color: " + ((item.isReported != true) ? 'Gray' : 'Black') + "; font-style: " + ((item.isReported != true) ? 'italic' : 'none') + ";'>" + ((item.parentName != '[[root]]') ? (item.parentName + ': ') : '') + item.value + "</td><td align='right' valign='top' style='width: 150px; padding: 0px; color: " + ((item.isReported != true) ? 'Gray' : 'Black') + "; font-style: " + ((item.isReported != true) ? 'italic' : 'none') + ";'>" + item.category + "<br /></td></tr></table></div></a>")
                    .appendTo(ul);
            }; 
```

任何想法都会非常受欢迎。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T21:50:11.083

代替

```
$('selector').data('ui-autocomplete')._renderItem = function (ul, item) { }; 
```

你应该使用

```
$('selector').data('uiAutocomplete')._renderItem = function (ul, item) { }; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T12:45:44.287

我有同样的问题。你应该使用`$('selector').data('autocomplete')._renderItem = function (ul, item) {...};`

或者只是打开控制台并输入如下内容：`$('div').autocomplete().data()`

在那里你会看到你必须使用的方法。就我而言，它只是“自动完成”

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-24T02:38:08.407

## 我找到了解决方案！

好吧，我来分享一下我的小经验。当我遇到同样的问题时，我听到人们谈论将“ui-autocomplete”更改为“uiAutocomplete”或只是“autocomplete”，但这是错误的。

正确的是真的“ui-autocomplete”，这个问题的解决方案不是这个。当我从以下位置更改代码时，我解决了我的问题：

```
 .data('ui-autocomplete')._renderItem = function (ul, item) 
```

**至：**

```
 .__renderItem = function(ul, item) 
```

尝试这样做并告诉我发生了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-02T06:57:05.350

我对这条线有同样的问题

```
.data("autocomplete")._renderItem = function (ul, item) { 
```

我可以通过添加任何这些来克服错误

```
1 - .data('ui-autocomplete')._renderItem = function (ul, item) { 
2 - .data('uiAutocomplete')._renderItem = function (ul, item) { 
3 - .__renderItem = function(ul, item) { 
```

# instagram - Instagram 访问令牌

> ID：14461791
> 
> 赞同：0
> 
> 时间：2013-01-22T15:14:19.317
> 
> 标签：instagram

我需要在我的网页中显示一位用户的 intsagram 照片。因此，观看页面的用户不需要任何“登录”掩码，只需查看用户（即当前网页的所有者）的照片。

因此，在我进一步的应用程序中，我可以调用：

```
https://api.instagram.com/v1/users/" + userID + "/media/recent?client_id=" + id + "&access_token=2822asfa656.24523525.934634634csafa8asasaeea40 
```

但 Instagram API 表示，*访问令牌可能会在未来的任何时间过期。*.

那么我该如何管理这种情况呢？以后我不会每次都更改 access_token 了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-14T15:19:44.617

有同样的问题。最好和最可靠的解决方案imo：

1.  [从“ http://instagram.com/{user_name}/media](http://instagram.com/) ”**获取**json
2.  *... your_code（模板等）...*
3.  缓存结果
4.  利润：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:33:51.250

我认为 Access_Tokens 的一般方法是将它们发布给每个经过身份验证的用户，并且不应该在多个用户之间共享，因为它们的波动性会过期。Client_ID 是您的全局访问令牌，但显然限制为每小时 5000 个请求，因此在我的 Instagram API 实现中，我将 Access_Token 存储在我的网站上的用户会话中，因此每个用户在通过身份验证后都有自己唯一的 Access_Token，否则他们将使用 Client_ID。

# android - 如何向android添加新语言？

> ID：14461797
> 
> 赞同：0
> 
> 时间：2013-01-22T15:14:35.183
> 
> 标签：android, localization

Android os 有很多语言，但没有我的母语。是否可以向android系统添加新语言？

PS我想在Android的新版本中看到我的语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:35:19.370

> 想在新版 Android 中查看我的语言吗？

虽然不是不可能，但也不容易，你可以写信给谷歌，Android 开发者社区。在此之前，您可以开始将英语翻译成您的母语，告诉他们您有您的语言的翻译。在 google-group 上为 android 开发者写一个帖子，谷歌中有一些人作为 Android 倡导者/工程师为开发者提供帮助，也许他们可以看到你的担忧。

它还依赖于手机制造商公司，因为 Android 是开源的。所有公司基本上都销售带有定制操作系统的手机。

# c#-4.0 - Xlinq：将元素从一个xml复制到另一个

> ID：14461812
> 
> 赞同：0
> 
> 时间：2013-01-22T15:15:25.900
> 
> 标签：c#-4.0, linq-to-xml

我有以下两个xml：

**一个.xml**

```
<contacts>
  <contact>
    <name>Patrick Hines</name>
    <phone type="home">206-555-0144</phone>
  </contact>
</contacts> 
```

**B.xml**

```
<contacts>
  <contact>
    <name>Patrick Hines</name>
    <phone type="home">206-555-0144</phone>
    <phone type="work">425-555-0145</phone>
    <address>
      <street1>123 Main St</street1>
      <city>Mercer Island</city>
    </address>        
  </contact>
  <contact>
    <name>Gretchen Rivas</name>
    <phone type="mobile">206-555-0163</phone>
    <DOB>10/10/87</DOB>     
    <address>
      <state>WA</state>
      <postal>68042</postal>
    </address>
  </contact>
</contacts> 
```

**B.xml 有以下补充：**

*   元素地址已添加。
*   又添加了一个联系人，其中添加了一个新元素 DOB。

**问题：**

*   我想列出新添加的元素，但不是它的所有子元素。

*   我还想使用 Xlinq 和连接将新添加的元素从 B 复制到 A。

有什么办法吗？

我试过以下：

```
void test()
    {
        XDocument aDoc = XDocument.Load("A.xml");
        XDocument bDoc = XDocument.Load("B.xml");

        string allGroups = string.Empty;
        string newElementsInGroup = "\n";

        List<string> ignoreGroups = new List<string>(new string[] { "SkipThisGroup1", "SkipThisGroup2"});
        foreach (XElement groupElement in bDoc.Descendants("contacts").ToList())
        {
            //I've not displayed this in above xml
            if (ignoreGroups.Contains(groupElement.Element("Name").Value))
            {
                continue;
            }

            string groupName = groupElement.Element("Name").Value;

            // Get same group from A.xml
            IEnumerable<XElement> groupsInADoc = (from c in aDoc.Descendants("Contacts")
                                                      where (string)c.Element("Name").Value == groupName
                                                      select c);

            // Proceed if group is found
            if (groupsInADoc != null && groupsInADoc.Count() > 0)
            {
                XElement groupInA = groupsInADoc.First();

                // Each group has count element, which is again not displayed in above xml
                int aGroupCount = Convert.ToInt32(groupInA.Element("Cnt").Value);
                int bGroupCount = Convert.ToInt32(groupElement.Element("Cnt").Value);

                // If count of child elements in A group is less than that of B group, find the newly added group.
                if (aGroupCount < bGroupCount)
                {
                    allGroups = string.Concat(allGroups, "  ", groupName);

                    IEnumerable<XElement> newElements = groupElement.Elements().Except(groupInA.Elements());

                    newElementsInGroup = "New elements in group " + groupName + " are : ";

                    foreach (XElement item in newElements)
                    {
                        newElementsInGroup += (item.Element("Name").Value + " ");
                    }
                }
                newElementsInGroup += "\n";
            }
        }

        MessageBox.Show(allGroups + newElementsInGroup, "Groups that have additional members");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:50:54.990

我不知道这是否能解决你的目的，但你必须开始。在这里，一个非常简单的控制台应用程序。以此目的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml;
using System.Xml.Linq;
using System.Text;

namespace ConsoleApplication1
{
    public class Program
    {
        public static void Main()
        {            
            XElement a = XElement.Load("c:\\a.xml");
            XElement b = XElement.Load("c:\\b.xml");
            IEnumerable<XElement> c = b.Descendants().Except(a.Descendants());
            foreach (XElement ele in c)
            {
                if (ele.HasElements == false)
                {
                    Console.Write(string.Format("Element: {0}\nValue: {1}\n", ele.Name.LocalName,  ele.Value));
                }
            }
            Console.ReadKey();            
        }
    }
} 
```

希望这可以帮助。

# php - 运行一整夜后PHP Session为空

> ID：14461813
> 
> 赞同：0
> 
> 时间：2013-01-22T15:15:26.993
> 
> 标签：php, session, session-storage

我有一个程序可以处理大约 20,000+ 行 CSV 文件。它读取文件并发送包含来自 CSV 文件的数据块的 ajax 请求，处理它们并返回使用 javascript 显示的结果。

这个过程需要很长时间，通常需要3个多小时。

我的问题是我将数据存储在需要访问以导出新处理的数据的会话变量中。我跑了一夜，当我早上回来处理完成时，我点击了导出，会话变量是空白的。

我检查了会话“生命周期”（session_get_cookie_params()）设置为 0，这意味着它应该一直存在到浏览器关闭。

除了将数据插入 URL 并将其传递给函数等之外，还有什么方法可以在浏览器关闭之前补救丢失会话？

# c++ - 条件堆栈变量

> ID：14461817
> 
> 赞同：15
> 
> 时间：2013-01-22T15:15:40.660
> 
> 标签：c++

给定以下函数，是否会在堆栈上声明每个局部变量？

```
std::string reallyCoolFunction(unsigned int a)
{
   if( a < 20 ) 
   {
     std::string result1 = "This function is really cool";
     return result1;
   }

   if( a >=20 && a <= 40 )
   {
     std::string result2 = "This function is kind of cool";
     return result2;
   }

   if( a > 40 )
   {
     std::string result3 = "This function is moderately cool";
     return result3;
   }

 std::string result4 = "This function really isn't that cool"; 
 return result4; // remove warning

} 
```

在这种情况下，`std::string`实际上只需要一个，是全部 4 个都分配到堆栈上，还是只分配 1 个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T15:17:34.587

决定权取决于编译器：由于*自动*变量在下一个变量进入作用域之前就超出了作用域，编译器*可以*重新使用它们的内存。请记住，“堆栈”变量实际上是根据 C++ 规范*具有自动存储持续时间的变量，因此它们可能根本不在堆栈上。*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-22T15:16:56.053

在大多数编译器上，只会分配一个字符串。请记住，尽管`std::string`使用动态内存，因此其大部分内容仍将分配在堆上。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T15:47:53.380

很可能是**0**或**1**（在 Release 中），当然也可能是**4**（在 Debug 中）。

这称为 RVO：返回值优化。

实际上允许编译器完全省略副本并`std::string`直接在调用者提供的*插槽中构建。*这是特定于 ABI 的，并且所有优化仅适用于满足多个标准的情况；在您的情况下，它很可能会适用。

如果您想检查，您可以尝试仔细阅读编译器在其翻译/优化管道的各个阶段的输出；尽管取决于您的工具链，但这可能会很困难。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T15:17:22.327

取决于编译器。
如果编译器足够智能，可以最终确定只需要一个字符串，它将只为一个字符串发出代码。

> **你的编译器足够智能吗？**

最简单的方法是检查生成的汇编代码。

> **是全部 4 个都分配到堆栈上，还是只分配 1 个？**

无论是 1 个字符串还是 4 个字符串，字符串对象都位于函数本地的堆栈上，但字符串的内存是在 freestore 中分配的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T15:22:25.077

在这种情况下，允许编译器创建 4、1、2 或 3 个变量。但是我知道的大多数编译器只会创建一个，或者可能是两个，因为 result4 在函数的整个范围内。

当然，如果你做了“正确”的事情，编译器很可能会感到困惑并且做的比它绝对需要的更多，所以在关键功能中依赖它并不是一件特别好的事情。

编辑：我应该补充一点，std::string 的构造函数只有在对象实际上被“使用”时才应该运行，所以你可能会使用堆栈空间，但它不应该调用构造函数。如果您执行以下操作，这一点很重要：

```
void func()
{
    if (something)
    {
        Lock myLock(&global_lock_object);   // Constructor locks global_lock_object
        ... do stuff that needs global_lock_object locked ... 
        // end of scope runs destructor of Lock that unlocks global_lock_object. 
    }
    ... more code that takes a long time to execute but doesn't need lock. ...
} 
```

现在，如果 for 的构造函数`Lock`“过早”执行，并且在相同的范围内被破坏[并且它应该是对称的]，那么锁将在函数的整个持续时间内被持有，这是错误的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T15:24:31.047

简短的回答：看看汇编程序。

长答案：编译器*可能会*应用静态检查来确定他是否需要全部 4 个或只需要一些变量。有些编译器可能会在调试模式下分配 4 个不同的变量，有些可能不会。在发布模式下，一些优化器可能会看到前 3 个都在自己的范围内，因此可以放在同一个地方。因此，这些编译器可以为堆栈上的两个字符串变量保留空间。需要更多分析才能看到第四个变量在任何情况下都不会与前三个变量共存，因此一些优化器可能会将剩余的两个变量也放在同一个位置。

**但是***你的*编译器是否这样做，以及他是否仍然在稍微复杂一点的情况下这样做，只有在你分析输出时才能确定。

# php - 通过比较单元格 Y 和单元格 Z 中的信息从单元格 X 中获取 mysql 值？

> ID：14461818
> 
> 赞同：0
> 
> 时间：2013-01-22T15:16:05.197
> 
> 标签：php, mysql, arrays, wordpress

想法：拉出特定州或州内城市的路线列表。

数据库表是 wp_postmeta，我们将使用的表中的列是 post_id、meta_key 和 meta_value。

post_id 可以在多行中相同 meta_key 必须是“location_state”“location_city”或“trail_type”

因此，遍历数据库中的每一行，从同一行中查找`post_meta.meta_value = 'Arizona'`并获取`post_id`

`post_id`然后它在该状态下找到的 foreach查找`post_meta.meta_key = 'trail_type'`具有匹配 post_id 的值。这意味着 post_id 与跟踪相关联，而不是其他内容。返回 post_id 的数组，它们是处于该状态的路径。到一个名为 $trails_in_state 的数组

现在我们已经通过 ID 获得了一个状态中所有路径的列表。

我还想将该州的一个城市中的所有小径放入一个单独的查询中，以便我可以说何时点击该页面

```
<?php if( isset($_GET['city']) AND isset($_GET['state']) ) {
   // GET AN ARRAY OF ALL post_id's OF TRAILS IN THAT CITY STATE COMBO
} elseif( isset($_GET['state'])) {
   // GET AN ARRAY OF ALL post_id's OF TRAILS IN THAT STATE
} 
```

这是表结构的图像[http://imgur.com/ijhR1NZ](http://imgur.com/ijhR1NZ)

我正在使用 wordpress，所以在这种情况下不能轻易使用 mysqli。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:26:24.787

我认为这些应该让你开始。第一个应该选择你所有的 post_id，你所在的 meta_value 等于一个输入。我不确定为什么需要按州或城市限制广泛匹配应该可以正常工作。仅对城市进行过滤的更具体匹配将是第二个选项。

SELECT trail_type FROM wp_postmeta WHERE post_id=(SELECT post_id FROM wp_postmeta WHERE meta_value='Arizona')

和

SELECT trail_type FROM wp_postmeta WHERE post_id=(SELECT post_id FROM wp_postmeta WHERE meta_value='Arizona' AND meta_key='location_city')

如果您无法查看多选和排序，或者可能是 UNION 查询，我只是无法理解该表结构，这对我来说似乎违反直觉:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:29:28.503

为什么你不能只使用这样的东西：

`SELECT post_id FROM wp_postmeta WHERE meta_key = "State" AND meta_value = "mysql_escape_string($state)"`

# java - WebDriver 和 IE10 输入很慢

> ID：14461827
> 
> 赞同：17
> 
> 时间：2013-01-22T15:16:30.627
> 
> 标签：java, internet-explorer, webdriver, selenium-webdriver

当我尝试在最新的 IE 中执行测试时，我发现输入非常慢：输入字段中出现每个字符大约需要 5 秒。启用所有安全区域并使用以下代码初始化驱动程序：

```
System.setProperty("webdriver.ie.driver", "./src/test/resources/IEDriverServer.exe");
return new InternetExplorerDriver(); 
```

这个问题只出现在 IE10 上；当我运行 Firefox 时，一切都很好。

我的操作系统是 Windows 8，以防万一。

我错过了什么？

**UPD**现在我可以看到有时 IE 运行得更快，但是当它发生时，这段代码不起作用：

```
action.contextClick(logoPic).clickAndHold().sendKeys("keys_to_invoke_some_window").perform(); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-29T13:25:24.093

通过替换 IEDriverServer.exe 修复（从 x64 版本切换到 x32 版本）

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-07-22T15:05:56.817

更换IEDriverServer.exe（从x64版本切换到x32版本）解决了速度慢的问题。

# php - JQuery .each 循环概率

> ID：14461828
> 
> 赞同：5
> 
> 时间：2013-01-22T15:16:30.640
> 
> 标签：php, jquery, html

好的，这是这个想法：

我想制作一个 jQuery 脚本来处理多个表单。每个表单都有一个按钮。当您单击此按钮时，脚本应将 $_POST 中所有输入字段的名称和值发送到表单的操作 URL。但我不能让它工作。

它不会在我的 jQuery 文件的第 3 行循环遍历我的 .each。

jQuery：

```
$("input[type='button']").click(function(){
    var query = {};
    $(this).parent('form').children('input[type="text"]').each(function(){
        query[$(this).attr('name')] = $(this).val();
    });

    $.post($(this).parent('form').attr('action'), query, function(data) {
        $("#dialog").html(data);
        $("#ui-id-1").html('Activate account');
        $("#dialog").dialog("open");
    }, 'json');
}); 
```

HTML：

```
<form action="/action/activateacc.php">
<table>
    <tr>
        <td>E-mail:</td>
        <td><input type="text" id="mail" name="mail" /></td>
        <td><img class="tick" id="mailIMG" width="20px" /></td>
    </tr>
    <tr>
        <td>Activation code:</td>
        <td><input type="text" id="code" name="code" /></td>
        <td><img class="tick" id="codeIMG" width="20px" /></td>
    </tr>
    <tr>
        <td>Choose organization-name:</td>
        <td><input type="text" id="name" name="name" /></td>
        <td><img class="tick" id="nameIMG" width="20px" /></td>
    </tr>
    <tr>
        <td></td>
        <td style="text-align:center"><input type="button" style="cursor:pointer" value="Activate account" /></td>
    </tr>
 </table>
 </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:23:09.640

只需将[.serialize()](http://api.jquery.com/serialize/)与表单一起使用即可获取输入的名称/值-您也应该使用最接近的，因为父级仅上升一级

```
$("input[type='button']").click(function(){   
    var query = $(this).closest('form').serialize();
    $.post($(this).parent('form').attr('action'), query , function(data) {
        $("#dialog").html(data);
        $("#ui-id-1").html('Activate account');
        $("#dialog").dialog("open");
    }, 'json');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:23:02.133

`parent()`在 DOM 树中只上升 1 级，在 DOM 树`children()`中只下降 1 级。

如果你 100% 确定结构不会改变（不推荐，它不是那么干净），你应该尝试使用更多它们，或者使用`closest()`，这将检索 DOM 树中最接近的给定标签名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:23:20.290

只需`form`使用内置的[`$.serialize`](http://api.jquery.com/serialize/).

> .serialize() 方法以标准 URL 编码表示法创建文本字符串。它对表示一组表单元素的 jQuery 对象进行操作。

在你的情况下：

```
var query = $(this).closest('form').serialize(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T15:19:32.960

`.parent()`只上一层 DOM - 尝试使用`.closest()`and `find()`- 所以

```
$(this).closets('form').find('input[type="text"]').each(function(){ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T15:19:42.870

用于`.find`查找子项和`.parents`查找表格

```
$(this).parents('form').find('input[type="text"]').each(function(){
        query[$(this).attr('name')] = $(this).val();
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T15:20:00.977

我阅读它的最简单方法是使用`.closest()`（它一直上升而不是一级的父级）以及`find()`（通过您当前的 jQuery 对象运行查询）：

```
$(this).closest('form').find('input[type="text"]').each(function(){ 
    query[$(this).attr('name')] = $(this).val();
}); 
```

**[jsFiddle 演示](http://jsfiddle.net/86U5g/)**

# c# - 如何使用 Excel-Add-In 设置 Excel 页脚

> ID：14461831
> 
> 赞同：0
> 
> 时间：2013-01-22T15:16:35.417
> 
> 标签：c#, excel-2010, excel-addins

我被告知要编写一个 Excel-Add-In，它将特定的页脚粘贴到工作簿中的每个工作表中。

在阅读了 Excel.Interop 命名空间的文档后，我得到了这段垃圾代码：

```
 public partial class Ribbon1
{
    Excel.Application _excelApp;
    private void Ribbon1_Load(object sender, RibbonUIEventArgs e)
    {
        _excelApp = new Excel.Application();
    }

    private void button1_Click(object sender, RibbonControlEventArgs e)
    {
        var filename = _excelApp.GetSaveAsFilename();
        Excel._Worksheet worksheet = (Excel._Worksheet)_excelApp.ActiveSheet;
        worksheet.PageSetup.CenterFooter = filename;
    }
} 
```

我在固定活动工作表时遇到问题。我怎样才能真正使用这个对象？- 现在它是空的。我发现与该主题相关的 msdn 文章简直是愚蠢的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:24:06.443

我终于找到了我正在寻找的信息：[VSTO](http://msdn.microsoft.com/en-us/library/cc442981.aspx)

首先，我设置了这两行：

```
using Excel = Microsoft.Office.Interop.Excel;
using Office = Microsoft.Office.Tools.Excel; 
```

作为第二步，我检查工作簿是否不为空，然后检查工作表是否不为空。如果是这种情况，请将页脚设置为文档。它不漂亮，但我明天可以在办公室改进它。

```
Excel.Workbook Workbook = Globals.ThisAddIn.Application.ActiveWorkbook;
        if (Workbook != null)
        {
            Office.Workbook vstoWorkbook = Globals.Factory.GetVstoObject(Workbook);

            Excel.Worksheet worksheet = Globals.ThisAddIn.Application.ActiveSheet;
            if (worksheet != null)
            {
                Office.Worksheet vstoSheet = Globals.Factory.GetVstoObject(worksheet);
                vstoSheet.PageSetup.CenterFooter = "testing the footer";
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:30:37.317

一些笔记。首先，您没有活动工作表，因为您还没有创建活动工作表，Excel 默认不会创建活动工作表。

在您的按钮单击事件处理程序中尝试（简化）代码：

```
Excel.Workbook workbook = _excelApp.Workbooks.Add();
Excel.Worksheet worksheet = workbook.Worksheets[0];
worksheet.PageSetup.CenterFooter = filename;
// Do remaining work here 
```

另外，线

```
var filename = _excelApp.GetSaveAsFilename(); 
```

只返回用户选择的文件名。它实际上并不保存文件。您将需要跟进：

```
workbook.SaveAs(Filename: filename); 
```

# forms - 将多行标签与输入对齐

> ID：14461833
> 
> 赞同：0
> 
> 时间：2013-01-22T15:16:42.797
> 
> 标签：forms, input, alignment

我遇到了一项棘手的任务。

我有一个表单，表单元素居中。（标签向右对齐，输入向左）标签设置为某个宽度。当标签适合一行时，所有样式和外观都完美对齐。

但正如您可以想象的那样，当标签不适合并被分成两行时，它不再与输入字段完全对齐。

我想不出一个好的和灵活的解决方案。

也许你有一个小费给我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:18:38.610

你试过`<td style="vertical-align:middle"><input ... /></td>`吗？

# sql - COUNTIFS 按 SQL 中的多个大于条件

> ID：14461835
> 
> 赞同：1
> 
> 时间：2013-01-22T15:16:51.500
> 
> 标签：sql

我正在尝试`COUNT()OVER(ORDER BY)`在 SQL 中使用来创建`COUNT`下面的列。在这里，COUNT 为您提供从购买日期到活动日期的等于或高于当前行价格的门票数量。在这种情况下，发泄发生在`1/15/13`。例如，`12/3/2012 to 1/15/13`我们以 420 美元或以上的价格售出了 5 张门票。另一个例子f，从`12/25/12 to 1/15/13`我们卖了6张或以上的票。

在 Excel 中，公式为`=+COUNTIFS([Price],">="&[@Price],[Date],">="&[@Date])`. 这就是`COUNT`计算列的方式。

在 SQL 中，我得到的最远在下面，结果在 SQL_COUNT 列中。如您所见，它不起作用。

```
SELECT DATE, PRICE, 
COUNT(PRICE) OVER (order by PRICE desc)
FROM O.ELEMENTS ELEMENTS
WHERE (DATE={ts '2013-01-15 00:00:00'})
ORDER BY PRICE DESC

PRICE   DATE        COUNT   SQL_COUNT
700 1/8/2013    2   2
700 1/10/2013   1   2
440 1/9/2013    2   3
420 12/3/2012   5   5
420 12/18/2012  4   5
400 12/11/2012  5   6
390 12/3/2012   7   7
370 8/29/2012   11  11
370 11/29/2012  10  11
370 11/29/2012  10  11
370 12/17/2012  5   11
360 10/18/2012  11  12
350 1/5/2013    5   14
350 1/9/2013    3   14
340 6/23/2012   20  20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:42:07.547

我不确定你可以用窗口函数做到这一点。您可以使用相关的子查询来做到这一点：

```
select date, price,
       (select count(*) from o.elements e2 where e2.date >= e.date and e2.price >= e.price
       ) as YourCount
from o.elements e
WHERE (DATE={ts '2013-01-15 00:00:00'})
ORDER BY PRICE DESC 
```

这个问题困扰了我一整天（幸运的是这天工作轻松）。我越来越多地认为，仅靠窗口函数无法解决这个问题——这让我感到惊讶。窗口函数独立处理每个维度。换句话说，该`order by`子句在考虑下一个维度之前先在一个维度中遍历所有内容。

以几何方式考虑这一点。两个轴是价格和日期维度。数据实际上是沿着这两个维度的散点图。给定点将散点图分成四个象限。我们正在寻找的是 D 中的点数（价格和日期都较大）：

```
|  C   |  D
|------+------
|      |
|  A   |  B
 ------------- 
```

顺便说一句，当使用变量值而不是实际值的等级时，几何问题本质上是相同的。

我们可以很容易地得到任意两个相邻区域的记录数。例如，C+D 是：

```
count(*) over (order by price) 
```

或者，对于 A+B：

```
count(*) over (order by price desc) 
```

问题在于混合维度。这些是垂直线，将空间分成两个不同的区域。没有办法将它们组合在一个仅捕获“D”的表达式中。我们可以通过减去两个值得到类似 AC 的东西，但这仍然没有帮助。

这并不能*证明*最初的目标是不可能的。这只是暗示在一个维度上使用排序是不够的。

添加第二个维度`order by price, date`也不起作用。如果价格没有联系，这没有任何作用，我们回到最初的情况。像按价格排名和按日期排名并使用总和（或平均值）这样的技巧是行不通的。生成的几何解释有 45 度的线，这不是我们想要的。

据我所知，某种形式的自联接是唯一的解决方案。我原始答案中的表格（在顶部）可能是最简单的方法。如果你有关于价格和日期的索引，甚至应该是有效率的。

# sql - sql从两个表中获取最大数量？

> ID：14461841
> 
> 赞同：5
> 
> 时间：2013-01-22T15:17:04.167
> 
> 标签：sql, sql-server, tsql

我需要从两个表中查询最大 ID，我需要取较大的 ID。我正在使用 sqlserver。

查询：

```
SELECT MAX(a.ID)
FROM   tableA a

SELECT MAX(b.ID)
FROM   tableB b 
```

如果`tableA`的最大 ID 为 20，而`tableB`的最大 ID 为 30，则这`UNION`两个表的查询应该只返回 30。

是否可以将两个查询组合成一个查询以返回最大 ID？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T15:18:11.670

这是根据你说的，`UNION`两张表都取最大值。

```
SELECT max(ID)
FROM
(
    select max(ID) ID from tableA
    UNION
    select max(ID) ID from tableB
) s 
```

或者

```
SELECT max(ID)
FROM
(
    select ID from tableA
    UNION
    select ID from tableB
) s 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T15:18:58.397

```
SELECT MAX(id)
FROM (SELECT ID FROM tableA
      UNION
      SELECT ID FROM tableB) AS D 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:29:31.507

不排序选项

```
SELECT MAX(CASE WHEN a.ID > b.ID THEN a.ID ELSE b.ID END)
FROM tableA a CROSS JOIN tableB b 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/516d8/1/0)上的演示[](http://sqlfiddle.com/#!3/516d8/1/0)

# fpga - 为 Spartan 3E 套件提供 8 位输入

> ID：14461842
> 
> 赞同：0
> 
> 时间：2013-01-22T15:17:16.650
> 
> 标签：fpga

我有一个 Spartan 3E 套件。在那个套件中有 4 个开关，有 4 个按钮。

对于我的论文，我需要 16 位输入，但我转换为 8 位。

现在我的问题是我有 4 个开关，我只能输入 4 位，而其他 4 位没有使用按钮，我该如何输入。

如果有人知道如何使用 Spartan 3E 套件使用外部接口提供额外的 4 位，请提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:55:20.127

您有很多选择：

[http://www.xilinx.com/support/documentation/boards_and_kits/ug230.pdf](http://www.xilinx.com/support/documentation/boards_and_kits/ug230.pdf)

显然你有你提到的内置按钮和开关，还有一个旋转按钮，你可以使用它。以下是一些尚未完全内置但您可以轻松使用的其他选项（首先是难度最低的选项）：

**来自 Hirose 100 针 FX2 边缘连接器**的 43 个 I/O ，您可以将其他按钮/开关连接到这些 I/O。**然后像监控内置按钮/开关一样编写 VHDL 来监控 I/O。**

 ****RS-232 串行端口**，将其插入 PC 上的串行端口并打开终端程序与之对话，看看会发生什么。再次需要另一个 vhdl 块才能使其工作，但这是一个开始：

[http://forums.xilinx.com/t5/Xilinx-Boards-and-Kits/Rs232-port-on-Spartan-3-starter-board/td-p/19282](http://forums.xilinx.com/t5/Xilinx-Boards-and-Kits/Rs232-port-on-Spartan-3-starter-board/td-p/19282)

**PS/2 键盘端口**，你可以插入一个键盘，同样你需要添加一些 vhdl 逻辑来实际读取键盘，如下所示：

[http://www.youtube.com/watch?v=aZeutF6d0Z4](http://www.youtube.com/watch?v=aZeutF6d0Z4)

**10/100 以太网物理层接口**，您可以通过以太网与它通信，看起来 MAC 可作为 EDK Platform Studio 的基本系统构建器的一部分使用，您可以在 MicroBlaze 软核上编写代码来与以太网通信！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:52:17.697

如果您不需要快速调整输入，您可以简单地使用按钮将开关锁定到矢量的它们自己的 4 位部分。例如（读取 16 位向量）：

```
process(clk)
begin
    if(rising_edge(clk)) then
        case pushbuttons is
            when "0001" =>
                data(15 downto 12) <= switches;
            when "0010" =>
                data(11 downto 8) <= switches;
            when "0100" =>
                data(7 downto 4) <= switches;
            when "1000" =>
                data(3 downto 0) <= switches;
            when others =>
        end case;
    end if;
end process; 
```

如果您只需要 8 位输入，只需剪掉 case 语句的上半部分。**

# python - 使用 subprocess.Popen 调用 python 脚本并刷新数据

> ID：14461843
> 
> 赞同：13
> 
> 时间：2013-01-22T15:17:18.393
> 
> 标签：python, subprocess, pipe

好的，所以我已经看到了十几个这样的线程，但是没有一个给出完整的答案，而且到目前为止我尝试的一切都对我不起作用。

**1）不断输出一些数据并刷新它的脚本：**

```
import time
import sys

if __name__ == '__main__':
    for i in range(5):
        print i,
        sys.stdout.flush()
        time.sleep(1) 
```

**2）使用 Popen 调用第一个脚本的脚本应该一个一个地打印数字，但由于某种原因没有，并且一次打印它们：**

```
import sys
import subprocess

if __name__ == '__main__':
    process = subprocess.Popen(['python', 'flush.py'], stdout = subprocess.PIPE )
    for line in iter(process.stdout.readline, ''):
        print line,
        sys.stdout.flush() 
```

我有点困惑的第一件事是在第**一个**脚本中，如果你删除刷新，它会在一行中返回输出 O_O ...我很确定这是因为 time.sleep 但仍然有点预期它会像一个标准输出不断返回值 0,1,2,3,4 但不是全部一起，当然 flush 解决了它，但很奇怪，至少对我来说......

**主要问题：** 第二个脚本是否没有一一返回数字，而是一次返回所有输出......我需要的是看到数字一一弹出......

我在某处读到它不会返回 Popen 等待关闭管道的 EOF，这就是它运行到最后的原因.....

那么接下来我该怎么做或尝试呢？ *提前致谢。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-13T21:16:49.587

正如[@Warren Weckesser 的评论所说，您的问题与](https://stackoverflow.com/questions/14461843/calling-python-script-with-subprocess-popen-and-flushing-the-data#comment20145373_14461843)[缓冲问题](https://stackoverflow.com/a/20509641/4279)无关。

`.readline()`父进程在读取换行符或到达 EOF 之前不会返回。您的子进程根本不打印*任何*换行符，因此您的父进程在子进程结束之前不会打印*任何内容。*

`print i,`最小的修复只是删除子脚本末尾的逗号。

这也有效：

```
#!/usr/bin/env python
import sys
from subprocess import Popen, PIPE

p = Popen([sys.executable or 'python',
           '-u', # unbuffer stdout (or make it line-buffered on Python 3)
           '-c',
           """
import time

for i in range(5):
    print(i) # <-- no comma i.e., each number is on its own line
    time.sleep(1)
"""], stdout=PIPE, bufsize=1)
for line in iter(p.stdout.readline, b''):
    print(int(line)**2) 
```

例子：

```
 $ python parent.py
 0
 1
 4
 9
 16 
```

这些数字每秒钟打印一次，无需等待子进程结束。

如果您不想更改子脚本，那么您应该使用`readline()`在空格处停止而不是换行符，例如：

```
#!/usr/bin/env python
import sys
from subprocess import Popen, PIPE

p = Popen(['python2', 'child.py'], stdout=PIPE, bufsize=0)
for token in generate_tokens(p.stdout):
    print(int(token)) 
```

其中`generate_tokens()`产生空格分隔的标记：

```
def generate_tokens(pipe):
    buf = []
    while True:
        b = pipe.read(1) # read one byte
        if not b: # EOF
            pipe.close()
            if buf:
                yield b''.join(buf)
            return
        elif not b.isspace(): # grow token
            buf.append(b)
        elif buf: # full token read
            yield b''.join(buf)
            buf = [] 
```

它也会在孩子打印出整数后立即打印。

# web-applications - jQuery Mobile：如何从字符串模板创建动态页面？

> ID：14461845
> 
> 赞同：0
> 
> 时间：2013-01-22T15:17:25.277
> 
> 标签：web-applications, jquery-mobile, render, dynamic-pages

大家好，这是我在stackoverflow中的第一个问题。我将尝试使用 jQuery Mobile（用于 UI）和 PhoneGap（因为我希望它跨平台）创建一个单页 Web 应用程序。在我的应用程序中，我想通过一些模板（字符串）创建页面，当我单击按钮或列表元素时，应用程序从模板创建相应的页面并通过 # attr 导航它。当我第一次加载模板时，jqm 以正确的方式呈现页面，但是当我从 DOM 中删除它并在需要页面时附加它时，jqm 不会以其样式呈现页面，但我只看到链接（或其他元素）。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:24:00.477

默认情况下，jQuery Mobile 会自动增强页面上的相应标记，但是如果稍后添加动态内容，则需要`create`在新页面上手动触发事件。

例如

```
$('#newPageID').trigger('create'); 
```

从[文档](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)

> 但是，如果您在客户端生成新的标记或通过 Ajax 加载内容并将其注入页面，则可以触发 create 事件来处理新标记中包含的所有插件的自动初始化。这可以在任何元素（甚至是页面 div 本身）上触发，从而为您节省手动初始化每个插件（listview 按钮、选择等）的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:37:33.533

不幸的是，无论在官方 jQuery Mobile 文档方法中说什么 .trigger('create') 都无法重新设置整个页面的样式。

相反，应该使用它：

```
$('#newPageID').trigger('pagecreate'); 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/vN45m/](http://jsfiddle.net/Gajotres/vN45m/)

它可以很容易地进行测试，只需将 pagecreate 替换为 create 或注释该整行。

# c++ - C++ OOP - 丢失数据

> ID：14461849
> 
> 赞同：3
> 
> 时间：2013-01-22T15:17:38.070
> 
> 标签：c++, oop

我有一些简单的课程，但我无法让它们工作。

TL;DR 我有一个“播放器”实例，在我为实例设置了一些数据后，我可以取回它。如果我将实例推送到*std::vector Players;* 如果我有 Players.at(0).getName() 它返回“”。数据不存在！离开了。（调试应用程序时，我看到在“vPlayer”中设置了“_name”，在“Players”中我看到了一个元素，其中“_name”=“”）

这是代码：

```
//Player.h
#ifndef PLAYER_H
#define PLAYER_H

#include <iostream>

class Player
{
public:
    Player();
    Player(const Player &Player);
    Player& operator=(const Player &Player);
    std::string getName();
    bool        setName(const std::string &name);
    bool        nameValid(const std::string &name);

private:
    std::string _name;
};

#endif

//Player.cpp

#include "Player.h"
#include <iostream>
#include <string>
using namespace std;

Player::Player()
{

}
Player::Player(const Player &Player)
{

}
Player& Player::operator=(const Player &Player) {
    return *this;
}

std::string Player::getName()
{
    return this->_name;
}

bool Player::setName(const std::string &name)
{
    if ( ! this->nameValid(name) )
    {
        return false;
    }

    this->_name = name;
    return true;
}

bool Player::nameValid(const std::string &name)
{
    return name.empty() == false;
}

//Map.h
#ifndef MAP_H
#define MAP_H

#define MAP_X 40
#define MAP_Y 40

#include "Player.h"
#include "Point.h"
#include <vector>

class Map
{
public:
    Map();
    bool movePlayer(Player &Player, Point &Point);
    std::vector<Player> getPlayers();
private:

};

#endif //MAP_H

//Map.cpp

#include "Map.h"
#include "Player.h"
#include "Point.h"
#include <iostream>
#include <string>

using namespace std;

Map::Map()
{

}

bool Map::movePlayer(Player &Player, Point &Point)
{
    return true;
}
std::vector<Player> Map::getPlayers()
{
    Player vPlayer;
    vPlayer.setName(std::string("test"));
    std::vector<Player> Players;

    Players.push_back(vPlayer);

    return Players;
} 
```

主要：

```
 std::vector<Player> Players = vMap.getPlayers();
  cout<<"Test:"<<Players.at(0).getName()<<endl; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T15:20:31.787

您定义类的复制构造函数和复制赋值运算符什么都不做。您如何期望向量中的副本与您放入向量中的实例具有相同的数据？

您的类可以使用默认的、编译器生成的复制构造函数和复制赋值运算符完全正常，因此只需删除它们的声明和定义，一切都会正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T15:23:21.473

您的矢量将包含您添加到其中的元素的副本。这些副本将使用 Player::Player(const Player&) 构造函数添加。

此构造函数（在您的实现中）没有为名称设置任何值。

解决方案：

*   在复制的对象中设置名称：

    `Player::Player(const Player &Player) : _name(Player._name) { }`

（您的赋值运算符也是如此）

*   删除复制和分配功能并依赖默认值。因为名字是一个std::string，所以默认会得到一个源玩家名字的副本。

# android - CountDownTimer、ViewPager、Ad 和不断刷新 ListView 项目 - 奇怪的行为

> ID：14461850
> 
> 赞同：0
> 
> 时间：2013-01-22T15:17:40.430
> 
> 标签：android, android-fragments, android-viewpager, ads, countdowntimer

我在布局 xml 中使用 ViewPager 和广告（来自 Admob）。我有两个片段（HomeFragment 和 TeamFragment），一个有 CountDownTimer，另一个有 ListView。正如我们所知，ViewPager 将两者都保存在创建的视图中，因此两者同时处于活动状态。

问题是：**当我的 CountDonwTimer 滴答（调用 onTick）时，刷新 ListView 中的项目（行）（调用 ListAdapter 的 getView()）。**

有趣的是，它仅在广告显示时发生（互联网连接打开）。当没有广告时，一切正常（ListView 没有刷新）。

这不是一个大问题，但它会耗尽电池。

日志：

```
01-21 15:56:35.150: D/HomeFragment(17366): onTick() in CountDownTimer - just before counterTV.setText(...)
01-21 15:56:35.155: D/ListAdapter in TeamFragment(17366): getView() position: 0
01-21 15:56:35.215: D/ListAdapter in TeamFragment(17366): getView() position: 1
01-21 15:56:35.230: D/ListAdapter in TeamFragment(17366): getView() position: 2
01-21 15:56:35.245: D/ListAdapter in TeamFragment(17366): getView() position: 3
01-21 15:56:35.255: D/ListAdapter in TeamFragment(17366): getView() position: 4
01-21 15:56:35.260: D/ListAdapter in TeamFragment(17366): getView() position: 0
01-21 15:56:35.265: D/ListAdapter in TeamFragment(17366): getView() position: 1
01-21 15:56:35.265: D/ListAdapter in TeamFragment(17366): getView() position: 2
01-21 15:56:35.270: D/ListAdapter in TeamFragment(17366): getView() position: 3
01-21 15:56:35.275: D/ListAdapter in TeamFragment(17366): getView() position: 4
01-21 15:56:40.160: D/HomeFragment(17366): onTick() in CountDownTimer - just before counterTV.setText(...)
01-21 15:56:40.170: D/ListAdapter in TeamFragment(17366): getView() position: 0
01-21 15:56:40.185: D/ListAdapter in TeamFragment(17366): getView() position: 1
01-21 15:56:40.200: D/ListAdapter in TeamFragment(17366): getView() position: 2
01-21 15:56:40.215: D/ListAdapter in TeamFragment(17366): getView() position: 3
01-21 15:56:40.225: D/ListAdapter in TeamFragment(17366): getView() position: 4
01-21 15:56:40.245: D/ListAdapter in TeamFragment(17366): getView() position: 0
01-21 15:56:40.260: D/ListAdapter in TeamFragment(17366): getView() position: 1
01-21 15:56:40.260: D/ListAdapter in TeamFragment(17366): getView() position: 2
01-21 15:56:40.265: D/ListAdapter in TeamFragment(17366): getView() position: 3
01-21 15:56:40.270: D/ListAdapter in TeamFragment(17366): getView() position: 4
01-21 15:56:45.165: D/HomeFragment(17366): onTick() in CountDownTimer - just before counterTV.setText(...)
01-21 15:56:45.170: D/ListAdapter in TeamFragment(17366): getView() position: 0
01-21 15:56:45.185: D/ListAdapter in TeamFragment(17366): getView() position: 1
01-21 15:56:45.200: D/ListAdapter in TeamFragment(17366): getView() position: 2
01-21 15:56:45.215: D/ListAdapter in TeamFragment(17366): getView() position: 3
01-21 15:56:45.225: D/ListAdapter in TeamFragment(17366): getView() position: 4
01-21 15:56:45.245: D/ListAdapter in TeamFragment(17366): getView() position: 0
01-21 15:56:45.260: D/ListAdapter in TeamFragment(17366): getView() position: 1
01-21 15:56:45.265: D/ListAdapter in TeamFragment(17366): getView() position: 2
01-21 15:56:45.270: D/ListAdapter in TeamFragment(17366): getView() position: 3
01-21 15:56:45.270: D/ListAdapter in TeamFragment(17366): getView() position: 4 
```

首页片段：

```
public class HomeFragment extends SherlockFragment {
    (...)

    private OpeningCeremonyTimer countDownTimer;
    private TextView counterTV;

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        (...)

        countDownTimer = new OpeningCeremonyTimer(initialTime, 5000);
        countDownTimer.start();

        return view;
    }

    private class OpeningCeremonyTimer extends CountDownTimer {
        private StringBuilder time = new StringBuilder();

        public OpeningCeremonyTimer(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);

        }

        @Override
        public void onTick(long millisUntilFinished) {
            time.setLength(0);
            if (millisUntilFinished > DateUtils.DAY_IN_MILLIS) {
                long count = millisUntilFinished / DateUtils.DAY_IN_MILLIS;
                if (count > 1)
                    time.append(count).append(" days ");
                else
                    time.append(count).append(" day ");
                millisUntilFinished %= DateUtils.DAY_IN_MILLIS;
            }

            time.append(DateUtils.formatElapsedTime(Math.round(millisUntilFinished / 1000d)));

            Log.d(TAG, "onTick() in CountDownTimer - just before counterTV.setText(...)");
            counterTV.setText(time.toString());
        }

        @Override
        public void onFinish() {
            counterTV.setText(DateUtils.formatElapsedTime(0));

        }

    }
} 
```

团队片段：

```
public class TeamFragment extends SherlockFragment {
    (...)

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        (...)

        TeamFragmentListAdapter matchesListAdapter = new TeamFragmentListAdapter(context, matchesList);
        matchesLV.setAdapter(matchesListAdapter);

        return view;
    }
} 
```

这是我的主要布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        ads:adSize="SMART_BANNER"
        ads:adUnitId="xxx"
        ads:loadAdOnCreate="true"/>

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@id/adView"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:54:36.390

我解决了这个问题。我刚刚在我的 ListView 中将 layout_height="wrap_content" 更改为 layout_height="match_parent"。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<ListView
    android:id="@+id/groupsLV"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="@null"
    android:dividerHeight="0dp" >
</ListView> 
```

有关 ListViews 中 wrap_conent 和 match_parent 的更多信息在这里：[http ://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

# c# - 如何在 SQLite 中设置自动时间戳？

> ID：14461851
> 
> 赞同：165
> 
> 时间：2013-01-22T15:17:51.017
> 
> 标签：c#, sqlite, timestamp

我有一个 SQLite 数据库，版本 3，我正在使用 C# 创建一个使用该数据库的应用程序。

我想在表中使用时间戳字段进行并发，但我注意到当我插入一条新记录时，该字段未设置，并且为空。

例如，在 MS SQL Server 中，如果我使用由数据库更新的时间戳字段，我不必自己设置。这在 SQLite 中可能吗？

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2013-01-22T15:40:39.457

只需为字段声明一个默认值：

```
CREATE TABLE MyTable(
    ID INTEGER PRIMARY KEY,
    Name TEXT,
    Other STUFF,
    Timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
); 
```

但是，如果您的`INSERT`命令明确将此字段设置为`NULL`，它将被设置为`NULL`。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-12-17T06:24:45.973

您可以在 SQLite 的表中创建 TIMESTAMP 字段，请参见：

```
CREATE TABLE my_table (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    name VARCHAR(64),
    sqltime TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
);

INSERT INTO my_table(name, sqltime) VALUES('test1', '2010-05-28T15:36:56.200');
INSERT INTO my_table(name, sqltime) VALUES('test2', '2010-08-28T13:40:02.200');
INSERT INTO my_table(name) VALUES('test3'); 
```

这是结果：

```
SELECT * FROM my_table; 
```

![在此处输入图像描述](../Images/3ed8b36ff8b7fa3e4e112ade70a6e023.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-09-26T06:17:33.220

阅读[datefunc](https://sqlite.org/lang_datefunc.html)自动日期时间完成的工作示例是：

```
sqlite> CREATE TABLE 'test' ( 
   ...>    'id' INTEGER PRIMARY KEY,
   ...>    'dt1' DATETIME NOT NULL DEFAULT (datetime(CURRENT_TIMESTAMP, 'localtime')), 
   ...>    'dt2' DATETIME NOT NULL DEFAULT (strftime('%Y-%m-%d %H:%M:%S', 'now', 'localtime')), 
   ...>    'dt3' DATETIME NOT NULL DEFAULT (strftime('%Y-%m-%d %H:%M:%f', 'now', 'localtime'))
   ...> ); 
```

让我们以启动自动日期时间完成的方式插入一些行：

```
sqlite> INSERT INTO 'test' ('id') VALUES (null);
sqlite> INSERT INTO 'test' ('id') VALUES (null); 
```

存储的数据清楚地表明前两个是相同的但不是第三个功能：

```
sqlite> SELECT * FROM 'test';
1|2017-09-26 09:10:08|2017-09-26 09:10:08|2017-09-26 09:10:08.053
2|2017-09-26 09:10:56|2017-09-26 09:10:56|2017-09-26 09:10:56.894 
```

请注意，SQLite 函数用括号括起来！在一个例子中展示它有多难？

玩得开心！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-05-30T12:44:24.737

你可以使用触发器。效果很好

```
CREATE TABLE MyTable(
ID INTEGER PRIMARY KEY,
Name TEXT,
Other STUFF,
Timestamp DATETIME);

CREATE TRIGGER insert_Timestamp_Trigger
AFTER INSERT ON MyTable
BEGIN
   UPDATE MyTable SET Timestamp =STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW') WHERE id = NEW.id;
END;

CREATE TRIGGER update_Timestamp_Trigger
AFTER UPDATE On MyTable
BEGIN
   UPDATE MyTable SET Timestamp = STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW') WHERE id = NEW.id;
END; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-06-05T18:44:03.273

为了补充上面的答案......

如果您使用的是 EF，请使用 Data Annotation [Timestamp] 装饰属性，然后在您的上下文类中转到覆盖的 OnModelCreating，并添加以下 Fluent API 代码：

```
modelBuilder.Entity<YourEntity>()
                .Property(b => b.Timestamp)
                .ValueGeneratedOnAddOrUpdate()
                .IsConcurrencyToken()
                .ForSqliteHasDefaultValueSql("CURRENT_TIMESTAMP"); 
```

它将为将插入此表中的每个数据设置一个默认值。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-02-20T06:44:18.947

您可以使用自定义日期时间...

```
 create table noteTable3 
 (created_at DATETIME DEFAULT (STRFTIME('%d-%m-%Y   %H:%M', 'NOW','localtime')),
 title text not null, myNotes text not null); 
```

使用 'NOW','localtime' 获取当前系统日期，否则它将在您的数据库中插入时间后在您的数据库中显示过去或其他时间。

感谢您...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-04-12T08:25:36.733

如果您使用 SQLite DB-Browser，您可以通过以下方式更改默认值：

1.  选择数据库结构
2.  选择表
3.  修改表
4.  在您的列中，将值放在“默认值”下：***=(datetime('now','localtime'))***

我建议您之前更新您的数据库，因为值中的错误格式可能会导致 SQLLite 浏览器出现问题。

# jquery - jquery addClass() 到多个类的第一个位置

> ID：14461853
> 
> 赞同：14
> 
> 时间：2013-01-22T15:17:55.033
> 
> 标签：jquery

它能做什么：

```
<p class="foo"></p>
$('p').addClass('bar'); 
```

输出：

```
<p class="foo bar"></p> 
```

我需要的：

```
<p class="bar foo"></p> 
```

那么是否可以将一个类添加到一个元素的第一个位置？

编辑（上下文）：现在最后一堂课有一个拆分功能。如果添加了另一个类，则它也将附加到第二个拆分数组中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-23T22:50:29.080

```
 (function($) {

    jQuery.fn.extend({
        prependClass: function(newClasses) {
            return this.each(function() {
                var currentClasses = $(this).prop("class");
                $(this).removeClass(currentClasses).addClass(newClasses + " " + currentClasses);
            });
        }
    });

})(jQuery); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T15:21:39.493

```
function prependClass(sel, strClass) {
    var $el = jQuery(sel);

    /* prepend class */
    var classes = $el.attr('class');
    classes = strClass +' ' +classes;
    $el.attr('class', classes);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-10T12:30:31.170

这是另一种方法。

```
$('#foo').attr('class', 'new-class ' + $('#foo').attr('class')); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-22T15:20:38.513

由于您对`className`字符串的控制有限，这根本不应该成为您的依赖项，但您可以这样做：

```
$("p").removeClass('foo').addClass('bar foo'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T15:22:02.453

**你可以试试这个，现场演示：**

[http://jsfiddle.net/oscarj24/eZe4b/](http://jsfiddle.net/oscarj24/eZe4b/)

```
$('p').prop('class', 'bar foo'); 
```

否则，您将需要使用`addClass`并按该顺序`removeClass`获得`bar foo`结果。

* * *

另一方面，我完全不明白您的问题，但是如果您只想将`bar foo`类添加到第一个`p`元素，请执行以下操作：

`$('p').eq(0).prop('class', 'bar foo');`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-04T15:59:03.313

这是一个**没有破解**的解决方案：

```
$(".product").each(function(i, el) {
  var cList = [];

  $.each(this.classList, function(index, val) {
    cList.push(val);
  })

  this.classList.remove(...cList);

  cList.unshift("first-class");

  this.classList.add(...cList);

  // here it is
  console.log(this.classList);
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<ul>
  <li class="product type-product status-publish">a</li>
  <li class="product type-product status-publish">b</li>
  <li class="product type-product status-publish">c</li>
</ul>
```

# sql - 创建实体关系图

> ID：14461854
> 
> 赞同：1
> 
> 时间：2013-01-22T15:17:59.933
> 
> 标签：sql, sql-server

我创建了系统的 ERD，现在我想创建一个 SQL 代码。

![这是我 ERD 中的一张表](../Images/c9ece52f137b0229537a28164ff1b400.png)

那么 SQL 代码应该是这样的吗？

```
CREATE TABLE Student
(
    StudentID    INT NOT NULL IDENTITY PRIMARY KEY,
    FirstName    VARCHAR(255),
    LastName     VARCHAR(255),
    ADDRESS      VARCHAR(255),
    PhoneNumber  VARCHAR(255),
    Email        VARCHAR(255),
    GroupID      INT NOT NULL FOREIGN KEY
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:31:56.693

您的问题在于`FOREIGN KEY`您的查询部分，您没有在那里定义外键。如果您现在删除它，您的查询将起作用，但没有定义的 FK：

```
CREATE TABLE Student
(
    StudentID    INT NOT NULL IDENTITY PRIMARY KEY,
    FirstName    VARCHAR(255),
    LastName     VARCHAR(255),
    ADDRESS      VARCHAR(255),
    PhoneNumber  VARCHAR(255),
    Email        VARCHAR(255),
    GroupID      INT NOT NULL 
); 
```

如果要创建外键，则需要执行以下操作（使用正确的表和列）：

```
CREATE TABLE Student
(
    StudentID    INT NOT NULL IDENTITY PRIMARY KEY,
    FirstName    VARCHAR(255),
    LastName     VARCHAR(255),
    ADDRESS      VARCHAR(255),
    PhoneNumber  VARCHAR(255),
    Email        VARCHAR(255),
    GroupID      INT NOT NULL REFERENCES Group(Group_ID)
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:32:22.030

您的“外键”声明不完整 - 您需要说明外键引用的表/列。

如果您只想构建表格，

```
CREATE TABLE Student
(
    StudentID    INT NOT NULL IDENTITY PRIMARY KEY,
    FirstName    VARCHAR(255),
    LastName     VARCHAR(255),
    ADDRESS      VARCHAR(255),
    PhoneNumber  VARCHAR(255),
    Email        VARCHAR(255),
    GroupID      INT NOT NULL); 
```

应该管用。

# .net - .NET exe 文件需要在 .NET 4 中执行

> ID：14461855
> 
> 赞同：0
> 
> 时间：2013-01-22T15:18:00.477
> 
> 标签：.net, .net-4.0, .net-3.5, .net-4.5

我有一个在 .NET 3.5 中开发的应用程序。由于 PC 具有 .NET 4.0，此应用程序根本无法执行。应用程序总共包含 2 个 dll 和 2 个 exe（全部由我开发）。

我知道 .NET4.0 不向后兼容，因此出现了这个问题。现在，如何让我的应用程序在 .NET4.0 或 4.5 的 PC 上运行。我刚刚安装了 VS2010（有 VS2008）并想知道如何以及如何使应用程序在 .net <= 3.5 & >= 4.0 的 PC 上执行？安装 VS2010 后，我还没有编译或执行我在 3.5 下创建的应用程序。

我是否需要 2 个应用程序，1 个用于 3.5 和 1 个用于更高的 .net 版本？

需要你的指导......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:20:31.363

是的，您需要维护两个版本：

*   一个用于 >= .NET 4
*   一个用于 < .NET 4

通常，您会为 .NET 4 版本创建一个分支，并为旧框架的版本创建一个分支。

.NET 4 的分支将是您添加新功能的分支。
旧框架的分支不会收到任何新功能来鼓励人们迁移到 .NET 4。这个分支只会收到关键更新，如主要错误修复或安全漏洞修复。

# jquery - 客户端声明.ajax时如何写服务端

> ID：14461859
> 
> 赞同：0
> 
> 时间：2013-01-22T15:18:12.553
> 
> 标签：jquery, asp.net, ajax

我正在使用一个评估培训活动的 jquery 库。基本上这里是对培训日期进行评分的客户端代码：

```
$('#rateItYours').bind('rated reset', function (e) {
                var ri = $(this);
                var value = ri.rateit('value');
                var trainingID = $("#MainContent_hlTrainingDateID").text();

                //maybe we want to disable voting? ri.rateit('readonly', true);

                $.ajax({
                url: 'RateIt.aspx', //your server side script
                data: { id: trainingID, value: value }, //our data
                type: 'POST',
                success: function (data) {
                $('#response').append('<li>' + data + '</li>');
                },
                error: function (jxhr, msg, err) {
                $('#response').append('<li style="color:red">' + msg + '</li>');
                }
                });
            }); 
```

所以我很容易使用以下方法获得评级的价值：

`var value = ri.rateit('value');`

而且我还有培训日期所需的数据库 ID：

`var trainingID = $("#MainContent_hlTrainingDateID").text();`

所以我可以同时提醒`value`和`trainingID`。我的问题是我从来没有写过任何可以`ajax()`打电话的东西。所以我看到它通过了 url `RateIt.aspx`，所以我创建了一个名为 RateIt.aspx 的新网络表单。到目前为止一切都很好......但是这个 RateIt.aspx 的代码应该如何拦截`trainingID`and `value`，如此处所述：

`data: { id: trainingID, value: value }, //our data`

所以我正在使用 chrome 开发人员工具，我看到在我添加 RateIt.aspx 之前它失败了，说它找不到这个资源。因此，一旦我创建了 RateIt.aspx，chrome 就没有报告错误，但问题是我想了解这个 ajax 调用以及如何编写 RateIt.aspx。`data`从线中获取这些值会是什么样子。

有人可以解释一下 RateIt.aspx 的外观并提供指导吗？也许显示实际获取这些值并警告它们的代码（最好在 C# 中）或某种模拟代码以查看我是否获得了正确的值？对不起菜鸟问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:01:39.753

基于[此](http://blog.degree.no/2012/03/call-asp-net-ajax-page-methods-using-jquery/)，在您的 RateIt.aspx 页面代码隐藏中创建一个 updateRating 方法

```
[WebMethod]
public static string updateRating(string id, string value)
{
   // do something with the parameters

} 
```

并在您的 ajax 方法中显式调用它

```
url: 'RateIt.aspx/updateRating', //your server side script 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:44:35.010

您可以使用此代码获取它

```
var data = Context.Request["data"]; 
```

然后取决于你的json格式

```
var js = new System.Web.Script.Serialization.JavaScriptSerializer();
var obj = js.Deserialize<Dictionary<string,string>>(data); // or int or object for second argument depending on your data 
```

然后字典将包含 2 项，一项具有键 id，一项具有键值，每个项都包含提供的值之一。

# javascript - jqplot y轴文字高度有剪辑

> ID：14461869
> 
> 赞同：2
> 
> 时间：2013-01-22T15:18:38.060
> 
> 标签：javascript, jquery, jqplot

在 y 轴上，我使用带有“/n”的 2 行文本，但我的文本一直在剪裁如何扩展文本行高？

```
 axesDefaults: {
            tickRenderer: $.jqplot.CanvasAxisTickRenderer,
            tickOptions: {
                angle: 0,
                fontSize: '10pt'
            },
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
            labelOptions: {
                //angle: -90,
                fontSize: '10pt'
            }
        },
        axes: {
            yaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                label: ' ',
                //Group Category Name
                ticks: groupname,
                tickOptions: { fontSize: '11px', labelPosition:'middle', formatString :'%d'}
            },
            xaxis:
            {
                tickOptions: { angle: 0, fontSize: '11px', formatString :'%d' },
                max: MaxX
            }
        } 
```

谢谢

[http://img252.imageshack.us/img252/6821/20130122221030.png](http://img252.imageshack.us/img252/6821/20130122221030.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:52:20.870

使用`tickSpacing`y 轴

```
tickSpacing = 75 
```

图表上刻度之间的近似像素间距。在自动缩放期间使用。这个数字将是一个上限，实际间距会更小。

参考：http: [//insar.miami.edu/timeseries/dist/docs/files/jqplot-core-js.html](http://insar.miami.edu/timeseries/dist/docs/files/jqplot-core-js.html)

# eclipse - 使用 Eclipse 在服务器 Tomcat 7 上运行 Web 项目

> ID：14461870
> 
> 赞同：0
> 
> 时间：2013-01-22T15:18:39.073
> 
> 标签：eclipse, gwt

我有使用 GWT 的大型 Web 应用程序。当它启动时，会在客户端打开一个对话窗口以进行日志记录。LogDialog 由两个文本字段（密码和名称）组成。为什么当我从 Eclipse 使用选项在服务器上运行时，我只能看到加载图片（它从开始出现）。但随后 LogDialog 和主菜单不出现。据我所知，浏览器必须加载一个 jscript 才能显示 Logdialog。我试图从 GooGle Chrome 中查看网络应用程序，我发现它没有加载 Cashier.js（jscript 文件）并向我显示加载图片。我究竟做错了什么？我怎样才能发现错误？据我所知，GWT 编译器生成客户端 Javascript 代码。Web 应用程序使用数据库来存储日志名和通行证。

# bash - bash set -x 和流

> ID：14461871
> 
> 赞同：3
> 
> 时间：2013-01-22T15:18:40.030
> 
> 标签：bash

您能否向我解释以下测试脚本的输出：

```
# prepare test data
echo "any content" > myfile

# set bash to inform me about the commands used
set -x

cat < myfile 
```

输出：

```
+cat
any content 
```

即为什么以 + 开头的行不显示“< myfile”位？

如何强制 bash 做到这一点。我需要通知用户我的脚本的行为，如下所示：

```
mysql -uroot < the_new_file_with_a_telling_name.sql 
```

我不能。

**编辑**：附加上下文：我使用变量。原始代码：

```
SQL_FILE=`ls -t $BACKUP_DIR/default_db* | head -n 1` # get latest db
mysql -uroot mydatabase < ${SQL_FILE} 
```

`-v`不会扩展变量`cat file.sql | mysql`并将产生两行：

```
+mysql
+cat file.sql 
```

所以也没有诀窍。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T15:30:53.843

您可以尝试`set -v`或`set -o verbose`改为启用命令回显。

在我的机器上运行的示例：

```
[me@home]$ cat x.sh 
echo "any content" > myfile
set -v
cat < myfile

[me@home]$ bash x.sh 
cat < myfile
any content 
```

这里需要注意的是，它`set -v`只是在字面上回显命令，而不进行任何 shell 扩展或迭代。正如 Jonathan 在评论中指出的那样，如果文件名是在变量中定义的（例如`command < $somefile`），这可能是一个问题，从而难以识别`$somefile`所指的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T15:28:04.413

那里的区别很简单：

*   在第一种情况下，您正在使用程序`cat`，并且您正在将 的内容重定向`myfile`到 的标准输入`cat`。这意味着您正在执行`cat`，这就是您执行`bash`时所显示的`set -x`；

*   在可能的第二种情况下，您可以使用`cat myfile`，正如@Jonathan Leffler 所指出的那样，您会看到`+cat myfile`，这就是您正在执行的：`cat`带有参数的程序`myfile`。

来自`man bash`：

```
 -x      After  expanding  each  simple  command,  for command, case command,
          select command, or arithmetic  for  command,  display  the  expanded
          value  of PS4, followed by the command and its expanded arguments or
          associated word list. 
```

如您所见，它只是显示扩展的命令行及其参数列表——重定向既不是扩展命令的`cat`一部分，也不是其参数列表的一部分。

正如@Shawn Chin 所指出的，您可以使用`set -v`, 其中来自`man bash`：

```
 -v      Print shell input lines as they are read. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T15:29:18.307

基本上，这就是`bash`它的`-x`命令的工作方式。我检查了一个 Solaris 5.10 盒子，`/bin/sh`那里（接近真正的 Bourne shell）也省略了 I/O 重定向。

给定命令文件 ( `x3.sh`)：

```
echo "Hi" > Myfile
cat < Myfile
rm -f Myfile 
```

Solaris 机器上的跟踪输出是：

```
$ sh -x x3.sh
+ echo Hi 
+ cat 
Hi
+ rm -f Myfile 
$ /bin/ksh -x x3.sh
+ echo Hi
+ 1> Myfile
+ cat
+ 0< Myfile
Hi
+ rm -f Myfile
$ bash -x x3.sh
+ echo Hi
+ cat
Hi
+ rm -f Myfile
$ 
```

请注意，`bash`and `sh`（它们绝对是不同的可执行文件）产生相同的输出。输出包括 I/O 重定向信息 — Korn shell的`ksh`得分 1。

在此特定示例中，您可以使用：

```
cat myfile 
```

查看文件的名称。在一般情况下，这很困难，但请考虑使用`ksh`代替`bash`来获取报告的 I/O 重定向。

# javascript - 谷歌分析凭据

> ID：14461872
> 
> 赞同：0
> 
> 时间：2013-01-22T15:18:44.180
> 
> 标签：javascript, google-analytics-api, google-api-php-client

我目前是通过 Javascript 使用 Google 分析 API 的新手。我正在实现一些图表，对于第一次加载，页面将我重定向到谷歌网站以使用 Analytics 帐户登录，然后返回到我的原始页面，刷新和图表显示。

现在，除了重定向到谷歌分析之外，还有其他方法可以将凭据存储在代码后面或配置文件中，并且在页面加载时会从那里读取？

让我知道是否还有其他方法/想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:25:34.027

我可以给你一些帮助。

1.  最初我们需要对用户进行身份验证，为此我们将用户重定向到 Google。[主要使用 Oauth]

2.  认证完成后。Google 将使用访问令牌重定向到您的网站。

3.  访问令牌是使用 Management API 和核心报告 API 从 Google 数据库中获取分析数据的关键。

4.  您必须与谷歌进行一些交流以使令牌成为永久令牌，并且您可以将其存储在您的数据库中。但根据某些条件，此令牌可能会过期。

5.  访问此网址：[https](https://developers.google.com/analytics/devguides/) ://developers.google.com/analytics/devguides/并了解 Google Analytics、Core Reporting API 和 Oauth Process

6.  下载这个用于 Google Analytics 的有用 PHP 客户端库[https://code.google.com/p/google-api-php-client/](https://code.google.com/p/google-api-php-client/)并玩得开心。

# asp.net-mvc - Moq - 我如何模拟像 HttpContext.Request.Url.Authority 对象这样的非虚拟成员？

> ID：14461874
> 
> 赞同：2
> 
> 时间：2013-01-22T15:18:48.367
> 
> 标签：asp.net-mvc, tdd, moq

我似乎无法使用*Moq*来模拟`HttpContext.Request.Url.Authority`，因为它是一种非虚拟方法。我得到以下异常：

```
{"Invalid setup on a non-virtual (overridable in VB) member: p => p.HttpContext.Request.Url.Authority"} 
```

我该如何克服呢？以下是我的测试方法：

```
[TestMethod]
public void ForgottenPasswordPost_Requested_CaptchaCorrectEmailExists()
{
    _testModel.ControllerContext.SetupGet(p => p.HttpContext.Session["Captcha"]).Returns("HelloWorld");
    _testModel.ControllerContext.SetupGet(p => p.HttpContext.Request.Url.Authority).Returns("www.localhost.com");
    _testModel.QMember.Setup(m => m.MemberExistsWithEmail(It.IsAny<string>())).Returns(true);

    var controllerUnderTest = _testModel.ReturnController();
    ForgottenPasswordModel model = new ForgottenPasswordModel() { Captcha = "HelloWorld" };

    //Act
    var actionResult = (RedirectToRouteResult)controllerUnderTest.ForgottenPassword(model);

    Assert.AreEqual("ForgottenPasswordConfirm", actionResult.RouteValues["action"]);
    Assert.AreEqual("a", actionResult.RouteValues["controller"]);
}

public class TestModel
{
    public UnregisteredController Controller { get; set; }
    public Mock<ControllerContext> ControllerContext { get; set; }
    public Mock<IQ_Member> QMember { get; set; }

    public TestModel()
    {
        ControllerContext = new Mock<ControllerContext>();
        QMember = new Mock<IQ_Member>();
    }

    public UnregisteredController ReturnController()
    {
        Controller = new UnregisteredController(QMember.Object);
        Controller.ControllerContext = ControllerContext.Object;
        return Controller;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T21:29:40.390

根据[此 SO post](https://stackoverflow.com/questions/1962010/moq-invalid-setup-on-a-non-overridable-member-x-x-getbytitleasdf)，您只能使用 Moq 实现虚拟/抽象成员。

在一般非 ASP.NET MVC 情况下，您可以

1.  使用允许覆盖非虚拟的、具体的类成员的模拟工具或

2.  编写您自己的包装类，将传递方法传递给静态/非虚拟成员，从这些包装类中提取接口，然后设计其余代码以依赖这些接口，然后可以轻松地模拟和注入依赖项。

我会推荐 #2 而不是上面的 #1，即使它会产生大量的工作，因为 #2 几乎肯定会导致代码更好地遵守[Dependency Inversion 原则](http://en.wikipedia.org/wiki/Dependency_inversion_principle)。

但是，在您的情况下，我认为有一个相当简单的解决方案。

在代码行中

```
_testModel.ControllerContext.SetupGet(p => p.HttpContext.Request.Url.Authority).Returns("www.localhost.com"); 
```

*   `.HttpContext`是抽象的，所以可以模拟
*   `.Request`是抽象的，所以可以模拟
*   `.Url`是虚拟的，所以可以模拟
*   `.Authority`是一个非虚拟字符串属性，这就是给你带来问题的原因

试试这个，因为这`.Url`是你可以模拟的最深的部分：

```
_testModel.ControllerContext.SetupGet(p => p.HttpContext.Request.Url).Returns(new Uri("http://www.localhost.com")); 
```

# google-maps - 谷歌地图折线数组

> ID：14461875
> 
> 赞同：1
> 
> 时间：2013-01-22T15:18:50.267
> 
> 标签：google-maps

我是谷歌地图应用程序的新手。我读过一篇关于折线数组的文章（https://developers.google.com/maps/documentation/javascript/overlays#PolylineArrays）。在示例中，它使用 Event Click 创建了一个动态数组。我的问题是，我是否可以在数组变量中创建折线而不是在单击事件上？

这是来自谷歌文档的代码：

```
var poly;
var map;

function initialize() {
  var chicago = new google.maps.LatLng(41.879535, -87.624333);
  var mapOptions = {
    zoom: 7,
    center: chicago,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

  var polyOptions = {
    strokeColor: '#000000',
    strokeOpacity: 1.0,
    strokeWeight: 3
  }
  poly = new google.maps.Polyline(polyOptions);
  poly.setMap(map);

  // Add a listener for the click event
  google.maps.event.addListener(map, 'click', addLatLng);
}

/**
 * Handles click events on a map, and adds a new point to the Polyline.
 * @param {MouseEvent} mouseEvent
 */
function addLatLng(event) {

  var path = poly.getPath();

  // Because path is an MVCArray, we can simply append a new coordinate
  // and it will automatically appear
  path.push(event.latLng);

  // Add a new marker at the new plotted point on the polyline.
  var marker = new google.maps.Marker({
    position: event.latLng,
    title: '#' + path.getLength(),
    map: map
  });
} 
```

我制作了一些自己的代码：

```
<script>
        var line;
        var map;
        function initialize() {
            var mapDiv = document.getElementById('map-canvas');
            map = new google.maps.Map(mapDiv, {
                center: new google.maps.LatLng(0, -180),
                zoom: 2,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            var path = [new google.maps.LatLng(37.772323, -122.214897),
                new google.maps.LatLng(21.291982, -157.821856)];

            line = new google.maps.Polyline({
                path: path,
                strokeColor: '#ff0000',
                strokeOpacity: 1.0,
                strokeWeight: 2
            });

            line.setMap(map)
        }

        function addNewPoint(position) {
            var path = line.getPath();
            path.push(position);
        }

        ''''' I create a single variable for a new path.
        var NewPath = [new google.maps.LatLng(-27.46758, 153.027892)];
        addNewPoint(NewPath);

        google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
```

当我运行它时。这没用。感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:53:14.203

我认为你需要改变这一点：

```
var NewPath = [new google.maps.LatLng(-27.46758, 153.027892)];
addNewPoint(NewPath); 
```

对此：

```
var NewPath = new google.maps.LatLng(-27.46758, 153.027892);
addNewPoint(NewPath); 
```

所以你只通过一个 LatLng 点，而不是一个包含一个点的数组。所以它更接近于你给出的例子，

```
path.push(event.latLng); 
```

# html - 去除 CSS 中元素之间的空白

> ID：14461879
> 
> 赞同：1
> 
> 时间：2013-01-22T15:19:03.930
> 
> 标签：html, css

我做了这个简单的 3 部分 css 布局，但它的行为并不像它应该的那样。

CSS

```
#main-container {
    width: 1000;
    margin: 0 auto;
    height:100%;
}

.header{ 
    background-color:black; 
    width:100%; 
    height:150px;
}

.headertext{
    color:#A3BB02;
    font-size: xx-large;
}

.contenu{ 
    width:100%; 
    background-color:#A3BB02;  
    }

.footer{ 
    width:100%; 
    background-color:black; 
    min-height:100px; 
    } 
```

html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Intro Projet Cloud</title>
    <link href='/css/design.css' rel='stylesheet' type='text/css' />
  </head>

  <body>
    <div id="main-container">
        <div class="header">
            <br/><br/><br/>
            <span class="headertext">blablabla</span>
        </div>
        <div class="contenu">
            <p>
                blabla
            </p>
            <p>
                blabla
            </p>
            <p>
                blabla
            </p>
            <p>
                <a href="projetcloudm2">Acceder a l'application</a>
            </p>
        </div>
        <div class="footer"></div>
    </div>
  </body>
</html> 
```

结果 ![结果](../Images/dd3b919b5b19c93e15730f758361b621.png)

contenu 与页眉和页脚之间的白条从何而来？5 月 css 中没有边距。

请注意，这是使用 Eclipse 中的 google app 引擎完成的 web 项目

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T15:21:27.247

默认情况下，段落有一个边距（通常是 1em 0）。将此添加到您的样式中以重置它：

```
p {
  margin: 0;
} 
```

见[演示](http://jsfiddle.net/ghFdm/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T15:26:54.850

您有一个触发 Quirks 模式的 Doctype。这会导致浏览器模仿古代浏览器中的错误：

*   破坏了很多 CSS
*   使浏览器彼此不一致

使用触发标准模式的 Doctype。

由于您使用的是 HTML 4.01 Transitional，因此：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd"> 
```

（注意：HTML 4.01 过渡适用于将文档从 HTML 3.2 过渡到 HTML 4.01。新页面应根据 HTML 4.01 Strict 或 HTML 5 草案编写）。

* * *

您可能还有其他问题，但 Quirks 模式问题很大，因此在浏览器切换到标准模式之前不值得研究它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:24:13.590

您看到的是默认样式。考虑实施[一个体面的重置](http://necolas.github.com/normalize.css/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T15:29:01.993

```
.contenu p { 
    margin: 0; 
    padding: 10px 0 10px 0
} 
```

添加这个。这应该为您提供与现在相同的 p 之间的空间，但没有 div 之间的空格

# ruby-on-rails - 是否可以制作单独的输入字段并在提交后加入它们并保存到一个数据库列中？

> ID：14461880
> 
> 赞同：0
> 
> 时间：2013-01-22T15:19:10.263
> 
> 标签：ruby-on-rails, forms, formhelper

我有列 -`spent time`它是整数值。我想让它可供用户编辑，但我需要使它对用户友好。我的意思是输入字段数天，数小时等。

**我将以秒为单位存储花费的时间。**

例如：我将 2 设为花费时间输入字段，因此我将其乘以 3600 并将其添加到输入的其他结果中。

是否可以使用 Rails 3 来实现？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:41:32.540

Rails 提供了一个名为`date_select`（或者，对于日期时间字段，datetime_select）的函数。它们采用两个参数——模型实例名称和模型字段。将它们放在 form_for 块中，就像其他表单助手一样。

所以如果你想要一个日期时间字段，你会写：

datetime_select("post", "created_on")

然后你可以使用：

例如，在 MySQL 中，您可以使用该`UNIX_TIMESTAMP`函数返回整数倍：

```
SELECT UNIX_TIMESTAMP(created_at) FROM users 
```

更多来自[消息来源](http://www.railsrocket.com/date-and-time-fields-in-object-forms)。

# asp.net-mvc - 路由约束到特定文件类型

> ID：14461881
> 
> 赞同：3
> 
> 时间：2013-01-22T15:19:10.580
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, url-routing

我想写一个只适用于某些文件类型的包罗万象的路线。现在我有

```
routes.MapRoute("Template", "{*path}", new {controller = "Template", action = "Default"}); 
```

在我的其他路线的底部。这适用于捕获所有内容。但是，我还有其他一些我想忽略的遗留文件扩展名，所以暂时我需要这条最终路线来仅触发 .html 文件。

有我可以申请的路线限制吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:41:09.300

我想通了。享受。

```
using System;
using System.Linq;
using System.Web;
using System.Web.Routing;

namespace Project.App_Start
{
    public class FileTypeConstraint : IRouteConstraint
    {
        private readonly string[] MatchingFileTypes;

        public FileTypeConstraint(string matchingFileType)
        {
            MatchingFileTypes = new[] {matchingFileType};
        }

        public FileTypeConstraint(string[] matchingFileTypes)
        {
            MatchingFileTypes = matchingFileTypes;
        }

        public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
        {
            string path = values["path"].ToString();
            return MatchingFileTypes.Any(x => path.ToLower().EndsWith(x, StringComparison.CurrentCultureIgnoreCase));
        }
    }
} 
```

用法：

```
routes.MapRoute(
    "Template", 
    "{*path}", 
    new {controller = "Template", action = "Default"}, 
    new { path = new FileTypeConstraint(new[] {"html", "htm"}) }); 
```

# graphics - cuda中渐进光子映射的透明度

> ID：14461883
> 
> 赞同：0
> 
> 时间：2013-01-22T15:19:14.433
> 
> 标签：graphics, cuda, nvidia, graphic, optix

我正在开发一个基于 optix 的项目。我需要使用渐进光子映射，因此我尝试使用样本中的渐进光子映射，但没有实现透明材料。我用谷歌搜索了很多，还试图了解其他包含透明材料的样本（例如 Glass、Tutorial、whitted）。最后，我得到了如下解决方案；

1.  找到命中点（交点）（下面的h）
2.  从该点生成另一条射线
3.  **使用新生成点的颜色**

通过关注，您还可以找到该部分的代码，但我不明白为什么我会为新生成的光线（上面的第 3 部分）得到黑色（.0f，.0f，0.f）。

```
optix::Ray ray( h, t, rtpass_ray_type, scene_epsilon );
HitPRD refr_prd;
refr_prd.ray_depth = hit_prd.ray_depth+1;
refr_prd.importance = importance;

rtTrace( top_object, ray, refr_prd );

result += (1.0f - reflection) * refraction_color * refr_prd.attenuation; 
```

任何想法将不胜感激。请注意，在使用函数 rtTrace() 之后， **refr_prd.attenuation应该包含一些颜色。**我已经提到了反射和反射颜色来帮助你更好地理解这个过程。你可以简单地忽略它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:50:56.647

有多种方法可以诊断您的问题。

1.  通过移除反射光线的任何贡献来隔离折射光线的贡献。
2.  确保你有一个错过的节目。HitPRD::attenuation 需要被所有最接近的命中程序和未命中程序写入。如果您怀疑错过的程序被调用，请将您的错过颜色设置为明显不好的颜色（[1,0,1] 是我最喜欢的）。
3.  将 rtPrintf 与 rtContextSetPrintLaunchIndex 或 setPrintLaunchIndex 结合使用以打印出产品的各个值，以查看给定像素中哪个项为零。如果您不将输出限制为给定的启动索引，您将获得过多的输出。您可能还想打印出深度。

# web-applications - 您如何实现有效且安全的功能？

> ID：14461884
> 
> 赞同：0
> 
> 时间：2013-01-22T15:19:16.353
> 
> 标签：web-applications, security

我遇到的问题是：“我在安全方面做得太多了吗？” 或“我做的安全性太低了吗？”

首先，我需要实现一个“发布消息”功能和一个“编辑消息”功能。

这是一个基本的表结构：

`id, user_id, category_id, message_title, message_content`

这两种方法看起来很容易实现，但是当我想到安全性或黑客时，我开始担心......这是我担心的事情：

关于留言：

> 1.  用户会在数据库中提交超长消息吗？
> 2.  用户会进行 SQL 注入来破坏我的数据库吗？
> 3.  用户会继续发布消息，并使我的数据库充满吗？
> 4.  用户会提交无效的`category_id`吗？（例如，已删除或尚未出现或此用户无法使用该类别）

关于编辑消息：

> 1.  用户会编辑不属于他/她的消息吗？（破解`id`）
> 2.  用户会编辑无效的消息`id`吗？（例如，已删除或尚未出现）
> 3.  用户会在我的数据库中编辑 SQL 注入语句吗？
> 4.  用户会在数据库中编辑长消息吗？
> 5.  用户会编辑无效`category_id`吗？（例如，已删除或尚未出现或此用户无法使用该类别）

有几个问题我很担心。我可以将它分为两​​种类型：

1.  技术安全问题。（例如SQL注入、消息长度）
2.  程序逻辑问题。（例如，`category_id`不允许该用户使用）

我认为技术安全问题可以使用互联网上的一些标准库来实现，但程序逻辑问题让我抓狂。我应该实施所有检查吗？例如，在我执行相关的 SQL cmd 之前，检查 that `category_id`is for that`user`并检查是否`id`存在等。可以实现，但是非常耗时。还是我只需要假设每个输入都是有效的，并且用户不会破解`category_id`系统中的陌生人？请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:23:30.807

正如 Paul C 所说，你永远不应该相信你的用户。或者，更确切地说，您应该相信您的用户会在数据输入中犯所有可能的错误，以及一些恶意尝试破解数据库。

编写输入验证所需的时间将远远少于修复数据库中的问题所需的时间，即使如此，您仍然必须添加输入验证以防止出现类似问题。从一开始就验证一切要容易得多。

# ruby-on-rails-3.2 - 颜色框内的联系表格请求当前页面

> ID：14461885
> 
> 赞同：1
> 
> 时间：2013-01-22T15:19:15.963
> 
> 标签：ruby-on-rails-3.2, colorbox, contact-form, current-page

我正在使用 rails 3.2.8 并且我从本教程创建了一个联系表单：

[http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/](http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/)

现在我在一个颜色框中使用了这个表单

```
# Colorbox
gem 'colorbox-rails', '~> 0.0.9' 
```

如果我在几个页面上有这个颜色框，我如何让它与客户信息一起发送他们填写时所在的页面？

任何帮助，将不胜感激！如果您需要更多信息，请不要犹豫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:59:27.663

所要做的就是在联系控制器中添加一行

```
@message.submitted_on_page = request.env['HTTP_REFERER'] 
```

在您传递信息之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:05:32.293

将联系表格添加到您的 web 应用程序或网站的一种非常简单的方法是安装 Dropifi 联系小部件 ( [http://www.dropifi.com](http://www.dropifi.com) )。他们提供您正在寻找的解决方案。

# sql - 获取当年的总计 - SQL

> ID：14461887
> 
> 赞同：1
> 
> 时间：2013-01-22T15:19:18.860
> 
> 标签：sql, ms-access

我需要在访问数据库中使用 SQL 获取今年旅行的总里程数。目前我正在尝试以下查询，但它不起作用：

```
 SELECT 
      SUM(Mileage) 
   FROM 
      [Mileage-Expenses] 
   WHERE 
      YEAR(DatePurchased) = YEAR(CURRENT_TIMESTAMP) 
```

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:47:26.447

A `WHERE` clause based on `YEAR(DatePurchased)` requires the db engine evaluate that expression for *every row* in the table. You would get better performance by adding an index on `DatePurchased`, if you don't already have one, and then using a `WHERE` clause which allows the db engine to retrieve only the rows from the current year before computing `SUM(Mileage)`.

```
SELECT
    SUM(Mileage)
FROM 
    [Mileage-Expenses]
WHERE
        DatePurchased >= DateSerial(Year(Date()), 1, 1)
    AND DatePurchased < DateSerial(Year(Date()) + 1, 1, 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:24:36.430

我已经很久没有使用 MS Access 了，但据我记得它不支持`CURRENT_TIMESTAMP`，你需要使用`DATE()`or`NOW()`代替：

```
 SELECT 
      SUM(Mileage) 
   FROM 
      [Mileage-Expenses] 
   WHERE 
      YEAR(DatePurchased) = YEAR(DATE()) 
```

[http://office.microsoft.com/en-gb/access-help/use-current-date-and-time-in-calculations-HP001098479.aspx](http://office.microsoft.com/en-gb/access-help/use-current-date-and-time-in-calculations-HP001098479.aspx)

# gwt - 无法拖动对象 - 使用 dnd gwt 查询

> ID：14461888
> 
> 赞同：0
> 
> 时间：2013-01-22T15:19:21.903
> 
> 标签：gwt, gquery

我创建了以下标签网格，我希望它们可以拖动：

```
 public static Grid setLabels (String [] str){
    Label [] lbl =  new Label [str.length];
    Grid grid = new Grid(5,1);
    CellFormatter cellFormatter = grid.getCellFormatter();

    for(int i=0; i<str.length; i++){
        lbl[i] = new Label();
        lbl[i].setText(str[i]);
        DraggableWidget<Label> draggableLabel = new DraggableWidget<Label>(lbl[i]);

        draggableLabel.setRevert(RevertOption.ON_INVALID_DROP);
        draggableLabel.setDraggingZIndex(100);
        draggableLabel.setDraggingCursor(Cursor.MOVE);
        grid.setWidget(i, 0, draggableLabel);
        cellFormatter.setHeight(i, 0, "50px");
    }
    return grid;
} 
```

然后将网格添加到面板上。一切都显示正常。然后我创建一个可放置的小部件。

```
 public static void createDND(){
    final Label moveHere = new Label("Move here!");
    DroppableWidget<Label> dnd1 = new DroppableWidget<Label>(moveHere);

       dnd1.addDropHandler(new DropEventHandler() { 
           public void onDrop(DropEvent event) {
            Widget droppedLabel= event.getDraggableWidget();
            moveHere.setText("");

          }
        });
        dndPanel1.add(dnd1);
    } 
```

但是标签不能拖放。我觉得某事不见了，但我不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:45:17.667

I would say go NATIVE and make use of GWT HTML5 Drag and Drop support. You also have a sample project set up in GWT source code [samples](http://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples).

Demo - [http://gwt-cloudtasks.appspot.com/](http://gwt-cloudtasks.appspot.com/)

Also Refer - [Drag and Drop in GWT 2.4](https://stackoverflow.com/questions/7381138/drag-and-drop-in-gwt-2-4)

# responsive-design - Zurb 响应式图像大小不起作用

> ID：14461890
> 
> 赞同：4
> 
> 时间：2013-01-22T15:19:31.583
> 
> 标签：responsive-design, image-resizing, zurb-foundation

我使用 zurb，我有 1 行和 4 列，我在这 4 列中有 4 个图像。图像的大小并不完全相同，因此在获得 100% 清晰度的图像之前，我必须为每个图像指定宽度和高度。

我想问一下我必须使用哪个类以及如何使我的图像响应（比率），同时我正在减小浏览器窗口的大小，并且随之而来的是响应式列的大小？

这是我的代码：

```
<div class="row">
   <div class="three columns">
      <img src="something.jpg" style="width:220px; height:200px;" />
   </div>
   <div class="three columns">
      <img src="something.jpg" style="width:223px; height:190px;" />
   </div>
   <div class="three columns">
      <img src="something.jpg" style="width:210px; height:150px;" />
   </div>
   <div class="three columns">
      <img src="something.jpg" style="width:210px; height:195px;" />
   </div>
</div> 
```

我不使用内联 CSS，它只是宽度和高度的示例。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:07:03.550

我以某种方式在 .css 中对这部分进行了评论：

```
/* line 45, ../../../../../../../../Library/Ruby/Gems/1.8/gems/zurb-foundation-3.0.4/stylesheets/foundation/grid.scss */
img, object, embed {
  max-width: 100%;
  height: auto;
} 
```

有了这个，我的图像是响应式的。

# maven - Liquibase 与 Maven

> ID：14461891
> 
> 赞同：2
> 
> 时间：2013-01-22T15:19:31.920
> 
> 标签：maven, liquibase

我想为 Java EE 项目启动 Liquibase，这样我就可以在生产服务器上轻松进行 DB-Updates。

我在理解开始时需要什么时遇到问题。我阅读了许多示例，您需要下载 liquibase-core，将其解压缩并将 .jar 放入您的 PATH。我认为 Maven 不需要这样做。

**在 pom.xml 中包含依赖项（核心和 liquibase-maven-plugin）应该足够/应该相同？**

```
 <dependency>
        <groupId>org.liquibase</groupId>
        <artifactId>liquibase-maven-plugin</artifactId>
        <version>2.0.5</version>
        <type>maven-plugin</type>
    </dependency>
    <dependency>
        <groupId>org.liquibase</groupId>
        <artifactId>liquibase-core</artifactId>
        <version>2.0.5</version>
    </dependency> 
```

这可能是一个愚蠢的问题，但我几乎没有使用 Maven 的经验，也没有使用 Liquibase 的经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-02-19T18:08:42.283

在我看来，您对将 liquibase 添加到项目中的方法有点困惑。我们不应该将 liquibase 理解为一个简单的依赖项，它是一个 **maven 插件**。

如果您看到我的一些配置文件以更好地理解我所指的内容，我认为这可能很清楚：

## pom.xml：

```
<build>
    <sourceDirectory>src</sourceDirectory>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.6.2</version>
                <configuration>
                    <source>1.8</source>
                    <target>1.8</target>
                    <excludes>
                        <exclude>**/test/*</exclude>
                        <exclude>**/test/me/*</exclude>
                    </excludes>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>3.1.0</version>
                <configuration>
                    <warSourceDirectory>WebContent</warSourceDirectory>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
                <dependencies>
                    <dependency>
                        <groupId>org.codehaus.groovy</groupId>
                        <artifactId>groovy-eclipse-compiler</artifactId>
                        <version>2.9.2-01</version>
                    </dependency>
                    <dependency>
                        <groupId>org.codehaus.groovy</groupId>
                        <artifactId>groovy-eclipse-batch</artifactId>
                        <version>2.4.3-01</version>
                    </dependency>
                </dependencies>
            </plugin>
            <plugin>
                <groupId>org.liquibase</groupId>
                <artifactId>liquibase-maven-plugin</artifactId>
                <version>3.5.3</version>
                <configuration>
                    <propertyFile>src/tv/be/persistence/liquibase/code/dsv.properties</propertyFile>
                </configuration>
                <executions>
                    <execution>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>update</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

## dsv.properties：

```
driver: com.mysql.jdbc.Driver
classpath: [local_path]/mysql-connector-java/5.1.41/mysql-connector-java-5.1.41.jar
url: jdbc:mysql://[db_server_ip]:3306/schema_db
username: user1
password: masterkey
changeLogFile: src/tv/be/persistence/liquibase/code/master.xml
contexts=local 
```

注意*dsv.properties*文件。每个 liquibase 上下文都需要一个像这样的适当属性文件来指定架构和更改日志。这提供了实时处理不同环境（*dsv、local、test、pro、...*）的能力，并仅在指定的环境/上下文中应用更改。

## 项目文件夹：

[![在此处输入图像描述](../Images/cf5dc29cee5330643973b817081bf16e.png)](https://i.stack.imgur.com/iHIKc.png)

这种结构对我们的团队来说非常干净，因为我们将所有变更日志按版本和功能、过程和视图与根数据库更改分开，但这里最重要的是每个更改都有相关的问题/任务代码，我们可以轻松跟踪所有内容.

## mvn:

要执行 liquibase 插件，您应该执行该 mvn 命令：

```
mvn liquibase:update 
```

由于 liquibase pom 的插件参数，您还可以自动更新数据库：

```
<execution>
   <phase>process-resources</phase>
   <goals>
       <goal>update</goal>
   </goals>
</execution> 
```

我们在几个项目中使用 liquibase，并且没有深入了解使用它的**优点**，数据库版本控制、历史记录、不同项目的通用逻辑和维护是我们开发团队的强制性要求。

# c++ - Wix 安装程序 - “项目” Releasex64 / Buildx64 的主要输出

> ID：14461898
> 
> 赞同：1
> 
> 时间：2013-01-22T15:19:43.260
> 
> 标签：c++, visual-studio-2010, installation, wix

我的项目是 C++/MFC，我正在从 VS2010 转换到 VS2012。我正在使用 Wix 3.7 作为安装程序。在 Visual Stduio 的安装程序中，我可以从发布或调试库中获取项目的主要输出。如下图所示： ![在此处输入图像描述](../Images/3cf3010c53176e283eeb384397edee10.png)

我发现我可以通过添加对 Wix 项目的引用、将 HEAT 收获设置为“TRUE”并将组件添加到我想要添加文件的目录来从**Build中执行相同的操作：**

![在此处输入图像描述](../Images/891a16c7ce9a08462ae4da181f205ac6.png)

我怎样才能为发布做同样的事情？我只是改变释放？那么您如何确定文件是否需要在发行版的安装程序中，或者它是否是您不需要该文件的调试安装程序。

# c# - 如何在 System.Drawing 中交替使用粗体和常规字体

> ID：14461900
> 
> 赞同：-1
> 
> 时间：2013-01-22T15:19:47.483
> 
> 标签：c#

我正在使用 System.Drawing 工具来创建图形。图形中有很多文本标签。

我创建字体：

```
var font = new Font("Verdana", 10); 
```

然后，对于每个标签，使文本加粗，或者不使用：

```
font = new Font(font, FontStyle.Bold);
font = new Font(font, FontStyle.Regular); 
```

我想将标签的所有文本与字体大小以及是否为粗体一起存储在数据库中。

假设我从数据库中返回一个值列表，例如：

10、粗体

12、常规

10，粗体，

14、粗体

10、常规

并将这些值放在具有 myfontSize 和 myfontStyle 属性的列表对象中并遍历列表...修改我的 System.Drawing 字体以反映每次迭代所需的字体大小和字体粗细变化的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:25:55.757

您还没有真正提供足够的信息来完全回答这个问题。但是，没有详细说明如何获取列表，如果您有一个字体大小/样式列表，那么您只需迭代集合并创建一个新的字体对象，例如

```
var fontCollection = new List<KeyValuePair<int, string>>();
fontCollection.Add(new KeyValuePair<int, string>(10, "Bold"));
fontCollection.Add(new KeyValuePair<int, string>(12, "Regular"));
fontCollection.Add(new KeyValuePair<int, string>(14, "Bold"));
foreach (var item in fontCollection)
{
    var font = new Font("Verdana", item.Key, (FontStyle)Enum.Parse(typeof(FontStyle), item.Value));
    // use font
} 
```

# java - 在java中使用关键字输出句子

> ID：14461902
> 
> 赞同：1
> 
> 时间：2013-01-22T15:19:56.547
> 
> 标签：java, eclipse, file, keyword

我正在尝试用 Java 编写一个程序来标记文本文件中的句子。每个标签都有一个相关的关键字数组。当且仅当句子包含一个或多个属于标签数组的关键字时，标签才会应用于句子。

例如，我有两个标签：故障和适应。在这些标签的数组中，我有诸如 Bugs、Fail 等用于故障的词，以及波兰语、清理以适应。其中一个句子是“BUG found and fixed”，它将进入故障类别，因此它将在标题故障之后输入句子，因为它包含单词“bug”。我在网上搜索了它的方法，但似乎找不到任何东西。

这是我制作的数组列表：

```
String[] faults = {
            "Misspelled",
            "Error",
            "Fixed",
            "Change",}; 
```

和

```
String[] adaption = {"Fixed comments",
        "Filters", "Polish","Adjust"}; 
```

任何帮助表示赞赏。谢谢你。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:24:42.963

我不确定我是否正确理解了您的问题，但如果是这样，您可能想尝试使用 Hashmap。您将拥有一对，并且在特定对象上使用 .get() 方法可以检索其值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:27:57.377

您可能想查阅有关[java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)的文档，以了解如何查看字符串是否包含某个子字符串（或如何将其拆分为单词）……并查看[java.lang.HashMap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T15:55:49.377

我认为使用正则表达式可以做得更好。对于每个类别，定义一个正则表达式模式，然后尝试将模式与文件的每一行匹配（我假设您的短语逐行出现）：

```
import java.util.regex.*;
// ...    

Pattern faults = Pattern.compile("Misspelled|Error|Fixed|Change");
Pattern adaption = Pattern.compile("Fixed Comments|Filters|Polish|Adjust");

// I assume I can read from BufferedReader 'in'.

for ( String line = in.readLine() ; line != null ; line = in.readLine() ) {
    if ( faults.matcher(line).find() ) {
        // Classify as fault
    }
    if ( adaption.matcher(line).find() ) {
         // Classify as adaption
    }
} 
```

请注意，该`find()`方法返回`true`或`false`取决于是否找到匹配项。我建议您查看该包的[Java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/package-summary.html)`java.util.regex`和/或 Jeffrey Friedl 的书[“掌握正则表达式”](http://regex.info/)。也许[Java Tutorial Regular Expressions Trail](http://docs.oracle.com/javase/tutorial/essential/regex/)也会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T15:30:53.843

得到你想要的东西并不容易：）但我想我明白了......

由于您的两个组，您有两个数组列表。`adaption`并且`fault`将是两组...

1.  首先，您应该从输入中读取整个文本到字符串。
2.  其次你应该找到`String[] sentences = split()`句子，你应该分成'.'，'，'，'！' 和所有句子的结束标记。您应该使用正则表达式，因为`split(.|?|!|)`它可以为原型做。
3.  然后您应该将这些句子拆分为单词，您现在应该拆分--)`String[] words=split(\\s+)`所以查找空格`\\s+`代表您所有的空格（`\t \r \n`等等）
4.  最后，您应该使用 for 循环遍历您的 words 数组，并找到与您的两个或多个组中的成员匹配（适应、故障）（使用 indexOf() 或 equals() 字符串方法）......显然，如果你有单词中的完全匹配，您可以使用 HashMap 并且像这样`Group1.get("the word you present itareted")`，这可以大大加快您的应用程序的速度；）

我也可以为您编写源代码，但我认为最好只是给您一些提示，如何做到这一点。如果需要任何帮助，请写 GL！

# mongodb - MongoDb 中开发团队的生命副本

> ID：14461903
> 
> 赞同：4
> 
> 时间：2013-01-22T15:19:57.217
> 
> 标签：mongodb, backup, replication, database-replication, master-slave

问：用于测试和开发的生命副本的最佳架构是哪个？

**当前设置：**

我们有两个这样的 amazon/EC2 mongod 服务器：

```
Machine A:
    A production database (on an amazon/EC2 server) (name it ‘PROD’)
    Other databases (‘OTHER’)

Machine B:
    a pre-production database (name it ‘PRE’)
    a copy for developer 1 own tests (call it ‘DEVEL-1’)
    a copy for developer 2 (DEVEL-2)
    …DEVEL-n 
```

PRE 数据库用于在部署到生产环境之前进行集成测试。

DEVEL-n 适用于每个开发人员在不打扰其他开发人员的情况下丢弃自己的数据。

有时，我们希望将来自 PROD 的新数据“恢复”到 PRE 和 DEVEL-n 库中。

目前我们通过 .copyDatabase() 命令从 PROD 传递到 PRE。然后我们发出“n”次 .copyDatabase() 以从 PRE 复制到 DEVEL-n。

**麻烦：**

一个副本需要很长时间（每个副本 1 小时，DBsize 超过 10GB），而且通常它会使 mongod 饱和，所以我们必须重新启动服务。

我们发现：

*   转储/恢复系统（饱和如 .copyDatabase() 一样）
*   副本集
*   主/从（似乎已弃用）

副本集似乎是赢家，但我们有严重的疑问：

假设我们想要一个副本集将实时 A/PROD 同步到 B/PRE（并且 A 可能作为主要，B 可能作为次要）：

a) 我可以从 A 中选择“一些”数据库来复制 PROD，但不考虑 OTHER？

b) 我可以在 B 中拥有不在主数据库中的“额外”数据库（如 DEVEL-n）吗？

c）我可以“停止复制”，以便我们可以部署到 PRE，用新鲜数据测试软件，用测试丢弃数据，测试完成后“重新链接”副本，以便删除 PRE 中的更改， PROD 的变化是否已充分传输到 PRE？

d) 除了适用于这种情况的副本集之外，还有其他更好的方法吗？

谢谢。玛丽娜和哈维。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:52:01.367

> 副本集似乎是赢家，但我们有严重的疑问：
> 
> 假设我们想要一个副本集将实时 A/PROD 同步到 B/PRE（并且 A 可能作为主要，B 可能作为次要）：
> 
> a) 我可以从 A 中选择“一些”数据库来复制 PROD，但不考虑 OTHER？

在 MongoDB 2.4 中，复制始终包括所有数据库。设计意图是让所有节点成为最终一致的副本，以便您可以故障转移到同一副本集中的另一个非隐藏辅助节点。

> b) 我可以在 B 中拥有不在主数据库中的“额外”数据库（如 DEVEL-n）吗？

不，副本集中只有一个主节点。

> c）我可以“停止复制”，以便我们可以部署到 PRE，用新鲜数据测试软件，用测试丢弃数据，测试完成后“重新链接”副本，以便删除 PRE 中的更改， PROD 的变化是否已充分传输到 PRE？

由于只能有一个主节点，因此在同一个副本集中混合生产和测试角色的用例不可能像您想象的那样。

最佳实践是隔离您的生产和开发/登台环境，这样就不会发生意外的交互。

> d) 除了适用于这种情况的副本集之外，还有其他更好的方法吗？

您可以采取一些方法来限制需要传输的数据量，这样您就不会每次都从生产环境中复制整个数据库 (10Gb)。副本集适合作为解决方案的一部分，但您需要为您的 PRE 环境提供单独的独立服务器或副本集。

一些建议：

*   使用副本集并在您的开发环境中添加一个[隐藏的辅助节点。](http://docs.mongodb.org/manual/core/replica-set-architectures/#non-production-members)您可以从此节点[进行备份，而不会影响您的生产应用程序，并且由于辅助节点会在更改发生时复制更改，因此您应该对备份进行相对更快的本地网络副本。](http://docs.mongodb.org/manual/core/backups/)

*   基于MongoDB 的[oplog的可](http://docs.mongodb.org/manual/core/replication/#oplog)[尾游标](http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/)实现您自己的部分复制方案。本地上限集合与用于将更改中继到副本集成员的机制相同，包括插入、删除和更新的详细信息。您可以匹配相关的[数据库命名空间](http://docs.mongodb.org/manual/faq/developers/#what-is-a-namespace-in-mongodb)并将匹配的更改从生产副本集中中继到隔离的 PRE 环境中。`oplog.rs`

这些方法中的任何一种都可以让您控制何时将备份从 PROD 传输到 PRE，以及在测试后从前一个点重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:04:39.157

在我们的设置中，我们使用 EBS 快照在暂存环境中快速复制生产数据库。作为备份周期的一部分，快照每隔几个小时运行一次。在登台启动新的数据库服务器时，它会查找最新的数据库快照并将其用于 EBS 驱动器。拍摄快照几乎是即时的，恢复也非常快。这种方法也可以很好地扩展，我们实际上在巨大的 MongoDB 分片安装中使用它。唯一的缺点是您需要依赖 AWS 服务来实现它。在某些情况下，这可能是不可取的。

# python - Python if-else 简写

> ID：14461905
> 
> 赞同：145
> 
> 时间：2013-01-22T15:20:00.957
> 
> 标签：python, python-2.7

> **可能重复：**
> [Python 中的三元条件运算符](https://stackoverflow.com/questions/394809/ternary-conditional-operator-in-python)

我想在 python 中执行以下操作：

```
while( i < someW && j < someX){
   int x = A[i] > B[j]? A[i++]:B[j++];
   ....
} 
```

显然，当任一`i`或`j`达到限制时，代码将跳出循环。我需要循环之外的`i`值。`j`

我真的必须这样做吗

```
x=0
...
if A[i] > B[j]:
  x = A[i]
  i+=1
else:
  x = B[j]
  j+=1 
```

或者有人知道更短的方法吗？

除了上述之外，我可以让 Python 支持类似的东西吗？

```
a,b=5,7
x = a > b ? 10 : 11 
```

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2013-01-22T15:23:45.437

最易读的方式是

```
x = 10 if a > b else 11 
```

但你也可以使用`and`and `or`：

```
x = a > b and 10 or 11 
```

不过，“Python 之禅”说“可读性很重要”，所以选择第一种方式。

此外，如果您放置一个变量而不是`10`它的计算结果为，and-or 技巧将失败`False`。

但是，如果更多的分配取决于此条件，那么按照您的方式编写它会更具可读性：

```
if A[i] > B[j]:
  x = A[i]
  i += 1
else:
  x = A[j]
  j += 1 
```

除非您将`i`其放入`j`容器中。但如果你告诉我们你为什么需要它，很可能你不需要它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-22T15:22:48.023

尝试这个：

```
x = a > b and 10 or 11 
```

这是一个执行示例：

```
>>> a,b=5,7
>>> x = a > b and 10 or 11
>>> print x
11 
```

# tridion - 在 SDL Tridion 中保存 VB 脚本模板会添加“脏”字符

> ID：14461907
> 
> 赞同：3
> 
> 时间：2013-01-22T15:20:03.037
> 
> 标签：tridion

我对 SDL Tridion 2009 有一个非常奇怪的问题，我希望有人已经体验过它。有时（不是每次）当我修改然后“保存并关闭”我的 PageTemplates 或 ComponentTemplates 时，由于自动将奇怪的字符添加到代码中（我不知道何时，也不知道“谁”），我会出现编译错误。例如，最常用的一种是“`”。有人有想法吗？

还是非常感谢

# apache - 如何将多个实例映射到 Weblogic 中的同一个 war 文件？

> ID：14461910
> 
> 赞同：3
> 
> 时间：2013-01-22T15:20:09.970
> 
> 标签：apache, web-applications, war, weblogic-10.x, weblogic11g

是否可以部署同一战争的多个实例，以便可以通过不同的上下文访问它？

http://localhost:7001/app1 指向 --> app.war

http://localhost:7001/app2 指向 --> app.war

http://localhost:7001/app3 指向 --> app.war

我必须使用 Weblogic 服务器，这是一个约束。我知道它适用于 Jetty，但不能使用它:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:51:07.607

您的问题是 weblogic.xml 为您的 Web 应用程序定义了上下文根。如果是同一个 weblogic.xml 的同一个war，3个部署会有上下文根冲突。您应该查看部署计划，它可以替换 weblogic.xml 中定义的上下文根。对于每个部署，通过管理控制台或命令行部署程序指定 war 文件和 plan.xml。

# c# - 在窗口初始化时更改 MVVM WPF 列表视图项

> ID：14461911
> 
> 赞同：0
> 
> 时间：2013-01-22T15:20:10.977
> 
> 标签：c#, wpf

我对 listView 初始化有疑问。**listView**的 .xaml 部分如下所示，

```
<ListView x:Name="categoryListView" HorizontalAlignment="Left" Width="129" Height="180" 
              ItemsSource="{Binding Path=RecordModel.CategoryList}" 
              DisplayMemberPath="RecordModel.CategoryList" 
              SelectedValue="{Binding Path=RecordModel.RecordTitle}"
              VerticalAlignment="Top"> 
```

我在**RecordModel.CategoryList中有一个****字符串**路径列表，但我需要在窗口初始化时更改该列表。部分视图模型如下。我在哪里可以添加代码来更改列表，以便 listView 在开始时获取更改的列表项？

 **```
public class MainWindowViewModel : ViewModelBase
{
...
private RecordModel _recordModel;
private ICommand _addCategoryCommand;
...

public MainWindowViewModel()
{
 _recordModel = new RecordModel();
}
public RecordModel RecordModel
{
  get { return _recordModel; }
  set { _recordModel = value; }
}
...
public ICommand AddCategoryCommand
{
 get
  {
   if (_addCategoryCommand == null)
       _addCategoryCommand = new AddCat ();
     return _addCategoryCommand;
  }
}

public class AddCat : ICommand
{
  public bool CanExecute(object parameter) { return true; }
  public event EventHandler CanExecuteChanged;
  public void Execute(object parameter)
  {
    MainWindowViewModel mainWindowViewModel = (MainWindowViewModel)parameter;
    ...
    //Do things with mainWindowViewModel and the variables it has
  }
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:23:50.320

这就是 ViewModel 存在的原因：以便它们可以透明地将模型中的值转换为更适合绑定的值。

您应该在该上公开一个`CategoryList`属性`MainWindowViewModel`并直接在其上绑定。然后，您可以通过处理属性设置器`RecordModel.CategoryList`中的值来填充它：`RecordModel`

```
public class MainWindowViewModel : ViewModelBase
{
    private RecordModel _recordModel;

    public MainWindowViewModel()
    {
        RecordModel = new RecordModel(); // set the property not the field
    }

    public RecordModel RecordModel
    {
        get { return _recordModel; }
        set {
            _recordModel = value;
            // populate CategoryList here from value.CategoryList
        }
    }

    public UnknownType CategoryList { get; }
} 
```**

# performance - 移动应用的 KPI

> ID：14461916
> 
> 赞同：2
> 
> 时间：2013-01-22T15:20:22.780
> 
> 标签：performance, testing, mobile, kpi

在测试移动应用程序时，我们应该记住哪些 KPI（关键绩效指标），或者成功的移动应用程序的 KPI 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:16:02.740

移动设备上的应用程序 KPI：

*   应用程序运行时间无需连接到永久电源（电池）（应用程序 + 设备 + 操作系统）
*   与服务器的连接频率（每 5、10、30 分钟）
*   应用程序数据包到服务器所需的字节数。
*   应用数据的存储容量
*   翻转前的记录容量
*   时间间隔应用程序可以在没有连接到服务器的情况下完全工作

不清楚这些是否是 KPI：

*   可远程更新（完全更新、差异更新）
*   能够将旧应用程序版本的应用程序数据迁移到新版本。
*   应用数据加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T00:00:14.317

衡量移动应用成功的关键绩效指标

1.  下载
2.  活跃用户 - 每月和每天
3.  每用户收入
4.  收购成本
5.  留存率
6.  用户体验 - 应用启动时间/社交分享/访问的页面
7.  会议时间

# html - 如何在 IE7 的 div 中居中 div

> ID：14461917
> 
> 赞同：1
> 
> 时间：2013-01-22T15:20:24.143
> 
> 标签：html, css, internet-explorer, css-float, internet-explorer-7

HTML：

```
<div class="wrapper">
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
</div> 
```

CSS：

```
.wrapper{
    width:1000px;
    text-align:center;
    float:left;    
}

.wrapper .box{
    width:300px;
    height:50px;
    display:inline-block;
    background:#F00;
    margin:0 10px 10px 0;
    overflow:hidden;
 } 
```

我想像这样将所有 div 集中在包装 div 中；![在此处输入图像描述](../Images/dadae5b48a177d72e98e6352715e4191.png)

以上代码在 IE8、IE9、Chrome、Safari、Opera、FF 中运行良好，但在 IE7 中无法运行。当我在 IE7 中打开页面时，页面如下所示；

![在此处输入图像描述](../Images/fab5fd2eccf5ffc3f6ecacc5a6b68a0a.png)

如果我使用 float:left，问题似乎解决了，但所有 div 都基于左边。我该如何解决这个问题？

[http://jsfiddle.net/eBxFX/2/](http://jsfiddle.net/eBxFX/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:28:52.353

内联块在 IE7 中不起作用。

您必须使用 zoom:1 和 display:inline 作为 hack 或没有来自不同 css 的 hack 仅适用于 ie7。

```
.wrapper .box{
    width:300px;
    height:50px;
    display:inline-block;
    *display: inline;
    *zoom:1;
    background:#F00;
    margin:0 10px 10px 0;
    overflow:hidden;
} 
```

[http://jsfiddle.net/eBxFX/4/](http://jsfiddle.net/eBxFX/4/)

# c# - 将项目拖放到 ListView

> ID：14461918
> 
> 赞同：0
> 
> 时间：2013-01-22T15:20:29.947
> 
> 标签：c#, winforms, listview, treeview

我有一个包含 3 个组的 ListView。我将一个项目从 TreeView 拖到 ListView：

```
private void listViewDemo_DragDrop(object sender, DragEventArgs e)
{
    if (!is_listview) //treeview item
    {
        //get a text of a draged item
        string str = e.Data.GetData(DataFormats.Text).ToString();
        //get information about hovered item
        ListViewHitTestInfo hit_info =  listViewDemo.HitTest(listViewDemo.PointToClient(new Point(e.X, e.Y)));
        //check position - must be on an item
        if (hit_info.Location == ListViewHitTestLocations.None) return;
        ListViewItem prev_item = hit_info.Item;
        ListViewGroup group = prev_item.Group;
        int idx = prev_item.Index;
        //create a new key
        Guid key = Guid.NewGuid();
        string item_key = key.ToString();
        //create a new item
        //option 1
        group.Items.Add(listViewDemo.Items.Insert(idx,item_key, str, ""));
        //option2
        //group.Items.Insert(idx,listViewDemo.Items.Insert(idx, item_key, str, ""));
    }
} 
```

我希望添加一个项目来代替指出的项目，但是任何选项都会在组的末尾添加元素。如何在鼠标悬停的位置添加项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:41:56.193

假设您想将项目放在鼠标指针的项目之前......（这有点蛮力，但它有效）。

我还想指出，您的原始代码是在整个列表中查找热点项的索引。我添加了 IndexOf 调用以从组中获取它。

```
 if (!is_listview) //treeview item 
            {
                //get a text of a dragged item 
                string str = e.Data.GetData(DataFormats.Text).ToString(); 
                //get information about hovered item 
                ListViewHitTestInfo hit_info = listView1.HitTest(listView1.PointToClient(new Point(e.X, e.Y))); 
                //check position - must be on an item 
                if (hit_info.Location == ListViewHitTestLocations.None) return; 
                ListViewItem prev_item = hit_info.Item; 
                ListViewGroup group = prev_item.Group;
                int idx = group.Items.IndexOf(prev_item);
                //create a new key 
                Guid key = Guid.NewGuid(); 
                string item_key = key.ToString(); 
                //create a new item 
                //option 1 
                List<ListViewItem> list = new List<ListViewItem>();
                while(group.Items.Count > 0)
                {
                    ListViewItem lvi = group.Items[0];
                    listView1.Items.Remove(lvi);
                    list.Add(lvi);
                }

                group.Items.Clear();
                ListViewItem item = new ListViewItem(str, "");
                item.Name = item_key;
                list.Insert(idx, item);
                foreach (ListViewItem i in list)
                {
                    listView1.Items.Add(i);
                    group.Items.Add(i);
                }
            } 
```

# javascript - JavaScript - 在光标位置插入字符 IE8 和 IE9

> ID：14461926
> 
> 赞同：1
> 
> 时间：2013-01-22T15:20:56.057
> 
> 标签：javascript, jquery, internet-explorer

我希望有人可以帮助我解决这个问题。

我们的一个网络系统有一个在线表格，可以为会议提交科学论文。在那里我们有一个下拉菜单来插入特殊字符。特殊字符因客户和发布者而异，因此我们必须这样做。

我们面临的问题是在 IE8 和 IE9 中，所有其他浏览器都可以正常工作。

在这两种浏览器中的任何一种中，如果我们使用下拉菜单插入特殊字符，它会将其添加到随机位置，而不是将字符插入光标位置。

我已经创建了一个 jsfiddle，但如果你运行它，它会起作用。如果您将这两个文件保存在本地并尝试在 IE8 或 IE9 上运行，则不会。

[jsFiddle](http://jsfiddle.net/slfede/d7C6g/2/)

这是生成的 html（页面是从经典的 asp 动态生成的，这里有很多遗留代码）。

```
<TR>
  <TH ALIGN="LEFT" COLSPAN="5" WIDTH="100%">Page 2 of 4 Abstract details:</TH>
</TR>
<TR>
  <TD COLSPAN="5">
    <HR>
  </TD>
</TR>
<TR>
  <TH ALIGN="LEFT" COLSPAN="5">Abstract Title (max 150 char):</TH>
</TR>
<TR>
  <TD ALIGN="LEFT" COLSPAN="5"></TD>
</TR>
<TR>
  <TD COLSPAN="5">
    <SELECT NAME="AbstractTitleChar" id="AbstractTitleChar">
      <OPTION VALUE="">--- Insert character ---</OPTION>
      <OPTION VALUE="<alpha>">&alpha; Alpha</OPTION>
      <OPTION VALUE="<beta>">&beta; Beta</OPTION>
      <OPTION VALUE="<cent>">&cent; Cent</OPTION>
      <OPTION VALUE="<copyright>">&copy; Copyright</OPTION>
      <OPTION VALUE="<dagger>">&dagger; Dagger</OPTION>
      <OPTION VALUE="<degree>">&deg; Degree</OPTION>
      <OPTION VALUE="<delta>">&delta; Delta</OPTION>
      <OPTION VALUE="<delta1>">&Delta; Delta</OPTION>
      <OPTION VALUE="<DoubleDagger>">&Dagger; Double Dagger</OPTION>
      <OPTION VALUE="<eacute>">&#233; e-acute accent</OPTION>
      <OPTION VALUE="<epsilon>">&epsilon; Epsilon</OPTION>
      <OPTION VALUE="<gamma>">&gamma; Gamma</OPTION>
      <OPTION VALUE="<greater>">&gt; Greater than</OPTION>
      <OPTION VALUE="<GreaterThanEqualTo>">&#8805; Greater Than Equal To</OPTION>
      <OPTION VALUE="<less>">&lt; Less than</OPTION>
      <OPTION VALUE="<micro>">&micro; Micro</OPTION>
      <OPTION VALUE="<omega>">&omega; Omega</OPTION>
      <OPTION VALUE="<plusminus>">&plusmn; Plus-Minus</OPTION>
      <OPTION VALUE="<pound>">&pound; Pound</OPTION>
      <OPTION VALUE="<registered>">&reg; Registered</OPTION>
      <OPTION VALUE="<SectionSign>">&sect; Section Sign</OPTION>
      <OPTION VALUE="<rho>">&rho; Small 'P'</OPTION>
      <OPTION VALUE="<sum>">&sum; Sum</OPTION>
      <OPTION VALUE="<sunny>">&sunny sunny</OPTION>
      <OPTION VALUE="<trade>">&trade; Trademark</OPTION>
      <OPTION VALUE="<yen>">&yen; Yen</OPTION>
    </SELECT>
    <SELECT NAME="TitleFormatting">
      <OPTION VALUE="">--- Insert formatting ---</OPTION>
      <OPTION VALUE="<B>">Bold start</OPTION>
      <OPTION VALUE="</B>">Bold end</OPTION>
      <OPTION VALUE="<I>">Italic start</OPTION>
      <OPTION VALUE="</I>">Italic end</OPTION>
      <OPTION VALUE="<BR>">Line break</OPTION>
      <OPTION VALUE="<P>">New paragraph</OPTION>
      <OPTION VALUE="<startsub>">Subscript start</OPTION>
      <OPTION VALUE="<endsub>">Subscript end</OPTION>
      <OPTION VALUE="<startsup>">Superscript start</OPTION>
      <OPTION VALUE="<endsup>">Superscript end</OPTION>
      <OPTION VALUE="<U>">Underline start</OPTION>
      <OPTION VALUE="</U>">Underline end</OPTION>
    </SELECT>
    <input type="hidden" name="Max_Title_Char" value="100" />
    <input type="hidden" name="Max_Text_Char" value="200" />
    <input type="hidden" name="Max_Tables" value="0" />
    <input type="hidden" name="Max_Images" value="0" />
    <input type="hidden" name="Max_Extra_Text_Char" value="100" />
    <BR>
    <TEXTAREA CLASS="title" id="AbstractTitle" NAME="Abstract_Title" COLS="80"
    ROWS="3">Crap's Title</TEXTAREA>
    <BR>Character count
    <INPUT TYPE="TEXT" READONLY id="CharCountTitle">&nbsp;&nbsp;
     <FONT COLOR="RED"><B>(maximum: 100)</B></FONT>
<INPUT TYPE="BUTTON" CLASS="button" NAME = "countTitle" VALUE="Count"></TD>
</TR>
</TABLE> 
```

这是javascript

```
function insertAtCaret(areaId, text) {
  var txtarea = document.getElementById(areaId);

  var scrollPos = txtarea.scrollTop;
  var strPos = 0;
  var br = ((txtarea.selectionStart || txtarea.selectionStart == '0') ? "ff" : (document.selection ? "ie" : false));

  if (br == "ie") {
    txtarea.focus();
    var range = document.selection.createRange();
    range.moveStart('character', -txtarea.value.length);
    strPos = range.text.length;
  } else if (br == "ff") strPos = txtarea.selectionStart;
  //alert(strPos);
  var front = (txtarea.value).substring(0, strPos);
  var back = (txtarea.value).substring(strPos, txtarea.value.length);
  //alert(txtarea.value.length);
  txtarea.value = front + text + back;
  strPos = strPos + text.length;
  if (br == "ie") {
    txtarea.focus();
    var range = document.selection.createRange();
    range.moveStart('character', -txtarea.value.length);
    range.moveEnd('character', 0);
    range.select();
  } else if (br == "ff") {
    txtarea.selectionStart = strPos;
    txtarea.selectionEnd = strPos;
    txtarea.focus();
  }
  txtarea.scrollTop = scrollPos;
}

$(document).ready(function () {

  $('select#AbstractTitleChar').change(function () {

    var insertVal = $(this).val();
    var targetVal = $('textarea#AbstractTitle').val();
    insertAtCaret('AbstractTitle', insertVal);
  });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:54:48.867

您的问题是，当下拉菜单获得焦点时，文本区域选择在 IE 中丢失。您需要在 textarea 失去焦点之前保存选择。在 IE 中，`blur`事件为时已晚：您需要使用专有的`beforedeactivate`.

既然你已经用 jQuery 标记了你的问题，我将建议使用[我的 jQuery 插件](http://code.google.com/p/rangyinputs/)来简化示例，尽管我之前已经将插件中的几乎所有代码作为独立函数发布在 Stack Overflow 上。

演示：http: [//jsfiddle.net/d7C6g/3/](http://jsfiddle.net/d7C6g/3/)

代码：

```
$(document).ready(function () {
    var textarea = $("#AbstractTitle");
    var sel;

    // IE specific event
    textarea.on("beforedeactivate", function() {
        textareaSelection = textarea.getSelection();
    });

    $('select#AbstractTitleChar').change(function() {
        var insertVal = $(this).val();
        if (textareaSelection) {
            textarea.setSelection(textareaSelection.start, textareaSelection.end);
        }
        textarea.replaceSelectedText(insertVal);
    });
}); 
```

# c# - 阻止来自 ViewModel 的 DatePicker 更改

> ID：14461930
> 
> 赞同：1
> 
> 时间：2013-01-22T15:21:05.107
> 
> 标签：c#, wpf, mvvm, datepicker

我定义了一个简单的 DatePicker：

```
<DatePicker SelectedDate="{Binding SomeDate}"/> 
```

而且我想防止用户在某些情况下清除该值。

这是我到目前为止得到的：

```
public DateTime? SomeDate
{
    get { return someDate; }
    set
    {
        if (someDate != value)
        {
            if (value == null && someCondition)
                TellTheUserHeCannotClearTheField();
            else
                someDate = value;
            NotifyPropertyChanged(() => SomeDate);
        }
    }
} 
```

虽然这可以防止基础字段被更新，但 DatePicker 仍然显示一个空值（即*"<Enter text here>"*），并在每次用户通过它进行选项卡时再次尝试将属性更新为 null。

如何强制 DatePicker 显示当前未更改的值？

* * *

根据Doc的评论回答，让我概括一下。

使用下拉菜单时，可以以这种方式拒绝日期更改（例如，如果我想限制范围）。

但是，如果您使用键盘，您输入的任何内容都会保留在那里，并且 DatePicker 会在每次失去焦点时尝试提交它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:53:26.877

我找到了一个相当不错的解决方案。

问题是该`SelectedDate`属性已正确更新，但该`Text`属性（即显示的内容）现在不同步。

因此，我写了一个助手来保持同步：

```
public class SelectedDateSyncBehavior
{
    public static readonly DependencyProperty SyncTextProperty =
        DependencyProperty.RegisterAttached("SyncText", typeof(bool), 
            typeof(SelectedDateSyncBehavior), new PropertyMetadata(false, 
                                                  HandleSyncTextChanged));

    static void HandleSyncTextChanged(DependencyObject d, 
                                      DependencyPropertyChangedEventArgs e)
    {
        if ((bool)e.NewValue)
            ((DatePicker)d).LostFocus += SyncText;
        else
            ((DatePicker)d).LostFocus -= SyncText;
    }

    static void SyncText(object sender, RoutedEventArgs e)
    {
        var picker = (DatePicker)sender;
        if (picker.SelectedDate != null)
            picker.Text = picker.SelectedDate.Value.ToShortDateString();
    }

    public static void SetSyncText(DatePicker element, bool value)
    {
        element.SetValue(SyncTextProperty, value);
    }

    public static bool GetSyncText(DatePicker element)
    {
        return (bool)element.GetValue(SyncTextProperty);
    }
} 
```

现在我要做的就是：

```
<DatePicker SelectedDate="{Binding SomeDate}" 
            myns:SelectedDateSyncBehavior.SyncText="True"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:18:42.727

我似乎无法重现它。

我这样设置属性`TestDate`：

```
private DateTime? _testDate = DateTime.Now;

public DateTime? TestDate {
  get { return _testDate; }
  set {
    if (value < DateTime.Now)
      System.Windows.MessageBox.Show("BAD!");
    else
      _testDate = value;
    OnPropertyChanged("TestDate");
  }
} 
```

像这样的 DatePicker：

```
<DatePicker SelectedDate="{Binding TestDate}" /> 
```

这是我的行为：

*   *选择“坏”日期（1 月 16 日）*：

![在此处输入图像描述](../Images/7910c48c78373679dfc058784a374939.png)

*   *坏消息*：

![在此处输入图像描述](../Images/660741338171fdd16945d13bb694aa5b.png)

*   *值与原始值不变*：

![在此处输入图像描述](../Images/ada5d4a2833c47dfeb5f6b081ccbbaa1.png)

*   *选择好的日期（作品）*：

![在此处输入图像描述](../Images/28e3b63d8b04b5b9dd91825e373529d5.png)

这个例子和你想做的一样，对吧？（我的 MVVM 实现有点不同。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T15:36:55.127

标准 WPF`DatePicker`没有类似`IsReadOnly`. 阻止用户输入的唯一方法是禁用它：

```
<DatePicker SelectedDate="{Binding SomeDate}" IsEnabled="{Binding AllowEditSomeDate}"/> 
```

视图模型：

```
public bool AllowEditSomeDate {get;set;} //Do not forget INotifyPropertyChanged 
```

# javascript - 如何使用 Nokogiri 和 Ruby 解析 JavaScript

> ID：14461931
> 
> 赞同：5
> 
> 时间：2013-01-22T15:21:16.943
> 
> 标签：javascript, ruby, nokogiri

我需要从网站中解析出一个数组。我要解析的 JavaScript 部分如下所示：

```
_arPic[0] = "http://example.org/image1.jpg";
_arPic[1] = "http://example.org/image2.jpg";
_arPic[2] = "http://example.org/image3.jpg";
_arPic[3] = "http://example.org/image4.jpg";
_arPic[4] = "http://example.org/image5.jpg";
_arPic[5] = "http://example.org/image6.jpg"; 
```

我使用这样的方法获取整个 JavaScript：

```
product_page = Nokogiri::HTML(open(full_url))    
product_page.css("div#main_column script")[0] 
```

有没有一种简单的方法来解析所有变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:36:11.540

如果我没看错，您正在尝试解析 JavaScript 并使用您的图像 URL 获取 Ruby 数组，是吗？

Nokogiri 只解析 HTML/XML，所以你需要一个不同的库；粗略搜索会[找到 RKelly](https://github.com/tenderlove/rkelly/)库，该库具有一个`parse`函数，该函数接受一个 JavaScript 字符串并返回一个解析树。

一旦有了解析树，您将需要遍历它并按名称（例如`_arPic`）找到感兴趣的节点，然后在分配的另一侧获取字符串内容。

或者，如果它不必太健壮（它不会），如果可能的话，你可以只使用正则表达式来搜索 JavaScript：

```
/^\s*_arPic\[\d\] = "(.+)";$/ 
```

可能是一个很好的入门正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T01:36:08.033

简单的方法：

```
_arPic = URI.extract product_page.css("div#main_column script")[0].text 
```

可以缩短为：

```
_arPic = URI.extract product_page.at("div#main_column script").text 
```

# java - 访问被拒绝尝试调用 Web 服务调用

> ID：14461932
> 
> 赞同：1
> 
> 时间：2013-01-22T15:21:23.370
> 
> 标签：java, web-services, session-cookies

我正在尝试从为外部人员开发的 Web 服务中使用一些方法。当我打电话给他们时，我有这个错误：

```
Access is denied.
org.apache.axis.message.SOAPFaultBuilder.createFault(SOAPFaultBuilder.java:222)
org.apache.axis.message.SOAPFaultBuilder.endElement(SOAPFaultBuilder.java:129)
org.apache.axis.encoding.DeserializationContext.endElement(DeserializationContext.java:1087)
com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1741)
com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2898)
com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:302)
org.apache.axis.encoding.DeserializationContext.parse(DeserializationContext.java:227)
org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)
org.apache.axis.Message.getSOAPEnvelope(Message.java:435)
org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnderstandChecker.java:62)
org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)
org.apache.axis.client.Call.invokeEngine(Call.java:2784)
org.apache.axis.client.Call.invoke(Call.java:2767)
org.apache.axis.client.Call.invoke(Call.java:2443)
org.apache.axis.client.Call.invoke(Call.java:2366)
org.apache.axis.client.Call.invoke(Call.java:1812)
Services.Web.CCIS.BasicHttpBinding_PublicApiServiceStub.getAccountInfo(BasicHttpBinding_PublicApiServiceStub.java:1199)
es.uniway.action.login.LoginAction.execute(LoginAction.java:163)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434)

nota La traza completa de la causa de este error se encuentra en los archivos de diario de Apache Tomcat/7.0.12. 
```

为什么？。这是我为此编写的代码：

```
public String execute() throws Exception {
    System.out.println("rrrrrr");

    // TODO Auto-generated method stub
    logIn=false;
    java.net.URL portAddress=null;
    String endpoint="";
    session = ActionContext.getContext().getSession();

    System.out.println("ffffffffffffffffff");
    System.out.println("La password es:"+getPassword());

    PublicApiServiceProxy publicPort=null;

    PublicApiService_Service publicService=null;

 //java.net.URL portAddressCloud = new java.net.URL("http://localhost:8080/webServiceCloud2/services/WscloudImpl");
 java.net.URL portAddressCloud = new java.net.URL("http://localhost:8080/webServiceCloud2_old/services/WscloudImpl");

    WscloudImplServiceLocator wscloudServiceLocator = new WscloudImplServiceLocator();
      //WscloudImpl wscloud = wscloudServiceLocator.getWscloudImpl(portAddress);

      WscloudImplSoapBindingStub bsStubcloud=null;
      bsStubcloud=(WscloudImplSoapBindingStub) wscloudServiceLocator.getWscloudImpl(portAddressCloud);

    String url = (servletRequest.getRequestURL()).toString();

        endpoint="http://xxx.xxxxx.es/CCIS/Services/PublicApiService.wsdl";

        portAddress = new java.net.URL("http://://xxx.xxxxx.es/CCIS/Services/PublicApiService.svc");

    publiApi = new PublicApiService_ServiceLocator();
    ports=publiApi.getBasicHttpBinding_PublicApiService(portAddress);

    BasicHttpBinding_PublicApiServiceStub bsStub=null;
    bsStub=(BasicHttpBinding_PublicApiServiceStub) publiApi.getBasicHttpBinding_PublicApiService(portAddress);
    session.put("login",logIn);
   // ((BasicHttpBinding_PublicApiServiceStub)bsStub).setMaintainSession(true);

    if((getUsername().length()==0)||(getPassword().length()==0)){

        addActionError("Introduce el login y la password");
        session.remove("usuario");
        session.remove("password");
        bsStub.logout();
        return "INPUT";
    }
    System.out.println(getUsername());

    ((BasicHttpBinding_PublicApiServiceStub)bsStub).setMaintainSession(true);
        logIn=bsStub.logon(getUsername(), getPassword());

        System.out.println(logIn); 

    session.put("login",logIn);

    if(logIn){

        PapiAccountInfo info=bsStub.getAccountInfo((long)0);

         PapiUserInfo[] users=bsStub.getUsers();
         System.out.println(users[0].getID());
        System.out.println("ID:"+info.getID());

        //TRespuestaValidarUsuario resultado=bsStubcloud.validarUsuario(104,86);
        TRespuestaValidarUsuario resultado=bsStubcloud.validarUsuario(users[0].getID(),info.getID());
        if(resultado.getError()==0){
            session.put("ID_CUENTA_SESSION", resultado.getDatosValidarUsuario()[0].getId_cuenta());
            session.put("ID_USUARIO_SESSION", resultado.getDatosValidarUsuario()[0].getId_usuario());
            session.put("ID_LOGIN_USUARIO_SESSION", resultado.getDatosValidarUsuario()[0].getLogin());
            session.put("ID_NIVEL_CUENTA_SESSION",resultado.getDatosValidarUsuario()[0].getNivel_cuenta());
            session.put("ID_NOMBRE_CUENTA_SESSION", resultado.getDatosValidarUsuario()[0].getNombre_cuenta());
            session.put("ID_DISTRIBUIDOR_SESSION", resultado.getDatosValidarUsuario()[0].getId_distribuidor());

            if(resultado.getDatosValidarUsuario()[0].getNivel_cuenta()==1){
                 System.out.println("Soy mayorista");
                setRole("mayorista");
            }
            if((resultado.getDatosValidarUsuario()[0].getNivel_cuenta()==2)||(resultado.getDatosValidarUsuario()[0].getNivel_cuenta()==7)){
                System.out.println("Soy distribuidor");
                setRole("distribuidor");
            }
            if(resultado.getDatosValidarUsuario()[0].getNivel_cuenta()==3){
                System.out.println("Soy cliente");
                setRole("cliente");
            }

            return "SUCCESS";
        }

         String id_login=session.get("ID_LOGIN_USUARIO_SESSION").toString();
            String id_nivel_cuenta=session.get("ID_NIVEL_CUENTA_SESSION").toString();

            TRespuestaLogo respuesta=bsStubcloud.obtener_Logo(Integer.valueOf(id_login),Integer.valueOf(id_nivel_cuenta));
            byte [] logo=respuesta.getLogo();

        request =(HttpServletRequest) ActionContext.getContext().get(ServletActionContext.HTTP_REQUEST);

        //Comentar lo que me dijo Phill
      //((BindingProvider)bsTub).getRequestContext().put(BindingProvider.SESSION_MAINTAIN_PROPERTY, true);   
       Call call=bsStub._getCall();
       MessageContext ctx=call.getMessageContext();

       if(ctx==null){
           System.out.println("Holaa");
       }
       Iterator i=ctx.getAllPropertyNames();
       while(i.hasNext()){
        System.out.println(i.next());
       }    
        ctx.getProperty("Cookie");

    ctx.setUsername(getUsername());
    ctx.setPassword(getPassword());

    session.put("contexto", ctx);
    session.put("puerto", bsStub);

    }else{

        TDatosRetorno proveedor=bsStubcloud.validar_Proveedor(getUsername(),getPassword());

        if(proveedor.getError()==0){

            System.out.println("Entro como proveedor");

            session.put("ID_CUENTA_SESSION", 0);
            session.put("ID_USUARIO_SESSION", "Uniway");
            session.put("ID_LOGIN_USUARIO_SESSION", "Uniway");
            session.put("ID_NIVEL_CUENTA_SESSION",0);
            session.put("ID_NOMBRE_CUENTA_SESSION", "Uniway");
            session.put("ID_DISTRIBUIDOR_SESSION", 0);

            request =(HttpServletRequest) ActionContext.getContext().get(ServletActionContext.HTTP_REQUEST);

            //Comentar lo que me dijo Phill
          //((BindingProvider)bsTub).getRequestContext().put(BindingProvider.SESSION_MAINTAIN_PROPERTY, true);   
           Call call=bsStub._getCall();
           MessageContext ctx=call.getMessageContext();

           if(ctx==null){
               System.out.println("Holaa");
           }
           Iterator i=ctx.getAllPropertyNames();
           while(i.hasNext()){
            System.out.println(i.next());
           }    
            ctx.getProperty("Cookie");

        ctx.setUsername(getUsername());
        ctx.setPassword(getPassword());

        session.put("contexto", ctx);
        session.put("puerto", bsStub);

            return "SUCCESSPROV";
        }else{
            addActionError("No existe dicho usuario en nuestra base de datos");
            session.remove("usuario");
            session.remove("login");
            return "INPUT";
        }
    }
    publicPort=new PublicApiServiceProxy(endpoint);

    String login=publicPort.getEndpoint();

    System.out.println("LogIn es: "+logIn);
    if(logIn){
        return "SUCCESS";
    }

    if(!logIn){
        addActionError("Error al logarte");
        session.remove("username");
        session.remove("password");
        bsStub.logout();
        return "INPUT";
    }
    return "SUCCESS";
} 
```

开发此 ws 的人告诉我：GetAccountInfo 操作仅针对正常操作下未登录的请求生成“访问被拒绝”。您能否验证您是否正在使用登录操作登录，并且身份验证 cookie 在服务调用之间传递？我有 ((BasicHttpBinding_PublicApiServiceStub)bsStub).setMaintainSession(true); 那么为什么我有这个错误？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T08:40:12.747

我想我可能遇到了与您类似的问题。我正在调用一些身份验证步骤进展顺利的服务，但我无法在其他服务上使用我的 sessionId，我总是收到拒绝访问消息。[很长一段时间后，我在http://www.nsftools.com/stubby/ApacheAxisClientTips.htm](http://www.nsftools.com/stubby/ApacheAxisClientTips.htm)找到了我的解决方案 除了设置 setMaintainSession(true) 之外，我还必须执行以下操作：

```
CompanyServiceLocator cl = new CompanyServiceLocator();
cl.setMaintainSession(true);
CompanyServiceSoap css = cl.getCompanyServiceSoap();
((Stub)css)._setProperty(HTTPConstants.HEADER_COOKIE, "ASP.NET_SessionId="+sessionId);
css.getCountryList(); //Success after adding the HEADER_COOKIE-line. :-D 
```

其中 sessionId 是我验证自己时返回的 sessionId。您可能必须将 ASP._Net_SessionId 替换为 cookie 的名称。

# javascript - 使用 jQuery 在其他 div 上的 div

> ID：14461933
> 
> 赞同：-6
> 
> 时间：2013-01-22T15:21:23.667
> 
> 标签：javascript, jquery, html, css

```
<div id="one">aaa</div>
<div id="two">bbbbbbbbbb</div>
<span id="click">click</span> 
```

小提琴：http : [//jsfiddle.net/g6Myb/](http://jsfiddle.net/g6Myb/)

在单击 span#click 后，我如何获得 #two 并使用 jQuery 将他放在 #one 上？

```
<div id="one">aaa</div>
<div id="two">bbbbbbbbbb</div>
<span id="click">click</span> 
```

```
#one {width: 200px; height: 200px; background-color: red}
#two {width: 200px; height: 200px; background-color: green; opacity: 0.3 } 
```

```
$('.click').click(function(){})  // what to do here ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:25:59.617

您的目标是一个类而不是一个 ID

```
$('.click').click(function(){});
   ^----- USE # 
```

比您可以使用以下方法：

[http://api.jquery.com/append/](http://api.jquery.com/append/)
[http://api.jquery.com/appendto/](http://api.jquery.com/appendto/)

例子：

```
$('#click').click(function(){
    $('#one').append( $('#two') );
});

$('#click').click(function(){
    $('#two').appendTo( $('#one') );
}); 
```

如果您的元素包含文本，那么这些可能不是您想要的方法...

因此，如果您希望**叠加** `#two`，`#one`则可以使用`offset`：

`**[jsBin demo](http://jsfiddle.net/g6Myb/2/)**`

```
$('#click').click(function(){
    var TWOpos = $('#one').offset();
    var pos = {X: TWOpos.left, Y:TWOpos.top };
    $('#two').css({position:'absolute', left:pos.X, top:pos.Y });
}); 
```

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

**文档：http :** [//api.jquery.com/](http://api.jquery.com/)（请经常阅读。这些是您的工具！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:29:32.823

有大约一百万种不同的方法，我选择的是包装`#one`并`#two`相对定位`div`并在点击时移动`#two`到 0X0

更新了你的小提琴：

[http://jsfiddle.net/g6Myb/1/](http://jsfiddle.net/g6Myb/1/)

```
#one {width: 200px; height: 200px; background-color: red}
#two {width: 200px; height: 200px; background-color: green; opacity: 0.3 }
#wrapper{position: relative;}
#two.on{position: absolute; top:0; left:0;} 
```

```
$('#click').click(function(){
    $("#two").addClass("on");
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:32:02.310

你会想要创建一个新的 CSS 类：

```
.hoverOpacity{
  position:absolute;
  top: 0; //or wherever you want to put it
  right: 0;  //or whereever you want to put it
  opacity: .5; //plus all the browser specific
} 
```

然后单击，将此类添加到 div：

```
$('#click').click(function(){
   $('#two').addClass('hoverOpacity');
}); 
```

# php - 优化 if-else 条件

> ID：14461938
> 
> 赞同：3
> 
> 时间：2013-01-22T15:21:35.320
> 
> 标签：php, if-statement

假设有两个数组`$a, $b`。在任何给定点，其中至少一个不为空，或者两个都不为空。

如何优化以下条件

```
if(!$a)
{
  #TASK A
}
if(!b)
{
  #TASK B
}

if ($a['item']<$b['item'])
{
   #TASK A
}
else
{
  #TASK B
} 
```

我不希望 TASK A 和 B 在程序中重复两次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:34:22.673

```
if(!$a || ($b && ($a['item'] < $b['item']))){
// task A
}
else{
// task B
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:25:02.420

```
if(!$a || ($b && ($a['item'] < $b['item']))){
  // task A

}elseif(!$b || ($a && ($a['item'] >= $b['item']))){
  // task B
} 
```

如果变量可能未设置，请使用`empty()`或`isset()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:31:21.843

这会起作用，但可能不是最佳的。但是代码不是很清楚。TaskA 和 TaskB 是否修改 $a 和 $b？

```
$aDone = false; 
$bDone = false;

if(!$a)
{
  #TASK A
  $aDone = true; 
}
if(!b)
{
  #TASK B
  $bDone = true;
}

if ($a['item'] < $b['item'])
{
   if (!$aDone)
   {
      #TASK A
   }
}
else 
{
   if (!$bDone)
   {
     #TASK B
   }
} 
```

# c - 名称“scanf”和说明符“%g”的由来是什么？

> ID：14461940
> 
> 赞同：4
> 
> 时间：2013-01-22T15:21:40.500
> 
> 标签：c, scanf, stdio

`"f"`in是什么`'scanf'`意思？

另外，为什么双值表示`"%g"`- 是什么`g`意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:24:48.003

我的猜测是`f`该函数需要一个*格式说明符*，就像它一样`printf()`。

`%g`= `%f + 1`，我猜，就像`%d`“十进制整数”一样。

可在[此处](http://www.cplusplus.com/reference/cstdio/scanf/)找到完整列表和说明。

# regex - 介于 0 和 1 之间的浮点数正则表达式

> ID：14461945
> 
> 赞同：6
> 
> 时间：2013-01-22T15:21:53.970
> 
> 标签：regex

`1.0`我正在尝试验证最大值为最小值的浮点数的输入`0`。

```
Min : 0
Max : 1 
```

可能的值；

```
0.1
0.99
0.365 
```

我怎样才能用正则表达式成功？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T15:50:52.820

作为 javascript 正则表达式文字：

```
 /^(0(\.\d+)?|1(\.0+)?)$/ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T15:34:26.387

```
0(\.\d+)?|1\.0 
```

说明：

```
0            # a zero
(\.\d+)?     # a dot and min 1 numeric digit - this is made optional by ?
|            # or
1\.0         # one, a dot and a zero 
```

如果您需要它来匹配整个字符串，那么您将需要分别代表字符串开头和字符串结尾的插入符号和美元符号，如`^(0(\.\d+)?|1\.0)$`

此外，如果您想查找可能的负数，您需要在前面添加一个可选的减号，例如 in `^-?(0(\.\d+)?|1\.0)$`。当然，对于指数，模式需要改变。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-16T18:02:34.447

而已：

```
/^(0+\.?|0*\.\d+|0*1(\.0*)?)$/ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T15:24:12.463

这个正则表达式应该做得很好：

```
/((0(\.[0-9]*)?)|(1(\.0)?))/ 
```

除非您计划匹配指数形式的浮点数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-22T15:26:56.060

这对我有用：

```
0+([.][0-9]+)?|1([.]0)? 
```

还是我错过了什么？:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T15:29:55.920

这将匹配 [0,1] 中带有可选符号的浮点数，但如果使用科学记数法或数字以小数点开头，则不匹配。

```
\+?(0(\.[0-9]+)?|1(\.0+)?) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-16T17:57:26.817

一个通用的解决方案：

`^0*(?:(?:0(?:\.\d*)?|\.\d+)|1(?:\.0*)?)$`

格式化：

```
 ^     
 0* 
 (?:
      (?:
           0 
           (?: \. \d* )?
        |  \. \d+ 
      )
   |  
      1 
      (?: \. 0* )?
 )
 $ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-12T11:58:38.720

只需阅读有关正则表达式的简介。希望这有效！

```
^(0.0*[1-9](\d+)?)$ 
```

让我知道我是否遗漏了什么。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-10T06:06:57.420

`^(?:(?<!\d*[1-9]\.?0*)(?:(?:0+(?:\.\d+)?)|(?:\.\d+)|(?:1(?!\.0*[1-9]+)(?:\.0+)?)))$`

这将接受以下格式的数字 [0,1] 

`0 0.5 .5 1 1.0 1.000`

# erlang - 使用换行符将列表数据写入文件

> ID：14461950
> 
> 赞同：0
> 
> 时间：2013-01-22T15:22:04.947
> 
> 标签：erlang

我正在将一个文本文件读入一个列表，内容是：

```
blah
blah
blah 
```

现在我正在尝试将列表数据写入文件，使其看起来与上面相同，我使用的是：

```
filewrite(File,L) ->
    {ok, S} = file:open(File, write),
    lists:foreach( fun(X) -> io:format(S, "~n",[X]) end, L),
    file:close(S). 
```

但这会将所有内容打印在 1 行上，带有括号和语音标记...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:09:39.173

尝试这个：

```
filewrite(File, []) ->
    ok;
filewrite(File, List) ->
    file:write_file(File, lists:foldl(fun(E, A) ->
        A ++ "\n" ++ E
    end, hd(List), tl(List))). 
```

# jquery - jQuery 电子邮件可用性无法检查用户何时使用自动填充

> ID：14461953
> 
> 赞同：1
> 
> 时间：2013-01-22T15:22:15.230
> 
> 标签：jquery

我有一个完美工作的 jQuery 函数，可以检查电子邮件是否可用，但是，如果浏览器向他们提供自动填充建议，它不会识别出已输入其他字母。例如 - 用户开始输入 admin@admin.com，但是，在“adm”处，他们使用下拉菜单中的自动填充。jQuery 仍然认为只输入了 adm。

```
$(function () {
$('#email').keyup(function () {
    var email = $(this).val();
    if (email != '' && email.length > 6) {
        //$('.check').show();
        $('error').fadeIn(400).html
        var dataString = 'email=' + email;
        $.ajax({
            type: "POST",
            url: "pages/check_email.php",
            data: dataString,
            cache: false,
            success: function (result) {
                if (result == 'Available') {
                    $('.check').html('Available');
                } else {
                    $('.check').html('Unavailable');
                }
            }
        });
    } else {
        $('.check').html('');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:32:23.703

我想建议你的两件事：

1-不要用Keyup勾住你的检查，每次我输入/删除一个字符时都会检查，这可能检查太多了，而是使用模糊。

2-我认为您可以尝试禁用此表单或其中的特定元素的自动完成功能，直到您弄清楚如何解决此问题。

例子：

```
<form id="myForm" autocomplete="off" method="post"> 
```

来自[w3schools](http://www.w3schools.com/html5/att_form_autocomplete.asp)：

> **autocomplete**属性指定表单是否应该打开或关闭自动完成功能。
> 
> 启用自动完成后，浏览器会根据用户之前输入的值自动完成值。
> 
> 提示：可以为表单设置“开启”自动完成功能，为特定输入字段设置“关闭”功能，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:39:37.367

这是我在进行 AJAX 调用**之前**连续使用正则表达式（首先）进行测试时所说的，这样当他们有焦点时，即使他们确实使用了自动完成，几毫秒后它会触发你的 AJAX 并查看是否电子邮件被占用。

[jsFiddle 演示](http://jsfiddle.net/r4rHH/)

```
var testInterval;

$('#email').on({
    focus: function () {
        var _this = $(this);

        testInterval = setInterval(function () {
            var val = _this.val();

            if (/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(val)) {

                clearInterval(testInterval);
                // valid email
                // now do AJAX!
            }
        }, 100); 
    },

    blur: function () {
        clearInterval(testInterval);
    }
}); 
```

# google-maps-api-3 - 基于平均权重而不是数据点数量的热图

> ID：14461954
> 
> 赞同：17
> 
> 时间：2013-01-22T15:22:19.960
> 
> 标签：google-maps-api-3, heatmap

我正在使用 Google API v3 制作热图。我举个例子。让我们考虑地震震级。我为每个点分配权重以指定它们的大小。但是，当您缩小时，谷歌会考虑点的密度。一个地方的点越多，它就越红。例如，如果两次地震发生在相距数英里的范围内，一次为 3 级，另一次为 8 级，则第一个应该是绿色/蓝色，第二个应该是红色。但是一旦你缩小并且这两个点在地图上越来越近，谷歌地图会考虑点的数量而不是权重，因此，它会显示为已读。我希望它是平均值，即 (3+8)/2=5.5...无论代表什么颜色。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-09T10:41:14.737

如果您像我一样没有处理时间或能力来生成覆盖，并且您无法根据自己的喜好修改任何现有库，那么有一个不错的解决方法。

我使用了谷歌地图热图库并将 maxIntensity 和消散设置为 false。将 maxIntensity 设置为您选择的值将解决您的热图点相对于彼此着色而不是 0 或设定值的问题。将消散设置为 false 将禁用更改缩放级别时发生的自动半径设置。

接下来，每当缩放级别发生变化时，我都会创建一个事件，并且在该事件中，我将半径设置为一个似乎以最准确的方式代表该缩放级别的数据的值。

现在为了摆脱地图上的数据点混合并添加到一个大红色斑点中的问题，我决定在我的地图上为我想要使用的每个缩放级别制作一个单独的网格。我对同一网格点内的所有值进行平均，并确保网格足够大以防止热图点重叠，但又足够小以至于看起来不像一堆圆圈。（我发现网格应该是地图上热点半径大小的 0.4 倍，以获得平滑的外观）。

热图点的半径由谷歌以像素为单位设置。我不知道如何将像素转换为纬度/经度，所以我只是通过在具有一定半径的圆上画线来测量它，并测量这些线之间的距离。如果您不打算绘制比一个小国家更多的地图，那么这种转换方法将非常有效。

性能方面，这并不像我想象的那么糟糕。我正在加载大约 2300 个点，并且地图的加载速度与我为每个缩放级别制作网格之前一样快，并且当您更改缩放级别时，您实际上并没有看到数据点正在刷新。

以下是上述所有内容的一些代码：

地图设置：

```
map.heatmap.set('maxIntensity', 12000);
map.heatmap.set('dissipating', false); 
```

每个缩放级别更改网格和半径：

```
map._on({
    obj: map.gMap,
    event: "zoom_changed",
    callback: function(){
        var zoomLevel = map.zoom();
        switch(zoomLevel){
            case 7:
                map.heatmap.setData(gridData[zoomLevel]);
                map.heatmap.set('radius', 0.04);
                break;
            case 8:
                map.heatmap.setData(gridData[zoomLevel]);
                map.heatmap.set('radius', 0.03);
                break;
            case 9:
                map.heatmap.setData(gridData[zoomLevel]);
                map.heatmap.set('radius', 0.02);
                break;
            case 10:
                map.heatmap.setData(gridData[zoomLevel]);
                map.heatmap.set('radius', 0.01);
                break;
            case 11:
                map.heatmap.setData(gridData[zoomLevel]);
                map.heatmap.set('radius', 0.005);
                break;
            case 12:
                map.heatmap.setData(gridData[zoomLevel]);
                map.heatmap.set('radius', 0.0025);
                break;
            case 13:
                map.heatmap.setData(gridData[zoomLevel]);
                map.heatmap.set('radius', 0.00225);
                break;
            default:
                map.heatmap.setData(gridData[zoomLevel]);
                map.heatmap.set('radius', 0.000625);
        }
    }
}); 
```

我的网格是用 PHP 生成的，对于每个人来说可能看起来都不一样，但作为一个例子，这是我使用的函数：

```
function getHeatGrid($gridSize){
$mapGrid = false;
$mapData = false;
$radius = $gridSize * 2.8 * 0.3; //grid size is multiplied by 2.8 to convert from the heat map radius to lat/long values(works for my lat/long, maybe not yours). * 0.3 is arbitrary to avoid seeing the grid on the map.
$string = file_get_contents("mapData.json");
$json_a = json_decode($string, true);

forEach($json_a as $key => $value){
    $row = intval(round(($value['center_longitude'] / $radius)));
    $column = intval(round(($value['center_latitude'] / $radius)/68*111)); //around 52.0;5.0 latitude needs to be scaled to make a square grid with the used longitude grid size
    if(isset($mapGrid[$row][$column])){
        $mapGrid[$row][$column] = round(($value['solarValue'] + $mapGrid[$row][$column]) / 2);
    } else {
        $mapGrid[$row][$column] = $value['solarValue'];
    }
}

forEach($mapGrid as $long => $array){
    forEach($array as $lat => $weight){
        $mapData[] = array(
            "center_longitude" => $long * $radius,
            "center_latitude" => ($lat * $radius)/111*68,
            "solarValue" => $weight
        );
    }
}
return $mapData;
} 
```

不幸的是，我现在无法显示该地图，因为它目前对我工作的公司的客户保密，但如果它公开可用，我将添加一个链接，以便您了解这种方法的效果如何。

希望这可以帮助某人。

卢卡斯

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T22:25:30.627

您可以通过在地图顶部覆盖热图图像来做到这一点。[在https://github.com/jeffkaufman/apartment_prices](https://github.com/jeffkaufman/apartment_prices)有一个非常好的开源示例

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-18T13:39:32.180

根据定义，热图考虑了点密度以及分配给每个点的权重。据我所知，至少谷歌的热图是这样工作的。因此，您实际需要的不是热图，而是根据值对它们进行着色的点图。

我还需要更改 Google 热图考虑的比率密度/重量，以便为地图着色，但我没有找到任何方法。目前热图的主要因素是密度，重量的变化对颜色的影响很小。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-21T20:46:03.157

作为部分解决方案，我从以下项目修改了 heatmap.js： [https ://github.com/pa7/heatmap.js](https://github.com/pa7/heatmap.js)

为了获得单个 long/lat 点的平均值，我修改了 _organiseData 函数来存储每个 x,y 位置的 PointCount 和 PointSum；通过这些值，我得到了一个点的平均值：

存储[x][y] = storePointSum[x][y] / storePointCount[x][y];

当多个x，y坐标以各种地图分辨率堆叠时，我仍在研究如何修改“混合”......如果我弄清楚了，我会发布它。

干杯

〜亚伦

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T22:34:31.250

此示例使用热图作为地图上的图层，希望对您有所帮助： http: [//maps.forum.nu/v3/gm_customTiles.html](http://maps.forum.nu/v3/gm_customTiles.html)

# python - 线程 UDP 侦听器函数

> ID：14461957
> 
> 赞同：3
> 
> 时间：2013-01-22T15:22:25.630
> 
> 标签：python, multithreading, gtk, udp

我对 Python 很陌生，所以如果我的问题是业余的，我深表歉意。

我正在尝试制作一个简单的程序，允许用户查看正在广播的 UDP 消息。为了让程序不死机，我当然需要创建一个单独的线程来监听广播。

在我尝试实现线程之前，该程序运行良好。它只是等待 UDP 消息并在`TextView`收到消息时显示它们。当然，这锁定了主线程。

这是我的代码：（是的，我知道我的代码有几个不相关的问题，但请忽略它们。例如，我从不关闭`socket`. 稍后我会解决这些问题。）

```
import socket
import select
import sys
import threading

try:
    import pygtk
    pygtk.require("2.0")
except:
    pass
try:
    import gtk
except:
    print("GTK not available!")
    sys.exit(1)

class GUI:
    def __init__(self):
        self.builder = gtk.Builder()
        self.builder.add_from_file("UDPListener.ui")
        dic = {"on_mainWindow_destroy" : self.quit,
             "on_listenButton_clicked" : self.startThread,
         "on_stopListenButton_clicked" : self.stopListening}
        self.builder.connect_signals(dic)

        self.listenerThread = threading.Thread(target = self.listen)

    def startThread(self, widget):
        self.listenerThread.start()

    def listen(self):
        bufferSize = 1024                                                          
        IPAddress = "0.0.0.0"
        IPAddress: 0.0.0.0
        portNumber = 50000
        udpClient = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

        textView = self.builder.get_object("messagesReceivedEntry").get_buffer()
        textView.text = textView.get_text(textView.get_start_iter(),textView.get_end_iter())

        textView.set_text("Listening...")

        try:
            udpClient.bind((IPAddress, portNumber))
            udpClient.setblocking(0)
        except:
            print "Cannot connect."

        try:
            while True:
                result = select.select([udpClient],[],[])
                message = result[0][0].recv(bufferSize)
                print message
        except:
            print "Cannot receive message"

    def quit(self, widget):
        sys.exit(0)

    def stopListening(self, widget):
        pass

gui = GUI()
gtk.main() 
```

代码将运行并且一切正常，但它从不打印任何消息（我自己广播它们）。

* * *

**更新：**

感谢 JF Sebastian 的回答，我修改了代码以包含以下内容：

```
import socket
import select
import sys
import threading
import gobject

try:
    import pygtk
    pygtk.require("2.0")
except:
    pass
try:
    import gtk
except:
    print("GTK not available!")
    sys.exit(1)

gobject.threads_init()

class GUI:
    def __init__(self, UDPClient):
        self.udpClient = UDPClient

        self.builder = gtk.Builder()
        self.builder.add_from_file("TestUDPListenerREORG.ui")
        dic = {"on_mainWindow_destroy" : self.quit,
             "on_listenButton_clicked" : self.startThread,
         "on_stopListenButton_clicked" : self.stopListening}
        self.builder.connect_signals(dic)

        self.textView = self.builder.get_object("messagesReceivedEntry").get_buffer()
        self.textViewText = self.textView.get_text(self.textView.get_start_iter(),self.textView.get_end_iter())

        self.listening = False
        self.listenerThread = threading.Thread(target = self.listen)

    def startThread(self, widget):
        self.listenerThread.start()
        pass

    def listen(self):
        try:
            self.udpClient.connect()
        except:
            print "Cannot connect."
        try:
            while True:
                result = select.select([self.udpClient.client],[],[])
                message = result[0][0].recv(1024)
                print message
                gobject.idle_add(self.updateGUI, message)
        except:
            print "Cannot receive message"

    def updateGUI(self, message):
        print "updating..."
        self.textView.set_text(self.textViewText + "\n" + message)
        print message

    def quit(self, widget):
        self.udpClient.close()
        sys.exit(0)

    def stopListening(self, widget):
        pass

class UDPClient:
    def __init__(self, IPAddress, portNumber):
        self.IPAddress = IPAddress
        self.portNumber = portNumber
        self.bufferSize = 1024

        self.client = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

    def connect(self):
        try:
            self.client.bind((self.IPAddress, self.portNumber))
            self.client.setblocking(0)
        except: print "Cannot connect."

    def close(self):
        try:
            self.client.close()
        except:
            pass

udpClient = UDPClient("0.0.0.0", 50000)
gui = GUI(udpClient)
gtk.main() 
```

到目前为止，一切运行完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:02:57.087

我发现适用于多线程 gtk 应用程序的模型是在主线程中运行所有 GUI 代码。gtk 在后台线程中运行的唯一方法是`gobject.idle_add()`安排 gui 回调在主线程中执行。

在运行任何其他 gtk 代码之前，将`gobject.threads_init()`其放在模块顶部的某个位置。

[这是 Gtk 3 的示例，](https://stackoverflow.com/a/11926265/4279)但原理与 Gtk 2 相同。[另一个示例](https://askubuntu.com/a/183315/3712)。

另一种方法是使用类似的东西`gobject.io_add_watch()`并避免使用多个线程。

# c - 确定添加到以太网帧的填充量

> ID：14461960
> 
> 赞同：4
> 
> 时间：2013-01-22T15:22:37.540
> 
> 标签：c, linux-kernel, padding, linux-device-driver

我正在开发 Linux 内核的驱动程序。为了我的项目的成功，我需要确定添加到小于最小 60 字节大小的以太网帧的填充量（不包括 FCS）。我没有生成这些帧；我在 NIC 上接收它们以进行处理。

有`struct sk_buff`, 是否可以直接确定添加到数据包中的尾随零的数量？

我当然可以通过遍历整个数据包来确定该值，找出最高层的内容在哪里结束，然后简单地从帧大小中减去该位置（在本例中为 60 字节）。但是有没有更有效的方法可以直接从存储在 a 上的信息中进行操作`struct sk_buff`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:15:17.927

编辑：据我所知，如果不实际查看以太网标头，就无法直接使用 sk_buff 结构检查零填充，这很简单。

也就是说，通过一些简单的指针运算和字节减法，您可以使用 IP 数据中的长度字段来计算填充。

这是 sk_buff 的一个很好的参考：http: [//vger.kernel.org/~davem/skb_data.html](http://vger.kernel.org/~davem/skb_data.html)

这是数据包结构的一个很好的参考，显示了“数据”内底部图片中的“长度”字段。

[http://nerdcrunch.com/wp-content/uploads/2011/05/Ethernet-Frame-Explained.png](http://nerdcrunch.com/wp-content/uploads/2011/05/Ethernet-Frame-Explained.png)

我认为这是必须完成的方式，但它不需要像您之前维护的那样进行解析。标头/数据结构字段的设置使得它们可以通过指针/数组直接引用/剥离而无需解析，然后通过从原始数据包长度中减去标头+数据长度，您可以获得填充，所有这些都无需检查数据。

希望有帮助。

此外，为了获得最佳实践，您可能应该同时使用两个 802.3 版本的驱动程序帐户。您可以通过检查 Ethertype/length 字段来做到这一点。如果该值大于 1536 (0x0600)，那么您就知道它是以太网 II 类型的数据包，并且该字段包含一个以太网类型，它告诉您以太网数据包封装的内容。如果您在 Wikipedia 中查找“Ethertype”，则有一些流行的。

例如，IP = 0x0800。如果该字段指定了 Ethertype，则必须求助于查找内部的数据长度字段才能找到填充。如果没有，很多基于以太网的 LAN 仍然没有，那么您可以直接使用指定为长度的字段来完成您的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:04:29.653

IPv4 的作用几乎相同，可能没有更好的方法。检查 ip_rcv()：

```
len = ntohs(iph->tot_len);
if (skb->len < len) {
        IP_INC_STATS_BH(dev_net(dev), IPSTATS_MIB_INTRUNCATEDPKTS);
        goto drop;
} else if (len < (iph->ihl*4))
        goto inhdr_error;

/* Our transport medium may have padded the buffer out. Now we know it
 * is IP we can trim to the true length of the frame.
 * Note this now means skb->len holds ntohs(iph->tot_len).
 */
if (pskb_trim_rcsum(skb, len)) {
        IP_INC_STATS_BH(dev_net(dev), IPSTATS_MIB_INDISCARDS);
        goto drop;
} 
```

# linux - 从文件 shell 脚本获取信息 linux grep 命令

> ID：14461964
> 
> 赞同：0
> 
> 时间：2013-01-22T15:22:59.700
> 
> 标签：linux, shell, awk, grep

我需要帮助来使用 tcpdump 命令从网络流量的文件输出中提取信息

> tcpdump -Xvv -i eth0 > capture.txt

给定任何以太网报头、IP 和 TCP 的字段和一个值，指示在此条件下报告的源和目标 IP 机器（在输出中不重复它们）。

文件内容：

```
09:26:13.245546 IP (tos 0x0, ttl 1, id 3439, offset 0, flags [none], proto UDP (17), length 1018)
10.0.0.226.58935 > 239.255.255.250.3702: UDP, ack 555, win 6584, length 990
    0x0000:  4500 03fa 0d6f 0000 0111 ada8 0a00 00e2  E....o..........
    0x0010:  efff fffa e637 0e76 03e6 7ec0 3c3f 786d  .....7.v..~.<?xm
    0x0020:  6c20 7665 7273 696f 6e3d 2231 2e30 2220  l.version="1.0".
    0x0030:  656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
    0x0040:  3f3e 3c73 6f61 703a 456e 7665            ?><soap:Enve
 09:26:13.339173 IP6 (hlim 1, next-header UDP (17) payload length: 998) fe80::21e9:f54b:9ae7:6383.58936 > ff02::c.3702: UDP, length 990
    0x0000:  6000 0000 03e6 1101 fe80 0000 0000 0000  `...............
    0x0010:  21e9 f54b 9ae7 6383 ff02 0000 0000 0000  !..K..c.........
    0x0020:  0000 0000 0000 000c e638 0e76 03e6 666c  .........8.v..fl
    0x0030:  3c3f 786d 6c20 7665 7273 696f 6e3d 2231  <?xml.version="1
    0x0040:  2e30 2220 656e 636f 6469 6e67            .0".encoding
09:26:13.407313 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 10.0.3.118 tell 10.0.1.215, length 46
    0x0000:  0001 0800 0604 0001 0009 0fcb 0a0c 0a00  ................
    0x0010:  01d7 0000 0000 0000 0a00 0376 0000 0000  ...........v....
    0x0020:  0000 0000 0000 0000 0000 d9c4 62a8       ............b.
09:26:13.525954 IP (tos 0x0, ttl 128, id 3441, offset 0, flags [none], proto UDP (17), length 161)
10.0.0.226.59131 > 239.255.255.250.1900: UDP, length 133
    0x0000:  4500 00a1 0d71 0000 0111 b0ff 0a00 00e2  E....q..........
    0x0010:  efff fffa e6fb 076c 008d 6fa6 4d2d 5345  .......l..o.M-SE
    0x0020:  4152 4348 202a 2048 5454 502f 312e 310d  ARCH.*.HTTP/1.1.
    0x0030:  0a48 6f73 743a 3233 392e 3235 352e 3235  .Host:239.255.25
    0x0040:  352e 3235 303a 3139 3030 0d0a            5.250:1900..
09:26:13.557002 IP (tos 0x0, ttl 1, id 3442, offset 0, flags [none], proto UDP (17), length 161)
10.0.0.226.59131 > 239.255.255.250.1900: UDP, length 133
    0x0000:  4500 00a1 0d72 0000 0111 b0fe 0a00 00e2  E....r..........
    0x0010:  efff fffa e6fb 076c 008d 6fa6 4d2d 5345  .......l..o.M-SE
    0x0020:  4152 4348 202a 2048 5454 502f 312e 310d  ARCH.*.HTTP/1.1.
    0x0030:  0a48 6f73 743a 3233 392e 3235 352e 3235  .Host:239.255.25
    0x0040:  352e 3235 303a 3139 3030 0d0a            5.250:1900..
09:26:13.642734 IP (tos 0x0, ttl 1, id 21767, offset 0, flags [none], proto UDP (17), length 684)
10.0.0.237.58882 > 239.255.255.250.3702: UDP, length 656
    0x0000:  4500 02ac 5507 0000 0111 6753 0a00 00ed  E...U.....gS....
    0x0010:  efff fffa e602 0e76 0298 5568 3c3f 786d  .......v..Uh<?xm
    0x0020:  6c20 7665 7273 696f 6e3d 2231 2e30 2220  l.version="1.0".
    0x0030:  656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
    0x0040:  3f3e 3c73 6f61 703a 456e 7665            ?><soap:Enve
09:26:13.642960 IP6 (hlim 1, next-header UDP (17) payload length: 664) fe80::b8a2:bd0:4e0b:1bb5.58883 > ff02::c.3702: UDP, length 656
    0x0000:  6000 0000 0298 1101 fe80 0000 0000 0000  `...............
    0x0010:  b8a2 0bd0 4e0b 1bb5 ff02 0000 0000 0000  ....N...........
    0x0020:  0000 0000 0000 000c e603 0e76 0298 248c  ...........v..$.
    0x0030:  3c3f 786d 6c20 7665 7273 696f 6e3d 2231  <?xml.version="
09:26:13.642999 IP (tos 0x0, ttl 64, id 21767, offset 0, flags [none], proto UDP (17), length 684)
10.0.0.237.58882 > 239.255.255.250.3702: UDP, length 656
    0x0000:  4500 02ac 5507 0000 0111 6753 0a00 00ed  E...U.....gS....
    0x0010:  efff fffa e602 0e76 0298 5568 3c3f 786d  .......v..Uh<?xm
    0x0020:  6c20 7665 7273 696f 6e3d 2231 2e30 2220  l.version="1.0".
    0x0030:  656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
    0x0040:  3f3e 3c73 6f61 703a 456e 7665            ?><soap:Enve 
```

比如头是：ttl 1

结果必须是：

```
Source: 10.0.0.226.58935  --- Destination: 239.255.255.250.3702  - 1 Time 
Source: 10.0.0.237.58882  --- Destination: 239.255.255.250.3702 - 2 Times 
```

其他方式：是header是：ack还是win：例如：ack 555

```
Source: 10.0.0.226.58935  --- Destination: 239.255.255.250.3702  - 1 Time 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:30:54.873

使用`awk`匹配`ack 555`：

```
$ awk -F'[:>]' '/ack 555/{u["Source: "$1"--- Destination:"$2]++}END{for(k in u)print k,u[k]" - time"(u[k]>1?"s":"")}' file
Source: 10.0.0.226.58935 --- Destination: 239.255.255.250.3702 1 - time 
```

匹配`ttl 1`：

```
$ awk -F'[>:]' '/ttl 1,/{getline;u["Source: "$1"--- Destination:"$2]++}END{for(k in u)print k,u[k]" - time"(u[k]>1?"s":"")}' file
Source: 10.0.0.237.58882 --- Destination: 239.255.255.250.3702 1 - time
Source: 10.0.0.226.59131 --- Destination: 239.255.255.250.1900 1 - time
Source: 10.0.0.226.58935 --- Destination: 239.255.255.250.3702 1 - time 
```

但是，您的示例与您的预期输出不匹配。

# javascript - 函数声明

> ID：14461966
> 
> 赞同：-1
> 
> 时间：2013-01-22T15:23:00.690
> 
> 标签：javascript, function

> **可能重复：**
> [JavaScript：var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)
> [Javascript 中的函数表达式与声明有什么区别？](https://stackoverflow.com/questions/1013385/what-is-the-difference-between-a-function-expression-vs-declaration-in-javascrip)

声明 Javascript 函数的正确方法是什么？

从 codeacademy.com 我得到了这样的方法：

```
var someFunction = function(paramA, paramB){
    // do some function here
} 
```

但是因为我的编程基础是 PHP，所以我更喜欢用这种方式声明函数：

```
function someFunction(paramA, paramB){
    // do some function
} 
```

我关心的是推荐使用哪种方法来声明函数，我担心如果我的首选方式会产生一些后果，但我非常喜欢这种方式，因为它使我的 NetBeans Code Navigator 可以读取我的所有函数。

![Netbeans 代码导航器](../Images/043f38609e99ad0606ad746d0e99c8af.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:29:11.297

两者都可以接受。事实上，你也可以这样做：

```
foo = function bar() { 
          console.log(arguments.callee.name); 
}; 
```

如果您随后调用`foo()`，您将`"bar"`在控制台中看到。

第一种方法创建一个匿名函数并将其分配给一个变量。

第二种方法创建一个命名函数并将其放置在当前范围内。

第三种方法创建一个命名函数并将其分配给一个变量。但是，这一次，名称只存在于该函数的范围内。

使用名称 ( ) 声明函数`function name () {}`的优点是，您可以更轻松地从内部调用该函数，这可能是实现递归算法所必需的。如果不这样做，则必须使用`arguments.callee.name`它来调用自身内部的函数，但这在[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)中被警告过。

所有这些都是一种冗长的说法，要么是可以接受的，如果有疑问，使用命名函数不会出错。

# python - 关于python中的rpm模块

> ID：14461975
> 
> 赞同：2
> 
> 时间：2013-01-22T15:23:12.003
> 
> 标签：python, rpm

我查找了一些信息，rpm模块只能用于搜索已安装的rpm包信息。我想使用python rpm模块搜索文件夹中的*.rpm文件并了解它们的信息，如发行版或版本。这可以使用吗rpm 模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-03T09:13:25.137

如果有人在寻找答案时仍然在这里结束，您可以使用 python-rpm 做到这一点：

```
import os
import rpm

fdno = os.open(PATH_TO_RPM_FILE, os.O_RDONLY)
ts = rpm.ts()
hdr = ts.hdrFromFdno(fdno)
os.close(fdno) 
```

（注意对 os.close() 的调用）

现在`hdr`保存 RPM 标头信息。您可以使用 RPMTAG_* 值作为键以 dict 样式访问各个属性，例如：

```
arch = hdr[rpm.RPMTAG_ARCH] 
```

您可以尝试使用以下方法对所有可能的 RPMTAG_* 值进行逆向工程`dir()`：

```
import rpm
print '\n'.join(filter(lambda x: x.startswith('RPMTAG'), dir(rpm))) 
```

您也可以调用`keys()`on `hdr`，但它会将可能的键作为整数返回，这可能不那么友好。

我发现当要处理大量 RPM 文件时，使用 python-rpm 而不是调用命令行工具作为子进程可以显着提高性能。

有关详细信息，请参阅[http://rpm5.org/docs/api/classRpmhdr.html](http://rpm5.org/docs/api/classRpmhdr.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:30:07.767

据我所知，没有办法做到这一点。您最简单的选择是直接调用 rpm 命令并解析数据

```
subprocess.check_output( ["rpm", "-qip", "CentOS_Image/Packages/python-2.6.6-29.el6_2.2.x86_64.rpm" ] )

'Name        : python\nVersion     : 2.6.6\nRelease     : 29.el6_2.2\nArchitecture: x86_64\nInstall Date: (not installed)\nGroup       : Development/Languages\nSize        : 21290059\nLicense     : Python\nSignature   : RSA/SHA1, Mon 18 Jun 2012 14:47:20 BST, Key ID 0946fca2c105b9de\nSource RPM  : python-2.6.6-29.el6_2.2.src.rpm\nBuild Date  : Mon 18 Jun 2012 14:21:55 BST\nBuild Host  : c6b5.bsys.dev.centos.org\nRelocations : (not relocatable)\nPackager    : CentOS BuildSystem <http://bugs.centos.org>\nVendor      : CentOS\nURL         : http://www.python.org/\nSummary     : An interpreted, interactive, object-oriented programming language\nDescription :\nPython is an interpreted, interactive, object-oriented programming\nlanguage often compared to Tcl, Perl, Scheme or Java. Python includes\nmodules, classes, exceptions, very high level dynamic data types and\ndynamic typing. Python supports interfaces to many system calls and\nlibraries, as well as to various windowing systems (X11, Motif, Tk,\nMac and MFC).\n\nProgrammers can write new built-in modules for Python in C or C++.\nPython can be used as an extension language for applications that need\na programmable interface. This package contains most of the standard\nPython modules, as well as modules for interfacing to the Tix widget\nset for Tk and RPM.\n\nNote that documentation for Python is provided in the python-docs\npackage.\n' 
```

# ruby-on-rails - Rspec 视图测试不呈现更改

> ID：14461981
> 
> 赞同：1
> 
> 时间：2013-01-22T15:23:37.743
> 
> 标签：ruby-on-rails, view, rspec, tdd

我正在使用 rspec 在我的 rails 3.2 应用程序中测试一个视图。

我已经为我的视图编写了包含一些额外输入字段的测试，但它们正确地失败了。但是，在添加所需的输入字段后，测试仍然以同样的方式失败。他们在终端中输出表单，就好像我没有更改视图中的任何内容。

在浏览器中检查视图时，字段实际上就在那里，因此测试应该通过。

rspec 没有加载最新的视图吗？

这是一些代码（我已将其简化为两个字段）：

```
it "renders the form to sign up" do
    rendered.should have_selector("form", action: "/users", method: "post") do |form|
        form.should have_selector("input#user_email", name: "user[email]", type: "email")
        form.should have_selector("input#user_city", name: "user[city]", type: "text")
    end
end 
```

电子邮件输入是我以前的旧输入，它确实可以识别它。城市输入是新的，它甚至没有出现在终端的视图输出中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:04:02.490

哇，这是一个棘手的问题。

我正在使用设计并想测试它的观点。在我看来测试中，我说：

```
describe "devise/registrations/new" do
  # code here
end 
```

但是，前几天我切换到范围视图，并将视图文件夹名称从 更改`devise`为`users`。如果您有不同的用户模型，例如并且需要不同的视图，则范围视图`user`很好`admin`。`config/initializers/devise.rb`您可以通过将现有范围线替换为以下内容来打开范围视图：

```
config.scoped_views = true 
```

因此，我还不得不将我的规格描述更改为

```
describe "users/registrations/new" do # change to "users" instead of "devise"
  # code here
end 
```

由于我没有这样做，它仍然渲染了设计的标准视图，当它在我的视图文件夹中找不到任何视图时它会渲染 - 因此我的终端中的源代码输出表明它可以渲染正确的视图，但是缺少更新的代码。

# knockout.js - 可从另一个函数观察到

> ID：14461982
> 
> 赞同：2
> 
> 时间：2013-01-22T15:23:40.720
> 
> 标签：knockout.js

我有以下代码

```
var Person = function() {
    firstName = ko.observable();
    lastName = ko.observable();
};

function AppViewModel() {
    var self = this;
    self.personData = ko.observable(new Person());
    self.newPerson = ko.observable(new Person());
    self.savePerson = function() {
        // ajax call
        // self.personData will be empty - why?
        console.log(ko.toJSON(self));
    };

    self.newPerson = function() {
        self.newPerson = ko.observable(new Person()); // this makes the object disappear from the model, dunno why
    };
}

// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

我试图将“Person”绑定到“PersonData”可观察对象并在单击新按钮时重置该“PersonData”，但是当我将模型发布回系统时，它变为空。

jsfiddle在这里 [http://jsfiddle.net/DiegoVieira/SKVRm/](http://jsfiddle.net/DiegoVieira/SKVRm/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:31:27.953

您的 newPerson 函数有错误，语法正确

```
self.personData(new Person()); 
```

[http://jsfiddle.net/SKVRm/3/](http://jsfiddle.net/SKVRm/3/)

编辑：您分配了错误的成员，并且您还被重新分配了一个新的可观察对象，而不是更新旧的可观察对象，即通过绑定绑定到 personData 的对象

# android - 附加 cordova-2.3.0.js 后，我的应用程序永远挂起

> ID：14461983
> 
> 赞同：3
> 
> 时间：2013-01-22T15:23:43.783
> 
> 标签：android, cordova, sencha-touch, sencha-touch-2

我采取了以下步骤在我的应用程序中使用 Phonegap 库：

1.  [从http://phonegap.com/download/](http://phonegap.com/download/)下载 phohegap-2.3.0
2.  将 cordova-2.3.0.js 从 phonegap-2.3.0/lib/android/ 复制到我的**sencha touch 2**应用程序的根目录
3.  将以下内容添加到我的 sencha touch 应用程序根目录下的**app.json中：**

    ```
     {   
            "path": "cordova-2.3.0.js",
            "update": "delta"
        }, 
    ```

在 Chrome 浏览器中它工作正常。但是，当我在真实设备（Android 2.3.0）上运行该应用程序时，它会永远挂在第一个标准闪烁屏幕上。

有谁知道 -**我是否已完成**安装 Phonegap 所需的所有步骤，还是还有更多步骤？

**更新**

我生成了一个空应用程序，它不适用于附加的 cordova.js（当对象在附加 sencha-touch.js 之前）。

这可能很奇怪，但是当我将带有“cordova-...js”的字符串放在“js”字段的底部（以前它是“js”数组中的第一个对象）时，应用程序会正常加载：

```
"js": [
        {
            "path": "touch/sencha-touch.js"
        },
        {
            "path": "app.js",
            "bundle": true,  /* Indicates that all class dependencies are concatenated into this file when build */
            "update": "delta"
        },
        {
            "path": "cordova-2.2.0.js"
        }
    ]... 
```

但是我不确定 PhoneGap 是否正常工作。我将对其进行测试并发布我的结果。

# c# - 自定义 ASP.net 成员资格 4.5

> ID：14461987
> 
> 赞同：1
> 
> 时间：2013-01-22T15:23:59.157
> 
> 标签：c#, asp.net, linq, entity-framework

我目前正在使用创建新解决方案时出现的默认 ASP.NET 4.5 成员资格。我已经对其进行了一些更改，添加了角色，所以第四个但是现在我想继续自定义我很好奇自定义给定的成员资格是一种“更好的做法”（仍在研究这有多大可能）还是我最好尝试一下从头开始构建它？我正在努力自学，所以我想获得经验，以了解如果我被录用，我能看到什么。企业使用 ASP.net 会员资格吗？我当前的项目使用代码优先实体框架和 LINQ。可以这么说，我觉得会员资格在幕后做了很多事情。它执行的操作背后的代码很少，现在我想进行更改，这有点让我失望。

任何人都可以对此有所了解，或者推荐一些好的阅读材料吗？

按要求编辑

到目前为止，简单的事情就像在创建用户时我想添加一些字段来请求更多信息。

```
`  protected void RegisterUser_CreatedUser(object sender, EventArgs e)
        {
            FormsAuthentication.SetAuthCookie(RegisterUser.UserName, createPersistentCookie: false);

            string continueUrl = RegisterUser.ContinueDestinationPageUrl;
            if (!OpenAuth.IsLocalUrl(continueUrl))
            {
                continueUrl = "~/";
            }
            Response.Redirect(continueUrl);
        }` 
```

我看不到代码隐藏如何获取表单中的数据。或者它是如何真正做到令人尴尬的事情。我对 LINQ 和 Entity 有很好的理解，所以我想用它来修改它，我想这怎么可能修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:43:10.017

最佳实践将只是覆盖特定方法，而不是重写全新的提供程序。

```
public class MyMembershipProvider : MembershipProvider {} 
```

如果您想学习，我建议您反编译 Provider dll 并查看引擎盖下的内容。它太大了；我不能在这里发布它们。[Telerik JustDecompile](http://www.telerik.com/products/decompiler.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:44:08.257

根据经验，一些企业使用 .NET 中的 Custom MembershipProvider 和 Custom RoleProvider 作为其成员资格提供者的骨干。我认为遵循类似于此示例的模式会有所帮助： [Custom MembershipProvider in .NET 4.0](https://stackoverflow.com/questions/5701673/custom-membershipprovider-in-net-4-0) ，它应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:58:16.000

我们在多个应用程序中使用了 MembershipProvider。然后我们转向 Custom MembershipProvider，它解决了来自客户端的一些特定领域的请求。

当我们使用 MembershipProvider 时，我们的 DBA 对在 MSQL 中创建的所有表都不满意

现在我们不再使用 MembershipProvider 并从头开始构建大部分内容。

我们确实使用了一些内置函数，例如 System.Web.Security.FormsAuthentication.SignOut() 等。

祝你好运 ..

# jsf - 在 Web 过滤器中访问会话范围的 JSF 托管 bean

> ID：14461989
> 
> 赞同：17
> 
> 时间：2013-01-22T15:24:02.563
> 
> 标签：jsf, servlet-filters, managed-bean, session-scope

我有一个名为 userSession 的 SessionScoped bean 来跟踪用户（用户名、ifLogged 等）。我想过滤一些页面，因此我需要从我创建的 webFilter 访问 bean。我怎么做？我看起来甚至不可能将 bean 导入潜在地可见。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-22T15:49:53.940

在幕后，JSF 将会话范围的托管 bean 存储为 的属性，[`HttpSession`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)托管 bean 名称作为键。

所以，只要你有一个`@ManagedBean @SessionScoped public class User {}`，就应该在`doFilter()`方法内部这样做：

```
HttpSession session = ((HttpServletRequest) request).getSession(false);
User user = (session != null) ? (User) session.getAttribute("user") : null;

if (user != null && user.isLoggedIn()) {
    // Logged in.
} 
```

或者，如果您实际上是使用 CDI 而不是 JSF 来管理 bean，那么`@Inject`直接在过滤器中使用即可。

### 也可以看看：

*   [在任何 Servlet 相关类中按名称获取 JSF 托管 bean](https://stackoverflow.com/questions/2633112/jsf-get-managed-bean-by-name/)
*   [防止在未登录 Jsf2 的情况下访问受限页面](https://stackoverflow.com/questions/6883430/prevent-accessing-restricted-page-without-login-in-jsf2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T19:25:24.550

作为替代方案，您可以使用 CDI-beans 并正常注入您的 sessionbean。

# html - 如何在具有动态高度的 div 上居中滚动内容？

> ID：14461991
> 
> 赞同：3
> 
> 时间：2013-01-22T15:24:12.627
> 
> 标签：html, css, web-applications

我正在制作一个网络应用程序，目前我正在尝试完成基本设计。所以页面上应该有几列应该能够在 x 轴上浮动。它们现在的宽度是静态的，它们的高度将是浏览器窗口的 100%。这是一个 JSFiddle：http: [//jsfiddle.net/qAUXQ/](http://jsfiddle.net/qAUXQ/)

在这些列中，应该有垂直居中的内容。但是，如果某一列的内容高于浏览器窗口，则应该出现滚动条。问题是，由于高度是动态的，我能想到的唯一方法（并在 Google 上找到）就是使用该`display: table`方法。

问题是 div 上的滚动条不起作用。所以当浏览器窗口太小时，用户根本看不到它。它不能滚动！

如果您不想使用 JSFiddle，下面是代码：

```
<div class="bar">
    <div class="middle">
        <div class="contents">
            <p>Lorem Ipsum</p>
            <p>Lorem Ipsum</p>
            <p>Lorem Ipsum</p>
            <p>Lorem Ipsum</p>
            <p>Lorem Ipsum</p>
            <p>Lorem Ipsum</p>
        </div>
    </div>
</div> 
```

CSS：

```
html, body {
    height: 100%;
    margin: 0;
    padding: 0;

}

body {
    background: #f4f1ed;
}

.bar {
    height: 100%;
    border-style: solid;
    width: 360px;
    display: table;
    border-width: 0 1px;
    border-color: #ddd;
    position: absolute;
    transition: left 500ms;
    -moz-transition: left 500ms;
    -webkit-transition: left 500ms;
    -o-transition: left 500ms;
    z-index: 10;
    background: #f2f2f2;
}

.bar div.middle {
    display: table-cell;
    vertical-align: middle;
}

.bar div.contents {
    padding-left: 60px;
    overflow-y: scroll;
    overflow-x: hidden;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:50:13.753

好的，所以我终于自己弄清楚了。这很容易，但我只是“盲目”......

这是小提琴：http: [//jsfiddle.net/qAUXQ/6/](http://jsfiddle.net/qAUXQ/6/)

这样做：

```
div bar
    div container
        div contents
            contents 
```

然后你做一些CSS：

```
.bar {
    overflow-x: hidden;
}

.container {
    display: table;
}

.contents {
    display: table-cell;
    vertical-align: middle;
} 
```

我首先做的是将 .bar 设置为`display: table`. 所以滚动条不起作用。现在滚动条设置在 .bar 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:31:53.040

有一点时间准确地理解你在问什么。但从我收集的内容来看，您可能想尝试添加高度并使用

```
overflow:scroll; 
```

**编辑（更新）**

不得不将它改组一下，但这有效：

```
 html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}
body {
    background: #f4f1ed;
}
.bar {
    height: 100%;
    border-style: solid;
    width: 360px;
    border-width: 0 1px;
    border-color: #ddd;
    position: absolute;
    transition: left 500ms;
    -moz-transition: left 500ms;
    -webkit-transition: left 500ms;
    -o-transition: left 500ms;
    z-index: 10;
    background: #f2f2f2;
    overflow:scroll;
}
.bar div.middle {
    height: 100%;
    display: table;
}
.bar div.contents {
    padding-left: 60px;
    display: table-cell;
    vertical-align:middle;
} 
```

可以查看[http://jsfiddle.net/qAUXQ/7/](http://jsfiddle.net/qAUXQ/7/)以获得完整的解决方案（更新）

重新更新以进行居中。想要在你要去的方向上使用表格和表格单元格。用次要列表检查它，它居中，更长的列表，它滚动。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:39:42.190

我不确切知道您要做什么，当我没有弄错时，您希望 .bar div 的高度为 100%，带有滚动条，而 .middle 和 .contents 位于垂直中心。因此，只需尝试更改以下内容：

`.bar {display:block; overflow: auto; height: 100%; min-height:100%; width:100%; }`

为 display:table 添加一个额外的 div 标签：

```
div.table{
height:100%;
border-style: solid;
width: 360px;
display: table;
border-width: 0 1px;
border-color: #ddd;
position: absolute;
transition: left 500ms;
-moz-transition: left 500ms;
-webkit-transition: left 500ms;
-o-transition: left 500ms;
z-index: 10;
background: #f2f2f2;} 
```

您只需使用其余两个表格元素进行垂直和水平对齐。那里没有溢出。现在您有 3 个用于设置表格的 div 和一个用于控制溢出和滚动条的 div。

像这样？[http://jsfiddle.net/WAjdp/](http://jsfiddle.net/WAjdp/)

# c# - 如何在 C# 中将列表的属性收集到另一个列表？

> ID：14461997
> 
> 赞同：4
> 
> 时间：2013-01-22T15:24:23.397
> 
> 标签：c#, linq, list

请建议使用 C# 中另一个类的列表的属性填充列表中的类属性的最佳方法。

我有

```
class Source 
{
   public object A {get; set;}
   public object B {get; set;}
   public object C {get; set;}
}

class Destination
{
   public object A {get; set;}
   public object B {get; set;} // (A,B) is a unique key
   public List<object> Cs {get; set;}
   public object D {get; set;} 
} 
```

然后我有

```
List <Destination> destinations; // Cs = null
List <Source> sources; //may have zero, one or more than one Cs for (A,B) 
```

如何用 C of Sources 填充 Cs of Destinations（或其他类）？可以在这里使用 LINQ 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:25:21.183

LINQ 救援：

```
sources = destinations.SelectMany(d => d.Cs); 
```

你可能想要

```
sources = destinations.SelectMany(d => 
    d.Cs.Select(c => new Source { A = d.A, B = d.B, C = c })
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T15:29:41.370

按 A 和 B（您的唯一键）对源进行分组，然后从组中的所有项目中选择 C：

```
var destinations = from s in sources
                   group s by new { s.A, s.B } into g
                   select new Destination()
                   {
                       A = g.Key.A,
                       B = g.Key.B,
                       Cs = g.Select(x => x.C).ToList()
                   }; 
```

如果您需要更新现有目的地，请更新

```
foreach(var d in destinations)
   d.Cs = sources.Where(s => s.A == d.A && s.B && d.B).ToList(); 
```

或者（我相信这会更快）

```
var lookup = sources.ToLookup(s => new { s.A, s.B }, s => s.C);
foreach (var d in destinations)            
     d.Cs = lookup[new { d.A, d.B }].ToList(); 
```

[演示](http://ideone.com/8Xl3eA#view_edit_box)

# css - Chrome 忽略的背景位置

> ID：14461998
> 
> 赞同：0
> 
> 时间：2013-01-22T15:24:22.467
> 
> 标签：css, google-chrome, background-image, background-position

我在 Chrome 中定位两个背景图像时遇到问题。在 FF 和 IE 中，图像就在我想要的位置，但在 Chrome 中，它们都只是位于左上角。所以 Chrome 会忽略 background-position 属性。当我从该属性中删除 150px 时，它可以工作，但我希望图像距离底部 150px。

```
#wrap {width:100%; position:relative;z-index:1; background-color:#ebebeb; background-image: url("/portals/0/images/bosch_rechtsonder.png"),url("/portals/0/images/meba_linksmidden.png"); background-position: right bottom 150px, left bottom 150px; background-repeat: no-repeat;background-attachment: scroll, scroll;} 
```

有人对此有其他解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:27:05.757

给出3个值是什么意思？

```
background-position: right bottom 150px, left bottom 150px; 
```

价值`right`很好，`bottom`很好。为什么在`150px`那儿？去掉它。将其更改为：

```
background-position: right bottom, left bottom; 
```

你知道它是`150px`从底部固定的定位。唯一的方法是提供 150px 的空白或使用**图像编辑器**将其设置为透明并将其放在背景上。在不知道元素的`height`.