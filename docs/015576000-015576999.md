# StackOverflow 问答 15576000-15576999

# c - 在 C 中，可以通过指针修改 const 变量吗？

> ID：15576000
> 
> 赞同：5
> 
> 时间：2013-03-22T17:01:55.000
> 
> 标签：c, pointers, constants

我在我的代码中写了一些类似的东西

```
const int x=1;
int *ptr;
ptr = &x;
*ptr = 2; 
```

这适用于所有编译器吗？为什么 GCC 编译器没有注意到我们正在更改一个常量变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T17:33:34.787

`const`实际上并不意味着“恒定”。C 语言中的“常量”具有在编译时确定的值；文字`42`就是一个例子。`const`关键字实际上意味着只读。例如，考虑：

```
const int r = rand(); 
```

的值`r`直到程序执行时才确定，但关键字表示初始化后`const`不允许修改。`r`

在您的代码中：

```
const int x=1;
int *ptr;
ptr = &x;
*ptr = 2; 
```

赋值`ptr = &x;`是*违反约束*的，这意味着需要一个符合要求的编译器来抱怨它；您不能合法地将`const int*`（指向 const int 的指针）值分配给非常量`int*`对象。*如果*编译器生成一个可执行文件（它不需要这样做；它可以拒绝它），那么该行为不是由 C 标准定义的。

例如，生成的代码实际上可能将值存储`2`在`x`-- 但随后对的引用`x`可能会产生该值`1`，因为编译器*知道*在其初始化之后`x`不能修改。它知道，因为你告诉它，通过定义`x`为`const`。如果你对编译器撒谎，后果可能是任意糟糕的。

实际上，可能发生的最糟糕的事情是程序的行为与您期望的一样；这意味着您有一个很难检测到的错误。（但你应该得到的诊断将是一个很大的线索。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T21:14:22.880

[在线 C 2011 草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)：

> ### 6.7.3 类型限定符
> 
> ...
> 6**如果尝试通过使用具有非 const 限定类型的左值来修改使用 const 限定类型定义的对象，则行为未定义**。如果尝试通过使用具有非易失性限定类型的左值来引用使用易失性限定类型定义的对象，则该行为是未定义的。^(133))
> 
> * * *
> 
> ^(133) 这适用于那些表现得好像它们是用限定类型定义的对象，即使它们实际上从未定义为程序中的对象（例如内存映射输入/输出地址处的对象）。)

重点补充。

由于行为未定义，编译器不需要发出诊断，也不需要停止翻译。这在一般情况下很难捕捉到；假设你有一个像

```
void foo( int *p ) { *p = ...; } 
```

在它自己的单独翻译单元中定义。在翻译期间，编译器无法知道是否`p`可以指向`const`-qualified 对象。如果您的电话类似于

```
const int x;
foo( &x ); 
```

您*可能会*`parameter 1 of 'foo' discards qualifiers`收到类似或类似 的警告。

另请注意，`const`限定符并不一定意味着相关变量将存储在只读内存中，因此上述代码可能会“工作”（更新 中的值`x`），因为您可以`x`通过结束成功更新-绕着`const`语义跑。但是，您还不如不声明`x`为`const`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:04:22.787

糟糕的程序员。没有月饼！

如果您需要修改 const，请将其复制到非 const 变量，然后使用它。这是 const 是有原因的。试图“偷偷摸摸”绕过 const 可能会导致严重的运行时问题。即优化器可能使用了内联值等。

```
const int x=1;
int non_const_x = x;
non_const_x = 2; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T17:06:02.590

这里有一个很好的讨论：[邪恶的演员是否被邪恶的编译器打败了？](https://stackoverflow.com/questions/712334/does-the-evil-cast-get-trumped-by-the-evil-compiler)

我希望 gcc 编译它，因为：

*   ptr 被允许指向 x，否则阅读它是不可能的，尽管正如下面的评论所说，它不是完全出色的代码，编译器应该抱怨。警告选项（我猜）会影响它是否实际被警告。
*   当您写入 x 时，编译器不再“知道”它正在写入 const，所有这些都在 C 中的编码人员手中。但是，它确实知道，因此它可能会警告您，具体取决于警告选项你已经选择了。

但是，它是否有效将取决于代码的编译方式、针对所选编译选项实现 const 的方式以及目标 CPU 和体系结构。它可能会起作用。或者它可能会崩溃。或者您可能会写入“随机”内存并导致（或不）一些怪异的效果。这不是一个好的编码策略，但这不是你的问题:-)

# php - 用于过滤不当内容的 PHP 脚本或 API

> ID：15576004
> 
> 赞同：4
> 
> 时间：2013-03-22T17:02:12.077
> 
> 标签：php, filtering, contentcontrol

我经营一个网站，有抱负的作家可以在上面发布他们的作品。自然地，这些写作中的某些内容可能具有“敏感”性质。有时它包含很多脏话，有时是恶意的，有时是自杀式的。这不是常态，但它存在。

当然，我们希望我们的用户可以随意发布他们喜欢的内容，但问题出现在广告商身上。也就是说，Google Adsense 会定期向我们发送有关包含过多脏话或诽谤的内容的警告。最新的是有人写的一篇关于割伤自己的文章，谷歌认为这太“悲惨”了。

我通常能够编写脚本，也可以浏览文本并检测到很多脏话或种族主义术语或反同性恋言论等。但我无法为我的生活弄清楚如何检测“悲剧”文本。

所以，问题是2倍。

1.  是否有某种 PHP 类/函数/API 擅长检测不当内容？
2.  关于如何自动检测自杀或自残内容的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T14:56:35.010

您可以针对悲剧内容的外观训练[贝叶斯过滤器。](http://en.wikipedia.org/wiki/Bayesian_filter)就像垃圾邮件过滤器一样，但对于您想要阻止的内容。我使用了这个 PHP 库，它运行良好：[https ://github.com/Dachande663/PHP-Classifier](https://github.com/Dachande663/PHP-Classifier)

它很适合人类的节制和标记过程。

# javascript - 显示 NaN 的输入字段

> ID：15576008
> 
> 赞同：0
> 
> 时间：2013-03-22T17:02:15.443
> 
> 标签：javascript, knockout.js

**描述**

你好，我正在使用淘汰赛。我有三个复选框和一个输入字段。当我单击复选框时，复选框的值应出现在输入字段中。但是，我没有看到复选框的值，而是看到了 NaN。

**[jsFiddle 链接](http://jsfiddle.net/uFQdq/4)**

```
function ViewModel() {
    var self = this;  
    self.primaryClass = ko.observable("50"); 
    self.secondaryClass = ko.observable("40"); 
    self.otherClass = ko.observable("10"); 

    self.selectedValues = ko.observableArray([]);

    self.sum = ko.computed(function () {
        var total = 0;
        ko.utils.arrayForEach(self.selectedValues(), function (item) {
            total += parseInt(item);
        });
        return total;
    });

}

ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:08:38.653

查看代码，在这一行，

```
total += parseInt(item); 
```

变量 item 是您的复选框的值。

```
<input data-bind="checked: selectedValues" type="checkbox" value="primaryClass">500</input>
<input data-bind="checked: selectedValues" type="checkbox" value="secondaryClass">200</input>
<input data-bind="checked: selectedValues" type="checkbox" value="otherClass">100</input> 
```

意思是你正在尝试`parseInt("primaryClass")`……等等。

尝试将复选框的值更改为数字。

喜欢这里：http: [//jsfiddle.net/2L4W9/](http://jsfiddle.net/2L4W9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:10:03.923

看一下这个：

[http://jsfiddle.net/Dtwigs/uFQdq/5/](http://jsfiddle.net/Dtwigs/uFQdq/5/)

像这样输入以使它们动态化：

```
<label>
<input data-bind="checked: selectedValues, value: primaryClass" type="checkbox"></input>
<span data-bind="text: primaryClass"></span>
</label> 
```

将您的值更改为文本中的值。

# java - 如何使 HashMap 以数组为键工作？

> ID：15576009
> 
> 赞同：32
> 
> 时间：2013-03-22T17:02:20.137
> 
> 标签：java, arrays, hashmap

我使用布尔数组作为 HashMap 的键。但是问题是当不同的数组作为键传递时，HashMap 无法获取键，尽管元素是相同的。（因为它们是不同的对象）。

我怎样才能使它与数组作为键一起工作？这是代码：

```
public class main {
public static HashMap<boolean[], Integer> h;

public static void main(String[] args){
    boolean[] a = {false, false};

    h = new HashMap<boolean[], Integer>();
    h.put(a, 1);

    if(h.containsKey(a)) System.out.println("Found a");

    boolean[] t = {false, false};

    if(h.containsKey(t)) System.out.println("Found t");
    else System.out.println("Couldn't find t");

}

} 
```

两个数组`a`都`t`包含相同的元素，但 HashMap 不返回任何`t`.

我如何使它工作？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-22T17:07:38.233

你不能这样做。两者`t`和`a`将具有不同`hashCode()`的值，因为该`java.lang.Array.hashCode()`方法继承自`Object`，它使用引用来计算哈希码（默认实现）。因此，数组的哈希码是依赖于引用的，这意味着您将获得 和 的不同哈希码`t`值`a`。此外，`equals`这对这两个数组不起作用，因为这也是基于参考的。

`boolean`您可以做到这一点的唯一方法是创建一个将数组保留为内部成员的自定义类。然后，您需要覆盖`equals`并`hashCode`确保包含具有相同值的数组的实例是相等的并且也具有相同的哈希码。

一个更简单的选择可能是`List<Boolean>`用作键。根据[文档](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#hashCode())，`hashCode()`实现`List`定义为：

```
int hashCode = 1;
Iterator<E> i = list.iterator();
while (i.hasNext()) {
    E obj = i.next();
    hashCode = 31*hashCode + (obj==null ? 0 : obj.hashCode());
} 
```

如您所见，它取决于列表中的值而不是参考，因此这应该适合您。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-22T17:08:53.820

不可能对数组执行此操作，因为任何两个不同的数组都不会比较`equals`，即使它们具有相同的元素。

例如，您需要从容器类进行映射`ArrayList<Boolean>`（或者简单地说`List<Boolean>`。也许`BitSet`会更合适。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-22T17:22:13.453

`Map`实现依赖于密钥`equals`和`hashCode`方法。java中的数组是直接扩展的`Object`，它们使用默认值并且`equals`只比较。`hashCode``Object``identity`

如果我是你，我会创建一个类`Key`

```
class Key {
    private final boolean flag1;
    private final boolean flag2;

    public Key(boolean flag1, boolean flag2) {
        this.flag1 = flag1;
        this.flag2 = flag2;
    }

    @Override
    public boolean equals(Object object) {
        if (!(object instanceof Key)) {
            return false;
        }

        Key otherKey = (Key) object;
        return this.flag1 == otherKey.flag1 && this.flag2 == otherKey.flag2;
    }

    @Override
    public int hashCode() {
        int result = 17; // any prime number
        result = 31 * result + Boolean.valueOf(this.flag1).hashCode();
        result = 31 * result + Boolean.valueOf(this.flag2).hashCode();
        return result;
    }
} 
```

之后，您可以将密钥用于`Map`：

```
Map<Key, Integer> map = new HashMap<>();

Key firstKey = new Key(false, false);
map.put(firstKey, 1);

Key secondKey = new Key(false, false) // same key, different instance
int result = map.get(secondKey); // --> result will be 1 
```

参考： [来自一个字段的 Java 哈希码](https://stackoverflow.com/a/3536861/495558)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-19T14:19:55.353

**问题**

1.  正如其他人所说，Java 数组继承`.hashcode()`和继承`.equals()`自 Object，它使用数组或对象*地址*的哈希值，完全忽略其*内容*。解决此问题的唯一方法是将数组包装在一个对象中，该对象根据数组的内容实现这些方法。这就是 Joshua Bloch 写第 25 条：“Prefer lists to arrays”的原因之一。Java 提供了几个执行此操作的类，或者您可以编写自己的使用`Arrays.hashCode()`并`Arrays.equals()`包含这些方法的正确和有效实现的类。太糟糕了，它们不是默认实现！

2.  只要可行，就对任何基于散列的集合的键使用深度不可修改（或不可变）的类。如果您在将数组（或其他可变对象）存储为哈希表中的键之后对其进行修改，那么它几乎肯定会在该哈希表中的未来`.get()`或`.contains()`测试中失败。另请参阅[可变哈希映射键是一种危险的做法吗？](https://stackoverflow.com/questions/7842049/are-mutable-hashmap-keys-a-dangerous-practice)

**具体解决方案**

```
// Also works with primitive:    (boolean... items)
public static List<Boolean> bList(Boolean... items) {
    List<Boolean> mutableList = new ArrayList<>();
    for (Boolean item : items) {
        mutableList.add(item);
    }
    return Collections.unmodifiableList(mutableList);
} 
```

1.  ArrayList根据其内容实现`.equals()`and （正确且有效），因此each 具有相同的哈希码，并且将等于 each other 。`.hashCode()``bList(false, false)``bList(false, false)`

2.  将其包裹起来`Collections.unmodifiableList()`可以防止修改。

修改您的示例以使用 bList() 只需要更改一些声明和类型签名。它和你原来的一样清晰，几乎一样简短：

```
public class main {
    public static HashMap<List<Boolean>, Integer> h;

    public static void main(String[] args){
        List<Boolean> a = bList(false, false);

        h = new HashMap<>();
        h.put(a, 1);

        if(h.containsKey(a)) System.out.println("Found a");

        List<Boolean> t = bList(false, false);

        if(h.containsKey(t)) System.out.println("Found t");
        else System.out.println("Couldn't find t");
    }
} 
```

**通用解决方案**

```
public <T> List<T> bList(T... items) {
    List<T> mutableList = new ArrayList<>();
    for (T item : items) {
        mutableList.add(item);
    }
    return Collections.unmodifiableList(mutableList);
} 
```

上述解决方案的其余部分没有改变，但这将利用 Java 的内置类型推断来处理任何原语或对象（尽管我建议只使用不可变类）。

**图书馆解决方案**

而不是`bList()`使用[Google Guava's](https://github.com/google/guava) `ImmutableList.of()`或我自己的[Paguro's](https://github.com/GlenKPeterson/Paguro) `vec()`或其他提供此类预测试方法的库（加上不可变/不可修改的集合等）。

* * *

**劣质解决方案**

这是我在 2017 年的原始答案。我把它留在这里是因为有人觉得它很有趣，但我认为它是二流的，因为 Java 已经包含 ArrayList 和 Collections.unmodifiableList() 可以解决这个问题。使用 .equals() 和 .hashCode() 方法编写自己的集合包装器比使用内置方法更费力、更容易出错、更难验证，因此更难阅读。

这应该适用于任何类型的数组：

```
class ArrayHolder<T> {
    private final T[] array;
    @SafeVarargs
    ArrayHolder(T... ts) { array = ts; }
    @Override public int hashCode() { return Arrays.hashCode(array); }
    @Override public boolean equals(Object other) {
        if (array == other) { return true; }
        if (! (other instanceof ArrayHolder) ) {
            return false;
        }
        //noinspection unchecked
        return Arrays.equals(array, ((ArrayHolder) other).array);
    }
} 
```

这是您转换为使用 ArrayHolder 的具体示例：

```
// boolean[] a = {false, false};
ArrayHolder<Boolean> a = new ArrayHolder<>(false, false);

// h = new HashMap<boolean[], Integer>();
Map<ArrayHolder<Boolean>, Integer> h = new HashMap<>();

h.put(a, 1);

// if(h.containsKey(a)) System.out.println("Found a");
assertTrue(h.containsKey(a));

// boolean[] t = {false, false};
ArrayHolder<Boolean> t = new ArrayHolder<>(false, false);

// if(h.containsKey(t)) System.out.println("Found t");
assertTrue(h.containsKey(t));

assertFalse(h.containsKey(new ArrayHolder<>(true, false))); 
```

我使用了 Java 8，但我认为 Java 7 拥有你需要的一切。[我使用TestUtils](https://github.com/GlenKPeterson/TestUtils)测试了 hashCode 和 equals 。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-22T17:23:59.123

You could create a class that contains the array. Implements the hashCode() and equals() methods for that class, based on values:

```
public class boolarray {
  boolean array[];

  public boolarray( boolean b[] ) {
     array = b;
  }

  public int hashCode() {
    int hash = 0;
    for (int i = 0; i < array.length; i++)
       if (array[i])
          hash += Math.pow(2, i);
    return hash;
  }

  public boolean equals( Object b ) {
     if (!(b instanceof boolarray))
        return false;
     if ( array.length != ((boolarray)b).array.length )
        return false;
     for (int i = 0; i < array.length; i++ )
        if (array[i] != ((boolarray)b).array[i])
           return false;
     return true;
  }
} 
```

You can then use:

```
 boolarray a = new boolarray( new boolean[]{ true, true } );
 boolarray b = new boolarray( new boolean[]{ true, true } );
 HashMap<boolarray, Integer> map = new HashMap<boolarray, Integer>();
 map.put(a, 2);
 int c = map.get(b);
 System.out.println(c); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T17:10:54.337

可能是因为 Array 返回的 equals() 方法的行为与您预期的不同。您应该考虑实现自己的收集并覆盖 equals() 和 hashCode()。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-22T17:12:11.717

Map 用于`equals()`测试您的键是否相同。

该方法在`Object`测试中的默认实现`==`，即引用相等。因此，由于您的两个数组不是同一个数组，因此`equals`始终返回 false。

您需要对`Arrays.equals`两个数组进行 m​​ap 调用以检查是否相等。

您可以创建一个使用的数组包装类，`Arrays.equals`然后这将按预期工作：

```
public static final class ArrayHolder<T> {

    private final T[] t;

    public ArrayHolder(T[] t) {
        this.t = t;
    }

    @Override
    public int hashCode() {
        int hash = 7;
        hash = 23 * hash + Arrays.hashCode(this.t);
        return hash;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final ArrayHolder<T> other = (ArrayHolder<T>) obj;
        if (!Arrays.equals(this.t, other.t)) {
            return false;
        }
        return true;
    }
}

public static void main(String[] args) {
    final Map<ArrayHolder<Boolean>, Integer> myMap = new HashMap<>();

    myMap.put(new ArrayHolder<>(new Boolean[]{true, true}), 7);
    System.out.println(myMap.get(new ArrayHolder<>(new Boolean[]{true, true})));
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-22T17:04:53.463

```
boolean[] t;
t = a; 
```

如果您给出这个，而不是`boolean[] t = {false, false};`，那么您将获得所需的输出。

这是因为将`Map`存储`reference`为`key`，并且在您的情况下，尽管`t`具有相同的值，但它的引用与`a`.

因此，当你给予时`t=a`，它会起作用。

它与此非常相似：-

```
String a = "ab";
String b = new String("ab");

System.out.println(a==b); // This will give false. 
```

两者`a`&`b`持有相同的值，但有不同的引用。因此，当您尝试使用 比较参考时`==`，它会给出`false`。

但如果你给，`a = b;`然后试着比较`reference`，你会得到`true`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-13T20:27:01.220

您可以使用接受外部散列和比较策略（trove）的库。

```
class MyHashingStrategy implements HashingStrategy<boolean[]> {

    @Override
    public int computeHashCode(boolean[] pTableau) {
        return Arrays.hashCode(pTableau);
    }

    @Override
    public boolean equals(boolean[] o1, boolean[] o2) {
        return Arrays.equals(o1, o2);
    }
}

Map<boolean[], T> map = new TCustomHashMap<boolean[],T>(new MyHashingStrategy()); 
```

# android - 如何在执行 HTTPS 请求时对不受信任的证书异常做出反应？

> ID：15576010
> 
> 赞同：0
> 
> 时间：2013-03-22T17:02:21.867
> 
> 标签：android, ssl, https

我正在使用 HttpsURLConnection 执行 HTTPS 请求。

我尝试联系的服务器具有自签名证书，因此这在逻辑上会导致请求失败。

但是，异常不会向我的程序发出失败信号。它只是失败了，我可以在 logcat 中看到原因。

```
03-22 17:54:35.203: W/System.err(21147): javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
03-22 17:54:35.203: W/System.err(21147):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:381) 
```

这是我用于请求的代码：

```
HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();
connection.setUseCaches(false);
connection.setAllowUserInteraction(false);
connection.connect(); 
```

理想情况下，我希望我的程序像浏览器一样做出反应：弹出一个对话框，指示证书不受信任，并可能将其添加到某个密钥库并重试请求。

但是由于我无法弄清楚获取异常的方法，所以我真的不知道该怎么做。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:42:08.647

While huge is correct that you need to implement a custom `TrustManager`, you should absolutely not just blindly accept all SSL certificates.

Nikolay Elenikov has [an excellent blog post](http://nelenkov.blogspot.ie/2011/12/using-custom-certificate-trust-store-on.html) describes how to set up a custom `TrustManager` to validate such certificates

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-22T17:30:39.013

你可以这样做：

```
SSLContext sc = SSLContext.getInstance("TLS");
TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
    public X509Certificate[] getAcceptedIssuers() {
        return null;
    }
    @Override
    public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
        return;
}
    @Override
    public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
        return;
    }
} };
sc.init(null, trustAllCerts, new SecureRandom());
HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
HttpURLConnection = connection = endPoint.openConnection(); 
```

# cmd - Lynx Web 浏览器崩溃

> ID：15576013
> 
> 赞同：0
> 
> 时间：2013-03-22T17:02:27.620
> 
> 标签：cmd, lynx

我在命令行中使用 lynx 网络浏览器（v2.8），命令如下：

```
lynx -crawl -dump  "http://www.urlhere.com" >1 
```

当我一次将代码粘贴到 CMD 中时，它工作正常。

通常，当我运行命令行脚本（即p​​ython）时，我可以复制并粘贴多行，以便脚本以批处理模式运行（每行一次运行一个）。在过去，我一次可以用 100 行来做到这一点。

例如： lynx -crawl -dump " [http://www.urlhere.com/0/](http://www.urlhere.com/0/) " >0 lynx -crawl -dump " [http://www.urlhere.com/1/](http://www.urlhere.com/1/) " >1

当我尝试使用 Lynx 执行此操作时，只要我粘贴多行，程序就会崩溃。

有没有办法让它工作，或者至少延迟脚本命令以延迟下一行加载？我不必用 Python 做这个延迟。我希望有办法让它以批处理模式运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:09:54.687

尝试这个：

```
start "" /b lynx -crawl -dump  "http://www.urlhere.com" >1 
```

顺便说一句：在此设置中是`1`文件的名称。如果您不需要输出，请将其发送到`NUL`.

# python - 查找一个序列大于另一个序列的索引

> ID：15576014
> 
> 赞同：4
> 
> 时间：2013-03-22T17:02:28.253
> 
> 标签：python, numpy

我有两个 numpy 数组，我想找到一个数组中的数据变得大于另一个的索引。以下代码似乎可以解决问题，但我想知道是否有更好的方法：

```
# For example
import numpy as np

x=np.arange(-10,10,0.01)
f1 = x+3.0
f2 = 2*x

cross_over_index = np.nonzero(f2 > f1)[0][0] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:54:18.237

如果您正在寻找方程*f [1] (x) = f [2] (x)*的解，您也可以这样做：

```
np.argmin(abs(f2-f1))
# 1300 
```

并到达`x`那里，当然

```
x[np.argmin(abs(f2-f1))]
# 3.0 
```

但请注意，这有时只会给出与您在技术上要求的答案相同的答案（在此示例中返回`i0 --> 1301`和`x0 --> 3.01`（这是解决方案加上 的步长`x`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:59:09.503

因为您的问题只有在数组有序时才有意义，所以您可以使用二进制搜索找到交叉点，这对于大型数组来说会快得多：

```
# Find first index of a2 > a1
def crossover(a1, a2):
    bottom = 0
    top = min(len(a1) - 1, len(a2) - 1)

    if a2[top] <= a1[top]:
        return -1

    while top > bottom:
        mid = (top + bottom) >> 1
        if a2[mid] > a1[mid]:
            top = mid
        else:
            bottom = mid + 1
    return top

f1 = [ (x + 20) for x in range(80) ]
f2 = [ (2 * x) for x in range(100) ]

print( crossover( f1, f2 ) ) 
```

这应该（并且确实）打印“21”。

# sql - 根据一个字段的总和从表中获取 id

> ID：15576015
> 
> 赞同：-1
> 
> 时间：2013-03-22T17:02:30.530
> 
> 标签：sql

我在表格中有数据

**名称**                       **金额**

姓名1 1000

名称2 2000

名称3 3000

名称4 4000

我想做一个 sql 查询并想得到这个输出

**金额**总和为 3000
Name1
Name2

**金额**总和为 5000
Name2
Name3

**金额**总和为 6000
Name1
Name2
Name3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:42:23.500

这将在 Oracle 中工作。但这并不完美，因为您的要求有点不切实际，应该在应用程序上处理。JW建议的水平。不要在查询上浪费时间：

```
SELECT id, amt
, SUM(amt) OVER(ORDER BY id ROWS BETWEEN 1 PRECEDING AND CURRENT ROW) sum 
 FROM
 (
 SELECT 1 id, 1000 amt FROM dual
  UNION ALL 
 SELECT 2 ,  2000 amt FROM dual
  UNION ALL 
 SELECT 3 ,  3000 amt FROM dual
  UNION ALL 
 SELECT 4 ,  4000 amt FROM dual
 )
 /

ID    AMT    SUM
----------------------
1    1000    1000
2    2000    3000
3    3000    5000
4    4000    7000 -- not as in your example 
```

# java - 为什么scanner.next()会导致JUnit测试挂起

> ID：15576016
> 
> 赞同：2
> 
> 时间：2013-03-22T17:02:32.690
> 
> 标签：java, eclipse, junit

我在 Eclipse 中有一个 JUnit 测试（我用 Junit 3 和 JUnit 4 尝试过），它检查一个解析文件的方法但是由于某种我不知道的原因，当我使用它时它会冻结或挂起：

```
while(scanner.hasNextLine() && scanner !=null){
   if(scanner.hasNext()){ do something }
} 
```

但是当我使用以下它工作正常：

```
while(scanner.hasNextLine() && scanner !=null && scanner.hasNext() ){
   do something 
} 
```

“做某事”中的代码除了将scanner.next（）分配给变量之外没有特别之处，`System.out.print()`在这两种情况下实际上都可以正常输出。这些不是在做同样的事情吗？这是一个合理的错误（如果是，请解释原因）还是一个愚蠢的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:17:14.980

首先，在取消引用之前检查 null。改变

```
while(scanner.hasNextLine() && scanner !=null){
   if(scanner.hasNext()){ do something }
}
```

对此：

```
while(scanner !=null && scanner.hasNextLine()){
   if(scanner.hasNext()){ do something }
}
```

正如您在示例代码中所写的那样，您会发现空扫描仪实例，但 (scanner != null) 无关紧要。相反，您会通过 NullPointerException 找到空扫描器。

接下来，您在问题中提到“将scanner.next() 分配给变量”。显示一些代码。您必须为每个呼叫准确`hasNextLine`拨打一个`nextLine`电话，并且您必须`hasNext`为每个呼叫准确拨打一个`next`电话。看来您可能正在做这样的事情：

```
while (blam.hasNext())
{
    blah = blam.next();
    hoot = blam.next();
} 
```

这是完全错误的。第二次下一个电话将导致问题。

# sql-server - 自定义 SQL Server 视图和数据库迁移

> ID：15576020
> 
> 赞同：-1
> 
> 时间：2013-03-22T17:02:44.187
> 
> 标签：sql-server, grails, database-migration

我在 SQL Server 中创建了一些用于 SSRS 项目的视图。但是，每当我尝试迁移我的 Grails 项目时，它都会尝试删除我的 SQL 视图。

我正在使用[数据库迁移插件](http://grails.org/plugin/database-migration)来执行我的迁移。

为什么插件要删除我的 SQL 视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:59:36.963

我只是将我的 SQL 视图设置为另一个模式

# arrays - 计算多个欧几里德距离Matlab的有效方法

> ID：15576021
> 
> 赞同：1
> 
> 时间：2013-03-22T17:02:44.600
> 
> 标签：arrays, matlab, euclidean-distance

我正在训练我自己的自组织地图来聚类颜色值。现在我想制作某种[U 矩阵](http://ars.els-cdn.com/content/image/1-s2.0-S0925231208004475-gr11.jpg)来显示节点与其直接邻居之间的欧几里德距离。我现在的问题是，我的算法效率很低！！肯定有一种方法可以更有效地计算它吗？

```
function displayUmatrix(dims,weights) %#dims is [30 30], size(weights) = [900 3], 
                                      %#consisting of values between 1 and 0

hold on; 
axis off;
A = zeros(dims(1), dims(2), 3);
B = reshape(weights',[dims(1) dims(2) size(weights,1)]);
if size(weights,1)==3
    for i=1:dims(1)
        for j=1:dims(2)
            if i~=1
                if j~=1
                    A(i,j,:)=A(i,j,:)+(B(i,j,:)-B(i-1,j-1,:)).^2;
                end
                A(i,j,:)=A(i,j,:)+(B(i,j,:)-B(i-1,j,:)).^2;
                if j~=dims(2)
                    A(i,j,:)=A(i,j,:)+(B(i,j,:)-B(i-1,j+1,:)).^2;
                end
            end
            if i~=dims(1)
                if j~=1
                    A(i,j,:)=A(i,j,:)+(B(i,j,:)-B(i+1,j-1,:)).^2;
                end
                A(i,j,:)=A(i,j,:)+(B(i,j,:)-B(i+1,j,:)).^2;
                if j~=dims(2)
                    A(i,j,:)=A(i,j,:)+(B(i,j,:)-B(i+1,j+1,:)).^2;
                end
            end 
            if j~=1
                A(i,j,:)=A(i,j,:)+(B(i,j,:)-B(i,j-1,:)).^2;
            end
            if j~=dims(2)
                A(i,j,:)=A(i,j,:)+(B(i,j,:)-B(i,j+1,:)).^2;
            end
            C(i,j)=sum(A(i,j,:));
        end
    end
    D = flipud(C);
    maximum = max(max(D));
    D = D./maximum;
    imagesc(D)
else
    error('display function does only work on 3D input');
end
hold off;
drawnow; 
```

结尾

谢谢，马克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:47:37.633

您可以通过以下方式计算每个点到其右侧邻居的（平方）距离：

```
sum((B(:,1:end-1,:) - B(:,2:end,:)).^2, 3) 
```

同样，您计算每个点到下面点的距离，以及两条对角线上的距离。对于边界上的点，您没有所有这些值，因此您用零填充它们。然后将距离相加并将它们除以一个点必须获得的与所有邻居的平均距离。

这是我的代码：

```
%calculate distances to neighbors
right = sum((B(:,1:end-1,:)- B(:,2:end,:)).^2, 3);
bottom = sum((B(1:end-1,:,:)- B(2:end,:,:)).^2, 3); zeros();
diag1 = sum((B(1:end-1,1:end-1,:)- B(2:end,2:end,:)).^2, 3);
diag2 = sum((B(2:end,2:end,:)- B(1:end-1,1:end-1,:)).^2, 3);

%pad them with zeros to the correct size
rightPadded = [right zeros(dim(1) , 1)];
leftPadded = [zeros(dim(1) , 1) right];

botomPadded = [bottom; zeros(1,dim(2))];
upPadded = [zeros(1,dim(2));bottom];

bottomRight = zeros(dim(1), dim(2));
bottomRight(1:end-1,1:end-1) = diag1;
upLeft = zeros(dim(1), dim(2));
upLeft(2:end,2:end) = diag1;

bottomLeft = zeros(dim(1), dim(2));
bottomLeft(1:end-1,2:end) = diag2;
upRight = zeros(dim(1), dim(2));
upRight(2:end,1:end-1) = diag2;

%add distances to all neighbors
sumDist = rightPadded + leftPadded + bottomRight + upLeft + bottomLeft + upRight;

%number of neighbors a point has
neighborNum = zeros(dim(1), dim(2)) + 8;
neighborNum([1 end],:) = 5;
neighborNum(:,[1 end]) = 5;
neighborNum([1 end],[1 end]) = 3;

%divide summed distance by number of neighbors
avgDist = sumDist./neighborNum; 
```

It is all vectorized, so it should be faster than your version. If you want the exact U-matrix, you can interleave the average distances with the neighboring distances.

# java - 在 Java 中替换套接字底层 URL 连接

> ID：15576029
> 
> 赞同：3
> 
> 时间：2013-03-22T17:03:06.550
> 
> 标签：java, sockets, url, tunnel, network-interface

我有一个 Java 应用程序，用于`java.net.URL`打开一个位置来检索一些数据。我现在需要通过 VPN 打开连接。它运行的 Linux 机器现在可以随时打开多个隧道，我需要能够以编程方式告诉应用程序使用哪个隧道。

我相信使用`java.net.Socket`它可以选择虚拟设备来打开连接，但我找不到任何方法来覆盖 URL 对象以处理所有 HTTP 流量 - 或者在实际打开连接之前替换底层套接字。

那么，如何将我的应用程序连接到特定的网络接口并保持使用高级对象的优势`java.net.URL`？

现在，我不确定这是否可能，但我想我会问明智的 stackoverflow 社区......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:22:30.573

我相信您可以`URLStreamHandlerFactory`使用`java.net.URL`. 每当`openConnection()`在 URL 上调用它时，它都会由这个注册的自定义工厂处理，让您可以控制套接字连接的详细信息。

一旦您有能力操作套接字创建，指定您使用的网络接口就相当简单了：

```
NetworkInterface ni = NetworkInterface.getByName("eth0");
Socket socket = new Socket();
socket.bind(ni.getInetAddresses().nextElement()); 
```

看起来有一些库可以提供简单的访问来设置 HTTP 连接使用的 socketFactory。参见例如[http://faban.org/1.1/docs/api/index.html?com/sun/faban/driver/transport/sunhttp/HttpURLConnection.html](http://faban.org/1.1/docs/api/index.html?com/sun/faban/driver/transport/sunhttp/HttpURLConnection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:26:50.697

您可以实现自定义 SocketImplFactory，然后使用 Socket.setSocketImplFactory 将其设置为默认值，但我不确定如何在客户端选择网络接口，这将是路由的功能。

# c# - 如何在媒体播放器中捕捉“上一个/下一个”曲目更改事件

> ID：15576037
> 
> 赞同：3
> 
> 时间：2013-03-22T17:03:24.423
> 
> 标签：c#, winforms, media-player

如何在 axWindowsMediaPlayer1 中捕获“上一个/下一个”曲目更改事件？

例如，当：

*   用户单击媒体播放器中的“下一个”或“上一个”按钮
*   或执行以下代码时`axWindowsMediaPlayer1.Ctlcontrols.next();`
*   或执行以下代码时`axWindowsMediaPlayer1.Ctlcontrols.previous();`

到目前为止，我已经尝试捕捉“axWindowsMediaPlayer1_ **PlayStateChange** ”事件，但它没有显示“下一个”或“上一个”轨道更改事件是否被触发。它所显示的只是`e.newState = 9`（过渡）

那么在执行之前如何处理“下一个”或“上一个”轨道事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-16T14:58:11.777

好吧，显然，这是不可能的......

相反，我正在捕捉一堆不同的事件，例如

```
if (e.newState == 8) // media ended

if (e.newState == 6) // buffering

else if (e.newState == 3) // playing 
```

我不断检查播放列表中正在播放的歌曲。如果它是播放列表中的最后一首歌曲，则触发一个动作，如果不是最后一首 - 然后是另一个......我知道这不是我所期望的，但我们必须用可用的方法来处理这个问题......即使是非本土的。

# android - 如何对备份保密？

> ID：15576040
> 
> 赞同：0
> 
> 时间：2013-03-22T17:03:26.667
> 
> 标签：android, android-backup-service

[我正在按照官方 Android 文档中](http://developer.android.com/guide/topics/data/backup.html)的说明在我的应用中实施备份。我正在备份的信息可能很敏感，因此我想根据上述文档中的建议对其进行加密：

> 在使用备份存储敏感数据（例如用户名和密码）时，您应该始终保持谨慎。

加密用户数据的[推荐方法](http://android-developers.blogspot.co.uk/2013/02/using-cryptography-to-store-credentials.html)，在需要时生成随机密钥并存储它，在备份情况下没有帮助，因为如果我正在恢复备份，生成的密钥可能已经丢失（或者必须包含在备份中）。同样，我不能使用任何设备标识符（例如 IMEI）来生成确定性密钥，因为备份可能会合法地恢复到不同的设备上。

要求用户输入密码来保护密钥可以跨设备工作，但`onRestore`完全在后台完成。要从用户那里获取密码，我必须将密文保存到存储中，在下次启动我的主要活动时记下，然后提示用户。除了那个 faff，我真的不相信用户会输入一次密码，在恢复发生之前永远不要再次使用它，可能在几年后，然后能够记住它。我不会！然后就没有办法恢复备份了，我还不如根本没有实施备份。

似乎唯一合理的选择是在我的 APK 中存储一个固定密钥，但我确信我不必在这里解释为什么这并不能真正提供任何额外的安全性。如果我只是将机密存储到内部存储中，我会考虑这样做，但是任何可以在设备上安装不可靠的备份传输或非法访问备份服务器的人都不会因为必须反编译或检查应用程序而感到不便。

谁能给我一个更好的选择？

# grails - grails简单重定向不起作用

> ID：15576042
> 
> 赞同：0
> 
> 时间：2013-03-22T17:03:29.753
> 
> 标签：grails, redirect, show

是的，我似乎做对了，它是如此简单，确实不应该缺少任何东西，但对于我的生活，我看不出它为什么不起作用，我的列表视图上有一个远程链接，如下所示：-

```
<g:remoteLink action="makeReady" id="${testExecQueueInstance.id}">X</g:remoteLink> 
```

makeReady 在这一点上是空的，除了我希望它显示选定的行，所以控制器只有这个： -

```
def makeReady(Long myid){
    redirect(action:"show", id:myid)
} 
```

表演动作是 grails 创建的沼泽标准表演，只需传入一个伦敦......

为什么这不起作用？我错过了什么愚蠢的显而易见的事情，我会在接下来的几天里把自己踢倒？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:14:54.680

`<g:remoteLink`发出ajax请求，并且您的页面已经呈现，服务器无法从中进行重定向，它已经显示。

有两种方法可以使它工作：

*   使用标准链接
*   以 JSON/Javascript 响应，并在客户端进行重定向。

对于第二个选项，它将类似于：

```
<div id="success"></div>
<g:remoteLink action="makeReady" id="${testExecQueueInstance.id}" update="success">X</g:remoteLink> 
```

和

```
def makeReady(Long myid){
  String url = createLink(action:"show", id:myid)
  render(text: "window.location.href='${url.encodeAsURL()}'", contentType: "application/javascript")
} 
```

# reporting-services - 为 Team Foundation Server 2012 重新创建 MSF 敏捷报告

> ID：15576052
> 
> 赞同：0
> 
> 时间：2013-03-22T17:04:06.097
> 
> 标签：reporting-services

我在使用 Team Foundation Server 2012 时遇到了一些问题。

我已经设法重新创建报告服务，现在可以从 TFS 访问 SQL Server Reporting Services 页面。

但是，它没有任何报告。

如何重新创建流程模板附带的那些？

TFS 目前被用于源代码控制和规划，所以我不想从头开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:18:23.243

如果您的 TFS 在创建团队项目之前已连接到 SSRS，则这些报告将自动创建。由于您事后已连接它，我建议您使用[TFS Power Tools](http://www.microsoft.com/en-us/download/details.aspx?id=35775)（确保为您的 TFS 安装下载正确的版本）并运行`tfpt addprojectreports`命令。您可以使用开关运行该命令以`/?`获取有关如何使用它的详细信息。

# objective-c - OS X - 使用 mach 读/写函数而不需要 root/sudo

> ID：15576054
> 
> 赞同：1
> 
> 时间：2013-03-22T17:04:13.233
> 
> 标签：objective-c, xcode, macos

所以我知道可以使用 vm_read_overwrite 和 vm_write ，而无需在每次启动应用程序时都要求用户输入密码。

我有一个应用程序可以做到这一点。我知道您需要对您的应用程序进行签名，然后如果您的应用程序读取/写入另一个进程，则会显示一个密码对话框。您通常输入一次 root 密码，然后应用程序以您的本地用户身份运行。

我的问题是我正在创建一个我签名的新应用程序，但它没有发布对话框以获得许可。

我在这里错过了另一个步骤吗？最坏的情况是我可以复制/粘贴我现有的项目，但我宁愿不要，因为它很大。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:27:41.690

找到它，需要在 Info.plist 中将 SecTaskAccess 设置为允许

[http://os-tres.net/blog/2010/02/17/mac-os-x-and-task-for-pid-mach-call/](http://os-tres.net/blog/2010/02/17/mac-os-x-and-task-for-pid-mach-call/)

# c++ - 输出的 C++ 错误字母

> ID：15576061
> 
> 赞同：1
> 
> 时间：2013-03-22T17:04:35.520
> 
> 标签：c++

您好，我有关于凯撒密码的新问题，例如

键：3

平原：ABCÇDEFGĞHIİJKLMNOÖPRSŞTUÜVYZ

密码：DEFGĞHIİJKLMNOÖPRSŞTUÜVYZABCD

这些是土耳其字母“ç ,ı ,ğ, ö , ş , ü , Ç, İ , Ğ, Ö, Ş, Ü”

我需要进行加密和解密，程序不应该区分大小写。它应该像 s=S, ç=Ç

你可以在下面看到我的程序，但我有一些问题

1）文本（纯文本）和密钥应该由用户输入，但我做不到。

2) 字符文本[] = "DEF"; 这个输入应该给出（用于解密）“CÇD”，但它给出“CÃD”

通常它应该给出“Ç”而不是“Ã”

我需要帮助 ：（

```
# include <iostream>
# include <cstring>

const char alphabet[] ={'A', 'B', 'C', 'Ç', 'D', 'E', 'F', 'G', 'Ğ', 'H', 'I',
                        'İ', 'J', 'K', 'L', 'M', 'N', 'O', 'Ö', 'P', 'R', 'S',
                        'Ş', 'T', 'U', 'Ü', 'V', 'Y', 'Z', '0', '1', '2', '3',
                        '4', '5', '6', '7', '8', '9', '.', ',', ':', ';', ' '};
const int char_num =44;

void cipher(char word[], int count, int key)
{
    int i = 0;
    while(i < count) {
        int ind = -1;
        while(alphabet[++ind] != word[i]) ;
        ind += key;
        if(ind >= char_num)
            ind -= char_num;
        word[i] = alphabet[ind];
        ++i;
    }
}

void decipher(char word[], int count, int key)
{
    int i = 0;
        while(i < count) {
        int ind = -1;
        while(alphabet[++ind] != word[i]) ;
        ind -= key;
        if(ind < 0)
            ind += char_num;
        word[i] = alphabet[ind];
        ++i;
    }
}

int main()
{
    char text[] = "ABC";
    int len = strlen(text);
    std::cout << text << std::endl;
    cipher(text, len, 2);
    std::cout << text << std::endl;
    decipher(text, len, 2);
    std::cout << text << std::endl;
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:46:16.953

这个问题是您的程序使用的编码与控制台期望的编码不同。默认情况下，Windows 是这样配置的；程序使用像 cp1252 或 cp1254 这样的编码，而控制台需要像 cp437 这样的其他东西。

[这](http://www.siao2.com/2005/02/08/369197.aspx)是 Microsoft 开发人员的一篇文章，解释了为什么会这样。

网上已经有很多信息，涵盖了修复编码不匹配的多种方法。

# sql - 找不到本地 psql 命令

> ID：15576064
> 
> 赞同：23
> 
> 时间：2013-03-22T17:04:39.153
> 
> 标签：sql, windows, postgresql, heroku, postgresql-9.2

我正在按照[此处找到的说明进行操作。](https://devcenter.heroku.com/articles/heroku-postgresql#provisioning-the-addon) 当我尝试运行`$ heroku pg:psql`或`$ heroku pg:psql HEROKU POSTGRESQL_BROWN`收到以下错误消息时：

> ！找不到本地 psql 命令！有关安装 psql 的帮助，请参阅[local-postgresql](http://devcenter.heroku.com/articles/local-postgresql)

我在它给我的链接上找不到任何有用的东西（它只是链接到我已经使用的说明，但在页面的下方），我也无法在其他任何地方找到这个错误。

如果我错过了任何你需要知道的回答这个问题，请告诉我。我对这一切都很陌生，并且在我去的时候自学。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-02T09:35:19.503

即使在本地安装 Postgres 后，我也遇到了同样的错误。但是在看到[这个](https://github.com/heroku/heroku/issues/334)之后， 我看到“pqsl”不在 PATH 中，所以我做了

```
PATH=%PATH%;C:\Program Files\PostgreSQL\9.2\bin 
```

这对我有用

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-23T15:07:39.063

我已经自己解决了这个问题。当我运行`heroku pg:info`它说版本号是 9.1.8，我在本地运行 9.2

安装 9.1.8 并确保 Path 指向适当的文件夹解决了该问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-26T04:26:42.917

更改路径后，请确保重新启动终端！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-29T12:21:10.097

设置路径。要找出 psql 脚本的 PATH（在 mac 上），请从 Applications/Postgres 安装中的 finder 打开 sql shell 脚本。这将为您提供有关其安装位置的提示。这打开了一个窗口，告诉我它位于此处：/Library/PostgreSQL/8.4/scripts/runpsql.sh

然后，我通过键入以下内容从终端窗口设置 PATH 变量：

```
$ PATH="/Library/PostgreSQL/8.4/bin:$PATH" 
```

（取决于你的PostgreSQL安装位置，先找到你的bin路径，另一个exp：/usr/local/Cellar/postgresql@9.6/9.6.8/bin）

或者.....

您还可以通过直接从 postgres 安装文件夹打开 shell 来连接到 shell。然后输入凭据。如果您不知道凭据，以下是如何找到它们：

$ heroku pg:info === HEROKU_POSTGRESQL_RED_URL (DATABASE_URL)

$ heroku pg:凭据 HEROKU_POSTGRESQL_RED_URL

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-09T17:56:50.067

奇怪的是，最佳答案对我不起作用，我的系统不会通过具有管理员访问权限的 cmd 添加路径（不知道为什么）。

所以检查这个> Windows键>环境变量>系统变量

并添加最后一行（您的版本可能在路径上有所不同）

[![在此处输入图像描述](../Images/1c07cc9bb26ba616faf4c8311e6a588c.png)](https://i.stack.imgur.com/qKJQC.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T17:08:57.330

确保您已安装工具带，因为默认安装了 psql。

*但是*，您还需要确保已安装 PostgreSQL 的**本地**副本；如果您不这样做，工具带将无法找到本机 psql 客户端。

假设您已经安装了 PostgreSQL 的本地副本，请确保您可以直接从命令行执行 psql（即确保您的 PATH 设置正确）。如果命令没有执行，请检查您的 PATH，如果执行，请查看您是否可以通过 Heroku 控制面板中提供的 PSQL 连接字符串进行连接。如果您可以连接，请重新安装工具带，如果您无法连接，请提供另一个开发数据库并重试。

如果仍然存在问题，我建议在确认[此处](https://status.heroku.com/)的状态页面上没有列出 API 问题后联系 Heroku 支持寻求帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-01T20:23:26.650

此类错误通常出现在 Windows 环境中，因为如果安装 Postgresql 后不更新 PATH，`heroku pg:psql`则命令不起作用。

因此，您需要更新 PATH 环境变量以添加 Postgres 安装的 bin 目录。该目录将如下所示： `C:\Program Files\PostgreSQL\<VERSION>\bin`. 有关更多信息，请访问 Heroku in Local setup 网站：

[heroku-postgresql：本地设置](http://devcenter.heroku.com/articles/heroku-postgresql#local-setup)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-05T03:24:49.820

如果在 Windows 上添加一个不带空格的路径元素，我就摆脱了这个烦人的消息，即

> C:\Progra~1\PostgreSQL\9.4\data

代替

> “C:\Program Files\PostgreSQL\9.4\data”</p>

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-04-11T23:39:40.437

我按照此处的说明进行操作：http: [//www.computerhope.com/issues/ch000549.htm](http://www.computerhope.com/issues/ch000549.htm)，如果您喜欢使用 PATH 变量的点击式配置，这对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-07T10:37:54.507

我遇到了同样的问题，发现 Heroku 似乎没有默认配置最新版本的 PostgreSQL。[Heroku 入门](https://devcenter.heroku.com/articles/getting-started-with-nodejs#provision-a-database)说明在哪里说

> heroku 插件：创建 heroku-postgresql:hobby-dev

出于某种原因，它提供了一个 v10 数据库（您可以通过单击仪表板附加组件选项卡中的 Heroku Postgres 来检查）。我删除了该数据库并使用 --version 标志配置了一个新数据库：

> heroku 插件：创建 heroku-postgresql:hobby-dev --version 11

至少到目前为止，您可以在此链接中找到 Heroku 支持的最新版本的 Postgres：[https ://devcenter.heroku.com/articles/heroku-postgresql#version-support-and-legacy-infrastructure](https://devcenter.heroku.com/articles/heroku-postgresql#version-support-and-legacy-infrastructure)

我在 2019 年初写这篇文章，但是根据[PostgreSQL 网站](https://www.postgresql.org/developer/roadmap/)，下一个版本（12）“暂定”在 2019 年第三季度发布，所以如果你在 2019 年末阅读这篇文章，v12 可能会出现同样的问题反而

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-16T08:49:54.840

在 Mac 上，您可以使用以下内容：

```
export PATH="/Library/PostgreSQL/12/bin/:$PATH" 
```

# python - 在 Python 2.7 中获取矩阵输入

> ID：15576065
> 
> 赞同：0
> 
> 时间：2013-03-22T17:04:41.810
> 
> 标签：python, numpy

我正在尝试从用户那里获取输入并希望将值存储在矩阵中。我正在使用 Python 2.7 并有一个用于获取输入的代码。但我收到一个错误，其中指出：

```
Traceback (most recent call last):
  File "C:/.../sim.py", line 18, in <module>
    print 'Please enter the equitities'
  File "<string>", line 1, in <module>
NameError: name 'AAPL' is not defined 
```

这是我的代码：

```
ls_symbols_cnt = input('Enter the number of equities')
i = 0
n = 0
print 'Please enter the equities'
while n<=ls_symbols_cnt:
    ls_symbols[i,n] = input('Enter equity %n')
    n =+ 1 
```

难道我做错了什么？有没有办法使用 numpy 来获取矩阵的值？感谢您的输入。

将其更改为 raw_input 后​​，出现此错误：

```
Traceback (most recent call last):
  File "C:/Users/Rohit/Downloads/Computational_Investing/Hw-1/sim.py", line 21, in <module>
    ls_symbols[i,n]= raw_input('Enter equity')
NameError: name 'ls_symbols' is not defined 
```

我不确定为什么它说名称未定义。感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:10:08.720

input() 将尝试评估用户输入的任何内容。这是一个名称混乱的函数。你想要 raw_input()。

例如，如果用户输入“2+3”：

```
raw_input()
    => 5

input()
    => "2+3" 
```

请注意，如果您期望字符串以外的内容，则必须自己执行转换。如果用户正在输入“42”并且您想要数字 42 而不是字符串“42”，您将需要 int(raw_input())。

# c# - 查找（并提取）复杂的相关性以发现违反规则的情况

> ID：15576066
> 
> 赞同：1
> 
> 时间：2013-03-22T17:04:46.220
> 
> 标签：c#, linq, ienumerable, matching, rules

我正在处理一些写得不太好的代码，并且涉及一些我希望重构的相当复杂的逻辑。主题是验证规则和报告潜在的违规行为。不幸的是，课程设计相当奇怪，所以我遇到了一些 IEnumerable 挑战。

作为一个简化的示例，我有以下内容：

```
IEnumerable<RuleDefinition>
IEnumerable<Request> 
```

在哪里

```
public class RuleDefinition
{
    public RequestType ConcerningRequestType { get; set; }
    public int MinimumDistanceBetweenRequests { get; set; }
}

public class Request
{
    public int TimeIndex { get; set; }
    public RequestType TypeOfThisRequest { get; set; }
} 
```

显然，当请求类型匹配并且两个请求之间的时间间隔（TimeIndex）太短时，就违反了规则。现在，我想提取：

*   如果有违规行为（这很容易）
*   违反了哪些规则
*   哪些请求违反了规则

所以在我们的例子中，我想获得这样的东西：

```
public class Violation
{
    public RuleDefinition ViolatedRule { get; set; }
    public Request FirstRequest { get; set; }
    public Request SecondRequest { get; set; }
} 
```

我认为这是一个相当简单的问题，但是我没有想出一个可以称为可读性和可维护性的解决方案。我尝试了各种事情..结果总是一团糟（我只是试图实现这个例子，这很糟糕）

在这种情况下使用的任何想法，模式？（Resharper 经常正确地建议 .SelectMany，但这会让事情变得更不可读）

编辑：这是我漫长而丑陋的实现。;)

```
var ruleDefinitions = new List<RuleDefinition>
{ 
    new RuleDefinition { 
        ConcerningRequestType = RequestType.Exclusive, 
        MinimumDistanceBetweenRequests = 2} 
};
var requests = new List<Request>()
    {
        new Request { TimeIndex = 1, TypeOfThisRequest = RequestType.Normal },
        new Request { TimeIndex = 1, TypeOfThisRequest = RequestType.Normal },
        new Request { TimeIndex = 2, TypeOfThisRequest = RequestType.Normal },

        new Request { TimeIndex = 3, TypeOfThisRequest = RequestType.Exclusive },
        new Request { TimeIndex = 4, TypeOfThisRequest = RequestType.Exclusive },
    };

var violations = new List<Violation>();
foreach (var rule in ruleDefinitions)
{
    var requestsMatchingType = requests.Where(r => r.TypeOfThisRequest == rule.ConcerningRequestType);
    foreach (var firstRequest in requestsMatchingType)
    {
        var collidingRequest = requests.FirstOrDefault(secondRequest => 
            secondRequest.TimeIndex > firstRequest.TimeIndex &&
            Math.Abs(secondRequest.TimeIndex - firstRequest.TimeIndex) < rule.MinimumDistanceBetweenRequests);

        if (collidingRequest != null)
        {
            violations.Add(new Violation
                {
                    ViolatedRule = rule,
                    FirstRequest = firstRequest,
                    SecondRequest = collidingRequest
                });
        }
    }
}
Console.WriteLine("found {0} violations.", violations.Count());
Console.ReadKey(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:03:26.817

这不是一个简单的任务，所以我要做的第一件事就是定义一个接口来看看我在这里需要什么：

```
interface IViolationFinder
{
    IEnumerable<Violation> Search(
        IEnumerable<RuleDefinition> ruleDefinitions, 
        IEnumerable<Request> requests);
} 
```

现在我们清楚地看到我们需要实现什么。因为您的搜索逻辑非常复杂，我认为您不应该使用单个 linq 来表达它。你可以，但你不应该。嵌入了 linq 的两个嵌套 foreach 循环非常讨厌，我认为使用 linq 本身不会更干净。

你需要的是在你的实现中创建更多的方法。它将增加可读性。所以天真的实现是这样的（这是你的）：

```
class ViolationFinder : IViolationFinder
{
    public IEnumerable<Violation> Search(IEnumerable<RuleDefinition> ruleDefinitions, IEnumerable<Request> requests)
    {
        var violations = new List<Violation>();
        foreach (var rule in ruleDefinitions)
        {
            var requestsMatchingType = requests.Where(r => r.TypeOfThisRequest == rule.ConcerningRequestType);
            foreach (var firstRequest in requestsMatchingType)
            {
                var collidingRequest = requests.FirstOrDefault(secondRequest =>
                    secondRequest.TimeIndex > firstRequest.TimeIndex &&
                    Math.Abs(secondRequest.TimeIndex - firstRequest.TimeIndex) < rule.MinimumDistanceBetweenRequests);

                if (collidingRequest != null)
                {
                    violations.Add(new Violation
                    {
                        ViolatedRule = rule,
                        FirstRequest = firstRequest,
                        SecondRequest = collidingRequest
                    });
                }
            }
        }

        return violations;
    }
} 
```

你可以开始重构这个。让我们提取最明显的部分，而不是用一种方法思考：

```
class ViolationFinder : IViolationFinder
{
    public IEnumerable<Violation> Search(IEnumerable<RuleDefinition> ruleDefinitions, IEnumerable<Request> requests)
    {
        var violations = new List<Violation>();
        foreach (RuleDefinition rule in ruleDefinitions)
        {
            IEnumerable<Request> requestsMatchingType = requests.Where(r => r.TypeOfThisRequest == rule.ConcerningRequestType);
            violations.AddRange(
                FindViolationsInRequests(requestsMatchingType, requests, rule));
        }

        return violations;
    }

    private IEnumerable<Violation> FindViolationsInRequests(
        IEnumerable<Request> matchingRequests,
        IEnumerable<Request> allRequest,
        RuleDefinition rule)
    {
        foreach (Request firstRequest in matchingRequests)
        {
            var collidingRequest = allRequest.FirstOrDefault(secondRequest =>
                secondRequest.TimeIndex > firstRequest.TimeIndex &&
                Math.Abs(secondRequest.TimeIndex - firstRequest.TimeIndex) < rule.MinimumDistanceBetweenRequests);

            if (collidingRequest != null)
            {
                yield return new Violation
                {
                    ViolatedRule = rule,
                    FirstRequest = firstRequest,
                    SecondRequest = collidingRequest
                };
            }
        }
    }
} 
```

搜索几乎是干净的，但我们看到 FindViolationsInRequests 获取每个请求和规则，因此传递过滤的请求列表是毫无用处的。所以我们这样做：

```
class ViolationFinder : IViolationFinder
{
    public IEnumerable<Violation> Search(IEnumerable<RuleDefinition> ruleDefinitions, IEnumerable<Request> requests)
    {
        var violations = new List<Violation>();
        foreach (RuleDefinition rule in ruleDefinitions)
        {
            violations.AddRange(FindViolationsInRequests(requests, rule));
        }

        return violations;
    }

    private IEnumerable<Violation> FindViolationsInRequests(
        IEnumerable<Request> allRequest,
        RuleDefinition rule)
    {
        foreach (Request firstRequest in FindMatchingRequests(allRequest, rule))
        {
            var collidingRequest = allRequest.FirstOrDefault(secondRequest =>
                secondRequest.TimeIndex > firstRequest.TimeIndex &&
                Math.Abs(secondRequest.TimeIndex - firstRequest.TimeIndex) < rule.MinimumDistanceBetweenRequests);

            if (collidingRequest != null)
            {
                yield return new Violation
                {
                    ViolatedRule = rule,
                    FirstRequest = firstRequest,
                    SecondRequest = collidingRequest
                };
            }
        }
    }

    private IEnumerable<Request> FindMatchingRequests(IEnumerable<Request> requests, RuleDefinition rule)
    {
        return requests.Where(r => r.TypeOfThisRequest == rule.ConcerningRequestType);
    }
} 
```

现在接下来的事情是

```
 var collidingRequest = allRequest.FirstOrDefault(secondRequest =>
        secondRequest.TimeIndex > firstRequest.TimeIndex &&
        Math.Abs(secondRequest.TimeIndex - firstRequest.TimeIndex) < rule.MinimumDistanceBetweenRequests); 
```

足够复杂，可以为它制定一些方法：

```
class ViolationFinder : IViolationFinder
{
    public IEnumerable<Violation> Search(IEnumerable<RuleDefinition> ruleDefinitions, IEnumerable<Request> requests)
    {
        var violations = new List<Violation>();

        foreach (RuleDefinition rule in ruleDefinitions)
        {
            violations.AddRange(FindViolationsInRequests(requests, rule));
        }

        return violations;
    }

    private IEnumerable<Violation> FindViolationsInRequests(
        IEnumerable<Request> allRequest,
        RuleDefinition rule)
    {
        foreach (Request firstRequest in FindMatchingRequests(allRequest, rule))
        {

            Request collidingRequest = FindCollidingRequest(allRequest, firstRequest, rule.MinimumDistanceBetweenRequests);

            if (collidingRequest != null)
            {
                yield return new Violation
                {
                    ViolatedRule = rule,
                    FirstRequest = firstRequest,
                    SecondRequest = collidingRequest
                };
            }
        }
    }

    private IEnumerable<Request> FindMatchingRequests(IEnumerable<Request> requests, RuleDefinition rule)
    {
        return requests.Where(r => r.TypeOfThisRequest == rule.ConcerningRequestType);
    }

    private Request FindCollidingRequest(IEnumerable<Request> requests, Request firstRequest, int minimumDistanceBetweenRequests)
    {
        return requests.FirstOrDefault(secondRequest => IsCollidingRequest(firstRequest, secondRequest, minimumDistanceBetweenRequests));
    }

    private bool IsCollidingRequest(Request firstRequest, Request secondRequest, int minimumDistanceBetweenRequests)
    {
        return secondRequest.TimeIndex > firstRequest.TimeIndex &&
               Math.Abs(secondRequest.TimeIndex - firstRequest.TimeIndex) < minimumDistanceBetweenRequests;
    }
} 
```

好的，越来越干净了。我几乎可以很容易地说出每种方法的目的。再做一点工作，你最终会得到这样的结果：

```
class ViolationFinder : IViolationFinder
{
    public IEnumerable<Violation> Search(IEnumerable<RuleDefinition> ruleDefinitions, IEnumerable<Request> requests)
    {
        List<Request> requestList = requests.ToList();
        return ruleDefinitions.SelectMany(rule => FindViolationsInRequests(requestList, rule));
    }

    private IEnumerable<Violation> FindViolationsInRequests(IEnumerable<Request> allRequest, RuleDefinition rule)
    {
        return FindMatchingRequests(allRequest, rule)
                .Select(firstRequest => FindSingleViolation(allRequest, firstRequest, rule))
                .Where(violation => violation != null);
    }

    private Violation FindSingleViolation(IEnumerable<Request> allRequest, Request request, RuleDefinition rule)
    {
        Request collidingRequest = FindCollidingRequest(allRequest, request, rule.MinimumDistanceBetweenRequests);

        if (collidingRequest != null)
        {
            return new Violation
            {
                ViolatedRule = rule,
                FirstRequest = request,
                SecondRequest = collidingRequest
            };
        }

        return null;
    }

    private IEnumerable<Request> FindMatchingRequests(IEnumerable<Request> requests, RuleDefinition rule)
    {
        return requests.Where(r => r.TypeOfThisRequest == rule.ConcerningRequestType);
    }

    private Request FindCollidingRequest(IEnumerable<Request> requests, Request firstRequest, int minimumDistanceBetweenRequests)
    {
        return requests.FirstOrDefault(secondRequest => IsCollidingRequest(firstRequest, secondRequest, minimumDistanceBetweenRequests));
    }

    private bool IsCollidingRequest(Request firstRequest, Request secondRequest, int minimumDistanceBetweenRequests)
    {
        return secondRequest.TimeIndex > firstRequest.TimeIndex &&
               Math.Abs(secondRequest.TimeIndex - firstRequest.TimeIndex) < minimumDistanceBetweenRequests;
    }
} 
```

请注意，[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)也适用于方法。除了 Search 方法之外，一切都是私有实现的一部分，但正如您所见，每个处理部分都有一个带有名称的方法。每种方法都有其单一职责，因此您可以更轻松地阅读实现。

*   搜索（公众）
*   FindViolationsInRequests
*   FindSingleViolation
*   查找匹配请求
*   查找碰撞请求
*   IsCollidingRequest

这些是此实现的单元。

如果您为原始实现编写单元测试并且只有在此之后才开始重构，重构过程会更加安全。然后你总是知道你不会打破你的逻辑。如果您针对第一个变体（当我将您的完整代码放入 Search 方法时）编写单元测试，那么您的单元测试将是可以的，因此针对接口。

另一个小但重要的部分是：

```
public IEnumerable<Violation> Search(IEnumerable<RuleDefinition> ruleDefinitions, IEnumerable<Request> requests)
{
    List<Request> requestList = requests.ToList();
    return ruleDefinitions.SelectMany(rule => FindViolationsInRequests(requestList, rule));
} 
```

我从项目中列出一个列表，所以我绝对确定我不会多次枚举 IEnumerable（这可能会导致某些实现出现问题，请考虑 IQueryable）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:50:21.677

如果您不反对使用查询表达式，那么您可以将实现编写为：

```
var violations = from rule in ruleDefinitions
                 join r1 in requests on rule.ConcerningRequestType equals r1.TypeOfThisRequest
                 join r2 in requests on rule.ConcerningRequestType equals r2.TypeOfThisRequest
                 where r1 != r2 &&
                       r2.TimeIndex > r1.TimeIndex &&
                       Math.Abs(r2.TimeIndex - r1.TimeIndex) < rule.MinimumDistanceBetweenRequests
                 select new Violation() { FirstRequest = r1, SecondRequest = r2, ViolatedRule = rule }; 
```

# jpeg - JPEG 压缩

> ID：15576071
> 
> 赞同：0
> 
> 时间：2013-03-22T17:04:59.803
> 
> 标签：jpeg, libjpeg, mjpeg, jpeg2000, uiimagejpegrepresentation

我正在尝试了解 JPEG 压缩过程并执行以下步骤来验证一些事情。

我获取输入图像 img1.jpg 并使用 IrfanView 对其进行压缩，例如 quality=50 (img1_compress.jpg)。

然后我从输入图像 img1.jpg 中裁剪出一个小块（在 X,Y=16,16 处大小为 8x8 的块.jpg），并使用相同的质量参数值 (50) 对其进行压缩。我们称之为block_compress.jpg。

现在，当我将此块的像素值与完全压缩图像中的像素值进行比较时，它们不匹配。

澄清一下，block_compress.jpg 中位置 0,0 的像素值应该与 img1_compress.jpg 中位置 16,16 的像素值匹配。

我很困惑为什么像素值不匹配？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:26:26.007

我刚刚用我的 JPEG 编解码器做了这个实验，像素值匹配。Irfanview 在压缩 JPEG 图像时可能会应用某种噪声过滤器或其他修改。如果不查看编解码器的源代码，您将无法知道它在做什么。您的实验是有效的，但是通过使用其他人的代码来测试您的理论，您无法知道他们的代码中到底发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:09:16.533

JPEG是有损压缩算法。在不同工具中使用相同的压缩设置压缩一张图像可能会产生不同的结果。如果您想要像素到像素的结果，则需要使用其中一种无损算法。即你可以使用PNG

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-22T17:56:10.543

“每个 8x8 块的 DC 分量是从前一个块预测的。” : 奥利查尔斯沃思

# web-services - 尝试使用 NSIS 与 REST 服务通信

> ID：15576075
> 
> 赞同：1
> 
> 时间：2013-03-22T17:05:11.457
> 
> 标签：web-services, rest, curl, nsis

我要做的就是从 NSIS 安装程序的自定义页面中将带有 Querystring 或 HTTP POST 的 HTTP GET 发送到 Web 服务。

问题是大多数插件都可以上传/下载文件，但不能简单地调用服务并返回响应。推荐使用的插件是 NsisUrlLib。我试过这个，虽然它适用于简单的 GET 请求，但如果 URL 中有查询字符串参数，它会失败并引发错误，例如：

```
NsisUrlLib::UrlOpen /NOUNLOAD "http://tc.hwidev.com?var=value"
Pop $connectResult 
```

NSISdl、INetC 和其他插件与查询字符串一起使用，但只能用于上传/下载文件。

我尝试使用 ExecDos 插件从命令行调用 cURL.exe，如下所示：

```
ExecDos::exec /TOSTACK "curl" "http://tc.hwidev.com"
Pop $connectResult 
```

但我不知道如何获取从传递回 NSIS 的 URL 返回的数据。上面的代码只是将一个整数返回到 $connectResult 中，它可能代表 CURL 的返回代码。如何获取从 URL 返回的实际 HTML 到 NSIS 堆栈或变量中？

或者，任何人都可以推荐一种更好的方法来实现这一点吗？调用 Web 服务似乎很简单，以至于成千上万的人应该已经明白了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:05:51.340

NSISdl、Inetc 等不仅仅用于上传/下载文件。我认为你误解了这一点。您可以使用它们来调用 REST api，但您需要将答案保存到本地文件，然后对其进行解析。

示例：调用响应 XML 的 REST api：

```
# Call to REST API
NSISdl::download_quiet "http://remotesite?restparams" "$TEMP/result.xml"

# Parse answer
nsisXML::create
nsisXML::load "$TEMP/result.xml"
nsisXML::select "/response/status"

# Clean
delete "$TEMP/result.xml" 
```

而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-25T15:54:45.803

```
NSISdl::download_quiet "http://127.0.0.1/vid.php?vid=1" "$TEMP/checkvid.txt"   

文件打开 $0 $TEMP\checkvid.txt r

文件读取 $0 $1

详细打印 $1

文件关闭 $0

${如果} $1 == "vidNTYE1203"

MessageBox MB_OK“找到视频”

删除“$TEMP\checkvid.txt”         

${其他}

MessageBox MB_OK “再见”

删除“$TEMP\checkvid.txt”

退出

${结束如果}

```

这是我的生产工作片段。对我来说工作得很好。注意“删除”命令和“\”斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:58:53.550

我会推荐[INetC](http://nsis.sourceforge.net/Inetc_plug-in)而不是 NsisUrlLib，较旧的 firefox 安装程序使用它取得了很大的成功。

# php - 如何从服务器端的 fetch 请求中访问 Backbone 模型 ID

> ID：15576077
> 
> 赞同：1
> 
> 时间：2013-03-22T17:05:21.130
> 
> 标签：php, javascript, backbone.js, get

为了了解 BackboneJS 的工作原理，我正在构建一个具有基本 CRUD 功能的 PHP 脚本。我的问题是，当 BackboneJS 发送一个“获取”请求 (GET) 时，它将发送一个以 JSON 编码的 ID。我的问题是，我该如何在服务器上处理这个问题？

我试过了： `$data = json_decode(file_get_contents('php://input'));`

或者只是通过`$_GET`数组处理它。

我只需要获取通过的 ID，这样我就可以使用它进行一些数据库工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:07:19.837

您从以下位置获取 ID`_SERVER["REQUEST_URI"]`

```
var Student = Backbone.Model.extend({
urlRoot : "/students"
});

var student = new Student({id:123});

student.fetch(); 
```

被击中的 url 是`www.yourdomain.com/students/123`

因此，您需要从请求 uri 中解析出来。

`model.fetch()`ID 不是作为请求有效负载传递的，而是作为它自身的 url 的一部分传递的。ID 与所有其他属性一起作为`model.put()`. `model.save()`没有任何 id，属性作为请求有效负载传递，在这种情况下您需要

`$content = json_decode(file_get_contents('php://input'));`

# android - 使用数据库 iOS 和 Android 发布应用程序

> ID：15576081
> 
> 赞同：0
> 
> 时间：2013-03-22T17:05:28.990
> 
> 标签：android, ios, app-store, google-play

我正在为 IOS/Android/iPad 开发一个将链接到数据库的应用程序。我希望在第一次访问应用程序时将整个数据库下载到用户的设备上，然后每三个月自动更新一次。另一位开发人员告诉我，Apple 可能不允许完整下载应用程序，这可能会影响用户的存储能力。我希望从处理这些问题的人那里获得一些信息。

***更新*** 根据下面 Seva 的回答，我有一个后续问题：

用户能否从数据库中下载任何内容？我看到他们无法以这种方式更新他们的数据库，但他们可以检索其他内容吗？

谢谢你。

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:12:31.967

iOS 和 Android 对包大小和绕过这些限制的方式都有限制。

在 iOS 上，超过 20 MB 的包不会通过蜂窝数据链路下载；但人们可以通过 WiFi 或有线（通过带有 iTunes 软件的台式计算机）获得它们。通过制作一个过大的包，你肯定会失去下载。

在 Android 上，包大小限制为 50 MB，但您可以注册其他 APK 并根据需要下载（查找）。

在任一平台上，您都可以在没有数据库的情况下发布应用程序，并且在第一次运行时，弹出“请稍候”窗口并通过常规 HTTP 下载它。我知道的一些应用程序正是这样做的。

棘手的部分是更新。应用程序不应该安装代码。这意味着 - 没有更新本身。应用程序更新的正确渠道分别是 Google Play 和 iTunes。不过，您可以随时免费下载和安装更新的数据库——只要您编写必要的 HTTP 访问代码即可。

# jquery - 如何通过 Ajax 向 Codeigniter 日历发送更多数据

> ID：15576098
> 
> 赞同：0
> 
> 时间：2013-03-22T17:06:40.150
> 
> 标签：jquery, ajax, codeigniter, calendar

我正在使用 php Codeigniter 的日历示例。

我有一个名为会议的表，它有一个`id, datemeeting , data, and projectuid`.

在日历中选择并写入日历之前，首先`projectuid`从组合框中选择一个并将其发送到`projectuid`.

我不知道如何在 jQuery 中执行此操作

```
<div id="content">
    <style type="text/css">
        .calendar {
            font-family: Arial; font-size: 12px;
        }
        table.calendar {
            margin: auto; border-collapse: collapse;
        }
        .calendar .days td {
            width: 80px; height: 80px; padding: 4px;
            border: 1px solid #999;
            vertical-align: top;
            background-color: #DEF;
        }
        .calendar .days td:hover {
            background-color: #FFF;
        }
        .calendar .highlight {
            font-weight: bold; color: #00F;
        }
    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

        <?php
        echo form_label('Project', 'projectUID');
        echo br(1);
        echo form_dropdown('projectUID', $projects, set_value('projectUID', $projects));
    ?>

    <center><?php echo $calendar; ?></center>

    <script type="text/javascript">

    $(document).ready(function() {
        $('.calendar .day').click(function() {
            day_num = $(this).find('.day_num').html();
            day_data = prompt('Enter Meeting', $(this).find('.content').html());
            if (day_data != null)) {

                $.ajax({
                    url: window.location,
                    type: 'POST',
                    data: {
                        day: day_num,
                        data: day_data

                    },
                    success: function(msg) {
                        location.reload();
                    }                       
                });

            }

        });

    });

    </script>

</div> 
```

# javascript - 如何使用 node-mysql / node.js 一次获取一行？

> ID：15576103
> 
> 赞同：2
> 
> 时间：2013-03-22T17:07:04.033
> 
> 标签：javascript, mysql, node.js, node-mysql

我有一些 PHP 代码需要移植到 node.js / Javascript，但我不知道如何正确执行此操作：一次只获取一行。

我有一个查询会产生一个 MASSIVE 数据集；我只需要一些结果；但我不知道有多少。

在 PHP 中，我只执行查询，然后每行获取行，直到满足条件。php伪代码：

```
$sql="select price, totvol from depth where.. order by price desc";

$result = mysql_query($sql) or die(mysql_error());  //massive dataset
while ($row=mysql_fetch_assoc($result) and some condition) {
    do stuff until condition is met     
} 
```

我看不到如何在 node-mysql 中做到这一点。我可以在 sql 查询中添加一个 LIMIT 1 并每次进行一个新查询，但是我如何获得有序列表中的下一行？任何提示将不胜感激。

如果有帮助，这是实际代码：

```
$sql='';
if ($type=="bid") $sql="select price, totvol from depth where price>=$price order by price asc";
elseif ($type=="ask") $sql="select price, totvol from depth where price<=$price order by price desc";
else echo "unknown type\n";
if ($sql!='') {
    $result = mysql_query($sql) or die(mysql_error());
    while ($row=mysql_fetch_assoc($result) and $amount_int>0) {
        $newamount=max($row["totvol"]-$amount_int,0);
        $amount_int-=$row["totvol"];
        $sql2="update depth set totvol=$newamount where price=".$row["price"];
        $result2 = mysql_query($sql) or ie(mysql_error());                              
    }
} 
```

# ios - 从 iOS FB 切换到 Facebook SDK 时如何保持用户登录 Facebook？

> ID：15576104
> 
> 赞同：1
> 
> 时间：2013-03-22T17:07:10.283
> 
> 标签：ios, facebook

我在 AppStore 上有使用本机 iOS 6.0 Facebook 帐户（在设置中）的应用程序。现在我将发布使用 Facebook SDK 的新版本。有些用户通过本机 iOS 框架登录，现在我希望安装新版本的 Facebook SDK 从系统“导入”这些用户而不显示任何登录对话框。有可能吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:13:29.110

是的，您只需要在[https://developers.facebook.com/apps/上访问您的应用](https://developers.facebook.com/apps/)

然后对其进行编辑。在基本定义上，您的应用程序可以是跨平台的，我有 Facebook 应用程序、移动应用程序和页面选项卡等应用程序。如果您授予其中一个权限，则用户可以输入所有 3 个，而无需再次询问权限。

# php - 计算所有表中的行数并在增量之前显示

> ID：15576121
> 
> 赞同：0
> 
> 时间：2013-03-22T17:08:33.883
> 
> 标签：php, mysql

我有多个表，每个表中都有 Nr_Crt 作为自动增量。我能够显示查询结果，但我的问题是：表 1

```
nr_crt |item
     1 |item 1
     2 |item 2
     3 |item 3 
```

和表 2

```
nr_crt |item
     1 |song 1
     2 |song 2
     3 |song 3. 
```

有没有办法像这样显示结果？

```
Nr. | Product
  1 |item 1
  2 |item 2
  3 |item 3
  4 |song 1
  5 |song 2
  6 |song 3 
```

我知道我必须使用 SELECT COUNT(*) FROM 之类的东西.....谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:10:22.973

这应该这样做：

```
SELECT @row := @row + 1 AS nr, 
       a.val            AS product 
FROM   (SELECT item AS val 
        FROM   table1 
        UNION ALL 
        SELECT item 
        FROM   table2) a 
       JOIN (SELECT @row := 0) r 
```

**结果**

```
| 天然橡胶 | 产品 |
----------------
| 1 | 项目 1 |
| 2 | 项目 2 |
| 3 | 项目 3 |
| 4 | 歌曲 1 |
| 5 | 歌曲 2 |
| 6 | 歌曲 3 |
```

[查看演示](http://sqlfiddle.com/#!2/02c8c0/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:11:25.977

```
SELECT  @rnk := @rnk + 1 nr_crt,
        a.item
FROM
        (
            SELECT  nr_crt, item, 1 ordr FROM TableA
            UNION ALL
            SELECT  nr_crt, item, 2 ordr FROM TableA
        ) a, (SELECT @rnk := 0) b
ORDER   BY a.ordr ASC, a.nr_crt ASC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f0cee/1)

输出

```
╔════════╦════════╗
║ NR_CRT ║  ITEM  ║
╠════════╬════════╣
║      1 ║ item 1 ║
║      2 ║ item 2 ║
║      3 ║ item 3 ║
║      4 ║ item 1 ║
║      5 ║ item 2 ║
║      6 ║ item 3 ║
╚════════╩════════╝ 
```

# vb.net - 文本框值范围 VB.NET

> ID：15576124
> 
> 赞同：2
> 
> 时间：2013-03-22T17:08:43.447
> 
> 标签：vb.net

如何在 VB.NET 中设置数字范围。例如

```
If val(textbox1.text = 100 to 200) then 
// messagebox.show("The number is between 100 and 200")
end if 
```

我应该放什么而不是“to”来让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:10:33.193

您需要单独检查：

```
Dim value = val(textbox1.text)
If (value >= 100 And value <= 200) Then 
    ' .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:21:56.860

Reed Copsey 是正确的，但我总是喜欢用`AndAlso`

```
If (value >= 100 AndAlso value <= 200) Then 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:32:34.007

这可能是您了解`<`和`>`运营商的时候了。

```
If (value > 99 And value < 201) Then 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:01:32.047

对于这样的简短内容，简单的 IF 会更好看。但是，如果您对多个范围进行多次检查，则 a`Select Case`效果更好：

```
 Select Case  Val(textbox1.Text)
        Case 100 To 200
            ' Number between 100 and 200 inclusive
        Case Else
            ' anything else
    End Select 
```

# java - 创建一个 N × N 字母网格，以便没有两个相邻的字母相同

> ID：15576135
> 
> 赞同：0
> 
> 时间：2013-03-22T17:09:22.840
> 
> 标签：java

我需要打印出包含字母 A 到 F 的 N × N 网格，这样相邻的两个字母就不会相同。下面的代码打印出 N x N 网格，但是我只能让左右两侧的字母不同。我找不到让上面和下面的字母也不同的方法。我需要在不使用数组的情况下解决这个问题。字母必须是随机的。

```
public static void main(String[] args) {
    int N = StdIn.readInt();
    for (int column = 0; column < N; column++) {
        int x = 0;

        for (int row = 0; row < N; row++) {

            int c = (int) (Math.random() * 6 + 1);

            while (x == c) {
                c = (int) (Math.random() * 6 + 1);
            }
            if (c == 1) {
                System.out.print("A ");
            }
            if (c == 2) {
                System.out.print("B ");
            }
            if (c == 3) {
                System.out.print("C ");
            }
            if (c == 4) {
                System.out.print("D ");
            }
            if (c == 5) {
                System.out.print("E ");
            }
            if (c == 6) {
                System.out.print("F ");
            }

            x = c;

        }

        System.out.println();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:15:56.037

2个队列很容易做到。

如果您分析以下内容，您应该意识到您实际上只需要一个大小为 N 的链表。

`current`是当前行，每个新元素都只是简单地排队。

`last`是上一行。`current`一旦你完成了一行，它的值就是我们要检查的第一个元素在前面。

我将第一行与其他行分开，以使事情更简单，更容易理解。

```
 int N = 10;
  Queue<Character> last,
                   current = new Queue<Character>();
  char prev = '0';
  for (int row = 0; row < N; row++)
  {
     char c;
     do { c = (char)(Math.random() * 6 + 'A'); }
     while (prev == c);
     current.enqueue(c);
     prev = c;
     System.out.print(c + " ");
  }
  System.out.println();
  for (int col = 1; col < N; col++)
  {
     last = current;
     current = new Queue<Character>();
     prev = '0';
     for (int row = 0; row < N; row++)
     {
        char c;
        do { c = (char)(Math.random() * 6 + 'A'); }
        while (last.peek() == c || prev == c);
        current.enqueue(c);
        last.dequeue();
        prev = c;
        System.out.print(c + " ");
     }
     System.out.println();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:18:26.113

您可以使用一对堆栈和一个候选字符来执行此操作。NxN 网格由最多包含 N 乘以 N 个字符的堆栈表示。用一副纸牌试试这个，用两个纸牌堆叠点代表堆叠，以了解它是如何工作的。

1.  创建两个堆栈，A 和 B。为 A 中的项目数保留一个运行索引。
2.  生成一个随机数。这是你的候选人。
3.  如果堆栈 A 中有多个 N 项（您刚刚完成了一行），请跳到步骤 6。
4.  弹出堆栈 A 的顶部并将其存储为 Check。
5.  支票与候选人相邻吗？如果是，则将 Check 推回堆栈 A，然后返回步骤 2。（null 不相邻）
6.  将 Check 推入堆栈 B。再弹出 N-2 个项目，将它们推入堆栈 B。
7.  弹出堆栈 A 的顶部并将其存储为 Check。（堆栈 B 中应该有 N-1 项，Check 中应该有一个：一整行）
8.  支票与候选人相邻吗？（null 不相邻）如果是，则将 Check 推回堆栈 A，从堆栈 B 中弹出每个项目，同时推入堆栈 A，然后返回步骤 2。
9.  将支票推回堆栈 A。从堆栈 B 中弹出每个项目，同时将其推入堆栈 A。
10.  将候选者压入堆栈 A。
11.  增加索引。如果我们现在在堆栈 A 中有 NxN 项，我们就完成了：从堆栈 A 中弹出所有内容，然后将它们写在 NxN 网格中。否则返回步骤 2。

基本上，您正在抽一张牌，并检查最多两个项目。因为堆栈 A 保证永远不会有邻接关系，所以一旦放置了一个项目，就永远不必删除它。所以一旦你到达终点，你就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:33:30.167

我帮你简化了你的 for 循环

```
for (int row = 0; row < N; row++) {
  char c = (char) (Math.random() * 6 + 'A');
  while (x == c) {
    c = (char) (Math.random() * 6 + 'A');
  }
  System.out.print(c + " ");
  x = c;
} 
```

它使用字母的 ASCII 值，因此您不需要大的 if 语句。

您的问题不清楚允许哪些存储格式，但请考虑一下：如果您可以将每一行存储为一个字符串（一个在移动一行后被删除的临时字符串），您将如何检查该行中的一个字母是否在它下面重建与上面的字母匹配？将字符串视为数组（这是它的真实形式）。

# python - 将 3 维 numpy 数组传递给 C

> ID：15576136
> 
> 赞同：11
> 
> 时间：2013-03-22T17:09:25.340
> 
> 标签：python, c, pointers, numpy, python-c-extension

为了提高速度，我正在为我的 Python 程序编写一个 C 扩展，并且在尝试传入 3 维 numpy 数组时遇到了一些非常奇怪的行为。它适用于二维数组，但我确信我正在用指针试图让它与第 3 维一起工作。但这是奇怪的部分。**如果我只是传入一个 3-D 数组，它会因Bus Error**而崩溃。如果（在 Python 中）我首先将我的变量创建为 2D 数组，然后用 3D 数组覆盖它，**它就可以完美运行**。如果变量先是空数组，然后是 3D 数组，则会因**Seg Fault**崩溃。这怎么可能发生？

另外，任何人都可以帮助我让 3D 阵列正常工作吗？还是我应该放弃并传入一个二维数组并自己重塑它？

这是我的 C 代码：

```
static PyObject* func(PyObject* self, PyObject* args) {
  PyObject *list2_obj;
  PyObject *list3_obj;
  if (!PyArg_ParseTuple(args, "OO", &list2_obj, &list3_obj))
    return NULL;

  double **list2;
  double ***list3;

  //Create C arrays from numpy objects:
  int typenum = NPY_DOUBLE;
  PyArray_Descr *descr;
  descr = PyArray_DescrFromType(typenum);
  npy_intp dims[3];
  if (PyArray_AsCArray(&list2_obj, (void **)&list2, dims, 2, descr) < 0 || PyArray_AsCArray(&list3_obj, (void ***)&list3, dims, 3, descr) < 0) {
    PyErr_SetString(PyExc_TypeError, "error converting to c array");
    return NULL;
  }
  printf("2D: %f, 3D: %f.\n", list2[3][1], list3[1][0][2]);
} 
```

这是我调用上述函数的 Python 代码：

```
import cmod, numpy
l2 = numpy.array([[1.0,2.0,3.0], [4.0,5.0,6.0], [7.0,8.0,9.0], [3.0, 5.0, 0.0]])

l3 = numpy.array([[2,7, 1], [6, 3, 9], [1, 10, 13], [4, 2, 6]])  # Line A
l3 = numpy.array([])                                             # Line B

l3 = numpy.array([[[2,7, 1, 11], [6, 3, 9, 12]],
                 [[1, 10, 13, 15], [4, 2, 6, 2]]])

cmod.func(l2, l3) 
```

因此，如果我将 A 线和 B 线都注释掉，它会因总线错误而崩溃。如果 A 行存在，但 B 行被注释掉，则它运行正常，没有错误。如果 B 行存在，但 A 行被注释掉，它会打印正确的数字，但随后会出现 Seg 错误。最后，如果两行都存在，它还会打印正确的数字，然后是 Seg 错误。这到底是怎么回事？

**编辑：**好的。哇。所以我`int`在 Python 中使用，但在 C 中调用它们`double`。这适用于一维和二维数组。但不是 3D。因此，我将 l3 的 Python 定义更改为浮点数，现在一切正常（**非常感谢 Bi Rico**）。

但是现在，A 行和 B 行出现了更奇怪的行为！现在，如果两行都被注释掉，程序就可以工作了。如果 B 行存在，但 A 被注释掉，它可以工作，如果两者都未注释，则同上。但是，如果 A 行存在并且 B 被注释掉，我会再次收到那个奇妙的总线错误。我真的很想在将来避免这些，所以有人知道为什么 Python 变量的声明会产生这种影响吗？

**编辑 2：**好吧，尽管这些错误很疯狂，但它们都是由于我传入的 3 维 numpy 数组。如果我只传入 1 维或 2 维数组，它的行为与预期的一样，并且操作其他 Python 变量什么都不做。这让我相信问题出在 Python 的引用计数中。在 C 代码中，引用计数比 3-D 数组减少的要多，当该函数返回时，Python 会尝试清理对象，并尝试删除 NULL 指针。这只是我的猜测，我已经尝试了`Py_INCREF();`我能想到的一切都无济于事。我想我只会使用二维数组并在 C 中重塑它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T17:43:20.697

我通常不会转换为 c 样式的数组，而是直接使用`PyArray_GETPTR`（请参阅[http://docs.scipy.org/doc/numpy/reference/c-api.array.html#data-access](http://docs.scipy.org/doc/numpy/reference/c-api.array.html#data-access)）访问 numpy 数组元素。

例如，要访问 double 类型的 3 维 numpy 数组的元素，请使用 `double elem=*((double *)PyArray_GETPTR3(list3_obj,i,j,k))`.

对于您的应用程序，您可以使用 检测每个数组的正确维数`PyArray_NDIM`，然后使用适当版本的`PyArray_GETPTR`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T19:19:29.667

我已经在评论中提到了这一点，但我希望把它冲洗掉一点有助于让它更清楚。

当您在 C 中使用 numpy 数组时，最好明确说明数组的类型。具体来说，看起来您将指针声明为`double ***list3`，但是您`l3`在 python 代码中创建的方式是您将获得一个具有 dtype 的数组`npy_intp`（我认为）。您可以通过在创建数组时显式使用 dtype 来解决此问题。

```
import cmod, numpy
l2 = numpy.array([[1.0,2.0,3.0],
                  [4.0,5.0,6.0],
                  [7.0,8.0,9.0],
                  [3.0, 5.0, 0.0]], dtype="double")

l3 = numpy.array([[[2,7, 1, 11], [6, 3, 9, 12]],
                  [[1, 10, 13, 15], [4, 2, 6, 2]]], dtype="double")

cmod.func(l2, l3) 
```

另请注意，由于 python 的工作方式，“line A”和“line B”几乎不可能对 C 代码产生任何影响。我知道这似乎与您的经验经验相冲突，但我很确定这一点。

我对此不太确定，但根据我对 C 的经验，总线错误和段错误不是确定性的。它们取决于内存分配、对齐和地址。在某些情况下，代码似乎可以正常运行 10 次，但在第 11 次运行时失败，即使没有任何变化。

您是否考虑过使用[cython](http://www.cython.org/)？我知道这不是每个人的选择，但如果它是一个选项，您可以使用[类型化的 memoryviews](http://docs.cython.org/src/userguide/memoryviews.html)获得几乎 C 级的加速。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:15:54.280

根据[http://docs.scipy.org/doc/numpy/reference/c-api.array.html?highlight=pyarray_ascarray#PyArray_AsCArray](http://docs.scipy.org/doc/numpy/reference/c-api.array.html?highlight=pyarray_ascarray#PyArray_AsCArray)：

> 注意 对于 2-d 和 3-d 数组，C 样式数组的模拟并不完整。例如，模拟的指针数组不能传递给期望特定的、静态定义的 2-d 和 3-d 数组的子程序。要传递给需要这些输入的函数，您必须静态定义所需的数组并复制数据。

我认为这意味着`PyArray_AsCArray`以 C 顺序返回一个包含数据的内存块。但是，要访问该数据，需要更多信息（请参阅[http://www.phy225.dept.shef.ac.uk/mediawiki/index.php/Arrays,_dynamic_array_allocation](http://www.phy225.dept.shef.ac.uk/mediawiki/index.php/Arrays,_dynamic_array_allocation)）。这可以通过提前知道维度，声明一个数组，然后以正确的顺序复制数据来实现。但是，我怀疑更一般的情况更有用：在返回之前您不知道尺寸。我认为以下代码将创建必要的 C 指针框架以允许对数据进行寻址。

```
static PyObject* func(PyObject* self, PyObject* args) {
    PyObject *list2_obj;
    PyObject *list3_obj;
    if (!PyArg_ParseTuple(args, "OO", &list2_obj, &list3_obj)) return NULL;

    double **list2;
    double ***list3;

    // For the final version
    double **final_array2;
    double **final_array2;

    // For loops
    int i,j;

    //Create C arrays from numpy objects:
    int typenum = NPY_DOUBLE;
    PyArray_Descr *descr;
    descr = PyArray_DescrFromType(typenum);

    // One per array coming back ...
    npy_intp dims2[2];
    npy_intp dims3[3];

    if (PyArray_AsCArray(&list2_obj, (void **)&list2, dims2, 2, descr) < 0 || PyArray_AsCArray(&list3_obj, (void ***)&list3, dims3, 3, descr) < 0) {
        PyErr_SetString(PyExc_TypeError, "error converting to c array");
        return NULL;
    }

    // Create the pointer arrays needed to access the data

    // 2D array
    final_array2 = calloc(dim2[0], sizeof(double *));
    for (i=0; i<dim[0]; i++) final_array2[i] = list2 + dim2[1]*sizeof(double);

    // 2D array
    final_array3    = calloc(dim3[0], sizeof(double **));
    final_array3[0] = calloc(dim3[0]*dim3[1], sizeof(double *));
    for (i=0; i<dim[0]; i++) {
         final_array3[i] = list2 + dim3[1]*sizeof(double *);
         for (j=0; j<dim[1]; j++) {
             final_array[i][j] = final_array[i] + dim3[2]*sizeof(double);
         }
    }

    printf("2D: %f, 3D: %f.\n", final_array2[3][1], final_array3[1][0][2]);
    // Do stuff with the arrays

    // When ready to complete, free the array access stuff
    free(final_array2);

    free(final_array3[0]);
    free(final_array3);

    // I would guess you also need to free the stuff allocated by PyArray_AsCArray, if so:
    free(list2);
    free(list3);
} 
```

我找不到 的定义`npy_intp`，上面假设它与 相同`int`。如果不是，您需要在执行代码之前将其转换`dim2`为`dim3`数组`int`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-26T16:26:12.117

numpy C-API 中有一个错误，现在应该修复：

[https://github.com/numpy/numpy/pull/5314](https://github.com/numpy/numpy/pull/5314)

# grails - 如何在 Grails 中指定 hasOne 属性的表名

> ID：15576138
> 
> 赞同：0
> 
> 时间：2013-03-22T17:09:32.527
> 
> 标签：grails, grails-orm

我`hasOne`在 Grails 中用于一对一关系：

```
class MyParent {
    static hasOne = [child: MyChild]
}

class MyChild {
    static belongsTo = [parent: MyParent]
    static mapping = {
        table: 'MyChild'
    }
} 
```

我在数据库中有名为“MyChild”的表，因此出现下一个错误：

```
Invalid object name 'my_child' 
```

如何在`Parent`类中将关系的表名指定为“MyChild”而不是“my_child”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:26:06.290

试试不带':'。

```
static mapping = { table "mychild"} 
```

或使用名称标签

```
static mapping = { table name:"mychild" } 
```

希望这可以帮助

# java - 从类内部的方法调用构造函数

> ID：15576147
> 
> 赞同：1
> 
> 时间：2013-03-22T17:09:51.497
> 
> 标签：java

我正在尝试为一个类实现一个重置函数，最简单的方法是`removeAll()`在 arraylist 上使用并调用构造函数。但是，这似乎也不起作用，因为我的语法错误，我正在尝试一些我做不到的事情。

到目前为止，我有一个工作方法，但我想清理它，因为它只是`removeAll()`来自被调用的构造函数的重复代码（所有期望语句）`StandardDeck()`。

```
public void reset(){
    cardArray.removeAll(cardArray);
    for(int suit = 0; suit < 4; suit++){
        for(int rank = 0; rank < 13; rank++){
            PlayingCard card = new PlayingCard(suit, rank);
            cardArray.add(card);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:18:24.570

如果我很好地理解您的需求，您想要这个：

```
public class StandardDeck {

    List<PlayingCard> cardArray = new ArrayList<>();

    public StandardDeck() {
       reset();
    }

    public void reset() {
        cardArray.clear();
        for(int suit = 0; suit < 4; suit++){
          for(int rank = 0; rank < 13; rank++){
            PlayingCard card = new PlayingCard(suit, rank);
            cardArray.add(card);
          }
        }
    }
} 
```

无需复制循环。正如我之前指出的那样， [clear](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#clear%28%29)是清除列表的标准和最佳解决方案。

# c# - 局部变量可以命名为yield

> ID：15576150
> 
> 赞同：5
> 
> 时间：2013-03-22T17:10:02.513
> 
> 标签：c#, yield-return

才发现

```
foreach (int yield in items) {
  yield return yield * 2;
} 
```

或者

```
int yield = 10; 
```

是 C# 中的有效代码。

我可以理解编译器很容易区分变量 yield 和迭代器 yield，但它仍然增加了混乱并降低了代码的可读性。

我们知道允许它的确切原因吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T17:12:23.890

> 我们知道允许它的确切原因吗？

是的。`yield`只是一个*上下文*关键字。它是在 C# 2 中引入的，团队不想破坏已经用作`yield`标识符的代码。

从 1.0 开始引入的其他上下文关键字也是如此，例如`partial`. 有关完整列表，请参阅[Eric Lippert 的博客文章](http://blogs.msdn.com/b/ericlippert/archive/2009/05/11/reserved-and-contextual-keywords.aspx)。

> 但它仍然增加了混乱并降低了代码的可读性

所以不要那样做？你可以做很多事情来让你的代码变得非常非常难以阅读。您可以将所有变量名都设为下划线：

```
private int _;
private string __;
// etc 
```

你这样做吗？如果不是，您为什么希望人们`yield`专门编写令人困惑的代码？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:13:48.590

`yield`是一个上下文关键字。它可能是一个普通的关键字，但他们选择将其设为上下文关键字。

上下文关键字的主要原因是向后兼容性。如果他们在语言中添加了普通关键字，则可能会破坏从旧版本语言复制的代码。

例如，想象一下在`yield`添加为普通关键字之后编译此代码：

```
bool yield = false;
// bla bla 
```

它不会很好地工作，不是吗？您必须先重命名变量，然后才能使用较新的版本对其进行编译。

# oracle - 在 oracle 中理解解释计划

> ID：15576158
> 
> 赞同：4
> 
> 时间：2013-03-22T17:10:17.123
> 
> 标签：oracle, sql-execution-plan

我试图了解 oracle 中的解释计划，并想知道 oracle 在形成解释计划时考虑了什么条件

我正在测试 oracle 11g 中 HR 模式中的一个简单查询

```
select * from countries 
where region_id in (select region_id from regions where region_name = 'Europe'); 
```

当我运行以下查询时：

```
explain plan for 
select * from countries 
where region_id in (select region_id from regions where region_name = 'Europe');

SELECT * FROM table(dbms_xplan.display(null,null,'basic')); 
```

我在解释表中得到以下输出：

```
--------------------------------------------------------
| Id  | Operation                    | Name            |
--------------------------------------------------------
|   0 | SELECT STATEMENT             |                 |
|   1 |  NESTED LOOPS                |                 |
|   2 |   INDEX FULL SCAN            | COUNTRY_C_ID_PK |
|   3 |   TABLE ACCESS BY INDEX ROWID| REGIONS         |
|   4 |    INDEX UNIQUE SCAN         | REG_ID_PK       |
-------------------------------------------------------- 
```

在这里，我观察到外部查询首先执行，即国家表首先执行，如第 3 行所示。

现在我在区域表的 region_name 上添加了一个索引并再次运行解释计划并得到以下输出

```
--------------------------------------------------------------
| Id  | Operation                    | Name                  |
--------------------------------------------------------------
|   0 | SELECT STATEMENT             |                       |
|   1 |  NESTED LOOPS                |                       |
|   2 |   TABLE ACCESS BY INDEX ROWID| REGIONS               |
|   3 |    INDEX RANGE SCAN          | REGIONNAME_REGIONS_IX |
|   4 |   INDEX UNIQUE SCAN          | COUNTRY_C_ID_PK       |
|   5 |    INDEX RANGE SCAN          | COUNTRIES_REGIONID_IX |
-------------------------------------------------------------- 
```

现在我的问题是：

1.  不管索引是否存在，不应该首先执行内部查询
2.  如果添加索引会改变执行计划，还有哪些其他功能可以改变它？
3.  在一般情况下，执行过程是什么样的，它是顺序的（首先执行首先发生的连接，然后进入查询中的下一个连接）？

在此先感谢您的帮助。

-瓦伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:15:01.907

解释计划严重依赖基于成本的优化器 (CBO)。您可以通过收集您要查询的表的统计信息来帮助完成此过程。现在就指数为什么会改变计划而言，那是因为您向 CBO 提供了以前没有的关键信息。这相当于我问你这个问题：

无索引：
“街在哪里？”

带索引：
“有蓝色房子的那条街在哪里？”

第二个问题提供了更大的上下文，因此您可以更快地推断出来，并且您不必枚举所有这些街道。

您可以为查询提供提示，即：

`select /*+ parallel */ * from table`
提示**并行**运行此查询。

对于第三个问题，我想这是 Oracle 流程的一部分，并且没有记录供全世界使用。

第一个问题，不一定，都是以成本为基础的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T22:46:06.113

我不知道他们是否在 11g 中更改了执行计划输出中的任何内容，但您确定您向我们展示了正确的查询吗？您正在`select *`从表*国家*中选择所有列 ( ) ，但解释计划未显示任何表访问权限？还是`COUNTRY_C_ID_PK`包括所有列？

我期望以下计划（没有索引）：

```
SELECT
  NESTED LOOP
    FULL TABLE SCAN (regions)
    TABLE ACCESS BY INDEX ROWID (countries)
      INDEX RANGE SCAN (COUNTRIES_REGIONID_IX) 
```

有了索引，我会期待这样的事情：

```
SELECT
  NESTED LOOP
    TABLE ACCESS BY INDEX ROWID (regions)
      INDEX RANGE SCAN (REGIONNAME_REGIONS_IX)
    TABLE ACCESS BY INDEX ROWID (countries)
      INDEX RANGE SCAN (COUNTRIES_REGIONID_IX) 
```

对于您的问题：

1.  Oracle 可以根据可用的统计信息从内部或外部查询驱动查询
2.  影响执行计划的因素太多了……
3.  Oracle 一次只能连接两个表（或行源）。一个join的结果也是可以join下一个表的row source

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T10:02:15.207

基于成本的优化器经历了几个阶段，包括查询转换。您的查询几乎肯定已被优化器重写为：

选择国家。* 从国家加入地区 (countries.region_id = region.region_id) where regions.region_name = 'Europe';

因此，原始查询中表示的内部和外部查询的概念可能不适用于转换后。顺便说一句，这就是为什么有关 EXISTS () 与 IN () 的论点经常没有实际意义的原因——这两种情况下的查询通常都可以重写为连接。

优化器使用的信息（取决于版本）包括：

1.  表上的统计
2.  表列的统计信息
3.  表列值的直方图
4.  索引的存在
5.  索引的大小、类型和统计信息——尤其是聚类因子
6.  约束的存在——包括非空约束和检查约束。
7.  每秒单块和多块读取和 cpu 操作的估计成本。
8.  分区
9.  物化视图和/或查询重写声明的存在和状态。
10.  以前版本的查询的性能。

所以简而言之，不要对优化器所做的任何事情感到惊讶。这是一个非常复杂的套件。

# r - 在 R 中创建跨行的方程函数

> ID：15576165
> 
> 赞同：0
> 
> 时间：2013-03-22T17:10:52.127
> 
> 标签：r, function, equation

我有一个类似于这样创建的数据框：

```
dummy=data.frame(c(1,2,3,4),c("a","b","c","d"));colnames(dummy)=c("Num","Let")
dummy$X1=rnorm(4,35,6)
dummy$X2=rnorm(4,35,6)
dummy$X3=rnorm(4,35,6)
dummy$X4=rnorm(4,35,6)
dummy$X5=rnorm(4,35,6)
dummy$X6=rnorm(4,35,6)
dummy$X7=rnorm(4,35,6)
dummy$X8=rnorm(4,35,6)
dummy$X9=rnorm(4,35,6)
dummy$X10=rnorm(4,35,6)
dummy$Xmax=apply(dummy[3:12],1,max) 
```

只有真实的东西大约是260 * 13000个细胞

我的目标是对由 data[x:x] 定义的一组列中的每一行执行下面的等式（在示例中，列虚拟 [3:12] 中的列）

> **TSP = Sum( (1-(Xi/Xmax)) /(n-1))**

其中 Xi 是行内和感兴趣的列中的每个单独的值（*i*表示每一列，即每行有一个 X1、一个 X2、一个 X3... 值），Xmax 是所有这些值中的最大值行（在 dummy$Xmax 列中定义），n 是选择的列数（在示例的情况下：n=10）。在实际数据集中，我将选择 26 列。

我想创建一个整洁的小函数来执行此计算并将每一行的值存储到一个名为 dummy$TSP 的列中，并对所有 13000 行执行此操作。

下面是一个粗略的解决方案，但就像我说的那样，我想把它引入某种整洁的功能，在那里我可以选择列，其余的（几乎）是自动的。

```
dummy$TSP<- ((((1-(dummy$X1/dummy$Xmax))/(10-1))
            +(((1-(dummy$X2/dummy$Xmax))/(10-1))
                       ...
            +(((1-(dummy$X10/dummy$Xmax))/(10-1))) 
```

我也非常感谢能够很好地解释该过程的答案，因此我将更有可能学习，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:27:58.833

如果您知道要在列上应用函数，就像您怀疑`apply`在行上应用函数一样，在您想要的列上；

```
# Columns you want to use for this function
cols <- c( 3:13 )

# Use apply to loop over rows
dummy$TSP <- apply( dummy[,cols] , 1 , FUN = function(x){ sum( ( 1 - ( x / max(x) ) ) / (length(x) - 1) ) } ) 
```

R 是向量化的，所以当我们将一行传递给函数时`apply`（该行作为参数传递`x`，它将是 10 个数字的向量），当我们执行一些操作时，R 假设我们想要对的每个元素执行该操作向量。

因此，在第一个实例中，`x/max(x)`将返回一个包含 10 个数字的向量，该向量是该行每一列的一个元素/该行的这些列中的最大值。我们还将每个结果除以`1 - x/max(x)`列数 - 1。然后我们将这些结果整理成一个值，使用`sum`该值从函数返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:36:25.880

一个更矢量化的解决方案是对所有元素执行内部函数，然后`sum`使用高效函数对每一行执行操作，`rowSums`如下所示：

```
vars.to.use <- paste0("X", 1:10)
dummy$TSP <- rowSums((1-(dummy[vars.to.use]/dummy$Xmax))/(length(vars.to.use) - 1)) 
```

# perl - 将静态目录添加到 Mojo Lite App

> ID：15576166
> 
> 赞同：2
> 
> 时间：2013-03-22T17:10:54.110
> 
> 标签：perl, mojolicious

地狱所有，

我正在尝试向我的 Mojo Lite 应用程序添加一个共享的静态目录，但这似乎不起作用。

```
use Mojolicious::Lite;
use Mojolicious::Static;

# Documentation browser under "/perldoc"
plugin 'PODRenderer';

my $static = Mojolicious::Static->new;

push @{$static->paths}, '/my/path; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-09T16:25:35.127

您可以像在答案中一样添加绝对路径：

```
push @{app->static->paths}, '/my/abs/path'; 
```

您还可以添加相对于您的应用主文件夹的路径（这是[默认设置的方式](https://github.com/kraih/mojo/blob/master/lib/Mojolicious.pm#L66)）：

```
push @{app->static->paths}, app->home->rel_dir('my/rel/path'); 
```

`public`默认设置是在应用的主路径中调用一个文件夹。如果您这样做，该应用程序将立即使用它。[在这里阅读更多](http://mojolicio.us/perldoc/Mojolicious/Lite#Static_files)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T17:22:14.327

这有效：

```
my $static = app->static();

push @{$static->paths}, '/my/path'; 
```

# php - 带有like的SQL查询在php中返回不同

> ID：15576170
> 
> 赞同：0
> 
> 时间：2013-03-22T17:11:09.833
> 
> 标签：php, sql-server, adodb

> 已解决：我测试了将查询编写为存储过程，但它仍然在 php.ini 中报告错误。最终我发现，因为我有一些带有空值的列，PHP 正在奇怪地读取它们。令人失望的是 Perl 处理得更好，但是很好。

我正在使用带有 adodb 的 PHP 5.3.3 来访问 MS SQL Server 2012。我的大多数查询都很好，但我正在尝试使用通配符进行完全连接。

这是开部分：

```
on a_table.hostname LIKE '%' + r_table.Hostname + '%' 
OR '%' + a_table.hostname like r_table.Name + '%' 
```

当我在 SQL Studio 中执行查询时，我得到 1224 条记录。在 PHP 中，2406。我查看了 sql 服务器上的日志，它运行的查询是准确的，复制和粘贴时返回预期/正确数量的结果。

如果我在我的 PHP 中编辑查询并删除连接的 %s ，则结果与直接执行查询一致（如果通配符也从中删除）。

我已经使用 PHP 的 mssql 函数和 adodb 测试了查询，结果相同。

编辑：我刚刚用三种方式测试了查询：通过 Perl、Sql studio 和 PHP。Perl 和 SQL 工作室是一样的 - PHP 仍然是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:06:40.467

我测试了将查询编写为存储过程，但它仍然在 php.ini 中报告不正确。最终我发现因为我有一些带有空值的列，PHP 正在奇怪地读取它们。

# c++ - 创建一个指向现有内存缓冲区的 HBITMAP

> ID：15576179
> 
> 赞同：3
> 
> 时间：2013-03-22T17:11:42.853
> 
> 标签：c++, winapi, bitmap, freeimage

我正在使用[FreeImage](http://freeimage.sourceforge.net)库来存储和操作位图数据。我的部分代码要求我截取窗口（在 Windows 中），并将其存储为`FBITMAP*`（FreeImage 的位图数据结构）。我解决这个问题的方法包括两个步骤：捕获图像，然后将其转换为`FBITMAP*`.

要捕获图像，我会执行以下操作：

```
HWND window; // Assume this is a valid handle to my window
int width; // width of window client area
int height; // height of window client area

HDC windowDC = GetDC(window);
HDC captureDC = CreateCompatibleDC(windowDC);
HBITMAP screenshot = CreateCompatibleBitmap(windowDC, width, height);
SelectObject(captureDC, screenshot);
BitBlt(captureDC, 0, 0, width, height, 
       captureDC, 0, 0, SRCCOPY|CAPTUREBLT);

ReleaseDC(window, windowDC);
DeleteDC(captureDC); 
```

FreeImage 提供了一个函数，它返回一个指向像素数据的原始指针：

`BYTE* FreeImage_GetBits(FBITMAP*)`

[常见问题解答](http://freeimage.sourceforge.net/faq.html)解释说`HBITMAP`（位图的 WinAPI 句柄）可以转换为`FBITMAP*`using `GetDIBits`，它将源`HBITMAP`和目标原始指针作为参数，并将像素数据从一个复制到另一个。

这种方法的问题是我已经将数据复制了两次——一次是`BitBlt`从窗口 DC 复制到`HBITMAP`内存 DC 中的选定内容，然后再次从`HBITMAP`FreeImage 内存缓冲区复制。我希望消除这种低效率并将数据直接复制到`BitBlt`操作中的原始指针。为此，我需要一个内存 DC，其中有一个`HBITMAP`选定的内存 DC，它`HBITMAP`指向我的内存缓冲区，而不是 Windows 为其分配的内存。

我怎样才能做到这一点？

# java - 导出 JAR 文件，但它需要 MySQL 驱动程序

> ID：15576180
> 
> 赞同：0
> 
> 时间：2013-03-22T17:11:44.573
> 
> 标签：java, mysql, jdbc

我的应用程序使用 MySQL JDBC，我正在尝试使用 eclipse 导出 JAR 文件。

我的问题是如何包含 MySQL 驱动程序以便 JAR 文件可以连接到服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:15:28.290

您不应该在 jar 中包含 MySQL 驱动程序。驱动程序是一个单独的 jar，因此您需要在运行代码时将其添加到类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:18:17.033

如果您尝试创建一个包含所有依赖项的单个 jar，请使用[OneJar](http://one-jar.sourceforge.net/)或[UberJar](http://classworlds.codehaus.org/uberjar.html)来完成此操作。

如果您使用的是 ant，有一个简单的 ant 任务可以完成，它支持指定主类以及在 metainf 中的类路径

```
<jar id="files" jarfile="single.jar">
    <zipfileset src="deped1.jar" includes="**/*.java **/*.class"/>
    <zipfileset src="depend2.jar" includes="**/*.java **/*.class"/>
</jar> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:19:09.080

以下是使用 Eclipse 的方法：[如何使用 Eclipse 中包含的外部库创建 jar？](https://stackoverflow.com/questions/11033603/how-to-create-a-jar-with-external-libraries-included-in-eclipse)

或者您可以使用 OneJar 之类的工具[http://one-jar.sourceforge.net/](http://one-jar.sourceforge.net/)来创建单个可运行的 JAR 文件

# html - 如何集成 HTML5 JSF/Facelets 中的标签？

> ID：15576181
> 
> 赞同：0
> 
> 时间：2013-03-22T17:11:48.927
> 
> 标签：html, jsf, facelets

我想`<video>`在 JSF/Facelets 页面中使用 HTML5 标记。我尝试了以下方法，但它不起作用。

```
<h:body>
    Hello from Facelets
    <br />
    <section id="reproductor">
        <video src='http://minkbooks.com/content/trailer.mp4' >
        </video>
    </section>
    <h:link outcome="welcomePrimefaces" value="Primefaces welcome page" />
</h:body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:51:51.080

JSF 在这个问题的上下文中仅仅是一个 HTML 代码生成器。因此，JSF 实际上与具体问题完全无关。在使用 JSP、ASP、PHP 等生成 HTML 代码时，甚至在使用静态 HTML 文件时，您也会遇到完全相同的问题。

回到您的具体问题，只要您的浏览器支持相关的 HTML5 标签，那么您的具体问题只是因为您尝试跨域流式传输视频而引起的。nor标签**不**支持这一点。您需要提供您自己域中的视频文件（即将文件放在与您的 JSF 文件所在的相同的 webapp 中）。`<video>``<audio>`

假设您已将视频文件的副本与 JSF 文件放在同一文件夹中，则应该这样做：

```
<video src="trailer.mp4" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-19T15:02:49.137

除了上面的@BalusC 响应之外，不要忘记在部署描述符 (web.xml) 中映射静态内容的文件类型。以下是这些行：

```
 <servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.mp4</url-pattern>
 </servlet-mapping> 
```

# c# - 访问派生类中的字段

> ID：15576187
> 
> 赞同：1
> 
> 时间：2013-03-22T17:12:15.730
> 
> 标签：c#

我正在通过用户界面动态创建节点列表。在我的列表中，我可以通过反射实例化这些对象，根据下面的类结构将任意数量的对象（AAA、BBB 等）添加到列表中。

```
public abstract class Node : IDisposable
{ 
    protected int x;
}
public class AAA : Node
{ 
    public int iA;
}
public class BBB : Node
{ 
    public int iB;
} 
```

创建列表后，我想访问派生对象中的扩展字段。我知道我必须向下转换才能访问扩展字段，但为了做到这一点，目前我必须执行显式转换。

```
foreach (Node nn in MyList)                   //assume the first node in the list is AAA
{
    int m = ((namespace.AAA) nn).iA;          //this works
    int n = (AAA) nn).iA;                     //this works
} 
```

我想知道是否可以使用字符串来创建实际的向下转换。也许做不到。也许我错过了一些东西。我想做但不起作用的事情如下。

```
foreach (Node nn in MyList)       //assume the first node in the list is AAA
{
    Type t2 = nn.GetType();       //{Name = AAA; FullName = namespace.AAA} (*debugger*)
    string str = t2.FullName;     //namespace.AAA

    int m = ((str) nn).iA;         //this DOESN'T work
} 
```

当我在调试器中查看 nn 的值时，FullName 代表我想用于向下转换的类。

我可以通过使用 switch 语句来解决这个问题每次添加节点时的语句。如果可能的话，这是我宁愿不做的事情。

提前感谢您的任何回复。

感谢 Douglas 指出我可以使用 FieldInfo 来获取 iA 的值。我只是想在这个话题上多扩展一点。如果我想采用 AAA 类并通过组合扩展它，我是否也能够通过 FieldInfo 访问这些类中的字段。

```
public class AAA : Node
{ 
    public int iA;
    public X[] XArray;   //where X is some other random class with pubic fields
    public Y[] YArray;   //where Y is some other abstract class
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:24:36.273

What you are doing seems like a product of a faulty idea somewhere in your design.

Instead of having iA and iB in your classes, why doesn't the base node have a property called iNodeImplementation which you set in the constructor of AAA or BBB? Then you don't have to do all this fancy casting.

I have a feeling your trying to be too cute and missed some basic OOD principles. Consider how you can refactor your classes to make your code simpler.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:26:23.163

在不讨论是否*应该*这样做的优点的情况下，这里有一些示例代码展示了如何*使用*反射来完成它：

```
Type aaaType = Type.GetType("namespace.AAA");
FieldInfo iAField = aaaType.GetField("iA", BindingFlags.Public | 
                                           BindingFlags.Instance);
int m = (int)iAField.GetValue(nn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:29:33.327

为什么不尝试在 Node 类中设置抽象属性，而不是在 AAA 和 BBB 中实现。

```
public abstract class Node : IDisposable
{ 
    protected int x;
    public abstract int i;
}
public class AAA : Node
{ 
    public override int i;
}
public class BBB : Node
{ 
    public override int i;
} 
```

而不是像这样使用foreach：

```
foreach (Node nn in MyList)       
{
    int m = nn.i;         
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:30:02.617

对我来说，这是您的对象设计中的问题，而不是 C# 中的问题。

您有很多节点要进行一般处理（很好），但您希望能够以独特的方式从它们中获取专门的数据。在拥有（可能）无限量的唯一数据的情况下，这并不是很好。

问题是您想要两全其美：独特的封装数据和对该数据的免费通用访问。

我会说您需要进行 Node 设计，并认真思考节点的通用消费者应该可以使用什么样的操作/访问，并在抽象基类或少量（ish）提供的接口中提供它那个访问。

否则，您会在代码中的某处查看大量向下转换，或者使用反射来最好地猜测事物，或者使用标准接口来描述和获取您想要的值。

# sed - 添加 -i 标志会导致 sed 抛出错误

> ID：15576188
> 
> 赞同：0
> 
> 时间：2013-03-22T17:12:21.450
> 
> 标签：sed

如果我让输出发送到标准输出，我有一个 sed 命令可以正常工作

```
sed  s/defaultFedoraColor/grey/ stuff.js 
```

但是，如果我尝试通过添加 -i 标志来更改文件

```
sed  -i s/defaultFedoraColor/grey/ stuff.js 
```

我收到错误消息

```
sed: 1: "stuff.js": unterminated substitute pattern 
```

为什么旗帜会改变我的替换模式的合法性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:15:09.797

`-i`标志带一个参数！此参数是用于被操作文件的备份后缀。（大概是使用给定的后缀对原始文件进行备份。）因此，您的模式已成为 -​​i 的参数，并且 sed 尝试将“stuff.js”解释为模式。

**编辑：**不过，我根本没有遇到这种错误行为，但这就是阅读手册页所暗示的问题。

**另一个编辑：**也许您只想按照建议在模式周围添加引号

# twitter-bootstrap - Bootstrap 模态百分比高度

> ID：15576190
> 
> 赞同：4
> 
> 时间：2013-03-22T17:12:27.443
> 
> 标签：twitter-bootstrap, modal-dialog, percentage

我用很多模态构建应用程序，我需要为类似的东西设置模态：

> .modal {顶部：5%；左：5%；对：5%；底部：5%；}

所以它将在浏览器窗口的 90% 宽度和 90% 高度上。但我需要有可滚动的模态体。我使用 modal-header，它必须始终可见，因为它包含功能按钮。

当我想定义最大高度时，即使它是百分比，它也不是正确的数字，因为例如，标题的宽度设置为 5% ，但填充为 5px 并将底部边框定义为 1px 所以我无法计数这些在一起。为了定义溢出，我必须定义最大宽度或宽度，但是无法动态知道它并且百分比不适合。

因为我找不到任何解决方案，我开始考虑长滚动模式，尽管在长模式中滚动滚动出标题。

有什么方法可以得到我想要的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T20:46:04.223

你可以试试这个 CSS：

```
.modal{
  width: 90%; /* desired relative width */
  min-height:80%;
  left: 5%; /* (100%-width)/2 */
  margin: auto auto auto auto; /* place center */}

.modal-body{overflow-y:scroll;max-height:none;position:absolute;top:50px;bottom:50px;right:0px;left:0px;}

.modal-footer {position: absolute;bottom: 0;right: 0;left: 0;} 
```

[这是一个例子](http://jsfiddle.net/Wjjnd/46/ "例子")

让我知道它是否有效=)

# asp.net - 分页 DataGrid 时是否应该重新应用 DataSource 属性？

> ID：15576194
> 
> 赞同：0
> 
> 时间：2013-03-22T17:12:32.887
> 
> 标签：asp.net, datagrid

我正在分页 DataGrid，该`OnPageIndexChanged`方法如下所示：

```
 protected void dgSurvey_PageIndexChanged(object source, DataGridPageChangedEventArgs e)
    {
        dgSurvey.CurrentPageIndex = e.NewPageIndex;
        dgSurvey.DataBind();
    } 
```

在那个方法中，我是否还需要调用`dgSurvey.DataSource`= << `my data source`>>，或者这是 ViewState 应该处理的事情之一，前提是它在 DataGrid 上启用？

最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:03:08.643

这取决于您如何使用 DataGrid。如果您使用 DataGrid 属性为您处理分页，那么您无需执行任何操作，DataGrid 将知道如何查询下一个结果集。

但是，如果您使用的是“分离的”DataGrid，将数据作为列表提供，例如，在每个 PostBack 中，那么是的，您将必须添加新的数据源并调用数据。

# perl - Perl 读取的行长

> ID：15576195
> 
> 赞同：0
> 
> 时间：2013-03-22T17:12:33.827
> 
> 标签：perl, line

在 Windows 中，行尾是 \r\n (x0dx0a) 例如（2 行文本） textfile.txt ：

```
abc
def 
```

我最初认为每行的长度 == 5。但是当我尝试读取功能时，似乎我们需要考虑每行有 3 + 1 个字符（长度 == 4）。将换行符计为 1 个字符（作为 x0a）。

我想知道有没有办法让 perl 读取文件的每个八位字节（也读取 x0d）？

我不确定它是否有用，但我只是想知道^_^

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T17:15:14.100

输入文件句柄上的[binmode 。](http://perldoc.perl.org/functions/binmode.html)

# backbone.js - 骨干模型保存 - this.model.get('id') undefined

> ID：15576198
> 
> 赞同：1
> 
> 时间：2013-03-22T17:12:37.780
> 
> 标签：backbone.js

使用这个：

```
 this.model.save(null, {
            success: function(model) {
                app.router.navigate('items/' + model.get('id'));
                this.render();
            }
        }); 
```

有没有人知道为什么 model.get('id') 是未定义的，但是 model.id 有来自服务器的新 id？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T19:22:10.433

Backbone 模型上的 .get 方法将从模型的“属性”属性（对象）中检索“属性”（即属性）。它不会检索模型上不属于这些属性的属性 - model.id 是模型本身的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T00:21:17.947

`success`回调接受三个参数`(model, response, options)`- .

尝试`response.id`或`console.log`做出回应。

# google-app-engine - 通过端点 api 将图像读入 protopc 消息

> ID：15576203
> 
> 赞同：4
> 
> 时间：2013-03-22T17:12:54.790
> 
> 标签：google-app-engine, python-2.7, google-cloud-endpoints

要将用户的图片接收到我的`@endpoints.method`do 我`messages.BytesField`使用

```
image = messages.BytesField(1)
stuff = messages.StringField(2) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T17:23:29.237

是的，这是正确的策略。使用 Cloud Endpoints 时，发送到 a 的字节`BytesField`必须经过 base64 编码。

在通过 Google 的 API 基础设施发送和验证后，base64 编码的字节将被发送到您的类，并在 Python 中`protorpc.remote.Service`从 base64 字符串转换为本机字节字符串（的实例）。`str`

因此，您需要您的客户获取图像字节并将它们转换为 base64。

要在 Javascript 中将字节字符串编码为 base64，请参阅[如何在 JavaScript 中将字符串编码为 Base64？](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript), 要在 Python 中做同样的事情，只需调用

```
import base64
base64.b64encode(byte_string) 
```

# codeigniter - 如何在 CodeIgniter 中布局基类和 3 个扩展类？

> ID：15576205
> 
> 赞同：0
> 
> 时间：2013-03-22T17:13:16.220
> 
> 标签：codeigniter, class, inheritance

这是我想在 CodeIgniter 中用于控制器的布局：

```
(base) editor
(extend) design
(extend) content
(extend) ...php 
```

...在哪里`editor`是基类和`design`，`content`等控制器扩展`editor`。该类`editor`将具有可从扩展类 URL 段公开访问的方法。

我在这里阅读了一些主题，他们建议：

1.  图书馆 - 这将不起作用，因为方法不会公开访问（我正确吗？）

2.  将基类与扩展类放在同一个文件中，并将控制器命名为 - 这不起作用，因为我需要从多个地方扩展。

3.  将所有文件放在控制器文件夹中，向每个扩展类添加 require 语句 - 这是不好的形式吗？

我是 CI 新手。处理此问题的正确/正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:23:13.580

[http://www.ellislab.com/codeigniter/user-guide/general/core_classes.html](http://www.ellislab.com/codeigniter/user-guide/general/core_classes.html)

使用 MY_Controller 扩展核心 CI 控制器，然后使用其他控制器扩展 MY_Controller。所有其他都保留 MY 中的功能，而 MY 保留基本控制器的功能

还有这篇文章允许更多没有 MY_ 前缀的控制器，我使用它并发现它非常有用！

[http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY)

# c++ - 类型转换为自定义类 - C++

> ID：15576214
> 
> 赞同：0
> 
> 时间：2013-03-22T17:13:43.217
> 
> 标签：c++, variables, type-conversion

我有一类复数，`+, -, *, /,=,!=`在两种方式上都加载了复数和双精度类型的运算符，但是当我编写代码`complex z = 1`时，编译器给我一个错误，说没有从`int`to的变量转换`complex`。虽然，它接受代码

```
complex z;
z = 1; 
```

一切正常。我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:17:24.400

该行`complex z = 1`执行[Copy Initialization](http://en.cppreference.com/w/cpp/language/copy_initialization)。您将需要一个适当的构造函数：

```
complex::complex(int i) // or double or whatever is convertible to int by
{                       // implicit conversion
    // your code
} 
```

这不同于

```
complex z;
z = 1; 
```

这是需要赋值运算符的*赋值（到以前默认构造的对象）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:15:16.320

您可能需要添加一个接受 a 的构造函数`double`：

```
class complex
{
public:
    complex(double d) : _real(d), _imag(0) { }
    ...
}; 
```

但是要小心：这可能会在任何预期的`int`地方传递 a `complex`，因为您的构造函数将执行隐式转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:15:16.927

您需要一个带有`double`.

```
class complex
{
public:
    complex( double d );
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:15:07.870

您需要编写一个适当的构造函数。

```
class complex {
public:
    complex(double x) {
        // ...
    }

    // ...
}; 
```

# javascript - IntroJs 如何实现突出显示的区域？

> ID：15576220
> 
> 赞同：6
> 
> 时间：2013-03-22T17:13:53.200
> 
> 标签：javascript, html, intro.js

遇到了 intro.js - 一种非常酷的方式来指导用户如何使用软件界面。我没有深入查看源代码，但想知道是否有人可以简要解释代码如何实现突出显示的区域（特别是尺寸/位置/zindexing）以实现效果。

提前感谢杰

链接： [http ://usablica.github.com/intro.js/](http://usablica.github.com/intro.js/)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-22T19:44:41.723

我是 Intro.js 的作者 Afshin。让我向您介绍它实际上是如何工作的。

在一个聚焦/突出显示的元素中，发生了两件不同的事情：
1）制作一个辅助层。辅助层是焦点元素中的白色圆角层。
2) 更改目标元素的`z-index`和`position`，以使该元素位于页面中所有其他元素的前面。

如果目标元素（应该聚焦/突出显示的元素）的位置是：

**Absolute/Relative**：IntroJs 只是将目标元素设置`z-index`为`9999999`，因此目标元素位于页面中所有其他元素的前面。

**静态**：现在，IntroJs 将目标元素位置设置为`relative`，然后将 设置`z-index`为`9999999`。

现在，目标元素位于页面中所有其他元素的前面。所以，最后一步，创建辅助元素。

为了创建辅助层，IntroJs 只需获取目标元素的高度、宽度、顶部和左侧，然后创建一个`div`with 类`introJs-helperLayer`（和 position `absolute`）并将其附加到`body`.

**结论**

为了专注于一个元素，IntroJs 做了两个步骤，首先创建一个辅助层（页面中的圆角层），然后制作目标元素的内容`relative`，以便将其带到页面中所有元素的前面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T17:18:58.467

嗯 - 很简单。

1.  使用 z-index 制作一个宽度/高度为 100% 的覆盖 div 假设为 1000 - 这是具有黑色不透明度的主要免费；
2.  制作另一个叠加层，使用 z-index 突出显示“步骤”的特定元素，然后是基本叠加层，比如说 1001 - 这是带有工具提示容器说明的“白色”元素；
3.  最后将页面中的原始元素设置为 position:relative 并且最高 z-index(1002) 高于它们。

# android - 如何在不发生截断的情况下显示android操作栏标题

> ID：15576224
> 
> 赞同：10
> 
> 时间：2013-03-22T17:14:04.473
> 
> 标签：android, android-actionbar, actionbarsherlock, title, truncate

我有一个标题相当长的应用程序（例如我的长标题应用程序）。我正在使用 ActionBar 并注意到应用程序标题不断被截断（例如 My Long Title A...）。即使显示了 2 个操作栏项目（均标记为“ifRoom”），也会发生这种情况。

有谁知道是否有办法确保活动标题宽度优先于“ifRoom”操作栏项目（即确保我的标题完整显示，如果需要更多空间，操作栏项目将移动到下拉菜单）？

非常感谢人们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-07T00:30:21.967

我在操作栏标题很短时遇到了这个问题。即使使用 5-6 个字符串，操作栏标题也会被省略号截断。

如果您有一个短标题（例如“Shop”），然后`ActionBar.setTitle(<inputString or resId>)`在输入字符串比前一个标题长的地方调用`TextView`，即使`ActionBar`有足够的空间，也不会调整自身大小以提供新标题空间。

# **之前（短标题）**

![短标题，之前](../Images/19f1639cd9c726ba8837e75cedc8e85b.png)

```
// now call setTitle() with a longer title
ActionBar actionBar = getActionBar();
actionBar.setTitle("Collin"); 
```

# **之后（短标题）**

![更长的标题，之后](../Images/f75a546bd8f229260d7b1ee5f6c944ba.png)

# **解决方案**

继续`setTitle()`通话`onCreateOptionsMenu()`

结果：

![在此处输入图像描述](../Images/50f45739feaed23df75ebf49571fccb8.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-05T05:32:25.067

当最后一个标题小于新标题时会导致此错误，因此诀窍是使最后一个标题始终比新 setTitle 长。

即使在[Google 问题跟踪器](https://code.google.com/p/android/issues/detail?id=55256)中也没有解决方案，问题状态现在已过时。

**更新：（解决方法）**

```
getSupportActionBar().setTitle("");

getSupportActionBar().setTitle(title); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T18:09:27.603

不幸的是，没有办法防止操作栏标题被截断。但是，您确实可以选择一些选项来释放操作栏中的一些空间。您可以：

1.  强制您的操作项进入溢出菜单。如果您使用的是最新的 ActionBarSherlock(4.2.0)，则执行此操作要困难得多。使用 4.2.0 时，请参阅此[答案以了解解决方法。](https://stackoverflow.com/a/13307583/996313)如果您觉得不需要最新[版本，可以使用 ABS 4.1.0。](https://github.com/JakeWharton/ActionBarSherlock/blob/master/CHANGELOG.md)在 4.1.0 上，您只需将活动主题设置为`@style/Theme.Sherlock.ForceOverflow`. 请注意，不建议强制使用溢出菜单，因为它会在应用程序之间提供不一致的导航。
2.  您可以使用拆分操作栏并强制操作项进入底部操作栏。[在这里](https://stackoverflow.com/a/8468675/996313)查看 CommonsWare 的答案。有关拆分操作栏的信息，请参见[此处。](http://developer.android.com/guide/topics/ui/actionbar.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T16:56:05.653

我不确定是否有一种简单的方法，但有多种解决方法。

1）您可以强制酒吧到达底部并节省空间：

[如何强制操作栏位于 ICS 的底部？](https://stackoverflow.com/questions/8465258/how-can-i-force-the-action-bar-to-be-at-the-bottom-in-ics/8468675#8468675)

[http://developer.android.com/guide/topics/manifest/application-element.html](http://developer.android.com/guide/topics/manifest/application-element.html)

2）使用自定义字体设置标题： [https ://stackoverflow.com/a/8748802/1276103](https://stackoverflow.com/a/8748802/1276103)

3）您可以将标题设置为两行： [https ://stackoverflow.com/a/18867068/1276103](https://stackoverflow.com/a/18867068/1276103)

# android - Android：错误的onMeasure - 许多电话

> ID：15576243
> 
> 赞同：4
> 
> 时间：2013-03-22T17:15:16.773
> 
> 标签：android, measure, custom-view

我希望得到帮助。我对函数调用 onMeasure 的问题。在我的 xml 中，一个文件（RelativeLayput）- 3 个元素：TextView、RelativeLayout 并将它们包含在我的类中。现在我的主要活动类和我的创建类

```
 public class MainActivity extends Activity implements OnTouchListener {

    final String LOG_TAG = "myLogs";
    TextView tv1;
UiMyClass uimc;

    @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tv1 = (TextView) findViewById(R.id.mytext2);
    tv1.setOnTouchListener(this);
    String str1 = "qwertyy";
    uimc = (UiMyClass) findViewById(R.id.myclass1);
    Log.d(LOG_TAG, "Open1-0" + "   " + str1);       
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    int evX = (int) event.getX();
    int evY = (int) event.getY();
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        tv1.setText("uyq8qyw");
        break;
    case MotionEvent.ACTION_MOVE:
        break;
    case MotionEvent.ACTION_UP:
        break;
    }
    Log.d(LOG_TAG, "Touch_GS");
    return true;
}
}

public class UiMyClass extends View {

final String LOG_TAG = "myLogs";

public UiMyClass(Context context, AttributeSet attrs) {
    super(context, attrs);      
    this.setBackgroundResource(R.drawable.ic_launcher);
    Log.d(LOG_TAG, "Initialization_00");        
}

@Override 
protected void onMeasure(int x, int y) {
    setMeasuredDimension(100, 50);
    Log.d(LOG_TAG, "Measure_02");       
}

} 
```

这里有什么问题。当应用程序启动时，执行 onMeasure，但为什么会执行 8 次（在日志中可见）。顺便说一句，如果要在其他层增加我的元素视图的包围，onMeasure它执行2 ^（包围层的数量+2）时间。（即一个8，2 - 16） 此外，当我按下TextView 事件onTouch 执行，但也因此它启动onMeasure。如何使 onMeasure 不再启动，一般来说，它只启动一次。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T21:25:49.230

这种行为发生在两种情况下： - 当您使用 a`LinearLayout`并设置`layout_weight`其中一个孩子时。weight 属性导致该孩子被测量两次。所以如果你`LinearLayout`在里面放一个重物，你会得到4个叶子孩子的措施。- 同样的情况也可能发生在`RelativeLayout`. 一些约束可能导致多次测量通过。

这意味着你应该小心权重属性和RelativeLayout。我建议你使用 Android 的 traceview profiler 和 Hierarchy Viewer 来衡量你的布局的性能。

# requirejs - 从同一文件加载 shim 和命名模块时 RequireJS 超时

> ID：15576253
> 
> 赞同：1
> 
> 时间：2013-03-22T17:15:54.593
> 
> 标签：requirejs

我在 RequireJS (v2.1.5) 中混合 shims 和路径配置时遇到了问题。它看起来像一个错误，但也许只是我缺乏理解。这是一个简单的代码示例：

我有这个组合的 Javascript 文件，其中包含两个 amd 模块和一个名为*all.js*的全局对象：

```
define("one", [], function() {
  return {
    log: function() {
      console.log("ONE");       }
    };
});
define("two", [], function() {
  return {
    log: function() {
        console.log("TWO");
    }
  };
});
window.three = {
  log: function() {
    console.log("THREE");
  } 
}; 
```

这是配置：

```
<script>
    requirejs.config({          
        baseUrl: ".",
        paths: {
            one : "all",
            two: "all",
            three: "all"
        },
        shim: {
            three: {
                exports: "three"
            }
        }
    });
</script> 
```

现在，如果我这样做，我会看到一个和两个（好的）：

```
require(["one", "two"], function(one, two) {
    one.log();
    two.log();
}); 
```

如果我这样做，垫片已加载，我看到三个（好的）：

```
require(["three"], function(three) {
    three.log();
}); 
```

但是，如果我结合上述内容，什么也不会发生，我会收到错误*Uncaught Error: Load timeout for modules: three*：

```
require(["one", "two", "three"], function(one, two, three) {
    one.log();
    two.log();
    three.log();
}); 
```

我仍然看到*all.js*加载到我的网络面板中。

怎么了？

# javascript - 如何使用 YouTube iframe 获得更精确的当前、视频和开始时间？

> ID：15576254
> 
> 赞同：4
> 
> 时间：2013-03-22T17:15:57.237
> 
> 标签：javascript, iframe, youtube, youtube-api

目前，我嵌入视频的开始时间和结束时间以秒为单位。但是，我知道可能比这更精确（当我转到 YouTube 中的播放列表时，我可以编辑每个视频的开始和结束时间，YouTube 允许我拖动播放器头部并显示毫秒 - 尽管当然，您不能按毫秒移动毫秒）。

我的应用程序需要精度，并且两者都`getCurrentTime`需要`seekTo`几秒钟作为参数。YouTube 如何做到更精确？1/4 秒的精度对我来说就足够了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T18:28:29.030

您可以使用浮点数指定秒的分数

我认为这个答案和这个例子可能有用

[Youtube API seekTo() 浮点数](https://stackoverflow.com/questions/14461176/youtube-api-seekto-in-float-seconds)

# c++ - “if”循环中的 C++ 循环错误

> ID：15576255
> 
> 赞同：-4
> 
> 时间：2013-03-22T17:15:59.403
> 
> 标签：c++

我的代码生成了一个异常。

```
X = x * 10;
Y = y * 10;

if ((pow(X, 2))+(pow(Y, 2)) <= 27225 and ((pow(X, 2))+(pow(Y, 2)) >= 1225)) 
```

用户将输入值`x`，`y`如果值不低，程序将继续。我已将 x 和 y 声明为上面的双精度数。这部分上面有代码，不是开始。

我将此代码作为我的其他`if`功能

```
if (((pow(X, 2))+(pow(Y, 2)) > 27225) or ((pow(X, 2))+(pow(Y, 2)) <1225))
{
      cout<<"\n\nThe values you have chosen for the centre points are to not compatible with our program. Please choose smaller values.";//new
      cout<<"\n\nIf you do not understand, please ask the programmer for further explanation.";
} 
```

但是，我根本无法让代码工作，因为没有施加限制，即使值太大/太小，它也会继续正常运行，谁能告诉我我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T17:18:05.743

我认为您的第一个`if`条件应该是检查它是否大于 1225 且小于 27225：

```
if ((pow(X, 2))+(pow(Y, 2)) <= 27225 && ((pow(X, 2))+(pow(Y, 2)) >= 1225))
//                              Here ^^ 
```

`X`正如您所拥有的，对于and的每个可能值都将满足条件`Y`；每个数字要么小于 27225，要么大于 1225。

对于第二个条件，只需执行以下操作`else`：

```
if ((pow(X, 2))+(pow(Y, 2)) <= 27225 && ((pow(X, 2))+(pow(Y, 2)) >= 1225)) {
  // Distance from origin is within range
} else {
  // Distance from origin is outside range
} 
```

请注意`or`和`and`不常用，因为它们是`||`和的替代标记`&&`。我建议坚持`||`并`&&`与大多数其他开发人员保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:25:03.493

From your coding, it doesn't look like you have defined the data type of X, Y. Instead of

```
X = x * 10;
Y = y * 10; 
```

Instead, try

```
 int X = x * 10;
 intY = y * 10;

if (((pow(X, 2))+(pow(Y, 2)) > 27225)) {
  cout<<"\n\nThe values you have chosen for the centre points are to not  compatible   with our program. Please choose smaller values.";//new
}
else if( ((pow(X, 2))+(pow(Y, 2)) <1225))
{
        cout<<"\n\nIf you do not understand, please ask the programmer for further  explanation.";
} 
```

This would give you the two different results as expected

# functional-programming - `val hash : 'a -> int` 是如何在 OCaml 中实现的？

> ID：15576260
> 
> 赞同：5
> 
> 时间：2013-03-22T17:16:22.550
> 
> 标签：functional-programming, ocaml

在 OCaml 中，`Hashtbl`可以`hash`对 int 进行任何操作

> Hashtbl.hash x 将非负整数与任何类型的任何值相关联。保证如果 x = y 或 Pervasives.compare xy = 0，则哈希 x = 哈希 y。此外，哈希总是终止，即使在循环结构上也是如此。

我的意思是，对于每个返回整数的对象`Java`，我们都有，Java 的 Hashtable 可以散列该整数。`hashCode()`

但是 OCaml 是如何实现散列的呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T17:41:07.010

这并不棘手。`Hashtbl.hash`只是以类似于垃圾收集器的方式遍历数据。它在链接结构中行进固定距离，从而避免在有循环时失败。它对所遇到的高级类型一无所知，它只是散列它所达到的原始值。

您可以在 OCaml 源代码分发中看到 byterun/hash.c 中的代码。

**更新**

我突然想到你可能一直在问*OCaml*`Hashtbl.hash`是如何实现的。答案是它不能在 OCaml 中实现（没有作弊），因为它违反了参数化。唯一可能的纯函数类型是返回常量值的函数。直觉是这样的函数不能使用关于其参数的任何信息，因为它是为所有可能的类型定义的。*`'a -> int`*

 *`Hashtbl.hash`是少数违反参数性的 OCaml 函数之一。它们存在于 OCaml 中是因为它们非常方便。另一个臭名昭著的是多态比较`compare`（和相关的`=`运算符）。*

# razor - 创建指向详细信息页面的链接

> ID：15576262
> 
> 赞同：0
> 
> 时间：2013-03-22T17:16:27.947
> 
> 标签：razor, asp.net-mvc-4

试图将输出从

```
@Html.DisplayFor(modelItem => item.Title) 
```

进入一个超链接，该链接将根据 Id 显示详细信息页面。

这是详细信息页面链接的标准代码。

```
@Html.ActionLink("Details", "Details", new { id=item.Id }) 
```

任何建议都将受到欢迎。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:17:10.777

@Html.ActionLink(item.Name, "Details", new {item.Id})

# svg - d3js 饼图 – 文本标签

> ID：15576266
> 
> 赞同：0
> 
> 时间：2013-03-22T17:16:40.643
> 
> 标签：svg, d3.js

我正在 d3 中创建一个饼图，并希望给定切片的名称和值出现在悬停时：

```
@graph.append('path')
      .attr('d', @arc)
      .style('fill', (svg) => @color(svg.data.value))
      .attr('class', 'pie-slice')
      .on('mouseover', @pieSliceMouseOver)
      .on('mouseout', @pieSliceMouseOut)
      .append('text')
      .style('stroke', 'black')
      .append('textPath')
      .text((svg) -> "#{svg.data.name}: #{svg.data.value}") 
```

这将输出以下内容（对于一块馅饼）

```
<path d="M-101.9924541587831,53.12757565208981A115,115 0 0,1 -2.1124459603436008e-14,-115L0,0Z" style="fill: #37823e;" class="pie-slice">
  <text style="stroke: #000000;">
    <textPath>401K: 82.28</textPath>
  </text>
</path> 
```

但是文本本身没有显示。如果我在 Chrome 中突出显示路径节点，浏览器会正确突出显示切片，但向下移动到文本，则节点不可见。

mouseover 和 mouseout 处理程序按设计工作，但文本根本不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:12:41.927

对于基本工具提示，您只需要将`title`元素附加到要在鼠标悬停时显示标签的元素。您甚至不需要为此添加事件处理程序，因为浏览器本身就提供了此功能。

如果您需要更高级的东西，您可以使用第三方库，例如[Tipsy （](http://archive.plugins.jquery.com/project/tipsy)[此处](http://bl.ocks.org/ilyabo/1373263)为示例）。

# opengl - 编译时的OpenGL问题

> ID：15576268
> 
> 赞同：2
> 
> 时间：2013-03-22T17:16:48.283
> 
> 标签：opengl, ubuntu, compilation, makefile, glsl

我正在尝试从项目中编译示例，以下代码是makefile：

```
CC = g++
ifeq ($(shell sw_vers 2>/dev/null | grep Mac | awk '{ print $$2}'),Mac)
    CFLAGS = -g -DGL_GLEXT_PROTOTYPES -I./include/ -I/usr/X11/include -DOSX
    LDFLAGS = -framework GLUT -framework OpenGL -L./lib/mac/ \
        -L"/System/Library/Frameworks/OpenGL.framework/Libraries" \
        -lGL -lGLU -lm -lstdc++ -lGLEW -lfreeimage 
else
    CFLAGS = -g -DGL_GLEXT_PROTOTYPES -I./include/ -I/usr/X11R6/include -I/sw/include \
                     -I/usr/sww/include -I/usr/sww/pkg/Mesa/include
    LDFLAGS = -L./lib/nix -L/usr/X11R6/lib -L/sw/lib -L/usr/sww/lib \
                        -L/usr/sww/bin -L/usr/sww/pkg/Mesa/lib -lglut -lGLU -lGL -lX11 -lGLEW -lfreeimage
endif

RM = /bin/rm -f 

all: mytest3
mytest3: mytest3.o shaders.o shaders.h geometry3.h
    $(CC) $(CFLAGS) -o mytest3 shaders.o mytest3.o $(INCFLAGS) $(LDFLAGS) 
mytest3.o: mytest3.cpp shaders.h geometry3.h
    $(CC) $(CFLAGS) $(INCFLAGS) -c mytest3.cpp
shaders.o: shaders.cpp
    $(CC) $(CFLAGS) $(INCFLAGS) -c shaders.cpp
clean: 
    $(RM) *.o mytest3 *.png 
```

所以我尝试了：“make”，我得到了：

```
$ make
g++ -g -DGL_GLEXT_PROTOTYPES -I./include/ -I/usr/X11R6/include -I/sw/include -I/usr/sww/include -I/usr/sww/pkg/Mesa/include -o mytest3 shaders.o mytest3.o  -L./lib/nix -L/usr/X11R6/lib -L/sw/lib -L/usr/sww/lib -L/usr/sww/bin -L/usr/sww/pkg/Mesa/lib -lglut -lGLU -lGL -lX11 -lGLEW -lfreeimage                                                                                                                                                             
/usr/bin/ld: error: no se puede abrir /usr/lib/gcc/x86_64-linux-gnu/4.4.7/../../../x86_64-linux-gnu/libGL.so: No existe el archivo o el directorio                                                                              
shaders.cpp:37: error: undefined reference to 'glGetProgramiv'                                                                                                                                                                  
shaders.cpp:39: error: undefined reference to 'glGetProgramInfoLog'                                                                                                                                                             
shaders.cpp:46: error: undefined reference to 'glGetShaderiv'                                                                                                                                                                   
shaders.cpp:48: error: undefined reference to 'glGetShaderInfoLog'                                                                                                                                                              
shaders.cpp:57: error: undefined reference to 'glCreateShader'                                                                                                                                                                  
shaders.cpp:63: error: undefined reference to 'glShaderSource'                                                                                                                                                                  
shaders.cpp:64: error: undefined reference to 'glCompileShader'                                                                                                                                                                 
shaders.cpp:65: error: undefined reference to 'glGetShaderiv'                                                                                                                                                                   
shaders.cpp:75: error: undefined reference to 'glCreateProgram'                                                                                                                                                                 
shaders.cpp:77: error: undefined reference to 'glAttachShader'                                                                                                                                                                  
shaders.cpp:78: error: undefined reference to 'glAttachShader'                                                                                                                                                                  
shaders.cpp:79: error: undefined reference to 'glLinkProgram'                                                                                                                                                                   
shaders.cpp:80: error: undefined reference to 'glGetProgramiv'                                                                                                                                                                  
shaders.cpp:81: error: undefined reference to 'glUseProgram'                                                                                                                                                                    
geometry3.h:72: error: undefined reference to 'glBindBuffer'                                                                                                                                                                    
geometry3.h:73: error: undefined reference to 'glBufferData'                                                                                                                                                                    
geometry3.h:74: error: undefined reference to 'glVertexPointer'                                                                                                                                                                 
geometry3.h:75: error: undefined reference to 'glEnableClientState'                                                                                                                                                             
geometry3.h:76: error: undefined reference to 'glBindBuffer'                                                                                                                                                                    
geometry3.h:77: error: undefined reference to 'glBufferData'
geometry3.h:78: error: undefined reference to 'glColorPointer'
geometry3.h:79: error: undefined reference to 'glEnableClientState'
geometry3.h:80: error: undefined reference to 'glBindBuffer'
geometry3.h:81: error: undefined reference to 'glBufferData'
geometry3.h:101: error: undefined reference to 'glGenTextures'
geometry3.h:103: error: undefined reference to 'glBindBuffer'
geometry3.h:104: error: undefined reference to 'glBufferData'
geometry3.h:105: error: undefined reference to 'glActiveTexture'
geometry3.h:106: error: undefined reference to 'glEnable'
geometry3.h:107: error: undefined reference to 'glTexCoordPointer'
geometry3.h:108: error: undefined reference to 'glEnableClientState'
geometry3.h:110: error: undefined reference to 'glBindTexture'
geometry3.h:112: error: undefined reference to 'glTexImage2D'
geometry3.h:113: error: undefined reference to 'glTexParameterf'
geometry3.h:114: error: undefined reference to 'glTexParameterf'
geometry3.h:115: error: undefined reference to 'glTexParameteri'
geometry3.h:116: error: undefined reference to 'glTexParameteri'
geometry3.h:120: error: undefined reference to 'glGetUniformLocation'
geometry3.h:121: error: undefined reference to 'glUniform1i'
geometry3.h:122: error: undefined reference to 'glGetUniformLocation'
geometry3.h:130: error: undefined reference to 'glVertexPointer'
geometry3.h:131: error: undefined reference to 'glEnableClientState'
geometry3.h:147: error: undefined reference to 'glColorPointer'
geometry3.h:156: error: undefined reference to 'glVertexPointer'
geometry3.h:159: error: undefined reference to 'glColorPointer'
geometry3.h:162: error: undefined reference to 'glDrawElements'
geometry3.h:170: error: undefined reference to 'glVertexPointer'
geometry3.h:175: error: undefined reference to 'glColorPointer'
geometry3.h:178: error: undefined reference to 'glActiveTexture'
geometry3.h:179: error: undefined reference to 'glEnable'
geometry3.h:180: error: undefined reference to 'glBindTexture'
geometry3.h:183: error: undefined reference to 'glTexCoordPointer'
geometry3.h:186: error: undefined reference to 'glDrawElements'
geometry3.h:199: error: undefined reference to 'glDrawElements'
mytest3.cpp:54: error: undefined reference to 'glGetFloatv'
mytest3.cpp:67: error: undefined reference to 'glClear'
mytest3.cpp:78: error: undefined reference to 'glUniform1i'
mytest3.cpp:79: error: undefined reference to 'glUniform1i'
mytest3.cpp:82: error: undefined reference to 'glUniform1i'
mytest3.cpp:89: error: undefined reference to 'glMatrixMode'
mytest3.cpp:92: error: undefined reference to 'glPushMatrix'
mytest3.cpp:93: error: undefined reference to 'glTranslatef'
mytest3.cpp:95: error: undefined reference to 'glPopMatrix'
mytest3.cpp:98: error: undefined reference to 'glPushMatrix'
mytest3.cpp:98: error: undefined reference to 'glTranslatef'
mytest3.cpp:98: error: undefined reference to 'glPopMatrix'
mytest3.cpp:101: error: undefined reference to 'glPushMatrix'
mytest3.cpp:102: error: undefined reference to 'glTranslatef'
mytest3.cpp:104: error: undefined reference to 'glPopMatrix'
mytest3.cpp:107: error: undefined reference to 'glPushMatrix'
mytest3.cpp:108: error: undefined reference to 'glTranslatef'
mytest3.cpp:110: error: undefined reference to 'glPopMatrix'
mytest3.cpp:136: error: undefined reference to 'glUniform3fv'
mytest3.cpp:137: error: undefined reference to 'glUniform4fv'
mytest3.cpp:138: error: undefined reference to 'glUniform4fv'
mytest3.cpp:139: error: undefined reference to 'glUniform4fv'
mytest3.cpp:142: error: undefined reference to 'glUniform4fv'
mytest3.cpp:145: error: undefined reference to 'glUniform1fv'
mytest3.cpp:155: error: undefined reference to 'glColor3f'
mytest3.cpp:164: error: undefined reference to 'glRotatef'
mytest3.cpp:165: error: undefined reference to 'glRotatef'
mytest3.cpp:182: error: undefined reference to 'glFlush'
mytest3.cpp:218: error: undefined reference to 'glMatrixMode'
mytest3.cpp:219: error: undefined reference to 'glLoadIdentity'
mytest3.cpp:232: error: undefined reference to 'glMatrixMode'
mytest3.cpp:233: error: undefined reference to 'glLoadIdentity'
mytest3.cpp:253: error: undefined reference to 'glReadBuffer'
mytest3.cpp:254: error: undefined reference to 'glReadPixels'
mytest3.cpp:303: error: undefined reference to 'glViewport'
mytest3.cpp:304: error: undefined reference to 'glMatrixMode'
mytest3.cpp:305: error: undefined reference to 'glLoadIdentity'
mytest3.cpp:317: error: undefined reference to 'glClearColor'
mytest3.cpp:321: error: undefined reference to 'glLoadIdentity'
mytest3.cpp:336: error: undefined reference to 'glCreateProgram'
mytest3.cpp:339: error: undefined reference to 'glGetProgramiv'
mytest3.cpp:342: error: undefined reference to 'glGetUniformLocation'
mytest3.cpp:343: error: undefined reference to 'glGetUniformLocation'
mytest3.cpp:355: error: undefined reference to 'glGenBuffers'
mytest3.cpp:369: error: undefined reference to 'glEnable'
mytest3.cpp:370: error: undefined reference to 'glDepthFunc'
collect2: ld returned 1 exit status
make: *** [mytest3] Error 1 
```

我安装了过剩：

```
$ find /usr -name glut.h
/usr/local/cuda-5.0/extras/CUPTI/include/GL/glut.h
/usr/local/cuda-5.0/samples/common/inc/GL/glut.h
/usr/include/GL/glut.h

$ locate libglut
/usr/lib/libglut.so
/usr/lib/gcc/x86_64-linux-gnu/4.4/libglut.so
/usr/lib/x86_64-linux-gnu/libglut.a
/usr/lib/x86_64-linux-gnu/libglut.so
/usr/lib/x86_64-linux-gnu/libglut.so.3
/usr/lib/x86_64-linux-gnu/libglut.so.3.9.0 
```

所以我不知道为什么编译器正在搜索“gcc”路径，它应该可以正常工作......

我也试过：

```
sudo ln -s /usr/lib/x86_64-linux-gnu/libglut.so /usr/lib/gcc/x86_64-linux-gnu/4.4.7/libglut.so 
```

但仍然无法正常工作。

我在 ubuntu 12.10 上，我首先安装了：

```
sudo apt-get install freeglut3-dev glew-utils libglew1.6-dev libfreeimage-dev
sudo apt-get install build-essential 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:42:06.717

第一个错误：

> /usr/bin/ld: 错误: 没有/usr/lib/gcc/x86_64-linux-gnu/4.4.7/../../../x86_64-linux-gnu/libGL.so: 没有Existe el archivo o el directory

您缺少 libGL。确保您的驱动程序/台面已正确安装。尝试

```
sudo apt-get install libgl1-mesa-dev 
```

# ios - 如何通过自定义 URL 将“属性列表”对象传递给 iOS 应用程序？

> ID：15576271
> 
> 赞同：1
> 
> 时间：2013-03-22T17:16:59.237
> 
> 标签：ios, objective-c, uiapplicationdelegate, uiapplication

iOS 大师，

我正在创建一个响应自定义 URL 的 iOS 应用程序。在阅读处理自定义 URL 的文档（此处的 API 文档：[application:openURL:sourceApplication:annotation:）](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application%3aopenURL%3asourceApplication%3aannotation%3a)时，我看到第 4 个参数是一个注释，定义如下：

> *注释*
> 由源应用程序提供的属性列表对象，用于将信息传递给接收应用程序。

但是，当我查看打开自定义 URL 的方法（此处的 API 文档：[openURL:）](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/openURL%3a)时，无法定义“属性列表”对象。您只能指定 URL（它本身可能在查询字符串中有名称/值参数）。

**除了**URL 之外，如何将“属性列表”对象传递给应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:27:27.640

[注释选项适用于当用户使用UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010403)引用由该应用创建的文档时打开的应用。

如果您希望从 UIWebView 中的自定义 URL 方案启动应用程序，那么这与您无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-05T18:55:40.127

要完成@Richard 回答的第一部分，请在调用 presentPreviewAnimated 之前使用有效的属性列表设置 UIDocumentInteractionController 的注释属性：

```
NSURL *fURL = [[NSBundle mainBundle] URLForResource:@"Document" withExtension:@"pdf"];
if (fURL) 
{
    UIDocumentInteractionController *dIC;
    dIC = [UIDocumentInteractionController interactionControllerWithURL: fURL];
    dIC.annotation = @{@"foo": @"bar"};
    [dIC setDelegate:self];
    [dIC presentPreviewAnimated:YES];
} 
```

# spring-3 - Spring 3.1：启动时出现 BeanDefinitionStoreException

> ID：15576272
> 
> 赞同：2
> 
> 时间：2013-03-22T17:17:03.950
> 
> 标签：spring-3, weblogic11g

**微软视窗 7 专业版**

**网络逻辑 11g**

**Java 1.6（带有weblogic的版本）**

**春天 3.1**

我使用 WebLogic 11g 和 Spring 3.1 在 Windows XP Professional PC 上进行 Java Webapp 开发。一切都很好。

然后我不得不迁移到一台运行 Windows 7 Professional 的新计算机。

我想我可能错过了设置一切以使其再次正常工作的步骤。

我的 webapp 是“ACME”，acme.war

当我尝试导航到计算机上的 web 应用程序时，出现以下错误：

**weblogic.application.ModuleException：[HTTP：101216]Servlet：“acme”无法在 Web 应用程序启动时预加载：“acme.war”。org.springframework.beans.factory.BeanDefinitionStoreException：从 ServletContext 资源 [/WEB-INF/acme-servlet.xml] 解析 XML 文档时出现意外异常；嵌套异常是 java.lang.NoSuchMethodError: org.springframework.beans.MutablePropertyValues.add (Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/beans/MutablePropertyValues;**

**这是完整的堆栈跟踪：**

```
weblogic.application.ModuleException: [HTTP:101216]Servlet: 
"acme" failed to preload on startup in Web application: "acme.war".
org.springframework.beans.factory.BeanDefinitionStoreException: 
Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/acme-servlet.xml]; 
nested exception is java.lang.NoSuchMethodError: 
org.springframework.beans.MutablePropertyValues.add
(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/beans/MutablePropertyValues;

        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader
.java:143)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader
.java:178)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader
.java:149)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)

        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplica
tionContext.java:123)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:4
22)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:402)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:316)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:282)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:126)
        at javax.servlet.GenericServlet.init(GenericServlet.java:241)
        at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
        at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)
        at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)
        at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)
        at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:539)
        at weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1981)
        at weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1955)
        at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1874)
        at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3154)
        at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1518)
        at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:484)
        at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
        at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
        at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)
        at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247)
        at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
        at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
        at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)
        at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:671)
        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
        at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:212)
        at weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:44)
        at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)
        at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
        at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569)
        at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)
        at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)
        at weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:149)
        at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323)
        at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)
        at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)
        at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)
        at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)
        at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCa
llbackDeliverer.java:195)
        at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallback
Deliverer.java:13)
        at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliv
erer.java:68)
        at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:545)
        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:221)
Caused by: java.lang.NoSuchMethodError: org.springframework.beans.MutablePropertyValues.add(Ljava/lang/String;Ljava/lang/Object;)L
org/springframework/beans/MutablePropertyValues;
        at org.springframework.web.servlet.config.ResourcesBeanDefinitionParser.registerResourceHandler(ResourcesBeanDefinitionPar
ser.java:93)
        at org.springframework.web.servlet.config.ResourcesBeanDefinitionParser.parse(ResourcesBeanDefinitionParser.java:50)
        at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:69)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java
:1297)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java
:1287)
        at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDoc
umentReader.java:135)
        at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinition
DocumentReader.java:92)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:507)

        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:398)
        ... 58 more

        at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1520)
        at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:484)
        at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
        at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
        Truncated. see log file for complete stacktrace
Caused By: java.lang.NoSuchMethodError: org.springframework.beans.MutablePropertyValues.add(Ljava/lang/String;Ljava/lang/Object;)L
org/springframework/beans/MutablePropertyValues;
        at org.springframework.web.servlet.config.ResourcesBeanDefinitionParser.registerResourceHandler(ResourcesBeanDefinitionPar
ser.java:93)
        at org.springframework.web.servlet.config.ResourcesBeanDefinitionParser.parse(ResourcesBeanDefinitionParser.java:50)
        at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:69)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java
:1297)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java
:1287)
        Truncated. see log file for complete stacktrace 
```

**这是我的 acme-servlet.xml 文件的副本：**

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:mvc="http://www.springframework.org/schema/mvc"
  xmlns:util="http://www.springframework.org/schema/util"
  xsi:schemaLocation="http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util-3.1.xsd">

  <context:component-scan base-package="com.acme.controller" />

  <mvc:resources mapping = "/**" location = "/,file:/apps1/bea/user_projects/domains/DBS/common/"/>
  <mvc:annotation-driven/>

  <!-- define the properties file to use -->
  <util:properties id = "messages" location="classpath:/messages.properties" />

  <bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name = "prefix" value = "/jsp/"/>
    <property name = "suffix" value = ".jsp"/>
  </bean>

  <bean name="af" class="com.acme.controller.security.AuthenticationFilter"/>

  <!-- Configure the multipart resolver -->
  <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <!-- one of the properties available; the maximum file size in bytes -->
    <property name="maxUploadSize" value="100000000"/>
  </bean>
</beans> 
```

**这是我在 acme.war 内的 war/WEB-INF/lib 中的文件列表：**

```
aopalliance-1.0.jar
commons-beanutils-1.8.2.jar
commons-collections-3.2.1.jar
commons-digester-2.0.jar
commons-fileupload-1.2.2.jar
commons-io-2.4.jar
commons-jexl-2.0.1.jar
commons-lang-2.5.jar
commons-logging-1.1.1.jar
commons-validator.jar
dom4j-1.6.1.jar
geronimo-stax-api_1.0_spec-1.0.jar
hibernate-validator-4.3.0.Final.jar
jackson-core-asl-1.9.7.jar
jackson-mapper-asl-1.9.7.jar
jboss-logging-3.1.0.CR2.jar
jstl-api-1.2-rev-1.jar
jstl-impl-1.2.jar
jta-1.1.jar
log4j-1.2.16.jar
mail.jar
poi-3.7.jar
poi-ooxml-3.7.jar
poi-ooxml-schemas-3.7.jar
quartz-1.8.0.jar
quartz-all-1.8.0.jar
servlet-api.jar
slf4j-api-1.5.10.jar
slf4j-log4j12-1.5.10.jar
spring-aop-3.0.6.RELEASE.jar
spring-asm-3.1.1.RELEASE.jar
spring-beans-3.1.1.RELEASE.jar
spring-context-3.1.1.RELEASE.jar
spring-context-support-3.1.1.RELEASE.jar
spring-core-3.1.1.RELEASE.jar
spring-expression-3.1.1.RELEASE.jar
spring-jdbc-3.0.6.RELEASE.jar
spring-ldap-core-1.3.1.RELEASE.jar
spring-security-acl-3.1.0.RELEASE.jar
spring-security-config-3.1.0.RELEASE.jar
spring-security-core-3.1.0.RELEASE.jar
spring-security-crypto-3.1.0.RELEASE.jar
spring-security-ldap-3.1.0.RELEASE.jar
spring-security-taglibs-3.1.0.RELEASE.jar
spring-security-web-3.1.0.RELEASE.jar
spring-tx-3.0.6.RELEASE.jar
spring-web-3.1.1.RELEASE.jar
spring-webmvc-3.1.1.RELEASE.jar
stax-1.2.0.jar
stax-api-1.0.1.jar
urlrewritefilter-4.0.3.jar
validation-api-1.0.0.GA.jar
xml-apis-1.0.b2.jar
xmlbeans-2.3.0.jar 
```

我有我的 JAVA_HOME envir 变量指向 C:\Oracle\Middleware\jdk160_29 （这是与 weblogic 11g 安装一起）

我的 PATH 变量中有该路径。

我的系统范围的 Windows CLASSPATH 只是一个“。”

提前感谢您的任何想法

史蒂夫

* * *

## 更新

我创建了一个 weblogic.xml 文件，将它放在 war_root/WEB-INF/ 中，我收到了这个错误消息

```
<Mar 25, 2013 12:12:42 PM EDT> <Error> <Deployer> <BEA-149202> <Encountered an exception while attempting to commit the 1 task for
 the application '_appsdir_acme_war'.>
<Mar 25, 2013 12:12:42 PM EDT> <Warning> <Deployer> <BEA-149004> <Failures were detected while initiating deploy task for applicat
ion '_appsdir_acme_war'.>
<Mar 25, 2013 12:12:42 PM EDT> <Warning> <Deployer> <BEA-149078> <Stack trace for message 149004
weblogic.application.ModuleException: [HTTP:101216]Servlet: "acme" failed to preload on startup in Web application: "acme.war".
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext reso
urce [/WEB-INF/acme-servlet.xml]; nested exception is java.lang.ClassCastException: weblogic.xml.jaxp.RegistryDocumentBuilderFactor
y cannot be cast to javax.xml.parsers.DocumentBuilderFactory 
```

**我猜我的 weblogic.xml 是关闭的，这里是：**

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:wls="http://www.bea.com/ns/weblogic/90" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd http://www.bea.com/ns/weblogic/90 http://www.bea.com/ns/weblogic/90/weblogic-web-app.xsd">
  <!-- Use the version of Spring in WEB-INF/lib, not WebLogic's -->
  <wls:container-descriptor>
    <wls:prefer-web-inf-classes>true</wls:prefer-web-inf-classes>
  </wls:container-descriptor>
</wls:weblogic-web-app> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T23:35:31.543

WLS 11g 安装附带**Spring 3.0.5**。所以 Spring 3.0.5 相关的 jar 文件默认在服务器类路径中。因为服务器类加载器是应用程序类加载器的父类加载器，所以 Spring 3.0.5 是运行时使用的类加载器。如果您使用任何在 Spring 3.1 中实现但在 Spring 3.0.5 中不可用的方法，您将得到一个`NoSuchMethodError`.

解决方案是在您的 weblogic.xml 中添加以下部分

```
<wls:container-descriptor>
    <wls:prefer-web-inf-classes>true</wls:prefer-web-inf-classes>
</wls:container-descriptor> 
```

# c# - 在可编辑组合框上使用 LostFocus 事件时的消息框

> ID：15576274
> 
> 赞同：1
> 
> 时间：2013-03-22T17:17:09.553
> 
> 标签：c#, combobox, messagebox

将 LostFocus 事件用于可编辑组合框时遇到问题。

```
private void comboBox8_LostFocus(object sender, RoutedEventArgs e)
    {
        ...
            else if (8int <= 7int && 8int >= 100)
            {
                MessageBox.Show("Error description", "Error!", MessageBoxButton.OK, MessageBoxImage.Information);
            }
            else
            ...
    } 
```

一切正常，除了消息框显示，即使我用鼠标单击组合框文本字段进行编辑。如果我使用前一个字段中的“选项卡”，则没有消息框。但是直接鼠标点击会导致错误的消息框。我只需要在使用“选项卡”离开该组合框或在其他地方单击鼠标（丢失焦点）时才显示它。任何人都可以帮我一个建议吗？我找不到类似的情况。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:33:08.513

你想听的`TextBox`部分，`ComboBox` `LostFocus`而不是。

```
 private void comboBox8_Loaded(object sender, RoutedEventArgs e)
        {
            TextBox tb = (TextBox)(sender as ComboBox).Template.FindName("PART_EditableTextBox", (sender as ComboBox));
            if (tb != null)
                tb.LostFocus += new RoutedEventHandler(tb_LostFocus);
        }

        void tb_LostFocus(object sender, RoutedEventArgs e)
        {
            ...
            else if (8int <= 7int && 8int >= 100)
            {
                MessageBox.Show("Error description", "Error!", MessageBoxButton.OK, MessageBoxImage.Information);
            }
            else
            ...
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:51:13.750

哦，这对我有用：

```
private void comboBox8_LostFocus(object sender, RoutedEventArgs e)
        {
        ...
        else if (8int <= 7int && 8int >= 100)
        {
            if (!comboBox8.IsKeyboardFocusWithin)
                {
                    MessageBox.Show("Error description", "Error!", MessageBoxButton.OK, MessageBoxImage.Information);
                }
        }
        else
        ...
        } 
```

谢谢！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-30T07:25:24.827

可能还有另一种方法，并不是说上面的方法没有用:) 从 RoutedEventArgs 检查源和原始源。

如果事件从控件内部发生，则它是一个内部的 lostfocus 事件（组合框有多个内部控件）并且源和原始源将具有相同的类型。

这段代码对我来说很好。当组合框实际上失去焦点时，我“做某事”。

```
**private void TimePicker_LostFocus(object sender, System.Windows.RoutedEventArgs e)
{
    if (e.OriginalSource.GetType().Name != e.Source.GetType().Name)
    { 
        Validate();
    }
}** 
```

希望它有帮助

/T

# c# - 按多列对 C# 列表进行排序

> ID：15576282
> 
> 赞同：4
> 
> 时间：2013-03-22T17:17:31.853
> 
> 标签：c#, wpf, list, sorting, combobox

我有一个关于按多列对列表进行排序的问题。在下面的示例中，即使我排序为 show `None, A First Description, B Second...`，列表仍然按照插入的顺序打印。

```
List<MySample> samples = new List<MySample>();

samples.Add(new MySample { SortOrder = 1, Data = "A First Description", Description = "A First Description" });
samples.Add(new MySample { SortOrder = 1, Data = "C Third Description", Description = "C Third Description" });
samples.Add(new MySample { SortOrder = 1, Data = "B Second Description", Description = "B Second Description" });
samples.Add(new MySample { SortOrder = 0, Data = "None", Description = "None" });
samples.OrderBy(a => a.SortOrder).ThenBy(a => a.Description).ToList();

foreach (var item in samples)
{
    Console.WriteLine(item);
}

public class MySample
{
    public int SortOrder { get; set; }
    public string Description { get; set; }
    public object Data { get; set; }
} 
```

如果我更改我的代码以执行以下操作，那么它会以所需的顺序打印。

```
samples = samples.OrderBy(a => a.SortOrder).ThenBy(a => a.Description).ToList(); 
```

可以在不分配的情况下完成订购（如上）吗？

仅供参考，此示例不是实际代码。我需要将这个列表数据绑定到一个`ComboBox`in`WPF`通过代码后面 using `FrameworkElementFactory`。

谢谢你的帮助！

**用我的方法更新：**

```
var collectionView = CollectionViewSource.GetDefaultView(<My list to be sorted>);
collectionView.SortDescriptions.Add(new SortDescription("SortOrder", ListSortDirection.Ascending));
collectionView.SortDescriptions.Add(new SortDescription("Description", ListSortDirection.Ascending)); 
```

以上在 UI 中完成了技巧。我感谢所有人的快速回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:20:33.197

原因是`OrderBy`它不会转换被调用的对象，而是返回一个新的结果。你应该像这样使用它：

```
samples = samples.OrderBy(a => a.SortOrder).ThenBy(a => a.Description).ToList(); 
```

这就是`OrderBy`函数的工作方式。为什么你需要它以另一种方式工作，尤其是对于几个额外的字符。

您*可以*通过创建自己的扩展方法来使其工作，除了对对象的引用而不是创建新结果之外，这些方法执行相同的操作，但这根本不值得麻烦。

* * *

如果您需要一些东西，您可以将 LINQ 包装在一个扩展方法中，如下所示：

```
public static void MyOrderBy(this List<MySample> list)
{
    list = list.OrderBy(a => a.SortOrder).ThenBy(a => a.Description).ToList();
} 
```

并像这样使用它：

```
samples.MyOrderBy(); 
```

这只是一个想法，我不知道它是否会起作用，或者它是否是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:24:49.303

Since you have a `List`, you can do it the old school way:

```
samples.Sort((s1, s2) => {
    int compare = s1.SortOrder.CompareTo(s2.SortOrder);
    if (compare != 0) return compare;
    compare = s1.Description.CompareTo(s2.Description);
    return compare;
}); 
```

But I'd probably stick with LINQ. Much easier to read.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:31:13.847

您可以将示例更改为：

```
//other code above...
samples.Add(new MySample { SortOrder = 0, Data = "None", Description = "None" });
foreach (var item in samples.OrderBy(a => a.SortOrder).ThenBy(a => a.Description))
//other code below... 
```

请注意，`samples`排序不会改变 - 仅设置特定循环的顺序。

如果这些都不可接受，请更详细地说明您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:34:14.203

只是作为替代方案，“请不要这样做，除非没有其他适合”路线，您*可以*添加一个新属性以对合并进行排序：

```
class NoReallyThisIsACodeSmell
{
    public string SortPlusDescription
    {
           return string.Concat(SortOrder, Description);
    }
} 
```

# c - C：读取中的错误地址

> ID：15576285
> 
> 赞同：0
> 
> 时间：2013-03-22T17:18:03.377
> 
> 标签：c, io

我正在努力完成一项非常简单的任务，即在打开文件后读取文件。使用 perror，我看到报告的错误是“错误地址”。这是什么意思，我该如何解决？

```
int freqCheck(char * fileName) {
    /*Allocate buffer*/
    struct stat fileStat;
    stat(fileName, &fileStat);
    int size = fileStat.st_size + 1;
    void * buf = malloc(size);
    memset(buf, 0, sizeof(buf));
    if(buf = NULL) {
        printf("An error has occurred while allocating memory\n");
        return 0;
    }/*End if*/

    /*Read file*/
    int fd = open(fileName, O_RDONLY); 
    if(fd < 0) {
        perror("Open error");
        return 0;
    }/*End if*/
    ssize_t num;
    while((num = read(fd, buf, size - 1)) > 0) {
        printf("num = %d\n", num);  
    }/*End while*/
    if(num < 0) {
        perror("Read error");
        return 0;
    } else if(num == 0) {
        printf("Read worked!");
    }/*End else if*/

}/*End freqCheck*/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T17:19:56.437

```
if(buf = NULL) { 
```

应该

```
if(buf == NULL) { 
```

你的编译器应该警告你这个常见的错误。不要忽视它的警告信息！（如果它没有警告你然后打开警告，统计！）

# ruby-on-rails - 自定义 Rails 脚手架生成器视图的简单方法？

> ID：15576286
> 
> 赞同：5
> 
> 时间：2013-03-22T17:18:04.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, scaffolding, ruby-on-rails-4

我知道如何[在 Rails 中创建一个新的生成器](http://guides.rubyonrails.org/generators.html)。但是，我只是想稍微调整一下视图。是否有捷径可寻？我想我可以进入 Rails 所在操作系统的目录并修改这些文件（我认为这很容易）。但是这些更改将适用于每个 Rails 项目，而不仅仅是我目前关心的那个。当我（经常）更新 Rails 时，它会被抹去。

使用 Rails 3.2.13，但如果有帮助，很高兴升级到 4.0 beta。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:50:54.490

您可以在[此 RailsCast](http://railscasts.com/episodes/216-generators-in-rails-3?view=asciicast)中找到答案，特别注意“自定义模板”部分。您在 Rails 根`lib/`目录中创建文件，因此它不会适用于每个应用程序，仅适用于您当前的应用程序，并且它将独立于 Rails 版本。

# c++ - char* const args[] 定义

> ID：15576291
> 
> 赞同：2
> 
> 时间：2013-03-22T17:18:12.637
> 
> 标签：c++, c, linux, constants

我在这里无法理解 const 的用法：

```
char* const args[]; 
```

这是否意味着 args 不能指向新地址？它与以下有何不同：

```
const char* args[]; 
```

此外，我正在尝试遍历此列表并使用单个 for 循环语句将值附加到字符串：

```
string t_command;
for(char** t= args; (*t) != NULL ; t++ && t_command.append(*t + " ")) {} 
```

我没有在这里做某事，我不知道是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T17:23:53.497

```
char* const args[]; 
```

`args`是一个数组。数组中的每个元素都是指向 的指针`char`。这些指针是`const`. 您不能修改数组的元素以指向其他任何地方。但是，您可以修改`char`它们指向的 s。

```
const char* args[]; 
```

`args`仍然是一个数组。数组中的每个元素仍然是指向`char`. 但是，指针*不是* `const`。您可以修改数组的元素以指向其他地方。但是，您*不能*修改`char`它们指向的 s。

图表时间：

```
Args:
┌───┬───┬───┬───┬───┬───┐
│   │   │   │   │   │   │  // In the first version, these pointers are const
└─╂─┴─╂─┴─╂─┴─╂─┴─╂─┴─╂─┘
  ┃   ┗━┓ ┗━┅ ┗━┅ ┗━┅ ┗━┅
  ▼     ▼
┌───┐ ┌───┐
│ c │ │ c │                // In the second version, these characters are const
└───┘ └───┘ 
```

通常，当您有一个指向字符的指针时，这些字符本身就是数组的一部分（C 风格的字符串），在这种情况下，它看起来像这样：

```
Args:
┌───┬───┬───┬───┬───┬───┐
│   │   │   │   │   │   │  // In the first version, these pointers are const
└─╂─┴─╂─┴─╂─┴─╂─┴─╂─┴─╂─┘
  ┃   ┗━━━━━━━┓   ┗━┅ ┗━┅
  ▼           ▼
┌───┬───┬┄  ┌───┬───┬┄
│ c │ c │   │ c │ c │      // In the second version, these characters are const
└───┴───┴┄  └───┴───┴┄ 
```

至于遍历数组，您正试图将`args`数组视为空终止。大多数数组不是这样工作的。您应该使用数组中的索引进行迭代。

另请注意，您不能将数组和字符串文字一起添加（如 中`*t ++ " "`）。将一侧转换为 a`std::string`以使其更容易。

所以如果`N`是 的大小`args`：

```
for (size_t i = 0; i < N; i++) {
  t_command.append(std::string(args[i]) + " "))
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:23:29.973

```
char* const args[]; 
```

`args`是一个指向 的常量指针数组`char`。指针不能修改，但它们指向的东西可以。

```
const char* args[]; 
```

`args`是指向 的指针数组`const char`。指针可以修改，但它们指向的东西不能。

如果你想要一个指向 的第一个元素的指针`char* const args[];`，那么它的类型必须是一个指向常量指针的指针：

```
for (char * const * t = args; *t; ++t) {
    t_command.append(*t + " ");
} 
```

# matlab - 从一维向量创建行长 L 的矩阵

> ID：15576292
> 
> 赞同：1
> 
> 时间：2013-03-22T17:18:15.453
> 
> 标签：matlab, matrix, vectorization

假设我们有以下一维数组

```
x(1),x(2),......x(n) 
```

其中n是样本的长度，假设我们要使用以下规则创建由这些元素组成的矩阵，使用一些参数L，我们的二维数组由以下元素组成

```
(1 row) x(1),x(2),.....x(l)
(2 row)  x(2),x(3),.....x(l+1)
(3 row) x(3),x(4),.......x(l+2)
.
.
.
.(m row)  x(m),x(m+1).... x(n) 
```

我试过以下代码

```
function [ x ]=create_matrix(b,n,L)
for i=1:n/2 
    x(i,end)=b(i:L);
end; 
```

其中 b 是输入一维向量，n 是长度（b），L 是矩阵行长度，但是当我运行此代码时，出现以下错误

```
??? Undefined function or variable "x".

Error in ==> create_matrix at 4
    x(i,end)=b(i:L); 
```

也许在matlab中声明二维数组有问题，或者其他什么？实际上我知道实现起来很简单，但我自己做不到，请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:29:34.347

代码：

```
function [ x ]=create_matrix(b,l)
    n = length(b);
    m = n-l+1;
    x = zeros(m,l);
    for i=1:m
        x(i,:)=b(i:i+l-1);
    end;
end 
```

例子：

```
EDU>> create_matrix(1:10,4)

ans =

     1     2     3     4
     2     3     4     5
     3     4     5     6
     4     5     6     7
     5     6     7     8
     6     7     8     9
     7     8     9    10 
```

此外，这个矩阵是一个翻转的托普利兹矩阵。所以同样的事情可以通过以下方式实现：

```
fliplr(toeplitz(4:10,4:-1:1)) 
```

输出：

```
ans =

     1     2     3     4
     2     3     4     5
     3     4     5     6
     4     5     6     7
     5     6     7     8
     6     7     8     9
     7     8     9    10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:36:30.323

另一种选择（可能在性能上更快）是使用`bsxfun`，例如

```
m=7;
l=4;
bsxfun(@plus,[1:m]',0:l-1)

ans =
 1     2     3     4
 2     3     4     5
 3     4     5     6
 4     5     6     7
 5     6     7     8
 6     7     8     9
 7     8     9    10 
```

或用于通用矢量`x`使用

```
x(bsxfun(@plus,x(1:m)',0:x(l-1))) 
```

# python - Python 的实体框架

> ID：15576294
> 
> 赞同：7
> 
> 时间：2013-03-22T17:18:17.360
> 
> 标签：python, entity-framework

.Net 的 Python EntityFramework 的标准替代品是什么？

**注意：**我的意思是 CPython，而不是 IronPython。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T17:22:02.877

它被称为“ORM”。SQLAlchemy 通常用作 Python 的通用 ORM，但还有很多其他解决方案，请参见[此处](http://wiki.python.org/moin/HigherLevelDatabaseProgramming)的示例。

# c# - 将自定义代码添加到 Windows 应用程序 UI

> ID：15576297
> 
> 赞同：-5
> 
> 时间：2013-03-22T17:18:25.830
> 
> 标签：c#, .net, visual-studio-2012

在 Visual Studio 中，我可以构建我的 Windows 应用程序、拖放按钮等。

并且代码会自动生成并放入我的`MainForm.Designer.cs`文件中。

我的解决方案资源管理器中有一个图标`MainForm`，它包含所有 UI 组件。

![在此处输入图像描述](../Images/9fcf4cbd24968a480dadb00cb29d7ece.png)

问题是，如何自己创建自定义代码并访问我使用`drag n drop`. 我无法在`MainForm`图标下创建自己的文件。

主要的 Program.cs，它位于：

```
MainForm form = new MainForm();
Application.Run(form); 
```

我可以访问表单，但无法访问任何组件。所以我不得不将我所有的组件都设为对公共私有，这正常吗？在任何我想访问它们的地方，我都必须将我的`form`变量作为参数传递。

有没有一种创建自定义东西的好方法，我是否正确地做事，通过获取表单变量`Program.cs`然后将其传递给其他类？仍然为什么自动生成的东西在该`MainForm.cs`图标下紧密耦合，但我无法在其中添加我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:32:35.800

您可以将自己的代码添加到文件背后的代码中，但该代码通常是表单上控件的用户界面事件的处理程序。我认为你被挂断的地方是 MainForm 是一个类，而不是一个项目。您将类添加到包含它的项目中，然后在表单类的事件处理程序中，您将创建您尝试访问的任何类的实例，并将相关值从表单传递给您需要调用的方法。这样，您的属性可以保持私密，因为表单之外的任何内容都不会试图访问它们。虽然没有被禁止，但我不喜欢将 Form 的实例作为参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:30:59.740

在 Visual Studio`Design`视图中，您应该有一个`Properties`可用的窗口。在那里，每次您在`Design`视图中选择一个控件时，您都会看到它更新。在`Properties`面板中有一个带有闪电的图标，上面有悬停文字说`Events`。

如果您查看显示的那些项目并双击`Event`您要为其编写代码的项目，您将被推入代码视图，其中包含生成的代码以访问该`Event`.

但是您不应该做的是尝试从 运行您的表单`Program.cs`，代码的逻辑关联将在 中生成`MainForms.cs`，而不是在 中`Program.cs`，并且您可以从那里访问`private`上下文中的所有属性。

![在此处输入图像描述](../Images/d71554cf01a6386d465144878807a42b.png)

# javascript - 在 D3.js 中结合对象定位和标签

> ID：15576299
> 
> 赞同：0
> 
> 时间：2013-03-22T17:18:55.667
> 
> 标签：javascript, d3.js

我是 D3js 的新手，并且（可能是愚蠢地）正在探索它作为简单导航工具的价值。我[已经设法拼凑出一个可以工作的基本页面](http://d3.geotheory.co.uk/linking.html)，但它似乎相当冗长，我想知道是否有人有任何指示如何将它重新设计为更优雅并可能集成标签和圆形绘图功能？

```
<!DOCTYPE html>
<meta charset="utf-8">
<head>
    <script type="text/javascript" src="scripts/d3.v3.js"></script>
</head>
<body>
    <div id="viz"></div>
    <div id="status" style="position:fixed;bottom:0;left:0;
        color:white;background-color:grey;font-size:small"></div>
    <script type="text/javascript">

    // functions for adding a 'status' box with link info
    function addStatus(targetURL){document.getElementById('status').innerHTML=targetURL;}
    function clearStatus(){document.getElementById('status').innerHTML=null;}

    var sampleSVG = d3.select("#viz")
        .append("svg")
        .attr("width", 500)
        .attr("height", 200);

    var dataset =  [[100, 100, "http://google.com/", "Google"],
                    [300, 100, "http://yahoo.com/", "Yahoo"]];

    // Add labels
    sampleSVG.selectAll("text")
        .data(dataset)
        .enter().append("text")
        .attr("text-anchor", "middle")
        .attr("x", function(d){return d[0]})
        .attr("y", function(d){return d[1]})
        .text(function(d) {return d[3];});

    // Add circles and functionality
    sampleSVG.selectAll("circle")
        .data(dataset)
        .enter().append("circle")
        .style("fill", "transparent")
        .style("stroke", "grey")
        .style("stroke-width", 3)
        .attr("r", 50)
        .attr("cx", function(d){return d[0]})
        .attr("cy", function(d){return d[1]})
         .on("mouseover", 
             function(d){ d3.select(this).style("stroke", "black");
             addStatus(d[2]); }
             )
         .on("mouseout", 
             function(){
                 d3.select(this).style("stroke", "grey");
                 clearStatus(); } )
        .on("mouseup", function(d){window.location = d[2];});

    </script>
    <!-- ... -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:09:28.380

如果每个圆圈有一个标签，您可以结合这两个调用来选择圆圈和文本。也就是说，在同一选择上添加圆圈和标签。

```
var sel = sampleSVG.selectAll("text")
    .data(dataset)
    .enter();
sel.append("text")
   ...
sel.append("circle")
   ... 
```

您甚至可以在单个调用链中完成所有操作。

```
sampleSVG.selectAll("text")
    .data(dataset)
    .enter()
    .append("circle")
    ...
    .append("text"); 
```

但是，这会将元素附加到`text`元素，`circle`并且可能不会在所有情况下都产生您想要的结果（特别是对于事件处理程序）。

除此之外，d3 不提供任何开箱即用的功能来同时放置形状和标签。不过，有一些库（例如[NVD3）](http://nvd3.org/)为此提供了功能。

编写自己的包装函数可能是最简单的，给定数据，以您想要的方式附加形状和标签。

# java - Spring Autowire 属性对象

> ID：15576303
> 
> 赞同：4
> 
> 时间：2013-03-22T17:19:06.497
> 
> 标签：java, spring, autowired

我已经成功地为除 java.util.Properties 实例之外的所有内容配置了 Spring 自动装配。

当我使用注释自动装配其他所有内容时：

```
@Autowired private SomeObject someObject; 
```

它工作得很好。

但是当我尝试这个时：

```
@Autowired private Properties messages; 
```

使用此配置：

```
<bean id="mybean" class="com.foo.MyBean" >
  <property name="messages">
    <util:properties location="classpath:messages.properties"/>
  </property>
</bean> 
```

我收到错误消息（仅相关行）：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mybean' defined in class path resource [application.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'messages' of bean class [com.foo.MyBean]: Bean property 'messages' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter? 
```

Wheras，如果我用一个很好的老式 setter 方法尝试它，Spring 会非常高兴地连接它：

```
public void setMessages(Properties p) {   //this works
  this.messages = p;
} 
```

尝试自动装配属性对象时我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T17:21:47.853

看起来您正试图在第一种情况下调用 setter 方法。当您在 bean 元素中创建属性元素时，它将使用 setter injection 来注入 bean。（您的情况下没有设置器，因此会引发错误）

如果你想自动装配它删除这个：

```
<property name="messages">
    <util:properties location="classpath:messages.properties"/>
</property> 
```

从bean定义中，这将尝试调用一个`setMessages`方法。

相反，只需将上下文文件中的属性 bean 分别定义为`MyBean`：

```
<bean id="mybean" class="com.foo.MyBean" />
<util:properties location="classpath:messages.properties"/> 
```

然后它应该正确地自动接线。

请注意，这也意味着您可以将 this: 添加`@Autowired private Properties messages;`到任何 Spring 托管 bean 以在其他类中使用相同的属性对象。

# java - 添加包声明时无法创建jar

> ID：15576305
> 
> 赞同：0
> 
> 时间：2013-03-22T17:19:13.030
> 
> 标签：java, package, javac

我收到了一个非常简单的类，其中包含一些像这样编译没有问题的文件夹：

```
javac -classpath /home/DigestJavaLinux/classes DigestClass.java 
```

在类文件夹中，我有一个名为**OasisEMSecImp.class的 .class 文件**

无论我需要导入该类并在另一个项目中使用它的方法，该方法都会为银行生成一个摘要字符串以检查交易，并接收总计和其他参数。

如果我添加

包摘要类；

在课程开始时它不起作用，我收到错误：

```
digestclass/DigestClass.java:136: cannot find symbol
symbol  : class OasisEMSecImp
location: class DigestClass
        OasisEMSecImp digest= new OasisEMSecImp();
        ^
digestclass/DigestClass.java:136: cannot find symbol
symbol  : class OasisEMSecImp
location: class DigestClass
        OasisEMSecImp digest= new OasisEMSecImp();
                                  ^
2 errors 
```

**更新：** 这是文件。它在没有包声明的情况下编译：

```
package digestclass;

import java.*;

class DigestClass {
    private String varMerchant;
    private String varStore;                    // Store ID
    private String varTerm;             // Term ID
    private String varTotal;            // Monto de Transaccion
    private String varCurrency;             // Codigo de Moneda
    private String varOrder_id;         // Order Id
    private String varDigest;                       // Valor de Digest

    public DigestClass(String varMerchant, String varStore, String varTerm,
            String varTotal, String varCurrency, String varOrder_id,
            String varDigest) {
        super();
        this.varMerchant = varMerchant;
        this.varStore = varStore;
        this.varTerm = varTerm;
        this.varTotal = varTotal;
        this.varCurrency = varCurrency;
        this.varOrder_id = varOrder_id;
        this.varDigest = varDigest;
    }

    public String generateDigest(){
        OasisEMSecImp digest= new OasisEMSecImp();
        varDigest = digest.getDigest(this.varTotal,this.varOrder_id,this.varMerchant,this.varStore,this.varTerm,this.varCurrency);
        return varDigest;
    }

} 
```

为什么 ？如何解决这个问题？非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:33:17.007

这就是我所理解的问题的原因以及我为解决它所做的事情。

就像 John Skeet 指出的那样，我试图使用的类

```
OasisEMSecImp 
```

最初是在默认包中编译的，也就是说在编译的时候，声明

包 example.package.OasisEMSecImp

在类的开始没有使用。因此，它不能从属于包的类中调用，也不能集成到我当前的项目中，该项目非常复杂，并且在每个类中都使用包声明。

解决方法是，我创建了一个新的非常简单的应用程序，它通过命令行工作，可以通过 exec 从我的应用程序调用，例如：

```
Process process = Runtime.getRuntime().exec("java " +
                                                    "-Djava.library.path=/home/ernesto/DigestJavaLinux/lib " +
                                                    "-classpath /home/ernesto/workspace/digestUserTest/bin:/home/ernesto/workspace/digestUserTest/lib/digestgenerator.jar: " +
                                                    "ARGUMENTS"); 
```

[由于此链接](https://stackoverflow.com/questions/283816/how-to-access-java-classes-in-the-default-package)，我了解情况就是这样

我希望这可以帮助别人。并感谢您的帮助。

# ios - 自动化在 iOS 设备上安装应用程序的过程

> ID：15576309
> 
> 赞同：0
> 
> 时间：2013-03-22T17:19:34.003
> 
> 标签：ios

我想知道是否有任何方法可以在 iOS 设备上自动安装应用程序？我不想通过 iTunes 安装应用程序。

谢谢。

# java - 将自定义 AccountAuthenticator 与多个应用程序一起使用

> ID：15576310
> 
> 赞同：3
> 
> 时间：2013-03-22T17:19:33.957
> 
> 标签：java, android, accountmanager

我有 2 个独立的 Android 项目，一个是 AbstractAccountAuthenticator 的实现，用于管理设备中的用户帐户，另一个是应该从 AccountAuthenticator 获取令牌并使用它的推送应用程序。

AbstractAccountAuthenticator 的实现正在工作并在从“设置”菜单中的“帐户和同步”部分调用它时添加帐户，但是当我从推送应用程序调用 addAccount() 时，我得到一个“权限被拒绝：checkComponentPermission()”和应用程序死在那里。

我无法提供很多源代码，因为我无权允许它公开，但我向您保证它们以“独立”的方式工作。

我已经从不同的应用程序中搜索了正确使用 AccountManager 的示例，但没有找到。freenode 也没有运气。

我发现从 AccountAuthenticator 中启动活动（使用 Intent.FLAG_NEW_TASK 和 context.startActivity(intent)）可以解决问题，但这意味着 addAccount() 不会返回到 AccountManager，我认为不会与开发指南保持一致，因为它打破了 AccountManager 的使用流程。另一种方法是导出请求用户凭据时使用的 Acitivity。但我认为这可能是一个安全问题，因为它应该由 AccountManager 而不是外部调用。

感谢您对此提出的任何想法。

PS：

*   所有权限都正确使用，除非我需要一个我不知道的特殊权限才能跨应用程序工作。

*   我会问我是否可以使用代码片段在这里显示我关心的行。

*   在这里发布的第一个问题，我希望我没有在这里违反（m）任何规则（我在这里和谷歌上进行了搜索，但我问了，因为我没有发现任何用处。）

*   谢谢你。

* * *

在深入研究了谷歌的登录服务并偶然发现了设置类之后，我发现了我认为应该是解决方案：

*   不要导出东西，我一直认为绕过AccountManager调用你的实现，成为服务或活动是一个安全问题。

*   不要在你的实现上使用`Intent.FLAG_NEW_TASK`and ，因为它可能会让你出现意想不到的行为。`startActivity()``AbstractAccountAuthenticator`

这样做的方法很简单，实际上：

```
Intent i = new Intent( Settings.ACTION_ADD_ACCOUNT );
i.putExtra( Settings.EXTRA_AUTHORITIES, new String[] { "com.exaple.yourauth" } );
contextVar.startActivity( i ); 
```

这样，您要求设置为新帐户（bus）提出可能的权限列表，因为您要添加 EXTRA_AUTHORITIES 参数，这是一个带有要显示的权限的字符串，它将选项限制为您想要的。如果只有一个与您的额外匹配，则以适当的方式调用帐户管理器和登录活动。

我真的希望这可以帮助周围的任何其他人。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T13:11:55.530

在深入研究了谷歌的登录服务并偶然发现了设置类之后，我发现了我认为应该是解决方案：

*   不要导出东西，我一直认为绕过AccountManager调用你的实现，成为服务或活动是一个安全问题。

*   不要在你的实现上使用`Intent.FLAG_NEW_TASK`and ，因为它可能会让你出现意想不到的行为。`startActivity()``AbstractAccountAuthenticator`

这样做的方法很简单，实际上：

```
Intent i = new Intent( Settings.ACTION_ADD_ACCOUNT );
i.putExtra( Settings.EXTRA_AUTHORITIES, new String[] { "com.exaple.yourauth" } );
contextVar.startActivity( i ); 
```

这样，您要求设置为新帐户（bus）提出可能的权限列表，因为您要添加 EXTRA_AUTHORITIES 参数，这是一个带有要显示的权限的字符串，它将选项限制为您想要的。如果只有一个与您的额外匹配，则以适当的方式调用帐户管理器和登录活动。

我真的希望这可以帮助周围的任何其他人。

# javascript - Phonegap SQLite 错误 5

> ID：15576312
> 
> 赞同：1
> 
> 时间：2013-03-22T17:19:35.593
> 
> 标签：javascript, sqlite, cordova

我正在将 phonegap 用于应用程序，并且我需要使用 SQLite 数据库。我的问题是在加载时，我得到一个 SQL 错误，这里是有问题的代码：

```
//Open DB
    function findLocalNotes() {
        var db = window.openDatabase("rev_aLocalNotes", "1.0", "Revision App Local Notes", 200000);
        db.transaction(functionDB, errorCB, successCB);
    }

    //Create if needed DB
    function functionDB(db) {
        db.executeSql("CREATE TABLE IF NOT EXISTS local_notes (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, group TEXT, note TEXT, lastupdated DATE, created DATE)");
    }

    //If error, say
    function errorCB(e) {
        alert("SQL ERROR " + e.code);   
    }

    //If DB exist/created Open it.
    function successCB() {
        var db = window.openDatabase("rev_aLocalNotes", "1.0", "Revision App Local Notes", 200000);
        db.transaction(queryDB, errorCB);
    } 

    //Run query
    function queryDB(db) {
        db.executeSql('SELECT * FROM local_notes', [], querySuccess, errorCB);
    }

    //Run with returned query rows
    function querySuccess(db, results) {
        var len = results.rows.length;
        if(len != 0) {
            for (var i=0; i<len; i++){
                alert(results.rows.item(i).title)
            }
        }
        else {
            main_content.append("<div href='write_note.html' id='no_notes'><p>It looks like you have no notes! Tap here to add one!</p><img src='img/note_add.png'/></div>");
            $('#no_notes').click(function() { $.mobile.changePage( 'write_note.html', {transition: "none"}, true, true); });
        }
        return false;
    } 
```

任何想法是什么引发了错误？提前致谢 ：）

**编辑：**抱歉忘记添加它！错误代码 5

# java - 找出有多少个连续数字

> ID：15576321
> 
> 赞同：-1
> 
> 时间：2013-03-22T17:19:52.797
> 
> 标签：java

我需要找出我的随机数生成器中有多少个连续数字，除了连续数字部分外，我的程序都在工作。这是我得到的。我已经尝试了很多东西，但由于某种原因我无法弄清楚，请帮助！有1000个数字和500个随机数出来，然后我找到最小和最大值，然后取平均值。现在我需要找出 fe 9、10、11 或 55、56、57 有多少个连续数字...我也收到此错误...--线程“main”中的异常 java.util.NoSuchElementException

```
 int num, largest, smallest, sum = 0, count = 0;
    int programnumber = 6;
    header (prw, programnumber);
    double average = 0;

    Random gen = new Random();
    FileWriter fw = new FileWriter("randomdata.txt");
    for (int i1 = 0; i1 < 500; i1++){
        num = gen.nextInt(1000);
        fw.write(num + "\n");
        count++;

    }
    fw.close();

    File numfile = new File("randomdata.txt");
    Scanner infile = new Scanner(numfile);
    largest = infile.nextInt();
    smallest = infile.nextInt();
    largest = 0;
    smallest = 999;
    while (infile.hasNext()){
        num = infile.nextInt();
        System.out.println(num);
        if (num > largest){
            largest = num;
        }
        if (num < smallest){
            smallest = num;
        }
        sum = sum + num;
        count++;
        }
    average = (double) sum / count;
    System.out.println("The largest is: " + largest);
    prw.println("The largest is: " + largest);
    System.out.println("The smallest is: " + smallest);
    prw.println("The smallest is: " + smallest);
    System.out.println("The average is: " + average);
    prw.println("The average is: " + average);

            // here is the part where I am stuck
    int prev, consec=0;
    prev= infile.nextInt();
    num= infile.nextInt();
    while (num >= 0) { 
        if (num >= prev){  
            consec++; 
            prev = num; 
            num = infile.nextInt();
        }

    }
    System.out.println(consec);

    prw.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:27:05.267

不能`num`小于零吗？错误出现在您的 if 中：

`(num>=prev)`

并不意味着它们是连续的。只有第一个大于或等于。应该是`(num+1==prev)`。

此外，您正在阅读所有文件以查找最大、最小和平均值，验证连续数字时无需读取任何内容。

**编辑**：

这部分代码：

```
largest = infile.nextInt();
smallest = infile.nextInt();
largest = 0;
smallest = 999; 
```

正在丢弃前两个数字。

# c - 高级 C 内存分配

> ID：15576324
> 
> 赞同：1
> 
> 时间：2013-03-22T17:20:01.773
> 
> 标签：c

所以，我继续学习 C。我有一些有趣的问题。如果我没有弄错将东西放在堆上，我必须使用`malloc`etc.. 但是呢`char * str`？将`str`位于哪个内存段中？我读到它将被放在 .bss 段上。（这就是为什么你不能在 C 中更改字符串）。它是否正确？或者它会被放在堆栈上吗？

如果是，为什么程序结束时不需要释放这个内存？每个函数的代码位于哪个内存段中？换句话说，指向函数的指针将指向哪个段？谢谢您的帮助！只是试图更好地理解 C 中的内存管理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:30:53.267

如果只是说`char * str`不会分配数组的内存，只会分配指针本身的内存。您将需要手动为字符串分配内存，可能在堆上，也可能手动释放它。

“您不能在 C 中更改字符串”是错误的。您不能更改字符串常量，并且字符串常量分配在类似`.rodata`（只读部分）中。与任何其他代码一样，函数代码位于类似`.text`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T17:31:26.730

如果将定义`char *str;`放在函数中，那么它就是“pointer-to-”类型的自动变量`char`。

它位于堆栈上，当函数返回时，堆栈的那一部分将变为未使用（编译器会通过发出代码以根据需要移动堆栈指针来为您处理这一点）。理论上堆栈的存在纯粹是一个实现细节，实际上C总是有一个调用堆栈，几乎所有实现都以或多或少相同的方式管理它，但实际上它是如何管理的，存储自动变量的内存是容易被称为“堆栈”。

如果您将定义`char *str;`放在任何函数之外，那么它就是具有静态存储持续时间的全局变量。

它存储在读写数据段中，并在程序退出时变得未使用（可能操作系统会为您处理这个，尽管它原则上可能是编译器发出的代码）。由于它是零初始化的（并假设空指针由所有位为零表示的体系结构）是的，它可以进入 bss 段，该段专门用于具有静态存储持续时间的零初始化读写对象。同样，如何存储静态持续时间的对象的细节取决于实现，但同样，这是它通常的完成方式。

这些都与不可修改的字符串文字有任何关系，因为您还没有定义字符串（更不用说使用字符串文字了）。您已经定义了一个指针，它可以指向一个字符串，但（还）没有这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T17:37:39.700

在 C 语言中，所有局部变量都将被放入堆栈。该变量`str`是一个字符指针。它包含一个内存地址。在堆栈上只会被这个指针称为`str`。

```
char * str; 
```

**这会在堆栈**上分配指针大小的内存（32/64 位上的 4 或 8 个字节）。

```
str = malloc(1024); 
```

`malloc`**在堆上**分配 1024 个字节并返回指向该内存区域第一个字节的指针。该指针保存在`str`位于堆栈中的哪个位置。

当函数（其中是局部变量）返回时，您的变量`str`将被释放。`str`

指向的内存区域`str`不会自动释放。您需要使用 手动执行此操作`free(str)`。

字符串可以修改！但不是常量文字：

```
char string[4] = "foo";
string[0] = 'F'; //will work

char * stringconst = "foo";
stringconst[0] = 'F'; // this will segfault 
```

以上将不起作用，因为“foo”将（希望）放置在只读内存区域中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T17:38:31.387

我认为您混淆了指针及其指向的内容。拿着这个：

```
char *str = "Hello"; 
```

如果这是在文件范围内声明的，那么`str`是静态分配的指针。它指向的字符串是完全独立的。你可以`str`指向任何东西。

相反，如果它是在函数中声明的，则`str`在堆栈上分配一个指针。同样，文字是分开的。

事实上，如果你有这两行：

```
char *str1 = "Hello";
char *str2 = "Hello"; 
```

编译器可以自由地让每个指向内存中的相同地址。

无论指针如何，字符串文字都是静态分配的，并且（通常）放置在初始化的只读数据段中。

还要记住，堆、堆栈和段的所有概念都纯粹与实现相关联，而不是与语言相关联。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T18:04:13.930

在阅读类似问题的答案时，我只找到了两个链接。这些可能会帮助您更好地理解这个问题。

[C 程序的内存布局和 C](http://www.geeksforgeeks.org/memory-layout-of-c-program/)中[字符串的存储](http://www.geeksforgeeks.org/storage-for-strings-in-c/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-08T07:31:07.073

在 C 语言中，我们可以通过字符数组或字符指针来引用字符串。

**案例1：**如果字符串被称为字符数组：

```
char[] = "storage of strings"; 
```

如果上述声明是 GLOBAL 则存储在 DATA 段中，否则将存储在 STACK 段中。

**情况 2：**如果字符串由字符指针引用，并且在运行时分配内存，即使用 malloc、calloc。

```
char *str = (char *)malloc(sizeof(char)*size); 
```

在这种情况下，内存是从 HEAP 段分配的。

**情况 3：**如果字符串由字符指针引用，并且字符串值直接分配给 char 指针。

```
char *str = "storage of strings" 
```

在这种情况下，这将存储在 DATA 段中。就像在数据段中为字符串文字分配了一个内存，并将该字符串文字的地址分配给 str 变量。

**PS：**在运行时分配的每个内存（HEAP 段）都需要在程序本身中释放。因此，如果您使用 malloc、calloc 或任何在运行时分配内存的函数，则需要使用 free()。

# jquery - Bootstrap 工具提示未显示在正确位置的问题

> ID：15576325
> 
> 赞同：3
> 
> 时间：2013-03-22T17:20:01.897
> 
> 标签：jquery, twitter-bootstrap, tooltip, css-position

我有一张带有几个标记的地图图像——每个标记都有一个`.marker`绝对定位的类别，而父 div`#map`是相对定位的——到目前为止一切都很好。

我正在使用[Bootstrap](http://twitter.github.com/bootstrap)，并且我希望在用户将鼠标悬停在其中一个标记上时弹出一个带有位置名称的[工具提示。](http://twitter.github.com/bootstrap/javascript.html#tooltips)工具提示出现并按预期工作，只是它不在标记附近 - 它位于`#map`div 的顶部。

关于如何将工具提示设置为出现在绝对定位的标记旁边/顶部的任何想法？

任何帮助，将不胜感激，

伊恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:39:24.863

不确定这是否适用于您的代码（发布它？）

将此添加到您的js中：

```
$(function() {
  $('.marker').tooltip({placement: 'right'});
}); 
```

或者，如果您使用的是`data- attributes`：

```
<div class="marker" data-toggle="tooltip" data-placement="right"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T15:54:40.040

引导工具提示适用于位置相关元素。确保您的元素是相对位置的，如果不是，那么您需要为 .tooltip 编写 css 以显示在正确的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T13:51:56.690

轻松更改工具提示 data-placement="left", data-placement="right", data-placement="top", data-placement="bottom"

下面提到代码

* * *

```
<div class="col-md-10 col-md-push-1">
    <div class="col-md-3">
    <button type="button" class="btn btn-block btn-danger col-md-10" data-toggle="tooltip" data-placement="left" title="Tooltip on left">Tooltip on left</button>
    </div>
    <div class="col-md-3">
    <button type="button" class="btn btn-block btn-primary" data-toggle="tooltip" data-placement="top" title="Tooltip on top">Tooltip on top</button>
    </div>
    <div class="col-md-3">
    <button type="button" class="btn btn-block btn-default" data-toggle="tooltip" data-placement="bottom" title="Tooltip on bottom">Tooltip on bottom</button>
    </div>
    <div class="col-md-3">
    <button type="button" class="btn btn-block btn-danger" data-toggle="tooltip" data-placement="right" title="Tooltip on right">Tooltip on right</button>
    </div>
</div>                

<script>
$('[data-toggle="tooltip"]').tooltip({
});
</script> 
```

# internet-explorer - 中间 div 应该得到剩余的宽度。适用于 Firefox 但不适用于 IE。为什么？

> ID：15576327
> 
> 赞同：0
> 
> 时间：2013-03-22T17:20:05.820
> 
> 标签：internet-explorer, html, width

我有一个包含 3 个 div 的 div。左右两边的 div 的宽度都设置为 200px，中间的 div 应该得到所有剩余的宽度。这在 Firefox 中可以正常工作，但在 IE8 和 IE9 中则不行。

有人可以告诉我为什么这在 IE 中不起作用吗？

```
<html>
<body>
<div id="outercontainer" style="width:100%;overflow:hidden;">
    <div class"fixedtablediv" style="width:200px;float:right;">
        <table id="signtable" class="patable">
        <thead>
            <tr style="height: 101px;" class="headstyle" id="signtableheadtr"> 
            <td style="text-align: left;"><b>Summa</b></td>
            <td style="text-align: left;"><b>Godk.&nbsp;<input name="trigger" tabindex="-1" value="appr" onclick="checkAll(0, this, this.value)" type="checkbox"></b></td>
            <td style="text-align: left;"><b>Spärr&nbsp;<input name="trigger1" tabindex="-1" value="block" onclick="checkAll(0, this, this.value)" type="checkbox"></b></td>
            </tr>
        </thead>
        <tbody>
            <tr class="rowlight">
            <td style="text-align: right;">40.00</td>
            <td style="text-align: left;"><input name="appr" value="0" type="checkbox"></td>
            <td style="text-align: left;"><input name="block" value="0" type="checkbox"></td>
            </tr>
            <tr class="rowdark">
            <td style="text-align: right;">32.00</td>
            <td style="text-align: left;"><input name="appr" value="1" type="checkbox"></td>
            <td style="text-align: left;"><input name="block" value="1" type="checkbox"></td>
            </tr>
        </tbody>
        </table>        
    </div>  
    <div class"fixedtablediv" style="width:200px;float:left;">
        <table id="nametable">
        <thead id="nametablehead" style="vertical-align:bottom;">
            <tr class="headstyle" id='nametableheadtr'>
                <td style="text-align: left;"><a class="" href="/hrm/web?palette=0&amp;value=&amp;funcid=F_PAC_10"><b>Firstname</b></a></td>
                <td style="text-align: left;"><a class="" href="/hrm/web?palette=0&amp;value=&amp;funcid=F_PAC_11"><b>Lastname</b></a></td>
                <td style="text-align: left;"><a class="" href="/hrm/web?palette=0&amp;value=&amp;funcid=F_PAC_12"><b>Id</b></a></td>
            </tr>
        </thead>
        <tbody>     
            <tr class="rowlight" onmouseover="this.style.background = '#EED';" onmouseout="this.style.background = '';"> 
                <td style="text-align: left;">Gunnar</td><td style="text-align: left;">Svensson</td>
                <td style="text-align: left;">123</td>
            </tr>
            <tr class="rowdark" onmouseover="this.style.background = '#EED';" onmouseout="this.style.background = '';"> 
                <td style="text-align: left;">Sven</td>
                <td style="text-align: left;">Svensson</td>
                <td style="text-align: left;">789</td>
            </tr>
        </tbody>
        </table>
    </div>
    <div id="scrolldiv" style="overflow:auto;margin-left:200px;margin-right:200px;">
        <table id="projecttable">
            <thead id="projtablehead">
            <tr class="headstyle">
                <td colspan="47" style="text-align: left;"><b>Projects</b></td>
            </tr>
            <tr class="headstyle">
                <td style="text-align: left;"><b>M123-ABC DBF Proc</b></td>
                <td style="text-align: left;"><b>Meetings and Reviews</b></td>
                <td style="text-align: left;"><b>R9/Offertarbete Max</b></td>
                <td style="text-align: left;"><b>R9/Offertarbete flights</b></td>
                <td style="text-align: left;"><b>R1/ABC12 Planning &amp; Project control</b></td>
                <td style="text-align: left;"><b>RU123/ABC12 Contract Admi</b></td>
                <td style="text-align: left;"><b>RU13/ABC12 Product Assurance</b></td>
                <td style="text-align: left;"><b>RU121/ABC12 LS Planning</b></td>
                <td style="text-align: left;"><b>RU12242/ABC12 LS execution</b></td>
                <td style="text-align: left;"><b>RU11/ABC12 LS Plan and Final REP.</b></td>
                <td style="text-align: left;"><b>RU52/ABC12 LS Pre and post campaign</b></td>
                <td style="text-align: left;"><b>RU61/ABC12 LS Campaign Mngmt</b></td>
                <td style="text-align: left;"><b>RU62/ABC12 LS Campaign execution</b></td>
                <td style="text-align: left;"><b>RU29/ABC12 P/L System engineering</b></td>
                <td style="text-align: left;"><b>R1/Planning&amp;Project control</b></td>
                <td style="text-align: left;"><b>R1/Contract Admi</b></td>
                <td style="text-align: left;"><b>R1/Prod Assurance</b></td>
                <td style="text-align: left;"><b>R1/System engineering</b></td>
                <td style="text-align: left;"><b>R1/B3 mgmt</b></td>
                <td style="text-align: left;"><b>R1/B3 Meetings and Reviews</b></td>
                <td style="text-align: left;"><b>R1/B3 Sys Eng</b></td>
                <td style="text-align: left;"><b>R1/IMP Mgmt</b></td>
                <td style="text-align: left;"><b>R1/IMP Meetings and Reviews</b></td>
                <td style="text-align: left;"><b>R1/IMPACHT Sys Eng</b></td>
                <td style="text-align: left;"><b>R1/CD  mgmt</b></td>
                <td style="text-align: left;"><b>R1/CD  Sys Eng</b></td>
                <td style="text-align: left;"><b>RA8/Management &amp; PA</b></td>
                <td style="text-align: left;"><b>RA8/C Re-entry cone</b></td>
                <td style="text-align: left;"><b>RA9/Management and PA</b></td>
                <td style="text-align: left;"><b>RA95/Ext Meetings and Design Review</b></td>
                <td style="text-align: left;"><b>RA9/System Engineering</b></td>
                <td style="text-align: left;"><b>RA9/New TMSystem dev. t.</b></td>
                <td style="text-align: left;"><b>RA9/Guidance and control system</b></td>
                <td style="text-align: left;"><b>RA95/ABC proc manuf. and design</b></td>
                <td style="text-align: left;"><b>RA95/assembly and test</b></td>
                <td style="text-align: left;"><b>RA9/ Proc manuf. and design</b></td>
                <td style="text-align: left;"><b>RA9/assembly and test</b></td>
                <td style="text-align: left;"><b>RA9/INA integration and test</b></td>
                <td style="text-align: left;"><b>RA9/system integration and test</b></td>
                <td style="text-align: left;"><b>RA9/Fin assembly</b></td>
                <td style="text-align: left;"><b>RA9/motor</b></td>
                <td style="text-align: left;"><b>RA9/transport</b></td>
                <td style="text-align: left;"><b>RA9/review and end to end test</b></td>
                <td style="text-align: left;"><b>RA9/Prep</b></td>
                <td style="text-align: left;"><b>RA9/campaign</b></td>
                <td style="text-align: left;"><b>RA9/Flight Work</b></td>
                <td style="text-align: left;"><b>RA9/8 Study</b></td>
            </tr>
            </thead>
            <tbody>
                <tr class="rowlight" onmouseover="this.style.background = '#EED';" onmouseout="this.style.background = '';"> <td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"><span title="2013-03-04&nbsp;8.00&nbsp;Projekttid&nbsp;2013-03-05&nbsp;4.00&nbsp;Projekttid&nbsp;2013-03-06&nbsp;3.00&nbsp;Projekttid&nbsp;">15.00</span></td><td style="text-align: right;"><span title="2013-03-06&nbsp;5.00&nbsp;Projekttid&nbsp;">5.00</span></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"><span title="2013-03-07&nbsp;8.00&nbsp;Projekttid&nbsp;">8.00</span></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td></tr>
                <tr class="rowdark" onmouseover="this.style.background = '#EED';" onmouseout="this.style.background = '';"> <td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"><span title="2013-03-04&nbsp;8.00&nbsp;Projekttid&nbsp;2013-03-05&nbsp;8.00&nbsp;Projekttid&nbsp;">16.00</span></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"><span title="2013-03-06&nbsp;8.00&nbsp;Projekttid&nbsp;">8.00</span></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td><td style="text-align: right;"></td></tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T17:47:21.197

看起来你在[quirksmode](http://en.wikipedia.org/wiki/Quirks_mode)。您应该包括一个 DOCTYPE 声明，即

```
<!DOCTYPE html>
or
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

# c# - 当我将它提取到变量中时，为什么我的参数匹配器会失败？

> ID：15576329
> 
> 赞同：1
> 
> 时间：2013-03-22T17:20:17.430
> 
> 标签：c#, moq

我很难提取任何`It.Is<T>`参数匹配器变量。每当我这样做时，测试都会失败。

这有效：

```
calculatorMock
    .Setup(x => x.Produce(It.Is<IEnumerable<Report>>(xx => reports.IsEqualTo(xx))))
    .Returns(calculatorInputs); 
```

但是，这失败了：

```
var argumentMatcher = It.Is<IEnumerable<Report>>(xx => reports.IsEqualTo(xx));
calculatorMock
    .Setup(x => x.Produce(argumentMatcher))
    .Returns(calculatorInputs); 
```

`IsEqualTo`是一个返回 bool 的静态方法。

问题是 Moq 说`Produce()`当我期望它被一个包含 3 个项目的列表调用时，它是用一个空列表调用的。在本例中，`xx`表示空列表。我不确定为什么我的 Moq 验证需要内联参数匹配器。

我刚刚发现以下工作：

```
Expression<Func<IEnumerable<Report>, bool>> expression = x => reports.IsEqualTo(x);
calculatorMock
    .Setup(x => x.Produce(It.Is(expression)))
    .Returns(calculatorInputs); 
```

是否有特定原因`It.Is<T>`无法像我上面尝试的那样提取？

这是问题的工作副本：

使用系统；使用 System.Linq.Expressions；使用最小起订量；使用 Xunit；

命名空间 MoqArgumentMatcher { 类程序 { 静态 void Main(string[] args) { var testRunner = new TestRunner();

```
 testRunner.Passes();
        testRunner.Fails();

        Console.ReadKey();
    }
}

public class TestRunner
{
    [Fact]
    public void Passes()
    {
        // Arrange
        var calculatorMock = new Mock<ICalculator>();
        var consumer = new CalculatorConsumer(calculatorMock.Object);
        var report = new Report {Id = 1};

        // Act
        consumer.Consume(report);

        // Assert
        calculatorMock.Verify(x => x.Produce(
            It.Is<Report>(xx => xx.Id == 1)), Times.Once());
    }

    [Fact]
    public void Passes2()
    {
        // Arrange
        var calculatorMock = new Mock<ICalculator>();
        var consumer = new CalculatorConsumer(calculatorMock.Object);
        var report = new Report { Id = 1 };

        // Act
        consumer.Consume(report);

        // Assert
        Expression<Func<Report, bool>> expression = x => x.Id == 1;
        calculatorMock.Verify(x => x.Produce(It.Is(expression)), Times.Once());
    }

    [Fact]
    public void Fails()
    {
        // Arrange
        var calculatorMock = new Mock<ICalculator>();
        var consumer = new CalculatorConsumer(calculatorMock.Object);
        var report = new Report {Id = 1};

        // Act
        consumer.Consume(report);

        // Assert
        var argumentMatcher = It.Is<Report>(xx => xx.Id == 1);
        calculatorMock.Verify(x => x.Produce(argumentMatcher), Times.Once());
    }
}

public class CalculatorConsumer
{
    private readonly ICalculator _calculator;

    public CalculatorConsumer(ICalculator calculator)
    {
        _calculator = calculator;
    }

    public void Consume(Report report)
    {
        _calculator.Produce(report);
    }
}

public interface ICalculator
{
    void Produce(Report report);
}

public class Report
{
    public int Id { get; set; }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T15:29:01.057

至少对我而言，最容易理解`Passes2`和测试之间的区别是在测试失败的情况下，表达式链中的一个中断。`Fails`

首先要注意的是签名`It.Is`：

```
TValue It.Is<TValue>(Expression<Func<TValue, bool>> match) 
```

特别要注意，当它被执行时，它返回一个 的实例`TValue`，而不是一个`Expression`。接下来要注意的是`Verify`期望的签名`Expression`（类型`Action`或`Func`），其中一个是调用所需的方法。

当 Moq 执行该`Verify`方法时，它会查看表达式并提取它正在验证的方法调用，然后提取为被调用方法提供值的表达式部分，在本例`report`中为`Produce(Report report)`. 然后，它编译这个小的参数表达式子树，以针对用于调用该`Produce`方法的值来执行以确定它是否匹配。

在 Passes 和 Passes2 的情况下，它能够提取一个`Expression<Func<Report, bool>>`. 编译器知道它应该将代码解析为表达式，因此为`It.Is`调用创建一个表达式树。

在 的情况下`Fails`，在这条线上...

```
var argumentMatcher = It.Is<Report>(xx => xx.Id == 1); 
```

...编译器看到对它的调用将`It.Is`在代码运行后立即进行评估。因此，它确定 of 的类型`var`将是`TValue`（返回类型），而不是`Expression`任何东西。因此，当`argumentMatcher`在调用中看到它时`Verify`，它现在是表达式树中的一个叶节点，一个简单的变量。

在运行时，`argumentMatcher`可能被评估为`null`. Moq 看到 parameter-expression-sub-tree 是一个值而不是 a `Func`，执行与该值的比较，being `null`，而不是`1`根据需要执行比较。

（尽管 OP 对另一个问题的答案感到满意，但这是本着回答开放性问题的精神！）

# jquery - jQuery slideToggle 和定位错误

> ID：15576331
> 
> 赞同：0
> 
> 时间：2013-03-22T17:20:22.320
> 
> 标签：jquery, html

下面的 URL 工作正常。取消注释 jQuery 以查看问题。 [http://codepen.io/anon/pen/Iukuv](http://codepen.io/anon/pen/Iikuv)

当您取消注释 jQuery 时，您会看到幻灯片效果不是“平滑”，这是因为我在绝对定位和相对定位之间来回切换。

切换评论这个 jQuery

```
/*
  //Uncomment for the bug
  if(navIcon.hasClass('open')){
    navIcon.css('position', 'relative');
  }else{
    navIcon.css('position', 'absolute');
  }
*/ 
```

任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:56:57.807

我看不出你到底想做什么，所以请详细描述你想要实现的目标。一个问题是，当您将位置设置为绝对时， div.container 会失去其高度。您可以在设置中解决此问题：

```
.container {
  min-height: 40px;
} 
```

例如。

# visual-assist-x - 修改 Visual Assist X 的 Extract Method 宏中 & (by ref) 的默认位置

> ID：15576334
> 
> 赞同：2
> 
> 时间：2013-03-22T17:20:45.027
> 
> 标签：visual-assist-x

在 Visual Assist X 中，提取方法的默认方式是将 & 符号放在变量旁边。有没有办法改变这种行为，让它把 & 放在类名后面？目前使用 Visual Assist X，

```
int someInt = 1, anotherInt = 2;
someInt += 1; anotherInt += 1;
cout << someInt << anotherInt << endl; 
```

提取最后两行将产生如下方法签名：

```
void printInts(int &someInt, int &anotherInt) 
```

我希望默认签名为：

```
void printInts(int& someInt, int& anotherInt) 
```

# c - 关于将指针集成到程序中的建议

> ID：15576335
> 
> 赞同：2
> 
> 时间：2013-03-22T17:20:44.750
> 
> 标签：c, function, pointers

在我正在处理的初学者程序中，我必须使用 3 个函数来获取两个参数的和和差。在第三个函数中，我必须将结果存储在两个指针中。我的问题是，我无法成功地将第三个功能集成到 main.js 中。

我的主要功能如下：

```
int main ()
{
    int num1, num2;
    int sumResult, differenceResult;

    printf("Please enter a number: ");
    scanf("%d", &num1);
    printf("Please enter another number: ");
    scanf("%d", &num2);

    sumResult = CalculateSum (num1, num2);

    printf("the result of the sum is %d\n", sumResult);

    differenceResult = CalculateDifference (num1, num2);

    printf("the result of the difference is %d\n", differenceResult);

    return 0;
} 
```

我处理指针的函数：

```
void CalculateBoth(int num1, int num2, int*sumPtr, int *diffPtr)
{
    *sumPtr = num1+num2;

    *diffPtr= num1-num2;

} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:42:14.000

指针（通常）用于传递的不是参数值，而是参数值所在的内存地址。这允许您修改参数值。

让我们以将 2 加到**参数**并通过**结果**变量传递结果的函数为例：

```
void WrongAdd2(int argument, int result)
{
    result = argument + 2;
} 
```

在这种情况下，您传递**结果值，但****结果**中的任何更改都将是本地的。相反，指针告诉的不是值，而是值所在的地址。

```
void Add2(int argument, int *result)
{
    *result = argument + 2;
} 
```

这里**result** 'address of int' 所以***result**位于**result**指向的内存中。

要在函数中使用指针，您应该在内存中放置结果：

```
int value = 10;
int result = 0;

WrongAdd2(value, result); /* result is still 0\. */
Add2(value, &result);     /* result is updated and now it is 12\. */ 
```

因此，您需要使用相同的前 2 个参数调用 CalculateBoth，但结果将通过第 3 个和第 4 个参数传递，它们是指向您要放置输出参数的位置（包含它们的地址）的指针。

```
CalculateBoth(num1, num2, &sumResult, &differenceResult); 
```

你在说：好吧，取**num1**和**num2的值，并将****sumResult**和**differenceResult**的地址作为输出参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:07:06.750

我想你在问如何做到这一点，假设你的`CalculateSum()`和`CalculateDifference()`函数出现在这段代码之前。（您没有在源列表中提供它们）：

```
void CalculateBoth(int num1, int num2, int *sumPtr, int *diffPtr)
{
    *sumPtr = CalculateSum(num1, num2);
    *diffPtr= CalculateDifference(num1, num2);
}

int main ()
{
    int num1, num2;
    int sumResult, differenceResult;

    printf("Please enter a number: ");
    scanf("%d", &num1);
    printf("Please enter another number: ");
    scanf("%d", &num2);

    // invoke both sum an difference through a unified front-end
    CalculateBoth(num1, num2, &sumResult, &differenceResult);

    printf("the result of the sum is %d\n", sumResult);
    printf("the result of the difference is %d\n", differenceResult);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:51:49.050

[要理解清楚，请线性阅读答案]

首先了解你的函数声明（阅读评论）：

```
 void CalculateBoth(int num1, int num2,        int*sumPtr, int *diffPtr);  
// ^
// return type           ^--------^                 ^-----------^
//                  first two are simple int    last two are pointer to integers 
```

注意函数的返回类型`void`意味着它不返回（或者说返回无效）。

但是你的功能`CalculateBoth()`很好它计算*和*和*差*。（两件事）

在 C 编程中，我们不能从函数中返回一个以上的参数。在这种情况下，指针非常有用。所以最后你的参数实际上是函数CalculateBoth（）太阳和差异的输出参数。

喜欢（*再次阅读评论*）：

```
 void CalculateBoth(int num1, int num2,        int*sumPtr, int *diffPtr);  
// ^
// return type           ^--------^                 ^-----------^
//                  two input arguments        Output sum and difference 
```

因为按值传递不反映调用语句的变化，所以我们使用按地址变量传递。

指针是可以保存其他变量地址的变量。

因为在`main()`函数中，您需要两个变量的和和差，`num1`并且`num2`. 当我们调用函数时，我们传递了两个结果变量的`CalculateBoth()`地址`main()`。

所以你在 main() 中的结果变量是：

```
int sumResult, differenceResult; 
```

你主要喜欢：

```
CalculateBoth(num1, num2, &sumResult, &differenceResult); 
```

**注意**`&`：变量前面的和号运算符`sumResult`，`differenceResult`是[地址运算符](http://msdn.microsoft.com/en-us/library/caaw7h5s%28v=vs.71%29.aspx)给出其操作数的地址。通过简单地编写变量名，您正在传递值，但如果您使用`&`运算符，您将传递变量的地址。

`CalculateBoth()`具有其变量的本地副本的函数。但是在最后两个参数的情况下，函数将结果存储在地址而不是它们的本地副本，因此结果反映在调用函数`main()`中。

```
void CalculateBoth(  int num1, int num2, int*sumPtr, int *diffPtr)
//variable types are:   value      value   address     address       
{
    *sumPtr = num1+num2;    //store result of + memory pointer
    *diffPtr= num1-num2;    //    by variable sumPtr, *diffPtr
} 
```

**注意**：`*`这里是[*地址*](http://msdn.microsoft.com/en-us/library/fw63e3c3%28v=vs.71%29.aspx)运算符的值给出了存储在地址中的值。操作的结果是操作数寻址的值；也就是说，它的操作数指向的地址处的值。所以你通过两个变量存储在内存指针

所以改为调用你的函数：

```
differenceResult = CalculateBoth (num1, num2); 
```

打电话

```
CalculateBoth(num1, num2, &sumResult, &differenceResult); 
```

`differenceResult =`另外，如果你在上面的函数调用表达式前面写a，你做错了，因为`CalculateBoth()`什么都不返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:24:43.610

Call it like -

```
CalculateBoth(num1, num2, &sumResult, &differenceResult); 
```

Not sure what you are misunderstanding here. For example -

```
*sumPtr = num1+num2; 
```

Since `sumPtr` is pointing to `sumResult`, the result is acutally written to it. And you can print the calculated values in main once the function returns.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T17:25:05.060

I am not sure what do you mean by integrate. I think this is what you are looking for:

```
CalculateBoth(num1, num2, &sumResult, &differenceResult) 
```

# uitableview - NSManaged Object Context 无法删除对象

> ID：15576336
> 
> 赞同：1
> 
> 时间：2013-03-22T17:20:51.143
> 
> 标签：uitableview, core-data, nsdictionary, nsfetchedresultscontroller, nsfetchrequest

我正在为我的 iOS 应用程序使用 Core Data，在我的 fetch 请求中，我通过某个属性执行 fetch GROUP。因为我必须 GROUP BY，所以结果类型是 NSDictionary 而不是托管对象。

表格视图工作正常，我面临的唯一问题是删除该行。它不会删除行，上下文也不会删除对象。

我做了一些挖掘，发现如果我的结果类型是托管对象，那么上下文可以删除对象并且表视图行被删除，但是 GROUP BY 功能丢失了，因为它仅在结果类型是 NSDictionary 对象时才有效.

任何帮助，将不胜感激。

这就是 FETCH REQUEST 方法（已编辑）

```
NSError * anyError = nil;

AppDelegate * applicationDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
NSManagedObjectContext * context = [applicationDelegate managedObjectContext];

NSFetchRequest *request = [[NSFetchRequest alloc] init];
// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Merchant" inManagedObjectContext:context];
[request setEntity:entity];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"premiumActName" ascending:YES];

NSArray *descriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

[request setSortDescriptors:descriptors];

NSPropertyDescription *accountDesc = [[entity propertiesByName] objectForKey:@"premiumActName"];

NSExpressionDescription* objectIdDesc = [NSExpressionDescription new];
objectIdDesc.name = @"objectID";
objectIdDesc.expression = [NSExpression expressionForEvaluatedObject];
objectIdDesc.expressionResultType = NSObjectIDAttributeType;

NSArray *propertiesToFetch= @[accountDesc, objectIdDesc];

[request setPropertiesToFetch:propertiesToFetch];
[request setPropertiesToGroupBy:[NSArray arrayWithObjects:accountDesc, nil]];
[request setResultType:NSDictionaryResultType];
[request setReturnsDistinctResults:YES];

NSArray *distinctResults = [context executeFetchRequest:request error:&anyError];

NSLog(@"function=%s", __PRETTY_FUNCTION__);

NSLog(@" result =%@", distinctResults);

if(!_fetchedResultsController)
{
    _fetchedResultsController = nil;
}

_fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:context sectionNameKeyPath:nil cacheName:nil];

if(![_fetchedResultsController performFetch:&anyError])
{
    NSLog(@" Error =%@", anyError);
}

if (![context save:&anyError])
{
    // Handle the error.
} 
```

那是表视图删除行方法（已编辑）

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    AppDelegate *applicationDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
NSManagedObjectContext * context = [applicationDelegate managedObjectContext];

NSDictionary * dictionary = [self.fetchedResultsController objectAtIndexPath:indexPath];
NSManagedObjectID * iod = [dictionary objectForKey:@"objectID"];

NSManagedObject * object = [context objectWithID:iod];

if (editingStyle == UITableViewCellEditingStyleDelete)
{             
    [context deleteObject:object];

    // Commit the change.
    NSError *error = nil;

    if (![context save:&error])
    {
        NSLog(@"Couldn't save: %@", error);
    }
}

    [self.membersTblView reloadData];
} 
```

这也不会删除对象和表格视图行！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:44:40.820

在你的情况下

```
NSManagedObject * object = [self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

并没有真正返回托管对象而是字典，因此`[context deleteObject:object]`不起作用。

以下可以工作：

*   添加`"objectID"`到`propertiesToFetch`.
*   要删除对象：

    ```
    NSDictionary *dict = [self.fetchedResultsController objectAtIndexPath:indexPath];
    NSManagedObjectID *oid = [dict objectForKey:@"objectId"];
    NSManagedObject *object = [context objectWithID:oid];
    [context deleteObject:object];
    [context save:&error]; 
    ```

由于具有字典结果类型的获取结果控制器*不会自动更新*，因此您还必须调用：

```
[self.fetchedResultsController performFetch:&error];
[self.membersTblView reloadData]; 
```

再次。

# jquery - jQuery 获取 html 并替换为文本框

> ID：15576338
> 
> 赞同：-2
> 
> 时间：2013-03-22T17:20:59.463
> 
> 标签：jquery

我有一个链接，当我点击它时，它应该选择一个 div p 标签内容并将 p 标签替换为文本框和以前存储的内容。

现在我的代码正在删除 p 标签并添加文本框，但它会立即删除文本框并插入 p 标签。用户按下回车后，我希望调用 ajax fn。

这是我试过的，

```
<a href="" id="den">DEN</a>
<div id="test">
<p id="x">I am doing good</p>
</div>
 $("#den").live("click", function () {
       var con = $("#test >p#x").html();
       $("#test > p#x").remove();
       $("#test > p#x").append('<textarea type="text" value='+con+'></textarea>');

}); 
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:22:55.963

删除后`#x`，它不在 DOM 中，因此附加它没有用。如果要替换元素的内容，请`.html()`改用。此外，[`<textarea>`s 有文本内容，而不是`value`属性。](http://www.w3.org/TR/html5/forms.html#the-textarea-element)

```
$("#den").live("click", function () {
    var con = $("#test >p#x").html();
    $("#test > p#x").html('<textarea type="text">'+con+'</textarea>');
}); 
```

请注意，由于元素 ID 必须是唯一的，因此选择器`#test > p#x`被严重过度指定，并且等同于 simple `#x`。还有一种[更简单、更惯用的方法](http://api.jquery.com/html/#html2)来完成整个任务：

```
$("#den").live("click", function () {
    $("#x").html(function (i, oldHtml) {
        return '<textarea type="text">'+oldHtml+'</textarea>';
    });
}); 
```

[http://jsfiddle.net/mattball/PSV7A/](http://jsfiddle.net/mattball/PSV7A/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:24:05.463

您不能在已删除的元素 [JSFIDDLE中进行更改](http://jsfiddle.net/2rwMY/)

笔记 。textarea 没有类型属性

和 。文本区域的设置值不会显示在框中

```
<a href="" id="den">DEN</a>
<div id="test">
<p id="x">I am doing good</p>
</div>
 $("#den").on("click", function () {
   $("#test > p#x").html('<textarea >' +  $("#test >p#x").html() +'</textarea>');
 return false; 
```

});

# java - 通过 jsp (SMTP EXIM) 发送电子邮件时出错

> ID：15576341
> 
> 赞同：0
> 
> 时间：2013-03-22T17:21:05.963
> 
> 标签：java, jsp, ssl, smtp, jakarta-mail

```
Properties props = new Properties();
props.put("mail.smtp.host", "mail.xxx.net");
props.put("mail.smtp.port","25");
props.put("mail.smtp.ssl.enable", "false");
props.put("mail.debug", "true");
props.put("mail.smtp.debug", "true");
props.put ("mail.smtp.starttls.enable", "true");
props.put("mail.transport.protocol", "smtp");
props.put("mail.smtp.socketFactory.port", "587");
props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
props.put("mail.smtp.socketFactory.fallback", "false");
java.security.Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());
Authenticator auth = new javax.mail.Authenticator() {
    protected PasswordAuthentication getPasswordAuthentication(){
        return new PasswordAuthentication("signup@xxx.net", "xxx");
    }
};
Session s = Session.getInstance(props,auth);
MimeMessage message = new MimeMessage(s);
InternetAddress from = new InternetAddress("admin@xxx.net");
message.setFrom(from);
InternetAddress to = new InternetAddress("muhammadanish@gmail.com");
message.addRecipient(Message.RecipientType.TO, to);
message.setSubject("Test from JavaMail.");
//message.setText("Hello from JavaMail!");
message.setContent("Hello from JavaMail!", "text/plain"); 
message.saveChanges();
Transport transport = s.getTransport("smtp");
transport.connect("mail.xxx.net","signup@xxx.net","xxx");
transport.sendMessage(message,message.getAllRecipients());
transport.close(); 
```

但我得到一个错误：

> 服务器遇到内部错误 () 阻止它完成此请求。

堆栈跟踪：

```
org.apache.jasper.JasperException: javax.servlet.ServletException: javax.mail.MessagingException: Could not connect to SMTP host: mail.xxx.net, port: 25;
  nested exception is:
    javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:455)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

根本原因：

```
javax.servlet.ServletException: javax.mail.MessagingException: Could not connect to SMTP host: mail.xxx.net, port: 25;
  nested exception is:
    javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:911)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:840)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:87)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

当我排除代码 SSL 和 TSL

& 调试结果是

```
DEBUG: JavaMail version 1.4.5
DEBUG: successfully loaded resource: /META-INF/javamail.default.providers
DEBUG: Tables of loaded providers
DEBUG: Providers Listed By Class Name: {com.sun.mail.smtp.SMTPSSLTransport=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc], com.sun.mail.smtp.SMTPTransport=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc], com.sun.mail.imap.IMAPSSLStore=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Sun Microsystems, Inc], com.sun.mail.pop3.POP3SSLStore=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Sun Microsystems, Inc], com.sun.mail.imap.IMAPStore=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc], com.sun.mail.pop3.POP3Store=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun Microsystems, Inc]}
DEBUG: Providers Listed By Protocol: {imaps=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Sun Microsystems, Inc], imap=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc], smtps=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc], pop3=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun Microsystems, Inc], pop3s=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Sun Microsystems, Inc], smtp=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]}
DEBUG: successfully loaded resource: /META-INF/javamail.default.address.map
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: useEhlo true, useAuth false
DEBUG SMTP: trying to connect to host "mail.xxx.net", port 25, isSSL false

Mar 23, 2013 8:52:13 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [jsp] in context with path [/KKS] threw exception [javax.servlet.ServletException: javax.mail.MessagingException: Could not connect to SMTP host: mail.xxx.net, port: 25;
nested exception is:
java.net.ConnectException: Connection timed out: connect] with root cause
java.net.ConnectException: Connection timed out: connect 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:36:11.770

您的 SMTP 服务器设置是否允许匿名连接？删除 SSL 后，您将 auth 设置为 false，因此您的客户端不会将登录名/密码传递给 SMTP 服务器。这很好，只要您的 SMTP 服务器允许匿名连接。

另外，您的网络/SMTP 服务器是否支持 IP6？如果您的客户端支持 IP6，Java 的更高版本默认为 IP6，但许多 SMTP 服务器配置在 IP4 上。有关配置 JVM 以强制 IP4 的说明，请参阅此处[使用 JSP 发送电子邮件的这篇文章。](https://stackoverflow.com/questions/7477712/sending-email-using-jsp)这需要在 JVM 上进行设置，因为它是实例化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:23:58.233

正如其他人所说，摆脱套接字工厂的东西。

您可以在[JavaMail 常见问题解答中找到许多其他帮助](http://www.oracle.com/technetwork/java/javamail/faq/index.html)

# r - 读表错误

> ID：15576342
> 
> 赞同：2
> 
> 时间：2013-03-22T17:21:09.863
> 
> 标签：r, read.table

我只需要从 .txt 文件中输入行的子集。我尝试使用 read.table 完成此操作，如下所示`read.table(file.txt,header=TRUE,skip=200000,nrow=500)`：但是，生成的 data.frame 不包含适当的标题，而是 read.table 将第一行的值（即第 200,000 行）分配为列名。有没有办法解决这个问题？我意识到 R 将开始从 .txt 输入数据。文件位于第 200,000 行，并且 header=TRUE 假定第 200,000 行是数据帧的标题。但是，我希望第 1 行（已跳过）成为标题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:32:22.020

你可以这样做：

```
test<-read.table(header=TRUE, text="
a b
1 2
3 4
5 6
7 8
",skip=2,nrow=3)

test1<-read.table(header=TRUE, text="
a b
1 2
3 4
5 6
7 8
",nrows = 1)

colnames(test) <- names(test1) 
```

所以首先读入你想要的数据，然后读入数据的第一行以提取列名。之后，通过第二个“数据集”的名称编辑您需要的数据集的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:34:24.637

正如 69 所说，首先尝试将您的 col 头放在一个单独的文件中

```
header<- read.table(file.txt,header=FALSE,nrow=1) 
```

然后您可以将此 col 标题行附加到您此后检索的任何记录中。

```
read.table(file.txt,header=FALSE,skip=200000,nrow=500, col.names=header)" 
```

# firebase - 捕获 Firebase ajax 错误的最佳方法是什么？

> ID：15576343
> 
> 赞同：1
> 
> 时间：2013-03-22T17:21:14.990
> 
> 标签：firebase

我尝试将此作为声明而不是问题发布在 Google Group 中，但没有通过。:\

Firebase 前几天晚上有一些停机时间，对`FirebaseAuthClient`'`createUser`函数的调用没有通过，但它的回调没有被调用并出现错误。在 Chrome 的开发工具中，我可以看到底层 GET 请求失败。

是否可以更新 Firebase，以便所有依赖 ajax 调用的函数在 ajax 调用失败时返回错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:03:42.060

[Firebase 工程师] 正如您所提到的，过去一周我们有一些停机时间导致请求失败。虽然我们的目标是从源头解决这个问题，但我认为您是对的，因为失败的请求仍然会在客户端上引发错误，可以通过编程方式适当地处理该错误。~~我会将此项目添加到我们的内部跟踪器中，并在新的几周内将其推送。

# matlab - 如何使用 Matlab 在具有约束的单元格数组中选择相同的值？

> ID：15576345
> 
> 赞同：0
> 
> 时间：2013-03-22T17:21:21.497
> 
> 标签：matlab, compare, constraints, combinations

如果我有一个 4x1 单元结构，它代表`a=[A1 A2 A3 A4]`：

```
a=cell(4,1)
a{1}=[1 3 1 0]
a{2}=[3 3 3 3]
a{3}=[3 2 3 2]
a{4}=[3 3 3 2]

B=[1 1 1 2]; %priority 
```

**我想做以下事情：**

选择与优先级相对应的单元格`B=[1 1 1 2]`（其中`B=1`最高优先级和`A=3`）
这意味着，找到任何以 [3 3 3 #] 开头的单元格，其中所有优先级都是 1 `B`。

理想的答案应该是： `a{2}`=`[3 3 3 3]`和`a{4}`=`[3,3,3,2]`

* * *

我的尝试是添加这个：

```
[P arrayind]=min(B) % problem is that arrayind return index=1 only .. not all indices
if P==1
   arrayindex = 1:4 ; %look at each index of the array
   c = a(cellfun(@(x) ismember(x(arrayindex), 3), a));
end 
```

但是，这给了我一个错误说明：

```
Error using cellfun
Non-scalar in Uniform output, at index 1, output 1.
Set 'UniformOutput' to false. 
```

通过调整代码以适应此错误：

```
c = a(cellfun(@(x) ismember(x(arrayindex), 3), a,'UniformOutput',false));

I get this error :

Error using subsindex
Function 'subsindex' is not defined for values of class 'cell'. 
```

现在我被困在这一点上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:50:09.643

这可能不是一个优雅的答案，但它是有效的：

```
%The input cell array.
a = cell(4,1);
a{1} = [1 3 1 0];
a{2} = [3 3 3 3];
a{3} = [3 2 3 2];
a{4} = [3 3 3 2];

%The input priority array.
B = [1 1 1 2];

%The output cell array: preallocated for efficiency.
c = cell(size(a));

j = 1;
for i = 1:size(a,1)
%For each i
    if(all(((cell2mat(a(i))==3)&(B==1))==(B==1)))
    %"cell2mat" converts the cell arrays into easily comparable number arrays.
    %"X==Y" for matrices of the same size, will give you a result matrix of the same size with 1 where the values are equal and 0 elsewhere.
    %Thus, "cell2mat(a(i))==3" would compare the number matrices represented by "a{i}" with "3".
    %"(cell2mat(a(i))==3)&(B==1)" would do a logical AND operation with "B==1", that is, "[1 1 1 0]".
    %In short, since you want whereever "a{i}" is 3 when "B" is 1, we want those "a{i}" where the comparison stated above is the same as "B==1".
    %If the result array is the same as "B=1", we get "[1 1 1 1]" as the result of the comparison "((cell2mat(a(i))==3)&(B==1))==(B==1)".
    %The function "all" checks whether the input to it is completely non-zero: here if we get a "[1 1 1 1]" "all" will give us 1, else 0.
        c{j} = a{i};
        %Insert result array into "c" when condition is satisfied.

        j = j + 1;
        %Increment the index of "c".
    end
end

c = c(1:j-1);
%Truncate unused rows of "c".

cell2mat(c)
%Displays the value of "c" as computed. 
```

# sql - 其他列的 SQL ORDER BY 行为？

> ID：15576347
> 
> 赞同：1
> 
> 时间：2013-03-22T17:21:29.870
> 
> 标签：sql, database, position, sql-order-by

列类型字符。

```
COLUMN 1       COLUMN 2
   1x              A
   1x              B
   2x              A
   2x              B
   3x              A
   3x              B 
```

ORDER BY COLUMN2 结果：

```
COLUMN 1       COLUMN 2
   1x              A
   2x              A
   3x              A
   1x              B
   2x              B
   3x              B 
```

使用这种形式的数据，第一列似乎也已排序，实际上是我正在寻找的结果；（按已排序的第二列分组，在其中按第一列排序）

首先，这种行为是否得到保证？

接下来，如果是这样，什么 SQL 规范满足这种行为？

最后，这是实现预期结果的正确方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T17:23:52.387

不，不能保证。为了保证这一点，您可以执行以下操作：

```
select COL1, COL2 from YOURTABLE order by col2, col1 
```

这告诉您的数据库首先按 COL2 排序，然后如果它们相同，则通过在 COL1 上排序进一步对其进行排序（可以说是打破平局）。您可以根据需要拥有任意数量的这些。

# mysql - Wordpress Pod：在布尔字段上查找

> ID：15576349
> 
> 赞同：1
> 
> 时间：2013-03-22T17:21:37.430
> 
> 标签：mysql, wordpress, podscms

我有一个简单的 pod，它带有一个名为 features 的布尔值。我正在尝试使用该`find()`方法（使用`pods()`快捷方式）列出所有在页面模板上将特色布尔值设置为 true 的 pod 条目，但我无法让它工作。我找到[了这个答案](https://stackoverflow.com/questions/7910798/pod-findrecords-relationship)，但它适用于旧版本，似乎不适用于 Pods 2.0。如果有更简单的方法可以做到这一点，请告诉我我正在尝试这样的事情：

```
$params = array(
    'orderby' => 'date DESC',
    'where' => 'case_study.has_page = 1',
    'limit' => -1
);
$pods = pods( 'case-study', $params ); 
```

我收到的错误是：

```
WordPress database error: [Unknown column 'case_study.has_page' in 'where clause']
SELECT DISTINCT 't'.* FROM 'wp_posts' AS 't' LEFT JOIN 'wp_postmeta' AS 'case_study' ON 'case_study'.'meta_key' = 'case_study' AND 'case_study'.'post_id' = 't'.'id' WHERE 'case_study'.'has_page' = 1 AND 't'.'post_type' = "case_study" ORDER BY 't'.'date' DESC, 't'.'menu_order', 't'.'post_title', 't'.'post_date'

Database Error; SQL: SELECT DISTINCT 't'.* FROM 'wp_posts' AS 't' LEFT JOIN 'wp_postmeta' AS 'case_study' ON 'case_study'.'meta_key' = 'case_study' AND 'case_study'.'post_id' = 't'.'id' WHERE 'case_study'.'has_page' = 1 AND 't'.'post_type' = "case_study" ORDER BY 't'.'date' DESC, 't'.'menu_order', 't'.'post_title', 't'.'post_date'; Response: Unknown column 'case_study.has_page' in 'where clause' 
```

看来它不是`wp_postmeta`正确地加入/在哪里，但我不太清楚如何使用查找参数来做到这一点。它应该是`'case_study'.'meta_key'='has_page'`其他问题之一。我尝试使用是/否选项使该字段成为简单的关系，但仍然没有运气。

感谢您提供任何帮助！非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:51:52.287

If your relationship field is named 'has_page' and it's a simple (custom) then you'll want to use this:

```
has_field.meta_value = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:43:40.090

找到了！编辑 pod 时，我转到“高级”设置选项卡，在“功能类型”下，我从“帖子”将其设置为“自定义”。瞧，它现在可以工作了！我想这个设置告诉`find`调用如何对表进行操作。我的最终查找参数如下：

```
$params = array(
    'orderby' => 'date DESC',
    'where' => 'has_page.meta_value = 1',
    'limit'   => -1
);
$casestudies = pods( 'case_study', $params ); 
```

非常感谢斯科特的快速和出色的帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T22:14:24.287

最终解决方案：

我最初的内容类型是 post 的扩展，它似乎不能很好地与关系字段（至少是基本字段）配合使用，因为它似乎假设他们生成自己的表格，而他们并不总是这样做。在这种情况下，由于它是一个简单的自定义关系，数据都存储在`wp_postmeta`表中。

我找到的最佳解决方案是将我的 pod 重建为高级内容类型。这样，Pod 就可以自己生成一个表，因此可以通过简单`'where' => 'has_page' = 1`的而不是所有关系复杂性来检查布尔值。感谢您的所有帮助斯科特。

# php - 连接到 Windows azure 云的 mysql 数据库时出错

> ID：15576350
> 
> 赞同：0
> 
> 时间：2013-03-22T17:21:39.193
> 
> 标签：php, mysql, windows, azure

我已经在**windows azure cloud上上传了我的****PHP 网站**。我使用的数据库是**mysql**。但是在连接到 azure 的远程 mysql 数据库时，我遇到了一个错误。最初它会提示输入密码，即使它是在命令本身中指定的。但是，无论我为该网站使用了什么密码，它们都给出了以下错误。

 ***** * *

**"**** "Microsoft Windows XP [版本 5.1.2600] (C) 版权所有 1985-2001 Microsoft Corp.

**C:\Documents and Settings\admin>mysql -h*数据源*-u用户*名 -p**密码*-D*数据库***

**输入密码：** **********

 ****错误 1044 (42000): 拒绝访问用户 '*****'@'%'**到数据库******** ' *******'* * **""****

 *** * *

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T11:24:40.943

尝试重新启动 MySQL 服务。我在将数据放入 Azure MySQL 数据库的表时遇到了很多问题（我什至无法创建新表）。

我刚刚重新启动 MySQL Workbench 并再次连接到 Azure 的 ClearDB 数据库，现在我能够执行查询（插入、选择、删除、删除等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:44:57.980

您要部署的数据库有多大？Windows Azure 网站附带的 MySQL 数据库为 20MB。如果您的数据库大于 20MB，您在尝试向其推送数据时会遇到问题。********

# php - 如何更改以下 PHP 代码，以便它“轮询”站点以获取更新的变量

> ID：15576352
> 
> 赞同：-1
> 
> 时间：2013-03-22T17:21:39.977
> 
> 标签：php, shadowbox

我不确定我是否正确地标记了我的标题，但有人告诉我下面的代码不起作用，因为浏览器窗口在提交更新内容的表单时永远不会重新加载（它位于影子框内）。

```
<?php 
    if(isset($_SESSION['contentupdated'])) { 
       unset($_SESSION['contentupdated']); 
       echo 'window.location.reload();'; 
    } 
?> 
```

我将如何根据上述“轮询”站点以查看是否`$_SESSION['contentupdated']`设置了变量的代码编写 PHP 代码？下面，我将粘贴我尝试使用的完整 shadowbox 代码。更新后的代码将替换 JavaScript 代码中的 PHP 代码。这样，在关闭 shadowbox 时，网站将轮询该网站以查看是否有更新的代码（至少这是我的目标）。

有人告诉我，我必须对网站进行投票以检查更新，但我搜索了谷歌并找不到解决方案，因为所有结果都显示为“如何创建网站投票”。

```
<script>
    Shadowbox.init({ 
        onOpen: onShOpen, 
        onClose: onShClose, 
    }); 

    function onShOpen() { 
        document.body.style.overflow = "hidden"; 
        return true; 
    } 

    function onShClose() { 
        document.body.style.overflow = "auto"; 
        <?php 
            if(isset($_SESSION['contentupdated'])) {
                unset($_SESSION['contentupdated']); 
                echo 'window.location.reload();'; 
            } 
        ?>
        return true; 
    }
</script> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T17:26:45.973

为什么要使用 javascript 重新加载页面。您可以使用标头位置在 php 中执行此操作：

```
<?php if(isset($_SESSION['contentupdated'])) { unset($_SESSION['contentupdated']); header('Location:yourpage.php');die(); } ?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T17:27:41.587

只是列出想到的事情，不是一个很好的答案......

使用 PHP 进行长轮询： [如何实现基本的“长轮询”？](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)

PHP 和 Comet：[在 PHP 中使用 comet？](https://stackoverflow.com/questions/603201/using-comet-with-php)

HTML5 Web 套接字：[http ://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

[使用NodeJS](http://nodejs.org/)等其他技术的非 PHP 解决方案。

**更新**：我添加这个的原因是 OP 似乎缺乏一些词汇来有效地搜索和回答他的问题。

# python - 通过 IPython 使用 Jython：readline 仍然是个问题吗？

> ID：15576355
> 
> 赞同：31
> 
> 时间：2013-03-22T17:21:46.790
> 
> 标签：python, jython, ipython

我想将 Jython 解释器与 IPython 一起使用，这样我就可以使用制表符补全之类的东西，也许还可以使用 IPython 笔记本。[IPython 常见问题解答站点](http://ipython.org/faq.html)围绕这是否可能进行了讨论。我有两个问题：

1.  假设 Jython*可以*与 IPython 一起工作：我实际上如何将它们绑定在一起？当我执行`$ ipython`时，我正在运行一个 Python 解释器。如何设置 IPython 以便运行 Jython 解释器？

2.  即使我知道如何做#1，我也四处搜索，似乎放弃了让 Jython 与 IPython 一起工作的努力，也许是因为那个常见问题解答网站上提到的 readline 问题。但是，搜索表明 readline 应该在 Jython 中工作；请参阅[jython 维基](http://wiki.python.org/jython/ReadlineSetup)。所以，这里的问题是：如果某种 readline 功能可用，现在是否可以在 IPython 中使用 Jython？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-04T14:23:14.693

可悲的是，我认为这真的不可能。这可能是因为 ipython 对底层操作系统有一些明确的依赖关系，这在 Jython 上效果不佳，因为它在 os 计算机上进行调度。Ipython 认为这是一个错误，将来会在他们的网站上修复。希望这有帮助！

# javascript - AngularJS DOM / 没有 jQuery 的文档选择

> ID：15576362
> 
> 赞同：5
> 
> 时间：2013-03-22T17:22:02.063
> 
> 标签：javascript, angularjs

AngularJS 没有内置的 DOM 选择引擎，但提供了一些实用方法来处理 jQuery 为典型应用程序提供的部分功能。

但是，DOM 选择仍然是王道，我正试图将 jQuery 排除在我的应用程序之外，仅出于 DOM 选择的目的。

Angular 提供了 $document 服务作为可注入对象。我觉得这很麻烦。例如，要使用 $document 实现本机 DOM 选择，您需要将 $document 注入所需的所有指令并调用 querySelectorAll，然后使用 Angular 扩展它：

```
angular.element( $document[0].querySelectorAll('#element') ) 
```

这很愚蠢。

在此期间，我为自己提供了一个全局助手，但它不使用 Angular 的包装 $document...

```
 // Create a shortcut to querySelectorAll
  window.query = function(selector) {
    return document.querySelectorAll( selector )
  }

  // For use inside a directive like so...
  angular.element( query('#element') ) 
```

AngularJS 对全局变量过敏，并为保护和可测试性包装了全局变量。有没有一种干净的方法可以利用 querySelectAll 而无需将 $document 传递到每个指令中？我可以以与 jQuery 相同的方式扩展 angular.element 但使用 querySelectorAll 吗？

**编辑：**

我还想注意原始 JQLite 库支持基本选择器[https://code.google.com/p/jqlite/wiki/UsingJQLite#Supported_Selectors](https://code.google.com/p/jqlite/wiki/UsingJQLite#Supported_Selectors)。

然而，AngularJS 实现不支持选择器，也似乎没有提到这个功能遗漏 - [http://docs.angularjs.org/api/angular.element](http://docs.angularjs.org/api/angular.element)

相反，AngularJS 会：

```
throw Error('selectors not implemented'); 
```

^ 当传递给 angular.element 的项目是不以“<”开头的字符串时。

如果是这样就好了：

```
return document.querySelectorAll( element ) 
```

...带有一些基本的错误预防逻辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T18:49:37.963

`$document`是一个包装，真的。也许 Angular 的作者之一可以证实这一点，但我认为它并不是要注入指令中。也不是`$window`。它仅适用于您需要处理`$window`or `$document`in a `Controller`or a的罕见情况和情况`Service`。

当您在指令中时，将假定 DOM。因此，如果您愿意，请随意使用`document`或`window`直接使用。

角度的设计方式，您不需要复杂的选择器。如果您正在做一个复杂的选择（甚至在指令内部），可能有一种更简单的方法可以做到这一点。请注意，该指令使您可以直接访问它所附加的元素。现在您应该主要关注元素周围的元素，可能是兄弟元素或直接子元素。如果您正在寻找其他地方的节点，那么这是“气味”的第一个迹象。

如果您可以让我们知道您想要实现的目标，那么有人可以向您建议一个可以很好地解决问题的解决方案。

# javascript - 使用Javascript从字符串中删除字符

> ID：15576365
> 
> 赞同：1
> 
> 时间：2013-03-22T17:22:07.923
> 
> 标签：javascript

我有一个以下格式的字符串。我试图在 Java Script 中创建一个函数来删除某些字符。

示例字符串：

```
Var s = '18160 ~ SCC-Hard Drive ~ 4 ~ d | 18170 ~ SCC-SSD ~ 4 ~ de | 18180 ~ SCC-Monitor ~ 5 ~ | 18190 ~ SCC-Keyboard ~ null ~' 
```

期望的结果：

```
s = 'SCC-Hard Drive ~ 4 ~ d | SCC-SSD ~ 4 ~ de | SCC-Monitor ~ 5 ~ |SCC-Keyboard ~ null ~' 
```

如果您注意到上面的 ID，例如 18160、18170、18180 和 18190 已被删除。这只是一个例子。结构如下：

```
id: 18160
description : SCC-Hard Drive
Type: 4
comment: d 
```

因此，如果有多个项目，它们会使用 Pike 分隔符连接起来。所以我的要求是从上述结构中的给定字符串中删除 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:25:24.870

使用[`string.replace()`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace)方法也许。

```
s.replace(/\d{5}\s~\s/g, "") 
```

* * *

```
\d{5} - matches 5 digits (the id)
\s    - matches a single space character
~     - matches the ~ literally 
```

输出：

```
"SCC-Hard Drive ~ 4 ~ d | SCC-SSD ~ 4 ~ de | SCC-Monitor ~ 5 ~ | SCC-Keyboard ~ null ~" 
```

另外，请注意这`Var`是无效的。应该是`var`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:41:12.053

我将使用以下正则表达式的替换功能，因为 ID 字段中的位数可能会有所不同。

```
s.replace(/(^|\|\s)\d+\s~\s/g, '$1') 
```

# php - Xdebug 无法在 Windows 上使用 PHP 5.5.0 beta1

> ID：15576368
> 
> 赞同：0
> 
> 时间：2013-03-22T17:22:14.123
> 
> 标签：php, zend-framework, xdebug, beta

我已经在带有 Apache 2.4 (TS) 的 Windows x64 上安装了最新的**php 5.5.0 beta1 。**

我无法让**Xdebug**工作。

我想知道是否有人知道新的 php beta 是否根本不支持 Xdebug 或者我做错了。我花了最后一个小时尝试网络上的所有已知问题。

**环境**

```
Apache Version Apache/2.4.4 (Win64) PHP/5.5.0beta1
Compiler MSVC11 (Visual C++ 2012) 
```

**我做了什么**

*   **httpd.conf** `LoadModule php5_module "E:\wamp\php\php5apache2_4.dll"`
*   **php.ini** `zend_extension=E:\wamp\php\ext\php_xdebug.dll`
*   **E:\wamp\php\ext\php_xdebug.dll** `php_xdebug-2.2.1-5.4-vc9-x86_64`
*   **php.exe -m** `Failed loading E:\wamp\php\ext\php_xdebug.dll`
*   **命令行中的php.exe -i**产生以下错误（*如果我注释掉 php.ini 中的 zend_extension 行，该错误就会消失*）：

    **php.exe - 未找到入口点**
    `The procedure entry point zend_unmangle_property_name could not be located in the dynamic link library php5ts.dll`

**Xdebug 向导输出**

此外，我在[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)中的 phpinfo 的结果如下。当phpinfo说VC11时，我不确定为什么它说我正在使用VC6 ...

```
Summary

Xdebug installed: no
Server API: Command Line Interface
Windows: yes - Compiler: MS VC6 - Architecture: x64
Zend Server: no
PHP Version: 5.5.0
Zend API nr: 220121212
PHP API nr: 20121212
Debug Build: no
Thread Safe Build: yes
Configuration File Path: C:\Windows
Configuration File: E:\wamp\php\php.ini
Extensions directory: E:\wamp\php\ext
The compiler (MS VC6) that this PHP was build with, is no longer supported. Please upgrade to a version that was built with MS VC9. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:55:18.523

我认为最新的 xdebug 只支持 php 5.4。Xdebug 需要完全相同的 php 版本才能工作。

# javascript - jQuery.clone(false) 仍然从原始源复制数据

> ID：15576374
> 
> 赞同：0
> 
> 时间：2013-03-22T17:23:02.617
> 
> 标签：javascript, jquery, html, dom

[这篇文章是对上](https://stackoverflow.com/questions/15561912/jquery-cannot-recognize-appended-cloned-elements-using-jquery-appendto)一篇文章的跟进，该应用程序在 jQuery 1.4 上运行，但感谢任何版本的建议：

当前的问题是甚至使用

```
rowTemplate = j('.form-denomination:first-child').clone(); 
```

和

```
var newRow = rowTemplate.clone().attr('id', newRowId); 
```

`newRow`无论我从网页中选择什么，我都可以看到仍然使用 firebug 将旧数据保存在列表中的第一个子项中。

例如，如果要克隆的列表的第一个子节点是 node[0]

```
<select id="_denominations[0].id.denominationId" class="removableDenom" name="denominations[0].id.denominationId">
    <option value="100">100</option>
    <option value="1000">1000</option>
    <option value="10000">10000</option>
    <option value="500">500</option>
    <option value="5000">5000</option>
    <option value="50000" selected="selected">50000</option>
</select> 
```

我在节点 [2] 之后添加了一个新行，它看起来像

```
<select id="_denominations[3].id.denominationId" class="removableDenom" name="denominations[3].id.denominationId">
    <option value="100">100</option>
    <option value="1000">1000</option>
    <option value="10000">10000</option>
    <option value="500">500</option>
    <option value="5000">5000</option>
    <option value="50000" selected="selected">50000</option>
</select> 
```

看到它仍然显示 50000 作为下拉框的选择，即使它在网页上显示 100 那么这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:40:59.587

“**它仍然显示50000作为下拉框的选择，即使它在网页上显示100** ”

您看到的是 HTML 源代码。50000 不是页面上显示的当前值，而是页面加载时显示的（或者更确切地说在这种情况下）显示的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:45:50.183

`.clone()`恐怕你要求的比它所能提供的要多。它不会为您更新 id；它不会为您更新名称；它不会为您清除表单数据。您将不得不自己完成所有这些事情 - 您可以在模板上清除的表单数据，但是您在插入时必须设置的 id。

```
rowTemplate = j('.form-denomination:first-child').clone();
rowTemplate.find("input[value], textarea").val("");
rowTemplate.find("select").each(function() { this.selectedIndex = 0; }); 
```

如果我们能够假设第一行总是有类似的 id 和名称，`[0]`那么在插入之前的更新会更容易一些：

```
var rowId = "[" + j('.form-denomination').length + "]";
var newRow = rowTemplate.clone();
newRow.find("[id]").each(function() { var $t = $(this); $t.attr("id", $t.attr("id").replace("[0]", rowId)); });
newRow.find("[name]").each(function() { var $t = $(this); $t.attr("name", $t.attr("name").replace("[0]", rowId)); }); 
```

# c++ - ifstream 在 Xcode 中不起作用？

> ID：15576377
> 
> 赞同：4
> 
> 时间：2013-03-22T17:23:15.277
> 
> 标签：c++, ifstream

我正在尝试使用 ifstream 处理一些文件。一切似乎都很好，但是当我尝试打开一个文件时它不起作用。无论我尝试输入字符串变量还是名称的字符串文字。我尝试访问的文件与项目位于同一目录中，并且确实包含内容。

该项目不会显示任何错误并且会编译，但它只会说它每次都无法访问该文件。

额外的头文件“simpio.h”和“console.h”只是stanford 提供的库。

```
#include <iostream>
#include "console.h"
#include "simpio.h"
#include <fstream>
#include <string>
using namespace std;

int countLines(ifstream & in)
{
    int count = 0;
    while (true) {
        string line;
        getline(in, line);
        if (in.fail()) break;
        count++;
    }
    return count;
}

int main()
{
    ifstream in;
    while (true) {
        cout << "Enter name: ";
        string s = getLine();
        in.open(s.c_str());
        if (!in.fail()) break;
        cout << "Couldn't open file, try again!" << endl;
        in.clear();
    }

    cout << "Num lines = " << countLines(in) << endl;

    return 0;
} 
```

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:32:26.193

你有两个选择：

1）使用Objective-C++（删除.m扩展名并用.mm替换它）

2）转到项目设置并添加这些值：

```
GLIBCXX_DEBUG=1 
GLIBCXXDEBUGPEDANTIC=1 
```

在预处理器宏中。

旧版 Xcode [![图片](../Images/3e837825ca27ce445acb638aee49e648.png)](https://i.stack.imgur.com/7ddv2.png) ：！较新的 Xcode：

![图片](../Images/49ceba512f70612105dfe36daa9b5043.png)！

示例代码：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main(int argc, const char * argv[])
{
    ofstream myfile;
    myfile.open ("/Developer/afile.txt");
        if(!myfile)
        {
        std::cout << "ERROR" std::endl;
        }    
    myfile << "Writing this to a file.\n";
    myfile.close();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T22:16:08.740

如果您不想弄乱 Xcode 中的任何内容，担心您可能会破坏其他设置，请执行以下操作：

构建并运行控制台程序或应用程序后，请转到通常位于项目布局左侧的文件列表，找到“项目”目录，右键单击或选项单击并选择“在 Finder 中显示” . 这是 Xcode 每次为特定项目运行它时转储构建的地方。每个工作区都有自己的构建文件夹。你应该在那里找到你选择或创建的文件，如果你想在那里添加你自己的文件，只需拖动它，然后你可以从你的控制台或应用程序中调用它： myfile.open("file.txt");

或者只是更改项目的工作目录并使用可能比 /Developer/Gibberish/Build/Debug/whatever 更易于访问的文件夹。

这使得将您的代码移植到 Win32 或其他系统变得容易，至少对我来说是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-28T07:47:57.330

[http://kentarotanaka.com/how-to-read-input-file-for-c-in-xcode/](http://kentarotanaka.com/how-to-read-input-file-for-c-in-xcode/)

将文本文件移动到工作区的项目目录将有所帮助，如上述链接中所述。

# highcharts - Inner part of donut chart suddenly not "fitting"

> ID：15576384
> 
> 赞同：0
> 
> 时间：2013-03-22T17:23:37.713
> 
> 标签：highcharts

I haven't made any changes to the .js code I use for the donut chart we use on our website ([http://www.innovatorfunds.com/fund.php](http://www.innovatorfunds.com/fund.php)). However, when I went to the site today the pie chart is busted. Specifically, the inner pie chart doesn't "fit" anymore. It's smaller than it should be and not centered. Any wisdom?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:10:24.233

设置在`plotOptions.pie`每个`series`对象中：

```
series: [{
    data: [...],
    center: ['50%','50%']
}, {
    data: [...],
    center: ['50%','50%']
}] 
```

# html - CSS +/- x 像素的宽度和高度动画

> ID：15576385
> 
> 赞同：1
> 
> 时间：2013-03-22T17:23:41.543
> 
> 标签：html, css, css-animations

有什么方法可以为 div 设置动画（最好不使用 javascript），使其在宽度/高度上增加或减少 5px？我的意思不是使用`scale(0.95)`or`zoom: 95%`因为这取决于 div 的原始大小，我希望始终准确更改 5px。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:52:19.553

## 没有 jQuery

*   要求`height`增量`div`是已知的，而不是假定的。

```
div.growable {
    background: red;
   color: white;
   -webkit-transition: height 200ms ease-in-out;
   height: 100px;
}
div.growable:hover {
   height: 105px;
} 
```

> **小提琴**：http: [//jsfiddle.net/Xh4vC/](http://jsfiddle.net/Xh4vC/)

## 使用 jQuery

*   允许更改`height`为现有值的增量或减量，而不关心该值是什么。

```
$(function(){
    $('#growDiv').click(function(){
        $('div.growable-js').animate({'height' :'+=5px'}, 200);
    });
   $('#shrinkDiv').click(function(){
       $('div.growable-js').animate({'height': '-=5px'}, 200);
    });
}); 
```

> **小提琴**：http: [//jsfiddle.net/Xh4vC/](http://jsfiddle.net/Xh4vC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:53:05.060

不需要 div 大小...

[http://jsfiddle.net/5rDar/4](http://jsfiddle.net/5rDar/4)

```
div {
    width: 200px;
    height: 200px;
    background-color: #eee;
    transition: padding .5s;
    padding: 10px;
}
div:hover {
    padding: 15px;
} 
```

这是主 div 不转换但父 div 转换的变体。根据您的情况，这可能更有用。

[http://jsfiddle.net/5rDar/3](http://jsfiddle.net/5rDar/3)

```
div.outer {
    transition: padding .5s;
    padding: 10px;
    position: relative;
}
div.outer:hover {
    padding: 15px;
}
div.inner {
    top: 10px;
    right: 10px;
    bottom: 10px;
    left: 10px;
    position: absolute;
}

<div class="outer">
    <div class="inner">
    </div>
</div> 
```

# performance - 分区：视图与具有继承的表 - 有什么意义？

> ID：15576389
> 
> 赞同：1
> 
> 时间：2013-03-22T17:23:51.467
> 
> 标签：performance, postgresql

我的基本问题是具有继承性的表的父表是否与视图相同/执行类似于视图，如果是这样（似乎是这种情况），为什么不使用视图。

为了对此进行调查，我决定尝试评估单个表、基于月表的视图和具有继承的月表之间的性能差异。这会变得很长，因此请随意提出建议，可能会在 stackoverflow 之外附加代码，如果这是首选的话，或者我可以简化它的其他方式。我也会描述我在做什么，所以你不一定需要运行代码。

2012 年每分钟我想要 200 个实体，每分钟有 50 个值。首先，我制作了我的大表“public.test_wide_no_inheritance”和每个较小的月表“public.test_wide_inheritance_YYYYMM”，并继承到一个空表，如以前的“public.test”。 test_wide_inheritance”，最后是基于较小表的视图，“test_wide_inheritance_2012”：

```
create table public.test_wide_no_inheritance
as
select *
from(
SELECT entity, localt, 
random()as val01,random()as val02,random()as val03,random()as val04,random()as val05,random()as val06,random()as val07,random()as val08,random()as val09,random()as val10,
random()as val11,random()as val12,random()as val13,random()as val14,random()as val15,random()as val16,random()as val17,random()as val18,random()as val19,random()as val20,
random()as val21,random()as val22,random()as val23,random()as val24,random()as val25,random()as val26,random()as val27,random()as val28,random()as val29,random()as val30,
random()as val31,random()as val32,random()as val33,random()as val34,random()as val35,random()as val36,random()as val37,random()as val38,random()as val39,random()as val40,
random()as val41,random()as val42,random()as val43,random()as val44,random()as val45,random()as val46,random()as val47,random()as val48,random()as val49,random()as val50
FROM generate_series('2012-01-01'::timestamp, '2012-12-31'::timestamp, interval '1 minutes') as localt
join 
(select *
FROM generate_series(1, 200, 1) as entity) as entity
on 1=1) as data;

CREATE INDEX ix_public_test_wide_no_inheritance_entity
  ON public.test_wide_no_inheritance (entity);

CREATE INDEX ix_public_test_wide_no_inheritance_localt
  ON public.test_wide_no_inheritance (localt);

create table public.test_wide_inheritance (like public.test_wide); 

CREATE TABLE public.test_wide_inheritance_201201 (
    CHECK ( localt >= DATE '2012-01-01' AND localt < DATE '2012-02-01' )
) INHERITS (public.test_wide_inheritance);
CREATE TABLE public.test_wide_inheritance_201202 (
    CHECK ( localt >= DATE '2012-02-01' AND localt < DATE '2012-03-01' )
) INHERITS (public.test_wide_inheritance);
CREATE TABLE public.test_wide_inheritance_201203 (
    CHECK ( localt >= DATE '2012-03-01' AND localt < DATE '2012-04-01' )
) INHERITS (public.test_wide_inheritance);
CREATE TABLE public.test_wide_inheritance_201204 (
    CHECK ( localt >= DATE '2012-04-01' AND localt < DATE '2012-05-01' )
) INHERITS (public.test_wide_inheritance);
CREATE TABLE public.test_wide_inheritance_201205 (
    CHECK ( localt >= DATE '2012-05-01' AND localt < DATE '2012-06-01' )
) INHERITS (public.test_wide_inheritance);
CREATE TABLE public.test_wide_inheritance_201206 (
    CHECK ( localt >= DATE '2012-06-01' AND localt < DATE '2012-07-01' )
) INHERITS (public.test_wide_inheritance);
CREATE TABLE public.test_wide_inheritance_201207 (
    CHECK ( localt >= DATE '2012-07-01' AND localt < DATE '2012-08-01' )
) INHERITS (public.test_wide_inheritance);
CREATE TABLE public.test_wide_inheritance_201208 (
    CHECK ( localt >= DATE '2012-08-01' AND localt < DATE '2012-09-01' )
) INHERITS (public.test_wide_inheritance);
CREATE TABLE public.test_wide_inheritance_201209 (
    CHECK ( localt >= DATE '2012-09-01' AND localt < DATE '2012-10-01' )
) INHERITS (public.test_wide_inheritance);
CREATE TABLE public.test_wide_inheritance_201210 (
    CHECK ( localt >= DATE '2012-10-01' AND localt < DATE '2012-11-01' )
) INHERITS (public.test_wide_inheritance);
CREATE TABLE public.test_wide_inheritance_201211 (
    CHECK ( localt >= DATE '2012-11-01' AND localt < DATE '2013-01-01' )
) INHERITS (public.test_wide_inheritance);
CREATE TABLE public.test_wide_inheritance_201212 (
    CHECK ( localt >= DATE '2012-12-01' AND localt < DATE '2013-01-01' )
) INHERITS (public.test_wide_inheritance);
CREATE INDEX ix_test_wide_inheritance_201201_localt ON public.test_wide_inheritance_201201 (localt);
CREATE INDEX ix_test_wide_inheritance_201202_localt ON public.test_wide_inheritance_201202 (localt);
CREATE INDEX ix_test_wide_inheritance_201203_localt ON public.test_wide_inheritance_201203 (localt);
CREATE INDEX ix_test_wide_inheritance_201204_localt ON public.test_wide_inheritance_201204 (localt);
CREATE INDEX ix_test_wide_inheritance_201205_localt ON public.test_wide_inheritance_201205 (localt);
CREATE INDEX ix_test_wide_inheritance_201206_localt ON public.test_wide_inheritance_201206 (localt);
CREATE INDEX ix_test_wide_inheritance_201207_localt ON public.test_wide_inheritance_201207 (localt);
CREATE INDEX ix_test_wide_inheritance_201208_localt ON public.test_wide_inheritance_201208 (localt);
CREATE INDEX ix_test_wide_inheritance_201209_localt ON public.test_wide_inheritance_201209 (localt);
CREATE INDEX ix_test_wide_inheritance_201210_localt ON public.test_wide_inheritance_201210 (localt);
CREATE INDEX ix_test_wide_inheritance_201211_localt ON public.test_wide_inheritance_201211 (localt);
CREATE INDEX ix_test_wide_inheritance_201212_localt ON public.test_wide_inheritance_201212 (localt);
CREATE INDEX ix_test_wide_inheritance_201201_entity ON public.test_wide_inheritance_201201 (entity);
CREATE INDEX ix_test_wide_inheritance_201202_entity ON public.test_wide_inheritance_201202 (entity);
CREATE INDEX ix_test_wide_inheritance_201203_entity ON public.test_wide_inheritance_201203 (entity);
CREATE INDEX ix_test_wide_inheritance_201204_entity ON public.test_wide_inheritance_201204 (entity);
CREATE INDEX ix_test_wide_inheritance_201205_entity ON public.test_wide_inheritance_201205 (entity);
CREATE INDEX ix_test_wide_inheritance_201206_entity ON public.test_wide_inheritance_201206 (entity);
CREATE INDEX ix_test_wide_inheritance_201207_entity ON public.test_wide_inheritance_201207 (entity);
CREATE INDEX ix_test_wide_inheritance_201208_entity ON public.test_wide_inheritance_201208 (entity);
CREATE INDEX ix_test_wide_inheritance_201209_entity ON public.test_wide_inheritance_201209 (entity);
CREATE INDEX ix_test_wide_inheritance_201210_entity ON public.test_wide_inheritance_201210 (entity);
CREATE INDEX ix_test_wide_inheritance_201211_entity ON public.test_wide_inheritance_201211 (entity);
CREATE INDEX ix_test_wide_inheritance_201212_entity ON public.test_wide_inheritance_201212 (entity);

insert into public.test_wide_inheritance_201201 select * from public.test_wide_no_inheritance where localt >= '2012-01-01' AND localt < '2012-02-01';
insert into public.test_wide_inheritance_201202 select * from public.test_wide_no_inheritance where localt >= '2012-02-01' AND localt < '2012-03-01';
insert into public.test_wide_inheritance_201203 select * from public.test_wide_no_inheritance where localt >= '2012-03-01' AND localt < '2012-04-01';
insert into public.test_wide_inheritance_201204 select * from public.test_wide_no_inheritance where localt >= '2012-04-01' AND localt < '2012-05-01';
insert into public.test_wide_inheritance_201205 select * from public.test_wide_no_inheritance where localt >= '2012-05-01' AND localt < '2012-06-01';
insert into public.test_wide_inheritance_201206 select * from public.test_wide_no_inheritance where localt >= '2012-06-01' AND localt < '2012-07-01';
insert into public.test_wide_inheritance_201207 select * from public.test_wide_no_inheritance where localt >= '2012-07-01' AND localt < '2012-08-01';
insert into public.test_wide_inheritance_201208 select * from public.test_wide_no_inheritance where localt >= '2012-08-01' AND localt < '2012-09-01';
insert into public.test_wide_inheritance_201209 select * from public.test_wide_no_inheritance where localt >= '2012-09-01' AND localt < '2012-10-01';
insert into public.test_wide_inheritance_201210 select * from public.test_wide_no_inheritance where localt >= '2012-10-01' AND localt < '2012-11-01';
insert into public.test_wide_inheritance_201211 select * from public.test_wide_no_inheritance where localt >= '2012-11-01' AND localt < '2012-12-01';
insert into public.test_wide_inheritance_201212 select * from public.test_wide_no_inheritance where localt >= '2012-12-01' AND localt < '2013-01-01';

create or replace view test_wide_inheritance_2012 as 
          SELECT * FROM public.test_wide_inheritance_201201
UNION ALL SELECT * FROM public.test_wide_inheritance_201202
UNION ALL SELECT * FROM public.test_wide_inheritance_201203
UNION ALL SELECT * FROM public.test_wide_inheritance_201204
UNION ALL SELECT * FROM public.test_wide_inheritance_201205
UNION ALL SELECT * FROM public.test_wide_inheritance_201206
UNION ALL SELECT * FROM public.test_wide_inheritance_201207
UNION ALL SELECT * FROM public.test_wide_inheritance_201208
UNION ALL SELECT * FROM public.test_wide_inheritance_201209
UNION ALL SELECT * FROM public.test_wide_inheritance_201210
UNION ALL SELECT * FROM public.test_wide_inheritance_201211
UNION ALL SELECT * FROM public.test_wide_inheritance_201212; 
```

如果您是在家关注，请注意第一个表是 45GB，每个月表是 3.9GB，大表每个索引是 2.2GB，12 个月表每个索引是 242MB。我从所有这些中遗漏了主键，但如果这可能会扭曲我的结果，请告诉我。

接下来，我需要一种评估性能的方法，这肯定很棘手，并且取决于用例，所以我想出了一些我希望具有代表性和解析的查询`EXPLAIN ANALYZE`。本质上，我创建了随机查询，其中为一半的查询（也是随机的）选择了可变天数。它还随机使用了视图、大表或使用继承的父表。我这样做是在`R`使用`RPostgreSQL`：

```
wait <- function(wait.time = 5){
        now <- proc.time()[3]
        while(proc.time()[3] < (now + wait.time)) dum <- 0
}
table_choices <- c("public.test_wide_no_inheritance",
                   "public.test_wide_inheritance_2012",
                   "public.test_wide_inheritance")
set.seed(12345)
starts <- sample(1:366,1000,replace=T)
stops <- sample(1:366,1000,replace=T)
entity <- sample(1:200,1000,replace=T)
table <- sample(1:3,1000,replace=T)
st <- data.frame(starts,stops,entity,table)
st_final <- st[stops>starts,]
st_final$start_date <- first_day + st_final$starts
st_final$end_date <- first_day + st_final$stops
st_final$aday <- 0
st_final2 <- st_final
st_final2$end_date  <- st_final2$start_date + 1
st_final2$aday <- 1
st_final <- rbind(st_final,st_final2)
set.seed(12345)
st_final <- st_final[sample(nrow(st_final)),]
query <- list()
dat <- list()
result <- list()
k <- as.vector(0)
for(k in 1:nrow(st_final)){
  wait(5)
  query[[k]] <- paste("explain analyze 
                      select entity,localt, val01, val02, val03 
                      from ",table_choices[st_final$table[k]]," 
                      where entity = ",
                      st_final$entity[k]," and localt >= '",
                      st_final$start_date[k],"' and localt < '",
                      st_final$end_date[k],"' limit 100",sep="")
  dat[[k]] <- fetch(dbSendQuery(con,
                                statement = paste(query[k])),n=-1)
  result[[k]] <- data.frame(table=st_final$table[k],
                            runtime=as.numeric(substr(dat[[k]],
                            regexpr("Total runtime: ",
                            dat[[k]])[1]+15,nchar(dat[[k]])-5)),
                            entity=st_final$entity[k],
                            start=st_final$start_date[k],
                            end=st_final$end_date[k], 
                            diff= as.numeric(st_final$end_date[k]) - 
                              as.numeric(st_final$start_date[k]))
  print(k)
}
results <- do.call("rbind", result) 
```

我没有看到视图和继承表之间有任何显着差异。这可能是因为我在较小的表上使用了约束吗？继承的版本是否扫描所有约束，视图也是如此？我不应该使用约束吗？除了使您的模式对 Postgresql 更加独特之外，我不了解表继承添加了什么。

这是显示结果的图表：

![在此处输入图像描述](../Images/286ca862afbdcb4ca458aa6b868417d7.png) ![在此处输入图像描述](../Images/dc03ea7eaecee2793fe7589659778a78.png) ![在此处输入图像描述](../Images/c0a1f957fdb915b8d01098281e0bf229.png) ![在此处输入图像描述](../Images/cc27a5708953c85aeb61a9166ab0c783.png) ![在此处输入图像描述](../Images/63ccb2aea573287d3fb4f4cca7a3606d.png) ![在此处输入图像描述](../Images/8f74b08ee74b3e7af3c35265bda02f0c.png)

这是我使用 Postgres 9.2.3 的一些设置：

```
name                    setting
max_connections             100
shared_buffers          2097152
effective_cache_size    6291456
maintenance_work_mem    1048576
work_mem                 262144 
```

非常感谢您提供的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:51:09.863

也可以从表的联合或内/外连接或过滤器中创建视图。父表旨在使数据库模型更紧密地匹配面向对象编程的结构。

# .net - Make Entity Framework ignore Discriminator column

> ID：15576396
> 
> 赞同：0
> 
> 时间：2013-03-22T17:24:04.387
> 
> 标签：.net, database, entity-framework, orm

I have a simple app with zero inheritance (at least as far as the database is concerned). How can I "tell" this to Entity Framework so that it would stop looking for the Discriminator column?

I don't have access to change the structure of the database tables, but I need to change the data, and I can't do it because EF keeps trying to operate on the non-existent `Discriminator` column and crashing as a result.

**Edit: Added code**

```
public class DatabaseContext : DbContext {
    public DbSet<User> Users { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Entity<User>().ToTable("Users");
    }
}

public class UserRepository {
    public int Insert(User entity) {
        using (var db = new DatabaseContext()) {
            var table = db.Users;
            table.Add(entity);
            return db.SaveChanges();
        }
    }
}

public class User : IEntity {
    public int Id { get; set; }

    public String Username { get; set; }

    public String Password { get; set; }

    public String FullName { get; set; }

    public String Email { get; set; }
}

public interface IEntity {
    int Id { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:39:06.287

如果您在 DbContext 上使用 Table per Hierarchy 继承，EF 只会查找 Discriminator 列。TPH DbContext 类的示例如下：

```
public abstract class Animal 
{
    public int AnimalId { get; set; }
    public string Name { get; set; }        
}

public class Cat : Animal
{
    public string Race { get; set; }
}

public class Dog : Animal
{
    public string BarkStyle { get; set; }
}

public class InheritanceMappingContext : DbContext
{
    public DbSet<Animal> Animal { get; set; }
} 
```

你必须放弃这种模式。

# iphone - NSXMLParser doesn't ignore CDATA

> ID：15576398
> 
> 赞同：1
> 
> 时间：2013-03-22T17:24:10.907
> 
> 标签：iphone, ios, xcode, xcode4.5, nsxmlparser

im pretty new in ios development and im tryin to parse an RSS file(xml).

**here is the xml:** (sorry for the language)

```
<item>
<category> General < / category >
<title> killed in a tractor accident , was critically injured windsurfer </ title>
<description>
< ! [ CDATA [
<div> <a href='http://www.ynet.co.il/articles/0,7340,L-4360016,00.html'> <img src = 'http://www.ynet.co. il/PicServer3/2012/11/28/4302844/YOO_8879_a.jpg ' alt =' photo: Yaron Brener 'title =' Amona 'border = '0' width = '116 'height = '116'> </ a> < / div >
] ] >
Tractor driver in his 50s near Kfar Yuval flipped and trapped underneath . Room was critically injured windsurfer hurled rocks because of strong winds and wind surfer after was moderately injured in Netanya
< / description >
<link>
http://www.ynet.co.il/articles/0 , 7340, L- 4360016 , 00.html
< / link >
<pubDate> Fri, 22 Mar 2013 17:10:15 +0200 </ pubDate>
<guid>
http://www.ynet.co.il/articles/0 , 7340, L- 4360016 , 00.html
< / guid >
<tags> Kill , car accidents , surfing < / tags >
< / item > 
```

**and here is my xmlparser code:**

```
 - (void)parserDidStartDocument:(NSXMLParser *)parser
    {
       self.titles = [[NSMutableArray alloc]init];
       self.descriptions = [[NSMutableArray alloc]init];
        self.links = [[NSMutableArray alloc]init];
    }

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"item"]) {
        isItem = YES;
    }

    if ([elementName isEqualToString:@"title"]) {
        isTitle=YES;
        self.titlesString = [[NSMutableString alloc]init];
    }

    if ([elementName isEqualToString:@"description"]) {
        isDesription = YES;
        self.descriptionString = [NSMutableString string];
        self.data = [NSMutableData data];
    }

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    if(isItem && isTitle){
        [self.titlesString appendString:string];
    }
    if (isItem && isDesription) {
        if (self.descriptionString)
            [self.descriptionString appendString:string];
    }

}

- (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
{
    if (self.data)
        [self.data appendData:CDATABlock];

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"item"]) {
        isItem = NO;
        [self.titles addObject:self.titlesString];

        [self.descriptions addObject:self.descriptionString];

    }

    if ([elementName isEqualToString:@"title"]) {
        isTitle=NO;

    }
    if ([elementName isEqualToString:@"description"]) {

        NSString *result = [self.descriptionString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        NSLog(@"string=%@", result);

        if ([self.data length] > 0)
        {
            NSString *htmlSnippet = [[NSString alloc] initWithData:self.data encoding:NSUTF8StringEncoding];
            NSString *imageSrc = [self firstImgUrlString:htmlSnippet];
            NSLog(@"img src=%@", imageSrc);
            [self.links addObject:imageSrc];
        }

        self.descriptionString = nil;
        self.data = nil;
    }

}

- (NSString *)firstImgUrlString:(NSString *)string
{
    NSError *error = NULL;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(<img\\s[\\s\\S]*?src\\s*?=\\s*?['\"](.*?)['\"][\\s\\S]*?>)+?"
                                                                           options:NSRegularExpressionCaseInsensitive
                                                                             error:&error];

    NSTextCheckingResult *result = [regex firstMatchInString:string
                                                     options:0
                                                       range:NSMakeRange(0, [string length])];

    if (result)
        return [string substringWithRange:[result rangeAtIndex:2]];

    return nil;
}

@end 
```

Like I said I'm pretty new to iPhone development, I looked for ways to solve it for several hours but found nothing. I decided to open a topic, then a few questions:

**One.** The parser does not ignore what CDATA is just doing parse everything. Why is this happening? As you can see the description itself is not in cdata and I I have only the first step but I get the rest even when I'm not using foundCDATA: (NSData *) CDATABlock

**Two.** I want to take the image link, how to do it? I searched online and found a lot of guide explains only use the function foundCDATA: (NSData *) CDATABlock But how is it used? The way in which I used in the code?

Please I need an explanation so I can understand, **thank you!**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:18:41.027

回答你的两个问题：

1.  如果您已实现`foundCDATA`，解析器将在该方法中解析`description`CDATA，而不是在`foundCharacters`. 另一方面，如果您还没有实现`foundCDATA`，`CDATA`将被 解析`foundCharacters`。所以，如果你不想`foundCharacters`解析`CDATA`，那么你必须实现`foundCDATA`.

2.  如果要提取`img`URL，则必须以某种方式解析收到的 HTML。您可以使用 Hpple，但我可能只是倾向于使用正则表达式：

    ```
    - (NSString *)firstImgUrlString:(NSString *)string
    {
        NSError *error = NULL;
        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(<img\\s[\\s\\S]*?src\\s*?=\\s*?['\"](.*?)['\"][\\s\\S]*?>)+?"
                                                                               options:NSRegularExpressionCaseInsensitive
                                                                                 error:&error];

        NSTextCheckingResult *result = [regex firstMatchInString:string
                                                         options:0
                                                           range:NSMakeRange(0, [string length])];

        if (result)
            return [string substringWithRange:[result rangeAtIndex:2]];

        return nil;
    } 
    ```

    另请参阅[另一个 Stack Overflow 答案](https://stackoverflow.com/a/14862627/1271826)，我在其中演示了 Hpple 和正则表达式解决方案：

* * *

例如，以下是`NSXMLParserDelegate`解析描述的方法，将文本（不包括 CDATA）放在一个字段中，并将 CDATA 中的图像 URL 放在另一个变量中。您必须进行修改以适应您的流程，但希望这可以为您提供基本思路：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"description"])
    {
        self.string = [NSMutableString string];
        self.data = [NSMutableData data];
    }
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError
{
    NSLog(@"%s, parseError=%@", __FUNCTION__, parseError);
}

// In my standard NSXMLParser routine, I leave self.string `nil` when not parsing 
// a particular element, and initialize it if I am parsing. I do it this way
// so only my `didStartElement` and `didEndElement` need to worry about the particulars
// and my `foundCharacters` and `foundCDATA` are simplified. But do it however you
// want.

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (self.string)
        [self.string appendString:string];
}

- (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
{
    if (self.data)
        [self.data appendData:CDATABlock];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"description"])
    {
        // get the text (non-CDATA) portion

        // you might want to get rid of the leading and trailing whitespace

        NSString *result = [self.string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        NSLog(@"string=%@", result);

        // get the img out of the CDATA

        if ([self.data length] > 0)
        {
            NSString *htmlSnippet = [[NSString alloc] initWithData:self.data encoding:NSUTF8StringEncoding];
            NSString *imageSrc = [self firstImgUrlString:htmlSnippet];
            NSLog(@"img src=%@", imageSrc);
        }

        // once I've saved the data where I want to save it, I `nil` out my
        // `string` and `data` properties:

        self.string = nil;
        self.data = nil;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T11:46:15.823

您要提取的图像链接位于 CDATA 块内，但 rss 解析器会忽略 CDATA 块。

如果你需要从 CDATA 中提取字符串，你可以在 foundCDATA 中使用这个块：

```
 - (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
    {

    NSMutableString *cdstring = [[NSMutableString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];
    } 
```

现在可变字符串“cdstring”将包含：

```
 <div>
    <a href='http://www.ynet.co.il/articles/0,7340,L-4360016,00.html'>
    <img src='http://www.ynet.co. il/PicServer3/2012/11/28/4302844/YOO_8879_a.jpg ' alt=' photo: Yaron Brener ' title=' Amona ' border='0' width='116 ' height='116'>
    </ a>
    </ div>
    ]]> 
```

现在只需使用 stringcontainsstring 搜索 href=' 并提取链接或使用 webview 来显示

```
 htmlContent = [NSString stringWithFormat:@"%@", cdstring];
    [webView loadHTMLString:htmlContent baseURL:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:33:08.343

答案 1：我会同意 Rob 对这个问题的回答。

答案2：试试这个来获取图片链接....

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{   
    if([currentElement isEqualToString:@"img"]) {
        NSLog(@"%@",[attributeDict objectForKey:@"src"]);
    }
} 
```

# xcode - Xcode custom framework - No known method error

> ID：15576399
> 
> 赞同：0
> 
> 时间：2013-03-22T17:24:16.010
> 
> 标签：xcode, ios-frameworks

I'm making a framework using [iOS-Universal-Framework](https://github.com/kstenerud/iOS-Universal-Framework).

All has been working well for a few days, but today I decided to change a method signature. Xcode seems to have cached the old version of my library/framework, and I can't get it to see my new code for anything. Although the header it presents has the correct signature, the compiler (and autocomplete) do NOT see the correct signature.

I've tried changing the Framework version and Current Library/Compatibility versions of my custom framework. I've cleaned both projects a bunch. Deleted Derived Data. Closed Xcode. Etc...

This is really, really frustrating, as I've now wasted almost 2 hours just trying to get Xcode to behave!

Has anyone encountered this error before? Does anyone know how to get Xcode to see the code I've actually written?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-01T13:17:25.367

我遇到了类似的问题，但在与我的项目输出相同的文件夹中找到了我的自定义框架的缓存版本。

以下是我为解决它而采取的步骤：

1.  在 Xcode 中右键单击项目构建产品并选择“在 Finder 中显示”以显示构建文件夹。
2.  在此文件夹中查找自定义框架，然后将其删除。
3.  清洁和建造。

就我而言，无需更改框架搜索路径或从项目中删除自定义框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:37:52.613

啊啊啊啊！为什么总是，总是，我永远搜索却找不到答案。然后，我在 StackOverflow 上发布一个问题，然后自己在 2 分钟内找到答案？

太烦人了！

我通过执行以下操作解决了我的问题：

1.  从框架搜索路径中清除所有条目（“$(inherited)”除外）。
2.  从项目中删除自定义框架。
3.  将自定义框架重新添加到项目中。
4.  清洁和建造。

我仍然不确定我是否理解 Xcode 如何/为什么做它所做的事情的所有复杂性，但至少现在我的真实代码可以看到并运行！

* * *

帮助我的第一个问题是[Xcode 引用旧框架](https://stackoverflow.com/questions/11759444/xcode-referencing-old-framework?rq=1)。

所以，我在“xcode disable automatic framework search”上搜索，发现[Xcode 引用了旧的/已删除的框架，导致多个接口声明](https://stackoverflow.com/questions/13255342/xcode-referencing-old-removed-frameworks-causing-multiple-interface-declaration)。

我希望这至少可以帮助其他人更快地得到答案。

# java - How to retrieve files from an MS Access "Attachment" field via JDBC?

> ID：15576402
> 
> 赞同：2
> 
> 时间：2013-03-22T17:24:27.520
> 
> 标签：java, ms-access, jdbc, odbc, blob

I wrote a small Java application to read data from an Access 2007 database. I can read all fields but not the one containing the photo. The field type is "Attachment".

When I call the `.getBlob()` method of the `ResultSet` object I catch an "UnsupportedOperationException".

As suggested on several websites I tried to call `.getBytes()` and `.getBinaryStream()` methods but both only return the filename of the attachment but not it's content.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T21:47:22.120

UCanAccess JDBC 驱动程序可以[从](http://ucanaccess.sourceforge.net/site.html)Access 数据库的附件字段中提取文件。对于名为 [AttachmentsTable] 的表

**ID** - 自动编号，主键
**描述**- 文本 (255)
**附件**- 附件

以下代码将提取 ID=1 的记录的 [附件] 字段中的所有文件：

```
import java.io.File;
import java.sql.*;
import net.ucanaccess.complex.Attachment;

...

String dbFileSpec = "C:/Users/Public/AttachmentsDB.accdb";
String connStr = "jdbc:ucanaccess://" + dbFileSpec;
try (Connection conn = DriverManager.getConnection(connStr)) {
    try (Statement s = conn.createStatement()) {
        try (ResultSet rs = s.executeQuery(
                "SELECT Attachments FROM AttachmentsTable WHERE ID=1")) {
            rs.next();
            // retrieve array of net.ucanaccess.complex.Attachment objects
            Attachment[] atts = (Attachment[]) rs.getObject(1);
            for (Attachment att : atts) {
                System.out.println(att.getName());
                org.apache.commons.io.FileUtils.writeByteArrayToFile(
                        new File("C:/Users/Gord/Desktop/" + att.getName()), 
                        att.getData());
            }
        }
    }
} 
```

有关使用 UCanAccess JDBC 驱动程序的更多信息，请参阅

[在没有 ODBC 的情况下从 Java 操作 Access 数据库](https://stackoverflow.com/q/21955256/2144390)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:24:23.483

在某些情况下，我发现了一个肮脏的解决方法......

表格的 XML 导出包含使用一些额外数据编码的 base64 图像。使用 stax XML API 的 java 应用程序可以轻松处理这些数据。这几乎是直截了当的，但必须截断二进制数据开头的 20 字节开销。[读这个！](https://stackoverflow.com/questions/6163862/xml-export-from-access-2007-base64-attachments)

如果您处于舒适的环境中，那么您就完成了。如果您必须定期而不是实时执行此操作，您可以尝试使用[此处](http://technet.microsoft.com/en-us/library/ee692914.aspx)描述的访问中的 .ExportXML API 。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:57:11.450

[HXTT Access](http://www.hxtt.com/access.html)可以获取未压缩的 Attachment 数据，但不支持压缩的 Attachment 数据。

# javascript - JS framework that provides two-way binding with server-side rendered htmls?

> ID：15576404
> 
> 赞同：4
> 
> 时间：2013-03-22T17:24:34.180
> 
> 标签：javascript, angularjs, ember.js, javascript-framework

Is there any JS framework that provides two-way binding with server-side rendered htmls? Like Angular/Ember but instead of rendering html at client-side only update server-side generated html.

I like to keep html pages viewable without JS and only use JS to make them interactive. I'm using jQuery right now but manual pulling and pushing data from and to view is cumbersome.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-27T00:50:01.940

我们一直在寻找这个，并且已经开始探索[rivets.js](http://rivetsjs.com/)来做到这一点。

在服务器端，我们：

*   使用铆钉所需的“特殊前缀属性”渲染 HTML
*   在标签中发送页面上使用的模型的 JSON `<script>`（也称为引导）

在客户端，我们：

*   用 Backbone 组织我们的代码
*   将引导模型与`<div>`包含模型渲染表示的 s绑定

铆钉管理绑定。

这仍然是相当实验性的，所以当我们更好地了解权衡和性能时，我会更新这个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:56:45.317

我无法与 Ember 交谈，所以我将作为 AngularJS 社区的活跃成员来回答。

Angular 和 Ember 主要是客户端[MVC](http://en.wikipedia.org/wiki/Model-view-controller)框架，因此在此之外使用它们可能没有多大意义。例如，AngularJS 提供的*飞跃*不仅仅是双向数据绑定。

即使你让它工作，它也将是矫枉过正。它们旨在构建 Web 应用程序，而不是网页。我认为 JavaScript MVC 框架*不*适合简单地“使 [页面] 交互”。此外，jQuery 已经做得很好，您可以使用模板引擎来完成一些数据绑定。

但总的来说，我是 AngularJS 和客户端 MVC 的忠实粉丝，所以我想提供更多帮助：

*   你能提供一些关于你为什么关注 AngularJS 和 Ember 的见解吗？
*   你想做什么你不能在 jQuery 中做？
*   为什么要扩充网页而不是设计更多的网络应用程序？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T21:19:09.983

您正在寻找的是旨在使用 __ [Progressive Enhancement的框架](http://sixrevisions.com/web-development/progressive-enhancement/)

Ember.js 和 Angular 采用了非常不同的方法。鉴于您要求**“在没有 JS 的情况下保持 html 页面可见”，**这两者都不是一个好的选择。当然，使用 jQuery 是一种选择，但就像你说的那样，它可能很麻烦。可能值得重新考虑该要求。

# java - How to align the output text in order

> ID：15576406
> 
> 赞同：0
> 
> 时间：2013-03-22T17:24:37.113
> 
> 标签：java, android, android-layout

I am facing a problem aligning the text in proper format

EX: say I am to get printout in the following way

```
Name                     Phone No.
Adithya                  99999999999 
Ravi                     99999999999 
Teja                     99999999999
:
: 
```

but as the length of the String `Adithya` is not equal to length of `Ravi` we cannot give specific spacing such as

`String s = Name+ " " + Phone + "\n";`

here if I give so I'll get in the following way

```
Name                Ph
Adithya              9999999
Ravi              9999999
Tej              9999999
:
: 
```

it will display in this way. How can I solve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:55:03.970

您可以使用制表符 ( `\t`)：

```
String s = String.format("%s\t\t%s\n", Name, Phone); 
```

这将在名称后输入两个选项卡，然后是电话号码。电话号码应该很好地对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:05:54.747

我宁愿建议你使用`Table Layout`（它会保证你对齐）而不是让你的代码复杂。

以下将是您的`list view`ROW 的布局您的编码部分将是相同的，只需切换到这个新布局

```
 <?xml version="1.0" encoding="utf-8"?>
    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:stretchColumns="1">

        <TableRow
            android:id="@+id/tblRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"        
            android:padding="5dip">

      <TextView 
          android:id="@+id/tv_Name" 
          android:layout_width="0dip"
          android:layout_weight="3"   <!--it defines how much space this view should get in row-->
          android:text="Ravi"
          android:layout_height="wrap_content" 
          android:paddingLeft="20dip"
          android:textSize="14sp"
          android:textColor="@android:color/black"/>

       <TextView 
          android:id="@+id/tv_PhoneNumber" 
          android:layout_width="0dip"
          android:layout_weight="3"
          android:text="9999999999"
          android:layout_height="wrap_content" 
          android:paddingLeft="20dip"
          android:textSize="14sp"
          android:textColor="@android:color/black"/>   

      </TableRow>

    </TableLayout> 
```

![在此处输入图像描述](../Images/9536b3a4d5507a2be052c2adcecf57b7.png)

然后像使用其他布局一样将此布局绑定到您的适配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:29:25.700

这个问题正是 a`ListView`的设计目的。

使用 a `ListView`，您可以将名称放在左侧，将电话放在右侧，或任何其他方向。您可以轻松更改颜色、文本大小、字体等。查找`ListView`. 易于使用的简单适配器非常适合此实现。你应该很高兴。

* * *

我在这里修改了这个答案，因为您在下面的评论中声明您希望将电话号码列表格式化为电子邮件和打印，而不是屏幕显示。

由于以下几个原因，这现在是一个难题：

*   电子邮件不服从标签。
*   制表符不是最佳选择，因为更长和更短的名称将需要不同数量的制表符字符。

**对于电子邮件和一般打印输出，我能想到的唯一解决方案是计算姓名和电话号码列*之间所需的空格字符数，并使用“Courier”等单空格字体强制打印。**

(*) 如何计算列之间所需的空格数：为电话号码列选择一个行位置，即 40 个字符。对于任何特定行，姓名和电话之间所需的空格字符数是`(40 - name.length())`。

您的代码将如下所示：

```
String text = "Phone List:";
for(i = 0; i < n; i++) {
    String name = names[i];
    String phone = phones[i];
    int nsp = 40 - name.length();
    text += "\n" + name + StringUtils.repeat(" ", nsp) + phone;
} 
```

# iis-7 - 经典 ASP 从 Windows Server 2008 上的记录集中仅返回一条记录

> ID：15576411
> 
> 赞同：0
> 
> 时间：2013-03-22T17:24:50.207
> 
> 标签：iis-7, asp-classic, recordset

我已被转移到 Windows 2008 Server，我需要在其中将经典 ASP 功能托管到 Oracle 数据库。我已将服务器配置为运行经典 ASP，并且只发现了一个问题，即当我执行数据库请求时，只返回一条记录，而不是数据库中可用的 999 条记录。在 SQLPlus 中运行实际的 SQL 命令会显示所有记录，所以不确定发生了什么：

```
selectScName = "select item from my_schema.col1"

Set dbObjT = Server.CreateObject("ADODB.Connection")
dbObjT.open =  "MY-DB-CONNECTION"
Set RSdbTest = dbObjT.Execute(selectScName)

Do while not RSdbTest.EOF
         Response.Write(RSdbTest("col1") & "<br>")
      RSdbTest.MoveNext
     loop
RSdbTest.Close
Set RSdbTest = nothing
dbObjT.Close
Set dbObjT = nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T14:08:47.807

我认为在这段代码之前使用了 .MaxReords=1 语句。核实

# regex - 多个正则表达式搜索和替换

> ID：15576416
> 
> 赞同：0
> 
> 时间：2013-03-22T17:25:06.137
> 
> 标签：regex, sublimetext2

Sublime Text 中有没有办法一次执行多个正则表达式搜索和替换*查询*。

例如我想（按列出的顺序）

1.  查找匹配*regex1的字符串并用**regex1replacement*替换它们
**   查找匹配*regex2的字符串并用**regex2replacement*替换它们**   查找匹配*regex3*的字符串并将其替换为*regex3replacement**   查找匹配*regexN*的字符串并将其替换为*regexNreplacement***

 **立刻。

字符串：“blah regex1，bloo regex2，bleep regex3”将变为：“blah regex1replacement，bloo regex2replacement，bleep regex3replacement”

这是可以轻松编写脚本的东西，但我目前没有这种自由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:28:09.820

**编辑**：哦，对不起，我错过了你想要这个崇高的文字。对不起！

```
sed 's/regex1/regex1replacement/g;s/regex2/regex2replacement/g;s/regex3/regex3replacement/g;' 
```

对于更干净的脚本，我认为这会起作用，但我还没有测试过：

```
sed "s/regex1/regex1replacement/g; \
     s/regex2/regex2replacement/g; \
     s/regex3/regex3replacement/g;" 
```**

# sql-server - Scope_identity() 错误地返回 '@P11'。MSSQL，冷融合。试图获取最后插入的 ID

> ID：15576419
> 
> 赞同：1
> 
> 时间：2013-03-22T17:25:26.967
> 
> 标签：sql-server, coldfusion, scope-identity

我收到 SELECT Scope_Identity() 错误

我正在从表单中插入一行新数据。该行生成一个自动增强的 ID(RBID)。

我试图立即抓住它并将它（RBID）插入另一行，以便在需要时可以引用它。

```
<cfquery name="recbilling" datasource="#request.dsn#" result="myResult">
INSERT INTO RBilling
(CID, UserID, DateCompleted, ClientID, Title, Qty, Rate, Taxable, Description, NextBillingDate,
FrequencyUnit, FrequencyDuration, ProjectID)
VALUES (
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#CID#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#UserID#">, 
<cfqueryparam cfsqltype="CF_SQL_TIMESTAMP" value="#DateCompleted#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ClientID#">, 
<cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#text0#">, 
<cfqueryparam cfsqltype="CF_SQL_REAL" value="#Qty#">, 
<cfqueryparam cfsqltype="CF_SQL_REAL" value="#text2#">, 
<cfqueryparam cfsqltype="CF_SQL_BIT" value="#Taxable#">, 
<cfqueryparam cfsqltype="CF_SQL_LONGVARCHAR" value="#text1#">, 
<cfqueryparam cfsqltype="CF_SQL_TIMESTAMP" value="#NextBillingDate#">, 
<cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#FrequencyUnit#">, 
<cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#FrequencyDuration#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ProjectID#">)
</cfquery>

<cfquery name="getRBID" datasource="#request.dsn#">
SELECT Scope_Identity() as newID
</cfquery>
<cfset RBID = #getRBID.newID#>
</cfif>

<cfquery name="submithourssubmit" datasource="#request.dsn#">
INSERT INTO Billedfees
(CID, UserID, DateCompleted, ClientID, Title, Qty, Rate, Taxable, Description, ProjectID, RBID)
VALUES (
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#CID#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#UserID#">,
<cfqueryparam cfsqltype="CF_SQL_TIMESTAMP" value="#DateCompleted#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ClientID#">, 
<cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#text0#">, 
<cfqueryparam cfsqltype="CF_SQL_REAL" value="#Qty#">, 
<cfqueryparam cfsqltype="CF_SQL_REAL" value="#text2#">, 
<cfqueryparam cfsqltype="CF_SQL_BIT" value="#Taxable#">, 
<cfqueryparam cfsqltype="CF_SQL_LONGVARCHAR" value="#text1#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ProjectID#">
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#RBID#">
)
</cfquery> 
```

我得到的错误是：执行数据库查询时出错。[Macromedia][SQLServer JDBC 驱动程序][SQLServer]'@P11' 附近的语法不正确。
错误发生在第 57 行。

我花了一段时间才弄清楚@P11 是什么，但似乎第一个查询中的 FrequencyUnit 或第二个插入查询中的 RBID 都有问题。

数据类型设置正确。

先感谢您。

**编辑：**

SQL 字符串 (param 1) = [type='IN', class='java.lang.Integer', value='15488', sqltype='CF_SQL_INTEGER'] , (param 2) = [type='IN', class ='java.lang.Integer', value='21066', sqltype='CF_SQL_INTEGER'] , (param 3) = [type='IN', class='java.sql.Timestamp', value='2013-03 -22 00:00:00.0', sqltype='CF_SQL_TIMESTAMP'] , (param 4) = [type='IN', class='java.lang.Integer', value='143933', sqltype='CF_SQL_INTEGER'] , (param 5) = [type='IN', class='java.lang.String', value='Software Test 3', sqltype='CF_SQL_VARCHAR'] , (param 6) = [type='IN', class='java.lang.Float', value='1.0', sqltype='CF_SQL_REAL'] , (param 7) = [type='IN', class='java.lang.Float',value='33.0', sqltype='CF_SQL_REAL'] , (param 8) = [type='IN', class='java.lang.Boolean', value='false', sqltype='CF_SQL_BIT'] , (param 9) = [type='IN', class='java.lang.String', value='Software Test 3', sqltype='CF_SQL_LONGVARCHAR'] , (param 10) = [type='IN', class=' java.lang.Integer', value='0', sqltype='CF_SQL_INTEGER'] , (param 11) = [type='IN', class='java.lang.Integer', value='153314', sqltype= 'CF_SQL_INTEGER']CF_SQL_LONGVARCHAR'] , (param 10) = [type='IN', class='java.lang.Integer', value='0', sqltype='CF_SQL_INTEGER'] , (param 11) = [type='IN' , 类='java.lang.Integer', 值='153314', sqltype='CF_SQL_INTEGER']CF_SQL_LONGVARCHAR'] , (param 10) = [type='IN', class='java.lang.Integer', value='0', sqltype='CF_SQL_INTEGER'] , (param 11) = [type='IN' , 类='java.lang.Integer', 值='153314', sqltype='CF_SQL_INTEGER']

这是我到目前为止得到的：

```
<cftransaction>

<cfset NextBillingDate = #DateAdd("#FrequencyUnit#", "#FrequencyDuration#", #DateCompleted#)#>

<cfquery name="recbilling" datasource="#request.dsn#" result="myResult">
INSERT INTO RBilling
(CID, UserID, DateCompleted, ClientID, Title, Qty, Rate, Taxable, Description, NextBillingDate,
FrequencyUnit, FrequencyDuration, ProjectID)
VALUES (
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#CID#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#UserID#">, 
<cfqueryparam cfsqltype="CF_SQL_TIMESTAMP" value="#DateCompleted#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ClientID#">, 
<cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#text0#">, 
<cfqueryparam cfsqltype="CF_SQL_REAL" value="#Qty#">, 
<cfqueryparam cfsqltype="CF_SQL_REAL" value="#text2#">, 
<cfqueryparam cfsqltype="CF_SQL_BIT" value="#Taxable#">, 
<cfqueryparam cfsqltype="CF_SQL_LONGVARCHAR" value="#text1#">, 
<cfqueryparam cfsqltype="CF_SQL_TIMESTAMP" value="#NextBillingDate#">, 
<cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#FrequencyUnit#">, 
<cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#FrequencyDuration#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ProjectID#">)
</cfquery>

<cfoutput>
<Cfset RBID="#myResult.identitycol#">
</cfoutput>

<cfquery name="submithourssubmit" datasource="#request.dsn#">
INSERT INTO Billedfees
(CID, UserID, DateCompleted, ClientID, Title, Qty, Rate, Taxable, Description, ProjectID, RBID)
VALUES (
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#CID#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#UserID#">,
<cfqueryparam cfsqltype="CF_SQL_TIMESTAMP" value="#DateCompleted#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ClientID#">, 
<cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#text0#">, 
<cfqueryparam cfsqltype="CF_SQL_REAL" value="#Qty#">, 
<cfqueryparam cfsqltype="CF_SQL_REAL" value="#text2#">, 
<cfqueryparam cfsqltype="CF_SQL_BIT" value="#Taxable#">, 
<cfqueryparam cfsqltype="CF_SQL_LONGVARCHAR" value="#text1#">, 
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ProjectID#">
<cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#RBID#">
)
</cfquery> 
```

这给了我同样的错误：执行数据库查询时出错。[Macromedia][SQLServer JDBC 驱动程序][SQLServer]'@P11' 附近的语法不正确。
错误发生在第 59 行。

第 59 行是第二个插入查询中的第 59 行。

如果您需要其他任何东西，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T17:40:22.927

您已经可以使用此访问该变量

```
<cfoutput>#myResult.identitycol#</cfoutput>
<Cfset rbid = myResult.identitycol> 
```

由于您使用的是 MSSQL，因此您的结果将具有该`.identitycol`属性。

我相信如果您使用 mysql、oracle、access，它可能会有所不同（从 cf9 开始），但我认为他们在 cf10 中对其进行了标准化。

* * *

**更新：**

错误的原因是您在`RBID`字段前缺少逗号。这是您的代码的固定版本：

```
<cftransaction>

    <cfset NextBillingDate = DateAdd(FrequencyUnit, FrequencyDuration, DateCompleted)>

    <cfquery name="recbilling" datasource="#request.dsn#" result="myResult">
        INSERT INTO RBilling 
        (
          CID
          , UserID
          , DateCompleted
          , ClientID
          , Title
          , Qty
          , Rate
          , Taxable
          , Description
          , NextBillingDate
          , FrequencyUnit
          , FrequencyDuration
          , ProjectID
        )
        VALUES 
        (
          <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#CID#">
          , <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#UserID#">
          , <cfqueryparam cfsqltype="CF_SQL_TIMESTAMP" value="#DateCompleted#">
          , <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ClientID#">
          , <cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#text0#">
          , <cfqueryparam cfsqltype="CF_SQL_REAL" value="#Qty#">
          , <cfqueryparam cfsqltype="CF_SQL_REAL" value="#text2#">
          , <cfqueryparam cfsqltype="CF_SQL_BIT" value="#Taxable#">
          , <cfqueryparam cfsqltype="CF_SQL_LONGVARCHAR" value="#text1#">
          , <cfqueryparam cfsqltype="CF_SQL_TIMESTAMP" value="#NextBillingDate#">
          , <cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#FrequencyUnit#">
          , <cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#FrequencyDuration#">
          , <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ProjectID#">
       )
    </cfquery>

    <cfset RBID = myResult.identitycol>

    <cfquery name="submithourssubmit" datasource="#request.dsn#">
        INSERT INTO Billedfees (
            CID
            , UserID
            , DateCompleted
            , ClientID
            , Title
            , Qty
            , Rate
            , Taxable
            , Description
            , ProjectID
            , RBID
        )
        VALUES (
            <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#CID#">
            , <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#UserID#">
            , <cfqueryparam cfsqltype="CF_SQL_TIMESTAMP" value="#DateCompleted#">
            , <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ClientID#">
            , <cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="#text0#">
            , <cfqueryparam cfsqltype="CF_SQL_REAL" value="#Qty#">
            , <cfqueryparam cfsqltype="CF_SQL_REAL" value="#text2#">
            , <cfqueryparam cfsqltype="CF_SQL_BIT" value="#Taxable#">
            , <cfqueryparam cfsqltype="CF_SQL_LONGVARCHAR" value="#text1#">
            , <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#ProjectID#">
            , <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#RBID#">
        )
    </cfquery>

</cftransaction> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T17:57:47.170

`scope_identity`正如我在评论中提到的，除非您运行的是 CF7 或更早版本，否则您不需要使用。从 CF8 开始，新的身份值将放在您的[`result`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fae.html)属性中，即“myResult”。因此，新 ID 在变量中可用：myResult.IDENTITYCOL。

顺便说一句，如果您要使用，*则*`scope_identity`必须确保在**同一个**数据库连接上调用它。所以要么在插入查询的末尾调用它：

```
 <cfquery name="addRecord" ...>
          SET NOCOUNT ON;
          INSERT INTO TableName (....)
          VALUES ( ..... );
          SELECT SCOPE_IDENTITY() AS RBID;
          SET NOCOUNT OFF;
    </cfquery>

    <cfoutput> New RBID: #addRecord.RBID#</cfoutput> 
```

... -=or=- 将两个 cfquery 包装在 a`cftransaction`中以确保保持相同的连接。IE

```
 <cftransaction>
    <cfquery name="addRecord" ...>
          INSERT INTO TableName (....)
          VALUES ( ..... );
    </cfquery>
    <cfquery name="getNewRecord" ...>
          SELECT SCOPE_IDENTITY() AS RBID;
    </cfquery>

 </cftransaction>
 <cfoutput> New RBID: #getNewRecord.RBID#</cfoutput> 
```

# jenkins - How do you configure Jenkins to automatically install dependencies?

> ID：15576420
> 
> 赞同：3
> 
> 时间：2013-03-22T17:25:35.943
> 
> 标签：jenkins, dependencies

I am setting up Jenkins for Python codebase. I have been installing the dependencies directly on the server by hand, but there has to be some way to get Jenkins to automatically install the code's dependencies before it does a new build?

# regex - 给定字母表的正则表达式语言语法

> ID：15576424
> 
> 赞同：3
> 
> 时间：2013-03-22T17:25:51.403
> 
> 标签：regex, grammar, context-free-grammar

我很难弄清楚从哪里开始这个问题。问题是用字母表为正则表达式的语言创建一个语法`{ ‘a’, ‘b’, ‘c’, ‘d’, ‘|’, ‘*’, ‘(‘, ‘)’ }`。假设有 1 行输入（单个字符串）并且没有空格。空字符串是无效的，它应该正确地捕获运算符的优先级，从低到高是联合（'|'）、连接和 kleene（' `*`'）。开始为此编写语法的最佳方法是什么？任何投入将不胜感激。

不寻找答案，只是不知道如何开始。到目前为止，我有类似的东西：

```
S -> S'('S')'S  
   | A  
A -> AA  
   | A'*'  
   | T  
T -> T'|'T  
   | X  
X -> 'a'  
   | 'b'  
   | 'c'  
   | 'd' 
```

但我不确定我是否走在正确的轨道上。

编辑：在做了更多的工作之后，这是我得出的结论：

```
START -> EXPRESSION  
EXPRESSION -> EXPRESSION'|'EXPRESSION  
EXPRESSION -> PARENTHETICAL'*'  
EXPRESSION -> PARENTHETICAL  
EXPRESSION -> EXPRESSION PARENTHETICAL  
EXPRESSION -> PARENTHETICAL EXPRESSION  
EXPRESSION -> EXPRESSION PARENTHETICAL EXPRESSION  
EXPRESSION -> REPEAT  
PARENTHETICAL -> PARENTHETICAL'*'  
PARENTHETICAL -> '('EXPRESSION')'  
REPEAT -> REPEAT REPEAT
REPEAT -> TERMINAL'*'  
REPEAT -> TERMINAL  
TERMINAL -> TERMINAL'*'  
TERMINAL -> 'a'  
TERMINAL -> 'b'  
TERMINAL -> 'c'  
TERMINAL -> 'd' 
```

这也可以写成：

```
S -> E  
E -> E'|'E  
E -> P'*'  
E -> P  
E -> E P  
E -> P E 
E -> E P E  
E -> R  
P -> P'*'  
P -> '('E')'  
R -> R R
R -> T'*'  
R -> T  
T -> T'*'  
T -> 'a'  
T -> 'b'  
T -> 'c'  
T -> 'd' 
```

我相当肯定这是正确的，我用一堆不同的测试输入仔细检查了它。任何确认将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:48:53.580

这只是一个迭代的问题。我总是喜欢从规则开始`Start-> NonTerminal`，只是给自己半个机会学习常规语法。我相信嵌套括号会将我们简化为上下文无关语法，但这很好。我发现它使这一步更容易。然后，您必须从 LOWEST 优先级运算符开始。在你的情况下，括号和联合。所以，最初：

```
Start -> Expression
Expression -> Expression|Expression
Expression -> (Expression) 
```

请注意，我避开了正常的“|” 符号，因为它是字母表中的符号之一。这样可以避免混淆。然后，我们可以添加下一个运算符，连接，以及一组生成重复的规则。

```
Start -> Expression
Expression -> Expression|Expression
Expression -> (Expression)

Expression -> Repeat
Repeat -> RepeatRepeat
Repeat -> Terminal
Terminal -> a
Terminal -> b
Terminal -> c
Terminal -> d 
```

然后，剩下的就是添加 Kleene Star 作为最低优先级运算符：

```
Start -> Expression
Expression -> Expression|Expression
Expression -> (Expression)

Expression -> Repeat
Repeat -> RepeatRepeat
Repeat -> Terminal
Terminal -> a
Terminal -> b
Terminal -> c
Terminal -> d

Repeat -> Terminal*
Expression -> (Expression)* 
```

我们有一个语法，可以从所需的字母表中生成所有非空的正则表达式。在更传统的变量表示法中，它可能如下所示：

```
S -> E
E -> E|E
E -> (E)
E -> (E)*
E -> R
R -> RR
R -> T*
R -> T
T -> a
T -> b
T -> c
T -> d 
```

有一个语法我很确定它。希望有人会检查我的工作，因为我已经有几年没有写正式的语法了。

编辑：

作为上述双重检查的结果，有人指出连接表达式和括号表达式不起作用。但是，我们可以添加它。第一步是添加一个新规则并进行`Expression -> Parenthetical`更改`Expression -> (Expression)`，然后，将它们连接起来的几个快速规则导致规则集：`Expression -> (Expression)*``Parenthetical -> (Expression)``Parenthetical -> (Expression)*`

```
Start -> Expression
Expression -> Expression|Expression
Expression -> Parenthetical

Parenthetical -> (Expression)
Parenthetical -> (Expression)*

Expression -> Expression Parenthetical
Expression -> Parenthetical Expression
Expression -> Expression Parenthetical Expression

Expression -> Repeat
Repeat -> Repeat Repeat
Repeat -> Terminal
Terminal -> a
Terminal -> b
Terminal -> c
Terminal -> d

Repeat -> Terminal* 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-23T17:33:30.033

编译器新手很难理解的是，*只*能够解析有效输入的语法是***无用***的。

一个*好的*语法必须反映输入的层次结构，以便我们可以将语义附加到它。

这都是关于意义的。

也就是说，[Grako](https://bitbucket.org/apalala/grako/)有一个正则表达式到 CFG 的翻译器作为[其唯一的示例项目](https://bitbucket.org/apalala/grako/src/03454d10a51cf493bf2f7efb8b65917a2431633d/examples/regexp?at=default)。

# php - is there a way to extract words after a keyword in a search bar?

> ID：15576425
> 
> 赞同：-1
> 
> 时间：2013-03-22T17:25:55.890
> 
> 标签：php, expression

Is there a way to extract words from a search bar, for example if someone types: "remind me to eat more veg" so i would be looking for all the words after "to" which in this case would be "eat more veg". I think maybe a regular expression? or is there another way in PHP Thank you for your time.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:42:44.027

我认为explode 是一个完全有效的答案，但我喜欢尽可能推广PHP 原生函数。在这种情况下[`str_word_count`](http://php.net/manual/en/function.str-word-count.php)可能更有用。

```
str_word_count($search_bar_string, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:30:25.070

然后我将 tadaaaa 我的评论作为答案：

```
explode(' ', $search_bar_string) 
```

我会推荐阅读一本关于 PHP 的书；）

祝你好运！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-22T17:33:39.943

```
$input_string = "remind me to eat more veg";
$divide_string = "to";
$serch_result = trim ( substr($input_string, strpos($input_string, "to") + strlen($divide_string)) ); 
```

# events - not_found_template 之前的 ZF2 事件

> ID：15576428
> 
> 赞同：2
> 
> 时间：2013-03-22T17:26:08.590
> 
> 标签：events, routes, zend-framework2

zf2 中是否有一个事件可以附加到在设置 not_found_template 之前调用的 sharedEventManager/eventManager？我想在我的网站上实现一个“建设中的页面”模块。如果调用现有路由，一切正常。但是，当调用不存在的路由时，会显示标准 404 错误页面，因为找不到该路由。

那是我的 Module.php

```
public function onBootstrap(Event $e)
{
    $e->getApplication()->getEventManager()->getSharedManager()->attach(
        'Zend\Mvc\Controller\AbstractActionController', 'dispatch', function ($e) {
            $e->getTarget()->layout('layout/underconstruction');
        }, -1000
    );

} 
```

你们有人有想法吗？

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:30:49.187

监听调度事件是没有意义的，因为路由找不到要调度的控制器，而是在视图模型上监听渲染事件和 setTemplate，这样的事情应该可以工作

```
$e->getApplication()->getEventManager()->attach(MvcEvent::EVENT_RENDER, function ($e) {        
    $response = $e->getResponse();
    if ($response->getStatusCode() == 404) {
        $e->getViewModel()->setTemplate('layout/underconstruction');
    }
}, -1000); 
```

# selenium - Selenium Windows Save/Open Open Dialogue

> ID：15576430
> 
> 赞同：5
> 
> 时间：2013-03-22T17:26:14.327
> 
> 标签：selenium

I am trying to use selenium webdriver to automate web application. So say the dialog below pops up, my goal is to automatically click Save File, and then hit Ok.

Windows Save/Open File DownloadDialouge

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T03:53:52.753

WebDriver 不能直接与对话框窗口交互，这是因为对话框窗口是操作系统的域而不是网页。然而，它可以使用名称空间 System.Windows.Forms 的 SendKeys 类方法 SendWait() 在对话框窗口上执行操作

```
using System.Windows.Forms; 
```

在下面的示例代码中，按下了 PLUpload 按钮，这将打开一个 Windows 对话框以选择要上传的文件。

以下行用于将键值发送到显示的对话窗口。

```
SendKeys.SendWait(@"C:\Users\Public\Pictures\Sample Pictures\Dock.jpg");
SendKeys.SendWait(@"{Enter}"); 
```

C#中SendKeys类的详细参考可以在[http://msdn.microsoft.com/en-au/library/system.windows.forms.sendkeys.aspx找到](http://msdn.microsoft.com/en-au/library/system.windows.forms.sendkeys.aspx)

```
using System;
using System.Windows.Forms;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium;
using OpenQA.Selenium.Support;
using OpenQA.Selenium.Interactions;
using NUnit.Framework;
namespace BusinessCreation
{
    class PlUpload
    {
        static void Main(string[] args)
        {
               IWebDriver driver = new FirefoxDriver();
               driver.Navigate().GoToUrl("http://www.plupload.com/example_queuew               idget.php");
               driver.FindElement(By.XPath("//object[@data='/plupload/js/pluploa               d.flash.swf']")).Click();
               SendKeys.SendWait(@"C:\Users\Public\Pictures\Sample Pictures\Dock               .jpg");
               SendKeys.SendWait(@"{Enter}");
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T06:22:15.147

//文件保存代码

```
FirefoxProfile profile =new FirefoxProfile();

profile.setPreferences("browser.download.folderlist",0);

profile.setpreferences("browser.helperApps.neverAsk.saveToDisk",mimeType);//applicatio/zip

WebDriver driver = new FireforDriver(profile);

driver.get("http:seleniumhq.org/download");

driver.get("http://selenium.com/files/selenium.zip"); 
```

//文件打开代码

```
profile.setPreferences("browser.helperApps.neverAsk.open",mimeType); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:29:10.860

单独使用 Selenium 是不可能的。

您必须将其与 AutoIT 结合使用：

[http://www.autoitscript.com/site/autoit/](http://www.autoitscript.com/site/autoit/)

（或类似的东西）。

我还要指出，在大多数情况下，您可以简单地“发送”（使用特定语言绑定中的“发送密钥”方法/功能）将文件路径直接发送到上传控件，确保您*不*单击实际`Browse...`按钮。一旦你这样做了，Selenium 的游戏就结束了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T11:19:30.423

使用此方法进行文件处理：

我们需要 ：

jacob.jar[下载](http://sourceforge.net/projects/jacob-project/%E2%80%8E)

它将包含一个 jar 文件和 2 个 .dll 文件

AutoItX4Java.jar[下载](https://code.google.com/p/autoitx4java/downloads/list)

```
public static void uploadFile(String path, String browser){

if(browser.equalsIgnoreCase("chrome")){

    if(x.winWaitActive("Open", "", 10)){
        if(x.winExists("Open")){
            x.sleep(500);
            x.send(path);
            x.controlClick("Open", "", "Button2");

        }
    }

}

if(browser.equalsIgnoreCase("firefox")){

    if(x.winWaitActive("File Upload", "", 10)){
        if(x.winExists("File Upload")){
            x.sleep(500);
            x.send(path);
            x.controlClick("File Upload", "", "Button2");

        }
    }
}

if(browser.equalsIgnoreCase("InternetExplorer")){

    if(x.winWaitActive("Choose File to Upload", "", 10)){
        if(x.winExists("Choose File to Upload")){
            x.sleep(500);
            x.send(path);
            x.controlClick("Choose File to Upload", "", "Button2");

        }
    }
}

}

public void test(){
    //Click on the Select button of the file upload
    uploadFile("Path", "chrome");

} 
```

谢谢...不要单击接受或赞成，直到它适合您。如果它不适合您的意思，请发表评论..不要投反对票...

# java - 根据选择的用户选择表单

> ID：15576432
> 
> 赞同：-2
> 
> 时间：2013-03-22T17:26:15.267
> 
> 标签：java

一个用户最多可以有 20 辆车。我有 5 个静态表格。根据用户选择，我想合并 pdf

*1.pdf - 1 辆汽车,2.pdf - 2 辆汽车,3.pdf - 3 辆汽车, 4.pdf - 4 辆汽车, 5.df - 5 辆汽车*

如果用户拥有超过 5 辆汽车，例如 6 辆汽车，那么每个表格都应容纳 5.pdf+1.pdf 而非 3+3 或 2+3+1 等其他组合。 20 辆汽车 5+5+5+5,13 车辆 5 +5+3,7 veh 5+2,18 veh 5+5+5+3,3 veh 3\. 任何人都可以帮我制定一个逻辑来选择用户应该选择合并哪些表单而不是编写 20 个 if 循环.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:33:28.213

首先要注意的是，一组表格要么是一个表格 1-5，要么是一些 5 表格和一个表格 1-5。不会有其他组合。基本上就像您在以 5 为基数计算表格一样。

首先，根据需要处理尽可能多的 5.pdf 表格。如果表单数量大于 5，您将需要添加至少 1 个 5.pdf 文件。如果表单数量大于 10，则您需要添加至少 2 个 5.pdf 文件。您可以通过不断添加 5.pdf 表单直到您的计数小于 5 来做到这一点。

在伪代码中，您可以执行以下操作：

```
List forms = new ArrayList();
int count = <number of vehicles>

while count > 0 {
   if ( count >= 5 ) {
      forms.add( "5.pdf" );
      count = count - 5;
   } else {
      forms.add( "" + count + ".pdf" );
      count = 0;
   }
}

<forms now contains the list of all forms you need> 
```

或者，如果您愿意，可以将其简化如下：

```
int numberOfFives = (formsCount / 5); // Integer division, so if formsCount = 4, numberOfFives = 0
int remainingForm = (formsCount % 5); // Remainder after division by 5 
```

然后您将`numberOfFives`5.pdf 表单和一个`remainingForm`.pdf 表单添加到您的级联 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:31:57.803

看起来您需要反复减去小于等于目标的最大值。例如：

```
8: greatest is 5, 8-5=3
3: greatest is 3, 3-3=0, we're finished
8=5+3 
```

# android - AsyncTasks 需要很长时间才能完成

> ID：15576433
> 
> 赞同：0
> 
> 时间：2013-03-22T17:26:22.000
> 
> 标签：android, bitmap, android-asynctask

我呼吁这些类出现在 onCreate() 方法中，并且它们在类的底部都有布尔值，一旦它们完成，它们将设置为 true。只有这样我的 SurfaceView 才会绘制它需要的东西。为什么这三门课要花这么长时间才能完成？

敌人、云和子弹都是我在调用他们的类之前加载的位图

```
public class handleBullets extends AsyncTask<String, Integer, String>
    {
        @Override
        protected String doInBackground(String... arg0) {
            Random r = new Random();
            Log.d(null, "Spawn E-Bulles");
            for(int i = 0; i < enemies.size(); i++)
            {
                Enemy tempE = enemies.get(i);
                if(System.currentTimeMillis() - tempE.lastBulletSpawn >= 800 && tempE.x <= SCREEN_WIDTH)
                {
                    EnemyBullet eb = new EnemyBullet(tempE.x, tempE.y, enemyBullet.getWidth(), enemyBullet.getHeight(), enemy.getWidth(), enemy.getHeight());
                    enemyBullets.add(eb);

                    tempE.lastBulletSpawn = System.currentTimeMillis();
                }
            }
            Log.d(null, "Spawn Bullets");
            if(System.currentTimeMillis() - lastPBSpawn >= 400)
            {
                Bullet b = new Bullet(x, y, player.getWidth(), player.getHeight());
                bullets.add(b);

                lastPBSpawn = System.currentTimeMillis();
            }
            Log.d(null, "Remove Bullets");
            for(int i = bullets.size() - 1; i > -1; i--) 
            {
                Bullet tempB = bullets.get(i);
                if(tempB.x >= SCREEN_WIDTH)
                    bullets.remove(i);
            }
            Log.d(null, "removeEnemy Bullets");
            for(int i = enemyBullets.size() - 1; i > -1; i--) 
            {
                EnemyBullet tempEB = enemyBullets.get(i);
                if(tempEB.x <= 0 - enemyBullet.getWidth())
                    enemyBullets.remove(i);
            }
            Log.d(null, "Explosion Renders");
            for(int i = explosions.size() - 1; i > -1; i--) 
            {
                Explosion tempEx = explosions.get(i);
                tempEx.update();
                if(tempEx.duration <= 0)
                    explosions.remove(i);
            }
            initial_bullets = true;
            return null;
        }
    }
    public class handleEnemy extends AsyncTask<String, Integer, String>
    {
        @Override
        protected String doInBackground(String... arg0) {
            Log.d(null, "Spawning Enemies...");
            if(System.currentTimeMillis() - lastESpawn >= 750 && enemy != null)
            {
                Enemy x = new Enemy(SCREEN_WIDTH, SCREEN_HEIGHT, enemy.getWidth(), enemy.getHeight());
                enemies.add(x);

                lastESpawn = System.currentTimeMillis();
            }
            Log.d(null, "Enemies Spawned");
            //
            Log.d(null, "Removing Enemies...");
            for(int i = enemies.size() - 1; i > -1; i--) 
            {
                Enemy tempE = enemies.get(i);
                if(tempE.x <= 0 - enemy.getWidth())
                    enemies.remove(tempE);
            }
            Log.d(null, "Enemies Removed");
            //
            initial_enemies = true;
            return null;
        }
    }
    public class handleClouds extends AsyncTask<String, Integer, String>
    {
        @Override
        protected String doInBackground(String... arg0) {
            Log.d(null, "Generating Clouds...");
            Random r = new Random();
            if(r.nextInt(200) == 0 && clouds.size() <= 6 && cloudBM1 != null && cloudBM2 != null)
            {
                Cloud c = new Cloud(SCREEN_WIDTH, SCREEN_HEIGHT, cloudBM1.getWidth(), cloudBM2.getHeight());
                clouds.add(c);
            }
            Log.d(null, "Clouds Generated");
            //
            Log.d(null, "Removing Clouds...");
            for(int i = clouds.size() - 1; i > -1; i--) 
            {
                Cloud tempC = clouds.get(i);
                if(tempC.x <= 0 - cloudBM1.getWidth() && tempC.dir == 0)
                    clouds.remove(i);
                if(tempC.x >= SCREEN_WIDTH && tempC.dir == 1)
                    clouds.remove(i);
            }
            Log.d(null, "Clouds Removed");
            //
            initial_clouds = true;
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:41:55.137

可能是您的任务是串行执行的。`executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR)`尝试使用而不是调用并行执行您的任务`execute()`。

# java - request.getSession().getId() 与 session.getId()

> ID：15576439
> 
> 赞同：2
> 
> 时间：2013-03-22T17:26:25.783
> 
> 标签：java

我正在由一位已离职的顾问编写一些代码。我试图了解传递给方法的**会话**变量与**req.getSession()返回的变量之间是否存在差异**

当我在调试器中检查它们时，它们看起来是一样的。是否有理由不直接从**session.getId()**变量而不是**req.getSesssion.getId()**获取 id ？

```
public void enqueueRequest(
        HttpSession session,
        HttpServletRequest req,
        HttpServletResponse res) throws IOException {

            req.getSession().removeAttribute(TIME_STAMP);
            ResponseCache.INSTANCE.remove(req.getSession().getId());
        }
} 
```

对比

```
session.getId();
session.removeAttribute(TIME_STAMP); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:31:41.190

`HttpServletRequest#getSession`返回与 关联的当前会话对象`http request`。如果您的`Session`对象和`Session`与 http 请求关联的对象相同，则 id 将相同，因为`Object`相同。

根据[文档](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28%29)

> 返回与此请求关联的当前会话，或者如果请求没有会话，则创建一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T00:51:03.397

这是糟糕的设计。您将无法访问其他任何人的会话，并且会话已经通过请求可用，因此会话参数是多余的。如果有机会，请删除它。

# capybara - 试图在水豚中填写第二个文本框

> ID：15576440
> 
> 赞同：3
> 
> 时间：2013-03-22T17:26:26.120
> 
> 标签：capybara

我正在尝试填写标有 id="admin_passsword" 的两个文本框。我可以轻松访问第一个，但由于除了占位符和它上面的标签之外没有其他区别，我不知道如何访问第二个文本框来填写该字段。

```
<div class="fields">
    <div class="field-row">
      <label for="admin_email">Email</label>
      <input autocapitalize="off" id="admin_email" name="admin[email]" placeholder="Email" size="30" type="text" value="">
    </div>
    <div class="field-row">
      <label for="admin_serial_number">Serial number</label>
      <input id="admin_serial_number" name="admin[serial_number]" placeholder="Serial Number" size="30" type="text">
    </div>
    <div class="field-row">
      <label for="admin_password">Password</label>
      <input id="admin_password" name="admin[password]" placeholder="Password" size="30" type="password">
    </div>
    <div class="field-row">
      <label for="admin_password_confirmation">Password confirmation</label>
      <input id="admin_password" name="admin[password]" placeholder="Confirm Password" size="30" type="password">
    </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-04T23:26:46.573

使用 Capybara 2.1，这有效：

```
 fill_in("Password", with: '123456', :match => :prefer_exact)
  fill_in("Password confirmation", with: '123456', :match => :prefer_exact) 
```

更喜欢上述评论的链接： :prefer_exact 是 Capybara 1.x 中存在的行为。如果找到多个匹配项，其中一些是完全匹配的，而另一些不是，则返回第一个完全匹配的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:13:59.070

有多种方法可以做到这一点。这里是其中的一些：

在 Capybara 2.0 中，您可以这样做：

```
all('label[for=admin_password_confirmation]').each {|field| field.set('123456')} 
```

* * *

Capybara 2.1 支持新`:exact`选项：

```
fill_in('Password', with: '123456', exact: true)
fill_in('Password Confirmation', with: '123456', exact: true) 
```

但我建议你设置：

```
# e.g. in features/support/env.rb
Capybara.configure do |config|
  config.exact = true # exact will be true by default in option hashes. It's false by default
end

# in your tests
fill_in('Password', with: '123456')
fill_in('Password Confirmation', with: '123456') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-05T21:31:39.923

你也可以做一个内块......

```
within('.class div:nth-child(div you want) do 
  fill_in("css", :with => "text")
end 
```

# .net - 使用自定义模型绑定器绑定非顺序列表

> ID：15576441
> 
> 赞同：8
> 
> 时间：2013-03-22T17:26:30.583
> 
> 标签：.net, asp.net-mvc, validation, model-binding, unobtrusive-validation

我知道如果我想将非顺序元素绑定到 MVC 中的列表，我可以使用[此处](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)`Index`描述的语法。

但是，我无法获得远程验证来处理这个（使用[`Remote`](http://msdn.microsoft.com/en-us/library/system.web.mvc.remoteattribute%28v=vs.98%29.aspx)属性）。

例如，如果我有这样的模型：

```
public class AddUsers {
    public List<User> Users { get; set; }
    public string Comment { get; set; }
}

public class User {
    [Remote("UsernameAvailable", "User")]
    public string Name { get; set; }
} 
```

然后假设在我看来我有以下内容（为了清楚起见，我故意省略了我正在使用的 Html 助手）：

```
<input type="hidden" name="Users.Index" value="foo" />
<input type="text" name="Users[foo].Name" />

<input type="hidden" name="Users.Index" value="bar" />
<input type="text" name="Users[bar].Name" /> 
```

在表单帖子中，该`Index`字段随顺，这有助于模型绑定器很好地绑定所有内容，例如：

```
Comment=bla&Users.Index=foo&Users[foo].Name=john&Users.Index=bar&Users[bar].Name=bob 
```

但是当远程验证触发时，只有这个被发送到我的操作（两个单独的请求，每个被验证的项目一个）：

```
Users[foo].Name=john
Users[bar].Name=bob 
```

没有`Index`，模型绑定器不知道如何处理它。它既不能绑定到 a `User`、 a`List<User>`或 a `AddUser`。

这让我想到了我的问题。

有没有办法编写一个自定义模型绑定器，可以处理非顺序列表而无需使用`Index`符号？我必须承认，我很难理解为什么这个`Index`符号是必要的（也许作为某种优化除外）。

我正在使用 MVC 4 和 .NET 4.5。

**注意：**我以前从来没有弄乱过自定义模型绑定器，所以我真的只是在寻找一些关于它是否可能（或只是一个死胡同）的一般指导，以及一些入门指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T16:05:51.543

> 我能够通过调整[这个答案](https://stackoverflow.com/a/10801577/546561)中的解决方案来解决我的问题– Eric 2013-03-22 22:28:07

# php - 使用backbone.js vs php mvc 框架的好处

> ID：15576447
> 
> 赞同：1
> 
> 时间：2013-03-22T17:26:51.517
> 
> 标签：php, javascript, codeigniter, cakephp, backbone.js

我一直在学习 Codeigniter，有人建议我改用backbone.js。问题是我找不到关于为什么我应该使用主干而不是坚持使用 CS 或其他 php mvc 框架（如 cakePHP）的答案。似乎骨干网要庞大得多，并且与数据库的同步似乎过于复杂。

有人可以深入了解为什么要使用backbone.js吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:36:52.363

您不会将主干与数据库“同步”。Backbone 提供了一个框架，您可以在该框架上构建一个 UI，然后该 UI 将与与数据库对话的其他类型的界面进行交互（如 php/java/.net/whatever 应用程序）。

许多人使用 CI 之类的框架来构建其他接口/API。

[甚至还有一个 RESTful 的 CI 分支用于这样的目的](https://github.com/philsturgeon/codeigniter-restserver)。

# c - pcap_next() 函数应该放在数据包传输之前还是之后？

> ID：15576450
> 
> 赞同：0
> 
> 时间：2013-03-22T17:27:26.197
> 
> 标签：c, networking, libpcap

我想使用 libpcap 在 tcp-3way 握手中捕获 ACK 数据包，代码片段如下

```
 pcap_packet = pcap_next(pcap_handler, &pcap_header);
    if(pcap_packet !=NULL)
            printf("capture one packet with length of %d\n", pcap_header.len);

    // establish TCP connection with the server
    connect(sd_cli, (struct sockaddr *)&svr_addr, sizeof(svr_addr));

    process(pcap_packet); 
```

我想知道我应该将 pcap_next() 函数放在 connect() 之前还是 connect() 之后？我对回调函数机制有点迷茫

谁能用这个例子解释一下？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:30:10.693

您应该捕获与传输**并发的数据包。**因此，最好使用线程。

但是在您的情况下，放在`connect`前面`pcap_next`有更好的机会来捕获您需要的东西。但是，`connect`它本身就是一种阻塞方法，可能会丢失数据包。

# ruby - 尝试通过 rvm 安装 ruby 1.9.3 并在 OS X 10.8.3 上的 brew link apple-gcc42 失败

> ID：15576454
> 
> 赞同：1
> 
> 时间：2013-03-22T17:27:38.247
> 
> 标签：ruby, macos, rvm

我意识到在 Xcode 4.2 中新的基于 LLVM 的 gcc 存在一长串问题。

`rvm get head`所以我试着`rvm install apple-gcc42`

安装很顺利，但`brew link apple-gcc42`由于以下原因我无法安装：

```
Error: Could not symlink file: /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/i686-apple-darwin11-gfortran-4.2.1
Target /usr/local/bin/i686-apple-darwin11-gfortran-4.2.1 already exists. You may need to delete it.
To force the link and delete this file, do:
brew link --overwrite formula_name

To list all files that would be deleted:
 brew link --overwrite --dry-run formula_name 
```

我不确定我是否应该`brew link --overwrite apple-gcc42`在这里尝试。没有关于该`"Target /usr/local/bin/i686-apple-darwin11-gfortran-4.2.1 already exists"`错误的参考。任何人都可以提供一些想法？

**我担心的是它是否会影响与 Xcode 4.2 相关的任何内容。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:40:13.837

如果您不知道该文件，那么您可以安全地删除它 -`/usr/local/bin/i686-apple-darwin11-gfortran-4.2.1`顾名思义，它是`fortran`当今任何标准软件开发中未使用的。

# visual-studio-2012 - 是否有重新分发 Microsoft.VisualStudio.TextTemplating.11.0.dll 的合法方式？

> ID：15576457
> 
> 赞同：0
> 
> 时间：2013-03-22T17:27:42.703
> 
> 标签：visual-studio-2012, t4

我正在为 Windows Phone 编写一个扩展 Visual Studio Express 2012 的软件。该软件是基于 T4 文本模板的，我需要重新分发 T4 引擎。如何合法部署 T4 引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:48:47.023

不幸的是，T4 不是可再分发组件。

# wcf - 如何验证我的 WCF 消息是否已签名和加密？

> ID：15576459
> 
> 赞同：0
> 
> 时间：2013-03-22T17:27:53.207
> 
> 标签：wcf, msmq, x509certificate2

如何验证我的 WCF 消息是否已签名？我的设置运行正常，但需要能够检查服务器端的签名。这是怎么做到的？我正在使用 MsmqIntegrationBinding，并使用 X509Certificate2 对其进行签名。

```
var binding = new MsmqIntegrationBinding(MsmqIntegrationSecurityMode.Transport)
            {
                SerializationFormat = MsmqMessageSerializationFormat.Binary,
                Security = new MsmqIntegrationSecurity()
                {
                    Mode = MsmqIntegrationSecurityMode.Transport,
                    Transport = new MsmqTransportSecurity()
                    {
                        MsmqAuthenticationMode = MsmqAuthenticationMode.Certificate,
                        MsmqProtectionLevel = System.Net.Security.ProtectionLevel.Sign
                    }
                }
            };

EndpointAddress address = new EndpointAddress("myaddress");
ChannelFactory<IMyMessage> channelFactory = new ChannelFactory<IMyMessage>(binding, address);

channelFactory.Credentials.ClientCertificate.Certificate = my_x509certificate2;
IMyMessage channel = channelFactory.CreateChannel();

//create message and send using the channel 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:11:19.457

用这个注释你的服务或你的操作：

```
[OperationContract(ProtectionLevel = ProtectionLevel.EncryptAndSign)] 
```

这将基本上在服务器端强制执行/除非消息经过签名和加密，否则不会调用操作。

如果您需要更多参考，请查看 MSDN 上的 ProtectionLevel：

[http://msdn.microsoft.com/en-us/library/aa347692.aspx](http://msdn.microsoft.com/en-us/library/aa347692.aspx)

# mysql - 为 mySQL 数据库实施定期匹配系统的正确方法是什么？

> ID：15576463
> 
> 赞同：1
> 
> 时间：2013-03-22T17:21:12.810
> 
> 标签：mysql, sql, perl, scheduled-tasks, matching

请原谅我问这个问题是否经常被问到，但我在描述我的问题时遇到了麻烦，因此无法找到对 Google 有用的东西。

我想创建一个“配置文件匹配系统”，用户有两个列表。一个列表是他们需要的东西的列表，另一个是他们想要的东西的列表。我想让我的网站根据互补需求匹配人们，但我不确定最好的方法是什么。我已经在 Perl 中构建了站点，并使用 MySQL 作为我的数据库。我的第一个想法是，我需要一个预定的 Perl 脚本来查询数据库并将匹配项输入回数据库，以便在用户下次使用时提供给用户，但我想不出另一种方法来做到这一点，所以我我想看看互联网上说了什么。

谢谢你们的帮助，迪伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:58:51.737

您应该能够使用[SQL Join](http://en.wikipedia.org/wiki/Join_%28SQL%29)获得您想要的东西。示例 SQLite 代码：

```
.headers on
.separator "\t"
create temporary table 'buyers' (
    buyer integer primary key,
    wants char(1)
);

insert into buyers(wants) values('a');
insert into buyers(wants) values('b');
insert into buyers(wants) values('c');
insert into buyers(wants) values('d');
insert into buyers(wants) values('e');

create temporary table 'sellers' (
    seller integer primary key,
    offers char(1)
);

insert into sellers(offers) values ('a');
insert into sellers(offers) values ('b');
insert into sellers(offers) values ('b');
insert into sellers(offers) values ('e');

select
    buyers.buyer as buyer,
    sellers.seller as seller,
    buyers.wants as good
from
    buyers left outer join sellers
on
    buyers.wants = sellers.offers
; 
```

输出：

```
买家卖家好
1 1个
2 2 乙
2 3 乙
3℃
4天
5 4 e
```

在 Perl 中做类似的事情：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Graph::Undirected;

my $g = Graph::Undirected->new(unionfind => 1);

# buyers
$g->add_edge(b1 => 'a');
$g->add_edge(b2 => 'b');
$g->add_edge(b3 => 'c');
$g->add_edge(b4 => 'd');
$g->add_edge(b5 => 'e');

# sellers

$g->add_edge(s1 => 'a');
$g->add_edge(s2 => 'b');
$g->add_edge(s3 => 'b');
$g->add_edge(s4 => 'e');

use YAML;
print Dump [ $g->connected_components ]; 
```

输出：

```
-
  - 一个
  - b1
  - s1
-
  - s2
  - b
  - s3
  - b2
-
  - b4
  -d
-
  -e
  - b5
  - s4
-
  - b3
  - C
```

# javascript - 即时添加 Javascript

> ID：15576465
> 
> 赞同：1
> 
> 时间：2013-03-22T17:28:13.857
> 
> 标签：javascript

我有一个理论上的问题...我目前正在工作，无法尝试..

如果我有以下代码：

```
stuff = '<button onclick="alert(' + "'Test');" + 'my Button</button>';
$("container").html(stuff); 
```

当我点击我的新按钮时，我的脚本会起作用吗？我的按钮会被添加吗？

我在 JsFiddle 上没有得到任何结果...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:32:10.557

假设您修复了选择器“容器”和未关闭的标签，它应该可以工作。

但这不是使用 jQuery 正确绑定事件的方式。

你应该做这个 ：

```
$("#container").empty().append(
    $('<button>my Button</button>').click(function(){ alert("Test") })
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:29:53.133

如果您正确关闭了打开按钮标签，它将起作用

```
stuff = '<button onclick="alert(' + "'Test');" + '">my Button</button>';
$("container").html(stuff);                       ^^ 
```

同样正如评论中指出的那样，您的容器选择器可能是错误的。

根据容器是类还是 id，您很可能需要这 2 个中的一个：

```
$(".container").html(stuff);
$("#container").html(stuff); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:30:09.473

那会起作用，但是您忘记关闭按钮标签。

```
stuff = '<button onclick="alert(\'Test\');">my Button</button>';
$("container").html(stuff); 
```

# wpf - 如何使用 Awesomium.Net 进行身份验证

> ID：15576466
> 
> 赞同：0
> 
> 时间：2013-03-22T17:28:14.727
> 
> 标签：wpf, awesomium

我正在使用 Awesomium.Net WPF 控件在 WPF 应用程序中显示 Intranet Silverlight 应用程序。

虽然这在 Chrome 中运行良好，但使用 Awesomium，我似乎遇到了身份验证问题。我收到需要身份验证的通知，但我无法通过此操作。我提供了用户名和密码，但得到一个空白屏幕。

有没有人知道如何在 Awesomium.Net 中使用域身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:40:29.183

我*认为*这种身份验证请求可以通过以下方式捕获：

```
webView.LoginRequest 
```

在处理程序中，如果我没记错的话，您可以选择通过正常的模态对话框弹出窗口或代码来处理它 - 过去不得不处理一次。

参考：[http ://awesomium.com/docs/1_7_rc3/sharp_api/html/E_Awesomium_Core_IWebView_LoginRequest.htm](http://awesomium.com/docs/1_7_rc3/sharp_api/html/E_Awesomium_Core_IWebView_LoginRequest.htm)

# javascript - jQuery获取所有没有分配id的元素

> ID：15576467
> 
> 赞同：2
> 
> 时间：2013-03-22T17:28:21.320
> 
> 标签：javascript, jquery

我在父 div 中有一个 div 列表，其中一些有 ID，其他没有（故意），但它们都有相同的类。如何获取没有分配 id 的 div 列表？

```
<div class='AllQuestions'>
    <div class='questionList'>Something Something</div>
    <div class='questionList'>Something Something</div>        
    <div class='questionList' id='question-20'>Something Something</div>
    <div class='questionList' id='question-22'>Something Something</div>        
    <div class='questionList'>Something Something</div>
    <div class='questionList' id='question-100'>Something Something</div>
</div> 
```

我知道我可以`$('.questionList')`获取所有 div 的列表，但我不知道如何过滤掉带有 id 的那些。（此外，由于我是随机生成的，因此无法可靠地预测 id）

也许一种方法是以某种方式删除带有 id 的那些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:29:30.440

您可以使用`$('.AllQuestions .questionList:not([id])')`. 那应该可以正常工作。

查看这些链接：

*   [不是选择器](http://api.jquery.com/not-selector/)
*   [有属性选择器](http://api.jquery.com/has-attribute-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:33:48.013

选择您的列表，然后排除具有 id 属性的列表：

```
$('.questionList').not('[id]') 
```

请注意，由于 jQuery 从右到左选择器，这应该比将它们全部放在一个选择器中更快 - 对我来说更容易查看/理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:37:16.090

尝试这个：

```
var list = $(".questionList:not([id])"); 
```

# jquery - 根据图像更改文本颜色

> ID：15576470
> 
> 赞同：2
> 
> 时间：2013-03-22T17:28:38.900
> 
> 标签：jquery, css, image

我试图找出一种通过 jQuery 更改某些文本颜色的方法。

本质上，我有一个带有随机加载图像的 div。除此之外，我有 div 包含一些文本。

我想要发生的是，当加载特定图像时，它将文本颜色从白色交换为黑色。

有人指出我正确的方向吗？

**为了澄清：**

我的问题是如何找到已加载到 div 中的图像，然后根据结果执行函数。例如：

我有 2 个图像，它们通过 backstretch.js 随机加载到一个中。我还有另一个 div，其中一些文本覆盖在图像顶部：

```
<!-- my images -->
image-1.jpg
image-2.jpg

<!-- Layout -->
<div id="imageDIV"></div>
<div id="textDiv"><p>hello</p></div> 
```

一旦页面加载完毕并且图像已加载到 div 中。检查它是哪一个然后做某事。所以

```
if { 
   image is image-1.jpg then add a class to #textDiv
}

else if { 
   image is image-2.jpg add this class instead
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:35:52.150

您可以使用[颜色小偷](https://github.com/lokesh/color-thief) 来获取图像的主色

```
 myImage = $('#myImage');  
    dominantColor = getDominantColor(myImage);  
    paletteArray = createPalette(myImage, 10); // 2nd argument sets th`e # of colors in palette 
```

# objective-c - typdef 枚举问题

> ID：15576474
> 
> 赞同：0
> 
> 时间：2013-03-22T17:28:49.477
> 
> 标签：objective-c, switch-statement, typedef

我正在看的可能是一个简单的问题，但仍然无法弄清楚代码有什么问题：

在头文件（.h）中我声明了这一点：

```
typedef enum {
    ActivityTaskAdd = 1,
    ActivityAppointmentAdd = 2,
    ActivityContactAdd = 3,
} OfflineRelationshipType; 
```

并在我正在做的方法中的 .m 文件中

```
OfflineRelationshipType* relationType;
switch(relationType) { 
```

但是在 switch 语句上出现错误，如下所示

![在此处输入图像描述](../Images/cfa0201049ac09a8f05424a020e1364c.png) 这应该是直截了当的，但仍然看不到我缺少什么。

编辑：我也试过：

```
 @property (assign) OfflineRelationshipType* relationType; 
```

而不是在switch语句之前声明relationType。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:29:41.107

利用

```
OfflineRelationshipType relationType; 
```

您指向它，而`switch`期望整数值。

# css - Bootstrap 中缩略图的边距问题

> ID：15576483
> 
> 赞同：3
> 
> 时间：2013-03-22T17:29:30.617
> 
> 标签：css, twitter-bootstrap, margins

我正在这样做：

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12 well">
    <div class="row-fluid">
      <ul class="thumbnails">
        <?php 
          for($i=0; $i<count($rows); $i+=1){ // EVERY ODD BOOK STARTING AT 0
        ?>
        <li class="span4">
          <div class="thumbnail">
            <img src="http://placehold.it/320x200" alt="ALT NAME">
            <div class="caption">
              <h3><?php echo $rows[$i]['Title']; ?></h3>
              <p>Seller: <?php echo $rows[$i]['FirstName'] . " " . $rows[$i]['LastName']; ?> </p>
              <p>Email: <?php echo $rows[$i]['Email']; ?></p>
              <p>Phone: <?php echo $rows[$i]['PhoneNumber']; ?></p>
              <p>Condition: <?php echo $rows[$i]['BookCondition']; ?></p>
              <p align="center"><a href="#" class="btn btn-primary btn-block">Open</a></p>
            </div>
          </div>
        </li> 
          <?php
        }
      ?>   
      </ul>
    </div>
</div> 
```

每当我有超过 3 个项目时，缩略图就会被第二行的左边距所错位。

见图片：![截屏](../Images/c097971e8f04cb82e6bb89f25fb66312.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T17:35:10.187

我猜bootstrap会为所有元素添加一个左边距，除了第一个元素。您可以添加这样的样式：

```
ul.thumbnails li.span4:nth-child(3n + 4) {
  margin-left : 0px;
} 
```

但请注意，这与较旧的 ie 浏览器不兼容...

您可以这样做的另一种方法是在您的 php 循环中的每个 li 中添加一个类（将其命名为`.noLeftMargin`，并相应地设置 css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T13:30:11.590

删除 .thumbnails 之前的行 div，您将不需要额外的 css。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T12:55:22.210

您也可以查看 Bootstrap 的有关重置的文档。

Bootstrap.com > CSS > 网格 > 响应列重置

[http://getbootstrap.com/css/#grid-responsive-resets](http://getbootstrap.com/css/#grid-responsive-resets)

大多数情况下，它可以通过 Bootstrap 的 .clearfix 类来解决

# c# - 将封装添加到现有的 XNA 游戏入门套件 - 专门用于方法

> ID：15576492
> 
> 赞同：0
> 
> 时间：2013-03-22T17:30:11.083
> 
> 标签：c#, methods, encapsulation, protection, levels

我正在使用 XNA Shooter Starter 工具包并想为项目添加封装

我已经了解如何对整数等项目执行此操作，您可以在其中封装字段以便原始值不受影响......但是您如何使用方法来做到这一点？

```
public void Initialize(Texture2D texture, Vector2 position,
int frameWidth, int frameHeight, int frameCount,
int frametime, Color color, float scale, bool looping)
    {
        // Keep a local copy of the values passed in
        this.color = color;
        this.FrameWidth = frameWidth;
        this.FrameHeight = frameHeight;
        this.frameCount = frameCount;
        this.frameTime = frametime;
        this.scale = scale;

        Looping = looping;
        Position = position;
        spriteStrip = texture;

        // Set the time to zero
        elapsedTime = 0;
        currentFrame = 0;

        // Set the Animation to active by default
        Active = true;
    } 
```

我在一个类中有上述方法......在另一个类中它用于各种其他方法，其中一个如下所示

```
private void AddExplosion(Vector2 position)
    {
        Animation explosion = new Animation();
        explosion.Initialize(explosionTexture, position, 134, 134, 12, 45, Color.White, 1f, false);
        explosions.Add(explosion);
    } 
```

如您所见，它用于“explosion.initialize”方法的第二行

如果我将初始化方法更改为私有或公共，我会收到错误消息，指出 AddExplosion 方法由于其保护级别而无法访问它

所以请记住，我想添加封装在这种情况下我将如何做呢？

在这方面我相对较新，所以请保持答案简单

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:44:32.153

“封装”一个方法的方法是将它放在另一个方法中，然后引用第一个方法。

也就是说，我不明白你为什么要这样做。

# unit-testing - Grails单元测试比较字符串编码错误

> ID：15576501
> 
> 赞同：1
> 
> 时间：2013-03-22T17:30:41.270
> 
> 标签：unit-testing, grails, encoding, utf-8, groovy

我在下面的这个单元测试失败了，可能是因为我不知道如何解决的编码问题。class 和 messages.properties 文件都是 UTF-8 编码的。我在 eclipse 中检查了文件属性。

```
assert mobileResponse.toMobile().data.get('mobile_error_description') == 'Usuário e/ou senha inexistentes e/ou inválidos.' 
```

控制台输出为：

```
assert mobileResponse.toMobile().data.get('mobile_error_description') == "Usu√°rio e/ou senha inexistentes e/ou inv√°lidos."
                                                                      |false 
```

# windows-runtime - 简单的滑块样式

> ID：15576504
> 
> 赞同：0
> 
> 时间：2013-03-22T17:30:51.530
> 
> 标签：windows-runtime, winrt-xaml

有没有一种**简单**的方法可以使滑块看起来像网格拆分器？（基本上是将滑块中的拇指更改为一条线）我正在尝试创建“重叠”效果以允许用户显示两个相似图像的区域。[（这是这个](https://stackoverflow.com/questions/15536757/grid-splitter-overlap/)问题的后续）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:42:47.757

您可以在 Blend 中相当轻松地修改模板。只需在 Blend 中添加一个 Slider，右键单击，选择 Edit Template/Edit Current 即可看到模板的所有元素。假设更新 Horizo​​ntalTemplate Grid（当您的 Slider 处于水平方向时使用）就足够了，您需要调整 Grid RowDefinitions 的大小并修改 Horizo​​ntalThumb 大小，然后可能将 Horizo​​ntalTrackRect 和 Horizo​​ntalDecreaseRect 的填充画笔更改为透明。这是这种快速更新的结果：

```
<Page
    x:Class="App131.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App131"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Page.Resources>
        <Style x:Key="SliderStyle1" TargetType="Slider">
            <Setter Property="Background" Value="{StaticResource SliderTrackBackgroundThemeBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource SliderBorderThemeBrush}"/>
            <Setter Property="BorderThickness" Value="{StaticResource SliderBorderThemeThickness}"/>
            <Setter Property="Foreground" Value="{StaticResource SliderTrackDecreaseBackgroundThemeBrush}"/>
            <Setter Property="ManipulationMode" Value="None"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid Margin="{TemplateBinding Padding}">
                            <Grid.Resources>
                                <Style x:Key="SliderThumbStyle" TargetType="Thumb">
                                    <Setter Property="BorderThickness" Value="1"/>
                                    <Setter Property="BorderBrush" Value="{StaticResource SliderThumbBorderThemeBrush}"/>
                                    <Setter Property="Background" Value="{StaticResource SliderThumbBackgroundThemeBrush}"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Thumb">
                                                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}"/>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Grid.Resources>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="VerticalDecreaseRect">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTrackDecreasePressedBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="VerticalTrackRect">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTrackPressedBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="HorizontalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbPressedBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="HorizontalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbPressedBorderThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="VerticalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbPressedBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="VerticalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbPressedBorderThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="HorizontalBorder">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderDisabledBorderThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="VerticalBorder">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderDisabledBorderThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="VerticalDecreaseRect">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTrackDecreaseDisabledBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="VerticalTrackRect">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTrackDisabledBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="HorizontalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbDisabledBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="HorizontalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbDisabledBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="VerticalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbDisabledBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="VerticalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbDisabledBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="TopTickBar">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTickMarkOutsideDisabledForegroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="HorizontalInlineTickBar">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTickMarkInlineDisabledForegroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="BottomTickBar">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTickMarkOutsideDisabledForegroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="LeftTickBar">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTickMarkOutsideDisabledForegroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="VerticalInlineTickBar">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTickMarkInlineDisabledForegroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="RightTickBar">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTickMarkOutsideDisabledForegroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="PointerOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="VerticalDecreaseRect">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTrackDecreasePointerOverBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="VerticalTrackRect">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderTrackPointerOverBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="HorizontalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbPointerOverBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="HorizontalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbPointerOverBorderThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="VerticalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbPointerOverBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="VerticalThumb">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SliderThumbPointerOverBorderThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="FocusStates">
                                    <VisualState x:Name="Focused">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualWhiteHorizontal"/>
                                            <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualBlackHorizontal"/>
                                            <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualWhiteVertical"/>
                                            <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualBlackVertical"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Unfocused"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Grid x:Name="HorizontalTemplate" Background="Transparent">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="0"/>
                                    <RowDefinition/>
                                    <RowDefinition Height="0"/>
                                </Grid.RowDefinitions>
                                <Rectangle x:Name="HorizontalTrackRect" Grid.ColumnSpan="3" Grid.Row="1" Fill="Transparent"/>
                                <Rectangle x:Name="HorizontalDecreaseRect" Grid.Row="1" Fill="Transparent"/>
                                <TickBar x:Name="TopTickBar" Grid.ColumnSpan="3" Fill="{StaticResource SliderTickmarkOutsideBackgroundThemeBrush}" Height="{StaticResource SliderOutsideTickBarThemeHeight}" Margin="0,0,0,2" Visibility="Collapsed" VerticalAlignment="Bottom"/>
                                <TickBar x:Name="HorizontalInlineTickBar" Grid.ColumnSpan="3" Fill="{StaticResource SliderTickMarkInlineBackgroundThemeBrush}" Height="{StaticResource SliderTrackThemeHeight}" Grid.Row="1" Visibility="Collapsed"/>
                                <TickBar x:Name="BottomTickBar" Grid.ColumnSpan="3" Fill="{StaticResource SliderTickmarkOutsideBackgroundThemeBrush}" Height="{StaticResource SliderOutsideTickBarThemeHeight}" Margin="0,2,0,0" Grid.Row="2" Visibility="Collapsed" VerticalAlignment="Top"/>
                                <Rectangle x:Name="HorizontalBorder" Grid.ColumnSpan="3" Grid.Row="1" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="{TemplateBinding BorderThickness}"/>
                                <Thumb x:Name="HorizontalThumb" Background="{StaticResource SliderThumbBackgroundThemeBrush}" Grid.Column="1" DataContext="{TemplateBinding Value}" Grid.Row="1" Style="{StaticResource SliderThumbStyle}" Width="{StaticResource SliderTrackThemeHeight}"/>
                                <Rectangle x:Name="FocusVisualWhiteHorizontal" Grid.ColumnSpan="3" IsHitTestVisible="False" Opacity="0" Grid.RowSpan="3" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1"/>
                                <Rectangle x:Name="FocusVisualBlackHorizontal" Grid.ColumnSpan="3" IsHitTestVisible="False" Opacity="0" Grid.RowSpan="3" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1"/>
                            </Grid>
                            <Grid x:Name="VerticalTemplate" Background="Transparent" Visibility="Collapsed">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="17"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="17"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Rectangle x:Name="VerticalTrackRect" Grid.Column="1" Fill="{TemplateBinding Background}" Grid.RowSpan="3"/>
                                <Rectangle x:Name="VerticalDecreaseRect" Grid.Column="1" Fill="{TemplateBinding Foreground}" Grid.Row="2"/>
                                <TickBar x:Name="LeftTickBar" Fill="{StaticResource SliderTickmarkOutsideBackgroundThemeBrush}" HorizontalAlignment="Right" Margin="0,0,2,0" Grid.RowSpan="3" Visibility="Collapsed" Width="{StaticResource SliderOutsideTickBarThemeHeight}"/>
                                <TickBar x:Name="VerticalInlineTickBar" Grid.Column="1" Fill="{StaticResource SliderTickMarkInlineBackgroundThemeBrush}" Grid.RowSpan="3" Visibility="Collapsed" Width="{StaticResource SliderTrackThemeHeight}"/>
                                <TickBar x:Name="RightTickBar" Grid.Column="2" Fill="{StaticResource SliderTickmarkOutsideBackgroundThemeBrush}" HorizontalAlignment="Left" Margin="2,0,0,0" Grid.RowSpan="3" Visibility="Collapsed" Width="{StaticResource SliderOutsideTickBarThemeHeight}"/>
                                <Rectangle x:Name="VerticalBorder" Grid.Column="1" Grid.RowSpan="3" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="{TemplateBinding BorderThickness}"/>
                                <Thumb x:Name="VerticalThumb" Background="{StaticResource SliderThumbBackgroundThemeBrush}" Grid.Column="1" DataContext="{TemplateBinding Value}" Height="{StaticResource SliderTrackThemeHeight}" Grid.Row="1" Style="{StaticResource SliderThumbStyle}" Width="{StaticResource SliderTrackThemeHeight}"/>
                                <Rectangle x:Name="FocusVisualWhiteVertical" Grid.ColumnSpan="3" IsHitTestVisible="False" Opacity="0" Grid.RowSpan="3" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1"/>
                                <Rectangle x:Name="FocusVisualBlackVertical" Grid.ColumnSpan="3" IsHitTestVisible="False" Opacity="0" Grid.RowSpan="3" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1"/>
                            </Grid>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <Slider Margin="0" Style="{StaticResource SliderStyle1}"/>

    </Grid>
</Page> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:37:05.970

不幸的是，除非该特定控件的默认模板已定义您可以覆盖的部分，否则无法在不替换整个模板的情况下对控件进行模板化。[如此处](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465381.aspx#use_tools_to_work_with_styles_easily)所述，有支持模板控件的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:44:13.500

请注意，如果您不想使用 Blend，但仍需要对控件的模板进行轻微修改，则 Windows 8 默认模板存储在 Program Files (x86)\Windows Kits\8.0\Include\WinRT\Xaml\Design\通用的.xaml 。

当我需要编辑滑块模板时，我只需将文件中的默认模板复制/粘贴到项目中的资源文件中，然后应用我的修改。

# arrays - 如何将结构数组切成行而不是列？

> ID：15576509
> 
> 赞同：4
> 
> 时间：2013-03-22T17:31:03.967
> 
> 标签：arrays, matlab, structure

考虑以下。

```
a(1).x = [1 2 3];
a(2).x = [4 5 6]; 
```

`[a.x]`会给你`[1 2 3 4 5 6]`。

怎么*轻松*搞定`[1 2 3; 4 5 6]`。例如，不使用 reshape。

PS 语法`[a.x;]`会很酷。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T18:00:46.520

您可以使用 vertcat 执行此操作：

```
vertcat(a.x)

ans =

 1     2     3
 4     5     6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:01:48.007

一种方法是使用`struct2cell`,`cell2mat`和`squeeze`：

```
>> a(1).x = [1 2 3];
>> a(2).x = [4 5 6];
>> squeeze(cell2mat(struct2cell(a)))'

ans =

     1     2     3
     4     5     6 
```

# c# - 将英国日期格式转换为美国日期

> ID：15576510
> 
> 赞同：0
> 
> 时间：2013-03-22T17:31:12.293
> 
> 标签：c#, asp.net, date, date-format

我有一个 JQuery 日期选择器，它将日期以 DD/MM/YYYY 格式放入文本框中。

我正在尝试将其存储在需要接受日期为 MM/DD/YYYY 的 SQL Server 2008 中，我应该如何格式化日期才能使其正常工作？

这是在查询中添加 my 参数的代码，这会导致错误，因为日期和月份是错误的

```
 TextBox fixtureDateTextBox = (TextBox)Master.FindControl("ContentPlaceHolderMenu").FindControl("datepicker");
 SqlParameter fixtureDateParam = new SqlParameter("@fixtureDate", fixtureDateTextBox.Text); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:34:18.517

永远不要在你正在做的**时候**直接将输入文本插入到参数中——这是太多安全漏洞和漏洞的根本原因。首先通过调用将输入解析为`DateTimeOffset`对象（也可以使用`DateTime`，但一般情况下使用Offset比较好）`DateTimeOffset.Parse(...)`，然后直接添加为参数即可，无需修改。

编辑：我重新阅读了您的问题，并意识到虽然上述内容没有错，但它确实错过了一些解决您问题的重要事项。有关如何配置日期选择器以显示其存储在备用字段中的备用日期格式，请参阅[此内容：](http://jqueryui.com/datepicker/#alt-field)

编辑 2：您需要`DateTime`使用允许您传入`IFormatProvider`实例的重载来解析对象。请参阅[http://msdn.microsoft.com/en-us/library/system.iformatprovider.aspx](http://msdn.microsoft.com/en-us/library/system.iformatprovider.aspx)，了解如何执行您想要执行的操作的示例。否则，`DateTime.Parse('13/3/2013')`将由于无法识别的格式而失败。

`DateTime.Parse('13/3/2013', new CultureInfo("en-GB").DateTimeFormat)`就是你要对输入框做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:40:18.093

我同意其他人的观点，你应该能够配置 JQuery 选择器格式，但如果你不能，这*应该*可以解决问题：

```
TextBox fixtureDateTextBox = (TextBox)Master.FindControl("ContentPlaceHolderMenu").FindControl("datepicker");
DateTime fixtureDate = DateTime.Parse(fixtureDateTextBox.Text, new CultureInfo("en-GB"));
SqlParameter fixtureDateParam = new SqlParameter("@fixtureDate", fixtureDate.ToString(new CultureInfo("en-US")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:39:59.230

尝试这个：

```
TextBox fixtureDateTextBox = (TextBox)Master.FindControl("ContentPlaceHolderMenu").FindControl("datepicker");
DateTime date = DateTime.Parse(fixtureDateTextBox.Text);
SqlParameter fixtureDateParam = new SqlParameter("@fixtureDate", date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:48:25.517

在命名空间部分添加：`using System.Globalization;`

然后解析您的输入日期如下：

```
string DB_Date = (DateTime.Parse(fixtureDateTextBox.Text)).ToString(new CultureInfo("en-US")); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-02T13:06:04.173

```
 DateTime UKDate = Convert.ToDateTime(datepicker.Text);<br>
  string usDate= UKDate.ToString("dd-MM-yyyy");<br>
  SqlParameter fixtureDateParam = new SqlParameter("@fixtureDate", usDate); 
```

# javascript - 动态创建的标签上的两个 onchange 事件

> ID：15576511
> 
> 赞同：1
> 
> 时间：2013-03-22T17:31:13.643
> 
> 标签：javascript

我正在尝试为具有两个不同功能`onchange`的标签 ( ) 添加两个事件。`<select>`这是代码的一部分：

```
 var slct=document.createElement("select"); 
        slct.id="tskSlk_"+idN;
        for (var i = 0; i < opt.length; i++) {
            var objOpt=document.createElement("option");
            objOpt.text=opt[i];
            slct.appendChild(objOpt);
        };
        slct.onchange=prcTypCh;
        slct.onchange=statBar;
        tsks.appendChild(slct); 
```

所以我有这两个功能，并希望一旦有人从列表中选择一个选项，就可以执行这两个功能。我知道两种可能的方法：

1.  使其中之一成为`onblur`
2.  使第二个函数从第一个函数中调用。

第一个对我来说根本不起作用，第二个只对现在有用。那么还有其他方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:53:29.180

您可以将这两个功能添加到`onchange`事件中

```
slct.addEventListener('change', prcTypCh);
slct.addEventListener('change', statBar); 
```

或者你可以让你当前的`onchange`函数只是一个调用这两个函数的处理程序

```
slct.onchange = myOnChangeHandler;

function myOnChangeHandler(){
    prcTypCh();
    statBar();
} 
```

此外，如果可能的话，我建议您使用[jQuery](http://jquery.com/)或其他[抽象框架](http://javascriptlibraries.com/)来完成一些繁琐的工作。这样你就可以做这样的事情：

```
$(slct).on("change", function(){
    prcTypCh();
    statBar();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:35:37.807

你可以使用`addEventListener`：

```
slct.addEventListener('change', prcTypCh, false);
slct.addEventListener('change', statBar, false); 
```

（如前所述，`attachEvent`如果您的目标是 IE < 9，则需要有条件地使用。为此，您应该考虑使用像 jQuery 这样的库来涵盖各种浏览器实现。）

# jquery - 保持宽高比的响应式背景

> ID：15576514
> 
> 赞同：1
> 
> 时间：2013-03-22T17:31:17.493
> 
> 标签：jquery, responsive-design, slideshow, cycle, jquery-cycle

我正在使用 Malsup 的 Cycle 2 在单独的 div 中创建带有相应滑动文本的背景幻灯片。我在这里有一些简单的标记，但似乎无法裁剪图像，以便它始终是浏览器高度的 100%（如果你制作一个薄窗口，你会看到底部的红色）。

也许解决方案是 jQuery 或 CSS——我看到的一切都建议`height:auto`在图像和父 div 上使用，但无济于事。

[jsfiddle](http://jsfiddle.net/QkkX3/2/)

```
<div id="background" class="cycle-slideshow" 
                     data-cycle-fx="scrollHorz" 
                     data-cycle-timeout="2000"
                     data-cycle-slides="> div"
>
    <div style="background:#fcc">
        <img src="http://stoptraining.me/staged/IMG_1402.jpg">
    </div>
    <div style="background:#cfc">
        <img src="http://stoptraining.me/staged/IMG_1403.jpg">
    </div>
</div>

<div class="center">
    <div id="text" class="cycle-slideshow" 
                   data-cycle-fx="fade" 
                   data-cycle-timeout="2000"
                   data-cycle-slides="> div"
    >
        <div>
            <h2>Title</h2>
            <p>Lorem ipsum dolor ...</p>
        </div>
        <div>
            <p>Mel eu pertinax ...
        </div>
        <div>
            <p>Utinam electram pertinacia ...
        </div>
    </div>
</div> 
```

**CSS：**

```
body, html {
    background: red;
    padding: 0;
    margin: 0;
    height: auto;
    width: 100%;
}
#background {
    position: fixed;
    width: 100%;
    height: auto;
    z-index: 99;
    overflow: hidden;
}
#background div {
    width: 100%;
    height: auto;
    background-size: cover;
    overflow: hidden;
}
#background div img {
}
img {
    width: 100%;
    height: auto;
}
#text {
    position: relative;
    text-align: center;
    z-index: 99;
}
.center {
    background: white;
    padding: 200px 0 0 0;
    width: 400px;
    overflow: auto;
    min-height: 1000px;
    margin: auto;
    z-index: 9999;
    position: relative;
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T19:38:59.407

目前没有 CSS 样式可以帮助任何元素根据哪一侧更大来保持其纵横比；因此，您将不得不求助于使用 JavaScript。

这是一个工作[jsFiddle](http://jsfiddle.net/QkkX3/11/)，它完成了你想要的。

* * *

上述解决方案包含对您原来的一些修改......

# CSS：

**消除：**

```
#background div img {
}
img{
    width: 100%;
    height: auto;
} 
```

**改变：**

```
#background {
    /* ... */
    /* make sure width and height are 100%! */
    width: 100%;
    height: 100%;
    /* ... */
}
#background div {
    /* ... */
    /* make sure width and height are 100%! */
    width: 100%;
    height: 100%;
    /* ... */
} 
```

**添加：**

```
#background div img.wider {
    width: 100%;
    height: auto;
}
#background div img.higher {
    width: auto;
    height: 100%;
} 
```

# **JavaScript：**

```
var imgWidth = 1600;
var imgHeight = 1067;
var imgRatio = imgWidth / imgHeight;

$(ResizeBackground); // call on initialize
$(window).resize(ResizeBackground); // and on resize

function ResizeBackground() {
    var div = $('#background');
    var divWidth = div.width();
    var divHeight = div.height();

    // if the div's ratio is higher than the image, it means that
    // the div is wider than the image (and the background will be seen on the sides).
    // Else, the div is higher and will display the background on the bottom.

    // this condition will change the images proportion to always fill the background.
    if (divWidth / divHeight > imgRatio) {
        div.find('img').removeClass('higher').addClass('wider');
    } else {
        div.find('img').removeClass('wider').addClass('higher');
    }
} 
```

* * *

# **更新**

为了使图像居中，*同时*按比例调整大小，您必须使用以下计算：

```
var $imgs = div.find('img');

if (divRatio > imgRatio) {
    $imgs.each(function () {
        var $this = $(this);
        // set a negative top margin (and move the image up)
        $this.css('margin-top', -Math.abs(div.height() - $this.outerHeight()) / 2);
    });
} else {
    $imgs.each(function () {
        var $this = $(this);
        // set a negative left margin (and move the image to the left)
        $this.css('margin-left', -Math.abs(div.width() - $this.outerWidth()) / 2);
    });
} 
```

我稍微更新[了 jsFiddle](http://jsfiddle.net/QkkX3/22/)，请看一下，看看与`// NEW!!`旧[版本](http://jsfiddle.net/QkkX3/11/)的区别。

# java - 如何设计我的 Java 类以使用已定义的 Utility 类的方法？

> ID：15576518
> 
> 赞同：0
> 
> 时间：2013-03-22T17:31:38.003
> 
> 标签：java, oop, selenium, webdriver

如何设计我的 Java 类以正确扩展 Utility 类？这是我目前如何执行此操作的屏幕截图，但我怀疑有更好的方法可以做到这一点？我在这里使用正确的面向对象设计吗？我这样做是因为既需要扩展**所需**的LoadableComponent 类，又需要访问我自己的 WebDriverUtils 实用程序类中的所有静态方法。我正在寻找一个更好的主意，因为我不是受过正规教育的程序员。

换句话说，Utility 类不是“is a”，也不是“has a”，那么它如何适应 oop 的世界呢？

如果您想查看我如何实现此图的示例，我在 GitHub 上编写了一些代码，请[在此处查看我的项目](https://github.com/djangofan/WebDriverTestingTemplate)。如果有人想发布一个正确方法的图表，那也很棒。

![在此处输入图像描述](../Images/a512085e8f2f60f015b565206c3cdf1d.png)

注意：在此 Web 浏览器测试自动化项目的图表中，TabIFrameOne 和 tabIFrameTwo 是页面对象，用于处理 iframe 何时完成加载和识别框架中可以与之交互的元素的识别。DefaultPage 是主浏览器窗口 DOM，并不代表 iFrame 内的 DOM。每个 iFrame 类都使用 WebDriver PageFactory.initObjects() 来加载 Web 元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:35:28.343

我会说继承在这里不是一个好主意。一个页面可能有一个实用函数，但它不会是一个实用函数。

继承意味着 IS-A：如果类 A 扩展 B，那么类 A IS-A B。您必须能够在每个需要 B 的上下文中使用 A 的实例。

组合意味着HAS-A。更喜欢组合而不是继承。

我也不喜欢将对象映射到 HTML Web 组件的面向对象设计。太耦合了...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:49:34.260

我最终通过将“私有 WebDriver”对象的实例传递给我之前尝试扩展的类来部分解决了这个问题。这允许我将 WebDriver 对象更改为实例变量而不是静态共享对象。

这是我的解决方案的图表。它比以前好。也许它仍然可以改进。 ![在此处输入图像描述](../Images/87b731c9afb21edcb9db269f151b792a.png)

最终，我可能会使用[防御者方法来](http://cr.openjdk.java.net/~briangoetz/lambda/Defender%20Methods%20v4.pdf)解决这个问题。这是我现在在这里用于我的[GitHub 项目](https://github.com/djangofan/WebDriverTestingTemplate)的模式。

# php - 无法连接到“ipaddress”上的 MySQL 服务器 (110)

> ID：15576521
> 
> 赞同：5
> 
> 时间：2013-03-22T17:31:55.010
> 
> 标签：php, html, mysql, iis-7, windows-server-2008

所以我有一个托管在 Namecheap 服务器上的 PHP 文件。

```
$db=mysql_connect  ("ipaddress", "user",  "pass") or die ('I cannot connect to the database because: ' . mysql_error()); 
```

它给出了这个错误：

我无法连接到数据库，因为：无法连接到“ipaddress”上的 MySQL 服务器 (110)

我可以使用网络外的mysql工作台连接到这个数据库就好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-28T14:58:00.080

我经历过这个问题。我所做的是使用互联网地址而不是您的公共 IP/DNS。

因为，我使用的是 Linux `ifconfig`，您将看到`inet addr: xxx.xxx.xxx.xxx`并使用该 IP 作为您的主机，而不是公共 IP/DNS。在 Windows 上，只需使用您的本地 IP 地址。

而已！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T17:48:20.057

如果您使用 MySQL 作为数据库解决方案（由于在 Windows Server 操作系统上使用 IIS，这看起来很奇怪）

尝试运行（作为根）：

> GRANT ALL ON Database.* TO Username@'IPAddress' IDENTIFIED by 'PASSWORD';

***第二个是您授予的权限，这是所有人***的占位符**

 ***这将允许来自您指定的 IP 的连接

还有一个问题是从网络内部连接到 MySQL 引擎，您自然会从内部 IPV4 地址（例如 192.168.0.x）连接，这不需要端口转发。但是，如果您使用的是：

`mysql_connect('WANIP', 'User', 'password');` 您必须将端口转发`3306`到您的服务器。[http://www.portforward.com](http://www.portforward.com) 寻求帮助。

**编辑：**

[http://dev.mysql.com/doc/refman/5.0/en/can-not-connect-to-server.html](http://dev.mysql.com/doc/refman/5.0/en/can-not-connect-to-server.html)

该主题的手册，这可能会提供一些帮助

* * *

如果您使用的是 Microsoft SQL Server，请查看此链接：

[http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-13T16:20:27.703

在我的服务器上安装 opencart 时，我遇到了这个问题。当我使用 Windows 服务器时，它需要网站/域的 IP 地址。现在，当转移到 linux 托管时，linux 托管被接受为**localhost**并完成。我可以安装 opencart***

# sql - SQL 更新左连接 - 但是如果没有记录将 0 放在字段中

> ID：15576524
> 
> 赞同：1
> 
> 时间：2013-03-22T17:32:07.193
> 
> 标签：sql, sql-server, join, sql-update

这个查询有效，但是我需要它来做一些我不知道该怎么做的额外事情。如果 LEFT JOIN 部分没有返回记录，我需要查询将 0 放入“activityTempBookings”字段。这是为了覆盖较旧的数据，其中没有具有未来“tempReserveDate”的活动，即使过去可能是这样。

```
 UPDATE P
    SET activityTempBookings = t.bookingTempTotal
    FROM [LeisureActivities].[dbo].[activities] AS P 
    LEFT JOIN (
        SELECT tempActivityID, SUM(tempPlaces) bookingTempTotal 
            FROM [LeisureActivities].[dbo].[tempbookings] 
            WHERE tempReserveDate > GETDATE () 
            GROUP BY tempActivityID
    )t
    ON t.tempActivityID = p.activityID 
```

非常感谢任何帮助 - 请不要认为我很粗鲁，但我可能要到星期一才会回复。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:32:47.493

使用`COALESCE`它基本上*返回其参数中的第一个非空表达式。*

```
UPDATE P
SET    activityTempBookings = COALESCE(t.bookingTempTotal, 0)
FROM   [LeisureActivities].[dbo].[activities] AS P 
       LEFT JOIN 
       (
           SELECT tempActivityID, 
                  SUM(tempPlaces) bookingTempTotal 
           FROM   [LeisureActivities].[dbo].[tempbookings] 
           WHERE  tempReserveDate > GETDATE () 
           GROUP  BY tempActivityID
       ) t ON t.tempActivityID = p.activityID 
```

*   [TSQL 合并（）](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:36:34.350

使用 ISNULL

```
 UPDATE P
    SET activityTempBookings = ISNULL(t.bookingTempTotal,0)
    FROM [LeisureActivities].[dbo].[activities] AS P 
    LEFT JOIN (
        SELECT tempActivityID, SUM(tempPlaces) bookingTempTotal 
            FROM [LeisureActivities].[dbo].[tempbookings] 
            WHERE tempReserveDate > GETDATE () 
            GROUP BY tempActivityID
    )t
    ON t.tempActivityID = p.activityID 
```

# c++ - Winapi 同步进程

> ID：15576528
> 
> 赞同：0
> 
> 时间：2013-03-22T17:32:14.910
> 
> 标签：c++, winapi

我有 3 个简单的程序，每个程序都是一个简单的窗口。我将启动所有 3 个过程，然后单击程序 1 或 2 的按钮以显示程序 3 的窗口。
程序 1 和 2：只有 1 个按钮。单击时，显示程序3的隐藏进程（也是一个窗口）。
程序 3：作为隐藏进程启动，等待程序 1 和 2 的消息后弹出。根据按下的按钮，窗口标题应更改为程序 1 或 2 的标题。

我不确定什么功能或我使用线程来实现此行为？我相信我需要使用某种线程来执行此操作..首先隐藏程序 3，然后等待程序 1 和 2 的消息..有什么想法吗？

编辑：我正在使用 C++，我被告知要使用信号量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:37:15.260

由于您需要跨流程边界传达简单的消息，我建议使用[SendMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)系列中的一些东西。您首先需要获取目标窗口的句柄。这个函数在窗口 API 中是相当低级的，所以你只能直接从 C/C++ 中得到它，但你没有指定你使用的是什么语言，我认为有围绕这个的包装器也可以通过 C# 访问 CLR 的例程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:37:06.907

我建议使用[Windows Event](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682655%28v=vs.85%29.aspx)。具体来说，手动重置事件。您的程序 3 对事件执行等待。当程序 1 或程序 2 想要唤醒窗口时，它会设置事件。当程序 3 回到隐藏状态时，它会清除事件。

您可以使用`SendMessage`or `PostMessage`，但该事件似乎更容易和直接。它还具有一定的优势：

*   程序 1 和程序 2 不需要找到程序 3 的窗口句柄，也不需要广播可能被其他进程截获的消息。
*   您可以为事件添加安全属性以防止恶意程序访问它。
*   您可以在控制台应用程序、Windows 服务或任何其他进程中使用该技术，无论它是否在操作消息循环。
*   它比使用 Windows 消息更容易理解（无论如何对我来说）。

这不适用于信号量。信号量通常用于同步对多个共享资源的访问。您只需要让程序 3 等待通知，并让程序 1 或程序 2 能够发送该通知。

如果您必须将数据从 Program 1 传递到 Program 3，那么 Event 将无法帮助您做到这一点。在这种情况下，您必须想出一种通信方法，例如内存映射文件、管道、网络套接字……甚至是 Windows 消息。但是对于简单的“嘿，醒醒！” 通知，我会使用一个事件。

# java - 在 onpause 中释放可绘制的背景

> ID：15576531
> 
> 赞同：0
> 
> 时间：2013-03-22T17:32:25.303
> 
> 标签：java, android

在活动中发布可绘制对象并管理其生命周期的正确方法是什么？我正在尝试清除我的位图，因为我看到一些与内存相关的崩溃。

我愿意：

```
private static bitmap;

    public void onResume() {

            view.setBackgroundDrawable( new BitmapDrawable(getResources(),bitmap));

    }

    public void onPause() {
            view.setBackgroundDrawable(null); // What is the best way to do this?
            bitmap.recycle();
            bitmap=null;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:08:50.300

这是正确的方法。但是，您可能会添加更多调整。

1.  您将位图设置为 null，但 VM 垃圾收集可能仅在您已尝试重新加载图像时触发。因此，在您的 onPause 中，您可以使用：`System.gc()`告诉 GC 您需要它。但是，不能保证它会来。

2.  API 14+**仅在您真正需要时才**`android:largeHeap="true"`在您的 XML 中使用。这将增加您的应用程序允许的堆大小。

***   你真的需要这么大的照片吗？尝试使它们更小，使用密度相关编码。在加载之前尝试缩小它...**

# java - 如何制作 . 计算器中的按钮

> ID：15576533
> 
> 赞同：0
> 
> 时间：2013-03-22T17:32:29.480
> 
> 标签：java, calculator

我对Java有点陌生，我一直在尝试创建一个计算器。除了 . 按钮，谁能帮我弄清楚如何做到这一点，我已经尝试了我所知道的一切，但没有任何效果

这是我到目前为止得到的代码：

```
package Java24;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Calculator extends JFrame implements ActionListener{

    JPanel row1 = new JPanel();
    JTextField display = new JTextField("0");
    Font font = new Font("Calibri", Font.PLAIN, 24);

    JPanel row2 = new JPanel();
    JButton c = new JButton("C");

    JPanel row3 = new JPanel();
    JButton num7 = new JButton("7");
    JButton num8 = new JButton("8");
    JButton num9 = new JButton("9");
    JButton divide = new JButton("/");

    JPanel row4 = new JPanel();
    JButton num4 = new JButton("4");
    JButton num5 = new JButton("5");
    JButton num6 = new JButton("6");
    JButton multiply = new JButton("*");

    JPanel row5 = new JPanel();
    JButton num1 = new JButton("1");
    JButton num2 = new JButton("2");
    JButton num3 = new JButton("3");
    JButton minus = new JButton("-");

    JPanel row6 = new JPanel();
    JButton num0 = new JButton("0");
    JButton dot = new JButton(".");
    JButton equals = new JButton("=");
    JButton plus = new JButton("+");

    public Calculator(){
    super("Calculator");
    setSize(450,350);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    GridLayout layout = new GridLayout(6,1);
    setLayout(layout);

    GridLayout layout1 = new GridLayout(1,1);
    display.setFont(font);
    display.setEnabled(false);
    row1.setLayout(layout1);
    row1.add(display);
    add(row1);

    c.addActionListener(this);
    c.setFont(font);
    row2.setLayout(layout1);
    row2.add(c);
    add(row2);

    num7.setFont(font);
    num8.setFont(font);
    num9.setFont(font);
    divide.setFont(font);
    num7.addActionListener(this);
    num8.addActionListener(this);
    num9.addActionListener(this);
    divide.addActionListener(this);
    GridLayout layout2 = new GridLayout(1,4);
    row3.setLayout(layout2);
    row3.add(num7);
    row3.add(num8);
    row3.add(num9);
    row3.add(divide);
    add(row3);

    num4.setFont(font);
    num5.setFont(font);
    num6.setFont(font);
    multiply.setFont(font);
    num4.addActionListener(this);
    num5.addActionListener(this);
    num6.addActionListener(this);
    multiply.addActionListener(this);
    row4.setLayout(layout2);
    row4.add(num4);
    row4.add(num5);
    row4.add(num6);
    row4.add(multiply);
    add(row4);

    num1.setFont(font);
    num2.setFont(font);
    num3.setFont(font);
    minus.setFont(font);
    num1.addActionListener(this);
    num2.addActionListener(this);
    num3.addActionListener(this);
    minus.addActionListener(this);
    row5.setLayout(layout2);
    row5.add(num1);
    row5.add(num2);
    row5.add(num3);
    row5.add(minus);
    add(row5);

    num0.setFont(font);
    dot.setFont(font);
    equals.setFont(font);
    plus.setFont(font);
    num0.addActionListener(this);
    dot.addActionListener(this);
    equals.addActionListener(this);
    plus.addActionListener(this);
    row6.setLayout(layout2);
    row6.add(num0);
    row6.add(dot);
    row6.add(equals);
    row6.add(plus);
    add(row6);

    setVisible(true);
    }

    public void actionPerformed(ActionEvent e){
        String button = e.getActionCommand();
        if(button.equals("C")){
            display.setText("0");
        }
        if(button.equals("7")){
            int lol = Integer.parseInt(display.getText());
            if(lol != 0){
                int num = 7;
                int prevNum = Integer.parseInt(display.getText());
                display.setText("" + prevNum + num);
            }else{
                int num = 7;
                display.setText("" + num);
            }
        }
        if(button.equals("8")){
            int lol = Integer.parseInt(display.getText());
            if(lol != 0){
                int num = 8;
                int prevNum = Integer.parseInt(display.getText());
                display.setText("" + prevNum + num);
            }else{
                int num = 8;
                display.setText("" + num);
            }
        }
        if(button.equals("9")){
            int lol = Integer.parseInt(display.getText());
            if(lol != 0){
                int num = 9;
                int prevNum = Integer.parseInt(display.getText());
                display.setText("" + prevNum + num);
            }else{
                int num = 9;
                display.setText("" + num);
            }
        }
        if(button.equals("4")){
            int lol = Integer.parseInt(display.getText());
            if(lol != 0){
                int num = 4;
                int prevNum = Integer.parseInt(display.getText());
                display.setText("" + prevNum + num);
            }else{
                int num = 4;
                display.setText("" + num);
            }
        }
        if(button.equals("5")){
            int lol = Integer.parseInt(display.getText());
            if(lol != 0){
                int num = 5;
                int prevNum = Integer.parseInt(display.getText());
                display.setText("" + prevNum + num);
            }else{
                int num = 5;
                display.setText("" + num);
            }
        }
        if(button.equals("6")){
            int lol = Integer.parseInt(display.getText());
            if(lol != 0){
                int num = 6;
                int prevNum = Integer.parseInt(display.getText());
                display.setText("" + prevNum + num);
            }else{
                int num = 6;
                display.setText("" + num);
            }
        }
        if(button.equals("1")){
            int lol = Integer.parseInt(display.getText());
            if(lol != 0){
                int num = 1;
                int prevNum = Integer.parseInt(display.getText());
                display.setText("" + prevNum + num);
            }else{
                int num = 1;
                display.setText("" + num);
            }
        }
        if(button.equals("2")){
            int lol = Integer.parseInt(display.getText());
            if(lol != 0){
                int num = 2;
                int prevNum = Integer.parseInt(display.getText());
                display.setText("" + prevNum + num);
            }else{
                int num = 2;
                display.setText("" + num);
            }
        }
        if(button.equals("3")){
            int lol = Integer.parseInt(display.getText());
            if(lol != 0){
                int num = 3;
                int prevNum = Integer.parseInt(display.getText());
                display.setText("" + prevNum + num);
            }else{
                int num = 3;
                display.setText("" + num);
            }
        }
        if(button.equals("0")){
            int lol = Integer.parseInt(display.getText());
            if(lol != 0){
                int num = 0;
                int prevNum = Integer.parseInt(display.getText());
                display.setText("" + prevNum + num);
            }else{
                int num = 0;
                display.setText("" + num);
            }
        }
        if(button.equals("+")){
            plus();
        }
        if(button.equals("-")){
            minus();
        }
        if(button.equals("*")){
            multiply();
        }
        if(button.equals("/")){
            divide();
        }
        if(button.equals("=")){
            if(plusNum != null){
                int secondNum = Integer.parseInt(display.getText());
                int sum = firstNum + secondNum;
                String secondNumber = String.valueOf(secondNum);
                display.setText("" + sum);
                if(plusNum != null){
                    remove(plusNum);
                }
                if(minusNum != null){
                    remove(minusNum);
                }
                if(multiplyNum != null){
                    remove(multiplyNum);
                }
                if(divideNum != null){
                    remove(divideNum);
                }                
                datNum = new JLabel(secondNumber);
                add(datNum);
                }
            if(minusNum != null){
                int secondNum = Integer.parseInt(display.getText());
                int sum = firstNum - secondNum;
                String secondNumber = String.valueOf(secondNum);
                display.setText("" + sum);
                if(plusNum != null){
                    remove(plusNum);
                }
                if(minusNum != null){
                    remove(minusNum);
                }
                if(multiplyNum != null){
                    remove(multiplyNum);
                }
                if(divideNum != null){
                    remove(divideNum);
                }
                datNum = new JLabel(secondNumber);
                add(datNum);
            }
            if(multiplyNum != null){
                int secondNum = Integer.parseInt(display.getText());
                int sum = firstNum * secondNum;
                String secondNumber = String.valueOf(secondNum);
                display.setText("" + sum);
                if(plusNum != null){
                    remove(plusNum);
                }
                if(minusNum != null){
                    remove(minusNum);
                }
                if(multiplyNum != null){
                    remove(multiplyNum);
                }
                if(divideNum != null){
                    remove(divideNum);
                }
                datNum = new JLabel(secondNumber);
                add(datNum);
            }
            if(divideNum != null){
                int secondNum = Integer.parseInt(display.getText());
                int sum = firstNum / secondNum;
                String secondNumber = String.valueOf(secondNum);
                display.setText("" + sum);
                if(plusNum != null){
                    remove(plusNum);
                }
                if(minusNum != null){
                    remove(minusNum);
                }
                if(multiplyNum != null){
                    remove(multiplyNum);
                }
                if(divideNum != null){
                    remove(divideNum);
                }
                datNum = new JLabel(secondNumber);
                add(datNum);
            }
        }
    }

    int firstNum;
    JLabel plusNum;
    JLabel minusNum;
    JLabel multiplyNum;
    JLabel divideNum;

    JLabel datNum;

    void plus(){
        firstNum = Integer.parseInt(display.getText());
        String firstNumber = String.valueOf(firstNum);
        if(minusNum != null){
           minusNum = null;
        }
        if(multiplyNum != null){
           multiplyNum = null;
        }
        if(divideNum != null){
            divideNum = null;
        }
        plusNum = new JLabel(firstNumber);
        add(plusNum);
        display.setText("0");     
    }

    void minus(){
        firstNum = Integer.parseInt(display.getText());
        String firstNumber = String.valueOf(firstNum);
        if(plusNum != null){
            plusNum = null;
        }
        if(multiplyNum != null){
            multiplyNum = null;
        }
        if(divideNum != null){
            divideNum = null;
        }
        minusNum = new JLabel(firstNumber);
        add(minusNum);
        display.setText("0");     
    }

    void multiply(){
        firstNum = Integer.parseInt(display.getText());
        String firstNumber = String.valueOf(firstNum);
        if(plusNum != null){
            plusNum = null;
        }
        if(minusNum != null){
            minusNum = null;
        }
        if(divideNum != null){
            divideNum = null;
        }
        multiplyNum = new JLabel(firstNumber);
        add(multiplyNum);
        display.setText("0");     
    }

    void divide(){
        firstNum = Integer.parseInt(display.getText());
        String firstNumber = String.valueOf(firstNum);
        if(plusNum != null){
            plusNum = null;
        }
        if(minusNum != null){
            minusNum = null;
        }
        if(multiplyNum != null){
            multiplyNum = null;
        }
        divideNum = new JLabel(firstNumber);
        add(divideNum);
        display.setText("0");     
    }

    public static void main(String[] args){
        Calculator calc = new Calculator();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:37:59.913

类似于...的东西

```
if(button.equals(".")){
    if(display.getText().indexOf('.') < 0 ){
        display.setText(display.getText() + ".");
    }else{
        //raise error
    }
} 
```

还要确保将所有其他人更改为`Double.parseDouble`from `Integer.parseInt`... 有意义吗？

# c# - 单选按钮列表抛出空引用

> ID：15576541
> 
> 赞同：0
> 
> 时间：2013-03-22T17:33:04.530
> 
> 标签：c#, asp.net, linq

我正在尝试从单选按钮列表中获取所选值并使用 linq to sql 将其发布到我的数据库中。虽然代码清楚地显示了变量中有一些值，但我从单选按钮列表的选定值中获取它，但是当我将它分配给我的数据库表的列时，它会抛出空引用。

这是我的代码的图片...![在此处输入图像描述](../Images/c6febc8f9b649ab89293ef5b386cbd91.png)

你知道我哪里错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T17:33:53.527

stat 实际上是空值，而不是注释。所以你试图访问一个空对象的属性，因此 NullReferenceException

看看你的汽车下面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:36:12.767

您的打印屏幕显示您的“stat”变量为空......因此出现错误

# java - Java 高效处理大数据文件

> ID：15576544
> 
> 赞同：1
> 
> 时间：2013-03-22T17:33:09.717
> 
> 标签：java, io, large-files, binary-data, memory-mapped-files

我需要一种在内存和时间方面有效处理大型二进制数据文件的方法。

我正在开发一个多线程 Java 应用程序，该应用程序处理由许多多维数据点组成的大型二进制数据文件。数据点具有相同的维度，每个点约为 100 kb。数据点的数量大约为 10,000 到 100,000。数据文件在测试阶段是几千兆字节，但将来会是几千兆字节。

客户在运行应用程序时遇到内存问题，因此我正在处理数据点列表，以减少处理所需的内存，同时仍提供良好的性能。

Java 是项目的要求，我们受限于客户端系统上的当前内存。客户端系统有很多核心，但它是一个共享系统，内存是目前的限制因素。

这组数据点在我们的应用程序中重复使用。有时这些点是按顺序处理的。在其他时候，处理点的子集，包括两个不同点的所有组合。在一个子集中，点可以按任何顺序处理，但子集中的点可以任意相距很远。数据文件是我通过解析文本数据文件并将值写入二进制文件而生成的简单二进制文件。目前，数据是双精度的，所以我将数据点作为一系列双精度连续写入二进制数据文件。（我解析每个文本文件数据点并立即将其写入二进制文件，而不是将它们全部保存在内存中。）将来我们可能会处理浮点、整数等数据。

我搜索了 SO 和其他 Internet 站点。到目前为止，我已经尝试了几种方法，包括根据需要从二进制文件中读取点，但与同时将所有数据点的列表保存在内存中相比，性能很差。这适用于具有较小尺寸点的较少数量的测试，但这些测试的数据集比实际数据集小几个数量级。到目前为止，我尝试过的方法比将所有点都保存在内存中要慢数百或数千倍。

我已经尝试过直接 ByteBuffers 和 MappedByteBuffers。最好的方法是我提取了下面相关部分的类。它将二进制数据读入 MappedByteBuffers 数组。然后当通过下面的get(int index)方法请求一个数据点时，该方法加载相关缓冲区，将相关字节读入字节数组，将字节转换为双精度数组，并创建一个DataPoint对象。我使用了一个 MappedByteBuffers 数组，因为整个数据文件无法放入物理内存中。我使用了一个字节数组的数组，以便线程将有单独的字节数组来读取数据。然后我只对 MappedByteBuffer 的实际访问进行同步，以尽量减少阻塞。据我了解 Java 类库，缓冲区不是线程安全的，

欢迎任何反馈。特别是，我对 MappedByteBuffers 的同步感到好奇。

```
final static private int DOUBLE_BYTE_SIZE = Double.SIZE / Byte.SIZE;

public enum DataType {
  CHAR,
  DOUBLE,
  FLOAT,
  INT,
  LONG,
  SHORT;
}

final static private int numberOfBuffers = 8;
private MappedByteBuffer[] buffers = null;
private int bufferSize = -1;
private byte[][] readArray = null;
private DataType dataType;
private int sizeOfVector;
private int byteSizeOfVector;
private File binFile;
private int size = -1;

private int makeList(File binaryFile, DataType argDataType, int numberOfComponents) {
  FileInputStream fis = null;
  FileChannel fc = null;
  try {
    dataType = argDataType;
    sizeOfVector = numberOfComponents;
    fis = new FileInputStream(binaryFile);
    fc = fis.getChannel();
    long fileSize = fc.size();

    switch (dataType) {
    case DOUBLE:
      byteSizeOfVector = DOUBLE_BYTE_SIZE * sizeOfVector;
      break;
    default:
      break;
    }

    size = (int) fileSize / byteSizeOfVector;
    bufferSize = size / numberOfBuffers;
    buffers = new MappedByteBuffer[numberOfBuffers];
    long remaining = fileSize;
    long position = 0;
    int bufferNumber = 0;
    while(remaining > 0) {
      long length = Math.min(remaining, bufferSize * byteSizeOfVector);
      buffers[bufferNumber] = fc.map(MapMode.READ_ONLY, position, length);
      position += length;   
      remaining -= length;
      bufferNumber++;
    }
    readArray = new byte[numberOfBuffers][byteSizeOfVector];

  } catch (IOException ex) {
    return -1;
  } finally {
    try {
      if(fis != null) {
        fis.close();
      }

      if(fc != null) {
        fc.close();
      }
    } catch (IOException exClose) {
      return -1;
    }
  }

  return 0;
}

private static long makeLong(byte[] data) {
  if (data == null || data.length != 8) return 0x0;

  return (long)(
      (long) (0xFF & data[0]) << 56  |
      (long) (0xFF & data[1]) << 48  |
      (long) (0xFF & data[2]) << 40  |
      (long) (0xFF & data[3]) << 32  |
      (long) (0xFF & data[4]) << 24  |
      (long) (0xFF & data[5]) << 16  |
      (long) (0xFF & data[6]) << 8   |
      (long) (0xFF & data[7]) << 0
      );
}  

private static double makeDouble(byte[] data) {
  if (data == null || data.length != 8) return 0x0;
  return Double.longBitsToDouble(makeLong(data));
}

private static double[] makeDoubleArray(byte[] data) {
  if (data == null) return null;
  if (data.length % 8 != 0) return null;

  double[] doubleArray = new double[data.length / 8];

  for (int index = 0; index < dbls.length; index++) {
    doubleArray[index] = makeDouble(new byte[] {
        data[(index*8)],
        data[(index*8)+1],
        data[(index*8)+2],
        data[(index*8)+3],
        data[(index*8)+4],
        data[(index*8)+5],
        data[(index*8)+6],
        data[(index*8)+7],
    }
        );
  }
  return doubleArray;
}

@Override
public DataPoint get(int index) {
  if(index > size() - 1) {
    throw new IndexOutOfBoundsException("Index exceeds length of list.");
  } else if(index < 0) {
    throw new IndexOutOfBoundsException("Index is less than zero.");
  }

  int bufferNumber = index / bufferSize;
  int bufferPosition = index % bufferSize;
  MappedByteBuffer buffer = buffers[bufferNumber];
  synchronized (buffer) {
    buffer.load();
    buffer.position(bufferPosition * sizeOfVector);
    buffer.get(readArray[bufferNumber]);
  }

  switch(dataType) {
  case DOUBLE:
    return new DoublePoint(makeDoubleArray(readArray[bufferNumber]));
  default:
    return null;
  }
} 
```

# javascript - 如何使用 jQuery 在 GET 请求中传递参数

> ID：15576548
> 
> 赞同：302
> 
> 时间：2013-03-22T17:33:26.900
> 
> 标签：javascript, jquery, ajax, get

我应该如何在 jQuery Ajax 请求中传递查询字符串值？我目前按如下方式进行操作，但我确信有一种更简洁的方式不需要我手动编码。

```
$.ajax({
    url: "ajax.aspx?ajaxid=4&UserID=" + UserID + "&EmailAddress=" + encodeURIComponent(EmailAddress),
    success: function(response) {
        //Do Something
    },
    error: function(xhr) {
        //Do Something to handle error
    }
}); 
```

我已经看到查询字符串参数作为数组传递的示例，但是我看到的这些示例不使用`$.ajax()`模型，而是直接转到`$.get()`. 例如：

```
$.get("ajax.aspx", { UserID: UserID , EmailAddress: EmailAddress } ); 
```

我更喜欢使用 $.ajax() 格式，因为这是我习惯的（没有特别好的理由 - 只是个人喜好）。

**编辑 09/04/2013：**

在我的问题被关闭（作为“过于本地化”）之后，我发现了一个相关的（相同的）问题 - 有 3 个赞成票（我一开始没有找到它是我的坏事）：

[使用 jquery 进行 POST，如何正确提供 'data' 参数？](https://stackoverflow.com/questions/3066070/using-jquery-to-make-a-post-how-to-properly-supply-data-parameter)

这完美地回答了我的问题，我发现这样做更容易阅读并且我不需要`encodeURIComponent()`在 URL 或 DATA 值中手动使用（这是我在 bipen 的答案中发现的不清楚）。这是因为该`data`值是通过[`$.param()`](http://api.jquery.com/jQuery.param/)) 自动编码的。以防万一这对其他人有用，这是我使用的示例：

```
$.ajax({
    url: "ajax.aspx?ajaxid=4",
    data: { 
        "VarA": VarA, 
        "VarB": VarB, 
        "VarC": VarC
    },
    cache: false,
    type: "POST",
    success: function(response) {

    },
    error: function(xhr) {

    }
}); 
```

* * *

## 回答 #1

> 赞同：365
> 
> 时间：2013-03-22T17:35:46.320

使用 ajax 的数据选项。`data`您可以通过ajax 中的选项将数据对象发送到服务器，该选项`type`定义了您发送它的方式（`POST`或者`GET`）。默认类型是`GET`方法

试试这个

```
$.ajax({
  url: "ajax.aspx",
  type: "get", //send it through get method
  data: { 
    ajaxid: 4, 
    UserID: UserID, 
    EmailAddress: EmailAddress
  },
  success: function(response) {
    //Do Something
  },
  error: function(xhr) {
    //Do Something to handle error
  }
}); 
```

您可以通过（如果您使用 PHP）获取数据

```
 $_GET['ajaxid'] //gives 4
 $_GET['UserID'] //gives you the sent userid 
```

在aspx中，我相信是（可能是错误的）

```
 Request.QueryString["ajaxid"].ToString(); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-22T17:36:36.647

把你的参数放在调用的`data`一部分。`ajax`请参阅[文档](http://api.jquery.com/jQuery.ajax/)。像这样：

```
$.ajax({
    url: "/TestPage.aspx",
    data: {"first": "Manu","Last":"Sharma"},
    success: function(response) {
        //Do Something
    },
    error: function(xhr) {
        //Do Something to handle error
    }
}); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-03-29T02:25:44.933

这是使用 jQuery 的语法`$.get`

```
$.get(url, data, successCallback, datatype) 
```

所以在你的情况下，这相当于，

```
var url = 'ajax.asp';
var data = { ajaxid: 4, UserID: UserID, EmailAddress: EmailAddress };
var datatype = 'jsonp';

function success(response) {
// do something here 
}

$.get('ajax.aspx', data, success, datatype) 
```

**注意** `$.get`没有让您有机会设置错误处理程序。但是有几种方法可以使用[$.ajaxSetup()](https://api.jquery.com/jquery.ajaxsetup/)，[$.ajaxError()](http://api.jquery.com/ajaxerror/)或将 a 链接`.fail`到您的`$.get`下面

```
$.get(url, data, success, datatype)
 .fail(function(){
}) 
```

将数据类型设置为 'jsonp' 的原因是由于浏览器同源策略问题，但如果您在托管 javascript 的同一域上发出请求，您应该可以将数据类型设置为`json`.

如果您不想使用 jquery `$.get`，[请查看文档](https://api.jquery.com/jQuery.ajax/)，`$.ajax`以便提供更大的灵活性

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-22T17:36:09.883

尝试添加这个：

```
$.ajax({
    url: "ajax.aspx",
    type:'get',
    data: {ajaxid:4, UserID: UserID , EmailAddress: encodeURIComponent(EmailAddress)},
    dataType: 'json',
    success: function(response) {
      //Do Something
    },
    error: function(xhr) {
    //Do Something to handle error
    }
}); 
```

取决于预期的数据类型，您可以分配`html, json, script, xml`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-29T20:33:17.837

在我指定的地方有同样的问题，`data`但浏览器正在向以 . 结尾的 URL 发送请求`[Object object]`。

你应该`processData`设置为`true`.

```
processData: true, // You should comment this out if is false or set to true 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T17:37:42.357

data 属性允许您发送字符串。在您的服务器端代码中，将其作为字符串参数名称“myVar”接受，然后您可以将其解析出来。

```
$.ajax({
    url: "ajax.aspx",
    data: [myVar = {id: 4, email: 'emailaddress', myArray: [1, 2, 3]}];
    success: function(response) {
    //Do Something
    },
    error: function(xhr) {
    //Do Something to handle error
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T17:36:57.533

您可以使用`$.ajax()`，如果您不想将参数直接放入 URL，请使用`data:`. 这是附加到 URL

来源：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-06T15:58:50.307

ajax方法的data参数允许你发送数据到服务器端。在服务器端你可以请求数据。见代码

```
var id=5;
$.ajax({
    type: "get",
    url: "url of server side script",
    data:{id:id},
    success: function(res){
        console.log(res);
    },
error:function(error)
{
console.log(error);
}
}); 
```

在服务器端使用 $_GET 变量接收它。

```
$_GET['id']; 
```

# ruby-on-rails - 继承与mongoid不一致

> ID：15576549
> 
> 赞同：0
> 
> 时间：2013-03-22T17:33:27.663
> 
> 标签：ruby-on-rails, inheritance, mongoid

mongoid 版本：mongoid (2.4.12) rails -v #=>Rails 3.1.10

```
class A
  include Mongoid::Document
  field :foo
  def self.inherited(klass)
  end
end
class B < A
  field :bar
end
class C < A
end

#C.new
# => #<C _id: 514c9505e3e50a856b000001, _type: "C", foo: nil, bar: nil> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:38:56.793

您需要调用`super`，否则您将覆盖任何先前定义`inherited`的方法。所以你的功能应该是：

```
def self.inherited(klass)
  super
  #your code here
end 
```

您正在破坏[mongoid 继承的方法](https://github.com/mongoid/mongoid/blob/master/lib/mongoid/traversable.rb#L162)。

# asp.net-mvc - 为模型元组创建 MVC 自定义模型绑定器

> ID：15576550
> 
> 赞同：3
> 
> 时间：2013-03-22T17:33:27.957
> 
> 标签：asp.net-mvc, tuples

在创建 MVC 自定义模型绑定器以将多个模型元组发布到控制器时需要帮助。从未使用过自定义模型绑定器。已经查看了这个问题的其他答案，但是在处理模型元组或提供所需的解决方案方面似乎没有接近。任何想法表示赞赏。- 谢谢

看法

```
@model Tuple<Contact, Communications, Addresses>
@using (Html.BeginForm()) {
  <div id="contact">
    <div class="editor-label">
         @Html.LabelFor(m => m.Item1.FirstName)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(m => m.Item1.FirstName)
    </div>
    <div class="editor-label">
        @Html.LabelFor(m => m.Item1.LastName)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(m => m.Item1.LastName)
    </div>
    <div>
        <input type="submit" value="Create" />
    </div>
  </div>
  <div id="communication">
    <div class="editor-label">
        @Html.LabelFor(m => m.Item2.TelephoneValue)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(m => m.Item2.TelephoneValue)
    </div>
  </div> 
  <div id="address">
    <div class="editor-label">
        @Html.LabelFor(m => m.Item3.Address1)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(m => m.Item3.Address1
    </div>
    <div class="editor-label">
        @Html.LabelFor(m => m.Item3.City)
    </div>
    <div class="editor-field"> 
        @Html.TextBoxFor(m => m.Item3.City)
    </div>
    <div class="editor-label">
        @Html.LabelFor(m => m.Item3.StateProvince)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(m => m.Item3.StateProvince)
    </div>
    <div class="editor-label">
        @Html.LabelFor(m => m.Item3.PostalCode) 
    </div>
    <div class="editor-field"> 
        @Html.TextBoxFor(m => m.Item3.PostalCode, new { id = "zip", style = "width:90px;" })
    </div>
  </div> 
} 
```

控制器

```
[HttpPost]
public ActionResult CreateContact(Tuple<Contact, Communications, Addresses> tuple) {
      //…. Do tuple processing to transfer values to add values to App Service here.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T13:16:39.663

为什么不尝试将“联系人、通信、地址”模型保留在新模型中并将其绑定到视图。

这将使处理变得非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T13:23:01.380

对于那些可能对这种方法的实施结果感兴趣的人，我想向大家报告，它的效果非常好，并且在灵活性方面超出了所有预期。最初，它用于解决三模型对象元组，后来成功扩展到四模型对象元组，请记住，这种方法确实有 8 项的限制，但有一种方法可以将元组级联到更多项目，不确定它是否实用。以下是一些可能有用的代码片段：

```
//Custom Model Binder
public class TupleModelBinder : DefaultModelBinder
{
    protected override object CreateModel(ControllerContext controllerContext,
              ModelBindingContext bindingContext, Type modelType)
   {
      if (modelType == typeof(Tuple<ContactModel, CommunicationModel, AddressModel>))
            return new Tuple<ContactModel, CommunicationModel, AddressModel>(new ContactModel(), new CommunicationModel(), new AddressModel());
      if (modelType == typeof(Tuple<ContactModel, CommunicationModel, AddressModel, CustomerModel>))
            return new Tuple<ContactModel, CommunicationModel, AddressModel, CustomerModel>(new ContactModel(), new CommunicationModel(), new AddressModel(), new CustomerModel());

         return base.CreateModel(controllerContext, bindingContext, modelType);
      }
 }

 // In Global.asax Application_Start()
     ModelBinders.Binders.DefaultBinder = new TupleModelBinder(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T20:34:51.100

如果需要将绑定线添加到每个元组的自定义绑定器，则使用元组作为模型的便利性会大大降低。

这是一个适用于所有元组的自定义模型绑定器。它递归地调用自己，以便注册的类型绑定器仍然可以工作。现在只需要在一个地方更改您的元组模型，这是理想的。

```
public class CustomModelBinder : DefaultModelBinder
{
    private static Type _tupleInterfaceType = Type.GetType("System.ITuple", true, false);

    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        if (modelType.FindInterfaces((a, b) => a == (Type)b, _tupleInterfaceType).Length == 1)
        {
            object[] args = new object[modelType.GenericTypeArguments.Length];
            for (int i = 0; i < args.Length; i++)
            {
                if (modelType.GenericTypeArguments[i].IsValueType) args[i] = Activator.CreateInstance(modelType.GenericTypeArguments[i]);
                else args[i] = CreateModel(controllerContext, bindingContext, modelType.GenericTypeArguments[i]);
            }
            return Activator.CreateInstance(modelType, args);
        }
        return base.CreateModel(controllerContext, bindingContext, modelType);
    }
} 
```

*注意：必须从字符串创建 System.ITuple 接口类型，因为它是受保护的接口。*

我希望这可以为您节省一些时间。8)

# javascript - 如何检测选择框何时关闭？

> ID：15576570
> 
> 赞同：2
> 
> 时间：2013-03-22T17:34:57.740
> 
> 标签：javascript, jquery, blur

我正在使用 jquery，并且在关闭选择框以触发后，模糊和聚焦功能都需要额外单击。是否有另一种方法可以检测选择框何时立即关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-01T13:43:53.357

正如@samsquanch 和@bfavaretto 在此处的评论中指出的那样，似乎没有办法可靠地检测到当前浏览器一代何时关闭选择列表。这有点令人难以置信，但你来了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:37:52.030

我想你正在寻找***[`.change()`](http://api.jquery.com/change/)***. 这将在您选择任何选项之后。

```
$('select').on('change', function() {
  // code
}); 
```

如果您想在页面加载时触发更改事件，请尝试：

```
$('select').on('change', function() {
  // code
}).change(); // trigger initial change 
```

# qt - How do I know if a window blocked by modal

> ID：15576574
> 
> 赞同：7
> 
> 时间：2013-03-22T17:35:17.340
> 
> 标签：qt, modal-dialog, qdialog

I have several modal dialogs and main dialog where I exec() modal. How do I know if a main window blocked by modal or not?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T17:45:18.767

You can check if there is an active modal dialog with [QApplication::activeModalWidget()](http://qt-project.org/doc/qt-4.8/qapplication.html#activeModalWidget).

# ios - 在 Interface Builder 中设置 2 个视图之间的固定空间

> ID：15576576
> 
> 赞同：0
> 
> 时间：2013-03-22T17:35:27.663
> 
> 标签：ios, xcode, interface-builder, nslayoutconstraint

我正在尝试学习在界面生成器中使用布局约束，但我遇到了一个问题......

我有两个视图，一个 UILabel 和一个 UIImageView，我想要一个如下布局：

1.  标签应该在superview中居中
2.  图像视图应该是标签左侧的设定距离

看起来很简单，但我不知道如何对第二个条件施加约束（第一个是自动完成的）。有人知道怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:58:01.973

按住命令键的同时单击两个视图，使它们都突出显示。然后点击 IB 右下角的 pin 按钮（中间按钮）。选择水平间距，现在应该添加约束。您应该可以根据需要从那里进行调整。

![/Users/bvogelzang/Desktop/Scr​​een Shot 2013-03-22 at 12.55.19 PM.png](../Images/811fb9e7f937ab2e98a6b3b5f78df182.png)

# ajax - 骨干视图：等到收集到

> ID：15576578
> 
> 赞同：3
> 
> 时间：2013-03-22T17:35:33.193
> 
> 标签：ajax, backbone.js, underscore.js

我想知道如何告诉主干等到我的集合获取模型然后渲染下划线位。

在控制台中从下划线模板返回一个字段缺失的错误。当我 console.log(this.collection.toJSON()) 它不显示任何数据。所以我假设，视图是在获取数据之前呈现的。我如何告诉视图等到它被获取？

/////// 看法////////

```
define([
  'jquery',
  'underscore',
  'backbone',
  'collections/mitarbeiter',
  'text!/aquilamus/templates/mitarbeiter/mitarbeiter.html'
], function($, _, Backbone, MitarbeiterCollection, MitarbeiterTemplate){

 var MitarbeiterListView = Backbone.View.extend({
    el: $("#container"),
    initialize: function(){
      this.collection = new MitarbeiterCollection;
      this.collection.fetch();
      var newtemplate = MitarbeiterTemplate;
      this.template = _.template($(newtemplate).html());
    },
    render: function(){
      var renderedContent = this.template(this.collection.toJSON());

      $(this.el).html(renderedContent);
      return this;
    }

  });
  // Our module now returns our view
  return MitarbeiterListView;
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T17:49:40.417

像其他人建议的作品一样使用`reset`，但这里有一个替代方案。

```
define([
  'jquery',
  'underscore',
  'backbone',
  'collections/mitarbeiter',
  'text!/aquilamus/templates/mitarbeiter/mitarbeiter.html'
], function($, _, Backbone, MitarbeiterCollection, MitarbeiterTemplate){

 var MitarbeiterListView = Backbone.View.extend({
    el: $("#container"),
    initialize: function(){
      this.collection = new MitarbeiterCollection;

      var newtemplate = MitarbeiterTemplate;
      this.template = _.template($(newtemplate).html());
    },
    render: function(){
      var self = this;

      // show some loading message
      this.$el.html('Loading');

      // fetch, when that is done, replace 'Loading' with content
      this.collection.fetch().done(function(){
          var renderedContent = self.template(self.collection.toJSON());
          self.$el.html(renderedContent);
      });
      return this;
    }

  });
  // Our module now returns our view
  return MitarbeiterListView;
}); 
```

另一种选择是做一些与此非常相似的事情，除了使用你可以放在 fetch 选项中[的`success`回调函数。](http://backbonejs.org/#Collection-fetch)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-21T23:42:35.123

这对我来说效果最好：

```
var ArtistListView = Backbone.View.extend({
        el: '.left',
        initialize:function(){
            this.render();
        },
        render: function () {
            var source = $('#my-list-template').html();
            var template = Handlebars.compile(source);
            var collection = new MyCollection;
            collection.fetch({async:false});
            var html = template(collection.toJSON());
            $(this.el).html(html);
       }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:43:04.767

我不知道有什么办法可以说要等待，但我知道你可以告诉骨干网在你的收藏被提取时（重新）渲染。

```
initialize: function(){
      this.collection = new MitarbeiterCollection;
      this.collection.fetch();
      var newtemplate = MitarbeiterTemplate;
      this.template = _.template($(newtemplate).html());
      this.collection.on('reset', this.render, this);
    }, 
```

最后一行监听你的集合`reset`事件。当它被触发时，它将调用该`render`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T17:47:24.043

提取完成时，集合提取会触发事件“重置”。您可以利用该[fetch](http://backbonejs.org/#Collection-fetch)事件

```
this.collection.on('reset', this.render); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T18:52:52.247

`fetch`还允许您传递`success`将在 fetch 成功时调用的处理函数，即：

```
 this.collection.fetch({success: this.render}); 
```

# wpf - 如何扩展而不是覆盖 WPF 样式

> ID：15576589
> 
> 赞同：37
> 
> 时间：2013-03-22T17:36:04.970
> 
> 标签：wpf, styles, themes, skin, basedon

我想在我的应用程序中使用自定义主题，据我所知，我可以通过使用资源字典并在 App.xaml 中引用它来实现这一点。样式会像这样覆盖默认值：

```
<Style TargetType="{x:Type Label">
    <Setter Property="Foreground" Value="Green" />
</Style> 
```

现在我猜默认标签样式被相同的值覆盖，但我所有的标签字体都是绿色的。当我想再次在某个地方设置一个标签的样式时，问题就开始了。当我想像这样更改网格中的其他属性时

```
<Grid.Resources>
    <Style TargetType="{x:Type Label">
        <Setter Property="FontSize" Value="28" />
    </Style>
</Grid.Resources> 
```

我的网格内的所有标签都失去了前景色并再次具有默认值（我不是在上一步中覆盖了默认值吗？）。经过一些尝试，我发现要正确执行此操作，我必须在`Style`声明中添加另一个属性`BasedOn={StaticResource {x:Type Label}}"`并且它可以工作。这对我来说有点奇怪，因为现在我将不得不在整个应用程序中重复相同的 BasedOn 代码，这不是样式的工作方式 - 这应该自动完成！例如，在 HTML + CSS 中，样式被继承和合并，而在 WPF 中，它们被替换......

请注意，当我不使用任何样式时，控件仍然可以从某个地方（系统主题？）获得它们的外观。我如何告诉他们在其他地方寻找默认值，这样如果没有任何额外的样式代码，他们会认为默认情况下它们应该是绿色的？

有什么方法可以自动设置 BasedOn 属性？或者也许有一个更好的整体做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2016-01-05T11:14:07.753

我有同样的问题。我使用了 Zack 的答案并对其进行了如下改进，因此如果您不指定样式，仍会考虑覆盖的默认值。这基本上是你会做的，但只在 ResourceDictionary 中做一次。

```
<Window x:Class="TestWpf.RandomStuffWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Random Stuff Window">
  <Window.Resources>
    <ResourceDictionary>
      <!-- Default Label style definition -->
      <Style TargetType="{x:Type Label}">
        <Setter Property="Foreground" Value="Green" />
      </Style>
      <!-- Extending default style -->
      <Style TargetType="{x:Type Label}" 
             x:Key="LargeGreenForegroundLabel" 
             BasedOn="{StaticResource {x:Type Label}}">
        <Setter Property="FontSize" Value="28" />
      </Style>
    </ResourceDictionary>
  </Window.Resources>
  <StackPanel>
    <Button Click="Button_Click">Click</Button>
    <Label Content="GreenForegroundLabel" /> <!-- Uses default style -->
    <Label Style="{StaticResource LargeGreenForegroundLabel}" 
           Content="LargeGreenForegroundLabel" />
  </StackPanel>
</Window> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-22T17:48:26.597

Wpf 有不同级别的样式，按全局 > 本地的顺序应用。直接在控件上设置的样式将覆盖全局样式集，就像在您的示例中一样。我试图找到一个控件查找其样式的所有不同位置的列表，但目前我找不到一个。据我所知，您必须使用 BasedOn 属性来继承样式，而不是使用您在本地设置的样式完全覆盖该样式的属性。

这是一个资源字典的示例，它具有基于另一种样式的样式，因此您不必一遍`BasedOn`又一遍地重复绑定，您只需在要具有该样式的特定元素上设置样式即可。

```
<Window x:Class="TestWpf.RandomStuffWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Random Stuff Window">
  <Window.Resources>
    <ResourceDictionary>
      <Style TargetType="{x:Type Label}" 
             x:Key="GreenForegroundLabel">
        <Setter Property="Foreground" Value="Green" />
      </Style>
      <Style TargetType="{x:Type Label}" 
             x:Key="LargeGreenForegroundLabel" 
             BasedOn="{StaticResource GreenForegroundLabel}">
        <Setter Property="FontSize" Value="28" />
      </Style>
    </ResourceDictionary>
  </Window.Resources>
  <StackPanel>
    <Button Click="Button_Click">Click</Button>
    <Label Style="{StaticResource GreenForegroundLabel}" 
           Content="GreenForegroundLabel" />
    <Label Style="{StaticResource LargeGreenForegroundLabel}" 
           Content="LargeGreenForegroundLabel" />
  </StackPanel>
</Window> 
```

# java - java tcp 服务器到 android 设备

> ID：15576593
> 
> 赞同：0
> 
> 时间：2013-03-22T17:36:13.970
> 
> 标签：java, android, image, sockets, tcp

我正在尝试制作一个 java 服务器，它将存储在数据库中的图像发送到 android 设备。

现在我正在尝试使用存储在硬盘上供服务器发送的简单图像。

我的问题是我可以通过 TCP 套接字将图像从 java 服务器作为字节数组发送到 android。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:37:34.643

是的，您可以使用 TCP 套接字。

将文件读取为字节并将其作为字节发送，不要尝试将其作为 BufferedImage 加载。

然后，在接收端，使用允许您从字节数组加载图像的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:40:19.880

当然，你可以，但你需要为此发明自己的协议。您可能会发现更多地使用 HTTP，或者设置一个像 Tomcat 这样的 Web 服务器并将您的应用程序部署在那里，或者使用像 Jetty 这样的嵌入式东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:59:59.037

```
The fastest and easiest approach for sending image is as follows...
Try this    
 // Server Side code for image sending

      ServerSocket servsock = new ServerSocket(13250);   
      System.out.println("Main Waiting...");
      Socket sock = servsock.accept();
      System.out.println("Accepted connection : " + sock);

      File myFile = new File ("\sdcard\ab.jpg");
      byte [] mybytearray  = new byte [(int)myFile.length()];
      FileInputStream fis = new FileInputStream(myFile);
      BufferedInputStream bis = new BufferedInputStream(fis);
      bis.read(mybytearray,0,mybytearray.length);*/

      byte [] mybytearray  =new byte[count];
      System.arraycopy(Copy, 0, mybytearray, 0, count);
      OutputStream os = sock.getOutputStream();
      System.out.println("Sending...");
      os.write(mybytearray,0,mybytearray.length);
      os.flush();
      os.close();
      sock.close();
      servsock.close();

//Client side code for image reception

try
{ 
    int filesize=6022386; // filesize temporary hardcoded
    long start = System.currentTimeMillis();
    int bytesRead;
    int current = 0;
    // localhost for testing
    ServerSocket servsocket = new ServerSocket(13267);
    System.out.println("Thread Waiting...");
    Socket socket = servsocket.accept();
    System.out.println("Accepted connection : " + socket);
    System.out.println("Connecting...");
    File f=new File("\sdcard\ab.jpg");
    f.createNewFile();
    // receive file
    byte [] mybytearray  = new byte [filesize];
    InputStream is = socket.getInputStream();
    FileOutputStream fos = new FileOutputStream(f);
    BufferedOutputStream bos = new BufferedOutputStream(fos);
    bytesRead = is.read(mybytearray,0,mybytearray.length);
    current = bytesRead;
   do {
       bytesRead =
       is.read(mybytearray, current, (mybytearray.length-current));
       if(bytesRead >= 0) current += bytesRead;
    } while(bytesRead > -1);
    count=current;
    Copy=mybytearray.clone();
    bos.write(mybytearray, 0 , current);
    bos.flush();
    long end = System.currentTimeMillis();
    System.out.println(end-start);
    bos.close();
    fos.close();
    socket.close();
    servsocket.close();
}
}   catch(IOException e)
{
    System.out.println("errorr");
} 
```

# c++ - 如何在输入时使字符串输出字母

> ID：15576595
> 
> 赞同：0
> 
> 时间：2013-03-22T17:36:19.133
> 
> 标签：c++

该程序应该向控制台输出我输入的一串字母，例如，如果我输入“我饿了”，那么如果我输入的内容太长，它应该以矩阵的形式将我饿了输出到控制台然后它延续到矩阵的下一行

这是我到目前为止的代码：

```
#include <iostream>
#include <string>

using namespace std;
#define N 6

//
// fill:
//
void fill(string s, int M[][N], int ROWS, int COLS)
{
    int i, r, c;
    s= "x";

    for (i=0, r=0; r < ROWS; r++)
    {
        for (c=0; c < COLS; c++)
        {
             M[r][c] = s[i];  // store ith character into matrix:

             i++; // next character:
             if (i == s.length())  // start-over if that was last char:
             i = 0;
        }
   }
} 

void print(int M[][N], int ROWS, int COLS)
{
  string s;
  s= "x";
  int r, c;
  for(r=0; r< ROWS; r++)
  {
     for(c=0; c < COLS; c++)
     {
       cout<<(char)M[r][c];
     }

 cout <<endl; 
  }
 }

//
// main:
//
int main()
{
    string s;
    getline(cin,s);
    int  M[N][N];
    int  M2[N][N];
    int  row, col, ROWS, COLS;
    fill(s, M, 1, 1);
    print(M, ROWS, COLS);

return 0;
 } 
```

它没有输出我输入的内容，而是不断输出一个随机字符矩阵（无论我输入什么都一样）关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:44:24.857

如果您真的不需要矩阵，您可以简单地：

```
void print(string s, int limit, char endl = '\n') {
    if (limit == 0) return;
    if (s.length > limit) {
        for (int i = 0; i < s.length; i++) {
            std::cout << s[i];
            if (i % limit == 0)
                std::cout << endl;
    } else {
        std::cout << s;
    }
} 
```

它将获取字符串并打印它，以防它低于限制，或者使用`endl`char 将其拆分为不同的行。

# c# - 从 .NET 中动态加载的类获取接口方法

> ID：15576603
> 
> 赞同：1
> 
> 时间：2013-03-22T17:36:56.900
> 
> 标签：c#, reflection, assemblies, dllimport, reflection.emit

我有一个 .dll 库，我正在编写它与专有 COM 程序集的接口。我的目标是在构建完成后在线发布我的作品，但是我需要删除 COM 程序集作为项目参考，以避免分发此专有 dll。所以我想要做的是在运行时动态加载程序集，并在我需要的地方调用方法。传统上，我对未知类型使用对象反射，但这有时会变慢，并且涉及几个丑陋的实例。在 .NET 4.0 中，有没有一种方法可以干净地获取所有方法并在运行时将它们扔到动态类/接口中？

我目前正在得到这样的对象：

```
Type myClassType = Type.GetTypeFromProgID("MyClass.Myclass.1");
object classObj = Activator.CreateInstance(myClassType); 
```

我以为我可以使用 Type.GetMethods()，但它只返回通用的（Equals、ToString、GetLifetime...等）。我知道该类使用一个接口，所以我也尝试研究动态加载该接口。这让我想到了 Reflection.Emit 和 Microsoft.Xrm.Sdk，到目前为止我还无法理解。

如果有一种方法可以让我调用方法而无需每隔几行抛出一堆 BindingFlags，我将不胜感激朝着正确的方向轻推

如果有帮助的话，我确实有类和接口的 GUID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:54:31.257

如果我处于您的情况（并且如果我正确理解了问题）：
我会将接口库（DLL）与实现库（DLL）分开
然后实现库将被动态加载并引用我的主要源代码接口库将被编译

```
Type myClassType = Type.GetTypeFromProgID("MyClass.Myclass.1");
myClassIntrface classObj = 
   Activator.CreateInstance(myClassType) as myClassIntrface;
classObj.CallSomeInterfaceMethod(); 
```

希望这对朋友有用。

# java - Java RMI ClassNotFound 异常

> ID：15576611
> 
> 赞同：0
> 
> 时间：2013-03-22T17:37:20.387
> 
> 标签：java, rmi

我决定写 RMI（从书中）也从书中获取代码。我用 rmic 创建了存根，并启动了 rmiregistry，但是当我致力于编写 java Start Server 时，我遇到了问题，实际上这是我面临的问题： **java -classpath D:\RMI AddServer Exception:java.rmi.ServerException: RemoteException发生在服务器线程中；估计的异常是：java.rmi.UnmarshalException: error unmarshalling arguments; 嵌套的异常是： java.lang.ClassNotFoundException: AddServerImpl_Stub PLease** 我需要帮助，因此我浪费了很多时间 :(

**AddServerIntf.java**

```
package rmi.app;
import java.rmi.*;
 public interface AddServerIntf extends Remote {
  double add(double d1,double d2) throws RemoteException;} 
```

**AddServerImpl**

```
package rmi.app;
import java.rmi.*;
import java.rmi.server.*;
public class AddServerImpl  extends UnicastRemoteObject implements AddServerIntf {

public AddServerImpl() throws RemoteException {}

public double add(double d1, double d2) throws RemoteException {
        return d1+d2;
    }

} 
```

**添加服务器**

```
 package rmi.app;
    import java.net.*;
  import java.rmi.*;
   public class AddServer {
public static void main(String[] args) {

    try {

    AddServerImpl addServerImpl = new AddServerImpl();
    Naming.rebind("AddServer", addServerImpl);      
    }
    catch (Exception e){
        System.out.println("Exception:"+e);
    }

}

  } 
```

**添加客户端**

```
 package rmi.app;
   import java.rmi.Naming;
    public class AddClient {
public static void main(String[] args) {

    try{
        String addServerURL= "rmi://"+args[0]+ "/AddServer";
        AddServerIntf addServer =(AddServerIntf)Naming.lookup(addServerURL);
        System.out.println("The first number is:"+args[1]);
        double d1= Double.valueOf(args[1]).doubleValue();
        System.out.println("The second number is:"+args[2]);
        double d2= Double.valueOf(args[2]).doubleValue();
        System.out.println("the sum is:"+ addServer.add(d1,d2));

    }
    catch(Exception e){
        System.out.println("Exception : "+ e);
    }

}

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:54:53.107

我也在编写一个 Java RMI 应用程序，在使它工作之前我经历了很多。经过大量的研究和尝试和错误，我得到了这个“食谱”：

1.  不要安装 SecurityManager；
2.  不要使用策略文件；
3.  确保您从一个 VM 移动到另一个 VM 的类在客户端和服务器类路径中（或在同一个 jar/war 中）。
4.  如果您使用休眠进行数据库访问，请将罐子也放在客户端中。Hibernate“更改”了原始类，客户端将需要它来反序列化它；
5.  如果您还在服务器端使用 Spring，您可能会在客户端中包含**spring-orm**和**spring-data-jpa** jar，如果您遇到 ClassNotFoundException，然后是 JpaObjectRetrievalFailureException；
6.  我没有在 jar 之外运行任何东西（根本没有 rmi 服务）；
7.  我没有在使用 Java 6 时创建存根。

我的服务器纯粹是这样做的：

```
try {
        try {
            LocateRegistry.createRegistry(SERVER_PORT);
        } catch (RemoteException e) {
            LocateRegistry.getRegistry(SERVER_PORT);
            e.printStackTrace();
        }
        System.setProperty("java.rmi.server.hostname", SERVER_HOST);
        connectionRequestHandler = new ConnectionRequestHandlerImpl();
        dataRequestHandler = new DataRequestHandlerImpl();
        String rmiUrl = "rmi://" + SERVER_HOST + ":" + SERVER_PORT + "/";
        Naming.rebind(rmiUrl + "ConnectionRequestHandler", connectionRequestHandler);
        Naming.rebind(rmiUrl + "DataRequestHandler", dataRequestHandler);
    } catch (RemoteException e1) {
        e1.printStackTrace();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
} 
```

然后在客户端我正在做：

```
String rmiUrl = "rmi://" + SERVER_HOST + ":" + SERVER_PORT + "/";
    try {
        connectionRequestHandler = (ConnectionRequestHandler)Naming.lookup(rmiUrl + "ConnectionRequestHandler");
        dataRequestHandler = (DataRequestHandler)Naming.lookup(rmiUrl + "DataRequestHandler");
    } catch (MalformedURLException e) {
        throw new RmiServicesDownException(e.getMessage());
    } catch (RemoteException e) {
        throw new RmiServicesDownException(e.getMessage());
    } catch (NotBoundException e) {
        throw new RmiServicesDownException(e.getMessage());
    } catch (Exception e ){
        e.printStackTrace();
        return;
    } 
```

这就是它为我工作的方式。与第一次设置相比，您可能遇到的任何其他问题都很容易解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:46:26.773

简短的回答：注册表需要在其类路径上有存根。

长答案：在过去 10 年内找到一个*不*使用 rmic 的 rmi 教程，因为你不需要*长时间*做所有这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T23:54:01.267

将 AddServerImpl 构造函数更改为调用 super(0)。然后你甚至不需要生成存根，更不用说部署它了。请参阅 UnicastRemoteObject 的 Javadoc 的序言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-26T22:28:47.083

从服务器代码目录启动 rmiregistry。（或）使用 -j 选项执行 请参阅[如何设置 rmiregistry 使用的类路径？](https://stackoverflow.com/questions/9440619/how-do-i-set-the-classpath-that-rmiregistry-uses)和 javadoc 参考[[这里]](https://docs.oracle.com/javase/8/docs/technotes/tools/unix/rmiregistry.html)

# android - 使用相机闪光灯的摩尔斯电码 Android 应用程序

> ID：15576613
> 
> 赞同：1
> 
> 时间：2013-03-22T17:37:33.480
> 
> 标签：android, opencv, android-camera

我正在尝试开发一个使用手机上的相机闪光灯传输莫尔斯电码的应用程序。我的传输部分工作正常。我根据 DOT 或 DASH 打开闪光灯，并根据 GAP、LETTER_GAP 和 WORD_GAP 关闭闪光灯。所有 DOT、DASH、GAP、LETTER_GAP 和 WORD_GAP 都有不同的持续时间，它们将在其打开或关闭的时间段内。

我很难弄清楚如何在接收器端对此进行解码......我正在使用 opencp 二进制阈值来查看图像中是否存在亮点。根据相机 fps，我可以计算有多少帧连续打开或关闭闪光灯，这决定了点/破折号/间隙。这是示例。

从发射机电话说我正在发送“abc xyz”作为字符串。在接收器电话上，我得到了这些字符串

. *-#-* .*. *.#-* .*- *. -* .*. *-#-* .*- *-#-* -*.*. 在哪里，

“。” - 点“-” - 破折号“*” - 间隔“#” - 字母间隔“” - 单词间隔

这个字符串正好代表“abc xyz”。问题是**我想不出一种方法来接收电话从哪里开始寻找新消息以及何时停止**，因为一切都是使用光信号发送的。发送和接收之间没有同步。我的意思是接收器无法识别开始和结束信号，因为我只是处理 opencv 提供的原始相机帧。**有什么办法可以强加这些吗？**或进行检测/解码的替代解决方案？

如果我不清楚，请告诉我。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-15T02:46:01.183

嗯，可以有多个答案。首先，您可以要求接收器手动输入并分析前几秒的所有帧。也许您可以随时监控并设置光模式强度的阈值。您还可以进行重新同步序列，其中发送方将灯点亮一秒钟并开始传输。这将是握手，其余的是消息。

伟大的工作，希望你用它制作一个应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T17:49:03.503

查看 Shivam Kalra 在这里使用的方法：http: [//www.codeproject.com/Articles/46174/Computer-Vision-Decoding-a-Morse-Code-Flashing-LED](http://www.codeproject.com/Articles/46174/Computer-Vision-Decoding-a-Morse-Code-Flashing-LED)

tldr：允许用户在图片框架中设置一个坐标并监控坐标下方像素的亮度。

# c++-cli - 在 OpenFileDialog 中单击打开后如何读取多个文件？

> ID：15576616
> 
> 赞同：2
> 
> 时间：2013-03-22T17:37:37.920
> 
> 标签：c++-cli

我在我的代码中设置了一个多选功能，允许我打开多个“.txt”形式的文件。问题来了，通过 OpenFileDialog 打开所有这些选定的文件后，我将如何读取这些文件？以下代码和“for each”行，当我使用 System::Diagnostics::Debug 时，它只显示文件中的数据，而其他文件的数据丢失。我应该如何修改“for each”之后的代码？任何人都可以提供一些建议或意见吗？选择的文件为 1_1.txt、2_1.txt、3_1.txt。感谢您的回复，并提前致谢。

这是我的书面代码，

```
Stream^ myStream;  
OpenFileDialog^ openFileDialog1 = gcnew OpenFileDialog;  
openFileDialog1->InitialDirectory = "c:\\";  
openFileDialog1->Title = "open captured file";  
openFileDialog1->Filter = "CP files (*.cp)|*.cp|All files (*.*)|*.*|txt files (*.txt)|*.txt";  
openFileDialog1->FilterIndex = 2;  
openFileDialog1->Multiselect = true;  

if ( openFileDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK )  
{  
  array<String^>^ lines = System::IO::File::ReadAllLines(openFileDialog1->FileName);  
  for each (String^ line in lines) {  
    //?????  
    System::Diagnostics::Debug::WriteLine("",line);  
  }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:42:25.960

[`OpenFileDialog.FileNames`](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filenames.aspx)如果您允许选择多个文件，则需要查看该属性：

```
if ( openFileDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK )  
{  
  for each (String^ file in openFileDialog1->FileNames) 
  {  
    array<String^>^ lines = System::IO::File::ReadAllLines(file);  
    for each (String^ line in lines) 
    {  
      System::Diagnostics::Debug::WriteLine("",line);  
    }
  }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:41:22.407

使用该[`FileNames`](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)物业。

C#版本（应该很容易适应C++）：

```
foreach (var file in openFileDialog1.FileNames)
{
    foreach (var line in File.ReadAllLines(file)
    {
    ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:43:19.157

使用`openFileDialog1->FileNames`. 它返回您选择的多个文件名

在这里阅读 [http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.multiselect.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.multiselect.aspx) 它在 C# 中，但是很容易推断到 C++。

# javascript - asp.net 网站中具有值“/n”的未知 DOM 元素

> ID：15576622
> 
> 赞同：1
> 
> 时间：2013-03-22T17:37:58.500
> 
> 标签：javascript, jquery, html, dom, line-breaks

我有一个 ASP.NET 网站。有时，源中会出现值为“/n”的未知 DOM 元素。使用 Firebug 检查显示 HTML 代码是`&#65279;`. 当然，我自己从来没有添加过这段代码。它使两个元素之间的距离很长。有什么办法可以防止这种情况发生吗？这是HTML：

```
<div id="ctl05_pnWareHouse">
    &#65279;<div class="detail_content_right_top">
        <div class="detail_content_top_left">
            <p class="name_content">
                ...
            </p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:05:46.173

基于**bfavaretto**的评论：

在剪切和粘贴过程中，一个不可见的 Unicode 字符可能已潜入您的代码中。如果发生这种情况，您的服务器端源代码可能看起来不错，但 ASP.NET 会注意到您看不到的字符，然后将其编码为 HTML。

至于如何修复它，试试这个：

1) 在编辑器中打开服务器端代码。

2) 手动突出显示从`>`in`<div id="ctl05_pnWareHouse">`到`<`开头的所有内容`<div class="detail_content_right_top">`

![在此处输入图像描述](../Images/fd5bb874de0e937f2de1f48cc4df1b72.png)

3）手动替换那里的字符；即键入`>`，然后输入，然后`<`。

看看能不能解决你的问题。

# ios - 在 iPad (iOS6) 中旋转拆分视图控制器时更改为不同的视图

> ID：15576623
> 
> 赞同：0
> 
> 时间：2013-03-22T17:37:58.903
> 
> 标签：ios, ios6, uiscrollview, uisplitviewcontroller, screen-rotation

我有一个用于 iPad 的 SplitView 控制器，它应该显示一个我在纵向模式下制作的计算器，以及一个旋转到横向模式时的图形计算器。

这是我的故事板目前的样子，我做错了吗？

![在此处输入图像描述](../Images/1a1f69a54f7e75266956ae1e01538845.png)

我对 iOS 中的整个 SplitView 控制器概念仍然很陌生，所以我不确定这整个过程是如何工作的。

目前，只有突出显示的视图在横向和纵向模式下都显示，但我只想以横向模式显示它，并以纵向模式显示计算器，以及删除`Master`从纵向模式显示按钮的选项，但显示它在横向模式下`Master Table`，即仅在按下按钮时才显示横向模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T21:52:49.223

Apple 的 SplitView 控制器不允许在横向模式下隐藏主视图，但您可以使用自定义类，例如[这个。](https://stackoverflow.com/a/11109006/2175611)

对于屏幕旋转部分，只需在方向改变时进行模态搜索。

这将在方向更改时通知您：

```
[[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(changeOrientation:)  name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

然后对于函数

```
- (void) changeOrientation : (UIDeviceOrientation) orientation {
    if(!UIDeviceOrientationIsValidInterfaceOrientation(orientation))
        return;
    if(orientation == UIDeviceOrientationLandscapeLeft || orientation == UIDeviceOrientationLandscapeRight) { // Or UIDeviceOrientationPortrait
        [self performSegueWithIdentifier:@"SEGUENAME" sender:self];
    }
} 
```

更多关于 segues:[这里](https://stackoverflow.com/a/13980519/2175611)

# mysql - 你能用多个 GROUP BY 改进 mySQL 查询吗

> ID：15576627
> 
> 赞同：0
> 
> 时间：2013-03-22T17:38:10.593
> 
> 标签：mysql

所以我开始寻找是否可以/应该将我的网站的宽度从 1000 像素增加到 1200 像素，因为显然 90% 以上的人的屏幕高于 1024 像素。

我想按用户分组，但如果他们使用不同的屏幕，我会多次计数。这给了我所有尺寸的列表，但我只想要不同的宽度并计算出现的数量。

我得到了我想要的结果，但认为 SQL 查询很糟糕。

第一个问题：你能改进我下面的 sql 查询吗：

```
SELECT width,COUNT(width) 
FROM (
  SELECT width 
  FROM user_hit 
  WHERE width>=1024 
  GROUP BY userId,width 
  ORDER BY width
) AS widths 
GROUP BY width 
ORDER BY COUNT(width) DESC 
```

根据结果​​，我使用 PHP 来确定屏幕超过 1240 像素的用户百分比

第二个问题：你能不能只使用 mySQL 而不使用 PHP 来实现这个结果？

结果是 86.7% 的屏幕大于 1240 像素

第三个问题：我是否应该将我的网站宽度从 1000px -> 1200px 增加，这样很快，9/10 的用户将获得更好的体验，而 1/10 的用户将获得令人讨厌的视图？

我知道我可以为不同的用户以不同的方式显示它，但我宁愿有一个单一的视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:09:21.127

答案：

1）我认为没有必要改进您的代码，因为它可以满足您的需求。

2) 使用 PHP 可以帮助您获得一些结果 (OOP)，例如获取用户的屏幕大小、浏览器类型、操作系统类型 ...等。但 mySQL 与存储这些数据有关。

3) 这取决于在您的网站上注册的用户数量。您还需要获取每周注册用户的百分比。如果没有那个尺寸，比例是 1/10。是的，最好增加网站的宽度。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:10:37.603

为什么需要子查询？下面的查询应该是足够的

```
SELECT width, count(distinct userId) as count  
FROM user_hit 
WHERE width>=1024 
GROUP BY width 
ORDER BY width 
```

# ios - BOOL 在模拟器上记录正常，但在 iPhone 上记录数字，如 96、-32 等

> ID：15576633
> 
> 赞同：1
> 
> 时间：2013-03-22T17:38:32.630
> 
> 标签：ios, objective-c, iphone, xcode, boolean

我正在开发一个应用程序，该应用程序显示从应用程序附带的列表中随机选择的俳句。用户可以将俳句标记为“最爱”（也可以取消标记）。模拟器一切正常，NSLog 将`isFavorite`每个俳句的布尔属性显示为 0 或 1。

但是当我在 iPhone 上运行该应用程序时，NSLog 显示布尔属性有时为 0，有时为 1，有时为 96，有时为 -32，与用户是否真的喜欢俳句没有任何关联。我怎样才能解决这个问题？

`EDIT:`这是我正在使用的代码：

```
-(void)displayHaiku {
    [self.displayHaikuTextView removeFromSuperview];
    self.haiku = [[GHHaikuInstance alloc] init];
    NSLog(@"Is haiku favorite? %d",self.haiku.isFavorite); 

        //On simulator the above line always logs 0 or 1, correlated exactly with whether the haiku has been marked "favorite."  On iPhone it could be any number, and shows no correlation.

    //Code that displays haiku onscreen.
} 
```

`isFavorite`是在 中声明和合成的 BOOL `GHHaikuInstance`，但仅当用户将其标记为收藏时才设置为 1。（换句话说——我没有明确地将其设置为 0；我只是使用默认值 0，直到用户将其更改为 1。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:12:21.730

要记录`BOOL`值，您可以使用字符串

```
NSLog(@"Is haiku favorite? %@", self.haiku.isFavorite ? @"YES" : @"NO"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T04:58:49.227

请检查发布和调试版本之间的区别:))

（检查“优化级别”设置。调试版本设置为无 [-O0]，而发布版本设置为最快，最小 [-Os]。） - 所以......不同的浮点行为..

您必须将您的语句/初始化方法从

```
BOOL isFavorite; 
```

至

```
BOOL isFavorite = NO; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:55:55.237

苹果推荐`%hhd`。

您可以阅读有关[格式说明符](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265fiers)的更多信息。

# javascript - 将列表限制为最后 5 项

> ID：15576636
> 
> 赞同：0
> 
> 时间：2013-03-22T17:38:46.713
> 
> 标签：javascript, list, html-lists, limit

寻找以下解决方案：我有一个项目列表，例如

```
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
<li>Item 4</li>
<li>Item 5</li>
<li>Item 6</li>
<li>Item 7</li>
<li>Item 8</li>
<li>Item 9</li>
<li>...</li>
</ul> 
```

每次他们查看网站上的产品（即“最近查看的项目”）时，都会将列表添加到（针对每个人），最后查看的产品会添加到列表的底部。该列表取自 MYSQL 数据库。该列表不会为该人重置，每次查看该网站的同一个人查看更多产品时，该列表只会变长。

在记住新的列表项被添加到列表的底部并且列表不断增长之前，是否只显示列表中的最后 5 个项目而忽略这些项目？

我希望列表在任何时候只显示每个查看该网站的人的最后五种产品，即网站上的列表可能

*   项目 1
*   第 2 项
*   第 3 项
*   第 4 项
*   第 5 项
*   第 6 项
*   第 7 项
*   第 8 项
*   第 9 项
*   项目 10
*   项目 11
*   第 12 项
*   第 13 项
*   第 14 项
*   项目 15
*   第 16 项

但我只希望浏览了所有 16 种产品的人只看到最近浏览过的 5 种产品，即

*   项目 11
*   第 12 项
*   第 13 项
*   第 14 项
*   项目 15
*   第 16 项

另一个人可能会访问该站点并仅查看 4 种产品，例如

```
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
<li>Item 4</li>
</ul> 
```

他们会在最近查看的列表中看到这 4 种产品。

第三人可能会来到该网站并查看 12 种产品，他们会看到

```
<ul>
<li>Item 8</li>
<li>Item 9</li>
<li>Item 10</li>
<li>Item 11</li>
<li>Item 12</li>
</ul> 
```

当上面查看了 16 个项目的人返回网站时，他们将看到上一次会话的最后 5 个项目，当他们开始查看产品时，第一个项目将消失，列表底部将显示一个新项目

```
<ul>
<li>Item 11</li>
<li>Item 12</li>
<li>Item 13</li>
<li>Item 14</li>
<li>Item 15</li>
<li>Item 16</li>
</ul> 
```

然后当他们开始浏览时，他们会看到

*   第 12 项
*   第 13 项
*   第 14 项
*   项目 15
*   第 16 项
*   第 17 项

ETC...

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:48:08.097

**我将保留我之前回答的所有内容，但我相信问题的范围已经改变，现在是一个数据库/sql 问题。**

我认为您正在寻找的是一个 SQL 查询来限制返回的行数并为您排序。

您可以查看[MySQL 5.0 SELECT](http://dev.mysql.com/doc/refman/5.0/en/select.html)的文档，它可以让您了解如何执行此操作，但我也会在下面给您一个示例。

假设您有一个最近查看的项目表，如下所示：

```
CREATE TABLE user_product_viewings (
    ID INT(32) NOT NULL auto_increment,
    product_id INT(32)  NOT NULL,
    user_id INT(32)  NOT NULL,
    viewed_at DATETIME NOT NULL,
primary KEY (ID)); 
```

您可以使用以下查询为特定用户选择 5 个最新条目：

```
SELECT product_id FROM user_product_viewings WHERE user_id = #{USER_ID} ORDER BY viewed_at DESC LIMIT 5; 
```

* * *

**旧答案**

看起来您正在尝试使用 javascript 执行此操作，因此您可能会在用户浏览页面时将数据附加到列表中。

我不会简单地尝试隐藏这些项目，而是将它们从 DOM 中完全删除。最好的方法是编写一个函数来检查列表的当前长度，然后在添加新的之前删除最老的孩子（顶部）。

这方面的一个例子可能类似于以下内容：

```
 var addToList = function (item_value) {
    while ( list.children.length >= 5 )
    {
      list.removeChild(list.firstChild );
    }

    var item = document.createElement("li");
    item.innerText = item_value;

    list.appendChild(item);
  } 
```

[http://jsbin.com/oriwut/3/edit](http://jsbin.com/oriwut/3/edit)

这是另一个解决方案，它结合了上述内容，仅显示 10 项列表的最后 5 项。

```
 var addToList = function (item_value) {

    while ( list.children.length >= 10 )
    {
      list.removeChild(list.firstChild );
    }

    var item = document.createElement("li");
    item.innerText = item_value;

    list.appendChild(item);

    list.scrollTop = list.scrollHeight;

  } 
```

一点CSS：

```
#list {
   overflow-x:scroll;
   width: 100px;
   height: 120px;
}

#list li {
   height: 20px;
} 
```

[http://jsbin.com/ujuxer/2/edit](http://jsbin.com/ujuxer/2/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:45:01.153

您可以使用以下 CSS，但我不确定浏览器兼容性（不清楚[这](http://caniuse.com/#search=nth-)是否是正确的兼容性表）：

```
li { display: none; } 
li:nth-last-child(-n+5) {
    display: list-item;
} 
```

[http://jsfiddle.net/TzDqV/](http://jsfiddle.net/TzDqV/)

# sql - 函数中的 SELECT 语句 - 别名、with、临时表...等

> ID：15576640
> 
> 赞同：0
> 
> 时间：2013-03-22T17:38:57.853
> 
> 标签：sql, sql-server

我正在尝试创建一个函数，用户输入日期然后接收表格。该函数返回的表格显示每天（transdate）收到的邮件类型和数量，然后生成特定于每种邮件类型的运行总计。它作为一个选择语句工作正常，但是当我尝试输入函数格式时，我收到错误：“函数中包含的选择语句无法将数据返回给客户端。”

```
CREATE FUNCTION DailyMailCount(@Date datetime)
RETURNS @Count TABLE 
                    (
   [ID] int identity (1,1),
   Transdate datetime, 
   Donation varchar (10), 
   DailyCount int,  
   RunningTotal int    
                     ) 

AS
BEGIN 

DECLARE @running_total TABLE (Transdate DATETIME,Donation varchar(30), countz INT,row int)
INSERT INTO @running_total

SELECT TransDate,Donation, COUNT(*)
,ROW_number() OVER (PARTITION BY Donation order by TransDate ASC) as row 
FROM RevInt.DetailDonation WHERE TransDate > '@Date' GROUP BY TransDate,Donation

SELECT 
r1.Transdate,
r1.Donation,
r1.countz,
SUM(r2.countz) as running_total
FROM @running_total r1
LEFT OUTER JOIN @running_total r2 on r2.donation = r1.Donation
                AND r2.row <= r1.row
GROUP BY 
r1.transdate,
r1.countz,
r1.donation,
r1.row
ORDER BY r1.Donation

       RETURN 
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:43:02.667

正确的语法是：

```
CREATE FUNCTION DailyMailCount(@Date datetime)
RETURNS @Count TABLE (
   [ID] int identity (1,1),
   Transdate datetime, 
   Donation varchar (10), 
   DailyCount int,  
   RunningTotal int    
) 
as begin
    DECLARE @running_total TABLE (Transdate DATETIME,Donation varchar(30), countz INT,row int)
    INSERT INTO @running_total
        SELECT TransDate,Donation, COUNT(*),
               ROW_number() OVER (PARTITION BY Donation order by TransDate ASC) as row 
        FROM DetailDonation
        WHERE TransDate > '@Date'
        GROUP BY TransDate, Donation;

    insert into @Count
        SELECT r1.Transdate, r1.Donation, r1.countz,
               SUM(r2.countz) as running_total
        FROM @running_total r1
             LEFT OUTER JOIN @running_total r2
             on r2.donation = r1.Donation AND r2.row <= r1.row
        GROUP BY r1.transdate, r1.countz, r1.donation, r1.row
        ORDER BY r1.Donation;

    RETURN;
END; 
```

您错过了`insert`返回表。

您还可以使用单个查询创建一个内联函数（一个语句）：

```
return with running_total as (
    SELECT TransDate,Donation, COUNT(*),
           ROW_number() OVER (PARTITION BY Donation order by TransDate ASC) as row 
    FROM RevInt.DetailDonation
    WHERE TransDate > '@Date'
    GROUP BY TransDate,Donation
)
SELECT r1.Transdate, r1.Donation, r1.countz, SUM(r2.countz) as running_total
FROM running_total r1 LEFT OUTER JOIN
     running_total r2
     on r2.donation = r1.Donation
                AND r2.row <= r1.row
GROUP BY r1.transdate, r1.countz, r1.donation, r1.row
ORDER BY r1.Donation 
```

# google-chrome - Facebook 评论和点赞在 Chrome 中不起作用

> ID：15576642
> 
> 赞同：0
> 
> 时间：2013-03-22T17:38:59.833
> 
> 标签：google-chrome, facebook-like, facebook-comments

使用 Chrome 时，网站上的 FB 评论和点赞不通过。我已经尝试将它登录到 FB 并退出。登录后，几秒钟后会弹出一条消息，提示“您尚未登录。请登录并重试。”。登出时，会弹出登录窗口，我可以登录FB，网站上的评论框显示我的头像，但当我尝试发送评论时，再次弹出相同的消息。我已经删除了缓存和 cookie，重新启动了 Chrome，但没有任何帮助。顺便说一句，在 Firefox 和 IE 中一切正常。

我真的很感激在这个问题上的一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:54:25.437

听起来好像有一个程序（扩展程序、工具栏...等）阻止您的 Facebook 登录。如果您认为它们不为人所知，请尝试从 Tools->Extensions 中删除一些（不是全部）扩展。另外，如果您看到任何可疑程序正在运行，我建议您查看 Chrome 任务管理器（工具 -> 任务管理器）尝试通过单击（结束进程）来停止它。

![在此处输入图像描述](../Images/61c1e1ec4a616fa7da26697fefe9fdb8.png)

我希望这能解决你的问题。问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:49:57.157

您是否碰巧有任何可能阻止访问社交网页的扩展程序？否则，我认为对此没有有效的解释。问候。

PS 尝试在不登录您的 gmail 帐户（如果有）的情况下重新安装 Chrome 并同步所有内容。

# codeigniter - Codeigniter 探查器执行时间错误？

> ID：15576646
> 
> 赞同：-1
> 
> 时间：2013-03-22T17:39:39.380
> 
> 标签：codeigniter, profiler

我是 Codeigniter 的新手。几天前我在 WAMP (PHP 5.4.3) 上安装了 CI 2.1.3。我创建了我的基本布局并启用了探查器。

启用探查器后，它会给我下一个执行时间：

加载时间：基类 **0.0228**
控制器执行时间（布局/索引） **0.0239**
总执行时间 **0.0468**

我决定在视图文件中包含下一个以查看分析器的准确度：

$time = microtime(true) - $_SERVER["REQUEST_TIME_FLOAT"];
回声$时间；

上面的输出是：**0.064446926116943**

现在绝对不等于 CI Profiler。

我错过了什么吗？CI Profiler 准确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:56:24.510

CI Profiler 实际上并不进行测量，它是基准库。它通过`microtime()`在添加标记时获取时间戳来衡量每个基准。然后分析器计算开始标记和结束标记之间的差异。

不同之处在于设置第一个基准之前的初始化时间。

您可以在源代码中看到第一个基准测试开始的位置。它位于文件*system/core/codeigniter.php*的第 108 行：

```
$BM =& load_class('Benchmark', 'core');
$BM->mark('total_execution_time_start');
$BM->mark('loading_time:_base_classes_start'); 
```

当然，在运行该代码之前已经加载了所有已准备好的文件，所以这就是差异的来源。

# asp.net-mvc - ASP.NET MVC 路由图

> ID：15576647
> 
> 赞同：0
> 
> 时间：2013-03-22T17:39:42.487
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, maproute, ignoreroute

请帮助我更正我的 ASP.NET MVC 路线图。

我有一个带有 ActionLink 的菜单项：
`<li>@Html.ActionLink("Articles", "List", "Article")</li>`

在主页上，它看起来像： `localhost/Article` 没关系。

但是在带有 URL 的具体文章页面上，`localhost/Article/List/11`我的菜单链接是相同的： `localhost/Article/List/11`

但是我需要`localhost/Article`

我的路线图代码如下：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "Article",
        url: "Article/{action}/{id}",
        defaults: new { controller = "Article", action = "List", id = UrlParameter.Optional }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

这是控制器代码：

```
public ActionResult List(int? id)
    {
        ArticlesDataManager artMgr = new ArticlesDataManager();
        ArticleViewModel art = new ArticleViewModel();

        art.Articles = artMgr.GetLastArticles();

        art.Article = (id == null) ? artMgr.GetLast() : artMgr.GetArticle((int)id);

        ViewData.Model = art;

        return View();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:49:44.237

通过更改路线图解决了我的问题：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
               name: "ArticleByFirst",
               url: "Article/{action}/",
               defaults: new { controller = "Article", action = "List" }
           );

            routes.MapRoute(
                name: "ArticleById",
                url: "Article/List/{id}",
                defaults: new { controller = "Article", action = "List", id = UrlParameter.Optional }
            );

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );
        } 
```

我的菜单链接看起来像： `<li><a href="@Url.RouteUrl("ArticleByFirst", new { action = "List" })">Articles</a></li>`

我的项目链接是：`<li><a href="@Url.RouteUrl("ArticleById", new { id = item.Id })">@item.Name</a></li>`

不好，我不能在 ActionLink 中选择 Route Map 的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:04:58.953

我猜您当前的查询字符串项目正在添加到您的操作链接中。为避免此问题，请使用[此](http://msdn.microsoft.com/en-us/library/dd493068%28v=vs.108%29.aspx)重载并尝试`null`作为 RouteValues 显式传递，看看它带来了哪些变化。

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    RouteValueDictionary routeValues,
    IDictionary<string, Object> htmlAttributes
) 
```

所以你的代码可以重写为

```
<li>@Html.ActionLink("Articles", "List", "Article",
                                        new RouteValueDictionary { },null)</li> 
```

你也可以试试这个版本

```
<a href="Url.Action("List", "Articles")">Articles</a> 
```

# c++ - Scons 在两个不同的地方提升图书馆

> ID：15576649
> 
> 赞同：1
> 
> 时间：2013-03-22T17:39:53.613
> 
> 标签：c++, boost, scons

我们的系统在两个不同的地方安装了 boost - 一个在 /usr/... 另一个是自定义安装在另一个目录中。我只想包含自定义安装中的标头/库，但 scons 不断在 /usr/... 中选择标准路径

有没有办法强制 scons 只看到自定义目录中的 headers/libs。我已将此路径添加到我的 CPPPATH 变量中，但 /usr/include 路径也在那里，我确实需要其他 c++ 头文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:50:08.260

包含目录（“-I”）按从左到右的顺序在标准路径之前搜索（[http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html](http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)）

尝试使用 Prepend 在 CPPPATH 前面添加：

```
env = Environment()
env.Prepend(CPPPATH = ['/opt/boost']) 
```

这是 Prepend 的参考： [http ://www.scons.org/doc/HTML/scons-user/x1444.html#AEN1719](http://www.scons.org/doc/HTML/scons-user/x1444.html#AEN1719)

# android - Parse.com Push REST Api 查询自己的专栏

> ID：15576651
> 
> 赞同：1
> 
> 时间：2013-03-22T17:40:02.877
> 
> 标签：android, parse-platform

您好，我想将 parse.com 推送集成到我现有的 Android 应用程序中。在 parse.com，我在安装表中添加了两个新列“nick”和“userid”，在我的 php Push 中，我想向一个特定的用户/用户 ID 发送推送。这是我的数组，但我总是得到一个 {"code":1,"error":"internal error"} 响应。

```
$data = array(
            'type' => 'android',
            'where' => array(
                    'nick' => "Andy",
            ),
            'channel' => '',
            'data' => array(
                    'alert' => $message,
            ),
    ); 
```

“Andy”确实存在于表/数据库中，并且该列的名称正确。有没有人提示我如何查询这些列？

感谢阅读问候 Soma

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:48:34.813

好的，现在找到了我在数组中找到的答案：'type' => 'android', 'channel' => '',

把它放到“where”数组中就可以了。

```
 $data = array(

            'where' => array(
                    'nick' => "Andy",
                    'type' => 'android',
                    'channel' => '',
            ),

            'data' => array(
                    'alert' => $message,
            ),
    ); 
```

谢谢

# python - 在 Python 中使用 BeautifulSoup 解析 HTML

> ID：15576652
> 
> 赞同：1
> 
> 时间：2013-03-22T17:40:06.083
> 
> 标签：python, html-parsing, beautifulsoup

我正在尝试使用 BeautifulSoup 用 Python 解析 HTML，但我无法获得我需要的东西。

这是我想做的个人应用程序的一个小模块，它包含一个带有凭据的 Web 登录部分，一旦脚本登录到 Web，我需要解析一些信息以便管理和处理它。

登录后的 HTML 代码为：

```
<div class="widget_title clearfix">

        <h2>Account Balance</h2>

    </div>

    <div class="widget_body">

        <div class="widget_content">

            <table class="simple">

                <tr>

                    <td><a href="#" id="west1" title="Total earned daily">Daily Earnings</a></td>

                    <td style="text-align: right; width: 125px; color: #119911; font-weight: bold;">

                        150                         

                    </td>

                </tr>

                <tr>

                    <td><a href="#" id="west2" title="Total weekly earnings">Weekly Earnings</a></td>

                    <td style="text-align: right; border-bottom: 1px solid #000; color: #119911; font-weight: bold;">

                        500                     </td>

                </tr>

                <tr>

                    <td><a href="#" id="west3" title="Total Monthly earnings">Monthly Earnings</a></td>

                    <td style="text-align: right; color: #119911; font-weight: bold;">

                        1500                        </td>

                </tr>

                <tr>

                    <td><a href="#" id="west4" title="Total expenses">Total expended</a></td>

                    <td style="text-align: right; border-bottom: 1px solid #000; color: #880000; font-weight: bold;">

                        430                     </td>

                </tr>

                <tr>

                    <td><a href="#" id="west5" title="Total available">Account Balance</a></td>

                    <td style="text-align: right; border-bottom: 3px double #000; color: #119911; font-weight: bold;">

                        840                     </td>

                </tr>

                <tr>

                    <td></td>

                    <td style="padding: 5px;">

                        <center>

                            <form id="request_bill" method="POST" action="index.php?page=dashboard">

                                <input type="hidden" name="secret_token" value="" />

                                <input type="hidden" name="request_payout" value="1" />

                                <input type="submit" class="btn blue large" value="Request Payout" />

                            </form>

                        </center>

                    </td>

                </tr>

            </table>

        </div>

    </div>

</div> 
```

正如你所看到的，它不是一个格式很好的 HTML，但我需要提取元素及其值，我的意思是，例如：“每日收入”和“150”| “周收益”和“500”...

我认为“id”属性可能会有所帮助，但是当我尝试解析它时，它会崩溃。

我正在使用的 Python 代码是：

```
def parseo(archivohtml):
    html = archivohtml
    parsed_html = BeautifulSoup(html)
    par = parsed_html.find('td', attrs={'id':'west1'}).string
    print par 
```

其中archivohtml是登录网页后保存的html文件

当我运行脚本时，我只会得到错误。

我也试过这样做：

```
def parseo(archivohtml):
    soup = BeautifulSoup()
    html = archivohtml
    parsed_html = soup(html)
    par = soup.parsed_html.find('td', attrs={'id':'west1'}).string
    print par 
```

但结果还是一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:46:53.767

带有的标签`id="west1"`是一个`<a>`标签。您正在寻找`<td>`此标签之后的`<a>`标签：

```
import BeautifulSoup as bs

content = '''<div class="widget_title clearfix">
        <h2>Account Balance</h2>
    </div>
    <div class="widget_body">
        <div class="widget_content">
            <table class="simple">
                <tr>
                    <td><a href="#" id="west1" title="Total earned daily">Daily Earnings</a></td>
                    <td style="text-align: right; width: 125px; color: #119911; font-weight: bold;">
                        150                         
                    </td>
                </tr>
                <tr>
                    <td><a href="#" id="west2" title="Total weekly earnings">Weekly Earnings</a></td>
                    <td style="text-align: right; border-bottom: 1px solid #000; color: #119911; font-weight: bold;">
                        500                     </td>
                </tr>
                <tr>
                    <td><a href="#" id="west3" title="Total Monthly earnings">Monthly Earnings</a></td>
                    <td style="text-align: right; color: #119911; font-weight: bold;">
                        1500                        </td>
                </tr>
                <tr>
                    <td><a href="#" id="west4" title="Total expenses">Total expended</a></td>
                    <td style="text-align: right; border-bottom: 1px solid #000; color: #880000; font-weight: bold;">
                        430                     </td>
                </tr>
                <tr>
                    <td><a href="#" id="west5" title="Total available">Account Balance</a></td>
                    <td style="text-align: right; border-bottom: 3px double #000; color: #119911; font-weight: bold;">
                        840                     </td>
                </tr>
                <tr>
                    <td></td>
                    <td style="padding: 5px;">
                        <center>
                            <form id="request_bill" method="POST" action="index.php?page=dashboard">
                                <input type="hidden" name="secret_token" value="" />
                                <input type="hidden" name="request_payout" value="1" />
                                <input type="submit" class="btn blue large" value="Request Payout" />
                            </form>
                        </center>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>'''

def parseo(archivohtml):
    html = archivohtml
    parsed_html = bs.BeautifulSoup(html)
    par = parsed_html.find('a', attrs={'id':'west1'}).findNext('td')        
    print par.string.strip()

parseo(content) 
```

产量

```
150 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:56:07.300

我无法从您的问题中判断这是否适用于您，但这是另一种方法：

```
def parseo(archivohtml):
    html = archivohtml
    parsed_html = BeautifulSoup(html)
    for line in parsed_html.stripped_strings:        
        print line.strip() 
```

产生：

```
Account Balance
Daily Earnings
150
Weekly Earnings
500
Monthly Earnings
1500
Total expended
430
Account Balance
840 
```

如果您想要列表中的数据：

`data = [line.strip() for line in parsed_html.stripped_strings]`

```
[u'Account Balance', u'Daily Earnings', u'150', u'Weekly Earnings', u'500', u'Monthly Earnings', u'1500', u'Total expended', u'430', u'Account Balance', u'840'] 
```

# c# - 过滤wpf时ItemsSource突出显示？

> ID：15576653
> 
> 赞同：1
> 
> 时间：2013-03-22T17:40:17.443
> 
> 标签：c#, wpf, filter, textbox, collectionview

我`ItemsSource`绑定了我的数据。我有一个，当用户开始输入它时，我会根据更改的事件`TextBox`根据以下内容过滤项目：`Filter predicate``textBoxText`

```
ICollectionView listView = CollectionViewSource.GetDefaultView(myControl.ItemsSource);

listView.Filter = ((x) => 
{           
    MyData data = x as MyData;
    return data.Name.Contains(searchString, System.StringComparison.InvariantCultureIgnoreCase);
}); 
```

这工作正常并过滤列表。但是，我还希望这些项目在键入时以黄色突出显示输入的搜索条件。我怎样才能在 wpf 中做到这一点？有一些像：

如果我搜索“est”并且该项目是`Forest`The Forest 项目`est`以黄色或任何其他颜色突出显示`ListBox`？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-09T22:39:06.327

我通过创建一个自定义控件来实现这一点 -`HighlightableTextBlock`它继承`TextBlock`并添加了以下依赖属性：

```
 public string HighlightSource
    {
        get { return (string)GetValue(HighlightSourceProperty); }
        set { SetValue(HighlightSourceProperty, value); }
    }

    public static readonly DependencyProperty HighlightSourceProperty =
        DependencyProperty.Register("HighlightSource", typeof(string), typeof(HighlightableTextBlock), new PropertyMetadata("", OnChange)); 
```

`OnChange`在事件处理程序中执行实际突出显示：

```
 static void OnChange(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var textBlock = d as HighlightableTextBlock;
        var text = textBlock.Text;
        var source = textBlock.HighlightSource;

        if (!string.IsNullOrWhiteSpace(source) && !string.IsNullOrWhiteSpace(text))
        {
            var index = text.IndexOf(source);
            if (index >= 0)
            {
                var start = text.Substring(0, index);
                var match = text.Substring(index, source.Length);
                var end = text.Substring(index + source.Length);

                textBlock.Inlines.Clear();
                textBlock.Inlines.Add(new Run(start));
                textBlock.Inlines.Add(new Run(match) { Foreground = Brushes.Red });
                textBlock.Inlines.Add(new Run(end));
            }
        }
    } 
```

事物的标记方面如下所示：

```
<controls:HighlightableTextBlock Text="{Binding SomeText}"
                                 HighlightSource="{Binding ElementName=SearchTextBox, Path=Text}">
</controls:HighlightableTextBlock> 
```

似乎为我工作。在这个例子中，我已经硬编码了匹配子字符串的颜色，但是如果你想从标记中传递它，你可以添加一个单独的属性。

希望这可以帮助...

# algorithm - 基于磁盘的多维数据索引

> ID：15576663
> 
> 赞同：1
> 
> 时间：2013-03-22T17:40:53.030
> 
> 标签：algorithm, data-structures, tree, indexing, r-tree

我想对多维数据使用某种基于磁盘的索引。我想能够

1.  执行范围搜索 - (10 - 20% 的应用程序使用)
2.  更快的检索 - (80%)

数据大小（以 GB 为单位）和记录数以十亿为单位

更具体地说，我想实现 R-Tree 或 X-Tree 之类的东西。但我认为开始使用 B-Trees 是个好主意。尽管所有数据库都提供了非常有效的 B-Tree 实现，但我希望能够调整设计，将可能的基于应用程序的启发式添加到设计中，因此我更愿意实现自己的一些东西或使用一些库作为起点.

任何指向库的指针或建议都会非常有帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:00:21.823

“检索” - 通过什么？窗口查询？半径查询？最近邻居查询？

多少维 - 如果它只是 2D，即使是简单的网格方法也可以很好地工作。

请注意，大多数高质量的 SQL 系统（实际上除了 MySQL 之外的几乎所有系统）都在一定程度上支持 R-tree。

# r - 如何使用 R 计算由两个变量定义的新变量？

> ID：15576670
> 
> 赞同：0
> 
> 时间：2013-03-22T17:05:20.473
> 
> 标签：r, merge, interaction

我有一个包含变量`sex`和`navigation`. 该`sex`变量具有`male`和`female`作为值。“导航”变量具有`menu`和`tags`作为值。

我想创建一个具有值`male_menu`,`male_tags`和`female_menu`&的新变量，`female_tags`因为它们是两个现有变量的可能组合。

如何在原始数据集中创建这样一个新变量`R`并将其包含在原始数据集中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:15:00.173

我理解你想要的东西与@zach 有所不同。在这里，我使用该`interaction`函数创建一个具有您指定的四个级别的新因子。这里使用一些虚拟数据

```
set.seed(42)

sex <- sample(c("Male","Female"), 20, replace = TRUE)
navigation <- sample(c("menu","tags"), 20, replace = TRUE)

interaction(sex, navigation) 
```

最后一行给出

```
> interaction(sex, navigation)
 [1] Female.tags Female.menu Male.tags   Female.tags Female.menu Female.tags
 [7] Female.menu Male.tags   Female.menu Female.tags Male.tags   Female.tags
[13] Female.menu Male.tags   Male.menu   Female.tags Female.menu Male.menu  
[19] Male.tags   Female.tags
Levels: Female.menu Male.menu Female.tags Male.tags 
```

那是你想要的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:11:37.103

听起来您正在为模型创建虚拟变量。这是一个简单的方法，使用`model.matrix`：

```
dat <- iris
dat$navigation <- sample(c('menu', 'tags'), nrow(dat), replace=TRUE)

newdat <- data.frame(model.matrix(~0+.+Species*navigation, dat))
> head(newdat)
  Sepal.Length Sepal.Width Petal.Length Petal.Width Speciessetosa
1          5.1         3.5          1.4         0.2             1
2          4.9         3.0          1.4         0.2             1
3          4.7         3.2          1.3         0.2             1
4          4.6         3.1          1.5         0.2             1
5          5.0         3.6          1.4         0.2             1
6          5.4         3.9          1.7         0.4             1
  Speciesversicolor Speciesvirginica navigationtags
1                 0                0              0
2                 0                0              1
3                 0                0              0
4                 0                0              0
5                 0                0              1
6                 0                0              0
  Speciesversicolor:navigationtags Speciesvirginica:navigationtags
1                                0                               0
2                                0                               0
3                                0                               0
4                                0                               0
5                                0                               0
6                                0                               0 
```

如果由于某种原因您不想降低参考水平，则可以使用[caret](http://cran.r-project.org/web/packages/caret/index.html)`dummyVars`中的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T17:50:40.993

只是另一种选择，您也可以使用`paste`.

```
your_data$sex_navigation <- with(your_data, paste(sex, navigation, sep = "_")) 
```

当然，您可以通过将其包装在`factor()`. `interaction`这与方法之间的主要区别在于，`interaction`它将创建一个因素，其中级别包括*所有可能的*交互，无论它们是否存在。该`factor(paste())`方法将仅包括存在的级别。我发现这`interaction`通常更可取，但时不时地`paste`是我想要的。

# android - AsyncTask.onPostExecute() 在应用程序最小化时显示 AlertDialog 导致 UI 无响应

> ID：15576673
> 
> 赞同：0
> 
> 时间：2013-03-22T17:41:40.893
> 
> 标签：android, user-interface, android-asynctask

在 AsyncTask 中显示 AlertDialog 的奇怪效果：如果在**AsyncTask 执行期间应用程序被最小化**：

```
private class CheckDeviceConfiguration extends AsyncTask<Void, Void, Boolean> {
private ProgressDialog progressDialog;

@Override
protected void onPreExecute() {
    super.onPreExecute();    
    progressDialog = ProgressDialog.show(ActivitySIPCountrySelection.this, "Title", "working...", true);                        
}

@Override
protected void onPostExecute(Boolean result) {
    super.onPostExecute(result);

    progressDialog.dismiss(); //hide progress dialog previously shown

    if (!result) {
        AlertDialog.Builder dialog = new AlertDialog.Builder(ActivitySIPCountrySelection.this);
        dialog.setCancelable(false);
        dialog.setMessage("Message");
        dialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int arg1) {
            //do something
            }
        });

        dialog.show();
     }

  }
@Override
protected Boolean doInBackground(Void... params)
    Thread.sleep(5000);
    return false;
} 
```

}

如果我单击我的应用程序图标进行恢复，UI 没有响应并且活动看起来有点**暗**（不活动？）。后退按钮无效。

**编辑：**

有人问我在哪里调用 AsyncTask。好吧，来自Activity onCreate()。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_sip_country_selection);

        new CheckDeviceConfiguration().execute();
    } 
```

异步任务正确显示进度对话框并将其隐藏在 onPostExecute 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:13:04.183

注意：AsyncTask 管理一个使用 ThreadPoolExecutor 创建的线程池。它将有 5 到 128 个线程。如果线程数超过 5 个，这些多余的线程最多会停留 10 秒，然后才会被移除。（注意：这些数字是针对目前可见的开源代码，并因 Android 版本而异）。

请不要管 AsyncTask 线程。

按下主页会将您从应用程序切换到主屏幕，同时让您的应用程序在后台运行。

当您的手机内存等资源不足时，它将开始关闭在后台运行的应用程序，以便您的手机有足够的资源来执行您现在尝试执行的操作。游戏通常是手机为了节省资源而“杀死”的第一批应用程序之一，因为它们通常比其他应用程序使用更多的内存和 CPU。这就是为什么有时您的游戏仍在运行暂停，有时 Android 已为您关闭它。

[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)。有关更多详细信息，请检查任务和返回任务。

您可以通过调用 cancel(true) 取消 asynctask，将向后台线程发送一个中断，这可能有助于可中断任务。否则，您只需确保在 doInBackground() 方法中定期检查 isCancelled()。

```
 @Override
 protected void onPause() {
// TODO Auto-generated method stub
super.onPause();
d.cancel(true);
if(d.isCancelled())
{
    System.out.println("Destroyed....");
}
 }
@Override
protected void onDestroy() {
// TODO Auto-generated method stub
super.onDestroy();
d.cancel(true);
if(d.isCancelled())
{
    System.out.println("Destroyed....");
}
} 
```

因此，当您的活动恢复时，创建一个新的 asynctask 实例并再次执行。

[http://code.google.com/p/shelves/](http://code.google.com/p/shelves/)。罗曼盖伊的检查货架项目。

[http://developer.android.com/reference/android/content/AsyncTaskLoader.html](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)。还要检查异步任务加载器。

asynctask 的替代方案是 RoboSpice。 [https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)。

常见问题解答[https://github.com/octo-online/robospice/wiki/Advanced-RoboSpice-Usages-and-FAQ](https://github.com/octo-online/robospice/wiki/Advanced-RoboSpice-Usages-and-FAQ)。

# python - 如何在 SQLAlchemy 中动态选择要查询的列？

> ID：15576674
> 
> 赞同：1
> 
> 时间：2013-03-22T17:42:01.347
> 
> 标签：python, postgresql, sqlalchemy

我想通过查看 SQLAlchemy 中的代码从表中选择特定值`session.py`

```
def query(self, *entities, **kwargs):
    """Return a new ``Query`` object corresponding to this ``Session``."""

    return self._query_cls(entities, self, **kwargs) 
```

似乎作为函数参数，它**接受一个 tuple**。所以我所做的是：

```
query = ('order', 'location')
columnsStr = 'order, location'
table = 'locations'
sql = "SELECT {0} FROM {1}".format(columnsStr, table)
data = session.query(query).from_statement(sql).all() 
```

它会产生这个错误 -`InvalidRequestError: SQL expression, column, or mapped entity expected - got '('order', 'location')'`

为什么这不适用于元组？

附言

如果我更改这些值：

```
query = 'location'
columnsStr = 'location' 
```

我确实得到了结果，但仅限于那一列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:49:03.693

尝试

```
data = session.query('order', 'location').from_statement(sql).all() 
```

或者，如果你想保持你的元组结构，你可以做这样的事情

```
data = session.query(*query).from_statement(sql).all() 
```

原因是当你传入一个元组 python 然后将该元组放入一个元组中

```
>>> x = (1,2,3)
>>> def f(*x):
    print x
>>> f(x)
((1, 2, 3),)
>>> f("location", "order")
('location', 'order')
>>> 
```

# c# - 将 ActionLink 与绝对路径一起使用

> ID：15576679
> 
> 赞同：5
> 
> 时间：2013-03-22T17:42:22.553
> 
> 标签：c#, asp.net, asp.net-mvc-4

根据提供的答案：

[带有 Html.ActionLink 的绝对（外部）URL](https://stackoverflow.com/questions/6425936/absolute-external-urls-with-html-actionlink)

我有以下 ActionLink：

```
<li>@Html.ActionLink("ExternalLink", "http://google.com")</li> 
```

但我仍然收到“找不到资源错误”，其中：

请求的网址：/Home/http:/google.com

将 /Home 标记到绝对路径上。

更新：我希望连接一个外部 URL（我自己的，在 Web 项目之外）并在控制器中连接一个 ActionResult .. 是不是因为我正在使用 HomeController，而我应该使用一个新的?

我究竟做错了什么？

任何帮助，非常感谢。

乔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T17:45:32.840

你在这里不需要 Razor。只需使用一个标签。

```
<a href="http://google.com">Link to Google</a> 
```

**更新：**

对于更复杂的场景，您可以编写一个简单的 HTML 辅助方法，如下所示：

```
public static class ExternalLinkHelper
{
    public static MvcHtmlString ExternalLink(this HtmlHelper htmlHelper, string linkText, string externalUrl)
    {
        TagBuilder tagBuilder = new TagBuilder("a");
        tagBuilder.Attributes["href"] = externalUrl;
        tagBuilder.InnerHtml = linkText;
        return new MvcHtmlString(tagBuilder.ToString());
    }
} 
```

只需确保在视图中引用此类的命名空间即可。

```
@Html.ExternalLink("Link to Google", "http://google.com") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:44:41.343

`ActionLink`不支持绝对网址。“行动”这个名字就说明了这一点。您要么需要将自己的扩展方法添加到 HtmlHelper，要么自己编写标记。

# matlab - MATLAB改变重复定时器周期

> ID：15576682
> 
> 赞同：3
> 
> 时间：2013-03-22T17:42:25.480
> 
> 标签：matlab, timer

**是否可以更改重复计时器的周期（在 TimerFcn 中）？**

直观地说，在为 Windows 编程时，我会处理 WM_TIMER 消息并使用 SetTimer 来编辑定时器的周期，但类似的方法在 MATLAB 中似乎不起作用，因为需要重新启动定时器才能更改 Period 属性. 这会扰乱执行，最好将其描述为将周期更改为接近零。不会产生错误。

下面是一些用于创建任务数组的示例代码：每个任务项都由要做的事情和延迟组成。该数组基本上是由一个计时器遍历的，它应该根据当前的任务延迟来改变它的周期。

```
function obj = Scheduler(~)
    obj.scheduletimer = timer(...
        'TimerFcn',@obj.OnTimer,...
        'BusyMode','queue',...
        'TasksToExecute',length(obj.tasklist),...
        'ExecutionMode','fixedRate');
end
function OnTimer(obj,source,event)
    obj.Start(); // Executed task, schedule next
end
function Start(obj)

    // Stop timer if needed
    if(strcmp(obj.scheduletimer.Running,'on'))
        stop(obj.scheduletimer);
    end;

    // Set new period and resume
    if(~isempty(obj.tasklist))
        obj.scheduletimer.Period = obj.tasklist(1).something;
        start(obj.scheduletimer);
    end;
end 
```

当我不弄乱 OnTimer 中的计时器时，一切显然都可以正常工作，但我想在每次迭代时更改 Period。

编辑：我尝试实施 Pursuit 建议的 pingpong 解决方案，但仍然无法正常工作。请注意，切换计时器的想法确实有效，但似乎仍然没有应用周期。

```
function obj = Scheduler(~)
    obj.timer1 = timer(...
        'TimerFcn',@obj.OnTimer);
     obj.timer2 = timer(...
        'TimerFcn',@obj.OnTimer);
end
function OnTimer(obj,source,event)
    obj.Start(); // Executed task, schedule next
end
function Start(obj)
    if(strcmp(obj.timer1.Running,'on'))
        obj.timer2.Period = obj.tasklist{1}{2};
        start(obj.timer2);
    else
        obj.timer1.Period = obj.tasklist{1}{2};
        start(obj.timer1);
    end;
end 
```

啊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:04:15.677

使用两个计时器，（例如`timerNamePing`和`timerNamePong`）。在每个计时器的动作结束时，设置下一个计时器以单次模式执行一次，并有一些延迟。

这避免了不断拆除和创建新计时器的需要，并避免了当您尝试编辑当前正在执行的计时器时发生的错误。

这是一个演示的工作示例：

```
function setupPingPong

timerPing = timer;
timerPong = timer;

timerPing.TimerFcn = @(~,~)pingPongActivity(true,  timerPing, timerPong);
timerPing.Name = 'PingTimer';

timerPong.TimerFcn = @(~,~)pingPongActivity(false, timerPing, timerPong);
timerPong.Name = 'PongTimer';

timerPing.StartDelay = 0;
start(timerPing);

function pingPongActivity(isPing, timerPing, timerPong)
    if isPing
        disp(['PING (' datestr(now,'yyyy-mm-dd HH:MM:SS.FFF') ')'])
    else
        disp(['PONG (' datestr(now,'yyyy-mm-dd HH:MM:SS.FFF') ')'])
    end
    delayTime = ceil(rand*10);
    display(['    delaying '  num2str(delayTime) ' sec.'])
    if isPing
        nextTimer = timerPong;
    else
        nextTimer = timerPing;
    end
    set(nextTimer,'StartDelay', delayTime);
    start(nextTimer); 
```

一旦发生这种情况，为了停止疯狂，我使用：

```
t = timerfind; stop(t); delete(t) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-31T06:44:15.263

我再次使用计时器对象中的“StopFcn”属性来重新启动计数器。

像这样的东西（'TimerScale' 改变下一个时期）

在里面 ：

```
Timer_OBJ = timer(  'ExecutionMode', 'singleShot', ...
                                    'StartDelay', SystemTicksSecs/TimerScale, ...
                                    'TimerFcn', @(src,evt)obj.TimerCallBack,...
                                    'StopFcn', @(src,evt)obj.TimerStopCallBack );

                start(Timer_OBJ); 
```

在 TimerStopCallBack 里面

```
 set(Timer_OBJ, 'StartDelay', SystemTicksSecs/TimerScale);                

    start(Timer_OBJ); 
```

# css - 如何布局一个相当简单的引导场景？

> ID：15576684
> 
> 赞同：-3
> 
> 时间：2013-03-22T17:42:27.327
> 
> 标签：css, html, twitter-bootstrap, fluid-layout

我是引导程序的新手，并试图使用他们的网格系统布局一些相当简单的东西，但我遇到了困难。这是我想要的： ![在此处输入图像描述](../Images/3d028257f73007e30e84c3a3629cddbb.png)

所以基本上，左边是报告的标题。一个登录按钮向右浮动。下方有报告标准的面板。侧边栏包含报告列表，右侧是报告的实际内容。

我无法对齐面板等。另一个问题是，在宽屏幕上，面板的宽度在某个宽度处最大。

我正在寻找关于如何做这类事情的提示或示例或好的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:39:39.593

这是一个快速的模型，可以帮助您入门：http: [//jsfiddle.net/panchroma/hjhtF/](http://jsfiddle.net/panchroma/hjhtF/)

正如@isherwood 提到的，请查看[脚手架文档](http://twitter.github.com/bootstrap/scaffolding.html)。

HTML

```
<div class="container">
<div class="row-fluid">
    <div class="span12">
        <h3>Report Criteria ....</h3>
        <span class="pull-right btn">login</span>
    </div><!-- end span12 -->
</div> <!-- end row -->

<div class="row-fluid">
    <div class="span3">
        <h3>Category</h3>
        <ul class="side-nav">
            <li>a</li>
        </ul>
    </div><!-- end span3 -->

    <div class="span9">
    <table class="table">
    <!-- table details -->
    </table>
    </div><!-- end span9 -->
</div> <!-- end row -->

</div><!-- end container --> 
```

希望这能让你开始！

# excel - Excel 函数类似于 Python 的“in”运算符？

> ID：15576686
> 
> 赞同：0
> 
> 时间：2013-03-22T17:42:33.600
> 
> 标签：excel

我正在尝试让 excel 中的一个单元格检查一列中的所有单元格是否有一组数字，然后根据这些单元格显示一个值。有什么办法可以做到这一点吗？

编辑：这是一个简化的电子表格，显示了我正在尝试做的事情：

![http://i373.photobucket.com/albums/oo178/TSNAKE617/StackOverflow.png](../Images/fa4b0ab536d89a264ce82841d0093da4.png) （我的声誉还不够高，无法发布图片。）

我想检查 B 列中的单元格是否为“1,4,7,10”然后将相应 C 单元格的总和放入 E2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:55:33.953

你能给我们举个例子，让我们知道你尝试了什么吗？我不确定你到底想要什么。但根据你的要求：

试试这个`find(find_text, within_text, start_num)`功能。将其复制并粘贴到整个列中，您应该将结果放在一边。例如：

```
 A        B        
1  ABC      =if(iserr(find("A", A1)), "NOT found", "FOUND")
2  XYZ      =if(iserr(find("A", A2)), "NOT found", "FOUND") 
```

会给（在B1，B2）

```
FOUND
NOT found 
```

你也可以使用

`if(iserr(find(...)), 0, 1)`

在列的末尾，您可以执行 a`=sum()`并获得包含您要查找的字符串的行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:19:45.593

假设您在`1,4,7,10`可能使用的字符串上使用完全匹配`SUMPRODUCT`

`E2`=`=SUMPRODUCT(--($B$2:$B$6="1,4,7,10"),--($C$2:$C$6))`

它适用于我的示例，但我可能弄错了！

不能真正解释公式中发生了什么，但如果你在 excel 中评估它并观察它是如何计算它的，你应该会有一个想法！

# python - lambda中的无限循环，只打印最大值？

> ID：15576687
> 
> 赞同：0
> 
> 时间：2013-03-22T17:42:43.207
> 
> 标签：python

如何在 Python 中强制执行一个无限循环，该循环将运行一个表达式并仅在它大于先前保存的值时才打印它的值？我还希望它更新新的最大值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:43:03.817

下面的代码解决了这个问题：

```
from __future__ import print_function #needed python 2.7 only

import random
example_expression = lambda: random.random()

a = [0]
b = [-1]

[ print(a[0]) 
  for i in iter(int,1) #causes an infinite loop
  if  not a.__setitem__(0,example_expression()) #__setitem__ will return None 
  and a[0]>b[0] 
  and not b.__setitem__(0,a[0])  ] 
```

# regex - 使用“$”符号和“^”的正则表达式

> ID：15576690
> 
> 赞同：2
> 
> 时间：2013-03-22T17:42:49.173
> 
> 标签：regex

请问有人可以解释以下表达式之间的区别吗？

`[0-9]{1,3}:[0-5][0-9]`

`^([0-9]{1,3}:[0-5][0-9])$`

我没有得到正则表达式中 ^ 符号和 $ 符号的确切用法。

我观察到，如果我将第二个表达式写如下，它没有任何区别。

`^([0-9]{1,3}):([0-5][0-9])$`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:48:32.393

例子解释清楚：

```
^     : matches the beginning of a line
$     : matches the end of a line

"^foo$" : matches "foo", but not " foo" or "xxfooyy"
"foo$"  : matches "foo",  " foo" or "xxfoo" but not "foobar"
"^foo"  : matches "foo",  "fooyy" or "foo " but not "xfoo"
"foo"   : matches "foo",  " foo" or "xxfooyy" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:44:17.313

`^``$`这里是字符串锚点的开始和[结束](http://www.regular-expressions.info/anchors.html)。

第二个正则表达式意味着您要匹配整个输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T17:46:02.647

`^`= 字符串/行的开头 `$`= 字符串/行的结尾

所以你的第一个表达式也将匹配“FOO123:12BAR”

您的第二个和第三个表达式之间的区别不在于它们*匹配*什么，而是它们*捕获*什么，因为捕获组的括号不同。

# android - 方向改变，FragmentTransaction，Activity被销毁，WeakReference

> ID：15576691
> 
> 赞同：3
> 
> 时间：2013-03-22T17:43:01.400
> 
> 标签：android, android-fragments, android-viewpager, android-orientation

好吧。我在这里的第一个问题。而且我已经找到了一些解决方案，但老实说并没有真正了解后台发生的事情。所以也许有人可以稍微清理一下这些东西。经过几天的调试，我很高兴它可以工作......并希望我没有犯一些严重的错误。那么让我们来看看吧。

我有一些主要活动。只是一个扩展[JFeinstein 的](https://github.com/jfeinstein10/SlidingMenu)SlidingFragmentActivity 的 FragmentActivity。此外，我决定采用片段方式，将任何内容（列表片段、文章片段……）作为片段放入容器中（滑动菜单右侧）；我的主容器。到目前为止，一切都很好。

一个重要的片段是我的文章片段。ViewPager（带有 FragmentStatePagerAdapter） - 包含一些带有文本的页面，可能还有另一个列表片段。到目前为止仍然没有问题，直到我决定旋转设备。更准确地说，只要我不决定更新我的文章片段，旋转设备也会起作用。

我理解（如果我错了，请纠正我）Android 在旋转设备时会自行处理片段状态。在我想重新加载/更新其内容之前，一切似乎都很好。

好的，让我们深入研究一下。第一次启动时，我得到了一些空的主容器。然后我第一次加载我的文章片段。刚刚获得 SupportFragmentAdapter，创建我的 ArticleFragment 并用新创建的片段替换主容器 - 标记。没有火箭科学——只是一个简单的交易：

```
ViewPagerFragment pagerFragment = (ViewPagerFragment) 
    getSupportFragmentManager().findFragmentByTag(TAG_FRAGMENT_ARTICLE);

if(pagerFragment != null){
    if(pagerFragment.isResumed()){
        pagerFragment.triggerReload();
    }
} else {
    pagerFragment = new ViewPagerFragment();
    FragmentTransaction t = getSupportFragmentManager().beginTransaction();
    t.replace(R.id.id_main_root_frame, pagerFragment, TAG_FRAGMENT_ARTICLE);
    t.commitAllowingStateLoss();
} 
```

为了避免在每次重新加载内容时创建片段，我试图在事务之前获取片段，并且 - 如果找到并恢复 - 触发现有片段的重新加载。

现在我在这种状态下旋转我的设备。为了避免弄乱片段状态，我将 onSaveInstanceState() 留在片段内未触及。所以我猜这个片段只是被销毁并重新创建了。到目前为止，一切仍然有效。但我认为这部分有点像黑匣子。

之后 - 正常启动，创建片段并放入主容器，旋转设备 - 我触发了一些更新。但是不是按标签查找旧的（重新创建的）片段，而是找到并创建并插入一个新片段。至少尝试插入，因为这是我得到以下异常的地方：

```
java.lang.IllegalStateException: Activity has been destroyed 
```

准确地说，当我使用 commitAllowingStateLoss() 完成交易时，我得到了上述异常。当我只是 commit() 事务时，我得到以下异常：

```
java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState 
```

所以这就是错误出现的地方。经过多年的调试和搜索，我在[这个问题/答案](https://stackoverflow.com/a/14222708/1378311)上找到了一些提示，以便在我的 MainActivity 的 WeakReference 上获取 SupportFragmentManager。我该怎么说。自从我实现了它，它就起作用了。我不得不稍微改变我的更新过程，但它确实有效。但留下一些问题......

行为似乎很相似。第一次创作完美。重新加载相同 - 通过标签找到片段。旋转后，文章仍然显示。当我重新加载具有该状态的片段时，标签找不到它，因此创建了一个新片段，但 commit()-request 不会引发异常。查看调试器内部显示 WeakReference 是某个其他实例（其他 id），而不是所有这一切发生的那个（这个）。这就是我失去情节的地方。..

如果你们中的一些人能给我一些提示，那就太好了！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-14T18:33:03.087

尝试这个：

```
commitAllowingStateLoss(); instead commit(); 
```

# python - 生成可能的移动 Python Tic-Tac-Toe 的列表

> ID：15576693
> 
> 赞同：-1
> 
> 时间：2013-03-22T17:43:03.073
> 
> 标签：python, list, tic-tac-toe, minmax

我目前正在为我的一个课程做一个项目，我必须使用 minmax 和 Alpha-Beta minmax 算法来实现一个 AI 对手来玩井字游戏来确定动作。

然而，我遇到的问题是试图为棋盘生成一个可能的移动列表。

我的问题代码如下

```
def genMoves(genBoard, turnNumber):
    moveList = []

    print "inMovesList"
    #Figure out if X or O go now

    if turnNumber % 2 == 0:
        moveChar = "O"
    else:
        moveChar = "X"

    i = 0;

    while i < 9:
        tempBoard = genBoard
        if tempBoard[i] == "*":
            #set tempBoard[i] to X or O
            tempBoard[i] = moveChar
            #append move, new board
            moveList.append((i, tempBoard))

        i+=1

    print "MovesList: "
    print moveList
    return moveList 
```

我的板表示为初始化为 9 个字符串的列表`["*", "*", "*", "*", "*", "*", "*", "*", "*"]`。

我的目标是让 move list 返回一个元组列表，元组的第一个元素是 i （插入 X 或 O 的位置​​），第二个元素是结果板。

我遇到的问题是我会收到一个包含正确数量的可能移动的列表（例如：如果我手动播放双方的前 4 个移动，它只会给我 5 个可能的移动）但是它会在每个移动中放置相同的移动包含 * 的位置。（所以它最终会为可能的第二步生成类似 X,O,O,O,O,O,O,O,O 的东西）

这不是我第一次不得不使用 minmax，但这是我第一次不得不在 python 中使用它。

有关如何解决此问题的任何建议都会有所帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:11:55.240

这条线有问题：

```
tempBoard = genBoard 
```

在这一行之后，您似乎认为您有*两个*列表 - 原始列表，仍然由 引用`genBoard`，以及一个新列表，现在由 引用`tempBoard`。不是这种情况。

此行不会**创建**列表的副本。相反，它绑定名称`tempBoard`以引用绑定到*的同一*对象`genBoard`。

因此，随后对 的引用`tempBoard[i]`也会影响`genBoard[i]`.

请尝试其中一种：

```
tempBoard = list(genBoard)
tempBoard = genBoard[:]
tempBoard = copy.copy(genBoard) 
```

这些行中的每一行都会创建一个新列表，其初始内容与`genBoard`. `tempboard`绑定到这个新列表，同时`genboard`仍然绑定到旧列表。

如果有问题的对象比字符串列表更复杂，您可能需要这样做：

```
tempBoard = copy.deepcopy(genBoard) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:55:39.830

我相信 Python 不会创建您的 Board 的副本，而只是指向原始版本。因此您的打印输出是：

*"移动列表：" [[0,(X,O,O,O,O,O,O,O,O)],[1,(X,O,O,O,O,O,O,O,O )],[2,(X,O,O,O,O,O,O,O,O)]*等。

并且您的 genBoard, 变量已更改。

测试添加

*打印板*

在你的方法结束之前

如果这确实是问题，请尝试谷歌如何创建您的董事会副本而不是引用它。

# c# - 未知的 Web 方法参数方法名称

> ID：15576696
> 
> 赞同：0
> 
> 时间：2013-03-22T17:43:10.380
> 
> 标签：c#, asp.net, jquery

我正在构建一个 Web 应用程序，我试图在 WebForm 中调用一个 WebMethod，我已经尝试了谷歌中的每个页面，但我仍然一无所获。这是 Jquery Ajax 调用的示例

```
$.ajax({
            type: "Post",
            url: "Default.aspx/Return",
            data: {dato:'Hello'},
            contentType: "application/json; chartset:utf-8",
            dataType: "json",
            success:
                    function (result) {
                        if (result.d) {
                            alert(result.d);
                        }
                    },
            error:
                function (XmlHttpError, error, description) {
                    $("#grdEmpleados").html(XmlHttpError.responseText);
                },
            async: true
        }); 
```

这是代码隐藏中的 WebMethod

```
[WebMethod]
    [ScriptMethod(ResponseFormat=ResponseFormat.Json)]
    public static string Return(string dato)
    {
        return dato;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-19T21:58:11.870

您不能以这种方式访问​​静态方法。删除“静态”引用，它将起作用。另外，就像其他人所说的那样 - 不要将其用作您的方法名称“Return”。

```
[WebMethod]
[ScriptMethod(ResponseFormat=ResponseFormat.Json)]
public string Return(string dato)
{
    return dato;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:57:08.093

尝试这个

```
var url = window.location.pathname + "/Return";
$.ajax({
        type: "Post",
        url: url,
        data: {dato:'Hello'},
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success:
                function (result) {

                        alert(result.d);

                },
        error:
            function (XmlHttpError, error, description) {
                $("#grdEmpleados").html(XmlHttpError.responseText);
            },
        async: true
    });` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:48:12.737

我认为，在您的成功事件中，使用了带有结果的函数，它是一个字符串，并且您正在尝试访问名为 d 的属性，假设结果是一个对象。仅`alert(result);` 使用 User F12 工具来调试并找到您的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:48:58.147

确保您在 ScriptManager 元素中启用了页面方法：

```
<asp:ScriptManager ID="scriptManager" runat="server" EnablePageMethods="true" /> 
```

和你的方法

```
$.ajax({
            type: "Post",
            url: '<%= ResolveUrl("~/Default.aspx/Return") %>',
            data: {dato:'Hello'},
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success:
                    function (result) {

                            alert(result);

                    },
            error:
                function (XmlHttpError, error, description) {
                    $("#grdEmpleados").html(XmlHttpError.responseText);
                },
            async: true
        }); 
```

# android - Android：获取基站和相邻小区的 CellID 和 RSS

> ID：15576701
> 
> 赞同：6
> 
> 时间：2013-03-22T17:43:28.383
> 
> 标签：android, telephony, telephonymanager, cellid, phone-state-listener

我正在尝试获取以下数据：

*   基站：CellID和RSS（识别哪一个是基站）
*   对于所有相邻站：CellID 和 RSS

有各种 API，看起来我必须使用不同的 API telephonyManager 和 PhoneStateListener。我有点困惑，因为我认为这应该在一个界面中可用。此外，我认为应该可以轮询当前基站的 CellID，而不必通过监听状态变化来确定 int，因为相邻的基站也可以从 telephonyManager 轮询。

你能告诉我如何获得上面指定的数据吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T04:09:49.500

新的 skool-way：API 17 更好更干净，但仍然太新。

```
List<CellInfo> cellInfos = (List<CellInfo>) this.telephonyManager.getAllCellInfo();

for(CellInfo cellInfo : cellInfos)
{
    CellInfoGsm cellInfoGsm = (CellInfoGsm) cellInfo;

    CellIdentityGsm cellIdentity = cellInfoGsm.getCellIdentity();
    CellSignalStrengthGsm cellSignalStrengthGsm = cellInfoGsm.getCellSignalStrength();

    Log.d("cell", "registered: "+cellInfoGsm.isRegistered());
    Log.d("cell", cellIdentity.toString());         
    Log.d("cell", cellSignalStrengthGsm.toString());
} 
```

旧的 API 没有提供非常令人满意的解决方案。但这是老派的方式：

```
this.telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
this.phoneStateListener = setupPhoneStateListener();
this.telephonyManager.listen(phoneStateListener, PhoneStateListener.LISTEN_CELL_LOCATION);
this.telephonyManager.listen(phoneStateListener, PhoneStateListener.LISTEN_DATA_CONNECTION_STATE);
this.telephonyManager.listen(phoneStateListener, PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);

// This part is used to listen for properties of the neighboring cells
List<NeighboringCellInfo> neighboringCellInfos = this.telephonyManager.getNeighboringCellInfo();
for(NeighboringCellInfo neighboringCellInfo : neighboringCellInfos)
{
    neighboringCellInfo.getCid();
    neighboringCellInfo.getLac();
    neighboringCellInfo.getPsc();
    neighboringCellInfo.getNetworkType();
    neighboringCellInfo.getRssi();

    Log.d("cellp",neighboringCellInfo.toString());
}

public PhoneStateListener setupPhoneStateListener()
{
    return new PhoneStateListener() {

        /** Callback invoked when device cell location changes. */
        @SuppressLint("NewApi")
        public void onCellLocationChanged(CellLocation location)
        {
            GsmCellLocation gsmCellLocation = (GsmCellLocation) location;
            gsmCellLocation.getCid();
            gsmCellLocation.getLac();
            gsmCellLocation.getPsc();

            Log.d("cellp", "registered: "+gsmCellLocation.toString());
        }

        /** invoked when data connection state changes (only way to get the network type) */
        public void onDataConnectionStateChanged(int state, int networkType)
        {
            Log.d("cellp", "registered: "+networkType);
        }

        /** Callback invoked when network signal strengths changes. */
        public void onSignalStrengthsChanged(SignalStrength signalStrength)
        {
            Log.d("cellp", "registered: "+signalStrength.getGsmSignalStrength());
        }

    };
} 
```

*   不要忘记设置所有必要的权限这个解决方案的问题是，我没有得到任何相邻的单元格信息，即使我设置了：

    使用权限 android:name="android.permission.ACCESS_COARSE_UPDATES"

（请注意，我使用的是三星手机，三星手机不支持列出相邻电池是一个已知问题）

# php - ajax/jquery 的 HTML 选择问题

> ID：15576703
> 
> 赞同：1
> 
> 时间：2013-03-22T17:43:32.340
> 
> 标签：php, jquery, ajax

我有一个 html 表单，下拉列表中的国家/地区来自数据库。如果用户选择任何国家，那么城市下拉菜单将根据所选国家出现。

如果用户错误地输入了表单的任何字段（此表单中还有其他字段），那么国家下拉菜单将记住用户最初选择的国家，但清除城市，将其重置为`--Select City--`。我正在尝试选择**城市名称**，但我不能。任何想法 ？

**Ajax 代码在这里：**

```
<script type="text/javascript" src="http://ajax.googleapis.com/
ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function()
{
$(".country").change(function()
{
var id=$(this).val();
var dataString = 'id='+ id;

$.ajax
({
type: "POST",
url: "ajax_city.php",
data: dataString,
cache: false,
success: function(html)
{
$(".city").html(html);
} 
});

});
});
</script> 
```

**ajax_city.php 在这里**

```
<?php
require_once("toplevel/content/database/databd.php");
if($_POST['id'])
{
$id=$_POST['id'];
$sql=mysql_query("select Name from cities WHERE CountryCode ='$id'");

while($row=mysql_fetch_array($sql))
{
$id=$row['Code'];
$data=$row['Name'];

if($_POST['city'] == $data)
{
    $sel = 'selected = "selected"'; 
}
else
{
    $sel = " ";
}

echo '<option value="'.$data.'" ' .$sel . ' >'.$data.'</option>';
} 
}
?> 
```

**此处为 HTML 格式：**

```
<tr>
    <td>PAYS <span style="color: #FF0000;">*</span></td>
    <td>
<select name="country" class="country">
<option value="">Select</option>

<?php
    $sql=mysql_query("select * from country");
    while($row=mysql_fetch_array($sql))
    {
    $id=$row['Code'];
    $data=$row['Name'];

    $data = mb_convert_encoding($data, 'UTF-8');

if($id == $_POST['country'])
    {
        $sel = 'selected="selected"';
    }
    else
    {
        $sel = "";
    }

    echo '<option value="'.$id.'"' . $sel . '>'.$data.'</option>';
    }
?>
</select>   
</td>
</tr>   

<tr>
<td>City</td>
    <td>
    <select class="city" name="city">
<option selected="selected" value="">--Select City--</option>
</select>   
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:54:57.217

不太确定，但问题在于`datastring`尝试更改：

```
 $(".country").change(function(){
     var id=$(this).val();
     var dataString = {'id': id};

     $.ajax({
        type: "POST",
        url: "ajax_city.php",
        data: dataString,
        cache: false,
        success: function(html){
           $(".city").html(html);
        } 
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:02:52.280

您将需要在重新加载时重建 HTML，但现在使用您的城市列表（这是未经测试的，但基于国家下拉列表中的代码）：

```
<tr>
    <td>City</td>
    <td>
        <select class="city" name="city">
            <option selected="selected" value="">--Select City--</option>
            <?php
                if (isset($_POST['city']) {
                    $sql=mysql_query("select * from city");
                    while($row=mysql_fetch_array($sql))
                    {
                        $id=$row['Code'];
                        $data=$row['Name'];

                        $data = mb_convert_encoding($data, 'UTF-8');

                        if($id == $_POST['city']) { $sel = 'selected="selected"'; }
                        else { $sel = ""; }

                        echo '<option value="'.$id.'"' . $sel . '>'.$data.'</option>';
                    }
                }
            ?>
        </select>   
    </td>
</tr> 
```

警告：这只是相同的示例代码。这永远不应该投入生产，因为它有可能非常不安全！正如@PolishPrince 上面指出的那样，您至少应该使用 PDO 或 MySQLi。

# python - 加快 HTTP 请求 python 和 500 错误

> ID：15576704
> 
> 赞同：0
> 
> 时间：2013-03-22T17:43:53.077
> 
> 标签：python, http, web-scraping, web-crawler

我有一个代码，它使用查询和时间框架（可能长达一年）从这份[报纸中检索新闻结果。](http://www.gulf-times.com/)

结果每页最多分页 10 篇文章，由于我找不到增加它的方法，我为每个页面发出请求，然后检索每篇文章的标题、网址和日期。每个周期（HTTP 请求和解析）需要 30 秒到一分钟，这非常慢。最终它将以 500 的响应代码停止。我想知道是否有办法加快它的速度，或者一次发出多个请求。我只是想检索所有页面中的文章详细信息。这是代码：

```
 import requests
    import re
    from bs4 import BeautifulSoup
    import csv

    URL = 'http://www.gulf-times.com/AdvanceSearchNews.aspx?Pageindex={index}&keywordtitle={query}&keywordbrief={query}&keywordbody={query}&category=&timeframe=&datefrom={datefrom}&dateTo={dateto}&isTimeFrame=0'

    def run(**params):
        countryFile = open("EgyptDaybyDay.csv","a")
        i=1
        results = True
        while results:
                    params["index"]=str(i)
                    response = requests.get(URL.format(**params))
                    print response.status_code
                    htmlFile = BeautifulSoup(response.content)
                    articles = htmlFile.findAll("div", { "class" : "newslist" })

                    for article in articles:
                                url =  (article.a['href']).encode('utf-8','ignore')
                                title = (article.img['alt']).encode('utf-8','ignore')
                                dateline = article.find("div",{"class": "floatright"})
                                m = re.search("([0-9]{2}\-[0-9]{2}\-[0-9]{4})", dateline.string)
                                date =  m.group(1)
                                w = csv.writer(countryFile,delimiter=',',quotechar='|', quoting=csv.QUOTE_MINIMAL)
                                w.writerow((date, title, url ))

                    if not articles:
                                results = False
                    i+=1
        countryFile.close()

    run(query="Egypt", datefrom="12-01-2010", dateto="12-01-2011") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:57:18.727

最可能减慢速度的是服务器，因此并行化 http 请求将是使代码运行得更快的最佳方法，尽管您几乎无法加快服务器响应速度。[IBM](http://www.ibm.com/developerworks/aix/library/au-threadingpython/)有一个很好的教程可以做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:04:30.300

这是试用[gevent](http://www.gevent.org/)的好机会。

您应该为 request.get 部分设置一个单独的例程，这样您的应用程序就不必等待 IO 阻塞。

然后，您可以生成多个工作人员并有队列来传递请求和文章。也许与此类似：

```
import gevent.monkey
from gevent.queue import Queue
from gevent import sleep
gevent.monkey.patch_all()

MAX_REQUESTS = 10

requests = Queue(MAX_REQUESTS)
articles = Queue()

mock_responses = range(100)
mock_responses.reverse()

def request():
    print "worker started"
    while True:
        print "request %s" % requests.get()
        sleep(1)

        try:
            articles.put('article response %s' % mock_responses.pop())
        except IndexError:
            articles.put(StopIteration)
            break

def run():
    print "run"

    i = 1
    while True:
        requests.put(i)
        i += 1

if __name__ == '__main__':
    for worker in range(MAX_REQUESTS):
        gevent.spawn(request)

    gevent.spawn(run)
    for article in articles:
        print "Got article: %s" % article 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:56:51.353

This might very well come close to what you're looking for.

[Ideal method for sending multiple HTTP requests over Python? [duplicate]](https://stackoverflow.com/a/10559969/1737276)

Source code: [https://github.com/kennethreitz/grequests](https://github.com/kennethreitz/grequests)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:51:10.197

您可以尝试异步进行所有调用。

看看这个： http: [//pythonquirks.blogspot.in/2011/04/twisted-asynchronous-http-request.html](http://pythonquirks.blogspot.in/2011/04/twisted-asynchronous-http-request.html)

您也可以使用 gevent 而不是扭曲，但只是告诉您选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T20:49:49.993

在我看来，您正在寻找该报纸不做广告的提要。然而，这是一个以前已经解决的问题——有许多网站会为您生成任意网站的提要，因此至少可以解决您的一个问题。其中一些需要一些人工指导，而另一些则调整的机会较少并且更加自动化。

如果您完全可以避免自己进行分页和解析，我会推荐它。如果你不能，`gevent`为了简单起见，我支持使用。也就是说，如果他们将您退回 500 个，您的代码可能就不那么成问题了，并且增加并行性可能无济于事。

# python - 通过 python lxml tree.xpath 解析 xml

> ID：15576706
> 
> 赞同：1
> 
> 时间：2013-03-22T17:44:03.520
> 
> 标签：python, xml, xpath, lxml

我尝试解析一个巨大的文件。示例如下。我试着接受`<Name>`，但我不能它只有在没有这个字符串的情况下才能工作

```
<LevelLayout xmlns="http://schemas.datacontract.org/2004/07/ArcherTech.Common.Domain" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"> 
```

```
xml2 = '''<?xml version="1.0" encoding="UTF-8"?>
<PackageLevelLayout>
<LevelLayouts>
    <LevelLayout levelGuid="4a54f032-325e-4988-8621-2cb7b49d8432">
                <LevelLayout xmlns="http://schemas.datacontract.org/2004/07/ArcherTech.Common.Domain" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
                    <LevelLayoutSectionBase>
                        <LevelLayoutItemBase>
                            <Name>Tracking ID</Name>
                        </LevelLayoutItemBase>
                    </LevelLayoutSectionBase>
                </LevelLayout>
            </LevelLayout>
    </LevelLayouts>
</PackageLevelLayout>'''

from lxml import etree
tree = etree.XML(xml2)
nodes = tree.xpath('/PackageLevelLayout/LevelLayouts/LevelLayout[@levelGuid="4a54f032-325e-4988-8621-2cb7b49d8432"]/LevelLayout/LevelLayoutSectionBase/LevelLayoutItemBase/Name')
print nodes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:49:38.607

您的嵌套`LevelLayout`XML 文档使用命名空间。我会使用：

```
tree.xpath('.//LevelLayout[@levelGuid="4a54f032-325e-4988-8621-2cb7b49d8432"]//*[local-name()="Name"]') 
```

将`Name`元素与较短的 XPath 表达式匹配（完全忽略命名空间）。

另一种方法是使用前缀到命名空间的映射并在标签上使用它们：

```
nsmap = {'acd': 'http://schemas.datacontract.org/2004/07/ArcherTech.Common.Domain'}

tree.xpath('/PackageLevelLayout/LevelLayouts/LevelLayout[@levelGuid="4a54f032-325e-4988-8621-2cb7b49d8432"]/acd:LevelLayout/acd:LevelLayoutSectionBase/acd:LevelLayoutItemBase/acd:Name',
    namespaces=nsmap) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:00:20.447

`lxml`的`xpath`方法有一个[`namespaces`参数](http://lxml.de/xpathxslt.html#namespaces-and-prefixes)。您可以将字典映射命名空间前缀传递给命名空间。然后你可以引用`XPath`使用命名空间前缀的 build ：

```
xml2 = '''<?xml version="1.0" encoding="UTF-8"?>
<PackageLevelLayout>
<LevelLayouts>
    <LevelLayout levelGuid="4a54f032-325e-4988-8621-2cb7b49d8432">
                <LevelLayout xmlns="http://schemas.datacontract.org/2004/07/ArcherTech.Common.Domain" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
                    <LevelLayoutSectionBase>
                        <LevelLayoutItemBase>
                            <Name>Tracking ID</Name>
                        </LevelLayoutItemBase>
                    </LevelLayoutSectionBase>
                </LevelLayout>
            </LevelLayout>
    </LevelLayouts>
</PackageLevelLayout>'''

namespaces={'ns': 'http://schemas.datacontract.org/2004/07/ArcherTech.Common.Domain',
            'i': 'http://www.w3.org/2001/XMLSchema-instance'}

import lxml.etree as ET
# This is an lxml.etree._Element, not a tree, so don't call it tree
root = ET.XML(xml2)

nodes = root.xpath(
    '''/PackageLevelLayout/LevelLayouts/LevelLayout[@levelGuid="4a54f032-325e-4988-8621-2cb7b49d8432"]
       /ns:LevelLayout/ns:LevelLayoutSectionBase/ns:LevelLayoutItemBase/ns:Name''', namespaces = namespaces)
print nodes 
```

产量

```
[<Element {http://schemas.datacontract.org/2004/07/ArcherTech.Common.Domain}Name at 0xb74974dc>] 
```

# label - 打勾标签破坏（自动换行）

> ID：15576708
> 
> 赞同：0
> 
> 时间：2013-03-22T17:44:09.247
> 
> 标签：label, jqplot, textlabel

我在用jqPlot 看右下角

左边是正确的，但右边不是。

![图片](../Images/79f51db1e8052b0b6c39e714eee5f1e1.png) **有一种方法可以修复刻度标签上的自动换行吗？**

编辑：

```
    $(文档).ready(函数(){
      var plot2 = $.jqplot ('图表线', [[["2013-03-22",1],["2013-03-23",0],["2013-03-24",0] ,["2013-03-25",2],["2013-03-26",19],["2013-03-27",7],["2013-03-28",4]]]
      , {
          title: ' Total de alertas por dia ',

          系列默认值：{
            填充：真，
                    颜色：“钢蓝”，
              渲染器选项：{

                 平滑：真实
              },
              点标签：{ 显示：真 }
          },
          轴：{
            坐标轴：{

               渲染器：$.jqplot.DateAxisRenderer，
               勾选选项：{
                    formatString: '%F',//'%Q',
                    文本颜色：'黑色'，
                    字体大小：'11px'，
                    标签位置：'自动'
                }
            },
            y轴：{
                分钟：0，
                滴答渲染器：$.jqplot.CanvasAxisTickRenderer
            }
          }
        });

```

编辑：这是 HTML

```
<style>
.ComBordaRedonda {
    border:1px solid #dadada;
    border-radius:3px;
    padding:5px;
    font-size: 10pt;
    font-family: Calibri;
}
</style>
<div class="ComBordaRedonda" style = "float: right;background-color:#FFFFFF;width: 57%; height: 300px;">
    <div id = "chart-line" style = "width: 90%; height: 95%;margin:auto">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:23:35.407

我修好了它。我忘了在页面中包含 jqPlot 的 css。

谢谢nick_w！

# javascript - 使用 TypeScript 描述符文件的方法，例如 Knockout.d.ts

> ID：15576709
> 
> 赞同：1
> 
> 时间：2013-03-22T17:44:12.307
> 
> 标签：javascript, knockout.js, typescript

我刚刚查看了一些示例

[https://github.com/borisyankov/DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped)

并注意到其中的一些库并不像我想象的那么容易上手和使用，但这可能是因为我还是 TypeScript 节目的新手。

所以让我印象深刻的第一件事（使用 Knockout 作为这里的例子），它都没有包含在一个模块中，我真的不认为这是一个主要问题，可能更多的是由谁做它的设计决定，但它看起来像它会更有意义（可能是因为我倾向于比其他语言做更多的 C#），因为它是自包含的，并且更容易在命名空间下包含其他插件：

`i.e Knockout.ObservableString();`

无论如何，第二点更多的是关于如何在现实世界的场景中使用这些实现，通常我会这样做：

```
function SomeClass() {
    var self = this;

    self.SomeObservable = ko.observable("default-value");
} 
```

现在我期待做这样的事情：

```
/// The Ref
interface ISomeClass {
    SomeObservable: KnockoutObservableString;
}

class SomeClass implements ISomeClass {
    // What goes here?
} 
```

现在假装有一些合乎逻辑的理由让我的 POJO（我想它现在应该被称为 POTO）一个接口然后实现它，因为通常我不会费心将接口放在任何具有 0 行为的东西上。

现在在上面的示例中，接口会很好，因为有一个`KnockoutObservableString`接口，但是我找不到实现，所以我不是打算使用该接口还是应该制作自己的实现？

我可以与某人一起为我指明方向并回答：

```
A) Why it wasn't written as a module?
B) How do you actually use the descriptors properly? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:51:03.033

描述符用于将类型应用于现有的 javascript 库，但它们不会重新定义库接口或在编译为 javascript 时导致任何更改。我认为这与您的两个问题有关：

A) 不能在模块中定义敲除描述符，因为敲除将 ko 定义为全局变量。假设`ko`已经在一个`Knockout`模块内定义了描述符。然后由 typescript 生成的生成的 javascript 将类似于`SomeObservable = Knockout.ko.observable("default-value")`，这是无效的。

B）在大多数情况下，在打字稿中调用敲除看起来与 javascript 相同。所以你可以做这样的事情：

```
class SomeClass implements ISomeClass {
    SomeObservable = ko.observable("default-value");
} 
```

描述符文件为 ko.observable 定义了几个重载，接受字符串参数的重载返回一个 KnockoutObservableString。所以 ko 的实现和使用并没有真正改变太多......描述符真正给你的唯一东西是更多的类型安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T22:54:06.123

是的，我想我可能对这一切有更多的想法......

现在回答 B）我认为您应该通过包含它们来使用它们，例如：

`declare var ko: KnockoutStatic`

但是，如果您查看淘汰描述符的底部，它已经为您完成了，然后我认为您打算将接口用于您制作的接口，然后将 ko.xxx 用于您的实际实现，如下所示：

```
/// <reference path="knockout.d.ts" />

interface IPerson
{
    Forename: KnockoutObservableString;
    Surname: KnockoutObservableString;
}

class Person implements IPerson
{
    Forename = new ko.observable("");
    Surname = new ko.observable("");
} 
```

虽然 Rubymine 5 似乎认为分配给 Forename 和 Surname 是无效的，但我不知道为什么 Visual Studio 似乎认为它没问题。

所以我希望其他人可以在这里验证我在正确的轨道上。

# aem - 在 Adob e CQ5 中继承对话框

> ID：15576718
> 
> 赞同：0
> 
> 时间：2013-03-22T17:44:43.020
> 
> 标签：aem

我正在尝试通过继承基本组件的对话框来实现组件对话框。使用两次时，我遇到了对话框问题。

**基础组件**

*   对话
    *   文本（名称：“./text/content”）

**其他组件**

*   对话
    *   文本（从基础继承）
    *   文本（从基础继承）
    *   设置
    *   其他

问题在于它也继承了名称，并且看起来您无法覆盖它。如果它们以相同的名称继承，如何让我的 jsp 打印出这两个富文本？CQ5 是否提供索引以便它们可以在 JSP 中引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:18:14.727

如果您的计划是在从基础继承的组件的对话框中包含两个富文本区域，那么您必须在基础组件对话框中包含两个具有唯一名称的富文本区域。

对话框的每个输入字段必须具有唯一的名称，否则当在页面上使用时，它们将指向相对于组件的 jcr:content 节点的相同属性路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T15:12:40.367

如上所述，对话框的每个输入字段必须具有唯一的名称，否则在页面上使用时，它们将指向相对于组件的 jcr:content 节点的相同属性路径。在这里，这会在识别要引用的 textArea 时混淆 CRX，而不会引用第二个。

# svn - SVN API 查找 dir 是否已版本化

> ID：15576720
> 
> 赞同：0
> 
> 时间：2013-03-22T17:45:00.487
> 
> 标签：svn, svnkit

我正在使用 SVNKit 中提供的 API 将文件提交到 SVN。

```
ourClientManager.getCommitClient().doCommit(mypaths, kpLocks, "", force-yes, recursive-true); 
```

在签入文件之前，我想知道文件的目录是否是工作副本的一部分。您能否建议我可以使用哪些 API 来获取此信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:54:34.503

作为 SVNKit 开发人员，我建议您使用 SVNWCUtil#isV​​ersionedDirectory 或 SvnOperationFactory#isVersionedDirectory。

SvnOperationFactory#isVersionedDirectory 可以接受“isAdditionMode”参数，用于区分非常特殊的情况：在您的工作副本中，您有一个指向嵌套工作副本的未版本化符号链接。对于除“svn add”之外的所有操作，此符号链接应被视为版本，因为它指向工作副本（特别是“svn info this_symlink”显示该嵌套工作副本的信息），但应考虑“svn add”作为未版本化的，让用户将其作为具有 svn:special 属性的文件添加到存储库（而不是显示工作副本已经版本化的错误）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T23:31:03.590

您想使用 status 来解决这个问题：

`ourClientManager.getStatusClient().doStatus(path, false).isVersioned()`

如果您想确定是否有多个文件被版本控制，您可能需要编写一个`ISVNStatusHandler`.

链接到 SVNKit 文档： [http ://svnkit.com/javadoc/org/tmatesoft/svn/core/wc/SVNStatusClient.html](http://svnkit.com/javadoc/org/tmatesoft/svn/core/wc/SVNStatusClient.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:28:09.707

您好，您可以使用以下方法获取已修改和未版本化文件的列表

```
public List<SVNStatus> getCommitableFiles(File path, String revision) throws SVNException {
    SVNClientManager svnClientManager = SVNClientManager.newInstance();
    final List<SVNStatus> allSVNStatus = new ArrayList<SVNStatus>();
    svnClientManager.getStatusClient().doStatus(path, SVNRevision.parse(revision), SVNDepth.INFINITY, false, false, false, false, new ISVNStatusHandler() {
        public void handleStatus(SVNStatus status) throws SVNException {
            SVNStatusType statusType = status.getContentsStatus();
            if (statusType != SVNStatusType.STATUS_NONE && statusType != SVNStatusType.STATUS_NORMAL
                    && statusType != SVNStatusType.STATUS_IGNORED) {
                allSVNStatus.add(status);
            }
        }
    }, null);

    return allSVNStatus;
} 
```

# mapreduce - 我应该在哪里写mapreduce程序

> ID：15576722
> 
> 赞同：0
> 
> 时间：2013-03-22T17:45:01.987
> 
> 标签：mapreduce, elastic-map-reduce

我应该在哪里编写 map-reduce 程序 - 在文本文件或其他文件中？

保存包含 Map-reduce 程序的文件的文件格式是什么？

例如

在 java 中，文本文件，将 java 代码保存为 filename.java 但 map-reduce 程序会是什么？

请回答，因为我非常需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:58:01.210

您可以使用 Java 来实现 Map-reduce 程序。或者，您可以通过 Hadoop Streaming 使用其他语言，包括 Perl、Python、Ruby、C++、PHP 和 R。

Map_reduce 程序将是一个简单的 java 文件，例如命名为 mapreduce.java

此外，关于 Map-Reduce 或 Elastic Map_reduce，您可以在以下方面获得帮助

[http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/emr-what-is-emr.html](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/emr-what-is-emr.html)

或者

[mapreduce 计数示例](https://stackoverflow.com/questions/6164230/mapreduce-count-example)

或者

[http://www.javaworld.com/javaworld/jw-09-2008/jw-09-hadoop.html](http://www.javaworld.com/javaworld/jw-09-2008/jw-09-hadoop.html)

谢谢

# algorithm - 分析算法 - 为什么只有时间复杂度？

> ID：15576730
> 
> 赞同：2
> 
> 时间：2013-03-22T17:45:24.300
> 
> 标签：algorithm

我正在学习算法和时间复杂度，这个问题突然出现在我的脑海中。

为什么我们只分析算法的时间复杂度？

我的问题是，不应该有另一个指标来分析算法吗？假设我有两个算法 A 和 B。

A 需要 5s 处理 100 个元素，B 需要 1000s 处理 100 个元素。但两人都有`O(n)`时间。

所以这意味着 A 和 B 的时间都比`cn`两个*单独*的常数`c=c1`和的增长慢`c=c2`。但在我非常有限的算法经验中，我们总是忽略这个常数项，只关注增长。但是，在我给定的 A 和 B 示例之间进行选择时，这不是很重要吗？在这里`c1<<c2`，所以 Algo A 比 Algo B 好得多。

还是我在早期阶段想得太多，稍后会进行适当的分析？这叫什么？

或者我的时间复杂度的整个概念是错误的，在我给定的例子中，两者都没有`O(n)`时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:52:19.647

我们担心增长的顺序，因为当输入大小趋于无穷大时，它为算法的行为提供了有用的抽象。

符号“隐藏”的常数`O`很重要，但它们也**难以**计算，因为它们取决于以下因素：

*   用于实现算法的特定编程语言
*   正在使用的特定编译器
*   底层 CPU 架构

我们可以尝试**估计****这些**，但通常这是一个失败的原因，除非我们做出一些简化的假设并在一些定义良好的计算模型上工作，比如[RAM](http://www.cs.washington.edu/education/courses/csep521/97au/notes/lect1-scribe/node3.html)模型。

但是，我们又回到了抽象的世界，正是我们开始的地方！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:49:48.900

我们测量[了许多其他类型的复杂性](http://en.wikipedia.org/wiki/Computational_complexity_theory#Complexity_measures)。

*   [空间（内存使用）](http://en.wikipedia.org/wiki/PSPACE)
*   [电路深度/尺寸](http://en.wikipedia.org/wiki/Circuit_complexity)
*   [网络流量/交互量](http://en.wikipedia.org/wiki/Arthur%E2%80%93Merlin_protocol)
*   [IO / 缓存命中](http://en.wikipedia.org/wiki/Cache_oblivious)

但我想你更多地谈论的是“常数不重要吗？” 方法。是的，他们有。忽略常量有用的原因是它们不断变化。不同的机器以不同的速度执行不同的操作。您必须在一般有用和在特定机器上有用之间划清界限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:54:30.230

这并不总是时间。还有空间。

至于 O() 给你的渐近时间成本/复杂度，如果你有很多数据，那么，例如，O(n ² )=n ²会比 O(n)=100* n 表示 n>100。对于较小的 n，您应该更喜欢这个 O(n ² )。

而且，显然，O(n)=100*n 总是比 O(n)=10*n 差。

你的问题的细节应该有助于你在几个可能的解决方案（算法的选择）之间做出决定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:52:32.427

> A 需要 5s 处理 100 个元素，B 需要 1000s 处理 100 个元素。但两者都有 O(n) 时间。

这是为什么？
`O(N)`是相对于程序输入执行程序所需的步骤数的*渐近测量。*
这意味着对于非常大的值，`N`算法的复杂性是线性增长的。
我们不比较`X`和`Y`秒。我们分析算法在输入变得越来越大时的表现

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T17:53:04.763

O(n) 让您知道对于不同的 n，相同的算法会慢多少，而不是比较算法。另一方面，还有空间复杂性——内存使用量如何随着输入 n 的函数增长。

# c# - 如何让这个简单的 WCF REST 客户端工作？

> ID：15576734
> 
> 赞同：0
> 
> 时间：2013-03-22T17:45:44.647
> 
> 标签：c#, json, wcf, rest

我尝试从我的应用程序内部调用此 URI：[http ://data.mtgox.com/api/1/BTCEUR/ticker?raw](http://data.mtgox.com/api/1/BTCEUR/ticker?raw)

将此代码用作 ServiceContract：

```
[ServiceContract(Namespace = "/api/1")]
public interface ITickerService
{
    //base uri: "http://data.mtgox.com";

    [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json,
            UriTemplate = "{ident}{currency}/ticker?raw")]
    String GetTicker(String ident, String currency);
} 
```

而这个调用代码

```
BasicHttpBinding myBinding = new BasicHttpBinding();

EndpointAddress mtGoxEndpoint = new EndpointAddress("http://data.mtgox.com/");
ChannelFactory<ITickerService> channelFactory = new ChannelFactory<ITickerService>(myBinding, mtGoxEndpoint);

ITickerService tickerService = channelFactory.CreateChannel();

// Stops here till timeout after 1 min
var result = tickerService.GetTicker("BTC", "EUR"); 
```

任何想法有什么问题？

坦克，塔里昂

# rake - rake neo4j：创建错误 rake 中止

> ID：15576737
> 
> 赞同：1
> 
> 时间：2013-03-22T17:45:48.427
> 
> 标签：rake, neo4j

```
>sudo rake neo4j:create --trace                                     [ 6:18PM] 
```

耙中止！不知道如何构建任务 'neo4j:create' /usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task_manager.rb:49:in `[]' /usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:115:in`invoke_task' /usr/lib/ ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level' /usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in`each' /usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/ application.rb:94:in `top_level' /usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in`standard_exception_handling' /usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level' /usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:66:in`run' /usr/lib/ruby/gems/ 1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling' /usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:63:in`run' /usr/lib/ruby/gems/1.8/gems/rake-0.9.2.2/bin/rake:33 /usr/ bin/rake:19:in `load' /usr/bin/rake:19

此错误的可能原因是什么。我正在关注neo4j 和d3.js 的maxdemarzi 介绍。

如果有人能提出解决方案，我将不胜感激 [https://github.com/maxdemarzi/d3_js_intro](https://github.com/maxdemarzi/d3_js_intro)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:51:33.513

我已经更新了项目，所以它现在可以工作了。请运行：

```
git pull                             # Get the latest code
bundle install                       # Update the project gems
rake neo4j:reset_yes_i_am_sure       # Reset the Neo4j Server
rake neo4j:create 
```

如果您仍有问题，请联系我。

问候， 马克斯

# javascript - 动态更新 X3DOM 模型中的纹理

> ID：15576740
> 
> 赞同：3
> 
> 时间：2013-03-22T17:46:04.647
> 
> 标签：javascript, html, textures, x3d, x3dom

我正在开发一个 Web 3D 应用程序，并在 Javascript 中生成了一些代码，这些代码在 iframe 中将以下标记实现到带有模型的外部 .html 文件中。

在`<appearance>`外部 .html 文件的 X3D 代码块中的元素中：

```
<texture id="XXX" repeats="true" repeatt="true" url="" scale="true"
hidechildren="true">
<img src="" attr=".../BMW.jpg" style="display: none; visibility: hidden;">
</texture> 
```

单击按钮后，将上述代码放置在 iframe 中的适当块中的 Javascript 代码：

```
ogl = true;
function toggleTexture(){
if (!ogl) {
    var t = document.createElement("Texture");
    t.setAttribute("id", "XXX");
    t.setAttribute("repeatS", "true");
    t.setAttribute("repeatT", "true");
    var imgElement = document.createElement("img");
    imgElement.setAttribute("src", "../HomeFurniture/assets/BMW.jpg");
    t.appendChild(imgElement);

    var iframe = document.getElementById("frame");
    var innerDoc = (iframe.contentDocument) ? iframe.contentDocument : iframe.contentWindow.document;
    innerDoc.getElementById("anApp").appendChild(t);
    innderDoc.x3dom.reload();
} else {
    var iframe = document.getElementById("frame");
    var innerDoc = (iframe.contentDocument) ? iframe.contentDocument : iframe.contentWindow.document;
    var ot = innerDoc.getElementById("anApp");
    ot.removeChild(innerDoc.getElementById('XXX'));
}

return false;
} 
```

Chrome浏览器调试结果显示插入了需要的代码，但实际模型没有更新合适的纹理。

一定有一些我想念的东西，但我找不到解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:06:04.550

已修复：问题出在谷歌浏览器上。我在 Mozilla Firefox 中测试了 Web 应用程序，一切正常 :)

此外，我尝试了子 html 文件中的 Javascript 代码，它可以在 Chrome 中运行。当父 html 文件在 iframe 块中加载子 html 文件时，它只是拒绝工作。

# javascript - asp.net 复制表格到剪贴板

> ID：15576741
> 
> 赞同：0
> 
> 时间：2013-03-22T17:46:06.370
> 
> 标签：javascript, c#, asp.net, clipboard

如何将 asp:Table 的内容复制到剪贴板，以便可以将其粘贴到 Excel 等内容中？

我假设某种 JavaScript 是必需的？

对于 winforms，使用 Clipboard 对象很容易，但对于 asp.net 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:49:08.010

浏览器的问题在于剪贴板访问通常是特权访问，因此您最终需要像 Flash 这样的东西。

有一个不错的库，我用过几次叫做 ZeroClipboard - [https://github.com/jonrohan/ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:33:54.463

我在某处看到的一种技术是打开一个弹出窗口，将数据复制到其中，预先选择它，然后告诉用户按 CTRL+C。听起来很傻，但对用户来说很容易，并且不需要任何特殊权限。

我开始在一些网站上使用它，我的用户喜欢它。一切都在 jQuery 中完成。这是用户想要将 HTML 表格复制到 Excel 中的事务的屏幕截图。单击“导出到 Excel”按钮会产生此...

![在此处输入图像描述](../Images/dbe68e1cd3d6c560b71cea1b4178768a.png)

# jquery - Symfony2 Ajax jQuery

> ID：15576743
> 
> 赞同：2
> 
> 时间：2013-03-22T17:46:08.493
> 
> 标签：jquery, ajax, symfony

我在试图让 Symfony 和 ajax 相互配合时遇到了一些问题。我是 Symfony 和 ajax 整个世界的新手，所以请放轻松。我确信我的代码是一场噩梦，但我正在学习:)

我可以在没有 Ajax 的情况下创建一个表单并将我的数据发布到 Symfony（通过 URL 发布）但是，当我尝试通过 ajax（完全相同的表单）进行操作时，我得到一个 400 的 json 响应。我知道它必须与 Symfony 无法理解进入其中的帖子数据有关。在我的控制器操作中，它处理得很好，直到它到达“if($form->isValid())”部分，这是 Symfony 不喜欢我的表单的地方。

这是我的 jQuery ajax 通过表单发送帖子数据：

```
 $(document).ready(function() {
        $("#myForm").submit(function(){

            // My form
            var $form = $(this).closest("#myForm");

            // If valid
            if($form){

                // The url where the form is being posted via ajax
                var url = $("#myForm").attr("action");

                // Post the data
                $.post(url,{
                    type: "POST",
                    data: $form.serialize(), // serializing the data being sent 
                    cache: false
                },function(data){

                    // If valid
                    if(data.responseCode == 200 ){
                        alert(data.responseCode);
                    }
                    else if(data.responseCode==400){
                        alert(data.responseCode);
                    }else{
                        alert("bad response all together...");
                    }
                }); 
            }
            return false;
        });
    }); 
```

这是我通过 Symfony 表单构建器创建的表单：

```
 <form novalidate class="form-horizontal" id="myForm" action="/symfonydev/web/app_dev.php/warehouse/ajax/insert/" method="POST" >
 <input type="text" id="warehouse_name" name="warehouse[name]" required="required" placeholder="Location Name" class="input-block-level" value="" />
 <input type="text" id="warehouse_address" name="warehouse[address]" required="required" placeholder="Address" class="input-block-level" value="" />
 <input type="text" id="warehouse_city" name="warehouse[city]" required="required" placeholder="City" class="input-block-level" value="" />
 <input type="text" id="warehouse_state" name="warehouse[state]" required="required" placeholder="State" class="input-block-level" value="" />
 <input type="text" id="warehouse_zip" name="warehouse[zip]" required="required" placeholder="Zip" class="input-block-level" value="" />
 <input type="text" id="warehouse_email" name="warehouse[email]" required="required" placeholder="Email Address" class="input-block-level" value="" />
 <input type="text" id="warehouse_phone" name="warehouse[phone]" required="required" placeholder="Phone" class="input-block-level" value="" />
 <input type="text" id="warehouse_fax" name="warehouse[fax]" required="required" placeholder="fax" class="input-block-level" value="" />
 <input type="hidden" id="warehouse__token" name="warehouse[_token]" value="5352017c711a3a9d87ca9158334b32ab9f1dd3af" />
 <input type="submit" value="Send" />
 </form> 
```

也许是因为表单变量的序列化字符串是 url 编码的，Symfony 是否无法将它们解析出来以将它们保存到数据库中？当 ajax 通过序列化字符串发布数据时，字段名称是这样的 url 编码的。

```
 warehouse%5Bname%5D=Test&warehouse%5Baddress%5D=Test&warehouse%5Bcity%5D=Test&warehouse%5Bstate%5D=Test&warehouse%5Bzip%5D=Test&warehouse%5Bemail%5D=Test&warehouse%5Bphone%5D=Test&warehouse%5Bfax%5D=Test&warehouse%5B_token%5D=5352017c711a3a9d87ca9158334b32ab9f1dd3af 
```

这是我的控制器动作：

```
 public function ajaxinsertAction(Request $request)
{

    // Get user's account
    $account = $this->getUser()->getAccount();

    // Warehouse form
    $warehouse = new Warehouse();
    $form = $this->createForm(new WarehouseType(), $warehouse);

    if ($request->isMethod('POST')) {

        // Get the Account of this user and set it on the warehouse being created.
        $account = $this->getUser()->getAccount();
        $warehouse->setAccount($account);
        $form->bind($request);

        if ($form->isValid()) {

            $em = $this->getDoctrine()->getManager();
            $em->persist($warehouse);
            $em->flush();

            $return = array("responseCode"=>200, "response"=>"Valid");
            $return = json_encode($return); // json encode the array
            return new Response($return,200,array('Content-Type'=>'application/json'));
            die;

        }else{

            $return = array("responseCode"=>400, "response"=>"Invalid");
            $return = json_encode($return); // json encode the array
            return new Response($return,400,array('Content-Type'=>'application/json'));
            die;
        }
    }
} 
```

谢谢你的帮助！

谁有关于 Symfony 和 Ajax 的好教程？我想了解更多关于这个框架的信息，除了 Symfony 的文档（它们非常好，尽管他们几乎没有关于 ajax 的文档）之外，似乎信息很少。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T16:50:52.860

对于那些在漫长的一天之后寻找类似问题的答案的人，我很沮丧..

我处于非常相似的情况。问题是您提交的是空数据...您提交表单...然后您拉到 DOM。

`var $form = $(this).closest("#myForm");`

应该只是

```
var form=$(this); 

$.post(url, form.serialize(), function(data) {

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:01:06.420

您是否尝试过手动传递值？

```
 ...
               $.post(url,{
                    type: "POST",
                    "warehouse[city]": $('#warehouse_city').val(),
                    "warehouse[state]" : $('#warehouse_state').val(),
                    ...
                    cache: false
                }
                .... 
```

# android - 使用 YouTubePlayerSupportFragment 崩溃

> ID：15576744
> 
> 赞同：1
> 
> 时间：2013-03-22T17:46:10.663
> 
> 标签：android, android-fragments, youtube-api, fragment

我有一个从片段延伸的活动

```
public class Youtube_visor extends Fragment{ ... 
```

以及使用 YouTubePlayerSupportFragment 创建新 YouTube 播放器的方法

这是我的代码：

```
public void playVideo () {

        fragmentManager = getActivity().getSupportFragmentManager();
        fragmentTransaction = fragmentManager.beginTransaction();

        YouTubePlayerSupportFragment player = new YouTubePlayerSupportFragment();
        fragmentTransaction.add(R.id.fragmentz, player); // fragmentz es un linearlayout que hay en el xml
        fragmentTransaction.commit();

        player.initialize(Static_generals.youtubeKey,new OnInitializedListener() {

            public void onInitializationSuccess(Provider arg0,
                    YouTubePlayer arg1, boolean arg2) {
                if (!arg2) {
                    arg1.cueVideo("3OhGkg_XT3o");
                }
            }

            @Override
            public void onInitializationFailure(Provider arg0,YouTubeInitializationResult arg1) {
                // Error
            }
        });
    } 
```

这在平板电脑上完美运行，我有一个包含两个片段的活动，左边是视频列表，右边是创建 YouTube 播放器的片段

我的问题是我不想创建一个新的 YouTubePlayer，我想在 xml 中声明一个并始终使用它。这是在 xml 中声明的片段：

```
 <fragment
      android:name="com.google.android.youtube.player.YouTubePlayerFragment"
      android:id="@+id/youtube_fragment"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"/> 
```

现在，在我的代码中，我替换了这一行：

```
YouTubePlayerSupportFragment player = new YouTubePlayerSupportFragment(); 
```

并把这条新线：

```
YouTubePlayerSupportFragment player = (YouTubePlayerSupportFragment) getActivity().getSupportFragmentManager().findFragmentById(R.id.youtube_fragment); 
```

但总是崩溃。我搜索了有关它的信息，但可用的信息不多，或者没有找到:)

我究竟做错了什么？

我想我把我的片段叫错了，因为当我做一个新的工作正常时

我很感激任何帮助。

谢谢和亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T21:19:43.207

看起来您已将 a`YouTubePlayerFragment`放入 XML 中，但您正试图将其转换为`YouTubePlayerSupportFragment`代码中的 a。尝试替换此行：

```
android:name="com.google.android.youtube.player.YouTubePlayerFragment" 
```

有了这个：

```
android:name="com.google.android.youtube.player.YouTubePlayerSupportFragment" 
```

# mysql - MySQL如何限制第一个“order by”结果

> ID：15576747
> 
> 赞同：1
> 
> 时间：2013-03-22T17:46:17.040
> 
> 标签：mysql, sql-order-by

我有以下 sql 查询：

```
"SELECT id, case, value 
FROM tbl1 
WHERE (case > '100' OR case is null) 
ORDER BY case DESC, value DESC" 
```

结果是这样的：

* * *

```
| id   | case     | value  |
 -------------------------- 
| 17   | case1    | value1 |
| 16   | case2    | value2 |
| 14   | case3    | value3 |
| 18   | empty    | value4 |
| 15   | empty    | value5 | 
```

例如，它给了我 100 个设置“案例”的结果。“case”为空的 500。

现在我只需要“case”为 SET 的 20 个第一个结果和“case”为 EMPTY 的 100 个结果。

如果我执行以下操作：

```
"SELECT id, case, value 
FROM tbl1 ... 
ORDER BY case DESC,value DESC 
LIMIT 0,120" 
```

它给了我设置“case”的所有值......但我只想要 20。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:48:58.083

你最好联合 2 个查询

```
SELECT id, case, value 
FROM tbl1 
WHERE CASE IS NOT NULL
LIMIT 20
UNION
SELECT id, case, value 
FROM tbl1 
WHERE CASE IS NULL
ORDER BY case DESC
LIMIT 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:49:37.790

用一个[`union`](https://dev.mysql.com/doc/refman/5.5/en/union.html)

```
SELECT id, case, value 
FROM tbl1 
WHERE case > '100'
ORDER BY case DESC, value DESC
limit 20
union
SELECT id, case, value 
FROM tbl1 
WHERE case is null
ORDER BY case DESC, value DESC
limit 100 
```

# hibernate - Hibernate代码中抛出的异常，是因为事务吗？

> ID：15576752
> 
> 赞同：0
> 
> 时间：2013-03-22T17:46:31.543
> 
> 标签：hibernate, transactions

大家，我有以下代码，它适用于多个测试系统，但在生产系统上失败，带有`NullPointerException`. Hibernate 为肯定在数据库中的对象返回 null。我认为这可能是由于交易管理不善，但我不确定。有人看到问题吗？下面的代码都使用了一个 Hibernate 包装对象，'db'。创建“db”时，从 Hibernate 的会话工厂创建了一个新的 Session，因此只有下面显示的我的代码使用该 Session。

从 Request 表中获取所有有效 ID 的列表。ID 是主键字段：

```
Criteria criteria = db.getSession().createCriteria(Request.class);
Criterion crit = Restrictions.and(Restrictions.eq("status", "valid"));
criteria.add(crit).setProjection(Projections.property("id"));
List<Integer> results = (List<Integer>)criteria.list();
List<Integer> idList = new ArrayList<Integer>();
for (Integer id : results) idList.add(id); 
```

下面的代码是引发 NullPointerException 的原因。请参阅 catch 块中的代码注释。辅助方法如下所示：

```
for (Integer id : idList){
   Request current = null;
   try{
      current = (Request) db.getObj(Request.class, Restrictions.eq("id", id));
      // ... other business logic in here
      InvalidRequest newInvalidRequest = new InvalidRequest(current.getId(), current);
      db.addObject(newInvalidRequest);
    }
    } catch (Exception e){
       //This Exception gets thrown and caught. However the log message never prints.
       //Further along in the code, I get a NullPointerException because
       //the variable 'current' was null and therefore I can't call current.getId()
       //(which is why the log message never printed).
       //but how could current be null when 'id' is in the Request table?
       Log.error("ID = " + current.getId(), e);
    }
} 
```

辅助方法：

```
public <T> Object getObj(Class<T> clazz, Criterion crit) throws Exception {
   Object object = null;
   try {
      object = session.createCriteria(clazz).add(crit).uniqueResult();
   } catch (Exception e) {
      throw new Exception(e);
   }
   return object;
}

public <T> void addObject(T object) throws Exception {
    try {
        Transaction trans = session.beginTransaction();
        session.save(object);
        trans.commit();
    } catch (Exception e) {
        throw new Exception(e);
    }
} 
```

**一些注意事项：**

*   InvalidRequest 对象是一个 Hibernate 对象，它与 Request 对象具有一对一的外键关系。换句话说，这就是为什么当我创建一个新的 InvalidRequest 时，我将 Request 作为参数传入。
*   addObject 方法使用 Transaction 但 getObj 不使用。我不知道这对我的问题是否有任何特殊意义，但这只是一个注释。
*   你会注意到我从未在 Request 对象上使用过 evict() 或任何东西。我认为这意味着 Hibernate 将它们存储在会话缓存中一段时间​​。这是否使我有可能内存不足？或者如果缓存太大，Hibernate 会自动为我清除缓存吗？无论哪种方式，我都认为这不是问题，因为我的代码很快就被炸毁了，但我并不积极。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-27T10:12:37.313

这是一个旧的，但当我偶然发现它时，它仍然是 Hibernate 3 的未公开问题。

休眠标准中的投影与 LockMode 不兼容，请参阅[https://hibernate.atlassian.net/browse/HHH-3313](https://hibernate.atlassian.net/browse/HHH-3313) ，因此请检查您可能拥有的代码

```
criteria.setLockMode(your lock mode) 
```

如果像我们一样，您在这里使用一些通用代码来初始化您的标准，我们的代码提取来处理这个问题

```
CriteriaImpl critiml = (CriteriaImpl) crit;
if (critiml.getProjection() != null) {
    // lock mode is not compatible with projection criteria 
    // see bug entry https://hibernate.onjira.com/browse/HHH-3313
} else {
    crit.setLockMode("obj", LockMode.NONE);
} 
```

# content-management-system - 如何将菜单部分添加到我的 WordPress 模板？

> ID：15576754
> 
> 赞同：0
> 
> 时间：2013-03-22T17:46:38.013
> 
> 标签：content-management-system, wordpress, wordpress-theming

我是 WordPress 博客的新手，我正在使用这个模板开发一个博客：http: [//scorejava.com/wordpress351](http://scorejava.com/wordpress351)

正如您在页面顶部看到的那样，有一个“menù”，仅显示站点中的页面（此时：“Home”和“Pagina di esempio”）。

该菜单由 header.php 文件中的以下代码行显示：

```
<?php wp_list_pages('title_li=&depth=1'); ?> 
```

所以我认为这不是一个真正的菜单，而只是我博客上的静态页面列表。

如果在管理员仪表板中，我转到“主题位置”方块中的菜单部分，告诉我：**“此主题不支持菜单，但可以使用个性化菜单小部件在侧边栏中添加每个创建的菜单”**

所以我认为我的模板在顶部没有定义真正的菜单部分（但只有静态页面的列表）。我可以添加一个真正的部分来添加一个真正的菜单吗？我能怎么做？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:44:24.817

您的出发点是在functions.php 中注册您的菜单。像这样：

```
register_nav_menus(array(
'main_nav'=>__('Main','mythmeme'),
'footer_nav'=>__('Footer','mythmeme'),)
); 
```

这一切都在[法典](http://codex.wordpress.org/Function_Reference/register_nav_menus)中。

然后，您只需在 header.php（或 footer.php）中调用菜单：

```
<nav>
<?php wp_nav_menu(
array('theme_location' => 'main_nav')
); ?>
</nav> 
```

注册并调用后，您可以使用仪表板 > 外观 > 菜单来创建菜单并将其添加到主题位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:14:33.910

```
function dasboard_menu() {  
    global $menu; 
    $menu[6] = array( __('Orders'), 'read', 'edit.php?post_type=shop_order', '', 'menu-top menu-top-first menu-icon-orders', 'menu-dashboard', 'none' );
    $menu[7] = array( __('Catalogue'), 'read', 'edit.php?post_type=product', '', 'menu-top menu-top-first menu-icon-catalogue', 'menu-dashboard', 'none' );
    $menu[8] = array( __('Coupons'), 'read', 'edit.php?post_type=shop_coupon', '', 'menu-top menu-top-first menu-icon-coupon', 'menu-dashboard', 'none' );
}  
add_action( 'admin_menu', 'dasboard_sub_menu' ); 
```

# c# - 如何将 LINQ 查询返回到视图模型

> ID：15576757
> 
> 赞同：0
> 
> 时间：2013-03-22T17:46:50.577
> 
> 标签：c#, asp.net-mvc, linq

所以我的控制器中有以下操作：

```
 public ActionResult List() {
        ViewBag.Title = "View Current Stores";
        var curStores = 
            (from store in stores.Stores 
            where store.CompanyID == curCompany.ID 
            select store).ToList();
        return View(curStores);
    } 
```

假设获取商店列表并将其呈现为视图中的表格。但是 LINQ 语句引发以下错误：

```
Non-static method requires a target. 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:58:34.250

尝试使用`stores.Stores.Where(o=>o.CompanyID==curCompany.ID).ToList()`；但请确保在操作中使用但未定义的其他变量（即 curCompany 和商店）是有效的。

# delphi - Delphi 代码编辑器有什么好的调整吗？

> ID：15576760
> 
> 赞同：1
> 
> 时间：2013-03-22T17:47:13.053
> 
> 标签：delphi, ide

我在 Delphi 中最想要的一件事是它具有更好的缩进控制，我们在许多简单的代码编辑器（如 Notepad++ 甚至 Eclipse 和 Dreamweaver）中都可以看到它。

用于隐藏或扩展代码的加号/减号图标对于编码人员来说是一个非常好的工具。甚至会很棒

另一个非常好的工具是带有与 pascal 代码分离的收件箱注释的注释标记，例如[diigo](http://www.diigo.com)服务或位于文档页面右侧的 Microsoft Office Word 修订选项卡。

Delphi 作为插件工具存在吗？

![在此处输入图像描述](../Images/a175a12c5fb375cb6d6027204616731a.png) ![在此处输入图像描述](../Images/c1afec6788b43a34a1eae6e6097fa14d.png) ![在此处输入图像描述](../Images/76f85663e73e12bd26884a142bca6666.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:57:07.483

您可以从 CnPack 获得垂直线条效果。 [http://www.cnpack.org/index.php?lang=en](http://www.cnpack.org/index.php?lang=en) 它还有一些其他的好东西，比如转置 a := b; 的“eval swap”。进入 b := a; 还有一个很棒的叫做“转换为字符串”，它非常适合将长 SQL 语句之类的东西转换成

```
'strings that' + #13#10 +
'span' + #13#10 +
'multiple lines.' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:20:21.837

我还发现了由 Embarcadero 提供支持的 Castalia Add-On：

[http://www.twodesk.com/castalia/delphibasics.html?r=a](http://www.twodesk.com/castalia/delphibasics.html?r=a)

它具有语法高亮、代码重构、代码度量和智能粘贴。

# c# - 取消功能

> ID：15576761
> 
> 赞同：1
> 
> 时间：2013-03-22T17:47:17.277
> 
> 标签：c#, .net, c#-4.0, task

我有一个函数可以发出一些 http 请求，并在一个任务中运行。该函数可以在中间中断，因为我无法中止任务，我在函数中添加了一些布尔条件。例子：

```
public int foo(ref bool cancel)
{
    if(cancel)
    {
        return null
    }
    //do some work...
    if(cancel)
    {
        return null
    }
    //http webrequest
    if(cancel)
    {
        return null
    }
 } 
```

这工作得很好，虽然这是一些相当丑陋的代码。

另一个问题是当我已经执行了网络请求时，我需要时间才能获得响应，而不是函数 cncelation 需要很多时间（直到我得到响应）。

我有更好的方法来检查吗？或者我应该使用线程而不是任务？

**编辑**

我添加了一个取消令牌：声明了一个 cancelationTokenSource，并将其令牌传递给任务

```
CancellationTokenSource cncelToken = new CancellationTokenSource();
Task t = new Task(() => {foo()},cancelToken.token); 
```

当我做 cancelToken.Cancel(); 我还在等待回复，tsk 没有取消。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:52:06.553

任务支持取消 - 请参见[此处](http://msdn.microsoft.com/en-us/library/dd997396.aspx)。

这是一个快速的片段。

```
class Program
{
    static void Main(string[] args)
    {
        var token = new CancellationTokenSource();
        var t = Task.Factory.StartNew(
            o =>
            {
                while (true)
                    Console.WriteLine("{0}: Processing", DateTime.Now);
            }, token);

        token.CancelAfter(1000);
        t.Wait(token.Token);
    }
} 
```

请记住使用提供的取消令牌等待任务。您应该收到 OperationCanceledException。

# mysql - MYSQL：SELECT * FROM customer_table 隐藏 customer_password？

> ID：15576764
> 
> 赞同：-1
> 
> 时间：2013-03-22T17:47:32.250
> 
> 标签：mysql

无论如何要做一个 mysql select * 并告诉查询 - 你不想要的字段，还是你必须手动将它们全部输入，除了你不想要的字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:49:31.807

绝对没有。

但这里有一个解决方法。创建一个`VIEW`表，例如

```
CREATE VIEW ViewName
AS
    SELECT col1, col2, col3, .... -- hide password here
    FROM tableName; 
```

一旦`VIEW`创建，您现在可以调用它，

```
SELECT * FROM ViewName 
```

# mongodb - 无法升级分片 mongoDB 或停止平衡器

> ID：15576766
> 
> 赞同：4
> 
> 时间：2013-03-22T17:47:40.697
> 
> 标签：mongodb, database-administration

`mongos`一开始没有运行。尝试启动时，`mongos`我看到以下日志：

> Fri Mar 22 17:43:13.383 [mongosMain] 错误：错误将配置数据库升级到 v4 :: 由 :: 需要更新版本 4 的 mongo 配置元数据，当前版本为 3，需要使用 --upgrade 运行 mongos

但是使用`--upgrade`参数，我看到以下日志：

> Fri Mar 22 17:43:39.273 [mongosMain] 错误：将配置数据库升级到 v4 时出错 :: 由 :: balancer 引起的，必须停止配置升级

现在的问题是：我无法停止平衡器，`sh.stopBalancer()`因为我无法启动 mongos。现在对我来说是个僵局。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:47:45.687

我发现了问题所在。我应该连接到端口`27019`以获取`configsrv`. 这样我就不需要启动了`mongos`。相反，`sh.stopBalancer()`可以简单地在`mongo`解释器中执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-02T17:22:41.433

我刚才也有同样的问题。我将我的 mongo 数据库从版本 2.0.4 更新到了 2.4.3。我无法连接到 mongos，因为需要升级配置服务器。但是，我无法使用命令 stopBalancer() 停止平衡器，因为我的 mongos 处于非活动状态。我没有从 stackoverflow 找到其他解决方案。我试过很多次。

我的解决方案是：1、ssh到配置服务器；

2、使用config数据库；

可能需要通过认证；

3、运行 db.settings.update( { _id: "balancer" }, { $set : {stopped: true } } , true ) 停止平衡器；

4、我可以用--upgrade选项运行“mongos”；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-09T09:40:40.747

我有同样的问题。我的解决方案是使用 mongo shell连接到*configsvr*

**mongo --host ip_of_config_server_host --port 27019**

并从那里关闭平衡器

**sh.setBalancerState(假)**

在此之后，我可以进行配置服务器升级

**mongos --port 27017 --configdb ip_of_config_server_host --upgrade**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T18:57:14.340

假设您遵循始终运行 3 个配置服务器的建议，我会尝试以下步骤：

1.  确保所有其他 mongos 客户端都已停止。如果没有 mongos 正在运行，那么平衡器也不应该保持锁定。

2.  如果您仍然收到错误（在确定没有 mongos 连接到配置服务器之后），我将停止所有配置服务器，但其中一个并清除管理数据库中的平衡器锁定。成功尝试使用此配置服务器后，我将重置其他两个。如果不成功，您还有另外两个副本。

# android - 从数据库中检索记录并在列表视图中显示并将点击事件的值传递给下一个活动

> ID：15576768
> 
> 赞同：0
> 
> 时间：2013-03-22T17:47:51.353
> 
> 标签：android, android-listview, android-sqlite

我正在开发应用程序，我想在其中解析 xml 文件并将其存储在 db 中并从表中检索特定记录并将其显示在列表视图中，当我单击它时，通过意图将该值传递给下一个活动。我试过了。当我将安装该应用程序的.apk 时，它工作正常，但是当我回到列表视图活动并单击任何值时，它会给出错误“forse close”并且应用程序被终止。在 log cat 中，它给出了如下所示的错误。

它每次都从数据库中获取记录并完美地显示在列表视图中。我收到错误 onclick 事件，当我再次返回列表视图时也是如此。

请帮我解决问题...提前谢谢您...！

> **Logcat 错误**

```
> *03-22 22:07:51.681: E/AndroidRuntime(336): FATAL EXCEPTION: main
03-22 22:07:51.681: E/AndroidRuntime(336): java.lang.IndexOutOfBoundsException:     Invalid index 1, size is 0
03-22 22:07:51.681: E/AndroidRuntime(336):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
03-22 22:07:51.681: E/AndroidRuntime(336):  at java.util.ArrayList.get(ArrayList.java:311)
03-22 22:07:51.681: E/AndroidRuntime(336):  at com.dod.test.List_of_Consumer$1.onItemClick(List_of_Consumer.java:130)
03-22 22:07:51.681: E/AndroidRuntime(336):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
03-22 22:07:51.681: E/AndroidRuntime(336):  at android.widget.ListView.performItemClick(ListView.java:3513)
03-22 22:07:51.681: E/AndroidRuntime(336):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
03-22 22:07:51.681: E/AndroidRuntime(336):  at android.os.Handler.handleCallback(Handler.java:587)
03-22 22:07:51.681: E/AndroidRuntime(336):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-22 22:07:51.681: E/AndroidRuntime(336):  at android.os.Looper.loop(Looper.java:123)
03-22 22:07:51.681: E/AndroidRuntime(336):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-22 22:07:51.681: E/AndroidRuntime(336):  at java.lang.reflect.Method.invokeNative(Native Method)
03-22 22:07:51.681: E/AndroidRuntime(336):  at java.lang.reflect.Method.invoke(Method.java:507)
03-22 22:07:51.681: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-22 22:07:51.681: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-22 22:07:51.681: E/AndroidRuntime(336):  at dalvik.system.NativeStart.main(Native Method)* 
```

**List_of_Consumer** //*我从 db 检索 reords 并显示在 listview 中的第一个活动。*

```
package com.dod.test;

import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserFactory;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class List_of_Consumer extends Activity {
Button back;
Intent i;
TextView txt_xml;
String consumer_id,meter,or,current,s;
ListView lv;
ArrayList<String> cid;
ArrayList<String> a;
InputStream is;
DB_Adapter database;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list_of_consumer);
    back = (Button)findViewById(R.id.btnback);
    lv=(ListView)findViewById(R.id.lv);
    database = new DB_Adapter(getApplicationContext(), "EBS", null, 1);

    try
    {

        a = new ArrayList<String>();
        if(database.count())
        {
            getxmldata();
        }else
        {
            File xml = new File(Environment.getExternalStorageDirectory(),  "t21.xml");
            is = new FileInputStream(xml);
            //is = new FileInputStream("/data/data/com.dod.test/t21.xml");
            InputStreamReader isr= new InputStreamReader(is);

                XmlPullParserFactory xf=XmlPullParserFactory.newInstance();
                XmlPullParser xp=xf.newPullParser();
                xp.setInput(isr);
                int event=xp.getEventType();

                while(event!=XmlPullParser.END_DOCUMENT)
                {
                    if(event==XmlPullParser.START_TAG)
                    {
                        current=xp.getName();
                    }
                    else if(event==XmlPullParser.TEXT)
                    {
                        if(current.equals("consumerid"))
                        {

                            a.add(xp.getText());    

                            consumer_id=xp.getText();
                            Toast.makeText(getApplicationContext(), consumer_id, Toast.LENGTH_SHORT).show();

                        }
                        else if(current.equals("meter"))
                        {
                            meter=xp.getText();
                            Toast.makeText(getApplicationContext(), meter, Toast.LENGTH_SHORT).show();
                        }
                        else if(current.equals("or"))
                        {
                            or=xp.getText();
                            database.addConsumer(consumer_id, meter,or);
                            database.close();
                        }

                    }               

                    event=xp.next();

                    }
                    getxmldata();
        }

            lv.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    String st=a.get(arg2);
                    Toast.makeText(getApplicationContext(), "Consumer:="+st, Toast.LENGTH_SHORT).show();

                    Intent i = new Intent(getApplicationContext(),Reading_Detail.class);
                    i.putExtra("key", st);
                    startActivity(i);
                    // TODO Auto-generated method stub

                }
            });

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    /*back.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            i = new Intent(getApplicationContext(),Home.class);
            startActivity(i);
            finish();
        }
    });*/

}

public void getxmldata()
{
    cid=database.get_consumer_id();
    ArrayAdapter<String> aa = new ArrayAdapter<String>(getApplicationContext(), R.layout.row,R.id.txt,cid);
    lv.setAdapter(aa);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.list_of_consumer, menu);
    return true;
} 
```

}

**DB_Adapter** //*数据库文件*

```
package com.dod.test;

import java.util.ArrayList;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DB_Adapter extends SQLiteOpenHelper {
public SQLiteDatabase db;
String s2,s3;
public static final String KEY_NAME = "USERNAME";
public static final String KEY_PASSWORD = "PASSWORD";
public static final String DATABASE_TABLE = "LOGIN";
public static final String DATABASE_TABLE1 = "CONSUMER";
public static final String DATABASE_TABLE2 = "CONSUMER_XML";
public DB_Adapter(Context context, String name, CursorFactory factory,
        int version) {
    super(context, name, factory, version);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase arg0) {
    // TODO Auto-generated method stub
    arg0.execSQL("CREATE TABLE LOGIN(ID INTEGER PRIMARY KEY AUTOINCREMENT," +
            "USERNAME TEXT NOT NULL," +
            "PASSWORD TEXT NOT NULL)");
    arg0.execSQL("CREATE TABLE CONSUMER(ID INTEGER PRIMARY KEY AUTOINCREMENT," + 
            "CONSUMER_ID INTEGER NOT NULL," +
            "METER_NO INTEGER NOT NULL," +
            "PREV_READING INTEGER NOT NULL," +
            "CURR_READING INTEGER NOT NULL," +
            "IMAGE TEXT NOT NULL," +
            "STATUS INTEGER NOT NULL)");
    arg0.execSQL("CREATE TABLE CONSUMER_XML(CONSUMER_ID INTEGER PRIMARY KEY NOT NULL," +
            "METER_NO INTEGER NOT NULL," +
            "PREV_READING INTEGER NOT NULL)");
}

@Override
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub
    arg0.execSQL("DROP TABLE IF EXIST LOGIN");
    arg0.execSQL("DROP TABLE IF EXIST CONSUMER");
    arg0.execSQL("DROP TABLE IF EXIST CONSUMER_XML");
    onCreate(arg0);
}

public void addConsumer(String consumerid,String meter,String pr)
{
    db=getWritableDatabase();
    ContentValues cv=new ContentValues();
    cv.put("CONSUMER_ID", consumerid);
    cv.put("METER_NO", meter);
    cv.put("PREV_READING", pr);
    db.insert(DATABASE_TABLE2, null, cv);
}
public boolean count()
{
    Cursor c = getReadableDatabase().rawQuery("SELECT CONSUMER_ID FROM " + DATABASE_TABLE2,null);
    if (c.getCount()>0)
          return true;
          return false;
}

public ArrayList<String> get_consumer_id()
{
    ArrayList<String>names1=new ArrayList<String>();
    Cursor c = getReadableDatabase().rawQuery("Select CONSUMER_ID from " + DATABASE_TABLE2, null);
    c.moveToFirst();
    do
    {
        String s1=c.getString(c.getColumnIndex("CONSUMER_ID"));
        names1.add(s1);
    }while(c.moveToNext());
    return names1;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:51:49.673

您的 logcat 清楚地表明您正在由此获得 Index out of bounds 异常。

```
java.lang.IndexOutOfBoundsException:     Invalid index 1, size is 0
at com.dod.test.List_of_Consumer$1.onItemClick(List_of_Consumer.java:130) 
```

你的代码中的第 130 行是什么？如果您可以使用更具体的代码部分来编辑您的问题，那么就有可能根据该代码编辑我的答案。

# javascript - 按下按钮，文本框中的值增加

> ID：15576769
> 
> 赞同：1
> 
> 时间：2013-03-22T17:47:54.190
> 
> 标签：javascript, jquery, asp.net, html

因此，当页面加载时，文本框将包含一个存储值。我希望用户按下“+”按钮，文本框中的值将增加一。我猜这是用 JQuery 完成的......到目前为止我有任何关于从哪里开始的想法......

```
<input type="text" name="BoqTextBox" id="BoqTextBox" value="0" />  
    <input type="Button" value="+" onclick="AddOne(document.getElementById('BoqTextBox').value)" />

    <script>
        function Add(data) {
            //so the current digit is passed to here, where I need to do some funky code
            //where it increments the current digit by one and stores it in BoqTextBox - replacing the old digit.

            //Also to note if the text box contains 124.54 for example and + is pressed
            //then new value will be 125.54
        }
    </script> 
```

对此的任何帮助都会很棒。

谢谢

...类似于 data = data + 1，但是我如何将值返回到文本框中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T17:50:04.417

您可以使用 jQuery 的[val()](http://api.jquery.com/val/)来获取和设置一个值。在这种情况下，您需要的代码可能如下所示（[演示](http://jsfiddle.net/sperske/swQkS/1/)）：

```
<input type="text" name="BoqTextBox" id="BoqTextBox" value="0" />
<input type="Button" id='AddButton' value="+" />
<script>
$('#AddButton').on('click', function () {
    var input = $('#BoqTextBox');
    input.val(parseFloat(input.val()) + 1);
})
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:52:15.300

```
$('input[type="button"]').on('click', function() {  // bind click event to button
   $('#BoqTextBox').val(function() {      // change input value using callback
      return ++parseFloat( this.value, 10); // make value integer and increment 1
   })
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:53:07.147

```
 $("#buttonId").click(function()
 {        
    var txtBox = $("#boqtextbox"); 

    if(!isNaN(txtBox.val()))
    {
       txtBox.val(parsFloat(txtBox.val())+1) ;

    }else 
    {
       //do validation or set it to 0
       txtBox.val(0);
    }|

 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T17:50:50.823

您正在调用 Addone 函数内联，这意味着您的函数应该是 AddOne()

尝试这个

```
function AddOne(obj){
    var value=parseFloat(obj) + 1;
    $('#BoqTextBox').val(value);  
} 
```

# python - Python - 是否可以将 insert() 插入列表内的列表中？

> ID：15576772
> 
> 赞同：1
> 
> 时间：2013-03-22T17:48:09.083
> 
> 标签：python, python-2.7

在 Python 中，是否可以在列表中的列表中插入值？

例如：

```
 List = [['Name',[1, 4, 6]],
    ['Another Name', [1,2,5]]] 
```

我试过使用：

```
 List.insert([0][1], 'another value') 
```

但它不喜欢那样，有没有另一种方法来操作列表中的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:50:18.823

绝对有可能：

```
>>> List = [['Name',[1, 4, 6]],
...     ['Another Name', [1,2,5]]]
>>> List[0].insert(1,"Another Value")
>>> List
[['Name', 'Another Value', [1, 4, 6]], ['Another Name', [1, 2, 5]]] 
```

您只需要下标“外部”列表即可获得对要插入的“内部”列表的引用。

我们可以将上面的代码分解为以下步骤：

```
inner = List[0]
inner.insert(1,'Another Value') 
```

如果这让你更清楚我在那里实际做了什么......

# r - 根据一组规则删除重复的观察

> ID：15576776
> 
> 赞同：10
> 
> 时间：2013-03-22T17:48:15.020
> 
> 标签：r, duplicate-removal

我正在尝试根据我的变量 id 从数据集中删除重复的观察结果。但是，我希望根据以下规则删除观察结果。下面的变量是 id、户主的性别（1-男、2-女）和户主的年龄。规则如下。如果一个家庭既有男性户主也有女性户主，则删除女性户主观察。如果一个家庭是两个男户主或两个女户主，则删除与年轻户主的观察。下面是一个示例数据集。

```
id = c(1,2,2,3,4,5,5,6,7,8,8,9,10)
sex = c(1,1,2,1,2,2,2,1,1,1,1,2,1)
age = c(32,34,54,23,32,56,67,45,51,43,35,80,45)
data = data.frame(cbind(id,sex,age)) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T18:04:40.373

您可以通过首先订购`data.frame`每个所需的条目来做到这一点`id`，然后删除具有重复`id`s 的行。

```
d <- with(data, data[order(id, sex, -age),])
#    id sex age
# 1   1   1  32
# 2   2   1  34
# 3   2   2  54
# 4   3   1  23
# 5   4   2  32
# 7   5   2  67
# 6   5   2  56
# 8   6   1  45
# 9   7   1  51
# 10  8   1  43
# 11  8   1  35
# 12  9   2  80
# 13 10   1  45
d[!duplicated(d$id), ]
#    id sex age
# 1   1   1  32
# 2   2   1  34
# 4   3   1  23
# 5   4   2  32
# 7   5   2  67
# 8   6   1  45
# 9   7   1  51
# 10  8   1  43
# 12  9   2  80
# 13 10   1  45 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-22T18:17:01.387

有了`data.table`，这很容易通过“复合查询”。要在读入数据时对数据进行排序，请在读入数据时将“key”设置为“id,sex”（如果任何女性值会出现在给定 ID 的男性值之前，则必须这样做）。

```
> library(data.table)
> DT <- data.table(data, key = "id,sex")
> DT[, max(age), by = key(DT)][!duplicated(id)]
    id sex V1
 1:  1   1 32
 2:  2   1 34
 3:  3   1 23
 4:  4   2 32
 5:  5   2 67
 6:  6   1 45
 7:  7   1 51
 8:  8   1 43
 9:  9   2 80
10: 10   1 45 
```

# sql - 无法理解 SQL 中的这个视图是如何工作的

> ID：15576779
> 
> 赞同：-1
> 
> 时间：2013-03-22T17:48:21.763
> 
> 标签：sql, database

我很难理解创建视图 TRANSCRIPTVIEW 是如何设法为那些没有参加课程的人设置 0 级的。解释会有所帮助，解决方案和问题如下。谢谢。

学生（ID，姓名）成绩单（StudId，课程名称，学期，年级）

用 SQL 编写以下查询： 创建所有学生（Id、Name）的列表，并为每个学生列出 S2002 学期所学课程的平均成绩。请注意，可能有学生在 S2002 中没有参加任何课程。对于这些，平均成绩应列为 0。 解决方案：我们首先创建一个视图，该视图在 TRANSCRIPT 中添加行，这些行将每个学生注册到一个分数为 0 的 NULL 课程。因此，在 'S2002 学期没有参加任何课程的学生' 该学期的平均成绩为 0。

以下是让我感到困惑的地方，它是如何工作的，为什么会这样？

```
CREATE VIEW TRANSCRIPTVIEW AS (

( SELECT * FROM Transcipt)
UNION
( 
SELECT S.Id,NULL,’S2002’,0
FROM Student S)
WHERE S.Id NOT IN ( 
SELECT T.StudId
FROM Transcript T
WHERE T.Semester = ’S2002’) )
)

Remaining solution:
SELECT S.Id, S.Name, AVG(T.Grade)
FROM Student S, TRANSCRIPTVIEW T
WHERE S.Id = T.StudId AND T.Semester = ’S2002’ GROUP BY S.Id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:04:14.587

`how the create view, TRANSCRIPTVIEW, manages to set the grade of 0 for those who did not take a course`

在 S2002 学期未参加课程的学生集合在该学期的成绩单表中没有记录。那些确实在那个学期上过课程的人确实在那个学期的表中记录了一个记录。`NULL, 'S2002',0`如果学生不在 S2002 学期的成绩单表中，则查询会为他们提供值：

```
 SELECT S.Id,NULL,’S2002’,0 FROM Student S)    -- this parenthesis is wrong
  -- this following where conditions looks for students NOT IN the 2002 subset:
  WHERE S.Id NOT IN
   -- this next part gets a list of studentids for semester 2002
   (  
   SELECT T.StudId FROM Transcript T
    WHERE T.Semester = ’S2002’
   ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:55:29.297

您问题中的解决方案很荒谬。更好的解决方案是：

```
SELECT S.Id, S.Name, AVG(case when  T.Semester = ’S2002’ then T.Grade end) as AvgS2002Grade
FROM Student S left outer join
     TRANSCRIPTVIEW T
     on S.Id = T.StudId AND T.Semester = ’S2002’
GROUP BY S.Id 
```

您问题中的查询过于复杂。它正在使用`union`（实际上应该是`union all`出于性能原因）来确保所有学生都包括在内。天哪，这就是`left outer join`它的用途。`where`当条件聚合更合适时，它在子句中进行过滤。它使用古老的连接语法，而不是 ANSI 标准。

我希望你在学习 SQL 时不会有这些缺点。

# javascript - 如果 x 等于某物，则不运行函数

> ID：15576787
> 
> 赞同：1
> 
> 时间：2013-03-22T17:48:48.620
> 
> 标签：javascript, html

我是 JavaScript 和 HTML 的新手。我的 JavaScript 文件中有这行代码：

```
if (q1 == '' && q2 == '' && q3 == '' && q4 == '' && q5 == '') {alert("You must enter a question");thisform.q1.focus();return false;} 
```

基本上，q1 q2 等是文本框，如果它们留空，则会弹出一个警报并说您必须输入一个问题。在我的 HTML 文件中，我有这行代码

```
<script type="text/javascript">
function add() {
var num = document.getElementById("n1").value;
if(num == '') num = 0;
document.getElementById("n1").value = parseInt(num ,10) + 1; 
var num = document.getElementById("n2").value;
if(num == '') num = 0;
document.getElementById("n2").value = parseInt(num ,10) + 1;
var num = document.getElementById("n3").value;
if(num == '') num = 0;
document.getElementById("n3").value = parseInt(num ,10) + 1;
var num = document.getElementById("n4").value;
if(num == '') num = 0;
document.getElementById("n4").value = parseInt(num ,10) + 1;
var num = document.getElementById("n5").value;
if(num == '') num = 0;
document.getElementById("n5").value = parseInt(num ,10) + 1;
}
</script> 
```

后来：

```
<INPUT onclick="addQ(myForm);add();" value="Add Question" id="question add" type=button> 
```

如果弹出警报，有什么方法可以使 add() 函数不执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:51:39.683

你可以试试

```
<INPUT onclick="if(!addQ(myForm)) {return false;} add();" value="Add Question" id="question add" type=button> 
```

然后将 a 添加`return true;`到 function 的末尾`addQ()`。

```
function addQ(myForm){
    ....
    if (q1 == '' && q2 == '' && q3 == '' && q4 == '' && q5 == '') {alert("You must enter a question");thisform.q1.focus();return false;}
    ......
    .....
    return true;
} 
```

或者

```
<INPUT onclick="if(addQ(myForm) === false) {return false;} add();" value="Add Question" id="question add" type=button> 
```

# python - 在不保留压缩数据的情况下处理 gzipped 或 bzip2ed 下载

> ID：15576789
> 
> 赞同：3
> 
> 时间：2013-03-22T17:48:53.753
> 
> 标签：python, gzip, urllib2, bzip2

我想下载一个压缩文件（在 gzip 或 bzip2 中），解压缩并分析其内容（这是一个包含大量数据的类似 CSV 的文件，我计算某些列的总和、平均值等）*同时*下载发生（这样我就可以在下载结束之前显示部分结果）。文件很大（4GB），解压后的流更大，所以我不想将整个压缩文件保存在磁盘或内存中。

我认为可以将 python 的 gzip 或 bz2 实现与 urllib2 结合起来：

```
data_stream = csv.reader(
                  gzip.GzipFile(
                      fileobj=urllib2.urlopen('http://…/somefile.gz')),
                  delimiter='\t') 
```

…但似乎 urlopen 的文件对于 GzipFile 来说不够像文件。尝试从这样的流中读取后，我得到了回溯：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/gzip.py", line 450, in readline
    c = self.read(readsize)
  File "/usr/lib/python2.7/gzip.py", line 256, in read
    self._read(readsize)
  File "/usr/lib/python2.7/gzip.py", line 283, in _read
    pos = self.fileobj.tell()   # Save current position
AttributeError: addinfourl instance has no attribute 'tell' 
```

BZ2 模块更糟糕——它根本不允许传递文件对象。

在寻找一些答案后，我发现[了这个问题](https://stackoverflow.com/q/4204604/42610)。答案基本上是将整个压缩文件存储在内存中，这对我来说是不可行的。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:23:46.807

[在 python 中](http://docs.python.org/3.3/library/zlib.html)使用zlib 。 `zlib.decompressobj`将创建一个可以零碎地输入 gzip 压缩数据的对象，并使用对象上的方法吐出可用的未压缩数据`decompress`。您需要设置`wbits`为 31 才能解码 gzip 格式。15 将解码 zlib 格式。

# sql - 按任意时间间隔计算行数的最佳方法

> ID：15576794
> 
> 赞同：27
> 
> 时间：2013-03-22T17:49:14.343
> 
> 标签：sql, ruby-on-rails, postgresql, aggregate-functions, generate-series

我的应用程序有一个`Events`带有时间戳事件的表。

我需要报告每个最近`N`时间间隔内的事件计数。对于不同的报告，间隔可以是“每周”或“每天”或“每小时”或“每 15 分钟间隔”。

例如，用户可以显示他们每周、每天、每小时或每一刻钟收到了多少订单。

1) 我的偏好是动态地执行一个按任意时间间隔分组的 SQL 查询（我正在使用 Postgres）。有没有办法做到这一点？

2）一个简单但丑陋的蛮力方法是对按时间戳排序的开始/结束时间范围内的所有记录进行一次查询，然后有一个方法手动建立一个按任何时间间隔的计数。

3）另一种方法是为每个间隔向事件表添加单独的字段并静态存储一个`the_week` `the_day`,`the_hour`和`the_quarter_hour`字段，因此我在创建记录时（一次）而不是每次我报告该字段时都接受“命中” .

鉴于我可以修改模型并在需要时预存储间隔数据（尽管以将表宽度加倍的适度费用），这里的最佳实践是什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-22T18:28:31.327

幸运的是，您使用的是 PostgreSQL。窗口函数[**`generate_series()`**](https://www.postgresql.org/docs/current/functions-srf.html)是你的朋友。

### 测试用例

给定以下测试表（*您*应该提供）：

```
CREATE TABLE event(event_id serial, ts timestamp);
INSERT INTO event (ts)
SELECT generate_series(timestamp '2018-05-01'
                     , timestamp '2018-05-08'
                     , interval '7 min') + random() * interval '7 min'; 
```

*每 7 分钟一个事件（加上 0 到 7 分钟，随机）。*

### 基本解决方案

此查询计算任意时间间隔的事件。示例中的 17 分钟：

```
WITH grid AS (
   SELECT start_time
        , lead(start_time, 1, 'infinity') OVER (ORDER BY start_time) AS end_time
   FROM  (
      SELECT generate_series(min(ts), max(ts), interval '17 min') AS start_time
      FROM   event
      ) sub
   )
SELECT start_time, count(e.ts) AS events
FROM   grid       g
LEFT   JOIN event e ON e.ts >= g.start_time
                   AND e.ts <  g.end_time
GROUP  BY start_time
ORDER  BY start_time; 
```

该查询从基表中检索最小值和最大值`ts`以覆盖整个时间范围。您可以改用任意时间范围。

根据需要提供***任何*时间间隔**。

*为每个*时隙生成一行。如果在该时间间隔内没有发生任何事件，则计数为`0`。

请务必正确处理**上限和下限**。看：

*   [带有 BETWEEN 时间戳的 SQL 查询的意外结果](https://stackoverflow.com/questions/15551740/unexpected-results-from-sql-query-with-between-timestamps)

窗口函数[`lead()`](https://www.postgresql.org/docs/current/functions-window.html)有一个经常被忽视的特性：它可以在不存在前导行时提供默认值。[`'infinity'`](https://www.postgresql.org/docs/current/datatype-datetime.html#DATATYPE-DATETIME-SPECIAL-TABLE)在示例中提供。否则最后一个区间将被一个上限截断`NULL`。

### 最小当量

上述查询使用 CTE`lead()`和详细语法。优雅，也许更容易理解，但有点贵。这是一个更短、更快、最小的版本：

```
SELECT start_time, count(e.ts) AS events
FROM  (SELECT generate_series(min(ts), max(ts), interval '17 min') FROM event) g(start_time)
LEFT   JOIN event e ON e.ts >= g.start_time
                   AND e.ts <  g.start_time + interval '17 min'
GROUP  BY 1
ORDER  BY 1; 
```

### *“过去一周每 15 分钟”的*示例`

 *格式化为[`to_char()`](https://www.postgresql.org/docs/current/functions-formatting.html).

```
SELECT **to_char(start_time, 'YYYY-MM-DD HH24:MI')**, count(e.ts) AS events
FROM   generate_series(**date_trunc('day', localtimestamp - interval '7 days')
                     , localtimestamp
                     , interval '15 min'**) g(start_time)
LEFT   JOIN event e ON e.ts >= g.start_time
                   AND e.ts <  g.start_time + interval '15 min'
GROUP  BY start_time
ORDER  BY start_time;
```

仍然在基础时间戳*值*`ORDER BY`上，而不是在格式化字符串上。这样更快、更可靠。`GROUP BY`

 **db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_10&fiddle=c7e87204a217f1abf376ab17da8d08a2)*

相关答案在时间范围内产生*运行计数：*

*   [PostgreSQL：“按分钟”查询的运行行数](https://stackoverflow.com/questions/8193688/postgresql-running-count-of-rows-for-a-query-by-minute/8194088#8194088)**

# c# - 如何在 Silverlight 的另一个时区获取当地时间

> ID：15576795
> 
> 赞同：2
> 
> 时间：2013-03-22T17:49:14.693
> 
> 标签：c#, silverlight, utc

在 Silverlight 应用程序中，如果我知道时区 ID，如何获取该时区的当前 UTC 偏移量或当前时间？

如果我在东海岸，我想知道当前的 UTC 偏移量或亚利桑那州的当前时间，我该如何在 Silverlight 中做到这一点？

这在 Silverlight 中不可用：

```
var AZTime = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(SomeDatetime, "US Mountain Standard Time"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T13:00:55.823

您可以为 Silverlight 应用程序创建一项服务，该服务不会进行任何转换，因为服务器的 .Net 代码具有所有这些时区功能。然后在需要转换时让 Silverlight 客户端调用该服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:43:50.293

**编辑：我似乎犯了一个错误，下面的答案是针对 WPF 的。我不知道如何执行 Silverlight 中的要求，也无法删除此答案。**

这对我有用：

```
TimeZoneInfo GermanTimeZone = TimeZoneInfo.FindSystemTimeZoneById("W. Europe Standard Time");
var dateTimeInBerlin = TimeZoneInfo.ConvertTimeFromUtc(utc, GermanTimeZone); 
```

时区名称在 Windows 注册表中配置：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Time Zones 
```

# python - 在 python 中创建 32 位浮点 wav 文件？

> ID：15576798
> 
> 赞同：4
> 
> 时间：2013-03-22T17:49:27.477
> 
> 标签：python, audio, python-2.7, floating-point, wav

我想在 Python (2.x) 中创建 32 位浮点 WAV 文件。虽然“标准”WAV 文件通常使用 int，但许多专业音频应用程序将音频数据处理（并保存）为浮点数。标准 wave 模块无法做到这一点：[http](http://bugs.python.org/issue16525) ://bugs.python.org/issue16525 有没有人在不使用补丁模块的情况下实现了这一点？tnx 寻求帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T00:58:51.840

这听起来很有趣（见我的把手），所以我敲定了一些东西。也许你可以使用它。如果您的 Python 脚本生成数值介于 [-1.0 .. 1.0] 之间的单声道波形，请发送该波形`sample_array`并指定`sample_rate`（例如，44100 或 48000）。这将返回一个数组，您可以将其作为 .wav 文件写入磁盘。

我在 Windows Media Player、Apple QuickTime Player 和 VLC（都在 Windows 7 上）中测试了生成的 .wav 输出。他们都玩过。

```
def float32_wav_file(sample_array, sample_rate):
  byte_count = (len(sample_array)) * 4  # 32-bit floats
  wav_file = ""
  # write the header
  wav_file += struct.pack('<ccccIccccccccIHHIIHH',
    'R', 'I', 'F', 'F',
    byte_count + 0x2c - 8,  # header size
    'W', 'A', 'V', 'E', 'f', 'm', 't', ' ',
    0x10,  # size of 'fmt ' header
    3,  # format 3 = floating-point PCM
    1,  # channels
    sample_rate,  # samples / second
    sample_rate * 4,  # bytes / second
    4,  # block alignment
    32)  # bits / sample
  wav_file += struct.pack('<ccccI',
    'd', 'a', 't', 'a', byte_count)
  for sample in sample_array:
    wav_file += struct.pack("<f", sample)
  return wav_file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-14T19:49:40.367

这是我的贡献……包括任意字长和任意数量的频道。我冒昧地更改了 float32_wav_file 以包含一个保存用于测试的文件。请注意，文件结构的多通道数据部分是交错的。我敢肯定，那个循环可能会被极大地python化。

```
# see http://stackoverflow.com/questions/15576798/create-32bit-float-wav-file-in-python
# see... http://blog.theroyweb.com/extracting-wav-file-header-information-using-a-python-script
import struct
def float32_wav_file(file_name, sample_array, sample_rate):
    (M,N)=sample_array.shape
    #print "len sample_array=(%d,%d)" % (M,N)
    byte_count = M * N * 4 # (len(sample_array)) * 4  # 32-bit floats
    wav_file = ""
    # write the header
    wav_file += struct.pack('<ccccIccccccccIHHIIHH',
        'R', 'I', 'F', 'F',
        byte_count + 0x2c - 8,  # header size
        'W', 'A', 'V', 'E', 'f', 'm', 't', ' ',
        0x10,  # size of 'fmt ' header
        3,  # format 3 = floating-point PCM
        M,  # channels
        sample_rate,  # samples / second
        sample_rate * 4,  # bytes / second
        4,  # block alignment
        32)  # bits / sample
    wav_file += struct.pack('<ccccI',
        'd', 'a', 't', 'a', byte_count)
    print "packing..."
    for j in range(0,N):
        for k in range(0,M):
            wav_file += struct.pack("<f", sample_array[k,j])
    print "saving..."
    fi=open(file_name,'wb')
    for value in wav_file:
        fi.write(value)
    fi.close()

    return wav_file

import numpy as np
def wav_file_read(filename):
    fi=open(filename,'rb')
    data=fi.read()
    fi.close()
    A, B, C,  D        =struct.unpack('4c', data[0:4])      # 'RIFF'
    ChunkSize     =struct.unpack('<l', data[4:8])[0]   #4+(8+SubChunk1Size)+8+SubChunk2Size)
    A, B, C,  D        =struct.unpack('4c', data[8:12])     # 'WAVE'
    A, B, C,  D        =struct.unpack('4c', data[12:16])    # 'fmt '
    Subchunk1Size =struct.unpack('<l', data[16:20])[0] # LITTLE ENDIAN, long, 16
    AudioFormat   =struct.unpack('<h', data[20:22])[0] # LITTLE ENDIAN, short, 1
    NumChannels   =struct.unpack('<h', data[22:24])[0] # LITTLE ENDIAN, short, Mono = 1, Stereo = 2
    SampleRate    =struct.unpack('<l', data[24:28])[0] # LITTLE ENDIAN, long,  sample rate in samples per second
    ByteRate      =struct.unpack('<l', data[28:32])[0] # self.SampleRate * self.NumChannels * self.BitsPerSample/8)) # (ByteRate) LITTLE ENDIAN, long
    BlockAlign    =struct.unpack('<h', data[32:34])[0] # self.NumChannels * self.BitsPerSample/8))  # (BlockAlign) LITTLE ENDIAN, short
    BitsPerSample =struct.unpack('<h', data[34:36])[0] # LITTLE ENDIAN, short
    A,  B,  C,  D      =struct.unpack('4c', data[36:40])    # BIG ENDIAN, char*4
    SubChunk2Size      =struct.unpack('<l', data[40:44])[0] # LITTLE ENDIAN, long
    waveData=data[44:]
    (M,N)=(len(waveData),len(waveData[0]))   

    print("ChunkSize     =%d\nSubchunk1Size =%d\nAudioFormat   =%d\nNumChannels   =%d\nSampleRate    =%d\nByteRate      =%d\nBlockAlign    =%d\nBitsPerSample =%d\nA:%c,  B:%c,  C:%c,  D:%c\nSubChunk2Size =%d" %
        (ChunkSize     , 
        Subchunk1Size, 
        AudioFormat   ,
        NumChannels   ,
        SampleRate    ,
        ByteRate      ,
        BlockAlign    ,
        BitsPerSample ,
        A,  B,  C,  D ,
        SubChunk2Size ))    

    if BitsPerSample==8:
        print "Unpacking 8 bits on len(waveData)=%d" % len(waveData)
        d=np.fromstring(waveData,np.uint8)
        floatdata=d.astype(np.float64)/np.float(127)    
    elif BitsPerSample==16:
        print "Unpacking 16 bits on len(waveData)=%d" % len(waveData)
        d=np.zeros(SubChunk2Size/2, dtype=np.int16)
        j=0
        for k in range(0, SubChunk2Size, 2):
            d[j]=struct.unpack('<h',waveData[k:k+2])[0]
            j=j+1
        floatdata=d.astype(np.float64)/np.float(32767)    
    elif BitsPerSample==24:
        print "Unpacking 24 bits on len(waveData)=%d" % len(waveData)
        d=np.zeros(SubChunk2Size/3,  dtype=np.int32)
        j=0
        for k in range(0, SubChunk2Size, 3):
            d[j]=struct.unpack('<l',struct.pack('c',waveData[k])+waveData[k:k+3])[0]
            j=j+1
        floatdata=d.astype(np.float64)/np.float(2147483647)    
    else: # anything else will be considered 32 bits
        print "Unpacking 32 bits on len(waveData)=%d" % len(waveData)
        d=np.fromstring(waveData,np.int32)
        floatdata=d.astype(np.float64)/np.float(2147483647)   
    v=floatdata[0::NumChannels]
    for i in range(1,NumChannels):
        v=np.vstack((v,floatdata[i::NumChannels]))
    #return (np.vstack((floatdata[0::2],floatdata[1::2])), SampleRate, NumChannels, BitsPerSample)
    return (v, SampleRate, NumChannels, BitsPerSample)

if __name__ == "__main__":
    (array,SampleRate,NumChannels,BitsPerSample)=wav_file_read("my_input_file.wav")
    wavefile=float32_wav_file("test_file.wav",array,SampleRate) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-18T00:08:58.850

我试过测试 P Moran 的代码，但绝对不行，比如 'len(int(3))?'。对不起，伙计，我认为它没有经过测试。但不要害怕，现代蟒蛇有办法！

```
import numpy as np
songtime=np.arange(0,100,60/44100.,dtype=float)
coswav=np.cos(songtime)
sinewav=np.sin(songtime)
np.column_stack((coswav,sinwav))
songwav=np.column_stack((coswav,sinwav)).astype('float32')

import scipy.io.wavfile as scipy_io_wavfile
scipy_io_wavfile.write("5secof60Hz.wav",44100,songwav) 
```

[https://docs.python.org/3.7/library/wave.html](https://docs.python.org/3.7/library/wave.html) [https://docs.scipy.org/doc/scipy/reference/generated/scipy.io.wavfile.write.html](https://docs.scipy.org/doc/scipy/reference/generated/scipy.io.wavfile.write.html)

# javascript - 动态调整skitter幻灯片图像大小

> ID：15576810
> 
> 赞同：6
> 
> 时间：2013-03-22T17:50:04.957
> 
> 标签：javascript, jquery, html, css, skitter-slider

如何将幻灯片图像的大小（缩放）调整为与 jquery 或 css 或任何其他方式不同的大小？

它总是加载主图像的全宽和全高，并且用以下方式控制是行不通的。

您可以下载[示例完整的工作skitter示例](https://github.com/thiagosf/SkitterSlideshow/zipball/master) 并自己轻松测试

[在http://www.skitter-slider.net/documentation](http://www.skitter-slider.net/documentation)中找不到帮助

可以通过以下示例代码调整图像滑块容器的大小，但如果图像大于 530 像素，则只会显示其中的一部分。

```
$(document).ready(function() {
           $('.box_skitter_large').css({width: 530, height: 110}).skitter({
                theme: 'minimalist',numbers_align: 'center'                 
            });    
        });
    </script> 
```

在 img 标签中设置图像宽度和高度也无济于事。

## 以下是原始问题中更具体的情况，可能会有所帮助。

我编写了下面的代码来使用 skitter 和 jquery 在窗口调整大小时动态调整图像大小。但它不工作请帮忙

```
<script>
$('.box_skitter_normal').addClass("z1").skitter({label: false, numbers: false});
            $('.box_skitter_normal2').addClass("z2").skitter({label: false, numbers: false});

$(window).resize(function() {
   $('.box_skitter_normal').addClass("z1").skitter({label: false, numbers: false});
            $('.box_skitter_normal2').addClass("z2").skitter({label: false, numbers: false});
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:18:05.543

一个简单的方法是将`width`图像更改为`100%`使用 css 并从 中删除/设置`width`and`height``.box_skitter``.container_skitter`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-25T12:11:42.637

我在一个类似的项目中遇到了这个问题。我尝试在 CSS 中更改每张图片的大小（有些有效，但大多数没有）我最终将每张照片转换为 PNG 并在 Photoshop 或 Paint 中调整大小（我使用了 Photoshop）。您可能知道 PNG 在调整大小时更能保持清晰度，但它确实比 JPG 占用更多空间，因此它可能不是最可取的选择，但它应该可以解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-20T11:53:13.807

将所需样式添加到以下课程解决了问题

```
.box_skitter img {      width: 530px ; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-02T13:51:36.710

你好，我做了这个 hack whit css，用于制作 dinamyc 宽度 whit skitter galery；

```
.container_skitter{
    width: 100%!important;
    height: 100%!important;
}
.image_main{
    width: 100%!important;
    height: 100%!important;
}
.box_skitter_large {
    max-width: 408px !important;
    max-height: 275px !important;
}
.box_clone{    width: 100%!important;
    height: 100%!important;}
.cube{width:100% !important;}
```

我希望这对你有用:)

# c# - 在文本框中检测到按键并接收到过载 EventHandler 错误消息

> ID：15576815
> 
> 赞同：2
> 
> 时间：2013-03-22T17:50:25.260
> 
> 标签：c#, textbox, event-handling, keypress, onkeydown

我需要一些有关我的 C# 程序的帮助，我收到一条错误消息，因为我有一个表单，用户可以在其中输入文本到文本框中。我试图检测用户是否按下了 Enter 键，这样做会产生一个带有消息的消息框。但是，我正在尝试调用“KeyEventArgs”类，它允许我检测按键，但收到以下错误消息：

**'TextBox_KeyDown' 没有重载匹配委托 'System.EventHandler'**

这是我正在使用的 TextBox 的代码：

```
 private void TextBox_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            MessageBox.Show("You have entered the correct key.");
        }
    } 
```

单击错误消息以获取更多详细信息，将我带到我正在使用的表单的 Designer 类，并在以下文本下划线：

```
 this.TextBox.KeyDown += new System.EventHandler(this.TextBox_KeyDown); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:59:56.380

改为使用`KeyEventHandler`。另外，你的名字是`TextBox`真的`TextBox`吗？不建议这样做，因为它对于您是指实例还是 TextBox 控件对象会变得模棱两可。

```
 this.TextBox.KeyDown += new KeyEventHandler(this.TextBox_KeyDown) 
```

您的错误消息是指您的方法的签名是`(object sender, KeyEventArgs e)`但您尝试传递的委托实际上具有``(object sender, EventArgs e)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:00:19.693

试试 this.TextBox.KeyDown += new System.Windows.Forms.KeyEventHandler(this.TextBox_KeyDown);

# gcc - 基于 Sandy Bridge 的 Pentium 的正确架构特定选项 (-m) 是什么？

> ID：15576817
> 
> 赞同：9
> 
> 时间：2013-03-22T17:50:34.920
> 
> 标签：gcc, compiler-optimization, compiler-flags

我正在尝试弄清楚如何`-march`正确设置选项，以查看在我的带有 gcc 4.7.2 的 PC 上启用和禁用选项之间的性能差异有多大。

在尝试编译之前，我试图找到最`-march`适合我的 PC 的选项。我的 PC 有 Pentium G850，其架构是 Sandy Bridge。所以我参考[了 gcc 4.7.2 手册](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/i386-and-x86_002d64-Options.html#i386-and-x86_002d64-Options)，发现这`-march=corei7-avx`似乎是最好的。
但是，我记得基于 Sandy Bridge 的 Pentium 缺乏 AVX 和 AES-NI 指令集支持，[Pentium G850 也是如此](http://ark.intel.com/products/53491/intel-pentium-processor-g850-3m-cache-2_90-ghz)。所以`-march=corei7-avx`不是一个合适的选择。

我提出了一些潜在的选择：

1.  `-march=corei7-avx -mno-avx -mno-aes`
2.  `-march=corei7 -mtune=corei7-avx`
3.  `-march=native`

考虑到我拥有的信息，第一个选项看起来很合理，但我担心可能缺少 AVX 和 AES-NI 以外的功能。第二个选项看起来很安全，但它可能会因为`-march=corei7`. 第三个选项将解决我所有的顾虑，但我听说这个选项有时会误检测 CPU 的功能，所以我想知道如何手动执行此操作。
我用谷歌搜索并搜索了 StackOverflow 和 SuperUser，但我找不到任何明确的解决方案......
应该设置哪些选项？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-01-27T22:09:12.363

在 i5-2450M CPU (Lenovo e520) 上通过 GCC 检测对我来说 (gcc-5.3.0) 怎么样，如下所示：

```
gcc -march=native -E -v - </dev/null 2>&1 | grep cc1

/usr/libexec/gcc/x86_64-pc-linux-gnu/5.3.0/cc1 -E -quiet -v - -march=sandybridge 
-mmmx -mno-3dnow -msse -msse2 -msse3 -mssse3 -mno-sse4a -mcx16 
-msahf -mno-movbe -maes -mno-sha -mpclmul -mpopcnt -mno-abm -mno-lwp 
-mno-fma -mno-fma4 -mno-xop -mno-bmi -mno-bmi2 -mno-tbm -mavx 
-mno-avx2 -msse4.2 -msse4.1 -mno-lzcnt -mno-rtm -mno-hle -mno-rdrnd 
-mno-f16c -mno-fsgsbase -mno-rdseed -mno-prfchw -mno-adx -mfxsr 
-mxsave -mxsaveopt -mno-avx512f -mno-avx512er -mno-avx512cd 
-mno-vx512pf -mno-prefetchwt1 -mno-clflushopt -mno-xsavec -mno-xsaves 
-mno-avx512dq -mno-avx512bw -mno-avx512vl -mno-avx512ifma 
-mno-avx512vbmi -mno-clwb -mno-pcommit -mno-mwaitx --param 
l1-cache-size=32 --param l1-cache-line-size=64 --param 
l2-cache-size=3072 -mtune=sandybridge -fstack-protector-strong 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:53:37.350

我建议使用`-march=corei7-avx -mtune=corei7-avx -mno-avx -mno-aes`. 指定很重要，`-mtune`因为这个选项告诉 gcc 它应该使用哪个 CPU 模型来调度生成的代码中的指令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-17T01:06:27.960

我有一个基于 Sandy Bridge 的 Intel(R) Celeron(R) CPU G530。

在gentoo的CFLAGS中使用`-march=native`，然后编译media-video/ffmpeg-1.2.6（Gentoo当前稳定版本），用mplayer播放视频时出现问题（非法指令）。就像你说的，`-mtune=native`有时会误检测 CPU 的特性。

然后我改成`-march=corei7-avx -mtune=corei7-avx -mno-avx -mno-aes`，重新编译ffmpeg-1.2.6和mplayer，到现在一切正常。

# mysql - 使用换行符/空格时在 MYSQL 数据库中存储查询会出错

> ID：15576818
> 
> 赞同：0
> 
> 时间：2013-03-22T17:50:38.390
> 
> 标签：mysql

我有一些查询存储在 MYSQL 数据库中，然后从数据库中提取并在例程中运行。当我不使用换行符/制表符将它们插入数据库时​​，查询运行良好，但是当我尝试运行格式良好的相同查询时（我想这样做以防我稍后需要更新查询）我得到一个错误。这是一个有效的示例和一个无效的示例（就代码而言，它们是相同的）

```
IF(@last_ranking <> formula, @current_rankings := @current_rankings + 1, @current_rankings)  AS rank, @last_ranking := formula, prequery.team, prequery.formula FROM (select @current_rankings := 0) sqlvars, (SELECT team, SUM(formula) AS formula FROM (SELECT g.home_team AS team, SUM(CASE WHEN t.team_id IS NULL THEN 0 ELSE g.home_wins END) AS formula FROM games g LEFT JOIN _top_10 AS t ON g.away_team = t.team_id WHERE g.season = ? AND g.completed = 1 GROUP BY team UNION ALL SELECT g.away_team AS team, SUM(CASE WHEN t2.team_id IS NULL THEN 0 ELSE g.away_wins END) AS formula FROM games g LEFT JOIN _top_10 AS t2 ON g.home_team = t2.team_id WHERE g.season = ? AND g.completed = 1 GROUP BY team) AS Alias,(SELECT @current_rankings := 0, @last_ranking := 0) r GROUP BY team ORDER BY formula DESC ) prequery; 
```

和

```
 IF(@last_ranking <> formula, @current_rankings := @current_rankings + 1, @current_rankings)  AS rank, 
         @last_ranking := formula, 
         prequery.team, 
         prequery.formula 
 FROM    (select @current_rankings := 0) sqlvars, 
         (SELECT     team, 
                     SUM(formula) AS formula 
         FROM        (SELECT     g.home_team AS team, 
                                 SUM(CASE WHEN t.team_id IS NULL THEN 0 ELSE g.home_wins END) AS formula 
                     FROM        games g 
                     LEFT JOIN   _top_10 AS t ON g.away_team = t.team_id 
                     WHERE       g.season = ? AND 
                                 g.completed = 1 
                     GROUP BY    team
         UNION ALL   SELECT      g.away_team AS team, 
                                 SUM(CASE WHEN t2.team_id IS NULL THEN 0 ELSE g.away_wins END) AS formula 
                     FROM        games g 
                     LEFT JOIN   _top_10 AS t2 ON g.home_team = t2.team_id 
                     WHERE       g.season = ? AND 
                                 g.completed = 1 
                     GROUP BY    team) AS Alias,
         (SELECT @current_rankings := 0, @last_ranking := 0) r 
 GROUP BY team 
 ORDER BY formula DESC ) prequery; 
```

这是怎么回事？有没有办法在数据库中存储带有空格的信息，但在运行查询时动态删除换行符/制表符/不必要的空格？

我得到的错误是

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 18 
```

# javascript - executing a function deep within arrays

> ID：15576827
> 
> 赞同：0
> 
> 时间：2013-03-22T17:50:54.377
> 
> 标签：javascript, arrays, javascript-objects

Hi I seem to be having problems executing a function deep within arrays:

```
var Segments = [Segment_1];

var Segment_1 = {
  "requirements": {
    "Dektec": "True",
    "SSH": "True"
  },
  "requests": {
    "R11": "True"
  },
  'function': function(){
     print("Hello World!");
  }
};

Segments[0]['function'](); 
```

This works if I am only one array deep though:

```
var Segments = [Segment_1];

function Segment_1() {
    print("Hello World!");
}

Segments[0](); 
```

I have seen similar questions in Stackoverflow, but all pertaining to single level array. Any idea to what I am doing wrong here? I'm sure it is something simple.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:55:52.490

You need to set `Segments` after you set `Segment_1`

```
var Segment_1 = {
    "requirements": {
        "Dektec": "True",
        "SSH": "True"
    },
    "requests": {
        "R11": "True"
    },
    'function': function(){
        document.write("Hello World!");
    }
};

var Segments = [Segment_1] 
```

You set `Segments` before you define `Segment_1`, therefore it is undefined.

# highcharts - 在 Highcharts 系列中表示稀疏数据

> ID：15576831
> 
> 赞同：3
> 
> 时间：2013-03-22T17:51:00.980
> 
> 标签：highcharts, gwt-highcharts

我正在尝试生成堆积柱形图。我想要的类似于这个[JSfiddle](http://bit.ly/WSX6xE)示例。但是，我有大约 30 个类别和 1000 个系列。该系列相当稀疏。只有大约 200 个值。但是因为 highcharts 需要每个系列在 x 轴类别中都有值，所以我不得不提交 1000 个系列，每个系列有 30 个值（大部分是零）。图表需要一分钟多的时间来呈现。我怎样才能提高这个性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:09:16.943

还有另一种方法可以将数据传递到 highcharts，您可以在其中为每个点指定 x 和 y。这意味着您可以跳过 0 值。在您引用的小提琴中，我将一行修改为：

```
data: [{x:1,y:5}, {x:3,y:7}], 
```

[http://jsfiddle.net/rh9aK/](http://jsfiddle.net/rh9aK/)

我预计1000个系列和30个类别可能仍然太多，但这值得一试。

另一件事，您是否确保没有任何仅包含零的系列？如果是这样，您最好在渲染之前将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:59:43.790

在你的情况下，JS 图表会产生太多的 DOM 元素。这对于浏览器来说太复杂了。您需要一些在图像内部生成图的服务器端解决方案。

# regex - sed 在分隔符前移动文本

> ID：15576833
> 
> 赞同：1
> 
> 时间：2013-03-22T17:51:13.810
> 
> 标签：regex, sed, awk

我有一个如下所示的 csv 文件：

```
"foo","bar","lorem","ipsum"
"foo"."bar","XX lorem","ipsum" 
```

我需要在以“xx”结尾的字段中转换以“xx”开头的字段：

```
"foo","bar","lorem","ipsum"
"foo"."bar","lorem xx","ipsum" 
```

sed（或 awk）可以帮助我吗？（“xx”是一个字符串而不是一个正则表达式结果）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:55:02.357

```
sed -r 's/XX ([^"]+)/\1 XX/' filename 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T17:59:41.097

```
sed -r 's/"(XX) ([^"]*)"/"\2 \1"/g' 
```

测试：

```
kent$  echo '"foo","bar","lorem","ipsum XX"
"foo"."XX bar","XX lorem","ips XX um"'|sed -r 's/"(XX) ([^"]*)"/"\2 \1"/g'
"foo","bar","lorem","ipsum XX"
"foo"."bar XX","lorem XX","ips XX um" 
```

**注意**：

*   这将对所有以 XX 开头的字段执行此逻辑。
*   XX 在字段中，但不是在起点，将被忽略（参见上面的示例）
*   **！！！如果 XX 在正则表达式中有具有特殊含义的字符，则该命令可能会失败。例如，如果 XX 是`.*`**

# mysql - 为什么事务时间不包含在 MySQL 慢查询日志锁定时间中

> ID：15576834
> 
> 赞同：0
> 
> 时间：2013-03-22T17:51:16.237
> 
> 标签：mysql, sql, transactions, locking

## 问题

在 MySQL 慢查询日志中，我看到查询需要大量时间，这是因为多个并发事务正在更新同一行：

```
# Time: 130322 17:42:07
# User@Host: root[root] @ localhost [127.0.0.1]
# Query_time: 48.500955  Lock_time: 0.000062 Rows_sent: 0  Rows_examined: 1
use test;
SET timestamp=1363974127;
UPDATE test SET count = count + 1 WHERE id = 1; 
```

为什么等待的事务不计入 Lock_time 以及什么计入？

## 重现

这是重现慢查询条目的方法。创建表：

```
CREATE TABLE test (
   id INT PRIMARY KEY,
   count INT NOT NULL
); 
```

然后插入一行：

```
INSERT INTO test VALUES (1,1); 
```

如果我在关闭自动提交的情况下启动 2 个与数据库的连接并在第一个连接中运行：

```
BEGIN;
UPDATE test SET count = count + 1 WHERE id = 1; 
```

然后使用第二个连接运行：

```
BEGIN;
UPDATE test SET count = count + 1 WHERE id = 1;
COMMIT; 
```

然后等待一小段时间使这个查询变慢，然后返回第一个连接并执行提交：

```
COMMIT; 
```

我从问题的开头得到了慢查询条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:25:09.983

事实证明，这是 MySQL 中的一个错误，它没有报告 InnoDB 下的完整锁定时间，并在 MySQL 5.5.6 中修复：

[http://bugs.mysql.com/bug.php?id=53496](http://bugs.mysql.com/bug.php?id=53496)

# actionscript-3 - ActionScript 3.0 - 读取每个 MXML 元素

> ID：15576835
> 
> 赞同：0
> 
> 时间：2013-03-22T17:51:25.307
> 
> 标签：actionscript-3, apache-flex, mxml

**如果已经有这个帖子，我很抱歉，但我找不到它。**

我有以下表格（样本）：

```
<mx:Label x="105.5" y="0" text="Cadastramento Basico" fontSize="22"/>
<mx:Text x="140" y="42" text="Nome:"/>
<mx:TextInput x="176" y="40" id="nome"/>
<mx:Text x="138" y="74" text="E-mail:"/>
<mx:TextInput x="177" y="72" id="email"/>
<mx:Text x="125" y="105" text="Telefone:"/>
<mx:TextInput x="177" y="103" restrict="012456789" id="telefone"/> 
```

在用户单击提交按钮后，我需要阅读 ActionScript 中的每个元素以清理每个元素。在 jQuery 中我们有函数`elements.each()`，我只需要这样的东西。

请问我该怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T18:38:43.060

1.  在提问之前，请确保您[阅读了文档：](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7e53.html#WS2db454920e96a9e51e63e3d11c0bf62f1b-7fdd)

2.  您应该将表单包装到`<mx:Form>`标签中：

    ```
    <mx:Form id="myForm" label="Cadastramento Basico">
        <mx:FormItem label="Nome:" >
            <<mx:TextInput id="nome"/>
        </mx:FormItem>
        <mx:FormItem label="E-mail:" >
            <<mx:TextInput id="mail"/>
        </mx:FormItem>            
        <mx:FormItem label="Telefone:" >
            <<mx:TextInput id="telefone" restrict="012456789"/>
        </mx:FormItem>
    </mx:Form> 
    ```

3.  然后通过运行表单的所有项目手动执行此操作，并检查它们是否具有正确的类型和要重置的有效属性（如有必要，将它们添加到下面的代码中）。

    ```
    private function clearForm():void
    {
         for each(var o:* in loginForm.getChildren() ){
             if(o is FormItem){
                 var item:FormItem = o as FormItem;
                 for each(var o2:Object in item.getChildren()){
                     if(o2.hasOwnProperty("text")) {
                         o2.text = "";
                     }
                 }
              }
         }
    } 
    ```

# wpf - 在 WPF MVVM 中的视图之间导航

> ID：15576838
> 
> 赞同：7
> 
> 时间：2013-03-22T17:51:43.177
> 
> 标签：wpf, visual-studio, mvvm, blend

我是 WPF 和 MVVM 的新手，正在开发一个有几个视图的应用程序。现在我在 shellView 的上下文中显示了一个 View(HomePageView)。现在使用 HomePageView 中的一个按钮，我想加载另一个视图来代替当前显示的 HomePageView。在谷歌上查找后，我发现了一些关于事件聚合器的信息。我会要求有人解释实现或直接指向一个好的示例应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T18:16:23.010

如果您是 WPF MVVM 的新手，我建议您首先选择一个不错的帮助工具

有很多选择。MVVM 光、棱镜、MEF

我建议使用 MVVM 灯。简单且易于启动和运行。Prism 不仅仅是一个 MVVM Helper，还包括辅助 MVVM 的功能。我本人对 MEF 或 Caliburn Micro 之类的东西并没有做太多。

至于解释视图之间的导航如何与 MVVM Light 一起使用的示例，请尝试：

[http://www.codeproject.com/Articles/323187/MVVMLight-Using-Two-Views](http://www.codeproject.com/Articles/323187/MVVMLight-Using-Two-Views)

CodePlex 上的 MVVM 灯：

[http://mvvmlight.codeplex.com/](http://mvvmlight.codeplex.com/)

^^ 链接转发了一些完全值得观看的视频演示

使用 MVVM Light 的另一个不错的示例：

[http://apuntanotas.codeplex.com/](http://apuntanotas.codeplex.com/)

这些应该可以帮助您入门，并且对于特定问题，您总是可以得到[https://stackoverflow.com/questions/tagged/wpf](https://stackoverflow.com/questions/tagged/wpf) :)

# database - 在 Linux 中打开 MS Access 文件

> ID：15576840
> 
> 赞同：1
> 
> 时间：2013-03-22T17:51:45.407
> 
> 标签：database, linux, qt, odbc

我正在尝试在 Linux 中使用 QT 打开 MS Access 数据库文件。

所以，我已经安装了带有 unixODBC 的 Easysoft MS Access ODBC 驱动程序。有我的 odbc.ini 文件：

```
[Easysoft ODBC-ACCESS]
Description = MS Acess db driver
Driver = /usr/local/easysoft/access/lib/libesmdb.so
Setup = /usr/local/easysoft/access/lib/libesmdbS.so 
```

并且有 odbcinst.ini 文件：

```
[ACCESS_SAMPLE]
Driver = Easysoft ODBC-ACCESS
mdbfile = /home/user/personal_base.mdb 
```

另外，我已经为 qt 安装了 odbc 插件：

```
sudo apt-get install libqt4-sql-odbc 
```

现在如何在**Linux**中使用 Qt 打开 mdb 文件？

在 MS Windows 中，我这样做：

```
bool createConnection()
{
    QSqlDatabase db = QSqlDatabase::addDatabase("QODBC");
    db.setDatabaseName("Driver={Microsoft Access Driver (*.mdb, *.accdb)};DSN='';DBQ=C:/personal_base.mdb");
    if (!db.open()) {
        QMessageBox::warning(0, QObject::tr("Database Error"), db.lastError().text());
        return false;
    }
    return true;
} 
```

我尝试将 db.setDataBaseName 更改为

```
...
db.setDatabaseName("Driver={Easysoft ODBC-ACCESS};DSN='ACCESS_SAMPLE'");
... 
```

但它返回一个错误：

```
[unixODBC][Driver Manager]Data source name not found, and no default driver specified QODBC3: Unale to connect 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:11:17.010

下面是一些代码，用于构建正确的 DSN，以便从 Mac、Linux 和 Windows 连接到 SQL Server。我相信您的连接字符串在您的代码中不正确。也许它会帮助你开始。

```
QString SQLServerProvider::buildDSN(QString server, QString database, QString username, QString password)
{
#ifdef Q_WS_MACX
    QString dsn = QString("DRIVER=/usr/local/lib/libtdsodbc.so;SERVER=%1;TDS_VERSION=8pClient;DATABASE=%2;PORT=1433;UID=%3;PWD=%4;").arg(server).arg(database).arg(username).arg(password);
#endif

#ifdef Q_WS_X11
    QString dsn = QString("DRIVER={FreeTDS};SERVER=%1;TDS_VERSION=8.0;PORT=1433;DATABASE=%2;UID=%3;PWD=%4;").arg(server).arg(database).arg(username).arg(password);
#endif

#ifdef Q_WS_WIN
    QString dsn = QString("DRIVER={SQL SERVER};SERVER=%1;DATABASE=%2;UID=%3;PWD=%4;").arg(server).arg(database).arg(username).arg(password);
#endif
    return dsn;
} 
```

我知道您正在尝试连接到 Microsoft Access 数据库，但也许如果您替换 Q_WS_X11 部分中的 FreeTDS 和其他一些参数，那可能对您有用。我以前没有使用过 Easysoft ODBC-ACCESS，所以我不能 100% 确定应该如何为这个驱动程序格式化 DSN。如果您还没有阅读，请阅读[此处](http://www.easysoft.com/developer/interfaces/odbc/linux.html)，因为它解释了如何使用 isql 测试 ODBC DSN 连接。如果您需要进一步的帮助，请告诉我，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:46:55.407

尝试更改您的 DSN-Less 连接以查看：-

```
Driver=/usr/local/easysoft/access/lib/libesmdb.so;mdbfile=/home/user/personal_base.mdb 
```

添加您的机器库路径：-

```
export LD_LIBRARY_PATH=/usr/local/easysoft/lib:/usr/local/easysoft/access/lib:/usr/local/easysoft/unixODBC/lib:$LD_LIBRARY_PATH 
```

最后发送电子邮件至 support@easysoft.com 并向他们索取最新版本的驱动程序。

# java - Java，将字符串写入记事本文件

> ID：15576842
> 
> 赞同：-3
> 
> 时间：2013-03-22T17:51:48.050
> 
> 标签：java, notepad

我只是想在记事本文件中添加一个字符串。让我们将记事本文件称为“Values.txt”说我有；

```
public static void main(String[] args) {

String myText = "Let's add this string to a notepad file";

// Code to add string to a notepad file

} 
```

那个代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:59:15.303

看看[基本 I/O 教程](http://docs.oracle.com/javase/tutorial/essential/io/index.html)。它只是在操作一个文本文件。您的所有需求都应该在那里得到满足。

# iphone - 我们如何为 UIlocalNotifications 每两周（一个月两次）设置重复间隔？

> ID：15576846
> 
> 赞同：1
> 
> 时间：2013-03-22T17:51:54.550
> 
> 标签：iphone, ios, objective-c, uilocalnotification, nscalendar

我们如何为 UIlocalNotifications 每两周（一个月两次）设置重复间隔？

```
UILocalNotification *local = [[UILocalNotification alloc]init];
local.repeatInterval = NSWeekdayCalendarUnit; 
```

我已将其设置为工作日，但是是否有任何选项可以将通知设置为每次触发

一个月的 1 号/15 号？

# javascript - 制作电子邮件表格 发送电子邮件

> ID：15576861
> 
> 赞同：1
> 
> 时间：2013-03-22T17:52:57.130
> 
> 标签：javascript, html, email

我有来自 HTML 模板的电子邮件表单的以下代码。我想让它发送电子邮件，因为我认为它没有，我需要添加一些 javascript 来处理表单。有关如何为此表单执行此操作的任何提示？

谢谢！

```
<!-- Email -->
<article id="email" class="panel">
    <header>

<h2>Email Me</h2>

    </header>
    <form action="#" method="post">
        <div class="5grid">
            <div class="row">
                <div class="6u">
                    <input type="text" class="text" name="name" placeholder="Name" />
                </div>
                <div class="6u">
                    <input type="text" class="text" name="email" placeholder="Email" />
                </div>
            </div>
            <div class="row">
                <div class="12u">
                    <input type="text" class="text" name="subject" placeholder="Subject" />
                </div>
            </div>
            <div class="row">
                <div class="12u">
                    <textarea name="message" placeholder="Message"></textarea>
                </div>
            </div>
            <div class="row">
                <div class="12u">
                    <input type="submit" class="button" value="Send Message" />
                </div>
            </div>
        </div>
    </form>
</article> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:54:29.363

Javascript 无法发送电子邮件（除非它使用 AJAX 调用服务器端方法）。您需要一种服务器端语言（例如 C#、php、ColdFusion 等）。

# android - MediaMetadataRetriever 导致大部分为空值

> ID：15576862
> 
> 赞同：0
> 
> 时间：2013-03-22T17:52:59.303
> 
> 标签：android

我正在尝试从一些音乐文件中获取 mp3 标签

```
MediaMetadataRetriever mmr = new MediaMetadataRetriever();

File filenm = new File(path, availableFiles[0]);
mmr.setDataSource(showFileActivity.this,Uri.fromFile(filenm));
String column = mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE): 
```

我可以获得正确的 DURATION 和 BITRATE 标签，所以我知道我在正确的文件上设置了数据源，但其他所有内容都返回 null。存在其他标签，例如专辑，因为我可以从设备中提取文件并验证它们是否存在。

有没有更好的方法来获取 mp3 标签？我做错了吗？

# java - 在 Hibernate 中使用 Criteria 时如何访问内部属性的内部？

> ID：15576863
> 
> 赞同：0
> 
> 时间：2013-03-22T17:53:04.207
> 
> 标签：java, hibernate

我有一个类`Patient`，它有一个类的引用`PatientBasic`。像这样

```
public class Patient{
       PatientBasic patientBasicInfo;
}

public PatientBasic{
       String firstName;
       ....
} 
```

我想像这样在 Hibernate 中制定一个标准：

```
Criteria criteria=session.createCriteria(Patient.class, "patient");
criteria.add(Restrictions.ilike("patient.patientBasicInfo.firstName", filter+"%")); //Throws exception 
```

但这会引发异常。正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:02:12.583

在这种简单的情况下不需要别名：

```
 Criteria criteria=session.createCriteria(Patient.class);
    criteria.createCriteria("patientBasicInfo")
                .add(Restrictions.ilike("firstName", filter+"%"));
    List<Patient> patients = criteria.list(); 
```

# vb.net - StackOverFlowException 在 For 循环上未处理

> ID：15576868
> 
> 赞同：0
> 
> 时间：2013-03-22T17:53:07.963
> 
> 标签：vb.net, exception, stack-overflow

我刚刚使我的卡片选择动态化，而不是 5 个 if/elseif 语句的序列。

```
Private Sub PlayElse()
    Dim StartHeads As Integer
    Dim CardCheckBoxArray() As CheckBox = {CardCheckBox1, CardCheckBox2, CardCheckBox3, CardCheckBox4, CardCheckBox5, CardCheckBox6, CardCheckBox7, CardCheckBox8, CardCheckBox9, _
                                          CardCheckBox10, CardCheckBox11, CardCheckBox12, CardCheckBox13, CardCheckBox14, CardCheckBox15, CardCheckBox16, CardCheckBox17, _
                                          CardCheckBox18, CardCheckBox19, CardCheckBox20, CardCheckBox21, CardCheckBox22, CardCheckBox23, CardCheckBox24, CardCheckBox25}
    'Reset Number Generator
    Number = (DeckGroup(Rnd.Next(0, DeckGroup.Count)).ID)

    'card 1-5
    For StartHeads = 0 To 4
        If CardCheckBoxArray(StartHeads).Checked = True And DeckGroup(Number).QuantityInteger > 0 Then
            'Grab New Card From Deck
            DeckGroup(Number).QuantityInteger -= 1
            Player1HandGroup(Number).QuantityInteger += 1
            CardTypeArray(StartHeads) = Player1HandGroup(Number).CardType
            CardCheckBoxArray(StartHeads).Text = Player1HandGroup(Number).CardNameString
            NumberArray(StartHeads) = Number
        Else
            Call PlayElse()
        End If 
```

这是我的原始代码（注意有一个 End If。我只是不想通过卡片 2-5 重复代码）

```
If CardCheckBox1.Checked = True And DeckGroup(Number).QuantityInteger > 0 Then
    'Grab New Card From Deck
    DeckGroup(Number).QuantityInteger -= 1
    Player1HandGroup(Number).QuantityInteger += 1
    CardTypeArray(0) = Player1HandGroup(Number).CardType
    CardCheckBox1.Text = Player1HandGroup(Number).CardNameString
    NumberArray(0) = Number 
```

什么都没有真正改变，除了任何带有 0 的点都没有由循环中的相应数字表示。我的项目中有几个与此类似的循环，但不知何故，这是一个获得 stackoverflow 异常的循环。CardCheckBoxArray 中的 CardCheckBoxes 最多为 25，因为游戏中有 5 个玩家。在此特定语句中，任何超过 6 的 CardCheckBox 都不会被访问，因为此逻辑仅代表玩家 1 的牌。（忘记提及错误发生时，继续按钮会导致子过程的顶部，突出显示`Private Sub Playelse()`。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:13:39.963

堆栈溢出异常的最常见原因（如这里的情况）是当您有一个递归方法调用自身太多次时。每次方法调用自身时，都会向堆栈添加更多数据。在方法退出之前，数据不会从堆栈中删除。例如，以下方法保证会抛出 a `StackOverFlowException`：

```
Public Sub Fail(count As Integer)
    Fail(count + 1)
End Sub 
```

如您所见，`Fail`在我的示例中，当调用该方法时，它会一遍又一遍地无限地调用自己，永远不会退出。因此，堆栈上的数据不断增长，直到最终耗尽空间并引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:10:18.637

`Sub PlayElse`在这种情况下递归调用自身`Else`。您始终必须确保递归在某个点终止，否则您最终会陷入无限递归，从而引发堆栈溢出异常。

条件`If`说。`... And DeckGroup(Number).QuantityInteger > 0`如果是这种情况`DeckGroup(Number).QuantityInteger`，则减少。在某些时候它将为零并且`Else`将执行案例，调用`PlayElse`which 将再次执行`Else`案例，因为`QuantityInteger`现在为零，依此类推。

应该`Call PlayElse()`是在`Then`案件结束时代替吗？

# http - 是否存在根据定义无效的 mime 类型？

> ID：15576871
> 
> 赞同：0
> 
> 时间：2013-03-22T17:53:15.283
> 
> 标签：http, mime-types, content-type

我正在使用 Node.js 编写一个 http 中间件，该中间件响应具有特定内容类型设置为标头的请求。现在我想对中间件不响应具有“错误”内容类型的请求进行单元测试。

当然，我基本上可以为此使用*任何*我的组件不支持的内容类型，但我想知道是否有打算在这种情况下使用的内容类型（类似于域[示例.com](http://www.iana.org/domains/example)仅用于说明目的，可用于文档。

有没有类似`content/invalid`或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:03:25.340

简而言之：没有。您可以通过在前面加上 prs 来拥有“个人”或“虚荣”的 mime 类型。[媒体类型规范、个人/虚荣类型](https://www.rfc-editor.org/rfc/rfc4288#section-3.3)……但根据定义，没有任何 mime 是无效的。有过时的和已删除的，但根据定义它们并不是无效的。

因此，您几乎可以做任何您想做的事情，例如`content/prs.golo.impossibru`或使用矛盾修饰法，例如`content/swift-government-action`- 或其他任何东西。这有点像在某些语言中“foo”和“bar”是如此常见的示例变量名称，而在其他语言中却没有这样做。在 mime 类型中似乎没有这样的约定。

这至少部分是因为它几乎从来都不是无效的 mime 类型，因为如果发生错误，通常是 mime 是一回事，但实际发送的内容与它不匹配。

# linux - 我的主目录与“/var/www/”Apache Linux 相同

> ID：15576875
> 
> 赞同：0
> 
> 时间：2013-03-22T17:53:40.280
> 
> 标签：linux, apache, directory, home-directory

我在我的 RaspberryPi 上运行一个小型网络服务器，并在上面安装了 Apache2。一切正常，我可以从其他计算机等加载 html、php 和 javascript。但是，我遇到的问题是，当我安装 Apache 时，它​​使我的主目录与“/var/www/”相同" 应该存储所有网页的地方。我该如何更改它，因为我很确定主目录应该与我的服务器分开。

```
pi@raspberrypi:~$ pwd
/var/www
pi@raspberrypi:~$ cd /var/www
pi@raspberrypi:~$ ls
cookies.png  Desktop  hello.php  index.html  test.cpp  test.html  testImage
pi@raspberrypi:~$ 
```

编辑：我正在运行默认的 Raspbien OS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:04:23.493

`/var/www/`是 Apache2 的默认安装目录。

[https://help.ubuntu.com/12.10/serverguide/serverguide.pdf](https://help.ubuntu.com/12.10/serverguide/serverguide.pdf)

假设您安装了 Ubuntu，请阅读文档

你会偶然发现以下文本：

> 1.2.1。基本设置 本节介绍 Apache2 服务器的基本配置参数。有关详细信息，请参阅 Apache2 文档 3。• Apache2 附带了对虚拟主机友好的默认配置。也就是说，它配置了一个默认虚拟主机（使用 VirtualHost 指令），如果您有一个站点，可以修改或按原样使用，如果您有多个站点，则可以用作其他虚拟主机的模板。如果不理会，默认虚拟主机将用作您的默认站点，或者站点用户将查看他们输入的 URL 是否与您的任何自定义站点的 ServerName 指令不匹配。要修改默认虚拟主机，请编辑文件 /etc/apache2/sites-available/default 。

履行

`texteditor /etc/apache2/sites-available/default`

用您喜欢的编辑器替换*texteditor 。*`nano`等`vi`。

请记住在进行更改之前进行备份。

进行更改后，您对运行感到满意：

`service apache2 restart`

完成对配置文件的更改。

**编辑：**

运行以下命令：

`usermod -d /path/to/new/homedir/ username`

作为超级用户组的成员登录时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:33:49.960

您可以在**/etc/passwd**中使用您的主目录的新路径编辑您的用户行。或者如上所述
运行**usermod 。**

# ios - UITableViewCell 不水平剪辑内容

> ID：15576877
> 
> 赞同：1
> 
> 时间：2013-03-22T17:53:46.963
> 
> 标签：ios, objective-c, uitableview, cocoa-touch

是否可以有一个`clipsToBounds`设置为的表格视图`YES`并允许 UITableViewCells 的部分内容从单元格的左侧和右侧突出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:03:41.757

不，要么整件事情都被剪裁了，要么没有。您可以做的是让父视图中的表格视图与所需高度和屏幕一样宽，并将其设置为剪辑。

![在此处输入图像描述](../Images/8541587ac2b774c8c29acd4441422b50.png)

# java - 使用 EJB，ClientEJB 无法识别 EJB 项目中的域对象

> ID：15576880
> 
> 赞同：2
> 
> 时间：2013-03-22T17:53:55.387
> 
> 标签：java, ejb

这可能是我犯的一个愚蠢的错误，但在这里：

我创建了一个名为 XXEar 的企业应用程序项目（我使用的是 Eclipse Indigo）。然后我创建了一个名为 XXEJB 的 EJB 项目，并将其添加到 EAR 成员资格 (XXEar)。同时创建 XXEJBClient 和 XXEJBClient.jar。这样每次我需要与 XXEJB 中的域交互时，我都会使用 XXEJBClient 中定义的接口，只需要将 XXEJBClient.jar 提供给其他项目。最后，我创建了一个名为 XXWeb 的动态 Web 项目。

所以问题是，在我的 XXWeb 中，我有我的 JSP 和 servlet，在 glassfish 中部署了 .ear，我可以通过使用 XXEJBClient 中的接口向数据库添加信息来访问 XXEJB 中的域。像这样：

在 XXEJBClient 中

```
@Local
public interface UserHandlerLocal {

public void addUser(String name, int NPC);

} 
```

这可行，但如果我想获得一个“用户”对象，它不会让我给出错误

```
@Local
public interface UserHandlerLocal {

public void addUser(String name, int NPC);

public User getUser(int NPC);

} 
```

项目设置中是否缺少某些内容？

* * *

编辑：完成这项工作的一件事是只创建 XXEJB 而没有创建 XXEJBClient 和 XXEJBClient.jar 在编写完域类之后，我创建了 XXEJBClient 并设法将主要操作伪装成 XXWeb。

不幸的是，如果我想向域中添加新类，我不知道如何更新 XXEJBClient.jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:49:53.373

检查 XXEJBClient.jar 是否同时包含 User.class 和 UserHandlerLocal.class。

您需要在客户端和服务器端查看这两个类文件。

并且两个类文件应该完全相同（先编译，然后复制）。如果由于某种原因您编译了两次相同的 java 文件（一次用于服务器端，一次用于客户端），那么您需要将串行版本 id 添加到 java 类：

```
private static final long serialVersionUID = 1; 
```

# c# - 端口上的 TcpClient 分布

> ID：15576884
> 
> 赞同：0
> 
> 时间：2013-03-22T17:54:19.873
> 
> 标签：c#, port, tcpclient, tcplistener

为 3000 个 TcpClients 侦听 1 个端口和为 30 个 TcpClients 侦听 100 个端口之间有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:02:35.360

好吧，在您的 TCP 服务器上，您将打开 1 个侦听套接字而不是 100 个。管理 100 个侦听端口会很困难。

TCP 流量将是相同的，因为您在每种情况下都有相同数量的连接，但是管理这么多不同的套接字会产生更多开销。

如果您的目标是分散服务器上的负载，那么创建额外的侦听端口并不是真正的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:11:56.867

```
Thats a bit Correct ,managing so many ports are difficult. but opening single port for so many for eg 1 serversocket for 3000 clients will surely degrade the performance and make lot of delay.

Now if two clients send data simultaneously, server can only process them sequentially. So second client won't get processed until server is done processing with first. 
```

# javascript - 如何根据缩放级别在 Bing 地图上显示一定数量的 PushPins？

> ID：15576903
> 
> 赞同：1
> 
> 时间：2013-03-22T17:55:25.373
> 
> 标签：javascript, bing-maps, pushpin

在我的 Web 应用程序中，PushPin 表示位于区域中的设备，它根据两个操作在 Bing 地图上显示 PushPin：

*   一种是当用户想要显示所有注册的设备时。

*   第二个是当服务器向网站发送一个必须显示特定设备的信号时。

问题是一个地区有几个设备，当地图缩小到 5 级时，它们看起来都很乱。

有没有办法根据缩放级别限制 Bing 地图上显示的现有 PushPins 的数量？就像在第 5 级只显示一个 PushPin 一样，在更高的缩放级别上增加显示的数量，以便在第 15 级显示所有现有的 PushPin。

我尝试了 EnableShapeDisplayThreshold 方法，但似乎只适用于折线和多边形，而不适用于 PushPins。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:52:50.030

您要做的是使用称为聚类，它根据缩放级别和当前地图视图对标记（图钉）进行分组。

**参考：**

根据您当前使用的方法 ( `EnableShapeDisplayThreshold`)，我假设您使用的是 v6.3，因此您应该能够使用该`VEShapeLayer.SetClusteringConfiguration()`方法：

[http://msdn.microsoft.com/en-us/library/cc966930.aspx](http://msdn.microsoft.com/en-us/library/cc966930.aspx)

**示例代码：**

在这里行动：http: [//msdn.microsoft.com/en-us/library/cc980909.aspx](http://msdn.microsoft.com/en-us/library/cc980909.aspx)

# joomla2.5 - Facebook评论框在Joomla文章中不起作用，在K2中起作用

> ID：15576908
> 
> 赞同：0
> 
> 时间：2013-03-22T17:55:45.353
> 
> 标签：joomla2.5, facebook-comments, joomla-k2

我们主要将 K2 用于我们网站上的内容，但它没有有效的分页功能，而 Joomla 有。我们刚开始使用 Joomla 文章，我正在尝试匹配两者之间的设计。让我感到困惑的一件事是 Facebook 评论框。

facebook 评论在 K2 中有效，但在 Joomla 文章中无效，即使代码相同。这是我在body标签之后使用的代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=354401011334700";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

这就是我对文章评论框的看法：

```
<div class="fb-comments" data-href="<?php echo HTTP_SERVER . $_SERVER['REQUEST_URI']; ?>"
data-width="450" data-num-posts="5" data-colorscheme="light"></div> 
```

奇怪的是，如果你查看源代码，它就在那里。它只是不会显示它。有什么想法吗？

顺便说一句，我们正在使用 Joomla！v2.5.8。

如果您想查看页面（注释框应该出现在 AddThis 按钮之后）：

K2 文章 – [http://sciality.com/the-feed/robot-weight-loss-coach-helps-humans-slim-down.html](http://sciality.com/the-feed/robot-weight-loss-coach-helps-humans-slim-down.html)

Joomla 文章 – [http://sciality.com/SCIFI/top-10-most-anticipated-scifi-movies-of-2013.html](http://sciality.com/SCIFI/top-10-most-anticipated-scifi-movies-of-2013.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T09:01:30.220

已经使用可用的插件来处理原生 joomla artcles，它工作得很好。例如，Joomla Sp 评论与原生文章配合得很好，甚至为文章提供了审核空间。

# actionscript-3 - 如果目标以“结果”开头，则 Flex 3.5 绑定失败

> ID：15576909
> 
> 赞同：1
> 
> 时间：2013-03-22T17:55:48.150
> 
> 标签：actionscript-3, apache-flex, flex3

好吧，尽管标题看起来很奇怪，但以下应用程序无法在 Flex3.5 中按预期工作：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="vertical">
    <mx:TextInput id='ti'/>
    <mx:Text id='result' text="{ti.text}"/>
</mx:Application> 
```

为了回应评论并增加问题的清晰度：在这里，绑定机制不会更新`result`Text on typing in `ti`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:58:01.953

经过一天的调试和检查生成的动作脚本，问题被发现是`Text`元素的名称。将其重命名为其他任何东西都有效。我知道为什么在查看生成的代码后它会失败——生成的代码有一个内部变量“结果”，它与此处的目标名称冲突。所以，这行得通。注意`result1`

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="vertical">
    <mx:TextInput id='ti'/>
    <mx:Text id='result1' text="{ti.text}"/>
</mx:Application> 
```

我发帖的原因是，我希望其他出现这种混乱行为的人能在谷歌中找到有用的东西！

我在这里也有一个问题。我在 Flex 4 上尝试过同样的事情，但它并没有落入同样的谬误。Flex 4 还生成了带有内部变量名称“result”的代码，但幸运的是避免了冲突，因为 Binding 构造函数中的 destFunction 设置为 null。OTOH，在 Flex3.5 中，它传递了一个执行实际赋值的匿名函数`result.text=value`，从而导致编译器混淆。我的问题是，我可以说服 Flex4 生成类似的匿名函数（因此有相同的错误）吗？

# iphone - 如何在使用 AVAudioPlayer 播放 mp3 时将视频静音

> ID：15576913
> 
> 赞同：1
> 
> 时间：2013-03-22T17:56:01.710
> 
> 标签：iphone, ios, mpmovieplayercontroller, avaudioplayer

我有一个带音频的视频和一个 mp3。我想在播放 mp3 时静音播放视频（音频关闭）。我`MPMoviePlayerController`用来播放视频和`AVAudioPlayer`播放 mp3。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:42:39.727

MPMoviePlayerController does not appear to give you any control over volume. I would suggest you have a look at [AVPlayer](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html) and the accompanying examples. It's a bit more work to play video, but you can use the "muted" property to do exactly what you want.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:11:39.017

您实际上可以使用`MPMusicPlayerController`来实现您的目标。

```
- (void)muteVidepPlayer:(BOOL)muteFlag
{
    MPMusicPlayerController *musicPlayer = [MPMusicPlayerController applicationMusicPlayer];
    if (muteFlag)
    {
        self.lastVolume = musicPlayer.volume; 
        [musicPlayer setVolume:0.0f];
    }
    else
    {
        [musicPlayer setVolume:self.lastVolume];
    }
} 
```

它的作用是使用一个`MPMusicPlayerController`允许您调整音量的实例。不要太困惑，这也将有效地调整您的`MPMoviePlayerController`实例的音量。这是因为`MPMoviePlayerController`MPMusicPlayerController 都使用应用程序音频会话（默认情况下）。

为了确保您能够将音量重置为以前的设置，此方法尝试将该值存储在播放控制器/视图控制器/其他类型的`float`( ) 类型的实例变量中。`self.lastVolume`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:55:46.317

我选择回答我自己的问题：@nickbona 答案很好，但没有简单的示例代码。所以解决的办法是用AVPlayer代替MPMoviePlayerController。

因此，如果其他人需要它，我在这里提供一个简单的源代码示例：

```
//init player
AVAsset *asset = [AVURLAsset URLAssetWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"yourfile" ofType:@"mp4"]] options:nil];
AVPlayerItem *anItem = [AVPlayerItem playerItemWithAsset:asset];
AVPlayer *myPlayerController = [AVPlayer playerWithPlayerItem:anItem];

//disable audio (this is the version when you have more than one video in the playlist: i write this version so it should be more useful)
NSArray *playerTracks = [asset tracksWithMediaType:AVMediaTypeAudio];
NSMutableArray *playerParams = [NSMutableArray array];
for (AVAssetTrack *track in playerTracks) {
    AVMutableAudioMixInputParameters *audioInputParams =    [AVMutableAudioMixInputParameters audioMixInputParameters];
    [audioInputParams setVolume:0.0 atTime:kCMTimeZero];
    [audioInputParams setTrackID:[track trackID]];
    [playerParams addObject:audioInputParams];
}
AVMutableAudioMix *muteAudioMix = [AVMutableAudioMix audioMix];
[muteAudioMix setInputParameters:playerParams];
[[myPlayerController currentItem] setAudioMix:muteAudioMix]; 
```

希望它可以提供帮助。

# php - 为 json 字符串提供格式

> ID：15576918
> 
> 赞同：1
> 
> 时间：2013-03-22T17:56:14.417
> 
> 标签：php, jquery, html, json, format

我有这个 PHP 代码，它从数据库中检索并保存一个字段

```
$dblink = mysql_connect('localhost', 'root', '') or die( mysql_error() );
mysql_select_db('payment');

$query = mysql_query("SELECT level FROM levelPrice WHERE code = 101");
$rows = array();
while($r = mysql_fetch_assoc($query)) {
    $rows[] = $r;
}
echo json_encode(array("#" => $rows));
?> 
```

在我的 HTML 中，我有这个：

```
 <script>
    $.getJSON('getLevel.php', function(data) { 
    $("#level").val(JSON.stringify(data));
    });
  </script> 
```

问题是，它确实返回了值，但它出现了很多垃圾。它在网站上看起来像这样：`{"#":[{"level":"4"}]}` 当我只需要数字（例如＃4）出现在网站上时，没有所有的括号和东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:01:56.840

您只需要从数据库中获取一行。

```
$query = mysql_query("SELECT level FROM levelPrice WHERE code = 101");
$row = mysql_fetch_assoc($query);
echo json_encode(array("#" => $row['level'])); 
```

然后代码只创建一个简单的数组，然后 JSON 对其进行编码，输出如下：

```
{'#': 'LEVEL-HERE'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:01:05.433

您正在使用一个函数从 javascript 获取 json，并且在 php 脚本中回显 json。所以结果将是json。

你可以[`load`](http://api.jquery.com/load/)在你的情况下使用：

```
$("#level").load('getLevel.php'); 
```

并将您的`echo`声明更改为：

```
echo '#' . $rows[0]; 
```

您也不需要生成数组，但如果您愿意，可以自行更改。

# javascript - 单选按钮验证：javascript

> ID：15576919
> 
> 赞同：2
> 
> 时间：2013-03-22T17:56:19.980
> 
> 标签：javascript, jquery, ajax

我有一个注册表单，想在性别部分单选按钮上添加验证。我的表格就像

```
<form name="formreg" enctype="multipart/form-data" method="post">
     <input type="radio" value="male" name="gender" /> Male<br />
      <input type="radio" value="female" name="gender" /> Female<br />
      <input value="Submit" onclick="return inputval()" type="submit" />
    </form> 
```

我使用下面的脚本但不能正常工作..

```
<script type="text/javascript">
     function inputval(){
        if(document.getElementById("gender").checked=="false")
        {
            alert("Select at least male or female.");
            return false;
        }   
    }
    </script> 
```

找不到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:58:31.670

您通过 Id 获取元素，“gender”是您输入的名称，而不是 id。
代替

```
<input type="radio" value="male" name="gender" /> Male<br /> 
```

你应该使用

```
<input type="radio" value="male" id="gender" /> Male<br /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:00:10.740

由于您使用 jquery 对此进行了标记，因此请使用`:checked`伪类选择器。

```
<script type="text/javascript">
function inputval()
{
    if($("form[name='formreg'] input[type='radio']:checked").length != 1)
    {
        alert("Select at least male or female.");
        return false;
    }
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:00:28.823

你放下 jQuery，所以我会使用它。 `document.getElementById('checked')`不存在。即使是这样，它也只适用于一个元素。您必须遍历每个`[name=gender]`元素以查看是否检查了任何元素。jQuery 使这变得微不足道：

```
$(".inputval").on('click', function (e) {
    if (!$("[name=gender]:checked").length) {
        alert('something something gender');
        e.preventDefault();
    }
}); 
```

[http://jsfiddle.net/ExplosionPIlls/s2YfU/](http://jsfiddle.net/ExplosionPIlls/s2YfU/)

编辑：非 jQuery 解决方案也很简单，因为`querySelectorAll('[name=gender]:checked')`也可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:02:06.880

无需验证。默认选中一个单选按钮

```
<form name="formreg" enctype="multipart/form-data" method="post">
     <input type="radio" value="male" name="gender" checked="true" /> Male<br />
      <input type="radio" value="female" name="gender" /> Female<br />
      <input value="Submit" onclick="return inputval()" type="submit" />
    </form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T17:59:05.217

试试这个`:checked`：

```
<script type="text/javascript">
 function inputval(){
    if($(':checked').length < 0)
    {
        alert("Select at least male or female.");
        return false;
    }   
}
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T18:37:00.490

这个小提琴可以给你一些想法（没有jquery）。请注意，我选中了其中一​​个按钮，因此我可以向您展示，如果选中了一个，它会将 anyChecked 设置为 true。

```
<form name="formreg" enctype="multipart/form-data" method="post">
    <input type="radio" value="male" name="gender" checked="checked"/>Male
    <br />
    <input type="radio" value="female" name="gender" />Female
    <br />
    <input value="Submit" onclick="return inputval()" type="submit" />
</form>
<div id="output"></div>

var output = document.getElementById("output");
var genderInputs = document.getElementsByName("gender");
var anyChecked = false;

for (var j = 0; j < genderInputs.length; j++) {
    if (genderInputs[j].checked === true) {
        anyChecked = true;
        break;
    }
}

output.textContent = "any checked: " + anyChecked; 
```

[http://jsfiddle.net/F8XGU/1/](http://jsfiddle.net/F8XGU/1/)

# c# - 删除 Ext.net 中 FieldLabel 和单选按钮之间的空格

> ID：15576921
> 
> 赞同：0
> 
> 时间：2013-03-22T17:56:24.310
> 
> 标签：c#, html, ext.net, spacing

我遇到了单选组 FieldLabel 的问题，因为当我在同一列中没有字段标签时，所有单选按钮都很好并组合在一起，但我需要字段标签高于 1 列中的所有 3 个按钮。但是当我将它们放在 1 列中时，所有单选按钮都会被隔开。我和我的朋友已经尝试了一切来删除空格，但无法弄清楚。

![例子](../Images/84edd4859520c68a998c52833bf87b4c.png) ![示例2](../Images/d93f797a2784baf6044197de89821dea.png)

```
 <ext:Panel ID="Panel1" 
                        runat="server" 
                        Title="Step 1: Choose date span and set spans" 
                        Region="North"
                        Height="200" 
                        Width="400"
                        MinWidth="225" 
                        MaxWidth="400">

                        <Items>
                            <ext:Container runat="server" Layout="RowLayout" Height="200">
                                <Items>
                                    <ext:RadioGroup  runat="server" ID="ChooseSpan" FieldLabel="Choose Date Span" Selectable="true" ColumnsNumber="1" LabelAlign="Top" LabelPad="1">
                                        <Items>
                                            <ext:Radio ID="RadioAll" runat="server" BoxLabel="Show All" InputValue="0" />
                                            <ext:Radio ID="RadioMonth" runat="server" BoxLabel="Choose Date Range(By Month)" InputValue="1" />
                                            <ext:Radio ID="RadioDate" runat="server" BoxLabel="Choose Date Range(By Dates)" InputValue="2" />
                                        </Items>
                                    </ext:RadioGroup>
                                </Items>
                            </ext:Container>
                        </Items>
                    </ext:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:10:51.757

我无法重现相同的结果，但以下示例似乎可以正确呈现。

**例子**

```
<%@ Page Language="C#" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET Example</title>
</head>
<body>
    <form runat="server">
        <ext:ResourceManager runat="server" />

        <ext:TabPanel 
            runat="server"
            Height="200" 
            Width="400">
            <Items>
                <ext:Panel runat="server" Title="Step 1" Layout="FitLayout">
                    <Items>
                        <ext:Panel runat="server" Title="Step 1: Choose date span and set spans" Layout="FitLayout">
                            <Items>
                                <ext:Container runat="server">
                                    <Items>
                                        <ext:RadioGroup 
                                            runat="server" 
                                            FieldLabel="Choose Date Span" 
                                            Selectable="true" 
                                            ColumnsNumber="1" 
                                            LabelAlign="Top" 
                                            LabelPad="1">
                                            <Items>
                                                <ext:Radio runat="server" BoxLabel="Show All" InputValue="0" />
                                                <ext:Radio runat="server" BoxLabel="Choose Date Range(By Month)" InputValue="1" />
                                                <ext:Radio runat="server" BoxLabel="Choose Date Range(By Dates)" InputValue="2" />
                                            </Items>
                                        </ext:RadioGroup>
                                    </Items>
                                </ext:Container>
                            </Items>
                        </ext:Panel>
                    </Items>

                </ext:Panel>
                <ext:Panel runat="server" Title="Step 2" />
            </Items>
        </ext:TabPanel> 
    </form>
</body>
</html> 
```

# android - 离开并返回 Activity 时，删除处理程序回调停止工作

> ID：15576922
> 
> 赞同：2
> 
> 时间：2013-03-22T17:56:30.713
> 
> 标签：android, handler, runnable

我有一个处理程序和一个可运行对象，可运行对象每 5 秒向屏幕发布一次祝酒词，代码如下：

```
Handler handler = new Handler();
Runnable runnable = new Runnable() {

    public void run() {

        Toast.makeText(getApplicationContext(), "DISPLAY MESSAGE" + walking, Toast.LENGTH_SHORT).show();
        handler.postDelayed(runnable, 5000);
    }
}; 
```

在同一个活动中，我可以通过按下终止按钮来删除回调，调用它：

```
handler.removeCallbacks(runnable); 
```

当上述被调用时，Toast 停止显示，所以到目前为止一切都很好。当我离开我的活动去另一个活动时，toast 消息会继续显示，这就是我想要的，但是当我回到创建可运行对象的第一个活动并按下终止按钮时，它不会删除可运行对象。离开和回来时，我无法再删除 runnable。

我已经尝试使用几乎所有在 SO 上使用 Handlers 和 runnables 的示例，但没有什么能帮助我解决这个问题。

可能是当我离开我的 Activity 并返回它时，它会创建新的可运行对象和处理程序对象吗？如果是这样，为什么初始可运行文件会继续运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T12:36:36.210

在活动中保留长期引用是一种糟糕的形式。即使您旋转手机，它们也会很容易且经常被破坏和重新创建！发生的事情是，当重新创建 Activity 时，会创建一个新的 Runnable 和 Handler 对象，正如您所怀疑的那样。

为了在不求助于服务的情况下解决这个问题，我所做的是创建一个片段……我们称之为 StateFragment。

不给这个 Fragment 任何视图，所以它对用户是不可见的。它仅用于存储变量。创建活动后，如果活动尚不存在，请将其添加到活动中。最后，在Fragment 类本身中，在其onCreate 中，将RetainInstance 设置为true。

我承认这有点小技巧，但它是在创建和销毁活动时在流程中保存变量的一种非常方便的方法。在这种情况下，当 Activity 被销毁并重新创建时，该片段可能会被保留，除非它已在后台运行了一段时间并被 GC 清理。下面的一些代码：

```
public class StateFragment extends Fragment{
  //add some variables here
  //these will not last long time!
  Handler handler;
  Runnable runnable;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Retain this fragment across configuration changes.
    setRetainInstance(true); //<--this is the important part!
        Handler = new Handler... etc.

  }
} 
```

现在在您的活动中，有一个类级变量来保留引用：

```
public Class MainActivity  extends FragmentActivity {
StateFragment sf; 
```

然后在您的“onCreate”中，您需要检查它是否存在，否则附加它：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
sf=(StateFragment) getFragmentManager().findFragmentByTag("storage");
if (sf==null)
{
  sf=new StateFragment();
  getFragmentManager().beginTransaction().add(sf, "storage").commit();
} 
```

总的来说，我发现活动的波动性是一个巨大的痛苦，拥有一些更持久的存储通常是一个很大的好处。现在您可以轻松地将 Runnable 引用为

```
sf.runnable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:04:40.193

您需要实现一个在后台运行的服务，然后在按下按钮时终止该服务。这是实现这一点的最简单方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T01:57:11.990

尝试以下操作，它使用一个计时器类来显示你`Toast`每 5 秒从你的类启动 backhelper 服务类：

```
public class BackHelper extends Service {   
        @Override
        public void onCreate() 
        {
            Log.i(TAG, "Service onCreate");
            super.onCreate();
                        Timer timer = new Timer();
                TimerTask updateProfile = new BackHelper(sock.this);
                    timer.scheduleAtFixedRate(updateProfile, 0, 5000);      
        }
        @Override
        public void onDestroy() {
            // TODO Auto-generated method stub
            Log.i(TAG, "Service onDestroy");
            super.onDestroy();
        }
        @Override
        public int onStartCommand(Intent intent, int flags, int startId) {
            // TODO Auto-generated method stub
            Log.i(TAG, "Service onstart");

            return Service.START_STICKY;
        }
        @Override
        public IBinder onBind(Intent arg0) {
            // TODO Auto-generated method stub
            Log.i(TAG, "Service onBind");
            return null;
        }
    public class sock extends TimerTask
        {
        @Override
            public void run()
            {
     Toast.makeText(getBaseContext(), "DISPLAY MESSAGE" + walking, Toast.LENGTH_SHORT).show();

                    }
            } 
```

# c - 如何通过放置任何工具/库或其他工具来调试 C 项目

> ID：15576923
> 
> 赞同：0
> 
> 时间：2013-03-22T17:56:36.787
> 
> 标签：c, debugging, logging, makefile, project

我有一个项目，其中有许多文件和一个makefile。通过使用`make`命令。我制作了一个可执行文件，然后放入`/usr/local/bin`. 那就是作为一个实用程序。

到目前为止一切都很好，但是该实用程序有一些问题，这是该实用程序所没有的，现在我必须调试该代码，我必须检测问题出在哪里。

因此，为此我认为，我必须在某些时候记录日志。但是代码很大。

所以。你能告诉我如何执行上述任务吗？帮我解决一些问题。

我认为一些库，Debugger 也适用于相同的，但我不知道该工具到底是什么？

帮助我。提前致谢。寻找您的亲切回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:15:10.667

您可以使用 GDB 作为调试器并放置断点并跟踪问题。Valgrind 工具，用于检查代码中是否存在任何内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:11:06.480

可能您需要 GNU 调试器 (gdb)。请注意，此调试器不仅可以启动程序进行调试，还可以附加到正在运行的进程。

此外，如果这个领域对您来说是新领域，您应该了解如何使用调试信息编译您自己的程序，这将使调试更加简单。[这](http://www.gnu.org/software/gdb/)应该会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:03:41.073

一个好主意是编写测试。这样，每次编译代码时都会执行一系列自检，以确保一切都按您期望的方式工作。您应该对代码的每个单元（即每个函数）进行测试，然后对每个子系统进行测试，然后对整个系统进行测试。有几个 C 库可以帮助您构建和组织测试。只需搜索“C 单元测试库”。

此目标通常称为`make check`或`make test`。

这种方法不仅可以确保您的系统更加可靠和容错，还可以在添加新功能之前暴露它们中的错误。

# ruby - 红宝石仍然显示旧版本

> ID：15576929
> 
> 赞同：7
> 
> 时间：2013-03-22T17:57:02.413
> 
> 标签：ruby, gem, rvm, osx-leopard, ruby-2.0

我已经安装了或者我认为在我的运行 leopard 10.5.8 的 osx ppc 上安装了一个新版本的 ruby​​，但是当我运行时`ruby --version it shows the old one 1.8.7`（机器上的默认设置）但是当我运行时......

```
find /usr -type f -name \*.rb 
```

它显示 ruby​​2.0.o 已打开：

```
/usr/local/lib/ruby/2.0.0/ 
```

及其所有`.rb`文件。

但是当我检查使用`locate ruby`

它显示了 1.8.7 下的版本

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby 
```

任何时候我检查`ruby --version`它都会显示 1.8.7 ......我该如何改变它？

完全是新手……谢谢。

顺便说一句，rvm 不是通过任何机会或自制软件安装的，而且我的 xcode 没有下载。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-24T17:47:23.597

在尝试重新安装`rvm`并绕圈运行后`ruby`，对我来说只是更改了使用的默认 ruby​​ 版本`rvm`：

尝试运行**rvm list**

就我而言，我有

```
=* ruby-2.1.1 [ x86_64 ]
ruby-2.1.4 [ x86_64 ]
ruby-2.2.2 [ x86_64 ] 
```

运行**rvm --default use 2.2.2**后，我得到了正确的 ruby​​ 版本：

```
ruby-2.1.1 [ x86_64 ]
ruby-2.1.4 [ x86_64 ]
=* ruby-2.2.2 [ x86_64 ] 
```

见[https://rvm.io/rubies/default](https://rvm.io/rubies/default)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-22T22:46:17.007

`PATH`今天的大多数系统都使用环境变量搜索要运行的程序。如果您确实安装了 ruby​​，`/usr/local/lib/ruby/2.0.0/`那么您应该相应地修改`PATH`：

```
export PATH="/usr/local/lib/ruby/2.0.0/bin:$PATH" 
```

至于任何软件的问题，您应该报告您面临的问题：

*   `homebrew`- [https://github.com/mxcl/homebrew/issues](https://github.com/mxcl/homebrew/issues)
*   `rvm`- [https://github.com/wayneeseguin/rvm/issues](https://github.com/wayneeseguin/rvm/issues)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-10-14T13:31:54.873

我安装了它，`brew install ruby`它仍然显示原始的 Mac 版本（2.3）。以下命令修复了它：

首先检查Ruby是否仍然指向原始位置：

```
which ruby
# /usr/bin/ruby 
```

将此更改为新位置。

```
export PATH=/usr/local/opt/ruby/bin:$PATH
which ruby
# /usr/local/opt/ruby/bin/ruby 
```

检查你是否有新版本

```
ruby -v
# ruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-darwin18] 
```

解决了！

# google-app-engine - Endpoint Error & Stuck，即将采取替代路线:(

> ID：15576934
> 
> 赞同：0
> 
> 时间：2013-03-22T17:57:25.617
> 
> 标签：google-app-engine, google-cloud-endpoints

经过很多努力和大量本地测试创建了我的端点应用程序，但是一旦我部署到应用程序引擎，我就会收到以下错误。

[https://gantest6.appspot.com/_ah/api/taskandtest/v1/alerts?username=g](https://ganatest6.appspot.com/_ah/api/taskandtest/v1/alerts?username=g)

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "internalError",
    "message": "Internal Error"
   }`enter code here`
  ],
  "code": 500,
  "message": "Internal Error"
 }
} 
```

端点还没有准备好生产吗？如果是这样，我被困住了，需要寻找替代方法。

请帮忙。这是我的代码：

```
@Api(
  name = "taskandtest", 
  version = "v1", 
  defaultVersion = AnnotationBoolean.TRUE
)
public class DashboardEP {

  @ApiMethod(name = "taskandtest.alerts", 
             httpMethod = "GET", path = "alerts") 
  public String[] getAlerts(@Named("username") String username) {
    return new String[] {
      "One Alerts Feed"
    };
  }
} 
```

-加纳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:15:37.433

Cloud Endpoints 不支持返回标量类型，例如`String[]`，这是您方法中的返回类型。

相反，您需要使用标准 Java bean 作为返回类型。

# angularjs - 由 ajax 填充的 ng-options 仅在 IE 中显示第一个字母

> ID：15576945
> 
> 赞同：14
> 
> 时间：2013-03-22T17:58:05.833
> 
> 标签：angularjs, internet-explorer, internet-explorer-9

我在 Angular 中遇到了一个奇怪的问题，似乎只在 Internet Explorer 9 中。

如果您检查以下 jsfiddle：http: [//jsfiddle.net/U3pVM/382/](http://jsfiddle.net/U3pVM/382/)

您可以看到 2 个选择已填充，但 IE 中的显示似乎已损坏，并且仅选择了“Apple”的第一个字母“A”。单击选择时会显示所有选项。

![例如](../Images/0ee8ff5554ee6b9898a9588a493c1bfc.png).

代码很简单，我在成功回调中填充了驱动选择的变量。

```
.success(function (data) {
    $scope.ReasonsChoice_ajax = data;
}); 
```

select的ng-options代码如下；

```
 <select ng-model="Reason" ng-options="Reason for Reason in ReasonsChoice_ajax"></select> 
```

我注意到如果我使用单个选择元素不会发生故障，只有当我在 ng-repeat 中显示多个选择时才会发生问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-19T09:48:48.350

您正在使用 Angularjs，所以答案是这样的：

```
<select ng-style="{'width': '100%'}"></select> 
```

请注意，您不必将宽度设置为 100%。您可以改用 px 。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-25T17:44:35.743

请参阅[<select> 仅显示所选选项的第一个字符](https://stackoverflow.com/questions/5908494/select-only-shows-first-char-of-selected-option)

我们遇到了同样的问题，下面的内容让我们解决了这个问题。

```
$("select").css("width", $("select").css("width")); 
```

当然，我们所有的选择都是相同的宽度。您可能需要优化选择器以满足您的需要。基本上你只需要强制 IE 以一种或另一种方式重新绘制选择。[更新了小提琴](http://jsfiddle.net/U3pVM/395/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-16T08:33:50.227

我刚刚在 IE 9 中遇到了同样的问题。解决方法是仅在 ajax 数据可用后显示选择。AngularJs 中的一个简单解决方案是在选择中添加以下内容：ng-show="ReasonsChoice_ajax.length > 0"。

```
<select ng-model="Reason" ng-show="ReasonsChoice_ajax.length > 0" ng-options="Reason for Reason in ReasonsChoice_ajax"></select> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-06T16:33:29.353

当我的项目在要求上进行了非常晚的更改以支持 IE9 时，我不想返回并注释我的所有`<select>`元素或控制器来处理这个问题，所以我编写了以下指令来自动向所有元素或控制器添加行为：

```
angular.module('xxxxx')
.directive('select',
           ['$log', '$parse', '$timeout', function ($log, $parse, $timeout) {
    var NG_OPTIONS_REGEXP = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/;
    return {
        restrict: 'E',
        scope: true,
        require: ['select', '?ngModel'],
        link: function (scope, elem, attrs, control) {
            var isIE = document.attachEvent,
                match; 

            if (isIE
                && attrs.ngOptions
                && (match = attrs.ngOptions.match(NG_OPTIONS_REGEXP))) {
                var values = $parse(match[7]);
                scope.$watchCollection(values, function () {
                    // Redraw this select element 
                    $timeout(function () {
                        var originalWidth = $(elem).css('width');
                        $(elem).css('width', '0');
                        $(elem).css('width', originalWidth);
                    }, 10);
                });
            }
        }
    };
}]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-18T08:05:46.950

这些都不适合我，而不是类似帖子中建议的“ng-show”，但围绕跨越元素的“ng-if”似乎可以解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-05T16:28:18.000

虽然这很奇怪，但幸运的是这是您想要再次触发选择标签的内容。

```
ng-show="List.length > 0" 
```

# jquery - 单击事件在加载的 html 上不起作用

> ID：15576949
> 
> 赞同：0
> 
> 时间：2013-03-22T17:58:27.380
> 
> 标签：jquery, ajax

我看到 live 已被弃用，所以我使用了 .on() 但是当我点击加载的 html 中的链接时没有任何反应：

```
$('.playclose').on("click", function() {
        alert('hello');
        }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:01:33.470

试试这个

```
 $(document).on("click",'.playclose', function() {
            alert('hello');
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:59:31.607

试试这样：

```
$('body').on('click', '.playclose', function() {
 alert('hello');
}); 
```

委托事件（又名 live）的语法如下：

`$('static-container-selector').on( event, target, handler);`

**笔记**

代替`body`或`document`更好地使用任何其他静态容器，即。非动态元素，并检查`playclose`是`id`或`class`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:02:53.917

您确定按钮使用的是类而不是 id 吗？

您的选择器可能是错误的。

$('#playclose') 代替 $('.playclose')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T18:05:18.457

[直接和委托事件](http://api.jquery.com/on/)

对于委托元素，我们需要使用如下

```
$(document).on("click",'.playclose', function() {
            alert('hello');
   }); 
```

# c# - 在调用 SqlCeCommand.ExecuteReader() 后，如何判断我的 SqlCeDataReader 是否包含任何 val？

> ID：15576953
> 
> 赞同：0
> 
> 时间：2013-03-22T17:58:37.143
> 
> 标签：c#, compact-framework, sql-server-ce, windows-ce, sqldatareader

使用以下代码：

```
SqlCeDataReader myReader = cmd.ExecuteReader(CommandBehavior.SingleRow);
itemID = myReader.GetString(0);
packSize = myReader.GetString(1); 
```

...我得到一个例外，“行/列不存在数据”

在这种情况下，我希望它默默地“中止”而不是抛出异常。有没有办法在尝试分配之前先进行测试？

我试过这个，但它没有用：

```
SqlCeDataReader myReader = cmd.ExecuteReader(CommandBehavior.SingleRow);
if (null != myReader.GetString(0))
{
    itemID = myReader.GetString(0);
}
if (null != myReader.GetString(1))
{
    packSize = myReader.GetString(1);
} 
```

另一种可能性是将它包装在 try..catch 中并“吃掉”异常，但我不知道这是否是最好的方法......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:14:08.810

这是因为您[`Read()`](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcedatareader.read.aspx)在获取`DataReader`. 这并不意味着*结果*不包含数据。这意味着该*行*不包含任何数据。

```
using (SqlCeDataReader myReader = cmd.ExecuteReader(CommandBehavior.SingleRow))
{
    if (myReader.Read()) // It returns `false` if there is no data
    {
        itemID = myReader.GetString(0);
        packSize = myReader.GetString(1);
    }
} 
```

如果结果可以包含多行并且您想检查结果是否包含任何数据，请使用[`HasRows`](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcedatareader.hasrows.aspx)：

```
using (SqlCeDataReader myReader = cmd.ExecuteReader())
{
    if (myReader.HasRows)
    {
        while (myReader.Read())
        {
            // read values from `myReader`
        }
    }
} 
```

# ios - 获取链接并消除所有混乱并只关注内容 - 在 Objective-C 中执行此操作的最佳方法是什么？

> ID：15576955
> 
> 赞同：0
> 
> 时间：2013-03-22T17:58:40.040
> 
> 标签：ios, objective-c, xcode, ios5, ios6

我想获取一个链接（并获取它的 HTML）并且只保留重要的部分，比如文章。Objective-C 有许多 HTML 解析库——例如[hpple——](https://github.com/topfunky/hpple)但我想做的不仅仅是解析特定的东西，我需要一些东西来删除所有不属于可读内容的东西。有点像 Instapaper、Readability、Pocket 或 Safari 的阅读器功能。

在 Objective-C/iOS 中实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:12:49.280

我不确定在 Objective-C 中是否有办法，但 Readability 有一个开源的 Javascript 实现，可以获取网页的内容。另请参阅[此答案](https://stackoverflow.com/a/4240037/74118)和可能对您有所帮助的链接代码（称为“[样板](http://code.google.com/p/boilerpipe/)”）。虽然它似乎是在 Java 中。

如果只是获取链接，请使用[`NSDataDetector`](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSDataDetector_Class/Reference/Reference.html)扫描文本。

# javascript - 如何在另一个元素之上创建一个 HTML 元素？

> ID：15576956
> 
> 赞同：0
> 
> 时间：2013-03-22T17:58:43.597
> 
> 标签：javascript, position

给定一个显示在页面某处的 HTML 元素？

如何制作另一个 html 以使其完全重叠？

为了给出一个想法，我尝试了类似的方法，但如果输入中的 HTML 元素位于页面底部并且我需要向下滚动才能到达它，则它不起作用

```
function createOverlap(elem) {
    var rect = elem.getBoundingClientRect();
    over.style.position = 'absolute';
    over.style.top =    rect.top+'px';
    over.style.left=    rect.left+'px';
    over.style.height = rect.height+'px';
    over.style.width=   rect.width+'px';
    return over;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:21:29.863

'over' 似乎不是一个 DOM 元素，除此之外，你非常接近。

看到这个小提琴：http: [//jsfiddle.net/7em2g/](http://jsfiddle.net/7em2g/)

```
function createOverlap(elem) {
    var rect = elem.getBoundingClientRect();
    var over = document.createElement('div');
    over.style.position = 'absolute';
    over.style.top =    rect.top+'px';
    over.style.left=    rect.left+'px';
    over.style.height = rect.height+'px';
    over.style.width=   rect.width+'px';
    return over;
}
var bar = createOverlap(document.getElementById('foo'));
bar.style.backgroundColor = 'rgba(255,0,0,0.3)';
document.body.appendChild(bar); 
```

嗯，如果你向下滚动，这没有什么区别。如果您仍然遇到问题，我们将需要有关该问题的更多信息。

# jquery - Jquery 脚本显示隐藏在 IE 8 中无法正常工作

> ID：15576964
> 
> 赞同：1
> 
> 时间：2013-03-22T17:59:06.330
> 
> 标签：jquery

这一切都是新手，在这里搜索过，我还在拔头发。请温柔一点。我正在使用 Andy Langton 的 show hide 手风琴，它在除 IE 8 之外的所有浏览器中都运行良好（并假设以前的版本）在 IE 8 中单击阅读更多切换会导致下拉文本开始显示一点（看起来像所有的行已写在一行上）然后缩回，肘节保持不变。在这里阅读了一个类似的问题，我将 js 版本号从 jquery/1.3.2 更改为 jquery/1.8.3 这显示了应该做的“隐藏文本”，但是切换链接没有改变，它仍然在“阅读更多”当它应该说“隐藏”时。

我假设我在正确的轨道上解决了问题（尽管会产生不同的问题）所以问题是我应该使用什么版本的 jquery？

### Javascript

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js" type="text/javascript"></script>
<script>
$(document).ready(function () {
    var showText = 'Leer M&aacute;s'; //Read more
    var hideText = 'Ocultar'; //Hide
    var is_visible = false;
    $('.toggle').prev().append(' (<a href="#" class="toggleLink">' + showText + '</a>)');
    $('.toggle').hide();
    $('a.toggleLink').click(function () {
        $(this).toggleClass('visible');
        $(this).html(($(this).hasClass('.visible')) ? hideText : showText);
        $(this).parent().next('.toggle').toggle('slow');
        return false;
    });
});
</script> 
```

### HTML

```
...
<a href="#" class="toggleLink"></a>
<span class="toggle"><br>
<span class= "ticktext"><span>
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:16:47.517

你的错误在这里

```
$(this).html(($(this).hasClass('.visible')) // <-- extra . 
```

你想要的是

```
$(this).html(($(this).hasClass('visible')) 
```

除非你有一类

```
class='.visible' 
```

你不这样做是因为你正在切换这`$(this).toggleClass('visible');`导致

```
class='visible' 
```

虽然我猜它没有意义，因为它适用于其他浏览器？

它确实解释了为什么它继续阅读更多..因为这总是评估为假 - 因此 showText 将始终显示

```
$(this).hasClass('.visible')) ? hideText : showText 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:03:28.270

由于您使用的是 jquery 1.8 ，因此您必须使用`on`委托事件来动态添加元素

```
$(document).on('click','a.toggleLink',function() {
    $(this).toggleClass('visible');
    $(this).html( ($(this).hasClass('.visible')) ? hideText : showText);
    $(this).parent().next('.toggle').toggle('slow');
    return false;
}); 
```

# search - 如何找到正在使用存储过程的位置

> ID：15576970
> 
> 赞同：11
> 
> 时间：2013-03-22T17:59:19.880
> 
> 标签：search, triggers, sql-server-2000

使用 SQL Server 2000，有没有办法在所有触发过程中全局搜索模式？

调用存储过程的地方对我隐藏。

这是我的第一篇文章，所以请善待。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-22T18:04:19.777

这将搜索 SQL Server 2000 上的触发器、过程、函数和视图（建议不要在较新版本上使用此方法；请参阅[此博客文章以获得更好的方法](https://sqlblog.org/2011/10/06/a-handy-search-procedure)）：

```
SELECT o.name
 FROM syscomments AS c
 INNER JOIN sysobjects AS o
 ON c.id = o.id
 WHERE c.text LIKE '%procedurename%'; 
```

当然，这里有一些危险：

1.  `syscomments`将采用 > 4000 行的程序并将它们分成多行。因此，大型程序可能只在边界点提及您的搜索字符串，而根本没有出现。也有可能这样的过程可能会出现在列表中两次（您可以添加一个`GROUP BY`来消除它）。
2.  谨防误报。您的搜索字符串可以包含在评论中。或者，如果您有一个名为`GetAuthorSubscriptions`并且正在查找的存储过程`%GetAuthors%`，它仍然会出现。对子句使用区分大小写的搜索`COLLATE`可能会有所帮助，但不一定会消除它。

更多信息在这里：

*   [如何找到包含的存储过程`<text>`？](http://web.archive.org/web/20070210204240/http://databases.aspfaq.com/database/how-do-i-find-a-stored-procedure-containing-text.html)

我强烈建议不要使用 SQL Server 2000。如果不是为了其他 80 亿个好处，在更现代的版本中这项任务要容易得多。

请注意，您的存储过程可能不会从数据库中被调用 - 它可能是来自应用程序的临时调用、某人的 Management Studio 的打开副本，甚至是工作。要搜索工作，您可以使用：

```
SELECT 
  job_name = j.name, 
  s.step_name
FROM msdb.dbo.sysjobs AS j
INNER JOIN msdb.dbo.sysjobsteps AS s
ON j.job_id = s.job_id
WHERE s.command LIKE '%procedurename%'; 
```

还没转起来？`TextData LIKE '%procedurename%'`在...上运行服务器端跟踪过滤

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-29T13:49:04.037

使用 SQL Server 2017**使用 SQL Server Management Studio**

在对象资源管理器中查看过程的依赖关系

*   在对象资源管理器中，连接到数据库引擎实例，然后展开该实例
*   实例。
*   展开 Databases，展开过程所属的数据库，然后展开 Programmability。
*   展开存储过程，右键单击该过程，然后单击查看依赖关系。
*   查看依赖于过程的对象列表。
*   查看过程所依赖的对象列表。
*   单击确定。

**使用 Transact-SQL**
，您可以按照[此处的步骤操作](https://docs.microsoft.com/en-us/sql/relational-databases/stored-procedures/view-the-dependencies-of-a-stored-procedure?view=sql-server-2017#TsqlProcedure)

有关更多信息，请查看
[https://docs.microsoft.com/en-us/sql/relational-databases/stored-procedures/view-the-dependencies-of-a-stored-procedure?view=sql-上的原始文章服务器-2017](https://docs.microsoft.com/en-us/sql/relational-databases/stored-procedures/view-the-dependencies-of-a-stored-procedure?view=sql-server-2017)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T03:02:19.580

这是我编写的一个程序，它从系统表中获取源代码，并将其逐行放入表中。这将更容易扫描文本并处理可能在系统表中被截断的字符串，因为换行文本。如果您每天或每小时运行一次，它将为您提供接近实时的结果。

您可以扫描 v$source 表以获取不同的过程名称列表，但认为将整个解决方案放在这里会很有用。

如果有任何错误请告诉我，因为它尚未经过详尽的测试。

```
CREATE TABLE [dbo].[v$source](
            [theDb] [varchar](100) NULL,
            [theLineNo] [int] NULL,
            [theName] [varchar](1000) NULL,
            [theText] [varchar](8000) NULL,
            [theType] [varchar](100) NULL,
            [theCreateDate] [datetime] NULL,
            [theOrderNum] [int] NULL,
            [DateCreated] [datetime] NULL,
            [DateUpdated] [datetime] NULL
        ) ON [PRIMARY]

    CREATE TABLE [dbo].[v$source_unsplit](
        [theDb] [varchar](100) NULL,
        [theName] [varchar](1000) NULL,
        [theText] [varchar](8000) NULL,
        [theType] [varchar](100) NULL,
        [theCreateDate] [datetime] NULL,
        [theOrderNum] [int] NULL,
        [DateCreated] [datetime] NULL,
        [DateUpdated] [datetime] NULL
    ) ON [PRIMARY]
    GO

    CREATE FUNCTION [dbo].[GetLHS]
    (
        @p_delim   varchar(1),
        @p_string  varchar(max)
    )
    RETURNS varchar(max)
    AS
    BEGIN
       declare @l_pos int;
       set @l_pos = charindex(@p_delim,@p_string,1);

       --if (@l_pos = 0)
       --   return @p_string;

       return substring(@p_string,1,iif(@l_pos=0,len(@p_string),@l_pos-1));

    END

    CREATE FUNCTION [dbo].[GetRHS]
    (
        @p_delim   varchar(1),
        @p_string  varchar(max)
    )
    RETURNS varchar(max)
    AS
    BEGIN
       declare @l_pos int;
       set @l_pos = charindex(@p_delim,@p_string,1);

       if (@l_pos = 0)
          return '';

       return substring(@p_string,@l_pos+1,len(@p_string));

    END

CREATE PROCEDURE sp_bld_v$source
    AS
    BEGIN
        delete from v$source_unsplit

        EXEC sp_MSforeachdb
        'USE ?; 
         insert into dict..v$source_unsplit (TheDB,TheName,TheText,TheType,TheCreateDate,TheOrderNum)
         SELECT ''?'' thedb, o.name, substring(c.Text,1,8000),xtype,crdate,colid
         FROM syscomments AS c
         INNER JOIN sysobjects AS o
         ON c.id = o.id'

        delete from v$source

        DECLARE @C_TEXT_CURSOR as CURSOR;
        DECLARE @l_thedb       varchar(1000)
        DECLARE @l_thename     varchar(1000)
        DECLARE @l_theordernum int
        DECLARE @l_text        varchar(max)
        DECLARE @l_lhs         varchar(max) = 'NULL'
        DECLARE @l_line_no     int
        DECLARE @l_createDate  datetime
        declare @l_thetype     varchar(10)

        SET @C_TEXT_CURSOR = CURSOR FOR
         select   theDb,TheName,theOrderNum,thetext,theCreateDate,thetype--,replace(theText,char(10),'@^@') 
         from     v$source_unsplit
         order by theDb,TheName,theOrderNum

        OPEN @C_TEXT_CURSOR;
        FETCH NEXT FROM @C_TEXT_CURSOR INTO @l_thedb,@l_thename,@l_theordernum,@l_text,@l_createDate,@l_thetype

        WHILE @@FETCH_STATUS = 0
        BEGIN
           if @l_theordernum = 1 
           begin
              set @l_line_no = 1
              if @l_lhs <> 'NULL'
              begin
                  insert into v$source (TheDB,TheLineNo,TheName,TheText,TheType,TheCreateDate,TheOrderNum)
                  select @l_thedb,@l_line_no,@l_thename,@l_lhs,@l_thetype,@l_createDate,@l_theordernum
              end
           end
           else
           begin
              set @l_text = @l_lhs+@l_text -- reconstuct previous line
           end

           while charindex(char(10),@l_text)>0 
           begin
              set @l_lhs  = lib.dbo.GetLHS(char(10),@l_text)
              set @l_text = lib.dbo.GetRHS(char(10),@l_text)

              insert into v$source (TheDB,TheLineNo,TheName,TheText,TheType,TheCreateDate,TheOrderNum)
              select @l_thedb,@l_line_no,@l_thename,@l_lhs,@l_thetype,@l_createDate,@l_theordernum

              --print(@l_text)
              set @l_line_no = @l_line_no+1

           end
           set @l_lhs = @l_text

           FETCH NEXT FROM @C_TEXT_CURSOR INTO @l_thedb,@l_thename,@l_theordernum,@l_text,@l_createDate,@l_thetype
        END

        CLOSE @C_TEXT_CURSOR;
        DEALLOCATE @C_TEXT_CURSOR;

    END
    GO 
```

# algorithm - 如何测试整数范围是否与整数列表重叠？

> ID：15576972
> 
> 赞同：3
> 
> 时间：2013-03-22T17:59:21.927
> 
> 标签：algorithm, data-structures, range, intervals

例如：我们有一个列表：

```
1 2 3 7 8 9 11 12 
```

我们需要检查范围 (A,B) 是否与列表重叠，例如范围 (4, 6) 与列表不重叠，范围 (10, 12) 和范围(5,9) 与列表重叠。我知道我们可以将列表放入 hashSet 中，然后我们只需检查范围内的任何元素是否出现在该集合中。这需要 O(N)。N 是范围的长度。有没有更好的算法来解决这个问题？我知道有一个区间树数据结构，但我不太明白。该结构可以在 logN 中解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:09:55.183

似乎列表已排序；如果还没有，请先对其进行排序。

让`R = (start, end)`我们要检查它是否重叠的范围。

我们可以对排序列表的位置`start`进行二分搜索：`end`

*   如果`start`和`end`连续出现在列表中，那么它们不会重叠

例如

> 1 2 3 **4 6** 7 8 9 11 12

*   否则，列表中有一个元素位于它们之间，因此范围重叠

看：

> 1 2 3 7 8 9 **10** 11 **12**

这是`O(log N)`，其中`N`是列表中元素的数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T18:15:11.603

如果列表未排序：

O(M) 其中 M 是列表中的项目 # 是遍历列表检查每个项目以查看是否低 <= 项目 <= 高。

* * *

如果域是“合理”有界的，则另一种选择：

将列表表示为位向量。将范围表示为位向量（此向量中的 on 位将是连续的）然后“和”向量以查看是否有共同的位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T18:11:11.967

如果列表已排序，您可以找到范围中的最小元素将被放置到列表中的位置，以及范围中最大的元素将被放置到列表中的位置。这将花费 2 lg(n) 时间。如果这些索引不同，则范围与列表相交。否则，我不知道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T19:00:21.020

显然，如果列表没有排序，那么任何为范围查询构建 ad hoc 结构的算法都将花费 O(n)。对列表进行排序将花费 O(n log n)。

使用集合（实现为平衡二叉树），将通过插入范围的下（或上）边界并检查下一个（或上一个）元素（数据结构）以 O(log [2] n) 输出结果必须支持该操作，这在二叉树上是微不足道的）。

一个非常有效的范围查询结构是[B+tree](http://en.wikipedia.org/wiki/B%2B_tree)，它可以让您在 O(log [b] n+k) 中找到一个范围，其中 b 是树的等级（即每个节点的子节点数）。请注意，这还将返回范围内的元素列表（例如，作为树数据集上的几个迭代器）。

另一个有趣的结构是[Van Emde Boas](http://en.wikipedia.org/wiki/Van_Emde_Boas_tree)树，它在 O(log log n) 中插入元素。使用与上述集合相同的技巧，我们可以找到具有相同时间复杂度的答案。另请参阅 X 快速尝试和 Y 快速尝试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T01:01:10.010

我知道您只想知道数组中是否存在 A 或 B。您无需使用排序，因为您只需执行 2 个步骤：

```
1- search that is there A or B in your array.(you can do it in O(n))
2- find minimum and maximum.(you can do it in o(n)). 
```

您可以在 o(n) 内完全完成，并且您不能在小于 o(n) 的时间内完成，我在此[链接](https://stackoverflow.com/questions/15486290/space-and-time-optimized-algorithm-for-finding-rows-and-columns-with-atleast-sin/15486934#15486934)中针对相同的问题对此进行了检查。

# php - PHP 中的函数

> ID：15576976
> 
> 赞同：0
> 
> 时间：2013-03-22T17:59:39.237
> 
> 标签：php

我正在与一个 php 函数作斗争。

我正在尝试创建一个接受 5 个参数的函数。用户需要选择他们选择的活动，带有他们选择的活动的消息应该回显给用户。

我在函数中使用了一个数组和一个 foreach 语句，但它不起作用。

请帮忙

```
<?php
// Declare the function and variables

error_reporting (0);
$msg = "";
$activity = "";

function activites ($paintballing , $ice_skating, $horse_riding, $para_gliding,    $water_rafting ){

    // Make the activity array

    $activites = array (1=> 'Paintballing', 'Ice_skating', 'Horse_riding', 'para_gliding', 'water_rafting');

    // make the activity  pull down menu
    echo '<select name ="activity">';

    // use a foreach loop to loop through the activity

     foreach ($activites as $key =>$value) {
    echo "<option value \"key\"$key\">$value</option>\n";

}

}

if ($activity == ""){
    $msg = "<font color = 'red'> Please select an activity from the drop down   menu</font>";

 }

?>

<html>
<head>
<title>Function </title>
</head>
<body>
 <center> <a href="index.php">Home </a>  |  <a href ="calc.php">Calc</a> | <a    href="string.php">String</a> | <a href ="array.php"> Array </a> | <a href =   "function.php">Function </a></center>
  </center>

 <form name = 'function' method = "POST" action = 'function.php' >

 <p>Select one of the activity you would like to do today:</p>

   <select name="Activity" size="5">
   <option selected value = "">
   <option> Paintballing </option>
   <option> Ice-skating </option>
    <option> Horse-riding </option>
   <option> Para-gliding </option>
   <option> Water-rafting </option>
  </select>
   </form>
  <input type = "submit" name = "submit" value = "submit" />
  </option>
  <?php echo $msg;?>
  <p align ="center"><a href ="function.txt" Onclick ="window.open ('function.txt', 'function', resizable =no, height=500, width=500, scrollercars=yes'); retrun   false;">Function.txt</a></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:05:49.567

尝试调用函数

```
if ($_POST['submit']) {
    echo activities($_POST['Activity']);
} 
```

您的功能已修改

```
function activities($activity) {
    $activities = array(
            'Paintballing',
            'Ice_skating',
            'Horse_riding',
            'para_gliding',
            'water_rafting'
    );
    $activity = trim($activity);
    if (! in_array($activity, $activities))
        return false;

    return sprintf("You have selected : %s", $activity);
} 
```

# php - 捆绑包的 Laravel 类自动加载

> ID：15576978
> 
> 赞同：1
> 
> 时间：2013-03-22T17:59:43.407
> 
> 标签：php, namespaces, bundle, laravel, autoloader

我正在编写的捆绑包的自动加载器配置有点麻烦。

我有以下课程：

*   `Ravenly\Models\RavenUser`在**模型/raven_user.php**
*   `Ravenly\Ravenly`在**ravenly.php**

我正在尝试执行以下操作：

```
$exists = call_user_func($class.'::where_crsid', $crsid)->count() > 0; 
```

但我收到以下错误：

```
call_user_func() expects parameter 1 to be a valid callback, class 'Ravenly\Models\RavenUser' not found 
```

我也尝试过设置`$class`（在配置文件中设置）`"Models\RavenUser"`，但我得到了同样的错误。我的自动加载器配置如下：

```
Autoloader::namespaces(array(
    'Ravenly'           =>  Bundle::path('ravenly')
)); 
```

我不明白为什么它不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:23:09.897

文件名必须与类名匹配。您的文件应命名为 ravenuser.php

[http://phpmaster.com/autoloading-and-the-psr-0-standard/](http://phpmaster.com/autoloading-and-the-psr-0-standard/)

# python - Mac 上的 matplotlib QtDesigner 小部件？

> ID：15576984
> 
> 赞同：1
> 
> 时间：2013-03-22T18:00:03.390
> 
> 标签：python, qt4, matplotlib

是否有适用于 Mac 的 QTDesigner 的 matplotlib 小部件插件？

为什么我关心：我正在尝试对现有的 python/matplotlib/scipy/numpy 应用程序进行 GUI 化。我想尝试通过 QT 和 Qdesigner 来做到这一点，但我对他们很陌生。我知道我可以“手动”实现除 Designer 之外的 GUI，并受益于“第 6 章。在 Qt 4 中嵌入 Matplotlib”（来自 Python 开发人员的 Matplotlib 一书）和诸如“ [http://eli.thegreenplace ”之类的帖子.net/2009/01/20/matplotlib-with-pyqt-guis/](http://eli.thegreenplace.net/2009/01/20/matplotlib-with-pyqt-guis/) ”和“[在 pyqt4 中使用 imshow 嵌入 matplotlib](https://stackoverflow.com/questions/8641901/embedding-matplotlib-in-pyqt4-using-imshow) ”。但据说有一个用于 Designer 的小部件插件似乎可以帮助我，但我似乎无法在任何地方找到它。

我看过诸如“ [Qtdesigner 中的 Matplotlib 小部件](https://stackoverflow.com/questions/6753639/matplotlib-widget-in-qtdesigner/7296932#7296932)”之类的帖子，但我似乎在我的 Mac 硬盘上找不到 matplotlib 插件。（我使用的是 MacPorts，pythonselect 设置为 2.7 版本）我似乎拥有的唯一插件是

```
/opt/local/share/qt4/plugins/designer/libpython27plugin.dylib
/opt/local/share/qt4/plugins/designer/libpython32plugin.dylib
/opt/local/share/qt4/plugins/designer/libqdeclarativeview.dylib
/opt/local/share/qt4/plugins/designer/libqt3supportwidgets.dylib
/opt/local/share/qt4/plugins/designer/libqwebview.dylib   
/opt/local/share/qt4/plugins/designer/libqwt_designer_plugin.dylib 
```

据说 PythonXY 提供了 matplotlib 插件，但是根据线程“ [PythonXY on Mac？](https://stackoverflow.com/questions/12833780/pythonxy-on-mac) ”没有可用的 PythonXY 端口...

那么有没有办法通过Designer中的插件（或其他解决方案）来计划我的完整GUI，或者我只是在某个框架中手动编码matplotlib部分？

谢谢。

PS-我在 scipy.org/Cookbook/Matplotlib/Qt_with_IPython_and_Designer 看到了用于构建 matplotlib 小部件的 Cookbook 说明，但是我的 Designer 版本（4.8.4）看起来与那里描述的完全不同。创建“主窗口”后，没有“工具”下拉菜单，也没有机会制作自定义小部件...帮助？当前关于制作自定义小部件的教程，qt-project.org/doc/qt-4.8/designer-customwidgetplugin.html，作为一个新手，我觉得……有点压倒性。

PPS-我也没有和QT4结婚。就像我说的，我对此很陌生，所以如果您想指出涉及另一个（更简单？）GUI 构建系统（例如 Tkinter）的示例，我完全可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:11:20.317

这本书 [Matplotlib for Python Developers](http://www.packtpub.com/matplotlib-python-development/book)详细解释了如何在 QtDesigner（平台无关）中添加 Matplotlib 图。幸运的是，它包含在 [免费示例章节](http://www.packtpub.com/sites/default/files/sample_chapters/7900-matplotlib-for-python-developers-sample-chapter-6-embedding-matplotlib-in-qt-4.pdf)中，请参见第 165 页。

# java - Maven onejar插件，获取属性文件

> ID：15576985
> 
> 赞同：1
> 
> 时间：2013-03-22T18:00:04.540
> 
> 标签：java, maven, uberjar

我正在使用 Maven onejar 插件 ( [https://code.google.com/p/onejar-maven-plugin/](https://code.google.com/p/onejar-maven-plugin/) ) 创建一个 uberjar。

我想访问位于我的类路径根目录中的属性文件，如下所示：

```
Properties prop = new Properties();

        try {
            prop.load(new FileInputStream("Db.properties"));

            driver = prop.getProperty("driver");
            url = prop.getProperty("url");
            username = prop.getProperty("username");
            password = prop.getProperty("password");

        } catch (IOException ex) {
            LOG.debug(ex.toString());
        }   

        conn = null; 
```

找到了位于同一目录中的 log4j.properties 文件，因为我可以进行日志记录...我的问题是什么？:/ 但是找不到 Db.properties。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:09:52.527

[FileInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/FilterInputStream.html)用于从位于文件系统上的文件中加载资源。jar 中的文件不在文件系统上。您需要使用不同的[InputStream](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html)。

对于这种情况，建议使用[ClassLoader#getResourceAsStream(String)](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)方法。它返回在类路径中找到的 InputStream 资源。就像是：

```
InputStream is = getClass().getClassLoader().getResourceAsStream("/Db.properties"); 
```

应该管用。或者为了方便：

```
InputStream is = getClass().getResourceAsStream("/Db.properties"); 
```

值得注意的是，之所以如此，`log4j.properties`是因为 Log4j 在设计上可以在根类路径中加载配置文件。

# c# - C# Windows 窗体 Listview 选定项

> ID：15576986
> 
> 赞同：0
> 
> 时间：2013-03-22T18:00:05.570
> 
> 标签：c#, windows-forms-designer

我有一个由 SQL 数据库填充的 Windows 表单中的列表视图。我有一个按钮可以在选择时删除记录，并且工作正常。但是如果没有选定的项目并且我单击删除按钮，我会得到错误。所以我添加了一个消息框和一个条件，但总是得到 -***对象引用未设置为对象的实例。***

那么如何检查列表视图中是否有选定的项目，以便它输入 If？

谢谢

```
private void btnDelete_Click(object sender, EventArgs e)
    {

        bool b = this.lvBrands.FocusedItem.Checked;

        if (b == false)
        {
            MessageBox.Show("You must select a brand .", "Brand Select Error",
            MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        }
        else
        {
            string sID = this.lvBrands.FocusedItem.Text;
            deleteBrand(sID);
            clearBrand(); 

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:01:23.350

你可以做

```
if(lvBrands.SelectedItems.Count > 0)
{
//you have something selected
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:03:45.600

`FocusedElement`在尝试引用它之前，您需要检查是否不为空。

```
 bool b = false;
 if(this.lvBrands.FocusedItem != null)
 {
      b = this.lvBrands.FocusedItem.Checked;
 } 
```

但是，正如@bobek 指出的那样，如果您正在寻找选定的项目，您应该使用`SelectedItem`而不是`FocusedItem`属性。代码是一样的，只是使用`SelectedItem`.

# ruby - 如何让 ruby 将相同的随机生成的标题保存到 txt 中？

> ID：15576988
> 
> 赞同：0
> 
> 时间：2013-03-22T18:00:15.980
> 
> 标签：ruby

对于如何将方法文本保存到 txt 文件中，我得到了你们很好的回应，但我现在遇到了不同的问题。问题是程序生成一个随机标题并在命令提示符下打印它，但它在文件中保存了一个完全随机的标题。例如，如果我运行程序，它会生成一个标题“Big Thing”，但在 txt 文件中它会保存“Small Game”。有没有办法让程序保存与在 CP 中打印的相同标题？代码看起来像这样：

```
class Generator
  def title_adj
    title_adj = [
       "Big",
       "Small"]
    item_title_adj = title_adj[rand(title_adj.length)]
  end
  def title_noun
    title_noun = [
       "Thing",
       "Game"]  
    item_title_noun = title_noun[rand(title_noun.length)]
  end
  def title
    title_adj + title_noun
  end
  def initialize(io)
    @io = io
  end
  def all
    @io.puts "Your story is called: " + title
  end
end

fict_gen = Fiction_Generator.new(STDOUT)
def prompt
  print "> "
end
puts "Do you want to generate a new title or read the existing one?"
puts "1 = Generate, 2 = Read existing"

prompt; r = gets.chomp
if r == "1"
  fict_gen.all

  File.open("Story.txt", "a+") do |file|
    fict_gen = Fiction_Generator.new(file)
    fict_gen.all
  end

elsif r == "2"
  File.open("Story.txt").each_line{ |s|
  puts s
  }
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:15:50.910

问题是您每次调用该方法时都会随机生成标题。自己证明这一点：

```
a = Generator.new(STDOUT)
a.title #=> "BigThing"
a.title #=> "SmallThing"
a.title #=> "BigThing" 
```

解决方案，将标题存储在实例变量中：

```
def title
  @title ||= %w|Big Small|.sample + %w|Thing Game|.sample
end 
```

运算符仅在接收者是或`||=`时才执行赋值。`nil``false`

# python - 提取公钥长度（以位为单位）

> ID：15576995
> 
> 赞同：3
> 
> 时间：2013-03-22T18:00:45.933
> 
> 标签：python, m2crypto

我的目标是开发一个 Python 脚本来连接到主机并确定服务器公钥长度（以类似于运行 openssl 的位）：

```
(openssl s_client -connect 10.18.254.29:443)
yada yada yada
Server certificate
-----BEGIN CERTIFICATE-----
-----END CERTIFICATE-----
Server public key is 2048 bit 
```

我已经启动了这个基本脚本：

```
from M2Crypto import SSL, RSA
SSL.Connection.clientPostConnectionCheck = None
ctx = SSL.Context()
conn = SSL.Connection(ctx)
conn.connect(('1.1.1.1', 443))
cert = conn.get_peer_cert()
print cert.get_issuer().as_text()

print cert.get_subject().as_text()
print cert.get_fingerprint()

print cert.get_pubkey().get_rsa().as_pem() 
```

我似乎找不到显示密钥长度属性的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:15:28.323

根据@abarnert 的帮助，我将代码更改为以下

```
from M2Crypto import SSL, RSA

SSL.Connection.clientPostConnectionCheck = None
ctx = SSL.Context()
conn = SSL.Connection(ctx)
conn.connect(('10.18.254.29', 443))
cert = conn.get_peer_cert()

print cert.get_issuer().as_text()

print cert.get_subject().as_text()
print cert.get_fingerprint()

**def size(self):
    """
    Return the size of the key in bytes.
    """
    return m2.pkey_size(self.pkey)** 
```

**打印 cert.get_pubkey().size()*8**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:13:47.297

一般的方法是：

```
print key.size() 
```

正如[文档](http://www.heikkitoivonen.net/m2crypto/api/M2Crypto.EVP.PKey-class.html)`PKey`所说，这是以*字节*为单位的大小，而不是位。所以，如果你想得到那个“2048”，你需要乘以 8。

如果您知道它是 RSA，并且已经调用过`get_rsa()`，您可以这样做：

```
print len(rsa) 
```

[文档](http://www.heikkitoivonen.net/m2crypto/api/)没有说明这是做什么的，但它以位为单位返回长度。

与 M2Crypto 一样，您真正需要查看的是 libssl/libcrypto 文档（而不是 openssl 命令行工具）。而且，如果您无法猜测调用了哪些 C 函数，源代码通常非常简单。

例如，您可以看到[`PKey.size()`](http://svn.osafoundation.org/m2crypto/trunk/M2Crypto/EVP.py)是：

```
def size(self):
    """
    Return the size of the key in bytes.
    """
    return m2.pkey_size(self.pkey) 
```

并且[`RSA.__len__`](http://svn.osafoundation.org/m2crypto/trunk/M2Crypto/RSA.py)是：

```
def __len__(self):
    return m2.rsa_size(self.rsa) << 3 
```

根据 M2Crypto 中的标准编码约定，`m2.rsa_size`是一个 SWIG 包装器[`RSA_size`](https://www.openssl.org/docs/crypto/rsa.html)。

# ruby-on-rails - Bundler - 找不到 Nokogiri gem 的兼容版本

> ID：15576997
> 
> 赞同：2
> 
> 时间：2013-03-22T18:00:58.383
> 
> 标签：ruby-on-rails, ruby, bundler, nokogiri

我在执行时收到以下消息`bundle install`：

```
Bundler could not find compatible versions for gem "nokogiri":
  In Gemfile:
    community_engine (>= 0) ruby depends on
      nokogiri (~> 1.5.0) ruby

    opengraph (>= 0) ruby depends on
      nokogiri (1.4.7) 
```

我尝试了几个建议，但没有任何效果。前任：

```
gem 'nokogiri', '~> 1.5' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:06:17.137

你有没有尝试过：

```
gem 'nokogiri', '~> 1.5.0' 
```

# jquery - Jquery Mobile 在返回按钮上刷新上一页

> ID：15576998
> 
> 赞同：4
> 
> 时间：2013-03-22T18:01:02.723
> 
> 标签：jquery, jquery-mobile

这段代码在 JQM 中用于从 DOM 中删除以前的页面非常有效，因此当您单击“返回”时，它会刷新前一页的内容。

```
$('div').live('pagehide', function(event, ui) {
    $(event.target).remove();
}); 
```

但是，这在最新的 JQuery 更新中出现了问题，因为“$().live”已被弃用，并且我无法使用“on”或“bind”和更新的参数使其工作。

有没有人找到一个可行的解决方案？

***更新：***

我不能使用“document.location”，因为我不能让某些页面出现在“返回”导航堆栈中。

例如，如果我转到“提交页面”并且提交时我只需发出 History.Back(); 打电话，它会带你回到更新的“详细信息页面”。我不希望他们单击​​导航栏上的“返回”并再次返回“提交页面”，因为该项目无法提交两次。我不为此使用对话框或弹出窗口是有原因的，但这太长了无法解释。

我试过：

```
$(document).on("pagehide", "#PageId", function () {
      $(event.target).remove();
  }); 
```

而且它不能完全工作，当我发出 History.Back(); 时它会更改 URL 路径；命令，但页面停留在“提交页面”上。当我使用“$().live”代码时，效果很好。也许“开”不是一个好的替代品？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T20:30:17.300

威廉，你忘记了***事件***参数。

如果您想全局使用它来刷新“返回”上的所有先前页面，您可以使用“div”而不是“#PageId”。只需将其放入您的母版页的 javascript 中。

```
$(document).on("pagehide", "div[data-role=page]", function(event){
  $(event.target).remove();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T18:04:16.147

这应该有效：

```
$(document).on("pagehide", "#[pageID]", function() {
    // your code here
}); 
```