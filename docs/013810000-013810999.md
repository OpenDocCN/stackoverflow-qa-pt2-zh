# StackOverflow 问答 13810000-13810999

# android - 添加按钮以映射 infowindow android

> ID：13810002
> 
> 赞同：9
> 
> 时间：2012-12-10T21:59:54.213
> 
> 标签：android, google-maps

在新的 Google Maps for Android API v2 中，我可以非常轻松地获得要显示的自定义标记和信息窗口。但是，我试图在我的信息窗口中有多个按钮，每个按钮执行不同的`onClick`操作，但问题是，地图将 InfoWindow 视为它自己的按钮对象（无论我在哪里单击 InfoWindow，它都会按下整个事情）。有谁知道如何定制更多？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-13T10:25:14.900

刚刚在[文档](https://developers.google.com/maps/documentation/android/marker)中找到了这个。

> 如前面关于信息窗口的部分所述，信息窗口不是实时视图，而是将视图呈现为地图上的图像。因此，您在视图上设置的任何侦听器都将被忽略，并且您无法区分视图各个部分的点击事件。建议您不要在自定义信息窗口中放置交互式组件（例如按钮、复选框或文本输入）。

不幸的是，这回答了它。我试图添加与您相同的功能。

# java - Spring 3.1，JSON 响应 ModelAndView

> ID：13810004
> 
> 赞同：1
> 
> 时间：2012-12-10T21:59:59.113
> 
> 标签：java, json, spring, response, partial-views

这是我的第一篇文章。对不起我的英语...

我对 postJSON 和使用 ModelAndView 返回部分视图有疑问。

我的控制器：

```
 @RequestMapping(method=RequestMethod.POST, value = "/addUrl.html")
public @ResponseBody ModelAndView addSubMenu(@RequestBody Menu menu) {
    ModelAndView mav = new ModelAndView(PathConfig.MENU_DIR + "show_url");

    int id = menuService.saveOrUpdateMenu(1, menu.getTitle(), menu.getUrl(), 4, "pl");
    mav.addObject("submenu", menuService.get(id));
    return mav;
} 
```

我的ajax代码：

```
$("#menuUrl").submit(function(){
    var menu = $(this).serializeObject();

    $.ajax({
        type: "POST",
        url: config.resourcePath+"/addUrl.html",
        data: JSON.stringify(menu),
        dataType: 'json',
        contentType: "application/json; charset=utf-8",
        success: function(response){
            $( "#site" ).append(response);
        },
        error: function(e){
            alert("Server did not response.");
        }
    });

}); 
```

但是...我有错误：服务器没有响应...

如何使用 json 渲染部分视图？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:47:26.573

这里有几件事可能是错误的：

通过指定您的`Content-type`标头，`application/json`您期望得到 json 的响应，但是看看您处理响应的方式，看起来您想要的是 html

如果您正在寻找 html 作为响应，则从请求中删除 Content-Type 标头，`@ResponseBody`从 response 中删除注释`ModelAndView`，而不是只返回一个指向普通 jsp 的视图，该 jsp 可以创建您期望的 html 响应..

```
@RequestMapping(method=RequestMethod.POST, value = "/addUrl.html")
public ModelAndView addSubMenu(@RequestBody Menu menu) {
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:34:08.287

如果你想要的是 json 来更新页面的某些部分，不返回 ModelAndView，返回 String，确保有一个 json 序列化器

```
 @RequestMapping(method=RequestMethod.POST, value = "/addUrl.html")
    public @ResponseBody String addSubMenu() {
         //yourvariable
         return yourvariable.toString();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:06:50.507

```
$("#menuUrl").submit(function(){
    var obj = $(this).serializeObject();
    obj.parentId = getParentId(menuDivId);

    $.ajax({
        url: config.resourcePath+"/addUrl.html", 
        data : JSON.stringify(obj),
        contentType : 'application/json',
        type : 'POST',
        context: document.body,
    }).done(function(response) {
        $("#site").append(response);
    });

    return false;
}); 
```

控制器返回 ModelAndView。它正在工作。

# python - 如何使用 Python 从 syslog 文件中获取 DST 地址

> ID：13810007
> 
> 赞同：0
> 
> 时间：2012-12-10T22:00:06.710
> 
> 标签：python, parsing

所以，我有一个我的家庭路由器生成的日志文件。它有数百行。每行看起来像这样：（下面的长线）。我想解析这个文件来获取所有的“DST”地址。例如，从下面的行中，DST 地址是“16.99.99.102”

```
Dec 10 16:02:02 ? user.warn kernel: DROP IN=br0 OUT=vlan1 SRC=192.168.1.127 DST=16.99.99.102 LEN=52 TOS=0x00 PREC=0x00 TTL=127 ID=24724 DF PROTO=TCP SPT=62694 DPT=443 WINDOW=8192 RES=0x00 SYN URGP=0 OPT (020405B40103030201010402) 
```

1.  使用 Python 执行此操作的最佳方法是什么？最终，我想通过 iplookup 查询运行这些 DST ip 地址以获取域名。

2.  我理想的脚本是将时间戳、SRC 地址和 DST 地址放在开头，所有这些都分别放入字典中，其键是“SRC”IP 地址，其对应值是包含DST 地址和时间戳。

我不一定要寻找优雅的脚本，而是要寻找可行的东西！

(1) 的解决方案足够好，但 (2) 的解决方案将是一个奖励！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:06:50.280

Does this work for you:

```
In [30]: somestr = "Dec 10 16:02:02 ? user.warn kernel: DROP IN=br0 OUT=vlan1 SRC=192.168.1.127 DST=16.99.99.102 LEN=52 TOS=0x00 PREC=0x00 TTL=127 ID=24724 DF PROTO=TCP SPT=62694 DPT=443 WINDOW=8192 RES=0x00 SYN URGP=0 OPT (020405B40103030201010402)"

In [31]: somestr.split()
Out[31]: 
['Dec',
 '10',
 '16:02:02',
 '?',
 'user.warn',
 'kernel:',
 'DROP',
 'IN=br0',
 'OUT=vlan1',
 'SRC=192.168.1.127',
 'DST=16.99.99.102',
 'LEN=52',
 'TOS=0x00',
 'PREC=0x00',
 'TTL=127',
 'ID=24724',
 'DF',
 'PROTO=TCP',
 'SPT=62694',
 'DPT=443',
 'WINDOW=8192',
 'RES=0x00',
 'SYN',
 'URGP=0',
 'OPT',
 '(020405B40103030201010402)']

In [32]: [i for i in somestr.split() if i.startswith("DST")][0].partition('=')[-1]
Out[32]: '16.99.99.102' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:11:27.123

对于选项 A：如果所有行的格式（和顺序）相同，则可以对每一行进行子串：

`dst = line[line.find("DST=")+len("DST="):line.find("LEN=")]`

对于选项 B，您可以在循环中遵循相同的想法：

```
D = {}
for line in lines:
    dst = line[line.find("DST=")+len("DST="):line.find("LEN=")]
    src = line[line.find("SRC=")+len("SRC="):line.find("DST=")]
    ts = line[:line.find("?")]

    D[src] = (dst,ts) 
```

您可能还希望`strip()`生成的字符串获得更清晰的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:11:30.250

我会为此使用正则表达式

就像是

```
>>> xxy = "Dec 10 16:02:02 ? user.warn kernel: DROP IN=br0 OUT=vlan1 SRC=192.168.1.127 DST=16.99.99.102 LEN=52 TOS=0x00 PREC=0x00 TTL=127 ID=24724 DF PROTO=TCP SPT=62694 DPT=443 WINDOW=8192 RES=0x00 SYN URGP=0 OPT (020405B40103030201010402)"
>>> re.findall("^([^?]*).*DST=([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)",xxy)
[('Dec 10 16:02:02 ', '16.99.99.102')] 
```

# visual-studio-2010 - “System.Data.Entity.Infrastructure”的参考是什么？

> ID：13810017
> 
> 赞同：20
> 
> 时间：2012-12-10T22:00:55.650
> 
> 标签：visual-studio-2010, ef-code-first, entity-framework-5

使用[Entity Framework Power Tools Beta 2 扩展](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)，它生成具有以下导入的模型类：

```
using System.Data.Entity.Infrastructure; 
```

**我需要在使用 Visual Studio 2010 的项目中包含哪些参考资料？**

目前，我有以下*参考资料*：

*   log4net
*   系统配置
*   系统核心
*   系统数据
*   系统.数据.实体
*   系统.Web
*   系统.Web.Mvc
*   系统.XML

在*添加引用*对话框中，我有以下内容：

![添加参考对话框](../Images/d84e236838d372cf61399ab817f2997d.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-10T22:07:06.413

不要通过“添加引用”对话框添加 EF lib（它是旧版本）您需要添加最新版本的 NuGet 包“EntityFramework”。

# mysql - MySQL 更新一行

> ID：13810018
> 
> 赞同：0
> 
> 时间：2012-12-10T22:00:59.833
> 
> 标签：mysql

我想将一行从一个表更新到另一个表

我正在尝试这样的事情：

```
INSERT INTO ps_product_shop (id_category_default)
SELECT Distinct id_category_default
FROM ps_product
WHERE id_product BETWEEN 1 AND 6226 
```

但是我得到主键错误我需要将 id_category_default 的值从 ps_product 更改为 ps_product_shop

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:00:38.607

这是你要找的吗？

```
UPDATE ps_product_shop prod_shop
INNER JOIN ps_product prod USING(id_product)
SET prod_shop.id_category_default = prod.id_category_default
WHERE prod_shop.id_product BETWEEN 1 AND 6226 
```

# c++ - 查询四叉树导致溢出

> ID：13810029
> 
> 赞同：0
> 
> 时间：2012-12-10T22:01:42.363
> 
> 标签：c++, recursion, quadtree

我希望能够检查四叉树中包含在与区域相交的节点中的所有元素。但问题是，如果我调用`Query`一个只有高度为 2 的部分，则会发生堆栈溢出。

执行以下操作的更有效（且错误更少）的方法是什么？

```
//Call
query_area = new a2de::Rectangle(_mouse->GetX(), _mouse->GetY(), 100.0, 100.0, a2de::YELLOW, false);
_selected_elements = _qt->Query(*query_area);

//...
//Definitions
template<typename T>
std::vector<T> QuadTree<T>::Query(a2de::Rectangle& area) {
    return QueryNode(this, area);
}

template<typename T>
std::vector<T> QuadTree<T>::QueryNode(QuadTree<T>* node, a2de::Rectangle& area) {
    std::vector<T> contained_elements;
    if(node->_bounds.Intersects(area)) {
        if(IsLeaf(node) == false) {
            std::vector<T> child_results;
            for(std::size_t i = 0; i < 4; ++i) {
                child_results = QueryNode(_children[i], area);
                for(std::vector<T>::iterator _iter = child_results.begin(); _iter != child_results.end(); ++_iter) {
                    contained_elements.push_back(*_iter);
                }
                child_results.clear();
            }
        } else {
            for(std::vector<T>::iterator _iter = _elements.begin(); _iter != _elements.end(); ++_iter) {
                contained_elements.push_back(*_iter);
            }
        }
    }
    return contained_elements;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:18:09.813

固定的。它与使用`this`指针而不是传入的`node`值调用 QueryNode 和 Leaf 有关。

```
//Call
query_area = new a2de::Rectangle(_mouse->GetX(), _mouse->GetY(), 100.0, 100.0, a2de::YELLOW, false);
_selected_elements = _qt->Query(*query_area);

//...
//Definitions
template<typename T>
std::vector<T> QuadTree<T>::Query(const a2de::Shape& area) {
    std::vector<T> selected_elements;
    QueryNode(this, area, selected_elements);
    return selected_elements;
}

template<typename T>
void QuadTree<T>::QueryNode(QuadTree<T>* node, const a2de::Shape& area, std::vector<T>& selected_elements) {

    if(node == nullptr) return;

    if(node->_bounds.Intersects(area) == false) return;

    if(IsLeaf(node)) {
        for(std::vector<T>::iterator _iter = node->_elements.begin(); _iter != node->_elements.end(); ++_iter) {
            selected_elements.push_back(*_iter);
        }
        return;
    }
    for(std::size_t i = 0; i < MAX_CHILDREN; ++i) {
        QueryNode(node->_children[i], area, selected_elements);
    }
} 
```

# php - PHP如何合并2个查询

> ID：13810033
> 
> 赞同：0
> 
> 时间：2012-12-10T22:02:01.007
> 
> 标签：php, xml, dom, xpath, xpath-2.0

我有这两个查询：

**1）获取图片的所有URL：**

```
$imgs = $xpath->query('//div[@class="pin"]/div[@class="PinHolder"]/a/img'); 
```

**2) 获取每张图片有多少人在 Facebook 上点赞：**

```
foreach($xpath->query('//span[@class="LikesCount"]') as $span) {
    $int = (int) $span->nodeValue;
    if ($int > 5) {
        echo $i++ . "--> " . $int . "<br />";
    }
} 
```

**我想将它们合并以获得仅被 facebook 点赞超过 5 次的** 图像也就是说，没有被点赞的图片根本没有 LikesCount 类。

按照标记的示例：

```
<div class="pin">

[...]

<a href="/pin/56787645270909880/" class="PinImage ImgLink">
    <img src="http://media-cache-ec3.pinterest.com/upload/56787645270909880_d7AaHYHA_b.jpg" 
         alt="Krizia" 
         data-componenttype="MODAL_PIN" 
         class="PinImageImg" 
         style="height: 288px;">
</a>

<p class="stats colorless">
    <span class="LikesCount"> 
        22 likes 
    </span>
    <span class="RepinsCount">
        6 repins
    </span>
</p>

[...]

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:31:18.603

要检索并非所有图像，而仅检索点赞数为 5 或更多的图像，我会尝试将作业中的 XPath 表达式更改`$imgs`为读取：

```
//div[@class="pin"]
     [.//span[@class = 'LikesCount']
             [substring-before(normalize-space(.),' ') > 5]]
     /div[@class="PinHolder"]
     /a/img 
```

（我添加了空格以使其更容易理解；如果您的 XPath 解析器在这件事上不遵循规范 [有些不遵循]，则可能需要消除换行符）。

我不清楚为什么 cbuckley 说这需要 XPath 2.0。也许他在这里看到了一些我没有看到的微妙问题。

# mysql - 如何在 MySQL 性能方面组织日历日期的存储

> ID：13810037
> 
> 赞同：1
> 
> 时间：2012-12-10T22:02:13.910
> 
> 标签：mysql, date, database-performance

我必须为数据库中的几乎每个表存储 2 个日期，例如**tbl_clients tbl_users tbl_employers tbl_position tbl_payments tbl_quiz tbl_email_reminder**等。

大多数时候我存储“date_created”和“date_modified”有时很少有额外的日期。

什么是在 MySQL 数据库性能方面存储日期的最佳方法（以后可能有很多客户的网站可能超过 500,000+）

**选项 1**：为每个表添加 2 列日期。

**选项 2** ：专门为日期创建表“ **tbl_dates ”。**

我在想选项 2 会更快，因为我只需要在一个特定页面上显示日期，例如“ **report.php** ”，对吗？

**另外，我应该在“ tbl_dates** ”中放多少列而不会使它太慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:11:20.570

对于一般情况（行创建和行修改时间戳），我会将它们放在与它们相关的同一个表中。否则，您会发现您需要的后续连接会比简单的方法更减慢您的查询速度。

在任何情况下，您都不想养成构建许多表都可以使用的“通用表”的习惯`JOIN`——这是因为理想情况下您将为每个关系创建外键，但如果某些行属于`tbl_clients`，一些到`tbl_users`...（等）。

诚然，您的 MySQL 引擎可能会阻止您使用外键 - 取决于您使用的是哪一个 - 但（至少对我而言）这一点是正确的。

# javascript - 为什么我的 chaine.charAT 不是一个函数，还有什么在这里坏了

> ID：13810049
> 
> 赞同：1
> 
> 时间：2012-12-10T22:03:15.100
> 
> 标签：javascript, html

```
function chainePair(chaine) {
    var longueur = chaine.length;
    for (var i = 0; i <= longueur; i += 2) {
        var result = chaine.charAT(i);
        document.getElementById("reponse1").innerHTML = result + " ";
    }
}​ 
```

我试图让这个函数在 reponse1 id 分配的空间中写入我的字符串的每 2 个字母。示例：字符串 monster 将显示：`m n t r`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:08:09.860

JavaScript is case sensitive, use `.charAt()` method:

```
// ----------------------v
var result = chaine.charAt(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:13:57.730

```
function chainePair(string){
    var result = "";
    for(var i=0; i<string.length; i+=2){
       result += string[i];
    }
    document.getElementById("response1").innerHTML = result+" ";
} 
```

# android - 图像旋转不适用于三星 Galaxy Nexus android

> ID：13810050
> 
> 赞同：0
> 
> 时间：2012-12-10T22:03:22.933
> 
> 标签：android, android-image, samsung-mobile

我已经在大约 25 台设备上测试了这个代码片段，除了我现在尝试测试的三星 Galaxy Nexus 之外，它在所有设备上都运行良好。

这是方法，我很抱歉没有将其修剪以找到引发异常的确切位置，但 eclipse 的调试是 doodoo。

```
private void setupImageView() {
    imageLocation = currentPhotoPath;

    // Get the dimensions of the View
    Display display = getWindowManager().getDefaultDisplay();
    Point size = getDisplaySize(display);
    int targetW = size.x;

    // Get the dimensions of the bitmap
    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;

    BitmapFactory.decodeFile(imageLocation, bmOptions);
    int photoW = bmOptions.outWidth;
    int photoH = bmOptions.outHeight;

    // Determine how much to scale down the image
    int scaleFactor = Math.min(photoW / targetW, photoH / targetW);

    // Decode the image file into a Bitmap sized to fill the View
    bmOptions.inJustDecodeBounds = false;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = true;

    Bitmap bitmap = BitmapFactory.decodeFile(imageLocation, bmOptions);
    //int rotationForImage = getRotationForImage(imageLocation);
    int rotationForImage = (whichCamera == 0 ? 90 : 270);
    if (rotationForImage != 0) {
        int targetWidth = rotationForImage == 90 || rotationForImage == 270 ? bitmap.getHeight() : bitmap.getWidth();
        int targetHeight = rotationForImage == 90 || rotationForImage == 270 ? bitmap.getWidth() : bitmap.getHeight();
        Bitmap rotatedBitmap = Bitmap.createBitmap(targetWidth, targetHeight, bitmap.getConfig());
        Canvas canvas = new Canvas(rotatedBitmap);
        Matrix matrix = new Matrix();
        matrix.setRotate(rotationForImage, bitmap.getWidth() / 2, bitmap.getHeight() / 2);
        canvas.drawBitmap(bitmap, matrix, new Paint());

        bitmap.recycle();
        bitmap = rotatedBitmap;
        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
        try
        {
                File f = new File(imageLocation);
                f.createNewFile();
                //write the bytes in file
                FileOutputStream fo = new FileOutputStream(f);
                fo.write(bytes.toByteArray());
                fo.close();
        }
        catch(java.io.IOException e){}
    }
    imageView.setImageBitmap(bitmap);
} 
```

任何人都知道三星对关系的不同之处会导致抛出异常吗？它在 Galaxy S III 上运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:57:39.643

看起来您提到的 if 块中的某些内容正在抛出 NPE - 这是真正的错误。不要担心 Activity/ResultInfo 的东西，它是下游的，由 NPE 触发。逐行查找空引用:-)

关于 Eclipse - 遗憾的是我在那里没有太多经验。对于 Android，我个人使用 IntelliJ，调试效果很好。您是否能够调试其他 Java 代码（甚至是简单的 Hello, World）？

# java - FreeTTS mbrola 无法找到路径

> ID：13810052
> 
> 赞同：0
> 
> 时间：2012-12-10T22:03:26.253
> 
> 标签：java, freetts, mbrola

当我尝试使用 FreeTTS 库时，出现错误：

```
Could not validate any MBROLA voices at

Some/Location/That/IThought/Held/mbrola

Make sure you FULLY specify the path to
the MBROLA directory using the mbrola.base
system property. 
```

我正在使用`System.setProperty("mbrola.base", "Path/here");`设置`mbrola.base`，但我不知道如何指向路径或设置 mbrola。这是我的项目设置，我正在使用处理。

```
+SketchBook
++AI
+++Src.pde
+++data
++libraries
+++freetts-1.2
++++lib
+++++mbrola
++++mbrola
+++++mbrola 
```

我正在运行 Windows 8，所以如果这有任何影响的话..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:24:46.760

在我的 Windows 8机器上安装 MBROLA [FreeTTS](http://freetts.sourceforge.net/docs/index.php)后，我遇到了同样的错误。

**下载 MBROLA 文件**

如果您还没有，则需要从[MBROLA](http://tcts.fpms.ac.be/synthesis/mbrola.html)下载 2 个二进制文件和 3 个语音 zip ：

*   电脑/视窗
*   个人电脑/DOS
*   us1：美国英语女
*   us2：美式英语男
*   us3：美式英语男

然后按照[为 FreeTTS 设置 MBROLA](http://freetts.sourceforge.net/mbrola/README.html)指南进行操作。

**设置 MBROLA 音色**

解压 mbr301d 文件并将文件夹 us1、us2 和 us3 复制到解压后的 mbr301d 文件夹中：

```
Directory of C:\Users\Phil\Downloads\mbr301d

[mbr302a]    
mbrola.exe   
readme.txt
[us1]        
[us2]        
[us3] 
```

**测试 MBROLA 声音**

从命令提示符测试 MBROLA 声音：

```
cd C:\Users\Phil\Downloads\freetts-1.2.2-bin\freetts-1.2
java -Dmbrola.base="C:\Users\Phil\Downloads\mbr301d" -jar lib/mbrola.jar 
```

您应该看到每个声音的描述，例如：

```
Name: mbrola_us1
Description: MBROLA Voice us1
Organization: mbrola
Domain: general
Locale: en_US
Style: standard
Gender: FEMALE
Age: YOUNGER_ADULT
Pitch: 180.0
Pitch Range: 22.0
Pitch Shift: 1.0
Rate: 150.0
Volume: 1.0 
```

**测试 FreeTTS 合成**

在命令提示符下运行：

```
java -Dmbrola.base="C:\Users\Phil\Downloads\mbr301d" -jar lib/freetts.jar -voice kevin16 -dumpAudio 42.wav -text forty two
42.wav 
```

# iphone - 如何从 UIScrollView 中正确删除 UIImageView？

> ID：13810055
> 
> 赞同：1
> 
> 时间：2012-12-10T22:03:33.577
> 
> 标签：iphone, ios, uiview, uiscrollview, uiimageview

我正在开发一个应用程序，我需要使用 Xcode 4.5.2 在视图中加载许多图像

所以，在顶部，我有一个`UIView`，在这个里面`UIView`，我必须`UIScrollView`显示许多图像，我`UIScrollView`在 pagingEnabled 模式下使用它。由于我有许多图像要加载，我知道不可能一次加载。因此，我决定根据需要添加或删除。

当应用程序启动时，我已经加载了三个图像`UIScrollView`，当用户传递到图像 2 时，我想从中删除图像 0。`UIScrollView`当我尝试删除图像 0 时，我得到了完全白屏。有趣的是，如果我不要尝试删除图像 0，当用户传递到图像 3 时，我想将新图像（图像 4）加载到`UIScrollView`，并删除图像 1。到目前为止，我能够做到这一点。基本上，我的应用程序工作得很好，但是当我想删除第一个（**在索引 0 处**）图像时，屏幕上出现了完全白屏。

你知道我为什么会出现这种行为吗？我既没有收到警告，也没有收到错误。我怎么可能删除所有其他图像但不能删除图像 0 ？

谢谢你。

```
 -(void)scrollViewDidScroll:(UIScrollView *)scrollView
{ 
static NSInteger currentPage = 0 ;
CGFloat pageWidth = self.scrollView.frame.size.width ;
float fractionalPage = self.scrollView.contentOffset.x / pageWidth ;
NSLog(@"%f",fractionalPage);
if(fractionalPage == currentPage+1)
{
    NSLog(@"Swipe Left");
    currentPage++;
    NSLog(@"Current page :%d",currentPage);

    [self setLayoutImages:kLeft] ;
}
else if(fractionalPage+1 ==currentPage)
{
    NSLog(@"Swipe Right");
    currentPage--;
    NSLog(@"Current page :%d",currentPage);
    [self setLayoutImages:kRight];
} 
```

}

```
-(void)setLayoutImages:(Direction )direction
{
int currentPage = self.scrollView.contentOffset.x / scrollViewWidth ;
if(direction == kLeft)
{
    self.scrollView.contentSize = CGSizeMake(((currentPage+2) * scrollViewWidth), 350.0f);
    if(![self.scrollView viewWithTag:currentPage+1])
    {
        NSString *imageName = @"iPhone.png" ;
        UIImage *image = [UIImage imageNamed:imageName];
        UIImageView *imageView = [[UIImageView alloc]initWithImage:image ] ;
        imageView.tag  = currentPage+1 ;
        CGRect frame = imageView.frame ;
        frame.size.height = imageHeight;
        frame.size.width = scrollViewWidth ;
        frame.origin.x = (currentPage+1) * scrollViewWidth ;
        frame.origin.y = 0 ;
        imageView.frame = frame ;
        if (currentPage>2) { //To be able to remove the first image,i need to add equal here,but i got white screen.
            [[self.scrollView viewWithTag:(currentPage -2)]removeFromSuperview ] ;            }
        [self.scrollView addSubview:imageView ] ;
    }
}
else if(direction == kRight)
{
    if(![self.scrollView viewWithTag:currentPage-1] && currentPage >0)
    {
        NSString *imageName = @"gs.jpeg";
        UIImage *image = [UIImage imageNamed:imageName];
        UIImageView *imageView = [[UIImageView alloc]initWithImage:image ];
        imageView.tag = currentPage-1 ;
        CGRect frame = imageView.frame ;
        frame.size.height = imageHeight ;
        frame.size.width = scrollViewWidth ;
        frame.origin.x = (currentPage-1)*scrollViewWidth ;
        frame.origin.y = 0 ;
        imageView.frame = frame ;
        [[self.scrollView viewWithTag:currentPage+2]removeFromSuperview ] ;
        [self.scrollView addSubview:imageView ];
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:13:39.710

你可以给三个 deferant 中的每一个并重`Tag`用它，`[[view viewWithtag:tag] removeFromSuperView]`或者你可以尝试一个名为[iCarousel](https://github.com/Omarj/iCarousel)的现成项目，`nicklockwood`这是一个很棒的项目。

它可以是`horizontal` 并且`vertical`

![在此处输入图像描述](../Images/3e9c89d36c3652f39535c7131d6eb668.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:36:28.487

尝试让您的视图以 1 而不是 0 的标记开始，因为如果我没记错的话，0 是未标记视图的默认值，这可能会导致问题

# c# - 将 DataTable Row 添加到 DataGridView 而不绑定

> ID：13810056
> 
> 赞同：1
> 
> 时间：2012-12-10T22:03:35.093
> 
> 标签：c#, winforms, datagridview, datatable

我有一个预定义的 DataGridView，我需要在没有数据绑定的情况下从 DataTable 添加行。我正在尝试以`DataGridView.Rows.Add()`编程方式使用该方法，但是我不知道 DataTable 的列名。DataTable 中的列与 DataGridView 的顺序相同，但是如何在不知道列名的情况下将它们添加到 DataGridView？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T22:24:48.517

假设您的 DataGridView 存在但没有列。你可以这样做：

```
foreach (DataColumn dc in yourDataTable.Columns) {

     yourDataGridView.Columns.Add(new DataGridViewTextBoxColumn());

} 
```

然后添加行数据：

```
foreach(DataRow dr in yourDataTable.Rows) {

     yourDataGridView.Rows.Add(dr.ItemArray);

} 
```

现在，如果默认文本框列不够用，您可能必须使用不同的单元格模板创建列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T23:10:14.837

如果您的 DataGridView 没有行和列，那么只需

```
yourDataGridView.DataSource = yourDataTable 
```

会做所有的工作。

如果您的 DataGridView 已经绑定到某个数据源（如果您使用 DataTable，那么我假设 DataSource 是 DataTable），

那么您需要编辑 yourDataTable -> 从旧 DataTable 添加旧行（如果旧 DataTable 不再可访问，则从 DataGridView 添加旧行）

```
foreach(DataRow dr in oldDataTable.Rows)
{
    yourDataTable.Rows.Add(dr);
}
yourDataGridView.DataSource = yourDataTable; 
```

或编辑 oldDataTable -> 从 yourDataTable 添加新行，例如：

```
DataTable dtOld = (DataTable)yourDataGridView.DataSource;
foreach(DataRow yourdr in yourDataTable.Rows)
{
    dtOld.Rows.Add(yourdr);
}
yourDataGridView.DataSource = dtOld; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T23:12:56.943

似乎您想从中获取列名`DataTable`并将行从 DataTable 行添加到 DataGridView

```
 DataTable myDataTable = new DataTable();
            //adding Columns
            myDataTable.Columns.Add("colInt", typeof(int));
            myDataTable.Columns.Add("colDate", typeof(DateTime));
            myDataTable.Columns.Add("colString", typeof(string));

            //adding Rows
            myDataTable.Rows.Add(1, DateTime.Now, "Hello World");

            //to get columns
            foreach (DataColumn col in myDataTable.Columns)
            {
                var c = new DataGridViewTextBoxColumn() { HeaderText = col.ColumnName }; //Let say that the default column template of DataGridView is DataGridViewTextBoxColumn
                dataGridView1.Columns.Add(c);
            }

            //to get rows
            foreach (DataRow row in myDataTable.Rows)
            {
                dataGridView1.Rows.Add(row[0], row[1], row[2]);
            } 
```

反正有捷径 `dataGridView1.DataSource = myDataTable;`

# c# - WebClientProtocol.Timeout 未超时

> ID：13810058
> 
> 赞同：1
> 
> 时间：2012-12-10T22:03:39.583
> 
> 标签：c#, webservice-client

我正在通过 SOAP 调用 Web 服务。当 Web 服务关闭时，我们希望它很快失败，而不是等待默认超时。我为此使用 Timeout 属性：

```
service.Timeout = 5000; 
```

我认为应该在 5 秒后超时操作。但是，我看到该操作直到 23 秒后才超时，与默认超时时间相同（即上述行不存在）。

我看到抛出的异常是“操作已超时”，我只是不明白为什么它没有在我指定的时间内超时。我究竟做错了什么？

**编辑：**

这是测试程序：

```
long start = Environment.TickCount;
try {
  mdDqwsStatus.Service service = new mdDqwsStatus.Service();
  service.Timeout = 5000;                                        // 5 sec
  string response = service.GetServiceStatus(customerID, pafID); // This calls the WS
  long end1 = Environment.TickCount - start;                     // I never hit this line
} catch (Exception ex) {
  long end2 = Environment.TickCount - start;                     // Failure goes to here
  OutputError(Ex);
} 
```

我在 OutputError 行上设置了一个断点，然后查看 end2，看到 23000+ 毫秒。

请注意，在现场，如果 Web 服务（在 IIS 上运行）已停止，则延迟非常短。但是，如果机器出现故障或存在连接问题，则延迟为 23 秒（有时甚至更长）。

# css - Bootstrap + 简单表单复选框网格

> ID：13810059
> 
> 赞同：7
> 
> 时间：2012-12-10T22:03:40.367
> 
> 标签：css, twitter-bootstrap, simple-form

我有一个包含 20 多个标签的列表，我想在 4 列复选框网格中显示，但我不太确定最干净的方法是什么。我有以下表格：

```
= simple_form_for(@fracture) do |f|
  = f.error_notification    
  .form-inputs
    = f.input :title
    = f.input :summary
    = f.input :tag_list, :as => :check_boxes, :collection => ActsAsTaggableOn::Tag.all.map(&:name), :item_wrapper_class => 'inline' 
```

生成的表单应该类似于[http://jsfiddle.net/LVFzK/](http://jsfiddle.net/LVFzK/)，但我希望将逻辑限制在 a`wrapper`或 CSS 中，而不是手动修改 HTML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T06:36:01.937

如果您摆脱`<div class="controls span2">`列元素并将`span2`类添加到`label`元素中，`label`则将具有设定的宽度并将向左浮动。这将导致复选框与网格对齐。

```
<label class="checkbox span2">
    <input type="checkbox" value="option1"> Cash
</label> 
```

`span10`您可以通过将类添加到容器元素来强制网格为四列：

```
<div class="control-group span10"> 
```

*但是*，这将导致网格向左 -> 向右流动，然后创建新行，而不是垂直堆叠连续的元素。我认为让元素垂直堆叠的唯一方法是使用[多列布局功能](http://www.quirksmode.org/css/multicolumn.html)。我以前没有使用过它，我实际上不知道它在各种浏览器中的效果如何。

这个[jsFiddle](http://jsfiddle.net/LVFzK/57/)展示了两种方法，每一种都具有静态宽度或流体宽度。

# ios5 - 警告无法恢复先前选择的帧 - 无法以模态方式打开 UITabBarController

> ID：13810060
> 
> 赞同：0
> 
> 时间：2012-12-10T22:03:42.793
> 
> 标签：ios5, uitabbarcontroller, presentmodalviewcontroller, uiview-hierarchy

我正在尝试以模态方式呈现 tabBarController。我正在尝试通过以下代码来做到这一点：

```
summaryGraphManager *summary = [[summaryGraphManager alloc] initWithNibName:@"SummaryGraphManager" bundle:nil]; 
    [summary setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    NSLog(@"tabbar: %@",self.parentViewController);
    [self.parentViewController presentModalViewController:summary animated:YES]; 
```

当我尝试这样做时，我收到以下警告：

`warning unable to restore previously selected frame`

然后xcode向我展示了一些指向`uiview(hierarchy)_makesubtreeperformselector`严重崩溃的汇编语言/堆栈。

我认为问题在于我无法理解我所做的视图层次结构。我得到的是：

1.  有一个视图控制器，可以说*abc*，它以模态方式表示一个名为tabsManager 的*tabbarcontroller*。

2.  tabsManager 管理着两个名为 *"int_his"* 和 *"man_his"* 的 viewController。

3.  在**int_his**中单击按钮时，我需要以模态方式打开另一个名为*“summaryGraphManager”*的 tabBarController 。

请有人告诉我如何正确呈现 *summaryGraphManager * 模态？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:23:36.067

试试这个：[[self presentingViewController]dismissModalViewControllerAnimated:YES];

或者

[self.tabBarController presentModalViewController：登录动画：YES]；

# c# - 我应该使用异步处理吗？

> ID：13810061
> 
> 赞同：1
> 
> 时间：2012-12-10T22:03:44.973
> 
> 标签：c#, service, asynchronous, web

我有一个 Windows 服务，它监视一个表（带有一个计时器）的行，当它们出现时一次抓取一个行，将信息提交给 RESTful Web 服务，分析响应，并将有关响应的一些详细信息写入一张桌子。我会通过使这个异步获得*什么吗？*我当前（精简）的 Web 服务提交代码如下：

```
HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(new Uri(url));
HttpWebResponse resp;
try
{
      resp = (HttpWebResponse)req.GetResponse();
}
catch (WebException we)
{
      resp = (HttpWebResponse)we.Response;
}

if (resp != null)
{
      Stream respStream = resp.GetResponseStream();
      if (respStream != null)
      {
           responseBody = new StreamReader(respStream).ReadToEnd();
      }

      resp.Close();
      respStream.Close();
}

return responseBody; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:11:56.037

通过使用异步方法，您可以避免对异步操作的结果进行专用线程阻塞。您可以释放该线程以处理其他更高效的任务，直到异步任务完成并再次成为生产性工作。

如果您的服务需求不高，并且不经常处于需要做的工作比线程多的位置，那么您不必担心。对于许多商业应用程序来说，它们的使用率非常低，以至于不需要这样做。

如果您有一个大型应用程序为足够多的用户提供服务，并且您有大量并发请求（即使它只是在高峰使用时间），那么切换到异步对应物可能是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:12:37.030

如果您不在乎获得对任何单个请求的响应需要多长时间，不，没有特别的理由使其异步。

On the other hand, if you're waiting for one request to fully finish before you start your next request you might have trouble handling a large volume. In this scenario you might want to look at parallelizing your code. But that's only worth discussing if you get large numbers of items entered into the database for processing.

# ruby-on-rails-3 - RubyTutorial 10.5.2 Rspec 测试微博分页

> ID：13810066
> 
> 赞同：3
> 
> 时间：2012-12-10T22:04:09.783
> 
> 标签：ruby-on-rails-3, rspec-rails, railstutorial.org

在阅读 Michael Hartl 写的 Learn Rails 书时，我被其中一个练习难住了。 [通过示例学习 Rails，Michael Hartl](http://ruby.railstutorial.org/chapters/user-microposts)

“为微博分页添加测试”

我的错误测试，放置在“描述“登录用户”中，如下所示：

```
describe "pagination" do
    before(:all) do 
      30.times { FactoryGirl.create(:micropost, user: user) }
    end
    after(:all) { user.feed.delete_all }
    page.should have_selector('div.pagination') }

    it "should list each micropost" do
      user.feed.paginate(page: 1).each do |user|
        page.should have_selector('li', text: user.name)
      end
    end
  end 
```

无论我执行 page.should 还是 page.should_not，测试都显示为通过。

任何“提示/帮助”将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:27:46.603

在浏览一些存储库时，我找到了问题的答案——在创建额外的微帖子后，我需要再次访问 root_path。

```
describe "pagination" do
  it "should paginate the feed" do
    30.times { FactoryGirl.create(:micropost, user: user, content: "Consectetur adipiscing elit") }
    visit root_path
    page.should have_selector("div.pagination")
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T09:43:09.247

我认为你应该放一个过滤器来清理微柱的大量插入；就您的实现而言（除非您在此处未显示的测试代码的另一部分中执行此操作），它不会删除创建的微帖子。

这可以通过以下代码轻松完成：

```
describe "pagination" do
  after(:all) { user.microposts.delete_all unless user.microposts.nil? }
  it "should paginate the feed" do
     40.times { FactoryGirl.create(:micropost, user: user) }
     visit root_path
     page.should have_selector('div.pagination')
  end
end 
```

# mysql - Mysql : multiple tables or one big table?

> ID：13810073
> 
> 赞同：0
> 
> 时间：2012-12-10T22:04:48.580
> 
> 标签：mysql, performance, optimization, innodb

This question has been already asked but I've not found a "1 voice answer".

Is it better to do :

*   1 big table with :

user_id | attribute_1 | attribute_2 | attribute_3 | attribute_4

*   or 4 smal tables with : user_id | attribute_1

user_id | attribute_2

user_id | attribute_3

user_id | attribute_4

1 big table or many small tables ? Each user can only have 1 value for attribute_X. We have a lot of data to save (100 millions users). We are using innoDB. Performance are really important for us (10 000 queries / s).

Thanks !

François

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:10:32.230

如果您坚持**零、一或多**原则，即没有这样的事情、其中之一或无限数量，您将始终构建适当的规范化表来跟踪此类事情。

例如，一个可能的模式：

```
CREATE TABLE user_attributes (
  id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
  user_id INT NOT NULL,
  attribute_name VARCHAR(255) NOT NULL,
  attribute_value VARCHAR(255),
  UNIQUE INDEX index_user_attributes_name(user_id, attribute_name)
); 
```

这是基本的键值存储模式，每个用户可以有*许多*属性。

尽管这方面的存储要求比固定列排列的存储要求更高`attribute1`，但在 TB 级硬盘驱动器的时代，成本已经足够小了，这几乎不是问题。

通常，您会为此数据创建一个表，直到插入时间成为问题。只要您的插入速度很快，我就不会担心。此时，您可能需要考虑一种*分片*策略，将这些数据划分为具有相同架构的多个表，但前提是必须这样做。

我想这将处于 ~10-50 百万行阶段，但如果此表中的插入活动量相对较低，则可能会更高。

不要忘记优化读取活动的最佳方法是使用缓存：最快的数据库查询是您不进行的查询。对于这类事情，您通常会使用[memcached](http://memcached.org/)之类的东西来存储先前提取的结果，并且您会在写入时使其无效。

与往常一样，在*生产*规模上对任何提议的模式进行基准测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:24:27.297

1 个大表：user_id | 属性_1 | 属性_2 | 属性_3 | 属性_4

将使您的管理更轻松。否则，太多的单独查找也会使针对数据库的编程变得复杂，并有可能增加应用程序错误。

# java - Java Swing 布局管理器循环引用被设置了两次

> ID：13810075
> 
> 赞同：0
> 
> 时间：2012-12-10T22:04:54.683
> 
> 标签：java, swing, circular-reference

谁能解释为什么在以下代码中设置了两次循环引用？

```
//declare panel
this.cntnrPnl = new JPanel();
//define layout manager for the panel - but why circ ref?
this.cntnrPnl.setLayout(new BoxLayout(this.cntnrPnl, BoxLayout.Y_AXIS)); 
```

为什么需要显式地将`BoxLayout`后端链接到`JPanel`容器，而不是 `JPanel.setLayout`在后台自行设置并使用 setter 来`BoxLayout`实现代码紧凑性？

例如：

```
this.cntnrPnl.setLayout(new BoxLayout(BoxLayout.Y_AXIS));
//and then in JPanel.setLayout have something line
_layout.setContainer(this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:18:16.913

因为 BoxLayout 是一种特殊的布局，需要引用它所布局的目标容器。并非所有布局管理器都是如此。在方法中为 BoxLayout 添加特定案例会很丑陋`setLayout()`。这也意味着 BoxLayout 在构建后将处于不稳定状态，因为它还没有强制目标容器。

`setLayout(this)`反之亦然：在目标容器上调用 BoxLayout 构造函数。但我不知道为什么它还没有完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:53:31.217

> 为什么需要显式地将`BoxLayout`后端链接到`JPanel`容器，而不是`JPanel.setLayout`在后台自行设置并使用 setter 来`BoxLayout`实现代码紧凑性？

你所说`JPanel.setLayout`的实际上是[Container.setLayout](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Container.html#setLayout%28java.awt.LayoutManager%29)：

```
public void setLayout(LayoutManager mgr) 
```

您使用 a 调用该方法，`BoxLayout`因为它`implements LayoutManager`。但是`LayoutManager`没有`setContainer`方法，所以如果不添加该方法就无法工作。但似乎*大多数*布局管理器并不关心容器，因此该方法不属于那里。

构造函数有可能`BoxLayout`做到这一点吗？也许不是，尽管 a`BoxLayout`与 a 相关联`Container`，但反过来不一定正确。考虑：

```
this.cntnrPnl = new JPanel();
BoxLayout bY = new BoxLayout(this.cntnrPnl, BoxLayout.Y_AXIS);
BoxLayout bX = new BoxLayout(this.cntnrPnl, BoxLayout.X_AXIS); 
```

现在您可以在不同时间调用`this.cntnrPnl.setLayout(bX)`和`this.cntnrPnl.setLayout(bY)`。

因此，从所有选项来看，当前的 API 似乎是最好的，当然这一切都有些主观。

顺便说一下，请考虑重命名`cntnrPnl`为`containerPanel`. 去掉元音并没有真正节省多少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:08:17.540

因为 JPanel 不是 Swing 中唯一可用的容器。特别是，您可能会创建自己的容器类，但不知道 BoxLayout 的那些特殊要求。因此，布局管理器不适用于您的实现。

现在有人可能会问为什么 BoxLayout 一开始就需要对 JPanel 的引用，但这是另一回事。

# javascript - jQuery $(this) 不工作

> ID：13810080
> 
> 赞同：0
> 
> 时间：2012-12-10T22:05:30.240
> 
> 标签：javascript, jquery, html

我在这里尝试的是悬停，div id 放大有一个小动画 - 动画正在工作 - 但它一次不能工作超过一个 div。如果我偶然这样做不正确，请寻求一些指导。

jQuery

```
<script type="text/javascript">
$(document).ready(function(){
$("#project-holder").hover(function(){
    $(".client"+$(this).attr("client")).stop().animate({'margin-left': '130px', 'margin-top': '80px'}, 500);
  }, function(){
    $(".client"+$(this).attr("client")).stop().animate({'margin-left': '-200px'}, 500);
  });
});
</script> 
```

div 的一个例子是：

```
<div id="project-holder" client="1">
  <div id="magnify" class="client1">
    <img src="magnify.png">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:09:19.053

更改您的 HTML 以改用类。id 是唯一的，同一个 id 不能多次使用：

```
<div class="project-holder">
  <div class="magnify client">
    <img src="magnify.png">
  </div>
</div> 
```

Now, you can change your JS to this and it should work just fine:

```
$(document).ready(function(){
  $(".project-holder").hover(function(){
    $(this).find('.client').stop().animate({'margin-left': '130px', 'margin-top': '80px'}, 500);
  }, function(){
    $(this).find('.client').stop().animate({'margin-left': '-200px'}, 500);
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:07:18.687

它一次不能用于多个，因为`$(this)`选择器指的是一个唯一的元素，而不是一个类或多个 id。您需要`each()`一次遍历所有 div。此外，您不应该两次使用相同的 id - 给他们一个类，并使用它`each()`来遍历每个 div，应用您想要的代码。

# iphone - Apple 开发计划到期，我可以稍后续订吗？

> ID：13810082
> 
> 赞同：1
> 
> 时间：2012-12-10T22:05:33.980
> 
> 标签：iphone, ios, xcode

去年 12 月，我报名参加了一个 iPhone 开发计划，希望开发一款应用程序，但却被我生活中的其他项目所迷惑。现在我收到来自 Apple 的消息，说我的开发者帐户将在一周后到期。至少在接下来的 6 个月内，我将无法在 App Store 中发布任何内容，因此问题是——如果我现在让它过期，我可以在明年夏天续订吗？而且，它会对我的 Apple ID 产生任何影响吗？

PS。我目前在 App Store 中没有任何应用程序，也不打算在真实设备上测试我的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:06:43.970

是的，您可以续订/重新激活。我自己也经历过类似的经历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:08:06.207

答案是不。没有后果。您可以让您的 Apple Dev 过期，因为您没有任何应用程序并且不想测试您现在不需要它。当你准备好再次申请并获得另一个。

# html - HTML5 Audio display only play pause and mute buttons

> ID：13810085
> 
> 赞同：19
> 
> 时间：2012-12-10T22:05:59.033
> 
> 标签：html, html5-audio

I'm wondering if there's a quick and simple way to style the HTML5 audio element to display what I want. I was wondering if you could turn certain controls on and off, but that doesn't seem to be the case.

I do not want a progress/track bar, or to display the time left. I just want a simple play/pause toggle button, and a mute/unmute toggle button.

That's all! Any ideas?

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-29T15:06:02.390

使用此代码将达到您的目的。

```
<!DOCTYPE html>
<html>
<body>
 <audio id="player" src="horse.ogg"></audio>
<div>
    <button onclick="document.getElementById('player').play()">Play</button>
    <button onclick="document.getElementById('player').pause()">Pause</button>
    <button onclick="document.getElementById('player').muted=!document.getElementById('player').muted">Mute/ Unmute</button>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T09:19:32.720

您可以使用[Media API](http://www.w3.org/TR/html5/embedded-content-0.html#media-elements)并使用您想要的功能构建您自己的一组控件。我写过这篇文章：[使用 HTML5 多媒体组件 - 第 3 部分：自定义控件](http://www.adobe.com/devnet/html5/articles/html5-multimedia-pt3.html)- 显示了一个视频示例，但您也可以轻松构建一个音频示例。

# c# - Linq to Entities 子查询填充数组？

> ID：13810087
> 
> 赞同：5
> 
> 时间：2012-12-10T22:06:05.857
> 
> 标签：c#, asp.net, linq, linq-to-entities

新的 linq 实体试图解决这个问题。我有以下表格：

> `Customer: Cust_Id, Name`
> 
> `Orders: Order_Id`
> 
> `CustomerOrders: Cust_Id, Order_Id`

我有这样的课：

```
public class Customers
{
public List<Row> Rows { get; set; }

public Customers()
    {
        Rows = new List<Row>();
    }

    public class Row
    {
       public int Key { get; set; }
       public string Name { get; set; }
       public List<string> Order_Ids { get; set; }
    }
} 
```

Linq 查询是这样的：

```
var query = from c in context.Customer
select new Customers.Row
{
    Key = c.Cust_Id,
    Name = c.Name,
    Order_IDs = List<string>( ?? )
};

foreach (var row in query)
{
    Customers.Rows.Add(row);
}

var serializer = new JavaScriptSerializer();
return serializer.Serialize(Customers); 
```

我在哪里有'??'，我可以使用子查询或其他东西`Order_Id`从表中获取's`CustomerOrders`列表吗？现在，我只能考虑在`Customers`表格填满后遍历表格，然后再次查询数据库以获取每个`Order Id`客户的每个数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:08:59.337

尝试这样的事情：

```
var query = from c in context.Customer
select new Customers.Row
{
    Key = c.Cust_Id,
    Name = c.Name,
    Order_Ids = c.Rows.Select(row => row.Key.ToString()).ToList()
}; 
```

您可以在哪里`.Select(row => row.Key.ToString())`设置您需要的属性（键、名称等）。[Select 方法](http://msdn.microsoft.com/en-us/library/bb548891.aspx)是一个扩展方法`IEnumerable`，它返回您设置的属性类型的集合，在这种情况下，是字符串的集合，因为我使用`ToString()` 方法对其进行了转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T22:21:41.417

如果不是必需的，请从“客户”对象中删除“行”集合。这应该足够了：

```
public class Customer
{
    public int Key { get; set; }
    public string Name { get; set; }
    public List<string> Order_Ids { get; set; }
} 
```

然后你可以这样查询：

```
var customers = from c in context.Customers
                select new Customer
                {
                    Key = c.Cust_Id,
                    Name = c.Name,
                    Order_IDs = c.Orders.Select(o => o.Order_Id).ToList()
                }; 
```

在编写 C# 和使用 EF 时最好处理对象，而不是处理表和行 - 更少混淆。

# java - Java - Double precision floating point

> ID：13810089
> 
> 赞同：-4
> 
> 时间：2012-12-10T22:06:19.983
> 
> 标签：java

> **Possible Duplicate:**
> [how to fix double precision issue in java](https://stackoverflow.com/questions/8103999/how-to-fix-double-precision-issue-in-java)

I have a small piece of code like this:

```
double number1 = 6;
double number2 = 5.99;
double result = number1 - number2; 
```

However, the `result == 0.009999999999999787` instead of 0.01

I know it is the issue of IEEE 754 standard, but I don't understand why. Could you please explain it for me?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T22:07:23.360

This is because float point numbers cannot be exactly represented with in binary system with limited bits (not without precision loss)

See: [http://en.wikipedia.org/wiki/Loss_of_significance](http://en.wikipedia.org/wiki/Loss_of_significance)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:08:18.433

Because there is no .01 in floating point numbers. The fractional bits are expressed as `1/root 2` so you can get something like .0125 or what you have there but there is not .01 in floating point numbers. If you need exact precision use integers instead.

# vb6 - 尝试执行数据库代码时“未找到方法或数据成员”

> ID：13810090
> 
> 赞同：0
> 
> 时间：2012-12-10T22:06:31.693
> 
> 标签：vb6, ado

我有一个用于熟悉 VB6 的测试项目。只是一个列表框、一个获取信息的按钮和一个清除信息的按钮：

![VB6 表格](../Images/bb1216263ca135cdc81436781446b47d.png)

代码：

```
Option Explicit

Private Sub btnGet_Click()
    lstResults.DataSource = GetMenuItems
End Sub

Private Sub btnClear_Click()
    lstResults.Clear
End Sub

Public Function GetMenuItems() As ADODB.Recordset
    Dim rs As ADODB.Recordset

    Dim conn As New ADODB.Connection
    conn.ConnectionString = "File Name=C:\connString.udl"

    Dim cmd As New ADODB.Command
    Set cmd.ActiveConnection = conn
    cmd.CommandType = adCmdStoredProc
    cmd.CommandText = "dbo.GetMenuItems"
    Set rs = cmd.Execute()
    GetMenuItems = rs
End Function 
```

单击“获取项目”按钮 (btnGet) 时出现以下错误：

> 编译错误：未找到方法或数据成员

起初我认为这可能与事件/按钮有关，它们之间不存在某种绑定。但是只需输入“MsgBox（“Hello”）”之类的东西就可以了。然而，在抛出错误之前，它甚至似乎都没有到达调用 GetMenuItems 函数的那一行。这是我第一次接触VB，我有点难过。

编辑 - 我也看过我正在使用的 UDL 文件。测试了它，它的连接就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:52:50.080

中`Sub btnGet_Click`，使用

```
Set lstResults.DataSource = GetMenuItems 
```

在不使用的情况下分配对象引用`Set`几乎不是正确的做法。对于它的价值，省略`Set`引用左侧的默认属性；这是 VB6（好吧，VB4，当引入类时）的一部分，作为对 VB3 程序员的帮助，在对象之类的东西出现之前。无论哪种对象`lstResults.DataSource`返回都可能没有默认属性，从而导致“找不到方法或数据成员”错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:20:59.420

*   您有一个私有子 btnGet_Click() 调用公共函数 GetMenuItems()，这可能会导致问题。

*   另外我不确定您是否可以使用 udl 作为连接字符串。相反，打开 UDL（您可能需要暂时将文件扩展名更改为 .txt），取出连接字符串，并使用它代替文件名。

*   另外，检查存储过程是否存在 dbo.GetMenuItems

# javascript - 如何将对象从 ajax 成功处理程序传递回调用函数？

> ID：13810094
> 
> 赞同：0
> 
> 时间：2012-12-10T22:06:50.133
> 
> 标签：javascript, jquery, ajax, object, return

我正在尝试将 Ajax 请求的结果传递回触发函数。但我的回答是“迷路了”......

这就是我正在做的事情：

```
 some = function (){
     // inside some function - this will call getItems()
     content = $.parseJSON( dynoData[ dyn.method ]() );
 };

...
dynoData = {
    getItems : function(){

        var form = "",
        service = "../services/pull_items.cfc",
        method = "process",
        returnformat = "JSON",
        targetUrl = "",
        formdata = "form=getItems&method="+method+"&returnformat="+returnformat,
        successHandler = function(objResponse) {
            // here is the objResponse I need to pass back
            console.log( objResponse );
            return ( objResponse );
        };

    ajaxFormSubmit( form, 
                    service, 
                    formdata, 
                    targetUrl, 
                    successHandler, 
                    "yes", 
                    "", 
                    returnformat, 
                    "" );
    }

ajaxFormSubmit = function ( form, 
                            service, 
                            formdata, 
                            targetUrl, 
                            successHandler, 
                            dataHandler, 
                            errorHandler, 
                            returnformat, 
                            type ){     
    $.ajax({
        async: false,
        type: type == "" ? "get" : type,
        url: service,
        data: formdata,
        dataType: returnformat,
        success: function( objResponse ){
            if (objResponse.SUCCESS == true || 
                    typeof objResponse == "string" ){
                dataHandler == "yes" ? 
                    successHandler( objResponse ) : successHandler();   
            }
        },  
        error: function () {}
    });
} 
```

一切正常，但我不知道如何`objRespone`通过 getItems 函数从 Ajax 成功处理程序传回调用函数。

**问题：**
谁能给我一个提示？

谢谢！

**编辑：**
像这样工作：

```
// inside some function
var content,
    cbk = function(objResponse){
        content = objResponse;
        };

// get dynamic data
$.parseJSON( dynoData[ dyn.method ](cbk) );

console.log( content );
}

// inside getItems
getRetailers : function(cbk){
    ...
    successHandler = function(objResponse, cbk) {
        cbk( objResponse );
        };
ajaxFormSubmit( form, service, formdata, targetUrl, successHandler, "yes", "", returnformat, cbk )
} 
```

所以我在劫持我的最后一个参数来传递`cbk`而不是`get/post`

```
var ajaxFormSubmit = 
    function ( form, service, formdata, targetUrl, successHandler, dataHandler, errorHandler, returnformat, type ){
    // cleanup
    var override = null;

    if ( type !== "" && type !== "post" ){
        override = type;
        type = "get";
    }

    ... inside AJAX Successhandler
    dataHandler == "yes" ? successHandler( objResponse, override ) : successHandler( override ) 
```

因此，如果通过了 get/post，override 将为空。似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:31:19.780

由于您的 ajax 调用是异步的，因此`getItems`函数的执行将在您取回数据之前很久就完成。您可以做的一件事是在调用中添加一个回调参数，并在您的 ajax 成功时调用它。就像是：

```
getItems: function(cbk)
//(...)
    successHandler = function(objResponse) {
        // here is the objResponse I need to pass back
        cbk(ojbResponse);
    }; 
```

但是，您必须更改`dynoData`调用以`getItems`添加回调，这将完成新对象的设置。

另一种解决方案是使 ajax 调用同步，但这会暂停浏览器，直到您取回数据，这会使系统无响应。

# java - How to print out planes by airline

> ID：13810095
> 
> 赞同：0
> 
> 时间：2012-12-10T22:06:55.763
> 
> 标签：java, hashmap

Hey im using a hashmap of string and flights to create a flight store called planeStore. So then i made another store(Airline store) also using a hashmap. I put the planeStore into the AirlineStore. But i cant get the airlines printing out with the planes.

I thought by putting string airlineName into Airlines constrcutor. And passing in "Plane Name" When creating Airline airline = new Airline("PlaneName"); that this would work but it hasnt.

here is my code:

**Airline**

```
import java.util.HashMap;

public class Airline 
{
    private String airlineName;
    private HashMap<String, PlaneStore> map;

    public Airline(String airlineName)
    {
        this.airlineName = "";
        map = new HashMap<String, PlaneStore>();
    }
    public void add(PlaneStore plane)
    {
        map.put(airlineName, plane);
    }
    public void remove(String flight)
    {
        map.remove(flight);
    }
    public void printPlane()
    {
        System.out.println("\n********Flight List********");
        for (PlaneStore plane: map.values()) {
             //System.out.println(plane);
            // class
            // or:
            System.out.println(airlineName);
            System.out.println(plane.toString());

        }

    }

} 
```

plane.toString is the toString of the PlaneStore:

```
public String toString() {
        return "PlaneStore [airlineName=" + airlineName + ", planeMap="
                + planeMap + "]";
    } 
```

**MainApp**

```
import java.util.Scanner;

public class MainApp 
{
    private Scanner keyboard = new Scanner(System.in);
    public static void main(String[] args)
    {
        new MainApp().start();  
    }

    public void start()
    {
        Airline airline1 = new Airline("AerLingus");
        Airline airline2 = new Airline("Ryan Air");
        PlaneStore planeStore = new PlaneStore("Aer Lingus");
        PlaneStore planeStore2 = new PlaneStore("Ryan Air");

        Flight p1 = new Flight("Aer Lingus","A01", 150.5, 10.5, 500, Flight.AIRPLANETYPE.AIRBUS);
        Flight p2 = new Flight("Aer Lingus","B01", 50.3, 1.5, 91, Flight.AIRPLANETYPE.CORPORATE);
        Flight p3 = new Flight("Aer Lingus","C01", 12.2, -3.1, 56, Flight.AIRPLANETYPE.AIRBUS);

        Flight p4 = new Flight("Ryan Air","D01", 10.5, 1.5, 430, Flight.AIRPLANETYPE.PRIVATE);
        Flight p5 = new Flight("Ryan Air","E01", 0.3, 2.1, 101, Flight.AIRPLANETYPE.CORPORATE);
        Flight p6 = new Flight("Ryan Air","F01", 2.2, -3, 291, Flight.AIRPLANETYPE.AIRBUS);
        planeStore.add(p1);
        planeStore.add(p2);
        planeStore.add(p3);
        planeStore.print();

        airline1.add(planeStore);
        airline1.add(planeStore);
        airline1.add(planeStore);
        airline1.printPlane();

        planeStore2.add(p4);
        planeStore2.add(p5);
        planeStore2.add(p6);

        airline2.add(planeStore2);
        airline2.add(planeStore2);
        airline2.add(planeStore2);
        airline2.printPlane();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:13:55.470

您将 airportName 设置为 "" 而不是通过构造函数传递给它的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:14:34.160

您的`Airline`构造函数收到一个`String`参数，但您没有将`airlineName`Airline 类的实例变量分配给该参数。您只是`airlineName`设置为“”。

```
public Airline(String airlineName)
    {
        this.airlineName = "";
        map = new HashMap<String, PlaneStore>();
    } 
```

你的意思是：

```
public Airline(String airlineName)
        {
            this.airlineName = airlineName;
            map = new HashMap<String, PlaneStore>();
        } 
```

进一步查看您的代码，似乎每个`Airline`类都有一个，`map`但您只向此映射添加一个键以及值`PlaneStore`。所以看起来你永远不会`map`在每个`Airline`班级都有两个或更多的钥匙。因此，使用 没有意义`map`，您可以使用`ArrayList`.

如果我正确理解您的目标，您可以将您的 AirLine 课程简化为以下内容：

```
public class Airline 
{
    private String airlineName;                // Name of the company
    private ArrayList <PlaneStore> planeStore;

    public Airline(String airlineName)
    {
        this.airlineName = airlineName;
        map = new ArrayList<PlaneStore>();
    }
    public void add(PlaneStore plane){ planeStore.add(plane);}

    public void printPlane()
    {

        System.out.println(airlineName);
        System.out.println("\n********Flight List********");
        for (PlaneStore plane: planeStore)
        {
            System.out.println(plane.toString());
        }

    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:16:50.823

一旦您将代码更改为阅读`this.airlineName = airlineName;`，您应该可以接受这部分。

顺便说一句，您添加的每架飞机看起来仍然使用相同的密钥。这将不断用新的飞机覆盖您添加的最后一架飞机。如果您希望能够打印出所有的飞机，您需要给它们每一个唯一的钥匙。否则这是行不通的。

# c++ - Is there a way to choose which files are displayed to the user via the standard OPENFILE dialogs?

> ID：13810103
> 
> 赞同：3
> 
> 时间：2012-12-10T22:07:30.420
> 
> 标签：c++, winapi, mfc, fileopendialog

Vista introduced an interface: IFileDialog::SetFilter, which allows me to setup a filter that will be called for every potential filename to see if it should be shown to the user.

Microsoft removed that in Windows 7, and didn't support it in XP.

I am trying to customize the our Open file dialog so that I can control which files are displayed to the end user. These files are marked internally with a product-code - there isn't anything in the filename itself to filter on (hence file extension filters are not useful here -= I need to actually interrogate each one to see if it is within the extra filter parameters that our users specified).

I would guess that Microsoft removed the SetFilter interface because too often it was too slow. I can imagine all sorts of similar ideas to this one which don't scale well for networks and cloud storage and what have you.

However, I need to know if there is an alternative interface that accomplishes the same goal, or if I really am restricted to only looking at the file extension for filtering purposes in my File dialogs?

* * *

**Follow-up:**
After looking further into CDN_INCLUDEITEM, which requires the pre-vista version of OPENFILENAME, I have found that this is the most useless API imaginable. It only filters NON-filesystem objects. In other words, you can't use it to filter files. Or folders. The very things one would filter 99.99% of the time for a file open or save dialog. Unbelievable!

There is a very old [article by Paul DiLascia](http://msdn.microsoft.com/en-us/magazine/cc300464.aspx) which offers the technique of removing each offending filename from the list view control each time the list view is updated.

However, I know from bitter experience that the list view can update over time. If you're looking at a large folder (many items) or the connection is a bit slow (heavily loaded server and/or large number of files), then the files are added to the dialog piecemeal. So one would have to filter out offending filenames repeatedly.

In fact, our current customized file open dialog uses a timer to look at the view's list of filenames periodically to see if any files of a given pattern exist, in order to enable another control. Otherwise it's possible to check for the existence of these files, find none, but a moment later the view updates to have more filenames, and no events are sent to your dialog to indicate that the view has been changed. In fact, my experience with having to write and maintain code for the common controls file dialogs over the years has been that Microsoft is not very cluefull when it comes to how to write such a thing. Events are incomplete, sent at not-useful times, repeated when not necessary, and whole classes of useful notifications don't exist.

Sadly, I think I might have to give up oh this idea. Unless someone has a thought as to how I might be able to keep up with the view spontaneously changing while the user is trying to interact with it (i.e. it would be awkward to go deleting out entries from the list view and changing the user's visual position, or highlighted files, or scroll position, etc.)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:21:22.787

您需要初始化 CFileDialog 的回调。然后您需要处理[CDN_INCLUDEITEM 通知代码](http://msdn.microsoft.com/en-us/library/ms646862%28v=vs.85%29.aspx)以包含或排除项目。

您还可以查看[这篇很棒的文章](http://www.codeproject.com/Articles/5782/Implementing-a-Read-Only-File-Open-or-File-Save-Co)。作者除了回调之外还使用了一些其他的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:53:35.640

正如您已经发现的那样，从 Windows 7 开始，不再可能根据内容过滤掉显示的文件，而只能过滤文件扩展名。但是，您可以在允许关闭对话框之前验证您是否可以接受用户选择的文件，如果不是，则向用户显示一个消息框并保持对话框打开。除非您创建自己的自定义对话框，否则这是您能做的最好的事情。

# cakephp - CakePHP Form Helper - 显示错误类，但不显示错误消息

> ID：13810104
> 
> 赞同：0
> 
> 时间：2012-12-10T22:07:32.503
> 
> 标签：cakephp

我正在尝试自定义 CakePHP 2.0 表单助手上的错误输出。目前，表单在输入下方呈现错误消息，并将“错误”类应用于输入标签。

我发现我可以完全禁用输入的错误报告，或者输出错误类和消息。

我希望将*错误类*应用于有问题的输入的标签，而没有下面的任何消息。

您如何**关闭**表单的错误消息输出，但**仍将错误类别**应用于违规标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:02:28.483

[`FormHelper::input()`](http://api20.cakephp.org/class/form-helper#method-FormHelperinput)有一个`format`选择。它是一个

> 元素顺序的格式模板。任何不在数组中的元素都不会出现在输出中。
> 
> 默认输入格式顺序：array('before', 'label', 'between', 'input', 'after', 'error')

您可以传递默认格式，省略`'error'`：

```
echo $this->Form->input(
    'some_field',
     array('format' => array('before', 'label', 'between', 'input', 'after'))
); 
```

这应该会产生没有错误消息的输入标记。

如果您想将此应用于表单中的多个输入，则应使其保持干燥：

```
$format = array('before', 'label', 'between', 'input', 'after');
echo $this->Form->input(
    'some_field',
     array('format' => $format)
);
echo $this->Form->input(
    'some_other_field',
     array('format' => $format)
); 
```

也可以通过将格式传递给as来为表单的*所有*输入设置默认格式：[`FormHelper::create()`](http://api20.cakephp.org/class/form-helper#method-FormHelpercreate)`inputDefaults`

```
$this->Form->create(
    'MyModel',
    array(
        'inputDefaults' => array(
            'format' => array('before', 'label', 'between', 'input', 'after')
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:40:29.737

您必须手动执行其中的一些操作。首先关闭表单助手上的验证和标签生成。

```
echo $this->Form->input('myfield', array('error' => false, 'label' => false)); 
```

然后将类添加到创建标签并在验证失败时添加错误类。要找出哪些验证失败，请检查 invalidFields 数组，如下所示：

```
$error = null;
if (isset($this->invalidFields['Model']['myfield'])) {
    $error = 'error';
}

echo $this->Form->label('myfield', 'My Field', array('class' => $error)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:54:08.577

`Form->error('field_name')`如果没有错误，您始终可以使用which 不返回任何内容。

```
$error = $this->Form->error('field_name');
echo $this->Html->input('field_name', array(
    'class' => !empty($error) ? 'error' : null,
    'error' => false
)); 
```

您现在有了 $error 和通常的错误标记，这些错误可以显示在另一个位置。

没有检查就没有办法绕过，该`Form->input()`方法是一种方便的方法，可以自动完成所有这些事情，如错误、div、标签，可以通过`Form->label()`,等完成`Form->checkbox()`，`Form->select()`这只是基本元素。

可以传递给的选项之一`Form->create()`是`inputDefaults`您可以使用它来为所有其他表单元素设置默认值。这不会有多大帮助，因为您正在逐个领域进行操作。（`'error' => false`会有所帮助）

您可以做的另一件事是制作自己的表单助手，扩展核心 FormHelper 并自定义输入法以自动完成这一切。您可以使用[别名](http://book.cakephp.org/2.0/en/views/helpers.html#using-and-configuring-helpers)将您的自定义助手加载到`$this->Form`正常使用。请参阅本节的底部。

您也可以重载输入法，`AppHelper`但这不是一个好地方。

# google-app-engine - Design decisions for Google App Engine hosted app using Google Apps APIs

> ID：13810106
> 
> 赞同：0
> 
> 时间：2012-12-10T22:07:49.220
> 
> 标签：google-app-engine, google-apps

I never used Google technologies to develop webapps before, and I'm a bit overloaded and confused. A lot of information.

My scenario: Developing a webapp for, say, company.com, using Google App Engine (Python, Webapp2, Jinja2...). The domain company.com is Google hosted (e-mail and calendars are the important parts here). So, I want my GAE-based app to add events to the domain users' calendar, send them e-mails, etc. The basic flow is:

*   A user of this domain logs into the web app, using his/her mail: myname@company.com. (IMPORTANT: Users CAN'T use their private GMail accounts, or any other OpenID-based authentication. Just their domain accounts). I know this can be configurated from the admin console, when creating the app.
*   The user fills a form, and a new calendar event is created. This event is added to his/her calendar, and to his/her manager's calendar too. The user receives a confirmation e-mail (event created) and the manager a notification e-mail (someone invited you...).

I've been reading a lot about authentication, authorization, google app engine and google apps, but I still don't have a clear image about what technologies/libraries/apis I should use.

I've seen a lot of examples using oAuth and Calendar API v2, but oAuth is deprecated, and seems that I should use oAuth2\. Calendar API v2 is deprecated too, and v3 is recommended... I see a lot of entry points in the documentation, and I don't know where to start.

Any piece of advice is strongly appreciated. Many thanks in advance.

# jquery - 使用 jquery show/hide 不会将 css 保留在 div 中

> ID：13810109
> 
> 赞同：1
> 
> 时间：2012-12-10T22:07:55.980
> 
> 标签：jquery, css

我有一个用css创建边框的div，我想做的是在用户单击按钮时显示一个表单。

HTML 表单：

```
<div class="dropshadow-add">
    <h3>Add</h3>
        <button class="addwebcam">Add</button>
        <button class="addaxiscam">Add Another</button>

    <div id="cameraformwebcam" title="Add a webcam">
    <form id='AddCameraFormWebcam' name='' method='post' action=''>
        <label for="CameraName">Camera name:&nbsp;</label>
        <input id="CameraName" name="camera_name" size="24" maxlength="36" value="Enter label for camera" />
        <label for='CameraQuality'>Camera quality:&nbsp;</label>
        <select id='CameraQuality' name='camera_quality'>
            <option value='HIGH' selected='selected'>High</option>
            <option value='MEDIUM'>Medium</option>
            <option value='MOBILE'>Mobile</option>
        </select>
...
        <button type='submit' class='submit_camera' name='addcamera' value='Add'>Add</button>
        <button type='button' class='cancel_changes' name='cancel_changes' value='Cancel'>Cancel</button>
    </form>
    </div>
<div id="cameraformaxis" title="Add an Axis camera">
    <form id='AddCameraFormAxis' name='' method='post' action=''>
        <label for="CameraName">Camera name:&nbsp;</label>
        <input id="CameraName" name="camera_name" size="24" maxlength="36" value="Enter label for camera" />
        <label for='CameraQuality'>Camera quality:&nbsp;</label>
        <select id='CameraQuality' name='camera_quality'>
            <option value='HIGH' selected='selected'>High</option>
            <option value='MEDIUM'>Medium</option>
            <option value='MOBILE'>Mobile</option>
        </select>
...
        <button type='submit' class='submit_camera' name='addcamera' value='Add'>Add</button>
        <button type='button' class='cancel_changes' name='cancel_changes' value='Cancel'>Cancel</button>
    </form>
    </div>
    </div> 
```

单击时显示/隐藏表单的 jQuery 代码：

```
jQuery('#cameraformwebcam').hide();
jQuery('#cameraformaxis').hide();

jQuery('.addwebcam').click(function(e) {
    jQuery('#cameraformwebcam').show();
    jQuery('#cameraformaxis').hide();
});

jQuery('.addaxiscam').click(function(e) {
    jQuery('#cameraformaxis').show();
    jQuery('#cameraformwebcam').hide();
}); 
```

最后，我的问题是 CSS 代码：

```
#AddCameraFormWebcam label,#AddCameraFormAxis label,
#AddCameraFormWebcam input,#AddCameraFormAxis input,
#AddCameraFormWebcam select,#AddCameraFormAxis select,
#AddCameraFormWebcam textarea,#AddCameraFormAxis textarea{
  display: block;
  float: left;
  width: 200px;
  margin-bottom: 1em;
  margin-top: 0.5em;
}
#AddCameraFormWebcam select,#AddCameraFormAxis select{
  width: 100px;
}
#AddCameraFormWebcam label,#AddCameraFormAxis label {
  clear: both;
  color: black;
  width: 120px;
  padding-right: 8px;
  text-align: left;
  white-space: nowrap;
}
#AddCameraFormWebcam label.error,#AddCameraFormAxis label.error {
  float: none;
  color: red;
}
#AddCameraFormWebcam button[type="button"],#AddCameraFormAxis button[type="button"]{
  float: right;
  width: 100px;
  margin-left: 10px;
  margin-top: 5px;
}
#AddCameraFormWebcam button[type="submit"],#AddCameraFormAxis button[type="submit"] {
  float: right;
  width: 100px;
  margin-top: 5px;
}
#AddCameraFormWebcam button[name="cancel_changes"],#AddCameraFormAxis button[name="cancel_changes"] {
  clear: both;
}
#AddCameraFormWebcam button[name="camera_status"] + label,#AddCameraFormAxis button[name="camera_status"] + label {
  clear: none;
}

.dropshadow-add {
 -moz-border-radius: 5px;
 border-radius: 5px;
 -moz-box-shadow: 5px 5px 5px #ccc;
 -webkit-box-shadow: 5px 5px 5px #ccc;
 box-shadow: 5px 5px 5px #ccc;
 width:    400px;
 padding:15px 15px 15px 15px;
 margin-bottom:15px;
 margin-left:15px;
 margin-right:15px;
 background-color:#ffffff;
 border: 1px solid #CCCCCC;
 padding: 1px 15px 15px 15px;
} 
```

看这个[小提琴](http://jsfiddle.net/K6FwH/1/)玩。

单击一个按钮，您将看到该表单超出了 div。我怎样才能将它保存在 div 中？如果我将按钮和标签更改为`float: inherit`它确实有效，但格式就会混乱。我想将表单放在 div 中，并且按钮应该在右侧（添加按钮，然后彼此相邻的取消按钮）。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:11:33.650

用这个替换你的**CSS**

```
#AddCameraFormWebcam label,#AddCameraFormAxis label, 
#AddCameraFormWebcam input,#AddCameraFormAxis input, 
#AddCameraFormWebcam select,#AddCameraFormAxis select, 
#AddCameraFormWebcam textarea,#AddCameraFormAxis textarea{
    display: block;
    width: 200px;
    margin-bottom: 1em;
    margin-top: 0.5em;
}
#AddCameraFormWebcam select,#AddCameraFormAxis select{
    width: 100px;
}
#AddCameraFormWebcam label,#AddCameraFormAxis label {
    clear: both;
    color: black;
    width: 120px;
    padding-right: 8px;
    text-align: left;
    white-space: nowrap;
}
#AddCameraFormWebcam label.error,#AddCameraFormAxis label.error {
    float: none;
    color: red;
}
#AddCameraFormWebcam button[type="button"],#AddCameraFormAxis button[type="button"]{
    width: 100px;
    margin-left: 10px;
    margin-top: 5px;
}
#AddCameraFormWebcam button[type="submit"],#AddCameraFormAxis button[type="submit"] {
    float: right;
    width: 100px;
    margin-top: 5px;
}
#AddCameraFormWebcam button[name="cancel_changes"],#AddCameraFormAxis button[name="cancel_changes"] {
    clear: both;
}
#AddCameraFormWebcam button[name="camera_status"] + label,#AddCameraFormAxis button[name="camera_status"] + label {
    clear: none;
}

.dropshadow-add {
  -moz-border-radius: 5px;
  border-radius: 5px;
  -moz-box-shadow: 5px 5px 5px #ccc;
  -webkit-box-shadow: 5px 5px 5px #ccc;
  box-shadow: 5px 5px 5px #ccc;
  width:    400px;
  padding:15px 15px 15px 15px; 
  margin-bottom:15px;
  margin-left:15px;
  margin-right:15px;
  background-color:#ffffff;
  border: 1px solid #CCCCCC;
  padding: 1px 15px 15px 15px;
}​ 
```

小提琴：http: [//jsfiddle.net/K6FwH/2/](http://jsfiddle.net/K6FwH/2/)

1.

```
#AddCameraFormWebcam label,#AddCameraFormAxis label,
#AddCameraFormWebcam input,#AddCameraFormAxis input,
#AddCameraFormWebcam select,#AddCameraFormAxis select,
#AddCameraFormWebcam textarea,#AddCameraFormAxis textarea{
  display: block;
  float: left;
  width: 200px;
  margin-bottom: 1em;
  margin-top: 0.5em;
} 
```

删除**浮动：左；**

2.

```
#AddCameraFormWebcam button[type="button"],#AddCameraFormAxis button[type="button"]{
  float: right;
  width: 100px;
  margin-left: 10px;
  margin-top: 5px;
} 
```

删除**浮动：对；**和**左边距：10px；**

**小提琴：http: [//jsfiddle.net/K6FwH/2/](http://jsfiddle.net/K6FwH/2/)**

如果你想保持按钮右对齐

**小提琴：http: [//jsfiddle.net/enve/K6FwH/3/](http://jsfiddle.net/enve/K6FwH/3/)**

# arrays - Fortran 子例程的输入参数可以在子例程的主体中释放和分配吗？

> ID：13810116
> 
> 赞同：1
> 
> 时间：2012-12-10T22:08:28.403
> 
> 标签：arrays, fortran, allocation, subroutine

更新：我修改后的代码如下所示：

```
program run_module_test
    use module_test
    implicit none   

    TYPE(newXYZ), allocatable, intent(inout) :: xyzArray(:)

    call update(xyzArray)
    write(6,*)'xyzArray',xyzArray

end program run_module_test

module module_test
    implicit none

    TYPE :: newXYZ
        real(4) :: x, u
        real(4) :: y, v
        real(4) :: z, w
        real(4),dimension(3) :: uvw     
    END TYPE

    integer(4) :: shape = 3

contains

    subroutine update(xyzArray)

    integer(4) :: i
    TYPE(newXYZ), allocatable, intent(inout) :: xyzArray(:)
    allocate( xyzArray(shape) ) 

    do i = 1, shape
        xyzArray(i)%x = 0
        xyzArray(i)%y = 0
        xyzArray(i)%z = 0
        xyzArray(i)%u = 0
        xyzArray(i)%v = 0
        xyzArray(i)%w = 0
        xyzArray(i)%uvw = (/0,0,0/)
    end do
    return
    end subroutine update

end module module_test 
```

编译它们时，它们会产生类似的错误：

```
 TYPE(newXYZ), allocatable, intent(inout) :: xyzArray(:)
                                                    1
Error: ALLOCATABLE attribute conflicts with DUMMY attribute at (1) 
```

当我消除 update() 子例程中的参数时，我收到一个矛盾的错误：

```
TYPE(newXYZ), allocatable, intent(inout) :: xyzArray(:)
                                                       1
Error: Symbol at (1) is not a DUMMY variable 
```

我是否消除了有用建议中指出的错误来源？这可能是与编译器相关的错误（使用 mpi90）吗？

~~~First Edit~~~ 我有一个子程序，它的输入参数是一个用户定义类型XYZ的数组。我希望取消分配 xyzArray 并将其分配/修改为子例程主体中的不同大小。我尝试了通过[更改 fortran 中的数组维度](https://stackoverflow.com/questions/5406016/changing-array-dimensions-in-fortran)建议的方法，但是当我执行以下操作时：

```
subroutine update(xyzArray, ...)
...
TYPE (XYZ), allocatable :: xyzArray(:) 
```

我收到一条错误消息：

```
Error: ALLOCATABLE attribute conflicts with DUMMY attribute at (1) 
```

当我尝试：

```
subroutine update(xyzArray, ...)
...
deallocate( xyzArray(myshape) )
allocate( xyzArray(newshape) ) 
```

我收到错误消息：

```
Error: Expression in DEALLOCATE statement at (1) must be ALLOCATABLE or a POINTER
Error: Expression in ALLOCATE statement at (1) must be ALLOCATABLE or a POINTER 
```

我需要做什么来更改子例程中数组的大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T22:52:21.993

去做这个：

*   虚拟参数必须是可分配的。可分配的虚拟参数需要实现 Fortran 2003 标准相关部分的编译器（或实现所谓的“可分配”TR 的 Fortran 95 编译器）。

*   需要该过程的显式接口（该过程必须是模块过程、内部过程或在调用范围内具有接口块）。

*   虚拟参数不能是意图（in）。如果您在子例程中根本没有使用虚拟参数值的分配状态或其他方面，那么 intent(out) 可能是合适的（如果事先分配，则在调用过程时虚拟参数将自动释放），否则意图（inout）或没有意图。

（您的第二个示例代码块的 deallocate 语句存在语法错误 - 您应该简单地指定`xyzArray`变量，省略`(myshape)`形状规范））

例如，在一个模块中：

```
subroutine update(xyzArray)
  type(xyz), allocatable, intent(inout) :: xyzArray(:)
  ...
  if (allocated(xyzArray)) deallocate(xyzArray)
  allocate(xyzArray(newshape))
  ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T10:15:01.513

如果您确定要在子例程中释放数组，可以将虚拟参数声明为 intent(out)，以便在进入子例程时自动释放：

```
module whatever
  implicit none

  type :: xyz
    :
  end type xyz

  contains

    subroutine update(xyzArray)
      type(xyz), allocatable, intent(out) :: xyzArray(:)
      :
      allocate(xyzArray(someshape))
      :
    end subroutine update

  end module whatever 
```

正如[IanH](https://stackoverflow.com/users/1234550/ianh)已经指出的那样，进程必须具有显式接口（例如，包含在模块中）并且在调用程序中您必须声明实际参数可分配：

```
program test
  use whatever
  implicit none

  type(xyz), allocatable :: array(:)
  :
  call update(array)
  :
end program test 
```

# php - 我的 while 循环不起作用

> ID：13810117
> 
> 赞同：0
> 
> 时间：2012-12-10T22:08:34.260
> 
> 标签：php

在这个脚本中，当某个行记录与浏览器地址栏中的名称匹配时，我基本上想从 mysql 表中回显数据。但由于某种原因，没有回显数据。我的while循环不起作用的任何原因？

```
 $users = $_GET['username'];

$other_friend_query = mysql_query("SELECT * FROM friend WHERE RelatingUser='$users'");
$other_friend_assoc = mysql_fetch_assoc($other_friend_query);

while ($other_friend_assoc = mysql_fetch_assoc($other_friend_query)) {
    $friend_related = $other_friend_assoc['RelatedUser'];
      echo $friend_related;

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:12:55.333

那是因为您在循环`mysql_fetch_assoc`之前调用。`while`当你调用它时，它会获取一个结果。然后，当您进入循环时，已经获取了该结果。只需删除它，您就可以开始了。如评论中所述，停止使用`mysql_`函数。下面的代码将转义您发布的变量并检查错误。使用列列表而不是`SELECT *`.

```
$users = mysql_real_escape_string($_GET['username']);

$other_friend_query = mysql_query("SELECT * FROM friend WHERE RelatingUser='$users'") or die( mysql_error() );

while( $other_friend_assoc = mysql_fetch_assoc($other_friend_query) ) {
    $friend_related = $other_friend_assoc['RelatedUser'];
    echo $friend_related;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:13:19.573

> 我的while循环不起作用的任何原因？

可能不是*唯一的原因*，但您正在跳过第一个结果。

```
// the following line is unused and therefore unnecessary
$other_friend_assoc = mysql_fetch_assoc($other_friend_query);

while ($other_friend_assoc = mysql_fetch_assoc($other_friend_query)) { 
```

# python - Sphinx 中未解决的引用

> ID：13810120
> 
> 赞同：2
> 
> 时间：2012-12-10T22:08:39.490
> 
> 标签：python, python-sphinx, restructuredtext

假设我有一个项目，其中（某处）记录了以下功能：

```
.. exmpl:cfunction:: ExMpl* ExMplSet( int flags, int size, ExStorage* storage ) 
```

在该项目文档的其他地方，我们有一个参考，如下所示：

```
:exmpl:cfunc:`ExMplSet` 
```

一切似乎都是合法的，并且在文档中还有其他这种用法的例子，但是作为输出 Sphinx 给出了一个警告：

```
~/some_folder/some_file:320: WARNING: unresolved reference: u'ExMplSet' - u'cfunc' 
```

没有应该有的链接，而且 100 多个警告（对于整个项目）并不是那么好。

这些确切的例子当然是虚构的。我要的是某种提示，在哪里寻找答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:44:19.187

我希望它被分成不同的行。一个目标，另一个定义：

```
.. exmpl:cfunction:: ExMplSet

ExMpl* ExMplSet( int flags, int size, ExStorage* storage ) 
```

另一种选择（我现在无法检查）是您在“exmpl：”前面缺少一个冒号

# gcc - 如何使用 extern "C" 在 C 中调用 C++ 函数

> ID：13810121
> 
> 赞同：8
> 
> 时间：2012-12-10T22:08:52.697
> 
> 标签：gcc, g++

所以我已经阅读了大约十几页来解释如何做到这一点，而在我的一生中，我无法让它发挥作用。

我有一个用 C++ 编写的库，以及用 gnu 编译器编译的一组用 C 编写的代码，我似乎无法从 C 调用 C++ 代码。

我有一个用 C++ 编写的库：

**打印头OO.hpp**

```
#ifdef __cplusplus
extern "C" 
#endif

void printThis(void); 
```

**printSrcOO.cpp**

```
#include "printHeadOO.hpp"
#include <iostream>

void printThis(void){
    std::cout<<"This is Printed Using C++ \n";
} 
```

好的很酷，如果我从 C++ 程序中调用它，它会编译、运行并且一切都很愉快。但假设我从 C 程序中调用它：

**printMain.c**

```
#include <stdio.h>
#include "printHeadOO.hpp" 

int main(void){
    printf("This is printed from C Main \n");
    printThis();

    return 0;   
} 
```

所以一切都编译得很好：

```
#g++ -c printSrcOO.cpp
#gcc -c printMain.c 
```

但随后在链接时：

```
#gcc printSrcOO.o printMain.o -o myProgram 
```

gcc 显示以下内容：

```
printSrcOO.o: In function `__static_initialization_and_destruction_0(int, int)':
printSrcOO.cpp:(.text+0x23): undefined reference to `std::ios_base::Init::Init()'
printSrcOO.o: In function `__tcf_0':
printSrcOO.cpp:(.text+0x6c): undefined reference to `std::ios_base::Init::~Init()'
printSrcOO.o: In function `printThis':
printSrcOO.cpp:(.text+0x83): undefined reference to `std::cout'
printSrcOO.cpp:(.text+0x88): undefined reference to `std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)'
printSrcOO.o:(.eh_frame+0x11): undefined reference to `__gxx_personality_v0'
collect2: ld returned 1 exit status 
```

如何让 g++ 创建 gcc 将使用的钩子？我只是在做一些愚蠢的事情/错过了什么吗？

蒂亚丹

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T22:15:32.983

您可以使用 gcc 编译您的 C 代码并使用这些 C++ 函数，但是您必须将最终可执行文件与 g++ 链接，因为 C++ 函数需要 C++ 标准库：

```
g++ printSrcOO.o printMain.o -o myProgram 
```

或者，您可以尝试使用 gcc 手动链接 C++ 库：

```
gcc printSrcOO.o printMain.o -o myProgram -lstdc++ 
```

但我会坚持使用 g++ 链接，因为我不确定它是否设置了其他重要的链接标志。

# ipad - CSS3 动画 @keyframe 幻灯片放映 - 在帧处停止

> ID：13810122
> 
> 赞同：0
> 
> 时间：2012-12-10T22:08:22.673
> 
> 标签：ipad, css, safari

我想用 CSS3 制作一个简单的框架我的框架幻灯片。

我想定义它通过每一帧的次数。例如; 第 3 帧 / 最后一帧它就停止了。

我在网上找到了很多很棒的 CSS3 动画演示；但关于逐帧幻灯片的内容并不多。

***EG：***我喜欢这个；[http://mos.netmagazine.com/site/files/tutorials/assets/2011/08/animation_01.html——](http://mos.netmagazine.com/site/files/tutorials/assets/2011/08/animation_01.html)虽然在动画方面有所不同——但我觉得我可以使用@keyframes；问题是 - 我在这里尝试**vvv**

[http://www.w3schools.com/css3/tryit.asp?filename=trycss3_animation1](http://www.w3schools.com/css3/tryit.asp?filename=trycss3_animation1)

这个功能正是我想要的；除了它不会让我用`background:`图像替换？我怎么能这样做；最后一块拼图——我怎样才能设置一个参数让它停在某个帧？

*最后说明 - 这是针对 iPad 网站的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:24:19.870

你可以很容易地用 javascript 或 jquery 来做，但你不能用 CSS3 来做。你可以这样做：

```
#images { width: height: }
#images img { width: height: opacity=0; transition all 5s linear; -moz-transition all 5s linear; -o-transition all 5s linear; -webkit-transition all 5s linear; } 
#images img:target { opacity=1; }

<div id="images"> <img src="pic1" id="pic1"/> <img src="pic2" id="pic2"> <img src="pic3" id="pic3"/> . . . <img src="picn" id="picn"/> </div>
<div id="list"> <a href="#pic1">1</a> <a href="#pic2">2</a> <a href="#pic3">3</a> . . . <a href="#picn">n</a> </div> 
```

# batch-file - 将触发器转换为批处理 Apex：使代码工作所需的帮助

> ID：13810126
> 
> 赞同：0
> 
> 时间：2012-12-10T22:09:08.417
> 
> 标签：batch-file, triggers, salesforce

如果可能的话，有人可以指导我朝着正确的方向前进吗？第二个代码（Batch Apex）只是没有编译。目前的错误是，

```
Error: Compile Error: Invalid type: updateContactOnEmailOptOutChangeScheduler
                      at line 63 column 73 
```

但我认为还有其他问题我似乎无法解决。

在联系人更新时，如果此字段已更新，则触发器会使用“电子邮件退出”的新值更新所有重复的联系人。此外，触发器仅更新具有`HasOptedOutOfEmail`与正在更新的值不同的值的重复联系人。现在我的任务是将这个需求从触发器（由我的同事编写和测试）转换为 Batch Apex。首先是原始触发器。二是我刚才写的batch apex格式的代码。

**原始触发代码**

```
trigger updateContactOnEmailOptOutChange on Contac​t (after update) {                                ​                                                  ​        

//Initialize lists and maps

List<Contact> duplicateContacts = new List<Con​tact>();
Map<String, Contact> contactEmailMap = new Map​&lt;String, Contact>();
Map<Id, Contact> contactIdMap = new Map<Id, Co​ntact>();

//Build a map with contacts to update. Only se​lect the ones that have a different "Email Opt Out​" value from the contact being updated.

for (Integer i = 0; i < Trigger.new.size(); i+​+) {
    if (Trigger.old[i].HasOptedOutOfEmail != T​rigger.new[i].HasOptedOutOfEmail) {
        contactEmailMap.put(Trigger.old[i].ema​il, Trigger.new[i]);
        contactIdMap.put(Trigger.old[i].id, Tr​igger.new[i]);        
    }
}    

//Only go through this process if "Email Opt O​ut" (HasOptedOutofEmail) was updated.

If (contactIdMap.size()>0) {

    //Query the database and look for all cont​acts with a duplicate email address (same email as​ the contact currently being updated).

    for (Contact dupContact : [SELECT Id, Name​, Email, HasOptedOutOfEmail
                               FROM Contact
                               WHERE Email IN ​: contactEmailMap.KeySet()
                               AND Id NOT IN :​ contactIdMap.KeySet()]) {
        Contact contact = contactEmailMap.get(​dupContact.Email);
        If (dupContact.HasOptedOutOfEmail <> c​ontact.HasOptedOutOfEmail) { 
            dupContact.HasOptedOutOfEmail = co​ntact.HasOptedOutOfEmail;   
            duplicateContacts.add(dupContact);
        }
    }    

    //If any duplicate contacts were found, up​date all duplicate contacts with the new HasOptedO​utOfEmail value.

   If (duplicateContacts.size()>0) update dupl​icateContacts;
}
} 
```

**批处理顶点**

```
global class updateContactOnEmailOptOutChange implements Database.Batchable<sObject>
{
global string query;

global updateContactOnEmailOptOutChange()
{
query = 'SELECT id,Name, Email, HasOptedOutofEmail from Contact where HasOptedOutofEmail=true';
}

global Database.QueryLocator start(Database.BatchableContext BC)
{
return Database.getQueryLocator(query);
}

global void execute(Database.BatchableContext BC, List <sObject> duplicateContacts)
{
Map<String, Contact> contactEmailMap = new Map<String, Contact>();
Map <Id, Contact> contactIdMap = new Map<Id, Contact>();

// Build a map with contacts to update. Only select the ones that have a different "Email Opt Out" value from the contact being updated.
if(trigger.isUpdate){

for(Integer i=0; i<Trigger.new.size();i++)
  {
  if(Trigger.old[i].HasOptedOutOfEmail != Trigger.new[i].HasOptedOutOfEmail)
      {
      contactEmailMap.put(Trigger.old[i].email, Trigger.new[i]);
      contactIdMap.put(Trigger.old[i].id, Trigger.new[i]);
      }
  }   

if(contactidMap.size()>0)
{
//Query the database and look for all contacts with a duplicate email address(same email as the contact currently being updated)
for (Contact dupContact: [SELECT Id, Name, Email, HasOptedOutofEmail
                          FROM Contact
                          WHERE Email IN: contactEmailMap.KeySet()
                          AND Id NOT IN: contactIdMap.KeySet()])
                              {
                              Contact contact=contactEmailMap.get(dupContact.Email);
                              If(dupContact.HasOptedOutOfEmail <> contact.HasOptedOutOfEmail)
                              {
                              dupContact.HasOptedOutOfEmail = contact.HasOptedOutOfEmail;
                              duplicateContacts.add(dupContact);
                              }
                              }
// if any duplicate contacts were found, update all duplicate contacts with the new HasOptedOutOFEmail value.

If(duplicateContacts.size<>0) update duplicateContacts;
}
}
}

//The batch process has completed successfully. Schedule next batch.

global void finish(Database.BatchableContext BC){
// //Build the system time of now + 300 seconds to schedule the batch apex.
Datetime sysTime = System.now();
sysTime = sysTime.addSeconds(300);
String chron_exp=''+sysTime.second()+''+sysTime.minute()+​''+sysTime.hour()+''+sysTime.day()+''+sysTime.mont​h()+'?'+sysTime.year();
system.debug(chron_exp);
updateContactOnEmailOptOutChangeScheduler scheduleFieldUpdate = new updateContactOnEmailOptOutChangeScheduler();
//Schedule the next job, and give it the system time so name is unique
System.schedule('New Email Update Job'+sysTime.getTime(),chron_exp,scheduleFieldUpda​te);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:45:32.433

您的批处理顶点包括对仅在触发器内有效的 Trigger 类的引用。编译错误消息说第 63 行存在无效类型。检查行号，但这可能指向对触发器的引用

# python - Python - 在字典中查找值的交集

> ID：13810130
> 
> 赞同：3
> 
> 时间：2012-12-10T22:09:29.653
> 
> 标签：python, dictionary, intersection

我正在编写一个函数来处理布尔 AND 搜索中的多个查询。我有每个查询发生的文档的字典=`query_dict`

我想要 query_dict.values() 中所有值的交集：

```
query_dict = {'foo': ['doc_one.txt', 'doc_two.txt', 'doc_three.txt'],
              'bar': ['doc_one.txt', 'doc_two.txt'],
              'foobar': ['doc_two.txt']}

intersect(query_dict)

>> doc_two.txt 
```

我一直在阅读有关交集的内容，但我发现很难将其应用于字典。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T22:12:35.970

```
In [36]: query_dict = {'foo': ['doc_one.txt', 'doc_two.txt', 'doc_three.txt'],
              'bar': ['doc_one.txt', 'doc_two.txt'],
              'foobar': ['doc_two.txt']}

In [37]: reduce(set.intersection, (set(val) for val in query_dict.values()))
Out[37]: set(['doc_two.txt']) 
```

在 [41] 中：query_dict = {'foo': ['doc_one.txt', 'doc_two.txt', 'doc_three.txt'], 'bar': ['doc_one.txt', 'doc_two.txt'], 'foobar': ['doc_two.txt']}

`set.intersection(*(set(val) for val in query_dict.values()))`也是一个有效的解决方案，虽然它有点慢：

```
In [42]: %timeit reduce(set.intersection, (set(val) for val in query_dict.values()))
100000 loops, best of 3: 2.78 us per loop

In [43]: %timeit set.intersection(*(set(val) for val in query_dict.values()))
100000 loops, best of 3: 3.28 us per loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:30:50.923

另一种方式

```
first = query_dict.values()[0]
rest = query_dict.values()[1:]
print [t for t in set(first) if all(t in q for q in rest)] 
```

# javascript - 使用事件映射动态绑定 .on() 方法

> ID：13810137
> 
> 赞同：2
> 
> 时间：2012-12-10T22:09:58.623
> 
> 标签：javascript, jquery-selectors, jquery

我使用这种语法来确保事件绑定在动态添加的`li`元素上

```
$('ul.list').on('click', 'li', function() {

   //do something

}); 
```

我尝试使用这样的事件映射来存档相同的内容：

```
$('ul.list').hammer({
    css_hacks : false
}).on({
     swipe : function(event){
        //do something
     },
     doubletap : function(event){
        //some more code
     }
}, 'li'); 
```

但它根本不起作用。如果我将事件直接绑定到`li`元素，它适用于现有元素，但不适用于动态添加的元素。

```
$('ul.list').find('li').hammer({
    css_hacks : false
}).on({
     swipe : function(event){
        //do something
     },
     doubletap : function(event){
        //some more code
     }
}); 
```

如何将事件映射绑定到未来元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:24:08.773

`on()`有 2 个参数相当于旧`bind()`功能。

如果你想让它像以前一样工作`live()`，请像第一个示例一样传递第三个参数。

此外，如果在方法上链接函数时遇到问题`hammer()`，请检查它并确保它返回“this”。

```
$('ul.list').on({
    swipe : function() { ... },
    doubletap : function() { ... }
},'li'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:09:17.737

如果你查看 jquery 文档，[jquery live](http://api.jquery.com/live/)

它说，**不支持链接方法。例如， $("a").find(".offsite, .external").live( ... ); 无效且无法按预期工作。**

所以你可以这样做：

```
$('ul.list > li').hammer({
    css_hacks : false
}).live({
     swipe : function(event){
        //do something
     },
     doubletap : function(event){
        //some more code
     }
}); 
```

但它已被弃用，我认为你的第一个例子应该有效。

我试过这个：

```
<ul>
<li>aaa</li>
<li>bbb</li>
</ul> 
```

和

```
$("ul").on({
    click:function(){
        $(this).html('clicked');
        },
    dblclick:function(){
        $(this).html('double clicked');
        }
    },'li'); 
```

它有效，所以我猜你的问题可能是事件的名称。

# multithreading - 我可以在 parfor (MATLAB) 上在工作人员之间发送和接收数据吗？

> ID：13810140
> 
> 赞同：2
> 
> 时间：2012-12-10T22:10:09.330
> 
> 标签：multithreading, matlab, parallel-processing, mpi, parallel-for

我想知道在执行 parfor 时是否可以在节点之间交易（发送和接收）数据。我想要完成的是这样的：

```
parfor i = 1:4

    %Perform a computation on each column of a 4x4 matrix on 4 different workers (each worker takes one column).

    %Make Worker #1 send its data to Worker #3, Worker #3 to Worker #1, Worker #2 ro Worker #4 and Worker #4 to Worker #2.

    %Make other computations on the data received from the other workers

end 
```

我想在不离开 parfor 的情况下执行所有这些计算。我可以使用任何 MPI 命令吗？这是可以实现的吗？如果是这样，我怎么能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T07:03:49.883

你不能在`parfor`其中迭代必须是独立的。相反，请查看`spmd`块、命令`labSend`和。`labReceive``labBroadcast`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T01:56:15.140

无法在`parfor`实例之间交换数据。这是使用的一部分，`parfor`拥有真正独立的个人任务。例如，无法保证其中有多少将同时运行。在某些计算机上，`parfor`只允许 1 个实例，在其他计算机上可能允许 4 个同时运行，还有一些计算机一次只允许 2 个。

Matlab 作为一个整体并没有真正做线程，但它确实有一些结构允许类似线程的应用程序。然而，一般来说，它们非常复杂，而且没有真正的用处。

# c#-4.0 - Fluent NHibernate - 从查找表中引用 ID 的映射表

> ID：13810144
> 
> 赞同：0
> 
> 时间：2012-12-10T22:10:59.997
> 
> 标签：c#-4.0, fluent-nhibernate, asp.net-mvc-4, fluent-nhibernate-mapping

假设我有 4 个表定义如下：

**项目**：[Project_Id，Project_Name]

**供应商**：[供应商 ID，供应商名称]

**Project_Vendors** : [ Project_Vendor_Id, Vendor_Id, Project_Id ]

**付款**：[ Payment_Id，Project_Vendor_Id，Payment_Amount ]

关系应如下所示：

*   一个项目可以关联多个供应商
*   一个供应商可以属于许多项目
*   可以向一个项目的许多供应商支付许多款项（因此使付款独一无二的是一个项目和一个供应商）

我可以使用 ProjectVendors 查找表轻松映射 Project 和 Vendor 对象及其关系，其中包含以下内容：

```
public class ProjectMapping : ClassMap<Project>
{
    public ProjectMapping()
    {
         Table("Projects");
         Id(x => x.Id).Column("Project_Id").GeneratedBy.TriggerIdentity();
         HasManyToMany(x => x.Vendors).Table("Project_Vendors")
             .ParentKeyColumn("Project_Id")
             .ChildKeyColumn("Vendor_Id")
             .Cascade.AllDeleteOrphan();
    }
} 
```

我的问题是，如果我的类定义如下：

```
public class Payment
{
    public virtual int? Id { get; set; }
    public virtual Project Project { get; set; }
    public virtual Vendor Vendor { get; set; }
    public virtual double Amount { get; set; }
}

public class Project
{
    public virtual int? Id { get; set; }
    public virtual string Name { get; set; }
    public virtual List<Vendor> Vendors { get; set; }
    public virtual List<Payment> VendorPayments { get; set; }
} 
```

如何使用查找表 Project_Vendors 映射我的 Project 和 Payment 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:31:26.023

如果不映射 Project_Vendors 表就不可能直接实现，因为 NHibernate 必须知道要引用的 id 来自哪里。你也许可以伪造它，但我建议不要这样做。

```
class ProjectVendorPair
{
    public virtual int Id { get; set; } 
    public virtual Project Project { get; set; }
    public virtual Vendor Vendor { get; set; }
}

// in PaymentMap
References(x => x.Owner, "Project_Vendor_Id"); 
```

或者您更改数据库结构：

*   摆脱列 Project_Vendor_Id
*   在 Payment 表中有列 Project_Id 和 Vendor_Id

# python - 使用python在制表符分隔文件中查找字母数字条目

> ID：13810150
> 
> 赞同：1
> 
> 时间：2012-12-10T22:11:27.550
> 
> 标签：python, find, biopython

我正在尝试使用带有 Blast2GO 注释的 SIMAP 数据库执行 GOs 注释。一切都很好，但是当我尝试在条目号与其 GO 相关联的文件中查找入藏号时遇到问题。问题是脚本没有在输入文件中找到真正存在的数字。我尝试了一些没有好的结果（re.match、插入列表然后提取元素等） GO 与条目号相关联的文件具有以下结构（入藏号、GO 术语、blats2go 分数）：

1f0ba1d119f52ff28e907d2b5ea450db 去：0007154 79

1f0ba1d119f52ff28e907d2b5ea450db 去：0005605 99

蟒蛇代码：

```
import re
from Bio.Blast import NCBIXML
from Bio import SeqIO

input_file = open('/home/fpiston/Desktop/test_go/test2.fasta', 'rU')
result_handle = open('/home/fpiston/Desktop/test_go/test2.xml', 'rU')
save_file = open('/home/fpiston/Desktop/test_go/test2.out', 'w')

fh = open('/home/fpiston/Desktop/test_go/Os_Bd_Ta_blat2go_fake', 'rU')
q_dict =  SeqIO.to_dict(SeqIO.parse(input_file, "fasta"))
blast_records = NCBIXML.parse(result_handle)

hits = []

for blast_record in blast_records:
    if blast_record.alignments:
        list = (blast_record.query).split()
        if re.match('ENA|\w*|\w*', list[0]) != None:
            list2 = list[0].split("|")
            save_file.write('%s\t' % list2[1])
        else:
            save_file.write('%s\t' % list[0])
        for alignment in blast_record.alignments:
            for hsp in alignment.hsps:
                h = alignment.hit_def    
                for l in fh:             
                    ls = l.split()       #at this point all right
                    if h in ls:          #here, 'h' in not found in 'fh'
                        print h
                        print 'ok'
                        save_file.write('%s\t' % ls[1])
                save_file.write('\n')
        hits.append(blast_record.query.split()[0])
misses =set(q_dict.keys()) - set(hits)

for i in misses:
    list = i.split("|")
    if len(list) > 1:
        save_file.write('%s\t' % list[1])
    else:
        save_file.write('%s\t' % list)
    save_file.write('%s\n' % 'no_match')

save_file.close() 
```

This is the code with the correction of **martineau** (fh.seek(0)):

```
#!/usr/bin/env python
import sys
import re
from Bio.Blast import NCBIXML
from Bio import SeqIO

input_file = sys.argv[1] #queries sequences in fasta format
out_blast_file = sys.argv[2] #name of the blast results file
output_file = sys.argv[3] #name of the output file

result_handle = open(out_blast_file, 'rU')
fh = open('/home/fpiston/Desktop/test_go/Os_Bd_Ta_blat2go', 'rU')
q_dict =  SeqIO.to_dict(SeqIO.parse(open(input_file), "fasta"))
blast_records = NCBIXML.parse(result_handle)
save_file = open(output_file, 'w')
hits = []

for blast_record in blast_records:
    if blast_record.alignments:
        list = (blast_record.query).split()
        if re.match('ENA|\w*|\w*', list[0]) != None:
            list2 = list[0].split("|")
            save_file.write('\n%s\t' % list2[1])
        else:
            save_file.write('\n%s\t' % list[0])
        for alignment in blast_record.alignments:
            for hsp in alignment.hsps:
                hit = alignment.hit_def
                save_file.write('%s\t' % hit)
                fh.seek(0)
                for l in fh:
                    ls = l.split()
                    if ls[0] in  hit:
                        save_file.write('%s\t' % ls[1])          
        hits.append(blast_record.query.split()[0])

misses =set(q_dict.keys()) - set(hits)

for i in misses:
    list = i.split("|")
    if len(list) > 1:
        save_file.write('\n%s\t' % list[1])
    else:
        save_file.write('\n%s\t' % list)
    save_file.write('%s' % 'no_match')

save_file.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:39:51.413

I really have no idea what you're talking about here, but noticed that within the outer `for blast_record in blast_records:` and `for alignment in blast_record.alignments:` loops you have a `for l in fh:` but never rewind the file with a `fh.seek(0)` anywhere, which means it only reads the lines in the file the first time it's executed -- which seems illogical.

You could fix this by adding the `fh.seek(0)` just before the inner loop. Although unnecessary the very first time the inner loop executes, it's need all the following times and doing it one extra time won't hurt anything.

# java - Eclipse 项目在类路径中找不到自己

> ID：13810153
> 
> 赞同：2
> 
> 时间：2012-12-10T22:11:50.823
> 
> 标签：java, eclipse, classpath

我正在使用 Eclipse Juno 并尝试在不同的操作系统上导入使用早期版本的 Eclipse 创建的 java 项目。导入项目并尝试运行其中一个 java 文件后，我收到此错误： 项目：类路径引用的 OldProj 不存在。但是我试图运行的文件在 OldProj 项目中，所以它说它找不到自己。这是一个独立的项目。它不引用自身之外的任何东西，也不引用任何其他东西。在两个版本中，它都是工作区中唯一的项目。

我尝试通过 Import... 命令导入项目。我尝试创建一个新项目并将源文件复制过来。两者都得到这个结果。该项目在早期版本上仍然运行良好。

这是 Eclipse 的新安装，所以我可能错过了一两个设置。有谁知道我错过了什么？

# php - pxlib - 如何使用 where 子句进行查询？

> ID：13810154
> 
> 赞同：0
> 
> 时间：2012-12-10T22:11:53.930
> 
> 标签：php, paradox

我正在通过 php 使用 pxlib 来查询在一个古老的 paradox-db 中获取一些数据。

我不明白我应该如何从数据库中获取有限的记录集，文档位于[http://us2.php.net/manual/en/ref.paradox.php](http://us2.php.net/manual/en/ref.paradox.php)

我在想某种 where 子句...

任何有悖论知识的人，请填补哥特式的空白，;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:08:15.067

行，

pxlib 没有任何类型的 sql 接口，也不能使用索引来查找记录。

循环通过 fysical 表是唯一的方法。

在 xampp 1.7.1 (oldie) 中找到工作的 pxlib.dll

# pcap - tshark 导出 FIX 消息

> ID：13810156
> 
> 赞同：3
> 
> 时间：2012-12-10T22:11:57.793
> 
> 标签：pcap, fix-protocol, tshark

## 目标

我正在努力实现以下目标：

*   [捕获包含FIX 协议](http://www.wireshark.org/docs/dfref/f/fix.html)中的对话的网络流量
*   将网络流量中的单个 FIX 消息提取为“好”格式，例如 CSV
*   对导出的“nice”格式数据做一些数据分析

我通过以下方式实现了这一目标：

*   使用 pcap 捕获网络流量
*   使用 tshark 将相关数据打印为 CSV
*   使用 Python (pandas) 分析数据

## 问题

问题是一些捕获的 TCP 数据包包含多个 FIX 消息，这意味着当我使用 tshark 导出到 CSV 时，我没有每行收到一条 FIX 消息。这使得使用 CSV 变得困难。

这是我用来提取相关 FIX 字段的 tshark 命令行，因为 CSV 是：

```
tshark -r dump.pcap \
-R \'(fix.MsgType[0]=="G" or fix.MsgType[0]=="D" or fix.MsgType[0]=="8" or \ fix.MsgType[0]=="F") and fix.ClOrdID != "0"\' \ 
-Tfields -Eseparator=, -Eoccurrence=l -e frame.time_relative \
-e fix.MsgType -e fix.SenderCompID \
-e fix.SenderSubID -e fix.Symbol -e fix.Side \
-e fix.Price -e fix.OrderQty -e fix.ClOrdID \
-e fix.OrderID -e fix.OrdStatus' 
```

请注意，如果数据包中出现多个字段，我目前使用“-Eoccurrence=l”来获取命名字段的最后一次出现。这不是一个可接受的解决方案，因为当数据包中有多个 FIX 消息时，信息将被丢弃。

这是我希望在导出的 CSV 文件中每行看到的内容（来自一条 FIX 消息的字段）：

```
16.508949000,D,XXX,XXX,YTZ2,2,97480,34,646427,, 
```

这是我在 TCP 数据包中有多个 FIX 消息（这种情况下是三个）并且使用命令行标志“-Eoccurrence=a”时看到的：

```
16.515886000,F,F,G,XXX,XXX,XXX,XXX,XXX,XXX,XTZ2,2,97015,22,646429,646430,646431,323180,323175,301151, 
```

## 问题

有没有办法（不一定使用 tshark）从 pcap 文件中提取每个单独的协议特定消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T04:08:31.383

**更好的解决方案**

使用`tcpflow`允许在不离开命令行的情况下正确完成此操作。

我目前的方法是使用类似的东西：

```
tshark -nr <input_file> -Y'fix' -w- | tcpdump -r- -l -w- | tcpflow -r- -C -B 
```

`tcpflow`确保遵循 TCP 流，因此不会丢失 FIX 消息（在单个 TCP 数据包包含超过 1 个 FIX 消息的情况下）。`-C`写入控制台并`-B`确保二进制输出。这种方法与在 Wireshark 中跟踪 TCP 流没有什么不同。

保留了 FIX 分隔符，这意味着我可以对输出进行一些方便的 grepping，例如

```
... | tcpflow -r- -C -B | grep -P "\x0135=8\x01" 
```

提取所有执行报告。注意`-P`grep 的参数，它允许非常强大的 perl 正则表达式。

**一个（以前的）解决方案**

我正在使用**[Scapy](http://www.secdev.org/projects/scapy/)**（另请参阅[Scapy 文档](http://www.secdev.org/projects/scapy/doc/index.html)， Scapy[的非官方傻瓜指南](http://theitgeekchronicles.files.wordpress.com/2012/05/scapyguide1.pdf)）读取 pcap 文件并从数据包中提取每个单独的 FIX 消息。

以下是我正在使用的代码的基础：

```
from scapy.all import *

def ExtractFIX(pcap):
    """A generator that iterates over the packets in a scapy pcap iterable
and extracts the FIX messages.
In the case where there are multiple FIX messages in one packet, yield each
FIX message individually."""
    for packet in pcap:
        if packet.haslayer('Raw'):
            # Only consider TCP packets which contain raw data.
            load = packet.getlayer('Raw').load

            # Ignore raw data that doesn't contain FIX.
            if not 'FIX' in load:
                continue

            # Replace \x01 with '|'.
            load = re.sub(r'\x01', '|', load)

            # Split out each individual FIX message in the packet by putting a 
            # ';' between them and then using split(';').
            for subMessage in re.sub(r'\|8=FIX', '|;8=FIX', load).split(';'):
                # Yield each sub message. More often than not, there will only be one.
                assert subMessage[-1:] == '|'
                yield subMessage
        else:
            continue

pcap = rdpcap('dump.pcap')
for fixMessage in ExtractFIX(pcap):
    print fixMessage 
```

我仍然希望能够从网络数据包的“帧”层获取其他信息，特别是相对（或参考）时间。不幸的是，这似乎不适用于 Scapy 数据包对象 - 它的最顶层是 Ether 层，如下所示。

```
In [229]: pcap[0]
Out[229]: <Ether  dst=00:0f:53:08:14:81 src=24:b6:fd:cd:d5:f7 type=0x800 |<IP  version=4L ihl=5L tos=0x0 len=215 id=16214 flags=DF frag=0L ttl=128 proto=tcp chksum=0xa53d src=10.129.0.25 dst=10.129.0.115 options=[] |<TCP  sport=2634 dport=54611 seq=3296969378 ack=2383325407 dataofs=8L reserved=0L flags=PA window=65319 chksum=0x4b73 urgptr=0 options=[('NOP', None), ('NOP', None), ('Timestamp', (581177, 2013197542))] |<Raw  load='8=FIX.4.0\x019=0139\x0135=U\x0149=XXX\x0134=110169\x015006=20\x0150=XXX\x0143=N\x0152=20121210-00:12:13\x01122=20121210-00:12:13\x015001=6\x01100=SFE\x0155=AP\x015009=F3\x015022=45810\x015023=3\x015057=2\x0110=232\x01' |>>>>
In [245]: pcap[0].summary()
Out[245]: 'Ether / IP / TCP 10.129.0.25:2634 > 10.129.0.115:54611 PA / Raw' 
```

# asp.net - 如何获取转发器项目模板中的值？

> ID：13810159
> 
> 赞同：0
> 
> 时间：2012-12-10T22:12:25.040
> 
> 标签：asp.net, repeater

```
<asp:Repeater ..>
<ItemTemplate>
<% string age = Eval("a").ToString() %>

<%
   age = a.ToLower(); // real stuff here
%>

<p>Hello <%# Eval("name") %> you are <%= age %> old</p>

</ItemTemplate>    
</asp:Repeater> 
```

我收到一条错误消息：

```
Databinding methods such as Eval(), XPath(), and Bind() can only be used in the context of a databound control. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:28:15.840

利用`<%# Eval("<propertyName>") %>`

当然你必须给`DataSource`你的中继器分配一个，然后打电话`DataBind()`

而且，在不使用那些内联编码的情况下，您可以将整个逻辑包装到数据项的自定义属性中。例如，在上面的代码中，您可以创建一个自定义属性，`Age`例如：

```
partial class YourDataItemClass // use partial if it is auto-generated
{
    public string Age
    {
        var ageStr = a.ToString(); // assuming YourDataItemClass  has an `a` var/property
        // Do real stuff here
        ...
        ...
        var lowered = ageStr.ToLower();
        ...
        ...
        return lowered;
    }
} 
```

您可以在转发器控件中公开该属性，例如：

```
<asp:Repeater id="myRepeater" ..>
<ItemTemplate>
    <p>Hello <%# Eval("Name") %> you are <%# Eval("Age") %> old</p>
</ItemTemplate>    
</asp:Repeater> 
```

在代码隐藏中的某处分配数据源和数据绑定转发器，例如：

```
...
// Call the method which provides you the data
// IEnumerable<YourDataItemClass> myData = ... ; 
myRepeater.DataSource = myData;
myRepeater.DataBind();
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:52:55.423

```
<asp:Repeater>
<ItemTemplate>
 <p>Hello <%# Eval("name") %> you are <%# Convert.ToString(Eval("a")).ToLower()  %>   old</p>

</ItemTemplate>    
</asp:Repeater> 
```

# c# - 自定义 DropDownList 服务器控制回发时丢失的项目

> ID：13810163
> 
> 赞同：0
> 
> 时间：2012-12-10T22:12:39.540
> 
> 标签：c#, asp.net

我有一个从 DropDownList 继承的自定义服务器控件。在回发时，项目丢失。它看起来像这样：

```
public class MyClientSelectList : DropDownList
{       
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        // design mode hack to let visual studio display in design mode
        if (!DesignMode)
        {
            if (!Page.IsPostBack)
            {
                this.Items.Add(new ListItem("Select an item..."));
                // add more items from db
            }
        }
    }
} 
```

我检查了 EnablePostBack = true。我在托管此自定义服务器控件的页面的页面加载中选择了一个选定的值。

为什么物品在回发时会丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:15:35.727

EnableViewState 默认已经是 True，所以 mshsayem 的解决方案是行不通的。有两种方法可以做到这一点，一种标准方法是覆盖 SaveControlState 和 LoadControlState 方法请参阅[http://msdn.microsoft.com/en-us/library/1whwt1k7(v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/1whwt1k7%28v=VS.100%29.aspx)
另一种方法是，在初始化中，无论是否回发，都从数据库中重新加载列表项，然后从发布数据中检索选定的值并将其设置回下拉列表

# xml - Flash AS3 XML - 我如何计算我的 xml 提要中的项目数？

> ID：13810168
> 
> 赞同：0
> 
> 时间：2012-12-10T22:13:01.927
> 
> 标签：xml, actionscript-3, flash

这是我第一次尝试弄乱 Flash 并读取 xml 文件。我已经加载了提要，我什至将提要输出文本放入文本框中。

最后一点是我想获得从 xml 提要返回的节点总数。此外，XML 提要是特定于 wordpress 类别的提要。

例如，该结构类似于频道 -> 项目 -> 标题。所以我想我想计算提要中“项目”元素的数量？

我已经尝试了很多东西，但我看不到这个。

这是我到目前为止所拥有的：

```
var xmlLoader:URLLoader = new URLLoader();
var xmlData:XML = new XML();

xmlLoader.addEventListener(Event.COMPLETE, LoadXML);
xmlLoader.load(new URLRequest("{my rss feed}"));

/* This loads the XML */
function LoadXML(e:Event):void {
     xmlData = new XML(e.target.data);
     parseData(xmlData);
}

 // Here is where i need to get the total number of nodes from my xml file;
 // The reason is i want to give my random range function a "maximum" value.
 // I'm pulling a random post from the feed

 function randomRange(minNum:Number, maxNum:Number):Number 
 {
      return (Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum);
 }
 var randomNum = randomRange(0, 3);

function parseData(mTip:XML):void {
     flashTip.htmlText = mTip.channel.item[randomNum].description.text();
} 
```

这是包含所有编辑的最终脚本。我已经使用 AS3 在 Flash CS5 中对其进行了测试。它也在工作。也许其他人会发现这很有用。

```
var xmlLoader:URLLoader = new URLLoader();
var xmlData:XML = new XML();

xmlLoader.addEventListener(Event.COMPLETE, LoadXML);
xmlLoader.load(new URLRequest("{my wordpress rss feed url}"));

/* This loads the XML */
function LoadXML(e:Event):void {
xmlData = new XML(e.target.data);
parseData(xmlData);
 }

 /* This gets the data for today's tip */
 function parseData(mTip:XML):void {

     var itemXMLList:XMLList = XMLList(mTip..item);
     var count:int = itemXMLList.length();
     var finalcount:int = count - 1;
     //trace(finalcount);

 function randomRange(minNum:Number, maxNum:Number):Number 
 {
return (Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum);
 }
 var randomNum = randomRange(0, finalcount);
 //trace(randomNum);

 flashTip.htmlText = mTip.channel.item[randomNum].description.text();

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:37:48.043

试试这个

请注意，双点表示此处的项目节点可能处于我们从 XML 检索的任何级别（深度），并且它始终返回 XMLList。

```
var itemXMLList:XMLList = XMLList(mTip..item);
var count:int = itemXMLList.length(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:39:28.660

如果我正确理解您的问题，您可以通过该`length()`方法得到它。

```
trace( mTip.property1[0].property2[0].property3.length() ); //will return however many property3s there are in mTip.property1[0].property2[0] 
```

请注意，在 XML 类中，`length`不是一个属性，因为它与`String`、`Array`、`Vector`和任何其他数量的类一样。这是一种方法。我经常犯这个错误，这绝对是错误的。

如果您想要文档中的**所有**节点而不仅仅是一个特定的节点，我不知道一种快速的方法（不是没有一个）。我可能只是遍历每个节点并手动计数。

# asp.net - LINQ - EF 加入难度

> ID：13810172
> 
> 赞同：0
> 
> 时间：2012-12-10T22:13:14.517
> 
> 标签：asp.net, linq, entity-framework

我有两张桌子：

**阶段 ：**

```
long ID
string Name 
```

和另一个**活动：**

```
long ID
string Name
long PhaseID 
```

我已经知道阶段的名称，我想获得这些特定阶段的活动。我是将 PhaseName 添加到活动表中还是通过加入 LINQ 来完成？

也许是这样的？

```
var query = from a in entities.Activities
                        join p in entities.Phases on a.PhaseId equals p.Id
                        where p.Name == "Preplanning" 
```

...在这里我不确定如何完成此查询..

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:17:09.433

您提供的代码将使用`Inner Join`查找名称为“Preplanning”的阶段所在的所有活动。
要完成您的查询，您需要添加一个选择子句。

```
var query = from a in entities.Activities
                 join p in entities.Phases on a.PhaseId equals p.Id
                 where p.Name == "Preplanning"
                 select a.Name 
```

将返回`IEnumerable<string>`所有活动名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:17:13.397

只需根据需要选择活动：

```
var query = from a in entities.Activities
            join p in entities.Phases on a.PhaseId equals p.Id
            where p.Name == "Preplanning"
            select a; 
```

以下是[查询表达式](http://msdn.microsoft.com/en-us/library/bb384065.aspx)的外观：

**查询表达式必须以from**子句开头，并且必须以**select**或**group**子句结尾。在第一个 from 子句和最后一个 select 或 group 子句之间，它可以包含一个或多个这些可选子句：where、orderby、join、let 甚至附加 from 子句。您还可以使用 into 关键字来启用连接或组子句的结果作为同一查询表达式中其他查询子句的源。

与令人费解的图像相同：

![在此处输入图像描述](../Images/53e5be8c0cb6877f8ed07eee57097efe.png)

使用方法语法，您不需要以特殊的方式结束查询：

```
var query = entities.Phases
               .Where(p => p.Name == "Preplanning")
               .Join(entities.Activities, p => p.Id, a => a.PhaseId, (p,a) => a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T22:20:40.387

如果您只需要其中一张表中的数据，则无需进行联接。您可以改为应用过滤器：

```
var q = entities.Activities.Where(a => 
        entities.Phases.Any(p => a.PhaseId == p.Id && p.Name == "Preplanning")); 
```

# javascript - 是否有一种 JSlint 兼容方式将 php 变量导入 javascript？

> ID：13810173
> 
> 赞同：1
> 
> 时间：2012-12-10T22:13:14.460
> 
> 标签：javascript, jslint

JSLint 给了我这个错误（以及第 7 行的其他各种位的其他几个错误。它们都与我如何将该 php 对象推送到我的 javascript 中有关。有没有办法更好地做到这一点，让 JSLint 高兴?

php

```
$postinfo = json_encode($posts); 
```

javascript

```
Line 7: var fullpostsinfo = <?php echo $postinfo ?>;
Expected an identifier and instead saw '<'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T05:48:04.717

不，jslint 只能检查有效的 JavaScript 代码，不支持（或评估）PHP。您必须将生成的纯 JavaScript 代码粘贴到 jslint 中。

# ios - 具有重复图例的核心图条形图

> ID：13810176
> 
> 赞同：1
> 
> 时间：2012-12-10T22:13:25.500
> 
> 标签：ios, core-plot, bar-chart

我正在使用 core-plot 框架来创建一个带有图例的条形图。除了图例复制了条形图每个部分中的列之外，这一切都有效（请参阅随附的屏幕截图）。

![在此处输入图像描述](../Images/c4cb3267b9597196bbf7ab0dabca3060.png)

我查看了 core-plot 类参考，但找不到任何解决此问题的方法。我试图将 CPTLegend 属性 numberOfColumns 设置为 1，将 numberOfRows 设置为 3，这使得图例在图例中显示了适当数量的项目，但它显示的数据不正确。

![在此处输入图像描述](../Images/1a197ad972a3e12927fb188424ac76cc.png) ![在此处输入图像描述](../Images/3e188c104f0e25d10c3e700a14b2e8cd.png)

下面是我用来构建条形图的代码。大家有什么建议我可以解决这个问题吗？我假设这不是核心情节的错误，而是传说的限制，我希望有一个解决方法。

```
// Create barChart from theme
barChart = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
CPTTheme *theme = [CPTTheme themeNamed:kCPTDarkGradientTheme];
[barChart applyTheme:theme];
chartView.hostedGraph = barChart;
barChart.plotAreaFrame.masksToBorder = NO;

barChart.paddingLeft = 60.0;
barChart.paddingTop = 10.0;
barChart.paddingRight = 0.0;
barChart.paddingBottom = 30.0;

//find max y
int maxY = 0;
NSMutableArray *maxDrillDownData = [chartData.drillDownData objectForKey:DRILLDOWN_EQUIPMENT_ALL_TYPE];
for (NSMutableArray *dataArray in maxDrillDownData) {
    maxY = dataArray.count>maxY?dataArray.count:maxY;
}

//add buffer
maxY = maxY+100;

// Add plot space for horizontal bar charts
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)barChart.defaultPlotSpace;
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromInt(maxY)];
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromFloat(3.25)];

CPTXYAxisSet *axisSet = (CPTXYAxisSet *)barChart.axisSet;
CPTXYAxis *x = axisSet.xAxis;
x.axisLineStyle = nil;
x.majorTickLineStyle = nil;
x.minorTickLineStyle = nil;
x.majorIntervalLength = CPTDecimalFromString(@"1");
x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
x.titleLocation = CPTDecimalFromFloat(7.5f);
x.titleOffset = 55.0f;
x.labelOffset = 2.0;

// Define some custom labels for the data elements
x.labelRotation = M_PI/4;
x.labelingPolicy = CPTAxisLabelingPolicyNone;
NSArray *customTickLocations = [NSArray arrayWithObjects:[NSDecimalNumber numberWithFloat:0.5], [NSDecimalNumber numberWithFloat:1.5], [NSDecimalNumber numberWithFloat:2.5], nil];
NSArray *xAxisLabels = (NSMutableArray *)[chartData.labels objectForKey:LABELS_EQUIPMENT_TYPE];
NSUInteger labelLocation = 0;
NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[xAxisLabels count]];
for (NSNumber *tickLocation in customTickLocations) {
    CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText: [xAxisLabels objectAtIndex:labelLocation++] textStyle:x.labelTextStyle];
    newLabel.tickLocation = [tickLocation decimalValue];
    newLabel.offset = x.labelOffset;
    [customLabels addObject:newLabel];
    //[newLabel release];
}

x.axisLabels =  [NSSet setWithArray:customLabels];

CPTXYAxis *y = axisSet.yAxis;
y.axisLineStyle = nil;
y.majorTickLineStyle = nil;
y.minorTickLineStyle = nil;
y.majorIntervalLength = CPTDecimalFromString(@"50");
y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
y.title = (NSString *)[chartData.labels objectForKey:LABELS_Y_AXIS];
y.titleOffset = 45.0f;
y.titleLocation = CPTDecimalFromFloat(150.0f);

//identifiers
NSMutableArray *identifiers = (NSMutableArray *)[chartData.identifiers objectForKey:IDENTIFIER_EQUIPMENT_TYPE];

// First bar plot
CPTBarPlot *barPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor darkGrayColor] horizontalBars:NO];
barPlot.baseValue = CPTDecimalFromString(@"0");
barPlot.dataSource = self;
barPlot.barOffset = CPTDecimalFromFloat(-0.6f);
barPlot.barWidth = CPTDecimalFromFloat(.5);
barPlot.delegate = self;
barPlot.identifier = (NSString *)[identifiers objectAtIndex:0];
[barChart addPlot:barPlot toPlotSpace:plotSpace];

NSLog(@"barPlot.identifier: %@", barPlot.identifier);

// Second bar plot
barPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor blueColor] horizontalBars:NO];
barPlot.dataSource = self;
barPlot.barOffset = CPTDecimalFromFloat(-0.4f);
barPlot.barWidth = CPTDecimalFromFloat(.5);
barPlot.baseValue = CPTDecimalFromString(@"0");
barPlot.identifier = (NSString *)[identifiers objectAtIndex:1];
barPlot.delegate = self;
[barChart addPlot:barPlot toPlotSpace:plotSpace];

NSLog(@"barPlot.identifier: %@", barPlot.identifier);

//third bar plot
barPlot = [CPTBarPlot tubularBarPlotWithColor:[CPTColor redColor] horizontalBars:NO];
barPlot.dataSource = self;
barPlot.barOffset = CPTDecimalFromFloat(-0.2f);
barPlot.barWidth = CPTDecimalFromFloat(.5);
barPlot.baseValue = CPTDecimalFromString(@"0");
barPlot.identifier = (NSString *)[identifiers objectAtIndex:2];
barPlot.delegate = self;
[barChart addPlot:barPlot toPlotSpace:plotSpace];

NSLog(@"barPlot.identifier: %@", barPlot.identifier);

// Add legend
CPTLegend *theLegend = [CPTLegend legendWithGraph:barChart];
theLegend.numberOfColumns = 3;
theLegend.numberOfRows = 1;
theLegend.fill = [CPTFill fillWithColor:[CPTColor whiteColor]];
theLegend.borderLineStyle = [CPTLineStyle lineStyle];
theLegend.cornerRadius = 5.0;

barChart.legend = theLegend;
barChart.legendAnchor = CPTRectAnchorTopRight;
barChart.legendDisplacement = CGPointMake(-10.0f, -20.0f); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T00:43:28.377

确保您的绘图数据源中没有实现以下方法：

```
-legendTitleForBarPlot:recordIndex:
-barFillForBarPlot:recordIndex: 
```

如果存在这些方法中的任何一种，则绘图会为每个条形图创建一个图例条目，而不是为整个图使用单个图例条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-20T13:00:29.600

我知道这是一个非常古老的问题，但提供的答案对我没有任何帮助。所以我调查了它并试图弄清楚。在我看来，最好的解决方案是只在你的图例中添加一个图而不是添加图表。添加图表会将与图表关联的所有图表添加到图例中。

```
CPTLegend *theLegend = [CPTLegend legendWithGraph:barChart]; 
```

用。。。来代替

```
NSMutableArray *legendPlots =[[NSMutableArray alloc] init];
[legendPlots addObject:barPlot];
CPTLegend *theLegend = [CPTLegend legendWithPlots:legendPlots]; 
```

我在一个图表中使用多个饼图时遇到了同样的问题。这为我解决了这个问题。

# c++ - 如何在 C++ 中访问 .HGT SRTM 文件？

> ID：13810178
> 
> 赞同：3
> 
> 时间：2012-12-10T22:13:25.547
> 
> 标签：c++, file, binary, topography, .hgtags

这是关于该主题的类似问题，对文件有很好的描述：

[如何读取 NASA .hgt 二进制文件](https://stackoverflow.com/questions/357415/how-to-read-nasa-hgt-binary-files)

总的来说，我对编程还很陌生，到目前为止我的努力非常有限。我的最终目标是访问高程数据并将其存储在二维数组中以便于访问。正如建议的那样，我一直试图一次读取文件 2 个字节，但我不知道下一步该做什么。这是我到目前为止所得到的：

```
 #include <iostream>
    #include <fstream>

    using namespace std;

    int main () 
    {
        ifstream::pos_type size;
        char * memblock;

        ifstream file ("N34W119.hgt", ios::in|ios::binary|ios::ate);

        if (file.is_open())
        {
            size = 2; 
            memblock = new char [size];

            file.seekg (0, ios::beg);

            file.read (memblock, size);

            //I don't know what to do next

            file.close();
        }
        return 0;
    } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:24:42.987

```
// SRTM_version 1201 or 3601 
int height[SRTM_version][SRTM_version]; 
for ( int r = 0; r < SRTM_version ; r++ ) {
   for ( int c = 0 ; c < SRTM_verision; c++ ) {
      height[r][c] = (memblock[0] << 8) | memblock[1];  
   }
} 
```

# ruby-on-rails - Rails + bootstrap-sass 混合

> ID：13810184
> 
> 赞同：0
> 
> 时间：2012-12-10T22:13:51.353
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass, bootstrap-sass

也许我不明白如何在 sass 中使用 mixin，或者如何使用 bootstrap-sass (https://github.com/thomas-mcdonald/bootstrap-sass)。但是我怎样才能改变一类输入字段的盒子阴影呢？

编辑：应该澄清一下，在此示例中，我试图在选择活动输入字段时更改其发光效果。默认情况下它是蓝色的。

对于我的项目设置，我就像它在 github 页面上所说的那样，将 gem 放在 Gemfile 中，然后在控制器中我有类似的东西：

```
@import "bootstrap"
.testInput {
  /*(here I have put a variation of variables that I change to see 
  if I can do something with the mixin like $bordercolor: #000;*/
  @include formFieldState()
} 
```

所以也许我对 sass 工作原理的理解还差得很远。我想如果我想更改输入的 box-shadow，我可以在我自己的 mixin 中重复代码，但这也只是一个普遍的问题，关于其他 mixin 是否也可以实现这种事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:20:08.277

您应该将要更改的内容放在@include 之后，而不是之前。最后一个声明在 CSS 中获胜，因此如果将它们放在 mixin 之前，则 mixin 版本将获胜。

有关CSS 优先级的高级讨论，请参见此处：[http ://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/。](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:37:19.873

您是否查看了源代码以了解`formFieldState`mixin 的作用？它住在这里： [https](https://github.com/thomas-mcdonald/bootstrap-sass/blob/master/vendor/assets/stylesheets/bootstrap/_mixins.scss#L159) ://github.com/thomas-mcdonald/bootstrap-sass/blob/master/vendor/assets/stylesheets/bootstrap/_mixins.scss#L159 。看起来这个 mixin 被设计为在某种类型的容器中使用，很可能是一个`form`.

没有控制默认`input:focus`框阴影的变量（它的声明在这里： [https](https://github.com/thomas-mcdonald/bootstrap-sass/blob/master/vendor/assets/stylesheets/bootstrap/_forms.scss#L126) ://github.com/thomas-mcdonald/bootstrap-sass/blob/master/vendor/assets/stylesheets/bootstrap/_forms.scss#L126 ） . 您必须以老式方式覆盖它。

# javascript - 使用带有 FixedSplitter 的 Dojo 并产生不希望的结果

> ID：13810188
> 
> 赞同：1
> 
> 时间：2012-12-10T22:13:56.477
> 
> 标签：javascript, dojo

所以我正在尝试使用 Dojo 的 FixedSplitter 模块，我希望它像这样出来：

![工作固定分离器](../Images/5e7f15820b0538502a7e8b94e873b843.png)

但结果是这样的： ![不工作的fxs](../Images/3e66b8aec89238e4fd0f92898d62ecc4.png)

这是我正在使用的：

```
<body>
    <div data-dojo-type="dojox.mobile.FixedSplitter" orientation="H">
        <div data-dojo-type="dojox.mobile.FixedSplitter" data-dojo-props='orientation:"H"'>
          <div data-dojo-type="dojox.mobile.Pane" style="background-color:yellow;width:200px;">
            pane #1 (width=200px)
          </div>
          <div data-dojo-type="dojox.mobile.Pane" style="background-color:pink;">
            pane #2
          </div>
        </div>
    </div>

    <script src="dojo-release-1.8.1/dojo/dojo.js" data-dojo-config="async: true">     </script>
    <script type="text/javascript">
        require([
          "dojox/mobile/parser",
          "dojox/mobile/FixedSplitter",
          "dojox/mobile/Pane"
        ]);
    </script>
</body> 
```

我是 Dojo 的新手，我知道事情是如何工作的，但我觉得我可能在这里遗漏了一些东西以确保它正常工作。它似乎正确地点击了 Javascript 文件，运行需要 Javascript 正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T21:28:23.320

您必须将此 css 应用于您的 html

```
html, body{
    height: 100%;
    overflow: hidden;
    position: relative;
} 
```

# jira - 无法更新自定义字段说明

> ID：13810192
> 
> 赞同：1
> 
> 时间：2012-12-10T22:14:20.317
> 
> 标签：jira

我正在使用 JIRA 4.1.2。我有一个使用 Jelly 创建的页面布局，但现在该应用程序正在生产中，我需要手动更改字段描述（无法再次运行脚本）。

文档说去字段配置->配置->编辑，输入文本并点击更新。我这样做，但没有任何改变。但是，对于使用标准 JIRA UI 在 Jelly 之外创建的字段，可以进行更新。

是什么赋予了？*我的果冻创建的字段都不会*更新。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:20:22.190

检查哪个字段配置用于特定问题。

# c++ - 获取windows桌面路径

> ID：13810194
> 
> 赞同：1
> 
> 时间：2012-12-10T22:14:22.757
> 
> 标签：c++, windows, winapi

这是我的代码：

```
#include <Windows.h>
#include <ShlObj.h>
#include <iostream>

using namespace std;

int main()
{
    LPTSTR myPath = NULL;

    SHGetSpecialFolderPath(0, myPath, CSIDL_COMMON_DESKTOPDIRECTORY, FALSE);

    if(myPath != NULL)
        cout << "It returns something" << endl;
    else
        cout << "It returns nothing" << endl;
    system("PAUSE");
    return 0;
} 
```

但 myPath 什么也不返回。我只想获取桌面路径。我在 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T22:24:58.763

您需要给它空间将数据放入：

```
T_CHAR myPath[ MAX_PATH ];
SHGetSpecialFolderPath(0, myPath, CSIDL_COMMON_DESKTOPDIRECTORY, FALSE); 
```

# string - 奇怪的选择行为

> ID：13810197
> 
> 赞同：0
> 
> 时间：2012-12-10T22:14:43.433
> 
> 标签：string, postgresql

我有这个奇怪的问题。我有一个表，其中包含 10 列不同类型的字符。

我需要一个函数来搜索所有记录并返回包含所有字符串的记录的 id。让我们说记录：

```
1\. a,b,c,d,e
2\. a,k,l,h
3\. f,t,r,e,w,q 
```

如果我调用这个函数 func(a,d) 它应该返回 1，如果我调用 func(e,w,q) 它应该返回 3。

功能是

```
CREATE OR REPLACE FUNCTION func(ma1 character varying,ma2 character varying,ma3 character varying,ma4 character varying)
DECLARE name numeric; 
BEGIN
 SELECT Id INTO name from Table WHERE
  ma1 IN (col1,col2,col3,col4) AND
  ma2 IN (col1,col2,col3,col4) AND
  ma3 IN (col1,col2,col3,col4) AND
  ma4 IN (col1,col2,col3,col4);
RETURN name;
END; 
```

它 90% 的时间都在工作，奇怪的问题是找不到某些行。

它不是大写或小写的问题。

有什么问题，它在 64 位 win 7 上的版本 9.1。我觉得它像编码或字符串问题，但我看不出在哪里和什么。

//好吧，我发现了问题，它与所有列有关，如果所有 24 列都填满了，那么它不起作用？？但为什么 ？是否有限制，因为我必须比较 24 列//

有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:50:49.723

问题是（可能）您的某些列有空值。

在 SQL 中，任何与 null 的相等比较总是错误的。这扩展到与`IN (...)`条件一起使用的值列表。如果列表中的任何值为空，则比较将为假，即使正在寻找的值在列表中也是如此。

解决方法是确保没有值是空的。不幸的是，这导致了一个冗长的解决方案：

```
WHERE ma1 IN (COALESCE(col1, ''), COALESCE(col2, ''), ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:26:30.370

我怀疑 Bohemian 是正确的，该问题与您的 IN 子句中的空值有关。另一种方法是使用[包含在运算符中的 Postgres 数组](http://www.postgresql.org/docs/9.2/static/functions-array.html)来执行测试。

```
where ARRAY[ma1,ma2,ma3,ma4] <@ ARRAY[col1,col2,...,colN] 
```

# c++ - 基本 linux C++ 网络：连接被拒绝，但没有引发错误

> ID：13810200
> 
> 赞同：0
> 
> 时间：2012-12-10T22:15:12.003
> 
> 标签：c++, linux, networking, connection

我正在**linux 上编写 C++ 网络服务器原型**。我已经获得了套接字文件描述符，将其绑定到端口 6666 上的 127.0.0.1，用监听标记套接字并调用接受。程序运行直到接受没有任何错误，然后等待。

仍然没有关于我的套接字的记录`nestat --all`。

我已经尝试过 command`telnet 127.0.0.1 6666`并得到了`connection refused`，但我的服务器仍在运行。

我不认为这是由防火墙引起的，因为在互联网上找到的示例有效。我认为错误处理可能存在一些错误，我对 C++ 还不是很熟悉。

这是我[在 pastebin 上的源代码](http://pastebin.com/4k2pH6hd)。

感谢您的时间和精力！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:25:18.963

1.  请注意，您`incoming_addr`被声明为指针，因此您`sizeof`正在返回指针的大小。尝试使用`sizeof(struct sockaddr_storage)`.

2.  `getAddress`应该收到一个`const char *address`而不是`const char address`。您真的想传递整个地址，而不仅仅是第一个字符。这也需要您`&`从`address`in中删除`inet_addr(&address)`，并将函数调用为`getAddress(addr, SERVER_PORT)`。

# sqlite - 如何在 phonegap 应用程序中存储翻译并保存用户偏好？

> ID：13810201
> 
> 赞同：2
> 
> 时间：2012-12-10T22:15:11.227
> 
> 标签：sqlite, cordova, jquery-mobile, translation

我正在使用 jQuery Mobile 开发一个 Phonegap 应用程序。这是一个非常基本的应用程序，它的目的是用西班牙语和英语显示一个大型组织的信息。在应用程序的第一页显示 2 个选项，西班牙语和英语。如果用户选择西班牙语，则显示的信息必须是西班牙语，反之亦然。

在 Windows Phone 上使用 SQLite DB 可能会出现一些问题，因为它尚不受支持（请参阅[Phonegap Storage](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#Storage)）。

还有[文件存储](http://docs.phonegap.com/en/1.2.0/phonegap_file_file.md.html#File)选项。以及原始 JSON 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:41:43.387

我这样做的方法是创建一个特定于语言的 json 文件来保存我的所有字符串。在这种情况下，english.json 和 spanish.json。像这样构造json：

```
{ 
    help: "Help",
    ok: "Okay"
} 
```

例如，当用户单击西班牙语按钮时，在应用程序的第一页上，它应该在 localStorage 中设置一个值。

```
localStorage.setItem("lang", "spanish"); 
```

然后在第二页中，一旦您获得“deviceready”事件，您应该使用 XHR 加载正确的 json 文件。

```
var request = new XMLHttpRequest();
    request.open("GET", localStorage.getItem("lang") + ".json", true);
    request.onreadystatechange = function(){//Call a function when the state changes.
        if (request.readyState == 4) {
            if (request.status == 200 || request.status == 0) {
                langStrings = JSON.parse(request.responseText);
            }
        }
    }
    request.send(); 
```

现在，每当您想使用已翻译的字符串时，您都可以从 langStrings 获得它。

```
langStrings.ok; 
```

说得通？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:12:00.793

为了持久性，我成功地使用了 Html5 本地存储。它适用于 Android、iOS 和 Windows Phone 7（我在这些平台上尝试过）。
我这样使用[它](https://github.com/stanislavfeldman/fel.js/blob/master/lib/models/storage.js)。

对于 i18n，您可以使用任何 javascript i18n 库。我创建了自己的简单[解决方案](https://github.com/stanislavfeldman/fel.js/blob/master/lib/views/i18n.js)。

# html - 使用 CSSSelector 匹配元素/包含

> ID：13810202
> 
> 赞同：0
> 
> 时间：2012-12-10T22:15:17.373
> 
> 标签：html, css, css-selectors, webdriver, selenium-webdriver

我的页面很长，我已经提取了与我的问题相关的 tr 和 td。

```
<tr>
<td colspan="2"><a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$AddControl1$dv$ctl01','')">Save</a>&nbsp;<a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$AddControl1$dv','Cancel$-1')">Back</a></td>
</tr>
<tr>
.............
.............
</tr>
<tr>
<td colspan="2"><a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$AddControl1$dv$ctl08','')">Save</a>&nbsp;<a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$AddControl1$dv','Cancel$-1')">Back</a></td>
</tr> 
```

```
table#ctl00_ContentPlaceHolder1_.DetailsView tbody tr td a 
```

给我 4 个匹配的元素

如何仅选择具有的元素`"Save"`？

我尝试过这样的事情：

```
table#ctl00_ContentPlaceHolder1_.DetailsView tbody tr td a:contains('Save') 
```

不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:08:05.047

`:contains`伪选择器不属于任何级别的 CSS 选择器标准。因此，它不被 支持`By.cssSelector`，所以你不能使用 vanilla CSS 选择器来做到这一点。您确实可以尝试其他一些选择。

*   您可以遍历返回的元素`findElements`，获取每个元素的文本，并在找到所需的元素时跳出循环。
*   您可以使用 XPath 代替 CSS 选择器。
*   您可以创建自己的`By`使用 Sizzle JavaScript CSS 选择器引擎（通常被错误地称为“jQuery CSS 选择器引擎”）的类的子类来使用 Sizzle 引擎来查找您的元素，因为 Sizzle 实现了非标准的伪选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:45:26.260

我已经使用您提供的内容构建了一个小型测试，并填写了我认为您提供的内容之外的内容，并且它正在工作。

```
<html>
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-    ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">           
  </script>
  <script>

    $(document).ready(function() {
      $("#contentTable.tableClass tbody tr td a:contains('Save')").css("border", "2px     dotted blue");

    });
  </script>
</head>
<body style="font-size:62.5%;">

<table id="contentTable" class="tableClass">

  <tbody>
    <tr>
      <td colspan="2"><a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$AddControl1$dv$ctl01','')">Save</a>&nbsp;<a    href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$AddControl1$dv','Cancel$-1')">Back    </a>
      </td>
    </tr>
    <tr>
      <td colspan="2"><a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$AddControl1$dv$ctl08','')">Save</a>&nbsp;<a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$AddControl1$dv','Cancel$-1')">Back     </a>
      </td>
    </tr>
  </tbody>

</table>

</body>
</html> 
```

我已经简化了您的表 id 和类值，但除此之外我认为您的选择器应该可以工作。一旦你选择了这些元素，你想对它们做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T00:41:47.220

如果它们始终是您的代码的第一个元素，那么您可以使用`:first-child`

```
table#ctl00_ContentPlaceHolder1_.DetailsView tbody tr td a:first-child 
```

xpath方式将是

```
table#ctl00_ContentPlaceHolder1_.DetailsView tbody tr td a[text()='Save'] 
```

否则如[基于元素文本的 CSS 选择器所述？](https://stackoverflow.com/questions/5441680/css-selector-based-on-element-text)没有 CSS 方法可以根据其文本定位元素..

# ios - 将 NSData 长度从字节转换为兆

> ID：13810204
> 
> 赞同：38
> 
> 时间：2012-12-10T22:15:22.647
> 
> 标签：ios, nsdata, nslog

我正在尝试`NSLog`我的对象的兆数，`NSData`但是目前我所能得到的只是字节数

```
NSLog(@"%u", myData.length); 
```

那么我将如何更改此`NSLog`语句以便我可以看到类似

2.00 兆

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-12-10T22:21:35.293

一千字节有 1024 字节，一兆字节有 1024 千字节，所以...

```
NSLog(@"File size is : %.2f MB",(float)myData.length/1024.0f/1024.0f); 
```

请注意，这是一种简单的方法，无法真正适应低于 1,048,576 字节或高于 1,073,741,823 字节的字节大小。有关可以处理不同文件大小的更完整的解决方案，请参阅：[ObjC/Cocoa 类用于将大小转换为人类可读的字符串？](https://stackoverflow.com/questions/572614/objc-cocoa-class-for-converting-size-to-human-readable-string)

或者对于 OS X 10.8+ 和 iOS 6+

```
NSLog(@"%@", [[NSByteCountFormatter new] stringFromByteCount:data.length]); 
```

在斯威夫特：

```
print(ByteCountFormatter().string(fromByteCount: Int64(data.count))) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-04-25T20:17:39.430

对于 Swift 3，以 Mb 为单位：

```
let countBytes = ByteCountFormatter()
countBytes.allowedUnits = [.useMB]
countBytes.countStyle = .file
let fileSize = countBytes.string(fromByteCount: Int64(dataToMeasure!.count))

print("File size: \(fileSize)") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-24T18:19:46.813

在 Swift 5.1 和 iOS 13 中，您可以使用以下 5 种方法之一来解决您的问题。

* * *

## #1。使用`ByteCountFormatter`的[`string(fromByteCount:countStyle:)`](https://developer.apple.com/documentation/foundation/bytecountformatter/1408178-string)类方法

以下示例代码显示了如何通过**自动**将字节转换为更合适的存储单位（例如兆字节）来实现`string(fromByteCount:countStyle:)`打印文件大小：

 **```
import Foundation

let url = Bundle.main.url(forResource: "image", withExtension: "png")!
let data = try! Data(contentsOf: url)

let byteCount = data.count
print(byteCount) // prints: 2636725

let displaySize = ByteCountFormatter.string(fromByteCount: Int64(byteCount), countStyle: .file)
print(displaySize) // prints: 2.6 MB 
```

* * *

## #2。使用`ByteCountFormatter`'s[`string(fromByteCount:)`](https://developer.apple.com/documentation/foundation/bytecountformatter/1415338-string)方法

以下示例代码显示了如何实现`ByteCountFormatter`'s`string(fromByteCount:)`以通过**手动**将字节转换为兆字节来打印文件大小：

```
import Foundation

let url = Bundle.main.url(forResource: "image", withExtension: "png")!
let data = try! Data(contentsOf: url)

let byteCount = data.count
print(byteCount) // prints: 2636725

let formatter = ByteCountFormatter()
formatter.allowedUnits = [.useMB]
formatter.countStyle = .file
let displaySize = formatter.string(fromByteCount: Int64(byteCount))
print(displaySize) // prints: 2.6 MB 
```

* * *

## #3。使用`ByteCountFormatter`的[`string(from:countStyle:)`](https://developer.apple.com/documentation/foundation/bytecountformatter/3172524-string)类方法和`Measurement`

以下示例代码显示了如何通过**自动**将字节转换为更合适的存储单位（例如兆字节）来实现`string(from:countStyle:)`打印文件大小：

 **```
import Foundation

let url = Bundle.main.url(forResource: "image", withExtension: "png")!
let data = try! Data(contentsOf: url)

let byteCount = data.count
print(byteCount) // prints: 2636725

let byteSize = Measurement(value: Double(byteCount), unit: UnitInformationStorage.bytes)
let displaySize = ByteCountFormatter.string(from: byteSize, countStyle: .file)
print(displaySize) // prints: 2.6 MB 
```

* * *

## #4。使用`ByteCountFormatter`'s[`string(from:)`](https://developer.apple.com/documentation/foundation/bytecountformatter/3172523-string)方法和`Measurement`

以下示例代码显示了如何实现`ByteCountFormatter`'s`string(from:)`并`Measurement`通过**手动**将字节转换为兆字节来打印文件大小：

```
import Foundation

let url = Bundle.main.url(forResource: "image", withExtension: "png")!
let data = try! Data(contentsOf: url)

let byteCount = data.count
print(byteCount) // prints: 2636725

let byteSize = Measurement(value: Double(byteCount), unit: UnitInformationStorage.bytes)
let formatter = ByteCountFormatter()
formatter.allowedUnits = [.useMB]
formatter.countStyle = .file
let displaySize = formatter.string(from: byteSize)
print(displaySize) // prints: 2.6 MB 
```

* * *

## #5。使用`MeasurementFormatter`'s[`string(from:)`](https://developer.apple.com/documentation/foundation/measurementformatter/1642059-string)方法和`Measurement`

以下示例代码显示了如何实现`Measurement`和`MeasurementFormatter`，`string(from:)`以便通过**手动**将字节转换为兆字节来打印文件大小：

```
import Foundation

let url = Bundle.main.url(forResource: "image", withExtension: "png")!
let data = try! Data(contentsOf: url)

let byteCount = data.count
print(byteCount) // prints: 2636725

let byteSize = Measurement(value: Double(byteCount), unit: UnitInformationStorage.bytes)
let convertedSize = byteSize.converted(to: .megabytes)
let formatter = MeasurementFormatter()
let displaySize = formatter.string(from: convertedSize)
print(displaySize) // prints: 2.637 MB 
```****

# android - Android SQLite 数据库从查询中删除重复项

> ID：13810208
> 
> 赞同：2
> 
> 时间：2012-12-10T22:15:35.240
> 
> 标签：android, sqlite, filter

我是 SQLite 的新手。我正在使用此查询来从特定用户的列中提取所有行：

```
 Cursor c = db.query(true, TABLE, COLUMN, USER + "= '" + user + "'", null, null, null, null, null); 
```

这是一个表的例子：

```
|group-----ID|
|------------|
|one-------me|
|one------you|
|two-------me|
|one-------me| 
```

因此，对用户“我”的查询会提取“一、二、一”。如何过滤结果以便只获得一次值？比如“一二”

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T22:18:01.747

使用具有适当列名的 Group By 参数：

```
Cursor c = db.query(true, TABLE, COLUMN, USER + "= '" + user + "'", null,
            "group", null, null, null); 
```

* * *

由于此方法中有九个参数和三个几乎相同的方法...

```
public Cursor query(boolean distinct, 
                    String table, 
                    String[] columns, 
                    String selection, 
                    String[] selectionArgs, 
                    String groupBy,          /* this one */
                    String having, 
                    String orderBy, 
                    String limit) 
```

# java - Java 拉伸图标以适应按钮

> ID：13810213
> 
> 赞同：6
> 
> 时间：2012-12-10T22:16:01.007
> 
> 标签：java, swing

我正在尝试调整图标的大小，使其覆盖整个按钮并位于按钮的中心。当我尝试时，它会拉伸我的按钮并弄乱其他一切。我该怎么做？目前，我的代码是：

在我的类的构造函数中..

```
javax.swing.JButton Console = new javax.swing.JButton;
ScaleButtonImage(Console, ConsoleEnabledImage); 
```

那个班里面..

```
private void ScaleButtonImage(javax.swing.JButton Button, java.awt.Image ButtonIcon) {
        double Width  = ButtonIcon.getWidth(Button);
        double Height = ButtonIcon.getHeight(Button);
        double xScale = 28/Width;//Button.getWidth() / Width;
        double yScale = 28/Height;//Button.getHeight() / Height;
        double Scale = Math.min(xScale, yScale);   //ToFit
        //double Scale = Math.max(xScale, yScale); //ToFill
        java.awt.Image scaled = ButtonIcon.getScaledInstance((int)(Scale * Width), (int)(Scale * Height), java.awt.Image.SCALE_SMOOTH);
        Button.setIcon(new javax.swing.ImageIcon(scaled));
    } 
```

布局：

```
.addGroup(layout.createSequentialGroup()
                        .addComponent(Enable, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(Graphics, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(Debug, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(Console, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE) 
```

然后我将它们水平和垂直连接起来，使它们都具有相同的大小。

相反，它最终看起来像下面这样。此外，如果我更改第一个按钮的图标，所有按钮都会因为我的限制而改变大小。如何使图标适合按钮？

![在此处输入图像描述](../Images/8f068b75654555ac7dfd120d59b6d85d.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T23:11:15.257

尝试这样的事情（如果我没有在括号中犯任何错误）：

```
JButton button = new JButton(new ImageIcon(((new ImageIcon(
            "path-to-image").getImage()
            .getScaledInstance(64, 64,
                    java.awt.Image.SCALE_SMOOTH))))); 
```

这样，您的图像将被调整大小（在我的情况下为 64x64 大小）并添加到`button`，就像在这个例子中一样：

![在此处输入图像描述](../Images/2427d00440012259bb0098785b7ae9bb.png)

**编辑：**

这是调整图像大小并保持图像比例的方法：

```
ImageIcon ii = new ImageIcon("path-to-image");
int scale = 2; // 2 times smaller
int width = ii.getIconWidth();
int newWidth = width / scale;
yourComponent.setIcon(new ImageIcon(ii.getImage().getScaledInstance(newWidth, -1,
            java.awt.Image.SCALE_SMOOTH))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:32:05.200

这对我有用：

```
public class ImageButton
extends JButton {
    private static final long serialVersionUID = 1;

    /** @serial */
    private Image image;

    /** @serial */
    private final Rectangle innerArea = new Rectangle();

    public Image getImage() {
        return image;
    }

    public void setImage(Image image) {
        this.image = image;
        repaint();
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        if (image != null) {
            SwingUtilities.calculateInnerArea(this, innerArea);

            g.drawImage(image,
                innerArea.x, innerArea.y, innerArea.width, innerArea.height,
                this);
        }
    }
} 
```

# jsf - 是否可以在 JSF+EJB 中以编程方式设置 Principal

> ID：13810216
> 
> 赞同：1
> 
> 时间：2012-12-10T22:16:07.767
> 
> 标签：jsf, ejb-3.0, ejb-3.1, jaas, principal

我想使用 EJBContext.getCallerPrincipal() 检索用户名

```
public class GlobalInterceptor {

    @EJB
    private  AuditLogsEJB auditLogsEJB;

    @Resource
    private EJBContext context;

    @AroundInvoke
    public Object auditLog(InvocationContext invocationContext) throws Exception
    {  
          System.out.println(context.getCallerPrincipal());  //it outputs "ANONYMOUS"
    }
} 
```

但是我没有任何安全领域，我没有定义任何 <security-role> 或 <group-name> 因为用户名/密码被发送到远程应用程序进行验证。但为了方便起见，我仍然想使用 Principal 类来获取用户名和角色。

有没有办法在 JSF 托管 bean 或任何 EJB 中以编程方式设置 Principal（用户名和角色），以便拦截器可以检索它？例如：

```
String role = authenticationWSPort.validate(username, password);
if(role != null) 
{
      Principal p = new Principal(username);
      p.getRoles.add(role);
      FacesContext.getCurrentInstance().blah-blah.blah-blah.addPrincipal(p);
      //I am looking for something similar to the 3 lines above
}
else
     // invalid username and password 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T21:01:22.040

显然，正确的方法是设置一个领域，并使用它。

也许您可以创建和配置您自己的 Realm 实现，让您在 servlet 中调用 request.login(username, password) 之前即时创建用户。

或者。

如果你 - 真的 - 想要使用底层请求，它是可能的，但它是特定于应用程序服务器的，并且假设你在一个基于 tomcat (catalina) 的容器中：

```
if (request instanceof RequestFacade) {
        Request unwrapped = null;
        RequestFacade rf = RequestFacade.class.cast(request);
        try {
            Field requestField = rf.getClass().getDeclaredField("request");
            requestField.setAccessible(true);
            unwrapped = Request.class.cast(requestField.get(rf));
        } catch (NoSuchFieldException | SecurityException | IllegalArgumentException | IllegalAccessException ex) {
            unwrapped = null;
        }

        if (unwrapped != null) {
            unwrapped.setUserPrincipal(... your principal construction here ...);
        }
    } 
```

# android - 使用 Bing Traffic API 解析 JSON 时出错

> ID：13810217
> 
> 赞同：0
> 
> 时间：2012-12-10T22:16:10.523
> 
> 标签：android, json, bing, traffic

我正在尝试使用 Bing Traffic API 获取一些流量数据，但我不断收到 JSONException。

JSON 位于[HERE](http://dev.virtualearth.net/REST/v1/Traffic/Incidents/37,-105,45,-94?key=AjNq4HS5D3H0oggdmFvr6FcPIEFQdACQXRym9i6C93zEUbr8NMQ1Ns9O7DWrgjt4)。我使用了一个[位于此处](http://jsonformat.com/#jsondataurllabel)的 JSON 格式化程序，以便更好地了解我可以使用的数据。该 url 是公开的，所以我不知道是否需要提供某种身份验证数据，因为我可以将 url 插入浏览器并在此处查看 JSON 结果。

这是我打电话的方式

```
String url = "http://dev.virtualearth.net/REST/v1/Traffic/Incidents/37,-105,45,-94?key=" + API_KEY;

    // Create JSONParser instance
    JSONParser jParser = new JSONParser();

    // Get JSON from url
    final JSONObject jObject = jParser.getJSONFromUrl(url);

    try {
        JSONArray trafficData = jObject.getJSONObject(TAG_RESOURCESETS).getJSONArray(TAG_RESOURCES);
        Log.w("TrafficIncidentProvider", "Traffic Array consists of " + trafficData.toString());
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我正在尝试获取名为“resourceSets”的对象和名为“resources”的对象，因为这似乎是我需要的数据嵌入其中的地方。但显然我的做法是错误的，因为 logCat 告诉我认为没有与该数据匹配的值。这是 logcat 给我的错误

```
 12-10 17:12:42.924: E/JSON Parser(26560): Error parsing data  org.json.JSONException:   End of input at character 0 of 
  12-10 17:12:42.944: W/System.err(26560): org.json.JSONException: No value for  resourceSets
  12-10 17:12:43.004: W/System.err(26560):  at org.json.JSONObject.get(JSONObject.java:354)
  12-10 17:12:43.004: W/System.err(26560):  at org.json.JSONObject.getJSONObject(JSONObject.java:569)
  12-10 17:12:43.014: W/System.err(26560):  at com.brightr.weathermate.providers.TrafficIncidentProvider.getTrafficIncidents(TrafficIncidentProvider.java:43)
  12-10 17:12:43.014: W/System.err(26560):  at com.brightr.weathermate.activities.LocationMapview$showTrafficConditions.doInBackground(LocationMapview.java:323)
  12-10 17:12:43.024: W/System.err(26560):  at com.brightr.weathermate.activities.LocationMapview$showTrafficConditions.doInBackground(LocationMapview.java:1)
  12-10 17:12:43.034: W/System.err(26560):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
  12-10 17:12:43.034: W/System.err(26560):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
  12-10 17:12:43.044: W/System.err(26560):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
  12-10 17:12:43.044: W/System.err(26560):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
  12-10 17:12:43.044: W/System.err(26560):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 
```

伙计们，任何关于这个问题的澄清将不胜感激。一如既往的感谢！

编辑：根据要求，这是我的 JSONParser 代码，其中包含我的 HttpPost 方法

```
 public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);

        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();          

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parsing the string to a JSON object
    try {
        if(json != null){
        jObj = new JSONObject(json);
        }else{
            jObj = null;
        }
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:32:04.903

将此 json 解析为：

```
 try {
                JSONObject jobject=new JSONObject("Your_json_String");
                JSONArray jarray=jobject.getJSONArray("resourceSets");
                  System.out.println("dateNow jarray :"+jarray.length());
                  for(int i=0;i<jarray.length();i++){
                      if(!jarray.isNull(i)){
                      JSONObject jobjresources=jarray.getJSONObject(i);
                      System.out.println("dateNow jobjresources :"+jobjresources.length());
                      //estimatedTotal
                      if(!jobjresources.isNull("estimatedTotal")){
                        String str_estimatedTotal=jobjresources.getString("estimatedTotal");
                        System.out.println("resources str_estimatedTotal :"+str_estimatedTotal);

                      }
                      else{
                          System.out.println("resources str_estimatedTotal NULL for :"+i+" ITEM");
                      }
                        if(!jobjresources.isNull("resources")){
                        //resources
                        JSONArray jarrresources=jobjresources.getJSONArray("resources");
                        for(int j=0;j<jarrresources.length();j++){
                            System.out.println("$$$$$$$$$$ ITEM "+j+" START $$$$$$$$$$$$$$$$#");
                            if(!jarrresources.isNull(j)){

                            JSONObject jobjjarrresources=jarrresources.getJSONObject(j);
                            if(!jobjjarrresources.isNull("__type")){
                              //__type"
                            String str_type=jobjjarrresources.getString("__type");
                            System.out.println("resources str_type :"+str_type);
                            }
                            else{
                                System.out.println("resources __type NULL for :"+j+" ITEM");
                            }
                              //description"
                            if(!jobjjarrresources.isNull("description")){
                            String strdescription=jobjjarrresources.getString("description");
                            System.out.println("resources description :"+strdescription);
                            }
                            else{
                                System.out.println("resources description NULL for :"+j+" ITEM");
                            }
                              //lane"
                            if(!jobjjarrresources.isNull("lane")){
                            String strlane=jobjjarrresources.getString("lane");
                            System.out.println("resources lane :"+strlane);
                            }
                            else{
                                System.out.println("resources lane NULL for :"+j+" ITEM");
                            }
                              //lane"
                            if(!jobjjarrresources.isNull("point")){
                                JSONObject jobjpoint=jobjjarrresources.getJSONObject("point");
                                //point
                                if(!jobjpoint.isNull("coordinates")){
                                JSONArray jarcoordinates=jobjpoint.getJSONArray("coordinates");
                                for(int k=0;k<jarcoordinates.length();k++){
                                    //JSONObject jobjcoordinates=jarcoordinates.getString(k);
                                     if(!jarcoordinates.isNull(k)){
                                    String str_zero=jarcoordinates.getString(k);
                                    System.out.println("coordinates :"+k+": "+str_zero);
                                     }
                                     else{
                                         System.out.println("coordinates :"+k+" is NULL:"+j+" ITEM");
                                     }
                                 }
                                }
                                else{
                                    System.out.println("resources coordinates NULL for :"+j+" ITEM");
                                }
                            }
                            else{
                                System.out.println("resources point NULL for :"+j+" ITEM");
                            }

                              //roadClosed"
                              //lane"
                            if(!jobjjarrresources.isNull("roadClosed")){

                            String strroadClosed=jobjjarrresources.getString("roadClosed");
                            System.out.println("resources roadClosed :"+strroadClosed);
                            }
                            else{
                                System.out.println("resources roadClosed NULL for :"+j+" ITEM");
                            }
                              //severity"
                            if(!jobjjarrresources.isNull("severity")){
                            String strroadseverity=jobjjarrresources.getString("severity");
                            System.out.println("resources severity :"+strroadseverity);
                            }
                            else
                            {
                                System.out.println("resources severity NULL for :"+j+" ITEM");
                            }
                        }
                            else{
                                System.out.println("jarrresources    NULL for :"+j+" ITEM");
                            }

                            System.out.println("##################### ITEM "+j+" END ##############");
                        }
                       }
                        else{
                            System.out.println("resources    NULL for :"+i+" ITEM");
                        }
                  }

                   else{
                       System.out.println("resources     NULL for : ITEM");
                      }  
          }

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

}

# c++ - 如何将两个有符号位变量合并为一个有符号位变量？

> ID：13810222
> 
> 赞同：0
> 
> 时间：2012-12-10T22:16:28.950
> 
> 标签：c++, bit-manipulation, bits

假设以下 c++ 代码：

```
#include <iostream>
using namespace std;

typedef struct 
{
       int a: 5;
       int b: 4;
  int c: 1;
  int d: 22;

} example;

int main()
{
example blah;

blah.a = -5; // 11011
blah.b = -3; // 1101

int result = blah.a << 4 | blah.b;

cout << "Result = " << result << endl; // equals 445 , but I am interested in this having a value of -67 

return 0;
} 
```

我有兴趣让变量 result 是 int 类型，其中第 9 位是最高有效位。我希望是这种情况，以便结果 = -67 而不是 445。这是如何完成的？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:31:08.453

有关密切相关的问题（但不是重复的），请参阅[Sign Extending `int`in C。](https://stackoverflow.com/a/13755737/15168)

您需要注意，几乎所有关于位域的内容都是“实现定义的”。特别是，您是否可以将负数分配给“普通`int`”位字段尚不清楚；您必须知道您的实现是使用“plain `int`is `signed`”还是“plain `int`is `unsigned`”。第 9^位也很棘手；您是从 0 还是 1 开始计数，位域集的哪一端位于位 0，哪一端位于位 31（将最低有效位 (LSB) 计为位 0，将最高有效位 (MSB) 计为位 31） 32 位数量）。实际上，结构的大小不必是 32 位；编译器可能对布局有不同的规则。

排除所有这些注意事项后，您将得到一个 9 位值`(blah.a << 4) | blah.b`，并且您希望将其符号扩展为将 9 位 2 的补码提升为 (32-bit) `int`。

交叉引用答案中的函数可以完成这项工作：

```
#include <assert.h>
#include <limits.h>

extern int getFieldSignExtended(int value, int hi, int lo);

enum { INT_BITS = CHAR_BIT * sizeof(int) };
int getFieldSignExtended(int value, int hi, int lo)
{
    assert(lo >= 0);
    assert(hi > lo);
    assert(hi < INT_BITS - 1);
    int bits = (value >> lo) & ((1 << (hi - lo + 1)) - 1);
    if (bits & (1 << (hi - lo)))
        return(bits | (~0 << (hi - lo)));
    else
        return(bits);
} 
```

调用它：

```
int result = getFieldSignExtended((blah.a << 4) | blah.b), 8, 0); 
```

如果你想硬连线数字，你可以写：

```
int x = (blah.a << 4) | blah.b;

int result = (x & (1 << 8)) ? (x | (~0 << 8)) : x; 
```

注意我假设第 9位是一个值的第 8 位，其中包含^(0..8)位。如果您有其他解释，请进行调整。

* * *

工作代码

`g++ (GCC) 4.1.2 20080704 (Red Hat 4.1.2-44)`从 RHEL 5 x86/64 机器编译。

```
#include <iostream>
using namespace std;

typedef struct 
{
    int a: 5;
    int b: 4;
    int c: 1;
    int d: 22;
} example;

int main()
{
    example blah;

    blah.a = -5; // 11011
    blah.b = -3; // 1101

    int result = blah.a << 4 | blah.b;

    cout << "Result = " << result << endl;

    int x = (blah.a << 4) | blah.b;
    cout << "x = " << x << endl;

    int result2 = (x & (1 << 8)) ? (x | (~0 << 8)) : x;
    cout << "Result2 = " << result2 << endl;

    return 0;
} 
```

样本输出：

```
Result = 445
x = 445
Result2 = -67 
```

* * *

## ISO/IEC 14882:2011 — C++ 标准

### §7.1.6.2 简单类型说明符

> ¶3 ... [注意：`char`类型和某些位域（9.6）的对象是否表示为有符号或无符号数量是实现定义的。说明`signed`符强制对 char 对象和位域进行签名；它在其他情况下是多余的。——尾注]

### §9.6 位域 [class.bit]

> ¶1 表单的成员声明符
> 
> ```
>  identifier<sub>opt</sub> attribute-specifier-seq<sub>opt</sub>: constant-expression 
> ```
> 
> 指定一个位域；它的长度由冒号从位域名称开始。可选的属性说明符序列属于被声明的实体。位域属性不是类成员类型的一部分。常量表达式应该是一个整数常量表达式，其值大于或等于零。整数常量表达式的值可能大于位域类型的对象表示（3.9）中的位数；在这种情况下，额外的位被用作填充位并且不参与位域的值表示（3.9）。类对象内的位域分配是实现定义的。位域的对齐是实现定义的。位域被打包到一些可寻址的分配单元中。[ 笔记：位域跨越某些机器上的分配单元，而不是其他机器。位域在某些机器上从右到左分配，在其他机器上从左到右分配。——尾注]
> 
> ¶2 省略标识符的位域声明声明了一个未命名的位域。未命名的位域不是成员并且不能被初始化。[ 注意：未命名的位域对于填充以符合外部强加的布局很有用。—尾注] 作为一种特殊情况，宽度为零的未命名位域指定下一个位域在分配单元边界处的对齐方式。只有当声明一个未命名的位域时，常量表达式的值才可以等于 0。
> 
> ¶3位字段不应是静态成员。位域应具有整数或枚举类型（3.9.1）。普通（既不是显式签名也不是无符号）char、short、int、long 或 long long 位字段是有符号还是无符号是实现定义的。bool 值可以成功地存储在任何非零大小的位域中。地址运算符 & 不应应用于位域，因此没有指向位域的指针。非常量引用不应绑定到位字段 (8.5.3)。[ 注意：如果 const T& 类型的引用的初始化器是一个引用位域的左值，则该引用绑定到一个临时初始化以保存位域的值；引用不直接绑定到位域。见 8.5.3。——尾注]
> 
> ¶4 如果值 true 或 false 存储到任何大小的 bool 类型的位域（包括一位位域），则原始 bool 值和位域的值应比较相等。如果枚举数的值存储在相同枚举类型的位域中，并且位域中的位数大到足以容纳该枚举类型（7.2）的所有值，则原始枚举值和位域的值应比较相等。[ 例子：

```
enum BOOL { FALSE=0, TRUE=1 };
struct A {
    BOOL b:1;
};
A a;
void f() {
    a.b = TRUE;
    if (a.b == TRUE) // yields true
    { /* ... */ }
} 
```

—结束示例]

* * *

> ## ISO/IEC 9899:2011 — C2011 标准

C 标准具有基本相同的效果，但信息的呈现方式有所不同。

> ### 6.7.2.1 结构和联合说明符
> 
> ¶4 指定位域宽度的表达式应为具有非负值的整数常量表达式，该值不超过在省略冒号和表达式时将指定的类型的对象的宽度。^(122))如果值为零，则声明不应有声明符。
> 
> ¶5 位字段的类型应为 、 、 或其他一些实现定义的类型的合格或非`_Bool`合格`signed int`版本`unsigned int`。是否允许原子类型是实现定义的。
> 
> ¶9 ...此外，可以声明一个成员由指定数量的位组成（包括符号位，如果有的话）。这样的成员称为位域；^(124))它的宽度前面有一个冒号。
> 
> ¶10 位字段被解释为具有由指定位数组成的有符号或无符号整数类型。^(125))如果值 0 或 1 存储到 _Bool 类型的非零宽度位域中，则该位域的值应与存储的值进行比较；_Bool 位域具有 _Bool 的语义。
> 
> ¶11 实现可以分配任何大到足以容纳位域的可寻址存储单元。如果有足够的空间剩余，紧跟在结构中另一个位域之后的位域将被打包到同一单元的相邻位中。如果剩余空间不足，则将不适合的位域放入下一个单元还是与相邻单元重叠是实现定义的。单元内位域的分配顺序（高位到低位或低位到高位）是实现定义的。未指定可寻址存储单元的对齐方式。
> 
> ¶12 没有声明符但只有冒号和宽度的位域声明表示未命名的位域。^(126))作为一种特殊情况，宽度为 0 的位域结构成员表示不会将进一步的位域打包到放置前一个位域（如果有的话）的单元中。
> 
> ^(122))虽然对象中的位数`_Bool`至少为`CHAR_BIT`，但 _Bool 的宽度（符号和值位的数量）可能只有 1 位。
> 
> ^(124))一元 & (address-of) 运算符不能应用于位域对象；因此，没有指向位域对象的指针或数组。
> 
> ^(125))如上面 6.7.2 所述，如果实际使用的类型说明符是 int 或定义为 int 的 typedef-name，那么位域是有符号还是无符号是实现定义的。
> 
> ^(126))未命名的位域结构成员可用于填充以符合外部强加的布局。

该标准的附件 J 定义了可移植性问题，而 §J.3 定义了实现定义的行为。在某种程度上，它说：

> ### J.3.9 结构、联合、枚举和位域
> 
> ¶1 — ''plain'' int 位域是否被视为有符号 int 位域或无符号 int 位域（6.7.2、6.7.2.1）。
> 
> — 除 _Bool、signed int 和 unsigned int (6.7.2.1) 之外的允许位域类型。
> 
> — 位域是否允许原子类型 (6.7.2.1)。
> 
> — 位域是否可以跨越存储单元边界 (6.7.2.1)。
> 
> — 一个单元中位域的分配顺序（6.7.2.1）。

# visual-studio-2012 - Visual Studio 2012 代码覆盖率

> ID：13810224
> 
> 赞同：7
> 
> 时间：2012-12-10T22:16:40.353
> 
> 标签：visual-studio-2012, code-coverage

我们有非常复杂的基于 Web 的产品，包括大量的 Web 服务等。我正在尝试使用 VS 2012 命令行实用程序 vstest.console.exe 收集产品中所有程序集的代码覆盖率。收集单元测试的代码覆盖率非常容易，但是，没有标志或开关表明我可以将进程附加到 IIS 或收集 Web 服务（客户端和服务器端）的信息。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T06:41:44.427

**有关使用Visual Studio 2012 Update 1的****Microsoft 测试管理器**(MTM)从 IIS 应用程序收集代码覆盖率的详细说明，请参阅此博客：http: [//blogs.msdn.com/b/visualstudioalm/archive/2012/11/28 /code-coverage-in-microsoft-test-manager-in-visual-studio-update-1.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/11/28/code-coverage-in-microsoft-test-manager-in-visual-studio-update-1.aspx)

 **这是摘要：

*   安装[VS 更新 1](http://www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update)。
*   将 Microsoft Test Manager(MTM) 连接到团队项目（Team Foundation Server）并设置测试计划等。您可以使用[Team Foundation Service](http://tfs.visualstudio.com/)中的免费帐户来创建团队项目。
*   创建启用代码覆盖率数据收集器的测试设置。
*   使用此测试设置运行手动测试或探索性测试。
*   您将在测试运行结束时获得代码覆盖率文件。

替代解决方案：

*   使用**CodeCoverage.exe**收集代码覆盖率。路径：C:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Dynamic Code Coverage Tools\CodeCoverage.exe。您不需要安装更新 1，但我建议您这样做。例子：

    `CodeCoverage collect /IIS /session:WebSession /output:MyWebApp.coverage`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T22:40:20.387

从顶部的工具栏菜单：测试 > 分析代码覆盖率 > 所有测试

结果显示在代码覆盖结果窗口中。测试 > Windows > 代码覆盖率结果

我有 VS2012 Premium，不确定这个功能是否在其他层。**

# python - Pygame - 同时播放声音

> ID：13810233
> 
> 赞同：3
> 
> 时间：2012-12-10T22:17:21.350
> 
> 标签：python, audio, pygame

我正在使用 Pygame 制作游戏，我想做的是为每个级别设置一个主要声音，并在收集点时听到一些默认声音（例如）

因此，我使用以下方法加载主关卡音乐：

```
pygame.mixer.music.load(music_file)
pygame.mixer.music.play(-1) 
```

现在，我想做的是每当玩家获得积分时播放特定的声音。我无法使用以下方法停止音乐：

```
pygame.mixer.music.stop()
pygame.mixer.music.load(point_music)
pygame.mixer.music.play() 
```

因为关卡的音乐将停止播放。

所以，我试过做这样的事情：

```
points_sound = pygame.mixer.Sound("point.mp3")
points_sound.play() 
```

我知道在 pygame 中播放的声音在它自己的线程上运行，但我确信程序/游戏在完成播放声音之前不会终止。

长话短说：玩家可以收集积分，但我无法让 pygame 播放收集积分的声音。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T01:36:11.943

正如[sr2222](https://stackoverflow.com/questions/13810233/pygame-play-sounds-simultaneously#comment19000434_13810233)在评论中所说：

> 文档说 mp3 支持仅限于音乐，并且声音仅支持 OGG 和 WAV。您是否尝试过官方支持的格式之一？

尝试为您的声音使用 OGG 或 WAV 格式，这应该可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T18:40:59.420

points_sound.play() 应该返回一个通道对象。该对象是播放声音所必需的。

```
points_channel = points_sound.play() 
```

这对我自己的情况有所帮助。

# scheme - 取消引用 quasiquoted 点对中的项目

> ID：13810236
> 
> 赞同：3
> 
> 时间：2012-12-10T22:17:38.720
> 
> 标签：scheme

我已经开始尝试学习 Scheme 评估的内容，而 quasiquotation、unquoting、evaluation 和 cons-cells 的一个方面让我感到困惑。如果您能推荐有关该主题的任何好的参考资料，我将不胜感激。

R7RS 草案在关于准引用的第 4.2.8 节中有这个例子。

```
`(( foo ,(- 10 3)) ,@(cdr '(c)) . ,(car '(cons))) 
```

（它也在 R4RS 规范中，所以这不是新事物。）

根据规范，这应该评估为：

```
((foo 7) . cons) 
```

我很难理解为什么。在我看来，. 从内部列表的开头删除取消引用，这意味着它不会被评估为一个过程。

这是一个演示相同问题的更简单的表达式：

```
`(foo . ,(car '(bar))) 
```

使用与上述相同的逻辑，这应该评估为：

```
(foo . bar) 
```

事实上，它确实在我尝试过的 Scheme 系统上进行了评估。

但是，据我了解，它不应该评估为那个，所以我想找出我哪里出错了。

我对方案评估的理解是（好的，简化的）如果它是左括号之后的第一个关键字，则使用列表的其余部分作为参数调用该过程。

我对规范的理解是 ',' 完全等同于将下一个表达式包装在 '(unquote' 过程中。

我对点符号的理解是，出于一般显示目的，您删除了点和左括号（以及匹配的右括号），如下所述：

> [一般来说，打印一对的规则如下：始终使用点表示法，但如果点后面紧跟一个左括号，则删除该点、左括号和匹配的右括号。](http://docs.racket-lang.org/guide/Pairs__Lists__and_Racket_Syntax.html)

所以：

```
`(foo . ,(car '(bar))) 
```

同样可以呈现为：

```
(quasiquote (foo unquote (car (quote (bar))))) 
```

（事实上​​，这就是[jsScheme](http://www.bluishcoder.co.nz/jsscheme/)在其日志窗口中呈现输入的方式。）

但是，在评估这一点时：

```
(quasiquote (foo unquote (car (quote (bar))))) 
```

为什么要评估“取消引用”（作为程序？），取消引用和评估（汽车...）列表？当然它应该被视为一个带引号的符号，因为它不在左括号之后？

我可以想到许多可能的答案 - 'unquote' 不是常规程序，'unquote' 是在常规评估过程之外评估的，除了 '('后面是程序的符号 - 但我不确定哪个是正确的，或者如何挖掘更多信息。

我见过的大多数方案实现都使用宏而不是使用与评估器相同的语言来处理这个问题，而且我很难弄清楚应该发生什么。有人可以解释一下，或者给我看关于这个主题的任何好的参考资料吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:17:04.423

您是正确的，因为其中涉及宏：特别是，`quasiquote`是一个宏，`unquote`并且`unquote-splicing`是文字。这些都不是程序，因此不适用正常的评估规则。

因此，`(quasiquote (foo bar baz unquote x))`尽管`unquote`不是第一个语法元素，但可以对其进行特殊处理。

# java - Java MySQL 部署错误 (UnsupportedOperationException)

> ID：13810237
> 
> 赞同：0
> 
> 时间：2012-12-10T22:17:49.700
> 
> 标签：java, sql, tomcat, netbeans, wicket

我正在从事 Wicket 项目并遇到问题。这是我的一段代码：

```
private static String select_fkey = "SELECT fullname FROM PROFILE"; 
private static String select_table = "SELECT * FROM MESSAGE ORDER BY id DESC"; 

try{

        String query = select_table;
        Statement statement = this.connection.createStatement();
        ResultSet result = statement.executeQuery(query);

        while(result.next()){

            this.list.add(getMessage(result));
        }
    }
    catch(SQLException e){

        throw new UnsupportedOperationException(e.getMessage());
    }

private Message getMessage(ResultSet rs) throws SQLException{

        Statement sender_statement = this.connection.createStatement();
        ResultSet sender_result = sender_statement.executeQuery(select_fkey + " WHERE (id = " + rs.getInt("sender_id") + ")");

        return new Message(rs.getInt("id"), 
                           rs.getString("content"),  
                           rs.getInt("sender_id"), 
                           rs.getInt("receiver_id"),
                           rs.getString("datetime"),
                           sender_result.getString("fullname"));
    } 
```

该表`MESSAGE`有这 5 个字段，我想定义一个`Message`对象，该对象还存储发送它的人的姓名。

问题是，我实际上不知道如何从相关表中获取信息，所以我尝试了这种方式，但它捕获了`UnsupportedOperationException`（根据 Apache Tomcat 服务器日志）并给出了部署错误。有没有合适的方法来做这个操作？或者，我做错了什么？

顺便说一句，它显然是使用这个函数而不是上面的函数运行的：

```
private Message getMessage(ResultSet rs) throws SQLException{

            return new Message(rs.getInt("id"), 
                               rs.getString("content"),  
                               rs.getInt("sender_id"), 
                               rs.getInt("receiver_id"),
                               rs.getString("datetime"));
        } 
```

错误信息：

```
nbproject/build-impl.xml:1027: The module has not been deployed.
See the server log for details. 
```

build-impl.xml:1027 说：

```
<nbdeploy clientUrlPart="${client.urlPart}" debugmode="true" forceRedeploy="${forceRedeploy}"/> 
```

# restructuredtext - reStructuredText 中不以破折号或斜杠为前缀的命令行参数的选项列表

> ID：13810238
> 
> 赞同：3
> 
> 时间：2012-12-10T22:17:51.743
> 
> 标签：restructuredtext

[reStructuredText 对选项列表](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#option-lists)有很好的支持。例如，[`rst2html.py`](http://docutils.sourceforge.net/docs/user/tools.html#rst2html-py)翻译这个 RST 标记

```
Options:
    --foo                 does a foo
    -b, --bar ABAR        bar something 
```

进入以下格式良好的 HTML 表格：

```
<dt>Options:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--foo</span></kbd></td>
<td>does a foo</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-b</span>, <span class="option">--bar <var>ABAR</var></span></kbd></td>
<td>bar something</td></tr>
</tbody>
</table>
</dd> 
```

然而，这似乎并不能自然地扩展到位置参数。例如

```
Arguments:
    foo                   does a foo
    bar ABAR              bar something 
```

呈现为完全缺乏表格结构的 HTML：

```
<dt>Arguments:</dt>
<dd>foo                   does a foo
bar ABAR              bar something</dd> 
```

有没有办法为不以破折号或斜杠为前缀的命令行参数生成选项列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T03:05:33.947

是的。选项列表的相当有限的语法在这里没有很好地记录：http: [//docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#option-lists](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#option-lists)

这是真正令人恼火的事情。假设您正在编写一系列选项，其中一些符合上述链接的“选项”语法，但有些则不符合。例如`--opt==keyword`确实（无论您是否愿意，“关键字”都会变成斜体），但`--pot=BLACK|KETTLE`不会。Docutils 会将所有符合其语法的内容放入一个不错的选项列表 <table> 模板中，但在不符合的地方，它会从表格格式中删除并将它们编码为标准 <dl>。因此，在您的一堆选项中间，有一对看起来不像其他选项。

# c++ - 在 Blackberry 10 Cascades Beta 4 SDK 中显示具有给定号码的拨号盘

> ID：13810239
> 
> 赞同：0
> 
> 时间：2012-12-10T22:17:53.180
> 
> 标签：c++, qml, blackberry-10, blackberry-cascades

我试图在 Blackberry 10 Cascades Beta 4 SDK 中显示具有给定号码的拨号盘。
现在，我有这个代码：

```
bb::system::Phone::smileytongue:hone phone;
phone.requestDialpad(number, bb::system::Phone::LineType::Cellular); 
```

导致此错误：`Cannot open phone pps object`

所以，我查找了一个 pps 对象，并找到[了这个页面](https://developer.blackberry.com/cascades/reference/bb__ppsobject.html)。

那是我需要使用的，如果是，我该如何使用它？或者我使用其他东西，我该如何使用它？
（顺便说一句，我确实添加`"LIBS += -lbb"`到我的 .pro 文件中以便能够使用 pps 对象，但仅此更改并不能解决它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T08:56:41.090

轻松尝试在 Qml 页面中......

* * *

第 1 步：QML

```
import bb.cascades 1.0
import bb.system.phone 1.0

Page {
    id: root

    Container {
             Button {
                    id: call
                    text: "Call Me"

                    onClicked: {
                                  phone.initiateCall(4563289)
                               }
                    }
              }

      } 
```

* * *

第 2 步：添加`LIBS += -lbb`.pro 文件

第 3 步：添加`<permission>access_phone</permission>`条形描述符文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T01:31:12.043

确保您已在您的`bar-descriptor.xml`

```
<permission>access_phone</permission> 
```

# asp.net - ASP.NET 无法读取文件：“访问路径...被拒绝”

> ID：13810240
> 
> 赞同：2
> 
> 时间：2012-12-10T22:17:59.340
> 
> 标签：asp.net, file-permissions

**tl; dr：关键位以粗体显示。**

我们有一个网站页面，在执行时，它应该读取一系列文件，压缩它们，然后将它们返回给用户。

不幸的是，我们遇到了一个错误：

> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 上的网络服务），如果应用程序不模拟，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。

我试图访问该文件的行当前如下所示：

```
using (FileStream x = File.Open(@"\\thedirectory\filename.pdf", FileMode.Open, FileAccess.Read)) { } 
```

（除了尝试打开文件之外，这一行没有做任何有用的事情，因为现在我只是想看看我是否有访问权限。）

**此代码有效，如果我将文件复制到我机器上的目录并让路径转到那里，则可以毫无问题地打开文件。但是如果我去原始文件所在的远程机器，没有骰子。**

我陷入了一段时间的困境，试图确保无论 ASP.NET 进程以谁身份运行，该进程都有权访问该目录。但是，由于这不起作用并且我变得绝望，**因此我已授予“每个人”对远程目录的所有访问权限作为测试。仍然得到同样的错误。**

我猜这是一个权限问题（因为这就是它所声称的）以及代码在指向本地文件时有效的事实。但是，**由于我已经授予“每个人”所有权限，所以我不知道可能出了什么问题。**

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:48:34.620

我猜其他文件在另一台机器上，这是一种可能性：[https ://serverfault.com/questions/41130/network-service-account-accessing-a-folder-share](https://serverfault.com/questions/41130/network-service-account-accessing-a-folder-share)

另一种可能性是模拟一个可以访问目标文件夹的域帐户 - [http://support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)

或者将服务帐户更改为有权访问目标文件夹的域帐户。

# java - 以 Integer.MIN_VALUE 为指数的 Java pow 实现

> ID：13810242
> 
> 赞同：2
> 
> 时间：2012-12-10T22:18:03.740
> 
> 标签：java, pow

我正在用 Java 实现一个 pow 函数，我想知道我们如何处理 Integer.MIN_VALUE 作为指数？我们只是把它当作一个特例吗？

因为我试图将结果与标准 Java.lang.Math API 进行比较，我得到了几个不同的结果。以下是对比清单

```
//this will print "1.0 vs 0.0"
System.out.println(pow(2,Integer.MIN_VALUE) + " vs " + Math.pow(2,Integer.MIN_VALUE));

//this will print "1.0 vs 1.0"
System.out.println(pow(1,Integer.MIN_VALUE) + " vs " + Math.pow(1,Integer.MIN_VALUE));

public double pow(double base, int exp){
     double result = 1.0;
     boolean pos = false;

     if(exp == 0) return result;
     if(exp > 0){
         pos = true;
         exp *= -1;
     }

     while(exp > 0){
        if((exp & 1) == 1){
           result *= base;
        }
        base *= base;
        exp /= 2;
     }
     if(!pos){
        result = 1/result;
     }
     return result;
} 
```

所以我想知道 Integer.MIN_VALUE 是否是一种特殊情况，我必须有一个 if 语句来检查它。

```
 if(exp == Integer.MIN_VALUE && base > 1) return 0.0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:25:03.003

基于此行：

```
exp *= -1; 
```

看来这可能是一个特例。没有这种特殊情况，当然有办法实现这一点，但由于`-1 * Integer.MIN_VALUE`不能存储在 int 中，如果不单独处理，就会出现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:27:26.940

在我的系统上，我有

```
-2147483648
2147483647 
```

对于`Integer.MIN_VALUE`和`Integer.MAX_VALUE`分别。所以你应该看到问题所在

```
exp *= -1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:25:45.203

是的，你遇到的问题是`Integer.MIN_VALUE * -1 == Integer.MIN_VALUE`。您可以对其进行特殊处理，也可以以另一种方式处理它。实际上，一种可能的解决方案是在积极的时候将其设为`exp`消极，而不是相反。你只需要使用`-exp`而不是`exp`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-16T16:07:40.833

好吧，真正的问题是，由于符号没有在 MIN_VALUE 上翻转，符号级联到 exp/2。并且适用“负功率”案例。如果我们拆分它，它会更容易：

```
 public double myPow(double x, int n) {
    double result = 1.00000;
    boolean negative = false;

    if(n <0) {
        negative = true;
        n= -n;
    }

    result=power(x,n);
    if(negative) {
        result = 1/result;
    }
    return result;
}

private double power(double a, int n) {
    if(n ==0 || a==1) return 1;// a^0 = 1, 1^n = 1
    double x=power(a,n/2);

    if(n%2 == 0) return x*x;
    else return a*x*x;
} 
```

# c++ - 是语句值+= i；与 value = value + i 完全相同？

> ID：13810243
> 
> 赞同：0
> 
> 时间：2012-12-10T22:18:11.497
> 
> 标签：c++, operator-overloading

除了编辑器中的额外空间之外，这两个语句之间有什么区别吗？

编辑：感谢您的回答。我还想知道编译器如何评估每个语句。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T22:23:44.577

否 - 对于除 POD 之外的任何其他操作，操作员可能会超载。

您会希望任何合理的实现都使这些操作相同，但这取决于开发人员，而不是由编译器强制执行。

当人们重载`(A==B)`与`(B==A)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:31:37.513

是的，可能存在差异。一些对象，例如[前向迭代器](http://www.cplusplus.com/reference/iterator/ForwardIterator/)，定义了增量运算符（`x++`和`++x`），但不是`operator+=`。一些对象，如`string`，定义`operator+=`但不增加。但是，一般来说，如果`x += 1`、`++x`和`x++`都定义了，它们会做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T23:31:43.567

即使对于 POD，它们也不完全相同。区别是微不足道的，但是您有用的编译器编写者可能会警告您后者而不是前者：

```
char ch = get_a_character();
++ch;
ch = ch + 1; // narrowing conversion 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T22:23:45.387

是的，它们是相同的。编译器很可能会为两者生成相同的代码。

当然，除非其中一个或两个运算符已超载。这就是为什么有些人不赞成运算符重载的原因。

# actionscript-3 - as3 使用调整大小的信息来缩放我的电影剪辑

> ID：13810246
> 
> 赞同：1
> 
> 时间：2012-12-10T22:18:14.493
> 
> 标签：actionscript-3, flash, resize, scaling

我正在开发 Flash CS5.5 中的空中移动应用程序，对此我很陌生。

所以这是我的问题：我将所有内容都放在了一个名为 base 的电影剪辑中。我已经编写了代码来根据正在运行的设备和设备方向调整我的电影剪辑的大小。那部分工作正常，问题是当我尝试创建缩放功能时。

基本movieClip 可缩放，但我无法让最小边界正常工作，因此我的内容的缩放比例永远不会小于设备的宽度。我相信它指的是原始基础宽度而不是调整大小的基础宽度。关于如何在调整大小函数后调用新的基本宽度有什么想法吗？请参阅下面的代码，并提前感谢您的帮助:)

```
import flash.geom.Rectangle;

stop();

base.play();

stage.align = StageAlign.TOP_LEFT;
stage.scaleMode = StageScaleMode.NO_SCALE;

var guiSize:Rectangle = new Rectangle(0, 0, 480, 800);
var appScale:Number = 1;

stage.addEventListener(Event.RESIZE, handleResize);
function handleResize(e:Event):void {
     var deviceSize:Rectangle = new Rectangle(0, 0,  stage.stageWidth, 
     stage.stageHeight);
appScale = deviceSize.width / guiSize.width;
base.width = appScale * guiSize.width; 
base.height = appScale * guiSize.height;

Multitouch.inputMode = MultitouchInputMode.GESTURE;
base.addEventListener(TransformGestureEvent.GESTURE_ZOOM , onZoom); 
function onZoom (e:TransformGestureEvent):void{ 

if (base.scaleX * e.scaleX < 1)
{}
else if (base.scaleX * e.scaleX > 5) 
{}
else {
base.scaleX *= (e.scaleX+e.scaleY)/2; 
       base.scaleY *= (e.scaleX+e.scaleY)/2;}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:39:53.560

在玩弄了代码并尝试了许多不同的解决方案之后，我想出了下面的代码，它似乎工作正常。问题是我的基本movieClip 在resize 函数为我的缩放函数抛出base.scaleX 变量之后被放大了。这是因为 base.scaleX 大于一。你可以在这里看到问题：

```
if (base.scaleX * e.scaleX < 1) 
```

该代码导致我的基本movieClip 缩小的比例小于我的设备窗口。我的解决方案是使用新的 base.width 来确定缩放功能的最小和最大缩放比例。如下所述。

```
function onZoom (e:TransformGestureEvent):void{ 
       if (base.width * e.scaleX < deviceSize.width )
       {}
else if (base.width * e.scaleX > deviceSize.width * 2 ) 
{}
else {
base.scaleX *= (e.scaleX+e.scaleY)/2; 
       base.scaleY *= (e.scaleX+e.scaleY)/2;}
}
} 
```

# ruby - 在 rails 3 和 ruby 1.9.2 中需要 ruby 模块的正确位置是什么？

> ID：13810252
> 
> 赞同：2
> 
> 时间：2012-12-10T22:18:48.653
> 
> 标签：ruby, ruby-on-rails-3

我需要使用 Ruby 1.9.2 中内置的 CSV 模块，为此，我需要使用`require 'csv'`.

在 Rails 3 中，放置这个的合适位置在哪里`require`？我已经看到它位于使用它的文件顶部的示例。

我还看到了一个将其放入的示例`config/initializers/csv_init.rb`。

这里有经验法则吗？如果我在多个文件中需要它，请将其放入初始化程序中，如果只有一个将其放入文件本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:45:18.253

把它放在'config/application.rb'中。（请参阅“[配置 Rails 应用程序](http://guides.rubyonrails.org/configuring.html)”）。

一般来说，在一个中心位置做这些事情并记录下来。当未来的 Ruby 或 Rails 版本破坏各种向后兼容性时，维护您的应用程序的人会很感激。

# ios - 目标c从菜单栏中删除复制按钮

> ID：13810253
> 
> 赞同：0
> 
> 时间：2012-12-10T22:18:53.887
> 
> 标签：ios, cocoa-touch, copy, selector, menuitem

我正在编写一个使用 webkit 读取 epub 的应用程序。当我通过长按选择文本时，菜单栏打开，应该只有 Facebook 和 Twitter 按钮。所以这是我的代码我是如何做到的：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
if (action == @selector(facebookItemClicked:) || action == @selector(twitterItemClicked:)) {
return YES;
}else if (action == @selector(copy:)){
NSLog(@"copy");
} return NO;} 
```

这是我初始化菜单项的方法

`UIMenuItem *facebookMenuItem = [[UIMenuItem alloc] initWithTitle:@"Facebook" action:@selector(facebookItemClicked:)]; UIMenuItem *twitterMenuItem = [[UIMenuItem alloc] initWithTitle:@"Twitter" action:@selector(twitterItemClicked:)];`

但问题是复制选择器从未将其显示为操作，因此我无法捕捉到它，并且每次显示菜单栏时，Facebook 和 Twitter 旁边还有一个复制按钮。

如果有人可以帮助我，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:34:35.167

解决了问题。

默认 UIWebView 覆盖了我的 menuBar 操作。所以我创建了一个`CustomWebView`继承自 UIWebView 的类添加

```
+ (void)initialize{
UIMenuItem *itemA = [[UIMenuItem alloc] initWithTitle:@"A" action:@selector(a:)];
UIMenuItem *itemB = [[UIMenuItem alloc] initWithTitle:@"B" action:@selector(b:)];
[[UIMenuController sharedMenuController] setMenuItems:[NSArray arrayWithObjects:itemA, itemB, nil]];
//    [itemA release];
//    [itemB release];
 }

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
BOOL can = [super canPerformAction:action withSender:sender];
if (action == @selector(a:) || action == @selector(b:))
    {
        can = YES;
    }
if (action == @selector(copy:))
    {
        can = NO;
    }
NSLog(@"%@ perform action %@ with sender %@.", can ? @"can" : @"cannot", NSStringFromSelector(action), sender);
return can;
} 
```

它覆盖了菜单栏操作，`webview`然后我`CustomWebView`在其他使用 webvew 的类中使用它。

# theory - 哪些边不在任何 MST 中

> ID：13810254
> 
> 赞同：1
> 
> 时间：2012-12-10T22:19:03.863
> 
> 标签：theory, graph-theory, graph-algorithm, minimum-spanning-tree

这是一个家庭作业问题。我不想要解决方案 - 我提供的是我一直在考虑的解决方案，并希望知道它是否好或为什么有缺陷。

我的动机是找出未加权、无向图的哪些边不属于任何 MST。这个问题只有在多条边具有相同值时才有意义，否则 MST 是唯一的。

我的想法来自 Prim's Algorithm 的微小变化——而不是在每一步（其中 S 和 T 是两组顶点）中添加从 S 到 T 的最小边——而是寻找相同值的最小边**和**更多边从 S 到最小边到达的顶点。通过这样做，（所以我想）我们将收到一个包含出现在任何 MST 中的所有边的图。如果这是正确的，我可以简单地将边缘列表与原始图形边缘列表进行异或，以找出任何 MST 中没有的边缘。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:05:22.257

您是否添加了所有找到的边缘（=那些具有相同权重的边缘）？如果是这样，您将失去一些优势：

考虑一个边成本相等的五边形。您从 1 个节点开始，将 2 条边添加到 2 个相邻节点。在下一步中，您将添加从这 2 个相邻节点到 2 个断开连接的节点的 2 条边，您就完成了。但是，所有边的成本都相同，并且它们都有效地存在于 MST 中。最后 2 个节点之间的边不包含在您的算法中，但可能是 MST 的一部分。

情况更糟。假设最后一条边的成本较低。您的算法仍然不包括它，但它存在于每个 MST 中。您在每个步骤中添加多个边以考虑所有可能性，但添加这些边会更改后续步骤。

# php - 如何确保从 PHP 编辑器输出格式正确的 html

> ID：13810255
> 
> 赞同：-1
> 
> 时间：2012-12-10T22:19:05.020
> 
> 标签：php, html, markup

我有一个 PHP 脚本，正在 Mac 的“Text Wrangler”中编辑。

在 IDE 中编码时，我将 PHP 代码缩进，以使其更清晰易读。

但是，当我在服务器上检查我的 localhost 页面的“查看源代码”时，html 输出有大量空格，并且格式根本不均匀。

我能做些什么来获得更好的 html 输出格式甚至缩进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:26:37.297

首先，为什么要格式化输出？只有浏览器必须理解它，众所周知，它甚至可以理解我见过的最糟糕的 HTML 标签错误；）

如果您想调试您的网页，我建议您在浏览器中集成开发人员工具（例如在 Google Chrome 中，按`F12`）。

但是如果你真的想缩进输出，我建议你使用[ob_*()](http://php.net/manual/en/ref.outcontrol.php)函数，它可以让你缓冲输出，这样你就可以将它传递给一个很好的 HTML 格式化程序。

[这是一个使用Tidy](http://php.net/manual/en/book.tidy.php)扩展的简短示例：

```
ob_start();

// Now generate and output your HTML using your views, templates or whatever!

$html = ob_get_contents();
ob_end_clean();

// Specify configuration
$config = array(
  'indent'       => true,
  'output-xhtml' => true,
  'wrap'         => 200
);

// Tidy
$tidy = new tidy;
$tidy->parseString($html, $config, 'utf8');
$tidy->cleanRepair();

echo $tidy; 
```

您还可以对[ob_start()](http://php.net/manual/en/function.ob-start.php)使用回调函数：

```
ob_start(function ($html) {
  // Specify configuration
  $config = array(
    'indent'       => true,
    'output-xhtml' => true,
    'wrap'         => 200
  );

  // Tidy
  $tidy = new tidy;
  $tidy->parseString($html, $config, 'utf8');
  $tidy->cleanRepair();

  return str_val($tidy);
});

// Now generate and output your HTML using your views, templates or whatever!

ob_flush(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:26:46.050

制表符缩进并不普遍是有原因的。选项卡大小可能因您查看输出的编辑器而异。它还会影响多行的对齐方式。如果要跨多行对齐，请使用空格。

但是，我通常认为不应该关心对齐用户获得的 HTML 输出，因为用户永远不会查看您的 HTML 或关心它，他们也不应该这样做。他们应该看到的只是浏览器中的解析结果。这对你来说真的不重要。事实上，这是对带宽的浪费，对最终用户没有任何好处。

# facebook - 使用 Javascript sdk 在 Facebook 墙上发帖

> ID：13810257
> 
> 赞同：2
> 
> 时间：2012-12-10T22:19:10.840
> 
> 标签：facebook, facebook-javascript-sdk

所以，我正在尝试使用 fb.api 在用户墙上发帖，但我被卡住了。这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml"><head><meta http-           equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Example Of Posting To Wall Using Javascript Graph API</title>
<script type="text/javascript" src=""></script>
    </head>
    <body class="">
    //the facebook sdk include
    <div id="fb-root" class=" fb_reset">
    <script>
var APP_ID="myAppID";

window.fbAsyncInit = initFacebook;

function initFacebook()
{
    FB.init({
      appId  : APP_ID,
      status : true, // check login status
      cookie : false, // enable cookies to allow the server to access the session
      xfbml  : true  // parse XFBML
    });

    FB.getLoginStatus(onFacebookLoginStatus);
};

(function() {
    var e = document.createElement('script');
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
    e.async = true;
    document.getElementById('fb-root').appendChild(e);
    }());
    //the login function
function facebookLogin()
{
    var loginUrl="http://www.facebook.com/dialog/oauth/?"+
        "scope=publish_stream&"+
        "client_id="+APP_ID+"&"+
        "redirect_uri="+document.location.href+"&"+
        "response_type=token";
    window.location=loginUrl;
}

//Callback function for FB.login
function onFacebookLoginStatus(response)
{
    if (response.status=="connected" && response.authResponse)
    {
        document.getElementById("txtEcho").innerHTML="Logged in.";

    }
    else
    {
        document.getElementById("txtEcho").innerHTML="Not logged in.";
    }

}

    //post to wall function
function postToWallUsingFBApi()
{
    var data=
    {
        caption: 'This is my wall post example',
        message: 'Posted using FB.api',
        link: 'http://wwww.permadi.com/blog/',
     }
    FB.api('/me/feed', 'post', data, onPostToWallCompleted);
}

    //the return function after posting to wall
function onPostToWallCompleted(response)
{
    if (response)
    {
        if (response.error)
        {
            document.getElementById("txtEcho").innerHTML=response.error.message;
        }
        else
        {
            if (response.id)
                document.getElementById("txtEcho").innerHTML="Posted as post_id "+response.id;
            else if (response.post_id)
                document.getElementById("txtEcho").innerHTML="Posted as post_id "+response.post_id;
            else
                document.getElementById("txtEcho").innerHTML="Unknown Error";
        }
    }
}

    </script>
    <input id="loginButton" type="button" value="Login To Facebook" onclick="javascript:facebookLogin();">
    <input id="postToWallWithFBApiPrompt" type="button" value="Post To Wall Using FB.api"          onclick="javascript:postToWallUsingFBApi();">
    <div id="txtEcho"><b></b></div>
    </body>
    </html> 
```

这里的问题是我收到此错误代码：必须使用活动访问令牌来查询有关当前用户的信息。即使我使用登录按钮来获取代码，我也会明白这一点。是否有可能在函数 postToWallUsingFBApi() 中添加先前获得的访问令牌。我可以用用户 ID 更改 /me/，这样用户就可以注销并仍然发帖吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:06:49.517

如果您以这种方式进行客户端登录，则必须随后自己从 URL 中提取访问令牌 - 请参阅[https://developers.facebook.com/docs/howtos/login/client-side-without-js-sdk /#步骤3](https://developers.facebook.com/docs/howtos/login/client-side-without-js-sdk/#step3)

或者你只是使用 JS SDK 之外的 FB.login 方法——更简单一点，“开箱即用”处理所有必要的东西——https: [//developers.facebook.com/docs/howtos/login/getting-started /＃第4步](https://developers.facebook.com/docs/howtos/login/getting-started/#step4)

# jquery - 剑道网格：如何检查选定行的所有复选框？

> ID：13810258
> 
> 赞同：2
> 
> 时间：2012-12-10T22:19:11.330
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, kendo-ui, grid

我正在使用带有 MVC 和 C# 的 Telerik Kendo 网格。我有一个网格，填充了一些数据并添加了一个复选框列 - 用于使用户可以全选。

现在，当我选中“selectAll”复选框时，所有复选框都被选中（每行一个），因为它们应该是。

我想要做的：我希望能够双击一行并更改复选框复选框 - 如果未选中，则 dbl-click 将检查它，反之亦然。

此外，由于 Kendo 网格允许用户选择许多（鼠标按下、拖动和鼠标向上 - 就像在桌面上选择图标时一样），我想拥有它，这样当用户执行此操作时，所有选定的行都有它们的选中复选框并再次选中，如果它们已被选中，则此操作将导致复选框变为未选中状态。

细节：

*   网格名称：网格
*   jQuery版本：1.8.3
*   MVC 4
*   最新剑道UI

选中“selectAll”复选框时检查所有复选框的代码：

```
$(document).ready(function () {
var grid = $('#Grid').data('kendoGrid');
    grid.thead.find("th:last")
    .append($('<input class="selectAll" type="checkbox"/>'))
    .delegate(".selectAll", "click", function () {
        var checkbox = $(this);
        grid.table.find("tr")
            .find("td:last input")
            .attr("checked", checkbox.is(":checked"))
            .trigger("change");
    });
}); 
```

我是 Javascript 的初学者，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T10:43:29.807

您的示例似乎有效：http: [//jsfiddle.net/scaillerie/axpmF/](http://jsfiddle.net/scaillerie/axpmF/)。

您只需通过在事件开始时添加将您的网格设置为 kendoGrid `document.ready`：

```
$('#Grid').kendoGrid(); 
```

并确保表格的所有最后一个单元格中都有一个复选框...

* * *

**编辑 ：**

要更新所选行中复选框的状态，您必须`dblclick`在网格的每个单元格上注册事件：

```
grid.tbody.on("dblclick", "tr", selectAllSelectedRows);

function selectAllSelectedRows() {
    grid.tbody.find("tr").each(function() {
        var $this = $(this),
            ckbox,
            state;

        if($this.hasClass("k-state-selected")) {
            ckbox = $this.find("td:last input");
            state = ckbox.prop("checked");
            ckbox.prop("checked", !state);   
        }
    })
} 
```

我已经用新代码更新了我的小提琴：http: [//jsfiddle.net/scaillerie/axpmF/2/](http://jsfiddle.net/scaillerie/axpmF/2/)。

# c++ - 数组的 C++ 语法指针

> ID：13810259
> 
> 赞同：2
> 
> 时间：2012-12-10T22:19:15.160
> 
> 标签：c++, templates, pointers, constants

在下面的：

```
int c[10] = {1,2,3,4,5,6,7,8,9,0};

printArray(c, 10);

template< typename T >
void printArray(const T * const array, int count)
{
    for(int i=0; i< count; i++)
        cout << array[i] << " ";
} 
```

我有点困惑，为什么模板函数的函数签名没有通过使用 [] 来引用数组作为数组，所以类似于`const T * const[] array`.

如何从模板函数签名中得知正在传递一个数组而不仅仅是一个非数组变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T22:22:41.643

你不能肯定地说。您必须阅读文档和/或从函数参数的名称中找出答案。但是由于您正在处理固定大小的数组，您可以这样编码：

```
#include  <cstddef> // for std::size_t

template< typename T, std::size_t N >
void printArray(const T (&array)[N])
{
    for(std::size_t i=0; i< N; i++)
        cout << array[i] << " ";
}

int main()
{
  int c[] = {1,2,3,4,5,6,7,8,9,0}; // size is inferred from initializer list
  printArray(c);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T22:22:54.417

数组有大小。要创建对数组的引用，您需要静态提供大小。例如：

```
template <typename T, std::size_t Size>
void printArray(T const (&array)[Size]) {
    ...
} 
```

此函数通过引用获取数组，您可以确定其大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:29:48.890

您可以尝试以下方法：

```
template< std::size_t N>
struct ArrayType
{
    typedef int IntType[N];
};

ArrayType<10>::IntType content = {1,2,3,4,5,6,7,8,9,0};

template< std::size_t N >
void printArray(const typename ArrayType<N>::IntType & array)
{
    //for from 0 to N with an array
}
void printArray(const int * & array)
{
    //not an array
} 
```

拉克斯万。

# concurrency - Go lang 关闭管道死锁

> ID：13810261
> 
> 赞同：2
> 
> 时间：2012-12-10T22:19:24.857
> 
> 标签：concurrency, go, deadlock, pipeline

我正在使用Go语言进行数据导入工作，我想将每个步骤编写为闭包，并使用通道进行通信，即每个步骤都是并发的。该问题可以通过以下结构来定义。

1.  从数据源 获取**小部件**
    1.  将源 1 的翻译添加到*Widgets*。
    2.  将源 2 中的翻译添加到*Widgets*。
    3.  将来源 1 的定价添加到*Widgets*。
    4.  将*WidgetRevisions*添加到*Widgets*。
        1.  将源 1 中的翻译添加到*WidgetRevisions*
        2.  将源 2 中的翻译添加到*WidgetRevisions*

出于这个问题的目的，我只处理必须在新**Widget**上执行的前三个步骤。我假设在此基础上，第四步可以作为一个管道步骤来实现，它本身是根据一个子三步管道来实现的，以控制 *WidgetRevision*s

为此，我一直在编写一小段代码来为我提供以下 API：

```
// A Pipeline is just a list of closures, and a smart 
// function to set them all off, keeping channels of
// communication between them.
p, e, d := NewPipeline()

// Add the three steps of the process
p.Add(whizWidgets)
p.Add(popWidgets)
p.Add(bangWidgets)

// Start putting things on the channel, kick off
// the pipeline, and drain the output channel
// (probably to disk, or a database somewhere)
go emit(e)
p.Execute()
drain(d) 
```

**我已经实现了它（在[Gist](https://gist.github.com/ec246b5f04f81fde11d7)或[Go Playground](http://play.golang.org/p/E-ssHvV82A)上的代码），但它以 100% 的~~成功~~失败率陷入僵局**

调用时出现僵局`p.Execute()`，因为可能其中一个通道最终无事可做，没有任何事情可以发送，也没有工作可做......

`emit()`在and中添加几行调试输出`drain()`，我看到以下输出，我相信闭包调用之间的流水线是正确的，并且我看到一些*小部件*被省略了。

```
Emitting A Widget
Input Will Be Emitted On 0x420fdc80
Emitting A Widget
Emitting A Widget
Emitting A Widget
Output Will Drain From 0x420fdcd0
Pipeline reading from 0x420fdc80 writing to 0x420fdd20
Pipeline reading from 0x420fdd20 writing to 0x420fddc0
Pipeline reading from 0x420fddc0 writing to 0x42157000 
```

以下是我对这种方法的一些了解：

*   我相信这种设计“饿死”一个或另一个协程并不少见，我相信这就是死锁的原因
*   我希望管道首先将东西输入其中（API将实现`Pipeline.Process(*Widget)`
    *   如果我能做到这一点，排水管可能是一个“步骤”，它没有将任何东西传递给下一个函数，这可能是一个更干净的 API
*   我知道我没有实现任何类型的梯级缓冲区，所以我完全有可能只是让机器的可用内存过载
*   我真的不相信这是好的 Go 风格......但它似乎利用了很多 Go 功能，但这并不是真正的好处
*   由于 WidgetRevisions 也需要管道，我想让我的管道更通用，也许`interface{}`类型是解决方案，我不太了解 Go 以确定这是否明智。
*   有人建议我考虑实现一个互斥锁来防止竞争条件，但我相信我会保存，因为闭包每个都将在 Widget 结构的一个特定单元上运行，但是我很乐意接受有关该主题的教育.

**总结：**我该如何修复这个代码，我*应该*修复这个代码，如果你是一个比我更有经验的围棋程序员，你会如何解决这个“顺序工作单元”问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:43:10.083

我只是不认为我会构建远离渠道的抽象。显式管道。

你可以很容易地为所有实际的管道操作创建一个函数，看起来像这样：

```
type StageMangler func(*Widget)

func stage(f StageMangler, chi <-chan *Widget, cho chan<- *Widget) {
    for widget := range chi {
                f(widget)
                cho <- widget
    }
    close(cho)
} 
```

然后你可以传入`func(w *Widget) { w.Whiz = true}`或类似的阶段构建器。

那时您`add`可以收集这些及其工人数量，因此特定阶段可以更轻松地拥有*n 个工人。*

我只是不确定这是否比直接拼接通道更容易，除非您在运行时构建这些管道。

# wordpress - 更新 wordpress img 网址

> ID：13810264
> 
> 赞同：0
> 
> 时间：2012-12-10T22:19:31.977
> 
> 标签：wordpress, url, image, src

我最近将一个 wp 站点移植到一个新主机，我通过导出数据库然后将其更新到新主机来做到这一点，这一切都很容易遇到，但我遇到的主要问题是 img src url`/`为它们添加了额外的.

它们应该看起来像：

```
http://mydomain.com/wp-content/uploads/2012/04/0007_cloud.png 
```

而是像：

```
http://mydomain.com//wp-content/uploads/2012/04/0007_cloud.png 
```

有没有办法可以批量修复这些损坏的网址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:22:43.617

是的，您可以使用“[搜索和替换工具](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)”。它将安全地替换数据库中的所有字符串。

# c++ - 声明一个变量？

> ID：13810266
> 
> 赞同：1
> 
> 时间：2012-12-10T22:19:38.840
> 
> 标签：c++

什么类型`it`？它说我需要声明它。

记录阵列是：`std::vector<std::pair<int, QString> > recordingArray;`

```
string line = "";
auto it = recordingArray.begin();

while(it != recordingArray.end())
{
  line.append(*it);
  line.append(',');
} 
```

此外，它不是自动类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T22:21:45.453

类型是`std::vector<std::pair<int, QString> >::iterator`，编译器应该能够弄清楚。如果这不适用于`auto`，则需要在编译器中启用 C++11 支持，例如`-std=c++0x`在 g++ 和 clang 中。`auto`（从 C++03 变为 C++11的含义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:23:13.663

这将是一个`std::vector<*TheTypeInArray*>::iterator`. 所以你可以声明它或者启用 c++11 支持，这样你就可以使用`auto`.

# javascript - 具有属性的对象与 JavaScript 中的 OR

> ID：13810273
> 
> 赞同：1
> 
> 时间：2012-12-10T22:19:59.290
> 
> 标签：javascript, jquery, raphael, qtip2

我在使用 javascript OR 运算符时遇到问题。看看下面的代码：

```
$(trail1.node,circle1.node,text1.node).qtip({
            content: {
                text: 'this is a test',
                title: {text: 'test', button: 'close'}
            },
            position: {
                target: 'mouse'
            },
}); 
```

在此示例中，.qtip 仅适用于第一个变量，我希望它适用于 trail1、circle1 和 text1。如果需要这些知识，那么`s wrong? I`使用 RaphaelJS 和 qtip2 的方法是什么 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:24:03.087

您拥有的是*逗号运算符*，而不是逻辑 OR 运算符。逗号运算符始终返回列表中最后一个表达式的结果。

假设这些是 DOM 元素，您可以将它们传递到一个数组中。

```
$([trail1.node,circle1.node,text1.node]).qtip(... 
```

* * *

如果他们引用选择器字符串，您将构建一个逗号分隔的字符串。您仍然可以为此使用 Array `.join()`。

```
$([trail1.node,circle1.node,text1.node].join()).qtip(... 
```

这将创建一个逗号分隔的选择器列表，从而形成一个“多重选择器”。

# objective-c - XCode 中是否有一种好方法可以跨项目重用类并轻松与其他开发人员共享？

> ID：13810275
> 
> 赞同：2
> 
> 时间：2012-12-10T22:20:05.627
> 
> 标签：objective-c, ios, xcode, static-libraries

我有一个我创建的库，我想在几个不同的项目中使用包含的类，同时独立维护库代码。我还希望能够轻松地与其他开发人员共享它并让他们轻松实现它。**此时它不需要是静态库。**

最好的方法是什么？我见过其他开发人员将他们的课程放在一个全新的`XCode`项目中然后导入，但最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:39:50.710

我认为最好的做法是创建一个带有静态库目标的项目。其他开发人员可以将其作为子项目包含在他们的项目中。

第二好的方法是简单地创建一个可以根据需要包含在项目中的源文件目录。这对于特定项目可能不需要全部的通用实用程序代码很有用。

在这两种情况下，库代码都应该属于自己的 git 存储库，并作为 git 子模块包含在项目中。

如果它会成为一个静态库，最好现在就让它成为一个，而不是等到它“准备好”；当您决定切换它时，一些项目已经在使用它，并且将它们中的每一个都转换为使用它会很痛苦。从一开始就以正确的方式去做。

如果您想分发没有源代码的库，您将需要使用 lipo 构建一个包含 ARM 和 x86 代码的通用库。不幸的是，Xcode 并没有让这一切变得尽可能简单，但是使用一些轻量级的 shell 脚本并不太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:25:35.707

据我所知，您应该创建一个新项目并将该项目添加到您想要使用库的任何其他项目。然后链接这些项目，您就可以访问它。我也做了另一种方式，将库类直接复制到新项目并通过导入所需的类来访问库。就我而言，我发现创建一个项目并将其与新项目链接是最简单的。虽然复制类并不是我们在使用 cocos2d 等外部​​库时都会做的事情。至于与他人分享，只需将其上传到您选择的另一个地方的 github，以便其他开发人员使用它。我希望这对你有帮助.t

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:25:49.467

我不知道代码有多成熟，但是由于您特别提到要与其他开发人员共享它，您可能想研究[一下 CocoaPods](http://cocoapods.org)。

# maven - 获取 Ivy 的最新 google drive api

> ID：13810277
> 
> 赞同：1
> 
> 时间：2012-12-10T22:20:21.927
> 
> 标签：maven, google-drive-api, ivy, google-api-java-client

我已将解析器添加到 ivysettings.xml

```
 <ibiblio name="google-api-services" root="http://mavenrepo.google-api-java-client.googlecode.com/hg" m2compatible="true" /> 
```

但是得到一个错误

```
 module not found: com.google.apis#google-api-services-drive;v2-rev13-1.8.0-beta 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:20:44.003

它对我来说很好解决.....也许你的ivysettings文件有问题？

以下示例配置 google api services repo 和 Maven Central。

```
<ivysettings>
    <settings defaultResolver="repos" />
    <resolvers>
        <chain name="repos">
            <ibiblio name="central" m2compatible="true"/>   
            <ibiblio name="google-api-services" m2compatible="true" root="http://mavenrepo.google-api-java-client.googlecode.com/hg"/>
        </chain>
    </resolvers>
</ivysettings> 
```

# debugging - 我的 SSRS 报告在“报告管理器”视图中引发此错误的可能原因是什么？

> ID：13810282
> 
> 赞同：0
> 
> 时间：2012-12-10T22:20:37.687
> 
> 标签：debugging, error-handling, reporting-services

几天前我的报告工作得很好，我不记得有任何改变..

但是，当我在“报告管理器”视图中运行报告时，我现在遇到了这个错误。

```
An error has occurred during report processing. (rsProcessingAborted)
Query execution failed for dataset 'DataSet1'. (rsErrorExecutingCommand)
For more information about this error navigate to the report server on the local server machine, or enable remote errors 
```

编辑：

好的，所以我确实尝试了 SSMS 中的 SPROC，如下所示：

```
exec prc_RPT_Quota_Info 17221 
```

它返回正确的结果：

```
SurveyNumber    ID  HoursRemaining  FieldHours  FEDSurveyName   FieldEndDate    FieldBeginDate  SurveyStatusName    ProjectName ProjectManager  ClientName
17221   16226   -2195.75    NULL    j41881 - Burial Preferences Survey - States 2012-09-10 06:00:00.000 NULL    Complete    41881 Gibbs & Soell - Burial Preferences Survey Peter Gallagher BCC Public Affairs & Policy 
```

有小费吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T00:18:30.343

Plainly, Dataset1's query isn't working. Firstly, check that the `Stored Procedure` radio button is selected in the Dataset Properties.

Running SQL Profiler and seeing what SQL is hitting the server might help.

Given that you have copied the query into SQL Server Management Studio and it works, it sounds like a permissions issue - that is, running it in SSMS under your account works, but it isn't working when the Reorting Services server runs it under its account.

Check the permissions of the Stored Procedure to see if the SSRS server account has the right permissions to execute the stored proc.

# glsl - texture3d 生成 GL_INVALID_OPERATION

> ID：13810284
> 
> 赞同：1
> 
> 时间：2012-12-10T22:20:43.313
> 
> 标签：glsl

我的 glsl 着色器有一个奇怪的问题。它不呈现任何内容（例如黑屏）并使我的 glDrawElements 投射 GL_INVALID_OPERATION。正在使用的着色器如下所示。当我用*v = texture3D(texVol,pos).r;注释掉该行时* 并将其替换为*v = 0.4;* 它输出预期的内容（类似橙色的颜色）并且不会产生 gl 错误。

```
uniform sampler2D texBack;
uniform sampler3D texVol;
uniform vec3 texSize;
uniform vec2 winSize;
uniform float iso;

varying vec3 inCoords;

vec4 raytrace(in vec3 entryPoint,in vec3 exitPoint){
    vec3 dir = exitPoint - entryPoint;
    vec3 pos = entryPoint;
    vec4 color = vec4(0.0,0.0,0.0,0.0);
    int steps = int(2.0*length(texSize));
    dir = dir * (1.0/steps);
    vec3 n;
    float v,m=0.0,avg=0.0,avg2=0.0;
    for(int i = 0;i<steps || i < 2500;i++){
        v = texture3D(texVol,pos).r;
        m = max(v,m);
        avg += v;
        pos += dir;
    }
    return vec4(avg/steps,m,0,1);
}

void main()
{
    vec2 texCoord = gl_FragCoord.xy/winSize;
    vec3 exitPoint = texture2D(texBack,texCoord).xyz;
    gl_FragColor = raytrace(inCoords,exitPoint);
} 
```

我正在使用 VBO 将颜色立方体渲染为光线的入口和存在点。它们存储在 FBO 中，当我将它们直接渲染到屏幕上时它们看起来还不错。我尝试更改为 glBegin/glEnd 并用四边形绘制立方体，然后我得到了同样的错误。我找不到我做错了什么，现在我需要你的帮助。为什么我的 texture3D 会生成 GL_INVALID_OPERATION？

注意：我启用了 2d 和 3d 纹理。

**编辑：**

*   我刚刚将整个项目上传到 github。浏览更多代码[https://github.com/r-englund/rGraphicsLibrary](https://github.com/r-englund/rGraphicsLibrary)
*   这是在 Intel HD 3000 和 Nvidia GT550m 上测试的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T12:13:49.097

根据 OpenGL 规范 glDrawElements() 在以下情况下生成 GL_INVALID_OPERATION：

1.  如果几何着色器处于活动状态并且模式与当前安装的程序对象中几何着色器的输入基元类型不兼容。

2.  如果非零缓冲区对象名称绑定到启用的数组或元素数组，并且缓冲区对象的数据存储当前已映射。

这意味着问题与您的片段着色器无关。如果您不使用几何着色器，则应相应地修复缓冲区对象。

**看起来您没有在问题中提供其他相关信息。**

# mysql - MySql 自定义列的总和

> ID：13810286
> 
> 赞同：0
> 
> 时间：2012-12-10T22:20:53.350
> 
> 标签：mysql

我有一个查询，我在其中创建自定义列名。在**同**一张表的末尾，我想要一个将这些自定义列的所有条目相加的行。例如我有：

```
SELECT ... IFNULL(bl.amount, '---') AS BudgetAmount, 
    IFNULL((bl.amount *1) - ( + bal1.amount ), '---') AS Difference 
FROM... 
```

我想要一个包含 BudgetAmount 和 Difference 列之和的列。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:47:54.500

我认为你可以使用这个：

```
SELECT ... IFNULL(bl.amount, '---') AS BudgetAmount, 
    IFNULL((bl.amount *1) - ( + bal1.amount ), '---') AS Difference,
    IFNULL(bl.amount, 0) + IFNULL((bl.amount *1) - ( + bal1.amount ), 0) AS NewCol
FROM... 
```

或者你可以解释更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:13:20.710

这听起来像是应用程序端总结的一个很好的候选者。但是，如果您真的只想在 MySQL 中执行此操作，我认为基本上有三个选项。

1.  写一个存储过程。
2.  正如其他人所建议的`UNION`那样，这需要在一个语句中两次放置基本相同的子查询。
3.  试试`GROUP BY ... WITH ROLLUP` [语法](http://dev.mysql.com/doc/refman/5.5/en/group-by-modifiers.html)。我假设您有一个包含在 中的唯一键`SELECT`，例如`someUniqueID`. 您需要根据该 ID 进行分组（因此每个组中只有一行），然后使用汇总子句追加附加行。ID 列将`NULL`位于汇总行中。

该语句将如下所示，具体取决于您的完整查询和表结构：

```
SELECT someUniqueID, ... , IFNULL(SUM(bl.amount), '---') AS BudgetAmount, 
    IFNULL( SUM( (bl.amount *1) - ( + bal1.amount ) ), '---') AS Difference 
FROM ...
GROUP BY someUniqueID
WITH ROLLUP 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T23:08:57.800

一种简单的方法是将原始查询用作内联视图，并使用内联视图作为行源编写 SELECT 语句。（用 MySQL 的说法，内联视图称为*派生表*）：

```
SELECT v.BudgetAmount
     , v.Difference
     , v.BudgetAmount + v.Difference AS Total
  FROM (
         -- original query here
         SELECT ... IFNULL(bl.amount, '---') AS BudgetAmount, 
                IFNULL((bl.amount *1) - ( + bal1.amount ), '---') AS Difference 
           FROM...
       ) v 
```

与其他关系数据库系统不同，MySQL 实际上会强制实现内联视图（即执行内联视图中的查询并将结果存储为 MyISAM 表），这会影响性能。

但这是一种可以引用列别名以在其他表达式中使用的方式。

（分配给列的别名不能在分配它们的 SELECT 列表中引用......它们只能在查询的 HAVING 和 ORDER BY 子句中引用。）

要在单个查询中将这些列的值添加到另一列中，您不能引用别名，您必须重复表达式，如下所示：

```
SELECT expr1          AS BudgetAmount
     , expr2          AS Difference
     , expr1 + expr2  AS Total 
  FROM ... 
```

要引用别名，它们需要来自查询引用的行源，例如内联视图：

```
SELECT v.BudgetAmount
     , v.Difference
     , v.foo
     , v.BudgetAmount + v.Difference AS Total
  FROM (  SELECT expr1 AS BudgetAmount
               , expr2 AS Difference
               , foo
            FROM ...
       ) v 
```

我不确定这是否是您想听到的答案，但事实就是这样。

* * *

**编辑：**

我误解了你在问什么。您的问题是：“我想要一个总和为...的列”。我认为这意味着您想要一个返回相同行数的查询，而不是您想要在结果集中附加一个额外的 ROW。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T22:23:52.897

听起来您应该在应用程序端执行此操作。但是您可以`UNION ALL`在最后使用来堆叠“所有条目的总和”。只要确保你的列是对齐的。

```
SELECT amount, balance
FROM table
UNION ALL
SELECT IFNULL(SUM(amount), '---') AS BudgetAmount, 
    IFNULL(SUM(...)) AS Difference
FROM table 
```

# java - 旧 Android 版本中的 ICS Spinner（“下拉”而不是对话框）

> ID：13810289
> 
> 赞同：6
> 
> 时间：2012-12-10T22:21:00.350
> 
> 标签：java, android, view, spinner, actionbarsherlock

我正在尝试模仿新的 Ice Cream Sandwhich 版本的微调器，它看起来更像是一个下拉列表，而不是一个弹出对话框。[请参阅此链接](http://developer.android.com/design/building-blocks/spinners.html)以了解我在说什么。我阅读了一些帖子，说明使用 ActionBarSherlock 来获得所需的效果。但是，这是为仅在操作栏中使用而创建的，那么，如何将 ICS Spinner 从操作栏中取出？

[这里有一个很好的答案，](https://stackoverflow.com/questions/10323471/dropdown-spinner-outside-of-actionbar-icecream-sandwich-style-w-actionbarsher)但是，我觉得这有点矫枉过正？有没有更简单的方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T22:21:00.350

首先，我参考[了这个链接](https://meta.stackexchange.com/questions/17463/can-i-answer-my-own-questions-even-those-where-i-knew-the-answer-before-asking)是否应该回答我自己的问题。我觉得这对面临类似问题的人非常有用，所以如果这不适合本网站的礼仪，我深表歉意（回答您自己的问题）。

现在，我偶然发现试图找到解决这个问题的方法，并且通过反复试验我成功了。因此，一旦您在项目中下载并设置了 ActionBarSherlock SDK，请创建包含微调器的布局：

```
 <com.actionbarsherlock.internal.widget.IcsSpinner
            android:id="@+id/spinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/title"
            android:layout_margin="10sp"
            android:layout_centerHorizontal="true"
            android:textSize="18sp" /> 
```

上面的代码将使用 ActionBarSherlock 库中的 ICS 版本的微调器。接下来，在您的 Activity 中声明并实例化（使用强制转换）微调器对象。但请注意，您不使用普通的 Spinner 类，而是使用 ActionBarSherlock 库中的 IcsSpinner 类：

```
IcsSpinner spinner = (IcsSpinner)findViewById(R.id.spinner); 
```

现在，您可以像创建普通 Spinner 一样创建适配器，如下所示：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.spinner_item, elements);
spinner.setAdapter(adapter); 
```

最后，您需要设置`onItemSelectedListener`. 这里唯一的主要区别是您使用`IcsAdapterView.OnItemSelectedListener`而不仅仅是`OnItemSelectedListener`：

```
spinner.setOnItemSelectedListener(new IcsAdapterView.OnItemSelectedListener(){
    @Override
    public void onItemSelected(IcsAdapterView<?> parent, View view, int position, long id){
    }
    @Override
    public void onNothingSelected(IcsAdapterView<?> parent){
    }
}); 
```

就是这样。与仅使用微调器对象并没有太大区别。尽管很简单，但我花了一段时间才弄清楚，所以，我希望这对某人有用。

哦，是的，别忘了使用 ActionBarSherlock 主题，就像这样（在清单中）：

```
android:theme="@style/Theme.Sherlock" 
```

# java - 查找给定排序数组中的任何两个数字是否与数组中的任何第三个数字相加的最有效方法是什么？

> ID：13810291
> 
> 赞同：2
> 
> 时间：2012-12-10T22:21:03.497
> 
> 标签：java, algorithm

这是我在某处看到的一个面试问题并提出了这个问题：

```
import java.util.Random;
import java.util.Arrays;
class SumTwo
{
    public static void main(String arg[])
    {
        Random r=new Random();

        int arr[]=new int[5];
        for(int i=0;i<arr.length;i++)
        {
            arr[i]=r.nextInt(20);
        }
        Arrays.sort(arr);
        printArr(arr);
        System.out.println(checkSum(arr));

    }

    public static boolean checkSum(int[] arr)
    {
        for(int i=2;i<arr.length;i++)
        {
            if(check(arr,0,i-1,arr[i]))
                return true;
        }
        return false;
    }

    public static boolean check(int[] arr, int st, int en, int sum)
    {

        int add=0;
        while(st<en)
        {
            add=arr[st]+arr[en];
            if(add==sum)
                return true;
            else if(add>sum)
                en--;
            else
                st++;
        }
        return false;
    }

    public static void printArr(int[] arr)
    {
        System.out.println("\n");
        for(int i=0;i<arr.length;i++)
            System.out.print(" "+arr[i]);
        System.out.println("\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:34:22.413

好吧，你的是 O(n^3)。（编辑：我看错了，你是对的，你的是 O(n^2)）就像 Louis Wasserman 说的那样，有一个简单的 O(n^2 log n) 算法，这是一个 O(n^2) 使用的算法一点额外的记忆：

```
public static boolean checkSum(int[] arr) {
    HashSet<Integer> set = new HashSet<Integer>();
    for (int n : arr) {
        set.add(n);
    }

    for (int i = 0; i < arr.length; i++) {
        for (int j = i + 1; j < arr.length; j++) {
            if (set.contains(arr[i] + arr[j])) return true;
        }
    }
    return false;
} 
```

可能需要包含零的数组的特殊情况，具体取决于问题定义，但想法就在那里。

直观地说，似乎有一种聪明的方法可以做到这一点，即 O(n log n) 左右，但我无法立即找到任何方法。我会继续思考更多，这是一个很好的问题。

# java - 使用多个类方法和字符串数组编写代码

> ID：13810292
> 
> 赞同：-1
> 
> 时间：2012-12-10T22:21:11.443
> 
> 标签：java, arrays, string, class, methods

所以我要做的是创建一个使用用户输入列出音乐艺术家姓名的代码。它必须有多个课程，所以我将有一个主要课程，以及每十年音乐的课程。

```
Music.java

six.java

seven.java

eight.java 
```

在这些类中，我需要创建包含艺术家姓名的字符串数组，并且能够在出现提示后生成整个列表。

为了更好地了解代码将如何运行，它将类似于：

选择十年的音乐：

*   70 年代

选择音乐类型：

*   岩石

选择有：滚石、会说话的头像等。

这就是我需要做的所有事情，但我一直坚持在主类“music.java”中放置什么以使其读取其他类以及如何编写十年类。

我知道我在这里没有什么可以为你们提供的，但我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:39:03.823

一般来说，你需要一个粗略形式的类：

```
 public class Artist
 {
    public int decade

    public string genre
 } 
```

然后一些代码来使用它：

... 用于检索艺术家对象的某种集合（例如数组或列表）的代码（您需要通过从数据库中检索艺术家数据来完成此操作）

...代码来遍历集合来做你想做的事：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:36:15.737

我只会有一个名为的类`Band`和一个用于所有乐队的容器类`BandRegister`。Band 将持有一个`Set`代表十年的值，这些值使用以下方法相加`associateWithDecate(int decade)`：

班级乐队注册：

```
Map<Integer, Set<Band>) decadeMap = new HahMap...

public addBand(band);
{
//define logic for adding the decade and band to decadeMap
} 
```

班级乐队：

```
Set<Integer> decades = ...

public associateWithDecate(int decade)
{
//add decade to decades if not already included
} 
```

在主要：

```
 BandRegister breg = new BandRegister();

        Band stones = new Band("Rolling Stones");
        stones.associateWithDecate(60);
        stones.associateWithDecate(70);
        stones.associateWithDecate(70);
        stones.associateWithDecate(90);
        stones.associateWithDecate(0);
        stones.associateWithDecate(10);
breg.addband(stones); 
```

这样，您可以获得每个乐队的十年列表，并且在注册表中您可以获得每个十年的乐队列表

# mobile-safari - 如何在移动网页顶部制作标准的应用商店链接，类似于 youtube 等其他网站

> ID：13810293
> 
> 赞同：8
> 
> 时间：2012-12-10T22:21:13.560
> 
> 标签：mobile-safari

当您在 iphone 的 safari 上浏览 youtube、decision 和许多其他网站时，他们的移动网络会在页面顶部显示一个指向其应用程序的链接，并带有 x 按钮以关闭和应用程序的状态（例如，如果它已经安装打开按钮而不是安装）。

这对于许多网站来说看起来很标准。是否有这些代码的脚本，我可以为我的移动网站链接复制到应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T15:07:08.293

您只需将此元标记（并相应填写相关详细信息）添加到您希望它显示的移动网站页面的头部：

`<meta name="apple-itunes-app" content="app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL">`

Apple 的开发者网站上有文档[http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)

请注意，这是一个 iOS6+ 功能。

# c# - 如何在 .NET / C# 中设置 TripleDES 密钥

> ID：13810298
> 
> 赞同：1
> 
> 时间：2012-12-10T22:21:33.810
> 
> 标签：c#, encryption, cryptography, des, tripledes

我正在使用`TripleDES`C# 并根据[MSDN 条目](http://msdn.microsoft.com/en-us/library/system.security.cryptography.tripledes.aspx)，`TripleDES`可以使用两个或三个 56 位密钥并使用 DES 的三个迭代。但是，我不知道如何指定要使用多少个键，以及这些键是什么。事实上，我能找到的所有示例都显示`TripleDES.CreateEncryptor()`使用一个键或没有键调用。此外，`TripleDES`该类只有一个`Key`属性。

如何为 指定第二个和第三个键`TripleDES`？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:56:22.290

如果您查看[Key](http://msdn.microsoft.com/en-us/library/system.security.cryptography.tripledes.key.aspx)属性，您会看到：“此算法支持从 128 位到 192 位的密钥长度，以 64 位为增量。”。

如果您需要 2 键 TripleDES，请将密钥设置为 16 字节密钥。如果您想要 3 键 TripleDES，请将其设置为 24 字节的键。有关更多信息，请参阅[此帖子](https://stackoverflow.com/questions/5632211/3des-key-size-matter-in-c-net)

维基[百科条目](http://en.wikipedia.org/wiki/Triple_DES#Keying_options)，列出了不同的键控选项。

原因是存在[中间相遇攻击](http://en.wikipedia.org/wiki/Meet-in-the-middle_attack)，而 2-key TripleDES 让您在只使用两个密钥的情况下避免攻击。不幸的是，还有其他攻击，因此 NIST 认为其强度约为 80 位安全性。3-key TripleDES 也很脆弱，只有 112 位的有效强度。

如果您有选择，您应该更喜欢 AES 而不是 TripleDES。

# .net - 将文本文件转换为 UTF16 的 VB 代码

> ID：13810300
> 
> 赞同：1
> 
> 时间：2012-12-10T22:21:37.810
> 
> 标签：.net, vb.net, unicode, utf-16

我是 VB 代码的新手，并且在编码、解码的东西上苦苦挣扎。我需要在 VB.NET 中将文本文件从 ANSI 转换为 UTF-16LE 的帮助。这是我到目前为止所做的。后来我使用 BulkInsert 进行数据库操作并最终得到垃圾数据，例如

> ∩┐╜000000000000000000000094409574896680&∩┐╜</p>

这应该是

> Ì095837491150000349192784421039109162%Î

仅供参考，数据库列是 NVARCHAR。

```
Dim sr As System.IO.StreamReader = New System.IO.StreamReader(filePath, System.Text.Encoding.Default)
Dim sw As System.IO.StreamWriter = New StreamWriter(pPath & pFilename & "_TEMP", True, System.Text.Encoding.Unicode)
    While Not sr.EndOfStream
                sw.writeLine(sr.readLine)
    End While
sr.Close()
sw.Close() 
```

有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:28:05.940

您可以使用`ReadAllText`和`WriteAllText`方法：

```
System.IO.File.WriteAllText(dest, File.ReadAllText(source, Encoding.Default), Encoding.Unicode) 
```

# objective-c - iOS - 第一个应用程序问题

> ID：13810309
> 
> 赞同：2
> 
> 时间：2012-12-10T22:22:30.817
> 
> 标签：objective-c, ios

我是 iOS 开发的新手，正在开发我的第一个 iPhone 应用程序，后来想将其转换为 iPad，使其成为通用应用程序。我有几个问题：

一种。最好从通用开始还是无关紧要？转换为通用应用程序有多难？为了测试，我尝试在 xode 4.2 上为 iPhone 和 iPad 添加一个新的视图控制器，看起来选择“Targeted for iPad”不包括 iPhone 特定的视图控制器，取消选中它不包括 iPad 的视图控制器。如果我想从头开始通过通用路线，我将如何添加对这两种设备的支持？

湾。我的目标是 iOS 4 及更高版本以及 iPhone 的所有版本，包括 5 和 iPad，包括 mini。我在应用程序中有几个 png 文件，用于按钮以及其他 Apple 所需的 png 文件。我找不到支持 iPhone 5 时需要做什么的文档，因为它有一个 4 英寸的屏幕。此外，由于屏幕空间更大，图像是否也为 iPad 单独完成？有人可以解释或指出一些可以教育我的链接吗？

C。我没有使用 Storyboard，但想使用 ARC。运行 iOS 4.0 的设备是否也支持 ARC？

d。在开发我的应用程序时，我想开始并准备好注册、配置和其他必需的过程。有人可以解释一下我现在应该做什么以节省时间的先决条件吗？

e. 我有一部 iPhone 4S，可能会升级到下一部 iPhone（iPhone 5 之后）。当我现在配置我的 4S 时，我是否可以轻松地将开发者许可证转移到我的下一部 iPhone 或必须重新购买开发者许可证？

F。有没有一个好的网站可以引导我从头开始创建启动图像、聚光灯、iTunes 图标等？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:54:11.483

据我所知，以下是答案：

一种。如果您在这个项目上工作的时间太长，请创建一个新的通用项目，然后将您的代码复制到其中。

湾。您可以使用任何图像格式。xcode 可以接受大多数格式。是的，您必须为 iPad 和 iPhone 提供不同的图像。我会为 iPad 创建一些图像，它会为 iPad mini 调整大小。iPhone 5 和 4s 也是如此。

C. ARC 是在 iOS 5 中引入的，因此可能不适用于 iOS 4。

D. 据我所知，除了向苹果收取 99 美元的费用外，没有特殊要求。

E. 当你拿到你的 iPhone 5 时，只需将它连接到 xcode，它就会为你将你的配置文件重新加载到手机上。

F. Apple 开发人员计划提供大量技术文档以及许多示例应用程序或相同的原因。访问苹果上的开发者网站，你会惊讶于你可以从这些文档中学到多少东西。我们都经历过这一切。:)

希望以上回答对我的朋友有所帮助。

# java - 字段不为空时抛出空指针异常

> ID：13810313
> 
> 赞同：0
> 
> 时间：2012-12-10T22:22:44.480
> 
> 标签：java, nullpointerexception

您好，我已经创建了一个包含多个按钮的应用程序。但是当我按下一个按钮时，我得到了 NullPointerException。这里奇怪的是没有什么是空的（ null ）

这是一个代码示例

```
public class MuseumPanel extends JPanel implements ActionListener {

private JTextField kaartnummer;
private JTextField uur, minuut;
private JButton aankomst, vertrek, overzicht, sluiting;

private int hour;
private int minute;
private final int REFRESH = 1000;

MuseumRegistratie museum;

public MuseumPanel(MuseumRegistratie museum) {
    // zorg ervoor dat de huidige tijd wordt opgehaald.
    javax.swing.Timer timer = new javax.swing.Timer(REFRESH, this);
    timer.start();

    kaartnummer = new JTextField(15);
    uur = new JTextField(2);
    minuut = new JTextField(2);
    aankomst = new JButton("Komt binnen");
    aankomst.addActionListener(this);
    vertrek = new JButton("Vertrekt");
    vertrek.addActionListener(this);
    overzicht = new JButton("aantal aanwezig");
    overzicht.addActionListener(this);
    sluiting = new JButton("sluiting");
    sluiting.addActionListener(this);

    add(new JLabel("Kaartnummer"));
    add(kaartnummer);
    add(new JLabel("tijdstip van aankomst of vertrek "));
    add(uur);
    add(new JLabel(" uur en "));
    add(minuut);
    add(new JLabel(" minuten"));
    add(aankomst);
    add(vertrek);
    add(overzicht);
    add(sluiting);
}

@Override
public void actionPerformed(ActionEvent e) {
    Calendar now = Calendar.getInstance();
    hour = now.get(Calendar.HOUR_OF_DAY);
    minute = now.get(Calendar.MINUTE);

    uur.setText("" + hour);
    minuut.setText("" + minute);

    // aankomst
    if(e.getSource() == aankomst) {
        try {

            museum.checkIn(kaartnummer.getText(), hour, minute);
        } catch (NullPointerException ex) {

            System.out.println("cardnumber: " + kaartnummer.getText() + " hour " + hour + " minute " + minute);
        }
    }
    // vertrek
    if(e.getSource() == vertrek) {
        museum.checkOut(kaartnummer.getText(), hour, minute);
    }
    // overzicht
    if(e.getSource() == overzicht) {
        museum.getAantalAanwezig();
    }
    // sluiting
    if(e.getSource() == sluiting) {
        museum.sluitRegistratie();
    }
}
} 
```

例如，当按下此按钮时，我正确地得到了每个变量的异常。有谁知道这是如何出现的以及如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:24:56.563

如果没有更多信息，我会假设博物馆对象为 null，这会在您尝试调用 museum.checkIn 时触发 nullpointerexception。

看代码博物馆绝对是空的。在构造函数中，您应该包括：

```
this.museum = museum; 
```

假设您传入的博物馆对象不为空，那么其他一切都应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:34:47.633

你似乎没有`museum`在你的构造函数中赋值，但是你在很多地方取消引用它。你想这样做：

```
this.museum = museum; 
```

在你的构造函数的某个地方。或者，重命名变量，以免您不小心这样做`museum = museum`，这将没有效果。

# objective-c - UIView 动画不适用于 addSubview

> ID：13810315
> 
> 赞同：2
> 
> 时间：2012-12-10T22:22:52.860
> 
> 标签：objective-c, ipad, cocoa-touch, ios6, uiviewanimation

我有一个 iPad 应用程序，它显示一个`UILabel`带有文本的“注释”（子类）。为了导航到下一个笔记，我希望它从屏幕上向左滑动，同时让下一个从右侧滑入。我可以让任一动画工作，但不能同时工作。

这是我的控制器中的代码：

```
- (void)slideOutLeft {
    // create the new note
    flSlidingNote *newNote = [[flSlidingNote alloc] init];
    newNote.text = @"blah blah";
    CGRect newFrame = CGRectMake(1000, 70, 637, 297); // off the right
    newNote.frame = newFrame;
    [self.view addSubview:newNote];

    // slide off the current one
    CGRect currentFrameEnd = noteLabel.frame; // noteLabel is the existing note
    currentFrameEnd.origin.x = 0 - noteLabel.frame.size.width; // off the left

    [UIView animateWithDuration:1.0 animations:^{
        noteLabel.frame = currentFrameEnd;
    } completion:nil];
} 
```

`noteLabel`根本没有动画。如果我注释掉它的`addSubview:newNote`部分。我在这方面还是比较新的，所以它可能只是一些简单的事情。

无论是否`newNote`动画（代码片段中没有动画），都会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:45:59.050

You want to put the animation for *both* your views and the addSubview call for your new view in one animation block, like so:

```
 // layout the new label like the old, but 300px offscreen right 
  UILabel * newNote = [[UILabel alloc] initWithFrame:CGRectOffset(self.noteLabelView.frame, 300, 0)];
  newNote.text = @"NEW NOTE";

 [UIView animateWithDuration:2.0f
                       delay:0
                     options:UIViewAnimationCurveEaseInOut
                  animations:^{
                     // animate the old label left 300px to offscreen left
                     self.noteLabelView.center = CGPointMake(self.noteLabelView.center.x-300, self.noteLabelView.center.y);
                     // add the new label to the view hierarchy
                     [self.view addSubview:newNote];
                     // animate the new label left 300px into the old one's spot
                    newNote.center = CGPointMake(newNote.center.x-300, newNote.center.y);
                  }
                  completion:^(BOOL finished) {
                    // remove the old label from the view hierarchy
                    [self.noteLabelView removeFromSuperview];
                    // set the property to point to the new label
                    self.noteLabelView = newNote;
               }]; 
```

In this snippet above, I'm assuming the old label is addressable via the property `self.noteLabelView`.

(Also have a look at [https://github.com/algal/SlidingNotes](https://github.com/algal/SlidingNotes) , though I can't promise that will stay there long so maybe SO isn't the right format for such a link? )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T13:50:37.447

Adding to what Gabriele Petronella commented, here is a good resource on KeyFrames and AnimationGroup, with a sample GitHub project linked:

[http://blog.corywiles.com/using-caanimationgroup-for-view-animations](http://blog.corywiles.com/using-caanimationgroup-for-view-animations)

This really helped me understand animations better.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T22:50:44.813

不确定，但我见过其他代码循环遍历子视图并执行动画，您可能想尝试以下操作：

```
for(UIView *view in self.subviews)
{
    // perform animations 
} 
```

# node.js - 应用更新选项而不保存预验证 - mongoosejs

> ID：13810317
> 
> 赞同：0
> 
> 时间：2012-12-10T22:22:57.070
> 
> 标签：node.js, mongodb, mongoose

在任何*web 应用程序*中，我按下加号按钮，就会增加一个值。当我快速按下按钮时，验证不起作用，导致验证不会阻止（例外行为，值不在验证范围之外）。但是该值将被进一步设置，因为其余的请求将被提交。

**重要提示：**更新`options`是动态的（例如`$inc`或`$set`）。

### 当前代码

```
module.model.update({ _id: id }, options /* are dynamic */, { safe: true }, function (err, updatedDocument) {
    if (err) return respond(400, err);

    module.model.findOne({ _id: id }, function (err, foundDocument) {
        if (err) return respond(400, err);

        foundDocument.validate(function (err) {
            if (err) return respond(400, err);

            return respond(200, foundDocument); // callback method
        });
    });
}); 
```

### 第一次猜测以防止出现问题

```
module.model.findOne({ _id: id }, function (err, foundDocument) {

    foundDocument.set(options);

    foundDocument.validate(function (err) {
        if (err) return respond(400, err);

        foundDocument.save(function (err, savedDocument) {
            if (err) return respond(400, err);

            return respond(200, doc);
        });
    });
}); 
```

...然后在验证有效时将执行保存。

但是有一个问题：该[`set`](http://mongoosejs.com/docs/api.html#document_Document-set)方法不支持`$inc`或其他伪设置器，或者是吗？

我看到了使用[更新函数的构造函数（显示代码）](http://mongoosejs.com/docs/api.html#document_Document-update)的可能性，但我不知道如何使用它：`this.constructor.update.apply(this.constructor, args);`

你对这个问题有什么好的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:23:25.893

解决方案是为 $inc 创建一个定制版本。我所做的是替换`set`mongoosejs 的方法。

这现在是可扩展的，但在更新之前是一种安静的自定义验证方式。当有人有其他解决方案时。请张贴。

```
module.model.findOne({ _id: id }, function (err, foundDocument) {

    for(var optionsProp in options) {
        if(optionsProp === '$inc') {
            for(var incProp in options[optionsProp]) {
                foundDocument[incProp] += options[optionsProp][incProp];
            }
        }
    }

    foundDocument.validate(function (err) {
        if (err) return respond(400, err);

        foundDocument.save(function (err, savedDocument) {
            if (err) return respond(400, err);

            return respond(200, savedDocument);
        });
    });
}); 
```

# python - 如何从有效 XML 标记之外删除垃圾？

> ID：13810318
> 
> 赞同：2
> 
> 时间：2012-12-10T22:23:06.593
> 
> 标签：python, xml, perl, sed, awk

我有一系列从数据回放实用程序生成的 XML 文件。该实用程序生成正确格式的 XML 标记。不幸的是，该实用程序并不完美。它尝试序列化的一些 Java 对象失败，它们被简单地插入（作为二进制 blob）在这些其他有效的 XML 标记之间。

例如...

```
<track>
<cto>Valid_XML_HERE</cto>@Binary_Blob_of_Junk@<cto>(...)</cto>
</track> 
```

环境是 RHEL-5，这意味着可以使用 Python 2.4、Perl 或 SED/AWK 解决方案。

有关如何删除垃圾的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:37:07.857

我建立了 Birei 的建议来检查树元素，但提出了一个仅限 SED 的解决方案。如 OP 所示，`<cto>`标签恰好在一条连续线上。因此，解决方案是拆分行，使每个`<cto>`标签都在新行上——因此，也将垃圾二进制数据隔离在新行上——然后简单地选择以`<cto>`标签开头的行。

`<tracks>`and标签可以通过`</tracks>`CAT 简单地添加到新文件中。

这是我已经测试并确认可以工作的 SED 命令...

步骤 1\. 将标签隔离`<cto>`在新行上。

```
sed -i "s/<cto/\n<cto/g;s/<\/cto>/<\/cto>\n/g" ${FILE} 
```

`<cto>`步骤 2\. 仅选择以标签开头的行。

```
sed -i "/<cto/p" ${FILE} 
```

步骤 3\. 格式化新的 XML 文档。

```
xmllint --format "${FILE}" > foo.xml 
```

感谢您各自的投入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:04:43.477

使用解析器删除`track`标签文本的其他方法：`XML::Twig`

```
#!/usr/bin/env perl

use strict;
use warnings;
use XML::Twig;

my $twig = XML::Twig->new(
    twig_handlers => {
        track => sub {
            for my $t ( $_->children() ) { 
                if ( $t->is_text ) { 
                    $t->set_text( '' );
                }   
            }   
        }   
    },  
    pretty_print => 'indented',
)->parsefile( shift)->print; 
```

将您的文件作为第一个（也是唯一的）参数运行它：

```
perl script.pl xmlfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T05:28:16.020

这是一个快速的 Perl 解决方案。

```
#!/usr/bin/perl -Tw

use strict;
use warnings;
use English qw( -no_match_vars $INPUT_RECORD_SEPARATOR );

my $text = do { local $INPUT_RECORD_SEPARATOR = undef; <>; };

my @ctos = $text =~ m{<cto>( .+? )</cto>}xmsg;

if ( @ctos ) {

    printf '<track><cto>%s</cto></track>', join '</cto><cto>', @ctos;
}

print "\n"; 
```

您可以像这样通过管道传输您的曲目文本：

```
$:  cat track.txt | ./clean_track.pl 
<track><cto>Valid_XML_HERE</cto><cto>(...)</cto></track> 
```

# java - 3d 数组出了点问题

> ID：13810320
> 
> 赞同：2
> 
> 时间：2012-12-10T22:23:17.860
> 
> 标签：java, tic-tac-toe

我有一个代表井字游戏的二维数组。空框只是 "" ；我当前的游戏板保存在 ar1 中，它是 2d 字符串数组。我想制作一个游戏板数组，它是 2d 数组 = 3d 数组的数组。所以我想它会是这样的：

```
String[][][]ar3 = new String[80][9][9]; // array of game boards

        for(int k=0;k<ar3.length;k++)// filling the array with the current game board
        {
            ar3[k] = ar1;
        } 
```

是的，我想要 80 个棋盘，游戏将是 9x9。到现在为止一切都很好..但现在我想看看游戏板（ar1）并在ar3上做出一切可能的举动。因此，对于每一个可能的举动，我都在 ar3 上得到了一个棋盘。为此，我将创建一个数组，其中包含板上的空索引，这是 ar2 上所有可能的移动：

```
int[][]ar2 = new int[81][2]; // contains blank boxes indexes
        int line = 0;

        for(int k=0;k<SIZE;k++) //finds blank boxes indexes and adding to the array
            for(int j=0;j<SIZE;j++,line++)
            {
                if(ar1[k][j].equals(""))
                {
                    ar2[line][0] = k;
                    ar2[line][1] = j;
                }
                else
                {
                    ar2[line][0] = -1;
                    ar2[line][1] = -1;
                }

            } 
```

正如你所看到的，如果盒子有其他东西，那么“”是 X 或 O，然后我输入 -1 这个代码正在做我想要的，但现在问题来了，我将尝试生成所有可能的移动，这些移动存储在ar3 中的 ar2：

```
String[][][]ar3 = new String[80][9][9]; // array of game boards

        for(int k=0;k<ar3.length;k++)// filling the array with the current game board
        {
            ar3[k] = ar1;
        }
        for(int k=0;k<ar3.length;k++)// making a move
        {
            int i1 = ar2[k][0];
            int i2 = ar2[k][1];
            if(!(i1 == -1 || i2 == -1))
                if(num%2==0)
                    ar3[k][i1][i2] = "X";
                else
                    ar3[k][i1][i2] = "O";
        } 
```

我不知道为什么不是对每个棋盘进行一次移动，而是对 ar3 中的每个索引进行所有棋盘的所有移动..例如（我将在 3x3 棋盘上演示）^ 表示空棋盘之前看起来像这样：

> ^ ^ ^
> ^ X ^
> ^ ^ ^

但是在“移动”之后，我试图使（假设是 0,0）所有的板看起来像这样：

> O ^ ^
> ^ X ^
> ^ ^ ^

而不是第一个...然后我对第二个板（ar3 [1]）使用不同的索引做同样的事情，但它会影响所有板..（ar3 [0-k]）所以最终我有 80 个相同的板。有人有想法吗？为什么它改变了所有的板？而不是只改变 K 指数上的板？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T22:36:04.963

我不确定我是否完全理解代码，所以这是一个疯狂的猜测，但是：

在第一个摘录中，您将`ar3`引用同一对象的所有插槽`ar1`. 这意味着如果您更改`ar1`的内容，您将看到所有`ar3`项目的更改，因为所有这些项目都是对同一对象的引用。你可以检查一下这是否是你的问题。

现在，作为评论，我建议您在这些情况下开始做两件对我个人有帮助的事情：第一件事是为您的标识符提供尽可能有意义的名称，以至于实际上不需要评论来理解什么是什么. 第二个是利用您使用 Java 之类的语言编写的事实，并尝试以更面向对象的方式编写代码。例如，如果你有一个普通的（比如说）`GameBoard`对象数组，而不是一个 3D 数组，每个对象都包含它的 2D 信息，那么它可能对制作任何“可疑”代码模式（不符合您的实际意图，即）更明显。

# java - 使用 JFrame

> ID：13810321
> 
> 赞同：0
> 
> 时间：2012-12-10T22:23:20.110
> 
> 标签：java, swing

嗨，我基本上放弃了。好的，这就是我想要做的。到目前为止，我已经编写了代码来创建一个包含文本字段和组合框的 JFrame。该代码应该根据从组合框中选择的形状计算文本字段中输入的面积，并将结果输出到 JFrame！

[这是输出的样子](http://i.stack.imgur.com/xHIQF.png)

到目前为止，这是我的代码。它有点混乱，但任何帮助将不胜感激。提前致谢

```
 import javax.swing. *;
 import java.awt.event. *;   
 import java.awt.FlowLayout;
 import java.lang.Math; 
 public class AreaFrame3  extends JFrame
 {  

     double Area;
     double input;

 public static void main(String[]args)
 {
   //Create array containing shapes
   String[] shapes ={"(no shape selected)","Circle","Equilateral Triangle","Square"};

   //Use combobox to create drop down menu
   JComboBox comboBox=new JComboBox(shapes);
   JLabel label1 = new JLabel("Select shape:");
   JPanel panel1 = new JPanel(new FlowLayout()); //set frame layout

   JLabel label2 = new JLabel("(select shape first)");
   JTextField text = new JTextField(10); //create text field
   text.setEnabled(false);

   panel1.add(label1);
   panel1.add(comboBox);
   panel1.add(label2);
   panel1.add(text);

   JFrame frame=new JFrame("Area Calculator Window");//create a JFrame to put combobox
   frame.setLayout(new FlowLayout()); //set layout
   frame.add(panel1);
   frame.add(text);
   //JButton button = new JButton("GO"); //create GO button
   //frame.add(button);

   //set default close operation for JFrame
   frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   frame.pack();
   //set JFrame ssize
   frame.setSize(400,250);

   //make JFrame visible. So we can see it
   frame.setVisible(true);

   // public void actionPerformed(ActionEvent e)
    //{

  }

 public void AreaCalc()
 {
    JButton button = new JButton("GO"); //create GO button
   frame.add(button);
   button.addActionListener(
      new ActionListener(){
         public void actionPerformed(ActionEvent e)
        {
           int input = double.parseDouble(text.getText());

        if(e.getSource() == button)
        {              
            String shape = (String).comboBox.getSelectedItem(); 

           if(shape == "(no shape selected)")
           {
             text.setEnabled(false);
           }

          else{
              text.setEnabled(true);
          }

          if(input > 1 && shape == "Circle")
          {
             // label2.getText() = "Enter the radius of the circle: ";
              Area = (Math.PI * (input * input));

          }
        }

         else{}
       }
     }         
    );
  } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:32:16.517

我试着理解你在这里做了什么：

```
panel1.add(label1);
panel1.add(comboBox);
panel1.add(label2);
panel1.add(text); // <---

JFrame frame=new JFrame("Area Calculator Window");//create a JFrame to put combobox
frame.setLayout(new FlowLayout()); //set layout
frame.add(panel1);
frame.add(text); // <--- 
```

特别是`frame.add(text);`和`panel1.add(text);`。不要在`JFrame`. 使用`JPanel`.

更远，

```
public class AreaFrame3  extends Frame 
```

使用`public class AreaFrame3 extends JFrame`这样您就不需要创建额外的 JFrame：

```
JFrame frame=new JFrame("Area Calculator Window"); 
```

就像是：

```
super.setLayout(new FlowLayout()); //set layout
super.add(panel1); 

super.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
super.pack();
//set JFrame ssize
super.setSize(400,250);

//make JFrame visible. So we can see it
super.setVisible(true); 
```

最后我会给你一些模板开始（这会帮助你）：

```
public class FrameExmpl extends JFrame{

private static final long serialVersionUID = 1L;

private        JTabbedPane       tabbedPane;        
private        JPanel            topPanel;
private JTextField               txtf_loadDS_;

public static int valueInt = 0; // responsible for Task status updating
public static Boolean isFinish = false;

public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException, UnsupportedLookAndFeelException{ 

    UIManager.setLookAndFeel( "com.sun.java.swing.plaf.windows.WindowsLookAndFeel" );

    FrameExmpl UI_L = new FrameExmpl();

    UI_L.buildGUI();

    UI_L.setVisible(true);
}

public void buildGUI(){

    addWindowListener(new WindowAdapter() {
        public void windowClosing(WindowEvent e) {
            dispose();
        }
    });

    setSize(435, 225);
    setLocation(285, 105);  

    setResizable(false);

    topPanel = new JPanel();
    topPanel.setLayout(new BorderLayout());
    getContentPane().add(topPanel);

    txtf_loadDS_ = new JTextField();                
    txtf_loadDS_.setBounds(22, 22, 382, 25);
    topPanel.add(txtf_loadDS_);

    finishBuildGUI();
}

public void finishBuildGUI(){       
    tabbedPane = new JTabbedPane();     
    topPanel.add(tabbedPane, BorderLayout.CENTER);
}
} 
```

![在此处输入图像描述](../Images/3d71457ea2e101c031cacce3d404c21e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:34:18.357

此应用程序存在多个问题，例如扩展 from`Frame`而不是`JFrame`& 尝试分配`int`from `Double.parseDouble`。我建议您重新开始构建一个小而有效的应用程序并逐步添加功能，这样更容易修复错误。

# gwt - GWT 日期范围选择小部件

> ID：13810323
> 
> 赞同：1
> 
> 时间：2012-12-10T22:23:27.430
> 
> 标签：gwt, datepicker

我正在寻找一个用于 GWT 的 UI 小部件，它允许选择日期范围，最好是不允许未来的日期。拥有两个日期选择器对用户来说并不是非常友好，但我还没有看到更好的东西。

像这样的会很棒： [https ://demo.reztrip.com/](https://demo.reztrip.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:28:55.017

GWT by default has no such widget. There are only few relevant libraries to explore to pick of ideas -

```
Sencha ( GWT based widgets )
Vaadin ( GWT based widgets )
SmartGWT ( GWT JSNI wrappers on js widgets )
Jquery/GwtQuery plugin - ( GWT rewrite of JQuery, You would probably need to do plugin port) 
```

I have not found any third party open source libs with Serious **User Interaction Design** that stands out.

**That leaves you to design your own widget**. You can start by looking up [Google Analytics](http://www.google.com/analytics/), [Google Flight](https://www.google.com/flights/) and other Google's GWT based products.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:05:29.200

您可以创建一个弹出窗口来创建间隔。第一次单击时，要求使用选择一个日期并删除/隐藏该屏幕并在弹出窗口中显示另一个屏幕，要求第二个日期选择一个间隔，一旦您拥有这两个值，您就可以在程序中使用该间隔

# javascript - 如何在缩放时使图像居中？

> ID：13810326
> 
> 赞同：0
> 
> 时间：2012-12-10T22:23:35.727
> 
> 标签：javascript, zooming, center

所以我需要在放大后将图像居中，我现在不能使用任何 Jquery ，它会
向右移动并叠加，但最右边的图像在浏览器屏幕的末尾被截断

```
<script>
var target;     //global container for currently clicked div
var timer;
var tick = 40;
var diffw = 341;
var diffh = 235;
var trans = 0.5; //opacity 
var zoomed = false; //boolean, can only be true or false

function startAnimation(divname) {
    target = divname; 
    if (zoomed==false)  {
        timer = setInterval("zoomPhotoIn()",tick); 
    }else {
        timer = setInterval("zoomPhotoOut()",tick); 

    }
}

function zoomPhotoIn()  {
    trans += 0.02;
    diffw += 15;
    diffh += 10;

    document.getElementById(target).style.opacity = trans;
    document.getElementById(target).style.width = diffw+"px";
    document.getElementById(target).style.height = diffh+"px";
    document.getElementById(target).style.zIndex = 5;

    if(diffw >= 700)    {
        clearInterval(timer);
        zoomed = true;
    }
}

function zoomPhotoOut() {
    trans -= 0.02;
    diffw -= 15;
    diffh -= 10;

    document.getElementById(target).style.opacity = trans;
    document.getElementById(target).style.width = diffw+"px";
    document.getElementById(target).style.height = diffh+"px";
    document.getElementById(target).style.zIndex = 1;

    if(diffw <= 341)    {
        clearInterval(timer);
        zoomed = false;
    }

}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:22:48.490

这基本上是@Shmiddty 的回答形式的评论。

这些编辑假设图像具有 a`position`不是静态的并且具有`top:50%`and `left:50%`：

```
<script>
var target;     //global container for currently clicked div
var timer;
var tick = 40;
var diffw = 341;
var diffh = 235;
var trans = 0.5; //opacity 
var zoomed = false; //boolean, can only be true or false

function startAnimation(divname) {
    target = divname; 
    if (zoomed==false)  {
        timer = setInterval("zoomPhotoIn()",tick); 
    }else {
        timer = setInterval("zoomPhotoOut()",tick); 

    }
}

function zoomPhotoIn()  {
    trans += 0.02;
    diffw += 15;
    diffh += 10;

    document.getElementById(target).style.opacity = trans;
    document.getElementById(target).style.width = diffw+"px";
    document.getElementById(target).style.height = diffh+"px";
    document.getElementById(target).style.zIndex = 5;
    document.getElementById(target).style.marginLeft = (diffw/2) + "px";
    document.getElementById(target).style.marginTop = (diffh/2) + "px";

    if(diffw >= 700)    {
        clearInterval(timer);
        zoomed = true;
    }
}

function zoomPhotoOut() {
    trans -= 0.02;
    diffw -= 15;
    diffh -= 10;

    document.getElementById(target).style.opacity = trans;
    document.getElementById(target).style.width = diffw+"px";
    document.getElementById(target).style.height = diffh+"px";
    document.getElementById(target).style.zIndex = 1;
    document.getElementById(target).style.marginLeft = (diffw/2) + "px";
    document.getElementById(target).style.marginTop = (diffh/2) + "px";

    if(diffw <= 341)    {
        clearInterval(timer);
        zoomed = false;
    }

}

</script> 
```

# javascript - 我的全局变量返回为未定义（JavaScript）

> ID：13810339
> 
> 赞同：1
> 
> 时间：2012-12-10T22:24:32.227
> 
> 标签：javascript

我真的在这里与基本的 Javascript 作斗争......基本上，我正在尝试创建一个函数，在调用时设置两个变量（经度和纬度），以便我可以在之后直接运行使用这些值的其他函数。

但是，当我尝试提醒经度值时，它会返回未定义。

这是我的代码。

```
var latitude;    
var longitude;

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(displayLocation);
  } else {
    alert("Geolocation is not supported by this browser.");
  }
}

function displayLocation(position, latitude, longitude) {
  latitude = position.coords.latitude;
  longitude = position.coords.longitude;
  return;
}

function newLocation(longitude) {
  alert(longitude);
}

window.onload = function() {
  getLocation(); 
  newLocation();
} 
```

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:29:34.633

你永远不会为你的全局变量分配任何东西。

里面的赋值是`displayLocation`指函数参数`latitude`/ `longitude`（是函数中的局部变量），而不是外面的全局变量。

错误的：

```
var x;

function foo(x) {
  x = 42; // ^ assigns to this x, not the global variable
}

foo(0);
alert(x);  // undefined 
```

对：

```
var x;

function foo() {
  x = 42;  // no local x in scope here
}

foo();
alert(x);  // 42 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:33:19.493

您发布的代码存在一些问题：

的参数`displayLocation`是隐藏你的全局变量。当您在这里进行分配时，您实际上是在分配给您的参数变量，这些变量位于本地范围内。

```
function displayLocation(position, latitude, longitude) {
  latitude = position.coords.latitude;
  longitude = position.coords.longitude;
} 
```

IIRC，对 geolocation.getCurrentPosition 的回调只接受第一个参数，因此您不必将`latitude`and定义`longitude`为参数。

函数中的同样问题`newLocation`。您不带参数调用它，但`longitude`参数是“隐藏”全局变量。

这些都是小的语法问题。然而，代码中还有另一个问题，解决起来有点棘手。

页面加载后，依次调用这两个函数：

```
window.onload = function() {
    getLocation(); 
    newLocation();
} 
```

第二个函数 ,`newLocation`期望`getLocation`已经设置了全局变量。然而，情况可能并非如此。当`getLocation`函数调用`geolocation.getCurrentPosition`时，它正在执行**异步操作**。调用后的下一行立即继续执行，但回调函数`displayLocation`不一定被调用。起初这可能有点难以理解，但基本上你只需要在运行`newLocation` **后** `displayLocation`调用。

所以会变得复杂吗？这就是为什么尝试完全避免全局变量被认为是一种好习惯的原因。Javascript 经常迫使我们进行异步编程，并且试图理解全局变量在任何给定时间可能处于的所有可能状态可能会让你发疯。

相反，如果可能，您应该始终直接使用函数参数。例如，在您的场景中，您可以`displayLocation`完全跳过该步骤，直接转到`newLocation`：

```
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(newLocation);
  } else {
    alert("Geolocation is not supported by this browser.");
  }
}

function newLocation(position) {
    alert(position.longitude);
} 
```

所以不再需要全局变量。

我确信您发布的示例代码已简化，而您的实际代码更复杂，但如果您能够遵循这些原则，我认为您将有更好的时间使用 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:49:00.897

我在您的代码中发现了 2 个问题。

首先，在 function 中`displayLocation`，您使用 2 变量`latitude`和`longitude`，它们将局部变量称为函数参数，而不是全局变量。要解决此问题，请删除最后 2 个函数参数，如下所示：`displayLocation(position)`或使用`window.latitude`,`window.longitude`代替（不推荐）。

其次，`displayLocation`是一个回调函数，将在事件触发后调用，在你的情况下，在浏览器获取位置之后。所以你不知道什么时候`displayLocation`被调用。如果您调用`newLocation()`，可能`displayLocation`已经被调用并且`latitude`，`longitude`已经刷新，可能没有。所以你应该`alert(longitude);`在`displayLocation`功能中确保`latitude`，`longitude`被刷新。

希望这些帮助。

# xslt - 使用 xslt 从 xml 节点插入 cdata 文本

> ID：13810343
> 
> 赞同：1
> 
> 时间：2012-12-10T22:24:55.193
> 
> 标签：xslt, xml-parsing, xslt-2.0

我的场景是我们必须检查元素中的`div`标签。如果存在，我们必须将文本插入到标签中。`cdata``body``div``node2``div`

这是我的输入 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
<node1>abc</node1>
<node2> needs to replace inside cdata div</node2>
<body> <![CDATA[
            <p>some text some textabcabcabcabc</p>

               <div class="marginBottom_4px">
               </div>
            <p>some text some textabcabc</P>

            ]]>
</body>
</root> 
```

输出 xml 将是：

```
<?xml version="1.0" encoding="utf-8"?>
<div class="marginBottom_10px">
abc
</div>
<div class="marginBottom_5px">

  <p>some text some textabcabcabcabc</p>

  <div class="marginBottom_4px">

   needs to replace inside cdata div
  </div>
  <p>some text some textabcabc</P>
</div> 
```

我的转变是：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
    <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
    <xsl:value-of disable-output-escaping="yes" select ="$firstnode"/>
    <xsl:text disable-output-escaping="yes"><![CDATA[   <div class="marginBottom_10px">
   ]]>
  </xsl:text>
    <xsl:value-of disable-output-escaping ="yes" select="root/body"/>
    <xsl:text disable-output-escaping="yes"><![CDATA[
      </div>
     ]]>
    </xsl:text>
  </xsl:template>

  <xsl:variable name="firstnode">
    <xsl:text disable-output-escaping="yes"><![CDATA[
       <div class="marginBottom_10px">
     ]]>
     </xsl:text>
    <xsl:value-of disable-output-escaping ="yes" select="root/node1"/>
    <xsl:text disable-output-escaping="yes"><![CDATA[
      </div>
     ]]>
   </xsl:text>
  </xsl:variable>
</xsl:stylesheet> 
```

* * *

我能够产生输出。但我的 xml 非常复杂，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<ComplexXML>
  <environment>
   couple of nodes..
 </environment>
  <document>
    nodes
  </document>

<element cd="dsjdhfjk"  input="abc.xml" mode="" >
   <cd position="1">
     <attributes>
        <type>dummy text</type>
        <title>dummy text</title>
     </attributes>
  <content>
   <node2>
        <![CDATA[
          needs to replace inside cdata div
          ]]>
    </node2>
     <body>
        <![CDATA[
          <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. 
Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,
 when an unknown printer took a galley of type and scrambled it to make a type 
specimen book </p>

             <div class="marginBottom_4px">
               </div>
               <p>Lorem Ipsum is simply dummy text of her including versions of Lorem Ipsum. </p>
           ]]>
      </body>
      <abt >
        <![CDATA[ 

               text from  abt node
               ]]>
      </abt>
    </content>
   </cd>
  </element>
</ComplexXML> 
```

在上面的 xml 中，我必须检查 abt 节点。如果 abt 节点中有数据，则输出应如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
      <div>
          text from  abt node

        <div class="marginBottom_5px"> 
                <p>Lorem Ipsum is simply dummy text of the printing and      typesetting              industry. 
Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,
 when an unknown printer took a galley of type and scrambled it to make a type 
specimen book </p>

                   **<div class="marginBottom_4px">
                    </div>** I need to remove this div tag and place the node2 content here.

     <p>Lorem Ipsum is simply dummy text of her including versions of Lorem Ipsum. </p>

        </div>
</div> 
```

很抱歉打扰你..我对xslt很陌生..我只是在学习阶段..你能指导我吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:25:47.740

以下 XSLT 1.0 样式表根据示例输出和注释生成我认为所需的输出。它依赖于格式正确`CDATA`的输入文档中的文本，并利用`disable-output-escaping`：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
    >
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="node1">
        <div class="marginBottom_10px">
            <xsl:apply-templates/>
        </div>
    </xsl:template>    

   <xsl:template match="node2" />     

   <xsl:template match="body">
       <div class="marginBottom_5px">
           <xsl:apply-templates/>
       </div>
   </xsl:template>

    <xsl:template match="body/text()[contains(.,'&lt;div') and contains(.,'&lt;/div>')]">
      <xsl:value-of 
          disable-output-escaping="yes" 
          select="substring-before(.,'&lt;/div')" />
      <xsl:value-of select="../../node2"/>  
      <xsl:value-of 
          disable-output-escaping="yes"
          select="substring-after(.,substring-before(.,'&lt;/div'))" /> 
   </xsl:template>
</xsl:stylesheet> 
```

当应用于示例输入时，会产生：

```
<?xml version="1.0" encoding="UTF-8"?>
    <div class="marginBottom_10px">abc</div>

    <div class="marginBottom_5px"> 
            <p>some text some textabcabcabcabc</p>

               <div class="marginBottom_4px">
                needs to replace inside cdata div</div>
            <p>some text some textabcabc</P>

    </div> 
```

**注意：**输出格式不正确。没有文档元素。您可能希望为`<root>`创建一个`<div>`或其他包含元素的模板创建一个模板。

* * *

此版本处理其他输入格式并生成我认为所需的输出：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
    >
    <xsl:output method="xml" indent="yes"/>

    <!--rely on built-in templates, 
        which apply-templates to child nodes of elements
        and get value-of for text() -->

    <xsl:template match="content">
        <xsl:choose>
            <!-- if <abt> has a value, do the following -->
            <xsl:when test="normalize-space(abt)">
                <div>
                    <!-- apply templates to <abt>, 
                        built-in template will copy text to output-->
                    <xsl:apply-templates select="abt"/> 
                    <!-- apply templates to <body>, template defined below will handle it -->
                    <xsl:apply-templates select="body"/>
                </div>
            </xsl:when>
            <xsl:otherwise>
                <!--process child nodes -->
                <xsl:apply-templates />
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <xsl:template match="node1">
        <div class="marginBottom_10px">
            <xsl:apply-templates/>
        </div>
    </xsl:template>    

    <!--empty template ensures that no content produced when templates applied to <node2>-->
    <xsl:template match="node2" />     

    <xsl:template match="body">
        <div class="marginBottom_5px">
            <xsl:apply-templates/>
        </div>
    </xsl:template>

    <!--Template for handling body/text() when <abt> does not have a value-->
    <xsl:template match="*[not(normalize-space(abt))]/body/text()[contains(.,'&lt;div') and contains(.,'&lt;/div>')]">
        <!--get the value of content preceding "</div"-->
        <xsl:value-of 
            disable-output-escaping="yes" 
            select="substring-before(.,'&lt;/div')" />
        <!--get the value of <node2> -->
        <xsl:value-of select="../../node2"/>  
        <!--get the value of content starting at "</div" -->
        <xsl:value-of 
            disable-output-escaping="yes"
            select="substring-after(.,substring-before(.,'&lt;/div'))" /> 
    </xsl:template>

    <!--Template for handling body/text() when <abt> does have a value -->
    <xsl:template match="*[normalize-space(abt)]/body/text()[contains(.,'&lt;div') and contains(.,'&lt;/div>')]">
        <!--get the value preceding "<div" -->
        <xsl:value-of 
            disable-output-escaping="yes" 
            select="substring-before(.,'&gt;div')" />
        <xsl:value-of select="../../node2"/>
        <!--get the value following "</div>" -->
        <xsl:value-of 
            disable-output-escaping="yes"
            select="substring-after(.,'&lt;/div>')" /> 
    </xsl:template>
</xsl:stylesheet> 
```

# android - 片段作为 ListView 行（Google Maps Android API v2）

> ID：13810349
> 
> 赞同：3
> 
> 时间：2012-12-10T22:25:21.333
> 
> 标签：android, google-maps, android-listview, android-fragments

过去，一个 Activity 中不可能显示多个 MapView，部分原因是我们必须使用 MapActivity 来管理视图。然而，随着最近发布的[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)，显示多张地图是微不足道的。

在新的 API 中，有两种显示小部件的方式：使用 a`MapView`或使用`MapFragment`. 使用片段被认为更容易，因为视图要求开发人员转发所有生命周期方法。

我的应用程序要求将静态地图显示为`ListView`. 我最初打算使用[静态地图 API](https://developers.google.com/maps/documentation/staticmaps/)来实现它并自己处理网络。然而，似乎使用新的地图 API 会更有效率。

这让我想到了我的主要问题。是否可以/建议`ListView`在行内使用片段？我发现的唯一类似[的帖子](https://stackoverflow.com/questions/11363309/can-a-listview-contain-fragments)并没有真正得到任何地方，但我想现在我们可以嵌套片段，这是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:36:41.557

> 我的应用程序要求将静态地图显示为 ListView 的行

这不太可能奏效，因为列表可能无法滚动，至少在用户没有将地图平移到其中一个极点的情况下。

> 是否可以/建议在 ListView 行中使用片段？

这可能是不可能的。我当然不会建议它。`ViewPager`专门避开`ListAdapter`它自己`PagerAdapter`，以使在页面中使用片段更实用。

# sql-server - SQL Server 查询 - 如何将选定的值插入另一个表

> ID：13810350
> 
> 赞同：4
> 
> 时间：2012-12-10T22:25:25.047
> 
> 标签：sql-server, tsql, select, insert, sql-server-2008-r2

这就是我想要做的。

这是选择语句

```
select Id 
from tblUsersPokemons 
where UserId = 1 and PokemonPlace = 'bag' 
```

现在我想将这些返回的 Id 插入到另一个表中，如下所示：

```
foreach all returned Ids
   insert into tblNpcBattleUsersPokemons values (Id, 1) 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T22:28:48.440

像这样：

```
insert into tblNpcBattleUsersPokemons
select Id, 1 from tblUsersPokemons where UserId=1 and PokemonPlace='bag' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T22:29:53.460

这可以在单个 sql 调用中完成

```
insert into tblNpcBattleUsersPokemons (id, [whatever the name of the other column is])
    select Id, 1 from tblUsersPokemons where UserId=1 and PokemonPlace='bag' 
```

我在这里使用了速记，因为它不对目标表中列的顺序做出任何假设，这可能会随着时间的推移而改变并使您的插入语句无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T22:29:46.450

您可以使用 INSERT...SELECT 语法将 SELECT 检索到的集合插入到另一个现有表中。

例如：

```
INSERT INTO tblNpcBattleUsersPokemons (Id, Val)  -- not sure what the second column name was 
SELECT Id FROM tblUsersPokemons WHERE UserID = 1 and PokemonPlace='bag'; 
```

# gis - OpenLayers scale：单位大小是多少？

> ID：13810354
> 
> 赞同：2
> 
> 时间：2012-12-10T22:25:57.970
> 
> 标签：gis, openlayers, postgis

我有一个平面游戏世界地图，我用 gdal2tiles.py 进行了光栅化（很明显，-p 光栅，因为它没有地理位置信息）。将其显示为 TMS 层就可以了。

我也有要叠加的矢量数据。通过反复试验，我找到了一个几乎可以工作的配置：

```
var scales = [0.692, 1.384, 2.768, 5.536, 11.072];
var options = {
    controls: [],
    maxExtent: mapBounds,
    scales: scales,
    units: 'm'
}; 
```

但我想知道为什么这些值如此奇怪，它们是否真的正确。所以基本上问题是：OpenLayers 地图的实际比例是多少？从 0,0 到 1,0 的线串有多长，到 0,1 有多长？单位是什么？显然它不是米，文档也没有在任何地方解释它。

以防万一，我的矢量数据存储在 PostGIS 数据库中。它是生成的，而不是来自任何真实世界的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:30:40.980

比例是地面单位和屏幕单位之间的差异。您可以使用比例控件或调用来查看当前地图比例分母

```
var map = (OpenLayers.Map);
map.getScale(); 
```

如果您的矢量数据在 Postgis 数据库中并存储为几何列，那么它应该具有正确的 srid 编号。您的矢量数据必须与您的地图 srid 代码匹配或转换为相同的 srid。在完成渲染后检查您的地图投影，如下所示：

```
var map = (OpenLayers.Map);
map.getProjection(); 
```

您的矢量数据 srid 必须与上面报告的值匹配。

您不会将这些比例值与分辨率混淆吗？

# ruby - 如何在黄瓜中读取文件

> ID：13810355
> 
> 赞同：0
> 
> 时间：2012-12-10T22:25:56.940
> 
> 标签：ruby, cucumber

我是黄瓜的新手。我想在黄瓜中编写以下场景：

```
Feature: Withdraw Fixed Amount
The "Withdraw Cash" menu contains several fixed amounts to
speed up transactions for users.

Scenario Outline: Withdraw fixed amount
  Given I have <Balance> in my account
  When I choose to withdraw the fixed amount of <Withdrawal>
  Then I should receive <Received> cash
  And the balance of my account should be <Remaining>

Examples:
| Balance | Withdrawal | Received | Remaining |
| $500    | $50        | $50      | $450      |
| $500    | $100       | $100     | $400      | 
```

我想从这样的文件中读取数据（示例:)：$500;$50;;$50;$450 $500;$100;$100;$400

我不确定我是否可以从黄瓜的功能文件或步骤定义中读取数据。有人可以对此有所了解吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:49:43.447

**不**，不可能在 Cucumber 中“生成”场景。示例表中的每一行都作为一个单独的场景运行，Cucumber 必须预先知道要运行哪些场景。

也就是说，有两种可能性，我认为两者都没有吸引力：

*   在一个步骤中用代码编写整个场景 def 例如：

    ```
    Scenario: Withdraw fixed amount
      Given withdrawing should work correctly

    #steps.rb
    Given /^withdrawing should work correctly$/ do
      # Read values from file
      # For each row in the file, do everything the scenario would do
    end 
    ```

    这可行，但有一个严重的缺点，即通过 Gherkin 功能无法揭示*系统*的行为。

*   代码生成功能文件。使用诸如 ERB 之类的模板语言来转换特征文件，插入任何必要的示例行，作为运行 Cucumber 之前发生的任务。有效，但代价是*很多*复杂性。

在这两种情况下，您都从功能文件中删除了数字，这立即否定了它作为文档中心来源的功能，读者必须重新参考“数字”文件才能弄清楚系统的实际行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:18:32.773

你的要求是矫枉过正。此处的示例可帮助您以清晰的格式识别可能的情况，但不适用于海量数据处理。

示例中的每一行都应该是有意义的，否则你就是在浪费资源。

例如。余额为 100 美元，提取 20 美元应留下 80 美元。但是 20 美元可能是一个硬编码的数字，因此您需要另外一个案例来验证这一点，比如提取 30 美元。

ATM 系统的每日提款限额可能为 1000 美元。所以，如果你要 1200 美元，系统应该只给你 1000 美元。你需要另一行来测试它。

上面的每个案例都是有意义的。而且我认为在很多情况下您都不需要 CSV 文件来处理它。手动打字就足够了。

# mysql - 从每 5 行中选择最高价格

> ID：13810356
> 
> 赞同：0
> 
> 时间：2012-12-10T22:26:00.417
> 
> 标签：mysql

我一直在尝试和尝试，但无法弄清楚这一点。

在具有开盘价、最高价、最低价、收盘价的股票图表中，您始终可以每分钟、5 分钟、10 分钟、每小时等图表。我每分钟都有数据，我正在尝试选择开盘价、最高价、最低价, 关闭每分钟的数据，但每 5 分钟。

我有类似这样的数据：

```
__________________________________________________
| Date     | TIME    | TICKER  | Open  | High  | Low   | Close |
| 20121203 | 090000  |  QQQQ   | 23.54 | 24.12 | 23.01 | 23.24 |
| 20121203 | 090100  |  QQQQ   | 23.24 | 24.14 | 22.98 | 24.13 |
| 20121203 | 090200  |  QQQQ   | 24.13 | 25.88 | 23.75 | 25.81 |
| 20121203 | 090300  |  QQQQ   | 25.81 | 25.83 | 24.63 | 24.99 |
| 20121203 | 090400  |  QQQQ   | 24.99 | 25.21 | 23.89 | 24.12 |
| 20121203 | 090500  |  QQQQ   | 24.12 | 24.19 | 21.94 | 22.03 |
| 20121203 | 090600  |  QQQQ   | 22.03 | 22.97 | 20.68 | 21.44 |
| 20121203 | 090700  |  QQQQ   | 21.44 | 24.06 | 19.32 | 23.56 |
| 20121203 | 090800  |  QQQQ   | 23.56 | 25.48 | 23.07 | 25.01 |
| 20121203 | 090900  |  QQQQ   | 25.01 | 28.00 | 24.18 | 27.21 |
| 20121203 | 091000  |  QQQQ   | 27.21 | 27.55 | 24.31 | 24.31 | 
```

我需要获取时间 >= 090000（即上午 9 点）09 小时 00 分 00 秒的行的最大值（高）。

与此类似，我需要 min(low)，然后我将在时间为 090400 时获取收盘价，因为我每 5 分钟获取一次。我也可以使用下一个 5 分钟增量的开盘，这样很灵活。

我使用了嵌套的 SELECT 语句、多个连接等。问题是 MySQL 执行时间大约为每行返回 1 秒。当您计算出每小时有 12 行（60 分钟 / 5 分钟 = 12）时，这真是太慢了，然后因为我实际上在做外汇交易，所以交易是全天候的，所以是 24 小时。这给了我每天 288 次，或者每天不到 5 分钟。做 1 年的数据（约 250 个交易日）大约需要 20 个小时。必须有更快的方法。

我有一些解决方案，ID 是连续的，虽然这可能是最简单的，但我不能 100% 确定我的数据在这样做时是否正确。原因是周五交易日在纽约的正常营业时间结束，并在东京的第一笔交易开始（大约在美国的午后）。

我查看了 GROUP BY，但我不确定如何将数据分组以获得 5 组，其中时间在每个 5 分钟组的 5 分钟内。

感谢您的想法和讨论。

贾罗德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:36:13.507

这应该每 5 分钟显示一次 max(high) 和 min(low)

```
SELECT Max(high), 
       Min(low) 
FROM   tbl 
GROUP  BY ROUND(Unix_timestamp(Date(Concat(`date`, `time`))) / ( 5 * 60 )) 
```

在 Group by 子句中，我们连接您的日期时间列。所以它形成了类似的东西`20121203090000`。这是在 mysql 中被识别为日期的格式之一。所以我们将它传递给`date()`函数。然后将其转换为`UNIX_TIMESTAMP`. 它除以 5 分钟时间跨度。结果将是一个*浮点*值。但是我们需要特定时间跨度的相同值。因此`ROUND()`. 它将浮点值设为最接近的整数。要了解它的工作原理，请运行此查询。

```
SELECT high, 
       low 
       Unix_timestamp(Date(Concat(`date`, `time`))) / ( 5 * 60 ) `5-min span`
       ROUND(Unix_timestamp(Date(Concat(`date`, `time`))) / ( 5 * 60 )) `5-min span rounded`
FROM   tbl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:47:53.273

试试这个：

> SELECT CONCAT(DATE,SUBSTRING(`Time`,1,2),"[" ,IF(SUBSTRING(`Time`,4,1)<5,CONCAT(SUBSTRING(`Time`,3,1),"0"),CONCAT(SUBSTRING(`Time`,3,1),"5")) ,"-" ,IF(SUBSTRING(`Time`,4,1)<5,CONCAT(SUBSTRING(`Time`,3,1),"5"),CONCAT(SUBSTRING(`Time`,3,1)+1,"0")) ,"]") AS timeStr ,MAX(High) ,MIN(LOW) FROM tb1 GROUP BY timeStr;

[http://sqlfiddle.com/#!2/6b748/1](http://sqlfiddle.com/#!2/6b748/1)

# php - PHP表单展示

> ID：13810357
> 
> 赞同：0
> 
> 时间：2012-12-10T22:26:03.133
> 
> 标签：php

我正在尝试创建一个表格，用于使用从卫星收集的数据更新水库信息。

我返回要创建的 php 代码，但无法显示表单。我只看到一个空白网页。可能是什么问题。请参阅下面的代码：

```
 <?php
    $id = $_SESSION['user'];
    include "pgsql.connect.php";
    $text="";   

    $seasonArray = array('Dry','Wet');
    $sateliteDataTypeArray = array('MSS','LANDSAT TM','LANDSAT ETM','JRS','SPOT','ASTER','ALMAZ','IRS','OTHER');

        echo "What!!!";
        $id_query="SELECT * FROM tbl_reservoir";
        $id_result=@mysql_query($id_query,$dbc);
        $text.='<form enctype="multipart/form-data" action="index.php?mod=update_res" method="post">
        <table><tr><td>Reservior ID: </td><td><select id="res_id" name="res_id">
            <option selected></option>'; 
            while ($id_row=@mysql_fetch_array($id_result)) {
                $ids=$id_row['res_id'];
                $text.='<option>'.$ids.'</option>';
            }

        $text.='</select>
        </td></tr>
        <tr><td>Reading Date: </td><td><input type="text" name="reading_date" size="25" maxlength="25" value="" />
        </td></tr>
        <tr><td>Satelite Datatype: </td><td><select id="sat_data" name="sat_data">';
            // For each value of the array assign variable name Satelite Type
                foreach($sateliteDataTypeArray as $sat){
                    $text.='<option>'.$sat.'</option>';}
        $text.='</select></td></tr>
        <tr><td>Dry or Wet Season: </td><td><select id="season" name="season">';
        // For each value of the array assign variable name city
                foreach($seasonArray as $season){
                    $text.='<option>'.$season.'</option>';}
        $text.='</select>
        </td></tr>
        <tr><td>Reservoir Surface Area: </td><td><input type="text" name="surfArea" size="25" maxlength="25" value="" />
        </td></tr>
        <tr><td>Reservoir Volume: </td><td><input type="text" name="resVol" size="25" maxlength="25" value="" />
        </td></tr>
        <tr><td>Reservoir Average Depth: </td><td><input type="text" name="resAvDepth" size="25" maxlength="25" value="" />
        </td></tr>
        </table>
        <div align="center"><input type="submit"
        name="submit" value="Submit" /></div>
        <input type="hidden" name="submitted"
        value="TRUE" />
        </form>';
        //end form creation

    if(isset($_POST['submitted'])) //checks if form submitted
        {
            //assign entered values from the form to variables
            $resID=$_POST['res_id'];
            $dateReading=$_POST['reading_date'];
            $satType=$_POST['sat_data']
            $season=$_POST['season']
            $surfaceArea=$_POST['surfArea'];
            $resVol=$_POST['resVol'];
            $avDepth=$_POST['resAvDepth'];

            //echo $plot.

            $warning='';

            //validate the entered values into the form
            if($dateReading==''||$satType==''|| $season=='' || $surfaceArea=='' || $resVol=='' || $avDepth=='')
                {
                    $warning="<span class='warning'>Please complete all fields.</span>";
                }

            //if (s)he's made an error (one of the above IF statements is true
            if($warning!='')
                {
                    //display the form with some error or warning message(s)
                    $p=new Page('Join us');
                    $p->setHeading('Please complete the form');
                    $p->setContent($text.$warning.$form_text);
                    $p->printIt();
                }
            else
                {

                    //****************** insert satelite data details into SATELITE DATA TABLE *******************************
                        $query="INSERT INTO tbl_volfromsatelite SET res_id='$resID',
                                               reading_date='$dateReading',
                                               res_sat_surfacearea='$surfaceArea',
                                               res_avg_depth='$avDepth',
                                               res_vol='$resVol',
                                               dry_or_wet='$season',
                                               sat_datatype='$satType'";
                        $result=@mysql_query($query,$dbc) or die(mysql_error());
                        //mysql_close($dbc);
                    //********************************************************************************************************
                    if ($result)
                    {
                    //update reservoir details in the Database
                    $q="UPDATE tbl_reservoir SET res_vol='$resVol', res_area='$surfaceArea', res_vol_date='$dateReading' WHERE res_id='$resID'";
                    $r=@mysql_query($q);

                    if(@mysql_affected_rows()==1)
                        {
                            $p=new Page('Update Reservoir Details');
                            $p->setHeading('Update Complete');
                            $p->setContent('The Reservoir details have been updated');
                            $p->printIt();
                        }
                    else
                        {
                            $p=new Page('Update Error');
                            $p->setHeading('Update not successful');
                            $_POST['res_id']='';
                            $p->setContent($text.'The reservoir details could not be updated due to some system error.
                                            <br/> We apolosize for inconvenience <p/>');
                            $p->printIt();
                        }
                    }

                }       

        }
        else
        {
            //display the form
            $p=new Page('Update Reservoir Information');
            $p->setHeading('Please complete the form, <b>all fields are compulsary</b>.');
            $p->setContent($text);
            $p->printIt();
        }

?> 
```

# php - Git 将 git HEAD 和 repo 信息添加到文件中

> ID：13810358
> 
> 赞同：2
> 
> 时间：2012-12-10T22:26:14.643
> 
> 标签：php, git, push, syntax-error

我环顾四周，似乎找不到实际的解决方案。我发现了一两个有类似问题的人的例子，但没有理由说明为什么会发生。在我展示这个问题之前，让我解释一下我做了什么：

1.  将提交从我的开发服务器推送到 repo 以在我的本地机器上使用
2.  检查了开发站点，由于某种原因，它现在到处都是 php 错误

出于某种原因，当我推送文件时，它会将以下内容添加到随机位置的 20 个不同文件中：

```
<<<<<<< HEAD
=======
$config['debug'] = '1';
>>>>>>> origin/master 
```

这些`$config`变量是我的，但出于某种原因，git 将内容推到了我的文件中。知道为什么会发生这种情况以及如何防止它再次发生吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T22:36:04.663

```
<<<<<<< HEAD
=======
$config['debug'] = '1';
>>>>>>> origin/master 
```

这是您在未解决冲突的情况下添加到提交中的未合并文件。

> 知道为什么会发生这种情况以及如何防止它再次发生吗？

也许您确实拉动并且 git 将上游提交与您的提交合并。或者您刚刚未完成手动合并过程。

为了防止它再次发生，您应该更好地注意来自 git 的消息，如下所示：

```
Auto-merging roses.txt
CONFLICT (content): Merge conflict in roses.txt 
```

然后自己合并冲突并将文件添加到阶段。

无论如何，看看[这篇](http://blog.wuwon.id.au/2010/09/painless-merge-conflict-resolution-in.html)文章或[关于合并冲突](https://stackoverflow.com/questions/161813/how-do-i-fix-merge-conflicts-in-git)的问题，它可能会有所帮助。

# php - 用php查询包含HTML特殊字符的mysql数据库

> ID：13810363
> 
> 赞同：0
> 
> 时间：2012-12-10T22:26:47.280
> 
> 标签：php, mysql, special-characters

......我没有更进一步。

我的数据库包含一列 'name' = 'John Richards'

我尝试像这样查询它：

```
$act = "John Richards";
prepareEditing($act);

function prepareEditing($act) {
include ($_SERVER['DOCUMENT_ROOT']."/final_ritg/includes/dbconnect.php");
$act = str_replace(" ", "&nbsp;", $act);
$sql = "select `name`,`genre`, `members`, `story`, `image`, `contact_fname`, `contact_lname`, `contact_phone`, `contact_email` from `festival`.`act` where `name` = :name ;";
$stmt = $pdo->prepare($sql);
$stmt->bindParam(':name', $act);
$stmt->execute();

echo $stmt->rowCount();
} 
```

当 'name' 只包含一个单词时，例如 'john'，函数返回 1（$act 也包含 'john'）。

我必须如何准备我的查询？

编辑：我正在全面使用 utf8。

编辑：这是我用来插入数据的准备 stmt： $stmt->bindParam(':name', str_replace(' ',' ',$name));

我这样做了，因为查询结果在尝试检索时会在空格处被截断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:55:12.013

事实证明，我的错误不在 php 中，而是在 html 中。

我正在从表中创建一个选择列表。因为名称是唯一的，所以我将它们用作主键和每个选择选项的值……那些不喜欢空格的。

这里的解决方案是向表中添加编号索引或进行一些字符串转换（但这会导致为查询准备字符串的大量额外工作）我还不知道我将如何解决这个问题。

无论如何，也许另一个初学者遇到了同样的陷阱并发现这很有用。

# python - lambda 中的 Python lambda

> ID：13810369
> 
> 赞同：-1
> 
> 时间：2012-12-10T22:27:18.657
> 
> 标签：python, lambda

```
g = lambda x:[lambda x:x*1, lambda x:x*x, lambda x:x*x*x, lambda x:42][x%4](x)

[g(x) for x in xrange(12)] 
```

这个序列的下一个值是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T22:31:35.910

你试过了吗？

```
>>> g = lambda x:[lambda x:x*1, lambda x:x*x, lambda x:x*x*x, lambda x:42][x%4](x)
>>> [g(x) for x in xrange(12)]
[0, 1, 8, 42, 4, 25, 216, 42, 8, 81, 1000, 42] 
```

以下是每个值的计算方式：

```
[
 0,     # x is 0, x%4 is 0, so g(x) becomes (lambda x:x*1)(0) or 0*1
 1,     # x is 1, x%4 is 1, so g(x) becomes (lambda x:x*x)(1) or 1*1
 8,     # x is 2, x%4 is 2, so g(x) becomes (lambda x:x*x*x)(2) or 2*2*2
 42,    # x is 3, x%4 is 3, so g(x) becomes (lambda x:42)(3) or 42
 4,     # x is 4, x%4 is 0, so g(x) becomes (lambda x:x*1)(4) or 4*1
 25,    # x is 5, x%4 is 1, so g(x) becomes (lambda x:x*x)(5) or 5*5
 216,   # x is 6, x%4 is 2, so g(x) becomes (lambda x:x*x*x)(6) or 6*6*6
 42,    # x is 7, x%4 is 3, so g(x) becomes (lambda x:42)(7) or 42
 8,     # x is 8, x%4 is 0, so g(x) becomes (lambda x:x*1)(8) or 8*1
 81,    # x is 9, x%4 is 1, so g(x) becomes (lambda x:x*x)(9) or 9*9
 1000,  # x is 10, x%4 is 2, so g(x) becomes (lambda x:x*x*x)(10) or 10*10*10
 42     # x is 11, x%4 is 3, so g(x) becomes (lambda x:42)(11) or 42
] 
```

基本上`g(x)`以`x`作为参数调用列表中的一个函数，当在列表推导中调用`xrange`它时，它将循环遍历函数，每四个调用都是同一个函数。

我知道这只是一个有助于理解 Python 的练习，但您应该注意这是非常低效的代码，因为每次调用`g()`. 如果您确实需要这种行为，最好只创建一个`def`包含多个`if`语句的函数（这也会使代码更具可读性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:44:21.737

我会这样做以更好地了解正在发生的事情（如果您需要进一步解释，请发表评论）

```
In [44]: g = lambda x:[lambda x:x*1, lambda x:x*x, lambda x:x*x*x, lambda x:42][x%4](x)

In [45]: {x:g(x) for x in xrange(12)}
Out[45]: 
{0: 0,
 1: 1,
 2: 8,
 3: 42,
 4: 4,
 5: 25,
 6: 216,
 7: 42,
 8: 8,
 9: 81,
 10: 1000,
 11: 42} 
```

# vb.net - 如何从打印预览对话框中删除时间？

> ID：13810372
> 
> 赞同：0
> 
> 时间：2012-12-10T22:28:01.800
> 
> 标签：vb.net, printing, datagrid, print-preview

这是我的代码：

```
Imports System.Data.OleDb
Imports System.Drawing.Printing
Namespace Print
Public Class Form1

    Inherits System.Windows.Forms.Form

    Dim PrintC As PrinterClass
    Dim conn As OleDb.OleDbConnection

    Dim connectionString As String = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=..\\db1.mdb"

    Dim sql As String = String.Empty
    Dim ds As DataSet

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        FillDataGrid()
        '//create printerclass object
        PrintC = New PrinterClass(PrintDocument1, dataGrid)
    End Sub

    Private Sub FillDataGrid()

        Try

            Dim dt As New DataTable
            Dim ds As New DataSet

            ds.Tables.Add(dt)
            Dim da As New OleDbDataAdapter

            con.Open()
            da = New OleDbDataAdapter("SELECT * from klient ", con)

            da.Fill(dt)

            con.Close()

            dataGrid.DataSource = dt.DefaultView

            Dim dTable As DataTable
            For Each dTable In ds.Tables

                Dim dgStyle As DataGridTableStyle = New DataGridTableStyle
                dgStyle.MappingName = dTable.TableName
                dataGrid.TableStyles.Add(dgStyle)

            Next
            ' DataGrid settings
            dataGrid.CaptionText = "TE GJITHE KLIENTET"
            dataGrid.HeaderFont = New Font("Verdana", 12)
            dataGrid.TableStyles(0).GridColumnStyles(0).Width = 60
            dataGrid.TableStyles(0).GridColumnStyles(1).Width = 140
            dataGrid.TableStyles(0).GridColumnStyles(2).Width = 140
            dataGrid.TableStyles(0).GridColumnStyles(3).Width = 140
            dataGrid.TableStyles(0).GridColumnStyles(4).Width = 140
            dataGrid.TableStyles(0).GridColumnStyles(5).HeaderText = ""
            dataGrid.TableStyles(0).GridColumnStyles(5).Width = -1

        Catch ex As Exception

            MessageBox.Show(ex.Message)

        End Try
    End Sub

    Private Sub btnPrint_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPrint.Click
        'create printerclass object
        PrintC = New PrinterClass(PrintDocument1, dataGrid)

        PrintDocument1.Print()
    End Sub

    Private Sub btnPreview_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPreview.Click

        'create printerclass object
        PrintC = New PrinterClass(PrintDocument1, dataGrid)

        ''preview
        Dim ps As New PaperSize("A4", 840, 1150)
        ps.PaperName = PaperKind.A4
        PrintDocument1.DefaultPageSettings.PaperSize = ps

        PrintPreviewDialog1.WindowState = FormWindowState.Normal
        PrintPreviewDialog1.StartPosition = FormStartPosition.CenterScreen
        PrintPreviewDialog1.ClientSize = New Size(600, 600)

        PrintPreviewDialog1.ShowDialog()

    End Sub

    Private Sub PrintDocument1_PrintPage(ByVal sender As System.Object, ByVal e As System.Drawing.Printing.PrintPageEventArgs) Handles PrintDocument1.PrintPage
        'print grid

        Dim morepages As Boolean = PrintC.Print(e.Graphics)
        If (morepages) Then

            e.HasMorePages = True
        End If

    End Sub

End Class
End Namespace 
```

这就是数据在 DataGrid 中的外观（非常完美）......

![在此处输入图像描述](../Images/ba075f8ac9f1e3d1c746fe8cbcbb9aec.png)

这是我单击 PrintPreview 时的外观。（我不希望时间出现在那里，“12:00:00”部分。在数据库中，日期存储为短日期（2012 年 12 月 10 日）

![在此处输入图像描述](../Images/b3d9661058443dab24389a20caf4382d.png)

有人可以提出解决方法吗？

```
Imports System
Imports System.Windows.Forms
Imports System.Drawing
Imports System.Drawing.Printing
Imports System.Collections
Imports System.Data
Namespace Print
Public Class PrinterClass
    '//clone of Datagrid
    Dim PrintGrid As Grid

    '//printdocument for initial printer settings
    Private PrintDoc As PrintDocument

    '//defines whether the grid is ordered right to left
    Private bRightToLeft As Boolean

    '//Current Top
    Private CurrentY As Single = 0

    '//Current Left
    Private CurrentX As Single = 0

    '//CurrentRow to print
    Private CurrentRow As Integer = 0

    '//Page Counter
    Public PageCounter As Integer = 0

    '/// <summary>
    '/// Constructor Class
    '/// </summary>
    '/// <param name="pdocument"></param>
    '/// <param name="dgrid"></param>
    Public Sub New(ByVal pdocument As PrintDocument, ByVal dgrid As DataGrid)
        'MyBase.new()

        PrintGrid = New Grid(dgrid)
        PrintDoc = pdocument

        '//The grid columns are right to left
        bRightToLeft = dgrid.RightToLeft = RightToLeft.Yes

        '//init CurrentX and CurrentY
        CurrentY = pdocument.DefaultPageSettings.Margins.Top
        CurrentX = pdocument.DefaultPageSettings.Margins.Left

    End Sub

    Public Function Print(ByVal g As Graphics, ByRef currentX As Single, ByRef currentY As Single) As Boolean

        '//use predefined area
        currentX = currentX
        currentY = currentY

        PrintHeaders(g)

        Dim Morepages As Boolean = PrintDataGrid(g)

        currentY = currentY
        currentX = currentX

        Return Morepages

    End Function

    Public Function Print(ByVal g As Graphics) As Boolean

        CurrentX = PrintDoc.DefaultPageSettings.Margins.Left
        CurrentY = PrintDoc.DefaultPageSettings.Margins.Top
        PrintHeaders(g)
        Return PrintDataGrid(g)
    End Function

    '/// <summary>
    '/// Print the Grid Headers
    '/// </summary>
    '/// <param name="g"></param>
    Private Sub PrintHeaders(ByVal g As Graphics)

        Dim sf As StringFormat = New StringFormat

        '//if we want to print the grid right to left
        If (bRightToLeft) Then

            CurrentX = PrintDoc.DefaultPageSettings.PaperSize.Width - PrintDoc.DefaultPageSettings.Margins.Right
            sf.FormatFlags = StringFormatFlags.DirectionRightToLeft
        Else
            CurrentX = PrintDoc.DefaultPageSettings.Margins.Left
        End If
        Dim i As Integer
        For i = 0 To PrintGrid.Columns - 1

            '//set header alignment
            Select Case (CType(PrintGrid.Headers.GetValue(i), Header).Alignment)
                Case HorizontalAlignment.Left 'left 
                    sf.Alignment = StringAlignment.Near
                Case HorizontalAlignment.Center
                    sf.Alignment = StringAlignment.Center
                Case HorizontalAlignment.Right
                    sf.Alignment = StringAlignment.Far
            End Select

            '//advance X according to order
            If (bRightToLeft) Then

                '//draw the cell bounds (lines) and back color
                g.FillRectangle(New SolidBrush(PrintGrid.HeaderBackColor), CurrentX - PrintGrid.Headers(i).Width, CurrentY, PrintGrid.Headers(i).Width, PrintGrid.Headers(i).Height)
                g.DrawRectangle(New Pen(PrintGrid.LineColor), CurrentX - PrintGrid.Headers(i).Width, CurrentY, PrintGrid.Headers(i).Width, PrintGrid.Headers(i).Height)

                '//draw the cell text
                g.DrawString(PrintGrid.Headers(i).CText, PrintGrid.Headers(i).Font, New SolidBrush(PrintGrid.HeaderForeColor), New RectangleF(CurrentX - PrintGrid.Headers(i).Width, CurrentY, PrintGrid.Headers(i).Width, PrintGrid.Headers(i).Height), sf)
                '//next cell
                CurrentX -= PrintGrid.Headers(i).Width
            Else
                '//draw the cell bounds (lines) and back color
                g.FillRectangle(New SolidBrush(PrintGrid.HeaderBackColor), CurrentX, CurrentY, PrintGrid.Headers(i).Width, PrintGrid.Headers(i).Height)
                g.DrawRectangle(New Pen(PrintGrid.LineColor), CurrentX, CurrentY, PrintGrid.Headers(i).Width, PrintGrid.Headers(i).Height)

                '//draw the cell text
                g.DrawString(PrintGrid.Headers(i).CText, PrintGrid.Headers(i).Font, New SolidBrush(PrintGrid.HeaderForeColor), New RectangleF(CurrentX, CurrentY, PrintGrid.Headers(i).Width, PrintGrid.Headers(i).Height), sf)

                '//next cell
                CurrentX += PrintGrid.Headers(i).Width
            End If
        Next

        '//reset to beginning
        If (bRightToLeft) Then
            '//right align
            CurrentX = PrintDoc.DefaultPageSettings.PaperSize.Width - PrintDoc.DefaultPageSettings.Margins.Right
        Else
            '//left align
            CurrentX = PrintDoc.DefaultPageSettings.Margins.Left
        End If

        '//advance to next row
        CurrentY = CurrentY + CType(PrintGrid.Headers.GetValue(0), Header).Height

    End Sub

    Private Function PrintDataGrid(ByVal g As Graphics) As Boolean
        Dim sf As StringFormat = New StringFormat
        PageCounter = PageCounter + 1

        '//if we want to print the grid right to left
        If (bRightToLeft) Then
            CurrentX = PrintDoc.DefaultPageSettings.PaperSize.Width - PrintDoc.DefaultPageSettings.Margins.Right
            sf.FormatFlags = StringFormatFlags.DirectionRightToLeft
        Else
            CurrentX = PrintDoc.DefaultPageSettings.Margins.Left
        End If
        Dim i As Integer
        For i = CurrentRow To PrintGrid.Rows - 1
            Dim j As Integer
            For j = 0 To PrintGrid.Columns - 1

                '//set cell alignment
                Select Case (PrintGrid.Cell(i, j).Alignment)
                    '//left
                Case HorizontalAlignment.Left
                        sf.Alignment = StringAlignment.Near

                    Case HorizontalAlignment.Center
                        sf.Alignment = StringAlignment.Center

                        '//right
                    Case HorizontalAlignment.Right
                        sf.Alignment = StringAlignment.Far

                End Select

                '//advance X according to order
                If (bRightToLeft) Then
                    '//draw the cell bounds (lines) and back color
                    g.FillRectangle(New SolidBrush(PrintGrid.BackColor), CurrentX - PrintGrid.Cell(i, j).Width, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height)
                    g.DrawRectangle(New Pen(PrintGrid.LineColor), CurrentX - PrintGrid.Cell(i, j).Width, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height)

                    '//draw the cell text
                    g.DrawString(PrintGrid.Cell(i, j).CText, PrintGrid.Cell(i, j).Font, New SolidBrush(PrintGrid.ForeColor), New RectangleF(CurrentX - PrintGrid.Cell(i, j).Width, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height), sf)

                    '//next cell
                    CurrentX -= PrintGrid.Cell(i, j).Width
                Else
                    '//draw the cell bounds (lines) and back color
                    g.FillRectangle(New SolidBrush(PrintGrid.BackColor), CurrentX, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height)
                    g.DrawRectangle(New Pen(PrintGrid.LineColor), CurrentX, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height)
                    '//draw the cell text
                    '//Draw text by alignment
                    g.DrawString(PrintGrid.Cell(i, j).CText, PrintGrid.Cell(i, j).Font, New SolidBrush(PrintGrid.ForeColor), New RectangleF(CurrentX, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height), sf)

                    '//next cell
                    CurrentX += PrintGrid.Cell(i, j).Width
                End If

            Next

            '//reset to beginning
            If (bRightToLeft) Then
                '//right align
                CurrentX = PrintDoc.DefaultPageSettings.PaperSize.Width - PrintDoc.DefaultPageSettings.Margins.Right
            Else
                '//left align
                CurrentX = PrintDoc.DefaultPageSettings.Margins.Left
            End If

            '//advance to next row
            CurrentY += PrintGrid.Cell(i, 0).Height
            CurrentRow += 1
            '//if we are beyond the page margin (bottom) then we need another page,
            '//return true
            If (CurrentY > PrintDoc.DefaultPageSettings.PaperSize.Height - PrintDoc.DefaultPageSettings.Margins.Bottom) Then

                Return True
            End If
        Next
        Return False

    End Function
End Class
End Namespace 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:43:25.870

阿尔博，

我认为在

```
 '//draw the cell text
 g.DrawString(PrintGrid.Cell(i, j).CText, PrintGrid.Cell(i, j).Font, New SolidBrush(PrintGrid.ForeColor), New RectangleF(CurrentX - PrintGrid.Cell(i, j).Width, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height), sf) 
```

看看到底发生了什么。在不运行这样的断点的情况下，从这里的资源[中](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，我的第一个猜测可能是这样的：

```
If j = PrintGrid.Columns - 1 Then
    Dim pattern As String = "MM-dd-yy"
    If DateTime.TryParseExact(PrintGrid.Cell(i, j).CText, pattern, Nothing, DateTimeStyles.None, PrintGrid.Cell(i, j).CText) Then
    g.DrawString(PrintGrid.Cell(i, j).CText, PrintGrid.Cell(i, j).Font, New SolidBrush(PrintGrid.ForeColor), New RectangleF(CurrentX - PrintGrid.Cell(i, j).Width, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height), sf)
Else
     g.DrawString(PrintGrid.Cell(i, j).CText, PrintGrid.Cell(i, j).Font, New SolidBrush(PrintGrid.ForeColor), New RectangleF(CurrentX - PrintGrid.Cell(i, j).Width, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height), sf)
End If 
```

这会尝试将列的文本（在您的情况下为 PrintGrid.Columns - 第一个单元格）解析为日期，如果成功，则它将新格式化的文本放回列中，然后再将其发送到打印子。我非常怀疑这段代码会按原样工作，但是通过一些调试和将正确的字符串应用到日期时间格式......我认为这是正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:55:45.760

根据@SacredFaith 发布的答案，我以不同的方式解决了这个问题。这是使用字符串拆分的解决方案：

```
 '//Draw text by alignment
                    ' g.DrawString(PrintGrid.Cell(i, j).CText, PrintGrid.Cell(i, j).Font, New SolidBrush(PrintGrid.ForeColor), New RectangleF(CurrentX, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height), sf)

                    If j = 3 Or j = 4 Then
                        Dim st As String = PrintGrid.Cell(i, j).CText.ToString
                        Dim t As Array = st.Split(" ")
                        g.DrawString(t(0), PrintGrid.Cell(i, j).Font, New SolidBrush(PrintGrid.ForeColor), New RectangleF(CurrentX, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height), sf)
                    Else
                        g.DrawString(PrintGrid.Cell(i, j).CText, PrintGrid.Cell(i, j).Font, New SolidBrush(PrintGrid.ForeColor), New RectangleF(CurrentX, CurrentY, PrintGrid.Cell(i, j).Width, PrintGrid.Cell(i, j).Height), sf)
                    End If 
```

# java - 如何在 GlassFish 上构建从 JAX-WS 到 Swing 客户端的推送通知？

> ID：13810374
> 
> 赞同：5
> 
> 时间：2012-12-10T22:28:22.417
> 
> 标签：java, web-services, swing, notifications

我有一个广泛分布的 java swing 应用程序，它是来自 Glassfish 3.1.2 服务器上的 JAX WebService EJB 的 Web 服务客户端。

我希望能够向所有在阅读之前保持活动状态的用户分发字符串通知。通知只需要存在于 Swing 客户端中。

我创建了一个超级用户门户网站来输入字符串数据并将其保存到数据库中。

**我的问题是**：

1.  向我的客户（推送）分发此数据字符串通知的最佳技术是什么？
2.  我应该如何构建数据库以了解通知是否已被查看？（所以我可以停止在客户端显示“新通知”）

*或者，如果有参考可以很好地工作的指南，我找不到。*

我的想法：

*   让客户端每 10 分钟调用一次 Web 服务以检查是否有任何新通知
*   为数据库创建通知表和看到的通知。将我的用户表链接到通知表。看到的通知非常基本，只有 3 列：NotificationID、UserID、TimeSeen。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T23:47:59.117

模拟推送通知的一种方法是[长轮询](http://en.wikipedia.org/wiki/Push_technology#Long_polling)。这种技术称为[Comet 或 Reverse AJAX](http://en.wikipedia.org/wiki/Reverse_Ajax)。虽然它在基于 REST 的服务中更为常见，但在 JAX-WS 中也可以轻松完成。

对于 JAX-WS，您需要调查：

*   [异步 Web 服务调用](http://today.java.net/pub/a/today/2006/09/19/asynchronous-jax-ws-web-services.html)
*   [JAX-WS 客户端 API ... 使用 JAX-WS 异步编程模型](http://www.ibm.com/developerworks/websphere/library/techarticles/0804_sedov/0804_sedov.html)

> 让客户端每 10 分钟调用一次 Web 服务以检查是否有任何新通知

与长轮询不同，您可以立即建立初始客户端连接。但不是服务器立即响应，而是挂在连接上（异步）。然后，当需要推送通知时，它会在现有连接上做出响应。

使用这种技术，一旦服务器上的信息可用，它就会被“推送”到客户端。

> 为数据库创建通知表和看到的通知。将我的用户表链接到通知表。看到的通知非常基本，只有 3 列：NotificationID、UserID、TimeSeen。

听起来不错。将其公开为 JAX-WS 服务。当客户端收到消息时，让他们使用 NotificationID 调用它。

就像是：

```
NotificationService svc = ...;
UserId userId = ...;

AsyncHandler<Notification> handler = new AsyncHandler<Notification>()
{
    public void handleResponse (Response<Notification> response)
    {
       Notification notification = response.get();

       // update swing gui

       NotificationID notificationId = notifcation.getId();

       svc.markNotificationAsSeen(userId, notificationId);

       // continue polling forever (or put in some logic to stop)
       svc.getNotificationAsync(userId, this);
    }
};

Future<?> invocation = svc.getNotificationAsync(userId, handler); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T22:35:46.987

如果 10 分钟通常足够了，并且您确定您的用户可以等待那么久，请坚持每 10 分钟轮询一次服务器。

如果您需要（几乎）实时通知，请查看 JMS（尤其是[主题](http://docs.oracle.com/javaee/6/api/javax/jms/Topic.html)）。[HornetQ](http://www.jboss.org/hornetq)是其中一种实现，如果您使用 JBoss，它很容易使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T22:52:59.843

我建议使用消息队列服务器。就像有人建议的 HornetQ 或 ActiveMQ 一样，如果您愿意，可以将它们嵌入到您的服务器上。

# javascript - jQuery找出哪个元素 $(this) 实际上是对哪个元素的引用

> ID：13810375
> 
> 赞同：-2
> 
> 时间：2012-12-10T22:28:24.180
> 
> 标签：javascript, jquery, dom, animation

好的，我知道它的实际含义是什么`$(this)`，并且`this`是朝着什么方向发展的。但是我正在做一个小项目，我试图将我拥有的一些重复代码整合到可重用的函数中。

有了它，我有一个函数，我想在同一个父 div 中为它下面的特定对象设置动画。哪个有效，这已确认。但是，我有两个事件希望从当前触发。

一个是加载事件，`.ready()`我在符合此要求的元素上运行一个`$.each()`循环，并且效果很好。将有问题的元素传递给我使用的函数

`$(this)`单独作为函数的参数，函数采用该参数并根据该项目的规范对其进行处理。但是，问题出在哪里是我想用来触发此功能的第二个事件。

这是基于每个元素的基于点击的事件。因为我已经尝试过`.click()`，它们中`.live()`似乎是唯一能识别物体的东西。我目前在这个项目上坚持使用 jQuery 1.4.4。所以对我来说不可用，否则我也会尝试。我也很困惑为什么或不会工作，尽管元素使用 DOM 渲染，但是这与我目前正在寻找的完全不同。`.delegate()``live()``.on()``delegate()``click()``live()`

底线是，我在这个工作示例中通过前面提到的循环调用我的函数的方式：

```
$('.panels h3').each(function()
{
    accordionUpDown($(this), false);
}); 
```

这个基于点击的示例不起作用，但人们会认为它应该但它没有。

```
$('.panels h3').live('click',function()
{
    accordionUpDown($(this), true);
}); 
```

这里也供参考的是函数本身：

```
function accordionUpDown(theElem, fx)
{
    //alert('test'+theElem);
    if(theElem.hasClass('active'))
    {
        var $elem = theElem.next('div');
        var elemY = ($elem.children('div').innerHeight()+2);

        if(fx == false)
        {
            $elem.addClass('active').css({height:elemY+'px'});
        }
        else
        {
            $elem.addClass('active').animate({height:elemY+'px'}, 2000);
        }
    }
    if(!theElem.hasClass('active'))
    {
        var $elem = theElem.next('div');
        var elemY = '0px';
        if(fx == false)
        {
            $elem.css({height:elemY}).removeClass('active');
        }
        else
        {
            $elem.animate({height:elemY}, 2000).removeClass('active');
        }
    }
} 
```

现在为了节省你们这些人的时间，问我为什么不直接使用类似 jQuery UI 的东西来获得相同的效果，那么简单地说它是一个样式问题，以及一旦这些功能正确就位后计划的一些其他功能。无论哪种情况，定制需求都超越了简单的概念。

无论如何，在点击的情况下，我开始怀疑是否`$(this)`以某种方式拾取了错误的东西，如果是，那么它可能没有按预期工作，所以如果是这样的话，我试图弄清楚我是如何可以找到`$(this)`实际上是哪个元素

快速编辑，对于那些想要看到这一切的人，我制作了一个小提琴版本。 [http://jsfiddle.net/sDeq2/](http://jsfiddle.net/sDeq2/)也包含 HTML 部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:33:20.447

你不能打印出 id 或其他可识别的属性吗？

```
$(this).attr('id') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:35:22.357

看来我误解了最初的方法。我将不得不根据您遇到的问题的描述（.live 有效，但 .click 无效）建议您在 DOM 实际准备好之前执行代码（在 .ready() 调用中）。

所有这三个事件附件场景都可以在上下文之外正常工作。 [http://jsfiddle.net/CsP2g/](http://jsfiddle.net/CsP2g/)

```
$(document).ready(function(){
    $('.someClass h3').click(function(){
        alert('fired click event that was bound to multiple items at once using .click()');
    });

    $('.someClass h3').each(function(){
        $(this).click(function(){
          alert('fired click event that was bound to one item at a time using .each and .click()');
        });
    });

    $('.someClass h3').live("click", function(){
        alert('fired click event that was bound to multiple items at once using .live("click", func)');
    });
}); 
```

# c# - 创建对象时对象引用为空

> ID：13810378
> 
> 赞同：0
> 
> 时间：2012-12-10T22:28:38.340
> 
> 标签：c#, asp.net

我试过四处搜索，但大多数答案都是关于实例化一个不存在的列表，或者不是我想要的。我遇到的大多数问题都没有使用“新”关键字。

这是我所拥有的：

```
using (SqlCmd cmd = new SqlCmd("SELECT * FROM [User] WHERE Login = @Login", false))
{
  cmd.AddIString....
} 
```

我的问题在第一行。在我尝试运行它之前，Visual Studio 很好。然后它抛出一个错误`Object reference not set to an instance of an object`。即使看起来像这样，它也会抛出错误：

```
using (SqlCmd cmd = new SqlCmd(
  "SELECT * " +
  "FROM [User] " + 
  "WHERE Login = @Login", false))
{
  // Code here...
} 
```

有任何想法吗？我已经重写了它，查看了做同样事情的其他方法，使用谷歌等大约 2 个小时，但没有真正的结果。关闭 Visual Studio 也没有做任何事情，除了导致以前工作的代码出现同样的问题。

编辑：我确实说过第一行，但这里更清楚一点（第 74 行）：

```
Line 72:     {
Line 73:         //using (SqlCmd cmd = new SqlCmd("SELECT * FROM [User]  WHERE Login = @Login", false))
Line 74:         using (SqlCmd cmd = new SqlCmd("SELECT * FROM [User] WHERE Login = @Login", true))
Line 75:         {
Line 76:             cmd.AddIString("@Login", 100, login); 
```

# google-app-engine - Google App Engine，更改 ASCII 表上的字符

> ID：13810386
> 
> 赞同：1
> 
> 时间：2012-12-10T22:29:13.307
> 
> 标签：google-app-engine, unicode, ascii, unicode-string

我正在尝试执行以下操作：

在 HTML TextArea 中，将 ASCII 表中输入文本的每个字符的位置更改 13 个位置（在我的代码中是 rot13 函数）。

这是Rot13函数：

```
def rot13(s):
    for a in s:
       print chr(ord(a)+13) 
```

它确实以这种方式工作，但它也会打印标题信息并省略最后一个字符。因此，当我在框中输入单词“Hello”时，结果是：

```
U r y y | Status: 200 Content-Type: text/html; charset=utf-8 Cache-Control: no-cache Content-Length: 4 None 
```

那么该怎么做呢？

另外，当我尝试这样做时：

```
def rot13(s):
    for a in s:
       chr(ord(a)+13)
    return s 
```

它返回了我在文本中输入的相同文本，没有我认为会有的变化。所以据我了解，它不会直接修改's'吗？那么该怎么做呢？

整个代码如下：

```
import webapp2
import cgi
def escape_html(s):
    return cgi.escape(s, quote = True)

form = """<html>
<head><title>Rot13</title></head>
<body>
<form method="post">
Please enter your text here:<br>
<textarea name="text"></textarea>
<input type="submit">
</form>
</body>
</html>
"""

def rot13(s):
    for a in s:
       print chr(ord(a)+13)

class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(form)

    def post(self):
        entered_text = self.request.get('text')
        self.response.out.write(rot13(entered_text))

app = webapp2.WSGIApplication([
    ('/', MainHandler)
], debug=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:30:15.720

首先，永远不要`print`在 WSGI 应用程序中使用。

然而，就 rot13 而言，Python 已经支持这一点：

```
out = in.encode('rot13') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:37:02.403

**编辑：**这是一个在字符串上执行实际 ROT13 的函数（我很抱歉 - 我不知道这是一个实际的算法 - 我在上一个答案中提供的方法不会执行真正的 ROT13）。但是，如果您正在寻找一种有效的方法来实现它，那么您将很难击败@NickJohnson 的回答 :) 这根据[此处](http://en.wikipedia.org/wiki/ROT13#Description)的表进行转换，大写映射到大写，小写映射到小写。这将创建大写和小写字母的映射，通过将组件分成两半并翻转它们来映射到它们的 ROT13 等效项。然后，您将 'normal' 和 'reversed' 列表压缩在一起，并根据生成的键/值对创建一个字典：

```
In [1]: import string

In [2]: w = 'SecretWord'

In [3]: uc, lc = string.uppercase, string.lowercase

In [4]: c_keys = uc + lc

In [5]: c_val = uc[13:] + uc[:13] + lc[13:] + lc[:13]

In [6]: d = dict((k, v) for k, v in zip(c_keys, c_val))

In [7]: ''.join(d[i] for i in w)
Out[7]: 'FrpergJbeq' 
```

为了更容易可视化，下面是键/值字符串的样子：

```
In [8]: c_keys
Out[8]: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'

In [9]: c_val
Out[9]: 'NOPQRSTUVWXYZABCDEFGHIJKLMnopqrstuvwxyzabcdefghijklm' 
```

* * *

而不是 using `print`，你会想要使用`self.response.out.write`（就像你在其他地方一样）。这会将结果写入发送给请求者的 HTTP 响应（请注意，标头也是 的一部分`response`，但除非在使用时指定，否则不会打印到屏幕上`self.response.out.write`）。在您的情况下，简化版本可能如下所示：

```
def rot13(s):
    return ''.join(chr(ord(a)+13) for a in s) 
```

它不是打印每个字符，而是使用您定义的函数构造一个字符串。这将返回该字符串，结果将被写为`response`. 您还可以添加额外的 HTML 格式等，但这应该有望让您走上正轨。

另外，关于为什么您的第二个功能不起作用：

```
def rot13(s):
    for a in s:
       chr(ord(a)+13)
    return s 
```

它返回`s`不变的原因是因为尽管您正在执行该`chr(ord(a)+13)`步骤，但您并没有对它做任何事情。您的函数绝对是在正确的轨道上，因此使其返回与上面示例中的输出相同的一种方法是创建一个空列表，该列表将存储每个修改后的字符，然后`join`是最后的列表：

```
def rot13(s):
    # This is your container
    l = []
    for a in s:
       # Now, instead of just running the function, we add the result to the list
       l.append(chr(ord(a)+13))
    # And finally, we use join to join all the list elements together and return
    # E.g. If your list is ['a', 'b', 'c'], this returns the string 'abc'
    return ''.join(l) 
```

# php - codeigniter如何从两个表中检索数据

> ID：13810389
> 
> 赞同：0
> 
> 时间：2012-12-10T22:29:36.437
> 
> 标签：php, codeigniter

我有两张桌子：

```
users: id, name, email

user_experience: id_exp, user_id, exp_date 
```

有多个用户，每个用户都有多种体验。

例如

用户：

```
1, david, david@david.com 
```

与三种体验有关

```
user_experience:

1, 1, 1/1/2012
2, 1, 2,2,2012
3, 1, 3,3,2012 
```

如何检索数据，以便可以在如下视图中显示它：

```
Name   / email            / Date of experience

david, david@david.com    1/1/2012

                          2/2/2012

                          3/3/2012

joe,   joe@joe.com        1/1/2012

                          2/2/2012

                          3/3/2012 
```

我的代码目前：

控制器

```
$data['nurses'] = $this->users_model->get_nurse(); 
```

模型

```
public function get_nurse() {
    $this->db->select('name,email,date');
    $this->db->from('users');
    $this->db->join('user_experience', 'users.id = user_experience.user_id');
    $query = $this->db->get();

    return $query->result_array();
} 
```

看法

```
<?php foreach ($rows as $row): ?>
echo $row['first_name'];
echo $row['email'];
echo $row['exp_date']; 
```

但是，这会为每个用户和 exp 组合显示一个新行。我希望用户只显示一次。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:37:23.663

您的“获得护士”职能不应包括经验，因为它们是独立的实体。让护士只返回护士信息，然后为每个护士 get_experiences() 并显示这些信息。所以你的控制器看起来像这样。

```
$data['nurses'] = $this->users_model->get_nurse();
foreach($data['nurses'] as $nurseObj) {
   $expM = new ExperienceModel($nurseObj->id);
   // Display/pass/generate nurse info
   $nurse_experiences = $expM->getExperiences();
   foreach($nurse_experiences as $ne) {
        // experience info
   }
} 
```

# php - Fancybox 处理某些链接，但不处理其他链接

> ID：13810390
> 
> 赞同：1
> 
> 时间：2012-12-10T22:29:41.570
> 
> 标签：php, wordpress, fancybox

我目前在使用 fancybox 时遇到了一些问题。如果您查看下面的链接，您会看到我已经在投资组合框上运行它，但不在 wp_list_pages 命令生成的顶部菜单栏中。我尝试使用 jquery 附加“fancybox”一个类，并且在运行 fancybox 脚本时还针对元素本身，但似乎没有任何效果。

[http://www.astwood.co.uk/testsite/wordpress/](http://www.astwood.co.uk/testsite/wordpress/)

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:36:45.473

没关系，我破解了，我必须添加

```
data-fancybox-type="iframe" 
```

通过将其添加到函数文件中，到我使用 wp_list_pages 所做的每个链接：

```
add_filter('wp_list_pages', create_function('$t', 'return str_replace("<a ", "<a data-fancybox-type=\"iframe\" ", $t);')); 
```

# php - 太大的提交不通过？

> ID：13810392
> 
> 赞同：-1
> 
> 时间：2012-12-10T22:29:48.200
> 
> 标签：php, sql, submit

`submit`当我按下我的页面时，我有 74 条文本要发送到我的数据库。

但是当我按下`submit`它们并没有插入我的数据库时？当我这样做`data 1 = a, data 2 = b .... data 74 = bz`时，它正在通过。为什么太大的数据流不插入？

我想放置代码，但放在这里太大了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:38:11.373

检查 php.ini 文件中 post_max_size 的值，以防它设置得太低。

有关详细信息，请参阅[此处](http://uk3.php.net/manual/en/ini.core.php#ini.post-max-size "这里")的手册

# sql - 给定客户端 SQL 的所有类型

> ID：13810396
> 
> 赞同：0
> 
> 时间：2012-12-10T22:30:04.757
> 
> 标签：sql, database, oracle

好的，所以我有一个这样的数据库设置：

```
Client {Clientt#, FirstName, LastName, Email, city};
RType {TName, Price, TRooms};
Location {Confirm#, Arrival, Departure, Origin, Client# (references Guest), Type (references RoomType)} 
```

我几乎需要创建 SQL 语句，为我提供所有类型的所有客户的列表。

我写了这个，但它不起作用：

```
SELECT Client#, FirstName, LastName, Type
FROM Client, Location
WHERE Client.Client# = Location.Client# and Location.Type = (select count(DISTINCT TName) from RType); 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:38:08.737

我会使用该`having`子句来做到这一点。问题是：哪些客户端具有与 RType 表中相同数量的位置？这假定所有 Location.Types 都在此表中。

```
SELECT Client#
FROM Location l
group by Client#
having count(distinct l.type) = (select count(DISTINCT TName) from RType) 
```

如果您确实需要，您可以加入来自客户的附加信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:37:37.123

用这个：

```
SELECT Client#, FirstName, LastName, Type
FROM Client, Location
WHERE Client.Client# = Location.Client# and 
Location.Type IN (select DISTINCT TName from RType) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:41:06.000

该 COUNT 函数返回您在其中拥有多少类型的计数，因此除非 Location.Type = 4，否则这将不起作用。删除 COUNT 或仅加入如下表：

```
SELECT t1.Client#, t1.FirstName, t1.LastName, t2.Type
FROM Client t1
    INNER JOIN Location t2
        ON t1.Client# = t2.Client# 
```

# javascript - Javascript 库 - 在鼠标单击时放大缩略图并隐藏其他缩略图

> ID：13810397
> 
> 赞同：1
> 
> 时间：2012-12-10T22:30:20.313
> 
> 标签：javascript, gallery, thumbnails, image-enlarge

我正在用 javascript 制作一个画廊，但我的代码有问题。我有六个缩略图，我希望能够单击其中一个并在隐藏其他缩略图时将其放大，然后在再次单击时缩小。我找到了一种相当重复的方法，但它只适用于其中一张照片，不适用于其他照片，我不知道为什么！

这是我的javascript：

```
function get_thumbs1() {
document.getElementById('thumbnailwrapper').style.visibility='visible';
document.getElementById('photo1a').style.visibility='hidden';
}
function get_big1() {
document.getElementById('thumbnailwrapper').style.visibility='hidden';
document.getElementById('photo1a').style.visibility='visible';
}

function get_thumbs2() {
document.getElementById('thumbnailwrapper').style.visibility='visible';
document.getElementById('photo2a').style.visibility='hidden';
}
function get_big2() {
document.getElementById('thumbnailwrapper').style.visibility='hidden';
document.getElementById('photo2a').style.visibility='visible';
} 
```

等所有六张照片，只是改变数字

我的源代码使它变大：

```
<div id="thumbnailwrapper">
<a href="#" onMouseOver="hoverPhoto1()" onMouseOut="unHoverPhoto1()" onClick="get_big1()">  <div id="photo1"></div></a>
<a href="#" onMouseOver="hoverPhoto2()" onMouseOut="unHoverPhoto2()" onClick="get_big2()"><div id="photo2"></div></a>
</div> 
```

等其他人

为了让它再次变小，

```
<div id="largeimage_wrapper">
<a href="#" onClick="get_thumbs1()"><div id="photo1a"></div></a>
<a href="#" onClick="get_thumbs2()"><div id="photo2a"></div></a>
</div> 
```

等等

请帮我！谢谢 ：）

# scala - 奇怪的隐式scala编译错误

> ID：13810399
> 
> 赞同：1
> 
> 时间：2012-12-10T22:30:24.397
> 
> 标签：scala

我在一个抽象类中定义了这个方法：

```
abstract class RichTable[T](name: String) extends Table[T](name) {
    def insert(model : T) = Database { implicit db: Session =>
    *.insert(model.copy(id = getNextId(classOf[T].getSimpleName())))
  }
  //other methods which are fine
} 
```

它 ( `model.copy`) 说：

```
could not find implicit value for evidence parameter of type scala.slick.lifted.TypeMapper[T] 
```

我根本不知道如何解决这个问题。我是一个 scala 初学者，我只是坚持这一点。任何人都可以给我一个线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:42:51.287

证据参数是函数的柯里化隐式参数，如`model.copy(id)(implicit typeMapper)`. 您需要声明`implicit val typeMapper: scala.slick.lifted.TypeMapper[T] = something`. 在 的来源中搜索 F3 `model.copy`。

**编辑**

不太对，改变`def insert(model: T) to def insert[T: ClassManifest](model: T)`应该可以解决问题。为什么？

在您的函数内部，您使用`classOf[T]`，但 T 的实际类型在运行时被删除，并且不清楚`getSimpleName()`应该调用哪个类。所以你应该声明一个带`ClassManifest`绑定的类型参数，并且应该自动添加一个适当类型的隐式参数`[T](model: T)(implicit evidence$1: ClassManifest[T])`

# parallel-processing - OpenMP 中使用循环的并行部分

> ID：13810400
> 
> 赞同：3
> 
> 时间：2012-12-10T22:30:25.943
> 
> 标签：parallel-processing, openmp, sections

我想知道是否有任何技术可以使用 for 循环在 OpenMp 中创建并行部分。

例如，我不想创建 n 个不同的 #pragma omp 部分，而是使用 n 次迭代**for 循环**创建它们，每个部分都有一些变化的参数。

```
#pragma omp parallel sections
{
   #pragma omp section
   {
      /* Executes in thread 1 */
   } 
   #pragma omp section
   {
      /* Executes in thread 2 */
   } 
   #pragma omp section
   {
      /* Executes in thread n */
   } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T22:39:45.110

使用显式 OpenMP 任务：

```
#pragma omp parallel
{
   // Let only one thread create all tasks
   #pragma omp single nowait
   {
       for (int i = 0; i < num_tasks; i++)
          #pragma omp task
          {
              // Code for task with parameters, based on i
          }
   }
   // Let the threads process all tasks
   #pragma omp taskwait

   // Further parallel processing ...
} 
```

OpenMP 指令后面的代码块`task`是显式任务。显式任务排队等待稍后执行。该`taskwait`指令的作用类似于`barrier`，但用于任务。另请参阅[this answer](https://stackoverflow.com/a/13789119/1374437) to a similar question。

任务可以递归地创建其他任务。因此，显式任务可用于处理图形和树。但要注意开销 - 它比大多数其他构造的开销更大，并且与来自循环的开销非常相似`schedule(dynamic)`。此外，任务内部引用的外部范围的变量默认为`firstprivate`.

请注意，显式任务是 OpenMP 3.0 中添加的功能。符合早期 OpenMP 版本的编译器可能不支持该`task`指令。几乎所有现代编译器都支持 OpenMP 3.0 或更高版本，只有 Microsoft Visual C++ 例外，它只支持 OpenMP 2.0（即使在 VS2012 中）。

# silverlight - Silverlight Dispatcher 锁定，停止处理队列中的任务

> ID：13810404
> 
> 赞同：0
> 
> 时间：2012-12-10T22:30:40.483
> 
> 标签：silverlight

有没有人遇到过这个？Dispatcher 有时会在应用程序启动后立即进入停止处理其队列的状态。队列只是构建和构建，而 Dispatcher 什么都不做。UI 线程是响应式的。最好的部分是这个问题是不确定的。有时会出现，有时不会。如果我在启动时加载一个大文件，它更有可能出现。我的应用程序做了很多事情，我不知道从哪里开始调试。希望我可以检查 Dispatcher 的代码，但这就是使用闭源框架时得到的结果。该死的 MS 和该死的越野车 Silverlight。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:12:43.940

这不能回答您的问题，但这里有 Telerik 提供的免费工具，您可以使用它来检查 Dispatcher 的代码：
[http ://www.telerik.com/products/decompiler.aspx](http://www.telerik.com/products/decompiler.aspx)

您也可以使用 Reflector，但它不是免费的（14 天试用）：
[http ://www.reflector.net/](http://www.reflector.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:26:35.217

Reflector 帮助调试了 Dispatcher（它生成 PDB 并很好地集成）。看起来 Silverlight Dispatcher 只是本机代码调度程序的一个瘦包装器。包装器仅处理 BeginInvoke 委托的排队并在本机调度程序调用调度程序上的回调时运行它们。当队列为空且第一个委托已排队时，Dispatcher 会提醒 RuntimeHost 它应该在有机会时回调 Dispatcher。

我关于错误的理论（在运行 Out-of-Browser 时肯定会发生，但不确定 In-Browser 时）是，如果 Dispatcher 请求 RuntimeHost 在错误的时间回调（例如，当应用程序启动未完成或 RuntimeHost 是处理很多新的 UI 元素......不能准确地说），RuntimeHost 忘记了回调。Dispatcher 从不第二次询问它，也从不做任何工作。

一种解决方法可能是使用 DispatcherTimer（这似乎没有错误......当 Dispatcher 卡住时，我的 DispatcherTimers 继续滴答作响）。最简单的 Dispatcher 替代品可能是复制 Dispatcher 反编译的源代码，其中包括基于 DispatcherTimer 的代码路径。

# api - extjs 网格 dnd 插件不创造价值

> ID：13810406
> 
> 赞同：0
> 
> 时间：2012-12-10T22:30:57.960
> 
> 标签：api, extjs, extjs4, store, drag-and-drop

我复制了这个例子，并定义了我的模型和商店。 [http://cdn.sencha.com/ext-4.1.1a-gpl/examples/dd/dnd_grid_to_grid.html](http://cdn.sencha.com/ext-4.1.1a-gpl/examples/dd/dnd_grid_to_grid.html)

```
 proxy:{
            type:'ajax',
            api:{
                create: '/msDx2PlaylistAudio/create',
                update: '/msDx2PlaylistAudio/create',
                destroy:'/msDx2PlaylistAudio/delete'
            },

            url:'/msDx2Playlist/loadData',

            reader:{
                type:'json',
                root:'data'
            } 
```

如您所见，我将设置 api 创建、更新和销毁操作。但是当我拖放我的网格行时，我的商店只会破坏和加载动作。我不明白为什么商店不执行任何创建...在另一个我有一个网格自动同步的应用程序中工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:24:40.783

至少在 4.1.1 中，问题在于您拖动的记录`phantom`设置为 false。处理 drop 的代码如下所示，您将看到在将 drop records`phantom`标志插入新存储之前，无需将其设置为 true。

这似乎是一个错误。

```
Ext.define('Ext.grid.ViewDropZone', {
    extend: 'Ext.view.DropZone',

    handleNodeDrop : function(data, record, position) {
        var view = this.view,
            store = view.getStore(),
            index, records, i, len;

        // If the copy flag is set, create a copy of the models
        if (data.copy) {
            records = data.records;
            data.records = [];
            for (i = 0, len = records.length; i < len; i++) {
                data.records.push(records[i].copy());
            }
        } else {
            /*
             * Remove from the source store. We do this regardless of whether the store
             * is the same bacsue the store currently doesn't handle moving records
             * within the store. In the future it should be possible to do this.
             * Here was pass the isMove parameter if we're moving to the same view.
             */
            data.view.store.remove(data.records, data.view === view);
        }

        index = store.indexOf(record);

        // 'after', or undefined (meaning a drop at index -1 on an empty View)...
        if (position !== 'before') {
            index++;
        }
        store.insert(index, data.records);
        view.getSelectionModel().select(data.records);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:54:54.010

[autoSync](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-cfg-autoSync)默认为 false，设置为 true。

var secondGridStore = Ext.create('Ext.data.Store', { model: 'DataObject' **autoSync:true** });

# jquery - 如何解决 AJAX $.post 问题？

> ID：13810409
> 
> 赞同：1
> 
> 时间：2012-12-10T22:31:13.993
> 
> 标签：jquery, ajax

我有最奇怪的 AJAX 错误（或严重的缺乏经验）。在 $_POST 请求之后，只有 的内容`div#content`应该被更新，没有别的，但是，我的整个页面布局似乎中断了。

我的布局很简单：

`<header>..</header><nav>..</nav>`

`div#left-sidebar`- `div#content`-`div#right-sidebar`

`<footer>..</footer>`

使用的Javascript如下：

```
$("#terms").submit(function(event) {
    if ($("#content #inp_iRead").is(":checked")) {
        event.preventDefault();
        $("#content img[alt=loading]").show();
        $("#content #terms").hide();
        $.post("reg", {
            ajax_reg: true,
            iRead: 1
        },
        function(data) {
            $("#content").html(data).find("#content");
        }, 
    "html");
        }
    }); 
```

`#terms`是表单 ID 并且`#inp_iRead`是一个复选框。我想要的是`div#content`用`div#content`返回的更新我的（在这种情况下它只包含字符串`foo :)`）。

以下是我的期望（在关闭 JavaScript 时出现）： ![期望](../Images/a1d382597eecf4fda9ebf5d6555e9d05.png)

并收到结果： ![结果](../Images/f408a10233a0f2a9e61f3d0af6a27540.png)

我在 AJAX 方面的经验非常有限，但是，按照所有教程以及到目前为止我所知道的，这段代码应该可以工作。

**我试图解决这个问题**是使用`filter()`而不是`find()`，它返回了相同的结果。在我看来，**一种可能的解决方法**是让脚本返回一个 JSON 对象并`div#content`使用它进行更新，但是，我更感兴趣的是*修复***应该**工作的代码，而不是更改使用的方法。

任何建议都受到高度赞赏。

**编辑**：原因`if ($("#content #inp_iRead").is(":checked"))`是否则我的其他实时表单验证脚本不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:36:36.827

我会改用这种`load()`方法。这要简单得多：

```
$('#content').load('reg #content > *', {
    ajax_reg: true,
    iRead: 1
}); 
```

`reg #content > *`告诉`.load()`加载`reg`和替换元素的内容`#content > *`。

当您将数据传递给`load`函数时，它会将 GET 转换为 POST。

# maven - MVN Selenium Testng -- 如何通过 pom.xml 将参数从命令行传递到 testsuite.xml

> ID：13810411
> 
> 赞同：2
> 
> 时间：2012-12-10T22:31:21.060
> 
> 标签：maven, selenium, parameters, testng, selenium-webdriver

我有一个使用 Maven+Testng 的 Selenium 项目。我将某些参数传递给 pom 中的特定配置文件，如下所示 -

```
mvn -PprofileName -Dparam1=%p% -Dparam2=%q% -Dparam3=%r% test 
```

该配置文件依次引用特定的 xml 文件，如下所示——

```
<suiteXmlFiles>
                                  <suiteXmlFile>C:\path\to\xml\file\testsuite.xml</suiteXmlFile>
</suiteXmlFiles> 
```

现在，参数可以很好地从命令行传递到 pom，它甚至会打开 testsuite.xml 并运行其中的所有测试。但是，只有当我在 testsuite.xml 文件中硬编码上述参数时，这才有效。

如何确保这些参数从 pom 传输到 testsuite.xml？我已经尝试过类似下面的方法，但它不起作用（我对它的工作没有寄予厚望，但我还是尝试了）

```
<parameter name="param1"  value="$p" />
<parameter name="param2"  value="$q" />
<parameter name="param3"  value="$r" /> 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:54:10.210

这是执行此操作的一种方法

您可以在代码中传入`mvn test -Dcustomproperty=yourvalue` 并访问它`System.getProperty("customproperty")`。

# json - FlexJSON 无法反序列化日期

> ID：13810413
> 
> 赞同：4
> 
> 时间：2012-12-10T22:31:34.397
> 
> 标签：json, playframework, playframework-2.0, deserialization, flexjson

我正在使用 FlexJSON，并且无法`Date`从`int`. 我正在尝试像这样使用 JSONDeserializer：

```
String json = decryptJson(new String(personalInformationData));
return new JSONDeserializer<PersonalInformation>().deserialize(json); 
```

的值为`json`：

```
{"address1":"123 Fake St","address2":"#4","address3":"","city":"Springfield","class":"PersonalInformation","confirmEmailAddress":"foo@bar.com","coverageGroupName":"","coverageGroupNumber":"","coverageType":"I","dob":21600000,"emailAddress":"foo@bar.com","firstName":"Zapp","formOfId":"D","group":false,"idNum":"K201132083220","idState":"AL","individual":true,"lastName":"Brannigan","middleInitial":"","nonUsAddress":false,"nonUsAddress1":null,"nonUsAddress2":null,"nonUsAddress3":null,"phone":"(555) 555-5555","ssn":"555555555","state":"OH","zip":"55555"} 
```

除非出生日期（`dob`键）值在 1969 年 12 月 7 日和 1970 年 1 月 25 日之间（或 -2138400000 到 2095200000 毫秒），否则所有内容都会正确解析，然后 FlexJSON 会抛出此错误：

```
[JSONException: [ dob ]: Parsing date 21600000 was not recognized as a date format] 
```

我不确定这是怎么发生的，因为`new Date(21600000)`评估为`Thu Jan 01 00:00:00 CST 1970`.

有没有人遇到过这个？

* * *

## 更新#1

* * *

因此，似乎发生此错误是因为 JSONDeserializer 无法处理保存为 1969 年 12 月 7 日至 1970 年 1 月 25 日范围内的 Unix TimeStamp 的日期。该范围之外的任何其他日期都被接受并且也是一个 Unix 时间戳。

我认为我不需要使用`.use()`或创建自定义 Transformer 来实现自定义 ObjectFactory，因为其他 Unix TimeStamps 工作不在失败日期范围内。

* * *

## 更新#2

* * *

我尝试使用以下方法实现`transformer`序列化以将日期从 Unix TimeStamp 更改为日期格式的字符串：

```
String json = new JSONSerializer().transform(new DateTransformer("yyyy-caMM-dd"), "dob").serialize(personalInformation); 
```

这完全按照它应该的方式工作，但不是在反序列化时。我仍然遇到同样的错误：

```
[JSONException: [ dob ]: Parsing date 1970-01-01 was not recognized as a date format] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:10:03.840

我遇到了同样的问题。通过扩展 flexjson.factories.DateObjectFactory 和覆盖 instantiate() 方法来修复，就像这样。

```
@Override
public Object instantiate(ObjectBinder context, Object value, Type targetType, Class targetClass) {

    if (value instanceof Integer) {
        return super.instantiate(context, ((Integer) value).longValue(), targetType, targetClass);
    }
    return super.instantiate(context, value, targetType, targetClass);
} 
```

之后就做点小动作

```
JSONDeserializer<T> jsonDeserializer = new JSONDeserializer<T>().use(Date.class, new >YourExtendedDateObjectFactoryClass<) 
```

然后你可以轻松地反序列化 json 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:47:22.307

好吧，这绝对是 Flexjson 的问题。我们仍然无法找出问题所在，但我的同事设法想出了一个解决方法，直到它得到解决。本质上，我们创建一个新`DateTransformer`格式并指定要使用的格式。然后，我们使用该转换器来转换`Date.class`序列化时的序列化，并在反序列化时再次使用转换`use()`器。

`DateTransformer`：_

```
private static final DateTransformer DATE_TRANSFORMER = new DateTransformer("MM/dd/yyyy"); 
```

序列化：

```
String json = new JSONSerializer().transform(DATE_TRANSFORMER, Date.class).serialize(personalInformation); 
```

反序列化：

```
return new JSONDeserializer<PersonalInformation>().use(Date.class, DATE_TRANSFORMER).deserialize(json); 
```

# sqlite - ER 建模中的关系混淆

> ID：13810416
> 
> 赞同：0
> 
> 时间：2012-12-10T22:31:39.670
> 
> 标签：sqlite, entity-relationship

我有个问题。基本上我正在模拟一个充满作者信息的出版商数据库。因此，为此，我有一个名为“作者”的实体——作者有一个自动递增计数器的主键，以及一个“姓名”和出生年份。

除此之外，我还有“书”的实体，它有一个名称，出版年份，它自己的识别主键是一个自动递增计数器。它还有两个外键——一个引用主要作者的字段（这是必需的），以及一个指定次要作者的可选字段。

我的问题是，作者和书籍之间的关系显然是“一”到“零或更多”。但是，我卡住的地方是第二作者的“可选性”。我认为这应该是“零或一”与“零或更多”的关系，但我不确定我是否正确翻译了逻辑——我的想法是很多书可能没有第二作者。

同样，在 sqlite3 中实现此功能时，最好将此字段设为“必需”还是“可选”？我假设如果我要求它可以保持休眠状态，除非需要，否则它可以作为“NULL”值。

您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:44:33.757

您正在寻找的关系是多对多关系。

*   一本书有 1 个或多个作者
*   一个人写（作者）一本书或多本书

这意味着您将需要 3 个数据库表：

*书籍、人物*和*作者*

*   书籍：id，标题
*   作者：book_id、person_id、位置（例如，第一作者为 1，第二作者为 2）
*   人：身份证、姓名

拥有这三个表后，您可以使用 JOIN 查询关系。可以在此[youtube 视频](http://www.youtube.com/watch?v=NcrZoHselPk)中找到加入的初学者介绍，您想要的加入类型在 4:50 左右呈现。

可以在此处找到 stackoverflow 答案和示例：[sqlite LEFT OUTER JOIN multiple tables](https://stackoverflow.com/questions/11105895/sqlite-left-outer-join-multiple-tables)

# .htaccess - .htaccess 文件导致的 WAMP 服务器错误

> ID：13810418
> 
> 赞同：0
> 
> 时间：2012-12-10T22:32:00.170
> 
> 标签：.htaccess, url-rewriting, wamp

我正在使用以下`htaccess`代码`url` `rewrite`并且它正在工作。

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
#RewriteBase /

# If the request is for a valid directory
#RewriteCond %{REQUEST_FILENAME} !-d
# If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f
# If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} !-l
# do not do anything
RewriteRule ^ - [L]

# forward /john to user/profile.php?name=john
RewriteRule ^(.+)$ user/profile.php?username=$1 [L,QSA,NC] 
```

但是，当我升级到最新的`WAMP2`服务器时，我开始收到下面的错误消息。

```
The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, admin@localhost and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log. 
```

请有人能解释我为什么会收到这个错误，以及如何解决它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:55:03.070

mod_rewrite 实际上是在服务器配置文件上关闭的，我打开它，重新启动服务器，它又开始工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-30T19:05:19.827

我遇到了同样的问题，但后来我发现在`httpd.conf`mod_rewrite 中已被 Hashed out，这意味着它已关闭，所以我删除了行首的 # 并重新启动所有服务，它成功了！

# c# - C# WP8 错误：无法将类型“Microsoft.Xna.Framework.Media.Song”隐式转换为“Microsoft.Xna.Framework.Media.MediaQueue”

> ID：13810421
> 
> 赞同：-1
> 
> 时间：2012-12-10T22:32:13.443
> 
> 标签：c#

我正在尝试在 windows phone 上找到当前正在播放的歌曲。

为此，我做到了

```
MediaQueue s = s.ActiveSong; 
```

出于某种原因，执行此操作时出现上述错误。可能是一个简单的错误，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:37:04.673

好吧，看起来好像`MediaQueue s`是 type`Microsoft.Xna.Framework.Media.MediaQueue`并且`s.ActiveSong`是 type `Microsoft.Xna.Framework.Media.Song`。

我想你正在寻找

```
Song s = mediaQueue.ActiveSong; 
```

`mediaQueue`的实例在哪里`MediaQueue`。

# jquery - 为什么 jQuery slideUp() 中的回调不等待动画完成？

> ID：13810423
> 
> 赞同：1
> 
> 时间：2012-12-10T22:32:23.297
> 
> 标签：jquery, callback, slidedown, slideup

我想要的很简单：

我有一个有背景的容器。容器内部是触发器和隐藏框，如下所示：

```
<div id="container">

<span id="box-1">Open 1</span> <span id="box-2">Open 2</span> <span id="box-3">Open 3</span> <span id="box-4">Open 4</span> <span id="box-5">Open 5</span> 

<div class="box box-1">Hi! I'm Box 1</div>
<div class="box box-2">Hi! I'm Box 2</div>
<div class="box box-3">Hi! I'm Box 3</div>
<div class="box box-4">Hi! I'm Box 4</div>
<div class="box box-5">Hi! I'm Box 5</div>

</div> 
```

单击触发器后，目标框会向下滑动。如果一个盒子已经打开，它会向上滑动，新的目标盒子会向下滑动。我有这个在网站的不同部分工作，但在 jsfiddle 中共享有点复杂。我无法正常工作的简单版本在这里：

[jsFiddle：slideUp 和 slideDown 问题](http://jsfiddle.net/whuQ8/)

似乎 slideDown 函数在 slideUp 完成之前就开始了。我已经将 slideDown 移到了 slideUp 回调之外，并且得到了相同的反应。我已经处理了持续时间和延迟，但它仍然存在同样的问题。

- - - 编辑 - - -

我应该注意，我的目标是让容器在再次展开之前完全折叠。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T22:47:01.747

这是因为您需要在再次向下滑动之前隐藏（）

```
$('.box').not(boxItem).slideUp(function(){
    $('.box'+boxItem).hide().slideDown();
}); 
```

[http://jsfiddle.net/dYMx8/](http://jsfiddle.net/dYMx8/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-16T00:34:32.720

这个问题已有6个月大了，但我找到了问题的答案。就是 using`$('.box').not(boxItem).slideUp(function()`将调用 slideUp 函数 4 次，因为还有 4 个其他 div 具有“box”类。我们只希望它被调用一次，因为只有一个 div 可以向上滑动。您应该跟踪当前打开的框，并将其用作选择器而不是“.box”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:38:58.943

尝试停止动画：

```
$('.box').not(boxItem).stop(true, true).slideUp(function(){
    $('.box'+boxItem).slideDown();
}); 
```

通过`true, true`会清空动画队列，让动画“跳到最后”

## [小提琴](http://jsfiddle.net/whuQ8/1/)

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

# css - CSS 相对定位文本

> ID：13810424
> 
> 赞同：0
> 
> 时间：2012-12-10T22:32:25.163
> 
> 标签：css, compass-sass

我有一个带有悬停下拉菜单的导航栏。就在它的底部，我有一个相对定位的文本。将触发器悬停在导航栏上时，下拉菜单会下降，但不会隐藏相关文本，文本仍会显示在下拉菜单上方。

我知道`hide()`悬停时可以使用 jquery 触发，但是有纯 CSS 方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:15:20.823

定位元素（ 、 和 ）的`relative`堆叠`absolute`顺序`fixed`用 设置`z-index`。

`z-index: 10`为导航栏和`z-index: 5`文本设置。

当然，这些数字 (5,10) 是任意的，重要的是 5 < 10

# jquery - 制作可灵活调整大小和定位的可拖动布局

> ID：13810425
> 
> 赞同：2
> 
> 时间：2012-12-10T22:32:27.267
> 
> 标签：jquery, html, css, layout, drag-and-drop

我正在尝试做的是通过将其拖放到页面上来创建可定位的布局。如果您知道如何在屏幕上重新排列 Adob​​e 产品或 Visual Studio 的工具面板，那么您可能对我将要演示的内容有所了解。

这最初是为了改进 jsbin 的代码编辑器布局，但它将是开源的，并且能够被任何项目使用。

在我的实验中，我有 5 列是 div。布局如下：

```
+------+------+------+------+------+
|      |      |      |      |      |
|      |      |      |      |      |
|      |      |      |      |      |
|      |      |      |      |      |
|      |      |      |      |      |
|      |      |      |      |      |
+------+------+------+------+------+ 
```

我希望将它们中的任何一个拖到另一个 div 下方，甚至放在两个 div 下方，如下所示：

```
+------+------+------+
|      |      |      |     
|      |      |      | 
|      |      |      |  
|      |      |======+ 
|=============|      |   
|             |      | 
+------+------+------+ 
```

我还希望它们可以在内部边缘调整大小，以便可以调整它们以适应任何舒适的布局。

我对此采取了几种方法。

1.  [http://jsfiddle.net/weaponxi/Y9cyU/](http://jsfiddle.net/weaponxi/Y9cyU/)：我尝试放置将每列分成四部分的占位符（左半右半和上半下半），以便在拖放时它们会得到一半大小元素（底部/顶部或左/右）。但这似乎可能是有问题的，因为占位符重叠并且不确定将其放入正确的容器是否容易......当我正在研究这个时，我有另一个想法，我想尝试。

2.  [http://jsfiddle.net/weaponxi/nUMxn/](http://jsfiddle.net/weaponxi/nUMxn/)：我记得有一个插件叫做 jQuery 的 UI 布局。我试过了，但发现它的效率不够。不仅我必须为我不熟悉代码的插件编写拖放功能，而且它们只能将空间划分为左中面板和右面板......我很快转向另一种方法。

3.  [http://cssdeck.com/labs/3otgmqz5/0](http://cssdeck.com/labs/3otgmqz5/0)：这是在黑暗中拍摄的。这是我发现的另一个插件，名为 Gridster for jQuery。它基本上为您提供了一个网格，您可以在其中移动框。我想我可以添加一个调整大小选项以使其工作（尽管由于重新调整大小造成的空间占用不完美，它会有网格的空白）它本可以工作，但它没有按预期工作（我一定是做错了什么，因为只有当您在“重新调整大小”时快速摇动盒子或者它开始拖动它时，它才会重新调整大小）

4.  这只是一个我没有尝试过的想法......也许使用表格会更好，因为我可以轻松拆分单元格（理论上）。他们将永远彼此相邻。唯一的问题可能是拖动：当被放下时，它怎么知道它是向左/右还是上/下？如片段 1 所示，这些占位符重叠。

尝试这样的事情时我应该采取什么方法？这些想法中的任何一个有用吗？我感谢所有的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:23:42.717

看看[Gridster](http://gridster.net/)。这里有一个很好的例子 (http://jsfiddle.net/PrtrR/2/embedded/result/) 的可拖动和可调整大小的布局。

该项目有据可查，因此您应该能够立即启动并运行。

# javascript - 脚本应该去哪里 MVC4 / Razor？

> ID：13810426
> 
> 赞同：4
> 
> 时间：2012-12-10T22:32:32.637
> 
> 标签：javascript, jquery, razor, asp.net-mvc-4

我最近才开始使用 MVC4 和 Razor。以前，每个视图页面中都有用于`ScriptContent`、`MainContent`等的部分。

虽然之前我总是将我需要的 javascript/jquery 放在 Script 区域中，但现在我不知道我应该如何处理它。是否有一个常见的做法或应该去的特定地方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T22:57:21.937

答案分为两部分：

1.  *Bundles*被渲染`@Scripts.Render("~/bundles/<name>")`并默认注册在`BundleConfig.RegisterBundles`方法中。这就是您通常包含 jQuery 和其他框架和库的方式。[这里](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)有更多信息。

2.  *如果您需要，部分*仍然存在，并且[在 ASP.NET MVC3 中的使用方式非常相似](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)。

# ruby - 按名称调用方法

> ID：13810429
> 
> 赞同：2
> 
> 时间：2012-12-10T22:32:46.920
> 
> 标签：ruby

有谁知道如何将方法称为字符串？例如：

```
case @setting.truck_identification
when "Make"
  t.make
when "VIN"
  t.VIN
when "Model"
  t.model
when "Registration"
  t.registration 
```

`.to_sym`似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T22:35:31.807

使用`.send`：

```
t.send @setting.truck_identification.downcase 
```

（`vin`应该是小写的它才能工作）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:36:01.233

您将要使用[`Object#send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)，但您需要使用正确的大小写来调用它。例如：

```
[1,2,3].send('length')
=> 3 
```

**编辑**：此外，虽然我会犹豫推荐它，因为这似乎是会导致意外错误的不良做法，但您可以通过搜索对象支持的方法列表来处理不同的大小写。

```
method = [1,2,3].methods.grep(/LENGth/i).first
[1,2,3].send(method) if method
=> 3 
```

我们使用不区分大小写的正则表达式对所有方法进行 grep，然后将第一个返回的符号发送到对象（如果找到）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T22:38:18.083

您可以使用[`Object#send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)method 将方法名称作为字符串传递。例如：

```
t.send(@setting.truck_identification) 
```

您可能需要使用[`String#downcase`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-downcase)方法规范化 truck_identification。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T15:54:37.243

遍历这些方法并不是最干净的方法。只需使用`#respond_to?()`

```
method = @setting.truck_identification.downcase
if t.respond_to?(method)
    t.send(method)
end 
```

# wcf - 使用 MsmqIntegrationBinding 时如何实现基于 IIS 的死信服务

> ID：13810430
> 
> 赞同：1
> 
> 时间：2012-12-10T22:32:47.013
> 
> 标签：wcf, iis, msmq

因此，当使用 NetMsmqBinding 时，我能够[从队列中提取死信服务。](https://stackoverflow.com/questions/13692615/cant-get-service-to-pull-from-dead-letter-queue)但是，当我切换到使用 MsmqIntegrationBinding 将消息推送到目标队列时，死信队列不再发送到死信服务。消息不再是 WCF 格式的——它们只是 XML 序列化的。我不确定如何让管道设置发送到新服务。队列和 URL 仍然匹配。

我尝试按原样运行（使用 netMsmqBinding），切换到 msmqIntegrationBinding，并指定 serializationFormat，如下所示：

```
<bindings>
  <msmqIntegrationBinding>
    <binding exactlyOnce="true" durable="true" serializationFormat="Xml">
      <security mode="Transport" />
    </binding>
  </msmqIntegrationBinding>
</bindings> 
```

然而，这些似乎都不起作用。任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:20:03.077

[启用 WCF 跟踪](http://utilicode.wordpress.com/2012/04/23/enable-wcf-tracing/)（使用）后`switchValue="All"`，我可以看到我收到以下异常：

```
An error occurred while deserializing an MSMQ message's XML body. The message cannot be received. Ensure that the service contract is decorated with appropriate [ServiceKnownType] attributes or the TargetSerializationTypes property is set on the MsmqIntegrationBindingElement. 
```

在为我的每个类型找到要添加的正确合同后`ServiceKnownType`，我遇到了进一步的异常：

```
The message with Action '' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None). 
```

从[Simon Evans 的博客](http://consultingblogs.emc.com/simonevans/archive/2007/09/17/A-comprehensive-guide-to-using-MsmqIntegrationBinding-with-MSMQ-3.0-in-WCF.aspx)中，我们发现了以下信息：

```
MsmqIntegrationBinding requires contracts that are designed only for its use. Unless additional behaviors are applied to the dispatcher, the service contract can contain only one service operation. 
```

基本上，正如我们在[MSDN 示例](http://msdn.microsoft.com/en-us/library/ms789008.aspx)中看到的那样，使用 MsmqIntegrationBinding 需要一个接受所有消息的操作（`Action = "*"`[或者，实际上，`Action = ""`可能也可以工作]）。一旦我切换到 msmqIntegrationBinding 并切换了我的合同（确保我还有`ServiceKnownType`新合同），一切都开始工作了。

# jquery - jquery "this" 分隔悬停

> ID：13810432
> 
> 赞同：2
> 
> 时间：2012-12-10T22:33:07.473
> 
> 标签：jquery, slidedown, slideup, jquery-hover

我有一个我的客户正在使用的自定义播放器，他们给我的 javascript 很糟糕……真的很糟糕。我真的不想从头开始重做，所以我想我可以采用他们的原始代码

```
var togglePlayer = function(){
        $('.jp-gui').slideUp();
        $('#jp_container, #jp_container2').hover(
            function () {
                $('.jp-gui').slideDown();
            },
            function () {
                $('.jp-gui').slideUp();
            }
        );
    }; 
```

我试着用这个来修复它：

```
var togglePlayer = function(){
        $('.jp-gui').slideUp();
        $('#jp_container, #jp_container2').hover(
            function () {
                $(this + '.jp-gui').slideDown();
            },
            function () {
                $(this + '.jp-gui').slideUp();
            }
        );
    }; 
```

现在它似乎只是不接受悬停。我用 .toggleSlide 完全重写了它，解决了悬停问题，但又产生了 10 个问题。

有谁知道一个简单的解决方法，这样当我将鼠标悬停在#jp_container 上时，它不会在#jp_container2 上执行悬停动画，反之亦然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:41:13.387

```
$('#jp_container, #jp_container2').hover(function() {
    $(this).find('.jp-gui').stop(true, true).slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:55:52.820

```
 function () {
            $(this + '.jp-gui').slideDown();
        }, 
```

`this`，在 jQuery 事件处理程序的上下文中，是处理程序附加到的 DOM 元素（或委托，在事件委托的情况下）。将其转换为字符串将没有好处。

尝试：

```
 function () {
            $('.jp-gui', this).slideDown();
        }, 
```

（然后第二个参数称为上下文）或

```
 function () {
            $(this).find('.jp-gui').slideDown();
        }, 
```

反而。两者都将选择`.jp-gui`事件目标（`#jp_container`或`#jp_container2`）中的所有元素。

* * *

如果您想进行进一步的更改，请注意

`#jp_container, #jp_container2`有时可以替换为`[id^="jp_container"]`（选择 ID 以指定字符串开头的所有元素）。向两个容器添加一个公共类会更好。

此外，正如@Michael 所指出的，一对`slideUp`/`slideDown`可以替换为一个`slideToggle`. 这可能并不总是最好的解决方案，但它确实缩短了代码。

@Michael 还建议使用`stop(true, true)`. 如果不停止动画，则下一个动画会延迟到当前动画（s enqueued）之后，这可能会导致元素在生成多个悬停事件后反复上下滑动。如果容器改变了它的大小或者它的子容器逃脱了它的容器，`stop`如果每个动画都触发了一个额外的悬停事件，那么没有 , 甚至可能获得一个无限循环。

# c# - C# 相当于 posttrheadmessage 到另一个进程

> ID：13810437
> 
> 赞同：1
> 
> 时间：2012-12-10T22:33:21.833
> 
> 标签：c#, c++, interop, pinvoke, ipc

我有用本机 C++ 编写的代码，它控制由 CreatePrcess() 和其他 Windows API 创建的其他进程（“客户端进程”）
然后客户端进程（控制台、单线程）等待来自“服务器”进程的消息 MSG_OK 并恢复运行收到消息时。
我使用了 PostThreadMessage() 并且效果很好。

```
int MSG_OK = RegisterWindowMessage("MSG_OK");
void run(TCHAR* path) {
    STARTUPINFO si={0,}; si.cb=sizeof(STARTUPINFO); si.dwFlags=0;
    PROCESS_INFORMATION pi;
    CreateProcess(NULL, path, NULL, NULL, FALSE, 0, NULL, NULL, &si, &pi);
    Sleep(1000); // Just for simplicity. Actual code is message-based
    PostThreadMessage(pi.dwThreadId, MSG_OK, 0, 0);
    CloseHandle(pi.hProcess);   // closing process handle makes usage count 1
    CloseHandle(pi.hThread);    
} 
```

现在我想用 C# 重写代码，尽可能少地使用 p/invoke。以下是我正在处理的代码：

```
[return: MarshalAs(UnmanagedType.Bool)]
[DllImport("user32.dll", SetLastError = true)]
public static extern bool PostThreadMessage(uint threadId, int msg, IntPtr wParam, IntPtr lParam);

public void run(string path) {
    Process proc = new Process();
    ProcessStartInfo si = new ProcessStartInfo();
    si.FileName = path;
    proc.StartInfo = si;
    proc.Start();
    uint threadId; // <----?
    PostThreadMessage(threadId, MSG_OK, 0, 0);
    proc.Dispose();
} 
```

我找到了诸如 Process 和 ProcessStartinfo 之类的 C# 类，但找不到任何类似于 dwThreadId 的成员。有没有？

编辑：由于客户端进程是单线程应用程序，

```
 proc.Threads[0].id 
```

似乎是我正在寻找的threadId。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:57:47.237

请看[这个线程](https://stackoverflow.com/questions/1679243/getting-the-thread-id-from-a-thread)。

我会考虑使用其他一些方法，如[互斥锁、事件或信号量](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684123%28v=vs.85%29.aspx)。

# jquery - jQuery Click in li

> ID：13810440
> 
> 赞同：0
> 
> 时间：2012-12-10T22:33:32.880
> 
> 标签：jquery

我的 html 设置如下：

```
<li>
    Header
    <button>Edit</button>
</li> 
```

我想知道是否有一种方法可以让您单击 li 并执行一项操作，然后单击按钮并执行另一项操作。现在，如果我在 li 上有一个 jquery click 元素，当你点击按钮时它会被触发。有没有办法在不改变html结构的情况下把它分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:35:53.653

在按钮单击事件处理程序中使用[event.stopPropagation()](http://api.jquery.com/event.stopPropagation/) - 这将阻止事件冒泡到`li`

```
button.click(function(event){
      event.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:01:58.413

也可以使用`event target`。

```
$('li').click(function(event) {
      var $tgt=$(event.target);
       if( $tgt.is('button') ){
          alert('button clicked');
       }else{
          alert('li clicked');
       }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:37:08.230

是的，您可以在按钮的处理程序上使用[event.stopPropagation ：](http://api.jquery.com/event.stopPropagation/)

```
$(document).ready(function() {
    $('li').click(function() {
        alert('li clicked');
    });

    $('button').click(function(event) {
        event.stopPropagation();
        alert('button clicked');
    });
});​ 
```

演示：[jsfiddle](http://jsfiddle.net/7JFcj/)

# perl - 使用 mediawiki api 获取 mediawiki 链接的 https 链接

> ID：13810443
> 
> 赞同：1
> 
> 时间：2012-12-10T22:33:42.863
> 
> 标签：perl, https, mediawiki, mediawiki-api

我正在尝试处理用户输入，例如

*   富
*   维基：富
*   酒吧#你好

获取输入的 https 链接，例如

*   [https://en.wikipedia.org/wiki/foo](https://en.wikipedia.org/wiki/foo)
*   [https://en.wiktionary.org/wiki/foo](https://en.wiktionary.org/wiki/foo)
*   [https://en.wikipedia.org/wiki/Bar#hi_there](https://en.wikipedia.org/wiki/Bar#hi_there)

我正在尝试以最少手动、最干净的方式来执行此操作，因此我可以将我的脚本上传到某个地方并将其展示给人们，而不会因为它的低质量而感到羞耻。这表示：

*   如果我获得 http 链接而不是 https，我宁愿不硬编码`s/^http/^https/`替换。
*   如果我获得一个不完整的链接，我宁愿不使用正则表达式来添加缺失的东西。

到目前为止，我找到了两个解决方案，但每个都有缺陷。

## 解析查询

[使用canonicalurl magic word](http://www.mediawiki.org/wiki/Help%3aMagic_words#URL_data)在 {{canonicalurl:user_input_here}} 上运行解析查询。但是，它只提供 http，而不是 https 链接。

```
#!/usr/bin/perl
use strict;
use warnings;
use MediaWiki::API;
use Data::Dumper;

my $mw = MediaWiki::API->new();
$mw->{config}->{api_url} = 'https://en.wikipedia.org/w/api.php';

my $info_ref = $mw->api ( {
    action      => 'parse',
    prop        => 'text',
    text        => '{{canonicalurl:Hello}}',
} ) or die $mw->{error}->{code} . ': ' . $mw->{error}->{details};
my $html = $info_ref->{parse}{text}{'*'};
print Dumper $html; 
```

## 信息查询

使用信息查询。但是它不适用于部分，即“Foo#bar”输入将获得链接到“Foo”的输出。

```
#!/usr/bin/perl
use strict;
use warnings;
use MediaWiki::API;

my $mw = MediaWiki::API->new();
$mw->{config}->{api_url} = 'https://en.wikipedia.org/w/api.php';

sub get_url_by_title(){
  my $title = shift;

  my $info_ref = $mw->api ( {
    action      => 'query',
    prop        => 'info',
    inprop      => 'url',
    iwurl       => 1,
    titles     => $title,
  } ) or die $mw->{error}->{code} . ': ' . $mw->{error}->{details};

    if (exists $info_ref->{query}{pages}){
      return (values $info_ref->{query}{pages})[0]{'fullurl'};
    }
    elsif (exists $info_ref->{query}{interwiki}){
      return (values  $info_ref->{query}{interwiki})[0]{'url'};
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:22:39.947

规范 url 指的是 wiki 规范的 url 类型。在 Wikimedia 的当前配置中，这是 http。（如果有一天这种情况发生变化，我不会感到惊讶）。您可以查看的是 {{fullurl:Pagename}}。如果 http 和 https 都有效，它将以“//”开头的 url 响应。否则它将以正常的 url 响应。

信息查询（您的第二种方法）可能会更好，因为它不调用解析器（这对服务器来说工作量要少一些，尽管这并不重要）。之后总是可以将目标（或 # 号之后称为 no a days 的任何部分）放到 url 的末尾。

# c# - 订阅另一个事件的一次性事件触发

> ID：13810445
> 
> 赞同：2
> 
> 时间：2012-12-10T22:34:01.443
> 
> 标签：c#, events

```
public event EventHandler ConstructDesign;
public DataGridView dataGrid = new DataGridView();
public FooClass(Action action) {
    ConstructDesign+=action;
    dataGrid.DataBindingComplete+=ConstructDesign;
}

public void Launch() {
    ConstructDesign(null, new EventArgs());
}

//IN A COMPLETELY DIFFERENT CLASS:
public void Main(string[] args) {
    var launcher = new FooClass(Fire);
    launcher.Launch();
}

public void Fire(object sender, EventHandlerArgs args...) {
    Console.WriteLine("Fired");
    //and after the first fire, action will be removed from the `ConstructDesign`.
} 
```

所以基本上我在这里想要实现的是如何执行以下操作：`Action`通过代码手动添加到`ConstructDesign`并在触发时，它将自己从事件处理程序中删除，`ConstructDesign`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:38:53.540

我不相信您可以阻止事件触发，但您可以阻止事件中的代码执行。真的很简单，`static bool`在类级别添加a，初始化为，第一次执行后`true`设置为。`false`将事件处理程序中的代码包装在`if (firstExecution) {//actions I only want executed the first time the event fires}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:57:28.853

我不明白你为什么在课堂上有活动，因为你没有在任何地方订阅它们。改为调用传递的操作：

```
Action _action;

public FooClass(Action action) 
{
    _action = action;
}

public void Launch() 
{
    if (_action == null)
        return;

     _action();
     _action = null;        
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:08:49.837

在第一次使用后，我还没有找到取消订阅该事件的好方法。（您当然可以使用大量反射的方法，但我怀疑如果重构更改了事件的名称，编译器会抱怨）。

这是一个只使用委托的版本，所以编译器仍然可以很好地为您服务。它可能不像你需要的那么轻，但由于我接受了自己的启迪挑战，我想我会分享它。

```
MyEvent += SingleUseEventHandler<AssemblyLoadEventArgs, AssemblyLoadEventHandler>
   .Create(This_MyEventOccurred); 
```

这里定义了魔法：

```
public class SingleUseEventHandler<TArgs,THandler>
  where TArgs : EventArgs
{
  public static THandler Create(EventHandler<TArgs> handler)
  {
     var helper = new SingleUseEventHandler<TArgs, THandler>(handler);
     EventHandler<TArgs> h = helper.InvokeIfFirstTime;
     return (THandler)(object)Delegate.CreateDelegate(typeof(THandler), h.Target, h.Method);
  }

  public void InvokeIfFirstTime(object sender, TArgs args)
  {
     if (!raised)
     {
        raised = true;
        handler(sender, args);
     }
  }

  public SingleUseEventHandler(EventHandler<TArgs> handler)
  {
     this.handler = handler;
  }

  bool raised;
  readonly EventHandler<TArgs> handler;
} 
```

当然，C# 不会推断委托类型，因此您必须明确指定它。

如果事件的定义是 EventHandler，您可以使用它来代替：

```
MyEvent += SingleUseEventHandler<SomeEventArgs>.Create(SomeHandlerMethod);

public static class SingleUseEventHandler<TArgs>
  where TArgs : EventArgs
{
  public static EventHandler<TArgs> Create(EventHandler<TArgs> handler)
  {
     var helper = new SingleUseEventHandler<TArgs, EventHandler<TArgs>>(handler);
     return helper.InvokeIfFirstTime;
  }
} 
```

这是一个示例程序：

```
class Program
{
  static event AssemblyLoadEventHandler MyEvent;
  static int callCount;
  static void Main(string[] args)
  {
     MyEvent += SingleUseEventHandler<AssemblyLoadEventArgs, AssemblyLoadEventHandler>
        .Create(Load);

     foreach(var assembly in AppDomain.CurrentDomain.GetAssemblies())
     {
        Console.WriteLine("Raising event for " + assembly.GetName().Name);
        MyEvent(null, new AssemblyLoadEventArgs(assembly));
     }
  }

  static void Load(object sender, AssemblyLoadEventArgs eventArgs)
  {
     Console.WriteLine(++callCount);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T23:27:14.580

```
 public class FooEvents {
            public event EventHandler ConstructDesign;
            public DataGridView dataGrid = new DataGridView();
            public FooEvents(Action action) {
                ConstructDesign+=action;
                dataGrid.DataBindingComplete+=ConstructDesign;
                dataGrid.DataBindingComplete+=RemoveSubscribtion;
            }

            public void Launch() {
                ConstructDesign(this, new EventArgs()); //passes FooEvent and fires.
            }

            private void RemoveSubscribtion(object sender, EventArgs args) {
                 dataGrid.DataBindingComplete-=ConstructDesign;
                 dataGrid.DataBindingComplete-=RemoveSubscribtion;
            }

       public Main {
            public void Main(string[] args) {
                var launcher = new FooClass(Fire);
                launcher.Launch();
            }

            public void Fire(object sender, EventHandlerArgs args) {
                Console.WriteLine("Fired");
            }
       } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T22:42:25.180

一个事件只有在它有订阅者时才会触发，所以你不能通过 删除委托`-=`，还是我误解了你想要做什么？

# c# - 设计一个 API 来接受它产生的接口引用

> ID：13810446
> 
> 赞同：1
> 
> 时间：2012-12-10T22:34:11.787
> 
> 标签：c#, api, interface, abstraction

## 概述

我正在开发一个使用两个主要抽象级别的应用程序：

*   核心库定义了许多接口，并包含根据接口实现核心功能的类。这样，我希望将核心算法编写一次，但使其适用于任意数量的接口实现。
*   “实现”库使用第三方 SDK提供*一组接口的一个特定实现。*最终，这些图书馆将不止一个；使用哪一个将由配置决定。

应用程序本身从 SDK 库中实例化类并使用它们来满足核心库的依赖关系。

## 问题

我需要解决的问题一般是这样的：

```
// Algorithm in the core (interfaces are all implemented by the SDK library):
ICorrespondentRepository allCorrespondents = ...;
ICorrespondent correspondent = allCorrespondents.FindByName(...);
...
IDocumentRepository allDocuments = ...;
IDocument document = allDocuments.FindByTitle(...);

// Problem: Implementation needs state not exposed
// on ICorrespondent in order to do this:
document.SetRecipient(correspondent); 
```

换句话说： an`IDocument`可以将其接收者设置为先前获得的`ICorrespondent`. 当`SetRecipient`被调用时，`IDocument`需要与 - 关联但不被 - 暴露的状态（对核心不重要的主键）的实现`ICorrespondent`，以便实际影响更改。

一种方法是向下转换`ICorrespondent`为内部的实际实现类`SetRecipient`，但这感觉非常笨拙。更糟糕的是保留从接口引用到内部状态的映射。

问题的根源似乎是接口专门为核心库的通用需求而设计，尽管它们实际上有两个具有不同需求的消费者：核心和产生它们的实现库。

有没有更好的方法来重新设计这种需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T13:46:20.093

实际上，您想要做的是交叉铸造。

您说 的具体实现`IDocument`与 的所有子类不兼容，因此如果传递的实例没有此主键`ICorrespondent`，您的调用可能会合法地失败。拥有这个主键是兼容子类的“特征”。`SetRecipient``ICorrespondent`

您可以使用的技术就是这个。定义一个接口。

```
internal interface IHasPrimaryKey {
    PrimaryKey GetPrimaryKey();
} 
```

并且您的兼容`ICorrespondent`类应该实现这两个接口。

```
internal class CompatibleCorrespondent : ICorrespondent, IHasPrimaryKey {
    // ...
} 
```

在`SetRecipient`这种情况下，应该尝试对通信者进行交叉转换，看看它是否提供了必要的主键，否则失败。

```
var hasPrimaryKey = correspondent as IHasPrimaryKey;
if(hasPrimaryKey == null) {
    throw new InappropriateSubclassException();
}
// ...
var pk = hasPrimaryKey.GetPrimaryKey(); 
```

这是您可以从这种架构中获得的最强类型的解决方案。失败案例是合法的，因为类型系统不能保证您在每种情况下都能获得主键。

这样做的好处是您不必绑定到特定的子类。任何同时实现`ICorrespondent`和的类`IHasPrimaryKey`都是合适的。

当然，我会让您为您的特定代码找到更合适的名称。

# javascript - 高级延迟/承诺建议

> ID：13810451
> 
> 赞同：1
> 
> 时间：2012-12-10T22:34:26.983
> 
> 标签：javascript

我有以下具有以下结构的代码：

```
doSomething '/', ->
  waitForthis '#e', ->
    waitForSomethingElse '#el', ->
      #actually do it 
```

如果我想使用延迟/承诺是这样的：

```
doSomething().then(waitForthis).then(waitForSomethingElse); 
```

我将在哪里创建延迟，然后每个人都会返回一个承诺？

我只是在寻找一些粗略的建议来帮助我入门。

我可能会为此使用 jquery deferreds。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:17:44.377

If you're looking for something like:

```
Send request A
when A returns,
Send request B(result a)
when B returns,
Do C(response b) 
```

Then you need to make each one a promise, and you need to pay attention to closures (because you can't collect the return value from a callback).

```
a_done = something_that_returns_a_promise();
a_done.then(function (a_result) {
    var b_done = something_that_returns_a_promise(a_result);
    b_done.then(function (b_result) { do_C(b_result); });
}); 
```

If you're looking for something like

```
Send request A
Send request B

when A && B return,
Do C 
```

Then you're looking at a function which will take a number of promises, and return a promise.

```
a = something_returning_a_promise();
b = something_returning_a_promise();
a_and_b_done = when(a, b);

a_and_b_done.then(function (result1, result2) { do_c(result1, result2); })
            .then(show_results); 
```

Doing something like

```
a_done.then(fillRows).then(showResults); 
```

Doesn't let you make multiple async calls... ...what it does is allows you to chain a bunch of synchronous tasks one after the other (or make async calls where the order they arrive in doesn't matter at all).

```
.then 
```

or

```
.done 
```

or whatever, doesn't do anything special -- it adds a task to an array.
When the async promise returns (or if it's already returned and has been resolved), it just goes through that list in order, and fires all of the callbacks, passing whatever data it was resolved with (and calling the "success" or "failure" callbacks, based on the success of the operation).

So you need one promise for each async callback, and if you're trying to chain callbacks together, you still need to wrap each one inside of a closure (the closure which will pass the result to whatever is constructing your next promise).

I'm using the jQuery `$.Deferred()`, `deferred.promise()`, `deferred.resolve()`, `deferred.reject()`, `promise.done()`, `promise.fail()` and `$.when()` here:
other libraries might have different terminology, but will behave similarly.

```
var ImageLoader = function (name, format) {
    var loading = $.Deferred(),

        img = new Image(),
        url = name + (format || ".png");

    img.onload = function () {
        loading.resolve(img);
    };

    img.onerror = function () {
        loading.reject("Image failed to load:" + name);
    };

    img.src = url;

    return loading.promise();
};

var imgLoaded = ImageLoader("//mysite.com/myimg");

imgLoaded.done(function () { console.log("img 1 loaded"); });
imgLoaded.fail(function (msg) { console.log(msg); });

var img2Loaded = ImageLoader("//yoursite.com/yourimg", ".jpg");
img2Loaded.done(function () { console.log("img 2 loaded"); });
img2Loaded.fail(function (msg) { console.log(msg); });

var showImages = function (img1, img2) {
    document.body.appendChild(img1);
    document.body.appendChild(img2);
};

var both_loaded = $.when(imgLoaded, img2Loaded);
both_loaded.done(showImages); 
```

This is a messy and convoluted example, but rather than making it elegant, I figured I'd try to write it in a way that shows all of the pieces.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:28:12.703

（假设 jQuery）

为了确保链接，每个步骤都需要返回一个承诺。

那就是 then() 所做的，所以这里没有问题。

doSomething() 也需要返回一个承诺。你可以通过让 doSomething() 创建一个 deferred 并返回它的 Promise 来做到这一点。

一些 jQuery 函数已经包含了一个 deferred，你可以直接用 then() 链接它们。例如：

```
$.ajax(...).then(...) 
```

查看[本文](http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/)以获取更多详细信息和实时示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:05:40.650

> 像这样的东西：
> 
> `doSomething().then(waitForthis).then(waitForSomethingElse);`

它宁愿是

```
doSomething('/').then( function() {
    return waitForthis('#e');
}).then( function() {
    return waitForSomethingElse('#el');
}); 
```

或者你使用[`.bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind).

> 我将在哪里创建延迟，然后每个人都会返回一个承诺？

是的，每个函数都会返回一个承诺。在 jQuery 中，“Deferred”是延迟对象的构造函数，调用“promise()”返回的对象只有 addCallback 函数，不暴露触发方法。只需检查[文档](http://api.jquery.com/category/deferred-object/)及其许多示例。

# c# - 了解 asp.net 中的线程以及如何分配服务器内存

> ID：13810455
> 
> 赞同：1
> 
> 时间：2012-12-10T22:34:38.443
> 
> 标签：c#, asp.net, multithreading, caching, memory

例如，如果向服务器发出 3 个请求，这是否意味着将 3 个 Web 应用程序实例放入内存？

如果您使用锁定的单例或缓存了一个类，那么每次它检查对象是否存在并在它不存在时创建该对象时，这是否意味着每个请求都缓存了该对象？还是缓存一次并为每个请求重用？

如果我锁定了一个单例，这是否意味着使用单例的对象被创建一次并且每个请求都使用相同的对象？或者这是否意味着该对象是为每个请求使用单例创建的，但不是由同一个线程再次创建的？

如果我曾经`System.Web.HttpRuntime.Cache["key"];` 缓存一个 1 mb 的对象并发出 10 个请求，我是否在服务器上使用了 10 mb 的内存？如果我使用单例创建了一个新对象......在线程和内存分配方面会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:45:20.363

在 IIS 中，为每个应用程序创建一个 AppDomain，并将与同一 AppPool 中的其他应用程序共享一个进程。

因此，同一个 Web 应用程序中对服务器的 3 个请求将共享同一个 AppDomain。

这如何影响缓存和单例：

[来自System.Web.Caching.Cache](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)上的文档：

> 每个应用程序域创建一个此类的实例，只要应用程序域保持活动状态，它就保持有效。

当您锁定一个对象（如单例）时，锁定的范围也是 AppDomain。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:44:50.300

你的实例 - 进程和你的 3 个请求 - 由线程执行。所以单例对象将在所有 3 个请求之间共享。您的缓存也将在请求之间共享。在您的示例中，您将仅分配 1 Mb（它将更新 10 次）。垃圾收集器将收集未使用的空间。

# php - file_get_contents() 删除制表符和换行符

> ID：13810456
> 
> 赞同：0
> 
> 时间：2012-12-10T22:34:41.770
> 
> 标签：php, file

我今天遇到了 file_get_contents() 函数的问题。读取大文件时，通常会删除换行符和制表符。这是我如何使用它的缩小示例。

我希望我不是唯一遇到这个问题的人！:O

感谢您的时间！

```
<?php    
$file_name = "template.html";

$data = array( 'title'  => 'Hello, World!',
               'content'=> 'Hey stackoverflow!');

$file_contents = file_get_contents($file_name);

foreach($data as $comment_name => $replacement_value){
    $search = "<!-- ".strtoupper($comment_name)." -->";

    $file_contents = str_replace($search, $replacement_value, $file_contents);
}

echo $file_contents;

?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T23:02:03.473

我认为您遇到的问题是您对将要返回的内容的理解。您将看到一个不包含 \r、\n 或 \t 字符的 HTML 字符串（浏览器将分别呈现为回车符或制表符）。转储您的变量并让我们看一下，然后我们至少可以帮助您解析数据以重新创建它。

# javascript - 我如何在子 javascript 代码中使用父变量？

> ID：13810458
> 
> 赞同：2
> 
> 时间：2012-12-10T22:34:41.843
> 
> 标签：javascript, three.js

这段代码在子级中使用继承我在场景中添加了一些在父级中声明的内容我该怎么做它在子级查看场景中出现错误

```
 function parent    (domElement, renderStatistics) {
    this.scene = new THREE.Scene();
    }
function child(domElement) {
    parent.call(this, domElement);
    this.init();
}
child.prototype = Object.create(parent.prototype);

child.prototype.constructor = Young;

child.prototype.init = function () {
function createLab(geometry) {
        var mesh = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial());
        this.scene.add(mesh);  // this error Cannot call method 'add' of undefined
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:17:04.833

```
child.prototype.init = function () {
var _this = this;
    function createLab(geometry) {
        var mesh = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial());
        _this.scene.add(mesh);  
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:04:56.237

看起来你的错误的原因是`= =`第二行的双等号。

这导致该值的属性是布尔值，而不是您期望的 new THREE.Mesh 的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:42:21.537

我不确定为什么需要在 init 中创建内部函数...

尝试任一

```
child.prototype.init = function () {
        var mesh = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial());
        this.scene.add(mesh);  // this error Cannot call method 'add' of undefined
} 
```

或者

```
function createLab(geometry) {
    var mesh = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial());
    this.scene.add(mesh);  // this error Cannot call method 'add' of undefined
 };

child.prototype.init = function () {
     createLab.call(this, whatever);
} 
```

# c - 一些“奇怪”的 C 代码

> ID：13810468
> 
> 赞同：6
> 
> 时间：2012-12-10T22:35:26.563
> 
> 标签：c

我有这个 C 代码，但我无法理解：

```
int foo(int f(int,int), int g(int,int), int x) {

    int y = g(x,x);
    return f(y,y);
}

int sq(int x, int y) {
    if (x == 1) { return y; }
    return pl(y, sq(x-1, y));
}

int pl(int x, int y) {
    if (x == 0) { return y; }
    return pl(x-1, y+1);
}

int main (int argc, const char * argv[])
{
   printf("sq = %d\n", sq);
   printf("output=%d\n", foo(sq, pl, 1));
   return 0;
} 
```

我知道 f 是两个变量相乘，而 g 是相乘，它们显然是内置的。函数 foo 有两个参数声明为函数声明-> f(int, int) 和 g(int, int)。但是随后 foo 带有两个参数 - sq 和 pl。这两个参数也有很奇怪的值——3392 和 3488，是函数 sq 和 pl 的逻辑地址吗？如果它们是并且它们作为整数传递，那么 foo 如何接受它们？由于 foo, 有函数声明来代替这些参数应该去的参数。

谢谢，编辑：很酷，非常感谢你们，这清除了一切！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T22:42:43.530

`f`并且不是内置的。正如您已经看到的，`g`它们只是函数的参数。`foo()`

此外，`printf("sq = %d\n", sq);`是未定义的行为，因为`sq`它不是一个整数值，而是一个函数。它在这种情况下的地址。所以你应该写`printf("sq = %p\n", sq);`为了干净地输出函数的地址。

真正发生的是，您`foo()`将函数`sq`作为参数`f`，将函数`pl`作为参数`g`。使用所写`foo`的参数调用这些函数。`x`

所以本质上`foo`调用`pl(1,1)`并存储结果`y`，然后用于`sq(y,y)`. 因此，它将工作委托给这些功能。这些函数可以看作是回调函数，因为`foo()`调用的是调用者给定的函数。

到目前为止，我无法理解做什么`sq()`和做什么。`pl()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T22:44:00.643

这段代码绝对没有什么特别之处。这里没有任何“内置”内容。

这些是普通的函数指针。在 C 声明中

```
int foo(int f(int,int), int g(int,int), int x) 
```

被自动解释为

```
int foo(int (*f)(int,int), int (*g)(int,int), int x) 
```

函数`sq`和`pl`作为参数传递给`foo`

```
foo(sq, pl, 1); // same as foo(&sq, &pl, 1) 
```

（`&`运算符是可选的）并通过内部的这些指针调用`foo`

```
int y = g(x,x); // same as (*g)(x,x)
return f(y,y);  // same as (*f)(y,y) 
```

（`*`调用中的运算符是可选的）。

在不知道你从哪里得到这些`3392`和`3488`价值观。函数指针不是“作为整数传递”。如果您的调试器决定将指针值显示为`3392`和`3488`，那一定是您的调试器有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T22:42:34.080

假设我理解你的问题并且可以记住任何 C 那么 foo 是一个函数，它接受*指向*2 个函数 f 和 g 加上一个 int 的指针，它返回一个 int。

f 和 g 都是接受 2 个整数并返回一个整数的函数。

你看到的数字是函数 pl 和 sq 的地址，所以看起来不错

您需要阅读有关将函数指针作为参数传递的信息，以更全面地解释正在发生的事情，这可能会有所帮助（即使它是 C++）[http://www.oopweb.com/CPP/Documents/FunctionPointers/Volume/ CCPP/FPT/em_fpt.html](http://www.oopweb.com/CPP/Documents/FunctionPointers/Volume/CCPP/FPT/em_fpt.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T22:42:39.317

```
int foo(int f(int,int), int g(int,int), int x) 
```

声明`foo`为一个接受三个参数的函数，前两个是（指向）函数，接受两个`int`s 作为参数并返回 an `int`，第三个参数是 an `int`。

`sq`并且`pl`是适当类型的函数，所以调用

```
foo(sq, pl, 1) 
```

是正确的。

# java - 如何使用 ExecutorService 处理中止的 Runnable？

> ID：13810471
> 
> 赞同：5
> 
> 时间：2012-12-10T22:35:33.070
> 
> 标签：java, multithreading, exception-handling

我有一个`Worker`类，`implements Runnable`并且有一个`run()`方法可以在发生冲突时引发异常，并提前返回。当它发生时，该线程需要放回队列中才能再次运行。

从[这个](https://stackoverflow.com/questions/141284/the-difference-between-the-runnable-and-callable-interfaces-in-java)问题来看，似乎我需要用`Callable`. 那是对的吗？有没有办法做到这一点`Runnable`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T22:53:26.733

那么你可以让工作线程自己做。如果你有执行人的控制权。

```
class RequeableWorker implement Runnable{
  private final ExecutorService e;
  public RequeableWorker(ExecutorService e){this.e =e;}

  public void run(){
     try{
        //do work
     }catch(RuntimeException ex){
        e.submit(this);
        throw ex;
     }
  }
} 
```

或者正如您的回答所暗示的那样，等待未来重新排队的线程。

```
public void workOrRequeue(){
    for(;;){
       Future<?> future = e.submit(someCallable());
       try{
          future.get();
          return;
       }catch(ExecutionException ex){
          //maybe log, ex.printStackTrace();
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:46:03.607

正如文档所说[`Future.get()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#get%28%29)：

> ### 抛出：
> 
> [...]
> 
> `ExecutionException`- 如果计算抛出异常

# python - Python 写偏向读写锁

> ID：13810476
> 
> 赞同：1
> 
> 时间：2012-12-10T22:35:51.713
> 
> 标签：python, locking

[有谁知道写偏向读者-写者锁](http://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock)的久经考验的python实现？谷歌搜索产生了一个[ActiveState 配方](http://code.activestate.com/recipes/577803-reader-writer-lock-with-priority-for-writers/)，但不确定这是否经过实战考验。在花时间整合和测试这个食谱之前，我应该看看别的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:32:38.550

您可以使用模块[threading2](http://pypi.python.org/pypi/threading2)的类 SHLock 。

这个类的方法acquire除了通常的参数外，还有一个布尔可选参数`shared`，默认为`False`。

正如参数名称所说，如果`shared`是`True`您要求获取共享锁，而不是如果`shared`是`False`您要求获取独占锁。

在读者/作者问题中，读者应该获得一个共享锁，而作者应该获得一个非共享（排他）锁。

它实现了锁，确保读者和作者都不会饿死。

# wordpress - Wordpress 动态插入帖子名称作为链接文本

> ID：13810478
> 
> 赞同：0
> 
> 时间：2012-12-10T22:35:54.347
> 
> 标签：wordpress

我在我的模板文件中使用以下代码来显示带有下载按钮的音频播放器（由音频播放器插件处理的下载按钮）

我需要将帖子名称插入代码中，以便生成的下载文件名与帖子名称匹配。

示例 - 帖子名称 =“非常酷的音频”将 = 下载时非常酷的 Audio.mp3

即使 .mp3 文件中的空格是“好的”并且是首选的，似乎也正在删除空格。

`<?php $customField = get_post_custom_values("audio"); if (isset($customField[0])) { echo '<h3><a href="'.$customField[0].'" class="button">Need Post Name Here</a></h3>'; } ?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:41:25.260

如果您在 The Loop 中（听起来像您），则以下内容应该有效。“此处需要帖子名称”已替换为`.get_the_title().`

```
<?php
  $customField = get_post_custom_values("audio");
  if (isset($customField[0])) {
    echo '<h3><a href="'.$customField[0].'" class="button">'.get_the_title().'</a></h3>';
  }
?> 
```

# requirejs - requireJS 中的车把助手

> ID：13810484
> 
> 赞同：5
> 
> 时间：2012-12-10T22:36:16.347
> 
> 标签：requirejs, handlebars.js

我正在创建一个帮助器来输出 7 或 8 行 HTML 以清理我的模板（并遵守 DRY - 嘿，押韵 - wikka wikka）。

下面是一个调用 addOn 助手的例子

```
{{#each promotion.CampaignColors}}
    {{{addOn . CampaignColorType.Code CampaignColorType.Name HexColor "some content" "a title"}}}
{{/each}} 
```

现在，据我了解，上下文之后的所有内容都应该是一个称为选项的哈希。这是我的 addOn.js 的存根

```
define([
    'handlebars',
    'hbs!templates/addOn',
], function (Handlebars, AddOnTemplate) {
    function addOn(context, options) {
        var data = {};
        var compiledTemplate = AddOnTemplate(data);
        console.log(compiledTemplate);
        return compiledTemplate;
    }

    Handlebars.registerHelper('addOn', addOn);
    return new Handlebars.SafeString(addOn);
}); 
```

但是，选项仅设置为我传递的第一个参数。如果我将方法签名更改为：

```
function addOn(context, key, displayName, value, content, title, test, options) {
...
} 
```

.. 我的每一个值都被设置了，options NOW 变成了一个带有空哈希的对象。

明确声明参数有效，但我更愿意使用哈希。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:09:56.747

来自[Handlebars doc on helpers](http://handlebarsjs.com/expressions.html#helpers)：

> Handlebars 助手调用是一个简单的标识符，后跟零个或多个参数（以空格分隔）。每个参数都是一个 Handlebars 表达式。
> [...]
> Handlebars 助手还可以接收可选的键值对序列作为其最终参数（在文档中称为哈希参数）。哈希参数中的每个键都必须是简单的标识符，值是 Handlebars 表达式。这意味着值可以是简单的标识符、路径或字符串。

要将您的参数用作哈希，您可以将您的助手称为

```
{{{addOn . Code=CampaignColorType.Code HexColor=HexColor Content="some content"}}} 
```

他们会像`options.hash`你的助手一样可用

```
define(['handlebars'], function (Handlebars) {
    function addOn(context, options) {
        console.log(options.hash);
    }

    Handlebars.registerHelper('addOn', addOn);
    return new Handlebars.SafeString(addOn);
}); 
```

# javascript - 带有悬停功能的下拉多级菜单

> ID：13810487
> 
> 赞同：0
> 
> 时间：2012-12-10T22:36:26.167
> 
> 标签：javascript, jquery, html

以下是基本的下拉菜单，孩子出现在悬停父文本上。

```
<script type="text/javascript">
  $(document).ready(function () { 
    $('#nav ul').hide();

    $('#nav li > a').hover(
      function () {$('ul', this.parentNode).stop().slideDown(100);}
    );

   $('#nav li').hover(null, 
      function (e) {$('ul', this.parentNode).stop().slideUp(100);}
   );

  }
  );
</script>

<ul id="nav">
  <li><a href="#">Parent A</a>
    <ul>
      <li><a href="#">Sub a1</a>
          <ul>
            <li><a href="#">Item a1.1</a></li>
            <li><a href="#">Item a1.2</a></li>
            <li><a href="#">Item a1.3</a></li>
        </ul> 
      </li>
      <li><a href="#">Sub a2</a></li>
      <li><a href="#">Sub a3</a></li>
    </ul>
  </li>
  <li><a href="#">Parent B</a>
    <ul>
      <li><a href="#">Sub b1</a></li>
      <li><a href="#">Sub b2</a></li>
      <li><a href="#">Sub b3</a></li>
    </ul> 
  </li>
</ul> 
```

我在子菜单下添加了第三个级别，但它不是打开和关闭最后一个级别。

在这种情况下，我不确定是否需要更改 html 代码，或者是否只有 JavaScript 需要更改才能使脚本正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:32:34.350

你可以这样做：

```
 $('#nav ul').hide();

   $('#nav li > a').hover(
      function () {
      //show its submenu
        $(this).parent().children('ul').stop().slideDown(100);
      }
    );
   $('#nav li').hover(null, 
      function (e) {
      //hide its submenu
        $(this).children('ul').stop().slideUp(100);
      }
   ); 
```

查看工作[**演示**](http://jsfiddle.net/7GGab/1/)

# c# - 我可以在用户控件内创建内联函数/方法吗？

> ID：13810493
> 
> 赞同：3
> 
> 时间：2012-12-10T22:36:51.730
> 
> 标签：c#, asp.net

我想在我的用户控件中创建一个内联函数/方法，以便我可以这样做：

在我的 test.ascx 里面：

```
<asp:Repeater ...>
  <itemTemplate>
     <p><%# MyInlineMethod(Eval("hello").ToString())%> </p>
  <itemTemplate>
</asp:Repeater> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:39:33.330

是的，这是可能的，但它必须是`static`方法。您必须使用完全限定名称访问它或导入命名空间。

```
<%@ Import Namespace="RootNamespace.SubNamespace1" %>

<asp:Repeater ...>
  <itemTemplate>
     <p><%# MyClass.MyInlineMethod(Eval("hello").ToString())%> </p>
  <itemTemplate>
</asp:Repeater> 
```

*方法定义*

```
namespace RootNamespace.SubNamespace1
{
     public class MyClass
     {
         public static string MyInlineMethod(string input){
            return string.Format("{0}!!!",input);
         }
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:43:52.773

```
<!-- IsActive is a boolean property of a bound item -->
<div class="<%# WebUtils.GetStyleName((bool)Eval("IsActive")) %>" /> 
```

```
public class WebUtils
{
   public static string GetStyleName(bool isActive)
   {
         return isActive ? "activeStyleName" : "notactiveStyleName";
   }
} 
```

# prolog - sumList 谓词需要检查它们的 Sum 是否等于列表中所有元素的总和

> ID：13810495
> 
> 赞同：1
> 
> 时间：2012-12-10T22:36:56.643
> 
> 标签：prolog

我正在实现一个方法，当给定`Sum`和一个`List`. 它将检查如果您在列表中添加元素，它们的总和是否等于给定的总和。到目前为止，这是我正在尝试做的事情，但我很确定这是错误的……我不确定如何考虑。

```
 sumList([],0).
  sumList([X|Xrest], Sum) :-
     sumList[Xrest, Sum1),
     Sum is X + Sum1. 
```

你能给我指出正确的方向吗，或者至少让我知道如何尝试思考这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:42:30.353

您的代码一切都很好，除了`sumList[Xrest, Sum1)`.

所以，这在我的`swipl`：

```
 sumList([],0).
  sumList([X|Xrest], Sum) :-
     sumList(Xrest, Sum1),
     Sum is X + Sum1.

?- sumList([1,2,3],X).
X = 6. 
```

# php - 显示 Opencart 的某些类别

> ID：13810498
> 
> 赞同：0
> 
> 时间：2012-12-10T22:37:02.910
> 
> 标签：php, opencart, categories

过去两天我一直在寻找解决方案，但我似乎找不到。基本上我想把我的菜单分开，一侧有1-4类，另一侧有5-8类。例如，我似乎无法计算出显示 1-4 个类别的代码。

我正在使用 v1.5.4.1

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:10:32.663

为此，如果您使用一定数量的类别，您可以只使用几个简单的循环

```
<?php
for($i = 0; $i < 4; $i++) {
    if(empty($categories[$i])) continue;
    $cat = $categories[$i];
    // Work with $cat here for each category item
}
?> 
```

这将遍历类别数组中的前四个类别。对于第二个循环，`= 0`用`= 4`和`< 4`替换做同样的事情`< 9`

# python - 如何在 IP2Location 库中编辑 setup.py

> ID：13810504
> 
> 赞同：0
> 
> 时间：2012-12-10T22:37:10.000
> 
> 标签：python, static-libraries

我正在尝试使用 IP2Location 库，但现在没有运气

这就是我应该做的，以使其工作：

```
Download IP2Location C library at here.
Decompress C library.
tar ip2location-c-x.x.x.tar.gz
Download and decompress Python library.
tar ip2location-python-x.x.x.tar.gz
Get into working directory.
cd ip2location-python-x.x.x
Edit setup.py to point library_dirs and include_dirs ponting to IP2Location C library folder.
Start compilation.
python setup.py build && python setup.py install 
```

这就是我的 setup.py 的样子： from distutils.core import setup, Extension

```
module1 = Extension('IP2Location',
                    sources = ['IP2Location.c'],
                    libraries = ['IP2Location'],
            library_dirs = ['../ip2location-c-4.0.2/libIP2Location/.libs'],
            include_dirs = ['../ip2location-c-4.0.2/libIP2Location'])

setup (name = 'Python-IP2Location',
       version = '4.0.0',
       description = 'Python wrapper for IP2Location C API',
       ext_modules = [module1] 
```

那是我的文件夹：

```
john-the-ripper@johntheripper-PORTEGE-Z835:~/PR$ ls -l
total 44
drwxrwxrwx 5 root            root             4096 Jan 26  2011 ip2location-c-4.0.2
drwxrwxrwx 4 root            root             4096 Dec 10 17:30 ip2location-python-4.0.0 
```

这就是错误：

```
john-the-ripper@johntheripper-PORTEGE-Z835:~/PR/ip2location-python-4.0.0$ python setup.py build && python setup.py install
running build
running build_ext
building 'IP2Location' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I../ip2location-c-4.0.2/libIP2Location -I/usr/include/python2.7 -c IP2Location.c -o build/temp.linux-i686-2.7/IP2Location.o
IP2Location.c:18:20: fatal error: Python.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1
john-the-ripper@johntheripper-PORTEGE-Z835:~/PR/ip2location-python-4.0.0$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:38:41.890

你需要`python.h`……你可以从 python-devel 包中得到它……

# javascript - Javascript document.open 异步？

> ID：13810508
> 
> 赞同：1
> 
> 时间：2012-12-10T22:37:24.183
> 
> 标签：javascript, document, ready

所以在我的网站上有一个 Javascript 函数，它将通过 XMLHttpRequest 从服务器加载一个新网站。之后，它将当前页面替换为新页面：

```
var post = new XMLHttpRequest();
post.open('POST', data);
post.onload = function() {
    var do = document.open("text/html", "replace");
    do.write(post.responseText);
    do.close();
    goOn();
}

function goOn() {
    console.log($('img:visible'));
} 
```

有些人可能会假设在 do.close() 之后文档已更改并准备就绪。但事实并非如此，例如，如果我加载非常多/大数据/responseText 函数 goOn() 只会记录一个空结果。显然 goOn() 在 DOM 准备好被读取之前被调用！不幸的是，在 write() 完成后没有触发“就绪”事件......我怎么能确定它已经完成？

/EDIT: goOn() 将此记录到 Chrome 控制台：

```
[prevObject: p.fn.p.init[1], context: #document, selector: "img:visible"]
context: #document
length: 0
prevObject: p.fn.p.init[1]
selector: "img:visible"
__proto__: Object[0] 
```

但是，如果我在手动输入 $('img:visible') 到控制台之后，它会向我显示所有图像......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:45:41.580

您是否尝试将准备好的事件附加到您的文档中，您可以尝试以下操作，

```
var post = new XMLHttpRequest();
post.open('POST', data);
post.onload = function() {
    var do = document.open("text/html", "replace");
    $(do).ready(function () { goOn(); });
    do.write(post.responseText);
    do.close();

}

function goOn() {
    console.log($('img:visible'));
} 
```

编辑：

是的，我在 fiddler 上试过，但是下面和[这里有 JS 事件](http://jsfiddle.net/9ZMXA/)

```
var docx = document.open();
docx.onreadystatechange = function () { alert(this.readyState) };
alert(docx);
docx.write("<div>test test test test ttetst <br /></div><div>test test test test ttetst <br /></div><div>test test test test ttetst <br /></div><div>test test test test ttetst <br /></div><div>test test test test ttetst <br /></div><div>test test test test ttetst <br /></div><div>test test test test ttetst <br /></div><div>test test test test ttetst <br /></div>");

docx.close();​ 
```

之后只需检查就绪状态并在它时做你的事情`complete`。

我认为这个可以解决问题。

# php - 未在 HTML 文件中执行 PHP 代码

> ID：13810509
> 
> 赞同：0
> 
> 时间：2012-12-10T22:37:28.370
> 
> 标签：php

我在一些页面 html 中有一个包含以下代码块的文件：

```
<input name="appname" type="text" value="<?php Load('appname'); ?>" placeholder="Your App Name" /> 
```

调用此函数：

```
<?php
// Load cookie values 
function Load($item) {
    $item = strtolower($item);
    if(!$_COOKIE['appsite_'.$item]) return null;
    return $_COOKIE['appsite_'.$item];
}
?> 
```

该函数位于 HTML 文件的顶部，创建了 cookie，但由于某种原因，输入 HTML 标记内的代码没有被执行。

我可以通过在函数下方执行以下操作来访问 cookie 的值：

```
$item = "appname";
echo $_COOKIE['w8appsite_'.$item]; 
```

似乎文件下方的 PHP 代码没有被执行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T22:40:46.480

尝试以下操作：

```
<input name="appname" type="text" value="<?php echo Load('appname'); ?>" placeholder="Your App Name" /> 
```

您需要`echo`在 PHP 中输​​入字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:47:17.470

您正在设置 cookie`$_COOKIE['w8appsite_appname']`并在函数中检查`$_COOKIE['appsite_appname']`which 将始终返回`null`。

# ios - 试图在 iOS 中制作免责声明视图控制器

> ID：13810518
> 
> 赞同：1
> 
> 时间：2012-12-10T22:38:26.207
> 
> 标签：ios, xcode, view, controller

我想仅显示一次包含我的应用程序免责声明的视图。就像，在您阅读并按下同意后，再也不会出现。当应用程序下次启动时，直接跳转到故事板中的下一个视图（登录或任何视图）。:(请尽可能详细地解释解决方案，因为我是iOS编程新手。非常感谢！

PS：我说的是 Xcode 中适用于 iOS 的 ViewController :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:44:31.657

第一次尝试读取`NSUserDefaults`并检查属性是否存在，如果不显示视图控制器并在用户默认值中设置一个属性，

在`didFinishLaunching`委托方法中，

```
NSString *myString = [[NSUserDefaults standardUserDefaults] stringForKey:@"DidShowDisclaimer"]

if ([myString iEqualToString:@"YES"]) {
   //show the view controller and once they have accepted save this key
   [[NSUserDefaults standardUserDefaults] setValue:@"YES" forKey:@"DidShowDisclaimer"];
   [[NSUserDefaults standardUserDefaults] synchronize]; //next time when the app is launched it will never execute this if condition
} 
```

所以下一次以后，它会是肯定的，你永远不必再出现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:44:15.513

您需要将 NSUserDefault 布尔值存储到您的应用程序中，以了解您的用户是否接受了用户协议。

所以就步骤而言 1\. 应用程序打开 2\. 检查之前是否设置了布尔值 3\. 如果没有向他们显示协议 4\. 如果他们同意，则设置布尔值以表示他们已经接受，当应用程序时您的检查将始终失败已打开，因此您可以跳过该步骤。

# c# - 从命令行检查 C# 语法

> ID：13810521
> 
> 赞同：8
> 
> 时间：2012-12-10T22:38:51.937
> 
> 标签：c#, vim, syntax-checking, syntastic

有谁知道在 Microsoft .NET 框架中检查给定 C# 文件的语法的方法，并且只检查语法？

对于一些背景知识，我感兴趣的是设置[syntastic](https://github.com/scrooloose/syntastic)来检查`.cs`文件的语法。开箱即用，syntastic 使用带有其`--parse`标志的 Mono C# 编译器来执行此操作，但我在 Microsoft .NET 框架中找不到等效项。

我第一次尝试使用它`csc /target:library /nologo`来代替`mcs --parse`，但问题是它是基于每个文件调用的。因此，它会报告缺少的命名空间（存在于完整的项目构建中），而不仅仅是语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:45:05.510

您可以通过[Roslyn CTP](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)执行此操作。它允许您完全解析 .cs 文件，并遍历整个树，查找错误。

有关详细信息，我建议下载[演练：C# 语法分析入门](http://go.microsoft.com/fwlink/?LinkID=263971)，因为它向您展示了查看 C# 文件中的语法树的基本方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:22:18.373

我之前在 icsharpcode IDE 中使用[过](https://github.com/icsharpcode/NRefactory)NRefactory。对于基本的东西来说，它既快速又容易。

看这篇文章： [使用 NRefactory 分析 C# 代码](http://www.codeproject.com/Articles/408663/Using-NRefactory-for-analyzing-Csharp-code)

我用它从 C# 示例创建 VB.NET 示例。执行此操作的方法非常简单，可以轻松适应您的需求：

```
 private static void ConvertLanguage(TextReader input, TextWriter output, SupportedLanguage language, Action<string> onError)
    {
        using (IParser parser = ParserFactory.CreateParser(language, input))
        {
            parser.Parse();
            var specials = parser.Lexer.SpecialTracker.RetrieveSpecials();
            var result = parser.CompilationUnit;
            //if (parser.Errors.Count > 0)
            //    MessageBox.Show(parser.Errors.ErrorOutput, "Parse errors");

            IOutputAstVisitor outputVisitor;
            if (language == SupportedLanguage.CSharp)
                outputVisitor = new VBNetOutputVisitor();
            else
                outputVisitor = new CSharpOutputVisitor();

            outputVisitor.Options.IndentationChar = ' ';
            outputVisitor.Options.IndentSize = 4;
            outputVisitor.Options.TabSize = 4;

            using (SpecialNodesInserter.Install(specials, outputVisitor))
                result.AcceptVisitor(outputVisitor, null);

            if (outputVisitor.Errors.Count > 0 && onError != null)
                onError(outputVisitor.Errors.ErrorOutput);

            output.Write(outputVisitor.Text);
        }
    } 
```

**注意：**上述代码来自旧版本，可能无法针对最新版本的 NRefactory 库进行编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:45:00.990

我想我可能对你的问题有一个解决方案。如果您尝试在不使用调试器的情况下检查代码的语法，则可以使用在线编译器作为[compilr](https://compilr.com/)。如果你想输出结果，那么你可以使用这个名为[Html Agility](http://htmlagilitypack.codeplex.com/)的神奇 api轻松地从在线编译器中获取结果。希望这有帮助！

# scala - 我在哪里可以找到 Scala 类型系统的一个很好的概述？

> ID：13810524
> 
> 赞同：1
> 
> 时间：2012-12-10T22:39:01.407
> 
> 标签：scala, types

我在哪里可以找到有关 Scala 类型系统（存在类型、类型边界、视图边界等）的全面概述？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:37:44.697

[Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)，第3 章（类型）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:47:58.053

Scala 编程，第二版，作者：Martin Odersky、Lex Spoon、Bill Venners。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:54:33.943

在这里查看图表（它有点小但很明显）：[http ://www.artima.com/pins1ed/scalas-hierarchy.html](http://www.artima.com/pins1ed/scalas-hierarchy.html)

您还可以阅读本章深入讨论类型：[http](http://www.artima.com/pins1ed/type-parameterization.html) ://www.artima.com/pins1ed/type-parameterization.html和[http://www.artima.com/pins1ed/implicit-conversions-and-parameters .html#sec:view-bounds](http://www.artima.com/pins1ed/implicit-conversions-and-parameters.html#sec:view-bounds)

# iphone - 未调用完成块。如何检查有效性？

> ID：13810525
> 
> 赞同：0
> 
> 时间：2012-12-10T22:39:00.637
> 
> 标签：iphone, objective-c, ios, ipad, objective-c-blocks

我有这个方法需要一个块，但并不总是调用那个块。见方法：

```
- (void)updateWithCompletion:(void (^)(void))completion {
    [MYObject myMethodWithCompletion:^(NSArray *array, NSError *error) {
        if (error) {
            NSLog(@"%s, ERROR not nil", __FUNCTION__);
            completion();
            return;
        }

        NSLog(@"%s, calling completion %d", __FUNCTION__, &completion);
        completion();
        NSLog(@"%s, finished completion", __FUNCTION__);
    }];
} 
```

我有更多的 NSLogs 在里面完成。有时，这个程序计数器会直接超过上面代码中对 completion() 的调用。我不明白为什么会这样，因为调用代码总是将文字代码块作为输入传递。

如果您对包含 addressof 运算符的行的输出感到好奇，它总是不同的东西，但绝不是 0 或 nil。

什么会导致完成不被执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:11:18.243

事实证明，完成指向的代码块与我预期的不同。updateWithCompletion 是从 viewWillAppear 使用空代码块调用的。这就是为什么我没有看到 NSLog 语句的原因。一旦我看到我有一个空代码块，如何解决问题就很明显了。

经验教训：如果代码块为零，程序将崩溃。这没有发生，所以这意味着它正在调用与我预期不同的东西。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:02:38.107

你是什​​么意思，程序计数器吹过块？完成块几乎总是异步执行。这意味着，是的，程序计数器将从调用之前`-myMethodWithCompletion:`直接跳转到方法的末尾，然后返回给调用者。然后在将来的某个时候，将调用完成块。

# javascript - 如何为 WordPress 中的自定义 TinyMCE 按钮分配 href 值？

> ID：13810527
> 
> 赞同：4
> 
> 时间：2012-12-10T22:39:09.337
> 
> 标签：javascript, wordpress, iframe, tinymce, thickbox

好吧，这要死我了。我编写了一个 WordPress 插件，它向 TinyMCE 编辑器添加了一个自定义按钮，它工作得很好，除了由按钮触发的选项弹出窗口的加载方式与 WP 原生的类似弹出窗口不同......

具体来说，当您单击 WordPress 中 TinyMCE 工具栏上方的“添加媒体”按钮时，“添加媒体”窗口会以一个不错的厚框模式打开。它还加载到 iframe 中，因为获取输出的按钮 HTML 包装在带有 URL href 值的锚标记中：

```
<a href="http://.../wp-admin/media-upload.php?post_id=916&amp;TB_iframe=1&amp;width=640&amp;height=354" class="thickbox add_media" id="content-add_media" title="Add Media" onclick="return false;"> 
```

但是当我的按钮的 HTML 得到输出时，锚标记的 href 值为 'javascript:;'：

```
<a role="button" id="content_companyinfo" href="javascript:;" class="mceButton mceButtonEnabled mce_companyinfo" onmousedown="return false;" onclick="return false;" aria-labelledby="content_companyinfo_voice" title="Insert company info fields" tabindex="-1"> 
```

这是我的 TinyMCE 编辑器插件代码： http: [//pastebin.com/kuQJRHJR](http://pastebin.com/kuQJRHJR)

这是添加媒体按钮的 WP 核心 TinyMCE 编辑器插件：http: [//core.trac.wordpress.org/browser/trunk/wp-includes/js/tinymce/plugins/media/editor_plugin_src.js](http://core.trac.wordpress.org/browser/trunk/wp-includes/js/tinymce/plugins/media/editor_plugin_src.js)

TinyMCE addButton 函数不允许您设置 href 值，只能设置链接到使用 addCommand 创建的自定义命令函数的 cmd 值。

我尝试在 addButton 函数的设置中将类“thickbox”添加到我的按钮中，但这会产生奇怪的效果，即在我的正常弹出窗口后面创建一个厚框模式。

任何人都知道如何以正确的方式做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:34:36.587

1.  在你插件的 editor_plugin.js`init`函数中添加这个函数：

    ```
    ed.onInit.add(function(ed, evt) {
     // make that the interactions window will open in a thickbox by adding the button the right attributes
           jQuery('#content_myInteractions').addClass('thickbox');
    }); 
    ```

    将“content_myInteractions”更改为您的按钮 ID。

2.  在按钮的命令中，使用`tb_show()`在厚框中打开您想要的内容：

    ```
    tb_show('myInteractions', '#TB_inline?height=300&width=400&inlineId=interactions_wrapper'); 
    ```

我使用 jQuery（内联内容）从输入到页面底部的 div 中获取了我的thickbox 内容。您也可以使用 iframe。这可能有助于[thickbox.net](http://thickbox.net/)

# java - 使用 Rhino 调用将回调作为参数的函数

> ID：13810529
> 
> 赞同：3
> 
> 时间：2012-12-10T22:39:13.050
> 
> 标签：java, javascript, rhino

一旦我拥有代表它的 Rhino 对象，如何使用 Rhino ( , not ) 调用以下`sum()`函数，将 Java 方法作为回调传递给它（或任何其他允许我在 Java 中接收结果的方式） ？`org.mozilla.javascript``javax.script``Function`

```
function sum(a, b, successHandler) {
    successHandler(a + b);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:32:12.727

这是我找到的解决方案：

```
function.call(context, scope, null, new org.mozilla.javascript.Function() {
    @Override
    public Object call(Context cx, Scriptable scope, Scriptable thisObj, Object[] args) {
        System.out.println(args[0]);
    },

    // ...
}); 
```

不幸的`org.mozilla.javascript.Function`是，接口如此之大，但一切似乎都可以正常工作，即使所需的方法都没有真正的实现。

不过，这并不完全优雅。我希望有更好的方法。

# java - Android：在多个片段之一中使用 MapFragment

> ID：13810530
> 
> 赞同：1
> 
> 时间：2012-12-10T22:39:16.240
> 
> 标签：java, android, google-maps, android-nested-fragment

我找了又找，没有人完整回答。

我有一个项目需要在 Android 项目的多个片段之一中使用新的 MapFragment。

到目前为止，我拥有它就像一个 FB 移动应用程序。它在左侧显示一个菜单，用户可以选择一个项目并显示一个片段。到目前为止，我搜索和搜索。没有完整和可行的答案。

我喜欢看到示例代码和/或示例项目，它们可以在 Android 应用程序中的许多片段的片段中显示新的 Google MapFragment。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:14:14.813

以编程方式添加 SupportMapFragment 有效。在您的片段实现中：

```
...
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;
...

@Override
public void onStart() {
    super.onStart();

    // add fragment 
    mMapFragment = SupportMapFragment.newInstance();
    FragmentTransaction fragmentTransaction = getChildFragmentManager().beginTransaction();
    fragmentTransaction.add(R.id.game_map_container, mMapFragment);
    fragmentTransaction.commit();

    // add a marker
    map = mMapFragment.getMap();

    if (map != null) {
        // The Map is verified. It is now safe to manipulate the map.
        map.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
        map.addMarker(new MarkerOptions().position(target));
        map.setMyLocationEnabled(true);
        map.moveCamera(CameraUpdateFactory.newLatLngZoom(target, 10));
    } else {
        Log.e(TAG, "map is not available");
    }
} 
```

实际上，这个想法是从[使用 Maps API v2 以编程方式初始化 MapFragment中窃取的](https://stackoverflow.com/questions/13733299/initialize-mapfragment-programmatically-with-maps-api-v2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:21:35.480

> 我刚刚对 getChildFragmentManager() 做了一些研究，你必须使用 IMPORT android.support.v4.app.Fragment 和其他类似的，而不是使用 IMPORT android.app.Fragment 和其他

不一定，虽然[`getChildFragmentManager()`只是`Fragment`](http://developer.android.com/reference/android/app/Fragment.html#getChildFragmentManager%28%29)在 API 级别 17 中添加到本机[实现中。](http://developer.android.com/reference/android/app/Fragment.html#getChildFragmentManager%28%29)

欢迎您使用`SupportMapFragment`Android 支持包的片段反向移植。这应该允许您`getChildFragmentManager()`与 Maps V2 一起使用。

# cocoa - 非法数据源，但一切正常

> ID：13810531
> 
> 赞同：2
> 
> 时间：2012-12-10T22:39:17.923
> 
> 标签：cocoa, syntax-error, nstableview

得到：

```
*** Illegal NSTableView data source (<NSApplication: 0x101602bc0>).  Must implement numberOfRowsInTableView: and tableView:objectValueForTableColumn:row: 
```

代码***.h***

```
 //
//  AppDelegate.h
//  MySQL
//
//  Created by - on 10/12/12.
//  Copyright (c) 2012 - Software. All rights reserved.
//

#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate> {

    NSMutableArray *tabelle_totali;
    IBOutlet NSTableView *tabella_tabelle_totali;
    IBOutlet NSTableView *tabella_contenitore;

}

@property (assign) IBOutlet NSWindow *window;

//Metodo per scaricare dati
- (void) download_tabelle ;
//Manipolazione tabelle ricevute
- (void)tabelle_ricevute:(NSData *)tabelle;
//Refresh tabella
- (IBAction)refresh_tablelle:(id)sender;
//Refresh tabelle
- (int)numberOfRowsInTableView:(NSTableView *)aTableView;
- (id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(int)rowIndex;
@end 
```

代码***.m***

```
//
//  AppDelegate.m
//  MySQL
//
//  Created by - on 10/12/12.
//  Copyright (c) 2012 Alberto Bellini Software. All rights reserved.
//

#import "AppDelegate.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [self download_tabelle];
    [tabella_tabelle_totali reloadData];
}

- (void) download_tabelle  {
    NSMutableString *databaseURL = [[NSMutableString alloc] initWithString:@"http://*********************.php"];
    //inizializzazione richiesta url
    NSURL *url = [NSURL URLWithString:databaseURL];
    //Richiesta asincrona per richiedere dati
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *tabelle, NSError *error)
     {
         [self tabelle_ricevute:tabelle];
     }
     ];

}

- (void)tabelle_ricevute:(NSData *)tabelle
{

    NSString *response = [[NSString alloc] initWithData:tabelle encoding:NSUTF8StringEncoding];
    NSArray *tmpResp = [response componentsSeparatedByString:@"####"]; //This array splits the response string
    NSLog(@"%@",response);
    //Aggiungo le mie tabelle al mio array
    [tabelle_totali addObjectsFromArray:tmpResp];

}

- (IBAction)refresh_tablelle:(id)sender {

    //Cancello vecchi dati
    while([[tabella_tabelle_totali tableColumns] count] > 0) {
        [tabella_tabelle_totali removeTableColumn:[[tabella_tabelle_totali tableColumns] lastObject]];
    }

    NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:@"1"];
    [column setWidth:143];
    [[column headerCell] setStringValue:@"*******"];
    [tabella_tabelle_totali addTableColumn:column];
    [tabella_tabelle_totali reloadData];
}

-(NSInteger)numberOfRowsInTableView:(NSTableView *)aTableView {
    return 5;
}
-(id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {

    return @"hello world";
}

@end 
```

**抱歉，很多代码都是用意大利语编写的，但问题是“国际”。为什么我会收到这个错误？表 dataSource 也连接到文件的所有者和出口。当运行应用程序而不是显示 5 行和 5 个“hello world”时，显然没有任何反应。帮助**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:53:26.903

问题可能出在包含表格视图的 xib 文件中。您是否将表视图的委托设置为文件所有者（这将是 NSApplication 的一个实例），或者您是否将其委托设置为您的应用程序委托？它需要设置为您的应用程序委托。

如果您还没有设置一个代表您的应用程序委托的对象（在 UI 布局左侧的边距中可见），您应该这样做，并将您的表视图的 delgate 连接连接到该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T17:37:37.797

使用 Swift 时，问题可能是数据源类没有显式实现`NSTableViewDataSource`协议。特别是，随着 Swift 3 中的 API 重命名，它似乎是导致 Swift 3 语法映射`tableView(_:objectValueFor:row:)`到 Objective-C 选择器的协议`tableView:objectValueForTableColumn:row:`。

我在实现表视图数据源时发现了这一点；虽然我在 Swift 中实现了正确的方法，但我`*** Illegal NSTableView data source`在运行时收到了消息。我很困惑，直到我意识到我忘记在我的类声明中包含协议一致性。

# javascript - 浏览器内 MVC 应用程序的文件结构

> ID：13810546
> 
> 赞同：0
> 
> 时间：2012-12-10T22:40:26.667
> 
> 标签：javascript, model-view-controller

我正在构建一个浏览器内 MVC 应用程序，它最终将通过 PhoneGap 在移动设备上运行。该应用程序将与 API 服务器通信，但在其他方面将完全独立。当我在 Rails 中开发标准的服务器端 MVC 应用程序时，模型、视图和控制器被分离到不同的文件和目录中。浏览器内 MVC 应用程序的标准做法是什么？MVC 组件通常是在单个 JS 文件中定义的，还是通常是分开的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:27:45.413

在开发阶段，是的，javascript 文件应该分开并有据可查。您可以使用[requirejs](http://requirejs.org/)分别加载您的模块/视图/集合。

这是一个关于**异步模块定义**（AMD）的很棒的[教程。](http://backbonetutorials.com/organizing-backbone-using-modules/)它主要是关于如何使用模块来组织应用程序。我建议你阅读它。 以下是教程作者使用的示例项目结构：

 **```
├── js
│   ├── libs
│   │   ├── jquery
│   │   │   ├── jquery.min.js
│   │   ├── backbone
│   │   │   ├── backbone.min.js
│   │   └── underscore
│   │   │   ├── underscore.min.js
│   ├── models
│   │   ├── users.js
│   │   └── projects.js
│   ├── collections
│   │   ├── users.js
│   │   └── projects.js
│   ├── views
│   │   ├── projects
│   │   │   ├── list.js
│   │   │   └── edit.js
│   │   └── users
│   │       ├── list.js
│   │       └── edit.js
│   ├── router.js
│   ├── app.js
│   ├── main.js
│   ├── order.js
│   └── text.js
└── index.html 
```

对于验证/部署阶段，使用类似[grunt](http://gruntjs.com/)的工具来启动自动化任务。例如将javascript文件连接并缩小为一个文件。（这大约需要 30 秒，具体取决于您的配置方式）
这是一个 grunt 文件的[示例](https://github.com/wise9/enchant.js/blob/master/grunt.js)。**

# python - python mechanize中的http PUT方法

> ID：13810547
> 
> 赞同：0
> 
> 时间：2012-12-10T22:40:28.440
> 
> 标签：python

我正在使用 python mechanize lib，我正在尝试在某些 url 上使用 http PUT 方法 - 但我找不到任何选项。我只看到 GET 和 POST 方法...

如果 PUT 方法不起作用，也许 some1 可以告诉我一个更好的库来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-01T08:41:59.417

一种可能的解决方案：

```
class PutRequest(mechanize.Request):
  "Extend the mechanize Request class to allow a http PUT"
  def get_method(self):
    return "PUT" 
```

然后，您可以在发出这样的请求时使用它：

```
browser.open(PutRequest(url,data=your_encoded_params,headers=your_headers)) 
```

注意：我通过深入研究 mechanize 代码包来找出 mechanize 设置 HTTP 方法的位置，从而得出了这个解决方案。我注意到，当我们调用时`mechanize.Request`，我们正在使用 Request 类，`_request.py`其中又扩展了 Request 类`_urllib2_fork.py`。http 方法实际上是`get_method`在 Request 类中设置的`_urllib2_fork.py`。结果`get_method`是`_urllib2_fork.py`只允许 GET 和 POST 方法。为了克服这个限制，我最终编写了自己的 put 和 delete 类来扩展机械化。请求但仅超越`get_method()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:42:40.630

使用[请求](http://docs.python-requests.org/en/latest/user/advanced/#http-verbs)：

```
>>> import requests
>>> result = requests.put("http://httpbin.org/put", data='hello')
>>> result.text 
```

* * *

根据[文档](http://docs.python-requests.org/en/latest/api/#requests.put)：

```
requests.put(url, data=None, **kwargs)
Sends a PUT request. Returns Response object.

Parameters: 
url – URL for the new Request object.
data – (optional) Dictionary or bytes to send in the body of the Request.
**kwargs – Optional arguments that request takes. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T14:25:12.157

通过[**机械化**](http://joesourcecode.com/Documentation/mechanize0.2.5/)：

```
import mechanize
import json

class PutRequest(mechanize.Request):
  def get_method(self):
    return 'PUT'

browser = mechanize.Browser()
browser.open(
    PutRequest('http://example.com/',
    data=json.dumps({'locale': 'en'}),
    headers={'Content-Type': 'application/json'})) 
```

另请参阅[http://qxf2.com/blog/python-mechanize-the-missing-manual/](http://qxf2.com/blog/python-mechanize-the-missing-manual/)（可能已过时）。

[](http://docs.python-requests.org/en/latest/user/advanced/#http-verbs)**[*正如Key Zhu*所说，](https://stackoverflow.com/a/13810574/167897) [**Requests**](http://docs.python-requests.org/en/latest/user/advanced/#http-verbs)以更好的方式进行。**

# python - Tk/Tkinter 中的事件流问题

> ID：13810551
> 
> 赞同：1
> 
> 时间：2012-12-10T22:40:55.420
> 
> 标签：python, tkinter, wait, tk

我正在使用 Python 3.1 和 Tk 将一些东西放在一起。

我想循环浏览我在这里定义的“NewDataFrame”对象的不同方法：

```
from tkinter import *
from tkinter import ttk
import string

root = Tk()

mainframe = ttk.Frame(root)
mainframe.grid(column=0, row=0, sticky=(N, W, E, S))
mainframe.columnconfigure(0, weight=1)
mainframe.rowconfigure(0, weight=1)

value = StringVar()
dataname = StringVar()

class MenuFrame:
    def __init__(self, parent):
        self.myParent = parent
        self.menuFrame = ttk.Frame(self.myParent)
        self.newButton = ttk.Button(self.myParent, text="new dataset", command=self.newClick)
        self.loadButton = ttk.Button(self.myParent, text="load dataset", command=self.loadClick)
        self.menuFrame.grid(column=0, row=0)
        self.newButton.grid()
        self.loadButton.grid()

    def newClick(self):
        self.instructions = ttk.Label(self.menuFrame, text="enter a name for your new dataset")
        self.instructions.grid()
        self.nameEntry = ttk.Entry(self.menuFrame, textvariable=dataname)
        self.enterName = ttk.Button(self.menuFrame, text="enter", command=self.newData)
        self.nameEntry.grid()
        self.enterName.grid() 
```

类 NewDataFrame：

```
def __init__(self, parent, dataname):
    self.myParent = parent
    self.newDataFrame = ttk.Frame(parent)
    self.dataSet = DataSet(dataname)
    self.instructions = ttk.Label(self.newDataFrame)
    self.instructions.configure(text="enter aspects of %s, separated by commas" % (self.dataSet.getName()))
    self.enterBar = ttk.Entry(self.newDataFrame, textvariable=value)
    self.enterButton = ttk.Button(self.newDataFrame, text="ENTER", command=self.enterClick)
    self.doneButton = ttk.Button(parent, text="DONE", command=self.createAspects)
    self.newDataFrame.grid()
    self.enterBar.grid()
    self.goingOn.grid()
    self.instructions.grid()
    self.enterButton.grid()
    self.doneButton.grid() 
```

我希望 doneButton 循环执行几个不同的命令，正如您在 newDataSet 框架的这些方法中看到的那样：

```
def createAspects(self):
    for asp in (value.get().split(',')):
        aspect = Aspect(self.dataSet.getName(), asp)
        self.dataSet.addAspect(aspect)
    for a in self.dataSet.getAspects():
        self.createFile(i=a.getName())
        self.instructions.configure(text="enter groups of %s, separated by commas" % (a.getName()))
        self.doneButton.configure(command=self.createGroups(aspect=a))

def createGroups(self, aspect=""):
    for gro in (value.get().split(',')):
        print(gro)
        group = Group(self.dataSet.getName(), aspect.getName(), gro)
        aspect.addGroup(group)
    for group in aspect.getGroups():
        self.createFile(i=aspect.getName(), j=group.getName())
        self.instructions.configure(text="enter members of %s, separated by commas" % (group.getName()))
        self.doneButton.configure(command=self.createMembers(aspect=aspect, group=group))

def createMembers(self, aspect="", group=""):
    for mem in (value.get().split(',')):
        member = Member(self.dataSet.getName(), aspect.getName(), group.getName(), mem)
        group.addMember(member)
    for mem in group.getMembers():
        self.createFile(i=aspect.getName(), j=group.getName(), k=mem.getName())

menuFrame = MenuFrame(mainframe)

root.mainloop() 
```

我是一个大菜鸟，但这需要我做很多工作才能制作，而且我真的被困在了我的位置，所以我可以使用一些创造性的输入。我希望这个程序暂停框架并允许用户在 value 变量中为以下每个对象类型输入内容：方面，将包含组，将包含成员（像树形图一样组织）。

目前，该程序不会在 createGroup 执行级别等待（我希望它等待另一次单击以继续进行 createMember 部分） - 而是在输入方面后立即要求用户输入成员。

我希望这不是太抽象，非常感谢任何试图提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:23:48.097

让我们从主要错误开始：

```
self.doneButton.configure(command=self.createGroups(aspect=a)) 
```

当 Python 到达这一行时，它会计算`self.createGroups(aspect=a)`并将返回值传递给`command`. 所以`self.createGroups(aspect=a)`最终被*调用*。相反，您真的想传递一个回调函数以便`command`稍后调用（当`done`下次按下按钮时）。

试图通过重新配置`done`回调来管理控制流是自找麻烦。我们不仅必须创建`aspect = a`已经绑定了正确参数（例如 ）的函数，因此我们有一个函数需要零参数，就像完成回调所期望的那样，而且（甚至更难）我们必须识别何时*重置*`done`从 createMembers 到 createGroups 并返回到 createAspect的回调。我们将对控制流进行微观管理。

如果我们可以让 Python 来处理这些细节，那不是很好吗？

您正在寻找的是一个函数，您可以调用、暂停、稍后返回并在您之前暂停的位置恢复。Python 正好有这种函数——[生成器函数](http://www.python.org/dev/peps/pep-0255/)。

例如，

```
def gen():
    for i in range(5):
        print(i)
        yield

mygen = gen().next
mygen()
mygen() 
```

产量

```
0
1 
```

请仔细注意，每次`mygen()`调用都将继续执行，直到 Python 到达一个`yield`表达式。所以第一次`mygen()`被调用，`0`被打印，但第二次，`1`被打印。Python 会记住它上次产生的位置，并在该点恢复。

因此，要将这个想法应用于您的情况，您可以尝试使用以下内容：

```
class NewDataFrame:
    def __init__(self, parent, dataname):
        ...
        self.on_done = self.cycle_done().next
        self.doneButton = ttk.Button(parent, text="DONE", command=self.on_done)

    def cycle_done(self):
        while True:
            for asp in (value.get().split(',')):
                aspect = Aspect(self.dataSet.getName(), asp)
                self.dataSet.addAspect(aspect)
            for aspect in self.dataSet.getAspects():
                self.createFile(i=aspect.getName())
                self.instructions.configure(
                    text="enter groups of %s, separated by commas" % (aspect.getName()))
                yield
                for gro in (value.get().split(',')):
                    print(gro)
                    group = Group(self.dataSet.getName(), aspect.getName(), gro)
                    aspect.addGroup(group)
                for group in aspect.getGroups():
                    self.createFile(i=aspect.getName(), j=group.getName())
                    self.instructions.configure(
                        text="enter members of %s, separated by commas" % (group.getName()))
                    yield
                    for mem in (value.get().split(',')):
                        member = Member(self.dataSet.getName(), aspect.getName(), group.getName(), mem)
                        group.addMember(member)
                    for mem in group.getMembers():
                        self.createFile(i=aspect.getName(), j=group.getName(), k=mem.getName())
            yield 
```

`createAspect`这将来自的大部分代码`createGroup`和`createMembers`所有代码组合到一个生成器中。可以重构`cycle_done`（成为迭代（较小）生成器的生成器），但这样做会增加解决方案的复杂性。让我们先让这个解决方案工作，然后（如果您有兴趣）我们可以担心重构。

# asp.net-mvc-3 - 从命令行 asp.net mvc 3 项目启动 IIS Express（使用 VS2012 构建）

> ID：13810552
> 
> 赞同：1
> 
> 时间：2012-12-10T22:40:58.347
> 
> 标签：asp.net-mvc-3, command-line, visual-studio-2012, iis-express

我有一个在 Visual Studio 2012 中创建的 asp.net mvc 3 项目。我想从命令行而不是 IDE 运行开发服务器（通常单击绿色播放/三角形按钮）。

我的目标是无需打开 Visual Studio 即可运行本地 Web 服务器。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-28T22:04:58.110

从 Visual Studio 启动您的项目。打开 Sysinternals Process Explorer 并导航到您的 iisexpress 实例。在属性 - 图像选项卡 - 命令行中，您会得到如何调用它的提示。

```
"C:\Program Files (x86)\IIS Express\iisexpress.exe"  /config:"C:\Users\YourProfile\Documents\IISExpress\config\applicationhost.config"  /site:"MvcApplication1(1)" /apppool:"Clr4IntegratedAppPool" 
```

applicationhost.config 将在历史记录中包含您的站点。

# java - java中不等于

> ID：13810553
> 
> 赞同：0
> 
> 时间：2012-12-10T22:41:03.767
> 
> 标签：java, arrays, equals, equality

我在字符串数组“平衡数组”中有这个输入“4+4-(4+4+(4+4)))”

我正在尝试执行此代码：

```
String expression = "";
for(int j=2 ; j<balance.length-1 ; j++)
{
     if(!(balance[j].equals("+")) || !(balance[j].equals("-")) || !(balance[j].equals("(")) || !(balance[j].equals(")")))
          expression = expression + balance[j];
} 
```

在代码的末尾，表达式应该包含“444444”，但它不起作用。

我在使用 !.equals 和 || 以错误的方式做事？

我想使用 || 将这 4 个语句组合在一起 它们之间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T22:42:40.097

将所有更改`||`为`&&`：

```
 if (!balance[j].equals("+") && !balance[j].equals("-") &&
         !balance[j].equals("(") && !balance[j].equals(")")) 
```

此外，循环的起始值`j`和循环的终止条件看起来都不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:43:33.887

采用

```
if(!((balance[j].equals("+")) || (balance[j].equals("-")) || (balance[j].equals("(")) || (balance[j].equals(")")))) 
```

和

```
for(int j=0 ; j<=balance.length-1 ; j++) 
```

# php - PHP HTTP 后响应

> ID：13810555
> 
> 赞同：-3
> 
> 时间：2012-12-10T22:41:07.153
> 
> 标签：php

```
//echo $vars1;
$curl = curl_init('http://api.sms.com/api/v2/sendsms/plain?');
curl_setopt($curl, CURLOPT_POST, TRUE);
curl_setopt($curl, CURLOPT_POSTFIELDS, $vars1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($curl);

$Status =$result; 
```

请我需要将上面的 HTTP 响应的值放入一个 PHP 变量中，但我一直在获取一个字符串变量。当我使用 var_dump($result); 这就是我得到的

```
<result>
 <status>0</status><messageid>032120313205357007</messageid><destination>23348787878555</destination>
</result>' 
```

任何人都可以帮助我如何将单个元素放入 PHP 变量中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:55:16.430

要解析结果并提取状态元素，可以使用[simplexml_load_string](http://php.net/manual/en/function.simplexml-load-string.php)

```
$xml = simplexml_load_string($result);
$status = $xml->xpath('/result/status');
echo $status[0]; 
```

您还可以遍历 XML 元素

```
foreach ($xml as $element => $text) {
    echo "$element: $text\n";
} 
```

# c++ - 向量到字符串到逗号字符串？

> ID：13810561
> 
> 赞同：1
> 
> 时间：2012-12-10T22:41:45.867
> 
> 标签：c++

```
QString line = "";
std::vector<std::pair<int, QString> >::iterator it = recordingArray.begin();

while(it != recordingArray.end())
{
  line.append(*it);
  line.append(',');
} 
```

以上循环出一个向量。我需要将这一对的每一部分转换为一个字符串，然后将其添加到“行”中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:47:15.577

我会使用 a `std::stringstream`，然后将其转换为 a`QString`

```
std::stringstream ss;
std::vector<std::pair<int, QString> >::iterator it = recordingArray.begin();

for(; it != recordingArray.end(); ++it)
{
  ss << it->first << ' ' << it->second.toStdString() << ',';
}

QString line = QString::fromStdString(ss.str()); 
```

编辑：我不确定 QString 重载，所以似乎有必要`operator<<(std::ostream &out, const QString &qs)`进行额外的转换。`std::string`

# mysql - 启用严格模式时 MySQL 会进行哪些验证？

> ID：13810562
> 
> 赞同：22
> 
> 时间：2012-12-10T22:41:52.997
> 
> 标签：mysql, validation, strict

当 MySQL 允许我将 a`NULL`插入使用`NOT NULL`. 我做了一些研究，发现了如何启用严格模式。但是，我不太确定`STRICT_ALL_TABLES`启用 MySQL 时会执行什么验证。

**手册说：**

> 严格模式控制 MySQL 如何处理无效或丢失的输入值。**一个值可能由于多种原因而无效。**（强调我的）例如，它可能具有错误的列数据类型，或者它可能超出范围。

我了解它认为缺少什么以及如何处理它。我不清楚它认为什么*无效*。我做了一些测试并发现了以下内容：

*   太长的字符串无效
*   超出范围的数字无效
*   `NULL`非`NULL`列的 s 无效
*   `TRUE`并且`FALSE`似乎总是有效的（它们分别变为 1 和 0）
*   无效日期无效
*   零日期有效（可以启用其他模式来更改此行为）
*   整数字段中的浮点数是有效的（它们被四舍五入）
*   数字字段中的字母无效

除了上面提到的之外，MySQL 是否进行任何其他验证检查？

手册说“列的数据类型错误”，但我看到的唯一实际发挥作用的情况是数字字段中的字母。还有其他数据类型错误的例子吗？

是否有一个关于 MySQL 执行的检查的列表？

**编辑：**作为记录，我的应用程序已经进行了广泛的验证。我使用严格模式作为最后的机会，以防万一。如果我忘记检查某些内容，我希望它*快速失败*，而不是“默默地破坏我的数据”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T17:38:00.433

一个很好的资源是检查 MySQL 源代码，并阅读`mysql-test/t/strict.test`以查看在设置 STRICT 模式或 TRADITIONAL 模式（这是 STRICT 的超集）后测试的所有案例。

您做了出色的研究和测试，但还有一些案例，例如：

*   试图插入一个未定义的 ENUM 值。
*   尝试为未定义 DEFAULT 的 NOT NULL 列插入默认值。
*   尝试使用 CAST() 将字符串转换为整数等。
*   如果您给出的长度大于 65536，则将 VARCHAR 转换为 MEDIUMTEXT 或 LONGTEXT。
*   截断表和列的 COMMENT 字符串。
*   将字符串转换为 YEAR 类型。
*   定义具有重复条目的 SET 或 ENUM 列。

另外`mysql-test/include/strict_autoinc.inc`，因为它会在 auto-inc 值增长过大时测试溢出。

还有一些其他测试文件使用 STRICT 模式进行特定测试，但我没有检查它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T18:49:17.173

我使用了 MySQL 5.5.28（社区服务器版）的源代码来查找正在使用的 STRICT_ALL_TABLES 的实例。

从我看到的情况来看，你的列表看起来已经很完整了，但下面是我学到的关于使用 STRICT_ALL_TABLES 的更多内容。第一个是另一个验证，而其余的都处理错误和警告。

*   几何列不能有默认值。**(sql/field.cc:9394)**
*   如果表注释超过 2048 个字符，MySQL 会产生错误而不是截断注释并发出警告。 **(sql/unireg.cc:231)**
*   如果字段注释超过 1024 个字符，MySQL 会产生错误而不是截断注释并发出警告。 **(sql/unireg.cc:739)**
*   在插入或更新时，如果 SET 或 ENUM 中存在重复值，MySQL 会产生错误而不是警告。 **(sql/sql_table.cc:2503)**
*   有很多操作会在使用 STRICT_ALL_TABLES 发出警告时中止，而不是仅仅发出警告。这些对于我来说太多了，并且 abort_on_warning 标志的设置与创建警告的代码相去甚远，以至于我无法轻松记录（甚至理解）所有这些警告。但是如果有人想弄脏源代码，可以从**sql/sql_update.cc:630**和**sql/sql_insert.cc:841 开始**

# android - android中的白色位图

> ID：13810564
> 
> 赞同：6
> 
> 时间：2012-12-10T22:42:03.370
> 
> 标签：android, bitmap, wallpaper

我想用白色位图设置家庭壁纸：

```
 Bitmap bitmap = Bitmap.createBitmap(WIDTH, HEIGHT, Bitmap.Config.ARGB_8888);

    Canvas canvas = new Canvas(bitmap);
    canvas.drawColor(0xfff);

    WallpaperManager wall = WallpaperManager.getInstance(this);
    try {
        wall.setBitmap(bitmap);
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

壁纸变成黑色。这里有什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-10-18T16:48:10.843

只需添加`bitmap.eraseColor(Color.WHITE);` 为第二行

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T23:15:13.093

我的第一个猜测是你的颜色选择，假设这是你实际代码中的值并且没有被编辑。

Java 中的颜色整数采用 ARGB 形式，因此`Color.WHITE`is `0xFFFFFFFF`、`Color.BLUE`is`0xFF0000FF`等。

**您的**代码 ( )中的颜色`0xFFF`将扩展`0x00000FFF`为蓝色，其中混入了一点绿色，但**alpha**通道为零，因此`Canvas`基本上是用透明颜色编写的。

如果您使用标准颜色，我会在`Color`这里坚持使用类中的常量作为参数，但如果您想自己定义颜色，请记住放置全色或使用`Canvas.drawRGB()`。

# javascript - disqus 无法正常工作

> ID：13810565
> 
> 赞同：0
> 
> 时间：2012-12-10T22:42:16.243
> 
> 标签：javascript, disqus

我已正确完成所有步骤，但无法在我的网站上运行 disqus。

我的网站是[http://www.lookbookcookbook.com](http://www.lookbookcookbook.com)，我使用了以下代码：

```
<b:if cond='data:blog.pageType == &quot;item&quot;'>

    <b:includable id='main'>
        <script type='text/javascript'>
            var disqus_shortname = 'lookbookcookbook';
            var disqus_blogger_current_url = "<data:blog.canonicalUrl/>";
            if (!disqus_blogger_current_url.length) {
                disqus_blogger_current_url = "<data:blog.url/>";
            }
            var disqus_blogger_homepage_url = "<data:blog.homepageUrl/>";
            var disqus_blogger_canonical_homepage_url = "<data:blog.canonicalHomepageUrl/>";
        </script>
        <b:if cond='data:blog.pageType == "item"'>
            <style type='text/css'>
                #comments {display:none;}
            </style>
            <script type='text/javascript'>
                (function() {
                    var bloggerjs = document.createElement('script');
                    bloggerjs.type = 'text/javascript';
                    bloggerjs.async = true;
                    bloggerjs.src = 'http://'+disqus_shortname+'.disqus.com/blogger_item.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(bloggerjs);
                })();
            </script>
        </b:if>
            <style type='text/css'>
                .post-comment-link { visibility: hidden; }
            </style>
            <script type='text/javascript'>
            (function() {
                var bloggerjs = document.createElement('script');
                bloggerjs.type = 'text/javascript';
                bloggerjs.async = true;
                bloggerjs.src = 'http://'+disqus_shortname+'.disqus.com/blogger_index.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(bloggerjs);
            })();
            </script>
    </b:includable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:32:33.797

## 编辑

实际上，您似乎看到了此处描述的问题：[https ://productforums.google.com/d/msg/blogger/eBB8uKXs54w/Ljce-6Nh72cJ](https://productforums.google.com/d/msg/blogger/eBB8uKXs54w/Ljce-6Nh72cJ)

我们在此处编写了有关如何手动安装 Blogger 小工具的文档，这将帮助您修复它：[http ://help.disqus.com/customer/portal/articles/888340](http://help.disqus.com/customer/portal/articles/888340)

## 原始答案

这没有加载，因为标签的变量（例如 disqus_blogger_current_url）是按字面意思读取的，而不是填写正确的值。这意味着不是将您的博客 URL 发送到 Disqus，而是直接发送`<data:blog.canonicalUrl/>`

要解决这个问题，您需要确保输入解码的引号字符，所以整个事情看起来像这样：

```
<b:includable id='main'>
        <script type='text/javascript'>
            var disqus_shortname = &#39;lookbookcookbook&#39;;
            var disqus_blogger_current_url = &quot;<data:blog.canonicalUrl/>&quot;;
            if (!disqus_blogger_current_url.length) {
                disqus_blogger_current_url = &quot;<data:blog.url/>&quot;;
            }
            var disqus_blogger_homepage_url = &quot;<data:blog.homepageUrl/>&quot;;
            var disqus_blogger_canonical_homepage_url = &quot;<data:blog.canonicalHomepageUrl/>&quot;;
        </script>
        <b:if cond='data:blog.pageType == &quot;item&quot;'>                        
            <style type='text/css'>
                #comments {display:none;}
            </style>
            <script type='text/javascript'>
                (function() {
                    var bloggerjs = document.createElement(&#39;script&#39;);
                    bloggerjs.type = &#39;text/javascript&#39;;
                    bloggerjs.async = true;
                    bloggerjs.src = &#39;http://&#39;+disqus_shortname+&#39;.disqus.com/blogger_item.js&#39;;
                    (document.getElementsByTagName(&#39;head&#39;)[0] || document.getElementsByTagName(&#39;body&#39;)[0]).appendChild(bloggerjs);
                })();
            </script>
        </b:if>
            <style type='text/css'>
                .post-comment-link { visibility: hidden; }
            </style>
            <script type='text/javascript'>
            (function() {
                var bloggerjs = document.createElement(&#39;script&#39;);
                bloggerjs.type = &#39;text/javascript&#39;;
                bloggerjs.async = true;
                bloggerjs.src = &#39;http://&#39;+disqus_shortname+&#39;.disqus.com/blogger_index.js&#39;;
                (document.getElementsByTagName(&#39;head&#39;)[0] || document.getElementsByTagName(&#39;body&#39;)[0]).appendChild(bloggerjs);
            })();
            </script>
    </b:includable> 
```

# javascript - 将 JavaScript 提取到单独的文件中（来自 HTML）。需要重复调 用函数

> ID：13810578
> 
> 赞同：0
> 
> 时间：2012-12-10T22:42:52.173
> 
> 标签：javascript

请参阅[http://marakana.com/s/post/1096/samples/try6.htm](http://marakana.com/s/post/1096/samples/try6.htm)的来源 它定义了一个函数并在加载文档时调用它。（这是[本教程](http://marakana.com/s/post/1096/using_the_html5_attribute_contenteditable_to_create_a_wysiwyg)的最后一步）

我试图把它放到一个单独的 JS 文件中。仅当我在 JS 和 HTML 中调用 onload 时才能正确运行。但不仅是 body onload 还是仅来自 JS。我想我做错了什么。因此，以下作品：

```
<head>
<script src="Scripts/makeWYSIWYG.js" type="text/javascript"/>
<script type="text/javascript">
            window.onload = function () {
               makeWYSIWYG(document.getElementById('editor'));
            };
</script>
</head>
<body onload="makeWYSIWYG(document.getElementById('editor'));"> 
```

为什么我需要调用该函数两次？

我只有“Scripts/makeWYSIWYG.js”中的函数定义 function makeWYSIWYG(editor) { ... return editor; };

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:52:16.233

没有理由调用该函数两次。就够了。

使用第一个 window.onload 您可以更改以前的函数回调分配（即在导入的脚本中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:33:07.700

问题实际上是结束标记“/>”，这里：

```
<script src="Scripts/makeWYSIWYG.js" type="text/javascript"/> 
```

我应该写：

```
<script src="Scripts/makeWYSIWYG.js" type="text/javascript"> </script> 
```

我猜第二个脚本正在帮助关闭标签并使其运行......

更多信息在这里：[为什么不自动关闭脚本标签工作？](https://stackoverflow.com/questions/69913/why-dont-self-closing-script-tags-work)

# ruby-on-rails - Rails 3：Hotmail/Live Hosted Email 的 SMTP 设置

> ID：13810580
> 
> 赞同：7
> 
> 时间：2012-12-10T22:43:03.767
> 
> 标签：ruby-on-rails, actionmailer

我在正确设置我的网络应用程序以使用 Windows Live 托管电子邮件而不是普通的 Google Apps 电子邮件时遇到问题。这是因为谷歌正在降低此类服务的费用。

我输入了正确的 config.action_mailer.smtp_settings，但由于某种原因，我无法正确发送电子邮件通知。我在下面的配置，如果我将配置与另一封 Google Apps 配置设置电子邮件交换，它就可以正常工作。我错过了什么吗？

```
config.action_mailer.smtp_settings = {
:enable_starttls_auto => true,
:address              => "smtp.live.com",
:port                 => "587",
:domain               => "mail.live.com",
:user_name            => "###########.net",
:password             => "###########",
:authentication       => :plain
} 
```

这是我收到的错误。getaddrinfo：提供节点名或服务名，或未知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:06:23.793

这是我的配置：

```
config.action_mailer.smtp_settings = {
  :address              => "smtp.live.com",
  :port                 => 587,
  :domain               => 'example.com',
  :user_name            => 'XXXXXXXXX',
  :password             => 'XXXXXXXXX',
  :authentication       => 'plain',
  :enable_starttls_auto => true  } 
```

唯一的区别是身份验证。

还要记住这一行

```
config.action_mailer.default_url_options = { :host => 'localhost:3000' } 
```

# c - 运行时检查失败 #02

> ID：13810581
> 
> 赞同：0
> 
> 时间：2012-12-10T22:43:17.823
> 
> 标签：c

我正在使用 C 并且在运行程序时收到此错误。当我输入字符“e”关闭程序时出现错误。请帮我！！！谢谢。:)

```
int main () {
while (true){
    HANDLE consoleHandle = GetStdHandle(STD_OUTPUT_HANDLE);
char wanted;
int c;
printf("Enter What You Want...\n");
printf("f for flower\n");
printf("m for mushroom\n");
printf("b for box\n");
printf("h for mario\n");
printf("e to close\n");
scanf("%s", &wanted);
if (wanted=='f'){
/*some codes here*/
}
else if (wanted=='m'){
/*some codes here*/
     }
    else if (wanted=='b'){
/*some code here*/
    }
    else if (wanted=='h'){
/*some codes here*/
    }
    else if (wanted=='e'){
         printf("Bye.\n");
         break;
    }
        else {
            printf("It Was'n a Possible Input. Try Again...\n");
        }
    }
    return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:45:46.230

`scanf("%s", &wanted);`应该改为`scanf("%c", &wanted);`

格式字符串`%s`表示 to 的参数`scanf`将是一个 char 数组。你有一个字符，所以需要使用`%c`

# sql - 当用户登陆某个页面时，如何将布尔值更改为 true？

> ID：13810583
> 
> 赞同：0
> 
> 时间：2012-12-10T22:43:26.977
> 
> 标签：sql, ruby-on-rails, ruby, postgresql

我的数据库中有一个布尔字段，名为`premium`. 默认情况下它设置为 false，但是如果用户登陆某个页面，我希望它更改为 true。

我有 PHP 背景，我通常会做的是：

```
mysql_query("UPDATE users SET premium = true WHERE user_id = $user_id") 
```

我想做与此完全相同的事情，但是在 Rails 中。那么，我该怎么做呢？

我试过了：

```
execute "UPDATE TABLE `users` SET `premium` = true WHERE user_id = current_user.id" 
```

但是，那没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:45:11.530

在 Ruby on Rails 中，对于数据库调用，大多数时候您希望使用 ActiveRecord。

您可以像这样找到特定用户：

```
u1 = User.find(params[:id]) 
```

或者使用当前用户并像这样修改它：

```
current_user.premium = true
current_user.save! 
```

这还将为您提供各种有用的东西，例如确保查询不能被 SQL 注入。

[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:55:43.163

如果您尝试确定用户“在哪里”，正如您在问题中所述（“如果用户登陆某个页面”），则有一个助手：

```
<%- if request.path = "/your_special_path" %> 
```

# c# - azure 上的静态类和多个实例

> ID：13810590
> 
> 赞同：6
> 
> 时间：2012-12-10T22:44:15.213
> 
> 标签：c#, azure

我正在构建一个将部署在 Azure 上的应用程序。

如果我使用静态类，所有实例是否都可以访问相同的静态对象，或者每个实例在生成每个实例时都会实例化自己的静态对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T22:47:21.050

`static`每个 AppDomain 字段都有一个值。

他们强调不在计算机之间共享价值观。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T22:47:02.493

每个实例都将拥有自己的静态数据，因为它们彼此完全分离并独立运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T03:18:31.353

如果您的目标是在实例之间共享变量，我建议您查看 Windows Azure 缓存，您可以在其中使用角色实例的一部分或单独的角色进行缓存。然后，您角色的所有实例都可以使用此缓存中的对象。有关更多详细信息，请查看此博客文章：http: [//blogs.msdn.com/b/avkashchauhan/archive/2012/06/18/difference-between-windows-azure-cache-preview-and-windows-azure -share-cache.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/18/difference-between-windows-azure-cache-preview-and-windows-azure-share-cache.aspx)。

希望这可以帮助。

# c# - 在自定义 Web 部件中出现错误“GET 请求当前不允许更新”

> ID：13810592
> 
> 赞同：1
> 
> 时间：2012-12-10T22:44:22.593
> 
> 标签：c#, sharepoint, web-parts

我有一个已部署为场解决方案的自定义 SharePoint Web 部件，但在写入 SharePoint 列表时遇到问题。尽管将 AllowUnsafeUpdates 设置为 True（在许多不同的地方）并在调用 SPListItem 更新之前更新了 SPWeb 对象，但以下是我在以编程方式写入列表时遇到的错误消息：

**目前不允许对 GET 请求进行更新。要允许对 GET 进行更新，请在 SPWeb 上设置“AllowUnsafeUpdates”属性。**

我也尝试过使用 RunWithElevatedPrivileges，但没有运气。

这是我的代码供您参考：

```
 public void WriteError(string errorTask, string errorMessage)
        {
            string task = "Error Log Entry";
            string fileName = "";
            string fileTitle = "";
            string fileType = "";

                using (SPSite oSiteCollection = new SPSite(SPContext.Current.Web.Url))
                {
                    using (SPWeb oWebsite = oSiteCollection.RootWeb)
                    {
                        oSiteCollection.AllowUnsafeUpdates = true;
                        oWebsite.AllowUnsafeUpdates = true;
                        oWebsite.Update();

                        SPSite errorLogSite = new SPSite(oWebsite.ServerRelativeUrl);
                        SPListItemCollection oList = errorLogSite.RootWeb.Lists["ErrorLog"].Items;

                        SPListItem oItem = oList.Add();
                        oItem["ErrorTask"] = task + ": " + errorTask;
                        oItem["ErrorMessage"] = errorMessage;
                        oItem["UserName"] = String.IsNullOrEmpty(UserName) ? "Not Available" : UserName;
                        oItem["FileName"] = String.IsNullOrEmpty(fileName) ? "Not Available" : fileName;
                        oItem["Title"] = String.IsNullOrEmpty(fileTitle) ? "Not Available" : fileTitle;
                        oItem["FileType"] = String.IsNullOrEmpty(fileType) ? "Not Available" : fileType;

                        oItem.Update();
                    }
                }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:18:10.150

您似乎没有完全理解 SPWeb 的 AllowUnsafeUpdates 属性的目标。您应该在用于检索 SPList 实例的 SPWeb 实例上将其设置为 true。此外，没有理由创建如此多的 SPSite 和 SPWeb 实例，因为它可能会降低性能。对于您的情况，请尝试下一个代码

```
public void WriteError(string errorTask, string errorMessage)
        {
            string task = "Error Log Entry";
            string fileName = "";
            string fileTitle = "";
            string fileType = "";

            var errorLogWeb = SPContext.Current.Site.RootWeb;
            errorLogWeb.AllowUnsafeUpdates = true;
            var errorLogList = errorLogWeb.Lists["ErrorLog"];
            SPListItem oItem = errorLogList.Items.Add();
            oItem["ErrorTask"] = task + ": " + errorTask;
            oItem["ErrorMessage"] = errorMessage;
            oItem["UserName"] = String.IsNullOrEmpty(UserName) ? "Not Available" : UserName;
            oItem["FileName"] = String.IsNullOrEmpty(fileName) ? "Not Available" : fileName;
            oItem["Title"] = String.IsNullOrEmpty(fileTitle) ? "Not Available" : fileTitle;
            oItem["FileType"] = String.IsNullOrEmpty(fileType) ? "Not Available" : fileType;

            oItem.Update();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:23:26.863

你做的朋友

```
 oSiteCollection.AllowUnsafeUpdates = true;
 oWebsite.AllowUnsafeUpdates = true; 
```

但你从未将它们设置为，

```
 oSiteCollection.AllowUnsafeUpdates = false;
  oWebsite.AllowUnsafeUpdates = false; 
```

还有另一件事是你不应该做的`oSiteCollection.AllowUnsafeUpdates = false;`。

试试这个代码，

```
 public void WriteError(string errorTask, string errorMessage)
            {
                string task = "Error Log Entry";
                string fileName = "";
                string fileTitle = "";
                string fileType = "";

                    using (SPSite oSiteCollection = new SPSite(SPContext.Current.Web.Url))
                    {
                        using (SPWeb oWebsite = oSiteCollection.RootWeb)
                        {                           
                            oWebsite.AllowUnsafeUpdates = true;               

                            SPSite errorLogSite = new SPSite(oWebsite.ServerRelativeUrl);
                            SPListItemCollection oList = errorLogSite.RootWeb.Lists["ErrorLog"].Items;

                            SPListItem oItem = oList.Add();
                            oItem["ErrorTask"] = task + ": " + errorTask;
                            oItem["ErrorMessage"] = errorMessage;
                            oItem["UserName"] = String.IsNullOrEmpty(UserName) ? "Not Available" : UserName;
                            oItem["FileName"] = String.IsNullOrEmpty(fileName) ? "Not Available" : fileName;
                            oItem["Title"] = String.IsNullOrEmpty(fileTitle) ? "Not Available" : fileTitle;
                            oItem["FileType"] = String.IsNullOrEmpty(fileType) ? "Not Available" : fileType;

                            oItem.Update();
                            oWebsite.Update();
                            oWebsite.AllowUnsafeUpdates = false;
                        }
                    }

            } 
```

# c++ - 我在 C++ 程序中遇到堆栈溢出异常

> ID：13810593
> 
> 赞同：-4
> 
> 时间：2012-12-10T22:44:24.567
> 
> 标签：c++, visual-studio, visual-c++, stack-overflow

我得到一个 system.stackoverflow 异常。

我认为它发生在`insert()`函数内部的某个地方。

```
void insert(char* word){
    int r1 = rand()%x;         // Here is where I suspect the problem starts
    int c1 = rand()%x;
    if(gameBoard[r1][c1]=="") {
        gameBoard[r1][c1] = word;
        insertWordCopy(word);
    } else 
        insert(word);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T22:47:51.740

以下是不正确的，因为它比较了指针：

```
if(gameBoard[r2][c2]=="") { 
```

结果，代码几乎肯定总是沿着`else`分支向下，导致无限递归。

# .net - 在 Windows 计算机上解析云开发 - 需要 .NET？

> ID：13810602
> 
> 赞同：0
> 
> 时间：2012-12-10T22:44:58.820
> 
> 标签：.net, parsing, mobile

我正在做一些解析开发工作，我想尝试解析提供的云计算东西。

（顺便说一句，我对此的理解是它的代码将在移动应用程序调用解析数据库之前/之后运行，riiiiigh？）

我在 Windows 上工作，我按照他们的指示获取解析客户端进行开发工作，然后我得到了这个：

![在此处输入图像描述](../Images/9e7490c838fa9fe4b8d5fb5759e9b239.png)

我真的不知道该怎么做。我是一个 java 人，所以 .NET 对我来说毫无意义。我需要，嗯，获得.NET？这是否意味着视觉基本的东西或其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:53:09.970

您需要安装[.NET Framework 4.5 版](http://www.microsoft.com/en-us/download/details.aspx?id=30653)才能使用此应用程序。

# r - 在 R 包“分段”中，如何将模型中一条线的斜率设置为 0？

> ID：13810607
> 
> 赞同：5
> 
> 时间：2012-12-10T22:45:11.580
> 
> 标签：r, plot, linear-regression

我正在使用 R 包`segmented`来计算模型的参数，其中响应变量与解释变量线性相关，直到一个断点，然后响应变量变得独立于解释变量。换句话说，第二部分的斜率 = 0 的分段线性模型。我已经做的是：

```
linear1 <- lm(Y ~ X)
linear2  <- segmented (linear1, seg.Z = ~ X, psi = 2) 
```

这给出了一个具有非常好的第一行的模型，但第二行不是水平的（但不重要）。我想让第二行水平。（psi = 2 是我观察到断点的地方。）

此外，当我使用“abline”在绘图上显示虚线时，它只显示模型的第一部分，并给出警告：“仅使用 4 个回归系数中的前两个”。我怎样才能显示模型的两个部分？

要将我的数据输入到 R 中：

```
X <- c(0.2, 0.4, 0.6, 0.8, 1.0, 1.2, 1.4, 1.6, 1.8, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0)
Y <- c(1.31, 1.60, 1.86, 2.16, 2.44, 2.71, 3.00, 3.24, 3.57, 3.81, 3.80, 3.83, 3.78, 3.94, 3.75, 3.89) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:04:31.623

这就像使用包提供的类对象的`plot`方法一样简单`segmented`，在帮助中分段和链接`segmented`

假设您的数据在`data.frame` `d`

```
linear2  <- segmented (linear1, seg.Z = ~ X, psi = 2, data = d)
plot(linear2)
points(Y~X, data = d) 
```

![在此处输入图像描述](../Images/d76a9ad128287fca3920b0ffb6878c46.png)

一种伪造水平线的简单方法是将系数替换为该线水平所需的值

```
fudgedmodel <- linear2
fudgedmodel$coefficients[3] <- - fudgedmodel$coefficients[2]
plot(fudgedmodel)
points(Y~X, data = d) 
```

![在此处输入图像描述](../Images/cc580eeb409944364bccad19780d242d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T01:56:20.127

在 R 帮助邮件列表中搜索相同的内容并在这篇文章中找到了一个简洁的答案：

[https://stat.ethz.ch/pipermail/r-help/2007-July/137625.html](https://stat.ethz.ch/pipermail/r-help/2007-July/137625.html)

这是该答案的编辑版本，可直接解决问题：

```
library(segmented)

# simulate data - linear slope down until some point, at which slope=0
n<-50
x<-1:n/n
y<- 0-pmin(x-.5,0)+rnorm(50)*.03
plot(x,y) #This should be your scatterplot..
abline(0,0,lty=2)

# a parsimonious modelling: constrain right slope=0
# NB. This is probably what you want...
o<-lm(y~1)
xx<- -x
o2<-segmented(o,seg.Z=~xx,psi=list(xx=-.3))
slope(o2)
points(x,fitted(o2),col=2)

# now constrain \hat{\mu}(x)=0 for x>psi (you can do this if you know what the value of y is when x becomes independent)
o<-lm(y~0)
xx<- -x
o3<-segmented(o,seg.Z=~xx,psi=list(xx=-.3))
slope(o3)
points(x,fitted(o3),col=3) 
```

你应该得到这样的东西。红点是第一种方法，听起来很适合你。绿点是第二种方法，仅当您已经知道 x 变得独立时的 y 值时才适用：

![在此处输入图像描述](../Images/ee36192c6d7760681128c958c0672f5d.png)

# java - 保存到数据库时浪费时间

> ID：13810610
> 
> 赞同：4
> 
> 时间：2012-12-10T22:45:21.937
> 
> 标签：java, sql, hibernate

我在 Web 服务器上使用 Java 和休眠来保存到 Oracle SQL 数据库。我创建了一个 Java`Date`对象，但由于某种原因，当它进入数据库时​​，它只有日期而不是时间。例如，日期对象会说“2012 年 12 月 10 日下午 1:23:45”，但在数据库中它只说“10-DEC-12”

知道为什么会发生这种情况吗？下面是如何创建和保存日期的示例。

服务.java

```
Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();

Nos nos = new Nos();
nos.setTimeReceived( new Date() );
session.save( nos );

tx.commit(); 
```

没有.java

```
@Entity
@Table(name = "nos")
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class Nos
{
    @Id
    @GeneratedValue
    private Long id;

    @Basic(optional=false)
    @Temporal(TemporalType.DATE)
    @Column(name="timereceived")
    private java.util.Date timeReceived;

// getters and setters 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T22:48:29.380

使用`TemporalType.TIMESTAMP`，它对应于[`java.sql.Timestamp`](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html)。

根据[JavaDocs](http://docs.oracle.com/javaee/6/api/javax/persistence/TemporalType.html)，映射到 a [，`TemporalType`](http://docs.oracle.com/javaee/6/api/javax/persistence/TemporalType.html)正如您所看到的那样，它没有时间组件：`TemporalType.DATE`[`java.sql.Date`](http://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)

> 为了符合 SQL 的定义，`DATE`由实例包装的毫秒值`java.sql.Date`必须通过在与实例关联的特定时区中将小时、分钟、秒和毫秒设置为零来“规范化”。

# python - 如何在没有静态装饰器的情况下使用 python 将方法动态导出到 dbus？

> ID：13810613
> 
> 赞同：0
> 
> 时间：2012-12-10T22:45:27.707
> 
> 标签：python, linux, dbus

我在几个地方搜索了这个问题的答案，但我找不到一致的解决方案，而且有些太旧且不清楚。

我有一个类，其中 dbus 的接口路径是在运行时生成的，所以我需要使用正确的接口导出方法，例如：

我的服务的一个实例使用 interface 启动 dbus，服务启动 dbus`br.example.MyInterface.Number1`的第二个实例使用`br.example.MyInterface.Number2`，因此每种方法的装饰器将是：

`br.example.MyInterface.Number1`; 和 `br.example.MyInterface.Number2`

不能使用静态装饰器来完成这项工作`@dbus.service.method('com.example.MyInterface.Number1')`，因为它们是不同的。

如何在运行时使用 python 将方法导出到 dbus？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:51:31.413

```
@dbus.service.method('com.example.MyInterface.Number%d' % (instancenum,)) 
```

# sql-server - 使用参差不齐的右行批量插入固定长度文件

> ID：13810616
> 
> 赞同：0
> 
> 时间：2012-12-10T22:45:40.193
> 
> 标签：sql-server, bulkinsert

我有一个固定长度的文本文件，除了一些行提前结束，带有回车/换行符。我正在使用 .fmt 文件。

问：我如何告诉 SQL Server 对下落不明的字段使用空字符串？

我可能应该要求我的客户填充他的文本文件，但是使用提前终止的行来处理它会更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:02:53.757

在进行批量插入之前，您应该编写一个预处理器来调节文本文件。

# c# - mvc4 表单提交反序列化对子项目不起作用（或根本不起作用）

> ID：13810627
> 
> 赞同：0
> 
> 时间：2012-12-10T22:45:58.120
> 
> 标签：c#, jquery, ajax, asp.net-mvc-4, deserialization

看法：

```
@model My.Data.Section

@using (Html.BeginForm("Save", "Sections"))
{
    @Html.Partial("_Fields", Model.Fields);

    <input type="submit" value="Save">
} 
```

查看JS：

```
@Scripts.Render("~/bundles/jqueryval")
<script type="text/javascript">
    $(function () {
        $('form').submit(function () {
            if ($(this).valid()) {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {
                        // do some stuff with the returned partial
                    }
                });
            }
            return false;
        });
    });
</script> 
```

模型：

来自我的数据层（EF5/DBContext/unitofwork）

```
namespace My.Data
{
    using System;
    using System.Collections.Generic;

    public partial class Section
    {
        public Section()
        {
            this.Fields = new HashSet<Field>();
        }

        public int SectionID { get; set; }
        public int FormID { get; set; }
        public string Name { get; set; }
        public Nullable<int> PrevSection { get; set; }
        public Nullable<int> NextSection { get; set; }
        public int SortOrder { get; set; }

        public virtual ICollection<Field> Fields { get; set; }
        public virtual Form Form { get; set; }
    }
} 
```

控制器：

```
[HttpPost]
public ActionResult Save(Section model, FormCollection fc)
{
    // do some fun stuff
    return PartialView("_Section", model);
} 
```

当我调试控制器时，模型对象没有反序列化，我认为这是因为我没有使用 labelfor & textboxfor ect ？

当我检查 FormCollection 对象时，它具有我需要的所有键和所有值，但是，我想从我的字段中获取一些其他值，例如 data-fieldid-itemid="1"，我将如何完成这个? 最好的方法是什么？

我需要使用 LabelFor/TextboxFor 吗？

我想我期待的是模型对象通过填充数据，以及我的模型对象的子项，特别是 public virtual ICollection Fields { get; 放; } 也要填写。

我觉得我在这里遗漏了一些概念，有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:51:16.207

首先，您不应该对表单使用局部视图。相反，您应该使用 EditorTemplates。

其次，您无法获取属性，因为浏览器不会将这些属性发布到服务器。MVC 受制于浏览器支持的机制。

您的选择是，使用提交处理程序用您的属性填充隐藏字段，将数据放在隐藏字段中，做一个 ajax 帖子，在其中设置您要发布的所有数据，或者只是让您的控制器“记住" 它在 GET 中设置的属性。

# javascript - 使用流星.js 分发可可应用程序

> ID：13810631
> 
> 赞同：2
> 
> 时间：2012-12-10T22:46:06.477
> 
> 标签：javascript, xcode, cocoa, node.js, meteor

有谁知道是否可以（如果可以，如何）使用meteor.js 分发可可应用程序并通过webview 呈现它？

我的意思是我想在我的可可应用程序中启动一个流星服务器（或 node.js），然后使用可可 webView 显示流星服务器正在生成的内容。

所以问题是如何让流星/节点与可可应用程序一起分发，这样用户就不必手动安装它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:03:33.220

很有野心，但你可以试试

*   [https://github.com/rogerwang/node-webkit](https://github.com/rogerwang/node-webkit)
*   [http://jsapp.us/](http://jsapp.us/)
*   [http://browserver.org/](http://browserver.org/)
*   [https://github.com/rogerwang/node-webkit](https://github.com/rogerwang/node-webkit)
*   [http://iceddev.github.com/blog/2012/11/05/node-js-in-chrome/](http://iceddev.github.com/blog/2012/11/05/node-js-in-chrome/)

查看[是否 Node.js 在 Chrome 中运行客户端及其本机客户端（即将发布）](https://stackoverflow.com/questions/5081191/could-node-js-run-client-side-in-chrome-with-its-native-client-to-be-released-s)以获得一些评论。Meteor 建立在节点之上。Mongo 我认为这将是症结所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:22:22.513

您可以在应用程序包中嵌入服务器的压缩存档（使用 Xcode 的复制文件构建阶段），并且在应用程序启动期间，可能使用 NSBundle/NSFileManager/NSTask api 的组合来取消存档/安装/启动它。然后，您的应用可以使用类似 http:127.0.0.1:YOUR_PORT/YOUR_APP_DIR 的方式在 Web 视图中查看提供的页面。

我假设您没有为您的用户提供安装程序 (.pkg)，因为在这种情况下，您的安装程序脚本将负责安装部分。

# javascript - jquery不透明度不适用于safari浏览器

> ID：13810635
> 
> 赞同：0
> 
> 时间：2012-12-10T22:46:34.870
> 
> 标签：javascript, jquery, safari, jquery-animate

下面的代码行`$('#iframe-youtube').css("opacity", "0");`适用于除 Safari 之外的所有浏览器。其余代码适用于每个浏览器，包括 Safari。顺便说一句，我也尝试过`$('#iframe-youtube').animate({opacity: '0'},0)`，但也没有用。

```
$('#bg').fadeOut(500);
$('#hand-iphone').animate({opacity: '0', bottom: '-5px'},0);
$('#hand2-iphone').animate({opacity: '0'},0);
$('#iframe-youtube').css("opacity", "0");
$('#hand-iphone2').show().animate({opacity: '0', bottom: '-5px' , left: '95px'},0);
$('#hand2-iphone2').show().animate({opacity: '0'},0);
$('.roundabout-holder').show().animate({opacity: '0'},0);
$('#boni-text').show().animate({opacity: '0'},0);           
$('#hand-iphone2').delay(200).animate({opacity: '1', bottom: '0px', left:'50px'},500);                  
$('#hand2-iphone2').delay(2000).animate({opacity: '1'},0);
$('.roundabout-holder').animate({opacity: '1'},500);
$('#boni-text').animate({opacity: '1'},500); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:11:04.523

添加`?wmode=opaque`到 iframe 中 youtube 链接的末尾。

例子：

**HTML**

```
<div id="iframe-youtube">
    <iframe width="420" height="315" src="http://www.youtube.com/embed/bZqnqH9s1jk?wmode=opaque" frameborder="0"></iframe>
</div>​ 
```

**Javascript**

```
$('#iframe-youtube').css("opacity", 0);​ 
```

**[演示](http://jsfiddle.net/gpGMZ/2/)**

**轻读**

*   [在 youtube iframe 上覆盖不透明的 div](https://stackoverflow.com/questions/3820325/overlay-opaque-div-over-youtube-iframe)
*   [iframe 中的 Youtube 视频未隐藏在 Safari 5.1 中](https://stackoverflow.com/questions/10700577/youtube-video-inside-iframe-not-hiding-in-safari-5-1)

# ruby-on-rails-3 - 禁用 Heroku 上的默认 Piggyback SSL？

> ID：13810636
> 
> 赞同：2
> 
> 时间：2012-12-10T22:46:43.713
> 
> 标签：ruby-on-rails-3, ssl, heroku

我有两个域名指向一个 Heroku 应用程序。一个域名总是通过 https 使用。我有该域的通配符证书。再加上我只能在 Heroku 应用程序上安装 1 个 SSL 证书，这让我不得不将另一个域名强制为 http。我已经安装了 SslEnforcer gem 来帮我解决这个问题。但是，由于 Heroku 现在在我的应用程序上为我提供了默认 Piggyback SSL，所以当我尝试通过 https 访问我的非安全域时，它首先会遇到 Piggyback SSL 证书，这会产生安全错误，因为我不在 *. herokuapp.com 域。它从未到达 SslEnforcer 重定向。

所以看来我迫切需要禁用或删除默认的 Piggyback SSL。有没有办法这样做？或者还有其他人能想到的解决方案吗？

# javascript - 无法设置 LineString 的样式

> ID：13810637
> 
> 赞同：0
> 
> 时间：2012-12-10T22:46:51.207
> 
> 标签：javascript, maps, gis, openlayers

我正在尝试设置 LineString 的样式，但它似乎不起作用。这是我的代码：

```
function connectStationFeatures(feat1, feat2){
    var lineLayer = getLinesLayer();
    var point1 = feat1.geometry;
    var point2 = feat2.geometry;
    var style = new OpenLayers.StyleMap({
        'fillColor':"#FF8C00",
        'strokeWidth':10,
        'strokeDashstyle':"dashdot"
    });
    var line = new OpenLayers.Geometry.LineString([point1, point2]);

    lineLayer.addFeatures([new OpenLayers.Feature.Vector(line, {styleMap:style})]);
} 
```

或者我试过：

```
function connectStationFeatures(feat1, feat2){
    var lineLayer = getLinesLayer();
    var point1 = feat1.geometry;
    var point2 = feat2.geometry;
    var style = new OpenLayers.StyleMap({
        'fillColor':"#FF8C00",
        'strokeWidth':10,
        'strokeDashstyle':"dashdot"
    });
    var line = new OpenLayers.Geometry.LineString([point1, point2]);
    var lineFeat = new OpenLayers.Feature.Vector(line);
    lineFeat.styleMap = style;
    lineLayer.addFeatures([lineFeat]);
 } 
```

非常感谢任何帮助！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:51:33.550

您必须将 StyleMap 添加到图层，而不是功能

```
vectorLayer = new OpenLayers.Layer.Vector('Foo', {styleMap: style}); 
```

[http://jsfiddle.net/HqQ6V/](http://jsfiddle.net/HqQ6V/)

有几种不同的方式来定义样式 - 使用 hash、Style 或 StyleMap 对象；您可以将它们附加到要素或图层。这是很好的解释：[http ://docs.openlayers.org/library/feature_styling.html](http://docs.openlayers.org/library/feature_styling.html)

# c++ - C++ 危险的铸造代码

> ID：13810638
> 
> 赞同：0
> 
> 时间：2012-12-10T22:46:53.797
> 
> 标签：c++, inheritance, polymorphism, dynamic-cast, static-cast

我很确定这是危险的代码。但是，我想检查一下是否有人知道究竟会出现什么问题*。*

假设我有这个类结构：

```
class A {
protected:
  int a;
public:
  A() { a = 0; }        
  int getA() { return a; }
  void setA(int v) { a = v; }
};

class B: public A {
protected:
  int b;
public:
  B() { b = 0; }
}; 
```

然后假设我想要一种自动扩展类的方法，如下所示：

```
class Base {
public:
   virtual ~Base() {}
};

template <typename T>
class Test: public T, public Base {}; 
```

我可以做出的一个**非常**重要的保证是，既没有`Base`也不`Test`会有任何其他成员变量或方法。它们本质上是空类。

（潜在的）危险代码如下：

```
int main() {
  B *b = new B();

  // dangerous part?
  // forcing Test<B> to point to to an address of type B
  Test<B> *test = static_cast<Test<B> *>(b);

  //
  A *a = dynamic_cast<A *>(test);
  a->setA(10);
  std::cout << "result: " << a->getA() << std::endl;
} 
```

做这样的事情的基本原理是我正在使用一个类似于 Test 的类，但是为了让它当前工作，必须创建一个新的实例 T（即 Test），同时复制传递的实例。如果我可以将 Test 指向 T 的内存地址，那就太好了。

如果 Base 没有添加虚拟析构函数，并且由于 Test 没有添加任何内容，我认为这段代码实际上是可以的。但是，添加虚拟析构函数让我担心类型信息可能会添加到类中。如果是这种情况，那么它可能会导致内存访问冲突。

最后，我可以说这段代码在我的计算机/编译器（clang）上运行良好，尽管这当然不能保证它不会对内存造成坏事和/或不会在另一个编译器/机器上完全失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T23:23:47.350

`Base::~Base`删除指针时将调用虚拟析构函数。由于`B`没有正确的 vtable（此处发布的代码中根本没有），因此不会很好地结束。

它仅在这种情况下有效，因为您有内存泄漏，您永远不会删除`test`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:26:50.917

您的代码会产生未定义的行为，因为它违反了严格的别名。即使没有，您也在调用 UB，因为 B 和 A 都不是多态类，并且指向的对象不是多态类，因此`dynamic_cast`无法成功。您正在尝试访问不存在的 Base 对象以确定使用时的运行时类型`dynamic_cast`。

> 我可以做出的一个非常重要的保证是 Base 和 Test 都不会有任何其他成员变量或方法。它们本质上是空类。

这一点都不重要——完全无关紧要。该标准必须强制 EBO 才能使这一点开始变得重要，但事实并非如此。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T23:07:15.053

只要您不执行任何操作`Test<B>*`并避免任何魔术，例如智能指针或自动内存管理，就可以了。

您应该确保查找将检查对象的模糊代码，例如调试打印或日志记录。我让调试器崩溃，因为我试图查看像这样设置的指针的值。我敢打赌这会给你带来一些痛苦，但你应该能够让它发挥作用。

我认为真正的问题是维护。一些开发人员需要多长时间才能进行操作`Test<B>*`？

# ruby - Ruby 辛纳屈之谜

> ID：13810641
> 
> 赞同：0
> 
> 时间：2012-12-10T22:47:08.940
> 
> 标签：ruby, sinatra

我有以下 Sinatra 代码：

```
post '/bucket' do
  # determine if this call is coming from filling out web form
  is_html = request.content_type.to_s.downcase.eql?('application/x-www-form-urlencoded')

  # If this is a curl call, then get the params differently
  unless is_html
      params = JSON.parse(request.env["rack.input"].read)
  end

  p params[:name]
end 
```

如果我使用 Curl 调用它，`params`它有值，但是当它通过 Web 表单调用时，它`params`是`nil`并且`params[:name]`什么都没有。我花了几个小时弄清楚为什么会发生这种情况并寻求其他人的帮助，但没有人能真正找出发生了什么。

需要注意的一件事是，如果我注释掉这一行：

```
params = JSON.parse(request.env["rack.input"].read) 
```

然后`params`具有“网络表单”发布的正确值。

`params`实际上，如果此代码被 CURL 调用调用，目标是获取值，所以我使用了：

```
params = JSON.parse(request.env["rack.input"].read) 
```

但它搞砸了网络表单的发布。谁能解开这个谜？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:07:27.817

就个人而言，我会通过在表单中​​设置隐藏值来做不同的事情，例如：

```
<input type="hidden" name="webform" value="true"> 
```

然后像这样使用它：

```
if (params['webform'])
  # this is a request from the form
else
  # this is a request from Curl
end 
```

如果您看到它，您就知道该请求来自您的网络表单。如果`params['webform']`不存在，它不是来自 Curl。

我将它保存到一个文件并用 Ruby 运行它：

```
require 'sinatra'

get '/bucket' do
  params[:name]
end 
```

`http://localhost:4567/bucket?name=foo`使用显示调用正在运行的脚本：

```
foo 
```

在浏览器中。

如果我像这样修改源：

```
require 'sinatra'

post '/bucket' do
  params[:name]
end 
```

重新启动它并加载一个简单的 HTML 文件：

```
<html>
  <body>
    <form name="form" method="post" action="http://localhost:4567/bucket">
      <input type="hidden" name="webform" value="true"></input>
      <input type="input" name="name"></input>
      <input type="submit"></input>
    </form>
  </body>
</html> 
```

并输入`foobar`并提交，我看到：

```
foobar 
```

在浏览器窗口中。

如果我将脚本更改为：

```
require 'sinatra'

post '/bucket' do
  if (params[:webform])
    'webform is set'
  else
    'webform is not set'
  end
end 
```

并重新启动 Sinatra 并重新提交表单，我看到：

```
webform is set 
```

如果我使用 Curl 调用它：

```
curl --data "name=foo" http://127.0.0.1:4567/bucket 
```

我在命令行上将其视为 Curl 的响应：

```
webform is not set 
```

如果我将脚本更改为：

```
require 'sinatra'

post '/bucket' do
  if (params[:webform])
    'webform is set'
  else
    params[:name]
  end
end 
```

重新启动脚本，然后再次使用 Curl 命令调用它，我看到：

```
foo 
```

在命令行上。

# json - 将 Wordpress 的 JSON API 与 W3 总缓存一起使用

> ID：13810645
> 
> 赞同：2
> 
> 时间：2012-12-10T22:47:26.400
> 
> 标签：json, string, wordpress

使用出色的 Wordpress 插件 JSON API，我创建了一个应用程序，该应用程序通过访问以下几行的 URL 来检索新数据，执行 Unix curl 转储。

[http://www.website.net/?json=get_recent_posts&post_type=tree&count=200](http://www.website.net/?json=get_recent_posts&post_type=tree&count=200)

问题是这样的：因为站点使用 W3 Total Cache 提供缓存版本，所以卷曲的东西是不一致的。有时我会得到我需要的 JSON。其他时候我只是得到一个显示“website.net”首页的缓存，没有查询字符串的影响。

我希望做以下两件事之一：

1) 为我的请求找到绕过 w3 Total Cache 的方法。但是怎么做？我可以在查询字符串中放入一些东西来告诉 Wordpress 给我一个新的页面读取而不是缓存吗？

如果这行不通，

2）通过PHP而不是通过RESTful Web请求获取插件数据。但我只知道如何将 JSON API 用于 Web URL 调用，而不知道如何在内部使用 JSON 数据。

非常感谢任何帮助。我还认为 W3TC 缓存查询字符串结果的功能可能会起作用，但我想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T08:29:58.033

如果您在 w3tc 设置中使用使用磁盘增强的页面缓存，则不会缓存带有查询字符串的 URL。我认为这可以解决您的问题。

# macos - 在 Mac OS X 窗口中显示自定义视频（RGB 位图数据）

> ID：13810650
> 
> 赞同：4
> 
> 时间：2012-12-10T22:47:41.237
> 
> 标签：macos, cocoa, bitmap, window, rgb

我正在寻找快速重复地将 RGB 位图数据“blit”到 Mac OS X 窗口中的特定区域的最佳方法，以便实时显示来自自定义视频引擎的视频帧。数据位于包含 32-BPP 位图的简单 C 样式数组中。

在 Win32 上，我会设置 HWND 和 HDC，将原始数据复制到其内存空间，然后使用 BitBlt()。在 iOS 上，我通过 UIImageView 完成了它，尽管我没有完全评估这种方法的性能（在那种特殊的有限情况下真的不需要）。我在带有 Cocoa 的 Mac OS X 上都无法使用，我该怎么办？

我知道我有几种糟糕或复杂的方法来实现这一点，但我希望有经验的人可以指出一些实际上是用于这种用途的东西和/或性能高效的东西，同时相当简单和可靠。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:44:47.543

我建议使用您的数据创建[`NSImage`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSImage_Class/Reference/Reference.html)s 或[`CGImage`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGImage/Reference/reference.html)s ，然后将它们绘制到当前上下文中。

如果使用`NSImage`，则需要使用`NSBitmapImageRep`图像数据创建一个。您不需要复制数据，只需将指向它的指针作为参数之一传递给初始化程序。

如果你使用`CGImage`，你可以创建一个[`CGBitmapContextRef`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGBitmapContext/Reference/reference.html)using `CGBitmapContextCreate()`，和上面一样，只需传递一个指向现有图像数据的指针。然后你可以`CGImage`通过调用从它创建一个`CGBitmapContextCreateImage()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:25:12.710

这成功了……（32-BPP RGBA 位图数据）

```
int RowBytes = Width * 4;

NSBitmapImageRep * ImageRep = [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:&Data pixelsWide:Width pixelsHigh:Height bitsPerSample:8 samplesPerPixel:4 hasAlpha:YES isPlanar:NO colorSpaceName:NSCalibratedRGBColorSpace bytesPerRow:RowBytes bitsPerPixel:32];

NSImage * Image = [[NSImage alloc] init];
[Image addRepresentation:ImageRep];

[ImageView setImage:Image]; 
```

与 Windows 位图相比，红色和蓝色通道是交换的（RGBA 与 BGRA），当然 Y 行的顺序是相反的（即倒置），但这一切都很容易通过操纵源数据来适应。

# jquery - HTML 5 上传文件无法保存

> ID：13810654
> 
> 赞同：0
> 
> 时间：2012-12-10T22:47:53.563
> 
> 标签：jquery, html, upload

我正在尝试通过 FormData 和 XMLHttpRequest 上传文件，文件无法保存到我不知道我错在哪里的文件夹中。最后，我希望可以发送此消息，因为我明白了：您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

上传.php

```
<?
$target_path = "uploads/";
$target_path = $target_path . basename( $_FILES['filetext']['name']);
$exten = basename( $_FILES['filetext']['name']);
$exten = substr($exten, -4);
if($exten == ".png" || $exten == ".jpg" || $exten == ".bmp" || $exten == ".gif")
{
 if(move_uploaded_file($_FILES['filetext']['tmp_name'], $target_path))
 {
  echo $_FILES['filetext']['name']."\n". $test;
 }
 else
 {
  echo 0;
 }
}
else
{
 echo 0;
}?> 
```

上传.js

```
$(document).ready(function(){
 function defaults(e){
   e.stopPropagation();  
   e.preventDefault();  
 }
 $(":file").live("change", function(){
    handleFiles(this.files);
});
 function handleFiles(files,e){
    // Traverse throught all files and check if uploaded file type is image 
    var imageType = /image.*/;  
    var file = files[0];
    // check file type
    if (!file.type.match(imageType)) {  
      alert("File \""+file.name+"\" is not a valid image file, Are you trying to screw me :( :( ");
      return false; 
    } 
    // check file size
    if (parseInt(file.size / 1024) > 2050) {  
      alert("File \""+file.name+"\" is too big. I am using shared server :P");
      return false; 
    } 

    var info = '<div class="preview active-win"><div class="preview-image"><img ></div><div class="progress-holder"><span id="progress"></span></div><span class="percents"></span><div style="float:left;">Uploaded <span class="up-done"></span> KB of '+parseInt(file.size / 1024)+' KB</div>';

    $(".upload-progress").show("fast",function(){
        $(".upload-progress").html(info); 
        uploadFile(file);
    });
    }
      function uploadFile(file){
      var fd = new FormData();
      fd.append('filez', file);
      var xhr = new XMLHttpRequest(); 
xhr.upload.addEventListener("progress", uploadProgress, false);
    xhr.addEventListener("load", uploadComplete, false);
    xhr.addEventListener("error", uploadFailed, false);
    xhr.addEventListener("abort", uploadCanceled, false);
    xhr.open("POST", "upload.php", true);
    xhr.send(fd);

    function uploadProgress(event) {
if (event.lengthComputable) {
        $("#progress").css("width",(event.loaded / event.total) * 100 + "%");
        $(".percents").html(" "+((event.loaded / event.total) * 100).toFixed() + "%");
        $(".up-done").html((parseInt(event.loaded / 1024)).toFixed(0));
    } else {
        alert("Failed to compute file upload length");
    }
           }
     function uploadComplete(event) {
$("#progress").css("width","100%");
    $(".percents").html("100%");
    $(".up-done").html((parseInt(file.size / 1024)).toFixed(0));
     }
     function uploadFailed(event) {
     alert("There was an error attempting to upload the file.");
     }
     function uploadCanceled(event) {
       alert("The upload has been canceled by the user or the browser dropped the   connection.");
      }
       }

      }); 
```

HTML

```
<form action="" method="post" enctype="multipart/form-data">
<input type="file" id="file" name="filez" accept="image/*"> 
<div class="upload-progress"></div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:04:10.953

你的代码有点乱。

由于您使用的是 jQuery，请查看本文末尾：[https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)

干杯。

# scala - 发生错误时停止 VFP 显示对话框

> ID：13810660
> 
> 赞同：0
> 
> 时间：2012-12-10T22:48:39.020
> 
> 标签：scala, visual-foxpro, jacob

我正在尝试使用 Jacob 调用现有的 VFP 6 应用程序，它是 Java 的 COM 桥。

```
val vfp = new Application(new ActiveXComponent("VisualFoxPro.Application").getProperty("Application").toDispatch())
vfp.setVisible(false)

try {
  vfp.doCmd("do my.exe with myconfig.txt")
} catch {
  case t: Throwable => t.printStackTrace
} finally {
  vfp.doCmd("close data")
  vfp.doCmd("clear all")
  vfp.doCmd("clear")
  vfp.quit
  vfp.safeRelease
} 
```

当没有错误条件时，此代码执行良好并生成预期的 .dbfs。问题是当发生错误时（.dbf 未找到，文件正在被其他用户使用等），会弹出一个 GUI 窗口并停止程序的执行，直到我使用鼠标取消它。我希望这个程序在没有用户交互的服务器上运行，所以这不起作用。

如何在不更改 VFP 6 程序的情况下优雅地处理错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:57:57.197

由于您有 VFP6 的源代码，我建议您查看

系统（2335,0）

Sys 2335 用于识别程序是否在“无人值守”模式下运行，任何此类弹出对话框都会引发错误并阻止实际的“点击”确定/取消/其他按钮继续。这包括提示用户选择表的弹出窗口。

我不确定它何时可用，因为我对它的使用有限。像你一样，在 IIS 下处理 COM 服务器时，显然没有人响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:10:16.177

以无头模式启动JVM，捕获HeadlessException 什么的。或者，编写一个 Java 程序，该程序将使用 Runtime 执行您的 GUI 程序，并在控制台中出现解析错误时重新启动。

# android - requestLocationUpdates 抛出异常

> ID：13810662
> 
> 赞同：0
> 
> 时间：2012-12-10T22:48:41.877
> 
> 标签：android, service, gps, locationmanager

我正在创建一个定期更新位置的服务。但使用下面的代码，它抛出了我：

runException 无法在未调用 Looper.prepare() 的线程内创建处理程序

此代码在服务中 Async 类的 doInBackground 内运行

```
private void UpdatePosition()
    {
        locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

        Location location = 
                locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        showPosition(location);
        locationListener = new LocationListener() {
            public void onLocationChanged(Location location) {
                showPosition(location);
            }
            public void onProviderDisabled(String provider){

            }
            public void onProviderEnabled(String provider){

            }
            public void onStatusChanged(String provider, int status, Bundle extras){
                Log.i("LocAndroid", "Provider Status: " + status);

            }
        };

        locManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 15000, 0, locationListener);
    } 
```

我正在查看几个帖子，发现请求必须在 uithread 中运行，但不知道如何或在哪里放置它。

我能做些什么？

编辑：

我只会将此添加到我的代码中，现在不会抛出任何错误

```
private void UpdatePosition()
    {
        Looper.prepare();
        looper = Looper.myLooper();
        locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

        Location location = 
                locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        showPosition(location);
        locationListener = new LocationListener() {
            public void onLocationChanged(Location location) {
                showPosition(location);
            }
            public void onProviderDisabled(String provider){

            }
            public void onProviderEnabled(String provider){

            }
            public void onStatusChanged(String provider, int status, Bundle extras){
                Log.i("LocAndroid", "Provider Status: " + status);

            }
        };

        locManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 15000, 0, locationListener);
    } 
```

但我不知道它是否正确..你说什么？

# c# - 快速自定义字符串拆分

> ID：13810664
> 
> 赞同：2
> 
> 时间：2012-12-10T22:49:09.130
> 
> 标签：c#, .net, string

我正在编写自定义字符串拆分。它将在`.`前面没有奇数个反斜杠 ( `\`) 的点 ( ) 上分割。

```
«string» -> «IEnemerable<string>»
"hello.world" -> "hello", "world"
"abc\.123" -> "abc\.123"
"aoeui\\.dhtns" -> "aoeui\\","dhtns" 
```

我想知道是否有一个子字符串可以重用原始字符串（为了速度），或者是否有一个现有的拆分可以快速做到这一点？

* * *

这就是我所拥有的，但比`input.Split('.')`//其中输入是一个字符串慢 2-3 倍。（我知道这是一个（稍微复杂一点的问题，但没那么多）

```
 public IEnumerable<string> HandMadeSplit(string input)
    {
        var Result = new LinkedList<string>();
        var word = new StringBuilder();
        foreach (var ch in input)
        {
            if (ch == '.')
            {
                Result.AddLast(word.ToString());
                word.Length = 0;
            }
            else
            {
                word.Append(ch);
            }
        }
        Result.AddLast(word.ToString());
        return Result;
    } 
```

* * *

它现在使用 List 而不是 LinkedList，并记录子字符串的开头和结尾，并使用 string.substring 来创建新的子字符串。这做了很多，几乎和 string.split 一样快，但我已经添加了我的调整。（将添加代码）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:49:41.033

如果您需要性能，您展示的循环是正确的方法。（正则表达式*不会*）。

切换到基于索引的 for 循环。记住比赛开始的索引。不要附加单个字符。相反，请记住要复制的字符范围，然后对每个项目进行一次`Substring`调用。

另外，不要使用`LinkedList`. `List`除了随机访问突变之外，几乎所有情况下它都比 a 慢。

你也可以从`List`一个普通数组切换到你用`Array.Resize`. 这会导致代码稍微乏味（因为您已将`List`类的一部分内联到您的方法中），但它减少了一些小的开销。

接下来，不要返回 an ，`IEnumerable`因为这会在访问其项目时强制调用者通过间接方式。返回一个`List`或一个数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T20:58:30.440

这是我最终确定的。它不像 string.split 那样快，但足够好并且可以修改，做我想做的事。

```
 private IEnumerable<string> HandMadeSplit2b(string input)
    {
        //this one is margenaly better that the second best 2, but makes the resolver (its client much faster), nealy as fast as original.
        var Result = new List<string>();
        var begining = 0;
        var len = input.Length;
        for (var index=0;index<len;index++)
        {
            if (input[index] == '.')
            {
                Result.Add(input.Substring(begining,index-begining));
                begining = index+1;
            }
        }
        Result.Add(input.Substring(begining));
        return Result;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T23:22:02.047

你不应该尝试使用`string.Split`它。

如果您需要帮助来实现它，解决此问题的一种简单方法是使用循环扫描字符串，跟踪您找到合格点的最后位置。当您找到一个新的限定点（或到达输入字符串的末尾）时，只有`yield return`当前子字符串。

**编辑**：关于返回列表或数组与使用 yield

如果在您的应用程序中，最重要的是调用者在迭代子字符串上花费的时间，那么您应该填充一个列表或一个数组并返回它，如已接受的问题中所建议的那样。在收集子字符串时我不会使用可调整大小的数组，因为这会很慢。

另一方面，如果您关心整体性能和内存，并且有时调用者不必遍历整个列表，您应该使用`yield return`. 使用 时，您的优势是在调用者调用（直接或间接通过 a ）`yield return`之前根本不会执行任何代码。这意味着您节省了分配数组/列表的内存，并节省了分配/调整大小/填充列表所花费的时间。您将几乎只花时间在查找子字符串的逻辑上，这将是懒惰地完成的，也就是说 - 仅在实际需要时，因为调用者继续迭代子字符串。`MoveNext``foreach`

# google-app-engine - Google App Engine 内部网络

> ID：13810667
> 
> 赞同：2
> 
> 时间：2012-12-10T22:49:36.263
> 
> 标签：google-app-engine

是否可以在不通过公共互联网的情况下在谷歌应用引擎应用程序之间路由 HTTP 流量？

例如，如果我在一个应用程序上运行 Web 服务 API，并且出于性能原因想要在其之上构建第二个应用程序，而流量不通过 Internet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:57:08.397

在不同域上运行的不同应用程序之间？我怀疑不是。

但是您可以使用后端在幕后做不同的工作：

> 后端是特殊的 App Engine 实例，它们没有请求期限、更高的内存和 CPU 限制以及跨请求的持久状态。它们由 App Engine 自动启动，可以长时间连续运行。每个后端实例都有一个用于请求的唯一 URL，您可以跨多个实例对请求进行负载平衡。

当我查看后端和前端实例之间的日志时，我看到了类似的 IP

> 0.1.0.3

所以是的，这些通信路径是内部的。我敢*猜测*，由于互联网的大部分内容*都是*谷歌，您可能会说不同应用程序之间的请求可能不会在公共互联网上传播。

日志表明前端和后端之间的低延迟通信，但不是在任何特定负载下。您的里程可能会有所不同。

[Python 中的后端](https://developers.google.com/appengine/docs/python/backends/)

# javascript - 在焦点上添加类

> ID：13810670
> 
> 赞同：-2
> 
> 时间：2012-12-10T22:50:25.480
> 
> 标签：javascript, jquery

我有一个 textarea，我想要它，所以一旦有人单击 textarea（或按 f（键码 70）），其他所有内容都会淡出，并将类焦点添加到正文中。

我怎么能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:53:59.020

```
$('textarea').focus(function() {
     $(this).addClass('focusClass');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:59:01.523

添加到@Swadq 所说的内容，以回答您的其余问题：

```
//Listen for the 'f' key to be pressed
$(window).keydown(function(event) {
  if(event.keyCode === 70) {
    $('#textarea').focus();
  }
});
$('#textarea').focus(function() {
  $(body).addClass('focus');
}); 
```

对于褪色位，请参阅：[http ://buildinternet.com/2009/08/lights-out-dimmingcovering-background-content-with-jquery/](http://buildinternet.com/2009/08/lights-out-dimmingcovering-background-content-with-jquery/)

# python - 初学者 Python 导入模块

> ID：13810672
> 
> 赞同：2
> 
> 时间：2012-12-10T22:50:28.230
> 
> 标签：python, import, module

初学者问题。我正在尝试将 python 脚本“feedparser.py”导入另一个 python 脚本“ps5.py”。这两个脚本都位于我桌面上的同一个文件夹“MIT_OCW”中。当我尝试将“feedparser.py”导入“ps5.py”时，出现导入错误（“ImportError: No module named feedparser”）。我应该采取哪些步骤来诊断错误（我是编程新手）？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:01:12.953

**这是来自 ps5.py 的代码**

```
import feedparser
import string
import time 
```

**这些是 feedparser.py 和 ps5.py 的路径**

~/Desktop/MIT_OCW/问题集 5/ps5.py

~/Desktop/MIT_OCW/问题集 5/feedparser.py

最初，当我运行代码时，我得到了“ImportError：没有名为 feedparser 的模块”。但是，我只是尝试再次运行它（没有进行任何更改）并且它起作用了。我很高兴它有效，但很沮丧，我不知道为什么它一开始就不起作用。无论如何，谢谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:52:46.633

模块的名称是不带扩展名的文件名。所以要导入 feedparser.py，你可以使用：

```
import feedparser 
```

要使用 feedparser 中的某些东西，比如函数 f，您可以从模块中调用它，例如：

```
feedparser.f() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-28T00:12:50.397

实际上，我同意 munk 和 Rushy Panchalon 的观点。您应该执行以下操作：

```
import feedparser as feed 
```

（或任何其他名称）

除非您的代码需要，否则您不需要导入字符串或时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-16T05:55:15.563

我同意@munk，导入模块时不需要文件扩展名。

```
import feedparser 
```

或者

```
import feedparser as f 
```

```
from feedparser import * #not recommended at all 
```

```
from feedparser import func1, func2 #where func1 and func2 are functions in your module 
```

至少任何东西都适用于 Python3。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-09T04:00:04.750

无需添加文件扩展名。

```
import feedparser 
```

或者，如果您要非常频繁地引用文件中的函数/类，并且您将重新定义文件中的函数/类：

```
from feedparser import * 
```

使用第二种方法将允许您访问在 feedparser 文件中定义的对象，而无需添加“feedparser”。在对象名称之前。如果这不起作用，试试这个（用适当的词替换大括号中的文本）：

```
from {name of the directory in which the feedparser file is located}.feedparser import * 
```

谢谢你！希望有效！

# java - ArrayIndexOutOfBoundsException 试图访问数据

> ID：13810678
> 
> 赞同：3
> 
> 时间：2012-12-10T22:51:01.913
> 
> 标签：java

我在以下代码中得到一个数组索引越界异常：

```
for (int i=1; i<11; i++) {
    int a[][] = new int[10][3];
double LeftTrim = 1.0;
double RightTrim = 1.0;

a [i][0]=(int) (LeftTrim*((i)*25));
a [i][1]=(int) (RightTrim*((i)*25));
a [i][2]= 5000;

//leftWheel, rightWheel, Milliseconds
myf.setWheelVelocities(a[i][0], a[i][1], a[i][2]);
JOptionPane.showMessageDialog(null, + (a [i][0]  +  a [i][1])/2 + "wheel velocities"  + " | " + a [i][2] + " Milliseconds" +  " Click OK to continue...");
} 
```

每次我达到第 9 个增量时，Eclipse 都会给我一个错误

```
"Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 10" 
```

我必须测试高达 250 的速度，但是当我达到 225 并单击“确定”上的“单击确定以继续...”时出现此错误！我是否超出了数组边界或什么？

编辑：速度必须从 25、50、75 ... 250 开始（总共十个）

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T22:51:58.437

`i`in`a[i]`的有效值为`0`to `9`。您的代码迭代到`10`.

此外，循环从开始，`1`而它*可能*需要从 开始`0`。

最后，您在循环内分配二维数组的事实看起来很奇怪。要么把它移到循环之外，要么把它变成一个三元素一维数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:58:48.243

您需要将代码更改为

```
for (int i = 0; i < 10; i++) {
} 
```

在 Java 中，数组索引从`0`.

# spring - 如何让 Spring 控制器、AOP 和 JDK 代理一起工作

> ID：13810680
> 
> 赞同：0
> 
> 时间：2012-12-10T22:51:13.083
> 
> 标签：spring, proxy, controller, spring-aop, cglib

在我的带有方面注释的 spring 控制器中，我试图删除 CGLib 代理并用 JDK 动态代理替换它们。我知道当类没有实现接口时 Spring AOP 使用 CGLib，因为 JDK 动态代理只在接口上工作。我还意识到，接口和实现类上都需要有注解。但是，我遇到的问题是控制器不再显示为带有 JDK 代理的 bean。

我的控制器 bean 像这样被扫描：

```
<context:annotation-config/>
<context:component-scan base-package="com.package.name"/> 
```

这可行，但控制器显示为 CGLibController$$EnhancerByCGLIB$$5f0b2287：

```
package com.package.name;
@Controller
public class CGLibController {
  @AOP_Aspect
  @RequestMapping("some_url")
  public void foo();
}

//in a bean post processor
//in postProcessAfterInitialization(Object bean, String beanName)
  Controller controller = AnnotationUtils
      .findAnnotation(bean.getClass(), Controller.class);
//controller will exist
//bean name is CGLibController$$EnhancerByCGLIB$$5f0b2287 
```

这不起作用，它永远不会到达 bean 后处理器：

```
package com.package.name;
@Controller
public interface ITest{
  @AOP_Aspect
  @RequestMapping("some_url")
  public void foo();
}

package com.package.name;
@Controller
public class DynamicController implements ITest{
  @AOP_Aspect
  @RequestMapping("some_url")
  public void foo();
} 
```

但是，如果我明确地创建这个 DynamicController bean，如

```
<bean class="com.package.name.DynamicController"/> 
```

然后当我启动我的服务器时 ServletContext 抱怨说

> bean初始化失败；嵌套异常是 java.lang.IllegalStateException：无法将处理程序“dynamicController”映射到 URL 路径 [some_url]：已经映射了类型为 [class $Proxy61] 的处理程序。

所以这里发生了一些事情，DynamicController 是一个动态代理。但我不知道还发生了什么，我知道它不再是一个 bean/控制器。我不想要“控制器、方面、动态代理：选择任何两个”我想要全部三个。这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:36:07.687

我不是 100% 确定您的 BeanPostProcessor 正在尝试做什么，或者您是否控制其中的代码，但假设它不是 Ordered 似乎是安全的，因此在创建代理后处理它（这将有默认最低优先级，但在无序之前）。也许你可以实现 Ordered 并给它一个低阶（比如 0）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:28:52.503

为了拿起这个 bean，我必须像以前那样在 postProcessBeforeInitialization 中处理它，而不是在 postProcessAfterInitialization 中处理它。我推测它在初始化时被代理了，这会搞砸一些事情。

正如我所暗示的，DynamicController 实际上是一个 JDK 动态代理，但代理背后的真正对象是 bean。然而！根据我丢失的某些来源，在使用代理和对接口进行编程时，注释必须在接口上。如果界面上没有它们，spring 不会知道。并且注释必须在具体类上才能使 bean 后处理器工作，仅在接口上是不够的。

# c# - 有没有一种使用正则表达式解析大文件的快速方法？

> ID：13810693
> 
> 赞同：10
> 
> 时间：2012-12-10T22:52:09.760
> 
> 标签：c#, regex, algorithm

问题：非常非常大的文件，我需要逐行解析以从每行获取 3 个值。一切正常，但解析整个文件需要很长时间。有可能在几秒钟内做到这一点吗？其花费的典型时间在 1 分钟到 2 分钟之间。

示例文件大小为 148,208KB

我正在使用正则表达式来解析每一行：

这是我的 C# 代码：

```
private static void ReadTheLines(int max, Responder rp, string inputFile)
{
    List<int> rate = new List<int>();
    double counter = 1;
    try
    {
        using (var sr = new StreamReader(inputFile, Encoding.UTF8, true, 1024))
        {
            string line;
            Console.WriteLine("Reading....");
            while ((line = sr.ReadLine()) != null)
            {
                if (counter <= max)
                {
                    counter++;
                    rate = rp.GetRateLine(line);
                }
                else if (max == 0)
                {
                    counter++;
                    rate = rp.GetRateLine(line);
                }
            }
            rp.GetRate(rate);
            Console.ReadLine();
        }
    }
    catch (Exception e)
    {
        Console.WriteLine("The file could not be read:");
        Console.WriteLine(e.Message);
    }
} 
```

这是我的正则表达式：

```
public List<int> GetRateLine(string justALine)
{
    const string reg = @"^\d{1,}.+\[(.*)\s[\-]\d{1,}].+GET.*HTTP.*\d{3}[\s](\d{1,})[\s](\d{1,})$";
    Match match = Regex.Match(justALine, reg,
                                RegexOptions.IgnoreCase);

    // Here we check the Match instance.
    if (match.Success)
    {
        // Finally, we get the Group value and display it.

        string theRate = match.Groups[3].Value;
        Ratestorage.Add(Convert.ToInt32(theRate));
    }
    else
    {
        Ratestorage.Add(0);
    }
    return Ratestorage;
} 
```

这是一个要解析的示例行，通常大约 200,000 行：

> 10.10.10.10 - - [2002 年 11 月 27 日：16:46:20 -0500] “GET /solr/ HTTP/1.1”200 4926 789

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T22:57:11.270

[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)和[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)寻求帮助。

1.  创建具有多个随机访问视图的持久 MMF。每个视图对应于文件的特定部分
2.  定义带参数的解析方法 like `IEnumerable<string>`，基本上是为了抽象出一组未解析的行
3.  `Parse(IEnumerable<string>)`使用任务操作为每个 MMF 视图创建和启动一个 TPL 任务
4.  每个worker任务将解析​​后的数据添加到[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)类型的共享队列中
5.  另一个任务监听 BC ( [GetConsumingEnumerable()](http://msdn.microsoft.com/en-us/library/dd395014.aspx) ) 并处理所有已被工作任务解析的数据

请参阅MSDN 上的[管道模式](http://msdn.microsoft.com/en-us/library/ff963548.aspx)

必须说这个解决方案适用于`.NET Framework >=4`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T22:56:15.783

现在，您`Regex`每次调用时都会重新创建您的`GetRateLine`，每次您阅读一行时都会发生这种情况。

如果您提前[创建一个 Regex 实例](http://msdn.microsoft.com/en-us/library/43122zyz.aspx)，然后使用非静态[`Match`](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)方法，您将节省 regex 编译时间，这可能会提高您的速度。

话虽这么说，它可能不会让你从几分钟到几秒钟......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T23:52:20.927

简而言之，我会尝试一些事情......

首先，将文件流缓冲区增加到至少 64kb：

```
using (var sr = new StreamReader(inputFile, Encoding.UTF8, true, 65536)) 
```

其次，构造一次正则表达式，而不是在循环内使用字符串：

```
static readonly Regex rateExpression = new Regex(@"^\d{1,}.+\[(.*)\s[\-]\d{1,}].+GET.*HTTP.*\d{3}[\s](\d{1,})[\s](\d{1,})$", RegexOptions.IgnoreCase);
//In GetRateLine() change to:
Match match = rateExpression.Match(justALine); 
```

第三，通过让 Responder.GetRate() 返回一个列表或数组来使用单个列表实例。

```
// replace: 'rp.GetRate(rate)', with:
rate = rp.GetRate(); 
```

我会将列表预先分配到“合理”的限制：

```
List<int> rate = new List<int>(10000); 
```

如果可用且适用于您的特定需求，您还可以考虑将编码从 UTF-8 更改为 ASCII。

**评论**

通常，如果这确实需要缩短解析时间，您将需要构建一个标记器并完全跳过 Regex。由于您的输入格式看起来都是 ascii 并且相当简单，这应该很容易做到，但可能比正则表达式更脆弱。最后，您需要权衡和平衡对速度的需求与代码的可靠性和可维护性。

如果您需要一些手动解析示例，请查看[此问题的答案](https://stackoverflow.com/questions/7153315/how-to-parse-a-text-file-in-c-sharp-and-be-io-bound)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T23:03:44.490

不要为每次调用重新创建一个正则表达式，`GetRateLine`而是提前创建它，将`RegexOptions.Compiled`选项传递给[`Regex(String,RegexOptions)`](http://msdn.microsoft.com/en-us/library/h5845fdz.aspx)构造函数。

您可能还想尝试将整个文件读入内存，但我怀疑这是您的瓶颈。从磁盘读取约 100MB 的数据应该不会花一分钟时间。

# java - 在带有更新的 Android 模拟器上显示当前时间和日期？

> ID：13810694
> 
> 赞同：1
> 
> 时间：2012-12-10T22:52:10.747
> 
> 标签：java, android-emulator

我想了解如何在 Android Emulator 上显示每秒更新的确切时间。我知道如何使用变量从字符串中提取时间。

`String getTheTimeAndDate = DateFormat.getDateInstance().format(new Date());`

我使用的是`TextView`所以当我调试它时，它会显示今天的日期和时间（没有错误），但它不会以秒为单位计数。我希望它不断更新，以便我可以看到确切的当前时间和日期刷新。我知道它必须以某种类型的 for 循环或其他方式完成。？

这是我目前拥有的：

```
TextView textView;

@Override
public void onCreate(Bundle frankyTwoToes) {
    super.onCreate(frankyTwoToes);
    setContentView(R.layout.activity_main);

    textView=(TextView)findViewById(R.id.textView);

    String currentTimeAndDate = DateFormat.getDateInstance().format(new Date());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:13:59.490

创建字符串后，您必须不断更新它。PS-您可以跳过创建`String currentTimeAndDate`。

```
...
textView=(TextView)findViewById(R.id.textView);

// Infinite loop
while (true) {
   // Update time
   textView.setText(DateFormat.getDateInstance().format(new Date()));
} 
```

# java - 如何自动从类数组转换为数组类

> ID：13810703
> 
> 赞同：5
> 
> 时间：2012-12-10T22:52:50.313
> 
> 标签：java, arrays, algorithm, performance, class

我想知道如何（如果可能的话）使用数据布局对 Java 类进行编程`Array of Class`，例如：

```
public class X{

     double a;
     double b;
     double c;
}

public X array_of_x[SIZE] = new X [SIZE]; 
```

但在内部，数据将存储为如下布局`Class of Arrays`：

```
 public class X{

     double a[] = new double [SIZE];
     double b[] = new double [SIZE];
     double c[] = new double [SIZE];
}

public X class_x = new X(); 
```

我的目标是程序员可以像第一个那样以更直观的风格进行编程，但是在内部我会进行转换，以便数据可以在内存中连续，并且我会获得更高的性能。

有没有办法这样做，以便它可以接受任何具有第一种结构类型的类并能够将其转换为第二种方法？（或者是任何能够进行这种转换的工具）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:10:31.387

让我们创建一个展示第一个布局以供使用的界面，并为该界面创建一个在内部使用第二个布局的实现。（从代码中删除了访问修饰符。）

```
interface X {
    double getA();
    double getB();
    double getC();
};

interface ArrayOfX {
    X get(int index);
};

class ContiguousArrayOfX implements ArrayOfX {
    class ContiguousX implements X {
        int index;
        ContiguousX(int index) {
            this.index = index; }
        double getA() { return a[index]; }
        double getB() { return b[index]; }
        double getC() { return c[index]; }
    }

    X get(int index) {
        return new ContiguousX(index); }

    double a[] = new double [SIZE];
    double b[] = new double [SIZE];
    double c[] = new double [SIZE];
}; 
```

如果想减轻 GC 的负担，还可以缓存`ContiguousX`. 如果对象完全分配在堆上，这在很大程度上取决于 JIT 编译器的能力`ContiguousX`——它们很可能存在于堆栈中，在这种情况下，开销可以忽略不计。作为最后的手段，您可以为快速访问定义一个替代接口：

```
interface FasterArrayOfX {
    double getA(int index);
    double getB(int index);
    double getC(int index);
};

class FasterContiguousArrayOfX extends ContiguousArrayOfX implements FasterArrayOfX {
   // Exercise left to the reader
}; 
```

通过针对接口进行编程，您以后始终可以自由选择存储。

为任何给定的类布局编写代码生成器相当简单。上面的代码可以用作样板，只有方法和数组声明取决于您要获取的类布局。我不知道任何现有的工具。

# ldap - 具有子域的组成员身份 LDAP 查询

> ID：13810717
> 
> 赞同：3
> 
> 时间：2012-12-10T22:53:57.410
> 
> 标签：ldap, ldap-query

我有一个类似于这样的域结构：

```
DC=us,DC=earth,DC=com
DC=uk,DC=earth,DC=com
DC=au,DC=earth,DC=com 
```

每个域都有一个用户 OU 和一个组 OU。

每个域都有用户 (us,uk,au) 01 到 10 即 us01, us02,...., uk01, uk02,.. ,au01, au02..

有一个群：

```
cn=group1,ou=groups,DC=uk,DC=earth,DC=com 
```

us01、uk01 和 au01 是

```
cn=group1,ou=groups,DC=uk,DC=earth,DC=com. 
```

我正在尝试运行 LDAP 查询以返回

```
cn=group1,ou=groups,DC=uk,DC=earth,DC=com 
```

我相信“DC=earth,DC=com”的基本 DN，过滤器为

```
memberof=cn=group1,ou=groups,DC=uk,DC=earth,DC=com" 
```

具有 SUBTREE 级别的范围应该可以工作，但事实并非如此。

我究竟做错了什么？可能吗？

我正在使用 JXplorer 进行测试。

此外，我只能查询/返回本地域中包含的对象，即如果我使用 earth.com 作为 BASE DN，我只能“看到”返回的地球域中的对象。它似乎无法跨越子域。这是正常的吗？

我也无法查看同级域中的对象，即当使用 au 域作为 BASE DN 时，我看不到 uk 用户。我相信这是正确的，因为 BASE DN 需要在其 SUBTREE 中包含 AD 对象才能“看到”它们。这个对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:58:48.330

由于您位于不同的域中，因此您需要能够追逐推荐。我不知道 Jxplorer 的功能以及是否可以自动跟踪推荐。

正如 Tim A 所说，您需要确保您拥有适当的权限来访问您尝试访问的所有上下文。-吉姆

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T23:09:00.797

看起来您正在包含要在过滤器中返回的属性。尝试仅将`cn=group1,ou=groups,DC=uk,DC=earth,DC=com`其用作您的基础，范围为`BASE`，过滤器为`(*objectclass=*)`（这将使您直接进入您尝试查询的组）。然后从搜索返回的条目中，获取包含成员列表的属性。

至于您能够遍历哪些子域，这可能取决于应用于树的 ACL（访问控制列表），或者它可能只是 Jxplorer 中的怪异。IMO，Jxplorer 是垃圾。

是的，无论您使用什么工具，您都只能看到低于您定义为 BASE DN 的条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-19T11:40:17.397

可能为时已晚，但我正在尝试解决同样的问题。我正在尝试获取一个组的所有用户，但它没有返回任何内容，因为该组的所有用户都在一个子域下。微软支持说“这是不可能的”。他们建议对每个子域执行搜索。链接如下；

[https://social.technet.microsoft.com/Forums/windowsserver/en-US/45008d6c-59e0-49a3-87a6-894dd5d6d5b6/ldap-query-not-returning-subdomains?forum=winserverDS](https://social.technet.microsoft.com/Forums/windowsserver/en-US/45008d6c-59e0-49a3-87a6-894dd5d6d5b6/ldap-query-not-returning-subdomains?forum=winserverDS)

我还发现，如果网络上运行了适当的全局目录服务器，则可以通过一次查询从所有子域中获取结果。使用 3268 端口而不是 389 端口进行 LDAP 连接可以使用所有子域树查询全局目录。

# android - Android 入门指南中的错误

> ID：13810724
> 
> 赞同：0
> 
> 时间：2012-12-10T22:54:26.737
> 
> 标签：android

我是一名计算机科学专业的学生，​​我正在尝试使用 Android 的“入门指南”自学 Android 开发。但是，在“开始活动”页面（[http://developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)）上，以下两行代码示例都出现错误：

```
setContentView(R.layout.main_activity); 
```

和

```
mTextView = (TextView) findViewById(R.id.text_message); 
```

特别是`.main_activity`和`.text_message`。它无法解决，`R.id`并且我不允许修改此文件。我严格按照此处的入门指南进行操作。不知道其他人是否有这个问题或知道我在哪里对此感到厌烦。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:03:41.193

右键单击项目中的 R.java，然后将其删除。重建项目。它应该工作。

# c++ - C++ - 多维数组中的指针

> ID：13810731
> 
> 赞同：2
> 
> 时间：2012-12-10T22:55:07.630
> 
> 标签：c++, visual-c++

我买了一本 Visual c++ 的初学者书，并来到了涉及数组、字符串和指针的章节。我理解这个概念，但是当涉及到多维数组时，我有点迷失了。

数组和指针声明：

```
double beans[3][4];
double* pbeans; 
```

我理解这部分：

*您可以为指针pbeans声明并赋值，如下：

```
double* pbeans;
pbeans = &beans[0][0]; 
```

但是当作者提出您可以通过键入以下语句来分配第一行/维度的地址时，他失去了我：

```
pbeans = beans[0]; 
```

为什么我们可以在这里跳过“Address-Of”运算符？对我来说，合乎逻辑的事情是：

```
pbeans = &beans[0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:58:19.163

假设你只有一个数组

```
double legumes[5]; 
```

数组衰减为指针，所以你可以做

```
double* plegumes = legumes; 
```

当您声明一个二维数组时，您所做的是创建一个数组数组。所以表达式`beans[0]`实际上是指一个数组。所以声明

```
pbeans = beans[0]; 
```

只是将数组分配给指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:59:09.317

因为数组衰减为指向第一个元素的指针。如果我们有一个名为 的数组`arr`，那么对数组不适合的位置的任何使用`arr`通常都会导致`arr`被视为指针。这称为衰变。

在这种情况下，`beans[0]`是一个数组；具体来说，一个`double[4]`. 但是，由于您不能将数组分配给指针，因此数组会衰减为`double*`.

您提供的代码`double* pbeans = &beans[0];`将尝试将指向双精度数组的指针分配给指向双精度的指针；由于类型不匹配，这将不起作用。

此外，除此之外，这听起来不像是一本好书。将数组、字符串和指针一起教授 C 的味道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T23:00:56.527

数组类型和指向数组第一个元素的指针之间存在标准转换。作为一个更简单的例子：

```
int array[5];
int* p = array; 
```

`p`现在是指向 的第一个元素的指针，因为如果需要，“ `array`5 int 数组”类型的对象将*衰减*为“指向”的指针。`int`

在您的情况下，`beans[0]`它的类型为“4 double 数组”，并将衰减为指向数组中第一个元素的“指向 double 的指针” `beans[0]`。相当于做`double* p = &beans[0][0]`。

# asp.net-mvc-3 - ASP.NET MVC3 - RAZOR - 日期格式验证不起作用

> ID：13810732
> 
> 赞同：2
> 
> 时间：2012-12-10T22:55:11.047
> 
> 标签：asp.net-mvc-3, jquery-ui, razor

我是 MVC3 的新手-无法弄清楚为什么日期格式验证在客户端不起作用，即，如果我手动更改文本框并输入无效的格式日期。我正在为这个字段使用 jQuery 日期选择器。奇怪的是，必填字段验证正在工作。

有人可以让我知道这段代码有什么问题吗？

谢谢！

视图模型

```
 [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    [DataType(DataType.Date, ErrorMessage="Please enter a valid date in the format dd/mm/yyyy")]
    [Required]
    public DateTime ADate { get; set; } 
```

看法

```
 @Html.TextBox("ADate", Model.ADate.ToShortDateString(), new { @class = "ADate" })
        @Html.ValidationMessageFor(model => model.ADate, "*") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:59:19.163

DataType 和 DisplayFormat 仅在使用 DisplayFor 或 EditorFor 时有效，不适用于 TextBox。但是，您不能使用 EditorFor 设置类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T00:00:01.417

您可以使用基础`TextBoxFor()`并指定类名

```
@Html.TextBoxFor(model => model.ADate, new { @class = "ADate" }) 
```

# python - 如何显示字符串对齐？

> ID：13810735
> 
> 赞同：-1
> 
> 时间：2012-12-10T22:55:35.523
> 
> 标签：python

我几乎完成了这个程序我只是有点卡在最后一部分。运行时程序会要求输入两个字符串。然后将它们进行比较以查看最小编辑距离。删除和插入的成本为 1，替换（删除和插入）的成本为 2。

IE 越来越快的距离为 4，因为需要替换最后两个字母才能从一个字母替换到另一个字母。

我遇到的问题是显示对齐方式。我想显示如下：

```
q u i c k l y
          s s
q u i c k e r 
```

显示两个替换以及它们的位置。这也适用于删除和插入。

到目前为止：

```
#!/usr/bin/env python
import sys
from sys import stdout

def  Edit_Distance(target, source):

n = len(target)
m = len(source)

distance = [[0 for i in range(m+1)] for j in range(n+1)]

for i in range(1,n+1):
    distance[i][0] = distance[i-1][0] + insertCost(target[i-1])

for j in range(1,m+1):
    distance[0][j] = distance[0][j-1] + deleteCost(source[j-1])

for i in range(1,n+1):
    for j in range(1,m+1):
       distance[i][j] = min(distance[i-1][j]+1,
                            distance[i][j-1]+1,
                            distance[i-1][j-1]+substCost(source[j-1],target[i-1]))
return distance[n][m]

def substCost(x,y):
    if x == y:
        return 0
    else:
        return 2

def insertCost(x):
    return 1

def deleteCost(x):
    return 1

# User inputs the strings for comparison
word1 = raw_input("Enter A Word: ")
word2 = raw_input("Enter The Second Word: ")

# Simple conditional that will set the length of the range loop below based on the longest string
if (word2 >= word1):
    x = len(word2)
else:
        x = len(word1)

# x is then the longest string length so that we have the perfect length range loop
# stdout.write allows us to print multiple things on the same line, instead of tabbing down a line each time
print ("The minimum edit distance between S1 and S2 is: ", Edit_Distance(word1,word2))

print list(word1)
for i in range(x):
    if(word1[i] != word2[i]):
        print("D")

print list(word2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:32:08.957

如果您的问题只是如何打印对齐的“D”，您应该查看

[http://docs.python.org/2/library/stdtypes.html#string-formatting-operations](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)

python文档的页面，您可以在其中找到如何格式化字符串（如果我理解，这就是您所要求的）。

顺便说一句，只是关于如何打印对齐的提示（鉴于代码运行良好）：为什么不使用列表将“D”存储在循环中？

# javascript - jquery ajax 成功回调中的 window.open 会阻止后续的 ajax 调用

> ID：13810739
> 
> 赞同：1
> 
> 时间：2012-12-10T22:56:03.293
> 
> 标签：javascript, jquery, ajax, asynchronous, callback

我有一个 AJAX 调用在服务器上设置一些会话变量。

设置会话变量后，在成功回调中，我将打开一个新窗口到相应的页面。

```
window.open("../reports/" + data.d, "report"); 
```

有时，渲染需要很*长时间。*目前，让它渲染得更快是我无法控制的。

我担心的是，当它尝试在此窗口中呈现 html 时，它会阻止所有其他 ajax 请求。它将它们排队，一旦窗口最终呈现，它们就会执行。

我已经尝试过使用 setTimeout 但它似乎不起作用（显然是因为 jQuery.ajax 已经占用了“线程”）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:06:52.820

大多数浏览器限制并发连接数

请参阅 [流行浏览器中允许多少并发 AJAX (XmlHttpRequest) 请求？](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)

和[browserscope 的图表](http://www.browserscope.org/?category=network)

# c# - 修改List内容时出现“无法修改返回值”错误

> ID：13810743
> 
> 赞同：4
> 
> 时间：2012-12-10T22:56:18.037
> 
> 标签：c#

我目前正在处理一个 C# 项目，我需要将数据添加到自定义列表数组中。然后我稍后需要枚举列表，找到特定记录然后修改数据。但是，我在 Visual Studio 中遇到错误

```
Cannot modify the return value of System.Collections.Generic.List<EmailServer.ThreadCheck>.this[int] because it is not a variable. 
```

下面是初始化列表数组的代码

```
static List<ThreadCheck> threadKick = new List<ThreadCheck>(); 
```

下面是我如何将数据添加到 List 数组

```
public static void addThread(ILibraryInterface library, int threadID, string threadName)
{
    if (Watchdog.library == null)
    {
        Watchdog.library = library;
    }
    long currentEpochTime = library.convertDateTimeToEpoch(DateTime.Now);
    threadKick.Add(new ThreadCheck()
    {
        threadName = threadName,
        threadID = threadID,
        epochTimeStamp = currentEpochTime
    });
    library.logging(classDetails + MethodInfo.GetCurrentMethod().Name, string.Format("Thread ID: {0} has been added to watchdog for {1}",
        threadID, threadName));
} 
```

下面是我试图修改列表中数据的代码

```
public static void kickThread(int threadId)
{
    lock (threadKick)
    {
        for (int i = 0; i < threadKick.Count; i++)
        {
            if (threadKick[i].threadID == threadId)
            {
                threadKick[i].epochTimeStamp = library.convertDateTimeToEpoch(DateTime.Now);
                break;
            }
        }
    }
} 
```

如何在不出现上述错误的情况下修改列表数组的内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T22:57:20.997

[欢迎来到邪恶可变结构](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)的美妙世界！

更改`ThreadCheck`为 a `class`，一切都会正常工作。

# websphere - 配置 IHS 服务器以将流量定向到绑定到端口的 Netty 组件

> ID：13810745
> 
> 赞同：0
> 
> 时间：2012-12-10T22:56:25.167
> 
> 标签：websphere, netty, ibm-rad, websphere-commerce, ibmhttpserver

我在 WAS 中部署了一个服务器组件（基于 Jboss-Netty，它可以维护和处理持久连接）。此组件在 WAS 环境中部署和启动时，绑定到端口并侦听传入的 HTTP 连接。

[为什么我必须在 WAS 中部署 Netty HTTP 服务器是另一个故事——管理要求！Netty 作为 Spring bean 部署在 WAS 中，启动时在机器的端口上运行，独立于 WAS]

客户端（移动应用程序）能够使用这个 netty 组件建立持久的 HTTP 连接（到上面的 URL::Port）并发送/接收请求。

**现在，我必须在我们的生产环境中复制此功能，其中 IHS 服务器（Web 服务器）位于 WAS 之前。**

我期望得到一个 IHS URL，它可以将传入的数据包重定向到 WAS 上的特定端口，以便客户端应用程序可以建立类似的持久 http 连接。

我们的服务器管理员尝试了一些组合，但我们无法确定如何进一步进行此操作。

您的专家意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:05:39.857

您没有指定管理员尝试了哪些“组合”，但根据您的描述，您需要做的是设置反向代理。IHS 基本上是 Apache HTTP 服务器，因此您可以参考以下内容：

[http://httpd.apache.org/docs/current/mod/mod_proxy.html](http://httpd.apache.org/docs/current/mod/mod_proxy.html)

# php - PHP 错误：SimpleXMLElement::__construct()

> ID：13810750
> 
> 赞同：1
> 
> 时间：2012-12-10T22:56:50.237
> 
> 标签：php, xml, rss

出于某种原因，我用来将 feedburner 计数作为字符串在我的网站 (http://ios-blog.co.uk) 周围使用的脚本已停止工作:( 这是它抛出的错误：

```
Warning: SimpleXMLElement::__construct() [simplexmlelement.--construct]: Entity: line 2:     parser error : Opening and ending tag mismatch: meta line 1 and HEAD in /home/connect.php on line 83

Warning: SimpleXMLElement::__construct() [simplexmlelement.--construct]: <TITLE>301 Moved</TITLE></HEAD><BODY> in /home/connect.php on line 83

Warning: SimpleXMLElement::__construct() [simplexmlelement.--construct]: ^ in /home/connect.php on line 83

Warning: SimpleXMLElement::__construct() [simplexmlelement.--construct]: Entity: line 6: parser error : Opening and ending tag mismatch: HEAD line 1 and HTML in /home/connect.php on line 83

Warning: SimpleXMLElement::__construct() [simplexmlelement.--construct]: </BODY></HTML> in /home/connect.php on line 83

Warning: SimpleXMLElement::__construct() [simplexmlelement.--construct]: ^ in /home/connect.php on line 83

Warning: SimpleXMLElement::__construct() [simplexmlelement.--construct]: Entity: line 7: parser error : Premature end of data in tag HTML line 1 in /home/connect.php on line 83

Warning: SimpleXMLElement::__construct() [simplexmlelement.--construct]: in /home/connect.php on line 83

Warning: SimpleXMLElement::__construct() [simplexmlelement.--construct]: ^ in /home/connect.php on line 83

Fatal error: Uncaught exception 'Exception' with message 'String could not be parsed as XML' in /home/connect.php:83 Stack trace: #0 /home/connect.php(83): SimpleXMLElement->__construct('<HTML><HEAD><me...') #1 {main} thrown in /home/connect.php on line 83 
```

这是我正在使用的 PHP：

```
//get cool feedburner count
$whaturl="http://api.feedburner.com/awareness/1.0/GetFeedData?uri=iosdevblog";

//Initialize the Curl session
$ch = curl_init();

//Set curl to return the data instead of printing it to the browser.
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

//Set the URL
curl_setopt($ch, CURLOPT_URL, $whaturl);

//Execute the fetch
$data = curl_exec($ch);

//Close the connection
curl_close($ch);
$xml = new SimpleXMLElement($data);
$fb = $xml->feed->entry['circulation'];
echo $fb;
//end get cool feedburner count 
```

该文件很大 - 它说它`83`涉及的行：`$xml = new SimpleXMLElement($data);`

感谢所有帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:48:42.317

看看这里的这条线

警告：SimpleXMLElement::__construct() [simplexmlelement.--construct]: 301 移入 /home/connect.php 第 83 行

它给 HTTP 代码 301 移动了。

如果您访问此链接

[https://feedburner.google.com/api/awareness/1.0/GetFeedData?uri=iosdevblog](https://feedburner.google.com/api/awareness/1.0/GetFeedData?uri=iosdevblog)

它实际上是 404ing，那里没有 XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T02:05:31.147

啊... feedburner 现在已弃用 - 这就是它突然停止的原因:( [https://developers.google.com/feedburner/](https://developers.google.com/feedburner/)

# api - 非常规的 Open Graph 故事——如何构建？

> ID：13810762
> 
> 赞同：-2
> 
> 时间：2012-12-10T22:57:32.303
> 
> 标签：api, web-applications, facebook-opengraph, social-networking

我的客户有一个与时尚相关的网站，该网站将有一个功能显示各种名人和他们的“外表”照片。用户可以单击一个按钮来表明他们认为这些外观是“命中”还是“未命中”。

考虑到这一点，以下是我们希望在用户时间线上发布的内容：

> [用户] 认为 [名人照片] 在 [网站] 上很受欢迎。
> [用户] 认为 [名人照片] 是 [网站] 上的错过。

Facebook OG 的设置方式是它实际上只支持“[user] has [action] an [object]”之类的东西。现在我有一个相当复杂的方式来完成上述故事。我有一个“思考”动作和“名人照片小姐”和“名人照片命中”的对象。然后，我或多或少能够调整文本以适应上述内容。然后我必须在站点中有 URL 来引用这些对象（例如 /photos/celebrityname/look1/miss 和 /photos/celebrityname/look1/hit。这些 URL 基本上是 /photos/celebrityname/ 中照片的副本看1。

最重要的是，我什至不知道我能否说服 Facebook 批准这样的设置。它没有任何欺骗性或棘手的地方，但它并不完全按照他们的意图使用。

所以在我把这一切放在一起之前，有人能告诉我其他更简单的方法吗？如果有某种模板驱动的方法将故事文本放在一起，那就容易多了，但据我所知，不存在这样的东西。

**编辑：**我能够使用上述方法完成此操作，并且能够说服 Facebook 批准它。这有点骇人听闻，但确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:06:58.500

请记住，除非您有大量的广告预算，否则您不会为此获得自定义解决方案，抱歉。

您将拥有适合“用户`action`一个`object`”模型

为什么不使用类似的东西： user `likes`a `celebrity photo on BlahBlah`？

# .net - XAML 语法错误阻止设计器但编译正常

> ID：13810772
> 
> 赞同：10
> 
> 时间：2012-12-10T22:58:33.477
> 
> 标签：.net, wpf, xaml, datagrid, visual-studio-2012

我遇到了一件相当奇怪的事情，我`DataGrid`在 WPF XMAL 页面中定义了一个声明，其中声明了以下内容：

```
<DataGrid.Resources>
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#FF3399FF" />
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="White" />
    <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="#FF3399FF"/>
    <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}" Color="White" />
</DataGrid.Resources> 
```

从技术上讲，这两种`Inactive` `SystemColors`类型来自 .net 4.5，但是当它设置为目标 .net 4 时我可以编译程序，并且这些非活动画笔可以工作，但是当它设置为目标 .net 4 时，在 Visual Studio 中加载 XMAL 设计器页面会抛出错误`The member "InactiveSelectionHighlightTextBrushKey" is not recognized or is not accessible.`，然后阻止设计器视图。但它仍然按照上面程序中的定义进行编译和显示。

至少可以说这似乎非常不一致，我无法判断这是 Visual Studio 2012 问题还是它允许程序编译，因为我的开发计算机安装了 .net 4.5 并且它只是在它看到时更改目标框架有些东西正在使用它（尽管我非常怀疑）。或者是否有可能 Inactive 类型在 .net 4 中，但未在文档中列为受支持，而只是在 VS 中导致此问题？

在 .net 4 中是否有更好的方法来允许我设置 DataGrid 行的非活动选择颜色？或者是升级到 .net 4.5 的唯一方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T20:27:47.400

Visual Studio 会构建一个程序集，即使它的目标设置为 .NET FW 4.0 并且您`InactiveSelectionHighlightBrushKey`在 XAML 代码中使用。此程序集将在具有 .NET FW 4.5 的系统中正确执行。但是如果系统只有.NET FW 4.0，当系统创建用户控件时**会抛出异常**`InactiveSelectionHighlightBrushKey`。

因此，您不能使用`InactiveSelectionHighlightBrushKey`目标设置为 FW 4.0 的 in 程序集，因为它们无法在只有 .NET FW 4.0 的系统中工作。

`LostFocus/LostKeyboardFocus/GotFocus`要同时支持 FW 4.0 和 FW 4.5，您可以在事件处理程序中设置所选行的颜色。请参阅示例代码[https://stackoverflow.com/a/8095932/1815957](https://stackoverflow.com/a/8095932/1815957)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-21T00:16:30.533

如果您不想使用后面的代码，那么可以替代`InactiveSelectionHighlightBrushKey` is `ControlBrushKey`。以下对我有用：

```
<Style x:Key="ReadOnlyDataGrid" TargetType="{x:Type DataGrid}">
    <Style.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="LightGreen"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="LightGreen"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="Black"/>
    </Style.Resources>
</Style> 
```

# java - 使用 Jersey 在 Java 中发布 JSON 时出现 415 错误

> ID：13810773
> 
> 赞同：1
> 
> 时间：2012-12-10T22:58:34.140
> 
> 标签：java, json, jersey, http-status-code-415

我浏览了谷歌，以及这里的其他问题，但无济于事。他们都说同样的话......导入jersey-json的.jar（完成），将依赖项添加到pom.xml（完成）并将POJOMappingFeature添加到web.xml（完成），但我仍然无法使用 JSON 进入或离开服务器来访问 Restful Web 服务。

web.xml

```
<web-app id="WebApp_ID" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>My Application</display-name>

<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>my.app</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

pom.xml

```
<dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.8</version>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-json</artifactId>
        <version>1.8</version>
    </dependency> 
```

服务方式：

```
@POST
@Path("/request")
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public ResponseInfo Request(RequestInfo requestInfo) 
```

ResponseInfo 和 RequestInfo 都有 @XmlRoot 和 @XmlElement 注释。我在 Tomcat 7.0.33 上本地运行并收到以下错误：

```
SEVERE: A message body reader for Java class           
my.app.RequestInfo, and Java type class my.app.RequestInfo, and MIME media type
application/json was not found.
The registered message body readers compatible with the MIME media type are:
application/json ->
  com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$App
*/* ->
  com.sun.jersey.core.impl.provider.entity.FormProvider
  com.sun.jersey.core.impl.provider.entity.StringProvider
  com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
  com.sun.jersey.core.impl.provider.entity.FileProvider
  com.sun.jersey.core.impl.provider.entity.InputStreamProvider
  com.sun.jersey.core.impl.provider.entity.DataSourceProvider
  com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
  com.sun.jersey.core.impl.provider.entity.ReaderProvider
  com.sun.jersey.core.impl.provider.entity.DocumentProvider
  com.sun.jersey.core.impl.provider.entity.SourceProvider$StreamSourceReader
  com.sun.jersey.core.impl.provider.entity.SourceProvider$SAXSourceReader
  com.sun.jersey.core.impl.provider.entity.SourceProvider$DOMSourceReader
  com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General
  com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
  com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General
  com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$General
  com.sun.jersey.core.impl.provider.entity.EntityHolderReader
  com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T18:00:56.560

似乎您缺少用于编组和解组的 JacksonJsonProvider.class 可以在 jackson-core-asl-1.9.2.jar 中找到

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T20:01:48.093

您可能需要添加一个 ObjectMapper 类。例如，在我的 Jersey-Java 示例应用程序中，当我的客户想要创建一个帐户时，这是在服务器上运行的逻辑：

```
@Path("/makeStormpathAccount")
public class StormpathAccount {

    @POST
    public void createAccount(UserAccount userAccount) throws Exception { 
```

请注意我如何将 (UserAccount userAccount) 作为路由方法的参数。UserAccount 类如下所示：

```
import org.codehaus.jackson.annotate.JsonProperty;

public class UserAccount {

    @JsonProperty
    private String first_name;

    @JsonProperty
    private String last_name;

    @JsonProperty
    private String user_name;

    @JsonProperty
    private String email;

    @JsonProperty
    private String password;

    public String getFirstName() {
        return first_name;
    }

    public String getLastName() {
        return last_name;
    }

    public String getUserName() {
        return user_name;
    }

    public String getEmail() {
        return email;
    }

    public String getPassword() {
        return password;
    }
} 
```

它使用这个 ObjectMapper 类来实际映射数据：

```
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.SerializationConfig;

import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;

@Provider
public class MyObjectMapperProvider implements ContextResolver<ObjectMapper> {

    final ObjectMapper defaultObjectMapper;

    public MyObjectMapperProvider() {
        defaultObjectMapper = createDefaultMapper();
    }

    @Override
    public ObjectMapper getContext(Class<?> type) {
        return defaultObjectMapper;
    }

    private static ObjectMapper createDefaultMapper() {
        final ObjectMapper result = new ObjectMapper();
        result.configure(SerializationConfig.Feature.INDENT_OUTPUT, true);

        return result;
    }

} 
```

将从客户端发送的 JSON 直接转换为 Java！

来源：[https ://github.com/rkazarin/sample-jersey-webapp/tree/master/src/main/java/com/sample/jersey/app](https://github.com/rkazarin/sample-jersey-webapp/tree/master/src/main/java/com/sample/jersey/app)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T16:23:30.993

尝试将[Genson 库](http://owlike.github.io/genson/)添加到您的类路径中。它是一个在 java 和 json 之间进行转换的 java 库。它适用于泽西岛。您只需要将 jar 放入您的类路径中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-22T07:06:07.357

我遇到了同样的问题，在 RequestInfo 中将 @XmlElement 更改为 @XmlRootElement 解决了我的问题。

```
import javax.xml.bind.annotation.XmlRootElement; 
```

# cakephp - CakePHP 路由问题

> ID：13810775
> 
> 赞同：0
> 
> 时间：2012-12-10T22:58:47.880
> 
> 标签：cakephp, routes, cakephp-2.0

我知道这之前已经讨论过，但我没有看到合适的答案....只是凌乱的黑客。所以我会试试。

我有一个多站点（多域）应用程序，其中有一个 CmsPages 控制器来提供内容。我想将主页设置为依赖于域，以便每个域可以有不同的登录页面。

在我的路线中，我已经尝试了所有方法来让主机名作为传递或命名参数通过，我可以从中找到（）正确的 CMS 页面......但是我尝试过的每一种方式，DebugKit 都会显示请求传递并命名为空白。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:46:47.697

您应该能够使用[自定义路由类](http://mark-story.com/posts/view/using-custom-route-classes-in-cakephp)来修改设置给控制器的请求。

检查它是否正确的路线并附加你需要的东西。您只需配置 Router::connect() 以使用[正确的路由类](http://book.cakephp.org/2.0/en/development/routing.html#custom-route-classes)

您还可以使用匹配的特殊[[server]](http://book.cakephp.org/2.0/en/development/routing.html#using-additional-conditions-when-matching-routes)路由器配置`SERVER_NAME`

# c# - 创建具有不同边/边的边框

> ID：13810776
> 
> 赞同：2
> 
> 时间：2012-12-10T22:58:53.423
> 
> 标签：c#, wpf, xaml

![在此处输入图像描述](../Images/74f47785c866617611f60edba1844b5c.png)

如何创建具有不同边缘的**边框。**不必完全相同。只想知道如何为边框设置四种不同的**样式。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T23:01:22.250

我认为没有办法控制每一边的边框样式。但是，您可以将 4 个边框放在彼此顶部（或彼此内部），每个边框具有所需样式的对应边和宽度为 0 的其他边

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:43:11.907

你不能用边框来做，但你可以创建一个具有相同样式的内容控件，比如。

```
<Style x:Key="DiffBorderStyle" TargetType="{x:Type ContentControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ContentControl}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Rectangle 
                        Fill="Black" Width="1" 
                        Grid.RowSpan="3"/>

                        <Rectangle 
                        Fill="Blue" Width="1" 
                        Grid.Column="2"
                        Grid.RowSpan="3"/>

                        <Rectangle 
                        Fill="Red" Height="1" 
                        Grid.ColumnSpan="3"/>

                        <Rectangle 
                        Fill="Black"  Height="1" 
                        Grid.Row="2"
                        Grid.ColumnSpan="3"/>

                        <ContentPresenter Grid.Column="1" Grid.Row="1"/>
                    </Grid>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

您可以对每个矩形进行风格化，也可以使用 Line 代替矩形。

希望能帮助到你..

# java - 是什么导致组件 requestFocus 有时失败？

> ID：13810777
> 
> 赞同：3
> 
> 时间：2012-12-10T22:58:53.377
> 
> 标签：java, swing, focus

我有一个 jDialog，其中包含一些需要关注的字段。

我看到一些奇怪的行为，有时聚焦失败，如果你点击 tab 键，你可以在下面的底层父窗口中看到焦点变化，所以很明显焦点没有转移。

我读了一篇有趣的文章（由 camickr 撰写）：http://tips4java.wordpress.com/2010/03/14/dialog-focus/ [但这](http://tips4java.wordpress.com/2010/03/14/dialog-focus/) 并没有解决问题。

不过，使用该侦听器，我可以轻松添加调试以尝试查看发生了什么......

```
public class RequestFocusListener implements AncestorListener
{
private boolean removeListener;
    protected static org.slf4j.Logger logger = LoggerFactory.getLogger(RequestFocusListener.class);

/*
 *  Convenience constructor. The listener is only used once and then it is
 *  removed from the component.
 */
public RequestFocusListener() {
    this(true);
}

/*
 *  Constructor that controls whether this listen can be used once or
 *  multiple times.
 *
 *  @param removeListener when true this listener is only invoked once
 *                        otherwise it can be invoked multiple times.
 */
public RequestFocusListener(boolean removeListener) {
        logger.debug("creating RequestFocusListener, removeListener = " + removeListener);
    this.removeListener = removeListener;
}

@Override
public void ancestorAdded(AncestorEvent e)
{
        logger.debug("ancestorAdded detected");
        JComponent component = e.getComponent();
        logger.debug("requesting focus");
        boolean success = component.requestFocusInWindow();
        logger.debug("request focus in window result was: " + success);
        if (!success) {
            logger.debug("KeyboardFocusManager says focus failed.\nfocus owner is " + KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner());
            logger.debug("displayable="+component.isDisplayable());
            logger.debug("lightweight="+component.isLightweight());
            logger.debug("enabled="+component.isEnabled());
            logger.debug("focusable="+component.isFocusable());
            logger.debug("showing="+component.isShowing());
            logger.debug("isRequestFocusEnabled="+component.isRequestFocusEnabled());
        } else {
            logger.debug("KeyboardFocusManager says we got focus.  focus owner is " + KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner());
        }
        if (removeListener) {
    component.removeAncestorListener( this );
        }
}

@Override
public void ancestorMoved(AncestorEvent e) {
    }

@Override
public void ancestorRemoved(AncestorEvent e) {
    } 
```

}

然后我将侦听器添加到 JDialog 主面板中的组件中

```
radioButton.addAncestorListener(new RequestFocusAncestorListener()); 
```

我得到的输出显示：

```
displayable=true
lightweight=true
enabled=true
focusable=true
showing=true
isRequestFocusEnabled=true 
```

单步执行代码以查看导致请求失败的原因，我看到它在 Component.requestFocusHelper 上停止：

```
boolean success = peer.requestFocus(this, temporary, focusedWindowChangeAllowed, time, cause); 
```

我读过该组件必须是可显示/可见/可聚焦的）但调试表明没问题。

谁能阐明还有什么可能导致 requestFocus 失败？（并将焦点留在调用父面板中，在本例中为 jtable）

很抱歉没有提供完整的 SSCCE，我试图在一个独立的示例中重现它，但无法让它始终失败。

我感谢任何想法/提示。

* * *

跟进 -

似乎我第一次打开对话框时，它获得了焦点，然后当我关闭并重新打开对话框时，焦点并不总是被设置。

有趣的是，关闭对话框后，如果我在再次打开对话框之前更改父级的焦点，焦点似乎总是被设置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T23:14:36.277

焦点请求失败的可能原因有很多。

首先，Java Docs 的`Component#requestFocus`实际状态

> 由于此方法的焦点行为取决于平台，因此强烈建议开发人员尽可能使用 requestFocusInWindow。

和

> 此组件必须是可显示的、可聚焦的、可见的，并且它的所有祖先（顶级窗口除外）都必须可见才能授予请求

为了使组件变得可聚焦，组件及其所有祖先必须是有效的（可显示的）。我经常看到的常见错误之一是人们使用`requestFocus`或`requestFocusInWindow`创建新窗口时，但在该窗口实际显示在屏幕上之前（`setVisible`不保证该窗口将立即可见，仅在未来某个时间它将变得可见）。

在这种情况下，最好的方法是使用 a`WindowListener`并监视`windowOpened`事件。事件然后，我很想使用 a`SwingUtilities#invokeLater`来确保窗口实际上可以在屏幕上显示。

另一个问题是依赖`isDisplayable`. `true`即使组件所在的窗口不在（显示在屏幕上），此方法也可能返回。

组件在连接到本机屏幕资源时变为可显示的。当它的祖先窗口被打包或可见时，可能会发生这种情况......事实上，我发现很难准确确定何时会发生这种情况。

**更新**

我还应该补充一点，`requestFocus`就是一个“请求”。焦点管理子系统可能会否决请求，因为另一个字段拒绝交出焦点（例如当字段`InputVerifier#shouldYieldFocus`返回时`false`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T22:37:12.573

找到了问题的答案。

MadProgrammer 的分析是正确的，但问题有点无关紧要，从 setVisible 返回的对话框后，线程休眠了 2 秒。

删除此睡眠会使问题停止发生。

现在......至于为什么有 2 秒的延迟（在 setVisible 返回后的父面板中）会很重要，但至少我知道解决方案

# java - Java - 梅森素数分配

> ID：13810784
> 
> 赞同：4
> 
> 时间：2012-12-10T22:59:18.747
> 
> 标签：java

任务是找到 p <= 31 的所有梅森素数并显示在表格中：

```
p     2^p-1
---   ---- 
2      3

3      7

5      31

... 
```

到目前为止，我的结果是这段代码：

```
public class PE28MersennePrimeVer2 {

    public static void main(String[] args) {

        System.out.println("p\t2^p - 1");

        for (int number = 2; number <= 31; number++) {
            if (isPrime(number)) {
                int mersennePrime = (int)(Math.pow(2, number)) - 1;
                if (isPrime(mersennePrime)) {
                    System.out.print(number + "\t" + mersennePrime + "\n");
                }
            }
        }
    }

    public static boolean isPrime(int number) {

        if ((number == 1) || (number == 2)) {
            return true;
        }

        for (int i = 2; i <= number/2; i++) {
            if (number % i == 0) {
                return false;
            }
        }

        return true;
    }
} 
```

p 的输出最高为 19，永远不会达到 31。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:04:16.440

问题是

```
(int)Math.pow(2,31) - 1; 
```

计算结果为 2147483646 而不是 2147483647。

处理整数时不要使用浮点数学。在Java中，使用`(1 << number) - 1`作品（`1 << 31`由于溢出，在C中将是未定义的行为，但它是在Java中定义的）。

如果您不能使用位移，您可以编写自己的整数幂函数。对于正在考虑的小指数，直截了当

```
long pow(long base, long exponent) {
    long result = 1;
    while(exponent > 0) {
        result *= base;
        --exponent;
    }
} 
```

已经足够好了（注意：我使用`long`了代替`int`来避免溢出；虽然溢出行为是在 Java 中定义的，但避免溢出更干净）。

接着就，随即，

```
mersennePrime = (int)(pow(2,number) - 1); 
```

完成它的工作（尽管您应该考虑`long`也将其用于其他变量，而不仅仅是用于中间`pow`结果）。

对于较大的指数（尽管这仅与使用`BigInteger`s 相关 - 在标准库中有自己的实现 - 或模幂），通过重复平方取幂

```
long pow(long base, long exponent) {
    long aux = 1;
    while(exponent > 0) {
        if (exponent % 2 == 1) {
            aux *= base;
        }
        base *= base;
        exponent /= 2;
    }
    return aux;
} 
```

会带来很大的性能优势。

# web-applications - 为什么 org.osgi.foundation-1.0.0.jar 中有一个看似相同的 JDK 1.5 核心运行时副本？

> ID：13810796
> 
> 赞同：0
> 
> 时间：2012-12-10T23:01:00.300
> 
> 标签：web-applications, jboss, osgi, apache-felix

我正在维护一个依赖于 OSGi 的 Web 应用程序，并且 Maven 拉入一个名为的 jar，该 jar`org.osgi-foundation-1.0.0.jar`似乎包含与 JDK 核心运行时相同的类，例如：

```
java.util.\*;
java.io.\*; 
```

等等等等。

这似乎很奇怪，我不得不问为什么这是必要的。此外，我的 Web 应用程序无法在 JBoss 6 上部署，因为这些是第三方库的“非法包名称”。

目的是`org.osgi-foundation-1.0.0.jar`什么？有必要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:35:53.103

`org.osgi.foundation`是一个包含 Foundation 执行环境中所有类的包（参见 OSGi 纲要规范的第 999 节）。

简而言之，执行环境是一组应该从框架中可用的类。它们被分组在配置文件中，例如`JavaME`或`OSGi/Minimum`。Bundles 可以在它们的清单中表达它们对给定执行环境的使用，并确保它们只会在例如提供 AWT 的平台上启动。

您找到的`org.osgi.foundation`包代表这些环境之一。它只包含存根类，因此只能在编译期间使用。

因此，如果 Maven 将包作为编译依赖项引入，那很好，但它永远不应该与您的应用程序一起部署。

# objective-c - 有水平的 UIRefreshControl 吗？

> ID：13810800
> 
> 赞同：6
> 
> 时间：2012-12-10T23:01:31.440
> 
> 标签：objective-c, uiscrollview, ios6, uikit, uirefreshcontrol

您可以通过将其添加`UIRefreshControl`到[集合的子视图](https://stackoverflow.com/a/12502450/458193)`UICollectionView`来添加（或任何其他`UIScrollView`）：

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
[refreshControl addTarget:self action:@selector(handleRefresh:) forControlEvents:UIControlEventValueChanged];
[self.collectionView addSubview:refreshControl]; 
```

当集合视图布局具有[`UICollectionViewScrollDirectionHorizontal`](http://developer.apple.com/library/ios/#Documentation/UIKit/Reference/UICollectionViewFlowLayout_class/Reference/Reference.html#//apple_ref/doc/c_ref/UICollectionViewScrollDirectionHorizontal).

我尝试覆盖`layoutSubviews`将刷新控件放在左侧，但它不会以这种方式跟踪滚动进度。我可以欺骗它使用水平布局吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T04:51:37.173

我找不到任何现有的解决方案，所以我扩展[`ODRefreshControl`](https://github.com/Sephiroth87/ODRefreshControl)了水平布局支持：

![在此处输入图像描述](../Images/16fbe8668c17a66470c3f93232b3cf51.png)

我需要 MonoTouch (C#) 中的解决方案，所以我从源代码移植 ODRefreshControl 开始，然后[修补它以](https://github.com/stampsy/MonoTouch.ODRefreshControl/blob/master/ODRefreshControl.cs)使用水平布局。

完整的 C# 源代码在[这里](https://github.com/stampsy/MonoTouch.ODRefreshControl/blob/master/ODRefreshControl.cs)，应该可以直接将其移植回 Objective C。
我所做的只是在这里和那里添加一个实用函数和一些条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T06:14:22.260

您可以通过实现 UIScrollViewDelegate 方法来实现这一点

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
     CGPoint offset = scrollView.contentOffset;
     CGRect bounds = scrollView.bounds;
     CGSize size = scrollView.contentSize;
     UIEdgeInsets inset = scrollView.contentInset;
     float y = offset.x + bounds.size.width - inset.right;
     float h = size.width;

    float reload_distance = 75; //distance for which you want to load more
    if(y > h + reload_distance) {
       // write your code getting the more data
       NSLog(@"load more rows");

    }
} 
```

# oracle - ORA-03113 的解决方法：使用 CAST MULTISET 的通信通道上的文件结尾

> ID：13810802
> 
> 赞同：3
> 
> 时间：2012-12-10T23:01:32.463
> 
> 标签：oracle, function, exception, plsql, multiset

下面对 TEST_FUNCTION 的调用失败，并显示“ORA-03113：通信通道上的文件结尾”。TEST_FUNCTION2 中提供了一种解决方法。我将代码归结为我的实际功能要复杂得多。在 Oracle 11G 上测试。任何人都知道为什么第一个功能会失败？

```
CREATE OR REPLACE TYPE "EMPLOYEE" AS OBJECT
(
    employee_id  NUMBER(38),
    hire_date    DATE
);

CREATE OR REPLACE TYPE "EMPLOYEE_TABLE" AS TABLE OF EMPLOYEE;

CREATE OR REPLACE FUNCTION TEST_FUNCTION RETURN EMPLOYEE_TABLE IS

table1        EMPLOYEE_TABLE;
table2        EMPLOYEE_TABLE;
return_table  EMPLOYEE_TABLE;
BEGIN

SELECT CAST(MULTISET
(
    SELECT user_id, created FROM all_users
    WHERE LOWER(username) < 'm'
) AS EMPLOYEE_TABLE)
INTO table1 FROM dual;

SELECT CAST(MULTISET
(
    SELECT user_id, created FROM all_users
    WHERE LOWER(username) >= 'm'
) AS EMPLOYEE_TABLE)
INTO table2 FROM dual;

SELECT CAST(MULTISET
(    
    SELECT employee_id, hire_date
      FROM TABLE(table1)
    UNION
    SELECT employee_id, hire_date
      FROM TABLE(table2)
) AS EMPLOYEE_TABLE)
INTO return_table FROM dual;

RETURN return_table;

END TEST_FUNCTION;

CREATE OR REPLACE FUNCTION TEST_FUNCTION2 RETURN EMPLOYEE_TABLE IS

table1        EMPLOYEE_TABLE;
table2        EMPLOYEE_TABLE;
return_table  EMPLOYEE_TABLE;
BEGIN

SELECT CAST(MULTISET
(
    SELECT user_id, created FROM all_users
    WHERE LOWER(username) < 'm'
) AS EMPLOYEE_TABLE)
INTO table1 FROM dual;

SELECT CAST(MULTISET
(
    SELECT user_id, created FROM all_users
    WHERE LOWER(username) >= 'm'
) AS EMPLOYEE_TABLE)
INTO table2 FROM dual;

WITH combined AS
(
    SELECT employee_id, hire_date
      FROM TABLE(table1)
    UNION
    SELECT employee_id, hire_date
      FROM TABLE(table2)
)
SELECT CAST(MULTISET
(
    SELECT * FROM combined
) AS EMPLOYEE_TABLE)
INTO return_table FROM dual;

RETURN return_table;

END TEST_FUNCTION2;

SELECT * FROM TABLE (TEST_FUNCTION()); -- Throws exception ORA-03113.

SELECT * FROM TABLE (TEST_FUNCTION2()); -- Works 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T13:47:03.960

不确定您的特定示例，但这是 Oracle 版本 11.2.0.1.0 中的一个已知错误它与表达式中嵌套查询的级别有关。我遇到了类似的错误，并且相同的查询在 11.2.0.2.0 中运行良好（我相信 11gR2 补丁集 2）。

[https://forums.oracle.com/forums/thread.jspa?messageID=9996243](https://forums.oracle.com/forums/thread.jspa?messageID=9996243)

# excel - Excel：检查 IF 语句中的错误

> ID：13810805
> 
> 赞同：2
> 
> 时间：2012-12-10T23:01:38.930
> 
> 标签：excel

我正在尝试编写一个 excel if 语句。我不熟悉使用 Excel 具有的所有额外功能。我正在使用一个名为`importXML()`. 我正在尝试检查我正在使用的函数是否生成“#VALUE！” 错误如下：

```
if(
   importXML(B1,C1)!="#VALUE!" //check if no error generated, 
   importXML(B1,C1)//if no error is generated, use these cells in the function
   importXML(A1,C1)//else use these cells in the function
) 
```

这可能吗？我是否正确使用 excels if 语句来检查错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:08:20.627

试试这个：

```
=IF(ISERROR(importXML(B1,C1)),value_if_true,value_if_false) 
```

[ISERROR 函数](http://www.techonthenet.com/excel/formulas/iserror.php)

# ruby-on-rails - 使用渲染后表单不起作用

> ID：13810808
> 
> 赞同：13
> 
> 时间：2012-12-10T23:02:10.853
> 
> 标签：ruby-on-rails, ruby, activeadmin

我尝试在我的 activeAdmin 表单方法中使用渲染方法，但是在代码中插入渲染后，它停止工作。

```
form do |f|
    f.inputs I18n.t('sale_header') do
      f.input :client
      f.input :room
    end

    f.inputs I18n.t('sale_items')  do
      render :partial => "form_sale"
    end

    f.inputs I18n.t('totalization') do
      f.input :sub_total, :input_html => { :disabled => :true }
      f.input :discount
      f.input :total_value, :input_html => { :disabled => :true }
    end

    f.buttons
end 
```

插入 render 方法后，屏幕上只显示 form_sale 内容。

有什么帮助吗？谢谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T00:20:19.913

根据[文档](http://activeadmin.info/docs/5-forms.html)，在 active_admin 中自定义表单的正确方法是：

```
ActiveAdmin.register Post do
  form :partial => "form"
end 
```

然后在您的部分“_form.html.erb”中，您应该使用 formtastic [DSL](http://github.com/justinfrench/formtastic)，如下所示：

```
 <%= semantic_form_for [:admin, @post] do |f| %>
   <%= f.inputs :title, :body %>
   <%= f.buttons :commit %>
 <% end %> 
```

网页上写得很清楚：

```
If you require a more custom form than can be provided through the DSL, you can pass 
a partial in to render the form yourself. 
```

这意味着，active_admin 的 DSL 有一些轻微的限制。

我所有的 'render' 和 'form :partial' 实验都没有结果。如果您想使用 partial ，它应该替换所有 form 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T11:20:36.647

我在很多情况下都使用 form :partial => "form" ，当您需要自定义表单时，这绝对是要走的路。

这个答案在这里不能被接受为正确的答案，但有时我不想制作部分 ERB，我只想向几乎完美的 AA 生成表单添加一些内容。

对于那些我使用这个技巧的时候，我使用这个初始化器向 AA FormBuilder 添加了一个内容方法：

```
ActiveAdmin::FormBuilder.class_eval do
  def content
    form_buffers.last << with_new_form_buffer do
        yield
    end
  end
end 
```

然后我可以在我的 AA 表单块中使用 f.content() ：

```
 form do |f|
    f.content do content_tag(:p, "Hello world!") end
      f.inputs do
        f.input :foo
        f.input :bar
      end
      f.content do content_tag(:p, "Hello world!") end
      f.buttons
    end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:17:41.747

当您调用`render`它时，它实际上会呈现整个响应。假设您正在尝试嵌套它，请尝试`render_to_string`. 尽管我不完全确定您在 form_sale 中拥有什么，以及这是否是您在该区块中想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T10:33:58.420

库马拉是对的。尽管如此，活动管理员〜formtastic dsl桥的monkeypatches是可能的。对我有用的是在 config/initializers/active_admin.rb 文件中打开 ActiveAdmin::Formbuilder 类。在那里我补充说：

```
class ActiveAdmin::FormBuilder
  include ActionView::Helpers::TagHelper
  def custom_capture_text content
    form_buffers.last << template.content_tag(:li,content.html_safe)
  end 
```

结尾

然后你可以写

```
f.inputs I18n.t('sale_items')  do
  f.custom_capture_text(f.template.render(:partial => "form_sale"))
end 
```

这在 activeadmin 0.3 到 0.5 中有效。但要小心。ActiveAdmin 升级可能会破坏它。祝你好运。

# javascript - 任何客户端 JavaScript 框架都可以与 Node.js+Express.js+socket.io.js 很好地集成吗？

> ID：13810810
> 
> 赞同：10
> 
> 时间：2012-12-10T23:02:28.253
> 
> 标签：javascript, node.js, backbone.js, express, ember.js

我正在后端使用 Node.js+Express.js+socket.io.js 构建一个 webapp。

是否有任何流行的前端框架（Agility、Angular、Backbone、Closure、Dojo、Ember、GWT、jQuery、Knockback、Knockout、Spine、YUI 等）与“实时”应用程序的后端很好地集成？

我希望我的应用程序具有非常“实时”的感觉。具体来说，当用户提交表单时，我希望使用 Web 套接字将信息发送到后端进行验证，并且（如果验证通过）在数据库中更新。然后，服务器端将使用 Web 套接字发送确认数据已保存或一些错误列表。我将使用服务器的响应来使用 JavaScript 更新页面。

我知道所有这些都可以使用任何列出的框架来完成。我对特定框架的特性感兴趣，这些特性将帮助框架与基于节点的后端更好地集成，而不是其他框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T06:47:32.590

Ember 也非常适合。

请参阅 Charles Jolley 的文章[`convoy`](https://github.com/charlesjolley/convoy)，这对客户端资产集成非常有帮助。

NPM 的 Ember 包还附带了一个示例应用程序，这可能是一个好的开始（基于`convoy`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:14:18.713

Depends on the app and your use-case. I tend to generate html server side, so I still get the benefits of seo -- backbone and other js-rich frameworks on the client side have the unfortunate side effect of not being crawlable by Googlebot.

If you require authentication to use your app, then backbone or another one of the frameworks showcased at TODOMVC can be a good solution.

Typically when using socket.io on the server side, you would use it on the client side as well.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T22:29:28.280

我认为 angular.js 最适合实时应用程序。

*   数据绑定和依赖注入
*   测试工具
*   轻松休息

这是有关框架的[一些信息。](http://net.tutsplus.com/tutorials/javascript-ajax/3-reasons-to-choose-angularjs-for-your-next-project/)

# sql - 在 Postgresql 中创建一个不返回复合值的函数

> ID：13810812
> 
> 赞同：4
> 
> 时间：2012-12-10T23:02:41.357
> 
> 标签：sql, function, postgresql

我正在学习如何在 Postgresql 中编写函数。我定义了一个名为的函数`_tmp_myfunction()`，它接受`id`并返回一个表（我还定义了一个名为的表对象类型`_tmp_mytable`）

```
-- create object type to be returned
CREATE TYPE _tmp_mytable AS (
    id      integer, 
    cost    double precision
    );

-- create function which returns query
CREATE OR REPLACE FUNCTION _tmp_myfunction(
    id    integer
    )
RETURNS SETOF _tmp_mytable AS $$
BEGIN  
  RETURN QUERY 
  SELECT
    sales.gid,
    cost  
  FROM 
    sales
  WHERE
    id = sales.gid;
  END;
$$ LANGUAGE plpgsql; 
```

当我使用一个`id`并使用以下方法调用它时，这很好用：

```
SELECT * FROM _tmp_myfunction(402); 
```

![在此处输入图像描述](../Images/c58ab91e696ea0646c3fdbd704873646.png)

我想做的是调用它，但使用一列值而不是一个值。但是，如果我使用以下方法，我最终会将表的所有值放在一列中，用逗号分隔：

```
-- call function using all values in a column
SELECT _tmp_myfunction(t.id)
FROM transactions as t; 
```

![在此处输入图像描述](../Images/0ecf7a500dc304dc199ff613ac3814df.png)

`SELECT _tmp_myfunction(402);`我知道如果我使用而不是，我可以获得相同的结果，`SELECT * FROM _tmp_myfunction(402);`但我不知道如何构造我的函数，以便在传入一列值时不会得到复合值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:23:04.973

你可以这样写：

```
SELECT (t2.function_row).id,
       (t2.function_row).cost
FROM (SELECT _tmp_myfunction(t.id) as function_row
     FROM transactions  t ) t2; 
```

它将为您提供字段，而不是复合行。

# mongodb - 从 mongodb 中的预聚合报告中获取平均值

> ID：13810813
> 
> 赞同：0
> 
> 时间：2012-12-10T23:02:46.180
> 
> 标签：mongodb

我有一个预聚合指标的数据库，类似于此用例中概述的指标：http: [//docs.mongodb.org/manual/use-cases/pre-aggregated-reports/](http://docs.mongodb.org/manual/use-cases/pre-aggregated-reports/)

我有一个每日集合，其中包含小时和分钟指标的子文档，以及它所代表的当天午夜的“metadata.date”条目。我还有一个月度收藏，每天都有一个日子文档。

如果我想获得过去八天左右的指标平均值，我该如何使用聚合框架来做到这一点？聚合框架是否不是正确的工具，因为它已经预先聚合了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:31:39.397

我最终为此使用了 map/reduce：

地图：

```
var map = function(){
          for(x in this.hour){
              var key = this.metadata.port_name;
              var value = {
                  count: 1,
                  value: this.hour[x]
              }
              emit(key, value);
          }
        }; 
```

减少：

```
var reduce = function(key, value){
          reducedValue = { count: 0, value: 0 };
          for(var i = 0; i < value.length; i++){
              reducedValue.count += value[i].count;
              reducedValue.value += value[i].value;
          }

          return reducedValue;
        }; 
```

敲定：

```
var finalize = function(key, reducedValue){
        reducedValue.average = reducedValue.value/reducedValue.count;

        return reducedValue;
      }; 
```

其实很简单。

# regression - 套索和岭估计器

> ID：13810814
> 
> 赞同：2
> 
> 时间：2012-12-10T23:03:07.270
> 
> 标签：regression, lasso-regression

我有一个包含大量数据的 txt 文件。如何使用套索或岭估计器来拟合回归方程？

我尽可能使用：gridge

但是，我不确定 lambda 部分在做什么。我在一个网站上找到了它，但不知道该放什么值。

而且我不知道如何解释输出：修改后的 HKB 估计是 5.465433 修改的 L-W 估计是 7.6435664 GCV 的最小值在 3.24

我应该如何使用该信息拟合回归方程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:31:44.353

Lambda 是惩罚的强度，[看这个](http://www.utstat.utoronto.ca/~radford/sta414.S12/week2.pdf)可以更好地理解 lambda 的效果。通常，您通过试错法或使用交叉验证过程来选择此值。

Lasso 和 Ridge 估计都通过限制要估计的参数值来帮助减少模型过度拟合。它们之间的主要区别在于惩罚函数的形状。

Lasso 可以产生一个稀疏模型，其中一些参数可以完全**为零**，而 Ridge 可以产生具有非常小的值但不完全为零的参数。

# c++ - 在 C++ 中嵌入 python 函数

> ID：13810815
> 
> 赞同：4
> 
> 时间：2012-12-10T23:03:14.080
> 
> 标签：c++, python, cython

我正在尝试使用 Cython 从 python 生成 c 代码，但名称修饰似乎存在一些问题。我首先生成将代码从 python 转换为 c 代码，然后使用 gcc 将代码编译为 .so 。我想使用 cython 而不是 C/python API 的原因是因为我稍后将在更复杂的类上使用它，我想稍后成为一个库以提高速度等（我很难找到去的人从 python 到 C++，因为它通常是相反的）。下面是我必须尝试执行代码的所有代码（但失败）。任何输入将不胜感激。谢谢！

```
#hello.pyx
def say_hello():
    print "Hello World!"

#generate the c code
cython -a hello.pyx

#creates the shared library
gcc -shared -pthread -fPIC -fwrapv -O2 -Wall -fno-strict-aliasing -I/usr/include/python2.6 -o libhello.so hello.c

//temp.cpp
#include <iostream>
extern "C" {
void say_hello();
};

using namespace std;

int main(){
    say_hello();
    return 1;
};

#attempt to compile (this is where it fails)
g++ -I/usr/include/python2.6/ -lpython2.6 -L./ -lhello temp.cpp -o temp 
```

这是错误消息：

```
/tmp/ccpKHOMl.o: In function main: temp.cpp:(.text+0x5): undefined reference to say_hello' /tmp/ccpKHOMl.o: 
In function __static_initialization_and_destruction_0(int, int): 
  temp.cpp:(.text+0x33): undefined reference to std::ios_base::Init::Init()  
  temp.cpp:(.text+0x38): undefined reference to std::ios_base::Init::~Init() 
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:37:21.797

您将无法以这种方式获得所需的互操作性。如果您打开并检查 hello.c，您将不会在其中的任何地方找到“static int say_hello”。Cython 旨在让 Python 使用 C 库，而不是让 C 库使用 python。

您可以在文档中查看here，但不幸的是，这种支持仍然适用于“负责”的python解释器，而您正在寻找的是相反的方式。

[http://docs.python.org/release/2.5.4/ext/callingPython.html](http://docs.python.org/release/2.5.4/ext/callingPython.html)

还有关于“在另一个应用程序中嵌入 Python”的入门

[http://docs.python.org/2/extending/embedding.html](http://docs.python.org/2/extending/embedding.html)

我不知道您的要求是什么，但在某些情况下，您可以成功地将数据写入文件，调用 Python 程序对其进行处理，然后从另一个文件中解析结果。它比将内容保存在内存中有点难看和慢，但在许多情况下它是完全可行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:48:05.297

我遇到了类似的问题。这不是完全相同的问题，但可能是相关的。

我在这里发布了我的问题：[Propagating exceptions through dlsym cython](https://stackoverflow.com/questions/14280421/propagating-exceptions-through-dlsym-cython)。您感兴趣的部分是“public”关键字：

```
#hello.pyx
cdef public say_hello():
    print "Hello World!" 
```

这将创建一个这样的函数

```
# (in the generated C file hello.c)
__PYX_EXTERN_C DL_IMPORT(...) say_hello(...); 
```

编辑：我添加了一个工作 temp.cpp：

```
#include "Python.h"
#include <iostream>

#include "hello.h"

using namespace std;

int main(){
    Py_Initialize();
    inithello();
    say_hello();
    Py_Finalize();
    return 1;
}; 
```

编译通过以下方式完成：

```
g++ -I/usr/include/python2.6/ -lpython2.6 -L./ -lhello temp.cpp -c -o temp.o
g++ temp.o -L. -lhello -lpython2.6 -o temp 
```

（有趣的是，它不会一步链接，抱怨未定义的引用。）这将在执行时成功打印“Hello world”。

注意： Py_Initialize() 和 inithello() 是必需的，否则你的代码会崩溃。如果不包括“Python.h”和没有初始化部分（即只使用你提到的 extern "C" { void sayhello(); }），我就无法让它工作。链接失败。正如我在问题中所展示的，解决方案可以是使用 dlsym 并动态加载您的函数。但可能存在另一种解决方案，您尝试成功导出此方法（在 hello.h 标头中）： __PYX_EXTERN_C DL_IMPORT(int) say_hello(void);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:57:31.577

如果您有 CMake，我建议您查看我的项目，在那里我使用 CMake 生成和链接基于 Cython 的文件

[https://github.com/CarloNicolini/cymake](https://github.com/CarloNicolini/cymake)

您可能需要编辑一些 CMakeLists.txt 才能找到正确的 cython 安装

# jquery - jquery validate：突出显示两个元素之间共享的标签

> ID：13810817
> 
> 赞同：0
> 
> 时间：2012-12-10T23:03:34.043
> 
> 标签：jquery, validation, jquery-validate

我有两个共享标签的元素。

![由 state 和 zip 字段共享的标签](../Images/6c5728f482a0ea33ec7f29e98eeb09de.png)

我需要在其上添加/删除一个 CSS 类，因为这两个元素正在被验证。如果一个或两个无效 - 标签需要变成红色。如果两者都有效 - 标签被标记为有效。

在没有进入无限循环的情况下无法弄清楚如何做到这一点，其中一个元素触发另一个元素的验证，而后者又触发第一个元素的验证，等等。我现在只能考虑使用突出显示/取消突出显示方法。

**编辑：**这是一个[jsfiddle](http://jsfiddle.net/dalbaeb/gkTYG/7/)玩。

```
$("#my-profile-form").validate({
    errorContainer: "#errorProfile",
    highlight: function(el, errorClass, validClass) {
        var $el = $(el);
        if($el.attr('name') == 'state'){
            $el.addClass(errorClass).removeClass(validClass);
            $el.parents('fieldset').addClass('error');
        } else if ($el.attr('name') == 'zip') {
            $el.addClass(errorClass).removeClass(validClass);
        } else {
            $el.parents('fieldset').addClass(errorClass);
        }
    },
    unhighlight: function(el, errorClass, validClass) {
        var $el = $(el);

        if($el.attr('name') == 'state'){
            $el.removeClass(errorClass).addClass(validClass);
        } else if($el.attr('name') == 'zip') {
            $el.removeClass(errorClass).addClass(validClass);
        } else {
            $el.parents('fieldset').removeClass(errorClass);
        }
    },
    errorPlacement: function(error,element) {
        return true;
    },
    ignore: "", // needed to validate drop-downs in IE
    rules: {
        zip: {
            postalcode: true,
            required: true
        }
    },
    messages: {
        zip: {
            postalcode: "&nbsp;Please specify a valid zip code.",
            required: "&nbsp;The zip field is required."
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:40:39.467

关于什么

```
...
if($el.attr('name') == 'state' || $el.attr('name') == 'zip'){
    $el.addClass(errorClass).removeClass(validClass);
    $el.siblings('label:not([generated])').AddErrorClassIfNotAlreadyPresent();
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:40:50.443

最终没有使用验证器来解决问题。我将一个“更改”处理程序附加到两个元素并在那里完成所有工作。

```
var v_profile = $("#my-profile-form").data('validator');
$("select.state, input.zip").on('change', { errorClass: v_profile.settings.errorClass, validClass: v_profile.settings.validClass }, function(ev){
    var validator = $(this).parents('form').data('validator');
    var res1 = validator.element( "select.state" );
    var res2 = validator.element( "input.zip" );
    if(res1 && res2){ 
        $(this).parents('fieldset').addClass(ev.data.validClass).removeClass(ev.data.errorClass); 
    } else { 
        $(this).parents('fieldset').addClass(ev.data.errorClass).removeClass(ev.data.validClass); 
    }
}); 
```

# android - Android：显示一个整数

> ID：13810821
> 
> 赞同：1
> 
> 时间：2012-12-10T23:03:50.983
> 
> 标签：android, textview

当我注释掉计数器并使用消息运行它时，它工作正常。但它不会显示整数。在我的研究中，我发现显示字符串的示例代码与显示整数的示例代码之间没有区别。也许我可以在某个地方查看指南？或者一个简单的答案也将不胜感激。谢谢。

```
package com.evorlor.testcode;

import android.app.Activity;
import android.os.Bundle;
import android.text.method.ScrollingMovementMethod;
import android.widget.TextView;

public class SupWorld extends Activity {

    private String message;
    private int counter;

    /**
     * @param args
     */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // TODO Auto-generated method stub

        message = "Sup world.";
        counter = 123;

        TextView text = new TextView(this);

        text.setTextSize(100);
        text.setMovementMethod(new ScrollingMovementMethod());
        // text.setText(message);
        text.setText(counter);

        setContentView(text);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:07:40.757

这是正确的做法。

```
text.setText(Integer.toString(counter)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:04:43.783

采用

```
text.setText(""+counter); 
```

代替

```
text.setText(counter); 
```

在 TextView 中显示整数值，因为[TextView.setText(CharSequence text)](http://developer.android.com/reference/android/widget/TextView.html)仅接受字符串以显示不显示任何其他数据类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-03T06:25:09.890

我有同样的问题。最后，这两个都工作得很好。

```
text.setText("Remaining Attempts: " + String.valueOf(counter));
text.setText("Remaining Attempts: " + counter); 
```

我的问题是文本框不够长，计数器落在隐藏的第二行。

分享以防其他人犯我犯的同样错误。

# windows-8 - 在 Windows 8 中显示禁用磁贴的推荐指南是什么？

> ID：13810822
> 
> 赞同：0
> 
> 时间：2012-12-10T23:03:56.943
> 
> 标签：windows-8, microsoft-metro

在 Metro 应用程序中，我想将一些磁贴显示为禁用。也就是说，用户可以看到它们，但应该能够区分特定部分已禁用，并且仅对订阅用户启用或在满足某些其他条件时启用。

设计这种东西的指导方针是什么？我应该使用浅灰色的瓷砖来给人一种它被禁用的印象吗？

当我搜索这个时，大多数讨论都是围绕“如何禁用动态磁贴”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:21:08.343

对此的答案可能在很大程度上是主观的，但这是我的 0.02 美元，您可能想要考虑什么。

AFAIK，就 Windows 8 开始屏幕而言，没有禁用磁贴之类的东西。也许最接近的模拟是您通过试用获得的应用程序，该试用现已结束。在这种情况下，磁贴将显示一个 X 字形，但您仍然可以启动它。“启动”虽然会将您带到 Windows 商店页面以购买应用程序 - 当前状态的唯一合乎逻辑的操作。

如果您将其用作您的模式，那么您将与“开始屏幕”体验保持一致，但我认为您不一定必须如此。正如您所提到的，人们可能更习惯于看到一个表示“已禁用”的柔和灰色瓷砖。够了吗？它是否通过了可访问性指南（仅区分颜色？） - 您可能需要更多，例如字形、不同的轮廓等。

作为用户，我倾向于希望磁贴总是做一些事情，甚至可能非常微妙，以表明它是活跃的（或可能是）——也许只是一个微小的动画，以便用户得到元素被击中的反馈，但不完全可用在当前情况下。此外，至少作为应用程序的新用户，我想知道为什么该项目不可用以及如何使其可用。对于开始屏幕，不可用的磁贴将您带到商店购买应用程序；在您的情况下，您可以提供哪些信息来告知用户该磁贴被禁用的原因？您也许可以做一个轻量级的弹出窗口来解释原因（甚至悬停文本），并且可能包括一个选项“不再显示”，这样有经验的用户就不会生气。

这听起来像是在潜在用户群中进行可用性和 A/B 测试的绝佳场景。

另一个想法浮现在脑海中。查看商店中提供免费试用的一些应用程序，看看它们是如何“禁用”优质内容的。他们可能会也可能不会使用磁贴之类的东西，但是您会从其他开发人员如何处理类似场景的角度获得不同的看法，并且您可能会发现一种或另一种更符合您的目标的方法。

# python - Python Google App Engine 图片对象

> ID：13810823
> 
> 赞同：1
> 
> 时间：2012-12-10T23:03:57.733
> 
> 标签：python, google-app-engine, blobstore

使用 Python 图像库 PIL 和 Google App Engine Blobstore...

这：

```
img = images.Image(blob_key=image)
logging.info(img.size)
self.response.headers['Content-Type'] = 'image/jpeg'
self.response.out.write(img) 
```

有属性错误：

```
AttributeError: 'Image' object has no attribute 'size' 
```

那么来自谷歌应用引擎的图像实例没有大小？

那么这是如何工作的：

```
img = images.Image(blob_key=image)
img.resize(width, height)
img.im_feeling_lucky()
thumbnail = img.execute_transforms(output_encoding=images.JPEG)
self.response.headers['Content-Type'] = 'image/jpeg'
self.response.out.write(thumbnail) 
```

我错过了什么？

编辑：

修复是使用 get_serving_url而不是使用@voscausa 建议的**我的图像服务器。**由于我的对象是由 jinja2 模板解析的，因此不可能通过 jinja2 创建 Image 对象。所以最终的解决方案如下：

```
class Mandelbrot(db.Model):
  image = blobstore.BlobReferenceProperty()

@property
def image_url(self):
  return images.get_serving_url(self.image) 
```

这样我可以将图像 url 解析到我的页面，如：

```
<img src=
{% if mandelbrot.image %}
  "{{ mandelbrot.image_url }}" 
{% else %} 
  "./assets/img/preloader.gif"
{% endif %}
/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:46:55.063

我不熟悉 PIL，因为我使用 Google 的另一种解决方案来提供图像和调整图像大小。Google 可以使用 Google 高性能图像服务为您提供图像。这表示：

*   您必须使用以下命令为 blobstore 中的图像创建一次 serving_url：get_serving_url
*   您可以更改提供的图像的大小。原版没变
*   Google 将为您提供几乎免费的图片。您不需要处理程序。您只需支付带宽

这是一个例子。您可以更改 =s0，以更改大小。s0 返回原始大小。

```
https://lh6.ggpht.com/1HjICy6ju1e2GIg83L0qdliUBmPHUgKV8FP3QGK8Qf2pHVBfwkpO_V38ifAPm-9m20q_3ueZzdRCYQNyDE3pmA695iaLunjE=s0 
```

get_serving_url 文档：[https ://developers.google.com/appengine/docs/python/images/functions](https://developers.google.com/appengine/docs/python/images/functions)

代码 ：

```
class Dynamic(db.Model):          # key : name
    name = db.StringProperty() 
    blob_ref = blobstore.BlobReferenceProperty()
    serving_url = db.LinkProperty()

dyn= Dynamic.get_by_key_name(key_name)
try :       # get url with size = 0
    dyn.serving_url = images.get_serving_url(dyn.blob_ref, size=None, secure_url=True)
except DeadlineExceededError : 
    try :             # sometimes this request fails, retry. This always works fine
        dyn.serving_url = images.get_serving_url(dyn.blob_ref, size=None, secure_url=True)
    except DeadlineExceededError :
        logging.error('Image API get_serving_url deadline error after retry' %(dyn.key().name()))                        
        return None
    dyn.put() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:06:23.107

看起来 PIL 的 GAE 版本[没有实现`.size`](https://developers.google.com/appengine/docs/python/images/imageclass). 改用这样的东西：

```
logging.info((img.width, img.height)) 
```

# ruby-on-rails - 处理混合数字——在模型中？

> ID：13810830
> 
> 赞同：0
> 
> 时间：2012-12-10T23:04:17.407
> 
> 标签：ruby-on-rails, ruby

我有一个包含大量字段的表单，这些字段以小数形式存储在我的数据库中。

但是，我希望用户能够输入分数，特别是混合数字（例如 38 1/2）

[这个答案](https://stackoverflow.com/questions/8515470/ruby-how-can-i-convert-a-mixed-number-to-float)为将混合数字转换为分数提供了一个很好的解决方案，我已经对其进行了修改并将其放入我的模型中的一个函数中：

```
def to_dec
  self.chest = self.chest.split.map { |r| Rational(r) }.inject(:+).to_f
end 
```

我已经尝试用`validate :to_dec`and来调用它`before_save :to_dec`。但是，这些都不起作用。

我知道为什么，但不知道如何解决它。

通过使用`puts self.chest`，在我有机会调整如何完成之前，我可以知道该值正在转换为数字。在我的表单中输入“10 1/2”并保存，`puts self.chest`即使函数只是：

```
def to_dec
  puts self.chest
end 
```

另外，`puts '38 1/2'.split.map { |r| Rational(r) }.inject(:+).to_d`给了我 38.5，所以我知道问题不在于转换。

我已将视图输入类型从数字更改为字符串，但我的模型中似乎仍然有一个数字。

我被困住了。

此外，其他一些字段也需要支持混合数字——我想以某种方式将其抽象出来，这样我就不需要为每个值编写不同的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:30:04.047

原因是 ActiveRecord 在定义模型属性时会查看您的数据库模式。这就是所有属性出现在模型类上的方式，而无需像在普通的旧 Ruby 对象上那样使用`attr_accessor :chest`（或`def chest`和）手动定义它们。`def chest=`

当它这样做时，ActiveRecord 还会查看列类型，并在分配属性时应用类型转换。因此，因为您的`chest`列是小数，它会将您给它的任何字符串转换为浮点数。在这样做的过程中，它将获取可以转换的字符串的第一位，并丢弃其余的，这就是你得到`38.0`.

您可以通过多种方式解决此问题 - 您可以将数字作为字符串存储在数据库中，这可能会节省一些转换（但如果您需要在查询中使用数字表示，则不会那么有用），或者您可以使用[虚拟属性](http://asciicasts.com/episodes/16-virtual-attributes)。

基本上，您需要像这样定义一个 getter 和一个 setter：

```
def rational_chest
  # I assume this would create a rational from a float
  # and respond to `to_s` in a sane manner...
  Rational(chest) if chest
end

def rational_chest=(value)
  self.chest = parse_rational(value)
end

private

def parse_rational(value)
  return nil if value.blank?
  value.split.map{|r| Rational(r)}.inject(:+).to_f
end 
```

然后`rational_chest`在您的表单中使用，而不仅仅是`chest`

由于您需要在许多领域这样做，您可以求助于一些漂亮的元编程：

```
def self.rational_attribute(attribute)
  define_method("rational_#{attribute}") do
    Rational(send(attribute))
  end

  define_method("rational_#{attribute}=") do |value|
    send "#{attribute}=", value.split.map{|r| Rational(r)}.inject(:+).to_f
  end
end

def self.rational_attributes(*attributes)
  attributes.each {|attribute| rational_attribute attribute}
end

rational_attributes :chest, :waist, :etc 
```

如果您在多个模型中使用它，请将其夹在一个模块中（没有`self.`s 和`extend`它！

# paypal - 贝宝自适应 API

> ID：13810836
> 
> 赞同：0
> 
> 时间：2012-12-10T23:04:44.707
> 
> 标签：paypal, paypal-adaptive-payments

最终用户的贝宝自适应支付流程有点奇怪。

而不是像贝宝快递流程那样工作，例如：

1.  用户通过结帐流程
2.  用户去paypal**授权**支付
3.  用户被重定向回网站以确认付款
4.  通知从网站发送到贝宝以确认并付款

它是这样的： 1\. 用户完成结帐过程 2\. 用户去贝宝，必须在他们在贝宝网站上付款 3\. IPN 被发送到网站以确认成功或失败

这是一个非常重要的缺陷，因为现在最终用户可能会因支付失败而无法返回站点，或者更糟糕的是，最终用户可能会在收到 ipn 之前返回站点。在这种情况下，篮子应该清空还是不清空？这会带来很多潜在的问题。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:28:42.570

要在配置 URL 参数后解决您的问题（如下所述），

1) 当用户返回 returnUrl 端点时，您调用 PaymentDetails API 并检查状态并继续。2) 处理用户可能已付款但未返回您的站点的极端情况，等待 IPN 消息继续您的订单发货等，3) 如果用户取消付款，他们将被带到 cancelUrl 端点和您可以相应地处理流程 4) 如果出现错误（如超出限制、不支持货币等），支付操作实际上会引发错误，您将能够将其作为错误/异常捕获流程的一部分进行处理。

API调用时请使用以下参数

returnUrl 批准 paypal.com 上的付款后，发件人的浏览器重定向到的 URL cancelUrl 如果发件人取消批准 paypal.com 上的付款，发件人的浏览器将重定向到的 URL。ipnNotificationUrl 此付款的所有 IPN 消息发送到的 URL

如果您使用的是 SDK，那么建议您查看作为其中一部分捆绑的示例。

[https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)

# iphone - 画圆UIButton表现

> ID：13810837
> 
> 赞同：3
> 
> 时间：2012-12-10T23:04:44.947
> 
> 标签：iphone, objective-c, ios, ipad

我目前正在执行以下操作：

```
 self.userProfileButton.layer.borderColor=[UIColor whiteColor].CGColor;
    self.userProfileButton.layer.borderWidth=1.5f;
    self.userProfileButton.layer.cornerRadius = 25; 
```

按钮的大小是 50，所以这使它成为一个完美的圆形。但是，当我使用仪器对此进行分析时，它似乎使 FPS 下降了一点。关于如何明智地做到这一点的任何其他想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T00:10:18.433

栅格化它！

```
self.userProfileButton.layer.shouldRasterize = YES;
//For retina screens:
self.userProfileButton.layer.rasterizationScale = [[UIScreen mainScreen] scale]; 
```

# c - 如何将无符号的 24 位 int 转换为有符号的 int 并将符号扩展到 32 位？

> ID：13810846
> 
> 赞同：4
> 
> 时间：2012-12-10T23:05:24.673
> 
> 标签：c, int, unsigned, sign

我正在尝试将 ARM 架构的分支指令编码为打印输出（将 32 位数字转换为汇编）。对于分支指令。我必须将 signed_immed_24 值扩展到 32 位并左移以获得汇编代码的值。

目前，整数是无符号的。我想知道是否有人有任何有用的技巧将其转换为有符号整数，将 9991764 转换为 -6785452。然后逻辑左移 2 得到 -27141808 的最终答案

32 位数据包含在定义的数据结构中。

```
/* Branch Instruction format data set */
typedef struct {
    uint32_t in;
    int cnd; char *cndbits; char *cndname;
    int IOO; char *IOObits; char *IOOname;
    int L;   char *Lbits;   char *Lname;
    int im;  char *imbits;  char *imname;
} arm_b; 
```

其中 im 是要转换的整数值。

这是（在工作时）将打印汇编代码的功能。

```
/* prints the assembly language of the branch instruction */
void print_b_ass(arm_b *b_instr) {
    printf("\t B 0x3e61d950 <PC + -27141808 (-6785452 << 2)>\n\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:12:03.333

如果我理解您的要求：

```
int a = 9991764;
a <<= 8;
a /= 64;
// a = -27141808 
```

（我已将其更改为右移的除法，因为从技术上讲，标准说移位可能是合乎逻辑的而不是算术的。我假设除法最终会成为正确的移位）

还假定为 32 位 int。

# ms-access - 如何计算一个表中的记录并用该值动态填充记录

> ID：13810848
> 
> 赞同：1
> 
> 时间：2012-12-10T23:05:29.417
> 
> 标签：ms-access, dynamic, count, record

我正在使用 MS Access 2007。

我正在收集城镇区域内不同类型企业的数据，按街道排列，企业。

在 TableA 中，我有一个不同特定街道的列表，没有重复，字段：Street; 另一个领域：NumOfBusinesses。

在表 B 中，我列出了不同的特定业务，业务；以及他们在哪条街上，Street。

例如

```
表A

街道............企业数量

高街
羊街
银街
黄金街

表B

商业......街道

麦当劳大街
美发师大街
鞋店黄金街
```

我想要做的是从 TableB 中计算每条街道的业务量，并将其添加到 TableA 中，对应于每条街道。

我有超过 600 条街道，所以我不想手动检查每个单独的计数并手动添加。

是否有我可以使用的查询类型，甚至可以作为“Num...sses”字段的默认值输入的代码，因此它会根据记录中的相关街道动态更改查询？

所以本质上，我希望 TableA 自动看起来像这样

```
表A

街道............企业数量

高街 2
羊街 0
银街 0
黄金街 1

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:10:32.790

您可以从查询中获取结果，那么您真的需要更新字段吗？

```
SELECT Tablea.Street, Count(Business) 
FROM TableA 
INNER JOIN Tableb
ON TableA.Street = TableB.Street
GROUP BY Tablea.Street 
```

通常不建议您存储计算数据。

如果你真的必须存储计数，你可以说：

```
UPDATE tablea 
SET numofbusinesses=
   DCount("*","tableb","street='" & Replace(street,"'","''") & "'")
WHERE Street Is Not Null 
```

# php - PHP页面计数器脚本

> ID：13810850
> 
> 赞同：0
> 
> 时间：2012-12-10T23:05:58.063
> 
> 标签：php, mysql

显然，我是 php 新手。我为网页创建了一个简单的页面计数器来监控查看次数。我已经建立了一个包含三列（id、page、views）的 mySQL 数据库。并且在相关页面上包含了以下脚本，但是..不是将计数增加 1，而是每次将计数增加 2，我不知道为什么。任何人都可以帮忙吗？

```
 <?php
    $page= 'index';

    include('solrx_scripts.php');

    $sql="SELECT * FROM view_log WHERE page = 'index'";
    $result=mysql_query($sql)  or die(mysql_error()); 
    while ($row=mysql_fetch_array($result)){

        $previous = $row['views'];
    }
    $new_count = $previous + 1;

    mysql_query("UPDATE view_log SET views=$new_count WHERE id = 'index'");

    exit;
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:09:48.073

尝试在 SQL 而不是 PHP 中进行添加

`mysql_query("UPDATE view_log SET views=views+1 WHERE id = 'index'");`

请记住，搜索引擎蜘蛛也会导致查看次数被更新。像谷歌分析这样的东西会给你更可靠的统计数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:12:53.083

你只需要一行：

```
mysql_query("UPDATE `view_log` SET `views` = `views` + 1 WHERE `id` = 'index'"); 
```

并且请**不要**使用mysql php函数，因为它已被弃用，您将来肯定会遇到很多问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T23:12:58.917

让它变得像这样不需要选择如果你总是想加 1

```
$page= 'index';

include('solrx_scripts.php');

mysql_query("UPDATE view_log SET views=views+1 WHERE id = 'index'");

exit; 
```

如果它仍然增加 2，则意味着 solrx_scripts.php 或之前有一些东西。

# android - Android：使用动态创建的按钮调用 onClick 方法

> ID：13810852
> 
> 赞同：3
> 
> 时间：2012-12-10T23:06:10.403
> 
> 标签：android, dynamic, onclick

在活动中，我可以将 XML 文件中的 android:onClick 设置为我的 Activity 对象中的方法名称。我想在我的 sqlite 数据库中读取一个表，创建按钮，并将 onClick 设置为指向我的 Activity 中的一个方法，就像我在我的 XML 文件中添加静态视图一样。

我可以这样做而不必创建 View.OnClickListener() 对象。我发现 XML 方法在我的 Java 代码中更容易阅读。如果这不可能，XML 是如何做到的？

# iphone - 程序化 UIButton 不稳定行为

> ID：13810860
> 
> 赞同：0
> 
> 时间：2012-12-10T23:06:39.627
> 
> 标签：iphone, objective-c, ios

因此，我根据我的一个对象上的值是否 > 0 以编程方式创建 UIButton。但是，当我编辑该值并重新加载表时，它不会删除该按钮。该值绝对 > 0 而不是 nil，因为它显示在标签中。我尝试将按钮添加到每个单元格，然后设置其隐藏属性，这给了我与下面的代码相同的行为。如果我停止应用程序并重新运行应用程序，它会显示它应该如何运行。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    CGRect newIconRect = CGRectMake(280, 5, 33, 33);
    UIButton *warningButton = [[UIButton alloc] initWithFrame:newIconRect];
    warningButton.tag = 66;

    [cell.contentView addSubview:warningButton];
}

    UIButton *warningButton = (UIButton *)[cell.contentView viewWithTag:66];
    [warningButton setImage:[UIImage imageNamed:@"exclamation.png"] forState:UIControlStateNormal];
    [warningButton addTarget:self action:@selector(warningButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

    if (ueo.daysLeft >= 0)
    {
    daysLeftLabel.text = [[NSString alloc]initWithFormat:@"%i recurringDays to go", ueo.daysLeft];

    warningButton.hidden = YES;

    }
    else
    {
    daysLeftLabel.text = [[NSString alloc]initWithFormat:@"%i recurringDays have passed", ueo.daysLeft];
    warningButton.hidden = NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:16:24.950

如果您按照问题所示进行操作，则您正在单元格中创建重复的按钮。因此，您将无法删除按钮，因为您可能已经丢失了对按钮对象的引用。对于达到重新加载或表格视图滚动，上面的代码将创建新按钮并添加到单元格顶部。

您可以自定义并在该单元类`UITableViewCell`的方法中添加此按钮。`init`之后，您可以使用显示/隐藏

```
cell.button.hidden = YES;//or NO 
```

一个简单但不推荐的方法是在`if (cell == nil)`,

例如：-

```
if (cell == nil) {
   //create cell here
   cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

   CGRect newIconRect = CGRectMake(280, 5, 33, 33);
   UIButton *warningButton = [[UIButton alloc] initWithFrame:newIconRect];
   warningButton.tag = 100;   
   [cell.contentView addSubview:warningButton];    
}

UIButton *warningButton = (UIButton *)[cell.contenView viewWithTag:100];
NSLog(@"warningButton = %@", warningButton);
[warningButton setImage:[UIImage imageNamed:@"exclamation.png"] forState:UIControlStateNormal];
[warningButton addTarget:self action:@selector(warningButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

if (ueo.daysLeft >= 0) {
  warningButton.hidden = YES;
} else {
  warningButton.hidden = NO;
} 
```

# objective-c - UIViewController 中的 MPMoviePlayer

> ID：13810861
> 
> 赞同：1
> 
> 时间：2012-12-10T23:06:48.257
> 
> 标签：objective-c, ios, mpmovieplayer

我有一个 html 按钮`UIWebView`，点击它会推送一个`UIViewController`带有编程的 segue 动作的按钮。如何在加载 UIViewController 时播放电影`MPMoviePlayer`。此代码播放 Movie in`MPMoviePlayerViewController`而不是 segue push `UIViewController`。我想在 segue 推送的 UIViewController 中播放电影。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
if ([request.URL.scheme isEqualToString:@"inapp"]) {
    if ([request.URL.host isEqualToString:@"capture"]) {

  [self performSegueWithIdentifier: @"SegueAction" sender: self];
  NSURL * urlA1 = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"A1"ofType:@"mp4"]]; 
   MPMoviePlayerViewController *playercontrollerA1 = [[MPMoviePlayerViewController alloc] initWithContentURL:urlA1];
        playercontrollerA1.moviePlayer.repeatMode = MPMovieRepeatModeOne;
           [self presentMoviePlayerViewControllerAnimated:playercontrollerA1];
        playercontrollerA1.moviePlayer.movieSourceType = MPMovieSourceTypeFile;            
        // do capture action
    }
    return NO;
}
return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:32:09.043

使用[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)。您可以将其添加为`self.view.`

**例如：**

```
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL: myURL];
[player prepareToPlay];
[player.view setFrame: myView.bounds];  // player's frame must match parent's
[self.view addSubview: player.view];
// ...
[player play]; 
```

有关更多详细信息，请查看上面的苹果文档链接。

**更新：**

```
NSURL *urlA1 = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"A1"ofType:@"mp4"]]; 
MPMoviePlayerController *moviePlayer =
[[MPMoviePlayerController alloc] initWithContentURL:urlA1];
moviePlayer.repeatMode = MPMovieRepeatModeOne;
[self.view addSubview:moviePlayer.view];
moviePlayer.movieSourceType = MPMovieSourceTypeFile;            
// do capture action 
```

# c# - 直接访问pictureBox.Image

> ID：13810865
> 
> 赞同：0
> 
> 时间：2012-12-10T23:07:25.600
> 
> 标签：c#, .net, winforms, picturebox

我经常修改图片框中的图像，所以我会做这样的事情：

```
modify(ref pictureBox1.Image); 
```

不幸的是，它不起作用，它会引发以下错误“属性、索引器或动态成员访问可能不会作为 out 或 ref 参数传递”。好的，我得到了错误 - 但仍然有任何解决方法或加速我的程序的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:11:41.210

.NET 中的所有对象（引用类型）都是通过引用传递的，添加 ref 关键字没有任何好处。试试这个：

```
var image = pictureBox.Image;
modify(image); 
```

# asp.net-mvc - 使用授权过滤器或参数加载来重载操作方法

> ID：13810869
> 
> 赞同：0
> 
> 时间：2012-12-10T23:07:47.400
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我们的网站有一个复杂的管理层次结构，有一些行为分裂。为了最好地引导用户流量，我创建了名为 MangersOnly、AdminOnly、NonAdmins 的授权过滤器。

我设想以这种方式使用它们

```
[MangersOnly]
public ActionResult Index()
{
}

[AdminOnly]
public ActionResult Index()
{
      return redirectoaction("Index", "Admins");
}

[NonAdmins]
public ActionResult Index()
{
      return redirectoaction("Shouldntbehere", "Errors");
} 
```

我遗憾地发现，属性并不能作为我的操作方法的重载。

这种架构是为了避免我们必须做的所有逻辑检查（如果这个或那个角色保持不变，否则重定向到这里或那里......）。目标是将流量引导到授权属性不会失败的操作方法。

有没有一种方法可以重载这些方法（不改变它们的参数或名称），保持这种甜蜜（天真的）架构来引导用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:14:19.100

在 C#（以及我能想到的任何其他语言）中，您不能拥有多个具有相同签名的方法（无论是否 MVC）（属性不是签名的一部分）；所以这种方法行不通。

如何根据用户的权限（例如 IndexManager、IndexAdmin 等）生成锚链接（视图中），并正常添加基于角色的安全性。这些名称`IndexManager`在这里没有意义，这会让我更多地思考用户在做什么，这是一个更好的动作名称吗？只有您知道您的域才能回答这个问题。

或者使用基本控制器来实现通用功能并继承每个安全级别的行为。

您可能还想考虑基于权限的过滤而不是基于角色的过滤，请参阅[http://lostechies.com/derickbailey/2011/05/24/dont-do-role-based-authorization-checks-do-activity-based-checks/](http://lostechies.com/derickbailey/2011/05/24/dont-do-role-based-authorization-checks-do-activity-based-checks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-03T14:05:58.013

如果应用程序的外观和感觉因用户而异，那么您始终可以使用 MVC 区域。我已经开发了几个应用程序，在这些应用程序中，我使用此功能基于登录将用户引导到特定区域，并将所有内容访问和交付定制到特定用户组。

例如，我有一个只有一次登录的网站，根据您的身份（客户支持或客户），您将被引导到不同的区域，这些区域都使用相同的 DAL 逻辑来获取信息，但控制器可以根据区域。这也使得将营销材料与订单服务和其他处理逻辑分开变得非常容易。我真的很喜欢这些文章：

MVC5 领域 - [http://www.itorian.com/2013/10/area-in-mvc-5-with-example-step-by-step.html](http://www.itorian.com/2013/10/area-in-mvc-5-with-example-step-by-step.html)

基于登录的重定向 - [ASP.NET MVC 5 Identity 2 基于用户角色的登录重定向](https://stackoverflow.com/questions/26526536/asp-net-mvc-5-identity-2-login-redirect-based-on-user-role)

# signal-processing - MFCC - 13 个系数

> ID：13810873
> 
> 赞同：1
> 
> 时间：2012-12-10T23:08:26.447
> 
> 标签：signal-processing, speech-recognition, mfcc

我正在尝试根据我找到的这篇论文（[http://arxiv.org/pdf/1003.4083.pdf](http://arxiv.org/pdf/1003.4083.pdf)）计算 MFCC 算法，所以到目前为止我所做的是：

步骤 1) 预加重

步骤 2) 构图

步骤 3) 汉明窗

步骤 4) 快速傅里叶变换

步骤 5) 梅尔滤波器组处理

步骤 6)：离散余弦变换

基本上，我使用了 Mel Bank 滤波器并将它们与实际的原始信号相乘。然后我对这些结果执行 FFT，如下所示：

帧 1 上的 FFT：

![在此处输入图像描述](../Images/44cf96c6e2709799c4433c6b56551b3f.png)

然后我计算了 FFT 的 DCT，结果如下所示：

帧 1 上的 DCT：

![在此处输入图像描述](../Images/94166b422bdd1bfe28fa1e816db02c78.png)

到目前为止这看起来正确吗？有没有办法让我检查一下，以便我知道我正朝着正确的方向前进？

另外，我需要获得 13 个系数，但我不知道如何确定要获得哪些。我得到 256 个值，那么我要取前 13 个值吗？或者，我得到总能量了吗？

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T12:12:58.937

经过几天的类似搜索，我偶然发现了一个非常有用的关于如何获得 MFC [系数的教程：梅尔频率倒谱系数 (MFCC) 教程](http://practicalcryptography.com/miscellaneous/machine-learning/guide-mel-frequency-cepstral-coefficients-mfccs/)

（虽然线程很旧，但我希望答案可能对未来的读者有所帮助）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-27T15:52:24.293

> 我对你刚刚写的东西感到困惑。我唯一需要知道的是我已将信号分成帧，n = 100，m = 256（我相信）这会产生大约 390 个块，所以，每个块有 13 个系数还是整个块只有 13 个系数声音？

答案是每个块有 13 个系数，而不是整个声音文件。

并且您计算 mfcc 系数的方法是错误的，您应该按照您提到的 1-6 个步骤进行操作。

步骤 1) 对整个声音文件进行预加重。

步骤 2) 对整个声音文件进行构图以获得许多块

步骤 3) 每个块的汉明窗口

步骤 4) 每个块的快速傅里叶变换

步骤 5) 每个块的 Mel 滤波器组处理

步骤 6)：每个块的离散余弦变换

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T06:28:30.783

不，你错了。

您需要在 FFT 之后计算 mel 滤波器组**能量**的对数，然后才应用 DCT。滤波器组的能量数量应该在 20 或 40 左右，在 DCT 之后你应该得到 20 或 40 个数字，然后取前 13 个。

您对 FFT 所做的一切都是错误的。

您可能想阅读一些 MFCC 代码而不是从头开始做某事，那里有很多实现，例如在 sphinxbase 中：

[http://cmusphinx.sourceforge.net](http://cmusphinx.sourceforge.net)

# objective-c - 将 nil 对象插入 NSDictionary

> ID：13810875
> 
> 赞同：24
> 
> 时间：2012-12-10T23:08:51.683
> 
> 标签：objective-c, nsdictionary

如果我们有一个 API 只需要对象 5 个属性中的 2 个，而 iPhone 应用程序不需要它们来实例化一个对象，那么当在参数 NSDicitionary 中使用该对象时，应用程序将崩溃。有人告诉我 NSDictionary 不会让你分配 nil 值，因为当它达到 nil 时，它认为它已经完成了。Objective-c 是否有办法将对象的非 nil 属性吐出到 NSDictionary 中？

例子：

```
[Drunk alloc] init];
drunk.started_drinking = [NSDate date];
drunk.stopped_drinking (we don't set this because he is still a drunk)
drunk.fat = YES;
drunk.dumb = YES;

parameters:@{

             @"auth_token" :token,
             @"name" : drunk.name, @"date_started" : drunk.started_drinking,
             @"date_stopped" : drunk.stopped_drinking, 
             @"prescribing_doctor" : drunk.fat,
             @"pharmacy" : drunk.dumb

            } 
```

当它到达stopped_drinking 属性时，这将崩溃。有关如何处理此问题的任何建议？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-10T23:17:25.390

这有点啰嗦，但你可以做

```
static id ObjectOrNull(id object)
{
  return object ?: [NSNull null];
}

parameters:@{
  @"auth_token"         : ObjectOrNull(token),
  @"name"               : ObjectOrNull(drunk.name),
  @"date_started"       : ObjectOrNull(drunk.started_drinking),
  @"date_stopped"       : ObjectOrNull(drunk.stopped_drinking),
  @"prescribing_doctor" : ObjectOrNull(drunk.fat),
  @"pharmacy"           : ObjectOrNull(drunk.dumb),
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T23:17:03.877

您不能插入`nil`集合（字典、数组、索引集等）。

但是，您可以插入`[NSNull null]`它们，因为这就是[它们的用途](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNull_Class/Reference/Reference.html)

将对象插入字典变得非常容易（如果属性是`nil`，则插入一个`NSNull`代替）。然后，当从字典中取出东西时，快速`if(myReturnedObject == [NSNull null])`会告诉您返回的值是否有效，就像`NSNull`单例一样，因此每个`NSNull`实际上都是同一个对象。

**编辑：** Paul.s 为您的案例提供了一个很好的插入行为示例，包括[三元运算符用法](http://en.wikipedia.org/wiki/%3F%3a)。

**再次编辑：**尽管有以下评论，但实际上*在上面链接的 Apple 文档*中确认NSNull 在添加到集合时不会崩溃。

# ruby-on-rails - rails activerecord 事务块似乎没有提交

> ID：13810882
> 
> 赞同：3
> 
> 时间：2012-12-10T23:09:19.297
> 
> 标签：ruby-on-rails, postgresql, transactions

我有一个我故意崩溃的rails应用程序..它是本地的，我只是按ctrl + c并在处理记录的中途杀死它..

在我看来，不应该提交块中的记录。这是 postgres“错误”还是 rails“错误”，还是 dave 错误？

```
 ActiveRecord::Base.transaction do
        UploadStage.where("id in (#{ids.join(',')})").update_all(:status => 2);

        records.each do |record|
          record.success = process_line(record.id, klas, record.hash_value).to_s[0..250]
          record.status = 1000
          record.save();
        end    
      end 
```

我通过读取状态为 1 的所有记录来生成我的 ID。
除了这个函数将状态设置为 1000 之外，什么都没有。

如果操作因任何原因崩溃，我希望数据库中没有状态 = 2 的记录......但这不是我所看到的。一半的记录状态为 1000，另一半的状态为 2...。

我错过了什么吗？
如果应用程序崩溃，我如何确保没有 2？

* * *

编辑：
我发现这个链接 [http://coderrr.wordpress.com/2011/05/03/beware-of-threadkill-or-your-activerecord-transactions-are-in-danger-of-being-partially-committed/](http://coderrr.wordpress.com/2011/05/03/beware-of-threadkill-or-your-activerecord-transactions-are-in-danger-of-being-partially-committed/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:25:16.313

正如我所怀疑的那样，正如 dave 的更新所证实的那样，在某些情况下，当你杀死一个线程时，ActiveRecord 似乎会提交一个半完成的事务。哇，安全！有关详细说明和缓解选项，请参阅[dave 的链接](http://coderrr.wordpress.com/2011/05/03/beware-of-threadkill-or-your-activerecord-transactions-are-in-danger-of-being-partially-committed/)。

如果您正在模拟硬崩溃（主机操作系统崩溃或插拔），那么 control-C 绝对不是正确的方法。用于`Control-\`发送`SIGQUIT`通常不处理的 ，或用于`kill -KILL`硬杀进程而没有机会进行清理。`Control-C`发送`SIGINT`这是一个温和的信号，通常附加到一个干净的关闭处理程序。

一般来说，如果你正在调试这样的问题，你应该启用详细的查询日志并查看 Rails 正在做什么。使用`log_statement = 'all'`in`postgresql.conf`然后检查 PostgreSQL 日志。

# javascript - 是否仍然需要限制 $(window).scroll()？

> ID：13810884
> 
> 赞同：8
> 
> 时间：2012-12-10T23:09:24.363
> 
> 标签：javascript, jquery, dom, browser

John Resig 在 2011 年 1 月写的一篇[经常被引用的博客文章](http://ejohn.org/blog/learning-from-twitter)建议不要将处理程序附加到窗口滚动事件。

相反，常识说要限制您的处理程序，例如：

```
$(window).scroll(_.throttle(myScrollHandler, 250)); 
```

在我最近的测试中，当处理程序直接附加到滚动事件时，UI 响应要平滑得多。限制处理程序会导致明显的滞后。

现代浏览器是否解决了这个问题？是否有可用的测试或浏览器兼容性数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T23:40:22.247

油门将每秒触发的事件数减少到 4 个。如果没有节流，每秒可能触发大量事件。每秒 4 次很容易被人眼检测到（取决于您在做什么）。

至于你是否还*需要*节流，这真的取决于你的客户。如果您正在处理许多使用 IE6 且显卡较差的旧计算机，高速事件触发可能会导致很多明显的问题。它还取决于您的滚动事件实际在做什么（响应需要多长时间，是否消耗内存以及释放内存的速度等）

# ruby-on-rails - 从 Redis 服务器获取 ActiveRecord

> ID：13810886
> 
> 赞同：3
> 
> 时间：2012-12-10T23:09:27.160
> 
> 标签：ruby-on-rails, activerecord, serialization, redis

在我的应用程序中，我有许多标准 SQL 查询，例如按 id 查找模型。

我想在 Redis 中缓存这些查询（例如 1 小时）。

我可以存储模型的 JSON 表示，获取并解析这个字符串，但它将是一个 ruby​​ 哈希。

这不方便，因为我需要像 ActiveRecord 对象一样操作这些对象。

如何将此对象从哈希转换为 AR？

可以`Marshal.dump`帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:31:14.503

您可以使用`Marshal.dump`and`Marshal.load`序列化 AR 对象，然后将它们加载回来。不过，这有一些缺点。在当前版本的 rails 中，自动加载不能很好地配合`Marshal.load`. 最近有一个 PR`Marshal.load`和 autoloader 一起工作。（https://github.com/rails/rails/pull/8246）。

# git - 删除远程 git 存储库

> ID：13810889
> 
> 赞同：0
> 
> 时间：2012-12-10T23:09:49.080
> 
> 标签：git, version-control, bitbucket, git-remote

是否可以完全删除远程存储库（假设我有写访问权限）。我正在尝试完全清除 BitBucket 上的存储库并推送新副本。我知道我可以删除并重新创建 BitBucket 本身的 repo，但我想知道我是否可以在终端上“清除”它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:11:45.093

没有。Git 中没有远程“删除仓库”命令。最接近的方法（这似乎合适，因为您想重新创建存储库）是删除所有远程分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:26:26.290

我不确定我是否理解正确，但如果你只是想从新的历史开始，你可以删除你的本地 repo 初始化一个新的，将远程存储库路径添加到新的本地 repo 并强制将它推到旧的回购： git push -f origin master

如果您正在与同一项目的其他开发人员一起工作，那么不建议这样做，如果您不是……您也应该小心这样做。

# iphone - 如何从 fbconnect 提要对话框发布 uiimage 而不是图像 url？

> ID：13810892
> 
> 赞同：1
> 
> 时间：2012-12-10T23:09:52.293
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我需要发布 uiimage（从应用程序截取的屏幕截图）而不是 url 以从 facebook 对话框发布到 facebook 以及用户选项以输入文本。如何实现。一些帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:35:01.500

要通过 fbconnect 在 facebook 中发布图像，需要遵循 fbconnect api 几个步骤。

1.  需要登录 facebook 然后检查访问密钥和到期日期。

2.  如果那些不是零，它会发布图像，即

    ```
    NSData *imageData = UIImagePNGRepresentation(cellImageView.image);
    NSMutableDictionary *params = [[NSMutableDictionary alloc]initWithObjectsAndKeys:@"app name",@"message",imageData,@"source", nil];
    [facebook requestWithGraphPath:@"me/photos" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
    ```

如果不是，则使用访问密钥和到期密钥，然后使用上面编写的图像邮政编码。

有关更多信息，请下载 fbconnect api 并查看登录信息并查看带有刹车点的代码。

此用户需要登录委托和 fb 请求委托。

也不要忘记使用 app id 初始化 facebook obj 并设置其委托 self。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:40:33.217

你可以尝试这样的事情来发布照片部分。我确定文本只是另一个字段。

```
@try {
     // make sure your permissions are set
     NSArray *permissions = [[NSArray alloc] initWithObjects:
     @"publish_stream",
     nil];

        [FBSession openActiveSessionWithPublishPermissions:permissions
                                           defaultAudience:FBSessionDefaultAudienceOnlyMe
                                              allowLoginUI:NO
                                         completionHandler:^(FBSession *session, FBSessionState state, NSError *error){
                                             NSLog(@"completion handler.");
                                         }];

        [FBRequestConnection startForUploadPhoto:imageToUpload
                               completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                   if (!error) {
                                       UIAlertView *tmp = [[UIAlertView alloc]
                                                           initWithTitle:@"Success"
                                                           message:@"Photo Uploaded!"
                                                           delegate:self
                                                           cancelButtonTitle:nil
                                                           otherButtonTitles:@"Ok", nil];

                                       [tmp show];
                                   } else {
                                       UIAlertView *tmp = [[UIAlertView alloc]
                                                           initWithTitle:@"Error"
                                                           message:@"Error uploading image to Facebook."
                                                           delegate:self
                                                           cancelButtonTitle:nil
                                                           otherButtonTitles:@"Ok", nil];

                                       [tmp show];

                                   }
                               }];

    }
    @catch (NSException *exception) {
        NSLog(@"-----> !! ERROR UPLOADING IMAGE TO FACEBOOK !!");
    } 
```

# android - getcheckbox 从另一个类 android

> ID：13810905
> 
> 赞同：0
> 
> 时间：2012-12-10T23:10:42.367
> 
> 标签：android, android-widget

当我试图从另一个类而不是新的复选框中获取复选框时，我遇到了 NullPointer 异常的问题。

这就是我想要做的：

```
/*My First class*/
         class Object1 {
            private Checkbox checkbox;
            private String texto="";

          public Object1(Context context, Texto texto){
            this.texto=texto;
            checkbox=new checkbox(context);
          }

     //Here is How I'm returning the checkbox
         public CheckBox getCheckBox(){
           return checkbox;
         }
         }

/*My Second class where I'm trying to set a listener to the checkbox*/
         Class Object2{
         public Object2(){
          --->>   new Object1.getCheckBox().setOnCheckedChangeListener(listener);
         }
         } 
```

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:20:59.737

我相信你没有使用你的构造函数。

不应该：

```
new Object1.getCheckBox().setOnCheckedChangeListener(listener); 
```

是：

```
new Object1(context, texto).getCheckBox().setOnCheckedChangeListener(listener); 
```

?

在第一个实例中，我很确定你根本没有正确实例化它，因为它至少必须是 new Object1()，但是你会得到编译器错误，抱怨你没有使用正确的构造函数...所以你一定是不小心创建了对类本身的引用。

# php - 为移动设备使用不同的 css/include 文件

> ID：13810912
> 
> 赞同：0
> 
> 时间：2012-12-10T23:11:15.953
> 
> 标签：php, mysql, css, mobile

我正在开发一个每月有数百万浏览量的动态页面。此页面专为桌面网站而设计。我们想要对页面进行移动友好的布局，并且在概念上正在考虑以这种方式接近它：

示例：site.com/my-profile.php?name=steve

实际页面只有 1 行代码，它引用了一个包含文件，该文件具有运行该页面的大约 1000 行的实际代码：

```
 <?php require_once('/home/abcdefg/public_html/profile_page_body.php'); ?> 
```

我们希望能够识别用户是否是移动用户，如果是，则为移动用户提供格式更好的不同包含文件。

```
 <?php 
 if (....what do I put here to say:  mobile=="no".......) {
 require_once('/home/abcdefg/public_html/profile_page_body.php');}
 else 
 require_once('/home/abcdefg/public_html/mobile_profile_page_body.php'); 
 ?> 
```

因此，如果未检测到移动设备，它只会加载当前的正文包含文件。如果检测到移动设备，那么它将加载不同的正文包含文件。在那个新的/不同的 body 包含文件中，我们可以调整屏幕宽度、字体大小等，使其在移动设备上更合适地显示。

假设逻辑没有缺陷，那么问题是：我们如何识别用户来自移动设备。

我找到了这个：

```
$useragent=$_SERVER['HTTP_USER_AGENT'];
if(preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))
header('Location: http://detectmobilebrowser.com/mobile'); 
```

我想我可以改变最后一行：

```
header('Location: http://detectmobilebrowser.com/mobile'); 
```

对此：

```
 require_once('/home/abcdefg/public_html/profile_page_body.php');}
 else 
 require_once('/home/abcdefg/public_html/mobile_profile_page_body.php'); 
```

整个过程使我们不必创建移动子域并处理不同的 url 和所有这些东西。

这种方法可以接受吗？以这种方式接近它有麻烦吗？

最后，将用户识别为移动设备的方法是一种好方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:23:09.777

在当今时代，检测设备已经有点老了，响应式是前进的方向。您应该专注于使用 CSS 样式向人们提供您的内容，而不是检测这个和那个。

设计行业确实在迅速接受移动浏览，而答案就是响应式设计。

我不知道您使用的是哪种 CMS，但可以采用所有主题来使用[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)或[http://foundation.zurb.com/](http://foundation.zurb.com/)两者都是免费的，由已经有数百个 1,000 个。我强烈建议您重新考虑或考虑出于排名目的和您的观众考虑的响应式设计。

使用您的方法几乎不可能满足所有手机的需求，并且仅适用于主要手机，因为通过检测页面宽度来响应它们适合所有手机，而这些都不会检测手机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:13:53.030

您可以使用执行移动检测的 PHP 库之一。

这是一个： [http ://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T23:14:29.833

在许多情况下，最好使用 CSS 媒体查询进行响应式设计。

# ruby-on-rails - 如何使用虚拟应用程序测试 gem（最好使用 Cucumber）？

> ID：13810918
> 
> 赞同：0
> 
> 时间：2012-12-10T23:11:59.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing, gem, cucumber

我正在制作一个 gem，它将向应用程序的控制器添加一些自定义响应程序。为了测试这一点，我需要一个位于测试目录中的虚拟应用程序，我可以加载它并以某种方式从中生成视图。

我更喜欢使用 Cucumber 来测试这个 gem，因为这是我过去使用它时最舒服的。

如何像这样在我的测试目录中生成应用程序？我至少需要一个控制器和一个模型，但不需要视图（响应器仅用于 JSON）。我可以在其中生成一个新的 Rails 应用程序`/features/support/dummy`吗？我将如何从我的测试套件中运行虚拟应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:10:27.397

At first, do not generate anything within `features/support/`. That's the place for global hooks.

Your problem sounds not hard if I understood correctly. Here is my proposed steps.

1.  Create a `demo` directory in project root. New demo app will be under it.

2.  Create a ruby module/class under `features/support/`, with methods to generate a demo app and delete it. The demo app will be simply some directories like `app/contorllers` for test purpose. Making a whole new Rails app sounds overkill.

3.  Create a tag for the Scenario which need generate app. Add `Before` and `After` hook for this tag to add and remove app for this Scenario, by calling the module/class in #2

# c# - ToString(IFormatProvider) 的奇数十进制类型行为

> ID：13810922
> 
> 赞同：1
> 
> 时间：2012-12-10T23:12:13.710
> 
> 标签：c#, iformatprovider

```
var numberFormat = new NumberFormatInfo();
numberFormat.NumberDecimalSeparator = ".";
numberFormat.NumberDecimalDigits = 2;

decimal a = 10.00M;
decimal b = 10M;

Console.WriteLine(a.ToString(numberFormat));
Console.WriteLine(b.ToString(numberFormat));
Console.WriteLine(a == b ? "True": "False"); 
```

在控制台中：10.00 10 真

为什么不一样？更重要的是，无论变量如何初始化，如何调用 ToString() 以确保相同的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:38:22.960

如何使其输出一致的问题已经得到解答，但这就是为什么它们首先输出不同的原因：

值在`decimal`内部包含标度和系数字段。在 的情况下`10M`，编码值的系数为 10，比例为 0：

```
10M = 10 * 10^0 
```

在 的情况下`10.00M`，编码值的系数为 1000，比例为 2：

```
10.00M = 1000 * 10^(-2) 
```

您可以通过检查内存中的值来看到这一点：

```
unsafe
{
    fixed (decimal* array = new decimal[2])
    {
        array[0] = 10M;
        array[1] = 10.00M;
        byte* ptr = (byte*)array;

        Console.Write("10M:    ");
        for (int i = 0; i < 16; i++)
            Console.Write(ptr[i].ToString("X2") + " ");

        Console.WriteLine("");

        Console.Write("10.00M: ");
        for (int i = 16; i < 32; i++)
            Console.Write(ptr[i].ToString("X2") + " ");
    }
} 
```

输出

```
10M:    00 00 00 00 00 00 00 00 0A 00 00 00 00 00 00 00
10.00M: 00 00 02 00 00 00 00 00 E8 03 00 00 00 00 00 00 
```

（0xA 是十六进制的 10，0x3E8 是十六进制的 1000）

C# 规范的第 2.4.4.3 节概述了此行为：

> 以 M 或 m 为后缀的实数是十进制类型。例如，文字 1m、1.5m、1e10m 和 123.456M 都是十进制类型。该文字通过取确切值转换为十进制值，并在必要时使用银行四舍五入（第 4.1.7 节）四舍五入到最接近的可表示值。**除非值被四舍五入或值为零（在后一种情况下，符号和比例将为 0），否则文字中明显的任何比例都会被保留。因此，文字 2.900m 将被解析为符号 0、系数 2900 和小数位数 3 的小数。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T23:18:37.053

该`NumberDecimalDigits`属性`"F"`与`"N"`标准格式字符串一起使用，而不是在`ToString`没有格式字符串的情况下调用的方法。

您可以使用：

```
Console.WriteLine(a.ToString("N", numberFormat)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T23:19:53.450

试试这个：

```
Console.WriteLine(String.Format("{0:0.00}", a)); 
Console.WriteLine(String.Format("{0:0.00}", b)); 
```

输出将始终有 2 个小数点。这里有更多例子：

[http://www.csharp-examples.net/string-format-double/](http://www.csharp-examples.net/string-format-double/)

# java - 如何隐藏菜单栏但仍通过菜单按钮访问它

> ID：13810924
> 
> 赞同：1
> 
> 时间：2012-12-10T23:12:30.473
> 
> 标签：java, android, android-layout

所以这就是交易，我有以下

![在此处输入图像描述](../Images/5382bd95e3e09c153708c0479f50b891.png)

**我想删除它但仍然可以通过菜单按钮访问菜单项，这可能吗？**

![在此处输入图像描述](../Images/d34e83b9609a3c0e19e70c1a655183c6.png)

这是我的菜单 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/updateShares"
        android:orderInCategory="100"
        android:showAsAction="never"
       android:title="Refresh"/>        
</menu> 
```

这是我创建菜单的代码

```
@Override
    public boolean onCreateOptionsMenu(Menu menu){
      MenuInflater inflater = getMenuInflater();

      inflater.inflate(R.menu.activity_action_bar_main, menu);
        return true;
    } 
```

**编辑**_____________________________________________________________________

当您按下手机上的菜单按钮时，我仍然希望“刷新”菜单出现，我只想删除菜单栏，这就是为什么我不能将任何选项菜单设置为可见 = false 因为那时我看不到按下菜单栏时。 ![在此处输入图像描述](../Images/c5f32d7c938e0fae9e1bb0ee652cccd3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:23:42.950

1.  您只需添加`onCreate`以下代码段： `this.requestWindowFeature(Window.FEATURE_NO_TITLE);`这样您的标题栏就会消失。

2.  这可以帮助您删除菜单项[https://stackoverflow.com/a/13099201/1045579](https://stackoverflow.com/a/13099201/1045579)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:57:31.330

我不确定 mark166 的答案。你也可以试试[这个链接](http://developer.android.com/guide/topics/ui/actionbar.html#Removing)。我所做的另一件事，你可以尝试的是......

只是不要在单击菜单时膨胀布局。甚至不创建 menu.xml 文件。

您可以尝试在 java 文件中使用以下代码

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_MENU:
            Toast.makeText(getApplicationContext(), "Do what you want to show here", Toast.LENGTH_SHORT).show();
            break;

        }
        return true;
    } 
```

它适用于我并在应用程序中使用相同的东西。

您只需为菜单注释代码并尝试此代码。

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:56:09.387

根据您的第二个屏幕截图，将目标 SDK 版本更改为 4.0.3，因此菜单 ... 将不可见。

# xcode - Xcode Instruments 抛出错误“无法启动脚本，目标应用程序不在最前面。”

> ID：13810931
> 
> 赞同：1
> 
> 时间：2012-12-10T23:13:26.103
> 
> 标签：xcode, ios-simulator, instruments, ui-automation

我目前正在为现有的 iPad 应用程序添加 UIAutomation 验收测试。我有一个自定义 shell 脚本，它从命令行运行仪器并在运行测试之前重置模拟器。当它尝试运行 UIAutomation 测试时，它会失败并显示错误“无法启动脚本，目标应用程序不是最前面的”。

我尝试通过在仪器的 GUI 版本中重现它来解决此问题，并且能够重现它。它仅在安装后首次启动应用程序时发生，并且仅在 iPad 6.0 模拟器中发生。当我在 iPad 5.1 模拟器中运行相同的场景时，它工作正常。在 6.0 模拟器上的仪器中启动后，我尝试在应用程序上运行的任何 UIAutomation 脚本都返回“无法启动脚本，目标应用程序不是最前面的”。错误。

应用程序本身在 AppDelege 中没有做任何特别的事情。它初始化窗口。

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

它创建一个视图控制器并将其分配为根视图控制器：

```
MyViewController *viewController = [[MyViewController alloc] initWithModel:self.myModel];
[self.window setRootViewController:viewController];
[self.window makeKeyAndVisible]; 
```

这是在 didFinishLaunchingWithOptions 方法中完成的。

我在另一个应用程序中执行了非常相似的操作，并且没有遇到此错误。我很想知道是否有其他人遇到过这个问题以及他们为解决这个问题做了什么。

我正在使用 Xcode 4.5.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-04T02:38:34.703

我有同样的错误。

1.您可以运行应用程序（不使用仪器）

2.停下来。

3.使用仪器运行应用程序。

然后就没事了！

# javascript - 在文本字段的最大长度上调用 javascript 函数

> ID：13810933
> 
> 赞同：1
> 
> 时间：2012-12-10T23:13:40.600
> 
> 标签：javascript

我正在寻找一个在达到文本字段的最大长度时自动调用 JavaScript 函数的脚本。

我试图修改这段脚本，我在这里找到了[x 个字符后的 ajax 调用](https://stackoverflow.com/questions/11801672/ajax-call-after-x-characters)

```
$("input#zipcode").live("keyup", function( event ){
    if(this.value.length == this.getAttribute('maxlength')) {
        if(!$(this).data('triggered')) {
            // set the 'triggered' data attribute to true
            $(this).data('triggered',true); 
            if ($(this).valid() == true ) { loadXMLDoc(); } 
        }
    } else { $(this).data('triggered',false); }
}); 
```

这是包含 loadXMLDoc 部分的代码部分：

```
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4)
    {
    document.getElementById("state_insert").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","state_insert.asp?zipcode="+document.getElementById('zipcode').value,true);
xmlhttp.send();
} 
```

当达到最大长度时，我希望它调用一个“LoadXMLDoc”函数，该函数不需要传递额外的参数。

目前我将它设置为 onblur="LoadXMLDoc()" 像这样：

```
[输入名称='zipcode' type='text' class="form_elements" id='zipcode' tabindex='11' autocomplete='off' onchange="this.value=extractNumeric(this.value)" onkeypress="return isNumericKey(event)" value='' size="4" maxlength="5" onblur="loadXMLDoc()" /]
```

我使用了 [ 和 ] 因为 < 和 > 是不允许的。

在文本字段属性中，但我希望它在输入邮政编码的 5 位数字后立即加载。

提前致谢 ：）

```
Robert. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:09:46.663

您可以使用 onkeypress 事件来做到这一点，例如：

```
onkeypress="return isNumericKey(event,this)" 
```

除了数字，它还应该检查最大长度。代码应该是这样的：

```
function isNumericKey(evt,zip) {
  // your Number 
  // check here

  var zipLen=zip.getAttribute('maxlength');
  var zipValueLen=zip.value.length;
  if(zipValueLen>=zipLen) { LoadXMLDoc(); return false;}
} 
```

# windows - 在没有用户交互或弹出窗口的情况下在 Windows 上打印到传真

> ID：13810934
> 
> 赞同：0
> 
> 时间：2012-12-10T23:13:52.297
> 
> 标签：windows, printing, fax

有人告诉我，有一个传真调制解调器可以用作打印机，并且我可以将它用作 Windows 中的标准打印机来完成到传真目的地的打印。真的吗？如果是这样，最好的传真调制解调器是什么？

我看到 Windows 7 中有一个名为 Microsoft Shared Fax Driver 的传真设备。是否可以仅在代码中打印，无需用户交互或弹出窗口，以实现打印到传真？

这是针对我正在处理的可以直接向打印机生成报告的应用程序。但我们正在与一位希望将报告直接发送到传真的客户交谈。我们的应用程序是一个报告库，因此没有用户交互，尽管可以配置设置传真号码，例如。我们在 Java 端使用 J2D+JPS，在 .NET 端使用 System.Drawing.Printing。我知道客户可以使用第三方库来实现这一点，但我想解决简单地使用我们现有的直接打印机功能的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:29:51.107

您可以使用内置的[传真服务扩展 COM API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684513%28v=vs.85%29.aspx)以编程方式发送传真，无需任何用户交互。

API 允许您检查机器上是否安装了任何传真设备（通过[`FaxService.FaxDevices`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684819%28v=vs.85%29.aspx)集合）并[`FaxDocument`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685958%28v=vs.85%29.aspx)通过`Body`属性将文件附加到 a。

一个警告：该`Body`属性实际上是一个字符串，其中包含应该作为传真发送的文件的路径。从文档中：**正文必须与安装在该计算机上的应用程序相关联，并且该应用程序必须支持 PrintTo 动词**。这意味着您不能直接从内存中的对象传真报告；您必须在某个位置生成一些临时可打印文件（图像、PDF 或 XPS）的报告，并将其路径设置`Body`为`FaxDocument`.

# ios - AUSampler 音频丢失

> ID：13810937
> 
> 赞同：2
> 
> 时间：2012-12-10T23:13:59.897
> 
> 标签：ios, midi, audiounit, audiotoolbox

我正在开发一个 iPad 应用程序，它使用 AUSampler AudioUnit 以及其他 AudioUnits 来播放音频。AUSampler 从 SoundFont2 文件加载预设。

当一次播放太多音符或播放音符太快时，音频会在完全退出之前开始短暂退出。在从 SoundFont 重新加载预设之前，采样器将无法使用。这只发生在某些乐器上（特别是预设 88、90 和 94，在一般 MIDI 中分别是 Pad 1（新时代）、Pad 3（复音合成器）和 Pad 7（光环））

通过在 XCode 中打开 All Exceptions 断点，我可以看到当 AudioToolbox 尝试为正在播放的音符创建新的 VoiceZone 时出现问题。但是，此异常在我的代码下方的调用堆栈中的某个较低位置被捕获，并且 AudioUnitRender 不会返回任何错误。

我最好的猜测是“垫子”乐器使用更长的样本，因此快速/同时演奏许多音符比 AudioToolbox 可用的内存更多。

以前有没有人遇到过这个问题，如果是这样，有没有办法避免音频丢失，或者至少检测到它们以便优雅地处理它们？

一些细节：

*   SoundFont 约为 150 MB，包含许多符合通用 MIDI 的不同预设/乐器
*   AUSampler 位于效果单元链的头部，这些单元连接到 AUMultiChannelMixer ( `me.masterMixerUnit`)。`audioOutputCallback`设置为 RemoteIO 单元的输出元素的输入回调

回溯（在 `AURemoteIO::IOThread 上）：

```
* thread #14: tid = 0x3203, 0x368c8498 libc++abi.dylib`__cxa_throw, stop reason = breakpoint 1.2
frame #0: 0x368c8498 libc++abi.dylib`__cxa_throw
frame #1: 0x35d46a60 AudioToolbox`VoiceZone::operator new(unsigned long) + 340
frame #2: 0x35d46b6a AudioToolbox`VoiceZone::NewVoiceZone(SamplerNote*, ZoneState*, float, float, unsigned long) + 86
frame #3: 0x35d3f846 AudioToolbox`SamplerNote::Configure(InstrumentState*) + 1106
frame #4: 0x35d3ff2c AudioToolbox`non-virtual thunk to SamplerNote::Attack(MusicDeviceNoteParams const&) + 24
frame #5: 0x35d551ea AudioToolbox`SynthNote::AttackNote(SynthPartElement*, SynthGroupElement*, unsigned long, unsigned long long, unsigned long, MusicDeviceNoteParams const&) + 58
frame #6: 0x35d5485a AudioToolbox`SynthGroupElement::NoteOn(SynthNote*, SynthPartElement*, unsigned long, unsigned long, MusicDeviceNoteParams const&) + 70
frame #7: 0x35d3d220 AudioToolbox`SamplerElement::StartNote(SynthPartElement*, unsigned long, unsigned long, MusicDeviceNoteParams const&) + 344
frame #8: 0x35d3c4fa AudioToolbox`Sampler::RealTimeStartNote(SynthGroupElement*, unsigned long, unsigned long, MusicDeviceNoteParams const&) + 94
frame #9: 0x35d530a0 AudioToolbox`AUInstrumentBase::PerformEvents(AudioTimeStamp const&) + 164
frame #10: 0x35d5313c AudioToolbox`AUInstrumentBase::Render(unsigned long&, AudioTimeStamp const&, unsigned long) + 20
frame #11: 0x35d3c564 AudioToolbox`Sampler::Render(unsigned long&, AudioTimeStamp const&, unsigned long) + 68
frame #12: 0x35c2435a AudioToolbox`AUBase::DoRenderBus(unsigned long&, AudioTimeStamp const&, unsigned long, AUOutputElement*, unsigned long, AudioBufferList&) + 210
frame #13: 0x35c24184 AudioToolbox`AUBase::DoRender(unsigned long&, AudioTimeStamp const&, unsigned long, unsigned long, AudioBufferList&) + 496
frame #14: 0x35c23f8a AudioToolbox`AUMethodRender(void*, unsigned long*, AudioTimeStamp const*, unsigned long, unsigned long, AudioBufferList*) + 50

... render methods of other AudioUnits in chain ...

frame #32: 0x00081aaa SoundBrush 2`audioOutputCallback + 194 at SoundEngine.mm:1375 
```

在下面的回调中调用 AudioUnitRender 期间引发了异常：

```
static OSStatus audioOutputCallback(void                       *inRefCon,
                                    AudioUnitRenderActionFlags *ioActionFlags,
                                    const AudioTimeStamp       *inTimeStamp,
                                    UInt32                      inBusNumber,
                                    UInt32                      inNumberFrames,
                                    AudioBufferList            *ioData)
{
    //get a reference to the SoundEngine
    SoundEngine *me = (__bridge SoundEngine *)inRefCon;

    // render the sound
    OSStatus err = AudioUnitRender(me.masterMixerUnit,
                                   ioActionFlags,
                                   inTimeStamp,
                                   kAudioUnitBus_Output,
                                   inNumberFrames,
                                   ioData);
    if (err != noErr) NSLog(@"AudioUnitRender failed [%ld]", err);

    // ... do some processing ...

    return err;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:35:06.793

如果在正常情况下音质很好，我猜想丢失不是由您的 AU 链中的编程错误引起的，而是由于操作系统无法足够快地处理块。

检测音频丢失的最简单方法是在开始处理之前以微秒为单位获取系统时间，然后在完成后再次测量。通过查看采样率和缓冲区大小，您应该能够确定您是否能够在给定的时间内交付样本。

如果你发现你确实有性能导致的丢包，你应该做的第一件事是增加缓冲区大小。之后，您应该尝试以几种基本方式优化您的代码。通过 Instruments（即分析器）运行算法并寻找任何明显的瓶颈。避免在渲染回调中分配对象；这将对系统造成额外的压力。

此外，我建议在台式计算机上运行处理代码，以确保问题确实是由 iPad 的性能引起的。

# java - 运行我的小程序时出现 ClassNotFoundException

> ID：13810940
> 
> 赞同：1
> 
> 时间：2012-12-10T23:14:23.950
> 
> 标签：java, applet, package, classnotfoundexception, dos

我在 ms-dos 中使用 appletviewer 命令行运行小程序时遇到了一些麻烦。这是我的项目树：

```
Project
|___classes
|       |___org 
|            |___test
|                  |___Test.class
|
|__src
    |___org       
         |___test
               |___Test.java 
```

这是 Test.java 源文件：

```
package org.test;

import java.applet.Applet;

/*<applet code="org.test.Test" width="200" height="100" 
codebase="..\..\..\classes\org\test"></applet>*/

public class Test extends Applet{

    public void init(){

    }

    public void start(){

    }

    public void stop(){

    }

    public void destroy(){

    }

} 
```

我在一篇文章中读到，appletviewer 只需要一个文件，其中有一个 applet 标签，这样它就会解析该文件以检索标签。这就是我对上面源文件中的注释行所做的。

源文件编译没有任何错误。然后我尝试运行它。所以我进入我的源文件所在的文件夹，我试试这个：

> prompt\Project\src\org\test>appletviewer Test.java

这是发生的错误：

> java.lang.ClassNotFoundException: org.test.Test at sun.applet.AppletClassLoader.findClass(AppletClassLoader.java:211) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.applet.AppletClassLoader.loadClass( AppletClassLoader.java:144) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:247) 在 sun.applet.AppletClassLoader.loadCode(AppletClassLoader.java:662) 在 sun.applet.AppletPanel.createApplet(AppletPanel.java:785 ) 在 sun.applet.AppletPanel.runLoader(AppletPanel.java:714) 在 sun.applet.AppletPanel.run(AppletPanel.java:368) 在 java.lang.Thread.run(Thread.java:662)

我认为错误来自我的 java 源文件的第一行，因为当我删除它时，一切正常。但我只是不知道为什么......有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:16:09.893

我相信应该是

```
codebase="../../../classes" 
```

而且您应该尝试运行 .class 文件，而不是 .java 文件，在这种情况下，当前目录应该是`classes`您尝试运行它时的目录。

# javascript - extjs4.1 根据用户定义的标准对商店进行排序

> ID：13810942
> 
> 赞同：1
> 
> 时间：2012-12-10T23:14:28.037
> 
> 标签：javascript, extjs, extjs4.1, extjs-stores

有人可以帮我根据用户定义的标准对商店进行分类吗？

```
Ext.define('Role', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'role_id', type: 'int'},
        {name: 'role_name',  type: 'string'}
    ]
}) 
```

返回的 role_name 是 admin,user,read-only,super 我想将其排序为

只读，用户，管理员，超级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T01:00:06.630

您可以使用 sort() 方法对其进行排序，如下所示：

```
Ext.define('Role', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'role_id', type: 'int'},
        {name: 'role_name',  type: 'string'}
    ]
})

var store = Ext.create('Ext.data.Store', {
    model: 'Role',    
    data: [             // non-sorted data
        [ 1, 'user' ],
        [ 2, 'super' ],
        [ 3, 'read-only' ],
        [ 4, 'admin' ]                
    ]
});

// sort the store
store.sort([{
    sorterFn: function(v1, v2) {
        var order = ['read-only', 'user', 'admin', 'super'],
            v1o   = order.indexOf(v1.get('role_name')),
            v2o   = order.indexOf(v2.get('role_name'));           

        return v1o < v2o ? -1 : 1;; 
    }
}]);

console.log(store.data); 
```

您可以在这里看到它的工作原理：http: [//jsfiddle.net/lontivero/wGc2D/4/](http://jsfiddle.net/lontivero/wGc2D/4/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:21:46.507

这在文档中有所介绍，使用自定义排序类型：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-sortType](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-sortType)

```
// current sort     after sort we want
// +-+------+          +-+------+
// |1|First |          |1|First |
// |2|Last  |          |3|Second|
// |3|Second|          |2|Last  |
// +-+------+          +-+------+

sortType: function(value) {
   switch (value.toLowerCase()) // native toLowerCase():
   {
      case 'first': return 1;
      case 'second': return 2;
      default: return 3;
   }
} 
```

# c++ - Android NDK 需要在源文件中包含绝对路径

> ID：13810944
> 
> 赞同：0
> 
> 时间：2012-12-10T23:14:32.457
> 
> 标签：c++, android-ndk, include

我一直在研究一些在 Visual Studio 和 MinGW/GCC 上编译的 C++ 代码。

我一直在我的所有源文件中使用相对包含路径。

```
#include "../../../stuff.h" 
```

但是，当我在 Android NDK 上编译时会出现一个巨大的问题。

如果一个头文件有一个相对于另一个头文件的包含，看起来 NDK 包含它相对于原始文件。

所以如果在`"a/b/c/source.cpp"`

我愿意`#include "../../header.h"`

在`"a/header.h"`我的内心深处

```
#include "../hello.h" 
```

而不是包括 from`"hello.h"`我认为它是相对于`source.cpp`文件路径的。它最终会在`"a/b/header.h"`

这可以通过我将头文件中的所有包含重写为绝对路径来解决，这是一个巨大的痛苦。我希望有一种方法可以通过 NDK 避免这种情况。我什至不确定问题到底是什么，它可能是我需要设置的一些常见的 make 文件命令或变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:56:07.037

你应该添加

```
LOCAL_C_INCLUDES :=" YOUR FILES DIRECTORY" 
```

进入你的 android.mk

# d3.js - 排序条形图

> ID：13810946
> 
> 赞同：0
> 
> 时间：2012-12-10T23:14:36.513
> 
> 标签：d3.js, label, bar-chart

我喜欢 d3[可排序条形图示例](http://bl.ocks.org/3885705)：

![在此处输入图像描述](../Images/4d0115e20e1959afa7c70993be0fa347.png)

不幸的是，它在 v2 中似乎无法正常工作（示例使用 v3）。一开始我以为是我，所以从头写了一个[新的例子。](https://gist.github.com/4254171)唉，事实并非如此！在 v2 中，x 轴标签不随条形过渡；在 v3 中，标签和条形图一起过渡。

任何人都可以建议 v2 的解决方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:20:40.630

好的，我认为这个问题有两种解决方案。正如 Robert Harvey 指出的那样，您可以使用 v3。到目前为止，我可以看到的主要区别是`d3.tsv`（可能还有其他读取数据方法）采用了一个额外的参数：这是导致我的代码的其他部分失败的原因。因此，即使 v3 不是最新版本，这也是我的首选解决方案。

第二种解决方案是显式转换轴标签。这将需要更多代码，并且由于 v3 即将推出（希望如此！），只有在您真的迫不及待并且绝对必须使用 v2 时才可能需要。

# wordpress - jquery lightbox 和 flash/html5 视频之间的冲突 - 仅在 chrome 中

> ID：13810948
> 
> 赞同：0
> 
> 时间：2012-12-10T23:15:03.950
> 
> 标签：wordpress, google-chrome, html5-video, lightbox, flash-video

我有一个 wordpress ng 画廊模板：[http](http://bit.ly/LTJ9ee) ://bit.ly/LTJ9ee ，当视频嵌入同一页面时，它的灯箱在 chrome 中的行为很奇怪。只有在以下情况下才会出现问题：

*   使用铬 (v23)。在所有其他主要浏览器（Windows 7）上测试没有问题。
*   如果页面对于视口来说太大（有滚动条）
*   页面有内嵌视频，视频已经启动（html5和flash都出现同样的问题）

如果您查看此处的页面：http: [//bit.ly/123NW1C](http://bit.ly/123NW1C)，似乎正在发生的事情是仅在上述条件下，灯箱不会移动以适应视口。这使得它的一部分显示两次，而部分则根本不显示。网络检查员说 div 的位置正确，但“如所见”，它们不是。

我目前对此感到困惑。wmode 修复没有帮助，我在网上找到的其他任何东西也没有帮助。关于这可能是什么的任何想法？铬中的错误？或者关于这个灯箱与嵌入式视频交互的方式。

# javascript - onclick 函数无需单击 JavaScript 即可执行

> ID：13810950
> 
> 赞同：1
> 
> 时间：2012-12-10T23:15:15.433
> 
> 标签：javascript, html, onclick, dom-events

我正在使用一些 JavaScript 和 Ajax 函数。我将添加一些代码，同时我会更清楚地解释自己。

我有这个元素：`<div id="divTest" onclick="test()">YES</div>`

当用户单击 DIV 时，该函数将“YES”替换为如下所示：

```
YES <input type="radio" name="testing" value="YES" onclick="test_2(this.value)" checked /> 
NO <input type="radio" name="testing" value="NO" onclick="test_2(this.value)" /> 
```

这允许用户再次选择正确的选项。然后我想用新值替换单选按钮，所以当用户选择任何选项时，DIV 会替换“单选”选项并显示选择的值（是或否），就像它在开始时一样。

在这一点上，一切都很完美。

这是我的问题：

我希望`onclick()`DIV`onclick="test()"`以`div.onclick = function() { test();};`. `test()`即使用户没有点击 div，该函数也会执行。它会立即执行这两个功能，并且不会等到单击它。

有谁知道我怎样才能让功能等到有任何点击它？我是否`onclick`错误地提供了财产？

我希望我说清楚了。

以下是功能：

```
function test() {
   var div = document.getElementById("divTest");
   //I DO NOT INCLUDE THE AJAX CODE BUT THE RESPONSE INCLUDE THE RADIO BUTTONS METIONED ABOVE
   div.innerHTML = xml.responseText();
}

function test_2(newValue) {
   div = document.getElementById("newValue");
   div.innerHTML = newValue;
   div.onclick = function() { test(); };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:19:56.280

是的，您的问题在于`div.onclick =`您实际上是在为您的 div 分配点击操作！这将在您的页面加载时执行。

你想要的是像这样分配一个事件监听器。

```
div.addEventListener('click' function(){}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-31T09:04:10.833

我遇到了同样的问题，我找到了这个页面。我检查了 addEventListener 的规范，发现我输入了过多的括号。

有两种方法可以做到这一点：
1.使用匿名函数（即没有名称，定义及时使用），如上面的答案。
2.不能加括号。只需使用 ('click', myfunction)。

如果要使用参数，请将函数包装成匿名函数。像这样：div.addEventListener('click', function(){myfunction(e){}})。

有点晚了，希望您能阅读并解决您的问题。

# operating-system - 适用于所有操作系统的路径名

> ID：13810951
> 
> 赞同：-1
> 
> 时间：2012-12-10T23:15:17.447
> 
> 标签：operating-system, pathname

我创建了一个程序来下载文件并将其放在特定位置，但我无法让它在所有系统上运行。我可以改变它以使其在所有操作系统上都能正常工作。/Users/anthonybuttillo/Library/Application Support/minecraft/mods/Enderized.zip

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:37:40.583

**这个**特定案例（Minecraft mod）的问题相对简单，因为 Minecraft 安装所在的位置是标准化的。可以在[这里](http://www.minecraftforum.net/topic/124583-guide-how-to-install-mods-for-minecraft/)阅读Minecraft 安装文件夹是

*   Windows Vista/7：C:\Users\YourUserName\AppData\Roaming\.minecraft
*   Windows XP：C:\Documents and Settings\YourUserName\Application Data\.minecraft（注意 - 两种 Windows 变体都可以通过`APPDATA`环境变量找到）
*   Linux：/home/你的用户名/.minecraft
*   Mac OS/X: ~/Library/Application Support/minecraft

因此，只需检测操作系统并从用户的主目录（`String s1 = System.getProperty("user.home", ".");`在 Java 中）开始，您就可以构建所需的路径。

# mysql - 将字符串更改为日期时间，然后将数据复制到新表并进行比较

> ID：13810955
> 
> 赞同：1
> 
> 时间：2012-12-10T23:15:30.410
> 
> 标签：mysql, sql, datetime

我已经研究了一个星期，但仍然没有运气。我有一个通过 php 加载到“temploadsi”表中的 txt 文件。文本文件将始终包含数据库中已有的旧数据，因此我只想要“新”数据。我的想法是有一个加载表'temploadsi'，然后比较时间戳并仅将“新”数据导入表'tempdatasi'。问题是时间戳列的格式类似于“MM/DD/YYYY HH:MM:SS”，并且不会进入 mySQL 日期时间字段。因此，我将其设置为文本字段。我想将文本转换为日期时间字段，如“YYYY-MM-DD HH:MM:SS”。我查看了 STR_TO_DATE 和 DateTime 函数，但无法更新“temploadsi”。大家能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:25:17.150

您未能更新该字段的原因是因为您的数据时间`24:59:59`无效。我认为的最长时间是`23:59:59`，因此要将其转换为日期，您需要使用以下格式

```
SELECT DATE_FORMAT(STR_TO_DATE(datetime,'%m/%d/%Y %x:%x:%x'), '%Y-%m-%d 23:59:59')
FROM table1 
```

[请参阅 SQLFiddle 现场演示](http://sqlfiddle.com/#!2/13bf1/3)

所以如果你不想更新你的字段，你可以使用这个查询

```
UPDATE tableName
SET your_columnname = DATE_FORMAT(STR_TO_DATE(your_columnname, '%m/%d/%Y %x:%x:%x'), '%Y-%m-%d 23:59:59') 
```

并且此查询假定您要更新的列具有`VARCHAR`数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:26:45.647

类似 Str_to_date('12/10/2012 23:59:59','%m/%d/%y %h:%i:%s')

不明白为什么你找不到这个

[Mysql 帮助] [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

# asp.net-mvc - 部分页面回发'ish MVC 4

> ID：13810956
> 
> 赞同：2
> 
> 时间：2012-12-10T23:15:39.303
> 
> 标签：asp.net-mvc, asp.net-mvc-4, c#-4.0

首先，如果这是一个愚蠢的问题，我深表歉意，但我是 MVC 的新手，我正在努力尽快跟上进度。我花了几个小时寻找答案，甚至去买了一本关于 MVC 4 的书，但它仍然没有回答我的问题。

我有一个表格，希望用户填写以将新产品添加到目录中。他们选择类别，输入名称，描述等。在同一页面上，我希望他们能够添加尺寸或产品选项，例如小、中、大等。问题是我不知道该怎么做。

例如，我需要将尺寸选项临时存储在某种集合中，直到用户真正“保存”产品，然后我需要能够读取集合。我要避免的是让用户添加基本产品信息，然后保存它，然后选择它，然后选择向它添加选项。我正试图在一张表格上完成所有工作。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:25:41.173

没有什么可以阻止您创建一个视图模型，该模型具有自己的详细项集合，并将这些集合映射到某种 javascript 控件以选择多个项目，例如写入 mvc 隐藏表单控件的项目。

处理回发的控制器将简单地从回发数据（更新的视图模型）创建主模型，然后创建子记录。整个事情可以通过 ajax 调用一个控制器操作来实现，该操作返回更新后的 ui 的部分视图。

与此类似，但将列表作为主模型的属性

[http://www.stevefenton.co.uk/Content/Blog/Date/201002/Blog/How-To-Handle-Multiple-Select-Lists-In-ASP-NET-MVC/](http://www.stevefenton.co.uk/Content/Blog/Date/201002/Blog/How-To-Handle-Multiple-Select-Lists-In-ASP-NET-MVC/)

关于如何管理自己的绑定更高级一点[http://www.dotnetcurry.com/ShowArticle.aspx?ID=584](http://www.dotnetcurry.com/ShowArticle.aspx?ID=584)

听起来您需要卷起袖子并获得一个用javascript编写的控件，该控件允许将子项添加到客户端，例如在保存时将其序列化为json并将其保存到准备回发的mvc隐藏控件中。使用 json.net 将这些值水合到您的 pocos 中。[http://erraticdev.blogspot.co.uk/2010/12/sending-complex-json-objects-to-aspnet.html](http://erraticdev.blogspot.co.uk/2010/12/sending-complex-json-objects-to-aspnet.html)

# c# - 根据组合框选择更新文本框（.CSV/Array）

> ID：13810959
> 
> 赞同：0
> 
> 时间：2012-12-10T23:15:59.620
> 
> 标签：c#, .net, winforms, csv, properties

我有一个包含列的 .csv 文件。我已经有一个表单，允许用户将信息插入并保存到这个 .csv 文件中。

在一个单独的表单上，我创建了通过项目 ID 选择项目的功能。我有一个组合框，它显示 .csv 文件中的项目 ID 的下拉列表。目前，唯一的项目 ID 是 1000-1003。

```
 public void Items()
    {
        int itemID = 0;
        Inventory[] IArray = Inventory.getInv();
        for (int v = 0; v < IArray.Length; v++)
        {
            if (IArray[v] != null)
            {
                itID = IArray[v].getIID();
                Field.Items.Add(itID + "\r\n");
            }
        }
    } 
```

当我选择某个项目 ID 时，我希望我的只读文本框根据文件更新为适当的名称/折扣/价格。问题是，无论我选择什么 ID，它都会显示 .csv 文件的最后一行（现在最后一行是 Item ID 1003）。

```
 private void Field_SelectedIndexChanged(object sender, EventArgs e)
    {
        string itName = "";
        double disc = 0;
        double price = 0;
        Inventory[] IArray = Inventory.getInv();
        for (int v = 0; v < IArray.Length; v++)
        {
            if (IArray[v] != null)
            {
                itName = IArray[v].getItName();
                disc = IArray[v].getDisc();
                price = IArray[v].getPrice();

                itNameS.Text = (itName);
                itPriceS.Text = Convert.ToString(price);
                itDiscountS.Text = Convert.ToString(disc);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:54:21.423

您可以使用如下项目列表来绑定到您的组合框。然后，您可以设置索引上的文本框文本值已更改。

我的属性与您的属性不完全匹配，但可以节省您的时间，因为您不需要在每次更改 index.html 时都获取项目。

```
class Item : INotifyPropertyChanged
{

    public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyChanged(string info)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(info));
    }

    private string _itemId;
    public String ItemID
    {
        get { return _itemId; }
        set { _itemId = value; NotifyPropertyChanged("ItemID"); }
    }

    private string _itemName;
    public String ItemName
    {
        get { return _itemName; }
        set { _itemName = value; NotifyPropertyChanged("ItemName"); }
    }

    private double _discountValue;
    public Double DiscountValue
    {
        get { return _discountValue; }
        set { _discountValue = value; NotifyPropertyChanged("DiscountValue"); }
    }

    private double _price;
    public Double Price
    {
        get { return _price; }
        set { _price = value; NotifyPropertyChanged("Price"); }
    }
}

public partial class Form1 : Form
{
    BindingList<Item> OurItems = new BindingList<Item>();

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        PopulateItems();
        BindComboBox();

    }

    private void BindComboBox()
    {
        cboItems.DataSource = OurItems;
        cboItems.DisplayMember = "ItemID";
        cboItems.ValueMember = "ItemID";
    }

    private void PopulateItems()
    {
        StreamReader sr = new StreamReader(@"New Text Document (4).txt");
        foreach (string sLine in sr.ReadToEnd().Split(new string[] {"\r\n"}, StringSplitOptions.RemoveEmptyEntries ))
        {
            var oProps = sLine.Split(new char[] {','});
            OurItems.Add(new Item() {ItemID = oProps[0], ItemName = oProps[1], DiscountValue = Double.Parse(oProps[2]), Price = Double.Parse(oProps[3])});
        }
    }

    private void cboItems_SelectedIndexChanged(object sender, EventArgs e)
    {
        var oSelected = (Item)cboItems.SelectedItem;

        tbName.Text = oSelected.ItemName;
        tbDiscount.Text = oSelected.DiscountValue.ToString();
        tbPrice.Text = oSelected.Price.ToString();

    }

    private void button1_Click(object sender, EventArgs e)
    {
        OurItems[0].Price = OurItems[0].Price + 50;
    }
} 
```

* * *

![在此处输入图像描述](../Images/0eadfb68eaefe560bceeb07820cea20f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:24:52.097

您正在遍历整个数组并更新每条记录（行；数组元素）的框。

您需要添加一个停止处理/更新的条件。类似于以下内容：

```
 for (int v = 0; v < myInvArray.Length; v++)
    {
        if ((myInvArray[v] != null) || (myInvArray[v].getItemID() == the_id_from_the_combobox))
        {
            itemName = myInvArray[v].getItemName();
            discountValue = myInvArray[v].getDiscountValue();
            price = myInvArray[v].getPrice();

            itemNameShown.Text = (itemName);
            itemPriceShown.Text = Convert.ToString(price);
            itemDiscountShown.Text = Convert.ToString(discountValue);
        }
    } 
```

# python - Python求和itertools.count？

> ID：13810960
> 
> 赞同：2
> 
> 时间：2012-12-10T23:16:05.210
> 
> 标签：python, count, itertools, infinite

我在使用 itertools.count 函数时遇到了一些问题，我不太明白它的作用。我希望下面的代码能够完成[Project Euler 问题 2](http://projecteuler.net/problem=2)。

我知道我可以用一个简单的while循环来写这个，但是有没有办法用列表理解来做到这一点？这段代码只是冻结，因为我猜它会随着 count() 变得无穷大。我希望它会在 x > MAX 之后停止，但我知道这不会发生。有没有办法在下面的生成器表达式中停止计数？

```
def fib(n):
    if (n <= 1): return 1
    else: return fib(n-1) + fib(n-2)

MAX = 4000000

infiniteFib = (fib(x) for x in count())

s = (x for x in infiniteFib if x < MAX and x % 2 == 0)

print sum(s) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T23:27:51.060

你可以使用[`takewhile`](http://docs.python.org/2/library/itertools.html#itertools.takewhile)：

```
>>> from itertools import count, takewhile, imap
>>> sum(x for x in takewhile(lambda x: x < 4000000, imap(fib, count())) if x % 2 == 0)
4613732 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T23:28:58.147

我们只需要告诉`infiniteFib`生成器何时停止生成元素。[`itertools`](http://docs.python.org/2/library/itertools.html)提供了许多有用的方法来帮助解决这个问题：

```
less_than_max = itertools.takewhile(lambda x: x<MAX, infiniteFib))
even = itertools.ifilter(lambda x: x%2==0, less_than_max)
print sum(even) 
```

我们得到一个生成器，用于生成由 产生的所有数字`infiniteFib`，直到返回的数字大于`MAX`。然后我们过滤那个生成器，只选择偶数。最后我们可以总结结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T23:33:08.870

怎么样：

```
def fib():
    a, b = 1, 1
    while True:
        yield b
        a, b = b, a+b

sum(f for f in itertools.takewhile(functools.partial(operator.ge, 4000000), fib()) if f % 2 == 0) 
```

或者，将奇偶校验推入生成器：

```
def even_fib():
    a, b = 1, 1
    while True:
        if b % 2 == 0: yield b
        a, b = b, a+b

sum(itertools.takewhile(functools.partial(operator.ge, 4000000), even_fib())) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T23:20:31.350

是的，`count()`只是继续前进，这不是你想要的。列表推导/迭代器表达式没有灵活的退出条件（但请参阅@DSM 的解决方案使用`takewhile`）。

我更喜欢只使用`while`.

这是我对欧拉 2 的旧答案：

```
def SumEvenFibonacci(limit):
        x = y = 1
        sum = 0
        while (sum <= limit):
                sum += (x + y)
                x, y = x + 2 * y, 2 * x + 3 * y
        return sum

ce = SumEvenFibonacci(4000000)
print ce 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T23:33:11.213

这是另一个使用`takewhile`，但非递归的解决方案。由于递归解决方案需要`fib`为每个 n 计算所有小于 n 的 s，因此速度非常慢。

```
def fib_gen(only_even=False):
    one = 1
    if not only_even:
        yield one
    two = 1
    if not only_even:
        yield two
    while True:
        next = one + two
        one = two
        two = next
        if only_even:
            if next % 2 == 0:
                yield next
        else:
            yield next

list(itertools.takewhile(lambda x: x < 4000000, fib_gen())) 
```

# iphone - 滑块将改变背光

> ID：13810962
> 
> 赞同：-1
> 
> 时间：2012-12-10T23:16:23.280
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试制作一种亮度选项面板。输入此代码后：

```
NSString *string = [[NSString alloc] initWithFormat:@"%f", slider.value];

[[UIScreen mainScreen] setBrightness:string]; 
```

我收到以下错误：

```
Sending 'NSString *__strong' to parameter of incompatible type 'CGFloat' (aka 'float') 
```

为什么这段代码不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:21:43.083

您收到此错误是因为该`brightness`属性不是 a `NSString`，而是 a `CGFloat`。尝试：

```
[[UIScreen mainScreen] setBrightness:slider.value]; 
```

# javascript - Node.js 服务器打印比实际值晚数小时的静态日期

> ID：13810964
> 
> 赞同：-1
> 
> 时间：2012-12-10T23:16:25.553
> 
> 标签：javascript, node.js, datetime, timezone

尝试从 Heroku 服务器上的节点应用程序打印时间。打印出来的时间不匹配...

这是一个 6 小时的差异（我们在 GMT-6 中），所以这是一个 timezome 问题是有道理的。但是，我很矛盾，因为打印的日期是按以下格式创建的：

```
var time = (new Date('2012', '12', '10')).valueOf();
console.log(time); 
```

给出`1355097600000`而不是`1355119200000`.

静态创建的日期应该始终是静态的，对吗？无论您在哪个时区，开头的`2012/12/10`长度都应该与`1970/01/01`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:07:21.447

Javascript 根据浏览器或节点服务器的时区创建日期。要获取静态日期，您需要传入要在其中创建日期的时区。示例：

```
var time = (new Date('December, 2012 12:00:00 pm GMT')).valueOf(); 
console.log(time) 
```

返回

```
1354363200000 
```

我的时区是 PST，所以如果我这样做

```
var time = (new Date('December, 2012 12:00:00 pm PST')).valueOf(); 
console.log(time) 
```

它返回相同的值（1354392000000），就像我已经完成一样

```
var time = (new Date('December, 2012 12:00:00 pm')).valueOf(); 
console.log(time) 
```

# c++ - 使用链表排序插入

> ID：13810967
> 
> 赞同：0
> 
> 时间：2012-12-10T23:16:32.120
> 
> 标签：c++, linked-list, iteration

我在为链表中的排序插入实现一个迭代函数时遇到了一些困难。我以前用递归完成了这一点，这在`insert()`调用函数时要容易得多，但在这里我对如何实现`(l->data < data)`条件有点困惑：

```
typedef struct E_Type * List;

struct E_Type
{
  int data;
  struct E_Type* next;
}; 
```

和功能：

```
insert(List & l, int data){
  if (l == 0 || l->data > data){
    List new_list = new E_Type;
    new_list->data = data;
    new_list->next = l;
    l = new_list;
  }
  else if (l->data < data){
    List new_list = new E_Type; 
    new_list->data = data;
    new_list->next = l; //i am shooting in the dark with this one
    l = new_list;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:18:49.420

我不会为你编写代码，但会提供一些提示。

从根本上讲，有两种情况：

1.  被插入的元素成为新的头部。在这种情况下，您需要更新`l`.
2.  插入的元素**不会**成为新的头部。在这种情况下，您需要一个循环。

如果我是你，我会先用笔和纸处理这两种情况。

# php - 用户在PHP表单中注册后我该怎么办？

> ID：13810969
> 
> 赞同：1
> 
> 时间：2012-12-10T23:16:38.943
> 
> 标签：php

我正在构建我的第一个 PHP 站点，即使使用新的 PDO API，我的注册过程也可以正常工作，但是当我成功注册用户后，我不知道该怎么办？

所以，换句话说，`register.php`页面没有任何标记，我只是用它来`POST`建立记录。

对不起，伙计们，我只是还不明白大多数人是如何使用 PHP 的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:24:25.057

你可以用许多不同的方式来处理它。

1.  一页带有标记，一页用于处理帖子。（这就是你现在的样子）。您的 register.php 页面可以从您的表单中获取 $_POST 变量，验证它们，如果可以，然后显示快速消息显示（“做得好！”）`echo "Well done";`
2.  您也可以不显示回显“做得好”，而是重定向到另一个页面，这样`thank-you.php`只会显示您已注册消息。这很好，因为如果您的用户尝试刷新页面，它不会尝试生成新的注册。（见[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)）
3.  在一个 php 文件中处理所有内容。例如。如果 $_POST 为空，则显示注册表。如果 $_POST 有项目，检查并验证并显示消息（成功或请修复以下数据并显示表单。（示例：http: [//www.html-form-guide.com/php-form/php-form-教程.html](http://www.html-form-guide.com/php-form/php-form-tutorial.html) )

显然，发送表单还有很多内容——验证/清理是其中的主要部分，但由于您只是在学习基础知识，我认为您现在可以忘记它。永远记得先研究，尽量不要发明轮子（参见示例[http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)以帮助您进行消毒）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:21:16.320

这取决于你。通常，您会显示一个注册确认页面，让用户知道他们的注册成功。如果您要发送激活电子邮件，现在是这样做的好时机，并让他们知道。此外，从该页面指向成员区域的链接也很有帮助。您也可以直接从注册确认页面登录用户。

# jquery - Symfony 和 Ajax

> ID：13810973
> 
> 赞同：0
> 
> 时间：2012-12-10T23:17:10.960
> 
> 标签：jquery, ajax, symfony1, xmlhttprequest, symfony-1.4

这是我第一次在 Symfony 环境中涉足 Ajax，我可能对代码的组织方式有些困惑。

假设我的 ajax 调用如下所示：

```
$.getJSON('module/getMeSomeJSONThroughAjax', function(data) {console.log(data); } ) 
```

在我的模块/操作文件夹中，actions.class.php 文件有一个方法：

```
public function getMeSomeJSONThroughAjax()
{
   // do something
   return $jsonEncodedString;
} 
```

请记住，我是`not creating a template for the above method`，因此我没有大多数其他操作那样的**执行前缀。**只是因为我不认为创建模板对于仅获取 AJAX HTTP 请求的 JSON 数据是一种过度杀伤的情况。

但是，当我的浏览器中发生触发 Ajax 调用的事件时，我的控制台会记录以下内容：

```
> Failed to load resource: the server responded with a status of 404
> (Not Found)
> http://localhost:8080/customerview_dev.php/flashcard/getMeSomeJSONThroughAjax 
```

我认为这是一个路由问题。简单地摆脱问题的一种可能方法是为上述创建一个模板并将 Action 重命名为`executeGetMeSomeJsonThroughAjax()`. 但就像我提到的那样，恕我直言，这太过分了，必须有一种更美观、更恰当的方式来完成这项工作。

你们 Symfonians 为进行 Ajax 调用做了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:48:17.110

即使您没有模板，您仍然需要执行前缀。如果需要，您可以将模板设置为无，或者：

```
return $this->renderText($jsonEncodeString); 
```

也应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T15:36:57.473

这样做的想法是：

控制器：

```
namespace something;

use Symfony\Bundle\FrameworkBundle\Controller\Controller; 
use Symfony\Component\HttpFoundation\Response;

class AjaxController extends Controller {
    public function doSometingInAjaxAction()
    {
        $request        = $this->getRequest();
        $id             = $request->get('id');    
        $em             = $this->getDoctrine()->getManager();
        $object         = $em->getRepository('Bundle:Bundle')->find($id);
        $objectJson     = json_encode($object);        
        return new Response($modelosJson);        
    } } 
```

风景：

```
<script>
     $(document).ready(function(){

     //...

     $.ajax({
        url: '{{ path('admin_ajax_ajax') }}', 
        data: id,
        success: function (response) 
        {    
         //someting
         }                
     });
     });

</script> 
```

路由器

```
admin_ajax_ajx:
    path:  /a/supercool/path//
    defaults: { _controller: Bundle:Ajax:doSometingInAjax } 
```

这是我的基础和工作

# arrays - 数组变量修改node.js

> ID：13810974
> 
> 赞同：1
> 
> 时间：2012-12-10T23:17:15.820
> 
> 标签：arrays, node.js, variables

我不明白为什么我的变量会改变

```
if(chat.users[i + 1])
    console.log("1: " + chat.users[i + 1].username);
if(save[i+1])
    console.log("2: " +  save[i + 1].username);

chat.users[i + 1] = save[i];

if(chat.users[i + 1])
    console.log("3: " + chat.users[i + 1].username);
if(save[i+1])
    console.log("4: " + save[i + 1].username); 
```

我有

```
1: test1
2: test1
3: test
4: test 
```

我不明白为什么我没有

```
1: test1
2: test1
3: test
4: test1 
```

谢谢

编辑：所有代码都在那里

[http://codepaste.net/gi5ghf](http://codepaste.net/gi5ghf) （第 92 行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:36:53.787

现在你的代码很清楚了！让我们来看看

```
var chat = {
        users: [
            {
                username: "test"
            },
            {
                username: "test1"
            }
        ]
    },
    // creating reference from save to chat.users
    save = chat.users,
    i = 0;
if (chat.users[i + 1]) {
    // should be chat.users[1].username ("test1")
    console.log("1: " + chat.users[i + 1].username); // output "test1"
}
if (save[i + 1]) {
    // should be save[1].username ("test1")
    console.log("2: " + save[i + 1].username); // output "test1"
}

/*
 * creating reference
 * so chat.users[i + 1] is now save[i] ({ username: "test" })
 * and because save is reference of chat.users, save[i + 1] is now also now save[i] ({ username: "test" })
 */
chat.users[i + 1] = save[i];

if (chat.users[i + 1]) {
    // should be chat.users[1].username ("test")
    console.log("3: " + chat.users[i + 1].username); // output "test"
}
if (save[i + 1]) {
    // should be chat.users[0].username ("test")
    console.log("4: " + save[i].username); // output "test"
} 
```

**什么？**

让我再给你解释一下。例如你得到了这个：

```
var a = [1, 2]; 
```

现在你写这个：

```
var b = a; 
```

也许您想将 a 复制到 b 但您只创建了一个参考！

所以看看这个：

```
console.log(a, b);
//=> [1, 2] [1, 2]
a[0] = 3;

console.log(a, b);
//=> [3, 2] [3, 2]

b[0] = 4;

console.log(a, b);
//=> [4, 2] [4, 2] 
```

因此，如果您更改对象或数组的一个值，则另一个值也会更改，因为它只是一个引用，并且它们都具有相同的内存地址。

如果你真的想克隆/复制对象/数组，那么看看[这个问题](https://stackoverflow.com/q/5055746/1001563)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:33:30.807

save[i] 似乎是用户名为“test”的用户。您正在将此用户分配给 chat.users[i + 1]：

```
chat.users[i + 1] = save[i]; 
```

然后你打印出它的用户名：

```
if(chat.users[i + 1]) console.log("3: "+chat.users[i + 1].username); 
```

最后，您将打印出 save[i] 的用户名：

```
if(save[i+1]) console.log("4: "+save[i].username); 
```

它会打印出“test”，因为这就是 save[i] 的用户名。

也许您的意思是最后一行打印出 save[i + 1] 的用户名，而不是 save[i] 的用户名？save[i + 1] 的用户名是“test1”。

# html - 在浏览器中检测 Windows Phone 8

> ID：13810981
> 
> 赞同：3
> 
> 时间：2012-12-10T23:18:03.350
> 
> 标签：html, internet-explorer, user-agent, windows-phone-8

[此链接](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/10/17/getting-websites-ready-for-internet-explorer-10-on-windows-phone-8.aspx)声称 Windows Phone 8 设备将获得一个唯一的用户代理字符串，该字符串指定“Windows Phone 8”和“MSIE 10.0”。然而，在我对两个生产 WP8 设备（诺基亚 Lumia 920 和 HTC 8x）的测试中，它们都继续报告 IE 9 和 Windows Phone OS 7.5。

有谁知道发生了什么？

编辑：一位朋友建议这可能与 html 页面上不正确的文档类型有关，但这对我来说没有意义，因为我在 ASP.net MVC 站点的 OnActionExecuting 事件中检测到此用户代理（此时我还没有向用户返回文档类型）。

编辑 2：这个网站将在 Xaml 应用程序的 webbrowser 控件中运行，而不是在浏览器中运行，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:57:20.570

我的代码在 WP7 XAML 应用程序和 WebBrowser 控件中执行。如果您想在您的应用程序中获得更新的浏览器，您必须将您的应用程序升级到 WP8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T08:10:14.653

我不能满足你的问题。我的 htc 8x 的 ua 是：Mozilla/5.0（兼容；MSIE 10.0；Windows Phone 8.0；Trident/6.0；IEMobile/10.0；ARM；Touch；HTC；HTC 的 Windows Phone 8X）

该网站可以检测到您的用户代理。 [http://whatsmyuseragent.com/](http://whatsmyuseragent.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T10:32:49.853

```
function isIEMobile() {
    var regExp = new RegExp("IEMobile", "i");
    return navigator.userAgent.match(regExp);
} 
```

# inline - 垂直内联块？

> ID：13810989
> 
> 赞同：1
> 
> 时间：2012-12-10T23:18:51.807
> 
> 标签：inline, css, direction

目前我有这样的[东西](http://jsfiddle.net/XgCDb/)。“Page”和“Row”元素是使用 javascript 动态创建的。

当有多个 Pages 时，问题就出现了，并且第 1 页中的一个 Row 被删除，[例如](http://jsfiddle.net/mxpVc/2/). 空白区域应由下面的元素填充，如果空白区域位于页面末尾，则下一页的第一个元素应填充空白区域，依此类推。最后它应该看起来像[这样](http://jsfiddle.net/DHXKU/1/)。

我可以解决这个重新排列/重新创建整个`PageCont`.

有没有办法使用纯 CSS 来实现这一点？所以重新排列将由浏览器的渲染引擎处理。

像[这样](http://jsfiddle.net/HatvF/18/)的内联块，但具有垂直方向。

非常感谢任何帮助。

​HTML：

```
<div class="PageCont">
    <div class="Page">
        <div class="Row">1</div>
        <div class="Row">2</div>
        <div class="Row">3</div>
        <div class="Row">4</div>
    </div>
    <div class="Page">
        <div class="Row">5</div>
        <div class="Row">6</div>
        <div class="Row">7</div>
        <div class="Row">8</div>
    </div>
    <div class="Page">
        <div class="Row">9</div>
    </div>
</div>​ 
```

CSS：

```
.PageCont
{
    height: 300px;
    width: 350px;    

    border:2px solid red
}

.Page
{
    float:left;
    margin-left:10px;
}

.Row
{
    height:50px;
    width:50px;

    background-color:blue;
    color:white;
    margin-top:10px;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:56:21.063

如果它包括水平环绕，使用简单的 CSS，则可以轻松地成功执行该操作。但是，由于这种情况涉及垂直包装，因此您当前的实现需要使用 javascript。如果您要使用列，则不需要 javascript，只需要 CSS。
这是我实现它的小提琴[http://jsfiddle.net/eQvaZ/](http://jsfiddle.net/eQvaZ/)

HTML如下：

```
<body>
    <div class="pageCont">
        <div  class="Row">C1</div>
        <div class="Row">C2</div>
        <div  class="Row" id="to-remove">C3</div>
        <div  class="Row">C4</div>
        <div  class="Row">C5</div>
        <div  class="Row">C6</div>
        <div  class="Row">C7</div>
    </div>
    <div>Removing C3 in 5 seconds...</div>
</body> 
```

CSS：

```
.pageCont{
    column-count:2;
    column-rule:0px;
    -webkit-column-count: 2;
    -webkit-column-rule: 0px;
    -moz-column-count: 2;
    -moz-column-rule: 0px;
    padding:10px;
    height: 250px;
    width: 200px;
    border:2px solid red
 }

.Row {
    height:50px;
    width:50px;
    background-color:blue;
    color:white;
    margin-bottom:10px;
 } 
```

用于删除项目的 JavaScript 代码：

```
setTimeout( function(){
var to_remove = document.getElementById('to-remove');
to_remove.parentNode.removeChild(to_remove);
}, 5000); 
```

如果您对此实施有任何疑问，请告诉我。

# ruby-on-rails - 将数据从一对多迁移到 HABTM 关系

> ID：13810991
> 
> 赞同：1
> 
> 时间：2012-12-10T23:19:25.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-and-belongs-to-many, rails-migrations

我是 Rails 新手，正在努力更新一个简单的 Rails 应用程序。它目前在 :categories 和 :galleries 之间存在一对多的关系。我已将两个模型都更改为 HABTM 关系，并创建了连接表迁移。

有没有办法设置迁移，以便可以将先前存储在类别表中的 gallery_ids 移动到连接表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:48:36.840

您可以在向上迁移中执行类似的操作。

```
Category.all.each do |cat|
 gallery = Gallery.find(cat.gallery_id)
 cat.galleries << gallery
 cat.save
end 
```

您可能希望破坏关联并将 gallery_id 添加回向下迁移中。

# debugging - 恢复内存转储

> ID：13810993
> 
> 赞同：3
> 
> 时间：2012-12-10T23:19:36.523
> 
> 标签：debugging, memory-dump

如果在没有调试器的计算机上进行测试，比如说客户的计算机，我遇到了一个可能已经破坏程序状态但实际上并没有崩溃的错误，我知道我可以使用 Windows 任务管理器进行内存转储（右键单击在进程名称上，创建转储文件）。

我可以将这些与 WinDbg 一起使用来查看内存等，但对我来说最有用的是能够将转储恢复到内存中，以便我可以继续与程序交互。这可能吗？如果是这样，怎么做？是否有可以恢复它的工具或者我需要自己编写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T20:18:25.420

典型的用户模式转储或小型转储不包含足够的信息来执行此操作。虽然它们包含所有用户模式内存，但它们不包含内核内存，因此文件或网络套接字等内核资源的打开句柄不会包含在转储中（即使它们是，硬盘很可能已更改，因此只是尝试写入硬盘可能会进一步损坏您的系统）。

我看到恢复内存转储的唯一方法是恢复完整内存和所有其他状态，如硬盘状态，这可以通过大多数虚拟机软件完成（但是，这将在恢复时断开所有网络连接；感谢大多数程序可以比丢失的文件句柄更好地处理丢失的网络连接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:47:39.637

我发现我可以使用 Hyper-V 快照来做到这一点。如果我在虚拟机中运行我的程序，我可以选择转储内存，创建快照，必要时传输转储，稍后再回来，恢复快照并继续程序。

# javascript - 第一张图片崩溃

> ID：13810995
> 
> 赞同：1
> 
> 时间：2012-12-10T23:19:55.070
> 
> 标签：javascript, html, cordova

什么都不做，我启动应用程序，拍照，我可以看到本机相机应用程序需要更长的时间才能让我确认照片，然后我按保存，应用程序回到我的索引（崩溃）

这是我点击拍照直到我按下保存的目录：

```
12-11 00:17:54.727: V/webview(13180):  singleCursorHandlerTouchEvent -getEditableSupport  FASLE 
12-11 00:17:55.147: D/DroidGap(13180): Paused the application!
12-11 00:17:55.147: D/CordovaWebView(13180): Handle the pause
12-11 00:17:56.222: W/IInputConnectionWrapper(13180): showStatusIcon on inactive InputConnection
12-11 00:17:56.657: D/webviewglue(13180): OnTrimMemory with EGL Context 0x532a1698
12-11 00:17:57.337: D/webviewglue(13180): OnTrimMemory with EGL Context 0x0
12-11 00:17:57.377: E/libEGL(13180): call to OpenGL ES API with no current context (logged once per thread)
12-11 00:17:57.392: E/SQLiteLog(13180): (14) cannot open file at line 30241 of [00bb9c9ce4]
12-11 00:17:57.392: E/SQLiteLog(13180): (14) os_unix.c:30241: (2) open(/GeolocationPermissions.db) - 
12-11 00:17:57.392: D/WebKit(13180): ERROR: 
12-11 00:17:57.397: D/WebKit(13180): SQLite database failed to load from /GeolocationPermissions.db
12-11 00:17:57.397: D/WebKit(13180): Cause - unable to open database file
12-11 00:17:57.397: D/WebKit(13180): external/webkit/Source/WebCore/platform/sql/SQLiteDatabase.cpp(71) : bool WebCore::SQLiteDatabase::open(const WTF::String&, bool)
12-11 00:18:00.957: E/Trace(14212): error opening trace file: No such file or directory (2)
12-11 00:18:01.147: I/webclipboard(14212): clipservice: android.sec.clipboard.ClipboardExManager@42cdbb90
12-11 00:18:01.197: I/CordovaLog(14212): Changing log level to DEBUG(3)
12-11 00:18:01.197: I/CordovaLog(14212): Found preference for useBrowserHistory=true
12-11 00:18:01.197: D/CordovaLog(14212): Found preference for useBrowserHistory=true
12-11 00:18:01.197: I/CordovaLog(14212): Found preference for exit-on-suspend=false
12-11 00:18:01.197: D/CordovaLog(14212): Found preference for exit-on-suspend=false
12-11 00:18:01.207: D/JsMessageQueue(14212): Set native->JS mode to 2
12-11 00:18:01.207: D/DroidGap(14212): DroidGap.init()
12-11 00:18:01.222: D/CordovaWebView(14212): >>> loadUrl(file:///android_asset/www/index.html)
12-11 00:18:01.222: D/PluginManager(14212): init()
12-11 00:18:01.227: D/CordovaWebView(14212): >>> loadUrlNow()
12-11 00:18:01.232: D/DroidGap(14212): Resuming the App
12-11 00:18:01.242: D/SoftKeyboardDetect(14212): Ignore this event
12-11 00:18:01.272: V/webkit(14212): BrowserFrame constructor: this=Handler (android.webkit.BrowserFrame) {42cd27e0}
12-11 00:18:01.297: D/libEGL(14212): loaded /system/lib/egl/libEGL_mali.so
12-11 00:18:01.307: D/libEGL(14212): loaded /system/lib/egl/libGLESv1_CM_mali.so
12-11 00:18:01.307: D/libEGL(14212): loaded /system/lib/egl/libGLESv2_mali.so
12-11 00:18:01.312: D/(14212): Device driver API match
12-11 00:18:01.312: D/(14212): Device driver API version: 10
12-11 00:18:01.312: D/(14212): User space API version: 10 
12-11 00:18:01.312: D/(14212): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
12-11 00:18:01.337: D/dalvikvm(14212): GC_CONCURRENT freed 283K, 7% free 12291K/13127K, paused 17ms+13ms, total 50ms
12-11 00:18:01.352: D/OpenGLRenderer(14212): Enabling debug mode 0
12-11 00:18:01.352: D/SoftKeyboardDetect(14212): Ignore this event
12-11 00:18:01.407: D/DroidGap(14212): onMessage(onPageStarted,file:///android_asset/www/index.html)
12-11 00:18:01.407: D/SoftKeyboardDetect(14212): Ignore this event
12-11 00:18:01.872: D/CordovaLog(14212): Uncaught Function required as first argument!
12-11 00:18:01.872: D/CordovaLog(14212): file:///android_asset/www/js/cordova.js: Line 546 : Uncaught Function required as first argument!
12-11 00:18:01.872: E/Web Console(14212): Uncaught Function required as first argument!:546
12-11 00:18:01.997: I/GATE(14212): <GATE-M>DEV_ACTION_COMPLETED</GATE-M>
12-11 00:18:01.997: D/Cordova(14212): onPageFinished(file:///android_asset/www/index.html)
12-11 00:18:01.997: D/DroidGap(14212): onMessage(onNativeReady,null)
12-11 00:18:01.997: D/DroidGap(14212): onMessage(onPageFinished,file:///android_asset/www/index.html)
12-11 00:18:02.047: E/SQLiteLog(14212): (14) cannot open file at line 30241 of [00bb9c9ce4]
12-11 00:18:02.047: E/SQLiteLog(14212): (14) os_unix.c:30241: (2) open(/CachedGeoposition.db) - 
12-11 00:18:02.047: D/WebKit(14212): ERROR: 
12-11 00:18:02.047: D/WebKit(14212): SQLite database failed to load from /CachedGeoposition.db
12-11 00:18:02.047: D/WebKit(14212): Cause - unable to open database file
12-11 00:18:02.047: D/WebKit(14212): external/webkit/Source/WebCore/platform/sql/SQLiteDatabase.cpp(71) : bool WebCore::SQLiteDatabase::open(const WTF::String&, bool)
12-11 00:18:02.117: D/DroidGap(14212): onMessage(networkconnection,wifi)
12-11 00:18:02.137: D/DroidGap(14212): onMessage(spinner,stop)
12-11 00:18:02.187: D/TilesManager(14212): new EGLContext from framework: 52dea530 
12-11 00:18:02.187: D/GLWebViewState(14212): Reinit shader
12-11 00:18:02.217: D/GLWebViewState(14212): Reinit transferQueue
12-11 00:18:03.997: D/DroidGap(14212): onMessage(spinner,stop) 
```

如果您需要查看任何代码，我会提供。

# java - 操作栏消失了

> ID：13810997
> 
> 赞同：2
> 
> 时间：2012-12-10T23:20:00.597
> 
> 标签：java, android

我是 android 开发的新手，目前似乎被卡住了。每当我在设备上编译和测试我的应用程序时，我都会收到一条致命错误消息：

```
=1: thread exiting with uncaught exception (group=0x4137d930)
12-10 22:07:28.423: E/AndroidRuntime(20961): FATAL EXCEPTION: main
12-10 22:07:28.423: E/AndroidRuntime(20961): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.hyperlocal.tradeit/com.hyperlocal.tradeit.MainActivity}: java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to android.support.v4.view.ViewPager 
```

然后应用程序在启动画面后停止运行。

操作栏甚至不再出现在图形布局中，IDE 也找不到任何错误：/

[这是我的代码](http://pastebin.com/2Fh9UVwf)

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:24:22.850

您已经为 RelativeLayout 提供了一个 id，`android:id="@+id/pager"`并且在您的代码中，您试图访问它并认为它是一个 ViewPager。这些类**不**一样。在您的 RelativeLayout 中，您必须手动添加一个 ViewPager 并给出`android:id="@+id/pager`.

[Android 文档](http://developer.android.com/guide/topics/ui/declaring-layout.html)在提供模板方面做得很好。

这是您的代码应类似于的内容。

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    android:background="@drawable/bg" >

<android.support.v4.view.ViewPager 
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</RelativeLayout> 
```