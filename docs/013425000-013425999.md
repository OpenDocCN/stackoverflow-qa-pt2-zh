# StackOverflow 问答 13425000-13425999

# c++ - 遍历字符串时尝试访问子字符串的编译器错误

> ID：13425000
> 
> 赞同：0
> 
> 时间：2012-11-16T21:56:04.320
> 
> 标签：c++, string, stl, iterator

我徒劳地试图找到一种方法来解析存储在`string`对象中的文本文件。字符串的格式如下：

```
...
1  45
1  46
1  47
2  43
2  44
2  45
... 
```

我正在尝试遍历整个字符串，抓取每一行，然后将字符串除以第一个整数和第二个整数以进行进一步处理。但是，这样做是行不通的：

```
string  fileContents;

string::iterator index;

for(index = fileContents.begin(); index != fileContents.end(); ++index)
{
   cout << (*index);       // this works as expected

   // grab a substring representing one line of the file
   string temp = (*index); // error: trying to assign const char to const char*
} 
```

我正在尝试找到一种方法来做到这一点，但到目前为止我还没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T22:04:22.910

使用[`istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)s 和[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)从每一行获取整数：

```
#include <iostream>
#include <sstream>
#include <string>

int main()
{
    std::istringstream in("1 45\n1 47\n");
    std::string line;
    while (std::getline(in, line))
    {
        std::istringstream nums(line);
        int i1, i2;
        if (nums >> i1 && nums >> i2)
        {
            std::cout << i1 << ", " << i2 << "\n";
        }
    }
    return 0;
} 
```

[请参阅http://ideone.com/mFmynj](http://ideone.com/mFmynj)上的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:24:57.277

A`std::string::iterator`标识一个`char`。A`char`可以用来形成一个元素`std::string`，但这可能不是你想要的。相反，您可以使用两个迭代器来创建一个`std::string`，例如：

```
for (std::string::const_iterator begin(s.begin()), it(begin), end(s.end());
     end != (it = std::find(it, end, '\n'); begin = ++it) {
    std::string line(begin, it);
    // do something with the line
} 
```

`std::string`正如所指出的，将流功能与您创建的流一起使用可能会更容易。

# android - Android：strings.xml 中的 html

> ID：13425002
> 
> 赞同：97
> 
> 时间：2012-11-16T21:56:10.377
> 
> 标签：android, html, xml, string, android-resources

我想显示例如这个 html 代码：

```
<body>
    <p><b>Hello World</b></p>
    <p>This is a test of the URL <a href="http://www.example.com"> Example</a></p>
    <p><b>This text is bold</b></p>
    <p><em>This text is emphasized</em></p>
    <p><code>This is computer output</code></p>
    <p>This is<sub> subscript</sub> and <sup>superscript</sup></p>
</body> 
```

我想通过在资源中声明 html 来在 Dialog 上显示它`strings.xml`。我该怎么做？

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-12-15T16:21:12.510

在 strings.xml 中添加 html 源代码的最佳方法是使用`<![CDATA[html source code]]>`. 这是一个例子：

```
<string name="html"><![CDATA[<p>Text</p>]]></string> 
```

然后您可以使用以下方法在 TextView 中显示此 html：

```
myTextView.setText(Html.fromHtml(getString(R.string.html))); 
```

如果您的 html 中有链接并且希望它们可点击，请使用以下方法：

```
myTextView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-16T22:27:24.430

这是大多数示例。我认为不`pre`支持该标签。

![在此处输入图像描述](../Images/d10460bed868ce394a2370c6a312651f.png)

这是`strings.xml`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">Formatting</string>
    <string name="link">&lt;b&gt;Hello World&lt;/b&gt; This is a test of the URL &lt;a href="http://www.example.com/"&gt;Example&lt;/a&gt;</string>
    <string name="bold">&lt;b&gt;This text is bold&lt;/b&gt;</string>
    <string name="emphasis">&lt;em&gt;This text is emphasized&lt;/em&gt;</string>
    <string name="sup">This is &lt;sub&gt;subscript&lt;/sub&gt; and &lt;sup&gt;superscript&lt;/sup&gt;</string>
</resources> 
```

这是布局。请注意，链接实际上是可点击的，需要做一些额外的工作：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
        <TextView
            android:id="@+id/test1"
            android:linksClickable="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="12dp"
            android:text=""
            android:textAppearance="?android:attr/textAppearanceMedium"/>
        <TextView
            android:id="@+id/test2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="12dp"
            android:text=""
            android:textAppearance="?android:attr/textAppearanceMedium"/>
        <TextView
            android:id="@+id/test3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="12dp"
            android:text=""
            android:textAppearance="?android:attr/textAppearanceMedium"/>
        <TextView
            android:id="@+id/test4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="12dp"
            android:text=""
            android:textAppearance="?android:attr/textAppearanceMedium"/>
    </LinearLayout>
</ScrollView> 
```

最后，代码：

```
TextView test1 = (TextView)findViewById(R.id.test1);
Spanned spanned = Html.fromHtml(getString(R.string.link));
test1.setMovementMethod(LinkMovementMethod.getInstance());
test1.setText(spanned);

TextView test2 = (TextView)findViewById(R.id.test2);
test2.setText(Html.fromHtml(getString(R.string.bold)));

TextView test3 = (TextView)findViewById(R.id.test3);
test3.setText(Html.fromHtml(getString(R.string.emphasis)));

TextView test4 = (TextView)findViewById(R.id.test4);
test4.setText(Html.fromHtml(getString(R.string.sup))); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-16T22:15:45.650

String.xml 可以包含 HTML 实体，如下所示：

```
<resources>
    <string name="hello_world">&lt;span&gt;</string>
</resources> 
```

在您的代码中：`getResources().getString(R.string.hello_world);`将评估为`"<span>"`. 您可以像这样使用这个 HTML 格式的文本：

```
TextView helloWorld = (TextView)findViewById(R.id.hello_world);
helloWorld.setText(Html.fromHtml(getString(R.string.hello_world))); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T22:21:12.810

XML 资源系统支持的所有样式都在 Android 文档中进行了说明。

[字符串资源：格式化和样式](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)

那里包含的任何东西都可以直接使用和设置`TextView`。如果您需要进一步使用 HTML 标记，则需要将原始 HTML（带有转义字符等）放入资源中，并将整个内容加载`&lt;`到.`&gt;``WebView`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-06T05:02:45.470

这对我有用：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<string name="app_name">Sangamner College</string>
<string name="about_desc"><![CDATA[In order to make higher education available in the rural environment such as of Sangamner, Shikshan Prasarak Sanstha was established in 1960\. Sangamner College was established by Shikshan Prasarak Sanstha, Sangamner on 23rd January 1961 on the auspicious occasion of Birth Anniversary of Netaji Subhashchandra Bose.The Arts and Commerce courses were commenced in June 1961 and in June 1965 Science courses were introduced. When Sangamner College was founded forty years ago, in 1961, there was no college available to the rural youth of this region. <br><br></>The college was founded with the aim of upliftment of the disadvantageous rural youth in all respects. On one hand, we are aware of the social circumstances prevailing in the rural area where we are working. So, we offer the elective option to students, which are favourable to the local atmosphere. On the other hand, we want to academically empower the aspiring youth by offering vocational course in Computer Applications to students of Arts &amp; Commerce. B.B.A., B.C.A. and M.C.A. courses were started with the same purpose. “Think globally, act locally” is our guiding Principle.]]></string> 
```

# java - 使用 Eclipse、Git 和 Elastic Beanstalk 进行部署

> ID：13425003
> 
> 赞同：1
> 
> 时间：2012-11-16T21:56:12.773
> 
> 标签：java, eclipse, amazon-web-services, amazon-elastic-beanstalk

通过eclipse部署时，有没有办法指定java源文件是否包含在WAR文件中？

请考虑以下场景：

1.  使用出口到战争：这很简单直接。如果选中标记为“导出源文件”的复选框，则源文件将包含在 WAR 中。

2.  发布到本地 Tomcat 服务器：源文件永远不会包含在 wtpwebapps 目录中，并且没有 WAR 文件。再次，简单。

3.  在 Windows 机器上通过 eclipse AWS 工具包发布到 Elastic Beanstalk：源文件始终包含在 WAR 文件中（分解到 git 文件夹中，然后部署为 Zip 文件）。

4.  在 Linux (Ubuntu) 机器上通过 eclipse AWS 工具包发布到 Elastic Beanstalk：源文件永远不会包含在最终部署的 WAR 文件中。

我还没有找到阻止源文件包含在 3 中或将它们包含在 4 中的方法。这很可能不是操作系统问题，而是某些配置文件中的简单设置，它在两台机器上的设置不同。或者它可能是为两个操作系统编写插件的方式（插件是操作系统特定的吗？）。即使是这样，是否有可以更改的设置？

我尝试使用 Web 部署程序集设置，但无法弄清楚就源代码而言如何使其工作。

您对此的任何见解都会有所帮助。

# reporting-services - 报表定义 (RDL) 隐藏在平铺视图中

> ID：13425008
> 
> 赞同：2
> 
> 时间：2012-11-16T21:56:24.503
> 
> 标签：reporting-services, rdl

我有一些子报表，我想在部署它们时从 SSRS 的平铺视图中隐藏它们。

有没有办法让 .rdl 指定这个或者这个特定的属性只能通过 SSRS 接口使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T02:45:24.517

报表在报表管理器中是隐藏还是可见不是 .rdl / 报表本身的属性，只能在报表上传到 SSRS 服务器后进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:19:06.443

您可以直接从 sql 报告服务器设置此属性：

```
Update [ReportServer].[dbo].[Catalog]
  Set Hidden = 1
  Where <condition> 
```

# android - ListView 和 wrap_content

> ID：13425011
> 
> 赞同：2
> 
> 时间：2012-11-16T21:56:30.500
> 
> 标签：android, xml, listview

我想创建一个活动，左侧有一个 ListView，右侧有一个 TextView，并排。我写了下面的xml，但是ListView占据了整个页面，不用担心wrap_content。为什么？我该如何解决？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ListView 
        android:id="@+id/lv"
        android:layout_width="wrap_content"
        android:layout_height="match_parent" />

    <TextView 
        android:id="@+id/tv"
        android:layout_width="wrap_content"
        android:layout_height="match_parent" />

</LinearLayout> 
```

**编辑**：我的 onCreate

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ListView lv = (ListView) findViewById(R.id.lv);
    String[] values = new String[] { "Test1", "Test2", "Test3", "Test4" };
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.left, R.id.tv1, values);
    lv.setAdapter(adapter); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:12:05.253

From what you described `wrap_content` seems to be stretching right across the screen, so let's set a limit where the ListView and TextView share the screen 50/50:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ListView 
        android:id="@+id/lv"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" />

    <TextView 
        android:id="@+id/tv"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:minWidth="200dp"
        android:layout_weight="1" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:13:15.877

**编辑：**试试这个

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/tv"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:text="TextView" />

    <ListView
        android:id="@+id/lv"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_toLeftOf="@id/tv" >

    </ListView>

</RelativeLayout> 
```

# c - 将混合数据类型相乘时，浮点数是否总是自动转换为双精度？

> ID：13425012
> 
> 赞同：10
> 
> 时间：2012-11-16T21:56:33.787
> 
> 标签：c, floating-point, type-promotion

在 Steven Prata 的“C Primer Plus”一书中，有一个关于类型转换的部分，其中“基本规则是”部分已在规则 1 中说明：

> 在 K&R C 下，但不是在当前 C 下，float 会自动转换为 double。
> 
> [http://www.9wy.net/onlinebook/CPrimerPlus5/ch05lev1sec5.html](http://www.9wy.net/onlinebook/CPrimerPlus5/ch05lev1sec5.html)

有人能解释一下是什么`but not under current C`意思吗？是否有自动转换的 C 版本和不自动转换的版本？

我试图了解如果我有一个混合浮点数和双精度数的表达式，我可以依靠 C 在评估时将浮点数提升为双精度数吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T22:09:39.537

It must refer to the result of binary arithmetic operations of `float * float` format. In the pre-standard versions of C operands of such expressions were promoted to `double` and the result had `double` type.

For example, here's a quote from "C Reference Manual"

> If both operands are *int* or *char*, the result is *int*. If both are *float* or *double*, the result is *double*.

In C89/90 already this behavior was changed and `float * float` expressions produce `float` result.

> *   If either operand has type **long double**, the other operand is converted to **long double**
> *   Otherwise, if either operand is **double**, the other operand is converted to **double**.
> *   Otherwise, if either operand is **float**, the other operand is converted to **float**.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T22:08:47.777

Look at the entire rule:

> When appearing in an expression, `char` and `short`, both `signed` and `unsigned`, are automatically converted to `int` or, if necessary, to `unsigned int`. (If `short` is the same size as `int`, `unsigned short` is larger than `int`; in that case, `unsigned short` is converted to `unsigned int`.) Under K&R C, but not under current C, `float` is automatically converted to `double`. Because they are conversions to larger types, they are called promotions.

If we consider the integer types, when they appear in e.g. arithmetic expressions, they are still promoted, so no arithmetic is -theoretically - performed at the types `char` or `short`, but all at type `int`, `unsigned int` or a type with higher conversion rank (under the as-if rule, if the implementation can guarantee that the result is the same as if the promotion were actually carried out, it can perform arithmetic at smaller types if the platform provides the instructions).

The analogous used to hold for `float`, under the old pre-standard rules, `float`s were promoted to `double` for all arithmetic etc.

That is no longer the case, arithmetic on `float`s does not involve automatic promotion under standardised C.

In expressions with mixed types, generally everything is still promoted to the largest involved type, so if you compare or add a `float` to a `double`, the `float` is converted to `double` before the operation.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T22:21:15.177

多年来，C 语言定义已多次标准化和修改。C 的原始（非标准化）版本被称为“K&R C”；这是 Kernighan 和 Ritchie 最初开发的语言。

1989 年，ANSI 创建了一个官方标准文档（ISO 于 1990 年采用）来定义语言，并且在该标准中进行了一些更改和扩展；其中一项更改是删除 了从`float`to的自动升级。`double`

从那时起，该标准已经进行了两次修订，一次是在 1999 年，一次是在 2011 年。

> 我试图了解如果我有一个混合浮点数和双精度数的表达式，我可以依靠 C 在评估时将浮点数提升为双精度数吗？

这是[当前标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)的规则：

> ### 6.3.1.8 常用算术转换
> 
> ...
> 首先，如果任一操作数的对应实类型为`long double`，则将另一个操作数转换为对应实类型为 的类型，而不改变类型域`long double`。
> 
> 否则，如果任一操作数的对应实类型为`double`，则将另一个操作数转换为对应实类型为 的类型，而不改变类型域`double`。
> 
> 否则，如果任一操作数的对应实类型为`float`，则将另一个操作数转换为对应实类型为 的类型，而不改变类型域`float`。^(62))
> 
> * * *
> 
> ^(62）例如，a`double _Complex`和 a 的加法`float`只需 `float`要将操作数转换为`double`（并产生`double _Complex`结果）。)

因此，基本上，如果您有一个具有两种不同类型的表达式，则具有较窄/不太精确类型的操作数将被提升为具有较宽/更精确类型的操作数的类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T22:02:25.910

是的，C 有不同的版本，就像大多数软件产品有不同的版本一样。

K&R 是 Brian **K** ernighan**和**Dennis **R** itchie 在他们的书[The C Programming Language](http://en.wikipedia.org/wiki/The_C_Programming_Language)中描述的原始版本。

第一个标准化版本是 ANSI C 或 C89，此后又出现了几个新版本。“当前 C”可以表示 C11（最新版本）或 C99（可能是当今最常用的版本）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T22:04:27.080

是的，您可以在评估时依靠 C 将浮点数提升为双精度数。

```
708 Otherwise, if the corresponding real type of either operand is double, the other operand is converted, without change of type domain, to a type whose corresponding real type is double. 
```

我正在使用[此处找到的文档。](http://c0x.coding-guidelines.com/6.3.1.8.html)

对不起，我之前引用了错误的东西

# xcode - 在 Git 签出较旧的提交后，Xcode 不会忘记已删除的文件

> ID：13425014
> 
> 赞同：0
> 
> 时间：2012-11-16T21:56:42.090
> 
> 标签：xcode, git, git-checkout

我有 Xcode (4.5) 运行存储在 git 存储库中的项目。从理论上讲，我应该能够`git checkout`（从命令行）查看不同版本的代码，以查看不同时间点的情况。

实际上，Xcode 并不能很好地处理这些更改。Xcode 不会忘记旧版本源中丢失的文件。它们以红色显示，就好像它们不见了一样。这些文件没有丢失。它们只是在之前的提交完成时不存在。

我的猜测是，发生这种情况是因为`xcuserdata`每次发生新结帐时都不会重置。它被`.gitignore`.

知道如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:57:49.813

问题解决了。问题实际上不在于 Xcode，而在于 Git 存储库本身。我的菜鸟错误。

为了将来参考，`project.pbxproj`您的文件`.xcodeproj`包含项目中哪些文件的列表。这*应该*包含在您的 Git 存储库中，以确保 Xcode 跟上每个修订版中的更改。

# mysql - SQL 查询在一个查询中计算时间段的事件

> ID：13425016
> 
> 赞同：2
> 
> 时间：2012-11-16T21:56:50.917
> 
> 标签：mysql, sql

我有一个跟踪事件的表（事件）。每个事件都有一个 eventTime 字段。我想知道时间 A 和时间 B 之间发生了多少事件，时间 C 和时间 D 之间发生了多少事件，等等。我希望这些计数中的每一个都不同（即，我希望每个时间段都有不同的计数）。有没有办法用一个 SQL 查询来做到这一点？现在我一直在做类似的事情：

```
select count(ID) from Event where eventTime >= timeA and eventTime <= timeB 
```

我只是在每个时期都这样做。不过，当我必须进行五个单独的查询时，这需要一段时间。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:59:27.173

```
select sum(eventTime between timeA and timeB) as AB_count,
       sum(eventTime between timeC and timeD) as CD_count                   
from Event 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:26:29.403

想象一个表 DateRanges 与 StartDate 和 EndDate 列允许日期时间

```
+-----------+---------+
| StartDate | EndDate |
+-----------+---------+
| A         | B       |
| C         | D       |
+-----------+---------+

Select
  d.StartDate,
  d.EndDate,
  Sum(Case When e.EventTime >= d.StartDate And e.EventTime < d.EndDate Then 1 Else 0 End) as EventCount
From
  DateRanges d
    Cross Join
  Event e
Group By
  d.StartDate,
  d.EndDate 
```

# c# - 在属性网格中显示特定属性

> ID：13425025
> 
> 赞同：1
> 
> 时间：2012-11-16T21:57:40.370
> 
> 标签：c#, winforms, user-controls, propertygrid

当我们按下 btnSettings 时，**所有用户控件的属性**都会显示在**Property grid**中。我想显示**特定属性**（仅**TemperatureValue**和**TemperatureUnit**），可以吗？ **用户控制**代码如下：

```
using System;
using System.Windows.Forms;

namespace Temperature
{
    public partial class temperatureUc : UserControl
    {
        public enum temperatureUnit
        {
            Celsius,    // default
            Delisle,    // °De = (100 − °C) * 3⁄2
            Fahrenheit, // °F  = °C * 9⁄5 + 32  
            Kelvin,     // °K  = °C + 273.15
            Newton,     // °N  = °C * 33⁄100
            Rankine,    // °R  = (°C + 273.15) * 9⁄5
            Réaumur,    // °Ré = °C * 4⁄5   
            Rømer       // °Rø = °C * 21⁄40 + 7.5
        }

        public temperatureUc()
        {
            InitializeComponent();
            this.cboTemperatureUnit.DataSource = Enum.GetValues(typeof(temperatureUnit));
        }

        #region "Event"
        public delegate void SettingsStateEventHandler(object sender, EventArgs e);
        public event SettingsStateEventHandler settingsStateChanged;

        private void OnSettingsChanged(object sender, EventArgs e)
        {
            if (this.settingsStateChanged != null)
                this.settingsStateChanged(sender, e);
        }
        #endregion

        #region "Properties"
        private Single _TemperatureValue;
        public Single TemperatureValue
        {
            get
            {
                return this._TemperatureValue;
            }
            set
            {
                if (value.GetType() == typeof(Single))
                {
                    _TemperatureValue = value;
                    this.txtTemperatureValue.Text = _TemperatureValue.ToString();
                }
            }
        }

        private temperatureUnit _TemperatureUnit;
        public temperatureUnit TemperatureUnit
        {
            get
            {
                return this._TemperatureUnit;
            }
            set
            {
                if (value.GetType() == typeof(temperatureUnit))
                {
                    _TemperatureUnit = value;
                    this.cboTemperatureUnit.Text = _TemperatureUnit.ToString();
                }
            }
        }
        #endregion

        private void btnSettings_Click(object sender, EventArgs e)
        {
            this.OnSettingsChanged(sender, e);
        }
    }
} 
```

上面代码的用户控件将从下面的代码中调用：

```
using System;
using System.Windows.Forms;
using Temperature;
using System.Diagnostics;
using System.Drawing;

namespace TemperatureImplements
{
    public partial class Form1 : Form
    {
        private PropertyGrid pGrid  = new PropertyGrid();  

        public Form1()
        {
            InitializeComponent();
            this.temperatureUc1.settingsStateChanged += new temperatureUc.SettingsStateEventHandler(temperatureUc1_settingsStateChanged);
        }

        void temperatureUc1_settingsStateChanged(object sender, EventArgs e)
        {
            pGrid.Size = new Size(300, 500);
            pGrid.Location = new Point(300,10);
            pGrid.SelectedObject = temperatureUc1;
            this.Controls.Add(pGrid);
        }

    }
} 
```

图片如下： ![显示特定属性网格](../Images/77cb5ca3630c105ba84c94a3266ce624.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:38:05.217

有一种方法。本文有一个名为“自定义 PropertyGrid 控件”的部分解释了如何操作[http://msdn.microsoft.com/en-us/library/aa302326.aspx#usingpropgrid_topic5](http://msdn.microsoft.com/en-us/library/aa302326.aspx#usingpropgrid_topic5)

基本上，您只想将`AppSettings`类定义为仅包含`TemperatureUnit and`TemeratureValue`。

```
 AppSettings appset = new AppSettings();
 MyPropertyGrid.SelectedObject = appset; 
```

定义 AppSettings 如下；

```
[DefaultPropertyAttribute("SaveOnClose")]
public class AppSettings{
private bool saveOnClose = true;
private string tempUnit;
private int tempValue;

[CategoryAttribute("Global Settings"),
ReadOnlyAttribute(false),
DefaultValueAttribute("Celsius")]
public string TemperatureUnit
{
    get { return tempUnit; }
    set { tempUnit = value; }
}

[CategoryAttribute("Global Settings"),
ReadOnlyAttribute(false),
DefaultValueAttribute(0)]
public string TemperatureValue
{
    get { return tempValue; }
    set { tempValue = value; }
}
} 
```

顺便说一句，我正在将类别从 Misc 更改为 Global Settings，不知道这是否是您想要的，但当它们是唯一的选项时它是有意义的。您可能必须明确声明其他属性，`BrowsableAttribute(false)`以便它们不会显示，但我认为没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:36:28.093

可能有一种方法可以隐藏这些属性，但我认为这是错误的方法。

您应该创建一个带有 TemperatureUnit 和 TemperatureValue 的模型，而不是传递用户控件本身。将您定义的事件移至此模型。

然后，您需要扩展一个用户控件，将模型传递给该用户控件并侦听这些事件。

最后将 pGrid.SelectedObject 设置为您的*模型*，一切顺利。

# scala - Scala中具有可变长度索引的“更新”方法

> ID：13425029
> 
> 赞同：6
> 
> 时间：2012-11-16T21:58:16.403
> 
> 标签：scala, shapeless, variadic-functions

我正在为诸如具有可变维度的数组之类的东西编写代码。我所做的是维护一个线性的底层集合，并用索引访问方法将其包装起来。由于数据结构的维度是未知的，我写了类似的东西

```
def apply(i: Int*): Double = ... 
```

而且效果很好。但是，我不能做同样的事情来更新方法和运算符，如 +=，所以我最终编写了类似的方法

```
def set(v: Double, i: Int*) ...
def add(v: Double, i: Int*) ... 
```

这很好，但不是我真正想要的。我想关于更新的问题可以通过两种方式解决：

1.  更改更新函数中的参数顺序，这使它看起来很奇怪。
2.  允许不作为最后一个变长参数。我发现这个问题是在一般环境中提出的，可以通过使用柯里化函数来解决，这在此处不适用。

+= 的问题似乎更复杂，甚至在索引是固定长度时也存在。也许我们可以添加一个具有 += 运算符的对象并使用 this(...) 来获取该对象（这样 this(...) += v 将调用一些我们期望的方法），但这会与应用方法。

如果有人对上述任何问题有解决方案，或者有理由说明我们不应该编写这样的代码，请分享您的想法！谢谢~

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-27T15:22:52.950

`update`在 Scala 中是一个相当特殊的人工制品，因为它主要是语法糖，不对应于任何特定的方法签名。这意味着我们可以发挥创造力并为更新提供一个多态签名，

```
scala> class Indexed { def update[P <: Product](p: P) = p }
defined class Indexed

scala> val i = new Indexed
i: Indexed = Indexed@1ea0e836

scala> i(0) = 1.0
res0: (Int, Double) = (0,1.0)

scala> i(0, 1) = 1.0
res1: (Int, Int, Double) = (0,1,1.0)

scala> i(0, 1, 2) = 1.0
res2: (Int, Int, Int, Double) = (0,1,2,1.0)

scala> i(0, 1, 2, 3) = 1.0
res3: (Int, Int, Int, Int, Double) = (0,1,2,3,1.0) 
```

就目前而言，这使得 LHS 上的索引类型和 RHS 上的值类型完全不受约束，

```
scala> i(23, true, 'c') = "foo"
res4: (Int, Boolean, Char, String) = (23,true,c,foo) 
```

但是我们可以通过在[无形](https://github.com/milessabin/shapeless)2.0.0-SNAPSHOT中[对元组的新支持](https://gist.github.com/milessabin/6081113)提供的一些隐含证据来解决这个问题，

```
scala> import shapeless._
import shapeless._

scala> import syntax.tuple._
import syntax.tuple._

scala> class Indexed {
     |   def update[P <: Product, I](p: P)
     |     (implicit
     |       init:   TupleInit.Aux[P, I],
     |       toList: TupleToList[I, Int],
     |       last:   TupleLast.Aux[P, Double]) = (toList(init(p)), last(p))
     | }
defined class Indexed

scala> val i = new Indexed
i: Indexed = Indexed@76ab909a

scala> i(0) = 1.0
res10: (List[Int], Double) = (List(0),1.0)

scala> i(0, 1) = 2.0
res11: (List[Int], Double) = (List(0, 1),2.0)

scala> i(0, 1, 2) = 3.0
res12: (List[Int], Double) = (List(0, 1, 2),3.0)

scala> i(0, 1, 2, 3) = 4.0
res13: (List[Int], Double) = (List(0, 1, 2, 3),4.0)

scala> i(0, 1, 2) = "foo" // Doesn't compile
<console>:22: error: could not find implicit value for parameter
  last: shapeless.ops.tuple.TupleLast.Aux[(Int, Int, Int, String),Double]
              i(0, 1, 2) = "foo" // Doesn't compile
                         ^

scala> i(23, "foo", true) = 5.0 // Doesn't compile
<console>:22: error: could not find implicit value for parameter
  toList: shapeless.ops.tuple.TupleToList[I,Int]
              i(23, "foo", true) = 5.0 // Doesn't compile
                                 ^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T15:53:00.953

`update`我现在看到的最简单的解决方案是为您想要支持的每个维度设置许多不同的重载。假设您可以确定您将使用的最大维度是 10，这意味着您将需要 10 个重载。这可能看起来不太实用，但 i 很容易被抽象出来，因此实际上非常实用：

```
trait MultiKeyUpdate[K, V] {
  def doUpdate( k: K* )( v: V )
  def update(k1: K, v: V) { doUpdate( k1 )( v ) }
  def update(k1: K, k2: K, v: V) { doUpdate( k1, k2 )( v ) }
  def update(k1: K, k2: K, k3: K, v: V) { doUpdate( k1, k2, k3 )( v ) }  
  // ... and so on, up until max dimension ...
} 
```

用法：

```
class C extends MultiKeyUpdate[Int, Double] {
  def apply(i: Int*): Double = {
    println("Returning element " + i.mkString("[",",","]"))
    123
  }
  def doUpdate( i: Int* )( v: Double ) {
    println("Updating element " + i.mkString("[",",","]") + " to value " + v)
  }
} 
```

REPL 中的一些测试：

```
scala> val o = new C
o: C = C@12798c1
scala> o(1,2,3)
Returning element [1,2,3]
res3: Double = 123.0
scala> o(1,2,3) = 5.0
Updating element [1,2,3] to value 5.0
scala> o(1,2,3) += 7.0
Returning element [1,2,3]
Updating element [1,2,3] to value 130.0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T22:32:46.100

```
class SetMe {
  def set(i: Int*)(v: Double) { println("Set "+v+" with "+i.mkString(",")) }
}

scala> (new SetMe).set(4,7,19,3)(math.Pi)
Set 3.141592653589793 with 4,7,19,3 
```

`update`然而，不能用它自己做那个把戏。可能值得提交增强请求。

# php - 如何在多维数组中选择每个键的最后一个数组

> ID：13425030
> 
> 赞同：0
> 
> 时间：2012-11-16T21:58:15.750
> 
> 标签：php, arrays, multidimensional-array

给定以下 php 数组

```
$a = array(
    array('a'=>'111','b'=>'two','c'=>'asdasd'),
    array('a'=>'111','b'=>'one','c'=>'sdvsdfs'),
    array('a'=>'111','b'=>'three','c'=>'vbndfgn'),
    array('a'=>'222','b'=>'nine','c'=>'dfhfnd')
); 
```

如何仅返回每个数组键“a”的最后一个数组？

期望的结果：

```
$new = array(
    array('a'=>'111','b'=>'three','c'=>'vbndfgn'),
    array('a'=>'222','b'=>'nine','c'=>'dfhfnd')
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:04:01.093

如果我是你，我会尝试以更好的格式存储它，以便更轻松地检索它。但是，如果您坚持使用格式，请尝试：

```
$a = array(
    array('a'=>'111','b'=>'two','c'=>'asdasd'),
    array('a'=>'111','b'=>'one','c'=>'sdvsdfs'),
    array('a'=>'111','b'=>'three','c'=>'vbndfgn'),
    array('a'=>'222','b'=>'nine','c'=>'dfhfnd')
);

$tmp = array();
foreach ($a as $value) {
    $tmp[$value['a']] = $value;
}

$new = array_values($tmp);

print_r($new); 
```

# php - SQL 使用 PDO 获取单个标量

> ID：13425031
> 
> 赞同：0
> 
> 时间：2012-11-16T21:58:26.483
> 
> 标签：php, mysql, sql, database, pdo

这个问题更多在[这个帖子](https://stackoverflow.com/questions/13424009/updating-sql-column)上。所以我想检索某一列中的数字。因此，假设表格如下所示：

```
A | B | C | D | E | F
---------------------
0 | 50| 0 | 0 | 0 | 0 
```

假设用户输入`B`，我想去获取表中的当前数字，即`50`。这是我的 SQL 代码：

```
$link = new PDO('**;dbname=**;charset=UTF-8','**','**');
$stmt = $link->prepare("SELECT MAX(:type) as max FROM table");
$stmt->bindParam(':type', $type);
$stmt->execute();
$used = $stmt->fetch(PDO::FETCH_ASSOC);
$used = $used["max"]; 
```

但这只是返回`B`而不是数字。如何更改我的代码以获取号码？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T22:05:34.650

```
SELECT MAX(:type) as max FROM table 
```

假设`:type`设置为“B”，这将执行为：

```
SELECT MAX("B") as max FROM table 
```

只有一个值的东西的 MAX 将是那个值，即：

```
SELECT "B" as max FROM table 
```

您很可能想从该列中选择 MAX，而不是字符串：

```
SELECT MAX(B) as max FROM table 
```

你可以这样做：

```
$stmt = $link->prepare("SELECT MAX($type) as max FROM table"); 
```

显然，如果来自用户，这很容易受到 SQL 注入的影响`$type`，但是如果您从用户那里获取表名，那么无论如何您都做错了。

您的表格也可能像这样更有意义：

```
type | value
------------
A    | 0
B    | 50
C    | 0 
```

然后你可以得到它：

```
SELECT MAX(value) FROM tableName WHERE type = :type 
```

# xcode - xcode touches开始了多个任务

> ID：13425034
> 
> 赞同：1
> 
> 时间：2012-11-16T21:59:13.313
> 
> 标签：xcode, uiimageview, touchesbegan

我正在使用 touchesBegan 和 touchesMoved 将 UIImageView 移动到您在屏幕上触摸的任何位置。它移动一个标记（我移动的 UIimageView），在 UIImageview 中绘制一个形状并读取一个图形。

但是，每当我尝试对这些数据执行任何操作（例如更新标签）时，UIImageView 都会匆匆回到它开始的位置，而不是停留在原来的位置。

```
-(void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event{

UITouch *myTouch =[[event allTouches] anyObject];
CGPoint location = [myTouch locationInView:self.view];

int x = location.x;
int y = location.y;

NSLog(@"x = %i",x);
NSLog(@"y = %i",y);

CGPoint p={x, y};
circles.center = p; 
```

上面的代码工作正常，并将图像移动到新位置。但是，我应该添加一些非常简单的东西吗？

```
changeInY.text = [NSString stringWithFormat:@"Main Label"]; 
```

并且 UIImageView （圆圈）不再位于 .center = p 处。标签更新了，UIImageView 在进行任何触摸之前冲回了我将它倾倒在情节提要上的地方。它肯定会移动，但会冲回来。如果没有标签指令，它会停留在原处并完成下一次触摸。

它会给出我的 x 位置和 y 位置，并让我在 NSLog 语句中打印它们，但它不会让我用它们的值更新标签，或者做任何与 UIImageView 无关的事情。我不想在运行时动态创建 UIImageView 。我想使用那个并移动它。我相当确定它的 circles.center = p 线需要改变，但我不知道如何告诉它做出改变并留在那里。

非常欢迎任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:55:04.697

在以各种可能的方式重写代码大约 14 小时后，我只需要将有问题的标签放在“视图”框的顶部。我有某种分层问题。将标签放置在不可见的“视图”上后，我在过去两天尝试的几乎所有代码组合都有效。

# html - 同一行上的多个表

> ID：13425037
> 
> 赞同：15
> 
> 时间：2012-11-16T21:59:38.340
> 
> 标签：html, css

我有三个表都包含在一个 div 中。我试图让它们都在 div 中内联显示，但它们每个都显示在自己的行上。我将它们全部设置为 display: inline 在表级别，但这并没有成功。关于如何让多个表格显示在同一行的任何想法？

```
 <div id="container">
   <table id="previous-arrow" class="scroll">
    <tr>
        <td><a href="#" id="nav-prev"><span>Previous</span></a></td>
    </tr>
   </table>
   <table id="tour-carousel">
    <tr id="carousel-row">
        <td>data here</td> 
    </tr>
   </table>
   <table id="next-arrow" class="scroll">
    <tr>
        <td><a href="#" id="nav-next"><span>Next</span></a></td>
    </tr>
   </table>
</div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T22:04:36.520

您想让它们内联显示，但仍显示为表格（否则它们的内容将创建导致包装的匿名表格块）。

```
display: inline-table; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T22:03:14.727

您可以浮动它们：

HTML

```
<div class="container">
    <table><tr><td>Table 1</td></tr></table>
    <table><tr><td>Table 2</td></tr></table>
    <table><tr><td>Table 3</td></tr></table>
</div> 
```

CSS

```
table {
    float:left;
    width:33%;
} 
```

小提琴：http: [//jsfiddle.net/kboucher/6HuyW/](http://jsfiddle.net/kboucher/6HuyW/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T22:02:47.250

尝试将它们浮动在 css 中。

```
table {
 float:left;
} 
```

并确保它们并排的宽度不大于容器的宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-17T06:23:19.103

使用下面的代码

```
<div id="container">
   <table id="previous-arrow" class="scroll" **style="float:left"**>
<tr>
    <td><a href="#" id="nav-prev"><span>Previous</span></a></td>
</tr>
 </table>
<table id="tour-carousel" **style="float:left"**>
<tr id="carousel-row">
    <td>data here</td> 
</tr>
</table>
<table id="next-arrow" class="scroll" **style="float:left"**>
<tr>
    <td><a href="#" id="nav-next"><span>Next</span></a></td>
</tr>
</table> 
</div> 
```

# asp.net-mvc-4 - 带有 Castle Logging 和 log4net 问题的 ASP.NET MVC

> ID：13425038
> 
> 赞同：0
> 
> 时间：2012-11-16T21:59:44.200
> 
> 标签：asp.net-mvc-4, castle-windsor, log4net

在我的安装程序中，我有

```
public void Install(IWindsorContainer container, IConfigurationStore store)
{
    container.AddFacility<LoggingFacility>(f => f.UseLog4Net("log4net.config"));
} 
```

我的 log4net 配置文件（部署到我的 ASP.NET MVC 应用程序的 bin 目录）是：

```
<log4net>
<appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
  <bufferSize value="100" />
  <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  <connectionString value="data source=GCO06773\SQLEXPRESS;initial catalog=GEMS;integrated security=false;persist security info=True;User ID=<<userid removed>>;Password=<<password removed>>#" />
  <commandText value="INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message],[Exception]) VALUES (@log_date, @thread, @log_level, @logger, @message, @exception)" />
  <parameter>
    <parameterName value="@log_date" />
    <dbType value="DateTime" />
    <layout type="log4net.Layout.RawTimeStampLayout" />
  </parameter>
  <parameter>
    <parameterName value="@thread" />
    <dbType value="String" />
    <size value="255" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%thread" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@log_level" />
    <dbType value="String" />
    <size value="50" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%level" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@logger" />
    <dbType value="String" />
    <size value="255" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%logger" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@message" />
    <dbType value="String" />
    <size value="4000" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%message" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@exception" />
    <dbType value="String" />
    <size value="2000" />
    <layout type="log4net.Layout.ExceptionLayout" />
  </parameter>
</appender>
<root>
  <level value="INFO" />
  <appender-ref ref="AdoNetAppender" />
 </root>
</log4net> 
```

我有一个通过 Castle.Windsor 实例化的控制器相关代码是：

```
public ILogger Logger { get; set; }
public ActionResult Index()
{
    Logger.Info("Info");
    Logger.Debug("Debug");
    Logger.Error("Error");
    Logger.Fatal("Fatal");
    Logger.Warn("Warn");
    return View();
} 
```

Logger 是一个有效的城堡记录器，当我在监视窗口中深入研究它时，似乎没有与底层 log4net 记录器关联的附加器，除了根附加器。

根据 procmon，log4net.config 文件实际上在某个时候被访问，所以我假设它正在被读取。我在 IIS 日志中没有错误，在事件日志中没有错误，也没有我可以检测到的异常或错误。我难住了。

更新1：忘了提，我加了这个：

```
<add key="log4net.Config" value="log4net.config"/> 
```

到 web.config，但它似乎没有改变任何东西。

更新 2：

我正在使用带有公钥令牌的 Log4Net 1.2.10.0：1b44e1d426115821（这对 Castle Logging 很重要，这就是我提到它的原因）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T07:55:26.600

该`log4net.config`文件应位于您网站的根目录中，而不是`bin`目录中。

# .net - C++ 标记和常量连接

> ID：13425041
> 
> 赞同：2
> 
> 时间：2012-11-16T21:59:55.453
> 
> 标签：.net, string, resources, preprocessor

我的应用程序每次为每个客户编译时都要求我更改徽标和图标。手动执行此操作自然会耗费时间且容易出错，因此我编写了 .Net 表单以从 .rc 文件加载其图像和图标，但我正在尝试在资源文件中使用一些预处理器魔法。

我的目标是让它只从具有客户 ID 的目录中自动加载一个图像和图标。这将防止 .rc 文件链接不需要的图像和文件，并使每个客户的设置变得像单个前置命令一样简单。

我有一个名为“CUSTOMER_ID”的令牌，它是他们资源的文件夹名称。因此，他们的文件将位于“../files/images/customer1/”中，其中 CUSTOMER_ID = customer1。

我想让预处理器将“..files/images/”的常量与 CUSTOMER_ID 连接起来，然后是“icon.ico”或“logo.bmp”，以便我可以定义资源。这是我目前拥有的：

```
//in resources.rc
#include "airline.h"
#define CONCAT(dir, cid, filetype) dir ## cid ## filetype

IDI_ICON1 ICON  CONCAT("../files/images/",CUSTOMER_ID,"icon.ico") 
```

然而，结果总是以失败告终。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:04:32.117

对于 RC 文件预处理器指令非常有限，请参阅：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa381033 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381033(v=vs.85).aspx)

```
指令描述
#define 通过为其分配给定值来定义指定名称。
#elif 标记条件编译块的可选子句。
#else 标记条件编译块的最后一个可选子句。
#endif 标记条件编译块的结束。
#if 如果指定表达式为真，则有条件地编译脚本。
#ifdef 如果定义了指定的名称，则有条件地编译脚本。
#ifndef 如果未定义指定名称，则有条件地编译脚本。
#include 将文件的内容复制到资源定义文件中。
#undef 删除指定名称的定义。

```

并且`#define`是简单的形式：（在[http://msdn.microsoft.com/en-us/library/windows/desktop/aa381061(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381061(v=vs.85).aspx)之后）：

```
#定义名称值

```

* * *

有解决方案 - 根据这个[答案](https://stackoverflow.com/a/7151915/1463922)准备您的 ICON/BITMAPS 路径作为环境变量，您可以从客户名称构建它们 - 但必须在您的批处理文件或生成文件中完成：

从已经提到的答案：

```
In your project properties add ;$(CMDLINE_DEFINES) to the end of your resource preprocessor definitions. (Be sure to pick the right configuration.)

Then when you use MSBuild from the command line type (or add to a batch file)...

C:\Projects\SomeProject> set CMDLINE_DEFINES=SOMETEST=42
C:\Projects\SomeProject> MSBuild SomeProject.vcproj 
```

* * *

此答案适用于 C++ 文件：

~~对于您的示例：~~

 ~~```
CONCAT("../files/images/",CUSTOMER_ID,"icon.ico") 
```~~ 

你应该使用这样的宏：

```
#define TOSTRING(T) #T
#define CONCAT(dir, cid, filetype) dir TOSTRING(cid) filetype 
```

这是因为这个宏展开是：`"../files/images/" "customer1" "icon.ico"`. C++ 编译器将连接相邻的字符串文字。

这个例子：

```
#include <iostream>

#define TOSTRING(T) #T
#define CONCAT(dir, cid, filetype) dir TOSTRING(cid) filetype

#define CUSTOMER_ID customer1

int main() {
    std::cout << ">>>>>" << CONCAT("../files/images/",CUSTOMER_ID,"icon.ico") << "<<<<\n";
} 
```

将产生输出：

```
>>>>>../files/images/customer1icon.ico<<<< 
```

可能您应该在...`/`之前添加`icon.ico`

# php - php无法将数组数据插入数据库

> ID：13425049
> 
> 赞同：-4
> 
> 时间：2012-11-16T22:01:09.430
> 
> 标签：php

sql：

```
$sql = $db->prepare('SELECT * FROM product_detail WHERE size = $order_size AND product_id = $order_detail_product_id'); 
```

编码：

```
$order_detail_product_id = $_POST['order']['product_id'];
$order_size = $_POST['order']['size']; 
```

html:

```
<?php foreach ($it as $e) { >?
      <input type="text" name="order[product_id][]" value="<?php echo  $e[0]; ?>">
      <input type="text" name="order[size][]" value="<?php echo  $e[3]; ?>">
<?php } ?> 
```

为什么那行不通。错误是数组到字符串的转换

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T00:11:24.093

您不能在准备语句中的单引号内使用类似的变量（您需要双引号才能使其有意义，但这仍然很糟糕并且仍然没有意义，因为您使用的是数组作为一个字符串），并且将值放在您准备的字符串中比准备的目的，您应该这样做：

```
foreach ($order_size as $key => $size):
$stmt = $db->prepare('SELECT * FROM product_detail WHERE size = ? AND product_id = ?');
$stmt->bindParam(1, $size);
$stmt->bindParam(2, $order_detail_product_id[$key]);
...
endforeach; 
```

或者不同的查询，这取决于你想要什么，你发布的内容不容易猜到。

假设您使用的是 pdo 而不是 mysqli （这会很糟糕）。

# php - PHP根据用户权限显示链接？

> ID：13425050
> 
> 赞同：1
> 
> 时间：2012-11-16T22:01:16.833
> 
> 标签：php, permissions, hyperlink

我正在尝试根据用户访问级别显示或不显示链接。链接会有所不同，具体取决于用户可能所在的站点部分。链接也可能不都在一个菜单中。它们很可能出现在页面上的不同位置。

目前我有一个包含用户、组和部分的数据库表。主菜单是根据 Sections 数据库表构建的。我想我应该创建一个 Actions 表并添加一个我想为操作菜单中的每个部分显示的链接。所以，到目前为止我的桌子是这样的。

```
Users
user_id

Groups
group_id
group_title

Sections
section_id
section_title 
```

我正在考虑添加的表。

```
Actions
action_id
action_title
action_group_id 
action_section_id 
```

我不确定的部分是我是否应该为每个允许访问的组多次添加相同的链接到 Actions 表中。或者，只需添加一次并执行如果组 id 大于，则显示链接。

多次输入同一链接的示例。

```
action_id   action_title    action_group_id     action_section_id
1           View all        1                   1
2           View all        2                   1
3           View all        3                   1 
```

我希望不要用一堆 if/then 语句淹没页面。另外，这似乎不是最好的处理方式，因为它需要人工解释访问级别代表什么。

对此的任何帮助表示赞赏。我可能会在这里完全错误的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:06:03.730

使用附加表创建多对多关系，在该表中为组有权访问的每个权限插入一个条目。我是否正确假设部分是您正在创建的权限？

```
Table: Group_Section (Or whatever you'd like to name it)

Group_id | Section_ID
---------+-----------
       1 |         1
       1 |         2
       1 |         3
       2 |         1
       2 |         3
         | 
```

您可以看到 ID = 1 的组可以访问部分 1,2,3，而 ID = 2 的组只能访问 1,3。然后，您可以将任何权限添加到您想要的表中，并通过使用外键来管理它们。

那有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:09:13.787

Here is a good article but the things are discussed in general [http://en.wikipedia.org/wiki/Access_control](http://en.wikipedia.org/wiki/Access_control)[enter link description here](http://en.wikipedia.org/wiki/Access_control)

In your case, use what `TheCapn` wrote and I'll just add, that its 'best to start session for every user and just check his access level when he's trying to reach a restricted part.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T22:09:41.687

Personnaly, to do this kind of thing, i set a user level in the user table and a section level in the section table. Then you simply have to filter the section according to your user level.

You can do this by adding a statemtn to you sql like

```
AND section_level >= "user_level"; 
```

or then again, get all the section and filter tham with php.

```
foreach($section as $s){
 if ($s->level >= user_level) echo $s->title
} 
```

Of course, you'll need to adjust the <. = and > according to the hierachy of your system.

I personnaly use a lowering hierachy, meaning, the lower the level you are the more right you have. This way you can make a 'banned' user by setting his level to 99 or something.

THis would be only for your menus, make sure you control the user_level on each page as well so if someone get to the page directly it get kicked..

Hope it points your in the right direction. ;)

# php - Zend Framework 从另一个控制器目录加载控制器助手

> ID：13425055
> 
> 赞同：0
> 
> 时间：2012-11-16T22:01:32.947
> 
> 标签：php, zend-framework

好吧，我知道这有点本地化，因为我确信没有多少突破传统 Zend 框架逻辑。但。在这种情况下，我在 ZF 上开发了一个主要软件，其中包含 3 个不同级别的平台。

所以我有 Zend Framework 的库存文件夹结构，然后在其中有 2 个额外的子文件夹，它们充当主结构顶部的层。这些子文件夹有“布局”“视图”“控制器”和分别“助手”“脚本”等。所以。由于这是如何布局的，我遇到了一些问题，我需要从另一个子部分访问存储在一个子部分中的帮助程序。

通常你会像

```
$this->_helper->enrollHelper->isCreationDriven(); 
```

但是，我需要从中调用此帮助程序的控制器位于另一个控制器目录中。请注意，我最初并没有构建此应用程序，我只是帮助增强功能并继续其发展。反正。在这种情况下，上述行对我不起作用，因为我想从中调用帮助程序的控制器位于该目录之外的另一个类似目录中。

有了这个，我的问题是。有谁知道我可以从其他目录以类似方式调用帮助程序的方法？还是我最终做了什么可能是显而易见的选择，只是在我最初想从中调用它的其他控制器目录中制作该助手的镜像副本，我希望有一种方法，因为我想避免重复代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:30:02.207

During Bootstrap, you can register the second directory with the plugin broker using `Zend_Controller_Action_HelperBroker::addPath($path, $prefix)`.

# plone - 必须覆盖什么模板才能获得 ploneform-widget-render 视图以更改小部件的布局

> ID：13425063
> 
> 赞同：1
> 
> 时间：2012-11-16T22:02:19.670
> 
> 标签：plone, zope, dexterity, z3c.form

我正在尝试覆盖 Dexterity 中的默认小部件布局，其中标签、描述和输入区域位于三个单独的行上：

```
Name
The person's name
[________________] 
```

我希望字段出现在表格中，其形式为：

```
Name: [_____] 
```

仅当有人悬停在该区域上时才会出现“该人的姓名”（如果有的话）。

我能够使用 z3c.jbot 成功覆盖 plone.app.z3cform.templates.macros.pt；但是，对文件 plone.app.z3cform.templates.widget.pt 的更改没有我可以找到的效果。（见下面的更新。）

我找到的所有模板都要求每个单独的小部件将自己呈现为带有标签和描述性文本的单个单元，AFAICT 使用名为 @@ploneform-render-widget 的视图，但我无法找到与该视图关联的任何页面模板. 谁能建议这样的模板在哪里？

[更新：请注意plone.app.z3cform中的templates.py包含以下内容，这可能意味着绕过了z3c.bjot：#小部件渲染模板需要是Zope 3模板类RenderWidget(ViewMixinForTemplates, BrowserView): index = ViewPageTemplateFile ('templates/widget.pt') 类 RenderSingleCheckboxWidget(ViewMixinForTemplates, BrowserView): index = ViewPageTemplateFile('templates/singlecheckbox.pt')

那么，如果这是问题所在，必须做些什么才能使其与 z3c.jbot 兼容？]

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:47:50.343

好的，Martijn Pieters 提供了我确信是好的建议——使用 css 和可能的 Javascript 来做到这一点。

让我分享对我有用的东西；希望人们会指出我在哪里使用旧东西，我在哪里不合适等等......但这是一个起点：

在我的本地机器上，我创建了一个名为 project-css.css 的文件，其内容如下：

```
.z3cformInlineValidation {
 float: left;
 position: relative;
 display: inline-block;
 background: red;
}
.z3cformInlineValidation label {
 float: left;
 width: 15em;
 background: yellow;
 text-align: right;
}
.z3cformInlineValidation div {
 display: inline;
}
.z3cformInlineValidation input {
 float: left;
 background: pink;
}
.z3cformInlineValidation input[class~="int-field"] {
 background: purple;
 width: 2em; 
```

至少在我的浏览器（不是 IE）上，这具有将输入字段（输入类型的元素在 z3cformInlineValidation 类的元素内）放在右对齐标签之后的效果，在大约 15 em 空格开始的列中放入包含标签和输入字段。由 zope/plone/z3cform/dexterity/? 标记的整数输入字段 使用“int-field”类的大小会减小，因此它们不会延伸到盒子上。“背景”属性只是用来查看发生了什么，并且可以删除。

进入zope管理界面，选择portal_skins，选择custom，从右上角“添加”按钮附近的下拉列表中选择“文件”，然后点击“添加”。在结果屏幕上，使用 project-css.css 作为您的“id”并上传文件 project-css.css

进入zope管理界面，选择portal_css，滚动到底部，用project-css.css填写“id”字段。然后单击“添加”。

我相信，CSS 会重新排列所有 Dexterity 默认表单输出。

为了限制它以使其仅由我的表单使用，我发现portal_css 中包含一个条件语句，用于像这样的 project-css.css 工作（完整表达式周围没有引号）

```
python: request.URL.endswith('end_of_applicable_url') 
```

我相信有更合适的方法，如果有人指出它们，我将不胜感激。

当我上次访问 Zope/Plone 时，我发现这些功能很诱人，但是文档虽然有了很大改进，但似乎仍然遗漏了初学者需要快速上手的一两个小魔法，可能是因为他们对于那些每天使用该产品的人来说是如此明显。

# java - 什么是正确的 ActionListener 结构？

> ID：13425066
> 
> 赞同：-1
> 
> 时间：2012-11-16T22:02:26.480
> 
> 标签：java, actionlistener

我还是一名学生，我不确定 ActionListener 的正确结构是什么？将它们留在布局构造函数中是否完全可以？我不想这么早就培养自己的坏习惯...

为了澄清我正在使用谷歌的网络工具包，它默认在构造函数中创建动作侦听器，但在此之前我使用了 ActionListenerHandler （它本身就是一个构造函数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:08:26.763

我相信答案是......这取决于......如果它是一次性的......你可以将它留在构造函数中，我假设你拥有的是实现 ActionListener 的匿名类。

如果你想重用 ActionListener。您可以创建一个类来实现 ActionListener 并简单地创建该类的实例。

我认为有些开发人员不喜欢在视图中创建 ActionListener。有些人认为它将逻辑添加到视图中。

也许您的 View 应该真正公开一个方法`addSomeActionListener(ActionListener actionListener);`

# ruby-on-rails - Rails：使用时区从控制台保存记录

> ID：13425068
> 
> 赞同：0
> 
> 时间：2012-11-16T22:02:47.257
> 
> 标签：ruby-on-rails, ruby, rails-console

我创建了一个新对象并通过控制台保存了它。我注意到列是 GMT 格式的`created_at`，`updated_at`但是当我`Time.now`在控制台中执行时，我得到了我所在时区的时间。如何使用本地时间从控制台保存我的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:30:38.773

Rahul，Rails 正确地以UTC（如 GMT）格式*存储*日期。我强烈建议不要撤消此操作。

Rails（和 ruby​​）提供 Time.zone、Time.local 和其他方法来帮助您以正确的本地时间*显示*值。您的当地时间是由您的系统设置决定的，但您的当地时间不一定与使用该系统的其他人的当地时间相同。一旦你把它放在野外的网络服务器上，人们可能在不同的时区。`application.rb`您可以在本节中告诉 Rails 默认使用哪个时区

```
# Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
# Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
config.time_zone = 'Eastern Time (US & Canada)' 
```

对于大多数用户都在同一时区的情况，这可能工作正常，但如果您希望用户能够在他们的时区看到日期/时间，您可能希望将他们的时区存储在用户记录中。有一个`time_zone_select`助手可以轻松捕获该信息。

# jms - JMS/MQ 和同步方法的区别

> ID：13425076
> 
> 赞同：0
> 
> 时间：2012-11-16T22:03:39.263
> 
> 标签：jms

我知道 JMS 用于处理同步消息，那么使用 JMS 或仅采用类似的东西有什么区别？

```
public void synchronized doSomething(Message message) {
    //do something sync
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:14:22.350

我实际上不确定您所说的“同步消息”是什么意思。JMS 背后的关键概念是异步消息传递。因此，发件人/发布者只需调用`send(Message)`非阻塞调用。因此它不需要等待接收方/消费者完成处理。

# php - Apache不显示PHP

> ID：13425081
> 
> 赞同：0
> 
> 时间：2012-11-16T22:04:31.747
> 
> 标签：php, apache, xampp, wamp

基本上，我已经安装了 WAMP 和 XAMPP（两个不同的时间），但它们似乎都没有显示 PHP，在互联网上看它一定是 Apache。

我没有激活世界网络服务，我没有安装 Skype，我什至将端口更改为 8080，但似乎没有任何效果。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:21:51.813

使用 localhost:8080 似乎已经解决了问题。

# c# - try-catch-throw 是否在没有异常处理的情况下增加了任何价值？

> ID：13425082
> 
> 赞同：2
> 
> 时间：2012-11-16T22:04:34.093
> 
> 标签：c#, .net

如果你有这样的方法：

```
public int Foo()
{
    try
    {
        // ...
    }
    catch(Exception)
    {
        throw;
    }
} 
```

假设异常在另一个地方被捕获，这是否比没有任何异常处理的方法更好？或者，另一方面，这会导致任何不利因素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:05:22.250

> 这比没有任何异常处理的方法更好吗？

不。除了通过异常（这是默认行为）之外，这对您没有任何作用。

就个人而言，我认为这是一种不好的做法，因为`try`/`catch`表示您正在执行某种形式的异常处理或将对异常执行某些*操作*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:09:49.393

在运行时，这根本不会改变行为。

在调试器中，当仅在这一方法中引发异常时，这为您提供了一个放置断点的位置。您可以告诉 Visual Studio 在引发某些异常时中断，但是当它们在*任何地方*引发时会中断，而不仅仅是在那个方法中。

# c++ - c++ 模板：为特定数据类型创建专用函数

> ID：13425086
> 
> 赞同：3
> 
> 时间：2012-11-16T22:04:57.220
> 
> 标签：c++, string, templates, generics

我在`Node`下面有一个模板，用于将一些数据存储在数组中。在添加之前，我想检查是否存在具有相同值的条目（我的插入逻辑需要它）。对于字符串类型，我想实现一个特定的比较方法。

```
template <class T> class Node
{
private:
    short noOfEntries;
    T data[MAX_VALUES];
public:
    Node () { noOfEntries = 0; }
    int Compare(int index, T *key);
    int Insert(T *key);
};

template <class T>
int Node<T>::Compare(int index, T *key)
{
    if(data[index] > *key)
        return 1;
    else if(data[index] == *key)
        return 0;
    return -1;
}

template <>
class Node <string> {
  public:
    int Compare(int index, string *key)
    {
        return (data[index].compare(*key));
    }
}; 
```

这会产生错误，因为属性 'data' 和 'noOfEntries' 不在 class 中`Node <string>`。看来我必须将 Node 中的所有属性都放到字符串的专用版本中。方法也一样。

有没有更好的方法让我只为 Node 定义一个插入方法，该方法将根据 T 的实际类型调用正确的 compare() 方法？我想避免重复方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T22:07:53.650

只专注于一个成员：

```
template <> int Node<std::string>::Compare(int index, std::string *key)
    {
        return (data[index].compare(*key));
    } 
```

一种更惯用的方法是使用比较策略模板参数，或者可能是描述元素类型的默认比较策略的特征。

# c# - 是否可以通过 PInvoke 指定 WPF 窗口的 MaximizedBounds？

> ID：13425088
> 
> 赞同：0
> 
> 时间：2012-11-16T22:05:07.053
> 
> 标签：c#, wpf, pinvoke

我的无边框 WPF 窗口有问题。具体来说，它在窗口任务栏上方最大化，并且还以 -7 边距最大化，使窗口在每个方向上超出屏幕 7 个像素。

这可以通过设置窗口的 MaximizedBounds 属性在 winforms 中轻松解决，但 WPF 没有此属性。

我尝试通过 WndProc 拦截最大化消息并手动设置大小/位置来解决这个问题，但这存在将 RestoreRegion 覆盖为最大化大小/位置的问题，从而消除了恢复窗口的能力。

所以，我想我也许可以通过 PInvoke 设置窗口的 MaximizedBounds。

[这个页面](http://msdn.microsoft.com/en-us/library/aa302340.aspx#win32map_windowfunctions)暗示它可以用 Win32 SetWindowPlacement 来完成......它采用一个称为 WINDOWPLACEMENT 的结构：

```
 [Serializable]
    [StructLayout(LayoutKind.Sequential)]
    public struct WINDOWPLACEMENT
    {
        public int length;
        public int flags;
        public int showCmd;
        public POINT minPosition;
        public POINT maxPosition;
        public RECT normalPosition;
    } 
```

我认为我只需要设置 Rectanle 和一个标志来指定它是用于 MaximizedBound 属性的，但是我在网上找不到任何这样的例子，而且我发现的任何标志都不像它可以完成这个。我在吠叫错误的树吗？如果是这样，有没有其他方法可以指定我忽略的 MaximizedBound （或类似的）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:54:48.613

在走 P/Invoke 路线之前，我会尝试这样的事情 - 没有`WM_SETMINMAXINFO`我知道的消息，所以你可能需要覆盖你的 WinProc 来处理`WM_GETMINMAXINFO`并返回虚假数据......但无论如何，先试试这个，看看它是否适合你：

```
public class ConstrainedWindow : Window
{
    public ConstrainedWindow()
    {
        this.MaxHeight = SystemParameters.MaximizedPrimaryScreenHeight;
        this.MaxWidth = SystemParameters.MaximizedPrimaryScreenWidth;
    }

} 
```

# flash - 如何让 Air 应用程序处理键盘输入

> ID：13425090
> 
> 赞同：0
> 
> 时间：2012-11-16T22:05:17.993
> 
> 标签：flash, air, flex4

我正在尝试运行我在 Flex Builder 4.6 中创建的 Adob​​e Air 应用程序。由于各种原因，此应用程序需要能够处理键盘事件。

我的尝试采用以下形式：

```
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx" 
                   keyDown="keyPressed(event)">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.events.FlexEvent;

        private var connection:NetConnection;

        public function keyPressed(event:KeyboardEvent):void
        {
            Alert.show("Pressed: "+event.keyCode,"key Event");
        }

    ]]>
</fx:Script>
 ... Other Stuff...
</s:WindowedApplication> 
```

这似乎不起作用。我单击生成的窗口并按下键。什么都没发生。

我是否在 Air 窗口中发现了一个错误，或者我需要做些什么才能使我的应用程序正确处理键盘输入？

有人请指教...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:23:14.323

您是否添加了事件侦听器？

stage.addEventListener(KeyboardEvent.KEY_DOWN, reportKeyDown);

# c++ - C++ 中的 case/switch 语句

> ID：13425093
> 
> 赞同：0
> 
> 时间：2012-11-16T22:05:35.003
> 
> 标签：c++

我正在尝试学习 C++，到目前为止我一直是正确的，但我遇到了一个简单的问题，我对 case 语句感到困惑，我知道如何处理 if 语句，我非常理解它，我在我下面的代码中工作的类和方法完美地工作我想知道如何更改它`if statement`并将其替换为`case statement`，当我尝试它时它不起作用但这是我的 if 语句代码如果我如何使它工作想用`case`而不是`if`??提前谢谢

我的代码

```
void SetType(){
        cout<<"Book SetType"<<endl;
        Choice:
        cout<<"Please Select from the list: \n 1- Technical literature \n 2- Fiction literature \n 3- Textbook"<<endl;
        int i;
        cin >> i;
        if ((i>0)&(i<=3)) {
            if (i==1) Type="Technical literature";
            if (i==2) Type="Fiction literature";
            if (i==3) Type="Textbook";
        }
        else 
        {
            cout << "Erorr you entered a wrong choice" << endl;
            goto Choice;
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T22:08:09.307

```
 switch(i) {
    case 1:
        Type="Technical literature";
        break;
    case 2:
        Type="Fiction literature";
        break;
    case 3:
        Type="Textbook";
        break;
    default:
        cout << "Erorr you entered a wrong choice" << endl;
        goto Choice;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:11:41.060

A `switch`/`case`完全适合您的情况。使用`switch`/`case`当您有离散值时，您可以对单个变量进行测试，在您的情况下`i`。

它通过定义每个`case`和`default`一个来工作，以防变量与任何情况不匹配。`switch`这是您的代码使用/的样子`case`：

```
switch(i)
{
    case 1:
        Type="Technical literature";
        break;
    case 2:
        Type="Fiction literature";
        break;
    case 3:
        Type="Textbook";
        break;
    default: 
        cout << "Erorr you entered a wrong choice" << endl;
        goto Choice;
} 
```

`break`用于防止代码从一`case`开始继续执行下面的代码`case`。

我强烈建议您学习比使用 a`goto`回到您的选择选择更好的方法。

这是一个新版本，它的“输入循环”稍微好一点，没有使用`goto`

```
void SetType()
{
    cout << "Book SetType" << endl;
    bool validChoice;
    do
    {
        validChoice = true; // Invalidate it in case of wrong choice
        cout << "Please Select from the list: \n 1- Technical literature \n 2- Fiction literature \n 3- Textbook" << endl;
        int i;
        cin >> i;
        switch(i)
        {
        case 1:
            Type="Technical literature";
            break;
        case 2:
            Type="Fiction literature";
            break;
        case 3:
            Type="Textbook";
            break;
        default:
            cout << "Error you entered a wrong choice" << endl;
            validChoice = false;
            cin.clear();
            string dummyLine;
            getline(cin, dummyLine);
        }
    } while(validChoice == false);
} 
```

我添加了一些代码来删除不是数字的输入，否则 cin 将继续失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T22:09:55.307

```
void SetType(){
        cout<<"Book SetType"<<endl;
        Choice:
        cout<<"Please Select from the list: \n 1- Technical literature \n 2- Fiction literature \n 3- Textbook"<<endl;
        int i;
        cin >> i;
        switch(i)
        {
            case 1:
            {
                Type="Technical literature";
                break;
            }
            case 2:
            {
                Type="Fiction literature";
                break;
            }
            case 3:
            {
                Type="Textbook";
                break;
            }
            default:
            {
                cout << "Erorr you entered a wrong choice" << endl;
                goto Choice;
                break;
            }
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T22:11:44.827

```
void SetType(){
    cout<<"Book SetType"<<endl;
Choice:
    cout<<"Please Select from the list: \n 1- Technical literature \n 2- Fiction literature \n 3- Textbook"<<endl;
    int i;
    cin >> i;
    switch(i) {
        case 1: Type="Technical literature"; break;
        case 2: Type="Fiction literature"; break;
        case 3: Type="Textbook"; break;
        default:
            cout << "Erorr you entered a wrong choice" << endl;
            goto Choice;
    }
} 
```

Ps 很多人一看到goto就出冷汗和心悸。

# iphone - iOS：存档失败

> ID：13425094
> 
> 赞同：0
> 
> 时间：2012-11-16T22:05:38.740
> 
> 标签：iphone, ios, app-store

我正在尝试分发我的 iOS 应用程序。我正在尝试建立档案。该应用程序运行良好，但是当我尝试存档它时，它告诉我它找不到“.h”文件，它没有问题找到构建>运行。

它们是来自我项目中包含的不同项目和库的“.h”文件。

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:28:56.360

我在存档时从未遇到过这个问题，但我可以为您提供的是查看以下线程中接受的答案，看看它是否可以帮助您解决遇到的问题： [编译、构建或存档问题使用 Xcode 4（和依赖项）](https://stackoverflow.com/questions/5584317/compile-build-or-archive-problems-with-xcode-4-and-dependancies)

# iphone - iOS 瓶颈：全局变量与核心数据或属性列表

> ID：13425098
> 
> 赞同：4
> 
> 时间：2012-11-16T22:06:09.370
> 
> 标签：iphone, ios, cocoa, ios5, core-data

我是 iOS 和 Cocoa 的新手。我的问题不是关于如何让某件事情发挥作用，而是更多关于改进用户体验和性能的设计。

我正在向现有应用程序添加功能。目前，该应用程序有一个类“RootViewController”（RVC），负责发出服务器请求。RVC 调用服务器以获取 json 响应。这个 json 响应被解析，解析后的响应被一个名为“array”的 NSArray 对象引用。服务器提供给“array”的数据必须定期更新，因为它代表了其他客户可以购买的实时库存。

我需要在应用程序生命周期的不同时间在其他类中使用对“数组”的引用。我不想每次想使用或更新“数组”时都调用服务器。在我自己的设备上测试这个应用程序时，调用服务器似乎很慢 -> 会损害应用程序的性能。

我考虑过创建一个可以充当委托的类来保持对 NSArray 的引用 - 有点像全局变量。我会向服务器发出一个异步请求，并跟上这个委托类中的响应。我不确定如何确定这种方法是否有效或是否考虑最佳实践（考虑到 MVC）。

我正在寻找存储“数组”的最佳位置，以便其他类可以快速使用它，而不会过多地依赖网络或内存使用情况。“阵列”必须能够偶尔从服务器更新（因为“模型”可能会因库存变化而改变）。根据我的研究，iOS 的 CoreData 似乎是最好的起点，但如果应用程序不活跃，我不确定如何定期更新 CoreData。换句话说，如果 CoreData 中的数据最近没有更新，我不想向用户呈现陈旧的数据。

json 响应大小约为 20KB - 45KB。

存放轻量级对象以便定期更新的最佳/替代位置在哪里？我倾向于会话样式变量，但我不知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:42:42.460

根据 MVC 来看这个，你有两个部分：

*   一个数组——这是模型
*   从服务器获取库存的代码——这是控制器

这个控制器代码实际上是模型控制器，而不是视图控制器。我不会把它放在视图控制器类中。如果代码非常简单，您可以将它放在您的应用程序委托中，但我建议将它完全放在它自己的类中。

在**-applicationDidFinishLaunching**中：

```
[[InventoryController sharedInstance] reloadContent];
[[InventoryController sharedInstance] scheduleUpdates]; 
```

**库存控制器.h**

```
@interface InventoryController

@property (retain) NSArray *inventory;
@property (retain) NSTimer *reloadTimer;

+ (InventoryController *) sharedInstance;
- (void) reloadContent;
- (void) scheduleUpdates;

@end 
```

**库存控制器.m**

```
@implmentation InventoryController

- (void) reloadContent {
    ...
}

+ (InventoryController *) sharedInstance {
    static InventoryController * singleton;
    if (!singleton)
        singleton = [[self.class alloc] init];
    return singleton;
}

- (void) scheduleUpdates {
    self.reloadTimer = ...;
}

@end 
```

其他地方：

```
NSArray *inventory = [[InventoryController sharedInstance] inventory]; 
```

在`-reloadContent`中，您应该从服务器中提取内容。在`-scheduleUpdates`中，您应该设置一个作用于控制器的计时器，使其定期重新加载数据。如果您的视图控制器需要在数据陈旧时调整其行为，请在数组旁边存储一个 NSDate，添加一个`-isStale`检查日期的方法，然后首先调用它。

请记住在后台加载 URL。您不应该在处理事件或操作时停止并重新加载数据，因此本质上，您的视图控制器需要在等待数据时从操作方法返回，并在您获取数据时调整其显示。

如果视图控制器需要在数据刷新后做出响应，让视图控制器注册一个通知，您可以在库存控制器完成更新其内容时发布该通知：

```
 [[NSNotificationCenter defaultCenter]
    postNotificationName:InventoryControllerDidReloadContent
                  object:self]; 
```

如果您想在设备上缓存库存数据，以便在应用程序进入后台时将其从内存中删除，您可以通过将数组写入属性列表来实现，但如果陈旧数据没有用处，您可能不会想打扰。

您可以使用 Core Data 代替数组和属性列表，但它不会消除对从服务器加载数据并将其加载到上下文中的控制器的需要。您可能会有一个托管对象上下文和一个获取的结果控制器，而不是一个数组。如果您不在应用程序中编辑该内容，我怀疑 Core Data 是否会比数组和属性列表提供任何好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:22:50.027

如果这个“数组”有有趣的结构，CoreData 是一个不错的选择。在这种情况下，我猜测 CoreData 和 plist 的速度将彼此一样快。使用看起来最简单的那个，如果太慢，试试另一个。

尽量不要在应用程序未运行时更新数据。将上次更新时间与您的缓存数据一起存储。如果它“太旧”，则显示“请稍候”占位符并更新它。如果它是“旧但不太旧”，则显示您拥有的内容并在非主线程中更新它。或者尝试该 UI 的其他变体（“太旧”== 通知 + 只读模式）。

如果您确实发现在后台更新的技巧通过应用程序审核，请仔细考虑这将消耗多少用户的电池。添加一种禁用它的方法。或者默认禁用它并添加一种启用它的方法。或者干脆不做。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T22:15:12.760

我建议将其存储在您的应用程序委托中。它可以很好地存储数组，并且可以从应用程序中的任何类访问。

# c#-3.0 - 检测是 userAccount 在 win xp 或 7 + C# 中启用还是禁用

> ID：13425099
> 
> 赞同：0
> 
> 时间：2012-11-16T22:06:11.693
> 
> 标签：c#-3.0, c#-2.0

我如何以编程方式检测 userAccount 是否在本地操作系统中启用或禁用，如 win xp 或 7（不是 Active Directory）。在 C# 中还如何检测 userAccount pass 是否过期？在 C# 中

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:09:59.133

```
 public static bool IsUserEnable(string username, ContextType type)
        {
            PrincipalContext context = new PrincipalContext(type);
            UserPrincipal user = UserPrincipal.FindByIdentity(context, IdentityType.SamAccountName, username);

            return user.Enabled.Value;
        } 
```

* * *

像这样调用这个方法：

```
IsUserEnable("guest", ContextType.Machine); 
```

# java - 将套接字设置为空而不是在 Java 中使用“.close()”是不好的

> ID：13425100
> 
> 赞同：1
> 
> 时间：2012-11-16T22:06:15.517
> 
> 标签：java, sockets, null, connection

这个问题说明了一切；使用“.close()”方法而不是仅仅将套接字设置为空会更好吗？但是“.close()”方法不能抛出异常，那个时候我可以直接设置为null吗？

一旦我关闭了一个套接字，只要安全措施在我调用“.close()”后将套接字设置为空，我可以用不同的连接再次重用同一个套接字吗？还是我需要重新创建一个全新的套接字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:12:26.523

The question is meaningless. Setting a *variable* to null does nothing to the *socket,* except possibly make it eligible for GC. If you want to close a socket, close it, or better still close the outermost output stream or writer you have wrapped around its output stream. The fact that this can throw an exception mustn't deter you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:07:46.413

> But cant the ".close()" method throw an exception

It may, so wrap close() also in try/catch. If close() fails, that's ok you tried failed, make it `null` and continue.

> And once I close a socket, just safe measures set the socket to null after I call ".close()", can I reuse that same socket again with a different connection? Or do I need to recreate a whole new socket.

Closing socket will also close the socket's InputStream and OutputStream. Once a socket has been closed, it is not available for further networking use (i.e. can't be reconnected or rebound). A new socket needs to be created.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T22:14:24.063

是的，最好在将套接字设置为空之前关闭套接字。我会说在调用 close 后将其设置为 null 是安全的，无论它是否引发异常。如果在关闭它之前将其设置为 null，则套接字将仍然存在并占用端口，直到它在稍后的某个未知时间被 jvm 销毁。

是的，您必须在关闭它后创建一个新套接字。

# php - move_uploaded_file 返回 false，但 $_FILES['uploadedfile']['error'] == 0

> ID：13425103
> 
> 赞同：4
> 
> 时间：2012-11-16T22:06:39.100
> 
> 标签：php, image

我正在使用 POST 方法在我的 upload_photo.php 文件中上传照片，该文件使用 uploader.php 来处理图像。Uploader.php 将调整图像大小并覆盖旧图像。它在本地工作正常，但在服务器上却不行。

`move_uploaded_file`返回false，但`$_FILES['uploadedfile']['error'] == 0`对我来说并没有。

我已经发布了整个 uploader.php 和一个来自 upload_photo.php 的片段，它显示了表单标签。

```
<?php
//This is uploader.php
session_start();
include ('dbconfig.php');
include('SimpleImage.php');

mysql_connect(HOST, USERNAME, PASSWORD);
$conn = mysql_select_db(DB_NAME);

$target_path = "uploads/";

$target_path = $target_path . renameImage();

$_SESSION['client_photo'] = $target_path;

$query = "UPDATE client ";
$query .= "SET personal_photo = ('$target_path') ";
$query .= "WHERE client_id = ".$_SESSION['clientID'];
$results = mysql_query($query) or die('Error msg: '.mysql_error().'<br/>
        sql: '.query.'<br/>');

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
  $msg = "The file ".  $_SESSION['client_photo']. 
  " has been uploaded";
  chmod($target_path, "0666");
  $work = new ImgResizer($target_path); 
  $work -> resize(600, $target_path); 
} else{
  $msg = "There was an error uploading the file, please try again!";
  $msg .= $_FILES['uploadedfile']['error'];
}
header("Location: upload_photo.php?msg=$msg");

function renameImage(){ 
  mysql_connect(HOST, USERNAME, PASSWORD);
  $conn = mysql_select_db(DB_NAME);

  $sql = "SELECT first_name, last_name, client_id
          FROM client
          WHERE client_id = ".$_SESSION['clientID'];
  $res = mysql_query($sql) or die('Error msg: '.mysql_error().'<br/>
                sql: '.$sql.'<br/>');
  if($row = mysql_fetch_array($res, MYSQLI_ASSOC)){
      $_SESSION['successphoto'] = 1;
      return $row{first_name}.'_'.$row{last_name}.'_'.$row{client_id};
  }
  else{
      echo "There was an error while fetching the row.<br/>";
  }
}

class ImgResizer {
  private $originalFile = '';
  public function __construct($originalFile = '') {
      $this -> originalFile = $originalFile;
  }
  public function resize($newWidth, $targetFile) {
      if (empty($newWidth) || empty($targetFile)) {
          return false;
      }
      $src = imagecreatefromjpeg($this -> originalFile);
      list($width, $height) = getimagesize($this -> originalFile);
      $newHeight = ($height / $width) * $newWidth;
      $tmp = imagecreatetruecolor($newWidth, $newHeight);
      imagecopyresampled($tmp, $src, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);
      if (file_exists($targetFile)) {
          unlink($targetFile);
      }
      imagejpeg($tmp, $targetFile, 85); // 85 is my choice, make it between 0 – 100 for output image quality with 100 being the most luxurious
  }
}

?> 
```

这是来自 upload_photo.php 的片段

```
echo '<form enctype="multipart/form-data" action="uploader.php" method="POST">';
echo '<tr>';
//echo "<td colspan='2'>".$_GET['text']."</td>";
echo '</tr>';
echo '<tr align="center">';
echo '<td colspan="2">';
echo '<input type="hidden" name="MAX_FILE_SIZE" value="5000000" />
        Choose a file to upload: <input name="uploadedfile" type="file" accept="image/*"/><br />
        <input type="submit" value="Upload File" />
      </form>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:11:10.530

That probably means that the upload went through okay - the file is uploaded to your temp directory - but the file could not be moved to the destination you have set.

You should double-check the path you are moving the file to and make sure that the web user (`apache`, `www` or whatever) has permissions to write to that directory.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2018-05-21T09:09:49.360

绝对你是在正确的道路上。只需更改目录权限，如下所示。希望它会奏效。

```
chmod 777 uploaded_folder_name 
```

# c++ - CreateProcess 成功，但 GetExitCodeProcess 返回 C0000142

> ID：13425106
> 
> 赞同：9
> 
> 时间：2012-11-16T22:06:47.673
> 
> 标签：c++, winapi, process

我正在尝试使用类似于[此代码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379608%28v=vs.85%29.aspx)的 CreateProcessAsUser() API 从服务启动用户模式进程。我的代码在 99% 的情况下都能正常工作，除了 API 有时会成功，我从[PROCESS_INFORMATION](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684873%28v=vs.85%29.aspx)结构中获取进程句柄，但进程本身没有出现在我打算在其中运行的交互式用户会话中。

有趣的是，如果我在进程句柄上调用[GetExitCodeProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683189%28v=vs.85%29.aspx) ()，它会成功并返回代码 0xC0000142。知道为什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T22:25:16.137

错误 0xC0000142 是`STATUS_DLL_INIT_FAILED`（我使用[错误代码查找工具](http://www.microsoft.com/en-us/download/details.aspx?id=985)确定了这一点）。一个快速的谷歌发现[了这个问题](http://ask.electric-cloud.com/questions/606/why-do-i-get-status_dll_init_failed-from-a-program-run-on-the-agent)，它说：

> 此问题的最常见原因是链接到的程序`user32.dll`在无法与系统的窗口站和桌面对话的上下文中运行。通常，诸如代理之类的服务在其自己的窗口站和桌面中运行，并且 user32 程序运行良好，但是任何显示对话框的程序都会挂起，而人类没有机会看到错误消息或关闭对话框.

因此，如果您不使用 中的任何函数`user32.dll`，则应删除该依赖项。如果您正在使用该 DLL，那么我不确定您应该做什么。一种选择是动态加载 DLL`LoadLibrary`并在它成功时使用它（即您有一个有效的窗口会话），或者在它失败时回退到故障模式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T23:03:36.277

如果 CreateProcess...() API 能够成功创建内部流程对象并**开始**初始化，则返回 TRUE；他们不会等待进程加载并开始运行其可执行映像。在某些情况下，稍后的初始化会失败，但从内核的角度来看，它仍然是一个成功的进程创建。

# ide - Go 使用哪个 IDE？

> ID：13425107
> 
> 赞同：3
> 
> 时间：2012-11-16T22:06:48.530
> 
> 标签：ide, go

不久前，当 Go 还很新时，我使用 Vi 或 Notepad++ 作为编辑器玩了一下它，当时没有可用的 IDE。现在我打算用它做一些工作，在快速搜索后发现有几个选项。之后，我查看了 SO，发现所有关于 Go IDE 的问题都过时了。

所以，既然有一些选择，我该问了；你会为 Go 推荐什么 IDE？为什么？我不在乎它在哪个操作系统上运行，但请记下哪个操作系统。基本功能要点将不胜感激，但并非完全必要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:37:43.020

有很多完整的选项，而 github.com/nsf/gocode 是其中一个有用的部分。go src 包括 vim（我使用时间最长的）和 emacs 的绑定。Ctags 和 go 似乎与 CtrlP 配合得很好，如果你喜欢的话，可以增强 tagbar 以使其正常工作。

我最近开始使用 sublime text 2 和插件 GoSublime。代码完成、自动格式化代码、开箱即用的运行 pkg 单元测试的快速绑定，以及许多提高生产力的好东西。

如果你已经有一个你喜欢的 vim 设置，那么使用那个 b/c 效果很好。我自己对 sublime text 印象深刻，并计划（尝试）继续使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:38:35.940

我怀疑任何人都可以为你回答这个问题，因为这是一件非常私人的事情。因此，[这里](http://go-lang.cat-v.org/text-editors/)列出了当前可用的编辑器和 Go 相关插件。

我不知道它是否完整，但它至少会让你开始。

编辑：就我个人而言，我使用 Gedit 做所有事情。它具有连接我需要的任何外部工具的功能，尽管我很少使用它们。我使用的唯一与 Go 相关的东西是语法高亮。谈到 Go，我发现不需要一个成熟的 IDE。C#、C++、Java 等语言在没有围绕它构建的整个 IDE 框架的情况下使用时效率不高。Go 没有这个问题。

# c - c语言中的win32线程

> ID：13425109
> 
> 赞同：0
> 
> 时间：2012-11-16T22:06:58.370
> 
> 标签：c, multithreading

我正在做一个涉及使用winthreads乘以矩阵的作业。

我是 C 的新手，这就是我拥有的所有代码（我在这里阅读了一些线程）。

```
#include <stdlib.h>
#include <stdio.h>
#include <time.h>

#define M 3
#define K 3
#define N 3
#define NUMBER_OF_THREADS 9

int A[M][K] = { {1,4,3}, {2,5,4}, {3,6,1} }; 
int B[K][N] = { {8,7,6}, {5,4,3}, {7,3,1} };
int C[M][N];

clock_t start,end;

struct v
{
    int i; 
    int j; 
}; 

DWORD WINAPI MatrixMult(LPVOID Param)
{
    int a;

    DWORD sum = 0;

    struct v *data = Param;

    for(a = 0; a < 3; a++)
    {
        sum = sum + ((A[data->i][a]) * (B[a][data->j]));
    }

    C[data->i][data->j] = sum;
    return 0;

}

int main()
{   
    struct v *data = malloc(sizeof(struct v));
    int i, j, k;

    DWORD ThreadIds[NUMBER_OF_THREADS];

    HANDLE ThreadHandles[NUMBER_OF_THREADS];

    int thread_index = 0;

    start = clock();

    for (i = 0; i < M; i++)
    {
        for (j = 0; j < N; j++ )
        {
            data->i = i;
            data->j = j;

            ThreadHandles[thread_index] = CreateThread (NULL, 0, MatrixMult, &data, 0, &ThreadIds[thread_index]);

            if (!ThreadHandles)
            {
                printf("Error, threads cannot be created");
                return 1;
            }
        }

        thread_index++;

    }

    printf("Result:\n");

    for (i = 0; i < M; i++)
    {
        for (j = 0; j < N; j++)
        {
            printf("C[%d][%d] = %f\n", i,j, C[i][j]);
        }
    }

    for (i = 0; i < 9; i++)
    {
        CloseHandle(ThreadHandles[i]);
    }

    end = clock();
    printf("Tiempo = %d", end - start);

    return 0;
} 
```

我在使用这个程序时遇到了一些问题，它可以编译，但没有运行，它标志着 0x775f15de 异常中的错误，读取 0x3468a3bc 时出错。任何想法为什么会出现此错误以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:12:02.783

There are (at least) three problems:

1.  `data` is a `struct v*` but it's address is being passed as the argument to the thread (i.e. a `struct v**`) which is then being interpreted as a `struct v*`. This is incorrect and is a probable cause of the error.

2.  All threads will be executing on the same instance of `struct v` named `data`. This will introduce race conditions. Allocate a new `struct v` for each thread and have the thread `free()` it when no longer required.

3.  The type of `C[i][j]` is an `int` but the `printf()` has the format specifier `%f`. This is incorrect, it should be `%d` (as it is for the other arguments).

Note that it is not required to cast the return value of `malloc()`( [Do I cast the result of malloc?](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc) ). A more common and better way of writing the `malloc()` line from the posted code is:

```
struct v* data = malloc(sizeof(*data)); 
```

Remember to `free()` what is `malloc()`d.

# c++ - 数组未在此范围内声明

> ID：13425110
> 
> 赞同：0
> 
> 时间：2012-11-16T22:06:58.023
> 
> 标签：c++, g++

我编写了一个 c++ 程序，其中使用了`array`对象和包含的`<array>`头文件，但是当我尝试使用`g++`它编译它时，会返回很多错误消息，指出“数组未在此范围内声明”。它有什么问题。程序在这里：

```
#include <iostream>
#include <string>
#include <array>

using namespace std;

const int Seasons = 4;
const array<string, Seasons> Snames =
 {"spring", "summer", "fall", "winter"};

void fill(array<double, Seasons>* pa);
void show(array<double, Seasons> da);

int main()
{
array<double, Seasons> expenses;
fill(&expenses);
show(expenses);

return 0;
}

void fill(array<double, Seasons>* pa)
{
 for(int i = 0; i < Seasons; i++)
 {
    cout << "Enter " << Snames[i] << " expenses: ";
    cin >> *pa[i];
 }
}

void show(array<double, Seasons> da)
{
double total = 0.0;
cout << "\nEXPENSES\n";

 for(int i = 0; i < Seasons; i++)
 {
    cout << Snames[i] << ": $" << da[i] << endl;
    total += da[i];
 }
cout << "Total Expenses: $" << total << endl;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T22:09:06.773

The most likely reason why your program does not compile is that the `<array>` header is not compatible with pre-C11 compilers. Add

```
-std=c++0x 
```

to the flags of your g++ to enable C++11 support. Once you do, you'd get a [different error](http://ideone.com/1QInrL), because line 28 should be

```
cin >> (*pa)[i]; 
```

(**EDITED**; original answer suggested a missing reference to `std::`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:09:32.607

It's called `std::array` - it's prefixed with `std::` namespace qualifier, like every standard library class or function [template].

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T22:09:34.537

add either one of the below after the #include:

```
using namespace std;
using std::array; 
```

# php - Keeping array index key when sorting a multidimensional array with PHP

> ID：13425117
> 
> 赞同：37
> 
> 时间：2012-11-16T22:07:36.317
> 
> 标签：php, usort

```
array(10) { 
[1019]=> array(3) { ["quantity"]=> int(0) ["revenue"]=> int(0) ["seller"]=> string(5) "Lenny" } 
[1018]=> array(3) { ["quantity"]=> int(5) ["revenue"]=> int(121) ["seller"]=> string(5) "Lenny" } 
[1017]=> array(3) { ["quantity"]=> int(2) ["revenue"]=> int(400) ["seller"]=> string(6) "Anette" } 
[1016]=> array(3) { ["quantity"]=> int(25) ["revenue"]=> int(200) ["seller"]=> string(6) "Samuel" } 
[1015]=> array(3) { ["quantity"]=> int(1) ["revenue"]=> int(300) ["seller"]=> string(6) "Samuel" } 
[1014]=> array(3) { ["quantity"]=> string(2) "41" ["revenue"]=> string(5) "18409" ["seller"]=> string(6) "Samuel" }
} 
```

I am working with the array above. This multi dimensional array is called `$stats`.

I would like to sort this array, by the quantity.

So that the multidim array is has its first array 1016 then 1018, 1017 and so on.

I have done this by:

```
 function compare($x, $y) {
                    if ( $x['quantity'] == $y['quantity'] )
                    return 0;
                    else if ( $x['quantity'] > $y['quantity'] )
                    return -1;
                    else
                    return 1;
                }
                usort($stats, 'compare'); 
```

Which works just fine!

But the issue is that the head array index (the ID's, 1019, 1018, 1017 etc) disappears when its getting sorted. I would like to keep the array indexes.

How can I do this?

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-11-16T22:09:24.323

I think what you need is `uasort` —

[FROM PHP DOC](http://www.php.net/manual/en/function.uasort.php)

> Sort an array with a user-defined comparison function and **maintain index association**

Example

```
 uasort($stats, 'compare'); 
```

# php - Magento中文件之间的全局变量

> ID：13425123
> 
> 赞同：1
> 
> 时间：2012-11-16T22:08:22.127
> 
> 标签：php, magento, scope

我现在在 Magento 工作，并且遇到了变量范围的问题。我有两个文件在愿望清单上显示一些东西。我需要在这两个文件之间传递一个变量，我可以成功地做到这一点，我遇到的问题是这两个文件循环运行，我无法更改这些值。我们使用的基本代码如下： 文件 1：

```
global $var1;
//$var1 = '';
if($condition == true){
  $var1 = 'string';
} 
```

另一个文件正确地回显了 $var1，给了我“字符串”。然后该文件再次循环并重复该过程。我遇到的问题是，如果我取消注释第二行以重置变量，它总是保持为空字符串。if 语句肯定会被触发，只是没有设置变量。我是否误解了全局可访问变量在 php 中的工作方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T05:24:46.377

如果您想以 Magento 方式执行此操作，则应**将信息连接到 object**。

在不知道任何细节的情况下，我们无法确定，但您的`$var1`价值很有可能在逻辑上与愿望清单、愿望清单项目或与之相关的事物（如客户或产品）相关联。

话虽如此，您可以通过不同的方式**在 Magento 布局模板文件之间传递信息**（您基本上想要做的）。我不能给你具体的代码，因为我不知道你到底想做什么，但我可以给你一些选择：

*   **块类**：每个 .phtml 文件都有一个`$this`对象。这意味着您的模板文件是在对象的上下文中呈现的。该对象是块类的一个实例。布局 XML 文件定义用于该特定块的块类。[在布局介绍中](http://www.magentocommerce.com/design_guide/articles/intro-to-layouts)了解更多信息。

    如果其中的信息`$var1`仅用于这些块中的演示目的，您可以**将信息存储在其中一个块对象**本身中。由于块是按层次结构构建的（并且您使用循环），您可以考虑使用父块来存储信息。您可以使用`$this->getParentBlock()`. 如果您找到了您的对象，您可以调用`$block->setYourVariableName('value')`以保存该值并`$block->getYourVariableName()`再次读取它。您还可以通过访问子块`$block->getChild('block_name')`或使用它们的数据`$block->getChildData('your_variable_name')`。[在API 文档](http://docs.magentocommerce.com/Mage_Core/Mage_Core_Block_Abstract.html)中查找更多有用的方法。

*   **模型单例**：另一种方法是单例模型。单例确保仅存在某个类的一个实例。这样，您始终可以访问同一个对象并共享数据。也许这对您来说不是完美的解决方案，因为您必须创建一个新的模型类来存储那个小信息位。

    另一方面，有足够多的用例表明构建单独的模型是有意义的。同样，由于我不知道您在做什么，因此创建模型可能会很好。您仍然可以决定是将模型存储为块的一部分还是使用单例访问它。如果您想使用单例，请参阅[Alan Storm 的这篇文章](http://alanstorm.com/magento_registry_singleton_tutorial)，“Magento 的单例模式”部分。

*   **注册表**：我会将此作为最后的手段。注册表是一个中央和全局的“为我存储此信息/为我获取此信息”对象。它很容易使用，但如果您想采用最佳实践，则应尽可能避免这种情况。（一些琐事：Magento 的单例实现实际上使用了注册表，但对您隐藏了细节。）

    请在执行此操作之前考虑其他选项，因为您不想在注册表中填充大量微小的信息位。如果您想使用它，请再次查看[Alans 的文章](http://alanstorm.com/magento_registry_singleton_tutorial)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T18:06:08.033

添加到 Mattihias 的非常详细的答案中，如果您最终确实使用了注册表（不是过度使用的东西），请确保在不需要保持其清洁时立即从注册表中删除该条目。

```
Mage::unregister('registry_key') 
```

# c# - Run an application as other user with UAC

> ID：13425126
> 
> 赞同：0
> 
> 时间：2012-11-16T22:08:29.740
> 
> 标签：c#

I'm trying to write an application that runs the Draytek VPN client as another user as I don't want the user to have an admin password and their account is a standard user. However I can't get it working due to errors in both implementations I've tried.

Here is some sample code I've tried:

```
System.Security.SecureString ss = new System.Security.SecureString();
foreach (var c in "password")
{
    ss.AppendChar(c);
}

Process process = new Process();
process.StartInfo.UseShellExecute = true;
process.StartInfo.WorkingDirectory = "c:\\";
process.StartInfo.FileName = @"C:\Program Files (x86)\DrayTek\Smart VPN Client\SmartVPNClient.exe";
process.StartInfo.Verb = "runas";
process.StartInfo.UserName = "testUser";
process.StartInfo.Password = ss;
process.StartInfo.UseShellExecute = false;
process.Start(); 
```

I get the error: *The requested operation requires elevation.*

I have also tried Impersonation using the code in the question, [Impersonating a Windows user](https://stackoverflow.com/questions/9909784/c-sharp-impersonator). My implementation of the call is below:

```
 using ( new Impersonator( "testUser", "", "password" ) )
  {

      Process process = new Process();
      process.StartInfo.UseShellExecute = true;
      process.StartInfo.WorkingDirectory = "c:\\";
      process.StartInfo.FileName = @"C:\Program Files (x86)\DrayTek\Smart VPN Client\SmartVPNClient.exe";
      process.StartInfo.Verb = "runas";
      process.Start();
  } 
```

However the error from running the above code is *Unknown error (0xfffffffe)*.

I can provide more error details if required.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:59:20.410

关于第一种方法：

您收到“请求的操作需要提升”消息的事实意味着当前运行您的应用程序的用户没有以管理员身份运行，或者 Draytek VPN 客户端需要提升才能正常运行。

我对您的代码进行了以下更改：

1.  删除了`process.StartInfo.Verb = "runas";`不需要的行。
2.  将文件名更改为测试控制台应用程序，而不是 Draytek VPN 客户端）。

并测试如下：

Windows 7的

*   以管理员身份登录并在默认级别启用 UAC
*   以受限用户身份登录，并在默认级别启用 UAC

视窗

*   以管理员身份登录
*   以受限用户身份登录

所有测试都有效。在任务管理器中，我可以看到测试控制台在正确的帐户下运行。

这是我用来运行测试的代码：

```
static void Main(string[] args)
        {
            Console.Write("User name:");
            string user = Console.ReadLine();
            Console.Write("Password:");
            string password = Console.ReadLine();
            Console.Write("File name:");
            string fileName = Console.ReadLine();

            System.Security.SecureString ss = new System.Security.SecureString();
            foreach (var c in password)
            {
                ss.AppendChar(c);
            }

            Process process = new Process();
            process.StartInfo.UseShellExecute = true;
            process.StartInfo.WorkingDirectory = "c:\\";
            process.StartInfo.FileName = fileName;
            process.StartInfo.Verb = "runas";
            process.StartInfo.UserName = user;
            process.StartInfo.Password = ss;
            process.StartInfo.UseShellExecute = false;
            process.Start();

            Console.ReadKey();
        } 
```

您是否尝试过运行另一个应用程序而不是 Draytek VPN Client 作为测试？

# ios - Can I change the AppID for an iOS app and still have access to existing documents?

> ID：13425132
> 
> 赞同：0
> 
> 时间：2012-11-16T22:08:55.590
> 
> 标签：ios, provisioning, app-id

My scenario is that I have been developing an iOS app under my personal AppleID and provisioning a bunch of test devices to involve others in the testing. As we are close to rolling out this app, we plan on publishing it using a corporate AppleID. So when the app certificates are be created in the provisioning portal, they will necessarily be under a new AppID.

So the question is: when I rebuild my app with this new AppID and deploy it to existing testers, will they have access to the documents on their device that had been created by the previously-built app? If not, then how do I go about migrating them to the new app without forcing them to re-enter stuff they would have preferred to keep?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:37:29.453

查看此基本文件系统[概述](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

如果它们是两个不同的应用程序 ID，它们是两个不同的应用程序，因此无法访问彼此的应用程序主文件。您将需要一个基于云的存储解决方案来促进这一点。

您还可以查看此[链接](https://stackoverflow.com/questions/4045495/sharing-data-between-apps-on-an-idevice)，该链接有一些其他选项，具体取决于您需要传输多少数据以及您是否可以在新应用 ID 下发布之前更新市场上的现有应用。

# objective-c - Interface Builder 不会显示现有 XCode 项目中的对象？

> ID：13425143
> 
> 赞同：0
> 
> 时间：2012-11-16T22:09:40.987
> 
> 标签：objective-c, ios, xcode, interface-builder, xib

我正在为一个学校项目下载和修改一个 xcode 项目，但我有一个奇怪的问题。当我打开 xib 文件时，界面生成器不会显示任何对象，即使项目几乎按原样完成。当我构建并运行它时，它工作得很好，并显示了它应该在的所有内容，但是为什么我不能查看所有这些项目以在界面生成器中进行编辑？

该文件可以在这里找到： [http ://compsci.cis.uncw.edu/~pattersone/courses/275/resources/JSONFlickrPart3.zip](http://compsci.cis.uncw.edu/~pattersone/courses/275/resources/JSONFlickrPart3.zip)

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:30:19.520

并非所有内容都必须在 xib 中。看起来搜索字段和其他元素是在`loadView`. 您是否被告知所有 UI 元素都应该在 xib 中，还是什么？你的任务是接受一个依赖 xib 的项目并将其转换为一个纯粹的程序化项目吗？

# c# - Load and start WPF app as an assembly

> ID：13425149
> 
> 赞同：0
> 
> 时间：2012-11-16T22:09:57.950
> 
> 标签：c#, wpf, reflection, .net-assembly

I have a WPF application "X" I want to use it for some file loading, file processing, data processing, data learning and many other data mining stuff.

I have a data source in an external application. The application allows custom made unmanaged DLLs for custom data-mining, but I just don't like C++ as I used to. The unmanaged DLL just loads a managed DLL via COM and pass the data there.

But - the managed DLL is still just a data proxy.

From the unmanaged DLL, I know, when the data source application requests the user made libraries and when is it sending data to them - when the request is made, I want the DLL proxy to start an application defined in a configuration file, hook on it and feed it with data.

I thought reflection might be the best way of doing that.

My idea was creating a different DLL which would expose an interface. The DLL proxy would look for a public type implementing that specific interface, create its instance and then call its interface methods.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:09:57.950

Answered myself at the end of writing this question, I have no idea why I thought it won't work before testing it first...

> My idea was creating a different DLL which would expose an interface. The DLL proxy would look for a public type implementing that specific interface, create its instance and then call its interface methods.

# ios - Phonegap Build ad-hoc OTA

> ID：13425151
> 
> 赞同：6
> 
> 时间：2012-11-16T22:10:08.847
> 
> 标签：ios, cordova, ad-hoc-distribution, ota

背景：我正在使用 Phonegap Build 构建一个 .ipa 文件，用于临时 OTA 分发（适用于 beta 测试人员）。我在我的 Phonegap 构建配置文件中添加了一个新密钥（这是我公司的概念证明），它是分发证书和导出为 .p12 文件的私钥。然后，我从 Apple 开发门户请求并下载了临时用户的移动配置文件。我从不久前构建的本机应用程序中创建了自己的 .plist，然后将 .ipa 放在具有通常下载和安装说明的 Web 服务器上。.ipa 文件*几乎*已安装，然后我收到一条错误消息，指出无法下载该文件。我在管理器中查看了设备日志，并没有太多内容。控制台只是告诉我`MobileInstallationInstall: failed with -1`是问题所在。当我做同样的事情，但使用开发人员配置并将开发人员证书导出到 .p12 时，我可以通过 iTunes 毫无问题地安装它。但我似乎无法完全解决 OTA 发行版的问题。

关于我为什么会得到这个以及我能做些什么来解决它的任何想法？这是我从过去的项目中制作的清单 plist：

编辑：是的，设备已正确分配给配置文件。

```
<plist version="1.0">
  <dict>
    <key>items</key>
    <array>
      <dict>
        <key>assets</key>
        <array>
          <dict>
            <key>kind</key>
            <string>software-package</string>
            <key>url</key>
            <string>http://myserver/adhoc_download/myapp.ipa</string>
          </dict>
          <dict>
            <key>kind</key>
            <string>full-size-image</string>
            <key>needs-shine</key>
            <true/>
            <key>url</key>
            <string>http://myserver/adhoc_download/images/icon-ipad3.png</string>
          </dict>
          <dict>
            <key>kind</key>
            <string>display-image</string>
            <key>needs-shine</key>
            <true/>
            <key>url</key>
            <string>http://myserver/adhoc_download/images/icon-iphone4.png</string>
          </dict>
        </array>
        <key>metadata</key>
        <dict>
          <key>bundle-identifier</key>
          <string>com.mycompany.myapp</string>
          <key>kind</key>
          <string>software</string>
          <key>subtitle</key>
          <string></string>
          <key>title</key>
          <string>myapp</string>
        </dict>
      </dict>
    </array>
  </dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:41:13.047

嵌入在 ipa 中的配置文件真的是您认为的配置文件吗？一旦配置文件的错误版本进入构建或设备，就很难摆脱。

我建议将 ipa 上传到 testflight - 它的工作原理应该与手动 plist 设置大致相同，但会让您对实际安装的内容有更多的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:57:59.043

我对此犯的另一件事是，我试图将开发人员证书的私钥与 .p12 文件中的分发证书一起使用。所以，这只是其他需要注意的事情。

# hibernate - hibernate hard coded values annotation

> ID：13425152
> 
> 赞同：1
> 
> 时间：2012-11-16T22:10:12.817
> 
> 标签：hibernate, filter

I was wondering if there is a way to have a filter annotation with a hard coded values. I am joining two tables called itemRate and ratemaster. Rate master has a composite key of application rateid and ratekind id. The rate kind id can be 1 of 3 id's (primary, component, item rate).

My Item Rate table knows the application and references two different columns item_rate and rate (which is the primary rate),

My question is, is there a way with hibernate to hard code a filter so when i call `getRate()` it will filter on all rates with a rate kind id of 0 and when i call `getItemRate()` it will filter on all rates with a ratekind id of 2?

I tried doing something like this to get the rate masters with a rate kind of 0:

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumns({
    @JoinColumn(name = "CIITM_RATE", nullable = false , updatable = false, insertable = false, referencedColumnName = "RATE"),
    @JoinColumn(name = "CIITM_APPLICATION", nullable = false , updatable = false, insertable = false, referencedColumnName = "APPLICATION") })
@FilterJoinTable(name = "kindId", condition="RATEKINDID = 0")
public Ciratemaster getRateMaster() {
    return rateMaster;
} 
```

and this to get rate masters with rate kinds of 2:

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumns({
    @JoinColumn(name = "CIITM_ITEM_RATE", nullable = false , updatable = false, insertable = false, referencedColumnName = "RATE"),
    @JoinColumn(name = "CIITM_APPLICATION", nullable = false , updatable = false, insertable = false, referencedColumnName = "APPLICATION") })
@FilterJoinTable(name = "kindId", condition="RATEKINDID = 2")
public Ciratemaster getItemRateMaster() {
   return itemRateMaster;
} 
```

I tried searching hibernate website and other sites and nothing has really worked. I always come up with the error that it fetched more than 1 result when it shouldn't

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:41:38.217

试试这个而不是过滤器：

```
@org.hibernate.annotations.Where(clause = "RATEKINDID = 2") 
```

编辑：尝试 JoinColumnsOrFormula 注释：

```
@JoinColumnsOrFormulas({
  @JoinColumnOrFormula(formula = @JoinFormula(value = "2", referencedColumnName = "RATEKINDID")),
  @JoinColumnOrFormula(column = @JoinColumn(name = "CIITM_RATE", nullable = false , updatable = false, insertable = false, referencedColumnName = "RATE")),
  @JoinColumnOrFormula(column = @JoinColumn(name = "CIITM_APPLICATION", nullable = false , updatable = false, insertable = false, referencedColumnName = "APPLICATION"))
}) 
```

# internet-explorer-7 - IE7 Issue: text won't wrap around floated div

> ID：13425154
> 
> 赞同：1
> 
> 时间：2012-11-16T22:10:18.457
> 
> 标签：internet-explorer-7, css-float

I cannot get paragraphs of text to wrap around a floated:left div on IE7 on this page: [http://www.guidetoonlineschools.com/online-reviews/ashford-university](http://www.guidetoonlineschools.com/online-reviews/ashford-university) (look under "Most Recent Reviews")

Both the floated div and the paragraphs are within a div that is not floated. I have tried giving the floated div both a width in pixels and percentages.

Here is the HTML (non-essential parts indicated with an ellipsis:

```
 <div class="review_body">
        <div class="reviews_3d_box">
             <div class="review_dots"><table>...</table></div>
        </div>
        <div class="review_content">
             <p>...</p><p>...</p>
         </div>
         <div>...</div>
    </div> 
```

.reviews_3d_box is the floated div with this CSS:

```
{padding-left: 10px;
 margin: 0 15px 0 -25px;
 background: url(/assets/images/graphics/reviews_corner.gif) no-repeat 0 6px;
 width: 45%;
 float: left;} 
```

The paragraphs in .review_content wrap around this floated div in every browser but IE 7.

Can anyone advise what the problem might be? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:38:42.360

这是因为在 IE7 中`review_content`元素有`min-height: 110px`哪些触发该元素。`hasLayout`

# c# - 当它可以是多种类型时，如何访问“对象”的某个字段而不将其转换为一种类型？

> ID：13425156
> 
> 赞同：3
> 
> 时间：2012-11-16T22:10:26.430
> 
> 标签：c#, object, casting, type-conversion

我有一个可以分配不同类的对象，所有这些类都有一个`Position`我需要访问的字段，无论对象的类型如何。Visual Studio 不会让我编译`var pos = myObject.Position`，因为`object`没有`Position`字段。而且我不能转换为`MyClass`，因为可以有几个其他类分配给该变量。

如何在`Position`不转换为一种类型的情况下访问该字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T22:12:08.467

最好的选择是让所有类实现一个通用接口，然后使用该接口访问属性。

但是，如果这些是您无法控制的类，则还有其他选项。您可以使用反射来访问字段/属性（通过[Type.GetField](http://msdn.microsoft.com/en-us/library/system.type.getfield.aspx)和[FieldInfo.GetValue](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.getvalue.aspx)等），尽管这在运行时很慢。

如果您使用的是 C# 4 或更高版本，则可以使用`dynamic`：

```
dynamic theObject = yourObject;
Point position = theObject.Position; 
```

这将使用动态（运行时）绑定来查找`Position`类型上的属性或字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:14:17.900

所有具有`Position`字段的不同类都应该从公共基类继承该字段，或者从公共接口获取它（它必须是一个属性）。

接口解决方案可能如下所示：

```
interface IHasPosition
{
  int Position { get; }
} 
```

那么所有的类都应该说`: IHasPosition`，并且你的`myObject`变量应该`IHasPosition`在代码中声明为类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T22:12:49.463

一旦选项是使所有不同的类都从定义的类继承，`Position`那么当您获取对象时，通过父类类型引用它，您可以在不知道特定类型的情况下访问在那里定义的属性。

请记住，如果它们没有太多通用功能，这可能不是一个很好的方法。

# jquery - Best strategy for including JavaScript in MVC partials. Advice please

> ID：13425157
> 
> 赞同：4
> 
> 时间：2012-11-16T22:10:27.980
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

I'm looking for a bit of advice please. I'm developing a reasonably large ASP.NET MVC 3 app.

There are hundreds of partials throughout the system, so that I can break down the application in to composable chunks. Many partials contains various JQuery or straight Javascript script blocks.

The problem is that each time a partial is included in a main page, the script block will obviously be included each time, which is not the desired effect, clearly.

I could put the scripts in the main page, but there are often lots of long, detailed scripts and I don't want to clutter the page if the scripts aren't needed. (Some times the partials can appear ZERO or more times).

What's the recommended approach that would allow the script block to be included IF and ONLY if a partial is included in the page AND also included it only once?

Thanks,

Simon.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:17:31.293

我有过类似的情况；一个带有许多部分的大型 MVC3 应用程序（包含自己的脚本）。我采用的方法是对对象进行命名空间。您可以命名您的部分视图脚本，然后在部分加载时进行检查以检测命名空间是否存在或是否需要创建：

```
if(window.AppName.Module == undefined){
   //Do initialization
   window.AppName.Module = {};
   //Call init or whatever here
}
//Else continue on... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:34:35.927

您可以将此模块添加到您的部分。

```
(function (appname, undefined){

    // use appName object here ..

})(window.AppName = window.AppName || {}); 
```

# asp.net-mvc - Create Custom Memebership Provider in MVC 4 Always get error

> ID：13425163
> 
> 赞同：1
> 
> 时间：2012-11-16T22:11:05.757
> 
> 标签：asp.net-mvc, asp.net-mvc-4, membership-provider

I tried to develop custom membership provider in order to use with my own database tables but I couldn't. After run project I saw red error line on web.config custom membership provider line. :( `type="Mvc4ApplicationTest2.Models.CustomMembershipProvider"` I found article that said me to add below lines to web.config and I did.

```
add key="enableSimpleMembership" value="false"
add key="autoFormsAuthentication" value="false" 
```

Now application run :) but after get to login page and clicked on submit i get to new error that hint me like this:

```
To call this method, the "Membership.Provider" property must be an instance of "ExtendedMembershipProvider". 
```

Again I searched and I found some articles says me have to add prior line to web.config but with true value !!? `add key="enableSimpleMembership" value="true"` I confused. ?( So What can I do? Can everyone please help me? and other question, I want to use the standard, strong and useful method to secure my web application. do you think if I must use websecurity classes or other approach?

Sincerely Ali

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T00:51:32.173

以下是我在 MVC 4 项目的 Web.config 文件中注册自定义成员资格提供程序的方式：

```
<membership defaultProvider="MyCustomMembershipProvider">
    <providers>
        <clear />
        <add name="MyCustomMembershipProvider" type="MyProject.MyCustomMembershipProvider, MyProject" connectionStringName="MyConnectionString" />
    </providers>
</membership> 
```

请注意，“MyProject.MyCustomMembershipProvider”应该是您的成员资格类的完全限定路径，“MyProject”是它所包含的程序集的名称（通常是您的项目名称）。

还要确保您的成员资格提供程序类扩展了 MembershipProvider，如下所示：

```
public class MyCustomMembershipProvider : MembershipProvider
{
    // Code here
} 
```

我的 Web.config 中没有“enableSimpleMembership”或“autoFormsAuthentication”行。

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T22:05:28.463

After searching a lot and reading many articles I found it Finally. That is stupid mistake. I used to inherit from **System.Web.Security.MembershipProvider**. so I took error about needing **ExtendedMembershipProvider** implementation. So I did it with **WebMatrix.WebData.ExtendedMembershipProvider** and then every things were fine. Thanks for all advises and helps.

# iphone - Can't access label

> ID：13425167
> 
> 赞同：1
> 
> 时间：2012-11-16T22:11:16.940
> 
> 标签：iphone, ios

I'm a total beginner at iPhone development so I have a little question:

This is my viewcontroller.m

```
//
//  ViewController.m
//  Conversie talstelsels
//
//  Created by Stijn Hoste on 16/11/12.
//  Copyright (c) 2012 Stijn Hoste. All rights reserved.
//

#import "ViewController.h"

@interface ViewController ()
@synthesize lblOct;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)txtGetal:(id)sender {

  lblOct.text = @"derp";

}
@end 
```

This is my viewcontroller.h

```
//
//  ViewController.h
//  Conversie talstelsels
//
//  Created by Stijn Hoste on 16/11/12.
//  Copyright (c) 2012 Stijn Hoste. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
- (IBAction)txtGetal:(id)sender;
@property (weak, nonatomic) IBOutlet UILabel *lblDec;
@property (weak, nonatomic) IBOutlet UILabel *lblOct;
@property (weak, nonatomic) IBOutlet UILabel *lblHex;

@end 
```

So when I try to do this: @synthesize lblOct; It gives me the following error: illegal interface qualifier When I try to do this: lblOct.text = @"derp"; It gives me this error: use of undeclared identifier 'lblOct', did you mean '_lblOct'?

Can somebody help me with this probably easy problem?

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:17:27.870

你应该使用

```
self.lblOct.text = @"text";
// or
_lblOct.text = @"text"; 
```

在`Xcode`4.4（LLVM 4.0 编译器）或更新版本中，如果您不添加`@synthesize`Xcode 将添加一个默认值，例如

```
@synthesize variable = _variable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:15:36.370

尝试使用`self.lblOct = @"text";`

此外，使用新的 XCode，您不再需要使用`@synthesize`，因此只需省略它即可。

# opengl - OpenGL Blending (Invert texture color before blending)

> ID：13425170
> 
> 赞同：1
> 
> 时间：2012-11-16T22:11:29.617
> 
> 标签：opengl, rendering, alpha, blending

I'm making a fast text rendering for an UI system based on OpenGL wich uses subpixel rendering, White text over black background works well with "normal" blending, but black text over white background does not, because the color fringes of the subpixel rendering are multiplied by 0 (because is black), and the subpixel aliasing is lost.

I know this isn't the "correct" way (because i would need to blend each R, G and B subpixel channels separately) but its very fast and looks good almost every situation.

In order to do this, i need to invert the texture color "before" the blending is done, for example:

normal blending is: `SourceColor * SourceAlpha + DestColor * (1 - SourceAlpha)`

I want this: `((1,1,1) - SourceColor) * SourceAlpha + DestColor * (1 - SourceAlpha)`

Is there a way to do this without shaders?? I think that the key is to do two passes with different blending settings but i just can't get it working

I know i could have two textures, one normal and one inverted, but i don't want to waste video memory (because each font requieres an already big texture)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T01:55:41.513

给你的字体纹理一个 alpha 通道，然后用它来指定字体的形状，同时保持纹理中每个像素的颜色为白色，即使是外面的那些像素（得到 alpha=0，所以它们是 rgba=1110）。然后`glColor3f(r,g,b)`将适当地为您的纹理着色（甚至是黑色），如果您使用`glEnable(GL_BLEND); glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA);`它将正确混合。

# search - PyroCMS 有搜索功能吗？

> ID：13425173
> 
> 赞同：3
> 
> 时间：2012-11-16T22:11:35.300
> 
> 标签：search, pyrocms

我正在尝试搜索我的页面和帖子 - 这是 PyroCMS 的原生概念吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:09:38.890

PyroCMS v2.2.0 为页面和博客文章内置了搜索功能，并为模块开发人员提供了钩子，以启用对其内容的搜索。遗憾的是 2.2.0 没有正式发布，但它非常接近 beta 版本。也许你可以试一试？

[https://github.com/pyrocms/pyrocms/tree/2.2/develop](https://github.com/pyrocms/pyrocms/tree/2.2/develop)

然后，您可以使用搜索插件或转到 /search 页面进行搜索。

# powershell - Powershell Copy-item not working for unc paths

> ID：13425174
> 
> 赞同：2
> 
> 时间：2012-11-16T22:11:36.060
> 
> 标签：powershell, powershell-3.0

I am trying to sync two directories over the network between servers using UNC paths. The files are 20+ GB. I wrote a Powershell script to compare two directories and then copy any files missing from one to the other. However this doesn't appear to work. Once the script is run it finds the files properly but when it tries to copy them it appears that the files are instantly copied (which is impossible). Even though the files take up 20+ GB of space on the hard drive they don't contain any data.

```
$SERVER1 = "SERVER1"
$SERVER2 = "SERVER2"
$VDISKPATH = "e$\vdisks"

#Automatically get vDisks and pvp files in VDISKPATH folder
$FILES1 = Get-ChildItem -Path \\$SERVER1\$VDISKPATH\* -Include *.vhd,*.pvp
$FILES2 = Get-ChildItem -Path \\$SERVER2\$VDISKPATH\* -Include *.vhd,*.pvp

if ( $FILES1 -and $FILES2 ) {
    $DIFF = Compare-Object -ReferenceObject $FILES1 -DifferenceObject $FILES2 -Property name, length
}

# Copy all of the missing files from 
if ($DIFF) {
    $DIFF | Where-Object { $PSItem.SideIndicator -eq "<="} | ForEach-Object {
    Copy-Item "\\$SERVER1\$VDISKPATH\$($_.name)" -Destination \\$SERVER2\$VDISKPATH
    }
    $DIFF | Where-Object { $PSItem.SideIndicator -eq "=>"} | ForEach-Object { Write-Host "Copying $($_.name) to $SERVER1" |
    Copy-Item "\\$SERVER2\$VDISKPATH\$($_.name)" -Destination \\$SERVER1\$VDISKPATH
    }
Write-Host "All file copies have finished!"
}
else {
    Write-Host "All files are equal"
    Compare-Object -ReferenceObject $FILES1.name -DifferenceObject $FILES2.name -IncludeEqual
} 
```

Typically the file copy (if done manually) takes about 15 minutes. I let the script run for 90 minutes and it never finished. Can someone help me figure out why the files are not coping properly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:40:01.113

我会`robocopy`用于这样的任务：

```
robocopy \\SERVER1\E$\vdisks \\SERVER2\E$\vdisks *.vhd *.pvp /z 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:53:07.300

where-object 的管道输出仍将是差异对象。所以而不是：

```
$_.name 
```

在你的 foreach 中，你想要：

```
$_.InputObject.Name 
```

# c# - 删除 Html 标签，同时保留内部文本和 标签

> ID：13425192
> 
> 赞同：0
> 
> 时间：2012-11-16T22:12:55.777
> 
> 标签：c#, html-parsing, html-agility-pack

我正在尝试从 HTML 内容中删除 span、font、b、s、strike （和其他内部元素）标签，同时保留其中的文本和`<br>`标签。为此，我使用了 HTML 敏捷包。我设法保留了文本，但`<br>`标签仍然是个问题。有任何想法吗？

这是代码：

```
 private void removeTagsButPreserveText2(HtmlNode nodeToRemove)
    {
        var parent = nodeToRemove.ParentNode;
        var prev = nodeToRemove.PreviousSibling;

        if (prev != null)
        {
            var child = nodeToRemove.SelectNodes("./br");

            if (child == null)
            {
                parent.InsertAfter(documentToSearch.CreateTextNode(nodeToRemove.InnerText + " "), prev);

                nodeToRemove.Remove();
            }
            else
            {
                foreach (var item in child)
                {
                    var parent2 = item.PreviousSibling;

                    if (parent2 != null)
                    {
                        if (parent2.InnerText.HasDate())
                        {
                            var newNode = parent.InsertAfter(documentToSearch.CreateTextNode(parent2.InnerText), prev);
                            parent.InsertAfter(documentToSearch.CreateElement("br"), newNode);
                            nodeToRemove.Remove();
                        }
                    }
                }
            }
        }
    } 
```

例如，输入将是：

```
<p><font face="Arial" size="2"><strike>
        <span style="font-weight: 400"><font color="#000000">Paper 
        Submission (Full 
        Paper) Before
        <span lang="en-us">September</span> 20, 201<span lang="en-us">2</span></font></span></strike><font color="#FF0000"><br>
        Notification of 
        Acceptance On <span lang="en-us">October 5</span>, 201<span lang="en-us">2</span><br>
        Authors' 
        Registration Before
        <span lang="en-us">October 20</span>, 201<span lang="en-us">2</span><br>
        ICNIT 2012 Conference 
        Dates November 
        17 - 18, 2012</font></font></p> 
```

输出应如下所示：

```
<p>Paper Submission (Full Paper) Before September 20, 2012<br>
        Notification of Acceptance On October 5, 2012<br>
        Authors' Registration Before October 20, 2012<br>
        ICNIT 2012 Conference 
        Dates November 
        17 - 18, 2012</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:51:39.753

对于这种 HTML 操作，有一个很棒的库，称为[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。

这是一个类似的问题，它将指向正确的方向：[Html Agility Pack - Remove element, but not innerHtml](https://stackoverflow.com/questions/12092575/html-agility-pack-remove-element-but-not-innerhtml)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T22:38:42.557

您是否尝试为此使用**正则表达式**？我的意思是，将所有内容都放入“ `<xxxx asdasd>`”或类似的内容中，并仅替换每个“”维护`<BR>`？

# php - PHP | 验证会话属性是否必要，为什么？

> ID：13425194
> 
> 赞同：0
> 
> 时间：2012-11-16T22:13:00.153
> 
> 标签：php, database, session, login

是否有理由用数据库中的值填充会话属性？

# 1

```
$_SESSION['hash']  = query_row['hash']; //hash from database; unique to each user 
```

然后在每个页面上，检查会话是否存在

```
if(isset($_SESSION['hash'])) && $db->checkLogin()
{
//user session is still valid
} 
```

借此：

```
function checkLogin($session_hash)
{
if($_SESSION['hash']) 
{
 //check if $session_hash is found in database
}
    } 
```

而不是使用

# 2

```
$_SESSION['islogged_in']  = true; 
```

并且只检查是否设置了会话

```
if(isset($_SESSION['islogged_in']))
{
//user session is still valid
} 
```

使用第一种方法是否可以为您提供更多保护？用独特的东西而不是“真”来设置会话值是否明智？使用数据库数据验证 $_SESSION[] 值是否明智？为什么会更安全？

编辑：我知道哪些是保护会话免受固定和劫持的标准方法。这不是我的问题:)

我根本找不到使用方法1的理由（因此使用数据库进行验证，甚至使用用户名等唯一数据设置会话属性，..）据我所知，会话属性被保存在服务器端，因此用户/黑客不能修改它们。会话保护（劫持和固定）仅保护会话 id，因为这是唯一保存在 cookie 中的客户端（因此可以修改）。无论如何，我在互联网上看到很多程序员都这样做，所以这就是我问的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:19:37.570

我认为你最好使用方法 2。会话只能由服务器设置，所以如果设置了，你就知道你的用户已经过验证。第一种方法每次都不必要地再次检查数据库，并且不再安全。这些方法都不能防止[会话劫持](http://en.wikipedia.org/wiki/Session_hijacking)。

如果要防止会话劫持，还可以将用户的 IP 存储在会话中，并每次检查以确保它没有更改。这是一种相当简单易行的检查方法。如果您想要其他更强大的替代方案，我建议您查看[此页面](https://stackoverflow.com/questions/22880/what-is-the-best-way-to-prevent-session-hijacking)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:46:40.763

如果您不想知道用户的任何信息，除非他已成功登录，则没有理由存储 id 并检查 id 是否存在（或类似的东西）。你和你一个人可以写信给会话。如果您的服务器被黑客入侵（例如：有些可以将代码或会话上传到您的服务器），那么您遇到的问题比检查会话数据（您写入会话的数据）是否有效要多得多：）

# quickfix - 在 QuickFIX 中发送消息

> ID：13425195
> 
> 赞同：1
> 
> 时间：2012-11-16T22:13:04.080
> 
> 标签：quickfix

我正在使用“http://www.quickfixengine.org”中的 python 代码示例并且有一个问题。我使用下面显示的代码段创建我的应用程序

```
import quickfix

if len(sys.argv) < 2: return
fileName = sys.argv[1]

try:
    settings = quickfix.SessionSettings(fileName)
    application = quickfix.MyApplication()
    storeFactory = quickfix.FileStoreFactory(settings)
    logFactory = quickfix.FileLogFactory(settings)
    initiator = quickfix.SocketInitiator(application, storeFactory, settings, logFactory)
    initiator.start()
    # while condition == true: do something
    initiator.stop()
except quickfix.ConfigError, e:
    print e 
```

建立连接并登录，现在我想发送一条消息（例如订单）。为此提供的代码段是：

```
def sendOrderCancelRequest:
    message = quickfix.Message();
    header = message.getHeader();

    header.setField(...)
    *<...build the header and body...>*
    message.setField(...)

    Session.sendToTarget(message) 
```

我的问题是关于那个`Session`物体的。它是在哪里/如何创建的？它是用类似的东西创建的`Session = quickfix.Session()`，还是他们没有显示的其他东西？我已经尝试了一些东西，但是由于缺乏文档，它只是反复试验......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:49:08.513

`Session`不是一个*对象*，它是一个*类*。在这种情况下，`sendToTarget()`是静态方法。

`Session`，维护会话的类静态列表。 `sendToTarget()`'s 使用消息中的标题字段（或您明确提供的标题字段）来确定要发送的会话。

* * *

**编辑：我误读了你的问题。这是您所问问题的答案。**

会话是在 QF 引擎的内部创建的。它是由 a 创建的`SessionFactory`，它本身是在 and 的函数`initialize()`中创建的。只有当您想破解引擎源代码时，您才需要了解这些内容。`Initiator``Acceptor`

作为应用程序开发人员，您真的不需要会话句柄。如果你认为你这样做了，那么我猜你可能打算做一些不推荐的事情（比如想要以编程方式重置 seq#s，这是 QF 列表中常见的新手坏主意）。

If you really want a handle to it, you can use `Session.lookupSession()` or one of the `getSession()` functions of `Initiator` or `Acceptor`. But again, I don't see any reason to bother. I'm a seasoned QF user, and I had to go look this up, because it's something *I never ever do*.

# asp.net - 如何将文本设置为 AjaxControlToolkit 组合框

> ID：13425201
> 
> 赞同：0
> 
> 时间：2012-11-16T22:14:01.443
> 
> 标签：asp.net, text, combobox, ajaxcontroltoolkit

我正在尝试在我的 ASP.NET 应用程序中使用 ComboBox ( [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx )。](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx)一切正常，但我无法以编程方式设置组合框的值，该值将在页面加载时显示。问题是我想设置值，它不在下拉列表中的值中 - 这是必不可少的，我不想在下拉列表中显示这个值。我尝试了组合框的 'Text'、'SelectedValue'、'SelectedText' 属性，没有任何效果。我什至尝试在组合框中找到 TextBox 控件并设置其文本 - 虽然这设置了 TextBox 的文本（可以在页面 HTML 源代码中看到）但没有显示文本（我猜是一些 javascript 代码导致了这个）。

如果这不可能，我的目标是为文本框提供一个单值提示（从数据源评估），该文本框将显示为下拉列表（您可以单击它，该值将插入文本框中）。所以你可以建议我另一种解决方案。

请帮忙。

谢谢 Uiii

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:44:32.660

将代码隐藏中的受保护字符串属性添加`Message`到 Page 的类中，并将此脚本添加到页面上：

```
<script type="text/javascript">
    function pageLoad(sender, args) {
        //set text on initial load only
        if (args.get_isPartialLoad() == false) {
            $find("<%= ComboBox1.ClientID %>").get_textBoxControl().value = "<%= Message %>";
        }
    }
</script> 
```

如果要显示静态消息，可以使用服务器端 Message 属性并将静态文本设置为文本框值。

# c# - 如何将 ' 字符表示为字符文字

> ID：13425206
> 
> 赞同：1
> 
> 时间：2012-11-16T22:14:27.540
> 
> 标签：c#, char, character, syntax-error, literals

所以我想要一个与此类似的 char 对象数组：

```
 char[] allowedCharactersUnreserved = new char[] {
            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 
            'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
            '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '-', '_', '.' 
        }; 
```

问题是保存：'元素

```
 char[] allowedCharactersReserved = new char[] {
           '#', '[', ']', ''' <---- problem
        }; 
```

我收到“空字符文字”错误

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T22:15:30.980

尝试`'`用字符转义`\`字符：`'\''`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:16:22.600

您需要使用反斜杠对其进行转义：`'\''`. `"`这与您在字符串中转义时所做的相同： `"\""`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T22:22:47.840

它更好用

```
char[] allowedCharactersUnreserved = 
       @"ABCDEFGHIJKLMNOPQRSTUVWXYZabc'[]""#".ToCharArray(); //where ("") char is (") 
```

# mysql - 党模型和角色、用户、简介、组权限方案

> ID：13425209
> 
> 赞同：1
> 
> 时间：2012-11-16T22:14:36.247
> 
> 标签：mysql, database-design, permissions

我有派对模型数据库架构：

```
Modules
-------------------------------
id, name, description

Modules_fields <--- Relationship which fields will be in each module
--------------------------------
module_id, field_id

Fields <--- Module_records fields (will define which table field will user see)
--------------------------------
id, name, type

Module_records <--- Entity child - real records
--------------------------------
id, name, description

Entity <--- Central records table - there stores all real record id's
-------------------------------
id, module_id, module_record_id 
```

我需要的是定义所有可能权限的表关系。如：

1.  用户可以在组中。根据权限 - 它可以查看他的记录、他的组记录或所有记录。可以根据权限查看、写入、编辑或删除。行级权限。

2.  用户可以具有角色（或角色）。取决于职位 - 可以查看父角色用户记录。行级权限。

3.  组有个人资料。这很简单。只需添加 Fields-to-GroupProfile 表，并设置哪些字段将看到配置文件子项。列级权限。

我的想法是设置实体表字段 user_id - 它将定义实体创建者用户。之后可以在 UserGroups 中通过这个 user_id 搜索得到 group_id。再创建一个表，其中将为每个模块定义全局权限 - 哪个组/用户将看到模块。但我不喜欢这样的解决方案。

所以我正在考虑添加用户、组、配置文件和角色：

```
Profiles - define which fields will user see (User has many profiles), column level
id, name

UsersProfiles - relationships
user_id, profile_id

Users - just user table
id, user_group_id

User_UserGroups - relationships
user_id, user_group_id 

UserGroups - define in which groups user will be, rowlevel (Salesgroup1, Salesgroup2)
id, parent_id

UserRoles - relationships
user_id, role_id

Roles - define user hierarchy (Boss, employee)
id, parent_id

RolesProfiles - relationships
role_id, profile_id 
```

也许你有更好的想法？

# c# - 有没有一种方法可以强制 Telerik RadGrid 始终显示 5 行，无论我的数据源有多少行

> ID：13425210
> 
> 赞同：1
> 
> 时间：2012-11-16T22:14:36.427
> 
> 标签：c#, asp.net, webforms, telerik, telerik-grid

我想强制 Telerik RadGrid 每 5 行显示一次，无论我的数据源中有多少（低于 5）行我将其绑定到。例如，如果我的数据源中有 3 条记录，我希望它显示所有这 3 条记录以及 2 条空行。我正在考虑在我绑定的数据表中添加两个空行，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T06:50:39.463

您向 Radgrid 绑定的数据表添加行的想法是迄今为止最简单的：

这只是一个示例，使用 AdventureWorks 2012 db。

* * *

```
protected void RadGrid1_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    String ConnString = @"Data Source=J-PC\SQLEXPRESS;Initial Catalog=AdventureWorks2012;Integrated Security=True";
    SqlConnection conn = new SqlConnection(ConnString);
    SqlDataAdapter adapter = new SqlDataAdapter();
    adapter.SelectCommand = new SqlCommand("select top 3 AddressID,AddressLine1,City,StateProvinceID,PostalCode from Person.Address ", conn);

    DataTable myDataTable = new DataTable();

    conn.Open();
    try
    {
        adapter.Fill(myDataTable);
    }
    finally
    {
        conn.Close();
    }

    if(myDataTable.Rows.Count < 5)
    {
        DataRow dr = null;
        for (int i = 0; i <= 5-myDataTable.Rows.Count ; i++)
        {
            myDataTable.Rows.Add(new object[]{});
        }
    }

    RadGrid1.DataSource = myDataTable;
} 
```

* * *

![在此处输入图像描述](../Images/78839e38ce1b8149e0a54cf7e1602e38.png)

# sql - 如何使用 Play 框架审核数据库更改？

> ID：13425219
> 
> 赞同：0
> 
> 时间：2012-11-16T22:15:13.377
> 
> 标签：sql, hibernate, scala, playframework, hibernate-envers

我正在学习 Play 框架......我想知道如何实现审计机制来跟踪数据库操作（添加、修改、删除）。例如，我希望与 Hibernate 非常相似，其中审计表是自动创建的……有人知道是否有一个好的文档来解释如何使用 Play Framework 审计数据库更改吗？我正在使用游戏！2.0 和 PostgreSQL 9.1。

任何帮助将非常感激 ;-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:00:06.237

我想您正在使用 ORM（您没有指定）

在这种情况下，您应该考虑到 anorm 不是一个完整的 orm（ANti ORM，我想这就是它的名字的来源）它只是简单的 jdbc 的一个小而实用的包装器。

所以我认为你应该自己实现某种日志记录，正如 Andrew 建议的那样。

你也可以尝试破解 anorm 本身，或者想出一些玩函数组合的东西。

# java - 使用 Graphics2D 绘制图像

> ID：13425220
> 
> 赞同：1
> 
> 时间：2012-11-16T22:15:14.823
> 
> 标签：java, swing, graphics, graphics2d

我正在尝试使用 java 的 Graphics2D 在屏幕上绘制图像。这是我正在使用的代码。我想看到图像在屏幕上稳定移动。目前我可以看到图像，但除非我调整窗口大小，否则它不会移动，在这种情况下它会移动。我已经勾勒出了下面的课程。

```
 public class Tester extends JFrame {

    private static final long serialVersionUID = -3179467003801103750L;
    private Component myComponent;
    public static final int ONE_SECOND = 1000;
    public static final int FRAMES_PER_SECOND = 20;

    private Timer myTimer;

    public Tester (Component component, String title) {
        super(title);
        myComponent = component;
    }

    public void start () {

        myTimer = new Timer(ONE_SECOND / FRAMES_PER_SECOND, new ActionListener() {
            @Override
            public void actionPerformed (ActionEvent e) {
                repaint();
            }
        });
        myTimer.start();
    }

    @Override
    public void paint (Graphics pen) {
        if (myComponent != null) {
            myComponent.paint(pen);
        }
    }

} 
```

传递给 Tester 的 Component 对象是以下类：

```
public class LevelBoard extends Canvas implements ISavable {

    private static final long serialVersionUID = -3528519211577278934L;

    @Override
    public void paint (Graphics pen) {
        for (Sprite s : mySprites) {
            s.paint((Graphics2D) pen);
        }
    }

    protected void add (Sprite sprite) {
        mySprites.add(sprite);
    } 
```

我确保这个类只有一个我添加的精灵。sprite类大致如下：

```
public class Sprite {

    private Image myImage;
    private int myX, myY;

    public Sprite () {
        URL path = getClass().getResource("/images/Bowser.png");
        ImageIcon img = new ImageIcon(path);
        myImage = img.getImage();

    }

    public void update () {
        myX += 5;
        myY += 5;
    }

    public void paint (Graphics2D pen) {
        update();
        pen.drawImage(myImage, myX, myY,null);
    } 
```

但是，我在屏幕上只看到了 Bowser 的静止图像。除非调整窗口大小，否则他不会移动。我知道 Sprite 类中的 paint(Graphics2D pen) 方法是以特定的时间间隔被调用的（因为 Tester 类中的 Timer ）。但是，即使 x 和 y 位置每次都增加 5。精灵不动。为什么不？我如何解决它？我现在只是在尝试测试我的程序的其他一些功能，所以我真的只需要启动并运行它。我真的不在乎如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T23:44:25.383

您的代码充满了问题：

1.  不要覆盖`JFrame.paint()`，特别是如果不调用`super`。设置 ContentPane 并覆盖其`paintComponent()`. 虽然它看起来很方便，但它通常是一个糟糕的设计并且没有必要。
2.  不要覆盖`JComponent.paint()`，而是覆盖`JComponent.paintComponent()`（并调用`super`）
3.  使用 a`JLabel`显示图像。这要简单得多。
4.  不要混合使用 AWT（Canvas）和 Swing（JFrame）。坚持摇摆。

这是一个简单的示例，显示了 Bowser 在框架周围移动。（当你减小框架大小并用框架边框击中图像时，这很有趣;-)）

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Random;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UnsupportedLookAndFeelException;

public class TestAnimation2 {
    private static final int NB_OF_IMAGES_PER_SECOND = 50;
    private static final int WIDTH = 800;
    private static final int HEIGHT = 600;
    private Random random = new Random();

    private double dx;
    private double dy;

    private double x = WIDTH / 2;
    private double y = HEIGHT / 2;

    protected void initUI() throws MalformedURLException {
        final JFrame frame = new JFrame(TestAnimation2.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(null);
        final JLabel label = new JLabel(new ImageIcon(new URL("http://www.lemondedemario.fr/images/dossier/bowser/bowser.png")));
        label.setSize(label.getPreferredSize());
        frame.setMinimumSize(label.getPreferredSize());
        frame.add(label);
        frame.setSize(WIDTH, HEIGHT);
        dx = getNextSpeed();
        dy = getNextSpeed();
        Timer t = new Timer(1000 / NB_OF_IMAGES_PER_SECOND, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                x += dx;
                y += dy;
                if (x + label.getWidth() > frame.getContentPane().getWidth()) {
                    x = frame.getContentPane().getWidth() - label.getWidth();
                    dx = -getNextSpeed();
                } else if (x < 0) {
                    x = 0;
                    dx = getNextSpeed();
                }
                if (y + label.getHeight() > frame.getContentPane().getHeight()) {
                    y = frame.getContentPane().getHeight() - label.getHeight();
                    dy = -getNextSpeed();
                } else if (y < 0) {
                    y = 0;
                    dy = getNextSpeed();
                }
                label.setLocation((int) x, (int) y);

            }
        });
        frame.setVisible(true);
        t.start();
    }

    private double getNextSpeed() {
        return 2 * Math.PI * (0.5 + random.nextDouble());
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new TestAnimation2().initUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

# c++ - 在 C++ 中，返回从本地 char 数组创建的字符串会导致内存泄漏或未定义的行为吗？

> ID：13425222
> 
> 赞同：4
> 
> 时间：2012-11-16T22:15:17.643
> 
> 标签：c++, memory-leaks

我想知道这是否会导致 C++ 中的内存泄漏或未定义的结果？

```
string foo()
{
    char tempArray[30];
    strcpy(tempArray, "This is a test");
    return string(tempArray);
} 
```

我知道这在 C 中是一件坏事，但我还没有找到 C++ 的明确答案。

所以每个人都说不，但我仍然对何时释放内存感到困惑？

假设我有一个调用上述方法的方法

```
void bar()
{
    string testString = foo();
} 
```

在上面的代码中，从 foo() 返回的字符串对象在什么时候调用了它的析构函数？是在被复制到对象 testString 之后立即进行的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:17:56.267

不，没有内存泄漏，你不需要做所有这些，这里相当于你的代码

```
string foo()
{
 return "This is a test";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:21:43.740

在您的示例中发生的是带有签名的构造函数

`string ( const char * s );`

叫做。构造函数为字符串的副本分配新内存并将其复制到该新内存。然后，字符串对象负责在调用其析构函数时释放自己的内存。

复制字符串时，[复制构造函数](http://en.wikipedia.org/wiki/Copy_constructor)也会分配内存并进行复制。

您还应该查看[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)模式。这就是`string`内存管理的工作方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T22:27:03.397

在这段代码中：

```
char tempArray[30]; 
```

`tempArray`是一个具有自动存储持续时间的变量。当`tempArray`“超出范围”时，它会自动销毁。您将此数组的内容（有些笨拙）复制到 a 中`std::string`，然后`string`按值返回。然后`tempArray`被破坏。这里需要注意的`tempArray` **是数组**。它不是指向数组第一个元素的指针（通常被误解），而是数组本身。既然`tempArray`被销毁了，那么数组就被销毁了。

如果您使用具有动态存储持续时间的变量，则会出现泄漏，例如：

```
 char* tempArray = new char[30];
  strcpy(tempArray, "This is a test");
  return string(tempArray); 
```

注意`new[]`没有匹配的`delete[]`。这里，`tempArray`仍然*是*一个具有自动存储时长的变量，但这次是一个指针，它所指向的东西具有动态存储时长。换句话说，`tempArray`当它超出范围时被销毁，但它只是一个指针。它指向的东西——`char`数组本身，不会因为你不这样做而被破坏`delete[]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T22:16:02.620

不是特别有效，但不，没有泄漏。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T22:17:24.177

不，它不会导致任何泄漏，因为您从不在堆上分配内存。如果您使用过`malloc`,`calloc`或`new`.. 而您从不`free`/`delete`它。然后是的，内存泄漏！

该数组是静态分配的，因此它是在堆栈上创建的。`strcpy`不返回动态分配的对象，它填充现有数组，由于您传入的指针，它知道如何执行此操作 - 再次，未在堆上分配。返回字符串时会生成字符串对象的副本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T22:20:26.790

您始终可以按值从函数返回本地自动变量。对于任何类型，这应该是安全的（除非复制构造函数不安全）：

```
T foo()
{
   return T(...);
} 
```

或者：

```
T foo()
{
   T t
   return t;
} 
```

你的例子符合我的第一个案例。

不安全的是返回对本地自动变量的指针/引用：

```
T& foo()
{
   T t
   return t;
}

T* foo()
{
   T t
   return &t;
} 
```

# firefox - 强制 vim-preview 使用谷歌浏览器

> ID：13425232
> 
> 赞同：1
> 
> 时间：2012-11-16T22:15:53.040
> 
> 标签：firefox, google-chrome, vim

我使用`vim-preview`插件来预览标记文件。但它每次都会打开 Firefox（即使 Chrome 是我系统中的默认浏览器）。如何防止它并强制 vim-preview 运行 Google Chrome？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:55:16.370

选项在`:help PreviewBrowsers`.

看起来你可以把它放在 .vimrc 中：

```
let g:PreviewBrowsers='google-chrome' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T17:48:34.357

这是我`.vimrc`在 Ubuntu12.04 上的：

```
""" WebBrowser Preview  
nnoremap <C-w>f :silent update<Bar>silent !firefox %:p &<CR>  
nnoremap <C-w>c :silent update<Bar>silent !chromium-browser %:p &<CR>  
" nnoremap <C-w>i :silent update<Bar>silent !iexplorer %:p &<CR>  
" nnoremap <C-w>o :silent update<Bar>silent !opera %:p &<CR>  
" nnoremap <C-w>s :silent update<Bar>silent !safari %:p &<CR> 
```

*   参考
    预览当前 HTML 文件：http: [//vim.wikia.com/wiki/Preview_current_HTML_file](http://vim.wikia.com/wiki/Preview_current_HTML_file)

# php - 使用 Codeigniter 框架的 Apache 子域，没有多个副本

> ID：13425233
> 
> 赞同：0
> 
> 时间：2012-11-16T22:15:55.517
> 
> 标签：php, apache, codeigniter

我试图弄清楚是否有一种方法可以使用我在三个实例中开发的所有东西。我正在开发的软件有三个主要加载点。一种是桌面版本，它对台式机/笔记本电脑/大多数平板电脑上的浏览器很友好。然后我有一个面向移动浏览器和其他平板电脑的。最后，我有一个纯粹用于 API 使用，没有视图或任何东西，只是 JSON、XML 或 CSV 格式的完全原始数据。每件作品独立运作良好。

但我想包含在某种程度上分开的每个需要的单独控制器。

迄今为止，我出于组织目的所做的是让控制器文件名类似于`desktop_name-of-controller.php`, `mobile_name-of-controller.php`,`api_name-of-controller.php`并且通过路由我以如下方式指向相应的控制器

```
$route['login'] = 'desktop_login';
$route['m/login'] = 'mobile_login';
$route['api/login'] = 'api_login'; 
```

这行得通，但我正在与之合作/为之工作的一些人想要使用子域，即：api.example.com、m.example.com。我能收集到的唯一方法是，按照我拥有它们的方式，拥有我目前正在运行的 CI 安装的 3 个副本。只是像他们想要的那样进行子域设置。我希望找到一种方法来规避这个问题并解决它，这样我就可以在某种意义上通过一些`mod_rewrite`魔法、`htaccess`魔法或某种形式的魔法来完成这项工作，而不必说 3 个副本，所以我对想法持开放态度因为我不知所措。

# java - 如何更新 JPA 实体

> ID：13425234
> 
> 赞同：1
> 
> 时间：2012-11-16T22:15:55.760
> 
> 标签：java, jakarta-ee, jpa, persistence

我有一个网络应用程序。如果我不使用应用程序（命令行）对数据库进行更改，我的实体不会显示此更改。

有没有办法让实体知道数据已更改并且需要更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:26:55.113

您的问题是您正在使用资源本地事务类型。您有义务设计您的事务 begin() 和 commit() - 技术上称为事务分界。如果 EntityManager 保存时间过长，可能会导致数据过时——就像您的投诉一样——甚至会导致内存泄漏和性能下降。您必须制定自己的事务管理策略。

另一方面，您可以通过为 GlassFish 之类的应用程序服务器进行开发来避免头痛，将为通常由服务器注入的线程安全 EntityManager 创建一个 JTA 事务类型。因此，您可以保存所有交易管道。

我的论点引用了第 294 页引述后的 JSR-317 JPA 规范：

> 当容器管理的实体管理器在活动 JTA 事务的范围内被调用时，一个新的持久性上下文开始……持久性上下文被创建，然后与 JTA 事务相关联。当关联的 JTA 事务提交或回滚时，持久性上下文结束，并且由 EntityManager 管理的所有实体都变得分离。

[有关在 GlassFish 中设置 JTA 事务类型的步骤，](https://stackoverflow.com/questions/13196324/jpa-with-eclipselink-and-java-se/13203877#13203877)请参阅我在这篇文章中的回答。

### 一个提示

如果您需要优先考虑在您的应用程序之外完成的数据库更新，而不是当前 EntityManager 中的更新（即 JTA 事务）操作。然后使用 EntityManager.refresh() 方法丢弃当前未完成的事务操作，直到 refresh() 调用并诉诸数据库最新状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:39:14.840

虽然可能不是最优雅的解决方案，但您可以尝试调用`refresh()`实体管理器。请参阅此答案：[Java JPA - 同步数据库和实体](https://stackoverflow.com/questions/8644108/java-jpa-sync-database-and-entity)

或者，您可以使用[悲观锁](http://en.wikibooks.org/wiki/Java_Persistence/Locking#JPA_2.0_Locking)来防止数据在使用实体时意外更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T02:11:47.627

JPA 不是数据库观察者，底层的 JDBC 也不是。无法从数据库服务器通知您的某些实体包含旧的或不存在的数据。知道的唯一方法是刷新或尝试提交当前事务。

# php - 正则表达式净化句子，几乎完成

> ID：13425236
> 
> 赞同：1
> 
> 时间：2012-11-16T22:16:02.807
> 
> 标签：php, regex, preg-replace

我当前的 php 语句清理功能：

```
function sanitize_sentence($string) {
    $pats = array(
    '/([.!?]\s{2}),/',      # Abc.  ,Def
    '/\.+(,)/',             # ......,
    '/(!)!+/',              # abc!!!!!!!!
    '/\s+(,)/',             # abc   , def
    '/([a-zA-Z])\1\1/');    # greeeeeeen
    $fixed = preg_replace($pats,'$1',$string);
    $fixed = preg_replace('/,(?!\s)/',', ',$fixed);
    return $fixed;
}

echo sanitize_sentence('hello!!!!!!there should be a space after the exclamation mark.right???????yes.right,'); 
```

结果应该是：

> 你好！感叹号后面应该有一个空格。对？是的。对。

所以，仍然缺少的是：

1.  任何 !?,.如果右侧有更多文本，则应在任何 !? 之后插入一个额外的空格。
2.  如果最后一个字符是逗号（或与 a-zA-Z0-9 不同的任何其他字符！？。），则应将其替换为点。
3.  如果用户写了多个问号，则应将其转换为一个（?????? = ?）。这对我来说很适合感叹号，但不知何故它不适用于其他人。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:33:25.997

您的要求：

1.  `!?,.`如果右侧有更多文本，则应在 any 之后插入一个额外的空格。

    我们可以使用另一个正则表达式来做这个替换：

    ```
    $fixed = preg_replace( '/([!?,.])(\S)/', '$1 $2', $fixed); # spaces after punctuation, if it doesn't exist already 
    ```

2.  如果最后一个字符是逗号（或任何其他不同于 的字符`a-zA-Z0-9!?.`），则应将其替换为点。

    您可以使用正则表达式来获取它，该正则表达式锚定在文本的末尾：

    ```
    $fixed = preg_replace( '/[^a-zA-Z0-9!?.]+$/', '.', $fixed); # end of string must end in period 
    ```

3.  如果用户写了多个问号，则应将其转换为一个（?????? = ?）。这对我来说很适合感叹号，但不知何故它不适用于其他人。

    它不起作用，因为它是正`?`则表达式中的特殊字符，您需要对其进行转义。将相应的条目替换为：

    ```
    '/(!|\?)\1+/',              # abc!!!!!!!!, abc????????? 
    ```

现在，[输出是](http://3v4l.org/aGsIc#v430)：

```
hello! there should be a space after the exclamation mark. right? yes. right. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:21:04.213

将此添加到您`$pats`的问号替换。剩下的我还没做完。

```
'/(\?)\?+/',              # abc????????? 
```

# zend-framework2 - 从 Zend Framework 2 中的子视图访问父视图的变量

> ID：13425238
> 
> 赞同：4
> 
> 时间：2012-11-16T22:16:13.787
> 
> 标签：zend-framework2, zend-view

我将 ZF2 的 View 组件用作我的项目的独立组件，如下所示：

```
$renderer = new PhpRenderer;
$resolver = new Resolver\AggregateResolver();
$stack = new Resolver\TemplatePathStack(array(
    'script_paths' => array(
        __DIR__ . '/view'
    )
));
$resolver->attach($stack);
$renderer->setResolver($resolver);

$model1 = new ViewModel;
$model1->setTemplate('template1');
$model1->setVariable('key', 'value');

$model2 = new ViewModel;
$model2->setTemplate('template2');

$model1->addChild($model2, 'child');

echo $renderer->render($model1); 
```

它就像魅力一样。孩子在 model1 中渲染。但问题是，我如何访问`key`model2 中的model1 变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T15:20:58.440

您可以使用`Zend\View\Helper\ViewModel`来访问公共根视图模型，并可能从中遍历整个视图模型树。

只需设置根本身：

```
// right after you instantiated $model1
$modelHelper = $renderer->plugin('view_model');
$modelHelper->setRoot($model1); 
```

现在`$this->viewModel()->getRoot()`将`$model1`在每个视图模板中返回。

[您可以在Zend\Mvc\View\Http\ViewManager](https://github.com/zendframework/zf2/blob/release-2.2.4/library/Zend/Mvc/View/Http/ViewManager.php#L179-L198)中查看默认情况下是如何处理的

# ruby - 以十六进制数作为输入？

> ID：13425243
> 
> 赞同：0
> 
> 时间：2012-11-16T22:16:51.233
> 
> 标签：ruby, input, hex

如何将十六进制数作为输入？我的意思不是将整数作为输入并将其转换为十六进制，而是将十六进制数作为输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T22:21:51.963

从标准输入读取十六进制数并解析：`gets.to_i(16)`. 我认为您真正要问的是如何做到这一点：

```
x = gets.to_i(16)
x = x + 1
puts x.to_s(16) 
```

Ruby 默认所有解析/打印为十进制；如果你想要十六进制，你必须明确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:22:27.513

这？

```
>> "0xfa".hex
=> 250 
```

或这个？

```
>> ((0x4009)+1).to_s(16)
=> "400a" 
```

# android - java.lang.String 无法转换为 JSONObject

> ID：13425244
> 
> 赞同：-1
> 
> 时间：2012-11-16T22:17:05.753
> 
> 标签：android, json

我在尝试从数据库中检索数据时遇到了这个问题：

```
Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject

public class AllProductsActivity extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> productsList;

    // url to get all products list
    private static String url_all_products = "http://192.168.1.3/android_connect/get_all_products.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_PRODUCTS = "products";
    private static final String TAG_PID = "pid";
    private static final String TAG_NAME = "name";

    // products JSONArray
    JSONArray products = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.all_products);

        // Hashmap for ListView
        productsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllProducts().execute();

        // Get listview
        ListView lv = getListView();

        // on seleting single product
        // launching Edit Product Screen
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String pid = ((TextView) view.findViewById(R.id.pid)).getText()
                        .toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        EditProductActivity.class);
                // sending pid to next activity
                in.putExtra(TAG_PID, pid);

                // starting new activity and expecting some response back
                startActivityForResult(in, 100);
            }
        });

    }

    // Response from Edit Product Activity
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        // if result code 100
        if (resultCode == 100) {
            // if result code 100 is received 
            // means user edited/deleted product
            // reload this screen again
            Intent intent = getIntent();
            finish();
            startActivity(intent);
        }

    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllProducts extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AllProductsActivity.this);
            pDialog.setMessage("Loading products. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();

            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Products: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    products = json.getJSONArray(TAG_PRODUCTS);

                    // looping through All Products
                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID);
                        String name = c.getString(TAG_NAME);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_PID, id);
                        map.put(TAG_NAME, name);

                        // adding HashList to ArrayList
                        productsList.add(map);
                    }
                } else {
                    // no products found
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            NewProductActivity.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            AllProductsActivity.this, productsList,
                            R.layout.list_item, new String[] { TAG_PID,
                                    TAG_NAME},
                            new int[] { R.id.pid, R.id.name });
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }

    }
} 
```

执行该行时，问题是excatly触发：

```
// getting JSON string from URL
    JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params); 
```

这段代码是怎么回事？我认为我没有编码错误。请问有什么帮助吗？

PHP文件：

```
<?php header('content-type: application/json; charset=utf-8');
/*
 * Following code will list all the products
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// get all products from products table
$result = mysql_query("SELECT * FROM products") or die(mysql_error());

// check for empty result
if (mysql_num_rows($result) > 0) {
    // looping through all results
    // products node
    $response["products"] = array();

    while ($row = mysql_fetch_array($result)) {
        // temp user array
        $product = array();
        $product["pid"] = $row["pid"];
        $product["name"] = $row["name"];
        $product["price"] = $row["price"];
        $product["description"] = $row["description"];
        $product["created_at"] = $row["created_at"];
        $product["updated_at"] = $row["updated_at"];

        // push single product into final response array
        array_push($response["products"], $product);
    }
    // success
    $response["success"] = 1;

    // echoing JSON response
    echo json_encode($response);
} else {
    // no products found
    $response["success"] = 0;
    $response["message"] = "No products found";

    // echo no users JSON
    echo json_encode($response);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:56:32.747

与其自己对对象进行编组和解组，不如查看由 Google 开发的 Gson 库。

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

图书馆使用：[https ://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:53:09.450

尝试替换此行：

`require_once __DIR__ . '/db_connect.php';`

和：

`include('db_connect.php');`

在课堂上，这一行：

`"http://192.168.1.3/android_connect/get_all_products.php";`

和：

`"http://DOMAIN.COM/android_connect/get_all_products.php";`

我测试了这段代码，它以这种方式工作。

# c# - 与 ListView 一起使用的 SqlDataSource

> ID：13425253
> 
> 赞同：0
> 
> 时间：2012-11-16T22:17:47.837
> 
> 标签：c#, asp.net

我是一个新手，我花了 100 多个小时试图找到我的问题的解决方案：

我有一个Recipes db，它显示在Recipes ListView 中，提供13 行数据。Recipes 数据库可以很好地加载到 Recipes ListView 中，并且 Recipes 数据库有一个名为 RecipesDirections 的关系数据库。每个 db 都有一个主键“Category”，RecipesDirections 对 Recipes db 有一个外键，即“Category”。“类别 1”等在两个数据库中是相同的配方。食谱列表视图显示食谱数据库中食谱的前十个名称。我想单击Recipes ListView 中的第一个名称并打开一个页面（我使用DetailPage.aspx 作为此页面），显示来自RecipesDirections db 的相同食谱（具有成分和方向）。

如果在浏览器中打开，DetailPage.aspx 会在来自 RecipesDirections db 的 ListView 中显示 10 个食谱的成分和说明。

我的目标是能够在Recipes ListView 上单击recipe #1 或recipe #2 或recipe #10，并在DetailPage.aspx 中打开带有成分和说明的配方。现在，无论我在“食谱列表视图”上单击哪个链接（1 到 10），DetailPage.aspx 都会打开并仅显示 RecipesDirections 数据库的第一个食谱。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:24:11.710

在使用 ListView 进行数据绑定之前，您需要确保有一个键可以标识数据中的配方。

在您的 ListView 中，当您形成指向 DetailPage.aspx 的链接时，您将需要附加一个查询字符串变量来标识您尝试查看的食谱。

在 DetailPage.aspx 中，从查询字符串中提取变量并使用它来查询数据库表中的配方详细信息。

# jquery - 运行 jquery ajax 请求调用的 html 文件中的函数

> ID：13425255
> 
> 赞同：0
> 
> 时间：2012-11-16T22:17:51.207
> 
> 标签：jquery, ajax

我正在发出一个 ajax 请求来调用带有变量的 php 文件。但它没有得到价值。我打过电话`$("#data").load("myfile.php?filename=file.xml")`

在 myfile.php

```
$(window).load(function(){
 $.ajax({
        type: "GET",
        url: "../files<?php echo $_GET['filename']; ?>",
        dataType: "xml",
        success: function(dataXML) {
            XML = dataXML;
            runNow();
        }

    }); 
```

但是这两个级别的 ajax 是请求不起作用。我试过用浏览器的网络调试器找到它，但没有发出这个请求。

为了简化，有一个页面正在发出 ajax 请求并将其数据加载到一个 div。那个 div 有一个`<script> </script>`. 在它里面还有另一个 ajax 请求。

这第二个 ajax 请求不起作用，并且没有使用`$_GET['filename']`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:19:49.060

```
$(window).load(function(){
 $.ajax({
        type: "GET",
        url: "../files/" + <?php echo $_GET['filename']; ?>,
        dataType: "xml",
        success: function(dataXML) {
            XML = dataXML;
            runNow();
        }

    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:31:36.927

我不相信`window`当第一个 AJAX 调用将新脚本元素加载到页面上时会调用 load 事件，因此不会触发插入的 AJAX javascript。

尝试删除`$(window).load`包装器并直接调用`$.ajax()`

# git - 重写历史 git filter-branch 创建/拆分成子模块/子项目

> ID：13425260
> 
> 赞同：5
> 
> 时间：2012-11-16T22:17:59.407
> 
> 标签：git, rewrite, git-submodules, git-filter-branch, subproject

我目前正在将一个 cvs 项目导入 git。
导入后，我想重写历史以将现有目录移动到单独的子模块中。

假设我有这样的结构：

`file1
file2
file3
dir1
dir2
library` 

现在我想重写历史，以便目录`library`始终是一个 git 子模块。说，将指定的目录拆分成自己的子模块/子项目

这是我目前的代码：

文件**重写子模块**（称为）

```
cd project
git filter-branch --tree-filter $PWD/../$0-tree-filter --tag-name-filter cat -- --all 
```

文件**重写子模块树过滤器**

```
    #!/bin/bash

    函数 gitCommit()
    {
        取消设置 GIT_DIR
        取消设置 GIT_WORK_TREE
        git添加-A
        if [ -n "$(git diff --cached --name-only)" ]
        然后
            # 要提交的东西
            git commit -F $_msg
        菲
    }

    _git_dir=$GIT_DIR
    _git_work_tree=$GIT_WORK_TREE
    取消设置 GIT_DIR
    取消设置 GIT_WORK_TREE
    _dir=$密码

    如果 [ -d "库" ]
    然后
        _msg=$(临时文件)
        git 日志 ${GIT_COMMIT}^! --format="%B" > $_msg
        git rm -r --cached 库
        光盘库
        如果 [ -d ".git" ]
        然后
            gitCommit
        别的
            混帐初始化
            gitCommit
        菲
        光盘..
        导出 GIT_DIR=$_git_dir
        导出 GIT_WORK_TREE=$_git_work_tree
        git 子模块添加 -f ./lib
    菲

    GIT_DIR=$_git_dir
    GIT_WORK_TREE=$_git_work_tree

```

此代码创建 .gitmodules 文件，但不是主存储库中的子模块提交条目（行`Subproject commit <sha1-hash>`，输出`git diff`），并且目录`library`中的文件仍然在主存储库中进行版本控制，而不是在子项目存储库中。

提前感谢您的任何提示

.gitmodules 看起来像这样：

```
    [子模块“库”]
        路径 = 库
        网址 = ./库

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:23:21.283

我解决了我自己的问题，这是解决方案：

`git-submodule-split library another_library`

脚本`git-submodule-split`：

```
    #!/bin/bash

    设置-eu

    如果 [ $# -eq 0 ]
    然后
        echo "用法：$0 子模块拆分"
    菲

    导出 _tmp=$(mktemp -d)
    导出 _libs="$@"
    对于我在 $_libs
    做
        mkdir -p $_tmp/$i
    完毕

    git filter-branch --commit-filter '
    函数 gitCommit()
    {
        git添加-A
        if [ -n "$(git diff --cached --name-only)" ]
        然后
            git commit -F $_msg
        菲
    } >/dev/null

    # 来自 git-filter-branch
    git checkout-index -f -u -a || die "无法签出索引"
    # $commit 删除的文件现在仍在工作树中；
    # 删除它们，否则它们将被再次添加
    git clean -d -q -f -x

    _git_dir=$GIT_DIR
    _git_work_tree=$GIT_WORK_TREE
    _git_index_file=$GIT_INDEX_FILE
    取消设置 GIT_DIR
    取消设置 GIT_WORK_TREE
    取消设置 GIT_INDEX_FILE

    _msg=$(临时文件)
    猫 /dev/stdin > $_msg
    对于我在 $_libs
    做
        如果 [ -d "$i" ]
        然后
            取消设置 GIT_DIR
            取消设置 GIT_WORK_TREE
            取消设置 GIT_INDEX_FILE
            光盘$i
            如果 [ -d ".git" ]
            然后
                gitCommit
            别的
                git init >/dev/null
                gitCommit
            菲
            光盘..
            rsync -a -rtu $i/.git/ $_tmp/$i/.git/
            导出 GIT_DIR=$_git_dir
            导出 GIT_WORK_TREE=$_git_work_tree
            导出 GIT_INDEX_FILE=$_git_index_file
            git rm -q -r --cached $i
            git 子模块添加 ./$i >/dev/null
            混帐添加 $i
        菲
    完毕
    rm $_msg
    导出 GIT_DIR=$_git_dir
    导出 GIT_WORK_TREE=$_git_work_tree
    导出 GIT_INDEX_FILE=$_git_index_file

    如果 [ -f ".gitmodules" ]
    然后
        混帐添加 .gitmodules
    菲

    _new_rev=$(git write-tree)
    转移
    git commit-tree "$_new_rev" "$@";
    ' --tag-name-filter cat -- --all

    对于我在 $_libs
    做
        如果 [ -d "$_tmp/$i/.git" ]
        然后
            rsync -a -i -rtu $_tmp/$i/.git/ $i/.git/
            光盘$i
            git reset --hard
            光盘..
        菲
    完毕
    rm -r $_tmp

    git for-each-ref refs/original --format="%(refname)" | 读我的时候；做 git update-ref -d $i; 完毕

    git reflog expire --expire=now --all
    git gc --aggressive --prune=now

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-21T00:19:03.813

我有一个项目，其中包含一个`utils`开始在其他项目中有用的库，并且想将其历史拆分为子模块。没想到先看 SO，所以我自己写了，它在本地构建历史，所以速度要快一点，之后如果你愿意，你可以设置辅助命令的`.gitmodules`文件等，并将子模块历史自己推送到任何地方你要。

剥离的命令本身在这里，文档在评论中，在后面的未剥离的命令中。`subdir`使用set 将其作为自己的命令运行，就像`subdir=utils git split-submodule`您要拆分`utils`目录一样。这很 hacky，因为它是一次性的，但我在 Git 历史记录中的 Documentation 子目录中对其进行了测试。

```
#!/bin/bash
# put this or the commented version below in e.g. ~/bin/git-split-submodule
${GIT_COMMIT-exec git filter-branch --index-filter "subdir=$subdir; ${debug+debug=$debug;} $(sed 1,/SNIP/d "$0")" "$@"}
${debug+set -x}
fam=(`git rev-list --no-walk --parents $GIT_COMMIT`)
pathcheck=(`printf "%s:$subdir\\n" ${fam[@]} \
    | git cat-file --batch-check='%(objectname)' | uniq`)
[[ $pathcheck = *:* ]] || {
    subfam=($( set -- ${fam[@]}; shift;
        for par; do tpar=`map $par`; [[ $tpar != $par ]] &&
            git rev-parse -q --verify $tpar:"$subdir"
        done
    ))
    git rm -rq --cached --ignore-unmatch  "$subdir"
    if (( ${#pathcheck[@]} == 1 && ${#fam[@]} > 1 && ${#subfam[@]} > 0)); then
        git update-index --add --cacheinfo 160000,$subfam,"$subdir"
    else
        subnew=`git cat-file -p $GIT_COMMIT | sed 1,/^$/d \
            | git commit-tree $GIT_COMMIT:"$subdir" $(
                ${subfam:+printf ' -p %s' ${subfam[@]}}) 2>&-
            ` &&
        git update-index --add --cacheinfo 160000,$subnew,"$subdir"
    fi
}
${debug+set +x} 
```

* * *

```
#!/bin/bash
# Git filter-branch to split a subdirectory into a submodule history.

# In each commit, the subdirectory tree is replaced in the index with an
# appropriate submodule commit.
# * If the subdirectory tree has changed from any parent, or there are
#   no parents, a new submodule commit is made for the subdirectory (with
#   the current commit's message, which should presumably say something
#   about the change). The new submodule commit's parents are the
#   submodule commits in any rewrites of the current commit's parents.
# * Otherwise, the submodule commit is copied from a parent.

# Since the new history includes references to the new submodule
# history, the new submodule history isn't dangling, it's incorporated.
# Branches for any part of it can be made casually and pushed into any
# other repo as desired, so hooking up the `git submodule` helper
# command's conveniences is easy, e.g.
#     subdir=utils git split-submodule master
#     git branch utils $(git rev-parse master:utils)
#     git clone -sb utils . ../utilsrepo
# and you can then submodule add from there in other repos, but really,
# for small utility libraries and such, just fetching the submodule
# histories into your own repo is easiest. Setup on cloning a
# project using "incorporated" submodules like this is:
#   setup:  utils/.git
#
#   utils/.git:
#       @if _=`git rev-parse -q --verify utils`; then \
#           git config submodule.utils.active true \
#           && git config submodule.utils.url "`pwd -P`" \
#           && git clone -s . utils -nb utils \
#           && git submodule absorbgitdirs utils \
#           && git -C utils checkout $$(git rev-parse :utils); \
#       fi
# with `git config -f .gitmodules submodule.utils.path utils` and
# `git config -f .gitmodules submodule.utils.url ./`; cloners don't
# have to do anything but `make setup`, and `setup` should be a prereq
# on most things anyway.

# You can test that a commit and its rewrite put the same tree in the
# same place with this function:
# testit ()
# {
#     tree=($(git rev-parse `git rev-parse $1`: refs/original/refs/heads/$1));
#     echo $tree `test $tree != ${tree[1]} && echo ${tree[1]}`
# }
# so e.g. `testit make~95^2:t` will print the `t` tree there and if
# the `t` tree at ~95^2 from the original differs it'll print that too.

# To run it, say `subdir=path/to/it git split-submodule` with whatever
# filter-branch args you want.

# $GIT_COMMIT is set if we're already in filter-branch, if not, get there:
${GIT_COMMIT-exec git filter-branch --index-filter "subdir=$subdir; ${debug+debug=$debug;} $(sed 1,/SNIP/d "$0")" "$@"}

${debug+set -x}
fam=(`git rev-list --no-walk --parents $GIT_COMMIT`)
pathcheck=(`printf "%s:$subdir\\n" ${fam[@]} \
    | git cat-file --batch-check='%(objectname)' | uniq`)

[[ $pathcheck = *:* ]] || {
    subfam=($( set -- ${fam[@]}; shift;
        for par; do tpar=`map $par`; [[ $tpar != $par ]] &&
            git rev-parse -q --verify $tpar:"$subdir"
        done
    ))

    git rm -rq --cached --ignore-unmatch  "$subdir"
    if (( ${#pathcheck[@]} == 1 && ${#fam[@]} > 1 && ${#subfam[@]} > 0)); then
        # one id same for all entries, copy mapped mom's submod commit
        git update-index --add --cacheinfo 160000,$subfam,"$subdir"
    else
        # no mapped parents or something changed somewhere, make new
        # submod commit for current subdir content.  The new submod
        # commit has all mapped parents' submodule commits as parents:
        subnew=`git cat-file -p $GIT_COMMIT | sed 1,/^$/d \
            | git commit-tree $GIT_COMMIT:"$subdir" $(
                ${subfam:+printf ' -p %s' ${subfam[@]}}) 2>&-
            ` &&
        git update-index --add --cacheinfo 160000,$subnew,"$subdir"
    fi
}
${debug+set +x} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:17:16.233

注意：子模块条目仅在您这样做时从父仓库创建

```
git submodule init
git submodule update 
```

您不需要在`rewrite-submodule-tree-filter`脚本中使用这些命令，因为它只是关于正确设置`.gitmodules`文件内容。

`git submodule`只有当您第一次使用父仓库时，您才会执行这些“ ”命令：请参阅“[使用子模块克隆项目](http://git-scm.com/book/en/Git-Tools-Submodules#Cloning-a-Project-with-Submodules)”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-22T20:03:50.870

这是适用于 MacOSX 的更新答案。主要的变化是使用 pushd/popd 来改变目录，这样子模块就可以像 module/glop 而不仅仅是 glop。

```
#!/bin/bash

set -eu

if [ $# -eq 0 ]
then
    echo "Usage: $0 submodules-to-split"
fi

export _tmp=$(mktemp -d /tmp/git-submodule-split.XXXXXX)
export _libs="$@"
for i in $_libs
do
    mkdir -p $_tmp/$i
done

git filter-branch --commit-filter '
function gitCommit()
{
    git add -A
    if [ -n "$(git diff --cached --name-only)" ]
    then
        git commit -F $_msg
    fi
} >/dev/null

# from git-filter-branch
git checkout-index -f -u -a || die "Could not checkout the index"
# files that $commit removed are now still in the working tree;
# remove them, else they would be added again
git clean -d -q -f -x >&2

_git_dir=$GIT_DIR
_git_work_tree=$GIT_WORK_TREE
_git_index_file=$GIT_INDEX_FILE
unset GIT_DIR
unset GIT_WORK_TREE
unset GIT_INDEX_FILE

_msg=$(mktemp /tmp/git-submodule-split-msg.XXXXXX)
cat /dev/stdin > $_msg
for i in $_libs
do
    if [ -d "$i" ]
    then
        unset GIT_DIR
        unset GIT_WORK_TREE
        unset GIT_INDEX_FILE
        pushd $i > /dev/null
        if [ -d ".git" ]
        then
            gitCommit
        else
            git init >/dev/null
            gitCommit
        fi
        popd > /dev/null
        mkdir -p $_tmp/$i
        rsync -a -rtu $i/.git/ $_tmp/$i/.git/
        export GIT_DIR=$_git_dir
        export GIT_WORK_TREE=$_git_work_tree
        export GIT_INDEX_FILE=$_git_index_file
        git rm -q -r --cached $i >&2
        git submodule add ./$i $i >&2
        git add $i >&2
    fi
done
export GIT_DIR=$_git_dir
export GIT_WORK_TREE=$_git_work_tree
export GIT_INDEX_FILE=$_git_index_file

if [ -f ".gitmodules" ]
then
    git add .gitmodules >&2
fi

_new_rev=$(git write-tree)
shift
git commit-tree -F $_msg "$_new_rev" $@;
rm -f $_msg
' --tag-name-filter cat -- --all

for i in $_libs
do
    if [ -d "$_tmp/$i/.git" ]
    then
        rsync -a -i -rtu $_tmp/$i/.git/ $i/.git/
        pushd $i
        git reset --hard
        popd
    fi
done
rm -rf $_tmp

git for-each-ref refs/original --format="%(refname)" | while read i; do git update-ref -d $i; done

git reflog expire --expire=now --all
git gc --aggressive --prune=now 
```

# php - 在codeigniter的模态中使用类型：“POST”

> ID：13425265
> 
> 赞同：0
> 
> 时间：2012-11-16T22:18:38.693
> 
> 标签：php, jquery, codeigniter

我有一个模态，`codeigniter`就像一个表单，我可以将数据发送到一个特定的`PHP`文件这里是代码：

```
$("#updateProvinciaBtn").click(function(){

            $(".control-group").fadeTo("fast", 0.3);
              myData=$("#updateform").serialize();
              console.log(myData);
            $.ajax({
                type: "POST",
                url: "http://site.com/uUser.php",
                data: myData,
                success: function(){
                    $('#updateUser').modal('hide');
                    window.location="http://site.com/index.php/zcms/users";                 
                }
            });// cierra ajax contactG  

        return true;

    }); 
```

我想要的只是更改 url: "http://site.com/uUser.php" 为我的模型文件中的脚本我`codeigniter` 可以这样做吗？

这是我的 Uuser.php

```
include('openConn.php');

$first_name=$_POST['first_name'];
$last_name=$_POST['last_name'];
$username=$_POST['username'];
$id=$_POST['id'];
$email_address=$_POST['email_address'];

mysql_query( "SET NAMES 'utf8' " );                 
$strSQL="UPDATE users SET ";
$strSQL.="first_name='".$first_name."', ";
$strSQL.="last_name='".$last_name."', ";
$strSQL.="username='".$username."', ";
$strSQL.="email_address='".$email_address."', ";
$strSQL.="id='".$id."' ";
$strSQL.="WHERE id=".$id;       
//echo $strSQL;
mysql_query($strSQL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:41:54.137

由于您没有回复我的评论：

一般来说：如果您在路由文件（application/config/routes.php）中输入 url 并准备好相应的功能（在您的**控制器**中），则可以更改 javascript 中的 url。

正如我所说，请阅读[http://codeigniter.com/user_guide/general/routing.html](http://ellislab.com/codeigniter/user_guide/general/routing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:57:06.377

我所做的是在我的控制器中创建一个函数

```
function uUser() {
        $this -> zcms_model -> uUser();
            } 
```

然后在我的模型中创建一个函数

```
public function uUser()
    {
        $data = array(
          'first_name'=>$this->input->post('first_name'),
          'id'=>$this->input->post('id'),

        );
        $this->db->where('id',$this->input->post('id'));
        $this->db->update('users',$data); 

    } 
```

并且正在工作，我希望这会有所帮助。

# foursquare - 新的foursquare帖子（新平台）未显示

> ID：13425267
> 
> 赞同：-1
> 
> 时间：2012-11-16T22:19:06.840
> 
> 标签：foursquare, platform

是否已删除此功能？它不会再显示在网站或应用程序（官方应用程序）上......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:33:46.687

没关系...这是实际代码中的错误。

# c++ - C++ 将矩阵列映射到秩位操作

> ID：13425269
> 
> 赞同：3
> 
> 时间：2012-11-16T22:19:11.877
> 
> 标签：c++, matrix, c++11, bit-manipulation, transpose

我有由 uint64_t （来自 C++11）表示的（二进制）矩阵。而且我希望能够有效地从任何列映射到第一行。例如

```
0 1 0 0 0 0 0 0
0 1 0 0 0 0 0 0
0 1 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 1 0 0 0 0 0 0
0 1 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 1 0 0 0 0 0 0

uint64_t matrice = 0x4040400040400040uLL;
uint64_t matrice_2 = map(matrice, ColumnEnum::Column2);

1 1 1 0 1 1 0 1
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 
```

matrice_2 包含 0xED00000000000000uLL；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:51:11.817

一个不错的小谜语。这是一个相当易读的版本：

```
matrice = (matrice >> (8ull - column)) & 0x0101010101010101ull;
uint64_t result((  ((matrice >>  0ul)  & 0x01ull)
                 | ((matrice >>  7ul)  & 0x02ull)
                 | ((matrice >> 14ull) & 0x04ull)
                 | ((matrice >> 21ull) & 0x08ull)
                 | ((matrice >> 28ull) & 0x10ull)
                 | ((matrice >> 35ull) & 0x20ull)
                 | ((matrice >> 42ull) & 0x40ull)
                 | ((matrice >> 49ull) & 0x80ull)) << 56ull); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T23:23:35.940

好问题。我真的很喜欢黑客攻击。这是我的解决方案：

```
uint64_t map(uint64_t x, int column)
{
  x = (x >> (7 - column)) & 0x0101010101010101uLL;
  x = (x | (x >> 7)) & 0x00FF00FF00FF00FFuLL;
  x = (x | (x >> 14))& 0x000000FF000000FFuLL;
  x = (x | (x >> 28))& 0x00000000000000FFuLL;
  return x << 56;
} 
```

可以在[ideone](http://ideone.com/DMHBo1)找到一个工作示例，调用的地方确实如此`map(matrice, ColumnEnum::Column2)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T22:43:03.940

首先为每一列定义位掩码：

```
uint64_t columns[8] = {
  0x8080808080808080uLL,
  0x4040404040404040uLL,
  //...
  0x0101010101010101uLL
}; 
```

通过将列位掩码应用于您的“矩阵”，您只会得到此列：

```
uint64_t col1 = matrice & columns[1]; // second column - rest is empty 
```

通过移位你只能得到第一列的情况：

```
uint64_t col0 = (col1 << 1); // second column - rest is empty
//                       ^ this number is just zero based index of column,,, 
```

现在第一位在正确的位置 - 只需设置接下来的 7 位：

```
 col0 |= (col0 & (1 << 55)) << 7; // second bit...
 // .... 
```

或者只是使用`std::bitset<64>`，我会这样做....

# asp.net - asp:EntityDataSource 无法更新或删除 gridview

> ID：13425270
> 
> 赞同：2
> 
> 时间：2012-11-16T22:19:15.263
> 
> 标签：asp.net, entity-framework

我有一个供应商投标的网格视图，其中包含供应商表和产品表的外键。

这是我的gridview 和我的数据源。

```
<table>
    <asp:GridView ID="GridViewVendorBids" runat="server" AutoGenerateColumns="False"
        DataSourceID="VendorBidsDS" DataKeyNames="autRecNum" ForeColor="#333333" CellPadding="4"
        GridLines="None" AllowPaging="True" AllowSorting="True">
        <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
        <Columns>
            <asp:CommandField ShowEditButton="true" />
            <asp:BoundField DataField="dtmBidDate" HeaderText="Bid Date" SortExpression="dtmBidDate"
                DataFormatString="{0:MM/dd/yyyy}" ApplyFormatInEditMode="true" />
            <asp:TemplateField HeaderText="Vendor Name" SortExpression="it.tblVendors.strVendorName">
                <ItemTemplate>
                    <asp:Label ID="lblVendorName" runat="server" Text='<%# Eval("tblVendors.strVendorName") %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList ID="ddlVendorList" runat="server" DataTextField="strVendorName"
                        DataSource='<%# getVendorList() %>' DataValueField="strVendorCode" AutoPostBack="false"
                        SelectedValue='<%# Bind("strVendorCode") %>' DropDownStyle="DropDownList" AutoCompleteMode="SuggestAppend"
                        CssClass="comboBoxInsideModalPopup" Width="250px" MaxLength="0" Style="display: inline;
                        top: 0px; left: 0px;" ItemInsertLocation="Append" RenderMode="Inline" Height="16px" />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Product Name" SortExpression="it.tblProducts.strProductName">
                <ItemTemplate>
                    <asp:Label ID="lblProductName" runat="server" Text='<%# Eval("tblProducts.strProductName") %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList ID="ddlProductList" runat="server" DataTextField="strProductName"
                        DataSource='<%# getProductList() %>' DataValueField="strProductCode" AutoPostBack="false"
                        SelectedValue='<%# Bind("strProductCode") %>' DropDownStyle="DropDownList" AutoCompleteMode="SuggestAppend"
                        CssClass="comboBoxInsideModalPopup" Width="300px" MaxLength="0" Style="display: inline;
                        top: 0px; left: 0px;" ItemInsertLocation="Append" RenderMode="Inline" Height="16px" />
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Unit" SortExpression="it.tblProducts.strUnitDesc">
                <ItemTemplate>
                    <asp:Label ID="lblUnitDesc" runat="server" Text='<%# Eval("tblProducts.strUnitDesc") %>' />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="sngBid" HeaderText="Bid" SortExpression="sngBid" ItemStyle-HorizontalAlign="Right"
                DataFormatString="{0:0.00}" />
            <asp:BoundField DataField="strBidType" HeaderText="Bid Type" SortExpression="strBidType"
                ReadOnly="true" />
            <asp:CommandField ShowDeleteButton="true" />
        </Columns>
    </asp:GridView>
</table>
<asp:EntityDataSource ID="VendorBidsDS" runat="server" ConnectionString="name=IMSEntities"
    DefaultContainerName="IMSEntities" EntitySetName="tblVendorBid" Include="tblVendors,tblProducts"
    EnableFlattening="False" OrderBy="it.dtmBidDate DESC" EnableDelete="true" EnableUpdate="true">
</asp:EntityDataSource> 
```

当我按下更新或删除键时，出现以下错误：

在更新或删除操作期间未找到关键属性值。检查以确保指定为绑定表达式的关键属性可用于数据源。

我发现[这篇文章](https://stackoverflow.com/questions/3546341/formview-with-entitydatasource-and-dropdownlist-gives-a-property-names-0-wa)与我的问题非常相似，但是当我尝试答案时，我仍然得到同样的错误。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:29:27.180

Is "autRecNum" the only primary key of your VendorBidsDS Table? You may check your Data Source Configuration whether primary key and foreign key are set properly. Also you may check if the Delete/Update Rule for FKey is set to Cascade if the other table is not updated. And in " SelectedValue='<%# Bind("strProductCode") %>' ", "strProductCode" should be entity property instead of database column. That's the few points I can remember from my previous project long long time ago. Hope it can help you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:17:48.140

对于实体数据源，您需要表的主键。它允许您更改记录...添加主键后，右键单击实体数据源并选择更新数据库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:35:26.393

我收到“未找到键属性值...”错误，因为我试图将**两次**保存回`EntityDataSource`没有有效主键的位置。`StoreGeneratedPattern`设置正确设置为并且第 `Identity`一个插入正确运行但是后续更新失败 - 可能是因为尚未设置主键。

基本上我手动插入了一行（使用 DbContext）并运行`context.SaveChanges()`，但后来我的 Telerik Grid 翻译`CommandName`了按钮的“更新”以在插入后运行**另一个**更新命令，导致此错误。更新现有行时不会出现该错误，因此它很可能与新插入行的主键有关。

为了解决这个问题，我只需将`CommandName`按钮设置为“取消”。我的手动插入/更新仍在运行，但网格不会尝试另一个更新操作并正确关闭我正在编辑的行。

# web-config - 在 Visual Studio 2012 中预编译 ASP.NET MVC 4 项目时，它是否尝试在本地解析整个配置链？

> ID：13425282
> 
> 赞同：1
> 
> 时间：2012-11-16T22:20:41.710
> 
> 标签：web-config, visual-studio-2012, precompile, web-config-transform, one-click-web-publishing

有人可以确认或否认我在下面的假设和/或提供任何替代方案吗？

## 我的目标

当一键发布到我们的生产环境时，[我](http://msdn.microsoft.com/en-us/library/hh475319.aspx)希望能够预编译和合并我的 ASP.NET MVC 4 应用程序（如此处和[此处记录）。](http://msdn.microsoft.com/en-us/library/dd410108.aspx)

## 症状

我在 Visual Studio 2012 中有一个 ASP.NET MVC 4 项目。我`Web.config`包含在`Web.Release.config`转换中删除的各种条目。删除的条目之一是整个`configSections`元素，因为我们在生产服务器的`Machine.config`.

但是，当我将项目配置为预编译和合并以发布发布时，我收到以下错误：

```
Unrecognized configuration section [our custom section name] 
```

## 我的假设

我假设正在发生的是它在发布到生产服务器之前在本地预编译所有内容（这很有意义），但是预编译过程的那一部分是解决和验证从项目到我本地的整个`.config`链（这不实际上没有多大意义）。而且由于我的本地没有声明（或我们依赖生产服务器的任何其他设置），因此已解决的不验证。`Web.config``Machine.config``Machine.config``configSections``Machine.config``Web.config`

而且由于`Web.config`没有验证，该站点无法预编译，因此没有任何内容发布到生产环境中。

## 擦

如果确实发生了这种情况，那么我们将无法预编译，因为我能想到的唯一解决方案（除了一些我无法找到的潜在配置选项）将是我们所有的开发人员都拥有我们生产服务器的本地副本`Machine.config`在他们的机器上。这根本不合理，因为它违背了在单个位置声明这些通用设置的整个目的。

# wcf - 如何配置 IIS/WCF 以使用 wsat？

> ID：13425286
> 
> 赞同：1
> 
> 时间：2012-11-16T22:21:14.163
> 
> 标签：wcf, iis, certificate, weblogic, wsat

我想在 WCF 和 Weblogic 之间使用原子事务，但我在配置它时遇到了很多问题。

我已经在 Windows 上打开了 Wsat 并将其关联到一个有效的证书。我还在 IIS 上启用了 SSL 并配置了 https 端口。

我的主要疑问是关于正确的 WCF 绑定配置以及在 Weblogic 上导入 IIS 证书的方式和位置。

我在 Demo.jks 文件（Weblogic 密钥库）中导入了我的 Wsat 证书，但它不起作用。

此致，

ps：原谅我的英语不好:)

# android - 如何从 ListFragment 获取信息

> ID：13425288
> 
> 赞同：0
> 
> 时间：2012-11-16T22:21:25.570
> 
> 标签：android, android-listfragment, android-cursorloader

我有一个使用 CursorLoader 填充的 ListFragment。填充 ListFragment 后，我​​有一个 OnItemClickListener 方法，我想在该方法中识别用户选择的 List Fragment 中的哪个项目。我该怎么做呢？我试过了：

```
String item = getListAdapter().getItem(position);
String item = getListAdapter().getItem(position).toString(); 
```

和

```
String item = (String) ((Fragment) getListAdapter().getItem(position)).getString(0); 
```

其中 position 是传递给 onClickItemListener 方法的整数，如下所示：

```
public void onListItemClick(ListView l, View v, int position, long id) 
```

所有这些都会抛出一种或另一种类型的强制转换异常。我难住了。这似乎是一件简单的事情。供您参考，以下是列表片段的填充方式：

```
private SimpleCursorAdapter mAdapter;
private static final String[] PROJECTION = new String[] { "_id", "stitchname" };
@Override
public void onActivityCreated(Bundle savedInstanceState) {
  super.onActivityCreated(savedInstanceState);
  Intent myData = getActivity().getIntent();
  Bundle info = myData.getExtras();
  String[] dataColumns = { "stitchname" };
  int[] viewIDs = { R.id.stitchlist1 };
  mAdapter = new SimpleCursorAdapter(getActivity(), R.layout.stitchlist, null, dataColumns, viewIDs, 0);
  setListAdapter(mAdapter);
  getLoaderManager().initLoader(0, info, (LoaderCallbacks<Cursor>) this); 
}
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
  String selection = "stitchlevel=?";
  String[] selectionArgs = new String[] {args.getString("Level")};
  return (Loader<Cursor>) new CursorLoader(getActivity(), STITCHES_URI,                PROJECTION, selection, selectionArgs, null);  
 } 
```

任何建议都将受到欢迎，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:48:37.617

您正在覆盖错误的方法。您说您正在使用 ListFragment，因此您可能已经在 Fragment 的某处声明了 CursorAdapter/ArrayAdapter。在这种情况下，请执行以下操作：

```
class yourFragemt extends ListFragment{

   //Member Variable
   private SimpleCursorAdapter mAdapter;

   ....

   @Override
   public void onItemClick(AdapterView<?> arg0, View arg1, int pos, long arg3) {

       Cursor c = (Cursor) mAdapter.getItem(pos);

       String value = c.getString(c
            .getColumnIndex(ColumnIndex));

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:31:58.010

答案如下：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    Cursor c = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
    c.moveToPosition(position);
    String item = c.getString(1);
} 
```

我从上面的评论中由 Georgy Gobozov 提供给我的第二个链接得到了答案。

# vim - Vim 已经预装了标签页：如何删除它们？

> ID：13425296
> 
> 赞同：1
> 
> 时间：2012-11-16T22:21:58.307
> 
> 标签：vim, tabs

检查以下屏幕截图：

![Vim 截图](../Images/bcd42657baaeb031beb2b529c1eb140c.png)

我检查了我所有的插件/捆绑包，我使用[Vundle](https://github.com/gmarik/vundle)而不是 Pathogen。这是我的捆绑清单：

```
" This one is required baby!
Bundle 'gmarik/vundle'

" All of my Vundle bundles
Bundle 'scrooloose/nerdcommenter'
Bundle 'scrooloose/nerdtree'
Bundle 'mattn/zencoding-vim'
Bundle 'tpope/vim-fugitive'
Bundle 'tpope/vim-markdown'
Bundle 'tpope/vim-repeat'
Bundle 'tpope/vim-surround'
Bundle 'spf13/PIV'
Bundle 'vim-scripts/YankRing.vim'
Bundle 'jeffkreeftmeijer/vim-numbertoggle'
Bundle 'PotHix/Vimpress'
" Color schemes
Bundle 'altercation/vim-colors-solarized' 
```

我只是拉动了我的 vimrc 文件，以防你没有注意到。我不知道这些会改变缓冲区行为，但我可能弄错了。

如何删除这种类似标签的功能？要重现它，只需打开一个文件，然后抓取其他文件，并将它们拖到 Vim 窗口（不是图标，窗口）的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T08:35:24.687

Vim 可以创建选项卡，但默认情况下不显示选项卡：*仅*当*您*创建选项卡时才会创建选项卡，如果您不告诉它这样做，Vim 将不会创建选项卡。

如果您不想要标签，请不要使用它们。就是这么简单。

从您的评论来看，您似乎将 Vim 的选项卡与您在其他编辑器中可能习惯的选项卡混淆了。乍一看，它们可能“看起来”相同，但它们的目的和实现却*大不相同*。

在 Vim 中，选项卡是组织工作区的一种方式：**它们不代表也不能代表单个缓冲区。**如果您想在 Vim 中使用制表符，了解这一点非常重要。你需要大量的自律才能真正将 Vim 选项卡用作 TextMate/Sublime 选项卡。如果你理解它们，你应该只使用它们。

在 Vim 中处理多个文件的正确方法是使用缓冲区和窗口以及正确的命令。但是，如果您真的想使用标签，这里有一些提示：

首先将此行添加到您的`~/.vimrc`：

```
set switchbuf=useopen,usetab 
```

使用此设置，许多操作（特别是在快速修复中）会将您跳转到*它所*在的缓冲区（在另一个窗口或另一个选项卡中），而不是在此处加载缓冲区。

然后你应该使用正确的命令：

```
:sb[uffer]
:sbn[ext]
:sbN[ext]
:sbl[ast]
:sbf[irst]
:sbr[ewind] 
```

如果它显示在某处*或*在拆分中打开它，所有这些命令都会跳转到*它所在的缓冲区。*

 *从那里您现在可以执行以下操作：

```
:e file_a
(editing file_a)
:tabe file_b
(editing file_b in tab 2)
:sbN
(editing file_a in tab 1)
:sbn
(editing file_b in tab 2)
… 
```

不会在多个选项卡中使用相同的缓冲区。

*仅*当您了解选项卡作为工作区的真实性质而不是切换到另一个文件的方式时，才应使用与选项卡相关的动作，如`gt`,`:tabl`或。`:tabn2`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:09:25.813

**编辑**找到了一个更有效的设置：

```
set tabpagemax=1 showtabline=0 
```

在你的 $MYVIMRC 里面

文件：

```
 *'showtabline'* *'stal'*
'showtabline' 'stal'    number  (default 1)
            global
            {not in Vi}
            {not available when compiled without the |+windows|
            feature}
    The value of this option specifies when the line with tab page labels
    will be displayed:
        0: never
        1: only if there are at least two tab pages
        2: always
    This is both for the GUI and non-GUI implementation of the tab pages
    line. 
```

和

```
 *'tabpagemax'* *'tpm'*
'tabpagemax' 'tpm'  number  (default 10)
            global
            {not in Vi}
            {not available when compiled without the |+windows|
            feature}
    Maximum number of tab pages to be opened by the |-p| command line
    argument or the ":tab all" command. |tabpage| 
```**

# xml - 链接 XSD XML XSL

> ID：13425297
> 
> 赞同：-1
> 
> 时间：2012-11-16T22:22:06.797
> 
> 标签：xml, xslt, xsd

我有 3 个文件 movies_sch.xsd、movies_style.xsl 和 movies.xml。

任何人都可以建议所有 3 个的链接/href 或名称空间标签，以便我可以让所有 3 个一起工作。

代码片段可以[在 xml 中定义的 xsl](https://stackoverflow.com/questions/13423864/xsl-defining-in-xml)看到那里没有人回复，所以在这里重新发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:52:01.700

我不知道您在哪个平台上，但我怀疑是否存在“所有 3 个的链接/href 或命名空间标签，以便让所有 3 个一起工作。”。在 .NET 平台上，您将使用 XmlReader 加载 movies.xml 文件。将设置 Xml 阅读器，以便它使用 XmlSchemaSet 进行验证。模式集将包含 movies_sch.xsd。设置完成后，您会将movies_style.xsl 文件加载到XslCompiledTransform，然后调用Transform 方法，提供您创建的XmlReader 作为输入和一个文件或XmlWriter 作为输出。这对我来说是“将 3 个文件链接在一起” - 总共可能大约 10-15 行代码。如果 Xml 文件从不更改，您可以验证一次（例如在 Visual Studio 中），如果使用 Visual Studio 进行验证，则跳过使用 XmlReader 进行设置验证。

# git - git submodule update 致命错误：引用不是树

> ID：13425298
> 
> 赞同：37
> 
> 时间：2012-11-16T22:22:20.283
> 
> 标签：git, version-control

```
user$ sudo git submodule update
fatal: reference is not a tree: a094dcfeeb43fcd62a9e466156e05e7581026f33
Unable to checkout 'a094dcfeeb43fcd62a9e466156e05e7581026f33' in submodule path 'client/src/util' 
```

**我该怎么办？我只想从 repo 中获得最新代码的干净副本，我不介意丢失我的更改。** 如您所知，我显然不确定发生了什么。我只能认为它正在尝试签出一个文件，这意味着 git 在我的本地机器上检测到一个文件的本地更改。

我目前正在使用 OSX

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-16T23:38:00.240

这是子模块最常见的问题。您在外部存储库中的提交引用了子模块中尚未有人推送的提交。这是一个依赖问题。始终从内向外推动。这很可能不是您做错了什么，而是在存储库中工作的其他人。他们马虎，忘记在子模块上发布推送，只是推送了包含的存储库。Stuff 在他们的机器上工作，因为他们进行了更改并且那些提交存在那里。去打他们并告诉他们推动他们的子模块更改:)

否则，如果您在另一台机器上工作并且忘记推送子模块更改，则可能是您的错。现在您在另一个位置并且正在思考“发生了什么！这些是我的更改，它们也应该在这里工作！”

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-03-04T21:55:24.143

大多数情况下，这将是 Adam Dymitruk 所描述的情况，但另一种可能导致这种情况的情况是在切换具有更改遥控器的子模块的分支时。这是因为子模块更新只是尝试检查提交，但在添加和获取新的远程之前它将无法执行。

您可以通过查看 .gitmodules 文件并将子模块的 URL 与 cd'ing 到子模块显示的 URL 进行比较并执行`git remote -v`

在这种情况下，您需要运行`git submodule sync`以通知子模块有关远程更改，然后`git submodule update --init --recursive`消除此错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-07T01:41:54.213

除了 Adam Dymitruk 和 Michael Chien 的回答之外，由于 Windows 最大路径长度，我遇到了这个问题。如果我尝试在我的目录中克隆具有 3 级深度子模块的特定存储库`Documents/Visual Studio 2013/Projects`，那么我会得到`fatal: reference is not a tree`. 但是如果我在我的主目录中重复相同的克隆，它就可以正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-31T20:56:58.353

该错误意味着在克隆子模块时无法从任何引用访问特定提交（其 sha1），因此您应该使用有效引用更新子模块或将更改重置为最新版本。

当您在本地分支中进行新提交或包含对分离的 HEAD 的引用时，可能会发生这种情况，但您尚未将它们推送到子模块 git URL 指向的主存储库中。

要手动将子模块重置为原点/主模块，请输入子模块的子目录并进行重置，例如

```
cd client/src/util
git reset origin/master --hard 
```

如果您想更正主仓库中的引用，请在执行上述操作后提交更改：

```
# Still in submodule dir.
git pull origin master # In submodule dir.
git push origin master
cd - # Go back to the main repo dir.
git status
git commit -am 'Update submodule refs'
git push 
```

* * *

如果您想将引用从 fork 拉取并推送到 origin，您可以尝试：

```
cd client/src/util # Go to submodule dir again.
git remote add fork git@github.com:example/foo.git
git pull fork master
git show a094dcfeeb43fcd62a9e466156e05e7581026f33 # Check previously missing sha1\. 
git push origin master:master # Or: master:some_branch 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T22:26:52.533

您的子模块存储库很可能没有引用外部存储库的修订。它也可能在为子模块指定的远程不可用，或者您没有为子模块设置远程。你可以尝试进入`client/src/util`那里`git fetch`。

（你为什么这样做`sudo`？如果它属于 root，为什么你不在 root shell 中，如果不是，你为什么要更改为 root？）

# c# - 如何将 vlc 媒体播放器嵌入到我的 c# windows 窗体应用程序中？

> ID：13425302
> 
> 赞同：3
> 
> 时间：2012-11-16T22:22:36.307
> 
> 标签：c#, windows

我知道如何在我的应用程序中使用 windows 媒体播放器，但它不适用于某些文件。我已经搜索了网络，但没有发现关于在表单中使用 vlc 可以理解的内容。请有人帮助我一步一步地做到这一点？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T22:27:01.220

[http://sourceforge.net/projects/libvlcnet/](http://sourceforge.net/projects/libvlcnet/)

[http://forum.videolan.org/viewtopic.php?f=32&t=58438](http://forum.videolan.org/viewtopic.php?f=32&t=58438)

NET 包装器，用于 VLC 媒体播放器。该库允许您从 .NET 代码中使用 libvlc，而无需导入 dll。简单易用，用于视频流的播放、流式传输、转码。访问主页了解更多信息。

# image - 使用诺基亚 qt 进行 Aforge 图像处理

> ID：13425306
> 
> 赞同：1
> 
> 时间：2012-11-16T22:22:52.180
> 
> 标签：image, qt, image-processing, aforge

只是一个简单的问题：是否可以使用诺基亚 Qt 中使用的 AForge 中使用的图像处理实用程序？我曾尝试在互联网上搜索其他人所做的类似工作，但我还没有遇到任何匹配项。我知道 AForge 是用 C# 编写的，所以它直接在 Visual Studio 中使用。

我问是因为我正在开发一个图像提取工具；我已经提取了原始图像数据并希望对图像进行灰度化，然后通过 Canny Edge 检测器运行它。我还希望可以选择首先使用二值化，然后通过 Canny 运行图像（在灰度化之后）。我希望使用 Aforge 工具的原因是因为我正在进行一项调查，以将这些方法与 Sobel 边缘检测进行比较；我提取的图像也是使用 AForge 工具处理的，因此我希望使用相同的工具来保持处理尽可能一致。

实际上，如果你们对在处理工具方面使用什么有任何建议，我会欢迎他们考虑。

:)

# iphone - iOS 对搜索栏的文本字段背景进行着色

> ID：13425307
> 
> 赞同：1
> 
> 时间：2012-11-16T22:23:01.250
> 
> 标签：iphone, objective-c, ios, search

在 iOS（支持 5.x+）中，将 UISearchBar 文本字段的白色背景颜色更改为不同颜色的最简单方法是什么？它没有 tintColor 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:47:20.477

您可以尝试使用此方法，

```
[searchBar setSearchFieldBackgroundImage: forState:]; 
```

在 iOS 5 之前的版本中，您可以将类别用作，

```
@implementation UISearchBar (BackgroundColor)

- (UITextField *)field {
    // HACK: This may not work in future iOS versions
    for (UIView *subview in self.subviews) {
        if ([subview isKindOfClass:[UITextField class]]) {
            return (UITextField *)subview;
        }
    }
    return nil;
}

- (void)setTextBackgroundColor:(UIColor *)color {
    self.field.backgroundColor = color;
}

@end 
```

# java - 如何阻止 java util 记录格式化我的数字

> ID：13425309
> 
> 赞同：12
> 
> 时间：2012-11-16T22:23:11.980
> 
> 标签：java, logging

我正在使用 Java Util 日志记录，每当我做这样的声明时

```
logger.log(Level.INFO, "print this number = {0}", number); 
```

它将我的号码从 278487683165614 格式化为 278,487,683,165,614

这在搜索日志时非常烦人。

我可以阻止它这样做吗？请帮忙。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T22:31:41.080

默认格式不是你想要的，像这样改变它：

```
{0,number,#} 
```

**编辑 ：**

在这里，您可以获得有关*MessageFormatPattern* [http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html的更多信息](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/MessageFormat.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:29:46.443

你试过`number.toString()`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T22:30:40.547

尝试以下方法之一（没有您的`number`对象类型的可见性）：

1.  使用`String.valueOf()`

    ```
    logger.log(Level.INFO, "print this number = {0}", String.valueOf(number)); 
    ```

2.  使用`Number.toString`

    ```
    logger.log(Level.INFO, "print this number = {0}", number.toString); 
    ```

3.  使用`NumberFormat.setGroupingUsed(false)`

    ```
    NumberFormat formatter = new NumberFormat();     
    formatter.setGroupingUsed(false);
    logger.log(Level.INFO, "print this number = {0}", formatter.format(number)); 
    ```

# authentication - 如何在 XPages 中捕获用户的上次登录并在他们下次登录网站时显示？

> ID：13425313
> 
> 赞同：2
> 
> 时间：2012-11-16T22:23:21.787
> 
> 标签：authentication, xpages, xpages-extlib

我正在使用 XPages 开发自定义用户门户。我想捕获用户的上次登录/登录信息，并在用户登录横幅页面时将其显示在门户上。

有谁知道我如何为 XPages 应用程序完成此任务？

非常感谢您对此的任何帮助或见解。

谢谢！沙巴纳。我的门户链接：[http ://bit.ly/OJmanJ](http://bit.ly/OJmanJ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T07:49:49.620

我使用用户文档执行此操作，并将上次登录的信息保存在那里。然后我在 sessionScope 中设置了一个标志，以知道我已经保存了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T07:49:32.737

我认为这些信息不会在任何地方自动记录。所以你需要自己记录，然后在你的门户上显示这个记录的信息。

# c++ - 是否可以让 Qt Creators Ui 设计器为其无法识别的类创建插槽？

> ID：13425314
> 
> 赞同：2
> 
> 时间：2012-11-16T22:23:26.093
> 
> 标签：c++, qt, c++11, qt-creator

也就是说，通过右键单击小部件并选择“转到插槽...”来创建插槽。

示例 1，这有效：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H 
```

这不是，因为显然设计者在寻找 Ui::MainWindow* 并且如果找不到它就完全吓坏了（得到“找不到包含'Ui::MainWindow'的类......”）

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <memory>
#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT
public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    std::unique_ptr<Ui::MainWindow> ui;
};

#endif // MAINWINDOW_H 
```

我基本上是在寻找一种方法来告诉 Qt “是的，我真的是说那个类。我知道它不包含 Ui::MainWindow*，没关系，一切都会好起来的......”。除非我错了，并且该类出于某种原因实际上需要将其作为普通指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-18T17:03:03.787

“找不到包含'Ui :: MainWindow'的类......”当QT创建者找不到您的“mainwindow.cpp”文件来放置槽函数定义时会发生问题。

确保您的 mainwindow.h 具有以下作为私有变量：

```
Ui::MainWindow *ui; 
```

以下包含在您的 mainwindow.cpp 文件中：

```
#include "ui_mainwindow.h" 
```

如果这不起作用，您的 QT 创建者可能存在错误。尝试更新您的软件。

# java - n-puzzle 的 Java DFS 实现，带有 hashmap

> ID：13425315
> 
> 赞同：2
> 
> 时间：2012-11-16T22:23:31.870
> 
> 标签：java, path-finding, depth-first-search

我正在用几种不同的算法编写程序来解决 n-puzzle 问题。我对 DFS 算法有疑问，因为它只能找到深度 1 到 4 的最简单组合的解决方案，然后显示堆栈溢出错误。此外，对于深度 4，它显示长度为 2147 的解，这显然是错误的。我没有想法有什么问题。

我`HashMap`用来保持探索的节点和回溯路径。这是我的 DFS 代码：

```
public class DFS extends Path{

    Node initial;
Node goal;
String order;
boolean isRandom = false;
ArrayList<Node> Visited = new ArrayList<Node>();
boolean goalFound=false;
public DFS(Node initial, String order, byte [][] goal_state){
    this.initial=initial;
    goal=new Node(goal_state);
    this.order=order;
    if(order.equals("Random"))isRandom=true;
    Visited.add(initial);
    path.put(this.initial, "");
    runDFS(initial);
}

public void runDFS(Node current){

    if(current.equals(goal))
    {
        goalFound=true;
        System.out.println("Goal");
        retracePath(current,true);
        return;
    }

    if(!current.equals(goal) && goalFound==false)
    {

        Node child;
        Moves m = new Moves(current);

        if(isRandom)order=randomOrder("LRUD");

        for (int i=0; i<4; i++)
        {
            String s = order.substring(i,i+1);
            if(m.CanMove(s)==true)
            {
                child=m.move();
                if(Visited.contains(child))
                    {
                        continue;
                    }
                    else
                    {
                        path.put(child,s);
                        Visited.add(child);
                        runDFS(child);
                    }
                }
            }
        }

    }
} 
```

节点：

```
 public class Node {

    public byte[][] status;

    private int pathcost;

    public int getPathcost() {
        return pathcost;
    }

    public void setPathcost(int pathcost) {
        this.pathcost = pathcost;
    }

    public Node(byte[][] status)
    {

        this.status=new byte[status.length][status[0].length];
        for(int i=0;i<status.length;i++){
            for(int j=0;j<status[0].length;j++){

            this.status[i][j]=status[i][j];

            }       }           

    }

    @Override
    public boolean equals(Object other)
    {
        if (!(other instanceof Node))
        {
            return false;
        }
        return Arrays.deepEquals(status, ((Node)other).status);
    }

    @Override
    public int hashCode()
    {
        return Arrays.deepHashCode(status);
    }

} 
```

和路径：

```
 public class Path {

    public HashMap<Node,String> path;

    public Path(){      
    path=new HashMap<Node, String>(100);
    }

public void retracePath(Node nstate, boolean print){

    String dir=path.get(nstate);
    String textPath="";
    int i=0;
        while(!dir.equals("")){

            textPath+=dir + ", ";
            boolean changed=false;
            if(dir.equals("L")) {dir="R"; changed=true;}
            if(dir.equals("R") && changed==false) {dir="L";}
            if(dir.equals("U")) {dir="D"; changed=true;}
            if(dir.equals("D") && changed==false) {dir="U";}

            Moves m=new Moves(nstate);
            m.CanMove(dir);
            nstate=new Node(m.move().status);

            dir=path.get(nstate);

            i++;

        }

        if(print==true) {textPath=textPath.substring(0,(textPath.length()-2));
        System.out.println(i);
        System.out.print(new StringBuffer(textPath).reverse().toString());}
}

public Node getParent(Node n){
    String dir=path.get(n);
    boolean changed=false;
    if(dir.equals("L")) {dir="R"; changed=true;}
    if(dir.equals("R") && changed==false) {dir="L";}
    if(dir.equals("U")) {dir="D"; changed=true;}
    if(dir.equals("D") && changed==false) {dir="U";}

    Moves m=new Moves(n);
    m.CanMove(dir);
    n=new Node(m.move().status);
    return n;
}

public String randomOrder(String order) {  
    ArrayList<Character> neworder = new ArrayList<Character>();  
    for(char c : order.toCharArray()) {  
        neworder.add(c);  
    }  
    Collections.shuffle(neworder);        
    StringBuilder newstring = new StringBuilder();  
    for(char c : neworder) {  
        newstring.append(c);  
    }  
    return newstring.toString();  
}  

} 
```

如果您有任何想法是什么问题，哪里是错误，我将非常感激！

# css - IE6 中的顶部和左侧

> ID：13425316
> 
> 赞同：0
> 
> 时间：2012-11-16T22:23:34.413
> 
> 标签：css, internet-explorer-6

我在 IE6 中调整顶部和左侧确实有问题，在所有剩余的浏览器中一切正常。

我有这个CSS：

```
font-family: "Lucida Grande","Lucida Sans Unicode",Verdana,Arial,Helvetica,sans-serif;
font-size: 12px;
height: 590px;
left: 50px;
line-height: normal;
overflow: hidden;
position: relative;
text-align: left;
top: -42px;
width: 760px;
z-index: 0; 
```

**编辑**

这个顶部和左侧我从 javascript 中得到它：

```
 function()
       {H(a,{left:0,top:0});g=a.getBoundingClientRect();H(a,{left:"50px",top:"-42px"})} 
```

我没有用于放置代码的 css 文件，所以如果我更改顶部和高度，它不会在 IE6 中触发。就像我什么都不做一样。

我想知道IE6是否不处理顶部和左侧？我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:26:50.093

尝试添加`position:absolute`而不是`relative`. IE6 通常很好地处理定位。不确定您是否在此 div 内使用绝对定位的子级。

编辑。

如果你使用条件。例如

```
<!--[if IE 6]>      <html class="ie6"> <![endif]--> 
```

您只能在ie6中定位绝对定位。

```
.ie6 .your-selector {
    position:absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:31:17.813

通常，要让 IE6 正确呈现，页面上的*所有*块都应该`hasLayout`启用。我通常（大约在 2 年前的某个时候）通过`height: 1px`在个人 IE6 样式表中使用或使用“star”hack 来实现这一点：

```
/* hasLayout is now on in IE6 for elements having `example` class. */
* HTML .example {height: 1px; } 
```

但是 IE6 目前不值得*任何*努力（我从 2011 年起根本不支持它，建议大家也这样做）。

# c# - 导航时的 WPF C# NullReferenceException

> ID：13425317
> 
> 赞同：-1
> 
> 时间：2012-11-16T22:23:38.800
> 
> 标签：c#, .net

我有一个简单的问题。我点击了一项服务，如果没有可用的互联网，我想导航到离线页面。我用来导航的代码适用于其他页面。但是对于这个页面，我有以下代码，它给出了一个错误，即

> 你调用的对象是空的。

请指导我。提前致谢。

```
 InitializeComponent();
            WebRequest.Create("http://localhost:45207/MyAPIWebService.svc/getUser");
            try            
            {
                HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            }
            catch 
            {
                offlineModePage OFMPage = new offlineModePage();
                this.NavigationService.Navigate(OFMPage);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:38:27.680

好像你还没有设置请求试试这个：

```
WebRequest request=WebRequest.Create("http://localhost:45207/MyAPIWebService.svc/getUser";
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

您还应该捕获特定的异常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T09:15:59.540

最后我发现了问题。我没有关闭父窗口。

两个步骤，我得到了它的工作。

步骤1：

```
(this.Parent as Page).Close(); 
```

第2步：

导航到新页面

```
this.NavigationService.Navigate(new Uri("offlineModePage.xaml", UriKind.Relative)); 
```

希望这会对某人有所帮助:)

# c# - stringlength属性errormessage取什么参数？

> ID：13425320
> 
> 赞同：39
> 
> 时间：2012-11-16T22:23:49.057
> 
> 标签：c#, asp.net-mvc-4, data-annotations

在 MVC4 模板中，使用的数据注释属性之一是 stringlength。

例如：

```
[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)] 
```

哪些参数 {0}、{1}、{2}（更多？）是合法的？

编辑：更具体地说，我可以从示例和反复试验中看到可能性是什么，但我希望看到一些硬文档。

[我在StringLengthAttribute 文档](http://msdn.microsoft.com/en-us/library/cc679251.aspx)中找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-16T22:26:00.207

`{0}`index 是属性的显示名称，`{1}`是`MaximumLength`，`{2}`是`MinimumLength`。因此，您的错误消息将被格式化为`"The Foo must be at least 6 characters long."`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-17T11:07:12.793

我也没有看到任何文档，但是`FormatErrorMessage`方法`StringLengthAttribute`看起来像这样：

```
public override string FormatErrorMessage(string name)
{
    EnsureLegalLengths();
    string format = ((this.MinimumLength != 0) && !base.CustomErrorMessageSet) ? DataAnnotationsResources.StringLengthAttribute_ValidationErrorIncludingMinimum : base.ErrorMessageString;
    return String.Format(CultureInfo.CurrentCulture, format, new object[] { name, MaximumLength, MinimumLength });
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-08-15T08:52:42.187

在我开始获得一些可靠的线索之前，比预期更长的 Google 搜索将我带到了这个老话题，所以我把它放在这里，希望它可以帮助其他处于同样情况的人：

检查 MS 在 GitHub 上发布的[StringLengthAttribute](https://github.com/Microsoft/referencesource/blob/master/System.ComponentModel.DataAnnotations/DataAnnotations/StringLengthAttribute.cs)代码确认了 FormatErrorMessage 方法中的逻辑：

```
// it's ok to pass in the minLength even for the error message without a {2} param since String.Format will just
// ignore extra arguments
return String.Format(CultureInfo.CurrentCulture, errorMessage, name, this.MaximumLength, this.MinimumLength); 
```

因此，“0”、“1”和“2”相应地对应于“名称”（属性）、“最大长度”和“最小长度”。

我敢打赌，同样的方法可以应用于所有其他验证属性，以相应地检查它们的格式参数；否则，我无法找到有关此信息的任何其他文档。

# java - 每个代理而不是每个路由的 Apache HttpClient 4 个持久连接

> ID：13425327
> 
> 赞同：3
> 
> 时间：2012-11-16T22:24:11.647
> 
> 标签：java, proxy, apache-httpclient-4.x, persistent, apache-httpcomponents

我的理解是，ClientConnectionManager 的所有实现都基于路由保持连接。如果涉及代理，这将导致基本上没有持久连接。例如，HttpClient 需要通过具有固定 IP 的 HTTP 代理访问 1000 个不同的域，它必须与代理建立至少 1000 个连接，而不是创建到代理的 1 个持久连接并将其重用于 1000 个请求。

我正在模拟多个用户访问数千个域（假域，所有 dns 解析为几个 IP，解析发生在代理之后，因此与 HttpClient 无关）。当我增加用户和域的数量时，上述行为很快耗尽了 localhost 中的所有可用端口，结果发生地址绑定错误。

有没有办法让 HttpClient 在代理的基础上保持连接？IE。HttpClient 仅维护与给定代理的指定数量的连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:30:51.827

经过深入研究，Apache HttpClient 似乎不支持这种开箱即用的行为。我必须修改 HttpClient/HttpCore 源才能拥有此功能，即。仅基于 localAddress 和 First Proxy 地址维护持久连接。

我修改的类是：

org.apache.http.conn.routing.HttpRounte.java 和 org.apache.http.conn.routing.BasicRouteDirector.java。

基本上我更改了 HttpRoute 中的 hashCode 和 equal 方法（用作持久连接查找的哈希表的键），因此如果涉及代理，查找不会考虑目标地址。

上述修改的初步测试结果显示，在我的场景中，请求吞吐量提高了大约 100 倍。到目前为止，它对我来说很好。

凯文

# django - 如何告诉 Django 不要从 request.POST 数据中转义 html？

> ID：13425330
> 
> 赞同：0
> 
> 时间：2012-11-16T22:24:34.983
> 
> 标签：django

我使用 ajax 来获取 svg 图形和 django 转义所有 html 标志......我怎样才能防止这种情况并获取原始数据？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:44:51.617

如果**您的视图**正在输出您的**svg**，那么如果您将其作为**字符串**提供，它就会对其进行转义。但是**svg 等于 xml**这意味着您可以**使用 django 模板来提供您的 svg**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:31:38.123

如果您的意思是 django 在响应中转义 HTML，那么它很简单 - 将任何 HTML 字符串包装在`mark_safe`(from `from django.utils.safestring import mark_safe`)

像这样：

```
def myview(request):
    html_data = "<h1>Hello world!</h1>"
    return render(request, "template.html", {"html": mark_safe(html_data)}) 
```

# javascript - ECMAScript 6 中全局范围内的 `this`

> ID：13425333
> 
> 赞同：5
> 
> 时间：2012-11-16T22:25:06.770
> 
> 标签：javascript, ecmascript-5, ecmascript-harmony

我自己尝试过查看 ES6 草案，但我不确定在哪里查看：

有人可以告诉我`this`在 ES6 中是否一定指的是全局对象？此外，该对象是否具有与全局范围相同的成员？

如果你能回答 ES5，那也会很有帮助。

我知道`this`在全局范围内是指浏览器和大多数其他 ES 环境中的全局对象，例如 Node.js。我只想知道这是规范定义的行为，还是实现者添加的扩展行为（以及这种行为是否会在 ES6 实现中继续存在）。此外，全局对象是否总是与全局范围相同？还是有区别？

* * *

**更新 - 为什么我想知道：**我基本上是想弄清楚如何在 ES5 和 6 中可靠地获取全局对象。我不能依赖，`window`因为那是特定于浏览器的，我也不能依赖，`global`因为那是特定于环境的像节点。我知道`this`Node 可以`module`在模块范围内引用，但我认为它仍然是`global`在全局范围内引用。我想要一种跨环境的 ES5 & 6 兼容方式来获取全局对象（如果可能的话）。似乎在我所知道的`this`全局范围内的所有环境中都这样做，但我想知道它是否是实际规范的一部分（并且在我可能不熟悉的任何环境中都如此可靠）。

我还需要知道规范中的全局范围和全局对象是否相同。换句话说，全局范围内的所有变量都与`globalobject.variable_name`?

* * *

**更新 2 - 我正在尝试做的事情：**

我[为 ES5 环境开发了一些 ES6 垫片](https://github.com/Nathan-Wall/inHarmony)。我想知道 (1) 检查 ES6 内置插件是否已经存在，以便在可能的情况下可以使用它们而不是我的垫片，以及 (2) 如果内置 - ins 尚不存在。

目前我正在遵循这种模式：

```
(function() {

    // Indirect eval to run in global scope.
    // (We get whatever "this" is in global scope, hoping that it's the global object...
    // Whether this line does what I want it to is the crux of my question.)
    var global = (0, eval)('this');

    // If Symbol does not already exist in global scope,
    if (!global.Symbol)

        // Then add Symbol to global scope.
        global.Symbol = (function() {

            // ...
            // Return my Symbol shim

        })();

})(); 
```

(1) 还有其他一些可能性，但归根结底，我需要一种方法来在全局范围内添加一些东西而不`var`在全局范围内使用（因为在我检查它们之前会覆盖内置函数，因为`var`提升 [至少在幼稚的情况下，也许我也可以间接`eval`声明`var`？]）。我希望我的代码能够在严格模式下运行，从而使问题更加复杂。

我发现，根据 ES5 规范，间接`eval`执行全局范围内的代码。所以我至少能够做到这一点。我的问题是，如果我进入`this`全局范围，（1）检查该对象的属性是否会让我知道全局范围中是否已经存在内置？(2) 向该对象添加属性是否允许我将变量添加到全局范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T09:54:03.923

是的，`this`在全局范围内将继续引用 ES6 中的全局对象。（通常，ES6 应该是完全向后兼容的，即任何保证在 ES5 中工作的代码也应该在 ES6 中工作）。

然而，“全局范围”的概念将不再与 ES6 中的全局对象相同。它引入了新的词法范围的声明形式（`let`, `const`, `class`, `module`, 等等）。上次会议的结论是，这些都不会作为全局对象的属性出现。这有多种技术和方法的原因，但最重要的是最好完全避免直接使用全局对象（这一直是正确的，但在 ES6 中更是如此）。

有什么特定的东西需要全局对象吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T05:32:00.693

大部分是的。

传入`this`任何非对象（或非集合`this`）将引用全局对象：

```
(function( global ){ /* do stuff! */ }(this)); 
```

此行为旨在保留在 ES6 中（用于可理解的向后兼容性问题）。这就是我所知道的大多数多平台（浏览器/节点）插件访问全局对象的方式。例如：[https ://github.com/documentcloud/underscore/blob/master/underscore.js#L12](https://github.com/documentcloud/underscore/blob/master/underscore.js#L12)

虽然，服务器上的插件确实只能`this`作为`module`（导出）访问。但是，这就是你在 node.js 中想要的。您的全局空间永远不会被清理（除非手动完成，或者在服务器重新启动时）。所以它在所有客户端连接之间共享；将任何东西分配给全局空间确实不是一个好主意。

* * *

`this`javascript“版本”之间处理方式的唯一显着区别是 in `strict mode`，它将引发错误的是 if `null`or`undefined`被传递给`call`or `apply`or `bind`（在 的位置`this value`）。在非严格模式下，`this`只被强制到全局对象。

```
"use strict";
foo.apply(null); // Throw error 
```

希望这有帮助！

# android - 如何根据自定义布局中另一个视图的动画更改视图的可见性？

> ID：13425337
> 
> 赞同：1
> 
> 时间：2012-11-16T22:25:42.417
> 
> 标签：android

我创建了一个名为 WheelLayout 的自定义 RelativeLayout，其中包含两个 ImageView。第一个视图 WheelView 是一个自定义视图，它会调用 RotateAnimation 几次。

WheelView 有一个名为 WheelListener 的自定义接口。

```
 public interface WheelListener {
    public void wheelStarted();
    public void wheelStoppedOnSlice(int sliceNum);
 } 
```

在 WheelView 中，我实现 Animation.AnimationListener 如下：

```
@Override
public void onAnimationStart(Animation animation) {
    mListener.wheelStarted();
}

@Override
public void onAnimationEnd(Animation animation) {
        mListener.wheelStoppedOnSlice(mCurrentSlice);
}

@Override
public void onAnimationRepeat(Animation animation) {
} 
```

其中 mListener 是 WheelListener。

WheelLayout 像这样实现 WheelListener：

```
@Override
public void wheelStarted() {
   mSliceImage.setVisibility(View.GONE);
}

@Override
public void wheelStoppedOnSlice(int sliceNum) {
    mSliceImage.setBackgroundResource(mSlices[sliceNum]);
    mSliceImage.setVisibility(View.VISIBLE);
} 
```

当 WheelView 动画时，我希望看到 mSliceImage 消失并且 WheelView 继续其动画完成。相反，两者都不会发生。我的 WheelView 没有动画并且 mSliceImage 没有消失。

但是，在动画完成后，我*确实*看到 mSliceImage 更改了它的背景资源。

我也尝试了同样的事情，其中​​ mSliceImage*不是*自定义布局的孩子，并且效果很好。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:09:11.773

问题是你使用“View.GONE”。你应该使用“View.INVISIBLE”

尝试这个

```
 @Override
  public void wheelStarted() {
     mSliceImage.setVisibility(View.INVISIBLE);
  } 
```

# android - 如何在 android 中仅设置 EditTextPreference 的数值？

> ID：13425338
> 
> 赞同：49
> 
> 时间：2012-11-16T22:25:46.087
> 
> 标签：android

如何在 android 中仅设置 EditTextPreference 的数值。我希望用户输入端口号，但不确定如何将限制放在那里

我正在使用此代码，用户可以输入任何字符串。只想将用户限制为至少数字

```
 <EditTextPreference 
    android:defaultValue="4444" 
    android:key="port" 
    android:title="Port" 
    android:dependency="service_on"        
    /> 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-11-16T22:29:00.563

EditTextPreference 小部件应采用与常规 EditText 相同的属性，因此请使用：

```
android:inputType="number" 
```

* * *

或更具体地使用：

```
android:inputType="numberDecimal"
android:digits="0123456789" 
```

因为您只想将输入限制为端口号。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2019-06-25T14:01:56.107

我使用 androidX 库，因为该库可以自定义 EditTextPreference 对话框的输入类型。AndroidX 是对原始 Android 支持库的重大改进，因此建议大家使用这个库。您可以在此处阅读有关 AndroidX的更多信息[。](https://developer.android.com/jetpack/androidx)

这是我在 onCreatePreference 方法中使用 EditTextPreference 的代码：

```
 @Override
    public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {
        setPreferencesFromResource(R.xml.preference, rootKey);

androidx.preference.EditTextPreference editTextPreference = getPreferenceManager().findPreference("use_key_from_editTextPreference_in_xml_file");
editTextPreference.setOnBindEditTextListener(new androidx.preference.EditTextPreference.OnBindEditTextListener() {
            @Override
            public void onBindEditText(@NonNull EditText editText) {
                editText.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_SIGNED);

            }
        });

       } 
```

使用此代码并单击 editTextPreference 后，将弹出对话框，您的键盘输入类型将仅为数字。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2019-04-01T17:58:08.103

使用`androidx.preference`库，自`androidx.preference:preference:1.1.0-alpha02`2018年12月17日发布以来，该[库](https://developer.android.com/jetpack/androidx/releases/preference#1.1.0-alpha02)增加了`EditTextPreference.OnBindEditTextListener`界面，允许您自定义对话框绑定后显示在相应对话框中的EditText。

所以在这种情况下，你所要做的就是在下面添加 Kotlin 代码。

```
val editTextPreference = preferenceManager.findPreference<EditTextPreference>("YOUR_PREFERENCE_KEY")
editTextPreference.setOnBindEditTextListener { editText ->
                editText.inputType = InputType.TYPE_CLASS_NUMBER
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-04-25T19:52:23.793

带有十进制数字输入的 EditTextPreference (Kotlin)：

```
var myEditTextPreference : EditTextPreference? = findPreference("myEditTextPreferenceKey")

    myEditTextPreference?.setOnBindEditTextListener { editText ->
        editText.inputType = InputType.TYPE_CLASS_NUMBER or InputType.TYPE_NUMBER_FLAG_DECIMAL

    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-17T11:33:04.897

*使用getEditText*访问*EditTextPreference 的 EditText*方法并设置*输入类型*

 **```
EditTextPreference pref = (EditTextPreference) findPreference("pref_edit_text");
if (pref != null) {
    pref.getEditText().setInputType(InputType.TYPE_CLASS_NUMBER);
} 
```

不幸的是官方库*android.support.v7.preference*隐藏了对*getEditText*的访问，但是有一个[修复库](https://github.com/Gericop/Android-Support-Preference-V7-Fix)可以解决这个问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-10-09T11:44:05.590

**对我有用的 Kotlin 代码：**

这里的“editTextPrefSleepTime”是EditTextPreference的一个键，我在xml文件上设置的。

```
 private var editTextPrefSleepTime: EditTextPreference? = null

     override fun onStart() {
         super.onStart()
         editTextPrefSleepTime = preferenceManager.findPreference("editTextPrefSleepTime")
         editTextPrefSleepTime?.setOnBindEditTextListener {
             it.inputType = InputType.TYPE_CLASS_NUMBER
         }
     } 
```**

# iphone - iOS - 试图了解电影的运作方式

> ID：13425340
> 
> 赞同：0
> 
> 时间：2012-11-16T22:25:50.640
> 
> 标签：iphone, ios, ipad, avcapturesession

我正在开发一个应用程序，该应用程序必须在电影录制期间严格控制时间流。

苹果表示，iPhone 5 可以拍摄**高达**30 fps 的高清视频。如果拍摄视频并在 quicktime 上播放，我会看到可变的 FPS，有时会达到 30 fps，但同时 quicktime 将视频报告为 29.75 fps。

据我了解，对于每一秒的视频，应该显示整数帧，而不是小数。我首先认为这可能与丢帧有关。然后我决定设计一种测量丢帧的方法，并意识到对于每一秒的视频，iPhone 会从 1 帧下降到 4 帧。还发现，每次丢帧时，iPhone 都会再次复制最后一帧以填补空白。所以理论上，丢帧不会对移动的总帧数产生影响。

所以，这是我的问题。这个 29.75 fps 说明了什么？这个数字是如何获得的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:02:05.073

不是每秒显示 x 帧，而是每帧显示 1/x 秒。NTSC（美国、日本和其他国家的电视标准）以 29.97fps 运行。因此，在绘制下一帧之前，每一帧都会显示超过 3/100 秒。因此，在您的情况下，在显示下一帧之前，每一帧都会显示大约 0.0336 秒。

# ruby-on-rails - rails模型保存未提交，但没有错误

> ID：13425341
> 
> 赞同：1
> 
> 时间：2012-11-16T22:25:55.600
> 
> 标签：ruby-on-rails

导轨 3.2.8

我试图创建一个简单的多态 Log 模型作为可记录的。该表只有一个字段 log，它被设想为只是一个时间戳，并且一条短消息将附加到 has_one 关系。

我的问题是创建记录后，我似乎无法获取要附加和保存的消息。调试显示它已提交并且记录已更改，但当它重新加载时，它会恢复到原始版本。我一直在研究这种方式很长时间，现在是时候看看其他人是否看到了一些愚蠢的东西。

模型的相关部分：

```
class Log < ActiveRecord::Base
  belongs_to :logable, :polymorphic => true
  attr_accessible :logable_id, :log, :logable_type

  def set_log(entry)
    self.log << "\r\n#{Time.now.to_s} - #{entry}"
    self.save    
  end
end

class Candidate < ActiveRecord::Base
  attr_accessible :citizen_id, :commitment_id, :current_stage, :current_status
  has_one :log, :as => :logable

  def append_log(entry)
    if self.log.nil?
      self.build_log( :log => "#{Time.now.to_s} - Log Created")
      self.log.save
    end
    self.log.set_log(entry)
  end
end 
```

下面是我获得候选人的控制台日志，查看日志（仅限原始创建的条目），附加一个条目，显示在实例中所做的更改。重新加载日志记录，更改就消失了。

```
1.9.2-p136 :001 > c = Candidate.find(1)
  Candidate Load (15.1ms)  SELECT "candidates".* FROM "candidates" WHERE "candidates"."id" = ? LIMIT 1  [["id", 1]]

1.9.2-p136 :002 > c.log
  Log Load (0.1ms)  SELECT "logs".* FROM "logs" WHERE "logs"."logable_id" = 1 AND "logs"."logable_type" = 'Candidate' LIMIT 1
 => #<Log id: 1, logable_id: 1, logable_type: "Candidate", log: "2012-11-16 15:23:49 -0600 - Log Created", created_at: "2012-11-16 21:23:49", updated_at: "2012-11-16 21:23:49"> 

1.9.2-p136 :003 > c.append_log("Add entry")
LOG BEFORE 2012-11-16 15:23:49 -0600 - Log Created
   (0.1ms)  begin transaction
   (0.1ms)  commit transaction
LOG APPENDED 2012-11-16 15:23:49 -0600 - Log Created
2012-11-16 16:05:53 -0600 - Add entry
NOTE Log field has been appended
 => nil 

1.9.2-p136 :004 > c.log
 => #<Log id: 1, logable_id: 1, logable_type: "Candidate", log: "2012-11-16 15:23:49 -0600 - Log Created\r\n2012-11-16...", created_at: "2012-11-16 21:23:49", updated_at: "2012-11-16 21:23:49">

NOTE Now reload the log record
1.9.2-p136 :005 > l = Log.find(1)
  Log Load (0.3ms)  SELECT "logs".* FROM "logs" WHERE "logs"."id" = ? LIMIT 1  [["id", 1]]
 => #<Log id: 1, logable_id: 1, logable_type: "Candidate", log: "2012-11-16 15:23:49 -0600 - Log Created", created_at: "2012-11-16 21:23:49", updated_at: "2012-11-16 21:23:49"> 
NOTE The add entry line is gone! 
```

我不知道这是否是 has_one 关系的问题，但即使我只使用日志记录调用 set_log，at 似乎也会附加，但重新加载没有更改。

难倒史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:36:53.177

尝试

```
self.save! 
```

如果有任何错误，应该会引发错误

你也可以提出自己的异常或做魔术

```
if !self.save
  raise "attempt to save failed"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:34:18.007

你显示所有的rails日志吗？在您致电后，`c.append_log`我希望看到一条`UPDATE`SQL 日志条目，但没有。这表明`self.save`in`set_log`失败了。吐出来`.errors`，`c.log`看看验证是否失败......

原来这是因为`<<`不旋转脏属性位。

更改`<<`为`+=`应该可以解决问题。

`self.log += "\r\n#{Time.now.to_s} - #{entry}"`

# jquery - 用jquery在x秒后淡出div

> ID：13425347
> 
> 赞同：24
> 
> 时间：2012-11-16T22:26:34.517
> 
> 标签：jquery, timer, delay

我在加载页面时不显示的 div 淡入淡出：

```
 $('#overlay').fadeIn('fast');
    $('#box').fadeIn('slow'); 
```

我会在 x 秒后执行此指令，对 div 进行淡出：

```
$('#overlay').fadeOut('fast');
$('#box').hide(); 
```

我该怎么做？实际上，fadeOut 是在单击按钮时完成的。

脚本在这里：[http](http://clouderize.it/cookie-localstorage/a.php) ://clouderize.it/cookie-localstorage/a.php 当我单击另一个图像时出现的 div 将在 x 秒后消失。非常感谢。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-16T22:29:11.837

该[`.delay`](http://api.jquery.com/delay/)方法专为您所描述的内容而构建：

```
$('#overlay').fadeIn('fast').delay(1000).fadeOut('fast');
$('#box').fadeIn('slow').delay(1000).hide(0); 
```

[http://jsfiddle.net/SUBnz/1/](http://jsfiddle.net/SUBnz/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:27:57.357

你可以使用`setTimeout()`

```
var xSeconds = 1000; // 1 second

setTimeout(function() {
   $('#overlay').fadeOut('fast');
   $('#box').hide();
}, xSeconds); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-11T13:18:24.217

也许现在回复为时已晚，但我找到了一种对我有帮助的方法。

$("#overlay").fadeTo(10000,1).fadeOut(5000);

请参阅此链接 [http://juristr.com/blog/2009/12/howto-fade-out-div-after-some-seconds/](http://juristr.com/blog/2009/12/howto-fade-out-div-after-some-seconds/)

它允许您设置一个时间，例如您希望 div 何时消失以及以何种速度消失。

# c# - 表达 > 使用 It.IsAny 总是返回 true

> ID：13425348
> 
> 赞同：5
> 
> 时间：2012-11-16T22:26:37.520
> 
> 标签：c#, unit-testing, generics, moq, expression-trees

我正在尝试创建一个通用测试类来测试我的通用控制器。除了这个，一切都很好：我有一个这样的方法：

```
private T GetSingle(Expression<Func<T, bool>> expression) 
```

我正在尝试像这样设置测试：

```
var Guids = new[] { Guid.NewGuid(), Guid.NewGuid() };
var items = Guids.Select(x => new T {Id = x});
var mock = new Mock<IRepository<T>>();
mock.Setup(m => m.GetSingle(
    It.IsAny<Expression<Func<T, bool>>>()))
   .Returns(new T()); 
```

并像这样执行测试：

```
var value = Repository.GetSingle(x=> x.Id == Guid.NewGuid()); 
```

这*总是*返回一个新的 T。

我的设置错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T22:36:47.437

您指示 Moq 返回相同的确切实例（在本例中为`new T()`），无论提供什么表达式，任何时候`GetSingle`都会被调用。您真正想要的是它针对 调用该表达式`items`：

```
mock.Setup(m => m.GetSingle(It.IsAny<Expression<Func<T, bool>>>()))
   .Returns<Expression<Func<T, bool>>>(expression => items.AsQueryable().Single(expression)); 
```

# javascript - Ajax 和表单身份验证

> ID：13425355
> 
> 赞同：5
> 
> 时间：2012-11-16T22:27:05.997
> 
> 标签：javascript, ajax, jsp, web-applications, weblogic

我正在尝试在我的 ajax 应用程序中实现表单身份验证。我遇到的问题是，当会话到期时，我得到 302 代码，该代码将我重定向到我在 web.xml 中指定的登录页面（并且将整个应用程序刷新到登录页面时一切都搞砸了）。

我想要做的是获得一个“未通过身份验证”（401）代码，然后在弹出窗口中显示登录表单，当登录成功时继续我正在做的事情。

这是正在发生的事情的图片： ![http://docs.oracle.com/javaee/1.4/tutorial/doc/images/security-formBasedLogin.gif](../Images/43afd3d65420193055d6adc8075e70ee.png)

和文档 [http://docs.oracle.com/javaee/1.4/tutorial/doc/Security5.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/Security5.html)

基本上，我想显示弹出窗口而不是重定向到登录页面，然后不重定向到资源，而是以 AJAX 方式进行更新。据我了解，由于无法避免重定向，因此不能仅在客户端完成（请参见此处：[重定向信息](https://stackoverflow.com/questions/8238727/how-to-prevent-ajax-requests-to-follow-redirects-using-jquery)），我需要在服务器上编写某种逻辑以防止重定向，请参见此处有关在 IIS 中执行此操作的详细信息：[IIS 实现](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)

PS 到目前为止：[http](http://www.oracle.com/technetwork/articles/entarch/session-lifecycle-096133.html) ://www.oracle.com/technetwork/articles/entarch/session-lifecycle-096133.html看起来是最有希望的实现方式。该类已弃用，但我找不到新的类，并认为这是为 Weblogic 做的唯一方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:15:43.160

这不是一个简单的方法，但它仍然有效

您的页面中有一个由用户填写的表单。

用户点击提交按钮。

一个ajax 请求被发送到服务器。

服务器端实现可以检查会话是否存在。因此您可以发送响应代码 401..(response.setStatus());

可以使用 ajax 在客户端检查此 401 --- xhr.status

如果响应为 401，您可以显示登录表单并隐藏当前表单。使用js和css。

用户填写登录详细信息并单击提交..

您可以对该登录请求的状态进行相同的服务器端检查和客户端检查。

如果登录成功，那么您可以使用 ajax 或 js 提交第一个表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:00:57.333

您可能需要使用[weblogic.xml 部署描述符元素中描述的 servlet 身份验证过滤器](http://otndnld.oracle.co.jp/document/products/wls/docs90/webapp/weblogic_xml.html#1067853)

以下教程可能会对您有所帮助：
[oracle Servlet 身份验证过滤器](http://docs.oracle.com/cd/E21764_01/web.1111/e13718/servlet.htm)
[使用 servlet 过滤器进行用户身份验证](http://brendangraetz.wordpress.com/2010/06/17/use-servlet-filters-for-user-authentication/)
[编写 Servlet 过滤器](http://www.nakov.com/inetjava/lectures/part-3-webapps/Writing-Servlet-Filters.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:31:24.417

您需要**推**送到 page 而*不是 poll*。所以你需要连接 Strophe 和你的会话处理程序。当会话到期时，信号会发送到在您的 Web 应用程序中运行的 Strophe 实例，之后很容易进行弹出或其他操作。对于所有实时的东西，我正在使用 Strophe！

[这是](http://professionalxmpp.com/)关于这本书的书，这是[Strophe 的链接](http://strophe.im/)，也是 php [xmpp 类](http://goo.rs/H9ksQu)的链接。

您需要几天时间才能弄清楚这一点，但是这几天花得很好！如果您仔细阅读书籍并查看示例，只需了解基本的 javascript/jquery，您将能够开发强大的 Web 应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T16:09:08.200

您可以使用对您的服务器的 ajax 请求进行心跳检查，以检查任何需要经过身份验证才能获得它的资源。如果您无法接收到此资源，则意味着您没有登录..因此您可以发送另一个身份验证请求继续你的渲染..

看到这篇文章.. [http://ajaxpatterns.org/archive/Heartbeat.php](http://ajaxpatterns.org/archive/Heartbeat.php)

所以你的身份验证检查程序将被实施..

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-17T08:36:23.667

我知道您正在尝试对您的 ajax 应用程序进行 FORM 身份验证，但它**真的**需要吗？

BASIC 身份验证对 ajax 请求更简单、更透明，因为它由浏览器处理，而不是由您的应用程序处理。但我承认/理解弹出窗口很丑陋。

# java - 从 10000 个 ascii 字符串返回字符串子集

> ID：13425358
> 
> 赞同：6
> 
> 时间：2012-11-16T22:27:20.163
> 
> 标签：java, algorithm, substring

我的大学即将结束，所以我已经开始准备面试以获得工作，而我在准备面试时遇到了这个面试问题

> 1.  您有一组 10000 个 ascii 字符串（从文件加载）
> 2.  从标准输入输入一个字符串。
> 3.  编写一个伪代码，返回（到标准输出）（1）中的字符串子集，其中包含与（2）中的输入相同的不同字符（无论顺序如何）。优化时间。
> 4.  假设需要重复调​​用此函数。初始化字符串数组一次并存储在内存中是可以的。请避免需要遍历所有 10000 个字符串的解决方案。

谁能给我一个通用的伪代码/算法之类的东西如何解决这个问题？我正在挠头思考解决方案。我最熟悉Java。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T22:48:36.610

这是一个 O(1) 算法！

初始化：

*   对于每个字符串，对字符进行排序，删除重复项 - 例如“trees”变为“erst”
*   使用排序的字符将排序的单词加载到[trie](http://en.wikipedia.org/wiki/Trie)树中，将原始单词的引用添加到存储在遍历的每个节点的单词列表中

搜索：

*   对输入字符串进行排序，与源字符串的初始化相同
*   使用字符跟随源字符串 trie，在结束节点处，返回那里引用的所有单词

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:54:43.757

他们说优化时间，所以我想我们可以随意滥用空间。

在这种情况下，您可以对 10000 个字符串进行初始传递，并构建从 10000 中存在的每个唯一字符到它们的索引（而不是一组它们的索引）的映射。这样你就可以问映射问题，哪些集合包含字符'x'？调用这个映射 M> ( order: O(nm) 当 n 是字符串的数量并且 m 是它们的最大长度)

为了再次及时优化，您可以将 stdin 输入字符串减少为唯一字符，并将它们放入队列 Q 中。（顺序 O(p)，p 是输入字符串的长度）

开始一个新的不相交集，比如说 S。然后让 S = Q.extractNextItem。

现在您可以遍历其余的唯一字符并找到包含所有这些字符的集合。

While (Q 不为空) (循环 O(p)) {

S = S intersect Q.extractNextItem （接近 O(1) 取决于您对不相交集的实现）

}

瞧，返回 S。

总时间：O(mn + p + p*1) = O(mn + p)

（这里还是凌晨，希望时间分析是对的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T23:09:09.467

正如波西米亚人所说，特里树绝对是要走的路！

这听起来像是在电话上查找地址簿的方式。开始输入数字，然后根据数字表示以及该数字将代表的三个（或者实际上更多，如果使用国际字符）字母中的任何一个来过滤地址簿。

# windows-phone - Microsoft Phone HTC 和开发

> ID：13425360
> 
> 赞同：-1
> 
> 时间：2012-11-16T22:27:23.910
> 
> 标签：windows-phone, windows-phone-8

我听说过很多关于 MS Phone HTC 的消息，想知道是否有开发者使用过它们。如果是这样，在没有电话编程经验的情况下，开发这款设备的第一步是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T04:18:35.070

您可能想要注册 Microsoft 的[Generation App](http://aka.ms/8in30)计划 - 这是一套免费的分阶段培训和资源，可引导您完成设计、开发、获利和提交应用程序的过程。它本质上是通过每日电子邮件发送的一组精选链接、文档、示例等。

我知道你提到了 HTC，但诺基亚也有一个很棒的开发者计划，他们正在[http://dvlup.com](http://dvlup.com)推出；它目前处于有限预览阶段，但您可以提交您的电子邮件并在它完全打开时收到通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T00:19:23.133

很难说，从哪里开始。首先访问此页面并**下载+安装 WP8 SDK：**
[https](https://dev.windowsphone.com/en-us/develop)
://dev.windowsphone.com/en-us/develop 注意您需要**Windows 8 x64 Pro**和更新的 CPU 来运行 SDK 和模拟器（核心建议使用 -i5 或更高版本）。

然后我会推荐阅读一些**关于 C# 开发的书**和/或在这里开始测试**SDK 提供的各种示例**：http :
[//msdn.microsoft.com/en-us/library/ff431744](http://msdn.microsoft.com/en-us/library/ff431744(v=vs.92).aspx)
(v=vs.92).aspx 和也在这里：
[http ://code.msdn.microsoft.com/wpapps/](http://code.msdn.microsoft.com/wpapps/)

这是 Charles Petzold 的一本关于 C# 的不错的免费电子书：http:
[//www.charlespetzold.com/dotnet/](http://www.charlespetzold.com/dotnet/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T22:43:34.773

至于设备，我拥有 HTC 的 8x，我正在成功地开发应用程序。设备选择取决于您，无论您更喜欢什么。

至于开始编程的资源。这取决于您是否有 .NET 编程背景。如果你这样做了，那么你真正需要的只是在[Windows Phone Dev Center](http://dev.windowsphone.com/en-us)上。只要有一点耐心和热情，你就会成功:)

买一本好书也是值得的，因为它会指导你完成整个过程。

# xpages - 显示来自外部 REST 服务的值

> ID：13425362
> 
> 赞同：1
> 
> 时间：2012-11-16T22:27:24.480
> 
> 标签：xpages

我想在字段中输入一个值并从 REST 服务提供者那里检索相关信息。我应该如何在 xpage 中处理这个问题？

例如，输入产品名称应该是对第三方提供商的 REST 调用的输入，我已经可以访问并以 JSON/XML 格式获取所有相关信息。我查看了 xpage 中的 REST 控件，但不确定如何使其查看第三方 URL。它似乎只看多米诺骨牌。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T22:28:37.210

扩展库中的 REST 控件是提供 REST 服务，而不是消费。Dojo 具有使用 REST 服务的方法，即 xhrGet 和 xhrPost 方法。这是[xhrGet](http://dojotoolkit.org/reference-guide/1.6/dojo/xhrGet.html)的链接。然后使用您正在谈论的字段中的值来构建您的第 3 方 REST 服务的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:28:51.273

@Keithstric 是对的。使用 Dojo 从其他 URL 读取 REST。您可能需要使用[Domino 代理](http://www.ibm.com/developerworks/lotus/library/inotes-full/index.html)来遵守 JavaScript 同源策略。

# jquery - JQUERY 将 Textarea 光标设置为文本结尾

> ID：13425363
> 
> 赞同：19
> 
> 时间：2012-11-16T22:27:36.917
> 
> 标签：jquery, html, css

[http://jsfiddle.net/adamadam123/gEEVM/4/](http://jsfiddle.net/adamadam123/gEEVM/4/)

我正在构建一个允许用户添加表情符号的聊天系统。

就像上面的 jsfiddler 示例一样，我在 textarea 中获取当前文本，将其与选择的表情符号组合，然后将此文本添加回 textarea。

```
$(function() {
    var data = $('textarea').val();
    var emoticon = ':)';
    $('textarea').val(data + emoticon);
    $('textarea').focus();
}); 
```

问题是当我将焦点设置回文本区域时，光标位于文本的开头。

如何将光标设置到文本的末尾 - 以允许进一步输入？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-16T22:31:48.387

您可以做的一些简单的事情是重置文本区域的值：

```
$(function() {
    var data = $('textarea').val();
    var emoticon = ':)';
    $('textarea').focus().val('').val(data + emoticon);
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-16T22:34:52.913

先聚焦，再设定价值。就像这个[JSFiddle](http://jsfiddle.net/gEEVM/5/)

```
$('textarea').focus();
$('textarea').val("New Text"); 
```

另一种方法是在*.focus();之后添加它。*

```
$('textarea').val($('textarea').val() + ' '); 
```

它在文本区域的末尾添加了一个空格，因此集中在末尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-02T22:34:39.643

一个**非常**简单的解决方案。

```
var emoticon = ':)';
var val = $('#textarea').val();
$('#textarea').select().val(val + emoticon); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T22:36:39.230

你应该回顾这个问题：

[jQuery在文本区域中设置光标位置](https://stackoverflow.com/questions/499126/jquery-set-cursor-position-in-text-area)

最优雅的 JQuery 解决方案：

```
$.fn.selectRange = function(start, end) {
    return this.each(function() {
        if (this.setSelectionRange) {
            this.focus();
            this.setSelectionRange(start, end);
        } else if (this.createTextRange) {
            var range = this.createTextRange();
            range.collapse(true);
            range.moveEnd('character', end);
            range.moveStart('character', start);
            range.select();
        }
    });
}; 
```

> 有了这个，你可以做

```
$('#elem').selectRange(3,5); 
```

# assembly - 可变位移

> ID：13425365
> 
> 赞同：3
> 
> 时间：2012-11-16T22:27:55.937
> 
> 标签：assembly, x86, bit-manipulation, bit-shift

我希望将一个寄存器位向左移动 n 次，用另一个寄存器指定。例如，像这样

```
shl    eax, ebx 
```

唯一的问题是第二个操作数不能是寄存器，它必须是立即数。我如何能够将寄存器移位一个在汇编时未知的值？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T22:31:25.277

在 x86 中，您可以在 register 中指定移位计数`cl`。所以`shl eax, cl`是有效的。

```
mov   ecx, ebx
shl   eax, cl 
```

请注意，您只能使用`cl`寄存器，而不是`eax`或任何其他寄存器。

此外，大于 31 的移位计数以 32 为模执行。（不是以操作数大小为模，因此窄移位`shl ax, 20` *可以*将所有位移出并保留目标零。但是，64 位移位用 屏蔽计数`& 63`，因此`shl rax, 32`（或32 in cl) 是可能的。请参阅[英特尔的手册条目`shl`](http://felixcloutier.com/x86/SAL:SAR:SHL:SHR.html))。

* * *

BMI2 指令集扩展支持[使用任何寄存器中的计数进行移位](http://felixcloutier.com/x86/SARX:SHLX:SHRX.html)，并且不会更新 EFLAGS，因此它们对于变量计数更有效：

```
; if BMI2 is supported
shlx   edx, eax, ebx     ; edx = eax << (ebx&31) 
```

它仅在某些 Haswell+ CPU 和 Excavator / Ryzen CPU 上可用，因此您不能在完全可移植的代码中使用它。

# r - 根据另一列中的值计算列均值

> ID：13425367
> 
> 赞同：11
> 
> 时间：2012-11-16T22:28:02.597
> 
> 标签：r

> **可能重复：**
> [R 分组函数：sapply vs. lapply vs. apply。vs. tapply vs. by vs. aggregate vs.](https://stackoverflow.com/questions/3505701/r-grouping-functions-sapply-vs-lapply-vs-apply-vs-tapply-vs-by-vs-aggrega)

我正在使用 R 并且希望对我遇到的问题有所帮助：

我有一个`df`带有列 ID 和列 Emotion 的数据框 ( )。ID 中的每个值对应于 Emotion 中的 40-300 个值（所以它不是一个固定的数字）。我需要计算`Emotion`每个 j in的所有 i 的平均值`ID`。所以这就是数据的样子

```
df$ID = (1, 1, 1, 1, 2, 2, 3)
df$Emotion = (2, 4, 6, 4, 1, 1, 8) 
```

因此均值向量应如下所示：`(4, 1, 8)`

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-16T22:31:34.737

您可以使用`aggregate`

```
ID = c(1, 1, 1, 1, 2, 2, 3)
Emotion = c(2, 4, 6, 4, 1, 1, 8)
df <- data.frame(ID, Emotion)

aggregate(.~ID, data=df, mean)
   ID Emotion
1  1       4
2  2       1
3  3       8 
```

`sapply`也可能有用（这个其他解决方案会给你一个向量）

```
sapply(split(df$Emotion, df$ID), mean) 
1 2 3 
4 1 8 
```

有很多方法可以做到这一点，包括`ddply`plyr 包、data.table 包、和的其他组合，`split`来自reshape2 包。请参阅[此问题](https://stackoverflow.com/questions/12389301/converting-output-of-rs-by-command-to-data-frame/12389349#12389349)以获取更多解决方案。`lapply``dcast`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-16T23:51:40.250

这正是这项工作`tapply`的设计目的。

```
tapply(df$ID , df$Emotion, mean) 
```

# jquery - jquery stop() 所有动画不让延迟 $.when, .promise(), .done() 返回完成？

> ID：13425369
> 
> 赞同：0
> 
> 时间：2012-11-16T22:28:18.330
> 
> 标签：jquery, animation, promise, deferred, control-flow

似乎每 50-100 个 jsfiddle 更新都会引导我到 stackoverflow 社区来帮助解决我创建的新问题！那谢谢啦！

背景：我有几个包含动画的函数，函数要在前一个完成后触发。在一些帮助和研究下，我开始使用 $.when 和 .promise() 来控制这些东西，而不是我最初的非常丑陋的回调字符串和每个函数上的 setTimeouts。

我的困境是：在某些时候，用户可能想要暂停一切并在闲暇时再次恢复。我似乎无法添加此功能！

我可以使用 $('div:animated').stop() 暂停所有动画，但这是暂时的，因为 .promise() 仍然可以解决！有什么办法可以覆盖这种行为？任何重组可能有助于使暂停和恢复更容易实施？

明天我计划沿着将所有动画添加到代理对象队列的路径，但不确定在新对象上创建全局队列将如何与现有结构一起工作。我还打算考虑添加一些布尔值来检查值是否关闭，然后不要调用函数或进行动画处理。我不确定这些解决方案中的任何一个是否是我应该采取的适当方向？

在预览这篇文章之后，我也倾向于学习如何重构我的嵌套开始按钮功能！

任何有关实现暂停和恢复功能的指导将不胜感激。

下面的代码非常简化，每个函数都包含更多元素和动画。

[小提琴在这里](http://jsfiddle.net/twinturbotom/XEBeg/)

JS：

```
 $('#start').click( function() {
    // run a and wait one second, when done run b and wait 1 second...
    a().delay(100).promise().done( function(){
        b().delay(100).promise().done( function(){
            c().delay(100).promise().done( function(){
                d().delay(100).promise().done( function(){
                    e().delay(100).promise().done( function(){
                        f().delay(100).promise().done( function(){
                            alert('all done!');
                        });
                    });
                });
            });
        });
    });

    });

    $('#reset').click( function() {
        $('.box').css({
            top: '0px'
        });
    });
    $('#pause').click( function() {
        $('div:animated').stop();
    });
   function a() {
        return $('.box1').animate({top: '100px'}, 1000, function(){
            $('.box1').animate({top: '50px'}, 1000);        
        });
        return $('.box6').animate({top: '200px'}, 4000);
    }
    function b(){
        return $('.box2').animate({top: '100px'}, 1000);
    }
    function c(){
        return $('.box3').animate({top: '100px'}, 1000, function(){
            $('.box3').animate({top: '50px'}, 1000);        
        });
    }
    function d(){
        return $('.box4').animate({top: '100px'}, 1000);
    }
    function e(){
        return $('.box5').animate({top: '100px'}, 1000, function(){
            $('.box5').animate({top: '50px'}, 1000);        
        });
    }
    function f(){
        return $('.box6').animate({top: '100px'}, 1000);
    } 
```

​ HTML & CSS

```
<button id='start'>animate</button>
<button id='reset'>Reset</button>
<button id='pause'>pause</button>
<div class='boxes'>
    <div class='box box1'></div>
    <div class='box box2'></div>
    <div class='box box3'></div>
    <div class='box box4'></div>
    <div class='box box5'></div>
    <div class='box box6'></div>
</div>​
.boxes{position: relative}
.box{width: 40px; height: 40px; background-color: green; position:absolute;}
.box1{left: 0px;}
.box2{left: 60px;}
.box3{left: 120px;}
.box4{left: 180px;}
.box5{left: 240px;}
.box6{left: 300px;}
​ 
```

**编辑** 您的答案提供了我正在寻找的学习经验；我真的很感激心灵的分享！我的人为示例可能无法充分展示现实世界的问题，因为所提出的答案不允许同时触发多个动画？我不认为至少？例如 box1 和 box2 可能同时移动，或者当 box3 触发时 box6 也会移动。我实现的最初的 VERY UGLY promise 系统使用了许多函数，因为每个函数都由许多动画组成。建议的答案将如何实现？

**EDIT2** 两个答案，charlietfl's 让我可以轻松添加同时触发的辅助功能；很重要。Alnitak 有一种优雅的方式来构造数组并将其应用于动画，这很容易更改动画类型（fadeOut()、fadeIn()）。

所以我试图做的是将两者结合起来，这样我就可以为使用 Alnitaks 数组格式的辅助动画创建一个嵌套数组：

```
['.box1', 'animate', { top:  '50px'}, 1000], 
```

所以简而言之，我仍在研究所有答案，但与 charlietfls's 接近/接近。将 Alnitak 的数组添加到他的数组或将 charlietfl 的嵌套添加到 Alnitak 的数组。

这比我想象的更加激烈；我感谢您的贡献和代码学习....非常翔实！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:38:03.123

允许多个同时动画的 jQuery 方法非常好，但是当您的动画都是连续的时，它就显得过大了。

我建议创建一组动画描述，然后在一个简单的循环中一次调用那些。

每个描述都需要知道要为哪个元素设置动画、要调用哪个函数以及函数参数是什么。

暂停动画只是一个不进行循环的问题：

```
function next() {
    if (!animating) return;

    var a = list.shift();
    if (a) {
        var el = a[0];
        var fn = a[1];
        var args = a.slice(2);
        $.fn[fn].apply($(el), args).promise().done(next);
    } else {
        alert('all done!');
    }
}; 
```

有关演示，请参见[http://jsfiddle.net/alnitak/ANRa3 。](http://jsfiddle.net/alnitak/ANRa3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:04:19.460

而不是使用回调`animate`来调用辅助动画，如果你链接`animate().delay().animate()`你可以返回辅助动画的承诺。

我的解决方案使用嵌套的对象数组，因此您可以轻松地在一个序列中添加任意数量的动画。诀窍是在组内创建一个包含所有承诺的数组，并使用该数组来确定整个动画组何时完成。

样本数据：

```
var animations = [
   /* first group array */
    [ {  "sel": ".box1","main": {"css": {"top": "100px"},"dur": 1000},
         "secondary": {"delay": 100,"css": {"top": "50px"},"dur": 1000    }
        },
        {"sel": ".box2","main": {"css": {"top": "100px"},"dur": 1000}},
       {"sel": ".box4","main": {"css": {"top": "100px"},"dur": 1000}},
      {    "sel": ".box5","main": {"css": {"top": "100px"},"dur": 1000},
            "secondary": {"delay": 100,"css": {"top": "50px"},"dur": 1000    }
        }      
    ],
     /* second group array */
    [ { "sel": ".box3","main": {"css": {"top": "100px"},"dur": 1000},
            "secondary": {"delay": 100,"css": {"top": "50px"},"dur": 1000    }
        },
       {"sel": ".box4","main": {"css": {"top": "100px"},"dur": 1000}}
    ]
]; 
```

JS：

```
var curr = -1;
var paused = false;

function animateBoxes() {
    if (paused) {
        return;
    }
    //curr = (curr + 1 < animations.length) ? curr + 1 : 0;
    curr=curr+1;

    if( !animations[curr]){
        alert('DONE!!');
        return;
    }
    /* array of animation deffereds*/
    var anims = [];

    $.each(animations[curr], function(i, currAnim) {
        var anim = boxAnimate(currAnim);
        anims.push(anim)
    });

    $.when.apply(null, anims).done(function() {
        animateBoxes();
    });
}

$('#start').click(function() {
    paused = false;
    animateBoxes();
});

$('#reset').click(function() {
    curr = -1;
    stopanimation();
    $('.box').css({
        top: '0px'
    });
});
$('#pause').click(function() {
    stopanimation();
});

function stopanimation() {
    paused = true;
    $('div:animated').stop(true, true);

}

function boxAnimate(obj) {

    var $el = $(obj.sel),
        anim;
    if (obj.secondary) {
        /* chain animate & delay to get promise for last effect */
        anim = $el.animate(obj.main.css, obj.main.dur)
                  .delay(obj.secondary.delay)
                  .animate(obj.secondary.css, obj.secondary.dur)
    } else {
        anim = $el.animate(obj.main.css, obj.main.dur)
    }
    return anim;
} 
```

演示：http: [//jsfiddle.net/SWHTx/5/](http://jsfiddle.net/SWHTx/5/)

# django - Django从范围生成选择字段

> ID：13425376
> 
> 赞同：1
> 
> 时间：2012-11-16T22:28:42.040
> 
> 标签：django, django-forms

嗨，我有一个 django 表单选择字段，它需要以 5 个单位增量在 85-150 范围内进行选择。不幸的是我不能这样做：

```
wind_range = range(85, 150, 5)

WIND_SPEED_CHOICE = (
    for i in wind_range:
        (i, i),
) 
```

有什么建议么？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T22:49:48.750

引用[django 模型字段参考文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#choices)：

> 最后，请注意，选择可以是任何可迭代的对象——不一定是列表或元组。这使您可以动态构建选择。

这意味着这可以成为您的解决方案：

```
wind_range = range(85, 150, 5)    
WIND_SPEED_CHOICE =  [ (i, i) for i in wind_range ] 
```

# linux - 内核如何决定堆栈大小

> ID：13425379
> 
> 赞同：-1
> 
> 时间：2012-11-16T22:28:51.873
> 
> 标签：linux, gcc, linux-kernel, stack-overflow

只是想知道进程何时启动它的堆栈要求是如何确定的，或者每个进程是否都以默认堆栈大小开始并且根据要求动态增长。
在我的系统上，堆栈大小的软限制是`10M`，硬限制是`unlimited`. 这是否意味着堆栈可以增长到最大可用 RAM？
如果我的进程中有十几个线程，所有的堆栈大小都会不同（假设我没有设置堆栈属性）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:15:35.183

每个进程都以最小大小的用户空间堆栈启动，该堆栈会根据需要自动扩展。

如果违反了软限制，则该过程将被终止。该进程可能会提高自己的软限制，但不会高于硬限制。

即使软限制是无限的，最大可用堆栈大小也受到进程地址空间中其他映射的限制，因为它必须是连续的。

# css - 本机主题干扰自定义主题链接

> ID：13425388
> 
> 赞同：0
> 
> 时间：2012-11-16T22:29:31.050
> 
> 标签：css, jquery-mobile

我正在尝试为链接创建自定义主题。似乎在 jsfiddle 中工作正常。但在我的页面中，本地主题优先。页面底部的“SHOW MORE”应该是紫色的。但它仍然是蓝色的。

```
>     .ui-link-prp,
>     .ui-link-prp:visited,
>     .ui-link-prp:hover,
>     .ui-link-prp:active{
>       color: #9e0249;
>       font-size: 14px; 
>       font-weight: bold;
>       text-decoration: none;
>     }
>     
>     <ul>
>          <li><a href="#" class="ui-link-prp" data-theme="prp">show more</a></li>
>      </ul> 
```

这是[链接](http://haripriyaa.zymichost.com/ot/profile.html)

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:11:19.607

试`!important`...

```
 ...{
        color: #9e0249 !important;
        font-size: 14px !important; 
        font-weight: bold !important;
        text-decoration: none !important;
     } 
```

# arrays - 使用rails将数组中的第一条记录与所有其他记录分开的最佳方法是什么？

> ID：13425389
> 
> 赞同：0
> 
> 时间：2012-11-16T22:29:32.033
> 
> 标签：arrays, ruby-on-rails-3

我有一个来自数据库选择的数组 ( `@tasks`)，我想单独显示第一个数组，然后循环遍历任何其他数组。

数组中总会有一项，但可能有也可能不超过一项。

显示第一个项目然后遍历任何剩余项目（如果还有更多项目）的最佳方式是什么？

我以为我前几天在 SO 上发现了类似的东西，但我似乎再也找不到了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:37:51.693

```
1.9.3-p327 > a = [1,2,3]
 => [1, 2, 3] 
1.9.3-p327 > first, *the_rest = *a
 => [1, 2, 3] 
1.9.3-p327 > first
 => 1 
1.9.3-p327 > the_rest
 => [2, 3] 
```

但是，在上述情况下，如果`a = [1]`then`the_rest`最终会是`nil`（至少在 ruby​​ 1.9 中，不知道 1.8 左右）

您还可以`.shift`像这样删除第一个元素：

```
1.9.3-p327 > first = a.shift
 => 1 
1.9.3-p327 > first
 => 1 
1.9.3-p327 > a
 => [2, 3] 
1.9.3-p327 > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:45:13.247

这很简单。你可以使用这个：

```
first = @tasks.first 
```

其他：

```
others = @tasks[1..@tasks.length] 
```

视图显示：

```
<%= @tasks.first %>
<% @tasks[1..@tasks.length].each do |task| %>
  ...
<% end %> 
```

# spring - 如何在 Spring Security 表达式中使用 Spring Service 方法？

> ID：13425395
> 
> 赞同：1
> 
> 时间：2012-11-16T22:30:21.700
> 
> 标签：spring, spring-security

我有一个 spring 服务，并希望在服务中使用一个方法，并在 spring 安全表达式中结合当前用户。我[在 stackoverflow 上看到了另一个问题，](https://stackoverflow.com/questions/5743565/spring-expression-language-and-spring-security-3-accessing-bean-reference-in-p "这里")这让我相信这样的事情是可能的。我正在使用弹簧 3.1.2。

```
@Service("orgService")
public class DefaultOrganizationService implements OrganizationService {
    @Override
    @Transactional
    public boolean isOrgAdmin(String username) 
    {   
       return true;
    }
} 
```

然后在一个jsp中，我有这样的东西：

```
<sec:authorize access="orgService.isOrgAdmin(principal.name)">
    USER IS ORG ADMIN
</sec:authorize> 
```

但是，当我使用此设置运行我的网络应用程序时，我得到

```
org.springframework.expression.spel.SpelEvaluationException: EL1008E:(pos 0): Field or property 'orgService' cannot be found on object of type 'org.springframework.security.web.access.expression.WebSecurityExpressionRoot' 
```

我尝试过使用“@orgService...”和“orgService...”的表达式

我正在尝试做的事情是可能的，还是我需要实施[PermissionEvaluator](http://blog.solidcraft.eu/2011/03/spring-security-by-example-securing.html)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T07:04:12.390

`@orgService`应该工作，对于从[版本 3.1.0.RC2开始的 Spring Security](http://static.springsource.org/spring-security/site/changelog.html)

`[SEC-1723] - Support use of bean names in expressions via @beanName notation`

* * *

`I'm using spring 3.1.2.`

我认为您使用的是旧版本的 Spring Security，而不是 Spring。

# flowchart - 业务流程模型与流程流程图

> ID：13425403
> 
> 赞同：2
> 
> 时间：2012-11-16T22:31:27.837
> 
> 标签：flowchart, business-process

*使用业务流程模型*或使用*流程流程图*设计流程有什么区别？

两者有什么区别，这两种设计工具是否相似？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:47:35.200

流程图起源于 1921 年，非常简单，有 5 个符号：

```
Operation: is to change the physical or chemical characteristics of the material.
Inspection: is to check the quality or the quantity of the material.
Move: is transporting the material from one place to another.
Delay: is when material cannot go to the next activity.
Storage: is when the material is kept in a safe location. 
```

[https://en.wikipedia.org/wiki/Flow_process_chart](https://en.wikipedia.org/wiki/Flow_process_chart)

业务流程非常相似，而且更具体一点。如果您想要一些非常结构化的东西，请查看业务流程模型和表示法 (BPMN)。BPMN 1.0 标准于 2004 年制定 ( [https://en.wikipedia.org/wiki/Business_Process_Model_and_Notation](https://en.wikipedia.org/wiki/Business_Process_Model_and_Notation) ) BPMN 2.0 标准于 2011 年修订 ( [http://www.omg.org/spec/BPMN/2.0/](http://www.omg.org/spec/BPMN/2.0/) )

我建议获取 BPMN sybmols 和规则的备忘单。在映射涉及多个用户的进程时，这是我的首选系统。

# ruby-on-rails - 未定义的方法“图像”Instagram API

> ID：13425410
> 
> 赞同：1
> 
> 时间：2012-11-16T22:31:41.153
> 
> 标签：ruby-on-rails, ruby, instagram

我正在使用 Instagram API 来获取带有特定标签的图像，但是当我在视图中显示图像时，Rails 说未定义的方法“图像”。

这是 Rails 给出的错误：

```
 undefined method `images' for #<Array:0x007f9ee7460608> 
```

这是控制器：

```
 @photos = Instagram.tag_recent_media("cats") 
```

这是视图源：

```
 <% @photos.each do |photo| %>

       <%= image_tag photo.images.standard_resolution.url %>
   <% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:01:33.500

看起来`images`是 的属性的一个`data`属性`@photos`。试试这个：

```
<% @photos.data.each do |datum| %>
  <%= image_tag datum.images.standard_resolution.url %>
<% end %> 
```

# html - 页面在某些浏览器上无法正确显示

> ID：13425412
> 
> 赞同：0
> 
> 时间：2012-11-16T22:31:52.813
> 
> 标签：html

到目前为止，我正在尝试使此登录页面在每个浏览器上正确显示/格式化，它只显示了我希望它如何在其他浏览器 firefox/chrome 上的 IE9 上工作，表单部分位于左侧而不是中间。（用户名、密码、Pub 密钥和登录按钮都必须位于页面中间，并且在调整浏览器大小时不能移动。）

有人可以看看它，看看我做错了什么吗？

谢谢你的帮助...

这是 HTML 代码：

```
<script type="text/javascript">
// Return true if unable to open a new window
function popup_blocked() {
  var popup = window.open('','_blank','toolbar=no,scrollbars=no','width=0,height=0');
  if (!popup) {
    return true;
  } else {
    popup.close();
    return false;
  }
}

if(popup_blocked()) {
  alert('This page requires that you enabled popups in order to process and display content properly.');
} else {
  //alert('POPUPS ARE ALLOWED! THANK YOU!');
}
</script>

<html><head><title>Login Page</title>
<style type="text/css">
.auto-style2 {
    margin-right: 261px;
}
</style>
    <style type="text/css">
.style1 {
    vertical-align: top;
}
    .auto-style4 {
        text-align: center;
    }
    </style>

</head>
<style type="text/css">
*                   { margin: 0; padding: 0; }
body                { font-family: Georgia, serif; background: url(login-page-bg.jpg) top center no-repeat #c4c4c4; color: #3a3a3a;  }

.clear              { clear: both; }

form                { width: 406px; margin: 170px auto 0; }

legend              { display: none; }

fieldset            { border: 0; }

label               { width: 115px; text-align: right; float: left; margin: 0 10px 0 0; padding: 9px 0 0 0; font-size: 16px; }

input               { width: 220px; display: block; padding: 4px; margin: 0 0 10px 0; font-size: 18px;
                      color: #3a3a3a; font-family: Georgia, serif;}
input[type=checkbox]{ width: 20px; margin: 0; display: inline-block; }

.button             { background: url(button-bg.png) repeat-x top center; border: 1px solid #999;
                      -moz-border-radius: 5px; padding: 5px; color: black; font-weight: bold;
                      -webkit-border-radius: 5px; font-size: 13px;  width: 70px; }
.button:hover       { background: white; color: black; }
    .auto-style5 {
    text-decoration: none;
}
.auto-style6 {
    color: #3A3A3A;
}
    .auto-style7 {
    font-size: x-small;
}
    </style>

<BODY onload="resetSession();setFocus(document.frmLogin.login);" style="margin-top: 150">

<table width=100%>
<form action="login_page.asp" method="post" name="frmLogin" class="auto-style2" style="width: 100%">
<div class="auto-style4" style="position: absolute; width: 100%; height: 174px; z-index: 1; left: 308px; top: 169px">
<input type="hidden" name="action" value="validate_login">
<table border="0" align="center">
<tr>
<td align="right">Username&nbsp; </td>
<td>
<input type="text" name="login" style="height: 34px">
</td>
</tr>
<tr>
<td align="right">Password&nbsp; </td>
<td><input name="password" style="height: 34px" type="password">
</td>
</tr>
    <tr>
<td align="right">Pub Key&nbsp; </td>
<td><input name="pasword" style="height: 34px" type="password">
</td>
    </tr>
<tr>
<td align="right">
</td>
<td>
<!--<input type="submit" VALUE="Login">-->
<input type="submit" style="margin: 0px 0 0 149px;" class="button" name="commit" value="Log in">    
</td>
</tr>
</table>
    </div>
</form></table>

<p class="auto-style4"><br><br>All Login Attempts are Logged.<br>
<br>
<span class="auto-style7">(11/16/2012 16:12)</span></p>
</body></html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:36:41.810

您的 HTML 无效（这是自找麻烦）并且您没有 Doctype，因此浏览器将进入[Quirks 模式](http://en.wikipedia.org/wiki/Quirks_mode)（这在浏览器之间是不一致的，并且为了与有问题的浏览器成为常态时编写的网站的兼容性而故意出现错误）。

*   添加[文档类型](http://www.w3.org/QA/2002/04/valid-dtd-list.html)
*   执行[自动化 QA](http://validator.w3.org/)

此外，避免[布局表格](http://www.hotdesign.com/seybold/)并[使用 CSS 进行表单布局](http://www.web3mantra.com/2011/06/10/30-best-css-forms/)。

# javascript - 用于数据网格（或电子表格）的 HTML5 javascript 框架

> ID：13425413
> 
> 赞同：2
> 
> 时间：2012-11-16T22:32:11.313
> 
> 标签：javascript, html, datagrid, frameworks

我一直在互联网上进行一些挖掘，我想知道您是否知道某种产品。

我正在为数据网格（或电子表格）寻找一个强大的 HTML5 javascript 框架，它可以在网页上显示时执行以下操作……</p>

1）每行有数据，文本框，下拉选择，复选框等（在列中）......

2）能够对几列（数据）进行分组并像这样显示行……（假设您对品牌、型号和颜色进行分组……）

```
(-) 福特 (5)
   (-) 野马 (3)
      (+) 绿色 (1)
      (-) 蓝色 (2)
         (年份) (修剪) (里程) (颜色)
         2007 2dr Coupe 52,000 绿色
         2012 2dr 轿车 23,321 蓝色
   (+) 游侠 (3)
   (+) 金牛座 (5)

(+) 雪佛兰 (8)

(-) 丰田 (2)
   (-) 普锐斯 (2)
      (-) 黄色 (2)
         (年份) (修剪) (里程) (颜色)
         2013 3dr 掀背车 14,021 黄色
         2010 2dr Coupe 11,123 黄色

```

谢谢……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:02:39.420

你应该尝试用谷歌搜索**jquery datagrid 插件**，你可能会找到一个。**但是，为了完全控制您的网格，请考虑使用主干和下划线堆栈**（[此处](http://documentcloud.github.com/backbone/)）制作自己的灵魂。您将最终控制您的数据和演示文稿， 与 EXT.js 相比，它是一个非常**轻量级和灵活的解决方案**

# sqlite - 有没有办法在运行时测量sqlite中的查询时间？

> ID：13425416
> 
> 赞同：0
> 
> 时间：2012-11-16T22:32:33.253
> 
> 标签：sqlite, profiling, query-optimization

我想测量sqlite中每个sql语句的执行时间。

我知道在sqlite shell中你可以只做.timer，但我想知道如何以可编程的方式来做，这样我就可以知道当应用程序实时访问数据库时sql语句需要多少时间，而不仅仅是通过之后在外壳中重播该语句？

我可以为 sqlite_profile 提供一个插件功能吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:39:11.280

在阅读了[shell.c](http://www.sqlite.org/src/finfo?name=src/shell.c)的代码后，我在文件顶部发现了以下相关信息：

```
/* Saved resource information for the beginning of an operation */
static struct rusage sBegin;

/*
** Begin timing an operation
*/
static void beginTimer(void){
  if( enableTimer ){
    getrusage(RUSAGE_SELF, &sBegin);
  }
}

/* Return the difference of two time_structs in seconds */
static double timeDiff(struct timeval *pStart, struct timeval *pEnd){
   return (pEnd->tv_usec - pStart->tv_usec)*0.000001 + 
         (double)(pEnd->tv_sec - pStart->tv_sec);
}

/*
** Print the timing results.
*/
static void endTimer(void){
  if( enableTimer ){
    struct rusage sEnd;
    getrusage(RUSAGE_SELF, &sEnd);
    printf("CPU Time: user %f sys %f\n",
       timeDiff(&sBegin.ru_utime, &sEnd.ru_utime),
       timeDiff(&sBegin.ru_stime, &sEnd.ru_stime));
  }
} 
```

这意味着，SQLite 本身不提供某种分析，因此您必须使用您的语言功能（例如 endtime-starttime）来完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T08:01:48.140

sqliteman 提供了一些基本的分析功能。它显示查询执行时间。好吧，尽管查询执行是在不同的处理器上（即 X86 与 ARM 相比），但它仍然可以帮助您在 sqlite 上编写优化的原始查询。例如，我刚刚测试了一个没有索引的 where 子句的选择查询，它花费了大约 0.019 秒，而在创建索引之后它只花费了 0.008。

这是 sqlite man [http://sourceforge.net/projects/sqliteman/的链接](http://sourceforge.net/projects/sqliteman/)

# c++ - CMD 异常处理 C/C++

> ID：13425419
> 
> 赞同：1
> 
> 时间：2012-11-16T22:33:06.860
> 
> 标签：c++, c, exception-handling, cmd

我将在我的程序中使用一些 CMD 命令，这些命令可能会引发一些异常。如您所知，当出现异常时，CMD 会在屏幕上写入自己的错误消息。但是，我想写我自己的错误信息。

我的问题是：有没有办法阻止 CMD 消息并只写我自己的错误消息？

PS 这不是一个复杂的程序。它使用 System() 执行 CMD 命令。

例子：

假设用户可以重命名和复制程序中的任何文件。如您所知，如果用户没有正确输入文件路径，屏幕上会显示一条错误消息。我希望这个错误消息永远不会出现在屏幕上。只显示我自己的错误消息。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:56:42.713

这取决于您的平台和您要使用的命令。顺便说一句，大多数人强烈不鼓励使用[`system()`](http://msdn.microsoft.com/en-us/library/277bwbdz%28v=vs.71%29.aspx)for 调用控制台命令（对于大多数目的来说，这太重了）。
我建议您使用`CreateProcess()`CREATE_NO_WINDOW 标志并等待进程退出并调用`WaitForSingleObject()`and `GetExitCodeProcess()`。
这种方法利用了这样一个事实，即大多数 CMD 命令都是可执行文件，位于`C:/Windows/...`.

```
/*
 * Executes a program and returns it's exit code.
 *
 * TODO: Error checking should be added for
 *   CreateProcess()
 *   WaitForSingleObject()
 *   GetExitCodeProcess()
 */
DWORD ExecCmdLine(TCHAR const* cmdline)
{
    STARTUPINFO si;
    memset(&si, 0, sizeof(si));
    si.cb = sizeof(si);
    PROCESS_INFORMATION pi;
    memset(&pi, 0, sizeof(pi));
    ::CreateProcess(NULL, cmdline, NULL, NULL, FALSE, CREATE_NO_WINDOW, NULL, NULL, &si, &pi);
    ::CloseHandle(pi.Thread);
    ::WaitForSingleObject(pi.hProcess, INFINITE);
    DWORD exitcode;
    ::GetExitCodeProcess(pi.hProcess, &exitcode);
    ::CloseHandle(pi.hProcess);
    return exitcode;
} 
```

如果您想检索命令的输出，您还可以`hStdOutput`在`hStdError`结构`STARTUPINFO`和集合中提供`STARTF_USESTDHANDLES`在`STARTUPINFO.dwFlags`. 您甚至可以在执行命令时在自己的程序中执行其他操作（尤其是在您提到文件复制时）。这是通过 C++ 方式完成的：

```
/*
 * TODO: Error checking should be added for
 *   CreateProcess()
 *   WaitForSingleObject()
 *   GetExitCodeProcess()
 */
class AsyncCmd
{
public:
    AsyncCmd(std::string const& cmdline)
        : cmdline(cmdline),
          processHandle(NULL)
    {
    }
    ~AsyncCmd()
    {
        if (this->processHandle != NULL)
            ::CloseHandle(this->processHandle);
    }
    // Starts the execution of the commandline.
    void Start(HANDLE hOut = GetStdHandle(STD_OUTPUT_HANDLE), HANDLE hErr = GetStdHandle(STD_ERROR_HANDLE))
    {
        STARTUPINFO si;
        memset(&si, 0, sizeof(si));
        si.cb = sizeof(si);
        si.dwFlags = STARTF_USESTDHANDLES;
        si.hStdInput = GetStdHandle(STD_INPUT_HANDLE);
        si.hStdOutput = hOut;
        si.hStdError = hErr;
        PROCESS_INFORMATION pi;
        memset(&pi, 0, sizeof(pi));
        ::CreateProcess(NULL, this->cmdline.c_str(), NULL, NULL, FALSE, CREATE_NO_WINDOW, NULL, NULL, &si, &pi);
        ::CloseHandle(pi.hThread);
        this->processHandle = pi.hProcess;
    }
    // Blocks until execution is finished and returns the exit code.
    DWORD ExitCode()
    {
        ::WaitForSingleObject(this->processHandle, INFINITE);
        DWORD exitcode;
        ::GetExitCodeProcess(this->processHandle, &exitcode);
        return exitcode;
    }
private:
    AsyncCmd(AsyncCmd const&);
    AsyncCmd& operator=(AsyncCmd const&);
    std::string cmdline;
    HANDLE processHandle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:48:35.073

重新表述已经说过的话：

问：你能以某种方式拦截你通过“system()”调用的命令引发的错误吗？

答：没有。有很多原因。

但是您*可以*重定向由命令行程序*编写*的文本错误消息：

*   重定向“stderr”相对容易。“GetStdHandle(STD_ERROR_HANDLE)”是一种方法。重定向到 "> :err" 是另一个。

*   不幸的是，并非所有程序都可以很好地将错误消息写入“stderr”。

    许多人将所有内容都写入“stdout”。

在后一种情况下，您必须弄清楚 1) 实际发生了错误，以及 2) 弄清楚如何将文本输入的“标准输出”部分与“错误文本”部分分开.

PS：

“system()”的替代 API 是“popen()”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T23:42:59.057

除了你[写](https://stackoverflow.com/users/1825094)的内容之外，我想指出异常不会跨越进程边界。所以你在这里处理的是输出（两者`stderr`和`stdout`）加上它的退出代码（如果这提供了任何有用的信息）。这主要是为了让您了解这实际上与您的标题所暗示的异常处理无关。

That means you can set `hStdOutput` and `hStdError` when using `CreateProcess`/`CreateProcessEx` to use pipes that you control and where you "catch" the output and then replace it with your own before outputting it to the console. In case you want to only replace `stderr` you can also do that.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T22:40:41.327

一种蛮力的方法是通过管道将 CMD 的输出即`yourCommand > file.txt`传输到文件，然后读取文件内容以确定是否存在异常。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-16T22:47:51.163

您可以使用

```
#include "Exception.h"

class MyClass
{
public:
    class Error : public Exception { };
    MyClass();
    ~MyClass();
    void myFunction() throw(Error);
} 
```

...

```
catch (MyClass::Error & error)
{
    cout << error.full_message << endl;

    return;
} 
```

和

```
class Exception
{
public:
    std::string message;
    std::string full_message;

    virtual char * info() { return ""; };

    void setMessage(std::string msg)
    {
        message = msg;
        if (*info() == 0) { full_message = msg; }
        else { full_message = MakeString() << info() << " " << msg; }
    }
};

// template function ///////////////////////////////////////////

template <class errType>
void Throw(const std::string msg=std::string(""))
{
errType err;
err.setMessage(msg);

throw(err);
} 
```

# objective-c - 数组中的值会自行改变

> ID：13425424
> 
> 赞同：0
> 
> 时间：2012-11-16T22:33:47.550
> 
> 标签：objective-c, arrays

这可能是一个完全的菜鸟问题，但我似乎无法自己解决这个问题。我在这里和谷歌搜索，但没有任何运气。

我有一个有名字的类，例如'logme'。我在 .h 文件中实现了一个 float *floaters，在 .m 文件中创建了一个属性来合成它。.m 文件中的两个方法method1 和method2。当我从 viewcontroller 执行 method1 时，它使 floaters 变量成为具有一些值的数组。我对它们进行 NSLog 检查以检查它们是否存在。之后我执行方法 2，它只 NSLogs 相同的数组，但现在数组中的值完全不同。

日志文件

```
@interface Logme : NSObject {
    float *floaters;
}
-(void)method1;
-(void)method2; 
```

日志文件

```
@implementation Logme
-(void)method1 {
    floaters = (float[8]) {
        1.0f, 2.0f,
        3.0f, 4.0f,
        6.0f, 5.0f,
        7.0f, 8.0f,
    };
    for (int i = 0; i < 8; i++) {
        NSLog(@"%f", floaters[i]);
    }
}
-(void)method2 {
    for (int i = 0; i < 8; i++) {
        NSLog(@"%f", floaters[i]);
    }
}
@end 
```

从视图控制器调用方法：

```
logme = [Logme alloc];
[logme method1];
[logme method2]; 
```

结果：

```
NSLog from method1:
1.000000
2.000000
3.000000
4.000000
6.000000
5.000000
7.000000
8.000000

NSLog from method2:
0.000000
-1.998885
0.000000
0.000000
0.000000
0.000000
0.000000
0.000000 
```

*   对不起。我正在与这个 4 空间系统作斗争。它不允许我添加 .m 文件代码。终于到这里了：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:09:01.627

您正在为堆栈中的一块内存分配一个指针，这意味着当您从 mrthod1 退出时，该内存将被释放。在 method1 之后打印的值是随意的，也可能发生内存没有被触及，但是通常堆栈在每次方法调用时都会发生变化，这就是你的情况。

**选择 1**

您将浮点数用作数组，因此将其声明为数组，它将拥有自己的存储空间：

```
@interface Logme : NSObject {
float floaters[8];
}

-(void)method1 {
    for(int i=0; i<8;i++)
        floaters[i]=i+1;
for (int i = 0; i < 8; i++) {
    NSLog(@"%f", floaters[i]);
} 
```

**选择 2**

让 floaters 成为一个指针，但动态地为 floaters 分配内存：

```
-(void)method1 {
floaters=(float*)malloc(8*sizeof(float));
for(int i=0; i<8; i++)
    floaters[i]=i+1;
for (int i = 0; i < 8; i++) {
    NSLog(@"%f", floaters[i]);
} 
```

并且不要忘记在不再需要时释放内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:05:22.203

@HotLicks 在评论中给出了直接答案。我想我会给出更多的解释。

当你在方法中有这样的东西时：

```
- (void)someMethod {
    float *numbers = (float[8]) {
        1.0f, 2.0f,
        3.0f, 4.0f,
        6.0f, 5.0f,
        7.0f, 8.0f,
    };
}  // <-- end of scope for these values 
```

值的内存被放入称为堆栈的特殊内存区域。仅当值在范围内时，此内存才会保留。换句话说，当到达代码块的右花括号时，堆栈和它的内存就消失了。

在您的情况下，您将此堆栈内存块分配给实例变量。因此，当到达块的末尾并且堆栈值消失时，实例变量将指向相同的内存位置。但价值不再存在。该内存空间可能已被重新用于其他用途。

这就是为什么第二种方法会打印出不同的值。您正在尝试从同一内存访问 8 个浮点值，但该内存已被重新用于其他用途。

有几种可能的解决方案。您可以使用`malloc`为数组分配内存并将值复制到该内存空间中（然后使用 释放内存`free`）。或者您可以使用`NSArray`or `NSMutableArray`。

# wpf - 如何自定义 WPF 应用程序的启动？

> ID：13425425
> 
> 赞同：30
> 
> 时间：2012-11-16T22:33:50.550
> 
> 标签：wpf, startup

当创建新的 WPF 应用程序项目时`MainWindow.xaml`，`App.xaml`会自动生成相应的类背后的代码。在其中`App.xaml`有一个属性定义了最初将运行哪个窗口，默认情况下它是`StartupUri="MainWindow.xaml"`

我`Dispatcher`在同一个项目中创建了一个新类。在启动时，我希望构造该类的实例，`Dispatcher`然后运行其方法之一。该方法实际上会创建并显示`MainWindow`窗口。那么我该如何修改`App.xaml`or`App.xaml.cs`才能实现呢？或者，如果不能通过`App`，我应该如何实现它？谢谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-16T22:59:59.303

您可以`StartupUri`从 App.xaml 中删除该属性。

然后，通过在 App.xaml.cs 中创建覆盖`OnStartup()`，您可以创建`Dispatcher`类的新实例。

这是我的快速 app.xaml.cs 实现的样子：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
      base.OnStartup(e);

      new MyClassIWantToInstantiate();
    }
  }
} 
```

**更新**

如果您使用此方法自定义应用程序启动并且突然找不到应用程序级资源，我最近发现了[此解决方法的错误。](https://stackoverflow.com/a/3896209/23074)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T22:55:40.300

尝试使用 Startup 事件（应用程序类）- [MSDN](http://msdn.microsoft.com/en-us/library/system.windows.application.startup.aspx)。

您可以在此事件处理程序中显示 MainWindow - 在您创建 Dispatcher 实例之后。

# java - 在使用 Jama 进行 SVD 之前转置矩阵

> ID：13425428
> 
> 赞同：0
> 
> 时间：2012-11-16T22:33:56.030
> 
> 标签：java, svd, jama

所以我正在使用 Jama（Java 矩阵库）来计算矩阵 A 的 SVD。问题是 Jama 仅在 A (mxn) 是 m >=n 的矩阵并且我使用 m >=n 的矩阵时才有效

我读过这可以通过做A'（转置）来解决。所以如果你有

```
SVD(A) = U*D*V' 
(U*D*V')' = V*D'*U' 
```

所以基本上他们说你可以通过翻转 U 和 V 来恢复相同的答案。 D 中的奇异值保持不变。我对此感到困惑的是，看尺寸

```
U (mxn)
D (nxn)
V/V' (nxn) 
```

但是如果你要做 SVD(A') 那么你会有

```
U (nxm)
D (mxm)
V/V' (nxn) 
```

谁可以给我解释一下这个？

# android - Android 虚拟设备不运行

> ID：13425432
> 
> 赞同：1
> 
> 时间：2012-11-16T22:34:12.980
> 
> 标签：android

在 Eclipse 中，我单击 Window > Android Virtual Device Manager，然后突出显示我创建的 AVD（通过第一个应用程序说明）并单击 Start。弹出 AVD 选项对话框，我点击确定（或其他）弹出“正在启动 AVD 进度指示器屏幕”，进度条显示完成进度。然后什么都没有，没有可见的 AVD。

我将不胜感激任何建议。

计算机是最新下载的 adt-bundle-windows-x86 的 Win XP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:48:54.973

是否安装了 ARM EABI？还是其他一些系统映像？如果您不指定一个 CPU/ABI，AVD 将不会启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:40:21.537

尝试这样做 - 单击窗口 > 自定义透视图 > 命令组可用性选项卡。选中“Android SDK and AVD Manager”选项，然后单击“确定”按钮。

这篇文章有帮助 - [eclipse 不显示 Avd 管理器窗口和 android 项目](https://stackoverflow.com/questions/5323067/eclipse-not-showing-avd-manager-window-and-android-project)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T13:47:28.640

有时它只需要很长的时间才能真正启动。等一下，否则你可能会像我一样不耐烦，接下来你知道你的屏幕上有 3 个 AVD

# java - 在 aws java sdk 中设置端点后描述 elasticache 实例时出错

> ID：13425435
> 
> 赞同：1
> 
> 时间：2012-11-16T22:34:18.047
> 
> 标签：java, amazon-web-services, amazon-elasticache

我试图在 AWS Elasticache 中描述我的缓存集群节点。我正在使用使用[Java 查找 AWS ElastiCache 端点](https://stackoverflow.com/questions/9691276/finding-aws-elasticache-endpoints-with-java)的示例（解决方案代码）。

我使用代码：

```
 DescribeCacheClustersRequest dccRequest = new DescribeCacheClustersRequest();    
    dccRequest.setShowCacheNodeInfo(true);

    elasticache.setEndpoint("ec2.us-west-1.amazonaws.com");
    DescribeCacheClustersResult clusterResult = elasticache.describeCacheClusters(dccRequest);
    System.out.println("cache cluster node fleet size: " + clusterResult.getCacheClusters().size());
    for (CacheCluster cacheCluster : clusterResult.getCacheClusters()) {
        List<CacheNode> cacheNodes = cacheCluster.getCacheNodes();

        System.out.println("cache cluster size: " + cacheNodes.size());
    } 
```

当我运行此代码时，我收到错误：

> 线程“主”状态代码中的异常：400，AWS 服务：AmazonElastiCache，AWS 请求 ID：null，AWS 错误代码：null，AWS 错误消息：null

如果我删除 setEndpoint 代码，代码不会出错，但不会返回和打印任何节点。我猜测的原因是因为默认情况下会查询 US-EAST 区域。

有谁知道我可以如何规避这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:55:18.797

您的问题是您将终端节点设置为 EC2 终端节点而不是 Amazon ElastiCache 终端节点。更正后的代码片段是：

```
elasticache.setEndpoint("elasticache.us-west-1.amazonaws.com"); 
```

[您可以在本文档](http://docs.amazonwebservices.com/general/latest/gr/rande.html)中找到完整的端点列表

# jsp - 在 KendoUI JSP Servlets 中接收 JSON 参数

> ID：13425437
> 
> 赞同：0
> 
> 时间：2012-11-16T22:34:30.343
> 
> 标签：jsp, servlets, grid, kendo-ui

在定义网格（使用 JSP 包装器）时，我的 servlet 接收参数、`pageSize`和作为参数名称部分中的 JSON 字符串。我的意思是，servlet 接收一个参数，其名称为：{"take":10,"skip":0,"page":1,"pageSize":10}，值为空。`take``skip``page`

使用 JavaScript（传统 KendoUI）的等效代码接收 4 个参数：

1.  名称：`take`，值：10
2.  名称：`skip`，值：0
3.  名称：`page`，值：1
4.  名称：`pageSize`，值：10

这种差异是故意的吗？是否将 JSON 字符串正确编码为参数名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:52:04.337

问题出在 JSP 标记库中：when `parameterMap`is `null`(not defined)`TransportTag.doEndTag`定义`parameterMap`为：

```
function(options,type){return JSON.stringify(options);} 
```

而不是将其留空，以防止 JavaScript `RemoteTransport.setup`（客户端）`identity`像其他框架那样调用函数。

在 taglib 中删除这个额外的生成会导致 JSP 包装器生成相同的 HTML/JavaScript 代码。

# javascript - 检查浏览器选项卡是否已经打开，所以我不会制作额外的选项卡

> ID：13425440
> 
> 赞同：11
> 
> 时间：2012-11-16T22:34:35.987
> 
> 标签：javascript, tabs, browser-tab

当用户将商品添加到我们的购物车时，它会在新选项卡中打开我们的商店。奇怪的是不同的网站。

我想检查选项卡是否已经打开，然后用第二个项目重新填充它，而不是用更新的购物车打开另一个选项卡。

有没有办法用js检查这个？我想我可以跟踪我们打开了选项卡，但我不知道如何确认在将商品添加到购物车之间的时间内它没有关闭，而无需执行一些 ajax 请求 ping 两个页面等。这似乎有点矫枉过正。

那么，您如何简单地检查浏览器选项卡是否已打开？

用解决方案编辑：首先：

```
var tab = window.open('http://google.com','MyTab'); 
```

然后：

```
if(tab) {
  var tab = window.open('http://yahoo.com','MyTab');
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T22:46:08.987

`window.open`具有以下参数：`var tab = window.open(url, name, specs, replace)` 只要您使用相同`name`的 url，就会将其加载到该窗口/选项卡中。

如果您想保留描述符/引用（`tab`上面），`window.open`一旦用户刷新页面，该引用就会丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:40:24.123

我认为您最好的选择可能是[会话存储/本地存储](http://www.w3schools.com/html/html5_webstorage.asp)，但它仅适用于较新的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T22:50:00.687

您所需要的只是保存对打开的选项卡的引用，您可以将其与一些对您有意义的 id 相关联......然后当您需要再次重新打开它时，只需使用保存的引用从那里您可以访问您的父母或开启者来自 window.opener 的窗口。还要知道子窗口何时关闭，有一个默认的浏览器事件“beforeunload”，当调用它时可以从父对象中的引用对象中删除窗口，因此您知道您必须重新打开它而不仅仅是关注它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-09T14:27:45.957

我经历了每个步骤，并提出了一些观点。我在IE上测试过。如果您使用 (htp://www.google.com) 之类的 URL，它不会按预期工作，如果您使用您的域页面，它就可以工作。

虽然它适用于 Firefox 和 chrome。

以下示例不起作用：

```
<script type="text/javascript">
    function myfunction1() {
        window.open('http://www.google.com', 'f');
    }
    function myfunction2() {
        window.open('http://www.yahoo.com', 'f');
    }
</script>
<body>
    <form id="form2" runat="server">
    <div>
        <a href="#" onclick='myfunction1();'>myfunction1</a> 
        <a href="#" onclick='myfunction2();'>myfunction2</a>
    </div>
    </form>
</body>
</html> 
```

以下示例有效：

```
<script type="text/javascript">
        function myfunction1() {
            window.open('WebForm1.aspx', 'f');
        }
        function myfunction2() {
            window.open('WebForm2.aspx', 'f');
        }
</script>
<body>
    <form id="form1" runat="server">
    <div>
        <a href="#" onclick='myfunction1();'>myfunction1</a>
        <a href="#" onclick='myfunction2();'>myfunction2</a>
    </div>
    </form>
</body>
</html> 
```

# c - 为什么i的值还是5

> ID：13425441
> 
> 赞同：1
> 
> 时间：2012-11-16T22:34:47.490
> 
> 标签：c, macros, c-preprocessor

> **可能重复：**
> [C 中的宏定义错误？](https://stackoverflow.com/questions/9524809/macro-definition-error-in-c)

我是编程新手，希望有人可以帮助我：

为什么它给出输出：5。
这是代码片段：

```
#include <stdio.h>
#define max 5;

int main(){
int i=0;
i = max+1;
printf("\n%d",i);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T22:36:06.330

因为宏有分号。代码相当于：

```
i = 5; + 1; 
```

从宏中删除分号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T22:37:09.830

关键点是

```
#define max 5; 
```

当被预处理器替换时，这将变为

```
i = 5; +1; 
```

它将 5 分配给变量`i`（表达式`+1;`无效）。

你需要写

```
#define max 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T22:37:44.927

因为你的宏定义后有一个分号 x=

# backbone.js - Backbone ID 双增和错误启动

> ID：13425448
> 
> 赞同：1
> 
> 时间：2012-11-16T22:35:13.920
> 
> 标签：backbone.js, uniqueidentifier

我有一个看起来像这样的模型：

```
var TodosModel = Backbone.Model.extend({

    defaults: {
        id: null,
        content: 'Something Todo',
        completed: false
    },

    url: function() { return 'api/'+this.id; }

}); 
```

我通过以下方式添加模型：

```
var todoID = _.uniqueId();
var todoContent = this.newTodoField.val();
var todoCompleted = false;
  // Ensure there's something to save
        if(todoContent.length>0){
            var _this = this;
            // Create model
            var todo = new TodosModel({
                id: todoID,
                content: todoContent,
                completed: todoCompleted
            });
            todo.save({}, {
                wait: true,
                success: function(model, response) {
                    // Let the events deal with rendering...
                    _this.collection.add(model);
                },
                error: function(model, response) {
                    console.log('Could not create todo');
                }
            });
        } 
```

我遇到的问题是，由于某种原因，每个 id 都会加倍 - 所以如果我从没有元素开始，我会得到 1,3,5,7 ...

这没问题，除非我重新加载并且这些 ID 是从 API 中引入的，然后下一个生成的 _.uniqueID 是基于呈现的计数。

任何帮助将不胜感激，这是完整的代码：[http ://sandbox.fluidbyte.org/todos/js/todos.js](http://sandbox.fluidbyte.org/todos/js/todos.js)

# c - 内存中B-Tree插入的实现

> ID：13425450
> 
> 赞同：1
> 
> 时间：2012-11-16T22:35:35.753
> 
> 标签：c, algorithm, tree, associative-array, b-tree

我一直在创建 B 树的内存 C 实现，因为我在网上找不到可读的（即这个可怕的代码：[http](http://www.freewebs.com/attractivechaos/kbtree.h.html) ://www.freewebs.com/attractivechaos/kbtree.h.html ）。

它不太有效，因为有时在插入元素时它会找不到以前插入的元素。另外我不确定我的一般实现是否非常好，并且我正在以明智的方式进行插入。任何人都可以批评我所做的并找出为什么它一直不起作用吗？

显然 B 树比红黑树或 AVL 树更有效，因为每个节点的元素一起存储在内存中。这让我很感兴趣。

请注意，“顺序”是元素的数量，而不是子指针的数量。原因很简单，因为它对我来说更有意义。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

#define CB_BTREE_ORDER 8
#define CB_BTREE_HALF_ORDER CB_BTREE_ORDER/2

typedef struct{
    void * parent;
    void * children[CB_BTREE_ORDER + 1];
    unsigned char numElements;
} CBBTreeNode;

typedef struct{
    unsigned char found;
    CBBTreeNode * node;
    unsigned char pos;
} CBFindResult;

typedef struct{
    unsigned char keySize;
    unsigned char dataSize;
    int nodeSize;
    CBBTreeNode * root;
} CBAssociativeArray;

CBFindResult CBAssociativeArrayFind(CBAssociativeArray * self, unsigned char * key);
void CBAssociativeArrayInsert(CBAssociativeArray * self, unsigned char * key, void * data, CBFindResult pos, CBBTreeNode * right);
CBFindResult CBBTreeNodeBinarySearch(CBBTreeNode * self, unsigned char * key, unsigned char keySize);
void CBInitAssociativeArray(CBAssociativeArray * self, unsigned char keySize, unsigned char dataSize);

CBFindResult CBAssociativeArrayFind(CBAssociativeArray * self, unsigned char * key){
    CBFindResult result;
    CBBTreeNode * node = self->root;
    for (;;) {
        result = CBBTreeNodeBinarySearch(node, key, self->keySize);
        if (result.found){
            result.node = node;
            return result;
        }else{
            if (node->children[result.pos])
                node = node->children[result.pos];
            else{
                result.node = node;
                return result;
            }
        }
    }
}
void CBAssociativeArrayInsert(CBAssociativeArray * self, unsigned char * key, void * data, CBFindResult pos, CBBTreeNode * right){
    // See if we can insert data in this node
    unsigned char * keys = (unsigned char *)(pos.node + 1);
    unsigned char * dataElements = keys + self->keySize * CB_BTREE_ORDER;
    if (pos.node->numElements < CB_BTREE_ORDER) {
        if (pos.node->numElements > pos.pos){
            memmove(keys + (pos.pos + 1) * self->keySize, keys + pos.pos * self->keySize, (pos.node->numElements - pos.pos) * self->keySize);
            memmove(dataElements + (pos.pos + 1) * self->dataSize, dataElements + pos.pos * self->dataSize, (pos.node->numElements - pos.pos) * self->dataSize);
            memmove(pos.node->children + pos.pos + 2, pos.node->children + pos.pos + 1, (pos.node->numElements - pos.pos) *  sizeof(*pos.node->children));
        }
        memcpy(keys + pos.pos * self->keySize, key, self->keySize);
        memcpy(dataElements + pos.pos * self->dataSize, data, self->dataSize);
        pos.node->children[pos.pos + 1] = right;
        pos.node->numElements++;
    }else{
        CBBTreeNode * new = malloc(self->nodeSize);
        unsigned char * newKeys = (unsigned char *)(new + 1);
        unsigned char * newData = newKeys + self->keySize * CB_BTREE_ORDER;
        new->numElements = CB_BTREE_HALF_ORDER;
        pos.node->numElements = CB_BTREE_HALF_ORDER;
        unsigned char * midKey;
        unsigned char * midVal;
        if (pos.pos >= CB_BTREE_HALF_ORDER) {
            if (pos.pos == CB_BTREE_HALF_ORDER) {
                memcpy(newKeys, keys + CB_BTREE_HALF_ORDER * self->keySize, CB_BTREE_HALF_ORDER * self->keySize);
                memcpy(newData, dataElements + CB_BTREE_HALF_ORDER * self->dataSize, CB_BTREE_HALF_ORDER * self->dataSize);
                memcpy(new->children + 1, pos.node->children + CB_BTREE_HALF_ORDER + 1, CB_BTREE_HALF_ORDER * sizeof(*new->children));
                new->children[0] = right;
                midKey = key;
                midVal = data;
            }else{
                if (pos.pos > CB_BTREE_HALF_ORDER + 1){
                    memcpy(newKeys, keys + (CB_BTREE_HALF_ORDER + 1) * self->keySize, (pos.pos - CB_BTREE_HALF_ORDER - 1) * self->keySize);
                    memcpy(newData, dataElements + (CB_BTREE_HALF_ORDER + 1) * self->dataSize, (pos.pos - CB_BTREE_HALF_ORDER - 1)  * self->dataSize);
                }
                memcpy(newKeys + (pos.pos - CB_BTREE_HALF_ORDER - 1) * self->keySize, key, self->keySize);
                memcpy(newData + (pos.pos - CB_BTREE_HALF_ORDER - 1) * self->dataSize, data, self->dataSize);
                memcpy(newKeys + (pos.pos - CB_BTREE_HALF_ORDER) * self->keySize, keys + pos.pos * self->keySize, (CB_BTREE_ORDER - pos.pos) * self->keySize);
                memcpy(newData + (pos.pos - CB_BTREE_HALF_ORDER) * self->dataSize, dataElements + pos.pos * self->dataSize, (CB_BTREE_ORDER - pos.pos) * self->dataSize); // o 0 i 1 ii 2 iii 3 iv
                memcpy(new->children, pos.node->children + CB_BTREE_HALF_ORDER + 1, (pos.pos - CB_BTREE_HALF_ORDER) * sizeof(*new->children));
                new->children[pos.pos - CB_BTREE_HALF_ORDER] = right;
                if (CB_BTREE_ORDER > pos.pos)
                    memcpy(new->children + pos.pos - CB_BTREE_HALF_ORDER + 1, pos.node->children + pos.pos + 1, (CB_BTREE_ORDER - pos.pos) * sizeof(*new->children));
                midKey = keys + CB_BTREE_HALF_ORDER * self->keySize;
                midVal = dataElements + CB_BTREE_HALF_ORDER * self->dataSize;
            }
        }else{
            memcpy(newKeys, keys + CB_BTREE_HALF_ORDER * self->keySize, CB_BTREE_HALF_ORDER * self->keySize);
            memcpy(newData, dataElements + CB_BTREE_HALF_ORDER * self->dataSize, CB_BTREE_HALF_ORDER * self->dataSize);
            memcpy(new->children, pos.node->children + CB_BTREE_HALF_ORDER, (CB_BTREE_HALF_ORDER + 1) * sizeof(*new->children));
            memmove(keys + (pos.pos + 1) * self->keySize, keys + pos.pos * self->keySize, (CB_BTREE_HALF_ORDER - pos.pos) * self->keySize);
            memmove(dataElements + (pos.pos + 1) * self->dataSize, dataElements + pos.pos * self->dataSize, (CB_BTREE_HALF_ORDER - pos.pos) * self->dataSize);
            if (CB_BTREE_HALF_ORDER > 1 + pos.pos)
                memmove(pos.node->children + pos.pos + 2, pos.node->children + pos.pos + 1, (CB_BTREE_HALF_ORDER - pos.pos - 1) * self->dataSize);
            memcpy(keys + pos.pos * self->keySize, key, self->keySize);
            memcpy(dataElements + pos.pos * self->dataSize, data, self->dataSize);
            pos.node->children[pos.pos + 1] = right;
            midKey = keys + CB_BTREE_HALF_ORDER * self->keySize;
            midVal = dataElements + CB_BTREE_HALF_ORDER * self->dataSize;
        }
        if ( ! pos.node->parent) {
            self->root = malloc(self->nodeSize);
            self->root->numElements = 0;
            self->root->parent = NULL;
            pos.node->parent = self->root;
            self->root->children[0] = pos.node;
        }
        new->parent = pos.node->parent;
        CBFindResult res = CBBTreeNodeBinarySearch(pos.node->parent, midKey, self->keySize);
        res.node = pos.node->parent;
        return CBAssociativeArrayInsert(self, midKey, midVal, res, new);
    }
}
CBFindResult CBBTreeNodeBinarySearch(CBBTreeNode * self, unsigned char * key, unsigned char keySize){
    CBFindResult res;
    res.found = 0;
    if ( ! self->numElements) {
        res.pos = 0;
        return res;
    }
    unsigned char left = 0;
    unsigned char right = self->numElements - 1;
    unsigned char * keys = (unsigned char *)(self + 1);
    int cmp;
    while (left <= right) {
        res.pos = (right+left)/2;
        cmp = memcmp(key, keys + res.pos * keySize, keySize);
        if (cmp == 0) {
            res.found = 1;
            break;
        }else if (cmp < 0){
            if ( ! res.pos)
                break;
            right = res.pos - 1;
        }else
            left = res.pos + 1;
    }
    if (cmp > 0)
        res.pos++;
    return res;
}
void CBInitAssociativeArray(CBAssociativeArray * self, unsigned char keySize, unsigned char dataSize){
    self->keySize = keySize;
    self->dataSize = dataSize;
    self->nodeSize = sizeof(*self->root) + (keySize + dataSize) * CB_BTREE_ORDER;
    self->root = malloc(self->nodeSize);
    self->root->parent = NULL;
    self->root->numElements = 0;
    for (unsigned char x = 0; x < CB_BTREE_ORDER + 1; x++)
        self->root->children[x] = NULL;
}

int main(){
    srand(1);
    CBAssociativeArray array;
    CBInitAssociativeArray(&array, 10, 10);
    int size = CB_BTREE_ORDER * (CB_BTREE_ORDER + 2) * 10;;
    unsigned char * keys = malloc(size);
    for (int x = 0; x < size; x++) {
        keys[x] = rand();
    }
    for (int x = 0; x < size; x += 10) {
        CBAssociativeArrayInsert(&array, keys + x, keys + x, CBAssociativeArrayFind(&array, keys + x), NULL);
        for (int y = 0; y <= x; y += 10) {
            if ( ! CBAssociativeArrayFind(&array, keys + y).found) {
                printf("RANDOM FIND FAIL %u - %u\n", y, x);
                return 1;
            }
        }
    }
    return 0;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:38:21.343

该问题与 memcpy 或 memmove 操作无关。拆分节点时忘记更改父指针。

在节点拆分后添加它会使其工作：

```
if (new->children[0])
    for (unsigned char x = 0; x < CB_BTREE_HALF_ORDER + 1; x++) {
        CBBTreeNode * child = new->children[x];
        child->parent = new;
    } 
```

忘记添加这是非常愚蠢的。该算法现在适用于许多随机插入。

# javascript - 在 javascript 或 JQuery 中增加 css

> ID：13425456
> 
> 赞同：0
> 
> 时间：2012-11-16T22:36:18.137
> 
> 标签：javascript, jquery, css

我有“跨度”标签，每个跨度都需要将“左”属性增加 10 像素。

前任：-

```
CSS:
span.cell_0     {   left:   0px;       }
span.cell_1     {   left:   10px;      }
span.cell_2     {   left:   20px;      }
HTML:
<span class="cell_0">name</span>
<span class="cell_1">#</span> 
```

我将javascript写成：

```
$( 'span' ).css( 'left', '+=10px' ); 
```

但我正在尝试每个跨度

正在设计布局；行和列。

```
<div class="row1">
 <span class="cell_0">name</span>
 <span class="cell_1">#</span>
</div>
<div class="row2">
 <span class="cell_0">name</span>
 <span class="cell_1">#</span>
</div> 
```

行的 CSS：

```
.row1, .row2, .row3, .row4{
font-size:12px;
padding:5px 20px 20px 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T22:41:00.217

好的，我会说你应该对有问题的 div 应用一个类：

```
<div class="indent">
   <span class="cell_0">name</span>
   <span class="cell_1">#</span>
</div>
<div class="indent">
   <span class="cell_0">name</span>
   <span class="cell_1">#</span>
</div>

$('.indent').each(function(){
    $(this).find('span').each(function(i, v){
         $(this).css('left', (i * 10) + 'px');
    });
}); 
```

这是一种方法。我不知道您对分配给每个跨度的类做了什么。但如果是为了尝试缩进，您可以从 span 中删除类，让通用选择器为您完成工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T22:50:11.717

这就是我会用你给的东西做的

```
$('span.[class^="cell_"]').each(function(i,v){ // loop through each span with class that starts with cell_
   var num = +$(v).attr('class').split('_')[1]; // get the number from the class
   $(v).css('left',(num * 10) + 'px') // use it to get the px
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T22:43:25.487

使用[Attribute Starts With Selector](http://api.jquery.com/attribute-starts-with-selector/)按类选择只需要的跨度：

```
$(document).ready(function() {
    $("[class^=cell]'").each(function(i, v){
        $(this).css('left', (i * 10) + 'px');
    });      
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T22:43:25.403

您是否使用像 jquery/prototype 这样的框架来从 html 中选择跨度？您可以只使用 document.getElementsByTagName('span') 然后循环它们并增加属性（左）

# .net - 找不到方法：'System.Type.op_Equality'

> ID：13425462
> 
> 赞同：5
> 
> 时间：2012-11-16T22:36:50.460
> 
> 标签：.net, xamarin.ios, xamarin.android, monodevelop

我收到此错误

```
System.MissingMethodException: Method not found: 'System.Type.op_Equality'. 
```

运行构建时。（可能是因为我在 Android 模拟器上，而 JIT 正在捕捉它。）

我在构建时收到这些警告：

```
Target ResolveAssemblyReferences:
/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/Microsoft.Common.targets:  warning : Reference 'Mono.Android' not resolved
        For searchpath {CandidateAssemblyFiles}
        Warning: {CandidateAssemblyFiles} not supported currently
        For searchpath {HintPathFromItem}
        HintPath attribute not found
        For searchpath {TargetFrameworkDirectory}
        Considered target framework dir /Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0, assembly named 'Mono.Android' not found.
        For searchpath {PkgConfig}
        Considered Mono.Android, but could not find in any pkg-config files.
        For searchpath {GAC}
        Considered Mono.Android, but could not find in the GAC.
        For searchpath {RawFileName} 
```

我已经在我的 Mac 上安装了 Mono for Android 和 MonoTouch。这会覆盖一些设置吗？

我也收到这些警告：

```
Target ResolveAssemblyReferences:
/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/Microsoft.Common.targets:  warning : Found a conflict between : 'System.Core, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' and 'System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'. Using 'System.Core, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' reference.
/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/Microsoft.Common.targets:  warning : Found a conflict between : 'System, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' and 'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'. Using 'System, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' reference.
/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/Microsoft.Common.targets:  warning : Found a conflict between : 'System.Xml, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' and 'System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'. Using 'System.Xml, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' reference. 
```

我确定项目编译器下只有一些我不知道的设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T00:33:35.747

看起来您以某种方式最终构建了引用 4.0 程序集的 Mono for Android 项目。从理论上讲，除非您使用文本编辑器编辑项目文件，否则这是不可能的（MonoDevelop 不允许您修改项目以便发生这种情况）。

我建议你从一个模板创建一个新的 Mono for Android 项目，然后比较两个项目文件，看看你是否可以推断出你的问题。

# sphinx - 在 Linux VPS 上安装 Sphinx

> ID：13425464
> 
> 赞同：0
> 
> 时间：2012-11-16T22:37:04.067
> 
> 标签：sphinx, vps

经过数小时的谷歌和 StackOverflow 搜索，我无法解决这个问题......

我正在尝试在我的 VPS 上安装 Sphinx Search，但我完全不知道自己在做什么。我只知道这个搜索功能对我的项目非常重要。

我在 puTTy 中尝试了以下命令来解压 Sphinx tarball：

`tar xzvf sphinx-2.0.6-release.tar.gz`

`tar -xzvf sphinx-2.0.6-release.tar.gz`

它说没有这样的文件或目录。我知道文件在那里，因为我自己把它放在那里，所以我现在假设我误解了这里发生的事情。

有人可以让我通过这一步，以便我可以在下一步迷路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:31:28.907

> 它说没有这样的文件或目录。我知道文件在那里，因为我自己把它放在那里，

可能不在正确的文件夹中 - 需要“cd”到包含文件的文件夹中。

但是由于您似乎不太熟悉 linux，因此建议您改用 RPM 文件 - 所以不必从源代码编译。

从 [http://sphinxsearch.com/downloads/release/](http://sphinxsearch.com/downloads/release/)获取 RPM ，然后上传。然后使用“yum localinstall nameofrpmfile.rpm”

检查输出`uname -a`以确定您是 64 位还是 32 位系统。如果提到 x86_64 你有 64 位，所以想要 x86_64 RPM 文件。

# macos - GitHub for Mac 应用程序内存扩展冻结 GitHub 应用程序

> ID：13425465
> 
> 赞同：0
> 
> 时间：2012-11-16T22:37:06.847
> 
> 标签：macos, git, memory, github, github-for-mac

当我尝试启动 GitHub for Mac 时，它会立即开始耗尽所有可用内存（多达 1.6 Gb），直到应用程序冻结。如何限制此应用程序的内存使用量？

我看到之前的 stackoverflow 帖子（标题为“Mac App 的内存问题”）触及了这个问题，并且我更新了我的 .gitconfig 文件，但它没有任何效果。目前尚不清楚该应用程序是否正在读取配置文件，或者如何确定它是否正在读取。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:14:29.877

我对 git 的建议是从命令行使用它。它是为从命令行使用而设计的。如果不从命令行使用它，您将丢失以下内容：

*   命令历史
*   可编写性
*   管道
*   制表符补全
*   网上有很多帮助和例子

第一个是一个大的。你会问自己“我做了什么来创建一个跟踪另一个分支的分支？”。在命令行上，您可以点击`ctrl-R`并键入“分支”。再点击`ctrl-R`几次以迭代您使用的每个场合`git branch`。当你创建那个分支时，你会发现你做了什么。按向上和向下箭头将滚动浏览您发出的先前和后续命令。您甚至可以将时间和日期添加到历史记录中，当您列出历史记录时，您可以准确地看到您做某事的时间。

脚本对于您重复执行的操作非常有用，而通过 gui 手动完成相同的任务时会很乏味。

管道非常有用，因为您可以更改一个命令的结果并将它们传递给另一个命令。我经常做的事情是

```
git branch | 
   grep 'filter for what I need' | 
   sed 'some funky transformation' |
   xargs -n 1 -i{} git push -u centralrepo {}:public/{} 
```

这是一个虚构的示例，说明您如何将一些命令串在一起以自动执行一些非常耗时的任务。

Tab-completion 非常棒，因为它可以节省您寻找存在的分支或存在的文件的时间。它是上下文相关的，因此当 git 期望列出一个文件时，选项卡将通过并开始匹配下面的文件。当它需要一个远程名称时，点击几次选项卡将为您提供远程存储库列表。当您点击两次选项卡时，部分键入的分支或文件或远程将为您提供一个子集。

获得 git 的帮助很重要。它有一个陡峭的学习曲线。git 的大部分使用来自命令行。所以当你遇到问题时，谷歌非常擅长快速找到解决方案。其他 git 工具没有这种奢侈，您可能会发现自己浪费了很多时间来寻找答案。

# android - 如何将文本视图向下推？

> ID：13425474
> 
> 赞同：0
> 
> 时间：2012-11-16T22:38:00.007
> 
> 标签：android, android-layout

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativelayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:padding="30dp" >

    <
        android:id="@+id/uconnecttitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="25dp"
        android:layout_marginBottom="5dp"
        android:scaleType="centerInside"
        android:src="@drawable/icon_logo_uconnect" />

    <EditText
        android:id="@+id/pwdfield"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/username"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:paddingLeft = "10dip"
        android:background="@drawable/edittext_background"
        android:hint="Password"
        android:password="true"
        android:textColor="#ffffff"
        android:textColorHint="#d0d0d0"
        android:textSize="24sp" 
        android:singleLine="true"
        android:imeOptions="actionDone"
        />
    <EditText
        android:id="@+id/username"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/pwdfield"
        android:layout_below="@+id/uconnecttitle"
        android:layout_marginTop="10dp"
        android:paddingLeft = "10dip"
        android:background="@drawable/edittext_background"
        android:hint="Username"
        android:textColor="#ffffff"
        android:textColorHint="#d0d0d0"
        android:textSize="24sp" 
        android:singleLine="true">
    </EditText>
    <TextView
        android:id="@+id/TextVersionNum"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="16dp"
        android:textColor="#008000"
        android:textSize="20sp"
        android:text="@string/appVersionName"
        android:visibility="gone"/>

    <Button
        android:id="@+id/loginbtn"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/pwdfield"
        android:layout_below="@+id/pwdfield"
        android:layout_marginTop="10dp"
        android:background="@drawable/button_custom"
        android:text="@string/loginButton"
        android:textColor="#ffffff"
        android:textSize="28sp"
        />

    <TextView
        android:id="@+id/UserAlert"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/pwdfield"
        android:layout_below="@+id/username"
        android:text="dfgfdgdfg"
        android:textColor="#B0171F"
        android:visibility="gone" />

    <TextView
        android:id="@+id/PwdAlert"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/loginbtn"
        android:layout_below="@+id/pwdfield"
        android:text="dsfsdf"
        android:textColor="#B0171F"
        android:visibility="gone" />

    <TextView
        android:id="@+id/troubleLoggingIn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/loginbtn"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:text="@string/troubleLoggingIn"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#0645AD" />

</RelativeLayout> 
```

我需要将 TextVersionNum 向下推，我试过了，`android:layout_marginBottom="0"`但它不会将项目拉到底部。如何将 TextVersionNum 尽可能靠近底部屏幕？我还尝试为 TroubleLoggingIn 设置填充，`android:layout_marginBottom="0"`但我没有看到任何事情发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:49:53.270

TextVersionNum 可能不在绝对底部，因为如果容器的填充：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativelayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal"
android:padding="30dp" > 
```

尝试`relativeLayout`为其他边距（顶部、左侧和右侧）设置唯一的填充。

# java - 面板掉色

> ID：13425475
> 
> 赞同：-1
> 
> 时间：2012-11-16T22:38:01.060
> 
> 标签：java, swing, jpanel, jfilechooser

当我单击激活文件选择器的按钮并添加生成的文件时，面板颜色会消失。有谁知道为什么会这样？

```
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JLabel;
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.IOException;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.filechooser.FileSystemView;
import javax.swing.JFileChooser;
import javax.swing.plaf.FileChooserUI;

@SuppressWarnings("serial")
public class pan extends JPanel implements DropTargetListener {

    private DefaultListModel listModel = new DefaultListModel();
    private JButton addbutton;
    private JButton removebutton;
    private JButton selectbutton;
    private JButton lockbutton;
    private JButton unlockbutton;

    /**
     * Create the panel.
     */
    public pan() {
        setLayout(null);
        addbutton = new JButton("New button");
        addbutton.setBounds(10, 10, 90, 100);
        addbutton.addActionListener(new Action());
        add(addbutton);

        removebutton = new JButton("New button");
        removebutton.setBounds(110, 10, 90, 100);
        add(removebutton);

        selectbutton = new JButton("New button");
        selectbutton.setBounds(210, 10, 90, 100);
        add(selectbutton);

        lockbutton = new JButton("New button");
        lockbutton.setBounds(310, 10, 90, 100);
        add(lockbutton);

        unlockbutton = new JButton("New button");
        unlockbutton.setBounds(410, 10, 90, 100);
        add(unlockbutton);

        JLabel headerLabel = new JLabel("New label");
        headerLabel.setBorder(new BevelBorder(BevelBorder.RAISED,
            Color.LIGHT_GRAY, Color.GRAY, null, null));
        headerLabel.setUI(new ModifLabelUI());
        headerLabel.setBounds(10, 120, 635, 30);
        add(headerLabel);   
    }

    class Action implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            if(e.getSource()==addbutton){

                JFileChooser filechooser=new JFileChooser();
                filechooser.setMultiSelectionEnabled(true);             
                filechooser.updateUI();
                filechooser.showOpenDialog(new pan());
                File files=filechooser.getSelectedFile();
                listModel.addElement(files);
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:11:41.433

这不适合使用`updateUI()`“将 UI 属性重置为当前外观的值”。目前尚不清楚您为什么调用该方法，但它可能会导致您观察到的颜色变化。首先删除该行。如果做不到这一点，请编辑您的问题以包含一个显示您描述的问题的[sscce](http://sscce.org/)。

还可以考虑使用非`null` [布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:47:05.857

更改最后几行`actionPerformed`方法如下：

```
 int returnVal = filechooser.showOpenDialog(new pan());
     if(returnVal == JFileChooser.APPROVE_OPTION) {
         //since its multiselection enabled, 
         //get the selected files not selected file
         File[] files=filechooser.getSelectedFiles();
         if(files != null){
           for(File file: files){
                listModel.addElement(file);
           }
         }
     } 
```

**编辑：**请确保对预期异常进行适当的异常处理，例如`HeadlessException`适当地完成。

**解释**：

1.  当浏览面板打开时，用户可以取消操作。在这种情况下，您不应该阅读这些文件，因为它们没有被选中。这就是为什么需要添加对用户选择的检查，即是否选择了文件。

2.  由于使用as`filechooser`打开，因此您需要获取所选文件而不是获取单个文件。`setMultiSelectionEnabled``true``File[]`

3.  由于您要获取多个文件，因此您需要将每个文件添加到`listModel`. 一种方法是迭代 File 数组并一次添加一个文件。其他选项可能是使用`Arrays.asList()`，获取列表并一次添加所有文件。

希望这可以帮助。

# c - C - 如何使用宏在生产版本中省略 assert()

> ID：13425477
> 
> 赞同：2
> 
> 时间：2012-11-16T22:38:13.657
> 
> 标签：c

我的问题可能与我们[何时应该在 C 中使用断言有关？](https://stackoverflow.com/questions/8114008/when-should-we-use-asserts-in-c)但是我仍然想知道当我有一个项目在一些地方散布着一堆断言时，哪个会是更好的做法：

我是否使用 DNDEBUG 标志将断言转换为无操作（如相关问题中所建议的那样），还是使用 if 宏包围所有断言

```
#ifdef TEST
#include <assert.h>
#endif

....

#ifdef TEST
    assert(...);
#endif

.... 
```

并在编译时使用 -D TEST 选项？是否有某种标准或“惯例”？我觉得后者会更整洁..谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:44:59.053

> 是否有某种标准或“惯例”？

是：`NDEBUG`在生产代码中定义。这是执行此操作的 ISO C 标准方式，并且只会为您的编译周期增加几毫秒（或与未定义相比节省一些毫秒`NDEBUG`，因为无论如何您都包含它），因为编译器/预处理器必须扫描`<assert.h>`以找出它有从您的代码中删除内容。它不会使您的可执行文件膨胀或添加任何其他类型的运行时开销，除非您在一个`#ifndef NDEBUG`块中做疯狂的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:14:01.417

这是我如何做到这一点的。代码下方讨论。

在一些 .h 文件中：

```
#define PASS ((void)0)

extern void hook(void);
extern void asserthook(void);

#ifdef DEBUG
#define ENABLE_ASSERTS
#endif // DEBUG

#ifdef ENABLE_ASSERTS
#define AssertMesg(expr, mesg) \
    do { \
        if (!(expr)) \
        { \
            asserthook(); \
            fprintf(streamErr, \
                    "%s(%d): assertion failed: ", __FILE__, __LINE__); \
            fprintf(streamErr, "%s\n", mesg); \
            fflush(streamErr); \
            Exit(10); \
        } \
    } while (0)
#define Assert(expr)  AssertMesg(expr, "")

#else // !ENABLE_ASSERTS

#define AssertMesg(expr, mesg)  PASS
#define Assert(expr)  PASS

#endif // !ENABLE_ASSERTS 
```

在一些 .c 文件中：

```
void hook(void)
{
    PASS;
}

void asserthook(void)
{
    hook();
} 
```

首先，我的断言总是调用`asserthook()`which calls `hook()`。这些函数只是设置断点的地方；我也有`errhook()`一个错误。通常我只是在`hook()`自身上设置一个断点，然后每当我的代码被断言删除时，我都会让调试器在错误处停止，堆栈回溯恰好在我需要的位置。

当您尝试创建一个类似于 C 语句的多行宏时，通常的做法是将其放在大括号中，然后将这些大括号括在`do`/中`while (0)`。那是一个执行一次的循环，所以它真的不是一个循环。但是像这样包装它意味着它是一个语句，当你在行上加上一个分号来终止语句时，它实际上是正确的。因此，像这样的代码将毫无错误地编译并做正确的事情：

```
if (error)
    AssertMesg(0, "we have an error here");
else
    printf("We don't have an error after all.\n"); 
```

如果你没有做傻`do`/`while (0)`包装，只是有花括号，上面的代码将无法工作！首先，编译器会想知道为什么你`;`在花括号之后和`else`;之前有一个 right 其次，将与宏内部`else`的隐藏相关联，并且永远不会调用 。您可以使用显式花括号解决后一个问题，但显然最好设置宏以使其适用于所有情况，这就是/为您所做的。`if``AssertMesg()``printf()``do``while (0)`

`(void)0`是我首选的无所事事声明。如果您愿意，您可以使用`do {} while (0)`，或者其他任何没有副作用且不使用任何变量的东西。

`do`/技巧最糟糕的事情`while (0)`是，您有时会看到抱怨`do`循环的错误消息，并且由于它隐藏在宏中，您需要记住真正发生的事情。但这是我所知道的使多行宏正常工作的最佳方法。

如果可能，您应该使用静态内联函数而不是宏。但是宏可以完全移植到甚至糟糕的蹩脚的 C 编译器中，并且您需要使用宏来进行断言，以便您可以正确地拥有`__FILE__`和`__LINE__`扩展。

（您可以编写一个执行实际断言的 varargs 函数，然后只需创建一个扩展为对该函数的单个调用的宏，只要 varargs 在您使用的所有编译器上都能正常工作。我想我现在可以这样做，但我已经有了多行宏解决方案，而且我已经很长时间没有碰过它了。）

# java - Java缓存和空循环检测

> ID：13425480
> 
> 赞同：0
> 
> 时间：2012-11-16T22:38:37.230
> 
> 标签：java, caching, loops, jvm

我在一篇文章中读到了这一点。但是这里给出的答案并不清楚..

```
 1\. is it true?
  2\. Can anyone explain it better?
  3\. Is there a document that explains java / JVM caching mechanism overall?

  **Which one is faster in Java ?**

  for(int i = 100000; i > 0; i--) {}
  for(int i = 1; i < 100001; i++) {}

  Answer: Which ever is run second with be fastest. The server JVM can detect and 
  eliminate loops which don't do anything. A method with either loop is compiled when 
  the loop iterates about 10,000 times. (Based on -XX:CompileThreshold=10000) The first 
  loop will take time to detect it doesn't do anything, however the second will have been
  compiled. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:03:34.063

Java 是一种高级语言，因此您编写的代码与编译器生成的代码之间会有差异。编译器和 JVM 正在尝试优化您的代码。第一个 for 不会被执行，因为它没有做任何事情，并且它不会迭代超过 10000 次。第二个 for 确实迭代，但 JVM 执行它，因为它迭代超过 10000 次。

# jpa - Heroku 的 Spring MVC Hibernate 模板应用程序未连接到数据库

> ID：13425481
> 
> 赞同：0
> 
> 时间：2012-11-16T22:38:38.297
> 
> 标签：jpa, spring-mvc, heroku

我试图让示例应用程序运行，但在尝试连接到数据库时出现以下错误：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Cannot open connection
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789) 
```

我没有更改applicationContext.xml，具体部分是：

```
 <beans profile="default">
    <jdbc:embedded-database id="dataSource"/>        
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
        </property>
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
            </props>
        </property>
    </bean>
</beans>

<beans profile="prod">
    <bean class="java.net.URI" id="dbUrl">
        <constructor-arg value="#{systemEnvironment['DATABASE_URL']}"/>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="url" value="#{ 'jdbc:postgresql://' + @dbUrl.getHost() + @dbUrl.getPath() }"/>
        <property name="username" value="#{ @dbUrl.getUserInfo().split(':')[0] }"/>
        <property name="password" value="#{ @dbUrl.getUserInfo().split(':')[1] }"/>
    </bean>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
        </property>
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <!-- change this to 'verify' before running as a production app -->
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>
</beans> 
```

我可以使用笔记本电脑上的 pgAdmin III 连接到数据库。另外，我正在学习 Spring，我看到一些 bean 被包装在配置文件“prod”中，但我无法分辨代码或 web.xml 中使用特定配置文件的任何地方。应用程序服务器（Heroku？）是否需要以特定模式/配置文件启动，这可能是数据库连接未打开的原因吗？我也在学习 Heroku。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:57:42.910

您是否尝试在本地计算机上运行应用程序？为了能够在您的本地机器上运行这个示例项目，您需要创建数据库。教程中没有描述，但如果您尝试使用示例 DATABASE_URL ( `postgres://scott:tiger@localhost/myapp`)，您需要`scott`使用密码创建用户`tiger`并创建数据库`myapp`并授予`scott`所需的权限。我做了什么，我`sampledb`用现有`postgres`用户创建了数据库，因为它是数据库管理员，我不需要理会授权，只需将 url 更改为

`export DATABASE_URL=postgres://postrges:<password>@localhost/sampledb`

# jquery-mobile - Cakephp 2.x 移动主题和前缀

> ID：13425488
> 
> 赞同：0
> 
> 时间：2012-11-16T22:38:59.863
> 
> 标签：jquery-mobile, cakephp-2.1, prefix

我目前正在为我的一个应用程序添加自定义移动布局。

应用控制器.php

```
if ($this->request->is('mobile')) {
   //$this->viewClass = 'Theme';
   $this->theme = 'Mobile';
} else {
   $this->theme = Configure::read('App.theme'); 
} 
```

工作得很好.. 现在让 jquery mobile 完美运行。但是，我想在控制器中开发单独的功能，因为主网站确实从数据库中收集了比移动版本需要的更多的数据。

所以我正在考虑一种方法，例如，如果请求移动 => 设置此前缀 = 移动或类似的东西？允许在控制器中使用单独的移动功能。

有什么建议么？

另外，我想在页面加载时设置一个参数，比如，你想查看移动版本吗？是/否。如果否 => 显示移动设备 = 假，如果是 => 显示移动设备 = 真。最好通过某种弹出窗口（如tapatalk 论坛应用程序通知）。

感谢您对此的任何帮助.. :)

-汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:59:24.447

就像您在*AppController中使用**$this->request->is('mobile')*一样，您可以在所有控制器中使用相同的方法并根据请求类型执行您的逻辑，这是实现您的目标。

 *第二;

您可以创建一个元素询问用户“是否移动？”。

在您的登录页面控制器中（或者如果您想在每个页面中进行此检查，例如，如果用户使用来自其他站点的链接登陆特定页面。然后在*AppController beforeFilter()*中执行此操作）您检查如下值：

```
$mobilePref = Configure::read('Config.mobilePreference');
if($mobilePref){
     $this->set('showMobileElement', true);
} else {
     if($mobilePref == 'Mobile'){
          $this->set('showMobileLayout', true);
     } else {
          $this->set('showMobileLayout', false);
     }
} 
```

在您的布局中，您只需检查**$showMobileLayout**，如果为 true 则显示移动布局，如果为 false 则显示正常布局。如果未设置，则检查**$showMobilePref**，如果为真，则调用“Mobile or Not?” 元素。并根据用户从元素的答案，你设置

```
 Configure::write('Config.mobilePreference', true); //or false, depending on answer 
```

大概就是这样，我想。当然，如果您正在验证用户，您应该保存用户的选择并在下次用户登录时记住它。*

# struct - 有没有办法强制转换结构以通过通道发送

> ID：13425490
> 
> 赞同：21
> 
> 时间：2012-11-16T22:39:19.573
> 
> 标签：struct, go, channel

在 GOLANG 中，是否有一种简单的方法可以为跨通道的多态行为转换结构？我正在尝试通过一个通道发送不同版本的结构，例如，我将拥有不同类型的事件，例如 LoginEvent。每一个在结构中都有不同数量的数据。

```
package main

import "fmt"

type Event struct {
    EvtType EvtType
    Username string
    Data string
}

type LoginEvent struct {
    Event
    CallBackChannel  chan *Event
}

type EvtType int

const (
    Login EvtType = iota+1
    Logout
    ChatMessage
    Presense
    BuddyList
)

func main() {
    fakeOutputChan := make(chan<- *Event)

        ourSrvChannel := make(chan *Event)
        lg := (LoginEvent{Event{Login,"",""} ,ourSrvChannel})
    fakeOutputChan <- (*Event)(&lg)

    fmt.Println("Hello, playground")
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-16T23:12:57.123

惯用的方法是使用接口，然后在接收端进行类型断言。理想情况下，您的`Event`结构应该是一个接口。

```
type Event interface {
    // Methods defining data all events share.
}

type UserEvent struct {
    Name string
}

// Define methods on *UserEvent to have it qualify as Event interface.

type LoginEvent struct {
    ...
}

// Define methods on *LoginEvent to have it qualify as Event interface. 
```

然后，您可以定义您的频道以接受任何符合`Event`接口条件的内容。

```
ch := make(chan Event) 
```

接收端将接收`Event`对象并可以进行类型断言以查看其基础的具体类型：

```
select {
case evt := <- ch:
    if evt == nil {
        return
    }

    switch evt.(type) {
    case *LoginEvent:

    case *UserEvent:

    ....
    }
} 
```

# jquery - 自动完成脚本以 JSON 格式返回 id

> ID：13425491
> 
> 赞同：0
> 
> 时间：2012-11-16T22:39:22.300
> 
> 标签：jquery, autocomplete

我正在对我的文本框使用自动完成功能。我希望检索到我的 json 的 ID 应该存储在隐藏的文本框中 id="special" 以逗号分隔保存。假设我在自动建议中选择的任何值，其 id 应该存储在以逗号分隔的隐藏文本框中。我怎样才能最小化这段代码。我是 jquery 的新手。

```
$(".artist").focus().autocomplete( '<?php echo HTTP_PATH . '/artists/getArtistList'; ?>', {
            multiple: true,
            mustMatch: true,
            matchContains: true,
            scroll: true,
            minChars: 0,
            autoFill: true,
            dataType: "json",
            parse: function(data) {
                return $.map(data, function(item) {
                    return { data: item, value: item.name, result: item.name};
                });
            },
            formatItem: function(item) {
                return item.name;
            },
            formatResult: function(item) {
                return item.id;
            },
            formatMatch: function(item) {
                return item.name;
            } 
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T01:12:50.403

您是在使用 jQuery UI 还是在使用其他插件？如果您使用的是 jQuery UI，那么您可以参考[http://jqueryui.com/autocomplete/#remote-jsonp](http://jqueryui.com/autocomplete/#remote-jsonp)

# wifi - 如何编辑android的标准类？

> ID：13425493
> 
> 赞同：1
> 
> 时间：2012-11-16T22:39:29.380
> 
> 标签：wifi, android-wifi, wifimanager, wifi-direct

我正在尝试构建一个从 WiFi 接入点获取信息的应用程序，但是，此信息不是标准信息。我正在从接入点传输附加信息。现在要接收此信息，我需要修改“WifiInfo”类。我不确定我该怎么做。我试着用谷歌搜索它，但没有运气。

是否有可能做到这一点？如果是，如何，我可以使用任何替代方式吗？

在此先感谢您的帮助。:)

# mysql - Mysql搜索包含通配符的记录

> ID：13425501
> 
> 赞同：2
> 
> 时间：2012-11-16T22:40:41.583
> 
> 标签：mysql, vin

我有一张包含数万个 VIN 号码的表格。他们中的许多人都是这样看的：
6MMTL#A423T######
WVWZZZ3BZ1?######
MPATFS27H??######
SCA2D680?7UH#####
SAJAC871?68H06###

# 代表一个数字，而 ? 一封信（AZ）。

我想搜索以下内容：6MMTL8A423T000000。

我正在努力找出逻辑。我应该使用函数吗？我应该使用 mysql 正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:21:52.730

正则表达式匹配将是解决此问题的好方法。您需要做的是将 vin 表达式转换为代表您所指示的逻辑的有效正则表达式。这是一个简单的方法：

```
replace(replace(vin,'#','[0-9]'),'?','[A-Z]') 
```

这将转换`6MMTL#A423T######`为`6MMTL[0-9]A423T[0-9][0-9][0-9][0-9][0-9][0-9]`. 现在使用这个转换后的格式，做一个正则表达式匹配查询：

```
select vin
from vins
where '6MMTL8A423T000000' regexp replace(replace(vin,'#','[0-9]'),'?','[A-Z]') 
```

样本输出：`6MMTL#A423T######`

演示：[http ://www.sqlfiddle.com/#!2/ee4de/4](http://www.sqlfiddle.com/#!2/ee4de/4)

# windows - 用于 cygwin 的较新 gcc

> ID：13425502
> 
> 赞同：2
> 
> 时间：2012-11-16T22:40:46.910
> 
> 标签：windows, gcc, g++, cygwin

我`cygwin`用来编译我的`C++`程序，但它使用`gcc 3.4.4`，是否有它的更新版本`cygwin`，或者至少是更新版本的`gcc`端口`windows`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T17:33:42.167

安装“gcc4”包（不是“gcc”）以获得 GCC 4.5.3 或（可选）更高版本。

有点难找！这也让我困惑了一段时间。

# c - 分离的 pthread 会死吗？

> ID：13425503
> 
> 赞同：0
> 
> 时间：2012-11-16T22:40:50.647
> 
> 标签：c, pthreads, posix

分离的 pthread 会死吗？线程可以在不停止主进程的情况下被操作系统杀死吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:49:07.833

如果您将一个分离的线程编程为在完成其工作后死亡，那么它将会死亡。在完成其工作后，该函数可以简单地结束或调用`pthread_exit`。

您可以通过发送带有`pthread_kill`或使用全局标志或 IPC 形式（如管道或消息队列）的信号来终止与另一个线程分离的线程。请注意，“杀死”这个词在英语和编程中的多重含义之间是模棱两可的。需要对线程进行编程以对使用的任何通知机制做出反应。例如，应为线程安装信号处理程序，并使用`pthread_kill`或发送非进程范围的信号，例如 SIGUSR1 `pthread_sigqueue`。最后，pthreads 有一个取消机制，您可以使用 using`pthread_cancel`和相关调用。在所有这些场景中，重点是必须对线程进行编程以处理优雅地终止的请求，但“分离”并不意味着“无法访问”。

如果信号的处置是停止、继续或终止，它将影响整个进程，而不是单个线程。

# c# - 如何用队列和睡眠组织多线程

> ID：13425508
> 
> 赞同：0
> 
> 时间：2012-11-16T22:41:07.037
> 
> 标签：c#, winforms, twitter

**为什么我真的需要这个：（**底部问题的简单描述，在edit3下）

让我们想象一下，我尝试为 twitter 创建应用程序。它有尽可能多的帐户，我现在或以后要添加（例如 10 个）。因此，对于每个帐户，我们都有一个选项：

1.  来自 rss 的推文；
2.  跟随人；
3.  转发任何推文。

当我们谈论一个帐户时，每个任务都应该在后台工作并在其他任务中同步。对于其中一个帐户，一次（请求太多）不会有推特和关注。

好的，这意味着，我一次只能为每个帐户执行一项任务。这是否意味着，我必须为这个时刻帐户中的每个活动组织一个线程？但是线程是什么，告诉每个帐户下一步该做什么（填满队列）？一个账号想推特，另一个只是转发和关注人：

1.  (thread 1) Account A：整天想从RSS/文件推文；
2.  （线程2）账号B：想每30秒转发一次，每15分钟关注人一次；
3.  （线程 3）：应该填满“帐户 A”的队列（制作 twite，制作 twite，制作 twite）；
4.  （线程 4）：应该填满“帐户 B”的队列（进行转发，进行转发（在 15 分钟内，每 30 秒）...关注人，进行转发...）；

在这种情况下，当每个帐户的一个线程刚刚开始工作（队列中的内容->他做了什么）而另一个线程刚刚填满队列时，我可以在我的功能中添加**手动任务**（现在，我所有的账户，转发这个 twite或跟随这个人），-在每个队列中，我将添加一个新任务，然后每个线程尽快执行该任务。

所以，我的目标（目标）是创建一个应用程序，每个帐户都应该在其中工作，我可以选择告诉他们下一步该做什么（更改他们的任务优先级）。

我想问你，我对每个 acc 2 个线程，关于队列（也许它应该是一个全局队列，线程使用帐户作为标记（分隔符）来执行任务）是否正确，也许你可以建议我关于我的任务的一些事情。

**编辑：** 那里最大的问题是，如果我创建 20 个帐户，但只有 5 个线程（限制）- 所以它不应该是 1 个 acc-> 2 线程，应该是 1 个线程来填充队列（看起来像全球），以及其他用于制作工作 - 但他们可以为一个帐户制作作品（一个线程制作 twite，其他线程开始关注用户），这让我陷入困境， - 不明白，我应该如何组织所有这个线程。

**Edit2：**还有一个问题：执行时间。我是否应该检查每个线程时间，何时执行任务（计划下一个小时的任务）（现在 23:55，这个任务将在 23:59 执行，-下一步是什么？跳过？睡觉？）。

如果我不应该检查时间并且在队列中只添加任务，那已经准备好执行，我又遇到了一个帐户一个任务的问题（设置添加 twite 15 秒延迟，添加转发 20 秒延迟，跟随人们 60 秒延迟） => 每分钟我将有 3 个任务在队列中，但应该一个一个地执行（我有 100 个帐户，但只有 5 个工作线程（它们应该相互同步，什么帐户任务现在执行其他线程？）） .

**Edit3（让它变得简单）：** 好吧，让我们忘记推特吧。我要编写 Windows 桌面应用程序，它应该在控制台中写一些东西（让它成为“来自 Bob 的你好”、“来自 Bob 的嗨”、“来自 Bob 的再见”）。

我可以在我的程序中添加很多名字（Bob、Jack、John、Dave、Scott）并检查这些名字应该写什么短语：

1.  Bob 每 15 秒只写一次“来自 Bob 的你好”；
2.  杰克每 1 分钟写一次“来自杰克的你好”，每 5 秒写一次“来自杰克的再见”；
3.  John 写 'hello', 'hi', 'bye' + from 'John', 5 seconds, 10 seconds, 15 seconds;
4.  等（假设为 20 个名称）；

我希望，这样好吗？

所以，现在，当我启动我的应用程序时，这 20 个名字中的每一个都应该在控制台中写下他们的短语，但是要在他们的时间和所有线程中进行（让限制它有 10 个工作线程） - 应该是每个名字一个任务（如果一个线程现在写 'hello from Jack'，其他线程不应该写 'bye from Jack'，即使这个任务应该在 01:42:00 执行。只有当 Jack 完成一项任务时，其他任务才开始） .

(+) 另外，我应该有一个选项，在他们最接近的任务完成后，为这个名字中的某个人添加我想要的任何短语。

我希望，我会找到你的帮助。

**编辑4：**所以：![在此处输入图像描述](../Images/e424309d1460ebc742832f07d8e05d0a.png)

谢谢帮助，现在我知道我需要什么以及如何组织我的应用程序。

**最终实现：**

我已经使用自己的代码完成了我的任务，对我来说，解决方案看起来是最好的。

![在此处输入图像描述](../Images/dbfc73fb184e56f90991669aa0e5db52.png)

因此，当我为每个帐户生成队列并将它们放入一个全局应用程序任务队列时，我将其传递给 TimerCallBack 函数，该函数检查队列中是否有任何准备好执行的任务（但仅检查 event_elements[0] ),- 如果是这样，设置 isactive = true （对于个人队列，防止执行下一个事件，在前一个完成之前），并放置这个队列，应该在迭代后执行每个第一个事件。

然后，将其作为集合传递给 Parallel.ForEach：

```
 Parallel.ForEach(readyToExec, new ParallelOptions { MaxDegreeOfParallelism = 5 }, eq =>
            {
                lock (eq)
                {
                    QueueElement exec_elem = eq.elements[0];
                    Console.WriteLine(exec_elem.timeToExecute + ": " + eq.account.Name + " " + exec_elem.EventType);
                    exec_elem.timeToExecute = DateTime.Now + exec_elem.timeDelay;
                    eq.timeLastExecute = DateTime.Now;
                    eq.elements.Sort();
                    eq.isactive = false;
                }
            }); 
```

顺便说一句，在添加要执行的事件之前添加了检查：

```
 foreach (var equeue in queue)
        {
            if (!equeue.isactive && equeue.elements[0].readyToExecute)
            {
                if (DateTime.Now > equeue.timeLastExecute + TimeSpan.FromSeconds(5))
                {
                    equeue.isactive = true;
                    readyToExec.Add(equeue);
                }
                else
                {
                    equeue.elements[0].timeToExecute = DateTime.Now + TimeSpan.FromSeconds(5);
                }
            }
        } 
```

以手动延迟执行一个帐户的事件（例如，如果在 00:00:00 写入“Hello”，则直到 00:00:05 才能开始执行下一个事件，即使此执行时间为 00 :00:02)。

所以，它对我很有用；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T01:28:04.537

我的第一个倾向是使用优先级队列和[Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)。这就是我的做法。

首先，创建一个全局`Stopwatch`来维护应用程序时间。您不希望夏令时或其他时间更改打乱您的时间安排，因为这可能会导致您在事件之间等待太久或使事件发生得太快。所以，在某个地方你有：

```
static Stopwatch ApplicationTime = Stopwatch.StartNew(); 
```

您还有一个`Account`类，其中包含有关 Twitter 帐户的信息，最重要的是，该帐户最后一次执行操作的时间：

```
class Account
{
    // information about the account goes here

    public TimeSpan LastEventTime { get; set; }
} 
```

以及定义将要采取的动作的事件类。

```
class AccountEvent
{
    public Account acct { get; private set; }
    public TimeSpan dueTime { get; set; }
    public ActionType action { get; private set; } // follow, re-tweet, etc.

    // constructor, etc.
} 
```

最后，一个以事件时间为键的优先级队列：

```
PriorityQueue<TimeSpan, AccountEvent> EventQueue = new Priority<TimeSpan, AccountEvent>(); 
```

不幸的是，.NET 运行时库中没有内置优先级队列类。如果你做一个谷歌搜索，你可以找到几个。我多年前写的一篇文章位于[http://www.devsource.com/c/a/Languages/A-Priority-Queue-Implementation-in-C/](http://www.devsource.com/c/a/Languages/A-Priority-Queue-Implementation-in-C/)。[您可以在http://mischel.com/pubs/priqueue.zip](http://mischel.com/pubs/priqueue.zip)获得最新的源代码。请注意，我的优先级队列不是并发的；你必须在它周围包裹一个并发层。出于您的目的，`lock`在以任何方式访问队列之前进行简单的操作就足够了。

现在，如何使用所有这些东西：

假设您想每 30 分钟检查一次帐户。你会像这样创建一个新的`AccountEvent`：

```
var ev = new AccountEvent(userAccount, ApplicationTime.Elapsed.AddMinutes(30), ActionType.Follow);
EventQueue.Enqueue(ev.dueTime, ev); 
```

现在，您需要一些东西来从队列中删除项目并处理它们。这就是计时器进来的地方：

```
Timer eventTimer = new System.Threading.Timer(QueueProc, null, TimeSpan.FromSeconds(5), TimeSpan.FromMilliseconds(-1)); 
```

这将创建一个将在五秒内触发的计时器。它是一次性计时器而不是周期性计时器，这可以防止我们获得重叠的计时器滴答声。

现在，您的计时器处理程序检查队列中需要处理的事件：

```
void QueueProc(object state)
{
    while (eventQueue.Count > 0 && eventQueue.Peek().dueTime < ApplicationTime.Elapsed)
    {
        AccountEvent ev = eventQueue.Dequeue();
        // process item. See comments below.
    }
    // reset the timer so that it will fire in five seconds
    eventTimer.Change(TimeSpan.FromSeconds(5), TimeSpan.FromMilliseconds(-1));
} 
```

因为一个帐户可以有多个事件，所以事件处理有点复杂，但并不过分。您必须将当前时间与帐户的上次活动时间进行比较。如果最后一个事件太近，则在事件时间上添加一些时间，并将其与新时间一起放回队列中。

要处理项目，您可以触发异步 Web 请求（我的建议）、使用`BackgroundWorker`或触发 TPL `Task`。关键是当异步请求完成时，完成回调做的最后一件事是更新下一个事件的时间并将该事件放回队列中。

我在这里忽略了一些细节，但我认为您可以收集基本思想：至少足以开始。

# android - MapFragment：如何使用 MapActivity 函数绘制标记？

> ID：13425513
> 
> 赞同：0
> 
> 时间：2012-11-16T22:41:33.843
> 
> 标签：android, android-mapview, fragment, mapfragment

**问题：**

我需要在 ViewPager 中放置一个 MapView

**更多信息：**

由于 Mapview 将是静态的（clickable="false"），因此滚动或触摸事件不会有任何问题。ViewPager 将得到每一次触摸，仅此而已。

**我试过的：**

经过大量的谷歌搜索，我发现了这个很棒的库：[https ://github.com/inazaruk/map-fragment](https://github.com/inazaruk/map-fragment)

我在寻呼机适配器中的代码：

```
@Override
public Fragment getItem(int position) {
        return new MyMapFragment(itineraries);
} 
```

和我在 MyMapFragment 中的构造函数：

```
public ArrayList<Itinerary> itineraries;

public MyMapFragment(ArrayList<Itinerary> itineraries) {
    super();
    this.itineraries = itineraries;
} 
```

这很有效，我对结果感到非常满意，并且单击时的行为设置为 false

**我的问题：**

由于我想绘制行程，我完全卡住了。

MapFragment 没有任何 Mapview 功能。我知道我可以编辑 MyMapActivity 类并使一切工作在那里，但是如何将 ArrayList 从 Fragment 发送到 Activity 呢？

目前 MapACtivity 没有任何变量来绘制标记。所有这些信息都在 MapFragment 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:51:04.827

据我了解，请使用`ItemizedOverlay<OverlayItem>`（只需放置图像即可在地图上绘制标记）。

```
public class MyViewActivity extends MapActivity {
....
OverlayItem myMarker;
MapView myMapView;
ItemizedOverlay<OverlayItem> mItemizedoverlay;
GeoPoint mCurrentPoint;

....

Drawable drawable = this.getResources().getDrawable(R.drawable.target);
    mItemizedoverlay = new MyItemizedOverlay(drawable, this);

....

Address address = ...;
....
mCurrentPoint = new GeoPoint((int) (address.getLatitude() * 1E6), (int) (address.getLongitude() * 1E6));
myMarker = new OverlayItem(mCurrentPoint, "Submit", toSearch);
            mItemizedoverlay.addOverlay(myMarker);
            myMapView.getOverlays().add(mItemizedoverlay);

.... 
```

# jquery - Jquery html表格在不同浏览器中的排序

> ID：13425517
> 
> 赞同：0
> 
> 时间：2012-11-16T22:41:43.583
> 
> 标签：jquery, html, firefox

我有 html 和 jquery 用于对我的表进行排序（也有非标准排序（使用多 tbody））。

```
jQuery(function($) {
    var table = $('table');
    $(document).ready(function() {
        on_loaded($('.prcol'));
        $('.prcol').click(function(e) {
            on_loaded(this);
            e.preventDefault();
        });
    });

    function on_loaded(met) {
        var $sort = met;
        var $table = $('#articles-table');
        var $rows = $('tbody.analogs_art > tr', $table);
        $rows.sort(function(a, b) {
            var keyA = $('td:eq(3)', a).text().toUpperCase();;
            var keyB = $('td:eq(3)', b).text().toUpperCase();;

            if (keyA.length > 0 && isNaN(parseFloat($('td:eq(3)', b).text()))) return Ascending(keyA, keyB);
        });
        $.each($rows, function(index, row) {
            //console.log(row);
            $table.append(row);
            //$("table.123").append(row);
        });
    }

});

function Ascending(a, b) {
    if (a > b) return -1;
    if (a < b) return 1;
    return 0;
} 
```

我的代码可以在这里找到：http: [//jsfiddle.net/hGCgX/2/](http://jsfiddle.net/hGCgX/2/)

但是为什么它只在 webkit 浏览器中排序呢？在 ff 和 ie 和歌剧中，我没有看到任何变化……但是为什么呢？如何对html表格进行跨浏览器排序？也不要说我使用tablesorter，为什么你有这么多tbodie之类的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T03:39:44.120

我让它在 Opera 中排序如下：

```
$(function(){
    var $table = $('#articles-table');
    var $tbody = $('tbody.analogs_art', $table);
    var $rows = $tbody.children("tr");

    function on_loaded() {
        Array.prototype.sort.call($rows, function(a, b) {
            var keyA = Number($('td', a).eq(3).text()) || 0;
            var keyB = Number($('td', b).eq(3).text()) || 0;
            return keyB - keyA;
        });
        $.each($rows, function(index, row) {
            $tbody.append(row);
        });
    };
    $table.find("th").eq(3).on('click', function() {
        on_loaded();
    });
}); 
```

查看**[更新的小提琴](http://jsfiddle.net/hGCgX/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T20:19:01.083

在工作：

*   铬 22
*   火狐 11
*   歌剧 9.64
*   互联网浏览器 9

更新小提琴：http: [//jsfiddle.net/hGCgX/4/](http://jsfiddle.net/hGCgX/4/)

```
$(document).ready(function () {
    'use strict';
    var on_loaded = function on_loaded(col, css) {
            var rows = $('tbody.analogs_art > tr'),
                frag = $(document.createDocumentFragment()),
                trs = [];
            $.each(rows, function (index, row) {
                var tr = [],
                    val = '';
                if (row.children[col]) {
                    val = row.children[col].textContent;
                    row.children[col].className = css;
                }
                tr.push(val);
                tr.push(row);
                trs.push(tr);
            });
            if (css === 'ascending') {
                trs.sort();
            } else {
                trs.sort();
                trs.reverse();
            }
            $.each(trs, function (index, row) {
                frag.append(row[1]);
            });
            $('tbody.analogs_art').empty().append(frag);
        };
    $('#articles-table th').click(function (e) {
        var index = $('#articles-table th').index(this),
            direction = this.className === 'ascending' ? -1 : 1,
            css = direction > 0 ? 'ascending' : 'descending';
        $('#articles-table th, #articles-table td').removeClass('ascending').removeClass('descending');
        on_loaded(index, css);
        this.className = css;
        e.preventDefault();
    });
}); 
```

# php - 浏览器显示一些代码而不是页面 - smarty 模板

> ID：13425521
> 
> 赞同：1
> 
> 时间：2012-11-16T22:42:22.110
> 
> 标签：php, browser, smarty

问题是我下载了一个网页到我的本地服务器（通过 ftp）。现在浏览器显示一些代码而不是页面。该网站在 smarty 模板上运行，但这可能是也可能不是问题。

我试图跟踪这个问题，我已经知道显示的代码是主 index.php 文件的一部分，如下所示：

`=$_var['time'] && $output[$x]['tags']['state'][0][0]==1){ $_out['box']['promotions'][]=$output[$x]; } } else if ($_GET['state'] == 1) { if($output[$x]['tags']['state'][1][1]<=$_var['time'] && $output[$x]['tags']['state'][1][2]>=$_var['time'] && $output[$x]['tags']['state'][1][0]==1){ $_out['box']['news'][]=$output[$x]; } } } $_out['prodlimit']['news'] = 24; $_out['prodlimit']['promotions'] = 24; } else { for($x=0;$x=$_var['time'] && $output[$x]['tags']['state'][0][0]==1){ $_out['box']['promotions'][]=$output[$x]; } if($output[$x]['tags']['state'][1][1]<=$_var['time'] && $output[$x]['tags']['state'][1][2]>=$_var['time'] && $output[$x]['tags']['state'][1][0]==1){ $_out['box']['news'][]=$output[$x]; } } $_out['prodlimit']['news'] = 12; $_out['prodlimit']['promotions'] = 4; } // filtry $query1="select * from ".$_base[prefix]."mod_assortment_filters order by category,position,id"; $result1=mysql_query($query1); while($dane1=mysql_fetch_assoc($result1)){ $query2="select * from ".$_base[prefix]."images where module='assortment_filters' && parent='$dane1[id]' order by id limit 0,1"; $result2=mysql_query($query2); if($dane2=mysql_fetch_assoc($result2)){ $dane1[logo]=$dane2; } $_out[filters][strtolower($dane1[category])][]=$dane1; } //print_r($_out[filters]); // slideshow $query="select * from ".$_base[prefix]."mod_component_files where name like 'Slideshow:%' && visible='1'"; $result=mysql_query($query); while($dane=mysql_fetch_assoc($result)){ $_out[slideshow][]=$dane; } // smarty $smarty->assign("_out",$_out); $smarty->assign("informations",$informations); $smarty->assign('content_cell', $content_cell); $smarty->display("index.tpl"); ?>`

index.php 文件中它之前的部分是：

```
if(isset($_GET['state'])) {
for($x=0;$x<count($output);$x++){
    if ($_GET['state'] == 0) {
        if($output[$x]['tags']['state'][0][1]< 
```

前面还有一些变量声明。实际上，在我更改 index.php 中的某些内容之前，任何更改都没有效果——这通常会导致浏览器显示的代码更少。

这可能是我的本地服务器和网络服务器之间的一些 php 版本差异（我猜网络服务器有旧的 php 版本）？

我一无所知 - 我需要这个工作，所以我可以重新设计它 - 它是一个带有数据库等的电子商务网页。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:31:05.350

尝试检查所有文件的链接和路径。这通常 IDE 不会突出显示为错误，并且可能会导致一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:21:01.947

我找到了解决方案。我的 php.ini 设置为不允许短标签形式，

# php - (PHP) 通过 url 进行会话登录

> ID：13425523
> 
> 赞同：0
> 
> 时间：2012-11-16T22:42:29.003
> 
> 标签：php, html, mysql, session, login

我曾经看到一个朋友网站，它允许您通过浏览到一个 url 来查看一个私有的 php 文件。

例如，[http](http://example.com/accessthesite.php) ://example.com/accessthesite.php会显示隐藏在[http://example.com/index.php上的内容](http://example.com/index.php)

他们基本上用它来预览对他们网站的更改，因为它还没有完全启动。

因此，虽然 /index.php 有一个即将推出的页面，但如果您浏览到 /accessthesite.php，您将被重定向到 /index.php 并显示完整的网站。

知道他们是怎么做到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:46:39.017

很可能 accessthesite.php 设置了[会话变量](http://php.net/manual/en/features.sessions.php)或[cookie](http://php.net/manual/en/features.cookies.php)。设置后，index.php 包含识别此内容并显示替代视图的代码。

我自己已经将这种方法用于各种事情，但我经常发现设置第二个开发和/或登台站点更容易。在将待定更改发布到公共站点之前，可以在那里查看它们。一般来说，开发人员直接在公共站点上工作并不是一个好主意，因为可能会出现问题。您不想通过显示尚未准备好的网站给用户带来不便。

# java - Eclipse JDT dom 重构，从一个编译单元中提取类成员并添加到另一个

> ID：13425526
> 
> 赞同：1
> 
> 时间：2012-11-16T22:42:48.613
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-jdt

这是一个 groovy 脚本，它从一个编译单元中提取一个类成员，将其存储在名为 Member 的模型中，然后尝试将其添加到另一个编译单元。

我在最后一部分遇到问题，谁能帮助我。我已经通过 jdt javadoc 超链接了一段时间，但似乎找不到正确的执行顺序

```
void addMemberToTargetSourceFile(CompilationUnit cu2,  List<Member> memberToBeAddedToTargets){
    cu2.recordModifications();

    for(m in memberToBeAddedToTargets){
        AbstractTypeDeclaration type = (AbstractTypeDeclaration)cu2.types().get(0)
        type.add(m.node.asType( ASTNode.nodeClassForType(m.node.getNodeType()))
    }
    ASTRewrite astRewrite= ASTRewrite.create(cu2.getAST())
    Document doc = new Document(cu2.toString())
    TextEdit edit= astRewrite.rewriteAST(doc, null)
    edit.apply(doc)

    println "${edit.toString()}"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:37:09.617

这不能完成，因为（常规的缺点是没有强类型的异常，例如可以清楚地识别原因的异常，可以保持隐藏）

```
Exception in thread "main" java.lang.IllegalArgumentException
at org.eclipse.jdt.core.dom.ASTNode.checkNewChild(ASTNode.java:1901)
at org.eclipse.jdt.core.dom.ASTNode$NodeList.add(ASTNode.java:1269) 
```

ASTNode.checkNewChild 有一个引用相等检查，比较每个节点的 AST。包私有访问修饰符使其无法覆盖。

想到的唯一解决方案是更改库中的 ASTNode

# opengl-es - 如何为 LibGDX 生成 mipmap .png 和模型 .obj 文件？

> ID：13425527
> 
> 赞同：0
> 
> 时间：2012-11-16T22:42:48.507
> 
> 标签：opengl-es, textures, libgdx, 3d-modelling, mipmaps

我正在使用 LibGDX（用于 Android 的 OpenGL ES 2.0 包装器）。

[我在https://github.com/libgdx/libgdx/blob/master/demos/invaders/gdx-invaders/src/com/badlogic](https://github.com/libgdx/libgdx/blob/master/demos/invaders/gdx-invaders/src/com/badlogic/gdxinvaders/RendererGL20.java)找到了一些使用准备好的文件为它们加载模型和 mipmap 纹理的示例代码[/gdxinvaders/RendererGL20.java](https://github.com/libgdx/libgdx/blob/master/demos/invaders/gdx-invaders/src/com/badlogic/gdxinvaders/RendererGL20.java)它读取模型的 .obj 文件和 RGB565 格式的 .png 文件以对其应用 mipmaped 纹理。

我创建这些文件的最佳/最简单的方法是什么？

我知道 .obj 文件是由一堆工具生成的（到目前为止我安装了 Blender、Wings3D 和 Kerkythea），但对于不熟悉 3D 建模的人来说，哪些工具对用户最友好？

但更重要的是，如何生成带有 mipmap 纹理的 .png 文件？我查看的 .png ( [https://github.com/libgdx/libgdx/blob/master/demos/invaders/gdx-invaders/data/ship.png](https://github.com/libgdx/libgdx/blob/master/demos/invaders/gdx-invaders/data/ship.png) ) 似乎包含每个面的不同纹理，可能是创建的用一些工具。我浏览了已安装的 3 个工具的菜单，但没有找到导出此类 .png 文件的选项。我错过了什么？

# asp.net - DNN ASP 仅显示在主页上

> ID：13425536
> 
> 赞同：1
> 
> 时间：2012-11-16T22:43:27.107
> 
> 标签：asp.net, asp-classic, dotnetnuke

想知道我是否可以在我的 DNN 皮肤中做这样的事情，只在主页上显示一些 html，反之亦然，在带有 else 语句的内页上显示。

`<% if ((url = "/" | url = "")) { %> Doesn't work… <% } %>`

也很高兴知道这类东西的文档在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:13:56.737

存在语法错误。如果您使用的是classic-asp，那么

```
<% if (url = "/" or url = "") then
your code
    end if
  %> 
```

# jquery - 从动态生成的下拉列表中选择一个选项

> ID：13425538
> 
> 赞同：0
> 
> 时间：2012-11-16T22:43:36.583
> 
> 标签：jquery, html

我正在从我的数据库中检索有关产品的信息并填充表单，以便用户更新产品详细信息。

我想要做的是在下拉列表中预先选择数据库保存选项，以便用户清楚地看到已经为该产品加载的内容。

我不知道该怎么做？我知道如何填充表单，我已经使用文本字段完成了，但不确定如何/是否可以使用选择列表关闭它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:46:03.313

按价值计算，例如：

```
$('selector').val('whatever') 
```

或者，如果您愿意，可以使用`selected`属性来完成（如果您从数据库中获取的值实际上在某个选项的`value`属性上）：

```
$('selector').children('option[value=whatever]').attr('selected','selected') 
```

应该选择您想要的选项...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:48:56.770

要对新加载的`SELECT`框进行默认选择，只需将所需设置`option`为`selected`'

```
<select id="my-select">
    <option> -- Select -- </option>
    <option value="1">Item One</option>
    <option value="2" selected="selected">Item Two</option>
    <option value="3">Item Three</option>
</select> 
```

或者在 jQuery 中：

```
$( '#my-select' ).val( 2 ); 
```

# delphi - 将 PANSIChar 参数从 Delphi 2006 应用程序传递到 XE2 应用程序

> ID：13425539
> 
> 赞同：-1
> 
> 时间：2012-11-16T22:43:37.963
> 
> 标签：delphi, delphi-xe2, delphi-2006

我有一个使用 Delphi 2006 编译的应用程序，我想启动另一个在 XE2 中编译的应用程序并传递一个参数。我正在使用 ShellExecute 从 D2006 启动第二个应用程序，并且 ShellExecute 中的第四个参数需要 PANSIChar（作为传递给启动的应用程序的参数）。

我的 XE2 应用程序没有正确读取参数，可能是由于更改了 UNICODE 字符串。

有没有办法可以从我的 D2006 应用程序启动我的 XE2 应用程序并将字符串作为参数传递给它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T22:53:21.607

您的 Delphi 2006 程序正在调用 ANSI 版本的 ShellExecute，即 ShellExecuteA。接收 ANSI 参数。

当这些参数到达您的 Delphi XE2 程序时，它们将通过 GetCommandLine 检索。XE2 程序将调用 Unicode 版本 GetCommandLineW。

但在幕后，Windows 会为您从 ANSI 转换为 Unicode。

这种上下文相关的转换在 Windows 中一直发生。例如，您为 WM_SETTEXT 调用 SendMessageA，传递一个 PAnsiChar。但该窗口是一个 Unicode 窗口，因此接收一个 PWideChar。系统必须是这样的。其他任何事情都是无政府状态。

您的问题的根源不是一个程序使用 ANSI，而另一个程序使用 Unicode。你的问题在别处。

究竟在哪里，用这些信息是不可能知道的。一种明显的可能性是您的论点包含空格。这些空格被接收者 XE2 程序解释为参数分隔符。将你的论点用引号括起来。像这样：

```
ShellExecute(..., '"argument with spaces"', ...); 
```

另一种可能性是，当您收到参数时，您可能正在将参数转换为 PAnsiChar。如果是这样，不要。只需阅读 ParamStr(1) ，它是一个 Unicode 字符串。Windows 为您从 ANSI 转换而来。

我显然在这里最后猜测了一点，但坦率地说，没有足够的信息来明确诊断故障。但我可以确定 ANSI 文本在您的场景中被透明地转换为 Unicode。

# ios - iOS UIReferenceLibraryViewController 和字典

> ID：13425540
> 
> 赞同：1
> 
> 时间：2012-11-16T22:43:39.180
> 
> 标签：ios, dictionary, reference-library

我有两个关于 UIReferenceLibraryViewController (UIRLVC) 的问题。

我有一个用于语言教育的应用程序。我想添加字典功能。实现字典功能的一种方法是使用 UIRLVC。在阅读课程参考资料时，我对以下陈述感到困惑：

* * *

## UIReferenceLibraryViewController 对象提供了一个字典服务来从应用程序中查找单词或术语的定义。它不应用于显示单词列表、创建独立的词典应用程序或以任何形式重新发布内容。

我可以在我的应用程序中将此功能用作字典服务吗？当然，我的app，通过审核的，不仅仅是词典app，还有其他功能。

另一个相关的问题是，UIRLVC 以用户偏好设置的语言（通用 -> 国际 -> 语言）提供词典服务，换句话说，在基于西班牙语的 iPad 中，您只能查找西班牙语单词。例如，我想要在我的应用程序中拥有一本英语 -> 德语词典。我想知道这是否可以通过 UIRLVC 实现。如果是，如何？如果没有，有什么替代方法以及如何做？

非常感谢！

# python - 需要将目录结构映射到表（或文档存储）的机制

> ID：13425543
> 
> 赞同：1
> 
> 时间：2012-11-16T22:44:01.550
> 
> 标签：python, django, mongodb

*   数据库：mysql
*   语言：蟒蛇
*   框架：
*   django
*   操作系统：Linux (ubuntu)

我正在工作的当前项目点有一个目录树结构，它将由文件夹、子文件夹、文件组成。

根路径：/var/Testcases

*   文件夹 1
    *   子文件夹2
    *   文件 1
    *   文件2
*   文件夹 2
    *   子文件夹2
    *   文件 1

我可以在数据库中存储/映射“文件”的文件路径，但我需要知道目录、子目录名称是什么，因此我需要一种机制来在每次结构更改时更新结构。我已经查看了“walk”/ crawl 的其他解决方案，甚至实现了它们，但是对于如何智能地存储会经常更改的目录结构有什么建议吗？父文件夹、子文件夹和文件名都必须单独存储为一列。MongoDB 是否值得研究（我说的是我的领域）？

我可以每隔几秒钟运行一次 chron 作业来遍历目录并更新我的表以反映更改，但必须有其他路线。我希望我已经提供了足够的信息。我愿意探索各种反复试验的解决方案。我听说过有关 MongoDB 的好消息，这就是我将它扔在那里的原因。

# symfony - FOSUserBundle 生成：实体不起作用，字段的访问级别太高

> ID：13425544
> 
> 赞同：0
> 
> 时间：2012-11-16T22:44:21.300
> 
> 标签：symfony, doctrine-orm, fosuserbundle

使用 StofDoctrineExtensionsBundle 配置 DoctrineExtensions 后，FOSUserBundle 出现问题。

首先，要安装 DoctrineExtensions，我必须从 app/config/config.yml 文件中删除“auto_mapping: true”段。

我发现如果 auto_mapping 未激活，我必须在 default:mappings 段中包含 FOSUserBundle: ~ 。

但是，当我尝试

```
php app/console doctrine:schema:update --force 
```

或者

```
php app/console doctrine:generate:entities FOS 
```

我得到：

```
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/ming.ini on line 1 in Unknown on line 0
Generating entities for namespace "FOS"
PHP Fatal error:  Access level to FOS\UserBundle\Entity\User::$username must be protected (as in class FOS\UserBundle\Model\User) or weaker in /var/www/rBay/vendor/friendsofsymfony/user-bundle/FOS/UserBundle/Entity/User.php on line 17
PHP Stack trace:
PHP   1\. {main}() /var/www/rBay/app/console:0
PHP   2\. Symfony\Component\Console\Application->run() /var/www/rBay/app/console:22
PHP   3\. Symfony\Bundle\FrameworkBundle\Console\Application->doRun() /var/www/rBay/vendor/symfony/symfony/src/Symfony/Component/Console/Application.php:105
PHP   4\. Symfony\Component\Console\Application->doRun() /var/www/rBay/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Console/Application.php:78
PHP   5\. Symfony\Component\Console\Command\Command->run() /var/www/rBay/vendor/symfony/symfony/src/Symfony/Component/Console/Application.php:192
PHP   6\. Doctrine\Bundle\DoctrineBundle\Command\GenerateEntitiesDoctrineCommand->execute() /var/www/rBay/vendor/symfony/symfony/src/Symfony/Component/Console/Command/Command.php:238
PHP   7\. Doctrine\Bundle\DoctrineBundle\Mapping\MetadataFactory->getNamespaceMetadata() /var/www/rBay/vendor/doctrine/doctrine-bundle/Doctrine/Bundle/DoctrineBundle/Command/GenerateEntitiesDoctrineCommand.php:109
PHP   8\. Doctrine\Bundle\DoctrineBundle\Mapping\MetadataFactory->getMetadataForNamespace() /var/www/rBay/vendor/doctrine/doctrine-bundle/Doctrine/Bundle/DoctrineBundle/Mapping/MetadataFactory.php:97
PHP   9\. Doctrine\Bundle\DoctrineBundle\Mapping\MetadataFactory->getAllMetadata() /var/www/rBay/vendor/doctrine/doctrine-bundle/Doctrine/Bundle/DoctrineBundle/Mapping/MetadataFactory.php:160
PHP  10\. Doctrine\Common\Persistence\Mapping\AbstractClassMetadataFactory->getAllMetadata() /var/www/rBay/vendor/doctrine/doctrine-bundle/Doctrine/Bundle/DoctrineBundle/Mapping/MetadataFactory.php:196
PHP  11\. Doctrine\Common\Persistence\Mapping\Driver\MappingDriverChain->getAllClassNames() /var/www/rBay/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/AbstractClassMetadataFactory.php:111
PHP  12\. Doctrine\Common\Persistence\Mapping\Driver\AnnotationDriver->getAllClassNames() /var/www/rBay/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/Driver/MappingDriverChain.php:132
PHP  13\. require_once() /var/www/rBay/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/Driver/AnnotationDriver.php:194
PHP  14\. Symfony\Component\ClassLoader\DebugClassLoader->loadClass() /var/www/rBay/vendor/symfony/symfony/src/Symfony/Component/ClassLoader/DebugClassLoader.php:0
PHP  15\. require() /var/www/rBay/vendor/symfony/symfony/src/Symfony/Component/ClassLoader/DebugClassLoader.php:82

Fatal error: Access level to FOS\UserBundle\Entity\User::$username must be protected (as in class FOS\UserBundle\Model\User) or weaker in /var/www/rBay/vendor/friendsofsymfony/user-bundle/FOS/UserBundle/Entity/User.php on line 17

Call Stack:
0.0002     644752   1\. {main}() /var/www/rBay/app/console:0
0.0132    3467080   2\. Symfony\Component\Console\Application->run() /var/www/rBay/app/console:22
0.0155    3851816   3\. Symfony\Bundle\FrameworkBundle\Console\Application->doRun() /var/www/rBay/vendor/symfony/symfony/src/Symfony/Component/Console/Application.php:105
2.3154   50066792   4\. Symfony\Component\Console\Application->doRun() /var/www/rBay/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Console/Application.php:78
2.3187   50066792   5\. Symfony\Component\Console\Command\Command->run() /var/www/rBay/vendor/symfony/symfony/src/Symfony/Component/Console/Application.php:192
2.3192   50068328   6\. Doctrine\Bundle\DoctrineBundle\Command\GenerateEntitiesDoctrineCommand->execute() /var/www/rBay/vendor/symfony/symfony/src/Symfony/Component/Console/Command/Command.php:238
2.3208   50178008   7\. Doctrine\Bundle\DoctrineBundle\Mapping\MetadataFactory->getNamespaceMetadata() /var/www/rBay/vendor/doctrine/doctrine-bundle/Doctrine/Bundle/DoctrineBundle/Command/GenerateEntitiesDoctrineCommand.php:109
2.3208   50178008   8\. Doctrine\Bundle\DoctrineBundle\Mapping\MetadataFactory->getMetadataForNamespace() /var/www/rBay/vendor/doctrine/doctrine-bundle/Doctrine/Bundle/DoctrineBundle/Mapping/MetadataFactory.php:97
2.3208   50178320   9\. Doctrine\Bundle\DoctrineBundle\Mapping\MetadataFactory->getAllMetadata() /var/www/rBay/vendor/doctrine/doctrine-bundle/Doctrine/Bundle/DoctrineBundle/Mapping/MetadataFactory.php:160
2.3307   50203984  10\. Doctrine\Common\Persistence\Mapping\AbstractClassMetadataFactory->getAllMetadata() /var/www/rBay/vendor/doctrine/doctrine-bundle/Doctrine/Bundle/DoctrineBundle/Mapping/MetadataFactory.php:196
2.3308   50204456  11\. Doctrine\Common\Persistence\Mapping\Driver\MappingDriverChain->getAllClassNames() /var/www/rBay/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/AbstractClassMetadataFactory.php:111
2.3308   50205408  12\. Doctrine\Common\Persistence\Mapping\Driver\AnnotationDriver->getAllClassNames() /var/www/rBay/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/Driver/MappingDriverChain.php:132
2.3428   52000872  13\. require_once('/var/www/rBay/src/MSoft/UserBundle/Entity/User.php') /var/www/rBay/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/Driver/AnnotationDriver.php:194
2.3428   52001400  14\. Symfony\Component\ClassLoader\DebugClassLoader->loadClass() /var/www/rBay/vendor/symfony/symfony/src/Symfony/Component/ClassLoader/DebugClassLoader.php:0
2.3431   52081336  15\. require('/var/www/rBay/vendor/friendsofsymfony/user-bundle/FOS/UserBundle/Entity/User.php') /var/www/rBay/vendor/symfony/symfony/src/Symfony/Component/ClassLoader/DebugClassLoader.php:82 
```

我也会附上我的配置文件的相关区域，以防万一......

```
doctrine:
dbal:
    driver:   %database_driver%
    host:     %database_host%
    port:     %database_port%
    dbname:   %database_name%
    user:     %database_user%
    password: %database_password%
    charset:  UTF8

orm:
    auto_generate_proxy_classes: %kernel.debug%
    entity_managers:
        default:
            connection: default
            mappings:
                gedmo_translatable:
                    type: annotation
                    prefix: Gedmo\Translatable\Entity
                    dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Translatable/Entity"
                    alias: GedmoTranslatable # this one is optional and will default to the name set for the mapping
                    is_bundle: false
                gedmo_translator:
                    type: annotation
                    prefix: Gedmo\Translator\Entity
                    dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Translator/Entity"
                    alias: GedmoTranslator # this one is optional and will default to the name set for the mapping
                    is_bundle: false
                gedmo_loggable:
                    type: annotation
                    prefix: Gedmo\Loggable\Entity
                    dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Loggable/Entity"
                    alias: GedmoLoggable # this one is optional and will default to the name set for the mapping
                    is_bundle: false
                gedmo_tree:
                    type: annotation
                    prefix: Gedmo\Tree\Entity
                    dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Tree/Entity"
                    alias: GedmoTree # this one is optional and will default to the name set for the mapping
                    is_bundle: false
                MSoftAdminBundle: ~
                MSoftUserBundle: ~
                FOSUserBundle: ~

# Fosuser Configuration
fos_user:
    db_driver: orm
    firewall_name: main
    user_class: MSoft\UserBundle\Entity\User

stof_doctrine_extensions:
    default_locale: en_US
    orm:
        default:
            tree: true
            sluggable: true 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T08:55:50.897

Solved. Problem appeared when I ran

```
php app/console doctrine:generate:entities FOS 
```

Than doctrine entity generator added properties that wasn't supposed to be there, and that made a problem. The point is that class FOS\UserBundle\Entity\User should have empty body, and generator created all the fields from FOS\UserBundle\Model\User in it, just with higher protection level ("private" instead of "protected").

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T06:39:03.920

User 类的所有属性都应该受到保护，而不是公开的。

# internet-explorer - 在 chrome 中加载照片，但在 Firefox 或 IE 中不加载

> ID：13425548
> 
> 赞同：0
> 
> 时间：2012-11-16T22:44:49.067
> 
> 标签：internet-explorer, google-chrome, firefox

这张照片[http://www.example.com/there-used-to-be-a-photo-linked-here.jpg](http://www.example.com/there-used-to-be-a-photo-linked-here.jpg)在 chrome 中加载，但不是 firefox 或 IE。

我是一名前端设计师/开发人员，为客户回答支持问题，我们认为他们在 FF 和 IE 中缺少样式表，但图像特定的 url 甚至不起作用。

有没有人经历过这个？可能是什么问题/解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:46:52.933

问题出在该服务器上的某个地方。如果我运行这个：

```
wget -O /dev/null -S 'http://www.allsaintschurch.com/uploads/all_saints_catholic_school/image/sitebg3.jpg' 
```

然后大约 5 次中有 4 次服务器响应错误页面；5 次中有 1 次以图像响应。

如果我让 wget 发送与 chrome 相同的 UA 字符串，我会在大约 90% 的时间而不是 20% 的时间内获得图像响应。因此，服务器不仅不稳定，而且以特定于 UA 字符串的方式执行此操作……

我可能会首先查看服务器上可能存在的任何 UA 嗅探逻辑。

# json - 用空对象填充的导航列表属性（ID除外）

> ID：13425555
> 
> 赞同：2
> 
> 时间：2012-11-16T22:45:20.103
> 
> 标签：json, asp.net-mvc-3, jquery

好吧，这应该很容易（但显然不适合我）。我有一个 AJAX 例程以 JSON 格式将我的所有数据发送到控制器。一切都很完美，回到控制器的模型对象属性正在正确地填充我从视图发送的所有数据。除了这些属性之一是对象列表，对于它，从视图中，我只发送应该填充列表的对象的 ID。正在发生的事情是，模型对象的 List 属性正在填充仅获取 ID 信息的实例，而我需要它做的是使用从视图发送的 List 中存在的 ID 加载所有其他属性。

一些代码来说明：

```
 // Creating Documento Json Object
        var docs = { "IDDocumento": "" };

        // Creating Lote Json Object
        var lote = { 
            "IDLote": "", 
            "Numero": "", 
            "Documentos": []
        };

        // Set Lote's Values
        lote.IDLote             = $("#IDLote").val();
        lote.Numero             = $("#Numero").val();

        $.each($('input[name="Documento"]:checked'), function (index, element) {
            var temp = $(element).attr('id').replace('Documento_', '').trim();

            // Set Documento individual Value
            docs.IDDocumento = temp; // << HERE IM FILLING WITH THE DESIRED OBJECT ID

            // adding to Lote.Documentos List Naviagtion Attribute
            lote.Documentos.push(docs);
            docs = { "IDDocumento": "" };
        });

        $.ajax({
            url: '/Lote/Edit',
            data: JSON.stringify(lote),
            type: 'POST',
            contentType: 'application/json;',
            dataType: 'json',
            success: function (result) {
                if (result.Success == "1") {
                    window.location.href = "/Lote/Index";
                }
                else {
                  //Take care of the exception...
                }
            }
        }); 
```

上面的视图被强类型化的类是：

```
public class Lote
{
    [Key]
    public int IDLote { get; set; }

    [Required]
    [MaxLength(20)]
    public string Numero {get;set;}

    public List<Documento> Documentos { get; set; } 
```

最后，导航属性对象类型的类：

```
public class Documento
{
    [Key]
    public int IDDocumento { get; set; }

    [Required]
    [MaxLength(60)]
    public string Nome { get; set; }

    public List<Lote> Lotes { get; set; }
} 
```

有什么帮助吗？

# java - gdata calendar 2.0 预约支持

> ID：13425556
> 
> 赞同：0
> 
> 时间：2012-11-16T22:45:34.377
> 
> 标签：java, google-calendar-api

我正在玩 gdata-calendar-2.0.jar 库。到目前为止，我印象非常深刻。我正在尝试使用通过日历提供的[预约空档功能。](http://support.google.com/calendar/bin/answer.py?hl=en&answer=190998)但是，我在罐子里没有找到任何东西？有谁知道这是否已移植到 java 库？我真的不希望这成为交易破坏者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:57:54.423

如果您对使用 Google Calendar API 感兴趣，我*强烈*建议您使用[v3](https://developers.google.com/google-apps/calendar/)，因为之前的版本已被弃用。API 的任何版本中目前都不提供预约空档功能，我不知道是否会提供，但在 v2 或更早版本中肯定不支持。

# ios - 为什么 iOS 上的 mmap 会失败？

> ID：13425558
> 
> 赞同：13
> 
> 时间：2012-11-16T22:45:43.560
> 
> 标签：ios, memory-management, mmap

我正在尝试使用 mmap 在 iOS 上读取和播放音频文件。它适用于最大约 400MB 的文件。但是当我尝试一个 500MB 的文件时，我得到一个 ENOMEM 错误。

```
char *path = [[[NSBundle mainBundle] pathForResource: @"test500MB" ofType: @"wav"] cStringUsingEncoding: [NSString defaultCStringEncoding]];
FILE *f = fopen( path, "rb" );
fseek( f, 0, SEEK_END );
int len = (int)ftell( f );
fseek( f, 0, SEEK_SET );

void *raw = mmap( 0, len, PROT_READ, MAP_SHARED, fileno( f ), 0 );

if ( raw == MAP_FAILED ) {
    printf( "MAP_FAILED. errno=%d", errno ); // Here it says 12, which is ENOMEM.
} 
```

**为什么？**

我很乐意回答“700MB 是虚拟内存限制，但有时地址空间是碎片化的，所以你确实得到了 700MB 但更小的块”。（这只是猜测，我还需要一个答案）

Apple doc page about virtual memory 说：

> 尽管 OS X 支持后备存储，但 iOS 不支持。在 iPhone 应用程序中，已经在磁盘上的只读数据（例如代码页）只是从内存中删除并根据需要从磁盘重新加载。

这似乎证实 mmap 应该适用于大于物理内存的块，但仍然不能解释为什么我会达到如此低的限制。

**更新**

*   [这个答案](https://stackoverflow.com/questions/9184773/is-there-a-practical-limit-on-the-number-of-memory-mapped-files-in-ios)很有趣，但 500MB 远低于它提到的 700MB 限制。
*   [这个讨论](https://stackoverflow.com/questions/726471/how-big-can-a-memory-mapped-file-be?rq=1)提到了**连续内存**。那么内存碎片可能是一个真正的问题吗？
*   我正在使用具有 256MB 物理内存的 iPod Touch 第 4 代。
*   我研究的重点是看看在从文件加载只读数据时是否有比*“继续分配直到收到内存警告”*更好的方法来管理内存。`mmap`似乎是解决这个问题的好方法......

**更新 2**

我希望 mmap 能够与新的 64 位 iOS 版本完美配合。将在我拿到 64 位设备后进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T16:20:56.560

在进一步调查并阅读**[了 John Carmack 的这篇出色的博客文章后](http://www.bethblog.com/2010/10/29/john-carmack-discusses-rage-on-iphoneipadipod-touch/)**，我的结论如下：

*   700MB 是 iOS 上的虚拟内存限制（截至 2012 年，32 位 iOS）
*   它可能在单个块中可用，也可能不可用；这取决于设备状态和应用行为

因此，为了可靠地映射 700MB 的文件数据，有必要将其分成更小的块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T22:34:01.917

我没有给你答案，但我确实在运行 6.0.1 的 iPhone 5 上测试了你的代码，并且 mmap 在 700MB ISO 文件上成功。所以我会从其他因素开始，并假设 mmap 工作正常。也许您返回的错误并不是真正由于内存造成的，或者设备本身的内存以某种方式耗尽到 mmap 失败的地方；尝试重新启动设备。根据您的 iOS 版本，我还想知道您对文件末尾的搜索是否可能导致 mmap 尝试将整个文件映射到其中；您可以尝试清理它并使用 stat 来确定文件大小，或者在映射之前关闭然后重新打开文件描述符。这些都只是想法；如果我能重现您的错误，我很乐意帮助解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:29:57.073

在这里使用 NSData 并且不要直接触摸 mmap。

要获得错误读取的优势，请使用 NSDataReadingMapped。NSData 在低内存情况下也释放字节

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T16:16:27.863

通常可用的物理内存量与您是否能够映射文件无关。这毕竟是我们正在谈论的虚拟内存。iOS 上的问题是，至少根据 iOS App Programming Guide，虚拟内存管理器只换出只读部分......从理论上讲，这意味着您不仅受到可用地址空间量的限制，但是，如果您使用除 PROT_READ 以外的任何东西进行映射，您也会受到可用 RAM 数量的限制。请参阅[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/TheiOSEnvironment/TheiOSEnvironment.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/TheiOSEnvironment/TheiOSEnvironment.html)

尽管如此，您遇到的问题很可能是缺少足够大的连续内存来映射虚拟地址空间。据我所知，Apple 没有公布用户模式进程的内存上限。通常，地址空间的上部区域是为内核保留的。您可能只有 16 位内存可在用户模式下使用。

如果不在调试器中转储内存映射，您将看不到有许多（我在 Apple 的一个简单示例应用程序中数过 100 个）共享库（dylib）加载到进程地址空间中。这些中的每一个也都映射到其中，并且每个都将分割可用的地址空间。

在 gdb 中，您应该能够使用“info proc mappings”转储内存映射。不幸的是，在 lldb 中，我能找到的唯一等价物是“图像列表”，它只显示共享库映射，而不是数据 mmap 映射。

以这种方式使用调试器，您应该能够确定地址空间是否有一个足够大的连续块来存储您尝试映射的数据，尽管需要一些工作才能发现上限（Apple 应该发布这个！）

# php - 关闭数据库连接的最佳位置在哪里？

> ID：13425560
> 
> 赞同：0
> 
> 时间：2012-11-16T22:46:01.753
> 
> 标签：php, mysql

在这段代码中，我认为最好在 if 和 else 之后关闭，但似乎关闭它两次。

```
<?php 
$member_id = "";
require("connect.php");
if (isset($_POST['member_id']))$member_id = fix_string($_POST['member_id']);

$sql=("DELETE FROM members WHERE member_id = '$member_id'");
$res = mysqli_query($con, $sql);

if (mysqli_affected_rows($con) == 1) {
    echo "member with ID of ".$member_id." has been removed from members table";
} else {
    echo "member was not deleted";
}

function fix_string($string) {
    if (get_magic_quotes_gpc()) $string = stripslashes($string);
    return htmlentities ($string);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:53:25.693

在开始时打开数据库连接并在结束时关闭连接是非常常见的做法。您无需在代码中间执行此操作。

关闭数据库连接不是绝对必需的，如[mysql_close()](http://php.net/manual/en/function.mysql-close.php)的 PHP 手册页中所见，但许多人认为这样做是一种好习惯。

有一个罕见的例外。如果您的程序将在几分钟内进行一些繁重的处理，您可能需要在此之前关闭数据库连接。如果处理后再次需要，请再次打开db连接。这样做的原因是MySQL连接最终会超时，然后可能会导致您的程序出现更多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:54:38.403

通常不需要使用 mysql_close()，因为非持久打开的链接会在脚本执行结束时自动关闭。

从php手册中直接出来。

# forms - 发送表单值 $form_state['redirect'] 表单 API Drupal

> ID：13425562
> 
> 赞同：0
> 
> 时间：2012-11-16T22:46:07.157
> 
> 标签：forms, redirect, drupal, submit, drupal-forms

我想使用表单 API drupal 发送我的表单值。我有以下价值

```
 $form['billing']["cardholders_name"] = array(
    '#type' => 'textfield',
    '#title' => t("Cardholder's Name"),
    '#required' => TRUE,
    '#prefix' => '<div class="field-wrapper-w1 card-name">'
); 
```

我在表单提交函数中编写以下代码

```
function test_form_submit($form, &$form_state) {

$form_state['redirect'] = 'www.test.com/page' . '?cname=' .  $form_state['values']['billing[cardholders_name]']; 
```

}

但它似乎不起作用。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-28T17:57:46.530

表单元素的任何值都将在 $form_state 下的值中，因此在您的函数 test_form_submit 中，您可以访问 cardholders_name

```
$form_state['values']['cardholders_name'] 
```

您也可以使用 drupal_goto() 以这种方式执行此操作

```
 drupal_goto('www.test.com/page' . '?cname=' .  $form_state['values']['cardholders_name]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T03:06:28.227

The following example appears in

[http://api.drupal.org/api/drupal/includes%21form.inc/function/drupal_redirect_form/7](http://api.drupal.org/api/drupal/includes%21form.inc/function/drupal_redirect_form/7)

```
$form_state['redirect'] = array(
  'node/123',
  array(
    'query' => array(
      'foo' => 'bar',
    ),
    'fragment' => 'baz',
  ),
); 
```

# javascript - JSFiddle 中的 jQuery Easy UI

> ID：13425564
> 
> 赞同：1
> 
> 时间：2012-11-16T22:46:15.493
> 
> 标签：javascript, jquery, jsfiddle, jquery-easyui

有人知道是否可以创建一个 jsFiddle 来使用框架[jQuery Easy UI](http://www.jeasyui.com/)吗？我无法在框架列表中选择 jQuery Easy UI。

请让我知道这是否可能以及我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:01:00.637

像这样[的jsfidde链接](http://jsfiddle.net/rW24a/)怎么样？

![添加 js fiddle 外部资源](../Images/2c673642f0a847e859c8c90d2871b6f9.png)

您应该选择 jQuery 作为您的框架，然后单击[添加资源](http://doc.jsfiddle.net/basic/introduction.html#add-resources)按钮并添加所需的 js 和 css（您可以查看[此页面](http://www.jeasyui.com/demo/main/index.php)以查看演示具有哪些依赖项）。
就你而言，我认为资源是

```
http://www.jeasyui.com/easyui/jquery.easyui.min.js 
```

和

```
http://www.jeasyui.com/easyui/themes/default/easyui.css 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:59:35.197

这是在 jsFiddle 上添加资源的文档：http: [//doc.jsfiddle.net/basic/introduction.html#add-resources](http://doc.jsfiddle.net/basic/introduction.html#add-resources)

# google-apps-script - grid.setVisible(false) 应该有高度吗？

> ID：13425567
> 
> 赞同：0
> 
> 时间：2012-11-16T22:46:45.903
> 
> 标签：google-apps-script

我试图在没有 gui 的情况下复制Serge Insas 的[这个例子](https://sites.google.com/site/appsscriptexperiments/home/multipanel-ui)。

```
var vPanel = app.createVerticalPanel();
vPanel.add(createGrid(1,1).setId(grid1);
vPanel.add(createGrid(1,1).setId(grid2);
var handler0 = app.createClientHandler()
   .forTargets(grid1).setVisible(true)
   .forTargets(grid2).setVisible(false);
 var handler1 = app.createClientHandler()
   .forTargets(grid1).setVisible(false)
   .forTargets(grid2).setVisible(true); 
```

处理程序正确设置可见性。

与示例不同，grid2 不对齐到顶部，而是位于不可见的 grid1 下方。我如何证明顶部？

注意：这仅适用于 chrome、firefox 和 explorer justify to top。

谢谢，

斯科特

编辑：添加了完整的代码

```
 function doGet(e) {
//create app
var app = UiApp.createApplication().setTitle('testCrawl');

// create components
var searchPanel = app.createVerticalPanel().setId('searchPanel').setWidth('100%');
var searchMenu = app.createMenuBar().setId('searchMenu').setWidth('100%');
var searchGrid = app.createVerticalPanel().setId('searchGrid').setWidth('100%')
                    .setHeight('100px').setVisible(false)
                    .setStyleAttribute("border","2px solid #C0C0C0")
var basicGrid = app.createGrid(1,1).setId('basicGrid').setWidth('100%').setVisible(false)
                basicGrid.setWidget(0,0, app.createLabel('Basic'));
var advancedGrid = app.createGrid(1,1).setId('advancedGrid').setWidth('100%').setVisible(false);
                advancedGrid.setWidget(0,0, app.createLabel('Advanced'));
var mapGrid = app.createGrid(1,1).setId('mapGrid').setWidth('100%').setVisible(false);
     mapGrid.setWidget(0,0, app.createLabel('Map'));
var archiveGrid = app.createGrid(1,1).setId('archiveGrid').setWidth('100%').setVisible(false);
      archiveGrid.setWidget(0,0, app.createLabel('Archive'));
var emailCartGrid = app.createGrid(1,1).setId('emailCartGrid').setWidth('100%').setVisible(false);
      emailCartGrid.setWidget(0,0, app.createLabel('EmailCart'));
var hideGrid = app.createGrid(1,1).setId('hideGrid').setWidth('100%').setVisible(false);

// add menu and grid
app.add(searchPanel);
searchPanel.add(searchMenu);
searchPanel.add(searchGrid);
searchGrid.add(basicGrid)
          .add(advancedGrid)
          .add(mapGrid)
          .add(archiveGrid)
          .add(emailCartGrid)
          .add(hideGrid);

// client handler
var handler0 = app.createClientHandler()
  .forTargets(searchGrid, basicGrid).setVisible(true)
  .forTargets(advancedGrid, mapGrid, archiveGrid, emailCartGrid,hideGrid).setVisible(false);
var hanlder1 = app.createClientHandler()
  .forTargets(searchGrid, advancedGrid).setVisible(true)
  .forTargets(basicGrid, mapGrid, archiveGrid, emailCartGrid,hideGrid).setVisible(false);
var handler2 = app.createClientHandler()
  .forTargets(searchGrid, mapGrid).setVisible(true)
  .forTargets(basicGrid, advancedGrid, archiveGrid, emailCartGrid,hideGrid).setVisible(false);
var handler3 = app.createClientHandler()
  .forTargets(searchGrid, archiveGrid).setVisible(true)
  .forTargets(basicGrid, advancedGrid, mapGrid, emailCartGrid,hideGrid).setVisible(false);
var handler4 = app.createClientHandler()
  .forTargets(searchGrid, emailCartGrid).setVisible(true)
  .forTargets(basicGrid, advancedGrid, mapGrid, archiveGrid,hideGrid).setVisible(false);
var handler5 = app.createClientHandler()
  .forTargets(searchGrid).setVisible(false);

// Create Menu Items
var menuItem0 = app.createMenuItem('Search', handler0);
var menuItem1 = app.createMenuItem('Advanced', hanlder1);
var menuItem2 = app.createMenuItem('Map', handler2);
var menuItem3 = app.createMenuItem('Archive', handler3);
var menuItem4 = app.createMenuItem('Email Cart', handler4);
var menuItem5 = app.createMenuItem('Hide', handler5).setId('hide');

//create menuItem separators
var separator0 = app.createMenuItemSeparator();
var separator1 = app.createMenuItemSeparator();
var separator2 = app.createMenuItemSeparator();
var separator3 = app.createMenuItemSeparator();
var separator4 = app.createMenuItemSeparator();
var separator5 = app.createMenuItemSeparator();
var separator6 = app.createMenuItemSeparator();

//Add the menu item separators and menuItem to the MenuBar
searchMenu.addSeparator(separator0).addItem(menuItem0).addSeparator(separator1)
  .addItem(menuItem1).addSeparator(separator2)
  .addItem(menuItem2).addSeparator(separator3)
  .addItem(menuItem3).addSeparator(separator4)
  .addItem(menuItem4).addSeparator(separator5)
  .addItem(menuItem5).addSeparator(separator6);

return app;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:46:10.917

我尝试了您的代码-对其进行了开发以使其可测试-我没有看到您提到的问题...（在 Chrome 上测试）您可以发布您的整个测试代码吗？

同时，这是我使用的测试代码（在[此处](https://script.google.com/macros/s/AKfycbwW7wgdw_fOY2XCLLoFN-GnlCQ08D7hWMV1nnnNFiGbRb5OhG4/exec)部署），垂直面板中有两个网格：

```
function doGet() {
var app = UiApp.createApplication()
  var vPanel = app.createVerticalPanel().setStyleAttribute('background', 'beige');
  var grid1 = app.createGrid(1,1).setId('grid1');
  var grid2 = app.createGrid(1,1).setId('grid2').setVisible(false);
vPanel.add(grid1.setText(0, 0, 'grid1'));
vPanel.add(grid2.setText(0, 0, 'grid2'));
var handler0 = app.createClientHandler()
   .forTargets(grid1).setVisible(true)
   .forTargets(grid2).setVisible(false);
 var handler1 = app.createClientHandler()
   .forTargets(grid1).setVisible(false)
   .forTargets(grid2).setVisible(true);
   grid2.addClickHandler(handler0)
   grid1.addClickHandler(handler1)
app.add(vPanel)   
return app
} 
```

**编辑：**如果您在垂直面板上设置边框和高度参数，那么您将不再有对齐更改。但是网格默认使用整个高度，因此您选择的值 (1) 标签位于中间...我想它将在网格中填充更多单元格，因此问题将自行消失。这是我更改的脚本部分：

```
function doGet(e) {
//create app
var app = UiApp.createApplication().setTitle('testCrawl');

// create components
var searchPanel = app.createVerticalPanel().setId('searchPanel').setWidth('100%').setHeight('100px')
                    .setStyleAttribute("border","2px solid #C0C0C0")
var searchMenu = app.createMenuBar().setId('searchMenu').setWidth('100%');
var searchGrid = app.createVerticalPanel().setId('searchGrid').setWidth('100%')
                    .setVisible(false) 
```

# sql - 如何在数据库中表示一个实体的许多相似属性？

> ID：13425574
> 
> 赞同：0
> 
> 时间：2012-11-16T22:47:23.920
> 
> 标签：sql, database, postgresql, database-design, entity-attribute-value

假设我正在建立一个关于汽车的网站。汽车实体有很多类似枚举的属性：

*   传输（手动/自动）
*   燃料（汽油/柴油/生物乙醇/电力）
*   车身风格（轿跑车/轿车/敞篷车/...）
*   空调（无/简单/双区）
*   外观颜色（黑/白/灰/蓝/绿/...）
*   内饰颜色（黑/白/灰/蓝/绿/...）
*   等等

这些属性的列表将来可能会发生变化。在数据库中建模它们的最佳方法是什么？我可以想到以下选项，但无法真正决定：

*   将`car`表中的字段与枚举值一起 使用
    *   以后很难添加更多列，可能是最快的
*   使用`car`表中作为外键引用查找表的字段
    *   以后很难添加更多的列，有点慢
*   为存储可能值的每个属性创建单独的表，并创建另一个表来存储汽车和属性值之间的连接
    *   以后容易添加更多可能的值，甚至更慢，似乎太复杂了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:53:28.110

理想的是创建一个关系数据库。DB 中的每个表都应该由一个类表示，就像在 hibernate 中一样。您应该为汽车制作 2 张桌子。一个用于内部，一个用于汽车外部。如果您想添加额外的功能，您只需添加更多列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:14:40.137

现在这是一个（非常基本的）EAV模型：

```
DROP TABLE IF EXISTS example.zvalue CASCADE;
CREATE TABLE example.zvalue
        ( val_id SERIAL NOT NULL PRIMARY KEY
        , zvalue varchar NOT NULL
        , CONSTRAINT zval_alt UNIQUE (zvalue)
        );
GRANT SELECT ON TABLE example.zvalue TO PUBLIC;

DROP TABLE IF EXISTS example.tabcol CASCADE;
CREATE TABLE example.tabcol
        ( tabcol_id SERIAL NOT NULL PRIMARY KEY
        , tab_id BIGINT NOT NULL REFERENCES example.zname(nam_id)
        , col_id BIGINT NOT NULL REFERENCES example.zname(nam_id)
        , type_id varchar NOT NULL
        , CONSTRAINT tabcol_alt UNIQUE (tab_id,col_id)
        );
GRANT SELECT ON TABLE example.tabcol TO PUBLIC;

DROP TABLE IF EXISTS example.entattval CASCADE;
CREATE TABLE example.entattval
        ( ent_id BIGINT NOT NULL
        , tabcol_id BIGINT NOT NULL REFERENCES example.tabcol(tabcol_id)
        , val_id BIGINT NOT NULL REFERENCES example.zvalue(val_id)
        , PRIMARY KEY (ent_id, tabcol_id, val_id)
        );
GRANT SELECT ON TABLE example.entattval TO PUBLIC; 
```

顺便说一句：这是为支持系统目录而定制的；您可能需要进行一些更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T00:00:33.550

这实际上是此 dba.SE 帖子的副本：

[https://dba.stackexchange.com/questions/27057/model-with-variable-number-of-properties-of-different-types](https://dba.stackexchange.com/questions/27057/model-with-variable-number-of-properties-of-different-types)

使用 hstore、json、xml、一种 EAV 模式……请参阅我在那篇文章中的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T22:58:49.990

根据查询的数量和数据库的大小，您可以：

1.  制作宽桌子
2.  创建一个属性表和一个 car_attributes 表，其中：汽车 -> car_attributes -> 属性

#1 由于更少的连接，将进行更快、更简单的查询，但 #2 更灵活

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T23:00:53.710

这取决于您需要支持的管理 UI：

*   如果有一个接口来管理例如传输的类型，您应该将其存储在一个单独的实体中。（您的选择 3）
*   如果没有这样的接口，最好的办法是存储类似的可枚举类型值。当您需要另一个（例如用于传输的“半自动”）时，您将只在 DB 模式中添加它，事实上这将是最容易支持和最快执行的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T23:51:59.253

我将创建具有列 AttributeID、CarID、PropertyName、PropertyValue 的表 CarAttributes。当返回 reslut 集时，我们将其保存在 IDictionary 中。它将允许您根据需要添加尽可能多的行，而无需添加新列。

# sql - 如何优化 ABAP 查询

> ID：13425575
> 
> 赞同：3
> 
> 时间：2012-11-16T22:47:30.467
> 
> 标签：sql, abap

我有一个查询似乎工作正常，但我想知道是否有更简洁（或更合适）的方式来编写它。

目标是在表 ZVBAPIUSW01 中找到基于给定用户 ID 的日期 (UPDPASS) 和时间 (UPDPASSTIME) 最大的记录。

这是我到目前为止所得到的：

```
SELECT SINGLE * FROM ZVBAPIUSW01
  WHERE OBJID = ID
  AND UPDPASS IN (
    SELECT MAX( UPDPASS ) FROM ZVBAPIUSW01 WHERE OBJID = ID )
  AND UPDPASSTIME IN (
    SELECT MAX( UPDPASSTIME ) FROM ZVBAPIUSW01 WHERE OBJID = ID AND UPDPASS IN (
      SELECT MAX( UPDPASS ) FROM ZVBAPIUSW01 WHERE OBJID = ID ) ). 
```

谢谢你的帮助。麦克风

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T09:33:06.673

你可以试试

```
SELECT foo bar baz
  FROM ZVBAPIUSW01 UP TO 1 ROWS
  INTO (l_foo, l_bar, l_baz)
  WHERE OBJID = ID
  ORDER BY updpass DESCENDING updpasstime DESCENDING. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:03:33.370

不要使用 Select * 而是使用 Select（必填列表）

# c++ - 类不存在默认构造函数，但未通过默认构造函数

> ID：13425576
> 
> 赞同：1
> 
> 时间：2012-11-16T22:47:33.647
> 
> 标签：c++, list, constructor, initialization, default

My Thing 类派生自具有以下构造函数的 Entity 类

```
 Entity::Entity(string sNames, double xcord, double ycord)
    :m_sName(sNames), m_dX(xcord),m_dY(ycord){} 
```

事物的构造函数是

```
 Thing::Thing(string sName, double xcord, double ycord):
    Entity(sName, xcord, ycord),
    m_iHealth(100),m_Weapon(Weapon("Fists", false, 10.0, 5, 1.0, xcord, ycord)){} 
```

问题是我的 Thing 构造函数出现错误“没有适当的默认构造函数可用”。我指定使用我的实体构造函数而不是默认值的问题是什么。为了让这个问题让我更加困惑，我有另一个派生自 Entity 的类，它可以工作

```
 Weapon::Weapon(string sName, bool iMagical, double dRange, int iDamage,double
    dRadius, double dSpawnX, double dSpawnY):
    Entity(sName, dSpawnX, dSpawnY), m_bMagical(iMagical), m_dRange(dRange), m_iDamage(iDamage),
    m_dRadius(dRadius)
{
} 
```

这运行没有错误，但它似乎与我的 Thing 构造函数完全相同，具有更多变量。我确定我错过了一些小东西，但我已经被难住了一段时间。

你是对的，有一些剩余的代码没有被注释掉。成员变量减速中的错误出现在构造函数中似乎很奇怪，但无论如何感谢。总是让我得到简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T00:22:56.010

假设`Thing::m_Weapon`被声明为`Weapon`而不是`Weapon*`、`Weapon&`或等价物，那么你需要改变它：

```
m_Weapon(Weapon("Fists", false, 10.0, 5, 1.0, xcord, ycord)) 
```

对此

```
m_Weapon("Fists", false, 10.0, 5, 1.0, xcord, ycord) 
```

您正在构建一个临时`Weapon`，然后尝试`m_Weapon`从该临时构建。大概`Weapon`没有将 a`Weapon`作为输入的复制构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T00:00:36.233

实际上，也许您`Thing`没有默认构造函数，并且需要一个。像这样的程序可能会产生如您所见的错误。

```
#include <string>
using std::string;

struct Entity {
  std::string m_sName;
  double m_dX, m_dY;
  Entity(std::string, double, double);
};
struct Weapon : Entity {
  bool m_bMagical;
  double m_dRange;
  int m_iDamage;
  double m_dRadius;
  Weapon(std::string, bool, double, int, double, double, double);
};
struct Thing : Entity {
  int m_iHealth;
  Weapon m_Weapon;
  Thing(std::string, double, double);
};

// OP's code starts here
Entity::Entity(string sNames, double xcord, double ycord)
    :m_sName(sNames), m_dX(xcord),m_dY(ycord){}

Thing::Thing(string sName, double xcord, double ycord):
    Entity(sName, xcord, ycord),
    m_iHealth(100),m_Weapon(Weapon("Fists", false, 10.0, 5, 1.0, xcord, ycord)){}

Weapon::Weapon(string sName, bool iMagical, double dRange, int iDamage,double
    dRadius, double dSpawnX, double dSpawnY):
    Entity(sName, dSpawnX, dSpawnY), m_bMagical(iMagical), m_dRange(dRange), m_iDamage(iDamage),
    m_dRadius(dRadius)
{
}
// OP's code ends here

int main () {
  Thing th;
} 
```

在 g++ 下，准确的错误是：

```
th.cc: In function ‘int main()’:
th.cc:40: error: no matching function for call to ‘Thing::Thing()’
th.cc:27: note: candidates are: Thing::Thing(std::string, double, double)
th.cc:16: note:                 Thing::Thing(const Thing&) 
```

# python - 在python中匹配字符串模式

> ID：13425580
> 
> 赞同：1
> 
> 时间：2012-11-16T22:48:07.767
> 
> 标签：python, regex

我有一个可以包含链接的字符串：

```
<a href="http://site1.com/">Hello</a> <a href="http://site2.com/">Hello2</a>
<a href="http://site3.com">Hello3</a> ... 
```

如何提取所有 html 标签“Hello”、“Hello2”、“Hello3”...的文本（不是链接）？我正在考虑一个应该包含所有文本的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:50:58.187

使用[lxml](http://codespeak.net/lxml/)：

```
import lxml.html as LH

content = '''
<a href="http://site1.com/">Hello</a> <a href="http://site2.com/">Hello2</a>
<a href="http://site3.com">Hello3</a>
<a href="/">go <b>home</b>, dude!</a>
'''

doc = LH.fromstring(content)
texts = [elt.text_content() for elt in doc.xpath('//a')]
print(texts) 
```

产量

```
['Hello', 'Hello2', 'Hello3', 'go home, dude!'] 
```

# python - 使用 Python 正则表达式处理 twitter 数据

> ID：13425584
> 
> 赞同：2
> 
> 时间：2012-11-16T22:48:40.097
> 
> 标签：python, regex, twitter

我正在过滤我的应用程序中的推文，并希望返回文本中包含特定单词的所有推文。因此，如果我正在过滤 BBC，并且我想要 BBC 的所有实例，例如。BBC、bbc、BBC1、#BBC、@bbc，我该如何编写正则表达式。

到目前为止，我正在做：

```
re.compile(r'#|@[0-9]'+term, re.IGNORECASE) 
```

术语是一个包含单词的列表，我只想返回列表中的那些单词，额外的 @ 或 # 或 0-9 前置或附加该单词​​或单词本身。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:13:24.437

使用`'\b'`分隔符查找整个单词：

```
re.compile(r'\b(?:#|@|)[0-9]*%s[0-9]*\b' % re.escape(term), re.IGNORECASE) 
```

# mbeans - Mbean 已注册但在 mbean 服务器中未找到

> ID：13425594
> 
> 赞同：1
> 
> 时间：2012-11-16T22:49:07.297
> 
> 标签：mbeans, jmx-ws

我对 mbean 有疑问。我创建了一个简单的 mbean，并在运行的默认 mBeanServer 上注册了它（通过 eclipse 或 java -jar mbean.jar），如果我尝试通过简单查询找到注册的 mbean，则在同一过程中：

```
for (ObjectInstance instance : mbs.queryMBeans(ObjectNameMbean, null)) {
    System.out.println(instance.toString());
} 
```

查询返回我的 mbean，但如果我启动另一个进程并尝试搜索这个注册的 mbean，则找不到 mbeas！为什么？

方法是：（正在运行的进程）

```
public static void main(String[] args) throws Exception
{
    MBeanServer mbeanServer =ManagementFactory.getPlatformMBeanServer(); 
    ObjectName objectName = new ObjectName(ObjectNameMbean);
    Simple simple = new Simple (1, 0);
    mbeanServer.registerMBean(simple, objectName);
    while (true)
    {
       wait (Is this necessary?)
    }
} 
```

所以这是第一个正在运行的进程（它具有注册 mbean 的唯一目的，因为还有另一个进程想要读取这些信息。所以我启动另一个进程来搜索这个 mbean 但什么也没有。我没有使用 jboss但是本地 Java 虚拟机，但我的范围是将这个简单的应用程序部署在一个 ejb（自动启动）中，另一个 ejb 将读取所有信息。所有建议都非常感谢。

这个例子应该更有用：

对象你好：

```
public class Hello implements HelloMBean { 
    public void sayHello() { 
    System.out.println("hello, world"); 
    } 

    public int add(int x, int y) { 
    return x + y; 
    } 

    public String getName() { 
    return this.name; 
    } 

    public int getCacheSize() { 
    return this.cacheSize; 
    } 

    public synchronized void setCacheSize(int size) { 
    this.cacheSize = size; 

    System.out.println("Cache size now " + this.cacheSize); 
    } 

    private final String name = "Reginald"; 
    private int cacheSize = DEFAULT_CACHE_SIZE; 
    private static final int DEFAULT_CACHE_SIZE = 200; 
} 
```

接口 HelloBean（由 Hello 实现）

```
public interface HelloMBean { 

    public void sayHello(); 
    public int add(int x, int y); 

    public String getName(); 

    public int getCacheSize(); 
    public void setCacheSize(int size); 
} 
```

简单的主要

```
import java.lang.management.ManagementFactory;
import java.util.logging.Logger;

import javax.management.MBeanServer;
import javax.management.ObjectName;

public class Main { 

    static Logger aLog = Logger.getLogger("MBeanTest");

    public static void main(String[] args)  {

        try{

            MBeanServer mbs = ManagementFactory.getPlatformMBeanServer(); 

            ObjectName name = new ObjectName("ApplicationDomain:type=Hello"); 

            Hello mbean = new Hello(); 

            mbs.registerMBean(mbean, name); 

            //      System.out.println(mbs.getAttribute(name, "Name"));
            aLog.info("Waiting forever..."); 
            Thread.sleep(Long.MAX_VALUE);
        }
        catch(Exception x){
            x.printStackTrace();
            aLog.info("exception");
        }
    } 
} 
```

因此，现在我已将此项目导出为 jar 文件并将其作为“java -jar helloBean.jar”运行，并且通过 eclipse，我已修改主类以使用相同的对象名读取此读取的信息（示例“名称”属性）注册它。

主要阅读：

```
public static void main(String[] args)  {

    try{

        MBeanServer mbs = ManagementFactory.getPlatformMBeanServer(); 

        ObjectName name = new ObjectName("ApplicationDomain:type=Hello"); 

        System.out.println(mbs.getAttribute(name, "Name"));

    }
    catch(Exception x){
        x.printStackTrace();
        aLog.info("exception");
    }
} 
```

但是什么都没有，没有找到bean。

项目链接：[这里](http://docs.oracle.com/javase/tutorial/jmx/examples/jmx_examples.zip "帮助")！

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:23:22.487

我怀疑这里的问题是您有多个 MBeanServer 实例。您没有提到在每种情况下如何获取 MBeanServer，但在您的第二个代码示例中，您正在创建一个新的 MBeanServer 实例，该实例可能与其他线程正在读取的实例不同。（我假设这一切都在一个 JVM 中......）

如果您使用的是平台代理，我建议您使用[ManagementFactory](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/ManagementFactory.html)获取 MBeanServer ，如下所示：

```
MBeanServer mbs = java.lang.management.ManagementFactory.getPlatformMBeanServer() ; 
```

这样，您将始终获得相同的 MBeanServer 实例。

# apache - 将域重定向到新域，排除一个 url + 发送所有帖子并获取数据

> ID：13425595
> 
> 赞同：0
> 
> 时间：2012-11-16T22:49:26.833
> 
> 标签：apache, mod-rewrite

我已将我的网站迁移到一个新域，现在面临一些困难。有人在外部网站上购买并付款后，他会返回旧网站，并根据以下规则将他重定向到新网站：

```
RewriteCond %{HTTP_HOST} !^oldsite\.com$
RewriteRule ^(.*)$ http://newsite.com/$1 [R=301,L] 
```

我的问题是，当他被重定向到新域时，他丢失了返回的有关购买的所有数据（状态等）。

我想我可以做两件事 - 在旧域上处理购买（我目前无法更改支付公司的退货 URL）。为了做到这一点，我需要排除特定的 URL，我试图通过在前面的代码之前添加它来做到这一点：

```
 RewriteCond %{HTTP_HOST} !^purchase\_online\_td.\php$ 
```

但什么都没有，不工作。尝试了许多变化。

所以我需要解决没有重定向的 POST 数据，或者排除 URL。由于事情的紧迫性，任何一个都很好……谢谢你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:52:21.460

尝试删除下划线转义，因为您不需要它们。另外，你有错误的变量

```
RewriteCond %{REQUEST_URI} !^purchase_online_td\.php$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:53:18.400

您需要**编辑旧域的 DNS 记录，**以便它们都指向您的新站点。然后更新您的链接结构。所以不会有来自旧域的**重定向。**

# android - 安卓谷歌地图我的位置

> ID：13425596
> 
> 赞同：1
> 
> 时间：2012-11-16T22:49:34.683
> 
> 标签：android, google-maps, gps, mylocationoverlay

我有谷歌地图活动，我想在其中获取我的位置，但我面临 NullPointerException ......

```
locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
Location location = locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
System.out.println("loaded4");
myPoint = new GeoPoint((int)(location.getLatitude()*1E6),(int)(location.getLongitude()*1E6));
System.out.println("loaded5"); 
```

我能够得到“loaded4”但不能得到“loaded5”所以 NullPointer 原因在它们之间。我也尝试使用 GPS_PROVIDER，但没有成功。

是的，我在清单中拥有所有权限。如果我不搜索我的位置，地图可以加载。

是否有可能是 NullPointer，因为在此之前我在同一个类中加载了一些其他坐标？也许它的模拟器故障？如果需要，我可以提供扩展代码。使用来自[http://www.chupamobile.com/tutorial/details/53的源代码](http://www.chupamobile.com/tutorial/details/53)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:57:02.630

`locManager.getLastKnownLocation`如果当前服务已关闭，则返回 null（查看文档[http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)）。

如果您使用的是模拟器，则需要发送位置信息。如果您使用的是 Eclipse，请打开 DDMS 透视图并从“Location Controls”面板发送位置数据。([如何在 Android Emulator 中模拟 GPS 位置？](https://stackoverflow.com/questions/2279647/how-to-emulate-gps-location-in-the-android-emulator)）。

# matlab - 针对某些变量最小化函数

> ID：13425597
> 
> 赞同：1
> 
> 时间：2012-11-16T22:49:45.400
> 
> 标签：matlab, minimize

我有一个功能

> `function [result] = mleGARCH1(r,a0,a1,b1,mu)`

除了将作为输入的 r 之外，我想最小化所有变量。

我应该如何格式化`fminsearch`函数来获得它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:55:52.240

尝试匿名函数：

```
[xmin result] = fminsearch(@(x) mleGARCH1(r,x(1),x(2),x(3),x(4)), [ initial values ]); 
```

# c++ - 如果从 QObject 派生的类的构造函数抛出，会发出 destroy() 吗？

> ID：13425601
> 
> 赞同：5
> 
> 时间：2012-11-16T22:50:05.513
> 
> 标签：c++, qt, qobject

我到处都看到了如下的 Qt GUI 语法：

```
myDialog::myDialog(QWidget *parent, Qt::WFlags flags):QDialog(parent, flags)
{
    QPushButton *button = new QPushButton("&Download", this);
    QVBoxLayout *layout = new QVBoxLayout(this);
    //something that can throw here
    layout ->addWidget(button );
    setLayout(layout);
} 
```

我一直想知道如果发生异常，这是否会泄漏，因为我作为按钮和布局的父级提供的“this”没有完全构建，因此它可能不会破坏它的子级。

我在 MSVC2010 Qt4.8.3 中进行了尝试，看起来一旦完全创建了基本 QObject 类（当然首先完成），就可以将“this”传递给构造函数中的其他对象，它们将被销毁正确。

我还没有在 Qt 文档中找到可以保证这一点的地方，有人可以指出我，这样我就可以保证这在未来不会改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:15:30.640

我相信标准 C++ 可以保证[在派生构造函数之前执行基本构造函数](http://www.learncpp.com/cpp-tutorial/113-order-of-construction-of-derived-classes/)，尽管我不能引用标准中的章节。也就是说，可以保证[QObject 的析构函数](http://doc-snapshot.qt-project.org/4.8/qobject.html#dtor.QObject)将始终销毁该 QObject 的任何子级。

Qt 约定是指针传递给 QObject 或 QWidget 构造函数的 QObject 将成为新构造对象的父对象。因此，当您传递`this`给`button`的 ctor 时，`button`将成为 的子级`myDialog`。`myDialog`由于那时已经构建了 QObject 部分，我相信您可以放心地依赖该功能。

编辑：我应该在上面给出的示例中补充一点，虽然由于构造函数`button`的原因，它开始作为子级，但在添加到并成为的孙子级时，它会重新成为父级，它仍应被其 QObject 析构函数删除。`myDialog``layout``myDialog`

# jquery - 循环 2 个 jquery 动画，其中一个具有初始延迟

> ID：13425615
> 
> 赞同：0
> 
> 时间：2012-11-16T22:51:41.480
> 
> 标签：jquery, function, animation, loops

我有 2 个 jquery 动画。我希望它们都无限循环。第二个动画需要延迟 3 秒，但只有第一次触发。一旦第二个动画开始，就不需要延迟了。

到目前为止，我已经创建了代码的条带化版本以使其更清晰。

的HTML：

```
<div class="block1"></div>
<div class="block2"></div> 
```

CSS：

```
div.block1,
div.block2 { 
  position: absolute;
  display: block;
  top: -100%;
  height: 100%;
  width: 100%; } 
```

jQuery

```
function block1(){
  $("#block1").animate({ top: '100%'}, 6000, 'linear', function(){ $(this).css('top', '-100%') });
  block1();
}

function block2(){
  $("#block2").animate({ top: '100%'}, 6000, 'linear', function(){ $(this).css('top', '-100%') });
  block2();
}

block1();
block2(); 
```

所以我有两个问题。首先，当我尝试调用第二个函数（block2）时，它不起作用。其次，我不确定如何应用我所追求的延迟。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:10:21.363

您可以使用此代码最初设置延迟，然后动画将无限工作而没有任何延迟。setTimeout 将以指定的延迟调用 block1 函数，一旦第一个动画完成，它将调用第二个动画，这将无限期地继续。

JS：

```
function block1() {
    $(".block1").animate({
        top: '+=10px'
    }, 600, 'linear', function() {
        block2();
    });
}

function block2() {
    $(".block2").animate({
        top: '+=10px'
    }, 600, 'linear', function() {
        block1();
    });
}

setTimeout(block1, 3000);​ 
```

CSS：

```
div.block1, div.block2 { 
  position: absolute;
  display: block;
  top: 0;
  height: 100px;
    width: 100px; 
   background-color: red; 
}

div.block2 { top: 200px; } 
```

HTML：

```
<div class="block1">Block 1</div>
<div class="block2">Block 2</div>​ 
```

[工作演示](http://jsfiddle.net/24GvB/2/)

# c++ - 具有默认参数作为模板类型的函数

> ID：13425618
> 
> 赞同：4
> 
> 时间：2012-11-16T22:51:53.133
> 
> 标签：c++, templates, overloading

我正在尝试使用具有默认参数的函数作为函数指针模板参数：

```
template <void (*F)()>
class A {};

void foo1(int a = 0) {}
void foo2() {}

int main() 
{
    //A<foo1> a1;   <-- doesn't work
    A<foo2> a2;
} 
```

编译器错误是：

> main.cpp:7:7：错误：无法将模板参数“foo1”转换为“void (*)()”</p>

是否有特定的语法可以工作？还是特定的语言限制？否则，替代方法是使用两个单独的函数而不是默认参数：

```
void foo1(int a) {}
void foo1() { foo1(0); } 
```

**更新** 我知道签名是不同的，但我想知道是否有一种方法可以方便地进行这项工作，而无需使用默认参数修改所有函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T23:00:17.130

的签名`foo1`是`void(int)`，不是`void()`。这就是为什么它不能转换为`void(*)()`.

您将默认参数与重载混淆了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T23:00:09.843

默认参数值不是函数类型的一部分。您不能将`foo1`其用作不带参数的函数，因为它确实只带一个参数。如果您不提及它，该论点就会为您填充，但它仍然存在。

您涉及调度功能的解决方法听起来像是一个很好的解决方案。如果您非常需要它，它甚至可以被模板化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T23:01:12.697

我很确定函数指针具有扩展所有默认参数的函数签名，并且函数指针无法转换为具有不同签名的函数指针。但是，在标准中找到这一点是另一回事……

我认为标准中的相关条款是 8.3.5 [dcl.fct] 第 6 段：

> ...返回类型、参数类型列表、引用限定符和 cv-qualifier-seq，但不是默认参数 (8.3.6) 或异常规范 (15.4)，是函数的一部分类型。[注：函数类型在函数指针、函数引用和成员函数指针的赋值和初始化过程中检查。——尾注]

请注意，*默认参数*是`= value`根据 8.3.6 [dcl.fct.default] 第 1 段的形式：

> 如果在参数声明中指定了初始化子句，则此初始化子句用作默认参数。...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T23:05:24.157

根据 C++ 标准的第 8.3.6 节，

> 如果在参数声明中指定了表达式，则该表达式用作默认参数。默认参数将在缺少尾随参数的调用中使用。

由于`A<foo1>`不是函数的调用，*因此*忽略默认参数。事实上，除了函数调用之外，它们在所有上下文中都会被忽略，例如

```
typedef void (*FFF)();
FFF x = foo1; 
```

不会编译，并产生与尝试`foo1`用作模板参数时相同的消息：

```
error: invalid conversion from ‘void (*)(int)’ to ‘void (*)()’ 
```

这是有道理的，因为评估默认参数是调用中的一个单独步骤：

> 8.3.6.9：每次调用函数时都会评估默认参数。

默认参数的存在不会改变函数的签名。例如，您不能使用带有默认参数的单参数函数来覆盖无参数的虚拟成员函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T23:04:45.720

它不会编译，因为`foo1`有签名：

```
void foo1(int a); 
```

您试图将其插入指向：

```
void F() 
```

函数签名不匹配。具有默认参数的事实`foo1`不会改变函数的签名（它仍然可以接受`int`）。

## 更通用的解决方案

我会说忘记模板，它们只是在这里限制你。

就个人而言，我解决回调问题的方法是使用带有**参数绑定的****函数对象**。它可以使用[boost::function](http://www.boost.org/doc/libs/1_51_0/doc/html/function/tutorial.html)库来完成，并使用[boost::bind](http://www.boost.org/doc/libs/1_51_0/libs/bind/bind.html)（或and ）绑定默认参数。**[`std::bind1st`](http://www.cplusplus.com/reference/std/functional/bind1st/)`std::bind2nd`**

 **这些 boost 库也内置于新的 C++11 标准中，as[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)和[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind).

值得一看，因为它可以让你做一些非常好的事情，比如为函数提供默认参数，或者使用类成员函数作为回调。

我链接到的网站都有很多示例代码，boost 链接有教程。**

# c# - 尝试以编程方式打开 PowerPoint 时出错

> ID：13425620
> 
> 赞同：2
> 
> 时间：2012-11-16T22:52:16.157
> 
> 标签：c#, asp.net, office-interop

我有一种使用 Microsoft.Office.Interop.PowerPoint.Application 接口将 PowerPoint 演示文稿幻灯片转换为 jpeg 文件的方法。在 Windows 2008 服务器上运行的服务应用程序中，它可以正常工作。

但是，现在我正在编写一个新的 Web 应用程序，它使用相同的进程，并且 Presentation.Open 调用上的 degubber 阻塞并出现错误：“PowerPoint 无法打开文件”。

我的环境是 Win 7，VS 2010。我正在使用具有管理员权限的域帐户进行模拟。我试图打开的 PowePoint 文件位于 c:\temp 文件夹中，该文件夹的“所有人”的 NTFS 权限设置为完整；文件不是只读的，我可以使用与我用于模拟的域帐户类似的帐户手动打开文件。我不知道问题是什么。有人可以建议发生了什么吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.IO;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

using AjaxControlToolkit;
using Microsoft.Office.Core;
using Microsoft.Office.Interop.PowerPoint;
using System.Threading;

public partial class _Default : System.Web.UI.Page
{
  private static int folderExtension;
  private static string tempSavePath,
                        fileName;

  protected void Page_Load(object sender, EventArgs e)
  {

  }

  private void Page_Error(object sender, EventArgs e)
  {
    Random r = new Random();
    int eventID = r.Next(1, 65535);
    Exception objErr = Server.GetLastError().GetBaseException();
    string err = "\nPage_Error Event" +
            "\n\nError in: " + Request.Url.ToString() +
            "\n\nError Message:" + objErr.Message.ToString() +
            "\n\nStack Trace:" + objErr.StackTrace.ToString() +
            "\n";
    uploadResult.Text = err.ToString();        
  }

  protected void AsyncFileUpload1_click(object sender, AsyncFileUploadEventArgs e)
  {
     // Temporary folder where the presentation file is uploaded.
     tempSavePath = @"c:\temp\";

     // Checks if there is a file present for uploading.
     if (AsyncFileUpload1.HasFile)
     {
        fileName = AsyncFileUpload1.FileName;

        try
        {
            AsyncFileUpload1.SaveAs(tempSavePath + fileName);
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            ConvertToJpegs();
        }
     }
     else
     {
        uploadResult.Text = "No file to upload.";
     }
 }

 // Converts the presentation slides into individual jpeg files.
 protected void ConvertToJpegs()
 {
    Microsoft.Office.Interop.PowerPoint.Application app = new Microsoft.Office.Interop.PowerPoint.Application();
    Microsoft.Office.Core.MsoTriState ofalse = Microsoft.Office.Core.MsoTriState.msoFalse;
    Microsoft.Office.Core.MsoTriState otrue = Microsoft.Office.Core.MsoTriState.msoTrue;

    Presentation pptPresentation = null;

    try
    {
     **>>> It break here with the ".Open" call <<<**   
        pptPresentation = app.Presentations.Open(tempSavePath + fileName, ofalse, ofalse, ofalse);
        pptPresentation.SaveAs(tempSavePath + ".", PpSaveAsFileType.ppSaveAsJPG, ofalse);
        Thread.Sleep(500);
    }
    catch (Exception ex1)
    {
        throw ex1;
    }
    finally
    {
        pptPresentation.Close();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:58:13.753

首先，微软似乎不支持/不推荐您尝试实现的目标：

> 所有当前版本的 Microsoft Office 都经过设计、测试和配置，可作为最终用户产品在客户端工作站上运行。他们假设一个交互式桌面和用户配置文件。*它们不提供满足设计为无人值守运行的服务器端组件的需求所必需的可重入性或安全性级别。*
> 
> Microsoft**目前不推荐**也不**支持***任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）*的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。
> 
> *如果您正在构建在服务器端上下文中运行的解决方案，您应该尝试使用已确保无人值守执行安全的组件。*或者，您应该尝试**找到允许至少部分代码在客户端运行的替代方案**。如果您使用来自服务器端解决方案的 Office 应用程序，该应用程序将缺少许多成功运行所需的功能。此外，您将承担整体解决方案稳定性的风险。

来源： http: [//support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)

话虽如此，似乎其他几个人在这些设置下也经历过类似的行为，所以我建议你看看：

*   [Powerpoint 无法打开文件](https://stackoverflow.com/questions/2081540/powerpoint-could-not-open-file)
*   [Powerpoint Interop 在 Windows 服务中失败，但在 Windows 窗体应用程序中工作正常](https://stackoverflow.com/questions/729609/powerpoint-interop-fails-in-a-windows-service-but-works-fine-in-a-windows-form-a)
*   [通过 Server 2008 上的 Windows 服务实现 Office 自动化](https://stackoverflow.com/questions/1006923/automating-office-via-windows-service-on-server-2008)

此外，为了检查您是否打开了`.pptx`右侧，我刚刚在标准台式 PC 上使用 PowerPoint Interop v. 15（适用于 Office 2013）在 C# .NET 4.5 控制台应用程序中尝试了代码示例的 PowerPoint Interop 位。这是开箱即用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:14:57.330

你如何运行你的网络应用程序？是 IIS 7.5 还是 Asp.Ne 开发服务器？如果是 asp.net 开发服务器，你应该以管理员身份启动它。如果那是 IIS，我将需要 IIS 版本。

# css - 使用 CSS 重现 Chrome 的“检查元素”功能

> ID：13425622
> 
> 赞同：0
> 
> 时间：2012-11-16T22:52:23.550
> 
> 标签：css

在 Chrome 中，如果您右键单击一个元素并选择“检查元素”，开发人员工具将打开，您的元素将以蓝色突出显示。我想用我自己的 CSS 样式重现它。这是一个例子：

![例子](../Images/797256d40f4a0bc7d04ceac7dd37bb01.png)

请注意，它实际上是使元素的前景色成为透明的蓝色。天真地更改背景颜色几乎没有效果，因为您还必须更改字体颜色并且您将无法突出显示图像。

目前，我能弄清楚如何重现前景蒙版效果的唯一方法是在原始元素的顶部创建一个具有完全相同尺寸的绝对定位元素。这似乎有点笨拙，我想知道是否有某种方法可以纯粹在 CSS 中做到这一点？

# hadoop - Hive: How to have a derived column that has stores the sentiment value from the sentiment analysis API

> ID：13425623
> 
> 赞同：2
> 
> 时间：2012-11-16T22:52:23.457
> 
> 标签：hadoop, hive, sentiment-analysis

Here's the scenario:

Say you have a Hive Table that stores twitter data.

Say it has 5 columns. One column being the Text Data.

Now How do you add a 6th column that stores the sentiment value from the Sentiment Analysis of the twitter Text data. I plan to use the Sentiment Analysis API like Sentiment140 or viralheat.

I would appreciate any tips on how to implement the "derived" column in Hive.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:23:40.287

Unfortunately, while the Hive API lets you add a new column to your table (using ALTER TABLE foo ADD COLUMNS (bar binary)), those new columns will be NULL and cannot be populated. The only way to add data to these columns is to clear the table's rows and load data from a new file, this new file having that new column's data.

To answer your question: You can't, in Hive. To do what you propose, you would have to have a file with 6 columns, the 6th already containing the sentiment analysis data. This could then be loaded into your HDFS, and queried using Hive.

EDIT: Just tried an example where I exported the table as a .csv after adding the new column (see above), and popped that into M$ Excel where I was able to perform functions on the table values. After adding functions, I just saved and uploaded the .csv, and rebuilt the table from it. Not sure if this is helpful to you specifically (since it's not likely that sentiment analysis can be done in Excel), but may be of use to anyone else just wanting to have computed columns in Hive.

References:

[https://cwiki.apache.org/Hive/gettingstarted.html#GettingStarted-DDLOperations](https://cwiki.apache.org/Hive/gettingstarted.html#GettingStarted-DDLOperations)

[http://comments.gmane.org/gmane.comp.java.hadoop.hive.user/6665](http://comments.gmane.org/gmane.comp.java.hadoop.hive.user/6665)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T08:15:31.343

You can do this in two steps without a separate table. Steps:

1.  Alter the original table to add the required column
2.  Do an "overwrite table select" of all columns + your computed column from the original table into the original table.

Caveat: This has not been tested on a clustered installation.

# iphone - 在 iPhone 上获得带有链接的文章文本的最佳方式是什么？

> ID：13425625
> 
> 赞同：0
> 
> 时间：2012-11-16T22:52:34.923
> 
> 标签：iphone, html, objective-c, ios, hyperlink

我正在制作一个 iPhone 应用程序，其中包含一堆“文章”，其中包含我想链接到其他“文章”的某些单词。我需要在 UITableViewCells 中显示文章。

如果有办法在没有网络视图的情况下做到这一点，那就太好了。

如果我需要使用网页视图，我应该只制作`<a href>`样式链接吗？我怎样才能让它跳转到文章而不创建一堆实际的 html 页面，只是让我的程序知道他们点击了那个链接，然后程序去从 plist 或其他东西中找到合适的文章？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:11:29.350

我已经创建了一个测试演示`UIWebView`，它工作正常。创建两个 HTML 文件：home.html 和 first.html。

```
// home.html
Home page. <a href="first.html">first</a>
// first.html
First page. <a href="home.html">home</a>

//viewDidLoad

self.webView.delegate = self;
NSString *htmlFilePathString = [[NSBundle mainBundle] pathForResource:@"home"  ofType:@"html"];
NSURL *htmlFileURL = [[NSURL alloc] initFileURLWithPath:htmlFilePathString];
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:htmlFileURL];
[self.webView loadRequest:request];

// webView's delegate:
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    return YES;
} 
```

# php - 什么是使用 preg_replace 查找和替换没有被花括号包围的逗号和被花括号包围的逗号的正则表达式？

> ID：13425628
> 
> 赞同：0
> 
> 时间：2012-11-16T22:53:04.857
> 
> 标签：php, regex

> **可能重复：**
> [正则表达式匹配逗号不在分组符号之间](https://stackoverflow.com/questions/6132911/regex-to-match-comma-not-between-grouping-symbols)

使用 preg_replace 查找和替换两边没有被大括号包围的逗号的正则表达式是什么？

例子：

```
$subject = "blah.blah,{blah.blah},blah.blah";

$result = "{blah.blah},{blah.blah},{blah.blah}"; 
```

避免这种和其他不需要的变化：

```
$result = "{blah.blah},{{blah.blah}},{blah.blah}"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:59:35.557

```
preg_replace("/(?<=^|,)([^{},]+)(?=$|,)/", '{$1}', "blah.blah,{blah.blah},blah.blah"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:18:58.193

答案有效，但有一个更好的正则表达式，因为后视和后视对机器来说太贵了：

```
preg_replace('/(^|,)([^{},]+)($|,)/', '$1{$2}$3', 'blah.blah,{blah.blah},blah.blah'); 
```

# java - 表“places”没有名为“smallDesc”的列

> ID：13425633
> 
> 赞同：0
> 
> 时间：2012-11-16T22:53:18.850
> 
> 标签：java, android, sql, database, sqlite

我没有看到我的代码有任何错误，我浏览了同样问题的问题但我无法解决它，我尝试将 sql 版本从 1 升级到 2，但仍然出现同样的错误。

我的代码有什么问题吗？

```
public String place_ID = "id";
public String place_LAT = "LAT";
public String place_LNG = "LNG"; 
public String place_name = "name";
public String place_number = "number";
public String place_city = "city";
public String place_country = "country";
public String place_street = "street";
public String place_smallDesc = "smallDesc";
public String place_bigDesc = "bigDesc";
public String place_site = "site";
public String place_category = "category";
public String place_imageName ="image";
public String place_rank = "rank";

final static String PASS = "testPass";
final static String db_Name = "placesManager";
final static String DBTABLE_NAME_STRING = "places";
public DatabaseHelper(Context context) {
    super(context, db_Name,null,2);
    // TODO Auto-generated constructor stub
}
@Override
public void onCreate(SQLiteDatabase db) {
String createDBQuery = "CREATE TABLE " + DBTABLE_NAME_STRING + "("
        + place_ID + " INTEGER PRIMARY KEY," + place_LAT + " REAL,"
        + place_name + " TEXT,"  + place_number + " TEXT,"
        + place_city + " TEXT,"  + place_country + " TEXT,"
        + place_street + " TEXT" + place_smallDesc + " TEXT,"
                + place_site + " TEXT" + place_category + " TEXT,"
                + place_imageName + " TEXT"+ place_rank + " INTEGER " + ")";
    db.execSQL(createDBQuery);
}
public void AddPlaces(ArrayList<Place> placesList)
{
    SQLiteDatabase db = this.getWritableDatabase(PASS);
    ContentValues cValues = new ContentValues();
    Log.d("MyTag","inserting");
    for(int i = 0;i<placesList.size();i++)
    {
    cValues.put(place_ID, placesList.get(i).ID);
    cValues.put(place_LAT, placesList.get(i).LAT);
    cValues.put(place_LNG, placesList.get(i).LNG);
    cValues.put(place_name, placesList.get(i).name);
    cValues.put(place_number, placesList.get(i).number);
    cValues.put(place_city, placesList.get(i).city);
    cValues.put(place_ID, placesList.get(i).ID);
    cValues.put(place_street, placesList.get(i).street);
    cValues.put(place_smallDesc, placesList.get(i).smallDesc);
    cValues.put(place_site, placesList.get(i).site);
    cValues.put(place_category, placesList.get(i).category);
    cValues.put(place_imageName, placesList.get(i).imageName);
    cValues.put(place_rank, placesList.get(i).rating);

    db.insert(DBTABLE_NAME_STRING, null, cValues);
    }
    Log.d("MyTag","done inserting");
    db.close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T22:54:44.397

里面`onCreate`你有：

```
 + place_street + " TEXT" + place_smallDesc + " TEXT," 
```

应该如下所示（遗漏冒号），由于冒号遗漏，合并和表的列名将与您假设的完全不同。

```
 + place_street + " TEXT, " + place_smallDesc + " TEXT," 
```

# javascript - 选择 td 的值并下载所选 td 的内容

> ID：13425634
> 
> 赞同：0
> 
> 时间：2012-11-16T22:53:20.817
> 
> 标签：javascript, jquery

我有这张桌子：

```
<table class="results" id="summary_results">
   <tr>
       <td>select all</td>
       <td>name</td>
       <td>id</td>
       <td>address</td>
       <td>url</td>
   </tr>
   <tr>
       <td>
           <input type="checkbox">
       </td>
       <td>john doe</td>
       <td>1</td>
       <td>33.85 some address</td>
       <td>http://www.domain.com</td>
   </tr>
   <tr>
       <td>
         <input type="checkbox">
       </td>
       <td>jane doe</td>
       <td>2</td>
       <td>34.85 some address</td>
       <td>http://www.domain2.com</td>
   </tr>
   <tr>
       <td>
           <input type="checkbox">
       </td>
       <td>sam</td>
       <td>3</td>
       <td>33.86 some address</td>
       <td>http://www.domain3.com</td>
  </tr>
</table> 
```

我想选择所有行，然后下载 URL 的内容，知道每个 URL 都链接到 ID。例如，第一个 url 将是`www.domain.com?id=1&report=report`.

好的，现在我让选择工作，但它只取第一个 tr 的值，而不是其他选定的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:45:06.193

我认为这里的主要问题是客户端javascript并不是真正实现您似乎想要实现的目标的最合适方法。从表中解析 URL 并用它们形成 AJAX 请求本身并不是很棘手，例如参见[这个 jsfiddle](http://jsfiddle.net/6hFpm/)。然而，正如 wsanville 在评论中指出的那样，AJAX 存在跨域限制，限制了调用任意 URL 的能力。

如果您不想离开页面，那么更可行的方法是检索 jsfiddle 中使用的方法中的 URL，然后将该列表发布到您自己的服务器。然后，您将能够在服务器上检索 URL 数据并执行更复杂的操作，然后再将数据发送回用户。类似于以下内容：

```
$.ajax({
  url:'/load_urls', //this is assuming you have some routing for the load_urls endpoint
  data:urls, //assuming you have the list of urls in a var called 'urls'
  method:'POST',
  success:function(data){
    //do something with your data
  },
  error:function(err){
    console.log(err); //it broke
  } 
```

});

我认为总体而言，您可能应该退后一步，重新评估您想要发生的事情，并查看您将要检索的 URL 的约束等等，然后如果您仍然处于loss 带着一个更具体的问题回来了。祝你好运！

# c# - 如何使用 iTextSharp 确定 PDF 文件类型

> ID：13425639
> 
> 赞同：6
> 
> 时间：2012-11-16T22:53:50.097
> 
> 标签：c#, pdf, itextsharp

有没有办法确定 PDF 文件的类型：现有 PDF 文件是扫描图像还是使用 iTextSharp 和 C# 从数据文件创建的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:32:40.903

也许您可以将一些元数据添加到您使用 iTextSharp 创建的 PDF 中。

[使用 iTextSharp 读取/修改 PDF 元数据](https://stackoverflow.com/questions/2761646/read-modify-pdf-metadata-using-itextsharp)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T23:28:23.520

文档属性/高级/Pdf Producer

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-16T11:23:08.947

在 PdfWriter 对象的监视窗口中搜索正确位置后，我刚刚使用此方法替换 PDF Producer，它更改了 PDF 中的“PDF Creator”，因为默认情况下无法访问：

```
 private static void ReplacePdfCreator(PdfWriter writer)
    {
        /*

         Warning
         * 
         This is not an option offered as is and i had to workaround it by using Reflection and change it
         manually.
         * 
         Alejandro

         */
        Type writerType = writer.GetType();
        PropertyInfo writerProperty =
            writerType.GetProperties(BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.Instance)
                      .FirstOrDefault(p => p.PropertyType == typeof(PdfDocument));

        if (writerProperty != null)
        {
            PdfDocument pd = (PdfDocument)writerProperty.GetValue(writer);
            Type pdType = pd.GetType();
            FieldInfo infoProperty =
                pdType.GetFields(BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.Instance)
                      .FirstOrDefault(p => p.Name == "info");

            if (infoProperty != null)
            {
                PdfDocument.PdfInfo pdfInfo = (PdfDocument.PdfInfo)infoProperty.GetValue(pd);

                if (pdfInfo != null)
                {
                    string creator = pdfInfo.GetAsString(new PdfName("Producer")).ToLowerInvariant();

        if(creator.Contains("itextsharp"))
        {
            // created with itext sharp
        }
        else if(creator.Contains("adobe"))
        {
            // created with adobe something (distiller, photoshop, whatever)
        }
        else if(creator.Contains("pdfpro"))
        {
            // created with pdf pro
        }
        else if(add your own comparison here, for example a scanner manufacturer software like HP's one)
        {
        }
                }
            }
        }
} 
```

# sql - 使用vba将sql数据导入excel

> ID：13425642
> 
> 赞同：2
> 
> 时间：2012-11-16T22:54:26.760
> 
> 标签：sql, vba, excel

我正在尝试将数据从 SQL 表中提取到 excel 中。我已经使用数据源工具记录了一个宏。但是，我要提取的数据量通常会使 Excel 崩溃。有没有办法在我的 vba 脚本中添加一个变量来限制从 sql 表中提取的数据？本质上是在 sql 中的 select 语句中添加 where 子句。

谢谢！

-肖恩

```
With ActiveSheet.ListObjects.Add(SourceType:=0, Source:=Array( _
    "OLEDB;Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=True;Data Source=10.22.30.215;Use Procedure for Prepare=1;Aut" _
    , _
    "o Translate=True;Packet Size=4096;Workstation ID="FakeName";Use Encryption for Data=False;Tag with column collation when possible=Fa" _
    , "lse;Initial Catalog=FakeCatelog"), Destination:=Range("$A$1")). _
    QueryTable
    .CommandType = xlCmdTable
    .CommandText = Array( _
    """FakeName""")
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = False
    .BackgroundQuery = True
    .RefreshStyle = xlInsertDeleteCells
    .SavePassword = False
    .SaveData = True
    .AdjustColumnWidth = True
    .RefreshPeriod = 0
    .PreserveColumnInfo = True
    .SourceConnectionFile = _
    "C:\UFakeFilePathodc"
    .ListObject.DisplayName = "FakeName"
    .Refresh BackgroundQuery:=False
End With
End Sub` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T23:19:43.993

尝试连接到数据库并进行查询，而不是尝试将整个数据库拉入工作表。这应该可以帮助您开始：
确保添加“Microsoft ActiveX Data Objects 6.0 Library”参考或运行此行一次：
`ActiveWorkbook.VBProject.References.AddFromGuid "{B691E011-1797-432E-907A-4D8C69339129}", 6, 0`

```
Sub QueryDB()
    Dim dbName As ADODB.Connection
    Dim dbResults As ADODB.Recordset
    Set dbName = openDBConn("YOURDATABASE", "YourTable")
    Set dbResults = dbName.Execute("SELECT * FROM YOURDATABASE")
    While Not dbResults.EOF
        'Do Something'
        dbResults.MoveNext
    Wend
End Sub

Function openDBConn(dataSource As String, table As String) As ADODB.Connection
    Dim newDBConn As ADODB.Connection
    Set newDBConn = New ADODB.Connection
    newDBConn.CommandTimeout = 60
    Dim strConn As String
    strConn = "PROVIDER=SQLOLEDB;DATA SOURCE=" & dataSource & ";INITIAL CATALOG=" & table & ";INTEGRATED SECURITY=SSPI"
    newDBConn.Open strConn
    Set openDBConn = newDBConn
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:56:49.830

一旦您对代码感到满意，可能值得将其切换到`late binding`. `Early binding`很好，因为您在开发应用程序时获得了完整的智能感知，但我发现后期绑定随着时间的推移而变得不那么麻烦并且应用程序升级到新版本。

另外，由于我经常使用连接字符串，因此最好将其贴在模块的顶部...节省了将来挖掘此硬代码的时间：

*（ps 这只是 Kevin 的代码，有一些更改；不一定是改进，而只是替代方案）*

```
Global Const strConn As String = "PROVIDER=SQLOLEDB;DATA SOURCE=" & dataSource & ";INITIAL CATALOG=" & table & ";INTEGRATED SECURITY=SSPI"
Sub QueryDB()
       Dim dbName As Object
       Dim dbResults As Object
       Set dbName = CreateObject("ADODB.Connection")
       dbName = openDBConn("YOURDATABASE", "YourTable")
       Set dbResults = CreateObject("ADODB.Recordset")
       dbResults = dbName.Execute("SELECT * FROM YOURDATABASE")
       While Not dbResults.EOF
           'Do Something'
           dbResults.MoveNext
       Wend
End Sub

Function openDBConn(dataSource As String, table As String) As ADODB.Connection
       Dim newDBConn As Object
       Set newDBConn = CreateObject("ADODB.Connection")
       newDBConn.CommandTimeout = 60

       newDBConn.Open strConn
       Set openDBConn = newDBConn
End Function 
```

# php - 保护表单不被操纵

> ID：13425646
> 
> 赞同：0
> 
> 时间：2012-11-16T22:54:44.713
> 
> 标签：php, forms

你好，亲爱的，你总是帮助我走得更远。

我的表格有问题。

提交后如何保护它免受用户操纵？

形式

```
<form method="post" action="/selling.php" />
<input type="hidden" name="user" value="{$_SESSION['session_username']}" />
<input type="hidden" name="price" value="$price" />
<input type="hidden" name="nick" value="$nick" />
<input type="hidden" name="class" value="$class" />
<input type="hidden" name="amount" value="$amount" />
<input type="submit" name="reset" class="input_submit" value="Submit" />
</form>"; 
```

它是如何工作的？

用户登录我的网站，然后根据他的“$username”，我从 DB（昵称、类）中检索他的信息，并根据某些条件为它创建一个“$amount”和“$price”。

一切都会自动进行，用户所要做的就是单击“提交”按钮。

但我发现他可以操纵整个表格并将例如“$ price”更改为0 ...

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T01:05:50.173

无论您可能从哪里获得`$amount`和`$price`来自哪里，它似乎都是在输出表格之前计算出来的。这意味着您也可以将这两个值存储在会话中，例如

```
$_SESSION['amount'] = $amount;
$_SESSION['price'] = $price; 
```

并以形式完全摆脱它们。只要您在尝试访问之前启动会话，您就可以在 sell.php 中访问这些会话：

```
session_start(); 
```

这样一来，任何敏感信息都不会显示在表单/源代码中，但仍会在 sell.php 中可用。

请记住始终在后端（即 php 代码）中进行验证，而不是在前端进行。

# vim - Vimscript：函数定义中“中止”的意义何在？

> ID：13425648
> 
> 赞同：22
> 
> 时间：2012-11-16T22:55:07.677
> 
> 标签：vim

在 vimscript 中，`function`定义可以带一个`abort`参数。引用文档，

```
When the [abort] argument is added, the function will
abort as soon as an error is detected 
```

这使我严重质疑函数在遇到错误时通常会做什么。盲目地跌入黑暗？

实际上是做什么的`abort`？它会破坏所有的`try...endtry`块吗？你什么时候想使用它，什么时候你想避免它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-17T09:20:46.937

正如 glts 所提到的，所有复杂的细节都记录在 中`:help except-compat`，答案基本上归结为 Vimscript 的向后兼容性和固有的灵活性。

从录制的宏到映射到自定义函数，这是一个自然的过程。考虑到这一点，当函数中的命令导致错误（例如`%s/foo/bar/`，不匹配和丢失`e`标志）时，处理应该继续进行。

另一方面，当您编写“工业级”映射时`try..catch`，无论如何，您几乎总是会在函数调用层次结构中使用一个块（以避免任何多行错误`Error detected while processing function: ...`，而是向用户显示一个很好的错误消息）。

因此，在实践中，大多数已发布的插件不使用`abort`, 但是`try..catch`，并且对于快速、即兴的东西，无论如何，您通常不会太在意错误处理。

# c# - 在视图中显示 ICollection

> ID：13425655
> 
> 赞同：1
> 
> 时间：2012-11-16T22:55:37.297
> 
> 标签：c#, .net, asp.net-mvc, razor

我有一个从我的 SQL 数据库自动生成的模型。

```
class Organization
{
    public Organization()
    {
        this.ContactTitles = new HashSet<ContactTitle>();
        this.OrganizationAddresses = new HashSet<OrganizationAddress>();
        this.OrganizationBusinessTypes = new HashSet<OrganizationBusinessType>();
        this.OrganizationCountries = new HashSet<OrganizationCountry>();
        this.OrganizationEmails = new HashSet<OrganizationEmail>();
        this.OrganizationMemberships = new HashSet<OrganizationMembership>();
        this.OrganizationNotes = new HashSet<OrganizationNote>();
        this.OrganizationPhones = new HashSet<OrganizationPhone>();
        this.OrganizationWebsites = new HashSet<OrganizationWebsite>();
        this.Contacts = new HashSet<Contact>();
        this.OrganizationIndustryCodes = new HashSet<OrganizationIndustryCode>();
    }

    public int OrganizationID { get; set; }
    public string Name { get; set; }

    public virtual ICollection<ContactTitle> ContactTitles { get; set; }
    public virtual ICollection<OrganizationAddress> OrganizationAddresses { get; set; }
    public virtual ICollection<OrganizationBusinessType> OrganizationBusinessTypes { get; set; }
    public virtual ICollection<OrganizationCountry> OrganizationCountries { get; set; }
    public virtual ICollection<OrganizationEmail> OrganizationEmails { get; set; }
    public virtual ICollection<OrganizationMembership> OrganizationMemberships { get; set; }
    public virtual ICollection<OrganizationNote> OrganizationNotes { get; set; }
    public virtual ICollection<OrganizationPhone> OrganizationPhones { get; set; }
    public virtual ICollection<OrganizationWebsite> OrganizationWebsites { get; set; }
    public virtual ICollection<Contact> Contacts { get; set; }
    public virtual ICollection<OrganizationIndustryCode> OrganizationIndustryCodes { get; set; }
 } 
```

在我的组织视图中，在我的索引页面上 - 它被强输入到我的组织模型中。

我正在尝试在组织索引页面上显示我认为应该在 ICollection 中的成员资格信息。除非我误解了它的作用。

当我去`@Html.DisplayFor(modelItem => item.OrganizationMemberships.`获取OrganizationMembership 表中的数据时，它不会显示在IntelliSense 上。我只需要能够显示数据，我不必使用表单提交任何更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T23:05:12.867

由于模型是一个可枚举类型——`@model PagedList.IPagedList<VAGTC.Models.Organization>`你需要在你的主视图中遍历它们：

```
@foreach (var organization in Model)
{
    @Html.DisplayFor(model => organization)
} 
```

接下来，为类创建一个[显示模板](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html)`Organization`。在`Views/Shared/DisplayTemplates`添加视图下`Organization.cshtml`：

```
@model VAGTC.Models.Organization 
```

现在这是呈现您的课程的主要视图。在这里，您可以迭代成员项目：

```
@foreach (var membership in Model.OrganizationMemberships)
{
    @Html.DisplayFor(model => membership)
} 
```

现在再次`OrganizationMembership`通过`OrganizationMembership.cshtml`在`Views/Shared/DisplayTemplates`.

# c++ - 使用 STL 数据结构

> ID：13425656
> 
> 赞同：2
> 
> 时间：2012-11-16T22:55:39.453
> 
> 标签：c++, stl, g++

请帮忙：

g++ (GCC) 3.4.4

我有两个“.hpp”文件：“UnionFind.hpp”和“Graph.hpp”。文件内容如下：

```
#ifndef UNIONFIND_HPP
#define UNIONFIND_HPP

#include <vector>

using std::vector;

class UnionFind
{
   public:
      UnionFind(uint32_t size);
      ~UnionFind();
      int find(uint32_t target);
      void join(uint32_t a, uint32_t b);
      void print();
   private:
      uint32_t size;
      uint32_t* index;
      vector<uint32_t>** sets;
};

#endif 
```

和另一个：

```
#ifndef GRAPH_HPP
#define GRAPH_HPP

#include <set>

using std::set;

class Graph
{
   public:
      Graph(uint32_t width, uint32_t length, uint32_t startN, uint32_t startP, uint32_t endN, uint32_t endP);
      ~Graph();
      int cost(uint32_t a, uint32_t b);
      void set(uint32_t a, uint32_t b, uint32_t cost);
      void print();
      bool inPath(uint32_t node);
   private:
      int32_t** adjList;
      uint32_t startN;
      uint32_t startP;
      uint32_t endN;
      uint32_t endP;
      set<uint32_t>* path;
      const uint32_t width;
      const uint32_t length;
      const uint32_t size;
      const uint32_t listWidth;
};

#endif 
```

由于某种原因，我收到以下错误：

```
./Graph.hpp:23: error: ISO C++ forbids declaration of `set' with no type
./Graph.hpp:23: error: expected `;' before '<' token 
```

我之前遇到过在“UnionFind.hpp”中不包含“using std::vector”的问题，但是将“using std::set”添加到“Graph.hpp”并不能解决问题。另外，我尝试过“使用 std::set< uint32_t >”，但这会产生以下错误：

```
./Graph.hpp:6: error: a template-id may not appear in a using-declaration
./Graph.hpp:23: error: ISO C++ forbids declaration of `set' with no type
./Graph.hpp:23: error: expected `;' before '<' token 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T22:59:51.933

改变

```
set<uint32_t>* path; 
```

至

```
std::set<uint32_t>* path; 
```

编译器将 set 理解为`set()`您在类中声明的方法。

放入头文件是一种不好的风格，`using ...;`因为您将其强制包含在您的头文件中的每个人身上。始终在头文件中使用显式命名空间。保存`using ...;`源文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:05:16.820

就像之前所说的那样，`using`在标题中使用这种风格很糟糕，主要是（至少在全局命名空间中）。

或者，消除歧义：

```
 ::set<uint32_t>* path; 
```

# jquery - 获取某个类的所有元素的ID到一个数组中

> ID：13425661
> 
> 赞同：8
> 
> 时间：2012-11-16T22:55:52.167
> 
> 标签：jquery

这是我正在尝试做的事情：

目前我正在使用它来创建一个包含所有与`.cookie`. 现在我正在获取该元素的文本值，这不是我需要的：

```
var getAllCookies = $('.cookie').text();
var cookiesArray = jQuery.makeArray(getAllCookies);
alert(cookiesArray[0]); 
```

我需要的是找到某个类（.cookie）的所有元素，获取该元素的 ID 值并将该 ID 值存储在数组中。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-16T22:58:14.257

我认为这应该做你所追求的：

```
var ids = $('.cookie').map(function(index) {
    // this callback function will be called once for each matching element
    return this.id; 
}); 
```

[的文档`map`](http://api.jquery.com/map/)。

[这是一个有效的 jsFiddle 演示](http://jsfiddle.net/kwv55/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T23:00:02.797

你可以试试：

```
var cookiesArray = [];

$('.cookie').each( function(i,e) {
    /* you can use e.id instead of $(e).attr('id') */
    cookiesArray.push($(e).attr('id'));
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T23:00:21.377

```
var cookiesArray = new Array();
$('.cookie').each(function() { 
  var id = $(this).attr(id);
  if(id != undefined) {
    cookiesArray.push(id);
  }
}); 
```

# php - 提交多个表格作为一个

> ID：13425662
> 
> 赞同：1
> 
> 时间：2012-11-16T22:55:56.783
> 
> 标签：php, javascript, jquery, forms

我在页面上有两个表格。对用户来说，它看起来像 1 种形式，而我实际上希望它是一种形式。但是我试图重用代码和包含东西的方式，我无法避免源代码中的两种形式……试图作为一种形式。

我不想做 ajax 提交，我想要一个普通的帖子提交，我的表单处理程序中有重定向。我怎样才能提交这两个，并获得在服务器端有意义的值。就像是`$_POST['form1]['whatever']` `$_POST['form2]['thing']`

也许从表格2中获取所有输入，用前缀重命名它们，然后将它们附加到表格1？我找不到这样做的非混乱方式。我认为我不需要代码，只需要一个计划。最不混乱的想法获胜。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T22:58:29.583

> 也许从表格2中获取所有输入，用前缀重命名它们，然后将它们附加到表格1？

这正是你必须做的。如果没有代码示例，答案就不会太多，所以给你。

```
$("#form2 :input").appendTo("#form1")[0].submit() 
```

现在在 php 中，您将`$_POST['thing']`包含一个包含两个值的数组。或者，您可以重命名 form2 中的所有输入：

```
$("#form2 :input").attr("name",function(name){
    return name + "_form2";
}).appendTo("#form1")[0].submit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:04:04.230

您可以尝试收集一种形式的值，`jQuery.serializeArray()`然后`hidden`从先前调用的变量存储结果中生成具有名称和值的输入，`jQuery.serializeArray()`并将它们插入到表单`submit`事件的第二种形式中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T00:06:13.897

您应该能够在 PHP 中将两个表单字段合并为一个表单。如果您的代码不允许这样做，那么它的形状一定很糟糕。

如果您使用简单的脚本，您应该能够将表单切割成生成字段的部分，而其他部分生成表单轮廓，或者作为单独的脚本，或者只是作为单独的函数。

IE：

```
<?php 

    function form_body($params) {
        // here's the code for echoing fields according to $params
    }

    function form($params) {
        // here's the code to build the form properties 
        $f_properties = '....';
        echo '<form '.$f_properties.'>';
        form_body($params);
        echo '</form>';
    }

?> 
```

然后只需将`$params`form1和form2组合起来即可获得最终形式。

如果您使用的是 OOP，可能很容易派生一个包含两种表单的新类，并让它输出它们的字段。

这是非常简单的建议，但是您没有提供任何资源来帮助重构，所以我只能提供模糊/通用的代码示例。

**用js的方式在客户端组合表单会在代码的维护和演进中变成很多问题，并带来很多问题（安全性不是最不重要的）。**

# jquery - 根据填写的表单字段显示 div

> ID：13425667
> 
> 赞同：0
> 
> 时间：2012-11-16T22:57:01.240
> 
> 标签：jquery, forms, show-hide

我有这个脚本，我在其中使用滑块来显示表单的某些元素。到现在为止还挺好。我这样做的方式是使用一个滑块（不能使用多步表单，因为它使用不允许多步表单的插件，以及一些图形行为）和一个转到下一个滑块的按钮。因此，现在我需要该按钮（不是表单的一部分）仅在填写某个字段时才显示。

我尝试了以下操作，但它不起作用，我假设有一些错误，但不知道是什么。我的代码如下：

```
$('#clientname').change(function() {
    var clientVal = $("input").val() == '';
$(".next").hide();

if ($('#clientname').val() != '').show();

else

$('.next').hide();
}); 
```

和html如下：

```
<div class="b40-right">

                        <h3>The Basics</h3>
                        <div class="label"> Your Name (required)</div>
                        <div class="inputes"> <span class="wpcf7-form-control-wrap your-name"><input id="clientname" type="text" name="your-name" value="" class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required" size="40" /></span> </div>
                        <div class="label">Your Email (required)</div>
                        <div class="inputes">    <span class="wpcf7-form-control-wrap your-email"><input type="text" name="your-email" value="" class="wpcf7-form-control wpcf7-text wpcf7-email wpcf7-validates-as-required wpcf7-validates-as-email" size="40" /></span> </div>
                        <div class="label">Type of Business</div>
                        <div class="inputes">    <span class="wpcf7-form-control-wrap type-of-business"><textarea name="type-of-business" class="wpcf7-form-control  wpcf7-textarea" cols="40" rows="10"></textarea></span> </div>

                    </div>

                    <a class="next" href="javascript:stepcarousel.stepBy('mygallery2', 1)"><img id="nextbut1" src="<?php bloginfo('template_directory'); ?>/images/next.png" alt="" /></a> 
```

我做错了什么有什么帮助吗？有更好的方法/解决方案吗？（我不是你想象的程序员）

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:09:08.167

如果我理解你是正确的，我相信这就是你想要实现的目标：

```
$(function () {    
    $('#clientname').change(function() {
       if ($(this).val().length === 0)
          $('.next').hide();
       else
          $('.next').show();
    });
}); 
```

每当 ID 为 clientname 的输入值发生变化时，我们都会检查值的长度（输入中输入的字符数）。如果长度为零，我们隐藏按钮，否则我们显示它。

我还将它包装在一个 DOM-ready 回调中，以确保在我们知道元素存在于 DOM 中之前，我们不会尝试添加更改事件侦听器。

**编辑：**

上面的例子也可以写得更短，像这样：

```
$(function () {    
    $('#clientname').change(function() {
        $('.next').toggle($(this).val().length !== 0);
    });
});​ 
```

**演示：**

演示代码的小提琴：http: [//jsfiddle.net/uQyH9/](http://jsfiddle.net/uQyH9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:27:03.663

我想如果填写了所有必填字段，您希望出现“*下一步”按钮。*

所以首先你必须隐藏*Next*按钮。

```
$(document).ready(function() {
    $('.next').hide();
}); 
```

之后，您检查必填字段的更改，如果所有必填字段都已填写，则将变量设置为 true。如果该变量为真，则显示您的*下一步按钮。*

```
$("input.wpcf7-validates-as-required").change(function() {
    checkIfAllFieldsAreFilled();
});

function checkIfAllFieldsAreFilled(){
    var fieldsAreFilled = true;

    $("input.wpcf7-validates-as-required").each(function(){
        fieldsAreFilled &= ($(this).val() != '');
    });

    if(fieldsAreFilled){
        $('.next').show();
    }
} 
```

# javascript - Node.js 一个好的认证模块？或者验证用户的正确方法是什么？

> ID：13425669
> 
> 赞同：0
> 
> 时间：2012-11-16T22:57:34.943
> 
> 标签：javascript, security, node.js, authentication, express

我正在学习 Node.js 并期待创建一个基于 Express 的简单 Web 应用程序，我正在考虑创建用户组，每个组都有自己的用户，每个组都有自己的权限（就像 ACL在 Cakephp 中）

那么任何人都可以推荐一个好的模块或这样做吗？

此外，我对安全性以及这些密码将如何保存以及密码将被加密的加密类型有点好奇。

好吧，这可以手动完成，但需要一些时间。我发现最好的方法是为每个用户创建一个角色，并且会有组 ID，以便稍后我们可以分配适当的权限

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:02:45.367

[Passport](http://passportjs.org/ "护照")是我最喜欢的中间件，它允许您使用 OpenID 和 OAuth 提供程序以及其他一些。总共有 80 多种身份验证策略。

我肯定会推荐看看他们的[指南](http://passportjs.org/guide/ "指导")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T00:12:57.547

我自己使用 bcrypt： [http ://devsmash.com/blog/password-authentication-with-mongoose-and-bcrypt](http://devsmash.com/blog/password-authentication-with-mongoose-and-bcrypt)

# wcf - Windows 应用商店应用能否使用使用 Entity Framework 5 的 WCF 服务？

> ID：13425678
> 
> 赞同：0
> 
> 时间：2012-11-16T22:58:16.393
> 
> 标签：wcf, entity-framework, windows-8, windows-store-apps

我有一个使用 EF5 构建的 WCF 服务。该服务返回在 EF 模型中定义的对象集合。但由于我无法在 Windows 应用商店应用程序中使用 EF，我认为这是不可能的。如果是这种情况，从 Windows 应用商店应用程序使用服务的最佳选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:21:10.290

如果对象是 POCO 对象，那么您应该能够在 Window Store 应用程序中使用它们，因为它们不需要对实体框架程序集的任何引用。理想情况下，它们将存在于一个单独的程序集中，您可以从两者中引用 - 您的服务和您的 Windows 应用商店应用程序。如果您的实体不是 POCO 实体（即派生自 EntityObject 类），那么理想情况下您可以远离此解决方案（不过，新的 EF5 应用程序将创建 POCO 实体）。

# phpmyadmin - 忘记了使用 Lamp Fedora 的 phpMyAdmin 的用户名和密码

> ID：13425687
> 
> 赞同：0
> 
> 时间：2012-11-16T22:59:36.930
> 
> 标签：phpmyadmin, lamp, mysql

无论如何都无法登录，我什至编辑了 config.inc.php 文件。另一个问题是我的本地主机的 ip 地址是 10.0.2.15，但我必须使用 127.0.0.1/phpMyAdmin 访问 phpMyAdmin。早在我还编辑了这部分的 phpMyAdmin.conf 文件之前

```
# Apache 2.4

<RequireAny>

  Require ip 127.0.0.1

  Require ip ::1

</RequireAny> 
```

```
# Apache 2.2 
```

#订单拒绝，允许

#拒绝所有人

```
Allow from 127.0.0.1

Allow from ::1 
```

我更改了订单拒绝，允许

全部拒绝

```
Allow from no 
```

到#Order Deny,Allow

#拒绝所有人

```
Allow from 127.0.0.1 
```

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:21:08.093

尝试

```
http://localhost/phpmyadmin 
```

`phpmyadmin`必要时重新安装！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T14:49:57.560

使用以下步骤重置您的 MySQL root 密码，然后使用新密码以 root 身份登录 phpMyAdmin。

1.  停止所有正在运行的 MySQL 实例。

    ```
    sudo /etc/init.d/mysql stop 
    ```

2.  在安全模式下运行 MySQL。

    ```
    sudo mysqld_safe --skip-grant-tables 
    ```

3.  以 root 用户身份登录 MySQL，无需密码。

    ```
    mysql -u root mysql 
    ```

4.  设置您的 MySQL 根密码。

    ```
    update user set Password=PASSWORD('newpassword') where User = 'root';  
    flush privileges;   
    exit; 
    ```

    在第一个命令中，将字符串替换为`newpassword`您自己的新 MySQL 根密码。

5.  停止 mysqld。

    ```
    sudo killall mysqld 
    ```

6.  重启 MySQL。

    ```
    sudo /etc/init.d/mysql start 
    ```

7.  使用您的新密码以 root 身份登录 phpMyAdmin。

# ruby - 对数组求和

> ID：13425688
> 
> 赞同：2
> 
> 时间：2012-11-16T22:59:40.703
> 
> 标签：ruby, arrays, activesupport

下面的代码在 Ruby 1.8/1.9 上通过了测试，但是当我在 Ruby 1.9.2 上运行[这些测试](https://gist.github.com/286495)时，我没有收到`Array#sum`. 例如，

```
NoMethodError: undefined method `sum' for [3.2, 3.0, 1.5, 0.73, 0.47, 0.23]:Array 
```

我遇到了`inject(:+)`，但是当我尝试将其替换为 where `sum`is 时，它又产生了其他问题。有两种`sum`使用方法，`time_required`和`balance_queues`. 在第二种方法中，将其用于旧代码很复杂`q1.sum - q2.sum`。尽可能多的细节/解释会有所帮助。

```
class FairDistribution
  def initialize(jobs, num_of_queues)
    @queues = [ jobs.sort.reverse ]
    (num_of_queues - 1).times { @queues << [] }

    # Balance the queues until they are perfectly balanced
    while !balance_all_queues do; end
  end

  # Time required for all queues processing
  def time_required
    @queues.map { |q| q.sum }.max                      #SUM
  end

  # The actual distribution of jobs across the queues
  def distribution
    @queues
  end

  private

  # Runs through all queues and balances them against each other.
  # Makes one pass only and returns FALSE if there was nothing changed
  # during the pass.
  def balance_all_queues
    updated = false

    @queues.each_with_index do |q1, qi1|
      (qi1+1 ... @queues.size).each do |qi2|
        res = balance_queues(q1, @queues[qi2])
        updated ||= res
      end
    end

    return !updated
  end

  # Balances the two queues between themselves by finding the best possible
  # swap of jobs between them. If there's nothing to be improved, returns FALSE.
  def balance_queues(q1, q2)
    delta =  q1.sum - q2.sum                            #SUM
    return false if delta == 0

    best_swap       = nil
    best_swap_delta = delta.abs

    q1.each_combination do |c1|
      best_swap, best_swap_delta = choose_better_swap(c1, [], delta, best_swap, best_swap_delta)

      q2.each_combination do |c2|
        best_swap, best_swap_delta = choose_better_swap(c1, c2, delta, best_swap, best_swap_delta)
      end
    end

    best_swap.apply(q1, q2) unless best_swap.nil?

    return !best_swap.nil?
  end

  # Sees if the swap we have at hand is better than our current best
  # swap and replaces the latest if it is.
  def choose_better_swap(c1, c2, delta, best_swap, best_swap_delta)
    unless c1 == c2
      s = Swap.new(c1, c2, delta)
      best_swap, best_swap_delta = s, s.delta if s.delta < best_swap_delta 
    end

    return best_swap, best_swap_delta
  end
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T23:14:22.477

`Enumerable#sum`由 ActiveSupport（Ruby on Rails 的一部分）提供。如果您安装了`active_support`gem，您可以`[].sum`通过将其添加到脚本顶部来使用：

```
require 'active_support/core_ext/enumerable' 
```

尝试使用`.inject(0, :+)`. 这将导致空数组为“0”，并且可能是您的问题的原因`inject`。

# ruby-on-rails-3 - Heroku 计划任务的发条导致 NameError

> ID：13425694
> 
> 赞同：0
> 
> 时间：2012-11-16T22:59:58.533
> 
> 标签：ruby-on-rails-3, heroku, scheduled-tasks, nameerror

这是我第一次使用 Ruby on Rails 'clockwork' 库。当我的计划作业尝试执行时，我收到以下错误：

```
ERROR -- : uninitialized constant Delayed (NameError) 
```

这是作业中导致错误的代码：

```
every(1.day, 'Queueing scheduled job', :at => '22:40') { Delayed::Job.enqueue ScheduledJob.new } 
```

我按照 Heroku 的使用'clockwork'的指南（https://devcenter.heroku.com/articles/clock-processes-ruby），但我不完全确定计划的作业应该如何知道要执行的任务？它是否仅仅因为任务本身位于“lib/tasks”中而知道？

我的 n00bie 直觉告诉我，“延迟”导致的 NameError 是我应该确定要运行的任务的地方。

对此的任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:58:24.867

不知道你是否还有这个问题。你的 Gemfile 中有 gem 'delayed_job_active_record' 吗？您是否按照此处的安装步骤操作：[https ://github.com/collectiveidea/delayed_job/](https://github.com/collectiveidea/delayed_job/)

# wpf - 图像超出网格

> ID：13425702
> 
> 赞同：5
> 
> 时间：2012-11-16T23:00:36.883
> 
> 标签：wpf

我不知道为什么图像跨越网格右边界，如何修复它？代码如下所示：

```
 <Grid>
        <Grid Name="grid1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260" />
                <ColumnDefinition Width="640" />
            </Grid.ColumnDefinitions>
            <Image Grid.Column="1" HorizontalAlignment="Stretch" Margin="0" Name="image1" Stretch="Fill" VerticalAlignment="Stretch" Source="path.png"/>
            <ListView Height="361" HorizontalAlignment="Left" Margin="10,10,0,0" Name="listView1" VerticalAlignment="Top" Width="240" ItemsSource="{Binding}" />
            <Button Content="Add New Gesture" Height="39" HorizontalAlignment="Left" Margin="10,387,0,0" Name="button1" VerticalAlignment="Top" Width="112" Click="button1_Click" />
            <Button Content="Delete" Height="39" HorizontalAlignment="Left" Margin="191,387,0,0" Name="button2" VerticalAlignment="Top" Width="59" />
            <Button Content="Modify" Height="39" HorizontalAlignment="Left" Margin="128,387,0,0" Name="button3" VerticalAlignment="Top" Width="57" />
        </Grid>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:20:15.623

这看起来像是您设置的固定宽度的效果（也许您的固定列宽度的总和大于固定窗口宽度？）这将导致网格单元（和图像）离开视图。

如果您希望图像填充窗口中剩余的整个空间，请将第二个`ColumnDefinition`宽度更改`"*"`为`640`：

```
<ColumnDefinition Width="*" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:33:27.940

编辑：事实证明这是错误的，它不是一个可行的解决方案。对不起

好的，所以真的不清楚你的问题到底是什么。如果您提供更多详细信息，人们将能够更轻松地为您提供帮助。

据我所知（这可能完全错误），通过说图像“跨越网格右边界”，您的意思是图像应该只显示在一个列中，但它“溢出”到下一列。

这可以通过向 Image 控件添加以下属性来避免：

```
Grid.ColumnSpan="1" 
```

所以它将是：

```
<Image Grid.Column="1" Grid.ColumnSpan="1" HorizontalAlignment="Stretch" Margin="0" Name="image1" Stretch="Fill" VerticalAlignment="Stretch" Source="path.png"/> 
```

这将防止图像溢出到其他列，并限制到它所在的列。正如我之前所说，我不完全确定我理解你的问题，但如果你提供更多细节，我很乐意尝试修改我的回答以更好地帮助你。不过现在，这是我能做的最好的了。

# knockout.js - Knockoutjs 编程数据绑定到生成的接口

> ID：13425704
> 
> 赞同：15
> 
> 时间：2012-11-16T23:00:47.347
> 
> 标签：knockout.js

我正在开发一个快速原型制作工具，我想为其动态生成界面，并将数据动态地绑定到创建的元素。ViewModel 看起来像：

```
var viewModel = {
    vmSchema: { 
            "Id" : "int",
            "Name" : "string",
            "UpdatedOn" : "date"
    },
    vmData: { 
            "Id": "123"
            "Name" : "Bob",
            "UpdatedOn" : "2012-11-16T00:00:00"
    }
} 
```

vmSchema 将用于根据其类型创建接口元素，然后 vmData 将数据绑定到这些元素。

创建接口没有问题。挑战是以编程方式将 vmData mdoel 数据绑定到生成的接口。

是否有任何工具或技术可以允许这种类型的编程数据绑定？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-17T00:20:54.527

看起来您的模型的字段和类型要到运行时才能知道。对于这种动态生成的模型，假设您需要双向绑定，您需要编写一些将其属性转换为可观察对象的代码。最基本的，您可以遍历 vmData 并将其中的所有内容转换为 ko.observable：

```
for (var member in viewModel.vmData) {
   if (viewModel.vmData.hasOwnProperty(member)) {
       viewModel.vmData[member] = ko.observable(viewModel.vmData[member]);
   }
} 
```

至于视图绑定，它取决于什么是“创建界面元素”。如果他们可以`data-bind`在创建时向 HTML 元素添加属性，那么一切都应该很简单：只需`ko.applyBindings`在界面创建并附加到 DOM 后立即运行。如果由于某种原因您无法添加`data-bind`装饰，那么您可以使用稍微未记录的`ko.applyBindingsToNode`.

```
// manually specify a binding for an element
var elm = document.getElementById('some_elm');
ko.applyBindingsToNode(elm, { value: viewModel.vmData.id}, viewModel.vmData ); 
```

以上等价于`<span class="some_elm" data-bind="value: vmData.id"></span>`。

# python - Python CGI 脚本不会在 Linux 上打印希伯来语

> ID：13425709
> 
> 赞同：2
> 
> 时间：2012-11-16T23:01:32.543
> 
> 标签：python, html, linux, encoding, cgi

我无法让 python CGI 将希伯来字符打印到 Linux 上的 html 网页。这是一个演示问题的脚本：

```
#!/usr/bin/python3
print('Content-Type: text/html; charset=utf-8\n\n')
print ('<html><body>')
print ('first')
print ('second')
print ('תמות')
print ('third')
print ('</body></html>') 
```

该文件以 utf-8 格式保存（不含 BOM）。我直接从浏览器地址栏调用这个 .cgi 脚本。输出是：

```
first second 
```

而希伯来词和后面的任何东西都不见了。apache 日志或启用 cgitb 时未显示错误

我在 Linux ubuntu 12.04 和 centos 6 上使用 apache 2.2 和 python 3.2 以及 Firefox、chrome 和 IE 进行了测试。当然，我可以在任何普通的 html 页面上看到希伯来语。在 Windows 上它工作得很好。

编辑：虽然链接问题确实给出了最终解决方案，但这仍然不是重复的。请参阅下面的评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T00:04:32.620

看起来 sys.stdout 的默认编码不一定是 UTF-8。如果你想使用 sys.stdout.buffer.write，试试这个：

```
sys.stdout.buffer.write('תמות'.encode('utf-8')) 
```

# java - 在内存中解压 google App Engine Java

> ID：13425711
> 
> 赞同：3
> 
> 时间：2012-11-16T23:01:39.720
> 
> 标签：java, google-app-engine, servlets, memory, unzip

我想解压缩上传到 servlet 的文件，并将所有解压缩的文件作为 byte[] 存储到 DataStore。由于 GAE 中没有文件系统，所以我必须将所有内容都放在内存中。假设我有 byte[] allzipdata 来存储原始 zip 文件数据。如何解压缩文件，尤其是如何从内存中的每个 zipentry 获取输入流？

```
ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(allzipdata));
ZipEntry ze = zis.getNextEntry();
while(ze!=null){
} 
```

那么while循环中有什么？

另外，如果我上传文件，我会使用 item.getContentType(); 知道 contentType；其中 item 是 FileItemStream。那么对于一个 zipentry，有没有办法知道 contentType？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T23:08:44.387

要从`ZipInputStream`我推荐使用[Apache Commons-IO](http://commons.apache.org/io/)库读取图像数据。它将输入流的 ZIP 条目转换为字节数组：

```
 ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(allzipdata));
    ZipEntry ze = null;
    while ((ze = zis.getNextEntry()) != null) {
       // write your code to use zip entry e.g. below:
       String filename = ze.getName();
       System.out.println("File Name of Entry file="+fileName);
       byte[] data = IOUtils.toByteArray(zis);
       // now work with the image `data`
    } 
```

# mvvm - 在哪里可以找到 Caliburn.Micro 1.4 文档？

> ID：13425713
> 
> 赞同：1
> 
> 时间：2012-11-16T23:01:43.437
> 
> 标签：mvvm, windows-8, documentation, windows-runtime, caliburn.micro

我想开始使用Caliburn.Micro（我过去一直在使用MVVMLight），我看到有一个与WinRT（1.4）兼容的新版本。我下载了它并想开始使用，但是互联网上的所有示例都很旧，不再适用。我找不到 1.4 版的任何官方文档。官方文档也已过时。

例如：我使用了本指南： http: [//mikaelkoskinen.net/post/caliburn-micro-winrt-getting-started.aspx](http://mikaelkoskinen.net/post/caliburn-micro-winrt-getting-started.aspx)，但是当我设置我的引导程序时，我不能这样做：

```
container = new WinRTContainer(RootFrame); 
```

因为我收到一个`WinRTContainer`不接受任何参数的错误。

我也需要这个方法：

```
protected override Type GetDefaultView()
{
    return typeof(MainPage);
} 
```

但`GetDefaultView()`不是一个可覆盖的方法。

那么任何人都可以向我指出一些最新的文档或一个不错的入门指南吗？我正在寻找专门的 Windows 8/WinRT 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T02:47:06.613

我们将很快更新文档。我为此道歉。如果您从 codeplex 下载版本，则示例目录中有一个 HelloWinRT 示例。这应该向您展示如何开始和使用一些常见的功能，例如导航和搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T00:12:55.677

我可能会先启动随包提供的 WinRT 示例并阅读 Readme.txt 文件。

# python - python是否有“使用严格；” 和“使用警告；” 就像在 perl 中一样？

> ID：13425715
> 
> 赞同：57
> 
> 时间：2012-11-16T23:01:51.133
> 
> 标签：python, perl, warnings, strict

我正在学习 perl 和 python ......同时，不是我的设计，但它必须完成。

问题：

在一个 perl 脚本中，我在 txt 的开头使用（见下文）。

```
#!/usr/bin/env perl

use strict;
use warnings; 
```

我应该为我的 python 脚本做一些常规的事情吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-20T12:28:07.010

为了提供一个可能避免这里出现一些评论噪音的答案，我将尝试另一个答案。

您原始问题中的两个语用实际上扩展到：

```
use strict "vars";
use strict "refs";
use strict "subs";
use warnings; 
```

依次回答每个：

*   的效果`use strict "vars"`是导致编译时错误引用变量而不首先声明它存在（例如在 C、C++ 和 Java 等更多静态语言中是默认值）。因为 Python 没有特定的语法来声明变量存在，所以它没有等价物。如果它首先不存在，则在 Python 中分配一个名称总是会创建它。此功能`strict`没有 Python 等效功能，并且无法重新创建它提供的安全性。

例如：

```
$ perl -c -e 'use strict "vars"; $foo = 1'
Global symbol "$foo" requires explicit package name at -e line 1.
-e had compilation errors.

$ perl -c -e 'no strict "vars"; $foo = 1'
-e syntax OK 
```

*   的效果`use strict "refs"`是禁止使用包含（现有或新）变量名称的纯字符串作为对变量本身的引用。Python 不这样做，因此无需禁用它。

例如：

```
$ perl -e 'use strict "refs"; ${"message"} = "hello"; print $message'
Can't use string ("message") as a SCALAR ref while "strict refs" in use at -e line 1.

$ perl -e 'no strict "refs"; ${"message"} = "hello"; print $message'
hello 
```

*   的效果`use strict "subs"`是导致编译时任何尝试调用已知不存在的函数。Python 不执行任何此类检查，也无法启用此类功能。

例如：

```
$ perl -c -e 'use strict "subs"; foo'
Bareword "foo" not allowed while "strict subs" in use at -e line 1.
-e had compilation errors.

$ perl -c -e 'no strict "subs"; foo'
-e syntax OK 
```

*   的效果`use warnings`是在早期版本中默认的各种行为类别的编译和运行时启用更多警告，有时可能需要，或者从来都不是一个好主意，但严格来说不是错误。例如，使用未初始化的值作为数字通常应该给出警告，但最初它没有这样做。

例如：

```
$ perl -e 'use warnings; my $u; print 2 + $u'
Use of uninitialized value $u in addition (+) at -e line 1.
2

$ perl -e 'no warnings; my $u; print 2 + $u'
2 
```

最后; 一些评论指出 Python 在`__future__`. 但是，这不应被视为类似于 Perl 的 pragmata，因为后者的大部分都是词法范围的，并且可以根据需要在小范围内启用或禁用；where's Python's`__future__`仅对整个源文件启用。

例如。

```
use strict;
use warnings;

my $total;

$total += count_things($_) for @list;

{
   no warnings 'uninitialized';
   printf "The total is %d\n", $total;
} 
```

一个有点做作的例子，但这个例子演示了使用`no warnings 'uninitialized'`来禁用关于在`printf`语句中使用未初始化值的警告，同时仍然在其他任何地方保持启用其他警告。

* * *

综上所述：Python`use strict`没有`use warnings`. 它确实提供的那些功能仅在文件级别启用，并且不能在每个范围内选择性地启用或禁用。

* * *

*编辑：*实际上我现在被告知 Python 确实有一些可控的警告标志，可以根据需要启用和禁用。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-12-03T16:40:56.023

正如其他用户所发布的那样，Python 没有严格的编译指示。在我看来，这是它最大的缺陷之一。此外，对于严肃的编程项目，我仍然使用 Perl 也是原因之一。

毫无疑问，Python 爱好者会对这种说法感到不满。我听说有人说他们不需要严格。我发现那些说这种话的人通常不知道严格会带给你什么。考虑 Python 中的以下代码块：

```
def Main():
    print(GetPrice(100,"Alaska"))
    print(GetPrice(100,"Florida"))
    print(GetPrice(100,"Michigan"))
    print(GetPrice(100,"Wisconsin"))

def GetPrice(UnitPrice,State):
    StateSalesTaxRate = 0
    if State == "Alabama": StateSalesTaxRate = 0.04
    if State == "Alaska": StateSalesTaxRate = 0
    if State == "Arizona": StateSalesTaxRate = 0.056
    if State == "Arkansas": StateSalesTaxRate = 0.065
    if State == "California": StateSalesTaxRate = 0.075
    if State == "Colorado": StateSalesTaxRate = 0.029
    if State == "Connecticut": StateSalesTaxRate = 0.0635
    if State == "Delaware": StateSalesTaxRate = 0
    if State == "Florida": StateSalesTaxRate = 0.06
    if State == "Georgia": StateSalesTaxRate = 0.04
    if State == "Guam": StateSalesTaxRate = 0.04
    if State == "Hawaii": StateSalesTaxRate = 0.04
    if State == "Idaho": StateSalesTaxRate = 0.06
    if State == "Illinois": StateSalesTaxRate = 0.0625
    if State == "Indiana": StateSalesTaxRate = 0.07
    if State == "Iowa": StateSalesTaxRate = 0.06
    if State == "Kansas": StateSalesTaxRate = 0.0615
    if State == "Kentucky": StateSalesTaxRate = 0.06
    if State == "Louisiana": StateSalesTaxRate = 0.04
    if State == "Maine": StateSalesTaxRate = 0.055
    if State == "Maryland": StateSalesTaxRate = 0.06
    if State == "Massachusetts": StateSalesTaxRate = 0.0625
    if State == "Michigan": StateSalesTexRate = 0.06
    if State == "Minnesota": StateSalesTaxRate = 0.06875
    if State == "Mississippi": StateSalesTaxRate = 0.07
    if State == "Missouri": StateSalesTaxRate = 0.04225
    if State == "Montana": StateSalesTaxRate = 0
    if State == "Nebraska": StateSalesTaxRate = 0.055
    if State == "Nevada": StateSalesTaxRate = 0.0685
    if State == "New Hampshire": StateSalesTaxRate = 0
    if State == "New Jersey": StateSalesTaxRate = 0.07
    if State == "New Mexico": StateSalesTaxRate = 0.05125
    if State == "New York": StateSalesTaxRate = 0.04
    if State == "North Carolina": StateSalesTaxRate = 0.0475
    if State == "North Dakota": StateSalesTaxRate = 0.05
    if State == "Ohio": StateSalesTaxRate = 0.0575
    if State == "Oklahoma": StateSalesTaxRate = 0.045
    if State == "Oregon": StateSalesTaxRate = 0
    if State == "Pennsylvania": StateSalesTaxRate = 0.06
    if State == "Puerto Rico": StateSalesTaxRate = 0.105
    if State == "Rhode Island": StateSalesTaxRate = 0.07
    if State == "South Carolina": StateSalesTaxRate = 0.06
    if State == "South Dakota": StateSalesTaxRate = 0.04
    if State == "Tennessee": StateSalesTaxRate = 0.07
    if State == "Texas": StateSalesTaxRate = 0.0625
    if State == "Utah": StateSalesTaxRate = 0.0595
    if State == "Vermont": StateSalesTaxRate = 0.06
    if State == "Virginia": StateSalesTaxRate = 0.053
    if State == "Washington": StateSalesTaxRate = 0.065
    if State == "West Virginia": StateSalesTaxRate = 0.06
    if State == "Wisconsin": StateSalesTaxRate = 0.05
    if State == "Wyoming": StateSalesTaxRate = 0.04
    return(UnitPrice*(1+StateSalesTaxRate))

if __name__ == '__main__': Main() 
```

此代码计算购买成本，包括销售税。当然有更有效的方法可以做到这一点，但这只是一个例子。

那么，您发现代码有什么问题吗？不？尝试运行它。当你这样做时，你会得到：

```
100
106.0
100
105.0 
```

还是没看出问题？那么你有一个比你知道的更大的问题。下面是在 Perl 中呈现的等效代码：

```
use strict;

sub Main
{
    print GetPrice(100,"Alaska"), "\n";
    print GetPrice(100,"Florida"), "\n";
    print GetPrice(100,"Michigan"), "\n";
    print GetPrice(100,"Wisconsin"), "\n";    
}

sub GetPrice
{
    my($UnitPrice,$State) = @_;
    my $StateSalesTaxRate = 0;
    $StateSalesTaxRate = 0.04 if $State eq "Alabama";
    $StateSalesTaxRate = 0 if $State eq "Alaska";
    $StateSalesTaxRate = 0.056 if $State eq "Arizona";
    $StateSalesTaxRate = 0.065 if $State eq "Arkansas";
    $StateSalesTaxRate = 0.075 if $State eq "California";
    $StateSalesTaxRate = 0.029 if $State eq "Colorado";
    $StateSalesTaxRate = 0.0635 if $State eq "Connecticut";
    $StateSalesTaxRate = 0 if $State eq "Delaware";
    $StateSalesTaxRate = 0.06 if $State eq "Florida";
    $StateSalesTaxRate = 0.04 if $State eq "Georgia";
    $StateSalesTaxRate = 0.04 if $State eq "Guam";
    $StateSalesTaxRate = 0.04 if $State eq "Hawaii";
    $StateSalesTaxRate = 0.06 if $State eq "Idaho";
    $StateSalesTaxRate = 0.0625 if $State eq "Illinois";
    $StateSalesTaxRate = 0.07 if $State eq "Indiana";
    $StateSalesTaxRate = 0.06 if $State eq "Iowa";
    $StateSalesTaxRate = 0.0615 if $State eq "Kansas";
    $StateSalesTaxRate = 0.06 if $State eq "Kentucky";
    $StateSalesTaxRate = 0.04 if $State eq "Louisiana";
    $StateSalesTaxRate = 0.055 if $State eq "Maine";
    $StateSalesTaxRate = 0.06 if $State eq "Maryland";
    $StateSalesTaxRate = 0.0625 if $State eq "Massachusetts";
    $StateSalesTexRate = 0.06 if $State eq "Michigan";
    $StateSalesTaxRate = 0.06875 if $State eq "Minnesota";
    $StateSalesTaxRate = 0.07 if $State eq "Mississippi";
    $StateSalesTaxRate = 0.04225 if $State eq "Missouri";
    $StateSalesTaxRate = 0 if $State eq "Montana";
    $StateSalesTaxRate = 0.055 if $State eq "Nebraska";
    $StateSalesTaxRate = 0.0685 if $State eq "Nevada";
    $StateSalesTaxRate = 0 if $State eq "New Hampshire";
    $StateSalesTaxRate = 0.07 if $State eq "New Jersey";
    $StateSalesTaxRate = 0.05125 if $State eq "New Mexico";
    $StateSalesTaxRate = 0.04 if $State eq "New York";
    $StateSalesTaxRate = 0.0475 if $State eq "North Carolina";
    $StateSalesTaxRate = 0.05 if $State eq "North Dakota";
    $StateSalesTaxRate = 0.0575 if $State eq "Ohio";
    $StateSalesTaxRate = 0.045 if $State eq "Oklahoma";
    $StateSalesTaxRate = 0 if $State eq "Oregon";
    $StateSalesTaxRate = 0.06 if $State eq "Pennsylvania";
    $StateSalesTaxRate = 0.105 if $State eq "Puerto Rico";
    $StateSalesTaxRate = 0.07 if $State eq "Rhode Island";
    $StateSalesTaxRate = 0.06 if $State eq "South Carolina";
    $StateSalesTaxRate = 0.04 if $State eq "South Dakota";
    $StateSalesTaxRate = 0.07 if $State eq "Tennessee";
    $StateSalesTaxRate = 0.0625 if $State eq "Texas";
    $StateSalesTaxRate = 0.0595 if $State eq "Utah";
    $StateSalesTaxRate = 0.06 if $State eq "Vermont";
    $StateSalesTaxRate = 0.053 if $State eq "Virginia";
    $StateSalesTaxRate = 0.065 if $State eq "Washington";
    $StateSalesTaxRate = 0.06 if $State eq "West Virginia";
    $StateSalesTaxRate = 0.05 if $State eq "Wisconsin";
    $StateSalesTaxRate = 0.04 if $State eq "Wyoming";
    return($UnitPrice*(1+$StateSalesTaxRate));
}

Main(); 
```

如果不启用 Perl 的严格编译指示，您甚至会得到相同的输出：

```
100
106.0
100
105.0 
```

但是在严格打开的情况下，当您运行这个 Perl 脚本时，您会收到以下错误消息：

```
Global symbol "$StateSalesTexRate" requires explicit package name at line 37.
Execution aborted due to compilation errors. 
```

这两个示例中的问题是其中一个计算行中存在拼写错误。对于密歇根州的计算销售税，我使用“StateSalesTexRate”而不是“StateSalesTaxRate”。Perl 明确地发现并消除了这个错误。与此同时，Python 转过头看向另一个方向。

这是一个大问题。想象一下，您的在线业务正在使用该软件来计算您从客户的信用卡中收取的费用。您需要多长时间才能意识到密歇根州的客户可以通过销售税？当你这样做时，你是回去找客户说“对不起，我们需要你更多的钱”还是你自己吃损失？

当然，任何使用这种编码算法来计算销售税的公司都可能存在更大的问题。但是您可以通过这个示例清楚地看到 Perl 中的 strict pragma 的作用以及为什么我和其他人认为它应该是任何脚本语言的基本特征。

Python 有很多我非常喜欢的地方。我明白为什么有些人更喜欢 Python 而不是 Perl。但是有几件事我真的很讨厌 Python。这是一。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-09-25T04:03:40.140

要在打开警告的情况下运行 Python：

```
python -W all file.py 
```

回应：

> 我应该为我的 python 脚本做一些常规的事情吗？

我认为确保您的代码符合[PEP 8](http://www.python.org/dev/peps/pep-0008/)通常是一个好主意。正如另一个答案中提到的，您可以通过编程方式执行此操作：

```
pip install pep8 && pep8 file.py 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-28T10:08:19.787

LeoNerd 很好地解释了为什么 Python 中没有“使用严格”或“使用警告”。

回答：

> **我应该为我的 python 脚本做一些常规的事情吗？**

您可能有兴趣通过静态代码分析器（如 pylint）和/或代码格式检查（如 pep8）运行代码。

它们可以帮助发现潜在问题并标记警告。他们对代码的格式也有很多话要说，你可能感兴趣也可能不感兴趣。

这是[使用它们的合理理由。](http://infinitemonkeycorps.net/docs/pph/#id3)以及相关的 Stackoverflow 问题[here](https://stackoverflow.com/questions/1428872/pylint-pychecker-or-pyflakes)和[here](https://stackoverflow.com/questions/35470/are-there-any-static-analysis-tools-for-python)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T23:03:16.170

真的没有任何等价物。Python 的设计随着时间的推移而发展，并且进行了许多更改（特别是在 3.x 中）以确保语言中的默认值是开发人员默认需要的。一个特性很少存在，但它是一个可选标志。

这可能归结为[Python 的禅宗](https://www.python.org/dev/peps/pep-0020/) *“应该有一种——最好只有一种——明显的方式来做到这一点。”* Python 的设计侧重于可读性，并且有多种做事方式或改变语言的工作方式会使代码更难阅读。

我认为最接近的是从[`__future__`](http://docs.python.org/2/library/__future__.html)旧版本的 Python 中导入，以将新版本的一些修复/新功能引入旧版本（例如默认情况下从整数除法到浮点除法的除法）。这在某种意义上是相似的，因为它正在改进默认行为，使其在标准情况下更加明智。

编辑：我似乎引起了 perl 用户的愤怒，他们认为这篇文章是对 Perl 的攻击——它从来没有这样的意图。Perl 是一门很好的语言，我原来的帖子只是用了很差的措辞，而且解释不清楚。我试图澄清。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-10T16:28:47.633

不是编译时错误，但 Python 有许多 linter 可以识别与 Perl 的“use strict”相同类型的错误：

考虑一个名为的 Python 文件`tmp.py`：

```
def foo():
    a = 1
    b = 2
    return a 
```

`flake8 tmp.py`将返回：

```
tmp.py:13:5: F841 local variable 'b' is assigned to but never used 
```

此外`flake8`，查看`mypy`更高级的类型检查并`pylint`强制执行某些编码样式。与任何编程语言一样，没有什么可以阻止您在代码库中使用多个 linter——事实上，这是鼓励的，因为每个 linter 都有不同的关注点。

# animation - .ease() - 指针的动画应该是拱形轨迹

> ID：13425718
> 
> 赞同：0
> 
> 时间：2012-11-16T23:02:09.380
> 
> 标签：animation, d3.js

我正在玩（[https://gist.github.com/1499279](https://gist.github.com/1499279)）使用Tomer 的*d3js*的自定义仪表。在他的代码中，他调用`updateGauges() gauges[key].redraw(30 + 50 * Math.random() - 30 * Math.random());`为要动画的指针生成随机数。我将其更改为`gauges[key].redraw(80);`使指针不会重新渲染。

在初始加载期间，指针沿着最短路径到达其目的地，而不是在拱形轨迹中进行动画处理（顺时针方向，就像真实仪表的操作方式一样）。当 80 作为参数传入时，指针从 0 开始逆时针移动。相反，它应该始终遵循拱形轨迹。

你们认为应该修改/添加什么？

*解决方案更新：

```
this.drawPointer = function(value)
{
    var delta = this.config.range / 13;
    var n=value/2;

    var head = this.valueToPoint(n, 0.85);
    var head1 = this.valueToPoint(n - delta, 0.12);
    var head2 = this.valueToPoint(n + delta, 0.12);

    var headlast = this.valueToPoint(value, 0.85);
    var head1last = this.valueToPoint(value - delta, 0.12);
    var head2last = this.valueToPoint(value + delta, 0.12);

    var tailValue = n -  (this.config.range * (1/(270/360)) / 2);
    var tail = this.valueToPoint(tailValue, 0.28);
    var tail1 = this.valueToPoint(tailValue - delta, 0.12);
    var tail2 = this.valueToPoint(tailValue + delta, 0.12);

    var tailValuelast = value -  (this.config.range * (1/(270/360)) / 2);
    var taillast = this.valueToPoint(tailValuelast, 0.28);
    var tail1last = this.valueToPoint(tailValuelast - delta, 0.12);
    var tail2last = this.valueToPoint(tailValuelast + delta, 0.12);

    var data = [head, head1, tail2, tail, tail1, head2, head];

    var line = d3.svg.line()
                        .x(function(d) { return d.x })
                        .y(function(d) { return d.y })
                        .interpolate("basis");

    var pointerContainer = this.body.select(".pointerContainer");   

    var pointer = pointerContainer.selectAll("path").data([data])                                       

    pointer.enter()
            .append("svg:path")
                .attr("d", line)
                .style("fill", "#dc3912")
                .style("stroke", "#c63310")
                .style("fill-opacity", 0.7)

    pointer.transition()
                .attr("d", line) 
                .each("end", function () {      
                if (value!=0) {

                        var head = headlast;
                        var head1 = head1last;
                        var head2 = head2last;

                        var tailValue = tailValuelast;
                        var tail = taillast;
                        var tail1 = tail1last;
                        var tail2 = tail2last;

                        var data = [head, head1, tail2, tail, tail1, head2, head];

                        var line = d3.svg.line()
                                        .x(function(d) { return d.x })
                                        .y(function(d) { return d.y })
                                        .interpolate("basis");

                        var pointer = pointerContainer.selectAll("path").data([data])                                       

                        pointer.enter()
                            .append("svg:path")
                                .attr("d", line)
                                .style("fill", "#dc3912")
                                .style("stroke", "#c63310")
                                .style("fill-opacity", 0.7)

                        pointer.transition()
                                .attr("d", line) 
                                .ease("bounce")
                                .duration(600); 
                            }
                }
                )
                .duration(200);

    var fontSize = Math.round(this.config.size / 10);
    pointerContainer.selectAll("text")
                        .data([value])
                            .text(Math.round(value))
                        .enter()
                            .append("svg:text")
                                .attr("x", this.config.cx)
                                .attr("y", this.config.size - this.config.cy / 4 - fontSize)                        
                                .attr("dy", fontSize / 2)
                                .attr("text-anchor", "middle")
                                .text(Math.round(value))
                                .style("font-size", fontSize + "px")
                                .style("fill", "#000")
                                .style("stroke-width", "0px");
} 
```

问候，
维斯韦什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:33:21.753

我也是 D3 的新手，但这是我的拙见（如果我错了，请纠正我）：

```
var line = d3.svg.line()
    .x(function(d) { return d.x })
    .y(function(d) { return d.y })
    .interpolate("basis"); 
```

这里 interpolate 只是将 x 和 y 值从当前值更改为目标值。

在您的情况下， y 值需要从当前值 -> 最高点（即 100） -> 更改为目标值。

我能想到的解决方案之一是添加控制点。

# php - 有填充（键->值）和模型中的字段“键”。我如何在视图中显示它的“值”，而不是“键”？在模型中： public function getOptionsGender() { array(0=>'Any', 1=>Male', 2=>'Female'); 在视图中（编辑）： echo $form->dropDownList($model, 'gender', $model->optionsGender); 但我有一个带有“原始”属性的 CDetailView，

> ID：13425719
> 
> 赞同：0
> 
> 时间：2012-11-16T23:02:13.410
> 
> 标签：php, yii, form-generator

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:46:14.347

在 Jeffery Winsett 的“使用 Yii 1.1 进行敏捷 Web 应用程序开发”一书中，他处理了在您正在使用的模型中使用类常量的问题。在你的情况下：

```
class Model extends CActiveRecord
{
    const GENDER_ANY=0;
    const GENDER_MALE=1;
    const GENDER_FEMALE=2;

    public function getGenderOptions(){
        return array(
            self::GENDER_ANY=>'Any',
            self::GENDER_MALE=>'Male',
            self::GENDER_FEMALE=>'Female',
        );
    }
    public function getGenderText(){
        $genderOptions=$this->genderOptions();
        return isset($genderOptions[$this->gender]) ? $genderOptions[$this->gender] : "unkown gender({$this->gender})";
    }
} 
```

然后在您的 CDetailView 中，您必须将其更改`gender`为：

```
array(
    'name'=>'gender',
    'value'=>CHtml::encode($model->genderText()),
), 
```

如果多个模型具有相同的数据，您可能希望创建一个扩展 CActiveRecord 的基本模型，然后扩展新模型而不是 CActiveRecord。如果该模型是唯一具有该数据的模型（即用户模型只有性别），但其他视图使用该模型来显示数据，那么我会将其留在单个模型类中。另请记住，如果您放置`getGenderOptions`在扩展类中，并且您扩展了所有模型，它们都将具有该选项，但可能没有所需的属性，并且如果您不检查它会抛出错误。

说了这么多，我仍然认为这是一个问题或偏好。您可以随心所欲地处理它，无论在哪里。这只是我专门写的一本关于 Yii 的书中的一个例子。

# machine-learning - 如何处理 C4.5 (J48) 决策树中缺少的属性值？

> ID：13425722
> 
> 赞同：6
> 
> 时间：2012-11-16T23:02:28.280
> 
> 标签：machine-learning, data-mining, weka, decision-tree, classification

使用 Weka 的 C4.5 (J48) 决策树处理缺失特征属性值的最佳方法是什么？在训练和分类过程中都会出现缺失值的问题。

1.  如果训练实例中缺少值，我是否正确假设我放置了一个“？” 该功能的价值？

2.  假设我能够成功构建决策树，然后根据 Weka 的树结构用 C++ 或 Java 创建自己的树代码。在分类期间，如果我试图对一个新实例进行分类，我应该为具有缺失值的特征赋予什么值？我如何将树下降到我有未知值的决策节点？

使用朴素贝叶斯会更好地处理缺失值吗？我只会为他们分配一个非常小的非零概率，对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T04:53:49.743

来自华盛顿大学 Pedro Domingos 的 ML 课程：

以下是佩德罗针对 的缺失值提出的三种方法`A`：

*   `A`在排序到节点的其他示例中分配最常见的值`n`
*   `A`在具有相同目标值的其他示例中分配最常见的值
*   为的`p_i`每个可能值分配概率；将示例的一部分分配给树中的每个后代。`v_i``A``p_i`

现在可以在[此处](https://class.coursera.org/machlearning-001/lecture/preview/181)查看幻灯片和视频。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T05:05:06.593

另一种方法是将缺失值保留为“？”，而不将其用于信息增益计算。在分类过程中，任何节点都不应该有未知值，因为您在信息增益步骤中忽略了它。对于分类，我相信您只需考虑未知的缺失值，并且不要在对该特定属性进行分类期间将其删除。

# json - 使用 ExtJS 4.1 REST 代理创建“批处理”请求

> ID：13425726
> 
> 赞同：1
> 
> 时间：2012-11-16T23:03:17.340
> 
> 标签：json, rest, extjs, extjs4.1, batch-processing

我有两个我关心的模型/代理/商店`Questions`和`Choices`. 两者都以 JSON 格式从 REST 服务器获取数据。我的流程目前是这样的：

```
 // load numQuestions records from store.Questions
    var qs = Ext.getStore('Question');
            //... loadmask, etc.
    qs.load({
        scope : this,
        params : {
            limit : numQuestions
        },
        callback : function() {
            this.createQuestionCards(numQuestions);
        }
    }); 
```

一旦我有了`Questions`，我就会遍历并获取与`Choices`每个相关的内容，`Question`例如：

```
 for ( i = 0; i < numQuestions; i++) {
                // ... misc ...
        Assessor.questionChoices[i] = qs.getAt(i).choices();
                // ...misc...
        }, 
```

这很好用，除了它为每个循环迭代生成一个 XMLHTTPRequest。最小响应时间在 0.15 秒区域内，这对于 N < ~40 来说很好。一旦数字达到 200（这应该是一个常见的用例），延迟就会很糟糕。

如何让 ExtJS “批处理”请求并在循环体之后发送它们？例如：

```
var choiceBatch = qs.createBatch();
for ( i = 0; i < numQuestions; i++) {
    // ... misc ...
    Assessor.questionChoices[i] = choiceBatch.getAt(i).choices();
    // ...misc...
};
choiceBatch.execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T15:30:56.883

由于我没有得到关于多部分的宁静批处理的明确答案......

我自己`batchActions=true`在`Ext.data.proxy.Rest`v4.2.1 中进行测试，结果批次只在同一个商店和 HTTP 方法中。（`batchActions`对于 REST，默认为 false）

这意味着如果有 200 个 post 和 1 个 delete 并且您调用 store.sync()，它将批处理成 2 个请求，POST 请求正文将用记录数组而不是单个记录包装。

我正在寻找它是否可以通过使用 multipart/mixed 来批量处理所有具有 GET、POST、PUT 和 DELETE 的商店，**但结果是否定的**。（查看[OData 批处理](http://www.odata.org/documentation/odata-v2-documentation/batch-processing/)）

关于 OP，您要寻找的是模型关联。一旦您创建`Questions`了`Choices`Ext 模型并让服务器响应嵌套的 json 数据（因此`Questions`包含`Choices`嵌入在请求中的子项），Ext 将自动创建`question`记录以及`question.choices()`子存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T01:03:09.977

*Ext.data.proxy.Rest*有一个配置选项[batchActions](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.proxy.Rest-cfg-batchActions)，因为它[基本上是一个具有不同方法的AjaxProxy](http://docs.sencha.com/ext-js/4-0/source/Rest.html#Ext-data-proxy-Rest)，它可能会以与AjaxProxy 相同的方式工作。

# svn - 从 svn 命令获取更改文件的文件名

> ID：13425731
> 
> 赞同：1
> 
> 时间：2012-11-16T23:03:41.490
> 
> 标签：svn

希望我缺少一个简单的标志，我有

```
svn diff -r 321:322 
```

将返回两个修订版的差异，是否有一种简单的方法来生成受影响文件的名称列表，所以我有一个要推出的文件列表，而不是通过文件名的差异输出过滤。

如果我可以获得带有完整路径的文件名，那将是理想的，但我可能要求太多了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:10:10.147

在 *nix 你可以做

```
svn diff --summarize -r 321:322 | colrm 1 8 
```

这将为您提供项目根目录的完整路径

# java - java util logging 调用方法，即使日志级别不允许它们

> ID：13425735
> 
> 赞同：2
> 
> 时间：2012-11-16T23:04:05.737
> 
> 标签：java, logging

如果我有一个 java util 日志记录语句，例如

```
logger.log(LEVEL.FINE, "data buffer = {0}", 
CommonUtils.prepareDataBufferString(dataBuffer)); 
```

现在，即使我的日志级别不是 FINE，昂贵的 prepare.. 方法仍然会被调用，这不是我想要发生的。我最终在此语句之前检查了记录器级别

```
if(logger.isLoggable(LEVEL.FINE)){
   bufferString = CommonUtils.prepareDataBufferString(dataBuffer);
}

logger.log(LEVEL.FINE, "data buffer = {0}", bufferString); 
```

这会不必要地增加代码行数。我可以避免以某种方式这样做吗？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T23:12:37.857

像这样的技术可能会有所帮助。

```
logger.log(LEVEL.FINE, "data buffer = {0}", 
    new Object() {
        @Override public String toString() {
            return CommonUtils.prepareDataBufferString(dataBuffer));
        }
    }); 
```

仅供参考，调用该方法的不是日志框架，而是 Java。Java 要求您在调用方法之前评估方法的所有参数（这称为急切评估，与惰性评估相反）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T23:07:22.797

不，您无法使用我知道的任何 Java 日志记录 API 来避免它。语言中实际上只有两种方法可以做你想做的事：

1.  您描述的 if 语句
2.  将实现接口的对象传递给 API 以生成详细信息。

我知道没有任何日志记录 API 实现 (2)，而且我不确定您是否会发现传入匿名对象不那么冗长。

# ruby-on-rails - rails 如何在不知道后端当前域的情况下生成 http 链接连接到某个路径

> ID：13425739
> 
> 赞同：1
> 
> 时间：2012-11-16T23:04:59.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3

例如，我还不知道我的网站名称，它可以是 www.abc.com 或 www.xyz.com

我想通过链接向我的用户发送电子邮件

```
www.abc.com/controller1/id/path
or
www.xyz.com/controller1/id/path 
```

我如何在rails上设置这个？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:35:09.603

使用正确的帮助程序时，应用程序的主机名是什么并不重要，rails 将在运行时为链接生成相对路径或绝对路径（取决于使用的帮助程序）。[url_for](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html)是一个这样的助手，[link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)是另一个。在 routes.rb 中定义的任何路由，您都会获得一个帮助程序。尝试查看 的输出`rake routes`，您会看到可能已经定义了哪些 url 助手。只需添加`_path`到第一列中列出的路线即可获得相对路径 url。有关路由的更多信息，请参阅[Rails 指南](http://edgeguides.rubyonrails.org/routing.html)。

# racket - 球拍（计划）程序来查找给定日期的星期几

> ID：13425742
> 
> 赞同：0
> 
> 时间：2012-11-16T23:05:14.927
> 
> 标签：racket

我现在正在尝试创建一个球拍程序，将输入的日期（01.01.2000 和 31.12.2100 之间）显示为一天。

最好的问候凯亚恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:07:14.493

与[时间相关的](http://docs.racket-lang.org/reference/time.html)库应该可以在这里提供帮助。

```
#lang racket

(require racket/date)

;; Given a day, month, and year, return the weekday
(define (day-month-year->weekday day month year)
  (define local-secs (find-seconds 0
                                   0
                                   0
                                   day
                                   month
                                   year
                                   #t))
  (define the-date (seconds->date local-secs))
  (vector-ref #("sunday" "monday" "tuesday" "wednesday" "thursday"
                         "friday" "saturday")
              (date-week-day the-date))) 
```

例如，我在我所在地区（2012 年 11 月 17 日）写这篇文章的日期是星期六，该`day-month-year->weekday`函数也支持这一点：

```
> (day-month-year->weekday 17 11 2012)
"saturday" 
```

[1969 年 7 月 20 日](http://en.wikipedia.org/wiki/Apollo_11)应该是一个星期日：

```
> (day-month-year->weekday 20 7 1969)
"sunday" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:31:54.533

[Zeller 的同余](http://en.wikipedia.org/wiki/Zeller%27s_congruence)是您将要查看的算法。将算法从数学转换为球拍代码应该相当简单。

旁注：在询问 StackOverflow 时，询问更具体的问题并将其表述为问题会有所帮助。说明您已经尝试过的内容也可能会有所帮助。

# linux - 针对存储在数据库中的脚本执行 python

> ID：13425743
> 
> 赞同：1
> 
> 时间：2012-11-16T23:05:16.100
> 
> 标签：linux, ubuntu, python-2.7

*   数据库：mysql
*   语言：蟒蛇
*   框架：
*   django
*   操作系统：Linux (ubuntu)

你好，

有没有办法针对存储在数据库中的脚本内容执行 python？例如，文件的内容存储在 db 列文本中。唯一的解决方案是创建一个临时文件，将数据库中的内容转储到文件中，然后针对它运行 python os 命令吗？我假设需要存储执行脚本的内容，以便它转义引号等。

我愿意接受有关使用什么数据库来实现我的目标的建议。MySQL 在存储文件内容之前需要额外的包装器，并可能应用其他包装器来回复 qoutes/datetime/etc。

请告知是否需要其他信息，但本质上我希望将 python 脚本内容存储在数据库中，检索它并针对 python 解释器运行它。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:21:02.257

您可以使用`compile`内置功能。

```
s = """def f(x):
    return x + x

print(f(22))
"""

code = compile(s, "string", "exec")

exec(code)
# OUT: 44 
```

尽管我想知道您是否不能只存储数据结构并将其与一些预定义的代码一起使用。以这种方式执行任意代码可能很危险，并且存在安全风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:17:45.887

这似乎与此处的 SO 帖子非常相似：

[在 Google App Engine 下从数据库中动态加载 Python 应用程序代码](https://stackoverflow.com/questions/3505357/dynamically-loading-python-application-code-from-database-under-google-app-engin)

这是有关 exec 的信息

[http://docs.python.org/release/2.5.2/ref/exec.html](http://docs.python.org/release/2.5.2/ref/exec.html)

Python+MySQL 的 Python Wiki 页面

[http://wiki.python.org/moin/MySQL](http://wiki.python.org/moin/MySQL)

# css - JavaFX CSS 根属性引用未解决

> ID：13425746
> 
> 赞同：3
> 
> 时间：2012-11-16T23:05:22.963
> 
> 标签：css, javafx-2, javafx

[JavaFX 文档](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm)似乎暗示，如果在 CSS 根类中定义了一个属性，那么场景中的任何对象都可以引用它：

> .root 样式类包括可以被其他样式用来在 UI 中提供一致性的属性。例如，属性 -fx-focused-base 在 .root 样式中定义。此属性由其他 UI 控件的样式用作控件具有焦点时的颜色。

例如，在以下简单的应用程序中：

```
public class Main extends Application {

@Override
public void start(Stage stage) throws Exception {
    AnchorPane pane = new AnchorPane();
    Scene s = new Scene(pane, 800, 600);

    pane.getStylesheets().add("test.css");
    pane.getStyleClass().add("test");

    System.out.println("Root pane style classes:");
    for (String clazz : pane.getStyleClass())
        System.out.println(clazz);

    stage.setScene(s);
    stage.show();
}

public static void main(String[] args) {
    Application.launch();
}
} 
```

使用以下样式表 test.css：

```
.test {
-fx-background-color: -fx-base;
} 
```

结果如下：

```
Root pane style classes:
root
test
WARNING: com.sun.javafx.css.StyleHelper calculateValue Could not resolve '-fx-base' while resolving lookups for '-fx-background-color' from rule '*.test' in stylesheet test.css 
```

（我从警告中删除了文件路径）

为什么它不能解析-fx-base？它显然包含在 caspian.css 中...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T22:45:06.157

这里的问题似乎是样式表（caspian.css）是延迟加载的。因此，除非构建组件（甚至不一定添加），否则不会解析样式表。布局容器（如 AnchorPane）不会触发样式表的加载。另一方面，控件（如按钮/复选框/标签等）将触发加载样式表。

下面是上面测试用例的更新版本来说明这种行为：

```
public class Main extends Application {

@Override
public void start(Stage stage) throws Exception {
    AnchorPane pane = new AnchorPane();

    new Button(); // Trigger loading of default stylesheet

    Scene s = new Scene(pane, 800, 600);
    pane.getStylesheets().add("test.css");
    pane.getStyleClass().add("test");

    System.out.println("Root pane style classes:");
    for (String clazz : pane.getStyleClass())
        System.out.println(clazz);

    stage.setScene(s);
    stage.show();
}

public static void main(String[] args) {
    Application.launch();
}
} 
```

# iphone - 如何判断离开iOS应用程序是从快速应用程序切换还是手动进入前台？

> ID：13425748
> 
> 赞同：1
> 
> 时间：2012-11-16T23:05:29.760
> 
> 标签：iphone, ios, facebook, background, fast-app-switching

有没有办法判断 iOS 应用是从快速应用切换还是手动进入前台？我需要知道调用 applicationWillEnterForeground 的时间，因此可以根据应用程序进入前台的条件执行（或不执行）某些特定代码。

编辑：事实证明，这对我来说更像是一个设计问题。我将代码移至 applicationDidBecomeActive。我还向名为 fastAppSwitching 的 appDelegate 添加了一个 BOOL 属性（可能是错误的名称）。我在 application:handleOpenURL 和 application:openURL:sourceApplication:annotation 中将此设置为 YES。然后我将以下代码添加到应用程序：didFinishLaunchingWithOptions：

```
 if (launchOptions) {
            self.fastAppSwitching = YES;
        }
        else {
            self.fastAppSwitching = NO;
        } 
```

在 applicationDidBecomeActive 中，我使用了以下代码：

```
 if (fastAppSwitching == YES) {
        self.fastAppSwitching = NO; //stop, don't go any further
    }
    else {
       ...
    } 
```

EDIT2：MaxGabriel 在下面提出了一个很好的观点：“只是对采用此处描述的解决方案的其他人的警告，applicationDidBecomeActive：当用户例如忽略电话或短信时调用，这与 applicationWillEnterForeground 不同”。这实际上也适用于应用内购买和 Facebook 应用内授权（iOS 6 中的新功能）。因此，通过一些进一步的测试，这是当前的解决方案：

添加一个名为passedThroughWillEnterForeground 的新Bool。

在应用程序WillResignActive 中：

```
self.passedThroughWillEnterForeground = NO; 
```

在 applicationDidEnterBackground 中：

```
self.passedThroughWillEnterForeground = NO; 
```

在应用程序WillEnterForeground：

```
self.passedThroughWillEnterForeground = YES; 
```

在 applicationDidBecomeActive 中：

```
 if (passedThroughWillEnterForeground) {
        //we are NOT returning from 6.0 (in-app) authorization dialog or in-app purchase dialog, etc
        //do nothing with this BOOL - just reset it
        self.passedThroughWillEnterForeground = NO;
    }
    else {
        //we ARE returning from 6.0 (in-app) authorization dialog or in-app purchase dialog - IE
        //This is the same as fast-app switching in our book, so let's keep it simple and use this to set that
        self.fastAppSwitching = YES;
    }

    if (fastAppSwitching == YES) {

        self.fastAppSwitching = NO;
    }
    else {
        ...
    } 
```

EDIT3：我认为我们还需要一个布尔值来判断应用程序是否是从终止状态启动的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T07:02:53.157

如果您的应用程序由另一个应用程序启动，则

```
- (BOOL)application:(UIApplication *)app
            openURL:(NSURL *)url
  sourceApplicarion:(NSString *)bundleID
         annotation:(id)info; 
```

在您的应用程序委托上调用方法。例如，您可以使用此方法将布尔开关设置为 true，以指示应用程序是否由另一个程序启动。

问题是这个方法是*在之后* `applicationWillEnterForeground:`调用的，所以你无法在那个方法中判断你的应用程序是手动启动的还是自动启动的。

但是，我怀疑如果您需要在特定方法中检测到这一点，您可能会遇到设计问题，您可能应该重新组织您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T00:02:31.633

如果您的应用是从另一个应用打开的，`application:openURL:sourceApplication:annotation`则会在您的应用委托上调用。

# java - 将一个套接字复制到另一个套接字，同一个套接字仍然处于活动状态吗？爪哇

> ID：13425749
> 
> 赞同：3
> 
> 时间：2012-11-16T23:05:42.723
> 
> 标签：java, sockets, variables, connection, communication

如果我有一个名为“sock”的套接字变量，并且由于某种原因，您必须创建一个新的套接字，假设它称为“sock2”，并且您将“sock2”设置为“sock”。然后你扔掉变量'sock'。连接是否仍然有效，“sock2”是否仍然能够与最初位于“sock”中的套接字的另一端通信？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T23:07:37.917

由于仍然存在对原始对象的引用`sock`（以 的形式`sock2`），Java 垃圾收集不会将其处理掉，您仍然可以`sock2`像使用`sock`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T23:44:08.410

基本上你在描述这样的事情

```
public void test (...) {
    Socket sock2;
    {
        Socket sock = // open socket
        sock2 = sock;
        // now 'sock' does out of scope; i.e. you "throw it away"
    }

    // use 'sock2'
} 
```

是的，它会工作得很好。`sock`和都是`sock2`引用变量（Java 中所有非原始类型的变量也是如此！）。分配`sock2 = sock;`只是分配一个引用......所以`sock2`现在指向相同`Socket`的，`sock`您可以使用它与您最初通过 交谈的远程主机交谈`sock`。

* * *

好的，那么`sock2`之前指向 s *different* `Socket`的情况呢。

```
public void test (...) {
    Socket sock2 = // open socket to A
    {
        Socket sock = // open socket to B
        sock2 = sock;
        // now 'sock' does out of scope; i.e. you "throw it away"
    }

    // use 'sock2'
} 
```

它仍然像以前一样工作。出于同样的原因。

唯一需要注意的是，您已经**删除**了对连接到 A 的套接字的引用。如果您不再拥有对`A`套接字的引用，您的应用程序将无法使用它。（这不会影响您与`B`... 交谈的能力，因为您仍然有那个参考 ... in `sock2`）。

那么现在会发生什么？好吧，我们现在遇到了 Java`Socket`对象`A`不再可供代码使用的情况。（用 Java 的说法，对象是“不可访问的”。）这意味着它有*资格*进行垃圾回收。但这并不意味着它会立即被垃圾收集。事实上，垃圾收集器运行之前可能需要几秒钟……或几天……。同时，可能仍然存在与某些远程主机的开放连接，从而在本地和远程绑定资源。这是*资源泄漏*，可能会造成严重后果。（当 GC 最终回收套接字时，实现对象的终结器将关闭底层连接并释放任何资源。但损坏可能已经造成。）

解决方案是确保您的代码始终及时创建`close()`任何`Socket`对象......并且不允许引用只是“掉在地板上”。

# ruby-on-rails - 使用omniauth-facebook的Rails Facebook登录错误 - OmniAuth::Strategies::OAuth2::CallbackError

> ID：13425757
> 
> 赞同：8
> 
> 时间：2012-11-16T23:06:52.287
> 
> 标签：ruby-on-rails, facebook, oauth-2.0, omniauth

我正在尝试在 Rails 3.2.9 中使用omniauth-facebook 登录Facebook；我在[http://railscasts.com/episodes/360-facebook-authentication](http://railscasts.com/episodes/360-facebook-authentication)中遵循了 Ryan Bates 的步骤，此时此刻我拥有相同的代码。

如果我尝试在没有 Javascript 的情况下登录，它可以工作（它会将我带到 Facebook，我授予权限，并成功让我回到应用程序），但如果我尝试使用 Javascript（用于 Facebook 弹出窗口），它最初会显示弹出窗口登录，但随后进行重定向并向我抛出此错误（不要求权限）：

```
Started GET "/auth/facebook/callback" for 127.0.0.1 at 2012-11-16 15:16:03 -0600
(facebook) Callback phase initiated.
(facebook) Authentication failure! invalid_credentials: OmniAuth::Strategies::OAuth2::CallbackError, OmniAuth::Strategies::OAuth2::CallbackError

OmniAuth::Strategies::OAuth2::CallbackError (OmniAuth::Strategies::OAuth2::CallbackError) 
```

这是一个非常常见的错误；我进行了研究并尝试了所有解决方案（主要是几个月前的），但它们都不起作用。这是我尝试过的：

1.  检查 Facebook 中的沙箱已禁用（我已经等待了几个小时的传播）
2.  检查站点 URL`http://localhost:3000/`
3.  检查 App ID 和 App Secret
4.  **将omniauth-facebook** gem降级到1.4，并抛出这个错误：`omniauth-facebook must pass either a`code `parameter or a signed request (via`signed_request `parameter or a`fbsr_XXX`cookie)`
5.  降级到 Rails 3.2.8

我还应该做什么？（我认为关键在于 Javascript，而现在我拥有与 CoffeeScript 相同的视频代码）。提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T18:27:07.187

我刚刚关注了那个 Railscast 并设法让它工作。您会注意到人们[在评论中](http://railscasts.com/episodes/360-facebook-authentication?view=comments)讨论您的问题。按照那里的链接，我最终[在 Github](https://github.com/mkdynamic/omniauth-facebook/issues/73)上解决了这个[问题，在 StackOverflow](https://stackoverflow.com/questions/11597130/omniauth-facebook-keeps-reporting-invalid-credentials)上解决了这个问题。

我建议在它最终发布时更新到`1.6.0`和到。`2.0.0`同时，请确保您没有犯以下任何错误：

*   在两个不同的初始化程序中定义您的应用程序凭据，通常是`omniauth.rb`和`devise.rb`. [资源](https://github.com/mkdynamic/omniauth-facebook/issues/73#issuecomment-9502746)

*   您的实时站点与您的 Facebook 应用程序中配置的站点 URL 之间的域名不匹配。[资源](https://github.com/mkdynamic/omniauth-facebook/issues/73#issuecomment-12745755)

*   让 facebook 应用程序处于沙盒模式，因此域名与生产域名不匹配。[资源](https://github.com/mkdynamic/omniauth-facebook/issues/73#issuecomment-21964889)

*   将 a 添加`before_filter :authenticate`到 OmniauthCallbacksController 或 ApplicationController（因为 OmniauthCallbacksController 继承自 ApplicationController）。[资源](https://stackoverflow.com/questions/14662454/why-am-i-receiving-this-authorization-code-has-been-used-after-the-first-2-use/16859381#16859381)

*   与 Facebook 的客户端流程结合使用`omniauth-facebook`。[资源](https://github.com/mkdynamic/omniauth-facebook/pull/96#issuecomment-29681731)

*   与`state`参数混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T20:07:24.810

无需降级的解决方案（现在使用 1.5.1）：

[https://github.com/intridea/omniauth-oauth2/issues/32](https://github.com/intridea/omniauth-oauth2/issues/32) -> 将此添加到您的提供商声明中：provider :facebook, xxxxxxxxx, yyyyyyyyy, **{:provider_ignores_state => true}**

# javascript - 更改按钮类型时丢失表单验证

> ID：13425758
> 
> 赞同：0
> 
> 时间：2012-11-16T23:06:56.270
> 
> 标签：javascript, html

我有一个表单，它验证使用从函数返回的布尔值选择了一个选项：

```
<form  id="checkoutForm" action="https://www.paypal.com/cgi-bin/webscr" onsubmit="return validateForm()" method="post" name="paypal"> 
```

我正在使用这个标准图像按钮提交表单：

```
<input name="submit" type="image"  src="https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif" value="Checkout"> 
```

但是，我一直在更新并使用 CSS 按钮，所以提交表单如下：

```
 <a href="javascript:void(0)" style="float:right;" class="shopbutton" onclick="document.forms['checkoutForm'].submit();">Checkout with PayPal</a> 
```

我可以像这样使用标准按钮：

```
<input name="submit" type="submit"  class="shopbutton" value="Checkout"> 
```

但这会给我带来一些其他小问题，我想知道如何确保表单使用其他方法进行验证？

TIA

编辑：我还应该提到，在使用`<a href`类型按钮时，该按钮是在`<form>`标签之外声明的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:22:31.747

*直接*使用 javascript 提交表单`onsubmit`时，您正在绕过。这是为什么客户端验证**不好**的一个例子。

 ***解决您的问题的一种方法是`a`像这样附加您的链接：

```
<a href="javascript:void(0)" style="float:right;" class="shopbutton" onclick="validateForm()">Checkout with PayPal</a> 
```

然后只需在验证函数中添加一些错误计数，如果没有发现错误，则在函数内提交，如下所示：

```
function validateForm() {
    var errors = 0;
    if(inputFieldHere.value.length<3) errors++;
    if(errors) return false; //Or display some error or something
    else document.forms["checkoutForm"].submit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:30:02.823

尝试这个：

```
<!DOCTYPE html>
<html>
  <head>
    <title>element</title>
<script type="text/javascript">
  function checkme() {
        if (!document.form.agree.checked) {
            missinginfo = "You must agree to the Terms and Conditions\n Please tick the box and try again.";
            alert(missinginfo);
            return false;
        }
        else {
            alert("Text information");
            return true;
        }
    }

  function submit_form()
  {
        if(checkme() == true)
        {
            document.forms["form"].submit();
        }
  }
</script>
  </head>

  <body>
    <form name="form" id="form" method="post" action="#" onSubmit="return checkme();">
      <input type="checkbox" name="agree" id="agree" value="agree_terms" class="terms">
      <label for="agree">&nbsp;I&acute;ve read terms and conditions and I&acute;m ready to shop</label>
      <input type="submit" name="btnSubmit" value="Submit" class="submit">
    </form>
    <a href="#" style="float:right;" class="shopbutton" onclick="submit_form();">Submit form</a>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T23:14:14.153

我建议将`<input>`表单内的按钮保持为隐藏状态（例如，使用`style="display:none;"`）。

这样，您可以继续使用 onclick 提交表单，并保持验证到位（如果验证代码出于某种原因在表单内部`<a>`查找，我不会感到惊讶）`<input type="submit" />`***

# python - 在 Python 中合并 2 个字典

> ID：13425761
> 
> 赞同：2
> 
> 时间：2012-11-16T23:07:26.640
> 
> 标签：python, dictionary, mutable

我有2本词典。

```
dict1={('SAN RAMON', 'CA'): 1, ('UPLAND', 'CA'): 4, ('POUGHKEESIE', 'NY'): 3, ('CATTANOOGA', 'TN'): 1}

dict2={('UPLAND', 'CA'): 5223, ('PORT WASHING', 'WI'): 11174, ('PORT CLINTON', 'OH'): 6135, ('GRAIN VALLEY', 'MO'): 10352, ('GRAND JUNCTI', 'CO'): 49688, ('FAIRFIELD', 'IL'): 5165} 
```

这些只是样本，实际上每个字典都有数百个条目。我正在尝试合并两个字典并创建包含 {dict1.values(): dict2.values()} 的字典 3，但前提是该城市出现在两个字典中。所以，dict3 中的一个条目看起来像

```
{4:5223}   # for 'UPLAND', 'CA' since it appears in both dict1 and dict2 
```

这只是我正在编写的更大功能中的一小步。我打算尝试类似的东西：

```
for item in dict1.keys():
        if item not in dict2.keys():
            del item
        return dict[(dict1.keys())=(dict2.keys())] 
```

我不知道如何确保来自 dict1 的投诉数量与 dict2 中提到的同一城市相匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T23:17:49.007

这是我认为你想要的[（演示）](http://ideone.com/WOFz9y)：

```
dict3 = dict((dict1[key], dict2[key]) for key in dict1 if key in dict2) 
```

稍微扩展一下，看起来是这样的：

```
dict3 = {}
for key in dict1:
    if key in dict2:
        dict3[dict1[key]] = dict2[key] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:15:24.587

常用键有：

```
set(dict1.keys()) & set(dict2.keys()) 
```

> 创建包含 {dict1.values(): dict2.values()} 的 dict 3

这没有意义，字典是键值对......你真正想要什么？提示：

```
dict3 = {}
for k in set(dict1.keys()) & set(dict2.keys()):
    dict3[dict1[k]]=dict2[k]

{4: 5223} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T23:20:02.357

直接的方法是检查一个键中的每个键是否属于另一个键：

```
result = {}
for key in dict1:
    if key in dict2:
        result[dict1[key]] = dict2[key] 
```

您也可以尝试将它们转换为`set`or`frozenset`并取它们的交集，但我不清楚这是否会更快：

```
keys_in_both = frozenset(dict1) & frozenset(dict2)
result = dict((dict1[key], dict2[key]) for key in keys_in_both) 
```

# php - php中的河豚加密

> ID：13425764
> 
> 赞同：2
> 
> 时间：2012-11-16T23:07:56.460
> 
> 标签：php, encryption, blowfish

我正在为我的应用程序和网站编写加密，但我不知道如何正确加密 php.ini 中的字符串。这段代码已经完成了解密：

```
function decrypt_blowfish($data,$key){
$iv=pack("H*" , substr($data,0,16));
$key=pack("H*" , $key);
$x =pack("H*" , substr($data,16)); 
$res = mcrypt_decrypt(MCRYPT_BLOWFISH, $key, $x , MCRYPT_MODE_CBC, $iv);
return $res;
} 
```

我尝试了简单的：

```
function encrypt_blowfish($data,$key){
    $iv_size = mcrypt_get_iv_size(MCRYPT_BLOWFISH, MCRYPT_MODE_CBC);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $crypttext = mcrypt_encrypt(MCRYPT_BLOWFISH, $key, $data, MCRYPT_MODE_CBC, $iv);
    return $crypttext;
} 
```

但它返回的是奇怪的 ASCI 字符而不是正确的河豚代码。有人可以解释我为什么，我做错了什么吗？提前致谢

甲烷

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T23:15:05.563

```
function decrypt_blowfish($data,$key){
    $iv=pack("H*" , substr($data,0,16));
    $x =pack("H*" , substr($data,16)); 
    $res = mcrypt_decrypt(MCRYPT_BLOWFISH, $key, $x , MCRYPT_MODE_CBC, $iv);
    return $res;
}

function encrypt_blowfish($data,$key){
    $iv_size = mcrypt_get_iv_size(MCRYPT_BLOWFISH, MCRYPT_MODE_CBC);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $crypttext = mcrypt_encrypt(MCRYPT_BLOWFISH, $key, $data, MCRYPT_MODE_CBC, $iv);
    return bin2hex($iv . $crypttext);
}

$string = encrypt_blowfish('hello world', 'abc123');
echo 'ENCRYPTED: ' . $string . "\n";
echo 'DECRYPTED: ' . decrypt_blowfish($string, 'abc123'); 
```

试试看。在解密函数中，您正在从十六进制转换为二进制，因此需要传递一个十六进制值。您的加密功能正在输出二进制，因此您需要通过上述更改将其转换为十六进制。

# ios - 路径中的线条呈 180 度时出现意外的 LineJoinStyle 行为

> ID：13425765
> 
> 赞同：5
> 
> 时间：2012-11-16T23:08:20.767
> 
> 标签：ios, core-graphics, uibezierpath

当一条线完全回到前一行时，我在 UIBezierPath 中得到一个剪裁的 LineJoin。如果我将第二行调整一个像素，则 LineJoin 的行为符合预期。这是代码：

```
UIBezierPath *path = [UIBezierPath bezierPath];
[path setLineWidth:10.0f];
[path setLineCapStyle:kCGLineCapRound];
[path setLineJoinStyle:kCGLineJoinRound];
[path moveToPoint:CGPointMake(100, 100)];
[path addLineToPoint:CGPointMake(200, 100)];
[path addLineToPoint:CGPointMake(150, 100)];
[path moveToPoint:CGPointMake(100, 120)];
[path addLineToPoint:CGPointMake(200, 120)];
[path addLineToPoint:CGPointMake(150, 121)];
[[UIColor redColor] setStroke];
[path stroke]; 
```

这是显示的内容：

![在此处输入图像描述](../Images/20cf7ff6d4dd1afe8386b840ed0b53ff.png)

这是一个错误吗？如果没有，有没有办法让顶部路径 LineJoin 被舍入？（不捏造要点）

当我从“触摸输入”制作 UIBezierPath 时出现了这种情况，并且有时会在乱涂乱画时发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-23T21:37:07.523

这在 iOS 7 中已修复。Open Radar 也已更新。

# android - Android 创建 GestureOverlay 作为系统警报视图（在所有应用程序之上）

> ID：13425769
> 
> 赞同：1
> 
> 时间：2012-11-16T23:08:49.583
> 
> 标签：android, service, overlay, gesture, onfocus

我想为应用程序创建一个手势覆盖。我希望 gesutureoverlay 位于所有其他视图之上。到目前为止，我已经使用文本框和按钮完成了此操作。我有以下代码在所有应用程序之上创建覆盖，但我不能在任何其他应用程序或主屏幕中使用任何其他内容。该应用程序无法专注于背景视图。然而，我确实让我的手势覆盖工作。

我如何至少让手机正常工作，但又能看到用户在所有应用程序顶部进行的滑动（创建手势覆盖）？这是我到目前为止所拥有的

```
@Override
public void onCreate() {
    super.onCreate();
    WindowManager.LayoutParams params = new WindowManager.LayoutParams(
            WindowManager.LayoutParams.MATCH_PARENT,
            WindowManager.LayoutParams.MATCH_PARENT,
            WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
          WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM | 
          WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE |
                   WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,
            PixelFormat.TRANSLUCENT);
    WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
    GestureOverlayView g = new GestureOverlayView(getBaseContext());
    g.setGestureVisible(true);
    g.setEventsInterceptionEnabled(true);
    wm.addView(g, params);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:00:52.243

首先，谢谢，因为您的代码帮助我让 GestureOverlayView 正常工作。

我也在做类似的事情，据我所知，你不能这样做，至少就像那样。为此，您需要拥有 INJECT_PERSMISSION 并且此权限仅授予系统签名的应用程序，因此如果您没有 ROM 签名，则无法使用 Android API 执行此操作。

当然，还有其他方法可以做到这一点。

您可能会做的是在您的活动中获取事件并将它们从您的活动“重新插入”到您下面的活动中。这是你不能通过android做的事情。

看看[这里](http://www.pocketmagic.net/2013/01/programmatically-injecting-events-on-android-part-2/#.USY3NKW6d6t)和[这里](http://softteco.blogspot.com.es/2011/03/android-writing-events-low-level-touch.html)。

在这些链接中，您可以找到有关如何将事件注入 Android 系统的更多信息。

# inheritance - Java 继承 9.1 MonetaryCoin

> ID：13425775
> 
> 赞同：0
> 
> 时间：2012-11-16T23:09:18.693
> 
> 标签：inheritance

> 9.1: MonetaryCoin 设计并实现一个名为 MonetaryCoin 的类，该类派生自第 5 章中介绍的 Coin 类。在 MonetaryCoin 中存储一个表示其值的整数并添加一个返回其值的方法。添加一个 toString 方法，该方法在 Coin 的字符串表示中附加一个空格，后跟硬币的值。
> 
> 司机。无需创建主驱动程序类，而是在 MonetaryCoin 类本身中包含一个 main 方法来练习该类的行为。您的方法应该创建一个包含 7 个 MonetaryCoin 对象的数组，其值为 1,5,10,25,50,100,100，然后遍历该数组，翻转每个硬币。然后该方法应再次遍历数组，调用 getValue 方法并将结果值相加。然后应将每个硬币的字符串表示形式单独打印在一行上，然后在一行上单独打印计算的值的总和（前面带有标签“总价值：”。

这就是问题所在，到目前为止我输入的代码是：

```
public class MonetaryCoin extends Coin

{ private int value; 
 public int getValue()
 { return value; } 
 public String toString() 
{ return super.toString() + " " + value; } 
public static void main(String [] args) 
{ int sum = 0;
MonetaryCoin[] coin = {1,5,10,25,50,100,100}; 
for(int i = 0;i<coin.length;i++)
 { coin[i].flip(); } 
for(int i = 0;i<coin.length;i++) 
{ sum += coin[i].getValue(); 
System.out.println(coin[i].toString()); } 
System.out.println(); 
System.out.println("Total Value: " + sum); } } 
```

我收到一条错误响应：

```
MonetaryCoin.java:9: incompatible types
found   : int
required: MonetaryCoin
MonetaryCoin[] coin = {1,5,10,25,50,100,100}; 
                       ^
MonetaryCoin.java:9: incompatible types
found   : int
required: MonetaryCoin
MonetaryCoin[] coin = {1,5,10,25,50,100,100}; 
                         ^
MonetaryCoin.java:9: incompatible types
found   : int
required: MonetaryCoin
MonetaryCoin[] coin = {1,5,10,25,50,100,100}; 
                           ^
MonetaryCoin.java:9: incompatible types
found   : int
required: MonetaryCoin
MonetaryCoin[] coin = {1,5,10,25,50,100,100}; 
                              ^
MonetaryCoin.java:9: incompatible types
found   : int
required: MonetaryCoin
MonetaryCoin[] coin = {1,5,10,25,50,100,100}; 
                                 ^
MonetaryCoin.java:9: incompatible types
found   : int
required: MonetaryCoin
MonetaryCoin[] coin = {1,5,10,25,50,100,100}; 
                                    ^
MonetaryCoin.java:9: incompatible types
found   : int
required: MonetaryCoin
MonetaryCoin[] coin = {1,5,10,25,50,100,100}; 
```

我怎样才能让它工作？谢谢。

# nanoc - 如何在 Nanoc 站点中为我的主索引文件使用 markdown？

> ID：13425776
> 
> 赞同：1
> 
> 时间：2012-11-16T23:09:22.837
> 
> 标签：nanoc

我想重命名`content/index.html`并`content/index.md`使用降价，但我的规则`/index/`被忽略了；`nanoc show-rules`显示它使用更通用的规则编译它。

如何为索引页面设置规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:10:09.917

原来你必须使用`compile '/'`来匹配`content/index.md`。

这就是[文档](http://nanoc.stoneship.org/docs/4-basic-concepts/#items)所说的含义：

> 有一个具有标识符 / 的“根”或“主页”页面

# knockout.js - KnockoutJS 单选按钮不会像复选框那样改变

> ID：13425779
> 
> 赞同：3
> 
> 时间：2012-11-16T23:09:39.187
> 
> 标签：knockout.js

对于复选框和单选按钮，我有相同的数据结构。选中复选框时，它们会返回正确的布尔值（“选择”变量）。

但是，当我检查单选按钮时，“选择”总是更改为“值”（整数）。

此外，即使 'chosen' == true，单选按钮在开始时也不会被“选中”

**Javascript：**

```
function attributeValueViewModel(data) {
    var self = this;
    self.id = ko.observable(data.id);
    self.attributeID = ko.observable(data.attributeID);
    self.value = ko.observable(data.value);
    self.chosen = ko.observable(data.chosen);
}

function viewModel() {
    var self = this;
    self.attributeValues1 = ko.observableArray([]);
    self.attributeValues2 = ko.observableArray([]);
    self.addToList = function(data) {
        ko.utils.arrayForEach(data, function(item) {           
            self.attributeValues1.push(new attributeValueViewModel(item));
            self.attributeValues2.push(new attributeValueViewModel(item));
        });
    };
}

var arr = [
    {
        "id": 55,
        "attributeID": 28,
        "value": "Yes",
        "chosen": false,
    },
    {
        "id": 56,
        "attributeID": 28,
        "value": "No",
        "chosen": true,
    },
    {
        "id": 62,
        "attributeID": 28,
        "value": "Maybe",
        "chosen": false,
    }
];

var vm = new viewModel();
ko.applyBindings(vm);
vm.addToList(arr); 
```

**HTML**

```
<b>Checkbox:</b>
<div id="test1">
    <span data-bind="foreach: attributeValues1()">
    <input type="checkbox" data-bind="value: id(), checked: chosen, attr: { name: 'test1' }" />
    <span data-bind="text: value()"></span>
    <span data-bind="text: chosen()"></span>
    </span>
</div>
<br />
<b>Radio:</b>
<div id="test2">
    <span data-bind="foreach: attributeValues2()">
    <input type="radio" data-bind="value: id(), checked: chosen, attr: { name: 'test2' }" />
    <span data-bind="text: value()"></span>
    <span data-bind="text: chosen()"></span>
    </span>
</div>​ 
```

**这是我的小提琴：http:** [//jsfiddle.net/SN7Vn/1/](http://jsfiddle.net/SN7Vn/1/)

您能否解释一下这种行为以及为什么单选按钮不更新布尔值（就像复选框一样）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T23:52:37.850

复选框和单选按钮的行为彼此不同。当单个 observable 绑定到`checked`绑定（而不是数组）时，它们的行为特别不同。

对于复选框，它将始终是一个布尔值，指示它是否被选中。简单的。如果是数组，`value`则将从数组中添加/删除。

但是对于单选按钮，它将是分配给单选按钮的值。对于单个 observable，它只会被认为已检查它绑定的值是否等于该值。在您的情况下，您的值绑定到所以只有当值等于相应的 id`id`时才会响应。`chosen`对于数组，它将向数组添加/删除值。

由于没有其他东西改变`chosen`相应属性的值，所以它保持不变

我调整了您的示例以演示该值如何影响检查状态。 [更新的小提琴](http://jsfiddle.net/jeff1203/SN7Vn/2/)

这一切都[在文档中](http://knockoutjs.com/documentation/checked-binding.html)详细说明，请仔细查看。

* * *

如果您希望它与复选框的工作方式类似，则需要做一些工作才能使其正确。由于绑定的工作方式以及它们的顺序依赖性如何导致问题，我有这段代码感觉有点脆弱。你可以试试这个，我只是不确定它有多强大。

为此，您需要一个 observable 来跟踪实际选择的单选按钮的实际更改。然后，您可以订阅该 observable 的更改以更新您选择的 observable。

```
ko.bindingHandlers.radiochecked = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        // the checked binding depends on the element having an initial value
        // we need to allow bindings that potentially set it to be applied first
        setTimeout(function () {
            var options = ko.utils.unwrapObservable(valueAccessor());
            if (options.checked()) {
                options.selected(element.value);
            }
            options.selected.subscribe(function (newValue) {
                options.checked(newValue === element.value);
            });
            ko.applyBindingsToNode(element, { checked: options.selected });
        }, 0);
    }
}; 
```

然后将其绑定到您的单选按钮：

```
<input type="radio" data-bind="
    value: id,
    radiochecked: { 
        'checked': chosen,
        'selected': $root.attributeValues2.selected
    },
    attr: { name: 'test2' }" /> 
```

[演示](http://jsfiddle.net/jeff1203/u3Pde/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:58:57.247

这也可能有所帮助。下面的绑定将采用一组单选按钮，在更改其中一个按钮时，将组中所有其他按钮后面的可观察对象设置为特定值（null、false、0、...）

就目前而言，它要求可观察对象的值是真/假，以便它选择正确的单选按钮。

```
ko.bindingHandlers.checkedRadio = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        $(element).change(function () {
            //Get all radio buttons int he group
            var group = $(element).attr('name');
            var radios = $('input[type="radio"][name="' + group + '"]').not($(element));

            //Reset all values for other radio buttons in this group
            $.each(radios, function (i, radio) {
                var $r = $(radio);
                if (!$r.prop('checked')) {
                    var data = ko.dataFor(radio);
                    data[allBindingsAccessor().checkedRadioProperty](allBindingsAccessor().checkedRadioValue);
                }
            });

            //Update bound data
            var value = valueAccessor();
            var checked = $(element).prop('checked');
            value(checked);
        });

        //Select radio button based on bound data
        var value = unwrap(valueAccessor());
        $(element).prop('checked', value);
    }
}; 
```

要使用绑定，您可以：

```
<input type="radio" value="true" data-bind="name: 'option-group-' + attributeID() }, checkedRadio: chosen, checkedRadioProperty: 'chosen', checkedRadioValue: false" /> 
```

# php - Zend SQL 选择除一之外的所有列

> ID：13425787
> 
> 赞同：0
> 
> 时间：2012-11-16T23:10:36.387
> 
> 标签：php, sql, zend-framework, select

我的“用户”表有很多字段，包括密码字段。所以，如果我想选择一个用户并获取所有信息，我如何在 Zend 中做到这一点，但不包括密码字段？我知道我可以手动输入所有字段，但我想知道是否有办法排除一个字段？

谢谢库沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:20:59.357

我不确定这是一种有效的方法（我相信可以缓存元数据），但您可以使用`Zend_Db_Table`获取[列](http://framework.zend.com/manual/1.12/en/zend.db.table.html#zend.db.table.info)，然后只需删除密码列。

看起来像这样：

```
$info = $table->info();
$columns = $info['cols'];
unset($columns[array_search('password', $columns)]);
//you can now pass $columns to a Zend_Db_Select 
```

# canvas - 制作一个可以保存您的绘图的 HTML 绘图应用程序

> ID：13425791
> 
> 赞同：1
> 
> 时间：2012-11-16T23:11:48.347
> 
> 标签：canvas, drawing, html5-canvas

我有一个我想做的程序的概念。我想制作某种绘图程序，允许您在页面上绘制线条，保存它，然后当另一个用户查看同一页面时，他可以看到第一个用户制作的绘图并对其进行编辑。这将全部在线，大概使用 HTML5 画布。

我想我可以把绘图部分弄清楚：当用户的鼠标被点击时，程序基本上会填充一系列跟踪鼠标移动的圆圈。但是，我很难弄清楚如何保留这些图纸。我现在能想到的最好的解决方案是拍摄图纸的“快照”并以某种格式保存，但随着图纸变大，这意味着有一个巨大的文件被保存并从服务器发送到客户端，这听起来远非理想。

有人可以提供有关如何以有效方式持久保存这些图纸的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:12:00.613

HTML5 像素数据可以轻松导出和导入为 PNG 图像。像素数据大小仅取决于尺寸，而不是应用了多少绘图命令，因为它是基于位图缓冲区的，而不是基于矢量的。

使用 toDataURL() 导出：

[将 HTML Canvas 捕获为 gif/jpg/png/pdf？](https://stackoverflow.com/questions/923885/capture-html-canvas-as-gif-jpg-png-pdf)

将数据保存到服务器。

只需将现有图像加载为并在using`<img>`上绘制图像即可导入现有图像。`<canvas>``drawImage()`

# llvm - 向 LLVM IR 中的指令添加元数据

> ID：13425794
> 
> 赞同：21
> 
> 时间：2012-11-16T23:12:13.660
> 
> 标签：llvm, llvm-c++-api, llvm-ir

首先，我是 LLVM 通行证的新手。

我试图在转换通过后将元数据添加到 LLVM 中的指令中（使用 C++ API）。我打算存储此信息以供工具链中的另一个工具使用。我对此有两个问题。

1.  我希望我存储为元数据的信息能够输入到另一个适用于 LLVM IR 的工具中。那么元数据是个好主意吗？我打算将字符串存储为带有一些说明的元数据。

2.  如果元数据是正确的方法，我需要一些帮助来创建元数据节点。我计划使用 setMedata() 函数将其附加到指令中。setMetadata() 的哪个变体是正确的。我不确定我的数据应该属于哪个 MDKind。我想创建一个 MDString，将它附加到我的 MDNode，然后使用指令调用 setMetadata()。如果我想将元数据附加到函数内的指令，我应该在 setMedata() 中使用什么上下文。上下文与元数据的相关性是什么？

我尝试在论坛和 llvm doxygen 文档中阅读很多讨论，但我没有得到所有问题的清晰完整的答案。感谢您的帮助或一些可以帮助我理解这一点的材料。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-11T08:14:19.503

在我看来：

### 1\. 元数据是正确的使用机制吗？

如果您的“其他工具”本身不是通行证，那么是的，我认为元数据是最好的方法 - 将所有内容保存在 IR 中，易于肉眼识别，易于手动添加以进行测试，并且 - 也许最重要的是 - 确实只要您不重用现有的元数据类型，就不会与其他任何东西发生冲突。

但是，如果您的“其他工具”本身就是一个传递，还有另一种选择：您可以使一个传递依赖于另一个传递，而不是直接在后面的传递中使用前面的信息。优点是您不必修改 IR。

### 2.如何使用自定义元数据节点？

使用 的`char*`变体`setMetadata`，如下所示：

```
LLVMContext& C = Inst->getContext();
MDNode* N = MDNode::get(C, MDString::get(C, "my md string content"));
Inst->setMetadata("my.md.name", N); 
```

如果这是第一次在 a 中使用该字符串`setMetadata`，它将自动`my.md.name`在模块中注册为一种新类型（我相信它实际上在整个上下文中是一致的）。您可以稍后使用以下方法检索字符串：

```
cast<MDString>(Inst->getMetadata("my.md.name")->getOperand(0))->getString(); 
```

但是，如果您想从同一范围调用`getMetadata`或重复调用，您也可以使用来获取实际使用的种类，并使用这些使用种类值的方法的变体。`setMetadata``Module::getMDKindID`

最后，请注意，您可以将元数据节点范围限制在函数内部——为此使用`MDNode::get(..., ..., true)`变体——尽管我自己从未使用过它。

# java - 在带有 Alpha 通道的 PNG 上叠加透明颜色

> ID：13425797
> 
> 赞同：4
> 
> 时间：2012-11-16T23:12:43.800
> 
> 标签：java, image, transparency

我正在寻找一种在 Java 中绘制具有灰度颜色的 PNG 图像（带有 alpha 通道）的方法，然后在其顶部覆盖透明颜色，例如不透明度为 75% 的绿色以更改颜色。 **需要明确的是，生成的图像将是在其顶部放置透明颜色的直接结果，而不是任何特殊类型混合的结果。**

例如，我将绘制以下图像：

![](../Images/aa0bc7d7903ef64f787981cc8a3aa325.png)

然后在图像顶部覆盖 RGB 颜色 (102, 255, 0, alpha)：

![](../Images/3ad0ec081617b5a48de76c7d88381471.png)

在图像上绘制颜色的方法需要不会干扰屏幕上靠近的其他图像。这与 Adob​​e Photoshop 的颜色叠加功能类似。两个图像可以有单独的颜色叠加，但单独的叠加不会相互冲突。

感谢 leonbloy，我相信使用“SRC_OVER”的 AlphaComposit 可以解决这个问题，然后我可以使用一种方法将结果保存为新的 BufferedImage，这将防止覆盖影响屏幕上的任何其他图像对象。

我会在测试时发布结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T17:22:16.440

我能够使用 AlphaComposite、Graphics2D 和 BufferedImage 来获得所需的效果。

```
@Override
public void paintComponent(Graphics g) {
    BufferedImage result = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
    Graphics2D gbi = result.createGraphics();
    BufferedImage x = null;
    try {
        x = ImageIO.read(getClass().getResource("/resources/someimage.png"));
    } catch (IOException ex) {
        Logger.getLogger(CanvasPanel.class.getName()).log(Level.SEVERE, null, ex);
    }
    gbi.drawImage(x, 0, 0, this);
    gbi.setColor(selectedColor);
    gbi.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_ATOP, 0.75f));
    gbi.fillRect(0, 0, width, height);
    g.drawImage(result, 0, 0, this);
} 
```

# php - PHP 脚本中的 IF 语句

> ID：13425809
> 
> 赞同：-1
> 
> 时间：2012-11-16T23:14:33.350
> 
> 标签：php, if-statement

我有一个关于 If 语句的问题，这真的让我抓狂。看来我没有找到正确的解决方案。请让我解释一下情况。有**4种可能的情况**。

1.  没有电影
2.  没有图片
3.  没有电影但有照片
4.  没有照片但有电影

*更多信息，但可能没有必要。* 电影和图片字段是数据库中的字段。使用 PHP 脚本，我正在检查字段是否填充了某些内容。有了这些信息，我将构建我的页面。在某些情况下，没有地方放图片或放电影。我希望你明白我在说什么。

**这是我的代码**

```
<?php
    class Artikel{
public function printWholeArticle()
        {
            include ('connection.php');
            $sSql = "SELECT UNIX_TIMESTAMP(datum) as unixDatum, titel, artikel, id, image, video FROM tblArtikels WHERE id = '" . $this->m_sKey."'"; 
            $res = $mysqli -> query($sSql);
            return ($res);
        }
}

$key = $_GET['id']; // I get the key from the url
$oNieuwsArtikel = new Artikel();
$oNieuwsArtikel -> Key = $key;
$vAllNieuwsArtikel = $oNieuwsArtikel -> printWholeArticle();

$artikel = $vAllNieuwsArtikel -> fetch_assoc();

// just a part of my if statement, to let you guys know how I print the data to the screen
if ($artikel['image'] == "")
            {
                echo "<div class='datum'>" . "<div class='day'>" . date('d', $artikel['unixDatum']) . "</div>" . "<div class='month'>" . "/" . date('m',                            $artikel['unixDatum']) . "</div>" . "<div class='year'>" . date('Y', $artikel['unixDatum']) . "</div>" . "</div>";
            echo "<p>" . "<div class='content_wrap_page'>" .  "<div class='artikel_page'>" 
            . "<h1>" . $artikel['titel'] ."</h1>" . $artikel['artikel'] . "</div>" . "</div>" . "</p>";
            } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:26:18.140

```
if (empty($artikel['video']))
{
    // no film code

    if (!empty($artikel['image']))
    {
        // no film but with picture code
    }
}
else if (empty($artikel['image']))
{
    // no picture code

    if (!empty($artikel['video']))
    {
        // no picture but with film code
    }
} 
```

其中 $film 和 $picture 设置为从数据库查询中检索到的值。

# git - Git SSH 身份验证

> ID：13425811
> 
> 赞同：3
> 
> 时间：2012-11-16T23:14:37.687
> 
> 标签：git, ssh, public-key-encryption, public-key, atlassian-fisheye

我的服务器上有 Debian、Fisheye 和 Git。我的 git 存储库由 Fisheye 管理。鱼眼部分没有认证。所有的认证过程都由 git 管理。

我想使用 SSH 身份验证，以便在将更改推送到服务器时不需要提供用户名和密码。我知道如何创建 rsa 密钥，但是在服务器上哪里复制我的公钥？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T07:03:18.747

[《服务器上的 Git - 设置服务器](http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server)》一文的关键部分是：

> 您需要将一些开发人员 SSH 公钥添加到该`~/.ssh/authorized_keys`用户的文件中。
> 假设您通过电子邮件收到了一些密钥并将它们保存到临时文件中。同样，公钥看起来像这样：

```
$ cat /tmp/id_rsa.john.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCB007n/ww+ouN4gSLKssMxXnBOvf9LGt4L
ojG6rs6hPB09j9R/T17/x4lhJA0F3FR1rP6kYBRsWj2aThGw6HXLm9/5zytK6Ztg3RPKK+4k
Yjh6541NYsnEAZuXz0jTTyAUfrtU3Z5E003C4oxOj6H0rfIF1kKI9MAQLMdpGW1GYEIgS9Ez
Sdfd8AcCIicTDWbqLAcU4UpkaX8KyGlLwsNuuGztobF8m72ALC/nLF6JLtPofwFBlgc+myiv
O7TCUSBdLQlgMVOFq1I2uPWQOkOWQAHukEOmfjy2jctxSDBQ220ymjaNsHT4kgtZg2AYYgPq
dAv8JggJICUvax2T9va5 gsg-keypair 
```

（注意：确保键显示在**一行**中）

> 您只需将它们附加到您的 authorized_keys 文件中：

```
$ cat /tmp/id_rsa.john.pub >> ~/.ssh/authorized_keys 
```

如果您的服务器上没有`authorized_keys`文件，请创建它，但请确保正确保护它。

```
server$ mkdir ~/.ssh
server$ chmod 700 ~/.ssh
server$ cat ~/id_rsa.pub >> ~/.ssh/authorized_keys
server$ chmod 600 ~/.ssh/authorized_keys
server$ rm ~/id_rsa.pub 
```

有关具体示例，请参阅“[为 Gerrit 和 Hudson 创建 SSH 密钥”。](https://stackoverflow.com/a/3712619/6309)

*   确保 git 在 ssh 守护程序使用的 PATH 中。
*   确保您的所有父目录`~/.ssh`都不可写入组（`chmod 755`仅）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T05:18:02.917

您需要将您的公钥粘贴到`~/.ssh/authorized_keys`. 如果文件不存在，则创建该文件。

# dynamics-crm-2011 - 我可以在 2011 年实施 Dynamics CRM 4.0 crmsvcutil out 和 classNameFormat 功能吗？

> ID：13425812
> 
> 赞同：0
> 
> 时间：2012-11-16T23:14:37.173
> 
> 标签：dynamics-crm-2011, dynamics-crm

使用[针对 Microsoft Dynamics CRM 4.0 的 crmsvcutil，](http://msdn.microsoft.com/en-us/library/ff681563.aspx)您既可以将多个类文件输出到一个目录（`out`参数），也可以为生成的类名（`classNameFormat`参数）添加前缀或后缀。

不幸的是，这个功能似乎已经被[CRM 2011 工具](http://msdn.microsoft.com/en-us/library/gg695820.aspx)删除了。

Erik Pool 写过[使用 CrmSvcUtil 过滤生成的实体](http://erikpool.blogspot.com/2011/03/filtering-generated-entities-with.html)，这可能是我们首先需要采取的路径，但我没有找到任何可以帮助替换的东西`classNameFormat`。

有没有办法扩展 crmsvcutil 以在生成期间处理此问题，而不是通过生成的类文件并手动进行此修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:37:07.447

`INamingService`您可以通过创建实现接口的扩展来实现此目的，而无需手动更新所有生成的文件。您感兴趣的特定方法将是`GetNameForEntity`和`GetNameForEntitySet`。对于所有其他人，只需委托给构造函数中提供的默认实现。

CRM 2011 SDK 是一个[很好的起点](http://www.microsoft.com/en-gb/download/details.aspx?id=24004)，因为有一些代码示例演示了可扩展性。

# javascript - 如何在 zepto 中使用 requirejs

> ID：13425815
> 
> 赞同：6
> 
> 时间：2012-11-16T23:15:01.887
> 
> 标签：javascript, backbone.js, requirejs, zepto, frontend

我似乎无法让 zepto 与 requirejs 一起工作。

这是我的文件

main.js

```
require.config({
  paths: {
    zepto: 'libs/zepto/zepto.min',
    underscore: 'libs/underscore/underscore-min',
    backbone: 'libs/backbone/backbone-min',
    cordova: 'libs/cordova/cordova-2.1.0',
    history: 'libs/history/history',
    historyZ: 'libs/history/history.adapter.zepto'
  },
  shim: {
        zepto: {
          exports: '$'
        },
        backbone: {
            deps: ['underscore', 'zepto']
        }}
});

require([

  // Load our app module and pass it to our definition function
  'app',
], function(App){
  // The "app" dependency is passed in as "App"
  App.initialize();
}); 
```

应用程序.js

```
define([
  'zepto',
  'underscore',
  'backbone',
  'router' // Request router.js
], function($, _, Backbone, Router){
  var initialize = function(){
    // Pass in our Router module and call it's initialize function
    Router.initialize();
  }

  return {
    initialize: initialize
  };
}); 
```

路由器.js

```
define([
  'zepto',
  'underscore',
  'backbone',
  'views/dashboard'
], function($, _, Backbone, DashboardView){
  var AppRouter = Backbone.Router.extend({
    routes: {
      // Define some URL routes
        ''      : 'showDashboard',
    }
  });

  var initialize = function(){
    var app_router = new AppRouter;
    app_router.on('showDashboard', function(){
        // We have no matching route, lets just log what the URL was
        //console.log('No route:', actions);
        var dashboardView = new DashboardView();
        dashboardView.render();
      });
    Backbone.history.start();
  };
  return {
    initialize: initialize
  };
}); 
```

你得到了图片..但是当我运行这一切时，我在 Chromes 控制台中得到了这个：

```
GET http://localhost/SBApp/www/js/jquery.js 404 (Not Found)         require.js:1824 
```

和一个脚本错误（我在括号中加上了这不会让我发布。）

在带有 firebug 的 Firefox 中，它会吐出一个 scripterror

有没有人成功地用 require 配置了 zepto 并且可以给我一些帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T18:02:23.693

使用 requirejs 的 shim 功能。看到这个[答案](https://stackoverflow.com/a/11893728/369722)。避免每次发生这种情况时都必须编辑库的源代码。另外，您不必记住每次将库更新到较新版本时都进行编辑。

*添加此免责声明，因为@James Watkins 认为 SO 上的每个帖子都必须为他工作，否则它应该被否决：这个解决方案可能对你有用，也可能不适合你（特别是考虑到它是**3 年前写的！！！**）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T20:34:21.370

Backbone 通常有一个 "define(["underscore","jquery","exports"],.." 在里面，应该只需要替换它。然后，我在 zepto.js 的末尾附加了以下代码片段。

```
// If `$` is not yet defined, point it to `Zepto`
window.Zepto = Zepto
'$' in window || (window.$ = Zepto)

if ( typeof define === "function" && define.amd ) {
  define( "zepto", [], function () { return Zepto; } );
} 
```

它似乎工作。如果你想让 jquery 作为备份，（这很脏）但我在 zepto.js 文件中将“zepto”定义为“jquery”，然后在 requirejs.config 我做了这个......

```
requirejs.config({
  paths: {
      // Jquery should be zepto, probably a better way to do this...
      jquery: RegExp(" AppleWebKit/").test(navigator.userAgent) ? '/js/vendor/zepto' : '/js/vendor/jquery.min',
      underscore: '/js/vendor/underscore.min',
      backbone: '/js/vendor/backbone.min'
  }
});

require(['jquery', 'underscore', 'backbone'], function($, _, Backbone) {
  // Stuff here...
}); 
```

但是通过这样做，我不必为 jquery 修改主干.js 定义文件，并且我引入了对 IE 的浏览器支持......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-12T02:15:11.430

您可以添加一个 'extend/zepto.js' 文件而不是修改 Zepto.js：

```
/**
 * extend Zepto
 */

define([
  'zepto'
], function() {

  "use strict";

  window.Zepto = Zepto
  // If `$` or `jQuery` is not yet defined, point them to `Zepto`
  '$' in window || (window.$ = Zepto)
  'jQuery' in window || (window.jQuery = Zepto)

  return Zepto;

}); 
```

然后将`jquery`路径设置为`extend/zepto`：

```
require.config({
  paths: {
    'jquery': 'extend/zepto'
  }
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-29T03:19:59.293

[https://github.com/l-zhi/html5-backbone-boilerplate](https://github.com/l-zhi/html5-backbone-boilerplate)你可以通过这个带有 webpack 的样板来使用它

```
resolve: { alias: {
     "jquery": 'xxx/zepto.js' // or jquery.js for PC
}}, 
```

# ssh - SSH -X 和 ssh -Y 的区别

> ID：13425820
> 
> 赞同：14
> 
> 时间：2012-11-16T23:16:03.430
> 
> 标签：ssh, xterm

我通过运行如下代码通过 SSH 连接到服务器：

```
ssh serverUser@serverIP "./runServer" & 
```

当我在客户端启动 VM 并在其上编写 startX 时，在脚本的下一行，它说：`X Error of failed request: Bad Window.`

查找此错误后，我通过使用“Y”转发来解决此问题。

```
ssh -Y serverUser@serverIP "./runServer" & 
```

我无法理解 X 和 Y 转发是否是相同的概念 - 有多少这样的 X、YZ 转发是可能的？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-17T00:36:18.713

从手册页：

```
 -X      Enables X11 forwarding.  This can also be specified on a per-host
         basis in a configuration file.

         X11 forwarding should be enabled with caution.  Users with the
         ability to bypass file permissions on the remote host (for the
         user's X authorization database) can access the local X11 display
         through the forwarded connection.  An attacker may then be able
         to perform activities such as keystroke monitoring.

         For this reason, X11 forwarding is subjected to X11 SECURITY
         extension restrictions by default.  Please refer to the ssh -Y
         option and the ForwardX11Trusted directive in ssh_config(5) for
         more information.

 -Y      Enables trusted X11 forwarding.  Trusted X11 forwardings are not
         subjected to the X11 SECURITY extension controls. 
```

另请参阅：[https ://askubuntu.com/questions/35512/difference-between-ssh-y-and-ssh-x](https://askubuntu.com/questions/35512/difference-between-ssh-y-and-ssh-x)

# java - Gwt java打印滚动面板的内容

> ID：13425822
> 
> 赞同：2
> 
> 时间：2012-11-16T23:16:20.523
> 
> 标签：java, gwt, printing, panel

我正在尝试设置一个打印按钮，以便当用户单击它时，将打印 ScrollPanel 的内容或至少将其放入某种形式，以便用户可以打印它。不知道什么是最简单的方法，我已经看到有关使用 css 删除其他项目的建议，但我不确定如何执行此操作。有什么建议或帮助吗？我不知道从哪里开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:53:04.967

You could try to extract the dom contents of the scroll panel and append it to a pop-up window that the user can ctrl + p to print.

The CSS way of doing it is by appending a media attribute (i.e. MEDIA="print") to the scrollpanel element, but this may not be compatible in all browsers -- no support in IE8.

See: [http://www.w3.org/TR/CSS21/media.html](http://www.w3.org/TR/CSS21/media.html)

Compatibility: [http://caniuse.com/#search=media](http://caniuse.com/#search=media)

Tutorial: [http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T14:53:08.370

最简单的方法之一可能是在您的单击处理程序中设置`Window.print()`方法并使用`[yourPanelName].seVisible(false)`打印前方法和（真）后使用，以重新获得您的本机 GUI。

# php - 计算后显示答案时会更改格式

> ID：13425823
> 
> 赞同：2
> 
> 时间：2012-11-16T23:16:27.410
> 
> 标签：php, jquery, html

我[这里有一个 jsfiddle](http://jsfiddle.net/JWTQk/29/)

现在，当您查看 jsfiddledemo 时，我遇到的问题是，如果您在其中一个文本输入（问题 1）中输入一个数字，它会进行计算，但它会在列中以不同的方式显示答案。

假设在您输入数字 2 的顶部文本输入中，它应该显示“剩余标记 3”，但它会删除“剩余标记”txt 并仅显示数字 3（也不是粗体）。

所以我的问题是，为什么在显示计算答案时会改变远端列的格式？

下面是jquery函数：

查询：

```
 $(function () {
        //alert("here");         
        var questions = $('#markstbl td[class*="_ans"]').length - 1;

        //disable single entry
        for (var i = 0; i <= questions; i++) {
            if ($("[class*=q" + i + "_mark]").length == 1) {
                var t_marks = $("[class*=q" + i + "_ans]").html();
                //alert(t_marks);
                $("[class*=q" + i + "_mark]").val(t_marks)
                    .attr("disabled", "disabled");
                //$("[class*=q"+i+"_mark]").attr("disabled","disabled");
            }
        }

        //find each question set and add listeners
        for (var i = 0; i <= questions; i++) {
            $('input[class*="q' + i + '"]').keyup(function () {
                var cl = $(this).attr('class').split(" ")[1]
                var questionno = cl.substring(cl.indexOf('q') + 1, cl.indexOf('_'));
                var tot_marks = $(".q" + questionno + "_ans_org").val();
                //alert(tot_marks);
                var ans_t = 0;
                $("[class*=q" + questionno + "_mark]").each(function () {
                    var num = (isNaN(parseInt($(this).val()))) ? 0 : parseInt($(this).val());
                    ans_t += parseInt(num);
                });
                ans_t = tot_marks - ans_t;
                //alert(ans_t);
                //var fixedno = tot_marks;
                var ans = (parseInt(ans_t) < 0) ? tot_marks : ans_t;
                $(".q" + questionno + "_ans").val(ans);
                $(".q" + questionno + "_ans_text").html(ans);
            });
        }
    });​ 
```

下面是动态 HTML 表：

HTML：

```
 <body>
  <table border='1' id='markstbl'>
    <thead>
      <tr>
        <th class='questionth'>Question No.</th>

        <th class='questionth'>Question</th>

        <th class='answerth'>Answer</th>

        <th class='answermarksth'>Marks per Answer</th>

        <th class='noofmarksth'>Total Marks Remaining</th>
      </tr>
    </thead>

    <tbody>
      <?php
      $row_span  = array_count_values($searchQuestionId);
      $prev_ques = '';
      foreach ($searchQuestionId as $key => $questionId) {
      ?>

      <tr class="questiontd">
        <?php
            if ($questionId != $prev_ques) {
        ?>

        <td class="questionnumtd" name="numQuestion" rowspan=
        "<?php echo $row_span[$questionId]; ?>"><?php
                echo $questionId;
        ?><input type="hidden" name="q<?php echo $questionId; ?>_ans_org" class=
        "q<?php echo $questionId; ?>_ans_org" value=
        "<?php echo $searchMarks[$key]; ?>" /><input type="hidden" name=
        "q<?php echo $questionId; ?>_ans" class=
        "q<?php echo $questionId; ?>_ans" value=
        "<?php echo $searchMarks[$key]; ?>" /></td>

        <td class="questioncontenttd" rowspan="<?php echo $row_span[$questionId]; ?>">
        <?php
                echo $searchQuestionContent[$key];
        ?></td><?php
            }
        ?>

        <td class="answertd" name="answers[]"><?php
            echo $searchAnswer[$key];
        ?></td>

        <td class="answermarkstd"><input class=
        "individualMarks q<?php echo $questionId; ?>_mark_0" q_group="1" name=
        "answerMarks[]" id="individualtext" type="text" /></td><?php
            if ($questionId != $prev_ques) {
        ?>

        <td class="noofmarkstd q<?php echo $questionId; ?>_ans_text" q_group="1"
        rowspan="<?php echo $row_span[$questionId]; ?>"><?php
                echo $searchMarks[$key];
        ?></td><?php
            }
        ?>
      </tr><?php
          $prev_ques = $questionId;
      }
      ?>
    </tbody>
  </table>
</body> 
```

更新：

以下是页面第一次打开时的样子：

![在此处输入图像描述](../Images/838f6728bf2b9ca33332dc024814dd64.png)

当我在文本输入中输入数字并进行计算并在最后一列显示答案时，您可以在下面看到右侧最后一列的变化：

![在此处输入图像描述](../Images/56146b8ec956f9bd46b4b28d8a398ece.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T01:46:26.683

当您执行以下操作时：

```
$(".q" + questionno + "_ans_text").html(ans); 
```

你`<strong>Marks Remaining:<br/>5</strong>`只是用一个数字代替。一个简单的解决方案是添加另一个包含数字的标签，并且只更改该标签的文本。删除`strong`标签是格式不同的原因

```
<strong>Marks Remaining:<br/><span class="ans">5</span></strong>
$(".q" + questionno + "_ans_text span.ans").html(ans); 
```

或者您可以解析新的 html：

```
var answerText='<strong>Marks Remaining:<br/>'+ans+'</strong>';
$(".q" + questionno + "_ans_text").html(answerText); 
```

# distributed-transactions - XA 准备阶段的两阶段提交和执行？

> ID：13425824
> 
> 赞同：1
> 
> 时间：2012-11-16T23:16:37.433
> 
> 标签：distributed-transactions, xa, 2phase-commit, paxos

我试图理解两阶段提交，但我不清楚每个本地站点何时执行其分布式事务的一部分。

在发送准备消息之前是否发生这种情况。那是在两阶段提交 xa 协议甚至运行之前发生吗？

还是每个站点在收到准备消息后执行其部分分布式事务，这意味着准备消息本身也包括要执行的事务查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:38:49.647

是的，在发送准备消息之前执行。您应该假设在所有内容都已执行后，整个 2PC 协议在 commit() 操作中运行。考虑以下最终提交的分布式事务的想象轨迹。缩进意味着过程嵌套：

```
transactionalOperation() is a procedure at some client site
    begin() is a remote invocation to the coordinator
        create global XID
        return global XID
    XID is added to the thread-local context at the caller
    executeOperation(params) is a remote invocation to a participant site
        XID is implicitly propagated to the server side thread
        inform coordinator that this site is a participant
        execute the operation! (acquiring locks)
    ... more operations ....
    commit() is a remote invocation to the coordinator
        XID is implicitly propagated to the server side thread
        -------------- 2PC starts here ----------------
        for all registered participants:
            prepare(XID) is a remote invocation to each site
                make sure that the transaction can be committed,
                usually by writing and flushing a log 
                return OK
        gather decisions
        for all reguistered participants:
            commit(XID) is a remote invocation to each site
                log transaction commit
                (release locks)
        -------------- 2PC ends here ----------------
    XID is removed from the thread-local context at the caller
    transaction is complete! 
```

实际上，正如您所看到的，准备消息将由协调器仅发送到那些先前在此类事务的上下文中执行过某些操作的站点，因此先前已注册为该事务的参与者。

# count - For Loop Countprime

> ID：13425825
> 
> 赞同：1
> 
> 时间：2012-11-16T23:16:42.890
> 
> 标签：count, primes

我已经创建了这段代码，我收到了一条评论，上面写着：

> “countPrimes 方法中的 for 循环不从 0 计数到输入的值”。

我不明白，你能告诉我这个评论是什么意思吗？

```
private static boolean isPrime(int prime) {
    if (prime <1 || prime % 2 == 0){
        return false;
    }

    for(int i = 2; i <= Math.sqrt(prime) ; i++) {
        if ((prime % i) == 0) {
            return false;
        }
    }
    return true;
}

/**
 * Count howmany prime exsit between user input and 10,000.
 * @param test if the number is prime.
 * @return the number of primes are found.
 */
private static int countPrimes(int userInput){
    int count =0;
        for(int i=userInput; i<=MAX_PRIME; i++) {
            if(isPrime(i)){
                count++;
            }
        }
    return count;   
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:20:07.430

这意味着它不这样做：

```
for(int i=0; i<=userInput; i++) 
```

这就是所有要说的，真的。你应该问发表评论的人，IMO。

# python - Beautiful Soup 并提取数组的字符串部分

> ID：13425829
> 
> 赞同：2
> 
> 时间：2012-11-16T23:17:38.620
> 
> 标签：python, beautifulsoup

考虑到这个 URL： [http ://www.nyse.com/about/listed/chn.html](http://www.nyse.com/about/listed/chn.html)

我正在尝试检索此字符串：'Pacific Ex Japan Funds' 但它不在汤中！？！

```
fundCode = 'chn'
url = 'http://www.nyse.com/about/listed/' + fundCode + '.html'
html = urllib2.urlopen(url)
soup = BeautifulSoup(html) 
```

这很奇怪，因为桌子的其他部分都在汤里。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:34:21.450

如果您下载 HTML（没有浏览器）

```
content = html.read() 
```

您会看到页面数据是由 JavaScript 函数提供的。

要从此页面中提取信息，您需要一个可以处理 JavaScript 的库。

一种方法是使用[Selenium](http://seleniumhq.org/)，另一种方法是使用[PyQt 的 WebKit](http://webscraping.com/blog/Scraping-JavaScript-webpages-with-webkit/)。

# javascript - 当访问者单击按钮时，如何更改页面的 URL？

> ID：13425833
> 
> 赞同：5
> 
> 时间：2012-11-16T23:17:50.333
> 
> 标签：javascript, html, forms, submit

当访问者单击按钮元素时，如何更改 URL？

例子：

```
<form id="search">
  <input type="text" />
  <button onclick="javascript:alert('hi');">Alert Hi</button>
  <button onclick="javascript:window.location.href='http://www.google.com/'">Go to Google</button>
</form> 
```

（[或参见 JSFiddle](http://jsfiddle.net/E7UEe/)。）

对于快速演示页面，我只需在访问者单击按钮时将其发送到新 URL。我可以执行 JavaScript onclick（在 Alert Hi 按钮中），如果我`window.location.href='http://www.google.com/'`从 Firebug 的控制台执行，URL 会更改。我需要做什么来更改按钮单击时的 URL？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-16T23:25:39.397

问题是当您单击按钮时正在提交表单。添加`type="button"`使其不提交表单。您也不需要`javascript`在`onclick`属性中。请参阅[如何防止按钮提交表单](https://stackoverflow.com/questions/932653/how-to-prevent-buttons-from-submitting-forms)

示例[http://jsfiddle.net/E7UEe/1/](http://jsfiddle.net/E7UEe/1/)请注意，它不会转到 google.com，因为 jsfiddle 不允许它。注意错误信息`Refused to display document because display forbidden by X-Frame-Options.`

```
<form id="search">
  <input type="text" />
  <button onclick="javascript:alert('hi');">Alert Hi</button>
  <button type="button" onclick="window.location.href='http://www.google.com/'">Go to Google</button>
</form>​ 
```

没有 JS 的替代方法是`appearance:button` [CSS 指令](https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance) [http://jsfiddle.net/d6gWA/](http://jsfiddle.net/d6gWA/)

```
<a class="btn"> Link looking like button</a>​
.btn {
    appearance: button;
    -moz-appearance: button;
    -webkit-appearance: button;
    -ms-appearance: button;
}​ 
```

或者你总是可以把按钮放在一个链接中[http://jsfiddle.net/d6gWA/2/](http://jsfiddle.net/d6gWA/2/)

```
<a class="btn" href="http://www.google.com" target="_blank"><button type="button">Link Button</button></a>​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T23:20:38.397

```
 <button onclick="javascript:window.location='http://www.google.com/'">Go to Google</button> 
```

只需删除您的 .href 即可

# iphone - 有什么方法可以强制 UIKit 在某些设备上使用标准（不是@2x）图像，即使@2x 图像可用？

> ID：13425834
> 
> 赞同：3
> 
> 时间：2012-11-16T23:17:55.417
> 
> 标签：iphone, ios, uikit, retina-display, ipod-touch

我正在开发一个使用大量详细图形的项目。由于始终显示的精灵、背景等的数量，它具有很大的内存占用。我们将 cocos2D 用于动画和精灵，将 UIKit 用于 UI、菜单等。

如果设备是带有视网膜显示屏的 iPod Touch，我希望能够通过强制 UIKit 使用标准分辨率图像来减少 iPod Touch 上的内存使用（它的内存比同等 iPhone 少）。我可以在 cocos2d 中设置一个标志来强制加载 SD 图像，但我还没有为 UIKit 找到类似的选项或解决方法。

总而言之，该项目是一个通用二进制文件，其中包含 SD 和视网膜风格的所有图像，如下所示：

图像.png

图片@2x.png

在 iPhone 4、4S 和 5（都带有视网膜显示器）上，需要加载 @2x 版本图像的默认 UIKit 行为。

在 iPod Touch 第 4 代（可能还有第 5 代）上，我想强制 UIKit 加载 SD image.png 文件，即使还有可用的 image@2x.png 文件。

这是为了减少这些具有视网膜显示器的设备上的内存占用，但内存只有手机的一半。

如果有人有任何想法或解决方法来实现这一点，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:55:07.517

添加我的评论作为答案，

您可能必须创建自己的方法来根据设备获取图像。在这种情况下，您不应该使用 @2x 命名图像。您的方法应该基于设备和视网膜显示获取图像，并返回可用于创建`UIImage`对象的图像名称。这个方法可以在一个类上添加`UIImage`。

例如：-

```
[UIImage testImageNamed:@"test.png"]; 
```

并将方法实现为返回或基于设备和视网膜/非视网膜分辨率`testImageNamed`的类别。`UIImage``testRetina.png``test.png`

**更新：** 或者，您也可以尝试在此类别中的 iPod touch 设备上使用以下内容，以便您可以使用 @2x 本身（test.png 和 test@2x.png）保留图像。我不确定这是否可行。我假设如果 fileName 只有“test”，这可能会获取 test.png 本身，但我没有尝试过。这绝对值得一试。

```
NSString *fileLocation = [[NSBundle mainBundle] pathForResource:fileName ofType:extension];
NSData *imageData = [NSData dataWithContentsOfFile:fileLocation];
[UIImage imageWithData:imageData]; 
```

添加以上内容仅适用于 iPod touch 和其他设备可以恢复正常`[self imageNamed:@"test.png"];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:25:06.833

我认为你能做的最好的就是在 iPod 上加载不同的图像，这样你就可以保证不存在 @2x 版本。这样你可以节省内存，但实际上应用程序会因为图像重复而变得更重......

希望能帮助到你！再见！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T23:36:20.613

我会在 UIImage 上写一个类别，其名称类似于

myImageNamed:(NSString*)name

然后使用 UIDevice 来确定当前设备并在你的包中搜索你想要使用的图像。

它看起来像这样：

```
- (UIImage*)myImageNamed:(NSString*)name
{
    if (!notIpodTouch) {
       return [self imageNamed:name];
    }

    //search through mainBundle for file with passed in name
    //return that

} 
```

# ruby-on-rails - 为某个 rake 任务定位源代码的一个命令

> ID：13425835
> 
> 赞同：1
> 
> 时间：2012-11-16T23:18:10.367
> 
> 标签：ruby-on-rails, rake

首先，并非所有任务都由 rake -T 列出。但即使我知道这个任务，也很难找到它的源代码。有没有人写过类似的实用程序或 gem

rake open db:test:prepare

这将打开在我的文本编辑器中定义 db:test:prepare 的源文件？使用 rvm 和 gemspecs，我花费了大量的时间来寻找正确的源文件。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:32:01.340

rake -T 只列出`desc "Foo"`前面有一行的任务。大多数 Rails 核心任务都定义在`/tasks`各种 gem 的子目录中（railties 是个大问题）。

我喜欢我的 IDE (RubyMine) 的一件事是，它将所有 gem（由 RVM 存储在上帝知道的地方）到编辑器中的一个视图中——我可以搜索、查找文件等等，就好像它们在我的正常源路径中一样。标准是将它们放在`tasks`子目录中。

但是你可能知道所有这些，除了 rake -T 之外我一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T23:50:02.620

此命令显示一个综合列表，但没有说明。仍然是一个巨大的进步。

```
rake -P | grep rake 
```

参考：[http ://edgar.tumblr.com/post/29071212872/how-to-list-all-rails-3-rake-tasks](http://edgar.tumblr.com/post/29071212872/how-to-list-all-rails-3-rake-tasks)

# symfony - Symfony2/Doctrine2 如何将函数从实体移动到存储库

> ID：13425837
> 
> 赞同：0
> 
> 时间：2012-11-16T23:18:31.360
> 
> 标签：symfony, annotations, doctrine-orm, repository

我的实体（User.php）中有一个函数可以计算用户的未读警报：

```
public function getCountUnreadAlerts()
{
    $countUnread = 0;
    $alerts = $this->getAlertsReceived();
    foreach ($alerts as $alert)
    {
        if (!$alert->getReadbyreceiver())
        {
            $countUnread ++;
        }
    }
    return $countUnread;
} 
```

它工作正常，我可以在控制器中使用 getCountUnreadAlerts() 函数，在树枝模板中使用 app.user.getCountUnreadAlerts。一切都很好，但我的理解是，这样的功能不应该真正成为实体的一部分，而是更好地放置在存储库中？

我的用户实体设置了注释以指向我的 UserRepository...

```
* @ORM\Entity(repositoryClass="MyCompany\BlogBundle\Repository\UserRepository") 
```

我的问题是，如何将该函数移动到我的 UserRepository.php 中？到目前为止，我的尝试（将函数直接粘贴到 UserRepository 中）导致出现错误消息，指出方法“getCountUnreadAlerts”不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:50:38.707

当您`app.user`在模板或`$this->container->get('security.context')->getToken()->getUser()`控制器中使用时，您得到的是用户实体。很明显，用户实体没有任何`getCountUnreadAlerts()`方法，因为您将它移到了存储库中。因此，您必须获取用户存储库而不是实体来调用此方法。

所以然后使用`$this->getDoctrine()->getRepository('User')->getCountUnreadAlerts()` 如果它仍然是用户实体的一部分，您可能还会收到另一个错误“getAlertsReceived() 不存在......”。

# jquery - 类似于下拉菜单的 Jquery 工具提示

> ID：13425841
> 
> 赞同：0
> 
> 时间：2012-11-16T23:19:26.973
> 
> 标签：jquery, plugins

我正在创建一个 jQuery 插件来显示工具提示。我想添加一个选项，toolitp 将充当下拉菜单。我的意思是，当我将光标移到工具提示上时，我可以单击该工具提示内的链接。问题是当我将光标移到工具提示上时，他消失了，在这种情况下不受欢迎。

JavaScript（**[示例](http://jsfiddle.net/rWRV5/)**）：

```
(function($) {

$.fn.jTooltip = function(options) {

    var defaults = {
        'location': 'right',
        'menu': false,
        'className': 'default',
        'content': 'tooltip content',
        'top': 0,
        'left': 0,
        'overlay': false,
        'zIndex': 2000
    },
        settings = $.extend({}, defaults, options);
    this.each(function() {
        var $this = $(this);
        $this.mouseover(function() {
            if (settings.menu) {
                $(this).addClass('menu');
                $(document).on('mouseleave', '.show-tip', function() {
                    $(".tip-top").remove();
                });
            }

            if (settings.location == 'bottom') {
                thisCss = {
                    'top': $this.offset().top + $this.innerHeight() + 10 + settings.top,
                    'left': $this.offset().left + settings.left,
                    'z-index': settings.zIndex
                };
            }
            if (settings.location == 'right') {
                thisCss = {
                    'top': $this.offset().top - $this.innerHeight() + 5 + settings.top,
                    'left': $this.offset().left + $this.innerWidth() + 5 + settings.left,
                    'z-index': settings.zIndex
                };
            }
            $('<div id="jTooltip" />').appendTo('body').html(settings.content).addClass(settings.className).css(thisCss);
            if (settings.overlay) {
                $('<div id="overlay" />').appendTo('body').css({
                    'opacity': 0.5,
                    'background': '#000',
                    'position': 'absolute',
                    'left': 0,
                    'top': 0,
                    'z-index': 1000,
                    'width': '100%',
                    'height': '100%'
                });
            }
        });
        $(this).mouseleave(function() {
            $("#jTooltip").remove();
        });
        return this;
    });
};

})(jQuery);
$('.show-tooltip').jTooltip({
    'location': 'bottom',
    'menu': 'true'
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:27:26.423

你需要添加任何你想要的命名选项....我会打电话给它`sticky`

然后将其更改`mouseleave`为：

```
if( !settings.sticky){    
    $(this).mouseleave(function() {
                $("#jTooltip").remove();
    });
 }else{
  /* logic to remove when user interacts with dropdown or moves on to another tooltip element*/
  /* may need to check if a tooltip already exists in prior code and remove it before adding new one*/
   /*  what you do will depend on UI you want when sticky is used*/

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:32:23.223

我会给用户一两秒钟的时间来进入上下文菜单，如果用户进入上下文菜单，那么菜单会保留或隐藏。

```
$(this).mouseleave(function() {
                t = setTimeout(function() {
                    $("#jTooltip").remove();
                }, 2000);
                $('#jTooltip').hover(function() {
                    clearTimeout(t);
                }, function() {
                    $(this).remove();
                });
            }); 
```

小提琴 - [http://jsfiddle.net/rWRV5/1/](http://jsfiddle.net/rWRV5/1/)

# sql-server-2008 - 有条件地插入数据；子查询的问题

> ID：13425848
> 
> 赞同：0
> 
> 时间：2012-11-16T23:20:26.563
> 
> 标签：sql-server-2008, ssis, conditional-statements

我正在尝试在 SSIS OLEDB Source 中实现这种功能。

1）统计异常表中的记录 2）如果有异常，将数据写入excel表 3）如果没有，写'No data available'

我为此编写了一个简单的查询，但得到错误 *Msg 116, Level 16, State 1, Line 3 当子查询没有与 EXISTS 一起引入时，选择列表中只能指定一个表达式。*

```
SELECT CASE WHEN (SELECT COUNT(*) FROM exceptionTable) > 0 THEN
(SELECT * FROM exceptionTable) ELSE 'No Error data available' end 
```

我理解错误消息的内容并知道如何解决它，但我想不出这个问题的替代解决方案。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:36:21.890

您应该能够使用 EXISTS 关键字来处理这个问题。这些方面的东西应该可以解决问题：

```
if exists(select * from exceptionTable)
    select * from exceptionTable
else 
    select 'No Error data available' 
```

EXISTS 关键字指定一个子查询，可用于测试子查询返回的任何行是否存在。如果没有返回任何行，则计算结果为 false 并执行 ELSE 子句。

# ruby-on-rails-3 - jQuery 数据表在本地工作，但不在 Heroku 上

> ID：13425856
> 
> 赞同：3
> 
> 时间：2012-11-16T23:21:09.280
> 
> 标签：ruby-on-rails-3, jquery-ui, heroku, datatables

我正在将 jquery-datatables-rails gem 实现到我的应用程序中。我可以在我的本地主机上成功启动它，但是当我推送到 Heroku 时，我应该转换为 DataTable 的表没有显示任何内容。

我遵循了许多教程，但由于某种原因无法启动它。这是我的设置：

**应用程序.js**

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require bootstrap-dropdown
//= require bootstrap
//= require dataTables/jquery.dataTables
//= require dataTables/jquery.dataTables.bootstrap
//= require_tree . 
```

**应用程序.css**

```
 *= require_self
 *= require dataTables/jquery.dataTables
 *= require dataTables/jquery.dataTables.bootstrap
 *= require_tree . 
```

**Locations.js.coffee**

```
jQuery ->
    $('#locations').dataTable
      sPaginationType: "bootstrap"
      sDom: "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>" 
```

我的**application.rb**确实包含： config.assets.initialize_on_precompile = false

**经过更多测试**

经过大量测试，数据表似乎不喜欢我的某些领域。这很奇怪。例如：

```
<td><%= network.name %></td>
<td><%= network.user.try(:name) %></td>
<td><%= network.phone_number %></td>
<td><%= network.user.try(:email) %></td> 
```

如果我删除 :email 和 :user 字段，DT 可以工作。我想可能是因为它的格式化方式，所以我什至尝试将其转换为与 <%= network.name %> 相同的布局，但仍然无法正常工作。第二次我删除它，它再次工作。

很奇怪

# java - java - 如何获取被Java中的用户环境变量覆盖的系统环境变量？

> ID：13425860
> 
> 赞同：0
> 
> 时间：2012-11-16T23:21:51.460
> 
> 标签：java, windows, windows-7, environment-variables

在 Windows 7 环境中，我在系统的环境变量下定义了一个变量 VARA="x"，在用户的环境变量下定义了相同的变量 VARA="y"。我如何获得系统环境变量部分中定义的 VARA 的值。我总是得到用户价值而不是系统价值。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T23:28:50.490

你不能。

`System.getenv()`返回应用程序启动时环境变量的值。这些值的设置方式与 JVM 无关且无法访问

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T03:42:43.093

您必须使用[JNA访问](https://github.com/twall/jna)[注册表](http://twall.github.com/jna/3.4.0/javadoc/com/sun/jna/platform/win32/Advapi32Util.html#registryGetStringValue%28com.sun.jna.platform.win32.WinReg.HKEY,%20java.lang.String,%20java.lang.String%29)。

```
Advapi32Util.registryGetStringValue(WinReg.HKEY_LOCAL_MACHINE,
    "SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Environment",
    name); 
```

您还可以访问用户变量：

```
Advapi32Util.registryGetStringValue(WinReg.HKEY_CURRENT_USER,
    "Environment",
    name); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T23:26:56.550

在 Java 中，您只需键入：

```
 String variable = System.getenv("WINDIR");  
System.out.println(variable); 
```

你得到系统的环境变量。

如果要搜索所有系统的环境变量：

```
Map<String, String> variables = System.getenv();  

for (Map.Entry<String, String> entry : variables.entrySet())  
{  
   String name = entry.getKey();  
   String value = entry.getValue();  
   System.out.println(name + "=" + value);  
} 
```

# windows - 检查注册表项，然后在 Powershell 中递增

> ID：13425862
> 
> 赞同：0
> 
> 时间：2012-11-16T23:22:14.570
> 
> 标签：windows, powershell, windows-7, registry

我正在尝试检查是否存在 reg 键，如果存在则增加 reg 键。我确认如果我直接输入值，我可以设置注册表值。即输入值3。

```
$path = "HKLM:\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\SharedDLLs"
$psv = Get-ItemProperty -path $path
$value = $psv."c:\windows\system32\test.dll"

if(!(Test-Path $value))
    {
    Set-ItemProperty -path $path -name $key -Type DWORD -value $value++
    }
Else
    {
    echo "error 1"
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:35:27.053

`$value`是一个数字，所以`Test-Path $value`总是错误的。您要检查哪条路径？文件系统路径 c:\windows\system32\test.dll 还是注册表项路径？如果它是注册表项路径，则您知道它存在，因为您对其执行了 Get-ItemProperty。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T04:44:05.050

作为管理员，`$dllToCheck`使用您自己的值进行更改并尝试以下操作：

```
$regPath = "HKLM:\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\SharedDLLs"
$dllToCheck = "C:\Program Files (x86)\Hewlett-Packard\Shared\CaslVer.exe"

$exist =  get-itemproperty $regPath -name $dllToCheck -ErrorAction silentlycontinue
if ($exist -ne $null)
{
  $currentValue = $exist.$dllToCheck
  $nextValue = $currentValue + 1
  Set-ItemProperty $regPath -name $dllToCheck -Value $nextValue
} 
```

# c# - 使用 IEnumerable 时定位单个报表

> ID：13425863
> 
> 赞同：1
> 
> 时间：2012-11-16T23:22:29.467
> 
> 标签：c#, linq, ienumerable

我有以下代码。所有 20 个对象似乎都可以正常创建。
然后第一个`foreach`工作正常并遍历所有 20个。
使用的第二个示例`linq`也工作得很好。

那么是否可以使用诸如 之类的属性仅针对其中一个对象`ReportKey`，并仅为该对象运行该方法`RunThisReport`？或者，因为我使用了这种类型`IEnumerable<>`，我走入了死胡同？

```
static void Main(string[] args) {

    var models = SelectReports("SELECT * FROM 20RecordTable");

     //1.running the method for each
    foreach(myReport x in models) {
        Console.WriteLine("Doubled key:{0}",  x.myReportKeyDoubled().ToString());
    }

    //2.linq sample
    var result = from sample in models
                    select sample.ReportName;
    foreach(string x in result) {
        Console.WriteLine(Convert.ToString(x));
    }

    //3\. target a single report say reportKey 512 and run the method RunThisReport?

    Console.WriteLine("Press [enter] to exit");
    Console.Read();
}

static IEnumerable<myReport> SelectReports(string myCommandText) {

    var connectionString = ConfigurationManager.ConnectionStrings["xxx"].ConnectionString;
    using(var conn = new SqlConnection(connectionString))
    using(var cmd = conn.CreateCommand()) {
        conn.Open();
        cmd.CommandText = myCommandText;
        using(var reader = cmd.ExecuteReader()) {

            while(reader.Read()) {
                yield return new myReport {

                    ReportKey = reader.GetInt32(reader.GetOrdinal("ReportKey")),
                    ReportName  = reader.GetString(reader.GetOrdinal("ReportName")),
                    ReportDescription  = reader.GetString(reader.GetOrdinal("ReportDescription")),
                    ReportTechDescription = reader.GetString(reader.GetOrdinal("ReportTechDescription "))

                };
            }
        }
    }
}

public class myReport {

    public int ReportKey { get; set; }
    public string ReportName { get; set; }
    public string ReportDescription { get; set; }
    public string ReportTechDescription { get; set; }

    public int myReportKeyDoubled() {
        return ReportKey*2;
    }
    public string RunThisReport(){
        return this.ReportName + " needs to be run via" + this.ReportTechDescription;
    }         
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:26:00.840

```
 var report = models.SingleOrDefault(m => m.ReportKey == 512);

 if (report != null)
     report.RunThisReport(); 
```

或者使用理解语法（丑陋，是吗？）：

```
var report = (from m in models
              where m.ReportKey == 512
              select m).SingleOrDefault(); 
```

顺便说一句，使用[Dapper](http://code.google.com/p/dapper-dot-net/)您的代码将如下所示：

```
static IEnumerable<myReport> SelectReports(string myCommandText) 
{    
    var connectionString = ConfigurationManager.ConnectionStrings["xxx"].ConnectionString;
    using(var conn = new SqlConnection(connectionString))
    {
        conn.Open();
        return conn.Query<myReport>(myCommandText);    
    }
} 
```

Dapper 可通过 NuGet 获得。这是我在使用 ADO.NET 时的选择

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:26:57.323

```
models.First(x => x.ReportKey == 42).RunThisReport(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T23:34:14.463

如果我没看错，那么您正在为使用 LINQ 获取对象而苦苦挣扎。这里最简单的做法是使用 LINQ 扩展方法。我相信这就是您正在寻找的：

```
models.First(i => i.ReportKey == yourReportKey).RunThisReport(); 
```

或者澄清这里发生了什么：

```
// Get the report that matches the key
myReport report = models.First(i => i.ReportKey == "YOUR-KEY-VALUE");

// Call RunThisReport for that report.
report.RunThisReport(); 
```

这也适用于集合：

```
models.Where(i => i.ReportKey == yourReportKey).ForEach(report => report.RunThisReport()); 
```

希望有帮助！如果没有，请澄清您的问题，我很乐意提供帮助。

# sql-server-2008 - 来自 Ubuntu 的 SQL Server - 登录失败

> ID：13425870
> 
> 赞同：3
> 
> 时间：2012-11-16T23:23:21.903
> 
> 标签：sql-server-2008, ubuntu, sqlcmd

我有一个全新的 Ubuntu 12 盒子。我安装了 unixodbc 和 64 位 linux MS SQL Server 2008 驱动程序。

当我跑

```
sqlcmd -S dbserver -U me -P secret 
```

我回来

```
Login failed for user 'me'. 
```

相同的 sqlcmd 行在 Windows 上运行良好。

混合身份验证已打开。

我正在使用正确的用户名和密码（同样，Windows 上的相同命令有效）。

我可以远程登录到 dbserver:1433；它似乎不是网络问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T08:40:44.777

我们有 Ubuntu 12.04 连接到 MSSQL。这是我们所做的

```
sudo apt-get install freetds-dev freetds-bin tdsodbc -y
sudo nano /etc/freetds/freetds.conf 
```

删除测试连接并添加您的 SQL 信息

```
[mySQLserver]
    host = 192.168.1.5
    instance = MYSQLSERVER
    port = 1433
    tds version = 8.0 
```

然后运行以下

```
tsql -S 192.168.1.5 -U sa 
tsql -C
isql -v MSSQL sa 'yourSqlPassword'
service --status-all 
```

希望这可以帮助

# php - 在 php 中检查一些 ID 的数组

> ID：13425878
> 
> 赞同：0
> 
> 时间：2012-11-16T23:24:10.370
> 
> 标签：php, arrays, get

我是一个绝对的初学者，`PHP`我的第一个 scipt 需要一些帮助。

我有一个这样的数组：

```
$ids = array("test1", "testa", "test2", "testv"); 
```

这是我的完整代码：

```
<?php
$ids = array("test1", "testa", "test2", "testv");
$id = $_GET['id'];
if($id  == null){$done .= "Wrong ID";}
else if ($id  == $ids[0])
{
$laenge = 8;
for($i=0;$i<$laenge;$i++){$rnd = rand(1,62);
if ($rnd <= 10){$rnd += 47;}else if($rnd <= 36){$rnd += 54;}
else{$rnd += 60; }
$done .= chr($rnd);
}
}?> 
```

现在我将使用数组 ( `script.php?id=`) 的 GET 变量检查输入。

在示例`script.php?id=test1`<<< 因为 ( `$id == $ids[0]`) 工作得很好但是我怎样才能让它工作只接受我的数组 ($ids) 中的（所有）变量

例如：

```
script.php?id=test1 = ok
script.php?id=testa = ok
script.php?id=test2 = ok
script.php?id=testv = ok
script.php?id=bla   = Not ok 
```

我希望你能理解我的问题并能帮助我。先感谢您 ：）

编辑：感谢您的帮助，但是当我使用它时

```
<?php
$ids = array("test1", "testa", "test2", "testv");
if(in_array($_GET['id'], $ids) 
{

$laenge = 8;
for($i=0;$i<$laenge;$i++){$rnd = rand(1,62);
if ($rnd <= 10){$rnd += 47;}else if($rnd <= 36){$rnd += 54;}
else{$rnd += 60; }
$gutschein .= chr($rnd);

} else {
echo 'Wrong ID';
}

}?> 
```

我变成了白页，对不起，我是 php 的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:27:05.003

您可以使用[`in_array`](http://php.net/manual/en/function.in-array.php)来查看一个值是否在给定的数组中。

```
if(in_array($_GET['id'], $ids)) {
  // do stuff
} else {
   echo 'Wrong ID';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:27:43.410

看一下[in_array()](http://php.net/manual/en/function.in-array.php)方法，这可能是您正在寻找的。

```
if (in_array($id, $ids)) {
   // Do your stuff when in array
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T23:27:53.723

如果你想检查一个值是否在你的数组中，你应该使用 PHPs [in_array](http://php.net/manual/en/function.in-array.php)方法，例如：

```
else if (in_array($id, $ids)) 
```

附言

在 PHP 中，您可以使用`elseif`代替`else if`，它是用于此目的的保留字。

# c - 参数在 C 中的类型不完整

> ID：13425879
> 
> 赞同：2
> 
> 时间：2012-11-16T23:24:12.373
> 
> 标签：c, enums, compiler-errors, incomplete-type

我正在编写一些代码，当我尝试测试我的代码时，我得到了一个错误。

这是我的代码：

```
#include <stdio.h>

enum { add = 0, addu, sub, subu } mips_opcode;
typedef enum mips_opcode mips_opcode_t;

typedef unsigned char byte; // 8-bit int

struct mips {
    char *name;
    byte opcode;
};
typedef struct mips mips_t;

void init (mips_t *out, char *name_tmp, mips_opcode_t opcode_tmp) {
    out->name = name_tmp;
    out->opcode = (byte)opcode_tmp;
}

int main (void) {
    pritnf("no error i assume\n");

    return 0;
} 
```

命令行中的错误是：

```
main.c:14:55: error: parameter 3 ('opcode_tmp') has incomplete type 
```

我不能使用枚举作为参数还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T23:26:48.880

这条线是罪魁祸首：

```
enum { add = 0, addu, sub, subu } mips_opcode; 
```

您正在声明一个名为 的变量`mips_opcode`，它是一个匿名`enum`类型。

它应该是：

```
enum mips_opcode { add = 0, addu, sub, subu }; 
```

枚举列表的名称紧跟在单词之后`enum`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T23:26:29.183

它需要是这样的：

```
enum mips_opcode { add = 0, addu, sub, subu }; // type name is "enum mips_opcode"
typedef enum mips_opcode mips_opcode_t;        // type alias 
```

甚至：

```
typedef enum { add = 0, addu, sub, subu } mips_opcode_t; // alias of anon. type 
```

不要混淆类型名称和变量！

（顺便说一句，Posix`_t`为类型保留后缀，我相信......）

# java - 线程管理

> ID：13425881
> 
> 赞同：0
> 
> 时间：2012-11-16T23:24:31.400
> 
> 标签：java, multithreading, synchronization

所以我一直在尝试编写一个涉及线程的java程序。这基本上是一个线程向共享内存资源（下面代码中的单元类）请求移动权限的问题。我将向您展示线程中的代码示例。单元类中提到的三个方法是同步方法，但是它们不实现等待或通知。

```
public void run() {
    try{
        while(true){
            Random r = new Random();
            Thread.sleep(r.nextInt(1000));
            //asks the class cell permission to move if the cell is free.
            if(cell.asksAccess(xi, yi, xf, yf)){
                cell.releaseCell(xi, yi); //release the previous cell
                move(); // move the object
                cell.blockCell(xi, yi); // blocks the cell where the object is now staying.
                setChanged();
                notifyObservers();
            }
        }
    } catch (InterruptedException e) {
    }
}

private void move() {
    int dx = xf - xi;
    int dy = yf - yi;

    xi += (int) Math.signum(dx);
    yi += (int) Math.signum(dy);
} 
```

就像我之前说的，所有调用的单元类方法都是同步的。我的问题是这没有按我的预期工作，当我进行 sysout 调试时，它表明线程并不总是向前移动，有时它们甚至会回到最初的位置，我不明白为什么因为 move 方法总是告诉他们前进，永远不要后退。这是单元类的同步问题吗？或者它是移动方法？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T00:38:52.933

首先，让我们考虑`move`方法。假如说：

*   , ,和变量是`xi`,和的实例变量`xf``yi``yf``Runnable`
*   没有其他（回调）方法可以访问或更新它们，

那么我们可以得出结论，这些变量是“线程受限的”，不需要同步。

那么问题出在哪里？好吧，我认为它在这里：

```
if (cell.asksAccess(xi, yi, xf, yf)) {
    cell.releaseCell(xi, yi); //release the previous cell
    move(); // move the object
    cell.blockCell(xi, yi); // blocks the cell where the object is now staying.
    setChanged();
    notifyObservers();
} 
```

我可以看到两个问题：

*   我想你说过`askCell`，`blockCell`并在对象`releaseCell`上同步。`cell`但问题是“询问、阻止、释放”的顺序必须是原子的。
*   您的代码似乎在`xi, yi`... 释放一个单元格（？），然后再次阻止它。这些评论似乎暗示您应该打电话`cell.blockCell(xf, yf)`。

* * *

> ...处理该序列同步的最佳方法是什么？

没有看到相关代码，很难说最好的方法是什么。但是*一种*方法是对`cell`对象进行一次调用......然后处理`move`and 通知；例如这样的：

```
if (cell.checkAndMove(xi, yi, xf, yf)) {
    move(); // move the object
    setChanged();
    notifyObservers();
} 
```

其中`checkAndMove`在类中定义`Cell`为：

```
public synchronized boolean checkAndMove(int xi, int yi, int xf, int yf) {
    boolean ok = this.asksAccess(xi, yi, xf, yf);
    if (ok) {
        this.releaseCell(xi, yi);
        this.blockCell(xi, yi);
    }
    return ok;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:31:06.460

私有 void move() 方法应该是同步的。

# asp.net - WCF 服务内容类型为 text/xml，应为 application/soap+xml

> ID：13425882
> 
> 赞同：1
> 
> 时间：2012-11-16T23:24:32.123
> 
> 标签：asp.net, wcf, content-type

有谁知道为什么当 WCF 服务应该是 application/soap+xml 时，它可以将其内容类型作为 text/xml 发送？

接下来是服务器 Web.config：

```
<system.serviceModel>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
  <services>
    <service name="WCFServicioSNP.ServicioSNP" behaviorConfiguration="WCFServicioSNP.ServicioSNPBehavior">
      <endpoint address="" binding="wsHttpBinding" contract="WCFServicioSNP.IServicioSNP"/>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
    </service>
    <service behaviorConfiguration="WCFServicioSNP.ServicioNovedadSNPBehavior" name="WCFServicioSNP.ServicioNovedadSNP">
      <endpoint address="" binding="wsHttpBinding" contract="WCFServicioSNP.IServicioNovedadSNP"/>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
    </service>
    <service behaviorConfiguration="WCFServicioSNP.ServicioInfraestructuraSNPBehavior" name="WCFServicioSNP.ServicioInfraestructuraSNP">
      <endpoint address="" binding="wsHttpBinding" contract="WCFServicioSNP.IServicioInfraestructuraSNP"/>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
    </service>
  </services>
  <behaviors>
    <serviceBehaviors>
      <behavior name="WCFServicioSNP.ServicioSNPBehavior">
        <serviceMetadata httpGetEnabled="True"/>
        <serviceDebug includeExceptionDetailInFaults="False"/>
      </behavior>
      <behavior name="WCFServicioSNP.ServicioNovedadSNPBehavior">
        <serviceMetadata httpGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="False"/>
      </behavior>
      <behavior name="WCFServicioSNP.ServicioInfraestructuraSNPBehavior">
        <serviceMetadata httpGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="False"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
</system.serviceModel> 
```

# php - php 登录错误 - 解析错误：语法错误，意外的 T_IF

> ID：13425883
> 
> 赞同：1
> 
> 时间：2012-11-16T23:24:43.667
> 
> 标签：php, html, syntax, login

我在第 23 行收到错误，即这一行：

```
if (mysql_num_rows($result) > 0) { 
```

你能在下面看到我的代码并看到我错过的任何东西吗？

```
<?php
// Include database connection and select database UFPProducts
     include "../shopdb/connection.php";
?>
<?php
//
session_start();
// (2) Collect data from form and save in variables

$username=$_POST['username'];
$password=$_POST['password']; 

// (3) Create query of the form below to search the user table
//   "SELECT * FROM Users WHERE UserName='$username' AND  Password='$password'"

"SELECT * FROM USERS where Username='$username' AND Password='$password'"

// (3) Run query through connection

// (4) Check result of query using code below

// if rows found set authenticated user to the user name entered 
if (mysql_num_rows($result) > 0) { 
$_SESSION["authenticatedUser"] = $username;
// Relocate to the logged-in page
header("Location: loggedon.php");
} 
else
// login failed redirect back to login page with error message
{
$_SESSION["message"] = "Could not connect as $username " ;
header("Location: login.php");
}
?> 
```

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:26:43.530

```
"SELECT * FROM USERS where Username='$username' AND Password='$password'"; 
```

最后加一个分号试试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:34:50.420

使用此代码，这样您将最大限度地减少通过 SQL 注入攻击您的网站的机会。

```
<?php
// Include database connection and select database UFPProducts
     include "../shopdb/connection.php";
?>
<?php
//
session_start();
// (2) Collect data from form and save in variables

$username=mysql_real_escape_string(htmlentities($_POST['username']));
$password=mysql_real_escape_string(htmlentities($_POST['password']));

// (3) Create query of the form below to search the user table
//   "SELECT * FROM Users WHERE UserName='$username' AND  Password='$password'"

$query = "SELECT * FROM USERS where Username='$username' AND Password='$password'";
$result = mysql_query($query) or die (mysql_error()); 

// (3) Run query through connection

// (4) Check result of query using code below

// if rows found set authenticated user to the user name entered 
if (mysql_num_rows($result) > 0) { 
$_SESSION["authenticatedUser"] = $username;
// Relocate to the logged-in page
header("Location: loggedon.php");
} 
else
// login failed redirect back to login page with error message
{
$_SESSION["message"] = "Could not connect as $username " ;
header("Location: login.php");
}
?> 
```

# oracle - 从何处获取 Oracle TKPROF.exe 实用程序？

> ID：13425892
> 
> 赞同：3
> 
> 时间：2012-11-16T23:25:47.340
> 
> 标签：oracle, oracle11g, profiling

有谁知道哪个 Oracle 安装程序包包含 TKPROF.exe 实用程序？我安装了“Oracle 客户端库”并尝试安装“Oracle 客户端运行时 11g”，虽然该安装有 sqlplus.exe 和 tnsping.exe ，但它缺少 tkprof.exe 。我正在使用 TOAD 11g，它似乎需要该文件的目录位置才能执行跟踪。我试图避免在我的开发系统上安装完整的 Oracle ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:47:12.363

我认为 tkprof 仅随服务器一起提供。尽管客户端可以请求创建跟踪文件，但跟踪文件将被创建并存储在服务器上。如果你需要访问服务器来获取文件，你不妨在服务器上运行 tkprof。

但是如果还是有问题，可以从服务器的/bin/目录下复制tkprof.exe和相关文件，然后在本地运行。我不确定究竟需要哪些文件，但它通过复制所有 279 MB 文件在 Windows 上的 11.2.0.3 上为我工作。

但是，如果您正在使用 Toad，并且执行需要 tkprof 的工作，那么您确实应该在本地安装 Oracle。

# objective-c - NSTextField 自定义背景、边框和角

> ID：13425896
> 
> 赞同：2
> 
> 时间：2012-11-16T23:26:21.307
> 
> 标签：objective-c, macos, cocoa

我想用 3 张图片绘制我自己的 TextField。

1.  input_l.png - 输入的左侧
2.  input_m.png - 输入的中间部分 - 1px 宽 - 应该拉伸或相乘以填充中间部分
3.  input_r.png - 右侧

所有图像都包含边框、背景、阴影，只是我需要用这些图片绘制它的所有内容。

但是我无法使用 NSTextField 的子类和这些方法来绘制它：

```
- (void)awakeFromNib
{
    [self setDrawsBackground:NO];
}

- (void)drawRect:(NSRect)rect
{
    NSDrawThreePartImage(rect, [NSImage imageNamed:@"input_l.png"], [NSImage imageNamed:@"input_m.png"], [NSImage imageNamed:@"input_r.png"], NO, NSCompositeSourceOut, 1.0, NO);

    [super drawRect:rect];
} 
```

它使用文本/占位符绘制黑色背景。

这就是它应该看起来的样子： [http ://d.pr/i/VLEN](http://d.pr/i/VLEN)

如果还有其他更好的方法来绘制这个，请告诉我 :) 我突然想到我可以使用 1px 宽的没有边框的背景图像来绘制这个，并且在代码中使角变圆并以某种方式绘制甚至边框。但是，我仍然想知道如何按照我尝试的方式进行操作，以备将来使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:10:57.563

可以有很多方法：

子类 NSButton 并且如果需要也子类 NSButtonCell 并覆盖这些方法

1.  -(void)drawRect:(NSRect)rect {

    }

2.  drawText:withFrame:inView:

3.  绘制图像：withFrame：inView：。

# scheduledexecutorservice - 从 ScheduledExecutorService 中删除 Runnable

> ID：13425898
> 
> 赞同：4
> 
> 时间：2012-11-16T23:26:25.390
> 
> 标签：scheduledexecutorservice

这是情况，代码如下

用户填写 3 个字段并按下“添加”按钮 => 创建一个 ToDoBean 并将其添加到一个 ToDoModel（扩展 AbstractTableModel），并使用模型中的 ToDoBean 的索引创建一个 Runnable。Runnable 通过 ScheduledExecutorService 立即启动。

Runnable 的目标是递减一个 int 直到它达到零。

一切正常。

现在用户还可以在 JTable 中选择一行并按下“删除”按钮以从列表中删除 ToDoBean。

我的问题是：当我删除 bean 时，看起来它也从 ScheduledExecutorService 中删除了。为什么？如何？事实上，这正是我所需要的，但我想了解这些机制。谢谢

编码：

```
package demo.todolist;

import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.WindowConstants;

public class ToDoFrame extends javax.swing.JFrame {

    private final static int POOL_SIZE = 10;
    private ToDoModel model = new ToDoModel();
    private ScheduledExecutorService scheduledExecutorService = Executors.newScheduledThreadPool(POOL_SIZE);           

    /** Creates new form ToDoFrame */
    public ToDoFrame() {
        initComponents();
    }

    private ToDoBean createToDoBean() {
        return new ToDoBean(jTextField1.getText(), jTextField2.getText(), Long.valueOf(jTextField3.getText()));
    }

    private void addToList(ToDoBean toDoBean) {
        model.addToDoBean(toDoBean);
        scheduledExecutorService.schedule(new UpdateRunnable(model.getRowCount() - 1), 0,TimeUnit.SECONDS);
    }

    private class UpdateRunnable implements Runnable {

        private int index;

        public UpdateRunnable(int index) {
            this.index = index;
        }

        @Override
        public void run() {
            System.out.println("Task for index " + index + " started");
            while (model.getToDoBeanAt(index).getDelay() > 0) {
                try {
                    Thread.sleep(10000);
                    model.decreaseBeanAt(index);
                    System.out.println("Delay decreased at index " + index);

                } catch (InterruptedException ex) {
                    Logger.getLogger(ToDoFrame.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
            System.out.println("Task for index " + index + " ended");
        }
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {
        GridBagConstraints gridBagConstraints;

        jLabel1 = new JLabel();
        jLabel2 = new JLabel();
        jLabel3 = new JLabel();
        jTextField1 = new JTextField();
        jTextField2 = new JTextField();
        jTextField3 = new JTextField();
        jButton1 = new JButton();
        jScrollPane1 = new JScrollPane();
        jTable1 = new JTable();
        jButton2 = new JButton();

        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(new GridBagLayout());

        jLabel1.setText("Name :");
        gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.anchor = GridBagConstraints.LINE_END;
        gridBagConstraints.insets = new Insets(5, 5, 5, 5);
        getContentPane().add(jLabel1, gridBagConstraints);

        jLabel2.setText("Description :");
        gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = GridBagConstraints.LINE_END;
        gridBagConstraints.insets = new Insets(5, 5, 5, 5);
        getContentPane().add(jLabel2, gridBagConstraints);

        jLabel3.setText("Delai (seconds) :");
        gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = GridBagConstraints.LINE_END;
        gridBagConstraints.insets = new Insets(5, 5, 5, 5);
        getContentPane().add(jLabel3, gridBagConstraints);

        jTextField1.setText("my name ");
        jTextField1.setMinimumSize(new Dimension(50, 25));
        jTextField1.setPreferredSize(new Dimension(80, 27));
        gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.anchor = GridBagConstraints.LINE_START;
        gridBagConstraints.insets = new Insets(5, 5, 5, 5);
        getContentPane().add(jTextField1, gridBagConstraints);

        jTextField2.setText("some description");
        jTextField2.setMinimumSize(new Dimension(145, 25));
        jTextField2.setPreferredSize(new Dimension(145, 27));
        gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.anchor = GridBagConstraints.LINE_START;
        gridBagConstraints.insets = new Insets(5, 5, 5, 5);
        getContentPane().add(jTextField2, gridBagConstraints);

        jTextField3.setHorizontalAlignment(JTextField.TRAILING);
        jTextField3.setText("5");
        jTextField3.setMinimumSize(new Dimension(25, 25));
        jTextField3.setPreferredSize(new Dimension(25, 27));
        gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = GridBagConstraints.LINE_START;
        gridBagConstraints.insets = new Insets(5, 5, 5, 5);
        getContentPane().add(jTextField3, gridBagConstraints);

        jButton1.setText("Add");
        jButton1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        getContentPane().add(jButton1, new GridBagConstraints());

        jScrollPane1.setMinimumSize(new Dimension(280, 150));
        jScrollPane1.setPreferredSize(new Dimension(280, 275));

        jTable1.setModel(model
        );
        jScrollPane1.setViewportView(jTable1);

        gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.gridwidth = 3;
        getContentPane().add(jScrollPane1, gridBagConstraints);

        jButton2.setText("Remove");
        jButton2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });
        gridBagConstraints = new GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.insets = new Insets(5, 5, 5, 5);
        getContentPane().add(jButton2, gridBagConstraints);

        pack();
    }// </editor-fold>

    private void jButton1ActionPerformed(ActionEvent evt) {
        addToList(createToDoBean());
    }

    private void jButton2ActionPerformed(ActionEvent evt) {
        int rowIndex = jTable1.getSelectedRow();
        model.removeToDoBeanAt(rowIndex); 
        /*
         * the ToDoBean is removed from the list
         * the table is updated
         * the scheduledExecutorService is also updated ... why?
         */
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(ToDoFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(ToDoFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(ToDoFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(ToDoFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ToDoFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private JButton jButton1;
    private JButton jButton2;
    private JLabel jLabel1;
    private JLabel jLabel2;
    private JLabel jLabel3;
    private JScrollPane jScrollPane1;
    private JTable jTable1;
    private JTextField jTextField1;
    private JTextField jTextField2;
    private JTextField jTextField3;
    // End of variables declaration
} 
```

> 包demo.todolist；
> 
> 导入 java.util.ArrayList；导入 java.util.List；导入 javax.swing.table.AbstractTableModel；
> 
> 公共类 ToDoModel 扩展 AbstractTableModel {
> 
> ```
> protected List<ToDoBean> list = new ArrayList<ToDoBean>();
> private final static String[] columns = {"Name", "Description", "Remaining"};
> private final static Class[] columnsClass = {String.class, String.class, Long.class};
> public final static int[] columnWidths = {80, 150, 50}; // 280
> 
> public ToDoModel() {
> }
> 
> public ToDoModel(List<ToDoBean> list) {
>     super();
>     this.list = list;
> }
> 
> @Override
> public Class getColumnClass(int columnIndex) {
>     return columnsClass[columnIndex];
> }
> 
> @Override
> public int getRowCount() {
>     return list.size();
> }
> 
> @Override
> public int getColumnCount() {
>     return columns.length;
> }
> 
> @Override
> public String getColumnName(int col) {
>     return columns[col];
> }
> 
> @Override
> public boolean isCellEditable(int rowIndex, int columnIndex) {
>     return false;
> }
> 
> @Override
> public Object getValueAt(int rowIndex, int columnIndex) {
>     ToDoBean result = list.get(rowIndex);
>     switch (columnIndex) {
>         case 0:
>             return result.getName();
>         case 1:
>             return result.getDescription();
>         default:
>             return result.getDelay();
>     }
> }
> 
> @Override
> public void setValueAt(Object obj,int rowIndex, int columnIndex) {
>     ToDoBean result = list.get(rowIndex);
>     switch (columnIndex) {
>         case 0:
>             result.setName((String) obj);
>             break;
>         case 1:
>             result.setDescription((String) obj);
>             break;
>         default:
>             result.setDelay((Long) obj);
>     }
>     list.set(rowIndex, result);
>     this.fireTableCellUpdated(rowIndex, columnIndex);
> }
> 
> public void addToDoBean(ToDoBean w) {
>     list.add(w);
>     fireTableDataChanged();
> }
> 
> public void addToDoBeanList(List l) {
>     list.addAll(l);
>     fireTableDataChanged();
> }
> 
> public ToDoBean getToDoBeanAt(int row) {
>     return list.get(row);
> }
> 
> public ToDoBean removeToDoBeanAt(int row) {
>     ToDoBean pos = list.remove(row);
>     fireTableDataChanged();
>     return pos;
> }
> 
> public long decreaseBeanAt(int rowIndex) {
>     ToDoBean result = list.get(rowIndex);
>     long remaining = result.getDelay();
>     result.setDelay(--remaining);
>     this.fireTableCellUpdated(rowIndex, 2);
>     return remaining;
> } } 
> ```
> 
> 包demo.todolist；
> 
> 公共类 ToDoBean {
> 
> ```
> private String name;
> private String description;
> private long delay;
> 
> public ToDoBean(String name, String description, long delay) {
>     this.name = name;
>     this.description = description;
>     this.delay = delay;
> }
> 
> public ToDoBean() {
> }
> 
> public long getDelay() {
>     return delay;
> }
> 
> public void setDelay(long delay) {
>     this.delay = delay;
> }
> 
> public String getDescription() {
>     return description;
> }
> 
> public void setDescription(String description) {
>     this.description = description;
> }
> 
> public String getName() {
>     return name;
> }
> 
> public void setName(String name) {
>     this.name = name;
> }
> 
> public void decrease() {
>     delay--;
> } } 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-18T19:14:38.560

我偶然发现了你的问题，我有一个很好的解决方案。使用[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)。它将允许您安排任务并在不再需要它们时将其删除。

# c++ - 将数组传递给 C++ 中的函数？[彩票号码]

> ID：13425905
> 
> 赞同：1
> 
> 时间：2012-11-16T23:26:57.797
> 
> 标签：c++, arrays

我正在用 C++ 创建一个彩票游戏。我创建了一个名为 GetLottoPicks 的函数，它要求用户输入 7 个数字。我有另一个名为 GenWinNums 的函数，它生成 7 个随机数。

问题在于 GenWinNums 它不断生成 7 次：-858993460

我相信我输入了参数 int WinningNums[] bu 显然不是？

谢谢你。

```
int main()
{
string name;
int choice;
int user_picked[7];
int chosen_lotto[7];

cout << "LITTLETON CITY LOTTO MODEL:" << endl;
cout << "---------------------------" << endl;
cout << " 1) Play Lotto " << endl;
cout << " Q) Quit Program " << endl;
cout << " Please make a selection: ";
cin >> choice;

if (choice == 1)
{
    cout << "\n Please enter your name: ";
    cin >> name;

    getLottoPicks(user_picked);
    GenWinNums(chosen_lotto);

    for(int i = 0; i < 7; i++)
    {
        cout << chosen_lotto[i];    
    }

    for(int i = 0; i < 7; i++)
    {
        cout << user_picked[i];
    }
}

else if (choice == 'Q' || 'q')
{
    exit(0);
}

else 
{
    cout << "That is not a valid choice." << endl;
}

 system("PAUSE");
 return 0;
 }

 int getLottoPicks(int UserTicket[])
 {   
const int amount = 7;
UserTicket[amount];
int ticket = UserTicket[amount];

for (int i = 0; i < amount; i++)
{
    cout << "\n Please enter number " << i + 1 << ":";
    cin >> UserTicket[i];

    while (UserTicket[i] < 1 || UserTicket[i] > 40)

    {
        cout << "Your selection cannot be less than 1 and/or greater than 40\. Try Again." << endl;
        cin >> UserTicket[i];
    }

if(i > 0)
    {
        for(int check = 0; check < i; check++)
        {
            while(UserTicket[i] == UserTicket[check])
            {
                cout << "You cannot use the same lotto number twice. Try again: " << endl;
                cin >> UserTicket[i];
            }
        }
}

}

return ticket;
 }

 int GenWinNums(int WinningNums[])
 {
const int amount = 7;
int numbers[amount];
int ticket = WinningNums[amount];

for(int i = 0; i < amount; i++)
{
    numbers[i] = (rand() % 40) + 1;

    while(numbers[i] < 1 || numbers[i] > 40)
    {
        numbers[i] = (rand() % 10) + 1;
    }
    if(i > 0)
    {
        for(int check = 0; check < i; check++)
        {
            while(numbers[i] == numbers[check])
            {
                numbers[i] = (rand() % 10) + 1;
            }
        }
    }
}
return ticket;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T00:37:08.770

只是为了好玩，这里有相当多的修复。我不会一一列举。基本上：

*   通过引用传递固定大小的数组，以避免不安全的使用
*   严格检查输入错误，并在一个循环中完成
*   几个错误的数组赋值要么什么都不做，要么阻止调用者看到结果......
*   用于`char`输入类型（因此`Q`会被匹配）并且更喜欢 aa 切换而不是重复的 ifs
*   请参阅下面的更典型的 C++ 样式解决方案，包括检查 WIN 或 LOSE

读者练习：为您的**发电机****播种`rand()`**，或者赢得这张彩票非常简单（粘贴在上一张中奖彩票中:)）

演示运行的输出（也显示错误处理）：

```
LITTLETON CITY LOTTO MODEL:
---------------------------
 1) Play Lotto 
 Q) Quit Program 
Please make a selection: 1

 Please enter your name: me

 Please enter number 1:34

 Please enter number 2:7

 Please enter number 3:16

 Please enter number 4:18

 Please enter number 5:24

 Please enter number 6:24
Duplicate entry 24
 Please enter number 6:7
Duplicate entry 7
 Please enter number 6:37

 Please enter number 7:whoops
Bad input 'whoops' discarded
 Please enter number 7:what was the last number again?
Bad input 'what' discarded
 Please enter number 7:Bad input 'was' discarded
 Please enter number 7:Bad input 'the' discarded
 Please enter number 7:Bad input 'last' discarded
 Please enter number 7:Bad input 'number' discarded
 Please enter number 7:Bad input 'again?' discarded
 Please enter number 7:27
User ticket:    7; 16; 18; 24; 27; 34; 37; 
Winning ticket: 7; 16; 18; 24; 27; 34; 36; 
Result of draw: WINNER 
```

.

```
#include <string>
#include <iostream>

const size_t amount = 7;

void getLottoPicks(int (&ticket)[amount])
{
    for(int i = 0; i < amount; i++)
    {
        do
        {
            std::cout << "\n Please enter number " << i + 1 << ":";
            if(std::cin >> ticket[i])
            {
                if(ticket[i] >= 1 && ticket[i] <= 40)
                {
                    bool ok = true;
                    for(int check = 0; ok && check < i; check++)
                    {
                        ok &= (ticket[i] != ticket[check]);
                    }
                    if(ok)
                    {
                        break;
                    }
                    else
                    {
                        std::cout << "You cannot use the same lotto number twice. Try again." << std::endl;
                    }
                }
                else
                {
                    std::cout << "Your selection cannot be less than 1 and/or greater than 40\. Try Again." << std::endl;
                }
            }
            else
            {
                std::cin.clear();
                std::string discard;
                std::cin >> discard;
                std::cout << "Bad input '" << discard << "' discarded";
            }
        }
        while(true);
    }
}

void GenWinNums(int (&winningNumbers)[amount])
{
    for(int i = 0; i < amount; i++)
    {
        winningNumbers[i] = (rand() % 40) + 1;
        while(winningNumbers[i] < 1 || winningNumbers[i] > 40)
        {
            winningNumbers[i] = (rand() % 10) + 1;
        }
        if(i > 0)
        {
            for(int check = 0; check < i; check++)
            {
                while(winningNumbers[i] == winningNumbers[check])
                {
                    winningNumbers[i] = (rand() % 10) + 1;
                }
            }
        }
    }
}
int main()
{
    std::string name;
    char choice;
    std::cout << "LITTLETON CITY LOTTO MODEL:" << std::endl;
    std::cout << "---------------------------" << std::endl;
    std::cout << " 1) Play Lotto " << std::endl;
    std::cout << " Q) Quit Program " << std::endl;
    std::cout << " Please make a selection: ";
    std::cin >> choice;
    switch(choice)
    {
        case '1':
            {
                std::cout << "\n Please enter your name: ";
                std::cin >> name;

                int user_picked[amount];
                int chosen_lotto[amount];

                getLottoPicks(user_picked);
                GenWinNums(chosen_lotto);

                std::cout << "\n";
                for(int i = 0; i < amount; i++)
                {
                    std::cout << user_picked[i] << "; ";
                }
                std::cout << "\n";
                for(int i = 0; i < amount; i++)
                {
                    std::cout << chosen_lotto[i] << "; ";
                }
            }
        case 'Q':
        case 'q':
            return 0;
        default:
            std::cout << "\n That is not a valid choice." << std::endl;
    }
    std::cout << "\n Press enter...";
    std::cin >> choice;
} 
```

### 比较典型的C++方案

```
#include <string>
#include <iostream>
#include <algorithm>
#include <iterator>
#include <set>

const size_t amount = 7;

typedef std::set<int> ticket_t;

ticket_t getLottoPicks()
{
    ticket_t ticket;
    while (ticket.size() < amount)
    {
        std::cout << "\n Please enter number " << (ticket.size()+1) << ":";

        int entry;
        if(std::cin >> entry)
        {
            if(entry >= 1 && entry <= 40)
            {
                if (ticket.end() != ticket.find(entry))
                    std::cout << "Duplicate entry "  << entry;
                else
                    ticket.insert(entry);
            } else
                std::cout << "Entry out of range [1..40]: "  << entry;

            continue;
        }

        std::cin.clear();
        std::string discard;
        std::cin >> discard;
        std::cout << "Bad input '" << discard << "' discarded";
    }
    return ticket;
}

ticket_t genWinNums()
{
    ticket_t ticket;
    while (ticket.size() < amount)
        ticket.insert(rand() % 40 + 1);
    return ticket;
}

std::ostream& operator<<(std::ostream& os, ticket_t const& t)
{
    std::copy(t.begin(), t.end(), std::ostream_iterator<int>(os, "; "));
    return os;
}

int main()
{
    std::cout << "LITTLETON CITY LOTTO MODEL:" << std::endl;
    std::cout << "---------------------------" << std::endl;
    std::cout << " 1) Play Lotto "             << std::endl;
    std::cout << " Q) Quit Program "           << std::endl;
    std::cout << "Please make a selection: ";
    char choice;
    std::cin >> choice;

    switch(choice)
    {
        case '1':
            {
                std::cout << "\n Please enter your name: ";
                std::string name;
                std::cin  >> name;

                const ticket_t user    = getLottoPicks();
                const ticket_t winning = genWinNums();

                std::cout << "User ticket:    " << user    << "\n";
                std::cout << "Winning ticket: " << winning << "\n";

                // check win?
                bool ok = 0 == std::lexicographical_compare(
                        user.begin(), user.end(),
                        winning.begin(), winning.end());

                std::cout << "Result of draw: " << (ok? "WINNER":"No luck") << "\n";
            }
        case 'Q': case 'q':
            return 0;
        default:
            std::cout << "\n That is not a valid choice." << std::endl;
    }

    std::cin.ignore(1<<24,'\n');
    std::cout << "\n Press enter...";
    std::string dummy;
    std::getline(std::cin, dummy);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:30:18.937

看起来您从未`WinningNums`在例程中为数组分配任何值，这可能解释了为什么您总是得到相同的数字。

我建议删除`numbers`数组并直接使用`WinningNums`以生成随机数。

# tfs - 在 TFS 2012 的构建中运行代码指标

> ID：13425906
> 
> 赞同：5
> 
> 时间：2012-11-16T23:27:00.493
> 
> 标签：tfs, code-metrics

如何获取指标以在 TFS 2012 中运行我的构建？

我没有在 TFS 2012 中看到任何代码指标解决方案。微软的指标工具似乎只适用于 TFS 2010。我正在寻找的主要东西是微软工具用来返回的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:35:18.703

Visual Studio 2005、2008、2010 和 2012 的代码指标几乎相同。您可以从 Visual Studio 中的“分析”菜单访问它们，它们会为您提供代码视图，以帮助您确定可能要修复的特定问题。

这从来没有作为自动化构建的一部分提供，并且在那里真的没有意义，因为它们是解释性的而不是描述性的。仅仅因为你有很高的圈复杂度并不意味着你的代码很糟糕。

更多信息：http: [//msdn.microsoft.com/en-us/library/bb385911.aspx](http://msdn.microsoft.com/en-us/library/bb385911.aspx)

解释您要达到的目标可能对您有用，以便我可以更好地为您指出解决方案。

*   **你想达到什么价值？**

作为[社区 TFS 构建扩展](http://tfsbuildextensions.codeplex.com/)的一部分，似乎确实有一个[CodeMetric](http://tfsbuildextensions.codeplex.com/wikipage?title=How%20to%20integrate%20the%20codemetric%20build%20activity&referringTitle=Documentation)构建活动，但我不确定它是否符合您的要求。

# java - 终端中的“无与伦比的类型：java.lang.String 和 int”

> ID：13425915
> 
> 赞同：0
> 
> 时间：2012-11-16T23:27:52.137
> 
> 标签：java, terminal, while-loop

我在学校编写了一个简单的 Java 程序来猜测正确答案，当我把它带回家时，它遇到了错误。

起初我将 TerminalIO.KeyboardReader 更改为 java.util.Scanner，现在当我通过终端运行它时，它返回“Incomparable types: java.lang.String and int”。

有什么帮助吗？真的很迷茫。

代码：

```
import java.util.Scanner;

import java.util.Random;

public class guess { 

       public static void main(String [] args) {
           Scanner keyboard = new Scanner(System.in);
           Random generator = new Random();
           System.out.println("I am thinking of a number from 1 to 10.");
           System.out.println("You must guess what it is.");
           System.out.print("Enter a guess: ");
           int randomNumber = generator.nextInt(10) + 1;
           String x = keyboard.nextLine();
           int guessNum = 1;
           while (x != randomNumber) {
                  System.out.println("Guess again!");
                  x = keyboard.nextLine();
                  guessNum ++;
                }
                System.out.println("RIGHT!");
                System.out.println("You got it correct in " +guessNum + " guesses.");

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T23:30:44.127

您无法比较 int 和 String。

你可以这样做：

```
int someInt = 6;
String someString = "6";
String intAsString = Integer.toString(someInt);

if (someString.equals(intAsString)) {
    System.out.println("Yay");
} 
```

* * *

您可以像这样将字符串转换为数字：

```
int someInt = 6;
String someString = "6";
try {
    int stringAsInt = Integer.parseInt(someString);
    if (stringAsInt == someInt) {
        System.out.println("Yay");
    }
}
catch (NumberFormatException nfe) {
    System.out.println("String is not an integer");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:30:23.787

您正在将 String 与 int 进行比较（它们是不兼容的类型）

将您的 int 转换为字符串并进行比较

```
 while (!(x.equals(Integer.toString(randomNumber)))) { 
```

# sql-server - SQL Server：通过主键加入还是使用单独的查询？

> ID：13425926
> 
> 赞同：2
> 
> 时间：2012-11-16T23:29:56.363
> 
> 标签：sql-server, performance, inner-join

关于连接两个表与使用 2 个单独查询的二分法，我有一个简单的问题。

我希望找到一个现有的问题，但我的搜索并没有产生太多结果（大多数问题都是针对更复杂的问题）。

例如，考虑具有非常简单架构的两个表 A 和 X：

```
Table A   +-------------+-------------+-------------+
          | Column A (*)| Column X(FK)| Column C    |
          +-------------+-------------+-------------+

Table X   +-------------+-------------+-------------+
          | Column X (*)| Column Y    | Column Z    |
          +-------------+-------------+-------------+ 
```

其中 A 列和 X 列是标识列和主键 (bigint)。表 A 和表 X 之间还存在列 X 的现有外键关系。

我的问题是，假设两个表都足够大（仅说 500K 行），我是否会从使用单个查询（参见下面的 Linq2Sql 伪代码）或使用两个单独的查询中获得更多的性能？

选项1：

```
long aValue = 107;
DataContext dc = new DataContext();
var items = (from a in dc.TableA
             join x in dc.TableX
             on a.X equals x.X
             where a.A == aValue
             select new { a, x }); 
```

选项 2：

*   假设我编写了一个 SP 串行执行 2 个单独的选择语句。

为了进一步量化问题，您可以假设对于 A 的每个值，只有几 (0-5) 行将从表 Y 中连接，因此连接中返回的表 A 数据的重复并不重要。

我要求严格从数据库服务器影响的角度来看。因此，忽略任何客户端考虑因素（例如往返网络延迟、L2S 查询构建和数据编组成本等），我的问题是：

1.  哪个选项将花费更少的时间在数据库服务器上进行计算？

2.  哪个选项需要更少的内存来评估结果？

3.  如果有最佳实践，通常首选哪个选项？

对不起，如果这听起来太初级，但任何见解将不胜感激。

谢谢，-K。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:39:45.723

简短的回答：相信优化器。

针对索引良好的表的单个查询（尤其是使用简单连接）将比编写一组串行 SQL 语句更有效。我不是 LINQ 方面的专家，所以我不确定您将使用伪代码返回哪些列，但如果这些表在适当的硬件上正确索引，那么您会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:58:07.027

好吧，根据我在繁忙的数据库中的经验，运行两个没有连接的查询总是比一个有连接的查询要好。

这两种方法之间总会有一个区别：当您加入时，SQL**必须**以某种方式匹配行（当预测返回的行数较少时，可能使用嵌套循环）。当工作量或结果集很大时，它开始变得重要。

如果您不希望您的数据库成为瓶颈，并且此连接以某种方式简化了开发，那么请继续使用它。

* * *

为了在更大的表上为您提供任何数字，我尝试了两种针对我管理的数据库上的父表和子表的方法。它们分别有 150k 行和 3000k 行。SQL 打印这些统计信息：

加入查询

```
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 7 ms.
Table 'child'. Scan count 1, logical reads 324, physical reads 0, read-ahead reads 0.
Table 'parent'. Scan count 1, logical reads 3, physical reads 0, read-ahead reads 0.

SQL Server Execution Times:
   CPU time = 0 ms,  elapsed time = 70 ms. 
```

单独选择

```
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 0 ms.
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 0 ms.
Table 'parent'. Scan count 1, logical reads 3, physical reads 0, read-ahead reads 0.

SQL Server Execution Times:
   CPU time = 0 ms,  elapsed time = 0 ms.

(1 row(s) affected)
SQL Server parse and compile time: 
   CPU time = 0 ms, elapsed time = 0 ms.
Table 'child'. Scan count 1, logical reads 324, physical reads 0, read-ahead reads 0.

SQL Server Execution Times:
   CPU time = 0 ms,  elapsed time = 1 ms. 
```

（表有适当的索引；表名已更改）

# javascript - jQuery Easy UI 门户

> ID：13425927
> 
> 赞同：1
> 
> 时间：2012-11-16T23:29:58.337
> 
> 标签：javascript, jquery, jquery-easyui

我正在尝试从[jQuery EasyUI框架测试](http://www.jeasyui.com/)[Portal](http://www.jeasyui.com/extension/portal.php)扩展，但由于某种原因，我不断收到错误消息：. 有人知道为什么会这样吗？我错过了小提琴中的资源还是什么？`Uncaught TypeError: Object [object Object] has no method 'portal'`

这是小提琴的链接：http: [//jsfiddle.net/rW24a/1/](http://jsfiddle.net/rW24a/1/)

谢谢

# android - 带有意图过滤器的 Webview

> ID：13425931
> 
> 赞同：0
> 
> 时间：2012-11-16T23:30:42.817
> 
> 标签：android, android-webview

我正在尝试创建一个 webview，但是在我运行它时它没有显示出来。你能帮忙吗？

我遇到的错误：

```
11-16 16:30:23.043: E/AndroidRuntime(1709): FATAL EXCEPTION: main
11-16 16:30:23.043: E/AndroidRuntime(1709): java.lang.RuntimeException: Unable to      start activity ComponentInfo{com.example.intents/com.example.intents.MyBrowserActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class webView 
```

11-16 16:30:23.043: E/AndroidRuntime(1709): 在 Android.app.ActivityThread.performLaunchActivity(ActivityThread.Java:2059) 11-16 16:30:23.043: E/AndroidRuntime(1709): 在 Android。 app.ActivityThread.handleLaunchActivity(ActivityThread.Java:2084)

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.intents"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
 android:minSdkVersion="8"
 android:targetSdkVersion="15" />
 <uses-permission android:name="android.permission.CALL_PHONE"/>
 <uses-permission android:name="android.permission.INTERNET"/>

 <activity
  android:name=".MyBrowserActivity"
  android:label="@string/app_name" >

  <intent-filter>
  <action android:name="android.intent.action.VIEW" />
   <action android:name="com.example.MyBrowser" />

   <category android:name="android.intent.category.DEFAULT" />
   <data android:scheme="http"/>
   </intent-filter>
   </activity> 
```

主要活动：

```
Button But4 = (Button)findViewById(R.id.btn_launchMyBrowser);
 But4.setOnClickListener(new View.OnClickListener(){

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent i = new Intent("com.example.MyBrowser");
        i.setData(Uri.parse("http://www.amazon.com"));
        startActivity(i);

    }

 }); 
```

我的意图活动：

```
 Uri url = getIntent().getData();
    WebView webView = (WebView)findViewById(R.id.WebView01);
    webView.setWebViewClient(new Callback());
    webView.loadUrl(url.toString());
}
private class Callback extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url){
        return (false);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:00:12.227

> 膨胀类 webView 时出错

我的猜测是您输入`webView`了布局文件而不是`WebView`.

# wordpress - 如何在非 wp 页面中查找当前 wordpress 用户的名称

> ID：13425935
> 
> 赞同：2
> 
> 时间：2012-11-16T23:31:10.400
> 
> 标签：wordpress

我从 WP 链接到非 wp 页面。如何找到登录wp的人的用户名？这行不通。

```
 <?php 
    require_once("../members/wordpress/wp-load.php");

if(is_user_logged_in())
{
    echo '<br />User Logged in ok<br />';
    echo 'User ID is: '.$user_ID.'<br />';
    echo 'User login is: '.$current_user->user_login.'<br />';
}
else
    echo 'No user is logged in<br/>'; 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:36:15.217

尝试

```
wp_get_current_user(); 
```

文档指出它是 get_currentuserinfo() 的包装器。

所以，试试这个；

```
<?php
    $current_user = wp_get_current_user();
    if ( 0 == $current_user->ID ) {
        // Not logged in.
    } else {
        // Logged in.
    }
?> 
```

如果它不起作用，因为您在非 wp 页面上。尝试用 get_currentuserinfo() 替换 wp_get_current_user()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T10:57:21.920

您的非 wp 页面不在 WP 文件夹中，因此它无法访问 WP cookie。如果您希望 WP cookie 被位于您的 WP 文件夹之外的 php 脚本看到，需要定义`COOKIEPATH`指向您的 php 脚本和您的 wp 文件夹的公共父文件夹，或者只是将其指向根文件夹。将以下行放入您的 wp-config.php 中：

```
define('COOKIEPATH', '/'); 
```

PS：您的非 wp 页面也应该从与 WP 相同的域提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-28T18:51:41.760

这运作良好。

在 Wordpress 中，我保存了一个 cookie。然后在一个非 wordpress 页面中，在 DOCTYPE 行之前，我放置了以下代码：

```
<?php
    session_start();   
    $name =  $_SESSION['member_name'];
    if ($name == '') {
      header('Location: searchObits.php'); 
      exit;
    } else {  $_SESSION["ismember"] = "member";  }
?> 
```

# ruby-on-rails - rails, link_to: 是否可以在 :confirm 选项中包含链接？

> ID：13425937
> 
> 赞同：1
> 
> 时间：2012-11-16T23:31:28.950
> 
> 标签：ruby-on-rails, link-to, confirm

是否可以在传递给`link_to` `:confirm`问题选项的字符串中包含链接？

就像是：

```
str =  "Please press OK to approve license <http://www.url_to_license.com> before downloading the file"

link_to("Download file1", "http://www.urltofile1.com", :confirm => str") 
```

我尝试了很多东西，但无法在确认对话框中显示链接，只有文本。

如果这是一个微不足道的问题，我深表歉意，我是 Ruby & Rails 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:37:35.223

该`:confirm`选项使用您传入的字符串创建一个 JavaScript 警报。

不幸的是，我认为不可能在 JavaScript 警报中使用 HTML，所以我相信答案是否定的。

你应该看看一些 JQuery 插件来解决你的问题。

例如 - [Boxy](http://onehackoranother.com/projects/jquery/boxy/)

# math - 我如何确定这会产生多少组合？

> ID：13425939
> 
> 赞同：0
> 
> 时间：2012-11-16T23:31:38.363
> 
> 标签：math

我目前正在开发一个应用程序，在该应用程序中我采用不同大小的对象组，我需要确定这些项目可以进行的所有可能组合。由于辅助函数，我已经找到了执行此操作的代码。但这让我发疯，我不记得数学了。自从我不得不做任何数学运算以来已经很长时间了，而且我很难在网上找到这样的例子。所以希望这里有人可以伸出援助之手。

假设有人试图确定他们可以从衣橱里的衣服中生成多少套衣服。它不被认为是一套完整的服装，除非他们有每种服装中的一种。鉴于在壁橱中找到的以下物品。

可以生成多少种不同的组合。（假设它们都匹配。;-P）

```
Hats - 3
Ties - 5
Shirts - 8
Gloves - 3
Belt - 3
Pants - 5
Footwear - 2 
```

以较小的集合为例：

```
Hats - 1
Ties - 1
Shirts - 1
Gloves - 1
Belt - 1
Pants - black, blue
Footwear - black, brown 
```

所以我们最终得到了 4 套服装。

戴手套的帽子始终保持不变，那只是裤子和鞋类的组合。

```
1 outfit with black shoes and black pants
1 outfit with black shoes and blue pants
1 outfit with brown shoes and black pants
1 outfit with brown shoes and blue pants 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T23:35:05.763

如果他们必须有一个，那么这只是他们每个人的乘积，即 3 * 5 * 8 * 3 * 3 * 5 * 2 （即 10800）。

# eclipse - m2eclipse 问题 ArtifactTransferException - 但 pom.xml 编译/从命令行安装

> ID：13425941
> 
> 赞同：6
> 
> 时间：2012-11-16T23:31:41.727
> 
> 标签：eclipse, maven, m2eclipse

```
<project xmlns="http://maven.apache.org/POM/4.0.0"  
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">

     <modelVersion>4.0.0</modelVersion>

     <groupId>com.cloudst</groupId>
     <artifactId>cloudst</artifactId>
     <version>0.1.2</version>
     <packaging>jar</packaging>

     <name>cloudst</name>
     <url>http://maven.apache.org</url>

     <repositories>
         <repository>
             <id>com.springsource.repository.bundles.release</id>
             <url>http://repository.springsource.com/maven/bundles/release/</url>
         </repository>
         <repository>
             <id>EclipseLink</id>
             <url>http://download.eclipse.org/rt/eclipselink/maven.repo</url>
         </repository>
         <repository>
            <id>java.net2</id>
            <name>Repository hosting the jee6 artifacts</name>
            <url>http://download.java.net/maven/2</url>
        </repository>
    </repositories>

    <dependencies>
         <dependency>
          <groupId>org.kitchen-eel</groupId>
      <artifactId>json-schema-validator</artifactId>
      <version>${kitchen-eel.version}</version>
    </dependency>

    <build>
        <finalName>cloudst</finalName>
        <plugins>
            <plugin>
               <artifactId>maven-compiler-plugin</artifactId>
               <version>2.5.1</version>
               <configuration>
                   <source>1.6</source>
                   <target>1.6</target>
               </configuration>
           </plugin>
    </build>
</project> 
```

我能够使用标准的 mvn 命令从命令行成功清理、编译和安装这个项目......

但是，在 Eclipse Juno 的问题窗格中，我有以下 2 个错误：

1.  缺少工件 org.kitchen-eel:json-schema-validator:jar:1.2.1 pom.xml /com.cloudst 第 45 行 Maven 依赖问题

2.  ArtifactTransferException：传输 org.kitchen-eel:json-schema-validator:jar:1.2.1 失败

来自[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)的缓存在本地存储库中，直到中央的更新间隔过去或强制更新后才会重新尝试解析。原始错误：无法将工件 org.kitchen-eel:json-schema-validator:jar:1.2.1 从/到中央传输（http://repo.maven.apache.org/maven2）：

[传输http://repo.maven.apache.org/maven2/org/kitchen-eel/json-schema-validator/1.2.1/json-schema-validator-1.2.1.jar](http://repo.maven.apache.org/maven2/org/kitchen-eel/json-schema-validator/1.2.1/json-schema-validator-1.2.1.jar)失败。

为什么它在命令行中工作，但 m2eclipse 发布问题？

感谢您抽时间阅读...

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-10-28T10:32:11.440

这是解决 Eclipse 中 Maven 项目中可能出现的错误“ArtifactTransferException：无法传输工件”的非常简短的提示。

解决步骤：

```
 1\. Open folder by running this text (without Quotes) in Search Explorer of Window “%USERPROFILE%\.m2″.
 2\. After running above command, “m2″ folder of maven will open. Now search for file (without Quotes) “*.lastUpdated”.
 3\. In this step, delete all the files found by running Step 2.
 4\. Now go to Eclipse project and select “Maven | Update Dependency” or “Maven | Update Project”. 
```

快乐编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T05:57:06.737

如果所有*新*工件都出现这样的连接错误：m2eclipse 默认使用嵌入式 Maven 实例，而不是您的外部 Maven 安装。内部 Maven 实例可能不会使用与外部设置相同的 Maven 设置（例如 %USERPROFILE%/.m2/settings.xml），这可能会导致内部 Maven 实例无法通过您的代理进行连接。

您可以使用 Eclipse 首选项来添加您的外部 Maven 安装，并让它用于从 Eclipse 内部运行 Maven 命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-04T10:27:54.737

这是我的解决方案。

找到发生错误的 jar 库并从 .m2 存储库中删除。然后使用 m2eclipse 更新项目。这个对我有用。

# python - django - .objects.get() 何时评估？

> ID：13425942
> 
> 赞同：8
> 
> 时间：2012-11-16T23:31:50.337
> 
> 标签：python, django

假设我有：

```
class Library(models.Model):
    name = models.CharField(max_length = 100)

class Books(models.Model):
    library = models.ForeignKey(Library)
    book = models.CharField(max_length = 100) 
```

我想创建一个新的，我们知道我们可以只用id`Books`填充库，但我们也可以使用. 我的问题是，如果我们只提供 id 会更好吗？如果我想使用实例，那么我必须评估 using ，那么它会命中数据库吗？`Books``Library``Library``.get()`

附加问题：从文档来看，查询集是惰性的，它在评估之前不会访问数据库，那么查询集何时评估？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T23:39:10.610

是的，`.get()`立即评估。当然，使用 ID 可以避免数据库查询。

`get`不是懒惰的，因为它不返回 QuerySet - 它返回模型的单个实例。QuerySets 来自类似的东西`.filter()`，因此例如`Library.objects.filter(id=5)`被延迟评估而`Library.objects.get(id=5)`立即被评估。

QuerySet 的实际评估包含在[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/)中- 基本上，任何时候您实际从 QuerySet 中提取一个值，它都会被评估。完整列表如下：

*   迭代
*   切片
*   酸洗
*   `repr()`
*   `len()`
*   `list()`
*   `bool()`

# matlab - 大型稀疏数据集上的主成分分析 (PCA)

> ID：13425947
> 
> 赞同：11
> 
> 时间：2012-11-16T23:32:19.260
> 
> 标签：matlab, machine-learning, pca, sparse-matrix

我有大约 1000 个维度为 50000 的向量 x_i，但它们非常稀疏；每个只有大约 50-100 个非零元素。我想对这个数据集（在 MATLAB 中）进行 PCA 以减少数据不需要的极端维度。

不幸的是，由于需要从所有示例中减去均值，因此我不知道没有中间完整矩阵的任何方法。当然，1000x50000 矩阵太大而无法放入内存（当我尝试时，它实际上会因某种原因使我的整个计算机崩溃）。`princomp`当我尝试使用Matlab 的内置程序时，它也会使我的计算机崩溃。

所以我的问题是：有没有一种方法可以在不需要大量非稀疏矩阵作为中间步骤的情况下对这些数据进行 PCA？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T18:12:58.860

您不需要形成完整的数据矩阵来减去平均值，或者计算协方差矩阵。只需迭代计算 1000x1000 协方差矩阵（循环遍历数据向量）。形成协方差矩阵后，您可以通过使协方差矩阵**居中来***隐式*减去均值。请参阅本文末尾[关于内核 PCA](http://www.ics.uci.edu/~welling/classnotes/papers_class/Kernel-PCA.pdf)的部分，解释如何使内核矩阵居中。只需考虑内核矩阵与协方差矩阵基本相同。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T04:31:07.403

为了计算上述数据集的 PCA，该算法只需要对 1000x1000 的协方差矩阵进行运算。我猜这对于大多数 PCA 实现来说应该没什么大不了的。如果您使用的是 Windows 7 计算机，您可以尝试使用 PCA 的 64 位实现。我不确定 Matlab 是否支持 64 位 PCA，但像 VisuMap 这样的应用程序可以轻松处理这些情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-21T02:32:45.333

以下策略有效：

```
[~,~,PC] = svds(X,k);
mu = mean(X);
S = sparse(size(X,1),k);
for i=1:size(X,1)
    S(i,:) = (X(i,:)-mu)*PC;
end 
```

的右奇异向量`X`是 的特征向量`cov(X,1)`，因此是 的主成分`X`。通过逐个实例计算主成分分数而不是一次计算所有分数，您可以避免从稀疏过渡到完整时的内存溢出。一定要做好`k<<p`，你应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T23:44:54.477

你不需要使用`princomp`. [该答案](https://stackoverflow.com/a/4998145/71131)将解释您如何使用`eig`. 替换`eig`为[`eigs`](http://www.mathworks.com/help/matlab/ref/eigs.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T03:13:51.717

首先，您不需要协方差矩阵来减去均值。

然后要计算 PC，请参阅此[问题](https://scicomp.stackexchange.com/questions/2313/apply-pca-on-very-large-sparse-matrix)的答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T11:12:35.713

对于顶级 PC，请参阅[迭代 PCA](http://en.wikipedia.org/wiki/Principal_component_analysis#Iterative_computation)；这累积了 50k 的总和。50k稀疏，应该工作。
对于第二个，即时减去第一个，即使用 (X - U1 d1 Vt1) 而不实例化它。
（[随机 PCA](http://scikit-learn.org/stable/modules/generated/sklearn.decomposition.RandomizedPCA.html)在 Python scikit-learn 中做到这一点，Matlab 不知道。）**

# c++ - 传递动态模板参数

> ID：13425949
> 
> 赞同：0
> 
> 时间：2012-11-16T23:32:35.430
> 
> 标签：c++, templates

我正在试验模板，我写了这个简单的类方法：

```
void Decimal::toBinary(size_t bits) {
    // decimalNumber being a class private variable (long double)
    std::bitset< bits > result(decimalNumber);

    std::cout << result << std::endl;
} 
```

我正在尝试将`size_t bits`函数参数传递给 bitset 模板。

根据[C++ Bitset Reference](http://www.cplusplus.com/reference/stl/bitset/)，实现确实需要一个 size_t 参数：

```
template < size_t N > class bitset; 
```

但是，我越来越

```
src/decimal.cc:11: error: ‘bits’ cannot appear in a constant-expression
src/decimal.cc:11: error: template argument 1 is invalid
src/decimal.cc:11: error: invalid type in declaration before ‘(’ token 
```

我想我无法做到这一点......任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T23:41:56.920

模板是编译时功能，而不是运行时功能。如果您要支持的不同大小的数量有限，例如，因为您支持 8、16 和 32 位，您可以`switch`委托：

```
template <size_t bits>
void Decimal::toBinary() {
    std::bitset< bits > result(decimalNumber);
    std::cout << result << '\n';
}
void Decimal::toBinary(size_t bits) {
    switch (bits) {
    default: throw std::runtime_error("number of bits not supprted");
    case  8: this->toBinary< 8>(); break;
    case 16: this->toBinary<16>(); break;
    case 32: this->toBinary<32>(); break;
    }
} 
```

顺便说一句，[不要使用`std::endl`](http://kuhllib.com/2012/01/14/stop-excessive-use-of-stdendl/). 如果您真的要刷新流，请使用`std::flush`.

# mysql - Mysql查找，两个表之间的更新

> ID：13425951
> 
> 赞同：0
> 
> 时间：2012-11-16T23:32:54.280
> 
> 标签：mysql

难以获得正确的 mysql 查找然后更新这些记录。我对两个单独的表的概念有困难。本质上，我可以通过以下方式成功地在一个表中找到记录：

```
 SELECT email,id  
  FROM  `phplist_user_user` 
  WHERE  `email` LIKE  '%gmail%'
  LIMIT 0 , 30 
```

然后分别：

```
 SELECT userid, value FROM `phplist_user_user_attribute` 
```

现在我不知道如何将第一个查询中找到的所有记录的“phplist_user_user_attribute”中的值更新为“gmail.com”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T01:05:52.743

好吧显然看起来你不能`phplist_user_user_attribute`直接更新表。

您可以做的是使用嵌套查询.. 即类似 // 这只是一种方法...

```
Update phplist_user_user_attribute
SET your_value = 'foo'
where your_value IN (SELECT your_value  
                     FROM  `phplist_user_user` 
                     WHERE  `email` LIKE  '%gmail%'
                     LIMIT 0 , 30); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T00:49:24.093

```
UPDATE phplist_user_user u
JOIN phplist_user_user_attribute a ON u.id = a.userid
SET a.value = 'gmail.com'
WHERE u.email LIKE '%gmail%' 
```

# pinterest - Pinterest 固定它（固定/创建/按钮）返回“未知固定方法”

> ID：13425956
> 
> 赞同：2
> 
> 时间：2012-11-16T23:33:43.833
> 
> 标签：pinterest

我看到 Pinterest 按钮在尝试 pin 时返回这个：

{“状态”：“失败”，“消息”：“未知固定方法”}

似乎是 pin/create/button 方法的问题；其他使用 pin/create/bookmarklet 方法的 pin 按钮都可以。Pinterest 仍然在他们的 Pin It 按钮生成器和新业务页面的文档中使用 pin/create/button，所以我认为这是一种损坏的方法，而不是已被弃用的方法。

目前还有其他人看到这个吗？

杰里米

# javascript - 来自 ajax 和 Liquid 的动态 DOM 差异修改

> ID：13425960
> 
> 赞同：1
> 
> 时间：2012-11-16T23:34:01.493
> 
> 标签：javascript, ajax, dom, diff, liquid

我编写了一个可以在 HTML 中动态使用并由 JavaScript 解析的[Liquid实现。](http://liquidmarkup.org/)反过来，我使用 AJAX 来提供数据源。这看起来像这样：

```
<div id="container">
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Username</th>
      </tr>
    </thead>
    <tbody>
    {% for user in users %}
      <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.name }}</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div> 
```

其处理方式类似于：

```
$.ajax({
  url: "response.json",
  success: function(data) {
    var template = document.getElementById('container'),
        parse1 = Liquid.parse(template.innerHTML);

    template.innerHTML = parse.render(data);
  }
}); 
```

现在，假设`$.ajax`每隔一段时间就会调用一次，那么它的内容`#container`就会用任何可能发生变化的东西进行更新。这样做的问题是，**一切**都被重新加载，而不是仅仅改变了什么；您松散了文本选择，诸如“活动”标签等之类的东西。

为了解决这个问题，我一直在使用[google-diff-match-patch](http://code.google.com/p/google-diff-match-patch)在替换之前比较两个渲染的字符串，这反过来又为我提供了每个更改的位置，因此我可以遍历 HTML 并修改它们。

在完成所有这些工作后，我开始意识到对我的计划非常致命的事情：

```
template.innerHTML[###] = 'new content'; 
```

丝毫不起作用。显然，我无法根据其字符串索引修改元素的 innerHTML。

我究竟做错了什么？有没有更简单的方法来做到这一点？

无论您推荐什么，请记住我无法控制 DOM 元素。无论 Liquid 正在解析什么，都需要对其替换逻辑不可知（即，我不能使用 ID、类等）。

我能想到的唯一解决方案是：

*   不知何故，我想要做的事情超过了工作……那太好了。
*   创建一个 DOM diff-match-patch 并以这种方式处理事情（或者使用浏览器中存在的一个？）

# php - 想要连接其中一个是 URL 链接的字段列表

> ID：13425968
> 
> 赞同：0
> 
> 时间：2012-11-16T23:35:10.740
> 
> 标签：php

```
$list[] = '<li><a href="' . $row->tr_survey_link . '"> ' . $row->Survey_Subject . '</a></li>'; 
```

每次尝试时，我如何在 Href 之后添加一个字段，但列表中没有显示任何内容...

想在链接之前或之后添加 $row->Evaluator_Type.... 但它似乎不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:40:07.767

打印_r（$行）；并检查输出以查看您是否使用了正确的变量名。

尝试分配给 $list[0] 而不是 $list[]

更新：

```
 $list[] = '<li><a href="' . $row->tr_survey_link . '"> ' . $row->Survey_Subject . '</a> ' .  $row->Evaluator_Type . '</li>'; 
```

让我们知道以上是否不起作用。

# javascript - 使用javascript在表单文本字段旁边插入一个html链接

> ID：13425969
> 
> 赞同：0
> 
> 时间：2012-11-16T23:35:28.790
> 
> 标签：javascript, jquery, forms

我有一个包含名字和姓氏的表格..

它们可以通过单击“添加更多”链接来克隆/复制。

这是代码..

```
<form>
    <p class="clone">
    First name: <input type="text" name="fname[]" value=""><br>
Last name: <input type="text" name="lname[]" value=""><br>
    </p>
   </form>
<a href="#" class="add" rel=".clone">Add More</a> 
```

这里是 jsfiddle 演示[http://jsfiddle.net/d6mYr/](http://jsfiddle.net/d6mYr/)
​</p>

现在我想在**姓氏**文本表单字段旁边插入此链接。

```
<a href="#">Example</a> 
```

目前我的表单在表单字段中没有类属性。它只有名称属性。

那么任何人都可以帮助我使用 jquery 自动添加该链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:53:02.643

不使用那个 relCopy 插件

```
$(function() {
    var exampleLink = $('<a href="#">Example</a>')
    exampleLink.insertAfter('input[name="lname\[\]"]')

    $('a.add').click(function() {
        var removeLink = $('<a href="#" />').text('Remove').click(function() {
            $(this).parent().slideUp(function() {
                $(this).remove();
            })
        });

        var new_row = $('.clone:first').clone();
        new_row.append(removeLink)
        new_row.appendTo($(this).prev());
    });
});​ 
```

[http://jsfiddle.net/d6mYr/3/](http://jsfiddle.net/d6mYr/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:51:58.737

看起来您已经在添加链接，但它位于“名字”下方。`BR`输入姓氏后尝试删除标签：

```
<form>
    <p class="clone">
    First name: <input type="text" name="fname[]" value=""><br>
    Last name: <input type="text" name="lname[]" value="">
    </p>
</form>
<a href="#" class="add" rel=".clone">Add More</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T00:00:03.577

您可以在`relCopy`函数调用之前添加以下内容：

```
 var exampleLink = '<a href="#">Example</a>';
  $('input[name="lname[]"]').last().after(exampleLink); 
```

# php - 删除未附加到 php 中相关文本的字符串块

> ID：13425970
> 
> 赞同：1
> 
> 时间：2012-11-16T23:35:31.087
> 
> 标签：php, regex, preg-replace

任何未附加到 a-zA-Z0-9 的字符集都需要删除。例子：

*   这很棒！*（在这儿无事可做）*
*   是的，这样也行！？*（在这儿无事可做）*
*   这是 ！！！不是很好。！！！！！！**-->**这个，不太好。*（检测到的块）*
*   太浪费时间了……对吧？**-->**太浪费时间了吧？*（检测到的块）*
*   ....{{..... 块在开始**-->**块在开始*（检测到块）*
*   块在末尾 [[]] **-->**块在末尾*（检测到块）*
*   你好朋友.....？你好吗 [}}}}}} **-->**你好朋友.....？你好吗 *（检测到块）*

块被认为是任何独立的字符或字符串，它们是：

*   不同于a-zA-Z0-9
*   在任何位置（开始，中间，结束）
*   不以任何方式接触任何字母数字字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:04:17.567

你可以使用[lookarounds](http://www.regular-expressions.info/lookaround.html)。我们可以简单地匹配尽可能多的非单词、非空格字符，然后断言块旁边没有非空格字符：

```
$output = preg_replace('/(?<!\S)[^a-z\d\s]+(?!\S)/i', '', $input); 
```

请注意，这可能会留下多个空白字符（块的左侧和右侧的字符）。如果您不希望这样，运行第二个替换步骤可能是最简单的：

```
$output = preg_replace('/\s+/', ' ', trim($output)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T23:38:22.480

**匹配 1 个或多个不涉及*有效字符的非字母数字字符*的*正则表达式。*

 *```
/(^| )[^a-zA-Z0-9]+( |$)/ 
```

PHP 用法：

```
preg_replace('/(^| )[^a-zA-Z0-9]+( |$)/', '$1$2', $item); 
```

**注意：**在针对输入运行时，您会注意到一些额外的空格。从技术上讲，这些空格正在*触及*有效字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T01:30:36.920

在这里，试试这个：

```
'/(?:(?<=\s)|^)[^a-z0-9]+(?:(?=\s)|$)/i' 
```

[http://codepad.org/2JZLHdhL](http://codepad.org/2JZLHdhL)

基本思想是：使用向后看来断言我们后面有空格，或者在字符串的开头。然后捕获非字母数字字符，并使用前瞻来强制它后面是空格或字符串的结尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T00:04:00.033

这就是你需要的

```
[^a-zA-Z0-9\d\s:]+[^a-zA-Z0-9\d\s:] 
```

这只会拾取任何未附加到字母数字字符的非字母数字字符*

# javascript - Javascript 仅投票一次 Cookie

> ID：13425971
> 
> 赞同：0
> 
> 时间：2012-11-16T23:35:38.640
> 
> 标签：javascript, cookies, mobile-safari, dreamweaver, vote

我正在开发一个投票网站，我只希望选民投票一次。这是一个 3 阶段的过程。第一页是选择您要投票的人，第二页是确认该人（隐藏的单选按钮提交投票），第三页是感谢页面。我想检查第一页和第二页上的 cookie 并在第三页上写入 cookie。我希望 cookie 在第一次导航到该站点后的两天内过期。我想将已经投票的人重定向到 cookie.htm（与其他所有内容在同一个文件夹中）你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:25:29.730

要使用 Javascript 设置 cookie，请将`document.cookie`对象设置为格式为 的字符串值`[cookiename]=[cookievalue];expires=[expirydate]`。在这种情况下，您似乎只需要设置一个 cookie，任何 cookie，所以可能只是“done=true”或其他什么。

```
// get today's date plus 2 days
var expiration = new Date();
expiration.setDate(expiration.getDate() + 2);

// add cookie "done=true" with expiration
document.cookie="done=true;expires=" + expiration.toUTCString(); 
```

要检查是否已设置 cookie，请`document.cookie`再次使用，它将返回以分号分隔的所有 cookie 列表。过滤它以找到您的：

```
var myCookie = document.cookie.split(';').filter(function(item) { 
    return item.split('=')[0] == 'done'; 
}); 
```

如果设置了 cookie，那么您可以进行简单的重定向：

```
if (myCookie.length > 0) {
    window.location = "cookie.htm";
} 
```

[有关cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)的更多信息，请参阅 MDN 。

* * *

[**强制性免责声明**：显然——正如其他人所指出的——使用这种方法，如果用户愿意，他们将能够作弊，因为任何人都可以清除他们的 cookie 并绕过检查。即使您认为没有人会打扰，明智的做法是在服务器上添加“健全性检查”，并阻止任何投票超过 X 次的 IP 地址。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:44:44.523

我认为它基于来自已知站点的电子邮件地址之类的东西，并要求有人确认该电子邮件地址可能是您最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T23:44:56.903

我认为你最好的选择是有一个注册过程并强制用户登录投票。正如评论中提到的，你需要一些服务器端的魔法。

# c++ - 如何将模板指针传递给内部类？

> ID：13425976
> 
> 赞同：0
> 
> 时间：2012-11-16T23:36:08.077
> 
> 标签：c++, templates

长话短说，我有这样的事情：

```
template < int TSize >
class Table
{
public:
    void someInterface();

private:

    int array[TSize];
};

template < int TSize >
class SomeBigWrap
{
    SomeBigWrap() : table(), stuff(&table) {}
    Table<Tsize> table;

    OtherStuff_1 stuff;
};

class OtherStuff_1
{

    OtherStuff_1( Table * p) : pTable(p) {}
    const Table * pTable;

    void someFnc()
    {
        pTable->someInterface();
    }
}; 
```

OtherSuff_1 类需要一个指向表的指针并访问它的接口。但我不能只做一个指向模板类的指针。

我想知道，有没有办法在 SomeBigWrap 的当前实例中将一种表“传递”给 OtherStuff，而不使 OtherStuff 成为模板或使用虚拟函数？

我不能从一个 ITable 继承所有表，因为它的接口必须与数组交互（并且我试图避免使用虚拟函数）。

还有其他方法吗？也许某种形式的鸭子打字？还是我应该完全重新思考我的设计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:46:33.213

恐怕您无能为力，您可能应该重新设计或只使用模板或虚拟。无论如何，这里有一些细微的修改：

您可能会考虑根本不存储指针，而是将其作为每个函数的参数传递：

```
class OtherStuff_1
{

    template<int TSize>
    void someFnc(const Table<TSize> * pTable)
    {
        pTable->someInterface();
    }
}; 
```

嵌套类可以工作：

```
template < int TSize >
class SomeBigWrap
{
    class OtherStuff_1
    {

        OtherStuff_1( Table * p) : pTable(p) {}
        const Table<TSize> * pTable;

        void someFnc()
        {
            pTable->someInterface();
        }
    };  
    SomeBigWrap() : table(), stuff(&table) {}
    Table<Tsize> table;

    OtherStuff_1 stuff;
}; 
```

您也可以使用`void*`不推荐的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:46:45.113

当您想使用模板时，您需要指定模板参数：

```
OtherStuff_1( Table<SomeSize> * p) : pTable(p) {}
const Table<SomeSize> * pTable; 
```

你可能想这样定义它

```
template <int TSize>
class OtherStuff_1
{
    OtherStuff_1( Table<TSize> * p) : pTable(p) {}
    const Table<TSize> * pTable;

    void someFnc()
    {
        pTable->someInterface();
    }
}; 
```

...并将其`SomeBigWrap`用作

```
OtherStuff_1<TSize> stuff; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T23:47:28.677

如果您要创建 Table 的非模板基类并将该基类赋予 an`int *`和 a`size_t`那么模板的构造函数可以将基指针分配给数组并将数组的大小分配给 size 变量。`Table<TSize>`然后，您可以分发指向似乎是某种动态数组的基类的指针。

事实上，我会让基类尽可能地镜像一个向量。

示例代码：

```
#include <iostream>

class TableBase {
public:
    typedef int value_type;
    typedef value_type* pointer;
    typedef value_type& reference;
    typedef pointer iterator;
    typedef const pointer const_iterator;
    typedef size_t size_type;

    TableBase(pointer table, size_type size) : m_array(table), m_size(size)
    {}
    iterator begin() const
    {
        return m_array;
    }
    iterator end() const
    {
        return m_array + m_size;
    }
    size_t size() const
    {
        return m_size;
    }
private:
    pointer   m_array;
    size_type m_size;
};

template<size_t TSize>
class Table: public TableBase
{
public:
    Table() : TableBase(array, TSize)
    {
        for(size_t i=0; i<TSize; ++i)
            array[i] = i;
    }

private:
    int array[TSize];
};

int main()
{
    Table<16> t;

    TableBase *tp = &t;

    for( TableBase::iterator i = tp->begin(); i != tp->end(); ++i ) {
        std::cout << *i << ',';
    }
    std::cout << std::endl;
    return 0;
} 
```

# bash - 用 Bash 安排 Cron

> ID：13425977
> 
> 赞同：2
> 
> 时间：2012-11-16T23:36:09.570
> 
> 标签：bash, shell, cron

这是我要运行的命令：

```
00 03 * * * backup.sh 
```

我知道这将在每天凌晨 3 点运行脚本 backup.sh。如何使用 bash 脚本在我的 linux 服务器上添加这个 cron 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T00:22:39.417

> 如何使用 bash 脚本在我的 linux 服务器上添加这个 cron 命令？

如果你想以*root*身份运行它，你可以在`/etc/cron.d`named中放置一个`backup`包含以下内容的文件：

```
00 03 * * * root backup.sh 
```

这假设`backup.sh`在标准`PATH`中，您可能希望在此处使用完全限定的路径，而不是依赖于`PATH`：

```
00 03 * * * root /path/to/bin/backup.sh 
```

在许多发行版中，您还可以（可能通过符号链接）将`backup.sh`脚本放入类似的东西中`/etc/cron.daily`，它会每晚运行。这通常比编写自己的 crontab 条目更简单、更易于维护。

如果你想以*用户*身份运行它，你可以运行...

```
crontab -e 
```

...编辑您自己的 crontab 文件并在其中添加条目：

```
00 03 * * * /path/to/bin/backup.sh 
```

请注意，我们不需要指定用户名（这仅在 、 和其他全局系统位置中是必需`/etc/cron.d`的`/etc/crontab`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T01:52:23.443

作为根：

`echo "00 03 * * * root backup.sh" >>/etc/crontab`

或者

`echo "00 03 * * * root backup.sh" >/etc/cron.d/mybackupjob`

作为您自己的用户：

`crontab -l >tmp; echo "00 03 * * * backup.sh" >>tmp; crontab tmp; rm tmp`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T00:15:11.293

你知道 /etc/cron.d 目录，对吧？如果没有，请输入“man cron”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T00:45:47.967

`crontab -e`将尝试调用您的`EDITOR`，因此您的第一个脚本可以将其设置为第二个脚本，该脚本只需将有问题的行附加到 crontab：

```
#!/bin/sh
EDITOR=/path/to/second/script crontab -e 
```

第二个脚本：

```
#!/bin/sh
echo "00 03 * * * /path/to/bin/backup.sh" >> $1 
```

# css - 表格布局和 CSS

> ID：13425982
> 
> 赞同：0
> 
> 时间：2012-11-16T23:36:32.720
> 
> 标签：css, html-table

我无法弄清楚我的 .css 出了什么问题，因为我`<table>`的 .css 没有居中并保持在左侧。
我尝试了`margin-left`并`margin-right`设置为`auto`没有成功。
我是否缺少`<div>`表的标签，我设置了一个`id="content"`以尝试将其居中但不起作用。

HTML：

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Assignment 5: Retouching Images</title>
<meta name="description" content="retouching images, photoshop">
<meta name="keywords" content="images, modify, photoshop">
<link href="css/rtouch.css" rel="stylesheet">
</head>

<body>
<div id="wrapper">
    <div id="header"> <img src="images/logoheader.jpg" alt="Armchair Bookstore Logo" width="975" height="230" class="floatcenter"> </div>
    <!-- header  section ends --> 

    <!-- menu  section starts -->
    <div id="menu">
        <ul>
            <li><a href="index.html" id="current" class="first">Home</a></li>
            <li><a href="newrelease.html">New Releases</a></li>
            <li><a href="placeholder.html">Special Selection</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="placeholder.html">On Sale</a></li>
        </ul>
    </div>
    <!-- menu  section ends -->
    <div id="content">
        <table class="center">
            <caption>
            Image Modification
            </caption>
            <tbody>
                <tr>
                    <th>Original Image</th>
                    <th>Retouched Image</th>
                    <th>Specifications</th>
                    <th>Comments</th>
                </tr>
                <tr>
                    <td ><img src="images/wedding_org_thumb.jpg" alt="Original Wedding Photo Thumbnail" width="100" height="80" class="floatcenter"></td>
                    <td ><img src="images/wedding_rt_thumb.jpg" alt="Retouched Wedding Photo Thumbnail" width="100" height="80" class="floatcenter"></td>
                    <td>350 x 280 at 72 DPI</td>
                    <td>Blablablablabla</td>
                </tr>
                <tr>
                    <td ><img src="images/redeye_org_thumb.jpg" alt="Original Redeye Baby Photo Thumbnail" width="100" height="131" class="floatcenter"></td>
                    <td ><img src="images/redeye_rt_thumb.jpg" alt="Retouched Redeye Baby Photo Thumbnail" width="100" height="115" class="floatcenter"></td>
                    <td>350 x 280 at 72 DPI</td>
                    <td>Blablablablabla</td>
                </tr>
                <tr>
                    <td ><img src="images/balloons_org_thumb.jpg" alt="Original Balloon Photo Thumbnail" width="100" height="66" class="floatcenter"></td>
                    <td ><img src="images/balloons_rt_thumb.jpg" alt="Retouched Balloon Photo Thumbnail" width="100" height="83" class="floatcenter"></td>
                    <td>350 x 280 at 72 DPI</td>
                    <td>Blablablablabla</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div id="footer"> <br>
    Copyright &copy; 2012 JC Design. All Rights Reserved | 1.800.604.6305 </div>
</body>
</html> 
```

这是.CSS

```
/*Body*/
html {background-color: #e2e2e2}

body 
{ 
   color: #000; background: #fff;
   font-family: "Helvetica Neue",helvetica,arial, sans; 
   font-size: 90%;
   text-align: left;
   width: 975px;
   margin-left: auto;
   margin-right: auto;
}

fieldset
{
   margin: 25px;
   border-radius: 15px;
}

p {
   margin-left: 25px;
   margin-right: 30px;
   text-align: left;
}

/*General link formatting*/

a:link 
{ 
   color: #f60; background: #fff; 
} 
a:visited 
{ 
   color: #f60;
} 
a:hover 
{ 
   color: #00aed7;  
   text-decoration: none; 
} 
a:active 
{ 
   color: #000; 
}

/*Page wrapper*/
#wrapper 
{ 
   margin: 0 auto; 
   width: 975px; 
   text-align: left;
}

/*Banner styles*/
#header {

   width: 975px;
   padding-left: 0px;
   padding-bottom: 10px;
   padding-top: 0px;
}

#footer
{  background-color: #04346c; color: #fff;
   font-family: "Helvectica Neue,",helvetica, arial, sans;
   font-size: 80%;
   font-weight: normal;
   text-align: center;
   width: 955px;
   padding-left: 20px;
   padding-bottom: 10px;
   padding-top: 5px;
}
 /*---------------Navigation  styles-------------------*/

#menu {
  float: left; 
  margin:0;
  padding-top: 0px;
  width: 100%;
  background: #04346c; color: #fff;
}  

#menu ul {
  margin: 0px;
  position: relative 
}

#menu ul li {
  display: inline; 
}

#menu ul li a {
  float: left;
  padding: 5px 16px;
  margin-right: 0px;
  background: #437DD4; color: #fff;
  text-decoration: none;
  border-right: 1px solid #e2e2e2;
}

#menu ul li a:hover {
  color: #fff; background: #0f4da8;
  text-decoration: underline;

}

#menu li a#current {
  background: #6a94d4; color: #fff;
}

/*Navbar styles*/
#navcontainer 
{ 
   width: 975px; 
   background: #04346c; color: #fff; 
   padding: 5px 0;
   font-weight: bold;
} 
#navcontainer p 
{ 
   margin: 0; 
   padding: 6px; 
   text-align: center; 
} 
#navcontainer p a 
{ 
   padding: 4px 10px; 
   color: #fff; background: #04346c;
   font-size: 120%;
}     
#navcontainer p a:hover 
{ 
   background: #4284d3; 
   text-decoration: none; 
}

#navcontainer p a#current 
{ 
   text-decoration: none; 
   padding: 4px 10px; 
   border: none; 
}   
/*Content styles*/

.floatright 
{ 
   float: right; 
   margin: 20px;
   padding: 1px; 
   border: none;  
}
.floatright2 
{ 
   float: right; 
   margin: 20px;
   padding: 1px; 
   border: none;
}

/*Headings*/

legend
{
   font-weight: bold;
   font-size: 120%;
   color: #224080;
   margin-left: 20px;
}
h1
{
   margin-left: 20px;
   padding: 2px;

}

h2
{
   margin-left: 25px;
   font-size: 110%;
}
/*Table styles*/

#table 
{ 
margin-left: 45px;
margin-right: 45px;

   border-collapse: collapse;

}
#table.center 
{ 
   position: relative;
   margin: auto; 
   border-collapse: collapse;

}

td, th 
{ 
   border-style: none; 
   border-width: thin; 
   border-color: #000; 
   padding: 15px; 
   border-collapse: collapse;

}
caption
{
   width: auto;
   font-size: 1.2em;
   padding: 10px;
   font-weight: bold;
   color: #f60;
   margin-left: 20px;
}
#content {
   margin-left: auto;
   margin-right: auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:48:05.433

在你的代码中你有这个

```
#table.center 
{ 
  position: relative;
  margin: auto; 
  border-collapse: collapse;
} 
```

你需要把它改成这个

```
.center 
{ 
   position: relative;
   margin: auto; 
   border-collapse: collapse;
} 
```

这是因为 # 指的是一个 ID。在您的 HTML 代码中，您没有 id 表。

按照 Piotr Lewandowski 的建议，最好从 html 代码和 css 中删除不必要的 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:48:47.407

将 id 添加到您的表格元素：

```
<table class="center" id="table"> 
```

`#table`选择器无法选择元素

# java - Java 逻辑“与”与“或”短路一致性

> ID：13425984
> 
> 赞同：4
> 
> 时间：2012-11-16T23:37:00.243
> 
> 标签：java, evaluation, logical-operators

> **可能的重复：**
> [& 和 && 的差异](https://stackoverflow.com/questions/5564410/difference-in-and)

我已经阅读了几个关于 java 中短路操作的教程和答案，但我仍然不太了解 java 如何处理双垂直管道与双 & 符号的短路的区别。例如 ...

> **为什么逻辑与短路评估失败？**

引用 JSL 15.23。条件与运算符 &&

> `The conditional-and operator && is like & (§15.22.2), but evaluates its right-hand operand only if the value of its left-hand operand is true.`

```
public static void main( String... args ) {

    int a = 1;

    int b = 2;

    // Okay. Prints
    if( a == 1 | b == 3 ) {

        System.out.println( "Comparison via |" + "\na is " + a + "\nb is " + b );

    }

    // Okay. Prints
    if( a == 1 || b == 3 ) {

        System.out.println( "Comparison via ||" + "\na is " + a + "\nb is " + b );

    }

    // Okay. Does not print
    if( a == 1 & b == 3 ) {

        System.out.println( "Comparison via &" + "\na is " + a + "\nb is " + b );

    }

    // I don't understand. Shouldn't the Short Circuit succeed since the left side of the equation equals 1?
    if( a == 1 && b == 3 ) {

        System.out.println( "Comparison via &&" + "\na is " + a + "\nb is " + b );

    }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T23:40:04.030

> 我不明白。由于等式左边等于 1，短路不应该成功吗？

不，绝对不是。的要点`&&`是，结果只有`true`当左操作数*和*右操作数是`true`; 短路意味着如果左操作数是 ，则不对右操作数进行评估`false`，因为此时答案是已知的。

您应该阅读JLS 的第[15.23](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.23)和[15.24节以了解更多详细信息：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.24)

> 条件与运算符 && 类似于 &（第 15.22.2 节），但仅当其左侧操作数的值为真时才计算其右侧操作数。
> 
> 条件或运算符 || 运算符就像 | （§15.22.2），但仅当其左侧操作数的值为假时才评估其右侧操作数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T23:40:59.807

与`boolean`s 一起使用时，位运算符 ( `|`and `&`)与逻辑运算符 ( and )*类似*，除了：`||``&&`

*   在 的情况下`&&`，如果第一个参数是`false`第二个，则不计算第二个参数，因为*整个*表达式必须是`false`。对于`&`，无论如何都会评估两个参数。

*   在 的情况下`||`，如果第一个参数是`true`第二个，则不计算第二个参数，因为*整个*表达式必须是`true`。对于`|`，无论如何都会评估两个参数。

这就是我们所说的“短路”：不计算第二个参数的过程，因为在某些情况下，我们可以仅从第一个参数的值知道*整个*表达式的值。

* * *

现在你问为什么下面的表达式是`false`: **`a == 1 && b == 3`**。好吧，短路与它无关。`a = 1`并且`b = 2`，所以声明显然是，因为不是。`"a is 1 ***and*** b is 2``false``b``2`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T23:39:36.847

如果在评估第一个操作数后确定结果，则逻辑运算符`||`和`&&`短路。对于`||`这种情况，如果第一个操作数的计算结果为`true`，对于`&&`，如果计算结果为`false`。

如果是的第一个操作数`||`，`false`它仍然可以产生`true`如果第二个操作数是的整体结果`true`。类似地，如果第一个操作数`&&`是`true`，它仍然可以评估为`false`如果第二个操作数是`false`。

在 Java 中，运算符`|`和`&`不仅是位运算符（当应用于整数参数时），而且是非短路逻辑运算符，它计算两个操作数而不管第一个值是什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T23:40:03.147

& 和 && 都要求双方都为真，因此代码的行为符合预期。

唯一的区别是 & 执行两边，但 && 如果它是假的，则只执行第一个，因为右侧与最终结果无关。

这样做的效果对于像这样的代码很重要

```
if (obj == null || obj.isSomthing()) 
```

如果您使用 | 会抛出 NPE 并且 obj 为空。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T23:39:49.280

```
if( a == 1 && b == 3 ) {
   System.out.println( "Comparison via &&" + "\na is " + a + "\nb is " + b );
} 
```

首先它检查，如果`a == 1`这是真的，所以它必须继续检查如果`b == 3`，这是不正确的，所以`true && false`是`false`，你没有得到输出。

如果你有

```
if( b == 3 && a == 1 ) {
       System.out.println( "Comparison via &&" + "\na is " + a + "\nb is " + b );
} 
```

它会首先检查是否`b == 3`并且因为不是这种情况，所以甚至不用费心去看，`a == 1`因为`false && whatever`总是`false`，不管是什么`whatever`。

这是否回答你的问题？

# list - 递归地反转单链表

> ID：13425986
> 
> 赞同：0
> 
> 时间：2012-11-16T23:37:11.203
> 
> 标签：list, recursion, linked-list

因此，作为计算机编程课程的一部分，我根据此算法反转了一个单链节点列表

> “依次遍历链表，取出每个节点，作为新的第一个节点插入。”

我能够迭代地做到这一点，但现在我的教授希望我们递归地做到这一点。我正在尽我所能理解递归，但它不是很好。

因此，我将我的编码从迭代更改为我认为是递归的

```
private void recursiveReverse2(Node p)
{
    Node lead = p;
    Node tail = p;

    if (p == null)
    {
        return;
    }

    if (p.next == null)
    {
        return;
    }

    current = tail.next;
    lead = current.next;
    current.next = null;
    tail.next = lead;
    current.next = head;
    head = current;
    recursiveReverse2(tail);
}

public void reverse2()
{
    toggle();   //swithces sort of list from ascending-descending
    recursiveReverse2(head); //head initialized at start of class
} 
```

基本上，我想问我所做的是否实际上*是*递归。因为，recursiveReverse2()*确实*有效，但我只是不知道我是否实现了递归。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T05:59:20.130

在编写递归时，通常最好考虑结束情况，然后最后编写递归情况。关于递归的另一件事是返回结果非常有用。

是的，您的解决方案在技术上是递归的，但我认为代码不起作用。在这一行`current.next = head`，没有定义 head ，除非此代码在您未显示的某个类中。更糟糕的是，它可能会无限循环，因为在函数的开头，`tail = p`最后你的递归是用 调用的`tail`，因此是一个无限循环。充其量这将反转长度为 3 的列表，但不会反转任何长度的列表。

在 Java 中，递归函数通常需要一个“帮助”函数来启动它。首先，假设以下节点类：

```
public class Node{
    public object data;
    public Node next;
} 
```

鉴于问题陈述，我假设我们不允许使用数据指针，只能使用下一个指针。此代码将是 Node 以外的其他类。

```
public Node recursiveReverse(Node p)
{
    return helperReverse(p, null);
} 

private Node helperReverse(Node p, Node previous)
{
    if (p == null)
    {
        return p;
    }
    else if (p.next == null)
    {
        p.next == previous;
        return p;
    }
    else
    {
        Node next = p.next;
        p.next = previous;
        return helperReverse(next, p);
    }
} 
```

如果将它合并到 Node 类中，它会变得更好。

```
public class Node{
    public object data;
    public Node next;

    public Node reverse() {
        return reverse1(null);
    } 

    private Node reverse1(Node previous) {
        if (next == null) {
            next == previous;
            return this;
        }
        else {
            Node other = next;
            next = previous;
            return reverse1(other, this);
        } 
    }

} 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T06:38:30.523

C++ 中的递归代码假设您有一个具有下一个指针的节点类....两个函数首先调用递归函数，第二个递归函数来反转单链表

```
 void callReverse()
 {
  node *tempPointer=head;
  head=NULL;
  reverse(tempPointer);
 } 
```

第二个函数是递归函数

```
 void reverse(node * pointer)
 {

  if(pointer->next==NULL)   //this case works only when linked list has a single node
  {
    if(head==NULL)
     head=pointer; 
  }

  else if(pointer->next->next!=NULL)
  {
    reverse(pointer->next)  //recursive call
  }

  if(head==NULL)
   head=pointer->next;

  pointer->next->next=pointer;

  pointer->next=NULL;

 } 
```

请给我你的建议...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T20:36:20.403

这个怎么样：

```
void driver(Node head)
{
    rec_rev_ll(head,NULL); 
}

void rec_rev_ll(Node head, Node prev) 
{
    Node tmp = head->next;
    if(tmp == NULL) // Ends recursion when end of linked list is reached.
    {
        head->next = prev;
        return;
    }
    head->next = prev;
    rec_rev_ll(tmp,head);
} 
```

短而甜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T17:16:33.980

在不使用任何临时节点的情况下反转列表：

```
struct node* reverse_helper(struct node *ptr, struct node **head)
{
        if(ptr->next == NULL)
            *head = ptr;
        else 
            (reverse(ptr->next,head))->next = ptr;

        return ptr;
}        

/*Call reverseList Function with your List head reference */
void reverseList(struct node **head)
{
     struct node *ptr = reverse_helper(*head,head);
     ptr->next = NULL;     
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-19T21:29:33.627

`void recursiveReverse(struct node** head_ref) { struct node* first; struct node* rest;`

```
/* empty list */
if (*head_ref == NULL)
   return;  

/* suppose first = {1, 2, 3}, rest = {2, 3} */
first = *head_ref; 
rest  = first->next;

/* List has only one node */
if (rest == NULL)
   return;  

/* reverse the rest list and put the first element at the end */
recursiveReverse(&rest);
first->next->next  = first; 

/* tricky step -- see the diagram */
first->next  = NULL;         

/* fix the head pointer */
*head_ref = rest; 
```

`}`

解释

这里指针 first 和 next 对于每个内部调用都是本地的。在 stackeach time 函数调用自身时，现在在堆栈上创建的两个临时指针 *first 是链表的最前面的元素，而 *rest 是指向链表上的下一个元素的指针。在每个调用中，网络传递给递归意味着第二个元素指针被传递。最后，如果`(rest == NULL)`堆栈展开在堆栈展开中开始，则没有剩余元素。在堆栈展开中 *rest forward 将指向低级 *first 指针，这只是在展开期间将指针从一个堆栈反转到另一个堆栈。在最初的 *first 成为最后一个元素，因此它的 next 被更改为 null 以防止非法引用`first->next = NULL`

# javascript - 如何确保 D3 在 javascript 运行之前完成加载多个 CSV？

> ID：13425987
> 
> 赞同：15
> 
> 时间：2012-11-16T23:37:13.487
> 
> 标签：javascript, csv, d3.js

我正在使用 D3 将*其他*CSV 文件列表的 CSV 加载到 javascript 中。

当我运行以下代码时，员工数组在代码中到达时仍然为空。是否有正确的方法来确保 D3 在 javascript 继续之前完成加载数据？

```
var employees = [];

//Retrieve the file list of all the csvs in the data directory, then run a callback on them
function retrieveList(url,callback) {
    d3.csv(url,function(data) {
        callback(data);
    })
}

//Parse a file list, and then update the employee array with the data within
function parseList(filenames){
    filenames.forEach(function(d) {
        d3.csv(d.filename,function(data) {
            data.forEach(function(d) employees.push(d.name));
        }
    }
}

//Run this code
var filenamesUrl = "http://.../filenames.csv"
retrieveList(filenamesUrl, parseList);

console.log(employees); //This logs "[]" 
```

如果我在 Chrome 中加载页面，当我进入控制台并记录员工时，它肯定会返回填充有名称的数组。当我在最后一行运行 console.log(employees) 时，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T18:17:07.367

您可以使用[queue.js](https://github.com/mbostock/queue)收集所有 d3.csv 调用的结果：

```
function parseList(filenames){
  var q = queue();
  filenames.forEach(function(d) {
    //add your csv call to the queue
    q.defer(function(callback) {
      d3.csv(d.filename,function(res) { callback(null, res) });
    });
  });

  q.await(restOfCode)
}    

function restOfCode(err, results) {
  //results is an array of each of your csv results
  console.log(results)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:16:50.860

Your code seems fine. It's just that you're logging `employees` before the data is ready. But if you `console.log` it on the last line of `parseList` you should have it.

# css - gridview 突破容器 div

> ID：13425993
> 
> 赞同：0
> 
> 时间：2012-11-16T23:38:17.040
> 
> 标签：css, html, gridview, breakout

我对 div 和 css 还很陌生，所以请保持温和 :) 我在 div 中有一个 gridview，它比屏幕更宽，而不是外部 div 扩展以适应它，它爆发了。如果我在外部 div 上放置溢出，我会得到一个滚动条，但我不想在 div 中有滚动条，我希望允许用户使用浏览器 scollbar 滚动。这是我的代码，任何帮助将不胜感激。谢谢

```
 #page
{
    background-color:#EEEEEE;
    vertical-align:middle;
    text-align:center;
    margin:5px 5px 5px 5px;
    overflow:auto; 
}

#OuterDiv
{
    border:solid 1px #000000;
    background-color:#ffffff;

}
#ContentDiv
{
    padding:5px 5px 5px 5px;

}

<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication1.WebForm1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="~/Styles/stylesheet1.css" rel="stylesheet" type="text/css" />
</head>
<body id="page">
    <form id="Form1" method="post" runat="server">
    <div id="OuterDiv">
        <div id="ContentDiv">
           <!-- <asp:Image ID="Image1" runat="server" ImageUrl="~/downArrow.gif" Width="2500px" Height="5px" />-->

            <asp:GridView ID="GridView" runat="server" AutoGenerateColumns="False" 
                DataKeyNames="PID" DataSourceID="SqlDataSource1">
                <Columns>
                    <asp:BoundField DataField="PID" HeaderText="Property_ID" 
                         ReadOnly="True"  />
                    <asp:BoundField DataField="Client_ID" HeaderText="Client_ID"  />
                    <asp:BoundField DataField="aID" HeaderText="aID" />
                    <asp:BoundField DataField="Type_ID" HeaderText="Type_ID"  />
                    <asp:BoundField DataField="Status_ID" HeaderText="Status_ID"  />
                    <asp:BoundField DataField="Condition_ID" />
                    <asp:BoundField DataField="Quality_Check" HeaderText="Quality_Check"  />
                    <asp:BoundField DataField="Letter_ID" HeaderText="Letter_ID"  />
                    <asp:CheckBoxField DataField="Access" HeaderText="Access" />
                    <asp:BoundField DataField="Strike" HeaderText="Strike" />
                    <asp:BoundField DataField="No" HeaderText="No"  />
                    <asp:BoundField DataField="Built" HeaderText="Built"  />
                    <asp:CheckBoxField DataField="Resend" HeaderText="Resend"  />
                    <asp:BoundField DataField="Revisit" HeaderText="Revisit" />
                </Columns>
            </asp:GridView>
        </div>
    </div>
    </form>
</body>
</html> 
```

查看源...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title><link href="Styles/stylesheet1.css" rel="stylesheet" type="text/css" /></head>
<body id="page">
    <form method="post" action="WebForm1.aspx" id="Form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="9kht/xXvq8Ky7JiNUYvFSN1I/TZ5M2MHLJ3V81g2Hxcph4cd9c2B2uqNJdJGHTlx5DCKDYjQUKj+efSTbulissrkRqZtOSk3u9pRKi7qV+X8jHXf2yQc3euHfKr9AfonKd0Tgw0dS08KUuRNbNmL9RFOmKStSVmDfFnBxrXWxSrfmvcdh0DgsGiZ+7r96G4wodp/xlN3DwvK1qpWj9W+w9lUnhuyeznkjJjZnwg2K2x3c0h+37jl2GQm97WoeBzBi4I60ESQxWSp0X4UZ42s/AjN67NYe9PkW/Laou73b9fJGstscuZ9IsR/dklggQaFEeYBAfPb6MrWhgMC96uVDdOLamD5GeYWIPf1AkdC3pgHFGKg05wUsTIJwmjZTu71ivvMxzW3BzbOMc7DPNijFtJ+EvciCZZ5eQtdbF6yH8d0Wf62aH8yhdaT1qdC1/QfSEnX9TV+lSZIF7cJ5bjIsWR3fHmDOkFppHmO5FRq3aE4A+QUxtq3ygjP/OHdUScZF4r4i22q/diMhA7bGkEFYu7vgXDPqA1lYpymI0AtdB7CY9Wq3JZv9nTG1L+rPu0hjGbTc+Uo6pZbVgcBw+BmCKg4ZlBMCkNh0qaYIRqmplb7786MwlE2kHyCO5IlDUmgwivSBZBY2KLq0oeNlU6sq9HFhn2PoOG/PtWvrQ6qU36o4BJEND6bC6BZl7IrURNlKM78h0QnfUt37DOBvdTON8x3w1LJLx6S2baBUWPlfGINJlf14CDVbsRykNnmr/nc9MFZIcX3LxyEIjNIitU2Qj5QjiNDDAvSE5JZFcHfpJDwMvqHPo1dBWfAnkxMCmRiAIKmUxhTfhQKjIkQddEra0eAQqOQYbMPw1/DYGRqudl5B5RuGpi65t6HYIG5i+gZCC82N60T2XCRbXWczz1pq/pyg3Pn+baR8wGC+YesnzAJq7ypU0XnWJDdsyxk0DTW8nwEwlvK5PlgtfHgR8ODmLIgms2VTX9cLia9jVYlmwcIWmx+sSDiKLsOl98/DqwLAVSYEfN4klEKDThv/EqbUstvWuIWd9wPDW8NQ0R2ZucZj6RXwprTy+ZCcTQitYsFmiUSRa6BvMGcT1DAMS0e2po3xCPrz0kp3+eLWTnJTfoENnXGZpna6GVBdsx4Z13FVdILTBPiG/TMW9GYI16wq6hG//hoS5jG/7N2zI7b1BQTcTUtm2Hy2AB9QgCm6cIF2zM9Ynrbt2vRN1W9hKxZ5MliDe8bclYBL3RnFU0N/DLfAQfspQ7TGZARQNM+j/TIfVtkwitmhjNOHFGtu4zxiJxhfndWagiH8gWrjc8+xEmH5gv0kDpT2Ubr+hxbKpMaEqVxEbQJgwFdU3aPGVWrzWj9eOWwBHpDuUaHsjbCy4KLjekriWRlKp8zVfMC9vpzTMweNQTauUUxckYrdRcfEh5jhdEDbU0FkN866a7HVJ51q//oVPRScBwOWMbkU7Kquq4cwJm7otjIosFJWjOJq6baTWmtX11VQRxkz+6vzfjkx6zA0GxxbqkZTUmi1QzeWQcjgRIQNp44GvFCEshW+2WF+81yjUHJokP/FXM4PHit9exNI2ML5zqvMKEpiRAMZk/4Bhmq7IMddYLKVOPKnth+IdP179KfM6mOB2vyf4XKIi9OZnjYKhUKKT7XLeGa3EeBj3zU/BDkfLxOx/Kow8aOvExHNsZrN9foutVUQmf9XzqrTd7ZkNDgr1FGdp08St1QWV1lu1eFB7xRhhHxAOHH190W8U4Co4/HLtMpmXUGCvdTiP5k+Leg4E4AJ2SaQtfFXw6aJ0EKxD5sek7v4egxDkkyMyQiAr5gW0tM2U+AZhpOGXsO+cALVXls3yyrTDxKA6xy0zxK8wb6HqNZ3Llka9wXX2pBnpWPwVs9xAWs5OmhAO0KSgw125ftA0Km6bWE9XRub/ZVWcWmkYG5/34QMC3/nCnWGKNR0LhJs+eqcdFx65iB6BlfuNPrCWZZEw/a8R/suZdrDbprQ8bBAhlgZlqWZ+WXKFT8ga+H9jwjzcKz0whbtlIDuGWTB4fhuTw5fhnLCRU2R9yCw17D4H1nnbHsBxtyMwUTIUhjRh7SvXqQLx7zkxC7Qk55L9/9hX+QNchIWwhZZtybhp+D2k77qKqSTi4xLFOuLQAvV7oK6G3RB0grPcXU1pLroH1rGjJ5HNABKgjDVjHuJLd5v2P+iU9s7Hif688W7zb3xCUSgaCHvWCo+b+Dt16eNE/mOUoQ9pRMWDWshv/04xuXxuXj88ZsoxueOK4kJgYZGM1/C8jZkqOZI1uL1r0lw7Dj0p/ViQsP0AD7L9eKQ2PfAUzxgkZxhgr3ZVnPHkfJ99fCEZU2l6jPb5OVxzLWX46MldEn8wZrawV5fM88PYcnuzQjdyXeRXRCyHAC/oQtqiWZ5iUMu+2Ve6rZgYc9+E6B/OgLqNzRV6Sl8ND4gkJerWNBojuXUjaInGwam7CCYtyIrhECoatMvKlHQYwcj5bUSdrTwXo8di5TNSvtHe/h1EwckB2Si4K5hcOss17cI+nurgXAoVnB9VM3drLdc8Li47ZexnUoc0/uBeSSsyZyQHnLoZzsv3mr8hiSDQRHuuDxJFvxCvtwbtSRM7TV+HpDZzl2BjWy9rEzrsElrz8HmqUnusj61Kx8QaR36ZTNdgjvPUlRI4EVWMcJdqqfgQibkpm9EnTvLmD4VECBpWfGpjZ0a5yi6TaCbPlHY9TVFMYOclFe4YP6r43oCYwQCDtyo8uhuJmI1oGqTcURn8gar26zvQxc7pGO6Ro7GWLUcngrhNYLeJLqwQtvKhoL4QuFbQh7iCsDYThJGs9GwLfJgxRdmGgXWmErF0wdEy6VOkweJd14hxxwpV5bDCBEzZldd1ipVlFQyYQdm8GLvjOAx3oUMCdxUZXDmfhHefq9tSEmjO5Da8nbMjo756gnjJKUzCeYZeCVlRo6Ye67WmyhKR/53cU0U1o2ZvfyXzJj2gyQtv/y9ewGl2iuR05H8XfZAnuvYRCjecVScSJJFId1Luol/jDYFctUlHqfmRawwEA9yZ/q1L5d3z+rFm9KJpNOm6jy8tKTWPdQfSP/L0DquKjMwQje3udrnsL1Y/K4hTXRMR+lXMJ3vFgN08J3kdM2nTLrZw6Sa6ARnxWfyuKYkTEhi75v9jjeOYX7NnZHWKN4QxWWy+v4fe6wcNMM57gc5ntzAETMkH3eSMPt66bPUiKKWGU53tD3ygv/zZyn1Dl4WybNlkXe+G7eo9xoKuCQ0k1tvreAwoo31BWOETUipA==" />
</div>

<div class="aspNetHidden">

    <input type="hidden" name="__VIEWSTATEENCRYPTED" id="__VIEWSTATEENCRYPTED" value="" />
    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="qZYIU/6LTVycyZg1nqgPf4PbztGHnGb9E+xlV5NDyZ3cqihuPsgLkGWcAzTeRY10hUK3zDCNWEpQi2JdzOyDt39AjxvqUvbs7YoY5ckwVtJAPZVp2X6S1akdqvI4KIGb0hIt5ieX8iPX60SCD9VGvhOPgp3KbqQB22aGkEzjeUK9pI1Z2dsUeO/uNr38hIVSLvmiWInqePwmo0DUISlKva53o51aiVTkQ+lcausxMZBGLUexClrLM3WvV44wNC9z" />
</div>
    <div id="OuterDiv">
        <div id="ContentDiv">

            <div>
    <table cellspacing="0" rules="all" border="1" id="GridView1" style="border-collapse:collapse;">
        <tr>
            <th scope="col">Property_ID</th><th scope="col">Client_ID</th><th scope="col">aID</th><th scope="col">Type_ID</th><th scope="col">Status_ID</th><th scope="col">Condition_ID</th><th scope="col">Quality_Check</th><th scope="col">Letter_ID</th><th scope="col">Access</th><th scope="col">Strike</th><th scope="col">No</th><th scope="col">Built</th><th scope="col">Resend</th><th scope="col">Revisit</th>
        </tr><tr>
            <td>22</td><td>1</td><td>24</td><td>10</td><td>1</td><td>0</td><td>&nbsp;</td><td>0</td><td><span class="aspNetDisabled"><input id="GridView1_ctl00_0" type="checkbox" name="GridView1$ctl02$ctl00" disabled="disabled" /></span></td><td>0</td><td>3</td><td>&nbsp;</td><td><span class="aspNetDisabled"><input id="GridView1_ctl01_0" type="checkbox" name="GridView1$ctl02$ctl01" disabled="disabled" /></span></td><td>0</td>
        </tr><tr>
            <td>23</td><td>1</td><td>24</td><td>10</td><td>1</td><td>0</td><td>&nbsp;</td><td>0</td><td><span class="aspNetDisabled"><input id="GridView1_ctl00_1" type="checkbox" name="GridView1$ctl03$ctl00" disabled="disabled" /></span></td><td>0</td><td>3</td><td>&nbsp;</td><td><span class="aspNetDisabled"><input id="GridView1_ctl01_1" type="checkbox" name="GridView1$ctl03$ctl01" disabled="disabled" /></span></td><td>0</td>
        </tr><tr>
            <td>24</td><td>1</td><td>24</td><td>10</td><td>21</td><td>0</td><td>&nbsp;</td><td>0</td><td><span class="aspNetDisabled"><input id="GridView1_ctl00_2" type="checkbox" name="GridView1$ctl04$ctl00" disabled="disabled" /></span></td><td>0</td><td>2</td><td>&nbsp;</td><td><span class="aspNetDisabled"><input id="GridView1_ctl01_2" type="checkbox" name="GridView1$ctl04$ctl01" disabled="disabled" /></span></td><td>0</td>
        </tr><tr>
            <td>25</td><td>1</td><td>24</td><td>10</td><td>1</td><td>0</td><td>&nbsp;</td><td>0</td><td><span class="aspNetDisabled"><input id="GridView1_ctl00_3" type="checkbox" name="GridView1$ctl05$ctl00" disabled="disabled" /></span></td><td>0</td><td>2</td><td>&nbsp;</td><td><span class="aspNetDisabled"><input id="GridView1_ctl01_3" type="checkbox" name="GridView1$ctl05$ctl01" disabled="disabled" /></span></td><td>0</td>
        </tr><tr>
            <td>26</td><td>1</td><td>24</td><td>10</td><td>1</td><td>0</td><td>&nbsp;</td><td>0</td><td><span class="aspNetDisabled"><input id="GridView1_ctl00_4" type="checkbox" name="GridView1$ctl06$ctl00" disabled="disabled" /></span></td><td>0</td><td>3</td><td>&nbsp;</td><td><span class="aspNetDisabled"><input id="GridView1_ctl01_4" type="checkbox" name="GridView1$ctl06$ctl01" disabled="disabled" /></span></td><td>0</td>
        </tr><tr>
            <td>27</td><td>1</td><td>24</td><td>38</td><td>1</td><td>0</td><td>&nbsp;</td><td>0</td><td><span class="aspNetDisabled"><input id="GridView1_ctl00_5" type="checkbox" name="GridView1$ctl07$ctl00" disabled="disabled" /></span></td><td>0</td><td>2</td><td>&nbsp;</td><td><span class="aspNetDisabled"><input id="GridView1_ctl01_5" type="checkbox" name="GridView1$ctl07$ctl01" disabled="disabled" /></span></td><td>0</td>
        </tr><tr>
            <td>28</td><td>1</td><td>24</td><td>10</td><td>1</td><td>0</td><td>&nbsp;</td><td>0</td><td><span class="aspNetDisabled"><input id="GridView1_ctl00_6" type="checkbox" name="GridView1$ctl08$ctl00" disabled="disabled" /></span></td><td>0</td><td>3</td><td>&nbsp;</td><td><span class="aspNetDisabled"><input id="GridView1_ctl01_6" type="checkbox" name="GridView1$ctl08$ctl01" disabled="disabled" /></span></td><td>0</td>
        </tr><tr>
            <td>29</td><td>1</td><td>24</td><td>10</td><td>1</td><td>0</td><td>&nbsp;</td><td>0</td><td><span class="aspNetDisabled"><input id="GridView1_ctl00_7" type="checkbox" name="GridView1$ctl09$ctl00" disabled="disabled" /></span></td><td>0</td><td>3</td><td>&nbsp;</td><td><span class="aspNetDisabled"><input id="GridView1_ctl01_7" type="checkbox" name="GridView1$ctl09$ctl01" disabled="disabled" /></span></td><td>0</td>
        </tr><tr>
            <td>30</td><td>1</td><td>24</td><td>10</td><td>1</td><td>0</td><td>&nbsp;</td><td>0</td><td><span class="aspNetDisabled"><input id="GridView1_ctl00_8" type="checkbox" name="GridView1$ctl10$ctl00" disabled="disabled" /></span></td><td>0</td><td>2</td><td>&nbsp;</td><td><span class="aspNetDisabled"><input id="GridView1_ctl01_8" type="checkbox" name="GridView1$ctl10$ctl01" disabled="disabled" /></span></td><td>0</td>
        </tr><tr>
            <td>31</td><td>1</td><td>24</td><td>10</td><td>1</td><td>0</td><td>&nbsp;</td><td>0</td><td><span class="aspNetDisabled"><input id="GridView1_ctl00_9" type="checkbox" name="GridView1$ctl11$ctl00" disabled="disabled" /></span></td><td>0</td><td>2</td><td>&nbsp;</td><td><span class="aspNetDisabled"><input id="GridView1_ctl01_9" type="checkbox" name="GridView1$ctl11$ctl01" disabled="disabled" /></span></td><td>0</td>
        </tr>
    </table>
</div>

        </div>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:44:08.770

尝试从 gridview 的父 div 中删除任何*溢出*属性并将其添加到您的 css

```
body{ overflow:auto; } 
```

移除了外部 div 并将其属性放入 contentdiv。新增*显示：表格；*到 ContentDiv，

这是一个[JSFiddle](http://jsfiddle.net/az8SB/1/)，我想它按预期工作。

# sql - 多个表上的 SQL 自然连接，包括空值

> ID：13425994
> 
> 赞同：2
> 
> 时间：2012-11-16T23:38:18.767
> 
> 标签：sql, sql-server-2008, join, natural-join

请原谅我对这个问题的无知，如果它真的很简单，但它让我发疯，我已经从这个网站搜索（尝试和失败）不同的解决方案，所以这里......

我正在使用 SQL 2008 并尝试将结果从 12 个表中提取到一个查询中，所以我有；

```
DECLARE @RefID nvarchar(10)
SET @RefID = 'test'

SELECT * From 
Table1, 
Table2, 
Table3, 
Table4, 
Table5, 
Table6, 
Table7,
Table8,
Table9,
Table10,
Table11,
Table12

WHERE table1.[RefID] = @RefID
AND Table2.[Ref ID] = @RefID
AND Table3.[Ref ID] = @RefID
AND Table4.[Ref ID] = @RefID 
AND Table5.[Ref ID] = @RefID
AND Table6.[Ref ID] = @RefID 
AND Table7.[Ref ID] = @RefID 
AND Table8.[Ref ID] = @RefID 
AND Table9.[Ref ID] = @RefID 
AND Table10.[Ref ID] = @RefID 
AND Table11.[RefID] = @RefID 
AND Table12.[RefID] = @RefID ` 
```

现在这工作正常，易于理解，并给我一行将所有数据正是我正在寻找的......除了一个问题

如果任何表中都不存在记录，而不是忽略它或简单地给我该表的空白/空值 - 查询中断并且我没有得到任何结果

我真的很感激任何想法

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T00:06:43.637

以下应该也可以工作......

```
select * 
from (select RefID = @RefID) x
left join Table1 t1 on t1.RefID = x.RefID
left join Table2 t2 on t2.RefID = x.RefID
left join Table3 t3 on t3.RefID = x.RefID
left join Table4 t4 on t4.RefID = x.RefID
left join Table5 t5 on t5.RefID = x.RefID
left join Table6 t6 on t6.RefID = x.RefID
left join Table7 t7 on t7.RefID = x.RefID
left join Table8 t8 on t8.RefID = x.RefID
left join Table9 t9 on t9.RefID = x.RefID
left join Table10 t10 on t10.RefID = x.RefID
left join Table11 t11 on t11.RefID = x.RefID
left join Table12 t12 on t12.RefID = x.RefID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:44:58.127

意识到前两个想法是不对的：

```
Select
  *
From (
  Select 
    @RefID RefID
  ) a
    Left Outer Join
  Table1
    On a.RefID = Table1.RefID
  Table2 
    On a.RefID = Table2.RefID
    Left Outer Join
  Table3
    On a.RefID = Table3.RefID
    Left Outer Join
  Table4
    ...
    Left Outer Join
  Table12
    On a.RefID = Table12.RefID 
```

如果您不想在开始时使用额外的 RefID，请替换`*`为`Table1.*, Table2.*, ...`

# google-apps-script - 是否可以在另一个面板中嵌入使用 GUI 构建器构建的 GUI？

> ID：13425999
> 
> 赞同：3
> 
> 时间：2012-11-16T23:38:49.207
> 
> 标签：google-apps-script

我已经使用 GUI Builder 创建了一些 GUI 部件，我想将它们嵌入到我的脚本面板中，而不是直接将它们添加到应用程序中。但显然，这样的代码不起作用：

```
 var app = UiApp.createApplication();
  var vp = app.createVerticalPanel();
  vp.add(app.loadComponent("myGUI"));
  app.add(vp);
  return app; 
```

是否可以（或是否可以）将 GUI Builder 中的 GUI 添加到应用程序以外的其他容器中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:37:40.443

你可以像在这个例子中那样做

```
function doGet() {
  var app = UiApp.createApplication()
  var Panel = app.createAbsolutePanel().setStyleAttribute('background', 'beige').setPixelSize(400,600);
  var label = app.createLabel('gui test')
  var gui = app.loadComponent('MyGui')
  Panel.add(app.getElementById('VerticalPanel1'))
  Panel.add(label)
  app.add(Panel)
  return app
  } 
```

GUI 看起来像这样：

![在此处输入图像描述](../Images/eccc678a2266166b382c3b6117af72ce.png)

我没有添加组件，而是添加了包含所有其他小部件的面板（在本例中为“VerticalPanel1”）。

结果如下所示：

![在此处输入图像描述](../Images/d01e5e08f875e55eaedf4e2f8e55f3b3.png)