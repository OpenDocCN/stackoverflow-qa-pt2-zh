# StackOverflow 问答 12994000-12994999

# c# - 使用 Visual Studio 连接到远程数据库

> ID：12994000
> 
> 赞同：1
> 
> 时间：2012-10-21T00:53:11.627
> 
> 标签：c#, asp.net, sql-server, visual-studio-2010, sql-server-2008

我有域、数据库名称、数据库用户和密码

我想使用 Visual Studio 2010 远程连接到我的数据库，我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:51:24.620

根据您使用的数据库类型，有许多不同的方法可以做到这一点

如果您正在寻找类似 wizer 的方式，您可以使用 Visual Studio 工具箱并添加数据源。

[http://www.programminghelp.com/software/visual-studio-net/how-to-create-a-data-source-in-visual-studio-net/](http://www.programminghelp.com/software/visual-studio-net/how-to-create-a-data-source-in-visual-studio-net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:00:14.367

使用连接字符串更容易做到这一点，但是为了在您想打开添加新的 sql 服务器连接时使用服务器资源管理器或仅通过编写连接字符串来实现这一点，因为服务器 ui 仍然会创建您需要知道的连接字符串

Data Source=SERVER 安装 sql server 的服务器的 IP 地址 如果您使用 SQL 身份验证，则将 Integrated Security 替换为用户 ID 和密码。

[http://weblogs.asp.net/nannettethacker/archive/2008/02/17/creating-a-database-connection-to-a-remote-sql-server-database-within-visual-web-developer.aspx](http://weblogs.asp.net/nannettethacker/archive/2008/02/17/creating-a-database-connection-to-a-remote-sql-server-database-within-visual-web-developer.aspx)

# java - Hibernate 运行所有表进行简单登录

> ID：12994001
> 
> 赞同：1
> 
> 时间：2012-10-21T00:53:16.493
> 
> 标签：java, hibernate

我在一个 web 系统上做过一些维护，这个系统是用 Java、Struts2 和 Hibernate 3 完成的。我的客户迫切要求我的一个项目是更正登录，因为它很慢。

我可以识别用户何时登录，Hibernate 在与登录无关的不同表中的数据库上生成许多查询。

我的关系是三张表：用户、学生、教师

学生

*   ID
*   姓名

老师

*   ID
*   姓名

用户

*   ID
*   登录
*   密码

每次学生登录时，查询都会检查它是否是正确的登录名和密码，以及 ID 是否存在于学生表中。如您所见，没有外键 ID，例如 Student 表中的 ID_USER。

我的查询：

```
Student student =(Student)session.createCriteria(Student.class)
.add( Property.forName("login").eq(login) )
.add( Property.forName("password").eq(password) )
.setMaxResults(1)
.uniqueResult(); 
```

*   学生继承自用户...

我的用户.hbm.xml

...

```
<class name="com.xxx.User" table="TBL_USERS" discriminator-value="0" lazy="true">
    <id name="id" column="ID">
     <generator class="sequence">
         <param name="sequence">seq_users</param>
     </generator>
    </id>

    <discriminator column="TYPE" insert="true" />

    <subclass name="com.xxx.Student" discriminator-value="1" lazy="true">
      <join table="TBL_STUDENTS">
         <key column="ID"/>
            <property name="name" column="NAME"/>
      </join>
     </subclass>

     <subclass name="com.xxx.Teacher" discriminator-value="2" lazy="true">
        <join table="TBL_TEACHERS">
           <key column="ID" />
               <property name="name" column="NAME"  />
        </join>
     </subclass> 
```

...

在我的 Hibernate 日志中，有许多奇怪的查询，如下所示：

它发生在 20 多个不同的表中，并且一直在重复，因为登录操作很慢。但我不知道为什么会这样，我对 Hibernate 没有太多经验。

休眠：

```
select
      exerc0_.ID_CLASS as ID6_1_,
      exerc0_.ID as ID1_,
      exerc0_.ID as ID14_0_,
      exerc0_.DATE_ENT as DATA2_14_0_,
        exerc0_.TITLE as TITTLE14_0_,
        exerc0_.TEXT as TEXT14_0_,
        exerc0_.TYPE_EXERC as TYPE5_14_0_,
        exerc0_.ID_CLASS as ID6_14_0_ 
    from
        TBL_EXERC exerc0_ 
    where
        exerc0_.ID_CLASS=? 
```

会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T21:11:41.353

只是不要让这个问题永远悬而未决。问题已经修复了很多次，但我完全忘记回复了。我必须启用一些延迟加载，并确保在其他几个地方选择 LIST 而不是 SET。LIST 似乎更具性能。

@Firo 在某种程度上是正确的。

# c# - 列表索引越界

> ID：12994008
> 
> 赞同：1
> 
> 时间：2012-10-21T00:54:52.570
> 
> 标签：c#, android

我正在尝试从组合框中检索一个值并使用列表将其放入另一个组合框中。

我成功地从列表中删除了该值，并将其实施到另一个列表中。但是当我这样做时，我的列表容量出现故障，并且出现索引超出范围的错误。

设想：

> 列表字母选择：B
> 
> '按下左 Shift 按钮'
> 
> 'B' 从字母列表中删除
> 
> 'B' 添加到号码列表
> 
> 打印值
> 
> 错误：“索引超出范围。必须为非负数且小于集合大小
> 
> 第 66 行：Console.WriteLine("Numbers:" + numbers[i] + "\tIteration:" + i);
> 
> 数字列表容量：8，字母列表容量：4。
> 
> 数字列表：1、2、3、4、B。字母列表：A、C、D

代码：

```
public partial class Form1 : Form
{
    public List<string> letters = new List<string>();
    public List<string> numbers = new List<string>();

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        InitialiseLists();
        LoadListsIntoCombo();
    }

    public void InitialiseLists()
    {
        /*
         * Add Letter Data
         */
        letters.Add("A");
        letters.Add("B");
        letters.Add("C");
        letters.Add("D");

        /*
         * Add Number Data
         */
        numbers.Add("1");
        numbers.Add("2");
        numbers.Add("3");
        numbers.Add("4");

    }

    public void LoadListsIntoCombo()
    {

        comboLetter.DataSource = letters;
        comboNumber.DataSource = numbers;

    }

    public void PrintList()
    {
        /*
         * Print Lists To Console
         */
        for (int i = 0; i < numbers.Capacity; i++)
        {
            Console.WriteLine("NUM CAPACITY: " + numbers.Capacity);
            Console.WriteLine("Numbers: " + numbers[i] + "\tIteration: " + i);
        }

        for (int i = 0; i < letters.Capacity; i++)
        {
            Console.WriteLine("LET CAPACITY: " + letters.Capacity);
            Console.WriteLine("Letters : " + letters[i] + "\tIteration: " + i);

        }

    }

    private void cmdLeft_Click(object sender, EventArgs e)
    {

        AddLetterToNumber(GetLetter());
        RemoveLetter(GetLetter());

    }

    public void RemoveLetter(string value)
    {
        letters.Remove(value);
    }

    public void AddLetterToNumber(string value)
    {
        numbers.Add(value);
    }

    public string GetLetter()
    {
        string letter = comboLetter.SelectedItem.ToString();
        return letter;
    }

    public int GetLetterIndex()
    {
        int letterIndex = comboLetter.SelectedIndex;

        return letterIndex;
    }

    private void cmdRight_Click(object sender, EventArgs e)
    {
        PrintList();
    }

}

    } 
```

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T00:59:51.750

使用[Count](http://msdn.microsoft.com/en-us/library/27b47ht3.aspx)属性而不是[`Capacity`](http://msdn.microsoft.com/en-us/library/y52x03h2.aspx). 因为第一个返回列表中包含的项目数。第二个只是说在调整列表大小之前可以添加多少项目。

```
public void PrintList()
{
   Console.WriteLine("Numbers count: " + numbers.Count);    
   for (int i = 0; i < numbers.Count; i++)   
       Console.WriteLine("Numbers: {0}\tIteration: {1}", numbers[i], i);       

   Console.WriteLine("Letters count: " + letters.Count);    
   for (int i = 0; i < letters.Count; i++)       
       Console.WriteLine("Letters : {0}\tIteration: {1}", letters[i], i);   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T01:01:53.160

您正在使用容量而不是计数。容量不是列表中元素的数量。

```
 Capacity: Gets or sets the total number of elements the internal data structure can hold without resizing.
    Count: Gets the number of elements actually contained in the List<T>. 
```

从这里 [http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

# css - Bootstrap 容器元素必须包含行元素吗？

> ID：12994012
> 
> 赞同：53
> 
> 时间：2012-10-21T00:55:27.723
> 
> 标签：css, twitter-bootstrap

从我对文档的阅读来看，这似乎是包含（其中 x 总计 12）的 div`.container`的“父”包装器。但是，他们的导航示例中似乎没有。`.row``.spanX``.row`

此外，在他们的文档站点上，`.container`它由几个与导航栏相关的 div 包装。

谁能详细说明框架应该如何工作？我是新手。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-21T01:23:49.443

在 a`.row`中*不需要*该类`.container`，但是当您开始时将其包含在内是一个好主意，以防您以后想要多行。

`.row`真正要做的就是确保其中的所有 div 都出现在自己的行上，与上一个和下一个分开`.rows`。

对于 div 的`.container`内部`.navbar`，这是使导航栏与页面的其余部分对齐所必需的单独的东西。如果您在呈现的 HTML 中进一步向下看，您会发现还有一个`.container`不在任何`.navbar`div 中的，它是包含所有主要内容的那个。

## 一个完整的例子

```
<div class="container">
  <div class="row">
    <!-- These divs are inline and do NOT fill up the full 12 columns -->
    <div class="span4">...</div>
    <div class="span4">...</div>
  </div>

  <!-- This is a automatically a new line of divs -->
  <div class="row">
    <!-- This div will appear below the previous row, even though it
      would fit next to the other divs -->
    <div class="span4"></div>
  </div>

  <!-- These will appear in their own row, but may act
    unexpectedly in certain situations -->
  <div class="span4"></div>
  <div class="span4"></div>
</div> 
```

## 简而言之

`.row`定义一行 div，顾名思义。每一个表示一个新的 div 行，不管上面的行是否已满。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-22T01:56:18.203

答案比给出的要简单得多。不，`.container`不必包含任何特定代码，并且它对包含它的内容没有任何负担......

`.container`所做的是充当“包装器”以“包含”包裹在其中的任何和所有元素的大小。并且`.container`可以包装页面或组件。因此，如果您想要一个类似于那些 Twitter Bootstrap 文档的页面，具有“固定”宽度和两边相等的边距，那么只`.container`需要一个来包装页面上的所有内容。

还有其他用途`.container`；您是否注意到 Bootstrap 的文档`.navbar-fixed-top`( 这是因为`.navbar-fixed-top`a 不在 a内部，`.container`而`.nav`在它内部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T02:04:19.313

引导网格由 12 列组成，只要它们加起来为 12，就可以在一行内以任意组合进行调整。您可以将它们视为包含行，例如表格行之类，用于分隔不同的行的内容。在网格内，`.row`容器有一个单独的任务，并且在那里（并且需要）重新调整最后一个网格列的间距宽度，这取决于屏幕尺寸（如果包含响应表）。如果您查看`.row`该类背后的 css，您会注意到`margin-left:-30px`默认情况下它具有一个属性（根据屏幕大小，它可以更大或更小），该属性旨在“删除”最后一列中的排水沟在行中；没有它，网格将不会重新调整排水沟，它会中断到第二条线上。

现在，容器之所以是`.row`容器的子`.container`容器，是因为`.row`容器仅用于分隔内容的“行”，而不是包含页面中的部分和更多内容。因此，导航示例没有的原因可能是由于导航元素缺少间距宽度，因为它是一个完整的块元素而不是网格，所以没有必要重置最后一个松动的排水沟。

# arrays - 读取和分析txt文件

> ID：12994014
> 
> 赞同：1
> 
> 时间：2012-10-21T00:55:34.680
> 
> 标签：arrays, vb.net, structure

我试图编写一个代码，其中两个 txt 文件相互比较。一个文本文件的答案类似于“TFTTFFT”，而另一个 txt 文件的结果包括像“1234 TT-FFT”这样的 id得到-1，对于每个没有答案，在这种情况下由破折号（-）表示，学生得到零。我该如何为此编写代码？任何帮助将不胜感激。我不一定需要有人为我编写代码，因为我已经完成了文件的打开并将它们存储在适当的变量中。只是关于如何去做这件事的反馈会很好。先感谢您。

更新：我已经修改了整个代码并将其提交考虑。谢谢乔希，也感谢所有迄今为止做出贡献的人。请让我进一步了解你们对修改后的编码的看法。

更新：程序不工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:57:12.583

由于我假设您刚刚开始编程，因此我将分享一些建议和解决问题的一般方法。

作为一名程序员，你需要培养的最重要的技能是能够将一个复杂的问题分解成简单且易于消化的块。正如我所看到的，这个问题有 3 个独立的部分。我会尝试用伪代码来表达这些。

## 读取和解析文件

```
Open (Answer Key File)

Read All Text From (Answer Key File) into (String)

Convert (String) into array of characters as (Answer Key Array)

Close (Answer Key File)

Open (Student's File)

Read All Text From (Student's File) into (String)

Extract (Student ID) from (String)

Extract (Student's Answers) from (String)

Convert (Student's Answers) to Character Array as (Student Answers Array)

Close (Student's File) 
```

## 比较学生的答案并计算学生的分数

```
Set (Student Score) equal to '0'

FOR EACH (Answer) in (Student's Answers Array)

   Get (Key) from (Answer Key Array) at (Current Loop Index)

   IF (Answer) equals [NO_ANSWER] THEN
      Continue

   IF (Answer) equals (Key) THEN
      Add 4 to (Student Score)
   ELSE
      Subtract 1 from (Student Score) 
```

你的整个程序应该只包含几个方法。任何更复杂的事情，你都想多了；）

请记住，对您的任何程序进行此练习都会有所帮助。更好的是，将这些作为注释写在源文件中，然后填写必要的代码。你会惊讶于你完成的速度有多快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:50:15.603

```
 Dim answers As String = 'Text from the answor file
    Dim student As String = 'Text from the student file

    ' a will be used to hold the first char from the answers file
    ' s will be used to hold the first char from the student file
    Dim a As String
    Dim s As String

    ' veriable that holds the student grad
    Dim grade As Integer = 0

    ' loop while we still have an answer
    While answers.Length > 0

        ' get the first answer and student respond
        a = answers.First
        s = student.First

        ' compare the two and update the student grade accourdingly
        If a = "-" Then
            grade = grade - 1

        ElseIf a = s Then
            grade = grade + 4
        Else
            grade = grade - 1
        End If

        ' remove the first answer from the two strings
        answers = answers.Substring(1)
        student = student.Substring(1)
    End While

    return grade 
```

# c - 使用类型安全管理和处理 C 中的多个抽象数据类型？

> ID：12994017
> 
> 赞同：2
> 
> 时间：2012-10-21T00:56:04.470
> 
> 标签：c, signals

我有几个硬件信号可以根据与可以切换各个信号的场景相关的属性进行切换。问题是信号和定义场景的属性，这三者都可能改变。我不得不考虑基于模块化框架的设计，其中有`SignalManager`处理信号创建的，还有一个`SignalPropertiesData`与`SignalPropertiesDataManager`特定`SignalScenario`结构相关联的，所有这些都是专门为任何类型的信号创建的`SignalManager`。我希望遵循 C 编程范式中的公共接口和私有数据。

当涉及到类型安全和此类问题时，我的困境通常是 C，唯一的解决方案是失去类型安全性并对任何和所有类型的数据使用“void”。你能指出我在浩瀚的开源海洋中的任何代码或组件，它可以作为这个问题的正确参考。

信号管理器.h：

```
#ifdef _SIGNAL_MANAGER_H
#define _SIGNAL_MANAGER_H

int createSignal(SignalDescPtr signalDescPtr);

int destroySignal();

typedef struct SignalDesc* SignalDescPtr;

#endif 
```

信号管理器.c：

```
#include "signal_manager.h"

typedef struct {
  char* signalName;
  unsigned int signalId;
  SignalPropertiesDataPtr signalProperties;
} SignalDesc; 
```

signal_properties_data.h：

```
#ifdef _SIGNAL_PROPERTIES_DATA
#define _SIGNAL_PROPERTIES_DATA

typedef enum {
  SIGNAL_DATA_INT_TYPE,
  SIGNAL_DATA_UNSIGNED_INT_TYPE,
  SIGNAL_DATA_FLOAT_TYPE,
     :
  SIGNAL_DATA_UNSPECIFIED_BASIC_TYPE
} eSignalBasicType;

typedef enum {
  SIGNAL_DATA_LIST_ARRAY_TYPE,
  SIGNAL_DATA_LIST_ADT_TYPE,
   :
   :
  SIGNAL_DATA_LIST_UNSPECIFIED_TYPE
} eSignalComplexType

typdef  union {
  eSignalBasicType signalBasicType;
  eSignalComplexType signalComplexType;
} eSignalType;

typedef struct {
  eSignalType signalType;
  unsigned int signalDataLen;
} SignalDataValueType;    

typedef SignalPropertiesData* SignalPropertiesDataPtr;

result_t setSignalType(..);
result_ getSignalType(..);
result_t setSignalData(..);
result_t getSignalData(..);
result_t setSignalDataLen(..);
result_t getSignalDataLen(..);

#endif 
```

signal_properties_data.c：

```
#include "signal_properties_data.h"

typdef struct {
  SignalDataValueType signalPropertiesDataType;
  void* signalPropertiesDataValue;
} SignalPropertiesData; 
```

signal_properties_data_mgr.h：

```
#ifdef _SIGNAL_PROPERTIES_DATA_MGR_H
#define _SIGNAL_PROPERTIES_DATA_MGR_H

#include "signal_properties_data.h"
#include "signal_scenario.h"

typedef SignalScenarioDesc* SignalScenarioDescPtr;

result_t createSignalPropertiesData(SignalPropertiesDataPtr *signalPropDataPtr, eSignalType desiredSignalType);

result_t freeSignalPropertiesData(..);

result_t associateSignalToggleScenario(SignalPropertiesDataPtr *signalPropDataPtr, SignalScenPtr signalScenPtr);

result_t disassociateSignalToggleScenario(SignalPropertiesDataPtr *signalPropDataPtr, SignalScenarioDescPtr signalScenPtr);

#endif 
```

signal_properties_data_mgr.c：

```
#include "signal_properties_data_mgr.h"

typedef struct {
  toggleFuncPtr fptr;
} SignalScenarioDesc; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:20:38.173

避免去`void *`。它失去了原型的好处并且没有必要，

因为这是 C，你应该写`signalmanager.h`

```
#ifndef SIGNAL_MANAGER_H_INCLUDED
#define SIGNAL_MANAGER_H_INCLUDED

typedef struct SignalDesc* SignalDescPtr;

int createSignal(SignalDescPtr signalDescPtr);

int destroySignal(void);

#endif 
```

变化：

1.  **批判**：成语是`#ifndef MACRO / #define MACRO / #endif`。你用`#ifdef`了哪个不行。
2.  在使用之前放置 typedef。
3.  添加显式`(void)`以制作`destroySignal(void)`原型。您的版本只是说“有一个函数`destroySignal()`返回一个`int`但它需要一个未指定（但不是可变参数）的参数列表”。
4.  不要将保留的名称空间（前导下划线、大写字母）用于标头保护保护。

我不想在数据类型 typedef 中隐藏指针，所以我可能会写：

```
#ifndef SIGNAL_MANAGER_H_INCLUDED
#define SIGNAL_MANAGER_H_INCLUDED

typedef struct SignalDesc SignalDesc;

extern int createSignal(SignalDesc *sigdesc);

extern int destroySignal(void);

#endif /* SIGNAL_MANAGER_H_INCLUDED */ 
```

我不确定创建和销毁的接口是否正确，但这是另一个需要讨论的主题。我通常希望发现接口更像：

```
extern SignalDesc *createSignal(const char *name, int signum);
extern void destroySignal(SignalDesc *sigdesc); 
```

然后，实现文件`signal_manager.c`将定义结构类型并使用它；外部接口是通过使用指针的函数来实现的。

```
#include "signal_manager.h"
#include "signal_properties_data.h"

struct SignalDesc
{
    char                 *signalName;
    unsigned int          signalId;
    SignalPropertiesData *signalProperties;
}; 
```

需要类似的`signal_properties_data.h`清理：

```
#ifndef SIGNAL_PROPERTIES_DATA_H_INCLUDED
#define SIGNAL_PROPERTIES_DATA_H_INCLUDED

typedef enum {
  SIGNAL_DATA_INT_TYPE,
  SIGNAL_DATA_UNSIGNED_INT_TYPE,
  SIGNAL_DATA_FLOAT_TYPE,
     :
  SIGNAL_DATA_UNSPECIFIED_BASIC_TYPE
} eSignalBasicType;

typedef enum {
  SIGNAL_DATA_LIST_ARRAY_TYPE,
  SIGNAL_DATA_LIST_ADT_TYPE,
   :
   :
  SIGNAL_DATA_LIST_UNSPECIFIED_TYPE
} eSignalComplexType

typdef  union {
  eSignalBasicType signalBasicType;
  eSignalComplexType signalComplexType;
} eSignalType;

typedef struct {
  eSignalType signalType;
  unsigned int signalDataLen;
} SignalDataValueType;

/* Huge hole in types here - or is SignalValueDataType what you're after? */
typedef struct SignalPropertiesData SignalPropertiesData;

result_t setSignalType(..);
result_t getSignalType(..);
result_t setSignalData(..);
result_t getSignalData(..);
result_t setSignalDataLen(..);
result_t getSignalDataLen(..);

#endif  /* SIGNAL_PROPERTIES_DATA_H_INCLUDED */ 
```

这个修改后的标题还不是独立的。它没有定义`result_t`，所以它应该包含定义的标题。我假设`...`函数调用中的符号是“不想在这个问题中指定”，因为它在 C 中无效；在指定省略号之前，您必须有一个已知类型的参数。

从标头中的函数不清楚为什么标头的用户需要了解其中定义的类型。将标头视为将被共享的资源。它“属于”或描述文件（或一小组文件）的外部接口。它为用户提供了使用代码提供的设施所需的最少数据，但不会超过最低限度。您有时会发现一组实现工具的文件需要在它们之间共享私有标头以及其他代码（“客户”代码或“消费者”代码）使用的公共标头。

不透明类型的关键是消费者不需要知道结构的内部细节就能够使用指向结构类型的指针（请参阅[C 标准的哪个部分允许此代码编译？](https://stackoverflow.com/questions/12200096/which-part-of-the-c-standard-allows-this-code-to-compile)，[C 标准是否考虑一下这个头文件中有一种或两种`struct uperms_entry`类型吗？](https://stackoverflow.com/questions/11697705/does-the-c-standard-consider-that-there-are-one-or-two-struct-uperms-entry-typ)以及[如何在 C 中构造头文件以](https://stackoverflow.com/questions/276386/how-to-structure-includes-in-c/276588#276588)获得更多见解）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:22:04.313

我不确定我是否完全理解您的需求，但我认为您可以查看[WIN32 句柄](https://stackoverflow.com/questions/902967/what-is-a-windows-handle)以获取参考实现。

一个简短的示例是定义一个宏，让您可以像这样定义自定义句柄：

```
/* example.h */

#ifndef _EXAMPLE_H
#define _EXAMPLE_H

/* Define macro */
#define DECLARE_HANDLE(HandleName) typedef struct HandleName##Tag * HandleName

/* Declare some handles */
DECLARE_HANDLE(SomeHandle);
DECLARE_HANDLE(SomeOtherHandle);

#endif /* _EXAMPLE_H */

/* example.c */

#include "example.h"

struct SomeHandleTag {
    int foo;
};

struct SomeOtherHandleTag {
    int foo;
}; 
```

# python - jinja2模板的多个渲染？

> ID：12994028
> 
> 赞同：14
> 
> 时间：2012-10-21T00:57:42.800
> 
> 标签：python, jinja2

有没有办法用 jinja2 做到这一点？

```
template = Template("{{ var1 }}{{ var2 }}")
rendered1 = template.render(var1=5) # "5-{{ var2 }}"
rendered2 = Template(rendered1).render(var2=6) # "5-6" 
```

基本上，我希望能够对模板进行多次传递。当模板引擎在模板中发现一个不在上下文中的变量时，与其什么都不替换，不如保持模板变量不变？如果不是 jinja2，是否有任何其他 python 模板库可以做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-21T08:16:34.153

您可以使用[DebugUndefined](http://jinja.pocoo.org/docs/api/#jinja2.DebugUndefined)来保留失败的查找，作为环境参数的[未定义类型](http://jinja.pocoo.org/docs/api/#undefined-types)：`undefined``Template`

```
>>> from jinja2 import Template, DebugUndefined
>>> template = Template("{{ var1 }}-{{ var2 }}", undefined=DebugUndefined)
>>> rendered1 = template.render(var1=5) # "5-{{ var2 }}"
>>> print(rendered1)
5-{{ var2 }}
>>> rendered2 = Template(rendered1).render(var2=6) # "5-6"
>>> print(rendered2)
5-6 
```

# c++ - Visual Studio 2012，C++ cout 构建但不打开命令提示符并显示

> ID：12994032
> 
> 赞同：1
> 
> 时间：2012-10-21T00:58:17.677
> 
> 标签：c++, visual-studio-2012, cout

在我的 MacBook Pro 上通过 bootcamp 全新安装 Windows 7 64 位。

已安装 Visual Studio 2012。在适当的 .cpp 文件中：

```
#include <iostream>
using namespace std;

int main()
{
cout << "Hello World" << endl;
return 0;
} 
```

这构建成功，但我在任何地方都没有显示“Hello World”。也没有弹出命令提示符窗口。

我检查了配置中的链接器，并且“SUBSYSTEM”设置为“CONSOLE”。还有什么可能吗？

# c# - 超过最大序列化深度（被序列化的对象是否有循环引用？）

> ID：12994038
> 
> 赞同：1
> 
> 时间：2012-10-21T00:59:37.937
> 
> 标签：c#, mongodb

我正在尝试保存这个简单的类，但 MongoDB 不接受。

```
public class CredentialSet
{
    public CredentialSet()
    {
        this.Items = new ObservableCollection<CredentialSet>();
    }
    [BsonId]
    public ObjectId _id { get; set; }
    public string Title { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    public string WebSite { get; set; }
    public string Notes { get; set; }
    public int Owner { get; set; }
    public DateTime LastUpdate { get; set; }

    public ObservableCollection<CredentialSet> Items { get; set; }

    public CredentialSet parent { get; set; }
} 
```

***超出最大序列化深度（被序列化的对象是否有循环引用？）。***

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-12T11:04:41.487

我以这种方式解决了我们核心项目中的问题。

```
'
using Newtonsoft.Json;
using AutoMapper;

var stringContent = JsonConvert.SerializeObject(_mapper.Map<DataDTO>(newdata), new JsonSerializerSettings { ReferenceLoopHandling = ReferenceLoopHandling.Ignore }).ToString();

 _mongoService.Save(JsonConvert.DeserializeObject<DataDTO>(stringContent));

//mongo service save method
public async void Save(DataDTO dataDTO)
{
  await observationCollection.InsertOneAsync(dataDTO));
}        
' 
```

# c++ - 无法通过 boost::phoenix::function 调用带有参数的惰性 lambda 函数

> ID：12994040
> 
> 赞同：2
> 
> 时间：2012-10-21T00:59:55.863
> 
> 标签：c++, lambda, parameter-passing, lazy-evaluation, boost-spirit

我尝试 `boost::phoenix::function`使用带参数的 lambda 函数进行调用，但失败了。如果我以这种方式不带参数调用它：

```
const auto closure = [](){
    cout<< "test" << endl;
};

typedef decltype(closure) ClosureType;
const boost::phoenix::function<ClosureType> lazyFunc (std::move(closure));
lazyFunc()(); 
```

一切都很好。但是当我声明至少一个 lambda 参数时：

```
const auto  closure = [](int& param)  { cout<<"Test" << param << endl; };

typedef decltype(closure) ClosureType;
const boost::phoenix::function<ClosureType> lazyFunc (std::move(closure));
lazyFunc(arg1)(a); 
```

[编译失败， boost::result_of](http://www.boost.org/doc/libs/1_57_0/boost/utility/result_of.hpp)内部有大量堆栈跟踪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:21:33.450

假设错误指向 Boost.ResultOf 内部的某个深处（如[本演示](http://liveworkspace.org/code/1243deeb57fcb250e30fa80a12382d7f)所示），那将是因为 lambda 表达式的闭包类型没有实现 ResultOf 协议。

一个稍微简单的解决方法是定义`BOOST_RESULT_OF_USE_DECLTYPE`，它`boost::result_of`通过使用`decltype`来计算返回类型来绕过它自己的 ResultOf 协议。默认情况下不启用此功能，因为没有多少编译器（在 Boost 1.51 发布时）足够符合此功能的工作；计划为那些可以在 1.52 中处理它的编译器自动定义这个符号（通过 Boost.Config）。

[这](http://liveworkspace.org/code/f2fa417f46f778a7ff9ef8226a6d6d53)是一个演示如何使用带有 -powered 的`decltype`Boost.Phoenix `boost::result_of`。我不得不将其更改为`int&`，`int const&`因为`i`显然被转发为`const int`. 这似乎是一个基本的限制`boost::phoenix::function`，使用`boost::phoenix::val`没有这个问题。

# java - 如何从 Primefaces 的子表中调用方法？

> ID：12994045
> 
> 赞同：0
> 
> 时间：2012-10-21T01:01:02.947
> 
> 标签：java, jsf, primefaces

我使用 primefaces 的时间不长，我发现我不能使用 a`<p:commandButton />`因为它无法达到方法，方法没问题，我在表（和子表）之外尝试了它，它在那里完美运行（一切在表单内），问题是我需要用户能够选择所有子表，所以，我想也许有一个可能的按钮，但似乎子表不允许这样做，任何其他方式我能做到吗？或者也许我必须使用另一种方式从子表中调用我的方法，有人知道吗？

谢谢

我的一些代码

```
<h:form>
    <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />  
    <p:dataTable id="case" var="ticket" value="#{CaseBean.selectedCase.tickets}">
        <p:columnGroup>
            <p:row>
                <p:column> Action:</p:column>
                <p:column>
                    <!-- This doesn't work, removed. -->
                    <p:commandButton value="Aprove" action="#{CaseBean.acept()}">
                    </p:commandButton>
                </p:column>
            </p:row>
        </p:columnGroup>

        <p:subTable var="detail" value="#{ticket.detail}">
            <f:facet name="header">
                Resume:
            </f:facet>
            <!-- some data... -->
            <p:column>
                <!-- doesn't work either -->
                <p:commandButton value="Aprove" action="#{CaseBean.aceptTicket()}">
                </p:commandButton>
            </p:column>
<!-- show my data --> 
```

该表运行良好，它显示了所有数据，日志文件没有显示任何错误，因此，当我尝试将我的 commandButton 从表中写入它时，它运行良好，如果我不能将它写在子表中它可以，但是，我怎么能把它写在表里？它也没有出现在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:23:24.653

你欢迎:) 但如果我是你我不会使用子表，我会考虑另一种解决方案..也许我会这样做，我会使用两个不同的数据表，第一个包含父列表，第二个包含子列表列表元素，所做的每个选择都会触发第二个表的更新...我在我的 IDE 上尝试过，它工作得很好

```
<h:form id="form">
<p:dataTable var="cas" value="#{beanCase.myListOfCase}"
    selection="#{beanCase.selectedCase}" rowKey="#{cas.idCase}"
    selectionMode="single">
    <p:ajax event="rowSelect" update=":form:TicketTable" />
    <p:column headerText="Id Case">
        <h:outputText value="#{cas.idCase}" />
    </p:column>
    <p:column headerText="Case Name ">
        <h:outputText value="#{cas.caseName}" />
    </p:column>
    <p:column headerText="Case Detail">
        <h:outputText value="#{cas.caseDetail}" />
    </p:column>
    <p:column headerText="Action">
        <p:commandButton value="Accept Case" update=":form:TicketTable"></p:commandButton>
    </p:column>
</p:dataTable>
<p:dataTable id="TicketTable" var="ticket"
    value="#{beanCase.selectedCase.tickets}">
    <p:column headerText="Ticket Number">
        <h:outputText value="#{ticket.idTicket}" />
    </p:column>
    <p:column headerText="Ticket Details">
        <h:outputText value="#{ticket.labelTicket}" />
    </p:column>
    <p:column headerText="show">
        <h:outputText value="#{ticket.show}" />
    </p:column>
    <p:column headerText="this show is brought to you by">
        <h:outputText value="#{ticket.sponsor}" />
    </p:column>
    <p:column headerText="Make a Reservation">
        <p:commandButton value="Buy" action="#{beanCase.buyTicket()}">
            <f:setPropertyActionListener value="#{ticket}"
                target="#{beanCase.selectedTicket}" />
        </p:commandButton>
    </p:column>
</p:dataTable> 
```

在此之前，您必须为案例和工单创建数据模型类

```
public class CaseDataModel extends ListDataModel<Case> implements
    SelectableDataModel<Case> {
CaseDAO caseDAO = new CaseDAO();

public CaseDataModel() {
}

public CaseDataModel(List<Case> cases) {
    super(cases);
}

@Override
public Case getRowData(String arg0) {
    List<Case> listOfMyObjet = (List<Case>) caseDAO.findAll();
    for (Case obj : listOfMyObjet) {
        if (String.valueOf(obj.getIdCase()).equals(arg0))
            ;
        return obj;
    }
    return null;
}

@Override
public String getRowKey(Case arg0) {
    return String.valueOf(arg0.getIdCase());
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:15:37.300

第一个 columnGroup 未呈现，因为在您的第一行中，列数为 2，一个用于“action”，另一个用于 commandButton，而在您的子表中，您只使用了两行，一个用于“Resume”，其他仅包含一个用于另一个命令按钮。每行的列数应该相同，因此您必须使用**colspan**或**rowspan**来确保这一点。至于其余的使用**DataTable**来完成这项工作，我不明白你到底想做什么，但我都假设你想从 dataTable 中显示的对象列表中选择 myObject。因此，为了实现这一点，**UidataTable**必须将一个对象返回给支持的 Bean。

```
public class myObjectDataModel extends ListDataModel<myObject> implements SelectableDataModel<myObject> {    

    public myObjectDataModel() {  
    }  

    public myObjectDataModel(List<myObject> data) {  
        super(data);  
    }  

    @Override  
    public myObject getRowData(String rowKey) {         
       List<myObject> listOfMyObjet = (List<myObject>) yourDao.getListOfmyOjects();//get your list

        for(myObject obj : listOfMyObjet) {  
            if(obj.getIdObject().equals(rowKey))  
                return obj;  
        }  

        return null;  
    }  

    @Override  
    public Object getRowKey(myObject obj) {  
        return obj.getIdObject();  
    }
} 
```

支持的bean：

```
public class tableBean {
    private List<myObject> _Objects;
    private myObjectDataModel myListOfObjects;
    private myObject selectedObject;
    //getters and setters
    public tableBean(){
        myObjectDataModel = new myObjectDataModel(_Objects);
    }
    //...
} 
```

xhtml:

```
<p:dataTable id="table" var="case"
    value="#{tableBean.myObjectDataModel}"
    selection="#{tableBean.selectedObject}" selectionMode="single"
    rowKey="#{case.IdObject}">
    <p:column>

        <p:commandButton value="
    Aprove" action="#{tableBean.someMethod()}">
        </p:commandButton>
    </p:column>

</p:dataTable> 
```

并确保使用 Ajax — commandButton 更新属性，或者`<p:ajax>`— 刷新您的 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:21:48.870

尝试`p:columnGroup`从您的 JSF 页面中删除 。您不需要它（这可能是您的问题的原因）。可以这样想：一个表存在行，行存在列。;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T11:22:57.120

`#{CaseBean}`必须在视图范围内才能使其正常工作，或者如果您想保持它的请求范围，则必须`#{CaseBean.selectedCase.tickets}`在（后）构造函数中准备一些请求参数，以便它与以前*完全相同*在显示表格期间。

当表单被提交时，JSF 即会在表格上重复一遍，以便找到负责该动作的命令组件。但是，如果 bean 是请求范围的，并且后面的值`#{CaseBean.selectedCase}`or`#{CaseBean.selectedCase.tickets}`与显示表期间的值不同，那么 JSF 将无法识别调用该操作的按钮*。*

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 4 点适用于您

# java - 2 人掷硬币

> ID：12994048
> 
> 赞同：2
> 
> 时间：2012-10-21T01:02:02.963
> 
> 标签：java, random, coin-flipping

我正在尝试创建一个 Java 程序来翻转两个硬币，看看谁赢得了硬币翻转。它提示用户进行多次硬币翻转。如果第一个玩家有正面，第二个玩家有反面，那么它应该输出“Player 1 Wins!” 反之亦然。如果两个玩家都有正面或反面，那么它应该输出“Tie.”。最后，它应该跟踪每个玩家的获胜次数，并在所有掷硬币后输出获胜率。感觉就像掷硬币的部分一样有效，但是当它显示每个玩家的最终分数时，分数永远不会正确。任何人都可以发现问题吗？

```
package coinflip;

import java.util.Scanner;

public class CoinFlip {

    public static void main(String[] args) {
        int flips;
        int flipscount=0;
        int p1score=1;
        int p2score=1;

        Scanner scan = new Scanner(System.in);
        System.out.println("How many flips: ");
        flips=scan.nextInt();

        CoinMethods Coins = new CoinMethods();

        while (flipscount!=flips)
        {
            flipscount++;

            Coins.flip();

            System.out.println(""+Coins.result()+"");

            if (Coins.p1isHeads()&&Coins.p2isTails())
            p1score++;

            if (Coins.p1isTails()&&Coins.p2isHeads())
            p2score++;
        }

        System.out.println("Player 1 won "+p1score+" times!");
        System.out.println("Player 2 won "+p2score+" times!");
    }
} 
```

该类`CoinMethods`看起来像：

```
package coinflip;

public class CoinMethods {

    private final int HEADS=0;
    private final int TAILS=1;
    private int p1face, p2face;

    public CoinMethods ()
    {
        flip();
    }

    public void flip()
    {
        p1face=(int) (Math.random()*2);
        p2face=(int) (Math.random()*2);
    }

    public boolean p1isHeads (){
        return p1face==HEADS;
    }

    public boolean p2isHeads (){
        return p2face==HEADS;
    }

    public boolean p1isTails (){
        return p1face==TAILS;
    }

    public boolean p2isTails (){
        return p2face==TAILS;
    }

    public String result()
    {
        String results;
        if (p1face==HEADS&&p2face==TAILS)
            {results="Player 1 wins!";
                }
        else
            if ((p1face==HEADS&&p2face==HEADS)||(p1face==TAILS&&p2face==TAILS))
            {results="Tie!";
               }
            else
            {results="Player 2 wins!";
                }

        return results;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:09:35.200

在我看来，您需要将分数初始化为零而不是一：

```
int p1score=0;
int p2score=0; 
```

# c++ - 使用栈存储对象

> ID：12994049
> 
> 赞同：0
> 
> 时间：2012-10-21T01:02:02.883
> 
> 标签：c++, stack

我正在做一个程序，我需要将对象存储在堆栈中。我将堆栈定义为这样的模板类：

```
template < class T >
class stackType
{
private:
    int maxStackSize;
    int stackTop;
    T *list;           // pointer to the array that holds the stack elements
public:
    stackType( int stackSize );  // constructor
    ~stackType();                // destructor
    void initializeStack();
    bool isEmptyStack();
    bool isFullStack();
    void push( T newItem );
    T top();
    void pop();
}; 
```

这是我的课：

```
class Matrix_AR
{
public:
    float **Matrix;        // Matrix as a pointer to pointer
    int rows, columns;     // number of rows and columns of the matrix

// class function
    Matrix_AR();
    Matrix_AR( int m, int n ); // initialize the matrix of size m x n
    void inputData( string fileName ); // read data from text file
    void display(); // print matrix
}; 
```

但是，当我声明这样的函数时

```
void myfunction( stackType<Matrix_AR>& stack )
{
    Matrix_AR item1, item2, item3;

    stack.push( item1 );
    stack.push( item2 );
    stack.push( item3 );
} 
```

我一直收到错误。我试图修复它五个小时，但仍然无法弄清楚。谁能帮忙，拜托！！！

```
Undefined symbols for architecture x86_64:
      "Matrix_AR::Matrix_AR()", referenced from:
      myfunction(stackType<Matrix_AR>&, char&, bool&)in main.o
ld: symbol(s) not found for architecture x86_64 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:04:33.233

似乎您没有定义默认构造函数。如果您想要一个快速的解决方案，只需像这样声明它：

```
// class function
Matrix_AR() {}
Matrix_AR( int m, int n ); // initialize the matrix of size m x n
void inputData( string fileName ); // read data from text file
void display(); //... 
```

发布的错误是针对默认构造函数的，但如果您没有定义其他函数，您也会得到类似的错误。您应该有一个单独的 .cpp 文件，其中包含所有成员函数的定义。

```
Matrix_AR::Matrix_AR()
{
...
}

Matrix_AR::Matrix_AR( int m, int n )
{
...
}

void Matrix_AR::inputData( string fileName )
{
...
}

etc....... 
```

# ruby - ZeroMQ 在互联网上安全

> ID：12994050
> 
> 赞同：8
> 
> 时间：2012-10-21T01:02:15.117
> 
> 标签：ruby, sockets, ssl, zeromq

我一直在使用 zeroMQ，我希望能够通过 Internet 安全地连接。我在 ruby​​ 中，可以使用 SSL 和/或某种 shh 连接，但找不到任何有关如何执行此操作的示例。

我找到了这个旧的 stackoverflow 链接，[zeromq 如何与 SSL 一起工作？](https://stackoverflow.com/questions/5391435/how-does-zeromq-work-together-with-ssl)说他们正在研究某种安全性，但那是一年前的事了，我找不到任何新的参考资料。

即使这没有内置到 zeroMQ 中，我也会假设有一些方法可以使用 OpenSSL 或类似的东西来设置它。

注意：如果您想要安全传输，zeroMQ 网站会提到使用 VPN 或其他东西。我不想使用 VPN。一定会有更好的办法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:00:31.087

类似于 VPN，但更容易设置：

*   加密隧道`socat`

让我们让每个 zeromq 端本地连接到`socat`，并且两个`socat`s 使用加密通道相互连接。

一些链接：[[1]](http://www.blackbytes.info/2012/07/socat-cheatsheet/)，[[2]](http://www.dest-unreach.org/socat/doc/socat-openssltunnel.html)，[[3]](https://stackoverflow.com/questions/5391435/how-does-zeromq-work-together-with-ssl)，[[4]](http://www.dest-unreach.org/socat/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-01T15:10:52.977

只是想补充一点，自从提出问题以来，ZMQ 团队从 ZeroMQ v4.0.0 开始开发了**[CurveZMQ 协议](http://curvezmq.org/)**，它是基于 CurveCP 和 NaCl 的 ZeroMQ 身份验证和加密协议 - 快速、安全的椭圆曲线加密。这允许加密的 ZMQ 消息交换，这在互联网上应该是安全的。

有关更多详细信息，请参阅[使用 ZeroMQ 安全性第 1 部分](http://hintjens.com/blog:48)。当时添加的一些功能是：

> 一种新的有线协议 ZMTP 3.0，它为所有 ZeroMQ 连接添加了安全握手。
> 
> 一种新的安全协议 CurveZMQ，它通过 TCP 连接在两个 ZeroMQ 对等点之间实现“完美的前向安全”。我将在下面解释 CurveZMQ。
> 
> ZMTP 的一组安全机制：NULL、PLAIN 和 CURVE，每个都由它们自己的 RFC 描述。NULL 本质上是我们以前的。PLAIN 允许简单的用户名和密码验证。CURVE 实现了 CurveZMQ 协议。[...]

对于 Internet 上的安全消息传递，人们会寻求实现，例如*Ironhouse 模式*。有关说明，请参见[第 2 部分](http://hintjens.com/blog:49#toc6)。

这个协议肯定有 Ruby 实现，但我没有寻找它们。

如果您正在寻找 Python 实现，可以查看以下资源：

*   [https://github.com/zeromq/pyzmq/tree/master/examples/security](https://github.com/zeromq/pyzmq/tree/master/examples/security)
*   [https://developer.ibm.com/tutorials/se-distributed-apps-zeromq-part2/](https://developer.ibm.com/tutorials/se-distributed-apps-zeromq-part2/)

# php - PHP session_start，使用'UTF-8 without BOM'显示日文字符而不弄乱标题

> ID：12994055
> 
> 赞同：0
> 
> 时间：2012-10-21T01:03:54.003
> 
> 标签：php, utf-8, notepad++

好的，所以我正在使用 Notepad++ 编写一个包含英文和日文字符的网页。该网站还使用 PHP 会话。

在绞尽脑汁想知道为什么会出现此错误之后：

```
'Cannot send session cache limiter - headers already sent' 
```

我意识到，因为我使用的是“UTF-8 编码”，所以不可见的 BOM 输出搞砸了我的 PHP 标头。

所以我在记事本++中切换到'在没有BOM的UTF-8中编码'。现在我的 PHP 会话工作了，它不会抱怨标题，但现在日文字符不能正确显示在网站上（尽管它们在 Notepad++ 中看起来很好）。我用一个问题换了另一个问题。

如何在我的网站上正确显示日文字符，同时仍然避免在 PHP session_start 之前发送输出的 UTF-8 编码问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:08:10.180

尝试添加`addDefaultCharset UTF-8`到`.htaccess`应用程序根目录中的文件

# algorithm - 找到使用加法组合的最佳方法，以在有限数量的加法中获得最大的和

> ID：12994056
> 
> 赞同：0
> 
> 时间：2012-10-21T01:04:26.160
> 
> 标签：algorithm, math, computer-science, theory, combinations

我有一点问题，我有一组加起来为 X 的总和，如下所示：

答：i + j + k = X

B：t + z = X

C：z + z = X

D：j + j + k + k = X

这些总和可能或多或少，我在这里给出 4，但可能有 N 个。

我的求和数有限，例如我有

i 的 12 个，z 的 35 个，j 的 12 个，k 的 18 个，t 的 21 个

我需要的是一种算法，它将确定使用这些组合的最佳方式，以便我最终得到最完整的 X

所以在上面的例子中使用：

组合C的17个，组合B的1个，组合A的12个，总共30个X的和，72个被加数

比使用更糟糕：

组合 B 21 个，组合 C 7 个，组合 D 6 个，总共 34 个 X 和，使用了 80 个和数

编辑：

进一步解释

使用组合 B 的 21 将“花费” 21 t 和 21 z 给我们留下： i 的 12，z 的 14，j 的 12，k 的 18，t 的 0

使用组合 C 的 7 将“花费” z 的 14（因为它使用 z 的 2 个和数来实现）给我们留下：i 的 12、z 的 0、j 的 12、k 的 18、t 的 0

使用组合 D 的 6 将花费 j 的 12 和 k 的 12（因为它使用它们两次）给我们留下： i 的 12，z 的 0，j 的 0，k 的 6，t 的 0

我们不能再进行加起来为 X 的组合，因此算法结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:10:01.093

我写了一个程序来暴力破解这个问题。

对于您的示例数据，哪个作为最佳组合给出：

> 组合 A 1 个，组合 B 19 个，组合 C 7 个，组合 D 5 个，总共 32 个 X 和，75 个被加数

代码虽然不是那么整洁而且可能不正确：

```
# Consider encoding the states
#{i,j,k}
#{i,z}
#{z,z}
#{j,j,k,k}
#as
#          i   z   j   k
limits =  (21, 35, 12, 18)
sets   = [(1,0,1,1), #
          (1,1,0,0), #
          (0,2,0,0), #
          (0,0,2,2), #
          ]

from heapq import heappush, heappop

def sub(A,B): return tuple(x - y for x,y in zip(A,B))

H = [(0,limits,[0]*len(sets))]
B = []
#X = 0
while H:
    #X += 1
    C, available, counts = heappop(H)
    #if X%1000 == 0: 
    #print C, available, counts
    if not any(all(not x > 0 for x in sub(available, s)) for s in sets):
        E = -C, sum(available), available, counts
        if E not in B:
            #print "found:", E
            if len(B) > 0:
                #print "best:", B[0]
                pass
            heappush(B, E)
    for i,s in enumerate(sets):
        diff = sub(available, s)
        if all(x > 0 for x in diff):
            counts_ = counts[:]
            counts_[i] += 1
            E = (C+1, diff, counts_)
            if E not in H:
                heappush(H, E)

a,b,c,d = heappop(B)

print "%u of combination A, %u of combination B, and %u of combination C, %u of combination D, total %u sums of X, %u summands used" % tuple(d+[-a, sum(limits)-sum(c)]) 
```

编辑：

将修改后的问题输入该程序后，它会在 9 秒内生成：

> 组合A的11个，组合B的20个，组合C的7个，组合D的0个，总共38个X和，87个被加数

修改后问题的编码：

```
#         i  z  j  k  t
limits = (12,35,12,18,21)
sets   = [(1,0,1,1,0), # {i,j,k}
          (0,1,0,0,1), # {t,z}
          (0,2,0,0,0), # {z,z}
          (0,0,2,2,0), # {j,j,k,k}
          ] 
```

# java - JPQL 使用日期时间的日期部分查询实体的 java.util.Date 字段

> ID：12994058
> 
> 赞同：1
> 
> 时间：2012-10-21T01:04:46.263
> 
> 标签：java, mysql, jpql

我有一个带有日期字段的实体（java.util.Date）。通常日期保存为例如`2012-10-19 21:29:03.000`。我的数据库是 MySQL。

现在我需要通过 JPQL 查询数据库，严格使用日期部分，即`2012-10-19`. 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:55:13.570

这可以通过在设置参数时给出 TemporalType 来完成：

```
Date param ...
Query q = em.createQuery("SELECT a FROM EntityA a WHERE a.someDate > :param");
q.setParameter("param", param, TemporalType.DATE); 
```

# r - 降雪的 R 并行计算 - 从不同的工作人员写入文件

> ID：12994063
> 
> 赞同：3
> 
> 时间：2012-10-21T01:06:20.300
> 
> 标签：r, output, snowfall

我正在使用 snowfall 1.84 包进行并行计算，并希望每个工作人员在计算期间将数据写入自己的单独文件。这可能吗 ？如果是这样怎么办？

我正在使用“SOCK”类型的连接，例如 sfInit(parallel=TRUE, ...,type="SOCK" )，并且希望代码独立于平台（unix/windows）。

我知道可以使用 sfInit 中的“slaveOutfile”选项来定义写入日志文件的文件。但这是出于调试目的，所有从属/工作人员必须使用相同的文件。我需要每个工人都有自己的输出文件！！！

我需要编写的数据是大型数据帧，而不是简单的诊断消息。这些数据帧需要由从属进程输出，不能发回主进程。任何人都知道我怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T15:18:21.193

一个简单的解决方案是使用`sfClusterApply`执行一个函数，在每个工作人员上打开一个不同的文件，将生成的文件对象分配给一个全局变量，以便您可以在后续并行操作中写入它：

```
library(snowfall)
nworkers <- 3
sfInit(parallel=TRUE, cpus=nworkers, type='SOCK')
workerinit <- function(datfile) {
  fobj <<- file(datfile, 'w')
  NULL
}
sfClusterApply(sprintf('worker_%02d.dat', seq_len(nworkers)), workerinit)

work <- function(i) {
  write.csv(data.frame(x=1:3, i=i), file=fobj)
  i
}
sfLapply(1:10, work)
sfStop() 
```

# jquery - 显示当前页面的菜单

> ID：12994066
> 
> 赞同：0
> 
> 时间：2012-10-21T01:07:18.027
> 
> 标签：jquery, html, css, ajax

我尝试制作一个显示您正在访问的当前页面的菜单。我使用 Ajax，所以网站不会重新加载。我也想使用父子函数。我试过这个：

```
$('ul li a').click(function() {
    $(this).parent('ul').children('li a').removeClass('current');
    $(this).addClass('current');
}); 
```

点击功能的第一行应该从所有链接中删除“当前”类，但无论如何它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:03:17.953

将第一行更改为：

`$(this).closest('ul').find('li a').removeClass('current')`

这是一个小提琴：http: [//jsfiddle.net/GPbnE/](http://jsfiddle.net/GPbnE/)

# dynamic - .NET 动态决定调用类似的类？

> ID：12994070
> 
> 赞同：0
> 
> 时间：2012-10-21T01:07:50.703
> 
> 标签：dynamic, reflection

.NET 4.5 上的 C#：

```
 public Interface IMyInterface
    {
    public string DoSomething( string input1 )
    }

    public MyClass1 : IMyInterface
    {
    public string DoSomething( string input1 )
    {
    return "1";
    }
    }

    public MyClass2 : IMyInterface
    {
    public string DoSomething( string input1 )
    {
    return "2";
    }
    } 
```

在运行时，我想检测宿主环境，设置某种“全局”，然后基于全局总是实例并使用 MyClass1 或 MyClass2。我不想有一个“MyClass”，然后在里面做很多案例逻辑来检测环境。

这样做的好模式或做法是什么？这真的是Dynamics的好地方吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:41:08.800

好像你需要使用工厂。在 Factory 类中创建一个方法以返回 MyClass 对象。保持方法的返回类型为`IMyInterface`. 在该方法中，您可以执行托管逻辑，并根据托管逻辑的输出，实例化适当的类并返回对对象的引用。

# .net - 如何在 VB.NET 中制作按钮允许用户选择文件？

> ID：12994072
> 
> 赞同：2
> 
> 时间：2012-10-21T01:08:11.053
> 
> 标签：.net, wpf, vb.net

我正在 Visual Basic Express Edition 2010 中制作 Crypter，但遇到了一些问题。我正在尝试使用户单击 GUI 中的按钮，并允许他们选择要 Crypt 的文件。有没有人对如何做到这一点有任何想法？这是我最初用来制作它的代码，但它不起作用:(感谢所有帮助！

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles Button1.Click
    With OpenFileDialog1
        .FileName = ""
        .Filter = "Executables (*.exe)|*.exe|All files (*.*)|*.*"
        .Title = "The Justice Crypter"
        .ShowDialog()
        TextBox1.Text = .FileName
        infectedfile = TextBox1.Text
    End With
End Sub 
```

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:28:30.673

OpenFileDialog 是对我有用的 Win32 控件的 WPF 包装器。

```
Class MainWindow 
    Dim WithEvents openFileDialog1 As New Microsoft.Win32.OpenFileDialog
    Private Sub Button1_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button1.Click
        With OpenFileDialog1
            .FileName = ""
            .Filter = "Executables (*.exe)|*.exe|All files (*.*)|*.*"
            .Title = "The Justice Crypter"
            .ShowDialog()
            TextBox1.Text = .FileName
            'infectedfile = TextBox1.Text
        End With
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:24:53.847

`OpenFileDialog1`一片空白。
您需要将其初始化为`New OpenFileDialog()`.

# entity - 实体系统 - 将组件存储在管理器中与实体中

> ID：12994073
> 
> 赞同：7
> 
> 时间：2012-10-21T01:08:14.470
> 
> 标签：entity, components

像许多有抱负的设计师和程序员一样，我偶然发现了实体/组件系统设计，包括关于该主题的各种优秀文章和一些工作实现。我和许多其他人一样，自己承担了实施这样一个系统的责任。

从概念上讲，实体是一组组件，它们只不过是由一系列系统处理的数据包。所以对我来说，一个实体对象可以用来保存与之关联的所有组件似乎是合乎逻辑的，但其他人的工作却不然。在我所有的研究中，似乎几乎普遍认为实体只不过是一个 ID，您必须不惜一切代价避免落入面向对象思维的陷阱。他们建议将组件存储在管理器中，但不直接解决这种设计的优点。

实体和管理器中保存的两种设计、组件不会产生相同的最终结果吗？如果我误解/遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:33:55.113

我绝不是实体组件系统方面的专家，但这是我对这个主题的看法。

我认为您永远不应该直接访问组件。如果这样做，那么您的组件开始相互依赖，然后，当您决定要更改一个组件的行为方式时，现在必须修复依赖于您要更改的组件的所有其他组件。

为避免此问题，组件之间不应相互了解任何信息。他们每个人都有一份工作，应该只专注于那份工作。如果需要来自另一个组件的某些数据（例如，您可能需要位置数据），您应该向另一个系统请求数据，或者开发一个消息传递系统。

当然，一旦你真正开始编码，很难 100% 地遵守这条规则，但你明白了。

避免在实体中存储组件的另一个原因是速度。当组件包含在系统中时（所有相似的组件都存储在一起），您可以快速处理大量组件。您有机会设置它们可能被重用的任何数据，循环并处理每个组件，然后释放任何重用的数据。不仅如此，每个系统可能（应该）能够在单独的线程上运行，这使您可以轻松利用多个内核。

同样，在实践中，这并不总是 100% 正确，但这就是它的理论。

总之，将组件保留在系统中而不是实体中可以减少直接访问组件的诱惑，并允许在系统中进行批量更新。我希望这会有所帮助，如果您有任何问题，请告诉我。

# sql - Active Record 查询导致“，”附近的 SQLException 语法错误

> ID：12994080
> 
> 赞同：3
> 
> 时间：2012-10-21T01:09:39.167
> 
> 标签：sql, ruby-on-rails, activerecord, sqlite

我正在尝试显示具有属性值的表 STUDENTS 的所有此类行，例如`COURSE IN`一组给定值，例如`'MS', 'PhD'`.

我在 students_controller.rb 文件中使用`params`. 我尝试使用来运行 Active Record 查询`where`来完成这项工作：

```
@all_courses = ['MS', 'PhD', 'BA', 'MSc']

@students = Student.where("course IN :courses" , {:courses => params.has_key?(:courses) ? params[:courses].keys : @all_courses}) 
```

但我收到以下错误：

```
SQLite3::SQLException: near ",": syntax error: SELECT "students".* FROM "students"  WHERE (course IN 'MS', 'PhD', 'BA', 'MSc') 
```

我认为错误可能是由于缺少 ; 在 Active Record 生成的 SQL 查询结束时，但我无法做任何事情来获取最后的分号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T01:16:13.050

您需要使用括号：`"course IN (:courses)"`

# ios5 - iFrameExtractor 播放器没有声音

> ID：12994087
> 
> 赞同：1
> 
> 时间：2012-10-21T01:12:16.520
> 
> 标签：ios5, ffmpeg

我已经用ios5.1成功构建了ffmpeg和iFrameExtractor，但是当我播放视频时，没有声音

```
// Register all formats and codecs
avcodec_register_all();
av_register_all();
avformat_network_init();

if(avformat_open_input(&pFormatCtx, [@"http://somesite.com/test.mp4" cStringUsingEncoding:NSASCIIStringEncoding], NULL, NULL) != 0) {
    av_log(NULL, AV_LOG_ERROR, "Couldn't open file\n");
    goto initError;
} 
```

日志是

```
[swscaler @ 0xdd3000] No accelerated colorspace conversion found from
 yuv420p to rgb24\. 2012-10-22 20:42:47.344 iFrameExtractor[356:707]
 video duration: 5102.840000 2012-10-22 20:42:47.412
 iFrameExtractor[356:707] video size: 720 x 576 2012-10-22 20:42:47.454
 iFrameExtractor[356:707] Application windows are expected to have a
 root view 
```

这是我的 ffmpeg 0.11.1 的配置文件：

```
#!/bin/tcsh -f

rm -rf compiled/*

./configure \
--cc=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc \
--as='/usr/local/bin/gas-preprocessor.pl /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc' \
--sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk \
--target-os=darwin \
--arch=arm \
--cpu=cortex-a8 \
--extra-cflags='-arch armv7' \
--extra-ldflags='-arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk' \
--prefix=compiled/armv7 \
--enable-cross-compile \
--enable-nonfree \
--disable-armv5te \
--disable-swscale-alpha \
--disable-doc \
--disable-ffmpeg \
--disable-ffplay \
--disable-ffprobe \
--disable-ffserver \
--enable-decoder=h264 \
--enable-decoder=svq3 \
--disable-asm \
--disable-bzlib \
--disable-gpl \
--disable-shared \
--enable-static \
--disable-mmx \
--disable-neon \
--disable-decoders \
--disable-muxers \
--disable-demuxers \
--disable-devices \
--disable-parsers \
--disable-encoders \
--enable-protocols \
--disable-filters \
--disable-bsfs \
--disable-postproc \
--disable-debug 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:23:54.090

因此，假设您确实有如下代码块，您如何处理音频，您必须使用其中一个音频 api 来处理它，如果您主要处理已知类型，则 audioQueues 可能是最简单的。

首先在您的初始化中从流中获取音频信息

```
// Retrieve stream information
    if(av_find_stream_info(pFormatCtx)<0)
        return ; // Couldn't find stream information

    // Find the first video stream
    videoStream=-1;
    for(int i=0; i<pFormatCtx->nb_streams; i++) {
        if(pFormatCtx->streams[i]->codec->codec_type==AVMEDIA_TYPE_VIDEO)
        {
            videoStream=i;
                   }

        if(pFormatCtx->streams[i]->codec->codec_type==AVMEDIA_TYPE_AUDIO)
        {
            audioStream=i;
            NSLog(@"found audio stream");
        }

    }

Then later in your processing loop do something like this.

 while(!frameFinished && av_read_frame(pFormatCtx, &packet)>=0) {
        // Is this a packet from the video stream?
        if(packet.stream_index==videoStream) {
            // Decode video frame
              //do something with the video.

        }
         if(packet.stream_index==audioStream) {
            // NSLog(@"audio stream");

             //do something with the audio packet, here we simply add it to a processing
             queue to be handled by another thread.

             [audioPacketQueueLock lock];
             audioPacketQueueSize += packet.size;
             [audioPacketQueue addObject:[NSMutableData dataWithBytes:&packet length:sizeof(packet)]];
             [audioPacketQueueLock unlock]; 
```

要播放音频，您可以查看一些示例

[https://github.com/mooncatventures-group/FFPlayer-beta1/blob/master/FFAVFrames-test/AudioController.m](https://github.com/mooncatventures-group/FFPlayer-beta1/blob/master/FFAVFrames-test/AudioController.m)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T15:19:44.523

这里没有足够的信息。

例如，您要打开什么网址？

日志中有消息的地方。我知道使用 0.11 版您会收到一些关于您的警告，但不包括 network_init，但这不会阻止它工作。在以前的版本中，有些事情发生了变化，即。您曾经能够附加 ?tcp 以指定 ffmpeg 正在使用 tcp，但现在必须在字典中完成。

如果可能，请提供系统日志和构建日志。

这是我们的一个应用程序中的一个示例

```
avcodec_register_all();
        avdevice_register_all();
        av_register_all();
        avformat_network_init();

        const char *filename = [url UTF8String];
        NSLog(@"filename = %@" ,url);
       // err = av_open_input_file(&avfContext, filename, NULL, 0, NULL);
        AVDictionary *opts = 0;

        if (usesTcp) {
            av_dict_set(&opts, "rtsp_transport", "tcp", 0);
            }

         err = avformat_open_input(&avfContext, filename, NULL, &opts);
        av_dict_free(&opts);
        if (err) {
            NSLog(@"Error: Could not open stream: %d", err);

            return nil;
        }
        else {
            NSLog(@"Opened stream");
        } 
```

# google-app-engine - 使用 Google App Engine 代理服务器获取 RestFull 网络服务

> ID：12994091
> 
> 赞同：0
> 
> 时间：2012-10-21T01:13:06.750
> 
> 标签：google-app-engine

嗨，我是 Google App Engine 的新手，我正在尝试创建一个代理服务器，它可以从远程服务器返回 RestFull 数据，如 xml 和 json 响应。

我希望网络服务只回答来自单个 IP 地址的请求，这就是为什么我想用 Google App Engine 创建一个代理服务器。我试过那个[解决方案](http://www.openlogic.com/wazi/bid/188080/Google-Web-Toolkit-and-Web-Services-The-XML-Way)

但是对我的谷歌应用服务器的远程调用是异步的，所以当网络服务响应我的谷歌应用服务器时，谷歌应用服务器已经回答了我的设备中没有数据的请求。

我用 python 尝试了很多解决方案，但我无法让它们工作。

如果您有任何问题，请告诉我

谢谢，

![建筑学](../Images/33ddc2ffc9c8a36d9ae1766dd83deb76.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:57:22.097

最后，似乎没有办法在 Google Apps Engine 的服务器端从客户端进行同步远程调用。所以我在php上尝试了curl，它完美地工作！

这里是帮助我的 StackOverflow 帖子[如何通过 Curl 和 PHP 发送 SOAP XML？](https://stackoverflow.com/questions/3006977/how-can-i-send-soap-xml-via-curl-and-php)

# c++ - 打印十六进制？

> ID：12994092
> 
> 赞同：0
> 
> 时间：2012-10-21T01:13:20.913
> 
> 标签：c++

> **可能重复：**
> [如何使用 ostream 在 c++ 中将无符号字符打印为十六进制？](https://stackoverflow.com/questions/673240/how-do-i-print-an-unsigned-char-as-hex-in-c-using-ostream)
> [将 ASCII 字符串转换为十进制和十六进制表示](https://stackoverflow.com/questions/3400200/convert-ascii-string-into-decimal-and-hexadecimal-representations)

我想使用 isprint() 打印出字符的十六进制值。但是，我无法让它工作。这是我的尝试：

```
getline(cin, w);
for(unsigned int c = 0; c < w.size(); c++)
{
  if(!isprint(w[c]))
  {
    cout << "ERROR: expected <value> found " << hex << w[c] << endl;
    return 0;
  }
} 
```

谁能帮我打印出这个十六进制值？谢谢！我正在输入以下内容：

一世

我想要它的十六进制值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T01:17:09.073

默认情况下，char 打印为字符串字符。尝试将 char 转换为这样的一般 int：

```
cout << "ERROR: expected <value> found " << hex << static_cast<int>(w[c]) << endl; 
```

# php - 为什么相同的重定向功能会给我不同的行为

> ID：12994093
> 
> 赞同：3
> 
> 时间：2012-10-21T01:13:27.843
> 
> 标签：php, codeigniter, redirect, http-status-code-302

如果我忽略 302，我会看到`redirect()`停止输出，但`header()`不会。`redirect()`用于`header()`设置 302 响应。不同的行为，相同的功能。是什么赋予了？

一些上下文：我正在使用 CodeIgniter 构建一个站点，并且我正在研究该站点应该如何处理访客和成员。

扩展 CI 核心：

```
class MY_Controller extends CI_Controller {
    if (! $authenticated) redirect('/login');
} 
```

现在是控制器：

```
class Members_only extends MY_Controller {
    function index()
    {
    // Display members only content
    }
} 
```

然后我想，如果 Alice（一个未经身份验证的访问者）忽略了 302 响应怎么办？重定向后她能看到其余的内容吗？所以我测试了它，现在我完全糊涂了。我可以使用两个函数来发送 302 重定向。

```
header('Location: http://mywebsite.com/login', TRUE, 302); 
```

并且来自 CI 的 URL 助手：

```
redirect('/login'); 
```

这是从内部看的样子：

```
function redirect($uri = '', $method = 'location', $http_response_code = 302)
{
    if ( ! preg_match('#^https?://#i', $uri))
    {
        $uri = site_url($uri);
    }

    switch($method)
    {
        case 'refresh' : header("Refresh:0;url=".$uri);
                         break;
        default        : header("Location: ".$uri, TRUE, $http_response_code);
                         break;
    }
    exit;
} 
```

`site_url()`正在返回“http://mywebsite.com/login”。

有人可以指出我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:26:44.157

您`exit`在 CI 重定向功能中看到了吗？因此，无论何时使用它，它都会导致您的应用程序停止处理您留下的任何代码。这是您正在经历的“不同”行为。

[http://php.net/manual/en/function.exit.php](http://php.net/manual/en/function.exit.php)

# php - 用户和朋友的锂模型

> ID：12994097
> 
> 赞同：1
> 
> 时间：2012-10-21T01:14:35.397
> 
> 标签：php, mysql, lithium

尝试在我的模型中为用户帐户和朋友创建关系。

从这个例子开始工作，[https://github.com/masom/li3_microblog](https://github.com/masom/li3_microblog)，但我最终得到一个错误，我认为这表明在 Friends 表中找不到字段 user_id，我没有在任何地方指定字段。

这是我的 MySQL 表：

```
users        friends
-----        -------
id           id ( just the primary key )
username     uid ( foreign key to users.id )
             friend_uid ( foreign key to users.id ) 
```

用户模型：

```
namespace app\models;

class Users extends \lithium\data\Model {
    public $hasMany = array('Friends' => array('keys'=>array('id'=>'uid')));
} 
```

朋友型号：

```
namespace app\models;

class Friends extends \lithium\data\Model {
    public $belongsTo = array(
         'Friend' => array('to'=>'app\models\Users','keys'=>array('friend_uid'=>'id')),
         'User' => array('to'=>'app\models\Users','keys'=>array('uid'=>'id'))
    );
} 
```

用户控制器.php

```
namespace app\controllers;

use app\models\Users;
use app\models\Friends;

class UsersController extends \lithium\action\Controller {

  public function index() {

    $conditions = array('Users.id'=>$this->request->id);
    $with = array('Friends');

    $user = Users::find('first',compact('conditions','with'));

    $conditions = array('Friends.friend'=>$user->id);
    $with = array('Friend');
    $friends = Friends::all(compact('conditions','with'));

    return compact('user','friends');        

 }

} 
```

有了这个我得到一个致命错误，它试图在 Friends 表中找到一个字段 user_id ：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Friends.user_id' in 'on clause'' in /Users/path/Documents/mamp_root/name/libraries/lithium/data/source/database/adapter/MySql.php: 
```

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:08:02.043

看起来该教程是一年前最后一次更新的。我知道在某些时候配置选项会从 更改`'keys'`为`'key'`，因此您可以尝试一下。

# perl - Perl Encode.pm 无法解码带有宽字符的字符串

> ID：12994100
> 
> 赞同：18
> 
> 时间：2012-10-21T01:15:22.067
> 
> 标签：perl, unicode, utf-8

我正在运行一个 perl 应用程序，它使用`/opt/local/lib/perl5/5.12.4/darwin-thread-multi-2level/Encode.pm`

并发出错误

> 无法在 /opt/local/lib/perl5/5.12.4/darwin-thread-multi-2level/Encode.pm 第 174 行解码带有宽字符的字符串。

第 174 行`Encode.pm`读取

```
sub decode($$;$) {
    my ( $name, $octets, $check ) = @_;
    return undef unless defined $octets;
    $octets .= '' if ref $octets;
    $check ||= 0;
    my $enc = find_encoding($name);
    unless ( defined $enc ) {
        require Carp;
        Carp::croak("Unknown encoding '$name'");
    }
    my $string = $enc->decode( $octets, $check );  # line 174
    $_[1] = $octets if $check and !ref $check and !( $check & LEAVE_SRC() );
    return $string;
} 
```

任何解决方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-21T01:47:57.447

`encode`接受一串 Unicode 代码点并将它们序列化为一串字节。

`decode`获取一串字节并将它们反序列化为 Unicode 代码点。

该消息意味着您将包含一个或多个大于 255（非字节）的字符的字符串传递给`decode`，这显然是一个不正确的参数。

```
>perl -MEncode -E"for (254..257) { say; decode('iso-8859-1', chr($_)); }"
254
255
256
Wide character in subroutine entry at .../Encode.pm line 176. 
```

您要求解决方法，但错误是您的。也许你不小心试图解码你已经解码的东西？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-16T10:47:14.573

我有一个类似的问题。 `$enc->decode( $octets, $check );` 期望八位字节。

所以放在`Encode::_utf8_off($octets)`前面。它使它对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T01:32:34.977

该错误消息表示您传递了一个已经解码的字符串（并且包含高于代码点 255 的字符）。你不能再次解码它。

# javascript - 相应的答案按钮在附加的行中消失

> ID：12994106
> 
> 赞同：0
> 
> 时间：2012-10-21T01:16:35.350
> 
> 标签：javascript, jquery, html

我在[这里](http://jsfiddle.net/WZKrP/30/)有一个 jsfiddle ，您可以使用它来查看我的应用程序的基本演示以及我遇到的问题。

当您打开小提琴时，请按照以下步骤操作：

1.  您将看到一个“Open Grid”链接，单击该链接并选择“True or False”或“Yes or No”按钮。
2.  选择任一按钮后，您将看到其答案按钮出现在下方。
3.  请单击“添加问题”按钮，这会将表格行附加到下面的表格中。
4.  现在在附加的行中是问题。如果您单击附加行中的“打开网格”链接并选择其中一个按钮，您会发现下方相应的答案按钮消失了。它们应该显示而不是消失。

所以我的问题是，任何人都可以修改演示，以便当用户单击附加行中的“打开网格”链接时，他们可以获得相应的答案按钮出现在附加行中？

我认为问题可能在这段代码中，但我不确定：

```
 var count = 0;
var plusbutton_clicked;
var gQuestionIndex = 0;

function insertQuestion(form) {

    var context = $('#optionAndAnswer');
    var currenttotal = context.find('.answerBtnsOn').length;

    var $tbody = $('#qandatbl > tbody');
    var $tr = $("<tr class='optionAndAnswer' align='center'>");
    var $td = $("<td class='extratd'>");
    var $options = $("<div class='option'>1\. Option Type:<br/></div>");
    var $answer = $("<div class='answer'>3\. Answer:<br/></div>");

    gQuestionIndex++;

    $('.gridTxt', context).each(function() {

        var $this = $(this);
        var $optionsText = $("<input type='text' class='gridTxtRow maxRow' readonly='readonly' />").attr('name', $this.attr('name') + "[]").attr('value', $this.val()).appendTo($options).after("<span href='#' class='showGrid'>[Open Grid]</span>");

        $questionType = $this.val();

    });

    var $this, i = 0,
        $row, $cell;
    $('#optionAndAnswer .answers').each(function() {
        $this = $(this);
        if (i % 7 == 0) {
            $row = $("<tr/>").appendTo($answer);
            $cell = $("<td/>").appendTo($row);
        }
        var $newBtn = $(("<input class='answerBtnsRow answers' type='button' style='display:%s;' onclick='btnclick(this, " + gQuestionIndex + ");' />").replace('%s', $this.is(':visible') ? 'inline-block' : 'none')).attr('name', "value[" + gQuestionIndex + "][]").attr('value', $this.val()).attr('class', $this.attr('class')).attr('id', $this.attr('id') + 'Row');
        $newBtn.appendTo($cell);

        i++;
    });

    $tr.append($td);
    $td.append($options);
    $td.append($answer);
    $tbody.append($tr);

    count++;

    $('#optionAndAnswer .answerBtns').hide();

    $('#optionAndAnswer .answerBtns').removeClass('answerBtnsOn').addClass('answerBtnsOff');

    updateAnswer($answer, gQuestionIndex);

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:46:23.470

我认为主要问题可能在`insertQuestion()`.

据我所知：

*   $cell 是有条件定义的，但该行`$newBtn.appendTo($cell);`是无条件的。当条件不满足时，追加语句将静默失败（无错误消息）。
*   即使在满足条件的情况下，`$newBtn`也成功附加到`$cell`，`$cell`并附加到`$row`，但 $row 从未附加到任何内容。因此没有 newBtns 将出现在 DOM 中。

编辑：

尝试更换：

```
 if (clickedNumber === 'True or False') {
        $(this).closest('.option').siblings('.answer').find('input[name="answerName[True]"]').show();
        $(this).closest('.option').siblings('.answer').find('input[name="answerName[False]"]').show();
    } else if (clickedNumber === 'Yes or No') {
        $(this).closest('.option').siblings('.answer').find('input[name="answerName[Yes]"]').show();
        $(this).closest('.option').siblings('.answer').find('input[name="answerName[No]"]').show();
    } 
```

和 ：

```
var ans = $(this).closest('.option').siblings('.answer').find('input');
if (clickedNumber === 'True or False') {
    ans.filter('[value="True"], [value="False"]').show();
} else if (clickedNumber === 'Yes or No') {
    ans.filter('[value="Yes"], [value="No"]').show();
} 
```

# cordova - 无法让 ChildBrowser 在 Cordova 2.0.0 上工作：无法读取未定义的属性“childBrowser”

> ID：12994111
> 
> 赞同：1
> 
> 时间：2012-10-21T01:17:16.027
> 
> 标签：cordova, cordova-2.0.0, childbrowser

我在网上进行了广泛的搜索并遵循教程，但我仍然无法读取未定义的属性“childBrowser”。

这是我的步骤：

1.  下载 childbrowser.js 并包含在 index.html 中的 cordova-2.0.0.js 之后
2.  下载 ChildBroswer.java 并将其放入 com.phonegap.plugins.childBrowser。我检查了构建路径并包含了 src/ 。
3.  通过添加以下行来修改 config.xml 文件（之前的示例说 plugins.xml，我假设它是 config.xml 的旧版本

    插件名称="ChildBrowser" 值="com.phonegap.plugins.childBrowser.ChildBrowser"/>

4.  将以下内容添加到 androidmanifest.xml 中：

    活动 android:name="com.phonegap.DroidGap" android:label="@string/app_name"> intent-filter> /intent-filter> /activity>

5.  我的 index.html 看起来像这里的示例：http: [//simonmacdonald.blogspot.com/2011/09/phonegap-android-childbrowser-revamp.html](http://simonmacdonald.blogspot.com/2011/09/phonegap-android-childbrowser-revamp.html) 。

我已经没有想法为什么会发生在我身上......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:38:20.727

我也试过了，它似乎从来没有工作，你可以改变 super.loadUrl("file:///android_asset/www/index.html"); 到网页链接

此页面向您展示如何在[Android 的 phonegap 中添加放大和缩小](https://stackoverflow.com/questions/4668344/zoom-in-phonegap-for-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T20:47:23.757

也有这个问题。意识到 iOS 文件名为 ChildBrowser.js 而 Android 文件名为 childbrowser.js。嗬！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:54:22.333

问题解决了。我的 childbrowser.js 已部分下载，导致此错误

# java - 添加视图数组会使 android 应用程序崩溃

> ID：12994115
> 
> 赞同：3
> 
> 时间：2012-10-21T01:18:52.443
> 
> 标签：java, android, view

我这里有一个 android 应用程序的某些部分，它无缘无故地崩溃了。

RL0 恰好是一些在 XML 中定义的 LinearLayout，它已经包含了一些其他不相关的东西。老实说，我大部分时间都在使用 C++，所以我最初可能不太了解为什么有些事情在 android 中做的显着不同，但我正在努力。有关如何修复该崩溃的任何帮助？错误消息指出 NullPointerException。谢谢。

```
public class Osteoporoza extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_osteoporoza);
        LinearLayout RL0=(LinearLayout)findViewById(R.id.RL0);        

        page[] pages=new page[10];
        RL0.addView(pages[0].pageLL0);//doesn't crash without this line, yet i need to have some way of adding n objects that follow a pattern, i.e. a class.

class page
{
    public LinearLayout pageLL0;
        public ScrollView pageUpperScroll1;
            public TextView pageTextView2;
        public ScrollView pageLowerScroll1;
            public LinearLayout pageAnswerButtonLL2;
                public Button AnswerButton3_1;
                public Button AnswerButton3_2;
                public Button AnswerButton3_3;
                public Button AnswerButton3_4;

    page()
    {
        pageAnswerButtonLL2.addView(AnswerButton3_1);
        pageAnswerButtonLL2.addView(AnswerButton3_2);
        pageAnswerButtonLL2.addView(AnswerButton3_3);
        pageAnswerButtonLL2.addView(AnswerButton3_4);

        pageLowerScroll1.addView(pageAnswerButtonLL2);
        pageUpperScroll1.addView(pageTextView2);

        pageLL0.addView(pageUpperScroll1);
        pageLL0.addView(pageLowerScroll1);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T01:24:52.380

`Object`数组中的所有元素都是`null`默认的。

即当你创建数组时：

```
page[] pages = new page[10]; 
```

您只是设置数组的大小，而*不是*在数组本身中设置任何实例，因此每个元素都是`null`. 要实例化您需要使用的每个元素：

```
for (int i=0; i < pages.length; i++) {
   pages[i] = new page();
} 
```

注意 Java 命名约定表明类名以*大写*字母开头，例如

```
Page[] pages = new Page[10]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:00:13.553

**-**你已经**声明**了`Array`但**没有初始化**它。

**例如：**

`page[] pages = new page[10]; // Tell that this is an Array of page of length 10`

**-**你**需要初始化**它，

**例如：**

```
for (page p : pages){

       p = new page();

   } 
```

**-**请使用`Collection`like`ArrayList`代替`Array`，因为它比使用 Array 灵活得多。

**-** `ArrayList`可以保存`null`值，与**不同** `Array`的是，它的**大小可以增加**。

`ArrayList<page> p = new ArrayList<page>();`

**-**始终将 , 的第一个**字母**作为大写**字母**。`class``enum``interface`

 ****例如：**

**不** 应该`page`但是`Page`**

# javascript - jQuery在Rails应用程序中按ID获取元素不起作用

> ID：12994117
> 
> 赞同：0
> 
> 时间：2012-10-21T01:19:12.863
> 
> 标签：javascript, jquery, ruby-on-rails, erb

我对此很困惑。我的 jQuery 代码在 .erb 页面上时有效，但在我的 rails 应用程序 instanokia.js 文件中时无效。谁能解释为什么这不起作用？我有一个有效的警报，并在 .ready 上弹出，因此 jQuery 加载正常...

**在我的 .erb 页面上：（作品）**

```
 <div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <div id="experiment" value="toggle">
                <p>Hello</p>
            </div>
            <input type="button" id="toggleButton" value="toggle" class="btn btn-primary exp" />
        </div>
    </div>
<script>
    $('#toggleButton').click(function() {
        if ($('#experiment').is(':visible')) {
            $('#experiment').hide();
        } else {
            $('#experiment').show();
        }
    })
</script> 
```

**在我的 instanokia.js 文件中：（不起作用）**

```
$(document).ready (

    alert('working!')

)

$('#toggleButton').click(function() {
    if ($('#experiment').is(':visible')) {
        $('#experiment').hide();
    } else {
        $('#experiment').show();
    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:21:39.540

它需要是

```
$(document).ready(function(){

    alert('working!');

    $('#toggleButton').click(function() {
        if ($('#experiment').is(':visible')) {
            $('#experiment').hide();
        } else {
            $('#experiment').show();
        }
    })
}); 
```

# php - PHP - 如何将任意过滤器应用于分层数组的叶节点？

> ID：12994118
> 
> 赞同：1
> 
> 时间：2012-10-21T01:19:24.527
> 
> 标签：php, arrays, filter

我希望能够过滤数组的叶节点，以确保数据被任何任意规范正确格式化。是否有一种简单的方法可以将过滤函数应用于 PHP 中的多维数组的叶节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:00:48.840

```
function filter_leaf_nodes($tree, $filter) {
    $ret = array();
    foreach ($tree as $subtree) {
        if (is_array($subtree)) {
            $ret[] = filter_leaf_nodes($subtree, $filter);
        } else if ($filter($subtree)) {
            $ret[] = $subtree;
        }
    }
    return $ret;
}

$tree = array(
    array(
        array(
            -1,
            5
        ),
        -3,
        2,
    ),
    array(
        3,
        9
    ),
    -9
);

$filter = function($node) {
    return $node >= 0;
};

var_dump(filter_leaf_nodes($tree, $filter)); 
```

# android - 在列表视图中显示从 facebook 的 fql 查询中获取的照片

> ID：12994123
> 
> 赞同：5
> 
> 时间：2012-10-21T01:20:36.363
> 
> 标签：android, facebook

我在用

```
SELECT src_big FROM photo WHERE pid IN (SELECT pid  FROM photo_tag WHERE subject = me()); 
```

获取我的 Facebook 帐户的照片。我不知道在 listview 和 json 和 bitmap 中设置结果。谁能告诉我如何显示这个结果。

提前致谢。

# css - CSS div 问题

> ID：12994125
> 
> 赞同：2
> 
> 时间：2012-10-21T01:20:58.987
> 
> 标签：css, html, web, dreamweaver

我似乎在并排堆叠 3 个 div 时遇到了问题。我浏览了几个不同的页面，这些页面为我提供了如何执行此操作的代码和提示，但由于某种原因，结果并不正确。这是我在页面中使用的 div 代码，以及样式表中 div 的信息。希望有人可以帮助我解决我做错的事情。

我决定再做一次编辑，因为我真的没有提供足够的信息，我有 3 个并排的 div，但它们似乎粘在一起，一个是不同的，我希望它们均匀分布以与布局的其余部分齐平。我有一个网站链接，所以你可以看到我有[什么我有什么](http://www.gen2designs.com/index.html)

也很抱歉与帖子中 #t2 中缺少的 # 混淆了，我在代码中发布帖子时不小心删除了它。

```
<div id="testwrap">
    <div id="t1">left</div>
    <div id="t3">right</div>
    <div id="t2">middle</div>
</div>

#testwrap {
width: 933px;
margin-right: auto;
margin-left: auto;
}

#t1 {
width: 311px;
margin-right: auto;
margin-left: auto;
background-color: #FFF;
height: 220px;
margin-top: 20px;
margin-bottom: 20px;
float: left; width:311px;
padding: 10px;
}
 #t2 {
background-color: #FFF;
height: 220px;
width: auto;
padding: 10px;
margin-top: 20px;
margin-right: auto;
margin-bottom: 20px;
margin-left: auto;
}
#t3 {
background-color: #FFF;
height: 220px;
width: 311px;
margin-right: auto;
margin-left: auto;
margin-top: 20px;
margin-bottom: 20px;
width:311px;
float: right; width:311px;
padding: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:44:25.037

看起来这是因为您浮动 t1 和 t3，并因此将它们从文档流中取出。如果您也浮动#t2，并更改其宽度以匹配结果空间（而不是自动），它应该可以工作。

```
#t2 {
    background-color: #000;
    height: 220px;
    width: 250px;
    padding: 10px;
    margin-top: 20px;
    margin-right: auto;
    margin-bottom: 20px;
    margin-left: auto;
    float:left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:46:22.870

这是一个干净的工作代码（你的代码太乱了）。您可以将其复制粘贴到您的 HTML 文档中。只需根据自己的喜好更改 div 的背景颜色即可。

**[http://jsfiddle.net/K3FJe/](http://jsfiddle.net/K3FJe/)**

**HTML**

```
<div id="testwrap">
    <div id="t1">left</div>
    <div id="t2">middle</div>
    <div id="t3">right</div>
</div>​ 
```

**CSS**

```
#testwrap {
    width: 933px;
    height: 280px;
    margin: 0 auto;
    background: black;
}

#t1, #t2, #t3 {
    height: 220px;
    padding: 10px;
    color: #FFF;
    float: left;
}

#t1 {
    width: 273px;
    margin: 20px 6px 20px 12px;
    background-color: red;

}

#t2 {
    width: 279px;
    margin: 20px 6px 20px 6px;
    background-color: blue;
}

#t3 {
    width: 273px;
    margin: 20px 12px 20px 6px;
    background-color: green;
}​ 
```

我更新了它们之间的空间，我认为这应该可行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T02:12:21.677

你可以使用：

```
#testwrap {
   display: table;
   [...]
}
#t1, #t2, #t3 {
   display : table-cell;
   width: 271px;
} 
```

然后删除所有的浮动。

这样，所有列将始终具有相同的高度。

# javascript - 如何通过单击 jQuery 中同一父级的另一个子 div 来选择一个子 div？

> ID：12994126
> 
> 赞同：1
> 
> 时间：2012-10-21T01:21:15.547
> 
> 标签：javascript, jquery, selector

例如，我有简单的 html。

```
<body>
    <div class="a">
        <div class="child"></div> <!-- div element I click -->
        <div class="childINeedToSelect"></div> <!-- div element I need to be selected -->
        <div class="child"></div>
    </div>
    <div class="a">
        <div class="child"></div>
        <div class="childINeedToSelect"></div>
        <div class="child"></div>
    </div>
</body> 
```

当我单击顶部的第一`child`类 div 时，我需要更改，例如，**仅**第一`childINeedToSelect`类 div 的边框。它们具有相同的父`a`类 div，但难点在于 class 的元素不止一个`a`。我已经尝试过：

```
$(document).ready(function () {
    var child = $('.child');
    child.bind('click', function() {
        detectElement($(this));
    });
});

var belt;
function detectElement(arrow) {
    belt = arrow.parent('.a').children('childINeedToSelect').eq(1);
    belt.css("background-color", "red");
} 
```

如您所见，我试图`$(this)`作为参数发送`detectElement()`以确定单击了哪个 div。但是我的目标`div`背景没有改变，当我稍后尝试使用元素时`belt`，在被函数*检测到*`detectElement()`后，Opera javascript调试器给了我错误

```
Unhandled Error: Cannot convert 'belt.css('marginLeft')' to object 
```

排队

```
var currentMargin = parseInt(belt.css('marginLeft').toString().replace('px', '')); 
```

但这行代码在调用`detectElement()`函数之前运行良好；我究竟做错了什么？我应该如何选择我需要的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:07:47.487

我建议：

```
function detectElement(arrow) {
    arrow.parent().find('.childINeedToSelect').css('background-color','red');
}

$(document).ready(function(){
    $('.child').click(function(){
        detectElement($(this));
    });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lq9ZD/)。

或者您可以使用该`nextAll()`方法查找兄弟`childINeedToSelect`：

```
function detectElement(arrow) {
    arrow.nextAll('.childINeedToSelect').css('background-color','red');
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lq9ZD/1/)。

如果你应该有多个`.child`and`childINeedToSelect`元素，你可以将`:first`选择器传递给`nextAll()`方法：

```
function detectElement(arrow) {
    arrow.nextAll('.childINeedToSelect:first').css('background-color','red');
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lq9ZD/2/)。

我不确定您为什么使用`bind()`，但如果您*可能*试图考虑动态添加的元素（*在*事件处理程序绑定到各种 DOM 节点/jQuery 对象之后添加），您可以改为使用`on()`：

```
$('.a').on('click','.child', function(){
    detectElement($(this));
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lq9ZD/3/)。

参考：

*   [`find()`](http://api.jquery.com/find/).
*   [`:first`选择器](http://api.jquery.com/first-selector/)。
*   [`nextAll()`](http://api.jquery.com/nextAll/).
*   [`on()`](http://api.jquery.com/on/).
*   [`parent()`](http://api.jquery.com/parent/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:53:13.127

[试试这个小提琴](http://jsfiddle.net/7urq8/)

```
$(document).ready(function () {
    var child = $('.child');
    child.bind('click', function() {
        detectElement($(this));
    });
});

var belt;
function detectElement(arrow) {
    belt = arrow.siblings('.childINeedToSelect').eq(0);
    belt.css("background-color", "red");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T07:55:47.260

尝试类似的东西

```
jQuery('.a').children().first().click(function(){
jQuery('.childINeedToSelect').attr('background-color','red');
)} 
```

# c# - 如何允许用户在我的 MVC 网站上创建自己的子域？

> ID：12994128
> 
> 赞同：8
> 
> 时间：2012-10-21T01:21:29.350
> 
> 标签：c#, asp.net-mvc-3, iis, subdomain

> **可能重复：**
> [是否可以基于子域创建 ASP.NET MVC 路由？](https://stackoverflow.com/questions/278668/is-it-possible-to-make-an-asp-net-mvc-route-based-on-a-subdomain)

我将建立一个网站，允许用户创建他们自己的虚拟商店，由我的网站托管。

想想易趣；让小企业创建自己的商店。

例如：

```
www.foo.com                 - The main website.
www.georgestires.foo.com    - "George's Tires" online store. 
```

我会让用户在一定程度上创建他们自己的样式表和自定义，但那是以后的事了。现在我想知道如何在 MVC 3 网站上实现此功能。

我真的是在零基础上，没有腿可以站立。任何和所有的建议表示赞赏。我知道在 IIS 中我可以创建一个“bar.foo.com”子域绑定并直接流向我的 ASP.Net MVC3 应用程序，但这是否意味着每次有人创建他们的商店时我都必须以编程方式创建一个新的捆绑？

这甚至可能吗？我应该研究这种方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T01:57:16.977

`bind`DNS 服务器和 Microsoft DNS 服务器都允许设置与域中`wildcard entry`任何*不存在*的条目匹配的a：

```
*.example.com.   3600 IN  CNAME host1.example.com. 
```

然后在 IIS 中设置一个 URL 重写规则，将表单的 URL`http://subdomain.yourdomain.com/`转换为，比如说，`http://yourdomain.com/?root=subdomain`

这将允许您使用数据库管理这些克隆的站点。

唯一的缺点是`DNS system`不允许您设置表单的通配符条目`www.*.yourdomain.tld`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:58:42.803

我不知道在 Windows 世界中是否可以在 Apache 中执行“url rewrite”链接。

所以人们会看到：www.georgestires.foo.com，但实际上是 www.foo.com/georgestires。这样您就不必为每个帐户创建真正的子域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T02:06:59.353

您需要[DNAME](http://en.wikipedia.org/wiki/DNAME#DNAME_record)记录指向您的服务器，只需将 IIS 配置为接受端口 80 上的所有请求并发送到您的应用程序。比检查主机头来查看传入域是什么。

现在对于 SSL，您需要做更多的工作。再次 *.mydomain 证书可能适合您。

# windows - 在 WinRT 中，我们有 ListView 和 GridView - 一个带有列和详细信息的简单列表怎么样（例如资源管理器详细信息视图）

> ID：12994129
> 
> 赞同：0
> 
> 时间：2012-10-21T01:21:33.173
> 
> 标签：windows, windows-runtime, winrt-xaml

我只想创建一个包含数据和列（可排序）的列表。我不想要瓷砖，我不想要右滚动。我只想要一个像“Listview”Win32 通用控件这样的列表。还是我被迫进入瓷砖比喻。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:51:47.403

我相信他们不是在比喻，但从我的观点来看，Win32 中的 ListView 就是其中之一。

Win32中的ListView是一个非常有限的控件，不灵活而且太丑陋。

ListView 和 GridView xaml 控件是更好的方法，我知道.. 如果您从头开始，从旧样式控件切换到新样式很容易，但如果您有旧样式背景...很难...我知道。

如果您的 lvw32 基于数据垂直增长，请使用 Listview (xaml)，其中每个项目都是一个 Row，并使用项目模板放入 gridview，gridview 将是一个包含所有属性（列）的寄存器。

因此，您的 ListView 将有一个 Rows 集合，每个 Row 都是一个 GridView，它是一个属性集合。

这是一种方式，但您有很多不同的选择。

# sql - JAVA 查询的 SQL plus 语句

> ID：12994131
> 
> 赞同：0
> 
> 时间：2012-10-21T01:21:41.257
> 
> 标签：sql

我正在尝试执行：

```
SELECT P_NUMBER FROM RDIMARS; 
```

在我的代码的另一部分，我可以成功执行这个语句：

```
ResultSet result = statement.executeQuery("SELECT TABLE_NAME FROM USER_TABLES " +
" WHERE TABLE_NAME LIKE 'APL%'" ); 
```

但是，当我尝试这个时：

```
ResultSet result = statement.executeQuery("SELECT TABLE_NAME FROM USER_TABLES " +
" WHERE RDIMARS LIKE 'P_NUMBER'" ); 
```

作为模仿我的第一个功能代码的尝试，它失败了。我想做的是：

```
ResultSet result = statement.executeQuery("SELECT P_NUMBER from RDIMARS ); 
```

这对我不起作用。但是那个确切的代码在 SQLplus 中有效。知道我做错了什么吗？我使用的 SQLplus 命令是`select P_NUMBER from RDIMARS;`

# linux - 加入两个txt文件

> ID：12994134
> 
> 赞同：0
> 
> 时间：2012-10-21T01:22:08.680
> 
> 标签：linux, file

使用 Linux：*.txt 文件

文件 1

```
HOUSAM000001189870 1012212222011212100020102102112011002200111112012220110 ....... 
HOUSAM000001213135 2012012000120120102010201002102111200122201100222201102 .......
HOUSAM000001237057 0012011222010210120120122210000101112000222210102010201 .......
HOUSAM000001239242 2210120111010010100100022001111000010220010102010201022 ....... 
```

文件2

```
HOUSAM000001189870     
HOUSAM000001237057 
```

输出文件

```
HOUSAM000001189870 1012212222011212100020102102112011002200111112012220110 .......
HOUSAM000001237057 0012011222010210120120122210000101112000222210102010201 ....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:28:21.970

```
grep -F -f file2 file1 > file3 
```

如果您只需要匹配第一列并且可以更改模式文件，则可以将 ^ 添加到每行的前面并将该文件视为正则表达式（删除第一个 -F）。所以...

文件2：

```
^4046
^4050
^4047 
```

然后：

```
grep -f file2 file1 > file3 
```

如果您无法更改模式文件或者它是在您的控制之外生成的，那么 Serge 的答案是最好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T01:30:27.123

结合使用该`join`命令`sort`：

```
$ join <(sort 1.txt) <(sort 2.txt)
4046 200344
4047 200122
4050 200001 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T01:35:12.440

另一种选择：

```
sed 's/^/^/;s/$/[[:space:]]' file2 | grep -f - file1 > file3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T01:28:47.173

一种使用方式`awk`：

```
 awk 'FNR==NR { array[$1]=$2; next } $1 in array { print $1, array[$1] }' file1.txt file2.txt 
```

结果：

```
4046 200344
4050 200001
4047 200122 
```

***编辑：使用真实数据：***

```
awk 'FNR==NR { array[$1]=$0; next } $1 in array { print array[$1] }' file1.txt file2.txt 
```

结果：

```
HOUSAM000001189870 1012212222011212100020102102112011002200111112012220110 ....... 
HOUSAM000001237057 0012011222010210120120122210000101112000222210102010201 ....... 
```

# iphone - iDevice onclick 不使用当前代码播放视频

> ID：12994138
> 
> 赞同：3
> 
> 时间：2012-10-21T01:23:19.170
> 
> 标签：iphone, ipad, html5-video

我的最终目标是在 iDevices 上查看我的网站，点击图片链接，全屏播放视频，并在视频完成后重定向到另一个网页。我愿意接受任何实现我目标的解决方案，即使这意味着废弃我拥有的代码。

这是我迄今为止最好的尝试：这是[我当前的测试站点](http://www.atxcloud.com/wp-content/uploads/Panos/beerdiaries/RnD/aredirect/redirecttest.html)

我正在关注[这个stackoverflow帖子](https://stackoverflow.com/questions/10724897/html5-video-on-android-4-play-fullscreen-then-redirect-to-another-webpage-not)

我对笔记本电脑上的结果感到满意[**编辑**适用于 Chrome，但不适用于 FF 16.0.1 叹息我不知道了），但我目前无法单击图像在我的 iDevices（ipad1 和 iphone4）上播放视频. 我花了几个小时试图通过研究、反复试验来实现这一目标，但没有成功。

这是我正在使用的代码：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0" />
<meta name="description" content="" />
<title>test</title>

<script type="text/javascript">

    function videoEnd() {
        var video = document.getElementById("video");
        video.webkitExitFullScreen();
        document.location = "http://www.atxcloud.com/wp-content/uploads/Panos/beerdiaries/jk5%20all/build.html";
    }

    function playVideo() {
        var video = document.getElementById("video");
        video.addEventListener('ended', videoEnd, true);
        video.webkitEnterFullScreen();
        video.load();
        video.play();
    }

</script>
</head>
<body>
<video id="video" poster="http://www.atxcloud.com/wp-content/uploads/Panos/beerdiaries/RnD/image.png" onclick="playVideo();">
    <source src="http://www.atxcloud.com/wp-content/uploads/Panos/beerdiaries/RnD/video.mp4" type="video/mp4" />
</video>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:41:02.953

如果浏览器不支持全屏 API (http://caniuse.com/#feat=fullscreen)，则可能会在您的 playVideo 函数中引发错误。试试这个修改：

```
function videoEnd() {
    var video = document.getElementById("video");
    if(video.webkitExitFullScreen) video.webkitExitFullScreen();
    document.location = "http://www.atxcloud.com/wp-content/uploads/Panos/beerdiaries/jk5%20all/build.html";
}

function playVideo() {
    var video = document.getElementById("video");
    if(video.webkitEnterFullScreen) video.webkitEnterFullScreen();
    video.load();
    video.play();
}

<video id="video" poster="http://www.atxcloud.com/wp-content/uploads/Panos/beerdiaries/RnD/image.png" onclick="playVideo();" onended="videoEnd();">
<source src="http://www.atxcloud.com/wp-content/uploads/Panos/beerdiaries/RnD/video.mp4" type="video/mp4" /> 
```

# ruby-on-rails - Rails/Postgresql SQL 与日期的差异

> ID：12994144
> 
> 赞同：5
> 
> 时间：2012-10-21T01:25:22.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, date

在 psql 中运行以下查询时，我得到 7 个结果：

```
SELECT generate_series('2012-10-14', CURRENT_DATE, interval '1 day'); # 7 
```

但是，当我在我的 rails 应用程序中运行完全相同的查询时，我得到 8 个结果：

```
result = ActiveRecord::Base.connection.execute "SELECT generate_series('2012-10-14', CURRENT_DATE, interval '1 day');"
puts result.count # 8 
```

似乎这与时区有关，但我不知道问题可能是什么。我的 application.rb 中有以下内容

```
config.time_zone = 'Eastern Time (US & Canada)' 
```

这与我在 postgresql.conf 中的时区设置相同

我对为什么我的 rails 应用程序为我的结果增加了一天感到困惑。谁能提供一些见解？

这似乎只发生在一天结束时（晚上 8 点之后），所以这就是让我认为这是带有时区偏移的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T02:05:50.893

[`generate_series`](http://www.postgresql.org/docs/current/interactive/functions-srf.html#FUNCTIONS-SRF-SERIES)您正在使用的版本使用的是时间戳，而不是日期。因此，您的`'2012-10-14'`and`current_date`正在转换为`timestamp with time zone`s 并且`generate_series`正在生成一组`timestamp with time zone`s；比较这些：

```
=> select generate_series('2012-10-14', current_date, '1 day');
    generate_series     
------------------------
 2012-10-14 00:00:00-07
 2012-10-15 00:00:00-07
 2012-10-16 00:00:00-07
 2012-10-17 00:00:00-07
 2012-10-18 00:00:00-07
 2012-10-19 00:00:00-07
 2012-10-20 00:00:00-07
(7 rows)

=> select generate_series('2012-10-14', current_date::timestamp, '1 day');
   generate_series   
---------------------
 2012-10-14 00:00:00
 2012-10-15 00:00:00
 2012-10-16 00:00:00
 2012-10-17 00:00:00
 2012-10-18 00:00:00
 2012-10-19 00:00:00
 2012-10-20 00:00:00
(7 rows) 
```

第一个有时区，第二个没有。

但是，`current_date`始终会转换为应用了数据库会话的时区调整的时间戳。Rails 会话将以 UTC 与数据库对话，您的`psql`会话可能使用 ET。

如果您手动指定当前日期并明确使用`timestamp`s：

```
select generate_series('2012-10-14'::timestamp, '2012-10-20'::timestamp, '1 day') 
```

那么您将在两者中得到相同的七个结果，因为没有时区可以使事情变得一团糟。

忽略时区的最简单方法是使用整数版本，`generate_series`并且将整数添加到日期会将整数视为天数：

```
select '2012-10-14'::date + generate_series(0, 6) 
```

这将为您提供相同的 7 天，而不受时区干扰。您仍然可以`current_date`通过注意两个日期之间的差异是它们之间的天数（整数）来使用（没有时区，因为 SQL 日期没有时区）：

```
=> select '2012-10-14'::date + generate_series(0, current_date - '2012-10-14');
  ?column?  
------------
 2012-10-14
 2012-10-15
 2012-10-16
 2012-10-17
 2012-10-18
 2012-10-19
 2012-10-20
(7 rows) 
```

并来自 Rails：

```
> pp ActiveRecord::Base.connection.execute("select '2012-10-14'::date + generate_series(0, 6)").to_a
[{"?column?"=>"2012-10-14"},
 {"?column?"=>"2012-10-15"},
 {"?column?"=>"2012-10-16"},
 {"?column?"=>"2012-10-17"},
 {"?column?"=>"2012-10-18"},
 {"?column?"=>"2012-10-19"},
 {"?column?"=>"2012-10-20"}] 
```

顺便说一句，我讨厌时区，讨厌并鄙视它们。

# java - 如何根据JTable中的数据调整行宽？

> ID：12994145
> 
> 赞同：0
> 
> 时间：2012-10-21T01:25:42.477
> 
> 标签：java, swing, jtable

我在 JDialog 中有一个可滚动的 JTable，我希望根据数据长度自动调整行宽。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T02:00:32.267

使用[JTable.setRowHeight](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#setRowHeight%28int%29)方法和基于[JTextArea的单元格渲染器的组合](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:15:43.080

这取决于正在渲染的内容以及您是否知道像素数...

更改列宽将受列自动调整大小策略的影响。

如果要设置像素宽度...

```
int columnIndex = //... the index of the column
TableColumnModel columnModel = table.getColumnModel();
TableColumn tableColumn = columnModel.getColumn(columnIndex);
tableColumn.setWidth(pixelWidth); 
```

如果该列正在呈现文本并且您知道该列将显示的字符数，则可以获取渲染器/表格的字体指标...

```
// If you're using a cell renderer, you will need to get the cell renderer
// to get th font metrics
FontMerics fm = table.getFontMetrics(table.getFont());
int pixelWidth = fm.stringWidth("M") * characterCount; 
```

如果您不使用基于文本的渲染器，则可以使用渲染器来了解宽度...

```
TableCellRenderer renderer = table.getCellRenderer(0, columnIndex);
// You can also use table.getDefaultRenderer(Class)
Component component = renderer.getTableCellRendererComponent(table,
                                  prototypeValue, // Some value the best represents the average value
                                  false,
                                  false,
                                  0,
                                  columnIndex);
int width = component.getPreferredWidth().width; 
```

# c# - 为什么我的打开 menuIItem 对话框会打开保存文件对话框？

> ID：12994147
> 
> 赞同：2
> 
> 时间：2012-10-21T01:27:20.433
> 
> 标签：c#, winforms, richtextbox, rtf

我制作了一个小型文本编辑器，可以将文本从 a 保存`RichTextBox`到`.rtf`文件中，但是每当我单击打开菜单选项时，它都会打开保存文件对话框。我不明白为什么有人可以帮助我？

以下是菜单对话框项的名称。

MenuStrip： `menuStrip1` 保存： `saveMenu` 打开： `openMenu` RichTextBox： `richTextBox1`

这是我在下面处理的代码...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        //save the file

        private void menuStrip1_ItemClicked(object sender, ToolStripItemClickedEventArgs e)
        {

            // Text from the rich textbox rtfMain
            string str = richTextBox1.Text;
            // Create a new SaveFileDialog object
            using (SaveFileDialog dlgSave = new SaveFileDialog())
                try
                {
                    // Available file extensions
                    dlgSave.Filter = "Rich Text Format (.rtf)|*.rtf";
                    // SaveFileDialog title
                    dlgSave.Title = "Save";
                    // Show SaveFileDialog
                    if (dlgSave.ShowDialog() == DialogResult.OK && dlgSave.FileName.Length > 0)
                    {
                        richTextBox1.SaveFile(dlgSave.FileName);

                    }
                }
                catch (Exception errorMsg)
                {
                    MessageBox.Show(errorMsg.Message);
                } 

        }

        private void openMenu_ItemClicked(object sender, ToolStripItemClickedEventArgs e)

        {
            using (var of = new OpenFileDialog())
            {
                of.DefaultExt = "*.rtf";
                of.Filter = "RTF Files|*.rtf";

                if (of.ShowDialog() == DialogResult.OK)
                    richTextBox1.Rtf = System.IO.File.ReadAllText(of.FileName);
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:55:12.873

我假设您的 openMenu 是 menuStrip1 上的子项；因此，当您单击它时，会引发 menuStrip1_ItemClicked 事件，而这正是您使用代码打开“保存”对话框的地方。

您可能应该摆脱 openMenu_ItemClicked 方法，而是使用一个 menuStrip1_ItemClicked 方法连接 menuStrip1 的 ItemClicked 事件，在该方法中您可以确定单击了哪个项目以及相应地执行什么操作。

因此，在您的 menuStrip1_ItemClicked 方法中，您可以执行类似...

```
if(e.ClickedItem == this.openMenu)
{
    //Code to bring up Open File Dialog here
}
else if (e.ClickedItem == this.saveMenu)
{
    //Code to bring up Save Dialog here
} 
```

PS 你可以调试看看执行流程，你可能会看到 menuStrip1 ItemClicked 事件首先被引发，并且代码首先被执行。

# iphone - 如何通知其他对象objective c的变化

> ID：12994148
> 
> 赞同：0
> 
> 时间：2012-10-21T01:27:30.480
> 
> 标签：iphone, objective-c, ios, cocoa-touch

假设我有一个名为的对象`ColorHolder`，其中一个属性是一个`UIColor`值。假设我也有一个`NSMutableArray`存储一些`UIColors`的，我们称之为`colors`。我用数组中的值初始化一个`ColorHolder`对象，如下所示：

```
[[ColorHolder alloc] initWithColor: [self.colors objectAtIndex:5]]; 
```

现在在程序稍后的某个时间点，用户`colors`在同一索引 5 处更改值。我想要的是`ColorHolder`我在上面初始化的对象，因为它的颜色值在其相应值发生变化时也会发生`colors` `NSMutableArray`变化。如何以这种方式设置指针以使其发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:33:09.280

您设置字体的视图（以及任何设置的 FontHolder）不会“观察”字体数组的更改，并且 UIFont 类是不可变的。

您将需要使用 NSNotificationCenter 添加一个观察类来监视这个数组并向感兴趣的视图（和/或 FontHolder(s)）发送通知。

这是一个经典的观察者模式。

[http://blog.csdn.net/dadalan/article/details/4240733](http://blog.csdn.net/dadalan/article/details/4240733)

上面的博客不是您的代码的复制和粘贴答案，但我提供它是为了提供有关一般模式的信息。

此外，如果您真的不需要更新视图，您可以简单地告诉 FontHolder 在用户对其进行更改时从字体数组中刷新自身。如果只有一个观察者，这是实现观察者模式的一种廉价方式。

# facebook - Facebook Fan Page Graph Api 事件从非托管页面导入

> ID：12994150
> 
> 赞同：1
> 
> 时间：2012-10-21T01:28:12.627
> 
> 标签：facebook, facebook-graph-api

有没有办法从非托管粉丝页面导入事件？

问题是，如果我知道事件的 eid，我可以从数据库中获取有关事件的信息。但我无法获取 event_member 表中的 eid 列表，它返回空数据。所以我知道粉丝页面的 uid，但我无法获取他们的活动 eid，以获取它们。我想创造一个地方，你可以在一个地方看到所有当地的活动。有两种方法，一种是手动复制，另一种是...... :)

任何人都知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:51:01.533

您可以使用 Graph API获取**最近的公共事件。**例如，我不拥有或管理的主页的这些公共事件：

[https://developers.facebook.com/tools/explorer/?method=GET&path=79116358489%2Fevents](https://developers.facebook.com/tools/explorer/?method=GET&path=79116358489%2Fevents)

似乎过去太远的事件不包含在查询中。查询结果似乎在过去 2 周内受到限制。

# java - NoSuchElementException 写入文件时

> ID：12994152
> 
> 赞同：0
> 
> 时间：2012-10-21T01:28:21.833
> 
> 标签：java, exception, file-io, exception-handling, textinput

我正在编写一个程序，它从文件中读取字符串和整数，然后复制数据并写入另一个文件。数据条目应以空格分隔。

我的输入和输出应该遵循以下格式，前两组数字是字符串，而其他的是整数：

123123 242323 09 08 06 44

**运行代码时，线程“main”java.util.NoSuchElementException 出现异常**，我不知道为什么

```
import java.util.Scanner;
import java.io.*;

public class Billing {

    public static void main(String[] args)  throws IOException  {

        //define the variables

        String callingnumber;
        String callednumber;
        String line;
        int startinghour;
        int startingminute;
        int endinghour;
        int endingminute;

        //open input and output files
        FileReader freader = new FileReader("BillingData.txt");
        BufferedReader inFile = new BufferedReader(freader);

        FileWriter fwriter = new FileWriter("BillingOutput.txt");
        PrintWriter outFile = new PrintWriter (fwriter);

        // set space between the numbers
         line=inFile.readLine();
         while(line!=null)
         {
             //creat a scanner to use space between the numbers
             Scanner space = new Scanner(line).useDelimiter(" ");

             callingnumber=space.next();
             callednumber=space.next();
             startinghour=space.nextInt();
             startingminute=space.nextInt();
             endinghour=space.nextInt();
             endingminute=space.nextInt();

            // writing data to file
             outFile.printf("%s %s %d %d %d %d", callingnumber, callednumber,startinghour, startingminute, endinghour, endingminute);

             line=inFile.readLine();

         }//end while

         //close the files
         inFile.close();
         outFile.close();

    }//end of mine

}//end of class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:41:50.193

我怀疑扫描仪已经用完了该行中的数据 - 可能是因为其中的值少于 6 个。为避免该错误，您应该执行以下操作：

```
if (space.hasNextInt()) {
    startingHour = space.nextInt();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:40:57.533

您的扫描仪正在尝试读取不存在或类型错误的令牌。我自己，我会使用“”作为分隔符分割字符串，然后处理返回的数组。

# python - '全局名称 未定义' - 为什么会发生这种情况？

> ID：12994155
> 
> 赞同：1
> 
> 时间：2012-10-21T01:28:55.950
> 
> 标签：python, vector, rotation, pygame

我正在尝试在 Pygame 中进行一些多边形旋转，所以我正在做一些点积并获取弧度并将 acos 应用于这些弧度。根据[此链接](http://forums.cgsociety.org/archive/index.php/t-707152.html)，我应该使用钳位函数将点积保持在 -1 和 1 之间。但是，我收到以下错误：

```
d_p = (clamp(self.dot_product(other), -1.0, 1.0))
NameError: global name 'clamp' is not defined 
```

它们似乎在同一个命名空间中——这与它们在代码中出现的完全一样。我曾尝试`@staticmethod`在clamp() 上使用，但它保持不变。唯一可行的方法是使其成为实例方法（签名`clamp(self, x, a, b)`，但是当clamp 不需要了解特定实例时，这似乎是一个糟糕的解决方案。解决此问题的正确方法是什么，我缺少什么概念？

```
class v2:
#...
    def clamp(x, a, b):
        return min(max(x, a), b)

    def radians_between(self, other):
        d_p = (clamp(self.dot_product(other), -1.0, 1.0))
        cos_of_angle = d_p/(self.get_magnitude()*other.get_magnitude())
        return math.acos(cos_of_angle) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T01:50:54.020

为了解决这个问题，`self.clamp()`在定义它的类中使用它时必须使用它。否则，`v2.clamp()`如果你从类外部调用它，则必须使用它。

之所以这么说`global name 'clamp' is not defined`是因为它认为“clamp”应该是全局范围内的变量、函数或类，例如：

```
class clamp(object):
    pass 
```

或者：

```
clamp="I am a variable!" 
```

或者最后：

```
def clamp():
    print "I am clamp in a function!" 
```

# c++ - 带有嵌套循环问题的 C++ 完美数

> ID：12994157
> 
> 赞同：0
> 
> 时间：2012-10-21T01:29:04.047
> 
> 标签：c++, loops, nested, boolean, perfect-numbers

我想做的是寻找一个完美的数字。完美数是所有除数之和的数字，例如 6 = 1+2+3。

基本上我在这里做的是要求 2 个数字并在这两个数字之间找到一个完美的数字。我有一个测试可分性和 2 个嵌套循环的函数。

我的问题是我没有得到任何结果。我已经对其进行了修改，似乎找不到任何问题。编译器不会发出任何错误。

有什么问题？

```
#include <iostream>
using namespace std;

bool isAFactor(int, int);

int main()
{

int startval;
int endval;
int outer_loop;
int inner_loop;
int perfect_number = 0;

cout << "Enter Starting Number: ";
cin >> startval;
cout << "Enter Ending Number: ";
cin >> endval;

for(outer_loop = startval; outer_loop <= endval; outer_loop++)
{
    for(inner_loop = 1; inner_loop <= outer_loop; inner_loop++)
    {
        if (isAFactor(outer_loop, inner_loop) == true)
        {
            inner_loop += perfect_number;
        }
    }

if (perfect_number == outer_loop)
{
    cout << perfect_number << " is a perfect number." << endl;
}

else
{
    cout << "There is no perfect number." << endl;
}

}

system("PAUSE");
return 0;
}

bool isAFactor(int outer, int inner)
{
if (outer % inner == 0)
{
    return true;
}

else
{
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:36:15.357

`inner_loop += perfect_number;`应该是`perfect_number += inner_loop;`。

还有其他问题 - 您需要在每个外部循环中重置为零，并且如果范围内的数字都不完美，`perfect_number`您应该打印消息，而不是为范围内不完美的每个数字打印一次。`"There is no perfect number."`

我建议您重命名`perfect_number`为`sum_of_factors`、和`outer_loop`到或类似名称。`candidate_perfect_number``inner_loop``candidate_factor`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:35:44.310

在 if 语句之后：

```
cout << perfect_number;
cout << outer_loop;

if (perfect_number == outer_loop)
{
    cout << perfect_number << " is a perfect number." << endl;
} 
```

看看他们有什么价值观

**更新：**

你的 endval 的价值是多少？是 0？，这就是为什么循环这么早结束的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T01:43:14.070

哦，这么多问题。

1.  变量`perfect_number`永远不会改变。你的编译器标记了这个吗？
2.  外循环退出时会比结束值大一；你知道吗？
3.  您无需将`bool`值与`true`or进行比较`false`。
4.  `isAFactor`您可以将函数简化为`return (outer % inner) == 0;`.
5.  您可以将调用替换为`isAFactor`表达式 `((outer % inner) == 0)`。

# javascript - 查找 json 引用的值

> ID：12994158
> 
> 赞同：0
> 
> 时间：2012-10-21T01:29:16.310
> 
> 标签：javascript, jquery, json

我有一个 json 结构，其中包含一些相互引用的对象，我希望将对其他对象的引用替换为对象的值。但是，我无法在不指定的情况下更改 json 对象的值。有没有办法做到这一点？

函数的示例输入和输出：

输入

```
"myData": {
    "reference" : {
        key: "key",
        value: "value"
    }

    "objectOfInterest" : {
        "reference" : {
            key: "key"
        },
        blah: "blah"
    }
} 
```

输出

```
"myData": {
    "reference" : {
        key: "key",
        value: "value"
    }

    "objectOfInterest" : {
        "reference" : {
            key: "key",
            value: "value"
        },
        blah: "blah"
    }
} 
```

注意：为了澄清，我可以轻松找到要替换的参考。我遇到的问题是实际更换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:22:07.153

Jquery 有一个用于合并对象的函数**$.extend** [http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

```
 var new_object = $.extend(
        { //Old Object
        "myData": {
            "reference" : {
                key: "key",
            value: "value"
        }

        ,"objectOfInterest" : {
            "reference" : {
                key: "key"
            },
            blah: "blah"
        }
      }
    }, { //New Object Replace

        "objectOfInterest" : {
            "reference" : {
                key: "key2",
                value: "value2"
            },
            blah: "blah"
        }
      }
    );
    console.log(new_object); 
```

# emacs - 允许 dired-do-copy 和 dired-do-rename 即时创建新目录

> ID：12994164
> 
> 赞同：0
> 
> 时间：2012-10-21T01:30:31.157
> 
> 标签：emacs, elisp, file-management, dired

有没有人有一个 emacs lisp hack 允许在 dired-do-copy 或 dired-do-rename 期间动态创建一个新目录？我知道可以在运行这两个命令之一之前创建它。某些类型的“你确定...”提示的额外分数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T11:40:53.370

这看起来像是一个应用建议的案例。问题是：有什么建议。查看 dired 代码，似乎正确的目标是 `dired-mark-read-file-name`用于读取目标文件名的目标。这将起作用：

```
(defadvice dired-mark-read-file-name (after rv:dired-create-dir-when-needed (prompt dir op-symbol arg files &optional default) activate)
  (when (member op-symbol '(copy move))
    (let ((directory-name (if (< 1 (length files))
                              ad-return-value
                              (file-name-directory ad-return-value))))
      (when (and (not (file-directory-p directory-name))
                 (y-or-n-p (format "directory %s doesn't exist, create it?" directory-name)))
        (make-directory directory-name t))))) 
```

请注意，可能会删除第一个`when`( `when (member op-symbol '(copy move))`) 以适用于更多在 dired 中创建文件的情况。但我不确定何时调用 dired-mark-read-file-name，所以我让这个测试在那里减少潜在的不需要的副作用

# php - PHP通过类传递对象？

> ID：12994171
> 
> 赞同：2
> 
> 时间：2012-10-21T01:31:07.560
> 
> 标签：php

重组我的整个类布局后，我仍然无法使用多个类实例。

```
class User {
    public $variable;
    public function getUser() {
        $this->variable = 'It works!';
        return 'bob';
    }
}

class Base {}
class One extends Base {
    public function test() {
        print_r($User->variable); // Want it to print 'It works!'
    }
}

$User = new User();
$username = $User->getUser();
if($username === 'bob') {
    $One = new One();
    $One->test(); // prints "Notice: Undefined property: One::$variable
} 
```

上面的代码做了什么： 类`User`获取用户名。如果用户名是`bob`，它将创建一个对象`one`并尝试从类中打印变量`User`。在我的真实代码中，`User`它非常复杂，传递一堆东西`__construct`并不是我想要的。

我认为解决方案（*这就是我将这个问题命名为这个问题的原因*）将是`User`在类中创建一个新类，`Base`但我无法解决必须创建一个全新的对象并重新启动一切只是为了获得用户名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T01:35:49.043

注入您的`User`实例：

```
class One {
    private $user;
    public function __construct(User $user) {
        $this->user = $user;
    }
    public function test() {
        print_r($this->user->variable);
    }
}

$User = new User();
$One = new One($user);
$One->test(); 
```

这对效率没有任何不当影响，因为实例是通过引用传递而不是复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T01:34:06.510

该类`One`不知道该`$User`变量，因此无法访问它。

您可以将变量传递给构造函数中的类，也可以在创建类的对象后设置它。

```
class One extends Base {
    protected $user;
    public function setUser(User $user) {
        $this->user = $user;
    }
    public function One(User $user) {
        $this->setUser($user);
    }
    public function test() {
        print_r($this->user->variable);
    }
} 
```

或者（但请不要，这是不好的做法）将`$User`变量设置为全局。

```
global $User 
```

# javascript - 在 Three.js 中创建一个带圆角的立方体

> ID：12994175
> 
> 赞同：15
> 
> 时间：2012-10-21T01:32:20.937
> 
> 标签：javascript, 3d, three.js

是否可以在 three.js 中创建一个具有自定义半径的圆角的立方体，然后能够使用图像对该立方体进行纹理处理？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-21T01:42:29.793

您可以使用`RoundedBoxGeometry`来自three.js 的示例。

```
const geometry = new RoundedBoxGeometry( 10, 10, 10, 6, 2 ); 
```

使用如下模式将其导入您的项目：

```
import { RoundedBoxGeometry } from './threejs/examples/jsm/geometries/RoundedBoxGeometry.js'; 
```

三.js r.131

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T14:10:06.330

有关立方体（和其他基本几何体）上的细分修改器的简单直接示例，请查看

[http://stemkoski.github.com/Three.js/Subdivision-Cube.html](http://stemkoski.github.com/Three.js/Subdivision-Cube.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-04T18:59:49.250

快进十年，欢迎来到 20 年代。

看起来这可能是现在的现代解决方案： [https ://www.npmjs.com/package/three-rounded-box](https://www.npmjs.com/package/three-rounded-box)

同样在 Three.js github 上，有人在 2016 年在这里制作了一个圆角矩形几何图形：

[https://github.com/mrdoob/three.js/issues/8402](https://github.com/mrdoob/three.js/issues/8402)

从 2017 年开始，也有这种使用拉伸和自定义几何图形的方法：

[https://discourse.threejs.org/t/round-edged-box/1402](https://discourse.threejs.org/t/round-edged-box/1402)

此形状示例还包含许多带有圆角的形状，包括。一个立方体/盒子：

[https://threejs.org/examples/webgl_geometry_shapes.html](https://threejs.org/examples/webgl_geometry_shapes.html)

# javascript - 代码完成不适用于 OcaIde + js_of_ocaml

> ID：12994177
> 
> 赞同：3
> 
> 时间：2012-10-21T01:32:32.403
> 
> 标签：javascript, eclipse, ocaml, js-of-ocaml

我正在尝试使用带有 js_of_ocaml 的 Eclipse 的 OcaIde 插件。不幸的是，js_of_ocaml 用于调用 n 元方法的 '##' 语法扰乱了代码完成。

我在代码顶部添加了以下注释以尝试让 OcaIde 运行预处理器： (* pp: -parser o -parser op -printer a -I /usr/lib/ocaml/js_of_ocaml/pa_js.cmo *)

这似乎在做某事，因为我可以在“大纲”视图中看到一些重写的​​变量名。不幸的是，它完全破坏了智能感知，我不再在代码中得到错误标记（红色曲线）。

错误日志充满了以下错误：

```
error creating error markers

org.eclipse.jface.text.BadLocationException
  at org.eclipse.jface.text.TreeLineTracker.fail(TreeLineTracker.java:1055)
  at org.eclipse.jface.text.TreeLineTracker.offsetByLine(TreeLineTracker.java:334)
  at org.eclipse.jface.text.TreeLineTracker.getLineOffset(TreeLineTracker.java:1122)
  at org.eclipse.jface.text.AbstractLineTracker.getLineOffset(AbstractLineTracker.java:169)
  at org.eclipse.jface.text.AbstractDocument.getLineOffset(AbstractDocument.java:922)
  at org.eclipse.core.internal.filebuffers.SynchronizableDocument.getLineOffset(SynchronizableDocument.java:382)
  at ocaml.views.outline.OutlineJob$1.run(OutlineJob.java:373)
  at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
  at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
  at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3563)
  at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3212)
  at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
  at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
  at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
  at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
  at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
  at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
  at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
  at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
  at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
  at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
  at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
  at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
  at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.lang.reflect.Method.invoke(Method.java:616)
  at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
  at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
  at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
  at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T10:09:15.663

从什么时候开始将各种软件中的错误报告给 stackoverflow 而不是上游作者？

# python - python改善3Gb文件中查找行和删除行的时间

> ID：12994178
> 
> 赞同：3
> 
> 时间：2012-10-21T01:32:32.700
> 
> 标签：python, dictionary, large-files

第一篇文章，随心所欲...

我的问题：我有一个非常大的 1.4 亿行文件（文件 1）和一个略小的 300 万行文件（文件 2）。我想删除文件 1 中与文件 2 匹配的那些行。直观地说，这似乎是一个简单的查找和删除问题，不应该花那么长时间..相对而言。由于我的代码在 24Gb 处理器上运行大约需要 4 天。我想在几个文件上执行这个，所以我想及时改进。任何帮助和意见将不胜感激。

**示例文件1：**

```
reftig_0 43 0 1.0
reftig_0 44 1 1.0
reftig_0 45 0 1.0
reftig_0 46 1 1.0
reftig_0 47 0 5.0 
```

**示例文件 2：**

```
reftig_0 43
reftig_0 44
reftig_0 45 
```

**代码：**

```
data = open('file_1', 'r')
data_2 = open('file_2', 'r')
new_file = open('new_file_1', 'w')

d2= {}
for line in data_2:
    line= line.rstrip()
    fields = line.split(' ')
    key = (fields[0], fields[1])
    d2[key]=1

#print d2.keys()
#print d2['reftig_1']
tocheck=d2.keys()
tocheck.sort()
#print tocheck

for sline in data:
    sline = sline.rstrip()
    fields = sline.split(' ')
    nkey = (fields[0],fields[1])
    #print nkey
    if nkey in tocheck:
        pass
    else:
        new_file.write(sline + '\n')
        #print sline 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T01:35:39.473

这可能会更好地使用`grep`：

```
grep -Fvf file2 file1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T01:43:42.507

您的脚本很慢，因为该行正在`if nkey in tocheck`检查`nkey`. *`list`*这非常非常慢，因为它是线性搜索（即使`tocheck`已排序）。

使用 a`set`代替：

```
def getkey(line):
    line = line.rstrip()
    fields = line.split(' ')
    return (fields[0], fields[1])

tocheck = {getkey(line) for line in data_2}

for line in data:
    if getkey(line) not in tocheck:
        new_file.write(line) 
```

将它与 unutbu 的 write-batching 结合起来，您的脚本应该会运行得非常快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T01:40:01.363

`new_file`每行写入一次短字符串很慢。通过将内容附加到列表来减少写入次数，并且`new_file`仅在列表长度为 1000 行时才写入。

```
N = 1000
with open('/tmp/out', 'w') as f:
    result = []
    for x in range(10**7):
        result.append('Hi\n')
        if len(result) >= N:
            f.write(''.join(result))
            result = [] 
```

以下是`time test.py`针对 的各种值运行的结果`N`：

```
|      N | time (sec) |
|      1 |      5.879 |
|     10 |      2.781 |
|    100 |      2.417 |
|   1000 |      2.325 |
|  10000 |      2.299 |
| 100000 |      2.309 | 
```

# ruby-on-rails - Rails 3路径匹配没有任何路线

> ID：12994181
> 
> 赞同：0
> 
> 时间：2012-10-21T01:33:02.467
> 
> 标签：ruby-on-rails, ruby, routes

以下行是唯一未注释的行`routes.rb`

```
root :to => "newbooks#index" 
```

然而，任何以“最近”结尾的随机网址都会转到`/newbooks/index`.

例如，如果我输入`localhost:3000/xywasdasas/asdas/recent`它会转到`/newbooks/index`. 如果我最后不包括`recent`它会给出“找不到路线”错误。同样在 url 中放置一个参数`localhost:3000/xywasdasas/asdas/recent?q=abc`也会产生路由错误。

我的应用程序是 Rails 3。对此完全感到困惑，为什么它会`recent`在末尾出现时路由到 newbooks/index，而`routes.rb`???

添加来自 rake 路由的输出：

```
root  /(.:format) {:controller=>"newbooks", :action=>"index"}
page  /pages/*id  {:controller=>"high_voltage/pages", :action=>"show"} 
```

高压路由不在我的路由文件或控制器文件夹中。不确定它来自哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:42:31.143

有一个 rack rewrite gem 配置，它将末尾带有 6 个字母的任何 url 重定向到根路径。

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:59:42.560

探测“rake routes”以获取所有可用的路线...

看看你是否写了一个

# c# - 如何在 Windows 8 Metro C# XAML 应用程序中播放 H.264 RTSP 视频？

> ID：12994188
> 
> 赞同：8
> 
> 时间：2012-10-21T01:34:15.000
> 
> 标签：c#, windows-8, h.264, rtsp

我有一个设备，它从如下 URL 提供 H.264 视频流：rtsp://192.168.0.10:554/videoservice

由于这是实时视频，我不需要控制它（暂停、倒带等），只需播放即可。这是否由[MediaElement](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.aspx)或其他标准类支持，我是否需要[平滑流客户端 SDK](http://visualstudiogallery.msdn.microsoft.com/04423d13-3b3e-4741-a01c-1ae29e84fea6)之类的东西，或者这比我想象的要复杂得多？

更新：我下载了 Microsoft 的[Player Framework](http://playerframework.codeplex.com/)，但这也不播放流。我在有关 RTSP 的示例中找不到任何内容。

更新：我使用[Wireshark](http://www.wireshark.org/)将[VLC 媒体播放器](http://www.videolan.org/vlc/index.html)（有效）发送的数据包与 MediaElement 和 Player Framework 进行比较，它们似乎都没有使用 RTSP 协议。相反，他们将[WPAD](http://en.wikipedia.org/wiki/Web_Proxy_Autodiscovery_Protocol)数据包发送到不同的地址，即使我提供了源的 IP 地址。为什么这是必要的？有什么办法可以关闭这种行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T19:43:04.877

[请参阅此处](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/1709d85b-97b4-425c-a5f5-3edc4d7539e6)的帖子。您需要将数据包装在 MPEG-4 Part 14 容器中，然后将它们传递到[`MediaElement.SetSource`](http://msdn.microsoft.com/en-us/library/windows/apps/br244338). 看来您不能仅使用记录在案的 API 来执行此操作。以下是链接中的重要信息：

> 我们不支持 RTP，而是支持 MPEG-4 Part 14 容器格式。您将需要编写我们自己的源代码，以便能够解析数据并将其直接传递给 Microsoft 解码器。目前，我们没有任何关于如何编写自定义源代码并从您的 Metro 风格应用程序加载它的示例。不幸的是，不可能简单地使用文档来弄清楚如何做到这一点。我一直在与 Stan 交谈，我们正试图弄清楚如何以及何时可以提供这些信息。一旦这些信息可用，我将在我的博客[http://blogs.msdn.com/mediasdkstuff/](http://blogs.msdn.com/mediasdkstuff/)上公布。

[以下](http://msdn.microsoft.com/en-us/library/windows/apps/hh986969.aspx)是支持的视频格式列表。

[这里](http://code.msdn.microsoft.com/windowsapps/Media-extensions-sample-7b466096/view/SourceCode)还有一个如何扩展媒体类的示例，它可能有一个示例说明如何执行与您所要求的类似的事情。

[这里](http://code.msdn.microsoft.com/windowsapps/MediaStreamSource-media-dfd55dff)有一个类似的例子。

# struts2 - 如何使用 struts 标签将 byte[] 输出为 String

> ID：12994189
> 
> 赞同：0
> 
> 时间：2012-10-21T01:34:32.843
> 
> 标签：struts2

我正在使用休眠将大量文本保存为数据库中的 BLOB。因此，我有一个类实例作为字节 []。

```
public class News {
  ...
  private byte[] content;

  // getter and setter
  ...
} 
```

我正在尝试在 JSP 中输出诸如字符串之类的变量，例如使用`<s:property>`标签。谁能给个提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:52:58.247

Struts2 使用 OGNL [http://commons.apache.org/ognl/](http://commons.apache.org/ognl/)。所以在 JSP 中就像在 Java 中那样做。

```
<s:property value="new java.lang.String(news.content)"/> 
```

# c# - 将 Web 应用程序的登录限制在某些特定设备上

> ID：12994190
> 
> 赞同：1
> 
> 时间：2012-10-21T01:34:44.647
> 
> 标签：c#, asp.net, authentication, web-applications

我创建了一个用于建筑行业的劳动/计时应用程序，它由一个 WinForms 客户端组成，员工在其中实际打卡和打卡，一个 WCF Web 服务，用于处理打卡和打卡事件并向客户提供数据，以及用于配置、管理和报告的后端 WinForms 部分。这都是带有 C# 的 .NET。

我还希望编写一个 ASP.NET Web 客户端以使其更加灵活，目的是在该领域的平板电脑和/或手机上使用它。

所以，现在背景已经不碍事了，这里有一个要求，我试图找出最好的方法来完成。

我不希望员工只能在家中或个人手机上打卡进出；他们应该使用公司拥有的设备打卡/打卡，该设备是工头出于特定目的而保存在卡车中的。同时，我希望登录到网络应用程序就像输入 4 位数的密码并单击时钟输入或时钟输出一样简单（对建筑行业的员工没有冒犯，但有些人确实很难尝试在移动设备上输入用户名和密码）。

将对该 Web 客户端的访问限制为某些特定的授权设备集的最佳方法是什么？我考虑过尝试 MAC 地址过滤器，并且阅读了有关使用客户端证书来限制哪些设备可以访问 Web 服务的信息，但有没有更好的方法？我的意思是，如果你有一个稀有的混凝土整理者，他恰好是个书呆子，并且知道如何从公司的设备上获取它，那么客户证书不能直接复制到某人的个人手机上吗？

是否有任何其他方法可以从 Web 应用程序中唯一识别设备并将其与授权设备列表匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:38:31.197

在 ASP.net 中，您不能获取客户端网络适配器的 MAC 地址。因此，您不能指望为“有效”设备定义 MAC 地址白名单。但您也可以使用其他一些技巧：

1-您可以找出您的客户端设备的 IP 地址，并在未经您授权的情况下限制它们。

2-您还可以检测操作系统、计算机名称和浏览器名称以及屏幕分辨率，您可以在这种情况下使用它们。

3- 您可以标记您为特定用户设置了多少 cookie，并以这种方式进行控制。

4-您可以使用 Windows 身份验证来阻止您的用户进行基于表单的身份验证（当然，如果您的网络是基于活动目录的）

# javascript - 语法错误，无法识别的表达式

> ID：12994192
> 
> 赞同：1
> 
> 时间：2012-10-21T01:35:25.747
> 
> 标签：javascript, jquery, colorbox

当我尝试启动灯箱时，我不断看到以下错误：

```
Error: Syntax error, unrecognized expression: /Images/designs/start-large.jpg
  [Break On This Error]     

throw new Error( "Syntax error, unrecognized expression: " + msg );

jquery.js (line 4679) 
```

我正在使用彩盒脚本。这是我的代码：

***HTML***

```
<figure>
    <img src="/Images/designs/start.jpg" alt="Old Start Page"> 
    <dl>
        <dt class="strong">Purpose</dt>
            <dd>Original Website Opening</dd>
        <dt class="strong"><a href="/Images/designs/start-large.jpg" class="colorbox">Enlarge</a></dt>          
    </dl>
</figure> 
```

***JS***

```
$(function() {
   $('.colorbox').colorbox();
}); 
```

我不确定我的代码有什么问题，当我单击链接时，灯箱会打开，但只显示一个 ajax 微调器图像。我在使用上面相同的确切代码正确打开的页面上隐藏了一个内联元素（链接除外`href="#hidden-div"`）。

什么可能导致这个错误，我该如何解决这个问题？

注意：我使用的是 jQuery 1.8.2 和 Colorbox 1.3.20.1

***编辑***

这是我网站上的附加代码：

```
$(function() {

    $('#reload').click(function() { 
location.reload(); //Reloads Page
 });

    $('.slideshow').cycle({
    fx: 'fade',
    timeout: 5000 //Cycles Photos using jQuery Cycle Lite Plugin
});

//Original Code for Colorbox: $('.colorbox').colorbox(); 

$('.colorbox').colorbox({ //Current Colorbox Code
    inline: true
});

}); 
```

***编辑 2***

这是一个[JS Fiddle](http://jsfiddle.net/Lynda333/7KP2Y/5/)注意：我调用 Colorbox 的代码位于 JS 面板的底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:50:44.657

我找到了解决此问题的方法，其中涉及添加额外代码，虽然并不完美，但确实有效。

这是代码：

***HTML***

```
<a href="#lightbox1" class="colorbox">Show Lightbox</a>

<!-- Inserted before </body> tag -->
<div class="hide">
 <div id="lightbox1">
  <img src="path.jpg"> 
 </div>
</div> 
```

***JS***

```
$(function() {
  $(".colorbox").colorbox({
      inline:true
  });
}); 
```

***CSS***

```
.hide{
  display: none;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T04:45:47.257

在 colorbox 中打开内联元素的代码应该是：

```
$('.colorbox').colorbox({ inline:true }); 
```

希望这会有所帮助！

# git - 如何从 git 的索引中仅删除意图添加文件？

> ID：12994197
> 
> 赞同：9
> 
> 时间：2012-10-21T01:35:52.760
> 
> 标签：git

有没有办法只用一个命令从索引中删除那些添加了 -N 标志的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T01:48:05.440

不，Git 不会跟踪添加了哪些文件以及哪些文件是`-N`空的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-11T15:31:35.283

就在这里！仅使用 git：

```
git diff --name-only --diff-filter=A -z \
    | git restore --staged -q --pathspec-file-nul --pathspec-from-file=- 
```

添加但没有内容的文件在工作树中`-N`显示为“已添加”( `A`)，这就是使用 . 列出的内容`--diff-filter=A`。然后将该列表通过管道传输到`git restore`其中删除意图添加。

我之所以使用`git restore`，是因为`git reset`如果没有添加任何文件`-N`（因为 pathspec 为空），则只会重置整个索引。你也可以避免这个问题

```
git diff --name-only --diff-filter=A -z | xargs -r0 git reset -q -- 
```

这需要 GNU xargs。

# php - 制作 PHP 图像表

> ID：12994198
> 
> 赞同：2
> 
> 时间：2012-10-21T01:35:55.747
> 
> 标签：php, html, mysql, css

好的，我知道有人问过这个问题，但我觉得我的情况有点不同和独特。我将我的 php 和 html 代码合并在一起，它正在制作一张 9 张图片而不是 3 x 3 长的表格。如果有人愿意帮助我，这也是一个次要问题，我希望将所有图片格式化为相同大小使表格看起来更好任何帮助表示赞赏。

这是我的表格文件

```
<?php 
// Get our database connector
require("includes/conn.php");
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<body>

    <div>

        <?php   
            // Grab the data from our people table
            $sql = "select filename from people LIMIT 9";
            $result = mysql_query($sql) or die ("Could not access DB: " . mysql_error());
            $count = mysql_num_rows(result);
            $i = 0;
            $per_row = 3;
            echo '<table><tr>';

            while ($row = mysql_fetch_assoc($result))
            {

            echo "<td><img src=\"images/" . $row['filename'] . "\" alt=\"\" /><br /></td>";

            if(++$i % $per_row == 0 && $i > 0 && $i < $count) {
                # Close the row
                echo '</tr><tr>';
                }
        }

            for($x = 0; $x < $per_row - $i % $per_row; $x++) {
             echo '<td></td>';
            }
            echo '</tr></table>';

        ?>

    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:20:47.397

我相信你在错误的地方有一个紧密的卷发。您在`while`检查后立即关闭整个循环以查看是否需要关闭表格行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:25:15.430

你有：

```
$count = mysql_num_rows(result); 
```

代替：

```
$count = mysql_num_rows($result); 
```

这是一个工作模拟，使用数组而不是 mysql 调用：[http ://codepad.org/Fyv2mIvS](http://codepad.org/Fyv2mIvS)

# jquery - isotope jquery asp MVC，如何触发布局的变化

> ID：12994201
> 
> 赞同：3
> 
> 时间：2012-10-21T01:36:22.220
> 
> 标签：jquery, razor, jquery-isotope

我正在使用站点示例将 Isotope.js 的插件集成到 ASP.NET MVC 中。（这里是新手，来自 ASP.NET 网络表单。所以，我是 jquery 和插件的新手。）

问题：

1.  将数据填充到 HTML 中的嵌套 DIV 标记后，**我看不到该行为，如何触发布局/变砖？**. （让我补充一下，它在 Firefox 中呈现不同，感谢 IE9）
2.  Javascript 错误 -**对象不支持属性或方法 'isotope'**，但是当我追踪时，我看到它在 isotope.js 中定义
3.  如何从 html 链接在布局之间切换？

步骤 - 我遵循：

*   我已经设置了部分视图，以调用/包含 js 脚本。
*   我设置了各种数据过滤器、用于过滤的 css 类（来自 iso 示例）。
*   我创建了一个简单的 iso.js，其中包含项目选择器、布局的 js 脚本（脚本在下面的单独文件中列出），基于网页介绍中的 2 个步骤，并在之后包含/调用了脚本

    1.  jQuery
    2.  同位素
    3.  已设置 CSS

        ```
        $(function () {
            $('#container').isotope({
            itemSelector: '.element',
            layoutMode: 'fitRows' });
        }); 
        ```

所以，请告诉我我还需要做什么？

*   我创建了一个`<a>`如下所示的锚点

    ```
    <ul id="filters" class="option-set clearfix" data-option-key="filter">
        <li><a href="#filter" data-option-value="*" class="selected">show all</a></li>
        <li><a href="#filter" data-option-value=".metal">metals</a></li>
    </ul> 
    ```

数据如下 - 直接从网站复制。

```
 <div class="clickable clearfix isotope" id="container" style="position: relative; overflow: hidden; height: 1320px;">

     <div data-category="alkaline-earth" data-symbol="Mg" class="element alkaline-earth metal    width2 height2 isotope-item large" style="position: absolute; left: 0px; top: 0px; transform: translate(5px, 5px);">
     <p class="number">12</p>
     <h3 class="symbol">Mg</h3>
     <h2 class="name">Magnesium</h2>
     <p class="weight">24.305</p>
     </div>    

  <div data-category="actinoid" data-symbol="U" class="element actinoid metal inner-             transition    width2 isotope-item large" style="position: absolute; left: 0px; top: 0px; transform: translate(365px, 5px);">
  <p class="number">92</p>
  <h3 class="symbol">U</h3>
  <h2 class="name">Uranium</h2>
  <p class="weight">238.02891</p>
</div>

  </div> 
```

所以，请让我知道我遗漏了什么，以及我的步骤顺序是否遗漏了什么。

# asp.net - 在页面加载中传递 SQL 数据源变量？

> ID：12994205
> 
> 赞同：1
> 
> 时间：2012-10-21T01:39:46.510
> 
> 标签：asp.net, sql

我有一个 SQL 查询，但它只会知道页面加载中的电影类型。这将连接到数据列表。

我的查询是

```
select * from movies where movieType = @type 
```

有没有办法在运行时将参数传递给 sql 数据源？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:50:53.473

进行 SQL 调用时，您需要将参数添加到 SqlCommand。

```
myCommand.Parameters.AddWithValue("@type", type); 
```

在此示例中，您从 .Net 传入的变量是“类型”

这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)应该可以帮助您了解参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:17:11.120

如果您询问[SqlDataSource 控件](http://msdn.microsoft.com/en-us/library/dz12d98w%28v=vs.100%29.aspx)，是的，您可以使用 SQL 查询和使用参数的语句。

例如：

```
var source = new SqlDataSource(myConnectionString, 
     "SELECT * FROM TableName WHERE ColName = @M);
source.SelectParameters.Add("@M", DbType.Int32, ddl.SelectedValue); 
```

MSDN 有关于这个主题的[好文章。](http://msdn.microsoft.com/en-us/library/z72eefad%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T03:49:48.487

这可以通过标记或代码隐藏中的[SelectParameters来完成](http://msdn.microsoft.com/en-us/library/z72eefad%28v=vs.100%29.aspx)

```
 <asp:SqlDataSource
      id="SqlDataSource1"
      runat="server"
      DataSourceMode="DataReader"
      ConnectionString="<%$ ConnectionStrings:MyConnection %>"
      SelectCommand="select * from movies where movieType = @type">

       <SelectParameters>
            <asp:ControlParameter name="type" ControlID="MyDropdownList" PropertyName="SelectedValue" />
       </SelectParameters>
  </asp:SqlDataSource> 
```

[更多关于控制参数](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.controlparameter%28v=vs.100%29.aspx)

# delphi - 模块“MpLib.dll”中地址 003B0E8E 的访问冲突。读取地址 00120BF4

> ID：12994208
> 
> 赞同：0
> 
> 时间：2012-10-21T01:40:16.573
> 
> 标签：delphi, delphi-xe

我已经在 Stackoverflow 上搜索了我遇到的问题，但它们都非常针对特定的访问冲突。

我认为我遇到问题的一段代码是一个名为 的函数`MpqExtractFile`，它存储在一个 DLL 中。

**功能：**

```
function MpqExtractFile(var hMPQ: Integer; szToExtract, szExtracted: AnsiString): Boolean; stdcall; external 'MpqLib.dll' name 'B2'; 
```

**称呼：**

```
if MpqExtractFile(hMPQ, 'war3map.j', AnsiString(tempDir+'\war3map.j')) = True
then ShowMessage('Success.')
else ShowMessage('Failed.'); 
```

执行此代码后，我的应用程序会引发访问冲突错误，因此`ShowMessage`根本不会显示。

我不确定以上是否足以估计问题可能是什么，但如果还有什么我应该告诉我的。

**编辑**

这是我一直在解释的 VB.NET 源代码的摘录：

```
Declare Function MpqExtractFile Lib "MpqLib.dll" Alias "B2" (ByVal hMPQ As Integer, ByVal szToExtract As String, ByVal szExtracted As String) As Boolean 
```

我显然不熟悉其他语言的声明，但我在声明 VB 函数的同一个 VB 文件中找到了以下函数。

```
BOOL WINAPI MpqExtractFile(HANDLE hMpq, const char * szToExtract, const char * szExtracted); 
```

提前谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T07:38:00.933

`AnsiString`是完全错误的类型，除非 DLL 是在 Delphi/C++Builder 中编写并实际用于`AnsiString`其参数中。如果是这种情况，您需要知道 DLL 是用哪个版本的 Delphi/C++Builder 编写的，因为`AnsiString`2009 年更改了内存布局。

无论如何，跨 DLL 边界传递非 POD 数据是非常危险的，因此大多数 DLL 不会这样做。有问题的参数很可能是`PAnsiChar`相反的，例如：

```
function MpqExtractFile(var hMPQ: Integer; szToExtract, szExtracted: PAnsiChar): Boolean; stdcall; external 'MpqLib.dll' name 'B2'; 
```

.

```
if MpqExtractFile(hMPQ, 'war3map.j', PAnsiChar(AnsiString(tempDir+'\war3map.j'))) then
  ShowMessage('Success.') 
else
  ShowMessage('Failed.'); 
```

其他需要考虑的点：

1) 并非所有 DLL 都使用`stdcall`调用约定。像许多开源库一样，用 C 编写的 DLL 使用`cdecl`调用约定来代替并不罕见：

```
function MpqExtractFile(var hMPQ: Integer; szToExtract, szExtracted: PAnsiChar): Boolean; cdecl; external 'MpqLib.dll' name 'B2'; 
```

2) C 没有`Boolean`像 Delphi 和 C++ 那样的真正数据类型。C 代码使用`Byte`甚至`Integer`模仿`Boolean`.

为了在 Delphi 中使用 DLL，您确实需要知道其导出函数的实际正确声明。这在 C/C++ 中不是什么问题，因为大多数 DLL 都有一个提供声明的随附 .h 文件。你有这样的.h 文件吗？如果是这样，请在此处发布，以便有人可以验证您对 Delphi 的翻译。

**更新：**

根据新信息，正确的 Delphi 声明是这样的：

```
function MpqExtractFile(hMpq: THandle; const szToExtract, szExtracted: PAnsiChar): BOOL; stdcall; external 'MpqLib.dll' name 'B2'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T21:10:55.317

您的 VB.net 声明是：

```
Declare Function MpqExtractFile Lib "MpqLib.dll" Alias "B2" (
    ByVal hMPQ As Integer, ByVal szToExtract As String, 
    ByVal szExtracted As String) As Boolean 
```

等效的 Delphi 导入将是：

```
function MpqExtractFile(MpqExtractFile: Integer; 
    szToExtract, szExtracted: PAnsiChar): BOOL; 
    stdcall; external 'MpqLib.dll' name 'B2'; 
```

Delphi 字符串类型不应该用于互操作。p/invoke marshaller 将 String 映射到 C++ char*，它是 Delphi 中的 PAnsiChar。

这种任务确实应该使用 C++ 头文件来执行。你说你没有那个。如果 DLL 是用 C++ 编写的，那么头文件肯定存在。追踪它并将其作为您的来源是值得的。

# android - 应用内结算购买失败，没有给出任何理由

> ID：12994209
> 
> 赞同：0
> 
> 时间：2012-10-21T01:40:26.343
> 
> 标签：android, in-app-purchase, in-app-billing

我正在使用测试谷歌结帐帐户，当我尝试购买时，我在订单被授权时收到错误（显示“授权付款”），这通常发生在下订单后大约 30 秒（即“接受并购买”已被点击）：

“无法处理您的付款。请登录您的谷歌钱包帐户请求支持”

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:33:28.983

您是否已将银行信息添加到商家帐户？你还在遇到这个问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:36:29.073

我遇到了同样的问题，当我在 BillingService.Java 的 makeRequestBundle() 方法中更改 API 版本号时，问题得到了解决：

request.putInt(Consts.BILLING_REQUEST_API_VERSION, 1);

至

request.putInt(Consts.BILLING_REQUEST_API_VERSION, 2);

希望能帮助到你！

# ruby-on-rails - Rails模糊搜索标题和描述

> ID：12994212
> 
> 赞同：0
> 
> 时间：2012-10-21T01:41:07.133
> 
> 标签：ruby-on-rails, ruby, full-text-search, fuzzy-search

我有一个简单的 rails 3 应用程序，将餐厅列为培训练习。我希望能够使用餐厅索引页面上的一个文本字段来搜索名称和描述。

给定查询**Pizza**。比赛应该是

*   名称：Tony's，描述：……是一家自 1950 年代就已存在的比萨店……
*   名称：Domino's Pizza，描述：...
*   名称：大厅，描述：...比萨、意大利面和牛排...

因为：

1.  Pizza 这个词是“ **pizz** eri **a ”的****模糊**匹配，使用与 TextMate 的 Cmd-T 类似的逻辑。（单词 pizzeria 中的空格仅用于使 mini-Markdown 工作）
*****   Pizza 是 Pizza 的**小写**匹配*   Pizza 是 Pizzas 的**子字符串**（应与 end-with begin-with 和 include 一起使用）****

 ****我将如何在 Rails 3 中执行此操作？我是使用thinking_sphinx、轮胎、太阳黑子轨道还是只是我的应用程序的自定义查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:53:45.970

唯一棘手的是披萨/比萨店，这是一个称为词干的问题。

sphinx 和 solr/sunspot 都支持词干提取，但我想你需要教他们两个披萨是披萨店的梗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:52:26.307

消除误报的一种方法是运行用户定义函数 (UDF) 来计算候选答案与原始字符串之间的编辑距离，并忽略那些编辑距离过大的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T11:34:05.820

我找到了一个非常简单的解决方案来满足我的需求。

```
"%#{"pizza".scan(/./).join("%")}%" 
```

这将创建一个看起来像这样的字符串

```
"%p%i%z%z%a%" 
```

然后我在 LIKE 查询中使用它，我得到了预期的结果。现在剩下的就是解决确定相关顺序的重要问题:)

更新：

找到了一种快速而肮脏的方法来确定相关顺序，假设较短的字符串很可能比较长的字符串更接近匹配。

```
ORDER BY length(sequence) ASC 
```****

# java - Proguard keepclasseswithmembers：没有保留成员？

> ID：12994213
> 
> 赞同：3
> 
> 时间：2012-10-21T01:41:24.980
> 
> 标签：java, android, proguard

我必须保留 2 个文件的班级和成员：级别和情节。我的 proguard.cfg 文件：

```
-keepclasseswithmembers class games.levels.Episode {
public java.util.ArrayList<java.lang.String> levelLinks;
public java.util.ArrayList<Level> levels;
public java.util.ArrayList<java.lang.String> skin;
public int id;
}
-keepclasseswithmembers class games.levels.Level {
public int id;
public int episode;
public int numEnemies;
} 
```

还有我的 proguards mapping.txt 文件：

```
games.levels.Level -> games.levels.Level:
    int id -> id
    int episode -> episode
    int numEnemies -> numEnemies
games.levels.Episode -> games.levels.a:
    java.util.ArrayList levelLinks -> a
    java.util.ArrayList levels -> b
    java.util.ArrayList skin -> c
    int id -> d 
```

我只是不明白这里发生了什么。任何人都可以帮我找出为什么 Level 可以工作，但不能用 Episode 吗？预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:24:04.977

你有一个奇怪的 proguard 设置。通常`-keepclasseswithmembers`意味着涵盖所有具有匹配成员的一系列类，而不是通过匹配成员来保留特定类。

我建议使用： `-keep class games.levels.Episode -keep class games.levels.Level`

这将使您的类保持完整，而不会尝试强制匹配成员以及特定的类名。

这里的问题是由于您的 proguard 配置中定义的成员与您的 Episode 类的实际成员不匹配，因此 Episode 类不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T06:45:06.180

终于解决了！如果您想保留一个类的所有成员的名称，只需使用通配符=> 这意味着匹配任何字段：

```
-keep class X.Y.Z {
    <fields>;
} 
```

# arrays - 使用嵌套 For 循环时出现 Python 3.x IndexError

> ID：12994217
> 
> 赞同：0
> 
> 时间：2012-10-21T01:42:05.940
> 
> 标签：arrays, for-loop, numpy, python-3.x, 2d

所以我一直在尝试编写我很久以前制作的桌面游戏 - 我现在正在处理图形部分，我正在尝试使用嵌套的 For 循环绘制 9x7 平铺地图：

我正在为我的二维数组使用 numpy 库

```
gameboard = array( [[8, 8, 8, 7, 7, 7, 8, 8, 8],
                [8, 3, 6, 7, 7, 7, 6, 3, 8],
                [0, 1, 1, 6, 6, 6, 1, 1, 0],
                [0, 5, 4, 0, 0, 0, 4, 5, 0],
                [0, 3, 2, 0, 0, 0, 2, 3, 0],
                [8, 8, 1, 0, 0, 0, 1, 8, 8],
                [8, 8, 8, 6, 6, 6, 8, 8, 8]] )
def mapdraw():
for x in [0, 1, 2, 3, 4, 5, 6, 7, 8]:
    for y in [0, 1, 2, 3, 4, 5, 6]:
        if gameboard[(x, y)] == 1:
            #insert tile 1 at location
        elif gameboard[(x, y)] == 2:
            #insert tile 2 at location
        elif gameboard[(x, y)] == 3:
            #insert tile 3 at location
                    #this continues for all 8 tiles
                    #graphics update 
```

当我运行这个程序时，我在“if gameboard[(x,y)] == 1:”“IndexError: index (7) out of range (0<=index<7) in dimension 0”这一行得到一个错误

我已经寻找了几个小时来找到这个错误的含义，并尝试了许多不同的方法来修复它：任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:50:27.677

您必须使用索引数组，`[y,x]`因为第一个坐标是行索引（对您来说，它是`y`索引）。

顺便说一句，*请*遍历 a`range`而不是显式列表！

```
for x in range(9):
    for y in range(7):
        if gameboard[y, x] == 1:
            #insert tile 1 at location
        ... 
```

# objective-c - iPhone 方向 - 我如何确定哪个方向是向上的？

> ID：12994219
> 
> 赞同：2
> 
> 时间：2012-10-21T01:42:33.990
> 
> 标签：objective-c, ios, core-animation, core-motion

我试图在屏幕上绘制一个始终“向上”的 2D 图像。如果用户正在旋转他们的手机，我想确保我的 2D 对象不会随设备旋转；它应该始终“垂直站立”。我想补偿用户向左或向右倾斜，但不向自己倾斜或向自己倾斜。

我正在使用 CoreMotion 从设备获取 Pitch、Roll 和 Yaw，但我不明白如何将这些点转换为向上的方向，尤其是当用户旋转设备时。理想情况下，我可以将这 3 个数字转换为一个值，该值将始终告诉我哪条路是向上的，而无需重新学习所有三角学。

我看过 3D 茶壶示例，但它没有帮助，因为这个示例是 2D 的，我不需要倾斜/倾斜。另外，我不想使用指南针/磁力计，因为它需要在 iPod Touch 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T02:11:09.727

查看图像以更好地理解我在说什么：

![在此处输入图像描述](../Images/e56b37443e49a90ff07cb32eeb06b751.png)

所以你只对XY平面感兴趣。加速度计始终测量设备相对于自由落体的加速度。因此，当您在图像上握住设备时，加速度值为 (0, -1, 0)。当您将设备顺时针倾斜 45 度时，该值为 (0.707, -0.707, 0)。您可以通过计算当前加速度值和某个参考轴的点积来获得角度。如果我们使用向上向量，则轴为 (0,1,0)。所以点积是

```
0*0.707 - 1*0.707 + 0*0 = -0.707 
```

这恰好是 acos(-0.707) = 45 度。因此，如果您希望图像保持静止，则需要将其反向旋转，即在 XY 平面中旋转 -45 度。如果你想忽略 Z 值，那么你只取 X 和 Y 轴：(X_ACCEL, Y_ACCEL, 0)。您需要重新规范化该向量（它的大小必须为 1）。然后按照我的解释计算一个角度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T02:01:05.057

苹果为此提供了一名观察员。这是一个例子。

文件.h

```
#import <UIKit/UIKit.h>

@interface RotationAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

-(void)orientationChanged;
@end 
```

文件.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    //Get the device object
    UIDevice *device = [UIDevice currentDevice];

    //Tell it to start monitoring rthe accelermeter for orientation
    [device beginGeneratingDeviceOrientationNotifications];

    //Get the notification center for the app
    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];

    //Add yourself an observer
    [nc addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:device];

    HeavyViewController *hvc = [[HeavyViewController alloc] init];
    [[self window] setRootViewController:hvc];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)orientationChanged:(NSNotification *)note
{
    NSLog(@"OrientationChanged: %d", [[note object] orientation]);
    //You can use this method to change your shape.
} 
```

# html - 如何使 div 居中

> ID：12994228
> 
> 赞同：3
> 
> 时间：2012-10-21T01:45:13.880
> 
> 标签：html, css

我想知道如何将这个[http://prntscr.com/hv2q7](http://prntscr.com/hv2q7)居中它挂了，我希望它像这样[http://prntscr.com/hv2ue](http://prntscr.com/hv2ue)居中，以便灰色部分进入边界。这是它的css代码和html：css：

```
#banner{
 height:       279px;
 width:        998px;
 margin-right:   0px;
 margin-left:    0px;
 background-image:
   url(/template/default/images/layout/background/newlayout/test.png);
} 
```

html：

```
<div id="banner" ></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:46:19.070

您想将左右边距设置为`auto`，而不是`0px`。

试试这个，它是设置你的上/下边距`0`和你的左/右到的简写`auto`：

```
#banner {
  margin:0 auto;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T01:46:21.320

`margin:auto;`
以css`margin:0 auto;`为中心通常围绕着或浮动甚至位置，具体取决于浏览器。虽然这些通常不是必需的。

另外，如果 div 真的只包含背景图片，你可以设置`background-repeat`to`none`和`background-position`to `center`。那只会在 div 中居中，所以如果 div 实际上显示为图像的宽度和高度，它不会改变任何东西，但如果 div 填充它包含块的宽度，那么你会离开和右居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T01:47:38.383

把它放在你的横幅代码周围：

```
<div align="center"> "your banner code" </div> 
```

# shared-objects - 远程 SharedObject 未同步/持久化

> ID：12994232
> 
> 赞同：0
> 
> 时间：2012-10-21T01:46:44.957
> 
> 标签：shared-objects, flash-media-server

我正在使用 FMS 4.0。我正在尝试使用我过去使用过的 Remote SharedObject，但似乎没有任何效果。即使是最简单的例子也行不通。SO 实例上没有触发任何事件（没有 NetStatusEvent 或 SyncEvent）。没有例外，没有什么。

```
import flash.net.NetConnection;
import flash.net.SharedObject;
import flash.events.NetStatusEvent;
import flash.events.AsyncErrorEvent;
import flash.events.SyncEvent;
import flash.utils.Timer;
import flash.events.TimerEvent;

var nc:NetConnection = new NetConnection();
var so:SharedObject;
var url:String = "rtmp://127.0.0.1/live";
var tm:Timer = new Timer(1000);

nc.client = {};

nc.addEventListener(NetStatusEvent.NET_STATUS, function(event:NetStatusEvent):void {
  trace("nc netstatus event", event.info.code);

  if (event.info.code !== "NetConnection.Connect.Success") {
    return;
  }

  so = SharedObject.getRemote("settings", nc.uri, true);
  so.client = {};
  so.addEventListener(AsyncErrorEvent.ASYNC_ERROR, trace);

  so.addEventListener(NetStatusEvent.NET_STATUS, function(event:NetStatusEvent):void {
    trace("so netstatus event", event.info.code);
  });

  so.addEventListener(SyncEvent.SYNC, function(event:SyncEvent):void {
    trace("so synced");
    trace("time", so.data.time);
  });

  so.connect(nc);
  tm.start();
});

tm.addEventListener(TimerEvent.TIMER, function(event:TimerEvent):void {
  trace("tick");
  so.setProperty("time", new Date().toString());
});

nc.connect(url); 
```

我使用的是开发者许可证，所以 SharedObjects 应该可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:09:19.630

你的 rtmp 地址是： rtmp://127.0.0.1/live 那不是和 localhost 的连接吗？我认为当您连接到 localhost 而不是互联网 IP 地址时，您应该使用 rtmp:/127.0.0.1/live（即只使用一个斜杠）

# javascript - 确定 JavaScript 对象实例的类的名称

> ID：12994233
> 
> 赞同：2
> 
> 时间：2012-10-21T01:47:07.337
> 
> 标签：javascript, reflection, prototype-programming

想象一个 JavaScript“类” `Foo`：

```
var Foo = function()
{
}; 
```

以及该类的一个实例：

```
var foo = new Foo(); 
```

我可以`Foo`直接从实例中获取字符串`foo`，还是`Foo`只是实例化后无法与实例关联的传递变量`foo`？

* * *

**编辑 1** [SLaks 建议](https://stackoverflow.com/a/12994249/24874)使用`foo.constructor`. 这给出了：

```
function ()
{
} 
```

如果函数以以下形式定义，则此方法有效：

```
function Foo()
{} 
```

...但情况可能并非总是如此。

* * *

**编辑 2**尝试[skizeey 的方法](https://stackoverflow.com/a/12994255/24874)也不起作用。作为 Slack 的方法，它本质上是一个更完整的尝试，但会产生一个空字符串：`""`

* * *

**编辑 3**我想知道这是否真的有可能。请注意来自 Chrome 的 JavaScript 控制台的以下记录：

```
> var Foo = function() {}
undefined
> var foo = new Foo();
undefined
> foo
Foo 
```

在最后一行，Chrome 清楚地知道该对象的类型是`Foo`。然而，这可能只是 Chrome 的东西，而不是标准的 JavaScript，甚至无法从语言本身访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-14T14:15:28.930

使用命名函数：

```
> var Foo = function Foo(){};
> undefined
> var foo = new Foo();
> undefined
> foo.constructor.name
> "Foo" 
```

使用未命名的功能：

```
> var Foo = function (){};
> undefined
> var foo = new Foo();
> undefined
> foo.constructor.name
> "" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T02:14:16.680

如果不修改模块代码，就无法实现您想要的。

当你定义一个函数时

```
var Foo = function() {...} 
```

该函数 - 以及使用它作为构造函数创建的任何对象 - 不知道名称`Foo`。您不妨这样做`var x = 0`，然后尝试获取值`0`来告诉您有关名称的信息`x`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T01:50:17.867

您可以`Foo`通过 from 获取该功能`foo.constructor`。
但是，您不能将该函数实例与您分配给它的变量的名称相关联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T02:06:14.320

从[另一个线程](https://stackoverflow.com/questions/332422/how-do-i-get-the-name-of-an-objects-type-in-javascript)：

```
var getName = function(object) { 
  var funcNameRegex = /function (.{1,})\(/;
  var results = (funcNameRegex).exec(object.constructor.toString());
  return (results && results.length > 1) ? results[1] : "";
}; 
```

您实际上只是将整个构造函数作为字符串获取，然后提取其名称。

不过有一个警告：就像 clentfort 在评论 SLaks 的回答时所说的那样，没有人阻止任何人覆盖对象的构造函数属性。

另一个警告：您还必须明确命名您的函数。

# ruby-on-rails - 复选框似乎没有选中

> ID：12994236
> 
> 赞同：0
> 
> 时间：2012-10-21T01:47:39.497
> 
> 标签：ruby-on-rails

我是 Ruby 新手，下面是我面临的问题。在我的 index.html 中，我有这段代码用于复选框

```
= form_tag movies_path, :id=>"ratings_form", :method => :get do
  Include: 
  - @all_ratings.each do |rating|
    = rating
    = check_box_tag "ratings[#{rating}]", :id => "ratings_#{rating}"
    = submit_tag 'Refresh', :id => "ratings_submit" 
```

在我的控制器中，我有

```
def index
#@movies = Movie.all
@sort = params[:sort]
@movies = Movie.order(@sort)
@all_ratings = Movie.all_ratings
debugger
end 
```

在调试点，我期待那些被选中的复选框的值，但只有 nil

```
(rdb:53) puts params[:ratings]

nil 
```

整个参数

```
(rdb:53) puts params

{"action"=>"index", "controller"=>"movies"}  

nil 
```

# coq - 解决这个 coq 练习

> ID：12994237
> 
> 赞同：4
> 
> 时间：2012-10-21T01:47:48.360
> 
> 标签：coq, theorem-proving

我正在学习 COQ，但我被困在书中的一个练习中。这本书没有给我一个解决方案，所以我不知道该怎么做。虽然我已经完成了第一个。我必须将这些语句转换为谓词逻辑：

```
 h0 : Everybody knows somebody
   h1 : Nobody doesn't know anybody. 
   h2 : Everybody knows somebody 
   h3 : A footballer is known by everybody.
   h4 : Footballers only know footballers. 
   h5 : There is somebody who only knows one person. 
```

代码：

```
Section Stadium.

Variable Fans : Set.
Variable Knows : Fans -> Fans -> Prop.
Variable Footballer : Fans -> Prop.

Hypothesis h0 : forall x: Fans, exists y: Fans, Knows x y.

End Stadium 
```

.

你能帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T02:56:58.557

我假设这些定义已提供给您，因此“每个人”都由`Fans`.

你被什么困住了？

例如，h1 表示“没有人不认识任何人”。这归结为一个事实，即“并非某人不认识任何人”。现在您有两种方法可以继续：

1.  您手动编码“某人不认识任何人”，然后否定它。

2.  （或）你重用 h0，注意到它的否定是“某人不认识任何人”。

* * *

要谈论足球运动员，您只需验证一个变量`x : Fans`满足`Footballer x ->`。例如，h3 的开头如下：

```
forall x, Footballer x -> (* here, you encode "everybody knows x" *) 
```

* * *

也许h5有点难。编码“只有一个人”的一种方法是说他认识一个人 p0，如果他认识另一个人 p1，那么 p1 = p0。

* * *

如果没有关于您发现困难的更多细节，很难为您提供一个不是解决方案的有用答案。

# c - 加权随机整数

> ID：12994243
> 
> 赞同：2
> 
> 时间：2012-10-21T01:49:33.130
> 
> 标签：c, math, random, weighted

我想为随机生成的数字分配权重，权重如下所示。

```
 0  |  1  |  2  |  3  |  4  |  5  |  6
─────────────────────────────────────────
  X  |  X  |  X  |  X  |  X  |  X  |  X
  X  |  X  |  X  |  X  |  X  |  X  |   
  X  |  X  |  X  |  X  |  X  |     |   
  X  |  X  |  X  |  X  |     |     |   
  X  |  X  |  X  |     |     |     |   
  X  |  X  |     |     |     |     |   
  X  |     |     |     |     |     | 
```

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T02:08:44.183

如果您的数组很小，只需在以下数组中选择一个*统一的随机索引：*

```
int a[] = {0,0,0,0,0,0,0, 1,1,1,1,1,1, 2,2,2,2,2, 3,3,3,3, 4,4,4, 5,5, 6}; 
```

如果要在运行时生成分布，请使用[`std::discrete_distribution`](http://en.cppreference.com/w/cpp/numeric/random/discrete_distribution).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T02:45:07.147

@Kerrek 的回答很好。

但是如果权重的直方图不都是小整数，你需要更强大的东西：

将 [0..1] 划分为按权重大小调整的区间。在这里，您需要相对大小比率为 7:6:5:4:3:2:1 的段。所以一个区间单元的大小是1/(7+6+5+4+3+2+1)=1/28，区间的大小是7/28, 6/28, ... 1/ 28\.

这些构成一个概率分布，因为它们总和为 1。

现在找到累积分布：

```
P        x
7/28  => 0
13/28 => 1
18/28 => 2
22/28 => 3
25/28 => 4
27/28 => 5
28/28 => 6 
```

现在在 [0..1] 中生成一个随机数，并在此表中通过找到最小的这样来`r`查找它。这是您想要的随机值。`x``r <= P(x)`

表查找可以通过二分查找来完成，当直方图有很多 bin 时，这是一个好主意。

请注意，您正在有效地构造逆累积密度函数，因此有时将其称为[逆变换](http://en.wikipedia.org/wiki/Inverse_transform_sampling)方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T02:31:58.767

为了得到你想要的分布，首先你基本上把你在那里写的 X 的数量加起来。你可以这样做（我的 C 超级生锈，所以把它当作伪代码）

```
int num_cols = 7; // for your example
int max;
if (num_cols % 2 == 0) // even
{
    max = (num_cols+1) * (num_cols/2);
}
else // odd
{
    max = (num_cols+1) * (num_cols/2) + ((num_cols+1)/2);
} 
```

然后你需要随机选择一个介于`1`和`max` **inclusive**之间的整数。

因此，如果您的随机整数是`r`最后一步，就是找出哪一列包含第 r 个 X。这样的事情应该可以工作：

```
for(int i=0;i<num_cols;i++)
{
    r -= (num_cols-i);
    if (r < 1) return i;
} 
```

# python - 为什么我的 Django 应用程序模型的字段值没有改变？

> ID：12994246
> 
> 赞同：1
> 
> 时间：2012-10-21T01:50:04.207
> 
> 标签：python, django

我正在开发一个类似于本教程的基本 Django 应用程序。在创建和保存 poll 后，我尝试更改它的值，但我不能。我已经尝试过使用`.commit()`除了和而不是`.save()`并且这也不起作用。这是我尝试从 shell 更改内容时的样子。通过 HTML 时的类似结果（即失败）。有什么建议么？我尝试更改模型中`editable=true`没有导致任何错误但也没有帮助的字段的属性。有什么想法可以在这里发生吗？

```
>>> from votes.models import polls
>>> polls.objects.all()[2].title
u'best band'
>>> polls.objects.all()[2].title='best album'
>>> polls.objects.all()[2].title
u'best band'
>>> polls.objects.all()[2].title='best album'
>>> polls.objects.all()[2].save()
>>> polls.objects.all()[2].title
u'best band' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:59:15.387

每次调用时`polls.objects.all()`，您都会从数据库中获得一组重组对象 - 每次调用时`.all()`，它都会再次为您从数据库中重组它们，从而创建一个新副本。您正在修改其中之一，但不保存您修改的同一个。

你在做什么：

```
>>> from votes.models import polls
>>> poll = polls.objects.all()[2]
>>> poll.title = 'best album'
>>> poll.title
'best album'
>>> another_copy_of_poll = polls.objects.all()[2]
>>> another_copy_of_poll.title
u'best band'
>>> another_copy_of_poll.save() 
```

你应该做的：

```
>>> from votes.models import polls
>>> poll = polls.objects.all()[2]
>>> poll.title = 'best album'
>>> poll.title
'best band'
>>> poll.save() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T02:02:33.683

解释托马斯的评论。

将 polls.objects.all[2] 分配给一个变量，然后更改该对象的标题属性并保存它。

```
>>> poll = polls.objects.all[2]
>>> poll.title = 'best album'
>>> poll.save() 
```

# django - Django Endless Pagination 以某种方式阻止了我的自定义 javascript

> ID：12994253
> 
> 赞同：1
> 
> 时间：2012-10-21T01:51:08.720
> 
> 标签：django, jquery, django-endless-pagination

我正在为我的一个项目使用[twitter 风格的无尽分页](http://django-endless-pagination.readthedocs.org/en/latest/twitter_pagination.html)。问题是我的 ajax 逻辑对于我的前 10 个帖子（所以是第一页）工作得很好，但是当我下去并且 Endless Pagination 加载更多帖子时，我的 ajax 停止为它们工作。我不确定我的。

这就是我堆叠我的js的方式

```
<script src="/site_media/endless_pagination/endless.js" type="text/javascript" charset="utf-8"></script>
<script src="/site_media/endless_pagination/endless_on_scroll.js" type="text/javascript" charset="utf-8"></script>
<script src="/site_media/bootstrap/js/bootstrap.min.js"></script>
<script src="http:/site_media/bootstrap/js/bootstrap-collapse.js"></script>
<script src="site_media/bootstrap/js/bootstrap-tooltip.js"></script> 
```

因此，例如，工具提示对于我的前 10 个帖子来说工作得很好，但是当分页加载下一个帖子时，工具提示似乎对他们不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:25:38.337

我终于弄清楚了问题所在，我应该使用[.live()](http://api.jquery.com/live/)。这为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。因此，当新帖子加载时，我的 jQuery 逻辑也适用于它们。

# actionscript-3 - Flex：如何漂亮地打印 JSON.stringify？

> ID：12994254
> 
> 赞同：5
> 
> 时间：2012-10-21T01:51:26.827
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.5

我正在使用带有 Flex 4.6 的内置 JSON 包，你如何让它很好地格式化输出，例如缩进 4 个空格，将每个对象放在一个新行上等等？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-21T02:26:31.607

最后一个参数用于插入空格：

```
JSON.stringify(object, null, 4); 
```

# c# - 在 Linux 上从命令行启动 C# 程序

> ID：12994260
> 
> 赞同：3
> 
> 时间：2012-10-21T01:53:06.307
> 
> 标签：c#

我应该使用什么命令从 Linux 的命令行启动这个 C# 程序？我已经编译了它（使用 Monodevelop），但我不知道如何从命令行启动它。

```
using System;
class ExampleClass
{
    static void Main()
    {
        Console.WriteLine("Hello, world!");
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T02:40:11.517

在 Linux 上启动 C#（或任何其他 .NET）程序所需的命令行取决于您配置 Linux 系统的方式。

标准答案是运行`mono`程序，并将可执行程序集的名称作为参数传递。可执行程序集的名称通常与项目文件的名称相同，但您可以轻松更改它；`.exe`只需在完成编译后查找以结尾的文件即可。它将位于名为 或类似的文件夹中`bin\Debug`（`bin\Release`这取决于您如何设置项目构建设置）。因此，如果您构建了一个名为的程序，`hello.exe`您将进入您的项目文件夹并运行：

```
~/projects/hello $ mono bin\Debug\hello.exe 
```

您需要运行该`mono`程序的原因是因为默认情况下 Linux 不知道如何自动运行 .NET 运行时。当您在 Windows 上安装 .NET 时，它实际上会更改操作系统中加载程序的部分，因此 Windows 只是自动识别 .NET 程序并加载运行时。在 Linux 上，您需要自己执行此操作，`mono`首先运行程序。

如果您在 Linux 上运行大量托管代码，您还可以将 Linux 内核配置为与 Windows 相同的工作方式。Linux 支持“杂项二进制格式”，允许您告诉 Linux 如何执行非原生 Linux 格式的二进制文件。这有点先进——它可能需要你构建一个自定义内核，但如果你的 Linux 发行版有更好的方法来做到这一点，我不会感到惊讶。可以在此处找到有关此过程的更多信息：

[http://www.kernel.org/doc/Documentation/mono.txt](http://www.kernel.org/doc/Documentation/mono.txt)

# iphone - 可以使用 XCode 通过蓝牙编译/运行 iOS 吗？

> ID：12994263
> 
> 赞同：8
> 
> 时间：2012-10-21T01:53:42.753
> 
> 标签：iphone, ios, xcode

是否有可能使用蓝牙而不是使用 xcode 的 iPhone 加密狗电缆来编译和运行应用程序？我只是认为，像我一样喜欢这个功能的开发人员会欢迎这个小小的附加支持。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T03:13:01.307

Xcode 4.2 支持通过 WiFi 向 iOS 设备构建和运行应用程序。不幸的是，由于问题太多，他们在 Xcode 4.3 中放弃了该功能。

老实说，我宁愿拥有电缆的速度，尤其是新的 Lightning 连接器，而不是不必使用电缆的便利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T01:56:39.397

不可以。目前该功能对开发人员不可用。虽然，这将是一个受欢迎的功能。不幸的是，它会更慢且更不可靠，因此Apple没有实施它。

# javascript - 当cookie有值时如何隐藏html

> ID：12994264
> 
> 赞同：0
> 
> 时间：2012-10-21T01:53:42.470
> 
> 标签：javascript, html, cookies

```
<html>
<head>
<title>
</title>
<script type="text/javascript">
function createCookie(newCookie)
    {
    var expDate = new Date()
    expDate.setYear(expDate.getYear() + 1);
    var cookieVal = document.getElementById(newCookie).value;
    document.cookie = newCookie + " = " + cookieVal + "<br />";
}

</script>
</head>
<body>
Please enter your email<input type="text" id="email" onblur="createCookie('email');" /><br />
Please enter your address<input type="text" id="address" onblur="createCookie('address');" /><br />
Please enter your phone number<input type="text" id="phone" onblur="createCookie('phone');" /><br />

<script type="text/javascript">
    document.write("EveryCookie: " + document.cookie);
    </script>

</body>
</html> 
```

我的问题是，有没有一种方法可以在我的 cookie 有值时隐藏 HTML 输入，以便只看到 cookie，如果 cookie 没有值，则再次显示 HTML 输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:30:09.050

第 1 步：首先检查 Cookie 值是否有值，然后

第 2 步：使用 javascript 函数通过其 id 隐藏元素。

```
 In javascript:

 document.getElementById('thinktohide').style.display = 'none';

 In html:

<input type ='text' id="thinktohide"> 
```

第 2 步：即使您希望在 cookie 没有价值时返回该元素，您也可以证明这一点。

# linux - linux 上的 nsight 无法与 cuda-gdb 一起使用

> ID：12994269
> 
> 赞同：0
> 
> 时间：2012-10-21T01:54:34.020
> 
> 标签：linux, cuda, nsight, cuda-gdb

我在我的 Ubuntu 12.10 64 位上安装了 cuda 5。我有一个 GTX 675M，所以我使用 bumblebee 在我的 cuda 设备上运行应用程序。我正在通过 bumblebee (optirun) 运行 nsight：

```
frederico@zeus:~$ optirun /usr/local/cuda/libnsight/nsight 
```

它工作得很好，我可以编译和执行应用程序。问题是当我尝试在 nsight 中使用 cuda-gdb 时，单击调试按钮时出现以下错误：

```
No source available for "main() at 0x403c6f" 
```

但是如果我尝试在控制台上使用 cuda-gdb 它可以工作：

```
frederico@zeus:~/Dropbox/coisas/projetos/delta_cuda$ optirun cuda-gdb bin/linux/release/gpu_md5 
NVIDIA (R) CUDA Debugger
5.0 release
Portions Copyright (C) 2007-2012 NVIDIA Corporation
GNU gdb (GDB) 7.2
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-unknown-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /home/frederico/Dropbox/coisas/projetos/delta_cuda/bin/linux/release/gpu_md5...done.
(cuda-gdb) run
Starting program: /home/frederico/Dropbox/coisas/projetos/delta_cuda/bin/linux/release/gpu_md5 
[Thread debugging using libthread_db enabled]
[New Thread 0x7ffff1dfe700 (LWP 10437)]
[New Thread 0x7ffff07f7700 (LWP 10438)]
[New Thread 0x7fffb07f6700 (LWP 10439)]
[New Thread 0x7fff6bfff700 (LWP 10440)]
[New Thread 0x7fff23fff700 (LWP 10441)]
[New Thread 0x7ffedbfff700 (LWP 10442)]
[New Thread 0x7ffe93fff700 (LWP 10443)]
[New Thread 0x7ffe4bfff700 (LWP 10444)]
[New Thread 0x7ffe03fff700 (LWP 10445)]
[Thread 0x7ffe03fff700 (LWP 10445) exited]
[Thread 0x7fffb07f6700 (LWP 10439) exited]
[Thread 0x7ffe4bfff700 (LWP 10444) exited]
[Thread 0x7fff23fff700 (LWP 10441) exited]
[Thread 0x7ffe93fff700 (LWP 10443) exited]
[Thread 0x7ffedbfff700 (LWP 10442) exited]
[Thread 0x7ffff07f7700 (LWP 10438) exited]
[Thread 0x7fff6bfff700 (LWP 10440) exited]
[Thread 0x7ffff1dfe700 (LWP 10437) exited]

Program exited with code 030.
(cuda-gdb) 
```

知道会发生什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:18:06.633

当您的应用程序挂起时，将打印该消息。这意味着您的应用程序没有使用调试信息进行编译 - 在这种情况下，调试器无法将您的指令映射到源代码行。

要在命令行 cuda-gdb 中重现此消息，您需要在断点处暂停，例如在执行“运行”之前执行“中断主”

**更新 - 对于将来某个时候有类似问题的人**

应用程序构建如下：

1.  CUDA 内核代码使用 NVCC 编译并包含调试信息。例如，NVCC 电话是：`nvcc -g -G -c mykernel.cu -o mykernel.o`
2.  此目标文件与 GCC 编译的其他目标文件链接，但未生成调试信息 - `g++ mycpp1.cpp mycpp2.cpp mykernel.cu -o mycudaapplication`. 这导致一些部分调试信息不​​足以让 cuda-gdb 正确解析路径。

Nsight Eclipse 版在调试 CUDA 应用程序时默认依赖 cuda-gdb 源路径解析来查找要在编辑器中打开的文件。

# java - Java Swing 错误 =S AbsoluteConstraints

> ID：12994270
> 
> 赞同：1
> 
> 时间：2012-10-21T01:54:35.140
> 
> 标签：java, swing, layout-manager, absolute, border-layout

```
public class Primary extends JFrame { 
    public Primary(String title) {
        super(title);
        JLabel Label1 = new JLabel("hello");
        Container c= getContentPane();
        c.add(Label1, new AbsoluteConstraints(117,15));
    }
} 
```

我已经编写了这段代码，`JFrame`并在主类中调用了 runnable。但是，尽管没有显示错误，但在尝试编译时出现了很多错误。错误很长，但这里有一个示例：

```
线程“AWT-EventQueue-0”java.lang.IllegalArgumentException 中的异常：
    无法添加到布局：约束必须是字符串（或 null）
        在 java.awt.BorderLayout.addLayoutComponent(BorderLayout.java:426)
        在 javax.swing.JRootPane$1.addLayoutComponent(JRootPane.java:531)
        在 java.awt.Container.addImpl(Container.java:1120)"

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T02:00:12.807

a 的默认布局管理器`JFrame`是`BorderLayout`

仔细查看[`JFrame`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)API。

您需要更改布局管理器以满足约束的要求（或相反）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T02:04:56.403

您的方法是错误的，我认为仔细阅读 oracle 的 swing tuturials 对您是有益的。尤其

[http://docs.oracle.com/javase/tutorial/uiswing/components/index.html](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)

和

[http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T04:49:19.050

**-**首先我要指出的是，**这**`BorderLayout`是.**`JFrame`**

 ****-**如果您不想要默认值，您需要**明确更改**要使用的.`Layout``BorderLayout`

**-**如果可能的话，使用Team 早在 2005 年`Group Layout`开发的`NetBeans`产品，它简直太棒了。使用`Windows Builder Pro`Google 现在免费提供的工具。**

# ruby-on-rails - Ruby on Rails 未定义方法“电子邮件”

> ID：12994274
> 
> 赞同：2
> 
> 时间：2012-10-21T01:55:55.700
> 
> 标签：ruby-on-rails, simple-form

我正在开发的 Rails 应用程序遇到一些问题。我正在使用[https://github.com/plataformatec/simple_form](https://github.com/plataformatec/simple_form)中的 simple_form gem ，运行后`rails server`我看到以下错误

```
undefined method `email' for #<User:0x007f7c9888c950> 
```

提取的源代码（第 7 行附近）：

```
<%= simple_form_for User.create, :input_html => { :class => 'form-horizontal hide', :id => 'dataWithinSignIn'} do |f| %>
 <div class="control-group">
  <div class="controls">
#7 <%= f.input :email, :id => 'inputEmail', :placeholder => 'Email' %>
  </div>
  <div class="controls">
   <%= f.input :password, :id => 'inputPassword', :placeholder => 'Password' %> 
```

我的源代码位于分支上的[https://bitbucket.org/jasonriddle/stubmoney](https://bitbucket.org/jasonriddle/stubmoney)`test-repo`我已经在互联网上搜索了几个小时以寻找答案，但我没有找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T02:12:34.397

这是我在您的代码中看到的唯一迁移：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.references :user
      # Same as saying
      # t.integer :user_id (Foreign Key Column)
      # t.string  :imageable_type (Type Column)
      t.timestamps
    end
  end
end 
```

那里没有电子邮件列，而且看起来您没有正确设置用户表，因为它所拥有的只是对用户的引用和默认时间戳。

我会运行`rake db:rollback`以删除 users 表，然后在再次迁移之前将迁移编辑为如下所示：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :email
      t.string :password # or :encrypted_password
      t.timestamps
    end
  end
end 
```

此外，您通常会将您的密码列命名为类似的名称`encrypted_password`，然后`password`在您的用户模型中命名一个虚拟属性。虚拟属性是在表单中使用的。（就像在您的示例 simple_form 代码中一样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:13:52.713

只需运行迁移，`rails g migration add_email_to_users email`这应该可以解决问题，因为缺少电子邮件属性

然后运行`rake db:migrate`

# rfc1123 - Flash Image Stream 网络摄像头故障/错误

> ID：12994277
> 
> 赞同：0
> 
> 时间：2012-10-21T01:56:19.970
> 
> 标签：rfc1123

你能告诉我一个简单的方法或链接到我可以用来阻止闪存从我的计算机在聊天站点上传图像给其他用户的软件吗？？？

我已经断开并移除了我的内置网络摄像头，但它仍然可以传输图像，这可能是因为我将 HP Pavillion 连接到 PLASMA 监视器，这让我感到困惑，因为它上面没有摄像头！！！

我有研究阻止这种情况的可能性，但没有找到答案，如果你能解释一下阻止或阻止这种情况发生的方法，我将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:03:08.210

如果 Flash 想要访问任何其他硬件，例如您的网络摄像头，它通常会向您抛出一个“允许/拒绝”框。

所以不要“允许”它。

您可以通过设备管理器检查是否有网络摄像头。

假设您使用的是 Windows 7：按开始，键入“设备管理器”按回车并搜索，看看是否可以找到您的网络摄像头。如果有的话，它应该在“声音视频和游戏控制器”下，如果你找到的话。右键单击它并“禁用”它。

祝你好运。

# jquery - jquery $.post 不适用于 setTimeout()

> ID：12994279
> 
> 赞同：0
> 
> 时间：2012-10-21T01:56:51.983
> 
> 标签：jquery

请看一下这段代码：

```
$('a.load').click(function(){
        setTimeout(function(){
            $(".content_container").append('<div class="preloading"><img src="http://localhost:8888/smart/assets/images/loading.gif" alt="loading" /></div>').show();   
            var url = 'http://localhost:8888/smart/payments.html';
            $.post(url,function(data){
                $('.content_container').append(data).show();
                $('.preloading').remove();
            });             
        },1000);    
}); 
```

它没有返回所需的url的问题，只是加载图像而已，它只是html页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:18:02.817

我看到你引用的是 localhost:8888，你是在同一个域上运行上面的代码吗？[如果你不是，那么我怀疑你正在成为同源政策](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)的牺牲品

# php - PHP MySQL Google Chart JSON - 完整示例

> ID：12994282
> 
> 赞同：146
> 
> 时间：2012-10-21T01:57:32.670
> 
> 标签：php, mysql, json, charts, google-visualization

我进行了很多搜索，以找到一个使用 MySQL 表数据作为数据源生成 Google Chart 的好例子。我搜索了几天，发现很少有示例可用于使用 PHP 和 MySQL 的组合生成 Google 图表（饼图、条形图、列图、表格）。我终于设法让一个例子工作。

之前从StackOverflow那里得到了很多帮助，所以这次我会回一些。

我有两个例子；一个使用 Ajax，另一个不使用。今天，我将只展示非 Ajax 示例。

**用法：**

```
    要求：PHP、Apache 和 MySQL

    安装：

      --- 使用 phpMyAdmin 创建数据库并将其命名为“chart”
      --- 使用 phpMyAdmin 创建一个表并将其命名为“googlechart”并制作
          确保表只有两列，因为我使用了两列。然而，
          如果您愿意，您可以使用超过 2 列，但您必须更改
          为此编写一点代码
      --- 指定列名如下：“weekly_task”和“percentage”
      --- 向表中插入一些数据
      --- 对于百分比列，仅使用数字

          ---------------------------------
          示例数据：表格（googlechart）
          ---------------------------------

          每周任务百分比
          ------------ ----------
          睡眠 30
          看电影 10
          工作 40
          练习 20    

```

**PHP-MySQL-JSON-Google 图表示例：**

```
 <?php
$con=mysql_connect("localhost","Username","Password") or die("Failed to connect with database!!!!");
mysql_select_db("Database Name", $con); 
// The Chart table contains two fields: weekly_task and percentage
// This example will display a pie chart. If you need other charts such as a Bar chart, you will need to modify the code a little to make it work with bar chart and other charts
$sth = mysql_query("SELECT * FROM chart");

/*
---------------------------
example data: Table (Chart)
--------------------------
weekly_task     percentage
Sleep           30
Watching Movie  40
work            44
*/

//flag is not needed
$flag = true;
$table = array();
$table['cols'] = array(

    // Labels for your chart, these represent the column titles
    // Note that one column is in "string" format and another one is in "number" format as pie chart only required "numbers" for calculating percentage and string will be used for column title
    array('label' => 'Weekly Task', 'type' => 'string'),
    array('label' => 'Percentage', 'type' => 'number')

);

$rows = array();
while($r = mysql_fetch_assoc($sth)) {
    $temp = array();
    // the following line will be used to slice the Pie chart
    $temp[] = array('v' => (string) $r['Weekly_task']); 

    // Values of each slice
    $temp[] = array('v' => (int) $r['percentage']); 
    $rows[] = array('c' => $temp);
}

$table['rows'] = $rows;
$jsonTable = json_encode($table);
//echo $jsonTable;
?>

<html>
  <head>
    <!--Load the Ajax API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    function drawChart() {

      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(<?=$jsonTable?>);
      var options = {
           title: 'My Weekly Plan',
          is3D: 'true',
          width: 800,
          height: 600
        };
      // Instantiate and draw our chart, passing in some options.
      // Do not forget to check your div ID
      var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }
    </script>
  </head>

  <body>
    <!--this is the div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>
</html> 
```

**PHP-PDO-JSON-MySQL-Google 图表示例：**

```
<?php
    /*
    Script  : PHP-PDO-JSON-mysql-googlechart
    Author  : Enam Hossain
    version : 1.0

    */

    /*
    --------------------------------------------------------------------
    Usage:
    --------------------------------------------------------------------

    Requirements: PHP, Apache and MySQL

    Installation:

      --- Create a database by using phpMyAdmin and name it "chart"
      --- Create a table by using phpMyAdmin and name it "googlechart" and make sure table has only two columns as I have used two columns. However, you can use more than 2 columns if you like but you have to change the code a little bit for that
      --- Specify column names as follows: "weekly_task" and "percentage"
      --- Insert some data into the table
      --- For the percentage column only use a number

          ---------------------------------
          example data: Table (googlechart)
          ---------------------------------

          weekly_task     percentage
          -----------     ----------

          Sleep           30
          Watching Movie  10
          job             40
          Exercise        20     

    */

    /* Your Database Name */
    $dbname = 'chart';

    /* Your Database User Name and Passowrd */
    $username = 'root';
    $password = '123456';

    try {
      /* Establish the database connection */
      $conn = new PDO("mysql:host=localhost;dbname=$dbname", $username, $password);
      $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

      /* select all the weekly tasks from the table googlechart */
      $result = $conn->query('SELECT * FROM googlechart');

      /*
          ---------------------------
          example data: Table (googlechart)
          --------------------------
          weekly_task     percentage
          Sleep           30
          Watching Movie  10
          job             40
          Exercise        20       
      */

      $rows = array();
      $table = array();
      $table['cols'] = array(

        // Labels for your chart, these represent the column titles.
        /* 
            note that one column is in "string" format and another one is in "number" format 
            as pie chart only required "numbers" for calculating percentage 
            and string will be used for Slice title
        */

        array('label' => 'Weekly Task', 'type' => 'string'),
        array('label' => 'Percentage', 'type' => 'number')

    );
        /* Extract the information from $result */
        foreach($result as $r) {

          $temp = array();

          // the following line will be used to slice the Pie chart

          $temp[] = array('v' => (string) $r['weekly_task']); 

          // Values of each slice

          $temp[] = array('v' => (int) $r['percentage']); 
          $rows[] = array('c' => $temp);
        }

    $table['rows'] = $rows;

    // convert data into JSON format
    $jsonTable = json_encode($table);
    //echo $jsonTable;
    } catch(PDOException $e) {
        echo 'ERROR: ' . $e->getMessage();
    }

    ?>

    <html>
      <head>
        <!--Load the Ajax API-->
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">

        // Load the Visualization API and the piechart package.
        google.load('visualization', '1', {'packages':['corechart']});

        // Set a callback to run when the Google Visualization API is loaded.
        google.setOnLoadCallback(drawChart);

        function drawChart() {

          // Create our data table out of JSON data loaded from server.
          var data = new google.visualization.DataTable(<?=$jsonTable?>);
          var options = {
               title: 'My Weekly Plan',
              is3D: 'true',
              width: 800,
              height: 600
            };
          // Instantiate and draw our chart, passing in some options.
          // Do not forget to check your div ID
          var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
          chart.draw(data, options);
        }
        </script>
      </head>

      <body>
        <!--this is the div that will hold the pie chart-->
        <div id="chart_div"></div>
      </body>
    </html> 
```

**PHP-MySQLi-JSON-Google 图表示例**

```
<?php
/*
Script  : PHP-JSON-MySQLi-GoogleChart
Author  : Enam Hossain
version : 1.0

*/

/*
--------------------------------------------------------------------
Usage:
--------------------------------------------------------------------

Requirements: PHP, Apache and MySQL

Installation:

  --- Create a database by using phpMyAdmin and name it "chart"
  --- Create a table by using phpMyAdmin and name it "googlechart" and make sure table has only two columns as I have used two columns. However, you can use more than 2 columns if you like but you have to change the code a little bit for that
  --- Specify column names as follows: "weekly_task" and "percentage"
  --- Insert some data into the table
  --- For the percentage column only use a number

      ---------------------------------
      example data: Table (googlechart)
      ---------------------------------

      weekly_task     percentage
      -----------     ----------

      Sleep           30
      Watching Movie  10
      job             40
      Exercise        20     

*/

/* Your Database Name */

$DB_NAME = 'chart';

/* Database Host */
$DB_HOST = 'localhost';

/* Your Database User Name and Passowrd */
$DB_USER = 'root';
$DB_PASS = '123456';

  /* Establish the database connection */
  $mysqli = new mysqli($DB_HOST, $DB_USER, $DB_PASS, $DB_NAME);

  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
  }

   /* select all the weekly tasks from the table googlechart */
  $result = $mysqli->query('SELECT * FROM googlechart');

  /*
      ---------------------------
      example data: Table (googlechart)
      --------------------------
      Weekly_Task     percentage
      Sleep           30
      Watching Movie  10
      job             40
      Exercise        20       
  */

  $rows = array();
  $table = array();
  $table['cols'] = array(

    // Labels for your chart, these represent the column titles.
    /* 
        note that one column is in "string" format and another one is in "number" format 
        as pie chart only required "numbers" for calculating percentage 
        and string will be used for Slice title
    */

    array('label' => 'Weekly Task', 'type' => 'string'),
    array('label' => 'Percentage', 'type' => 'number')

);
    /* Extract the information from $result */
    foreach($result as $r) {

      $temp = array();

      // The following line will be used to slice the Pie chart

      $temp[] = array('v' => (string) $r['weekly_task']); 

      // Values of the each slice

      $temp[] = array('v' => (int) $r['percentage']); 
      $rows[] = array('c' => $temp);
    }

$table['rows'] = $rows;

// convert data into JSON format
$jsonTable = json_encode($table);
//echo $jsonTable;

?>

<html>
  <head>
    <!--Load the Ajax API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    function drawChart() {

      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(<?=$jsonTable?>);
      var options = {
           title: 'My Weekly Plan',
          is3D: 'true',
          width: 800,
          height: 600
        };
      // Instantiate and draw our chart, passing in some options.
      // Do not forget to check your div ID
      var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }
    </script>
  </head>

  <body>
    <!--this is the div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-19T13:25:00.333

有些人可能会在本地或服务器上遇到此错误：

```
syntax error var data = new google.visualization.DataTable(<?=$jsonTable?>); 
```

这意味着他们的环境不支持短标签，解决方案是使用它来代替：

```
<?php echo $jsonTable; ?> 
```

一切都应该正常工作！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-29T06:26:09.013

你可以用更简单的方法做到这一点。100% 满足您的需求

```
<?php
    $servername = "localhost";
    $username = "root";
    $password = "";  //your database password
    $dbname = "demo";  //your database name

    $con = new mysqli($servername, $username, $password, $dbname);

    if ($con->connect_error) {
        die("Connection failed: " . $con->connect_error);
    }
    else
    {
        //echo ("Connect Successfully");
    }
    $query = "SELECT Date_time, Tempout FROM alarm_value"; // select column
    $aresult = $con->query($query);

?>

<!DOCTYPE html>
<html>
<head>
    <title>Massive Electronics</title>
    <script type="text/javascript" src="loder.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});

        google.charts.setOnLoadCallback(drawChart);
        function drawChart(){
            var data = new google.visualization.DataTable();
            var data = google.visualization.arrayToDataTable([
                ['Date_time','Tempout'],
                <?php
                    while($row = mysqli_fetch_assoc($aresult)){
                        echo "['".$row["Date_time"]."', ".$row["Tempout"]."],";
                    }
                ?>
               ]);

            var options = {
                title: 'Date_time Vs Room Out Temp',
                curveType: 'function',
                legend: { position: 'bottom' }
            };

            var chart = new google.visualization.AreaChart(document.getElementById('areachart'));
            chart.draw(data, options);
        }

    </script>
</head>
<body>
     <div id="areachart" style="width: 900px; height: 400px"></div>
</body>
</html> 
```

loder.js 链接在这里[loder.js](https://www.gstatic.com/charts/loader.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T03:46:39.010

使用它，它确实有效：

data.addColumn 没有你的键，你可以添加更多的列或删除

```
<?php
$con=mysql_connect("localhost","USername","Password") or die("Failed to connect with database!!!!");
mysql_select_db("Database Name", $con); 
// The Chart table contain two fields: Weekly_task and percentage
//this example will display a pie chart.if u need other charts such as Bar chart, u will need to change little bit to make work with bar chart and others charts
$sth = mysql_query("SELECT * FROM chart");

while($r = mysql_fetch_assoc($sth)) {
$arr2=array_keys($r);
$arr1=array_values($r);

}

for($i=0;$i<count($arr1);$i++)
{
    $chart_array[$i]=array((string)$arr2[$i],intval($arr1[$i]));
}
echo "<pre>";
$data=json_encode($chart_array);
?>

<html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    function drawChart() {

      // Create our data table out of JSON data loaded from server.
     var data = new google.visualization.DataTable();
        data.addColumn("string", "YEAR");
        data.addColumn("number", "NO of record");

        data.addRows(<?php $data ?>);

        ]); 
      var options = {
           title: 'My Weekly Plan',
          is3D: 'true',
          width: 800,
          height: 600
        };
      // Instantiate and draw our chart, passing in some options.
      //do not forget to check ur div ID
      var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }
    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>
</html> 
```

# grails - Grails 应用程序的浏览器自动化

> ID：12994283
> 
> 赞同：0
> 
> 时间：2012-10-21T01:57:37.463
> 
> 标签：grails, browser-automation

使用 grails 框架开发了一个 Web 应用程序。现在我想在我的项目中集成浏览器自动化。有人可以建议我如何将浏览器自动化集成到 grails 应用程序中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:10:18.743

看看[Selenium](http://seleniumhq.org/)或[Watir 之](http://watir.com/)类的工具。由于这个问题很笼统，我不能更具体。

# python - ValueError：以 10 为底的 int() 的无效文字：str

> ID：12994284
> 
> 赞同：1
> 
> 时间：2012-10-21T01:57:49.150
> 
> 标签：python, string, integer

可能我的编码不太好，有些行没有多大意义或没有必要，但代码目的非常简单：

我想创建一个使用输入（字符串）的函数，并将其转换为整数，这将用于数学问题。另外：我希望我的代码解释一个随机生成的数字并将其打印为等效的字符串：

```
### 'one' --> 1
### 'zero' --> 0 

import random

##'one' == 1
##'zero' == 0

def name_to_number(name):
    if name == 'one':
        return 1

def number_to_name(comp_number):
    if comp_number == 1:
        return 'one'

def lit_for_num(name):
    '''(str) -> str'''

    comp_number = random.randrange(0,1)
    equation = (abs(comp_number - int(name)))
    if equation == 0:
        print('Hallo!')
        return 'Computer draws' + comp_number
    else:
        return 'Computer draws 0' 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T02:21:26.403

第一个问题是您似乎将其`one`用作输入，因此 `int('one')`会给您该错误。

其次，在：

```
comp_number = random.randrange(0,1)
...
if equation == 0:
    print('Hallo!')
    return 'Computer draws' + comp_number
else:
    return 'Computer draws 0' 
```

该`else`子句将始终被调用，因为`comp_number`始终为 0。

[`rand.randrange`](http://docs.python.org/library/random.html#random.randrange)类似于`choice(range(start, stop, step))`，这意味着`randrange(0,1)`将始终返回 0。`randrange(0,2)`如果您想要`0`或，您会想要`1`。或者，改用[`random.randint(0,1)`](http://docs.python.org/library/random.html#random.randint)它，它将包括端点`0`和`1`.

作为奖励，要处理数字到数字的文本，您可能需要考虑由[Greg Hewgill](https://stackoverflow.com/users/893/greg-hewgill)[编写](https://github.com/ghewgill/text2num/blob/master/text2num.py)的text2num 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T02:19:34.937

下面的代码对我来说很好用。我所要做的就是改变`return 'Computer draws'+comp_number`和改变。`return 'Computer draws'+str(comp_number)``random.randrange(0,1)``random.randrange(0,2)`

```
### 'one' --> 1
### 'zero' --> 0 

import random

##'one' == 1
##'zero' == 0

def name_to_number(name):
    if name == 'one':
        return 1

def number_to_name(comp_number):
    if comp_number == 1:
        return 'one'

def lit_for_num(name):
    '''(str) -> str'''

    comp_number = random.randrange(0,1)
    equation = (abs(comp_number - int(name)))
    if equation == 0:
        print('Hallo!')
        return 'Computer draws' + str(comp_number)
    else:
        return 'Computer draws 0' 
```

# javascript - 定义变量时的语法错误

> ID：12994285
> 
> 赞同：-2
> 
> 时间：2012-10-21T01:58:12.503
> 
> 标签：javascript, jquery, syntax

我在定义变量时遇到语法错误，我不知道为什么。我对编码非常陌生，因此不胜感激。

```
<script type="text/javascript">
jQuery("#submitSample").click(function(){
  var fullName        = jQuery("#fullName"       ).val();
  var eMail           = jQuery("#eMail"          ).val();
  var mailingAddress  = jQuery("#mailingAddress" ).val();
  var specialRequests = jQuery("#specialRequests").val();
  var inkOne          = jQuery("#inkOne"         ).val();
  var inkTwo          = jQuery("#inkTwo"         ).val();
  var inkThree        = jQuery("#inkThree"       ).val();
  var inkFour         = jQuery("#inkFour"        ).val();
  var designOne       = jQuery("#designOne"      ).val();
  var designTwo       = jQuery("#designTwo"      ).val();
  var designThree     = jQuery("#designThree"    ).val();
  data = "fullName="         + fullName +
         "&eMail="           + eMail + 
         "&mailingAddress="  + mailingAddress +
         "&specialRequests=" + specialRequests +
         "&inkOne="          + inkOne +
         "&inkTwo="          + inkTwo +
         "&inkThree="        + inkThree  +
         "&inkFour="         + inkFour +
         "&designOne="       + designOne  +
         "&designTwo="       + designTwo +
         "&designThree="     + designThree;
  jQuery.ajax({ type: "POST", 
                url: "http://www.famousartistprints.com/sample_form.php", 
                data: data, 
                success: function() {
                    jQuery("#couturePaypal").click();
                  }
    });
});
</script> 
```

我在 Chrome 中打开它，这就是我得到的，我不确定它是什么意思。

```
SyntaxError: Unexpected token <
arguments: Array[1]
0: "<"
length: 1
__proto__: Array[0]
get message: function () { [native code] }
get stack: function () { [native code] }
set message: function () { [native code] }
set stack: function () { [native code] }
type: "unexpected_token"
__proto__: Error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:11:58.087

我想通了，在 Dreamweaver 中，具有“脚本”标签会自动给出语法错误。我觉得很愚蠢:(。感谢所有的评论和帮助！

# iphone - 循环#import 参考

> ID：12994286
> 
> 赞同：1
> 
> 时间：2012-10-21T01:58:24.980
> 
> 标签：iphone, ios, xcode

我有一个 Xcode 项目，我必须将数据从 my 传输`SettingsViewController`到 my `ViewController`，问题是我必须`SettingsViewController.h`在 my 中实现 my `ViewController`，因为它被推出了 - 但是要从 to 发送数据，`SettingsViewController`我`ViewController`必须在其中实现 ViewController`SettingsViewcontroller`这也是程序卡住的时候——不可能有循环`#import`引用，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T02:07:15.670

然后在所有 .h 文件中使用前向声明并在 .m 文件中导入文件

检查这个问题 [Objective-C: Forward Class Declaration](https://stackoverflow.com/questions/5191487/objective-c-forward-class-declaration)

前向声明如下所示：

```
@class SettingsViewController; 
```

# javascript - 从 JavaScript 函数调用 UIViewController

> ID：12994287
> 
> 赞同：1
> 
> 时间：2012-10-21T01:58:29.850
> 
> 标签：javascript, iphone, objective-c, xcode

我正在尝试从我的项目中的 JavaScript 函数调用 UIViewController。我被要求对这个应用程序进行一些更改，我需要在其中调用一个新的 UIViewController。我找到了可以调用 JavaScript 函数的地方，但我需要另辟蹊径，打开一个 UIViewController，上面有一些文本。有没有人有如何使用 Xcode 项目代码执行此操作的示例？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:28:02.613

对于简单的调用，我会使用[JSBridge](http://code.google.com/p/jsbridge-to-cocoa/)。这需要通过添加一个 JSBridge.js 头文件来修改您的 javascript 端。我已经对其进行了测试，并且可以正常工作。

一般的想法是javascript可以重定向您实际浏览的地址。当它发生时，`- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType`使用包含特殊命令的 URL 调用本机回调。此 URL 是从 javascript 传递的，然后您可以在回调中解析此 URL 并调用适当的操作。

一般来说，您可以制作自己的 JSBridge 功能，它应该像这样工作：

1.  当您想要执行任何命令时，在您的 javascript 中调用：

    window.location.href="command://goToHomeViewController"

2.  在您的 webView 委托中，您使用此 javaScript 加载了该页面，您为您的命令制作了一个钩子。

在你的 ViewController.m

```
(BOOL)webView:(UIWebView *)p_WebView shouldStartLoadWithRequest:(NSURLRequest *)request         navigationType:(UIWebViewNavigationType)navigationType  
{

    BOOL result = YES;
    NSString *urlString = [[request URL] absoluteURL];
    if ([urlString compare:@"command://goToHomeViewController"] == NSOrderedSame) 
    {
        result = NO;
        [self goToHomeViewController];
    }

    return result;    
} 
```

这样你就在你的 shouldStartLoadWithRequest 中截获了命令，然后你在 ViewController 本机代码中执行命令并返回 NO 表示 webView 取消加载页面。

# algorithm - 在井字游戏上扭动

> ID：12994288
> 
> 赞同：6
> 
> 时间：2012-10-21T01:58:37.560
> 
> 标签：algorithm, tic-tac-toe, minimax

我正在编写一个 tictactoe 程序，但它不是你传统的 tictactoe

首先，棋盘是 4x4，获胜的方法是在一行、一列或对角线上获得 3 个同类和 1 个对手。因此，通过第一列，以下将是“O”的胜利：

```
O|_|X|_
O|X|_|_
O| |_|_
X|_|_|_ 
```

我正在尝试实现一个极小极大算法，以便为程序提供一个无法击败的“硬”模式。

我的问题是我不能希望创建一个包含所有可能游戏状态的树，因此我必须想出某种函数来评估我可以生成的游戏状态。

我想我的问题是，我怎么能想出这样的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T07:35:35.610

这个游戏对于蛮力来说绝对足够小。

您可以枚举所有状态。有 16 个方格，每个方格有 3 个可能的值（X、O 或空）。

3^16 = 43046721，约4300万。

这意味着一个用一个字节来描述每个州的可赢性的表格只有 43 兆字节。

我会创建一个函数，将每个状态映射到 1 到 4300 万之间的索引（您只需要状态，而不是可能的播放顺序），基本上将其表示为 base-3 中的数字，并允许您创建状态从一个索引。

选择每个状态可以采用的 4 个可赢性值 - O 可赢，X 可赢，不可赢和未知。

分配一个长度为 43046721 的缓冲区来存储每个游戏状态的胜率。

遍历所有索引号，标记获胜状态。然后遍历并迭代地填写其余每个状态的可赢性，如果知道的话（检查所有后继状态，根据轮到谁）。这将在一组索引上最多进行 16 次迭代，所以我看不出暴力在这里不起作用的任何原因。

有一些优化，比如利用对称性，利用 n 块向下的所有状态都被 n+1 块的状态取代等事实，但我认为你一开始不需要这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T07:43:53.107

游戏的启发式函数是评估给定游戏状态的函数。在这里——状态基本上由两部分组成：（1）棋盘本身。(2) 轮到谁了。

一些可能的启发式函数：

1.  行/列/对角线中 X（或 O，根据评估的玩家）的最大数量
2.  “几乎获胜”限制的数量（缺少一个动作） - 可以有效地最大化获胜可能性的数量

我想人们可以想到更多的启发式方法。
您可以将不同的启发式方法组合成一个“大”启发式函数，如下所示：

```
a_1 * h_1(state) + a_2 * h_2(state) + ... + a_n * h_n(state) 
```

棘手的部分是学习 a_1,...,a_n 的分数 - 这可以通过多种方式完成 - 其中之一是[蒙特卡罗学习](http://en.wikipedia.org/wiki/Monte_Carlo_Machine_Learning_Library)- 这基本上意味着：创建具有不同`a_1,..,a_n`值的各种代理，在他们，当比赛结束时——根据获胜者调整权重——并在你还有时间的时候重复这个过程（这是一种[随时算法](http://en.wikipedia.org/wiki/Anytime_algorithm)）。
完成后，将学习到的权重用于最终代理。

PS 可能的游戏数量约为 16！（需要确定选择的方块的顺序——它决定了游戏的其余部分将如何结束）——问问自己它是否“小”到足以在你的约束范围内开发——或者它是否太多并且确实需要启发式解决方案.

# javascript - 使用 Javascript 解析 XML（在 Google Scripts 中）

> ID：12994291
> 
> 赞同：6
> 
> 时间：2012-10-21T01:59:38.283
> 
> 标签：javascript, xml, parsing, google-apps-script

我有温度传感器传输三个蜂箱的温度，并且希望能够解析 XML 流以提供传感器的最后一个值。

我想要：

*   传感器 1：75 度（更新时间：晚上 9:04）
*   传感器 2：75 度（更新时间：晚上 9:04）

等等

我在 Google Scripts 中运行以下脚本，但不断收到错误消息：

> 在对象 <?xml version="1.0" encoding="UTF-8"?> 中找不到函数 getContentText

这是简单的脚本：

```
function XMLing() {

  var response = UrlFetchApp.fetch("https://api.cosm.com/v2/feeds/79697.xml?key=[private key here]");

  var doc = Xml.parse(response.getContentText(), true);
  var records = doc.getElements("current_value");
  var details = records[0].getText();

  return details;

} 
```

这是 XML：

```
<eeml xmlns="http://www.eeml.org/xsd/0.5.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="0.5.1" xsi:schemaLocation="http://www.eeml.org/xsd/0.5.1 http://www.eeml.org/xsd/0.5.1/0.5.1.xsd">
  <environment updated="2012-10-21T00:44:32.162393Z" created="2012-10-10T21:19:43.373591Z" id="79697" creator="https://cosm.com/users/greennomad">
    <private>false</private>
    <data id="sensor1tem">
      <current_value at="2012-10-21T00:44:32.019058Z">67.00</current_value>
      <max_value>618.0</max_value>
      <min_value>611.0</min_value>
    </data>
    <data id="sensor2tem">
      <current_value at="2012-10-21T00:44:32.019058Z">60.57</current_value>
      <max_value>61.5</max_value>
      <min_value>60.41</min_value>
    </data>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:37:32.607

错误消息相当明显：您的响应对象是实际文本（XML 响应），而不是具有 getContentText() 方法的对象。所以这应该工作：

```
var doc = Xml.parse(response, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:23:24.067

您可以检查哪些方法可用：

```
if (!response.getContentText) {
    var props = [];
    for (var p in response) {
        props.push(p);
    }

    var name = typeof response;
    if (response.contructor) name = response.contructor.name;

    return name + " { " + props.join(", ") + " }";
} 
```

我的猜测是`UrlFetchApp.fetch()`要么返回一些错误代码，要么对 XML 文档有特殊响应。

* * *

从错误消息看来，它似乎`UrlFetchApp.fetch()`是直接返回一个 XML 文档。您可能不需要致电`Xml.parse()`：

```
function XMLing() {

  var response = UrlFetchApp.fetch("https://api.cosm.com/v2/feeds/79697.xml?key=[private key here]");

  var doc = null;
  if (response.getContentText) {
    doc = Xml.parse(response.getContentText(), true);
  }
  else if (response.getElements) {
    doc = response;
  }
  else {
    var name = typeof response;
    if (response.constructor) name = response.constructor.name;
    throw new Exception("Incompatible type: " + name);
  }

  var records = doc.getElements("current_value");
  var details = records[0].getText();

  return details;

} 
```

# ruby-on-rails - 通过 URL 直接访问时，Backbone-rails 不加载帖子

> ID：12994294
> 
> 赞同：2
> 
> 时间：2012-10-21T02:00:19.700
> 
> 标签：ruby-on-rails, backbone.js

所以我是 Backbone 的新手，我开发了一个带有 JSON API 的 Rails 应用程序，我已经将 Backbone 连接到了。

当我直接使用该网站并点击链接时，一切都很好。

就像我单击指向 /#/1 的链接一样，它会将我指向显示页面，其中帖子遵循一个 ID。

但是，如果我刷新页面，它将不再显示该信息，并引发错误：

> “未捕获的类型错误：无法调用未定义的方法‘toJSON’”

当我转到控制台并访问我的视图`BackboneBlog.router.show(1)`时，它确实可以正常工作。只有当我去的时候`http://localhost:3000/#/1`，我才会遇到问题。但是，当我单击索引页面中的链接时，该链接直接链接到 `http://localhost:3000/#/1`

更搞笑的`BackboneBlog.router.posts`是正确的。但是，如果在我的代码中我准确地输入了那个，但是 add `BackboneBlog.router.posts.get(1)`，它返回未定义。但是，如果我在控制台中使用相同的 URL 运行该确切代码，它就可以工作。

这是我的代码：

> posts_router.js.coffee--

```
class BackboneBlog.Routers.PostsRouter extends Backbone.Router
  initialize: ->
    @posts = new BackboneBlog.Collections.PostsCollection()
    @posts.fetch()

  routes:
    "": "index"
    "new"      : "newPost"
    "index"    : "index"
    ":id/edit" : "edit"
    ":id"      : "show"
    ".*"       : "index"

  newPost: ->
    @view = new BackboneBlog.Views.Posts.NewView(collection: @posts)
    $("#posts").html(@view.render().el)

  index: ->
    @view = new BackboneBlog.Views.Posts.IndexView(posts: @posts)
    $("#posts").html("")
    $("#posts").html(@view.render().el)

  show: (id) ->
    console.log(@posts) #puts PostsCollection, with posts in it
    console.log(id) #puts 1
    @post = @posts.get(id)
    console.log(@post) #puts undefined 
    @view = new BackboneBlog.Views.Posts.ShowView(model: @post)
    $("#posts").html(@view.render().el)

  edit: (id) ->
    post = @posts.get(id)

    @view = new BackboneBlog.Views.Posts.EditView(model: post)
    $("#posts").html(@view.render().el) 
```

> show_view.js.coffee --

```
BackboneBlog.Views.Posts ||= {}

class BackboneBlog.Views.Posts.ShowView extends Backbone.View
  template: JST["backbone/templates/posts/show"]

  render: ->
    $(@el).html(@template(@model.toJSON() ))
    return this 
```

> index_view.coffee --

```
BackboneBlog.Views.Posts ||= {}

class BackboneBlog.Views.Posts.IndexView extends Backbone.View
  template: JST["backbone/templates/posts/index"]

  initialize: () ->
    @options.posts.bind('reset', @addAll)

  addAll: () =>
    $("tbody").html("")
    @options.posts.each(@addOne)

  addOne: (post) =>
    view = new BackboneBlog.Views.Posts.PostView({model : post})
    @$("table").append(view.render().el)

  render: =>
    $(@el).html(@template(posts: @options.posts.toJSON() ))
    @addAll()

    return this 
```

> 骨干博客.js.coffee --

```
window.BackboneBlog =
  Models: {}
  Collections: {}
  Routers: {}
  Views: {}
  init: ->
    @router = new BackboneBlog.Routers.PostsRouter()
    Backbone.history.start() 
```

谢谢大家！<3

编辑：
tl；博士：如果我直接访问`http://localhost:3000/#/1`我会得到错误，但是，如果我链接到那里，它工作得很好。如果我在控制台中键入它，它工作正常。只有当我直接导航到 URL 时它才不起作用。即便如此，在 show 方法中，一切正常，直到我直接得到帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:54:19.943

您的问题是您正在传递一个尚未获取的模型。因此模型是未定义的，因此您不能在未定义的模型上调用 .toJSON。异步函数非常具有误导性，尤其是在尝试 console.log 发生的事情时。所以拿这个例子来说，你 console.log 一个未定义的模型。现在，当获取该模型时，您记录的未定义模型将被替换为已获取的数据。因此，它看起来好像是按顺序发生的，但实际上您将未定义的模型传递到您的视图中。

这就是为什么当您浏览您的显示视图时，一切正常。这是因为您的收藏已被提取。当您从显示视图刷新时，仍需要获取集合，但您的显示视图不会等待您的集合被获取。

我希望这是有道理的。但是为了向您展示我的意思，请仅在获取集合的成功回调时调用路由器上的 show 方法。

让我知道我是否可以进一步帮助您。

# c++ - C ++：禁用控制台应用程序中的滚动..？

> ID：12994296
> 
> 赞同：2
> 
> 时间：2012-10-21T02:00:46.760
> 
> 标签：c++, visual-studio, winapi, console, cmd

我创建了一个无边界（和无滚动框）控制台应用程序，但我发现如果用户有一个触摸板并尝试用它滚动控制台，他就可以这样做。（显然，不能用普通鼠标完成。）

我想禁用此功能。

首先，我想为我的控制台创建某种消息处理系统，就像在 Win32 GUI 编程中一样，但这似乎是不必要的困难。

我还考虑过更改缓冲区大小，但我不知道该怎么做（我查看了 SetConsoleScreenBufferSize 但无法用它做任何有用的事情）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:24:53.370

问题已解决。。

我不小心使用`SetConsoleScreenBufferSize(hWnd, dwSize);`了`SetConsoleScreenBufferSize(GetStdHandle(STD_OUTPUT_HANDLE), dwSize);`

编辑：还有一个小错误。即使我将其设置`Console Screen Buffer Size`为尽可能小，用户仍然可以向上滚动几步（向下滚动，用户需要非常快地滚动，出于某种原因）我不知道是什么原因造成的，所以如果你有任何想法请告诉我。

# unix - 基于 2 列共同正确连接两个文件

> ID：12994298
> 
> 赞同：10
> 
> 时间：2012-10-21T02:01:02.110
> 
> 标签：unix, join, awk

我有两个文件我试图加入/合并基于列`1`和`2`. 它们看起来像这样，`file1`（`58210`行）比`file2`（`815530`行）短得多，我想根据字段`1`和`2`索引找到这两个文件的交集：

`file1`：

```
2L      25753   33158
2L      28813   33158
2L      31003   33158
2L      31077   33161
2L      31279   33161
3L      32124   45339
3L      33256   45339
... 
```

`file2`：

```
2L      20242   0.5     0.307692307692308
2L      22141   0.32258064516129        0.692307692307692
2L      24439   0.413793103448276       0.625
2L      24710   0.371428571428571       0.631578947368421
2L      25753   0.967741935483871       0.869565217391304
2L      28813   0.181818181818182       0.692307692307692
2L      31003   0.36    0.666666666666667
2L      31077   0.611111111111111       0.931034482758621
2L      31279   0.75    1
3L      32124   0.558823529411765       0.857142857142857
3L      33256   0.769230769230769       0.90625
... 
```

我一直在使用以下几个命令，但最终得到的行数不同：

```
awk 'FNR==NR{a[$1$2]=$3;next} {if($1$2 in a) print}' file1 file2 | wc -l
awk 'FNR==NR{a[$1$2]=$3;next} {if($1$2 in a) print}' file2 file1 | wc -l 
```

我不确定为什么会发生这种情况，我已经尝试在比较之前进行排序，以防我在两个文件中都有重复的行（基于列`1`和`2`），但这似乎没有帮助。（任何关于为什么会这样的见解也值得赞赏）

我怎样才能合并文件，以便只有那些行`file2`具有相应的列`1`并打印出来，添加列`2`，看起来像这样：`file1``3``file1`

```
2L      25753   0.967741935483871       0.869565217391304    33158
2L      28813   0.181818181818182       0.692307692307692    33158
2L      31003   0.36    0.666666666666667    33158
2L      31077   0.611111111111111       0.931034482758621    33161
2L      31279   0.75    1    33161
3L      32124   0.558823529411765       0.857142857142857    45339
3L      33256   0.769230769230769       0.90625    45339 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-21T04:02:21.773

```
awk 'NR==FNR{a[$1,$2]=$3;next} ($1,$2) in a{print $0, a[$1,$2]}' file1 file2 
```

看：

```
$ cat file1
2L      5753   33158
2L      8813   33158
2L      7885   33159
2L      1279   33159
2L      5095   33158
$
$ cat file2
2L      8813    0.6    1.2
2L      5762    0.4    0.5
2L      1279    0.5    0.9
$
$ awk 'NR==FNR{a[$1,$2]=$3;next} ($1,$2) in a{print $0, a[$1,$2]}' file1 file2
2L      8813    0.6    1.2 33158
2L      1279    0.5    0.9 33159
$ 
```

如果这不是您想要的，请澄清并发布一些更具代表性的示例输入/输出。

上述代码的注释版本以提供要求的解释：

```
awk ' # START SCRIPT

# IF the number of records read so far across all files is equal
#    to the number of records read so far in the current file, a
#    condition which can only be true for the first file read, THEN 
NR==FNR {

   # populate array "a" such that the value indexed by the first
   # 2 fields from this record in file1 is the value of the third
   # field from the first file.
   a[$1,$2]=$3

   # Move on to the next record so we don't do any processing intended
   # for records from the second file. This is like an "else" for the
   # NR==FNR condition.
   next

} # END THEN

# We only reach this part of the code if the above condition is false,
# i.e. if the current record is from file2, not from file1.

# IF the array index constructed from the first 2 fields of the current
#    record exist in array a, as would occur if these same values existed
#    in file1, THEN
($1,$2) in a {

   # print the current record from file2 followed by the value from file1
   # that occurred at field 3 of the record that had the same values for
   # field 1 and field 2 in file1 as the current record from file2.
   print $0, a[$1,$2]

} # END THEN

' file1 file2 # END SCRIPT 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-21T02:18:23.997

如果您想逐行加入文件，请使用以下命令：

```
join -o 1.2,1.3,2.4,2.5,1.4 <(cat -n file1) <(cat -n file2) 
```

当您更新问题时：

```
join -o 1.1,2.2,2.3,1.2 <(sed 's/[[:space:]]\+/@/' file1|sort) \
    <(sed 's/[[:space:]]\+/@/' file2|sort)|sed 's/@/\t/' 
```

首先用一些非空格字符替换每行中的第一个分隔符并对两个输入文件进行排序。然后用于`join`进行实际连接。过滤掉它的输出，用空格替换非空格字符。

这是有问题的文件的输出：

```
xyz]$ join -o 1.1,2.2,2.3,1.2 <(sed 's/[[:space:]]\+/@/' file1|sort) \
<(sed 's/[[:space:]]\+/@/' file2|sort)|sed 's/@/\t/'

2L  25753 0.967741935483871 0.869565217391304 33158
2L  28813 0.181818181818182 0.692307692307692 33158
2L  31003 0.36 0.666666666666667 33158
2L  31077 0.611111111111111 0.931034482758621 33161
2L  31279 0.75 1 33161
3L  32124 0.558823529411765 0.857142857142857 45339
3L  33256 0.769230769230769 0.90625 45339 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T02:23:02.457

您可以使用该`join`命令，但您需要在每个数据表中创建一个连接字段。假设您`2L`在第 1 列中确实有其他值，那么无论两个输入文件的排序或未排序性质如何，此代码都应该工作：

```
tmp=${TMPDIR:-/tmp}/tmp.$$
trap "rm -f $tmp.?; exit 1" 0 1 2 3 13 15

awk '{print $1 ":" $2, $0}' file1 | sort > $tmp.1
awk '{print $1 ":" $2, $0}' file2 | sort > $tmp.2

join -o 2.2,2.3,2.4,2.5,1.4 $tmp.1 $tmp.2

rm -f $tmp.?
trap 0 
```

如果您有`bash`“处理替换”，或者如果您知道数据已经正确排序，则可以简化处理。

* * *

我不完全确定您的代码为什么不起作用，但我可能会使用`a[$1,$2]`下标；如果您的第 1 列中的某些值是纯数字，那么它会给您带来更少的麻烦，因此当您连接第 1 列和第 2 列时可能会感到困惑。这就是“密钥创建”`awk`脚本在字段之间使用冒号的原因。

* * *

修改后的数据文件如图所示：

### 文件 1

```
2L      5753   33158
2L      8813   33158
2L      7885   33158
2L      7885   33159
2L      1279   33158
2L      5095   33158
2L      3256   33158
2L      5372   33158
2L      7088   33161
2L      5762   33161 
```

### 文件2

```
2L      5095    0.666666666666667       1
2L      5372    0.5     0.925925925925926
2L      5762    0.434782608695652       0.580645161290323
2L      5904    0.571428571428571       0.869565217391304
2L      5974    0.434782608695652       0.694444444444444
2L      6353    0.785714285714286       0.84
2L      7088    0.590909090909091       0.733333333333333
2L      7885    0.714285714285714       0.864864864864865
2L      7902    0.642857142857143       0.810810810810811
2L      8263    0.833333333333333       0.787878787878788 
```

（与问题相同。）

### 输出

```
2L 5095 0.666666666666667 1 33158
2L 5372 0.5 0.925925925925926 33158
2L 5762 0.434782608695652 0.580645161290323 33161
2L 7088 0.590909090909091 0.733333333333333 33161
2L 7885 0.714285714285714 0.864864864864865 33158
2L 7885 0.714285714285714 0.864864864864865 33159 
```

# python - Python 列表列表

> ID：12994303
> 
> 赞同：6
> 
> 时间：2012-10-21T02:02:16.447
> 
> 标签：python, list

> **可能重复：**
> [Python 列表中的意外功能](https://stackoverflow.com/questions/240178/unexpected-feature-in-a-python-list-of-lists)

我想在 Python 中制作一个列表列表，但显然这不起作用，因为更改一个数字会改变几个。为什么会这样，我该如何解决？

```
>>> a = [[0]*3]*4
>>> a[0][0] = 1
>>> a
[[1, 0, 0], [1, 0, 0], [1, 0, 0], [1, 0, 0]] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T02:07:31.127

您发现的是一个[经典的 Python 陷阱](https://stackoverflow.com/a/1025447/190597)。

`x = [0]*3`是一个列表。那里没问题，但`[x]*4`会创建一个包含 4 个对完全相同 list 的引用的列表`x`。因此，修改第一个元素 ，`x`也会修改其他元素。

相反，如果你这样做：

```
In [193]: a = [[0]*3 for i in range(4)] 
```

然后您会在列表中获得 4 个不同的项目：

```
In [194]: a[0][0] = 1

In [195]: a
Out[195]: [[1, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T02:12:04.670

在 Python 中，`[x]*n`创建一个包含`n`对`x`. `x`如果是不可变的（字符串、元组等），这是非常好的，但是如果`x`是可变的，它会变得相当混乱，因为对一个元素的更改会影响`x`，因此似乎会影响列表的所有元素。

因此，解决方案是使用列表推导来创建`n`新事物：

```
[x for _ in xrange(n)] # we use _ here as a "dummy variable" 
```

在你的情况下，它看起来像

```
a = [[0]*3 for _ in xrange(4)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T02:08:25.790

不要使用`*`. 使用列表理解并创建如下：

```
>>> a = [[0 for i in range(3)] for j in range(4)]
>>> a[0][0] = 1
>>> a
[[1, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]] 
```

请参阅 unutbu 和 nneonneo 的答案以获得更好的解释。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-21T02:07:40.150

在列表中使用`*`时，它会创建副本，因此当您执行`a[0][0]=1`所有其他子列表的复制时。

为了解决这个问题，请使用[生成器表达式](http://www.python.org/dev/peps/pep-0289/)来创建您的列表。

# sql - 如何在 SQL 输出中复制记录

> ID：12994304
> 
> 赞同：2
> 
> 时间：2012-10-21T02:02:31.063
> 
> 标签：sql, ms-access, duplicates

我的问题与[SQL 如何创建重复记录？](https://stackoverflow.com/questions/10070816/how-can-sql-create-duplicate-records). 但是，我正在尝试在 Access 中执行此操作，但那里的解决方案似乎都不适用。最好，我想要一个 SQL 语句。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:28:50.637

该链接问题的已接受答案可适用于 Access。`num`从用户界面创建表。如果要使用 DDL 语句创建表，请使用它。

```
Dim strDdl As String
strDdl = "CREATE TABLE num (" & vbCrLf & _
    "i INTEGER PRIMARY KEY" & vbCrLf & _
    ");"
Debug.Print strDdl
CurrentProject.Connection.Execute strDdl 
```

加载`num`表。在 Access 中，一个 VBA 过程会很方便。

```
Public Sub Load_Num_table()
    Dim db As DAO.Database
    Dim rs As DAO.Recordset
    Dim x As Long

    Set db = CurrentDb
    Set rs = db.OpenRecordset("num", dbOpenTable, dbAppendOnly)
    For x = 1 To 100
        rs.AddNew
        rs!i = x
        rs.Update
    Next x
    rs.Close
    Set rs = Nothing
    Set db = Nothing
End Sub 
```

准备好`num`表和名为*tableX*的其他表后，使用此 SQL 语句返回包含重复行的行集。

```
SELECT t.id, t.name
FROM
    tableX AS t
    INNER JOIN num 
    ON num.i <= t.count; 
```

该`SELECT`声明与@ypercube 在接受的另一个问题的答案中建议的唯一真正区别是，`INNER JOIN`而不是只是`JOIN`. Access' db 引擎不会`JOIN`单独接受；您必须指定连接类型（内、左或右）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T02:49:58.563

Insert Into TableName (field 1, field 2, ...) Select * From TableName;

如果你有主键会出错。

# java - GWT：什么时候使用 LazyDomElement？

> ID：12994312
> 
> 赞同：6
> 
> 时间：2012-10-21T02:03:36.693
> 
> 标签：java, gwt, dom, widget

我正在阅读 GWT 以准备我的第一个 GWT 应用程序，偶然发现了[LazyDomElement](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/uibinder/client/LazyDomElement.html)并发现它很有趣。

我的*理解*是，当您真正想要创建自己的 Widget 子类（而不仅仅是简单地 extend `Composite`）时，您需要做各种额外的工作来将该 Widget 与 DOM 接口。

所以我问：你必须做的“额外工作”是什么——你（基本上）从子类化中免费获得`Composite`——以及你如何使用 a`LazyDomElement`来使这更容易或提高性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T18:36:36.953

从 GWT 文档和源代码来看，这个类似乎只是关于**UIBinder**功能，并且没有任何基本 GWT 小部件使用这个类。的主要和唯一功能`LazyDomElement`是延迟访问小部件的字段。假设您有一个带有模板的小部件：

```
<gwt:HTMLPanel>
  <div ui:field="lazyField" />
  <div ui:field="generalField" /> 
  <!-- Other fields -->
</gwt:HTMLPanel> 
```

和它的Java类：

```
public class MyCoolWidget extends UIObject {
  interface MyUiBinder extends UiBinder<DivElement, MyCoolWidget> {}
  private static MyUiBinder uiBinder = GWT.create(MyUiBinder.class);

  @UiField LazyDomElement<DivElement> lazyField;

  @UiField DivElement generalField;

  // all other fields …

  public MyCoolWidget() {
    // Initializes all your fields and also calls 'getElementById' for all
    // not lazy fields of your widgets to have a reference to them.
    // There could be hundreds of them if you are building really cool app, 
    // and also they could be hidden (e.g. other tab on UI) and not required 
    // to be accessed at all for some cases.
    setElement(uiBinder.createAndBindUi(this));
  }

  public void setLazyField(String value) { 
    // Finally we need to modify the field, ok, 
    // we access the DOM only at this moment
    // (please take a look at 'get()' method implementation for details)  
    lazyField.get().setInnerText(name); 
  }

  public void setGeneralField(String value) { 
    // Reference to element is already there, we are just going  
    // to change it's property
    generalField.setInnerText(name); 
  } 
} 
```

因此，使用它的原因仅取决于您的应用程序的**特定情况**，您是否需要延迟加载小部件元素。

**UPD。**值得一提的是，我还没有在实际项目中使用过这个类:)。我可以想象一些场景。例如，您需要构建一个门票预订面板。具有以下初始要求：

*   应支持最多 N 位旅客的机票预订
*   每个旅行者的输入表单都相同且相当繁重（丰富的 html，很多输入字段）

因此，您需要一次渲染多达 10 个相同的丰富表单，而无需在页面加载之前访问它们的字段。我们可以构建`ReservationForm`小部件（`ReservationForm.ui.xml`带有标记和`ReservationForm.java`一些逻辑）并`LazyDomElement`用于输入字段以节省我们的第一次加载时间。

# php - 使用 PDO 的 MySQL 中的 HTML 表：记录未正确显示（零星重复、不合适等）

> ID：12994313
> 
> 赞同：0
> 
> 时间：2012-10-21T02:03:39.473
> 
> 标签：php, html, mysql, loops, pdo

我正在使用 PHP 循环从 MySQL 数据库中填充 HTML 表。我使用 PDO 将 SQL 查询的结果提取到 $result 中：

```
$result = $pdo->query($sql); 
```

（其中 $sql 是一个 SELECT 查询）

然后我正在构建一个这样的 HTML 表：

```
if($result !== false) 
        {

            $html_table = '
            <table border="1" cellspacing="0" cellpadding="2">
                <tr>';

            foreach($titles as $title)
            {
            $html_table .= "<th> $title </th>";                          
            }

            $html_table .='</tr> <tr>';

            foreach( $result->fetchAll() as $row ) 
            {
                $html_table .= '<tr>' . "\n";

                foreach( $row as $col ) 
                {
                $html_table .= '<td>' .$col. '</td>';
                }
                $html_table .= '</tr>' . "\n";
            }
        } 
```

这个想法是在 $result 中获取每条记录，将它们定义为一个名为 $row 的数组，然后遍历每条记录并以这种方式构建表。

问题是，表格出现错误 - 我无法辨别模式，但有几个单元格偶尔重复（相同的数据并排出现）。

知道我在哪里出错了吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:17:45.673

想出了这个！:)

如果有帮助，我会在这里为其他人发布我的解决方案。

问题是您可以在 PDO 中 fetchAll 的不同方式。在我上面的代码中，我只是使用默认的 fetchAll()

这会产生这样的数组数组：

```
Array
(
    [0] => Array
        (
            [NAME] => pear
            [0] => pear
            [COLOUR] => green
            [1] => green
        )

    [1] => Array
        (
            [NAME] => watermelon
            [0] => watermelon
            [COLOUR] => pink
            [1] => pink
        )

) 
```

请注意，对于每个列名称，有两个条目，一个用于名称，一个用于索引编号（不确定这是否正确，但您可以看到发生了什么）。

出于我的目的，我需要每列一个条目，因此切换到：

```
$result->fetchAll(PDO::FETCH_ASSOC) 
```

这给出了这个数组：

```
Array
(
    [0] => Array
        (
            [NAME] => pear

            [COLOUR] => green

        )

    [1] => Array
        (
            [NAME] => watermelon

            [COLOUR] => pink

        )

) 
```

并解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T10:43:26.850

这是一些获取列标题的代码：

```
 $colcount = $result->columnCount();
    for ($i = 0; $i < $colcount; $i++){
        $meta = $result->getColumnMeta($i)["name"];
        echo('<th>' . $meta . '</th>');
    } 
```

# html - Twitter Bootstrap 下拉菜单问题

> ID：12994314
> 
> 赞同：2
> 
> 时间：2012-10-21T02:03:46.540
> 
> 标签：html, drop-down-menu, twitter-bootstrap

我是 Bootstrap 的新手，正在学习如何使用它。[单击此](http://test.rfahaiti.org)测试版站点时，我无法将简单的下拉菜单“下拉” 。

如果有人可以查看我的页面源并让我知道出了什么问题，我将不胜感激。下面是下拉菜单的html。

```
 <div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="/">Restavec Freedom Alliance</a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="active"><a href="/">Home</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="/blog">Blog</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li class="nav-header">Nav header</li>
              <li><a href="#">Separated link</a></li>
              <li><a href="#">One more separated link</a></li>
            </ul>
          </li>
        </ul>
        </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T02:07:04.707

```
<script type="text/javascript" src="/assets/js/bootstrap.js"></script>
<script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/assets/js/bootstrap-dropdown.js"></script> 
```

您的菜单无法正常工作的原因是您要启动相同的脚本 3 次。`bootstrap.js`和变体将`.min.js`所有插件打包在其中，一个是完整的开发版，另一个是用于生产的缩小版。第三个脚本是一个松散的插件脚本，如果您已经包含了打包版本，则不需要它。因此，删除标题中加载的第二个和第三个脚本，您的菜单应该可以工作。

**编辑**

刚刚注意到其他事情，`.collapse`该类也阻止了菜单显示，因为它仅在移动导航折叠时使用，因此不需要包含它。

# javascript - 我有一堆不同大小的图像。如何在保持比例的同时重新调整它们的大小？

> ID：12994318
> 
> 赞同：5
> 
> 时间：2012-10-21T02:04:58.720
> 
> 标签：javascript, html, css, pixel, counter

这比听起来更棘手，所以让我尽力解释一下。

我专门处理来自 HM 和 Net-a-porter 等网站的服装图片。我想将这些图像添加到我的网站，将它们垂直堆叠，以便它们创建一套服装。

我需要重新调整衬衫的尺寸，使其按比例放置在牛仔裤的顶部。牛仔裤的尺寸固定为 100 像素宽 x 250 像素长。当我将衬衫的大小调整为相同的宽度（100 像素）时，它有时会匹配。使用不同的衬衫（可能是长袖、无袖等）会导致混合结果，并且与牛仔裤的 100 像素宽度的腰围不匹配。

保存时，这些图片在 jpeg 中包含一定数量的空白区域，这些空白区域因图像而异。我尝试在有和没有空白的情况下调整大小（通过将其裁剪到项目的边缘），但这也无济于事。

这一切都应该是一个自动化的过程（比如在 Polyvore 的 Pinterest 上使用剪辑工具），因此以上任何一项都不能通过 Photoshop 或手工完成，这使得它变得更加困难。

我的问题的截图可以在这里找到：

![在此处输入图像描述](../Images/5fdf1189bb847a388a8fb95962451717.png)

我还研究了像素计数器脚本，想知道是否可以通过计算服装项目腰线的像素宽度来调整大小（不包括所有白色像素数据）？

我觉得我正在深入到“无法完成，变量太多”的特定领域，并且希望有人至少能指出我正确的方向。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:11:02.813

使用 CSS`max-width`并`max-height`设置比例。这将适当地扩展一切。

例如：

`img { max-width: 100px; }`

这是一个 JS 小提琴：http: [//jsfiddle.net/KSzhS/](http://jsfiddle.net/KSzhS/)

做起来并不难。

这是我为“基本上”做同样的事情而编写的一个函数，但它不是分析衣服，而是分析字母。它是用 PHP 编写的，但如果您可以使用 HTML5，您也可以在客户端执行此操作。

```
/**
* Function: Returns the space between letters, and the width of letters.
*           The first index is set to 0, as that is where it starts
*           Since spaces don't register (no pixels), strlen may not work.
* $image image cursor (from imagecreatetruecolor)
*/
function get_letter_dimensions($image)
{
   $bg           = imagecolorallocatealpha($image, 0, 0, 0, 127);
   $height       = imagesy($image) - 1; // was causing issues without
   $width        = imagesx($image);
   $bottom       = 0;
   $right        = 0;
   $letter_space = array(0=>0); // This holds the pixels between the letters
   $letter_width = array(0=>0); // This holds the width of the letters
   $y            = $height;
   $spacing      = 0;
   $lettering    = 0;
   $data         = array();

   for ($x = 0 ; $x < $width ; $x++) 
   {
      while((imagecolorat($image, $x, $y) == $bg) && ($y >= 1 )) $y--;

      if($y == 0) 
      {
         if($lettering) $letter_width[] = $lettering;
         $lettering = 0;
         $spacing++;
      }
      else
      {
         if($spacing) $letter_space[] = $spacing;
         $spacing = 0;
         $lettering++;
      }
      $y = $height;
   }

   foreach($letter_space as $k=>$val) $data[$k] = $val + $letter_width[$k];

   return $data;      
} 
```

不过，您需要对其进行修改，以便它不会插入字母，但是您将从头开始，当您遇到不清晰或白色的像素时，您会对其进行标记，并且从最后开始。然后你就会有你的参考点。

这只是一些简单的数学和服装分析。如果您对“腰线”匹配感兴趣，您可能希望从底部开始，然后向上，以获得衬衫的图像。然后你可以看到像素的“线”在哪里，这将代表腰部的位置。并以此为基础进行计算。

因此，如果您想帮助自己，`echo`请从提供的函数开始获取结果，以便您可以看到它的样子

## 例子

```
------------------------------
------------------------------
------------------------------
------------------------------
-------**-------------**------
------*--*-----------*--*-----
-----*-------------------*----
------------------------------
----------***********---------
--***---------------------***-
------------------------------ 
```

那就是如果你从下往上走，你可以“看到”，腰线在哪里。然后计算像素，并从中调整大小。您可以修改此功能以创建另一个自动裁剪功能。此外，如果您愿意，可以修改此功能，以便您可以从顶部开始，或者横向并从任一侧开始。您甚至可以发疯并允许使用偏移量。

一旦你设置了这种类型的信息，你就可以真正开始找出你正在使用什么。如果您正在处理永远不会使用 0,0 像素的图像，您可以尝试将其用作背景颜色。这将有助于自动裁剪功能。

您进行的测量点越多，您的分析就越智能。而且，如果您可以访问有关您正在查看的内容的信息，例如，您拥有与其他数据相关联的图像，那么您可以采取一些捷径（因此您不必进行大量分析即可知道如果您正在使用“裤子”、“裙子”、“衬衫”和“连衣裙”）。

## 编辑：其他想法

只是想了想……这实际上是您正在做的一件非常整洁的小事，我正在考虑编写自己的版本来取乐。这是我一直在考虑的一些事情。实施如何拉入这些图像很重要。

*   您是否从目录中提取所有数据？
*   您是否已经将图像设置为不同的，以便您知道自己在拉什么？
*   你知道什么是衬衫，什么是裤子吗？

您还可以设置“审查过程”，将偏移存储在缩放的原始图像上。这将允许您绕过计算，而只是查找存储的数据。无论如何，“审查过程”将允许您仔细检查计算是否已设置，然后存储它们。

我不知道。如果我做这样的事情，我会告诉你的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:31:11.123

使用没有高度的图像的宽度属性..它调整图像的大小保持纵横比。例子：

```
<img src="yourpic.jpg" width="100px"> 
```

不包括 height 属性，因为它会改变它在纵横比之外的高度。只需更改该宽度值，直到它与您想要的尺寸相匹配。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:25:40.950

调整图像大小无助于减小图像的大小，是的，当图像减小到原始大小时，可以看到一些模糊效果。

首先明确您的要求 1）为什么要调整图像大小？根据您的要求，解决方案会有所不同。2）如果你想调整图像的比例，那么你需要Photoshop工具到你需要的大小，这将减小图像大小并保持清晰度。3）如果您只想通过保持原始比例来调整图像大小，请阅读我的第一条声明。

希望这将清除图像的使用。

# iphone - 新的 iPhone YouTube 应用程序 - 你如何在盒子里播放视频？

> ID：12994319
> 
> 赞同：2
> 
> 时间：2012-10-21T02:05:28.473
> 
> 标签：iphone, youtube-api

新的 iPhone 版 YouTube 应用程序在纵向模式下在屏幕上的指定区域播放 YouTube 视频，而视频不会占据整个手机。这是我第一次看到这样做。你能告诉我吗

1.  这是如何实现的？
2.  有哪些可用选项（可以隐藏洗涤器，比如无铬播放器）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:56:03.137

这是一个提交给 youtube 的增强功能，可以做到这一点。它已发送给 youtube 的工程团队，但我们不知道他们是否/何时会接受它。

[http://code.google.com/p/gdata-issues/issues/detail?id=3007](http://code.google.com/p/gdata-issues/issues/detail?id=3007)

# java - 在 java 中使用“@SuppressWarnings("unchecked")”有什么好处？

> ID：12994324
> 
> 赞同：3
> 
> 时间：2012-10-21T02:06:09.457
> 
> 标签：java, arraylist, annotations, iterator

当我阅读 jdk 源代码时，我找到了注释，但我不确定为什么在这里使用它？
在 java 中使用“@SuppressWarnings("unchecked")”有什么好处？
我们什么时候应该使用它，为什么？
来自jdk源代码的示例代码

```
 private class Itr implements Iterator<E> {
        int cursor;       // index of next element to return
        int lastRet = -1; // index of last element returned; -1 if no such
        int expectedModCount = modCount;

        public boolean hasNext() {
            return cursor != size;
        }

        @SuppressWarnings("unchecked")
        public E next() {
            checkForComodification();
            int i = cursor;
            if (i >= size)
                throw new NoSuchElementException();
            Object[] elementData = ArrayList.this.elementData;
            if (i >= elementData.length)
                throw new ConcurrentModificationException();
            cursor = i + 1;
            return (E) elementData[lastRet = i];
        }

        public void remove() {
            if (lastRet < 0)
                throw new IllegalStateException();
            checkForComodification();

            try {
                ArrayList.this.remove(lastRet);
                cursor = lastRet;
                lastRet = -1;
                expectedModCount = modCount;
            } catch (IndexOutOfBoundsException ex) {
                throw new ConcurrentModificationException();
            }
        }

        final void checkForComodification() {
            if (modCount != expectedModCount)
                throw new ConcurrentModificationException();
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T02:11:13.153

它可以抑制由 生成的警告`(E) elementData[lastRet = i]`，这对于编译器来说是不安全的类型。编译器无法保证强制转换在运行时会成功。

但是由于编写代码的人知道它总是安全的，所以决定使用`@SuppressWarnings("unchecked")`来抑制编译时的警告。

当我确定它会安全时，我主要使用它，因为它使我的代码在我的 Ecpise IDE 上看起来更干净。

# php - 优化php页面中的大数据

> ID：12994326
> 
> 赞同：1
> 
> 时间：2012-10-21T02:06:14.740
> 
> 标签：php, mysql, sql, large-data

我正在尝试加快查询 200K 行数据并将其显示在网页中所需的时间，通常需要大约 20-30 秒，但目前我已经将其缩短到大约 7-10 秒。我仍然需要它最多运行 3-7 秒。

在我的查询中，我选择了单个表中的所有行并将大约 5 列放入 PHP 脚本中。查询是这样的：

```
SELECT * FROM table where company = ? and division = ?; 
```

我只是从我的会话中添加参数。*然后我在.inc*文件中发送查询和参数，然后*inc*运行查询。但它也运行单独的数据分页查询。然后它将比较这两个查询以检查两者之间的任何违规行为。然后它将数据放置在新窗口中。

是否有任何已知的算法或技术可以用来加速这个过程？我已经删除了所有垃圾代码并加快了一些功能，但它仍然很慢。

PS：*我也是两天前才处理过系统，所以我还在熟悉结构。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T02:39:54.820

1.  使用到数据库的持久连接来避免连接开销。

2.  检查所有表在具有高基数的列上具有主键（许多行与键值匹配）。好吧，`gender`列具有低基数（选择性），唯一用户 ID 列具有高基数，是成为主键的良好候选者。

3.  不同表之间的所有引用通常都应使用索引完成（这也意味着它们必须具有相同的数据类型，以便基于相应列的连接会更快）。还要检查您经常需要搜索的字段（经常出现在 WHERE、ORDER BY 或 GROUP BY 子句中）是否具有索引，但不要添加太多：您可以做的最糟糕的事情是在每个列上添加索引一个表（我还没有看到一个表有超过 5 个索引的表，甚至 20-30 列大）。如果您从未在比较中引用某个列，则无需对其编制索引。

4.  在发出 GRANT 语句时使用更简单的权限可以使 MySQL 在客户端执行语句时减少权限检查开销。

5.  通过将列声明为保留存储在其中的值所需的大小，每行使用更少的 RAM。

6.  使用最左边的索引前缀——在 MySQL 中，您可以在多个列上定义索引，以便该索引的左侧部分可以单独使用，这样您就需要更少的索引。

7.  当您的索引由许多列组成时，为什么不创建一个简短、合理唯一且已编入索引的哈希列呢？然后您的查询将如下所示： SELECT * FROM table WHERE hash_column = MD5( CONCAT(col1, col2) ) AND col1='aaa' AND col2='bbb';

8.  考虑在加载数据后在表上运行 ANALYZE TABLE（或命令行中的 myisamchk --analyze）以帮助 MySQL 更好地优化查询。

9.  尽可能使用 CHAR 类型（而不是 VARCHAR、BLOB 或 TEXT）— 当列的值具有恒定长度时：MD5 哈希（32 个符号）、ICAO 或 IATA 机场代码（4 和 3 个符号）、BIC 银行代码（3 个符号） ) 等。可以更快地找到 CHAR 列中的数据，而不是可变长度数据类型列中的数据。

10.  如果列太多，请不要拆分表。在访问一行时，最大的性能损失是查找行的第一个字节所需的磁盘寻道。

**更多请访问：**

[http://www.ajaxline.com/32-tips-to-speed-up-your-mysql-queries](http://www.ajaxline.com/32-tips-to-speed-up-your-mysql-queries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T02:08:56.807

首先，确保该表上有一个索引。如果您的查询同时包含`company`和`division`在您的 where 子句中，则跨字段的复合索引会很好地工作。

其次，不要为分页运行第二个查询！使用子句运行第一个查询`limit`，缓存您需要的内容，然后从那里分页。

# css - XML CSS中的多种背景颜色？

> ID：12994336
> 
> 赞同：0
> 
> 时间：2012-10-21T02:08:19.113
> 
> 标签：css, xml, margin, background-color

[http://www.flickr.com/photos/88803891@N03/8104680761/in/photostream/lightbox/](http://www.flickr.com/photos/88803891@N03/8104680761/in/photostream/lightbox/) http://www.flickr.com/photos/88803891@N03/8104680347/in/photostream/lightbox/

我想以这种格式显示背景。但我不知道如何设置背景颜色之间的边距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:26:01.950

`border`白色区域使用 css ，`background-color`粉红色区域使用 css。

见例子：http: [//jsfiddle.net/QAjh3/](http://jsfiddle.net/QAjh3/)

CSS：

```
.colored {
    background-color: pink;
    border: 10px solid #fff;
    width: 80px;
    height:40px;
} 
```

html:

```
<div class="colored"></div> 
```

# json - Elisp - 来自 API 的响应的 json-read-from-string

> ID：12994340
> 
> 赞同：5
> 
> 时间：2012-10-21T02:08:58.303
> 
> 标签：json, emacs, elisp

我正在使用 json.el 和 furl.el 从 toggl.com 的 API 获取时间条目 - 不幸的是，我认为它不会将响应分成多个列表：

JSON 响应（数据中的两个条目）：

```
{"data":[{"id":50439783,"description":"bar","billable":false,"start":"2012-10-20T18:07:00Z","stop":"2012-10-20T22:39:00Z","duration":16320,"workspace":{"id":172049,"name":"Dan's workspace"},"tag_names":[],"ignore_start_and_stop":false,"updated_at":"2012-10-20T22:40:26Z","user_id":231062},{"id":50440682,"description":"Test Time Entry","billable":false,"start":"2012-10-20T23:40:16Z","stop":"2012-10-20T23:50:16Z","duration":600,"workspace":{"id":172049,"name":"Dan's workspace"},"tag_names":[],"ignore_start_and_stop":false,"updated_at":"2012-10-20T23:51:32Z","user_id":231062}],"related_data_updated_at":"2012-10-19T00:00:00Z"} 
```

json-read-from-string 响应：

```
(related_data_updated_at . 2012-10-19T00:00:00Z)                                                                                                                          
(data . [((user_id . 231062) (updated_at . 2012-10-20T22:40:26Z) (ignore_start_and_stop . :json-false) (tag_names . []) (workspace ... ...) (duration . 16320) (stop . 20\
12-10-20T22:39:00Z) (start . 2012-10-20T18:07:00Z) (billable . :json-false) (description . bar) (id . 50439783)) ((user_id . 231062) (updated_at . 2012-10-20T23:51:32Z) \
(ignore_start_and_stop . :json-false) (tag_names . []) (workspace ... ...) (duration . 600) (stop . 2012-10-20T23:50:16Z) (start . 2012-10-20T23:40:16Z) (billable . :jso\
n-false) (description . Test Time Entry) (id . 50440682))]) 
```

因此，如果该列表被认为是多个条目，我该如何访问第一个？car 显示related_data_updated_at 和关键数据。cdr 显示related_data_updated_at 的值，以及其他所有内容。

我认为 elisp 不会有太大帮助，但这里只是以防万一：

```
(defun toggl-display-time-entries(json-string)                                                                                                                            
  (with-current-buffer (get-buffer-create "Toggl")                                                                                                                        
    (erase-buffer)                                                                                                                                                        
    (let ((inhibit-read-only t)                                                                                                                                           
          (time-entries (json-read-from-string json-string)))                                                                                                             
      (dolist (time-entry time-entries)                                                                                                                                   
        (newline)                                                                                                                                                         
        (insert (format "%s" (cdr time-entry))))))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T03:47:02.803

您已经很接近了，但您需要提取 ' 数据，然后遍历数组，而不是列表。例如，这会打印数组中每个项目的用户 ID：

```
(let ((array-of-times
       (cdr 
    (assoc 'data
           (json-read-from-string json-string)))))
  (let ((c (length array-of-times)))
    (dotimes (n c)
      (insert (format "user_id %s\n" (cdr (assoc 'user_id (elt array-of-times n)))))))) 
```

# perl - 使用 Test::More，如何在我的测试函数中打印出调试消息？

> ID：12994341
> 
> 赞同：2
> 
> 时间：2012-10-21T02:09:11.443
> 
> 标签：perl

我为一个函数编写了一些测试用例`foo`。

一些测试用例失败，为了调试和发现问题，我希望在 function 中打印一些调试消息`foo`。

我的尝试是：

*   打印到stdout，后来才知道`Test::More`不想让我修改stdout。
*   打印到stderr，执行时不显示我的消息`make test`

我了解到`diag` `note`and `explain`，我在`diag('test')`里面做了`foo`但是没有打印消息。它们的示例表明它们将在测试用例函数中使用。

我真的想在`foo`我运行测试用例时打印一条消息！

那么实现这一目标的最正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:34:08.523

ug，谈论糟糕的关注点分离。它看起来像：

```
package My::Module;

sub some_func {
   ...
   Test::More::diag(...) if defined(&Test::More::diag);
   ...
}

... 
```

我更愿意创建一种机制来将数据传递给调用者。我曾经使用调试钩子来实现类似的东西。

```
{
   my $diag;
   local $My::Module::DEBUG_HOOK = sub {
      my (...) = @_;
      $diag = ...;
   };

   is(My::Module::some_func(...), ..., ...)
      or diag($diag);
} 
```

该模块看起来像：

```
package My::Module;

our $DEBUG_HOOK;

sub some_func {
   ...
   $DEBUG_HOOK->(...) if $DEBUG_HOOK;
   ...
}

... 
```

`note`奖励：您知道可以选择仅在错误时输出诊断信息，或者`diag`根据测试是否成功进行切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:26:25.953

感谢大家的关注。

我终于想通了..

在我的功能中

```
sub foo {
    diag('hahahah');
} 
```

在我的测试中：

```
ok(Package::foo()); 
```

我跑的时候没有看到'hahahaha'的输出`perl Makefile.PL; make test`

我阅读了 Test::More 的 perldoc 并注意到 diag/note 的示例用法来自测试文件，而不是来自测试的函数，这让我有点困惑：我认为 diag/note 只能用于测试用例，不在测试功能中。

那为什么一开始没有打印出'hahahah'呢？

原因是……我`use Test::More;`的包里没有`foo`。将线放在那里后，我可以在输出中看到“哈哈哈”。

我没有收到关于`diag not found`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T04:24:15.507

尝试写入文件：

```
open my $fh, '>>', '/tmp/test.log';
  print $fh "my awesdome message\n";
close $fh; 
```

虽然，如果您在 stderr 上看不到输出，您的函数可能不会执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-01T20:35:38.187

我正在使用：$ make test TEST_VERBOSE=1

# java - 如何使用scanner.next() 读取空格

> ID：12994342
> 
> 赞同：4
> 
> 时间：2012-10-21T02:09:29.237
> 
> 标签：java, whitespace, next

我有一个扫描仪，并将分隔符设置为“”，但它仍然不会使用 next() 方法读取空格。我知道 nextline() 有效，但我需要单独检查输入中的每个字符，包括空格；这是一个复杂的数据分析问题。不过，我很难过。谷歌一无所获。

谁能帮我这个？我正在考虑将空格反转为特殊字符，然后出于分析字符的目的，将其反转回包含在字符串中的空格...不过，这似乎有点矫枉过正！有没有更优雅的方式来做到这一点？

编辑：我的主要任务是，获取一个字符串，并逐个字符地检查它，多次检查各种任务的数据。你将不得不多次检查它，一次一个字符，所以我认为扫描仪类是我最好的选择，因为它很容易使用（至少对我来说）。那是我的任务。有没有更简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T05:15:30.280

```
Scanner scanner = new Scanner(file).useDelimiter("'") 
```

但这是非常低效的。更好的方法是：逐字符阅读：

```
private static void readCharacters(Reader reader)
        throws IOException {
    int r;
    while ((r = reader.read()) != -1) {
        char ch = (char) r;
        doSomethingWithChar(ch);
    }
} 
```

另见[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-22T06:15:50.600

代替

```
scanner.next(); 
```

采用

```
scanner.nextLine(); 
```

这样您就可以解决分隔符的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-27T20:31:48.247

尝试`.useDelimiter("(\\b|\\B)")`

它将使用每个字符的边界作为分隔符。

以下代码将准确打印用户键入的内容。不会忽略任何字符，包括空格。

```
Scanner charScanner = new Scanner( System.in ).useDelimiter( "(\\b|\\B)" ) ;
while( charScanner.hasNext() ) 
    System.out.print( charScanner.next() ) ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T05:06:05.227

使用 a`BufferedReader`读取一行输入，然后在循环中迭代字符串`for`，使用 each `char`。
您可以通过 . 检查字符是否为空格`Character.isWhitespace(char c)`。

# ruby-on-rails - 从 .doc、.docx 和 rtf 文件中获取文本并将它们显示到文本字段 (Rails)

> ID：12994345
> 
> 赞同：1
> 
> 时间：2012-10-21T02:09:51.530
> 
> 标签：ruby-on-rails, forms, doc

我有一个`Post`模型：

```
 create_table "posts", :force => true do |t|
    t.string   "title"
    t.string   "content"
    t.integer  "user_id"
    t.datetime "created_at",                            :null => false
    t.datetime "updated_at",                            :null => false
    t.integer  "comments_count",     :default => 0,     :null => false
    t.boolean  "published",          :default => false
    t.datetime "published_at"
    t.boolean  "draft",              :default => false
  end 
```

这是它的形式：

```
<%= form_for(@post, :html => { :multipart => true }) do |f| %>
  <%= render 'shared/error_messages' %>
  <div class="field">
    <%= f.label :title %>
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :content %>
    <%= f.text_area :content %>
  </div>

  <div class="field">
    <%= f.label :draft %>
    <%= f.check_box :draft %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我正在寻找一种从`.doc, .docx, and rtf`文件中获取文本并将它们显示到`content`文本字段中的方法（因此用户不必打开他的文件、复制文本并将其粘贴到表单中）。

有什么建议么？

（是否有任何 gem、文本编辑器或 jQuery 插件可以做到这一点？）？

**编辑：**

卡在这里：

**post.rb:**

```
class Post < ActiveRecord::Base
  require 'docx'
  .
  .
  .  
  def read_docx
    d = Docx::Document.open(self.document)
    d.each_paragraph do |p|
      puts d
    end
  end
end 
```

**post_controller.rb：**

```
class PostsController < ApplicationController
  before_filter :authenticate_user!, :except => [:show, :index]
  .
  .
  .
  def create
    @user = current_user
    @post = @user.posts.new(params[:post])
    @doc_text = (no idea what to do here)

    if @post.save
      redirect_to @post, notice: 'post was successfully created.'
    else
      render action: "new"
    end
  end

  def edit
    @post = Post.find(params[:id])
  end
  .
  .
  . 
```

**帖子/new.html.erb：**

```
<%= form_for(@post, :html => { :multipart => true }) do |f| %>
  <%= render 'shared/error_messages' %>
  <div class="field">
    <%= f.label :title %>
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :content %>
    <%= f.text_area :content, :value => @doc_text %>
  </div>
  .
  .
  . 
```

**我已经制作了回形针上传 docx 文件**

我创建了一个名为`:document`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T03:09:50.670

好吧，我刚刚尝试了[docx](https://github.com/mportiz08/docx) gem，它工作正常。您可以在其 github 页面上获得 2 个示例。遗憾的是，它不适用于 doc 文件。

[对于他们，您可以在此处](https://github.com/dayflower/msworddoc-extractor)使用此宝石。github 页面上有一些示例，但是如果您想获取 doc 文件的全部内容，请执行以下操作：

```
require 'msworddoc-extractor'

MSWordDoc::Extractor.load('sample.doc') do |doc|
  puts doc.whole_contents
end 
```

您还可以调用其他方法`doc`，例如`document`或`header`。再次，检查 github 页面。

对于 rtf，您也可以使用这个[gem](https://github.com/thechrisoshow/rtf)。

现在，在里面传递它`content`很容易。只需定义如何从文件中获取数据，例如在控制器上调用的外部库：

```
@doc_text = Parser.doc("file.doc")
@docx_text = Parser.docx("file.docx")
@rtf_text = Parser.rtf("file.rtf") 
```

或者直接或通过您想到的任何方法获取值。要在视图中显示它，您只需添加`:value`如下选项：

```
<%= f.text_area :content, :value => @doc_text %> 
#Where @doc_text is the data from file 
```

# macos - Mountain Lion (OS X 10.8) 中的 Git 安装问题

> ID：12994351
> 
> 赞同：3
> 
> 时间：2012-10-21T02:10:49.253
> 
> 标签：macos, git, github, osx-mountain-lion

我刚刚在我的 MacBook Air 上安装了新的 Mountain Lion (OS X 10.8)，然后尝试在我的 Mac 上安装和配置 git。但是，令人惊讶的是 git 没有被打开或安装！为什么它没有被打开或安装？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T02:10:49.253

# java - 如何记住上次执行程序的用户决定

> ID：12994358
> 
> 赞同：0
> 
> 时间：2012-10-21T02:11:45.037
> 
> 标签：java

我必须在 Java 中创建一个对话框，其中包含几个字段，例如客户 ID、名称等。对话框的行为是客户可以通过复选框进行选择，并且可以保存和关闭。当用户下次打开对话框时，应该看到之前选择的所有客户都被选中，当用户选择一些新客户并按下保存按钮时，则只显示新用户。

所以，我的问题是，我的应用程序在 Java 中通过哪些方式查看和记住上次运行程序期间发生的事情，并在最近一次运行期间使用这些旧值。

我现在想到的两个直接问题是，当保存对话框时，我应该以什么格式保存当前的客户值。

和

我必须从它们保存的任何文件/格式中检索这些特定值的 API/类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:24:08.947

创建一个初始化文件，如果选中了保存复选框，请将您的信息保存到此文件中，最好是在加密之后。当您的程序启动时，检查初始化文件中的信息，如果存在任何信息，请阅读它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:31:24.430

您应该序列化程序重新启动后需要维护其状态的对象。当您的程序重新启动时，反序列化所有这些对象，然后使用这些反序列化的对象来初始化对象的状态。

查看[java](http://www.tutorialspoint.com/java/java_serialization.htm)中的序列化以获得 breif 教程

# c - 这个按位左移是做什么的？

> ID：12994363
> 
> 赞同：2
> 
> 时间：2012-10-21T02:12:23.133
> 
> 标签：c, floating-point, binary

我正在查看几年前编写的其他人的代码，该代码的文档记录非常糟糕。在某一时刻，有以下代码片段：

```
#define BINARYPOINT 16
....
float x;
int y;
int z;
....
....
//x has new values now
y = (int) (x*(1<<BINARYPOINT));
z = arctan2(y);
x = z; 
```

在代码中 y 被明确地用于计算它的反正切，函数 arctan 接受一个 int 并给出它的反正切，它是另一个 int。现在我的麻烦来了，我不明白计算的 arctan`x*(1<<BINARYPOINT)`将如何给我 x 的 arctan？

谁能解释一下这里发生了什么？

提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T02:21:08.810

该代码正在执行[Binary Scaling](http://en.wikipedia.org/wiki/Binary_scaling)。将浮点数转换为具有 B16 二进制标度的整数表示，然后`arctan2`调用该函数。这是一个接受整数参数并知道它使用 B16 比例因子的例程。这不是`atan`接受参数的标准调用`double`。

请注意，函数的名称`arctan2`, 使它看起来像是 arctan 的两个参数版本，因此您应该检查它并确保您进行了正确的调用。

# python - 使用检查.getmembers

> ID：12994366
> 
> 赞同：5
> 
> 时间：2012-10-21T02:13:27.880
> 
> 标签：python, inspect

我正在尝试使用`inspect.getmembers`来检查文件中的类和函数。问题是我不知道如何在`inspect.getmembers`不使用`import`. 那是因为我每次都需要指定不同的文件名

代码与此类似：

```
def extractName(self,fileName):

    for name, obj in inspect.getmembers(FileName):
        if inspect.isclass(obj):

            print "this is class",name

    if inspect.isfunction(obj):

        print "this is method",name 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T02:21:24.643

为了检查一个模块，你*必须*以某种方式执行它；否则，文件中的定义将不可用。

您可以使用`module = __import__(modname)`按名称导入模块，或`module = imp.load_source("__inspected__", path)`按路径导入模块。

# php - php include_once 不工作，什么也没有出现

> ID：12994367
> 
> 赞同：-1
> 
> 时间：2012-10-21T02:13:31.460
> 
> 标签：php

我刚开始学习php。

我正在尝试使用 include_once 函数来在我的每个 php 站点中包含一个模板头。

（另外，这是我在这个网站上的第一篇文章，我不太确定它是如何工作的......刚刚意识到 4 空格缩进的东西）

我正在看这个视频： [http ://www.youtube.com/watch?v=65gV8JOgWkQ&feature=relmfu](http://www.youtube.com/watch?v=65gV8JOgWkQ&feature=relmfu)

从大约 19:00 开始，我按照建议将此代码输入 DW CS5。

这是我的 index.php 文件：

```
<body>

<div align="center" id="mainWrapper">
<?php inlude_once("/Users/patrickmeaney/localhost/BobsSuits/template_header.php"); ?>

<?php include_once     dirname("/Users/patrickmeaney/localhost/BobsSuits/template_header.php"); ?>

<div id="pageContent"> test</div>
<?php inlude_once("template_footer.php");?>

</div>

</body> 
```

这是我的 template_header 页面：

```
<div id="pageHeader"><table width="100%" border="1">
      <tr>
        <td width="49%"><img src="style/bobssuitslogo.png" width="433" height="92" alt="Logo" /></td>
    <td width="51%">&nbsp;</td>
  </tr>
  <tr>
    <td colspan="2"><a href="index.php">Home</a> <a href="#">Link 1</a> <a href="#">Link 2</a> <a href="#">Link 3</a></td>
    </tr>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T02:34:01.483

为了将来参考，我建议使用[require](http://www.php.net/manual/en/function.require.php)而不是 include （或其`_once`版本）

> require 与 include 相同，但失败时也会产生致命的 E_COMPILE_ERROR 级别错误。换句话说，它将停止脚本，而 include 只发出一个警告（E_WARNING），允许脚本继续。

这使您更容易识别错误所在。

现在在您的代码中，您有：

```
include_once dirname("/Users/patrickmeaney/localhost/BobsSuits/template_header.php"); 
```

这是错误的，因为您使用的是[dirname](http://us2.php.net/manual/en/function.dirname.php)命令。`dirname`将返回一个文件夹，在您的情况下为“/Users/patrickmeaney/localhost/BobsSuits”，并且最后不会包含文件名。

我建议删除目录名，使包含语句如下：

```
include_once "/Users/patrickmeaney/localhost/BobsSuits/template_header.php"; 
```

# python - RegExp 组引用上的特殊字符结果错误

> ID：12994368
> 
> 赞同：0
> 
> 时间：2012-10-21T02:13:44.980
> 
> 标签：python, regex, reference, regex-group

我的错误是什么？

```
>>> import re
>>> re.sub("(\[*?)","\1","x[[[y")
'\x01x\x01[\x01[\x01[\x01y\x01' 
```

我能怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T02:16:47.013

对正则表达式使用原始字符串：

```
>>> import re
>>> re.sub(r'(\[*?)', r'\1', 'x[[[y')
'x[[[y' 
```

当你写`'\1'`,`\1`被解释为一个转义序列。`'\\1'`是用普通字符串编写它的正确方法，相当于`r'\1'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T02:53:36.333

`\[*?`不情愿地匹配零个或多个左方括号。换句话说，它每次都不匹配，无论你在哪里应用它。

量词通常是贪婪的，这意味着它们尽可能匹配，同时仍然允许整个正则表达式匹配。这就是“回溯”在大多数情况下的含义：贪婪的量词返回他们吞噬的字符，以便正则表达式的其余部分可以匹配它需要的内容。

不情愿的量词正好相反：它们首先消耗最少数量的字符，然后只有在达到整体匹配所必需的情况下才会消耗更多。但在你的情况下，它从来没有必要；`\[*?`是整个正则表达式，所以它的内容是匹配一个空字符串。 **将不情愿的量词作为正则表达式中的最后一件事是*没有*意义的。**

只是为了消除任何可能的混淆，原始字符串中的括号并没有被捕获和重新插入，它们被*留在那里*，就像`x`and`y`一样。如果您按照@Blender 的建议使用了原始字符串（正确——这是另一个错误），您的输出将是原始字符串：

```
>>> re.sub(r"(\[*?)",r"\1","x[[[y")
'x[[[y' 
```

它在每个字符边界（即开头和结尾，以及每对字符之间）匹配一个空字符串，然后重新插入它们——总效果，没有。我不知道你想要完成什么，但如果你想用一个替换三个括号，你应该使用`+`而不是`*?`，你应该把它放在捕获组之外：

```
>>> re.sub(r"(\[)+",r"\1","x[[[y")
'x[y' 
```

# java - 在任意位置编辑的基于文本的文件的高效设计？

> ID：12994374
> 
> 赞同：3
> 
> 时间：2012-10-21T02:16:38.400
> 
> 标签：java, performance, stringbuilder

我正在尝试开发一个简单的在线编辑器，允许实时协作（用 Java 编写）。在这个编辑器中，我希望客户能够在任意点编辑源代码（例如，将字母“d”添加到源代码文件的第 11 行第 20 列）。我不确定如何以有效的方式设计这些源代码文件对象，同时仍然允许逐个字母的客户端-服务器同步（类似于 Google Docs 的工作方式）。

我考虑过使用 RandomAccessFile，但在阅读[了这篇文章后](https://stackoverflow.com/questions/5786697/how-to-write-content-in-a-specific-position-in-a-file "这个帖子")，我认为这不是一种有效的方法。在文件开头附近插入一个字母将涉及更改其后的所有内容。

我目前的计划是使用 StringBuilder 对象及其插入/删除/追加方法来表示服务器和客户端上的源文件。在服务器端，此 StringBuilder 将根据需要转换为实际文件。

我很好奇是否有更好的方法来解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T03:31:36.153

您将需要像[Ropes](http://en.wikipedia.org/wiki/Rope_%28computer_science%29)这样的东西作为基本数据结构。这将启用 O(log n) 编辑、插入、追加、连接等，因此您无需担心在大型数据结构中间进行编辑。

需要考虑的两个开源库：

*   Java 的绳索：http: [//ahmadsoft.org/ropes/](http://ahmadsoft.org/ropes/)
*   我自己的不可变“文本”数据结构实现：[https ://github.com/mikera/mikera/blob/master/src/main/java/mikera/persistent/Text.java](https://github.com/mikera/mikera/blob/master/src/main/java/mikera/persistent/Text.java)

除此之外，您还需要构建用于合并和发布同步更改的逻辑。这实际上是棘手的部分：您需要决定解决冲突等的逻辑以及如何将“增量”传输给客户端。

我会将持久性/复制到永久存储视为一个单独的问题 - 最好首先让所有内容都与内存数据结构一起正常工作。然后，您可以定期将数据刷新到持久存储中。我建议像[Git](http://git-scm.com/)这样的东西，或者如果你特别喜欢冒险，你可以尝试像[Datomic](http://www.datomic.com/)这样的东西（它本质上是一个像 Git 一样工作的数据库，并保留所有更新的历史记录）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:23:13.023

也许更好的方法是使用像[Git](http://git-scm.com)这样的分布式版本控制。用户保存存储库的本地副本，他们可以从远程拉取将在本地合并，提交将更改本地存储库并推送以更新远程。这意味着您将需要用户的权限才能将文档保存在他们的本地计算机上。

# java - rmi 聊天室无法向服务器发送数据

> ID：12994376
> 
> 赞同：0
> 
> 时间：2012-10-21T02:17:02.653
> 
> 标签：java

我正在开发一个带有一些 GUI 的 rmi 聊天室。我必须从客户端获取输入并将其发送到服务器。但我无法使用从 Jtextfield 读取的值。谁能帮助我如何使用用户的读取输入发送到服务器

```
import java.applet.Applet;
import java.awt.*
import java.rmi.Naming;
import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import javax.swing.*;

public class MyChatClient extends UnicastRemoteObject{

     JFrame F = new JFrame("Chat room");
 JTextField T = new JTextField(25); 
 JPanel pane = new JPanel(new GridBagLayout());
 JButton B = new JButton("submit");
 JPanel pane2 = new JPanel(new GridBagLayout());
 TextArea TA = new TextArea(15,50);
 String response;

protected  MyChatClient() throws RemoteException {

    F.setSize(400,400);
    pane.add(T);
    pane.add(B);
    F.add(pane, BorderLayout.SOUTH);

    TA.setEditable(false);
    TA.setBackground(Color.WHITE);

    pane2.add(TA);
    F.add(pane2, BorderLayout.BEFORE_FIRST_LINE);
    F.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    F.setVisible(true);

        B.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e) {
                response = T.getText();  // I am not able to send this to server                                                                  

             }});
    }

   public static void main(String[] args) throws RemoteException {

    MyChatClient mc = new MyChatClient();
    try{
        //System.setSecurityManager(new RMISecurityManager());
        //Registry reg = LocateRegistry.getRegistry("localhost");

       ServerImpl svr = (ServerImpl)Naming.lookup("rmi://localhost/ChatServer") ;
                    System.out.println("Server found"); 
             svr.sendMessage(response); // here is the problem

     }catch(Exception e){
        System.err.print(e);
    }

    }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:09:38.023

我认为你的动作监听器永远不会被调用。试试看这个，

```
B.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e) {
                response = T.getText(); 
                System.out.println("inside action");                                                 

             }}); 
```

或者添加一个按钮并在其单击事件中执行此操作。祝你好运 ！！

# mod-mono - 导出变量以启用垃圾收集器以处理单声道异常

> ID：12994378
> 
> 赞同：2
> 
> 时间：2012-10-21T02:18:05.427
> 
> 标签：mod-mono

我刚刚启用了*GC*，因为我得到了很多单声道异常并且增加了`MAXHINCR`异常`MAX_HEAP_SECTS`。我导出了变量以启用通用收集器。知道我注意到该进程正在使用 100% 分配的 CPU，并且 res mem 似乎正在上升。内存使用量也在增加。这会表明内存泄漏吗？这是预期的错误吗？另一件事我对此并不陌生，启用上述功能会掩盖实际的异常吗？？？？自此部署以来，我在 24 小时内没有发生过崩溃。

```
/opt/novell/mono/bin/mono-sgen --gc=sgen /opt/novell/mono/lib/mono/2.0/mod-mono-se 
```

任何帮助和知识将不胜感激。

# qt - Windows 上带有 vlc 后端的 Phonon

> ID：12994380
> 
> 赞同：0
> 
> 时间：2012-10-21T02:18:38.993
> 
> 标签：qt, pyqt, vlc, pyside, libvlc

我正在尝试使用 pyQt/pyside 和声子库制作一个媒体播放器应用程序。目前我正在使用默认后端（phonon_ds94.dll）。我想使用 phonon_vlc.dll 之一，但我不知道如何在 winXP 上进行切换。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:14:08.530

看看这个项目：

[http://code.google.com/p/subsonic-client/](http://code.google.com/p/subsonic-client/)

它是[Subsonic](http://www.subsonic.org)的客户端，但它是用 PyQt 编写的，并使用 VLC 作为其后端。该项目尝试使用 Phonon 开始，但发现它在处理不同的音频格式时不够灵活，并且在转码音频时完全失败，因为它不提供内容长度标头。

我不确定这是否发生了变化，但源代码可供您查看和使用。

# java - 如何为具有类型参数的类调用 .class？例如列表 。班级

> ID：12994386
> 
> 赞同：3
> 
> 时间：2012-10-21T02:20:27.327
> 
> 标签：java, spring

从一个简单的例子开始，调用`List<String>.class`会导致编译错误，我可以调用`List.class`来实现我的目的。

最近在做Spring REST模板相关的事情。我必须为该`getForObject`方法输入一个类对象。我有这样一个类：`Foo<T>`。

结果是，我不能提供`Foo<Bar>.class`作为论据之一。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T02:22:42.920

你不能这样做，因为在运行时*没有*类型，由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。

当程序执行时，只有`List.class`- 没有这样的东西`List<String>.class`，只需提供一个`List.class`.

如果您确实需要传递该类型的类，请将您的方法更改为接受`Class<T>`参数并传递`String.class`.

# python - 为什么这个程序会重复打印？

> ID：12994393
> 
> 赞同：4
> 
> 时间：2012-10-21T02:21:47.600
> 
> 标签：python, python-3.x

我无法隔离问题。该程序应该采用两个整数并将它们转换为科学计数法，然后将它们相乘。然而，它两次打印科学概念。但是，它会打印两次信息。

```
def convert(s):
    print("You typed " + s)
    n=0
    for c in s:
        n=n+1
        if n==1:
            print("In scientific notation:"+str(c)+'.', end='')
        if n!=1:
            print(str(c),end='')
    print('X 10^'+str(len(s)-1))
    return c

def convert_product(u):
    n=0
    for c in u:
        n=n+1
        if n==1:
            print("Product in scientific notation "+c+'.', end='')
        if n!=1:
            print(c, end='')

def main():
    s=input("Please input your first number\n")
    t=input("Please input your second number\n")
    u=str(int(convert(s))*int(convert(t)))
    convert(s)
    convert(t)
    convert_product(u)
    print('X 10^' + str(len(s)+len(t)-2))
main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T02:37:40.713

您在这一行中调用 convert ：

```
u=str(int(convert(s))*int(convert(t))) 
```

你又在数字上调用 convert ：

```
convert(s)
convert(t) 
```

并且转换功能正在打印。因此，您有双重打印。

# android - Android 应用程序中的 GPS_PROVIDER 错误

> ID：12994394
> 
> 赞同：3
> 
> 时间：2012-10-21T02:22:02.270
> 
> 标签：android, android-location

我创建了一个 Android 应用程序来检索位置。我尝试使用 GPS_PROVIDER，它返回 null .. 但是当我使用 NETWORK_PROVIDER 时工作顺利.. 任何人都可以帮我解决这个问题吗？

这是代码

> 位置 location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

当我替换`"NETWORK_PROVIDER"`为`"GPS_PROVIDER"`..时，该位置变为空。

我在清单中添加了以下三个权限

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:31:17.450

您的 GPS 位置为空可能有两个原因

1.  可能是您的 GPS 未激活。尝试从`setting menu => Location & Security => Check Use GPS Satellites`.
2.  可能您目前在 GPS 无法正常工作的建筑物中。从大楼里出来检查一下。大多数时间都可能发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T02:38:05.820

根据[文档](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)

> 如果提供程序当前被禁用，则返回 null。

确保您的 GPS 在设备上处于活动状态，这样您就不会收到 null。

**编辑：**
也可以尝试运行一次`requestLocationUpdates()`或`GPS_PROVIDER`两次`NETWORK_PROVIDER`。以最快的`LocationManager`方式检索位置并停止搜索。由于 GPS 位置的检索速度比网络位置慢，因此在找到它之后立即停止，因此为 GPS 返回 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-21T21:47:03.153

> 当我将“NETWORK_PROVIDER”替换为“GPS_PROVIDER”时，该位置变为空

**要解决此问题，请确保已启用位置服务**：

[![在此处输入图像描述](../Images/57369f7ea3ce10f6aeab7152bc9185c9.png)](https://i.stack.imgur.com/Kj1UG.png)

记住文档：

> **如果提供程序当前被禁用，则返回 null。**

作为一个选项，如果 GPS 被禁用，您可以同时使用这两个提供商，然后检查网络提供商：

```
...
 myLocation = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
 if(myLocation == null) {
            myLocation = lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
 }

    if(myLocation != null) {
         //Get values for latitude and longitude!
    }
... 
```

# hadoop - map reduce java程序说明

> ID：12994396
> 
> 赞同：-2
> 
> 时间：2012-10-21T02:22:07.637
> 
> 标签：hadoop, mapreduce

```
public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
                String line = value.toString();
            StringTokenizer tokenizer = new StringTokenizer(line);
            while (tokenizer.hasMoreTokens()) {
              word.set(tokenizer.nextToken());
              output.collect(word, one);
            }
          }
        } 
```

我试图理解 map-reduce 中的 map 函数的这个基本程序，输入参数是什么？我找不到地图的定义。

如果有人能告诉我这个功能在做什么，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:22:54.707

我假设这是在带有 TextInputFormat 的 Map Reduce 作业中使用的。我还假设“一”是某种全局范围的 IntWritable 代表第一。

在这种情况下，文件中的每一行都会调用 map 函数。键是一个数字，表示文件中行首的偏移量。该值是该行的文本值。

这里的 map 函数使用 StringTokenizer 在空白处分割每一行，并发出每个单词和第一个作为其输出。

假设您的输入文件如下所示：

Lorem ipsum dolor sit amet consectetur adipisicing elit
sed
do eiusmod tempor incididunt

映射器将发出以下键和值：
Lorem, 1
ipsum, 1
dolor, 1
sit, 1
amet, 1 consectetur
, 1 adipisicing,
1 elit,
1
sed, 1
do, 1
eiusmod, 1
tempor, 1
incididunt, 1

这可能是字数地图减少工作的一部分。

# javascript - 在 HTML 中使用画布处理精灵加载

> ID：12994397
> 
> 赞同：1
> 
> 时间：2012-10-21T02:22:25.577
> 
> 标签：javascript, html, canvas

所以我正在尝试使用画布编写一个简单的精灵加载方法，并且我注意到刷新率很糟糕。这是我正在使用的绘制方法。

```
function DrawSprite(context,
                drawX,
                drawY,
                drawH,
                drawW,
                spriteXIndex,
                spriteYIndex,
                spriteW,
                spriteH,
                image){
    var imageObj = new Image();
    imageObj.onload = function() {
        //draw cropped image
        var sourceX = (spriteXIndex * spriteW);
        var sourceY = (spriteYIndex * spriteH);

        context.drawImage(imageObj, sourceX, sourceY, spriteW, spriteH, drawX, drawY, drawW, drawH);
    };
    imageObj.src = image; 
```

}

每当调用它时，我都会对图像进行非常明显的重绘。我已经考虑了几个解决方案，但我不确定实现它们的最佳方法。首先是双缓冲。但是除了创建第二个画布并将其绘制在下面并使用 z-index 处理交换之外，我不确定如何实现它。另一个是存储图像而不是每次我想绘制精灵时都重新创建它。我将首先尝试第二种方法并在启动程序之前预加载图像，但我希望输入有关处理此问题的最佳方法的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:05:15.090

您似乎在做的是创建一个新图像并每次都从源加载它，这肯定会导致性能问题。处理它的最佳方法是在保存后加载图像并重新使用它。下面是一个非常简单的例子。加载部分的小提琴有点复杂，因为我从服务[http://retroships.com加载图像](http://retroships.com)

```
function Sprite(options){
    this.load(options.imagePath);  
    this.x = 0;
    this.y = 50;
    this.isLoaded = false;
}

Sprite.prototype.load = function(imagePath){
    this.image = new Image();
    var that = this;   

    this.image.src = imagePath;

    this.image.onload = function(){
        that.isLoaded = true;
    }
}

Sprite.prototype.draw = function(){
    ctx.drawImage(this.image, this.x, this.y);
}

// to use, you can pass other params and handle them like x/y/width/height what have you.
var yourSprite = new Sprite({imagePath : "pathtoimage.png"});

function render(){
    if(yourSprite.isLoaded){
        canvasContext.drawImage(yourSprite.image, yourSprite.x, yourSprite.y);
    }
} 
```

**[工作演示](http://jsfiddle.net/loktar/g9KWA/)**

# django - 在 Django 表单中插入一个 html 标签

> ID：12994399
> 
> 赞同：0
> 
> 时间：2012-10-21T02:22:35.623
> 
> 标签：django, twitter-bootstrap

我正在使用 Django 和引导程序，并且想使用引导程序图标字形添加 html 标记，因为我没有这样做，就像向小部件添加属性一样，但我没有添加标签，或者说直接自定义。

这就是导致我 Django 的原因：

```
<p><label for="id_fecha">Fecha:</label> <input type="text" name="fecha" id="id_fecha" /></p> 
```

这就是我要的：

```
<input class="datepicker" type="text" name="fecha" id="id_fecha" /><span class="add-on"><i class="icon-th"></i></span> 
```

我感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:05:46.117

如果您有构建表单的简单模板，这里最简洁的方法是通过 JavaScript 添加额外的标签。如果您使用的是 JQuery，则可以使用[.after 方法](http://api.jquery.com/after/)：

```
$('#id_fecha').after('<span class="add-on"><i class="icon-th"></i></span>'); 
```

它使您的模板变得简单。

# java - JDBC - 尝试插入值时出现 NullPointerException

> ID：12994408
> 
> 赞同：0
> 
> 时间：2012-10-21T02:24:27.900
> 
> 标签：java, database, ms-access, jdbc, nullpointerexception

我想在 ms 访问中将值插入到我的数据库表中。这段代码以前有效，我不明白为什么它现在会出错。

```
Exception in thread "main" java.lang.NullPointerException
at storeapp.Trylog.<init>(Trylog.java:28)
at storeapp.Trylog.main(Trylog.java:45) 
```

我相信我正确配置了驱动程序。

我有一个表名 ACCOUNT，其中包含用户名和密码列。

这是代码......

```
public class Trylog extends JFrame{
Connection con;
Statement st;
ResultSet rs;

public Trylog(){
    connect();

    String u = "Katherine";
    String p = "kat";

    String sql = "Insert into ACCOUNT(Username, Password) Values ('"+u+"' , '"+p+"' ) ";
    try {
        rs = st.executeQuery(sql);
    } catch (SQLException ex) {
    }
}

public void connect(){
    try {
            String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
             Class.forName(driver);
             String db = "jdbc:odbc:access";
             con = DriverManager.getConnection(db);
             st = con.createStatement();
    }
    catch (Exception ex){}
}

public static void main(String[] args) {
    Trylog r = new Trylog();
    r.setVisible(true);
    r.setSize(600, 800);
    r.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

} 
```

}

有谁知道我为什么会收到这样的错误？

这是导致第 28 行和第 46 行异常基础的行

```
rs = st.executeQuery(sql); 
```

和

```
 Trylog r = new Trylog(); 
```

它打印

```
Exception in thread "main" java.lang.RuntimeException: java.sql.SQLException: No ResultSet was produced 
```

原因：java.sql.SQLException：没有生成结果集

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T02:32:24.593

您的具体问题是由错误的异常处理引起的（甚至根本*没有*异常处理）。你有完全吞没异常的 catch 块，比如这里：

```
catch (Exception ex){} 
```

这样代码在发生异常的情况下*继续*运行，可能会将变量留在`try`块中，例如`st`未初始化。之后，那些未初始化的（即它们仍然是`null`）变量被访问，这反过来导致`NullPointerException`.

这不应该发生。当一个异常被捕获时，代码应该正确地处理它。在这种情况下，它应该立即停止并以某种方式显示错误详细信息。此时，最简单的方法是将其作为运行时异常重新抛出，这样您至少会获得有关该问题的所有必要信息：

```
catch (Exception ex) { 
    throw new RuntimeException(ex);
} 
```

*（例如，您始终可以通过记录堆栈跟踪并显示一些用户友好的消息对话框然后退出程序来改进这一点）*

抛出的异常基本上是问题根本原因的全部答案。艺术是能够解释和理解堆栈跟踪。

* * *

**根据您的更新进行更新，您得到**了****

 **```
java.sql.SQLException: No ResultSet was produced 
```

看，这就是你的答案！给定的查询根本没有`ResultSet`产生，而您期望它会产生。事实上，`INSERT`查询不会返回结果集。它将最高返回受影响的行数。

你需要更换

```
rs = st.executeQuery(sql); 
```

经过

```
st.executeUpdate(sql); 
```

另[请`executeQuery()`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeQuery%28java.lang.String%29)参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeQuery%28java.lang.String%29)和[javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29) [。`executeUpdate()`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)它们准确地说明了该方法应该用于哪些 SQL 语句。

> ## 执行查询
> 
> 执行给定的 SQL 语句，该语句返回单个`ResultSet`对象。
> 
> **参数**： `sql`- 要发送到数据库的 SQL 语句，通常是静态 SQL`SELECT`语句

> ## 执行更新
> 
> 执行给定的 SQL 语句，可能是 INSERT、UPDATE 或 DELETE 语句或不返回任何内容的 SQL 语句，例如 SQL DDL 语句。
> 
> **参数**： `sql`- SQL 数据操作语言 (DML) 语句，例如`INSERT`，`UPDATE`或`DELETE`；或不返回任何内容的 SQL 语句，例如 DDL 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T02:30:01.473

您的代码未指定要连接到哪个数据库。因此错误。尝试在所有 catch 块中打印堆栈跟踪，你会看到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T06:25:23.570

您的代码可以工作，但唯一的问题是在 dsn 配置中，您可以更改访问文件的位置。重新配置dsn。我使用相同的代码没有任何修改。刚刚我创建了包含两列用户名、密码的访问数据库表帐户。**

# ascii - 为什么在 ASCII 表中大写字母排在小写字母之前？

> ID：12994412
> 
> 赞同：10
> 
> 时间：2012-10-21T02:26:13.097
> 
> 标签：ascii, uppercase, lowercase

在我的一次面试中，面试官问我为什么在 ASCII 表中大写字母在小写字母之前，我在 google.com 上搜索但一无所获，谁能给我答案？多谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-21T02:32:58.893

我只是猜测，但我想这是因为最早的字符集根本没有小写字母。Baudot 电报码只有 5 位，CDC 大型机原生使用 6 位码；没有小写的空间。当 ASCII 被开发为 7 位代码时，最终有足够的空间容纳小写字母，它们被认为是一种奢侈的附加组件，因此将它们放在集合的后半部分是有意义的。

但值得注意的是，这种排序*是*特定于 ASCII 的，不一定适用于其他字符集；例如，EBCDIC 的小写字母在前。Commodore 微型计算机可以在两个字符集之间切换，即使两者都是基于 ASCII 的，带有小写字母的字符集首先具有它们。（另一组用额外的图形字符代替小写字母。）

Unicode 已从 ASCII（以及基于它的扩展拉丁字符集）中汲取灵感，因此大多数区分大小写的字母在其代码块中都将大写版本放在首位。但也有例外，当然许多其他字母根本没有大小写区别，而其他字母的关系比我们简单的 1 对 1 映射更复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T02:37:25.040

确保在对文本进行排序时小写字母不会出现在大写字母之前。

在现代 Unicode 时代，对文本进行排序要复杂得多，但 20 年前，您可以按 ASCII 值对文本进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-08T23:42:29.597

基本上在对字符串进行排序时 w=你希望 'a' 出现在 'b' 之前，并且 'a' 的字符代码小于（小于）'b'。

与大写相同。“A”在“a”之前。

这样，您可以轻松地将 'Anthony' 排序在 'ant' 之前，只需比较字符代码，即使由于长度原因，小写的 'anthony' 通常会出现在 'ant' 之后。

如果大写的字符代码比小写的大，那么排序字符串就会变得非常复杂。

然而，正如“Slaks”所提到的......Unicode 使得它变得更加复杂，因为您有诸如 ȦAÁÀÂÄĀĂǍÃȂ 这样的字符，这些字符通常具有大于 'a' 的 unicode 数字，但通常被认为是在 'a' 之前排序。

# c++ - 用于在 C++ 中存储特定模板的对象的通用容器

> ID：12994416
> 
> 赞同：3
> 
> 时间：2012-10-21T02:28:09.987
> 
> 标签：c++, containers, generic-programming

我正在尝试创建一个通用容器，它可以存储 Wrapper< T> 类型的异构对象，其中 T 可以是任何用户定义的类型。我已经看到了 boost::any 和其他解决方案，但是我不能在没有重铸的情况下调用函数 foo()（我不知道要重铸哪种类型，有关 T 的信息丢失了。）它恢复为原始类型。

我怎样才能合理地实现一个通用容器/使用现有的通用容器来实现这一点？

```
template <typename T>
class Wrapper{
public:
  Wrapper(const T& a):o(a){};
  Wrapper(){};
  //public methods
  void foo(){
     //do stuff
  };
private:
 T o;
};

class X{};
class Y{};

int main(){
  X x;
  Y y;

  A_GENERIC_CONTAINER generic_container;
  // A_GENERIC_CONTAINER should be able to store
  // any number of heterogeneous objects of type Wrapper<T>
  // where T can be any user defined type.

  generic_container.push_back(x);
  generic_container.push_back(y);

  auto it =  generic_container.begin();
  auto end =  generic_container.end();
  while(it != end){
    it->foo();
    ++it;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T03:10:09.440

最通用的方法是为 Wrapper 创建一个基类，比如 BaseWrapper，并在 BaseWrapper 上定义纯虚函数，然后在每个 Wrapper 类上实现这些纯虚函数。通过专业化，每个 Wrapper、Wrapper 都可以有自己的实现。完成此操作后，您可以使用指向 Base Type 的智能指针容器，并在闲暇时使用它。

有一些可能的捷径。例如，在您的示例中的简单情况下，我建议使用`std::function`. 辅助函数有助于执行此操作。请注意，这只有在只有 1 个方法被调用时才有效。我还建议您`operator()`直接定义包装器，这样您就不必使用绑定。

```
template<T>
std::function<void()> wrap(const T& x)
{
   return std::bind(&Wrapper<T>::foo, Wrapper<T>(x));
}

int main(){
  X x;
  Y y;

  std::vector<std::function<void()> > generic_container;
  // A_GENERIC_CONTAINER should be able to store
  // any number of heterogeneous objects of type Wrapper<T>
  // where T can be any user defined type.

  generic_container.push_back(wrap(x));
  generic_container.push_back(wrap(y));

  auto it =  generic_container.begin();
  auto end =  generic_container.end();
  while(it != end){
    (*it)();
    ++it;
  }
} 
```

编辑：

我正在讨论的是一个非模板化的基础，您可以从中派生所有模板化包装器。这允许您调用您预定义的方法（并且必须由 Wrapper 实现），而无需知道所涉及的特定包装器类型。

```
class Base
{
  public:
   virtual ~Base() {};
   virtual void foo() = 0;
};

template <typename T>
class Wrapper : public Base{
public:
  Wrapper(const T& a):o(a){};
  Wrapper(){};
  //public methods
  virtual void foo(){
     //do stuff
  };
private:
 T o;
};

int main(){
  X x;
  Y y;

  std::vector<std::shared_ptr<Base> > generic_container;
  // A_GENERIC_CONTAINER should be able to store
  // any number of heterogeneous objects of type Wrapper<T>
  // where T can be any user defined type.

  generic_container.push_back(std::make_shared<Wrapper<X>>(x));
  generic_container.push_back(std::make_shared<Wrapper<Y>>(y));

  auto it =  generic_container.begin();
  auto end =  generic_container.end();
  while(it != end){
    it->foo();
    ++it;
  }
} 
```

# vim - 使用 ~（波浪号）进行按位反转

> ID：12994417
> 
> 赞同：2
> 
> 时间：2012-10-21T02:29:01.503
> 
> 标签：vim

`~`除了切换大小写之外，什么是扩展 Vim 中（波浪号）键功能以反转文本中的 1 和 0 的好方法？

也就是说，如果我的光标在正常模式下位于 0 或 1 上，并且我想`~`将其转换为 1 或 0（分别），那么在不改变字母字符的正常行为（大写/小写交换）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T06:51:08.027

快速浏览`:help ~`说“不”。您可能必须编写一个小函数并将其映射到`~`：

```
function! BinSwitch()
  let current_char = getline(".")[col(".") - 1]
  if current_char == "0"
    normal! r1
  elseif current_char == "1"
    normal! r0
  else
    normal! ~
  endif
endfunction

nnoremap ~ :silent call BinSwitch()<cr> 
```

# javascript - 如果head 404而不是隐藏它，jQuery检查图像是否存在

> ID：12994419
> 
> 赞同：18
> 
> 时间：2012-10-21T02:29:18.963
> 
> 标签：javascript, jquery, ajax

使用 php 从数据库中获取 100 张照片 url 并在页面上显示它们，但有些照片可能不再存在。如果照片 url 失败 (404) 我想使用 jquery 隐藏图像并且不想显示任何错误图片。这是我的代码，但它不起作用。

html

```
<div id=test>
    <img src="http://test.com/test1.jpg" />
    <img src=" http://test.com/test2.jpg" />
    <img src="http://test.com/test3.jpg" />
</div> 
```

jQuery

```
var pic_list = jQuery("#test img");

pic_list.load(function () {
    var http = new XMLHttpRequest();
    http.open('HEAD', pic_list, false);
    http.send();
    if (http.status == 404) {
        pic_list.hide();
    } else {
        pic_list.show();
    }
}); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-21T02:42:48.057

当您可以使用`onerror`事件时，无需发送多个 ajax 请求。

查看相关的[jQuery/Javascript 以替换损坏的图像](https://stackoverflow.com/a/92819/1331430)帖子。

根据您的需求进行调整：

**HTML：**

```
<img src="someimage.png" onerror="imgError(this);" /> 
```

**JS：**

```
function imgError(image){
    image.style.display = 'none';
} 
```

[**小提琴**](http://jsfiddle.net/ult_combo/uqm9t/)

或者使用 jQuery：

```
function imgError(image){
    $(image).hide();
} 
```

* * *

我通常不会在 HTML 中使用内联 JS，甚至考虑使用[`.error`](http://api.jquery.com/error/)处理程序：

```
$('#test img').error(function() {
    $(this).hide();
}); 
```

**但是**如果在错误事件触发后执行附加的处理程序，上述方法将不起作用，因此我建议第一个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T02:38:52.187

该`open`方法的第二个参数是一个 url，而不是一个 HTML 元素数组。

因此，您可以使用[`each`](http://api.jquery.com/jQuery.each/)迭代元素，使用获取它们的`src`属性[`.attr()`](http://api.jquery.com/attr/)并将其传递给方法。

由于您已经加载了图像，而不是为每个图像执行另一个请求，您也许可以使用我在另一个问题中讨论的方法：[检查用户是否阻止了第 3 方域](https://stackoverflow.com/questions/10985889/check-if-user-is-blocking-3rd-party-domain/11005566#11005566)

如果您的图像不是固定的高度/宽度，则不存在的图像会产生一个小图标，指示该图像不存在。您可以使用图像的大小来查看图像是否已加载。

# android - 如何将 viewPager 作为标题添加到 ListView

> ID：12994420
> 
> 赞同：3
> 
> 时间：2012-10-21T02:29:52.363
> 
> 标签：android, listview, android-viewpager

我还使用该`addHeaderView`方法添加了[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)as 标头。

但是当我滚动 ViewPager 时， ListView 也会滚动。

当我滚动 ViewPager 时，如何防止 ListView 接收到触摸事件。如何覆盖 ListView 中的 onInterceptTouchEvent ？返回假？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-24T08:09:24.007

我想你现在已经解决了这个问题，但无论如何：

您可以使用以下实现[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)，我们只需要覆盖`onInterceptTouchEvent`您已经知道的：

```
import android.content.Context;
import android.support.v4.view.ViewPager;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;

public class MyViewPager extends ViewPager {

    public MyViewPager(Context context) {
        super(context);
    }

    public MyViewPager(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        return False;
    }

} 
```

# c# - 设置 HTTP 标头以从仅限成员的网页中检索数据

> ID：12994427
> 
> 赞同：0
> 
> 时间：2012-10-21T02:30:48.767
> 
> 标签：c#, http-headers, webclient

我的 C# 代码有点问题，我不知道如何解决它。我试图下载一个只有登录的人才能看到的网页（否则它会返回 403 响应）。所以我认为最好的方法是将 HTTP 标头 cookie 值设置为已登录用户的值。不幸的是，它没有奏效。这是代码片段：

```
WebClient web = new WebClient();
web.Headers[HttpRequestHeader.Accept] = "*/*";
web.Headers[HttpRequestHeader.Cookie] = "User cookie";

string pagecontent = web.DownloadString("Forbidden page"); 
```

使用代码时，我仍然收到 403 错误。我肯定在使用有效的 cookie，我已经对其进行了测试。可能出了什么问题？

除此之外，我将如何从 webBrowser 获取 cookie 并将 webclient HTTP cookie 标头设置为那个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:44:56.317

以下方法不使用`WebClient`该类，但它有效：

```
string domain = ...
string url = ...
Cookie cookie = ...

var request = (HttpWebRequest)WebRequest.Create(url);
request.CookieContainer = new CookieContainer();
request.CookieContainer.Add(domain, cookie);

using (var response = request.GetResponse())
using (var reader = new StreamReader(response.GetResponseStream()))
{
    var responseValue = reader.ReadToEnd();
} 
```

# jsp - 如何以asp形式提交多个值

> ID：12994436
> 
> 赞同：0
> 
> 时间：2012-10-21T02:32:51.010
> 
> 标签：jsp, servlets

在 PHP 中，当我单击提交时，服务器将通过 $_POST 获取所有提交值

那么我怎么能用asp做同样的事情

```
<form name="submitForm" method="post" action="cart?action=update">
    <c:forEach var="product" items="${products}">
        <input type="text" name="${product.productID}" value="${product.quantity}" />
    </c:forEach>
    <input type="submit" value="Update" />
</form> 
```

我希望在提交后，我只能在 servlet 中获取一个值，并且该值由多个输入值组成，而无需为其指定特定名称。

我试过

```
System.out.println(request.getParameterValues("submitForm")); 
```

但它为空

谁能指出我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:37:18.603

我相信，`${product.productID}`每条记录都有不同的价值。使用此处的值来获取服务器端的值。例如，如果`${product.productID}`结果为`productId1, productId2, prductId3....`，则将值检索为：

```
 request.getParameter("productId1");
      request.getParameter("productId2");
      request.getParameter("productId3");
      ...... 
```

如果您不确定要检索的名称，您可以使用`request.getParameterNames()`. 例如下面：

```
 Enumeration<String> parEnumeration = request.getParameterNames();
    while (parEnumeration.hasMoreElements()) {
        String parameterName = parEnumeration.nextElement();
        String parameterValue = request.getParameter(parameterName);
        System.out.println("Parameter Name= " + parameterName);
        System.out.println("Parameter Value= " + parameterValue);
    } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T02:38:45.247

`submitForm`是表单名称而不是字段标识符。因此，尝试获取名为字段的参数值`submitForm`将返回 null。

理想情况下，您应该将文本字段的名称从 更改为`${product.productId}`明确的名称，例如`"MyProducts"`，然后对其进行调用。

# ios - 我可以从 NSDictionary valueForKey 中转换一个原语吗？

> ID：12994439
> 
> 赞同：0
> 
> 时间：2012-10-21T02:33:53.307
> 
> 标签：ios

我有一个代表catalogid 的int 变量。该变量在块外声明，如下所示：

```
int catalogId = [vegetableService getCurrentCatalogNumber]; 
```

在块内我做这样的事情：

```
 int serverCatalogId = (int) [obj valueForKey:@"CatalogId"];

                if(catalogId < serverCatalogId)
                {   
                    catalogId = serverCatalogId;
                } 
```

这当然会导致一个错误，指出变量必须是 __block 类型。所以我这样声明了catalogid：

```
__block int catalogId = [self getCurrentCatalogNumber]; 
```

但现在我得到了奇怪的值，比如 196758 而不是 1、2、3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:01:24.683

```
int serverCatalogId = (int) [obj valueForKey:@"CatalogId"]; 
```

这是一个指向 int 的指针。因此疯狂的价值观。基元不能存储在目标 C 集合中。如果您在系统的其他地方有这个，请查看 NSNumber 并使用其类型转换方法 intValue 从 NSDictionary 中提取 NSNumber。

# python - 如何将数据附加到json文件？

> ID：12994442
> 
> 赞同：70
> 
> 时间：2012-10-21T02:35:37.067
> 
> 标签：python, json

我正在尝试创建一个将条目添加到 json 文件的函数。最终，我想要一个看起来像

```
[{"name" = "name1", "url" = "url1"}, {"name" = "name2", "url" = "url2"}] 
```

等等这就是我所拥有的：

```
def add(args):
    with open(DATA_FILENAME, mode='r', encoding='utf-8') as feedsjson:
        feeds = json.load(feedsjson)
    with open(DATA_FILENAME, mode='w', encoding='utf-8') as feedsjson:
        entry = {}
        entry['name'] = args.name
        entry['url'] = args.url
        json.dump(entry, feedsjson) 
```

这确实会创建一个条目，例如`{"name"="some name", "url"="some url"}`. 但是，如果我`add`再次使用这个函数，使用不同的名称和 url，第一个会被覆盖。我需要做什么才能将第二个（第三个...）条目附加到第一个条目上？

**编辑**：这个问题的第一个答案和评论指出了一个明显的事实，即我没有`feeds`在写块中使用。不过，我不知道该怎么做。例如，以下显然不会：

```
with open(DATA_FILENAME, mode='a+', encoding='utf-8') as feedsjson:
    feeds = json.load(feedsjson)
    entry = {}
    entry['name'] = args.name
    entry['url'] = args.url
    json.dump(entry, feeds) 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-21T03:08:43.043

json 可能不是磁盘格式的最佳选择；它在附加数据方面遇到的麻烦就是一个很好的例子，说明了为什么会这样。具体来说，json 对象的语法意味着必须读取和解析整个对象才能理解它的任何部分。

幸运的是，还有很多其他选择。一个特别简单的就是 CSV；python的标准库很好地支持它。最大的缺点是它只适用于文本；如果需要，它需要程序员的额外操作将值转换为数字或其他格式。

另一个没有此限制的选项是使用 sqlite 数据库，该数据库在 python 中也具有内置支持。这可能与您已经拥有的代码有更大的不同，但它更自然地支持您显然正在尝试构建的“稍微修改”模型。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-10-21T02:54:44.137

您可能希望使用 JSON*列表*而不是字典作为顶级元素。

因此，使用空列表初始化文件：

```
with open(DATA_FILENAME, mode='w', encoding='utf-8') as f:
    json.dump([], f) 
```

然后，您可以将新条目*附加*到此列表中：

```
with open(DATA_FILENAME, mode='w', encoding='utf-8') as feedsjson:
    entry = {'name': args.name, 'url': args.url}
    feeds.append(entry)
    json.dump(feeds, feedsjson) 
```

请注意，这执行起来会很慢，因为您每次调用时都会重写文件的全部内容`add`。如果您在循环中调用它，请考虑提前将所有提要添加到列表中，然后一次性写出列表。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-03-06T17:35:20.107

如果文件存在，则将条目附加到文件内容，否则将条目附加到空列表并写入文件：

```
a = []
if not os.path.isfile(fname):
    a.append(entry)
    with open(fname, mode='w') as f:
        f.write(json.dumps(a, indent=2))
else:
    with open(fname) as feedsjson:
        feeds = json.load(feedsjson)

    feeds.append(entry)
    with open(fname, mode='w') as f:
        f.write(json.dumps(feeds, indent=2)) 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-10-21T02:42:28.303

使用`a`而不是`w`应该让您更新文件而不是创建新文件/覆盖现有文件中的所有内容。

有关模式的差异，请参[见此答案](https://stackoverflow.com/questions/1466000/python-open-built-in-function-difference-between-modes-a-a-w-w-and-r)。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-06-17T01:23:08.787

一种可能的解决方案是手动进行连接，这里有一些有用的代码：

```
import json
def append_to_json(_dict,path): 
    with open(path, 'ab+') as f:
        f.seek(0,2)                                #Go to the end of file    
        if f.tell() == 0 :                         #Check if file is empty
            f.write(json.dumps([_dict]).encode())  #If empty, write an array
        else :
            f.seek(-1,2)           
            f.truncate()                           #Remove the last character, open the array
            f.write(' , '.encode())                #Write the separator
            f.write(json.dumps(_dict).encode())    #Dump the dictionary
            f.write(']'.encode())                  #Close the array 
```

在脚本外部编辑文件时应小心，不要在末尾添加任何间距。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-12-21T12:51:33.907

这个，为我工作：

```
with open('file.json', 'a') as outfile:
    outfile.write(json.dumps(data))
    outfile.write(",")
    outfile.close() 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-21T02:38:23.853

你从来没有写任何与你读入的数据有关的东西。你想将提要中的数据结构添加到你正在创建的新结构中吗？

或者，也许您想以附加模式打开文件，`open(filename, 'a')`然后添加您的字符串，方法是编写由生成的字符串`json.dumps`而不是使用`json.dump`- 但 nneonneo 指出这将是无效的 json。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-11-14T23:35:43.130

我有一些类似的代码，但不会每次都重写整个内容。这意味着定期运行并在数组末尾附加一个 JSON 条目。

如果该文件尚不存在，它会创建它并将 JSON 转储到一个数组中。如果文件已经被创建，它会走到最后，`]`用 a替换`,`掉新的 JSON 对象，然后再用另一个关闭它`]`

```
# Append JSON object to output file JSON array
fname = "somefile.txt"
if os.path.isfile(fname):
    # File exists
    with open(fname, 'a+') as outfile:
        outfile.seek(-1, os.SEEK_END)
        outfile.truncate()
        outfile.write(',')
        json.dump(data_dict, outfile)
        outfile.write(']')
else: 
    # Create file
    with open(fname, 'w') as outfile:
        array = []
        array.append(data_dict)
        json.dump(array, outfile) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-02-01T14:50:59.790

```
import jsonlines

object1 = {
               "name": "name1",
               "url": "url1"
          }

object2 = {
               "name": "name2",
               "url": "url2"
          }   

# filename.jsonl is the name of the file
with jsonlines.open("filename.jsonl", "a") as writer:   # for writing
    writer.write(object1)
    writer.write(object2)

with jsonlines.open('filename.jsonl') as reader:      # for reading
    for obj in reader:
        print(obj) 
```

访问以获取更多信息[https://jsonlines.readthedocs.io/en/latest/](https://jsonlines.readthedocs.io/en/latest/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-29T19:34:29.160

您可以简单地从源文件中导入数据，读取它，然后将要附加的内容保存到变量中。然后打开目标文件，将里面的列表数据分配给一个新变量（大概这都是有效的 JSON），然后在这个列表变量上使用“附加”函数并将第一个变量附加到它。Viola，您已附加到 JSON 列表。现在只需用新附加的列表（作为 JSON）覆盖您的目标文件。

'open' 函数中的 'a' 模式在这里不起作用，因为它只会将所有内容附加到文件的末尾，这将使其成为无效的 JSON 格式。

# mysql - 我将如何为产品编写这个 MySQL 查询？

> ID：12994444
> 
> 赞同：-2
> 
> 时间：2012-10-21T02:36:14.450
> 
> 标签：mysql

我有 3 个下拉框，我想根据用户的选择进行查询。但是如果他们没有为下拉框选择任何选项会发生什么？

我想显示`product=`*`first dropdownbox`*, 和 和`price`之间`$first`的所有产品`$last`，但我不确定如何做到这一点。

```
SELECT * FROM Products where product=$rec AND PRICE >=$first AND PRICE <=$last 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T02:50:30.987

目前尚不清楚你在问什么，但我猜你想要这样的东西：

```
SELECT * FROM Products where product=$rec AND PRICE between $first AND $last. 
```

正如我所说，我不太确定你的要求是什么。

# php - 使用 php 连接到 mysql 数据库时出现“找不到对象”

> ID：12994445
> 
> 赞同：2
> 
> 时间：2012-10-21T02:36:56.903
> 
> 标签：php, mysql, database, phpmyadmin

我在 xampp 的 phpmyadmin 中创建了我的数据库“MUSIC”。我正在尝试使用我存储在 OML 文件夹中的 php 文件连接到该数据库，该文件夹又存在于 htdocs 文件夹中，我的代码是：

```
$db_name="MUSIC";
$db_user="root";
$db_pwd="ash123";
$db_host="localhost";

$connect = mysql_connect("localhost","root","ash123");
mysql_select_db("MUSIC");
echo "connection successful"; 
```

但是当我去 localhost 并输入`localhost/connect.php`时，我收到了这个错误：

```
Object not found!
the requested URL was not found on this server.if u entered the URL manually please check your spelling and try again.If you think this is a server error,please contact webmaster.
Error 404
localhost
Apache/2.4.3 (Unix) OpenSSL/1.0.1c PHP/5.4.7 
```

我已经搜索过，但我找到了解决此问题的方法，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:09:48.387

> 我正在尝试使用我存储**在 OML 文件夹中的 php 文件连接到该数据库，该文件夹又存在于 htdocs 文件夹中**

所以，URI 将`/OML/connect.php`不仅仅是`/connect.php`，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T08:03:31.827

尝试在地址栏中输入：“localhost/OML/connect.php”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-15T06:39:16.293

请尝试此连接到您的数据库

```
<?php
$connect = mysqli_connect("localhost", "root", "ash123", "MUSIC");
if(mysqli_connect_errno())
{
    echo "Warning ERROR while connection DataBase." .mysqli_connect_errno();
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-15T05:53:11.163

`mysql_connect()`已[弃用](http://php.net/manual/en/function.mysql-connect.php)，并且您不正确地选择了数据库。

您的代码应该是：

```
$db_name="MUSIC";
$db_user="root";
$db_pwd="ash123";
$db_host="localhost";

$link = mysqli_connect($db_host, $db_pwd, $db_name);
if (!$link->connect_error) {
  echo "connection successful";
} else {
  echo $link->connect_error
} 
```

此时连接已建立，并选择了 DB。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-10T16:36:56.497

```
$connect = mysqli_connect("localhost","root","ash123","MUSIC"); 
```

在数据库连接文件中替换此代码。删除您显示的代码。

# ios - 使用cornerRadius或角落透明图像？

> ID：12994449
> 
> 赞同：0
> 
> 时间：2012-10-21T02:37:44.337
> 
> 标签：ios, xcode, uitableview, uiimageview, quartz-graphics

我`UITableView`将在给定时间包含大约 7 个可见单元格。每个单元格将有 4`UIView`秒。我希望每个`UIView`人都有一个光滑的角落。使用在上`Quartz`应用或制作并具有已预渲染以具有平滑角的透明图像更好？`cornerRadius``UIView``UIView``UIImageView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:24:08.780

如果您要使用动画，我会尽量不使用 Quartz。除非您对图层进行栅格化，否则动画将不稳定。如果您打算将自定义动画添加到表格视图单元格，则使用 UIImageView 将是一种方法。如果您不使用动画，那么继续使用石英，它实际上是改变角半径，添加阴影等。

# java - 如何使用AES算法在android中存储用于加密文件的密钥

> ID：12994458
> 
> 赞同：2
> 
> 时间：2012-10-21T02:38:56.553
> 
> 标签：java, android, security, encryption, aes

我尝试使用 AES 算法为 android 开发一个加密应用程序，我应该在哪里存储密钥。这个想法是用户提供密码并生成密钥。我怎样才能更安全地执行此过程。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T12:24:01.687

> 我尝试使用 AES 算法为 android 开发一个加密应用程序，我应该在哪里存储密钥。这个想法是用户提供密码并生成密钥

然后你不存储密钥。当用户提供密码时——无论是用于初始加密还是用于以后的解密——您都可以从密码中生成密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:56:03.910

正如@CommonWare 所指出的，您应该从密码中生成一个密钥。正确的方法是使用 PBKDF2 算法和盐 (*)。还有其他好的算法，例如 bcrypt 和 scrypt，但 PBKDF2 是最成熟的标准。对于 Android 实现，请参阅[Android 中的 PBKDF2 函数](https://stackoverflow.com/questions/8091519/pbkdf2-function-in-android)。

(*) *salt*是一个随机数，是 PBKDF2 算法的一部分。这种盐不是秘密；你可以以任何你喜欢的方式存储它。但是您需要跟踪它以供以后解密。通常，您在存储时将盐与 CBC 使用的随机 IV 一起添加到密文中。

# javascript - 如何阻止嵌入的 Youtube 视频同时播放

> ID：12994459
> 
> 赞同：4
> 
> 时间：2012-10-21T02:39:37.797
> 
> 标签：javascript, jquery, youtube, youtube-api

SoundCloud 播放器具有默认功能，当用户启动播放器时，它会自动暂停当前正在播放的所有其他播放器。（例如：http: [//jsfiddle.net/Vx6hM/](http://jsfiddle.net/Vx6hM/)）。

我正在尝试使用通过普通嵌入代码动态添加的嵌入式 youtube 视频来重新创建它。

使用这个：[https](https://stackoverflow.com/a/7513356/938089) ://stackoverflow.com/a/7513356/938089 和这个：[https ://stackoverflow.com/a/7988536/1470827](https://stackoverflow.com/a/7988536/1470827)

我能够做到这一点：

```
function chain(){

$('.post').each(function(){
    var player_id = $(this).children('iframe').attr("id");
    var other_player_id = $(this).siblings().children('iframe').attr("id");

    player = new YT.Player( player_id, { 

        events:
            {      
            'onStateChange': function (event) 
                {

                if (event.data == YT.PlayerState.PLAYING) 
                    { callPlayer( other_player_id , 'pauseVideo' );
                     alert('Trying to pause: ' + other_player_id);
                    }            

                }
            }        
    });

});

} 
```

**这是一个 JS Bin，它工作了一半：http: [//jsbin.com/oxoyes/2/edit](http://jsbin.com/oxoyes/2/edit)**

目前，它只呼叫其中一名球员。我需要它来暂停所有其他玩家，除了正在播放的玩家。

此外，欢迎任何有关如何清理和/或以不同方式/更好地进行操作的提示。我对javascript还是很陌生，所以我什至不确定我是否以正确的方式去做。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T06:26:52.637

在给定时间，您最多只能有一名玩家在玩。与其尝试暂停所有正在播放的内容，不如将其视为尝试暂停正在播放的内容。当然，没有人可以玩。鉴于此，请查看以下代码。您维护一个外部范围变量并在必要时暂停它，同时将其设置为您刚开始播放的播放器。

```
var playerCurrentlyPlaying = null;
function chain(){       
    $('.post').each(function(){
        var player_id = $(this).children('iframe').attr("id");
        player = new YT.Player( player_id, { 
            events:
                {      
                'onStateChange': function (event) 
                    {

                    if (event.data == YT.PlayerState.PLAYING) 
                        { 
                          if(playerCurrentlyPlaying != null && 
                          playerCurrentlyPlaying != player_id)
                          callPlayer( playerCurrentlyPlaying , 'pauseVideo' );
                          playerCurrentlyPlaying = player_id;

                        }            

                    }
                }        
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:14:22.337

我认为这可能会实现您的解决方案

```
var players=[];
 function chain(id){

    var player_id = $('#player'+id).attr('id');

   players[id]=new YT.Player( player_id, { 

        events:
            {      
            'onStateChange': onPlayerStateChange
            }

    });

 }

 function onPlayerStateChange(event){

  var playerid=$(event.target).attr('id');

  if(event.data!=-1 && event.data!=5){

      for(i=1;i<players.length;i++){

       if(playerid!=i){

      players[i].stopVideo();
       }

     }

   }
} 
```

您之前的代码的问题是您使用 each in call 函数，因此它可能执行 3*3 次，因此创建了 9 个播放器实例。所以我所做的就是将每个实例存储在一个数组中。

**演示**：http: [//jsbin.com/oxoyes/11/edit](http://jsbin.com/oxoyes/11/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T05:30:42.020

我尝试了 cbayram 发布的方式，发现它的成功率参差不齐。我更喜欢 fuzionpro 的方式，但不得不用它纠正一些问题，我想出了以下内容，它运行良好，包括 console.logs，所以你可以看到发生了什么。可能结合下面的 ytPlayers 和 ytPlayerStates 会提高效率。

```
// load the IFrame Player API code asynchronously
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var ytPlayers = new Array();
var ytPlayerStates = new Array();

window.onYouTubePlayerAPIReady = function()
{
    jQuery('.video-container>iframe').each(function(index)
    {
        var iframeID = jQuery(this).attr('id');
        ytPlayerStates[iframeID] = -1;

        (function (iframeID) {
            ytPlayers.push(new YT.Player(iframeID, { 
                events:
                {      
                    'onStateChange' : function (event) 
                    {
                        console.log(iframeID+' '+event.data);

                        if (event.data == 1)
                        {
                            ytPlayerStates[iframeID] = 1;
                            for (var key in ytPlayerStates)
                            {
                                if (key != iframeID)
                                {
                                    if (ytPlayerStates[key] == 1 || ytPlayerStates[key] == 3)
                                    {
                                        ytPlayerStates[key] = 2;
                                        callPlayer(key, 'pauseVideo')
                                    }
                                }
                                console.log(key+' : '+ytPlayerStates[key]);
                            };
                        }
                    }
                }
            }));
        })(iframeID); 
    });
} 
```

# objective-c - 使用 RestKit/iOS 映射嵌套数组

> ID：12994462
> 
> 赞同：4
> 
> 时间：2012-10-21T02:39:50.390
> 
> 标签：objective-c, ios, json, ios6, restkit

我需要用 RestKit 映射一个嵌套数组，而且我几乎得到了它（我想）。

我需要映射的 JSON，看起来像这样

```
[
    {
        _id: "5058670183970a0002000450",
        app_store_url: "http://itunes.apple.com/app/culturonda-alto-adige-sudtirol/id534467629",
        comments: [
            {
                _id: "5058670783970a0002000456",
            },
            {
                _id: "50588d7f83970a000200065c",
            }
        ]
    }
] 
```

我存储信息的控制器如下所示：

```
#import <Foundation/Foundation.h>
#import "CommentData.h"

@interface DesignData : NSObject
    @property (retain, nonatomic) NSString *designId;
    @property (retain, nonatomic) NSSet *commentsRelationship;
@end 
```

和：

```
#import <Foundation/Foundation.h>

@interface CommentData : NSObject
    @property (retain, nonatomic) NSString *commentId;
@end 
```

我的映射如下所示：

```
RKObjectManager *objectManager = [RKObjectManager sharedManager];

RKObjectMapping *commentsMapping = [RKObjectMapping mappingForClass:[CommentData class]];
[commentsMapping mapKeyPathsToAttributes:@"_id", @"commentId", nil];

RKObjectMapping *designMapping = [RKObjectMapping mappingForClass:[DesignData class] ];
[designMapping mapKeyPathsToAttributes:@"_id", @"designId", nil];

[designMapping mapKeyPath:@"comments" toRelationship:@"commentsRelationship" withMapping:commentsMapping];

[objectManager.mappingProvider setMapping:designMapping forKeyPath:@""]; 
```

评论进入一个数组，但它没有存储在评论控制器中。如果我像这样在 objecloader 回调中显示注释：

```
DesignData *designData = [objects objectAtIndex:0];
NSLog(@"Loaded %@ ", designData.commentsRelationship); 
```

它给了我：

```
2012-10-20 22:37:55.258 RestKitTest5[4144:c07] Loaded {(
                                                        <CommentData: 0x8689730>,
                                                        <CommentData: 0x868bed0>,
                                                        <CommentData: 0x868bfe0>,
                                                        <CommentData: 0x868bf50>
                                                        )} 
```

这是一个开始。但我不能这样做：

```
DesignData *designData = [objects objectAtIndex:0];
NSLog(@"Loaded %@ ", designData.commentsRelationship.commentId); 
```

那么如何将整个内容存储为数组呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-21T14:30:52.220

替换这条线后，我为我工作：

```
[designMapping mapKeyPath:@"comments" toRelationship:@"commentsRelationship" withMapping:commentsMapping]; 
```

和：

```
[designMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"comments" toKeyPath:@"commentsRelationship" withMapping: commentsMapping]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:29:17.687

我已经做对了，最后我只是愚蠢。

我得到了数组，并且数组中的对象是正确的类型（CommentData），所以我所要做的就是遍历数组，然后我可以从那里分别处理每个对象。

# ipv6 - BitTorrent IPv4 - IPv6 交互

> ID：12994466
> 
> 赞同：-1
> 
> 时间：2012-10-21T02:41:05.523
> 
> 标签：ipv6, bittorrent, ipv4

我的 ISP 只为我提供了 IP4 地址，但 Deluge (Torrent-Client) 在 peers 选项卡中列出了 IP6 地址。这是如何运作的？我认为无法与 IP6 设备通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:41:59.313

您可能配置了某种形式的 IPv6 隧道（例如 Teredo 隧道）。检查`ifconfig`（`ipconfig`在 Windows 上）以确保。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:15:54.097

通常这是因为 Windows 中的自动 IPv6-in-IPv4 Teredo 隧道。它对于正常使用并不可靠，但由于 BitTorrent 将负载分布在许多连接上，无论如何，其中一些 Teredo 连接实际上可能工作:-)

Windows 系统仅在没有其他 IPv6 访问可用时显式连接到 IPv6 地址时尝试使用 Teredo。当连接到主​​机名而不是显式地址时，不会使用 Teredo。

# oracle - OracleResultSetMetaData 在其抛出 NullPointerException 方法

> ID：12994475
> 
> 赞同：0
> 
> 时间：2012-10-21T02:42:57.003
> 
> 标签：oracle, jdbc, groovy, nullpointerexception, resultset

我正在使用 groovy.sql.Sql 对 Oracle 执行查询并返回一个 ResultSet，然后在自定义 TableAdapter 中使用它来支持 JTable。查询执行没有错误，但是当我尝试从 ResultSet 中检索 MetaData 时，在第 72 行的 OracleResultSetMetaData 的 <init> 方法期间抛出 NullPointerException。我无法找到该类的源代码以找出什么可能为空，所以我向这个很棒的社区寻求帮助。

下面的函数是我用来执行我的 SQL 查询的函数，该查询是在解析模板的单独类中生成的。我目前正在模拟模板以返回经过验证的有效 SQL 语句。

```
ResultSet getResultSet() {
    if (data == null) {
        if (sql == null) {
            sql = Sql.newInstance(CONN_STRING, USERNAME, PASSWORD, DRIVER_NAME)
            sql.resultSetType = ResultSet.TYPE_SCROLL_SENSITIVE
            sql.resultSetHoldability = ResultSet.HOLD_CURSORS_OVER_COMMIT // Added since initial post
        }

        data = sql.executeQuery(template.getSql())          
    }

    return data
} 
```

我的 getColumnCount 方法是发生 NPE 的地方，它看起来像这样。

```
@Override
public synchronized int getColumnCount() {
    return getResultSet().metaData.columnCount
} 
```

这是我的堆栈跟踪，可以很好地衡量。

```
2012-10-20 21:49:12,135 [AWT-EventQueue-0] ERROR org.codehaus.griffon.runtime.builder.UberBuilder - An error occurred while building browser.BrowserView@17c1e333
 [exec] java.lang.NullPointerException
 [exec]     at oracle.jdbc.driver.OracleResultSetMetaData.<init>(OracleResultSetMetaData.java:72)
 [exec]     at oracle.jdbc.driver.ScrollableResultSet.getMetaData(ScrollableResultSet.java:2004)
 [exec]     at com.trxi.browser.TemplateTableModel.getColumnCount(TemplateTableModel.groovy:75)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeFactoryMethod(UberInterceptorMetaClass.groovy:97)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.this$3$invokeFactoryMethod(UberInterceptorMetaClass.groovy)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass$this$3$invokeFactoryMethod.callCurrent(Unknown Source)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:141)
 [exec]     at browser.BrowserView$_run_closure1_closure2.doCall(BrowserView.groovy:11)
 [exec]     at browser.BrowserView$_run_closure1_closure2.doCall(BrowserView.groovy)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeFactoryMethod(UberInterceptorMetaClass.groovy:97)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.this$3$invokeFactoryMethod(UberInterceptorMetaClass.groovy)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass$this$3$invokeFactoryMethod.callCurrent(Unknown Source)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:141)
 [exec]     at browser.BrowserView$_run_closure1.doCall(BrowserView.groovy:10)
 [exec]     at browser.BrowserView$_run_closure1.doCall(BrowserView.groovy)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeFactoryMethod(UberInterceptorMetaClass.groovy:97)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.this$3$invokeFactoryMethod(UberInterceptorMetaClass.groovy)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass$this$3$invokeFactoryMethod.callCurrent(Unknown Source)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:168)
 [exec]     at browser.BrowserView.run(BrowserView.groovy:4)
 [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:152)
 [exec]     at org.codehaus.griffon.runtime.builder.UberBuilder.build(UberBuilder.groovy:160)
 [exec]     at org.codehaus.griffon.runtime.core.AbstractMVCGroup$1.run(AbstractMVCGroup.java:129) 
```

更新：我修改了我的代码以从模板而不是 ResultSetMetaData 对象中提取信息，现在我收到一个错误，即我的 ResultSet 已关闭。我认为假设这是导致 OracleResultSetMetaData 对象在其 <init> 方法期间失败的原因是相对安全的。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:19:08.767

经过一番研究，我发现 ResultSet 被关闭的原因是正在 groovy.sql.Sql.executeQuery() 函数的底层创建的 Statement 对象正在被关闭。为了防止它被关闭，我只需要在我的 groovy.sql.Sql 对象上启用语句缓存。

```
sql.cacheStatements = true 
```

# php - 以编程方式，我想要一个没有“body”字段的 Drupal 7 内容类型

> ID：12994477
> 
> 赞同：5
> 
> 时间：2012-10-21T02:43:02.587
> 
> 标签：php, drupal, drupal-7, field, content-type

在 Drupal 7 中，我以编程方式创建了一个带有 2 个新字段的新内容类型。要填写新的内容类型，它会显示一个我不想填写的“正文”字段。有没有办法以编程方式安装新的内容类型来隐藏正文字段。我知道我可以使用 CSS 来隐藏 body 字段，但是，我认为这可能是一个 kludge。我想使用正确的编程方法来隐藏 Body 字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T07:20:43.970

您可以使用[`field_delete_instance()`](http://api.drupal.org/api/drupal/modules!field!field.crud.inc/function/field_delete_instance/7)

*如果您需要进一步的帮助，请告诉我们。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:24:00.693

内容类型默认没有 body 字段 - 通常在创建内容类型时添加：

```
// add content types
$ctypes = _my_module_get_content_types();          // get content types
foreach($ctypes as $ctype => $data){
  if (!in_array($ctype, node_type_get_names())) {  // check for collisions
    $data = node_type_set_defaults($data);         // default *does not* add body field
    node_type_save($data);
    node_add_body_field($data);                    // add body here (typical usage)
  }
} 
```

环顾四周寻找`node_add_body_field()`fn 并将其删除（如果存在）。

# php - 在结果集迭代期间填充键或调用方法

> ID：12994479
> 
> 赞同：0
> 
> 时间：2012-10-21T02:43:24.187
> 
> 标签：php, propel

我正在使用 Propel 来检索产品列表，其中一些产品具有与它们相关联的图像，该图像位于上传文件夹中并且基于图像 id（例如`/uploads/products/product_12.jpg`）将是具有 id 的产品的图像12.

由于此图像记录未作为列存储在数据库中，因此我不确定如何访问图像而无需`file_exists()`在视图中进行检查。

是否可以有一个类似的方法来`$product->getImage()` 返回图像或返回一个空白的“图像不存在”图像，或者更好的是，创建一个`image`与上面相同并且可以通过`$product->image`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:06:14.667

当然。

在您的模型类（不是 Peer 类，另一个）中，创建此方法`getImage()`基本上可以：

```
public function getImage()
{
  $filepath = '/uploads/products/product_'.$this->getId().'.jpg';
  if (!file_exists($filepath))
  {
    // image doesn't exist, return false or an empty default image
    return false;
  }

  return $filepath;
} 
```

# visual-studio-2012 - vs2012无法运行测试

> ID：12994482
> 
> 赞同：1
> 
> 时间：2012-10-21T02:44:30.020
> 
> 标签：visual-studio-2012, gallio, testdriven.net

我正在使用visual studio 2012。我安装了测试驱动的个人beta 2。然后我安装了gallio bundle 3.2。

但是，当我运行测试时，它失败了。输出是这样的：

```
 It looks like you're trying to execute a Gallio/MbUnit unit test.

  For Gallio v3.0.6 build 787 / Gallio v3.1 build 313 or above (recommended):
  Please ensure that the directory containing your 'MbUnit.dll' reference also contains     Gallio's
  test runner files ('MbUnit.dll.tdnet', 'TDNet\Gallio.TDNetRunner.dll', 'Gallio.dll' etc.)

  For earlier versions:
  You need to install Gallio (after TestDriven.Net) using its MSI installer.

  You can find Gallio downloads and support here:
  http://www.gallio.org/ 
```

我不确定是什么问题。对于使用 Visual Studio 2012 的用户，您使用的是哪个版本的 testdriven 和 Gallio？

更新：我检查了上述 dll 是否与 MbUnit.dll 在同一个文件夹中，并且它们是。问题是什么？？TT

# ruby-on-rails - Rails 3.2.8 form_for 提交按钮使用“新”操作而不是“创建”操作

> ID：12994485
> 
> 赞同：0
> 
> 时间：2012-10-21T02:46:05.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

用值填写我的表格后。单击 f.submit 只会刷新我的视图 (new.html.erb)。我正在尝试将表单保存到我的数据库并重定向到我的索引视图。

我尝试了以下方法：

1.  从 posts_controller 创建操作中删除了条件语句。
2.  将我的嵌套资源更改为单个资源（帖子）。
3.  通过我表单中的 url 哈希传递路由选项。

我也遵循了这些 SO 问题中的相关建议，但没有成功。

1.  [Rails 创建操作不起作用](https://stackoverflow.com/questions/12429097/rails-create-action-not-working?rq=1)[https://stackoverflow.com/editing-help](https://stackoverflow.com/editing-help)

2.  [rails form_for 从不调用创建控制器操作来使用 redirect_to](https://stackoverflow.com/questions/10956346/rails-form-for-never-invokes-the-create-controller-action-to-use-redirect-to)

3.  [Rails 表单发布到 /new 而不是 /create？](https://stackoverflow.com/questions/10180862/rails-form-posting-to-new-instead-of-create)

这是我的代码：

```
-- views/posts/index.html.erb
<h5>Posts#index</h5>
<small><i>Find me in app/views/posts/index.html.erb</i></small>
<hr />

<div class="hero hero-unit">
    <button><%= link_to "Create a post", new_post_path %></button>
    <hr />

    <ul class="unstyled">
        <% @posts.each do |post| %>

        <h5><small>post ID: </small><%= post.id %></h5>
        <li><%= post.URL %></li>
        <li>
            <%= link_to post.description, post %>
        </li>
        <li>
            <ul class="unstyled">
                <li><small><i>submitted <%= time_ago_in_words(post.created_at) %> ago.</i></small></li>
            </ul>
        </li>
        <li>
            <%= pluralize(post.comments.count, 'comment') %>
        </li>
        <!-- votes moved to votes/index.html.erb -->
        <li>
            <button class="btn btn-mini btn-success">
                <%= link_to '', post_votes_path(post, vote: "true"), method: :post, remote: true, class: 'icon-arrow-up' %>
            </button>

            <button class="btn btn-mini btn-danger">
                <%= link_to '', post_votes_path(post, vote: "false"), method: :post, remote: true, class: 'icon-arrow-down' %>
            </button>
            <p><%= post.vote_total.to_s + " votes" %></p>
            <!-- 
                <span id="post_<%= post.id %>_votes"><%= post.vote_total.to_s + " votes" %></span>
            -->
        </li>
        <% end %>
        <hr />
    </ul>
</div><!-- END hero, hero-unit CLASS -->

-- views/posts/new.html.erb

    <h5>Posts#new</h5>
<small><i>Find me in app/views/posts/new.html.erb</i></small>
<hr />

<div class="hero hero-unit">
    <form class="form-horizontal">
        <%= form_for @post do |f| %>
        <div class="control-group">
            <label class="control-label">
                <%= f.label "Select post type" %> 
            </label>
            <div class="controls">
                <%= f.select :is_link, options_for_select([["Link", true], ["Text", false]]) %>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label" for="URL"><%= f.label :URL %></label>
            <div class="controls">
                <%= f.text_field :URL %>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label" for="description"><%= f.label :description %></label>
            <div class="controls">
                <%= f.text_area :description, rows: 5 %>
            </div><br />
            <div class="controls">
                <%= f.submit 'save post' %>
                <% end %>
            </div>
        </div>
    </form> 
</div><!-- end hero, hero-unit CLASS -->

-- posts_controller.rb

class PostsController < ApplicationController
  def index
    @posts = Post.find(:all)
  end

  def new
    @post = Post.new
  end

  def create
    @post = Post.new(params[:post])

    redirect_to root_path
  end

  def show
    # Post 
    @post = Post.find(params[:id])

    # Comments assiciated by :post_id 
    @comments = @post.comments.all
    @comment = @post.comments.build(params[:comment])
    @comment.save
  end

  def edit
    @post = Post.find(params[:id])
  end
end

-- config/routes.rb

  root to: 'posts#index'

  resources :posts do
    resources :comments
    resources :votes
  end
.
.
.
#match ':controller(/:action(/:id))(.:format)'

--Terminal rake routes

             root        /                                           posts#index
    post_comments GET    /posts/:post_id/comments(.:format)          comments#index
                  POST   /posts/:post_id/comments(.:format)          comments#create
 new_post_comment GET    /posts/:post_id/comments/new(.:format)      comments#new
edit_post_comment GET    /posts/:post_id/comments/:id/edit(.:format) comments#edit
     post_comment GET    /posts/:post_id/comments/:id(.:format)      comments#show
                  PUT    /posts/:post_id/comments/:id(.:format)      comments#update
                  DELETE /posts/:post_id/comments/:id(.:format)      comments#destroy
       post_votes GET    /posts/:post_id/votes(.:format)             votes#index
                  POST   /posts/:post_id/votes(.:format)             votes#create
    new_post_vote GET    /posts/:post_id/votes/new(.:format)         votes#new
   edit_post_vote GET    /posts/:post_id/votes/:id/edit(.:format)    votes#edit
        post_vote GET    /posts/:post_id/votes/:id(.:format)         votes#show
                  PUT    /posts/:post_id/votes/:id(.:format)         votes#update
                  DELETE /posts/:post_id/votes/:id(.:format)         votes#destroy
            posts GET    /posts(.:format)                            posts#index
                  POST   /posts(.:format)                            posts#create
         new_post GET    /posts/new(.:format)                        posts#new
        edit_post GET    /posts/:id/edit(.:format)                   posts#edit
             post GET    /posts/:id(.:format)                        posts#show
                  PUT    /posts/:id(.:format)                        posts#update
                  DELETE /posts/:id(.:format)                        posts#destroy

--WEBrick 

Started GET "/posts/new?utf8=%E2%9C%93&authenticity_token=Z8LuvU7i5ytFi1OxiIGpgwYOy%2BWE%2BfiAZv7m7T%2BwYRI%3D&post%5Bis_link%5D=true&post%5BURL%5D=http%3A%2F%2Ffirsttimers.co&post%5Bdescription%5D=My+first+time.&commit=save+post" for 127.0.0.1 at 2012-10-20 22:37:52 -0400
Processing by PostsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Z8LuvU7i5ytFi1OxiIGpgwYOy+WE+fiAZv7m7T+wYRI=", "post"=>{"is_link"=>"true", "URL"=>"http://firsttimers.co", "description"=>"My first time."}, "commit"=>"save post"}
  Rendered posts/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 12ms (Views: 11.8ms | ActiveRecord: 0.0ms) 
```

任何对解决方案和/或解释我忽略的内容和正在发生的事情的帮助（我希望这不是错字......哈哈）将不胜感激。

```
-- EDIT. HTML Generated code for posts/new.html.erb

<!DOCTYPE html>
<html>
<head>
  <title>PostEmHigh</title>
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/custom.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/posts.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/scaffolds.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/posts.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
  <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="Z8LuvU7i5ytFi1OxiIGpgwYOy+WE+fiAZv7m7T+wYRI=" name="csrf-token" />
</head>
<body>

    <h5>Posts#new</h5>
<small><i>Find me in app/views/posts/new.html.erb</i></small>
<hr />

<div class="hero hero-unit">
    <form class="form-horizontal">
        <form accept-charset="UTF-8" action="/posts" class="new_post" id="new_post" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="Z8LuvU7i5ytFi1OxiIGpgwYOy+WE+fiAZv7m7T+wYRI=" /></div>
        <div class="control-group">
            <label class="control-label">
                <label for="post_Select post type">Select post type</label> 
            </label>
            <div class="controls">
                <select id="post_is_link" name="post[is_link]"><option value="true">Link</option>
<option value="false">Text</option></select>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label" for="URL"><label for="post_URL">Url</label></label>
            <div class="controls">
                <input id="post_URL" name="post[URL]" size="30" type="text" />
            </div>
        </div>

        <div class="control-group">
            <label class="control-label" for="description"><label for="post_description">Description</label></label>
            <div class="controls">
                <textarea cols="40" id="post_description" name="post[description]" rows="5">
</textarea>
            </div><br />
            <div class="controls">
                <input name="commit" type="submit" value="save post" />
</form>         </div>
        </div>
    </form> 
</div><!-- end hero, hero-unit CLASS -->

    <pre class='debug_dump'>--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
utf8: ✓
authenticity_token: Z8LuvU7i5ytFi1OxiIGpgwYOy+WE+fiAZv7m7T+wYRI=
post: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
&nbsp; is_link: &#x27;true&#x27;
&nbsp; URL: http://firsttimers.co
&nbsp; description: My first time.
commit: save post
action: new
controller: posts
</pre>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:52:48.527

删除表单助手中的 url 选项，然后重试

确定不是来自你，

为您的帖子资源运行脚手架生成器

```
rails g scaffold post is_link:boolean url description:text 
```

如果需要，您可以使用 twitter bootstrap 主题生成器选项重新生成引导样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:25:12.913

你能复制为你的表单生成的 HTML 代码吗？另外，试试这个：

```
form_for @post, :url => posts_path(), :method => :post 
```

并复制表单的 HTML 代码。

# android - Android 画布到位图

> ID：12994487
> 
> 赞同：3
> 
> 时间：2012-10-21T02:46:10.970
> 
> 标签：android, bitmap, android-canvas

我一直在网上搜索如何将画布上的内容变成位图。我尝试了多种方法来做到这一点，例如将绘图缓存保存到位图，但最终结果是背景位图闪烁片刻，然后变成黑屏。测试图像显示在背景上，但不会在下一次调用`OnDraw`.

```
MainThreading{

                        ...

              if(notuptodate == true){

                        //call readyBackground to create the background bitmap
                        this.mainPanel.readyBackground(canvas);
                        //post the canvas
                        surfaceHolder.unlockCanvasAndPost(canvas);
                        //clean the Canvas
                        canvas = null;
                        //ready new Canvas
                        canvas = this.surfaceHolder.lockCanvas();//lock the canvas to enable editing

                    }//if not true

                    if (MainThreading.notuptodate == false){

                        mainPanel.onDraw(canvas);

                    }//if false
...
                 }//mainthreading

    //this method is run first to create the Bitmap that on draw will use
    public void readyBackGround(Canvas canvas){

        if (MainThreading.notuptodate){
            //method used to draw multiple Bitmaps onto the canvas
            renderBackground(canvas);

            //private Bitmap, this is the supposed proper size of the bitmap
            backgroundBitmap=Bitmap.createBitmap(240, 320, Config.ARGB_8888);

            //set the canvas to turn whats on its self onto the bitmap.
            canvas.setBitmap(backgroundBitmap);

            //set boolean flag to false so renderBackground won't be called
            //untill it needs to be updated again
            MainThreading.notUpToDate = false;

        }

        //this method is called when notUpToDate = true
         @Override
    protected void onDraw(Canvas canvas){

        if (this.threado.getBackground() != null){
            canvas.drawBitmap(backgroundBitmap, 0, 0, null);

            }

            //this if statement is never activated
            if (this.threado.getBackground() == null){
                Log.d("background nonexistant", "Importante!");
            }
            //draw test object onto background
            test.DrawObject(canvas);

                //when MainThreading.notUpToDate = true isn't commented out, the
                //screen consistantly shows the background, but the test object isn't
                //drawn

        //MainThreading.notUpToDate = true;

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T04:39:25.420

试试这个方法...

**-**使用创建`bitmap`正确大小的`Bitmap.createBitmap()`

**-**使用构造函数创建一个`canvas instance`指向该位图`Canvas(Bitmap)`

**-**画到`canvas`

**-**使用`bitmap`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-14T14:49:24.450

```
public class CanvasToBitmap extends View {

    Paint paint = new Paint();
    Rect mRect = new Rect();
    Bitmap bitmap = Bitmap.createBitmap(200, 200, Bitmap.Config.ARGB_8888);

    public myCanvas( Context context ) {
        super(context);
        Canvas canvas = new Canvas(bitmap);
        draw(canvas);
    }

    @Override
    public void onDraw(Canvas canvas) {

        mRect.set(0, 0, 200, 200);
        paint.setColor(Color.GREEN);
        paint.setStyle(Paint.Style.FILL);
        canvas.drawRect(mRect, paint);
        canvas.setBitmap(bitmap);

        ByteArrayOutputStream mByteArrayOutputStream = new ByteArrayOutputStream();
        try{
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, mByteArrayOutputStream);

            bitmap = BitmapFactory.decodeStream(new ByteArrayInputStream(mByteArrayOutputStream.toByteArray()));
            mByteArrayOutputStream.close();
       } catch (Exception e) {e.printStackTrace();}
    }
} 
```

创建一个新实例：

```
CanvasToBitmap canvasToBitmap = new CanvasToBitmap(getBaseContext()); 
```

获取 canvasToBitmap 的位图：

```
Bitmap bitmap = canvasToBitmap.bitmap; 
```

# css - 更改 woocommerce 页面的宽度

> ID：12994489
> 
> 赞同：2
> 
> 时间：2012-10-21T02:47:23.780
> 
> 标签：css, wordpress, woocommerce

我的侧边栏显示不正确，因为 woocommerce 页面宽度太宽。我一直在尝试找出如何更改它的宽度，以便我可以将侧栏放入几天但无法弄清楚，主要是因为我不确定要查看哪个文件。

这就是它的样子

![在此处输入图像描述](../Images/7911135759cb209c0e0dd041f41606a8.png)

我已经查看了大量的 woocommerce 代码，但无法弄清楚他们页面的宽度设置在哪里.. 任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:24:07.087

尝试为 Firefox 安装 Firebug。这样，您可以右键单击模板区域并选择“Inspect Element with Firebug”。

您可以使用 CSS，在右侧它还会告诉您 CSS 文件和行，以便您可以修改模板。

根据记忆，其中一些 woocommerce 主题在主题内的子目录中声明 CSS。但是萤火虫应该将您指向文件的位置。

希望这可以帮助 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:12:15.373

主题布局控制页面和侧边栏的宽度。Woocommerce 控制为产品显示的图像的大小。这可能是其中的一部分。尝试将图像设置为小，直到配置好侧边栏，然后将图像适合它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:47:13.660

复制您的主题的 page.php 文件，并将其命名为 woocommerce.php
该文件应该像这样找到：wp-content/themes/YOURTHEME/woocommerce.php。

在文本编辑器中打开您的 woocommerce.php 并替换循环

接下来，您需要找到循环（请参阅 The_Loop）。循环通常以：

```
<?php if ( have_posts() ) : 
```

通常以：

```
<?php endif; ?> 
```

这因主题而异。找到后，将其删除。取而代之的是：

```
<?php woocommerce_content(); ?> 
```

# spring-mvc - 如何从使用 JAXB 生成的 XML 中删除默认的根元素命名空间前缀

> ID：12994490
> 
> 赞同：6
> 
> 时间：2012-10-21T02:47:36.177
> 
> 标签：spring-mvc, jaxb

我正在使用带有 spring-mvc 框架的 JAXB 来生成 XML。这是根元素的示例：

```
<ns2:urlset xmlns:ns2="http://www.example.com"> 
```

但是，这就是我想要的（没有 XML 命名空间前缀`ns2`）：

```
<urlset xmlns="http://www.example.com"> 
```

我尝试使用以下`package-info.java`方法删除默认前缀`ns2`。

```
@javax.xml.bind.annotation.XmlSchema(  
    namespace = "http://www.example.com",   
    xmlns = {@javax.xml.bind.annotation.XmlNs(namespaceURI = "http://www.example.com", prefix="")},  
    elementFormDefault = javax.xml.bind.annotation.XmlNsForm.UNQUALIFIED)  
package com.example.code 
```

`ns2`如果我设置`prefix`为另一个字符串，则前缀可以更改为其他值（比）。但是不能通过将`prefix`值设置为“”来删除前缀。它仍然显示默认值`ns2`。有没有办法删除默认前缀`ns2`？

另一个问题是，是否`standalone`也可以删除 XML 标头中的属性？如果可以，可以通过`package-info.java`吗？

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T22:38:08.520

尝试这个：

包信息.java

```
 @XmlSchema(
    namespace="http://www.sitemaps.org/schemas/sitemap/0.9", 
    elementFormDefault=XmlNsForm.QUALIFIED)
package com.example.model;
import javax.xml.bind.annotation.XmlSchema;
import javax.xml.bind.annotation.XmlNsForm; 
```

XmlUrlSet.java

```
@XmlAccessorType(value = XmlAccessType.NONE)
@XmlRootElement(name = "urlset", namespace = "http://www.sitemaps.org/schemas/sitemap/0.9")
public class XmlUrlSet {...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:47:12.910

如果[@alex 的回答](https://stackoverflow.com/a/13483425/1126526)不起作用，您可能在 JAXB 的参考实现中发现了一个错误（至少，我认为它是一个错误）。我只是遇到了同样的问题——如果我在我的模型类中添加了一个 JaxbElement，那么 JAXB RI 开始忽略我的默认命名空间。除了切换到 Eclipse MOXy（没有任何其他修改）之外，我找不到其他解决方案，并且它有效。（注意：注意 moxy 中的[另一个错误](https://stackoverflow.com/questions/6808921/jaxb-qualified-attributes-disables-default-namespace-xmlns)）

同样对于您的第二个问题，请使用以下命令：

```
JAXBContext jc = JAXBContext.newInstance(...);
Marshaller m = jc.createMarshaler();
m.setProperty(Marshaller.JAXB_FRAGMENT, Boolean.TRUE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-04T08:49:53.307

每个将被编写为 XML 元素的 Java 对象和其中的嵌套字段都有一个与之关联的名称空间。如果编组器在被编组的对象树中检测到多个名称空间，它将添加适当的名称空间前缀以在编组的 XML 中消除它们的歧义。

以下讨论适用于 Java 1.6 及更高版本。

# [示例 1](https://www.ideone.com/JcKTab)

* * *

类的实例

```
@XmlRootElement(name = "Message")
class Message {
  @XmlAttribute(name = "Version")
  public int getVersion() { return 1; }
} 
```

将被序列化为：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Message Version="1"/> 
```

因为 XML 消息只有一个元素 ( `Message`)，并带有默认命名空间 ( `""`)。

# [示例 2](https://www.ideone.com/Zb1zRl)

* * *

类的实例

```
@XmlRootElement(name = "Message", namespace = "http://example.com/schema/message")
class Message {
  @XmlAttribute(name = "Version")
  public int getVersion() { return 1; }
} 
```

（添加到的自定义命名空间`@XmlRootElement`）将被序列化为：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Message xmlns="http://example.com/schema/message" Version="1"/> 
```

因为 XML 消息仍然只有一个元素 ( `Message`)，尽管使用自定义名称空间 ( `http://example.com/schema/message`) 而不是默认名称空间。

# [示例 3](https://www.ideone.com/4WpVi6)

* * *

类的实例

```
@XmlRootElement(name = "Message", namespace = "http://example.com/schema/message")
class Message {
  @XmlElement(name = "Version")
  public int getVersion() { return 1; }
} 
```

(`@XmlAttribute`改为`@XmlElement`) 将被序列化为：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:Message xmlns:ns2="http://example.com/schema/message">
    <Version>1</Version>
</ns2:Message> 
```

因为 XML 消息现在有两个元素（`Message`和`Version`），具有不同的名称空间（`http://example.com/schema/message`和`""`分别）。因此，编组器被迫通过它们自己的名称空间来消除这两个元素的歧义。

# [示例 4](https://www.ideone.com/9iyxe9)

类的实例

```
@XmlRootElement(name = "Message", namespace = "http://example.com/schema/message")
class Message {
  @XmlElement(name = "Version", namespace = "http://example.com/schema/message")
  public int getVersion() { return 1; }
} 
```

（添加到的自定义命名空间`@XmlElement`）将被序列化为：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:Message xmlns:ns2="http://example.com/schema/message">
    <Version>1</Version>
</ns2:Message> 
```

因为虽然 XML 消息有两个元素（`Message`和`Version`），但它们共享相同的命名空间（`http://example.com/schema/message`）。因此，在确定每个元素属于哪个名称空间时不再有任何歧义，因此在生成的 XML 中只有一个名称空间声明。

# c++ - Opengl + SDL 链接错误

> ID：12994491
> 
> 赞同：0
> 
> 时间：2012-10-20T04:33:58.143
> 
> 标签：c++, opengl, sdl

我正在尝试在 Visual Studio 2010 中使用 C++ 使用 OpenGL 将图像作为纹理加载。我在网上研究了几个小时并找到了 SDL 库，然后我实现了一个简单的示例并遇到了一些我似乎无法弄清楚的链接错误. 错误日志在这里：

```
1>Build started 10/20/2012 12:09:17 AM.
1>InitializeBuildStatus:
1>  Touching "Debug\texture mapping test.unsuccessfulbuild".
1>ClCompile:
1>  All outputs are up-to-date.
1>  texture mapping test.cpp
1>ManifestResourceCompile:
1>  All outputs are up-to-date.
1>texture mapping test.obj : error LNK2019: unresolved external symbol _IMG_Load referenced in function "void __cdecl display(void)" (?display@@YAXXZ)
1>MSVCRTD.lib(crtexe.obj) : error LNK2019: unresolved external symbol _main referenced in function ___tmainCRTStartup
1>C:\Users\Me\Documents\Visual Studio 2010\Projects\Programming projects\texture mapping test\Debug\texture mapping test.exe : fatal error LNK1120: 2 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:02.45
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我下载了 SDL，并将所有 .h 文件复制到：

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Include 
```

我将 .lib (x86) 文件添加到：

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Lib 
```

（注意：我也尝试了（x64）文件，但得到了完全相同的错误）

并将 .dll(x86) 放入：

```
C:\Windows\System32 
```

为了实现纹理，我使用了以下简单示例代码：[SDL Tip - SDL Surface to OpenGL Texture](http://www.sdltutorials.com/sdl-tip-sdl-surface-to-opengl-texture)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T02:37:52.357

确保您与**sdl.lib**和 sdlmain.lib 链接。

此外，您似乎正在使用 SDL_Image。您还应该尝试与 sdl_image.lib 链接以修复您的两个错误中的第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:54:38.897

您是否在配置管理器下检查了正确的活动解决方案平台？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-19T18:49:53.570

在您的项目目录中创建一个文件夹并尝试使用链接器设置连接到这些文件。这就是我在发生此错误时所做的。还要确保使用相同的 sdl lib 类型（x86 或 x64）进行编译。

# java - XSD 验证：此解析器不支持规范“null”版本“null”

> ID：12994494
> 
> 赞同：6
> 
> 时间：2012-10-21T02:48:19.703
> 
> 标签：java, xsd

我正在尝试使用标准 Java 库验证 XML 文件并得到上述错误。我的 XSD 文件`test1.xsd`是

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:complexType name="foo">
        <xsd:attribute name="bar" type="xsd:string" />
    </xsd:complexType>  
</xsd:schema> 
```

使用代码（在 Eclipse 中作为 Junit 测试运行）：

```
@Test
public void testValidatingParser1() throws Exception {
    String SCHEMA_PATH = "test1.xsd";
    InputStream SCHEMA_STREAM = getClass().getResourceAsStream(SCHEMA_PATH);
    StreamSource SCHEMA_SOURCE = new StreamSource(SCHEMA_STREAM);
    SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    Schema schema = sf.newSchema(SCHEMA_SOURCE);
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setSchema(schema);
} 
```

错误是：

```
java.lang.UnsupportedOperationException: This parser does not support specification "null" version "null"
at javax.xml.parsers.DocumentBuilderFactory.setSchema(Unknown Source)
at org.xmlcml.graphics.misc.SchemaTest.testValidatingParser1(SchemaTest.java:123) 
```

此错误似乎是由于与 XML 解析器（例如 Xerces）不兼容造成的，请参阅[这篇文章](https://stackoverflow.com/questions/8715023/tomcat-this-parser-does-not-support-specification-null-version-null)，但我没有框架（Eclipse 和 Junit 除外）。我的 POM 中没有明确的 xerces。是否有一个简单的解决方法（我不介意我使用什么解析器，只要它验证）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T04:36:37.823

我将其追踪到不兼容的 Xerces 版本，包含在其他软件中。强制使用更高版本的 Xerces 可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:30:07.430

我认为您的 XSD 文件无法通过`InputStream SCHEMA_STREAM = getClass().getResourceAsStream(SCHEMA_PATH);`. 无障碍。

我验证了您的代码和`XSD`文件，仅更改了如下行。`JDK 1.6`它在和中运行没有任何问题`JDK 1.7`。

```
 InputStream SCHEMA_STREAM = new FileInputStream(new File(SCHEMA_PATH)); 
```

当文件无法访问时，我得到了`NullPointerException`一些不同，如下所示：

```
 Exception in thread "main" org.xml.sax.SAXParseException: 
          schema_reference.4: Failed to read schema document 'null' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T05:26:39.470

你在xsd中试过吗？

对于属性，使用属性`use="optional"`

对于元素使用属性`nillable="true"`或使用属性`minOccurs="0"`

[XML Schema 中 null 的表示](http://www.ibm.com/developerworks/xml/library/ws-tip-null/index.html)

# c++ - OpenGL VBO 内存泄漏

> ID：12994495
> 
> 赞同：0
> 
> 时间：2012-10-21T02:48:34.790
> 
> 标签：c++, opengl, vbo

我为学习 VBO 而编写的一个非常简单的 OpenGL 应用程序的内存存在一些问题。它使用的内存很容易增加，它打开的时间越长。下面是我使用 Windows 任务管理器看到的重复代码：

```
int main() {

sf::RenderWindow window(sf::VideoMode(800, 600, 32), "Test");

///Setup the scene, materials, lighting
Scene scene;
scene.resize(800,600);

glEnable(GL_DEPTH_TEST);
glEnable(GL_LIGHTING);
glColorMaterial(GL_FRONT_AND_BACK, GL_EMISSION);
glEnable(GL_COLOR_MATERIAL);
glShadeModel(GL_FLAT);
glEnable(GL_LIGHT0);
float XL = .5, YL = .1, ZL = 1;
GLfloat ambientLight[] = { 0.2f, 0.2f, 0.2f, 1.0f };
GLfloat diffuseLight[] = { 0.8f, 0.8f, 0.8, 1.0f };
GLfloat specularLight[] = { 0.5f, 0.5f, 0.5f, 1.0f };
GLfloat lightpos[] = {XL, YL, ZL, 0.};
glLightfv(GL_LIGHT0, GL_AMBIENT, ambientLight);
glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuseLight);
glLightfv(GL_LIGHT0, GL_SPECULAR, specularLight);
glLightfv(GL_LIGHT0, GL_POSITION, lightpos);

glGenBuffersARB = (PFNGLGENBUFFERSARBPROC)wglGetProcAddress("glGenBuffersARB");
glBindBufferARB = (PFNGLBINDBUFFERARBPROC)wglGetProcAddress("glBindBufferARB");
glBufferDataARB = (PFNGLBUFFERDATAARBPROC)wglGetProcAddress("glBufferDataARB");
glBufferSubDataARB = (PFNGLBUFFERSUBDATAARBPROC)wglGetProcAddress("glBufferSubDataARB");
glDeleteBuffersARB = (PFNGLDELETEBUFFERSARBPROC)wglGetProcAddress("glDeleteBuffersARB");
glGetBufferParameterivARB = (PFNGLGETBUFFERPARAMETERIVARBPROC)wglGetProcAddress("glGetBufferParameterivARB");
glMapBufferARB = (PFNGLMAPBUFFERARBPROC)wglGetProcAddress("glMapBufferARB");
glUnmapBufferARB = (PFNGLUNMAPBUFFERARBPROC)wglGetProcAddress("glUnmapBufferARB");

GLfloat vertices[] = { .5, .5, .5,  -.5, .5, .5,  -.5,-.5, .5};

GLuint VBOID;
glGenBuffersARB(1, &VBOID);
glBindBufferARB(GL_ARRAY_BUFFER_ARB, VBOID);
glBufferDataARB(GL_ARRAY_BUFFER_ARB, 108, vertices, GL_STATIC_DRAW_ARB);

///Start loop
cout << "Starting" << endl;
while( window.isOpen() ) {
    sf::Event event;
    while( window.pollEvent( event ) ) {
        if( event.type == sf::Event::Closed )
            window.close();
    }

    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(50.0, 1.0, 1.0, 50);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(5, 5, 5, 0, 0, 0, 0, 1, 0);

    glBindBufferARB(GL_ARRAY_BUFFER_ARB, VBOID);
    glEnableClientState(GL_VERTEX_ARRAY);

    glVertexPointer(3, GL_FLOAT, 0, 0);
    glDrawArrays(GL_TRIANGLES, 0, 3);

    glDisableClientState(GL_VERTEX_ARRAY); 

    ///Reset env settings for SFML
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

    window.display();
}

return 1; 
```

}

编辑：

注释掉所有事件轮询不会改变任何事情。如果我使用 window.clear() 或 opengl 的 clear 函数，窗口清除似乎没有什么不同。

通过进一步注释，我发现一行代码 window.display() 导致了我的内存泄漏。我会看看 SFML 论坛上的人是否能解决这个问题；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:18:52.260

我在你的绘制循环中看不到任何会导致这种行为的东西。

我认为您应该尝试 SFML 论坛：[http ://en.sfml-dev.org/forums/](http://en.sfml-dev.org/forums/)

关于这个问题有几个线程：

*   [http://en.sfml-dev.org/forums/index.php?topic=8609.0](http://en.sfml-dev.org/forums/index.php?topic=8609.0)
*   [http://en.sfml-dev.org/forums/index.php?topic=8092.0](http://en.sfml-dev.org/forums/index.php?topic=8092.0)
*   [http://en.sfml-dev.org/forums/index.php?topic=7146.0](http://en.sfml-dev.org/forums/index.php?topic=7146.0)

开发人员大多声称这是一个驱动程序问题。您可以尝试禁用所有绘制代码​​，看看是否有任何改变。改用 window.clear() 吗？删除事件轮询？

# mysql - MySQL - 如何在不分组的情况下获得 Group_Concat 的结果？

> ID：12994499
> 
> 赞同：2
> 
> 时间：2012-10-21T02:49:14.663
> 
> 标签：mysql, concat

所以我有一张这样的桌子：

```
 Item Number     Collection       Items in Collection 
    1234         Madison Park                       
    2345         Madison Park                       
    3456         Madison Park                       
    6747         Belcaro                            
    5678         Belcaro 
```

我需要的是这个：

```
 Item Number     Collection       Items in Collection 
    1234         Madison Park        1234, 2345, 3456     
    2345         Madison Park        1234, 2345, 3456     
    3456         Madison Park        1234, 2345, 3456     
    6747         Belcaro             6747, 5678           
    5678         Belcaro             6747, 5678 
```

或者更好的是，这个：

```
 Item Number     Collection       Items in Collection 
    1234         Madison Park        2345, 3456           
    2345         Madison Park        1234, 3456           
    3456         Madison Park        1234, 2345           
    6747         Belcaro             5678                 
    5678         Belcaro             6747 
```

这不是我获得结果的首选方法，但由于客户规范，需要以这种方式设置表。此外，它需要通过 MySQL Workbench Query 来完成。我已经尝试了所有我能想到的 CONCAT_WS 和 GROUP_CONCAT 变体，但还没有想出解决方案。Group_Concat 返回我想要的结果，但随后它将集合分组，这将不起作用。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T02:56:44.823

尝试在分组集合值上将表连接到自身。`GROUP_CONCAT()`将返回一个字符串，因此您可以`REPLACE()`在其上显示当前行`item_number`，但是您不知道逗号的确切位置，因此尽管您可以使用 hack `SEPARATOR ' '`，然后`REPLACE()`从`item_number`当前行替换出现的两个空格用一个（`item_number`中间是），`TRIM()`它（最后`item_number`是），然后用逗号替换单个空格，后跟一个空格：

```
SELECT i.item_number,
        i.collection,
        REPLACE(REPLACE(TRIM(REPLACE(g.items, i.item_number, '')), '  ', ' '), ' ', ', ') AS collection_items
FROM    item_table i
        INNER JOIN 
        (
            SELECT collection,
                    GROUP_CONCAT(item_number SEPARATOR ' ') AS items
            FROM item_table
            GROUP BY collection
        ) g ON g.collection = i.collection 
```

我在本地对此进行了测试并得到了您的预期结果。

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/71893/2)

# c# - Entity Framework 5 Fluent API - 配置单向关系

> ID：12994500
> 
> 赞同：3
> 
> 时间：2012-10-21T02:49:36.723
> 
> 标签：c#, .net, ef-code-first, entity-framework-5

我这辈子都想不通。MSDN上的文章不清楚，似乎已经过时了。我正在使用 EF 5，并且正在尝试为以下内容设置单向关系。这就是我到目前为止所拥有的。

```
public sealed class Capture {
    /// <summary>
    /// Get and Set Capture's Unique Identifier.
    /// </summary>
    public int Id { get; set; }

    /// <summary>
    /// Get and Set Capture's Operating System.
    /// </summary>
    public OperatingSystem OperatingSystem { get; set; }
}

public sealed class OperatingSystem {
    /// <summary>
    /// Operating System's Unique Identifier.
    /// </summary>
    public int Id { get; set; }
}

internal sealed class EntityCaptureConfiguration : EntityTypeConfiguration<Capture> {
    /// <summary>
    /// Create an Entity Capture Configuration.
    /// </summary>
    public EntityCaptureConfiguration() {
        this.ToTable("Capture");
        this.HasKey(m => m.Id);

        this.Property(m => m.Id).HasColumnName("Id");

        this.HasRequired(m => m.OperatingSystem).WithRequiredDependent().Map(m => {
            m.ToTable("OperatingSystem");
            m.MapKey("OperatingSystemId");
        });
    }
} 
```

编译并运行，我得到以下运行时异常：“*错误 3034：从第 16 行、第 46 行开始映射片段时出现问题：具有可能不同键的两个实体映射到同一行。确保这两个映射片段映射关联集的两端到相应的列。* ”

我不禁注意到，实际上没有明确的方法表明我想使用 2 个特定键加入这 2 个表。我的意思是我在哪里指定子表中的键以用于父表中的连接？

以下是我需要帮助的内容：

1.  我不想在**Capture**类型上公开一个名为“ *OperatingSystemId* ”的属性。“ *OperatingSystem* ” 属性绰绰有余。

2.  我不希望**Capture** 和**OperatingSystem**类型之间存在双向关系。**只需要从Capture**到**OperatingSystem**的单向关系。

3.  我不想在名为“ *CaptureId ”的***操作系统**表上的数据库中创建一列。我什至不知道为什么需要这样做，但我在某处读到一篇文章建议这样做。

**   生成的 SQL 连接应该是 INNER JOIN 而不是 OUTER JOIN。

    *   我真的需要将 Capture 类型上的 OperatingSystem 属性定义为虚拟吗？我不希望这个属性被延迟加载。

    *   奖金指向可以向我解释这个例外的人，因为我完全迷路了。谷歌搜索对于 Fluent API 是没有希望的。如果我使用设计器，我会得到很多点击，但我认为它不相关，因为所有结果都建议重新生成模型，我认为这不适用于这里。* 

 ***更新：** 我可能不清楚这一点。我已经在 SQL Server 中设置了数据库模型。我试图了解如何在**不**使用设计器的情况下使用 Fluent API 为现有数据库模型配置 EF 上下文。我知道如果我使用设计器，我可以简单地要求它从数据库中生成我的上下文。那不是我想要的。对于那些好奇的人来说——因为我想了解如何使用 Fluent API 来做到这一点。

**Update2：** 所以，看起来就像我设置的那样，如果在我的查询中我在导航属性上指定了一个过滤器，EF 会正确生成连接。如果不这样做，则不会在查询中生成连接。无论如何，导航属性仍然​​没有被填充！

提前感谢一堆。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T22:46:17.460

因此，如果您没有像我一样使用过 ORM，并且来自使用 MyBatis 或类似的数据映射器的背景，那么解决方案就是这个，给出我问题中的示例。

首先，您不能将实体类型声明为**密封**，并且任何参与关联的属性都需要声明为**virtual**。这是因为 EF 将在运行时使用动态代理扩展类型，并使用动态代理覆盖您的属性以启用延迟加载：

```
public class Capture {
    /// <summary>
    /// Get and Set Capture's Unique Identifier.
    /// </summary>
    public int Id { get; set; }

    /// <summary>
    /// Get and Set Capture's Operating System.
    /// </summary>
    public virtual OperatingSystem OperatingSystem { get; set; }
}

public class OperatingSystem {
    /// <summary>
    /// Operating System's Unique Identifier.
    /// </summary>
    public int Id { get; set; }
} 
```

如果您不这样做，则不会引发错误，但 EF 将始终将您的关联属性设置为 null。

其次，除非您的关联属性尚未配置为映射，否则不要将其映射到特定表，因为 EF 会抱怨同一个表实际上被映射了两次。在我的示例中，我已经自己映射了**OperatingSystem**类型，并且在设置关联时，我再次映射它：

```
internal sealed class EntityCaptureConfiguration : EntityTypeConfiguration<Capture> {
    /// <summary>
    /// Create an Entity Capture Configuration.
    /// </summary>
    public EntityCaptureConfiguration() {
        this.ToTable("Capture");
        this.HasKey(m => m.Id);

        this.Property(m => m.Id).HasColumnName("Id");

        this.HasRequired(m => m.OperatingSystem).WithRequiredDependent().Map(m => m.MapKey("OperatingSystemId"));
    }
} 
```

最后，如果您必须绝对将您的实体类型声明为密封并且您不想将任何属性声明为虚拟 - 在密封类型上无论如何都不能 - 在您的上下文配置中，禁用代理和延迟加载：

```
public sealed class EntityDefaultContext : DbContext {    
    /// <summary>
    /// Model Creating Event Handler.
    /// </summary>
    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        var entityCaptureConfiguration = new EntityCaptureConfiguration();
        var entityOperatingSystemConfiguration = new EntityOperatingSystemConfiguration();

        modelBuilder.Configurations.Add(entityOperatingSystemConfiguration);
        modelBuilder.Configurations.Add(entityCaptureConfiguration);

        this.Configuration.LazyLoadingEnabled = false;
        this.Configuration.ProxyCreationEnabled = false;
    }
} 
```

这就是所有人。我希望这对将来像我这样的人有所帮助。*

# .net - 依赖注入 - 它是否违反关注点分离？

> ID：12994507
> 
> 赞同：4
> 
> 时间：2012-10-21T02:50:54.037
> 
> 标签：.net, dependency-injection, n-tier-architecture, separation-of-concerns

依赖注入是否违反了与 n 层架构相关的关注点分离？

假设您有以下项目：

```
MyApp.Data
MyApp.Business
MyApp.Web 
```

如果我使用 DI 来告诉业务层使用哪个数据上下文，这不会违反 SoC 吗？这意味着 UI (MyApp.Web) 必须了解数据访问层 (MyApp.Data) 才能告诉业务层 (MyApp.Business) 使用哪个上下文，对吗？

```
public class WebForm {
    public void Save(Object dto) {
        BusinessObject bo = new BusinessObject(Data.MyDataContext);
        bo.ValidateAndSave(dto);
    }
} 
```

我一直认为，在 n 层架构中，每一层应该只了解下一层（UI 到业务，业务到数据）。这真的不是什么大不了的事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T03:21:40.537

不，它不违反 SoC，实际上它鼓励它。

问题是，在您的示例中，您至少在 UI 中没有使用 DI。您让 WebForm 显式构建它需要的对象，而不是注入这些依赖项。

主要思想是在创建根对象的应用程序中有一个中央引导程序，它获取它的依赖项，而这些依赖项又是从其他依赖项构建的，依此类推。鉴于手动执行此操作非常痛苦，您依赖于使用约定或通过配置自动执行此操作的 DI 容器，或两者兼而有之。

因此，在您的示例中，您将使用 DI 容器构造 WebForm，并指定对 IBusinessObject 的依赖关系，该 IBusinessObject 反过来又依赖于 DataContext 来处理这些实体并从 dto 创建它们。然后在该 Save 方法中，您将使用从外部注入的实例，手动或通过容器，但始终在应用程序生命周期的某个根点

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T03:16:44.073

一般来说，你是对的。然而，依赖注入往往被认为是“配置”而不是表示层的一部分（尽管它通常确实存在于那里）。如果您的 UI 组件设计为不了解数据层，那么这才是真正重要的。

如果您正在设计一个可测试的系统，那么业务和数据层应该独立于 UI，但必须对其进行配置。您可以创建另一个层，称为 MyApp.Configuration 来完成所有这些工作，但大多数人认为这过于工程化。

重要的是你的组件是否设计好，而不是 UI 是否对其他层有一些配置知识。

这与在 Web.Config 中设置应用程序没有什么不同。毕竟，除非您使用面向服务的架构，否则一切都在同一台计算机上的同一进程中运行。如果您使用的是 SoA，那么您将在各自的服务器上配置各个部分。

# ruby - 为什么 posix-spawn 强制在 linux 中使用 vfork？

> ID：12994510
> 
> 赞同：1
> 
> 时间：2012-10-21T02:51:37.143
> 
> 标签：ruby, linux

我查看了posix-spawn（[https://github.com/rtomayko/posix-spawn](https://github.com/rtomayko/posix-spawn)）的代码，似乎它在低级实现中使用了vfork。但是，不鼓励在linux平台上使用vfork。 posix-spawn 模块可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T03:01:01.480

`vfork`不推荐，因为它严重限制了新进程可以做什么（直到它`exec`），因此很难正确使用。在 Linux 上，`fork`使用写时复制语义，因此`fork`无需使用`vfork`. 此外，`vfork`信号语义不是跨平台的标准。来自`man vfork`：

> 不幸的是，Linux 从过去复活了这个幽灵。BSD 手册页指出：
> 
> > 当实施适当的系统共享机制时，将消除此系统调用。用户不应依赖`vfork`() 的内存共享语义，因为在这种情况下，它将成为`fork(2)`.
> 
> 信号处理的细节是模糊的，并且在系统之间有所不同。BSD 手册页指出：
> 
> > 为了避免可能的死锁情况，a 中间的子进程`vfork()`永远不会发送`SIGTTOU`或`SIGTTIN`发出信号；相反，`ioctl`允许输出或 s 并且输入尝试会导致文件结束指示。

也就是说，如果使用得当，`vfork`它会很有用，并且在许多其他平台上会更快。Linux 确实支持它，所以只要代码不做任何受 限制的事情`vfork`，它在 Linux 上应该没问题。

# android - 为平板电脑（两窗格）视图做列表选择器的正确方法？

> ID：12994511
> 
> 赞同：0
> 
> 时间：2012-10-21T02:51:39.807
> 
> 标签：android, android-listview, android-xml

目前，我的列表选择器是：

```
<item android:drawable="@color/half" android:state_focused="true" android:state_selected="false"/>
<item android:drawable="@color/full" android:state_focused="false" android:state_selected="true"/>
<item android:drawable="@color/half" android:state_activated="true"/>
<item android:drawable="@android:color/transparent"/> 
```

它有效，但有一些奇怪的地方。例如，“悬停”在项目上（如使用 d-pad/轨迹球在它们上方）显示全光，而不是半光。

我只是没有真正得到这些列表选择器。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:17:54.767

看起来像您的选择器文件中的问题。您正在结合两个状态`Focus`和`Selected`. 当您使用 d-pad 聚焦项目时，可能不会发生这种组合。您可以参考[https://stackoverflow.com/a/2728343/630668](https://stackoverflow.com/a/2728343/630668)来解决您的问题。

# dialog - akka actor - 实现工作流、活动或对话

> ID：12994512
> 
> 赞同：4
> 
> 时间：2012-10-21T02:52:01.683
> 
> 标签：dialog, workflow, akka, actor

假设我想在 akka 中实现 ProgrammableRemote -

```
 ProgrammableRemote

    - WatchMovie
          1\. Tv ! PowerOn
          1.1 Tv ! ChangeInput 3
          2\. DVD ! PowerOn
          3\. AVReceiver ! PowerOn
          3.1 AVReceiver ! SetInput 'DVD' 
```

我可以使用期货对 1 和 1.1（以及 3\. 和 3.1）进行排序。但是，这将导致 1.1 在与参与者的接收线程不同的线程上运行。如果我使用“pipeTo self”，我将需要以“接收”方法处理来自电视的“开机完成”消息的情况。

理想情况下，我希望能够扩展演员的接收，以根据未完成的请求动态处理来自其他演员的回复。这个用例在akka中有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:38:53.570

我只是发送消息，每个发件人都保留它们的顺序，因此如果您在打开电源之前获得 ChangeInput，无论如何您都需要处理它。使用“成为”或 Akka FSM DSL 来编码不同的状态以及在每个状态中哪些命令是可能的。

# javascript - 使用 id + 事件条件更改颜色，但不起作用

> ID：12994514
> 
> 赞同：0
> 
> 时间：2012-10-21T02:52:53.393
> 
> 标签：javascript, ajax

带有代码 javascript script.js 的文件

```
function style(id){
    document.getElementById(id).style.backgroundColor="orange";
}

var setlist = "sets.txt";

function loadXMLDoc(open){
var xmlhttp;

if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}else{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4 && xmlhttp.status==200){
        document.getElementById("p1").innerHTML=xmlhttp.responseText;
    }
}

xmlhttp.open("GET",open,true);
xmlhttp.send();

} 
```

页面中的代码，不起作用。

```
<html>
<head>
<script type="text/javascript" src="script.js">
    if ((onclick="loadXMLDoc(setlist)" == true)){
        style("s");
    }
</script>
</head>
<body>...
<dl>
<dt class="pro"><a onclick="loadXMLDoc(setlist)" id="s">Sets</a></dt>
</dl>
</body>
</html> 
```

这个想法很简单，当条件是真实的 id ='s' 时，它会将文本'sets'标记为橙色，但不喜欢（as）使它起作用，你说它好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:07:12.643

也许是因为您的脚本标签中同时具有 src 属性和内容？

# regex - 正则表达式帮助 - 定义正则表达式

> ID：12994515
> 
> 赞同：0
> 
> 时间：2012-10-21T02:53:02.553
> 
> 标签：regex

我只是对正则表达式有疑问......我真的不知道所以任何形式的帮助表示赞赏。

问题是：定义一个正则表达式，该表达式表征由所有字符串 a 和 b 组成的语言，其中第二个和第二个字符是“b”。

关于如何开始这个问题的任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:12:06.020

假设你/问题的意思是

> 仅由 'a's 和 'b's 组成的字符串，第 2 和 2nd-Last 个字符是 'b'。

这可能适用于大多数正则表达式风格（可能需要将其包含在 中`/ /`）

```
^[ab]b[ab]*b[ab]$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:14:57.617

要解决此问题，您需要：

1.  `a`查找以or开头的字符串`b`: `^(a|b)`,
2.  将 a`b`作为第二个字符 `^(a|b)b
3.  后跟一串`a`s、`b`s 或两者：`^(a|b)b[a-b]*`
4.  还有另一个`b`：`^(a|b)[a-b]*b`
5.  并以另一个`a`or结尾`b`：`^(a|b)b[a-b]*b(a|b)$`
6.  那么您需要针对该正则表达式测试您的字符串：`/^(a|b)b[a-b]*b(a|b)$/.test(string)`

使用 jQuery 和 JavaScript 的概念证明：

```
​$('li').each(
    function(i,el) {
        var text = $(el).text();
        if (/^((a|b)b[a-b]*b(a|b))$/.test(text)) {
            $(el).addClass('matched');
        }
    });​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/TDyvC/)。

参考：

*   [正则表达式，在 MDN 上](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T03:27:24.630

您在谈论的是来自[形式语言理论的](http://en.wikipedia.org/wiki/Formal_language)*正则表达式*。我们在这里讨论的正则*表达式*是正则表达式的一个混蛋分支，它的作用远不止识别正则语言。如果您刚刚开始学习“纯理论”正则表达式，那么您现在可能应该远离正则表达式。

# javascript - 在 div 之间移动时保持 div 在悬停时打开（使用 jQuery）

> ID：12994516
> 
> 赞同：0
> 
> 时间：2012-10-21T02:53:02.817
> 
> 标签：javascript, jquery, hover, mouseover

谢谢阅读。

目前，以下是我的代码：

```
<script>
$(document).ready(function(){
    $('.withdraw_money').hover(function(){
        if ($("#withdraw_money_div").is(":hidden")){
            $("#withdraw_money_div").slideDown("slow")
        }else{
            $("#withdraw_money_div").hide()
        }
    });
});
</script> 
```

好的。所以，当另一个 div(.withdraw_money) 处于悬停状态时，我可以让 div(#withdraw_money_div) 向下滑动。但我现在的问题是，当我将鼠标移到#withdraw_money_div 时，如何让 div 继续保持悬停状态？

我似乎无法找到一种方法来做到这一点。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:55:43.277

在您的 HTML 中放入`#withdraw_money_div`，`'.withdraw_money'`制作一个孩子，因此您仍将处于`.withdraw_money`悬停事件中

还..

```
$(document).ready(function(){
$('.withdraw_money').hover(function(){
    if ($("#withdraw_money_div").is(":hidden")){
        $("#withdraw_money_div").slideDown("slow")
    }else{                            // why is this here?
     $("#withdraw_money_div").hide() //if div isn't hidden(shown) you're hiding it!!
    }
  });
}); 
```

我建议`.mouseOver`或`.hover`使用 2 个功能，它将涵盖鼠标悬停和当您将鼠标悬停在 div 之外时的功能-我认为这就是您在 else 语句中所提到的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T02:58:54.397

**工作演示**试试这个[http://jsfiddle.net/YuBNT/](http://jsfiddle.net/YuBNT/)

希望它适合原因`:)`

**代码**

```
 $(document).ready(function() {
        $("#withdraw_money_div").hide();
        $('.withdraw_money').hover(function() {
            $("#withdraw_money_div").slideDown("slow")

        }, function() {
            $("#withdraw_money_div").slideUp("slow")

        });
    });​ 
```

# javascript - 切换仅在双击时有效

> ID：12994522
> 
> 赞同：1
> 
> 时间：2012-10-21T02:54:04.097
> 
> 标签：javascript, jquery

当我使用 onmousedown 事件单击我的链接时，我必须双击它们才能切换。我不明白为什么会这样。

```
function toggleInteractContainers(x) {
//the 'x' variable represents the add friend/message container value
        if($('#'+x).is(":hidden")) {
        //if the container is hidden then we will slide it down and show it
            $('#'+x).slideToggle(400);

        } else {
            //if its not being hidden then we will hide it
            $('#'+x).hide();
        }
        //this just means we have to hide all the containers
        $('.interactContainers').hide();
} 
```

我从这个 div 调用它

```
<div class ="interactionLinksDiv">
           <a href="#" onclick="return false" onmousedown="toggleInteractContainers('add_friend');">Add Contact</a>
</div>          
<div class ="interactContainers" id ="add_friend">
  <div align ="right"><a href="#" onclick= "return false" onmousedown = "toggleInteractContainers('add_friend')">cancel</a></div>
                Add as a contact? &nbsp;
  <a href ="#" onclick="return false" onmousedown="javascript:addAsFriend(); ">Yes</a>  
</div> 
```

我没有收到任何令人沮丧的错误。如果有人告诉我为什么会发生这种情况以及我能做些什么来防止它再次发生，我将不胜感激。一路上的任何编程技巧都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:15:57.500

我尝试在 jsFiddle 中重做这个。这有点复杂，因为我们没有更多细节。

HTML：

```
<div class ="interactionLinksDiv">
    <a href="#" class="toggleInteractContainers" data-target="add_friend">Add Contact</a>
</div>          
<div class ="interactContainers" id ="add_friend">
  <div align ="right">
      <a href="#" class="toggleInteractContainers" data-target="add_friend">cancel</a></div>
  Add as a contact? &nbsp;
  <a href ="#" class="addAsFriend">Yes</a>  
</div>​ 
```

Javascript：

```
$(function() {

    $(document).on("click", ".toggleInteractContainers", function() {
        target_id = $(this).data("target");
        $('#' + target_id).slideToggle(400);
    });

    $(document).on("click", ".addAsFriend", function() {
        // Do something here when someone clicks on Yes 
    });

});​ 
```

[http://jsfiddle.net/Kj4rK/](http://jsfiddle.net/Kj4rK/)

基本上，这里有一些注意事项。

*   您正在使用 jQuery，您不应该直接在 DOM 中使用事件（不要在标签内使用 onmouseclick=""）。您应该使用 jQuery 中包含的正确绑定和/或委托函数。[http://api.jquery.com/on/](http://api.jquery.com/on/)

*   .toggle() 和 .slideToggle() 总是与它们的状态相反：如果它们被隐藏，它将显示，如果它是可见的，它将隐藏。您的代码不起作用，因为您有条件（如果它被隐藏，切换它---而不是如果它被隐藏，则显示它）[http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:23:29.543

**工作演示**完成的小改动：http: [//jsfiddle.net/FGqE7/](http://jsfiddle.net/FGqE7/)

如果我错过了什么，请告诉我！

希望它适合原因`:)`

**代码**

```
function toggleInteractContainers(x) {
    //the 'x' variable represents the add friend/message container value
    if (!$('#' + x).is(":visible")) {
        //if the container is hidden then we will slide it down and show it
        $('#' + x).slideDown(400);

    } else {
        //if its not being hidden then we will hide it
        $('#' + x).hide();
    }
    //this just means we have to hide all the containers
   // $('.interactContainers').hide();
}​ 
```

# java - java中的“幻数”练习

> ID：12994530
> 
> 赞同：2
> 
> 时间：2012-10-21T02:55:52.780
> 
> 标签：java, for-loop, magic-numbers

所以我的任务是找到一个数字范围内的所有“幻数”（由用户输入）。幻数是一个数，其因数（除了它自己）总和等于该数。所以 6 将是一个神奇的数字，因为它本身的因素是 1,2 和 3，总和为 6。我已经盯着这段代码一段时间了，我一生都无法弄清楚为什么它不会打印出来神奇的数字。任何帮助，将不胜感激。

```
public class MagicNumber {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    System.out.print("What is the top of the range?");
    int range = IO.readInt();
    if (range <= 0 ) {
        IO.reportBadInput();
    }
    int sumOfFactors = 0;
    for (int i = 1 ; i <= range ; i++) {
        for (int m = 1 ; m < i; m++) {
            if (i % m == 0) {
                sumOfFactors = sumOfFactors + m;
            }
            if (sumOfFactors == i) {
                System.out.println(i);
                    }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:02:57.693

您正在测试是否`sumOfFactors == i`仍在对因子求和。您需要将其移到`m`循环之外。然后你需要在每次循环`sumOfFactors`开始循环之前设置为0 ，而不仅仅是在循环开始时设置一次。`m``i`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:00:17.907

试试这个：

```
 public class MagicNumber {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        System.out.print("What is the top of the range?");
        int range = IO.readInt();
        if (range <= 0 ) {
            IO.reportBadInput();
        }

        for (int i = 1 ; i <= range ; i++) {
   int sumOfFactors = 0;
            for (int m = 1 ; m < i; m++) {
                if (i % m == 0) {
                    sumOfFactors = sumOfFactors + m;
                }
    }
                if (sumOfFactors == i) {
                    System.out.println(i);
                        }

            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T03:09:16.260

我认为您需要`int sumOfFactors = 0;`在第一个循环内`for`初始化并将第二个循环`if`移出第二个`for`循环**，因为您需要将总因子的总和与当前数字进行比较**，如下所示：

```
for (int i = 1 ; i <= range ; i++) {
    int sumOfFactors = 0;  //<--Moved inside
    for (int m = 1 ; m < i; m++) {
        if (i % m == 0) {
            sumOfFactors = sumOfFactors + m;
        }
     }
     if (sumOfFactors == i) {  // <-- moveed out of second loop
       System.out.println(i);
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-24T18:34:41.190

只是参考这个魔术数字程序 [http://getprogramcode.com/2013/11/java-program-to-check-for-a-magic-number/](http://getprogramcode.com/2013/11/java-program-to-check-for-a-magic-number/) 并想到写这个。

```
public class HelloWorld{

     public static void main(String []args){
        static int number=5432;
        while(number>9){
            int tot = calculateSum(number);
            System.out.println(tot);
        }
     }

     private static int calculateSum(int num){
         int sum = 0;
         while (num > 0) {
            int a = num % 10;
            sum = sum+ a;
            num = num / 10;
        }
         number = sum;
         return sum;
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-24T13:19:55.713

```
public class Magic {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        int b =778393;
        int e=0,c;

        while (b>=10) {
            while (b>0) {
                c=b%10;
                b=b/10;
                e=e+c;
            }
            b=e;
            e=0;
            System.out.println(b);
        }
        if (b==1) {
            System.out.println("It is a magic no."+b);
        } else {
            System.out.println("Not"+b);
        }
    }
} 
```

# algorithm - 以分组步骤完成图表

> ID：12994533
> 
> 赞同：0
> 
> 时间：2012-10-21T02:56:28.873
> 
> 标签：algorithm, graph-theory, graph-algorithm

好的，所以我想写一些软件来解决这个问题：

有一个社交活动，企业主可以在桌子上与其他企业主交谈一段时间。参加活动的有 n 个人，一张桌子可以坐的人数是 s，有 t 张桌子。

在规定的时间过去后，所有人都以某种方式洗牌，以便他们能够与新人交谈。这个想法是让参加活动的每个人都有机会与其他人交谈（一个完整的图表），尽可能少的冗余连接。

图表不是 100% 完整的要求，但尽可能接近会很好。

总结变量（具有实际值）：

```
 n - the number of people attending the event (20-40)
    s - the number of people who can sit at one table(5-8)
    t - the number of tables (4-10)
    c - the number of shuffles (what ever is required for the setup) 
```

所以我对图论并没有任何经验，但这是我解决问题的粗略想法：

1.  形成所有可能连接的列表，有 (n* (n-1))/2 个
2.  建立一个表，一次添加 1 个未建立的连接，直到该表有正确的人数
3.  尝试添加不会创建冗余连接的连接
4.  如果会导致一个人坐在超过 1 张桌子旁，请不要将连接添加到一张桌子。
5.  重复此操作，直到使用完所有连接。

我在思考这将如何工作/实现它时遇到了很多麻烦。我希望有人能给我一些建议或指出我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:08:37.270

[这听起来几乎像是分裂图](http://en.wikipedia.org/wiki/Split_graph)问题或[派系](http://en.wikipedia.org/wiki/Clique_%28graph_theory%29)问题的某种变体。

这是一个相对复杂的问题，而且您不需要精确的解决方案这一事实使得很难说出您真正需要做什么才能获得“可接受的好”解决方案。我建议您先阅读这两页，希望您能找到与您当前情况相匹配的内容。

我同意从完整的图表向后工作可能是最好的策略。您从完整的图表开始，然后尝试将其划分为组件，以便您得到安排。您提出的算法可能很有效。最好只是试一试看看，如果它不起作用，再问另一个问题:)

# jquery - 如果在 div 之外，JQuery 使图像不可见

> ID：12994536
> 
> 赞同：1
> 
> 时间：2012-10-21T02:57:12.847
> 
> 标签：jquery

我正在尝试在 JQuery 中创建一个滑块。我在一个 div 中有两个相互重叠的图像。当按下右键时，我想让底层图像从左开始并将其滑动到另一个图像顶部的右侧。我为此使用此代码：

```
var position = $("#IMAGE1").position();
var width = position.left-1050;
$("#IMAGE1").css('left', width);
$("#IMAGE1").animate({"left": "+=1050px"}, "slow"); 
```

现在我只想要在 div 内部可见的图像部分，而不是在其外部时（它看起来真的很草率，因为 div 有边框）。问题是，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:06:06.180

确保包含的 div 具有以下 css 样式：

```
position: relative;
overflow: hidden; 
```

这应该够了吧。

# django - ModelForm 类联系人没有属性“_meta”

> ID：12994539
> 
> 赞同：3
> 
> 时间：2012-10-21T02:57:33.450
> 
> 标签：django, modelform

当我在我的 ContactForm 中继承 ModelForm 时，我得到了这个错误，当我有它时，modelform 没有从 modelform 继承，没有错误，只是 html 页面上没有表单。我真的想不通这个

/addacontact 类联系人中的 AttributeError 没有属性“_meta”

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/addacontact

Django Version: 1.4.2
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'south',
 'sekizai')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware')

Traceback:
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/handlers/base.py" in get_response
  89\.                     response = middleware_method(request)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/middleware/common.py" in process_request
  67\.             if (not urlresolvers.is_valid_path(request.path_info, urlconf) and
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py" in is_valid_path
  531\.         resolve(path, urlconf)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py" in resolve
  420\.     return get_resolver(urlconf).resolve(path)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/home/brian/projects/steprider/steprider/urls.py" in <module>
  2\. from steprider.views import Add_a_contact
File "/home/brian/projects/steprider/steprider/views.py" in <module>
  9\. from salesflow.forms import *
File "/home/brian/projects/steprider/salesflow/forms.py" in <module>
  13\. class ContactForm(ModelForm):
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/forms/models.py" in __new__
  206\.                                       opts.exclude, opts.widgets, formfield_callback)
File "/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/forms/models.py" in fields_for_model
  146\.     opts = model._meta

Exception Type: AttributeError at /addacontact
Exception Value: class Contact has no attribute '_meta' 
```

这是forms.py

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
#  steprider.salesflow.forms.py
#  
#  Copyright 2012 BRIAN SCOTT CARPENTER <KlanestroTalisman@gmail.com>

from django.forms import ModelForm
from salesflow import models
from django import forms
from django.template.defaultfilters import slugify

class ContactForm(ModelForm):
    description = forms.CharField(widget=forms.Textarea)

    class Meta:
        model = models.Contact
        exclude = ("user","slug")

    def save(self, user):
        contact = super(ContactForm, self).save(commit=False)
        contact.user = ser
        contact.save()
        return contact

class Contact_History_Form:

    class Meta:
        model = models.Contact_History
        exclude = ("user","slug") 
```

模型.py

```
from django.db import models
from django.contrib.auth.models import User
from django_extensions.db.fields import AutoSlugField

# Create your models here.
class Contact:
    user = models.ForeignKey(User)
    business = models.CharField(max_length=50)
    title = models.CharField(max_length=50)
    name = models.CharField(max_length=50)
    address = models.CharField(max_length=50)
    city = models.CharField(max_length=60)
    state_province = models.CharField(max_length=30)
    country = models.CharField(max_length=50)
    website = models.URLField()
    email = models.EmailField()
    description = models.CharField(max_length=3000)
    slug = models.SlugField(max_length=128)
    slug = AutoSlugField(('slug'), max_length=128, unique=True, populate_from=('business',))

    def __unicode__(self):
        return self.slug

class Contact_History:
    user = models.ForeignKey(User)
    contact = models.ForeignKey('Contact')

    number_of_emails_sent = models.IntegerField()
    last_email_sent = models.DateField()

    phone_notes = models.CharField(max_length=2000)

    slug = models.SlugField(max_length=128)
    slug = AutoSlugField(('slug'), max_length=128, unique=True, populate_from=('name',))

    def __unicode__(self):
        return self.slug 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T03:02:43.980

您需要[`models.Model`](https://docs.djangoproject.com/en/dev/topics/db/models/#module-django.db.models)为您的模型类继承：

```
class Contact:
... 
```

应该：

```
class Contact(models.Model):
... 
```

`models.Model`具有`_meta`属性，`Contact`将继承哪个模型并将在生成时使用`ModelForm`。

# iframe - 更改外部 iframe 中的值

> ID：12994542
> 
> 赞同：2
> 
> 时间：2012-10-21T02:59:32.993
> 
> 标签：iframe

我想知道是否有办法制作通用 seltor ......我有 adsense ......但是你的广告中有几个 iframe ......一个在另一个里面......尝试使用 jquery 修改 oo-value ""对象，但不起作用...因为脚本是外部的...

有什么办法可以用 JS 改变值...

```
<object type="application/x-shockwave-flash" data="http://static.ny.us.criteo.net/flash/g2/n/n_v3.7_336x280.swf" width="336" height="280" id="cto336x280_divda84232ee6">
<param name="wmode" value="opaque">
<param name="allowScriptAccess" value="always">
<param name="flashvars" value="rerr>
</object> 
```

# android - 如何将安卓手机连接到本地服务器上运行的网络服务？

> ID：12994545
> 
> 赞同：4
> 
> 时间：2012-10-21T03:00:47.940
> 
> 标签：android, mysql, database, web-services, tomcat

我在我的模拟器上试过，它可以连接到我创建的 java web 服务。但是当我尝试从我的 android 设备访问时，它不起作用。有谁知道如何度过这个难关？

另一个问题是，通过这种方式，是否有可能 2 个 android 设备访问同一个数据库？

我正在使用 Tomcat 服务器和 MySQL 数据库。Web 服务实际上是用来从 MySQL 数据库中获取数据并传递给我的 android 手机。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:27:46.757

首先，您需要确保您的 Web 服务通过托管它的机器的 IP 可见。您可以通过尝试使用 IP 和它可能正在侦听的任何端口号从另一个桌面访问 Web 服务器来测试这一点。

如果可能的话，只需将手机连接到托管 Web 服务器的机器所在的同一网段（路由器）并使用 Web 服务器的 IP（和端口号）即可。

假设数据库设置正确并且您使用的是正确的客户端代码，那么访问同一服务器的 2 台 android 设备应该没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:22:36.223

您可以在您的 LAN IP 上而不是本地主机上运行该服务并通过 wifi 连接电话吗？

也可以通过设置代理进行连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T05:23:09.003

您是否尝试过 IP 地址 10.0.2.2？那是模拟器上的localhost。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T05:34:04.853

你可以尝试使用 KSOAP2 库来访问 WebService，现在用谷歌搜索一下；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-04T07:24:35.227

您可以获得在 localhost 的特定端口上运行的服务器的公共 URL。

正如大多数其他答案所暗示的那样，在我的工作场所，我可以通过在应用程序中使用我机器的本地 IP 地址来访问本地服务器。但在家里，由于某种原因，我无法做到这一点。在尝试了很多答案并花了很多时间之后，我遇到了[https://ngrok.com](https://ngrok.com)。这很简单。只需从文件夹中下载它：

```
ngrok portnumber 
```

（来自 Windows 中的命令提示符）

```
./ngrok portnumber 
```

（来自linux终端）

这将为您提供在 localhost 上的该端口号上运行的本地服务器的公共 URL。您可以包含在您的应用程序中并使用该 URL 对其进行调试。

您可以安全地将本地 Web 服务器公开到 Internet 并捕获所有流量以进行详细检查。您可以与您的同事开发人员共享 URL，他们也可能在远程工作并可以调试应用程序/服务器交互。

希望有一天这可以节省某人的时间。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-21T03:21:14.163

当它在模拟器上运行时，它应该在真实设备上运行。也许是关于代理或网络问题。

对于你的第二个问题。您是否将本地数据库用于 SQLite 之类的客户端？如果是，那么每个设备都有自己的数据库，您需要通过 Web 服务将其同步到服务器数据库（MySQL）。

# iphone - 如何下载应用内托管内容？

> ID：12994550
> 
> 赞同：22
> 
> 时间：2012-10-21T03:02:28.110
> 
> 标签：iphone, ios

我按照[http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial) 设置了 Apple 托管的应用内购买。它列出了产品。当我想从 Apple 下载产品时，我会这样做

```
-(void) paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction * transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
            {
                [[SKPaymentQueue defaultQueue] startDownloads:transaction.downloads];

    ....

}

-(void) paymentQueue:(SKPaymentQueue *)queue updatedDownloads:(NSArray *)downloads
{
    NSLog(@"paymentQues");

    for (SKDownload *download in downloads)
    {
        switch (download.downloadState)
        {
            case SKDownloadStateActive:
            {
                NSLog(@"%f", download.progress); break;
             }
    ...

}

-(void) paymentQueue:(SKPaymentQueue *)queue removedTransactions:(NSArray *)transactions
{

} 
```

我在updatedTransactions 中开始下载，然后Apple 使用downloadState == Active 调用updatedDownloads。然后，Apple 调用了 removedTransaction ，但实际上并没有开始下载。下载进度始终为 0%，并且从不会使用 downloadState == Finished 调用 updatedDownloads。

我不知道为什么我的下载从未开始以及为什么我的交易在下载完成之前被删除。有人有工作样本吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-05T05:30:26.837

问题是我忘了明确关闭交易。作为参考，我的完整代码如下。它还有其他功能，例如在下载时显示进度条，但它是 100% 工作的。不用担心 Utility.h，它只是定义了一些宏，例如 SAFE_RELEASE_VIEW。

本质上，我通过定义购买和下载两种方法扩展了 raywenderlich 中的示例。

密切关注更新的下载。下载完成后，我将内容复制到用户的文档目录。当您从 Apple 下载时，您拥有的目录是这样的：

*   *   内容信息.plist
        *   内容
            *   您的文件

Apple 只为您提供下载文件夹的路径。您使用路径来读取 ContentInfo.plist。在我的应用程序中，我在 ContentInfo.plist 中有一个属性“Files”，它列出了我在 Contents 文件夹中的文件。然后我将文件复制到 Documents 文件夹。如果您不这样做，您必须猜测 Contents 文件夹中有哪些文件，或者您只需复制里面的所有文件。

这是 SmallChess (http://www.smallchess.com) 的实际应用内购买代码。

```
#import <StoreKit/StoreKit.h>
#import "MBProgressHUD/MBProgressHUD.h"
#import "Others/Utility.h"
#import "Store/OnlineStore.h"

NSString *const ProductPurchasedNotification = @"ProductPurchasedNotification";

@implementation StoreTransaction
@synthesize productID, payment;
@end

@interface OnlineStore () <SKProductsRequestDelegate, SKPaymentTransactionObserver, MBProgressHUDDelegate>
@end

@implementation OnlineStore
{
    NSSet *_productIDs;
    MBProgressHUD *_progress;
    NSMutableSet * _purchasedIDs;
    SKProductsRequest * _productsRequest;
    RequestProductsCompletionHandler _completionHandler;
}

-(id) init
{
    if ([SKPaymentQueue canMakePayments] && (self = [super init]))
    {
        [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    }

    return self;
}

#pragma mark MBProgressHUDDelegate

-(void) hudWasHidden:(MBProgressHUD *)hud
{
    NSAssert(_progress, @"ddd");

    [_progress removeFromSuperview];

        SAFE_RELEASE_VIEW(_progress);
}

#pragma end

#pragma mark SKProductsRequestDelegate

-(void) request:(NSSet *)productIDs handler:(RequestProductsCompletionHandler)handler
{    
    _completionHandler = [handler copy];

    _productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIDs];
    _productsRequest.delegate = self;
    [_productsRequest start];    
}

-(void) productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    _productsRequest = nil;
    _completionHandler(YES, response.products);
    _completionHandler = nil;
}

-(void) request:(SKRequest *)request didFailWithError:(NSError *)error
{
    NSLog(@"Failed to load list of products.");
    _productsRequest = nil;

    _completionHandler(NO, nil);
    _completionHandler = nil;
}

#pragma end

#pragma mark Transaction

-(void) provideContentForProduct:(SKPaymentTransaction *)payment productID:(NSString *)productID
{
    [_purchasedIDs addObject:productID];

    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:productID];
    [[NSUserDefaults standardUserDefaults] synchronize];

    StoreTransaction *transaction = [[StoreTransaction alloc] init];

    [transaction setPayment:payment];
    [transaction setProductID:productID];

    [[NSNotificationCenter defaultCenter] postNotificationName:ProductPurchasedNotification object:transaction userInfo:nil];
}

-(void) completeTransaction:(SKPaymentTransaction *)transaction
{
#ifdef DEBUG
    NSLog(@"completeTransaction");
#endif

    [self provideContentForProduct:transaction productID:transaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
}

-(void) restoreTransaction:(SKPaymentTransaction *)transaction
{
#ifdef DEBUG
    NSLog(@"restoreTransaction");
#endif

    [self provideContentForProduct:transaction productID:transaction.originalTransaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
}

-(void) failedTransaction:(SKPaymentTransaction *)transaction
{
#ifdef DEBUG
    NSLog(@"failedTransaction");
#endif

    if (transaction.error.code != SKErrorPaymentCancelled)
    {
        NSLog(@"Transaction error: %@", transaction.error.localizedDescription);
    }

    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
}

-(void) restoreCompletedTransactions
{
#ifdef DEBUG
    NSLog(@"restoreCompletedTransactions");
#endif

    [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
}

#pragma end

#pragma mark Buy & Download

-(BOOL) purchased:(NSString *)productID
{
    return [_purchasedIDs containsObject:productID];
}

-(void) buy:(SKProduct *)product
{
    SKPayment * payment = [SKPayment paymentWithProduct:product];
    [[SKPaymentQueue defaultQueue] addPayment:payment];
}

-(void) download:(StoreTransaction *)transaction
{
    NSAssert(transaction.payment.transactionState == SKPaymentTransactionStatePurchased ||
             transaction.payment.transactionState == SKPaymentTransactionStateRestored, @"The payment transaction must be completed");

    if ([transaction.payment.downloads count])
    {
        [[SKPaymentQueue defaultQueue] startDownloads:transaction.payment.downloads];
    }
}

#pragma end

#pragma mark SKPaymentTransactionObserver

-(void) paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
{
    NSLog(@"RestoreCompletedTransactions");
}

-(void) paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction * transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
            {
#ifdef DEBUG
                NSLog(@"SKPaymentTransactionStatePurchased");
#endif

                [[SKPaymentQueue defaultQueue] startDownloads:transaction.downloads];
                break;
            }

            case SKPaymentTransactionStateFailed:
            {
                NSLog(@"Failed");
                [self failedTransaction:transaction];
                break;
            }

            case SKPaymentTransactionStateRestored:
            {

                NSLog(@"Restored");
                [self restoreTransaction:transaction]; break;
            }

            case SKPaymentTransactionStatePurchasing:
            {
#ifdef DEBUG
                NSLog(@"SKPaymentTransactionStatePurchasing");
#endif

                break;
            }
        }
    }
}

-(void) paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error
{
#ifdef DEBUG
    NSLog(@"restoreCompletedTransactionsFailedWithError");
#endif
}

-(void) paymentQueue:(SKPaymentQueue *)queue removedTransactions:(NSArray *)transactions
{
#ifdef DEBUG
    NSLog(@"removedTransactions");
#endif
}

-(void) paymentQueue:(SKPaymentQueue *)queue updatedDownloads:(NSArray *)downloads
{
    for (SKDownload *download in downloads)
    {
        switch (download.downloadState)
        {
            case SKDownloadStateActive:
            {
#ifdef DEBUG
                NSLog(@"%f", download.progress);
                NSLog(@"%f remaining", download.timeRemaining);
#endif

                if (download.progress == 0.0 && !_progress)
                {
                    #define WAIT_TOO_LONG_SECONDS 60
                    #define TOO_LARGE_DOWNLOAD_BYTES 4194304

                    const BOOL instantDownload = (download.timeRemaining != SKDownloadTimeRemainingUnknown && download.timeRemaining < WAIT_TOO_LONG_SECONDS) ||
                                                 (download.contentLength < TOO_LARGE_DOWNLOAD_BYTES);

                    if (instantDownload)
                    {
                        UIView *window= [[UIApplication sharedApplication] keyWindow];

                        _progress = [[MBProgressHUD alloc] initWithView:[[UIApplication sharedApplication] keyWindow]];
                        [window addSubview:_progress];

                        [_progress show:YES];
                        [_progress setDelegate:self];
                        [_progress setDimBackground:YES];
                        [_progress setLabelText:@"Downloading"];
                        [_progress setMode:MBProgressHUDModeAnnularDeterminate];
                    }
                    else
                    {
                        NSLog(@"Implement me!");
                    }
                }

                [_progress setProgress:download.progress];

                break;
            }

            case SKDownloadStateCancelled: { break; }
            case SKDownloadStateFailed:
            {
                [Utility showAlert:@"Download Failed"
                           message:@"Failed to download. Please retry later"
                       cancelTitle:@"OK"
                        otherTitle:nil
                          delegate:nil];
                break;
            }

            case SKDownloadStateFinished:
            {
                NSString *source = [download.contentURL relativePath];
                NSDictionary *dict = [[NSMutableDictionary alloc] initWithContentsOfFile:[source stringByAppendingPathComponent:@"ContentInfo.plist"]];

                if (![dict objectForKey:@"Files"])
                {
                    [[SKPaymentQueue defaultQueue] finishTransaction:download.transaction];
                    return;
                }

                NSAssert([dict objectForKey:@"Files"], @"The Files property must be valid");

                for (NSString *file in [dict objectForKey:@"Files"])
                {
                    NSString *content = [[source stringByAppendingPathComponent:@"Contents"] stringByAppendingPathComponent:file];

                    NSAssert([Utility isFileExist:content], @"Content path must be valid");

                    // Copy the content to the Documents folder, don't bother with creating a directory for it
                    DEFINE_BOOL(succeed, [Utility copy:content dst:[[Utility getDocPath] stringByAppendingPathComponent:file]]);

                    NSAssert(succeed, @"Failed to copy the content");

#ifdef DEBUG
                    NSLog(@"Copied %@ to %@", content, [[Utility getDocPath] stringByAppendingPathComponent:file]);
#endif
                }

                if (download.transaction.transactionState == SKPaymentTransactionStatePurchased && _progress)
                {
                    [Utility showAlert:@"Purchased Complete"
                               message:@"Your purchase has been completed. Please refer to the FAQ if you have any questions"
                           cancelTitle:@"OK"
                            otherTitle:nil
                              delegate:nil];
                }

                [_progress setDimBackground:NO];
                [_progress hide:YES];

                [[SKPaymentQueue defaultQueue] finishTransaction:download.transaction];
                break;
            }

            case SKDownloadStatePaused:
            {
#ifdef DEBUG
                NSLog(@"SKDownloadStatePaused");
#endif
                break;
            }

            case SKDownloadStateWaiting:
            {
#ifdef DEBUG
                NSLog(@"SKDownloadStateWaiting");
#endif
                break;
            }
        }
    }
}

#pragma end

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-28T11:42:30.760

接受这*不是您特定问题的答案*，

我在这方面遇到了一些其他问题

1.  此方法在恢复/购买周期内被多次调用，而不仅仅是一次。
2.  它也可以在没有您调用的情况下在重新启动应用程序时调用（以继续中断的恢复/下载）。
3.  如果您只想恢复一个产品标识符，则必须过滤掉所有其他产品标识符。
4.  如果下载状态不是等待/暂停，则不应调用 startDownloads
5.  有时，如果您调用 startDownloads，您可能会再次调用 updatedTransaction 以获得相同的事务，并且它的 download.downloadState 仍将等待 - 如果您再次调用 startDownloads，您可以获得两次下载进度/完成通知。如果您的 downloadSuccess 处理程序在复制文件之前清理目标位置，这可能会导致间歇性问题。因为第二次下载实际上并没有下载到缓存中，所以在第二次通知中你没有什么要复制的。我通过记录本地下载数组来解决这个问题，我知道我已经调用了 startDownloads 并完全完成。

我已将大量调试语句放入我的存储处理程序和每个 case 语句以证明这种行为，并确保我不会多次调用队列。我建议其他人开始做同样的事情 - 进行诊断。

SKDownload、SKPaymentTransaction 没有足够的描述方法这一事实无济于事，您必须自己动手。

或者在 github 上使用其他人的商店处理程序。

# linux - 在linux中创建只能编辑特定文件的受限用户

> ID：12994559
> 
> 赞同：1
> 
> 时间：2012-10-21T03:04:11.573
> 
> 标签：linux, natty

我正在努力增加一些人在我的网站上工作，但我希望他们只能访问*某些*文件，因为他们将是第一次在实时网站上工作。

我希望我（管理员）为用户提供手动选择的文件访问权限，并允许他们执行所有操作，但删除该文件。

这甚至可能吗？如果是这样，这将如何工作？（我*确实*谷歌这个）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:09:14.707

将文件放入目录中，这些用户只有 r+x 访问权限，但允许对文件本身进行写访问。这将防止文件被删除，同时可以进行编辑。

作为一种选择，将文件放入他们没有写入权限的某个目录中，然后将文件硬链接到他们的主目录中 - 他们将只能从他们的主目录中删除文件。

# iphone - 横向模式下 iPad 上的 iPhone 应用程序在启动时不响应任何触摸

> ID：12994562
> 
> 赞同：2
> 
> 时间：2012-10-21T03:04:49.177
> 
> 标签：iphone, ipad, uibutton, touch

我创建了仅在横向模式下工作的 iPhone 应用程序。
它在 iPhone 上运行良好。
在 iPad 上，虽然显示正确`UIButtons`，但在启动时不响应任何触摸。 点击 2x 按钮后，效果很好。`UIButtons`
`UIButtons`

为什么？

这发生在下面的过程中。

1.  使用单一视图应用程序模板创建新项目。
2.  在 TARGET 中以支持的界面方向设置横向左和横向右。
3.  将 UIButton 拖放到 Storyboard 中的视图。
4.  在 iPad 上运行应用程序

之后，应用程序以横向模式启动，但`UIButtons`不响应任何触摸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:14:32.057

尝试这两种方法，它应该可以工作，我遇到了同样的问题。首先确保在 App Delegate 的 didFinishLaunching 方法中设置了根视图控制器。其次确保在视图控制器中添加支持的方向。iOS 6 中支持方向的方式发生了变化。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
    [self.window setRootViewController:tabBarController];   
    return YES;
} 
```

要支持横向，请添加以下内容：

```
- (BOOL)shouldAutorotate
{
    return  YES;
}
- (NSUInteger)supportedInterfaceOrientations 
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

希望这会有所帮助。

# jquery - Django csrf 令牌未与 ajax 数据一起发送

> ID：12994563
> 
> 赞同：0
> 
> 时间：2012-10-21T03:05:13.510
> 
> 标签：jquery, ajax, django, json

我正在尝试通过 jQuery AJAX 将一些数据发布到 Django (1.4) 视图。我以前做过，但这次有些不对劲。[如Django Docs](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#ajax)中所述，我已经完成了 AJAX 设置以包含 CSFR 令牌。

jQuery 沿线：

```
$.ajax({
        url:'/login/',
        type:'POST',
        contentType:'application/json; charset=UTF-8;',
        dataType:'json',
        data: JSON.stringify({
            username:$('#this').val(),
            password:$('#that').val()
        }) 
```

但是，当我发送数据时，当我在视图中包含该行时：

```
 print request.raw_post_data 
```

它会打印两次。第一次使用 QueryDict {u'this':u'these', u'that':u'those'} 发布数据，第二次使用 csrfmiddleware 令牌。

为什么要打印两次？他们不应该在同一个 QueryDic 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T04:30:02.237

因为我没有包括

```
e.preventDefault() 
```

表格发送了两次。一个 QueryDict 是有效的，但视图函数没有处理 b/c 默认提交数据只有 csrftoken。

用过的

```
simplejson.loads(request.raw_post_data) 
```

获取我的数据。

# ruby - Rails 3 - 我是否需要在我的模型中为我想在 create() 中使用的每个属性指定 attr_accessible？

> ID：12994566
> 
> 赞同：0
> 
> 时间：2012-10-21T03:06:42.613
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我对 Rails 很陌生，我正在查看其他一些代码。我注意到，如果我尝试使用 create() 创建模型对象的实例，我会收到一条错误消息，告诉我无法使用批量分配创建模型对象。我知道在对象创建中与批量分配相关的危险。但是，在我用作参考的某些来源中，这似乎没有必要。这是 Rails 3.2.7 的新功能吗？还是我做错了什么？

因此，如果我有一个名为“Person”的模型并且我想创建一个新模型：

```
person = Person.create(:first_name => "Some", :last_name => "Dude") #throws exception 
```

我一直在做的是将其添加到 Person 类定义中：

```
attr_accessible :first_name, :last_name

person = Person.create(:first_name => "Some", :last_name => "Dude") #now this is OK 
```

在每个模型类上定义可访问属性是否正确？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T03:32:36.890

从 Rails 3.2 开始，我们在 application.rb 中有一个新的配置设置：

`config.active_record.whitelist_attributes = true`

这实质上是假设您的所有模型属性都是有罪的，直到被证明是无辜的（列入白名单）。如果将其设置为 true，您必须通过以下任一方式将任何给定属性显式列入白名单：

1.  通过将它们包含为 attr_accessible 将不易受到攻击的“安全”属性列入白名单。
2.  明确将您不希望黑客直接访问的不安全属性列入黑名单。这假设所有非黑名单属性都是安全的。

通常，将此配置设置保持为 true 并将您的属性明确列入白名单是一种很好的做法，这样您就不会让您的应用程序容易受到黑客攻击。

请参阅[http://railspikes.com/2008/9/22/is-your-rails-application-safe-from-mass-assignment](http://railspikes.com/2008/9/22/is-your-rails-application-safe-from-mass-assignment)了解为什么应该采用推荐方法的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T03:21:53.623

由于安全性升级，这是 rails 3.2 中的新功能。[你可以在黑客爱大规模集结](http://railscasts.com/episodes/26-hackers-love-mass-assignment)中了解更多信息

```
attr_accessible :first_name,  :last_name 
```

[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

# windows - WASAPI 的问题

> ID：12994567
> 
> 赞同：3
> 
> 时间：2012-10-21T03:07:05.887
> 
> 标签：windows, audio, wasapi

我正在为一个程序开发音频代码，该程序需要能够在各种设备上录制和播放，其中一些是高端设备，具有各种不同的 wav 和 AIFF 格式。我希望能够使用 WASAPI 库，但我遇到了一些重大问题。目前最大的问题是，据我所知，设备只允许播放格式完全匹配的流。

这就是我正在做的 - 我将设备（这里我只是获取默认控制台设备）设置为：

```
hr = pEnumerator->GetDefaultAudioEndpoint(eRender, eConsole, &pPlaybackDevice); 
```

我通过以下方式激活设备：

```
hr = pPlaybackDevice->Activate( __uuidof(IAudioClient), CLSCTX_ALL, NULL, (void**)&pTakeAudioClient); 
```

然后我检查混合格式：

```
hr = pTakeAudioClient->GetMixFormat(&pWaveFormatEx); 
```

但是，如果我在调用 Initialize 时使用不同的格式：

```
hr = pTakeAudioClient->Initialize(AUDCLNT_SHAREMODE_SHARED, AUDCLNT_STREAMFLAGS_EVENTCALLBACK | AUDCLNT_STREAMFLAGS_NOPERSIST,hnsRequestedDuration, 0, pAnotherWaveFormatEx,NULL); 
```

我得到一个错误。似乎该文件绝对必须采用 GetMixFormat 返回的格式。如果我调用 IsFormatSupported 来了解我可以提交哪些格式：

```
hr = pTakeAudioClient->IsFormatSupported(AUDCLNT_SHAREMODE_SHARED, &waveFormatEx, &pAnotherWaveFormatEx); 
```

我明白`E_INVALIDARG`了，即使两个结构完全相同。根据 WASAPI 文档，当“Parameter ShareMode is an value than `AUDCLNT_SHAREMODE_SHARED`or `AUDCLNT_SHAREMODE_EXCLUSIVE`”时返回。我路过`AUDCLNT_SHAREMODE_SHARED`。这似乎是文档中的错误。

为了实验，我尝试：

```
hr = pTakeAudioClient->IsFormatSupported(AUDCLNT_SHAREMODE_EXCLUSIVE, &waveFormatEx, NULL); 
```

错误返回是`0x8889000e`- 我无法找到对该错误的引用。您可以提供的任何帮助都将非常感激，即使它是“使用 MMSystem”。我会从 MMSystem 开始，只是我们需要能够在有多个设备时控制播放设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T17:40:33.007

`0x8889000e`= `AUDCLNT_E_EXCLUSIVE_MODE_NOT_ALLOWED`（[`HRESULT`阅读实用程序](http://alax.info/blog/1383)），这几乎说明了原因：此格式不适用于独占模式音频客户端。而且您可能不需要它独占，共享模式可能就足够了。无论如何，要通过 WASAPI 录制和播放，您需要协商一种硬件支持的格式，这通常是 PCM 音频格式之一。

要在格式之间进行转换，您有几个 API（ACM、DirectShow、Media Foundation）。DirectShow 和 Media Foundation 等一些 API 既能够将播放的数据自动转换为支持的格式，也能够通过音频设备播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-21T19:44:47.297

我知道这是一个非常古老的线程，但是这种情况显然已经得到改善，尽管在提出问题时该选项可能已经可用，但我不确定（并且文档，就像微软的大多数东西一样，通常不是非常有帮助）。

无论如何，根据我的经验，假设您想使用标准 PCM 音频，关键因素似乎是您要求的采样率。大多数声卡似乎不会接受在这方面与其“混合格式”中报告的内容不同的任何内容（这是用于共享音频模式）。因此，您可以接受卡的采样率，并以该采样率发送所有内容，如果这对您来说是一个可行的选择，或者您可以请求音频驱动程序根据需要在输出链中插入转换器。

最简单的方法是在发出呼叫时使用 AUDCLNT_STREAMFLAGS_AUTOCONVERTPCM 标志`Initialize()`，这将按照我所说的进行，并将您请求的任何源音频格式转换为设备支持的格式。似乎甚至可以使用[IAudioClockAdjustment::SetSampleRate](https://msdn.microsoft.com/en-us/library/windows/desktop/dd370885(v=vs.85).aspx)即时更改 SR ，但我自己从未尝试过。请查看[此页面](https://msdn.microsoft.com/en-us/library/windows/desktop/dd370791(v=vs.85).aspx)中的不同标志以获取更多信息。

# web - 如何在客户端为我的网站测量图像下载时间？

> ID：12994572
> 
> 赞同：3
> 
> 时间：2012-10-21T03:08:03.383
> 
> 标签：web, image, latency

在 Img 标记中，我们知道图像有一个 OnLoad 事件，该事件在图像完成加载时触发。但是当图像开始下载时，我们能得到准确的测量吗？我正在尝试测量网站的页面加载时间，因此如果可能的话，了解加载图像需要多长时间将是我分析的一部分。

我想以自动化的方式来做，所以我可以衡量真实的客户体验，而不是将我的网站放在 Yslow 或 PingDom ( [http://tools.pingdom.com/fpt/](http://tools.pingdom.com/fpt/) ) 上。我试图研究 Navigation Timing APIs (http://w3c-test.org/webperf/specs/NavigationTiming/) 不幸的是，即使它们提供了诸如 DNS 解析时间之类的见解，但在 web 请求中获取资源似乎并不得到支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:32:55.257

您可以使用 Chrome Dev Channel 的任一 IE10 开始试验 Resource Timing API 是否满足您的需求 - getEntriesByName 可能是最常用于单个资源的方法。

我写了一个初级性能出现日历[http://calendar.perfplanet.com/2012/an-introduction-to-the-resource-timing-api/](http://calendar.perfplanet.com/2012/an-introduction-to-the-resource-timing-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:12:00.690

您可以使用Firefox 上的[Firebug](https://getfirebug.com/network)或 Chrome 中的[开发者工具](https://developers.google.com/chrome-developer-tools/docs/network)来获取有关页面资源的信息。

# python - 更改 django forms.ModelForm 的名称和 ID？

> ID：12994575
> 
> 赞同：0
> 
> 时间：2012-10-21T03:08:20.657
> 
> 标签：python, django

我想使用 forms.ModelForm，但是，我在模板中多次使用同一个表单。

例如

```
...
{{ form.as_p }}
{{ form.as_p }}
{{...
... 
```

因此，表单的名称和标识都是相同的。那么我怎样才能仍然使用 ModelForm 但更改输入的 ID 和名称呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:10:31.613

您可以使用几种不同的技术为每个表单添加名称/ID，尽管您可能希望使用`formset`.

[https://docs.djangoproject.com/en/dev/topics/forms/formsets/](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)

如果您一直在查看表单，这些最初可能会令人困惑，但只要您了解它是另一个抽象层并且您需要注意`ModelForm`您正在使用的实例。

具体来说，您可能想要使用`django.forms.models.modelform_factory`.

[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets)

使用真的很简单，但是如果你想对表单做任何有趣的事情，那就更难了：

```
>>> from django.forms.models import modelformset_factory
>>> AuthorFormSet = modelformset_factory(Author) 
```

# twitter - 是否有任何解决方法可以超出搜索 twitter api 的限制？

> ID：12994582
> 
> 赞同：2
> 
> 时间：2012-10-21T03:09:43.403
> 
> 标签：twitter

有人知道如何规避搜索推特的限制吗？

我想获得大约 100 万条推文，这可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:56:02.540

如果没有找到第三方数据提供者（例如，为数据付费）或避开 Twitter 的服务条款，就没有办法解决这个问题。我已经广泛使用搜索 API，你永远不会用它获得接近 100 万条推文。

使用搜索 API，您将获得的最佳结果是针对给定查询的最近 2 周以上的推文，或者几千条以上的推文。

可以**通过**在查询中提供开始/结束日期来提取更多推文——例如，您可以尝试为给定查询提取今天、昨天、两天前等的最大推文数量. 使用这种方法，我已经能够为给定查询提取超过 12,000 条推文——但这与 100 万条相差甚远。

有什么理由你不能使用流 API，它的限制比搜索 API 少。

# python - 比较包含一行单词的 2 个文件

> ID：12994585
> 
> 赞同：0
> 
> 时间：2012-10-21T03:10:17.867
> 
> 标签：python, file-io, set

```
one = open('one.txt') 
two=open('two.txt')

def bres(obj1,obj2):
 x=obj1.readline().split()
 cc=obj2.readline().split()
 ela=set(x)
 elamou=set(cc)
 print elamou|ela
bres(one,two) 
```

文件`one.txt`是这样`one two tree` 的： 文件`two.txt`是这样的：`one four`

我想找到这两个文件的联合。这段代码的结果是一个空白集。正确答案是`one`。错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:22:14.980

我找到了 ！

```
def bres():
     with open('one.txt') as f:
      x=f.readline().split()
     with open('two.txt') as f:
      cc=f.readline().split()
      ela=set(x)
      elamou=set(cc)
      print elamou&ela
bres() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:53:08.730

作为风格问题，我会将文件名传递给`bres`，并让它返回一个列表，然后您从调用者那里打印出来。

```
def bres(file1, file2):
  sets = []
  for n in (file1, file2):
    with open(n) as f:
      sets.append( set( f.readline().split() ) )
  return list(sets[0] & sets[1])

print ' '.join(bres('one.txt', 'two.txt')) 
```

像上面那样使用`with`（和你一样）是处理打开和读取文件的最干净和最明确的方法。但是，如果您出于某种原因对较短的代码感兴趣，并且不介意依靠垃圾收集来为您关闭文件句柄，则可以使用列表推导将集合列表的创建缩短为一行：

```
def bres(file1, file2):
  sets = [ set( file(f).readline().split() ) for f in (file1, file2) ]
  return list(sets[0] & sets[1])

print ' '.join(bres('one.txt', 'two.txt')) 
```

我很想导入`operator`和使用`reduce(operator.and_, sets)`来概括事物 - 那些显式索引只会让我烦恼。但这可能会在“Guido 不喜欢函数式编程的原因”下归档......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T03:27:03.683

```
def bres(obj1,obj2):
    x=obj1.readline().split()
    cc=obj2.readline().split()
    results=[]
    for a in x:
        if a in cc:
            results.append(a)
    return results 
```

以上应该可以工作，并且基于您提供的代码。

要获得结果，您需要做的就是使用`print bres(file_object_1,file_object_2)`.

# ios - view 和 view.layer 有什么关系？

> ID：12994587
> 
> 赞同：0
> 
> 时间：2012-10-21T03:11:09.127
> 
> 标签：ios, core-animation

view 和 view.layer 是什么关系。例如， view.layer 具有属性 position。和view有物业中心。如果我改变图层的位置，视图会改变中心属性吗？如果我更改 view.layer 的边界，视图是否也会更改其边界属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:03:37.787

视图由层支持。正如 stackmonster 所说，一个层描述了系统用于将矩形内容区域渲染到屏幕的低级绘图上下文。

stackmonster 所说的其他关于不直接操作图层和动画性能差的事情是完全错误的。核心动画基于层。对于许多简单的动画，您可以使用 UIView 动画，但是有整个类的动画和其他需要您直接创建和使用图层的东西。所有 CAAnimation 对象都作用于图层，并且有许多非常酷的技巧只能通过直接操作图层来完成。我一直使用图层来绘制和动画。

图层和视图使用稍微不同的属性来控制它们在屏幕上的位置。正如您所说，视图具有中心属性，图层具有位置属性。它们是类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:16:58.630

一个图层表示一个图形上下文，它可能共享多个剪切区域，但出于性能原因也可能会聚合绘图操作，有时这会受到重叠视图或具有冲突 alpha（透明度）值的动画效果的限制。

一般来说，您不会手动操作层，但是您可以在 API 调用中引用它们，以便底层框架可以尝试为您解决所有这些问题。否则，您在 iOS 中的动画性能将非常糟糕。

除非您正在执行非常低级的图形编码，否则我不知道您为什么要直接操作图层边界。

# vb.net - 如何使用 vb.net 创建一个父子集合，其中输出将采用分层结构

> ID：12994592
> 
> 赞同：4
> 
> 时间：2012-10-21T03:12:00.707
> 
> 标签：vb.net, oop

我想在 VB.NET 中创建一个层次结构，如下所示

```
<Parent>
  <Child1><Child1 />
  <Child2>
     <Subchild1 />
     <Subchild2 />
<Child2 />     
</Parent> 
```

`parent`我为、`child1`、`child2`和.创建了实体类和集合`subchild1`类`subchild2`。我需要将父集合类实例传递给 XML 序列化程序类，以生成上面给出的分层节点结构。我不知道该怎么做。请给我一个样品。

实体：

```
Public class Parent
  Public property FirstName as string
  Public property LastName as string
End Class

Public Class Child1
  Public property Color as string
End class

Public Class Child2
  Public property Color as string
End class

Public Class SubChild1
  Public property FirstName as string
End Class

Public Class SubChild2
  Public property FirstName as string
End Class

Collection Class:
Public class ParentS
  Public Function Add(objrow as Parent, byref skey as object) as Parent 
```

我是否需要将子类作为属性添加到父类？如何做到这一点并创建一个如上所述的结构。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:15:55.457

你可以这样：

```
Public Class Node

  Public Property FirstName As String
  Public Property LastName As String

  Private _childNodes As New List(Of Node)

  Public Property ChildNodes As List(Of Node)
  Get
     Return _childNodes
  End Get
  Set
     _childNodes = value
  End
  End Property

End Class 
```

**用法**

```
Dim parent As New Node
parent.FirstName = "John"
parent.LastName = "Doe"

Dim child_1 As New Node()
child_1.FirstName = "Jane"
child_1.LastName = "Doe"
parent.ChildNodes.Add(child_1) 
```

## 更新

```
Public Class Employee

  Public Property FirstName As String
  Public Property LastName As String

End Class

Public Class Department

  Private _employees As New List(Of Employee)
  Private _subDepartments As New List(Of Department)

  Public Property SubDepartments As List(Of Department)
  Get
     Return _subDepartments
  End Get
  Set
     _subDepartments = value
  End
  End Property

  Public Property Employees As List(Of Employee)
  Get
     Return _employees
  End Get
  Set
     _employees = value
  End
  End Property

End Class 
```

**用法**

```
Dim dept As New Department
dept.Name  = "Accounting"

Dim subDept1 As New Department()
subDept1.Name = "Audit"

dept.SubDepartments.Add(subDept1)

Dim employee1 As New Employee()
employee1.FirstName = "John"
employee1.LastName = "Doe"

dept.Employees.Add(employee1) 
```

希望有帮助！这可以进一步重构，但这应该可以工作。

# node.js - 我应该如何使用 node.js 在 mongoose/mongdb 中存储喜欢/不喜欢和评分

> ID：12994594
> 
> 赞同：11
> 
> 时间：2012-10-21T03:12:16.363
> 
> 标签：node.js, mongodb, mongoose

我有一个项目和一个用户的架构。我想让用户喜欢或不喜欢一个项目，我还想在项目和用户上存储一个评级关联。

```
var UserSchema = new Schema({
    username    : { type: String, required: true, index: { unique: true }
   , likes : [{ type: Schema.ObjectId, ref: 'Item'}]
   , dislikes : [{ type: Schema.ObjectId, ref: 'Item'}]
   , ratings: [???]
});

var ItemSchema = new Schema({
    name: { type: String},
   , likes : [{ type: Schema.ObjectId, ref: 'User'}]
   , dislikes : [{ type: Schema.ObjectId, ref: 'User'}]
   , ratings: [???]
}); 
```

用户存储项目引用，项目存储喜欢/不喜欢的用户引用。不过，我不确定如何将评分存储为属性，因为我想要用户和他们对项目评分的值。

```
item.ratings.forEach(function(rating){
  <%= rating.user.username %> gave <%= item.name %> a <%= rating.value %>.
}); 
```

我还想获取用户评分的项目列表以及评分值：

```
user.ratings.forEach(function(rating){
  <%= user.username %> has rated <%= rating.item.name %> and gave it a <%= rating.value %>
}); 
```

我的“评分”架构应该是什么样的？是否可以存储两个值？一个用户对象 id 和一个评级值（整数）并有这些的集合？

我用我的方法看到的另一个问题是猫鼬还不支持深度填充，所以我必须为它使用一个模块（https://github.com/JoshuaGross/mongoose-subpopulate），这在很大程度上是un - 测试或以不超过一层嵌套的不同方式存储它，因此我可以使用 .populate() 获取我的数据

任何反馈都表示赞赏，因为我是 noSQL 的新手，也许我过于复杂了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T05:58:58.127

我会照你说的做。我会使用评级模式：

```
var RatingSchema = new Schema({
   , _user : { type: ObjectId, ref: 'User' }
   , _item : { type: ObjectId, ref: 'Item' }
   , value : Integer
}); 
```

如果您希望能够从 User 模式访问评级，则必须添加一个挂钩，以便将任何已保存的 RatingSchema 添加到 user.ratings。

```
var UserSchema = new Schema({
  /* ... */
  ratings: [{ type: Schema.ObjectId, ref: 'Rating'}]
});

RatingSchema.post('save', function () {
  // push this.id to this._user.ratings
  // save this._user
}); 
```

关于“我在我的方法中看到的另一个问题是 mongoose 还不支持深度填充”，如果您不想使用 mongoose-subpopulate hack，我建议您将模型的加载重构为静态方法。例如：

```
UserSchema.statics.findByIdAndDeepPopulate = function (i, cb) {
  UserSchema.findOne(id)
    .exec(function(err, user) {
      if (err || !user) return cb(new Error('User not found'));
      if (user._ratings.length == 0) return cb(null, user);

      // Load and populate every ratings in user._ratings
      for(var i = 0; i < user._ratings.length; i++) {
        function(i) {
          RatingSchema
            .populate('_item')
            .exec(err, function(rating) {
              user._ratings[i] = rating;
              if (i == user._ratings.length) return cb(null, user);
            });
        }(i);
      }
    });
} 
```

**编辑：现在我再想一想，为什么不简单地将评级作为嵌入文档存储在 UserSchema 中呢？**

```
var UserSchema = new Schema({
  /* ... */
  ratings: [ RatingSchema ]
}); 
```

然后，您可以简单地以这种方式填充：

```
UserSchema.findOne(id)
  .populate('ratings._item')
  .exec(function(err, user) {
    if (err || !user) return next(new Error('User not found'));

    console.log(user.ratings);
  }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T07:40:46.410

您希望避免双重交叉链接，因为这意味着要维护两倍的数据，而且由于 Mongo 不支持事务，因此当您期望它是双重连接时，它会产生半连接数据的可能性。话虽这么说，我重新考虑你的模式是这样的：

```
var like = {
    itemid: { type: Schema.ObjectId, ref: 'Item'}
   , rating: Number
};

var UserSchema = new Schema({
    username    : { type: String, required: true, index: { unique: true }
   , likes : [like]
   , dislikes : [like]
});
UserSchema.index({ 'likes.itemid': 1 });
UserSchema.index({ 'dislikes.itemid': 1 });
var User = db.model('User', UserSchema);

var ItemSchema = new Schema({
    name: String
});
var Item = db.model('Item', ItemSchema); 
```

您可以通过说添加喜欢或不喜欢：

```
var piano = new Item({name: 'Mason & Hamlin Baby Grand Piano' });
var Joe = new User({ username: 'Joe_Smith' });
Joe.likes.push({ itemid: piano._id, rating: 10 }); 
```

当你想查找一个项目的喜欢时：

```
User.find({ 'likes.itemid': piano._id }, function(err, userLikes) {
    ...
}); 
```

如果你觉得这些都不对，那么你可以创建第三个集合......

```
var UserSchema = new Schema({
    username    : { type: String, required: true, index: { unique: true }
});
var User = db.model('User', UserSchema);

var ItemSchema = new Schema({
    name: String
});
var Item = db.model('Item', ItemSchema);

var LikesSchema = new Schema({
   , userid: { type: Schema.ObjectId, ref: 'User'}
   , itemid: { type: Schema.ObjectId, ref: 'Item'}
   , rating: Number
});
LikesSchema.index({ userid: 1, itemid: 1 }, { unique: true }); 
```

在这种情况下，最简单的规则可能是正面评价是喜欢，负面评价是不喜欢。

# python - Python中二维矩阵的单元格分配，没有numpy

> ID：12994595
> 
> 赞同：7
> 
> 时间：2012-10-21T03:12:42.073
> 
> 标签：python, matrix, variable-assignment

下面是我的脚本，它基本上创建了一个 12x8 的零矩阵，用 0 填充。然后我要一个一个地填充它。因此，假设第 2 行第 0 行需要为 5。我该怎么做？下面的示例显示了我是如何做到的以及错误的（根据我的需要）输出：

```
list_MatrixRow = []
list_Matrix = [] #Not to be confused by what the book calls, optimal alignment score matrix

int_NumbOfColumns = 12
int_NumbOfRows = 8

for i in range (0, int_NumbOfColumns): # Puts Zeros across the first Row
    list_AlignMatrixRow.append(0)
for i in range (0, int_NumbOfRows):
    list_AlignMatrix.append(list_AlignMatrixRow) 
#add the list in another list to make matrix of Zeros
#-------------------THE ACTUAL PROBLEMATIC PART; ABOVE IS FINE(It Works)------------

list_AlignMatrix[2][0] = 5 
# This is what logically makes sense but here is the output 
# which happens but I don't want (there should be all 0s and 
# only one 5 on the cell [2][0]):

[5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T03:31:08.763

每行都指向同一个子列表。这是重复附加相同子列表的结果。因此，当您修改一行时，您最终会修改其他行。

我会这样做：

```
ncols = 12
nrows = 8
matrix = [[0] * ncols for i in range(nrows)]
matrix[2][0] = 5 
```

`matrix`包含：

```
[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
 [5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]] 
```

关于编码风格的旁白：在 Python 中将对象的类型包含在其名称中是一种糟糕的形式。我选择重命名`int_NumbOfColumns`为`ncols`. 如果您需要更具描述性的内容，请使用`column_count`. 一般来说，要避免混合大小写的名称，而骆驼通常用于类名。有关更多信息，请参阅[PEP 8 -- Python 代码样式指南](http://www.python.org/dev/peps/pep-0008/)。

**编辑**：既然你提到你是 Python 新手，这里有一点解释。

这是一个[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
matrix = [[0] * ncols for i in range(nrows)] 
```

它也可以写成一个普通的for循环：

```
matrix = []
for i in range(nrows):
    matrix.append([0] * ncols) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T03:21:34.100

中的每个条目都是*对同一对象*`list_AlignMatrix`的引用。您需要为矩阵中的每一行创建一个新实例。这是正在发生的事情的说明：*[`list`](http://docs.python.org/library/functions.html#list)*

 *```
>>> l = [0]
>>> l2 = [l,l,l]
>>> l2
[[0], [0], [0]]
>>> l2[0][0] = 1
>>> l2
[[1], [1], [1]] 
```

您可以使用该[`id()`](http://docs.python.org/library/functions.html#id)函数来确认每个条目`l2`是对同一对象的引用：

```
>>> [id(x) for x in l2]
[161738316, 161738316, 161738316] 
```

要制作行列表的新副本，您可以像这样重写第二个循环：

```
for i in range (0, int_NumbOfRows):
    list_AlignMatrix.append(list(list_AlignMatrixRow)) 
```

构造[`list`](http://docs.python.org/library/functions.html#list)函数将创建 的副本`list_AlignMatrixRow`，如下例所示：

```
>>> l = range(10)
>>> l2 = list(l)
>>> l == l2
True
>>> l is l2
False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T03:23:01.227

当您 append`list_AlignMatrixRow`时，它只是附加对原始列表的引用，因此实际上只有一个一维列表，并且矩阵的每一行都指向它。要创建一个新列表，您需要实际创建一个新列表：

```
list_AlignMatrix.append(list(list_AlignMatrixRow)) 
```

注意对 list 的调用，它通过迭代和复制 list_AlignMatrixRow 的元素来创建一个列表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T03:23:57.070

要生成这样的矩阵，在 python 中，如果你想生成一个全为 0 的行，你应该使用这样的列表计算，

```
>>> import copy
>>> list_MatrixRow=[0 for i in range(12)]
>>> list_MatrixRow
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

ce 然后您可以以相同的方式创建列表列表

> > > list_Matrix=[[0 for j in range(12)] for i in range(8)]

现在您可以编辑任何元素

```
>>> list_Matrix[0][2]=12345
>>> list_Matrix[0][2]
12345
>>> list_Matrix
[[0, 0, 12345, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]] 
```

如果你想创建包含所有第 5 列的矩阵，你可以在列表理解上使用短路评估

```
>>> list_MatrixRow=[(i==0 and 5 or 0) for i in range(12)]
>>> list_MatrixRow
[5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
>>> list_Matrix=[list_MatrixRow for i in range(8)]
>>> list_MatrixRow
[5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
>>> list_Matrix
[[5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
>>> list_Matrix[0][0]
5 
```*

# java - 具有大量 StyleRange 的 SWT StyledText 对象

> ID：12994598
> 
> 赞同：2
> 
> 时间：2012-10-21T03:13:18.050
> 
> 标签：java, user-interface, swt, styledtext

我有一个 StytedText 对象，它可能承载数十兆字节的文本和数十万个 StyleRange 的缓冲区。

显然，这根本无法扩展。我的问题是，实现按需（某种）版本的 StyledText 的最简单方法是什么，它只会动态生成它在时间 t 需要的 StyleRange 对象（以覆盖该可见区域）？

*   我可以通过使用自定义 LineStyleListener 来使用 SWT，文档似乎建议吗？
*   JFace 是否已经提供了类似的功能？（*即*：文本视图支持丰富的字符范围样式**并**提供按需呈现视图的方式）
*   我应该使用另一个 UI 库吗？

**编辑：**我实现了 LineStyleListener 并得到了接近我想要的东西。但这让我想知道......为什么默认实现（org.eclipse.swt.custom.DefaultLineStyler）不支持这种按需方案。仅启用当前视图中的 StyleRanges 是相当简单的。那么，我在这里遗漏了一些重要的东西吗？我忽略的按需样式是否有一个主要的、令人讨厌的副作用？

# jquery - 使用 jquery 加载屏幕

> ID：12994600
> 
> 赞同：2
> 
> 时间：2012-10-21T03:13:31.950
> 
> 标签：jquery

> **可能重复：**
> [如何在页面完成加载/渲染之前显示页面加载图像/div/文本](https://stackoverflow.com/questions/1853662/how-to-show-page-loading-image-div-text-until-the-page-has-finished-loading-rend)

我想使用 jquery 显示一个完整的页面加载屏幕。我以前从未使用过加载，所以我很困惑。我要做的就是隐藏其他元素，直到加载所有脚本 css 图像和内容。我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T03:23:33.040

很简单：

1.  创建一个 div 填充屏幕，您可以将加载的图像或文本放在那里
2.  在您的 html 文件末尾，或使用 jquery $(document).ready(function(){ ... }); 删除 div。
3.  你提到了所有的“图像”......可能需要一些额外的东西。

因此，在您的 html 中，制作一个具有 100% 宽度和高度的固定或绝对 div ..（我建议将溢出设置为隐藏，这样您就没有滚动条（宽度 + 填充 + 边距 = >100%）

```
<div id='loading_wrap' style='position:fixed; height:100%; width:100%; overflow:hidden; top:0; left:0;'>Loading, please wait.</div> 
```

或者你可以把它放在头上：

```
<script type='text'javascript'>
$(document).ready(function(){
    $('#loading_wrap').remove();
});
</script> 
```

或者在你的 html 页面的末尾添加这个（就在结束 html 标记之前）：

```
<script type="text/javascript">$('#loading_wrap').remove();</script> 
```

这可能不会等待图片被加载，为此您将成为一个循环，在触发 .remove(); 之前检查图片是否已加载；

# scala - 如何在功能上将字符串映射合并到列表？

> ID：12994601
> 
> 赞同：0
> 
> 时间：2012-10-21T03:13:44.990
> 
> 标签：scala, collections, map, functional-programming, generic-collections

我已经建立了一个这样的抽象：

```
class Thing(val messages: Map[String, Seq[String]]) { 
  def and(that: Thing): Thing = {
    new Thing(this.messages ++ that.messages)
  }
} 
```

`this`的地图`String -> Seq[String]`需要与`that`的地图合并。

这是我能想到的最好的方法：

```
def and(that: Thing): Thing = {
  val keys = this.messages.keys ++ that.messages.keys
  val tuples = keys map {
    case key: String =>
      val theseMessages = this.messages.getOrElse(key, Seq[String]())
      val thoseMessages = that.messages.getOrElse(key, Seq[String]())
      (key, theseMessages ++ thoseMessages)
  }
  new Thing(tuples.toMap)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T03:37:10.633

这是一个使用的版本`groupBy`：

```
def and(that: Thing): Thing = {
  new Thing(
    (this.messages.toIndexedSeq ++ that.messages)
      .groupBy(_._1)
      .map { case (k,vs) => k -> vs.flatMap(_._2) }
      .toMap)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:59:23.243

Scalaz库包含这个函数，即[（](http://code.google.com/p/scalaz/)`|+|`半群附加）运算符。请注意，您需要选择比 更具体的集合类型`Seq`，即具有半组实例的集合类型，因此我使用了`List`.

```
import scalaz._, Scalaz._

class Thing(val messages: Map[String, List[String]]) { 
  def and(that: Thing): Thing =
    new Thing(this.messages |+| that.messages)
} 
```

您还可以为 定义一个半群实例`Thing`，并使用`|+|`运算符来组合`Thing`s。

```
case class Thing(val messages: Map[String, List[String]])

implicit val ThingSemigroup = new Semigroup[Thing] {
  def append(t1: Thing, t2: => Thing) = new Thing(t1.messages |+| t2.messages)
}

Thing(Map("foo" -> List("bar"))) |+| Thing(Map("foo" -> List("baz")))
// Thing(Map(foo -> List(bar, baz))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T03:45:51.077

我在评论中链接到的答案的更具体、稍微修改的版本可能会使方法更清晰：

```
def and(that: Thing): Thing = {
  new Thing(this.messages.foldLeft(that.messages) { case (out, (keyToAdd, valuesToAdd)) =>
    out ++ Map(keyToAdd -> out.get(keyToAdd).map(_ ++ valuesToAdd).getOrElse(valuesToAdd))
  })
} 
```

还具有不循环遍历其中一张地图的优点。

# iphone - iPhone 和 UIWebView：强制 HTTPS（动态重写 URL）

> ID：12994602
> 
> 赞同：1
> 
> 时间：2012-10-21T03:13:49.233
> 
> 标签：iphone, cocoa-touch, uiwebview, https

我有一个使用 Cocoa/CocoaTouch 的 UIWebView 的基于 Web 的应用程序。我想（需要？）强制所有 HTTP 连接到 HTTPS。请注意，我有兴趣将初始登陆 URL 强制为 HTTPS，并将所有中间获取也强制为 HTTPS。动机：[在实践中击败 SSL](http://www.blackhat.com/presentations/bh-dc-09/Marlinspike/BlackHat-DC-09-Marlinspike-Defeating-SSL.pdf)和[sslstrip](http://www.thoughtcrime.org/software/sslstrip/)的新技巧。

是否可以将 WebView 配置为仅使用 HTTPS？[UIWebView 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)甚至没有提到 HTTPS 。考虑到 Apple 不允许我[在 UIWebView 中禁用 JavaScript](https://stackoverflow.com/questions/2302975/uiwebview-can-you-disable-javascript)，我怀疑我是否可以对视图进行配置更改。

或者答案是否存在于`NSURLRequest`,`NSURLConnection`和可能的委托方法中？我阅读了[URL Loading System Overview](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Concepts/URLOverview.html#//apple_ref/doc/uid/20001834-BAJEAIEE)，但看不到可以更改请求的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:54:03.720

如果要更改请求，可以代理 UIWebView，以便拦截所有请求，然后将 http 替换为 https，并从代理发出请求。一种方法是继承 NSURLCache 并覆盖方法 cachedResponseForRequest。

# ios - Adhoc iOS 应用程序崩溃 - CFDataGetBytePtr

> ID：12994604
> 
> 赞同：0
> 
> 时间：2012-10-21T03:13:56.977
> 
> 标签：ios, crash, adhoc

我有一个 iphone 应用程序，它从图像中获取字节并进行一些操作。最后，字节被复制回 UIImage。当我在 3GS 上测试时，它运行良好。没有崩溃。当我的一些朋友在4S上测试时，它以adhoc方式崩溃。我使用 testflight 来捕获崩溃报告并进行符号化。这是它崩溃的代码。我使用了相同的 4s 到 3gs 图像，但再次没有崩溃。有谁知道如何找出根本原因并解决它？

当 UIImage 转换为 CGImageRef 时，它会返回不同的宽度和高度吗？

```
-(UIImage *) CopyBytesToUIImage:(int*)img 
                               :(int) width
                               :(int) height 
{

    //(int*)img was build by extracting bytes from OriginalSourceImage
    CGImageRef inImage = OriginalSourceImage.CGImage;
    CFDataRef m_DataRef = CGDataProviderCopyData(CGImageGetDataProvider(inImage));  
    UInt8 * m_OutPixelBuf = (UInt8 *) CFDataGetBytePtr(m_DataRef);  

    int iStep,jStep;

    for (int i = 0; i < height; i++) 
    {
        iStep = i*width*4;
        for (int j = 0; j < width; j++) 
        {
            jStep = j*4;
            m_OutPixelBuf[iStep + jStep ] = m_OutPixelBuf[iStep + jStep +1] =    m_OutPixelBuf[iStep + jStep +2] = img.arr2D[i][j];

            //Test flight shows that it crashes during this assignment.
        }
    }   

    CGContextRef ctx = CGBitmapContextCreate(m_OutPixelBuf,  
                                             CGImageGetWidth(inImage),  
                                             CGImageGetHeight(inImage),  
                                             CGImageGetBitsPerComponent(inImage),
                                             CGImageGetBytesPerRow(inImage),  
                                             CGImageGetColorSpace(inImage),                                          CGImageGetBitmapInfo(inImage) 
                                             ); 

    CGImageRef imageRef = CGBitmapContextCreateImage(ctx);  
    CGContextRelease(ctx);
    UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    CFRelease(m_DataRef);
    m_OutPixelBuf = nil;
    return finalImage;

} 
```

这是试飞数据

```
1\.  0 MyApp 0x000cf6ae testflight_backtrace + 238
2\.  1 MyApp 0x000d0398 TFSignalHandler + 264
3\.  2 libsystem_c.dylib 0x3a63de92 _sigtramp + 42
4\.  3 MyApp 0x0009e328 -[clsEditor CopyBytesToUIImage:::] + 176
5\.  4 MyApp 0x0009e1c4 -[clsEditor Sketch:] + 596 
```

提前谢谢你。

# c - gcc 预处理器 typedef 名称替换

> ID：12994605
> 
> 赞同：4
> 
> 时间：2012-10-21T03:14:25.630
> 
> 标签：c, gcc

有没有办法让 gcc 预处理器用 typedef 定义的类型替换类型，即

像这样的东西：

```
typedef unsigned char Uint8

int main(void)
{
    Uint8 a = 1;
    Uint8 b = 2;
    Uint8 c;

    c = a + b;

    return 0;
} 
```

会被预处理成这样的东西：

```
int main(void)
{
    unsigned char a = 1;
    unsigned char b = 2;
    unsigned char c;

    c = a + b;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:21:09.683

不，没有，因为类型别名是编译阶段的一部分，而不是预处理阶段。因此，预处理器无法通过设计了解有关类型的任何信息，也无法对这些类型执行任何操作。此外，您忘记`;`在 typedef 语句的末尾添加。

# android - Android：如何加密和解密资源文件并在应用程序中使用

> ID：12994607
> 
> 赞同：3
> 
> 时间：2012-10-21T03:14:34.490
> 
> 标签：android, image, resources, encryption

我需要以加密格式将资源文件（文本文档、imgaes、音乐等）存储在我的应用程序中，并且在运行时我需要解密文件并使用它。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T12:23:11.530

> 那我该如何实现呢？

如果您不希望用户访问数据，请不要将其存储在用户的手机上。

足够感兴趣的用户可以访问他们设备上的任何内容。这将包括您的代码以及您的资源。您使用的任何加密算法和密钥都将在您的代码中；找到并使用它来解密您的资源并不是特别困难。

# asp.net - 下拉列表不改变图表类型

> ID：12994609
> 
> 赞同：0
> 
> 时间：2012-10-21T03:15:13.823
> 
> 标签：asp.net, drop-down-menu, charts

我下面的代码有问题，我需要创建一个显示图表的页面，以及一个下拉列表来更改图表类型

图表显示正确，但下拉列表控件不执行任何操作，有人可以帮忙吗？我还希望在 3 种图表类型上选择 3D

```
 <%@ Page Title="" Language="VB" MasterPageFile="~/Site.master" AutoEventWireup="false" CodeFile="test.aspx.vb" Inherits="admin_test" %>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">

  <script type="text/javascript" language="javascript">
  function showContent(i) {
      if (document.getElementById('statContent' + i).style.display == 'none') {
          document.getElementById('statContent' + i).style.display = 'block';
      } else {
          document.getElementById('statContent' + i).style.display = 'none';
      }
  } 
</script> 
            choose chart display type: 
<asp:dropdownlist id="ChartTypeList" runat="server" AutoPostBack="True" 
CssClass="spaceright" Width="112px">
                    <asp:ListItem Value="Column" Selected="True">Column 2D</asp:ListItem>
                    <asp:ListItem Value="Column">Column 3D</asp:ListItem>
                    <asp:ListItem Value="Line">Line 2D</asp:ListItem>
                    <asp:ListItem Value="Line">Line 3D</asp:ListItem>
                    <asp:ListItem Value="Pie">Pie 2D</asp:ListItem>
                    <asp:ListItem Value="Pie">Pie 3D</asp:ListItem>
            </asp:dropdownlist><br />

 <asp:Chart ID="Chart1" runat="server" DataSourceID="SqlDataSource1" >
  <series>
    <asp:Series Name="Series1" ChartType="Pie" XValueMember="suburb" 
      YValueMembers="username">
    </asp:Series>
  </series>
  <chartareas>
    <asp:ChartArea Name="ChartArea1">
    </asp:ChartArea>
  </chartareas>
</asp:Chart>

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="SELECT suburb, COUNT(username) AS username FROM member GROUP BY suburb">
        </asp:SqlDataSource>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:20:30.700

我没有看到`OnSelectedIndexChanged`为您列出的任何功能下拉列表。你告诉它回发，但没有告诉它应该做什么。

你应该有类似的东西：

```
<asp:dropdownlist id="ChartTypeList" runat="server" AutoPostBack="True" 
CssClass="spaceright" Width="112px" onselectedindexchanged="ChartTypeList_SelectedIndexChanged"> 
```

对于代码隐藏

```
protected void ChartTypeList_SelectedIndexChanged(object sender, EventArgs e)
{
//change the chart code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:33:49.167

我自己解决了它，只是想我会为了任何在这里搜索的人的利益而发布它背后的正确代码：

```
Protected Sub DropDownList_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles DropDownList.SelectedIndexChanged
    'keep charts hidden when not selected
    If (DropDownList.SelectedValue = "hide") Then
        Chart1.Visible = False
        'Columns
    ElseIf (DropDownList.SelectedValue = "Column 3D") Then
        Chart1.Series(0).ChartType = DataVisualization.Charting.SeriesChartType.Column
        Chart1.ChartAreas(0).Area3DStyle.Enable3D = True
        Chart1.Visible = True
    ElseIf (DropDownList.SelectedValue = "Column") Then
        Chart1.Series(0).ChartType = DataVisualization.Charting.SeriesChartType.Column
        Chart1.ChartAreas(0).Area3DStyle.Enable3D = False
        Chart1.Visible = True

        'Pies
    ElseIf (DropDownList.SelectedValue = "Pie 3D") Then
        Chart1.Series(0).ChartType = DataVisualization.Charting.SeriesChartType.Pie
        Chart1.ChartAreas(0).Area3DStyle.Enable3D = True
        Chart1.Visible = True
    ElseIf (DropDownList.SelectedValue = "Pie") Then
        Chart1.Series(0).ChartType = DataVisualization.Charting.SeriesChartType.Pie
        Chart1.ChartAreas(0).Area3DStyle.Enable3D = False
        Chart1.Visible = True

        'Lines
    ElseIf (DropDownList.SelectedValue = "Line 3D") Then
        Chart1.Series(0).ChartType = DataVisualization.Charting.SeriesChartType.Line
        Chart1.ChartAreas(0).Area3DStyle.Enable3D = True
        Chart1.Visible = True
    ElseIf (DropDownList.SelectedValue = "Line") Then
        Chart1.Series(0).ChartType = DataVisualization.Charting.SeriesChartType.Line
        Chart1.ChartAreas(0).Area3DStyle.Enable3D = False
        Chart1.Visible = True
    End If
End Sub 
```

这是正确的代码：

```
 <asp:dropdownlist id="DropDownList" runat="server" AutoPostBack="True" 
                    OnSelectedIndexChanged="DropDownList_SelectedIndexChanged" >
                    <asp:ListItem value="hide" Selected="True">Select</asp:ListItem> 
                    <asp:ListItem Value="Pie">Pie Chart</asp:ListItem>
                    <asp:ListItem Value="Pie 3D">Pie Chart 3D</asp:ListItem>
                    <asp:ListItem Value="Column" >Column Chart</asp:ListItem>
                    <asp:ListItem Value="Column 3D">Column Chart 3D</asp:ListItem>
                    <asp:ListItem Value="Line">Line Chart</asp:ListItem>
                    <asp:ListItem Value="Line 3D">Line Chart 3D</asp:ListItem>
                    </asp:dropdownlist><br />

 <asp:Chart ID="Chart1" runat="server" Width="450px" Height="450px" DataSourceID="SqlDataSource1" Visible="false"  >
      <series>
         <asp:Series Name="Series1" XValueMember="suburb" YValueMembers="username">
         </asp:Series>
      </series>
        <chartareas>
            <asp:ChartArea Name="ChartArea1">
            </asp:ChartArea>
        </chartareas>
 </asp:Chart>

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="SELECT suburb, COUNT(username) AS username FROM member GROUP BY suburb">
    </asp:SqlDataSource> 
```

# html - 标题/内容对齐/定位

> ID：12994610
> 
> 赞同：0
> 
> 时间：2012-10-21T03:15:14.543
> 
> 标签：html, css

我正在尝试创建一个标题固定在顶部但始终居中的网站（除非屏幕太小，我希望它位于左侧并在右侧裁剪），然后我希望我的内容向上滚动在页眉下方，以使页眉保持原样，但您可以滚动浏览页面底部。这是我现在拥有的代码：

```
<body>
<div id="header_img">
<span class="class1">
<a href="index.html"><h2>HEATHER</h2></a></span>
<p class="style5">
419.953.5098<br>
<span class="class2">
<a href ="mailto:obringhm@mail.uc.edu">obringhm@mail.uc.edu</a></span></p>

<table>
<tr>
<td><a href="b5_photo_portrait.html">portraits</a></td>
<td><a href="b5_photo_object.html">objects</a></td>
<td>records
</td>
</tr>
</table>  
</div>

<div id="header_img2" style="scroll:auto">
<img class="project14"src="images/image17.jpg">
<img class="project15" src="images/image16.jpg">
<img class="project16" src="images/image20.jpg">
<h3>Portrait Series</h3>
<p>This project is an exploration of composition within a photograph and
the studying of correct value tones in a picture.
<br><br>
Completed: December 2011<br>
Tools: Film Photography
<br></p>
</div>
</body> 
```

和CSS：

```
#header_img {
 height: 180px;
 background: #E2E2E2;
 width: 998px;
 position: fixed;
 top: -25px;
 margin: 0 auto;
 z-index: 11;
 box-shadow: 0 6px 10px -10px #888;
 } 
 #header_img2 {
 height: 800px;
 background: E2E2E2; 
 width: 998px;
 position: relative;
 top: 200;
 z-index: 10;
 } 
```

现在，我的内容在标题下方滚动，但标题固定在左侧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:43:27.027

老实说，您的代码有点混乱。出现问题是因为您的 div 位于未设置宽度的容器内。在正文上设置宽度和边距或将代码放在具有宽度和边距的容器中将解决您的问题。

```
body{width:960px; margin:0 auto;} 
```

现在其他问题。

1.  我不知道为什么您在第一个 div 上将 top 设置为负值，但它会将您的内容从页面顶部删除。
2.  您在第二个 div 上的最高设置是 200，这是行不通的，它必须有 px 所以 200px。
3.  盒子阴影只有 4 个设置，你有 5 个。
4.  您正在使用不应该使用表格的表格。

看到这个小提琴：http: [//jsfiddle.net/calder12/r43me/2/](http://jsfiddle.net/calder12/r43me/2/)

# php - 代理网站中的相对网址不起作用

> ID：12994611
> 
> 赞同：5
> 
> 时间：2012-10-21T03:15:20.543
> 
> 标签：php, proxy, relative-path

在 PHP 中，我编写了一个接受 url、用户代理和其他设置的代理函数。然后该函数向网站发出 curl 请求，并将带有正确 html 内容类型标头的输出打印到 iframe 中（这只是因为我需要更改一些标头而需要）。

该代理输出通常包含大量具有相对 URLS 的资产，并且实际上继承了我网站的主机名，而不是代理网站：

例如： [http:// **MYSITE** .com/proxy?url=http://somesite.com] 将返回 [http:// **somesite** .com]的 html

在响应html中，有这样的东西：

```
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png"> 
```

**问题：**

而不是资产在 处寻找该资产`http://somesite.com/assets/ico/apple-touch-icon-144-precomposed.png`，它实际上试图在哪里找到它`http://MYSITE.com/assets/ico/apple-touch-icon-144-precomposed.png`是错误的。

**问题**：

我需要做什么才能让他们的相对路径资产通过代理正确加载？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-21T03:26:24.457

[`<base>`标签](http://www.w3.org/TR/html-markup/base.html)呢？您可以将它放在头部，它会通知浏览器使用什么作为页面上所有相对 URL 的基本路径：

```
<head>
    <base href="http://somesite.com/">
</head> 
```

您可以将它添加到您使用的每个页面[`DOMDocument`](http://docs.php.net/manual/en/class.domdocument.php)（请注意，这是针对 PHP5.4 的，因为数组取消引用，但这对于早期版本很容易修复）：

```
if($contentType == 'text/html') {
    $doc = DOMDocument::loadHTML($html);
    $head = $doc->getElementsByTagName('head')[0];

    if(count($head->getElementsByTagName('base')) == 0) {
        $base = DOMDocument::createElement('base');
        $base->setAttribute('href', $urlOfPageDir);
    }

    $head->appendChild($base);
    echo $doc->saveHTML();
} 
```

注意 $urlOfPageDir 必须是页面所在目录的绝对 URL。有关基本标记的更多信息，请参阅此 SO 问题：[是否建议使用 <base> html 标记？](https://stackoverflow.com/questions/1889076/is-it-recommended-to-use-the-base-html-tag)

# image-processing - 如何在 javacv/opencv 中进行精明的边缘检测？

> ID：12994612
> 
> 赞同：2
> 
> 时间：2012-10-21T03:15:30.810
> 
> 标签：image-processing, opencv, javacv, edge-detection

我目前正在从事图像处理项目，我需要从图像中检测边缘。我想使用精明边缘检测来检测图像的线条，所以我在互联网上使用 javacv 搜索精明边缘检测，我找到了一些教程，这些教程给出了精明边缘检测技术的基本概念，但我找不到任何示例关于这个的代码。请问有人可以提供简单的示例边缘检测代码吗？

如果您能提供下图的代码示例，我们将不胜感激。

![在此处输入图像描述](../Images/790ffa89ee950c772a01320a5437d0b2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:18:13.173

对于精明的边缘检测，您需要执行如下操作。

```
IplImage gray = ...

cvCvtColor(colored, gray, CV_RGB2GRAY); 
cvSmooth( gray, smooth, CV_BLUR, 9, 9, 2, 2);   
cvThreshold(gray,gray, 155, 255, CV_THRESH_BINARY);

cvCanny( gray, gray, lowThreshold, highThreshold, aperature_size ); 
```

[检查此问题和答案以获取更多详细信息](https://stackoverflow.com/a/7263794/1225337)

# php - AJAX 请求期间无法识别 PHP 会话

> ID：12994617
> 
> 赞同：0
> 
> 时间：2012-10-21T03:16:16.923
> 
> 标签：php, jquery, ajax, session, session-variables

我创建了一个导航栏，管理员可以在其中使用简单的表单添加和删除链接。当提交表单以添加链接时，会进行 AJAX 调用以将新信息添加到 mySQL 数据库中。作为回调函数的一部分，导航栏会使用以下代码行更新以包含新链接：

```
$('.nav ul').load('/getnav.php'); 
```

文件 getnav.php 如下：

```
<?php
  require('/connect.php');
  $query = "SELECT id, title, url
            FROM nav
            ORDER BY position ASC";
  $result = $mysqli->query($query);

  while ($data = $result->fetch_assoc()) {
        if (!empty($_SESSION['valid']))
           echo '  <div class="container"><button type="button" name="'.$data['id'].'" class="delButton" alt="Delete"></button></div>
';
  echo '  <a href="'.$data['url'].'" alt="'.$data['title'].'">'.$data['title'].'</a>
';
}
?> 
```

问题是在 AJAX 调用中更新导航栏时，仅显示链接，删除按钮消失。`$_SESSION['valid']`已设置，因此应该执行 if 之后的代码。但是，在进行 AJAX 调用之后缺少的是 if 的代码。我对此的唯一解释是当 getnav.php 被加载到`.nav ul`时，会话没有被访问。有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:20:18.437

如果没有完整的代码，这很难诊断。

*   您是否使用 session_start(); 开始会话？?

*   你可以尝试 var_dump $_SESSION 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:36:20.993

我想我可以创建一个 getnav.php 版本，它没有并且在我调用html 页面`session_start()`时将使用。`require('/getnav.php');`然后我创建另一个版本的 getnav.php，它确实有 session_start() 并包含原始版本，它将用于 AJAX 调用。

它应该可以解决问题，尽管它并不是一个真正令人满意的解决方案。欢迎提出更好的建议！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T03:50:04.410

好吧，我想通了。

通过`session_write_close();`在第一个 session_start() 之后使用，我可以在 getnav.php 中再次使用 session_start() 而不会出现任何错误。

# mac-address - Nios ii 上 DM9000a 的 Mac 地址

> ID：12994619
> 
> 赞同：2
> 
> 时间：2012-10-21T03:16:46.727
> 
> 标签：mac-address, nios

我有一个任务是使用 Nios ii 和模块 DM9000A 在计算机和 DE2 板之间进行通信。

我在文件 DM9000A.c 中找到

```
 /* store MAC address into NIC */
  for (i = 0; i < 6; i++) 
  iow(16 + i, ether_addr[i]); 
```

并在文件 DM9000A.h

```
unsigned char ether_addr[6]={ 0x01, 0x60, 0x6E, 0x11, 0x02, 0x0F  }; 
```

DE2 的 Simple Socket 项目使用这个 Mac 地址作为 UDP 数据包中的源地址。

那么，那是网卡的Mac地址吗？

# ruby-on-rails-3 - 待定迁移与 heroku rake db:seed

> ID：12994623
> 
> 赞同：1
> 
> 时间：2012-10-21T03:17:13.710
> 
> 标签：ruby-on-rails-3, heroku

我正在尝试部署到 heroku，但遇到了一个问题：当我运行 heroku rake db:seed （它在我的数据库中创建管理员用户）时，rails 返回我有待处理的迁移。我已经手动删除了这些迁移（我不应该这样做，我知道），我该如何解决这个问题？

```
Charlie@CHARLIE-PC /c/rails/rails_projects/METACRITIC (master)
$ rake db:migrate

Charlie@CHARLIE-PC /c/rails/rails_projects/METACRITIC (master)
$ heroku run rake db:seed
Running `rake db:seed` attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support
 for these plugins will be removed in Rails 4.0\. Move them out and bundle them i
n your Gemfile, or fold them in to your app as lib/myplugin/* and config/initial
izers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonr
ails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required
)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support
 for these plugins will be removed in Rails 4.0\. Move them out and bundle them i
n your Gemfile, or fold them in to your app as lib/myplugin/* and config/initial
izers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonr
ails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required
)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support
 for these plugins will be removed in Rails 4.0\. Move them out and bundle them i
n your Gemfile, or fold them in to your app as lib/myplugin/* and config/initial
izers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonr
ails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required
)> at /app/Rakefile:7)
You have 2 pending migrations:
  20121013054027 Addcolumnimagetoshow
  20121013063205 AddAttachmentToShows
Run `rake db:migrate` to update your database then try again.

Charlie@CHARLIE-PC /c/rails/rails_projects/METACRITIC (master)
$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:48:52.387

您在本地（`rake db:migrate`）运行迁移，而不是在 heroku 上运行`heroku run rake db:migrate`

# php - “资产”的位置（php、css、jss 等）

> ID：12994624
> 
> 赞同：0
> 
> 时间：2012-10-21T03:17:16.237
> 
> 标签：php, twitter-bootstrap

在我的根目录中，我有一堆单页，然后是文件夹“博客”和“资产”。对于页面，我有一个 header.php/nav.php/footer.php 来调用各种 css 和 js。

例如：在 header.php 中：

```
<link href="http://beta.rfahaiti.org/assets/css/bootstrap.css" rel="stylesheet"> 
```

然后，在我要求的页面中： `<?php include 'assets/header.php'; ?>`

但是，这似乎不适用于 blog 文件夹中的任何页面——例如 /blog/news/ 中的 index.php 文件。我认为这是一个相对链接与绝对链接的问题，但我不确定如何解决。问题：调用 header.php 文件需要什么 php include 调用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:25:23.210

包含路径是相对的，请尝试：

```
<?php include '../assets/header.php'; ?> 
```

您会发现引用资源的 HTML 文档也是如此，例如 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:25:38.470

尝试：

```
<?php include '../assets/header.php'; ?> 
```

或者

```
<?php include '../../assets/header.php'; ?> 
```

取决于您的文件夹结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T03:25:30.323

正如您所说，这是一个相对链接问题。对于 /blog/news 深处两层的页面，您需要返回两层：

```
../../assets/header.php 
```

**编辑**感谢 Juan Sosa 指出以下内容是完全错误的。

~~或者，您可以这样写：~~

 ~~```
/assets/header.php 
```~~ 

~~第二种方法在某种意义上更干净。但是，请注意它假定您的站点将始终位于域的根目录（即，如果它曾经被移动到`http://beta.rfahaiti.org/theapplication/`或其他地方，那么所有这些类型的链接都会中断）。~~

# java - 在 Java 小程序中使用数组命名图像文件

> ID：12994626
> 
> 赞同：0
> 
> 时间：2012-10-21T03:17:31.960
> 
> 标签：java, arrays, applet, naming-conventions

我最近一直想用 java 构建一个纸牌或二十一点游戏。当我开始编码时，我遇到了一个关于有效导入卡片的所有图像填充的问题。我立即查了一下，但没有得到任何答案。Wy 的问题是为什么你不能这样命名图像：

```
for (int num = 0; num1 < 40; num++ ){
    Image names[num] = getImage ( getDocumentBase (), "c" + (num +1) + ".gif" );
} 
```

如果您发现任何其他问题，请告诉我。先感谢您。这是完整的代码：

```
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Color;

public class CardsJavaProgram extends Applet {
public void init(){
    String names [ ] = { "c1", "c2", "c3", "c4", "c5", "c6", "c7", "c8", "c9", "c10", "s1", "s2", "s3", "s4", "s5", "s6", "s7", "s8", "s9", "s10", "d1", "d2", "d3", "d4", "d5", "d6", "d7", "d8", "d9", "d10", "h1", "h2", "h3", "h4", "h5", "h6", "h7", "h8", "h9", "h10"};
    for (int num = 0; num1 < 40; num++ ){
        Image names[num] = getImage ( getDocumentBase (), "c" + (num +1) + ".gif" );
    }
}
public void paint( Graphics screen ){

    int x = 10;
    for (int num5 = 0; num5 < 5; num5++ ){
        screen.drawImage( names[ (int) (Math.random () * 39)], x, 10, 100, 100, this );
        x = x + 100;
    }
}
} 
```

PS我知道Kings Queens和Jacks没有被进口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:21:30.497

首先，您必须声明数组（在类级别使其可用于多个方法）：

```
public class CardsJavaProgram extends Applet { 
    private Image[] images = new Image[40]; 
```

您还应该更改变量名称（例如`images`），因为您还有其他同名的变量。

然后可以填写数组：

```
for (int num = 0; num1 < 40; num++ ){   
    images[num] = //... 
```

# c++ - C++ 设计：单个函数执行多个任务 vs 多个函数执行单个任务

> ID：12994628
> 
> 赞同：3
> 
> 时间：2012-10-21T03:18:05.993
> 
> 标签：c++, methods

在设计 C++ 类时，假设我有以下两个选项：

选项 1：一种具有长参数列表的方法，该方法执行多项任务。
选项 2：每个任务的单独方法（每个方法都有更小的参数列表）。

显然，一般来说，选项 2 更可取，因为它产生更清晰的代码。但是，如果这些方法的唯一目的是成为其他方法的“助手”，那么在选项 2 的情况下，我将不得不承担多个函数调用的开销，而选项 1 将只有一个函数调用。

在这种（极端）情况下，假设的性能提升（由于更少的函数调用）是否证明选择选项 1 是合理的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T03:22:00.407

> 在这种（极端）情况下，假设的性能提升（由于更少的函数调用）是否证明选择选项 1 是合理的？

IMO，这里的性能提升可以忽略不计，不会牺牲代码的可维护性，特别是在企业应用程序中，其中具有大参数列表和大量代码行的函数难以修改/调试。此类功能必须分解为多个较小的功能，其中每个功能都执行明确定义的步骤，该步骤是较大任务的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:31:25.570

你的工作是编写好的、干净的和工作的代码。编译器的工作是使其高效。显然，它比你做的要好得多。

所以，是的，总是选择第二个选项。如果您想要效率，请编写干净并让编译器完成它的工作。（顺便说一句，您可以使用 -O3 标志进行编译以进一步增加优化）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T22:35:07.000

**给一个实体一个连贯的责任** 是 Alexandrescu 在 C++ 编码标准中第 5 条的标题。

在我看来，您将失去清晰度，增加维护成本，并且更有可能在“全部完成”场景中引入错误。

衡量单独函数调用与必须在每次调用内部执行代码路径逻辑的函数的性能可能是明智的。

# javascript - 输入字段的jquery设置值

> ID：12994646
> 
> 赞同：26
> 
> 时间：2012-10-21T03:21:30.027
> 
> 标签：javascript, jquery, html

我有一个输入字段，我正在尝试使用它的类来设置它的值

```
<form:input path="userName" id="userName" title="Choose A Unique UserName" readonly="${userNameStatus}" class="formData"/> 
```

呈现为：

```
<input id="userName" name="userName" title="Choose A Unique UserName" class="formData" type="text" value=""/> 
```

我正在使用以下 jquery，但这似乎不起作用。有人可以告诉我哪里出错了。

```
$(".formData").html(""); 
```

**编辑处理事件的 JQuery 函数**

```
$('#reset').click(function (){
            $("#userNameErr").text(""); 
            $('#badgeNoErr').text("");

            $(".errors").html("");

            $(".formData").val("");

        }); 
```

也不是`$(".formData").text("")`或`$(".formData").val("")`工作。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-21T03:28:25.440

这应该有效。

```
$(".formData").val("valuesgoeshere") 
```

对于空

```
$(".formData").val("") 
```

如果这不起作用，您应该发布一个 jsFiddle。

演示：

```
$(function() {
  $(".resetInput").on("click", function() {
    $(".formData").val("");
  });
})
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="text" class="formData" value="yoyoyo">

<button class="resetInput">Click Here to reset</button>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-20T09:52:58.083

如果输入字段有一个类名 formData 使用这个： `$(".formData").val("data")`

如果输入字段有一个 id 属性名称 formData 使用这个： `$("#formData").val("data")`

如果给定输入名称，请使用： `$("input[name='formData']").val("data")`

您还可以提及类型。然后它将引用该类型的所有输入和给定的类名： `$("input[type='text'].formData").val("data")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T04:27:11.223

将您的 jquery 加载设置更改为jsfiddle 中的**onload**。. 。有用 。. .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-10T10:55:04.527

使用此代码通过另一个 id 在输入标签中设置值。

```
$(".formdata").val(document.getElementById("fsd").innerHTML); 
```

或使用此代码在输入标签中使用 classname="formdata" 设置值

```
$(".formdata").val("hello"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-14T14:53:45.220

```
$('.formData').attr('value','YOUR_VALUE') 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-09-10T10:46:46.717

您只需编写此脚本。为此使用输入元素。

```
$("input").val("valuesgoeshere"); 
```

或通过 id="fsd" 您编写此代码。

```
$("input").val(document.getElementById("fsd").innerHTML); 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2014-09-10T11:12:32.310

将您的 jQuery 函数放入

```
$(document).ready(function(){

}); 
```

肯定解决了。

# php - PHP，意外的 T_IF，在第 xxx 行的 xxx 文件中需要 T_FUNCTION

> ID：12994653
> 
> 赞同：1
> 
> 时间：2012-10-21T03:22:02.430
> 
> 标签：php, parse-error

很奇怪，我的本地主机上运行了代码，但是当我将它部署在远程服务器上时。它得到了 T_IF 错误。代码如下：

xxx 行是： $experiment['import_result'] = TRUE;

```
private function do_import($file_info, $ih_id){

    $this->load->library("MY_PHPExcel");
    $inputFileName = $file_info['full_path']; 
    $sheetNames = array('General','Gas', 'Sample', 'Mass Gain', 'Cr'); 

    /**  Identify the type of $inputFileName  **/ 
    $inputFileType = PHPExcel_IOFactory::identify($inputFileName); 
    /**  Create a new Reader of the type that has been identified  **/ 
    $objReader = PHPExcel_IOFactory::createReader($inputFileType); 
    /**  Advise the Reader that we only want to load cell data  **/ 
    $objReader->setReadDataOnly(true);
    /**  Advise the Reader of which WorkSheets we want to load  **/  
    $objReader->setLoadSheetsOnly($sheetNames); 
    /**  Tell the Reader that we want to use the Read Filter  **/  
    //$objReader->setReadFilter($filterSubset);
    /**  Load $inputFileName to a PHPExcel Object  **/ 
    $objPHPExcel = $objReader->load($inputFileName);
    $sheetCount=$objPHPExcel->getSheetCount();

    $experiment = array();
    for($index = 0; $index<$sheetCount; $index++){
        $objPHPExcel->setActiveSheetIndex($index);
        $sheetName = $objPHPExcel->getActiveSheet()->getTitle();
        if($sheetName == 'General'){
            $experiment['general'] = $this->read_general($objPHPExcel, $index, 1);
        }elseif($sheetName == 'Sample'){
            $experiment['sample'] = $this->read_sample($objPHPExcel, $index, 1);
        }elseif($sheetName == 'Gas'){
            $experiment['gas'] = $this->read_gas($objPHPExcel, $index, 1);
        }elseif($sheetName == 'Mass Gain'){
            $experiment['mass'] = $this->read_mass($objPHPExcel, $index, 1);
        }elseif($sheetName == 'Cr'){
            $experiment['cr'] = $this->read_cr($objPHPExcel, $index, 1);
        }
    }

    //if there is format error 
    foreach($experiment as $sheet){
        if(isset($sheet) && !empty($sheet)){
            if(isset($sheet['error']) && !empty($sheet['error'])){
                $experiment['import_result'] = FALSE;
                break 1;
            }elseif(isset($sheet['validation']['validation']) && $sheet['validation']['validation'] == 0){
                $experiment['import_result'] = FALSE;
                break 1;
            }else{
                $experiment['import_result'] = TRUE;
                break 1;
            }
        }
    }

    if($experiment['import_result']){//there is no format error, proceed to import
        //do import into DB
        $import_flag = 0;
        $post_data = $this->input->post();

        if(isset($post_data['import_radio']) && $post_data['import_radio'] == 1){//new 
            $import_flag = $this->m_import->import_experiment_new($experiment, $this->session->userdata('user_id'), $ih_id);
        }elseif(isset($post_data['import_radio']) && $post_data['import_radio'] == 2){//update
            //debug
            //$this->firephp->log('update an existing experiment');
            $import_flag = $this->m_import->import_experiment_update($post_data['import_eid'], $experiment, $this->session->userdata('user_id'), $ih_id);
        }else{//didn't choose a mode
            return array('status'=>4, 'message'=>'Please select "new" or "update".');
        }

        if($import_flag != 0){//import done ok
            if($post_data['import_radio'] == 1){
                return array('status'=>1, 'message'=>'File has been successfully imported, the new experiment ID is '.$import_flag.'.');
            }else{
                return array('status'=>1, 'message'=>'File has been successfully imported, Experiment'.$import_flag.' has been updated.');
            }
        }else{//validation ok, import fail
            return array('status'=>2, 'message'=>'Something went wrong during the process of importing, please try again.');
        }
    }else{
        //return experiment with errors which are to be presented in view
        $return_error = array();
        $return_warning = array();
        foreach($experiment as $name => $sheet){
            if(isset($sheet['validation'])){
                foreach ($sheet['validation']['error'] as $item){
                    array_push($return_error, $item);
                }
                foreach($sheet['validation']['warning'] as $item){
                    array_push($return_warning, $item);
                }
            }
        }
        //if(!empty($temp_interval_match_error)){   array_push($return_error, $temp_interval_match_error); }
        return array('status'=>3, 'message'=>'The file has invalid cells, please correct the file according to the following hints.',
                    'error' => $return_error, 'warning'=>$return_warning);
    }
}//end of fn do_import() 
```

请帮助定位问题。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:33:50.530

不太可能，但这可能是由您`$experiment['import_result']`在`if`上面的陈述中设置的方式引起的。例如 if`$sheet`未设置或为空，`$experiment['import_result']`将不会设置，因为没有`else`. 尝试添加额外的`else {$experiment['import_result'] = FALSE;}`.

```
foreach($experiment as $sheet){
    if(isset($sheet) && !empty($sheet)){
        if(isset($sheet['error']) && !empty($sheet['error'])){
            $experiment['import_result'] = FALSE;
        }elseif(isset($sheet['validation']['validation']) && $sheet['validation']['validation'] == 0){
            $experiment['import_result'] = FALSE;
        }else{
            $experiment['import_result'] = TRUE;
        }
    }
    else {$experiment['import_result'] = FALSE;} // added
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:48:56.747

问题解决了。我逐块删除代码，最后发现当我上传文件时，其中一条 if 语句被其上方的注释意外注释掉了。我想这可能是服务器有问题。奇怪的。

# objective-c - 如何在我的笔尖中建立与自定义属性的连接？

> ID：12994654
> 
> 赞同：1
> 
> 时间：2012-10-21T03:22:08.157
> 
> 标签：objective-c, nib, xcode4.5

我创建了一个自定义视图。它有一个委托，当它的某些按钮被按下时它会通知。

我将此添加到视图控制器的`viewDidLoad`：

```
self.myCustomView.delegate=self; 
```

到目前为止一切正常。

但这还不够酷。我想做表格视图样式，我可以直接从视图拖动到文件所有者，并且（ta-da！）它是自动设置的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:26:39.423

将`IBOutlet`关键字添加到`delegate`类的属性中：

```
@property (nonatomic, assign) IBOutlet id<MyViewDelegate> delegate; 
```

该`IBOutlet`关键字告诉 nib 编辑器让您与该属性建立连接。

你也可以这样说：

```
@property (nonatomic, assign) IBOutlet MyView *delegate; 
```

然后 IB 将只允许您将其连接到`MyView`. 但是协议或 id 更灵活。

**编辑：**由于专注于 IB，丢了 1 分

你说：

> 我创建了一个自定义视图。它有一个委托，当它的某些按钮被按下时它会通知。

接收按钮事件是视图控制器的角色，但有时委托将用于对某些事件进行更细粒度的控制。

一般来说，不要为作为主窗口的视图上的按钮按下创建委托，在这种情况下，您应该在 ViewController 中处理按钮事件。按钮位于父视图上，它将沿响应者链向上转发事件（您仍然需要将它们连接到目标）。我并不是说你永远不应该使用委托模式来按下按钮，但是，按钮有自己的连接，可以根据需要通过拖放操作在 IB 中查看控制器。但是有像你这样的情况是完全有效的。

# javascript - 如何在不查询服务器的情况下将图像调用到 DOM 中？

> ID：12994658
> 
> 赞同：0
> 
> 时间：2012-10-21T03:22:46.820
> 
> 标签：javascript, jquery, dom

给定一些图像（动画帧），我想预取它们，然后根据需要在网页上显示它们。

我尝试了几种预取方法，包括[一个漂亮的插件](http://alz.so/imageloader/)，但这是一个非常简单的方法：

```
<div class="animation-container"></div>

<div class="holding-container" style="display:none"></div>

<script>
$('.holding-container').append('<img src="Image1.png" />');
$('.holding-container').append('<img src="Image2.png" />');
</script> 
```

在 Firebug 或开发人员工具的网络选项卡中，我看到这些调用导致对服务器的查询，并且图像已成功获取。

现在，我想实际使用这些图像。这是一些非常简化的代码：

```
$('.animation-container').prepend('<img src="Image1.png"/>'); 
```

**这就是事情出轨的地方。**网络选项卡显示浏览器*再次*查询服务器（收到 304 NOT MODIFIED）。这导致图像显示前大约有 200 毫秒的延迟。为什么会发生这种情况，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:05:53.707

也许 CSS 精灵会帮助你。这些非常适合动画，如果您没有足够的图像编辑技能，可以使用大量免费的在线生成器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:26:41.797

您正在创建一个新的 DOM 对象，而不是重新使用预取的那个。

为每个图像添加一个 id 以唯一标识它 -

```
<div class="animation-container"></div>
<div class="holding-container" style="display:none"></div>
<script>
    $('.holding-container').append('<img src="Image1.png" id="img1" />');
    $('.holding-container').append('<img src="Image2.png" id="img2" />');
</script> 
```

然后使用选择器抓取元素，`detach()`它（就像`remove()`但保留信息，如果你想将它保存在你的容器中，你可以省略它），并将`prependTo()`它的放到你的容器中：

```
$('.holding-container #img1').detach().prependTo('.animation-container'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T04:14:14.253

您可以通过以下两种方式预加载图像：

[支持事件的图像预加载器 javascript](https://stackoverflow.com/questions/8264528/image-preloader-javascript-that-supports-events/8265310#8265310)

[有没有办法将图像异步加载到用户的缓存中？](https://stackoverflow.com/questions/8450068/is-there-a-way-to-load-images-to-users-cache-asynchronously/8450190#8450190)

在这两种情况下，这些都将图像预加载到缓存图像中。然后，当您在网页的其他任何地方使用这些图像 URL 时，它们将立即加载（从浏览器缓存中）。

# android - 将字符串从 android xml 布局文件提取到 strings.xml 文件的最简单方法是什么？

> ID：12994660
> 
> 赞同：4
> 
> 时间：2012-10-21T03:22:54.567
> 
> 标签：android, eclipse, android-layout

在 Eclipse 中，我导航到上下文菜单中的 Refactor 选项，但是当我右键单击字符串选择时无法选择它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:32:08.280

在字符串上按`CTRL`+ `1`，然后按“提取 Android 字符串”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:42:33.993

找到它：**ALT + SHIFT + A, S = 将 Android 字符串提取到 strings.xml 文件**

# arrays - C++ 新手 - 无法获得指向数组的指针以工作

> ID：12994664
> 
> 赞同：2
> 
> 时间：2012-10-21T03:23:31.277
> 
> 标签：arrays, pointers, cin

尝试创建指向用户输入的数组（字符串）的指针。

在这里，我在我的类中定义了我的指针和数组：

```
private:

char userWord[200];     // input word
char * userWordPtr; // Pointer to the beginning of the input word 
```

这是读取信息的函数：

```
void WordFont::inputWord()
{

    cout << "What word would you like to draw?\n"
         << "The useable characters are: A E I O U Y B C D L M N R S T\n" ;
    cout << "Please enter your word: ";
    cin.get(userWord, 200);
    cin.clear();
    cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');

    userWordPtr = &userWord;

} 
```

用户输入一个单词，我的代码根据单词的字母做一些事情（长 if-else 阶梯）。但是在将 * Ptr 传递给 if-else 阶梯时，当我增加指针的位置时，我无法让 if-else 阶梯识别空 (/0) 字符。使用“&”来引用 char 数组开头的地址时，我也遇到了错误。我无法弄清楚为什么会出现该错误，以及为什么下面的 if-else 梯子不会退出，直到 'i' 到达内存中具有 '/0' 字符的任何随机位置。如果我做一些像输入'AAA'这样简单的事情，它将远远超过'/0'字符所在的第4个位置。

这是循环：

```
void WordFont::buildOutputArray(char * Ptr)
{

    length = 0;
    bool switchLooper = true;
    int i = 0;

    do
    {
        if(*Ptr + i == 'a' || *Ptr + i == 'A')
            constructA();
        else if (*Ptr + i == 'e' || *Ptr + i == 'E')
            constructE();
        else if (*Ptr + i == 'i' || *Ptr + i == 'I')
            constructI();
        else if (*Ptr + i == 'o' || *Ptr + i == 'O')
            constructO();
        else if(*Ptr + i == 'u' || *Ptr + i == 'U')
            constructU();
        else if(*Ptr + i == 'b' || *Ptr + i == 'B')
            constructB();
        else if(*Ptr + i == 'c' || *Ptr + i == 'C')
            constructC();
        else if(*Ptr + i == 'd' || *Ptr + i == 'D')
            constructD();
        else if(*Ptr + i == 'l' || *Ptr + i == 'L')
            constructL();
        else if(*Ptr + i == 'm' || *Ptr + i == 'M')
            constructM();
        else if(*Ptr + i == 'n' || *Ptr + i == 'N')
            constructN();
        else if(*Ptr + i == 'r' || *Ptr + i == 'R')
            constructR();
        else if(*Ptr + i == 's' || *Ptr + i == 'S')
            constructS();
        else if(*Ptr + i == 't' || *Ptr + i == 'T')
            constructT();
        else if(*Ptr + i == '\0')
            switchLooper = false;
        i++;
    }while(switchLooper);

} 
```

这可能是一个简单的新手错误，我相信你会注意到很多其他问题，但我非常感谢任何帮助。

谢谢，汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T20:34:57.190

> 用户输入一个单词，我的代码根据单词的字母做一些事情（长 if-else 阶梯）。但是在将 * Ptr 传递给 if-else 阶梯时，当我增加指针的位置时，我无法让 if-else 阶梯识别空 (/0) 字符。

实际上，您正在使用`*Ptr + i`的是：

*   取消引用您的`Ptr`指针（您正在访问 指向的地址处的值`Ptr`）
*   然后您将添加`i`到地址中包含的值`Ptr`

*Serge*给了你答案，你必须用它`*(Ptr + i)`来获取那个地址的字符。

在这里，您正在移动“块”的`Ptr`指针。`i`

> 使用“&”来引用 char 数组开头的地址时，我也遇到了错误。我不知道为什么我会收到这个错误，

一个*char*数组（或其他）“就像”一个指针（有很多不同之处，但我让你很高兴发现它们），所以当你使用`str[i]`它时，它与`*(str + i)`.

> 以及为什么下面的 if-else 阶梯不会退出，直到 'i' 到达内存中具有 '/0' 字符的任何随机位置。如果我做一些像输入'AAA'这样简单的事情，它将远远超过'/0'字符所在的第4个位置。

你不应该再有这个问题了。

如果用户输入 200 个字符怎么办？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:50:43.113

虽然您这样做的样式不合适，但解决方法是将全部替换`*Ptr + i`为`*(Ptr +i)`. 我建议你阅读一些关于[tolower()](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rtref/tolowup.htm)和[stricmp()](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rtref/stricmp.htm)函数的文档

# c# - 预渲染母版页和 ViewState

> ID：12994667
> 
> 赞同：2
> 
> 时间：2012-10-21T03:23:46.633
> 
> 标签：c#, asp.net, viewstate, master, prerender

这是几乎不言自明的各种代码。代码隐藏中有一些视图状态的东西，然后有一个更新面板。当我将此添加到母版页引用的子页面中时，它会破坏我之前从用户控件中获得的所有以前工作的功能。
后面的子母版页代码：

```
 protected void Page_Load(object sender, EventArgs e)
        {
            try
            {
                if (!IsPostBack)
                {
                    GetBrands();
                    GetStyles();
                    GetColors();
                    this.BindItemsList();
                }
            }
            catch (Exception)
            { }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:39:16.330

尝试删除`UpdatePannel`. 如果这修复了您的代码，您将把问题隔离到您的实现`ViewState`中。问题`UpdatePannels`并不`ViewState`少见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:00:19.013

PreRender 在处理控制事件后触发。在 PreRender 期间添加的任何控件都将忽略所有与控件相关的事件。

我不知道这是否可能是您的问题的原因，因为您没有提供任何代码，但您可以尝试在 PageLoad 中执行您的逻辑。

PreRender 是修改控件外观或添加非事件相关标记的好地方。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-21T10:59:42.607

您需要覆盖母版页的 CreateChildControls 方法并在此方法中填充控件。此方法应用于在页面和服务器控件的类后面的代码中创建子控件。这应该可以解决未为填充控件恢复 Viewstate 的问题。此外，有时 Viewstate 恢复的问题可能在于您如何在 PopulateControls 方法中添加控件。您应该确保首先将容器控件（如面板等）添加到控件集合中，然后才将控件添加到此容器中。

在任何情况下，您都需要尝试这样的事情：

```
/// <summary>
/// Called by the ASP.NET page framework to notify server controls that use composition-based 
/// implementation to create any child controls they contain in preparation for posting back or rendering.
/// </summary>
protected override void CreateChildControls()
{
    base.CreateChildControls();
    PopulateControls();
} 
```

# backbone.js - 为什么它调用原始方法？

> ID：12994670
> 
> 赞同：0
> 
> 时间：2012-10-21T03:24:16.627
> 
> 标签：backbone.js, jasmine, sinon

我正在针对我的主干应用程序编写茉莉花规范。但是，我遇到了这个问题。不知道为什么我的间谍功能没有被调用。我想确保模型何时出现`changed`，它应该调用`#render`。

这是我的主干观点：

```
class App.Views.Main extends Backbone.View
  initialize: () ->
    @model.on("change", @render, this)

  render: () ->
    console.log('rendering')
    return 
```

这是我的茉莉花规格：

```
it "should render when change is triggered", ->
  renderSpy = sinon.spy(@view, 'render')
  @view.model.trigger('change')

  expect(renderSpy.called).toBeTruthy() 
```

让我感到困惑的另一件事是，当这个规范运行时，它实际上调用了原始方法。始终显示控制台日志。任何人都可以帮助我吗？

**更新**：

正如莱昂纳多在下面回答的那样，我通过以下更改进行了更改：

```
it "should render when reset is triggered", ->
  renderSpy = sinon.spy(App.Views.Main.prototype, 'render')
  @view.model.trigger('change')

  expect(@renderSpy.called).toBeTruthy()
  renderSpy.restore() 
```

它可以工作，但问题是它调用了原始方法。我只是想知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:37:14.883

我认为这与这里发生的情况相同：

[https://stackoverflow.com/a/9012788/603175](https://stackoverflow.com/a/9012788/603175)

基本上，您需要在执行执行事件侦听的构造函数之前创建间谍，该构造函数将函数绑定到“this”上下文。

# sql - 车辆识别号 (VIN) 设计

> ID：12994672
> 
> 赞同：7
> 
> 时间：2012-10-21T03:24:59.777
> 
> 标签：sql, database-design

我为不同的 OEM 设计了一些[车辆识别码 (VIN)](http://en.wikipedia.org/wiki/Vehicle_Identification_Number#Components_of_the_VIN)解码器。关于 VIN 号码的事情......尽管有些标准化，但每个 OEM 都可以重载字符位置代码并以不同方式对待它们，添加“额外”元数据（即星号指向 VIN 号码之外的更多数据）等等。尽管如此所有这一切，我已经能够构建几个不同的 OEM VIN 解码器，现在我正在尝试构建一个 GM VIN 解码器，这让我很头疼。

问题的要点是，GM 对车辆属性部分（位置 4、5、6、7）的处理方式不同，具体取决于它是卡车还是汽车。这是细分：

## 通用乘用车VIN故障

![通用汽车VIN](../Images/2fa44a24786dace3ac67656f5743f2d5.png)

## 通用卡车 VIN 故障

![通用卡车 VIN](../Images/60f7cb7cc449767728c1ee82adda35df.png)

通常我所做的是设计自己的粗略`ETL`流程，将数据导入 RDMBS - 每个表都与主要的 VIN 故障大致相关。例如，将有一个 WMI 表、EngineType 表、ModelYear 表、AssemblyPlant 表等。然后我构建一个视图，该视图连接一些上下文数据，这些数据可能直接从 VIN 号本身的字符代码中收集（例如某些车辆类型仅具有某些车辆发动机）。

要查找 VIN，只需使用 VIN 字符串的每个主要字符代码位置细分查询 VIEW。例如，*1FAFP53UX4A162757*的示例 VIN在不同 OEM 的 VIN 结构中分解如下：

```
| 管理信息系统 | 克制 | LineSeriesBody | 引擎 | 校验码 | 年份 | 工厂 | 序列 |
| 123 | 4 | 第567章 8 | 9 | 10 | 11 | 12-17 |
-------------------------------------------------- -------------------------------------------
| 1FA | F | P53 | 你 | X | 4 | 一个 | ... |

```

通用汽车为此投入了一把扳手……取决于是汽车还是卡车，字符代码位置意味着不同的东西。

我的意思的示例 - 下面的每个 ASCII 表都与 SQL 表相关。`etc..`意味着还有很多其他的列数据

### 乘用车

这是位置 4,5 的示例（对应于**车辆线/系列**）。这些确实结合在一起，VIN 源数据并没有真正区分位置 4 和 5，尽管上面显示了细分。

```
| 代码 (45)| 线 | 系列 | ETC..
--------------------------------------
| 遗传算法 | 别克 | 长曲棍球 | ETC..

```

..和位置 6 对应于**体型**

```
| 代码 (6) | 风格 | ETC..
--------------------------------------
| 1 | 轿跑车，2 门 | ETC..

```

### 卡车

..但对于卡车，结构完全不同。考虑位置 4 独立作为**总车辆重量限制 GVWR**。

```
| 代码 (4) | GVWR | ETC..
-------------------------------------------
| 大号 | 6000 磅 | ETC..

```

..和位置 5,6（**底盘/系列**）现在意味着类似于乘用车的位置 4,5：

```
| 代码 (56) | 线 | 系列 | ETC..
--------------------------------------
| 房车 | 别克 | 飞地 | ETC..

```

我正在寻找一种巧妙的方法来在关系设计中解决这个问题。我想在 VIN 被解码时返回一个通用结构——如果可能的话（即不为汽车和卡车返回不同的结构）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:12:05.000

根据您对我的评论的回答，即您是否可以通过使用其他值来识别车辆类型，一种可能的方法是拥有一个包含公共字段的主表和 2 个详细表，每个表都有适当的字段用于汽车或卡车。

大约类似于以下内容（这里我猜 WMI 是 PK）：

**主表**

```
| WMI | Restraint | Engine | CheckDigit | Year | Plant | Seq   |

| 123 | 4         | 8      | 9          | 10   | 11    | 12-17 | 
```

**汽车明细表**

```
| WMI | Veh Line | Series | Body Type |
| 123 | 2        | 3      | 4         | 
```

**卡车明细表**

```
| WMI | GWVR | Chassis  |Body Type |
| 123 | 7    | 8        | 9        | 
```

有了这个，您可以使用唯一的选择来检索所需的数据，如下所示：

```
Select *
  From
(
   Select M.*,
          C.*,
          Null GWVR,
          Null Chassis,
          Null Truck_Body_Type
     From Master_Table M
     Left Join Car_Table C
       on M.WMI = C.WMI
   Union
   Select M.*,
          Null Veh_Line,
          Null Series,
          Null Car_Body_Type
          T.*
     From Master_Table M
     Left Join Truck_Table T
       on M.WMI = T.WMI
) 
```

至于 DML SQL，您只需要在插入或更新句子之前控制您是否拥有汽车或卡车模型。

当然，您需要确保在汽车明细表或卡车明细表上，每个主行只存在一个明细。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:52:10.577

为什么不为解码定义这两个规则；只有一个会解决一个有效的结果。

# php - 无需刷新的 AJAX 密码更改

> ID：12994677
> 
> 赞同：0
> 
> 时间：2012-10-21T03:25:43.693
> 
> 标签：php, html, ajax, jquery, passwords

我正在尝试在我的网站中实现密码更改功能。我已经完成了所有密码更改脚本、验证等。但是现在我需要阻止页面进入脚本页面或刷新。当用户单击提交按钮时，除了显示消息`successfully changed`或`error`. 所以这是我的html：

```
<form id="change_Pass" action="" method="post">
    Current Password<input type="password" id="change_password" name="change_password"><br>
    New Password<input type="password" id="new_password" name="new_password"><br>
    Verify Password<input type="password" id="verify_password" name="verify_password"><br>
    <input type="submit" value="Submit" id="change_pass_submit">
</form> 
```

还有我的jQuery：

```
$('#change_pass_submit').click(function(){
    var $this = $(this);  
    $.ajax({
        data: $this.serialize(), // get the form data
        type: "POST", // GET or POST
        url: "/Private/change_password.php", // the file to call
        success: function() { // on success..
            //$('#success_div).html(response); // update the DIV
            alert("good");
        },
        error: function() { // on error..
            //$('#error_div).html(e); // update the DIV
            alert("bad");
        }
    });
    return false; //so it doesn't refresh when submitting the page
}); 
```

还有我的 php：

```
<?php
session_start();
require_once '../classes/Bcrypt.php';
ini_set('display_errors', 'On');
error_reporting(E_ALL | E_STRICT);
$usr = $_SESSION["username"];
$old_pwd = $_POST["change_password"];
$new_pwd = $_POST["new_password"];
$new_pwd = Bcrypt::hash($new_pwd);
try {
    $link = new PDO('mysql:host=*;dbname=*;charset=UTF-8','*','*');
    $query = "SELECT *
            FROM Conference
            WHERE Username = :un";

    $stmt = $link->prepare($query);

    $stmt->bindParam(':un', $usr);
    $stmt->execute();
    $row = $stmt->fetchAll();

    $hash = $row[0]["Password"];
    $is_correct = Bcrypt::check($old_pwd, $hash);
    if($is_correct) {
        $query = "UPDATE Conference
                SET `Password`=:new_pwd 
                WHERE Username = :usr";

        $stmt = $link->prepare($query);
        $stmt->bindParam(':new_pwd', $new_pwd);
        $stmt->bindParam(':usr', $usr);
        $stmt->execute();
        return true;
    } else return false;
} catch(PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
} 
```

但由于某种原因，当我点击提交按钮时，页面仍然转到`change_password.php`. 我不知道为什么，我看了这么多教程，我的代码与他们的一致，但由于某种原因，我的代码不会停留在同一页面上。我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:36:21.297

将您的处理程序绑定到表单的`submit`事件：

```
$(document).on('click', '#change_Pass', function() {
    var $this = $(this);  
    $.ajax({
        data: $this.serialize(), // get the form data
        type: "POST", // GET or POST
        url: "/Private/change_password.php", // the file to call
        success: function() { // on success..
            //$('#success_div).html(response); // update the DIV
            alert("good");
        },
        error: function() { // on error..
            //$('#error_div).html(e); // update the DIV
            alert("bad");
        }
    });

    return false; //so it doesn't refresh when submitting the page
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:37:06.850

而不是使用`$('#change_pass_submit').click(function()`，使用`$('#change_Pass').submit(function()`。

.click 仅在实际单击提交按钮时才起作用，即使用户按下回车键 .submit 也将起作用。

这应该可以解决您的错误，但未经测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T17:01:30.637

尝试放置 preventDefault(); 在 .submit 执行的函数的最后一行

```
 $(document).ready(function(){
            $( "#cambiar_pass_form" ).submit(function() {
                $.ajax({
                    ...
                    ...
                });
                event.preventDefault();
            });
        }); 
```

# html - 表格 - 顶部一排，底部一排

> ID：12994678
> 
> 赞同：0
> 
> 时间：2012-10-21T03:25:56.080
> 
> 标签：html, css

我有一张像这样的桌子：

```
<table>
    <tr>
        <td>This is at the top of the page</td>
    </tr>

    <tr>
        <td>This is at the bottom of the page</td>
    </tr>
</table> 
```

如何使第一行位于页面顶部，第二行位于页面底部？

我尝试使用`position:absolute`and `top:0px`，但它让我无法在表格中放置彩色背景和边框......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T04:30:20.817

使用 div 解决这个问题：

```
<div id="top"></div>
<div id="bottom"></div> 
```

CSS：

```
#top {
  position:absolute 
  top:0px;
  width:100%;
}
#bottom {
  position:absolute 
  bottom:0px;
  width:100%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T03:30:48.210

使用`TABLE`元素不是一个好主意。元素的使用`DIV`要好得多，因为您可以`DIV`根据需要调整元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T05:17:43.950

```
<table height="100%"> 
  <tr> 
    <td>This is at the top of the page</td> 
  </tr> 
  <tr> 
    <td height="100%"></td> 
  </tr> 
  <tr> 
    <td>This is at the bottom of the page</td> 
  </tr> 
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T05:26:51.087

我会继续Sirwan的回答，因为这是**正确**的方法！此外，现在 HTML5 已经涉足图片领域，您可以使用***<header>***和***<footer>***标签来实现您想要实现的目标。

*HEADER* : [http://www.w3schools.com/tags/tag_header.asp](http://www.w3schools.com/tags/tag_header.asp) *FOOTER* : [http://www.w3schools.com/tags/tag_footer.asp](http://www.w3schools.com/tags/tag_footer.asp)

# go - 结构切片！=它实现的接口切片？

> ID：12994679
> 
> 赞同：72
> 
> 时间：2012-10-21T03:26:10.450
> 
> 标签：go

我有一个接口`Model`，由 struct 实现`Person`。

要获取模型实例，我有以下辅助函数：

```
func newModel(c string) Model {
    switch c {
    case "person":
        return newPerson()
    }
    return nil
}

func newPerson() *Person {
    return &Person{}
} 
```

上述方法允许我返回一个正确类型的 Person 实例（以后可以使用相同的方法轻松添加新模型）。

当我试图做类似的事情来返回一片模型时，我得到了一个错误。代码：

```
func newModels(c string) []Model {
    switch c {
    case "person":
        return newPersons()
    }
    return nil
}

func newPersons() *[]Person {
    var models []Person
    return &models
} 
```

Go 抱怨：`cannot use newPersons() (type []Person) as type []Model in return argument`

我的目标是返回请求的任何模型类型的切片（无论是、、、、w `[]Person`/ e）。我错过了什么，如何正确实施这样的解决方案？`[]FutureModel``[]Terminator2000`

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-10-21T03:59:13.223

这与我刚刚回答的问题非常相似：[https ://stackoverflow.com/a/12990540/727643](https://stackoverflow.com/a/12990540/727643)

简短的回答是你是对的。结构切片不等于结构实现的接口切片。

A`[]Person`和 a`[]Model`具有不同的内存布局。这是因为它们是切片的类型具有不同的内存布局。A`Model`是一个接口值，这意味着在内存中它的大小是两个字。一个字用于类型信息，另一个用于数据。A`Person`是一个结构，其大小取决于它包含的字段。为了从 a 转换`[]Person`为 a `[]Model`，您需要遍历数组并对每个元素进行类型转换。

由于这种转换是一个 O(n) 操作并且会导致创建一个新切片，因此 Go 拒绝隐式执行此操作。您可以使用以下代码显式执行此操作。

```
models := make([]Model, len(persons))
for i, v := range persons {
    models[i] = Model(v)
}
return models 
```

正如[dskinner 指出的那样](https://stackoverflow.com/a/12994884/727643)，您很可能想要一个指针切片，而不是指向切片的指针。通常不需要指向切片的指针。

```
*[]Person        // pointer to slice
[]*Person        // slice of pointers 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-21T04:05:35.037

也许这是您的返回类型的问题`*[]Person`，实际上应该`[]*Person`如此引用切片的每个索引都是对 a 的引用`Person`，而切片`[]`本身就是对数组的引用。

查看以下示例：

```
package main

import (
    "fmt"
)

type Model interface {
    Name() string
}

type Person struct {}

func (p *Person) Name() string {
    return "Me"
}

func NewPersons() (models []*Person) {
    return models
}

func main() {
    var p Model
    p = new(Person)
    fmt.Println(p.Name())

    arr := NewPersons()
    arr = append(arr, new(Person))
    fmt.Println(arr[0].Name())
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-21T04:12:19.617

正如斯蒂芬已经回答了这个问题并且您是初学者，我强调提供建议。

使用 go 接口的一种更好的方法不是让构造函数返回接口，就像您可能从其他语言（如 java）中习惯的那样，而是为每个对象独立地设置一个构造函数，因为它们隐式地实现了接口。

代替

```
newModel(type string) Model { ... } 
```

你应该做

```
newPerson() *Person { ... }
newPolitician() *Politician { ... } 
```

with`Person`和`Politician`both 实现`Model`. 您仍然可以在接受a 的任何地方使用`Person`或使用 ，但您也可以实现其他接口。`Politician``Model`

使用您的方法，您将受到限制，`Model`直到您手动转换为另一种接口类型。

假设我有一个`Person`which implements the method`Walk()`和一个`Model`implements `ShowOff()`，以下将无法直接工作：

```
newModel("person").ShowOff()
newModel("person").Walk() // Does not compile, Model has no method Walk 
```

但是，这将：

```
newPerson().ShowOff()
newPerson().Walk() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-28T05:00:52.510

正如其他人已经回答的那样， []T 是一种独特的类型。我只想补充一点，可以使用一个简单的实用程序对它们进行一般转换。

```
import "reflect"

// Convert a slice or array of a specific type to array of interface{}
func ToIntf(s interface{}) []interface{} {
    v := reflect.ValueOf(s)
    // There is no need to check, we want to panic if it's not slice or array
    intf := make([]interface{}, v.Len())
    for i := 0; i < v.Len(); i++ {
        intf[i] = v.Index(i).Interface()
    }
    return intf
} 
```

现在，您可以像这样使用它：

```
ToIntf([]int{1,2,3}) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-21T03:58:56.363

类型 T 和 []T 是不同的类型，它们的方法也不同，即使满足相同的接口也是如此。IOW，每个满足 Model 的类型都必须自己实现 Model 的所有方法——方法接收者只能是一种特定类型。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-26T22:35:28.603

Even if Go's implementation allowed this, it's unfortunately unsound: You can't assign a `[]Person` to a variable of type `[]Model` because a `[]Model` has different capabilities. For example, suppose we also have `Animal` which implements `Model`:

```
var people []Person = ...
var models []Model = people // not allowed in real Go
models[0] = Animal{..} // ???
var person Person = people[0] // !!! 
```

If we allow line 2, then line 3 should also work because `models` can perfectly well store an `Animal`. And line 4 should still work because `people` stores `Person`s. But then we end up with a variable of type `Person` holding an `Animal`!

Java actually allows the equivalent of line 2, and it's widely considered a mistake. (The error is caught at run time; line 3 would throw an `ArrayStoreException`.)

# regex - 正则表达式帮助 - 仔细检查答案

> ID：12994687
> 
> 赞同：0
> 
> 时间：2012-10-21T03:27:02.427
> 
> 标签：regex

我仍然是正则表达式的菜鸟，但是有人会仔细检查我的答案是否正确吗？

问题是：指示每个给定的输入字符串是否属于正则表达式定义的语言`(a | empty) b (a | b)* a (b)*`

Empty = 翻转 3 左右（空字符串）

```
(a) input string: ababaa
Answer: Does not belong to the regex
because if tested, turns out to be ababab

(b) input string: aabbaa
Answer: Does not belong to the regex
Because if tested, turns out to be ab(b or a)* ab 
```

这些答案正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:53:46.517

第二个字符串不属于该语言。如果您查看正则表达式，您可以看到 b 必须是第一个字符（如果 (a|empty) 选择空），或者必须是第二个字符（如果 (a|empty) 选择 a）。由于字符串以aa开头，因此无法匹配。

第一个字符串匹配。只需尝试找出每个选择点，以便获得提供的字符串。从外到内工作可能会有所帮助，因为 (a|b)* 是正则表达式中最灵活的部分 - 即您可以匹配任何您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:32:17.483

您可以通过简单地运行它们来仔细检查您的答案。这是一个可以做到这一点的网站：[http ://regex.larsolavtorvik.com/](http://regex.larsolavtorvik.com/)

# php - 在 wordpress 中获取父类别的名称

> ID：12994689
> 
> 赞同：1
> 
> 时间：2012-10-21T03:27:03.260
> 
> 标签：php, wordpress

我有属于父类别（国家）的子类别（城市）。我得到一个类别（城市 - 国家）列表，如下所示：

```
 $categor = $wpdb->get_results("select * from $wpdb->terms c,$wpdb->term_taxonomy tt  where tt.term_id=c.term_id and tt.taxonomy='hotelcategory' and c.name != 'Uncategorized' and c.name != 'Blog' $substr order by c.name");

for($i=0;$i<count($categor);$i++)
    {
 echo '"'.$categor[$i]->name.' - '.$categor[$i]->parent.'",';
    } 
```

我在 jquery 自动完成中使用检索到的数据，我可以获取父类别 ID 但不能获取名称。

问题是例如有许多名为“巴黎”的城市，所以当我输入巴黎时，我会得到 8-9 个同名的城市。（图片1）我想做的是在旁边加上他们的父类别名称类别。（图片2） [http://s7.postimage.org/k85dhd4sr/catn.jpg](http://s7.postimage.org/k85dhd4sr/catn.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:07:30.180

您只有父术语的 ID，因此如果您想要术语的实际名称，则必须获取它。一种方法是简单地再次为`parent`ID 加入术语表：

```
$categor = $wpdb->get_results( "select c.*,tt.*,pc.name as parent_name 
    from $wpdb->terms c,$wpdb->term_taxonomy tt,$wpdb->terms pc
    where
        tt.term_id=c.term_id and tt.parent=pc.term_id 
        and tt.taxonomy='hotelcategory' and c.name != 'Uncategorized' 
        and c.name != 'Blog' $substr order by c.name");

// I have optimized the loop a bit. If you really need the index you can leave
// it as it is. If you don't need the index I suggest you change that to a
// foreach loop
for($i=0,$n=count($categor);$i<$n;$i++)
{
    echo '"'.$categor[$i]->name.' - '.$categor[$i]->parent_name.'",<br />';
} 
```

没有任何 SQL 的替代解决方案可能如下所示：

```
$excludes = array();

// build the "exclude" array. This step is necessary because
// get_terms expects the ID's of the terms to be excluded
foreach(array('Uncategorized', 'Blog') as $termName) {
    $term = get_term_by('name', $termName, 'hotelcategory');
    if($term) {
        $excludes[] = $term->term_id;
    }
}

$args = array(
    'hide_empty' => false,
    'exclude' => $excludes,
    'name__like' => 'Paris', // replace this with your search term here
);

$categor = get_terms('hotelcategory', $args);

foreach($categor as $cat)
{
    // look up the parent
    $parent = get_term_by('id', $cat->parent, $cat->taxonomy);
    echo '"'.$cat->name.' - '.($parent ? $parent->name : '-').'",<br />';
} 
```

诚然，这个解决方案有点冗长，但您不必担心 SQL 或数据库布局。

# c# - 在 SQL Server 中插入更新删除触发器

> ID：12994694
> 
> 赞同：-2
> 
> 时间：2012-10-21T03:28:03.303
> 
> 标签：c#, sql-server-2008, triggers

我有一个 Windows 申请表。该表被调用`messages`，每当用户插入更新或删除消息时，日期/时间戳都存储在列中`UserAction`。

应检索此列信息并将其作为链接显示在 UI 中。单击该链接有一个动作，该链接应被视为已读。

有人可以帮我提出一些想法来实现这一行动吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:43:20.753

你可以尝试这样的事情：

```
CREATE TRIGGER dbo.trMessagesUpdateTimeStamp
ON dbo.Messages
FOR INSERT, UPDATE, DELETE 
AS 

  UDPATE dbo.Messages
  SET UserAction = GETDATE()
  FROM Inserted i
  WHERE dbo.YourTableHere.ID = i.ID 
```

检查点：

*   这种`INSERT`情况可以更容易地通过列`DEFAULT`上的约束来处理`UserAction`- 这样，在`INSERT`定义的默认值（例如`GETDATE()`）上将被插入

*   您需要能够将`Inserted`包含由最后一条语句修改的所有行（这可以是**多**行）的伪表与该`Messages`表连接 - 我在这里假设您有某种`ID`列用作主键打开`Messages`- 根据需要进行调整。

这处理了故事的数据库部分 - 从你的问题中我不太确定你想在 UI 中做什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:39:46.373

我不确定如何从数据库触发事件并在 UI 中显示详细信息，但我认为以下是可行的：

1.  使用代码在表中添加`INSERT/DELETE`触发器以在表中插入数据`UserAction`。
2.  构建一个`UserAction`从`UI`.
3.  您可能希望刷新您的以在特定时间间隔`UI`刷新数据库中的数据。`UserAction`

这样，您的 UI 将以`UserAction`特定间隔轮询任何更改并使用刷新的数据刷新页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T03:45:30.903

您可以使用[Query Notifications](http://msdn.microsoft.com/en-us/library/ms175110%28v=sql.105%29.aspx)，尽管可以监控的内容有一些限制。

> SQL Server 2005 引入了查询通知，这是一种允许应用程序在查询结果发生变化时向 SQL Server 请求通知的新功能。查询通知允许程序员设计仅在应用程序先前检索的信息发生更改时才查询数据库的应用程序。

此功能通过[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)类公开。作为评估查询通知是否适合您的一部分，您应该查看*备注部分：*

> `SqlDependency`被设计用于 ASP.NET 或中间层服务，其中有相对少量的服务器对数据库具有活动的依赖关系。它不是为在客户端应用程序中使用而设计的，在客户端应用程序中，成百上千的客户端计算机将为`SqlDependency`单个数据库服务器设置对象。如果您正在开发的应用程序在数据更改时需要可靠的亚秒级通知，请查看SQL Server 联机丛书中的“*规划通知*”主题中的规划*有效的查询通知策略*和*查询通知的替代方案部分。*

# javascript - javascript - 跟踪滚动事件

> ID：12994695
> 
> 赞同：1
> 
> 时间：2012-10-21T03:28:17.200
> 
> 标签：javascript, jquery, html

我有一个流氓滚动事件，每次我使用 Ajax 加载 div 元素时，它都会自动将我的页面滚动到顶部。我该如何追踪？我已经尝试在滚动事件处理程序中设置断点并查看调用堆栈，但这并没有给我任何有用的东西，因为它只是显示它来自 jquery，但我有兴趣知道什么 DOM 元素上的什么事件导致了滚动。

一点背景知识，当单击 div 元素（onclick）时，我正在使用 Ajax 加载 div 元素。注意这不是锚！！但每当我靠近或位于页面底部时，在加载 div 元素并将其添加到页面后，页面会一直滚动到顶部。真的很烦人，并试图追踪启动该流氓滚动的元素......

感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:58:38.167

如果您不介意 jQuery 插件，请尝试查看[航点插件，这个插件非常适合跟踪/处理滚动](http://imakewebthings.com/jquery-waypoints/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T04:04:49.990

如果我理解得很好，你需要一个类似的代码，在这段代码中，当用户（通过滚动）距离最后一个元素 4000 像素（在本例中为 div.newDeal：最后）（是一个很长的网络）。

```
$(document).ready(function() {

//global variable in this script to test if I already made the request ajax ( I dont 
//want to make continious ajax request)
var loaded=false;

$(window).bind('scroll', handlerScroll); //attach event to the scroll

})//end document ready

//FIRE AUTOSCROLL (FIRE REQUEST AJAX)
//*************************************

var handlerScroll=function (){

    //get position of the scroll
    var space=$('#listdeals div.newDeal:last').offset().top - $(window).scrollTop();
    //if that distance is less than (or the middle, or the bottom). fire the request ajax
    if  (space<= 4000  &&     jQuery('div.previousDeal').size()==0){  

        //disable scroll event
        $(window).unbind();

        //
        //build data post
        //
        var  parameters="actionAutoscroll=true&"+.........;

        //MAKE REQUEST AJAX
        //********************

        $.ajax({  
            url: "/offers",  
            type:'POST',  
            data: parameters,   
            success: process_previousDeals       
        });  //end ajax

        return false;

    }
}//end if  load previous deals depending of scroll

}//end handler

function process_previousDeals(results){
 //inject new content in the page
} 
```

# css - Disqus 的配色方案如何与主机网页融为一体？

> ID：12994696
> 
> 赞同：2
> 
> 时间：2012-10-21T03:28:18.523
> 
> 标签：css, disqus

我正在使用 Octopress，它使用 Disqus 进行评论。我最近从浅色方案切换到深色方案。令我惊喜的是，Disqus 设法更改其配色方案以融入新主题。Disqus 是如何做到这一点的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T05:16:49.377

[这是他们网站](http://help.disqus.com/customer/portal/articles/466250-css-customization-troubleshooting)上的引述：

> 在 Disqus 2012 中，配色方案和链接颜色都是根据您网站的样式表自动选择的。有关如何继承这些元素的更多信息，请参阅[Disqus 2012 外观调整](http://help.disqus.com/customer/portal/articles/545277-disqus-2012-appearance-tweaks)。

从上面的链接页面：

> 根据您网站的样式表自动选择浅色或深色配色方案。
> 
> ## 配色方案是如何确定的？
> 
> *   当 Disqus 从您的站点继承的文本颜色具有 >= 50% 的灰色对比度时，将加载灯光方案：在 color:`#000000`和 color:之间`#787878`；
> *   在所有其他实例中加载暗方案。

[Disqus 2012 Appearance Tweaks 页面](http://help.disqus.com/customer/portal/articles/545277-disqus-2012-appearance-tweaks)上还显示了有关如何覆盖继承的配色方案的说明。

# php - 我在生成链接的 php 代码中缺少什么？

> ID：12994699
> 
> 赞同：0
> 
> 时间：2012-10-21T03:28:50.027
> 
> 标签：php

我正在尝试使用 php 生成 300 个串行链接，非常困惑请帮助我缺少什么。

```
$i         = 0;
$c         = 300;
do {
    $i++;
    echo "<a href=http://deewayz.in/user/" . $i . "/><img src="http://deewayz.in/images/user/" . $i . "/profile_q.jpg" border=0></a>";
} while ($c > $i); 
```

**我想要的输出是：**

```
<a href=http://deewayz.in/user/1/>
<img src="http://deewayz.in/images/user/1/profile_q.jpg" border=0></a>
<a href=http://deewayz.in/user/2/>
<img src="http://deewayz.in/images/user/2/profile_q.jpg" border=0></a>

so on.... 
```

错误：

解析错误：语法错误，意外的 'http' (T_STRING)，期待 ',' 或 ';'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:33:51.280

```
 echo "<a href='http://deewayz.in/user/ $i/'><img src='http://deewayz.in/images/user/$i/profile_q.jpg' border=0></a>"; 
```

php在双引号内自动解析变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:34:13.387

您必须转义引号内的引号：

```
echo "<a href=http://deewayz.in/user/" . $i . "/><img src=\"http://deewayz.in/images/user/" . $i . "/profile_q.jpg\" border=0></a>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T03:34:40.553

首先，我会将您作为循环的内容更改为

```
 do {
$i++;
echo "<a href='http://deewayz.in/user/" . $i . "'/><img src='http://deewayz.in/images/user/" . $i . "/profile_q.jpg' border=0></a>";
 } while ($c > $v); 
```

# database - 为什么关系集很重要？

> ID：12994700
> 
> 赞同：0
> 
> 时间：2012-10-21T03:28:59.777
> 
> 标签：database, database-design, relational-database

一个朋友正在开发一个网站，并且必须使用SQL制作一个数据库。他问为什么需要“has-a”或“is-a”关系，因为您可以获取一个实体集的主键并将其放在另一个适当的实体集中（反之亦然）以查找关系。

我无法回答这个问题，因为我刚刚被告知关系集就是数据库的工作方式。

编辑：我不想进入规范化。他指出，信息在关系集中被复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:54:42.257

您的问题将两个不同的抽象级别混合在一起，即概念级别和逻辑级别。

在概念层面，人们对描述所提议数据库的信息需求感兴趣。在不将描述偏向一种或另一种解决方案的情况下，这样做很有用。对此有用的一个模型是实体关系 (ER) 模型。在此模型中，主题被分解为实体（主题）和这些实体之间的关系。所有数据都被视为描述实体之一或关系之一的某些方面。

“Is-a”和“has-a”关系在这个抽象层次上是相关的。在这个级别，关系被识别，但没有被实施。

After creating a conceptual model of the database, but before creating the database itself, it's useful to go through a logical design phase, resulting in a logical model of the database. If the database is to be relational, it's useful to make the logical model a relational one. The relational model is the next level of abstraction.

This is where primary keys and foreign keys come in. These keys implement the relationships that were identified at the conceptual stage. This is how the relational model implements relationships. At this stage, you get involved with design issues like junction tables, table composition, and normalization.

In addition to the conceptual level and the logical level, there are the physical level and the script level. But these are outside the scope of your question.

这两种关系是待解决问题的特征。对主键的外键引用是建议解决方案的特点。

# c - 在结构中分配结构数组 (C)

> ID：12994701
> 
> 赞同：0
> 
> 时间：2012-10-21T03:29:13.397
> 
> 标签：c, malloc

我很难找到这个问题的答案；我在网上找到了类似的例子，但没有一个能解决我的问题。

我有一个`struct`用于公司数据的 Company，还有一个`struct`用于公司集合的 Consortium。第二个`struct`将包含第一个的可变长度数组`struct`，即公司数据`struct`。可变长度数组的元素数量取决于联盟中公司的数量。

我想动态分配所需的任何东西，但我有点迷失了。这些是结构：

```
typedef struct {
    char  code[];
    double sharePrice;
    int numShares;
    double totalVal;
    double totalDebts;
} Company;

typedef struct {
    int numCore;
    int numAssoc;
    Company core[];
    Company assoc[];
} Consortium; 
```

核心公司会有一些，而这个数量就是财团中核心阵列的规模`struct`。联营公司也是如此。

我想出了这个表达，但我不确定我错过了什么：

```
Consortium *consort=((Consortium*)malloc((numCore+numAssoc)*(sizeof(Consortium)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T03:50:08.983

您需要使用指针并分别分配数组：

```
typedef struct
{
    char  *code;
    double sharePrice;
    int numShares;
    double totalVal;
    double totalDebts;
} Company;

typedef struct
{
    int numCore;
    int numAssoc;
    Company *core;
    Company *assoc;
} Consortium;

Consortium *c = malloc(sizeof(*c));    // Error check
c->numCore = 4;
c->core = malloc(sizeof(*c->core) * c->numCore);    // Error check
c->numAssoc = 3;
c->assoc = malloc(sizeof(*c->assoc) * c->numAssoc);    // Error check

for (int i = 0; i < c->numCore; i++)
    c->core[i].code = malloc(32);    // Error check

for (int i = 0; i < c->numAssoc; i++)
    c->assoc[i].code = malloc(32);    // Error check

// Worry about other data member initializations! 
```

将`Company`类型修改为：

```
typedef struct
{
    char   code[32];
    double sharePrice;
    int    numShares;
    double totalVal;
    double totalDebts;
} Company; 
```

这节省了分配代码元素的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:56:47.653

您可能会认为您使 Consortium 结构更简单一些。由于您对每种类型、core 和 assoc 都有计数，因此您可以只有一个数组，其中第一部分用于 core，第二部分用于 assoc。

因此，您的结构将类似于以下源代码（尚未编译，只是记下而不是经过测试，因此请注意）：

```
typedef struct {
    int numCore;    // number of core companies, first part of m_companies
    int numAssoc;   // number of assoc companies, second part of m_companies
    Company m_companies[1];
} Consortium; 
```

然后，您将通过以下方式创建您的实际数据结构：

```
Consortium *makeConsortium (int numCore, int numAssoc) {
  Consortium *pConsortium = malloc (sizeof(Consortium) + sizeof(Company) * (numCore, numAssoc));
  if (pConsortium) {
      pConsortium->numCore = numCore;
      pConsortium->numAssoc = numAssoc;
  }
  return pConsortium;
} 
```

在此之后，您可以通过一些指示成功与否的函数来填写它：

```
int addCompanyCore (Consortium *pConsortium, int index, Company *pCompany) {
  int iRetStatus = 0;
  if (pConsortium && index < pConsortium->numCore) {
    pConsortium->m_companies[index] = *pCompany;
    iRetStatus = 1;
  }
  return iRetStatus;
}
int addCompanyAssoc (Consortium *pConsortium, int index, Company *pCompany) {
  int iRetStatus = 0;
  if (pConsortium && index < pConsortium->numAssoc) {
    index += pConsortium->numCore;
    pConsortium->m_companies[index] = *pCompany;
    iRetStatus = 1;
  }
  return iRetStatus;
} 
```

然后您将使用另一组辅助函数访问它们。

```
Company  *getCompanyCore (Consortium *pConsortium, int index) {
  Company *pCompany = 0;
  if (pConsortium && index < pConsortium->numCore) {
    pCompany = pConsortium->m_companies + index;
  }
  return pCompany;
}
Company * getCompanyAssoc (Consortium *pConsortium, int index) {
  Company *pCompany = 0;
  if (pConsortium && index < pConsortium->numAssoc) {
    index += pConsortium->numCore;
    pCompany = pConsortium->m_companies + index;
  }
  return pCompany;
} 
```

# javascript - 在angularjs中如何访问触发事件的元素？

> ID：12994710
> 
> 赞同：94
> 
> 时间：2012-10-21T03:31:05.300
> 
> 标签：javascript, angularjs

我在我的网络应用程序中同时使用 Bootstrap 和 AngularJS。我很难让两者一起工作。

我有一个元素，它具有属性`data-provide="typeahead"`

```
<input id="searchText" ng-model="searchText" type="text"
       class="input-medium search-query" placeholder="title"
       data-provide="typeahead" ng-change="updateTypeahead()" /> 
```

我想`data-source`在用户在字段中输入时更新属性。该函数`updateTypeahead`被正确触发，但我无权访问触发事件的元素，除非我使用`$('#searchText')`jQuery 方式，而不是 AngularJS 方式。

让 AngularJS 与旧式 JS 模块一起工作的最佳方法是什么。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-02-13T21:59:52.573

获取触发事件的元素的一般 Angular 方法是编写指令并将 bind() 写入所需的事件：

```
app.directive('myChange', function() {
  return function(scope, element) {
    element.bind('change', function() {
      alert('change on ' + element);
    });
  };
}); 
```

或使用 DDO（根据下面@tpartee 的评论）：

```
app.directive('myChange', function() {
  return { 
    link:  function link(scope, element) {
      element.bind('change', function() {
        alert('change on ' + element);
      });
    }
  }
}); 
```

上述指令可以按如下方式使用：

```
<input id="searchText" ng-model="searchText" type="text" my-change> 
```

[笨蛋](http://plnkr.co/edit/QcxS7Ta3U7mHmlcGAtac?p=preview)。

在文本字段中输入，然后离开/模糊。更改回调函数将触发。在该回调函数中，您可以访问`element`.

一些内置指令支持传递 $event 对象。例如，ng-*click、ng-Mouse*。请注意，ng-change 不支持此事件。

虽然您可以通过 $event 对象获取元素：

```
<button ng-click="clickit($event)">Hello</button>

$scope.clickit = function(e) {
    var elem = angular.element(e.srcElement);
    ... 
```

这“与 Angular 方式背道而驰” [——Misko](https://groups.google.com/d/msg/angular/SYglWP_x7ew/lFtb75NWNWUJ)。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-10-21T17:13:51.293

```
 updateTypeahead(this) 
```

不会将 DOM 元素传递给函数`updateTypeahead(this)`。这里`this`将提到范围。~~如果要访问 DOM 元素，请使用`updateTypeahead($event)`. 在回调函数中，您可以通过`event.target`.~~

> 请注意：ng-change 函数不允许将 $event 作为变量传递。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-08T12:41:05.717

你可以很容易地像第**一次在元素上写事件一样**

```
ng-focus="myfunction(this)" 
```

并**在您的 js 文件**中，如下所示

```
$scope.myfunction= function (msg, $event) {
    var el = event.target
    console.log(el);
} 
```

我也用过。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-01T13:00:51.800

如果您不想为此问题创建另一个指令，则可以在控制器中使用 $element 解决方案：

```
appControllers.controller('YourCtrl', ['$scope', '$timeout', '$element',
        function($scope, $timeout, $element) {

    $scope.updateTypeahead = function() {
       // ... some logic here
       $timeout(function() {
           $element[0].getElementsByClassName('search-query')[0].focus();
           // if you have unique id you can use $window instead of $element:
           // $window.document.getElementById('searchText').focus();
       });
    }
}]); 
```

这将适用于**ng-change**：

```
<input id="searchText" type="text" class="search-query" ng-change="updateTypeahead()" ng-model="searchText" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-27T06:27:35.857

如果你想要 ng-model 值，如果你可以在触发事件中这样写：$scope.searchText

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-12T06:09:38.850

我不确定您使用的是哪个版本，但是很久以前就有人问过这个问题。目前使用 Angular 1.5，我可以使用[Lodash](https://lodash.com/docs/)`ng-keypress`中的事件和`debounce`函数来模拟类似的行为，所以我可以捕获 $event`ng-change`

```
<input type="text" ng-keypress="edit($event)" ng-model="myModel"> 
```

> $scope.edit = _.debounce(function ($event) { console.log("$event", $event) }, 800)

# mysql - Match() Against() 使用连接的列

> ID：12994716
> 
> 赞同：0
> 
> 时间：2012-10-21T03:31:41.840
> 
> 标签：mysql, sql, full-text-search

我有 3 个表，t1、t2 和 t3，如下所示：

```
t1
___
t1id
name
address
type

t2
___
t2id
title

t3
____
t3id
t1id
t2id 
```

我有一个关于 t1 的全文索引，涵盖`name`、`address`和`type`。

我必须做什么才能使以下查询起作用？只是添加全文索引是`t2.title`行不通的，对吗？

```
SELECT t1.id, t1.name,MATCH(t1.name,t1.address,t1.type,t2.title) AGAINST ('query') as rank 
FROM t1
LEFT OUTER JOIN t3 ON t1.t1id = t3.t1id
LEFT OUTER JOIN t2 ON t3.t2id = t2.t2id
WHERE MATCH(t1.name,t1.address,t1.type,t2.title) AGAINST('query' IN NATURAL LANGUAGE MODE WITH QUERY EXPANSION) 
HAVING rank > 0.2 
ORDER BY rank DESC 
```

[http://sqlfiddle.com/#!2/a0a59/7](http://sqlfiddle.com/#!2/a0a59/7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:24:09.270

如[全文限制中所述](http://dev.mysql.com/doc/en/fulltext-restrictions.html)：

> [`MATCH()`](http://dev.mysql.com/doc/en/fulltext-search.html#function_match)列列表必须与表的某些`FULLTEXT`索引定义中的列列表完全匹配，除非这[`MATCH()`](http://dev.mysql.com/doc/en/fulltext-search.html#function_match)是`IN BOOLEAN MODE`. 布尔模式搜索可以在非索引列上完成，尽管它们可能很慢。

您可以改为组合多个`MATCH()`表达式：

```
SELECT   t1.id, t1.name,
         MATCH(t1.name, t1.address, t1.type) AGAINST ('query')
       + MATCH(t2.title                    ) AGAINST ('query')
      AS rank
FROM     t1 LEFT JOIN t3 USING (t1id)
            LEFT JOIN t2 USING (t2id)
WHERE    MATCH(t1.name, t1.address, t1.type) AGAINST ('query')
       + MATCH(t2.title                    ) AGAINST ('query')
       > 0.2
ORDER BY rank DESC 
```

# android - 安卓应用黑屏

> ID：12994717
> 
> 赞同：4
> 
> 时间：2012-10-21T03:31:58.737
> 
> 标签：android, cordova, splash-screen

我为 Android 应用程序添加了启动画面。它会显示，但在显示启动画面后会显示黑屏两秒钟。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:06:13.670

根据您的标签，我假设您面临 Android Phonegap 应用程序的问题。

您必须在设备就绪时关闭启动画面，而不是在 loadUrl 方法中给出特定时间。

代码片段：

```
super.setIntegerProperty("splashscreen", R.drawable.splash); // Display splash screen for android
this.setIntegerProperty("loadUrlTimeoutValue", 70000);
super.loadUrl("file:///android_asset/www/index.html",10000);// Give max time here 
```

在 Phonegap onDeviceReady 方法中隐藏启动画面：

```
document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
        cordova.exec(null, null, "SplashScreen", "hide", [])

    } 
```

# java - 你如何使用计时器在android中制作秒表？

> ID：12994731
> 
> 赞同：2
> 
> 时间：2012-10-21T03:34:45.750
> 
> 标签：java, android, stopwatch

我正在尝试为 android 制作一个秒表作为记分板应用程序的一部分问题是我不确定如何使用它`chronometer to start, stop, then resume`从停止或重置为 0 的时间开始。唯一的问题是我不确定如何正确使用`setBase()`和`getBase()`方法。

```
public class MainActivity extends Activity {

    int homecount, awaycount, minutes, seconds;
    TextView home, away;
    Button stop, start, reset, addhome, subhome, addaway, subaway;
    TextView time;
    public boolean running;

    Chronometer MyChronometer;
    long startTime, stopTime;
    running = false;
    stopTime = 0;
    MyChronometer = (Chronometer) findViewById(R.id.timer);

    start.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            ((Chronometer) findViewById(R.id.timer)).start();
            startTime=System.currentTimeMillis();
            running = true;
        }
    });

    stop.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            ((Chronometer) findViewById(R.id.timer)).stop();
            stopTime=System.currentTimeMillis();
            running = false;
        }
    });

    reset.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:08:22.410

你有变量`MyChronometer`。每次要启动或停止时都使用它。

此外，在初始化之后，您应该立即运行`MyChronometer.setBase(SystemClock.elapsedRealtime());`. 有关更多详细信息，请阅读文档：[Chronometer](http://developer.android.com/reference/android/widget/Chronometer.html#setBase%28long%29)和[SystemClock](http://developer.android.com/reference/android/os/SystemClock.html#elapsedRealtime%28%29)。

# sharepoint - 我可以用另一个值更新 Sharepoint 中的修改者值吗？

> ID：12994733
> 
> 赞同：0
> 
> 时间：2012-10-21T03:34:58.450
> 
> 标签：sharepoint

在 Sharepoint 文档库中，我有一些带有版本历史记录的文档。在 C# 中，我可以获取文档的版本历史并更新用户吗？

文档的版本历史是这样的：

```
Data                Modified By
----                -----------
doc1 changed        User X
some text           User X 
```

使用 C#，我可以用另一个用户更新用户修改的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:12:06.643

我现在在猜测，但我认为应该可以使用对象模型修改此值而没有任何问题。只需在您的代码中使用您喜欢的值 ([UserId];#[SERVER\LoginName]) 设置它，而不是使用`Update`方法，而是使用“SystemUpdate”。我很确定它适用于列表，没有在文档库上测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:37:58.157

假设您在 oListItem 中有列表项，您需要使用 FieldUserValue 对象设置 ListItem 字段的编辑器：

```
FieldUserValue fldUser = new FieldUserValue();
fldUser.LookupId = User.Id;
clientContext.Load(fldUser);
clientContext.ExecuteQuery();//or use another way to get your user

oListItem["Editor"] = fldUser; 
```

# apache - 在 URL 中添加 &

> ID：12994734
> 
> 赞同：0
> 
> 时间：2012-10-21T03:35:04.453
> 
> 标签：apache, .htaccess, url-rewriting

由于 url 中缺少特殊字符“&”，我收到 404 错误。因此我想从

[http://www.example.com/option=com_rplview=propertyshowpid=5127](http://www.example.com/option=com_rplview=propertyshowpid=5127)

至

[http://www.example.com/option=com_rpl&view=propertyshow&pid=5127](http://www.example.com/option=com_rpl&view=propertyshow&pid=5127)

我该如何使用 .htaccess

谢谢，R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:40:12.263

看起来你错过了？来自除 & 之外的查询字符串。假设您只想匹配这个确切的 URL (pid=5127) -

```
RewriteEngine On
RewriteBase /
RewriteRule (option=com_rpl)(view=propertyshow)(pid=5127) /?$1&$2&$3 [R=301,L] 
```

如果您想匹配任何`pid`1 到 4 位数长的值

```
RewriteEngine On
RewriteBase /
RewriteRule (option=com_rpl)(view=propertyshow)(pid=\d{1,4}) /?$1&$2&$3 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:41:02.223

Url 将 amersand (&) 编码为`%26`正确的方法。`replace & by %26`

# sql - 将系列（行？）编号添加到现有列数据的末尾

> ID：12994735
> 
> 赞同：-1
> 
> 时间：2012-10-21T03:35:58.483
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有一个大表，其中有一列包含相同的字符串数据“Dummy”。我需要在该字符串的末尾添加一个顺序计数以使其唯一。IE：

```
Dummy1
Dummy2
Dummy3 
```

对于我的生活，我无法做到这一点。我不想要一个新列，也不想要一个新表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:02:49.127

尝试这个

```
 select columnname + ' ' +  rank() OVER (ORDER BY columnname) as data
   from tablename 
```

# c# - 保存用户消息的静态字典

> ID：12994741
> 
> 赞同：2
> 
> 时间：2012-10-21T03:37:13.207
> 
> 标签：c#, asp.net-mvc, dictionary, static, queue

我创建了一个静态类来保存用户消息，例如“项目成功添加”或“密码成功更改”等。类内部是一个包含所有消息的静态字典。字典的键是 UserId。然后我有一个在 _Layout.cshtml 中呈现的动作，这样即使消息被重定向到页面外，它们也会跟随用户。

例如，我可能允许用户“添加”一个项目，然后一旦成功添加该项目，它将重定向到该项目的列表页面，然后显示消息“项目已成功添加”。

这在我部署到我的生产站点之前效果很好，我注意到消息“滞后”。我会添加一个项目，然后它会重定向到列表页面，但不会显示消息。然后我将导航到应用程序中的其他位置，然后该消息将显示在该页面上。

任何想法为什么会发生这种情况？

这是我的 UserMessageManager 的代码

```
public static class UserMessageManager
{
    private static readonly Dictionary<int, Queue<UserMessage>> UserMessages = new Dictionary<int, Queue<UserMessage>>();

    public static void Add(int userId, string message)
    {
        if (string.IsNullOrWhiteSpace(message))
            return;

        if (!UserMessages.Keys.Contains(userId))
        {
            UserMessages.Add(userId, new Queue<UserMessage>());
        }

        UserMessages[userId].Enqueue(new UserMessage { Message = message});
    }

    public static List<UserMessage> Get(int userId)
    {
        if (!UserMessages.Keys.Contains(userId))
        {
            UserMessages.Add(userId, new Queue<UserMessage>());
        }

        var messages = new List<UserMessage>();
        while (UserMessages[userId].Any())
        {
            messages.Add(UserMessages[userId].Dequeue());
        }

        return messages;
    }
}

public class UserMessage
{
    public string Message { get; set; }
} 
```

编辑：经过一番玩弄之后，消息有时甚至会“聚集”起来。创建一些“项目”后，我将在字典中添加一条消息，这些消息会突然在看似随机的时间同时显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T06:26:19.200

首先，如果这是针对真实站点的，我无论如何都不会采用这种方法。如果您希望信息持久化，请使用持久化的东西（例如数据库）。否则，当 AppDomain 被回收或整个服务器出现故障时（您确实有冗余，对吗？）您将丢失所有消息。这种方法也不能很好地进行负载平衡。

其次，您*可能*会看到标准集合类的结果不是线程安全的。如果没有任何同步或其他内存屏障，一个线程*可能*看不到另一个线程写入的数据。两个线程也完全有可能同时写入字典（或写入同一个列表）。您*可以*只添加一些同步，例如有一个锁对象并为每个方法的整体锁定它。不过，我会开始使用数据库...

# java - 如何将一个对象从一个 JSF Bean 中保存的另一个对象传递给同一视图中的另一个 Bean？

> ID：12994743
> 
> 赞同：0
> 
> 时间：2012-10-21T03:37:15.237
> 
> 标签：java, jsf, jsf-2

我有一个 JPA 实体人，因为人可以有很多联系人（这些是组织而不是人）。

在 JSF 页面上，我需要显示人员和所有联系人。这就是我想接近这个的想法。

*   创建两个 facelet 页面，一个用于人员，一个用于联系人（属于人员）
*   创建两个 Viewscoped 支持 bean 一个用于人员页面一个用于联系人页面
*   使用 UI 包括将两者组合到最终用户的单个页面中。

问题是我不知道如何将`List<Contact>`（延迟加载但可能与此问题的上下文无关但仍然提及任何方式）从has`Person`内部的实体`PersonBackingBean`传递给`ContactsBackingBean`优雅的 .

可能是我的方法是错误的，应该只有一个 Bean 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:16:25.437

我会创建一个 Controller Bean 并准备其中的数据。当您在选择要显示的人员时处理操作时，可以进行数据准备。

向该控制器添加两个 get 方法，一个获取人员，第二个获取联系人。

# iphone - MFMailComposeViewController 在 iOS 5 中尝试编辑电子邮件正文时崩溃

> ID：12994745
> 
> 赞同：0
> 
> 时间：2012-10-21T03:38:42.193
> 
> 标签：iphone, cocoa-touch, mfmailcomposeviewcontroller, mfmailcomposer

我有一个同时支持 iOS 5 和 iOS 6 的应用程序。MFMailComposeViewController 在 iOS 6 中运行良好，但是当用户尝试编辑电子邮件正文时，我在 iOS 5 中崩溃了。所有其他字段都可以毫无问题地进行编辑。有人见过这个问题吗？

代码如下：

```
// Displays an email composition interface inside the application. Populates all the Mail fields.
-(void)displayMailComposerSheet {
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    [picker setSubject:@"xyz"];

    NSArray *toRecipients = [NSArray arrayWithObject:@"support@xyz.com"];
    [picker setToRecipients:toRecipients];

    [picker setMessageBody:@"xyz" isHTML:NO];

    // Deprecated in iOS 6.0:
    [self presentModalViewController:picker animated:YES];
}

// Dismisses the email composition interface when users tap Cancel or Send. Proceeds to update the 
// message field with the result of the operation.
- (void)mailComposeController:(MFMailComposeViewController*)controller 
          didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {

    // Deprecated in iOS 6.0:
    [self dismissModalViewControllerAnimated:YES];
} 
```

崩溃日志如下所示：

```
Crashed Thread:  0

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
iPhone Simulator 358.4, iPhone OS 5.1 (iPhone/9B176)

*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[MFComposeTextContentView setInputAccessoryView:]: unrecognized selector sent to instance 0x8d6b880'
*** First throw call stack:
(0x1da6022 0x1b19cd6 0x1da7cbd 0x1d0ced0 0x1d0ccb2 0x5e4b1 0xb5aa29 0x1d71855 0x1d71778 0xa9f19a 0xaabb03 0x49e084 0x169a798 0x4658fb 0x4675f8 0x45fe29 0x45f133 0x4603bf 0x462a21 0x46297c 0x45b3d7 0x1c01a2 0x1c0532 0x1a6dc4 0x19a634 0x1f39ef5 0x1d7a195 0x1cdeff2 0x1cdd8da 0x1cdcd84 0x1cdcc9b 0x1f387d8 0x1f3888a 0x198626 0x303d 0x2f65)

abort() called

Thread 0 Crashed:
0   libsystem_kernel.dylib          0x99b6e9c6 __pthread_kill + 10
1   libsystem_c.dylib               0x991a5f78 pthread_kill + 106
2   libsystem_c.dylib               0x99196bdd abort + 167
3   libc++abi.dylib                 0x027dee78 abort_message + 50
4   libc++abi.dylib                 0x027dc89e _ZL17default_terminatev + 34
5   libobjc.A.dylib                 0x01b19f17 _objc_terminate + 94
6   libc++abi.dylib                 0x027dc8de _ZL19safe_handler_callerPFvvE + 13
7   libc++abi.dylib                 0x027dc946 std::terminate() + 23
8   libc++abi.dylib                 0x027ddb3e __cxa_rethrow + 83
9   libobjc.A.dylib                 0x01b19e15 objc_exception_rethrow + 47
10  CoreFoundation                  0x01cdcde0 CFRunLoopRunSpecific + 304
11  CoreFoundation                  0x01cdcc9b CFRunLoopRunInMode + 123
12  GraphicsServices                0x01f387d8 GSEventRunModal + 190
13  GraphicsServices                0x01f3888a GSEventRun + 103
14  UIKit                           0x00198626 UIApplicationMain + 1163
15  SomeXYZApp                      0x0000303d main + 141 (main.m:16)
16  SomeXYZApp                      0x00002f65 start + 53 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:42:26.523

1 如果您尝试在设备上执行此操作，请创建邮件帐户

2 MFMailComposeViewController 包含methon“canSendMail，所以你可以尝试：

```
if ([MFMailComposeViewController canSendMail]) {
 // create mail
} else {
// error message
} 
```

3 尝试在主线程中调用控制器：

```
dispatch_async(dispatch_get_main_queue(), ^{
    //call MFMailComposeViewController
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:19:11.370

有同样的问题。仅在IOS6中，不在IOS5.1中。测试得知表单没有正确发布。因此我添加了代码来强制释放表单。这在我的情况下有效。希望它也能帮助你。

```
-(void) sendMail:(NSString *) mailTo
{
    // Check if you can send an e-mail
    if ([MFMailComposeViewController canSendMail])
    {
        @try
        {
            // show the form
            MFMailComposeViewController *mailForm = nil;
            mailForm = [[MFMailComposeViewController alloc] init];
            mailForm.mailComposeDelegate = self;
            [mailForm setToRecipients:@[ mailTo ]];
            mailForm.modalPresentationStyle = UIModalPresentationFormSheet;
            mailForm.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
            [self presentModalViewController:mailForm animated:YES];
        }

        @catch (NSException *exception)
        {
            // Show what went wrong
            NSString *fout = [[NSString alloc] initWithFormat:@"%@: %@",[exception name], [exception reason]];
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Mailer" message:fout delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
        }
    }
    else
    {
        // Inform the user you cannot send mail, no mailbox set
        [self noEmailAccountMeansNoEmail];
    }
}

- (void)mailComposeController:(MFMailComposeViewController*)mailForm didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    // Get the mail form off the screen 
    if ((mailForm != nil))
        [mailForm dismissModalViewControllerAnimated:YES];

    // Force release/dealloc of the screen
    mailForm = nil;
    return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T15:27:33.603

再试一次可能是你忘记了小事......我不确定......你的代码看起来不错......它应该可以工作......

首先添加并导入 MessageUI 框架

```
#import <MessageUI/MessageUI.h> 
```

并声明 MFMaileComposeViewControllerDelegate

```
@interface MailViewController : UIViewController <MFMailComposeViewControllerDelegate> 
```

编写此代码以发送邮件

```
- (IBAction)openMail:(id)sender 
{
if ([MFMailComposeViewController canSendMail])
{
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

    mailer.mailComposeDelegate = self;

    [mailer setSubject:@"xyz"];

    NSArray *toRecipients = [NSArray arrayWithObjects:@"fisrtMail@example.com", @"secondMail@example.com", nil];
    [mailer setToRecipients:toRecipients];

    NSString *emailBody = @"xyz";

    [mailer setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:mailer animated:YES];

    [mailer release];
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure"
                                                    message:@"Your device doesn't support the composer sheet"
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles: nil];
    [alert show];
    [alert release];
} 
```

}

还要写 MFMailComposeViewControllerDelegate 的委托方法

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{   
    switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued.");
            break;
        case MFMailComposeResultSaved:
            NSLog(@"Mail saved: you saved the email message in the drafts folder.");
            break;
        case MFMailComposeResultSent:
            NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send.");
            break;
        case MFMailComposeResultFailed:
            NSLog(@"Mail failed: the email message was not saved or queued, possibly due to an error.");
            break;
        default:
            NSLog(@"Mail not sent.");
            break;
    }

        // Remove the mail view
    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T22:06:37.507

我发现了问题。我正在使用 DAKeyboardControl 允许滚动关闭键盘（请参阅[GitHub 获取 DA 的 KeyboardControl](https://github.com/danielamitay/DAKeyboardControl)）。

当通过 MFMailComposeViewController 调用 DA 代码中的 responderDidBecomeActive 时，textField 接收到不响应 inputAccessoryView 的 MFComposeTextContentView 对象。这似乎是不支持的交互。但是请注意，在 iOS 6 中，这个问题不会发生，因为 DA 的重载类不被 MFMailComposeViewController 调用。

如果删除了 DAKeyboardControl 支持，则一切正常。

# heroku - git with app in heroku 和 github

> ID：12994746
> 
> 赞同：0
> 
> 时间：2012-10-21T03:39:25.653
> 
> 标签：heroku, github

在heroku中有一个应用程序，带有类似的git url `git@heroku.com:app.git`，以及github中的一个repo [https://github.com/username/other_app.git](https://github.com/username/other_app.git)

是否可以同步两个存储库以在两个 git 服务器（heroku 和 github）中托管 sema 应用程序？

还将 [Heroku 应用程序链接到 Github 存储库。为了什么？](https://stackoverflow.com/q/12708716/430059)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:45:47.423

是的，当然这是可能的，因为 git 是一个[分布式存储库](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows)。您可以配置多个遥控器，一个在 GitHub，一个在 heroku，然后将您的更改推送到它们。

例子：

1.  [在 GitHub 上创建存储库](https://github.com/new)
2.  在您的机器上克隆此存储库，现在您已将远程“来源”设置为 GitHub
3.  设置 heroku 并添加 heroku git 远程（通过运行`heroku create`或`heroku git:remote -a my_heroku_app`）。[在heroku 的 git 文档中](https://devcenter.heroku.com/articles/git)查找详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T18:51:42.270

在使用 github/heroku 时，这里有一些有用的命令：

显示 github 远程：

git远程显示起源

显示 heroku git：

git远程显示heroku

将github推送到heroku：

git push heroku 大师

如果你在 github 上有一个 'staging' 分支并且想要将它推送到 heroku git (master) 以获得一个'staging app'：

git push heroku staging:master -v

# processing - KeyTyped 键不显示键

> ID：12994747
> 
> 赞同：2
> 
> 时间：2012-10-21T03:39:31.587
> 
> 标签：processing

我正在尝试从 processing 转换为 processingjs 并且有一些我无法理解的东西。

在处理以下代码时，会返回您输入的任何字母，尽管在 processingjs 中它只是返回键码值，但我需要的是字母而不是代码。

```
String name="";

void setup(){
 size(200,200);
}

void draw(){  
}

void keyPressed() {
  if(key==ENTER) {
  name="";
}
else {
 name+=key;
 println(name);
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:19:03.297

经过数小时的搜索和上述答案，我在这里 peepproject.com/forums/thread/266/view 找到了比我更有说服力的答案。基本上解决方案是在构造 a 之前将其转换`int`为a并将其放入.`char()``String``array`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:29:03.573

而不是`name += key`，尝试`name += key.toString()`。

Processing 会`println`自动为您进行类型转换，因此 的`char`值`PApplet.key`会打印为字母。JavaScript 字符串连接的工作方式不同；的整数值`PApplet.key`将作为整数附加到字符串中，并且不会自动转换为字符串。您必须手动完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:22:10.103

需要在Processing和Processing.js中使用char转换功能：

[http://processingjs.org/reference/char_/](http://processingjs.org/reference/char_/)

它显示为数字的原因是这一行：

```
char x = 97; //supposed to be an 'a' 
```

在 Java 中进行强制转换（可能需要 char x = (char)97）。

但是在 processing.js 中它被执行为：

```
var x = 97; 
```

由于 javascript 具有动态类型。因此，您需要显式地强制类型转换，例如从 int->char。

# php - 有没有办法获得 PHP 1.0，CGI 旧版本？

> ID：12994749
> 
> 赞同：1
> 
> 时间：2012-10-21T03:39:49.860
> 
> 标签：php, cgi

我似乎无法找到 PHP 1.0，正如维基百科所述，它只是一堆用于处理常见 Web 相关事物的 CGI 函数。有没有办法可以下载它或查看它是如何完成的？为什么 PHP 没有提到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T07:05:31.317

从 php 网站链接（左侧边栏）：

[http://museum.php.net/](http://museum.php.net/)

（为什么？也许是因为他们有点尴尬 :-)）

# java - 无法实例化私有类

> ID：12994750
> 
> 赞同：0
> 
> 时间：2012-10-21T03:39:59.377
> 
> 标签：java, swing, jbutton, actionlistener

我是 Java swing 的第一次用户，这是我第一次尝试使用私有类。

我正在尝试以下代码 -

```
ActionListener listener = new AddButtonListener(); 
```

其中 AddButtonListener 是实现 ActionListener 接口的私有类。

```
private class AddButtonListener implements ActionListener{
  public void actionPerformed(ActionEvent e){
  ....
  }
} 
```

但是，我收到一个日食错误，内容为

> 无法访问 someType 类型的封闭实例。必须使用 someType 类型的封闭实例来限定分配（例如 xnew A()，其中 x 是 someType 的实例）。

请注意，该类是在 someType 内的静态 main 方法中实例化的。

为什么会出现这个错误？是因为main方法是静态的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T03:45:24.447

由于 AddButtonListener 是一个内部类并且不是静态的，它只能使用外部类的对象来实例化。

例如，如果您的 AddButtonListener 类是在 SomeType 中定义的，那么

```
SomeType obj = new SomeType();

SomeType.AddButtonListener listener = obj.new AddButtonListener(); 
```

如果您在 SomeType 中的某个方法中，那么您将创建这个非静态内部类的对象

```
AddButtonListener listener = this.new AddButtonListener(); 
```

如果要创建 AddButtonListener 的实例而不使用 SomeType（封闭类型）的实例，则应将 AddButtonListener 标记为静态类。

```
private static class AddButtonListener implementsActionListener{
    public void actionPerformed(ActionEvent e){
        ....
    }
} 
```

所以，这不是关于类是私有的，而是关于它不是静态的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T03:55:45.423

异常消息几乎解释了一切。

私有类需要存在其封闭类型的实例才能实例化。由于私有类可以访问封闭类型实例中的成员，如果不存在这样的实例，那么私有类实例在哪里可以访问封闭类型中的成员？

回到你的问题。

如果您想创建一个实例而不必创建其他实例。您可以声明您的`AddButtonListener`as `private static class`，但这将`AddButtonListener`失去访问`SomeType`类 insatnce 中的成员的能力。

或者，您必须使用这样的语法。

```
SomeType t = new SomeType();
AddButtonListener listener = t.new AddButtonListener(); 
```

但是，我无法确定哪种方式在您的情况下是正确的，因为您没有提供任何详细代码。因为根据我的经验，在封闭类中使用私有类时不应该有这样的问题。除非您尝试在主要方法或其他方法中对其进行测试..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T03:59:32.417

维克多是对的。但是对于这种情况（监听器只使用一次），您通常使用匿名类：

```
...
ActionListener listener = new ActionListener(){

    @Override
    public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub          
    }       

};
... 
```

在这里，您通过扩展所需的接口或类来定义方法内部的类。

# c# - 抽象类和虚拟方法——显示总数

> ID：12994755
> 
> 赞同：0
> 
> 时间：2012-10-21T03:41:07.983
> 
> 标签：c#, oop, inheritance

我目前正在使用抽象类和虚拟方法。我正在做一个带有列出两个类`Trees`和`Tomatoes`. 结果显示在两个文本框中。`TextBox1` 显示名称、库存数量和每件商品的价格。`TextBox2`显示每个植物的总价格。我正在尝试添加一种方法来显示所有植物的总数并在`TextBox2`?

**代码**

```
 namespace nursery_plant
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

        public abstract class Plants
        {
            public string the_name;
            public double num_stock;
            public double price_peritem;
            public double total_item_value;

            public Plants(string new_name, int new_stock, double new_price)
            {
                the_name = new_name;
                num_stock = new_stock;
                price_peritem = new_price;
            }

            public override string ToString()
            {
                return "";
            }

            public virtual double Get_Value()
            {
                double s = 0;
                return s;
            }

        }

        public class Trees : Plants
        {
            double tree_height;
            public Trees(string new_name, int new_stock, double new_price, double new_height)
                : base(new_name, new_stock, new_price)
            {
                tree_height = new_height;
                total_item_value = num_stock * price_peritem;
            }

            public override string ToString()
            {
                string s = "Tree" + "     " + num_stock + "      " +  the_name + "     " + price_peritem + "    " + tree_height ;
                return s;
            }

            public override double Get_Value()
            {
                total_item_value = num_stock * price_peritem;
                return total_item_value;
            }

        }

        public class Tomatoes : Plants
        {

            string sizeoftomato;
            int tomatoesinpat;

            public Tomatoes(string new_name, int new_stock, double new_price, int tomatoes_perplat, string tomatoes_size)
                : base(new_name, new_stock, new_price)
            {
                tomatoesinpat = tomatoes_perplat;
                sizeoftomato = tomatoes_size;

                total_item_value = num_stock * price_peritem;

            }

            public override string ToString()
            {
                string s = "Tomatoes" + "     " + num_stock + "      " + the_name + "     " + price_peritem;
                return s;
            }

            public override double Get_Value()
            {

                total_item_value = price_peritem;
                return total_item_value;
            }
        }

        public void Report()
        {

             Trees trees1 = new Trees("Tree", 3, 14.40, 2);
             const string format = "{0,-26} {1,-25} {2,-25} {3,-25}";
             string trees1_result = String.Format(format, trees1.the_name, "Oak", trees1.num_stock, trees1.price_peritem);            
             textBox1.AppendText(trees1_result + Environment.NewLine);
             textBox2.AppendText(trees1.Get_Value() + Environment.NewLine);

             Tomatoes tomatoes1 = new Tomatoes("Tomatoe", 30, 10, 12, "Large");
             const string format2 = "{0,-26} {1,-25} {2,-25} {3,-25}";
             string tomatoes1_result = String.Format(format2, tomatoes1.the_name, "Big Boy", tomatoes1.num_stock, tomatoes1.price_peritem);
             textBox1.AppendText(tomatoes1_result + Environment.NewLine);
             textBox2.AppendText(tomatoes1.Get_Value() + Environment.NewLine);

        }

        private void button1_Click(object sender, EventArgs e)
        {
            Report();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:47:49.823

你不能用这样的东西吗？

```
textBox2.AppendText(trees1.total_item_value + tomatoes1.total_item_value); 
```

另外，我注意到你在重复一些共同的逻辑。例如这条线

```
total_item_value = num_stock * price_peritem; 
```

可以进入抽象基类的构造函数。

# vim - VIM 颜色方案中的 `if exists("syntax_on")` 保护的原因是什么？

> ID：12994758
> 
> 赞同：1
> 
> 时间：2012-10-21T03:41:34.273
> 
> 标签：vim, color-scheme

几乎每个 VIM 配色方案中都有这个片段：

```
if exists("syntax_on")
  syntax reset
endif 
```

这也被列为在各种教程等中放入颜色方案的“推荐”事物。

但是，我已经对两者之间的区别进行了很多实验，并且只是简单的：

```
syntax reset 
```

我找不到任何区别。如果启用了语法，则此命令正确地执行通常的语法重置魔术，但如果语法关闭，它似乎没有任何效果，或者给出任何错误。更重要的是，阅读 VIM 手册中关于语法高亮和颜色方案的整个部分，我看不出为什么`syntax reset`如果没有设置“syntax_on”，一个普通的、不受保护的会有害的任何理由。

如果真是这样，那`if exists("syntax_on")`守卫的目的是什么？是不是因为以前版本的 VIM 需要这样做，但至少在 7.3 中不再需要？还是我缺少一些微妙的角落案例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T03:59:43.930

当`syntax_on`未定义时，我们不需要运行`syntax reset`它与：

```
g:syntax_cmd = 'reset'
runtime! syntax/syncolor.vim 
```

它使`vim`速度更快。

# actionscript-3 - AS3 子弹拆卸

> ID：12994759
> 
> 赞同：1
> 
> 时间：2012-10-21T03:41:48.613
> 
> 标签：actionscript-3

每个人。

我试图让我的项目符号实例在它们离开屏幕后被删除，但我得到了这个：

`Error 1061: Call to a possibly undefined method removeChild through a reference with static type __AS3__.vec:Vector.<Bullet>.`

这是错误指向的地方：

```
private function manageBullets(event:Event):void {

    for each(var i in bManager.bulletVector){

        if (i.y < -20) {

            bManager.removeChild(i);     //This line
            bManager.bulletVector = bManager.bulletVector.splice(bManager.bulletVector.indexOf(i), 1);

        }
    }
} 
```

我对 AS3/OOP 还很陌生，所以不要太猛烈抨击我：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T06:52:24.033

您正在做两件不正确的事情：

1) 尝试在向量对象上调用 removeChild() 方法。removeChild() 子方法只能在 DisplayObjectContainer 及其后代类上访问。

2）您将它自己的一个元素分配给由 splice() 返回的 bulletVector，因此在此表达式之后 bulletVector 不再是向量，而是子弹对象。如果 bManager 的类没有被定义为动态的，这应该给你“TypeError”。

我猜你的代码应该是这样的：

```
private function manageBullets(event:Event):void {

    for each(var i in bManager.bulletVector){

        if (i.y < -20) {

            if(i.parent != null) //Check if i is in display list
            {
                  i.parent.removeChild(i); //Remove i from display list
            }

            /* And then just remove i from vector no need to handle returned value.*/

            bManager.bulletVector.splice(bManager.bulletVector.indexOf(i), 1); 

        }
    }
} 
```

# c# - 读取 XML 并映射到列表 使用 C# 的数据集

> ID：12994760
> 
> 赞同：0
> 
> 时间：2012-10-21T03:42:07.733
> 
> 标签：c#, list, dataset

我有一个现有`List<MyObject>`的包含 15 个 MyObject(s)。我想读取一个 XML 文档并将 XML 文档映射到该数据。

MyObject 类有 3 个公共属性；

```
+id :int
+value1 :float
+value2 :float 
```

XML 文档具有这种结构；

```
 <root>

    <objects>
         <object id="1">
             <value1>S</value1>
             <value2>B</value2>
         </object>
         <object id="2">
             <value1>A</value1>
             <value2>J</value2>
         </object>
     </objects>
   </root> 
```

虽然原来`List<MyObject>`有 15 项，但传入的 XML 文档只有 2 项，我需要通过 id 映射 XML 对象并更改 List 值。

所以 XML 文档的数据

```
object id=1, value1 = s, value2= b
object id=2, value1 = a, value2= j 
```

并且`List<MyObject>`项目的数据是

```
object id=1 value1= a, value2 = b
object id=2 value1= c, value2 = d
object id=3 value1= k, value2 = z
object id=4 value1= y, value2 = e 
```

我需要阅读 XML 文档并将其与现有`List<MyObject>` 列表的结果合并；

```
object id=1 value1= s, value2 = b
object id=2 value1= a, value2 = j
object id=3 value1= k, value2 = z
object id=4 value1= y, value2 = e 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:27:43.147

尝试这个

```
using System.Xml;

...

XmlDocument doc = new XmlDocument();
doc.Load("filename.xml"); //or doc.LoadXml(xmlString);
XmlNodeList objects = doc.GetElementsByTagName("object"); //get list of objects from XML

List<object> myObjects = new List<object> { new object()}; //replace this with your List<object>

for (int i = 0; i < myObjects.Count; i++)
{
    foreach (XmlNode o in objects)
    {
        if (o.Attributes["id"].Value == myObjects[i].id.ToString())
        {
            myObjects[i].Value1 = o.ChildNodes[0].InnerText;
            myObjects[i].Value2 = o.ChildNodes[1].InnerText;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:17:34.847

你可以用linq来做你的主地图是id，因为id和你已经知道的一样，根据你的例子你的xml和你的列表它可能是这样的

```
List<MyObject> myobjectlist = new List<MyObject>(); 
```

然后我会从列表中选择对象 id 为 1 的所有值

```
MyObject firstobject=(from c in myobjectlist where c.id=1 selec c).FirstOrDefault(); 
```

您的 xml 查询可能是这样的

```
var query = from node in results.Descendants("objects") 
            where node.Attribute("id").Value == "1"
            select
            {
                value1 = node.Element("value1").Value,
                value2 = node.Element("value2").Value
            }; 
```

下一步是映射它

```
firstobject.value1=query.value1;
firstobject.value2=query.value2; 
```

并对 id 为 1 的对象执行相同操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T04:00:13.717

要进行任何类型的搜索和合并操作，我不认为 List 是最有效的数据结构，因为大多数搜索操作将是 O(N) 量级。根据数据集的大小，这可能是不好的或可以接受的。

其次，我将重写 Equals 和 GetHashCode 方法，以便允许进行任何类型的比较并识别集合中的每个对象以查看是否存在。

我认为 List.Contains 方法在内部调用这些方法以比较对象并查看列表中是否存在对象。

话虽如此，我认为唯一的方法是在单独的集合中读取 XML 文件，对其进行迭代，查看每个对象是否存在于您拥有的原始集合中，如果存在则替换它。

LINQ 查询也可以简化实现。

# objective-c - 在 iOS 中传递参数

> ID：12994766
> 
> 赞同：3
> 
> 时间：2012-10-21T03:43:33.150
> 
> 标签：objective-c, ios

我是 iOS 新手，通过值或引用传递参数（我来自 Java/.NET 背景）让我感到困惑。你看我有一种实用程序/帮助方法，我将它传递给一个 NSMutableDictionary，然后是一个文件位置，并要求它从文件中解压缩数据到我发送给它的字典。这是辅助方法：

```
 - (void)loadData:(NSMutableDictionary *)dictionary fromFile:(NSString *)fname  {
     dictionary = [ NSKeyedUnarchiver unarchiveObjectWithFile : [ self getFilePath:fname ] ] ;
    if ( [dictionary.allKeys count] < 1 ) {
       NSLog(@"Couldn't load file %@ ", fname);
    }  else  {
      NSLog(@"Loaded data from file %@ successfully", fname );
  }
} 
```

现在我在以下代码行中调用此方法

```
 [ loadData: dataDict fromFile:@"data.archive"]; 
```

现在的问题是，在辅助方法结束时，我有一个名为字典的变量，它确实有值，但它不是我从调用行传递的原始字典。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:00:36.463

正如这里所解释的 -[在目标 C 中按值或通过引用传递参数](https://stackoverflow.com/questions/2892520/passing-arguments-by-value-or-by-reference-in-objective-c)- 在目标 c 中，参数是按值传递的，因此对参数的修改是修改一个值，而不是修改传入的引用的实际值。

如果你想修改你的字典，你应该在它前面加上一个`**`来传递引用的值，然后用`*`.

```
- (void)loadData:(NSMutableDictionary**)dictionary fromFile:(NSString*)fname  {
{
    *dictionary = [NSKeyedUnarchiver unarchiveObjectWithFile:[self getFilePath:fname]];
    if ([*dictionary.allKeys count] < 1) {
        NSLog(@"Couldn't load file %@ ", fname);
    }  
    else  {
        NSLog(@"Loaded data from file %@ successfully", fname);
    }
} 
```

注意：这种指针取消引用有点时髦，可能应该仅限于`**Error`传递。创建一个新的字典副本内容并返回它可能更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T04:29:38.867

我猜问题是 data.archive 不是加载字典值的有效文件格式。如果要将值存储到文件中，然后将它们加载到字典中，我将在应用程序的主包中创建一个 .Plist 文件，您可以将值加载到字典中，如下所示：

```
NSString *dataFile = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];
NSDictionary *dataDictionary = [[NSDictionary alloc] initWithContentsOfFile:dataFile]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T05:17:51.717

`dictionary`并且`fname`都是*指针*，都是按*值*传递的。就 C 构造而言，您可以将其称为引用。但是，该语言允许您将该参数重新分配给新指针。

所以如果我们更详细地看一下：

```
- (void)loadData:(NSMutableDictionary *)dictionary << a pointer variable local to the method
        fromFile:(NSString *)fname
{
  dictionary = << oops! assigned that pointer parameter to a different instance
      [NSKeyedUnarchiver unarchiveObjectWithFile:[self getFilePath:fname]];
  if ([dictionary.allKeys count] < 1 ) { << new instance will be messaged, NOT the object originally passed by parameter 
```

* * *

并涵盖如何完成您的意图：

```
[dictionary setDictionary:[NSKeyedUnarchiver unarchiveObjectWithFile:[self getFilePath:fname]]]; 
```

# mysql - 从子查询错误中的where id删除

> ID：12994768
> 
> 赞同：0
> 
> 时间：2012-10-21T03:44:10.773
> 
> 标签：mysql, syntax-error

我在windows上的mysql客户端shell中运行了这个。我不明白问题是什么。我知道`delete from PageInfo where id`是正确的。我知道子查询是正确的。我认为 in 是正确的，但我不经常使用它。整个事情看起来是正确的，但我在某个地方遇到了问题。我不明白错误信息。

如何删除子查询返回的所有 id？

```
mysql> delete from PageInfo where id in ( select max(id) from PageInfo where pid
>=2758000 AND pid<2758100 group by pid having count(pid)>1 );
ERROR 1093 (HY000): You can't specify target table 'PageInfo' for update in FROM
 clause 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T04:06:08.180

你可以这样做

```
delete from PageInfo where id = ( SELECT maxid FROM ( select max(id) as maxid from PageInfo where pid >=2758000 AND pid<2758100 group by pid having count(pid)>1) as tmp) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T03:52:21.527

来自mysql[网站](http://dev.mysql.com/doc/refman/5.0/en/subquery-errors.html)。如前所述，不允许从同一个表中选择和修改

**出现这种错误的情况如下，在子查询中试图修改一个表并从同一个表中选择**

```
 Incorrectly used table in subquery:

 Error 1093 (ER_UPDATE_TABLE_USED)
  SQLSTATE = HY000
  Message = "You can't specify target table 'x'
 for update in FROM clause"
: 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T03:56:26.980

在 MySQL 中，您不能修改作为子查询一部分的同一个表。

更多信息在[http://dev.mysql.com/doc/refman/5.6/en/update.html](http://dev.mysql.com/doc/refman/5.6/en/update.html)

[此处描述了您的问题的解决方法。](http://www.xaprb.com/blog/2006/06/23/how-to-select-from-an-update-target-in-mysql/)

# php - 如何在 PHP 中的 echo 中添加换行符？

> ID：12994769
> 
> 赞同：111
> 
> 时间：2012-10-21T03:44:21.663
> 
> 标签：php

我试图为一个句子添加一个换行符，我`/n` 在下面的代码中添加了。

```
echo "Thanks for your email. /n  Your orders details are below:".PHP_EOL;
echo 'Thanks for your email. /n  Your orders details are below:'.PHP_EOL; 
```

由于某些原因，我得到了服务器错误。我如何解决它？

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2012-10-21T03:50:00.117

`\n`是换行符。`/n`不是。

* * *

使用`\n`with

## **1.直接回显到页面**

现在，如果您尝试将字符串回显到页面：

```
echo  "kings \n garden"; 
```

***输出***将是：

```
kings garden 
```

您不会`garden`换行，因为 PHP 是一种服务器端语言，并且您将输出作为 HTML 发送，您需要在 HTML 中创建换行符。HTML 看不懂`\n`。您需要为此使用该[`nl2br()`](http://php.net/manual/en/function.nl2br.php)功能。

它的作用是：

> 返回在所有换行符（\r\n、\n\r、\n 和 \r）之前插入`<br />`或插入的字符串。`<br>`

```
echo  nl2br ("kings \n garden"); 
```

[输出](http://codepad.viper-7.com/vc7HJB)

```
kings
garden 
```

> **注意**确保您`\n`在双引号中回显/打印，否则它将按字面意思呈现为 \n。***因为 php 解释器用as is***的概念解析单引号中的字符串

 *```
so "\n" not '\n' 
```

## **2.写入文本文件**

现在，如果您回显到文本文件，您可以使用 just`\n`它将回显到新行，例如：

```
$myfile = fopen("test.txt", "w+")  ;

$txt = "kings \n garden";
fwrite($myfile, $txt);
fclose($myfile); 
```

输出将是：

```
kings
 garden 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-01-11T21:04:49.860

使用 echo 时必须使用 br ，如下所示：

```
echo "Thanks for your email" ."<br>". "Your orders details are below:" 
```

它会正常工作

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-21T03:46:28.280

换行符是`\n`，如下所示：

```
echo __("Thanks for your email.\n<br />\n<br />Your order's details are below:", 'jigoshop'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T03:48:37.943

您可能想尝试 \r\n 进行回车/换行*

# c - 从响应中获取请求的 url

> ID：12994770
> 
> 赞同：0
> 
> 时间：2012-10-21T03:44:26.117
> 
> 标签：c, sockets

我需要从 http 请求中找出请求的 url，但似乎没有。

例如当我输入这个

```
http://127.0.0.1:8080/heththethetkj909 
```

请求不包含 url

```
GET /favicon.ico HTTP/1.1
Host: 127.0.0.1:8080
Connection: keep-alive
Accept: */*
User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.43 Safari/536.11
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

n-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

f-8;q=0.7,*;q=0.3 
```

我的代码是

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h> 
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <err.h>

char response[] = "HTTP/1.1 200 OK\r\n"
"Content-Type: text/html; charset=UTF-8\r\n\r\n"
"<doctype !html><html><head><title>Bye-bye baby bye-bye</title>"
"<style>body { background-color: #111 }"
"h1 { font-size:4cm; text-align: center; color: white;"
" text-shadow: 0 0 2mm black}</style></head>"
"<body><h1>Goodbye, world!</h1></body></html>\r\n";

int main()
{
    int one = 1, client_fd;
    struct sockaddr_in svr_addr, cli_addr;
    socklen_t sin_len = sizeof(cli_addr);

  char send_data [1024] , recv_data[2048]; 
      int  bytes_recieved ;  

    int sock = socket(AF_INET, SOCK_STREAM, 0);
    if (sock < 0)
        err(1, "can't open socket");

    setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &one, sizeof(int));

    int port = 8080;
    svr_addr.sin_family = AF_INET;
    svr_addr.sin_addr.s_addr = INADDR_ANY;
    svr_addr.sin_port = htons(port);

    if (bind(sock, (struct sockaddr *) &svr_addr, sizeof(svr_addr)) == -1) {
        close(sock);
        err(1, "Can't bind");
    }

    listen(sock, 5);
    while (1) {
        client_fd = accept(sock, (struct sockaddr *) &cli_addr, &sin_len);
        printf("got connection\n");

                bytes_recieved = recv(client_fd,recv_data,2048,0);
                printf(recv_data);

        if (client_fd == -1) {
            perror("Can't accept");
            continue;
        }

        write(client_fd, response, sizeof(response) - 1); /*-1:'\0'*/
        close(client_fd);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:58:55.240

# 为什么？

在 HTTP 请求的前两行中，我们有

> GET **/favicon.ico** HTTP/1.1
> 主机：**127.0.0.1 :8080**

这是对应的`127.0.0.1:8080/favicon.ico`。

什么是 favicon.ico？您是否注意到，当您在浏览器中访问 stackoverflow 时，地址栏左侧或标签栏页面标题左侧会出现一个 stackoverflow 图标。那是网站图标。当您访问任何网站时，浏览器会尝试加载它，并将其用作图片。有关 favicon 的详细信息，请参阅[wikipedia - favicon](http://en.wikipedia.org/wiki/Favicon)。

综上所述，这个 http 请求根本就不是针对`http://127.0.0.1:8080/heththethetkj909`. 因此，您肯定不会看到它。在这种情况下，HTTP 请求的前两行将显示为

> GET **/heththetkj909** HTTP/1.1
> 主机：**127.0.0.1 :8080**

服务器可能同时打开两个与您的 Web 服务器的连接。一个为`/heththethetkj909`，另一个为`/favicon.ico`。我实际上不确定您为什么会遇到问题，因为您的原始代码似乎可以处理多个连接。也许这是与 http 持久性相关的问题。

# 如何解决？

尝试在您的 http 响应的标头中添加“连接：关闭”。它可能会有所帮助。

如果您只是想尝试一个无法处理此问题的非常基本的实现，请考虑尝试一个不同的浏览器，该浏览器可能具有不同的加载 favicon 的时间行为，或者一个不知道 favicon的*非常*旧的浏览器，或者不是一个浏览器访问您的服务器，例如`curl http://127.0.0.1:8080/heththethetkj909`在 linux 中，或在 windows 中的记事本（是的，您可以在记事本的打开对话框中键入一个 url）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:54:07.603

您使用浏览器进行测试的任何更改？

[http://en.wikipedia.org/wiki/Favicon](http://en.wikipedia.org/wiki/Favicon)

在运行测试时尝试使用 Curl。

就像是：

```
curl http://127.0.0.1:8080/heththethetkj909 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T03:55:16.820

线

```
GET /favicon.ico HTTP/1.1 
```

表示浏览器正在尝试获取站点的图标图像。这*不是*您感兴趣的请求。您还应该看到一个单独的请求，上面写着

```
GET /heththethetkj909 HTTP/1.1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T03:52:16.810

您的浏览器发送 2 个 HTTP 请求：

1.  对于[favicon](http://en.wikipedia.org/wiki/Favicon) - 这是您看到的请求。这是一个小图标，您可以在页面选项卡角落的 chrome 中看到它。
2.  第二个请求将是您实际输入的内容。

我不记得两者是通过同一个连接发送还是两个 TCP 连接。您可以使用您最喜欢的网络嗅探器（例如 Wireshark - Windows/Linux、tcpdump - Linux）来检查它。

# extjs - 根据条件从json中获取记录

> ID：12994771
> 
> 赞同：0
> 
> 时间：2012-10-21T03:44:34.157
> 
> 标签：extjs, extjs4, extjs4.1

我想根据employeeID 从JSON 中获取数据。这是 JSON 数据的外观：

```
{"empDetails":
[
    {
        "employeeId": 1,
        "employeeName": 'Anton DSouz',
        "age": 25,
        "birthday": '05/05/1988',
        "sex": 'Male'
    },
    {
        "employeeId": 2,
        "employeeName": 'John Hussain',
        "age": 26,
        "birthday": '03/25/1987',
        "sex": 'Female'            
    }
] 
```

}

这是我用来根据employeeID获取数据的代码：

```
Ext.define('EmpDetails',{
extend: 'Ext.data.Model',
fields: [
   {name: 'employeeId', type: 'int'},
   {name: 'employeeName', type: 'string'},
   {name: 'age', type: 'int'},
   {name: 'birthday', type: 'date', dateFormat: 'd/m/Y'},
   {name: 'sex', type: 'string', defaultValue: 'Male'}
],
proxy: {
    type: 'rest',
    url: 'data.json',
    format: 'json',
    reader: {
        type: 'json',
        root: 'empDetails'
    }
}
});

Ext.onReady(function(){
EmpDetails.load(1,{
    success: function(empDetails){
        console.log("Age: " + empDetails.get('age'));
    }
});
}); 
```

但它不起作用。它正在查找的 URL 不正确：

```
../../Proxy/data.json/1.json 
```

1.json 根本不存在，i 是data.json 中存在的employeeID。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:20:45.053

因为您使用的是休息代理，所以它试图将 id 附加到 url，因此它看起来像一个正常的休息请求。您应该改用 ajax 代理。

```
type: 'ajax' 
```

# asp.net-mvc - 为什么 Asp.net MVC4 不能使用 SQL Server Session 状态存储的 cookieless

> ID：12994772
> 
> 赞同：4
> 
> 时间：2012-10-21T03:45:10.023
> 
> 标签：asp.net-mvc, sql-server-2008, session-state, session-cookies

全部，这是我在 Asp.net MVC4 应用程序中的 Web 配置。我发现如果我设置 cookieless false ，一切都很好。但如果我不想使用 cookie 。然后应用程序无法工作。当我调试应用程序时，我发现控制器无法接收来自视图的任何请求。我认为这是因为在无 cookie 模式下，Something 会附加到 url before 。像 http://localhost:8119/(S(3cicpjpagvpunr5he5fnfrj1))/。

```
<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="webAssets" type="Telerik.Web.Mvc.Configuration.WebAssetConfigurationSection, Telerik.Web.Mvc" requirePermission="false" />
      <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
      <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
  </configSections>

  <connectionStrings>
    <add name="..." connectionString="..." providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="true" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <customErrors mode="Off" />
    <httpRuntime executionTimeout="14400" maxRequestLength="716800" />
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
        <add namespace="Telerik.Web.Mvc.UI" />
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager>
    <!-- <sessionState mode="InProc" timeout="30" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </sessionState> -->
    <sessionState mode="SQLServer" cookieless="true" sqlConnectionString="data source=xxxx; User ID=xxxx; password=xxxx" timeout="300" sqlCommandTimeout="10" />
    <httpHandlers>
      <add verb="GET,HEAD" path="asset.axd" validate="false" type="Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc" />
    </httpHandlers>
  </system.web>
  <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="3000000000" />
      </requestFiltering>
    </security>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <directoryBrowse enabled="true" />
    <handlers>
      <remove name="asset" />
      <add name="asset" preCondition="integratedMode" verb="GET,HEAD" path="asset.axd" type="Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.WindowsAzure.StorageClient" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-1.7.0.0" newVersion="1.7.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
 </configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T08:27:08.287

`Html.BeginForm()`与`cookieless="true"`. _ 生成 url 时不考虑会话 id。所以而不是：

```
<form action="/(S(kkt0zgbnuaoxad23ew33iod4))/home/index" method="post"> 
```

它生成：

```
<form action="/home/index" method="post"> 
```

当您发布到重定向时，ASP.NET`/home/index`会自动进行重定向。`/(S(kkt0zgbnuaoxad23ew33iod4))`重定向意味着 GET 请求 => 您的 POST 操作将永远不会被命中。

作为一种解决方法，您可以编写自定义`Html.BeginForm`帮助程序来修复错误：

```
public static class FormExtensions
{
    public static IDisposable MyBeginForm(this HtmlHelper htmlHelper)
    {
        var rawUrl = htmlHelper.ViewContext.HttpContext.Request.RawUrl;
        var formAction = htmlHelper.ViewContext.HttpContext.Response.ApplyAppPathModifier("~/") + rawUrl;
        var builder = new TagBuilder("form");
        builder.MergeAttributes(new RouteValueDictionary());
        builder.MergeAttribute("action", formAction);
        builder.MergeAttribute("method", HtmlHelper.GetFormMethodString(FormMethod.Post), true);
        htmlHelper.ViewContext.Writer.Write(builder.ToString(TagRenderMode.StartTag));
        var form = new MvcForm(htmlHelper.ViewContext);
        return form;
    }
} 
```

然后使用：

```
@using (Html.MyBeginForm())
{
    ...
} 
```

就 BeginForm 助手的其他重载而言，它们应该可以正常工作并生成包含会话 ID 的正确操作。

# jquery - jQuery轮播不平滑滚动

> ID：12994773
> 
> 赞同：3
> 
> 时间：2012-10-21T03:45:20.780
> 
> 标签：jquery, carousel

我正在尝试在 jQuery 中创建一个轮播，它像股票行情一样不断滚动（即：滚动动画中不应该有暂停。）

请参阅到目前为止我在这里尝试过的 jsFiddle 示例：http: [//jsfiddle.net/c5VQe/](http://jsfiddle.net/c5VQe/)

使用下面的代码，我在 3 行代码中创建了一个轮播，它完全符合我的要求，只是轮播旋转一次后会有一点延迟。

```
function RotateCarousel() {  
    $("ul li:first-child").animate({ marginLeft: -200  }, 1500, function () {
        $("ul li:first-child").appendTo('ul');
        $("ul li:last-child").css('margin-Left', 0);
        RotateCarousel();
    });
} 
```

我怎样才能摆脱这种延迟？

注意：我对使用任何插件都不感兴趣。应该可以在不使用大量不必要的代码的情况下消除延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:47:32.840

只需将`easing`选项设置为`linear`：

```
$("ul li:first-child").animate({ marginLeft: -200 }, 1500, 'linear', function () {
//                                                         ^-- here 
```

[**小提琴**](http://jsfiddle.net/ult_combo/c5VQe/4/)

由于您之前没有设置过，jQuery 将其默认为`swing`.

从[`.animate()`](http://api.jquery.com/animate/)文档：

> ## *缓和*
> 
> 的其余参数`.animate()`是一个字符串，命名要使用的缓动函数。缓动函数指定动画在动画中不同点的进展速度。jQuery 库中唯一的缓动实现是默认的，称为`swing`，以及以恒定速度进行的，称为 `linear`.

* * *

旁注：您`setTimeout()`的语法错误，应该是

```
setTimeout(RotateCarousel, 1500); //passing a function object reference 
```

延迟轮播的初始化。

# mysql - 如何使用sql update在mysql中编辑多条记录

> ID：12994776
> 
> 赞同：1
> 
> 时间：2012-10-21T03:45:41.053
> 
> 标签：mysql, sql, insert, sql-update, record

MySQL 版本：5.5.28 phpMyAdmin - 2.11.11.3

我有多个类型的记录：name_test/、name_test/etc、name_test/etc/etc name_test/etc/etc/etc/etc，我希望它们像 Top/name_test/、Top/name_test/etc、Top/name_test /etc/etc/, Top/name_test/etc/etc/etc/etc 。

其中 90% 已经更改，因此我们只需要选择那些以“name_test/”开头的记录问题是一个问题有点复杂，我必须更改大约 400 万个字段。

```
**table exemple1**

**column1**             **column2**                 **column3**
name_test1              name_test2/etc              name_test3
Top/etc/etc/            Top/name_test2/etc/etc/     name_test/etc/etc/
name_test               Top/name_test/etc/
name_test               #name_test/etc/etc/etc/#
name_test               #name_test/etc/etc/#
name_test2              #name_test/etc/#
name_test5              #name_test/#
name_test/etc 
```

我还有其他具有这样语言的表：

```
**table exemple2**

**column1**             **column2**                 **column3**
name_test1              italian:name_test2/etc              name_test3
Top/etc/etc/            english:Top/name_test2/etc/etc/     name_test/etc/etc/
name_test               Bulgarian:Top/name_test/etc/
name_test               Danish:#name_test/etc/etc/etc/#
name_test               Korean:#name_test/etc/etc/#
name_test2              Russian:#name_test/etc/#
name_test5              etc:#name_test/#
name_test/etc 
```

注意：示例中只有这个#filds#必须修改

以其他方式开始的其他记录不会被修改任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:55:40.717

这应该适合你：

```
UPDATE table
SET column2 = concat('Top/', column2)
WHERE column2 LIKE 'name_test/%' 
```

# php - 如何在线将php html输出转换为pdf？

> ID：12994778
> 
> 赞同：0
> 
> 时间：2012-10-21T03:46:09.203
> 
> 标签：php, pdf, dompdf

我发现这个库要转换`HTML`为`PDF`: `dompdf`。

示例源代码如下所示：

```
<?php   
    require_once("dompdf/dompdf_config.inc.php");
    $html =
      '<html><body>'.
      '<p>Put your html here, or generate it with your favourite '.
      'templating system.</p>'.
      '</body></html>';

    $dompdf = new DOMPDF();
    $dompdf->load_html($html);
    $dompdf->render();
    $dompdf->stream("sample.pdf");
?> 
```

有没有办法将`PHP`输出导入此代码？

或者有没有更好的方法将 PHP 输出转换为 PDF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:54:46.503

您也可以使用输出缓冲区来实现此目的。我过去曾将其与 DOMPDF 一起使用。

```
/* Use output buffer capture */
ob_start();
require_once "Renderer.php";
$layoutHTML = ob_get_contents();
ob_end_clean(); 
```

$layoutHTML 将具有处理后的 HTML。

然后您可以按照您在问题中描述的方式使用 DOMPDF

```
 $dompdf->load_html($html); 
```

小心这会消耗大量内存（当然取决于问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T03:51:53.160

该`$dompdf->load_html($html);`方法只是采用一个字符串参数。

`$html`可以使用`file_get_contents`来自网站的变量填充：

```
$html = file_get_contents('http://www.google.com'); 
```

您还可以读取文件：

```
$html = file_get_contents('/path/to/file.txt'); 
```

或者您可以使用输出控制：

```
ob_start();
include 'my.awesome.template.html';
$html = ob_get_clean(); 
```

# android - 在 ontouch 拖动示例中将 Textview 更改为 Imageview

> ID：12994779
> 
> 赞同：0
> 
> 时间：2012-10-21T03:46:23.423
> 
> 标签：android, android-layout

我开始从事 android 开发，我一直在处理用户界面的基础知识，目前这意味着拖放图像。我终于在[这里](https://stackoverflow.com/questions/9398057/android-move-a-view-on-touch-move-action-move)找到了一个很好的文本视图示例，但我想用它来拖动图像视图。为了实现这一点，我需要做出哪些改变？提前感谢您耐心回答这样一个基本问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:51:29.997

这两行：

```
_view = new TextView(this);
_view.setText("TextView!!!!!!!!"); 
```

只需更改为：

```
_view = new ImageView(this);
_view.setImageResource(R.drawable...); // Whatever image 
```

并且`TextView _view;`必须更改为`ImageView _view;`.

不过，请注意……您可能应该先了解一下代码的作用，以及如何`View`在 Android Java 中操作对象，然后再深入研究此类代码。

# c++ - 理解这些指针语句 - 图表

> ID：12994783
> 
> 赞同：3
> 
> 时间：2012-10-21T03:47:18.460
> 
> 标签：c++, pointers

我试图理解以下 3 个涉及指针的代码语句（通过图像图）。如果您可以在没有图像的情况下对其进行解释，那也可以

```
1- myobj *ptra = new myobj();
2- myobj *ptrb = new myobj[2]();
3- myobj **ptrc = new *myobj(); 
```

以上是我的理解，如有错误请指正。图像中的地址也是完全虚构的（我知道它们没有意义）。我的主要理解问题基本上是陈述2和陈述3。

语句 1：ptra（堆栈上的某个地址）指向堆上的一个地址

语句 2： ptra （堆栈上的某个地址）指向一个包含 2 个部分的地址？那是对的吗 ？

![在此处输入图像描述](../Images/4dd544f0f5f3631cce31cbfc88c5446c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T05:20:35.633

您的理解有些正确，尽管您似乎将太多东西混合在一起并且您的图表缺少细节。以下是我为一些最简单的情况绘制它的方法......

让我们从一个简单的案例开始，将操作员`new`排除在外：

```
#include <cstdio>

struct myobj {
    int v;
};

int main()
{
    myobj obj[2];

    obj[0].v = 1;
    obj[1].v = 2;

    myobj *ptra = &obj[0];
    myobj *ptrb = &obj[1];
    myobj **ptrc = &ptrb;

    printf("obj size is: %lu\n", sizeof(myobj));
    printf("pointer size: %lu\n", sizeof(void *));

    printf("obj[0] address: %p\n", (void *)&obj[0]);
    printf("obj[1] address: %p\n", (void *)&obj[1]);
    printf("ptra address is %p, it points to %p\n", (void *)&ptra, (void *)ptra);
    printf("ptrb address is %p, it points to %p\n", (void *)&ptrb, (void *)ptrb);
    printf("ptrc address is %p, it points to %p\n", (void *)&ptrc, (void *)ptrc);
} 
```

上面的程序将输出如下内容：

```
$ g++ -Wall -pedantic -o test ./test.cpp 
$ ./test 
obj size is: 4
pointer size: 8
obj[0] address: 0x7fff5b73dbc0
obj[1] address: 0x7fff5b73dbc4
ptra address is 0x7fff5b73dbb8, it points to 0x7fff5b73dbc0
ptrb address is 0x7fff5b73dbb0, it points to 0x7fff5b73dbc4
ptrc address is 0x7fff5b73dba8, it points to 0x7fff5b73dbb0 
```

这对应于内存中的以下简单布局：

![简单的数据布局](../Images/b304c94573f356413b2153e80a1adfb7.png)

那么和你的画有什么不同呢？指针和对象的地址。如果指针本身放在地址 0，那么下一个指针就不能放在地址 1 上，因为指针本身占用了更多的空间，所以其他数据只能放在`0 + sizeof(void*)`地址上。对于对象，下一个地址至少要大于对象本身的大小（即`sizeof(myobj)`）。

当涉及到动态分配时，情况会发生一些变化。例如，当使用“new”运算符分配对象时，如下所示：

```
myobj *ptra = new myobj();
myobj *ptrb = new myobj();
myobj **ptrc = &ptrb; 
```

...您可以想到这样的内存布局：

![动态内存布局](../Images/c37ee1c0f5faea681bc9c372f984693a.png)

现在，指向另一个指针 (**) 的指针只不过是指向一个或多个指向对象的指针中的第一个的指针。容易，对吧？任何您都可以拥有指向指针的指针...无论如何，使用动态分配的指针指针，如下所示：

```
myobj *ptra = new myobj();
myobj *ptrb = new myobj();
myobj **ptrc = new myobj*[2];
ptrc[0] = ptra;
ptrc[1] = ptrb; 
```

内存布局可能如下所示：

![带有指向指针的指针](../Images/d94aa57f4cc68a7bcf4b53b669afa987.png)

顺便说一句，您在此处的第 3 行有错误 - `myobj **ptrc = new *myobj();`。应该是`myobj **ptrc = new myobj*();`。

为了解决您以后的问题，下图描绘了`myobj *ptrb = new myobj[2]();`表达式的结果，其中您有一个指向动态分配的两个对象的指针。指针本身指向两个已分配对象中的第一个：

![myobj *ptrb = new myobj[2]();](../Images/a9c3ac9b7658494d3cc3aedd4b3e5610.png)

还有一次关于指针的指针，以便您可以看到不同之处。考虑以下代码：

```
struct myobj {
    int v;
};

int main()
{
    myobj *ptra = new myobj[2]();
    myobj *ptrb = new myobj[4]();
    myobj **ptrc = new myobj*[2];

    ptrc[0] = ptra;
    ptrc[1] = ptrb;

    ptrc[0][0].v = 1;
    ptrc[0][1].v = 2;
    ptrc[1][0].v = 3;
    ptrc[1][1].v = 4;
    ptrc[1][2].v = 5;
    ptrc[1][3].v = 6;
} 
```

它将创建以下布局：

![在此处输入图像描述](../Images/b83d959d33d7de80ddd53e843fcde6d7.png)

如您所见，堆栈包含三个非动态分配的指针（它们也是对象）。这是声明的结果：

```
myobj *ptra;
myobj *ptrb;
myobj **ptrc; 
```

然后，三个不同的东西被分配了“新”：

1.  `myobj`用表达式分配两个类型的对象，`new myobj[2]()`第一个对象的地址存储在指针中`ptra`。
2.  四个类型`myobj`的对象用表达式分配`new myobj[4]()`，该表达式的结果是四个对象中第一个的地址，它存储在指针“ptrb”中。
3.  使用 with 表达式分配两个指针`new myobj*[2]`。该表达式的结果是两个指针中第一个的地址。该地址存储在变量中`ptrc`。

现在，这两个分配的指针（在“块 C”中）指向“无处”。因此，为了举例，我们让它们指向相同的对象，`ptra`并`ptrb`通过“按值”复制指针来指向：

```
ptrc[0] = ptra;
ptrc[1] = ptrb; 
```

就这么简单！

# pagerank - 使用hadoop的页面排名

> ID：12994784
> 
> 赞同：2
> 
> 时间：2012-10-21T03:47:23.753
> 
> 标签：pagerank

我想获得一些使用 Hadoop 和页面排名的经验。我使用 Hadoop 完成了页面排名算法的简单实现。现在，我计划分析更改少数算法参数的可能影响，并研究它如何影响页面排名。现在我正在分析悬空节点如何影响页面排名。关于可以对这个页面排名做出哪些其他变化的任何建议都将极大地帮助我获得一些更深入的知识。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:10:09.007

据我所知，有几个变化：

*   加权 PageRank 算法：将较大的排名值分配给更重要（流行）的页面，而不是将页面的排名值在其外链页面之间平均分配。
*   [主题敏感的 pagerank](http://www2002.org/presentations/haveliwala-rp17.pdf)。

    > 在用于提高搜索查询结果排名的原始 PageRank 算法中，使用 Web 的链接结构计算单个 PageRank 向量，以捕获网页的“相对重要性”，与任何特定的搜索查询无关。以产生更准确的在搜索结果中，我们建议计算一组 PageRank 向量，使用一组代表性主题进行偏置，以更准确地捕捉特定主题的重要性概念。

*   Z. Gy¨ongi、H. Garcia-Molina 和 J. Pedersen，“<a href="http://www.vldb.org/conf/2004/RS15P3.PDF" rel="nofollow">打击垃圾链接具有信任等级，”</li>
*   您也可以尝试[HITS](http://www.cs.cornell.edu/home/kleinber/auth.pdf)（超链接环境中的权威来源）。
*   更进一步，您可以尝试将 pagerank 想法应用到其他领域，例如[TupleRank: Ranking Relational Databases using Random Walks on Extended K-partite Graphs](http://db.cs.duke.edu/papers/2003-WAIM-hxy-tuplerank.pdf)。

# assembly - 为什么D编译的main()在64位机器上会有32位的返回值？

> ID：12994795
> 
> 赞同：6
> 
> 时间：2012-10-21T03:49:31.607
> 
> 标签：assembly, d

这是 D 中的一个非常小的源文件：

```
void main()
{
} 
```

这里是 objdump 对 .o 文件的反汇编：

```
Disassembly of section .text._Dmain:
0000000000000000 <_Dmain>:
void main()
   0:   55                      push   %rbp
   1:   48 8b ec                mov    %rsp,%rbp
   4:   31 c0                   xor    %eax,%eax
{
   6:   5d                      pop    %rbp
   7:   c3                      retq 
```

编译器是在 x86_64 Linux 机器上运行的 DMD64 D Compiler v2.056。

我想知道为什么只清除 32 位 EAX 而不是整个 64 位 RAX？我假设这是一个返回值，就像在 C 程序中一样，即使在 D 源代码中没有确认也是如此。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-21T03:57:34.070

```
xor    %eax,%eax 
```

确实清除了`rax`x64 中的全部内容。对双字大小寄存器的操作会自动清除整个寄存器的高双字。

# python - 如何在 Tkinter 根窗口中控制键盘重复延迟？

> ID：12994796
> 
> 赞同：2
> 
> 时间：2012-10-21T03:49:31.870
> 
> 标签：python, user-interface, keyboard, tkinter, tk

这个简单的应用程序*几乎*可以满足我的要求：

```
import Tkinter as Tk

def hello(x):
    print "Hello"

root = Tk.Tk()
root.bind("<Up>", hello)
root.mainloop() 
```

我将向上箭头捣碎，它一遍又一遍地打印“你好”。但是，在此重复开始之前有一个延迟，并且重复率比我想要的要慢。**如何将此重复延迟设置为零？如何控制重复间隔？**

我知道其他 Tkinter 小部件具有“repeatdelay”和“repeatinterval”的配置选项，但我似乎找不到 Tkinter 根窗口的配置选项。

（我在看你的方向，[布莱恩·奥克利](https://stackoverflow.com/users/7432/bryan-oakley)）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T05:45:42.387

这在 Tk 中是不可配置的——Tk 无法控制键盘驱动程序发送重复键事件的速度。

相反，您可以做的是绑定按钮按下和按钮释放以设置然后取消设置标志。然后，您可以编写一个函数来执行您想要执行的任何操作，然后检查标志并在您想要的任何延迟后再次调用自身。

该函数看起来像这样：

```
def hello(x):
    global SHOULD_REPEAT
    print "hello"
    if SHOULD_REPEAT:
        root.after(10, hello) # wait 10ms then repeat 
```

要做到这一点需要更多的逻辑，但这是一般的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-23T05:53:49.913

以下是基于[Bryan 在这篇文章中的回答](https://stackoverflow.com/a/12995346/7032856)的完整示例：

```
try:                        # In order to be able to import tkinter for
    import tkinter as tk    # either in python 2 or in python 3
except ImportError:
    import Tkinter as tk

def step(*event):
    label['text'] += 1

    if label._repeat_on:
        root.after(label._repeat_freq, step)

def stop(*event):
    if label._repeat_on:
        label._repeat_on = False
        root.after(label._repeat_freq + 1, stop)
    else:
        label._repeat_on = True

if __name__ == '__main__':
    root = tk.Tk()
    label = tk.Label(root, text=0)
    label._repeat_freq = 10
    label._repeat_on = True

    root.bind('<KeyPress-s>', step)
    root.bind('<KeyRelease-s>', stop)

    label.pack()
    root.mainloop() 
```

# java - 从对象引用访问超类方法（新手）

> ID：12994806
> 
> 赞同：1
> 
> 时间：2012-10-21T03:51:57.783
> 
> 标签：java, superclass, dynamic-dispatch

假设我有这个类：

```
class B extends A
{
  @Override 
  void foo () { ... }
} 
```

现在，如果给我一个 B 类的对象，我可以从 A 类显式调用 foo 方法吗？我尝试向下转换对象，即

```
B b = new B();
((A)b).foo(); 
```

但这似乎不起作用。

那么有没有办法完成我想在 Java 中做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:57:26.067

在 Java 中，默认情况下所有函数/方法都是虚拟的。因此，在继承场景中，对子类型的方法调用总是调用子类型中该方法的版本，而不管引用类型是超类型/子类型，即

```
A a = new B();
a.foo();

B b = new B();
b.foo() 
```

两者都只会调用`foo()`in的版本`B`。

如果您是来自 C++ 的人，其中函数必须显式声明为虚拟，并且这种行为只能通过指针观察到，那么在 java 中相同的行为需要以不同的方式理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T03:52:49.343

`object`由于多态性，总是方法调用将在类型上。

在这种情况下，即使您进行了强制转换， object 也是 type `B`，因此将调用`foo()`方法 from 。`Class B`

这个[太阳教程](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T04:32:48.917

就像这样.....

**-**最**具体**的`method`版本`class`被称为。

**例如：**

```
public class A{

  public void go(){

      System.out.println("A");

    }

 }

class B extends A{

  public static void main(String[] args){
     B b = new B();
     b.go();
   }

  } 
```

在上面`class B`，由于方法`go()`没有**被覆盖**，所以方法 from`class A`将被调用。

现在，如果它类似于下面的内容，则将调用该`class B`方法。`go()`

B 类扩展 A {

```
 public void go(){

      System.out.println("B");

    }

   public static void main(String[] args){
     B b = new B();
     b.go();
   } 
```

}

在上面的类中“ `The Most specific version of go() method is called`”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T04:02:00.337

```
B b = new B();
((A)b).foo(); 
```

在第二行中，您正在使用对象“b”的引用。因此，您在其引用上调用的任何方法都将调用`foo()`对象“b”的重写方法。从对象引用的角度思考将帮助您清楚地理解 Java 的 OOPS 概念。

# casting - 如何将 Kinect.Toolbox.ReplayColorImageFrame 转换为 Kinect.ColorImageFrame

> ID：12994809
> 
> 赞同：1
> 
> 时间：2012-10-21T03:52:18.907
> 
> 标签：casting, type-conversion, kinect, kinect.toolbox

我对 Kinect SDK 提供的 KinectSamples 的 KinectColorViewer 做了一些小的修改。在 KinectColorViewer 上，我创建了一个简单地在查看器的 Image 元素上渲染 ColorImageFrame 的方法，我的方法是这样的

```
 public void UpdateColorImage(ColorImageFrame imageFrame)
    {
        RenderImageOnViewer(imageFrame); // the code of RenderImageOnViewer is omited for simplicity
    } 
```

我的问题是，我使用 Kinect.Samples 中的 KinectColorViewer 接收 ColorImageFrame 作为参数，并使用 Kinect.Toolbox 项目中的 Recorder，它为我提供了 ReplayColorImageFrame。

我正在尝试将 ReplayColorImageFrame 转换为 ColorImageFrame，但 ReplayColorImageFrame 不继承 ColorImageFrame。

这个怎么做？

# php - PHP exec 错误，可能是 MAMP 使用 ghostscript

> ID：12994811
> 
> 赞同：1
> 
> 时间：2012-10-21T03:52:32.293
> 
> 标签：php, exec, mamp, ghostscript

我一直在尝试在 PHP 中使用 ghostscript 将 pdf 文件转换为图像（png、jpg）。

我真的不在乎，只要它们是图像。这是我使用的代码。

```
exec("gs -sDEVICE=jpeg -sOutputFile=/Applications/Mamp/htdocs/cover.jpg -r144 /Applications/Mamp/htdocs/test.pdf"); 
```

当我在命令行中输入完全相同的内容（显然没有 exec 和引号）时，它完全符合我的要求。但是，当我运行 php 文件时，什么也没有发生。我正在使用 MAMP 服务器，服务器似乎工作正常，每当我用它运行另一个文件时，我都没有问题。任何人都知道为什么它可能无法正确执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T04:30:16.017

可执行文件可能不在 PHP的`gs`路径中，因此无法使用`exec()`. 输入命令的完整路径将允许它在 PHP 中运行。

要查找可以从命令行运行的完整路径`which gs`，因为它对您是可执行的，然后将该路径复制到`exec()`方法中。

```
> which gs
/path/to/gs 
```

`exec()`在 PHP 中更新

```
exec("/path/to/gs -sDEVICE=jpeg -sOutputFile=/Applications/Mamp/htdocs/cover.jpg -r144 /Applications/Mamp/htdocs/test.pdf"); 
```

# web-services - 使客户端应用程序执行 2 个 HTTP GET 请求以模仿不受支持的请求

> ID：12994812
> 
> 赞同：2
> 
> 时间：2012-10-21T03:52:35.797
> 
> 标签：web-services, http, get, webserver

可以让客户端应用程序执行 2 个 HTTP GET 请求来模仿不受支持的请求吗？我正在构建一个处理事件和场地的 Web 服务，但查询可能是：

场地 1 和场地 2 或场地 1 或场地 2

我正在考虑一种允许两者的方法是让 Web 服务允许 Venue1 或 Venue2，然后强制客户端应用程序在每个场所执行 GET 请求，然后在客户端执行 Venue1 和 Venue2 操作。

因此该服务仅提供 Venue1 OR Venue2，但客户端必须独立 GET Venue1 和 Venue2 并在其端执行 AND 操作。

有这样做的标准方法吗？

# php - preg_match_all 索引数组

> ID：12994813
> 
> 赞同：0
> 
> 时间：2012-10-21T03:52:36.660
> 
> 标签：php, multidimensional-array, preg-match-all

```
$pattern='/(\/title\/tt\d{7}\/&quot;[\s]+title=&quot;)([\/\(\)-:@!%*#=_|?$&;.\w\s]+?)(&lt;)/um';
preg_match_all($pattern,$title[0],$anchor);
print_r ($anchor); 
```

对于上面的代码，我得到了一堆 for anchor[0]、anchor[1]、anchor[2]、anchor[3]。

但是当我分别使用这些行时：

```
 print_r ($anchor[0]);
    echo "<br/>";
    print_r ($anchor[1]);
    echo "<br/>";
    print_r ($anchor[2]); 
```

$anchor[3] 的输出被附加到相应的 $anchor[2] 中。

为什么会发生这种情况，我该如何将它们分开？

它的 var_dump($anchor) 如下（很长我知道）

`array(4) { [0]=> array(49) { [0]=> string(67) "/title/tt0145487/" title="Spider-Man (2002)"><" [1]=> string(81) "/title/tt1872181/" title="The Amazing Spider-Man 2 (2014)"><" [2]=> string(69) "/title/tt0316654/" title="Spider-Man 2 (2004)"><" [3]=> string(69) "/title/tt0413300/" title="Spider-Man 3 (2007)"><" [4]=> string(86) "/title/tt1722512/" title="Ultimate Spider-Man (2012 TV Series)"><" [5]=> string(86) "/title/tt2016724/" title="Ultimate Spider-Man (2012 TV Series)"><" [6]=> string(98) "/title/tt0112175/" title="Spider-Man: The Animated Series (1994 TV Series)"><" [7]=> string(98) "/title/tt0706875/" title="Spider-Man: The Animated Series (1994 TV Series)"><" [8]=> string(77) "/title/tt0100669/" title="Spiderman (1990 Short Film)"><" [9]=> string(81) "/title/tt0594909/" title="HBO First Look (1992 TV Series)"><" [10]=> string(81) "/title/tt0394608/" title="HBO First Look (1992 TV Series)"><" [11]=> string(89) "/title/tt1972762/" title="CollegeHumor Originals (2006 TV Series)"><" [12]=> string(93) "/title/tt0976192/" title="The Spectacular Spider-Man (2008 TV Series)"><" [13]=> string(92) "/title/tt2056702/" title="Spider-Man XXX: A Porn Parody (2011 Video)"><" [14]=> string(92) "/title/tt1246781/" title="The Angry Video Game Nerd (2006 TV Series)"><" [15]=> string(87) "/title/tt1832811/" title="The Nostalgia Critic (2007 TV Series)"><" [16]=> string(77) "/title/tt0290983/" title="Spider-Man (2003 TV Series)"><" [17]=> string(77) "/title/tt0706896/" title="Spider-Man (2003 TV Series)"><" [18]=> string(88) "/title/tt2218492/" title="Big Morning Buzz Live (2011 TV Series)"><" [19]=> string(90) "/title/tt2249079/" title="The Amazing Spider-Man (2012 Video Game)"><" [20]=> string(89) "/title/tt0076975/" title="The Amazing Spider-Man (1977 TV Series)"><" [21]=> string(79) "/title/tt2312692/" title="Cupcake Wars (2009 TV Series)"><" [22]=> string(103) "/title/tt1805858/" title="Special Collector&#x27;s Edition (2010 TV Series)"><" [23]=> string(101) "/title/tt0083481/" title="Spider-Man and His Amazing Friends (1981 TV Series)"><" [24]=> string(101) "/title/tt0804166/" title="Spider-Man and His Amazing Friends (1981 TV Series)"><" [25]=> string(77) "/title/tt0061301/" title="Spider-Man (1967 TV Series)"><" [26]=> string(77) "/title/tt0826480/" title="Spider-Man (1967 TV Series)"><" [27]=> string(77) "/title/tt0827431/" title="Spider-Man (1967 TV Series)"><" [28]=> string(77) "/title/tt0824199/" title="Spider-Man (1967 TV Series)"><" [29]=> string(77) "/title/tt0826474/" title="Spider-Man (1967 TV Series)"><" [30]=> string(77) "/title/tt0826475/" title="Spider-Man (1967 TV Series)"><" [31]=> string(79) "/title/tt1298456/" title="Troldspejlet (1989 TV Series)"><" [32]=> string(97) "/title/tt2084949/" title="Superman, Spiderman or Batman (2011 Short Film)"><" [33]=> string(82) "/title/tt1779548/" title="5 Second Movies (2007 TV Series)"><" [34]=> string(82) "/title/tt1779547/" title="5 Second Movies (2007 TV Series)"><" [35]=> string(82) "/title/tt1776372/" title="5 Second Movies (2007 TV Series)"><" [36]=> string(81) "/title/tt2250912/" title="The Amazing Spider-Man 3 (????)"><" [37]=> string(86) "/title/tt2008370/" title="The Nostalgia Chick (2008 TV Series)"><" [38]=> string(100) "/title/tt1629701/" title="Spider-Man: Shattered Dimensions (2010 Video Game)"><" [39]=> string(80) "/title/tt0411906/" title="Spider-Man 2 (2004 Video Game)"><" [40]=> string(80) "/title/tt0837564/" title="Spider-Man 3 (2007 Video Game)"><" [41]=> string(87) "/title/tt0207120/" title="Spider-Man Unlimited (1999 TV Series)"><" [42]=> string(91) "/title/tt2201697/" title="How It Should Have Ended (2005 TV Series)"><" [43]=> string(118) "/title/tt1132238/" title="Fighting, Flying and Driving: The Stunts of Spiderman 3 (2007 Video)"><" [44]=> string(87) "/title/tt2211391/" title="Atop the Fourth Wall (2008 TV Series)"><" [45]=> string(87) "/title/tt2318883/" title="Atop the Fourth Wall (2008 TV Series)"><" [46]=> string(87) "/title/tt2423022/" title="Atop the Fourth Wall (2008 TV Series)"><" [47]=> string(87) "/title/tt2063992/" title="Atop the Fourth Wall (2008 TV Series)"><" [48]=> string(87) "/title/tt1874973/" title="Atop the Fourth Wall (2008 TV Series)"><" } [1]=> array(49) { [0]=> string(36) "/title/tt0145487/" title="" [1]=> string(36) "/title/tt1872181/" title="" [2]=> string(36) "/title/tt0316654/" title="" [3]=> string(36) "/title/tt0413300/" title="" [4]=> string(36) "/title/tt1722512/" title="" [5]=> string(36) "/title/tt2016724/" title="" [6]=> string(36) "/title/tt0112175/" title="" [7]=> string(36) "/title/tt0706875/" title="" [8]=> string(36) "/title/tt0100669/" title="" [9]=> string(36) "/title/tt0594909/" title="" [10]=> string(36) "/title/tt0394608/" title="" [11]=> string(36) "/title/tt1972762/" title="" [12]=> string(36) "/title/tt0976192/" title="" [13]=> string(36) "/title/tt2056702/" title="" [14]=> string(36) "/title/tt1246781/" title="" [15]=> string(36) "/title/tt1832811/" title="" [16]=> string(36) "/title/tt0290983/" title="" [17]=> string(36) "/title/tt0706896/" title="" [18]=> string(36) "/title/tt2218492/" title="" [19]=> string(36) "/title/tt2249079/" title="" [20]=> string(36) "/title/tt0076975/" title="" [21]=> string(36) "/title/tt2312692/" title="" [22]=> string(36) "/title/tt1805858/" title="" [23]=> string(36) "/title/tt0083481/" title="" [24]=> string(36) "/title/tt0804166/" title="" [25]=> string(36) "/title/tt0061301/" title="" [26]=> string(36) "/title/tt0826480/" title="" [27]=> string(36) "/title/tt0827431/" title="" [28]=> string(36) "/title/tt0824199/" title="" [29]=> string(36) "/title/tt0826474/" title="" [30]=> string(36) "/title/tt0826475/" title="" [31]=> string(36) "/title/tt1298456/" title="" [32]=> string(36) "/title/tt2084949/" title="" [33]=> string(36) "/title/tt1779548/" title="" [34]=> string(36) "/title/tt1779547/" title="" [35]=> string(36) "/title/tt1776372/" title="" [36]=> string(36) "/title/tt2250912/" title="" [37]=> string(36) "/title/tt2008370/" title="" [38]=> string(36) "/title/tt1629701/" title="" [39]=> string(36) "/title/tt0411906/" title="" [40]=> string(36) "/title/tt0837564/" title="" [41]=> string(36) "/title/tt0207120/" title="" [42]=> string(36) "/title/tt2201697/" title="" [43]=> string(36) "/title/tt1132238/" title="" [44]=> string(36) "/title/tt2211391/" title="" [45]=> string(36) "/title/tt2318883/" title="" [46]=> string(36) "/title/tt2423022/" title="" [47]=> string(36) "/title/tt2063992/" title="" [48]=> string(36) "/title/tt1874973/" title="" } [2]=> array(49) { [0]=> string(27) "Spider-Man (2002)">" [1]=> string(41) "The Amazing Spider-Man 2 (2014)">" [2]=> string(29) "Spider-Man 2 (2004)">" [3]=> string(29) "Spider-Man 3 (2007)">" [4]=> string(46) "Ultimate Spider-Man (2012 TV Series)">" [5]=> string(46) "Ultimate Spider-Man (2012 TV Series)">" [6]=> string(58) "Spider-Man: The Animated Series (1994 TV Series)">" [7]=> string(58) "Spider-Man: The Animated Series (1994 TV Series)">" [8]=> string(37) "Spiderman (1990 Short Film)">" [9]=> string(41) "HBO First Look (1992 TV Series)">" [10]=> string(41) "HBO First Look (1992 TV Series)">" [11]=> string(49) "CollegeHumor Originals (2006 TV Series)">" [12]=> string(53) "The Spectacular Spider-Man (2008 TV Series)">" [13]=> string(52) "Spider-Man XXX: A Porn Parody (2011 Video)">" [14]=> string(52) "The Angry Video Game Nerd (2006 TV Series)">" [15]=> string(47) "The Nostalgia Critic (2007 TV Series)">" [16]=> string(37) "Spider-Man (2003 TV Series)">" [17]=> string(37) "Spider-Man (2003 TV Series)">" [18]=> string(48) "Big Morning Buzz Live (2011 TV Series)">" [19]=> string(50) "The Amazing Spider-Man (2012 Video Game)">" [20]=> string(49) "The Amazing Spider-Man (1977 TV Series)">" [21]=> string(39) "Cupcake Wars (2009 TV Series)">" [22]=> string(63) "Special Collector&#x27;s Edition (2010 TV Series)">" [23]=> string(61) "Spider-Man and His Amazing Friends (1981 TV Series)">" [24]=> string(61) "Spider-Man and His Amazing Friends (1981 TV Series)">" [25]=> string(37) "Spider-Man (1967 TV Series)">" [26]=> string(37) "Spider-Man (1967 TV Series)">" [27]=> string(37) "Spider-Man (1967 TV Series)">" [28]=> string(37) "Spider-Man (1967 TV Series)">" [29]=> string(37) "Spider-Man (1967 TV Series)">" [30]=> string(37) "Spider-Man (1967 TV Series)">" [31]=> string(39) "Troldspejlet (1989 TV Series)">" [32]=> string(57) "Superman, Spiderman or Batman (2011 Short Film)">" [33]=> string(42) "5 Second Movies (2007 TV Series)">" [34]=> string(42) "5 Second Movies (2007 TV Series)">" [35]=> string(42) "5 Second Movies (2007 TV Series)">" [36]=> string(41) "The Amazing Spider-Man 3 (????)">" [37]=> string(46) "The Nostalgia Chick (2008 TV Series)">" [38]=> string(60) "Spider-Man: Shattered Dimensions (2010 Video Game)">" [39]=> string(40) "Spider-Man 2 (2004 Video Game)">" [40]=> string(40) "Spider-Man 3 (2007 Video Game)">" [41]=> string(47) "Spider-Man Unlimited (1999 TV Series)">" [42]=> string(51) "How It Should Have Ended (2005 TV Series)">" [43]=> string(78) "Fighting, Flying and Driving: The Stunts of Spiderman 3 (2007 Video)">" [44]=> string(47) "Atop the Fourth Wall (2008 TV Series)">" [45]=> string(47) "Atop the Fourth Wall (2008 TV Series)">" [46]=> string(47) "Atop the Fourth Wall (2008 TV Series)">" [47]=> string(47) "Atop the Fourth Wall (2008 TV Series)">" [48]=> string(47) "Atop the Fourth Wall (2008 TV Series)">" } [3]=> array(49) { [0]=> string(4) "<" [1]=> string(4) "<" [2]=> string(4) "<" [3]=> string(4) "<" [4]=> string(4) "<" [5]=> string(4) "<" [6]=> string(4) "<" [7]=> string(4) "<" [8]=> string(4) "<" [9]=> string(4) "<" [10]=> string(4) "<" [11]=> string(4) "<" [12]=> string(4) "<" [13]=> string(4) "<" [14]=> string(4) "<" [15]=> string(4) "<" [16]=> string(4) "<" [17]=> string(4) "<" [18]=> string(4) "<" [19]=> string(4) "<" [20]=> string(4) "<" [21]=> string(4) "<" [22]=> string(4) "<" [23]=> string(4) "<" [24]=> string(4) "<" [25]=> string(4) "<" [26]=> string(4) "<" [27]=> string(4) "<" [28]=> string(4) "<" [29]=> string(4) "<" [30]=> string(4) "<" [31]=> string(4) "<" [32]=> string(4) "<" [33]=> string(4) "<" [34]=> string(4) "<" [35]=> string(4) "<" [36]=> string(4) "<" [37]=> string(4) "<" [38]=> string(4) "<" [39]=> string(4) "<" [40]=> string(4) "<" [41]=> string(4) "<" [42]=> string(4) "<" [43]=> string(4) "<" [44]=> string(4) "<" [45]=> string(4) "<" [46]=> string(4) "<" [47]=> string(4) "<" [48]=> string(4) "<" } }`

# c - 将 char 数组转换为一个 int

> ID：12994815
> 
> 赞同：0
> 
> 时间：2012-10-21T03:52:48.203
> 
> 标签：c, gcc, int

我不能使用 atoi，需要逐位执行。如何将其保存在 int 中。给定 char* temp 将其全部放在一个 int 中。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>
int main () {

    char* temp = "798654564654564654";
    int i = 0;

    for (i = 0; i < strlen(temp); i++) {

        printf("%d", temp[i] - 48);

    }

    printf("\n");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T03:59:45.763

像这样：

```
int i = 0, j = 0;
while (temp[j])
    i = i*10 + temp[j++] - '0'; 
```

不过考虑到你的数量很大，所以换成`i`类型`long long int`比较合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T04:10:45.320

```
#include<string.h>

int main() {    
   char* s = "798654564654564654";
   unsigned long long num = 0;    
   int i = 0, j = strlen(s);      
   for(i=0; i< j && s[i]>='0' && s[i]<='9'; i++)     
       num = num * 10 + s[i] - '0';    
   printf("%lld",num);    
   return 0;    
} 
```

它应该工作，这是一个[演示](http://codepad.org/xq3behZk)。

* * *

**编辑**：这是一个优化的溶胶：

```
unsigned long long latoi(char * s) {
   unsigned long long num = 0;
   while(*s>='0' && *s<='9') num = num * 10 + *(s++) - '0';
   return num;
} 
```

和[演示](http://codepad.org/1IuqYyf9)。

# java - 莫尔斯电码翻译器

> ID：12994817
> 
> 赞同：2
> 
> 时间：2012-10-21T03:52:57.983
> 
> 标签：java, morse-code

我一直在尝试创建一个摩尔斯电码翻译器，但遇到了一些问题。它可以编译，但是当我尝试运行它时，它只会询问第一个问题，即您要翻译哪种方式，而不是您要翻译什么。我知道我的第一个功能非常低效。我也使用`Input.getString`我认为不是标准的，但它基本上允许你输入一个字符串。

这是我的代码：

```
public class MorseCodeJavaProgram {
    public static void morse( String s3 ){
        int letters [ ] = new int [ 26 ];
        for ( int num = 0; num < s3.length(); num++ ){
                switch ( s3.charAt( num ) ){
                    case 'a':
                        System.out.print( ".- ");
                        break;
                    case 'b':
                        System.out.print( "-… ");
                        break;
                    case 'c':
                        System.out.print( "-.-. ");
                        break;
                    case 'd':
                        System.out.print( "-.. ");
                        break;
                    case 'e':
                        System.out.print( ". ");
                        break;
                    case 'f':
                        System.out.print( "..-. ");
                        break;
                    case 'g':
                        System.out.print( "--. ");
                        break;
                    case 'h':
                        System.out.print( "…. ");
                        break;
                    case 'i':
                        System.out.print( ".. ");
                        break;
                    case 'j':
                        System.out.print( ".--- ");
                        break;
                    case 'k':
                        System.out.print( "-.- ");
                        break;
                    case 'l':
                        System.out.print( ".-.. ");
                        break;
                    case 'm':
                        System.out.print( "-- ");
                        break;
                    case 'n':
                        System.out.print( "-. ");
                        break;
                    case 'o':
                        System.out.print( "--- ");
                        break;
                    case 'p':
                        System.out.print( ".--. ");
                        break;
                    case 'q':
                        System.out.print( "--.- ");
                        break;  
                    case 'r':
                        System.out.print( ".-. ");
                        break;  
                    case 's':
                        System.out.print( "... ");
                        break;
                    case 't':
                        System.out.print( "- ");
                        break;  
                    case 'u':
                        System.out.print( "..- ");
                        break;  
                    case 'v':
                        System.out.print( "...- ");
                        break;
                    case 'w':
                        System.out.print( ".-- ");
                        break;
                    case 'x':
                        System.out.print( "-..- ");
                        break;
                    case 'y':
                        System.out.print( "-.-- ");
                        break;
                    case 'z':
                        System.out.print( "--.. ");
                        break;
                    case ' ':
                        System.out.print( " | ");
                        break;
                }

            }
    }
    public static void toEnglish( String s1 ){
    String english [ ] = { "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "x", "y", "z", " " };
    String morse [ ] = { ".- ", "-... ", "-.-. ", "-.. ", ". ", "..-. ", "--. ", "…. ", ".. ", ".--- ", "-.- ", ".-.. ", "-- ", "-. ", "--- ", ".--. ", "--.- ", ".-. ", "... ", "- ", "..- ", "...- ", ".-- ", "-..- ", "-.-- ", "--.. ", "| " };

        for ( int num = 0; num < s1.length(); num++ ){
            if ( s1.charAt ( num ) == ' '){
                for ( int num2 = num; num2 < s1.length(); num2++ ){
                    if ( s1.charAt ( num2++ ) == ' '){
                        for ( int num3 = 0; num < 26; num3++ ){
                            if ( s1.substring( num++, num2 + 2 ) == ( morse [ num3 ] )){
                                System.out.print( english [ num3 ] );
                            }
                        }
                    }

                }

            }
        }
    }

    public static void main( String [] args ){
        String s2 = Input.getString( "To Morse or From Morse" );
        if ( s2 == "From Morse" ){
            String s1 = Input.getString( "Please type a phrase in English" );
            toEnglish( " " + s1 + " " );
        }
        if ( s2 == "To Morse" ){
            String s3 = Input.getString( "Please type a phrase in Morse Code" );
            morse( s3 );
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T03:55:34.130

您正在使用 比较字符串`==`。在 Java 中，[`==`比较引用，而不是内容](https://stackoverflow.com/questions/767372/java-string-equals-versus)。

将它们更改为 use `.equals()`，如下所示：

```
if ( s2 == "From Morse" ){ 
```

应该：

```
if ( s2.equals( "From Morse" ) ){ 
```

当然，这也应该适用于您的其他字符串比较。（您的`char`比较照原样很好。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T04:00:42.647

您正在将字符串值与 == 运算符进行比较。但是 == 运算符只检查对象引用是否相等。

```
 if ( s2 == "From Morse" ){
            String s1 = Input.getString( "Please type a phrase in English" );
            toEnglish( " " + s1 + " " );
        } 
```

相反，您尝试

```
 if ("From Morse".equals(s2) ){
                String s1 = Input.getString( "Please type a phrase in English" );
                toEnglish( " " + s1 + " " ); 
```

# iphone - UIImagePickerController 方向

> ID：12994819
> 
> 赞同：4
> 
> 时间：2012-10-21T03:53:37.790
> 
> 标签：iphone, objective-c, xcode, overlay, uiimagepickercontroller

我正在**使用自定义 OverLayView**`UIImagePickerController`为全屏相机创建一个，但是当我旋转我的设备时，我会收到一条错误消息“ ”作为我将如何执行此操作的参考，我正在关注本教程：[http://blog. blackwhale.at/?p=443](http://blog.blackwhale.at/?p=443)**`CGAffineTransformInvert: singular matrix.`**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T06:52:04.477

这是旋转相机覆盖视图的代码

```
cameraOverlayView.transform = CGAffineTransformMakeRotation(-3.141592/2); 
```

它用于比例变换：

```
cameraController.cameraViewTransform=CGAffineTransformScale(cameraController.cameraViewTransform, 1, 1.25); 
```**

# c++ - 递归和常量变量

> ID：12994824
> 
> 赞同：0
> 
> 时间：2012-10-21T03:55:20.780
> 
> 标签：c++, recursion, binary-tree

我正在尝试创建一种方法来告诉我二叉树的高度，最简单的方法是使用递归，但是由于某种原因，我的一个变量正在重置，即使我认为我正在检查，所以它会保持不变...
这是我的代码

```
template<class T>
int findHeight(binaryTreeNode<T> , int leftHeight, int rightHeight,
        int maxHeight) {
    if (leftHeight >= rightHeight && leftHeight >= maxHeight) {
        maxHeight = leftHeight;
    }
    else if (leftHeight < rightHeight && rightHeight >= maxHeight) {
        maxHeight = rightHeight;
    }
    if (t != NULL) {
        cout << "current leftHeight " << leftHeight << " current rightHeight "
                << rightHeight << " current maxHeight " << maxHeight << endl;

        findHeight(t->leftChild, ++leftHeight, rightHeight, maxHeight);
        findHeight(t->rightChild, leftHeight, ++rightHeight, maxHeight);
    }
    return ++maxHeight;
} 
```

这是我尝试这个时得到的输出：

```
current leftHeight 0 current rightHeight 0 current maxHeight 0
current leftHeight 1 current rightHeight 0 current maxHeight 1
current leftHeight 2 current rightHeight 0 current maxHeight 2
current leftHeight 2 current rightHeight 1 current maxHeight 2
current leftHeight 1 current rightHeight 1 current maxHeight 1
current leftHeight 2 current rightHeight 1 current maxHeight 2
current leftHeight 3 current rightHeight 1 current maxHeight 3
Returned value = 1 
```

谁能帮帮我吗？我怎样才能做到这一点，以便 maxHeight 不会被重置，并且会在整个递归过程中随时保持找到的最大值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:22:33.220

事情更简单：

```
int findHeight(binaryTreeNode<T> *t){
    return t ? 1 + MAX(findHeight(t->leftChild), findHeight(t->rightChild)) : 0;
} 
```

在您的代码中，您遇到了问题，因为`maxheight`它是按值传递的，而不是按引用传递的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:27:21.377

A function parameter has automatic storage duration (commonly called "on the stack"). This means each call to `findHeight` has its own variable named `maxHeight`. You increment one of these local variables right before its lifetime ends. And although you return the incremented value, you don't use that return value in the recursive calls.

Either use a reference parameter, or use the return values from the two recursive calls.

# python - 列出 Mac OS 上当前活动应用程序的所有活动快捷方式

> ID：12994829
> 
> 赞同：-1
> 
> 时间：2012-10-21T03:56:05.520
> 
> 标签：python, macos, perl, applescript

如何在 Mac OS 上列出当前活动应用程序的活动快捷方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:58:47.553

您可以使用 AppleScript 浏览菜单项，但这需要几秒钟。

```
set proc to "TextEdit"
set output to ""
tell application "System Events" to tell process proc
    set frontmost to true
    repeat with m in menu bar items 2 thru -1 of menu bar 1
        set output to output & name of m & linefeed
        repeat with m2 in menu items of menu 1 of m
            try
                set nme to name of m2
                set sc to my getshortcut(proc, m2)
                if nme is not missing value and sc is not missing value then
                    set out to out & "  " & sc & "  " & nme & linefeed
                end if
            end try
            try
                set mi to menu items of menu 1 of m2
                set subout to "  " & name of m2 & linefeed
                set appendsubout to false
                repeat with x in mi
                    try
                        set nme to name of x
                        set sc to my getshortcut(proc, x)
                        if nme is not missing value and sc is not missing value then
                            set subout to subout & "    " & sc & " " & nme & linefeed
                            set appendsubout to true
                        end if
                    end try
                end repeat
                if appendsubout then set output to output & subout
            end try
        end repeat
    end repeat
end tell
output

on getshortcut(proc, x)
    set text item delimiters to space
    set menuglyphs to text items of "2 ⇥ 3 ⇤ 4 ⌤ 9 ␣ 10 ⌦ 11 ↩ 16 ↓ 23 ⌫ 24 ← 25 ↑ 26 → 27 ⎋ 28 ⌧ 98 ⇞ 99 ⇪ 100 ← 101 → 102 ↖ 104 ↑ 105 ↘ 106 ↓ 107 ⇟ 111 F1 112 F2 113 F3 114 F4 115 F5 116 F6 117 F7 118 F8 119 F9 120 F10 121 F11 122 F12 135 F13 136 F14 137 F15 140 ⏏ 143 F16 144 F17 145 F18 146 F19"
    set cmdmods to text items of "⌘ ⇧⌘ ⌥⌘ ⌥⇧⌘ ⌃⌘ ⌃⇧⌘ ⌃⌥⌘ ⌃⌥⇧⌘ - ⇧ ⌥ ⌥⇧ ⌃ ⌃⇧ ⌃⌥ ⌃⌥⇧"
    tell application "System Events" to tell process proc
        set c to ""
        try
            set n to value of attribute "AXMenuItemCmdModifiers" of x
            set modifier to item (n + 1) of cmdmods
            if modifier is "-" then set modifier to ""
            try
                set c to (value of attribute "AXMenuItemCmdChar" of x)
                c as text
                return modifier & c
            on error
                set glyph to (value of attribute "AXMenuItemCmdGlyph" of x) as text
                repeat with i from 1 to (count menuglyphs)
                    if item i of menuglyphs is glyph then
                        return modifier & item (i + 1) of menuglyphs
                    end if
                end repeat
            end try
        end try
    end tell
    return missing value
end getshortcut 
```

# signed - 从 8 位转换为 16 位

> ID：12994830
> 
> 赞同：5
> 
> 时间：2012-10-21T03:56:17.810
> 
> 标签：signed, twos-complement

我想知道如何将 8 位 2 的补码转换为 16 位 2 的补码有符号数？

1100 0110 是一个例子

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T04:02:48.903

这称为*符号扩展*。您只需重复最高有效位，直到获得正确数量的位。对于您的示例，它将是 1111 1111 1100 0110

# c# - BackgroundWorker ProgressChanged 在从单独的类触发的表单中

> ID：12994833
> 
> 赞同：1
> 
> 时间：2012-10-21T03:56:26.577
> 
> 标签：c#, class, backgroundworker

我是 C# 的新手，我正试图围绕面向对象的编程来思考。这是我想要完成的事情：

我有一个带有 Form1 的 Windows 窗体应用程序和一个名为 connect 的单独类（相同的命名空间）。

我知道在执行大量代码时使用后台工作程序是一种很好的做法（以免冻结 UI）。所以我在 Form1 中创建了一个后台工作者和一个 progresschanged 句柄。我试图找到如何在单独的连接类中触发progresschange。在 Form1 的 progresschange 块中，我有一个大小写/开关，它确定屏幕上显示的文本。

解决这个问题的最佳方法是什么？我应该将后台工作人员传给其他班级吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T05:34:18.420

您还可以将 BackgroundWorker 放在 Connect 类中。然后，在此类中，您可以创建事件以将进度和完成情况报告回调用表单。

```
using System;
using System.ComponentModel;

namespace WindowsTest
{
public class Connect
{
    BackgroundWorker bw;
    public Connect()
    {
        bw = new BackgroundWorker();
        bw.WorkerSupportsCancellation = true;
        bw.WorkerReportsProgress = true;
        bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
        bw.DoWork +=new DoWorkEventHandler(bw_DoWork);
        bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);
    }

    public delegate void ProgressChangedHandler(Object sender, ProgressChangedEventArgs e);
    public event ProgressChangedEventHandler ProgressChanged;
    protected void RaiseProgressChangedEvent(ProgressChangedEventArgs e)
    {
        if (ProgressChanged == null)
        {
            return;
        }
        ProgressChanged(this, e);
    }

    public delegate void WorkCompleteEventHandler(Object sender, RunWorkerCompletedEventArgs e);
    public event WorkCompleteEventHandler WorkComplete;
    protected void RaiseWorkCompleteEvent(RunWorkerCompletedEventArgs e)
    {
        if (WorkComplete == null)
        {
            return;
        }
        WorkComplete(this, e);
    }

    public void Cancel()
    {
        if (bw.IsBusy)
        {
            bw.CancelAsync();            
        }
    }

    public void BeginLongRunningProcess()
    {
        bw.RunWorkerAsync();
    }

    private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        RaiseWorkCompleteEvent(e);
    }

    private void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        RaiseProgressChangedEvent(e);
    }

    private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        if (ConnectToServer())
        {
            bw.ReportProgress(0, "Connected to server");
            e.Result = LongRunningProcess();
            if (e.Result.ToString() == "Cancelled")
            {
                e.Cancel = true;
                return;
            }
        }
        else
        {
            //Connection failed
            e.Cancel = true;    
        }
    }

    private bool ConnectToServer()
    { 
        //Attempt connection
        return true;
    }

    private string LongRunningProcess()
    {
        int recordCount = 250;
        for (int i = 0; i <= recordCount; i++)
        {
            if (bw.CancellationPending)
            {
                return "Cancelled";
            }
            double progress = ((double)i / (double)recordCount) * 100;
            bw.ReportProgress((int)progress , "Running Process");
            System.Threading.Thread.Sleep(25);
        }
        return "The result is 2";
    }
}
} 
```

然后在您的表单上，您只需处理事件。

```
namespace WindowsTest
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    Connect connect;

    private void btnConnect_Click(object sender, EventArgs e)
    {
        connect = new Connect();
        connect.ProgressChanged += new ProgressChangedEventHandler(connect_ProgressChanged);
        connect.WorkComplete += new Connect.WorkCompleteEventHandler(connect_WorkComplete);
        connect.BeginLongRunningProcess();
    }

    private void connect_WorkComplete(object sender, RunWorkerCompletedEventArgs e)
    {
        if (e.Cancelled)
        {
            lblStatus.ForeColor = Color.Red;
            lblStatus.Text = string.Format("Status: {0}", "User Cancelled!");
            return;
        }

        if (e.Error != null)
        { 
            //Process exception       
            lblStatus.Text = string.Format("Status: {0}", "Error!");
            lblStatus.ForeColor = Color.Red;
            return;
        }

        lblStatus.Text = string.Format("Status: Complete. {0}", e.Result);
    }

    private void connect_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
        lblStatus.Text = string.Format("Status: {0}", e.UserState.ToString());
    }

    private void btnCancel_Click(object sender, EventArgs e)
    {
        if (connect != null)
        {
            connect.Cancel();
        }
    }        
}
} 
```

请注意，BackgroundWorker.ReportProgress() 方法的第二个参数（UserState）可以传递任何对象。它不一定是字符串。例如，如果您从数据库中检索一行/多行，则可以通过此方法将该行传递回用户界面。BackgroundWorker.DoWork 方法的 e.Result 也是如此。

埃里克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T04:33:13.900

您可以将连接类的步骤分解为单独的方法并按如下顺序调用它们。您不必从连接类对象触发 progresschanged 事件。

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
     ConnectClass conObject= new ConnectClass();
     backgroundWorker.ReportProgress(30, "Connecting ...");
     conObject.Connect();
     backgroundWorker.ReportProgress(30, "Connected."+"\n Executing query");
     conObject.Execute();
     backgroundWorker.ReportProgress(40, "Execution completed.");
} 
```

# python - GTK 获取迭代器名称及其应用的文本

> ID：12994839
> 
> 赞同：0
> 
> 时间：2012-10-21T03:57:29.087
> 
> 标签：python, tags, gtk, pygtk

嗨，我正在制作一个程序，它可以将不同的属性应用于使用 iters 在文本小部件中键入的文本。然后根据迭代将该文本拆分并传递给外部程序。

但是，我只能获得应用的第一个迭代器，而无法获得任何后续迭代器。

例如。（粗体）你好（粗体）（斜体）你好吗（斜体）

其中（粗体）和（斜体）代表迭代。然而，下面的代码仅识别 (Bold)Hi there(Bold) 并将 (bold) 存储在 tagList 和 Hi there 在 textList 中。将标签名称附加到 tagList 时会引发列表索引超出范围错误。有没有办法解决这个问题？

```
def splitTextMarkup(self):
    it =buff.get_start_iter()
    tagList=[]
    textList=[]
    while not it.is_end(): 
        nextpos=it.copy()
        nextpos.forward_to_tag_toggle(None)
        textList.append(it.get_text(nextpos))
        tagList.append(it.get_tags()[0].props.name)
        it=nextpos
    return tagList,textList 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:13:36.887

解决它！forward_to_tag_toggle 需要调用两次，因为它首先跳转到标签的关闭切换。再次调用它会跳转到下一个标签的 on toggle

```
def splitTextMarkup(self):
it =buff.get_start_iter()
tagList=[]
textList=[]
while not it.is_end(): 
    nextpos=it.copy()
    nextpos.forward_to_tag_toggle(None)
    nextpos.forward_to_tag_toggle(None)
    textList.append(it.get_text(nextpos))
    tagList.append(it.get_tags()[0].props.name)
    it=nextpos
return tagList,textList 
```

# html - 针对不同设备缩放 Web 应用程序的屏幕大小

> ID：12994842
> 
> 赞同：5
> 
> 时间：2012-10-21T03:57:40.203
> 
> 标签：html, cordova, screen, resolution

您如何正确扩展 Web 应用程序以使其与跨平台兼容。有这么多不同的手机具有不同的屏幕分辨率，我应该瞄准一个好的高度/宽度。做这个规模的最有效方法是什么？

如果您不明白我的问题：当您在手机上加载网页时，它会自动将其缩放为网页的完整大小，而不是放大它以便您可以正确查看文本。你怎么有它，所以它会自动放大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T04:17:50.317

我建议您阅读有关[响应式网页设计](http://en.wikipedia.org/wiki/Responsive_web_design)的内容。

引自[维基百科](http://en.wikipedia.org/wiki/Responsive_web_design)：***“响应式网页设计（通常缩写为 RWD）是一种网页设计方法，在该方法中，网站经过精心设计，可提供最佳的查看体验——轻松阅读和导航，只需最少的调整大小、平移和滚动即可跨越广泛的设备（从台式电脑显示器到手机）。”***

如果你[搜索它](https://www.google.com/search?q=responsive%20web%20design&rlz=1C1TSNP_enUS471US471&aq=0&oq=responsive%20web%20&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8)，有数百篇很棒的文章。

这[是初学者指南](http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design)。也有关于该主题的书籍。

# java - 如何在 Mac OSX 上增加 java 的全局堆大小

> ID：12994846
> 
> 赞同：7
> 
> 时间：2012-10-21T03:58:34.860
> 
> 标签：java, macos, jvm-arguments

Apple 认为从 Utilities 文件夹中删除 Java Preferences 应用程序是合适的，因此不再有任何 GUI 方法可以增加 Java 分配的内存限制。

我不是一个真正的命令行人，所以我想我会在这里问。

我有一些需要大内存分配的应用程序，我在这台机器上运行 16GB 的 RAM，所以我不担心在这些应用程序运行时运行其他应用程序，更不用说我不经常运行这些应用程序。 我想将允许的内存限制增加到 6144m，但我不知道如何正确执行。

这是我找到的代码，但是在运行它并检查我的活动监视器之后，有问题的应用程序仍然只能访问大约 800m，它最终会耗尽堆并崩溃。

```
export _JAVA_OPTIONS='-Xmx6144m' 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T05:16:07.723

从[这篇关于最近更新后缺少的 Java 首选项](http://reviews.cnet.com/8301-13727_7-57533880-263/java-preferences-missing-after-latest-os-x-java-update/)的文章看来，您可以[下载 Java 1.7](http://www.macupdate.com/app/mac/44788/java-se-runtime-environment-7)，然后可以在系统首选项下访问 Oracle 的 Java 首选项。

请注意，您的应用程序可能会或可能不会在 Java 1.7 下运行 - 升级总是有风险的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T04:22:39.210

诀窍是编辑`/etc/launchd.conf`（您需要以管理员身份执行此操作）；添加

```
setenv _JAVA_OPTIONS "-Xmx6144m" 
```

*   请注意，这不适用于 MacOS 10.10 及更高版本，需要您改为执行[此](https://stackoverflow.com/questions/25385934/setting-environment-variables-via-launchd-conf-no-longer-works-in-os-x-yosemite)操作。

# php - 当页面将“ISO-8859-1”作为元字符集时，浏览器将其检测为 UTF-8

> ID：12994850
> 
> 赞同：3
> 
> 时间：2012-10-21T03:59:00.717
> 
> 标签：php, utf-8, character-encoding, iso-8859-1

我正在处理站点转移，在此过程中我的字符集被弄乱了。起初，我将所有文件原封不动地传输，新服务器上的文件显示`<?>`特殊字符的图标。浏览器的字符编码（Chrome 和 FF）一目了然，告诉我它正在自动检测 UTF-8。页面的元字符集设置为 ISO-8859-1。副本是从多个数据库中的各种表中提取的（不要问）。

在原始站点上，所有内容都按应有的方式显示。在新站点上，`<?>`...我深入研究了它，在 php.ini 中找到了默认字符集 =“UTF-8”，将其设置为空。现在网站大部分页面显示正常，浏览器识别元字符集标签，大家开心；也就是说，直到我导航到根目录下的文件夹。

这个文件夹中的文件，虽然它们的元字符集是 ISO-8859-1，但不知何故告诉浏览器被读取为 UTF-8，这意味着我`<?>`在这些页面上看到了。如果我将浏览器设置为 ISO-8859-1，则显示正常。自动检测将其重置为 UTF-8。有任何想法吗？

谢谢！

**更新（从下面的评论中添加）：**

[我按照 martinstoeckli 的建议通过W3C 检查器](http://validator.w3.org/i18n-checker/)运行该页面，它告诉我 HTTP Content-Type 是`Content-Type: text/html; charset=utf-8`而元标记是`<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>`，这给了我一个**冲突字符编码声明**错误。疯狂的是，我一生都无法弄清楚 UTF-8 声明的来源！它不在任何文件中，所有文件都保存为 UTF-8 不带 BOM，php.ini 设置为声明无默认值，文件夹的 .htaccess 设置为 PatomaS 建议的那样。

（值得一提的是，Mozilla 的 Web Sniffer 确认 HTTP 标头 Content-Type 为`text/html; charset=utf-8`.）

**更新：** 虽然我们没有像我提出的那样解决这个问题，但我确实决定解决我的字符编码问题的最佳方法是重构所有内容以使用 UTF-8 编码。当然，这可能意味着您会在这里看到我提出更多令人兴奋的新手问题，例如“为什么 utf8-encode() 不做我的 łâùñdrÿ？”

当然，这意味着谜团仍然存在：当一切似乎都配置不同时，是什么导致服务器发送 UTF-8 的 HTTP 内容类型字符集标头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T04:16:11.233

文件中是否可能包含 BOM（字节顺序标记）。为确保使用 notepad++ 打开文件并检查编码菜单，您还可以选择转换为 ansi 作为测试选项。

顺便说一句，我可以建议在任何地方使用 utf-8 是一种更好的长期方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T06:52:04.670

有一个很棒的[W3-checker](http://validator.w3.org/i18n-checker/)可以解决所有类型的编码问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-07T15:34:58.237

PHP 5.6 带有一个新的默认字符集指令设置为`UTF-8`，在某些情况下，这可能是在元标记中作为 latin1 提供的页面的问题，并且可能是验证服务冲突的原因，您可以通过调用`ini_set('default_charset', 'iso-8859-1')`脚本来覆盖此指令。

为此，请在脚本开头将这段代码编码为 latin1 的每个 php 文件：

例子：`index.php`

```
<?php
  $server_root = realpath($_SERVER["DOCUMENT_ROOT"]);
  $config_serv = "$server_root/php/config.php";
  include("$config_serv");
?> 
```

然后在您的根网站下创建一个文件夹“php”并将这段代码放入`config.php`：

例子：`config.php`

```
<?php
  ##########################################################################
  # Server Directive - Override default_charset utf-8 to latin1 in php.ini #
  ##########################################################################
  @ini_set('default_charset', 'ISO-8859-1');
?> 
```

如果您的 php.ini 设置为 latin1 ( `ISO-8859-1`) 并且您想要提供 utf-8 (unicode) 页面，您可以使用相同的方式强制编码，但使用 utf-8 代替 iso-8859-1。看那个：

例子：`config.php`

```
<?php
  ##########################################################################
  # Server Directive - Override default_charset latin1 to utf-8 in php.ini #
  ##########################################################################
  @ini_set('default_charset', 'UTF-8');
?> 
```

我希望你觉得我的回答有用，我以这种方式解决了我的问题！我在使用 firefox 及其 html/css 验证器时遇到问题，该验证器将我的页面设为 latin1，将标题设为 utf-8。这个矛盾解决了！我终于用我的答案解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T13:40:57.780

您可以在您的根目录`.htaccess`中为您希​​望成为 iso-8859-1 的所有文件设置此项

```
<FilesMatch "\.(htm|html|xhtml|xml|css|js|php)$">
    AddDefaultCharset iso-8859-1
</FilesMatch> 
```

请记住，服务器标头优先于内联标头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-27T20:01:55.810

即使您在代码中指定它，Apache 似乎也可以强制将字符集设置为默认值 (UTF-8)。

此选项位于您的 httpd.conf 文件中，称为 AddDefaultCharset。您需要对其进行注释以让您的代码统治世界。

这解决了我的问题。

来源：[https ://major.io/2007/11/15/change-the-default-apache-character-set/](https://major.io/2007/11/15/change-the-default-apache-character-set/)

# android - 用户退出应用程序后的定时通知

> ID：12994851
> 
> 赞同：0
> 
> 时间：2012-10-21T03:59:02.117
> 
> 标签：android, notifications

我需要设置一个定期通知，以提醒用户每周一和周三在我的应用程序上下订单。无论应用程序是否“打开”（即它是否已被销毁、暂停或是否是内存中的主要活动），都应弹出通知。

从开发人员文档和在线教程中，我不明白我是否需要： - 只需设置通知。- 使用警报器。- 用户广播接收器。- 使用使用警报管理器发送通知的服务。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:14:42.513

您将不得不结合所有的东西 AlarmManager + BroadcastReceiver + Notification + Service（可选）。

1.  首先，您必须决定在哪一天和什么时间通知用户。
2.  创建一个方法，该方法将使用 设置通知`AlarmManager + PendingIntent`并为您的待处理意图设置广播接收器意图。
3.  当您的广播接收器按时调用时，然后创建一个通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:04:38.720

使用 usealarmanager 通知使用并设置alarmanager 重复时间24 小时。通过android时间功能检查时间并发出通知。

谢谢

# opengl - opengl 抗锯齿

> ID：12994858
> 
> 赞同：2
> 
> 时间：2012-10-21T04:00:10.243
> 
> 标签：opengl, antialiasing

你如何在opengl中进行抗锯齿？

我想答案是“使用多重采样”，但我不确定如何实现它。

我想以“标准”而不是几乎不推荐的方式进行抗锯齿，如果有的话。

我正在使用 Qt 库来制作窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:27:59.770

这是一个详细的答案，其中包含一些关于过去如何执行抗锯齿以及现在应该如何执行的历史的讨论： [OpenGL antialiasing without thecharging buffer](https://stackoverflow.com/a/10509064/33263)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:23:40.670

执行此操作的常用方法是选择多样本帧缓冲区格式。也称为 FSAA（全场景抗锯齿）。在创建 QGLContext 或创建 QGLWidget 时启用多重采样就足够了。这种方法也将持续很长时间。唯一的变化可能是多重采样在内部工作的方式以及用于选择帧缓冲区格式的参数值。

# iphone - UITableView 高度不根据行数

> ID：12994859
> 
> 赞同：0
> 
> 时间：2012-10-21T04:00:11.943
> 
> 标签：iphone, uitableview, height

我正在设计一个`UIView`. 在我的`UiView`中，我放置了一个`UITableView`at `(x,y) = (10,186)`。我已将行高设置为`35`，行数设置为`2`. 所以从技术上讲，表格高度应该是`70`（或者`80`对于页眉和页脚的小 2 像素高度的最大值）。但除非我在属性检查器中将表格高度设置为`190`，否则它只显示一行。为什么桌子要求高度大于`number or rows * row`高度？它是否在其他地方占用空间？

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:19:12.137

嗨，Atin UITableView 将采用您在 xib 上给出的高度或在编码中按帧设置它。您唯一能做的就是在 xib 中给 UItableView 更少的帧，所以无论它在该空间中滚动的行数是多少问题和滚动会很好..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:34:32.737

这听起来像你没有设置`UITableViewDelegate`或者你在设置 `– tableView:heightForRowAtIndexPath:`？

# c# - Mono：是否支持更改线程的优先级？

> ID：12994862
> 
> 赞同：2
> 
> 时间：2012-10-21T04:00:23.737
> 
> 标签：c#, multithreading, mono, xamarin.android

我在 MonoDevelop 中编写代码，我想尝试 System.Threading 的命名空间。我写了这个简单的代码：

```
class MainClass {
  public static void Main (string[] args) {
    System.Threading.Thread thread=new System.Threading.Thread(new System.Threading.ThreadStart(ThreadProc));
    Console.WriteLine(thread.Priority);//output current thread priority
    thread.Priority=System.Threading.ThreadPriority.Highest;//change thread priority
    Console.WriteLine(thread.Priority);//output current thread priority again
  }
  public static void ThreadProc() {
    //make some operations
  }
} 
```

但我看到了这个： ![在此处输入图像描述](../Images/70cc37e0be0c0eb7bb5c03d23ff4a2f1.png)

即线程优先级没有改变（操作系统：Ubuntu 12.10）。如何更改线程优先级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:03:26.617

更改线程优先级尚未实现。

参见github 上的[源代码。](https://github.com/mono/mono/blob/master/mcs/class/corlib/System.Threading/Thread.cs#L615)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-02T07:48:47.207

这最近在 Mono 4.4 中实现。[相关文档在这里](http://www.mono-project.com/docs/about-mono/releases/4.4.0/#implement-thread-priority-setting)。

# ios - 垂直翻转 PVRTC 压缩图像数据

> ID：12994863
> 
> 赞同：1
> 
> 时间：2012-10-21T04:00:25.990
> 
> 标签：ios, opengl-es, compression, textures, pvrtc

我有一些 PVRTC 4bpp 图像数据需要在不解压缩的情况下就地垂直翻转。我编写的代码大部分都在工作，但翻页目前引入了小伪影，我不确定究竟是为什么。

PVRTC 翻转代码首先将 8 字节 4x4 压缩块移动到其翻转位置，该位置由 PowerVR SDK 中 PVRTDecompress.cpp 中的 TwiddleUV() 函数计算得出。这部分似乎是正确的。

其次，代码遍历所有 8 字节压缩块，颠倒第二个 4 字节的顺序，其中包含以 2bpp 存储的 4x4 调制数据。块的前 4 个字节包含保持不变的颜色数据。

这似乎非常接近正确，但它在翻转的图像中留下了原始图像中不存在的小伪影，并且主要表现为小的灰色水平线。如果翻转代码运行两次，则伪影消失并且图像与原始图像保持不变。

任何有 PVRTC 经验的人都可以解释翻转压缩图像数据还需要做什么吗？我认为问题可能与调制数据的翻转有关，但我对 PVRTC 文档的尝试在现阶段还没有得到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:31:28.577

为了更容易理解，您需要了解 PVRTC 解码数据的方式，因为它与 ETC1 或 S3TC/DXTC 等基于块的方案略有不同。为简单起见，我将仅描述 4bpp 变体。

PVRTC 包含 2 个低分辨率 15/16bpp 图像 A 和 B，它们的分辨率是最终纹理的 1/4 * 1/4，以及一个全分辨率但 2bpp 调制图像。为了“逻辑地”解码纹理像素 XY，将 A 和 B 图像*双线性*放大到目标分辨率，然后根据调制图像中的像素混合生成的颜色 Axy 和 Bxy。为了使硬件解码更简单，A 和 B 图像与调制数据以 1 个像素的速率与调制数据中的 16 个像素交织成 64 位字。

现在，它没有完全使用位混洗来翻转的原因是因为 4x4 双线性高档与 4x4 纹素的中心略有偏移（我认为原因在[wikipedia 链接](https://en.wikipedia.org/wiki/PVRTC)的 Graphics Hardware 2003 论文中有所描述）。我希望您唯一能做的就是实际评估每个像素，然后在翻转双线性颜色之后，找出四种可能性中的哪一种实际上是最接近的。在某种程度上，这将是一种重新压缩，但它应该相对较快。

# php - 您如何在 CouchBase 中增加或创建唯一 ID？

> ID：12994869
> 
> 赞同：2
> 
> 时间：2012-10-21T04:02:09.233
> 
> 标签：php, unique, couchbase

每次将数据插入 PHP 应用程序时，我在弄清楚如何创建唯一键时遇到问题，MySQL 用户习惯于自动递增索引键，但我似乎在 CouchBase 中找不到这样做的技术:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:35:47.773

只是为了向 Avsej 答案添加一些信息：正如您在 CounterId 模式中看到的那样，该程序正在使用 Couchbase 增量操作，此处记录了 PHP SDK：

*   [http://www.couchbase.com/docs/couchbase-sdk-php-1.1/api-reference-update.html#table-couchbase-sdk_php_increment](http://www.couchbase.com/docs/couchbase-sdk-php-1.1/api-reference-update.html#table-couchbase-sdk_php_increment)

以及 Couchbase 开发人员指南中有关增量的一些详细信息：- [http://www.couchbase.com/docs/couchbase-devguide-2.0/cb-incr-decr.html](http://www.couchbase.com/docs/couchbase-devguide-2.0/cb-incr-decr.html)

因此，通过此操作，您可以为您的应用程序创建“类似序列”的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T07:33:03.513

对于自动递增 ID，您可以使用一次操作[http://couchbasemodels.com/patterns/counter_id](http://couchbasemodels.com/patterns/counter_id)。您也可以使用一些随机的唯一 ID 生成器

# sqlite - sqlite 不使用带有类似查询的索引

> ID：12994870
> 
> 赞同：15
> 
> 时间：2012-10-21T04:02:14.190
> 
> 标签：sqlite

我一直试图让 sqlite 使用一个喜欢的索引，但无济于事。我试过整理 nocase，但仍然没有运气。任何人都对如何让 sqlite 像点击索引有任何想法。提前致谢

```
DROP TABLE IF EXISTS "test";
DROP TABLE IF EXISTS "test2";
DROP TABLE IF EXISTS "test3";
create table test(name TEXT COLLATE NOCASE);
create table test2(name TEXT);
create table test3(name TEXT);
create index idx_test_name on test(name);
create index idx_test2_name on test2(name);
create index idx_test3_name on test3(name COLLATE NOCASE);
insert into test(name) values('dan');
insert into test2(name) values('dan');
insert into test3(name) values('dan');
--explain query plan select * from test where name like 'test%' 
-- explain query plan select * from test2 where name like 'test%' 
-- explain query plan select * from test3 where name like 'test%' 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-21T04:43:25.590

从 sqlite 邮件列表中引用 (http://www.mail-archive.com/sqlite-users@sqlite.org/msg27760.html)

> LIKE 默认情况下不区分大小写。要让它使用您的索引，您需要使索引不区分大小写：
> 
> CREATE INDEX test_name ON test (name COLLATE NOCASE);
> 
> 或使 LIKE 区分大小写：
> 
> PRAGMA case_sensitive_like = 1;

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T10:12:29.810

在 SQLite 3.6.23.1 中，`test`使用了索引：

```
> explain query plan select * from test where name like 'test%';
TABLE test WITH INDEX idx_test_name

> explain query plan select * from test2 where name like 'test%';
TABLE test2

> explain query plan select * from test3 where name like 'test%';
TABLE test3 
```

使用 SQLite 3.7.15 的开发版本，同时使用`test`'s 和`test3`' 索引（索引 on`test2`用于*扫描*，而不是搜索）：

```
> explain query plan select * from test where name like 'test%';
SEARCH TABLE test USING COVERING INDEX idx_test_name (name>? AND name<?) (~31250 rows)

> explain query plan select * from test2 where name like 'test%';
SCAN TABLE test2 USING COVERING INDEX idx_test2_name (~500000 rows)

> explain query plan select * from test3 where name like 'test%';
SEARCH TABLE test3 USING COVERING INDEX idx_test3_name (name>? AND name<?) (~31250 rows) 
```

所以答案是更新SQLite。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-22T20:33:06.603

从[文档](http://www.sqlite.org/optoverview.html#like_opt)：

> 由 LIKE 或 GLOB 运算符组成的术语有时可用于约束索引。这种使用有很多条件：
> 
> *   LIKE 或 GLOB 运算符的左侧必须是具有 TEXT 关联的索引列的名称。
> *   LIKE 或 GLOB 的右侧必须是字符串文字或绑定到不以通配符开头的字符串文字的参数。
> *   ESCAPE 子句不能出现在 LIKE 运算符上。
> *   用于实现 LIKE 和 GLOB 的内置函数不得使用 sqlite3_create_function() API 重载。
> *   对于 GLOB 运算符，必​​须使用内置的 BINARY 整理序列对列进行索引。
> *   对于 LIKE 运算符，如果启用 case_sensitive_like 模式，则必须使用 BINARY 排序序列对列进行索引，或者如果禁用 case_sensitive_like 模式，则必须使用内置 NOCASE 排序序列对列进行索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-08T06:01:53.340

我也有同样的问题`org.xerial/sqlite-jdbc "3.25.2"`。一个简单的基于文本的索引没有与 LIKE 运算符一起使用。但是，如果我放`=`，索引就会被使用。我的表架构：

```
 create table if not exists test (ID INTEGER PRIMARY KEY, VALUE TEXT NOT NULL)
 create index test_idx on test(value)
 insert into test (ID,  VALUE) values (1, 'gold bangles')
 insert into test (ID,  VALUE) values (2, 'gold bandana')
 insert into test (ID,  VALUE) values (2, 'gold bracelet')

 explain query plan select * from test where value='gold bandana'

 Output:
 0|0|0|SEARCH TABLE test USING COVERING INDEX test_idx(VALUE=?)

 explain query plan select * from test where value like 'gold%'

 Output:
 0|0|0|SCAN TABLE test 
```

# mysql - 遍历数组以将值传递到数据库时遇到问题

> ID：12994875
> 
> 赞同：2
> 
> 时间：2012-10-21T04:02:52.427
> 
> 标签：mysql, arrays, loops

首先我需要提到我是编码新手，所以请记住这一点。我渴望学习并且总是在提问之前尝试查找内容，这是我在这里的第一篇文章。

我想做的是从我的数据库中提取一个 url 列表并获取某些值以添加到我的数据库中。当我遍历代码时，它会正确抓取所有内容并从每个 url 获取所有信息，但是当需要将信息放入数据库时​​，它会一遍又一遍地写入数组的第一个值，而不是写入下一个值。示例：我有 3 个网址，它会提取所有三个网址的信息

```
Array
(
  [0] => Array
   (
   [title] => Data
   [promo] => Data
   [date] => Data
   [location] => Data
   )
  [1] => Array
   (
     [title] => Data
     [promo] => Data
     [date] => Data
     [location] => Data
   )
   [2] => Array
    (
     [title] => Data
     [promo] => Data
     [date] => Data
     [location] => Data
    )
 ) 
```

当我检查我的数据库时，第一个数据集在那里 3 次，第二个和第三个被忽略。我附上了下面的代码，希望有人能指出我正确的方向。

谢谢。

```
include 'simple_html_dom.php';

$select_db = mysql_connect('******','*******', '');
$connect_database = mysql_select_db('grab', $select_db);
$url=mysql_query("SELECT * FROM graber");
while($row = mysql_fetch_array($url))
{
    // Create DOM from URL or file
    $html = file_get_html($row['urls']);

    // Find all article blocks
    foreach($html->find('div.event_detail') as $article)
    {
        $item['title'] =    $article->find('h1', 0)->plaintext;
        $item['promo'] =    $article->find('h2', 0)->plaintext;
        $item['date'] =     $article->find('div.authors_info span.date', 0)->plaintext;
        $item['location'] = $article->find('div.authors_info span.author', 0)->plaintext;
        $articles[] = $item;
    }

    $address=urlencode($articles[0]['location']);

    $geocode=file_get_contents('http://maps.google.com/maps/api/geocode/json?address='.$address.'&sensor=false');

    $output= json_decode($geocode);

    $lat = $output->results[0]->geometry->location->lat;
    $long = $output->results[0]->geometry->location->lng;

    $title = $articles[0]['title'];
    $location = $articles[0]['location'];
    $promo = $articles[0]['promo'];
    $olddate = $articles[0]['date'];
    $date = date('Y-m-d H:i:s', strtotime($olddate));
    $today = date('Y-m-d H:i:s');

    echo $lat.'<br />'.$long.'<br />'.$title.'<br />'.$location.'<br />'.$promo.'<br />'.$date.'<br /><br />';

            $dbc = mysqli_connect('********','*****','*******','*********')
            or die('Error I could not connect to DB');
            $query="INSERT INTO events(`id`,`parent`,`catid`,`contentid`,`type`,`title`,`location`,`summary`,`description`,`creator`,`startdate`,`enddate`,`permission`,`avatar`,`thumb`,`invitedcount`,`confirmedcount`,`declinedcount`,`maybecount`,`wallcount`,`ticket`,`allowinvite`,`created`,`hits`,`published`,`latitude`,`longitude`,`offset`,`allday`,`repeat`,`repeatend`)".
                    "VALUES('','0','1','0','profile','$title','$location','','$promo','24','$date','$date','0',NULL,NULL,'0','0','0','0','0','0','1','$today','0','1','$lat','$long','-6','1',NULL,'0000-00-00')";

            $results=mysqli_query($dbc,$query);

            echo mysqli_error($dbc);
}
 mysqli_close($dbc);

 mysql_close($select_db); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T04:10:59.397

不是 php 专家，但您似乎正在对数组的第一个维度进行硬编码以选择第一个元素。例如 `$address=urlencode($articles[0]['location']);` 应该是这样的：

```
$address=urlencode($articles[variable]['location']); 
```

所以每次你需要插入数据库时​​，检索到的值都是不同的。

# java - 为什么需要处理消息的碎片化

> ID：12994877
> 
> 赞同：1
> 
> 时间：2012-10-21T04:03:23.930
> 
> 标签：java, c++, networking, tcp, netty

消息的碎片化是在 IP 上完成的，为什么我必须在应用层处理它。例如 mina 或 netty？

消息的碎片化将是正确的顺序，对吗？

所以任何解码器都不需要处理任何顺序问题，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:02:06.530

IP 数据包的重组完全在 IP 层完成（在 UDP 或 TCP 看到数据包之前），因此您不必在应用层处理“碎片整理”。

当然，这仅适用于 UDP，因为它是基于*数据包*的，而 TCP 是*流*，因此从用户的角度来看，它没有严格的数据包概念。

TCP 可以自由地以它认为合适的任何分组传输传出字节，而接收方可以自由地将接收到的字节以它认为合适的任何分组传递给应用程序。这为 TCP 实现提供了很大的灵活性，因为它可以对传出`send()`的呼叫进行分组以进行更有效的传输，或者如果它们对于路径上的某个点来说太大，则将它们分解。

接收数据时，您*必须*将 TCP 视为只是一个字节流（如来自串行端口）；您可以随时获得任意数量的字节。保证顺序，但不保证分组。

在实践中，分组通常*与*数据的发送方式相匹配，这使得应用程序大部分时间都在工作，但并非一直在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:08:35.967

关于订单部分，您是对的。消息的第 2 部分将不早于第 1 部分可见，即使它在物理上确实更早到达。但是很有可能消息的第 2 部分比消息的第 1 部分更*晚才*可见。而且由于 TCP 不知道消息边界（它适用于字节），因此您只会收到半条消息。

# java - 在迭代 NodeList 时设置 DOM 元素属性会导致性能开销

> ID：12994883
> 
> 赞同：3
> 
> 时间：2012-10-21T04:05:31.707
> 
> 标签：java, xml, dom, nodelist

我在迭代 NodeList 时修改 DOM 元素属性时遇到性能问题。

```
<!-- language: lang-java -->
public static void overwriteSumDef(Document doc){
    NodeList nl = doc.getElementsByTagName("Session");
    int length = nl.getLength();

    for(int i=0; i<length; i++){
        Element elem = (Element)nl.item(i);
        elem.setAttribute("sum-def", "MON-SUN");
        //elem.removeAttribute("sum-def");
    }
} 
```

我已经下载了 Apache Xerces2 Java 代码并尝试调试内部实现。似乎 elem.setAttribute() 将在 Document 中设置一个标志，指示该文档已更改，然后在下次我尝试获取下一个匹配元素时，NodeList 将清除当前匹配元素列表并从根开始搜索重新节点（如果我错了，请纠正我）。由于此处的根节点是文档节点，因此如果在我的目标元素之前有数千个元素，则会导致大量开销。我的问题是：

1.  这是不可避免的，因为 NodeList 需要根据 DOM 规范“活动”吗？还是有其他实现可以更有效地处理这个问题？

2.  如果我用 elem.removeAttribute("sum-def") 替换设置属性行，则不会设置标志。为什么不将删除属性视为更改 DOM 文档的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T04:11:59.740

如果确实发生了这种情况，那么您可以通过迭代 NodeList 并将遇到的元素存储在 ArrayList 中来构建所有匹配节点的列表（例如 ArrayList）。然后，一旦您拥有 ArrayList 中的所有元素，就可以遍历 ArrayList 进行编辑。

# c++ - 从用户那里获取键盘输入，然后将该字符打印到控制台窗口

> ID：12994886
> 
> 赞同：0
> 
> 时间：2012-10-21T04:05:42.800
> 
> 标签：c++, console-application

我用 C++ 在控制台窗口中编写了一个简单的文本编辑器程序。我有一个 while 循环，它不断循环并检查是否按下了上、下、左、右或退格键。方向键移动光标位置，退格键删除该位置的字符。

**我的问题是：有没有办法可以设置一个条件，如果按下任何键，它会获取该键并将其打印在当前光标位置。例如，如果他们按下“a”键，则会在控制台窗口中打印一个“a”

这是循环

```
 while (pressedEscape == false) {
        if (GetAsyncKeyState(VK_UP))
            moveUp(position);
        else if (GetAsyncKeyState(VK_DOWN)) 
            moveDown(position);
        else if (GetAsyncKeyState(VK_LEFT))
            moveLeft(position);
        else if (GetAsyncKeyState(VK_RIGHT))
            moveRight(position);
        else if (GetAsyncKeyState(VK_BACK))
            deleteChar();
        else if (GetAsyncKeyState(VK_ESCAPE))
            pressedEscape = true;
        else if (GetAsyncKeyState(0x43) || GetAsyncKeyState(0x63))
            system("cls");

        gotoxy(position.x, position.y);

        SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 7);

        Sleep(100);
    } 
```

所以 id 喜欢的是另一个 else if 条件：

```
 else if (Any key is pressed) {
         print that key to the screen
    } 
```

我怎样才能做到这一点？

# android - 如何在 Eclipse 中安装 Scala for Android

> ID：12994887
> 
> 赞同：-5
> 
> 时间：2012-10-21T04:05:44.507
> 
> 标签：android, scala

我是 Scala 语言的新手，我不知道如何在 Eclipse 中安装 Scala for Android。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:26:28.977

试试Scala [for Android](http://code.google.com/p/scalaforandroid/)`build.xml`。

并且您需要对 Eclipse for Android 的代码编辑支持安装 Scala-IDE 插件。你可以从[这里](http://scala-ide.org)得到它。

# infinite-loop - 寻路 - 自主漫游车

> ID：12994888
> 
> 赞同：0
> 
> 时间：2012-10-21T04:06:02.493
> 
> 标签：infinite-loop, dijkstra, robot

我正在为自动漫游车完成导航任务。现在，漫游者可以计算出当前位置和给定某些障碍物的最终目的地之间的最短路径。我正在使用 dijkstra 的算法来找到最短路径，并且运行良好。

流动站有一个固定的范围，它可以识别它前面是否有障碍物。我面临的问题是，当最终目的地恰好位于无法到达或无法看到的区域时，流动站陷入相同路径的无限循环（从 A 点到 B，然后从 B 点到 A）。漫游者的视野。

我的问题是我应该如何检测到我被困在这个循环中并且我现在无法到达目的地，因为我应该得到一个新的最终目的地或者只是退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:58:15.193

这取决于您的应用程序，如果无法到达目的地，您可以检测到此检查是否访问了地图中所有可到达的地方并且目的地不是其中之一。否则，如果您只是错过了一些可能的路径，一旦您检测到您被卡住了，您可以尝试改变您的漫游车行为。例如，试图靠近带有指向它的传感器（如果有的话）的墙壁。

# c - 警告：控制到达非空函数的结尾；错误：未声明 null (c)

> ID：12994890
> 
> 赞同：-1
> 
> 时间：2012-10-21T04:06:13.133
> 
> 标签：c

```
q_node * pop(Queue * que) {
   if ((que->size == 0) || (que == NULL)) return null;
   q_node * item = que->head;
   if (freeNode(que)) {
      que->size--;
      return item;
   } else return null;
} 
```

当我尝试编译时，我收到了有关此函数底线的上述警告。结构 q_node 和 Queue 编译没有问题，freeNode() 也是如此......任何想法我做错了什么？

对于第一个 if 语句行，我还收到错误“null undeclared”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:10:45.257

在 C 中，使用`NULL`而不是`null`. 您可能需要`#include <stdlib.h>`获取此宏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T04:14:48.653

```
q_node * pop(Queue * que) {
   if ((que->size == 0) || (que == NULL)) return NULL;
   q_node * item = que->head;
   if (freeNode(que)) {
      que->size--;
      return item;
   }
   return NULL;
} 
```

去掉else语句是没用的。现在没有警告 ^_^ Gcc 看到你最后错过了一个 return 声明，并让你知道以防万一。

编辑：空-> 空

# php - 用php存储图像？

> ID：12994891
> 
> 赞同：-1
> 
> 时间：2012-10-21T04:06:17.730
> 
> 标签：php, image

我正在尝试将图像存储在我的网站中，以便我可以轻松使用它，但我从[这里](http://www.w3schools.com/php/php_file_upload.asp)找到了这个 php 代码，但我不太理解它。我刚刚开始 php，我不太清楚是什么改变和保留什么。如果你能更好地为我解释一下，我将不胜感激，谢谢。

```
 <?php
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:36:03.077

我将把它分解一下：

```
$allowedExts = array("jpg", "jpeg", "gif", "png"); 
```

我们只允许上传 jpg、jpeg、gif 和 png 文件。这个数组包含我们允许的扩展。如果您愿意，可以在此处添加其他扩展。

```
$extension = end(explode(".", $_FILES["file"]["name"])); 
```

这有几件事。首先，您需要意识到，当文件上传到 PHP 时，它会被 $_FILES 数组访问。$_FILES['file']['name'] 包含上传文件的文件名。为了从文件名中获取扩展名，名称被转换为一个带有explode的数组，将其拆分为“。” 特点。因此，如果文件名为 image.jpg，您最终会得到一个数组（'image'，'jpg'）。end() 函数获取数组的最后一个元素。所以在这个例子中你最终会得到'jpg'。

```
> if ((($_FILES["file"]["type"] == "image/gif") ||
> ($_FILES["file"]["type"] == "image/jpeg") || ($_FILES["file"]["type"]
> == "image/png") || ($_FILES["file"]["type"] == "image/pjpeg")) && ($_FILES["file"]["size"] < 20000) && in_array($extension,
> $allowedExts)) 
```

这只是检查文件类型是 'image/gif'、'image/jpeg'、'image/png' 或 'image/pjpeg' 之一，并且它小于 20000 字节并且文件扩展名在 $ allowedExts 数组。

假设它是以下行检查错误代码并在出现上传错误时将其打印出来：

```
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
} 
```

如果没有错误（即 $_FILES['file']['error'] <= 0），那么它会输出有关上传的一些信息，然后检查 /uploads 目录中是否存在带有上传名称的文件：

```
if (file_exists("upload/" . $_FILES["file"]["name"])) 
```

如果文件已经存在，则打印出错误。

如果该文件尚不存在，则它会从上传时放置的临时位置复制该文件，并将其移动到具有适当文件名的 /upload 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T04:34:01.750

我不确定您要删除或保留什么，但是，我可以解释代码中正在执行的操作。

此代码假定您有一个 html 块，该块定义了 type="file" 的输入，名称为="file"。

提交文件时传递给的参数存储在 $_FILES[] 中。$_FILES 有很多信息，包括文件类型、大小、错误信息。

第一行标识一个数组以供稍后使用的有效图像文件扩展名。

第一个 if 语句使用 mime 类型检查来检查传递的文件是否是有效的文件格式，检查扩展名是否有效，以及大小是否可接受。如果这不是有效的文件类型，代码将跳转到代码底部并创建错误消息。您可能希望更改可接受的文件大小。

如果有错误，则返回消息。如果没有错误，则此代码会打印有关正在上传的文件的统计信息。它提供文件名、文件类型、文件大小和文件的临时名称。

代码检查文件是否已经加载到“upload/”目录中。您可能想要更改文件的存储位置，您可以更改它以检查要存储图像的目录。

如果它发现文件已经在服务器上，它会发出警告消息并停止处理。您可能希望更改它以重命名文件并继续处理。

如果文件不在服务器上，则下一行： move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $_FILES["file"]["name"]);

将内容从临时存储位置移动到永久目录“upload/”并打印上传完成。

注意：这是上传过程的一个非常简单的版本......虽然有效。您可能想要： 1) 调整它，这样如果有人使用扩展名 .GIF、JPG 或 PNG 以及某些相机和人们用大写字母存储东西，它就不会失败。识别大写和小写的扩展名可能会很好。2）重命名旧文件或新上传的文件，如果您认为您可能想保存文件的旧副本。3）更新文件大小相当多，当前文件大小很小

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T04:42:09.210

**解剖：**

```
<?php
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg")) 
```

**以上检查上传图片的 mime-type 是否允许**

* * *

```
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts)) 
```

**指定最大大小并检查文件扩展名是否在数组 $extension 中**

* * *

{

```
 if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    } 
```

**检查上传错误，并打印出返回码。**

* * *

```
 else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />"; 
```

**回显上传文件的属性。**

* * *

```
 if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      } 
```

**如果`upload/`服务器上的文件夹中存在文件，则回显该特定文件已存在**

* * *

```
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "upload/" . $_FILES["file"]["name"]);
  echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
  }
} 
```

**如果服务器上的上传文件夹中不存在它，则将其复制到该文件夹​​中。**

* * *

```
 }
else
  {
  echo "Invalid file";
  } 
```

**如果在步骤 1 和 2 中未通过文件类型、扩展名、大小等检查，则无效**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T05:00:31.140

我将尝试对代码进行基本分解。

`$allowedExts = array("jpg", "jpeg", "gif", "png");`创建一个包含允许的文件扩展名（jpg、jpeg、gif 和 png）的数组。

`$extension = end(explode(".", $_FILES["file"]["name"]));`将提取正在上传的文件的文件扩展名，将该值保存在变量 $extension 中。

以下块解释如下：

```
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    } 
```

这个 if 条件检查正在上传的文件的扩展名。如果文件是 gif、jpeg 或 png 并且小于 20000 字节并且在允许的扩展名数组中找到扩展名，则条件为真。如果为假，则第二个 if 子句运行，代码将根据失败的原因打印错误。您可以在此处找到 PHP $_FILES 错误的完整列表：[http](http://www.php.net/manual/en/features.file-upload.errors.php) ://www.php.net/manual/en/features.file-upload.errors.php 。

如果检查文件扩展名和大小的 if 子句结果为真，则执行以下代码：

```
else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />"; 
```

此代码块将存储在服务器上的文件名、类型、大小和（最终？）临时文件打印给用户。

执行那段代码后，如下所示：

```
 if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  } 
```

基本上，这首先使用第一个 if 子句检查所选文件是否已经存在。如果存在，则说明并结束脚本。如果它不存在，它会传输文件并说明传输成功。

绝对最后一个 else 子句`else{echo "Invalid file";}`看起来只是一个故障保护，如果出现非常可怕的错误，它将退出脚本。

这是一个非常简单的文件传输脚本，安全性几乎为零。如果你想使用这个脚本要非常小心，因为如果你让不受信任的用户使用它可能会导致重大问题。

我希望这是可以理解的。

# .net - 连接到 Amazon S3 服务器时出现间歇性 500 错误

> ID：12994892
> 
> 赞同：0
> 
> 时间：2012-10-21T04:06:35.420
> 
> 标签：.net, asp.net-mvc-3, amazon-s3, amazon-web-services, amazon

我通过 dll 连接到 Amazon S3 服务器进行上传和下载。

我收到错误消息“无法连接到主机 187.6.78.8:443”。有时它连接，有时它不连接。

可能是什么原因？解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T16:11:49.147

检查您的防火墙设置，如果它阻止与亚马逊服务器连接。

# google-app-engine - Google App Engine：如何获得 10MB 的传入电子邮件限制？

> ID：12994893
> 
> 赞同：0
> 
> 时间：2012-10-21T04:06:36.527
> 
> 标签：google-app-engine

根据网址[https://developers.google.com/appengine/docs/go/mail/overview](https://developers.google.com/appengine/docs/go/mail/overview)（一直到最后），传入电子邮件有两个限制。管理员为收件人时为 16K，所有传入电子邮件为 10MB。我需要调整什么配置以使anything@appid.appspotmail.com 不是管理员收件人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:30:36.133

据我所知，只有出站邮件在*发送*给管理员时才具有 16KB 的限制。您的入站邮件必须发送到地址 string@appid.appspotmail.com（您无法注册为管理员），因此您可以接收 10MB 的传入邮件，并且不需要“设置调整”。

# vim - 如何使用 ESC 键在模式之间循环？

> ID：12994896
> 
> 赞同：2
> 
> 时间：2012-10-21T04:08:01.083
> 
> 标签：vim, vi

我最近一直在调整我的 vimrc。我想知道是否可以使用 ESC 键在 Insert-Normal-Command 模式之间循环，并使用 SHIFT+ESC 向后循环。

有可能吗，以前有人做过吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T04:41:27.070

通常将事物映射到`esc`会导致坏事发生，所以我不建议这样做。此外，很多终端没有`shift`+`esc`键。我发现，在大多数情况下，学习 vim 映射事物的默认方式是有回报的。偏差应该是非常特殊的情况或个人选项设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:04:41.610

现在 ESC 循环 Normal-Command-Insert 模式。一旦我让 F1 向后循环，将更新答案。

```
"   F1 is ESC
nnoremap <F1> <ESC>
inoremap <F1> <ESC>
vnoremap <F1> <ESC>

"   ESC Cycles n-c-i modes
nmap <ESC> :
cnoremap <ESC> <ESC>i 
```

编辑：根据建议，我没有直接映射 ESC，我现在已经将 F1 键映射到循环 nci 模式。

```
"   F1 Cycles n-c-i mode
nmap <F1> <ESC> :
inoremap <F1> <ESC>
vnoremap <F1> <ESC>
cnoremap <F1> <ESC> <ESC>i 
```

# facebook - 即使在用户登录 facebook 后，也会显示登录按钮

> ID：12994897
> 
> 赞同：0
> 
> 时间：2012-10-21T04:08:06.060
> 
> 标签：facebook

我使用 facebook javascript sdk 让用户登录，然后使用 php sdk 进行其他进程。这是我的示例代码：

```
<?php
require_once('AppInfo.php');
require 'src/facebook.php';
$facebook = new Facebook(array(
'appId'  => '*****',
'secret' => '*****',
));
// See if there is a user from a cookie
$user = $facebook->getUser();
if ($user) {
try {
// Proceed knowing you have a logged in user who's authenticated.
$user_profile = $facebook->api('/me');
} catch (FacebookApiException $e) {
// If the call fails we check if we still have a user. The user will be
// cleared if the error is because of an invalid accesstoken
if (!$facebook->getUser()) {
  header('Location: '. AppInfo::getUrl($_SERVER['REQUEST_URI']));
  exit();
}
}
}
?>
<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<title>Facebook App</title>
<h1>Facebook App</h1>
</head>
<body>
<div id="fb-root"></div>
<script type="text/javascript">               
  window.fbAsyncInit = function() {
    FB.init({
      appId: '<?php echo $facebook->getAppID() ?>', 
      cookie: true, 
      xfbml: true,
      status: true,
      channelUrl : '//<?php echo $_SERVER["HTTP_HOST"]; ?>/fb/channel.html'
    });

    FB.Event.subscribe('auth.login', function(response) {
      window.location.reload();
    });
      FB.Canvas.setAutoGrow();
  };
      // Load the SDK Asynchronously
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

</script>
 <?php if (isset($basic)) { ?>
 <h1>Hi</h1>

  <div>
    <h1>Welcome Hero</h1>
    <p class="tagline">
      This is your app
    </p>
  </div>
<?php } else { ?>
<div>
    <h1>Welcome Villian</h1>
    <div class="fb-login-button" data-scope="user_likes,user_photos,publish_stream"></div>
  </div>
  <?php echo $user_profile[id]; 
 echo "hhhh";} ?>
 </body>
    </html> 
```

问题是我总是看到 Else 部分在运行。即使在用户登录后，它也会显示 else 部分。有人可以帮帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:45:39.843

这是 php sdk 中的问题。使用 js sdk 和 phpsdk

# drupal-7 - Drupal hook_menu 解释

> ID：12994899
> 
> 赞同：0
> 
> 时间：2012-10-21T04:08:29.003
> 
> 标签：drupal-7, hook-menu

我一直在网上搜索，但没有找到任何解释 hook_menu 的访问回调和访问参数的地方。到目前为止，我认为它控制了谁可以访问该模块（如果我弄错了，请纠正我）。

因此，有人可以解释 hook_menu 访问回调和访问参数是如何工作的，以及如果您要将模块设置为只有管理员或只有注册用户才能看到您的模块，您将如何进行。

我也在研究 Drupal-7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:54:55.997

我认为您正在寻找的内容在[http://drupal.org/node/553368](http://drupal.org/node/553368)的示例中提供。

您是对的，您使用访问参数来识别访问从 $item 映射到回调的任何内容所需的访问级别。

:)

# java - 不共享任何外键关系的 JPA 实体之间的 @OneToOne 关系

> ID：12994903
> 
> 赞同：1
> 
> 时间：2012-10-21T04:09:24.223
> 
> 标签：java, jpa, one-to-one

我有两个实体如下：

*   `Invoice`
    *   主键是`InvoiceId`
    *   其他感兴趣的列是`[OrgId, VendorId, VendorInvoiceId]`
*   `InvoiceState`
    *   主键是`InvoiceStateId`
    *   其他感兴趣的列是`[OrgId, VendorId, VendorInvoiceId]`

“其他感兴趣的列”在两个表中形成唯一键，除了第二个表`InvoiceState`可以包含在第一个表中没有对应记录的记录`Invoice`。

在实体层，我想定义`Invoice`实体以包含对具有定义关系的`InvoiceState`实体`@OneToOne`的引用，`@JoinColumns`如下所示：

```
@OneToOne
@JoinColumns
({
    @JoinColumn(name="OrgId", referencedColumnName="OrgId"),
    @JoinColumn(name="VendorId", referencedColumnName="VendorId"),
    @JoinColumn(name="VendorInvoiceId", referencedColumnName="VendorInvoiceId")
}) 
```

但这会引发一个异常，即两个实体中的外键计数不相同。我什至没有在这两个表之间定义外键。

有没有办法定义`@OneToOne`两个不共享外键但有一组可以在期间使用的列的实体之间的关系`JOIN`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:36:44.757

我建议将上述 3 列映射为`component`using`@Embeddable`并使用组件进行映射，使用`@Embedded`和定义连接条件。

例如下面：

```
 @Embeddable
  public class ReferenceInfo {

      private Long orgId = null;
      private Long vendorId= null;
      private Long vendorInvoiceId= null;

      .........
      .........
  }

  @Entity
  public class Invoces{

     private Long invoiceId = null;
     private ReferenceInfo refInfo = null;
     private InvoiceStates invoiceStates = null;

     @Id
     public Long getInvoiceId(){
        return invoiceId;
     }

     ......

      @Embedded
      public ReferenceInfo getRefInfo(){
        ....
      }

      @OneToOne(mappedBy="refInfo"))
      public InvoiceStates getInvoiceStates(){
        return invoiceStates;
      }
  }

  @Entity
  public class InvoiceStates {

     private Long invoiceStateId = null;
     private ReferenceInfo refInfo = null;

     @Id
     public Long getInvoiceStateId(){
        return invoiceStateId;
     }

     ......

      @Embedded
      public ReferenceInfo getRefInfo(){
        ....
      }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:34:17.173

如果这三个字段是唯一的，您可以将它们标记为 InvoicesState 实体的 PK，然后允许 state 在 oneToOne 中引用它们。用于 JPA 的 PK 不需要匹配表 id，它只需要是唯一的。

一些提供者确实允许在映射中引用非 PK 字段。但并不总是建议这样做，因为实体通常缓存在 PK 上，因此您可能会获得额外的数据库命中来解析引用。在 Eclipselink 中，您可以通过仅使用其中一个字段来伪造映射，并在描述符定制器中更正映射以将其余字段添加到关系中。

# jquery-ui - 如何测试是否在 JQuery UI Droppable 上删除了至少一项？

> ID：12994910
> 
> 赞同：0
> 
> 时间：2012-10-21T04:11:04.137
> 
> 标签：jquery-ui, draggable, droppable

我有一个 div 被“指定”为 droppable: `$( "#droppable_div" ).droppable`。

另一方面，我有多个可拖动的 div，它们通过分配一个被指定为可拖动的 CSS 类来拖动：`$(".draggable_css").draggable`。

现在，这两者都是一种形式。因此，当我提交一个按钮时，我需要测试是否至少有一个可拖动项目/div 已被拖放到可放置 div 上。

有人可以建议如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:18:14.570

你可以计算你的 droppables div 的子元素的数量。

这是一个小提琴：http: [//jsfiddle.net/kn7uF/](http://jsfiddle.net/kn7uF/)

和代码：

```
<div id="droppable_div1"></div>
<div id="droppable_div2"><div id="find-me"></div><div id="find-me"></div></div>

<script>
    alert("There are "+$( "#droppable_div1 > #find-me" ).size()+" elements in the droppable_div1")    
    alert("There are "+$( "#droppable_div2 > #find-me" ).size()+" elements in the droppable_div2")
</script> 
```

# ios - 一周的第一天 - iOS

> ID：12994913
> 
> 赞同：1
> 
> 时间：2012-10-21T04:11:25.543
> 
> 标签：ios, nsdate, nscalendar, nsdatecomponents

我正在尝试从 AWS 计算一周中每个日期的数据。一周的第一天设置为星期一。这会导致我的程序在无限循环中运行。似乎无法理解为什么。

```
-(void)weekSectionSorting{

NSCalendar* calendar    = [NSCalendar currentCalendar];
[calendar setTimeZone:[NSTimeZone timeZoneWithName:@"Asia/Singapore"]];

NSDateFormatter *dateFormatter  = [[NSDateFormatter alloc] init];       // Initialize NSDateFormatter.

NSDate *today = [NSDate date];

NSDateComponents* comps = [calendar components:NSYearForWeekOfYearCalendarUnit |NSYearCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit fromDate:today];

[comps setWeekday:2]; // 2: monday
NSDateComponents* todayDc = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:today];
NSDateComponents* oneDay = [[NSDateComponents alloc] init];
[oneDay setDay:1];

[dateFormatter setDateFormat: @"dd-MM-yyyy"];

BOOL notToday = YES;
int count = 0;

NSDate *d = [calendar dateFromComponents:comps];
DLog(@"First day of week : %@", [dateFormatter stringFromDate:d]);
while (notToday) {
    count += [[self.dataDict objectForKey:[dateFormatter stringFromDate:d]] count];

    DLog(@"%i",count);
    NSDateComponents* curDc = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:d];

    if ([curDc year] == [todayDc year] && [curDc month] == [todayDc month] && [curDc day] == [todayDc day]) {
        notToday = NO;
    }

    d = [calendar dateByAddingComponents:oneDay toDate:d options:0];
  }

} 
```

# sql - 插入查询以从其他服务器从其他数据库导入数据

> ID：12994914
> 
> 赞同：0
> 
> 时间：2012-10-21T04:11:28.453
> 
> 标签：sql, sql-server, sql-server-2008

通常，用于导入数据的插入查询将是：

```
Insert Into mytable
Select * From otherDB.dbo.Othertable 
```

但问题是 otherDB 不在我当前的服务器中。它位于在线托管的另一台机器上。你能告诉我应该有什么变化来从不同的数据库导入它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:52:03.667

很多选择：

如果您无法从本地服务器直接访问其他服务器，

1.  您可以将数据导出到 taxt 文件并将文本文件传输到本地计算机并使用 SQL sevrer management studio (SSMS) 的导入/导出功能导入

如果您可以从本地服务器访问远程服务器，那么

1.  使用链接服务器
2.  使用 SSIS 包

如果要为许多表导入数据，则

1.  您可以使用不同的数据库名称将远程数据库的备份恢复到本地服务器，然后将所需的表移动到本地数据库

# python - 如何使用DOM在python中链接多个xml文件？

> ID：12994918
> 
> 赞同：0
> 
> 时间：2012-10-21T04:12:21.790
> 
> 标签：python, xml, dom, python-2.7, minidom

我有数千个带有标题的 xml 文件，它们在不同的 xml 文件中的描述。例子：

```
<entertainment id="12">

        <title>who is your favorite star?</title>
        <description>
               <male>Brad Pitt</male>
                   <female>Angelina Jolie</female>
            </description>
 </entertainment> 
```

我想在 python 中使用 minidom 创建一个网页，以列出所有链接到其答案页面的标题。

```
from xml.dom import minidom

doc = minidom.parse('entertainment.xml')
questions = doc.getElementsByTagName('entertainment')
print "<ul><h1>Star Questions</h1>"
for n in questions:
    print "<li>" + n.toxml() +"</li>";
print "</ul>"; 
```

我试过写这段代码，它列出了标题。但无法将标题链接到它的描述页面。在那个简短的描述页面中，例如“Brad Pitt”，我想创建一个链接并从另一个 xml 文件中提取数据，该文件包含有关 Brad Pitt 的更多信息。

我是python新手，所以不知道要建立一个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:44:06.910

您想要实现标签的方式是错误的。这是正确的层次结构：

```
doc.getElementsByTagName('entertainment')[0].getElementsByTagName('title')[0].toxml() 
```

# mysql - Errno 121，写入或更新时重复键？

> ID：12994919
> 
> 赞同：31
> 
> 时间：2012-10-21T04:12:28.460
> 
> 标签：mysql, mysql-workbench, workbench

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`restaurants`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`restaurants` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `name` VARCHAR(128) NOT NULL ,
  `description` VARCHAR(1024) NOT NULL ,
  `address` VARCHAR(1024) NOT NULL ,
  `phone` VARCHAR(16) NOT NULL ,
  `url` VARCHAR(128) NOT NULL ,
  `min_order` INT NOT NULL ,
  `food_types` SET('pizza', 'sushi', 'osetian_pie') NOT NULL ,
  PRIMARY KEY (`id`) ,
  UNIQUE INDEX `name_UNIQUE` (`name` ASC) ,
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`regions`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`regions` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `restaurant` INT NOT NULL ,
  `name` VARCHAR(128) NOT NULL ,
  PRIMARY KEY (`id`) ,
  INDEX `restaurant_idx` (`restaurant` ASC) ,
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) ,
  CONSTRAINT `restaurant`
    FOREIGN KEY (`restaurant` )
    REFERENCES `mydb`.`restaurants` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`food`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`food` (
  `id` INT NOT NULL ,
  `type` ENUM('pizza', 'sushi', 'osetian_pie') NOT NULL ,
  `name` VARCHAR(45) NOT NULL ,
  `ingredients` VARCHAR(256) NULL ,
  `image` VARCHAR(256) NOT NULL ,
  PRIMARY KEY (`id`) ,
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`food_variant`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`food_variant` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `size` VARCHAR(16) NOT NULL ,
  `weight` VARCHAR(16) NOT NULL ,
  `price` INT NOT NULL ,
  `food` INT NOT NULL ,
  `restaurant` INT NOT NULL ,
  PRIMARY KEY (`id`) ,
  UNIQUE INDEX `id_UNIQUE` (`id` ASC) ,
  INDEX `food_idx` (`food` ASC) ,
  INDEX `restaurant_idx` (`restaurant` ASC) ,
  CONSTRAINT `food`
    FOREIGN KEY (`food` )
    REFERENCES `mydb`.`food` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `restaurant`
    FOREIGN KEY (`restaurant` )
    REFERENCES `mydb`.`restaurants` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

Error is:
    Executing SQL script in server
    ERROR: Error 1005: Can't create table 'mydb.food_variant' (errno: 121) 
```

我没有看到重复的约束。它在哪里？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-21T04:15:03.500

这可能是因为您已经命名了至少一个具有与列相同标识符的约束：

```
/* You already have a column named `restaurant` in this table, 
   but are naming the FK CONSTRAINT `restaurant` also... */
CONSTRAINT `restaurant`
    FOREIGN KEY (`restaurant` )
    REFERENCES `mydb`.`restaurants` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION) 
```

应该为约束使用不同的标识符，`fk_restaurant`如：

```
CONSTRAINT `fk_restaurant`
    FOREIGN KEY (`restaurant` )
    REFERENCES `mydb`.`restaurants` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION) 
```

和表中的相同内容`food`：

```
 /* Name it fk_food */
  CONSTRAINT `fk_food`
    FOREIGN KEY (`food` )
    REFERENCES `mydb`.`food` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  /* Name it fk_restaurant */
  CONSTRAINT `fk_restaurant`
    FOREIGN KEY (`restaurant` )
    REFERENCES `mydb`.`restaurants` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION) 
```

这是我看到的仅有的三个，但我可能错过了其他三个。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-01-24T14:37:18.837

这个答案来自@Michael Berkowski[对答案的评论。](https://stackoverflow.com/questions/12994919/can-not-create-table-in-workbench-errno-121#comment59420118_12994930)我将其发布为答案，因为它实际上对我有用：

> 即使在跨多个表更改约束名称之后，我也得到了 errno 121。问题是，即使跨不同的表，您也不能拥有相同的约束名称。我正在使用 `fk_entryid`in`table1`并且`table2`必须将它们分别更改为 `fk_table1_entryid`and`fk_table2_entryid`才能使其工作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-06-17T23:26:51.910

上面的所有答案都很棒，但即使在我删除了所有表之后也没有解决我的问题，但是一切都运行良好，并且在我删除我的数据库并再次创建它之后迁移运行顺利......似乎密钥被缓存并且删除表后不会清除。

**注意**：这不是问题的答案，而是我认为可能会帮助其他人的经验。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T07:50:22.970

这是对@peter-moses 的一种回应，因为我遇到的问题与他完全相同。

我通过添加`--add-drop-database`到我的转储命令解决了这个问题。它记录在这里：[https ://mariadb.com/kb/en/mysqldump/](https://mariadb.com/kb/en/mysqldump/)

我的最终命令如下所示：

`mysqldump -uroot -ppassword --single-transaction --all-databases --add-drop-database`

# c++ - 如何删除没有虚拟析构函数的多态类类型的对象

> ID：12994920
> 
> 赞同：17
> 
> 时间：2012-10-21T04:12:32.743
> 
> 标签：c++, inheritance, destructor

当我尝试从第三方 SDK 编译一些代码时，出现以下错误。

```
*Description    Resource    Path    Location    Type
deleting object of polymorphic class type ‘Vendor_sys::VendorCode’ which has non-virtual destructor might cause undefined behaviour [-Werror=delete-non-virtual-dtor]   PnServer.cpp    /PCounter   line 467    C/C++ Problem* 
```

* * *

我不知道仅通过对供应商 SDK 的部分了解是否可以满足此条件，其中大部分繁重的工作是在 dll 或库对象中完成的。

我的构建环境是带有 gpp 的 Eclipse Juno。

我在 Google 中搜索了错误消息，但没有找到此错误的任何实例。

那么，如果我无法修改供应商代码的黑匣子部分，我有什么选择？

这是在制作过程中失败的代码：

```
delete pData->unit; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-21T04:37:52.943

坏消息，我害怕。您不应将该类用作基类。太多的限制和陷阱。你可能会侥幸逃脱，但为什么要冒险呢？向库供应商提交错误报告。

如果您不需要多态指针，请在您的类中包含该类型的对象，并委托您想要继承的成员函数。

```
class my_class {
private:
    evil_class evil;
public:
    virtual ~my_class() {/* stuff */}
    virtual int member() { return evil.member(); }
}; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-21T04:23:42.627

好吧，这是第三方 SDK 中的错误。任何用作基类的类都应该有一个虚拟析构函数。否则，当您删除指向派生类实例的基类的指针时，派生类的析构函数将不会被调用。

一种解决方法是不删除指向基的指针。相反，使用 dynamic_cast 获取指向派生类的指针（如果有许多从该基类派生的类，这可能会很不方便）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-21T04:26:30.940

当基类具有虚拟成员函数但没有虚拟 dtor 时会产生此警告。这是一个错误。如果您没有代码，那么除了确保手动取消分配子类中的任何资源外，您无能为力。就像在`cleanup()`您确保在删除对象之前手动调用的自定义成员函数中一样。

另一种选择是`static_cast`它到正确的类。请注意`dynamic_cast`（这会产生运行时开销并需要 RTTI）是不需要的。在这种情况下，编译器可以在编译时很好地导出类型关系。

当然，如果该对象在不属于您代码的其他地方被删除，那么您就不走运了。在这种情况下，请确保您的子类不分配任何东西。这样即使没有调用析构函数也不会泄漏。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-23T07:36:00.363

在这种情况下，您需要将虚拟析构函数添加到您的类中，而不是从此处删除编译标志。

例如。对于类，`Myclass`此错误即将到来，然后添加

```
virtual ~Myclass(){} 
```

试试这个灵魂，它会很好用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-21T04:52:12.667

您不能安全地使用指向基类的指针，除非它在基类上声明了虚拟析构函数。由于这是一个供应商库，您不能添加所需的虚拟析构函数。

如果库本身不创建该对象的子类，您可以通过为该对象声明一个子类并将该对象用作基类来获得所需的效果。

```
class NotGoodBase {
 ~NotGoodBase(); // Non-virtual destructor.  Possibly added by compiler.
};

class UseThisAsBase : public NotGoodBase {
 virtual ~UseThisAsBase(); // Virtual destructor.
}; 
```

您应该能够在可以使用 NotGoodBase 的任何地方使用 UseThisAsBase 类型的指针，除了需要具有 NotGoodBase 类型的 LValue 的地方，例如赋值或通过引用传递变量时。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-10-24T18:36:20.497

实际上，我从编译和程序编译中删除了 -Werror 开关。

现在，这些消息只是警告。

我将向供应商发送错误报告。

# ios - 如何在 iOS 中保存图片

> ID：12994924
> 
> 赞同：1
> 
> 时间：2012-10-21T04:14:20.450
> 
> 标签：ios

我有一个数组，其中存储了从相机拍摄的图片，但是当应用程序关闭或最小化时，下次启动应用程序时它们都消失了。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T04:23:18.757

与其将图像添加到数组中，不如将图像保存到您的应用程序文档文件夹中，如下所示：

```
//Save Image to Documents Directory
UIImage *image = [info valueForKey:UIImagePickerControllerOriginalImage];
NSString  *imagePath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Documents/image.jpg"]];
[UIImageJPEGRepresentation(image, 1.0) writeToFile:imagePath atomically:YES]; 
```

现在，您可以随时使用该应用程序访问图像。

**更新#1：**

好吧，假设您有不止一张图片，并且您不想覆盖保存在文档目录中的图像。我会做类似以下的事情：

首先创建一个返回当前日期和时间的方法

```
- (NSString *)currentDateandTime
{
    NSDate *today = [NSDate date];
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"MMddyyyy_HHmmssSS"];
    NSString *dateString = [dateFormat stringFromDate:today];
    [dateFormat release];

    return dateString;
} 
```

如您所见，日期精确到毫秒，这可以防止任何覆盖图像的机会。要调用该方法，请参见下文：

```
//Set Photo Date
NSString *date = [self currentDateandTime];
Now onto saving the image:
//Save Image to Documents Directory
UIImage *image = [info valueForKey:UIImagePickerControllerOriginalImage];
NSString  *imagePath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Documents/%@_image.jpg",date]];
[UIImageJPEGRepresentation(image, 1.0) writeToFile:imagePath atomically:YES]; 
```

通过执行上述操作，您为图像创建了一个唯一的文件名。例如：10212012_12182245_image.jpg

现在检索图像。例如，在保存图像时，您还需要将文件名保存到 .PLIST 文件中。您可以创建一个文件名数组并将它们作为 PLIST 文件保存到磁盘。然后你做一些事情，比如按日期对所有图像进行排序或按日期加载它们。

**更新#2：**

好的，所以您要创建并保存到 PLIST。您可以在图像选择器加载时调用它。  

```
- (void)createPLIST
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [path objectAtIndex:0];
    NSString *plistPath = [documentsDirectory stringByAppendingString:@"/images.plist"];
    //Check to see if the file exists, if not create the file.
    if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath]){
           //Creating empty Image Files Array for later use
           NSMutableArray *imageArray = [[NSMutableArray alloc] init];
           [imageArray writeToFile:plistPath atomically:YES];
       [imageArray release];
        }
} 
```

现在您已经创建了 PLIST，您需要在保存图像时加载它，然后向其中写入数据。我建议创建一个单独的方法，每次拍照时都会调用该方法。将要发生的事情是：1.) 拍照 2.) 保存图片，并将日期和时间附加到文件名 3.) 将该日期对象传递给下面的方法。下面的方法将向字典添加值并将字典保存回文档目录。另外，由于我们将所有内容保存到文档文件夹中，因此所有信息都已备份，因此用户在升级应用程序时不会丢失其图像。

```
- (void)createNewGalleryObject:(NSString *)date
{
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [path objectAtIndex:0];
    NSString *plistPath = [NSString stringWithFormat:@"%@/images.plist", documentsDirectory];
    //Load PLIST into mutable array
    NSMutableArray *imageArray = [NSMutableArray arrayWithContentsOfFile:plistPath];

    //Create a dictionary for each image captured that saves basic information about the file for later use
    NSMutableDictionary *newEntry = [[NSMutableDictionary alloc] init];
    [imageArray addObject:newEntry];

    //This is where we write to the dictionary, it is up to you what values to save.
    //Based on what you told me I would save the information shown below.
    //For example Later you can do things like sort by date.
    [newEntry setValue:[NSDate date] forKey:@"Date"];
    [newEntry setValue:[NSString stringWithFormat:@"Documents/%@_originalImage.jpg",date] forKey:@"Original Image"];

    //Now save the array back to the PLIST, the array now contains a new dictionary object.
    //Every time you take a picture a new dictionary object is created
    [imageArray writeToFile:path atomically:YES];
    [newEntry release];
} 
```

好的，假设您现在已经拍摄了一堆照片并将图像信息存储到您的文档目录中。您可以执行诸如加载数组中的所有图像之类的操作。

```
-(void)loadImages
{
    //Load PLIST
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [path objectAtIndex:0];
    NSString *plistPath = [NSString stringWithFormat:@"%@/images.plist", documentsDirectory];
    //Load PLIST into mutable array
    NSMutableArray *imageArray = [NSMutableArray arrayWithContentsOfFile:plistPath];

    for (NSDictionary *dict in imageArray) {
    //Do whatever you want here, to load an image for example
       NSString *imageFilePath = [NSHomeDirectory() stringByAppendingPathComponent:[dict objectForKey:@"Original Image"]];
       UIImage *image = [UIImage imageWithContentsOfFile:imageFilePath];
    }
} 
```

摇滚吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T04:42:54.867

您可以将图像保存为 NSDictionary 中的 NSData 对象，并使用 Pictue Name 作为键，并且每当应用程序进入后台时，NSDictionary 都会保存在 NSUserDefaults 对象中，以便稍后在应用程序初始化时重新加载。

在 AppDelegate.m

```
-(void) applicationDidEnterBackground:(UIApplication*)application
{
    NSUserDefaults *infoSaved = [NSUserDefaults standardUserDefaults];
    [infoSaved setObject:imagesDictionary forKey:@"imagesFile"];
    [infoSaved:synchronize];
} 
```

这会将您的 NSDictionary 保存在设备上 app 文件夹中的文件中。

从相机拍摄新照片后，使用新的图像对象更新您的 imageDictionary”

在您的视图控制器中

```
-(void) updateImageDictionary {
       NSData *imageNSData = UIImagePNGRepresentation(theUIImage);
       [imagesDictionary addObject:imageNSData forKey:@"TheImageName"];
} 
```

当您需要刷新图像列表时，可能在您的应用程序初始化中，从 NSUserDefaults 中的此对象加载它们：

在您的视图控制器中

```
-(void) loadImagesDictionary {
      imagesDictionary = [infoSaved objectForKey:@"imagesFile"];
} 
```

您还需要找到一种方法，将视图控制器中的 imagesDictionary 对象与 AppDelegate 中的 imagesDictionary 对象共享。一种方法是使用全局变量，一种更简单的方法是使用 NSUserDefault 对象。

# apache - 两个 RewriteCond 和 RewriteRule 独立工作

> ID：12994925
> 
> 赞同：1
> 
> 时间：2012-10-21T04:14:37.333
> 
> 标签：apache, mod-rewrite, rewrite

所以我有两个规则。每条规则都完全按照它自己的方式执行它应该做的事情`.htaccess`，但是当两个规则都存在时，它们开始相互冲突。

```
RewriteCond %{REQUEST_URI} ^(.*)\.html$
RewriteRule ^(.*)\.html$ index.php?id=$1 [QSA,L] 
```

**仅**当数字结束时，上述规则才能正常使用`http://domain.com/12.html`（`12`注释文件不存在！）`index.php` **`.html``12.html`**

 **```
RewriteCond %{REQUEST_URI} !^(.*)\.html$
RewriteRule ^(.*)$ /$1\.html [L,R=301] 
```

这适用于检查 URL 是否以`.html`. 如果它没有以 结束`.html`，它会将其重定向到 URI + `.html`（这本身也可以正常工作）。

当我同时拥有两条规则时`.htaccess`

```
RewriteCond %{REQUEST_URI} ^(.*)\.html$
RewriteRule ^(.*)\.html$ index.php?id=$1 [QSA,L]

RewriteCond %{REQUEST_URI} !^(.*)\.html$
RewriteRule ^(.*)$ /$1\.html [L,R=301] 
```

然后有一个循环导致重定向循环。

有人可以指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:50:13.613

因此，第一条规则重写`http://domain.com/12.html`为`http://domain.com/index.php?id=12`. 然后事情开始出错；第二条规则将其重写为`http://domain.com/index.php.html?id=12`，但那时我认为您会发现第一条规则再次生效，将其重写为类似 的东西`http://domain.com/index.php?id=index.php`，第二条规则将其重写为`http://domain.com/index.php.html?id=index.php`。在这一点上，我认为规则最终会争夺 URL。

最简单的解决方案可能是调整第二个重写规则，不要重写已经包含扩展名的页面，即使用`[^.]*`而不是`.*`.**

# machine-learning - 预测误差指标的差距是什么：MAPE 和 WMAPE？

> ID：12994929
> 
> 赞同：4
> 
> 时间：2012-10-21T04:15:01.903
> 
> 标签：machine-learning, forecasting

我知道 MAPE 和 WMAPE 作为预测误差指标，它们有一些好处。但差距在哪里？有人说：

```
对于 MAPE：
“体积非常小或为零的组合可能会导致结果出现较大偏差”

对于 WMAPE：
“与大权重的组合可能会使结果有利于他们”

```

我不明白，谁能解释这两个指标的弱点的两个陈述？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T05:10:37.433

对于 MAPE，平均绝对百分比误差 [1]，假设我们用**A表示实际值，用****P**表示预测值。您在时间 1 到 n 有一系列数据，然后

```
MAPE = 100/n * ( Sum of |(A(t) - P(t))/A(t)| ), for t in 1..n
where A(t) is the actual value at time t, P(t) is the predicted value at time t. 
```

由于 A(t) 在分母中，因此只要 A(t) 非常小或接近零，该除法就像一除以零，这会在绝对百分比误差中产生非常大的变化。如此大的变化的组合肯定会导致结果的大偏差。

对于 WMAPE，加权平均绝对百分比误差，

```
 Sum of |(A(t) - P(t))/A(t)| * W(t)
WMPAE = -------------------------------------, for t in 1..n
                    Sum of W(t)

        where W(t) is the weight you associate with the prediction at time t. 
```

由于这是一种加权测量，它没有与 MAPE 相同的问题，例如，由于体积非常小或为零而导致的过度倾斜。

然而，加权因子将表明我们希望对每个预测的主观重要性[2]。

> 例如，考虑到发布日期，我们可以分配权重，权重越高，我们对最近数据的重视程度就越高。在这种情况下，我们可以观察到，即使 MAE 低于合理的阈值，在分析此特定特征时，系统的性能也可能不足。

这就是对最近数据的青睐如何扭曲结果。

```
[1] http://en.wikipedia.org/wiki/Mean_absolute_percentage_error
[2] http://ir.ii.uam.es/rue2012/papers/rue2012-cleger-tamayo.pdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T23:12:40.123

还有另一个错误指标：

```
WAPE = 100/n * Sum(|(A(t) - P(t)|)/sum(A(t)), for t in 1..n
where A(t) is the actual value at time t, P(t) is the predicted value at time t. 
```

它对大的扭曲不敏感。

# php - 如果 Zend 在本地传递，为什么我的任何验证都没有传递到远程服务器上？

> ID：12994931
> 
> 赞同：1
> 
> 时间：2012-10-21T04:15:03.927
> 
> 标签：php, forms, zend-framework

我一直在开发一个网站，现在我准备部署它。我现在已经把所有东西都放在了远程服务器上，一切似乎都很好，但我遇到的问题是 Zend Validators。事实上，我将整个 Zend Framework (28 mb) 上传到服务器。我知道路径并且一切都正确，因为我使用 Zend_File_Transfer_Adapter_Http 将文件上传到服务器并且它确实如此，还检查了我添加到文件上传中的各种验证器。但是，我不明白为什么我的角色验证器都失败了。我在本地主机上对它们进行了本地测试，它们都可以工作。但是在远程服务器中，它们都没有。比如说，我通过执行以下操作来验证字符串：

```
$validaUno = new Zend_Validate_Regex('/^([[:alpha:]]|[ÁÉÍÓÚÑñáéíóúÄËÏÖÜäëïöü])[[:alpha:]]|[ÁÉÍÓÚÑñáéíóúÄËÏÖÜäëïöü]+\s?([[:alpha:]][ÁÉÍÓÚÑñáéíóúÄËÏÖÜäëïöü])?/'); 
```

针对一些 $_POST 变量，无论我写什么，都不会发生任何事情（并且在本地工作的正则表达式应该传递给每个单词，后跟一个空格，然后是你想要的任意数量的单词（我已经用一些脚本测试了这个来测试正则表达式）。

我也有：

```
$validaTres = new Zend_Validate_EmailAddress; 
```

和：

```
if(!$validaTres->isValid($correo)) $errors['mail']="No es una direcci&oacute;n de correo electr&oacute;nico v&aacute;lida."; 
```

同样，其他根本没有通过的验证。

我真的很感激一些帮助，因为我在这里完全迷失了。

顺便说一句，我读到这一定与脚本找不到 Zend Framework 的路径有关，但我不明白为什么 Zend_File_Transfer_Adapter_Http 正在工作。如果它与库的路径有关，那么正确的使用方法是什么（**DIR**）或正确获取路径的方法。我这样打电话：

```
$libreria='C:/Zend_FW/ZendFramework-1.11.12-minimal/library';
set_include_path(get_include_path().PATH_SEPARATOR.$libreria);
require_once('Zend/Loader/Autoloader.php');
Zend_Loader_Autoloader::getInstance(); 
```

然后我将它包含在每个需要它的页面上。我必须再次寻求帮助，不过我认为这一定很简单。

抱歉，我必须更正我以前的代码，它实际上不是我在远程服务器上拥有的（我复制了我在本地拥有的文件），它是这样的：

```
$libreria='Zend/ZendFramework/library'; 
```

这是我在服务器上实际拥有的，根目录中名为 Zend 的文件夹，然后是路径的其余部分。该路径是相对于文档的，因为脚本从同一个根文件夹中调用它，所以我看不出有什么问题。请问有什么建议吗？我试过这样做：

```
../Zend/ZendFramework/libray 
```

和

```
./Zend/ZendFramework/library 
```

但是当我尝试这个时它只是给了我一个服务器错误。我想这不是在 Unix 中引用文件夹的正确方法，但我真的不知道。

我认为 Zend 完全按照它们的大写方式调用它的类，正是为了避免忽略或不区分大小写的问题。所以代码应该可以工作，但它不能。

好的，所以我将重新提出我的问题：我所知道的是，正确编写我的脚本及其依赖项（也许没有太注意和谨慎区分大小写），以及服务器中正确的文件夹结构，那么脚本应该可以工作.

然后我对代码本身有疑问，Zend 类的语法是否对引用我的输入有意义，以及如何调用类以及它们的方法是否合适（它们应该是静态的还是其他类型的，以及是否存在问题在调用新操作员等的情况下进行。

我还认为 Zend 框架本身的配置可能存在问题，即它调用类的方式以及与整个操作系统相关的方式，但我真的迷失了哪些文件必须做接着就，随即。幸运的是，这显然不是问题。

然而，我几乎可以肯定问题不在于代码，而正如 Seth 所指出的，问题在于操作系统之间的语法不兼容。关于使用常量的问题`(__DIR__)`是我稍后会研究的问题，因为我认为有时使用它来配置脚本更容易。但是，在这种情况下，我无法弄清楚服务器的结构，所以我坚持使用我的包含。

无论如何，感谢您的帮助，我必须指出，正如 Seth 所说，问题在于使用相对路径调用库，这就像知道在 Linux/Unix 中调用根目录的方式只是一个斜杠一样简单。

## 不过还是有问题

大家好，我不知道发生了什么，也许我梦到了它，但我的提供者似乎阻止了对该`set_include_path`功能的访问。所以我仍然有很多问题。我说我梦到了它，因为今天早上早些时候我看到代码在工作，然后它就停止了。我可以再次看到问题在于 Zend 框架的路径，因为如果我将其指定为相对路径，`$libreria='Zend/ZendFramework/library';`那么 weppage 会简单地跳过它并表现得好像没有加载库一样。但是，如果我将其正确指定为绝对路径，服务器会抛出 500 错误。

我已经阅读了相关的帖子并尝试了几乎所有的东西，我做到了`ini_set('include_path', $libreria.":".get_include_path());`，但没有任何改变。我没有尝试修改`open_basedir`，因为我很确定我的提供商不允许它。最后，我尝试通过在字符串中输入完整路径来直接包含路径，并且还做了 getcwd() 并将其链接到字符串，但显示了相同的行为。

我还尝试将带有框架的文件夹移动到我网站的根目录（不是文件夹 public_html），这样绝对路径`/Zend/ZendFrameWork/library`肯定就是我调用它的位置。（我的站点的根目录是指以我的工作目录字符串开始的路径部分）。我什至将 Zend 文件夹重命名为 ZendF 以避免混淆。但我知道我错过了一些东西。

这怎么解决，我应该和我的供应商打架吗？

再想一想，我必须说我真的不认为我的提供者会阻止更改包含路径，这根本没有意义。我想知道是否有人可以向我解释一下 PHP 核心的哪些指令通常被某些提供商阻止，因为我想没有很多关于 PHP 和我真的不知道的服务器中的安全性的事情。

所以问题仍然在我构建路径的方式上，选项只是一些：相对路径或绝对路径。

# tomcat - 使用 tomcat 7 重写 URL

> ID：12994941
> 
> 赞同：2
> 
> 时间：2012-10-21T04:19:02.267
> 
> 标签：tomcat, redirect

我正在尝试将两个 url 重定向到主页，但我无法启动它。这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">
<display-name>Ventanilla Virtual</display-name>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext.xml, classpath:applicationContextWeb.xml, classpath:applicationContextWebService.xml, classpath:applicationContext-quartz.xml</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param>
<context-param>
    <param-name>org.richfaces.skin</param-name>
    <param-value>blueSky</param-value>
</context-param>
<context-param>
    <param-name>org.richfaces.CONTROL_SKINNING</param-name>
    <param-value>enable</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.util.IntrospectorCleanupListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<!-- Filtros de redes sociales -->
<filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/rs/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<login-config>
    <auth-method>BASIC</auth-method>
</login-config>

<servlet>
    <servlet-name>CXFServlet</servlet-name>
    <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/webservices/*</url-pattern>
</servlet-mapping>

<!-- Push Servlet - listens for user sessions -->
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.richfaces.webapp.PushServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Push Servlet</servlet-name>
    <url-pattern>/__richfaces_push</url-pattern>
</servlet-mapping>
<!-- setups servlet-mapping in RichFaces configuration -->
<context-param>
    <param-name>org.richfaces.push.handlerMapping</param-name>
    <param-value>/__richfaces_push</param-value>
</context-param>
<context-param>
    <param-name>org.richfaces.push.initializeOnStartup</param-name>
    <param-value>true</param-value>
</context-param>
<context-param>
    <param-name>org.atmosphere.useBlocking</param-name>
    <param-value>true</param-value>
</context-param>

</web-app> 
```

这是我的 urlrewrite.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 4.0//EN"
    "http://www.tuckey.org/res/dtds/urlrewrite4.0.dtd">

<urlrewrite>

<rule match-type="wildcard">
    <from>/ventanillavirtual/twitter/**</from>
    <to type="forward">/ventanillavirtual</to>
</rule>
<rule match-type="wildcard">
    <from>/ventanillavirtual/facebook/**</from>
    <to type="forward">/ventanillavirtual</to>
</rule>

</urlrewrite> 
```

我想重定向的网址是，例如：

```
http://localhost:8080/ventanillavirtual/rs/facebook/125 
```

至：

```
http://localhost:8080/ventanillavirtual 
```

有任何想法吗？？我一直在为此苦苦挣扎

# c# - 连接在描述的条件下不工作

> ID：12994943
> 
> 赞同：0
> 
> 时间：2012-10-21T04:20:28.023
> 
> 标签：c#, sql, database, oledb

我有两张桌子。

表1->付款

```
AdmissionNum(PK)  |  StudName |   Fees |

       1               sagar      5000 
       2               nilesh     6000
       3               amar       4000 
```

表2->支付详情

```
AdmissionNum(FK) | RemainingFees |   Date       |  Payment
        1             4000          1/1/2012          1000
        2             5000          2/5/2012          1000
        1             3500          2/10/2012         1500
        1             2500          2/15/2012         1000
        2             2500          2/20/2012         2500
        3             0             3/25/2012         4000 
```

我尝试了不同的查询，但无法在支付表和 paymentDetails 表之间建立联合。我正在制作 C# windows 应用程序。当特定学生支付费用时，他的记录存储在 paymentDetails 表中。我只想提取未结费用的详细信息，即剩余费用大于 0 但 paymentDetais 表中的最后一个详细信息的学生，即。

我的预期结果表是-

```
AdmissionNum  |  StudName |   Fees | RemainingFees

       1           sagar      5000    2500
       2           nilesh     6000    2500 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:40:36.107

试试这个：

```
with cte as (select P.AdmissionNum , P.StudName,   P.Fees , D.RemainingFees,row_number() 
over ( partition by  P.AdmissionNum order by [DATE] desc) as rn
from Payment P
join PaymentDetails D
on P.AdmissionNum=D.AdmissionNum
where RemainingFees>0)
select AdmissionNum ,StudName,  Fees , RemainingFees
from cte
where rn=1 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!3/f14fd/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:25:12.290

我会这样做如下。

```
SELECT 
       P.AdmissionNum,
       P.StudName,
       P.Fees
       P.Fees - PD.Payment 'RemainingFees'
FROM
    Payment P
    JOIN (SELECT 
                AdmissionNum, 
                SUM(Payment) 'Payment' 
          FROM 
                PaymentDetails 
          GROUP BY AdmissionNum
    ) AS PD
    ON P.AdmissionNum = PD.AdmissionNum
WHERE 
    P.Fees - PD.Payment > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T04:28:23.457

试试下面：

```
 SELECT a.AdmissionNum, a.StudName , a.Fees, b.remFees as RemainingFees
   FROM Payment a, 
        (SELECT AdmissionNum, min(RemainingFees) as remFees 
           FROM PaymentDetails b GROUP BY AdmissionNum) b
   WHERE a.AdmissionNum = b.AdmissionNum 
        and b.remFees >0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T04:33:32.647

试试下面的查询：

```
Select a.AdmissionNum, a.StudName, a.Fees, b.RemainingFees 
from Payment a 
inner join paymentDetails b on a.AdmissionNum = b.AdmissionNum
inner join (
   select AdmissionNum, max(date) as date 
   from paymentDetails 
   group by AdmissionNum
) c on a.AdmissionNum = c.AdmissionNum
where b.RemainingFees > 0 and b.Date = c.Date 
```

# matplotlib - 使用 pylab 显示路线的多个重叠点

> ID：12994944
> 
> 赞同：0
> 
> 时间：2012-10-21T04:21:14.050
> 
> 标签：matplotlib

我在使用 plot(x,y) 的路由算法中显示重叠点时遇到问题。具体来说，我正在寻找一条路线，比如说（0,1,2,0,1），0 有一些坐标 x 和 y。因此，如果我将 plot(x,y) 用于上述路线，则路线 0-1 将与后面的路线 0-1 重叠，因为它们都具有相同的 x 和 y 坐标。如何单独显示，以便我可以使用 plot(x,y) 和 pylab 区分两条线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:27:25.910

也许你的意思是这样简单的事情？

```
import matplotlib.pylab as plt

xseries=[0,2,2,3,4 ]   #x values first route
yseries=[0,6,2,8,4 ]   #y values first route

plt.scatter(xseries,yseries)
plt.plot(xseries,yseries,linestyle='--', marker='o')

xseries1=[0,2,6,7  ]  #x values second route
yseries1=[0,2,3,5  ]  #y values second route
plt.plot(xseries1,yseries1)
plt.scatter(xseries1,yseries1)

plt.show() 
```

# php - 有时存在值的 Mysql LIKE 通配符

> ID：12994948
> 
> 赞同：0
> 
> 时间：2012-10-21T04:22:41.560
> 
> 标签：php, mysql

标题可能有点混乱，但我可以在这里澄清一下。

我正在尝试使用 mysql 的 LIKE 来匹配有时被 : 包围的值，或者有时它可以在一侧，或者有时两者都没有。我知道通配符 % 但这会选择所有内容，所以我发现 _ 可以工作，但它总是选择那个单个字符，我只想选择那个字符，如果它是一个 : 否则不是。

**还在迷茫吗？这是一个例子。**

假设我在“que”表中有一个名为“name”的列，在“name”列中我得到了一个值“sdfgsdfgsdfg:jimmy:asfds”我想选择“:jimmy:”但如果值是“ sdfgsdfgsdfg:jimmy' 我只想选择 ':jimmy'。

**另一个例子。**

要使用正则表达式来完成这一点，如果有帮助的话，它会像这样 (:?)jimmy(:?) 。

**目的是什么？**

我想从该值中删除 jimmy 并将其替换为： 我正在尝试将多个名称存储到一列中，并且需要删除那个人。

到目前为止，我得到了这样的东西：

```
 UPDATE `que` SET `name`= CASE WHEN `name` LIKE '%jimmy%' THEN replace(`name`, '%jimmy%', ':') ELSE `name` end WHERE 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:28:48.947

> 要使用正则表达式来完成这一点，如果有帮助的话，它会像这样 (:?)jimmy(:?) 。

所以用[`REGEXP`](http://dev.mysql.com/doc/en/regexp.html#operator_regexp)？

> 我正在尝试将多个名称存储在一列中，并且需要删除那个人。

不要那样做。使用 RDBMS 的关系功能并[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的模式：

```
CREATE TABLE que_names (
  que_id BIGINT UNSIGNED NOT NULL,
  name   VARCHAR(255)    NOT NULL,
  FOREIGN KEY (que_id) REFERENCES que (que_id)
);

INSERT INTO que_names
  (que_id, name)
VALUES
  (1, 'bob'),
  (1, 'fred'),
  (1, 'james'),
  (2, 'michael'),
  (2, 'jimmy'),
  (2, 'fred')
  -- etc.
;

ALTER TABLE que DROP COLUMN name; 
```

然后，您将使用以下命令删除所有`jimmy`内容：

```
DELETE FROM que_names WHERE name = 'jimmy'; 
```

如果需要，您可以按如下方式检索现有表：

```
SELECT   que.*, GROUP_CONCAT(que_names.name SEPARATOR ':') AS name
FROM     que LEFT JOIN que_names USING (que_id)
GROUP BY que_id 
```

# c - C - 指针插入算法

> ID：12994950
> 
> 赞同：1
> 
> 时间：2012-10-21T04:23:40.457
> 
> 标签：c, insert

我创建了两个结构：

```
typedef struct mainNode {
    int theNode;
    int visited;
    struct mainNode *next;
} node_rec, *node_ptr; 
```

和

```
typedef struct neighborNode {
    struct neighborNode *next;
} neighbor_node_rec, *neighbor_node_ptr; 
```

我需要将其插入列表：

```
void insert(node_ptr head, int theNodeVal, int neighborNodeVal, int weight) {

//if list is empty
if (head == NULL) {
    head = (node_ptr) malloc(sizeof (node_rec)); //create head of list
    head->theNode = theNodeVal; //set head value to node value
    head->next = NULL; //point to null       
}

//while list is not pointing no null
while (head != NULL) {
    //if node IS NOT equal to node value   
    if (head->theNode != theNodeVal) {
        head->theNode = theNodeVal; //set head value (new node) to node value
        head->next = tail; //connect to next node
        tail->next = NULL; //point to null
    }
    else
    {          
        //if node IS equal to node value (the node already exists)
        tail->next = head // head is the new tail
        head->neighbor = n; //point at the neighbor of head (new tail)
    }
}
} 
```

我正在尝试查看我实现的逻辑是否正确。这就是我评论每一行的原因。您可以参考页面顶部的链接以获得视觉效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:44:04.823

替换 `if (head->theNode = theNodeVal) {`为 `if (head->theNode == theNodeVal) {`。这会有帮助吗？

这就是我将如何实现该算法的图形：

```
#include <limits.h>
#include <string.h>
#include <malloc.h>
#include <stdio.h>

struct Vertex {
    struct Vertex *next; // The reference to the next vertex in the global list of vertices
    int nodeId;
    int distance;
    struct Vertex *previous; // The reference to trace back the shortest path;
    struct Edge *neighbor; // The reference to the list of edges of this 
};

struct Edge {
    struct Edge *next;   // The reference to the next edge of this vertex;
    struct Vertex *node; // The reference to the vertex at other end of this edge;
    int weight;
};

struct Vertex *head = NULL;

struct Vertex *newVertex(int nodeId) {
    struct Vertex *p = malloc(sizeof(struct Vertex));
    memset(p,0,sizeof(struct Vertex));
    p->nodeId = nodeId;
    p->distance=INT_MAX;
    p->next = head;
    head = p;
    return p;
}

void addEdge(struct Vertex *v1, struct Vertex *v2, int weight) {
    struct Edge *e = malloc(sizeof(struct Edge));
    e->next = v1->neighbor;
    v1->neighbor = e;
    e->node = v2;
    e->weight = weight;
}

void insert(int node1, int node2, int weight) {
    struct Vertex *current = head, *p1 = NULL, *p2 = NULL;

    while (current != NULL) {
        if (current->nodeId == node1) p1 = current;
        if (current->nodeId == node2) p2 = current;
        current = current->next;
    }

    if (p1 == NULL) p1 = newVertex(node1);
    if (p2 == NULL) p2 = newVertex(node2);

    addEdge(p1,p2,weight);
    addEdge(p2,p1,weight);
}

void main(int argc, char **argv) {
    int node1, node2, weight;
    while (EOF != scanf("%d %d %d \n", &node1, &node2, &weight)) {
        insert(node1, node2, weight);
    }
} 
```

# javascript - 获取具有已定义类名的下一个元素的 html 内容

> ID：12994952
> 
> 赞同：1
> 
> 时间：2012-10-21T04:23:45.550
> 
> 标签：javascript, jquery

我有 jQuery 的问题。如果我有此代码来填充工具提示 div：

```
<div id="tooltip"></div>
<div class="tooltipMessage">Tooltip Message</div>
<script type="text/javascript">
    $("#id").html($("#tooltip").next(".tooltipMessage").html());
</script> 
```

这行得通，代码使用 classname 获取下一个元素`tooltipMessage`并使用 id 填充元素`tooltip`。

但如果我有这个代码：

```
<div id="tooltip"></div>
<p>other element</p>
<div class="tooltipMesage">Tooltip Message</div> 
```

`undefined`被退回。

`tooltipMessage`如果中间存在另一个元素，我如何从具有类名的下一个元素中获取 HTML ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T04:51:43.607

为什么不将所有元素放在父容器中并使用 find(selector) 来获取所需的元素？我认为这是一种更好的方法，并且可以为您提供一些防弹的隔离。

关于您的问题，您可以使用[**nextAll('div.tooltipMesage')**](http://api.jquery.com/nextAll/)方法来查找所需的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T17:40:08.003

我之前通过确保工具提示消息的 id 与它绑定到的 id 具有相同的前缀来解决这个问题，然后 javascript 可以写为

```
<div id="tooltip1"></div>
<div id="tooltip1Message" class="tooltipMessage>Tooltip Message</div>
<script type="text/javascript"> 
   $(".tooltipMessage").each(function(){
      var destId = $(this).attr("id").replace("Message","");
      $("#"+destId).html($(this).html());
    });
</script> 
```

那么无论消息相距多远，它总能找到合适的消息来绑定

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-21T04:46:09.147

```
.next()  -Wii get the immediate sibling 
        // Here the immediate sibling of tooltip is  p tag..
        // So it returns a empty selector because it not a immediate 
        // sibling

<div id="tooltip"></div>
<p>other element</p>
<div class="tooltipMesage">Tooltip Message</div> 
```

**编辑** 所以你需要使用 next 两次才能找到它..

```
$("#id").html($("#id").next().next(".tooltipMessage").html()); 
```

或者

使用**.nextAll()**

```
$("#id").html($("#id").nextAll(".tooltipMessage").first().html()); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-10-21T04:25:45.170

代替

```
$("#id").html($("#id").next(".tooltipMessage").html()); 
```

和

```
$("#id").html($("#id").find(".tooltipMessage").html()); 
```

`.next()`不是在寻找 DOM 中的所有内容，它实际上是让下一个元素`.find()`对你有用

编辑：

我想它正在工作，我很快就阅读了这个问题，并认为 HTML 看起来像这样

```
<div id="tooltip">
   <p>other element</p>
   <div class="tooltipMesage">Tooltip Message</div>
</div> 
```

`.find()``.siblings()`如果您选择将 HTML 保持在问题中的方式，则适用于所有 decendent 元素

# wpf - DisplayMemberPath 在 WPF 中不起作用

> ID：12994953
> 
> 赞同：2
> 
> 时间：2012-10-21T04:23:56.993
> 
> 标签：wpf, listbox

我只想将`CustomerList\CustomerName`属性项显示到`ListBox`using`ItemsSource` `DisplayMemberPath`属性。但它不起作用。我不想`DataContext`在我的问题中使用或任何其他绑定。请帮忙。我的代码如下：

**主窗口.xaml.cs**

```
namespace BindingAnItemControlToAList
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }

    public class Customer
    {
        public string Name {get;set;}
        public string LastName { get; set; }
    }
    public class CustomerList 
    { 
        public List<Customer> Customers { get; set; }
        public List<string> CustomerName { get; set; }
        public List<string> CustomerLastName { get; set; }
        public CustomerList() 
        { 
            Customers = new List<Customer>();
            CustomerName = new List<string>();
            CustomerLastName = new List<string>();
            CustomerName.Add("Name1");
            CustomerLastName.Add("LastName1");
            CustomerName.Add("Name2");
            CustomerLastName.Add("LastName2");

            Customers.Add(new Customer() { Name = CustomerName[0], LastName = CustomerLastName[0] });
            Customers.Add(new Customer() { Name = CustomerName[1], LastName = CustomerLastName[1] });
        } 
    } 
}

**MainWindow.Xaml**
<Window x:Class="BindingAnItemControlToAList.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:BindingAnItemControlToAList"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded" >
    <Window.Resources>
        <local:CustomerList x:Key="Cust"/>
    </Window.Resources>
    <Grid Name="Grid1">
        <ListBox ItemsSource="{Binding Source={StaticResource Cust}}"  DisplayMemberPath="CustomerName" Height="172" HorizontalAlignment="Left" Margin="27,23,0,0" Name="lstStates" VerticalAlignment="Top" Width="245" />
           </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T04:49:31.167

您没有将“集合”设置为 ItemsSource ...因此您没有任何选择。这将选择列表`CustomerName`。

```
<ListBox ItemsSource="{Binding Source={StaticResource Cust}, Path=CustomerName}" 
    Height="172" HorizontalAlignment="Left" Margin="27,23,0,0" Name="lstStates" 
    VerticalAlignment="Top" Width="245" /> 
```

但实际上，你应该重组你的`CustomerList`类......没有必要有单独的列表来复制`Name`和`LastName`字段`Customer`- 这意味着你在不必要地复制数据，而且数据也有可能与每个集合不同步。

如果可以更改集合或数据，您还应该考虑使用 INotifyPropertyChanged，并在您的类上使用 INotifyCollectionChanged（例如，使用`ObservableCollection`代替`List`，并`INotifyPropertyChanged`在类上实现）。`Customer`

例如

```
public class CustomerList
{
    public ObservableCollection<Customer> Customers { get; set; }
    public CustomerList()
    {
        Customers = new ObservableCollection<Customer>();
        Customers.Add(new Customer { Name = "Name1", LastName = "LastName1" });
        Customers.Add(new Customer { Name = "Name2", LastName = "LastName2" });
    }
}

<ListBox ItemsSource="{Binding Source={StaticResource Cust}, Path=Customers}" DisplayMemberPath="Name" Height="172" HorizontalAlignment="Left" Margin="27,23,0,0" Name="lstStates" VerticalAlignment="Top" Width="245" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T04:48:18.990

这里有几件事。首先，您的源设置为对象，但实际列表是`Customers`对象的属性。所以你需要使用`Source={StaticResource Cust},Path=Customers}`. 其次，`DisplayMemberPath`需要是项目的一个属性，在这种情况下是`Customer`——所以你必须使用*名称*而不是“客户名称”。这有效：

```
<ListBox 
    ItemsSource="{Binding Source={StaticResource Cust},Path=Customers}"  
    DisplayMemberPath="Name" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:31:26.133

我从这个讨论中得到的最后一点：要绑定一个 ItemControl，我们需要处理 3 个属性： 1\. Source - 它将是 x:Key [类名]，它将包含集合属性（在我的例子中是 Cust）。2\. 路径 - 它将是包含集合的属性（在我的例子中是客户） 3\. DisplayMemberPath - 要显示的实际属性（在我的例子中是名称）。

# android - 如何为所有活动创建通用的 Android XML 布局

> ID：12994957
> 
> 赞同：10
> 
> 时间：2012-10-21T04:25:02.510
> 
> 标签：android, android-layout

我有一个应用程序需要在每个屏幕中使用相同的项目 [5 个按钮作为选项卡]。是否可以创建一个具有这 5 个按钮的“基本 XML 布局”，然后让所有其他 XML 文件以某种方式从基本布局扩展，这样我就不必拥有最终具有相同功能的多个按钮.

API 9 是否有更好的方法来解决这个问题

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-21T04:37:30.113

为您的基本活动创建一个通用布局。然后使用`<include>`您想要制作的标签将该布局包含在所有布局中。

之后创建一个抽象活动，然后处理此活动中按钮和代码的所有点击，然后将此活动扩展到您已包含基本布局的所有其他活动中。

**例如**

常用按钮xml布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/tabhost_bg"
    android:gravity="center"
    android:orientation="horizontal" 
    android:weightSum="3">

    <Button
        android:id="@+id/btnHome"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bottom_btn_active" 
        android:layout_weight="1"
        android:text="@string/label_home"
        style="@style/bottom_tab_btn"/>

    <Button
        android:id="@+id/btnSetting"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bottom_btn_active" 
        android:layout_weight="1"
        android:text="@string/label_settings"
        style="@style/bottom_tab_btn"/>

    <Button
        android:id="@+id/btnMore"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bottom_btn_active" 
        android:layout_weight="1"
        android:text="@string/label_more"
        style="@style/bottom_tab_btn"/>

</LinearLayout> 
```

这是一个 xml 布局，您可以在其中包含上述 XML 文件

```
<include
        android:id="@+id/bottombar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        layout="@layout/bottom_bar" /> 
```

这里 android:layout_width 和 android:layout_height 和 layout 是强制属性

现在这是一个处理常用控件点击的基本活动

```
public abstract class BottomBar extends Activity implements OnClickListener {

    protected Button btnHome;
    Button btnSetting, btnMore;
    private Activity mActivity;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mActivity = this;
    }

    protected void mappingWidgets() {

        btnHome = (Button) findViewById(R.id.btnHome);
        btnSetting = (Button) findViewById(R.id.btnSetting);
        btnMore = (Button) findViewById(R.id.btnMore);

        btnHome.setOnClickListener(this);
        btnSetting.setOnClickListener(this);
        btnMore.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        if (v == null)
            throw new NullPointerException(
                    "You are refering null object. "
                            + "Please check weather you had called super class method mappingWidgets() or not");
        if (v == btnHome) {

        } else if (v == btnSetting) {

        }else if(v == btnMore) {

        }
    }

    protected void handleBackgrounds(View v) {
        if (v == btnHome) {
            btnHome.setBackgroundResource(R.drawable.bottom_btn_hover);
            btnSetting.setBackgroundResource(R.drawable.bottom_btn_active);
            btnMore.setBackgroundResource(R.drawable.bottom_btn_active);

        } else if (v == btnSetting) {
            btnHome.setBackgroundResource(R.drawable.bottom_btn_active);
            btnSetting.setBackgroundResource(R.drawable.bottom_btn_hover);
            btnMore.setBackgroundResource(R.drawable.bottom_btn_active);

        } else if (v == btnMore) {
            btnHome.setBackgroundResource(R.drawable.bottom_btn_active);
            btnSetting.setBackgroundResource(R.drawable.bottom_btn_active);
            btnMore.setBackgroundResource(R.drawable.bottom_btn_hover);
        }
    }

} 
```

现在剩下的一步是在您的所有活动中扩展此基本活动。

**您可以使用extends**关键字在活动中扩展 Base 活动。例如

```
public class MyActivity extends BottomBar 
```

**注意：**您必须从子活动中调用基类的超级方法来处理对基本布局的公共控件的单击。

因此，您可以在单个活动中实现多个通用布局。

希望这会帮助你。享受！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T04:30:50.083

[您可能需要查看`<include>`标签。](http://developer.android.com/training/improving-layouts/reusing-layouts.html) 它有效地获取您创建的 xml，并将其复制并粘贴到您的其他布局中。

所以你要做的是用你的按钮创建一个单一的布局。将它们放在`<merge>`标签之间，这样它们就不会创建`FrameLayout`要放置的标签。然后使用`<include>`标签在其他布局中使用相同的布局。

注意：**使用****标签时****始终覆盖`layout_width`and属性。`layout_height``<include>`**即使您在相同的值时覆盖它们也是如此。以前版本的 Android 中存在一个错误，如果您也没有覆盖这些属性，它会忽略某些属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T05:38:12.210

包括将是要走的路，但我自己从来没有让这个可靠地工作。也许我做错了什么，但编译器并不总是在合并布局中获取 id。

# php - 为什么 curl 不在 PHP 中发送我的标头？

> ID：12994960
> 
> 赞同：6
> 
> 时间：2012-10-21T04:25:27.063
> 
> 标签：php, curl, http-headers

以下代码：

```
$ch = curl_init('http://localhost/testweb/search.php');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLINFO_HEADER_OUT, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
        'Accept text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
        'Accept-Encoding    gzip, deflate',
        'Accept-Language    en-US,en;q=0.5',
        'Connection keep-alive',
        'SomeBull   BeingIgnored',
        'Cookie CLASSICPAGE=off',
        'User-Agent Mozilla/5.0 (Windows NT 5.1; rv:16.0) Gecko/20100101 Firefox/16.0'
        ));
$response = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);
$body = substr($response, -$info['download_content_length']);
echo $body; 
```

具有以下输出（php.exe mycurl.php）：

```
Host: localhost
Accept: */*
User-Agent      Mozilla/5.0 (Windows NT 5.1; rv: 16.0) Gecko/20100101 Firefox/16.0 
```

本地主机上的 search.php：

```
error_reporting(0);
header("Content-Type: text/plain");
foreach (getallheaders() as $name => $value) {
    echo "$name: $value\n";
} 
```

我的问题是：我设置的标题发生了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-21T04:30:44.703

标头格式为：

```
Header: value 
```

您的示例缺少每个标题上的冒号。只需像这样调整它：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
    'Accept-Encoding: gzip, deflate',
    'Accept-Language: en-US,en;q=0.5',
    'Connection: keep-alive',
    'SomeBull: BeingIgnored',
    'User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:16.0) Gecko/20100101 Firefox/16.0'
  )
); 
```

# z3 - 查询命题模型

> ID：12994961
> 
> 赞同：1
> 
> 时间：2012-10-21T04:25:43.587
> 
> 标签：z3

我在[http://research.microsoft.com/en-us/um/redmond/projects/z3/ml/Z3.html浏览 Z3 的 OCaml API](http://research.microsoft.com/en-us/um/redmond/projects/z3/ml/Z3.html)寻找一种方法来访问满足简单命题公式的求解器返回的模型，即。仅使用 Z3 的 SAT 部分，而不是“T”部分，例如。p 或 q 可能返回模型 p=true, q=false。我能找到的最接近的是solver_get_model，它返回一个模型。但我找不到任何访问模型的方法，因为模型类型似乎不透明。我确实看到了一个用于获取与函数符号（model_get_func_interp）关联的解释的函数，但这并不是我想要的，即使这样我也看不到如何处理返回的信息（func_interp），因为这似乎也是不透明的类型。我能看到的唯一其他方法是将模型转换为字符串。这是唯一的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:07:34.180

*（公平的警告：我自己没有使用过 OCaml API，所以我部分地从我使用 C API 的经验中猜到了这一点。）*

看一下函数：

```
val model_get_const_interp : context -> model -> func_decl -> ast 
```

要传递的值`context`并且`model`应该清楚。`func_decl`现在您可能想知道，当您真正在寻找常量的值时，为什么需要传递 a 。问题是，在一般的 SMT 世界中，特别是在 Z3 中，常量就像没有参数的函数（因此`get_arity c a == 0`是文档中所示的前提条件）。

这将返回一个（选项类型的）AST。下一步是对照`true`或检查 AST `false`。一种方法是调用函数

```
val get_decl_kind : context -> func_decl -> decl_kind 
```

然后，您可以将结果与`OP_TRUE`和进行比较`OP_FALSE`。

请注意，查询模型的另一种方法是使用

```
val model_eval : context -> model -> ast -> bool -> ast option 
```

您可以将任何 AST 传递给此函数（例如 p ∧ ¬q 等）并以相同的方式读出结果。

# performance - 使用来自 URL 的图像使 UICollectionView 更高效

> ID：12994964
> 
> 赞同：0
> 
> 时间：2012-10-21T04:25:55.230
> 
> 标签：performance, uiimageview, uicollectionview

我有一个 UICollection 视图，其中包含来自网络的图像的单元格。我使用 EGOImageView 类在后台加载图像，但是对于非常大的图像，在 iPhone 和 iPad 上会有大约半秒的冻结，这是非常明显的。我能做些什么来提高效率吗？有没有办法下载大图像的压缩版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:29:27.493

最好的方法是为每个图像创建一个拇指版本。下载会加快很多！

# android - 为什么我的 ImageButton 会在其两侧保留空白图像中的灰色？

> ID：12994975
> 
> 赞同：0
> 
> 时间：2012-10-21T04:28:46.607
> 
> 标签：android, imagebutton, titlebar

我正在创建一个自定义标题栏，并在其中放置了一些 imageButtons，当您将 ImageButton 设置为默认值时，它只是灰色的。当您为其分配一个值时，它应该完全改变其对该图像的视图。

我的一些奇怪的原因是正确设置图像，但保留默认 ImageButton 具有的灰色边框。这是有原因的吗？

这是正在发生的事情的图片： ![在此处输入图像描述](../Images/985bc30efa772344764e3e9cde964fb0.png)

这是我的titleBar的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/title_activity_flash_card_display"
        android:textColor="@color/bluenessText" />

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">   

        <ImageButton
            android:id="@+id/flashCard_show_amount_right"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="right" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:33:52.287

您看到的灰色框实际上是背景。因此，当您设置`ImageButton`可绘制对象时，它会设置图像，而不是背景。您可以使用`imageButton.setBackgroundDrawable(null);`（或`imageButton.setBackground(null)`在 API 16+ 上），或者将背景设置为您当前用于前景的任何可绘制对象。

# windows - Windows UAC 对话框

> ID：12994978
> 
> 赞同：7
> 
> 时间：2012-10-21T04:29:08.807
> 
> 标签：windows, winapi, uac

我有一个没有资源的应用程序（根本没有 UAC 清单）。此应用程序使用 CopyFile 将自身安装到 appdata/roaming 文件夹。它还设置了自动启动，因此每次启动时都会自动启动。现在每次启动 pc 时，都会弹出 UAC 对话框并说应用程序对 pc 进行了更改。如果它位于 appdata 中，它的图标上也会有盾牌标志。如何删除图标中的对话框/盾牌？Windows 是否检测到 copyfile API 并自动设置它？

感谢您的回答。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T08:35:50.283

*避免它的最好方法是添加应用程序清单*：它明确地向系统传达这不是一个遗留应用程序，并且不应该应用任何安装检测逻辑（可能有误报）。

[此外，您的应用程序应该有一个 VersionInfo 资源，其中包含文件的版本和描述。]

如果您的应用程序没有清单，系统会使用启发式方法来检测它是否是安装程序。如果它认为应用程序是安装程序，那么运行您的应用程序将需要提升，并且该应用程序将在其图标和可执行文件上带有屏蔽。

[安装程序检测技术](http://technet.microsoft.com/en-us/library/dd835540%28v=ws.10%29.aspx#BKMK_InstDet)摘录：

> *   文件名包括诸如“安装”、“设置”或“更新”之类的关键字。
> *   版本控制资源字段包含以下关键字：供应商、公司名称、产品名称、文件描述、原始文件名、内部名称和导出名称。

# python - 在python中获取一个类中的函数数量？

> ID：12994979
> 
> 赞同：0
> 
> 时间：2012-10-21T04:29:16.260
> 
> 标签：python, function

我有一个问题，我希望你能给我一个答案。

我正在尝试创建一个函数，该函数返回存储在 python 文件中的类中的函数数量。有没有好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T04:38:10.183

我试过的：

```
>>> import types

>>> class Test(object):
    def a(self):
        pass
    def b(self):
        pass

>>> len([i for i in Test.__dict__.itervalues() if isinstance(i, types.FunctionType)])
2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T04:52:13.667

您还可以使用[`inspect`](http://docs.python.org/library/inspect.html)模块：

```
class Test(object):
    def a(self):
        pass
    def b(self):
        pass

>>>>inspect.getmembers(Test, inspect.ismethod)
[('a', <unbound method Test.a>), ('b', <unbound method Test.b>)]
>>>>len(_)
2 
```

* * *

这样的事情应该适用于你的第二个问题：

```
import foo
import inspect

for a,b in inspect.getmembers(foo, inspect.isclass):
    print a 
    print len(inspect.getmembers(b, inspect.ismethod)) 
```

# python - Python，使用 Pyaudio 以 16000Hz 录制错误音频

> ID：12994981
> 
> 赞同：6
> 
> 时间：2012-10-21T04:29:52.160
> 
> 标签：python, pyaudio

我使用 Python 2.7.3、Mac OS 10.8.2 和 Xcode 4.5.1

我正在尝试按照[http://people.csail.mit.edu/hubert/pyaudio/中的说明使用 PyAudio 录制声音](http://people.csail.mit.edu/hubert/pyaudio/)

并使用该程序

```
"""PyAudio example: Record a few seconds of audio and save to a WAVE file."""

import pyaudio
import wave

CHUNK = 1024
FORMAT = pyaudio.paInt16
CHANNELS = 2
RATE = 44100
RECORD_SECONDS = 5
WAVE_OUTPUT_FILENAME = "output.wav"

p = pyaudio.PyAudio()

stream = p.open(format=FORMAT,
            channels=CHANNELS,
            rate=RATE,
            input=True,
            frames_per_buffer=CHUNK)

print("* recording")

frames = []

for i in range(0, int(RATE / CHUNK * RECORD_SECONDS)):
   data = stream.read(CHUNK)
   frames.append(data)

print("* done recording")

stream.stop_stream()
stream.close()
p.terminate()

wf = wave.open(WAVE_OUTPUT_FILENAME, 'wb')
wf.setnchannels(CHANNELS)
wf.setsampwidth(p.get_sample_size(FORMAT))
wf.setframerate(RATE)
wf.writeframes(b''.join(frames))
wf.close() 
```

它适用于`RATE = 44100`. 但我想用`RATE = 16000`和记录`CHANNELS = 1`

更改值会给我一个错误![在此处输入图像描述](../Images/71376fd80680fa0c1c56f7b69f494d5a.png)

我将如何录制`RATE = 16000`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T00:46:56.007

我遇到了同样的问题。该问题已在 portaudio 中修复，但 brew 为我安装了旧版本。我升级了

```
brew install portaudio --HEAD 
```

然后能够使用 CHANNELS=1 和 RATE=16000 运行您的代码

# c - 未知字段的代码重用

> ID：12994985
> 
> 赞同：0
> 
> 时间：2012-10-21T04:30:23.150
> 
> 标签：c

如果我有一个排序算法，并且我想按结构的某个字段进行排序。我基本上是在寻找一个参数（`sortBy`在这种情况下）能够确定是否将比较 fieldOne 或 fieldTwo 的可能性——而无需不断检查要使用的正确字段。

```
void func(SomeType *arr, int length, int sortBy) {
    int i;
    for(int i = 0; i < length, i++) {
        if(sortBy == 1) {
            doSomethingTo(arr[i].fieldOne);
        }
        else if(sortBy == 2) {
            doSomethingTo(arr[i].fieldTwo);
        }
        // etc
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:36:20.863

是的。有一个解决方案：

```
void sampleDoSomethingFunction(SomeType *arg) {
}

void func(SomeType *arr, int length, void (*doSomething)(SomeType *arg)) {
    int i;
    for(int i = 0; i < length, i++) {
        doSomething(&arr[i]);
    }
} 
```

然后你像这样调用函数：

```
 func(arr,length, sampleDosomethingFunction); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T04:38:56.370

您可以观察标准 C 的[`qsort()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/qsort.html)作用。它使用比较器函数对任何类型的任何数组进行排序：

```
void qsort(void *base, size_t nel, size_t width,
           int (*compar)(const void *v1, const void *v2)); 
```

如果应该在之前排序，比较器函数返回负值，如果`v1`应该在`v2`之后排序，则返回正值，如果在此排序条件下值相等，则返回零。请注意，有必要比较两个值；将一个值与其自己的肚脐进行比较是不够的。

在您的示例中，您似乎正在对固定类型进行排序。您可以使用`qsort()`，或者您可以借用比较器类型的想法，并使其适应您的排序：

```
void func(SomeType *arr, int length, int (*comparator)(const SomeType *v1, const SomeType *v2))
{
    ...
    int cmp = comparator(&arr[i], &arr[j]);
    ...
} 
```

您的比较器可能是：

```
static int compare_fieldOne(const SomeType *v1, const SomeType *v2)
{
    if (v1->fieldOne < v2->fieldOne)
        return -1;
    else if (v1->fieldOne > v2->fieldOne)
        return +1;
    return 0;
} 
```

如果你需要做更多的比较，你可以在`else if`子句之后添加额外的测试对，将相等的情况留到最后。

# jquery - 在 Rails 中调试 jQuery 事件触发器

> ID：12994989
> 
> 赞同：1
> 
> 时间：2012-10-21T04:31:50.357
> 
> 标签：jquery, ruby-on-rails

是否有一个工具可以让我准确调试 jQuery 事件何时绑定到 Rails 应用程序中 DOM 上的元素？我的一个 javascript 文件中有一个包含以下内容的应用程序：

```
 $("a").click(function(event){
     alert("hot stuff");
     console.log('Testing console');
   }); 
```

当我单击大多数页面上的链接时，警报会显示一次，但当我单击主页上的链接时会显示两次。看起来有些东西只在主页上两次将同一个事件绑定到一个链接，但我如何确认和解决这个问题？

# iphone - 锁定界面方向？

> ID：12994990
> 
> 赞同：0
> 
> 时间：2012-10-21T04:31:57.083
> 
> 标签：iphone, orientation, xcode4.5

在我的应用程序的初始视图中，我希望界面仅是纵向的，但在之后的视图控制器上，它可以是任何方向。我试过这段代码来锁定它，但它不起作用，视图仍然可以旋转：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
return (interfaceOrientation == UIInterfaceOrientationPortrait);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:47:19.910

代码不起作用的原因很可能是因为您运行的是 iOS 6。请尝试以下代码：

```
- (BOOL)shouldAutorotate {
    return NO;
} 
```

# algorithm - 为什么不增加 post no 的顺序在图中给出 sink（图中相应 DAG 的强连接 sink 组件中的节点）节点？

> ID：12994991
> 
> 赞同：0
> 
> 时间：2012-10-21T04:32:46.373
> 
> 标签：algorithm, graph, graph-algorithm, depth-first-search

阅读这些图..据说每个图都是其强连通分量的 DAG 有向无环图。因此，为了找到这些强连接的组件，需要在图中的 sink 部分中找到节点.. 现在要进一步解释，我需要解释 post no 和 pre no..

pre no :- 预排序是一个顶点列表，按照深度优先搜索算法首次访问的顺序排列。因此其相应的预编号。

同样，post no :- postordering 是一个顶点列表，按照 DFS 算法最后一次访问的顺序排列。其相应的职位没有

现在最高的帖子给出了源节点（真正理解），但为什么不增加帖子的顺序没有给出接收部分？

我的疑问是：-为什么我们需要反转图表以找到接收器，从而找到连接的组件。为什么不在同一张图中，我们运行一个算法，以增加 post no 的顺序（因为最低的 post no 驻留在接收器连接的组件中）..

为什么我们需要反转图形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:44:29.130

那是因为强连接组件的特性。它说组件的每个节点都必须到达组件的每个其他节点。使用第一个 DFS，您会发现一个节点可以到达的所有节点。反向图的 dfs 为您提供了可以访问节点的所有节点。

要找到完整的组件，依赖第一个 dfs 的时间戳很重要。

还有其他算法可以找到强连通分量，我认为这些算法更容易理解。一种是[kosarajus 算法](http://en.wikipedia.org/wiki/Kosaraju%27s_algorithm)。看看吧。

希望我说对了，这对您有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-13T19:57:26.127

因为最低的帖子编号甚至可以在源 SCC 中。想象一下源 SCC (SCC1) 是 3 个节点 a、b 和 c 的环/环，其中一条边将 a 连接到另一个我们不需要知道细节的 SCC (SCC2)。a,b,&c 没有其他边。如果 DFS 从 a 到 b 再到 c，则从 a 遍历边到 SCC2。在这种情况下，图中最低的后编号是 c 的后编号，这显然是源 SCC 节点而不是汇 SCC 节点。

# java - 在java中打破while循环

> ID：12994994
> 
> 赞同：1
> 
> 时间：2012-10-21T04:33:11.623
> 
> 标签：java, loops, while-loop

我真的不明白为什么它没有跳出循环。这是我的程序：

```
public static void main(String[] args) {

    Scanner input = new Scanner (System.in);

    double tution, rate, r, t, realpay, multiply, start;
    start = 0;

    while(start != -1)
    {
        System.out.print("Press 1 to start, -1 to end: ");
        start = input.nextDouble();

        System.out.print("Please enter the current tution fee for the year: ");
        tution = input.nextDouble();

        System.out.print("Enter in the amount of interest: ");
        rate = input.nextDouble();

        r = 1 + rate;

        System.out.print("Please enter the number of years: ");
        t = input.nextDouble();
        multiply = Math.pow(r,t);
        realpay = tution * multiply;

        System.out.println("the cost of your tution fee: " + realpay);

        if (start == -1)
        {
            break;
        }
    }
} 
```

你能告诉我它有什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T04:36:59.170

阅读开始后你需要移动休息

```
start = input.nextDouble();
if (start == -1) {
    break;
} 
```

否则程序将继续并在循环结束时中断，即使您输入了 -1

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T05:03:39.283

考试

```
if (start == -1) {
    break;
} 
```

应立即完成

```
start = input.nextDouble(); 
```

在您的情况下，您实际上是在退出 while 循环，但只有在执行循环体之后。

还要注意，声明`start`为 a`double`然后用 测试它的值可能引入的问题`==`。对于这样的变量，您最好将其声明为`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T18:02:56.360

将 If 块移到 while 循环之外。它不会中断，因为当它读取 -1 时，它无法进入 if 块的 while 循环。

把它移到外面，它会坏掉的。

# php - 限制用户下载速度 - Amazon s3

> ID：12994995
> 
> 赞同：1
> 
> 时间：2012-10-21T04:33:13.607
> 
> 标签：php, amazon-s3, amazon-web-services, amazon

我有一个 AWS 账户，我目前正在使用 S3 存储桶来存储音乐文件，但是我想将下载速度限制为我网站上的某些用户（高级用户，非高级用户）我知道这是可能的很多网站都这样做，尽管我不确定 Amazon S3 是否可行。

*   即使无法限制下载速度，是否可以限制每个用户的下载大小？（例如高级用户每天可以下载 1GB，没有高级用户每天可以下载 50mb）？

我的网站托管在 Apache 网络服务器上，并使用 PHP&MySQL。S3 存储桶仅用于存储音乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:33:24.667

不，除非您代理连接，否则您无法限制 S3 的下载速度，但这没有多大意义。此外，限制将完全是人为的限制，并且对 S3 没有意义，因为您按每 GB 收费，而不是按吞吐量收费。

是的，您可以限制下载大小。不过，这必须从您的应用程序中完成。

# knockout.js - 制作自定义 crossFadeVisible bindingHandler 的问题

> ID：12994997
> 
> 赞同：1
> 
> 时间：2012-10-21T04:33:17.647
> 
> 标签：knockout.js

我正在尝试制作一个 crossFadeVisible bindingHandler。主要思想是，当我们设置一个值时，我希望它淡入。如果我们清除该值（即设置为 null），我希望它淡出，如果我们更改值，我想让它淡出旧值，淡入新值。

我下午的大部分时间都在为此奋斗，所以我不完全确定这是否可能。

我决定按照我看到其他人的做法，为此创建一个**jsfiddle** ( [http://jsfiddle.net/jrstarke/4DTFq/20/](http://jsfiddle.net/jrstarke/4DTFq/20/) )。

最初该值是未定义的，但如果您点击 Set，我们将值设置为 1，并添加一些新按钮。如果您现在清除该值，它会按预期消失，并且再次设置它可以正常工作。如果你点击增量，一切都会按预期工作。

现在我无法解释的部分。如果显示“2”，您点击增量，则没有任何反应。清除，按钮消失（因为我们现在已经清除了原始值）。但显示值保持不变。

似乎发生了什么，我无法解释，是当我们调用将`value.displayed(value())`新的显示值设置为当前值时，它会导致立即再次调用更新方法（？），此时我们运行该方法完全，并且它按预期更新，但似乎我们已经解除了更改的值，因为这个更新方法永远不会被再次调用。

任何人都知道如何解决这个问题，或者我想要做的事情是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T06:41:02.133

问题是处理程序的更新代码永远不会在第一个`fadeOut`. 原因是依赖跟踪代码没有检测到您的绑定依赖，`value`因为它从未被实际读取。因此，当值确实得到更新时，绑定永远不会重新触发。

为什么会发生这种情况是因为在`postFade`更新绑定时没有调用代码。它实际上在完成后被调用`fadeOut`。它在最初更新时更新，因为该`postFade`函数在错误时`value.displayed`被调用。

解决此问题的一种简单方法`value`是在调用更新代码时读取某处。您不必对值做任何事情，只需尝试读取它即可。

```
update: function(element, valueAccessor) {
    var value = valueAccessor();

    var postFade = function() {
        // postFade depends on `value`
        value.displayed(value());
        if (value.displayed()) $(element).fadeIn('fast');
    }

    if (value.displayed()) {
        // postFade is invoked later after the fade out
        $(element).fadeOut('fast', postFade);
        // dependent on `value.displayed`

        // get the value so the dependency tracking code
        // detects that the binding depends on it
        value();
    }
    else {
        // postFade is invoked immediately
        postFade();
        // dependent on `value.displayed` and `value`
    }
} 
```