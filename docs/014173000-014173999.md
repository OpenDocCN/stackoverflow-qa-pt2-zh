# StackOverflow 问答 14173000-14173999

# python - python中具有模系数库的多项式

> ID：14173007
> 
> 赞同：0
> 
> 时间：2013-01-05T14:59:32.673
> 
> 标签：python, polynomial-math, modular

有人知道一个简单的库来
用模系数对多项式进行计算吗？

我见过 numpy，但这似乎不支持模系数...

谢谢，夏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T16:13:19.257

将系数提升到整数就足够了。例如，如果您想计算 `(1+2x+3x^2)(3+2x+x^2)`in `Z/5[x]`，只需计算`(1+2x+3x^2)(3+2x+x^2)`in`Z[x]` 并将其归约为`Z/5[x]`.

因此

```
>>> import numpy.polynomial.polynomial
>>> c1 = (1,2,3)
>>> c2 = (3,2,1)
>>> numpy.fmod(numpy.polynomial.polynomial.polymul(c1,c2),5)
>>> numpy.fmod(numpy.polynomial.polynomial.polymul(c1,c2),5) 
```

给

```
array([ 3.,  3.,  4.,  3.,  3.]) 
```

# css - 我可以在选择器上同时使用 CSS 伪元素吗：本示例的 before 和 after？

> ID：14173010
> 
> 赞同：1
> 
> 时间：2013-01-05T15:00:04.907
> 
> 标签：css, css-selectors

我想创建一个看起来像这样的水平菜单导航：

{image1} ITEM1 [separator1] {image2} ITEM2 [separator2] 等等。

我有一个限制：HTML 应该是完整的、不变的。这是否仅适用于具有以下标记的 CSS：http: [//jsfiddle.net/Mrt4V/](http://jsfiddle.net/Mrt4V/)

现在，我尝试了很多变体，最后使用了 :before 和 :after 伪元素，但现在菜单显示如下：

{image1} [separator1] ITEM1 {image2} [separator2] ITEM2 等。

我认为这可能是一个瓶颈：

```
li a:after {
  content: '';
  float: left;
  zoom: 1;
  margin: 0 0 0 2px;
  width: 4px;
  height: 16px;
  background: url('http://static-caselogic-com.r.worldssl.net/images/CaseLogic/Misc/CategoryMenuSeparator.png') 0 0 no-repeat;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-22T03:02:24.493

对于这种场景，定位是关键部分。

添加`position:relative`到`<a>`标签`position:absolute`和`:before`& `: after`。

原因是相对于标签放置`:before`& 。`:after``<a>`

我梳理了 CSS 中的更改以获得所描述的结果。

下面是工作小提琴：

[http://jsfiddle.net/MasoomS/gwxndwka/](http://jsfiddle.net/MasoomS/gwxndwka/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:05:52.170

只需设置 :after`display:inline-block`并删除`float:left`

这是示例[http://jsfiddle.net/Mrt4V/1/](http://jsfiddle.net/Mrt4V/1/)

# android - Android Layout 视图围绕一个圆圈旋转和间隔？

> ID：14173012
> 
> 赞同：14
> 
> 时间：2013-01-05T15:00:12.087
> 
> 标签：android, layout, graphics, rotation

我试图找出一种方法来围绕一个圆圈布置一系列视图，这样每个视图都被旋转为从圆圈向外。下面的图片是我正在寻找的粗略草图。外部块是布局/视图组，红色方块代表我要旋转的视图。

![我想做的事情的粗略草图](../Images/17a38e5a7909cb680590c34be29f165b.png)

我熟悉 PivotX、Pivo​​tY 和 Rotation 视图属性，并怀疑我会以某种方式使用这些属性，但我不确定如何将这些与适当的布局结合使用以获得所需的效果。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-06-30T21:55:21.803

这是一个执行此操作的示例。我创建了一个新的 Android 项目并将`RelativeLayout`已经存在的项目替换为`FrameLayout`. 它 >= API 11 只是因为 translate 和 rotate 调用`View`：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/hello_world" />
</FrameLayout> 
```

我将在代码中创建一些快速视图，只需将它们替换为您拥有的任何视图。我将它们全部放置在布局的中心，方法是将它们的重力设置`LayoutParams`为`Gravity.CENTER`. 然后，我将它们翻译并旋转到正确的位置：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final FrameLayout main = (FrameLayout)findViewById(R.id.main);

    int numViews = 8;
    for(int i = 0; i < numViews; i++)
    {
        // Create some quick TextViews that can be placed.
        TextView v = new TextView(this);
        // Set a text and center it in each view.
        v.setText("View " + i);
        v.setGravity(Gravity.CENTER);
        v.setBackgroundColor(0xffff0000);
        // Force the views to a nice size (150x100 px) that fits my display.
        // This should of course be done in a display size independent way.
        FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(150, 100);
        // Place all views in the center of the layout. We'll transform them
        // away from there in the code below.
        lp.gravity = Gravity.CENTER;
        // Set layout params on view.
        v.setLayoutParams(lp);

        // Calculate the angle of the current view. Adjust by 90 degrees to
        // get View 0 at the top. We need the angle in degrees and radians.
        float angleDeg = i * 360.0f / numViews - 90.0f;
        float angleRad = (float)(angleDeg * Math.PI / 180.0f);
        // Calculate the position of the view, offset from center (300 px from
        // center). Again, this should be done in a display size independent way.
        v.setTranslationX(300 * (float)Math.cos(angleRad));
        v.setTranslationY(300 * (float)Math.sin(angleRad));
        // Set the rotation of the view.
        v.setRotation(angleDeg + 90.0f);
        main.addView(v);
    }
} 
```

这是结果：

![一个圆圈中 8 个视图的图像](../Images/43eb40512e1e9aa924e8122388f0b0ae.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-22T12:42:11.847

@Daniel 的回答很棒。

如果您需要更多功能，您可以使用 GitHub 上的这个不错的库，名为**[Android-CircleMenu](https://github.com/szugyi/Android-CircleMenu)**

[![在此处输入图像描述](../Images/9be5d23b2fe81fc631a03d00b2d6c5a4.png)](https://i.stack.imgur.com/9OtO8.png)

# c++ - C++中的数据库查询

> ID：14173013
> 
> 赞同：-3
> 
> 时间：2013-01-05T15:00:15.020
> 
> 标签：c++, database, postgresql

```
query << "SELECT DISTINCT \"internalIP\", COUNT(DISTINCT \"externalIP\"), "
    << "SUM(\"numBytes\"), SUM(\"content\") FROM \""
    << NON_DNS_TRAFFIC_SCHEMA_NAME << "\".\"" << date
    << "\" GROUP BY \"internalIP\"";
result = PQexecParams(postgreSQL, query.str().c_str(), 0, NULL, NULL, NULL, NULL, 1); 
```

这个查询是什么意思？还有关于功能的任何想法`PQexecParams()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:04:30.927

您可以[在 Postgres 网站上找到有关 PQexecParams 的](http://www.postgresql.org/docs/9.1/static/libpq-exec.html)文档。

查询将获得不同`externalIP`s 的数量、 的总和`numbytes`以及 的`content`每个值的总和`internalIP`。

# php - 设置 Twitter 登录并获取用户资料

> ID：14173020
> 
> 赞同：-1
> 
> 时间：2013-01-05T15:01:17.427
> 
> 标签：php, twitter, oauth

我是新来的。我已经阅读了一整天的 Twitter 文档，但仍然一无所知。

我需要在我的网站上设置一个“使用 Twitter 登录”按钮，该按钮可以登录任何随机访问者，然后从 Twitter 获取他的个人资料信息。

我知道它使用 Oauth ......我猜...... REST API 也......但我没有看到任何与 PHP 相关的示例。

任何教程的任何链接都会有所帮助！

请帮忙！迫在眉睫！

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:49:56.037

查看 PHP Twitter 库[TwitterOAuth](https://github.com/abraham/twitteroauth)。有[文档](https://github.com/abraham/twitteroauth/blob/master/DOCUMENTATION)讨论了示例代码的工作原理。示例代码实现了 Login With Twitter 按钮，因此您应该能够相当轻松地复制代码并在您的站点上使用它。

# java - 我应该将使用 O(n log n) 存储和 O(log n) 查询时间的数据结构用于范围最小查询？

> ID：14173022
> 
> 赞同：3
> 
> 时间：2013-01-05T15:01:31.350
> 
> 标签：java

*假设给定一个包含 n 个值 x1, x2 ... xn 的序列，并寻求快速回答以下形式的重复查询：给定 i 和 j，找到 xi 中的最小值... xj 设计一个数据结构，使用O(n log n) 空间并在 O(log n) 时间内回答查询。*

我知道具有 O(n) 空间和 O(log n) 时间的数据结构的解决方案，但我需要一个使用 O(n log n) 空间不少于的答案。

有什么建议么 ？

O(n) 空间的解决方案：

O(n) 空间：对于 a1,a2,a3,...an 的输入，构造一个包含 (a1,..,ak) 最小值和 (ak+1,..,an) 最小值的节点，其中 k = n/2。递归构造树的其余部分。现在，如果你想找到 ai 和 aj 之间的最小值： 确定 i,j 的最低共同祖先。让它成为 k 从 i 开始并继续移动直到你击中 k。在每次迭代时检查子节点是否是左节点。如果是，则比较右子树的最小值并相应地更新当前最小值。同样，对于 j，检查它是否是正确的节点.... 在节点 k 比较每个子树返回的值并返回 min

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T15:32:28.893

首先，`O(n)`is also `O(n logn)`，所以从技术上讲，任何`O(n)`自动的解决方案也是`O(n logn)`。

您似乎要问的是一种使用`Θ(n logn)`内存的解决方案（注意[theta](http://en.wikipedia.org/wiki/Big_O_notation)）。我不得不说我认为这是一个有点奇怪的要求，因为你声称你已经有了一个更好的`Θ(n)`解决方案。

在任何情况下，您都可以通过制作数据结构的副本轻松地将您的`Θ(n)`解决方案转换为一个解决方案。`Θ(n logn)``log(n)`

# java - Cloudera - 未设置 JAVA_HOME

> ID：14173024
> 
> 赞同：0
> 
> 时间：2013-01-05T15:01:58.917
> 
> 标签：java, cloudera

谈到 Ubuntu，我还是个新手，但我正在尝试按照[此处](https://ccp.cloudera.com/display/CDH4DOC/Installing+CDH4+on+a+Single+Linux+Node+in+Pseudo-distributed+Mode)的 Cloudera 安装说明进行操作。

在第 1 步，我遇到以下错误：

```
brock@brock-hpserver:~$ sudo -u hdfs hdfs namenode -format
Error: JAVA_HOME is not set and could not be found. 
```

但是，尽管我可能是错的，但我相信我已经正确设置了所有内容：

```
brock@brock-hpserver:~$ echo $JAVA_HOME
/usr/lib/jvm/java-6-openjdk-amd64
brock@brock-hpserver:~$ echo $PATH
/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:JAVA_HOME/bin 
```

最后是我的java版本：

```
brock@brock-hpserver:~$ java -version
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

任何帮助将不胜感激。我只是想在家里的备用机器上闲逛并学习 Hadoop。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T18:07:02.370

我遇到了同样的问题，只需将`JAVA_HOME="directory_to_JDK"`设置添加到 中`/etc/environment`，它就可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T15:08:59.487

JAVA_HOME 是为您的进程定义的，但不是为`sudo`正在运行的进程定义的。 `export`JAVA_HOME 定义。我不记得语法，但我相信它类似于`export JAVA_HOME=/drive/dir1/dir2/java`

如果这不起作用，可以在系统级别为所有进程定义 JAVA_HOME。好久不见了，不记得怎么样了。但希望这里有足够的内容可以让您使用 Google。

[这是关于导出的 SO 链接。](https://stackoverflow.com/questions/10108950/bash-export-command)

# php - 通过从外部文件中提取 URL 进行动态 PHP 重定向

> ID：14173025
> 
> 赞同：1
> 
> 时间：2013-01-05T15:02:03.613
> 
> 标签：php, redirect, dynamic

作为预防措施，我想使用 PHP 创建一种易于重用/可修改的方法，将用户重定向到指定的 URL。

我有通常的 php 标头重定向：

```
<?php

   header( 'Location: http://www.stackoverflow.com/' ) ;

?> 
```

然而，我更喜欢做的是，因为这个文件将被放置在很多目录中，以使生活更轻松，并从外部文件中提取 url，例如

```
http://www.stackoverflow.com/url.xml 
```

这当然会包含相关网站的 URL，除非有另一种方法可以自动捕获域本身？这个我不确定。

任何人都可以很好地展示如何做到这一点或提供最好的方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:13:02.267

我正在考虑与@adam 相同的方法，我不建议您从文件中提取 url，因为它可以从攻击者那里读取。最好将它们作为变量、数组或任何其他数据结构包含在 php 文件中。

将 url 存储在一个名为 config.inc.php 的文件中：

```
<?php

define('USER_PATH', '/redirect/user/path');
define('ADMIN_PATH', '/redirect/admin/path');

?> 
```

然后在你的 php 文件中：

```
<?php
include 'config.inc.php';
header( "Location: http://{$_SERVER['HTTP_HOST']} . USER_PATH ) ; //or whatever variable you want to use to redirect.
?> 
```

如果由于安全问题您想重定向某些文件夹，您可以使用 Apache 的 htaccess 来完成。只需将其放在根文件夹中，然后为每个重定向添加任意数量的最后一行。此处提到的每个文件夹只能由服务器上运行的脚本访问。
使用这个**每个使用 HTTP 的访问请求都会被重定向。**所以这只适用于包含要包含的脚本的目录。它不适用于不应该显示索引的图像目录，但图像应该保持可访问性。

```
RewriteEngine on
RewriteBase /
RewriteRule ^includes/(.*) http://www.stackoverflow.com/ [R=301,L]
RewriteRule ^includes/(.*) http://www.stackoverflow.com/ [R=301,L] 
```

如果您对此不熟悉，可以使用[http://www.htaccessredirect.net/](http://www.htaccessredirect.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:07:00.197

如果包含 url 的文件位于您无法控制的域中，则存在安全风险。

相反，将 url 存储在一个名为的文件中`config.inc.php`：

```
<?php

define('REDIRECT_URL', '/redirect/path');

?> 
```

然后将其包含在您的项目中：

```
<?php

include 'config.inc.php';

echo REDIRECT_URL;

// /redirect/path

?> 
```

# android - 活动的第一个实例永远不会被垃圾收集？

> ID：14173027
> 
> 赞同：5
> 
> 时间：2013-01-05T15:02:13.353
> 
> 标签：android, memory-leaks, garbage-collection

我正在使用 Eclipse Memory Analyzer Tool (MAT) 调查我的 Android 活动是否存在内存泄漏。如果活动有泄漏，我希望死实例会在堆上徘徊，而不是收集垃圾。为了检查这一点，我反复启动和停止（通过按下后退按钮）活动，然后使用 MAT 检查堆转储。

但是我观察到一些我无法解释的奇怪行为：活动的第一个实例（在强制关闭后开始）永远不会被垃圾收集。但是，随后的实例确实如此。我从使用 MAT 工具的检查中知道这一点：无论活动启动和停止多少次，MAT 工具总是在堆上显示两个实例。第一个实例属于第一次启动活动，而第二个实例属于最近运行的活动。

关于可能发生的事情以及我是否应该担心这个问题的任何想法。内存泄漏？非常感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:53:37.010

刚刚结束：似乎 MapActivity 子类中存在内存泄漏的已知问题。参见例如 code.google.com/p/android/issues/detail?id=2181。还没有找到适合我的修复程序。

# bash - 提取路径元素以在 bash 中创建字符串

> ID：14173031
> 
> 赞同：2
> 
> 时间：2013-01-05T15:02:32.160
> 
> 标签：bash, shell

我想从 bash 中的目录名合成一个字符串。我需要提取最后两个路径名来创建一个字符串。

例如，使用输入`/a/b/c`，我想制作“b_c_HELLO”。

我怎么能用 bash 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:20:52.060

```
echo $PATH|awk -F"/" '{print $(NF-1)"_"$NF"_HELLO";}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T15:05:36.170

使用`basename`和`dirname`：

```
parent=$(dirname "$input")
output=$(basename "$parent")_$(basename "$input")_HELLO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T19:05:36.060

[一个利用Parameter Expansion](http://mywiki.wooledge.org/BashFAQ/073)的纯 bash 实现：

```
input="a/b/c"
tmp="${input%%/*/*}"
tmp="${tmp#$tmp/}"
output="${tmp/\//_}_HELLO" 
```

此外，请参阅[http://mywiki.wooledge.org/BashFAQ/100](http://mywiki.wooledge.org/BashFAQ/100)

# windows - 录音机 Windows phone 7

> ID：14173033
> 
> 赞同：1
> 
> 时间：2013-01-05T15:02:45.437
> 
> 标签：windows, audio

我在 Microsoft Visual Studio 2010、Windows 手机中工作。谁能帮我用录音机。当我播放它时，我可以听到两次，但并非总是如此。之后有人可以告诉我如何将其保存到独立存储并从那里播放。谢谢。

```
private Microphone microphone = Microphone.Default;
    private byte[] buffer;
    private MemoryStream stream = new MemoryStream();
    private SoundEffect sound;
    int broj=0;
    void timer_Tick(object sender, EventArgs e)
    {
        if (microphone.State == MicrophoneState.Started)
        {
            microphone.Stop();
            timer.Stop();
        }

    }
    void microphone_BufferReady(object sender, EventArgs e)
    {
        microphone.GetData(buffer);
        stream.Write(buffer, 0, buffer.Length);
    }
    System.Windows.Threading.DispatcherTimer timer;

    public MainPage()
    {
        InitializeComponent();

        timer = new System.Windows.Threading.DispatcherTimer();
        timer.Interval = TimeSpan.FromMilliseconds(2000);
        timer.Tick += new EventHandler(timer_Tick);
        DispatcherTimer dt = new DispatcherTimer();
        dt.Interval = TimeSpan.FromMilliseconds(33);
        dt.Tick += new EventHandler(dt_Tick);
        dt.Start();
        microphone.BufferReady += new EventHandler<EventArgs>(microphone_BufferReady);
    }
    void dt_Tick(object sender, EventArgs e)
    {
        try { FrameworkDispatcher.Update(); }
        catch { }

    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        ++broj;

        if ((broj + 1) % 2 == 0)
        {
            //FrameworkDispatcher.Update();
            microphone.BufferDuration = TimeSpan.FromMilliseconds(500);
            buffer = new byte[microphone.GetSampleSizeInBytes(microphone.BufferDuration)];
            stream.SetLength(0);
            microphone.Start();
            timer.Start();

        }

        else
        {
            sound = new SoundEffect(stream.ToArray(), microphone.SampleRate, AudioChannels.Mono);
            sound.Play();

        }
    } 
```

# tomcat - 无法编辑 tomcat-users.xml

> ID：14173034
> 
> 赞同：31
> 
> 时间：2013-01-05T15:03:02.153
> 
> 标签：tomcat, tomcat7

根据一些博客中的说明，我尝试将`C:\Program Files\Apache Software Foundation\Tomcat 7.0\conf\tomcat-users.xml`文件修改为

```
<?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
<!--
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>
-->
  <role rolename="manager"/>
  <role rolename="admin"/>
  <user username="admin" password="admin" roles="admin,manager"/>
</tomcat-users> 
```

但**保存失败**对话框出现“请检查此文件是否在另一个程序中打开”。但我确信没有任何程序启动/运行与此文件相关。修改权限被拒绝。是什么原因..？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-05T15:17:00.203

我认为原因是您无法在没有管理员权限的情况下编辑“程序文件”中的文件。

我多次遇到这种问题，我通常通过以管理员权限运行我的文本编辑器来解决它。

例如，在 Windows 7 中使用记事本编辑文件： 在开始菜单中找到它，然后用鼠标右键单击它。您应该能够从上下文菜单中选择“以管理员身份运行”。现在编辑文件，您应该可以保存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T21:01:27.820

我相信，就我而言，问题在于 Tomcat 服务器也在 Eclipse 中运行。因此，我从 Eclipse 中停止了 Tomcat 服务器，并且编辑和保存 tomcat-users 文件没有问题。我将用户名添加为 admin 并将密码添加为 admin 以及错误消息中说明中的角色 - 保存了文件，我能够从 Tomcat 网页登录。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-07T18:44:22.563

注意可能会有所帮助，请明确提及 tomcat-users.xml 中的所有角色。请看下面：

```
<role rolename="manager-gui"/>    
<role rolename="manager-script"/>    
<role rolename="manager-jmx"/>    
<role rolename="manager-status"/>    
<role rolename="admin"/>    
<user username="admin" password="admin" roles="admin,manager-gui,
manager-script,manager-jmx,manager-status"/> 
```

# eclipse - 如何在eclipse中以编程方式比较文件？

> ID：14173036
> 
> 赞同：0
> 
> 时间：2013-01-05T15:03:09.213
> 
> 标签：eclipse, eclipse-plugin

我正在开发一个 Eclipse 插件，它对文件的两个版本的差异运行代码违规检查器。现在我正在使用[diff.exe](http://code.google.com/p/sharpdiff/downloads/detail?name=diff.exe&can=2&q=)来获取两个文件之间的差异。但是由于 diff.exe 是一个外部应用程序，我意识到最好使用 eclipse 内置的比较工具来获取文件差异。所以我使用了**org.eclipse.compare**并达到了这一点：

```
public static List<Patch> compare(String old, String recent) {
    try{
        IRangeComparator left = new TokenComparator(old); //what exactly to be passed in this constructor, a file path, a literal value or something else?
        IRangeComparator right = new TokenComparator(recent); 
        RangeDifference[] diffs = RangeDifferencer.findDifferences(left, right); // This line is throwing NPE

        //..
        // Process RangeDifferences into Collection of Patch collection
        //..
    }catch(Exception e){}

    //Returns  a collection of file differences.
    return null;
} 
```

现在的问题是我不确定要在构造函数**TokenComparator(String)**中传递什么。[文档](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/compare/contentmergeviewer/TokenComparator.html)说这个 构造函数为给定的字符串创建一个 TokenComparator。但是并没有写出到底要在这个构造函数中传递什么，文件路径，文字值或其他什么？当我传递文件路径或字符串文字时，我在查找差异的下一行得到 NullPointerException。

```
java.lang.NullPointerException
    at org.eclipse.compare.internal.core.LCS.isCappingDisabled(LCS.java:98)
    at org.eclipse.compare.internal.core.LCS.longestCommonSubsequence(LCS.java:55)
    at org.eclipse.compare.rangedifferencer.RangeComparatorLCS.longestCommonSubsequence(RangeComparatorLCS.java:186)
    at org.eclipse.compare.rangedifferencer.RangeComparatorLCS.findDifferences(RangeComparatorLCS.java:31)
    at org.eclipse.compare.rangedifferencer.RangeDifferencer.findDifferences(RangeDifferencer.java:98)
    at org.eclipse.compare.rangedifferencer.RangeDifferencer.findDifferences(RangeDifferencer.java:82)
    at org.eclipse.compare.rangedifferencer.RangeDifferencer.findDifferences(RangeDifferencer.java:67)
    at com.dassault_systemes.eclipseplugin.codemonview.util.CodeMonDiff.compare(CodeMonDiff.java:48)
    at com.dassault_systemes.eclipseplugin.codemonview.util.CodeMonDiff.main(CodeMonDiff.java:56) 
```

有人请告诉什么是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:44:52.233

*org.eclipse.compare*插件从来没有打算单独使用：它的许多功能需要运行的 Eclipse 实例。此外，它将核心代码和 UI 代码混合在同一个插件中，如果您对使用的内容和环境中实际可用的依赖项不太小心，这将导致意外行为。

您提到您正在开发一个 Eclipse 插件。但是，您获得的 NPE 表明您没有将代码作为 Eclipse 插件运行，而是作为标准 Java 程序运行。在 Eclipse 环境中，*ComparePlugin.getDefault()*不能返回*null*：需要启动插件才能使该调用返回除*null*之外的任何内容.... 并且仅在 Eclipse 中加载*ComparePlugin*类就足以启动它。

答案将是一个选择：

1.  您需要您的代码在 Eclipse 之外作为独立的 Java 程序运行。在这种情况下，您不能使用 org.eclipse.compare，而*diff.exe*可能是您的最佳选择（或者您可以切换到用 Java 实现的*diff*实现，以便独立于平台）。
2.  您不需要您的程序在独立环境中工作，只需作为 Eclipse 插件即可。在这种情况下，您可以保留正在使用的代码。但是，当您运行代码时，您必须将其作为新的“Eclipse 应用程序”而不是“Java 应用程序”启动。您可能想查看有关如何为此开发 Eclipse 插件的教程，Lars Vogel 的这个[简单教程](http://www.vogella.com/articles/EclipsePlugIn/article.html)展示了如何运行新的 Eclipse 应用程序来测试 Hello World 插件。您将需要一个类似的代码，并带有一个菜单条目以在某处启动您的插件（右键单击一个文件，然后在您的情况下选择“检查违规”？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:49:19.290

如果问题是令牌比较器构造函数采用什么值，那么答案是它需要输入字符串进行比较。在此处的 javadoc 中指定[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcompare%2Fcontentmergeviewer%2FTokenComparator.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcompare%2Fcontentmergeviewer%2FTokenComparator.html)

**TokenComparator(String text) 为给定的字符串创建一个 TokenComparator。**

你得到的空指针是因为在函数**isCappingDisabled**中它试图打开似乎为空的比较插件。您似乎缺少对插件**“org.eclipse.compare.core”的直接依赖**

# javascript - Apple App Store + Phonegap 自动更新

> ID：14173044
> 
> 赞同：0
> 
> 时间：2013-01-05T15:03:56.357
> 
> 标签：javascript, ios, cordova

我发现了许多类似的问题，但与我所问的问题完全不同。我正在使用 Phonegap 构建一个应用程序。

似乎苹果允许应用程序请求外部 JS（人们使用谷歌地图等），所以基本上是通过`<script>`在标题中使用标签并引用外部 js 文件。我的问题是我想通过代码做类似的事情，所以使用 jquery getScript。

该功能一切正常，但我唯一担心的是苹果说您无法将代码下载到您的应用程序。当然，在引用外部 javascript 的应用程序的标头中有一个脚本标记就是这样，将 javascript 下载到应用程序。

在我看来，它基本上完全一样，无论你如何获取 javascript，它在技术上仍然是“下载”代码。

任何人都知道这个问题的真正答案，如果没有，我该如何找到？即使该应用程序获得批准，也没有什么可以阻止我使用此代码构建 20 个应用程序，只是为了将来发现我很幸运，他们将它们全部关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T15:39:10.333

对此众说纷纭。一些开发人员在使用电话间隙时很难获得应用程序的批准。我个人不喜欢使用它。这是一个讨论的链接，该讨论具有许多开发人员的意见。 [http://www.linkedin.com/groups/Anyone-uses-PhoneGap-on-iOS-72283.S.106288557](http://www.linkedin.com/groups/Anyone-uses-PhoneGap-on-iOS-72283.S.106288557)

[https://devforums.apple.com/message/513221](https://devforums.apple.com/message/513221)

正如我所说，对此有不同的看法。使用 phonegap 不会阻止您的应用程序获得批准，但文档中明确提到下载代码的应用程序将被拒绝。根据苹果的说法，在应用程序中使用 javascript 代码没有问题，但您无法执行一组代码以从外部将脚本下载到应用程序中。它必须在您的应用程序中。我希望这对你有意义。但总而言之，如果您正在构建一个下载代码的应用程序，它将被拒绝，如果您正在构建一个包含脚本并下载与之相关的对话（如 Facebook）的应用程序，没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:13:14.683

此“指南”的精神是确保应用程序的功能在 Apple 批准后不会发生任何重大变化。[苹果甚至锁定​​了在批准后更改屏幕截图的能力](https://developer.apple.com/news/index.php?id=1092013a)。这更多是为了安全，目标还是一样的。始终如一地展示您的应用程序的功能。

从您的问题标题推断，您是否正在使用`<script>`或`getScript`确保设备的最新版本，而不是打包应用程序和更新应用程序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:46:13.807

苹果不允许您稍后加载代码。例外是每条规则的一部分，但关于这一点的一般意见是明确的，我不会依赖这一点

# javascript - 翻译后将 html 元素返回到其原始位置

> ID：14173047
> 
> 赞同：1
> 
> 时间：2013-01-05T15:04:01.037
> 
> 标签：javascript, jquery, css, html

我在用着

```
document.getElementById('Droping1').style['-webkit-transform'] = translate(0px,'+Ground+'px)'; 
```

移动一个 html 对象。

我应该如何将它送回原来的地方重复使用。我不希望用户看到翻译回来。

我的解决方案是：

```
document.getElementById(event.data.name).style['-webkit-transition'] = '0s';    
document.getElementById(event.data.name).style['-webkit-transform'] = 'translate(0px)'; 
```

有更好的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:12:03.170

首先将当前`style['-webkit-transform']`值保存在临时变量中，然后在翻译后将其分配回`style['-webkit-transform']`如下：

```
var temp = document.getElementById('Droping1').style['-webkit-transform'];
document.getElementById('Droping1').style['-webkit-transform'] = translate(0px,'+Ground+'px)'; 
```

后：

```
document.getElementById('Droping1').style['-webkit-transform'] = temp; 
```

为了不向客户显示到原始位置的翻译，您应该将`-webkit-transition-duration`属性设置为`0s`before`document.getElementById('Droping1').style['-webkit-transform'] = temp;`以便在眨眼间发生，就像您`-webkit-transform`使用 JS 更改属性的方式一样。

# matlab - 如何获得曲线和直线之间的交点？

> ID：14173050
> 
> 赞同：0
> 
> 时间：2013-01-05T15:04:19.083
> 
> 标签：matlab, intersection

我对材料进行了拉伸测试，这是我的数据。我需要确定与我的数据的交点，这会给我带来屈服压力。数据以以下形式写入：

```
 A = -0.0033   -2.6120
     -0.0037   -2.6309
     -0.0051   -2.6246
     -0.0018   -2.6309
     -0.0030   -2.6120
     -0.0004   -2.5806
     -0.0036   -2.6120
     -0.0026   -2.6120
     -0.0024   -2.5995
     -0.0020   -2.5618... etc. 
```

还有一条线，`y=a*(x-0.2)+b`。

在`intersect`将该行解释为：

```
C =  0  -19.3677
1.0000   48.4377
2.0000  116.2431` 
```

但这无济于事。问题解决方案的任何建议？我有一堆实验数据，想把它写成一个宏。数据具有相同的曲线模式。

图片在这里：

![路口](../Images/43f1fca3be91309144d1988555acbb1f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:08:17.960

你知道如何计算两条线的交点吗？如果是这样，您可以对形成曲线的所有部分执行此操作，并选择有意义的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:51:02.493

a) 沿线对您的数据进行二分搜索

b) 定位最接近直线的数据段

c) 相交线

二分搜索将找到最近数据段之间的近似曲线的中点，这类似于无论如何计算贝塞尔曲线。

如果准确性很重要，请进行分析。

# objective-c - 从 iOS 应用程序中控制非 iPod 音乐播放器（例如 Spotify）

> ID：14173056
> 
> 赞同：2
> 
> 时间：2013-01-05T15:04:43.787
> 
> 标签：objective-c, ios, avaudioplayer

在我的应用程序中，我需要在播放自己的声音时暂停并重新启动背景音乐。

iPod 的方法是使用：

```
[[MPMusicPlayerController iPodMusicPlayer] pause]; 
```

和 ：

```
[[MPMusicPlayerController iPodMusicPlayer] play]; 
```

对于非 iPod 应用程序，这没有影响。

第二次尝试是启用闪避：

```
 UInt32 property = sender.on;
    AudioSessionSetProperty(kAudioSessionProperty_OtherMixableAudioShouldDuck,sizeof(property),&property);
    AudioSessionSetActive(property); 
```

也适用于 iPod 音乐播放器，而不是 Spotify。

设置`kAudioSessionCategory_SoloAmbientSound`确实会停止所有音乐，但不会重新启动它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-31T07:50:05.400

控制它的方法是使用`AVAudioSession`'s`setActive`方法。

当您想播放声音时，请将会话设置为活动状态：

```
[[AVAudioSession sharedInstance] setActive:YES error:nil]; 
```

当您停止播放时，将您的会话设置为非活动状态，但同时带有通知其他人的标志。此标志应该会导致其他应用程序重新启动（应该适用于 iPod 和其他应用程序）。对于带有 AVAudioSession 的 iOS6+，您可以这样做：

```
[[AVAudioSession sharedInstance] setActive:NO withOptions:AVAudioSessionSetActiveOptionNotifyOthersonDeactivation error:nil]; 
```

iOS 6 之前：

```
 [[AVAudioSession sharedInstance] setActive:NO withFlags:AVAudioSessionSetActiveFlags_NotifyOthersOnDeactivation error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:38:59.310

你也不需要。iOS 只允许一个应用程序一次播放音频，并且会自动暂停音乐播放器，以便您可以播放音乐，因为您的应用程序具有音乐播放优先级。玩你的，让 iOS 来处理。

# sql-server - 使用 SQL Azure 从会话状态提供程序（实体框架）持续接收“超时时间已过”

> ID：14173058
> 
> 赞同：5
> 
> 时间：2013-01-05T15:04:51.350
> 
> 标签：sql-server, azure, timeout, azure-sql-database

我一直收到来自 ASP.NET 4.5 Windows Azure Web 角色中的会话状态模块的错误，它指向 SQL Azure 数据库。会话状态模块正在使用 dbcontext。例外情况包括。堆栈跟踪是：

```
System.Data.EntityException: The underlying provider failed on Open. ---> System.Data.SqlClient.SqlException: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=2; handshake=14993;  ---> System.ComponentModel.Win32Exception: The wait operation timed out
--- End of inner exception stack trace ---
at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
at System.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
at System.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
at System.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
at System.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean& marsCapable)
at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover)
at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions)
at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnectionOptions userOptions)
at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnectionOptions userOptions)
at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
at System.Data.SqlClient.SqlConnection.Open()
at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
--- End of inner exception stack trace ---
at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
at System.Data.EntityClient.EntityConnection.Open()
at System.Data.Objects.ObjectContext.EnsureConnection()
at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
at System.Linq.Queryable.SingleOrDefault[TSource](IQueryable`1 source)
at System.Data.Entity.Internal.Linq.InternalSet`1.FindInStore(WrappedEntityKey key, String keyValuesParamName)
at System.Data.Entity.Internal.Linq.InternalSet`1.Find(Object[] keyValues)
at System.Web.Providers.DefaultSessionStateProvider.<>c__DisplayClass14.<SetAndReleaseItemExclusive>b__13()
at Microsoft.Practices.TransientFaultHandling.RetryPolicy.<>c__DisplayClass1.<ExecuteAction>b__0()
at Microsoft.Practices.TransientFaultHandling.RetryPolicy.ExecuteAction[TResult](Func`1 func)
at System.Web.SessionState.SessionStateModule.OnReleaseState(Object source, EventArgs eventArgs)
at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T18:01:27.357

SQL Azure 提供有限的资源，因为每个数据库都存在于共享服务器中，这意味着如果另一个客户端在您正在工作的同一服务器上运行长查询，您的应用程序性能将会下降。

根据我使用 SQL Azure 两年的经验，您需要在 DAL 中实现一些重试逻辑，以便您的应用程序避免因此类错误而崩溃。此外，每个数据库最多只能同时连接 180 个连接，还有其他限制（如大小、管理等）。180 之后的每个连接都会被拒绝。您必须小心保护您的应用程序免受 DoS 攻击！

SQL Azure 的标准用户（如您或我）没有可用的选项（或配置）来减轻此限制（即使在企业数据库中也是如此）。在我作为 DBA 团队的公司中，我们与 Microsoft Ops 团队就许多与高事务负载相关的问题开了几张票，从他们那里收到的建议涉及沿多个数据库进行数据分区、索引、重试策略和延迟重试策略（用于连接/登录和查询） - 设置为 5 次重试；对于大型 SELECTs / INSERTs / UPDATEs / DELETEs 根据记录长度将记录分段为 1000 到 10,000 组。

几年后，我们将数据迁移到 IaaS（在 Azure 云上托管为虚拟机的 SQL Server）。

我给你的建议是，在选择 SQL Azure 之前要慎重，想想优点和缺点！

运气 ！！

# django - Django：从 MySQL 迁移到 PostgreSQL 后，UserProfile 的 user_id 字段出现问题

> ID：14173065
> 
> 赞同：0
> 
> 时间：2013-01-05T15:06:02.953
> 
> 标签：django, postgresql

我将我的数据库从 MySql 迁移到 PostgreSQL，并且，当我注意到许多表没有更新时，一些谷歌搜索告诉我做这样的事情：

```
ALTER SEQUENCE my_table_id_seq OWNED BY my_table.id; 
```

事情开始奏效了。我必须为我所有的桌子这样做。

然后我意识到，在创建一个 django.contrib.auth.model.User 之后，然后尝试用一个`post_save`钩子创建一个 UserProfile，我会得到一个，`IntegrityError`因为`user_id`外键是作为 null 发送的。

这是发送到 PostgreSQL 的`query`and `args`（在 Python 中）：

```
INSERT INTO "auth_user" ("username", "first_name", "last_name", "email", "password", "is_staff", "is_active", "is_superuser", "last_login", "date_joined") VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) (u'apitest04', '', '', u'a@a.aa', 'sha1$9f796$69c88c635c8a53a91544765d7996747cf326cfec', False, True, False, u'2013-01-05 12:39:07.384198', u'2013-01-05 12:39:07.384198')

INSERT INTO "myapp_userprofile" ("user_id", "website", "job", "hobbies", "timezone", "about", "company_name", "company_description", "company_website", "retailer_country", "avatar", "default_license", "default_watermark_text", "default_watermark", "default_watermark_position", "default_watermark_opacity", "language") VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s) (None, None, None, None, None, None, None, None, None, None, None, 0, None, False, 0, 10, None) 
```

我想正在发生的事情是`auth_user`在事务关闭之前序列 id 没有提前。我怀疑因为创建失败`User`时会回滚`UserProfile`，所以它们必须在同一个事务期间发生。

是否有可能由于交易尚未结束而以某种方式尚未返回`id`？`User`你建议我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T20:41:35.967

问题解决了，它发生是因为`auth_user.id`序列没有所有者。这修复了它：

```
ALTER SEQUENCE auth_auth_id_seq OWNED BY auth_auth.id; 
```

# jquery - 使用 web api 在 vs 2010（不是 web 表单）上对 web 应用程序项目进行 CRUD 操作

> ID：14173069
> 
> 赞同：1
> 
> 时间：2013-01-05T15:06:43.780
> 
> 标签：jquery, ajax, web-applications, asp.net-web-api, crud

> **可能重复：**
> [VS 2010 Web 应用程序中的 ASP.NET Web Api CRUD 操作](https://stackoverflow.com/questions/14183092/asp-net-web-api-crud-operation-in-vs-2010-web-application)

我尝试使用 Web Api 在 vs 2010（不是 Web 表单）上的 Web 应用程序项目上创建 CRUD 操作。我已经通过网址“ [http://localhost:7031/api/product/](http://localhost:7031/api/product/) ”成功返回了控制器的值，
但是当我尝试使用 jquery ajax 时，控制器没有返回值。

贝娄是我的代码：

路线/Global.asax：

```
protected void Application_Start(object sender, EventArgs e)

        {
            RouteTable.Routes.MapHttpRoute(
            name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}", // browse with localhost:7031/api/product
                //routeTemplate: "{controller}/{id}",  // browse with localhost:7031/product
                defaults: new { id = System.Web.Http.RouteParameter.Optional }

        );
        } 
```

控制器 ：

```
namespace MyLabs1.Controller

{

    public class ProductController : ApiController
    {
        NorthwindEntities db = new NorthwindEntities();

        public IEnumerable<Product> GetAll()
        {
            return db.Products.AsEnumerable();
        } 
```

Ajax Jquery 页面：

```
<script src="Script/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="Script/jquery-1.7.1.js" type="text/javascript"></script>

<script type="text/javascript">
$(function () {
        $('#<%= cviewproduct.ClientID %>').click(function (e) {
            getProducts();
        });

    });

function getProducts() {
        $.getJSON("/api/product/",
                function (data) {
                        $.each(data, function (key, val) {
                        var str = val.productName;
                        alert(str)
                    });
                });
    } 
```

任何想法，为什么我的代码不起作用？

提前致谢

安德里安

# c# - Web Api + Entity Framework 未正确加载数据

> ID：14173070
> 
> 赞同：1
> 
> 时间：2013-01-05T15:06:46.643
> 
> 标签：c#, rest, entity-framework-4.1, asp.net-web-api, json.net

我使用 ASP.NET Web Api 构建了一个小型服务。我的域类如下所示：

```
 public class Drink : IEntity
{
    public Drink()
    {
        Ingridients = new List<Ingredient>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public ICollection<Ingredient> Ingridients { get; set; }
    public string Approach { get; set; }
}

public class Ingredient : IEntity
{
    public Ingredient()
    {
        Drinks = new List<Drink>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public ICollection<Drink> Drinks { get; set; }
} 
```

我的存储库如下所示：

```
public IEnumerable<T> GetAll(){return _dbSet;} 
```

我的控制器看起来像这样：

```
 public IEnumerable<Drink> GetAllDrinks()
    {
        return _unitOfWork.Drinks.GetAll();
    } 
```

当我使用提琴手提出请求时，JSON结果如下：

```
{"Id":15,"Name":"Russian Energy","Ingridients":[],"Approach":"Mix Vodka with Redbull"} 
```

如您所见，Ingridents 数组为空。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:03:41.933

您可以尝试使用*急切*加载`Include`：

扩展您的`GetAll`方法以允许急切加载：

```
//...
using System.Data.Entity;
//...

public IEnumerable<T> GetAll(params Expression<Func<T, object>>[] includes)
{
    IQueryable<T> query = _dbSet;
    if (includes != null)
    {
        foreach (var include in includes)
            query = query.Include(include);
    }
    return query;
} 
```

然后像这样在你的控制器中使用它：

```
public IEnumerable<Drink> GetAllDrinks()
{
    return _unitOfWork.Drinks.GetAll(d => d.Ingredients);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:11:22.510

您是否首先使用实体​​框架代码？

如果是这样，您必须将导航属性标记为`virtual`：

```
public class Drink : IEntity
{
    public Drink()
    {
        Ingridients = new List<Ingredient>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Ingredient> Ingridients { get; set; }
    public string Approach { get; set; }
}

public class Ingredient : IEntity
{
    public Ingredient()
    {
        Drinks = new List<Drink>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Drink> Drinks { get; set; }
} 
```

# deployment - Websphere MQ 生产部署的良好实践

> ID：14173071
> 
> 赞同：3
> 
> 时间：2013-01-05T15:06:51.927
> 
> 标签：deployment, version-control, ibm-mq, production-environment

我即将为 Websphere MQ 生产环境准备一个部署规范。一如既往，我讨厌重新发明轮子，因此提出了一个问题：在部署和维护 Webshpere MQ 生产环境时，是否有文章说明最佳实践？

以下是我更具体的疑问：

*   配置版本控制（MQSC、dmpmqcfg 等）。
*   部署新对象（MQSC 还是手动说明？）
*   部署自动化（可能基于 dmpmqcfg 的差异？）。
*   部署和版本控制配置更改。

目前我只是手动创建 MQ 对象并对 dmpmqcfg 的输出进行版本控制。然而，在一段时间内会有太多的部署来处理它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T20:12:34.600

这是一个非常广泛的问题，所以我会尝试在版主删除它之前做出回应。:-)

答案取决于很多事情，例如是否使用 MQ 集群、高可用性和灾难恢复的方法、安全要求、QMgrs 是配置为专用还是共享基础架构等。但是，我有一些模式我认为几乎在所有情况下都遵循，包括非生产。这是因为如果没有在 Dev 中进行测试并且在 Prod 中无法按预期工作，那么监控和安全性之类的东西往往会在部署时被丢弃。

*   我使用脚本在生产环境中创建 QMgrs，以确保生成 X.509 证书（或 CSR）等基本操作始终按照标准完成，确保存在任何退出或退出 parm 文件，确保某些 SupportPac 可执行文件（`q`如存在于`/opt/mqm/bin`，[循环队列](http://www.ibm.com/developerworks/websphere/techjournal/1103_mismes/1103_mismes.html)等中。它还会检查诸如未安装 GSKit 等负面因素。
*   我有一个针对所有 QMgrs 运行的基线脚本。此脚本设置 DLQ、监视代理的任何队列、根据需要启用事件、设置系统服务、触发监视器、侦听器等。B2B 网关 QMgrs 例外，它们在一个类中单独处理并具有非常具体的配置不用于内部网络。簇。
*   我有几类具有特定配置要求的 QMgr。其中包括集群存储库（其中主要和次要是不同的子类型）、服务提供者 QMgrs 和服务消费者 QMgrs。这些都有针对它们运行的​​辅助脚本。
*   在使用集群的情况下，我有每个集群的脚本来加入或暂停 QMgr（自 v7.1 以来，这对我来说几乎是 100%）。

这些设置了 QMgr 的基础设施。然后我为每个应用程序维护脚本。因此，例如，如果有一个 Payroll 应用程序，我将有队列和可能的主题，其名称包含一个`PAY`节点，例如`PAY.EMPLOYEE.UPDT.REQ.V032.PRD`. `PAY.**`与此相对应的是所有队列的单个脚本。曾经也是`setmqaut`命令之一，但现在这些与对象在同一个脚本中。我只有一个版本的脚本并保留脚本更改的历史记录。这样，当我需要重新创建 QMgr 时，我只需为其运行所有脚本。同样，如果我需要`PAY`在另一个 QMgr 上部署对象，我只需将脚本复制到该服务器即可。

在为集群定义对象时，我总是会做一个`DEFINE NOREPLACE`包含所有运行时属性的操作，例如是否在集群中启用了队列。该队列始终在集群中定义为禁用并用于触发，但因为我使用`NOREPLACE`重新运行脚本不会改变它在一个月内的任何状态。那些是配置而不是运行时的东西，例如描述，会在`ALTER`之后立即处理，并且每次脚本运行时都会更新*这些*`DEFINE`内容。[这里](http://www.ibm.com/developerworks/websphere/techjournal/0811_mismes/0811_mismes.html)有一篇关于这个的文章。

 *最后，我使用的脚本是自执行的、自记录的。例如，许多人将所有 MQSC 命令放入脚本中，然后执行以下操作：

```
runmqsc < payroll.mqsc > payroll.out 
```

这里有很多问题。主要的一点是它依赖于操作员的知识渊博，并且始终正确地执行脚本。例如，假设他忘记捕获输出？或者覆盖以前的输出？或者没有得到`STDERR`，因为（s）他需要`2>&1`在最后做并且不知道重定向那么好？

所以我的脚本都是用`ksh`处理所有输出的捕获，完成时间和日期标记，并且`STDERR`可以自由地将 MQSC 与操作系统命令等混合编写的。你所要做的就是转到该 QMgr 的脚本目录并`. ./*ksh`构建/重建一个质量管理器。

我当然也会定期进行配置转储，但这些更多用于运行查询和报告，例如“有多少 QMgrs 定义了这个通道，它们在哪里？” 之类的事情。

此外，在进行备份时，几乎没有充分的理由在某个时间点备份 QMgr。但是，如果需要，请务必先停止 QMgr。此外，请仔细考虑如何在备份中捕获证书。许多人擅长锁定证书目录，因此只能`mqm`读取它，但备份通常不受保护。只要您不尝试在 Production 上恢复，许多商店都允许您将 Production`/var/mqm/*`文件恢复到您自己的沙箱中。如果包含 QMgr 的 KDB 文件，您只是丢失了它们。另一种方法是将证书放在`/etc`受保护但未与 QMgr 的目录一起备份的其他目录中。*

# java - 方法调用转换时无法将实际列表转换为字符串

> ID：14173074
> 
> 赞同：0
> 
> 时间：2013-01-05T15:07:21.830
> 
> 标签：java, jakarta-ee, playframework

我是一个新手，已经开始开发一个应用程序来从数据库中获取数据。

我的应用程序中有以下代码：

```
public static Result list() {
    List products = Productslist.getListOfProducts();
    return ok(index.render(products));
} 
```

这给了我以下错误：

`Actual List cannot be converted to String on method invocation conversion` 也可以查看我的 index.scala.html

```
#{extends 'main.html' /}
#{set title:'Cars in the car lot' /}
<h1>Products in Lot</h1>

<table border=1>
<tr>
<td>productname</td>
<td>Quantity</td>
<td>Price</td>
</tr>
#{list items:products, as:'product'}
<tr>
<td>${product.getProductname()}</td>
<td>${product.getQuantity()}</td>
<td>${product.getPrice()}</td>
</tr>
#{/list}
</table> 
```

Application.java 的完整代码是：

```
package controllers;

import play.*;
import play.mvc.*;
import models.Productslist;
import views.html.*;
import views.*;
import java.util.*;

public class Application extends Controller
{

public static Result list() 
    {
        List products = Productslist.getListOfProducts();
        return ok(index.render(products));
    }
} 
```

谁能帮我找到错误的根源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:04:23.000

看起来 index.render(products) 上发生了错误；其中方法 render 需要一个字符串，但我们正在传递列表。你能把方法render()的代码放进去吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T05:38:05.660

看起来您为视图使用了错误的代码。试试这个

```
@(products: List[Productslist])

@import helper._

@main("Product list") {

    <h1>@product.size() product(s)</h1>

    <ul>
        @for(product <- products) {
            <li>
                @product.name
            </li>
        }
    </ul>
} 
```

`play clean-all`在运行服务器之前使用

# java - 可以取密码吗？

> ID：14173077
> 
> 赞同：2
> 
> 时间：2013-01-05T15:08:10.690
> 
> 标签：java

我有以下代码

```
public static void main(String[] args) {

    String plainTextpassword = "plaintextpassword";
    String encryptedPassword = getMd5Password(plainTextpassword);
} 
```

有没有可能有人可以在垃圾收集之前使用我的密码，使用内存转储或任何方式。如果是这样，我该如何克服它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:14:21.757

> 有没有可能有人可以在垃圾收集之前使用我的密码，使用内存转储或任何方式

是的，即使在垃圾回收之后也有可能，因为内存的内容不会立即被覆盖。这就是坏消息。

好消息是，操作系统应该分离进程之间的地址空间。我写了应该，因为偶尔会发现一些可以用来克服这种分离的错误；但是，如果发现这样的错误，密码保护是您最不关心的问题。所以我不担心这个。

所以最严重的事情是，你自己的程序过程中的某些事情发生了错误。这可能是由于您的代码中的错误，或者因为您使用了一些有错误的库。但是，如果您的程序没有错误（尽管可能性很小），并且您的操作系统没有错误（也不太可能，但仍然比您自己的程序没有错误的可能性更大），那么您的密码应该是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:03:47.853

根据我收集的事实，使用 char 数组 (char []) 是存储密码的最佳实践，因为，

“由于字符串是不可变的，因此无法更改字符串的内容，因为任何更改都会产生新的字符串，而如果您使用 char[]，您仍然可以将他的所有元素设置为空白或零。因此，将密码存储在字符数组中显然会降低安全性窃取密码的风险。”

[阅读更多](http://javarevisited.blogspot.sg/2012/03/why-character-array-is-better-than.html)

# php - 如何在 jquery 和 php 中取消 ajax 请求

> ID：14173084
> 
> 赞同：1
> 
> 时间：2013-01-05T15:08:58.010
> 
> 标签：php, jquery, blueimp

我在服务器端使用 jquery 和 php 进行了 ajax 上传。我有一个取消按钮，它取消了取消 ajax 请求的上传。为此，我使用了 jqXHR.abort(); 中止请求。但我有一个问题，虽然 ajax 请求被中止，但文件仍然被上传，即它之前提出的请求仍然完成。我如何能够在中止 ajax 请求时取消上传过程。可能吗？我正在使用简单的文件上传和 php，它使用 move_uploaded_file(file,newloc) 函数上传文件和 blueimp jquery 文件上传以进行 ajax 上传（[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)）

# jquery - 如果 jQuery autocomplete() 字段不匹配，如何进行 ASP.NET 页面验证失败？

> ID：14173085
> 
> 赞同：0
> 
> 时间：2013-01-05T15:09:00.610
> 
> 标签：jquery, asp.net, validation, autocomplete

在结合我通过阅读[这个问题的答案所学到的知识之后，我已经弄清楚了如何在用户在](https://stackoverflow.com/questions/2587378/how-to-implement-mustmatch-and-selectfirst-in-jquery-ui-autocomplete)[自动完成](http://jqueryui.com/autocomplete/)字段中输入与任何可用选择都不对应的文本时生成错误消息。

这个页面是一个 ASP.NET 页面，上面已经有一个 ASP.NET 验证器的基础结构。我想要发生的是在页面上引入一个验证器，当用户输入不在列表中的内容时导致页面验证失败。这是我到目前为止所拥有的：

我从匿名者对上述问题的回答开始：

```
change: function (event, ui) {
        if (!ui.item) {
             $(this).val('');
         }
    } 
```

我在我的`autocomplete()`javascript中用这个替换了它：

```
 change: function (event, ui) {
        if (!ui.item) {
             $(""#" + lblAutocompleteError.ClientID + @""").show();
             $(""#" + txtDummy.ClientID + @""").val('');
        } else {
             $(""#" + lblAutocompleteError.ClientID + @""").hide();
             $(""#" + txtDummy.ClientID + @""").val('Dummy');
        }
    }, 
```

它是在代码隐藏而不是前端生成的 javascript，这就是为什么它具有所有文字字符串的优点......

在前端，我声明了两个控件：`txtDummy`我根据自动完成是否包含匹配的字符串来设置和清除它们，并且`rfvDummy`需要`TextBox`填充。

```
<asp:RequiredFieldValidator runat="server" ID="rfvDummy" 
    ControlToValidate="txtDummy" />
<asp:TextBox runat="server" ID="txtDummy" Text="Dummy" Visible="false" /> 
```

问题是，`RequiredFieldValidator`当它应该失败时，它并没有失败。更重要的是，我有一种下沉的感觉，我在这里走错了路。对于我想要完成的事情，创建一个 hidden`TextBox`和 a似乎太过分了。`RequiredFieldValidator`当用户输入不在自动完成列表中的值时，是否有一种直接的方法可以在客户端导致页面验证失败，并且消息的格式与我的其他验证器一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:47:51.577

我的自动完成逻辑是正确的，这是隐藏`txtDummy`控件的方法。通过使用

```
Visible="false" 
```

没有生成HTML `txtDummy`，所以`RequiredFieldValidator`没有什么可看的。将代码更改为`TextBox`：

```
<asp:TextBox runat="server" ID="txtDummy" Text="Dummy" style="display: none;" /> 
```

允许生成 HTML。当调用上面的我的`change`子句时，如果在`TextBox`.

# jquery - 当旁边有另一个 div 时，调整固定 div 的大小

> ID：14173086
> 
> 赞同：1
> 
> 时间：2013-01-05T15:09:09.443
> 
> 标签：jquery, html, css, resize

我希望能够允许用户单击一个按钮，该按钮在已经存在的 div 的右侧显示一个 div。这是我所在位置的小提琴[http://jsfiddle.net/AV2mZ/](http://jsfiddle.net/AV2mZ/)。

如您所见，当两个 div 都存在时，单击“滑动它”后，一切都保持在应有的位置。但是当调整窗口大小时，一切都搞砸了。我试图自己解决这个难题，但缺乏知识。

欢迎任何帮助，越深入越好。

谢谢！

```
<div id="change">
    <div style="width:56px;height:56px;position:absolute;background:#999;left:0;top:0;">Stay?</div>
    <div style="width:56px;height:56px;position:absolute;background:#999;right:0;top:0;">Stay?</div>
</div>
<div id="right" style="width:300px;height:100%;background:#000;position:fixed;right:-300px;">

</div>
<br><br><br><br><br><br><br><br>
<button id="toggle">slide it</button> 
```

```
$('button').live("click",function() {
    $('#change').animate({
        width: $('#change').width()-$('#right').width()
    }, 300);
    $('#right').animate({
        right: "0"
    }, 300);
    return false;
});
$(window).resize(function() {alert($('#change').width()-$('#right').width());
  $('#change').animate({
        width: $('#change').width()-$('#right').width()
    }, 300);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:34:47.923

当你想设置它时，你不应该使用 #change 的宽度，因为你会改变它。例如，您单击“滑动它”，因此它现在的宽度为“initWidth - 300”。然后调整窗口大小，宽度现在将是“initWidth - 300 - 300”，依此类推。

为了使您的示例有效，您可以改用 body 的宽度：

```
$('#change').animate({
        width: $('body').width()-$('#right').width()
  }, {duration: 300, queue: false}); 
```

[http://jsfiddle.net/j7Nxj/1/](http://jsfiddle.net/j7Nxj/1/)

# c - C中的嵌套while

> ID：14173093
> 
> 赞同：1
> 
> 时间：2013-01-05T15:10:10.907
> 
> 标签：c, loops

```
int count(int *a, int *b, int n) {
    int i=0,j=0,roz=0;

    while(i<n) {
        while(j<n) {
            if(a[i]==b[j])
                roz++;
            j++;
        }
        i++;
    }
    return roz;
} 
```

n 是 a 或 b 数组的大小（两者大小相同）。嵌套的 while 循环似乎只工作一次，因为 i = 0。接下来发生的事情似乎是神奇地将 n 更改为 1（一开始是 5），因此嵌套的 while 不会第二次循环. 为什么呢？

有趣的是，在返回之前回显 n 会显示正确的值，即 5...

编辑。For 循环在这里正常工作，但问题仍然存在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T15:14:27.657

您永远不会将 的值重置`j`为 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T15:14:36.217

`j`您应该在两个嵌套循环之间重置为 0。

```
while (i < n)
{
  j = 0;

  while (j < n)
  {
    if (a[i] == b[j])
      roz++;
  }
} 
```

您可以以更有效的方式计算两个数组的交集（有一个`O(N*log N)`解决方案）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T15:15:33.093

的值在`n`这里没有改变。对于 i = 1 或更高版本没有执行嵌套循环的原因是您没有重置 j 的值。比如说，`n`是 5。当 i = 0 嵌套循环正确执行并且 j 的值在它完成后为 5 时。当 i = 1 时， j 仍然是 5，因此它永远不会进入嵌套循环。

```
while(i<n)
{
    j = 0; // reset j here to solve the problem
    while(j<n) {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T15:17:55.263

好吧，通过查看逻辑，您似乎正在计算两个数组中公共元素的数量。

您正在做的错误是您没有在第一个 while 循环中将 j 的值重置为 0。

# loops - 使用多个 div 循环在 mousemove 上旋转

> ID：14173097
> 
> 赞同：0
> 
> 时间：2013-01-05T15:10:49.397
> 
> 标签：loops, rotation, mousemove

我正在尝试将多个 div（三角形）旋转到鼠标位置。我需要循环这些，因为当我只使用一个类时，所有的移动都是一样的。问题是它非常慢，因为我无法用这条线得到三角形：

```
$('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $(".triangle'+i+'"));})}) 
```

我希望有人能告诉我如何一次绑定所有鼠标移动或如何修复它。提前致谢

```
 for(i=0;i<28; i++){
                $('#stage').append('<div class="triangle'+i+'">')
                    tri()
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle0'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle1'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle2'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle3'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle4'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle5'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle6'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle7'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle8'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle9'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle10'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle11'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle12'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle13'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle14'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle15'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle16'));})})
                $('#stage').mousedown(function(e) {e.preventDefault(); $('#stage').bind('mousemove', function(e2) {rotateOnMouse(e2, $('.triangle17'));})})

                }

             }
            else if ($('.triangle1').length>=1) {
                reset()

            }

  function rotateOnMouse(e, pw) {
  var offset = pw.offset();
  var center_x = (offset.left) + ($(pw).width() / 2);
  var center_y = (offset.top) + ($(pw).height() / 2);
  var mouse_x = e.pageX;
  var mouse_y = e.pageY;
  var radians = Math.atan2(mouse_x - center_x, mouse_y - center_y);
  var degree = (radians * (180 / Math.PI) * -1) +10;

   $(pw).css('-moz-transform', 'rotate(' + degree + 'deg)');
   $(pw).css('-webkit-transform', 'rotate(' + degree + 'deg)');
   $(pw).css('-o-transform', 'rotate(' + degree + 'deg)');
   $(pw).css('-ms-transform', 'rotate(' + degree + 'deg)');
 }

 });  

 function tri(){

        $('.triangle'+ i).css({
                'float':'left',
                'left': 50 +'px',
                'top': 50 + 'px',
                'width': 0+'px',
                'height': 0+'px',

                'margin': 50 + 'px',
                'cursor':'pointer',
                'border-left': 40 + 'px solid transparent' ,
                'border-right': 40 + 'px solid transparent' ,
                'border-top':80 + 'px solid black' 
            })
        $('#stage').mouseup(function() {
        $('#stage').unbind('mousemove')

            })
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T16:06:13.910

```
 $(pw).style.MozTransform = 'rotate('+degree+'deg)';
    $(pw).style.WebkitTransform = 'rotate('+degree+'deg)';
    $(pw).style.OTransform = 'rotate('+degree+'deg)';
    $(pw).style.msTransform = 'rotate('+degree+'deg)'; 
```

这可能会有所帮助，”用 MozTransform 替换 -moz-transform

# javascript - 工具提示中的 onclick 未触发

> ID：14173100
> 
> 赞同：0
> 
> 时间：2013-01-05T15:11:18.773
> 
> 标签：javascript, onclick, tooltip

请看链接：

[http://www.stilgiyin.com/share.php?sshrsrc=http%3A%2F%2Fimages.boyner.com.tr%2FCmsFiles%2FImages%2FProductImages%2FOriginal%2F654000%2F1_1262674.jpg](http://www.stilgiyin.com/share.php?sshrsrc=http%3A%2F%2Fimages.boyner.com.tr%2FCmsFiles%2FImages%2FProductImages%2FOriginal%2F654000%2F1_1262674.jpg)

如果您单击夹克，您将看到“此处”的警报。查看页面源代码，您会看到导致此警报的 onclick。

如果您将鼠标悬停在夹克上，您将看到一个工具提示。我为此工具提示使用了 jquery tiptip 插件。该插件要求您将工具提示的内容放在标题属性中。

当用户单击工具提示内的粉红色大按钮时，我正在尝试触发 onclick 事件。但是，它似乎不起作用，因为我设置的警报“intooltip”没有弹出。

onclick 的代码是：

```
onclick="alert('intooltip'); clickstatistictit(this.rel); _gaq.push(['_trackEvent', 'outgoing', 'boyner.com.tr', '']); trackConv('995622692', 'JMHBCOzUgAQQpP7f2gM');" 
```

我不知道问题是否在于我在 intooltip 周围有双引号而不是单引号。但是，如果我使用单引号，则会关闭以 title=' 开头的工具提示内容

或者问题可能完全不同。有任何想法吗？

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:26:33.033

您应该在 title 属性中转义双引号，否则您将在 onclick 处理程序中遇到语法错误。

将事件处理代码放在标题中的单独函数中可能会更好。然后，您可以只使用 title 属性中的函数名称，而不是现在使用的函数调用列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:30:33.077

就像您说的那样，原因是您在其他双引号中使用了双引号。当您检查萤火虫中的粉红色按钮时，生成的代码显示：

```
onclick="alert(" 
```

所以它没有被正确解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:26:12.360

tiptip [jQuery 插件](http://code.drewwilson.com/entry/tiptip-jquery-plugin)不会为每个带有工具提示的元素创建一个新的子元素。相反，它使用通用容器并相应地移动它，因此工具提示不是您元素的后代。因此，单击事件不会冒泡到您的元素 onclick 处理程序。

请注意，tiptip 不适用于此类工具提示。毕竟tiptip 最初是用于文本工具提示的。

# google-search - 小程序自动完成任务？

> ID：14173102
> 
> 赞同：-1
> 
> 时间：2013-01-05T15:11:25.733
> 
> 标签：google-search

这是一件事。我来自波兰，但我想使用 google.com 而不是 google.pl。但每次我访问 google.com 时，它都会将我重定向到该网站的波兰语版本。我已经尝试在地址末尾添加 /ncr，但它不起作用。为了能够使用英文版的谷歌，我必须在搜索栏中输入一些内容，单击右侧站点上的滚轮 --> 搜索设置 --> 语言并将其更改为想要的语言，在这种情况下为英语。我想我可以写一个程序让它变得更简单。我想问你们的是给我一些关于编程语言的建议想法，使用的工具，任何东西都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:14:31.773

[https://www.google.de/setprefdomain?prefdom=US&sig=0_Ft2f2VNGqB3slvET2JlWtBPSfco%3D](https://www.google.de/setprefdomain?prefdom=US&sig=0_Ft2f2VNGqB3slvET2JlWtBPSfco%3D)

添加google.pl的最右下角，应该有一个google.com的链接，参考上面那个

# java - 如何以日月（用文字）和年的格式在jtextfield中获取日期

> ID：14173107
> 
> 赞同：0
> 
> 时间：2013-01-05T15:11:56.450
> 
> 标签：java, time

我正在尝试以日（数字）月（字），年（数字）的格式获取日期，但其显示错误请帮助编码：

```
 lb_date.setText(Calendar.getInstance().getDate().toString());
public menu() {
        initComponents();
        lb_date.setText(Calendar.getInstance().getTime().toString());
        Timer t = new Timer(true);
         lb_des_de.setVisible(false);
         lb_des_cert.setVisible(false);
         lb_des_rep.setVisible(false);
         lb_des_help.setVisible(false);
         lb_entry.setVisible(false);
         lb_cert.setVisible(false);
         lb_report.setVisible(false);
         lb_help.setVisible(false);
        t.scheduleAtFixedRate(new TimerTask() {
            @Override
            public void run() {
                lb_date.setText(Calendar.getInstance().getTime().toString());
            }
        }, 1000, 1000);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:13:43.977

看看[SimpleDateFormat API](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

您可以执行以下操作：

```
System.out.println(new SimpleDateFormat("MM/dd/yyyy").parse("08/16/2011")); 
```

您可以使用这些变体：

```
Date and Time Pattern   Result
"yyyy.MM.dd G 'at' HH:mm:ss z"  2001.07.04 AD at 12:08:56 PDT
"EEE, MMM d, ''yy"  Wed, Jul 4, '01
"h:mm a"    12:08 PM
"hh 'o''clock' a, zzzz" 12 o'clock PM, Pacific Daylight Time
"K:mm a, z" 0:08 PM, PDT
"yyyyy.MMMMM.dd GGG hh:mm aaa"  02001.July.04 AD 12:08 PM
"EEE, d MMM yyyy HH:mm:ss Z"    Wed, 4 Jul 2001 12:08:56 -0700
"yyMMddHHmmssZ" 010704120856-0700
"yyyy-MM-dd'T'HH:mm:ss.SSSZ"    2001-07-04T12:08:56.235-0700 
```

或创建自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:16:09.727

尝试使用`DateFormat`See [DateFormat](http://docs.oracle.com/javase/7/docs/api/index.html)

```
SimpleDateFormat format = new SimpleDateFormat( "dd.MMMMM.yyyy" );
Date date = format.parse( myString ); 
```

这个月将出现在文字上！

# python - python if--elif-else用法及说明

> ID：14173108
> 
> 赞同：0
> 
> 时间：2013-01-05T15:12:17.467
> 
> 标签：python

```
"""
This program presents a menu to the user and based upon the selection made
invokes already existing programs respectively.
"""
import sys

def get_numbers():
  """get the upper limit of numbers the user wishes to input"""
  limit = int(raw_input('Enter the upper limit: '))
  numbers = []

  # obtain the numbers from user and add them to list
  counter = 1
  while counter <= limit:
    numbers.append(int(raw_input('Enter number %d: ' % (counter))))
    counter += 1

  return numbers

def main():
  continue_loop = True
  while continue_loop:
    # display a menu for the user to choose
    print('1.Sum of numbers')
    print('2.Get average of numbers')
    print('X-quit')

    choice = raw_input('Choose between the following options:')

    # if choice made is to quit the application then do the same
    if choice == 'x' or 'X':
      continue_loop = False
      sys.exit(0)

    """elif choice == '1':  
         # invoke module to perform 'sum' and display it
         numbers = get_numbers()
         continue_loop = False
         print 'Ready to perform sum!'

       elif choice == '2':  
         # invoke module to perform 'average' and display it
         numbers = get_numbers()
         continue_loop = False
         print 'Ready to perform average!'"""

     else:
       continue_loop = False    
       print 'Invalid choice!'  

if __name__ == '__main__':
  main() 
```

只有当我输入“x”或“X”作为输入时，我的程序才会处理。对于其他输入，程序将退出。我已经注释掉了 elif 部分，并且只使用了 if 和 else 子句。现在抛出语法错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T15:14:29.373

这是关于线的`if choice == 'x' or 'X'`。

正确的应该是

`if choice == 'x' or choice == 'X'`

或更简单

`if choice in ('X', 'x')`

因为 or 运算符在两边都需要布尔表达式。

目前的解决方案解释如下：

`if (choice == 'x') or ('X')`

您可以清楚地看到它`'X'`不返回布尔值。

另一种解决方案当然是检查大写字母是否等于“X”或小写字母是否等于“x”，这可能看起来像这样：

```
if choice.lower() == 'x':
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T15:42:19.297

您的问题出在您的`if choice == 'x' or 'X':`部分。要解决此问题，请将其更改为：

```
if choice.lower() == 'x': 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:14:22.430

```
if choice == 'x' or 'X': 
```

没有做你认为它正在做的事情。实际得到的解析如下：

```
if (choice == 'x') or ('X'): 
```

您可能需要以下内容：

```
if choice == 'x' or choice == 'X': 
```

可以写成

```
if choice in ('x', 'X'): 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T15:18:52.583

正如解释器所说，这是一个 IndentationError。第 31 行的 if 语句缩进 4 个空格，而对应的 else 语句缩进 5 个空格。

# javascript - ExtJS 主题修改 Ext.panel.Panel

> ID：14173114
> 
> 赞同：1
> 
> 时间：2013-01-05T15:13:22.970
> 
> 标签：javascript, css, extjs, themes, sass

我正在使用 ExtJS 4.1.1a，我正在尝试为“tabbedPane”和具有“Accordion”布局的普通面板创建一个新主题。我无法更改每个标题的颜色。也就是说选项卡和选项卡的背景以及折叠面板的标题背景和字体颜色。[您可以在http://robroscoe.ca](http://robroscoe.ca)查看当前设置。我试图让标题为黑色背景和白色文本，并且可能选择或活动选项卡为导航栏中面包屑部分中使用的紫色垫子。

应该注意的是，我正在尝试在 ExtJS 的 SASS 预处理器中设置所有内容，并且非常感谢在修改它而不是直接修改 CSS 方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T19:15:17.733

如果您还没有，您应该真正开始熟悉 ExtJS 4 中的主题化方法 - [http://docs.sencha.com/ext-js/4-1/#!/guide/theming](http://docs.sencha.com/ext-js/4-1/#!/guide/theming)

一旦你对这个过程有了很好的理解，我发现主题特定组件的最简单方法就是查看文档。在较新的文档中，许多 CSS mixin 与组件的 API 一起包含，因此很容易弄清楚默认样式是如何应用的，然后从它们开始覆盖/创建自己的样式。这是 Ext.tab.Tab CSS mixin 的示例：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.tab.Tab-css_mixin-extjs-tab](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tab.Tab-css_mixin-extjs-tab)

# c++ - 多线程程序的执行时间比单线程程序要长

> ID：14173118
> 
> 赞同：2
> 
> 时间：2013-01-05T15:13:50.103
> 
> 标签：c++, multithreading

我用 C++ 编写了一个字符串排序程序，我的问题是它基本上是从一个 txt 文件中读取一些字符串块并放入一个向量并对字符串进行排序。首先，我使用单线程程序测量了排序执行时间。然后我将向量分成两个部分，并使用两个线程对它们进行排序。但问题是多线程程序比单线程程序需要更多的时间来执行。有人可以解释一下是什么原因吗？...谢谢。

顺便说一句，字符串向量包含 20 个字符长 100 万个字符串记录，我还没有添加文件读取功能。

单线程程序..

```
#include <iostream>
#include <string>
#include <fstream>
#include <vector>
#include <algorithm>
#include <intrin.h>

#pragma intrinsic(__rdtsc)
using namespace std;

vector<string> ReadFile();

int main()
{

vector<string> RandomStringVector;
unsigned __int64 t1,t2;

RandomStringVector = ReadFile();

t1 = __rdtsc();
sort(RandomStringVector.begin(),RandomStringVector.end());
t2 = __rdtsc();
printf_s("%I64d ticks\n", (t2 - t1)/1000000);

system("pause");
return 0;
} 
```

这是多线程程序

```
#include <process.h>
#include <windows.h>
#include <iostream>
#include <string>
#include <fstream>
#include <vector>
#include <algorithm>
#include <intrin.h>

#pragma intrinsic(__rdtsc)
using namespace std;

void SortString(void * arg);
vector<string> ReadFile();

int main(){ 

vector<string> FullStringVector;
FullStringVector = ReadFile();

vector<string> v1(FullStringVector.begin(), FullStringVector.begin() + FullStringVector.size()/2),
    v2(FullStringVector.begin() + FullStringVector.size()/2 +1, FullStringVector.end());

_beginthread( SortString, 0, (void *)&v1);
_beginthread( SortString, 0, (void *)&v2);

system("pause");
return 0;
}

void SortString(void *arg)
{
unsigned __int64 t1,t2;
vector<string> * StringVector;
vector<string> SortedStringVector;
StringVector = (vector<string> *)arg;
SortedStringVector = *StringVector;
t1 = __rdtsc();
sort(SortedStringVector.begin(),SortedStringVector.end());
t2 = __rdtsc();
printf_s("%I64d ticks\n", (t2 - t1)/1000000);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:37:28.283

首先，您正在使用处理器时钟滴答来衡量性能，通过这种衡量，*任何*多线程算法都将比等效的单线程算法*慢。*原因是因为这个度量有效地计算了被执行的指令数量，并且线程总是给算法增加一点开销。

要正确测量性能，您需要测量挂钟时间。这样，测量可以准确地反映不同内核/处理器并行完成的工作。

此外，在为并行执行调整算法时，您需要确保算法保持一致（在您的问题中，单线程和多线程排序并不相同。多线程版本需要额外的传递来对两半在一起）并且线程之间没有太多的通信开销（这里不是真正的问题，但考虑一个算法，其中线程 X 需要线程 Y 的结果才能计算自己的结果）。

# python - 调整 Scikit-Learn 分类器的 HOG 特征

> ID：14173128
> 
> 赞同：6
> 
> 时间：2013-01-05T15:14:23.330
> 
> 标签：python, image, image-processing, scikit-learn, opencv3.0

我正在尝试执行处理 70 个图像并提取定向梯度 (HOG) 特征的直方图的代码。这些被传递给分类器（Scikit-Learn）。

但是，会引发错误：

```
hog_image = hog_image_rescaled.resize((200, 200), Image.ANTIALIAS)
TypeError: an integer is required 
```

我不明白为什么，因为尝试使用单个图像可以正常工作。

```
#Hog Feature

from skimage.feature import hog
from skimage import data, color, exposure
import cv2
import matplotlib.pyplot as plt
from PIL import Image
import os
import glob
import numpy as np
from numpy import array

listagrigie = []

path = 'img/'
for infile in glob.glob( os.path.join(path, '*.jpg') ):
    print("current file is: " + infile )
    colorato = Image.open(infile)
    greyscale = colorato.convert('1')

    #hog feature
    fd, hog_image = hog(greyscale, orientations=8, pixels_per_cell=(16, 16),
                    cells_per_block=(1, 1), visualise=True)

    plt.figure(figsize=(8, 4))
    print(type(fd))
    plt.subplot(121).set_axis_off()
    plt.imshow(grigiscala, cmap=plt.cm.gray)
    plt.title('Input image')

    # Rescale histogram for better display
    hog_image_rescaled = exposure.rescale_intensity(hog_image, in_range=(0, 0.02))
    print("hog 1 immagine shape")
    print(hog_image_rescaled.shape)

    hog_image = hog_image_rescaled.resize((200, 200), Image.ANTIALIAS)    
    listagrigie.append(hog_image)
    target.append(i)

print("ARRAY of gray matrices")

print(len(listagrigie))
grigiume = np.dstack(listagrigie)
print(grigiume.shape)
grigiume = np.rollaxis(grigiume, -1)
print(grigiume.shape)

from sklearn import svm, metrics

n_samples = len(listagrigie)
data = grigiume.reshape((n_samples, -1))
# Create a classifier: a support vector classifier
classifier = svm.SVC(gamma=0.001)

# We learn the digits on the first half of the digits
classifier.fit(data[:n_samples / 2], target[:n_samples / 2])

# Now predict the value of the digit on the second half:
expected = target[n_samples / 2:]
predicted = classifier.predict(data[n_samples / 2:])
print("expected")

print("predicted") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T16:50:16.990

您应该将源图像（`colorato`在您的示例中命名）重新缩放为`(200, 200)`，然后提取 HOG 特征，然后将`fd`向量列表传递给您的机器学习模型。这`hog_image`只是为了以用户友好的方式可视化特征描述符。实际特征在`fd`变量中返回。

# facebook - 检查您的应用程序是否已创建事件

> ID：14173135
> 
> 赞同：0
> 
> 时间：2013-01-05T15:14:44.567
> 
> 标签：facebook, events, facebook-graph-api

Facebook API 允许应用程序仅编辑他们创建的事件。但是有没有办法检查您的应用程序是否创建了一个事件（使用 Graph API 或 FQL）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:25:03.520

我不确定，但正如您的声明所说，API 仅在该应用程序创建事件时才允许您编辑事件。因此，您可以尝试编辑事件，如果它返回 false，则表示您的应用程序尚未创建它。

# perl - 在 Perl 中将大整数转换为字母数字字符串

> ID：14173138
> 
> 赞同：0
> 
> 时间：2013-01-05T15:15:06.467
> 
> 标签：perl

如何将数字编码`Perl`为 8 个字符的字母数字字符串，以字母开头并以结尾数字为校验位的数字结尾。

那么如何生成校验位，我计划从开始计数器，`21767823360`以便我的结果字符串以`A000000`但 perl 没有采用这么大的数字进行计算。

请提出解决方案。

```
$AppID=alphanumero($appid,8,1);

sub alphanumero{
my ($n,$length,$type)=@_;
my @to_b36 = (0 .. 9, 'A' .. 'Z');
use integer;  # so that /= 36 is easy
my $u=$n%10;$n=21767823360+($n-$u)/10;
my $t = "";do { $t = $to_b36[$n % 36] . $t, $n /= 36 } while $n;
return "$t$u";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T17:13:49.610

Perl 对大数字几乎没有问题，如果您的数字真的很大，只需`use bignum`. 这透明地启用了无限精度的算术。

您的号码 21767823360 需要大约 35 位。My`perl`是用 64 位整数构建的（请参阅`perl -v`以检查您的支持），因此您的数字对我来说不是“太大”。

将数字转换为 base-n 的算法很简单：

```
# pseudocode
let "digits"         be the array containing all the digits of our representation.
                       # the size of digits is the base of our new representation
                       # the digits are sorted in ascending order.
                       #digits[0] is zero.
var "n"              is the number we want to represent.
var "size"           is the number of digits of the new representation.
                       # floor(ln(n)/ln(digits.size))
var "representation" is the empty string.
while size >= 0:
  representation ← representation.concat(digits[n / digits.length ^ size]).
  n              ← n.modulo(digits.length ^ size).
  size           ← size - 1.
return representation. 
```

示例 Perl：

```
#!/usr/bin/perl
use strict; use warnings;
use Carp;

sub base_n {
  my ($number, $base, $max_digits, $pad) = @_;
  defined $number or croak "Undefined number for base_n";
  $number == int $number and $number >= 0
                  or croak "The number has to be a natural number for base_n";
  defined $base   or croak "Undefined base for base_n";
  $base == int $base and $base > 0
                  or croak "The base has to be a positive integer for base_n";

  my @digits = (0 .. 9, "A" .. "Z");
  $base <= @digits or croak "base_n can only convert to base-" . @digits . " max.";
  @digits = @digits[0 .. $base - 1];

  my $size = $number ? int(log($number) / log($base)) : 0; # avoid log(0)
  if (defined $max_digits) {
    $size < $max_digits
        or croak "The number $number is too large for $max_digits digits in base $base.";
    $size = $max_digits - 1 if $pad;
  }

  my $representation = "";
  while ($size >= 0) {
    $representation .= $digits[$number / @digits**$size];
    $number         %= @digits**$size;
    $size--;
  }

  if (wantarray) {
    my $checksum = substr $representation, -1;
    return $representation, $checksum;
  } else {
    return $representation;
  }
} 
```

相应的（但不完整的）单元测试：

```
use Test::More;
my $n = 21767823360;
ok "A000000" eq base_n($n => 36),        "simple";
ok "A000000" eq base_n($n => 36, 8),     "valid constraint";
ok "0A000000" eq base_n($n => 36, 8, 1), "padding";
ok ! eval { base_n($n => 36, 6); 1 },    "invalid constraint";
ok "0" eq (base_n($n => 36))[1],         "checksum (1)";
ok "A" eq (base_n($n+10 => 36))[1],      "checksum (2)";
ok "0" eq base_n(0 => 36),               "zero: simple";
ok "0"x8 eq base_n(0 => 36, 8, 1),       "zero: padding";
ok ! eval { base_n($n => 0.7); 1 },      "invalid base";
ok ! eval { base_n(0.7 => 36); 1 },      "invalid number";
ok $n == base_n($n => 10),               "round-trip safety";
ok $n eq base_n($n => 10, length $n, 1), "round-trip safety: padding";
done_testing; 
```

# synchronization - TIdServer，关于再次同步

> ID：14173140
> 
> 赞同：2
> 
> 时间：2013-01-05T15:15:18.847
> 
> 标签：synchronization, indy

根据 Remy Lebeau 的几个问题和几乎满足的回答（再次感谢您），我尝试结合对我的应用程序有用的代码。有几个方面让我不清楚。当您查看下面的代码时：

*   当我使用 Button3Click 程序将广播从 GUI 发送到连接的客户端时 - 这是正确的方法（我的意思是：它安全吗）？
*   我可以放入类似于 DoSomethingSafe 的方法代码，在其中创建与 DB 的连接、在其上执行某些操作并关闭与 DB 的连接吗？安全吗？
*   为什么我的应用程序在超过 20 个客户端时冻结，并且我想通过使用它的 active:=false（button2.click 方法）来停止工作服务器？
*   我可以在 TCliContext.ProccessMsg 中使用 TCliContext.BroadcastMessage 来调用它而不进行任何同步吗？
*   我可以在 OnConnect 方法中读取 (Connection.IOHandler.ReadLn()) 吗（我想读取登录数据行并在 DB 中检查它，然后当它不正确时立即断开连接？
*   我在某处读到，使用 IdSync 有时是危险的（如果使用它内部出现任何问题），因此我有最后一个问题：什么是访问全局变量或 VCL 对象的更好解决方案？

我的示例代码如下所示：

```
type
  TCliContext = class(TIdServerContext)
  private
    Who: String;
    Queue: TIdThreadSafeStringList;

    Activity_time: TDateTime;
    Heartbeat_time: TDateTime;

    InnerMessage: String;

    procedure BroadcastMessage(const ABuffer: String);
    procedure SendMessageTo(const ADestUser: String; const ABuffer: String);

  public
    constructor Create(AConnection: TIdTCPConnection; AYarn: TIdYarn; AList: TThreadList = nil); override;
    destructor Destroy; override;

    procedure ProccessMsg;
    procedure DoSomethingSafe;
    procedure info_about_start_connection;
  end;

procedure TCliContext.BroadcastMessage(const ABuffer: String);
var
  cList: TList;
  Count: Integer;
  CliContext: TCliContext;
begin
  cList := Server.Contexts.LockList;
  try
    for Count := 0 to cList.Count - 1 do
    begin
      CliContext := TCliContext(cList[Count]);
      if CliContext <> Self then
        CliContext.Queue.Add(ABuffer);
    end;
  finally
    Server.Contexts.UnlockList;
  end;
end;

procedure TCliContext.SendMessageTo(const ADestUser: String;
  const ABuffer: String);
var
  cList: TList;
  Count: Integer;
  CliContext: TCliContext;
begin
  cList := Server.Contexts.LockList;
  try
    for Count := 0 to cList.Count - 1 do
    begin
      CliContext := TCliContext(cList[Count]);
      if CliContext.Who = ADestUser then
      begin
        CliContext.Queue.Add(ABuffer);
        Break;
      end;
    end;
  finally
    Server.Contexts.UnlockList;
  end;
end;

constructor TCliContext.Create(AConnection: TIdTCPConnection; AYarn: TIdYarn; AList: TThreadList = nil);
begin
  // inherited Create(AConnection, AYarn, AList);
  inherited;
  Queue := TIdThreadSafeStringList.Create;
end;

destructor TCliContext.Destroy;
begin
  Queue.Free;
  inherited;
end;

procedure TCliContext.ProccessMsg;
begin
  InnerMessage := Connection.IOHandler.ReadLn();
  TIdSync.SynchronizeMethod(DoSomethingSafe);
  // is it ok?
end;

procedure TCliContext.info_about_start_connection;
begin
  MainForm.Memo1.Lines.Add('connected');
end;

procedure TCliContext.DoSomethingSafe;
begin
  MainForm.Memo1.Lines.Add(InnerMessage);
end; 
```

和代码与 GUI 相关联

```
procedure TMainForm.BroadcastMessage(Message: string);
var
  cList: TList;
  Count: Integer;
begin
  cList := IdTCPServer.Contexts.LockList;
  try
    for Count := 0 to cList.Count - 1 do
      TCliContext(cList[Count]).Queue.Add(Message);
  finally
    IdTCPServer.Contexts.UnlockList;
  end;
end;

procedure TMainForm.FormCreate(Sender: TObject);
begin
  IdTCPServer.ContextClass := TCliContext;
end;

procedure TMainForm.IdTCPServerConnect(AContext: TIdContext);
begin
  TCliContext(AContext).Queue.Clear;
  TCliContext(AContext).Heartbeat_time := now;
  TCliContext(AContext).Activity_time := now;
  TIdSync.SynchronizeMethod(TCliContext(AContext).info_about_start_connection);
  // is it safe?
end;

procedure TMainForm.IdTCPServerExecute(AContext: TIdContext);
var
  tmplist, Queue: TStringlist;
  dtNow: TDateTime;
begin
  dtNow := now;
  tmplist := nil;
  try
    Queue := TCliContext(AContext).Queue.Lock;
    try
      if Queue.Count > 0 then
      begin
        tmplist := TStringlist.Create;
        tmplist.Assign(Queue);
        Queue.Clear;
      end;
    finally
      TCliContext(AContext).Queue.Unlock;
    end;
    if tmplist <> nil then
    begin
      AContext.Connection.IOHandler.Write(tmplist);
      TCliContext(AContext).Heartbeat_time := dtNow;
    end;
  finally
    tmplist.Free;
  end;

  if SecondsBetween(dtNow, TCliContext(AContext).Heartbeat_time) > 30 then
  begin
    AContext.Connection.IOHandler.WriteLn('E:');
    TCliContext(AContext).Heartbeat_time := dtNow;
  end;

  if SecondsBetween(dtNow, TCliContext(AContext).Activity_time) > 6 then
  begin
    AContext.Connection.Disconnect;
    Exit;
  end;
  TCliContext(AContext).ProccessMsg;;
end;

procedure TMainForm.Button1Click(Sender: TObject);
begin
  IdTCPServer.Active := true;
end;

procedure TMainForm.Button2Click(Sender: TObject);
begin
  IdTCPServer.Active := false;
  // here application freezes when there are more then tens active clients
end;

procedure TMainForm.Button3Click(Sender: TObject);
begin
  BroadcastMessage('Hello');
  // is it safe and correct?
end; 
```

**更新**（您出色回答后的最后一个问题）要更简单（代码长度更短），我可以使用 TIdNotify 类，如下所示：

```
TMyNotify.Create(1, 'ABC').Notify; 
```

.

```
type
  TMyNotify = class(TidNotify)
  public
    faction: string;
    fdata:string;
    procedure DoNotify; override;
    procedure action1();
    procedure action2();
    constructor Create(action:integer;fdata:string); reintroduce;
  end;

constructor TMyNotify.Create(action:integer;fdata:string); reintroduce;
begin
  inherited Create;
  faction:=action;
  fdata:=data;
end;

procedure TMyNotify.action2()
begin
  //use fdata and do something with vcl etc.
end;

procedure TMyNotify.action2()
begin
  //use fdata and do something with vcl etc.
end;

procedure TMyNotify.DoNotify;
begin
  case action of
    1: action1()
    2: action2()
  end;
end; 
```

再次感谢您之前的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T07:51:28.250

> 当我使用 Button3Click 程序将广播从 GUI 发送到连接的客户端时 - 这是正确的方法（我的意思是：它安全吗）？

是的，您正在正确且安全地发送数据。但是，`TCliContext.ProcessMsg()`正在执行对 的阻塞调用`ReadLn()`。如果客户端有一段时间没有发送任何数据，那么该逻辑会阻止您的`OnExecute`代码及时执行其对时间敏感的逻辑（如果有的话）。由于您涉及时间敏感逻辑，因此您需要在连接处理中使用超时，以便您的时间检查有机会运行。`ProcessMsg()`在有实际数据可供读取（或在内部处理超时）之前不要调用`ProcessMsg()`，并且您应该为该`TIdIOHandler.ReadTimeout`属性分配一个值，以防客户端在消息中间停止发送数据。例如：

```
procedure TMainForm.IdTCPServerConnect(AContext: TIdContext);
begin
  ...
  AContext.Connection.IOHandler.ReadTimeout := 10000;
end;

procedure TMainForm.IdTCPServerExecute(AContext: TIdContext);
var
  ...
begin
  ...

  if AContext.Connection.IOHandler.InputBufferIsEmpty then
  begin
    if not AContext.Connection.IOHandler.CheckForDataOnSource(100) then
    begin
      AContext.Connection.IOHandler.CheckForDisconnect;
      Exit;
    end;
  end;

  TCliContext(AContext).ProccessMsg;
  TCliContext(AContext).Activity_time := Now();
end; 
```

> 我可以放入类似于 DoSomethingSafe 的方法代码，在其中创建与 DB 的连接、在其上执行某些操作并关闭与 DB 的连接吗？安全吗？

是的。事实上，特别是对于 DB 查询，您应该尽可能为每个客户端线程提供与 DB 的连接。然后您不必同步数据库查询（并且根据使用的数据库，您甚至可以在查询本身中使用数据库提供的同步锁）。如果可能，您还应该将 DB 连接池化（由于架构限制，某些 DB 类型不可池化。ADO，例如，由于它使用线程特定的 ActiveX/COM 对象）。如果不需要，请勿跨多个线程同步数据库连接。当您需要执行数据库查询时，从池中获取数据库连接（或根据需要创建新连接），执行数据库查询，然后将数据库连接放回池中（如果可能），以便另一个客户端线程可以需要时使用它。如果数据库连接在池中一段时间​​，断开它，然后在需要再次使用时重新连接。这有助于将数据库连接的数量保持在最低限度，同时最大限度地提高它们的使用率。

> 为什么我的应用程序在超过 20 个客户端时冻结，并且我想通过使用它的 active:=false（button2.click 方法）来停止工作服务器？

发生这种情况的最常见原因是您可能正在对主线程启动同步操作（或已经在同步操作中间），同时从主线程中停用服务器。这是一个有保证的死锁场景。请记住，每个客户端都在服务器内的自己的线程中运行。当主线程去激活服务器时，它在等待服务器完成去激活的过程中被阻塞，因此它无法处理同步请求。服务器停用等待所有客户端线程完全终止。同步客户端线程在等待主线程处理同步请求时被阻塞，因此无法终止。发生死锁。客户端的数量无关紧要，即使只有 1 个客户端连接也可能发生。

为了解决这个问题，您有几个选择：

1.  创建一个工作线程来停用服务器，而不是让主线程停用它。这释放了主线程以正常处理同步请求，允许客户端线程正常终止，服务器正常完全停用。例如：

    ```
    type
      TShutdownThread = class(TThread)
      protected
        procedure Execute; override;
      end;

    procedure TShutdownThread.Execute;
    begin
      MainForm.IdTCPServer.Active := False;
    end;

    procedure TMainForm.Button2Click(Sender: TObject);
    begin
      if MainForm.IdTCPServer.Active then
      begin
        with TShutdownThread.Create(False) do
        try
          WaitFor; // internally processes sync requests...
        finally
          Free;
        end;
      end;
    end; 
    ```

2.  尽可能消除线程阻塞同步。直接在客户端线程中做尽可能多的工作，而不是在主线程中。特别是对于您的客户端代码实际上不必等待来自主线程的响应的操作。如果某些东西实际上不需要跨线程边界同步，则不要同步它。当您必须与主线程同步时，请尽可能 使用`TIdNotify`而不是。是异步的，所以它不会像这样阻塞调用线程，从而避免了去激活死锁。你只需要小心一点`TIdSync``TIdNotify``TIdSync``TIdNotify`，因为它是异步的。它被放入后台队列并在稍后执行，因此您必须确保您使用它访问的任何对象和数据在它最终运行时仍然有效。出于这个原因，最好使`TIdNotify`实现尽可能自包含，以便它们不依赖外部事物。例如：

    ```
    type
      TMemoNotify = class(TIdNotify)
      protected
        FStr: String;
        procedure DoNotify; override;
      public
        class procedure AddToMemo(const Str: string);
      end;

    procedure TMemoNotify.DoNotify;
    begin
      MainForm.Memo1.Lines.Add(FStr);
    end;

    class procedure TMemoNotify.AddToMemo(const Str: string);
    begin
      with Create do
      begin
        FStr := Str;
        Notify;
        // DO NOT free it!  It is self-freeing after it is run later on...
      end;
    end;

    procedure TCliContext.ProcessMsg;
    var
      Msg: string;
    begin
      Msg := Connection.IOHandler.ReadLn;
      TMemoNotify.AddToMemo(Msg);
      ...
    end;

    procedure TMainForm.IdTCPServerConnect(AContext: TIdContext);
    begin
      ...
      TCliContext(AContext).Who := ...;
      TMemoNotify.AddToMemo(TCliContext(AContext).Who + ' connected');
      ...
    end;

    procedure TMainForm.IdTCPServerDisconnect(AContext: TIdContext);
    begin
      ...
      TMemoNotify.AddToMemo(TCliContext(AContext).Who + ' disconnected');
      ...
    end; 
    ```

> 我可以在 TCliContext.ProccessMsg 中使用 TCliContext.BroadcastMessage 来调用它而不进行任何同步吗？

是的，因为`TIdTCPServer.Context`and`TIdThreadSafeStringList`锁提供了足够的同步（它们都在`TCriticalSection`内部使用）。这同样适用于`TCliContext.SendMessageTo()`。

> 我可以在 OnConnect 方法中读取 (Connection.IOHandler.ReadLn()) 吗（我想读取登录数据行并在 DB 中检查它，然后当它不正确时立即断开连接？

是的。 `OnConnect`(and `OnDisconnect`) 在运行的同一客户端线程上下文中`OnExecute`运行。 在退出`TIdTCPServer`后检查套接字是否仍然连接`OnConnect`，然后再开始`OnExecute`循环，以防`OnConnect`决定断开客户端。

> 我在某处读到，使用 IdSync 有时是危险的（如果使用它内部出现任何问题）

在大多数情况下，只要您正确使用它们，就可以安全使用`TIdSync`。`TIdNotify`

`TIdSync`，是同步的，如果主线程被阻塞，确实有死锁的可能性，仅此而已。

如果您使用`TIdNotify`，请确保您使用的是最新版本的 Indy 10。一些早期版本的 Indy 10 在 中存在内存泄漏`TIdNotify`，但最近已修复。

> 访问全局变量或 VCL 对象的更好解决方案是什么？

未严格绑定到任何给定线程的全局变量应尽可能提供自己的同步。无论是在他们自己的内部代码中（如您的`BroadcastMessage()`和`SendMessageTo()`实现），还是通过单独的锁，如`TCriticalSection`对象。

VCL 对象只能在主线程中访问，因此如果您不使用`TIdSync`/ `TIdNotify`，则必须使用您选择的其他形式的线程同步来委托您的代码在主线程的上下文中运行。这就是 UI 逻辑和业务逻辑分离真正发挥作用的地方。如果可能，您应该将业务数据与 UI 分离，然后围绕数据操作提供安全的线程间锁，然后您可以让 UI 在需要时安全地更新数据，并让工作线程在需要时安全地更新数据，向 UI 发布异步请求以显示最新数据。

# c# - c#应用程序版本

> ID：14173143
> 
> 赞同：0
> 
> 时间：2013-01-05T15:15:38.820
> 
> 标签：c#, installation

我刚刚完成了 ac# 程序版本 1.0.0.0 并使用内置的 Visual Studio 设置项目制作了安装程序。我注意到在添加/删除程序中，版本是 1.0.0，它对应于安装程序属性。这对最终用户来说颇具误导性，我似乎无法使数字 1.0.0.0 即与我的实际应用程序相同，因为它被限制为 3 位数字。为什么是2个不同的数字？

谢谢达摩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T16:16:01.817

正如已经提到的，这两者是不同的东西，你可以相互独立地设置它们......

![在此处输入图像描述](../Images/2bfafca323d935cb0ccedd625acf69c9.png)

...通过转到项目属性并单击“装配信息”按钮。在我的示例中，第三个框中的 * 表示程序集版本的内部版本号每天都会增加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T15:20:24.340

Windows 应用程序版本控制（您在添加/删除程序中看到的）和 .NET 程序集版本控制（您的 .NET 程序集版本 - 右键单击​​可执行文件 > Windows 资源管理器中的属性）是**两个不同的东西**。它们不一定彼此对应。

.NET 程序集版本号的格式如下：

```
<major version>.<minor version>.<build number>.<revision> 
```

这对应于您在 .NET 中的应用程序程序集。

您使用的 Windows 安装程序是内置的 .NET Installer 项目吗？有多种方法可以制作 Windows 安装程序，如 WiX、InstallShield，其中一些允许输入不同的版本号，包括字母数字。

# syntax-error - 是否有 Jade 模板语法检查器/验证器？

> ID：14173144
> 
> 赞同：12
> 
> 时间：2013-01-05T15:15:55.510
> 
> 标签：syntax-error, pug

我的 Jade 模板中有一些语法错误。有什么工具可以帮助我调试吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-05T15:39:49.590

找到了。用于`jade [fileName].jade`调试您的 Jade 模板。

您可以使用`npm install jade --global`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-09T06:42:39.423

在此处添加此内容，因为我仍然必须谷歌。

npm i -g pug-lint

注意：玉已更名为哈巴狗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T06:00:28.950

webstorm是jade开发的一个更好的工具，它可以识别和纠正jade文件

# matlab - Matlab找到第一个负数的系列

> ID：14173145
> 
> 赞同：2
> 
> 时间：2013-01-05T15:15:56.963
> 
> 标签：matlab, vectorization

使用 Matlab 中的数字矩阵，您将如何找到一系列正数之后的第一个负数？

到目前为止，我能想到的唯一答案是编写一个循环来检查第一个负数，然后记录它，然后查找第一个正数，并在那里截断数组，然后重新开始。有没有一种矢量化的方式来做到这一点？

例如，我有`x = [ -1 -5 -2 3 4 8 -2 -3 1 9]`，并且我希望这个函数或脚本给我一个 . 数组`y = [1 7]`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:51:50.197

或者

```
find(diff(sign([1 x]))<0) 
```

也就是说：找到`x`连续元素之间符号差异为负的位置，哦，并将1推到前面`x`以处理第一个元素已经为负的情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:38:02.553

这是一个相当自制的解决方案，检查一下

```
x = [ -1 -5 -2 3 4 8 -2 -3 1 9]

neg_idx = find(x < 0)     % // negative values
z = [0 diff(neg_idx)]     % // increments among indices of successive values;
                          % // consecutive indices return a difference of 1 whereas
                          % // non consecutive return a value greater than 1.
                          % // because the first element must be distinguished 
                          % // we put the zero in front
id = find(z ~= 1)         % // Every time there is a jump, a non consecutive neg.
                          % // value appears 

% // thus the solution is in                     
y = neg_idx(id)           

 ans =

 1     7 
```

如果`neg_idx`为空（即不涉及负值），您将得到一个`Index exceeds matrix dimensions`，尽管条件是立即检查。

# java - 从文件中读取 ArrayList 作为对象？

> ID：14173148
> 
> 赞同：5
> 
> 时间：2013-01-05T15:16:12.190
> 
> 标签：java, io

好的，所以我做了以下事情：

1.  我已将对象添加到 ArrayList 并将整个列表作为对象写入文件。

2.  问题是当试图将它们作为一个整体读回来时。我收到以下错误：

**线程“主”java.lang.ClassCastException 中的异常：java.util.Arrays$ArrayList 无法在 persoana.Persoana.main(Student.java:64) 处转换​​为 java.util.ArrayList**

这是我的代码：（一切都在尝试捕获，所以不用担心）

**写作**

```
Student st1 = new Student("gigi","prenume","baiat","cti");
        Student st2= new Student("borcan","numegfhfh","baiat cu ceva","22c21");

        List <Student> studenti = new ArrayList<Student>();
        studenti = Arrays.asList(st1,st2);

FileOutputStream  fos = new FileOutputStream("t.ser");
            ObjectOutputStream oos = new ObjectOutputStream(fos);

            oos.writeObject(studenti);
            oos.close(); 
```

**阅读**

```
FileInputStream fis = new FileInputStream("t.ser");
             ObjectInputStream ois = new ObjectInputStream(fis);

             ArrayList <Student> ds;

             ds = (ArrayList <Student>)ois.readObject(); 

             ois.close(); 
```

问题出现在这一行：

```
ds = (ArrayList <Student>)ois.readObject(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T15:23:47.667

我想问题是您正在创建`List`of `Student`through `Arrays.asList`。此方法不返回 an`ArrayList`而是返回`Arrays.ArrayList`一个不同的类，旨在支持 Array 并能够将其用作`List`. 两者都`ArrayList`实现`Arrays.ArrayList`了`List`接口，但它们不是同一个类。

您应该将其转换为适当的对象：

```
List<Student> ds = (List<Student>)ois.readObject(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T15:20:12.327

更改以下行：

```
ArrayList <Student> ds;
ds = (ArrayList<Student>)ois.readObject(); 
```

到

```
List<Student> ds = (List<Student>)ois.readObject(); 
```

# javascript - 如何在 JavaScript 字符串中创建换行符以提供给 NodeJS 以写入文本文件？

> ID：14173150
> 
> 赞同：21
> 
> 时间：2013-01-05T15:16:16.700
> 
> 标签：javascript, node.js, jquery

我创建了一个简单的 HTML 页面，它从用户那里获取一些输入以存储在服务器上以便稍后检索——这就是当用户单击提交按钮时处理文本的方式（我在键下放置了编号注释行，但提供上下文的周围代码）：

```
var origText = $('#input-field').val(),
        // 1\. GETS WHATEVER USER TYPED INTO INPUT FIELD
    jsonText = '{ "text": "' + origText + '" }',
        // 2\. WRAPS IT AN OBJECT STRING
    ajaxText = encodeURIComponent(jsonText);
        // 3\. ENCODES THE STRING FOR USE WITH AJAX

$.ajax({
    url: 'http://localhost:8124/',
    data: 'save=' + ajaxText + '&fn=save',
        // 4\. THE ENCODED STRING IS ADDED TO THE QUERY SECTION OF THE AJAX REQUEST
    dataType: "jsonp",
    cache: false,
    timeout: 5000,
    success: function(data) {
        $("#input-ready").html(data.save.text);
    },
    error: function(jqXHR, textStatus, errorThrown) {
        alert('error ' + textStatus + " " + errorThrown);
    }
}); 
```

请求被发送到我在本地运行的 NodeJS 服务器，该服务器（在`http.createServer`回调中）执行以下操作：

```
var queryObj = url.parse(req.url, true).query;
    // 1\. GET THE QUERY PART OF THE REQUEST/URL AS AN OBJECT
res.writeHead(200, {'Content-Type': 'application/javascript'});
    // 2\. PREPARE SERVER'S RESPONSE AS JAVASCRIPT
queryObj.fn = queryObj.fn || '';
queryObj.save = queryObj.save || '';
queryObj.callback = queryObj.callback || '';
    // 3\. ENSURE THE PROPERTIES NEEDED ARE DEFINED, EVEN IF FALSE-Y
if (queryObj.fn === 'save') {
    // 4\. IF THE REQUEST IS TO SAVE THEN WRITE THE USER INPUT AS OBJECT TO A TEXT FILE
    fs.writeFile('jsonp-storage-2.txt', queryObj.save, function (err) {
        if (err) {
            throw err;
        } else {
            console.log('Saved message successfully.', 'Ready to be read now.');
            res.end(queryObj.callback +
                '({ fn: "' + queryObj.fn + '", save: ' + queryObj.save + ' })');
        }
    });
} 
```

假设用户键入并提交“这是一行文本”，服务器上的输出是一个名为 jsonp-storage-2.txt 的文本文件，其中包含：

```
{ "text": "this is a line of text" } 
```

毕竟，我的问题很简单。如何美化文本文件中的输出？

代码需要工作，但我正在考虑使用它来尝试存储更大的对象以供以后阅读。但是，在服务器端，我希望文件（现在）在使用记事本打开文件时易于阅读。

我尝试过使用`\n`并且`\t`喜欢这样：

```
jsonText = '{\n\t"text": "' + origText + '"\n}', 
```

我也试过了`\r`。但线仍然没有中断。

一些答案表明我只能[在编码字符串级别](https://stackoverflow.com/questions/4768118/how-to-break-line-in-javascript)或[在文件写入之后执行此操作](https://stackoverflow.com/questions/6860206/how-to-format-no-line-break-json-file)。也许我错过了一些简单的事情。有没有办法通过操纵我的`jsonText`变量来做到这一点？

**更新：**

只是为了更清楚地了解所需的输出——目前生成的文本文件的内容如下所示：

```
{ "text": "this is a line of text" } 
```

但我想知道它是否可以像这样生产：

```
{
    "text": "this is a line of text"
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-05-30T06:03:31.943

利用

```
var os = require('os');
var jsonText = '{' + os.EOL + '\t"text": "' + origText + '"' + os.EOL + '}'; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T11:55:51.893

**事实证明，使用 Node.js [编辑：在 Windows 中**]将字符串写入（文本）文件时，使用`\r\n`换行符。

与[编码换行符](https://stackoverflow.com/questions/4768118/how-to-break-line-in-javascript)一样，回车和换行都是必要的。所以代码行需要是这样的，而不是仅仅`\r`或只是`\n`：

```
jsonText = '{\r\n\t"text": "' + origText + '"\r\n}', 
```

结果文件的内容现在可以根据需要显示：

```
{
    "text": "this is a line of text"
} 
```

# android - Android 从非 Activity 类完成活动

> ID：14173153
> 
> 赞同：0
> 
> 时间：2013-01-05T15:16:49.880
> 
> 标签：android, android-activity, android-context

在我的应用程序中，我正在检查是否有网络连接；如果没有，则开始一项活动，当连接恢复时，完成该活动。我正在使用广播接收器来确定网络连接，但应用程序在需要完成该活动时崩溃，给我一个`RestrictedContext error`.

这是 LogCat 输出：

```
01-05 14:22:21.543: E/AndroidRuntime(7064): FATAL EXCEPTION: main
01-05 14:22:21.543: E/AndroidRuntime(7064): java.lang.RuntimeException: Unable to start receiver net.evolution.betting.application.ConnectionChangeReceiver: java.lang.ClassCastException: android.app.ReceiverRestrictedContext
01-05 14:22:21.543: E/AndroidRuntime(7064):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
01-05 14:22:21.543: E/AndroidRuntime(7064):     at android.app.ActivityThread.access$3200(ActivityThread.java:125)
01-05 14:22:21.543: E/AndroidRuntime(7064):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
01-05 14:22:21.543: E/AndroidRuntime(7064):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-05 14:22:21.543: E/AndroidRuntime(7064):     at android.os.Looper.loop(Looper.java:123)

01-05 14:22:21.543: E/AndroidRuntime(7064):     at android.app.ActivityThread.main(ActivityThread.java:4627)
01-05 14:22:21.543: E/AndroidRuntime(7064):     at java.lang.reflect.Method.invokeNative(Native Method)
01-05 14:22:21.543: E/AndroidRuntime(7064):     at java.lang.reflect.Method.invoke(Method.java:521)
01-05 14:22:21.543: E/AndroidRuntime(7064):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-05 14:22:21.543: E/AndroidRuntime(7064):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-05 14:22:21.543: E/AndroidRuntime(7064):     at dalvik.system.NativeStart.main(Native Method)
01-05 14:22:21.543: E/AndroidRuntime(7064): Caused by: java.lang.ClassCastException: android.app.ReceiverRestrictedContext
01-05 14:22:21.543: E/AndroidRuntime(7064):     at net.evolution.betting.application.ConnectionChangeReceiver.onReceive(ConnectionChangeReceiver.java:37)
01-05 14:22:21.543: E/AndroidRuntime(7064):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
01-05 14:22:21.543: E/AndroidRuntime(7064):     ... 10 more 
```

这是课程来源：

```
public class ConnectionChangeReceiver extends BroadcastReceiver {
    @Override
    public void onReceive( Context context, Intent intent ) {
        ActivityManager activityManager = (ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE); 
        List<RunningTaskInfo> activitys = activityManager.getRunningTasks(Integer.MAX_VALUE); 
        boolean isActivityFound = false; 
        for (int i = 0; i < activitys.size(); i++) { 
            if (activitys.get(i).topActivity.toString().equalsIgnoreCase("ComponentInfo{net.evolution.betting.application/net.evolution.betting.application.NotationActivity}")) {
                isActivityFound = true;
            }
        } 

        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService( Context.CONNECTIVITY_SERVICE );
        NetworkInfo activeNetInfo = connectivityManager.getActiveNetworkInfo();
        NetworkInfo mobNetInfo = connectivityManager.getNetworkInfo(     ConnectivityManager.TYPE_MOBILE );
        if ( activeNetInfo != null && isActivityFound == true) {
            ((NotationActivity)context).finish();
        }else if( activeNetInfo == null){
            Intent i = new Intent("net.evolution.betting.application.NOTATIONACTIVITY");
            i.putExtra("DialogTitle", "Warining!");
            i.putExtra("DialogBody", "It seems like your app is not connected to Internet witch is required.Please check your network connection.");
            i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:49:20.587

你不能这样做“（（NotationActivity）context）”。“上下文”它是您的接收者的上下文，而不是您的 NotationActivity 的上下文。所以你不能那样施放它并获得活动。

有几种方法可以满足您的需要。谷歌“从广播接收器完成活动”。有很多有用的信息可以帮助您找到最适合您的案例的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:50:31.103

问题是在这条线上

```
 ((NotationActivity)context).finish(); 
```

将您的 Receiver 作为 Activity 的内部类，以便它可以访问 finish() 方法，或者找到另一种从接收器到 Activity 的通信方式。

# cartopy - NorthPolarStereo 的中心经度

> ID：14173159
> 
> 赞同：5
> 
> 时间：2013-01-05T15:17:17.197
> 
> 标签：cartopy

我想绘制一个北半球的极地立体图，在图的底部有 180，这样我就可以强调太平洋地区。我正在使用来自 git 的最新 cartopy，可以制作极地立体图，但我不知道如何更改图底部的经度。我尝试将经度范围设置为 [-180, 180] 但这无济于事，并且 NorthPolarStereo() 不接受任何关键字参数，如 central_longitude。目前这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-09-05T14:39:54.460

对于 Cartopy 0.17 和 matplotlib 3.1.1 (Python 3.7)，我在上面的解决方案中遇到了 set_extent() 错误。

似乎 set_extent() 只能这样工作：

```
ax1.set_extent([-180, 180, 0, 90], crs=ccrs.PlateCarree())

ax2.set_extent([-179, 179, 0, 90], crs=ccrs.PlateCarree()) 
```

所以，旋转的图像需要一些奇怪的经度边界..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:01:21.047

此功能现已在 Cartopy (v0.6.x) 中实现。以下示例在北半球极地立体投影中生成两个子图，一个具有默认设置，一个具有更改中心经度：

```
"""Stereographic plot with adjusted central longitude."""
import matplotlib.pyplot as plt
import cartopy.crs as ccrs
from cartopy.examples.waves import sample_data

# read sample data
x, y, z = sample_data(shape=(73, 145))

fig = plt.figure(figsize=(8, 4))

# first plot with default settings
ax1 = fig.add_subplot(121, projection=ccrs.NorthPolarStereo())
cs1 = ax1.contourf(x, y, z, 50, transform=ccrs.PlateCarree(),
                   cmap='gist_ncar')
ax1.set_extent([0, 360, 0, 90], crs=ccrs.PlateCarree())
ax1.coastlines()
ax1.set_title('Centred on 0$^\circ$ (default)')

# second plot with 90W at the bottom of the plot
ax2 = fig.add_subplot(
    122, projection=ccrs.NorthPolarStereo(central_longitude=-90))
cs2 = ax2.contourf(x, y, z, 50, transform=ccrs.PlateCarree(),
                   cmap='gist_ncar')
ax2.set_extent([0, 360, 0, 90], crs=ccrs.PlateCarree())
ax2.coastlines()
ax2.set_title('Centred on 90$^\circ$W')

plt.show() 
```

这个脚本的输出是：

![NH极地立体](../Images/9e124595656fb29ad621421cd2f86911.png)

# c++ - 如何使 QString html 转义

> ID：14173161
> 
> 赞同：28
> 
> 时间：2013-01-05T15:17:34.517
> 
> 标签：c++, html, qt, html-escape

如何转义/清理包含 HTML 的 QString？

IE`showInBroswser(escaped(str)) == showInNotepad(str);`

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-05T15:41:28.757

## qt 5

采用`QString::toHtmlEscaped()`

```
QString src;
Qstring html = src.toHtmlEscaped();
showInBrowser(html) == showInNotepad(str); 
```

参考：[http ://doc.qt.io/qt-5/qstring.html#toHtmlEscaped](http://doc.qt.io/qt-5/qstring.html#toHtmlEscaped)

## Qt 4

使用`Qt::escape`.

```
#include <QtGui/qtextdocument.h>

QString src;
Qstring html = Qt::escape(src);
showInBrowser(html) == showInNotepad(str); 
```

参考：[http ://doc.qt.io/qt-4.8/qt.html#escape](http://doc.qt.io/qt-4.8/qt.html#escape)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-25T04:38:04.943

只是为了让这个答案与时俱进，Qt 5.1 具有[`QString::toHtmlEscaped()`](https://doc.qt.io/qt-5/qstring.html#toHtmlEscaped).

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-05T15:35:20.697

如果要将纯文本插入到 QTextEdit 中，可以使用：

```
void QTextEdit::insertPlainText ( const QString & text ); 
```

并且，例如，修改颜色：

```
void QTextEdit::setTextColor ( const QColor & c ); 
```

与文本的字体或其他属性类似...

希望有帮助。

# github - 如何停止 github 将所有项目页面重定向到我的域？

> ID：14173173
> 
> 赞同：4
> 
> 时间：2013-01-05T15:19:19.693
> 
> 标签：github

[我为我的个人页面](http://zation.github.com)设置了一个自定义域，但它使我的所有其他项目页面都被重定向到它，例如：http: [//zation.github.com/session/css/box_model/](http://zation.github.com/session/css/box_model/)。

那么有没有办法阻止 github 将所有其他项目页面重定向到我的域？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:45:02.717

不，这是不可能的。如果您为您的个人 GitHub 存储库设置了一个自定义域 - 那么您的所有项目页面都将在该域下。请参阅此 GitHub 页面的常见问题页面（在项目页面下）：[https ://help.github.com/articles/user-organization-and-project-pages](https://help.github.com/articles/user-organization-and-project-pages)

> 用户/组织页面上的自定义域会将相同的域重定向应用到该帐户下托管的所有项目页面，除非项目页面使用自己的自定义域。

# android - 从 sdcard 打开 SQLite 数据库 - 没有这样的文件或目录

> ID：14173174
> 
> 赞同：0
> 
> 时间：2013-01-05T15:19:34.567
> 
> 标签：android, android-sqlite

**答案在这个线程中：** [HTC Desire HD 的 Sqlite 问题](https://stackoverflow.com/questions/4718934/sqlite-issues-with-htc-desire-hd)，感谢@Vikalp Patel

我正在做非常简单的事情 - 从 sdcard 打开 sqlite 数据库并从中读取一些内容。例如表列表：

这是我的 DataBaseHelper 类（非常简单）：

```
public class DataBaseHelper extends SQLiteOpenHelper{
    static Context mContext;
    private static SQLiteDatabase mDb;  

    public DataBaseHelper(Context context, String name, CursorFactory factory, int version) {
        super(context, name, factory, version);
        mContext = context;
    }           

//skip the overriden methods

    public void OpenDataBase(String path, String name){                     
        mDb = SQLiteDatabase.openDatabase(path + name, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);    

    }

    public Cursor GetTables(){      
        return mDb.rawQuery("SELECT name FROM sqlite_master WHERE type='table' ORDER BY name", null);
    }

} 
```

当我调用此代码时

```
mDbPath = Environment.getExternalStorageDirectory() + "/test_db/";
            mDbName = "db.sqlite";
            mDbHelper = new DataBaseHelper(mContext,mDbPath+mDbName,null,1);
            mDbHelper.OpenDataBase(mDbPath, mDbName);
            Toast.makeText(mContext, String.format("Database %s%s successfully opened", new Object[]{mDbPath, mDbName}), Toast.LENGTH_LONG).show();
            Cursor cursor = mDbHelper.GetTables(); 
```

返回的游标包含表列表。有用。唯一让我抓狂的是日志中的错误信息：

```
01-05 17:09:44.250: D/Database(21131): dbopen(): path = /mnt/sdcard/test_db/db.sqlite, flag = 2, file size = 3072
01-05 17:09:44.260: D/Database(21131): dbopen(): path = /mnt/sdcard/test_db/db.sqlite, mode: delete, disk free size: 3106 M, handle: 0x359260
01-05 17:09:44.260: I/Database(21131): sqlite returned: error code = 8, msg = statement aborts at 1: [pragma journal_mode = WAL;] 
01-05 17:09:44.260: W/Database(21131): dbopen(): sqlite3_exec to set journal_mode to WAL for /mnt/sdcard/test_db/db.sqlite failed
01-05 17:09:44.260: E/Database(21131): dbopen(): errno = 2, error message = No such file or directory 
```

错误发生在 OpenDataBase 方法中。

有人可以帮我理解为什么会出现这个错误以及我做错了什么。谢谢。

**编辑：**我正在测试 Android 2.3，HTC Desire HD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:40:28.380

首先，不要对 Android 中的任何内容使用硬编码路径 - 不能保证它们在所有设备上都相同。

尝试使用`getDatabasePath("db_sqlite.db").getAbsolutePath();`

# java - 如何使用 Spring Social 1.1.0 发送应用邀请

> ID：14173183
> 
> 赞同：0
> 
> 时间：2013-01-05T15:20:55.367
> 
> 标签：java, facebook, spring, spring-social

我正在开发一款 facebook 游戏，我希望玩家向他/她的朋友发送邀请。我试过 facebook.feedOperations.postLink(...) 但我得到 org.springframework.social.InsufficientPermissionException: Insufficient permission for this operation。

我应该使用哪个功能以及我的 facebook 应用需要哪些权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:51:52.483

好的，我向我的应用程序添加了**publish_stream**扩展权限，现在它可以工作了。

# ruby-on-rails - 断言用户通过 AJAX 从前端登录

> ID：14173184
> 
> 赞同：2
> 
> 时间：2013-01-05T15:20:57.130
> 
> 标签：ruby-on-rails, ajax, authentication, backbone.js, devise

我的问题如下：

我有一个使用设计进行身份验证的 rails (3.2.8) 应用程序。Rails 只是一个 RESTful api，前端是一个骨干单页应用程序。

我设法注册和登录用户，但是前端如何使用 AJAX 从后端获取该信息？基本上我希望能够从前端告诉这个用户已经登录并且有一个会话，或者告诉用户没有登录。

目前我的控制器和模型完全是由 Rails 创建的，我还没有碰过它们。

谷歌搜索产生了许多使用 token_authenticable 模块的教程，但它们有不同的实现并且没有提供明确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:24:34.803

一个简单的方法是让 rails 处理你的会话。您可以通过以下方式执行此操作：

```
rails generate session_migration
rake db:migrate 
```

然后，将会话值存储在 rails 中，例如：

```
session[:user_id] = user.id 
```

（其中 user 是您的 User 类的对象）

然后你可以通过 ajax 不断地 ping 你的 Rails 后端来检查 session[:user_id] 变量是否不为空，如果它不为空，则会话存在。

# xcode - 日期时间显示问题

> ID：14173186
> 
> 赞同：1
> 
> 时间：2013-01-05T15:21:34.260
> 
> 标签：xcode, cocoa-bindings

我有以下代码：

```
NSString *dateString = @"01-02-2010 12:00:00 AM";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd-MM-yyyy h:m:s a"];
NSDate *dateFromString = [[NSDate alloc] init];
dateFromString = [dateFormatter dateFromString:dateString];
[dateFormatter release]; 
```

当我在 DateTimePopup 中设置上述日期时，它显示“02/01/2010”。

但是当我使用它向 GridView 添加数据时，它会显示带有时间和区域的完整日期。

我只需要显示日期，即“02/01/2010”

好心的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:34:17.300

您需要设置显示的日期格式：

```
NSString *dateString = @"01-02-2010 12:00:00 AM";  
NSDateFormatter *inputDateFormatter = [NSDateFormatter new];
[inputDateFormatter setDateFormat:@"dd-MM-yyyy h:m:s a"];
NSDate *dateFromString = [inputDateFormatter dateFromString:dateString];

NSDateFormatter *displayDateFormatter = [NSDateFormatter new];
[displayDateFormatter setDateFormat:@"MM/dd/yyyy"];
NSString *displayDateString = [displayDateFormatter stringFromDate:dateFromString];
NSLog(@"displayDateString: %@", displayDateString); 
```

NSLog 输出
displayDateString: 02/01/2010

注意：在 OP 代码中，该行
`NSDate *dateFromString = [[NSDate alloc] init];`
是不必要的，在下一行`dateFromString`被覆盖。

# google-analytics - 使用 API 访问 Google Analytics 报告

> ID：14173187
> 
> 赞同：0
> 
> 时间：2013-01-05T15:22:09.940
> 
> 标签：google-analytics

我知道如何使用 Google API 访问不同的指标和维度来查询特定数据。但是，我面临着不同的情况。我想知道是否有任何机制可以访问已经使用 Google Analytics 网络用户界面创建的报告/自定义报告。

我们的客户创建了大约 15 种不同的报告，现在希望我们将数据简单地导入他自己的数据库，而不必登录 Google Analytics 网站并运行报告并导出数据。

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T21:57:32.823

不确定这是否正是您的想法，但您始终可以使用 Reporting API 使用 python/javascript/etc 提取数据，然后将数据本地存储在数据库中。有关更多信息，请查看[Google Analytics 查询资源管理器](http://ga-dev-tools.appspot.com/explorer/)并尝试不同的维度和指标组合，以便能够提取数据。然后，您可以使用任意数量的不同[Core Reporting API 客户端库](https://developers.google.com/analytics/devguides/reporting/core/v3/gdataLibraries)来访问分析数据库。

# linux - SIGSEGV 的原因

> ID：14173193
> 
> 赞同：1
> 
> 时间：2013-01-05T15:22:51.920
> 
> 标签：linux, gdb, elf

我创建了一个示例应用程序来理解 ELF 二进制格式的实验。

当我运行它时，它在收到 SIGSEGV 后崩溃。用 gdb 附加它然后运行后，我看到它在以下行崩溃

```
(gdb) x/i 0x08054697
=> 0x8054697:   mov    %edx,0x80f8f5c 
```

但是，该指令的目标地址是有效地址，并且该内存被映射为可写。

```
(gdb) p/x *0x80f8f5c
$3 = 0x0
(gdb) si

Program received signal SIGSEGV, Segmentation fault.
0x08054697 in ?? () 
```

我想了解为什么这个过程会收到 SIGSEGV？为了找出原因，我还应该寻找什么其他东西。

这是 readelf 的输出，显示了映射的虚拟内存区域。

```
Elf file type is EXEC (Executable file)
Entry point 0x8048e08
There are 13 program headers, starting at offset 52

Program Headers:
  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
  PHDR           0x000034 0x08047034 0x08047034 0x002a4 0x002a4 R E 0x1
  INTERP         0x0001d4 0x080471d4 0x080471d4 0x00013 0x00013 R   0x1
      [Requesting program interpreter: /lib/ld-linux.so.2]
  DYNAMIC        0x0001e7 0x080471e7 0x080471e7 0x00060 0x00060 RW  0x1
  LOAD           0x000000 0x08047000 0x08047000 0x01000 0x01000 R E 0x1
  LOAD           0x001000 0x08048000 0x08048000 0xae948 0xae948 R E 0x1000
  LOAD           0x0b06dc 0x080f86dc 0x080f86dc 0x015f8 0x07730 RW  0x1000
  LOAD           0x0c52b8 0x081002b8 0x081002b8 0x00400 0x00400 R E 0x1
  LOAD           0x0c56b8 0x081006b8 0x081006b8 0x00400 0x00400 R E 0x1
  LOAD           0x0c5ab8 0x08100ab8 0x08100ab8 0x00400 0x00400 R E 0x1
  NOTE           0x0010f4 0x080480f4 0x080480f4 0x00044 0x00044 R   0x4
  TLS            0x0b06dc 0x080f86dc 0x080f86dc 0x00010 0x00030 R   0x4
  GNU_STACK      0x001000 0x00000000 0x00000000 0x00000 0x00000 RW  0x4
  GNU_RELRO      0x0b06dc 0x080f86dc 0x080f86dc 0x00924 0x00924 R   0x1 
```

二进制文件中的相关指令是

```
0x805467d:  mov    0x64(%esp),%edx
0x8054681:  mov    0x68(%esp),%ecx
0x8054685:  mov    %eax,0x80f9a44
0x805468a:  lea    0x4(%ecx,%edx,4),%eax
0x805468e:  mov    0x78(%esp),%edx
0x8054692:  mov    %eax,0x80ff1c8
==> 0x8054697:  mov    %edx,0x80f8f5c
0x805469d:  lea    0x0(%esi),%esi 
```

**gdb 中有没有办法确定地址是否被映射为只读？**

**此分段错误的原因可能是什么？**

C代码

* * *

```
/*

ECHOSERV.C
==========
(c) Paul Griffiths, 1999
Email: mail@paulgriffiths.net

Simple TCP/IP echo server.

*/

#include <sys/socket.h>       /*  socket definitions        */
#include <sys/types.h>        /*  socket types              */
#include <arpa/inet.h>        /*  inet (3) functions         */
#include <unistd.h>           /*  misc. UNIX functions      */

#include <stdlib.h>
#include <stdio.h>
#include <string.h>

#include <sys/stat.h>
#include <fcntl.h>

#include "helper.h"

#define LOG_FILE "test_disk.txt"

/*  Global constants  */

#define ECHO_PORT          (20002)
#define MAX_LINE           (1000)

int main(int argc, char *argv[]) {
    int       list_s;                /*  listening socket          */
    int       conn_s;                /*  connection socket         */
    short int port;                  /*  port number               */
    struct    sockaddr_in servaddr;  /*  socket address structure  */
    char      buffer[MAX_LINE];      /*  character buffer          */
    char     *endptr;                /*  for strtol()              */
    int file_fd = open(LOG_FILE, O_WRONLY|O_CREAT);

    /*  Get port number from the command line, and
        set to default port if no arguments were supplied  */
    if ( argc == 2 ) {
        port = strtol(argv[1], &endptr, 0);
        if ( *endptr ) {
            fprintf(stderr, "ECHOSERV: Invalid port number.\n");
            exit(EXIT_FAILURE);
        }
    }
    else if ( argc < 2 ) {
        port = ECHO_PORT;
    }
    else {
        fprintf(stderr, "ECHOSERV: Invalid arguments.\n");
        exit(EXIT_FAILURE);
    }

    /*  Create the listening socket  */

    if ( (list_s = socket(AF_INET, SOCK_STREAM, 0)) < 0 ) {
        fprintf(stderr, "ECHOSERV: Error creating listening socket.\n");
        exit(EXIT_FAILURE);
    }

    /*  Set all bytes in socket address structure to
        zero, and fill in the relevant data members   */

    memset(&servaddr, 0, sizeof(servaddr));
    servaddr.sin_family      = AF_INET;
    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);
    servaddr.sin_port        = htons(port);

    /*  Bind our socket addresss to the 
        listening socket, and call listen()  */

    if ( bind(list_s, (struct sockaddr *) &servaddr, sizeof(servaddr)) < 0 ) {
        fprintf(stderr, "ECHOSERV: Error calling bind()\n");
        exit(EXIT_FAILURE);
    }

    if ( listen(list_s, LISTENQ) < 0 ) {
        fprintf(stderr, "ECHOSERV: Error calling listen()\n");
        exit(EXIT_FAILURE);
    }

    /*  Enter an infinite loop to respond
        to client requests and echo input  */

    while ( 1 ) {

        /*  Wait for a connection, then accept() it  */

        if ( (conn_s = accept(list_s, NULL, NULL) ) < 0 ) {
            fprintf(stderr, "ECHOSERV: Error calling accept()\n");
            exit(EXIT_FAILURE);
        }

        /*  Retrieve an input line from the connected socket
            then simply write it back to the same socket.     */

        Readline(conn_s, buffer, MAX_LINE-1);
        Writeline(conn_s, buffer, strlen(buffer));
        Writeline(file_fd, buffer, strlen(buffer));
        printf("%s\n", buffer);

        /*  Close the connected socket  */

        if ( close(conn_s) < 0 ) {
            fprintf(stderr, "ECHOSERV: Error calling close()\n");
            exit(EXIT_FAILURE);
        }
    }
}

/*

HELPER.C
========
(c) Paul Griffiths, 1999
Email: mail@paulgriffiths.net

Implementation of sockets helper functions.

Many of these functions are adapted from, inspired by, or 
otherwise shamelessly plagiarised from "Unix Network 
Programming", W Richard Stevens (Prentice Hall).

*/

#include "helper.h"
#include <sys/socket.h>
#include <unistd.h>
#include <errno.h>

/*  Read a line from a socket  */

ssize_t Readline(int sockd, void *vptr, size_t maxlen) {
    ssize_t n, rc;
    char    c, *buffer;

    buffer = (char *)vptr;

    for ( n = 1; n < maxlen; n++ ) {

        if ( (rc = read(sockd, &c, 1)) == 1 ) {
            *buffer++ = c;
            if ( c == '\n' )
                break;
        }
        else if ( rc == 0 ) {
            if ( n == 1 )
                return 0;
            else
                break;
        }
        else {
            if ( errno == EINTR )
                continue;
            return -1;
        }
    }

    *buffer = 0;
    return n;
}

/*  Write a line to a socket  */

ssize_t Writeline(int sockd, const void *vptr, size_t n) {
    size_t      nleft;
    ssize_t     nwritten;
    const char *buffer;

    buffer = (const char *)vptr;
    nleft  = n;

    while ( nleft > 0 ) {
        if ( (nwritten = write(sockd, buffer, nleft)) <= 0 ) {
            if ( errno == EINTR )
                nwritten = 0;
            else
                return -1;
        }
        nleft  -= nwritten;
        buffer += nwritten;
    }

    return n;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T22:48:26.273

> 但是，该指令的目标地址是有效地址，并且该内存被映射为可写。

不是它**不是**（或者指令不会导致 a `SIGSEGV`）。

`0x80f8f5c`此 LOAD 段“覆盖”了目的地：

```
LOAD           0x0b06dc 0x080f86dc 0x080f86dc 0x015f8 0x07730 RW  0x1000 
```

但也由此：

```
GNU_RELRO      0x0b06dc 0x080f86dc 0x080f86dc 0x00924 0x00924 R   0x1 
```

要求运行时加载程序在`GNU_RELRO`加载程序执行重定位后将这部分地址空间设为只读（这正是它所做的，以及触发崩溃的原因）。

> gdb 中有没有办法确定地址是否被映射为只读？

你可以用 询问 gdb `info proc map`，或者直接查看`/proc/<pid>/maps`. 无论哪种方式，您都会发现内存是只读映射的。

# java - Log4j 如何配置日志级别

> ID：14173194
> 
> 赞同：1
> 
> 时间：2013-01-05T15:23:11.620
> 
> 标签：java, log4j, jboss7.x, slf4j

我使用来自 Netbeans 7.2.1 的 jboss-as-maven-plugin 版本 7.3.Final (goal jboss-as:run) 运行我的战争。

我的 pom.xml

```
<!-- logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${slf4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${slf4j.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${slf4j.version}</version>
            <scope>runtime</scope>
        </dependency> 
```

slf4j.version 是 1.7.2。

我有一个奇怪的行为：

这是我的 log4j.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" >
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <!-- Appenders -->
    <appender name="console" class="org.apache.log4j.ConsoleAppender">
        <param name="Target" value="System.out" />
        <param name="Encoding" value="UTF-8" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{HH:mm:ss,SSS} %-5p: %c - %m%n" />
        </layout>
    </appender>

    <!-- Application Loggers -->
    <logger name="org">
        <level value="warn" />
    </logger>

    <logger name="org.openid4java">
        <level value="debug" />
    </logger>

    <logger name="fr.mypackage">
        <level value="debug" />
    </logger>

    <!-- Root Logger -->
    <root>
        <priority value="warn" />
        <appender-ref ref="console" />
    </root>

</log4j:configuration> 
```

利用 ：

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
    private static final Logger logger = LoggerFactory.getLogger(MyController.class); 
```

我在 fr.mypackage 中的记录器不能很好地记录。我的意思是我所有的 logger.debug 都没有工作，只有我的 logger.warn 正在显示。我不明白，因为我将 fr.mypackage 设置为调试级别。

更奇怪的是显示来自 org.openid4java 级别 INFO 的日志。

我应该怎么办？我的错误在哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:28:16.207

问题在最后。您已将整体日志级别设置为 WARN。将根日志记录级别更改为“调试”，一切都应该没问题。

```
<root>
    <priority value="warn" />
    <appender-ref ref="console" />
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:07:07.667

添加`appender reference`到`logger definiton` 将解决此问题

```
<logger name="fr.mypackage">
    <level value="debug" />
    <appender-ref ref="console" />
</logger> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T06:26:44.170

检查您的服务器日志跟踪级别

# git - 提交 vim 时的 Git 编辑器

> ID：14173196
> 
> 赞同：0
> 
> 时间：2013-01-05T15:23:22.640
> 
> 标签：git

当我进入`git commit -a`Git Bash 时，会出现编辑器。当输入 esc 时，屏幕闪烁，但我没有离开。[我尝试了git commit -a chaos](https://stackoverflow.com/questions/4164874/git-commit-a-confusion)中的所有其他命令，但我不能离开。如果我关闭编辑器并重新打开 bash，现金中的所有命令都会消失（带有顶部箭头），并且指向工作目录的指针也会被破坏。

是否可以使用`git commit -a <filename>`然后推送？我将设置 git 以编写默认消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:51:00.303

您可以使用以下命令指定消息`-m`：

```
git commit -m "Some commit message" 
```

或者将您的编辑器更改为您认为更易于使用的内容：

```
git config --global core.editor "nano" 
```

或者使用 vi，只需点击`O`，输入您的信息，`<esc>`然后点击`:wq`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-28T18:12:42.567

我认为你应该使用`git config --global core.editor "vim"`

# java - 自定义 Tomcat 错误页面未显示图像

> ID：14173212
> 
> 赞同：1
> 
> 时间：2013-01-05T15:25:54.690
> 
> 标签：java, servlets, servlet-filters

我在 web.xml 文件中配置了一个自定义错误页面，但页面中引用的图像显示为断开的链接。

自定义错误页面只是一个简单的 html 页面：

```
<!DOCTYPE html>
<html><head>
  <meta charset="UTF-8"><title>401 Error</title></head>
<body>
    <p style="font-size: 200%; text-align: center">HTTP Error 401: Not authorized to view sensitive data.<br/>
    <img src="NoAccessImage.png" alt="401Error"><br/>
    You must log in before viewing the requested page.</p>
</body></html> 
```

此页面与其引用的图像文件一起存储在错误文件夹中。身份验证过滤器用于抛出 401 错误，如果我在未先登录的情况下尝试查看受保护的内容，则该页面会显示。但引用的图像丢失了。如果我只是将文件拖到网络浏览器中，它会正确显示，所以我认为这是一个上下文问题。我尝试将 img src 标签更改为`"/error/NoAccessImage.png"`没有结果。

相关的 AuthenticationFilter 代码如下：

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {    
    try {
        boolean authorized = false;
        HttpServletRequest r = (HttpServletRequest) request;
        HttpSession session = ((HttpServletRequest)request).getSession(false); 
        String uri = r.getRequestURI();
        if(uri.indexOf("/Login")>0) {
            chain.doFilter(request, response);
            return;               
        }
        if (session != null) {
            String school = (String) session.getAttribute("school");
            if(school != null && school.length()>0 ) {
                authorized = (school.equals(getURISchool(uri)));
            }
        }
        if (authorized) {
            chain.doFilter(request, response);
            return;
        } else {
            ((HttpServletResponse) response).sendError(401, "You must log in to view the schedule.");
        }
    } catch (IOException io) {
        System.out.println("IOException raised in AuthenticationFilter");
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:38:07.540

服务器不会重定向到您的错误页面。它转发给它。因此，如果初始调用的 URL 是`http://localhost/myApp/foo/bar/baz/SomeAction`，由于您使用了图像的相对路径，浏览器将在`http://localhost/myApp/foo/bar/baz/NoAccessImage.png`. 因此，您应该使用绝对路径来引用图像（以及所有图像、资源和链接）。

由于每个应用程序都有一个上下文路径，因此您必须将上下文路径添加到 URL。这就是 JSTL`<c:url>`标签的作用：

```
<img src="<c:url value='/error/NoAccessImage.png'/>" alt="401Error"/> 
```

这将被翻译成

```
<img src="/myApp/error/NoAccessImage.png" alt="401Error"/> 
```

（`myApp`作为您的应用程序的连接路径）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:36:55.937

过滤器对于 的请求不得处于活动状态`/error/*`。据我了解，从您提供的浏览器向 发送请求的信息中`/error/NoAccessImage.png`，该请求通过过滤器运行，服务器以 401 而不是图像响应。

在您选择的浏览器中使用开发控制台（通常使用 F12 激活）查看请求/响应及其各自的 HTTP 状态代码。

此外，如果您的应用程序使用上下文根而不是`/`ie is it`server:port/foo/index.servlet`或`server:port/index.servlet`. 如果是前者，则图像的路径必须是`/foo/error/NoAccessImage.png`.

# arduino - Arduino温度传感器

> ID：14173213
> 
> 赞同：3
> 
> 时间：2013-01-05T15:25:55.710
> 
> 标签：arduino, sensors, temperature

我正在尝试使用温度传感器用 arduino 构建一个小程序。

我以为我知道该怎么做，但我得到了一些奇怪的输出。

这是我的代码：

```
int sensorPin = 0;
void setup()
{
    Serial.begin(9600);
}
void loop()
{
    int reading = analogRead(sensorPin);
    float voltage = reading * 5.0 / 1024;
    float temperatureC = (voltage - 0.5) * 100;
    Serial.print(temperatureC); Serial.print(" degrees C, ");
    Serial.print(voltage); Serial.println(" volts");
    delay(1000);
} 
```

这段代码给了我输出：

```
-26.56 degrees C, 0.23 volts
-26.56 degrees C, 0.23 volts
-27.05 degrees C, 0.23 volts
-26.56 degrees C, 0.23 volts
-26.07 degrees C, 0.24 volts
-26.07 degrees C, 0.24 volts 
```

为什么是`-`度数？为什么我可以将它更改为我想要的任何引脚，它仍然会给我类似的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:30:21.500

模拟输入 0 不是引脚 0。

您应该使用定义的符号：
**A0、A1、...、A7**
用于模拟输入。

尝试

```
int sensorPin = A0; 
```

你的程序应该可以工作。

如果您对实际值感到好奇，请在您的 Arduino IDE 安装下查看文件
..\hardware\arduino\variants\standard\pins_arduino.h

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:32:15.567

您正在正确阅读此输入。为了不让你获得负学位，你必须以不同的方式处理它。

有了这个：

```
float temperatureC = (voltage - 0.5) * 100; 
```

任何值都会`< 0.5`导致负数乘以 100。

尝试使用交换属性来分解它。

*   `(voltage - 0.5) * 100`是一样的`(voltage * 100) - (0.5 * 100)`。
*   这可以进一步简化为`(voltage * 100) - 50`。

尽管如此，对于所有`voltage < 0.5`温度为负的值。

*   我建议将其乘以`temperatureC`使其`-1`为正，并且不要将传感器放置在任何温度为 `~ >= 50 摄氏度的地方。

[此外，正如 jdr5ca 在这里](https://stackoverflow.com/a/14192283/1440715)指出的那样，您实际上还没有从传感器获得任何数据......`:(`

无论 pin0 是什么，您都可能会收到噪音（或垃圾）。

**编辑**

最佳实践是使用括号使操作顺序更清晰。

*   **IE：**
    *   `float voltage = reading * 5.0 / 1024;`
    *   应该
    *   `float voltage = reading * (5.0 / 1024);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T19:31:31.057

首先，您必须使用定义的符号`A0`

```
int sensorPin = A0;

in the next

float voltage = reading * (5.0 / 1024); 
```

有一个例子`File/Examples/Basic/AnalogReadSerial`

# c++ - C++调用另一个类的函数

> ID：14173217
> 
> 赞同：11
> 
> 时间：2013-01-05T15:26:20.210
> 
> 标签：c++, class, function

对 c++ 来说非常新，无法从另一个类调用函数。

B 类继承自 A 类，我希望 A 类能够调用 B 类中创建的函数。

```
using namespace std;

class B;

class A 
{

public:

    void CallFunction ()
    {
        B b;
        b.bFunction();
    }

};

class B: public A
{
public:
    virtual void bFunction()
        {
            //stuff done here
        }

}; 
```

这一切在屏幕上看起来都很好（没有明显的错误），但是当我尝试编译它时，我得到一个错误 C2079 'b' uses undefined class B.

我试过让它们成为指针/`friends`但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-05T15:37:25.630

```
 void CallFunction ()
    {   // <----- At this point the compiler knows
        //        nothing about the members of B.
        B b;
        b.bFunction();
    } 
```

发生这种情况的原因与 C 中的函数在没有至少一个被声明为函数原型的情况下不能相互调用的原因相同。

要解决此问题，我们需要确保在使用这两个类之前都已声明它们。我们将声明与定义分开。[这篇 MSDN 文章](https://msdn.microsoft.com/en-us/library/0e5kx78b.aspx)更详细地解释了声明和定义。

```
class A
{
public:
    void CallFunction ();
};

class B: public A
{
public:
    virtual void bFunction()
    { ... }
};

void A::CallFunction ()
{
    B b;
    b.bFunction();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T15:31:08.773

你应该做的是放入`CallFunction`*.cpp 文件中，其中包含 Bh

编辑后，文件将如下所示：

# 乙：

```
#pragma once //or other specific to compiler...
using namespace std;

class A 
{
public:
    void CallFunction ();
};

class B: public A
{
public:
    virtual void bFunction()
        {
            //stuff done here
        }
}; 
```

# B.cpp

```
#include "B.h"
void A::CallFunction(){
//use B object here...
} 
```

参考您的解释，您已尝试更改 B b；进入指针 - 如果您不在同一个地方使用它，那也没关系。您可以使用未定义类的指针（但已声明），因为所有指针都有固定的字节大小（4），所以编译器没有问题。但它对他们指向的对象一无所知（简单地说：知道大小/边界，而不是内容）。

因此，只要您使用所有指针大小相同的知识，就可以在任何地方使用它们。但是如果你想使用他们所指向的对象，这个对象的类必须已经被编译器定义和知道。

最后澄清：与指针不同，对象的大小可能不同。指针是一个数字/索引，它指示 RAM 中存储某些内容的位置（例如索引：0xf6a7b1）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T15:29:24.013

类 B 仅在开头**声明**但**未定义**，这是编译器抱怨的。根本原因是在类 A 的调用函数中，您引用了类型为 b 的实例`B`，该实例不完整且未定义。您可以在不引入新文件的情况下像这样修改源代码（只是为了简单起见，实践中不推荐）：

```
using namespace std;

class A 
{
public:

    void CallFunction ();
};

class B: public A
{
public:
    virtual void bFunction()
    {
        //stuff done here
    }
};

 // postpone definition of CallFunction here

 void A::CallFunction ()
 {
     B b;
     b.bFunction();
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T15:33:34.103

在 A 中，您使用了 B 的定义，直到那时才给出，这就是编译器给出错误的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T15:37:19.677

前向声明`class B`和交换顺序`A`和`B`定义： 1st`B`和 2nd `A`。您不能调用前向声明`B`类的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-10T18:35:19.417

这是我对这个问题的解决方案。试图让它保持直截了当和简单。

```
#include <iostream>
using namespace std;

class Game{
public:
  void init(){
    cout << "Hi" << endl;
  }
}g;

class b : Game{  //class b uses/imports class Game
public:
  void h(){
    init(); //Use function from class Game
  }
}A;

int main()
{
  A.h();
  return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-29T12:47:05.490

您还可以查看[奇怪重复出现的模板模式](https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)并解决类似于以下的问题：

```
template<typename B_TYPE>
struct A
{
    int callFctn()
    {
        B_TYPE b;
        return b.bFctn();
    }
};

struct B : A<B>
{
    int bFctn()
    {
        return 5;
    }
};
int main()
{
    A<B> a;
    return a.callFctn();
} 
```

# asp.net-mvc - 首先在代码中使用存储过程时，底层提供程序在打开时失败

> ID：14173219
> 
> 赞同：0
> 
> 时间：2013-01-05T15:26:30.373
> 
> 标签：asp.net-mvc, code-first, entity-framework-5

我正在尝试从实体框架代码优先模型中的存储过程中检索数据。但是，当我尝试时，它给了我一个错误“底层提供程序在打开时失败”，用于内部数据列表。

```
 using (ProductDbContext dbUserContext = new ProductDbContext())
            {
                listProducts = dbUserContext.Database.SqlQuery<Products>("SP_GetAllProducts");
                dbUserContext.Database.Initialize(force: false);

                var dbProdCmd = dbUserContext.Database.Connection.CreateCommand();
                dbProdCmd.Connection = dbUserContext.Database.Connection;

     //((IObjectContextAdapter)dbUserContext).ObjectContext.Connection.Open();

                dbProdCmd.CommandText = "SP_GetAllProducts";
                dbProdCmd.CommandType = CommandType.StoredProcedure;
                try
                {
                    // dbUserContext.Database.Connection.Open();
                    ((IObjectContextAdapter)dbUserContext).ObjectContext.Connection.Open();

                    dbUserContext.Database.SqlQuery<Products>("SP_GetAllProducts");

                    var prodReader = dbProdCmd.ExecuteReader();

                    listProducts = ((IObjectContextAdapter)dbUserContext)
                   .ObjectContext
                   .Translate<Products>(prodReader, "Products", MergeOption.AppendOnly).ToList();
                    prodReader.Dispose();
                }
                finally
                {
                    //dbUserContext.Database.Connection.Close();
                    //((SqlConnection)dbUserContext.Database.Connection).Close();

                    ((IObjectContextAdapter)dbUserContext).ObjectContext.Connection.Close();
                }
                //((IObjectContextAdapter)dbUserContext).ObjectContext.ContextOptions.LazyLoadingEnabled = false;
                return View(listProducts);
            }

Stored Procedure: 
```

这是我的存储过程：

```
CREATE PROCEDURE [dbo].[SP_GetAllProducts]
    -- Add the parameters for the stored procedure here

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT OFF;

    -- Insert statements for procedure here
    SELECT * FROM [DBO].[Products]
    SELECT * FROM [DBO].[prd1]
    SELECT * FROM [DBO].[prd2]
    SELECT * FROM [DBO].[prd3]
    SELECT * FROM [DBO].[prd4]
    SELECT * FROM [DBO].[prd5]
    SELECT * FROM [DBO].[prd6]
END

Model: 
```

模型结构是这样的：

```
using System.Collections.Generic;
using System;
using System.Data.Entity;

namespace Project.Models
{
    public class Products
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public DateTime CreationDate { get; set; }
        public DateTime ModificationDate { get; set; }

        public virtual ICollection<T> prd1 { get; set; }
        public virtual ICollection<T> prd2 { get; set; }
        public virtual ICollection<T> prd3 { get; set; }
        public virtual ICollection<T> prd4 { get; set; }
        public virtual ICollection<T> prd5 { get; set; }
    }

    public class ProductContext : DbContext
    {
        public DbSet<T> prd { get; set; }
        public DbSet<T> prd1 { get; set; }

        public DbSet<T> prd2 { get; set; }
        public DbSet<T> prd3 { get; set; }
        public DbSet<T> prd4 { get; set; }
        public DbSet<T> prd5 { get; set; }
} 
```

# mysql - 这个错误作为 rails 命令的输出是什么意思？

> ID：14173223
> 
> 赞同：0
> 
> 时间：2013-01-05T15:26:49.573
> 
> 标签：mysql, ruby-on-rails, windows

```
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:68:in `block (2 levels) in 
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `each'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:66:in `block in require'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `each'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler/runtime.rb:55:in `require'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.0.22/lib/bundler.rb:122:in `require'
from C:/RAILSI~1/INTERE~1/config/application.rb:7:in `<top (required)>'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `block in <top (required)>'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>'

C:\RAILSI~1\INTERE~1\config> 
```

这是我可以获取的所有输出，因为 DOS 不会向上滚动。

我正在尝试将 Rails 应用程序从 Linux 移植到 Windows。唯一不同的是这个应用程序使用 mysql。所以安装了MYSQL gem。两者都使用 ruby​​ 191，都使用 rails 329。

我已经进行了一些挖掘并将其缝合起来，因为当 mysql gem 编译为 6.0 时，我放入的 mysql.dll 是 5.0 版本。客户端 6.0 似乎不存在。

我通常不会问，但我对此束手无策。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:58:22.343

如果您使用的是 MySQL gem 的 2.9.x 版本，它是针对 MySQL 6.0 构建的，您可以从 MySQL 网站下载正确版本的 C 连接器。安装`mysql`gem 后，它应该会给你一个 URL 去下载正确的版本。但是，如果您是`mysql`使用安装的，`bundle install`则可能不会显示安装后消息。

[http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/http://cdn.mysql.com/](http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/http://cdn.mysql.com/)

有将二进制库作为 ZIP 文件获取的 URL。

[http://dev.mysql.com/downloads/connector/c/](http://dev.mysql.com/downloads/connector/c/)

如果第一个链接不起作用，则会提供包含所有可用 C 连接器下载的 URL。您需要**Windows（x86，32 位）、ZIP 存档**（第二个；文件名不以*vs2005*结尾的那个）。

如果 MySQL 库仍然不匹配，请执行 a`gem list mysql`以获取已安装的版本，然后手动卸载并重新安装 gem：

```
gem uninstall mysql

gem install -v=x.x.x mysql 
```

替换`x.x.x`为之前报告的版本号。安装 gem 后，它应该为您提供需要安装的 C 连接器的 URL。

# node.js - Firefox cookie 未传输（socket.io 授权）

> ID：14173225
> 
> 赞同：1
> 
> 时间：2013-01-05T15:27:22.657
> 
> 标签：node.js, firefox, authentication, cookies, socket.io

我有这段代码，我在其中检查从客户端发送的 cookie

```
io.set('authorization', function (data, accept) {

    if (data.headers.cookie) {
       //... do something with the cookie...

    } else 
    {
       return accept('No cookie transmitted.', false);
    }

}); 
```

当我使用 chrome 或 iexplorer 时，定义了 data.headers.cookie，但如果我使用 firefox（17.0.1），则不会传输 cookie，并且未定义 data.headers.cookie。

有谁知道是什么问题？

# javascript - 等到 promise 和嵌套 thens 完成

> ID：14173228
> 
> 赞同：7
> 
> 时间：2013-01-05T15:28:04.203
> 
> 标签：javascript, jquery-deferred, promise

我从这样的函数返回一个承诺：

```
resultPromise = dgps.utils.save(opportunity, '/api/Opportunity/Save', opportunity.dirtyFlag).then(function () {

                self.checklist.saveChecklist(opportunity).then(function () {

                    self.competitor.save(opportunity.selectedCompetitor()).then(function ... etc.
return resultPromise; 
```

假设上述函数称为保存。

在调用函数中，我想做等待整个链完成然后做一些事情。我的代码如下所示：

```
var savePromise = self.save();
savePromise.then(function() {
    console.log('aftersave');
}); 
```

结果是当 Promise 链仍在运行时，“aftersave”被发送到控制台。

整个链条完成后我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T15:48:15.303

与其嵌套承诺，不如将它们链接起来。

```
resultPromise = dgps.utils.save(opportunity, '/api/Opportunity/Save', opportunity.dirtyFlag).then(function () {

                    return self.checklist.saveChecklist(opportunity);
                }).then(function () {

                    return self.competitor.save(opportunity.selectedCompetitor());
                }).then(function () {
                    // etc
                });

// return a promise which completes when the entire chain completes
return resultPromise; 
```

# c++ - 以 XY 坐标给出的点之间的最短路径距离

> ID：14173231
> 
> 赞同：6
> 
> 时间：2013-01-05T15:28:20.823
> 
> 标签：c++, shortest-path, dijkstra, cartesian

我目前正在研究一个包含大约 800 个点的 X 和 Y 坐标的向量的项目。这些点代表了一个电力网络。我的目标是计算 A 点和 B 点之间的最短距离路径，该路径可以或不能沿着包含电线 XY 坐标的向量给出的路径定位。

我已经阅读了有关 Dijkstra 算法的信息，但由于我对它不太熟悉，我不确定我是否应该朝那个方向发展。如果我能从您那里得到任何可以指导我解决此问题的反馈或意见，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:01:28.570

Any pathfinding algorithm depends on paths, points are just meaningless. What you have now is a list of "waypoints". However you have not explained how those points connect. For example if any and every point is connected to each other point the shortest distance would simply be the pythagoral distance between A & B. - I'm also unsure what you mean by X-Y coordinates of electric lines, such a "line" would always have a start & end position?

So the first step is to add to each point not only the x,y coordinates, but also a list of connectable points.

Once you did this you can start using a pathfinding algorithm (In this case A* would seem better than Dijkstra's though). It would simply be a standard implementation with each "cost" the actual distance between a point. (And for A* the heuristic would be the pythagoral distance to the end point).

For a good tutorial about A* (and other algorithms) you should check [Amit's pages](https://stackoverflow.com/users/511302/paul23?tab=reputation)

EDIT, in reply to the comments.

It seems the first step is to convert a set of line segments to "points". The way I would go through this is:

```
collection AllPoints {containing Location & LinksToOtherPoints}
for each Segment
    get start/end Point of Segment
    if Point.Location is not in allPoints
        add Point to AllPoints
    add the other Point of Segment to LinksToOtherPoints 
```

You then have simply a list with all points & the connections between them. As you have to constantly search the allPoints collection I suggest storing that in a binary tree structure (sets?).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:46:47.663

对于计算最短路径 Dijakstra 会很好。

[使用A*](https://en.wikipedia.org/wiki/A%2a_search_algorithm)可以获得更快的结果，它使用距离的最佳猜测，以便将搜索集中在正确的方向上，从而更快地到达那里。

如果您重复查询相同的数据集，那么[记忆](https://en.wikipedia.org/wiki/Memoization)化就可以了。

那些推荐蛮力算法的人是傻瓜——花一点时间来学习如何编写一个有效的解决方案是值得的。[但是您可以使用Floyd-Warshall 算法](https://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)计算所有点之间的最短路径。不幸的是，这不会告诉你最短路径*有多**长*。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-05T16:08:31.427

只需计算所有可能路径的距离并选择最短的路径。800 条路径对于现代 PC 来说不算什么。你甚至不会注意到它。

# meteor - Meteor：将多个 javascript 文件聚合为一个？

> ID：14173232
> 
> 赞同：5
> 
> 时间：2013-01-05T15:28:34.497
> 
> 标签：meteor

Drupal 可以选择“聚合”（即组合）多个 js 或 css 文件为一个，以减少通过网络传输的文件数量。

流星有类似的东西吗？显然，对于开发来说，将文件全部分开会更好。但是在生产中，将它们捆绑（并缩小）会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T15:40:53.393

是的。

Meteor 在开发服务器上使用单独的文件，并在生产服务器上合并和缩小 js 和 css 文件。

例如，查看[http://meteor.com](http://meteor.com/)的来源。

作为奖励，Meteor 具有编译各种预处理器的[智能包](http://docs.meteor.com/#packages)，包括：

*   [较少的](http://docs.meteor.com/#less)
*   [手写笔](http://docs.meteor.com/#stylus)
*   [咖啡脚本](http://docs.meteor.com/#coffeescript)

通过使用 Smart Packages 预处理器，您可以自由地用您喜欢的语言编写代码或样式，Meteor 会根据需要将其转换为 javascript 或 css。

# java - Java SDK 与 ext 不匹配。本机库

> ID：14173233
> 
> 赞同：1
> 
> 时间：2013-01-05T15:28:45.020
> 
> 标签：java

我正在尝试使用分机。eclipse 中的本地库，但程序给出以下错误：“java.lang.UnsatisfiedLinkError: Unable to load library 'edk': libedk.so: wrong ELF class: ELFCLASS32”。

我认为这可能是因为库是 32 位的，而我的 JDK 是 64 位的？是这样吗，如果是这样，请告诉我如何安装 32 位 JDK 以及已经存在的 64 位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:33:02.807

```
I thought it may be because the library is 32-bit whereas my JDK is 64-bit ? 
```

确实是的。

```
please tell me how to install 32-bit JDK along with 64-bit already present 
```

好吧，例如，从 Oracle 下载它，在`/opt`其中创建一个目录来提取它并`JAVA_HOME`在`JDK_HOME`自定义启动脚本中进行设置：

```
#!/bin/bash
export JAVA_HOME=/path/to/32bit/jdk
export JDK_HOME=$JAVA_HOME
export PATH=$JDK_HOME/bin:$path
exec /path/to/eclipse "$@" 
```

# php - 在php中验证类名

> ID：14173240
> 
> 赞同：0
> 
> 时间：2013-01-05T15:30:12.763
> 
> 标签：php, regex

> **可能重复：**
> [如何获得正则表达式来检查字符串是否仅包含字母字符 [az] 或 [AZ]？](https://stackoverflow.com/questions/990364/how-can-i-get-a-regex-to-check-that-a-string-only-contains-alpha-characters-a-z)
> [PHP：如何检查字符串是否以指定的字符串开头？](https://stackoverflow.com/questions/2790899/php-how-to-check-if-a-string-starts-with-a-specified-string)

我尝试编写自己的正则表达式，但我***很烂***。

`#^(AJ\_)?.*#`

问题是，我会像这样创建一个字符串：`AJ______ClassNameBlahBlahBlah`并且我的函数返回 TRUE。我所需要的只是`AJ_`和它后面的文字。

```
function isAnAJMClass($classname) {
     if (preg_match('#^(AJ\_)?.*#', $classname)) {
          return TRUE;
     } else {
         return FALSE;
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:41:30.840

如果你确定总是`AJ_`在字符串的开头，你可以使用[`strpos($haystack, $needle)`](http://php.net/strpos)正则表达式来代替。

```
function isAnAJMClass($classname) {
     if (strpos($classname, 'AJ_') === 0) {
          return TRUE;
     } else {
         return FALSE;
     }
} 
```

[`substr($str, $start, $len)`](http://php.net/substr)也可以使用

```
if (substr($classname, 0, 3) === 'AJ_') {
} 
```

通过这些方式，读者可能可以更快地阅读代码。独立于您使用的方法，请始终评论该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:36:07.573

替换这个：

```
preg_match('#^(AJ\_)?.*#', $classname) 
```

有了这个：

```
preg_match('/^AJ_[a-zA-Z]+/', $classname) 
```

这是您需要的正确正则表达式，它说：

匹配以下开头的每个字符串：AJ_ 后跟小写或大写字母

# mysql - 未创建外键

> ID：14173241
> 
> 赞同：3
> 
> 时间：2013-01-05T15:30:23.060
> 
> 标签：mysql, sql, database

> **问题：**
> 
> 想要在下面执行一个 Select Query（必须是这个查询）：
> 
> 从 Question WHERE 中选择 QuestionId (QuestionNo = ? AND SessionId = ?)
> 
> 为了能够在 Question 表中找到 QuestionId 并将其存储在 Answer Table 中的所有答案，以便我们可以确定哪些答案属于哪个问题

**问题：**

mysqli 代码的问题是它无法插入正确的 QuestionId 值。它在表中一直为 QuestionId 显示 0 `Answer`。那么有人可以解决这个问题以便能够显示正确的 QuestionId 吗？

它必须完成顶部提供的 SELECT 查询。我必须在mysqli中使用它。

这是数据库表：

问题表

```
QuestionId (auto)  SessionId  QuestionNo
4                  2          1
5                  2          2
6                  2          3 
```

目前答题表：

```
AnswerId (auto)  QuestionId  Answer
7                0           A
8                0           C
9                0           A
10               0           B
11               0           True 
```

答案表应如下所示：

```
AnswerId (auto)  QuestionId  Answer
7                4           A
8                4           C
9                5           A
10               5           B
11               6           True 
```

下面是代码：

```
 $questionsql = "INSERT INTO Question (SessionId, QuestionNo) 
    VALUES (?, ?)";
if (!$insert = $mysqli->prepare($questionsql)) {
    // Handle errors with prepare operation here
    echo __LINE__.': '.$mysqli->error;
}

 $answersql = "INSERT INTO Answer (QuestionId, Answer) 
    VALUES (?, ?)";
if (!$insertanswer = $mysqli->prepare($answersql)) {
    // Handle errors with prepare operation here
    echo __LINE__.': '.$mysqli->error;
}

//make sure both prepared statements succeeded before proceeding
if( $insert && $insertanswer)
{
    $sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');
    $c = count($_POST['numQuestion']);

    for($i = 0;  $i < $c; $i++ )
    {

            $insert->bind_param("ii", $sessionid, $_POST['numQuestion'][$i]);

            $insert->execute();

            if ($insert->errno) 
            {
                // Handle query error here
                echo __LINE__.': '.$insert->error;
                break 1;
            }
}

        $results = $_POST['value'];
        foreach($results as $id => $value) 
        {
            $answer = $value;

            $lastID = $id;

            $questionidquery = "SELECT QuestionId FROM Question WHERE (QuestionNo = ? AND SessionId = ?)";

        if (!$questionidstmt = $mysqli->prepare($questionidquery)) {
        // Handle errors with prepare operation here
          echo __LINE__.': '.$mysqli->error;
        }

        // Bind parameter for statement
        $questionidstmt->bind_param("ii", $lastID, $sessionId);

        // Execute the statement
        $questionidstmt->execute();

                    if ($questionidstmt->errno) 
                    {
                        // Handle query error here
                        echo __LINE__.': '.$questionidstmt->error;
                        break 2;
                    }

        // This is what matters. With MySQLi you have to bind result fields to
        // variables before calling fetch()
        $questionidstmt->bind_result($quesid);

        // This populates $optionid
        $questionidstmt->fetch(); 

        $questionidstmt->close(); 

            foreach($value as $answer) 
            {
                $insertanswer->bind_param("is", $quesid, $answer);

                $insertanswer->execute();

                if ($insertanswer->errno) {
                    // Handle query error here
                    echo __LINE__.': '.$insertanswer->error;
                    break 3;
                }
            }
        }

    //close your statements at the end

    $insertanswer->close();
    $insert->close();
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:32:49.630

您需要在 INSERT 之后直接检索用作问题中自动递增 id 的序列的最后一个值 - 使用 LAST_INSERT_ID() SQL 函数执行此操作。然后，您可以在插入 Answer 时将此值用作参数。

[这是一篇](http://www.tutorialspoint.com/mysql/mysql-using-sequences.htm)关于如何做到这一点的文章。

您还可以通过在插入答案循环中消除对问题 ID 的查询来重构您的代码。相反，当您插入问题时，使用每个 QuestionNo 的 QuestionId 填充关联数组。在遍历答案时，使用关联数组快速检索 QuestionId。记忆不应该是一场音乐会，因为您目前在 HTTP 请求中拥有所有问题和答案。

代码的核心将如下所示：

```
// AA: Declare an empty associative array for QuestionNo -> QuestionID
$question_ids = array()

for($i = 0;  $i < $c; $i++ )
{
        // AA: Extract the QuestionNo for multiple use
        $questionNo = $_POST['numQuestion'][$i];

        $insert->bind_param("ii", $sessionid, $questionNo);

        $insert->execute();

        if ($insert->errno)
        {
            // Handle query error here
            echo __LINE__.': '.$insert->error;
            break 1;
        }

        // AA: Retrieve the questionId from MySQL
        $questionId = mysql_insert_id();

        // AA: Add a key-value pair (QuestionNo, QuestionId) to $question_ids
        $question_ids[$questionNo] = $questionId;
}

$results = $_POST['value'];
foreach($results as $id => $value)
{
    $answer = $value;

    // AA: Look up the QuestionId for the question number
    $quesid = $question_ids[$id];

    foreach($value as $answer)
    {
        $insertanswer->bind_param("is", $quesid, $answer);

        $insertanswer->execute();

        if ($insertanswer->errno) {
            // Handle query error here
            echo __LINE__.': '.$insertanswer->error;
            break 3;
        }
    }
} 
```

**注意**：我不是 PHP 程序员，也没有对此进行测试，因此可能存在语法错误。对不起 ：（

# css - 使用 Compass/Sass 删除附加到 sprite 文件名的随机字符串

> ID：14173242
> 
> 赞同：7
> 
> 时间：2013-01-05T15:30:28.163
> 
> 标签：css, ruby, sass, sprite, compass-sass

我最近一直在使用 Compass 和 Sass 来做一些 CSS 精灵，因为它非常有用。

但是，文件名总是附加一个随机字符串。例如**图标-s5eb424578c.png**。而且我不希望附加这个随机字符串，因为这意味着每次发生更改时我都需要上传新的 CSS 文件和新的精灵图像。

那么，有谁知道 Compass gem 目录中的哪个 Ruby 或其他配置文件附加了这个随机字符串？然后我可以为那一点注释掉代码。除非我错过了一个官方变量，否则我可以在 Compass 中设置来告诉它我不想附加这个字符串？

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-10T08:50:14.687

尝试将这些行添加到您的`config.rb`：

```
module Compass::SassExtensions::Functions::Sprites
  def sprite_url(map)
    verify_map(map, "sprite-url")
    map.generate
    generated_image_url(Sass::Script::String.new(map.name_and_hash))
  end
end

module Compass::SassExtensions::Sprites::SpriteMethods
  def name_and_hash
    "sprite-#{path}.png"
  end

  def cleanup_old_sprites
    Dir[File.join(::Compass.configuration.generated_images_path, "sprite-#{path}.png")].each do |file|
      log :remove, file
      FileUtils.rm file
      ::Compass.configuration.run_sprite_removed(file)
    end
  end
end

module Compass
  class << SpriteImporter
    def find_all_sprite_map_files(path)
      glob = "sprite-*{#{self::VALID_EXTENSIONS.join(",")}}"
      Dir.glob(File.join(path, "**", glob))
    end
  end
end 
```

为我工作`Compass 0.12.2 (Alnilam)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T14:36:16.580

在您的项目配置文件中输入类似这样的内容

```
asset_cache_buster :none

# Make a copy of sprites with a name that has no uniqueness of the hash.
on_sprite_saved do |filename|
  if File.exists?(filename)
    FileUtils.mv filename, filename.gsub(%r{-s[a-z0-9]{10}\.png$}, '.png')
  end
end

# Replace in stylesheets generated references to sprites
# by their counterparts without the hash uniqueness.
on_stylesheet_saved do |filename|
  if File.exists?(filename)
    css = File.read filename
    File.open(filename, 'w+') do |f|
      f << css.gsub(%r{-s([a-z0-9]{10})\.png}, '.png?v\1')
    end
  end
end 
```

学分在这里[如何从 Compass 生成的精灵图像文件名中删除散列？](https://stackoverflow.com/questions/9183133/how-to-turn-off-compass-sass-cache-busting#9332472)

# ruby-on-rails - 通过 Ruby 的 MtGox 价格代码

> ID：14173245
> 
> 赞同：2
> 
> 时间：2013-01-05T15:30:32.783
> 
> 标签：ruby-on-rails, ruby

考虑到数据的公开性质，这应该很简单，但由于某种原因，我的 Ruby 脚本在发出请求时超时。

URL 是[http://mtgox.com/api/1/BTCGBP/ticker](http://mtgox.com/api/1/BTCGBP/ticker) - 在浏览器中运行良好，并返回预期的 JSON。

```
require 'net/https'
require 'uri'
uri = URI.parse('https://mtgox.com/api/1/BTCGBP/ticker')
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true if uri.scheme == 'https'
resp, response = http.post(uri.request_uri, nil) 
```

但是，这会从同一个框中返回*Timeout::Error: execution expired*异常（每次）。我可能遗漏了一些非常明显的东西；谁能帮忙？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:01:52.803

我在我的环境中尝试了您的代码，一切正常。你能写更多关于这个错误的信息吗，它发生在哪一行等等？你确定使用 POST 动词 (RESTful) 吗？你想让我做什么 ？我修改了你的代码：

```
 require 'net/https'
    require 'uri'
    uri = URI.parse('https://mtgox.com/api/1/BTCGBP/ticker')
    http = Net::HTTP.new(uri.host, uri.port)
    http.use_ssl = true if uri.scheme == 'https'
    resp = http.get(uri.request_uri)
    puts resp.body 
```

我使用 GET 动词，我得到了 JSON。

# javascript - Onclick 按钮创建新标记

> ID：14173246
> 
> 赞同：0
> 
> 时间：2013-01-05T15:30:32.860
> 
> 标签：javascript, google-maps-api-3

正如标题所述，我在执行该操作时做错了什么，我假设我必须对 JS 结构做错事，使其无法正常工作。到目前为止，我正在单击此处未出现标记的按钮是我正在使用的代码。

```
 function addMyMarker() { //function that will add markers on button click
        var mark = new google.maps.Marker({
            position:mapCenter, 
            map: map,
              draggable:true,
              animation: google.maps.Animation.DROP,
            title:"This a new marker!",
          icon: "http://maps.google.com/mapfiles/ms/micons/blue.png"
        });   
    } 
```

这是完全添加了上述内容的代码。请帮忙。我不擅长JS。

```
 var map;
var markersArray = [];
var mapCenter = new google.maps.LatLng(10.4167, 123.0000);

   var customIcons = {
  City: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  Municipality: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

    function load() {
    map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(10.4167, 123.0000),
    zoom: 8,
    mapTypeId: 'roadmap'

    });
    var infoWindow = new google.maps.InfoWindow;

    downloadUrl("xmlspitter.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      markersArray.push(marker);
      bindInfoWindow(marker, map, infoWindow, html);
    }
    });

    function bindInfoWindow(marker, map, infoWindow, html) {
    google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
    });
    }

     function addMyMarker() { //function that will add markers on button click
        var marker = new google.maps.Marker({
            position:mapCenter, 
            map: map,
              draggable:true,
              animation: google.maps.Animation.DROP,
            title:"This a new marker!",
          icon: "http://maps.google.com/mapfiles/ms/micons/blue.png"
        });   
    }

    function downloadUrl(url, callback) {
    var request = window.ActiveXObject ?
    new ActiveXObject('Microsoft.XMLHTTP') :
    new XMLHttpRequest;

    request.onreadystatechange = function() {
    if (request.readyState == 4) {
    request.onreadystatechange = doNothing;
    callback(request, request.status);
    }
    };

    request.open('GET', url, true);
    request.send(null);
    }

    function doNothing() {}
  } 
```

它用。***** ** ******编辑****** ** *** *****

```
<input type='button' id="drop" onClick="addMyMarker();"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:53:29.160

尝试使用全局`marker`变量而不是创建一个新变量...

```
function addMyMarker() { //function that will add markers on button click
    marker = new google.maps.Marker({ 
```

# ios - XMPPFramework - 检索 Openfire 消息档案

> ID：14173251
> 
> 赞同：5
> 
> 时间：2013-01-05T15:31:07.220
> 
> 标签：ios, objective-c, xmpp, openfire, xmppframework

花了几个小时试图解决这个问题，我很难过！

试图在我的 OpenFire 服务器上获取 2 个用户之间的聊天历史记录，我读到需要我的插件来执行此操作。

因此，我在我的 OpenFire 服务器上安装了“Open Archive”插件并发送以下 XML（根据 XMPP-0136 协议文档）：

```
<iq type="get" id="page1">
   <retrieve xmlns="urn:xmpp:archive" with="username@server.com" start="1469-07-21T02:56:15Z">
      <set xmlns="http://jabber.org/protocol/rsm">
         <max>100</max>
      </set>
   </retrieve>
</iq> 
```

在代码中，这是通过以下方式实现的：

```
NSXMLElement *iQ = [NSXMLElement elementWithName:@"iq"];
[iQ addAttributeWithName:@"type" stringValue:@"get"];
[iQ addAttributeWithName:@"id" stringValue:@"page1"];

NSXMLElement *retrieve = [NSXMLElement elementWithName:@"retrieve"];
[retrieve addAttributeWithName:@"xmlns" stringValue:@"urn:xmpp:archive"];
[retrieve addAttributeWithName:@"with" stringValue:@"username@server.com"];
[retrieve addAttributeWithName:@"start" stringValue:@"1469-07-21T02:56:15Z"];

NSXMLElement *set = [NSXMLElement elementWithName:@"set"];
[set addAttributeWithName:@"xmlns" stringValue:@"http://jabber.org/protocol/rsm"];
NSXMLElement *max = [NSXMLElement elementWithName:@"max"];
max.stringValue = @"100";
[set addChild:max];

[retrieve addChild:set];
[iQ addChild:retrieve];

[[[self appDelegate] xmppStream] sendElement:iQ]; 
```

返回以下错误：

```
<iq xmlns="jabber:client" type="error" id="page1" to="username@server.com">
   <error code="404" type="cancel">
      <item-not-found xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>
   </error>
</iq> 
```

我的 Xcode 项目可以成功地向我尝试接收聊天记录的用户发送/接收消息，所以我真的不知道我做错了什么。此外，该插件使我能够搜索聊天消息（通过 OpenFire 管理员）并获得成功的结果，因此它似乎正在工作并存储消息。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-12T06:52:37.867

如果您正在寻找聊天记录，我认为您必须将消息保存到核心数据并从那里检索它们。要使用 XMPPFramework 内置功能保存数据，您必须使用以下代码：

```
XMPPMessageArchivingCoreDataStorage *storage = [XMPPMessageArchivingCoreDataStorage   sharedInstance];
NSManagedObjectContext *moc = [storage mainThreadManagedObjectContext];

xmppMessageArchivingStorage = [XMPPMessageArchivingCoreDataStorage sharedInstance];
xmppMessageArchivingModule = [[XMPPMessageArchiving alloc] initWithMessageArchivingStorage:xmppMessageArchivingStorage];
[xmppMessageArchivingModule activate:xmppStream];
[xmppMessageArchivingModule  addDelegate:self delegateQueue:dispatch_get_main_queue()]; 
```

现在您必须通过以下方式从核心数据中检索该消息：

```
-(void)loadarchivemsg
{  
    XMPPMessageArchivingCoreDataStorage *storage = [XMPPMessageArchivingCoreDataStorage sharedInstance];
    NSManagedObjectContext *moc = [storage mainThreadManagedObjectContext];
    NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"XMPPMessageArchiving_Message_CoreDataObject"
                                                      inManagedObjectContext:moc];
    NSFetchRequest *request = [[NSFetchRequest alloc]init];

    NSString *predicateFrmt = @"bareJidStr like %@ ";
    NSPredicate *predicate = [NSPredicate predicateWithFormat:predicateFrmt, chatWithUser];
    request.predicate = predicate;
    NSLog(@"%@",[[NSUserDefaults standardUserDefaults] stringForKey:@"kXMPPmyJID"]);
    [request setEntity:entityDescription];
    NSError *error;
    NSArray *messages_arc = [moc executeFetchRequest:request error:&error];

    [self print:[[NSMutableArray alloc]initWithArray:messages_arc]];
}

-(void)print:(NSMutableArray*)messages_arc{
    @autoreleasepool {
        for (XMPPMessageArchiving_Message_CoreDataObject *message in messages_arc) {
            NSXMLElement *element = [[NSXMLElement alloc] initWithXMLString:message.messageStr error:nil];
            NSLog(@"to param is %@",[element attributeStringValueForName:@"to"]);

            NSMutableDictionary *m = [[NSMutableDictionary alloc] init];
            [m setObject:message.body forKey:@"msg"];

            if ([[element attributeStringValueForName:@"to"] isEqualToString:chatWithUser]) {               
                [m setObject:@"you" forKey:@"sender"];
            }
            else {
                [m setObject:chatWithUser forKey:@"sender"];
            }

            [messages addObject:m];

            NSLog(@"bareJid param is %@",message.bareJid);
            NSLog(@"bareJidStr param is %@",message.bareJidStr);
            NSLog(@"body param is %@",message.body);
            NSLog(@"timestamp param is %@",message.timestamp);
            NSLog(@"outgoing param is %d",[message.outgoing intValue]);
            NSLog(@"***************************************************");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-17T11:01:51.613

请在以下位置获取详细的节详细信息：[https ://stackoverflow.com/a/29097289/2225439](https://stackoverflow.com/a/29097289/2225439)

它是平台独立的，您只需要了解 Stanza 的结构，并且可以根据您使用的库来创建它。

这是您需要发送以获取存档消息的一系列节。有关更多详细信息，您可以查看 XEP 0136 ( [http://xmpp.org/extensions/xep-0136.html#manual](http://xmpp.org/extensions/xep-0136.html#manual) )

请求

```
<iq type='get' id='mrug_sender@staging.openfire.com'>
       <list xmlns='urn:xmpp:archive'
               with='mrug_target_155@staging.openfire.com'>
        <set xmlns='http://jabber.org/protocol/rsm'>
            <max>6900</max>
        </set>
      </list>
   </iq> 
```

RES

```
<iq type="result" id="mrug_sender@staging.openfire.com" to="mrug_sender@staging.openfire.com/Psi">
<list xmlns="urn:xmpp:archive">
<chat with="mrug_target_155@staging.openfire.com" start="2014-06-07T06:52:26.041Z"/>
<chat with="mrug_target_155@staging.openfire.com" start="2014-06-07T07:06:53.372Z"/>
<set xmlns="http://jabber.org/protocol/rsm">
<first index="0">866</first>
<last>867</last>
<count>2</count>
</set>
</list>
</iq> 
```

请求

```
<iq type='get' id='mrug_sender@staging.openfire.com'>
    <retrieve xmlns='urn:xmpp:archive'  with='mrug_target_155@staging.openfire.com'  start='2014-06-07T06:52:26.041Z'>
     <set xmlns='http://jabber.org/protocol/rsm'>
       <max>8000</max>
     </set>
    </retrieve>
 </iq> 
```

RES

```
<iq type="result" id="mrug_sender@staging.openfire.com" to="mrug_sender@staging.openfire.com/Psi">
<chat xmlns="urn:xmpp:archive" with="mrug_target_155@staging.openfire.com" start="2014-06-07T06:52:26.041Z">
<from secs="0" jid="mrug_target_155@staging.openfire.com">
<body>Hello This is Cool</body>
</from>
<set xmlns="http://jabber.org/protocol/rsm">
<first index="0">0</first>
<last>0</last>
<count>1</count>
</set>
</chat>
</iq> 
```

获取所有对话列表

```
<iq type='get' id='mrug_sender@staging.openfire.com'>
       <list xmlns='urn:xmpp:archive'>
        <set xmlns='http://jabber.org/protocol/rsm'>
            <max>6900</max>
        </set>
      </list>
</iq> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-18T05:15:41.063

当您在请求中提及开始标签时，它与具有确切时间戳的聊天匹配，这就是它返回错误代码“404”或“500”的原因。我从我的请求中省略了开始标记并编写了以下代码，该代码返回与用户的整个聊天历史记录。

```
NSXMLElement *iq1 = [NSXMLElement elementWithName:@"iq"];
[iq1 addAttributeWithName:@"type" stringValue:@"get"];
[iq1 addAttributeWithName:@"id" stringValue:@"pk1"];

NSXMLElement *retrieve = [NSXMLElement elementWithName:@"retrieve" xmlns:@"urn:xmpp:archive"];

[retrieve addAttributeWithName:@"with" stringValue:@"rahul@vishals-mac-pro.local"];
NSXMLElement *set = [NSXMLElement elementWithName:@"set" xmlns:@"http://jabber.org/protocol/rsm"];
NSXMLElement *max = [NSXMLElement elementWithName:@"max" stringValue:@"100"];

[iq1 addChild:retrieve];
[retrieve addChild:set];
[set addChild:max];
[[[self appDelegate] xmppStream] sendElement:iq1]; 
```

在这里，这将返回用户 Rahul 和当前登录用户之间的 XML 响应中的整个聊天历史记录。

有关更多详细信息，请参阅此博客[http://question.ikende.com/question/363439343236313430](http://question.ikende.com/question/363439343236313430)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T15:18:08.367

XMPPFramework 实现了 XEP-0136。您是否尝试过使用[XMPPMessageArchiving](https://github.com/robbiehanson/XMPPFramework/blob/master/Extensions/XEP-0136/XMPPMessageArchiving.h)设置首选项或将服务器的存档同步到客户端？

# python - 使用 QWebElement 解析 HTML，如何提取图像？

> ID：14173255
> 
> 赞同：2
> 
> 时间：2013-01-05T15:31:22.960
> 
> 标签：python, qt, webkit, qtwebkit, qwebelement

我很难使用 QWebElement。作为练习，我想从[http://www.google.com](http://www.google.com)页面捕获“Google”徽标。图像在 中`<div id="hplogo" ...>`，但我不知道如何提取它。我应该如何在下面的代码中使用“doc”QWebElement？（“CSS 选择器”对我来说是晦涩的行话）。谢谢你。

```
from PyQt4.QtGui import QApplication
from PyQt4.QtWebKit import QWebView
from PyQt4.QtCore import QUrl

app = QApplication([])
view = QWebView()
view.load(QUrl("http://google.com"))
view.show()
doc = view.page().currentFrame().documentElement()   # run this after 'loadFinished' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:22:02.443

要获取“Google”徽标的 URL，请执行以下操作：

```
elem = doc.findFirst("div#hplogo")
qstring = elem.attribute('style')
regexp = QRegExp("^(.*:)?url\((.*)\)")
if regexp.indexIn(qstring) > -1:
    imageURL = regexp.capturedTexts()[-1] 
```

它返回`imageURL = "/images/srpr/logo1w.png"`。在这种情况下，有必要使用正则表达式，因为 URL 是字符串的一部分。要获取图像并将其显示在标签上，请执行以下操作：

```
request = QNetworkRequest(QUrl("http://www.google.com/images/srpr/logo1w.png"))
reply = view.page().networkAccessManager().get(request)
byte_array = reply.readAll()
image = QImage()
image.loadFromData(byte_array)
label = QLabel()
label.setPixmap(QPixmap(image))
label.show() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T15:37:07.607

您只需提取包含图像`src`的 HTML 标记的属性，`<img/>`然后使用该`src`属性创建图像。

```
imgTags = doc.findAll("img")
imgRightTag = QWebElement()

# Find the right <img/> tag and put it in imgRightTag

imgURL = "http://www.google.com" + imgRightTag.attribute("src")
image = QImage(imgURL) 
```

# three.js - 带有 OrthographicCamera 的 THREE.js CanvasRenderer

> ID：14173256
> 
> 赞同：1
> 
> 时间：2013-01-05T15:31:24.910
> 
> 标签：three.js

我刚刚开始尝试使用 THREE.js。我正在尝试渲染器和相机的不同组合。

我可以使用 WebGLRenderer 和 OrthographicCamera 或 CanvasRenderer 和 PerspectiveCamera 渲染一个简单的动画。但是，如果我将 CanvasRenderer 与 OrthographicCamera 一起使用，我看不到任何图像渲染。

CanvasRenderer 是否应该与 OrthographicCamera 一起使用？有效的小提琴在这里：

[http://jsfiddle.net/PXxLq/](http://jsfiddle.net/PXxLq/) - WebGL/Orthographic - 好的

[http://jsfiddle.net/fXsKq/](http://jsfiddle.net/fXsKq/) - 画布/透视 - 好的

这是失败的代码：

```
<html>
<head>
<script src="https://raw.github.com/mrdoob/three.js/master/build/three.js"></script>
</head>

<body>
<script>

SCREEN_WIDTH = 200;
SCREEN_HEIGHT = 200;

var ASPECT = SCREEN_WIDTH / SCREEN_HEIGHT, NEAR = 1, FAR = 1000;

var scene = new THREE.Scene();
// PerspectiveCamera good with CanvasRenderer
//var camera = new THREE.PerspectiveCamera(75, ASPECT, NEAR, FAR);
var camera = new THREE.OrthographicCamera( -SCREEN_WIDTH / 2, SCREEN_WIDTH / 2,   SCREEN_HEIGHT / 2, -SCREEN_HEIGHT / 2, NEAR, FAR );

var renderer = new THREE.CanvasRenderer();
// WebGLRenderer good with OrthographicCamera
//var renderer = new THREE.WebGLRenderer();

renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);
document.body.appendChild(renderer.domElement);

var geometry = new THREE.CubeGeometry(50,50,50);
var material = new THREE.MeshBasicMaterial({color: 0x000000, wireframe: true });
var cube = new THREE.Mesh(geometry, material);

scene.add(cube);
camera.position.z = 100;

function render() { 
    requestAnimationFrame(render);
    cube.rotation.y += 0.01;
    renderer.render(scene, camera);
} 

render();

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:35:57.673

对于`CanvasRenderer`，使用 时`OrthographicCamera`，`near`平面必须为负。

这似乎是一个错误。

编辑：这个错误已被修复。近平面现在应该总是积极的。

三.js r.55

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-11T09:53:25.623

*   参考：WebGLRenderer() & PerspectiveCamera()
*   项目清单

    ```
    <script src="build/three.min.js"></script>
    <script>
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera
        ( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );

        var renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild( renderer.domElement );

        var geometry = new THREE.BoxGeometry( 1, 1, 1 );
        var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
        var cube = new THREE.Mesh( geometry, material );
        scene.add( cube );

        camera.position.z = 5;

        var render = function () {
            requestAnimationFrame( render );

            cube.rotation.x += 0.1;
            cube.rotation.y += 0.1;

            renderer.render(scene, camera);
        };

        render();
    </script> 
    ```

# c++ - 在 C++ 中为 OSX 创建共享库

> ID：14173260
> 
> 赞同：18
> 
> 时间：2013-01-05T15:32:00.157
> 
> 标签：c++, linux, macos, stl, shared-libraries

我刚开始用 C++ 编程，我意识到我不得不一遍又一遍地编写相同的代码（主要是实用程序函数）。

因此，我正在尝试创建一个共享库并将其安装在 PATH 中，以便我可以在需要时使用实用程序函数。

这是我到目前为止所做的：-

创建一个`utils.h`包含以下内容的文件：-

```
#include<iostream>
#include<string>
std::string to_binary(int x); 
```

创建一个`utils.cpp`包含以下内容的文件：-

```
#include "utils.h"

std::string to_binary(int x) {
  std::string binary = "";
  while ( x > 0 ) {
    if ( x & 1 ) binary += "1";
    else binary += "0";
    x >>= 1;
  }
  return binary;
} 
```

按照此处提到的步骤操作：- [http://www.techytalk.info/c-cplusplus-library-programming-on-linux-part-two-dynamic-libraries/](http://www.techytalk.info/c-cplusplus-library-programming-on-linux-part-two-dynamic-libraries/)

*   创建库对象代码：`g++ -Wall -fPIC -c utils.cpp`

但是由于上面的链接是针对 Linux 的，所以它在 OSX 上并不适用。有人可以建议阅读资源或建议我如何在 OSX 机器的路径中编译和设置这些对象吗？

另外，我猜应该有一种方法可以使这个跨平台（即编写一组指令（bash 脚本）或 Makefile），以便我可以用来跨平台轻松编译它。有什么提示吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-09T07:35:06.413

使用`-dynamiclib`选项在 OS X 上编译动态库：

```
g++ -dynamiclib -o libutils.dylib utils.cpp 
```

然后在您的客户端应用程序中使用它：

```
g++ client.cpp -L/dir/ -lutils 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-05T17:01:02.913

您发布的链接使用 C 和 C 编译器。由于您正在构建 C++：

```
g++ -shared -o libYourLibraryName.so utils.o 
```

# vhdl - VHDL交换两个值

> ID：14173266
> 
> 赞同：1
> 
> 时间：2013-01-05T15:32:26.257
> 
> 标签：vhdl, swap

我想交换 and 的值`input0`，`input1`并输出较小的值。当我在Modelsim中模拟我的项目时，信号输出的波形是红线。我的错误是什么？

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity MF is
    port (clk : in std_logic;
          input0: in std_logic_vector(2 downto 0);
          input1: in std_logic_vector(2 downto 0));
end MF;

architecture Behavioral of MF is
    signal bubble0: std_logic_vector(2 downto 0);
    signal bubble1: std_logic_vector(2 downto 0);                               

begin
    bubble0 <= input0;               
    bubble1 <= input1;
    output <= bubble0;                        -- my output
    process(clk)
    begin
        if rising_edge(clk) then
             if bubble0 > bubble1 then        -- swap
             bubble1 <= bubble0;
             bubble0 <= bubble1;
             end if;                                        
        end if;
    end process;
end Behavioral; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:47:41.483

我看到几个问题：

1）您正在异步和在进程内为bubble0和bubble1分配值（这是一场“总线斗争”，每个信号上有多个驱动程序，这在VHDL中*是*合法的，但您必须知道您是什么做...通常这用于制作三态总线，但是您的两个任务都在不断地驱动信号，这可能在解析信号时导致“未定义”状态）。

2）在进程内的 if 语句的所有情况下，您都没有为bubble0 和bubble1 赋值。

3) 不能直接比较两个 std_logic_vector 值的数值大小，首先需要将它们转换为适当的数值类型（例如有符号或无符号）。

目前还不清楚你希望你的输出如何表现，但也许像下面这样的东西会让你走得更远......这会在时钟的每个上升沿适当地更新气泡信号：

```
begin
    output <= bubble0;                        -- my output
    process(clk)
    begin
        if rising_edge(clk) then
             if unsigned(input0) > unsigned(input1) then        -- swap
                 bubble1 <= input0;
                 bubble0 <= input1;
             else
                 bubble0 <= input0;               
                 bubble1 <= input1;
             end if;                                        
        end if;
    end process;
end Behavioral; 
```

# c - FIFO 文件和读/写

> ID：14173268
> 
> 赞同：4
> 
> 时间：2013-01-05T15:32:38.817
> 
> 标签：c, linux, fifo

周一在我的实验室之前，我一直试图对 FIFO 和这种低级 I/O 有所了解，但我遇到了这种我不太了解的情况。

**该计划应：**

服务器：

*   创建 FIFO，
*   发送 5 条消息：“消息 #i”，间隔为 5 秒，
*   删除 FIFO，

客户：

*   从 FIFO 读取并显示消息，
*   如果 6 秒内没有 msg，则终止，

但是它确实进行了通信，客户端显示的并不完全是我发送给他的内容，更重要的是，每次新消息到达时似乎都从头开始阅读。我一直试图弄清楚，很长一段时间，它似乎与文档所说的不符......请帮忙！:(

**服务器**

```
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>  
#include <string.h>
#include <sys/stat.h>
#include <unistd.h>

int main(int argc, char* argv[])
{       
    int s2c, c2s, i; 
    char fifo_name1[] = "/tmp/fifo1";
    char fifo_name2[] = "/tmp/fifo2";
    char msg[80], buf[10];
    struct stat st;

    // if no fifos, create 'em
    if (stat(fifo_name1, &st) != 0)
        mkfifo(fifo_name1, 0666);
    if (stat(fifo_name2, &st) != 0)
        mkfifo(fifo_name2, 0666);

    s2c= open(fifo_name1, O_WRONLY);
    c2s= open(fifo_name2, O_RDONLY);

    // start sending messages, with 5s interval
    for (i=0; i<5; i++)
    {
        printf("Message #%d \n", i);

        strcat(msg, "Message #"); 
        strcat(msg, itoa(i, buf, 10));
        strcat(msg, "\0"); 

        write(s2c, msg, strlen(msg)+1);

        sleep(5);
    }

    // delete fifos
    unlink(fifo_name1);
    unlink(fifo_name2);
    printf("server exit successfully");
    return EXIT_SUCCESS;
} 
```

**客户**

```
#include <stdio.h>
#include <fcntl.h>
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char* argv[])
{
    int c2s, s2c, c=0;
    char buf[10];

    char fifo_name1[] = "/tmp/fifo1";
    char fifo_name2[] = "/tmp/fifo2";
    s2c= open(fifo_name1, O_RDONLY);
    c2s= open(fifo_name2, O_WRONLY);

    // receive messages
    while (1)
    {
        if (read(s2c, &buf, sizeof(char)*10) > 0)
        {
            printf("%s \n", buf);
            c=0;
        }
        sleep(1);
        c++;    
        if (c>6) 
            break;
    }

    printf("client exit successfully");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T15:37:04.997

`strcat(msg, "Message #");`总是附加到已经 in 的字符串的末尾`msg`，并且在循环期间永远不会重置字符串。将其替换`strcpy(msg, "Message #");`为从头开始每条新消息。

# python - 警告：IPython History 需要 SQLite，您的历史不会被保存

> ID：14173271
> 
> 赞同：15
> 
> 时间：2013-01-05T15:33:05.367
> 
> 标签：python, sqlite, ipython, pysqlite

嗨，我正在使用 Ubuntu 版本 12.10（量子）32 位和 Linux 内核 3.5.0-21-generic。我正试图让 IPython 的历史工作。我已经使用 pythonbrew 和虚拟环境进行了设置。在那里我使用 pip 安装 IPython。目前，当我在终端中启动 IPython 时，我得到：

```
WARNING: IPython History requires SQLite, your history will not be saved
Python 2.7.3 (default, Nov  8 2012, 18:25:10) 
Type "copyright", "credits" or "license" for more information.

IPython 0.13.1 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details. 
```

搜索第一行的警告，我发现[了这个问题报告](https://github.com/gotcha/ipdb/issues/34)，所以我回去安装了以下内容：

```
sudo apt-get install libsqlite0 libsqlite0-dev libsqlite3-0 libsqlite3-dev 
```

然后使用 pip 删除并重新安装 pysqlite

```
pip uninstall pysqlite
pip install pysqlite 
```

之后我想我会通过导入模块来检查安装：

```
Python 2.7.3 (default, Nov  8 2012, 18:25:10) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sqlite3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/me/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/sqlite3/__init__.py", line 24, in <module>
    from dbapi2 import *
  File "/home/me/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/sqlite3/dbapi2.py", line 27, in <module>
    from _sqlite3 import *
ImportError: No module named _sqlite3 
```

所以现在似乎找不到文件_sqlite3.so。那是我发现[这个 SO question](https://stackoverflow.com/questions/1210664/no-module-named-sqlite3)的时候。它要么不存在，要么不在我的 PYTHONPATH 环境变量中。搜索文件，我得到：

```
$ locate _sqlite3.so
/home/me/Desktop/.dropbox-dist/_sqlite3.so
/home/me/epd/lib/python2.7/lib-dynload/_sqlite3.so
/usr/lib/python2.7/lib-dynload/_sqlite3.so 
```

所以文件在那里，但是当我查看我的python路径时：

```
import sys
for p in sys.path:
    print p 
```

上述包含 _sqlite3.so 的路径均未包含在我的 PYTHONPATH 中。对于傻笑，我在终端中将路径 /usr/lib/python2.7/lib-dynload 添加到我的 PYTHONPATH 中，然后尝试再次导入 sqlite3：

```
Python 2.7.3 (default, Nov  8 2012, 18:25:10) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.path.append("/usr/lib/python2.7/lib-dynload")
>>> import sqlite3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/me/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/sqlite3/__init__.py", line 24, in <module>
    from dbapi2 import *
  File "/home/me/.pythonbrew/pythons/Python-2.7.3/lib/python2.7/sqlite3/dbapi2.py", line 27, in <module>
    from _sqlite3 import *
ImportError: /usr/lib/python2.7/lib-dynload/_sqlite3.so: undefined symbol: PyUnicodeUCS4_DecodeUTF8 
```

哦哦。现在我完全被困住了。谁能帮我吗？我还阅读了一些我可能需要重建 Python 的地方。我不知道如何在 pythonbrew 中做到这一点。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-05T21:06:05.380

> 我还阅读了一些我可能需要重建 Python 的地方。

这是对的。SQLite 是标准库的一部分，是在编译 Python 时构建的。标准库中有一些“可选”部分，如果在构建时缺少依赖项，Python 将简单地跳过这些部分（不幸的是，只有很少的警告），而 sqlite 就是其中之一。你应该能够只安装`libsqlite3-dev`，然后重建 Python，你应该已经设置好了。密切关注构建消息，因为它们会报告由于缺少依赖项而跳过了哪些模块。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-06T04:39:40.540

感谢 minrk 为我指明了正确的方向。我所要做的就是重建python。我已经为那些使用 pythonbrew 的人概述了以下步骤。请注意，我已经`libsqlite3-dev`在问题部分安装了该软件包。

首先，使用正确版本的 python 和加载的虚拟环境运行命令：

```
$ pip freeze -l > requirements.txt 
```

这为我们提供了一个文本文件列表，其中列出了已在 pythonbrew 中的这个特定 python 版本的虚拟环境中安装的所有 pip 包。然后我们从 pythonbrew 中删除 python 的版本并重新安装它（这是“重建 python”步骤）：

```
$ pythonbrew uninstall 2.7.3
$ pythonbrew install 2.7.3 
```

之后，我们切换到新安装的 python 版本 2.7.3 并创建一个新的虚拟环境（我称之为“sci”）：

```
$ pythonbrew switch 2.7.3
$ pythonbrew venv create sci
$ pythonbrew venv use sci 
```

理想情况下，您应该能够运行以下命令：

```
$ pip install -r requirements.txt 
```

并且根据[这个](http://suvashthapaliya.com/blog/2012/01/sandboxed-python-virtual-environments/)pip 应该重新安装您在虚拟环境中拥有的所有模块，然后我们才能破坏该版本的 python (2.7.3)。无论出于何种原因，它对我都不起作用，所以我使用 pip 个性手动安装了所有模块。

```
$ ipython --pylab

Python 2.7.3 (default, Jan  5 2013, 18:48:27) 
Type "copyright", "credits" or "license" for more information.

IPython 0.13.1 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details. 
```

并且 IPython 历史有效！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-12T11:04:00.010

什么对我有用（使用 osx + homebrew + brewed python）：

```
# Reinstall Python 2.7 with sqlite
brew remove python
brew install readline sqlite gdbm --universal
brew install python --universal --framework

# Reinstall iPython with correct bindings
pip uninstall ipython    
pip install ipython 
```

你应该很高兴。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-13T08:44:14.223

当 python 与 pyenv 一起安装时，此警告出现在 macOS 上。默认情况下，它安装没有 sqlite 的 python。这些命令重新安装带有 sqlite 支持的 python：

```
pyenv uninstall 3.7
CFLAGS="-I$(xcrun --show-sdk-path)/usr/include" pyenv install 3.7 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-06-13T08:46:42.143

您应该使用 sqlite 支持重建您的 python

```
sudo apt-get install libsqlite3-dev
wget https://www.python.org/ftp/python/2.7.15/Python-2.7.15.tgz
tar -xvf Python-2.7.15.tgz
cd Python-2.7.15
./configure
make
sudo make install 
```

重新创建您的虚拟环境，您应该一切顺利

```
rmvirtualenv venv
mkvirtualenv -p python2 venv
workon venv
pip install -r requirements.txt
# or
pip install ipython 
```

# flash - adobe flash 专业版 cs5 或 cs6 如何创建垂直线性渐变

> ID：14173272
> 
> 赞同：1
> 
> 时间：2013-01-05T15:33:12.800
> 
> 标签：flash, flash-cs5, gradient, flash-cs6

如果你去颜色选择器并选择一个线性渐变，你总是会得到一个水平线性渐变。如何在 adobe flash Professional cs5 或 6 中将渐变旋转 90 度以创建从上到下移动的渐变？

我的问题源于无法在圆角矩形上创建垂直线性渐变。我可以变换和旋转按钮以获得正确的渐变，但按钮边缘会变形。

我开始：

![在此处输入图像描述](../Images/03cc9f01740a9653fb81840385fc01e2.png)

我以：

![在此处输入图像描述](../Images/ea16e17e31ab684d59ada09fc80a412e.png)

这是我正在使用的颜色选择器。我没有看到渐变的角度选项。

![选色器](../Images/40bed68588532c72cb995a10beedb080.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T14:04:23.877

除了您已经找到的渐变变换工具 (F) 之外，您还可以按住并拖动油漆桶 (K) 来设置渐变的方向。如果您然后单击新填充，它将自动缩放渐变以完全适合容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:48:13.127

**更新**：愚蠢的我有一个叫做“渐变变换工具”的工具。热键“f”。布拉格。

我最终做的是

1.  将我的圆角矩形转换为影片剪辑符号
2.  使用按钮表单添加遮罩层
3.  在蒙版下方创建具有正确旋转渐变的第二层。
4.  渲染我的新符号的一个实例。

有点烦人，但它有效。仍然很想知道是否有更简单的方法来做到这一点。

# c - 从文件读取时不浮动。C程序

> ID：14173274
> 
> 赞同：2
> 
> 时间：2013-01-05T15:33:53.057
> 
> 标签：c

我在这里坚持使用我的程序，它从文本文件中读取数据，但它没有将浮点部分作为浮点数。从我的 .txt 文件中读取后，它会打印 43.00 而不是 43.23。我哪里做错了？

```
 dir[k].age=atol(strtok(NULL,","));
    dir[k].weight=atol(strtok(NULL,","));
    dir[k].height=atol(strtok(NULL,"\n")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T15:35:54.483

```
dir[k].weight=atol(strtok(NULL,","));
dir[k].height=atol(strtok(NULL,"\n")); 
```

[atol](http://linux.die.net/man/3/atol)读取`long`. 你可能想要[atof](http://linux.die.net/man/3/atof)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T15:36:01.300

```
dir[k].weight=atol(strtok(NULL,","));
dir[k].height=atol(strtok(NULL,"\n")); 
```

您正在使用转换为整数的函数，因此不知道如何处理小数部分。`strtof`与功能相反，使用它甚至允许进行错误检查`ato*`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T15:38:55.293

这里：

```
dir[k].weight=atol(strtok(NULL,","));
dir[k].height=atol(strtok(NULL,"\n")); 
```

您正在读取值

# apache - Apache重定向到子域

> ID：14173275
> 
> 赞同：0
> 
> 时间：2013-01-05T15:34:08.593
> 
> 标签：apache, url-rewriting, webserver

到目前为止，我的网站 URL 是按照这种模式[https://www.xyz.com](https://www.xyz.com)，我从中提供静态和动态内容。[https://www.xyz.com](https://www.xyz.com)默认为主页[https://www.xyz.com/static/index.html](https://www.xyz.com/static/index.html)，动态内容来自[https://www.xyz.com/dyna/login。 .jsp](https://www.xyz.com/dyna/login.jsp) _

最近我添加了一个额外的网络服务器并注册了子域，我计划通过 http URL 方案而不是 https 提供静态内容，并且只提供来自 https URL 的动态页面。所以，如果用户输入[https://www.xyz.com](https://www.xyz.com)，应该重定向到[http://static.abc.com](http://static.abc.com)。

网络服务器：Apache 2.x

我的查询是：

一个。如何配置 apache 以将**https://www.xyz.com**上的请求重定向到**http://static.abc.com**，同时确保不会收到对[https://www.xyz.com/dyna/login.jsp](https://www.xyz.com/dyna/login.jsp)的请求重定向？这会有任何明显的性能开销吗？

湾。如果在这种情况下从 http 重定向到 https 并从 https 页面启动 http 屏幕会导致任何安全警告？请注意，我不打算将任何数据从 http 提交到 https，反之亦然，它只是 URL 重定向或链接。

C。如何使重定向可缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:39:47.670

使用 .htaccess 将[https://www.example.com/static/index.html](https://www.example.com/static/index.html)定义为[https://www.example.com/index.html](https://www.example.com/index.html)

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain/static/index.html [NC]
RewriteRule ^(.*)$ domain/index.html$1 [L,R=301] 
```

# apache - Apache CXF 主干构建错误：未找到提供程序 com.sun.tools.xjc.addon.apache_cxf.ts.ToStringPlugin

> ID：14173285
> 
> 赞同：0
> 
> 时间：2013-01-05T15:35:20.257
> 
> 标签：apache, maven, cxf

只是想知道在尝试从主干构建 Apache CXF 时如何解决以下错误：

```
 **Exception in thread "main" java.util.ServiceConfigurationError: com.sun.tools.xjc.Plugin: Provider com.sun.tools.xjc.addon.apache_cxf.ts.ToStringPlugin not found**
        at java.util.ServiceLoader.fail(ServiceLoader.java:214)
        at java.util.ServiceLoader.access$300(ServiceLoader.java:164)
        at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:348)
        at java.util.ServiceLoader$1.next(ServiceLoader.java:428)
        at com.sun.tools.xjc.Options.findServices(Options.java:924)
        at com.sun.tools.xjc.Options.getAllPlugins(Options.java:357)
        at com.sun.tools.xjc.reader.AbstractExtensionBindingChecker.<init>(AbstractExtensionBindingChecker.java:94)
        at com.sun.tools.xjc.reader.ExtensionBindingChecker.<init>(ExtensionBindingChecker.java:77)
        at com.sun.tools.xjc.ModelLoader$XMLSchemaParser.parse(ModelLoader.java:257)
        at com.sun.xml.xsom.impl.parser.NGCCRuntimeEx.parseEntity(NGCCRuntimeEx.java:337)
        at com.sun.xml.xsom.impl.parser.ParserContex

t.parse(ParserContext.java:124)
    at com.sun.xml.xsom.impl.parser.ParserContext.<init>(ParserContext.java:96)
    at com.sun.xml.xsom.parser.XSOMParser.<init>(XSOMParser.java:125)
    at com.sun.tools.xjc.ModelLoader.createXSOMParser(ModelLoader.java:420)
    at com.sun.tools.xjc.ModelLoader.createXSOMParser(ModelLoader.java:428)
    at com.sun.tools.xjc.ModelLoader.createXSOM(ModelLoader.java:509)
    at com.sun.tools.xjc.ModelLoader.loadXMLSchema(ModelLoader.java:375)
    at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:167)
    at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:113)
    at com.sun.tools.xjc.Driver.run(Driver.java:313)
    at org.apache.cxf.maven_plugin.AbstractXSDToJavaMojo.execute(AbstractXSDToJavaMojo.java:307)
    at org.apache.cxf.maven_plugin.XSDToJavaMojo.execute(XSDToJavaMojo.java:42)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:38:46.293

我想我在使用 JDK6 构建 cxf 项目时遇到过类似的情况。[在这里](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)查看有关codegen内容以及如何构建的信息。

# mysql - 实时分析 mysql - 查找长时间运行的查询

> ID：14173288
> 
> 赞同：1
> 
> 时间：2013-01-05T15:35:41.567
> 
> 标签：mysql, linux

从命令行（linux）我怎样才能在长时间运行的mysql查询中归零？

例如，我可以在 linux 机器上使用“top”，然后看到 mysqld 占用了大量内存。是否有任何 mysql 命令行命令可以用来深入了解并缩小罪魁祸首的查询范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:37:59.870

[mytop](http://jeremy.zawodny.com/mysql/mytop/)显示当前正在运行的查询。您还可以告诉 mysql 创建一个慢日志，即所有查询的日志需要超过一定时间才能完成。

# mysql - rails服务器错误，mysql

> ID：14173290
> 
> 赞同：1
> 
> 时间：2013-01-05T15:35:47.497
> 
> 标签：mysql, ruby-on-rails, ruby, rubygems, webrick

我是 RoR 编程新手。我在尝试在简单的 RoR 项目上启动 webrick 网络服务器时遇到错误，同时在提示命令行中键入以下代码：

“轨道服务器”

我收到了这个错误：

```
C:\Users\dell\sites\simple_cms>rails s
C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.
rb:2:in `require': 126:The specified module could not be found.  - C:/Ruby193/lib/ruby/gems/1.9
.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so (LoadError)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/m
ysql2/mysql2.rb:2:in `<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/m
ysql2.rb:9:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/m
ysql2.rb:9:in `<top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runti
me.rb:68:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runti
me.rb:68:in `block (2 levels) in require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runti
me.rb:66:in `each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runti
me.rb:66:in `block in require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runti
me.rb:55:in `each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runti
me.rb:55:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:12
8:in `require'
        from C:/Users/dell/sites/simple_cms/config/application.rb:7:in `<top (re
quired)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/comman
ds.rb:53:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/comman
ds.rb:53:in `block in <top (required)>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/comman
ds.rb:50:in `tap'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/comman
ds.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

我从这里（和许多其他人）尝试了解决方案： [Ruby mysql2 Error](https://stackoverflow.com/questions/9936523/ruby-mysql2-error) [http://railsforum.com/viewtopic.php?id=50501](http://railsforum.com/viewtopic.php?id=50501) 他们没有用。

我的细节：

```
windows 7 64 bit
mysql  Ver 14.14 Distrib 5.5.28, for Win64 (x86)
ruby 1.9.3p327 (2012-11-10) [i386-mingw32]
Rails 3.2.9
gem 1.8.24 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:15:14.893

由于此链接，提示命令：“rails server”再次运行：

[http://blog.mmediasys.com/2011/07/07/installing-mysql-on-windows-7-x64-and-using-ruby-with-it/](http://blog.mmediasys.com/2011/07/07/installing-mysql-on-windows-7-x64-and-using-ruby-with-it/)

这对于在 Windows 7 X64 上正确安装 mysql 和 rails 非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:41:11.170

您需要从 MySql 安装目录中复制**libmysql.dll**并将其粘贴到**ruby​​193/bin** ....

# c++ - !isdigit 可以用来检查 int 中的字母吗？

> ID：14173297
> 
> 赞同：-3
> 
> 时间：2013-01-05T15:36:35.300
> 
> 标签：c++, int

我在笔记中发现了一个函数，上面写着：

```
int isdigit(int c); 
```

`true`如果`c`是数字则返回。

但是当我在eclipse中不断出现我找不到的错误时。

到目前为止我的代码：

```
for(;;) {
    if (int !isdigit(int(library[count].tele))) { // if a letter,
        printf("Please enter numbers only.");
        count --;
        Menu();
    }
    else
        break;
} 
```

`library[count].tele`是类型`int`（在结构中）。

我要做的就是检查电话号码中没有字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:47:04.457

`isdigit`需要一个`int`参数，因为在原始 C 中，将字符代码处理为整数，以便有足够的范围来编码`EOF`为不能作为字符出现的值。

在 C++ 中，您最好将其包装起来以避免非 ASCII 字符的未定义行为，例如

```
bool isDigit( char const c )
{
    return !!::isdigit( (unsigned char)c );
} 
```

它检查单个字符

为了检查一个字符串，你可以依次检查每个字符：

```
bool isDigits( string const& s )
{
    for( char c : s )
    {
        if( !isDigit( c ) ) { return false; }
    }
    return true;
} 
```

此解决方案依赖于基于 ASCII 编码的假设，但实际上您在 2013 年可能遇到的所有编码都基于 ASCII

* * *

“bang bang”`!!`避免了使用最常用的 c++ 编译器 Visual c++ 的愚蠢警告。为此，它不能用演员表代替。除了愚蠢的警告抑制之外，不需要这种显式转换：最终效果与语言保证隐式转换相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:43:10.197

是的，您可以使用`isdigit`它。但是，您必须分别应用`isdigit`到输入字符串中的每个字符，并根据它返回的内容做出决定。

你说的`library[count].tele`是类型`int`。当值存储在 中时`int`，要弄清楚它是否包含任何非数字（它不能）为时已晚。因此，必须在从 string 转换为`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:13:49.020

将`!isdigit( ch )`测试`ch`不是数字字符（'0' - '9'）。这与测试*字母*不同，因为它将`true`针对所有非数字字符，其中不仅包括字母。

在这种情况下，这实际上可能`!isdigit( ch )`正是您想要的，但如果您想专门检查字母，您将使用`isalpha( ch )`.

如果您想一次性检查整个字符串中的有效字符（即没有循环），您可以简单地使用：

```
if( strspn( telehone_num, "0123456789" != strlen(telephone_num) ) 
{ 
    printf("Please enter numbers only.");
    Menu();
} 
```

其中 phone_num 是 C 字符串（不是 int）。当然，既然您标记了这个 C++ 而不是 C，那么使用 std::string 可能会有更好的解决方案。

除此之外，您可能会考虑您可能希望允许的不同地区的电话号码的某些约定。例如，在英国，区号和本地号码之间用空格分开是很常见的，例如：

```
01225 123456 
```

此外，国际用户可能会将数字表示为：

```
+44 (0)1225 123456 
```

意思是“如果从英国境外拨打，请拨打本地国际电话代码，然后拨打 44，然后拨打区号，省略前导零，然后拨打用户号码”。仅用数字很难传达这么多信息。除非是机器而不是人来拨打号码，否则有时最好让用户输入他们喜欢的任何内容。

# c++ - 调用“AnimationSet::AnimationSet()”没有匹配的函数

> ID：14173298
> 
> 赞同：0
> 
> 时间：2013-01-05T15:36:43.680
> 
> 标签：c++, function, call, match

我只是在做我的 DrawObject 构造函数，并不断遇到这个错误：

```
C:\CodeBlocks\SDLGame\DrawObject.cpp|3|error: no matching function for call to 'AnimationSet::AnimationSet()'|
C:\CodeBlocks\SDLGame\DrawObject.cpp|3|note: candidates are:|
C:\CodeBlocks\SDLGame\AnimationSet.h|9|note: AnimationSet::AnimationSet(int)|
C:\CodeBlocks\SDLGame\AnimationSet.h|9|note:   candidate expects 1 argument, 0 provided|
C:\CodeBlocks\SDLGame\AnimationSet.h|5|note: AnimationSet::AnimationSet(const AnimationSet&)|
C:\CodeBlocks\SDLGame\AnimationSet.h|5|note:   candidate expects 1 argument, 0 provided| 
```

这是我的动画集：

```
class AnimationSet
{
    public:

        AnimationSet(int animationCounter);
        virtual ~AnimationSet();
        int getCurrentFrame();
        void setCurrentFrame(int currentFrame);
        int getCurrentAnimation();
        void setCurrentAnimation(int currentAnimation);

    private:

        int currentFrame;
        int curretAnimation;
        Animation* animations;
}; 
```

我的 drawObject 构造函数：

```
drawObject::drawObject(char* name, char* surfaceFile, int xPos, int yPos, int drawLevel, bool willMoveVar, bool isSpriteVar, int animationNumber)
{
    animationSet = new AnimationSet(animationNumber);
    name = name;
    xPos = xPos;
    yPos = yPos;
    willMoveVar = willMove;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T15:39:00.373

您提供的代码没有显示错误在哪里，但我猜您在 中有一个`AnimationSet`成员对象`drawObject`，这意味着在没有默认构造函数的情况下，您必须在构造函数初始化程序列表中对其进行初始化。

```
drawObject::drawObject(char* name, char* surfaceFile, int xPos, int yPos, int drawLevel, bool willMoveVar, bool isSpriteVar, int animationNumber) :
animationSet(animationNumber) //I'm assuming this isn't a pointer
{
  name = name;
  xPos = xPos;
  yPos = yPos;
  willMoveVar = willMove;
} 
```

# android - Android 4 或更高版本上的 HTTP 连接出错？

> ID：14173312
> 
> 赞同：1
> 
> 时间：2013-01-05T15:37:56.677
> 
> 标签：android, http, android-4.0-ice-cream-sandwich, httpconnection

我正在尝试使用`HTTPCLient`. 奇怪的是，当我在自己的手机（带有 Android 2.3 的 HTC Desire HD）或带有 Android 2.1 的模拟器上运行该应用程序时，一切正常。但是，当我在装有 Android 4.1.2 的模拟器、HTC One X (Android 4.1.1) 或三星 Galaxy SIII (Android 4.0.4) 上运行我的应用程序时，应用程序崩溃了（请参阅帖子末尾的堆栈跟踪）。

有谁知道问题是什么？如果没有，还有其他方法可以调用我的 JSONfile 吗？也许那时它会起作用..

我真的希望有人可以帮助我，如果我的问题不够清楚，请告诉我。

RoosterWijzigingen.java （缺少一些代码使其更短，因为它与问题无关）：

```
package pws.sgdbroosterapp;

public class RoosterWijzigingen extends ListActivity {

    JSONArray jArray;
    String result = null;
    InputStream is = null;
    StringBuilder sb = null;
    JSONArray klassen = null;
    JSONArray mededelingen = null;
    JSONArray rooster = null;
    String status = null;
    String type = null;
    String datum = null;
    String versie = null;
    String minutenperlesuur = null;
    String afwezig = null;
    String mededeling = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState); 

        JSONObject json = JSONfunctions.getJSONfromURL("http://selenight.nl/Wijzigingen/2.1/wijzigingen.json");

        //new AsyncTask<Void, Void, String>() {

          //@Override
          //protected String doInBackground(Void... params) {
            // Runs on own thread 
            //JSONObject json = JSONfunctions.getJSONfromURL("http://selenight.nl/Wijzigingen/2.1/wijzigingen.json"); 

            //return json.toString(); 
          //} 

          //protected void onPostExecute(String result) { 
            // someMethod(Send json);
            //Log.v("Stackoverflow", result);
          //}

        //}.execute();

            try{
                // Getting Array of Klassen
                klassen = json.getJSONArray("klassen");

                // Status, type, datum, versie, minutenperlesuur, afwezig en medeleningen worden uit JSOn file gehaald en opgeslagen in Strings
                status = json.getString("status");
                                        //"failure";
                type = json.getString("type");
                datum = json.getString("datum");
                versie = json.getString("versie");
                minutenperlesuur = json.getString("minutenperlesuur");
                afwezig = json.getString("afwezig");
                mededelingen = json.getJSONArray("mededelingen");
                mededeling = mededelingen.toString();

            }catch(JSONException e)        {
                 Log.e("log_tag", "Error parsing data "+e.toString());
            }

        setContentView(R.layout.listplaceholder); 

            if(Integer.parseInt(minutenperlesuur) < 50){
            TextView verkortrooster = new TextView(this);
            verkortrooster.setText("---   Het is "+minutenperlesuur+"min-rooster!  --- ");
            }

            TextView statusdatum = new TextView(this);
            statusdatum.setText("Dit is versie "+versie+" van "+datum+". \n");

            TextView afwezigt = new TextView(this);
            afwezigt.setText("Afwezig:");

            TextView afwezigtextt = new TextView(this);
            afwezigtextt.setText(afwezig+"\n");

            TextView mededelingent = new TextView(this);
            mededelingent.setText("Mededelingen:");

            TextView mededelingentextt = new TextView(this);
            mededelingentextt.setText(mededeling+"\n \n");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(Menu.NONE, 0, 0, "Settings");
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
       switch (item.getItemId()) {
            case 0:
            startActivity(new Intent(this, Preferences.class));
            return true;
       }
       return false;
    }
 } 
```

JSONfunctions.java：

```
public class JSONfunctions {
    public static JSONObject getJSONfromURL(String url){
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;

        //http post
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        } catch(Exception e) { Log.e("log_tag", "Error in http connection" + e.toString()); }

        //convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        } catch(Exception e) { Log.e("log_tag", "Error converting result" + e.toString()); }

        try { jArray = new JSONObject(result); }
        catch(JSONException e) { Log.e("log_tag", "Error parsing data "+e.toString()); }

        return jArray;
    }
 } 
```

清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="pws.sgdbroosterapp"
        android:versionCode="1"
        android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:configChanges="orientation|keyboardHidden"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Roosterwijziging"
            android:configChanges="orientation|keyboardHidden"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name=".RoosterWijzigingen"
            android:configChanges="orientation|keyboardHidden"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name=".Preferences"
            android:configChanges="orientation|keyboardHidden"
            android:screenOrientation="portrait" >
        </activity>

        <uses-library
              android:name="android.test.runner"
              android:required="true" />
    </application>
    <uses-permission android:name="android.permission.INTERNET" /> 
 </manifest> 
```

堆栈跟踪：

```
01-05 15:12:49.995: E/log_tag(615): Error in http connection android.os.NetworkOnMainThreadException
01-05 15:12:49.995: E/log_tag(615): Error converting result java.lang.NullPointerException
01-05 15:12:49.995: E/log_tag(615): Error parsing data org.json.JSONException: End of input at character 0 of 
01-05 15:12:50.005: D/AndroidRuntime(615): Shutting down VM
01-05 15:12:50.005: W/dalvikvm(615): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-05 15:12:50.015: E/AndroidRuntime(615): FATAL EXCEPTION: main
01-05 15:12:50.015: E/AndroidRuntime(615): java.lang.RuntimeException: Unable to start activity ComponentInfo{pws.sgdbroosterapp/pws.sgdbroosterapp.RoosterWijzigingen}: java.lang.NullPointerException
01-05 15:12:50.015: E/AndroidRuntime(615):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-05 15:12:50.015: E/AndroidRuntime(615):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-05 15:12:50.015: E/AndroidRuntime(615):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-05 15:12:50.015: E/AndroidRuntime(615):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-05 15:12:50.015: E/AndroidRuntime(615):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-05 15:12:50.015: E/AndroidRuntime(615):  at android.os.Looper.loop(Looper.java:137)
01-05 15:12:50.015: E/AndroidRuntime(615):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-05 15:12:50.015: E/AndroidRuntime(615):  at java.lang.reflect.Method.invokeNative(Native Method)
01-05 15:12:50.015: E/AndroidRuntime(615):  at java.lang.reflect.Method.invoke(Method.java:511)
01-05 15:12:50.015: E/AndroidRuntime(615):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-05 15:12:50.015: E/AndroidRuntime(615):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-05 15:12:50.015: E/AndroidRuntime(615):  at dalvik.system.NativeStart.main(Native Method)
01-05 15:12:50.015: E/AndroidRuntime(615): Caused by: java.lang.NullPointerException
01-05 15:12:50.015: E/AndroidRuntime(615):  at pws.sgdbroosterapp.RoosterWijzigingen.onCreate(RoosterWijzigingen.java:153)
01-05 15:12:50.015: E/AndroidRuntime(615):  at android.app.Activity.performCreate(Activity.java:5008)
01-05 15:12:50.015: E/AndroidRuntime(615):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-05 15:12:50.015: E/AndroidRuntime(615):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:55:12.090

您正在主线程上运行 HttpClient

```
android.os.NetworkOnMainThreadException 
```

包装你的 json 电话

```
JSONObject json = JSONfunctions.getJSONfromURL(URL); 
```

使用 AsyncTask，类似这样

```
new AsyncTask<Void, Void, Void>() {

        @Override
        protected Void doInBackground(Void... params) {
            JSONObject json = JSONfunctions.getJSONfromURL(URL);
            Log.v("Stackoverflow", json.toString());
            return null;
        }

    }.execute(); 
```

不要忘记添加 Internet 访问权限

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:52:08.683

用于`separate thread`执行网络请求，因为它会出错。使用`asynchronous`任务来完成它。

你的错误是**`http connection android.os.NetworkOnMainThreadException`**

要解决它，请创建一个`asynchronous class`然后在其上`doinbackground`执行 json 的 http 请求，并`postexecute`根据需要在方法中更新您的 ui。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:01:22.533

请参阅此[Android AsyncTask 示例](http://samir-mangroliya.blogspot.com/p/android-asynctask-example.html)

# c++ - 在 openGL 中加载图像

> ID：14173320
> 
> 赞同：0
> 
> 时间：2013-01-05T15:38:40.337
> 
> 标签：c++, image, opengl, textures, glut

我目前正在学习如何在 openGL 中加载和使用图像。我尝试了几个教程的许多示例。很多教程都使用了一个函数：LoadBMP 什么的。我使用的标头未声明此函数。

您是否需要加载图像的功能的 appart 标头？我查看了 openGL 维基百科，他们说存在 3 个这样的标题。

还是我错了？您需要 openGL 3.0 或更高版本来加载图像吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T16:02:12.920

OpenGL 没有任何加载图像的功能。您可以自己编写 LoadBMP 函数，也可以使用第三方库。有很多可用的，您可以在相关问题的答案中找到其中的[一些](https://stackoverflow.com/questions/3284498/c-c-image-loading)。

然后，您可以将原始图像数据传递给 OpenGL 纹理创建函数，例如[glTexImage2D](https://stackoverflow.com/questions/3284498/c-c-image-loading)，以创建纹理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T17:04:59.193

OpenGL 只是一个用于访问 GPU 的 API。没有加载任何媒体文件（图像、3d 模型等）的功能。甚至不支持在给定的操作系统中创建窗口（操作系统 API 需要与 OpenGL 粘合）。

您需要从图像中加载字节（使用另一个库），然后您可以使用 OpenGL 将其上传到 GPU。

出于简单的目的，我使用了一个我认为很棒的名为[SOIL的库。](http://www.lonesock.net/soil.html)OpenGL wiki 上有一个[相关工具包和 API 的列表，](http://www.opengl.org/wiki/Related_toolkits_and_APIs#Image_and_Texture_Libraries)它们可能很有用。

# c# - 图像未调整大小

> ID：14173321
> 
> 赞同：0
> 
> 时间：2013-01-05T15:38:47.377
> 
> 标签：c#, asp.net, webforms

这是我托管图像时的代码。最初，这些图像是巨大的。图像现在为 100x100 像素。当我打开页面时，图像与以前的大小相同。即使文件的属性说每个文件都是 100x100。

图像是否保存在某处而不被覆盖？我用新图像覆盖了文件路径中的旧图像。

```
.linkButtonsDiv { width: 25%;float: left;} 
```

```
<div class="linkButtonsDiv">
    <asp:ImageButton ID="btnTwitter" ImageUrl="~/Images/twitterLogo.png" runat="server" onclick="btnTwitter_Click" />
</div>
<div class="linkButtonsDiv">
    <asp:ImageButton ID="btnWordPress" ImageUrl="~/Images/wordpressLogo.jpg" runat="server" onclick="btnWordPress_Click" />
</div>
<div class="linkButtonsDiv">
    <asp:ImageButton ID="btnTig" ImageUrl="~/Images/tigSourceLogo.png" runat="server" onclick="btnTig_Click" />
</div>
<div class="linkButtonsDiv">
    <asp:ImageButton ID="btnStack" ImageUrl="~/Images/stackExchangeLogo.jpg" runat="server" onclick="btnStack_Click" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:42:38.393

图像很可能仍缓存在浏览器中。

进行硬刷新 -`Ctrl + F5`强制从服务器下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:51:05.243

要强制缓存更新以及何时（强制，取决于浏览器）重新加载不起作用，您可以简单地使用链接做一个技巧：

如果您的链接是 f.ex：

```
http://localhost:1234/Default.aspx 
```

这样做以重新加载缓存：

```
http://localhost:1234/Default.aspx?a 
```

每次更改字母。如果您已经在使用一些参数，请将其添加到末尾：

```
http://localhost:1234/Default.aspx?some=arg&a 
```

如果您有链接的 CSS，请改用它。

```
<link href="some.css?x" rel="stylesheet" type="text/css" /> 
```

后一种方法总是一种很好的做法，不是一个字母，而是一个版本号：

```
<link href="some.css?v=101" rel="stylesheet" type="text/css" /> 
```

这样，即使将过期设置为遥远的未来，您也可以强制缓存更新。

# file-upload - 播放2.0.4文件上传。空指针异常：空

> ID：14173323
> 
> 赞同：2
> 
> 时间：2013-01-05T15:38:57.017
> 
> 标签：file-upload, playframework-2.0

我在 Java 中使用 Play，但在处理文件上传时遇到问题。

我在[这个](http://www.playframework.org/documentation/2.0.4/JavaFileUpload)页面上做了所有的事情，但是`NullPointerException`当我提交表格时我得到了。

这是我的表格：

```
@form(action = routes.Application.upload, 'enctype -> "multipart/form-data") {
<input type="file" name="picture">
    <p>
       <input type="submit">
   </p>
} 
```

路线：

```
POST    /upload         controllers.Application.upload() 
```

这是我的控制器：

```
import play.mvc.Http.MultipartFormData;
import play.mvc.Http.MultipartFormData.FilePart;

public static Result upload() {
    MultipartFormData body = request().body().asMultipartFormData();
    FilePart picture = body.getFile("picture");  //here i got NullPointerException
    if (picture != null) {
        String fileName = picture.getFilename();
        String contentType = picture.getContentType(); 
        File file = picture.getFile();
        return ok("File uploaded");
    } else {
        flash("error", "Missing file");
        return redirect(routes.Application.index());    
    }
} 
```

我尝试了在 Internet 上找到的几种解决方案，但没有一个对我有帮助。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:01:02.120

请记住，`NullExceptions`在这个地方`body` 不适合`picture`

唯一可能的原因是您使用 HTML 表单发送它没有`enctype="multipart/form-data"`（也许您没有在浏览器中刷新表单并仍在尝试发送普通表单？）

确保（在您的浏览器中）您填写表单的页面有此表单声明，然后重试。

```
<form action="/upload" method="POST" enctype="multipart/form-data">

    <input type="file" name="picture">

    <p>
        <input type="submit">
    </p>

</form> 
```

# java - 将 java.lang.Long 转换为原始 int 的最有效方法

> ID：14173329
> 
> 赞同：9
> 
> 时间：2013-01-05T15:39:15.083
> 
> 标签：java, performance, casting

我有一个奇怪的场景，我需要将数百万个`java.lang.Long`s 转换为原始`int`类型。我需要每天做几次，每一天。通常情况下，我不会担心这种简单的演员阵容，但既然发生了这么多，那么经常，我不得不问：最有效的方法是什么，为什么？

我的第一次尝试：

```
Long myLong = getLong();
int x = Integer.valueOf(myLong.toString()) 
```

虽然这看起来像是在谷仓周围走 3 个面。提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-05T15:41:09.083

该类`Long`有一个`.intValue()`方法，我想这就是您要寻找的...

（警告，你可能会失去精度等等——但你可能已经知道了）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-05T15:40:58.533

试试这个

```
int x = myLong.intValue( ); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-05-13T12:35:12.807

试试这个

```
Integer i = (int) (long) b; 
```

# php - codeigniter 中的电子邮件库

> ID：14173330
> 
> 赞同：-2
> 
> 时间：2013-01-05T15:39:33.137
> 
> 标签：php, codeigniter

我正在使用 $this->load->library('email'); codeigniter 中的库，它工作正常，当我使用这个库发送电子邮件时，邮件也与 HTML 代码一起发送，是否需要任何配置来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T15:46:28.843

```
$config['mailtype'] = 'HTML'; 
```

来自用户指南：邮件类型。如果您发送 HTML 电子邮件，您必须将其作为完整的网页发送。确保您没有任何相对链接或相对图像路径，否则它们将不起作用。

[http://ellislab.com/codeigniter/user-guide/libraries/email.html](http://ellislab.com/codeigniter/user-guide/libraries/email.html)

# php - 从两个 MYSql 表中获取数据并显示为 HTML 表

> ID：14173340
> 
> 赞同：0
> 
> 时间：2013-01-05T15:40:11.207
> 
> 标签：php, mysql

我有两个表，第一个是“用户”表，其中有一个名为“商店”的列，我还有一个名为“商店”的表，其中包含“商店编号”“商店位置”列。

用户表中的“商店”列是“商店编号”。

我想要做的是创建一个类似于

样本数据：

店铺编号：34 店铺地点：伦敦用户：34

店铺编号 | 店铺位置 | 本店用户数|

所以这就像从商店中选择 * 并为每个创建新行。

并且对于用户的数量，类似于 sum * from users where 'store' = 'store number' from stores 表。

我希望这是有道理的，

杰克。

更新：

这是对的：

```
$result = mysql_query("SELECT * FROM stores", $con) or die(mysql_error());

echo "<table border='1'>";
echo "<tr> <th>Store Number</th> <th>Store Location</th> <th>Number of Users</th> </tr>";
// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
    // Print out the contents of each row into a table
    echo "<tr><td>"; 
    echo $row['storenumber'];
    echo "</td><td>"; 
    echo $row['location'];
    echo "</td><td>"; 
    echo 'Amount of users here';
    echo "</td></tr>"; 
} 

echo "</table>"; 
```

表：

```
CREATE TABLE IF NOT EXISTS `stores` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `storenumber` int(11) NOT NULL,
  `location` varchar(40) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ; 
```

如果不存在则创建表`users`（

```
 `id` int(50) NOT NULL AUTO_INCREMENT,
  `email` varchar(50) NOT NULL,
  `store` int(11) NOT NULL,
  `lastvisit` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=28 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:56:56.820

试试这个 SQL：

```
SELECT storenumber, location, COUNT(users.store) as nbr_users FROM stores
LEFT JOIN users ON stores.storenumber = users.store
GROUP BY store.id 
```

然后做

```
echo $row['nbr_users']; 
```

打印用户数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:03:31.700

试试这个：

```
$result = mysql_query("SELECT * FROM stores", $con) or die(mysql_error());
echo "<table border='1'>";
echo "<tr> <th>Store Number</th> <th>Store Location</th> <th>Number of Users</th> </tr>";
// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
    // gets the total amount of users
    $query = mysql_query("SELECT COUNT(*) AS total FROM users WHERE `store`='".$row['storenumber']."'") or die( mysql_error() );
    $r = mysql_fetch_array( $query );
    $total = $r['total'];
    unset($query, $r);

    // Print out the contents of each row into a table
    echo "<tr><td>"; 
    echo $row['storenumber'];
    echo "</td><td>"; 
    echo $row['location'];
    echo "</td><td>"; 
    echo $total;
    echo "</td></tr>"; 
} 

echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:09:19.983

你可以试试这个-

```
$result = mysql_query("Select count(user_id) as CNT,storenumber,location from store Left join user ON user.store_number = store.store_number group by store.store_number", $con) or die(mysql_error());
$row = mysql_fetch_assoc($result );

echo "<table border='1'>";
echo "<tr> <th>Store Number</th> <th>Store Location</th> <th>Number of Users</th> </tr>";
// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
    // Print out the contents of each row into a table
    echo "<tr><td>"; 
    echo $row['storenumber'];
    echo "</td><td>"; 
    echo $row['location'];
    echo "</td><td>"; 
    echo $row['CNT'];
    echo "</td></tr>"; 
} 

echo "</table>"; 
```

如果您可以提供精确的表格结构，我可以更准确地构建它。

# jquery - JQuery 是否支持自关闭 div 标签

> ID：14173342
> 
> 赞同：0
> 
> 时间：2013-01-05T15:40:29.140
> 
> 标签：jquery

我惊讶地发现 jQuery 似乎不支持自关闭 div 标签。这是一个简单的例子：

```
 <div id="div1" />
    <div id="div2" />

<script>
$("#div1").html("hello");
$("#div2").html("world");
</script> 
```

[http://jsfiddle.net/UTq4c/1/](http://jsfiddle.net/UTq4c/1/)

当它运行时， div2 将从 DOM 中删除。

我读过 HTML 5 不支持自动关闭 div，但我仍然对这种行为感到惊讶。

jquery有这种行为的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:46:46.880

HTML 5 不支持自动关闭的 div，因此您的 HTML 代码解释如下：

```
<div id="div1">
    <div id="div2">
    </div>
</div> 
```

然后，

```
$("#div1").html("hello"); 
```

替换`div id="div2"`为“你好”，你会看到你所看到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:43:39.220

这与 jQuery 无关。

如果文档类型是 HTML5，浏览器会在呈现之前去除自闭合 div 标签。jQuery 只能看到浏览器去除了这些元素的 DOM 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T15:45:34.203

这与 jQuery 无关。如果您查看浏览器如何解释您提供的无效 HTML（至少在 Chrome 中）：

```
<div id="div1">
  <div id="div2">
  </div>
</div> 
```

因此，当您设置`html()`of 时`#div1`，您正在清除它，`#div2`因为它呈现为`#div1`.

[如果您使用本机 JavaScript](http://jsfiddle.net/UTq4c/2/)，此行为是相同的：

```
document.getElementById("div1").innerHTML = "hello";
document.getElementById("div2").innerHTML = "world"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T15:45:41.687

解析 HTML 的不是 jQuery。是浏览器。浏览器，除非使用`XHTML`mime-type 服务，否则无法识别自闭合标记（理所当然）。它将 HTML 解释为

```
<div id="div1">
  <div id="div2">
    <script>
      ...
    </script>
... 
```

脚本的第一行（正确）将其替换为

```
<div id="div1">
  hello
</div> 
```

脚本的第二行找不到 any `#div2`，所以它什么也不做。

# python - 如何在输入的消息中搜索四个关键字

> ID：14173348
> 
> 赞同：0
> 
> 时间：2013-01-05T15:41:10.770
> 
> 标签：python, string

基本上我在 Python 中有一个任务集。它是在估算的消息中搜索这 4 个关键字：**炸弹、核、恐怖分子和戈登布朗。**然后我必须输出它是“ **SAFE** ”消息还是“ **UNSAFE** ”消息。

到目前为止，这就是我得到的（我在 Python 方面有点菜鸟。我还在学习这门语言。）：

```
keyWord = "bomb"
keyWord1 = "nuclear"
keyWord2 = "terrorist"
keyWord3 = "gordon brown"

def textSearch():
    message = input("Input a message: ")
    if message == keyWord + keyWord1 + keyWord2 + keyWord3:
        print("This is message is UNSAFE!")
    else:
        print("This is a SAFE message.")

textSearch() 
```

请帮忙！

如果我只输入一个单词，它就会起作用。但是当我尝试在整个消息中搜索关键字时它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:44:15.880

您当前正在查找特定消息：

“炸弹核恐怖分子戈登布朗”

您想要使用的是`in`它将在您的字符串中找到一个子字符串。对每个关键字执行此操作：

```
if keyWord in message:
    #keyWord exists in message 
```

如果您将关键字放在列表中会更容易，然后您可以循环它们：

```
keywords = ["bomb", "nuclear", "terrorist", "gordon brown"]

for keyword in keywords:
    if keyword in message:
        #Bad message! 
```

更整洁的方法是使用列表理解和`any()`函数，它在一行中实现与上面相同的功能：

```
bad = any(keyword in message for keyword in keywords) 
```

或者，如果您需要对子字符串的位置做一些事情，那么您可以使用`find()`which 返回第一个匹配位置的索引：

```
position = message.find(keyword) 
if position > -1:
    #Bad message 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:47:01.780

```
message == keyWord + keyWord1 + keyWord2 + keyWord3 
```

这将是正确的，当且仅当`message`与“bombnuclearterroristgordon brown”完全相等时。您可能希望使用`in`运算符来检查成员资格。

```
keyWord in message or keyWord1 in message or keyWord2 in message or keyWord3 in message 
```

……这显然很麻烦，但你有很好的 Python 替代品。首先列出关键字而不是单个名称：

```
keyWords = ["bomb", "nuclear", "terrorist", "gordon brown"] 
```

然后，使用列表推导：

```
if [keyWord in message for keyWord in keyWords]:
    … 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:47:20.183

您可以像这样定义“禁止”关键字列表：

```
keywords = ["bomb", "nuclear", "terrorist"] 
```

然后你可以迭代它们并检查它们是否包含在文本中，如下所示：

```
for keyword in keywords:
    if keyword in message:
        print "unsafe"
        break 
```

`break`用于在找到其中一个关键字第一次出现后停止迭代关键字。

你也可以通过这样的列表理解来做到这一点：

```
if [keyword in message for keyword in keywords]... 
```

但我认为对于 Python 初学者来说，前一种解决方案更容易理解。

# java - 遵循 demeter 定律且可测试的理想代码（依赖注入）？

> ID：14173349
> 
> 赞同：0
> 
> 时间：2013-01-05T15:41:17.950
> 
> 标签：java, oop, design-patterns, law-of-demeter

我正在阅读 LoD 之后的可测试代码，但我脑子里一团糟。因此，请对这段代码提供任何指导。

```
public class HouseConfiguration {

    private final int noOfDoors;
    private final int noOfWindows;
    //.... And so on

    public HouseConfiguration(int noOfDoors, int noOfWindows){
        this.noOfDoors = noOfDoors;
        this.noOfWindows = noOfWindows;
        //.....
    }

        //getters for config
}

public class Contractor {

    public House buildHouse(HouseConfiguration houseConfiguration) throws Exception{
        validateHouseConfiguration(houseConfiguration);
        Window[] windows = new Window[houseConfiguration.getNoOfDoors()];
        return new House(windows);
    }

    private void validateHouseConfiguration(HouseConfiguration houseConfiguration) {
        //validation logic
    }
}

public class House {

    private Window[] windows;

    //Now as the parameters increase it becomes a problem to pass so many arguments in constructor
    public House(Window[] windows /*Also other arguments */) {
        this.windows = windows;
    }

} 
```

现在随着`House`构造函数的参数增加，使用构造函数管理它会很困难。许多依赖项将被通过。这是正确的做法吗？或者有没有更好的方法可以重构这段代码？

编辑：参考`House`构造函数参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:38:17.397

> ...随着 House 构造函数的参数增加，使用构造函数管理它会很困难。

使用 Builder 模式（Effective Java item 2）：

```
public class House {

    //these are immutable if you wish
    private final int mNumberOfWindows;
    private final int mNumberOfDoors;

    private House(HouseBuilder builder) {
        mNumberOfWindows = builder.mNumberOfWindows;
        mNumberOfDoors = builder.mNumberOfDoors;
    }

    public static class HouseBuilder {
        private int mNumberOfWindows; //set defaults here, make final and pass in builder constructor if they must be set
        private int mNumberOfDoors;

        public HouseBuilder windows(int numberOfWindows) {
            mNumberOfWindows = numberOfWindows;
            return this;
        }

        public HouseBuilder doors(int numberODoors) {
            mNumberOfDoors = numberODoors;
            return this;
        }

        public House build() {
            return new House(this);
        }
    }

    public int getNumberOfWindows() {
        return mNumberOfWindows;
    }

    public int getNumberOfDoors() {
        return mNumberOfDoors;
    }
} 
```

用法：

```
 House.HouseBuilder hb = new House.HouseBuilder();
    hb.doors(4);
    hb.windows(3);
    House h = hb.build();

    House h2 = new House.HouseBuilder().doors(4)
            .windows(3).build(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:39:55.053

I was do it in this way (sorry, it is a C#):

```
public interface IHouseConfiguration
{
    int noOfDoors { get; set; }
    int noOfWindows { get; set; }
    bool IsValid();
}

public class HouseConfiguration : IHouseConfiguration
{
    public HouseConfiguration(int noOfDoors, int noOfWindows)
    {
        this.noOfDoors = noOfDoors;
        this.noOfWindows = noOfWindows;
    }

    public int noOfDoors
    {
        get { return noOfDoors; }
        set { noOfDoors = value; }
    }

    public int noOfWindows
    {
        get { return noOfWindows; }
        set { noOfWindows = value; }
    }

    public bool IsValid()
    {
        //do validate calculus and return value. For a true, i do not sure it is IHouseConfiguration's duty...
        return true;
    }
}

public class Contractor
{
    public House buildHouse(IHouseConfiguration houseConfiguration)
    {
        if (houseConfiguration.IsValid())
        {
            return new House(houseConfiguration);
        }

        return null;
    }
}

public class House
{
    private Window[] windows;

    public House(IHouseConfiguration houseConfig) //Now, all incapsulated in IHouseConfiguration
    {
        Window[] windows = new Window[houseConfig.noOfDoors];
        this.windows = windows;
    }
} 
```

# matlab - 在数组中搜索变量

> ID：14173353
> 
> 赞同：1
> 
> 时间：2013-01-05T15:41:51.423
> 
> 标签：matlab, matrix

如何检查特定变量的字符串值是否存在于数组中？我知道`strcmp`并且`ismember`是选项，但我将如何调整这些选项，以便它们使用变量的值在数组中搜索，而不是我输入要搜索的字符串。所以我的代码看起来像：

```
C1 = {'red' 'yellow'};
C2 = {'green' 'blue'};
fn = 'blue';  

%Comparison function here

if % fn is present in C1
    c = 'm' 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T16:37:40.227

我不明白有什么问题`strcmp`，因此我不确定我是否理解你的问题。考虑这个

```
if any( strcmp(fn,C2) ) 
   disp('OK!')    % // OR  c = 'm'
end

OK! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T16:35:57.927

How about

```
if any( cellfun( @(x) isequal(x, fn), C1 ) )
   c = 'm';
end 
```

I believe you may also use `regexp`.

# ruby - 如何在不访问 HTTP 层的情况下模拟浏览器 X509 客户端证书验证

> ID：14173354
> 
> 赞同：1
> 
> 时间：2013-01-05T15:41:57.113
> 
> 标签：ruby, security, http, certificate, x509

我正在阅读这篇关于[通过 X509 客户端证书进行身份验证的](http://cweiske.de/tagebuch/ssl-client-certificates.htm)文章，但是当我在 Heroku 上运行应用程序时，我将无法让服务器请求客户端证书，因此我无法访问 HTTP 层。

[我在 Stackoverflow 上](https://stackoverflow.com/a/8749633/335847)看到了对类似问题的回复，该问题说要使用自定义标头。

我想通过使用自定义标头的应用程序服务器来模拟客户端证书验证。我正在使用 Ruby，所以如果有人知道已经完成此任务的库，那将很有帮助。否则，有可能吗？我需要哪些资源？我发现[了这个 SO question](https://stackoverflow.com/questions/188266/how-are-ssl-certificates-verified)，但它是关于验证 SSL 证书的，我不确定这是否适用。

抱歉这个问题含糊不清，但我正处于这个起点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:50:37.000

您的应用程序堆栈无法控制 SSL，因为它已在 Web 服务器上终止。所有验证工作都由 Web 服务器完成，然后只有 SSL_* 标头进入应用服务器（例如，查找 Apache 的 SSLOptions）。如果您无法控制 Web 服务器，您甚至可能无法打开客户端证书要求。而且我找不到通过heroku打开此要求的任何选项：[https ://devcenter.heroku.com/articles/ssl#customdomain-ssl](https://devcenter.heroku.com/articles/ssl#customdomain-ssl)

如果您以某种方式获得 SSL_* 标头，那么无论 Web 服务器端验证如何，您都可以使用 openssl 作为军刀来验证证书（通常在 SSL_CLIENT_CERT 标头中）。例如在 ruby​​ 中看到这个：[OpenSSL verify certificate from own CA](https://stackoverflow.com/questions/701084/openssl-verify-certificate-from-own-ca)

还要记住，证书验证是检查证书签名和其他属性的过程，例如形式检查。例如，要对用户进行身份验证，您必须通过 DN 或 E 字段将该经过验证的证书链接到用户。

# python - 使用 web.py 处理包含斜杠“/”字符的 URL

> ID：14173355
> 
> 赞同：1
> 
> 时间：2013-01-05T15:42:11.467
> 
> 标签：python, url, web.py, slash

我来自 Flask，处理带有斜杠字符的 URL 非常简洁： http: [//flask.pocoo.org/snippets/76/](http://flask.pocoo.org/snippets/76/)

我现在正在使用 web.py，我也想做同样的事情。我事先不知道网址会有多少个斜线。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:02:50.747

可能你可以只使用一个普通的：

```
urls = (
    "/product/(.*)", product_handler
    ) 
```

然后产品处理程序采用一个变量：

```
class product_handler:
    def GET(self, url_string):
        url_pieces = url_string.split('/')
        # ... 
```

像这样的东西？

# android - 获取数据库查询中出现不同条目的次数（Android）

> ID：14173359
> 
> 赞同：0
> 
> 时间：2013-01-05T15:42:33.900
> 
> 标签：android, distinct

我有一个棘手的问题。我的应用程序将用户数据输入到 SQLite 数据库中，并且我已经设法编写查询以取回数据。

这包括获取不同值列表的查询，示例如下。假设您有以下数据：

```
Column a  |  Column b  | Column c
   a            a           a
   a            b           b
   a            b           b
   b            b           b 
```

使用“分组依据”功能，查询将创建以下列表：

```
aaa
abb
bbb 
```

所以我正在尝试，但未能做的是扩展它并计算每个不同条目出现的次数 - 所以在上述情况下，它看起来像这样：

```
1 x aaa
2 x abb
1 x bbb 
```

那么有没有一种方法，一旦你查询了数据库，就可以从光标中获取每个不同条目的出现次数 - 或者我是否需要编写一个单独的查询来获取这些信息..

这是我目前的查询：

```
public Cursor fetchDamagedComponentSpecForInspection(long inspectionId, String componentType) {
    Cursor mCursor = rmDb.query(true, DAMAGED_COMPONENTS_TABLE, new String[] {
            DAMAGED_COMPONENT_ID,
            LOCATION_LINK,
            RUN_LINK,
            AREA_LINK,
            INSPECTION_LINK,
            LOCATION_REF,
            RACKING_SYSTEM,
            COMPONENT,
            COMPONENT_TYPE,
            QUANTITY,
            POSITION,
            RISK,
            ACTION_REQUIRED,
            NOTES_GENERAL,
            MANUFACTURER,
            TEXT1,
            TEXT2,
            TEXT3,
            TEXT4,
            NOTES_SPEC,
            SPEC_SAVED}, 
            INSPECTION_LINK + " = " + inspectionId + " AND " + COMPONENT_TYPE + " = ? AND " + SPEC_SAVED + " = ? ", 
            new String[] {componentType, "Yes"},
            MANUFACTURER + ", " + TEXT1 + ", " + TEXT2 + ", " + TEXT3 + ", " + TEXT4 + ", " + NOTES_SPEC,
            null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

有关其他信息，这是我调用查询并检索数据的主要活动中的代码：

```
final Cursor componentsAndSpecCursor = (Cursor) rmDbHelper.fetchComponentsAndSpecForManufacturer(inspectionId, rackingSystem, manufacturer);
                if(componentsAndSpecCursor.moveToFirst()){
                    do {
                        componentType = componentsAndSpecCursor.getString(componentsAndSpecCursor.getColumnIndex(RMDbAdapter.COMPONENT_TYPE));
                        specText1 = componentsAndSpecCursor.getString(componentsAndSpecCursor.getColumnIndex(RMDbAdapter.TEXT1));
                        specText2 = componentsAndSpecCursor.getString(componentsAndSpecCursor.getColumnIndex(RMDbAdapter.TEXT2));
                        specText3 = componentsAndSpecCursor.getString(componentsAndSpecCursor.getColumnIndex(RMDbAdapter.TEXT3));
                        specText4 = componentsAndSpecCursor.getString(componentsAndSpecCursor.getColumnIndex(RMDbAdapter.TEXT4));
                        specNotes = componentsAndSpecCursor.getString(componentsAndSpecCursor.getColumnIndex(RMDbAdapter.NOTES_SPEC));
                        message.append(componentType).append(" ").append(specText1).append(" ").append(specText2).append(" ").append(specText3).append(" ").append(specText4).append(" ").append(specNotes).append("\r\n");
                    }
                    while (componentsAndSpecCursor.moveToNext());
                }
                componentsAndSpecCursor.close(); 
```

所以我也不知道一旦我在查询中包含了这段代码（我仍然看不到它是如何完成的！），我将如何获得计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:35:36.343

The query that you want is:

```
select count(*) as cnt, cola, colb, colc
from YourTable
group by cola, colb, colc 
```

I'm not sure how to put this into your code. You don't seem to have a query that returns the combinations in the snippet of code that you provided.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:01:55.323

Did u try adding `COUNT(*)` function to your columns list?

see this: [count columns group by](https://stackoverflow.com/questions/2698108/count-columns-group-by)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:52:31.023

尝试这个。

获取所有唯一值并将它们临时存储在某个地方，然后循环并执行另一个查询以尝试再次找到这些值，每次你找到一个，更新一些计数器。

# java - Java中的参数长度

> ID：14173365
> 
> 赞同：-2
> 
> 时间：2013-01-05T15:43:20.607
> 
> 标签：java, parameters, share, main, args

Java中main的参数长度是多少？它是动态的吗？我想在两个主要方法之间传递参数，我可以发送任意数量的字符串参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:44:34.570

它是动态的。您可以根据需要发送尽可能多/少的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T16:41:32.207

我得出了这个结论：

1.  args 因为任何数组都是静态的而不是动态的，但它的长度是在运行时确定的，无论如何这不会使它成为动态的。
2.  我们可以`pass`（不是`send`）向其他 main 方法提供参数，因为它就像任何其他方法一样，它不会创建新线程。

> 我在想调用 main 方法会***运行***另一个线程，这有点愚蠢。

它只是在调用者线程的内存中执行，如果我们想在两个线程之间传递变量，我们可以使用套接字

***编辑***

将近 20 个月后，我再次回到这个线程，以纠正我对 Java 语言的误解。

# php - 如何在多个分支中进行自定义合并？

> ID：14173370
> 
> 赞同：1
> 
> 时间：2013-01-05T15:44:05.557
> 
> 标签：php, linux, git, git-branch

我在 git 服务器上有一个 PHP 项目，我正在本地工作，并且在我的站点运行的主服务器上有一个它的克隆。
我有两个分支：
1.master
2.server

现在我的问题是：
如何在 master 上进行一些更改，并且只在“服务器”分支上合并一些更改（不是全部）？
提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T15:51:37.560

采用

```
git cherry-pick commit-Id 
```

对于您想从另一个分支获取的每个提交。

您可以从输出中获取 commit-Id

```
git log 
```

有关详细信息，请参阅[http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)。

# node.js - 在heroku上安装jade时出错

> ID：14173373
> 
> 赞同：3
> 
> 时间：2013-01-05T15:44:22.197
> 
> 标签：node.js, heroku, pug, npm

将 node.js-app 推送到 Heroku 时出现错误。它曾经可以工作，但现在，由于某种原因，它失败了。

当我推送到 Heroku 时，我得到以下信息：

```
-----> Node.js app detected
-----> Resolving engine versions
   Using Node.js version: 0.6.13
   Using npm version: 1.1.4
-----> Fetching Node.js binaries
-----> Vendoring node into slug
-----> Installing dependencies with npm
   npm http GET https://registry.npmjs.org/express/2.5.9
   npm http GET https://registry.npmjs.org/jade/0.15.4
   npm http 200 https://registry.npmjs.org/jade/0.15.4
   npm http GET https://registry.npmjs.org/jade/-/jade-0.15.4.tgz
   npm http 200 https://registry.npmjs.org/express/2.5.9
   npm http GET https://registry.npmjs.org/express/-/express-2.5.9.tgz
   npm http 200 https://registry.npmjs.org/jade/-/jade-0.15.4.tgz
   npm http 200 https://registry.npmjs.org/express/-/express-2.5.9.tgz
   npm ERR! error installing jade@0.15.4

   npm ERR! Refusing to delete: /tmp/build_dzqaws2o7lx4/node_modules/.bin/jade not in /tmp/build_dzqaws2o7lx4/node_modules/jade
   npm ERR! File exists: /tmp/build_dzqaws2o7lx4/node_modules/.bin/jade
   npm ERR! Move it away, and try again.
   npm ERR!
   npm ERR! System Linux 2.6.32-348-ec2
   npm ERR! command "/tmp/node-node-HkEc/bin/node" "/tmp/node-npm-X5Wz/cli.js" "install" "--production"
   npm ERR! cwd /tmp/build_dzqaws2o7lx4
   npm ERR! node -v v0.6.13
   npm ERR! npm -v 1.1.4
   npm ERR! path /tmp/build_dzqaws2o7lx4/node_modules/.bin/jade
   npm ERR! code EEXIST
   npm ERR! message Refusing to delete: /tmp/build_dzqaws2o7lx4/node_modules/.bin/jade not in /tmp/build_dzqaws2o7lx4/node_modules/jade
   npm ERR! errno {}
   npm http GET https://registry.npmjs.org/connect
   npm http GET https://registry.npmjs.org/mime/1.2.4
   npm http GET https://registry.npmjs.org/qs
   npm http GET https://registry.npmjs.org/mkdirp/0.3.0
   npm ERR!
   npm ERR! Additional logging details can be found in:
   npm ERR!     /tmp/build_dzqaws2o7lx4/npm-debug.log
   npm not ok
 !     Failed to install --production dependencies with npm
 !     Heroku push rejected, failed to compile Node.js app 
```

我的 package.json 如下：

```
{
  "name": "myAppName",
  "version": "0.0.1",
  "dependencies": {
      "express": "2.5.9",
      "mongoose":"3.5.2",
      "jade": "0.15.4",
      "ejs": "0.7.1"
      },
  "engines": {
    "node": "0.6.13",
    "npm": "1.1.4"
  }
} 
```

因为它说“拒绝删除：...”我认为这可能是 Heroku 上的一个异常错误，所以我试图将它推送到一个新的 Heroku 应用程序，但我得到了同样的错误。

关于什么是错的任何想法？是我的版本吗？一切都在本地运行良好（Windows）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T15:55:50.593

您正在使用旧的`node.js`. 尝试将以下内容添加到`package.json`：

```
 "engines": {
        "node": "0.8.x",
        "npm": "1.1.x"
  }, 
```

您可以通过登录系统更仔细地检查事物。首先你需要安装[Heroku Toolbelt](https://toolbelt.heroku.com/)（如果你还没有安装的话）。然后：

```
heroku login 
```

和

```
heroku run bash --app yourapp 
```

这将为您的 heroku 安装提供一个 bash。导航到`/tmp`( `cd /tmp`) 并查看那里还剩下什么。尝试手动删除它 ( `rm -rf whatisleft`)。

你的翡翠版本也过时了（仍然）。我用玉安装的 heroku 有：

```
"jade": "*" 
```

最后，不要添加`node_modules`到源代码管理中。因此，将其添加到您的`.gitignore`文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-14T09:20:30.110

您可以强制 Heroku 为您的应用清除缓存：

```
$ heroku plugins:install heroku-repo
$ heroku repo:purge_cache -a appname 
```

# java - 我无法获取字符串以显示每个字符

> ID：14173374
> 
> 赞同：1
> 
> 时间：2013-01-05T15:44:29.547
> 
> 标签：java, string

为什么我不能这样做，我怎么能像 CPP 一样？

```
public static void main(String args[])
{
     String n = "ABCDEFG";
     for(int i=0;i<n.length();i++){
           System.out.println(n[i]);
     }
 } 
```

当我编译时它说“表达式的类型必须是数组类型，但它解析为字符串”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:45:57.070

您想使用该[`charAt`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt%28int%29)函数来访问 a 的字符`String`。正如 MrSmith42 所提到的，`[]`在 C++ 中可以重载运算符`std::string`，但在 Java 中则不行`String`

```
System.out.println(n.charAt(i)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T15:46:34.473

因为`String`不是数组。

但是，您可以将其转换为`char`数组并使用这样的 foreach 循环对其进行循环：

```
for (char c: n.toCharArray())
    System.out.println(c); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T15:46:45.713

Java 不允许运算符重载，就像 c++ 一样。因此 [] 运算符不能用于字符串。

```
 System.out.println(n.charAt(i); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T15:46:06.207

`String`对象不支持像 C++ 中那样的运算符重载。你可以使用

```
System.out.println(n.charAt(i)); 
```

# python - 表单输入，GAE，错误

> ID：14173376
> 
> 赞同：6
> 
> 时间：2013-01-05T15:44:52.360
> 
> 标签：python, google-app-engine, unicode

出于某种原因，我在 GAE 中收到了奇怪的西里尔符号输入。

在本地环境中一切正常，我得到了输入字段中的内容，带有`self.request.get('')`. 但是在 Appspot 上，我得到的是“1mxt1czq0snfzq==”或“0ylqtdgb0yi=”，而不是俄语单词。

在.py

```
!/usr/bin/env python
-*- coding: utf-8 -*-
title = self.request.get('title') 
```

在 .html 中

```
meta charset="utf-8"
input type="text" name="title" id="title" 
```

我被困住了。

**编辑：** 是的，它是 Base64，你是对的。但为什么 GAE 使用它呢？以及在哪里改变它？为什么本地和 Appspot 中的行为不同？

以相同的形式，我试图将文件获取到 BlobHandler

```
<form class="form-horizontal" action="{{ upload_url }}" method="POST" enctype="multipart/form-data">
  <div class="control-group">
    <label class="control-label" for="title">Title</label>
    <div class="controls">
      <input type="text" name="title" id="title">
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="file">Load image</label>
    <div class="controls">
      <input type="file" name="file" id="file" accept='image/*' required="required">
    </div>
  </div> 
```

**EDIT2：** 是的。 [https://code.google.com/p/googleappengine/issues/detail?id=2749](https://code.google.com/p/googleappengine/issues/detail?id=2749)

似乎是 BlobHandler 的 GAE 中的一个错误。

解决方案：**accept-charset="utf-8"**形式，稍后再试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T21:11:40.360

**错误**：[https ://code.google.com/p/googleappengine/issues/detail?id=2749](https://code.google.com/p/googleappengine/issues/detail?id=2749)

表单中的 accept-charset="utf-8" 不起作用。

**解决方案**：在 app.yaml 添加库

```
- name: webob
  version: "1.2.3" 
```

# matlab - MATLAB - 带有布尔值的棘手 ode 系统

> ID：14173377
> 
> 赞同：2
> 
> 时间：2013-01-05T15:44:55.037
> 
> 标签：matlab, boolean, derivative

已编辑：感谢您的支持，现在我终于添加了图片。添加了完整的 m.file，尽管我认为没有必要。代码的关键是。

```
xp(2)=...-((x(2)>=X2)&(xp(3)>=0)...; 
xp(3)=...-((x(3)>=X3)&(xp(2)>=0))...; 
```

完整代码：

```
function xp=uzdevums1(t,x)
%parametr values
r1 = 0.1; r2 = 1; r3 = 0.2;
K1=100;K2 = 100; K3 = 100;
X2=25;X3=10;
speedx2 = 0.02; speedx3=0.02;
%ode system
xp=zeros(3,1);
xp(1)=r1*(1-x(1)/(x(2)+x(3)))*x(1);
xp(2)=r2*(1-x(2)/K2)*x(2)-((x(2)>=X2)&(xp(3)>=0)&xp(1)>0)*x(2)*x(1)*speedx2; 
xp(3)=r3*(1-x(3)/K3)*x(3)-((x(3)>=X3)&(xp(2)>=0))*x(3)*x(1)*speedx3; 
```

从外壳：[T,X]=ode45('uzdevums1',[0 60],[10 80 20]); 这个想法是 xp(2) 中的布尔表达式（绿线的导数）在接近 X2=25 之前应该为真，但 xp(3) 的布尔表达式（红线的导数）在 xp(2) 改变之前应该为假符号。

红线 = x3 没问题.. 随着 xp(2) 的符号变化，布尔表达式现在为真，红线改变方向，但绿线没有这样做......换句话说，x(2)>=X2 （这很好）和 xp(3)>=0 （我不明白）

换句话说：红线正在下降，xp(3)>=0 怎么来的？

在第二张图片中，我添加了 xp(1)>0 并且布尔表达式最终变为假......但为什么不作为 xp(3) 更改符号？！

谢谢

![在此处输入图像描述](../Images/d76c3dae0e6a0b67fcd702e5459e4719.png) ![在此处输入图像描述](../Images/1dd4895e5bc81362a7acbf9fafb6b035.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:07:43.603

如果我对您的理解正确，您需要帮助的主要是解释为什么该语句`xp(3)>=0`评估为真。

`xp`一步一步地研究你的计算。

```
xp=zeros(3,1);
xp(1)=r1*(1-x(1)/(x(2)+x(3)))*x(1);
xp(2)=r2*(1-x(2)/K2)*x(2)-((x(2)>=X2)&(xp(3)>=0)&xp(1)>0)*x(2)*x(1)*speedx2; 
xp(3)=r3*(1-x(3)/K3)*x(3)-((x(3)>=X3)&(xp(2)>=0))*x(3)*x(1)*speedx3; 
```

您尝试使用`xp(3)`计算时的值`xp(2)`（反之亦然）。但是`xp(3)`当您在计算 xp(2) 时使用它时仍然为零，因此表达式`xp(3)>=0`将始终计算为真。

# python - PyQT 将 lambda 函数连接到 Signal

> ID：14173380
> 
> 赞同：5
> 
> 时间：2013-01-05T15:45:03.110
> 
> 标签：python, pyqt

我遇到了以下问题。我正在尝试将 lambda 函数连接到 Signal 以最终传递一些额外的数据。

```
def createTimeComboBox(self,slotCopy):
    timeComboBox = QComboBox()

    #...

    cmd = lambda func=self.test:func()
    self.connect(timeComboBox, SIGNAL("currentIndexChanged(int)"),cmd)

#...

def test(self, value):
    print value 
```

当我运行时，`createTimeComboBox(),`我收到此错误：

```
TypeError: 'int' object is not callable 
```

改变

```
self.connect(timeComboBox, SIGNAL("currentIndexChanged(int)"),cmd) 
```

到

```
self.connect(timeComboBox, SIGNAL("currentIndexChanged(int)"),self.test) 
```

工作正常，但我也希望能够传递`slotCopy`变量，所以假设我需要使用这种`lambda`方法。

我以前用`QPushButton`'s`clicked()`信号做过这个，效果很好。

```
def createToDoctorButton(self,extraData):
    toDoctorButton = QPushButton()

    cmd = lambda func=self.goToDoctor:func(extraData)
    self.connect(toDoctorButton,  SIGNAL('clicked()'),cmd)

    return toDoctorButton

def goToDoctor(self,extraData):
    print extraData 
```

我希望这是有道理的——有人有什么想法吗？感谢您的任何建议！干杯戴夫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T21:27:41.247

您`lambda`接受一个参数 ( `func`)：

```
lambda func=self.test:func() 
```

虽然参数有一个默认值，但如果传递了一个参数，它将被替换。查看信号，`currentIndexChanged(int)`表明该信号将传递一个整数参数。`func`将是来自 的整数`currentIndexChanged`。稍后，doing`func()`将有效地尝试调用一个显然不合法的整数对象（如错误所示）

您需要另一个参数`lambda`来“捕获”传递的参数而不覆盖`func`参数：

```
cmd = lambda value, func=self.test: func(value) 
```

顺便说一句，你的`test`方法需要一个参数，所以你不能只做`func()`.

信号没有这个问题，`clicked()`因为它没有传递参数来替换默认值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T18:05:58.710

看看这是否适合你：

```
timeComboBox.currentIndexChanged.connect(self.test) 
```

这是一个小的工作示例，演示了使用和不使用 lambda 的新型信号/插槽连接：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class myWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.comboBox = QtGui.QComboBox(self)
        self.comboBox.addItems([str(x) for x in range(3)])
        self.comboBox.currentIndexChanged.connect(self.on_comboBox_currentIndexChanged)

        slotLambda = lambda: self.on_comboBox_currentIndexChanged_lambda("some_value")
        self.comboBox.currentIndexChanged.connect(slotLambda)

    @QtCore.pyqtSlot(int)
    def on_comboBox_currentIndexChanged(self, value):
        print value

    @QtCore.pyqtSlot(str)
    def on_comboBox_currentIndexChanged_lambda(self, string):
        print string

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# java - 删除 jtabbedpane 的最后一个选项卡

> ID：14173383
> 
> 赞同：1
> 
> 时间：2013-01-05T15:45:27.367
> 
> 标签：java, swing, jtabbedpane

我有点困惑，因为我无法删除我的 JTabbedPane 的最后一个选项卡。我读了这两个问题： [第一个问题](https://stackoverflow.com/questions/1013479/after-calling-jtabbedpane-removeall-the-jtabbedpane-still-has-x-number-of-tab)和[第二个问题](https://stackoverflow.com/questions/1013479/after-calling-jtabbedpane-removeall-the-jtabbedpane-still-has-x-number-of-tab)。但这对我没有帮助。这就是我的代码的样子：

```
public void updateTabbedPane()
{
    // Remove the MouseListener
    tabbedPane.removeMouseListener(tabbedPaneMouseListener);

    // Remove all Tabs
    while (tabbedPane.getTabCount() > 0)
    {
        tabbedPane.remove(0);
    }

    // Sort the ArrayList
    Collections.sort(arrayList);

    // Add all Element to the JTabbedPane
    for (int i = 0; i < arrayList.size(); i++)
    {
        tabbedPane.addTab(arrayList.get(i).getName(),
                new JScrollPane(...);
    }

    // Add the MouseListiner to the JTabbedPane again
    tabbedPane.addMouseListener(tabbedPaneMouseListener);
} 
```

如果将对象添加/删除到列表中，我将使用此方法添加/删除选项卡。我还对 ArrayList 进行了排序，因为我想让选项卡按升序排列。

正如在两个问题的答案中所说，我在删除选项卡之前删除了 MouseListener，但最后一个选项卡最终仍然可见。我也试过setVisible()、removeAll()。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:27:26.937

看来您可能没有在[Swing 的 GUI 线程](http://docs.oracle.com/javase/6/docs/api/javax/swing/package-summary.html)中运行此代码。`Runnable`是在传递给的 a 里面`SwingUtilities.invokeLater(...)`吗？`removeAll`如果是这样的话，应该可以工作。

此外，您不应该直接在组件上使用-`setVisible`您应该在.`setSelectedIndex``setSelectedComponent``JTabbedPane`

Moreover, removing all the tabs and creating a new `JScrollPane`again for all but one of them seems horribly inefficient when the total order of the tabs doesn't change. 也许您应该按排序顺序维护一个列表，例如 a `TreeSet`，并在有更新时在适当的索引处插入和删除一个选项卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T18:12:43.783

感谢您对 Andrew Thompson 和 Andrew Mao 的建议。

@Mao：1.）我正在使用 Swing GUI 线程。2.)`setVisible`只是我解决问题的最后一个想法 :-P 3.) 当然这样会更好，但在这种情况下我有点脏，因为不会有超过三个标签同时。但我想我以后会改变它。

@Thompson：因为 SSCCE，我为我的问题创建了一个项目（您可以在下面看到），以显示我的问题。但是这个项目成功了，所以我将我的测试项目的小步骤与我的真实项目进行了比较，发现了一个小错误。

我的问题是我在删除 的对象之前更新了选项卡，`ArrayList`因此 GUI 仍将删除的对象显示为选项卡。

对于任何对我的`JTabbedPane`测试项目感兴趣的人：

```
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.ArrayList;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;
import javax.swing.WindowConstants;

public class TabbedTest extends JFrame {

    private JTabbedPane tabbedPane = null;
    private MouseListener tabbedPaneMouseListener = null;
    private ArrayList<String> nameOfTab = new ArrayList<String>();
    private static int counter = 1;

    public TabbedTest() {
        setSize(500, 500);
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setLayout(new GridLayout(0, 1));
        JPanel buttonPanel = new JPanel();

        JButton addButton = new JButton("add");
        addButton.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                addElementToArrayList();
            }
        });
        JButton removeButton = new JButton("remove");
        removeButton.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                removeElementFromArrayList();
            }
        });

        tabbedPane = new JTabbedPane();
        tabbedPaneMouseListener = (new MouseAdapter() {

            public void mouseClicked(MouseEvent e) {
                if (SwingUtilities.isLeftMouseButton(e)) {
                    if (e.getClickCount() == 1) {
                        System.out.println("Do Something");
                    }
                }
            }
        });
        tabbedPane.addMouseListener(tabbedPaneMouseListener);

        buttonPanel.add(addButton);
        buttonPanel.add(removeButton);
        add(buttonPanel);
        this.add(tabbedPane);
    }

    private void addElementToArrayList() {
        nameOfTab.add("" + counter++ + ". element");
        updateTabbedPane();
    }

    private void removeElementFromArrayList() {
        if (nameOfTab.size() > 0) {
            nameOfTab.remove(0);
        }
        updateTabbedPane();
    }

    public void updateTabbedPane() {
        tabbedPane.removeMouseListener(tabbedPaneMouseListener);
        while (tabbedPane.getTabCount() > 0) {
            tabbedPane.remove(0);
        }
        for (int i = 0; i < nameOfTab.size(); i++) {
            tabbedPane.addTab(nameOfTab.get(i), new JLabel(nameOfTab.get(i)));
        }
        tabbedPane.addMouseListener(tabbedPaneMouseListener);
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new TabbedTest().setVisible(true);
            }
        });
    }
} 
```

# java - 为什么我的简化 DES 实现在 Cp1252 编码下工作正常，但在 UTF-8 下却不行？

> ID：14173393
> 
> 赞同：0
> 
> 时间：2013-01-05T15:46:13.920
> 
> 标签：java, encryption, utf-8, cp1252

我昨天问了以下问题，但由于我没有真正包含有关我的实际问题的任何细节，因此没有引起太多关注。

[Eclipse：在文本编辑器中使用 UTF-8 编码会使字符串无法正常工作，我该如何解决？](https://stackoverflow.com/questions/14167880/eclipseusing-utf-8-encoding-in-the-text-editor-make-the-strings-not-work-proper)

我将尝试尽可能多地分析我的问题，以便让您清楚地了解正在发生的事情。

我有一个大学项目，我应该为教育目的实现简化的 DES 算法。该算法是一种加密算法，它使用 10 位密钥来加密 8 位数据。

在实现中，我想包括加密任何字符串。

所以我编写了 8 位加密的代码，它对各种输入都非常有效。为了包含字符串加密支持，我使用了该函数`String.getBytes()`，将字符串的所有字节保存在一个变量中`byte[] data`

然后我遵循了这个逻辑：

```
int i;
for(i=0; i< data.length; i++)
    data[i] = encrypt(data[i]); 
```

对于解密，我遵循以下逻辑：

```
int i;
for(i=0; i< data.length; i++)
    data[i] = encrypt(data[i]); 
```

这是`main`函数中的实际代码

```
public static void main(String[] args){

    short K = (short) Integer.parseInt("1010010001",2);
    SDEncryption sdes = new SDEncryption(K); //K is the 10 bit key

    String test = "INFO BOB 57674";

    //let's encrypt the String test
    String enc = sdes.encrypt(test.getBytes());

    //let's decrypt the encrypted String of the initial String
    String dec = sdes.decrypt(enc.getBytes());
} 
```

通过使用默认编码 Cp1252。我尝试加密字符串并得到以下结果：

```
Initial Text: INFO BOB 57674
Encrypted Text: ÅO [áa[aá»j×jt
Decrypted Text: INFO BOB 57674 
```

为了在每次加密和解密数据时查看实际位表示，我创建了以下函数以显示每个字符串的所有数据：

```
public void show(byte[] data){
    //ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Ï‰Î½ 
    //note how the Greek letters aren't displayed at all under Cp1252

    int i;
    for(i=0;i<data.length;i++){

        short mask = (short) (1<<7); //10000000
        while(mask>0){
            if((data[i]&mask) == 0)
                System.out.print("0");
            else
                System.out.print("1");

            mask = (short) (mask >> 1);
        }
        if(i < data.length - 1){

            System.out.print(" ");
        }
    }
    System.out.println();
} 
```

所以我得到了以下结果：

```
Initial Text(binary): 01001001 01001110 01000110 01001111 00100000 01000010 01001111 01000010 00100000 00110101 00110111 00110110 00110111 00110100
Encrypted Text(binary): 11000101 01001111 00100000 01011011 11100001 01100001 01011011 01100001 11100001 10111011 01101010 11010111 01101010 01110100
Decrypted Text(binary): 01001001 01001110 01000110 01001111 00100000 01000010 01001111 01000010 00100000 00110101 00110111 00110110 00110111 00110100 
```

似乎一切都按预期工作。不过，为了在代码编辑器中支持希腊字母，我不得不将编码更改为 UTF-8。

再次运行所有内容后，我得到以下结果：

```
Initial Text: INFO BOB 57674
Encrypted Text: �O [�a[a�j�jt
Decrypted Text: ���NFO���BOB���7���74 
```

请注意解密文本的某些单词是如何正确显示的，例如`NFO`和`BOB`。在我看来，位操作似乎存在某种问题，好像 Eclipse 无法识别遵循 UTF-8 规则的位序列。

以下是二进制形式的结果：

```
Initial Text(binary): 01001001 01001110 01000110 01001111 00100000 01000010 01001111 01000010 00100000 00110101 00110111 00110110 00110111 00110100
Encrypted Text(binary): 11101111 10111111 10111101 01001111 00100000 01011011 11101111 10111111 10111101 01100001 01011011 01100001 11101111 10111111 10111101 01101010 11101111 10111111 10111101 01101010 01110100
Decrypted Text(binary): 11101111 10111111 10111101 11101111 10111111 10111101 11101111 10111111 10111101 01001110 01000110 01001111 11101111 10111111 10111101 11101111 10111111 10111101 11101111 10111111 10111101 01000010 01001111 01000010 11101111 10111111 10111101 11101111 10111111 10111101 11101111 10111111 10111101 00110111 11101111 10111111 10111101 11101111 10111111 10111101 11101111 10111111 10111101 00110111 00110100 
```

现在我可以清楚地看到问题所在了。似乎 UTF-8 向字符串添加了更多字节。但是我不确定为什么。我的意思是初始文本似乎具有相同数量的字节，那么为什么在加密后添加这些字节，而在解密后添加更多字节呢？

我将不胜感激提供的任何帮助。先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T15:56:49.313

每次您这样做时`String.getBytes()`，您都会隐式使用您的平台默认编码将字符转换为字节。如果字符串包含无法使用您平台的默认编码表示的字符，则会丢失信息。因此，请使用支持地球上每个字符的显式编码，例如 UTF8: `string.getBytes("UTF8")`。

同样，当您这样做时`new String(bytes)`，您使用平台的默认编码将字节转换为字符。如果字节实际上是使用另一种编码的文本编码，或者根本不是字符，而是纯粹的二进制信息，那么您也会丢失信息。

加密是二进制操作。它接受字节并返回其他字节。无论编码是什么，您都不能盲目地将字节转换为字符，因为并非所有字节都表示有效字符。如果要将二进制信息（如加密文本）转换为字符串，请使用 Hex 或 Base64 编码。

所以加密过程应该是：

```
String clearText = ...:
byte[] clearTextAsBytes = clearText.getBytes("UTF8");
byte[] encryptedBinary = encrypt(clearTextAsBytes);
String encryptedBinaryAsPrintableChars = toBase64(encryptedBinary); 
```

并且解密过程应该是对称的：

```
String encryptedBinaryAsPrintableChars = ...;
byte[] encryptedBinary  = fromBase64(encryptedBinaryAsPrintableChars);
byte[] decryptedTextAsBytes = decrypt(encryptedBinary);
String decryptedText = new String(decryptedTextAsBytes, "UTF8"); 
```

# asp.net-mvc - ASP SimpleMembership 是否替换了 ASP.NET 角色和成员资格提供程序系统

> ID：14173394
> 
> 赞同：2
> 
> 时间：2013-01-05T15:46:16.087
> 
> 标签：asp.net-mvc, asp.net-mvc-4, membership

我读了 Jon Glaway 的以下引述：

> SimpleMembership 被设计为替代以前的 ASP.NET 角色和成员资格提供程序系统

有人可以澄清这是否正确。我确实理解简单的成员资格使我能够将更多信息存储在具有两列的简单 UserAdmin 表中，但它是否也“替换了 ASP.Net 角色系统？我认为要实现角色，我仍然需要在很多方面进行设置和以前一样。

例如，以下内容在新旧 SimpleMembership 中都不起作用：

```
Roles.CreateRole("Administrator"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:00:55.537

是的，它很好地取代了角色系统。只需在您的数据库表中创建一个新的角色条目。

话虽如此，您仍然可以使用旧的会员系统。新的缺乏许多功能，正如名字所说的那样......简单。

4.5 的 Web 表单模板根本不使用简单的成员资格，所以这取决于您。

我更喜欢简单的成员资格，因为您在大多数情况下直接处理表格。作为 webmatrix 的一部分，简单的会员资格也已经存在了几年，您可以在其中找到参考资料。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T21:12:05.963

本文[http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms- and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)将帮助您更多地了解两者之间的差异。您还将了解简单的会员资格是对前者的改进（升级）

# javascript - 如何添加或包装每个标签和 div？

> ID：14173399
> 
> 赞同：1
> 
> 时间：2013-01-05T15:46:32.023
> 
> 标签：javascript, jquery, each

我有这个标签和`div`s 序列，我需要环绕每组 1 个标签 + 1 个 div 另一个 div。我知道我必须使用 .each`.wrap`或者`.prepend`我需要帮助。我怎样才能做到这一点？

HTML：

```
<label>label</label>
<div>text</div>
<label>label</label>
<div>text</div>
```

**[这里我设置了一个 jsFiddle 演示。](http://jsfiddle.net/UNyeQ/)**

结果应该是这样的：

```
<div class="1">
  <label>label</label>
  <div>text</div>
</div>
<div class="1">
  <label>label</label>
  <div>text</div>
</div>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:50:36.873

或者，使用`.wrapAll()`.

```
$("label").each(function(){
  var $this = $(this);
  $this.add($this.next()).wrapAll("<div class='1'/>");
}); 
```

[**看这里。**](http://jsfiddle.net/tW2Np/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T15:51:42.563

假设这个标记总是这样：

```
$("label").each(function () {
  $(this).next("div").andSelf().wrapAll("<div>");
}); 
```

您可以省略`"div"`of `.next`，但它可以防止其他元素妨碍您。

[http://jsfiddle.net/UNyeQ/3/](http://jsfiddle.net/UNyeQ/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T15:49:40.490

您可以通过遍历标签并包装/附加每个标签来做到这一点：

```
$('label').each(function() {
    $(this).wrap('<div class="l"/>').parent().next().appendTo($(this).parent());
}); 
```

**演示**：http: [//jsfiddle.net/UNyeQ/1/](http://jsfiddle.net/UNyeQ/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T16:26:10.347

这可能不是最有效的方法，但经过多次不同的尝试，这就是我想出的：

```
$('label').each(function() {
  var next = $(this).nextAll('div')[0];
  $(this).wrap('<div class="new" />').append(next);
}); 
```

我尝试过的所有其他方法都会选择标签和 div 分别迭代它们，所以它不会将它们配对在同一个 div 下。`div`将 next 保存到变量的额外工作是因为`nextAll()`对同一父级的兄弟姐妹进行操作 - 可能`label`会成为新`div`之前的子级`nextAll()`，否则会被评估。

# windows-phone-7 - 在 vmware player 上运行 wp8 模拟器不支持 Intel 硬件辅助虚拟化

> ID：14173405
> 
> 赞同：0
> 
> 时间：2013-01-05T15:46:53.233
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-8-emulator

我在 vmware 播放器上运行 wp8 模拟器，但它总是报告一般错误。所以我运行核心信息并获取信息

系统不支持 Intel 硬件辅助虚拟化

只是想知道这是否是因为 vmware。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:58:12.437

> 仅 64 位 Windows 8 Pro 或更高版本支持 Windows Phone 8 应用程序开发。您不能在 Windows 7、Windows Server 2008 或 Windows Server 2012 上开发 Windows Phone 8 应用程序。

在这里，您对 WP8 Emulator 有系统要求：

[模拟器的系统要求](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626524%28v=vs.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:49:54.477

我会说这是 VMware Player 给你的问题。我有一些类似的设置 - （在 VNware Player 下运行 Windows 8 Professional 64 的 Windows 7 64）。我没有下载 Windows Phone 8 SDK，所以我下载了它并尝试创建一个项目并在模拟器下运行它，我得到了相同的通用错误。可能发生的情况是您在虚拟机内部运行虚拟机，因为您使用的是仿真处理器，因此您无法使用英特尔处理器扩展。

如果我是你，我会使用[GRC 的 Securable 实用程序](http://www.grc.com/securable.htm)来确定你的处理器是否支持 64 位和硬件扩展。如果是这样，我会将您的系统配置为双启动、Xp 和 Windows 8。

# c++ - Allegro，输出鼠标点击

> ID：14173406
> 
> 赞同：1
> 
> 时间：2013-01-05T15:46:55.090
> 
> 标签：c++, click, mouse, coordinates, allegro

我想在图形窗口中打印出我的鼠标坐标，当用户点击它时，应该会出现一条消息“点击”。但问题是当用户点击它时，我收到的不是 1 条消息，而是 5-10 条消息。我知道这可能是因为我释放按钮的速度有多快。有没有办法只打印一次？

```
#include <allegro.h>
#include <iostream>

int main(){

    allegro_init();
    install_keyboard();
    install_mouse();
    set_color_depth(32);
    set_gfx_mode(GFX_AUTODETECT_WINDOWED, 640, 480, 0, 0);

    BITMAP *pic = load_bitmap("mouse.bmp",NULL);
    BITMAP *buffer = create_bitmap(640,480);

    int x = 0, y = 0;

    while(!key[KEY_ESC]){
        blit(buffer, screen, 0,0,0,0, buffer->w,buffer->h);

        draw_sprite(buffer, pic, mouse_x, mouse_y);
        blit(buffer, screen, 0,0,0,0, buffer->w, buffer->h);
        clear_bitmap(buffer);

        if(mouse_x!=x && mouse_y!=y){
            std::cout<<mouse_x<<":"<<mouse_y<<std::endl;
        }
        if(mouse_b&1){
            std::cout<<std::endl<<">>CLICKED<<"<<std::endl;
        }

        x=mouse_x, y=mouse_y;
    }

    destroy_bitmap(pic);
    destroy_bitmap(buffer);
    return 0;
}
END_OF_MAIN() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:52:51.850

是否`mouse_b`保持鼠标状态？如果是这样，无论您的鼠标按下多长时间，它都可能每帧输出一次消息。

与您的处理方式类似`x`，`y`存储按钮的先前状态并仅在状态更改时发送消息，这应该只给您 1 条消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T01:53:02.120

使用 allegro 事件要容易得多。[以下是 allegro wiki 解释事件](http://wiki.allegro.cc/index.php?title=Basic_Keyboard_Example)的方式。

以下代码将完成您的任务。

```
 if(ev.type == ALLEGRO_EVENT_MOUSE_BUTTON_DOWN) {
      std::cout<<std::endl<<">>CLICKED<<"<<std::endl;    
  }
  else if(ev.type == ALLEGRO_EVENT_MOUSE_AXES ||
          ev.type == ALLEGRO_EVENT_MOUSE_ENTER_DISPLAY) { 
        std::cout<<mouse_x<<":"<<mouse_y<<std::endl;
  } 
```

# jquery - jQuery查找具有特定文本的类并在条件为真时更改父类的css

> ID：14173407
> 
> 赞同：0
> 
> 时间：2013-01-05T15:46:56.313
> 
> 标签：jquery

我正在尝试使用 Jquery 实现以下目标，但我不确定如何去做。任何帮助将不胜感激。谢谢你。

```
<script>
$a = array(1,2);

if ($('.box:contains($a)')){
    $('.inbox' //the .inbox where .box text = $a).css(//something);
}

</script>

<body>
<div class='inbox'>
    <div class='box'>1</div>
</div>

<div class='inbox'>
    <div class='box'>2</div>
</div>

<div class='inbox'>
    <div class='box'>3</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:01:18.600

Something like this?

```
$(document).ready(function () {
  $a = [1, 2];
  $('.box').each(function () {
    if ($.inArray(parseInt(this.innerText), $a) > -1) {
      $(this).closest('.inbox').css({
        border: "5px solid red"
      });
    }
  });
}); 
```

Check the working fiddle [here](http://jsfiddle.net/johnbk/TTjY7/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T15:54:25.990

jQuery 有一个名为 .parent() 的方法，它返回父元素。

例如：

```
<script>
$(document).ready(function(){
    $('span:contains("foo")').parent().css('color', 'red');
});
</script>
</head>
<body>

<div>
    <span>foo</span>
</div>

<div>
    <span>bar</span>
</div> 
```

# java - 如何使用 currentTimeMillis() 方法获得一小部分的执行时间

> ID：14173414
> 
> 赞同：0
> 
> 时间：2013-01-05T15:47:55.013
> 
> 标签：java, performance, optimization, execution-time, elapsedtime

我需要获取 Java 中函数的执行时间。我知道我可以使用两种方法： 但是我了解到，`currentTimeMillis();`如果我需要挂钟时间（即，就好像我从挂钟测量执行花费了多少时间一样，而不是处理时间）。`nanoTime();``currentTimeMillis();`

但`currentTimeMillis();`不能给我小数。例如，如果执行时间小于 1 毫秒，则返回 0。即使小于 1，我也需要时间，例如 0.05 毫秒。这是一个当方法返回 0 时的简单示例。

```
long startTime=System.currentTimeMillis();
for(int x=0; x<10;x++)
{
    System.out.println("-");
}

long execTime=System.currentTimeMillis() - startTime; 
```

即使它返回时间，它也会返回 30 或 40。但是，我需要一个更精确的数字，比如 30.00012。另外，方法返回类型是`long`，但我将其更改`double`为我想要浮点数，这有什么害处吗？你能告诉我正确的方法，我可以用小数来测量我的java方法执行挂钟时间（例如不是8.0而是8.287335）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T15:50:12.477

> 我知道我可以使用两种方法：`currentTimeMillis()`和`nanoTime()`. 但是我了解到，`currentTimeMillis()`如果我需要挂钟时间（即，就好像我从挂钟测量执行花费了多少时间。而不是处理时间），那会更准确。

这只是部分准确。

这两个函数都返回挂钟时间，而不是 CPU 时间。

除了精度之外，不同之处在于`currentTimeMillis()`它与一个众所周知的时间点相关，而`nanoTime()`与某个任意时间点相关。这意味着您无法轻松地将结果`nanoTime()`转换为您和我都能理解的时间戳。

您仍然可以使用它来测量挂钟间隔：只需调用`nanoTime()`两次并获取差值。这几乎就是它的设计目的。

最后，如果您使用它来分析一些代码，请阅读[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)有很多微妙之处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:50:22.363

使用`System.nanoTime()`它具有纳秒级的精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:07:08.690

尽管您可以并且应该使用 nanoTime 来获取代码块的最精确的可用执行时间。但是，您应该谨慎使用它，因为有许多外部问题会影响执行时间。

例如，每当一个方法在最近没有运行的情况下被调用，都会有将它放入缓存的开销。根据同一页面中的其他内容，甚至可能会读取磁盘以将其放入内存。

如果 JVM 只运行一次与运行多次相比，它可能会以不同的方式对待方法。

通常，当您关心微秒时，是因为您正在测量的事物将在作业或事务中运行多次。要获得准确的衡量标准，您需要跨多次通话进行衡量。这样做还可以减少调用 nanoTime 的开销时间的影响。

# gzip - Opencart Gzip 输出压缩级别不起作用

> ID：14173415
> 
> 赞同：1
> 
> 时间：2013-01-05T15:48:01.080
> 
> 标签：gzip, opencart

当我从管理菜单启用 Opencart 的输出压缩级别时，浏览器没有加载我的页面

例如，谷歌浏览器给出以下结果：

330（净：：ERR_CONTENT_DECODEDING_FAILED）：未知错误。

歌剧显示未知的特殊字符等。

我怎样才能找到这个错误背后的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:27:17.120

将此添加到您相应的 tpl 将解决问题。

```
<?php
ini_set("zlib.output_compression", "Off");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T06:13:59.090

如果您打开商店/管理员而不是显示此错误的内容 - 在商店设置中禁用压缩。鉴于在这种情况下可以访问管理员，您可能不会，您可以通过 phpmyadmin 执行以下查询（打开数据库后）：

```
UPDATE `{PREFIKS_TABLITS setting`} SET ` value` = '0' WHERE `group` = 'config' AND ` key` = 'config_compression' ; 
```

PREFIKS_TABLITS {} 你可以在文件中看到 config.php ：

```
define ( 'DB_PREFIX' , 'oc_' ); 
```

原文：[https ://opencartforum.com/topic/15067-resheno-error-330-neterr_content_decoding_failed/](https://opencartforum.com/topic/15067-resheno-error-330-neterr_content_decoding_failed/)

# python - 在 Python 中使用 string.translate 音译西里尔字母？

> ID：14173421
> 
> 赞同：20
> 
> 时间：2013-01-05T15:49:29.927
> 
> 标签：python, transliteration

我在`UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-51: ordinal not in range(128)`尝试使用`string.maketrans`时遇到异常`Python`。我对以下代码（[gist](https://gist.github.com/4462092)）中的这种错误感到有点气馁：

```
# -*- coding: utf-8 -*-

import string

def translit1(string):
    """ This function works just fine """
    capital_letters = {
        u'А': u'A',
        u'Б': u'B',
        u'В': u'V',
        u'Г': u'G',
        u'Д': u'D',
        u'Е': u'E',
        u'Ё': u'E',
        u'Ж': u'Zh',
        u'З': u'Z',
        u'И': u'I',
        u'Й': u'Y',
        u'К': u'K',
        u'Л': u'L',
        u'М': u'M',
        u'Н': u'N',
        u'О': u'O',
        u'П': u'P',
        u'Р': u'R',
        u'С': u'S',
        u'Т': u'T',
        u'У': u'U',
        u'Ф': u'F',
        u'Х': u'H',
        u'Ц': u'Ts',
        u'Ч': u'Ch',
        u'Ш': u'Sh',
        u'Щ': u'Sch',
        u'Ъ': u'',
        u'Ы': u'Y',
        u'Ь': u'',
        u'Э': u'E',
        u'Ю': u'Yu',
        u'Я': u'Ya'
    }

    lower_case_letters = {
        u'а': u'a',
        u'б': u'b',
        u'в': u'v',
        u'г': u'g',
        u'д': u'd',
        u'е': u'e',
        u'ё': u'e',
        u'ж': u'zh',
        u'з': u'z',
        u'и': u'i',
        u'й': u'y',
        u'к': u'k',
        u'л': u'l',
        u'м': u'm',
        u'н': u'n',
        u'о': u'o',
        u'п': u'p',
        u'р': u'r',
        u'с': u's',
        u'т': u't',
        u'у': u'u',
        u'ф': u'f',
        u'х': u'h',
        u'ц': u'ts',
        u'ч': u'ch',
        u'ш': u'sh',
        u'щ': u'sch',
        u'ъ': u'',
        u'ы': u'y',
        u'ь': u'',
        u'э': u'e',
        u'ю': u'yu',
        u'я': u'ya'
    }

    translit_string = ""

    for index, char in enumerate(string):
        if char in lower_case_letters.keys():
            char = lower_case_letters[char]
        elif char in capital_letters.keys():
            char = capital_letters[char]
            if len(string) > index+1:
                if string[index+1] not in lower_case_letters.keys():
                    char = char.upper()
            else:
                char = char.upper()
        translit_string += char

    return translit_string

def translit2(text):
    """ This method should be more easy to grasp, 
    but throws exception:
    UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-51: ordinal not in range(128)
    """

    symbols = string.maketrans(u"абвгдеёзийклмнопрстуфхъыьэАБВГДЕЁЗИЙКЛМНОПРСТУФХЪЫЬЭ",
                               u"abvgdeezijklmnoprstufh'y'eABVGDEEZIJKLMNOPRSTUFH'Y'E")
    sequence = {
        u'ж':'zh',
        u'ц':'ts',
        u'ч':'ch',
        u'ш':'sh',
        u'щ':'sch',
        u'ю':'ju',
        u'я':'ja',
        u'Ж':'Zh',
        u'Ц':'Ts',
        u'Ч':'Ch'
    }

    for char in sequence.keys():
        text = text.replace(char, sequence[char])

    return text.translate(symbols)

if __name__ == "__main__":
    print translit1(u"Привет") # prints Privet as expected
    print translit2(u"Привет") # throws exception: UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-51: ordinal not in range(128) 
```

原始轨迹：

```
Traceback (most recent call last):
  File "translit_error.py", line 124, in <module>
    print translit2(u"Привет") # throws exception: UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-51: ordinal not in range(128)
  File "translit_error.py", line 103, in translit2
    u"abvgdeezijklmnoprstufh'y'eABVGDEEZIJKLMNOPRSTUFH'Y'E")
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-51: ordinal not in range(128) 
```

我的意思是，为什么 Python还是`string.maketrans`要使用`ascii`表？为什么英文字母超出 0-128 范围？

```
$ python -c "print ord(u'A')"
65
$ python -c "print ord(u'z')"
122
$ python -c "print ord(u\"'\")"
39 
```

几个小时后，我觉得解决这个问题已经筋疲力尽了。

有人可以说发生了什么以及如何解决吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-11T07:22:41.083

您可以使用音译包（[https://pypi.python.org/pypi/transliterate](https://pypi.python.org/pypi/transliterate)）

示例 #1：

```
from transliterate import translit
print translit("Lorem ipsum dolor sit amet", "ru")
# Лорем ипсум долор сит амет 
```

示例 #2：

```
print translit(u"Лорем ипсум долор сит амет", "ru", reversed=True)
# Lorem ipsum dolor sit amet 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-05T16:01:04.467

当与 unicode 字符串一起使用时，[translate的行为会有所不同。](http://docs.python.org/2/library/stdtypes.html#str.translate)`maketrans`您必须提供字典而不是表格`ord(search)->ord(replace)`：

```
symbols = (u"абвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ",
           u"abvgdeejzijklmnoprstufhzcss_y_euaABVGDEEJZIJKLMNOPRSTUFHZCSS_Y_EUA")

tr = {ord(a):ord(b) for a, b in zip(*symbols)}

# for Python 2.*:
# tr = dict( [ (ord(a), ord(b)) for (a, b) in zip(*symbols) ] )

text = u'Добрый Ден'
print text.translate(tr)  # looks good 
```

也就是说，我建议不要重新发明轮子并使用已建立的库： http: [//pypi.python.org/pypi/Unidecode](http://pypi.python.org/pypi/Unidecode)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-02-18T03:57:59.340

查看[CyrTranslit](https://pypi.python.org/pypi/cyrtranslit)包，它专门用于在西里尔字母文本之间进行音译。它目前支持塞尔维亚语、黑山语、马其顿语和俄语。

示例用法：

```
>>> import cyrtranslit
>>> cyrtranslit.supported()
['me', 'sr', 'mk', 'ru']

>>> cyrtranslit.to_latin('Моё судно на воздушной подушке полно угрей', 'ru')
'Moyo sudno na vozdushnoj podushke polno ugrej'

>>> cyrtranslit.to_cyrillic('Moyo sudno na vozdushnoj podushke polno ugrej')
'Моё судно на воздушной подушке полно угрей' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-03T11:01:12.197

这是另一个更准确的音译的简短解决方案：

```
symbols = (u"абвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ ",
    (*list(u'abvgdee'), 'zh', *list(u'zijklmnoprstuf'), 'kh', 'z', 'ch', 'sh', 'sh', '',
    'y', '', 'e', 'yu','ya', *list(u'ABVGDEE'), 'ZH', 
    *list(u'ZIJKLMNOPRSTUF'), 'KH', 'Z', 'CH', 'SH', 'SH', *list(u'_Y_E'), 'YU', 'YA', ' '))

coding_dict = {source: dest for source, dest in zip(*symbols)}
translate = lambda x: ''.join([coding_dict[i] for i in x])

text = u'Добро пожаловать'
translate(text)
# 'Dobro pozhalovat' 
```

# java - 将二维字符数组打印到 Swing Gui (Java)

> ID：14173423
> 
> 赞同：1
> 
> 时间：2013-01-05T15:49:53.857
> 
> 标签：java, swing

我目前正在尝试将 Java 应用程序（也是由我制作的）从基于控制台的一对一转换为使用基于 Swing 的 GUI。一切都很好，但我不太了解 Swing，所以这有点困难。

我当前的问题是将一组字符打印到输出中。最初，我能够通过明智地使用 for 循环和 System.out.print(theworld[j][i]); 直接打印到控制台；（其中 i 和 j 遍历循环，而 theworld 是有问题的数组），但我不知道如何获得类似于用于 Swing GUI 的东西。

具体来说，它像这样打印到控制台：

```
for (int i = 0; i < ydimension; i++){
  for (int j = 0; j < xdimension; j++){
    System.out.print(theworld [j][i]);
  }
System.out.println();
} 
```

目前，我有一个附加了 JMenuBar 的 JFrame，这一切都按预期工作。我想要的是阵列显示在框架上（或附加的面板上）以响应刺激，无论是按下按钮还是计时器滴答声。

另一件事是，阵列将在每个滴答声中更新，这应该反映在最终打印的阵列中，所以我会在打印阵列或类似的东西之前清除屏幕吗？

谢谢。

编辑：再次查看我的代码后，我意识到在问题中我省略了外部 for 循环中的 println 。它应该逐行打印，而不是全部打印为一行。上面的代码已被更正以反映这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:11:55.777

`JTable`如果您使用 a而不是尝试直接输出文本，也许会更有意义（并且更易于阅读） 。[这是它可能看起来的示例](http://www.java2s.com/Tutorial/Java/0240__Swing/CreatingaJTable.htm)。您将`TableModel`在每个刻度上更新，而不必担心清除屏幕。

另一件非常重要的事情是，当您更新 时`TableModel`，必须根据[Swing 的线程策略](http://docs.oracle.com/javase/6/docs/api/javax/swing/package-summary.html)来完成。这意味着您可能必须从正在执行更新的任何线程执行以下操作：

```
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        // Update row/rows of table model here
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:03:31.100

If you just want the text to appear in the gui, first you need to construct the string to be displayed. So you would concatenate the strings you were earlier printing to the console to one single string.

Then you could use JTextArea to display it. You can even use JLabel or directly draw over the JPanel.

To update the display you would again set the new text in the TextArea.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T17:24:19.993

有很多方法可以显示文本数据，每种方法在不同情况下都有优点和缺点：

**1）文本控件：**

> 也简称为文本字段，文本控件只能显示一行可编辑文本。像按钮一样，它们生成动作事件。使用它们从用户那里获取少量文本信息，并在文本输入完成后执行操作。

*   [`JTextField`](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)
*   [JPasswordField](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)（可能与这个问题无关）
*   [JFormattedTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)（可能与这个问题无关）

**2）纯文本编辑器：**

*   [`JTextArea`](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)

> JTextArea 可以显示多行可编辑文本。尽管文本区域可以显示任何字体的文本，但所有文本都使用相同的字体。使用文本区域允许用户输入任意长度的无格式文本或显示无格式帮助信息。

**3）样式文本区域：**

*   [`JEditorPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)
*   [`JTextPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)

> 样式化的文本组件可以使用一种以上的字体显示可编辑的文本。一些样式化的文本组件允许嵌入图像甚至嵌入组件。样式化文本组件是适用于高端需求的强大且多方面的组件，并且提供了比其他文本组件更多的定制途径。

**3)[`JLabel`](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)**

> 使用 JLabel 类，您可以显示不可选择的文本和图像。如果您需要创建一个显示字符串、图像或两者的组件，您可以通过使用或扩展 JLabel 来实现。如果组件是交互式的并且具有某种状态，请使用按钮而不是标签。

**4）[`JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)**（+1 到@AndrewThompsons 评论）

> 使用 JTable 类，您可以显示数据表，可选择允许用户编辑数据。JTable 不包含或缓存数据；它只是您的数据的一个视图。

以上所有内容都与来自 oracle 的相关示例/信息相关联。

下一个问题是将组件放置在您想要的位置：

对于这个 Swing 有各种内置`LayoutManager`的 s。

有关更多信息，请参阅[在容器中布置组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)。

至于：

> 另一件事是，阵列将在每个滴答声中更新，这应该反映在最终打印的阵列中，所以我会在打印阵列或类似的东西之前清除屏幕吗

使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)确保您的 Gui 是从[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)更新的。

大多数上述组件除了`JTable`有一个简单的[`setText(String s)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setText%28java.lang.String%29)方法[`getText()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#getText%28%29)。

调用`setText`其中一个实例将使旧文本被新文本覆盖。因此，您无需清除它，只需调用添加新文本的相同方法即可。要附加文本，您可以在使用时使​​用`getText()`和`setText(String s)`或的组合。`append(String s)``JTextArea`

如果这不是您想要的，请尝试更具体地了解预期的输出，可能会发布一个[SSCCE](http://sscce.org)，显示您拥有和正在努力实现的目标。

# php - 通过 PHP 从 HTML 标签中获取文本

> ID：14173425
> 
> 赞同：1
> 
> 时间：2013-01-05T15:49:56.313
> 
> 标签：php, simple-html-dom

我对 PHP 编程很陌生，我可能会遇到一些简单的问题，但我还没有在这里找到答案。我想使用 PHP 来获取标签之间的文本，并为此使用了 Simple HTML DOM。我的代码如下所示：

```
$html = file_get_contents($base_url . $menu_url);
//print($html);

$students = array();

foreach($html->find('a') as $element) {
    $students[] = $element->plaintext;
} 
```

但是当我运行这段代码时，它给了我：

```
PHP Fatal error: Call to a member function find() on a non-object in <location> on line <x> 
```

有没有头脑清楚的可以纠正我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:53:31.657

变量`$html`是字符串而不是对象。所以你不能在上面调用方法。如果你想解析 Html 看看 Stackoverflow 有很多例子。例如[，您如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)和[PHP 的最佳 XML 解析器](https://stackoverflow.com/questions/188414/best-xml-parser-for-php/)。

# javascript - 使用 JavaScript / jQuery 将字符串分解为字符并为每个字符附加声音

> ID：14173427
> 
> 赞同：0
> 
> 时间：2013-01-05T15:50:02.237
> 
> 标签：javascript, jquery, mysql, html, css

我有一个字符串存储在 MySQL 数据库中。

我想从数据库中提取字符串，将其分解为`char`元素并将声音文件附加到每个字母。字母将显示在网页中，单击时会播放代表该字母的声音。

我曾尝试使用该`.split()`功能，但没有取得太大的成功。有没有人见过类似的东西，或者有没有人有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:57:03.437

```
var char = [],
    str, // your string
    i,
    len = str.length
for (i = 0; i < len ; i++){
    char[i] = str.charAt(i);
}

// now you have an array of characters

// setup event handlers for the click action

// setup audio output 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:58:12.540

如果我看这里

[JavaScript / HTML5 中的音效](https://stackoverflow.com/questions/1933969/sound-effects-in-javascript-html5)

你可以试试

```
var chars = "<? echo $string; ?>".split("");
var sounds = [];
$.each(chars,function(i,char) {

  if (!sounds[char]) sounds[char] = new Audio(char+".wav"); // buffers automatically when created
  $("#container").append('<a href="#" onclick="sounds[this.innerHTML].play();return false">'+char+'</a>');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T15:53:30.213

要分离它相对简单，您可以使用传统的 JS 或 jQuery，您需要做的就是将您的标记生成插入到下面。

```
var str = "No clue what you are trying";
for (var x = 0; x < str.length; x++){
    var myC = str.charAt(x);
    //or var myC = str[x];
    //what do you want to do?
}

//jQuery overkill
$.each(
    str.split(''),
    function( idx, myC ){
        //what do you want to do?
    };
); 
```

# api - 如何使用 YouTube Data API v3 更改页面结果

> ID：14173428
> 
> 赞同：36
> 
> 时间：2013-01-05T15:50:05.770
> 
> 标签：api, youtube, youtube-api

我正在尝试使用此示例从 YouTube API (v3) 获取视频数据：

[https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.search.list?part=snippet&maxResults=25&order=relevance&q=site%253Ayoutube.com&topicId=%252Fm%252F02vx4&_h=1&](https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.search.list?part=snippet&maxResults=25&order=relevance&q=site%253Ayoutube.com&topicId=%252Fm%252F02vx4&_h=1&)

问题是我不明白如何更改页面结果。例如，这个查询给了我 25 个项目 (maxResults=25) 但总结果是 --> "totalResults": 548669。所以这里的大问题是如何移动到第 2 页并接收其他 25 个结果？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-28T18:46:47.957

If you look at the results, you will see a "nextPageToken" item right after "pageInfo". This needs to be passed as the pageToken on your next request.

So if you make a call to this api:

```
https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=25&order=relevance&q=site%3Ayoutube.com&topicId=%2Fm%2F02vx4&key={YOUR_API_KEY} 
```

You would make a call to this one for the next page:

```
https://www.googleapis.com/youtube/v3/search?pageToken=CBkQAA&part=snippet&maxResults=25&order=relevance&q=site%3Ayoutube.com&topicId=%2Fm%2F02vx4&key={YOUR_API_KEY} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-03-19T11:33:08.583

例如这是你的 api

[https://www.googleapis.com/youtube/v3/playlists?part=snippet,contentDetails&channelId=UCrA&maxResults=50&key=AIZsk](https://www.googleapis.com/youtube/v3/playlists?part=snippet,contentDetails&channelId=UCrA&maxResults=50&key=AIZsk)

在这里使用这个 api 你会得到类似的结果

```
{
"kind": "youtube#playlistListResponse",
"etag": "\"XpPGQXPLgenD_n8JR4Qk/05DoUs3OS-AxnDI1FJbdM\"",
"nextPageToken": "CDIQAA",
"pageInfo": {
    "totalResults": 585,
    "resultsPerPage": 50
},
"items": [
    {
        "kind": "youtube#playlist",
        "etag": "\"XpPGQXPLgenD_n8JR4Qk/7m0ztlwxvPmRtXjs\"",
        .........
        ......... 
```

在此结果中，请参阅**“nextPageToken”：“CDIQAA”，**

现在将**pageToken**参数添加到您的 api

前任：

[https://www.googleapis.com/youtube/v3/playlists?part=snippet,contentDetails&channelId=UCqrA&maxResults=50&key=AIZsk&pageToken=CDIQAA](https://www.googleapis.com/youtube/v3/playlists?part=snippet,contentDetails&channelId=UCqrA&maxResults=50&key=AIZsk&pageToken=CDIQAA)

现在这是您的结果，您将获得 nextPageToken 和 prevPageToken

```
{
"kind": "youtube#playlistListResponse",
"etag": "\"XpPGQX4Qk/R3A6jpxuE\"",
"nextPageToken": "CGQQAA",
"prevPageToken": "CDIQAQ",
"pageInfo": {
    "totalResults": 585,
    "resultsPerPage": 50
},
"items": [
    {
        "kind": "youtube#playlist",
        "etag": "\"XpPGQXR4Qk/XsatNRtxJQ\"",

        .........
        ......... 
```

# jquery - 将数据从php传递到JQuery时获取空数组

> ID：14173431
> 
> 赞同：0
> 
> 时间：2013-01-05T15:50:11.127
> 
> 标签：jquery

下面是我的代码：

```
<script src="jquery-1.8.3.js" type="text/javascript">
</script>

<script type="text/javascript">

var obj=[]  ;
    function getData(){
        $.ajax({
            url:'jqueryJsonTest.php',
            type:'POST',
            dataType: 'json',
            cache: true,
            success:function(data){
            obj = data ; 
            alert ("alert 1: "+obj.length);
            }
        });
        }

$(document).ready(function() {
    getData();
    alert("alert 2: "+obj.length);
    alert("alert 3: "+obj.length);
});

</script> 
```

为什么保存数据后的第一个结果是一个空数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:24:18.770

您正在进行一个立即返回的*异步 AJAX 调用。*它在`success`执行回调之前返回（您设置`obj`为返回的内容）。您应该做的是在处理程序中进行进一步处理`success`- 或者 - 使用选项使您的 ajax 调用同步`async: false`（不推荐）

尝试将回调处理程序传递给您的`getData()`函数。即类似的东西：

```
function getData(mycallback){
    $.ajax({
        url:'jqueryJsonTest.php',
        type:'POST',
        dataType: 'json',
        cache: true,
        success:function(data){
            mycallback(data);
        }
    });
}

$(document).ready(function() {
    getData(function(obj) {
        alert("alert 2: "+obj.length);
        alert("alert 3: "+obj.length);
    });
}); 
```

# c++ - ntohl(*(uint32_t*) ...) 做什么？

> ID：14173441
> 
> 赞同：1
> 
> 时间：2013-01-05T15:51:04.640
> 
> 标签：c++, pointers, type-conversion

```
ip=ntohl(*(uint32_t*)PQgetvalue(result, i, 0)); 
```

这个代码段是什么意思？

我的猜测是这段代码从 PostgreSQL 数据库中获取输入（它的类型是`uint32_t`）并将其转换为 IP 格式（例如`192.168.x.x`）

我的猜测正确吗？如果不是，那是什么意思？

注意：根据[http://linux.die.net/man/3/ntohl](http://linux.die.net/man/3/ntohl)：

> 该`ntohl()`函数将无符号整数 netlong 从网络字节顺序转换为主机字节顺序。

另外，有人可以解释一下`*(uint32_t*)`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T15:52:58.603

`ntohl`意思是“网络主机长”。它（大概）将整数类型从网络（大端）转换为主机字节顺序。但是，如果您不熟悉机器的字节序，则在使用此方法时要小心。如果您有一台小端机器并使用`ntohl`已经采用小端格式的数据（即未以大端或其他方式发送），您可能会遇到问题。

`*(unit32_t*)`是对 32 位无符号整数指针（`(unit32_t*)`部分）的强制转换，然后前面`*`是该指针上的取消引用运算符。

**编辑**

正如 njr 在下面的评论中指出的那样，这是一个很好的字节序参考：[http ://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T15:56:12.243

根据文档：

```
For most queries, the value returned by PQgetvalue is a null-terminated ASCII
string representation of the attribute value. But if PQbinaryTuples() is TRUE,
the value returned by PQgetvalue is the binary representation of the type 
in the internal format of the backend server 
```

我想`PQbinaryTuples`那里是真的。

`PQGetvalue()``char *`根据文档返回 a 。`(uint32_t *)`会将其`char *`转换为指向无符号 32 位整数的指针，`*`之前将取消引用 this 以获取实际值（无符号的 32 位整数），最后`ntohl`将其转换为平台的本机 32 位整数，这可能意味着原始存储格式为网络顺序。

如果我们要“拆分”该代码，那将给出：

```
// Get value from database as a char *
char *in_database = PQgetvalue(result, i, 0);
// Convert the pointer to char to a pointer to an unsigned, 32bit integer
uint32_t *ptr = (uint32_t *) in_database;
// Dereference that pointer to obtain the actually stored value
uint32_t stored_value = *ptr;
// Turn that value to a native integer for the CPU
uint32_t ip = ntohl(stored_value); 
```

# php - 为什么 simplexml_load_file 在我的 PHP 脚本中没有返回简单数组？

> ID：14173443
> 
> 赞同：1
> 
> 时间：2013-01-05T15:51:04.317
> 
> 标签：php, arrays, api, simplexml

我正在使用该`simplexml_load_file`命令将数据从 api 解析到我订阅的 MMO，以制作获取当前公会公鸡的工具。从 api 返回的原始 xml 如下所示：

```
<apiresponse>
    <guild name="Seekers of Forgotten Pasts" world="Cannith" memberCount="1312">
        <characters>
            <character name="Nethershadow" surname="" rank_level="5" rank_name="Officer" race="Halfling" gender="m" alignment="True Neutral">
            <classes>
                <class name="Ranger" level="2"/>
                <class name="Rogue" level="8"/>
            </classes>
        </character>
        <character name="..." surname="..." rank_level="..." rank_name="..." race="..." gender="..." alignment="...">
            ...
        </character>
        <character name="Calomel" surname="" rank_level="10" rank_name="Member" race="Drow Elf" gender="m" alignment="Lawful Good">
            <classes>
                <class name="Paladin" level="5"/>
            </classes>
        </character>
    </guild>
<cache_info cached_until_gmt="2013-01-05 19:23"/>
</apiresponse> 
```

现在，当我插入我的 php 以检索名称列表时，如下所示：

```
<?php
    $names = array();
    $xmlGuild = simplexml_load_file($DataDDO_api_urlFullGuildSearch);
    $characters = $xmlGuild->guild->characters->character;
    for ($i = 0; $i < sizeof($characters); $i++) {
        $names[] = $characters[$i]->attributes()->name;
    }
    echo "\n\nTotal members: " . count($names) . "\n\n<pre>\n";
    print_r($names);
    echo "</pre>\n";
?> 
```

结果我得到：

```
Total members: 1312

Array
(
    [0] => SimpleXMLElement Object
        (
            [0] => Nethershadow
        )
    [...] => SimpleXMLElement Object
        (
            [0] => ...
        )
    [1311] => SimpleXMLElement Object
        (
            [0] => Calomel
        )
) 
```

而不是我所期望的：

```
Array
(
    [0] => Nethershadow
    [...] => ...
    [1311] => Calomel
) 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:19:57.480

如果您想要它们的文本值，您必须将 SimpleXML 对象转换为字符串。

```
<?php
    $names = array();
    $apiresponse = simplexml_load_file($DataDDO_api_urlFullGuildSearch);

    foreach ($apiresponse->guild->characters->character as $char) 
    {
        $names[] = (string)$char->attributes()->name;
    }

    echo "\n\nTotal members: " . count($names) . "\n\n<pre>\n";
    print_r($names);
    echo "</pre>\n";
?> 
```

# excel - Excel VBA 过滤/可见单元格

> ID：14173445
> 
> 赞同：10
> 
> 时间：2013-01-05T15:51:25.557
> 
> 标签：excel, vba

假设我有 10 行数据。我对数据应用了一些过滤器，第 7 行和第 9 行被*过滤* **或** *可见*。

我想遍历数据（10 行）并在空白列*（假设 C列）中输出字符串**“可见”*，**仅**适用于可见行*（即范围 C7 和范围 C9）。*

 ***** * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-05T16:34:20.587

Choose some of the first 10 rows to hide, and then try running this

```
Option Explicit

Sub CheckIfVisible()

Dim i As Integer, x As Integer
x = 0
For i = 1 To 10
    With Excel.ThisWorkbook.ActiveSheet
        If .Rows(i).EntireRow.Hidden Then
        Else
            .Cells(15 + x, 1) = "Row " & i & "is visible"
            x = x + 1
        End If
    End With
Next i

End Sub 
```

Is this the sort of loop you're looking for?
Maybe you can show us your Loop so we can see where your problem is?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-27T23:40:44.160

由于我前一阵子来这里寻找这个，这里有一些可能对未来的谷歌人有用的东西。

如果您按单元格/行执行此操作，则可以直接访问单元格**.EntireRow.Hidden** bool。

在下面的示例中，它只是通过选择中的每个单元格的 ForEach 循环，并仅读取该单元格中的属性，基于 .Hidden 为真/假进行计数/着色。

### 可能的陷阱要提防..

如果您正在测试过滤范围，则需要在范围之外选择一行，因为如果隐藏行落在范围中的倒数第二/最后一行，则可能无法捕获隐藏行，选择第一个可见行选择后避免了这种情况。

对于大范围（10,000 + 行）来说，这将是极其低效的

### CopyPasta 如果你想测试

```
 Sub HowManyHiddenCells()

Dim MyCell, MyRange As Range
Dim CellCountAll, CellCountVisible, CellCountHidden As Integer

Set MyRange = Selection

For Each MyCell In MyRange

    ':: IGNORE EMPTY ::
    If Len(MyCell.text) > 0 Then

        If MyCell.EntireRow.Hidden Then
        MyCell.Interior.Color = RGB(255, 220, 200)
        ':: Count of hidden cells in range
        CellCountHidden = CellCountHidden + 1
        ':: Do Column C Text! ::
        MyCell.Offset(0, 2).FormulaR1C1 = "I was hidden! "
        End If

        If MyCell.EntireRow.Hidden = False Then
        MyCell.Interior.Color = RGB(200, 255, 180)
        ':: Count of visible cells in range
        CellCountVisible = CellCountVisible + 1
        End If
        ':: Count of all cells in range
        CellCountAll = CellCountAll + 1
    End If
Next MyCell

MsgBox "Cells total " & CellCountAll & vbNewLine & "Hidden :  " & CellCountHidden & vbNewLine & "Visible : " & CellCountVisible, vbOKOnly + vbInformation, "Count of hidden vs visible"

End Sub 
```

[运行中的脚本示例 - 在过滤范围内，以红色突出显示隐藏](https://i.stack.imgur.com/b40Zh.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-05-14T19:43:59.437

受@whytheq 的启发，我想出了这个，所以它循环遍历**selection 中的**所有可见行：

```
Sub Loop_through_selected_rows()
Dim rng As Range: Set rng = ActiveWindow.RangeSelection
Dim i As Integer
For i = 0 To rng.Rows.Count - 1
    If Cells(rng.Row + i, 1).EntireRow.Hidden Then
    Else
        Cells(rng.Row + i, 1).Range("A1:E1").Select 'Set Range within row to your needs
        ' Do something here
    End If
Next
End Sub 
```****

# fonts - 字体的商业用途

> ID：14173448
> 
> 赞同：-4
> 
> 时间：2013-01-05T15:51:36.203
> 
> 标签：fonts

我在哪里可以找到字体是否获得许可？

lilyUPC**可**用于商业用途吗？

[百合](http://fontzone.net/font-details/LilyUPC/)

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:55:50.060

通过谷歌搜索并找到作者。

[LilyUPC 必须获得任何使用许可。](http://www.microsoft.com/typography/fonts/family.aspx?FID=272)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T15:58:00.060

来自[http://fontzone.net/terms/](http://fontzone.net/terms/)

> ***知识产权***
> 
> FontZone.net 声称对您在 The FontZone.net 上或通过 The FontZone.net 提交、发布或显示的任何内容不拥有所有权或控制权。您或第三方许可人（视情况而定）保留您在 The FontZone.net 上或通过 The FontZone.net 提交、发布或展示的任何内容的所有专利、商标和版权，并且您有责任酌情保护这些权利。通过在 The FontZone.net 上或通过 The FontZone.net 提交、发布或展示旨在提供给公众成员的内容，您授予 The FontZone.net 一个全球性、免版税、非排他性的永久许可，以复制、发布和出于展示和分发 The FontZone.net 的目的，在 The FontZone.net 上分发此类内容。FontZone.net 还保留自行决定拒绝接受、发布、显示或传输任何内容的权利。

# php - 是代码结构导致未定义的 $_SESSION 变量吗？

> ID：14173451
> 
> 赞同：2
> 
> 时间：2013-01-05T15:51:46.463
> 
> 标签：php

当我导航到一个被锁定的页面时（换句话说，当你必须`Continue`出现的框时，我得到了未定义`$_SESSION`的变量。在我包含该`if (allowed_in()=== "Allowed"){`语句之前，我没有得到任何未定义的 $_SESSION 变量，但现在需要如果声明，我开始得到那些变量错误。

对于`$_SESSION`未定义的错误，是因为我将 $_SESSION 变量放在错误的位置吗？

下面是代码的示例`QandATable.php`顺序，如下所示：

```
 <?php

        ini_set('session.gc_maxlifetime',12*60*60);
        ini_set('session.gc_divisor', '1');
        ini_set('session.gc_probability', '1');
        ini_set('session.cookie_lifetime', '0');
        require_once 'init.php'; 
        //12 hours sessions

        session_start();
        include('steps.php'); //exteranlised steps.php

?>
        <head>

<?php
        if (isset($_POST['id'])) {

        $_SESSION['id'] = $_POST['id'];

        }

        if(isset($_POST['sessionNum'])){
                    //Declare my counter for the first time

                    $_SESSION['initial_count'] = $_POST['sessionNum'];
                    $_SESSION['sessionNum'] = intval($_POST['sessionNum']);
                    $_SESSION['sessionCount'] = 1;

            }

        elseif (isset($_POST['submitDetails']) && $_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
            $_SESSION['sessionCount']++;
        }
?>

        </head>

        <body>

        <?php 

    //once session is expired, it should log the user out, but at mo this isn't happening
        if ((isset($username)) && (isset($userid))){ //checks if user is logged in

            if (allowed_in()=== "Allowed"){

        //QandATable.php code:

        }else{

        $page = allowed_in()+1;

        ?>

        <div class="boxed">
          <a href="<?php echo $steps[$page] ?>">Continue with Current Assessment</a>

        <?php   

        }

        }else{ 

        echo "Please Login to Access this Page | <a href='./teacherlogin.php'>Login</a>"; 
        //show above echo if user is not logged in

        }

        ?> 
```

以下是完整的steps.php：

```
<?php

$steps = array(1 =>'create_session.php',2 => 'QandATable.php',3 => 'individualmarks.php',4 => 'penalty.php',5 => 'penaltymarks',6 => 'complete.php');

function allowed_in($steps = array()){
// Track $latestStep in either a session variable
// $currentStep will be dependent upon the page you're on

if(isset($_SESSION['latestStep'])){
   $latestStep = $_SESSION['latestStep'];
}
else{
   $latestStep = 0;
}
$currentStep = basename(__FILE__); 

$currentIdx = array_search($currentStep, $steps);
$latestIdx = array_search($latestStep, $steps);

if ($currentIdx - $latestIdx == 1 )
    {
       $currentIdx = $_SESSION['latestStep'];
       return 'Allowed';
    }
    return $latestIdx;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:47:06.667

session_start() 必须在任何内容之前。

> 笔记：
> 
> 要使用基于 cookie 的会话，必须在向浏览器输出任何内容之前调用 session_start()。

[http://php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

# php - php编写的sql函数

> ID：14173457
> 
> 赞同：-1
> 
> 时间：2013-01-05T15:52:42.473
> 
> 标签：php, mysql, oop

我想知道是否有一个基于 PHP OOP 的类或任何其他数据库抽象类构建到一个相当基本的一个或几个文件 PHP 类框架中。可以允许使用类似语法的函数调用查询的东西，而不是像标准 PDO 或 mysql_* 这样的语法类型

```
class Session {
    protected $db;

    public function __construct(DB $db) {
        $this->db = $db;
    } 

    public function write() {
        $this->db->query(...);
    }
}

$db = new DB(...);
$session = new Session($db); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:56:03.900

您正在寻找的称为适配器，它为您处理所有与数据库相关的东西。[Github](https://github.com/search?q=mysql%20adapter&p=1&ref=searchbar&type=Repositories&l=PHP)上有很多，搜索“mysql 适配器”会发现各种库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:59:27.363

PDO：

```
$stmt = $pdo->prepare('SELECT * FROM users WHERE username = :username');
$stmt->execute(array(':username' => $_GET['username'])); 
```

MySQLi：

```
$query = $mysqli->prepare('SELECT * FROM users WHERE username = s');
$query->bind_param('s', $_GET['username']); 
```

这些扩展具有内置功能，例如创建准备好的查询。

# c++ - 如何使用 C++ 中的装饰器模式在一行代码中装饰对象？

> ID：14173471
> 
> 赞同：0
> 
> 时间：2013-01-05T15:53:59.527
> 
> 标签：c++, design-patterns, decorator

我正在学习[Head First Design Patterns book中的](https://rads.stackoverflow.com/amzn/click/com/0596007124)*装饰器模式*，这是我编写的 (C++) 以使模式工作的内容：

```
#include <iostream>

class AbstractType
{
public: 
    virtual double value() const = 0;
};

class FirstConcreteType
    :
    public AbstractType
{
public: 
    double value() const 
    {
        return 1; 
    }
};

class SecondConcreteType
    : 
    public AbstractType
{
public:
    double value() const
    {
        return 2;
    }
};

class DecoratorType
    :
    public AbstractType
{
    const AbstractType* decoratedObject_; 

public:

    DecoratorType(const AbstractType& abstractObject)
        :
    decoratedObject_(&abstractObject)
    {}

    DecoratorType(const DecoratorType& decoratorObject)
        :
    decoratedObject_(&decoratorObject)
    {}

    virtual double value() const = 0; 

    const AbstractType& getObject() const
    {
        return *decoratedObject_; 
    }
};

class FirstDecoratorType
    :
    public DecoratorType
{
public:
    FirstDecoratorType(const AbstractType& abstractObject)
        :
    DecoratorType(abstractObject)
    {}

    FirstDecoratorType(const DecoratorType& decoratorObject)
        :
    DecoratorType(decoratorObject)
    {}

    double value() const
    {
        const AbstractType& object = getObject(); 

        return 1 + object.value(); 
    }
};

class SecondDecoratorType
    :
    public DecoratorType
{
public:
    SecondDecoratorType(const AbstractType& abstractObject)
        :
    DecoratorType(abstractObject)
    {}

    SecondDecoratorType(const DecoratorType& decoratorObject)
        :
    DecoratorType(decoratorObject)
    {}

    double value() const
    {
        const AbstractType& object = getObject(); 

        return 2 + object.value(); 
    }
};

using namespace std;

int main()
{
    // When I decorate sequentially, it works fine

    SecondConcreteType secondConc;

    FirstDecoratorType firstDec(secondConc); 
    cout << firstDec.value() << endl;

    SecondDecoratorType secondDec(firstDec); 
    cout << secondDec.value() << endl;

    FirstDecoratorType firstDecSecond (secondDec); 
    cout << firstDecSecond.value() << endl; 

    // Decorating in a single line, messes things up, since there is no
    // constructor taking the value argument defined.  
    //FirstDecoratorType firstDynamicDec (SecondConcreteType()); 
    //cout << firstDynamicDec.value() << endl;

    return 0;
}; 
```

在主程序中，必须先创建ConcreteType 的对象，然后使用指向AbstractType 的指针的组合（在DecoratorType 内）对其进行修饰。它工作正常，如果我创建具体对象，并一个接一个地创建新的装饰对象..

我需要做什么才能让 DecoratorType 能够在单行代码中使用组合来装饰对象（示例代码中的注释行）？这样的东西在“现实世界”中是否有用？我（显然）在使用设计模式方面没有很多经验。所以我很难看出我应该针对什么功能。

编辑：

这是一个使用基本指针的版本（valgrind 显示没有内存泄漏，并声明没有内存泄漏是可能的）：

```
#include <iostream>

class AbstractType
{
    public: 
        virtual double value() const = 0;

        virtual ~AbstractType() {}; 
};

class FirstConcreteType
:
    public AbstractType
{
    public: 
        double value() const 
        {
            return 1; 
        }
};

class SecondConcreteType
: 
    public AbstractType
{
    public:
        double value() const
        {
            return 2;
        }
};

class DecoratorType
:
    public AbstractType
{
    const AbstractType* decoratedObject_; 
    bool own_;

    public:

        DecoratorType(const AbstractType& abstractObject)
            :
                decoratedObject_(&abstractObject), 
                own_(false)
        {}

        DecoratorType(const DecoratorType& decoratorObject)
            :
                decoratedObject_(&decoratorObject), 
                own_(false)

        {}

        DecoratorType (AbstractType* abstractPtr)
            : 
                decoratedObject_(abstractPtr), 
                own_(true)
        {}

        DecoratorType (DecoratorType* decoratorPtr)
            :
                decoratedObject_(decoratorPtr), 
                own_(true)
        {}

        virtual ~DecoratorType()
        {
            if (own_)
            {
                delete decoratedObject_; 
                decoratedObject_ = 0;
            }
        }

        virtual double value() const = 0; 

        const AbstractType& getObject() const
        {
            return *decoratedObject_; 
        }
};

class FirstDecoratorType
:
    public DecoratorType
{
    public:
        FirstDecoratorType(const AbstractType& abstractObject)
            :
                DecoratorType(abstractObject)
        {}

        FirstDecoratorType(const DecoratorType& decoratorObject)
            :
                DecoratorType(decoratorObject)
        {}

        FirstDecoratorType (AbstractType* abstractPtr)
            :
                DecoratorType(abstractPtr)
        {}

        FirstDecoratorType (FirstDecoratorType* decoratorPtr)
            :
                DecoratorType(decoratorPtr)
        {}

        double value() const
        {
            const AbstractType& object = getObject(); 

            return 1 + object.value(); 
        }
};

class SecondDecoratorType
:
    public DecoratorType
{
    public:
        SecondDecoratorType(const AbstractType& abstractObject)
            :
                DecoratorType(abstractObject)
        {}

        SecondDecoratorType(const DecoratorType& decoratorObject)
            :
                DecoratorType(decoratorObject)
        {}

        SecondDecoratorType (AbstractType* abstractPtr)
            :
                DecoratorType(abstractPtr)
        {}

        SecondDecoratorType (SecondDecoratorType* decoratorPtr)
            :
                DecoratorType(decoratorPtr)
        {}

        double value() const
        {
            const AbstractType& object = getObject(); 

            return 2 + object.value(); 
        }
};

using namespace std;

int main()
{
    // When I decorate sequentially, it works fine

    SecondConcreteType secondConc;

    FirstDecoratorType firstDec(secondConc); 
    cout << firstDec.value() << endl;

    SecondDecoratorType secondDec(firstDec); 
    cout << secondDec.value() << endl;

    FirstDecoratorType firstDecSecond (secondDec); 
    cout << firstDecSecond.value() << endl; 

    // Decorating in a single line, messes things up, since there is no
    // constructor taking the value argument defined.  
    FirstDecoratorType firstDynamicDec (new SecondDecoratorType (
           new FirstDecoratorType (new SecondConcreteType()))); 

    cout << firstDynamicDec.value() << endl;

    return 0;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T16:05:23.490

```
FirstDecoratorType firstDynamicDec (SecondConcreteType()); 
```

问题在于它没有定义对象。相反，它*声明*了一个函数。在这个站点上查找*most-vexing-parse* in C++，你会得到很多关于它的主题。

简短说明：函数名称是`firstDynamicDec`其返回类型`FirstDecoratorType`，它带有参数，它又是一个返回`SecondConcreteType`且不带参数的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:10:52.940

第一个问题是

```
FirstDecoratorType firstDynamicDec (SecondConcreteType()); 
```

根本没有声明一个对象，而是一个函数。这被称为C++ 中[最令人头疼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)。

但是，即使您解决了这个问题，您也会遇到临时对象（例如 created by `SecondConcreteTpe()`）仅在表达式结束之前存在的问题，因此`FirstDecoratorType`在您可以对其进行任何有用的操作之前，其中的指针将是无效的。
您可以通过使用智能指针在装饰器中保存装饰类型来解决此问题（例如，`std::unique_ptr`）。这使得装饰器负责清理被装饰的类型。

# c++ - 初始化指向 int 数组的指针

> ID：14173472
> 
> 赞同：0
> 
> 时间：2013-01-05T15:54:18.180
> 
> 标签：c++, arrays, pointers, initialization, int

我再次使用 C++ 并注意到当在类成员方法或`main()`函数内部声明为指针时，关于数组初始化的奇怪行为。

```
int * p = new int[20]; 
```

我期望发生的是指针将保持未初始化的随机值，就像它们一样

```
int arr[20]; 
```

但相反，它们都归零。到底是怎么回事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T15:55:45.927

即使它们为零（这很松散，见下文），它们也没有被初始化。

实际上，你不能说它们为零，因为如果你读取这些值，你会遇到未定义的行为。您无法读取未初始化的变量。

要初始化数组值，您可以执行以下操作：

```
int * p = new int[20]();
//                   ^^
//             note parenthesis 
```

但否则不，它没有初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T15:58:50.817

`p`是一个指向整数的指针，它使用`new[]`表达式的结果进行初始化。该表达式返回动态分配的整数数组的第一个元素的地址。数组本身未初始化并且包含不确定的值。如果您说过`new int[100]()`，则该数组将被初始化为零。

# javascript - 使用 require.js 的跨域调用问题？

> ID：14173476
> 
> 赞同：1
> 
> 时间：2013-01-05T15:54:34.820
> 
> 标签：javascript, jquery, requirejs, cross-domain

我想将托管在 windows azure blob（我拥有）上的 html 文件中的 HTML div 加载到 MVC 视图中，该视图也托管在 windows azure web 角色上（blob 和 web 角色都归我所有）。

我尝试使用 jquery.load() 但它遇到了跨域问题，并且窗口 azure blob 不允许更改`CORS`策略。接下来我尝试使用[Require.Js](http://requirejs.org/)和[Text.Js](https://github.com/requirejs/text)来实现这种跨域加载。从`Text.Js`文档中：

> 文本插件确定对资源的请求在另一个域上，它会尝试通过使用脚本标签来访问资源的“.js”版本。跨域允许脚本标记 GET 请求。资源的 .js 版本应该只是一个带有 define() 调用的脚本，它返回模块值的字符串。

我使用 require.js 进行跨域调用的 js 代码是：

```
require(["text!http://xxxxx.blob.core.windows.net/xxx/File"],
 function (html) {
   alert(html);
 }
); 
```

现在我面临的问题是插件成功加载了文件的 .js 版本*（通过使用 chrome 检查器确认）*但是在我尝试访问文件的文本内容时的回调中，它显示我未定义。我在这里做错了什么，为什么回调没有文本内容？有人可以帮我解决这个问题吗？如果这无法解决，我愿意接受其他方式来实现这种跨域负载。

*我对 require.js 文档的理解是跨域调用可以通过调用资源的 javascript 版本来完成。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:37:18.760

尝试`define`：

```
define(["text!http://xxxxx.blob.core.windows.net/xxx/File"], function (html) {
   return {
     template: html;
   }:
 }
); 
```

# java - 检查页面是否在 Android 上启动会导致崩溃？

> ID：14173477
> 
> 赞同：0
> 
> 时间：2013-01-05T15:54:36.880
> 
> 标签：java, android, httpurlconnection

我对Android很陌生。我在 Java 中做了一些工作，所以我回去找到了我的站点状态检查器。

我当时的想法是，因为 Android 是基于 Java 的，所以我可以直接复制到 Android 应用程序中。

这是我的片段：

```
public boolean checkIfSite(String url) {
    HttpURLConnection connection = null;
    try {
        URL u = new URL(url);
        connection = (HttpURLConnection) u.openConnection();
        connection.setRequestMethod("HEAD");
        int code = connection.getResponseCode();
        System.out.println("" + code);
        // You can determine on HTTP return code received. 200 is success.

        return true;
    } catch (MalformedURLException e) {
        e.printStackTrace();
        return false;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    } finally {
        if (connection != null) {
            connection.disconnect();
        }
    }
} 
```

我称之为：

```
if (checkIfSite("http://google.com")) {
//CODE
} 
```

这是我得到的痕迹：

```
 01-05 08:58:49.683: D/AndroidRuntime(9767): Shutting down VM
01-05 08:58:49.683: W/dalvikvm(9767): threadid=1: thread exiting with uncaught exception (group=0x40a211f8)
01-05 08:58:49.691: E/AndroidRuntime(9767): FATAL EXCEPTION: main
01-05 08:58:49.691: E/AndroidRuntime(9767): android.os.NetworkOnMainThreadException
01-05 08:58:49.691: E/AndroidRuntime(9767):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:479)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at com.sonyericsson.extras.liveview.plugins.sandbox.SandboxPluginService.checkIfSite(SandboxPluginService.java:184)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at com.sonyericsson.extras.liveview.plugins.sandbox.SandboxPluginService.button(SandboxPluginService.java:209)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at com.sonyericsson.extras.liveview.plugins.AbstractPluginService$LiveViewCallback$3.run(AbstractPluginService.java:200)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at android.os.Handler.handleCallback(Handler.java:605)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at android.os.Looper.loop(Looper.java:137)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at java.lang.reflect.Method.invokeNative(Native Method)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at java.lang.reflect.Method.invoke(Method.java:511)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
01-05 08:58:49.691: E/AndroidRuntime(9767):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:57:32.917

你有没有想过通过给 AndroidMainfest.xml 文件添加权限来[让](http://developer.android.com/guide/topics/manifest/manifest-intro.html)你[的App 上线？](http://developer.android.com/guide/topics/security/permissions.html)该文件位于项目结构的顶层，如*src*和*res*文件夹。

 **```
<manifest xlmns:android...>
   <uses-permission android:name="android.permission.INTERNET"></uses-permission>
   ...
</manifest> 
```

当您尝试在 UI 线程上执行网络操作时，将引发您的异常。解决方案在[这里](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)...

关于 AsyncTask 的更多信息：

*   [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)
*   [http://labs.makemachine.net/2010/05/android-asynctask-example/](http://labs.makemachine.net/2010/05/android-asynctask-example/)
*   [AsyncTask Android 示例](https://stackoverflow.com/questions/9671546/asynctask-android-example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:02:38.680

您应该首先验证您在文件中是否具有`INTERNET`权限。`AndroidManifest.xml`

此外，在某些设备上，您可能会获得`NetworkOnMainThreadException`. 避免这种情况的最佳方法是在不同的线程中执行网络操作，例如使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html).**

# jquery - 使用 jquery 从许多 div 元素中删除 div 元素？

> ID：14173479
> 
> 赞同：0
> 
> 时间：2013-01-05T15:54:42.447
> 
> 标签：jquery, jquery-selectors

如何在点击时使用 jquery 从许多 div 中隐藏/删除一个 div？下面的代码重复装箱：

```
var el = $("div");
  var bottom = $(window).height();
  while (el.offset().top + el.height() < bottom) {
    el = el.clone().insertAfter(el); 
```

我正在尝试使用下面隐藏/删除 div 元素但它不起作用？

```
$(document).ready(function(){
  $("div").click(function(){
    $(this).hide();
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:01:34.590

您可以添加一个类名来区分克隆。

```
el = el.clone().addClass("clone").insertAfter(el); 
```

并使用委托结束`.clone`。

```
$(function(){
  $(document).on("click", ".clone", function(){
    $(this).hide();
  });
}); 
```

[**看这里。**](http://jsfiddle.net/Cvud8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:02:11.033

这不起作用，因为元素是动态生成的......尝试......

```
$(document).ready(function(){
  $(document).on('click', 'div', function() {
    $(this).remove();
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:04:38.853

原因是您的代码不起作用，可能是时间问题。如果 your在your*之前*`$(document).ready(...)`执行，它不会找到所有动态生成的 s。*`<script>...</script>``div`*

 *如果你真的想删除 div，点击

HTML：

```
<div>Sample</div> 
```

JS：

```
$('document').ready(function() {
  var el = $("div");
  var bottom = $(window).height();
  while (el.offset().top + el.height() < bottom) {
    el = el.clone().insertAfter(el);
  }

  el.remove();

  $('div').click(function() {
    $(this).remove();
  });
}); 
```

[JSFiddle](http://jsfiddle.net/yJms2/)用于测试。*

# paypal - 如何检查上次检查是否已完成时未完成的订单？-- 贝宝

> ID：14173483
> 
> 赞同：0
> 
> 时间：2013-01-05T15:54:56.087
> 
> 标签：paypal

我首先在订单完成后立即检查是否完成，如果是，我会更新一些东西。但是后来我想检查所有没有立即完成的订单现在是否都完成了。

有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:05:01.707

使用贝宝，您应该创建一个侦听类或脚本，该类或脚本将由贝宝 api ayntime 发生新的事情，例如完成购买。检查他们的 API 以获得他们的 IPN。

我找到了这个教程

[http://www.micahcarrick.com/paypal-ipn-with-php.html](http://www.micahcarrick.com/paypal-ipn-with-php.html)

# javascript - 直接输入到 URL 的 HTML 表单

> ID：14173484
> 
> 赞同：0
> 
> 时间：2013-01-05T15:55:01.780
> 
> 标签：javascript, html, forms, url

如何根据用户输入将浏览器定向到另一个 URL，例如：

abc.com/apple.html

abc.com/banana.html

abc.com/pear.html

但是，如果用户没有输入苹果、香蕉或梨，那么他们将被定向到：

abc.com/wrong.html

任何帮助都是极好的！我只知道 HTML 表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:09:53.013

你可以`Javascript/JQuery`这样做：

**HTML：**

```
<form name="form_input" action="post_values.php" method="post">
  <input type="text" name="fruit" id="fruit" />
  <input type="submit" value="Submit" />
</form> 
```

**JS/JQuery：**

```
<script>
   $("form").submit(function() {
     var fruit = $("#fruit").val();
     if(fruit=='apple' || fruit=='pear' || fruit=='banana'){
        window.location = "http://www.abc.com/"+fruit+".html";
     }else{
        window.location = "http://www.abc.com/wrong.html";
     }
     return true;
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:12:04.367

在“abc.com”的 HTML 文件中，主要是`index.html`在`<HEAD>`标签之间执行以下操作：

```
 <meta HTTP-EQUIV="REFRESH" content="0; url=http://www.abc.com/wrong.html"> 
```

调整`content=`您希望浏览器在重定向之前等待的秒数。

**更新：**

W3C 不推荐使用 http 方法，原因如下：

`If a page redirects too quickly (less than 2-3 seconds), using the "Back" button on the next page may cause some browsers to move back to the redirecting page, whereupon the redirect will occur again. This is bad for usability, as this may cause a reader to be "stuck" on the last website.`

因此通过JS推荐的方法：

```
 <head>
    <script>
        function replaceDoc()
        {
        window.location.replace("http://www.abc.com/wrong.html")
        }
    </script>
    </head> 
```

我在这里找到了上述方法：

[W3Schools Window.Replace()](http://www.w3schools.com/jsref/met_loc_replace.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:26:25.360

```
 <form id='formName' name='formName' onsubmit='redirect();return false;'>
                <input type='text' id='userInput' name='userInput' value=''>
                <input type='submit' name='submit' value='Submit'>
            </form>

            <script type='text/javascript'>
            function redirect() {
                var input = document.getElementById('userInput').value;
                switch(input) {
                    case 'apple':
                        window.location.replace('apple.html');
                        break;
                    case 'banana':
                        window.location.replace('banana.html');
                        break;
                    default:
                        window.location.replace('default.html');
                        break;
                }

            }
            </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T16:34:26.007

```
<script language="JavaScript">
    var page = new Array("apple","banana","pear");   // list of your pages
    function redirect(){
        if(page.indexOf(document.forms["NameOfForm"]["NameOfInput"].value)!=-1){
            window.location = document.forms["NameOfForm"]["NameOfInput"].value + ".html";
        }
        else {
            window.location = "wrong.html";
        }
        return false;
    }
</script>
<form name="NameOfForm" onsubmit="return redirect()">
    <input name="NameOfInput" />
    <input type="submit" />
</form> 
```

将该代码放入`abc.com/`，您只需添加、更改页面列表；）

# ruby - *RUBY* 极限初学者卡住了

> ID：14173486
> 
> 赞同：0
> 
> 时间：2013-01-05T15:55:12.023
> 
> 标签：ruby

我无法弄清楚这个基于文本的 RPG 的指导。我希望玩家的输入在四个类别之一之间进行选择，然后保存该类别并为其分配统计数据。目前，它仅在我选择`"Warrior"`. 我究竟做错了什么？

```
stats = Hash.new
stats["Strength"] = 10
stats["Dexterity"] = 10
stats["Charisma"] = 10
stats["Stamina"] = 10
puts "Hello, brave adventurer.  What is your name?"
player_name = gets.chomp.capitalize

puts "Well, #{player_name}, you are certainly brave!  Choose your profession.  (Choose         from Warrior, Wizard, Archer, or Thief)."

player_class = gets.chomp.downcase

while player_class != ("warrior" || "thief" || "archer" || "wizard")
  puts "I do not recognize #{player_class} as a valid class.  Please choose between     Warrior, Wizard, Archer, or Thief."
  player_class = gets.chomp.downcase
end

if player_class == "warrior"
  puts "Yay a warrior!"
  stats["Strength"] = 20
elsif player_class == "thief"
  puts "yay a thief!"
  stats["Dexterity"] = 20
elsif player_class == "archer"
  puts "yay an archer!"
elsif player_class == "wizard"
  puts "Sweet a wizard!"
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:00:56.300

It's very simple.

```
1.9.3p194 :001 > ("warrior" || "thief" || "archer" || "wizard")
 => "warrior" 
```

The logical OR of several strings evaluates to the first one.

You could replace that line by something like:

```
while player_class != "warrior" and player_class != "thief" and player_class !=  "archer" and player_class != "wizard" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T16:01:38.540

Try setting up the classes as an array...

```
player_classes = ["warrior", "thief", "archer", "wizard"] 
```

And then when you want to check if the player has entered a valid class...

```
while ! player_classes.include? player_class 
```

instead.

You can use an even *nicer* idiom for single words...

```
%w(warrior thief archer wizard) 
```

Generates

```
["warrior", "thief", "archer", "wizard"] 
```

# Moving forward

You could take this approach a step forward by putting the player classes into a hash.

For example:

```
player_classes = {
  'warrior' => {:message => "Yay a warrior!", :stats => {:strength => 20} },
  'thief'   => {:message => "Ooh a thief!", :stats => {:dexterity => 20} },
  'archer'  => {:message => "Cool! an archer" },
  'wizard'  => {:message => "Sweet! a wizard" }
} 
```

You can then do things like this:

```
while ! player_classes.key? player_class 
```

Once you've got a match you can then pull the values out of the hash, like this:

```
selected_class = player_classes[player_class]
stats.merge selected_class[:stats] if selected_class[:stats] 
```

If there's no stats in the hash for that player class nothing will happen, if there is, it'll be merged in.

e.g. to test this...

```
selected_class = player_classes['warrior']
stats.merge selected_class[:stats] if selected_class[:stats] 

# stats is now {:strength=>20, :dexterity=>10, :charisma=>10, :stamina=>10}

selected_class = player_classes['wizard']
stats.merge selected_class[:stats] if selected_class[:stats] 

# stats is now {:strength=>10, :dexterity=>10, :charisma=>10, :stamina=>10} 
```

We can then show the message with:

```
puts player_classes[player_class][:message] 
```

This would reduce your logic down to capturing the player class input and then processing the hash.

# Revisting your original code

## Using a hash to act as a simple data-model.

You'd end up with code like this:

```
#!/usr/bin/env ruby

stats = { :strength => 10, :dexterity => 10, :charisma => 10, :stamina => 10 }

player_classes = {
  'warrior' => {:message => "Yay a warrior!", :stats => {:strength => 20} },
  'thief'   => {:message => "Ooh a thief!", :stats => {:dexterity => 20} },
  'archer'  => {:message => "Cool! an archer" },
  'wizard'  => {:message => "Sweet! a wizard" }
}

puts "Welcome brave adventurer, what is your name?"
player_name = gets.chomp.capitalize

puts "Well, #{player_name}, you are certainly brave!  Choose your profession.  (Choose from Warrior, Wizard, Archer, or Thief)."
player_class = gets.chomp.downcase

while ! player_classes.key? player_class
  puts "I do not recognize #{player_class} as a valid class.  Please choose between Warrior, Wizard, Archer, or Thief."
  player_class = gets.chomp.downcase
end

selected_class = player_classes[player_class]
stats.merge selected_class[:stats] if selected_class[:stats] 

puts selected_class[:message] 
```

You should also find this more readable, however, as you extend your game, you'll find that you can't easily work with code like this. You should next learn about using functions to break up your code into different routines. There are also more things you can do with arrays, hashes and collections.

Also, as soon as possible, you should start learning about programming Ruby in an Object Oriented style, which is how it should be used, ideally.

[Tutorials Point is a pretty decent site for learning more about Ruby](http://www.tutorialspoint.com/ruby/ruby_object_oriented.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:19:28.377

对于您做错了什么，请参阅 Diego 的回答。

`case`这是您应该使用该语句的典型情况。您可以删除例程以获取播放器类，如下所示：

```
public
def get_player_class
  case player_class = gets.chomp.downcase
  when "warrior" then puts "Yay a warrior!"; stats["Strength"] = 20
  when "thief" then puts "yay a thief!"; stats["Dexterity"] = 20
  when "archer" then puts "yay an archer!"; true
  when "wizard" then puts "Sweet a wizard!"; true
  else puts "I do not recognize #{player_class} as a valid class. "\
    "Please choose between Warrior, Wizard, Archer, or Thief."; false
  end
end

stats = {"Strength" => 10, "Dexterity" => 10, "Charisma" => 10, "Stamina" => 10,}
puts "Hello, brave adventurer.  What is your name?"
player_name = gets.chomp.capitalize
puts "Well, #{player_name}, you are certainly brave! "\
  "Choose your profession.  (Choose from Warrior, Wizard, Archer, or Thief)."
nil until get_player_class 
```

# node.js - 如何在 Node.js 中一次将一个可读流传输到两个可写流？

> ID：14173488
> 
> 赞同：34
> 
> 时间：2013-01-05T15:55:27.740
> 
> 标签：node.js, gzip, zlib, gzipstream, node.js-stream

目标是：

1.  创建文件读取流。
2.  将其通过管道传输到 gzip ( `zlib.createGzip()`)
3.  然后将 zlib 输出的读取流通过管道传输到：

    1) HTTP`response`对象

    2)**和**可写文件流来保存压缩后的输出。

现在我可以做到 3.1：

```
var gzip = zlib.createGzip(),
    sourceFileStream = fs.createReadStream(sourceFilePath),
    targetFileStream = fs.createWriteStream(targetFilePath);

response.setHeader('Content-Encoding', 'gzip');

sourceFileStream.pipe(gzip).pipe(response); 
```

...效果很好，但我还需要**将压缩后的数据保存到文件**中，这样我就不需要每次都进行 regzip 并且能够直接流式传输压缩后的数据作为响应。

**那么如何在 Node 中一次将一个可读流传输到两个可写流？**

`sourceFileStream.pipe(gzip).pipe(response).pipe(targetFileStream);`可以在 Node 0.8.x 中工作吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-05T17:11:40.453

管道链接/拆分不像您在这里尝试做的那样工作，将第一个发送到两个不同的后续步骤：

`sourceFileStream.pipe(gzip).pipe(response);`

但是，您可以将相同的可读流通过管道传输到两个可写流中，例如：

```
var fs = require('fs');

var source = fs.createReadStream('source.txt');
var dest1 = fs.createWriteStream('dest1.txt');
var dest2 = fs.createWriteStream('dest2.txt');

source.pipe(dest1);
source.pipe(dest2); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-03T04:04:25.520

我发现 zlib 返回一个可读流，该流可以稍后通过管道传输到多个其他流中。所以我做了以下来解决上述问题：

```
var sourceFileStream = fs.createReadStream(sourceFile);
// Even though we could chain like
// sourceFileStream.pipe(zlib.createGzip()).pipe(response);
// we need a stream with a gzipped data to pipe to two
// other streams.
var gzip = sourceFileStream.pipe(zlib.createGzip());

// This will pipe the gzipped data to response object
// and automatically close the response object.
gzip.pipe(response);

// Then I can pipe the gzipped data to a file.
gzip.pipe(fs.createWriteStream(targetFilePath)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-05-21T14:21:19.490

您可以使用“可读流克隆”包

```
const fs = require("fs");
const ReadableStreamClone = require("readable-stream-clone");

const readStream = fs.createReadStream('text.txt');

const readStream1 = new ReadableStreamClone(readStream);
const readStream2 = new ReadableStreamClone(readStream);

const writeStream1 = fs.createWriteStream('sample1.txt');
const writeStream2 = fs.createWriteStream('sample2.txt');

readStream1.pipe(writeStream1)
readStream2.pipe(writeStream2) 
```

# javascript - 哪个函数控制产品图像的变化？

> ID：14173496
> 
> 赞同：0
> 
> 时间：2013-01-05T15:56:16.677
> 
> 标签：javascript, magento

[http://www.wargame-club.com/3-day-molle-assault-backpack-black.html](http://www.wargame-club.com/3-day-molle-assault-backpack-black.html)

当我点击大产品图片下的四个产品缩略图时，产品图片会发生变化。我发现标签上没有`click`功能。`a`它如何使缩略图上的产品图像发生变化？谢谢你。

```
<li>
  <a title="" class="cloud-zoom-gallery" rel="popupWin:'http://www.wargame-club.com/catalog/product/gallery/id/24/image/83/', useZoom: 'cloudZoom', smallImage: 'http://www.wargame-club.com/media/catalog/product/cache/6/image/265x265/fa17b1d835a4c57a29916eae7df1805d/A/S/AS043_2.jpg'" href="http://www.wargame-club.com/media/catalog/product/cache/6/image/fa17b1d835a4c57a29916eae7df1805d/A/S/AS043_2.jpg"></a>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:02:12.650

**当您检查页面并检查 javascript 文件时，您将进入：** [http ://www.wargame-club.com/js/cjm/colorselectorplus/cloud-zoom.1.0.2.min.js](http://www.wargame-club.com/js/cjm/colorselectorplus/cloud-zoom.1.0.2.min.js)

在此文件中，您将找到以下代码：

```
 $(this).bind('click', $(this), function (event) {

var data = event.data.data('relOpts');

// Destroy the previous zoom
$('#' + data.useZoom).data('zoom').destroy();

// Change the biglink to point to the new big image.
$('#' + data.useZoom).attr('href', event.data.attr('href'));

// Change the small image to point to the new small image.
$('#' + data.useZoom + ' img').attr('src', event.data.data('relOpts').smallImage);

// Init a new zoom with the new images.
$('#' + event.data.data('relOpts').useZoom).CloudZoom(); 
```

}

**使用的脚本是： http:** [//www.starplugins.com/cloudzoom](http://www.starplugins.com/cloudzoom)

# php - 在 PHP Mysql 查询中使用撇号的最佳实践

> ID：14173497
> 
> 赞同：1
> 
> 时间：2013-01-05T15:56:31.170
> 
> 标签：php, mysql, apostrophe

当字符串中存在不匹配的“'”时，从 php 发送 sql 更新查询时，撇号可能会很痛苦。克服这个问题的最佳实践是什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T16:14:41.643

PDO：

```
$stmt = $pdo->prepare('SELECT * FROM users WHERE username = :username');
$stmt->execute(array(':username' => $_GET['username'])); 
```

MySQLi：

```
$query = $mysqli->prepare('SELECT * FROM users WHERE username = s');
$query->bind_param('s', $_GET['username']); 
```

这些扩展具有用于创建准备好的查询的内置函数，使您可以毫无问题地使用引号和撇号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:10:03.027

我认为最好的做法是使用准备好的语句，但你也可以使用[`addslashes($string)`](http://php.net/manual/en/function.addslashes.php)and[`stripslashes($string)`](http://php.net/manual/en/function.stripslashes.php)函数。

# javascript - jQuery UI 小部件 - 为什么这里有可用的更改器方法？

> ID：14173504
> 
> 赞同：1
> 
> 时间：2013-01-05T15:57:06.193
> 
> 标签：javascript, jquery, jquery-ui

我一直在查看jQuery UI 站点上[为小部件工厂提供的示例](http://jqueryui.com/widget/)，它在代码中包含以下内容：

```
_create: function() {
   // snip!

   this.changer = $( "<button>", {
     text: "change",
     "class": "custom-colorize-changer"
   })
   .appendTo( this.element )
   .button(); 
```

我在其他地方找不到任何参考`.changer`。你能像这样动态地创建方法，因为它是一个小部件、jQuery 或 javascript，还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:58:37.810

`this.changer`不是方法，它是一个新创建的包装`<button>`元素的 jQuery 对象。

`this.changer =`语法只是标准的javascript。`changer`小部件对象现在可以通过其成员引用此按钮。

这没有什么特别的或特定于 jQuery 的。

# android - Android：为所有不同的屏幕尺寸设计附加图像的最佳方式是什么？

> ID：14173506
> 
> 赞同：0
> 
> 时间：2013-01-05T15:57:16.567
> 
> 标签：android

我正在开发一款支持多种设备的游戏，并且我有一个开始屏幕。我附上了一张相同的图片。如图所示，有三个不同的文本（开始、帮助、关于我们）为此我采用三个不同的按钮并根据文本调整它们并使它们不可见以使文本可点击。但它仅适用于特定屏幕，我无法找到一种方法使其适用于多个屏幕。我还附加了为此创建的 xml 布局代码。请帮我解决这个问题...![在此处输入图像描述](../Images/36cd1ba162f86c40d1b5e1cc8f1c66cc.png)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/start_screen" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="175dp"
    android:background="#00000000" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_centerVertical="true"
    android:background="#00000000" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button2"
    android:layout_below="@+id/button2"
    android:background="#00000000" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:03:44.503

You can use "resource qualifiers" in your res directory to provide different graphics for different screen sizes / densities.

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

[http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

# c# - 分布式服务器：网络连接

> ID：14173507
> 
> 赞同：0
> 
> 时间：2013-01-05T15:57:19.820
> 
> 标签：c#, networking, load-balancing, distributed-computing

我正在开发一个应用程序，它应该在具有不同任务/角色的多台机器上运行，但同步（某种负载平衡（游戏）服务器，其中一些机器处理不同的世界，一台机器处理聊天和库存，其他机器处理传入网络连接...）。

一开始，应用程序实例应该在彼此之间创建 TCP 连接。但是我将如何在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:30:18.020

首先，您需要可以联系正确游戏服务器的负载平衡服务器。这可能是架构中最薄弱的地方。您可以通过使用 DNS 循环和多个负载平衡器来限制风险。

如果您的所有服务器都放置在同一网络上，您可以使用 UDP 广播来允许负载平衡器自动发现所有游戏服务器。数据包类似于“嘿，我是库存服务器，连接到我”，然后负载平衡服务器将创建一个 TCP 连接，该连接仅用于监控游戏服务器（CPU 使用率等，以确保服务器没有得到太多的工作）。

# iphone - iOS 5 上 NSDictionary 中奇怪的重复键，iOS 6 上则不然

> ID：14173510
> 
> 赞同：2
> 
> 时间：2013-01-05T15:57:50.963
> 
> 标签：iphone, objective-c, ios, uitableview, nsdictionary

我使用 a`NSMutableDictionary`来存储一些关于某些`UITableViewCell`s 的值，所以我使用 as 的实例`NSIndexPath`作为键。在 iOS 6 上一切正常，但是当我在 iOS 5 模拟器中运行完全相同的代码时，奇怪的事情发生了。所以我将字典的内容打印到控制台：

```
Printing description of heights:
{
    "<UIMutableIndexPath 0x6a8a3d0> 2 indexes [1, 3]" = 100;
    "<UIMutableIndexPath 0x6a8a3d0> 2 indexes [1, 3]" = 100;
    "<UIMutableIndexPath 0x6a8a3d0> 2 indexes [1, 3]" = 100;
} 
```

在 iOS 6 上，它看起来像这样：

```
Printing description of heights:
{
    "<UIMutableIndexPath 0x75ca8c0> 2 indexes [0, 1]" = 44;
    "<UIMutableIndexPath 0x75caa70> 2 indexes [0, 0]" = 10;
    "<UIMutableIndexPath 0x75ca500> 2 indexes [1, 0]" = 100;
    "<UIMutableIndexPath 0x717df70> 2 indexes [1, 1]" = 67;
    "<UIMutableIndexPath 0x715a3e0> 2 indexes [1, 2]" = 67;
    "<UIMutableIndexPath 0x717def0> 2 indexes [1, 3]" = 67;
} 
```

显然，它应该是这样的！为什么 iOS 5 上的字典会为**完全相同**的键存储不同的值？

* * *

**编辑：**一些代码...

字典创建只是

```
self.heights = [[NSMutableDictionary alloc] init]; 
```

我使用新的下标语法设置值，例如：

```
self.heights[indexPath] = minHeight; 
```

（`indexPath`是一个`NSIndexPath`，`minHeight`是一个`NSNumber`。）

当委托请求它们时，我动态设置这些值：

```
- (NSNumber *)heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (![indexPath isInTableView:self.tableView])
    {
        @throw [NSException exceptionWithName:NSInvalidArgumentException reason:@"indexPath not in tableView" userInfo:nil];
    }

    NSNumber *storedHeight = self.heights[indexPath];
    if (storedHeight != nil)
    {
        return storedHeight;
    }

    NSNumber *minHeight = self.minimumHeights[indexPath];
    self.heights[indexPath] = minHeight;
    return minHeight;
} 
```

`minimumHeights` `NSDictionary`还为表视图中的每个 indexPath 保存s `NSNumber`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:23:53.207

我记得在 iOS6 中阅读过有关`NSIndexPath`方法`isEqual:`或`hash`两者都发生变化的信息，或者只是在 iOS 5 中存在错误。无论如何，您似乎不能将它们用作 dict 键。

尝试使用不同的键。也许使用它的`description`方法或使用部分和行构建的自定义字符串。

```
#define idx2key(_ip) [NSString stringWithFormat:@"%d:%d", [_ip section], [_ip row]]

...
self.heights[idx2key(indexPath)] = minHeight;
... 
```

在老`NSIndexPath`苹果说：

> NSIndexPath 对象是唯一且共享的。如果包含指定索引的索引路径已存在，则返回该对象而不是新实例。

那段已经不存在了。我想实例的内部比较也已更改。

# json - Json解析#text对象

> ID：14173515
> 
> 赞同：2
> 
> 时间：2013-01-05T15:58:41.453
> 
> 标签：json, parsing

我正在尝试遍历 JSON 数组以到达`size:large`. 该`#text`属性让我感到困惑，因为我无法将它包含在我的点符号中。我可以`size=large`这样做：

```
json.track.album.image[2].size 
```

但`json.track.album.image[2].#text`不会工作。

这是 JSON 数据的片段：

```
{"track":{"id":"1019817","name":"Believe","mbid":"13194c93-89c6-4ab4-aaf2-     15db5d73b74e","url":"http:\/\/www.last.fm\/music\/Cher\/_\/Believe","duration":"222000","streamable":{"#text":"1","fulltrack":"0"},"listeners":"287271","playcount":"1206650","artist":{"name":"Cher","mbid":"bfcc6d75-a6a5-4bc6-8282-47aec8531818","url":"http:\/\/www.last.fm\/music\/Cher"},"album":{"artist":"Cher","title":"The Very Best of Cher","mbid":"5df00011-6e57-4837-99ae-61f398481db5","url":"http:\/\/www.last.fm\/music\/Cher\/The+Very+Best+of+Cher","image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/71997588.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/71997588.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/174s\/71997588.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/71997588.png","size":"extralarge"}], 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:01:25.037

由于前导`#`，您必须改用以下`[]`语法：

```
json.track.album.image[2]['#text'] 
```

这允许您将键指定为字符串，因此允许使用特殊字符。

# jquery - 当页面上有多个表时，使用 jquery 单击 Gridview 突出显示一行

> ID：14173519
> 
> 赞同：0
> 
> 时间：2013-01-05T15:59:22.777
> 
> 标签：jquery, gridview, onclick, row, highlight

我的代码是这样的

```
 <table>
      <tr><td> report heading </td> </tr>
      <tr><td>export to excel button</td></tr>
      <tr><td> 
         <table id=tblGridview>
          <tr><td><asp:gridview cssclass = "OFGrid" id="grdviewID"></asp:gridview></td></tr>
         </table>
        </td>
       </tr>
    </table>

and am using below jquery to highlight the row when clicked
$(document).ready(function() {
    $('tr').filter(function() {
            return $('td', this).length && !$('table', this).length
        }).click(function() {
            $(this).toggleClass('currRow');
        });
    }); 
```

这工作正常，但问题是这会为所有 tr 触发。即使我单击具有“报告标题”和“导出到 excel”按钮的前两行，该行也会突出显示。我如何将 jquery 更改为仅在单击 gridview 中的任何行时才会触发 jquery 的方式。由于gridview本身作为表发出，我如何限制特定于该表的jquery。

如果可能的话，如果有人逐行解释这个jquery是如何工作的，那将会很有帮助。我只是不明白。

请帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:02:07.990

Filter out the first 2 rows inside your `filter()` condition:

```
return this.index() > 1 && $('td', this).length && !$('table', this).length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:26:56.583

您可以使用`gt(index)`选择器将元素集合过滤为仅索引大于选择器中提供的索引的元素

```
$('table').find('tr:gt(1)').... 
```

如果这会导致嵌套表出现问题，您可能应该考虑将一些类添加到表或行中

```
$('table.allowClickClass tr').... 
```

或者

```
$('tr').not('.noClickClass').... 
```

API 参考：[http ://api.jquery.com/gt-selector/](http://api.jquery.com/gt-selector/)

**编辑**如果我理解问题，另一个可能有用的简单选择器是：

```
/* only apply handler to nested tables*/
$('tr table tr').click... 
```

# logging - 在不同于管理服务器的服务器上登录 Weblogic

> ID：14173521
> 
> 赞同：6
> 
> 时间：2013-01-05T15:59:30.220
> 
> 标签：logging, weblogic

我对 WebLogic 很陌生。

我有一个 WebLogic 域，其中有 2 台服务器在运行，其中一台是管理服务器，并且在两台服务器上都有我正在尝试测试的 web 服务。

每当向管理服务器的 url 发送请求时，输出都会显示在服务器日志中，而当使用第二个服务器的 url 时，虽然我以相同的方式为两台服务器配置了日志记录，但什么也没有显示。

感谢任何帮助。

***编辑 ：***

对不起，我忘了提到我正在使用 log4j 作为 webservices 登录

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T19:38:16.183

正如 Viccari 建议的那样，您应该能够在以下位置找到日志：

*   服务器 1 节点（管理服务器）：

    ```
    [WL home]/user_projects/domains/[your domain]/servers/AdminServer/logs 
    ```

*   服务器 2 节点：

    ```
    [WL home]/user_projects/domains/[your domain]/servers/Server2_name/logs 
    ```

此外，我建议从命令行启动服务器，并将这些启动进程的输出捕获到其他日志文件中，例如：

*   对于管理服务器：

    > [WL 主页]/user_projects/domains/[您的域]/startWeblogic.sh | tee log.AdminServer

*   对于服务器 2：

    > [WL 主页]/user_projects/domains/[您的域]/bin/startManagedWebLogic.sh server2_name t3://adminServer:7001 | tee log.server2_name

这些日志将例如向您显示 Web 服务中`System.out.println()`调用的输出。

此外，查看`[WL home]/user_projects/domains/[your domain]/bin/startWeblogic.sh`脚本并将变量设置为`WLS_REDIRECT_LOG`指向要存储 Weblogic 输出的文件的值。

# ios - AutoLayout 和 ChildViewControllers 的问题（ChildVCs 视图的大小不正确）

> ID：14173523
> 
> 赞同：6
> 
> 时间：2013-01-05T15:59:35.407
> 
> 标签：ios, autolayout, childviewcontroller

我在做一件相当简单的事情时遇到了一些困难，我错过了一些东西，但看不到......

我用一个非常简单的应用程序（使用 IB）重现了这个问题：

*   App 的主 ViewController 是一个 UINavigationController。
*   NavigationController 的根是“FirstViewController”。
*   FirstViewController 和 SecondViewController 是空的 UIViewController 子类。
    *   它们的 XIB 文件在创建类时由 XCode 生成，启用了 AutoLayout。
    *   我将标签放在 SecondViewController 的顶部和底部（垂直空间约束 = 0）。

## 使用 ChildViewController

问题是如果我通过“ChildViewControllers”方法显示 SecondViewController，它在我的 iPhone4 上会出错：我看不到底部标签。

```
// In FirstViewController.m
- (IBAction)child:(id)sender {
    [self addChildViewController:self.secondVC];
    [self.view addSubview:self.secondVC.view];
    [self.secondVC didMoveToParentViewController:self];
} 
```

## 使用导航控制器

如果我通过 NavigationController 显示“SecondViewController”，一切正常，SecondViewController 显示正常。

```
// In FirstViewController.m
- (IBAction)push:(id)sender {
    [self.navigationController pushViewController:self.secondVC animated:YES];
} 
```

**此外，一旦通过 NavigationController 显示 SecondViewController 一次，它就会一直很好地显示出来。**

我肯定错过了什么，但是什么？:p 你有什么想法吗？

我在 dropbox 上上传了简单的项目：[https ://dl.dropbox.com/u/36803737/sharebox/AutoLayoutTest.zip](https://dl.dropbox.com/u/36803737/sharebox/AutoLayoutTest.zip)

谢谢！

朱利安

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-05T16:44:21.433

您的保管箱链接不起作用，所以我无法尝试。在将其添加为子视图之前尝试设置 secondVC 的框架：

```
secondVC.view.frame = self.view.bounds; 
```

如果你想用约束来做，我这样做：

```
- (IBAction)child:(id)sender {
    [self addChildViewController:self.secondVC];
    [self.view addSubview:self.secondVC.view];
    [self constrainViewEqual:secondVC.view];
    [self.secondVC didMoveToParentViewController:self];
}

-(void)constrainViewEqual:(UIView *) view {
    [view setTranslatesAutoresizingMaskIntoConstraints:NO];
    NSLayoutConstraint *con1 = [NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeCenterX relatedBy:0 toItem:view attribute:NSLayoutAttributeCenterX multiplier:1 constant:0];
    NSLayoutConstraint *con2 = [NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeCenterY relatedBy:0 toItem:view attribute:NSLayoutAttributeCenterY multiplier:1 constant:0];
    NSLayoutConstraint *con3 = [NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeWidth relatedBy:0 toItem:view attribute:NSLayoutAttributeWidth multiplier:1 constant:0];
    NSLayoutConstraint *con4 = [NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeHeight relatedBy:0 toItem:view attribute:NSLayoutAttributeHeight multiplier:1 constant:0];
    NSArray *constraints = @[con1,con2,con3,con4];
    [self.view addConstraints:constraints];
} 
```

由于我经常使用约束，因此我在 UIView 的一个类别中使用了上述方法（和其他方法），以使我的代码看起来更干净。

# javascript - How to collate sequence \" using ECMAScript regular expressions?

> ID：14173532
> 
> 赞同：1
> 
> 时间：2013-01-05T16:00:30.397
> 
> 标签：javascript, c++, regex

I'm trying to construct a regular expression to treat delimited speech marks (`\"`) as a single character.

The following code compiles fine, but terminates on trying to initialise rgx, throwing the error `Abort trap: 6` using libc++.

```
std::regex rgx("[[.\\\\\".]]");
std::smatch results;
std::string test_str("\\\"");
std::regex_search(test_str, results, rgx); 
```

If I remove the `[[. .]]`, it runs fine, `results[0]` returning `\"` as intended, but as said, I'd like for this sequence to be usable as a character class.

Edit: Ok, I realise now that my previous understanding of collated sequences was incorrect, and the reason it wouldn't work is that `\\\\\"` is not defined as a sequence. So my new question: is it possible to define collated sequences?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:07:02.970

所以我想出了我哪里出错了，我想我会把它留在这里，以防有人偶然发现它。

您可以使用 指定一组被动字符`(?:sequence)`，从而允许将量词应用于字符类。也许不完全是我最初要求的，但至少在我的情况下，实现了相同的目的。

为了匹配以双引号开头和结尾的字符串（包括结果中的这些字符），但允许在字符串中使用分隔引号，我使用了表达式

```
\"(?:[^\"^\\\\]+|(?:\\\\\\\\)+|\\\\\")*\" 
```

它说要抓住尽可能多的字符，前提是字符不是引号或反斜杠，然后如果不匹配，首先尝试匹配偶数个反斜杠（以允许分隔该字符），或者其次是分隔引号。这个非捕获组被匹配尽可能多的次数，仅在到达 a 时停止`\"`。

我无法评论它的效率，但它确实有效。

# c# - w8 metro live tile 在计算机重新启动后不会动画

> ID：14173536
> 
> 赞同：0
> 
> 时间：2013-01-05T16:01:11.317
> 
> 标签：c#, microsoft-metro, live-tile

我有一个 Windows 8 Metro 应用程序，它在每分钟刷新的动态磁贴上显示数据。

当 Metro 应用程序启动时，它会创建一个序列来进行磁贴更新。这完美地工作。

**问题：**

当我重新启动计算机时，地铁磁贴停止工作。相反，它会回到默认的 Metro 磁贴（应用名称左下图像中间）。

只需启动和停止 Metro 应用程序，我就可以让它再次工作。但我不希望这样做。

我实现了一个实现 IBackgroundTask 并实现 run 方法的类。

```
public void Run(IBackgroundTaskInstance taskInstance){
    BackgroundTaskDeferral deferral = taskInstance.GetDeferral();
    TileScheduler.CreateSchedule();
    deferral.Complete();
} 
```

在 Metro 应用程序包清单中添加了声明“后台任务”并在指向此类的入口点下。我还注册了计时器和系统事件。

此类代码基本上调用了与第一次设置磁贴序列时主应用程序相同的代码路径，只是它被延迟包装。

**问题** 这是正确的道路吗（因为它似乎不起作用，所以我猜我的实现是错误的）？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:53:45.130

这可能只是“你不能用模拟程序做到这一点”的情况。我假设您通过在 Visual Studio 中使用开发人员许可证运行应用程序来执行此操作。我对磁贴更新工作原理的理解（如果我错了，请纠正我），但磁贴会轮询网站以获取下一个要显示的项目。由于您已退回您的盒子，因此任何 Visual Studio 启动的服务（如 ASP.net 主机等）都不会运行，因此磁贴将无法获得其新更新。

如果您想在部署到商店之前测试功能，我建议在您的项目中将 Web 服务部署到 IIS 而不是测试环境并配置 IIS 以在启动时托管该服务。

# php - Script not writing to database with PDO

> ID：14173542
> 
> 赞同：0
> 
> 时间：2013-01-05T16:01:35.273
> 
> 标签：php, pdo

I'm having my first stab at OOP in PHP using PDO. I'm creating a log-in using a tutorial but having problems adding users to the database.

Here is my insert function(method) in my user class.

```
function registerUsers($username,$email,$password,$ip_address,$time,$date)
{
   $query = $this->link->prepare("INSERT INTO users (username,email,password,ip_address,date,time)VALUES (?,?,?,?,?,?)");
   $values = array($username,$email,$password,$ip_address,$date,$time);
   $query->execute($values);
   $counts = $query->rowCount();
   return $counts;
} 
```

I'm guessing the issue is with the above code. My connection class is connecting to the database ok.

I wont post all the code here as its difficult to post large amounts of code on Stack with the spacing system they use so I have uploaded all my files here if you need a bigger picture: [http://www.4shared.com/zip/PsQ7q73d/todo.html](http://www.4shared.com/zip/PsQ7q73d/todo.html)

You may also notice the error messages are not working either but I can ask that in another question if it's out of the scope of this question.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:11:15.033

```
function registerUsers($username,$email,$password,$ip_address,$time,$date) {
    try {
        $query = $this->link->prepare("INSERT INTO users (username,email,password,ip_address,date,time)VALUES (?,?,?,?,?,?)");
        $query->execute($username,$email,$password,$ip_address,$date,$time);
    } catch (PDOException $e) {
        print "Error!: " . $e->getMessage();
        return false;
    }
    return true;
} 
```

# python - 在目录中搜索包含某些文件的目录？

> ID：14173549
> 
> 赞同：0
> 
> 时间：2013-01-05T16:02:15.597
> 
> 标签：python

我想递归地在文件夹中搜索包含文件名“x.txt”和“y.txt”的文件夹。例如，如果它是 given `/path/to/folder`，`/path/to/folder/one/two/three/four/x.txt`并且`/path/to/folder/one/two/three/four/y.txt`存在，它应该返回一个包含 item 的列表`"/path/fo/folder/one/two/three/four"`。如果给定文件夹中的多个文件夹满足条件，则应将它们全部列出。这可以通过一个简单的循环来完成，还是更复杂？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:05:38.687

`os.walk`为您完成递归迭代目录结构的艰苦工作：

```
import os

find = ['x.txt', 'y.txt']

found_dirs = []
for root, dirs, files in os.walk('/path/to/folder'):
    if any(filename in files for filename in find):
        found_dirs.append(root)

#found_dirs now contains all of the directories which matched 
```

# ios - iOS - SearchDisplayController - SearchBar style

> ID：14173550
> 
> 赞同：2
> 
> 时间：2013-01-05T16:02:19.160
> 
> 标签：ios

I'm working with SearchDisplayController and want to apply a style or tint to the searchBar. But I noticed that the SearchDisplayController makes changes to the style of my searchBar.

For example if I use the "Dark Text Color" tint on my searchBar, when running the app, I'll obtain a grey style. But if I remove the searchDisplayController linked to the searchBar, the style in the app is ok.

This image shows the difference between the searchBar in the storyboard and in the app. ![difference between searchBar in the storyboard and in app](../Images/ea08c2ac32c40ce6f8138068dee3b0c1.png)

Note: If I use the default style, I don't have any problem.

I don't understand what changes the searchDisplayController adds to the searchBar. Am I missing something or doing something wrong ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:40:55.223

不，你没有做错什么。虽然我不确定它为什么会这样工作，但我可以想象选择较浅的颜色以区分取消按钮（它将具有您的色调颜色）。

对我有用的是将背景颜色设置为黑色，无色调（默认），并使用黑色半透明样式。

另请记住，当您设置色调时，样式会被忽略。

我记得为此苦苦挣扎了几个小时，只是为了得到一个黑色的搜索栏。

# objective-c - 自转iOS6

> ID：14173558
> 
> 赞同：0
> 
> 时间：2013-01-05T16:03:27.433
> 
> 标签：objective-c, ios, autorotate

> **可能重复：**
> [如何使应用程序在 iOS 6 中完全正常工作以实现自动旋转？](https://stackoverflow.com/questions/12662240/how-to-make-app-fully-working-correctly-for-autorotation-in-ios-6)

在 iOS6 中遇到自动旋转问题。我在 App Delegate 中添加了这个：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return (UIInterfaceOrientationMaskAll);
} 
```

并在视图控制器中添加了这个：

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskPortrait);
} 
```

我仍然不能让它只是肖像，而不是风景！非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:34:15.403

仅将其粘贴到 ViewController：

```
- (NSUInteger)supportedInterfaceOrientations
{
     return (UIInterfaceOrientationMaskPortrait);
} 
```

删除`shouldAutorotate`和`application:supportedInterfaceOrientationsForWindow:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:57:27.927

您无需在 App Delegate 对象中设置界面方向。在 Project Navigator 中选择您的项目文件。然后选择目标并选择 Summery。您可以在此处选择支持的接口方向。这适用于整个项目。

# android - Android加载一些数据

> ID：14173563
> 
> 赞同：1
> 
> 时间：2013-01-05T16:03:59.820
> 
> 标签：android, exception

所以我有一个问题，为什么我的函数`getIt()` 会中断`httpGet`并给出`Exception`，在清单中我添加了`INTERNET`权限！我没有使用 AsyncTask，因为我需要创建一个新类，如果我用它调用 AsyncTask，`get`它会阻塞我的 UI

**类.java**

```
public class loadMovies{
    public String getIt(){
        InputStream ips = null;
        JSONObject json = null;
        String get = "";
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet("http://mysite/app/movies");
        try {
            HttpResponse response = client.execute(httpGet);
            ips = response.getEntity().getContent();

            BufferedReader buffer = new BufferedReader(new InputStreamReader(ips));
            StringBuilder builder = new StringBuilder();
            String line;

            while((line = buffer.readLine()) != null){
                builder.append(line+"\n");
            }
            json = new JSONObject(builder.toString());
            Log.d(TAG, json.toString());
        }
        catch(Exception e){ e.printStackTrace(); }

        if(json != null){
            JSONArray array = json.optJSONObject("data").optJSONArray("movies");

            for(int i = 0; i < array.length(); i++){
                JSONObject rss = array.optJSONObject(i);
                get += rss.optString("name")+"\n";
            }
        }
        return get;
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:23:24.113

您的应用程序在 Android 3.0 及更高版本上崩溃的原因是 HoneyComb、Ice Cream Sandwich 和 JellyBean 对 UI 线程的滥用更加严格。例如，当运行 HoneyComb 或以上版本的 Android 设备在 UI 线程上检测到网络访问时，会抛出 NetworkOnMainThreadException：

```
E/AndroidRuntime(673): java.lang.RuntimeException: Unable to start activity
ComponentInfo{com.example/com.example.ExampleActivity}: android.os.NetworkOnMainThreadException 
```

Android 开发人员的网站上有详细记录为什么会发生这种情况的解释：

```
A NetworkOnMainThreadException is thrown when an application attempts to perform a networking operation on its main thread. This is only thrown for applications targeting the Honeycomb SDK or higher. Applications targeting earlier SDK versions are allowed to do networking on their main event loop threads, but it's heavily discouraged. 
```

ICS 和 HoneyComb 不允许您在 UI 线程上执行的其他一些操作示例如下：

1.  打开一个 Socket 连接（即 new Socket()）。
2.  HTTP 请求（即 HTTPClient 和 HTTPUrlConnection）。
3.  尝试连接到远程 MySQL 数据库。
4.  下载文件（即 Downloader.downloadFile()）。

如果您尝试在 UI 线程上执行任何这些操作，则必须将它们包装在工作线程中。最简单的方法是使用 AsyncTask，它允许您在用户界面上执行异步工作。AsyncTask 将在工作线程中执行阻塞操作并将结果发布到 UI 线程上，而无需您自己处理线程和/或处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:16:37.923

> 如果我用 get 调用 AsyncTask，它会阻止我的 UI

因为正如文档所说的[AsyncTask get ()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28long,%20java.util.concurrent.TimeUnit%29)：

> 如有必要，等待计算完成，然后检索其结果。

避免在`AsyncTask`不调用`get`UI 线程上的方法的情况下阻止 UI 使用，并`doInBackground`在`onPostExecute`.

将您的 AsyncTask 类创建为：

```
public class LongloadMovies extends AsyncTask<String, Void, String> {

      @Override
      protected String doInBackground(String... params) {

            loadMovies loadmovobj =new loadMovies();
            String strresult=loadmovobj.getIt();
            return strresult;
      }      

      @Override
      protected void onPostExecute(String result) {     

           // Update your UI here          
      }

} 
```

并从 UI 线程执行 AsyncTask ：

```
new LongloadMovies().execute(""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:16:56.363

您不能在主 ui 线程上进行网络操作。您需要在另一个线程或异步任务中执行此操作。[这](http://www.vogella.com/articles/AndroidPerformance/article.html)是 tut 谈论这个

# javascript - Open multiple tabs in Chrome via bookmarklet

> ID：14173567
> 
> 赞同：6
> 
> 时间：2013-01-05T16:04:19.010
> 
> 标签：javascript, google-chrome, bookmarklet

I'm making bookmarklets for my personal use, and some of them should open 2-3 tabs at once. But currently Chrome dissalows to open multilple tabs with one click, blocking the second, third and the rest of `window.open`s which I'm trying to execute.

I understand, that it's something about security and avoiding of eternal loops, but I need to open windows in just one iteration. I would like to make Chrome sure, that everything going to be fine and stop that annoying blocking, because extra clicks for *allowing pop-ups* on each website, while their number isn't limited, makes my bookmarklets not so useful at all.

Already tried this:

```
setTimeout(function(){window.open(url1)}, 500);
setTimeout(function(){window.open(url2)}, 500); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:28:03.793

它们都与该代码同时（或接近）打开，更改延迟或将一个嵌入另一个。

* * *

```
 setTimeout( function(){ window.open(url1) }, 10);
    setTimeout( function(){ window.open(url2) }, 20);
    setTimeout( function(){ /* any other code with window.open() */ }, 30); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:07:28.343

Chrome 将每个选项卡作为单独的沙盒进程运行 - 当您单击书签时，它只能在该选项卡内执行操作。

这使您可以选择从第一个选项卡的 html/js 打开第二个选项卡，但这将被弹出窗口阻止程序阻止，除非用户操作提示它。

# css - 如何创建一个 100% 宽的动画画布，其上放置 100% 大小的内容？

> ID：14173569
> 
> 赞同：0
> 
> 时间：2013-01-05T16:04:40.897
> 
> 标签：css, html

考虑一个包含背景部分的网页，其中包含我想在其上创建动画的图像（例如 image=sky 和 ​​animation=moving-clouds）。这东西是100%的宽度。

在这个“画布”上，应该放置 100% 的内容部分。

我问这个问题的原因是因为我可以简单地使用`div`s 和绝对定位来实现这样的事情。`div`但是当s 有 100% 的宽度时，我不知道如何制作这样的东西！

我可以写这样的东西：

```
<div id='canvas' style='width:100%;background-image:...'>
  <div id='cloud1' style='...'></div>
  <div id='cloud2' style='...'></div>
  <div id='cloud3' style='...'></div>
</div>
<div id='cont' style='width:100%'>
  my content here
</div> 
```

样式`canvas`等`cont`出现`cont`在 javascript 上`canvas`，类似的元素`clousx`由 javascript 移动，但它们存在于`cont`.

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:33:38.130

我不知道我说得对不对，但你完全可以按照你想要的方式去做。所以这是`width: 100%;`和的组合`position: absolute;`。

**演示**

[先试后买](http://jsfiddle.net/4zPkH/)

该演示使用带有 CSS3`rgba`值的 background-property 进行演示。

**CSS**

```
div.outer {
  position: absolute;
  width: 100%;
  height: 100%;
  border:1px solid red;
}

div.text {
  background: rgba(255,255,255,0.5);
}

div.cloud {
  position: absolute;
  top: 20px;
  left: 20px;
  height: 50px;
  width: 50px;
  border: 1px solid red;
} 
```

**HTML**

```
<div class="outer">
    <div class="cloud"></div>
</div>

<div class="outer text">
  Content goes here
</div> 
```

# jquery - 如何选择所有没有类的 DIV？

> ID：14173572
> 
> 赞同：0
> 
> 时间：2013-01-05T16:05:00.583
> 
> 标签：jquery, jquery-selectors, each

> **可能重复：**
> [选择没有任何类的元素](https://stackoverflow.com/questions/4991576/select-elements-without-any-class)

使用`jQuery`我想选择所有`fieldsets`没有任何类的。

这是我的代码：

```
<div>
  <fieldset>teste</fieldset>
  <fieldset class="teste">teste</fieldset>
  <fieldset>teste</fieldset>
  <fieldset class="teste">teste</fieldset>
  <fieldset class="teste">teste</fieldset>
  <fieldset class="teste">teste</fieldset>
  <fieldset>teste</fieldset>
  <fieldset class="teste">teste</fieldset>
  <fieldset class="teste">teste</fieldset>
  <fieldset class="teste2">teste</fieldset>
  <fieldset class="teste2">teste</fieldset>
  <fieldset>teste</fieldset>
  <fieldset class="teste">teste</fieldset>
  <fieldset class="teste">teste</fieldset>
</div> 
```

这是我的代码：

**[这是一个 jsFiddle 演示。](http://jsfiddle.net/ignaciocorreia/UNyeQ/4/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:14:57.833

使用 jQuery 选择器：

```
$('fieldset:not([class])'); 
```

或者，使用循环：

```
var elems = $('fieldset');
for (var i = 0, l = elems.length; i < l; i++){
    if ( elems.get(i).className == '' ){
        // do something
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:08:44.970

有两种方法可以做到这一点：

```
$('fieldset').not('.teste') 
```

或者

```
$('fieldset:not(.teste)') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T16:17:35.177

您也可以使用过滤器：

```
var $fieldsetNoClass = $('fieldset').filter(':not([class])'); 
```

[http://jsfiddle.net/UNyeQ/5/](http://jsfiddle.net/UNyeQ/5/)

要不就：

```
$('fieldset').not('[class]'); 
```

# jquery - 功能未在页面上加载

> ID：14173573
> 
> 赞同：1
> 
> 时间：2013-01-05T16:05:08.070
> 
> 标签：jquery

带有 jquery 功能的 Click 事件在 a 标签之前不起作用，但在 a 标签之后工作正常。另外，如果我使用`document.ready`它，它会起作用。我想知道为什么它在 a 标签之前不起作用。

```
<head>
    <script type="text/javascript">
        function jchand(){
            $('a').click(function(){
                alert('a')
            })
        }
        jchand();
    </script>
</head>
<body>
    <a href="#" >click me</a>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:07:25.597

当您尝试绑定时，该元素不存在`.click`，因为页面尚未完成加载。

> 另一件事如果我正在使用文档 .ready 那么它正在工作

好吧*，*这正是`$(document).ready`：

 *```
$(document).ready(function()
{
    $('a').click(function()
    {
        alert('a');
    });
}); 
```

或者，您可以使用[.on()](http://api.jquery.com/on/)：

```
$(document).on('click', 'a', function()
{
    alert('a');
}); 
```

而是绑定到整个文档，因此将适用于将来添加的任何元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T16:07:12.567

`$('a')`寻找`<a>`元素，但 DOM 还没有准备好。用于`$(document).ready()`创建在 DOM 实际准备好时触发的回调函数：

```
$(document).ready(function() {
    $('a').click(function(){
        alert('a');
    })
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T16:10:16.197

最可能的问题是 jchand() 在`<a>`元素存在之前执行。尝试这个：

```
<script type="text/javascript">
$(function(){
$('a').click(function(){
alert('a')
})
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T16:06:52.967

因为在 DOM 中加载 a 之前调用了脚本。那时，它看不到任何附加点击元素的“a”元素。虽然函数声明是可以的，但它必须在'a'之后调用。

document.ready 函数在页面的所有元素加载后调用脚本，因此它被触发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T16:07:16.423

您的脚本在 DOM 准备好之前执行。`$(document).ready(function())`如果您像这样在文档就绪（或）上调用该函数，它将起作用`$(function())`：

```
<head>
<script type="text/javascript">
    function jchand(){
        $('a').click(function(){
            alert('a')
        })
    }

    $(function() {
        jchand();
    })
</script>
</head>
<body>
<a href="#" >click me</a>
</body> 
```*

# database - 在 Enterprise Architect 中的表之间复制列

> ID：14173574
> 
> 赞同：7
> 
> 时间：2013-01-05T16:05:16.160
> 
> 标签：database, enterprise-architect

我使用 Enterprise Architect 对数据库进行建模。
通常我在表中有列（CreateDate、CreateUserId 等），但我不知道如何将一些列从一个表复制到第二个表？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-05T16:15:46.403

这实际上是可能的，尽管并不明显。打开图表，在项目浏览器中展开要从中复制的表格，然后您将看到表格的所有属性（列）。选择一个或多个并将它们拖到图表上的目标表中！如果您将它们拖到项目浏览器中的目标表，您将改为移动列。

# css - 使用 CSS 在树中选择父 n 层？

> ID：14173581
> 
> 赞同：0
> 
> 时间：2013-01-05T16:06:32.240
> 
> 标签：css, css-selectors

我有一个具有 20 多个 div 层的 DOM 结构相对复杂的应用程序。

如果我在树中间的某个地方有一个 div，`class="active"`我如何使用 CSS 在树中选择它的父**n层？**

例如，如何在以下树中选择以大写（向上 4 层）标记的 div？：

```
<DIV>
  <div>
    <div>
      <div>
        <div class="active">
        </div>
      </div>
      <div>
      </div>
    </div>
  </div>
</DIV> 
```

同样考虑第一个孩子？如何选择树下的第一个子**n层？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:19:51.027

不幸的是，[没有父选择器之类的东西](https://stackoverflow.com/questions/45004/complex-css-selector-for-parent-of-active-child)。您必须直接在所需元素上设置一个类，可以手动设置，也可以使用一些服务器端代码，或者通过 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:04:32.367

根据这篇文章，我发现标题为[CSS4 Preview](http://davidwalsh.name/css4-preview)，可以在 CSS4 中设置父元素的样式。该文章表明，可以像下面这样设置父元素的样式：

```
$div > div > div > div.active { border: 1px solid #ccc; } 
```

`div`（给定示例将在树中设置嵌套的 3 层样式`div.active`）

回到我的应用程序，使用 PHP 和内联 CSS，我将能够控制**n**（嵌套深度）。

在 CSS4 之前，我将使用某种 jQuery 解决方案。

# c# - Storyboard 不会为自定义 FrameworkElement 属性设置动画

> ID：14173584
> 
> 赞同：1
> 
> 时间：2013-01-05T16:07:05.070
> 
> 标签：c#, wpf, animation, storyboard

我有派生自 的类，`FrameworkElement`我希望 WPF 使用`DoubleAnimation`. 我将财产注册为`DependendencyProperty`：

```
public class TimeCursor : FrameworkElement
{
    public static readonly DependencyProperty LocationProperty;

    public double Location
    {
        get { return (double)GetValue(LocationProperty); }
        set
        {
            SetValue(LocationProperty, value);
        }
    }

    static TimeCursor()
    {
        LocationProperty = DependencyProperty.Register("Location", typeof(double), typeof(TimeCursor));
    }
} 
```

以下代码设置故事板。

```
TimeCursor timeCursor;
private void SetCursorAnimation()
{
    timeCursor = new TimeCursor();
    NameScope.SetNameScope(this, new NameScope());
    RegisterName("TimeCursor", timeCursor);

    storyboard.Children.Clear();

    DoubleAnimation animation = new DoubleAnimation(LeftOffset, LeftOffset + (VerticalLineCount - 1) * HorizontalGap + VerticalLineThickness, 
                new Duration(TimeSpan.FromMilliseconds(musicDuration)), FillBehavior.HoldEnd);

    Storyboard.SetTargetName(animation, "TimeCursor");
    Storyboard.SetTargetProperty(animation, new PropertyPath(TimeCursor.LocationProperty));

    storyboard.Children.Add(animation);
} 
```

然后我`storyboard.Begin(this)`从包含上述`SetCursorAnimation()`方法的对象的另一个方法调用，并且该对象派生自`Canvas`. 但是，该`Location`属性永远不会更新（永远不会调用 Location 的 set 访问器）并且不会引发异常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:12:28.607

当依赖属性被动画化（或在 XAML 中设置，或由样式设置器设置等）时，WPF 不会调用 CLR 包装器，而是直接访问底层的 DependencyObject 和 DependencyProperty 对象。请参阅定义依赖属性的[清单中的](http://msdn.microsoft.com/en-us/library/ms753358.aspx#checklist)*实现“包装器”*部分以及[自定义依赖属性的含义](http://msdn.microsoft.com/en-us/library/bb613563.aspx#implications)。

为了获得有关属性更改的通知，您必须注册一个[PropertyChangedCallback](http://msdn.microsoft.com/en-us/library/system.windows.propertychangedcallback.aspx)：

```
public class TimeCursor : FrameworkElement
{
    public static readonly DependencyProperty LocationProperty =
        DependencyProperty.Register(
            "Location", typeof(double), typeof(TimeCursor),
            new FrameworkPropertyMetadata(LocationPropertyChanged)); // register callback here

    public double Location
    {
        get { return (double)GetValue(LocationProperty); }
        set { SetValue(LocationProperty, value); }
    }

    private static void LocationPropertyChanged(
        DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var timeCursor = obj as TimeCursor;

        // handle Location property changes here
        ...
    }
} 
```

* * *

还要注意，动画依赖属性不一定需要故事板。您可以简单地在 TimeCursor 实例上调用[BeginAnimation方法：](http://msdn.microsoft.com/en-us/library/ms598906.aspx)

```
var animation = new DoubleAnimation(LeftOffset,
    LeftOffset + (VerticalLineCount - 1) * HorizontalGap + VerticalLineThickness, 
    new Duration(TimeSpan.FromMilliseconds(musicDuration)),
    FillBehavior.HoldEnd);

timeCursor.BeginAnimation(TimeCursor.LocationProperty, animation); 
```

# linux - 如何从“ip route”命令的输出中选择 IP 地址？

> ID：14173592
> 
> 赞同：0
> 
> 时间：2013-01-05T16:07:19.467
> 
> 标签：linux, sed, grep, pattern-matching

> $ ip route 得到 255.255.255.255
> 
> 广播 255.255.255.255 dev eth0 src 192.168.223.129

我想得到`192.168.223.129`所有我知道的IP地址是我必须使用`sed`命令。另外，你能描述一下使用的命令吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:38:57.497

如果我要提取文本，首先出现的是 grep/ack。

试试这个：

```
ip route get 255.255.255.255|grep -oP '(?<=src ).*' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T17:09:34.353

这是一个模式匹配问题，它`grep`是最简单且最适合执行此操作的工具。

您要匹配的是单词后面的 IP 地址`src`。您可以使用此正则表达式来匹配 IP 地址：`(\d{1,3}.){4}`并使用[肯定的向后查找](http://www.regular-expressions.info/lookaround.html)`src`来确保 IP 地址遵循以下单词`(?<=src )`：

```
$ ip route get 255.255.255.255 | grep -Po '(?<=src )(\d{1,3}.){4}'
192.168.223.129 
```

要使用积极的前瞻，`grep`您需要使用`-P`perl 正则表达式的标志，并且该`-o`标志告诉`grep`只显示该行的匹配部分，因为默认行为`grep`是显示包含匹配项的整行。

此解决方案独立于`ip route get 255.255.255.255`您正在搜索的输出和单词后面的 IP 地址`src`，而不依赖于输出的格式，例如它恰好是第一行的最后一个单词。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T16:47:22.200

### 改用 AWK

使用 AWK 更容易解决此问题。假设这不是家庭作业，请使用正确的工具来完成这项工作！例如，要将 IP 地址存储在变量中以供以后使用，您可以执行以下操作：

```
ip_address=$(
    ip route get 255.255.255.255 |
    awk '{print $NF; exit}'
) 
```

然后，您可以通过新变量访问该值。例如：

```
$ echo "$ip_address"
192.168.1.1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T16:17:34.100

如果你可以不用 out `sed`，这里有一些可行的方法：输出`ip route`

```
[aman@aman ~]$ ip route get 255.255.255.255
broadcast 255.255.255.255 dev wlan0  src 192.168.1.4 
    cache <local,brd> 
```

获取`ip`地址

```
[aman@aman ~]$ ip route get 255.255.255.255|head -1|cut -f7 -d' '
192.168.1.4 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-05T16:21:47.610

使用 sed 你可以这样做：

```
ip route get 255.255.255.255 | sed -n '/src/ s/.*src //p' 
```

`-n`抑制输出。该`/src/`位选择在哪些行上执行替换`s///`和打印`p`命令。替换命令`s/.*src //`删除所有内容，包括`src`（注意尾随空格）。

# mysql - 为什么我不能删除 MySQL 数据库？

> ID：14173593
> 
> 赞同：19
> 
> 时间：2013-01-05T16:07:23.893
> 
> 标签：mysql, database, macos, pid

# 问题

我在**Mac OS 10.8.2上运行****MySQL 5.5.23**并且无法删除特定数据库，但我可以删除其他数据库。

 **当我尝试删除特定表时，我收到此错误：

```
#1548 - Cannot load from mysql.proc. The table is probably corrupted 
```

## 尝试修复

*   我已经重启了系统
*   我试图通过 CLI 重新启动 MySQL
    *   `$ sudo /usr/local/mysql/support-files/mysql.server stop`
    *   但收到此错误`ERROR! MySQL server PID file could not be found!`
*   我已经修复了 mysql.proc 表。
    *   `REPAIR TABLE mysql.proc`
    *   `REPAIR TABLE mysql.proc USE_FRM`
*   我已经修复了所有 mysql.* 表。
    *   `REPAIR TABLE mysql.*`
*   从命令行 运行**mysqlcheck时**
    *   `mysqlcheck --repair --all-databases`
    *   `mysqlcheck --repair specific-db`
        *   我收到了这个错误：`mysqlcheck: Got error: 2002: Can't connect to local MySQL server through socket '/var/mysql/mysql.sock' (2) when trying to connect`

## 当前状态

我仍然无法删除原始特定数据库，但可以删除其他数据库。

## 更新[1] 2013-01-05 11:15 am [纽约]

**日志和反馈（根据@Thomas 在评论中）** 要查找所有日志，我运行（cli）：

```
$(ps auxww|sed -n '/sed -n/d;/mysqld /{s/.* \([^ ]*mysqld\) .*/\1/;p;}') --verbose --help|grep '^log' 
```

*我收到了这样的反馈：*

```
130105 11:35:21 [Warning] Can't create test file /usr/local/mysql-5.5.23-osx10.6-x86_64/data/wills-mbp.lower-test
130105 11:35:21 [Warning] Can't create test file /usr/local/mysql-5.5.23-osx10.6-x86_64/data/wills-mbp.lower-test
130105 11:35:21 [Note] Plugin 'FEDERATED' is disabled. /usr/local/mysql/bin/mysqld: Can't find file: './mysql/plugin.frm' (errno: 13)
130105 11:35:21 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it. 
```

我正在调查`mysql_upgrade`。

## 更新[2] 2013-01-05 4:04 pm [纽约]

我跑了这个：

```
sudo /usr/local/mysql/support-files/mysql.server stop 
```

并收到此错误：

```
ERROR! MySQL server PID file could not be found! 
```

**更新[2.1] 2013-01-05 5:37 pm [纽约]**

我运行`ps auxww | grep mysql`并找到了该`mysqld`进程并将其杀死（`sudo kill [process id]`）。然后我能够成功重新启动mysql。但是，我仍然无法删除上面提到的特定数据库。

## 解决

在尝试手动修复损坏和许多建议以及此处列出的其他答案之后，重新安装 mySQL 是解决我的问题的唯一方法。

在*Mac*（运行 10.8.2）上，我还必须手动删除一些内容以进行全新安装：

```
sudo rm /usr/local/mysql
sudo rm -rf /usr/local/mysql*
sudo rm -rf /Library/StartupItems/MySQLCOM
sudo rm -rf /Library/PreferencePanes/My*
sudo rm -rf /Library/Receipts/mysql*
sudo rm -rf /Library/Receipts/MySQL*
sudo rm /etc/my.cnf 
```

* * *

## 查阅的文章

*   [MySQL 与 CONCAT 错误 1548 重复 - 无法从 mysql.proc 加载。该表可能已损坏](https://stackoverflow.com/questions/9566085/mysql-duplicates-with-concat-error-1548-cannot-load-from-mysql-proc-the-table)
*   [SQL 错误：BIGINT UNSIGNED 值在 (...) 中超出范围，但没有意义](https://stackoverflow.com/questions/11837182/sql-error-bigint-unsigned-value-is-out-of-range-in-but-it-doesnt-make-s)
*   [如何修复损坏的表](https://stackoverflow.com/questions/6177246/how-to-repair-corrupted-table)
*   [找不到 MySQL 管理器或服务器 PID 文件](https://stackoverflow.com/questions/10035497/mysql-manager-or-server-pid-file-could-not-be-found)
*   [安全更新 2010-005 后的 PHP/MySQL 问题](https://discussions.apple.com/message/12176949?messageID=12176949#12176949?messageID=12176949)
*   [Mac OS X 软件更新后的 mysql 问题](https://serverfault.com/questions/178088/mysql-problems-after-mac-os-x-software-update)
*   [如何完全删除 MySQL Mac OS X Leopard](http://tomkeur.net/39/how-to-remove-mysql-completely-mac-os-x-leopard.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-01-27T21:49:52.853

我遇到了一个问题，即对我的数据库（名为：caloriecalculator）的查询花费了太长时间，而且它根本不会下降。我按照以下步骤操作并解决了我的问题：

1.  查看所有 MySQL 进程：mysqladmin processlist -u root -p

[![mysql进程](../Images/3e5d63b4520ca01751ba4552503fd468.png)](https://i.stack.imgur.com/HyzKJ.png)

2.  杀死与卡路里计算器相关的所有进程，因为它阻止了我要执行的下一个查询。mysqladmin -u root -p 杀死 4

3.  现在运行：drop database 卡路里计算器；

[![在此处输入图像描述](../Images/a3deef5a0e3c08f869918a6e5fb3ff16.png)](https://i.stack.imgur.com/80UI0.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T16:22:59.087

我会尝试：

*   备份/保存任何具有重要数据的数据库。
*   删除 mySQL
*   重新安装 mySQL
*   恢复任何备份的数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T16:39:14.240

我在 Linux 服务器上遇到过这种情况，原因是数据库目录损坏。

**更新**：要做的一件事是进入 MySQL 数据库目录并执行`ls -la`, 以验证 evil DB 在权限、所有权等方面与其他数据库相同。例如，这里的“原始”数据库不能被删除（它是由一个以 root 身份运行的愚蠢工具创建的）：

```
drwx------  2 mysql mysql      4096 Aug 27  2015 _db_graph
drwx------  2 mysql mysql      4096 Jul 13 11:58 _db_xatex
drwxrw-rw-  2 root  root      12288 May 18 14:27 _db_xatex_original
drwx------  2 mysql mysql     12288 Jun  9 08:23 _db_xatex_contab
drwx------  2 mysql mysql     12288 May 18 17:58 _db_xatex_copy
drwx------  2 mysql mysql      4096 Nov 24  2016 _db_xatex_test 
```

运行`chown mysql:mysql _db_xatex_original; chmod 700 _db_xatex_original`将解决问题（但检查目录**内部**以验证是否存在权限和所有权）。

* * *

最后，我采用了以下丑陋的技巧（在尝试停止、重新启动和修复任何可能被 a 定位的东西之后`REPAIR`）：

*   创建了一个数据库“替罪羊”
*   停止 MySQL 服务器
*   将 MySQL 服务器创建的目录 /var/lib/mysql/scapegoat 复制到 /tmp
*   重新启动 MySQL 服务器，删除数据库“替罪羊”，停止服务器
*   **现在我有一个干净的、空的 DB 目录的副本，MySQL 不再对此一无所知。**
*   将“evildb”目录移动到 /tmp（这样如果出了问题我可以把它放回去）
*   将“替罪羊”目录移动到 /var/lib/mysql 将其重命名为“evildb”
*   启动 MySQL 服务器
*   *不确定我此时是否进行了更多维修*
*   **并且“evildb”数据库变得可删除！**

我的解释是，当被要求删除数据库时，MySQL 服务器首先对数据库目录中的文件进行一些检查。如果这些检查失败，则丢弃也失败。这些检查必须与`REPAIR`. 也许在受影响的目录中有一些意想不到的东西。

我认为这是在 SuSE 11.2 Linux 发行版上的 MySQL 5.1 或 5.2 上。希望能帮助到你。

## 更新

回想起来，我不记得收到有关“proc”的错误。所以我不太确定问题出在*目录*中。它可能与`proc`表连接，*而*不是表损坏。您是否尝试过目视检查`proc`数据库表，以便在那里找到属于邪恶数据库的东西？

```
USE mysql;
SELECT * FROM proc; 
```

这或由此产生的任何错误都可以帮助解决问题。谁知道，您可能有一些行包含错误的`db`列。在紧要关头，您可以导出`proc`表并在清理后重新加载（通过 SQL 或通过磁盘文件）。

## 测试

我对上述更新进行了部分验证。通过*故意*将垃圾插入`proc`新创建的数据库的表中`evil`，我**部分**重现了您的症状（不可删除的数据库，MySQL 连接尝试崩溃）。错误号不是 1548；但也许它会是，如果我在那个表中插入了*正确*的垃圾......无论如何，有用的一点是通过**删除**对数据库的所有引用`evil`，后者再次变得可丢弃：

```
mysql> drop database evil;
ERROR 2013 (HY000): Lost connection to MySQL server during query
mysql> use mysql;
No connection. Trying to reconnect...
Connection id:    1
Current database: *** NONE ***

Database changed
mysql> DELETE FROM proc WHERE db = 'evil';
Query OK, 2 rows affected (0.00 sec)

mysql> drop database evil;
Query OK, 0 rows affected (0.00 sec) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-10T16:37:35.607

如果你在 windows 中使用 xampp

您还可以使用 phpmyadmin 删除数据库

[![在此处输入图像描述](../Images/30aa286a1ce94d1c5a2282e39c0bcce3.png)](https://i.stack.imgur.com/xkqDj.png)

转到主页 -> 数据库 -> 单击您的 [数据库名称] -> 拖放

**或者**

您也可以手动删除数据库

转到 xampp -> mysql -> 数据 -> [数据库名称]

立即删除您的 [数据库名称]。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-10T11:57:38.057

我遇到了同样的问题，我所做的就是从 mysql 数据目录中删除数据库目录。**

# php - 查询功能神秘中断

> ID：14173598
> 
> 赞同：2
> 
> 时间：2013-01-05T16:07:50.170
> 
> 标签：php, mysql

我有一个数据库类，它具有多个执行查询的功能。其中之一是最简单的：

```
public function query($query) {
    return $this->_link->query($query);
} 
```

$this->_link->query 在其他情况下工作，所以它应该在这里工作。从具有类实例的文件中，我这样做：

```
function createLineChart() {

    $query = "select * from tags";
    $result = $db->query($query);

    // do something with result
}

createLineChart(); 
```

但它在 $result 行上中断。查询也是有效的，我已经测试过了。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:26:45.890

```
function createLineChart() {
    var_dump($db);
    // this should probably return 'undefined'
    global $db;
    // so globalize it!
    $query = "select * from tags";
    $result = $db->query($query);
    // do something with result
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T16:27:11.557

您的问题`$db`超出了该`createLineChart()`功能的范围。您可以使用全局方法：

```
function createLineChart() {
    global $db; // <-- make the db var become available
    $query = "select * from tags";
    $result = $db->query($query);

    // do something with result
} 
```

或者将`$db`对象作为参数传递给函数：

```
function createLineChart($db) {

    $query = "select * from tags";
    $result = $db->query($query);

    // do something with result
}

createLineChart($db); 
```

[有关手册上的变量范围的](http://php.net/manual/en/language.variables.scope.php)更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T16:09:51.560

如果`$db`是类变量，那么您需要将其称为：

```
$result = $this->db->query($query); 
```

# symfony - 带有“where”语句的查询构建器不能等于“@”（对于电子邮件地址）

> ID：14173603
> 
> 赞同：0
> 
> 时间：2013-01-05T16:08:07.233
> 
> 标签：symfony, syntax-error, query-builder

我正在创建一个 symfony2 项目。我想从我的数据库中选择一个用户，其中用户的电子邮件等于一个变量。我收到以下错误：

```
[Syntax Error] Error: Expected end of string, got '@' 
```

我想执行这个函数，因为 useremail 是唯一输入的唯一值。我正在使用以下代码：

```
$query = $repo->createQueryBuilder('e')
->select('e.userId')
->where('e.userEmail = ' . $userEmail)
->getQuery();
$items = $query->getResult();
var_dump($items); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:09:18.013

你没有包装你的电子邮件字符串。尝试：

```
->where('e.userEmail = "' . $userEmail . '"') 
```

# amazon-web-services - AWS gzip：标准输出：设备上没有剩余空间

> ID：14173604
> 
> 赞同：1
> 
> 时间：2013-01-05T16:08:22.410
> 
> 标签：amazon-web-services, amazon-ec2

为什么每次我尝试压缩我的实例上的所有 Apache“www”目录 - 使用 ubuntu 运行 - 我收到这条消息“gzip：stdout：设备上没有剩余空间”我使用这个 cmd “tar -zcvf backup.tar.gs /变量/www/*"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:15:31.427

您的存储空间不足。亚马逊服务没有什么特别之处，真的。删除东西，或购买更多存储空间。`df -h`将向您显示当前安装的文件系统及其已用空间。`du`将帮助您按目录统计文件系统的使用情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:51:28.293

您写入的分区/挂载点太满。您应该删除一些内容或使用不同的分区来写入存档。

如果服务器上只需要几个字节，那么*也许*

```
tar cf - /var/www/*|gzip -9 >backup.tar.gz 
```

即使“tar czf”失败也可以工作。

如果您不是 root 并且只能以普通用户身份使用 ssh 登录，那么您可以使用 sshfs 或类似的东西

```
ssh myself@server "tar cf - /var/www/*|gzip -9" >backup.tar.gz 
```

将其即时存储到本地磁盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:19:35.070

你可能用完了磁盘空间。

如果您有 ssh 访问权限，我将首先运行：

```
df -h 
```

这为您提供了您拥有的卷以及每个卷的大小和可用空间。

```
df -h . 
```

添加**点**后，您应该得到相同的结果，但基于您当前的文件夹。

# c++ - 截断数字

> ID：14173605
> 
> 赞同：1
> 
> 时间：2013-01-05T16:08:23.207
> 
> 标签：c++

我正在浏览以下代码。它基本上截断了通过*cin*对象输入的字符的数字。问题是我不知道如何将 int 值分配给字符对象会截断除第一个之外的数字。

```
#include <iostream>
using namespace std;
int main(){
    unsigned int integer;
    unsigned char character;
    cin >> integer;
    character = integer;
    cout << character ;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T16:11:32.543

> 问题是我不知道如何将 int 值分配给字符对象会截断除第一个之外的数字。

为了便于说明，我们假设它`char`是无符号的，8 位宽，`int`32 位宽。这样的分配会做的是砍掉前 24 位，留下后 8 位。

*截断与整数的小数*位数没有任何关系。例如，`9999`会变成`15`（因为`9999 & 0xFF == 15`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:12:56.383

我不确定您所说的“除了第一个”是什么意思。但让我看看我能不能解释发生了什么。

`unsigned char`我相信，标准要求长度为 1 个字节。`int`通常更长，通常为 4 个字节。因此，当您输入一个大于 255 的数字时，它会丢失所有高于该值的值，因为它只能保存一个字节并且前导 3 个字节的数据会丢失。

# c# - 当有绑定导航器时，如何在设计时停止 winforms 中的 datagridview 自动生成列？

> ID：14173612
> 
> 赞同：3
> 
> 时间：2013-01-05T16:09:25.740
> 
> 标签：c#, winforms, datagridview, entity-framework-5

我正在尝试编写标题详细信息表单。在 VS2010 C# Winforms 中。`BindingSource`该表单使用名为的控件绑定到具有名为 Attendees 的属性的实体框架类`bindingSource1`。网格绑定到另一个`BindingSource`控件`datasource = bindingSource1`和`DataMember = Attendees`

我使用代码优先EF。实体类是

```
public class ContactEvent
{
    public int Id { get; set; }
    public string Title { get; set; }

    private readonly BindingList<ContactEventAttendee> _attendees = new BindingList<ContactEventAttendee>();
    public virtual BindingList<ContactEventAttendee> Attendees
    {
        get { return _attendees; }
    }
} 
```

我使用设计器设置列，删除所有我不想要的列。一旦我保存表单并重新打开它，我不想要的列又回来了

我看过[这里](https://stackoverflow.com/questions/9768261/datagridview-automatically-generates-columns?answertab=active#tab-top) 并尝试了这项技术 - 但它没有帮助。无论如何 - 我的问题在设计时显示。

仅当我删除所有绑定的列时才会出现此问题。由于我所有的列都是未绑定的，这就是我想要的。

ContactEventAttendee 类如下；

```
public class ContactEventAttendee : ILoggedEntity
{
    public int Id { get; set; }
    public Guid RowId { get; set; }
      [ConcurrencyCheck]
    public int RowVersionId { get; set; }
    public int SourceSiteNumber { get; set; }
    public virtual ContactEvent ContactEvent { get; set; }
    public virtual Person Person { get; set; }
} 
```

我在另一个相关课程中也遇到了同样的问题。如果我从表单中删除 bindingNavigator，问题就会消失

数据源是

![这里](../Images/1b9e5a475b95e935dcf0cb3a6e34c83f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:42:53.457

试试看。

```
public class ContactEvent
{
    public int Id { get; set; }
    public string Title { get; set; }

    public virtual ICollection<ContactEventAttendee> ContactEventAttendees {get; set;}
} 
```

**编辑**

好的，当我尝试创建一个项目并将其设置为`DataSource`您`Class`的时，我遇到了确切的问题`DataGridView`，这是另一个奇怪的错误？好吧，我们真的不知道，但这是我的解决方案。

1.  将您分开并`EntityCodeFirst`在`Class Project`每次更改时重建它。
2.  在您的主项目中，只需添加以`Reference`查看下图：![在此处输入图像描述](../Images/ddcf739cf99d9880640c4350fc2b91fc.png)
3.  现在选择你的数据`DataGridView`源`Object`![在此处输入图像描述](../Images/0dfe99c1b2ce47017727737506500f99.png)

现在，尝试删除所有列并重新构建它。

**编辑：**我的样本参考

```
public class ContactEvent
{
    public int Id { get; set; }
    public string Title { get; set; }
    public  ICollection<ContactEventAttendee> _attendees  { get; set;}
}

public class ContactEventAttendee
{
    public int Id { get; set; }
    public Guid RowId { get; set; }
    public int RowVersionId { get; set; }
    public int SourceSiteNumber { get; set; }
    public virtual ContactEvent ContactEvent { get; set; }
} 
```

# sql - 创建表类型并将值分配给存储过程中该类型的变量

> ID：14173616
> 
> 赞同：0
> 
> 时间：2013-01-05T16:09:58.733
> 
> 标签：sql, sql-server-2008

这是 Sql Server 中一个有趣的问题；我有一个存储过程，执行时返回以下错误：

> “MyTable”类型已经存在，或者您没有创建它的权限。

我认为 MyTable 类型没有正确创建，我的猜测是基于其他类型（例如 nvarchar）都是蓝色的，而当我将鼠标悬停在 @T 声明上方时（DECLARE @T AS MyTable） ，它说@T 的数据类型无效。

这是 sproc 的一个版本：

```
CREATE PROCEDURE SPXXX
AS 
BEGIN

DECLARE @calc numeric(18,2)
DECLARE @sql nvarchar(1500), @column_name nvarchar(50), @table_name nvarchar(50), @prmDef nvarchar(1500)
DECLARE @v1 nvarchar(50), @v2 nvarchar(50)
DECLARE @T AS MyTable

Set @column_name = 'EID'
Set @table_name = 'CTRY_S'
Set @sql = N'Select @calcOUT = SUM(datalength(@v1))/2 from @T';
Set @prmDef = '@v1 nvarchar(50),  @calcOUT numeric(18,2) OUTPUT';
EXECUTE sp_executesql @sql, @prmDef, @v1=@column_name, @T=@table_name, @calcOUT=@calc OUTPUT;

END
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:29:10.410

示例代码中有一堆语法错误。我假设在您缩短示例时发生了这种情况，所以我不打算谈论它们。

您的主要问题是，该`CREATE TYPE MyTable TABLE(..)`命令在数据库中创建了一个对象。此类型不是过程的本地类型，并且在过程完成后保留在数据库中。下次执行该过程时，您将收到您所看到的错误，因为该类型确实已经存在。

只需删除 create type 语句，就可以了。

至于智能感知，你永远无法真正信任它。只有执行才能告诉您您的陈述是否正确。您可以使用其他公司出售的替代品。它们往往更好，但我遇到的不是完美的。

# arrays - 将 VBA 中多维数组的整行返回到一维数组

> ID：14173622
> 
> 赞同：22
> 
> 时间：2013-01-05T16:10:35.807
> 
> 标签：arrays, excel, vba, multidimensional-array, assign

有没有办法将多维数组的整行的值返回到VBA中的一维数组？

类似的， 是一个 matlab 表达式，用于将数组`arr_1dim = arr_2dim(3,:)`的第 3 行分配给一个单一的拉伸。`arr_2dim``arr_1dim`

Excel VBA中是否有类似的更便宜的方法？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-05-27T15:15:09.927

有一种简单的方法可以获取二维数组的一列或一行。将零分配给列以获取行，或将零分配给行以获取列，因此：

```
Application.WorksheetFunction.Index(array, 0, columnyouwant) /* or */
Application.WorksheetFunction.Index(array, rowyouwant, 0) 
```

请参见此处： [如何在 Excel VBA 中对数组进行切片？](https://stackoverflow.com/questions/175170/how-do-i-slice-an-array-in-excel-vba)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-05T17:12:47.480

不，没有用于获取行或列的 VBA 函数。只能自己写，或者看这里：
[http ://www.cpearson.com/excel/vbaarrays.htm](http://www.cpearson.com/excel/vbaarrays.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-20T18:15:04.140

这就是我为轻松打印出多维数组的一维所做的工作。

基本上，我定义了一个新的一维数组，并用更大数组中的值填充它。

示例（3D 到 1D 到打印输出）：

```
Sub PrintItOut()
     ReDim big_array(10,5,n) as Variant, small_array(n) as Variant

     'use multidimensional array

     'place multi-dimensional values into the 1D array

     For i = 0 to n
            small_array(i) = big_array(0, 0, i)
     Next

     Range(Cells(1, 1), Cells(1, n + 1)) = small_array
End Sub 
```

我就是这样做的。我希望这对可能正在阅读它的人有意义。我认为这是一种非常简单的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T19:16:05.503

当涉及到矩阵、数组、向量时，Matlab 是一个非常棒的应用程序...... ;) 但是 Excel 并没有那么糟糕，它也是基于矩阵的。

所以假设你不想循环。您可以简单地`multi-D array`使用`Transpose`函数将您的输入到工作表中。

然后使用 将 a 拉到`Row`所需范围大小的数组中`Transpose`。

```
Dim vArr as Variant

'--output multi-D array into worksheet
Sheets(2).Range("E2").Resize(UBound(multiDArray) + 1, _
UBound(Application.Transpose(multiDArray))) = multiDArray

'--pull back the row you need: we double transpose here to get 1D. Coz single transpose
'-- results in 2D array..
vArr = WorksheetFunctions.Transpose( _ 
       WorksheetFunctions.Transpose(Sheets(1).Range("A2:G2").Value)) 
```

要绝对动态，您可以`resize`使用`range A2:G2`multi-D 动态行数`array row upperbound`:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-15T18:02:13.027

由于我最近自己有这个问题，所以我想分享我的代码。我编写了一个即用型函数，您可以在其中选择要提取列还是行：

```
'*** Modul 1, define function ***

Function getOneLine(array2D As Variant, lineIndex As Integer, choice As String) As Variant
' returning one column or row of a 2D array
' array2D: 2 dimensional Array
' lineIndex: the index of column or row, starting at 0
' choice: "c" for column or "r" for row

    Dim i, n As Integer
    Dim oneLine As Variant

    If choice = "c" Then

    n = UBound(array2D, 2)
    ReDim oneLine(n)

        For i = 0 To n
            oneLine(i) = array2D(lineIndex, i)
        Next

    getOneLine = oneLine

    End If

    If choice = "r" Then

    n = UBound(array2D, 1)
    ReDim oneLine(n)

        For i = 0 To n
            oneLine(i) = array2D(i, lineIndex)
        Next

    getOneLine = oneLine

    End If

End Function

'*** Modul 2, call function ***

Sub SomeProcess()
    ' Creating a 3x2 Matrix
    ' (In VBA-arrays the column is indexed before the rows
    '  starting at 0\. So 3x2 looks like 1x2)
    Dim SomeArray(1, 2) As Variant
        SomeArray(0, 0) = 1
        SomeArray(0, 1) = 2
        SomeArray(0, 2) = 3
        SomeArray(1, 0) = 4
        SomeArray(1, 1) = 5
        SomeArray(1, 2) = 6

    Dim oneLine As Variant
        oneLine = getOneLine(SomeArray, 1, "c")

    Debug.Print oneLine(2)
        ' prints 6

End Sub 
```

# android - 如何在 android 中创建和设置 List 以从 SQLite 检索数据？

> ID：14173624
> 
> 赞同：1
> 
> 时间：2013-01-05T16:10:44.413
> 
> 标签：android, sqlite, listview

我正在尝试为地址簿制作一个列表，其中包括名字、姓氏等。在这种情况下，我想从 SQLite 中检索名字中的所有值并将其放入列表中。不是 SQLite 专家，但很努力却一无所获....出现空指针异常：/ 有人可以帮忙吗？公共类 List_fname 扩展 ListActivity {

```
public String [] list = get_name(); 

public String [] get_name(){
    int i = 0;
    String [] lista;
    lista = new String [100]; 
    DBAdapter db = new DBAdapter(this);
    db.open();
    Cursor c = db.getAllContacts();
    if (c.moveToFirst()) {
        do {

            lista[i] = c.getString(0);
            i++;

        } while (c.moveToNext());
    }
    db.close();
    return lista;

}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //ArrayList<String> list = new ArrayList<String>();
    String [] listb = list;
    setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_2, listb));

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:57:03.447

要使用 SQLite DB，您可以从 SQLiteOpenHelper 扩展。这是第一步。类创建和使用 DB：

```
import android.content.ContentValues;
    import android.content.Context;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.provider.BaseColumns;

public class DBHelper extends SQLiteOpenHelper {
public static interface CONTACT extends BaseColumns {
            String TABLE_NAME = "human";
            String FIRST_NAME = "first_name";
            String LAST_NAME = "last_name";
        }
private static final String CREATE_TABLE = "CREATE TABLE IF NOT EXISTS ";
        private static final String DATABASE_NAME = "someDataBase";
        private static final int DATABASE_VERSION = 1;
private static final String CREATE_TABLE_CONTACT = CREATE_TABLE + CONTACT.TABLE_NAME + " (" + CONTACT._ID
                + " INTEGER PRIMARY KEY," + CONTACT.FIRST_NAME + " TEXT, " + CONTACT.LAST_NAME + " TEXT);";
public DBHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }
@Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREATE_TABLE_CONTACT);
        }
@Override
        public void onUpgrade(SQLiteDatabase db, int arg1, int arg2) {
            db.execSQL("DROP TABLE IF EXISTS " + CONTACT.TABLE_NAME);
            onCreate(db);
}
public Cursor getAllContacts() {
            return getReadableDatabase().query(CONTACT.TABLE_NAME, null, null, null, null, null, null);
        }
public void insertContact(String firstName, String lastName) {
            final ContentValues values = new ContentValues();
            values.put(CONTACT.FIRST_NAME, firstName);
            values.put(CONTACT.LAST_NAME, lastName);
            getWritableDatabase().insert(CONTACT.TABLE_NAME, null, values);
        }
    } 
```

ListView 的简单布局：

xmlns:tools="http://schemas.android.com/tools"

android:layout_width="match_parent"

android:layout_height="match_parent"

安卓：方向=“垂直”>

```
&lt;ListView
        android:id="@+id/testList" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" /> 
```

以及使用它的活动：

```
import java.util.Random;
    import android.app.Activity;
    import android.database.Cursor;
    import android.os.Bundle;
    import android.widget.ListView;
    import android.widget.SimpleCursorAdapter;
public class MainActivity extends Activity {
private DBHelper db;
@Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            db = new DBHelper(this);
//useless part to insert some data
            Random rand = new Random();
            for (int i = 0; i < 20; i++) {
                db.insertContact("" + i, "" + rand.nextInt(100));
            }
Cursor allContacts = db.getAllContacts();
            ListView testList = (ListView) findViewById(R.id.testList);
            testList.setAdapter(new SimpleCursorAdapter(this, android.R.layout.two_line_list_item, allContacts,
                    new String[] { DBHelper.CONTACT.FIRST_NAME, DBHelper.CONTACT.LAST_NAME }, new int[] {
                            android.R.id.text1, android.R.id.text2 }));
        }
    } 
```

# html - 如何删除列表项之间的空格

> ID：14173632
> 
> 赞同：41
> 
> 时间：2013-01-05T16:11:22.693
> 
> 标签：html, css

如何摆脱列表项之间的空白？我正在努力使图像彼此相邻。即使我将样式设置为`margins: 0;`，它们仍然是分开的。

CSS

```
ul.frames{
  margin: 20px;
  width: 410px;
  height: 320px;
  background-color: grey;
  float: left;
  list-style-type: none;
}

ul.frames  li {
  display:inline;
  margin: 0;
  display: inline;
  list-style: none;
}

ul.frames li img {
  margin: 0 0 0 0;
} 
```

HTML

```
<li>
  <img id="myImg" src="img.jpg" width="102.5px" height="80px"/>
</li>
<li>
  <img id="myImg2" src="img.jpg" width="102.5px" height="80px"/>
</li>
<li>
  <img id="myImg3" src="img.jpg" width="102.5px" height="80px"/>
</li>
<li>
  <img id="myImg4" src="img.jpg" width="102.5px" height="80px"/>
</li> 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-01-05T16:25:16.003

**2014 年 9 月 1 日更新**

在现代浏览器中，[flex-box](http://caniuse.com/#feat=flexbox)是执行此操作的首选方法。它很简单：

```
ul {
  display: flex;
} 
```

**[在此处查看 JSFiddle](http://jsfiddle.net/jmeas/eoqqvwnr/)**。

对于旧版浏览器支持，请参阅下面的其他选项，它们仍然很好，尽管稍微复杂一些。

* * *

尽管其他每个答案都提供了至少一个好的解决方案，但似乎没有一个提供*所有*可能性。这就是我将在这里尝试做的事情。

首先，要回答*为什么*会有间距的隐含问题，它之所以存在是因为您已将 LI 设置为显示为内联元素。

`inline`是我所知道的所有浏览器中文本和图像的默认显示值。只要代码中有空格，内联元素就会在它们之间呈现间距。就文本而言，这是一件好事：由于我在代码中包含的空间，我输入的这些单词是分开的。每行之间也有空格。正是内联元素的这种行为使网络上的文本完全可读。

但有时我们希望非文本元素能够`inline`利用此显示样式的*其他*属性。这通常包括希望我们的元素紧密结合在一起，这与文本完全不同。这似乎是你的问题。

事不宜迟，以下是我所知道的消除间距的所有方法：

## 保持内联

1.  （*不推荐*）对 LI 应用负边距以移动它们。

    ```
    li { margin: -4px; } 
    ```

请注意，您需要“猜测”空间的大小。不建议这样做，因为正如 Arthur 在下面的评论中出色指出的那样，用户可以更改浏览器的缩放比例，这很可能会扰乱代码的呈现。此外，此代码需要过多的猜测和计算。有更好的解决方案适用于所有条件。

2.  摆脱空白

    ```
    <li>One</li><li>Two</li> 
    ```

3.  使用注释使空白成为注释[JSFiddle](http://jsfiddle.net/TG2TB/)

    ```
    <li>One</li><!--
    --><li>Two</li> 
    ```

4.  跳过结束标记（[HTML4 有效](http://www.w3.org/TR/REC-html40/index/elements.html)/ [HTML5 有效](http://www.w3.org/TR/html5/syntax.html#optional-tags)）[JSFiddle](http://jsfiddle.net/yUFve/)

    ```
    <li>One
    <li>Two 
    ```

5.  将空格放在标签本身中（*注意：早期的 Internet Explorer 不会喜欢这样*）

    ```
    <li>One</li
    ><li>Two</li
    > 
    ```

6.  利用元素之间的间距计算为父字体大小的百分比这一事实。因此，将父级的字体大小设置为 0 会导致没有空格。请记住在 上设置非零字体大小，`li`以便文本本身具有非零字体大小。[在 JSFiddle 上查看。](http://jsfiddle.net/PLQE9/)

## 漂浮它们

1.  改为浮动它们。如果你这样做，你可能想要[clearfix 父级。](https://stackoverflow.com/questions/8554043/what-is-clearfix)

    ```
    li { float: left; display: block; } 
    ```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-08-28T05:32:18.817

令人难以置信，但这里没有人为这个问题提供适当的解决方案。

只需这样做：

```
ul.frames {
  font-size: 0;
}
ul.frames li {
  font-size: 14px; font-size:1.4rem;
  display: inline;
} 
```

请记住，我们并不总是有权修改标记。`<li>`当解决方案只是两个`font-size`属性时，尝试使用 JavaScript 从 s 中删除空格是完全没有必要的。

此外，浮动`<li>`s 引入了另一个潜在问题：您将无法居中和右对齐列表项。

如果您尝试`float:right;`在`<li>`s 上执行，那么它们的顺序将被交换，这意味着：列表中的第一项将是最后一项，第二项是最后一项之前的一项，依此类推。

在 SO 中查看其他帖子：[内联块列表项之间的空格](https://stackoverflow.com/questions/5256533/a-space-between-inline-block-list-items)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T16:21:08.290

您应该像这样删除 ul 标签中的所有空格：http: [//jsfiddle.net/dFRYL/3/](http://jsfiddle.net/dFRYL/3/)

由于`<li>`元素是内联的，因此在它们中或它们之间写入空格时，将显示空格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T16:18:04.433

您可以像这样使用负边距：

```
margin-right: -4px;
margin-bottom: -4px; 
```

看看[这里](http://jsfiddle.net/dFRYL/4/)。

它也可以上下工作，我[在此处](http://jsfiddle.net/dFRYL/5/)添加了另一个以显示。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-22T05:58:18.093

你得到空格的原因是因为你在元素之间有空格（换行符）

```
<ul>
     <li>One</li><li>
     Two</li><li>
     Three</li>
</ul> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-05T16:22:44.290

使用`display:inline;`会导致 HTML 中的空白在显示 HTML 时创建空白。

有两种解决方案：

1）更改使它们内联显示的方式，我建议在所有列表项上使用浮点数，然后使用各种清除修复。

2）删除列表项之间的所有空格，例如

```
<li><img id="myImg" src="http://stephboreldesign.com/wp-content/uploads/2012/03/lorem-ipsum-logo.jpg" width="102.5px" height="80px"/></li><li><img id="myImg2" src="http://stephboreldesign.com/wp-content/uploads/2012/03/lorem-ipsum-logo.jpg" width="102.5px" height="80px"/></li><li><img id="myImg3" src="http://stephboreldesign.com/wp-content/uploads/2012/03/lorem-ipsum-logo.jpg" width="102.5px" height="80px"/></li><li><img id="myImg4" src="http://stephboreldesign.com/wp-content/uploads/2012/03/lorem-ipsum-logo.jpg" width="102.5px" height="80px"/></li> 
```

我个人会推荐选项1（我讨厌`display: inline`）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-05T17:42:08.890

这是我的尝试。希望能帮助到你。正如肖恩·邓伍迪（Sean Dunwoody）所提到的，您的 html 中的空白可能是空间的原因，但我已经浮动 li 并使图像显示：block;。留下评论我在哪里进行了更改。希望它有所帮助：http: [//jsfiddle.net/FJ3nV/](http://jsfiddle.net/FJ3nV/)

这是我的小而主要的变化：

```
/*
* Added float left
*/
ul.frames  li {
  margin: 0;
  list-style: none; 
  float:left;
}

/* 
*  Moved inline sizing here just to clear up obtrusive html.
*  Added display block.
*/
ul.frames li img{width:102px; height:80px; display:block;} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-04T01:53:44.460

我会将您的 li 元素更改为内联块。

一个人不推荐

```
li { margin: -4px; } 
```

但对其稍作改动，即使字体大小发生变化或浏览器放大，它也能正常工作

```
li{ margin-right: -0.25em; } 
```

那应该完全解决那个空白问题。但是，如果您使用的字体设计不佳且不遵循正确的字母高度标准，则可能会导致问题。然而，这些更难找到，而且谷歌主机的大多数字体都没有这个问题。

# google-maps-api-3 - 使用 Google Map API v3 分层雷达

> ID：14173636
> 
> 赞同：1
> 
> 时间：2013-01-05T16:11:45.833
> 
> 标签：google-maps-api-3, kml, weather

Google Maps API v3的默认[天气 API](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-weather)很好，但我需要一个实际的雷达循环。我找到了一个将 KML 文件分层到现有地图上的示例：

```
 <script language=JavaScript type=text/JavaScript>

            function loadGoogleMap_FacilityPage() 
            {
                var myLatlng = new google.maps.LatLng(34.921467, -84.107919);
                var mapOptions = {
                  zoom: 8,
                  center: myLatlng,
                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                }
                var map = new google.maps.Map(document.getElementById("google_map"), mapOptions);

                var ctaLayer = new google.maps.KmlLayer('http://mysite.com/southeastradar.kml');
                ctaLayer.setMap(map);
            }
    </script> 
```

但雷达没有分层。引用的 kml 文件位于有效服务器上，并从[国家气象局检索](http://radar.weather.gov/ridge/kmzgenerator.php)

感谢您帮助 KmlLayer 工作。

# java - Intellij IDEA 12 响应慢

> ID：14173637
> 
> 赞同：11
> 
> 时间：2013-01-05T16:11:48.477
> 
> 标签：java, intellij-idea

我已经升级到 IDEA 12 并且对缓慢的响应感到沮丧。类导航需要几秒钟来填充搜索列表（以前它是即时的），任何与文件列表操作相关的对话框都会挂起几分钟。将一个类移动到另一个包只是挂断，我必须终止该进程。有没有人和我有同样经历的？

**附加信息**：

*   我在windows 7
*   我尝试了 64 和 32 版本，并且都有相同的问题
*   我的 64 位 vmoption 文件具有以下配置：

![在此处输入图像描述](../Images/dd9004e929c8646fb65ae6c6ef089f80.png)

*   我将日志目录压缩并放在[http://ge.tt/1JwgAnU/v/0](http://ge.tt/1JwgAnU/v/0)上。当我开始生成日志目录时，我先清理它，然后启动 IDEA 64 位，打开一个项目（自动），然后调用 File > import module 命令。我观察到对话框弹出之前大约有几分钟的延迟。在日志目录中，我看到一个`threadDumps-20130106-091041-IU-123.100`文件夹。但是在idea.log 文件中没有发现异常。

**更新**

当试图通过拖放将一个类移动到另一个包时，显示 IDEA 的屏幕显示挂断：[http ://www.screenr.com/zlA7](http://www.screenr.com/zlA7)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T01:03:02.173

我发现问题是由我的 Windows 7 中安装的 JDK 8 ea 引起的。IDEA 使用 exe4j 加载 JDK，它会自动拾取 JDK 8（参见[这个问题](https://stackoverflow.com/questions/14188179/how-jetbrain-intellij-idea-select-java-to-bootup)）。

在我定义`IDEA_JDK_64`环境变量并将其指向我的 JDK 6 之后，一个高性能的 IDEA 又回来了！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T03:02:21.400

我有完全相同的，但通过更改设置idea64exe.vmoptions解决了它：从... `-XX:ReservedCodeCacheSize=64m` ...到... `-XX:ReservedCodeCacheSize=256m`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T16:16:26.967

我在使用 RubyMine（使用相同的代码库）时遇到了这个问题，这是因为我的系统已经切换到 OpenJDK 而不是 Sun/Oracle JDK。

我看到有人在这个线程中遇到了类似的问题：[OpenJDK or Sun Java for IntelliJ IDEA](https://stackoverflow.com/questions/9673163/openjdk-or-sun-java-for-intellij-idea)

具体来说，当您从终端启动 IDE 时，您是否看到类似以下内容？

```
OpenJDK Runtime Environment (IcedTea6 1.11pre) (6b24~pre2-1)
OpenJDK Server VM (build 20.0-b12, mixed mode)
WARNING: You are launching IDE using OpenJDK Java runtime.

 THIS IS STRICTLY UNSUPPORTED DUE TO KNOWN PERFORMANCE AND GRAPHICS PROBLEMS!

 NOTE:    If you have both Oracle (Sun) JDK and OpenJDK installed
          please validate either IDEA_JDK, JDK_HOME, or JAVA_HOME environment          variable points to valid Oracle (Sun) JDK installation.
          See http://ow.ly/6TuKQ for more info on switching default JDK

 Press Enter to continue. 
```

也许您应该检查升级是否导致 IDE 恢复为非 Oracle JDK。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T13:38:15.427

就我而言，它是一个 Findbugs 插件，它导致了频繁的延迟。如果您从终端运行 IDEA 并查看日志输出，您可以看到这一点，例如

> 没有指定类文件；输出将没有警告

在禁用实时 Findbugs 扫描（设置 -> 检查 -> Findbugs IDEA）后，一切都再次顺利运行。

# forms - Symfony 更改表单中的天数

> ID：14173638
> 
> 赞同：1
> 
> 时间：2013-01-05T16:11:52.560
> 
> 标签：forms, symfony

我对 symfony 中的表单有疑问。我有当时的英文名称，但我希望它们是波兰语。我改变了岁月的范围，但我不能改变日子的名字

```
-> add ('DateOfBirth', 'date', array (
            'years' => range (date ('Y') - 100, date ('Y'))
        )) 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:31:15.843

您可以通过选项`format`来更改日期格式本身。通过这种方式，您可以使月份是整数，而不是全名。

格式化时，DateType 将语言环境作为默认设置：`\Locale::getDefault()`. 因此，您只需要更改默认语言环境。如果您支持多种语言，它可以在`parameters.ini`/文件中设置或通过路由或其他方式设置。`parameters.yml`

我建议在实现类中寻找更多细节： [https ://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/DateType.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/Extension/Core/Type/DateType.php)

# android - 无法运行 aapt dump badging - Google Play 商店

> ID：14173642
> 
> 赞同：7
> 
> 时间：2013-01-05T16:12:16.947
> 
> 标签：android, android-manifest, apk, google-play

我无法将我的应用程序上传到 Play 商店。

当我上传 file.apk 时，我收到此错误：

> 无法运行 aapt 转储标记：W/ResourceType(17873)：
> 
> 错误的 XML 块：标头大小 28024 或总大小 1702240364 大于数据大小 2004
> 
> 错误：AndroidManifest.xml 已损坏

该应用程序使用 jarsigner 签名，我使用 zipalign 对齐此文件。我也使用phonegap来创建apk。

这是 AndroidManifest.xml 的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" 
      package="com.naica.enciclopedia" 
      android:versionName="1.0.0" 
      android:versionCode="1">

<supports-screens 
android:largeScreens="true" 
android:normalScreens="true"
android:smallScreens="true"
android:resizeable="true"
android:anyDensity="true" 
/>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" /><uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.RECORD_VIDEO" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />

<application android:icon="@drawable/icon" android:label="@string/app_name" android:debuggable="false" android:theme="@style/MeDroidTheme">
<activity android:name=".Naica" android:label="@string/app_name">
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
<activity android:name="com.phonegap.DroidGap" android:label="@string/app_name"android:configChanges="orientation|keyboardHidden">
<intent-filter></intent-filter>
</activity>
</application><uses-sdk android:minSdkVersion="7" />
</manifest> 
```

问候！。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:41:45.267

原来，[这里](http://developer.android.com/reference/android/Manifest.permission.html)`<uses-permission android:name="android.permission.RECORD_VIDEO" />`无处可寻。查看我提供给您的链接并将其从清单中删除。我认为此功能由.`<uses-permission android:name="android.permission.CAMERA" />`

# bash - 列出bash脚本中单词匹配的路径

> ID：14173643
> 
> 赞同：0
> 
> 时间：2013-01-05T16:12:24.370
> 
> 标签：bash

我有一个包含行列表的字符串。我想搜索任何特定的字符串并列出包含该字符串的所有路径。给定的字符串包含以下内容：

```
 755677 myfile/Edited-WAV-Files
  756876 orignalfile/videofile
  758224 orignalfile/audiofile
  758224 orignalfile/photos 
  758225 others/video
  758267 others/photo 
  758268 orignalfile/videofile1
  758780 others/photo1 
```

我只想提取并列出从原始文件开始的路径。我的输出应该是这样的：

```
 756876 orignalfile/videofile
 758224 orignalfile/audiofile
 758224 orignalfile/photos 
 758268 orignalfile/videofile1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:17:25.270

这看起来很容易...

```
echo "$string" | grep originalfile/ 
```

或者

```
grep originalfile/ << eof
$string
eof 
```

或者，如果它在文件中，

```
grep originalfile/ sourcefile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:23:15.173

一个bash解决方案：

```
while read f1 f2
do
     [[ "$f2" =~ ^orignal ]] && echo $f1 $f2
done < file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:30:03.490

您确定您的字符串包含换行符/换行符吗？如果是这样，那么将适用 DigitalRoss 的解决方案。

如果它不包含换行符，那么您必须包含它们。例如，如果您的代码看起来像

```
string=$(ls -l) 
```

那么你必须在它前面加上不带换行符的字段分隔符字符串：

```
IFS=$'\t| ' string=$(ls -l) 
```

或使用空的 IFS var：

```
IFS='' string=$(ls -l) 
```

bash 手册页中的 IFS 文档：

```
IFS    The  Internal  Field  Separator  that  is  used for word splitting after
       expansion and to split lines into words with the read builtin command.  The
       default value is ``<space><tab><newline>''. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T16:24:44.993

如果您的字符串像这样跨越几行：

```
755677 myfile/Edited-WAV-Files
756876 orignalfile/videofile
758224 orignalfile/audiofile
758224 orignalfile/photos
758225 others/video
758267 others/photo
758268 orignalfile/videofile1
758780 others/photo1 
```

然后你可以使用这个代码：

```
echo "$(echo "$S" | grep -F ' orignalfile/')" 
```

如果字符串没有被换行符分隔，那么

```
echo $S | grep -oE "[0-9]+ orignalfile/[^ ]+" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T16:25:21.450

```
egrep '^[0-9]{6} orignalfile/' <<<"$string" 
```

笔记：

*   匹配字符串的`^`开头。你不想匹配碰巧`orignalfile/`在中间某处的东西

*   `[0-9]{6}`匹配每行开头的六位数字

# java - Maven 无法找到 Javac 编译器 - 无法在以下位置找到 Javac 编译器：

> ID：14173644
> 
> 赞同：5
> 
> 时间：2013-01-05T16:12:27.073
> 
> 标签：java, maven, m2e

当我尝试在我的 gwt-maven Projekt 上进行 maven-install 时，我收到此错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project MyProject: Compilation failure
[ERROR] Unable to locate the Javac Compiler in:
[ERROR] C:\Development\java jre7\..\lib\tools.jar
[ERROR] Please ensure you are using JDK 1.4 or above and
[ERROR] not a JRE (the com.sun.tools.javac.Main class is required).
[ERROR] In most cases you can change the location of your Java
[ERROR] installation by setting the JAVA_HOME environment variable.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

但`JAVA_HOME`已定。当我运行`cmd "echo %JAVA_HOME%"`时，它说`C:\Development\jdk7`这是正确的。不知道他为什么要找`C:\Development\java jre7`......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-05T16:31:39.623

看起来您的 JAVA_HOME 可能指向 JRE，而不是 JDK？

```
C:\Development\java jre7\..\lib\tools.jar 
```

你有安装JDK吗？如果是这样，请将您的 JAVA_HOME 更改为指向 JDK。如果没有，请先下载 JDK，然后设置 JAVA_HOME。

**更新**

由于您是从 Eclipse 内部运行的，因此您的答案是[SO](https://stackoverflow.com/questions/2222560/build-failed-question-maven-jre-or-jdk-problem) - 您需要告诉 Eclipse 使用 JDK 而不是 JRE。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-23T07:14:05.903

对于eclipse用户：
**方式1：**

1.  右键单击 Eclipse 项目 -> 转到属性
2.  Java 构建路径 -> 库
3.  单击 JRE System Library -> 单击右侧的编辑按钮 -> 单击已安装的 JRE
4.  编辑 JRE -> 设置 JRE Home = JAVA_HOME（在我的情况下 JAVA_HOME 是 C:\Program Files\Java\jdk1.7.0_45）

**方式二：**

1.  转到窗口 -> 首选项 -> Java -> 已安装的 JRE
2.  将现有 JRE 位置编辑为：设置 JRE Home = JAVA_HOME 或 JAVA_HOME\jre（在我的情况下，路径是 C:\Program Files\Java\jdk1.7.0_45 OR C:\Program Files\Java\jdk1.7.0_45\jre )
3.  单击完成和确定按钮

**方式3：**

1.  转到窗口 -> 首选项 -> Java -> 已安装的 JRE
2.  选择您正在使用的 JRE
3.  按编辑-> 添加外部 JAR...
4.  浏览到 Java\jdk1.7.0_45\lib 并选择 tools.jar 并按 Enter
5.  单击完成和确定按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T17:54:54.563

"C:\Development\java jre7" 必须在*某个地方*。仔细检查您的环境和脚本。它不能凭空发明出来。Maven 将尊重 JAVA_HOME，因此，某处某处正在使用该值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T10:32:34.410

如果您使用的是 eclipse，您还需要在 window > preferences > java > Installed JRE's 中添加，指向您正在使用的 JDK 版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-09T04:45:03.400

在 Eclipse 中，导入 Maven 项目或调用“更新源”等操作在运行 Eclipse 的同一 JVM 中运行。如果该 JVM 来自不属于 JDK 的 JRE，则不会有 Java 编译器（tools.jar）。

因此，要从 Eclipse 中启动 Maven，用于启动的 JRE 也需要来自 JDK。默认情况下，Eclipse 会注册它启动的 JRE，但这可以配置如下：

转到“Window / Preferences ... / Java / Installed JREs”首选项页面

单击 JRE > 编辑

将 JRE Home 设置为与 JAVA_HOME 环境变量相同的值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-07T09:14:42.510

如果出现这个错误`Jenkins`，那么你需要在Jenkins中设置JAVA_HOME的路径。

1.  去管理詹金斯
2.  全局配置工具 -> JDK
3.  设置 JAVA_HOME 的路径：

# breeze - 如何使用接受分页参数的存储过程

> ID：14173651
> 
> 赞同：0
> 
> 时间：2013-01-05T16:13:52.373
> 
> 标签：breeze

任何有关在使用轻风时如何使用存储过程的链接示例，主要是对找出如何提取分页参数和设置 inlinecount 值感兴趣，因为存储过程将返回该值并获取分页参数。

IE

```
 function GetData(int Pageindex,int PageSize, string SP_Input_Para1,string 
```

SP_Input_Para2 等等....

对于更新类似

```
 function Update(string SP_Input_Param1, string SP_Input_Param2 etc) 
```

然后是一些如何配置 Breeze 来告诉它应该在服务器上使用以下函数来获取和更新、删除、插入等。

或者更好的方法是 For Get 使用 Request 和 Response 作为自定义结构

```
i.e
    public class MyResponse
{
    public IEnumerable<Object> Results { get; set; }
    public string Message { get; set; }

}
public class MyRequest
{
    public PagingInfo pageInfo { get; set; }
    public ParameterInfo Parameters { get; set; }
}

public class PagingInfo
{
    public int PageIndex { get; set; }
    public int PageSize { get; set; }
}

public class ParameterInfo
{
    public string Parameter1 { get; set; }
    public string Parameter2 { get; set; }
    public string Parameter3 { get; set; }
}

then use

public MyResponse GetData(MyResponse request)
        {
            var resp = new MyResponse();
            var lst = new List<object>();
            // do oyur work
            resp.Results= lst;

            return lst;
        } 
```

现在您可能需要在客户端上提供一个函数来映射集合

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-02T15:50:50.150

要从微风请求中查询信息，请尝试将此作为您的 GET 方法。这假设 GetMyEntityType 在您的数据上下文中返回一个实体。

```
[HttpGet]
[EnableBreezeQuery(MaxExpansionDepth = 0)]
public QueryResult GetMyEntityType(ODataQueryOptions<MyEntityType> options)
{
... your server method
} 
```

您需要了解的有关微风请求的所有信息都在此对象中。起初我想知道如何在这个对象中包含其他参数，但没有必要 - 参数在对象内部。

要让你的跳过和采取，试试这个......

```
foreach (var queryParam in options.Request.Properties.FirstOrDefault(x => x.Key == "MS_QueryNameValuePairs").Value as System.Collections.Generic.KeyValuePair<string, string>[])
        {
            if (queryParam.Key == "$skip")
                int.TryParse(queryParam.Value, out skip);
            if (queryParam.Key == "$top")
                int.TryParse(queryParam.Value, out top);
        } 
```

Tips：如果$skip为0，可能不在请求参数中。默认为 0。Breeze 使用 $top，而不是 $take。

您可以使用调用存储过程

```
DB.ObjectContext.ExecuteStoreQuery<MyEntityType>(query).ToList() 
```

只要查询返回 MyEntityType 类型的实体集，查询就可以是任何东西。EXEC MyStoredProc param1、param2，或者您甚至可以构建动态 SQL。

要返回您自己的 inlineCount，请使用 QueryResult 返回类型：

```
 return new QueryResult()
        {
            InlineCount = myInlineCount,
            Results = DB.ObjectContext.ExecuteStoreQuery<MyEntityType>(query).ToList()
        }; 
```

提取过滤器并非易事。我找到了一个解决方案并对其进行了修改以添加递归并对其进行调整以处理 Breeze 请求。这些是您需要提取它们的辅助方法和辅助类。

```
 private void ProcessUnaryOperator(UnaryOperatorNode unaryOperator, List<ODataFilter> filterList)
    {
        if (unaryOperator != null)
        {
            if (unaryOperator.Operand != null && unaryOperator.Operand.GetType().FullName == "Microsoft.Data.OData.Query.SemanticAst.BinaryOperatorNode")
            {
                ProcessBinaryOperator(unaryOperator.Operand as BinaryOperatorNode, filterList);
            }
        }
    }

    private void ProcessBinaryOperator(BinaryOperatorNode binaryOperator, List<ODataFilter> filterList)
    {
        if (binaryOperator != null)
        {
            if (binaryOperator.Left != null && binaryOperator.Left.GetType().FullName == "Microsoft.Data.OData.Query.SemanticAst.BinaryOperatorNode")
                ProcessBinaryOperator(binaryOperator.Left as BinaryOperatorNode, filterList);

            if (binaryOperator.Right != null && binaryOperator.Right.GetType().FullName == "Microsoft.Data.OData.Query.SemanticAst.BinaryOperatorNode")
                ProcessBinaryOperator(binaryOperator.Right as BinaryOperatorNode, filterList);

            if (binaryOperator.Left != null && binaryOperator.Left.GetType().FullName == "Microsoft.Data.OData.Query.SingleValueFunctionCallNode")
            {
                var singleValueFunctionCallNode = binaryOperator.Left as SingleValueFunctionCallNode;

                var property = (singleValueFunctionCallNode.Arguments.FirstOrDefault() as SingleValuePropertyAccessNode ?? singleValueFunctionCallNode.Arguments.LastOrDefault() as SingleValuePropertyAccessNode) ;
                var constant = (singleValueFunctionCallNode.Arguments.FirstOrDefault() as ConstantNode ?? singleValueFunctionCallNode.Arguments.LastOrDefault() as ConstantNode);

                var lt = string.Empty;
                switch (singleValueFunctionCallNode.Name)
                {
                    case "startswith":
                        lt = constant.Value.ToString() + "%";
                        break;
                    case "endswith":
                        lt = "%" + constant.Value.ToString();
                        break;
                    case "substringof":
                        lt = "%" + constant.Value.ToString() + "%";
                        break;
                    case "equal":
                        lt = constant.Value.ToString();
                        break;
                }

                if (property != null && property.Property != null && constant != null && constant.Value != null)
                    filterList.Add(new ODataFilter(property.Property.Name, binaryOperator.OperatorKind.ToString(), lt, property, constant));
            }

            if (binaryOperator.Left != null && binaryOperator.Left.GetType().FullName == "Microsoft.Data.OData.Query.SingleValuePropertyAccessNode")
            {
                var property = binaryOperator.Left as SingleValuePropertyAccessNode ?? binaryOperator.Right as SingleValuePropertyAccessNode;
                var constant = binaryOperator.Left as ConstantNode ?? binaryOperator.Right as ConstantNode;
                var lt = constant.Value.ToString();

                if (property != null && property.Property != null && constant != null && constant.Value != null)
                    filterList.Add(new ODataFilter(property.Property.Name, binaryOperator.OperatorKind.ToString(), lt, property, constant));
            }
        }
    }

    public class ODataFilter
    {
        public ODataFilter(string prop, string op, string lt, SingleValuePropertyAccessNode pn, ConstantNode cn)
        {
            this.Property = prop;
            this.Operator = op;
            this.LiteralText = lt;
            this.PropertyNode = pn;
            this.ConstantNode = cn;
        }

        public string Property { get; set; }
        public string Operator { get; set; }
        public string LiteralText { get; set; }
        public SingleValuePropertyAccessNode PropertyNode { get; set; }
        public ConstantNode ConstantNode { get; set; }
    } 
```

这是提取过滤器的调用代码：

```
 List<ODataFilter> filterList = new List<ODataFilter>();

        // Not Equal (Unary Operators)
        if (options.Filter != null && options.Filter.FilterClause != null && options.Filter.FilterClause.Expression.GetType().Name == "UnaryOperatorNode")
            ProcessUnaryOperator(options.Filter.FilterClause.Expression as UnaryOperatorNode, filterList);

        // Equal (Binary Operators)
        if (options.Filter != null && options.Filter.FilterClause != null && options.Filter.FilterClause.Expression.GetType().Name == "BinaryOperatorNode")
            ProcessBinaryOperator(options.Filter.FilterClause.Expression as BinaryOperatorNode, filterList); 
```

这是 USING 的一个子集

```
using Microsoft.Data.OData.Query; 
using System.Web.Http.OData.Query; 
using Microsoft.Data.OData.Query.SemanticAst; 
```

您知道您可以执行一个返回多个结果集并使用 MARS 使用这些结果的存储过程吗？我目前运行一个存储过程，它`IQueryable`在一次 SQL 往返中返回 23 。

祝你好运！

（编辑）

如果您在存储过程中手动应用 $skip 和 $top，Breeze 将尝试再次将它们应用于结果集。在这种情况下，我只是将 skip 和 top 作为参数发送，而不是使用 $skip 和 $top。顺便说一句，这个 bug 花了 7 个小时才找到。

此链接：[https](https://www.stevefenton.co.uk/2015/07/getting-the-sql-query-from-an-entity-framework-iqueryable/) ://www.stevefenton.co.uk/2015/07/getting-the-sql-query-from-an-entity-framework-iqueryable/展示了如何将 IQueryable 对象转换为 T-SQL。使用 options.Filter.ApplyTo 将微风过滤器应用于 MyEntityType 的空白 IQueryable，然后使用上面链接中的代码将微风请求呈现到 TSQL 中。

```
// Determine the where clause 
var whereClause = options.Filter == null ? "" : ToTraceString<MyEntityType>(
    options.Filter.ApplyTo(
        (from x in DB.Context.MyEntityTypes select x),
        new ODataQuerySettings()) as IQueryable<MyEntityType>)
    .Split(new[] { "\r", "\n" }, StringSplitOptions.RemoveEmptyEntries).Where(x => x.Trim().StartsWith("WHERE")).FirstOrDefault().Trim();

/* Steve Fenton, https://www.stevefenton.co.uk/2015/07/getting-the-sql-query-from-an-entity-framework-iqueryable/
 * July 24, 2015
 * */
private static string ToTraceString<T>(IQueryable<T> query)
{
    var internalQueryField = query.GetType().GetFields(System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance).Where(f => f.Name.Equals("_internalQuery")).FirstOrDefault();
    var internalQuery = internalQueryField.GetValue(query);
    var objectQueryField = internalQuery.GetType().GetFields(System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance).Where(f => f.Name.Equals("_objectQuery")).FirstOrDefault();
    var objectQuery = objectQueryField.GetValue(internalQuery) as System.Data.Entity.Core.Objects.ObjectQuery<T>;
    return ToTraceStringWithParameters<T>(objectQuery);
}
private static string ToTraceStringWithParameters<T>(System.Data.Entity.Core.Objects.ObjectQuery<T> query)
{
    System.Text.StringBuilder sb = new StringBuilder();
    string traceString = query.ToTraceString() + Environment.NewLine;
    foreach (var parameter in query.Parameters)
        traceString = traceString.Replace("@" + parameter.Name, "'" + parameter.Value.ToString() + "'");
    return traceString;
}
/* */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:09:48.347

这是一个很好的问题，但是我们还没有任何在微风中使用存储过程的示例，尽管它是非常可行的。请将此添加到[Breeze User Voice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)并投票。我们认真对待您的反馈。

# io - 如何在不使用特殊二进制格式的情况下读取 VHDL/modelsim 中的二进制数据

> ID：14173652
> 
> 赞同：6
> 
> 时间：2013-01-05T16:14:05.070
> 
> 标签：io, vhdl, modelsim

## 一些背景：

我正在为以太网 MAC 编写 VHDL 测试台。测试台由一个包和一个组合的实体+架构文件组成。我想从我从wireshark导出的二进制文件中读取测试台将发送到MAC的以太网帧。
我正在使用 VHDL 2008 编写，并且正在使用 Mentor 图形模型技术 ModelSim ALTERA vcom 10.0d 编译器。

## 问题：

到目前为止，我发现的所有在 VHDL/modelsim 中读取二进制数据的解决方案都使用特殊的文件格式，其中 bit_vector 的 1 位由文件中的几个位表示。我希望 VHDL 将二进制文件读入 8 位 bit_vectors。
到目前为止，我最接近的是使用字符类型文件，我可以在其中直接以二进制表示形式编写 8 位 ASCII 字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:59:38.080

我找到了解决方案。如果我想直接以 8 位部分解释数据，我需要使用**字符类型的文件并使用****'POS**属性将它们转换为整数。然后我可以将这些整数转换为位向量。我是这样做的：

```
LIBRARY ieee;
  USE ieee.std_logic_1164.ALL;
  USE ieee.numeric_bit.ALL;

LIBRARY std;
  USE std.textio.all;

...

TYPE t_char_file IF FILE OF character;
TYPE t_byte_arr IS ARRAY (natural RANGE <>) OF bit_vector(7 DOWNTO 0);

SIGNAL read_arr_byte : t_byte_arr(0 to 199);

...

read_file: PROCESS (start) IS
  FILE file_in : t_char_file OPEN read_mode IS "./38478.bin";  -- open the frame file for reading
  VARIABLE char_buffer : character;
BEGIN
  IF start'EVENT AND start = '1' THEN
    FOR i IN read_arr_byte'RANGE LOOP
      read(file_in, char_buffer);
      read_arr_byte(i) <= bit_vector(to_unsigned(character'POS(char_buffer), 8));
    END LOOP;  -- i
    file_close(file_in);
  END IF;
END PROCESS read_file; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:10:15.640

我曾经这样做，但发现编写一个简短的脚本（用一种严肃的文本处理语言）将任何输入转换为一个真实的 VHDL 文件，其中的数据被描述为一个合适数据类型的常量数组，效率更高。

这比在 VHDL 恕我直言中进行文件解析要容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-03T14:48:15.980

根据@youR.Fate 先前的回答，我能够将示例进一步简化为：

```
process is
  type char_file_t is file of character;
  file char_file : char_file_t;
  variable char_v : character;
  subtype byte_t is natural range 0 to 255;
  variable byte_v : byte_t;
begin
  file_open(char_file, "test.bin");
  while not endfile(char_file) loop
    read(char_file, char_v);
    byte_v := character'pos(char_v);
    report "Char: " & " #" & integer'image(byte_v);
  end loop;
  file_close(char_file);
  wait;
end process; 
```

# android - 如何将光标的值发送到字符串数组 []

> ID：14173653
> 
> 赞同：1
> 
> 时间：2013-01-05T16:14:17.803
> 
> 标签：android, listview, cursor, android-arrayadapter

正如我在标题中所说，我想将光标的值保存到字符串数组中。我将在 ArrayAdapter 中使用这个数组并调用 setLineAdapter(ArrayAdapter).. 我有这些代码，但 LogCat 说在**arr[i] = crr.getString(i)**行有问题......有人可以帮我吗？

```
DBAdapter db;
String arr[];

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    db = new DBAdapter(this);
    db.open();

    ArrayAdapter<String> AA = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, arr);

    try {
          Cursor crr = db.getRecord(4);

          crr.moveToFirst();

          for (int i = 0; i <= cr.getCount(); i++){ 
            arr[i] = cr.getString(i);
            crr.moveToNext();
    }}
    catch (IOException e) {e.printStackTrace();}

    setListAdapter(AA);
    db.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:22:46.197

将代码更改为使用 do-while 并使用`ArrayList`而不是 Array 从 cursor 填充动态值：

```
 ArrayList<String> arrcurval=new ArrayList<String>();
if (crr.moveToFirst()) {
   do {
       arrcurval.add(crr.getString(0)); //<< pass column index here instead of i

     } while (crr.moveToNext());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:19:13.210

您必须分配数组，因此：

```
 Cursor crr = db.getRecord(4);
      int n = crr.count();
      arr = new int[n]; 
```

# c++ - 将二维数组传递给C++中的函数

> ID：14173666
> 
> 赞同：1
> 
> 时间：2013-01-05T16:16:16.730
> 
> 标签：c++, arrays, function, dimensional

我正在尝试将二维数组传递给`numOfStudents`函数，但 Visual Studio 给我一个错误消息：

> 没有重载的“numOfStudents”实例与参数列表匹配

我一直在尝试一切，但找不到解决方案。

```
#include <stdio.h>
#include <cstring>

//Prototypes
int unsigned numOfStudents(char **namesArray, int *, FILE *);
void printArrays(char **namesArray, int *marksArray, int loopCounter);
int unsigned minMark(int);
int unsigned maxMark(int);
int unsigned averageMark(int);

//Two constants used later to create array of characters
const int MAX_SIZE = 10;
const int NAME_LENGTH = 30;

int main()
{
    // Declaring array which will hold all names from file
    char namesArray[MAX_SIZE][NAME_LENGTH];
    int unsigned studentNumber = 0;
    int loopCounter = 0;
    int marksArray[MAX_SIZE]; //Array will hold the marks of students, it needs to be same size as the previous array

    FILE *file; //creating pointer to a file
    file = fopen("names.txt", "r"); //telling the pointer where the file is and how to access it

    loopCounter = numOfStudents(namesArray, marksArray, file);
    //System pause - will hold console window open
    getchar();
    return 0;
}

int unsigned numOfStudents(int *marksArray, char **namesArray, FILE *file)
{
    char tempArrayName[50]; //Temporary array to hold names
    char tempArrayLastName[50]; //Temporary array to hold last names
    int i = 0; //Counter
    bool stop = false;

    if(file == NULL)
    {
        printf("\nFile has been not opened correctly\n");
    }
    else
    {
        while (stop == false)
        {
            //Reading the file in order to get 3 separate lines which are assumed as a single record of one student
            fscanf(file, "%s\n%s\n%d", tempArrayName, tempArrayLastName, &marksArray[i]);
            //Following lines are compying strings from temp arrays into main array and adding a space for better readability
            strcpy(namesArray[i], tempArrayName);
            strcat(namesArray[i], " ");
            strcat(namesArray[i], tempArrayLastName);
            //Chcecking if the sentinel value was read in order to stop the loop
            stop = strcmp(tempArrayName, "****");
            i++; //adding the counter
            //Checking if file is too big, before program will crash with an internal error
            if (i == MAX_SIZE)
            {
                printf("ERROR!!! FILE TOO BIG TO READ!");
                stop == true;
            }
        }
    }

    return i;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T16:17:34.663

您使用此参数列表声明 numOfStudents：

```
int unsigned numOfStudents(char **namesArray, int *, FILE *); 
```

但是你用不同的参数列表定义它：

```
int unsigned numOfStudents(int *marksArray, char **namesArray, FILE *file) 
```

请注意，您的声明将`char**`用作第一个参数，但您的定义将其用作第二个参数（而 则相反`int*`）。参数的顺序非常重要并且必须完全匹配，因此您需要更改定义以匹配声明：

```
int unsigned numOfStudents(char **namesArray, int *marksArray, FILE *file)
{
....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T09:31:45.943

您已将函数的签名定义`numOfStudents`为：

```
int unsigned numOfStudents(char **namesArray, int *, FILE *); 
```

并且您将函数声明为：

```
int unsigned numOfStudents(int *marksArray, char **namesArray, FILE *file)
{

      ---*** Your Code Here ***---

} 
```

这就是函数签名和函数声明的“调用参数顺序”应该与传递参数相同的问题。所以它应该是这样的：

```
int unsigned numOfStudents(char **namesArray, int *marksArray, FILE *file)
{

      ---*** Your Code Here ***---

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T18:02:07.943

```
int unsigned numOfStudents(char **namesArray, int *, FILE *);  // declaration

int unsigned numOfStudents(int *marksArray, char **namesArray, FILE *file) // definition 
```

检查每个参数的顺序。定义的第二个参数实际上是声明的第一个参数。如果您纠正订单，您应该会很好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T16:17:50.633

[二维数组传递起来](https://stackoverflow.com/a/13812555/1520364)可能很痛苦，为什么不使用`std::string`并传递它们的数组（或引用`std::vector`）呢？

# google-apps-script - 解析从 html 获取的数据

> ID：14173667
> 
> 赞同：0
> 
> 时间：2013-01-05T16:16:23.820
> 
> 标签：google-apps-script, google-sheets

我正在尝试从美联储获取一些数据并粘贴到我的电子表格中。

所以这是我的代码

```
function myFunction() {
var response = UrlFetchApp.fetch("http://research.stlouisfed.org/fred2/data/TWEXMANL.txt");
a=response.getContentText();
var ss = SpreadsheetApp.getActiveSpreadsheet(); 
var InputSheet = ss.getSheetByName("Sheet5"); 
InputSheet.getRange("E5:E5").setValue(a); 
} 
```

此代码将所有输出粘贴到 E5 中。我只想将“日期”和“值”之后的数据粘贴到 2 列中。

有人可以帮我吗？我相信这对你们来说很简单。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T20:00:19.573

使用一点字符串操作，这变得非常容易：

```
function myFunction() {
  var response = UrlFetchApp.fetch("http://research.stlouisfed.org/fred2/data/TWEXMANL.txt");
  a=response.getContentText();
  var ss = SpreadsheetApp.getActiveSpreadsheet(); 
  var InputSheet = ss.getSheetByName("Sheet1"); 

  //Slice off the text above the columns
  var allData = a.slice(a.indexOf("DATE         VALUE"));

  //Trim spaces between date and value to just 1 space for splitting
  allData = allData.replace(/ +/g, " ");

  //Split the text so each line is a row
  var splitData = allData.split("\n");

  //For some reason, there is an extra line, so remove it
  splitData.pop();

  //Split each row so data is one column and value is another
  for(var i = 0; i < splitData.length; i += 1) {
    splitData[i] = splitData[i].split(" ");
  }

  //Save to spreadsheet. +4 because you start at E5\. Note the change to F on the right.
  InputSheet.getRange("E5:F" + (splitData.length + 4)).setValues(splitData);
} 
```

我首先删除小介绍文字。然后，我将字符串拆分为包含数据行的数组。我也将每一行（一个字符串）分成一个数组。这给了我一个可以`setValues()`在底部使用的数组。因为这不仅仅是一个单元格，我必须指定确切的宽度和高度，否则它会失败。

如果您想在其中的任何时候查看数据，我建议`Logger.log(splitData);`

# file - 如何保护文件不被直接下载？

> ID：14173675
> 
> 赞同：3
> 
> 时间：2013-01-05T16:17:04.453
> 
> 标签：file, download

我想保护我的服务器中的一些文件不被下载，但我的网站需要访问它们。我想保护一些需要站点访问的字幕文件，但我不希望任何人下载它们。该网站是托管的。

例如，一些站点使用一些与用户、视频和 IP 连接的奇怪字符串。可以在我的情况下使用类似的东西。

```
http://www11.some-site.com:182/d/qygiatnqvsulzrqmk7n6nbhddbcscvyguy4auc3fn4nvf23jp64tjcpa/File-needed.mp4?start=0 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-29T20:53:10.977

如果您使用的是**Apache**，您必须**在 .htaccess 文件中使用重写规则**。如果您使用的是其他 HTTP 服务器品牌，您应该使用与我将在此处展示的几乎相同的逻辑，因此在这种情况下请查看您的 HTTP 服务器手册。

**解释：**

当您键入 www.me.com/index.php 时，PHP 系统会将`echo`您使用的命令生成的内容放入代码中。

当您键入 www.me.com/myfiles/iou345yo13i2u4ybo34ybu3/passwords.txt 时，您的服务器会将文件内容放到客户端浏览器中，这将要求您将其作为文件下载或显示为页面，具体取决于文件扩展名。

现在，如果您在 .htaccess 文件中执行以下操作：

```
 RewriteEngine On
 RewriteRule ^myfiles/([^/]*)^.pdf$ /index.php?file=$1& [L]
 # avoit direct access to your server directories file listing
 Options All -Indexes 
```

您将键入 www.me.com/myfiles/file123.pdf 但服务器将使用文件名作为“file”参数的内容执行 index.php，并且在代码中，您将能够检查会话查看用户是否有权下载此文件。

如果用户有权限，然后你使用 readfile() 函数将文件发送给用户，他将无法识别它来自哪里（我的意思是真实路径）。

在此处查看如何执行此操作：

[PHP - 向用户发送文件](https://stackoverflow.com/questions/2882472/php-send-file-to-user)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-05T16:21:27.200

在您的内容中更改为 644 权限。

# css - 使用相对定位和边距是一种不好的做法？

> ID：14173678
> 
> 赞同：0
> 
> 时间：2013-01-05T16:17:17.607
> 
> 标签：css

我用我有限的 css 知识做了一些东西。这里是。

[http://cssdesk.com/jEh8f](http://cssdesk.com/jEh8f)

最终产品应该与此类似。 [http://www.solomid.net/guides.php?g=15768-paintballreturns-fya-umashi-jax-build-guide](http://www.solomid.net/guides.php?g=15768-paintballreturns-fya-umashi-jax-build-guide) （精通部分）

我用相对和边距做了定位。这是一个坏习惯吗？可以做得更好吗？

每个盒子都有以下css，所以我相信可以做得更好/更简化。

```
 #box-1 {
    float: left;
    position: relative;
    width: 56px;
    height: 56px;
    background-image:url('http://www.solomid.net/guide/masteries/511.png');top center no-repeat;
    margin-top: 15px;
    margin-left: 5%;
    } 
```

附言。顺便说一句，对于这样的造型体验，您可以建议网络上的任何教程/指南吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:21:23.097

我实际上将其称为首选做法。我倾向于不惜一切代价避免绝对定位，除非这些根本没有其他选择。我只是不关心它提出的跨浏览器问题。保证金非常有用。

CSS教程方面，我喜欢参考谷歌的推荐样式指南：http: [//google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml](http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml)

# asp.net - 如何开始 Metro 网站开发

> ID：14173687
> 
> 赞同：1
> 
> 时间：2013-01-05T16:18:08.153
> 
> 标签：asp.net, .net, html, web, microsoft-metro

是否有任何关于如何创建符合其 Metro UI 原则的网站的微软框架+教程？

我可以找到各种基于 CSS/LESS 的框架/工具包，但没有得到微软的支持。我认为微软将受益于提供一个工具包，以便越来越多的网站“看起来像他们的 Windows 8”。

我在 MVC4 (+html5+css3) 上有一个 web 应用程序。我应该把赌注押在一些开源工具包上（它似乎缺乏像样的文档/示例代码）还是微软会以我们的方式抛出一些花哨的东西？

我还检查了 NuGet 的东西，但似乎什么都没有（还）。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:20:00.463

我同意，Microsoft 资源不容易找到或组织得很好。这是我收藏的最好的官方资源：

*   [http://msdn.microsoft.com/en-us/library/windows/apps/br229565](http://msdn.microsoft.com/en-us/library/windows/apps/br229565)

它是一种“目录”，用于提供更深入的信息，例如：

*   [http://msdn.microsoft.com/en-us/library/windows/apps/jj150600](http://msdn.microsoft.com/en-us/library/windows/apps/jj150600)

# linux-kernel - dd 命令 file_operations 涉及？

> ID：14173689
> 
> 赞同：1
> 
> 时间：2013-01-05T16:18:32.660
> 
> 标签：linux-kernel, filesystems, storage, dd

当我们执行 dd 命令时，会调用哪个写入函数。据我了解， dd 命令不是特定于文件系统的，因此不涉及文件系统的 file_operations。如果我在这里错了，请更正。

我想知道执行dd操作涉及哪些file_operations？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:03:37.150

write 系统调用确实最终会通过 VFS 层调用文件系统特定的写入。请参阅[vfs_write](http://lxr.linux.no/#linux+v3.7.1/fs/read_write.c#L427)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:28:01.847

这取决于你写什么。

它要么是一个常规文件，并且使用了特定于文件系统的调用，要么它是一个设备，你最终会使用到目标磁盘（或其他）底层驱动程序。

[http://www.makelinux.net/books/ulk3/understandlk-CHP-14-SECT-5#understandlk-CHP-14-SECT-5](http://www.makelinux.net/books/ulk3/understandlk-CHP-14-SECT-5#understandlk-CHP-14-SECT-5)

# c++ - 如何在 C++ 中为我自己的类编写 gtest unittest

> ID：14173694
> 
> 赞同：0
> 
> 时间：2013-01-05T16:19:13.707
> 
> 标签：c++, unit-testing, googletest

我在 C++ 中定义了我自己的类 DoubleMatrix。如何使用不同的错误消息为它编写 gtest 单元测试，例如尺寸不匹配或不匹配的数量？

我需要像这段代码一样实现

```
for (int i = 0; i < x.size(); ++i) {
  EXPECT_EQ(x[i], y[i]) << "Vectors x and y differ at index " << i;
} 
```

但它应该这样调用：

```
DoubleMatrix a, b;
EXPECT_EQ(a, b) 
```

或者

```
DoubleMatrix a, b;
double epsilon = 0.0001;
EXPECT_NEAR(a, b, epsilon) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:55:59.257

您可以定义自定义谓词来做同样的事情。

您可以查看[https://github.com/google/googletest/blob/master/googletest/docs/advanced.md](https://github.com/google/googletest/blob/master/googletest/docs/advanced.md)了解详情。（检查链接**中更好的错误消息**部分的谓词断言）

例如，你可以有一个函数：

```
bool foo(DoubleMatrix a, DoubleMatrix b) {
// do the comparison and return true or false } 
```

通过 EXPECT_PRED2(foo, a, b); 使用它

# usb - Microsoft Xinput USB 设备（Xbox 控制器）的规格？

> ID：14173695
> 
> 赞同：1
> 
> 时间：2013-01-05T16:19:16.220
> 
> 标签：usb, specifications, hid, xbox, xinput

有人找到 Xbox 控制器使用的 USB 协议规范吗？我能找到的只是微软实现的 API 文档（Xinput）。我正在尝试为 OS X 编写驱动程序，因此 Xinput 控制器将显示为普通的 HID 设备。没有规格，我很茫然...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-22T16:48:54.833

这里有一个用于 XBox 的 linux 驱动程序[https://github.com/Grumbel/xboxdrv](https://github.com/Grumbel/xboxdrv)，它应该让您在 Mac 上运行它还有很长的路要走。我认为如果不签署 NDA 并支付 Microsoft 资金，该规范是不合法的。

# java - java 检查 Skypename 是否存在

> ID：14173698
> 
> 赞同：0
> 
> 时间：2013-01-05T16:19:27.653
> 
> 标签：java, skype

我有一个 Java Web 应用程序，并且有一个用户注册表单。我想检查skypename是否真实。是否有 Skype API，它有助于了解 skypename 是否存在？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:21:24.410

不，没有这样的 API 可用。验证 Skype 名称的唯一方法是尝试将给定名称添加为联系人。（您显然不想在注册表中这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:27:20.860

我认为您正在寻找的是 Skype Java API。[Skype4Java](http://skype.sourceforge.jp/index.php?Skype%20API%20For%20Java%20%28English%29)就是其中之一。但是，我不确定它是否仍在积极维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:00:21.747

API 我还没有找到。但是有一个很好的线程：[Skype 用户名验证](https://stackoverflow.com/questions/8951625/skype-username-validation)它似乎在某些情况下会有所帮助。

# ruby - Chef：上传食谱并将其重新应用到节点

> ID：14173701
> 
> 赞同：2
> 
> 时间：2013-01-05T16:19:47.527
> 
> 标签：ruby, chef-infra

这是一个 n00b 问题，但 Chef 文档无济于事。

假设我更改了食谱的代码。我将它上传到我的厨师服务器。如何使用这本说明书将更改应用到我的节点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T09:37:21.153

正如 Draco 评论的那样，您在节点上运行 Chef。他们将自动从服务器下载食谱中更改的文件。

```
sudo chef-client 
```

如果您将 Chef 作为服务运行（通过 Opscode 的[chef-client](http://community.opscode.com/cookbooks/chef-client) cookbook 服务配方或其他方式设置），它将在某个时候自动运行。由于您使用的是 Chef Server，因此您还可以使用`knife ssh`它一次在多个节点上执行搜索和运行命令。

```
knife ssh "*:*" "sudo chef-client" -x youruser 
```

将“ *:* ”替换为任何[Chef 搜索查询](http://docs.opscode.com/chef/essentials_search.html)。

此外，这也是[环境](http://docs.opscode.com/chef/essentials_environments.html)有用的地方，因为您可以将特定版本的说明书固定到环境中的节点，因此在您修改允许使用的版本之前，它们不会获得说明书中所做的更改。例如，如果您有 1.0.0 版本的食谱，并将“生产”固定到该版本（“= 1.0.0”），然后在上传之前增加版本（1.0.1），那么生产节点将无法获得新版本，直到环境中的版本更新为较新的版本。

# java - Java程序的JPen替代品

> ID：14173707
> 
> 赞同：1
> 
> 时间：2013-01-05T16:20:05.550
> 
> 标签：java, input, tablet, wacom

我想使用一些输入（如 Wacom 图形平板的笔）开发一个小型 Java 程序，但只找到了非常活跃的 JPen 项目，但是如果没有 JNI 或 JNA（没有任何额外需要的 dll 文件），还有更多可能的替代方案，一个纯 Java 实现?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:12:44.673

你可以看看[JTablet](http://jtablet.cellosoft.com/)。从另一个[SO](https://stackoverflow.com/questions/9373160/how-to-work-with-graphic-tablet-in-java)线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T08:21:26.380

似乎 JPen 搬到了 GitHub，这可能是目前最好的解决方案。

其他替代解决方案不再开发和维护。

[https://github.com/nicarran/jpen](https://github.com/nicarran/jpen)

# android - 在 Android 上播放 rtsp 流

> ID：14173708
> 
> 赞同：0
> 
> 时间：2013-01-05T16:20:14.490
> 
> 标签：android, video-streaming, audio-streaming, rtsp

我需要为两个视频音频播放 android rtsp 流。但无论我做什么，他们都不会开始。视频的 rstp 流采用 .mp4 格式，音频采用 .mp3 格式。该流在 VLC 中播放时工作正常，它显示的分辨率为 320X240。但在这里它只是给出了我在底部发布的错误。另外请告诉如何流式传输 mp3，因为 android-sdk 的 API Demos 中没有教程。该视频适用于 Vitamio 库。但我不知道如何自定义它。

```
mMediaPlayer = new MediaPlayer();
        mMediaPlayer.setDataSource(path);
        mMediaPlayer.setDisplay(holder);
        mMediaPlayer.prepare();
        mMediaPlayer.setOnBufferingUpdateListener(this);
        mMediaPlayer.setOnCompletionListener(this);
        mMediaPlayer.setOnPreparedListener(this);
        mMediaPlayer.setOnVideoSizeChangedListener(this);
        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

//onPrepared(...) Function
public void onPrepared(MediaPlayer mediaplayer) {
    Log.d(TAG, "onPrepared called");
    mIsVideoReadyToBePlayed = true;
    if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
        startVideoPlayback();
    }
} 

//startVideoPlayback() Function 
    private void startVideoPlayback() {
    Log.v(TAG, "startVideoPlayback");
    holder.setFixedSize(mVideoWidth, mVideoHeight);
    mMediaPlayer.start();
} 
```

错误：01-05 21:10:59.640：错误/MediaPlayerDemo（15989）：无效的视频宽度（0）或高度（0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:47:20.317

将 onVideoSizeChanged(...) 函数更改为：-

```
public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
        Log.d("onVideoSizeChanged: (%dx%d)", width, height);
        mVideoWidth = mp.getVideoWidth();
        mVideoHeight = mp.getVideoHeight();
        mVideoAspectRatio = mp.getVideoAspectRatio();
        if (mVideoWidth != 0 && mVideoHeight != 0)
            setVideoLayout(mVideoLayout, mAspectRatio);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:35:49.293

```
public void onVideoSizeChanged(MediaPlayer mp, int width, int height)
{
    if(width == 0 || height == 0) {
        return;
    }

    this.width = width;
    this.height = height;
    aspectRatio = width/height;

    startVideoPlayback();
} 
```

我建议你这样做。

在 onPrepared 方法内部替换`startVideoPlayback()`为`mediaPlayer.start()`

# sql-server-2008 - SQL Server 中的临时表和表值参数

> ID：14173715
> 
> 赞同：1
> 
> 时间：2013-01-05T16:21:18.150
> 
> 标签：sql-server-2008

我有一个接收表格作为参数的过程。我需要填写它，然后将其返回到另一个执行第一个过程的过程。但是，问题是当 y 编译时我收到此错误消息：

> *Mens 352，Nivel 15，Estado 1，Procedimiento Person_InsertCloud，Línea 1
> 必须使用 READONLY 选项声明表值参数“@TableServerIds”。*

不能修改表格作为参数吗？我还有什么其他选择？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:23:45.467

不，TVP 的内容不能修改。如果您想要此功能，请放宽[限制，即当 SP 相互调用时，表参数必须是只读的。](http://connect.microsoft.com/SQLServer/feedback/details/299296/relax-restriction-that-table-parameters-must-be-readonly-when-sps-call-each-other)

另一个选项是本地`#temp`表。`#temp`存储过程对在父作用域中创建的表具有读写权限。但这确实意味着子过程的调用者需要了解此要求并`#temp`在调用之前创建预期的表。

下面的一个例子

```
CREATE PROC P1
AS
    CREATE TABLE #Foo
      (
         X VARCHAR(50)
      );

    EXEC P2;

    SELECT *
    FROM   #Foo;

GO

CREATE PROC P2
AS
    IF OBJECT_ID('tempdb..#Foo') IS NULL
      BEGIN
          RAISERROR ('This procedure expects table #Foo to already exist',16,1);

          RETURN;
      END

    INSERT INTO #Foo
    VALUES      ('Inserted by P2')

GO

EXEC P1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T16:23:56.150

> 不能修改作为参数的表吗？

不，这是对 TVP 的限制之一。

该限制已[记录在案](http://msdn.microsoft.com/en-us/library/bb510489.aspx)：

> 表值参数必须作为输入 READONLY 参数传递给 Transact-SQL 例程。您不能对例程主体中的表值参数执行 DML 操作，例如 UPDATE、DELETE 或 INSERT。

您可以使用从第二个存储过程*返回*一个表，而不是填充一个表`SELECT`。

# c++ - 具有随机访问的快速、排序数据结构？

> ID：14173717
> 
> 赞同：0
> 
> 时间：2013-01-05T16:21:23.133
> 
> 标签：c++, data-structures

我想在允许这样做的结构中添加几个对象：

1.  插入对象，在添加时立即对整个结构进行排序，所以我有一个 int 的降序；

2.  能够更改排序对象的 int （我的意思是：说对象编号 2，现在的 int 为 5，因此它重新排序结构）；

3.  快速的结构，因为它将每秒完全迭代 60 次；

4.  能够按位置直接访问对象；

5.  只需要从上到下迭代：从高INT到低INT

6.  不需要删除，但以后可能会变得有用。

关于如何使用该结构的一些指示会很好​​，因为我对 C++ 标准库了解不多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T19:10:11.760

您列出的所有操作（按索引查找除外）都可以由标准二叉搜索树支持，以整数值作为键。这使您能够按排序顺序迭代元素并在任何插入过程中保持对象的排序。正如@njr 提到的，您还可以通过从二叉搜索树中删除对象、更改它们的优先级，然后将它们重新插入二叉搜索树来更新优先级。

要支持按索引进行随机访问，您应该考虑查看**[order statistic trees](http://en.wikipedia.org/wiki/Order_statistic_tree)**，这是二叉搜索树的一种变体，除了所有其他操作外，它还支持通过索引快速 (O(log n)) 查找元素。也就是说，您可以非常有效地查询排序序列中的第 15 个元素或第 17 个等。顺序统计树不是 C++ 标准库的一部分，但**[这个较旧的问题](https://stackoverflow.com/questions/11230734/c-stl-order-statistic-tree)**包含可以将您链接到实现的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T16:41:58.933

使用集合或地图

对于需求 1 - 提供自定义排序功能

对于 2 - 删除该项目并再次添加它（或提供执行此操作的包装器）

3 没有意义（列表有多大，处理器/内存有多快）

4 - 你确定你需要那个吗？当位置突然改变时尝试按位置访问它似乎有点奇怪（添加或删除了某些项目）

5 - 与 1 相同

# xmpp - 如何扩展旁遮普语 bosh 连接管理器？

> ID：14173727
> 
> 赞同：1
> 
> 时间：2013-01-05T16:21:52.233
> 
> 标签：xmpp, load-balancing, openfire, punjab

如何扩展旁遮普连接管理器？server1 和 server2 在负载均衡器后面。不是我第一次连接到 server1。它在第二次请求时创建了会话，可以说我与 server2 建立了连接。server2 将无法识别我之前的会话，它将断开请求。我的 openfire 和 Punjab 服务器位于负载均衡器后面的每个 EC2 盒子中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:06:26.283

当您的平衡器软件支持此功能时，您可以将信息添加到 HTTP 标头并将其用于负载平衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:40:20.040

正如 Alex 所说，您可以使用 http 标头来确保在建立会话后继续转到同一个节点。前段时间我还写了一篇关于这个问题的博客文章。[http://thetofu.livejournal.com/71339.html](http://thetofu.livejournal.com/71339.html)

# c - C 中的 realloc — 确切的行为和用途

> ID：14173729
> 
> 赞同：1
> 
> 时间：2013-01-05T16:22:07.243
> 
> 标签：c, dynamic-memory-allocation, conceptual

阅读一些文献，我能够理解它`realloc`接受一个 void 指针和一个大小变量，并重新分配 void 指针指向的块的内存。

*   如果在一个字符大小的`realloc`整数指针 ( ) 上调用会发生什么？`int *`反之亦然。

*   这有什么可能的应用？（一个例子肯定会有所帮助。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T16:33:05.650

该`realloc()`功能是多合一的内存管理系统。

*   如果使用空指针和非零大小调用，它会分配内存。
*   如果使用有效指针和零大小调用，它会释放内存。
*   如果使用有效指针和非零大小调用，它会更改分配内存的大小。

如果你调用`realloc()`一个无效的指针——一个不是从 获得的`malloc()`，`calloc()`或者`realloc()`——那么你会得到未定义的行为。

您可以将`realloc()`整数指针传递给分配的`sizeof(char)`字节空间（1 个字节），但您将面临调用未定义行为的危险。问题不在于`realloc()`；它与被赋予不可用整数指针的代码有关。由于只分配了 1 个字节但`sizeof(int)`大于 1（基本上在所有系统上；可能会有例外，但对于提出这个问题的人来说除外），没有安全的方法来使用该指针，除非将它传递给`free()`or `realloc()`。

鉴于：

```
int *pointer = malloc(sizeof(char)); 
```

您不能这样做`*pointer = 0;`，因为没有（正式）分配足够的空间供它写入。您不能这样做`int x = *pointer;`，因为没有（正式）分配足够的空间供它读取。“正式”这个词是因为在实践中，内存分配器分配一个最小大小的块，通常是 8 或 16 个字节，所以实际上在一个字节之后还有空间。但是，您正在超出标准保证的范围，并且可以设想内存分配器将恰好给您一个字节。所以，不要冒险。指向分配内存的单个字节的整数指针是不可用的，除非作为内存分配函数的参数。

的第一个参数`realloc()`是 a `void *`。由于您将在范围 ( `#include <stdlib.h>`) 中拥有一个原型，因此编译器会将 转换`int *`为 a `void *`（如果对这种转换有任何事情要做的话），并且只要分配了指向的空间，一切都会好起来的；`realloc()`将更改分配大小，可能返回相同的指针或可能返回不同的指针，或者如果新大小为零字节，它将释放空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T16:29:28.210

`NULL`传递给 的非指针有一个非常重要的要求`realloc`：它们本身必须来自对 或 的调用，`malloc`否则行为是未定义的。`calloc``realloc`

如果您分配一块足够存储 an 的内存`int`，然后`realloc`为 a `char`，您将始终返回相同的指针，因为`sizeof(char)`小于或等于`sizeof(int)`：

```
int* intPtr = malloc(sizeof(int));
int* otherPtr = realloc(intPtr, sizeof(char));
// intPtr == otherPtr 
```

如果你反过来尝试，你几乎肯定也会得到相同的指针，因为内存分配器很少，如果有的话，将内存分配到小于`sizeof(int)`. 然而，结果是依赖于实现的，所以理论上你可能会得到一个不同的地址。

就上述任何练习的实用性而言，它没有用处：`realloc`旨在帮助您管理可变大小的数组，简化增加此类数组大小的代码，并可能减少分配和复制。我看不出`realloc`使用标量的理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:24:42.040

的第一个参数的类型`realloc`是`void *`，正如你自己所说。因此，您传递的函数参数将*转换*为 void 指针，这是一种隐式且安全的转换。

本质上，这就像您使用带有`long int`参数的参数调用函数一样。`int`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T16:25:20.937

Realloc 以字节为单位获取大小。如果你这样做

```
int* a= malloc(sizeof(int)); 
```

进而

```
a=realloc(a,1); 
```

当然 a 现在对于 int 类型来说还不够大，并且在其中写入 int 会给您带来奇怪的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T17:04:08.653

正如 dasblinkenlight 所述，realloc 对于标量没有意义。在您的示例中：

```
int * a = malloc(sizeof(int));
int * b = realloc(a,sizeof(char)); 
```

将导致**a == b**，仅仅是因为**sizeof(char) < sizeof(int)**并且没有理由将数据移动到新位置。
不同之处在于，在 realloc 之后，您将 int 写入未分配的空间，因为您使用 realloc 减少了分配的空间。在这里，这仅具有理论意义。由于[对齐](http://en.wikipedia.org/wiki/Data_structure_alignment "结盟")，操作系统不太可能重用已释放的内存。但你不应该依赖它。这是未定义的行为。
如果您将 long int 的空间调整为 int，它可能会变得相关。这取决于您的架构。
写入未分配的空间就像放置一个定时炸弹，不知道它什么时候会爆炸。您应该只读取/写入分配的空间。

# jquery - 平滑选取框不起作用

> ID：14173731
> 
> 赞同：0
> 
> 时间：2013-01-05T16:22:17.617
> 
> 标签：jquery, html, marquee

我使用了 Tats 在 JSFiddle 上发布的一些代码。它适用于 JSFiddle： http: [//jsfiddle.net/FWWEn/397/](http://jsfiddle.net/FWWEn/397/) 但不适用于我的 html 页面。我在这些脚本标签之间插入了函数：

```
script type='text/javascript' src='http://code.jquery.com/jquery.min.js' 
```

并将其插入到我的 .asp 文件末尾的`/html`标记之前。我插入的`h1`标签不起作用。为什么不？

```
<body>
<h1 align="center" bgcolor="#FFFFCC" width="800" class="style33" > Hours next week are 8:30am - 6:30pm. </h1>
</body>

<script type='text/javascript' src='http://code.jquery.com/jquery.min.js'>
function($) {
    $.fn.textWidth = function(){
         var calc = '<span style="display:none">' + $(this).text() + '</span>';
         $('body').append(calc);
         var width = $('body').find('span:last').width();
         $('body').find('span:last').remove();
        return width;
    };
    $.fn.marquee = function(args) {
        var that = $(this);
        var textWidth = that.textWidth(),
            offset = that.width(),
            width = offset,
            css = {
                'text-indent' : that.css('text-indent'),
                'overflow' : that.css('overflow'),
                'white-space' : that.css('white-space')
            },
            marqueeCss = {
                'text-indent' : width,
                'overflow' : 'hidden',
                'white-space' : 'nowrap'
            },
            args = $.extend(true, { count: -1, speed: 1e1, leftToRight: false }, args),
            i = 0,
            stop = textWidth*-1,
            dfd = $.Deferred();

        function go() {
            if(!that.length) return dfd.reject();
            if(width == stop) {
                i++;
                if(i == args.count) {
                    that.css(css);
                    return dfd.resolve();
                }
                if(args.leftToRight) {
                    width = textWidth*-1;
                } else {
                    width = offset;
                }
            }
            that.css('text-indent', width + 'px');
            if(args.leftToRight) {
                width++;
            } else {
                width--;
            }
            setTimeout(go, args.speed);
        };
        if(args.leftToRight) {
            width = textWidth*-1;
            width++;
            stop = offset;
        } else {
            width--;            
        }
        that.css(marqueeCss);
        go();
        return dfd.promise();
    };
            $('h1').marquee();
})(jQuery);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:26:56.410

除非存在源代码问题，否则使用设置了属性 src 的脚本标记将不会解释其中的代码。

所以只需像这样包含jquery：

```
 <script type='text/javascript' src='http://code.jquery.com/jquery.min.js'></script> 
```

然后使用新的脚本标签来包含您的代码：

```
<script>
function($) {
    $.fn.textWidth = function(){
         var calc = '<span style="display:none">' + $(this).text() + '</span>';
         $('body').append(calc);
         var width = $('body').find('span:last').width();
         $('body').find('span:last').remove();
        return width;
    };

    $.fn.marquee = function(args) {
        var that = $(this);
        var textWidth = that.textWidth(),
            offset = that.width(),
            width = offset,
            css = {
                'text-indent' : that.css('text-indent'),
                'overflow' : that.css('overflow'),
                'white-space' : that.css('white-space')
            },
            marqueeCss = {
                'text-indent' : width,
                'overflow' : 'hidden',
                'white-space' : 'nowrap'
            },
            args = $.extend(true, { count: -1, speed: 1e1, leftToRight: false }, args),
            i = 0,
            stop = textWidth*-1,
            dfd = $.Deferred();

        function go() {
            if(!that.length) return dfd.reject();
            if(width == stop) {
                i++;
                if(i == args.count) {
                    that.css(css);
                    return dfd.resolve();
                }
                if(args.leftToRight) {
                    width = textWidth*-1;
                } else {
                    width = offset;
                }
            }
            that.css('text-indent', width + 'px');
            if(args.leftToRight) {
                width++;
            } else {
                width--;
            }
            setTimeout(go, args.speed);
        };
        if(args.leftToRight) {
            width = textWidth*-1;
            width++;
            stop = offset;
        } else {
            width--;            
        }
        that.css(marqueeCss);
        go();
        return dfd.promise();
    };
            $('h1').marquee();
})(jQuery);
</script> 
```

# .net - EF Code First - 搜索具有特定属性值的特定行 - 性能

> ID：14173740
> 
> 赞同：0
> 
> 时间：2013-01-05T16:23:18.107
> 
> 标签：.net, entity-framework, entity-framework-4, code-first

假设在表中搜索条目时出现性能问题。我们来看一个例子：

```
public class A {

[Key]
public int Id {get;set;}

public string xyz {get; set;}

}

public class Context : DbContext {

public DbSet<A> AList {get;set;}

public A FindA(string xyz) {

A output = null;

   if(AList.Local != null) {
     output = AList.Local.SingleOrDefault(x=>x.xyz==xyz);
   }

   return output ?? AList.SingleOrDefault(x=>x.xyz==xyz);

}

} 
```

FindA 方法首先在 Local 集合中查找，如果没有匹配，则转到数据库。我需要这种方法来避免重复插入元素。

这种方法的问题很简单：在 AList.Local 上的搜索具有 O(n) 复杂性，在我的例子中， AList.Local 通常大于 100,000 条记录。如果 AList.Local 是在 xyz 属性上索引的字典，那就太好了；但是，EF Code First IDbSet 使用完全没有索引的 ObservableCollection。

一种可能的解决方案是维护一个 Dictionary 作为 AList.Local 的镜像。但是，这很棘手，因为对 AList.Local 的更改不容易跟踪。

另一种解决方案是将 xyz 属性作为主键并使用 AList.Find(xyz) 方法（我希望它是 O(1) 搜索，即使实体在本地缓存中）。但是，我怀疑使用字符串作为主键会影响我的数据库的性能并大大增加索引文件的大​​小。

谁能给我一个关于如何克服这种情况的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:38:07.413

如果您关心 Entity Framework 的高性能，那么您需要禁用更改跟踪，并且不要使用 LINQ 或 LINQ 方法语法。更改跟踪是最大的麻烦制造者，使用传统循环而不是 LINQ*大约*快 2 倍，但是当我们更喜欢传统循环而不是 LINQ 时，我们只是在谈论单个查找操作的毫秒数。

# java - Collection 的 contains 方法是否会为添加到其中的实例返回 false？

> ID：14173742
> 
> 赞同：0
> 
> 时间：2013-01-05T16:23:29.237
> 
> 标签：java, collections

我正在浏览 Joshua Bloch 关于“覆盖 equals() 方法”的在线章节。这是[链接](http://web.archive.org/web/20110622072109/http://java.sun.com/developer/Books/effectivejava/Chapter3.pdf)。以下部分让我感到困惑，

> 反身性——第一个要求只是说一个对象必须等于它自己。很难想象无意中违反了这一要求。如果您违反它然后将您的类的实例添加到集合中，那么集合的 contains 方法几乎肯定会说该集合不包含您刚刚添加的实例。

问题 - 集合的包含方法是否有可能在添加到其中的实例上返回 false？

我试过了，但返回的结果总是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:25:51.250

> 问题 - 集合的包含方法是否有可能在添加到其中的实例上返回 false？

除非添加的对象`equals()`违反了合同，正如书中的引文所解释的那样。

正如@Karthik T 所建议的那样，尝试使用一个`equals()`无条件返回的对象`false`（从而违反合同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:28:35.317

为了说明这一点，有这个简单的类：

```
class C {
    private int i;
    public C(int i) { this.i = i; }
} 
```

现在，如果你这样做：

```
C c1 = new C(1);
C c2 = new C(1);

List<C> l = new ArrayList<C>();

l.add(c1); 
```

`l.contains(c2)`将返回`false`，因为`c2.equals(c1)`is `false`，尽管两个实例具有相同的构造函数参数。

这是因为 class`C`不会覆盖`.equals()`nor `.hashCode()`。

一般来说，每次你的类必须用于`Collection`任何类型的时候，你最好重写这两个方法。在这种情况下：

```
// Note: final class, final member -- that makes this class immutable
final class C {
    private final int i;
    public C(int i) { this.i = i; }

    @Override
    public int hashCode() { return i; }
    @Override
    public boolean equals(Object o)
    {
        // no object equals null
        if (o == null)
            return false;
        // an object is always equal to itself
        if (this == o)
            return true;
        // immutable class: if the class of the other is not the same,
        // objects are not equal
        if (getClass() != o.getClass())
            return false;
        // Both objects are of the same class: check their members
        return i == ((C) o).i;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:56:39.043

这是一个集合的 contains 方法的演示，该方法为刚刚添加到集合中的对象返回 false。我采用了由 Eclipse 生成的普通 equals 和 hashCode，并将 equals 方法更改为非自反的。具体来说，当将对象与自身进行比较时，它会返回 false。

```
import java.util.LinkedList;
import java.util.List;

public class Test {
  int someValue;
  @Override
  public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + someValue;
    return result;
  }
  @Override
  public boolean equals(Object obj) {
    if (this == obj) {
      // Bad. Non-reflexive. Should return true.
      return false;
    }
    if (obj == null)
      return false;
    if (getClass() != obj.getClass())
      return false;
    Test other = (Test) obj;
    if (someValue != other.someValue)
      return false;
    return true;
  }
  public static void main(String[] args) {
    List<Test> myList = new LinkedList<Test>();
    Test myObject = new Test();
    myList.add(myObject);
    System.out.println(myList.contains(myObject));
  }
} 
```

# c# - 在 ASP.NET MVC 中调试当前页面

> ID：14173748
> 
> 赞同：1
> 
> 时间：2013-01-05T16:23:55.700
> 
> 标签：c#, asp.net-mvc, debugging

我在 VS2012 中有一个 MVC4 项目。

如何在浏览器中调试 VS 中当前打开的页面？当我在项目属性中选择“当前页面”时，总是会打开 Views 文件夹的路径。该路径应该没有 Views 文件夹。

当我选择“特定页面”并将文本框留空时，始终打开根目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:36:11.433

If you are using the MVC framework you are most likely using the routing system. To specify your starting page you need to give your project the path you want to open and not the view name (and selecting "current page" doesn't work because Visual Studio has no idea what route can be used to display the view your are on).

You need to manually set the `Specific Page` in your project option (under the Web tab) to the path you want to use (let's say you want to call your `home` path, then just fill up the field with `home`).

# c# - C# 等效于 Python 的 urlsafe_b64encode

> ID：14173749
> 
> 赞同：3
> 
> 时间：2013-01-05T16:24:17.063
> 
> 标签：c#, python, base64

我正在尝试构建一个 ASP.NET MVC 应用程序，它将使用[Thumbor](https://github.com/globocom/thumbor)作为照片大小调整后端，但一直遇到安全问题。Thumbor 使用 SHA1 HMAC 哈希作为基于 URL 的安全系统。因此，URL 可能如下所示：

```
http://thumbor-server/1234567890123456789012345678/300x200/smart/path/to/image.jpg 
```

1234567890123456789012345678 是由密钥和 300...image.jpg 部分组成的 hmac...

无论如何，我可以创建 HMAC 值，或者至少我认为我可以，但是在生成 URL 时，Thumbor 建议使用 Python 中的 urlsafe_base64encode 函数。我已经尝试过 System.Convert.ToBase64String，但这不起作用，并且编码字符串的 url 也不起作用。通过“不工作”，我的意思是 Thumbor 告诉我 URL 格式错误。没有太多可去的地方...

那么，有没有等价物？如果没有，人们将如何按照它的方式生成一个字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:55:16.837

通过获取 Base64 字符串并将 char 替换为`+`char`-`并将`/`char 替换为`_`. 这似乎是 Python 的做法[`urlsafe_b64encode`](https://docs.python.org/2/library/base64.html#base64.urlsafe_b64encode)

# javascript - 固定 div 滚动时移动菜单中的其他元素

> ID：14173751
> 
> 赞同：0
> 
> 时间：2013-01-05T16:24:18.563
> 
> 标签：javascript, jquery

我的网站右侧有一些菜单项，它们是：-

*   篮子摘要
*   最畅销
*   快速链接
*   ETC

我希望购物篮摘要在页面滚动时跟随页面，我知道如何使用位置：固定，但我需要它也将其他元素移开，否则它只会与它们重叠。

我正在看这个：[jsfiddle](http://jsfiddle.net/DKXNw/)可以完成这项工作并且可以工作，但显然那只是在单击按钮时，我需要调整它以通过 jQuery 滚动。

我已经阅读了许多关于浮动固定 div 的教程，但它们都是针对一个 div 的，并且没有任何其他 div 可以与之交互。

如果可能的话有什么想法和/或怎么做？

来自 js fiddle 的代码如下： -

```
$(function() {
    $('.upButton').click(function(e){
        var $parent = $('.highlight').closest('.box');
        $parent.insertBefore($parent.prev());           

    });

    $('.downButton').click(function(e){
        var $parent = $('.highlight').closest('.box');

        $parent.insertAfter($parent.next());   
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:05:40.733

用这个

[拖放](http://jqueryui.com/sortable/#connect-lists)是最好的。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:06:24.037

这是你要找的吗？： http: [//jsfiddle.net/cmontgomery/YVh4q/](http://jsfiddle.net/cmontgomery/YVh4q/)

本质上，每当窗口滚动时，检查您的部分是否在可见区域中，如果不是，请进行相应调整：

```
$(window).scroll(function () {
  var mover = $("#sidebar .quick-links");
  if($(window).scrollTop() === 0) {
      //console.log("to top");
      mover.prependTo("#sidebar");
  } else if(!isFullyInViewableArea(mover)) {
      var parent = mover.closest('.section');
      if(isBelowViewableArea(mover)) {
          //console.log("moving up");
          parent.insertBefore(parent.prev());
      } else {
          //console.log("moving down");
          parent.insertAfter(parent.next());
      }
  }
}); 
```

我必须承认，这种解决方案并不是最好的用户体验，即它会跳转而不是平滑滚动。如果是我，我会将可移动部分作为右栏中的最后一项，并以绝对定位将其向下移动，使其完全跟随可视区域的顶部。

# android - 使用 invalidate() ， java.lang.NullPointerexception

> ID：14173752
> 
> 赞同：0
> 
> 时间：2013-01-05T16:24:19.487
> 
> 标签：android, nullpointerexception, invalidation

我目前正在开发一款连接四游戏

我已设法开发应用程序以指向游戏知道用户选择的列的位置。我目前正在尝试将间隙的颜色更改为用户的相应颜色（已放置令牌）。

我遇到的问题是当 connectfourView.invalidate() 被调用时，我得到一个 java.lang.NullPointerexception

下面的代码

```
public void tokenPlacement (int index, float xpos) {
        int x = 0;
        int lowerxpos = (int) (xpos - 10);
        int higherxpos = (int) (xpos + 10);

        while (x <= 6)
        {
        if ( lowerxpos <= ((float) (columnselects.get(x).getWidthPos())) && higherxpos >= ((float) (columnselects.get(x).getWidthPos())))
        {
            Log.d("In IF", Float.toString(x));
            Log.d("Looking at the colour", Float.toString(gaps.get(x).getColor()));
            gaps.get(x).setColor(-1);
            Log.d("After change what is the colour now", Float.toString(gaps.get(x).getColor()));
            connectfourView.invalidate();
            break;
        }
        x++;
        }
        } 
```

关于代码。首先，我知道这只会影响每列间隙的底层。当颜色改变起作用时，我会解决这个问题。此代码来自 Gaps.java。此视图是 ConnectFourView.java（实例 connectfourView），其中将间隙绘制到屏幕上。所有间隙都存储在一个列表（间隙）中，并在 Gap.java 中定义（x 位置、颜色等）

来自 Gap.java 的部分

```
 public Gap (int j, int i, int color, double diameter, double widthpos, double heightpos){
        this.j = j;
        this.i = i;
        this.color = color;
        this.diameter = diameter;
        this.widthpos = widthpos;
        this.heightpos = heightpos;
    }

    public int getJ() {return j;}

    public int getI() {return i;}

    public int getColor() {return color;}

    public void setColor(int newColor) {this.color = newColor;}

    public double getDiameter() {return diameter;}

    public double getWidthPos() {return widthpos;}

    public double getHeightPos() {return heightpos;}
} 
```

这是我问到这[一点的一个问题](https://stackoverflow.com/questions/14172914/android-trigger-redraw-after-a-colour-change)

请注意，间隙是通过按“新游戏”按钮添加的

如果需要任何其他信息或代码，请发表评论

为 dmon 添加：

这是定义connectfourView的地方，它也被导入了

```
public class Gaps {

    ConnectFourView connectfourView;

/* Other code, not related to question */

public void tokenplacement()//at bottom of class Gaps 
```

我注意到，当单击屏幕上的退出按钮时，所有间隙都会在加载主菜单之前改变颜色，所以问题只是试图刷新屏幕

来自 ConnectFourView.java

```
public ConnectFourView(Context context, Gaps gaps) {
        super(context);
        this.gaps = gaps;
        setFocusable(true);
    }

//used to mange the attributes of the board (different colour to background for board)
    public ConnectFourView(Context context, AttributeSet attrs, Gaps gaps) {
        super(context, attrs);
        this.gaps = gaps;
        setFocusable(true);
        setMinimumWidth(getWidth());
        setMinimumHeight(getHeight());
    } 
```

链接到[保管箱](https://www.dropbox.com/s/3aym85i0c4hkbjt/Connectfourapp.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:16:54.963

正如其他人所说（我给了亨利一个凹凸）， connectfourView 必须在那里为空。你需要初始化它：

```
ConnectFourView connectfourView = new ConnectFourView(); 
```

我看不到这是在哪里完成的，因此默认情况下它可能设置为 null。

# r - 将文件名拆分为名称、扩展名

> ID：14173754
> 
> 赞同：40
> 
> 时间：2013-01-05T16:24:40.663
> 
> 标签：r, split, substring, filenames

我有一个像这样的文件名：`name1.csv`我想提取这个字符串的两个子字符串。一个将 存储`name1`在一个变量中，另一个将扩展名 , 存储`csv`在另一个变量中，而没有点。

我一直在寻找是否有像`indexOf`Java 这样的函数允许进行这种操作，但我根本没有找到任何东西。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-05T16:27:14.477

使用`strsplit`：

```
R> strsplit("name1.csv", "\\.")[[1]]
[1] "name1" "csv"  
R> 
```

请注意，您 a) 需要转义点（因为它是正则表达式的元字符）和 b) 处理`strsplit()`返回一个列表的事实，该列表通常只有第一个元素是感兴趣的。

更通用的解决方案涉及可以提取匹配项的正则表达式。

对于文件名的特殊情况，您还有：

```
R> library(tools)   # unless already loaded, comes with base R
R> file_ext("name1.csv")
[1] "csv"
R> 
```

和

```
R> file_path_sans_ext("name1.csv")
[1] "name1"
R> 
```

因为这些是常见的任务（参见`basename`shell 等）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-05T16:28:42.633

使用`strsplit()`：

[http://stat.ethz.ch/R-manual/R-devel/library/base/html/strsplit.html](http://stat.ethz.ch/R-manual/R-devel/library/base/html/strsplit.html)

例子：

```
> strsplit('name1.csv', '[.]')[[1]]
[1] "name1" "csv" 
```

请注意，第二个参数是正则表达式，这就是为什么您不能只传递单个点（它将被解释为“任何字符”）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T21:43:53.157

使用正则表达式，您可以执行此操作，例如

```
regmatches(x='name1.csv',gregexpr('[.]','name1.csv'),invert=TRUE)
[[1]]
[1] "name1" "csv" 
```

# ember.js - Ember.js 新路由器：从父动态路由段访问序列化对象

> ID：14173760
> 
> 赞同：10
> 
> 时间：2013-01-05T16:25:14.300
> 
> 标签：ember.js

已经有类似的[问题](https://github.com/emberjs/ember.js/issues/1334)了。

假设以下路线：

```
App.Router.map(function (match) {
  match('/').to('index');
  match('/posts').to('posts', function (match) {
    match('/').to('postsIndex');
    match('/:post_id').to('post', function (match) {
      match('/comments').to('comments', function (match) {
        match('/').to('commentsIndex');
        match('/:comment_id').to('showComment');
      });
    });
  });
}); 
```

是否可以同时访问`post_id`和`comment_id`in `ShowCommentRoute`？否则我应该忘记模型中的复合键吗？

为什么`CommentsRoute#model(params)`和`CommentsIndexRoute`论点总是空洞的？什么时候检索`Post`评论？

我的[小提琴](http://jsfiddle.net/RGgxK/18/)。

也运行这个[例子](http://fiddle.jshell.net/RGgxK/18/show/#/posts/1/comments/1)（有控制台日志显示问题。

**经过一番调查后更新：**

只会`PostRoute`有`params.post_id`。只会`ShowCommentRoute`有`params.comment_id`和不会有`params.post_id`。

这对于模型具有复合键的应用程序是不可接受的。如果我们`showComment`逐步过渡到，我们可以获得`Comment`实例：

```
App.ShowCommentRoute = Ember.Route.extend({
  model: function(params) {
    var post_id = this.controllerFor('post').get('content.id');
    return App.Comment.find(post_id, params.comment_id);
  }
}); 
```

但是，如果我们直接访问，这将不起作用`/posts/1/comments/1`。在这种情况下`this.controllerFor('post')`总是`undefined`。

*   如果您有带有动态段的嵌套路由，**则无法**`*IndexRoute`在（`PostRoute`和`PostInderRoute`本例中）中访问此段
*   简而言之，**直接访问**嵌套路由是无法获得父路由模型的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T13:34:05.613

使用 ember-1.0.0-rc.1 现在可以在直接访问 url 时访问父路由的模型。

```
App.ShowCommentRoute = Ember.Route.extend({
  model: function(params) {
    var post = this.modelFor('post');
    return App.Comment.find(post.get('id'), params.comment_id);
  }
}); 
```

# c++ - c ++“运行时检查失败＃2 - 变量'board'周围的堆栈已损坏”

> ID：14173764
> 
> 赞同：3
> 
> 时间：2013-01-05T16:25:26.710
> 
> 标签：c++, stack

调试：

运行时检查失败 #2 - 变量“板”周围的堆栈已损坏。程序“[5516] a12aa.exe: Native”已退出，代码为 0 (0x0)。

编辑：哦，我没有提到仅在游戏模式 1 中发生（玩电脑）在游戏模式 2 中我有相同的分配并且它工作正常..

```
#include <iostream>
#include <cstring>

using namespace std;

const int len=3;
//functions:
void printBoard(char board[len][len]);// prints game board

char userTurn (char board[len][len],int player);
char compTurn(char board[len][len]);

bool checkWin(char board[len][len]);// 
bool checkTie(char board[len][len]);// check if board is full 

char compDef(char board[len][len],bool &move);// computer defend move
char compAtt(char board[len][len],bool &move);// computer attck move
char nextMove(char board[len][len],bool &move);// regular move

int main() {

    char board[len][len] = {{' ',' ',' '},{' ',' ',' '},{' ',' ',' '}};
    int gamemode;
    int winner=0;

    cout<<"Please choose game mode <1 - 1 player, 2 - 2 players>: ";
    cin>>gamemode;

    switch (gamemode){
    case 1: {
        printBoard(board);
        int player=1;
        while (!checkWin(board)&&!checkTie(board)) {
            cout<<"User turn: ";
            board[len][len] = userTurn(board,player);
            printBoard(board);
            winner=1;
            if (!checkWin(board)&&!checkTie(board)) {
                cout<<"Computer turn..."<<endl;
                board[len][len] = compTurn(board);
                printBoard(board);
                winner=2;
            } // if
        } //while
        cout<<"Game Over!!!"<<endl;
        if (checkTie(board)&&!checkWin(board))// board is full and nobody won
            cout<<"Its a Tie!!!"<<endl;
        else if (winner==1) // winner 1 - user ,, winner 2 - computer
            cout<<"You Win!!!"<<endl;
        else 
            cout<<"Computer Wins!!!"<<endl;
            } //case
            break;
    case 2: {
        printBoard(board);
        int player;
        while (!checkWin(board)&&!checkTie(board)) {
            cout<<"User 1 turn: ";
            player=1;
            board[len][len] = userTurn(board,player);
            printBoard(board);
            winner=1;
            if (!checkWin(board)&&!checkTie(board)) {
                cout<<"User 2 turn: ";
                player=2;
                board[len][len] = userTurn(board,player);
                printBoard(board);
                winner=2;
            } // if
        } //while
        cout<<"Game Over!!!"<<endl;
        if (checkTie(board)&&!checkWin(board))// board is full and nobody won
            cout<<"Its a Tie!!!"<<endl;
        else if (winner==1) // winner 1 - user 1,, winner 2 - user 2
            cout<<"User 1 Win!!!"<<endl;
        else 
            cout<<"User 2 Wins!!!"<<endl;           
            } //case
            break;
    default: { // choice is not 1 or 2
        cout<<"Choice unvaild!"<<endl;
             }  //default
             break;
    }

    return 0;
}//main

void printBoard (char board[len][len]) {
    for (int i=0;i<3;i++) {
        cout<<"-------"<<endl;
        cout<<"|"<<board[i][0]<<"|"<<board[i][1]<<"|"<<board[i][2]<<"|"<<endl;
    }
    cout<<"-------"<<endl;
}

char userTurn (char board[len][len],int player) {
    int i,j;
    do {
        cout<<"Please enter valid coordinates for i and j: ";
        cin>>i>>j;
        if (!(i>=0)||!(i<=2)||!(j>=0)||!(j<=2))
            cout<<"Invaild corrdinates!!!"<<endl;
        else if (board[i][j]!=' ')
            cout<<"The cell already has value!!"<<endl;
        else {
            char symbol;
            if (player==1)
                symbol='X';
            else
                symbol='O';
            board[i][j]= symbol;
            return board[len][len];
        }
    } while (board[i][j]!=' '||!(i>=0)||!(i<=2)||!(j>=0)||!(j<=2));// while chosen coordinates is not empty and 0<i<2 and 0<j<2
}

bool checkWin(char board[len][len]){
    for (int i=0;i<3;i++) {
        if (board[i][0]==board[i][1]&&board[i][0]==board[i][2]&&board[i][0]!=' ')// check win rows
            return true;
    }
    for (int i=0;i<3;i++) {
        if (board[0][i]==board[1][i]&&board[0][i]==board[2][i]&&board[0][i]!=' ')// check win cloumns
            return true;
    }
    if (board[0][0]==board[1][1]&&board[0][0]==board[2][2]&&board[0][0]!=' ')// check win diagonals
        return true;
    if (board[0][2]==board[1][1]&&board[0][2]==board[2][0]&&board[0][2]!=' ')
        return true;

    return false;
}//checkWin

bool checkTie(char board[len][len]){// check ifboard is full 
    for (int i=0;i<3;i++) {
        if (board[i][0]==' '||board[i][1]==' '||board[i][2]==' ')
            return false;
    }
    return true;
}

char compTurn(char board[len][len]){// README.txt
    bool move=false;
    if (board[1][1]==' '){
        board[1][1]='O';
        return board[len][len];
    }
    board[len][len]=compAtt(board,move);
    if (!move)
        board[len][len]=compDef(board,move);
    if (!move)
        board[len][len]=nextMove(board,move);

    return board[len][len];
}

char compDef(char board[len][len], bool &move) {
    //rows
    for (int i=0;i<3;i++) {
        if (board[i][0]=='X'&&board[i][1]=='X'&&board[i][2]==' '){
            board[i][2]='O';
            move=true;
            return board[len][len];
        }
    }
    for (int i=0;i<3;i++) {
        if (board[i][0]=='X'&&board[i][1]==' '&&board[i][2]=='X'){
            board[i][1]='O';
            move=true;
            return board[len][len];
        }
    }
    for (int i=0;i<3;i++) {
        if (board[i][0]==' '&&board[i][1]=='X'&&board[i][2]=='X'){
            board[i][0]='O';
            move=true;
            return board[len][len];
        }
    }
    //col
    for (int i=0;i<3;i++) {
        if (board[0][i]=='X'&&board[1][i]=='X'&&board[2][i]==' '){
            board[2][i]='O';
            move=true;
            return board[len][len];
        }
    }
    for (int i=0;i<3;i++) {
        if (board[0][i]=='X'&&board[1][i]==' '&&board[2][i]=='X'){
            board[1][i]='O';
            move=true;
            return board[len][len];
        }
    }
    for (int i=0;i<3;i++) {
        if (board[0][i]==' '&&board[1][i]=='X'&&board[2][i]=='X'){
            board[0][i]='O';
            move=true;
            return board[len][len];
        }
    }
    // diagonals

    if (board[0][0]=='X'&&board[1][1]=='X'&&board[2][2]==' '){
        board[2][2]='O';
        move=true;
        return board[len][len];
    }
    if (board[0][0]=='X'&&board[1][1]==' '&&board[2][2]=='X'){
        board[1][1]='O';
        move=true;
        return board[len][len];
    }
    if (board[0][0]==' '&&board[1][1]=='X'&&board[2][2]=='X'){
        board[0][0]='O';
        move=true;
        return board[len][len];
    }
    // 2
    if (board[0][2]=='X'&&board[1][1]=='X'&&board[2][0]==' '){
        board[2][0]='O';
        move=true;
        return board[len][len];
    }
    if (board[0][2]=='X'&&board[1][1]==' '&&board[2][0]=='X'){
        board[1][1]='O';
        move=true;
        return board[len][len];
    }
    if (board[0][2]==' '&&board[1][1]=='X'&&board[2][0]=='X'){
        board[0][2]='O';
        move=true;
        return board[len][len];
    }
}

char compAtt(char board[len][len],bool &move) {
    for (int i=0;i<3;i++) {
        if (board[i][0]=='O'&&board[i][1]=='O'&&board[i][2]==' '){
            board[i][2]='O';
            move=true;
            return board[len][len];
        }
    }
    for (int i=0;i<3;i++) {
        if (board[i][0]=='O'&&board[i][1]==' '&&board[i][2]=='O'){
            board[i][1]='O';
            move=true;
            return board[len][len];
        }
    }
    for (int i=0;i<3;i++) {
        if (board[i][0]==' '&&board[i][1]=='O'&&board[i][2]=='O'){
            board[i][0]='O';
            move=true;
            return board[len][len];
        }
    }
    //col
    for (int i=0;i<3;i++) {
        if (board[0][i]=='O'&&board[1][i]=='O'&&board[2][i]==' '){
            board[2][i]='O';
            move=true;
            return board[len][len];
        }
    }
    for (int i=0;i<3;i++) {
        if (board[0][i]=='O'&&board[1][i]==' '&&board[2][i]=='O'){
            board[1][i]='O';
            move=true;
            return board[len][len];
        }
    }
    for (int i=0;i<3;i++) {
        if (board[0][i]==' '&&board[1][i]=='O'&&board[2][i]=='O'){
            board[0][i]='O';
            move=true;
            return board[len][len];
        }
    }
    // diagonals

    if (board[0][0]=='O'&&board[1][1]=='O'&&board[2][2]==' '){
        board[2][2]='O';
        move=true;
        return board[len][len];
    }
    if (board[0][0]=='O'&&board[1][1]==' '&&board[2][2]=='O'){
        board[1][1]='O';
        move=true;
        return board[len][len];
    }
    if (board[0][0]==' '&&board[1][1]=='O'&&board[2][2]=='O'){
        board[0][0]='O';
        move=true;
        return board[len][len];
    }
    // 2
    if (board[0][2]=='O'&&board[1][1]=='O'&&board[2][0]==' '){
        board[2][0]='O';
        move=true;
        return board[len][len];
    }
    if (board[0][2]=='O'&&board[1][1]==' '&&board[2][0]=='O'){
        board[1][1]='O';
        move=true;
        return board[len][len];
    }
    if (board[0][2]==' '&&board[1][1]=='O'&&board[2][0]=='O'){
        board[0][2]='O';
        move=true;
        return board[len][len];
    }
}

char nextMove(char board[len][len],bool &move) {
    // coreners
    if (board[0][0]==' '){
        board[0][0]='O';
        move=true;
        return board[len][len];
    }
    if (board[2][0]==' '){
        board[2][0]='O';
        move=true;
        return board[len][len];
    }
    if (board[0][2]==' '){
        board[0][2]='O';
        move=true;
        return board[len][len];
    }
    if (board[2][2]==' '){
        board[2][2]='O';
        move=true;
        return board[len][len];
    }
    // centers
    if (board[0][1]==' '){
        board[0][1]='O';
        move=true;
        return board[len][len];
    }
    if (board[1][0]==' '){
        board[1][0]='O';
        move=true;
        return board[len][len];
    }
    if (board[2][1]==' '){
        board[2][1]='O';
        move=true;
        return board[len][len];
    }
    if (board[1][2]==' '){
        board[1][2]='O';
        move=true;
        return board[len][len];
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T16:29:33.317

有几个地方可以分配给`board[len][len]`，例如：

```
 board[len][len] = userTurn(board,player); 
```

这是超出范围的，因此是未定义的（实际上会破坏堆栈）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:29:38.717

你正在做：

```
board[len][len] = userTurn(board,player); 
```

这是写超出数组的末尾。

# c - 我可以让程序读取 ' . '如果用户放'，'？使用 C

> ID：14173765
> 
> 赞同：1
> 
> 时间：2013-01-05T16:25:27.247
> 
> 标签：c, scanf

我有一个代码，用户必须输入油漆升的价格......但它只接受像“2.50”这样的价格，如果用户输入“2,50”，我可以让程序将逗号转换为点吗? 使用 C!

```
 printf ("\n How many liters of green paint we'll use? ");
    scanf ("%d", &green);
    printf ("\n How many liters of blue paint we'll use? ");
    scanf (" %d", &blue);
    printf ("\n What's the price for the liter of green paint? ");
    scanf ("%f", &priceG);
    fflush(stdin);
    printf ("\n What's the price for the liter of blue paint? ");
    scanf ("%f", &priceB); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:35:37.050

collect the input into a **string** and perform the operation..

Traverse each character of the string and if you come across `,` replace it with `.`

Put the traversed characters into an other **string** while traversing and when `,` is found, replace it with `.`

This procedure might be lengthy, but it might help and meet your requirement.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:46:22.183

`setlocale(LC_NUMERIC,"yourLocale")`您可以使用from为小数点设置所需的语言环境`#include <locale.h>`。（[更多信息在这里](http://www.cplusplus.com/reference/clocale/setlocale/)）

`yourLocale`必须是您的机器上可用的有效语言环境字符串，并使用`,`小数点，例如`de_DE`. 您可以使用`locale -a`.

# vim - Vim 忽略 .vimrc 中指定的 shiftwidth

> ID：14173766
> 
> 赞同：8
> 
> 时间：2013-01-05T16:25:48.670
> 
> 标签：vim

我在 Linux Mint 12 "Lisa"(x64) 上使用 Vim 7.3.154 cli。

我更喜欢使用 2 列的`tabstop`和`shiftwidth`。我`.vimrc`必须
`:set ts=2`
`:set sw=2`
完成同样的任务。

每当我打开一个新的 Vim 实例时，`tabstop`都会保留值，因此现有选项卡会根据`.vimrc`. 但不知何故，该`shiftwidth`值更改为 3。这导致自动缩进时缩进 3 列。
在新的 Vim 实例上运行`:set sw=2`可以解决这个问题。
谁能告诉我为什么 Vim 忽略/改变`shiftwidth`价值`.vimrc`？

我尝试禁用所有插件无济于事。

[Vim 编译选项](http://pastebin.com/aejBXkAD) | [.vimrc](http://pastebin.com/jjqvNuwB)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T18:10:49.523

这个答案只是总结了我们在评论中讨论的内容。:)

这很可能是因为您启用了文件特定设置。检查`:h modeline`更多信息。确保您遇到问题的那些文件中没有此行。

* * *

除了设置之外`tabstop`，`shiftwidth`您还应该设置更多关于空格和制表符的设置。

```
set noexpandtab " Make sure that every file uses real tabs, not spaces
set shiftround  " Round indent to multiple of 'shiftwidth'
set smartindent " Do smart indenting when starting a new line
set autoindent  " Copy indent from current line, over to the new line

" Set the tab width
let s:tabwidth=4
exec 'set tabstop='    .s:tabwidth
exec 'set shiftwidth=' .s:tabwidth
exec 'set softtabstop='.s:tabwidth 
```

查看此视频以获取更多信息：http: [//vimcasts.org/episodes/tabs-and-spaces/](http://vimcasts.org/episodes/tabs-and-spaces/)

* * *

因此，这就是您能够解决的实际问题的答案。该`php.php`文件在`/plugin`目录中。该目录被加载一次，每次 Vim 启动时。检查这个： http: [//learnvimscriptthehardway.stevelosh.com/chapters/42.html#vimplugin](http://learnvimscriptthehardway.stevelosh.com/chapters/42.html#vimplugin)

如果您希望该文件仅加载到 PHP 文件上，那么您应该将它放在`/ftplugin`文件夹中：http: [//learnvimscriptthehardway.stevelosh.com/chapters/42.html#vimftplugin](http://learnvimscriptthehardway.stevelosh.com/chapters/42.html#vimftplugin)

阅读那里的文档，它应该是一个`.vim`文件，换句话说，在这种情况下它将被称为`php.vim`.

Pathogen 或 Vundle 所做的就是修改运行时路径 ( `:h runtimepath`)，仅此而已。

因此，您现在可以通过单击此答案左侧的绿色小箭头来接受此答案。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-06T16:55:52.427

你可以运行：

```
verbose set shiftwidth ? 
```

检查什么设置了 shiftwidth 的值。它可能来自插件。您也可以选择在此处修改值。

# javascript - 我可以使用 javascript 隐藏 Html 链接吗？

> ID：14173768
> 
> 赞同：3
> 
> 时间：2013-01-05T16:25:53.643
> 
> 标签：javascript, html, hyperlink

这是一个简单的练习，我想在其中隐藏我放在 Html 文件中的链接。但是在我的函数中的计时器用完后让它出现。

这是 javascript 位（下面是 html 位）

```
var i = 10;
var time;
var countdown = document.getElementById("countdown");
var link = document.getElementById("link");

function MyFunction3() {
    document.getElementById("imageoef").style.visibility="visible";
    link.style.visibility="hidden";

    i--;
    countdown.innerHTML= i;
    time = setTimeout ("MyFunction3();",1000);

    if (i < 1) {
        countdown.innerHTML="";
        document.getElementById("imageoef").style.visibility="hidden";
        link.style.visibility="visible";
    }
} 
```

HTML

```
<img src="images/loading.gif" alt="Loading..." id="imageoef" style="visibility:hidden" />
<form method="post">
    <input onclick="MyFunction3();" type="button" value="start download" />
</form>

<div id="countdown">
    <a id="link" href="http://freelanceswitch.com/freelance-freedom/freelance-freedom-2/" >Your download is ready!</a>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T16:34:09.683

HTML:

```
<input type="button" onclick="hideLink()" value="Start" />
<p id="timer"></p>
<a id="link" href="">This link is hidden for 10 seconds.</a> 
```

JavaScript:

```
var timeLeft = 10;
var count;
window.hideLink = function hideLink()
{
  document.getElementById("link").style.visibility = "hidden";
  count = setInterval (decrementTimer, 1000);
  setTimeout (showLink,1000 * timeLeft);
};

function decrementTimer()
{
  timeLeft = timeLeft - 1;
  document.getElementById("timer").innerHTML = timeLeft + " seconds";
  if(timeLeft <= 0)
  {
    window.clearInterval(count);
    document.getElementById("timer").style.visibility = "hidden";
  }
}

function showLink()
{
  document.getElementById("link").style.visibility = "visible";
} 
```

[http://jsfiddle.net/rPnNr/4/](http://jsfiddle.net/rPnNr/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T18:46:52.183

如果您将 javascript 放在标题部分，您的代码可能无法正常工作。因为您`countdown and link`在页面加载时存储元素值。那时，如果您的元素尚未加载到页面，则您的`countdown and link`vars 将为空。更好的方法是在您单击按钮后访问您的元素。

```
var i = 10;
var time;
var countdown = document.getElementById("countdown");
var link = document.getElementById("link");

function MyFunction3() {
    countdown = document.getElementById("countdown");
    link = document.getElementById("link");

    document.getElementById("imageoef").style.visibility="visible";
    link.style.visibility="hidden";

    i--;
    countdown.innerHTML= i;
    time = setTimeout ("MyFunction3();",1000);

    if (i < 1) {
        countdown.innerHTML="";
        document.getElementById("imageoef").style.visibility="hidden";
        link.style.visibility="visible";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:58:26.053

Your code doesn't work because it sets the `countdown` div's `innerHTML` to '', but the link was inside that div, so gets deleted and you can't then make it reappear just by setting its visibility. You could fix it just by putting the link outside of the div in the HTML.

```
<img src="images/loading.gif" alt="Loading..." id="imageoef" style="visibility:hidden"
/>
<form method="post">
  <input id="myInput" type="button" value="start download" />
</form>
<div id="countdown"> 
</div><a id="link" href="http://freelanceswitch.com/freelance-freedom/freelance-freedom-2/">Your download is ready!</a> 
```

While I was at it I altered your script a bit... ([jsfiddle](http://jsfiddle.net/aE7s9/1))

```
var i = 10,
  time;
function E(id) {return document.getElementById(id) }
E('myInput').onclick = function () {
  E('imageoef').style.visibility = 'visible';
  E('link').style.visibility = 'hidden';
  time = setInterval(function () {
    i--;
    E('countdown').innerHTML = i;
    if (i < 1) {
      clearInterval(time);
      E('countdown').innerHTML = '';
      E('imageoef').style.visibility = 'hidden';
      E('link').style.visibility = 'visible';
    }
  }, 1000);
} 
```

Actually the other changes are all non-essential but some explanation anyway:

*   you ideally want 2 functions, not just 1 - the first to trigger the countdown and the second for each time the counter decreases
*   `setInterval` is more useful than `setTimeout` here, as it recurs automatically and you don't need to keep setting it; however you do then need to use `clearInterval` to stop the timer. In your original code you were doing nothing to stop the timer so it would just carry on indefinitely (but with the effects hidden).
*   I preferred to set `onclick` in javascript rather than having an `onclick` attribute of the html tag. But your original method does also work.

([Here](http://jsfiddle.net/y4SEt/) is your original code with only the necessary changes to make it work.)

# php - 使用 PHP 获取使用 AJAX 生成的 Select 值

> ID：14173769
> 
> 赞同：2
> 
> 时间：2013-01-05T16:25:53.717
> 
> 标签：php, ajax, forms

我对 AJAX 很陌生。我正在尝试从 PHP 文件中获取 AJAX 生成的选择框的值。让我举一个例子，我正在尝试做的事情：

firstPage.html 包含：

```
<form action="next.php" method="post">
<select name=cat id=cat onchange=load_sub_cat(this.value)>
<option value=0 selected=selected >Select Category</option>
<option id=1 value=1>A  </option>
<option id=2 value=2>B  </option>
<option id=3 value=3>C  </option>
</select>

<div id=sub_cat>---Select--Subcategory---</div>
<script>
function load_sub_cat(str){
                var xmlhttp;
                xmlhttp=new XMLHttpRequest();
                xmlhttp.open("get","getData.php?q="+str,false);
                xmlhttp.send();
                document.getElementById("sub_cat").innerHTML=xmlhttp.responseText;
            }
</script> 
```

getData.php 包含：

```
<?php
$q=$_GET['q'];
//Some database calls……………………………
$html="<select name=sub>";
$html.="<option value=1>Test 1</option>";//Populating the options from database
$html.="</select>";
?> 
```

在 next.php 我试图获取使用“sub”选择框提交的值。我有：

```
<?php
echo $_POST['cat'];
echo $_POST['sub'];
?> 
```

我通过选择 cat 选择框完美地获得了子选择框但是在提交表单后我在 $_POST['sub'] 处没有得到任何东西。我确实得到了 $_POST['cat']。任何帮助或教程链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:36:41.940

**1）**在您的`getData.php`中，您创建了`$html`变量，但您没有`echo`在浏览器中看到它。

```
...
...
$html.="</select>";
echo $html; // <-- echo it! 
```

**2）**你的ajax是错误的。`send()`调用XHR的方法后，您无法立即获得响应文本。您需要监听`onreadystatechange`事件：

```
 xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("sub_cat").innerHTML=xmlhttp.responseText;
    }
  } 
```

**3)**您需要将 HTML 属性用引号括起来：

```
onchange="load_sub_cat(this.value)" 
```

**4）**看起来你缺少一个结束`</form>`标签。确保在div**之后**`sub_cat`关闭表单，因为这将包含表单输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:38:13.330

检查您是否关闭了表单 html 标签： after ... put

# javascript - Node.JS 中的 HTTP DELETE 动词

> ID：14173770
> 
> 赞同：10
> 
> 时间：2013-01-05T16:25:54.550
> 
> 标签：javascript, node.js, http, rest, express

在向 node.js 应用程序发出 DELETE 请求之前，是否需要设置任何配置？

我可以提出`GET`,`POST`或`PUT`请求，但`DELETE`请求不起作用。

`DELETE http://localhost:8081/api/1.0/entry`从路由记录器产生`undefined`，我正在使用 express 来注册路由。但看起来我什至无法解析 url / 动词。

这就是我调用它的方式：

```
rows.find('a.remove').on('click', function(){
    $.ajax({
        url: '/api/1.0/entry',
        type: 'DELETE'
    }).done(function(res){
        var row = $(this).parentsUntil('tbody');
        row.slideUp();
    });
}); 
```

样本日志

```
GET / 200 18ms  
GET /author/entry 200 10ms  
GET /api/1.0/entry 200 2ms  
GET /api/1.0/entry 200 1ms  
GET /api/1.0/entry 200 1ms  
undefined 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T17:06:42.107

希望这可以帮助：

*   **启用日志记录作为您的第一个中间件以确保请求进入：**

    `app.use(express.logger());`

*   **使用 methodOverride() 中间件：**

    `app.use(express.bodyParser());`

    `app.use(express.methodOverride()); // looks for DELETE verbs in hidden fields`

*   **创建一个 .del() 路由：**

    `app.del('/api/1.0/entry', function(req, res, next) { ... });`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T21:59:15.207

并非所有浏览器都支持**类型**设置的PUT 和 DELETE 值：

请参阅文档[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

您可以在 ajax 请求中使用包括**data:{_method:'delete'}**的POST 类型：

```
$.ajax({
    data:{_method:'delete'},
    url: '/api/1.0/entry',
    type: 'POST'
}).done(function(res){
    var row = $(this).parentsUntil('tbody');
    row.slideUp();
}); 
```

# php - 在 Drupal 7 的自定义注册页面中显示角色复选框

> ID：14173771
> 
> 赞同：1
> 
> 时间：2013-01-05T16:25:56.613
> 
> 标签：php, drupal, drupal-6, drupal-7, drupal-theming

我在 drupal 7 中创建了自己的自定义注册页面，但我无法显示角色复选框

我的代码是：

```
<div class="register-name-field"><?php echo drupal_render($form['account']['roles']); ?></div> 
```

但是角色没有出现？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T19:07:02.127

这部分显示给有`Administer permissions`权限的用户。

我认为允许匿名用户选择他们所属的角色是不安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:53:36.253

[您可以使用自动分配角色](http://drupal.org/project/autoassignrole)模块在注册页面上显示复选框，以允许用户选择自己的角色，而不是通过自定义代码执行此操作。

要在注册页面中启用角色字段，请安装并启用[自动分配角色](http://drupal.org/project/autoassignrole)模块并导航到“admin/config/people/autoassignrole/user”页面。启用“用户角色分配”选项，选择要在注册页面上显示的角色，还有其他选项可以自定义此字段。

这将在用户注册页面中显示角色字段。

# android - Ellipsize 对于具有任意最大高度的多行 TextView 无法正常工作

> ID：14173776
> 
> 赞同：24
> 
> 时间：2013-01-05T16:26:07.607
> 
> 标签：android, textview, multiline, ellipsis

我有`TextView`一个未知的最大高度，这取决于设备的 DPI/屏幕分辨率。因此，例如，在 MDPI 设备上，这个最大高度使得一次只能显示 2 行成为可能，这个值可以增加到一个未定义的数字。

我的问题与 ellipsize 功能有关。假设某个设备允许显示 4 行。如果我手动设置最大行数，像这样......

```
<TextView
    android:id="@+id/some_id"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:ellipsize="end" 
    android:maxLines="4"
    android:singleLine="false"
    android:layout_weight="1"
    android:gravity="center_vertical"
    android:text="This is some really really really really really long text"
    android:textSize="15sp" /> 
```

...一切正常。如果文本不合适，则在第四行末尾添加省略号，如下所示：

```
This is some
really really
really really
really long... 
```

但我宁愿*不*将行数设置为静态变量，因为我更愿意支持 DPI/屏幕分辨率的任何组合。因此，如果我删除`maxLines`省略号，则在第四行不再正确显示，而是显示不完整的文本部分：

```
This is some
really really
really really
really long 
```

如果我稍微增加`TextView`大小，我可以看到其余的文本仍然被绘制在另一个“后面” `Views`。设置变量`maxHeight`似乎也不起作用。

我似乎真的找不到这个问题的解决方案。有任何想法吗？如果有帮助，我只使用 Android v4.0.3 及更高版本（API 级别 15）。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-05T19:09:10.767

计算有多少行适合`TextView`with`TextView#getHeight()`和`TextView#getLineHeight()`。然后调用`TextView#setMaxLines()`。

```
ViewTreeObserver observer = textView.getViewTreeObserver();
observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        int maxLines = (int) textView.getHeight()
                / textView.getLineHeight();
        textView.setMaxLines(maxLines);
        textView.getViewTreeObserver().removeGlobalOnLayoutListener(
                this);
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-22T01:52:12.943

接受的答案适用于**API 27**。但是，从**API 28**开始，如果未设置行高（通过以下方法之一），默认情况下 Android 会在行之间添加额外的间距，但不会在最后一行之后。

1.  在布局 XML 中设置属性`android:lineHeight=...`（[文档）](https://developer.android.com/reference/android/widget/TextView.html#attr_android:lineHeight)
2.  `textView.setLineHeight(...)`在您的源代码中调用。

为了找出 API 28 及更高版本的新行高，我使用了`textView.getLineBounds()`.

**科特林**

```
val observer = textView?.viewTreeObserver
observer?.addOnGlobalLayoutListener(object : ViewTreeObserver.OnGlobalLayoutListener {
    override fun onGlobalLayout() {
        textView?.let { view ->
            val lineHeight: Int
            lineHeight = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
                val bounds = Rect()
                textView.getLineBounds(0, bounds)
                bounds.bottom - bounds.top
            } else {
                textView.lineHeight
            }
            val maxLines = textView.height / lineHeight
            textView.maxLines = maxLines
            textView.viewTreeObserver.removeOnGlobalLayoutListener(this)
        }
    }
}) 
```

**安卓Java**

```
ViewTreeObserver observer = textView.getViewTreeObserver();
observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        int lineHeight = textView.getLineHeight();
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
            Rect bounds = new Rect();
            textView.getLineBounds(0, bounds);
            lineHeight = bounds.bottom - bounds.top;
        }
        int maxLines = (int) textView.getHeight() / lineHeight;
        textView.setMaxLines(maxLines);
        textView.getViewTreeObserver().removeGlobalOnLayoutListener(
            this);
    }
}); 
```

# java - 数组：为不同的 x 查找 array[x][1]

> ID：14173785
> 
> 赞同：1
> 
> 时间：2013-01-05T16:27:01.793
> 
> 标签：java, multidimensional-array

首先让我告诉你，英语不是我的母语。我已尝试在此站点上找到此问题的解决方案，但我发现很难解释我在搜索框中寻找的内容。如果之前已发布过此问题的解决方案，请原谅。

所以基本上我需要`array[x][1]`找到`x = input.readString()`

例子：

`array [0][0] = "book";`

`array [0][1] = "lord of the rings";`

`x = "book";`

我现在需要一种在输入为“书”时找到“指环王”的方法。

编辑：请原谅我一开始没有添加这个。这是学校的作业，我需要使用数组，而不是哈希图，抱歉浪费您的时间

提前致谢。

更新：

gekozenCat 是输入（书） TERADENWOORDEN 是数组，其中 [0][0] = book 和 [0][1] = 指环王 CATEGORIES = 类别数量

我在这里做错了吗？

```
 String woordVanCat = woordBepalen (gekozenCat);

public String woordBepalen(String teBepalenWoordVanCat) {
    for (int p = 0; p < CATEGORIES; p++)
        if (TERADENWOORDEN[p][0].equals(teBepalenWoordVanCat))
        return TERADENWOORDEN[p][1];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:31:27.377

在这种情况下，多维数组并不是最好的。使用一个 Map，一个 HashMap：

```
Map<String, String> map = new HashMap<String, String>();
map.put("book", "lord of the rings");
...

String book = map.get("book"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:31:44.063

试试这个：

```
 String[][] array;
    for (int i=0; i < array.length; i++)
        if (array[i][0].equals("book"))
            return array[i][1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:32:37.833

听起来您应该使用 a`HashMap`或 a `Multimap`（[在 Google 的 Guava 库中找到](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap)），具体取决于您要查找的每个输入的唯一值还是多个值。

我相信这对于您正在尝试做的事情来说是正确的数据结构，而且它在算法上比搜索数组更有效。

```
Map<String, String> m = new HashMap<String, String>();    
m.put("book", "lord of the rings");

String out = m.get("book"); // returns "lord of the rings" 
```

如果您在数组中获取输入，我会将数组的每一行都填充到映射中以进行更有效的查找：

```
for(String[] row : array)
    m.put(row[0], row[1]); 

String out = m.get("book"); // returns "lord of the rings" 
```

# php - 如果表2中没有结果，Mysql返回结果

> ID：14173791
> 
> 赞同：0
> 
> 时间：2013-01-05T16:27:54.007
> 
> 标签：php, mysql, null, return

假设我有这个 sql 行：

```
SELECT (something) 
FROM user_data, user_profile_image 
WHERE user_data.user_id='6' (AND user_profile_image.user_id='6') 
```

如果 user_profile_image 中没有包含与该用户相关的数据，我如何确保它从 user_data 字段返回信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:31:51.193

```
SELECT something
FROM user_data
LEFT JOIN user_profile_image
ON user_profile_image.user_id = user_data.user_id
WHERE user_data.user_id = '6'
AND user_profile_image.user_id IS NULL; 
```

You want to `LEFT JOIN` the detail page on the foreign key field being equal to the primary key field of the first table, and select the rows from the first table such that there IS no matching row from the second table.

In the query you gave, there's no join criteria, so it would be a Cartesian product - every row of `user_data` merged with every single row of `user_profile_image`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:31:37.780

您需要使用[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)

```
SELECT u.*,i.user_profile_image FROM user_data u LEFT JOIN `USER_PROFILE_IMAGE_TABLE` i ON i.user_id=u.user_id WHERE u.user_id='6' 
```

我不确定你的 USER_PROFILE_IMAGE_TABLE 是什么，所以你需要改变它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:31:10.820

尝试这个：

```
SELECT u.user_id, u.user_name, IFNULL(up.user_id, 'No Data In user_profile_image') UserId, 
       IFNULL(up.user_image_id, 'No Data In user_profile_image') user_image_id
FROM user_data u 
LEFT JOIN user_profile_image up ON u.user_id = up.user_id 
WHERE u.user_id = 6; 
```

检查此链接[**SQL FIDDLE DEMO**](http://www.sqlfiddle.com/#!2/67e21/1)

# php - wp_get_recent_posts 无法获取 wp-load.php 的路径

> ID：14173794
> 
> 赞同：0
> 
> 时间：2013-01-05T16:28:04.380
> 
> 标签：php, wordpress, path, relative-path

只是在一个站点上测试这个并且我认为路径有问题，（在另一个站点上很好）

我的功能在这里：domain.com/shop/library/smarty/plugins/function.recentposts.php

我的 Wordpress 安装：domain.com/wp/wp-load.php

函数文件中的路径：././././wp/wp-load.php

在我看来没问题

我只是在屏幕上调用未定义的函数错误。每个测试站点的唯一区别是路径以及在该站点上我在 /wp/ 中进行了安装但将站点设置为好像它位于根目录上的事实，可能是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:46:18.287

以下在位于的文件中对我有用`/root/path/test/test.php`：

```
define( 'WP_USE_THEMES', false );
require( $_SERVER['DOCUMENT_ROOT'] . '/wp/wp-load.php' );

$recent_posts = wp_get_recent_posts();
var_dump( $recent_posts ); 
```

请参阅：[如何获取 public_html 文件夹的绝对路径？](https://stackoverflow.com/q/6079479/1287812)

**WordPress StackExchange**上的相关问答：[获取 wp-config.php 目录路径的最佳方法是什么？](https://wordpress.stackexchange.com/q/38560/12615)

***有关如何不这样做**的相关博客文章：[wp-load.php – 我会找到你！](http://crappycode.wordpress.com/2012/12/13/wp-load-php-i-will-find-you/)*

# jquery - 在加载图像时显示加载 gif

> ID：14173798
> 
> 赞同：3
> 
> 时间：2013-01-05T16:28:34.823
> 
> 标签：jquery, loader

我有以下列表，当用户单击一个li时，我希望ul.list隐藏然后显示div.single，同时将img.data-img src设置为li的data-img ，但是在加载时，我想将 img src 设置为 li 元素内的 loader.gif。

```
<ul class="list">
<li data-id="7" data-thumb="http://test.com/assets/pdc/thumbs/66.png" data-img="http://test.com/assets/pdc/img/66.png" data-country="Australia" data-company="Big Farm" data-app="Tea" data-brand="Big Farm" data-package="500" class="product air-500 cat7">
    <img class="tip" data-country="Australia" data-brand="Big Farm" src="assets/img/ajax-loader.gif">
</li>
</ul>

<div class="single">
<img class="data-img" src="">
</div>

var preloader = $(this).find('.tip').attr('src');

$('.single aside img').attr('src', preloader);
$('.single aside img').attr('src', url).load(function () { 
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:39:17.563

很难判断图像何时加载；您可能只想预加载图像（使用`$("<img>").attr('src', src)`就足够了）。

您可以依靠`.load`，但根据我的经验，这不是 100%：

```
$("li").on('click', function () {
   var $this = $(this);
   //Show the throbber
   $this.find('.tip').show();

   //After image finishes loading, hide the `ul.list`
   $(".single .data-img").attr('src', $this.data-img).load(function () {
      $this.closest('.list').hide();    
   });
}); 
```

# java - 线程“主”java.lang.RuntimeException 中的异常：无法编译的源代码

> ID：14173800
> 
> 赞同：1
> 
> 时间：2013-01-05T16:28:36.613
> 
> 标签：java

如何在主类中调用非静态方法。示例控制台应用程序中出现以下错误

```
Exception in thread "main" java.lang.RuntimeException: Uncompilable source code - non-static method doSomthing() cannot be referenced from a static context
        at sample.Main.main(Main.java:20) 
```

代码是，

```
public class Main  {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
       doSomthing();
       System.out.print("From Main");
    }

    protected void doSomthing()
    {
        System.out.print("From Main doSomthing");
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T16:31:04.243

问题是您在 java 中不允许的静态方法中使用了非静态方法，请将 doSomthing() 更改为静态方法

```
protected static void doSomthing()
{
    System.out.print("From Main doSomthing");
} 
```

或者创建一个 Main 类的对象并调用它

```
 public static void main(String[] args) {
   Main myMain = new Main();
   myMain.doSomthing();
   System.out.print("From Main");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T16:31:44.930

您可以先从您的方法创建一个*实例：*`static` `main`

```
new Main().doSomthing(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T16:33:03.460

您不能在主类中调用**非静态**方法，除非您实例化一个 [主类]。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-05T16:34:32.340

```
public class Main  {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
       Main main = new Main();
       main.doSomthing();
       System.out.print("From Main");
    }

    protected void doSomthing()
    {
        System.out.print("From Main doSomthing");
    }
} 
```

# c# - 锁定.Net - 是引用锁定还是对象？

> ID：14173803
> 
> 赞同：8
> 
> 时间：2013-01-05T16:28:45.207
> 
> 标签：c#, .net, multithreading, locking

假设我有这个代码：

```
object o1 = new Object();
object o2 = o1; 
```

在 o1 上获得锁与在 o2 上获得锁相同吗？（如果 o1 被锁定，是否会锁定 o2 直到 o1 被释放？）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T16:38:32.133

如果它锁定了引​​用本身，那么锁定将毫无用处。问题是，引用本身是按值复制的，因此您总是会锁定一些立即被丢弃的临时副本。

所以这不是它的工作原理。锁定是在引用引用的实例上获得的，而不是引用本身。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-05T16:29:45.673

> 获得锁定`o1`与获得锁定相同`o2`吗？

是的。

它与称为[同步块](http://msdn.microsoft.com/en-us/magazine/cc188793.aspx)的东西一起工作，它是每个对象实例的一部分。但从功能上讲，您可以将其视为将对象用作字典中的键。

锁定引用与[锁定 Value type](https://stackoverflow.com/questions/8267323/why-cant-we-lock-on-a-value-type)相同，但问题相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T16:32:30.840

是的，因为锁定是在对象上，而不是在对象引用上。`o2 = o1`复制引用，而不是对象。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-05T16:32:20.230

是的，.NET 锁定引用（锁定值类型会导致错误）

# android - 异步期间的闪屏

> ID：14173807
> 
> 赞同：1
> 
> 时间：2013-01-05T16:29:31.027
> 
> 标签：android, android-asynctask, splash-screen

我有一个 android 应用程序，它在启动时会进行大量后台处理，因此为此我设置了一个带有不确定进度条的内容视图，然后在 async onprogressupdate 期间我设置了正在执行的操作的文本。我想在下面再次显示我自己的启动画面，并在其中显示当前操作。我已经研究过使用表面视图和线程 - 但是我不确定这是否是最好的方法。我计划显示一系列类似于启动动画的 pngs，该动画循环直到异步完成。

所以我的问题是：实现可运行的表面视图类是实现这一目标的最佳方法还是有更好的方法？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:39:26.427

我很确定我的答案，但我猜surfaceview 是这个任务更可靠的选择。如果您使用多个 PNG，那么您需要缓存它们以用于内存目的，这可能会给您的动画循环中的 invalidate 方法带来一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:41:25.317

你可以使用一个透明的活动作为你的启动屏幕，它可以让你在它显示的时候做几乎任何你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:31:15.900

最后选择了 AnimationDrawable，它易于使用且效果惊人。感谢 vmironov 的想法，不幸的是我不能接受评论作为答案:(

# javascript - 使用传单 API 更新标记位置

> ID：14173815
> 
> 赞同：38
> 
> 时间：2013-01-05T16:30:26.663
> 
> 标签：javascript, leaflet

我想使用 Leaflet API 构建 Web 应用程序。首先，我的用户使用 IP 进行地理定位，然后如果他接受，我尝试使用 HTML5 地理定位更新他的位置（准确性更好）。

我的问题是地图上的标记位置未更新，并且下面的代码失败且没有错误。我从[传单文档](http://leafletjs.com/reference.html)中尝试了数百种不同的语法和方法来更新标记位置（即 setLatLng），但我没有成功。我想了解我的代码有什么问题。

* * *

我的问题是这样解决的：

```
 var lat = (e.latlng.lat);
    var lng = (e.latlng.lng);
    var newLatLng = new L.LatLng(lat, lng);
    marker.setLatLng(newLatLng); 
```

旧代码是：

```
//initial IP based geolocation

var lat = google.loader.ClientLocation.latitude;
var lng = google.loader.ClientLocation.longitude;

//place marker on the map

var marker = L.marker([lat,lng]).addTo(map);

//start HTML5 geolocation 

map.locate({setView: true, maxZoom: 16});

function onLocationFound(e) {

    var marker = L.marker([e.latlng.lat,e.latlng.lng]).update(marker);
    alert ('New latitude is ' + e.latlng.lat)
}

map.on('locationfound', onLocationFound); 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-05T20:27:02.877

您问题中的代码有点令人困惑，当您只发布代码片段时，很难说出问题所在。

事实上，这段代码：

```
 var lat = (e.latlng.lat);
    var lng = (e.latlng.lng);
    var newLatLng = new L.LatLng(lat, lng);
    marker.setLatLng(newLatLng); 
```

..应该在内部按预期工作`onLocationFound()`。

你可以简化它：

```
marker.setLatLng(e.latlng); 
```

但是，我想问题是范围问题，您的某些变量（例如标记）在 onLocationFound 中无法访问。

这是一个如何实现它的示例：

```
function init(){
    var map             = L.map('map', {center: [51.505, -0.09], zoom: 13}),
        marker          = L.marker(map.getCenter()).addTo(map),
        glcl            = google.loader.ClientLocation,
        onLocationfound = function(e){
          marker.setLatLng(e.latlng);
          map.setView(marker.getLatLng(),map.getZoom()); 
          alert('Marker has been set to position :'+marker.getLatLng().toString());
        };

    L.tileLayer('http://{s}.tile.cloudmade.com/[yourCloudmadeKey]/997/256/{z}/{x}/{y}.png').addTo(map);

    map.on('locationfound', onLocationfound);

    if(glcl){//when google.loader.ClientLocation contains result
       onLocationfound({latlng:[glcl.latitude,glcl.longitude]});
    }else{alert('google.loader.ClientLocation fails');}

    map.locate();
} 
```

演示：http: [**//jsfiddle.net/doktormolle/6ftGz/**](http://jsfiddle.net/doktormolle/6ftGz/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-03-24T06:00:22.273

尝试标记方法的[update()](http://leafletjs.com/reference.html#marker-update)它对我有用

```
var lat = (e.latlng.lat);
var lng = (e.latlng.lng);
marker.setLatLng([lat, lng]).update();  // Updates your defined marker position 
```

# ios - 离线反向地理编码 iOS

> ID：14173817
> 
> 赞同：2
> 
> 时间：2013-01-05T16:30:32.443
> 
> 标签：ios, ruby

我是 Ruby 新手，我发现了这个[https://github.com/drodriguez/reversegeocoding](https://github.com/drodriguez/reversegeocoding)，我觉得这听起来很酷。所以我尝试了示例应用程序，安装了所有东西，但是当我打电话时

```
 thor geocoder:database 
```

我收到此错误：

```
/Users/xyz/.thor/f892c2a1d732c61bbf4ebff2abb70df6:194:in `initialize': wrong number of arguments(2 for 0) (ArgumentError) 
```

第 194 行显示

```
csv = FasterCSV.new(io, CSV_OPTIONS.merge(COUNTRIES_CSV_OPTIONS)) 
```

和整个方法

```
def insert_countries(db, countries)
ids = Hash.new
country_insert = db.prepare("INSERT INTO countries (name) VALUES (:name)")
open(countries, 'rb') do |io|
  io.rewind unless io.read(3) == "\xef\xbb\xbf" # Skip UTF-8 marker
  io.readline while io.read(1) == '#' # Skip comments at the start of the file
  io.seek(-1, IO::SEEK_CUR) # Unread the last character that wasn't '#'
  csv = FasterCSV.new(io, CSV_OPTIONS.merge(COUNTRIES_CSV_OPTIONS))
  csv.each do |row|
    country_insert.execute :name => row['country']
    ids[row['ISO']] = db.last_insert_row_id
  end
end
country_insert.close

ids
end 
```

我不知道如何解决这个问题，我希望有人可以帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:12:35.453

我找到了解决方案。问题是我的 Ruby 版本。由于 1.9.x FasterCSV 不再受支持，现在 CSV 在 Ruby 标准库中......请在此处查看参考[https://stackoverflow.com/a/6090840/749242](https://stackoverflow.com/a/6090840/749242)

# javascript - onclick 打开子菜单，点击关闭子菜单？

> ID：14173818
> 
> 赞同：1
> 
> 时间：2013-01-05T16:30:31.820
> 
> 标签：javascript, drop-down-menu, onclick, dom-events

在此页面[http://kimcolemanprojects.com/](http://kimcolemanprojects.com/)上，我需要一个下拉菜单，该菜单在单击时打开并在单击同一锚点时再次关闭。就像它在这个网站上工作一样[http://angela-moore.co.uk/](http://angela-moore.co.uk/)

到目前为止，这是我的菜单 html：

```
<div class="left" id="nav">
<ul id="menu">
<li id="light">
<a href="lighting_video.html">Lighting + Video</a>
   <ul style="display: none;">
     <li><a href="django_django.html">Django Django</a></li>
     <li><a href="suntrap.html">Suntrap</a></li>
  </ul>
</li>
<li id="photo">
<a href="photograms.html">Photograms</a>
</li>
<li id="about">
<a class="active" href="about.html">About</a>
</li></ul>
</div><!--end nav--> 
```

如您所见，我只需要它在一个列表项中工作。我需要帮助为此编写 Javascript。

因此，当在索引页面上，用户可以看到三个链接照明 + 视频、照片、关于。当用户点击照明 + 视频时，会在下方打开一个子菜单，其中包含更多链接。然后如果用户再次点击照明+视频，它将再次关闭。索引页面上最初的三个链接中的每一个都可能发生同样的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:05:20.567

非常简单..

```
<script src="jquery.js"></script>
<div id="navigation">
<p><a href="#" id="toggle">Menu</a></p>
<ul id="menu">

    <li><a href="/#" class="book-campaigns">Menu 1</a><ul>
        <li><a href="#"  class="lol">lol</a></li><li><a href="#"  class="lol">lol2</a></li><li><a href="#"  class="lol">lol</a></li><li><a href="#"  class="lol">lol2</a></li>
    </ul></li>

    <li><a href="/#" class="book-campaigns">Menu 2</a><ul>
        <li><a href="#"  class="lol">lol</a></li><li><a href="#"  class="lol">lol2</a></li><li><a href="#"  class="lol">lol</a></li><li><a href="#"  class="lol">lol2</a></li>
    </ul></li>

            <li><a href="/#" class="book-campaigns">Menu 3</a><ul>
        <li><a href="#"  class="lol">lol</a></li><li><a href="#"  class="lol">lol2</a></li><li><a href="#"  class="lol">lol</a></li><li><a href="#"  class="lol">lol2</a></li>
    </ul></li>

            <li><a href="/#" class="book-campaigns">Menu 4</a><ul>
        <li><a href="#"  class="lol">lol</a></li><li><a href="#"  class="lol">lol2</a></li><li><a href="#"  class="lol">lol</a></li><li><a href="#"  class="lol">lol2</a></li>
    </ul></li> 
```

这将是您的 HTML 容器等，在此之下您将需要您的 javascript 来控制隐藏和更改！如果你觉得艺术，你也可以添加一些造型！

```
<script>
var showMenuText = $('#toggle').text();
var hideMenuText = 'Close';

$('#navigation ul').hide();
$('#navigation ul a.active+ul').show();

hideMenu = function() {
    $('#navigation ul#menu').hide();
    $('#navigation').removeClass('open');
    $('#toggle').text(showMenuText);
}

$('#toggle').click(function(event){
    event.stopPropagation(); event.preventDefault();
    $('#navigation ul#menu').toggle();
    $('#navigation').toggleClass('open');
    var toggleText = $('#toggle').text();
    (toggleText == showMenuText) ? $(this).text(hideMenuText) : $(this).text(showMenuText);
});

$('ul#menu > li > a').click(function(event){
    $this = $(this);
    if( $this.hasClass('page') ) parent.location = $this.attr('href');
    if( $this.hasClass('home') ) { parent.location = '/'; }

    event.preventDefault(); event.stopPropagation();
    if( $this.hasClass('active') ) var justclosed = true;
    $('a.active').removeClass('active').next('ul').hide();
    if(!justclosed) $this.addClass('active').next('ul').show();
});

</script> 
```

这是一个简单的 HTML 示例，您可以按照自己喜欢的方式执行它。

# url-rewriting - 将子域重定向到 Wordpress 页面

> ID：14173819
> 
> 赞同：0
> 
> 时间：2013-01-05T16:25:15.690
> 
> 标签：url-rewriting

如何将所有子域重定向到 wordpress 页面？

喜欢;

**blog.example.com --> example.com/blog**

**x.example.com --> example.com/x**

**video.example.com --> example.com/video**

我找到了一些解决方案，但不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:30:27.873

搜索`HTTP_HOST`主主机名之前的字符并将其添加为请求 URI：

```
RewriteCond %{HTTP_HOST} ^(.+)\.example\.com$
RewriteRule ^ http://example.com/%1 [L,R=301] 
```

# firefox - Firefox 17 CSS 问题：忽略文本缩进？

> ID：14173821
> 
> 赞同：1
> 
> 时间：2013-01-05T16:30:47.327
> 
> 标签：firefox

当 Firefox 更新到 17 版时，我的几个网站的格式有点疯狂。这在第 16 版或之前的任何版本中都不是问题，我无法完全弄清楚问题出在哪里。这些站点在所有版本的 IE (7+) 和 Chrome 以及 Firefox 16 或更早版本中都能正确显示。

[http://seamlyne.com](http://seamlyne.com)（服装）

[http://conklincars.com](http://conklincars.com)（汽车）

和 conklincarshutchinson.com（汽车 - 这里的问题更严重，可能只是因为有更多的东西。）

似乎背景位置和文本缩进在版本中被忽略了。17\. 有什么帮助或建议吗？

*   比尔在 KC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:31:55.657

该页面（seamlyne.com 是我查看的唯一一个）使用无效`-9999`的文本缩进值。根据规范， text-indent 需要一个长度，而不是一个数字，所以它应该是`-9999px`.

现在页面处于 quirks 模式，Gecko 过去*在*quirks 模式下接受所有属性的无单位长度（默认单位为像素）。但是在 Firefox 17 中改变了这一点，以遵循提议的 CSS3 语法规范，该规范实际上定义了 CSS 解析的怪癖，并且该规范没有文本缩进（或背景位置，以防在此页面上很重要）的这种怪癖。请参阅[https://bugzilla.mozilla.org/show_bug.cgi?id=774122](https://bugzilla.mozilla.org/show_bug.cgi?id=774122)和[http://dev.w3.org/csswg/css3-syntax/#unitless-length-quirk-list](http://dev.w3.org/csswg/css3-syntax/#unitless-length-quirk-list)（截至今天，至少）。

# java - 在 JAVA 中向 2D 短数组元素添加一个短路会导致错误

> ID：14173822
> 
> 赞同：2
> 
> 时间：2013-01-05T16:30:54.583
> 
> 标签：java

下面的代码给出了以下错误：

错误：C:\Users\Laptop\algs4\hello\Main.java:8: 可能丢失精度

发现：int

要求：短

```
import java.util.* ; 
import java.math.* ; 
import java.io.* ; 
public class Main{
    public static void main(String[] args){
        short[][] arr = new short[1][2]; 
        short val = 9 ; 
        arr[0][0] = arr[0][0] + val ; 
    }
} 
```

但以下没有错误。

```
import java.util.* ; 
import java.math.* ; 
import java.io.* ; 
public class Main{
    public static void main(String[] args){
        short[][] arr = new short[1][2]; 
        short val = 9 ; 
        arr[0][0] += val ; 
    }
} 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:32:11.413

try `arr[0][0] = (short)(arr[0][0] + val);`

with

```
arr[0][0] += val ; 
```

the compiler makes the casting for you

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T16:33:13.060

In the following:

```
 arr[0][0] = arr[0][0] + val ; 
```

both arguments are first promoted to `int`, the addition is carried out, and the result is implicitly narrowed to `short`. This could cause loss of precision, hence the error.

The second version:

```
 arr[0][0] += val ; 
```

is [defined by the Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2) to be equivalent to

```
 arr[0][0] = (short)((int)arr[0][0] + (int)val); 
```

In other words, this behaves as if there was an explicit cast, hence no error.

You can achieve the same effect in the first version by adding an explicit cast:

```
arr[0][0] = (short)(arr[0][0] + val); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T16:35:10.980

```
import java.util.* ; 
import java.math.* ; 
import java.io.* ; 
public class timous{
    public static void main(String[] args){
        short[][] arr = new short[1][2]; 
        short val = 9 ; 
        arr[0][0] = (short)(arr[0][0] + val) ; 
    }
} 
```

This code is not giving any errors. :)

# django - 登录后重定向不起作用

> ID：14173828
> 
> 赞同：2
> 
> 时间：2013-01-05T16:31:28.573
> 
> 标签：django, django-registration

我一直在寻找，但无法弄清楚为什么登录后的重定向没有按预期工作。

我成功登录`http://localhost:8000/accounts/login/`。之后，`http://localhost:8000`无论我使用 settings.py 变量`LOGIN_REDIRECT_URL`还是完全忽略它，我总是被重定向到。

```
# urls.py
from django.conf.urls import patterns, include, url
from django.conf import settings
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    (r'^grappelli/', include('grappelli.urls')),
    url(r'^$', 'myapp.views.home', name='home'),
    url(r'^home/$', 'myapp.views.apphome', name='apphome'),
    url(r'^admin/', include(admin.site.urls)),
    (r'^accounts/', include('registration.backends.default.urls')),    
    (r'^admin/', include("massadmin.urls")),
) 
```

我不知道我应该从哪里开始寻找问题。有任何想法吗？我在这里缺少一些设置吗？我应该包含任何其他文件来帮助调试问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T21:05:58.427

检查您的表单操作！（很高兴我能帮上忙 ：） ）

# javascript - 返回未定义变量的函数

> ID：14173829
> 
> 赞同：0
> 
> 时间：2013-01-05T16:31:30.153
> 
> 标签：javascript, jquery

我有一个简单的函数来计算数据库中的行数并返回结果。但是，我得到的结果返回为未定义，即使我 console.log 的结果是从函数中正确出现的。这是我正在做的事情的要点，尽管我已经删除了很多代码来简化它。

```
$('#roomsList').append(getCount(currentRow.roomtype));

function getCount(roomtype) {
var query = "SELECT COUNT(*) FROM fixturesfittings WHERE roomtype = ?;"
localDatabase.transaction(function (trxn) {
    trxn.executeSql(query, [propertyid,roomtype],function (transaction, results) {
       return results.rows.item(0)["COUNT(*)"];
    },errorHandler);
});
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:38:05.223

问题是`localDataBase.transaction`并且`exequteSql`是异步函数。他们不会马上得到答案，这就是你将函数传递给他们的原因。一旦他们得到答案，他们就会调用您的函数，称为回调。这将在执行周期的稍后时间发生，在`getCount`很久之后。

所以`getCount`调用`localDatabase.transaction`，它开始工作但没有立即可用的任何东西，所以`getCount`在数据可用之前完成，所以`getCount`返回 undefined（JavaScript 函数中的默认返回值）。

您可能需要将代码重新编写为以下内容：

```
getCount(function(count) {
    $('#roomsList').append(count);
});

function getCount(callback) {
    var query = '...';
    localDatabase.transaction(function(trxn) {
        trxn.exequteSql(query, ...  function(transaction, results) {
            callback(results);
        });
    }
} 
```

这是一种非常常见的 JavaScript 模式，它有很多陷阱和奇怪之处。这需要一些时间来适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:41:33.070

你正在做的事情有两个同样严重的问题：

1.  您的*外部*函数不返回任何内容。代码中唯一的`return`语句是从传递给的*内部*`localDatabase.transaction`函数返回。

    像这样的东西：

    ```
    function myFunction
      inner_function = function () {
        return 3; # Return from inner function, *not* myFunction
      }
    } 
    ```

2.  即使您试图将内部函数*中*的值传递给外部函数，然后从外部函数返回，它仍然不起作用；内部函数被异步调用。在完成执行并返回很久之后，该内部`return results...`将在将来的某个时间点被调用。您需要将某种形式的回调传递给; 稍后将调用回调并传递计数。这样想：`getCount``undefined``getCount`

    ```
    function myFunc(callback) {

      function inner_function = function(callback) {
        // Invoke our callback sometime in the future
        setTimeout(1000, callback);
      }

      // Inner function does some processing at some future time;
      // give it a callback to invoke when its processing is done
      inner_function(callback);
    } 
    ```

# magento - 如何翻译 Magento 扩展？

> ID：14173830
> 
> 赞同：0
> 
> 时间：2013-01-05T16:31:32.977
> 
> 标签：magento

翻译 Magento 扩展的最佳方式是什么？

我需要翻译这个扩展： http: [//www.magestore.com/magento-auction-extension.html](http://www.magestore.com/magento-auction-extension.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:01:44.893

如果模块正确配置了翻译文件（*应该*是），则可以为您的语言区域创建翻译。事实上，许多供应商都会提供语言包。如果没有，请在*app/code/community/Magestore/Auction/etc/config.xml*中搜索字符串“.csv”；如果列出，请在*app/locale/en_US/*下找到这些文件。如果您要为德国翻译成德语，您可以将此文件复制到*app/locale/de_DE/*并更改每行的第二个字符串（用逗号分隔，用双引号括起来）。

还有其他翻译机制。如果您只需要翻译几个文本实例，请确保它们是通过翻译机制呈现的（例如，在它们通过该`__()`方法传递的 PHP 处理文件中）。然后可以将这些聚合在您自定义主题的*语言环境文件夹中的**translate.csv*中，该文件夹位于语言环境设置文件夹下（例如 de_DE）。

# php - PHP Redefine a closure with bind() and its scope

> ID：14173839
> 
> 赞同：2
> 
> 时间：2013-01-05T16:31:54.337
> 
> 标签：php, closures, anonymous-function

> **Possible Duplicate:**
> [Use variables inside an anonymous function, which is defined somewhere else](https://stackoverflow.com/questions/14138908/use-variables-inside-an-anonymous-function-which-is-defined-somewhere-else)

In PHP >= 5.4 we have a `Closure` class with the `bind` or `bindTo` methods to *bind* an anonymous function to an object, so that the closure has access to the `$this` variable, as if it was defined inside that class.

A simple example:

```
<?php
$closure = function() {
    echo $this->bla; //prints "bbb"
};

class A
{
    public $bla = 'bbb';
    public function blaat($closure)
    {
        $someVar = 'something';

        $bc = Closure::bind($closure, $this, 'A');
        $bc();
    }
}

$a = new A();
$a->blaat($closure); 
```

That is all very nice and all, but what about the `use` keyword..?

When i *rebind* a closure inside the method of a class, then i probably want the `closure` to have access to the "locally" defined variables aswell, so its parent scope. For example the `$someVar` variable in the above example. But the `bind` method of the `Closure` class doesn't care about the `use` keywords or the abillity to use variables from the parent scope.

It feels somewhat incomplete this way... Anyone any idea if this ever gets supported, or perhaps if there is already a way to use the parent scoped variables when redefining a `closure` with the `bind` or `bindTo` method?

# python - __init__ 中声明的变量似乎在类实例之间共享？

> ID：14173840
> 
> 赞同：1
> 
> 时间：2013-01-05T16:31:55.867
> 
> 标签：python, class, shared, init

我写了这段代码，但我无法弄清楚我到底做错了什么。我创建了“Route”类的两个实例，它们以某种方式共享“coords”列表的值。

```
import random

class Route():
    def __init__(self):
        self.coords = []  
        self.distance = 0
    def Generate(self, cities):
        random.shuffle(cities)
        self.coords = cities

class Citymap():
    def __init__(self, nr):
        self.Nr_of_cities = nr
        self.cities = []
    def Generate_map(self):
        for i in range(0, self.Nr_of_cities):
            self.cities.append((random.randint(0, 750), random.randint(0, 750)))

city = Citymap(6)
city.Generate_map()

a = Route()
a.Generate(city.cities)

b = Route()
b.Generate(city.cities)

print a.coords
print b.coords 
```

a和b的输出：

```
[(429, 713), (336, 611), (555, 465), (397, 227), (222, 412), (491, 322)]
[(429, 713), (336, 611), (555, 465), (397, 227), (222, 412), (491, 322)] 
```

a 和 b 应该是不同的实例，但不知何故，它们最终共享了“坐标”变量。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:42:46.910

问题不在于构造函数，而在于`Generate`函数。更改它以制作副本：

```
def Generate(self, cities):
    self.coords[:] = cities      # <<< note the [:]
    random.shuffle(self.coords) 
```

否则，它不仅会改变传递给它的列表，还会保留对列表的引用`self.coords`，从而导致您描述的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:50:38.097

这很微妙，但是您正在分配城市数组并复制城市数组的地址。所以你没有传递`city.cities`到`Generate`，你传递的是实际的数组本身，然后它在`Generate`函数的最后一行被分配。

您可以通过以下方式看到这一点：

```
print id(a.coords)
print id(b.coords) 
```

我能够让它按预期工作，如下所示：

```
import random
from copy import copy

class Route():
    def __init__(self):
        self.coords = []  
        self.distance = 0
    def Generate(self, cities):
        random.shuffle(cities)
        self.coords = cities

class Citymap():
    def __init__(self, nr):
        self.Nr_of_cities = nr
        self.cities = []
    def Generate_map(self):
        for i in range(0, self.Nr_of_cities):
            self.cities.append((random.randint(0, 750), random.randint(0, 750)))

city = Citymap(6)
city.Generate_map()

a = Route()
a.Generate(copy(city.cities))

b = Route()
b.Generate((city.cities))
print a.coords
print b.coords
print a
print b
print id(a.coords)
print id(b.coords) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:39:42.007

您必须克隆`city.cities`列表，否则它将在它们之间共享：

```
a = Route()
a.Generate(city.cities[:])

b = Route()
b.Generate(city.cities[:]) 
```

# python - python pygame物理矩形-圆碰撞

> ID：14173842
> 
> 赞同：0
> 
> 时间：2013-01-05T16:32:04.397
> 
> 标签：python, pygame, physics

这个问题再次出现在 PyParticles4 上。
[链接到最后一个问题以供参考](https://stackoverflow.com/questions/14137475/python-ball-physics-simulation)

如果不清楚请评论...

我正在开发一个射击游戏，很像[这样](http://www.gamenet.com/game/Shooting-Games-Avalon-Siege/)，但是在平坦的土地上，墙壁每转一圈都会改变它的高度（游戏中的一些有趣的东西）并且有 2 个玩家，每个玩家都有一个可以移动一段距离的大炮（有一个限制，他们不能从他们的起始位置移动超过一定的量）在每轮（玩家决定他是否想移动）。

到目前为止我的代码（用于子弹和射手）

```
class Bullet(PyParticles.Particle):
    def hit(self,shooterlist):
        for shoot in shooterlist:
            #confusion
            dist = math.hypot(dx,dy)
    # other funcs to added
class Shooter:
    def __init__(self,pos,size):
        self.rect = pygame.Rect(pos,size)
    # other funcs to added 
```

## 我的问题

子弹与射手的碰撞。关于如何知道子弹何时与矩形碰撞的任何想法？
有人建议我查看矩形边缘的所有点，看看它是否在圆圈内，但它似乎很慢。
我认为更快的东西会更好..
..
..
**更新：**
圆圈周围可以有一个矩形，如果与矩形碰撞，我现在知道矩形何时靠近圆圈，甚至可能触摸它.. 如何我要继续前进吗？？（感谢 PygameNerd）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:58:03.733

我不确定您的问题是什么意思，但我认为您需要该`colliderect`功能。

```
rect.colliderect(rect): Return bool 
```

把它放在代码中的某个地方，如果它返回真，让球爆炸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:26:05.247

您可以在每次`colliderect`返回 true 时运行另一个测试。该测试的内容有几个选项。一个类似于您已经收到的建议，但改变了墙和圈。检查圆圆周上的点，看看其中一个点是否与墙壁碰撞[`Rect.collidepoint`](http://www.pygame.org/docs/ref/rect.html#Rect.collidepoint)。[`Mask`](http://www.pygame.org/docs/ref/mask.html)在 pygame 中，您可以通过从圆形表面创建 a 并运行来获取圆周点列表[`Mask.outline`](http://www.pygame.org/docs/ref/mask.html#Mask.outline)。你可能不需要每一分，所以你可以只得到第 N 分。事实上，您可能只需要圆的矩形边缘的中点，您可以从`Rect`对象本身获得。

您要求精确碰撞，这将为您提供圆形和矩形之间的像素完美碰撞检测。不过，您的游戏中可能不需要它，所以我建议`colliderect`先尝试一下。如果您一般对 pygame 中的碰撞检测感兴趣，有很多选项直接在`Mask`和`Sprite`文档中描述的函数中实现或基于函数实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:09:10.263

您可以将 Rect.collidepoint 与圆心一起使用，但使 rect 更大

```
collide_rect = Rect(x - p.radius,y - p.radius,w + 2 * p.radius,h + 2 * p.radius)
if collide_rect.collide_point(p.pos):
    # Collision Resolution 
```

# winforms - Bring graphics to front F#

> ID：14173843
> 
> 赞同：0
> 
> 时间：2013-01-05T16:32:09.260
> 
> 标签：winforms, f#

I'm doing a project in which you should be able to create shapes in a windows forms environment. I've got two different shapes at the moment, called Circle1 and Rectangle1, they are just what they are called an have similiar properties.

```
type Rectangle1(x:int, y:int,brush1)=
  let mutable thisx = x
  let mutable thisy = y
  let mutable thiswidth = 50
  let mutable thisheight = 20
  let mutable brush = brush1
  member obj.x with get () = thisx and set x = thisx <- x
  member oby.y with get () = thisy and set y = thisy <- y
  member obj.brush1 with get () = brush and set brush1 = brush <- brush1
  member obj.width with get () = thiswidth and set width = thiswidth <- width
  member obj.height with get () = thisheight and set height = thisheight <- height
  member obj.draw(g:Graphics) = g.FillRectangle(brush,thisx,thisy,thiswidth,thisheight) 
```

This rectangle is clickable and moveable, but I've encountered a problem. I need some kind of method that is similar to the c# bringToFront() method. So that when I click a shape, my shape goes to the front of all other shapes.

My storage list looks like this:

```
let mutable RectangleList:List<Rectangle1> =  [] 
```

And i use a hittest to determine whether the user hit a shape or not:

```
let rec VilketObjRec (e:MouseEventArgs) (inputlist:List<Rectangle1>) = 
match inputlist with
     |[] -> None
     |head::tail -> if (((e.X >= head.x) && (e.X <= (head.x + head.width))) && (e.Y >= head.y) && (e.Y <= (head.y+head.height))) 
                       then Some(head) else VilketObjRec e tail 
```

Anyone got any kind of idea how to tackle this problem? Cause frankly, I'm lost.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T22:17:32.803

根据命中测试功能，您`RectangleList`存储矩形的顺序似乎与它们在屏幕上出现的顺序相反（开始时的矩形首先被命中测试，因此它将是顶部的那个绘画）。

在这种情况下，如果你想把一个矩形放到顶部，你只需要把它移到列表的开头。您可以在开头创建一个具有指定值的新列表，然后使用以下命令从列表的其余部分中删除该值`filter`：

```
let BringToFront value list = 
  value :: (List.filter (fun v -> v <> value) list) 
```

该函数仅适用于列表，因此这里是一个使用整数的示例：

```
BringToFront 3 [ 1;2;3;4 ] = [3;1;2;4] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T16:15:48.603

Wmeyer 和 Tomas 的答案很好地满足了您对相对较小的矩形集的要求。如果您将使用 10^3 或更多的矩形，并且您在 GUI 启动之前知道它们的坐标，则有简单的静态结构，请[在此处输入链接描述](http://en.wikipedia.org/wiki/Segment_tree "Bentley 的线段树")。在更复杂的情况下，Hanan Samet 的“空间数据结构的设计与分析”的第 3 章是你最好的朋友。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T19:49:27.977

基本思想：你可以`z`给类添加一个坐标`Rectangle1`。当一个矩形被击中时，确保它获得最高`z`值。在绘制矩形之前，请确保它们按升序排序`z`。

# d3.js - topojson 安装疑难解答

> ID：14173853
> 
> 赞同：3
> 
> 时间：2013-01-05T16:32:44.380
> 
> 标签：d3.js, shapefile

我是新手，基本上对我在做什么一无所知。（仅供参考，我正在学习本教程： [http](http://bost.ocks.org/mike/map/) ://bost.ocks.org/mike/map/ ）

我正在尝试让 topojson 工作。我已经成功安装了自制软件和节点。我也完成了“npm install -g topojson”部分。

然后，在那之后，当我尝试输入“which ogr2ogr”等时——只是，没有任何反应。他说如果无法编辑路径变量环境。我对这意味着什么只有一个模糊的概念，并且不确定这是否是我的问题。

让我知道您还需要什么其他信息。我真的只想做一张地图。全局安装似乎确实有效。我只是不知道从这里做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T15:40:00.470

您链接到的教程是一个很好的起点。我希望在尝试自己解决所有问题之前看到它。:)

据我了解，您可能错过了安装`gdal`. 如果您看到其他错误，请将它们发布在您的问题中。

您可以通过运行 ogr2ogr 工作：

```
brew install gdal 
```

* * *

这里有一些背景信息，以便您更好地了解那里发生的事情。

`topojson`并且`ogr2ogr`是两个不同的实用程序。`ogr2ogr`是[`gdal`](http://www.gdal.org/)包的一部分，在我们的例子中用于从 shapefile 生成 GeoJSON。

> GDAL 是一个栅格地理空间数据格式的翻译库，由开源地理空间基金会在 X/MIT 风格的开源许可下发布。作为一个库，它为所有支持的格式向调用应用程序提供一个单一的抽象数据模型。它还带有各种有用的命令行实用程序，用于数据转换和处理。

TopoJSON 用于压缩来自先前 GDAL 转换的相当大的 GeoJSON 输出。它通过指定带有弧线而不是离散点的路径来减少冗余。它非常整洁，实际上：

> TopoJSON 是对拓扑进行编码的 GeoJSON 的扩展。TopoJSON 文件中的几何不是离散地表示几何，而是从称为弧的共享线段缝合在一起。TopoJSON 消除了冗余，提供比 GeoJSON 更紧凑的几何表示；典型的 TopoJSON 文件比对应的 GeoJSON 文件小 80%。此外，TopoJSON 促进了使用拓扑的应用程序，例如保留拓扑的形状简化、自动地图着色和制图。

这两个步骤（*shapefile -> GeoJSON -> TopoJSON*）的输出将是一个 JSON 字符串，它很容易被 JavaScript 解释。您需要在绘图代码中使用 topojson 转换回 GeoJSON 以实际绘制地图。

> 回想一下前面提到的两种密切相关的 JSON 地理数据格式：GeoJSON 和 TopoJSON。虽然我们的数据可以更有效地存储在 TopoJSON 中，但我们必须转换回 GeoJSON 才能显示。打破这一步使其明确：
> 
> `var subunits = topojson.object(uk, uk.objects.subunits);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T01:24:06.993

对于ubuntu，我用这种方式来拥有ogr2ogr

```
sudo apt-get install gdal-bin 
```

# css - 放置在 CSS 网格中时，Windows 8 ListView 控件不显示

> ID：14173854
> 
> 赞同：0
> 
> 时间：2013-01-05T16:32:44.163
> 
> 标签：css, windows-8, microsoft-metro, windows-runtime, winjs

我正在关注用于 Windows 8 应用程序开发的 Microsoft 教程“快速入门：添加 ListView”（由于防止垃圾邮件而无法发布链接），并且我试图以 ListView 格式简单地显示我的数组中的原始数据。我稍微修改了本教程，以便我使用 CSS Grids 来构建页面（我相信微软建议这样做）。我遇到的问题是，当 ListView 位于网格之外时，它会完美地显示和显示，但是当位于 CSS 网格内时，不会显示在我的应用程序中。我对 CSS 网格和新的 Windows 8 平台的知识非常有限，所以我确信这是我犯的一个简单错误。下面是我的 CSS 和 HTML 代码，所有的 Javascript 都应该与微软教程中使用的相同......

[http://pastebin.com/cgV5PHnf](http://pastebin.com/cgV5PHnf) - HTML

[http://pastebin.com/HvVPuhkG](http://pastebin.com/HvVPuhkG) - CSS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:16:08.163

使用您的 HTML 和 CSS，逐字逐句地显示数据对我来说很好。这是我的 tempData.js：

```
(function () {
    "use strict";

    var items = new WinJS.Binding.List();
    items.push({ value1: "foo", value2: "bar" });
    items.push({ value1: "foo2", value2: "bar2" });

    WinJS.Namespace.define("TempData", {
        itemList: items.dataSource
    });
})(); 
```

请注意，我包含`dataSource`在 的定义中`itemList`，因为您`data-win-options`没有包含它（[快速入门](http://msdn.microsoft.com/en-us/library/windows/apps/hh465496.aspx)将其拉入属性）。如果没有它，虽然你会得到一个非常明显的异常，所以怀疑你在`TempData`定义中做了同样的事情。

您可以尝试的一件事是Visual Studio 中的[DOM Explorer](http://msdn.microsoft.com/en-us/library/windows/apps/hh441474#InteractiveDebugging)，或者在 Blend 中打开应用程序并使用[交互模式](http://msdn.microsoft.com/en-us/library/windows/apps/jj129413.aspx)查看是否存在某种意外的 CSS 类覆盖。

# c# - Type.GetMethod alternative for TypeBuilder

> ID：14173863
> 
> 赞同：9
> 
> 时间：2013-01-05T16:33:25.677
> 
> 标签：c#, .net, reflection.emit, getmethod, typebuilder

I'm making a .NET-compliant compiler using `Reflection.Emit`. The problem is, that although `TypeBuilder` is derived from `Type`, it does not let me use all the handy methods that Type provides.

The matters that really concern me are:

1.  Is there any way to get a list of methods, fields, properties, constructors etc. defined in a `TypeBuilder`, or I really have to make a `TypeBuilderWrapper` that keeps track of all those entities by myself? It has to store them somewhere inside, so there must be some way to extract them?

2.  The `GetMethod` method is very handy, because it can find the best fitting method override taking inheritance and generic covariance into account. Do I really have to reimplement it myself for the `TypeBuilderWrapper`?

The same issue probably applies to `MethodBuilder`, `FieldBuilder` etc. which, I believe, do not implement the lookup methods of `MethodInfo` and `FieldInfo` respectively.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T07:36:17.220

`TypeBuilder`, `MethodBuilder`, 等是`Type`, `MethodInfo`, 但他们没有所有的能力`Type`,`MethodInfo`直到你打电话`TypeBuilder.CreateType()`。原因`TypeBuilder`是`Type`它允许你在构建类的`A`同时`B`，你可以在两个方向上引用它们而无需完成它们。让我举个例子：

```
// sample.x
class A {
    void method1(B b) {}
}

class B {
    void method2(A a) {}
} 
```

所以生成类的 C# 代码`A`是`B`：

```
// ...
// define classes
TypeBuilder classA = moduleBuilder.DefineType("A");
TypeBuilder classB = moduleBuilder.DefineType("B");

// define class A's methods
MethodBuilder method1 = classA.defineMethod("method1", MethodAttributes.Public);
method1.SetParameters(classB);
// ... build method body

// define class B's methods
MethodBuilder method2 = classB.defineMethod("method2", MethodAttributes.Public);
method1.SetParameters(classA);
// ... build method body

// finish classes
classA.CreateType();
classB.CreateType();
// this time you can use GetMethod but you can not modify classes any more. 
```

`TypeBuilder`回答您的问题，在您致电之前无法获取方法、属性等的列表`CreateType`。但是你应该记住这些方法，属性是由你的代码创建的，所以你应该知道它们。如果你想创建一些类`TypeBuilderWrapper`，这是你的选择。但在我看来，你应该这样做：

*   为您的 X 语言编写您自己的模型（`XClass`、、、`XMethod`等）。`XParam`
*   将您`XParser`的 X 文件解析为语言模型对象。
*   对创建的模型进行一些分析以创建模型之间的链接。例如：在`sample.x`上面，在`B.method2`，参数`A a`应该有一个链接到`class A`模型。
*   用于`Reflection.Emit`创建目标程序集。记住顺序是：定义类，定义类的方法，定义类方法的主体等。然后调用`CreateType`完成然后全部。可以更改的顺序取决于您的语言设计。

这些都是我的想法，代码可能不起作用。当我创建我的简单愚蠢的语言时，我创建了类似的东西。希望我能帮助你。

# javascript - 手动隐藏启动图像在物理设备上不起作用

> ID：14173872
> 
> 赞同：1
> 
> 时间：2013-01-05T16:34:52.473
> 
> 标签：javascript, ios6, trigger.io

当我在 Android 模拟器或 Nexus 手机中运行 trigger.io 应用程序时，启动图像被手动（通过代码）正确隐藏。当我使用 iOS 模拟器运行应用程序时，启动图像会被隐藏。但是，当我直接调试到我的 iOS 设备或包（然后通过 iTunes 复制）一个 dev .ipa 文件...并启动应用程序...它只是挂在启动图像。它永远不会消失。并且没有任何内容被注销到控制台（或 forge-error.log）。

我的 config.json 文件如下所示：

```
 "launchimage": {
        "ipad": "launch/768x1004.png", 
        "android-landscape": "launch/1024x748.png", 
        "iphone-retina": "launch/640x960.png", 
        "iphone-retina4": "launch/640x1136.png",
        "iphone": "launch/320x480.png", 
        "android": "launch/640x960.png", 
        "ipad-landscape": "launch/1024x748.png",
        "ipad-retina": "launch/1536x2008.png",
    "ipad-landscape-retina": "launch/2048x1496.png",
        "hide-manually": true,
        "background-color": "#A6A6A6"
    } 
```

这是我根据最新[文档](http://docs.trigger.io/en/v1.4/modules/launchimage.html)隐藏启动图像的方式-

```
 forge.launchimage.hide(function(content) {
        // Success.
        alert("do the happy dance, it works");
    }, function(err) {
        // Error.
        alert("error");
    }); 
```

请指教。还有其他人有问题吗？我的设备运行的是 iOS 6.0.1。谢谢阅读。

绝对与这个问题有关 - [trigger.io 在 iOS 的启动画面上挂起](https://stackoverflow.com/questions/13593928/trigger-io-hangs-on-splash-screen-in-ios?rq=1)

更新：我的设备是 3GS。关于如何调试的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:21:04.063

v1.4.36 发行说明 - [http://docs.trigger.io/en/v1.4/release-notes.html](http://docs.trigger.io/en/v1.4/release-notes.html)解决了这个问题（并已修复）。

> 在某些情况下，在现有安装之上重新安装 iOS IPA 会导致 launchimage 挂起

# java - Mapping root in web.xml [weblogic]

> ID：14173874
> 
> 赞同：2
> 
> 时间：2013-01-05T16:35:01.543
> 
> 标签：java, mapping, weblogic, web.xml

Hi I have a context and i have a mapping problem with this context. When I put this to my web.xml

```
<welcome-file-list>
  <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

I can only access like this.

> [http://domain.com/sub-context/](http://domain.com/sub-context/)

but I wanna access like this

> [http://domain.com/sub-context](http://domain.com/sub-context)

what should I do?

Edit: I saw that when i hit for [http://domain.com/sub-context](http://domain.com/sub-context) in browser it redirects me to [http://domain.com/sub-context/](http://domain.com/sub-context/) although i havent do anything special for that. Who is doing this. Weblogic?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:49:30.027

这是一种方法：

```
 <filter-mapping>
    <filter-name>RedirectFilter</filter-name>
    <url-pattern>/sub-context</url-pattern>
  </filter-mapping> 
```

然后在重定向过滤器中：

```
 public void doFilter(ServletRequest req, ServletResponse resp, FilterChain filterChain)
  throws IOException, ServletException {
    HttpServletRequest request = (HttpServletRequest)req;
    HttpServletResponse response = (HttpServletResponse)resp;
    response.setStatus(HttpServletResponse.SC_MOVED_PERMANENTLY);
    String redirectURL = "http://domain.com/sub-context/";
    response.setHeader("Location", redirectURL);
  } 
```

改编自此处：[通过 google-app-engine 中的 web.xml 重定向](https://stackoverflow.com/questions/13563455/redirect-through-web-xml-in-google-app-engine)

# iphone - Iphone application using webview

> ID：14173878
> 
> 赞同：0
> 
> 时间：2013-01-05T16:35:11.687
> 
> 标签：iphone, app-store

I've created a web application using asp.net. I customized it form mobile(jQuery Mobile) . I created an iphone application that has a web view that shows the website.

Is this will be applied by Apple to publish this application???

Regards, Moayyad

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:46:16.540

如果应用程序的**唯一目的**是显示网站的 web 视图，并且它**完全不做任何其他事情，**那么它*很可能会*被拒绝。但是，如果显示网站只是其功能的一小部分，并且它还可以做一些其他有用的事情，那么据我所知，使用 webview 来显示您自己的网站是可以的。

但是请注意，我/我们只能做出假设和猜测。**除了 Apple 之外，没有人知道您的应用程序究竟会发生什么**——在很多情况下，一个应用程序因另一个*已批准*应用程序所具有的功能而被拒绝，因此 Apple 的 AppStore 批准政策存在不一致之处。**不要期待什么。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:45:01.283

我不这么认为。他们更喜欢在 webapp 中使用 HTML5。尝试查看 Apple 构建 Web 应用程序的指南。

# django - Django: How to avoid reassigning ForeignKey on every save?

> ID：14173879
> 
> 赞同：0
> 
> 时间：2013-01-05T16:35:13.087
> 
> 标签：django, django-database

I want to save the `A` object and `B` object. `A` has a foreignkey to `B`. `B` has a OneToOneField to `A`. Is there a way I can get around having to reassign the variables between each save? or perhaps there's a better way to do it?

```
# The models a and b were created earlier in code
# a.b = b  Was already set earlier in code
# b.a = a  Was already set earlier in code
with transaction.commit_on_success():
    a.save() # pk created for a
    b.a = a  # attach a.pk to b
    b.save() # pk created for b
    a.b = b  # attach b.pk to a
    a.save() # re-save a to database 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:04:59.143

“A 有一个到 B 的外键。B 有一个到 A 的 OneToOneField。” 我不认为这是建立你们关系的方式。您可以将 B 设置为 A 的 ForeignKey，然后您可以使用 B.a_set.all() 从 B 访问 A。

从[这里](http://www.djangobook.com/en/2.0/chapter10.html)解释一下，使用以下模型定义，Book 与 Publisher 是一对多（ForeignKey），与 Author 是多对多。（~~~~只是表示与模型之间关系无关的其他东西）

```
class Publisher(~~~~):
    ~~~~

class Author(~~~~):
    ~~~~

class Book(~~~~):
    publisher = models.ForeignKey(Publisher)
    authors = models.ManyToManyField(Author) 
```

然后你可以从给定的书中访问出版商和作者，如下所示：

```
b = Book.objects.get(id=50)
publisher1 = b.publisher # publisher object for a given book
author_set = b.authors.all() # query set of authors for a given book 
```

你可以做相反的关系（在上面的模型中没有明确定义）。

```
p = Publisher.objects.get(name='Apress Publishing')
p.book_set.all() # query set of books for a given publisher
publisher1.book_set.all() # set of books for the publisher from above.
a = Author.objects.get(name="JK Rowling")
a.book_set.all() # query set of books for a given author 
```

每当您更新对象字段时，您需要调用`save()`以将其保存在数据库中，但在此之前您不需要重新分配 ForeignKey 或任何其他字段。如果这对您不起作用，也许是因为模型之间的时髦关系。我不是 100% 确定，但我认为对象获得（新）主键的唯一时间是它第一次保存到数据库中，然后这是它的第一个 pk。

# backbone.js - Safari 两次触发 Backbone 路由

> ID：14173885
> 
> 赞同：1
> 
> 时间：2013-01-05T16:36:02.147
> 
> 标签：backbone.js, safari, backbone-routing

我对 Safari 中的 Backbone 路由器感到头疼

我有这段代码：

```
app.navigate("ask/" + encodedSearchKey,true); 
```

在我的路由器中：

```
var AppRouter = Backbone.Router.extend({

  routes:{
    "":"main",
    "ask/*encodedSearchKey":"askSearch",
  },

  askSearch:function(){
    ...
  },
  ...

});
app = new AppRouter();
Backbone.history.start(); 
```

在 chrome 中，它按预期工作，URL 被路由并且 askSearch 函数被调用一次

然而，在 Safari 中，askSearch 函数实际上被执行了两次

当我尝试

```
app.navigate("ask/" + encodedSearchKey,false); 
```

在 chrome 中，askSearch 函数没有按预期调用，但在 Safari 中它实际上被调用了一次

我已经运行了调试器，并且很确定 app.navigate 行总是只被调用一次，除了路由器本身之外，没有其他东西可以触发 askSearch 函数

现在我知道我可以通过检测浏览器类型来解决这个问题，但是我在网上没有发现任何类似的问题，似乎人们没有这个问题，我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T12:07:04.400

我想我刚刚遇到了同样的问题并找到了解决方案... Safari 似乎出于虚荣目的从 url 中删除了字符串，然后重新触发路由器导致视图再次呈现但缺少查询字符串数据.

我在路由器中使用的解决方案相当简单：

```
myView: function () {
    if (window.location.search.length) {
        myView.render();
    } else {
        return false;
    }
} 
```

这会阻止第二次渲染继续进行。尽管此操作系统仅在您只想使用查询字符串呈现该视图时才真正适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:41:38.617

该`navigate`函数的第二个参数不是布尔值，而是一个选项对象：

```
app.navigate("ask/" + encodedSearchKey, {
    trigger: true
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T08:51:05.563

在 Firefox 中是 url 未编码的 rout 会触发两次，有时......

# java - 混淆队列+随机数

> ID：14173889
> 
> 赞同：-2
> 
> 时间：2013-01-05T16:36:23.627
> 
> 标签：java, random, queue

所以基本上我有这个电子邮件模拟的东西，所以电子邮件需要从队列中出列才能将它们发送给接收者。

问题说：“每分钟，您最多可以将 40 条消息出队并发送。假设队列中 25% 的消息在任何处理周期都无法发送。同样，您需要使用随机数来确定是否可以发送给定的消息。如果无法发送，则将其放回队列的末尾或将其加入队列。

如何获得 40 条消息的 25% 并确定是否可以（随机）发送消息。我不明白这个逻辑。这里有高手帮我用java完成这个吗？

多谢了。*请使用基本的编程语言。我非常不擅长这种编程语言。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:40:31.690

```
public void sendMessage(Message m) throws MessageCantBeSentException {
    if (random.nextDouble() < 0.25) {
        throw new MessageCantBeSentException("Bad luck!");
    }
} 
```

# android - 添加依赖项后“超出 GC 开销限制”

> ID：14173894
> 
> 赞同：7
> 
> 时间：2013-01-05T16:36:42.523
> 
> 标签：android, dex

[与此问题](https://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded)类似，我收到以下错误：

```
[INFO] --- android-maven-plugin:3.3.0:dex (default-dex) @ betodef-android ---
[INFO] /usr/lib/jvm/java-6-sun-1.6.0.32/jre/bin/java [-Xmx1024M, {snip}
[INFO] 
[INFO] UNEXPECTED TOP-LEVEL ERROR:
[INFO] java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

这发生在我向我的 Android 项目添加了几个依赖项（包括*fastutil ）之后。*但是，增加可用内存`dex`并不能解决问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T16:36:42.523

**问题在于`dex`格式的限制，特别**是**[方法引用数量的 65536 限制](https://code.google.com/p/android/issues/detail?id=7147#c6)**。

要**诊断**问题，请将内存增加到更大的数量（启用调试/详细输出无济于事，奇怪的是）。就我而言，我在`android-maven-plugin`配置中添加了以下内容：

```
<dex>
    <jvmArguments>
        <jvmArgument>-Xmx4096M</jvmArgument>
    </jvmArguments>
</dex> 
```

选择足够大的堆大小后，消息会更改为包含以下内容：

```
[INFO] trouble writing output: Too many methods: 172296; max is 65536\. By package:
[INFO]     20 android.app
[INFO]     18 android.content
[INFO]      1 android.content.pm
[INFO]      7 android.content.res
[INFO]      7 android.hardware
[INFO]     38 android.media
[INFO]     20 android.opengl
[INFO]     11 android.os
[INFO]      1 android.text.method
[INFO]      8 android.util
[INFO]     38 android.view
[INFO]      2 android.view.inputmethod
[INFO]     21 android.widget
...
[INFO]      3 com.google.common.annotations
[INFO]    746 com.google.common.base
[INFO]      9 com.google.common.base.internal
[INFO]    833 com.google.common.cache
[INFO]   8478 com.google.common.collect
[INFO]     50 com.google.common.eventbus
[INFO]    385 com.google.common.hash
[INFO]    597 com.google.common.io
[INFO]     92 com.google.common.math
[INFO]    134 com.google.common.net
[INFO]    521 com.google.common.primitives
[INFO]    404 com.google.common.reflect
[INFO]    954 com.google.common.util.concurrent
[INFO]     16 default
[INFO]    227 it.unimi.dsi.fastutil
[INFO]   1370 it.unimi.dsi.fastutil.booleans
[INFO]  17249 it.unimi.dsi.fastutil.bytes
[INFO]  17249 it.unimi.dsi.fastutil.chars
[INFO]  17279 it.unimi.dsi.fastutil.doubles
[INFO]  17263 it.unimi.dsi.fastutil.floats
[INFO]  17309 it.unimi.dsi.fastutil.ints
[INFO]    628 it.unimi.dsi.fastutil.io
[INFO]  17315 it.unimi.dsi.fastutil.longs
[INFO]  26514 it.unimi.dsi.fastutil.objects
[INFO]  17257 it.unimi.dsi.fastutil.shorts
[INFO]      2 java.awt
[INFO]      5 java.awt.datatransfer
[INFO]    206 java.io
[INFO]    346 java.lang
[INFO]     10 java.lang.ref
[INFO]     71 java.lang.reflect
[INFO]     27 java.math
[INFO]     26 java.net
[INFO]    108 java.nio
[INFO]      6 java.nio.channels
[INFO]      2 java.nio.charset
[INFO]     13 java.security
[INFO]      2 java.text
[INFO]    382 java.util
[INFO]    128 java.util.concurrent
[INFO]     33 java.util.concurrent.atomic
[INFO]     40 java.util.concurrent.locks
[INFO]      6 java.util.jar
[INFO]      6 java.util.logging
[INFO]     10 java.util.regex
[INFO]     20 java.util.zip
[INFO]     26 javax.microedition.khronos.egl
[INFO]    188 javax.microedition.khronos.opengles
[INFO]      7 sun.misc 
```

如您所见，*fastutil*类中有大量引用。

这个问题有两种可能的**解决方案**：

1.  使用有问题的依赖项的替代方案（duh）。
2.  使用优化器，例如[Proguard](http://sourceforge.net/projects/proguard/)（[通用 Android](https://developer.android.com/tools/help/proguard.html)，[Maven-specific](https://code.google.com/p/maven-android-plugin/wiki/ProGuard)）。

# joomla - 我在 foreach 和/或 echo 中缺少什么

> ID：14173897
> 
> 赞同：0
> 
> 时间：2013-01-05T16:37:03.143
> 
> 标签：joomla, foreach, echo

我正在尝试循环浏览我的查询结果以在我的页面上以表格格式显示。我在 foreach 和 echo 中缺少什么来循环显示表中的结果。

```
{source 0}
<?php
$user =& JFactory::getUser();
if (!$user->guest)
$name = $user->username;

$db =& JFactory::getDbo();

$query = $db->getQuery(true);
$query = "
     SELECT image_url
     FROM #__image_data
     WHERE user_name = '$name'";

$db->setQuery($query);

$list = $db->loadObjectList();
foreach ($list as $item){
     $item->image_url;
}
?>
   <td><?php echo $item->image_url;?></td><br/>
   <td><?php echo $item->image_url;?></td><br/>
   <td><?php echo $item->image_url;?></td><br/>
{/source} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:39:36.737

```
 {source 0}
            <?php
            $user =& JFactory::getUser();
            if (!$user->guest)
            $name = $user->username;

            $db =& JFactory::getDbo();

            $query = $db->getQuery(true);
            $query = "
                 SELECT image_url
                 FROM #__image_data
                 WHERE user_name = '$name'";

            $db->setQuery($query);

            $list = $db->loadObjectList();
            foreach ($list as $item){
                 echo "<td>".$item->image_url."</td><br/>";
            }
            ?>

            {/source} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:52:41.570

您可以轻松循环并获得`<td>`如下内容。

方法 1 - 在这里你不必连接，因为你正在使用`""`

```
$list = $db->loadObjectList();
foreach ($list as $item){
     echo "<td> $item->image_url </td><br/>";
} 
```

方法二

```
$list = $db->loadObjectList();
foreach ($list as $item){
     echo '<td>'.$item->image_url'.</td><br/>';
} 
```

# php - set_time_limit 不适用于heroku

> ID：14173898
> 
> 赞同：3
> 
> 时间：2013-01-05T16:37:04.957
> 
> 标签：php, heroku

我正在将 PHP 与 heroku 一起使用。由于某些数据库插入和查询，我不断收到请求超时错误。

我将此行添加到我的所有 php 文件中以避免此错误：

```
set_time_limit(0); 
```

但是，我仍然收到此错误。heroku 是否忽略此命令？

我做了一个简单的检查，看看时间限制是否正在改变：

```
echo 'TIME : '.ini_get('max_execution_time');
set_time_limit(0);
echo 'TIME : '.ini_get('max_execution_time'); 
```

它正在从 30（默认值）更改为 0。尽管进行了更改，但我仍然收到错误消息。

另外，我想补充一点，ajax 正在调用 php 文件。

此外，据我所知，php 未设置为安全模式，因此没有理由忽略该命令。

Heroku 建议使用后台作业，据我所知，如果任务花费超过 30 秒，它会强制您执行。有没有人在不使用后台作业的情况下进行管理？

**更新**：尝试使用：

```
ini_set('max_execution_time', 0); 
```

还是不想上班

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:19:21.360

如果您必须在 Heroku 上超过 30 秒的请求超时，您将需要使用后台作业 - 没有办法解决这个问题（如果请求超过 30 秒，Heroku 只会终止请求）。[Heroku 对此有一些文档](https://devcenter.heroku.com/articles/request-timeout)。

# iphone - 消耗品应用内购买和恢复按钮

> ID：14173906
> 
> 赞同：11
> 
> 时间：2013-01-05T16:37:37.043
> 
> 标签：iphone, xcode, ipad, in-app-purchase

现在所有应用程序都需要恢复 IAP 按钮，如果没有，Apple 将拒绝该应用程序。

问题是，消耗品呢？您无法恢复它们似乎是合乎逻辑的，因为用户将在游戏上花费额外的硬币，仅此而已。

我使用 NSUserDefaults 存储硬币，所以如果用户删除应用程序，他将失去一切，除非他通过 iTunes 同步。用于同步设备的 iCloud 备份将在未来的更新中添加，但我想这与问题无关，即......

消耗性 IAP 可以/必须恢复？

我只是害怕被拒绝并延迟我的新游戏。

谢谢，

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-05T16:42:12.170

消耗品不会恢复，就像您在原始问题中的推理一样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-09-20T15:49:49.537

来自 Apple 的[应用内购买编程指南](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction.html)

> 消耗品，就其性质而言，不会同步或恢复。用户明白，例如，在他们的 iPhone 上多买十个泡泡并不会让他们在 iPad 上多买十个泡泡。所有其他类型的产品都可以在所有用户的设备上使用。它们也已恢复，因此即使在购买新设备后，用户也可以继续访问他们购买的内容。StoreKit 处理自动更新订阅和非消耗性产品的同步和恢复过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-01T13:05:53.827

消耗品不可恢复。如果你想从服务器传送内容，只有在从服务器传送内容后才使事务完成。**收据仅在您将交易标记为完成之前可用。**

# ios - detailTextLabel.text 不显示，仅在 iPhone 5 上

> ID：14173907
> 
> 赞同：0
> 
> 时间：2013-01-05T16:37:37.143
> 
> 标签：ios, xcode, iphone-5, viewdidload, detailtextlabel

我已经解决了这个问题，但值得分享，因为我在这方面找不到任何东西。

我有一个 UITableView 的子类，其中没有显示 detailTextLabel.text。detailTextLabel 对象本身正常存在，并且包含文本，您只是在屏幕上看不到它。

该错误仅发生在 iPhone 5 或视网膜 4 英寸模拟器上。在 iPod 4 或任何其他模拟器“硬件”上都可以。使用的iOS版本没有区别。

答案如下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:42:22.113

通过让触发违规表格显示的视图控制器在 viewWillAppear 而不是 viewDidLoad 中执行此操作来修复它。

```
-(void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    //Used to do this in viewDidLoad, but that stopped the detailTextLabel showing
    //for this table view on the iPhone 5\. If do it from here, it's fine.
    [friendsSubView addSubview:friendsTableViewController.view];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:19:54.793

以下应该是正确的代码吗？[friendsSubView addSubview:friendsTableViewController.tableView];

# jsf - Primefaces DataTable 排序问题

> ID：14173915
> 
> 赞同：1
> 
> 时间：2013-01-05T16:38:43.087
> 
> 标签：jsf, sorting, primefaces, datatable

我在数据表中有问题。所有列在标题上都有 sortBy，除了最后一个具有 TieredMenu 并且每个 MenuItem 使用 item 作为参数调用支持 bean。数据表加载了一个按一个字段排序的列表，我没有使用数据模型。

问题是，在按任何字段排序后，作为参数传递的项目是初始的，而不是实际的。

例如：

最初列表按第三个字段排序：

```
gomez 5 4
alvarez 3 5
carballo 3 8 
```

按第一个字段排序后：

```
alvarez 3 5
carballo 3 8
gomez 5 4 
```

如果我点击第一行，我会得到 gomez 而不是 alvarez。

这是数据表的代码：

```
<p:dataTable scrollable="true" scrollHeight="290" 
        value="#{bb.list}"
        id="tablaEnAtencion" var="item" width="100%" rows="10000"
        sortBy="#{item.third}" sortOrder="descending"
        filteredValue="#{bb.listFiltered}">
    ...
    <p:column style="text-align:center;" width="24">
        <p:commandButton id="dynaButtonAtencion" icon="ui-icon-gear" type="button" style="width:100%;" />
        ...
        <p:tieredMenu overlay="true" trigger="dynaButtonAtencion" my="left top" at="left bottom" style="width:170px">
            <p:menuitem value="action" actionListener="#{bb.act1(item)}" />
        </p:tieredMenu>
    </p:column>
</p:dataTable> 
```

在项目中，我有很多 DataTable，这个问题只发生在这个表上。我已经尝试过： - 在某些列上删除排序 - 在没有侦听器的情况下添加排序事件 - 使用排序侦听器添加排序事件，并在此方法上按代码排序 - 删除过滤器 - 使用 f:setPropertyActionListener 将值发送到 bb

支持 bean 是 ViewScoped。Primefaces 3.4，面对 2.1.13。

# jquery - Jquery缓存变量

> ID：14173916
> 
> 赞同：2
> 
> 时间：2013-01-05T16:38:47.843
> 
> 标签：jquery, caching

我有以下内容：

```
$(function(){
   $table = $('#print_types table');
}); 
```

是否有可能做这样的事情：

```
$(function(){
   $($table + ' tr:last > td:first').after('something');
}); 
```

由于我正在缓存一个表格元素，我怎样才能像上面显示的那样操作表格？通常我会这样写：

```
$(function(){
   $('div#print_types table tr:last > td:first').after('something');
}); 
```

问题是我有一堆这样的语句，这就是我缓存表的原因。我试着做我所做的，但我得到了一个错误。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:42:12.363

只需使用`.find`：

```
$table.find('tr:last > td:first') 
```

这本质上是等价的。你不能使用`$($table +...`，因为`$table`'s toString 不是你想要的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:42:25.413

`$table`是一个 jQuery 对象。jQuery 选择器是一个字符串，不能连接字符串和对象。

`find()`改为使用

```
 $table.find(' tr:last > td:first').after('something'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:43:44.787

您正在寻找的是[上下文](http://api.jquery.com/jQuery/#jQuery1)

```
$table = $('#print_types table');

$('tr:last > td:first', $table).after('something'); 
```

这与基本相同

```
$table.find('tr:last > td:first').after('something'); 
```

[。寻找（）](http://api.jquery.com/find/)

# android - 视图类似乎没有 FILL_PARENT 和 WRAP_CONTENT 属性

> ID：14173917
> 
> 赞同：0
> 
> 时间：2013-01-05T16:38:47.310
> 
> 标签：android

GridView 没有 LayoutParams() 函数，View 没有 View.WRAP_CONTENT。我的设置有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:45:18.440

Android 中没有类有“`LayoutParams()`函数”，因为 Java 没有函数，Java 方法通常以小写字母开头。

`GridView`有[一个`getLayoutParams()`方法，继承自`View`](http://developer.android.com/reference/android/view/View.html#getLayoutParams%28%29).

[`FILL_PARENT`](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#FILL_PARENT)并且[`WRAP_CONTENT`](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#WRAP_CONTENT)是 上的公共静态数据成员， Android 中使用`ViewGroup.LayoutParams`的所有类的基类。`LayoutParams`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:45:57.280

为什么要有一个`View.WRAP_CONTENT`？有一个常数`ViewGroup.LayoutParams.WRAP_CONTENT`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:46:42.207

`LayoutParams`是一个类的名称，其中大多数`Layout`类都有特殊的实现。基类定义在`ViewGroup`. 请参阅 JavaDoc 以了解哪些类具有派生实现。

*   [http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)

WRAP_CONTENT 在`ViewGroup`类中定义：http: [//developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#WRAP_CONTENT](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#WRAP_CONTENT)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T16:47:14.633

它使用来自布局父级的 LayoutParams。看到[这个](https://stackoverflow.com/questions/7470318/setting-parameter-of-layout-of-android-programmatically)

如果你想在 LinearLayout 中放置一个按钮，你必须这样做。

```
button.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT)); 
```

# android - JakeWharton TitlePageIndicator：如何只显示左右标题的一半

> ID：14173919
> 
> 赞同：0
> 
> 时间：2013-01-05T16:38:48.870
> 
> 标签：android, viewpagerindicator

我正在使用 JakeWharton TitlePageIndicator。在我将标题设置为有点长的字符串（20 个字符）之前，该指标一直很有效，中心标题显示得很好，但左右标题离中心标题太近了。有没有办法让它就像在谷歌播放中一样，左右标题只显示一半（或固定长度）？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:21:55.577

您不需要像那样修改库。只需为 TitlePageIndicator 指定一个 clipPadding。

像那样 ：

```
mIndicator.setClipPadding(-60); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T07:08:34.067

对于任何可能有同样问题的人。在 JakeWharton TitlePageIndicator 中，有两种方法可以控制左右标题的显示：

```
/**
 * Set bounds for the right textView including clip padding.
 *
 * @param curViewBound
 *            current bounds.
 * @param curViewWidth
 *            width of the view.
 */
private void clipViewOnTheRight(Rect curViewBound, float curViewWidth, int right) {
    // isShowPartOfInactiveTitles is my variable which is set default to TRUE
    if(isShowPartOfInactiveTitles){
        curViewBound.right = (int)(right + curViewWidth - 60);
        curViewBound.left = (int)(right - 60);
    }else{
        curViewBound.right = (int) (right - mClipPadding);
        curViewBound.left = (int) (curViewBound.right - curViewWidth);
    }
}

/**
 * Set bounds for the left textView including clip padding.
 *
 * @param curViewBound
 *            current bounds.
 * @param curViewWidth
 *            width of the view.
 */
private void clipViewOnTheLeft(Rect curViewBound, float curViewWidth, int left) {
    // isShowPartOfInactiveTitles is my variable which is set default to TRUE
    if(isShowPartOfInactiveTitles){
        curViewBound.left = (int)(left - curViewWidth + 60);
        curViewBound.right = (int)(left + 60);
    }else{
        curViewBound.left = (int) (left + mClipPadding);
        curViewBound.right = (int) (mClipPadding + curViewWidth);   
    }
} 
```

上面的代码片段将只显示 60dp 的左右标题。您可以将此数字作为属性并通过 xml 传递。为了便于理解，我在这里对其进行了硬编码。

# php - 使用程序方式抛出自定义 PHP 错误的更好做法

> ID：14173920
> 
> 赞同：0
> 
> 时间：2013-01-05T16:38:50.463
> 
> 标签：php, error-handling

我知道这个问题之前可能会被问到，但我想展示我的代码，我想知道是在做简单的事情还是让代码复杂化？此外，答案说使用`try`，`catch`但正在使用程序方法，所以我想知道我是否正确？

我做什么，例如联系表格

```
<?php
if(isset($_POST['contact'])) {
    $throw_error = array();

    //First Block Is Validation
    if($_POST['first_name'] == '' || $_POST['last_name'] == '') {
        $throw_error['field_blank'] = 'Fields Cannot Be Blank';
    } elseif(strlen($_POST['first_name']) < 3) {
         $throw_error['char_len'] = 'First Name Cannot Be Less Than 3 Characters';
    }

    //Second Block Is Process If No Errors Are Found
    if(empty($throw_error)) {
        $first_name = $_POST['first_name']; 
       //Don't worry about the sanitizing part, am doing it
       //Process the form ahead and then redirect using header()
       }
    } elseif(!empty($throw_error)) { //Third Block To Throw Error If Any Errors Found
        if(isset($throw_error['field_blank'])) {
            echo  $throw_error['field_blank'];
        } elseif(isset($throw_error['char_len'])) {
            echo  $throw_error['char_len'];
        }
    }
?>

<form>
   <input type="text" name="first_name" />
   <input type="text" name="last_name" />
   <input type="submit" value="Submit" name="contact" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:58:39.170

I would also recommend using Try/Catch. You can still use it in procedural blocks.

If you are dead set against it, this code looks like it will do what you want it to do, but it's over-engineered. Since the user can either have a **field_blank** or **char_len** error, you only need a single string error variable.

```
$error = NULL;
if($_POST['first_name'] == '' || $_POST['last_name'] == '') {
    $error = 'Fields Cannot Be Blank';
} elseif(strlen($_POST['first_name']) < 3) {
     $error = 'First Name Cannot Be Less Than 3 Characters';
} 
```

...

```
if(!empty($error)) {
   echo $error;
} 
```

If you need to catch and display multiple non-exclusive errors, you can use the array you cited in your sample code and just iterate over the values rather than making a giant if/elseif block.

```
} elseif(!empty($throw_error)) { //Third Block To Throw Error If Any Errors Found
    foreach($throw_error as $key => $message) {
        echo $message.'<br>';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:43:07.250

尝试/抓住你在这里很棒。它消除了数组所需的一切`throw_error`，并大大减少了代码。

```
try{
    $first_name = '';
    if(isset($_POST['contact'])) {
        if($_POST['first_name'] == '' || $_POST['last_name'] == '') {
            throw new Exception('Fields Cannot Be Blank');
        } elseif(strlen($_POST['first_name']) < 3) {
             throw new Exception('First Name Cannot Be Less Than 3 Characters');
        }
        $first_name = $_POST['first_name'];
    }
}catch(Exception $e){
    echo $e->getMessage();
} 
```

如果您希望将数组传递给这个 catch 语句，我发现的最简单的方法是传递`serialize`给数组，然后`unserialize`一旦完成。这将允许您一次打印所有错误：

```
try{
    $first_name = '';
    if(isset($_POST['contact'])) {
        if($_POST['first_name'] == '' || $_POST['last_name'] == '') {
            $throw_error[] = 'Fields Cannot Be Blank';
        }
        if(strlen($_POST['first_name']) < 3) {
             $throw_error[] = 'First Name Cannot Be Less Than 3 Characters';
        }
        if(isset($throw_error)){
            throw new Exception(serialize($throw_error));
        }
        $first_name = $_POST['first_name'];
    }
}catch(Exception $e){
    $errors = unserialize($e->getMessage());
    foreach($errors as $error){
        echo $error.'<br>';
    }
} 
```

# matlab - 不带 RS232 端口发送串行数据

> ID：14173925
> 
> 赞同：1
> 
> 时间：2013-01-05T16:39:22.320
> 
> 标签：matlab, serial-port

我想从 MATLAB 串行发送数据，但我的笔记本电脑没有串口。我必须使用 USB 转 RS232 转换器吗？我的程序会保持不变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:59:52.473

I have some RS232-USB-Converters and never had any trouble. I need adapters for embedded devices and embedded development.

If your driver is properly installed and works then it is presented as an serial device to the OS.

The device presented (on linux) is named differently (ttyUSB) but that doesn't matter. And using stdio functions like fopen/fclose is one more layer above (libcall, not syscall).

# php - PHP 与 Python 中的默认函数变量

> ID：14173930
> 
> 赞同：1
> 
> 时间：2013-01-05T16:39:44.597
> 
> 标签：php, python, function, default-value

在 Python 中，可以有一个包含多个变量的函数，这些变量都具有默认值。然后只是传递其中一个值的值。所以如果我有

```
function foo(a=10,b=50, c=70)
    pass
    pass
    return 
```

然后我可以打电话

```
foo(b=29) 
```

它会调用

```
foo(10,29,70) 
```

*（使用所有值的默认值，以及该变量的确切值）。*

**PHP中有类似的可能吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:42:27.750

不，没有与 PHP 中的等价物。您可以为函数参数设置默认值，但它们是从左到右计算的并且没有命名：

```
function test($var1 = 'default1', $var2 = 'default2')
{

} 
```

在该示例中，这两个变量是可选的，但如果要指定第二个参数，则必须指定第一个参数。

```
test(); // works
test('arg1'); // works
test('arg1', 'arg2'); // works
test('arg2'); // this will set the first argument, not the second. 
```

如果您需要对可选参数具有灵活性，一种常见的解决方法是将数组作为参数传递：

```
function test($options)
{

} 
```

这可以具有单个关联数组形式的可变数量的参数：

```
$options = array('var1' => 'arg1', 'var2' => 'arg2');
test($options); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:43:20.343

使用数组作为参数。例如：

```
function a(array $params) {
    $defaults = array(
        'a' => 10,
        'b' => 50,
        'c' => 70,
    );
    $params += $defaults;
    // use $params
}

a(array('b' => 29)); 
```

# c++ - 将下载的 c++ 源代码添加到我的项目时的良好做法

> ID：14173931
> 
> 赞同：0
> 
> 时间：2013-01-05T16:40:06.267
> 
> 标签：c++, gcc, include

我正在尝试使用 gnuplot++，但这确实是一个关于下载源代码的更普遍的问题。我已经下载了 gnuplot++ 源代码，它由多个 .h 和 .cc 文件组成。我想将来在其他副本项目中使用它，所以我不愿意将所有文件添加到我的项目目录中。

据我了解，gcc 将在 /usr/local/include 中查找头文件，因此我暂时将代码放在那里。但是编译和链接代码的最佳方法是什么？

1.  我应该使用 makefile 来包含源代码的目录吗？
2.  我应该把它放在像 /usr/local/include 这样容易找到的地方吗？
3.  我如何知道在 gnuplot++ 中编译代码的最佳方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:00:09.560

通常，如果项目本身没有安装说明，我通常将其添加到“公共”位置，例如`/usr/local/project/{lib,include,src,...}`，在这种情况下，“项目”将是 gnuplot++。

在这种情况下，似乎没有任何支持将其构建到库中，这使它有点尴尬，因为您需要项目本身中包含的源代码。我仍然会将这些源分开，但您可能更愿意将它们放在项目中的单独目录中[或者花一三个小时制作它的库]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:01:21.243

一般情况下，使用第三方库时，请根据下载源附带的安装说明构建和安装这些库。

如果没有安装指南，通常是一组步骤，例如

```
./configure
make
make install 
```

然后，库有责任确保相关的头文件和库文件易于定位以在您的项目中使用。

gnuplot++ 在这里是个例外，因为它似乎没有自己的构建结构。
在这种情况下，最好的建议是将 gnuplot++ 的源代码放在项目中的一个目录中（可能与您自己的源代码平行）并将文件包含在您自己的构建设置中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T17:02:20.607

对于一般实践，是的，将 gnuplot++（或任何其他类似的第 3 方项目）的源代码与您自己的应用程序源代码分开。这使得管理对第 3 方项目等的更新变得更加容易。

是的，我会为您的应用程序使用 makefile 来包含指向 gnuplot++ 头文件的路径，并且我不会将这些文件直接复制到 /usr/local/include 中。相反，我会考虑几个选项：什么都不做，将 makefile 中的包含路径指向 gnuplot++ 目录，或者将符号链接放在 /usr/local/include 中以指向 gnuplot++ 文件。

至于编译 gnuplot++ 的最佳方法，我将不得不自己查看 gnuplot++ 并看看它要说什么，也许在 README 文件或类似文件中。

# cordova - 使用 phonegap 在 BlackBerry 中添加插件时出错

> ID：14173935
> 
> 赞同：0
> 
> 时间：2013-01-05T16:41:15.953
> 
> 标签：cordova, blackberry, phonegap-plugins

我在 cordova.jar 中插入了条码扫描插件

我按照[“Cordova 的 BarcodeScanner 插件”中的步骤进行操作](https://github.com/phonegap/phonegap-plugins/tree/master/BlackBerry/BarcodeScanner)

我提取了jar文件，然后插入了插件，然后再次使用eclipse制作了一个jar。但是我在运行程序时没有得到结果。我认为制作jar文件有问题。

# python - AttributeError：“SigSafeLogger”对象没有属性“记录器”

> ID：14173943
> 
> 赞同：4
> 
> 时间：2013-01-05T16:42:20.890
> 
> 标签：python, django, celery, backend, mixpanel

我正在尝试将 mixpanel celery 集成到我的后端并不断收到以下错误。有人可以帮忙吗？

回溯（最近一次通话最后）：

```
 File "/home/modalyst/webapps/django/lib/python2.7/django/core/handlers/base.py", line 111, in get_response
  response = callback(request, *callback_args, **callback_kwargs)

 File "/home/modalyst/webapps/django/modalyst/modalyst/main2/views.py", line 3959, in item_manager_add
   et.run('New Item Created by Designer',{'user_id':11},token='REMOVED_MY_API_TOKEN')

 File "/home/modalyst/lib/python2.7/mixpanel/tasks.py", line 42, in run
   if l.logger.getEffectiveLevel() == logging.DEBUG:

AttributeError: 'SigSafeLogger' object has no attribute 'logger' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:55:19.507

看起来`SigSafeLogger`对象没有属性`logger`。

尽量不要尝试访问该属性。如果您不直接执行此操作，请停止将`SigSafeLogger`对象传递给引发此错误的任何代码。

# php - 在 if 语句下索引链接？

> ID：14173948
> 
> 赞同：0
> 
> 时间：2013-01-05T16:42:30.400
> 
> 标签：php, seo, web-crawler, googlebot

是否会将 Google 的任何链接索引在 if 语句下？

前任

```
 <a"; if($user_category=="register2"){ $link="href='".$databaselink; echo $link;}"> BOOK</a> 
```

链接是我服务器上的pdf。

爬网会看到该链接并将其编入索引吗？

提及此内容无需登录即可显示。是公开的。登录后用户获得一个将显示链接的类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:46:12.747

我没有发现您的问题或代码很清楚，但是这就是我认为您所追求的。

Google 会在抓取页面时获取链接的任何内容。
因此，无论您的默认链接是什么，爬虫都会采用。

爬虫将看不到需要用户登录的链接。

# c# - 通过代码会话工厂与 MySQL 设置 Nhibernate 映射

> ID：14173953
> 
> 赞同：0
> 
> 时间：2013-01-05T16:42:55.830
> 
> 标签：c#, mysql, nhibernate

我正在尝试通过映射来设置带有 Nhibernate 代码的会话工厂，但是我在配置它时遇到了问题，而且通过与会话工厂的映射很难找到代码指南。

自动取款机。我有这个 SessionManager，但我不确定在哪里指定它的 MySQL 数据库，很容易错过更多。

```
public class SessionManager
{
    private const string ConnString = "Server=localhost; Port=3306; Database=test; Uid=root; Pwd=123456;";

    public static SessionManager CurrentInstance
    {
        get
        {
            if (_currentInstance == null)
            {
                object sync = new object();
                lock (sync)
                    _currentInstance = new SessionManager();
            }
            return _currentInstance;
        }
    }

    public static ISession Session
    {
        get
        {
            if (_sessionFactory == null)
            {
                object sync = new object();
                lock (sync)
                    _sessionFactory = new Configuration()
                        .DataBaseIntegration(x => x.ConnectionString = ConnString)
                        .Configure()
                        .AddAssembly(typeof(EmployeeMap).Assembly)
                        .BuildSessionFactory();
            }
            return _sessionFactory.OpenSession();
        }
    }

    private SessionManager() { }

    static SessionManager _currentInstance;
    static ISessionFactory _sessionFactory;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:53:50.367

我认为您要做的是指定您使用的是mysql。完成此操作后，我使用了一个 NHibernate 配置文件，其中有一行说明 driver_class：

`<property name="connection.driver_class">NHibernate.Driver.MySqlDataDriver</property>`

试试这个教程

[http://nhforge.org/wikis/howtonh/your-first-nhibernate-based-application.aspx](http://nhforge.org/wikis/howtonh/your-first-nhibernate-based-application.aspx)

它描述了设置您的 nhibernate 会话的过程，并显示了一个示例 hibernate.cfg.xml 文件。在此设置中，您需要指定 MySqlDataDriver 而不是所示的 SQLServerCeDriver。

我不知道您是否可以在不必使用 hibernate.cfg.xml 的情况下做到这一点

# android - 在真实设备上调试已安装的应用程序

> ID：14173954
> 
> 赞同：2
> 
> 时间：2013-01-05T16:42:56.247
> 
> 标签：android

我可以在真实设备上调试 android 应用程序，但调试器首先安装新版本的应用程序。

我可以配置 Eclipse（或任何其他 IDE）使其不重新安装应用程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T16:48:57.600

只要应用程序由您的密钥库签名，您就可以将调试器附加到设备，而无需重新安装新应用程序。

> 1) 转到 DDMS eclipse 透视图。
> 
> 2) 您应该会在左侧看到已连接设备的列表。
> 
> 3) 每个设备都应该有一个已安装的可调试应用程序列表
> 
> 4) 选择你要调试的app，点击左上角的绿色bug开始调试

# html - Facebook 的“喜欢”小部件显示在 Firefox 中。不是野生动物园？

> ID：14173955
> 
> 赞同：0
> 
> 时间：2013-01-05T16:42:57.977
> 
> 标签：html, facebook, widget

快速查看是否有人对此有任何经验，和/或可以建议它可能是什么。

主页：[http ://www.croydebayholidays.com](http://www.croydebayholidays.com)

在 Firefox 的页脚中显示类似 facebook 的小部件......但在 Safari 中不显示。

有人知道为什么吗？我想这没什么大不了的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:45:17.227

尝试清除缓存并检查是否启用了 Javascript。Facebook 小部件需要启用 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:19:39.467

您可以尝试重新安装您的小部件。有时甚至 css 也会发挥作用

# objective-c - iOS Objective C NSString.length 未返回预期值

> ID：14173960
> 
> 赞同：0
> 
> 时间：2013-01-05T16:43:29.123
> 
> 标签：objective-c, ios, xcode

我在使用客观 C 方法时遇到了最基本的问题。基于来自的建议： [如何将 NSString 截断为设定的长度？](https://stackoverflow.com/questions/2952298/how-can-i-truncate-an-nsstring-to-a-set-length)

我正在尝试编写一种方法来返回截断的 NSString。但是，它不起作用。例如，当我发送“555”时，长度（如变量“test”所示）返回为 0。我通过在行 int 测试后设置一个断点并将鼠标悬停在变量 fullString 和 test 上来确定这一点。我是否需要以某种方式取消引用指向 fullString 或其他东西的指针？我是目标 C 的新手。非常感谢

```
-(NSString*) getTruncatedString:(NSString *) fullString {

    int test = fullString.length;
    int test2 = MIN(0,test);
    NSRange stringRangeTest = {0, MIN([@"Test" length], 20)};

    // define the range you're interested in
    NSRange stringRange = {0, MIN([fullString length], 20)};

    // adjust the range to include dependent chars
    stringRange = [fullString rangeOfComposedCharacterSequencesForRange:stringRange];

    // Now you can create the short string
    NSString* shortString = [_sentToBrainDisplay.text substringWithRange:stringRange];

    return shortString;

} 
```

根据评论和研究，我得到了它的工作。谢谢大家。如果有人感兴趣：

```
-(NSString*) getTruncatedString:(NSString *) fullString {

if (fullString == nil || fullString.length == 0) {
    return fullString;
}
NSLog(@"String length: %d", fullString.length);

// define the range you're interested in
NSRange stringRange = {MAX(0, (int)[fullString length]-20),MIN(20, [fullString length])};

// adjust the range to include dependent chars
stringRange = [fullString rangeOfComposedCharacterSequencesForRange:stringRange];

// Now you can create the short string
NSString* shortString = [fullString substringWithRange:stringRange];

return shortString; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:54:13.547

检查您是否传递`@"555"`给此方法，而不是`"555"`. 此外，更好的方法是

`NSLog(@"String length: %d", fullString.length)`.

# in-app-purchase - 您可以让用户将应用内购买转移到另一个应用吗？

> ID：14173966
> 
> 赞同：0
> 
> 时间：2013-01-05T16:44:04.513
> 
> 标签：in-app-purchase

我正在考虑创建情节应用程序。所以第一个将是“第 1 集”、第 2 集、第 3 集等

用户可以在其中任何一个中进行应用内购买，但我想知道我是否想要，有没有办法可以将某人在一集中进行的购买转移到下一集中？假设每一集都是它自己独立的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:03:47.337

查看 Shaun Ervine 的这篇关于访问 iOS 钥匙串的便利实用程序的博客文章。这允许您以与 NSUserDefaults 类似的样式在应用程序之间共享小块数据，这可能正是您的应用内购买的正确选择：http: [//shaune.com.au/ios-keychain-sharing-data-between-应用/](http://shaune.com.au/ios-keychain-sharing-data-between-apps/)

# jquery - firefox 和 opera 定位问题

> ID：14173967
> 
> 赞同：0
> 
> 时间：2013-01-05T16:44:13.643
> 
> 标签：jquery, css

我正在使用这些典型位置之一：固定的“滚动到顶部”链接，通过 jquery，当您手动向下滚动时淡入，如果您手动向上滚动则淡出。单击链接时，它会将您设置为动画滚动顶部到站点的顶部。

css的问题是，当你点击opera-or-firefox中的链接时，css会从bottom:10px切换到top:0px，除非你再次点击，否则不会出现scrollTop。

如果在样式表中将其更改为 top:0，则链接可以正常工作。但是尝试bottom:10px（或top:0以外的任何东西），点击它会导致它再次变为top:0。就好像 FF & O 不允许除了 top:0px 之外的任何东西。

有任何想法吗？

这是CSS -

```
a#scrollup{
display:none;
width:51px;
height:51px;
-moz-opacity:.7;
opacity:.7;
zoom:1;
filter:alpha(opacity=70);
position:fixed;
overflow:hidden;
text-indent:100%;
white-space: nowrap;
z-index:1001;
bottom:10px;
right:10px;
background: url('images/ui.totop.png') no-repeat;
-webkit-transition:opacity 0.8s ease-in-out;
   -moz-transition:opacity 0.8s ease-in-out;
    -ms-transition:opacity 0.8s ease-in-out;
     -o-transition:opacity 0.8s ease-in-out;
        transition:opacity 0.8s ease-in-out;
}

a#scrollup:hover{
-moz-opacity:.9;
opacity:.9;
filter:alpha(opacity=90);
}
a#scrollup:active{bottom:8px} 
```

这是脚本 -

```
 $(window).scroll(function(){
        if ($(this).scrollTop() > 100) {
            $('a#scrollup').fadeIn();
        } else {
            $('a#scrollup').hide('fast');  
        }
    }); 

    $('a#scrollup').click(function(){
        $("html, body").animate({ scrollTop: 0 }, 600, 'easeInExpo');
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:48:05.343

好吧，我能想到的唯一解决方法是给锚一个 div 包装器，并将 position:fixed 和 bottom:10px 应用于它，而不是锚/链接。

新的 CSS：

```
div#scrollup {
display:none;
position:fixed;
z-index:1001;
bottom:10px;
right:10px;
}

div#scrollup a{
overflow:hidden;
text-indent:100%;
white-space: nowrap;
width:51px;
height:51px;
-moz-opacity:.7;
opacity:.7;
zoom:1;
filter:alpha(opacity=70);
background: url('images/ui.totop.png') no-repeat;
-webkit-transition:opacity 0.8s ease-in-out;
   -moz-transition:opacity 0.8s ease-in-out;
    -ms-transition:opacity 0.8s ease-in-out;
     -o-transition:opacity 0.8s ease-in-out;
        transition:opacity 0.8s ease-in-out;
}

div#scrollup a:hover{
-moz-opacity:.9;
opacity:.9;
filter:alpha(opacity=90);
}
div#scrollup a:active{bottom:8px} 
```

改变的jQuery：

```
 $(window).scroll(function(){
        if ($(this).scrollTop() > 100) {
            $('div#scrollup').fadeIn();
        } else {
            $('div#scrollup').hide('fast');  
        }
    }); 

    $('div#scrollup a').click(function(){
        $("html, body").animate({ scrollTop: 0 }, 600, 'easeInExpo');
        return false;
    }); 
```

所以它需要一个包装器。

# asp.net-mvc - 剃刀代码错误

> ID：14173969
> 
> 赞同：1
> 
> 时间：2013-01-05T16:44:16.593
> 
> 标签：asp.net-mvc, dynamic, razor, webmatrix

我有以下代码：

```
@{
    var db = Database.Open("WebPageMovies") ;
    var selectCommand = "SELECT * FROM Movies";
    var searchGenre = "";
    var searchTitle = ""; 
    var selectedData = ""; 

    // search by Genre
    if(!Request.QueryString["searchGenre"].IsEmpty() ) {
        selectCommand = "SELECT * FROM Movies WHERE Genre = @0";
        searchGenre = Request.QueryString["searchGenre"];
    }

    // searching by title ( but any word or words that match a title will work). 
    if(!Request.QueryString["searchTitle"].IsEmpty()){ 
        selectCommand += " AND Title LIKE @1"; 
        searchTitle = "%"+ Request.QueryString["searchTitle"] + "%"; 

        }
    // if both textboxes are empty, then the following is dispayed 
    if(searchGenre != null)
    {
           selectedData = db.Query(selectCommand, searchGenre,searchTitle);
    }
           else 
           {
               selectedData = db.Query(selectCommand,searchTitle);

           } 
    var grid = new WebGrid(source: selectedData, defaultSort: "Genre", rowsPerPage:3);

}

<!DOCTYPE html>

<html lang="en">
    <head>

  <style type="text/css">
  .grid { margin: 4px; border-collapse: collapse; width: 600px; }
  .grid th, .grid td { border: 1px solid #C0C0C0; padding: 5px; }
  .head { background-color: #E8E8E8; font-weight: bold; color: #FFF; }
  .alt { background-color: #E8E8E8; color: #000; }
  </style>     

    <meta charset="utf-8" />
    <title>Movies</title>
</head>
    </head>
    <body>
        <h1>Movies</h1>
        <form method="get">
  <div>
    <label for="searchGenre">Genre to look for:</label>
    <!-- in order for the textbox to rememebr what search value was entered, we need to provide a value attribute with that search value in our HTML-->
    <input type="text" value="@Request.QueryString["searchGenre"]" name="searchGenre" value="" />
    @*<input type="Submit" value="Search Genre" /><br/>*@
    (Leave blank to list all movies.)<br/>
    </div>
    <div>
          <label for="SearchTitle">Movie title contains the following:</label>
          <input type="text" name="searchTitle" value="@Request.QueryString["searchTitle"]" />
          <input type="Submit" value="Search Title" /><br/>
   </div>
</form>
     <div>
   @grid.GetHtml(

    tableStyle: "grid",
    headerStyle: "head",
    alternatingRowStyle: "alt",
    columns: grid.Columns(
        grid.Column("Title"),
        grid.Column("Genre"),
        grid.Column("Year")
    )
)
    </div>
    </body>
</html> 
```

不用担心它的长度，只关注剃须刀代码。简而言之，我有两个文本框和一个按钮。当用户在“标题”或“流派”或两个搜索框中输入值时，我想显示一个表格。但是，我收到以下错误：

![点击这里](../Images/7809fb919b0309c6065537c64be0a529.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:55:55.283

您的错误与恰好是字符串的此变量的类型有关：

```
var selectedData = ""; 
```

看到您正在尝试将查询结果分配给它并`db.Query`返回一个`IEnumerable<dynamic>`.

```
selectedData = db.Query(selectCommand, searchGenre,searchTitle); 
```

将该变量更改为：

```
IEnumerable<dynamic> selectedData; 
```

# php - Amazon $s3->create_object() 返回 200 但未创建对象

> ID：14173971
> 
> 赞同：0
> 
> 时间：2013-01-05T16:44:24.053
> 
> 标签：php, amazon-s3

我正在尝试使用 PHP 将图像上传到 S3，它似乎应该可以工作，但图像没有出现。要上传的代码是这样的：

```
$s3 = new AmazonS3(array("key"=><mykey>,"secret"=><mysecret>));
$s3->ssl_verification = false;
if ($s3->if_bucket_exists($i_sBucket)) {
    $obj = $s3->create_object($i_sBucket,$i_sFileName,array('body'=>$i_sData));
    if ($obj->isOK()) {
        return true;
    } else {
        //log error
    }
} else {
    // log error
} 
```

当我运行它时，我得到了这些重要的值：

```
$obj->isOK() = true
$obj["status"] = 200
$obj["body"] = false
$obj["_info"]["url"] = the appropriate destination URL
$obj["_info"]["http_code"] = 200 
```

但是，如果我通过 Web 界面检查存储桶，或者尝试访问该文件，则它不存在。

有任何想法吗？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:54:00.800

$i_sBucket 和 $i_sFileName 有什么值？我的猜测是这些变量与任何现有文件夹都不匹配。

# python - 用 Python 解决 CodingBat 砌砖难题

> ID：14173972
> 
> 赞同：4
> 
> 时间：2013-01-05T16:44:44.393
> 
> 标签：python

我正在完成[这个](http://codingbat.com/prob/p118406)CodingBat 问题：

> 我们想要制作一排目标英寸长的砖块。我们有许多小砖（每个 1 英寸）和大砖（每个 5 英寸）。如果可以通过从给定的砖块中选择来实现目标，则返回 True。这比看起来要难一些，并且可以在没有任何循环的情况下完成。
> 
> ```
> make_bricks(3, 1, 8) → True
> make_bricks(3, 1, 9) → False
> make_bricks(3, 2, 10) → True 
> ```

我写：

```
if small + big * 5 >= goal: return True
else: return False 
```

我的错误是：`make_bricks(3, 2, 9)`→ `False`（我设置为真，因为 (2*5)+3=13 大于 9。

```
make_bricks(2, 1000000, 100003) → False
make_bricks(1, 4, 12) → False 
```

我找到了这个答案，而不是通过了这些测试：

```
if goal > small + big * 5:
  return False
else:
  return goal % 5 <= small 
```

我真的不明白为什么，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-07-25T10:33:46.073

这是一个较短的解决方案。

```
def make_bricks(small, big, goal):
    return (goal%5)<=small and (goal-(big*5))<=small 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-29T22:20:28.247

```
def make_bricks(small, big, goal):
    if (goal//5 <= big) and ((goal - 5*(goal//5))<= small): return True
    elif (goal//5 >= big) and ((goal - 5*(big)) <= small): return True
    return False 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-20T08:46:06.710

```
def make_bricks(small,big,goal):
    # for checking how much small bricks we needed we use (goal%5)
    if small<(goal%5) or (small+big*5)<goal:
       return False
    else:
       return True 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T18:46:43.567

您没有考虑到您可能不需要使用所有 5。例如，您的代码在以下情况下失败：

```
def make_bricks(3, 2, 9) 
```

你真的只能在这里使用一块大砖。这让你有 4 块，只有两块小砖块来弥补差额。

这就是工作示例有效的原因。考虑到所有 5 可能无法使用。

codingbat 的好处在于，它们会告诉您他们的期望以及他们在试验期间得到的结果。您可以使用失败的值遍历代码以查看失败的原因。铅笔和纸是你的朋友。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-11T23:14:26.680

```
def make_bricks(small, big, goal):
  if (goal%5)<=small and (goal-(big*5))<=small:
    return True
  else:
    return False 
```

久经考验

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-20T19:08:06.337

```
#Did it with recursion:

def make_bricks(small, big, goal):
    if (small + big * 5 )< goal:
        return False
    if (small + big * 5) == goal:
        return True
    return make_bricks(small-1, big, goal) or make_bricks(small, big-1, goal) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-30T09:58:58.500

这个 Python 代码在 Codingbat 页面中对我有用。

```
def make_bricks(small, big, goal):
  small = small * 1
  big = big * 5
  while big > 0:
    if small == goal or big == goal:
      return True
    if small + big == goal:
      return True
    if small > goal:
      return True
    if big < goal and (small + big) > goal:
      return True
    big = big - 5
  if small > goal:
    return True
  return False 
```

输入和输出：

```
Expected    Run     
make_bricks(3, 1, 8) → True True    OK  
make_bricks(3, 1, 9) → False    False   OK  
make_bricks(3, 2, 10) → True    True    OK  
make_bricks(3, 2, 8) → True True    OK  
make_bricks(3, 2, 9) → False    False   OK  
make_bricks(6, 1, 11) → True    True    OK  
make_bricks(6, 0, 11) → False   False   OK  
make_bricks(1, 4, 11) → True    True    OK  
make_bricks(0, 3, 10) → True    True    OK  
make_bricks(1, 4, 12) → False   False   OK  
make_bricks(3, 1, 7) → True True    OK  
make_bricks(1, 1, 7) → False    False   OK  
make_bricks(2, 1, 7) → True True    OK  
make_bricks(7, 1, 11) → True    True    OK  
make_bricks(7, 1, 8) → True True    OK  
make_bricks(7, 1, 13) → False   False   OK  
make_bricks(43, 1, 46) → True   True    OK  
make_bricks(40, 1, 46) → False  False   OK  
make_bricks(40, 2, 47) → True   True    OK  
make_bricks(40, 2, 50) → True   True    OK  
make_bricks(40, 2, 52) → False  False   OK  
make_bricks(22, 2, 33) → False  False   OK  
make_bricks(0, 2, 10) → True    True    OK  
make_bricks(1000000, 1000, 1000100) → True  True    OK  
make_bricks(2, 1000000, 100003) → False False   OK  
make_bricks(20, 0, 19) → True   True    OK  
make_bricks(20, 0, 21) → False  False   OK  
make_bricks(20, 4, 51) → False  False   OK  
make_bricks(20, 4, 39) → True   True    OK  
other tests
OK 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-24T17:28:36.300

```
def make_bricks(small, big, goal):

  def b_req(big, goal):
    req = goal // 5
    if req <= big and req > 0 :
      return req
    else:
      return big
  if goal < 5:
    s_req = goal
  else:
    s_req = goal - ( b_req(big, goal) * 5 )

  if small + big * 5 < goal or s_req > small :
    return False
  elif s_req <= small :
    return True 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-24T14:08:30.903

```
def make_bricks(small, big, goal):
  big_used = min(goal / 5, big)
  small_used = min(goal - big_used * 5, small) 
  return big_used * 5 + small_used == goal 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-22T07:19:28.907

您可以尝试以下方法：

```
if(((small*1)+(big*5)) < goal):
    return False
elif((5*(goal//5))+small<goal):
    return False
else:
    return True 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-23T19:03:03.140

虽然这个问题已经被回答死了，但我想发布我的单行字。我们使用的逻辑是 1）找出将使用多少大砖（最多可用的数量）然后 2）看看是否有足够的小砖来弥补差异。

示例代码允许您以不同长度的砖块进行编码：

```
def make_bricks(small, big, goal):
  smallLen = 1
  bigLen = 5

  bigs = goal // bigLen
  smallGoal = goal - (min(bigs, big) * bigLen)

  return smallGoal <= (small * smallLen) 
```

您可以通过将其粉碎来重写它，但它的可读性较差（如果令人满意的话）

```
def make_bricks(small, big, goal):
  return goal - (min(goal // 5, big) * 5) <= small 
```

有趣的是，我们所有的方法都使用最大数量的大砖块找到了解决方案，这确实满足了这个问题，但可能还有其他大小砖块的组合可以给出正确答案。问题没有指定你应该使用所有的大砖。我想你会遍历大块的范围，并确定如果任何一个数字 < 大块的结果也是正确的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-08T20:26:59.123

```
def make_bricks(small, big, goal):

   new_goal = goal - (big * 5) 

   if 5*big > goal:
     new_goal = goal % 5

   return new_goal <= small 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-29T21:39:45.507

```
def make_bricks(small, big, goal):

  if (goal > big*5 + small) : return False   #You do not have enough bricks to make the goal
  if (goal % 5 > small) : return False       #You do not have enough small bricks to make the goal

  return True                                # In all other cases i.e. when all the failure cases above have been taken care of 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-08-22T07:28:19.463

使用此代码：

```
if(((small*1)+(big*5))< goal):
    return False

elif((5*(goal//5))+small<goal):
    return False

else:
    return True 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-05-08T16:28:17.100

这就是我想出的：

```
def make_bricks(small, big, goal):
   bigs = big * 5
   if (bigs >= goal) and (goal % 5 <= small):
     return True   
   if (goal - small <= bigs) and (bigs < goal):    
     return True  
   else:
     return False 
```

甚至不如 Haasan Razas 的回答那么优雅：

```
def make_bricks(small, big, goal):
    return (goal%5)<=small and (goal-(big*5))<=small 
```

** 回应“如果可能 - 你能解释一下你的答案吗？ - N997 Mar 23 at 3:53” 这一行代码涵盖了所有可能性。如果 case 1 和 case 2 都不是 True，则代码将返回 False： Case 1：目标除以 5 的余数需要小于或等于小砖块。这样我们就有足够的小砖来覆盖大砖铺好后剩下的不到 5 英寸的距离。案例2：目标减去所有大砖小于或等于小砖。本案例涵盖了大小不足以实现目标的场景，也涵盖了仅使用小砖块即可实现目标的场景

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-12T05:49:22.480

```
def make_bricks(small, big, goal):

#If you can do with all small, go for it
    if (small >= goal):
        return True

#If small are not enough, find out how many big and small combos
    rem = goal%5
    if (big*5 >= goal):
       if(small >= rem):
          return True
    else:
       if (small >= goal-(big*5) ):
          return True
    return False 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-06-01T04:00:21.437

```
def make_bricks(small, big, goal):
   if (goal//5) <= big: 
       if (goal%5) <= small: 
         return True
       else: 
         return False
   if (goal//5) >= big:
       if (goal - (big*5)) <= small:
         return True
       else:
         return False 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-02-03T17:43:17.820

```
def make_bricks(small, big, goal):
  if big*5 > goal:
    big = goal//5 
  return big*5 +small >= goal 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-10-28T10:30:06.407

> def make_bricks（小，大，目标）：

`b=big*5`

`s=small*1`

`如果 b== 目标或 s== 目标：

```
 return True 
```

如果 b==0: #0

```
if s>=goal:

 return True 
```

如果 s==0：

```
return b>=goal 
```

`if b<goal:`

```
if (b+s)>=goal:
  return True
else:
  return False 
```

如果 b> 目标：

```
 if ((b+s)-goal)%5==0:
   return True 
```

别的：

```
return False 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-08-31T13:16:13.600

3行代码中的完整解决方案：

```
def make_bricks(small, big, goal):
  #find max number of big bricks required
  bigBrickNeeded = goal / 5;
  #check if you have enough big bricks, if not use all big bricks avaible
  bigBrickNeeded = min(big, bigBrickNeeded);
  #fill the gap with small bricks
  return small >= (goal - bigBrickNeeded*5); 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2019-10-28T10:05:14.170

```
def make_bricks(small, big, goal):  

   b=big*5
   s=small*1

   if b==goal or s==goal:   
       return True

   if b==0:  #0
       if s>=goal: 
           return True

   if s==0:    
       return b>=goal

   if b<goal:   
       if (b+s)>=goal:
           return True
       else:
           return False

   if b>goal:
       if ((b+s)-goal)%5==0:
           return True
   else: 
       return False 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2016-11-24T12:48:02.263

该问题表明它可以在没有循环的情况下解决。这个解决方案对我有用，但可能不是最有效的：

```
def make_bricks(small, big, goal):
  if (big*5) + small == goal:
    return True
  elif (goal//5) >= goal:
    return True
  elif small >= goal:
    return True
  else:
    bn = goal//5
    sn = goal - (bn*5)

    if big>= bn and sn<=small:
      return True
    elif big < bn and goal<= (big*5) + small:
      return True
    else:
      return False 
```

# javascript - 将其他数组中的数组插入到for循环中，重复第一个结果

> ID：14173973
> 
> 赞同：0
> 
> 时间：2013-01-05T16:44:48.943
> 
> 标签：javascript, arrays, for-loop, multidimensional-array

在此循环中将数组插入另一个数组时出现问题：

```
function formToArray(frm){
    var sAux={};
    var AnnotationsQuestion={};
    var AllAnnotationsQuestion=[];

    for (i = 0; i < frm.length; i++) {

    //next line dont work
    sAux['question_id'] = frm[i].name.substring(13)
    sAux['answer']=frm[i].value;
    sAux['id']=0;
    AnnotationsQuestion['AnnotationsQuestion']=sAux;
    AllAnnotationsQuestion.push(AnnotationsQuestion);
    }

return AllAnnotationsQuestion 
} 
```

这将返回重复 x 次的第一个结果

返回值示例

```
[{'AnnotationsQuestion':{'question_id':4,'answer':
'AA'....}},{'AnnotationsQuestion':{'question_id':4,'answer':
'AA'....}}] 
```

这个循环有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:53:02.943

这更安全和可读

[演示](http://jsfiddle.net/mplungjan/m4rW6/)

```
function formToArray(frm){
  var AllAnnotationsQuestion=[];

  for (var i = 0; i < frm.length; i++) {
    AllAnnotationsQuestion.push({
      'AnnotationsQuestion': {
        'question_id': frm[i].name.substring(13),
        'answer': frm[i].value, 
        'id':0 
      }
    });
  }
  return AllAnnotationsQuestion; 
} 
```

# roblox - 如何离线使用 roloxstudio？

> ID：14173974
> 
> 赞同：0
> 
> 时间：2013-01-05T16:44:53.397
> 
> 标签：roblox

如何禁用 robloxstudio 中的脚本检查？

通常你不能在离线模式下运行任何脚本，因为 robloxstudio 想在之前检查它，如果你没有互联网，运行它会延迟很长时间。

我记得我之前通过编辑文件修复了它，但我不记得在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T22:32:26.170

您只需正常打开它并确保将游戏保存到硬盘驱动器。但是，您将无法看到大多数纹理和贴花。

# sql - SQL Server 消除具有“重复”数据的行

> ID：14173975
> 
> 赞同：2
> 
> 时间：2013-01-05T16:44:56.707
> 
> 标签：sql, sql-server

我有以下格式的数据：

```
DATE                 DATA1                 DATA2
-------------------------------------------------
20121010             ABC                   DEF
20121010             DEF                   ABC
20121010             HIJ                   KLM
20121010             KLM                   HIJ
20121212             ABC                   DEF
20121212             DEF                   ABC
20121212             HIJ                   KLM
20121212             KLM                   HIJ 
```

我想要做的是选择第 1 行和第 3 行。我不关心第 2 行和第 4 行，因为它们在我眼中本质上是“重复的”。

看起来很简单，但我只是想把查询放在一起来完成这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:48:38.023

`row_number()`假设您使用的是 2005 或更高版本，您可以使用该功能：

```
select date, data1, data2
from (select t.*,
             row_number() over (partition by date order by date) as seqnum
      from t
     ) t
where seqnum = 1 
```

该表达式`order by date`应在任何支持`row_number`. 在 SQL Server 中，您还可以使用`order by (select NULL)`.

或者，我意识到您的问题可能是关于消除重复的，无论顺序如何。为此，您可以这样做：

```
select distinct date, minData, maxData
from (select t.date,
             (case when data1 > data2 then data1 else data2 end) as minData,
             (case when data1 > data2 then data2 else data1 end) as maxData
      from t
     ) t 
```

但是，当只出现一行时，这可能会重新排列这两个值。

保持列的原始顺序并消除额外行的更复杂的解决方案结合了两种方法：

```
select date, data1, data2
from (select t.*,
             row_number() over (partition by date order by minData, maxData) as seqnum
      from (select t.*
                   (case when data1 > data2 then data1 else data2 end) as minData,
                   (case when data1 > data2 then data2 else data1 end) as maxData
            from t
           ) t
     ) t
where seqnum = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T22:28:44.390

```
SELECT Date,  Data1, Data2
FROM tableX
WHERE Data1 <= Data2

UNION 

SELECT Date,  Data2, Data1
FROM tableX
WHERE Data2 < Data1 ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T17:11:20.220

我喜欢这样：但我相信如果你使用 pre`SQL-Server 2008R2`

```
;WITH myCTE
        AS
        (
        SELECT 
            [Rw] = ROW_NUMBER() OVER (ORDER BY [Date]),
            [Date],
            [DATA1],
            [DATA2]
        FROM #data
        )
SELECT *
FROM myCTE x    
WHERE NOT EXISTS
            (
            SELECT 1
            FROM myCTE y
            WHERE
                x.DATA1 = y.DATA2 AND
                x.Rw > y.Rw AND
                x.Date = y.Date
            ) 
```

[**这是SQL Fiddle**](http://sqlfiddle.com/#!3/f3df7/1)上的实时插图[](http://sqlfiddle.com/#!3/f3df7/1)

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T17:30:18.247

你可以试试这个：

[SQL 演示在这里](http://sqlfiddle.com/#!3/88259/12)

```
;WITH CTE AS
(
  SELECT date, data1, data2, 
  CASE WHEN DATA2 > DATA1 THEN data1 + data2 
  ELSE data2 + data1 END d
  FROM T
),CTE2 AS 
(
  SELECT *,
  ROW_NUMBER() OVER (PARTITION BY DATE, d 
                     ORDER BY data1) rn
  FROM CTE
)
SELECT date, data1, data2 FROM CTE2 WHERE rn = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T22:12:26.023

```
 ;WITH cte AS
 (
  SELECT DATE, DATA1, DATA2, ROW_NUMBER() OVER(ORDER BY DATE, DATA1) AS Id
  FROM dbo.test70 t
  )
  SELECT c.DATE, c.DATA1, c.DATA2
  FROM cte c LEFT JOIN cte ct ON c.Id = ct.Id + 1 AND c.DATA1 = ct.DATA2 
  WHERE ct.DATE IS NULL 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/16383/1/0)上的演示[](http://sqlfiddle.com/#!3/16383/1/0)**

# php - PHP - 发送表单后如何设置 URL？

> ID：14173979
> 
> 赞同：0
> 
> 时间：2013-01-05T16:45:21.133
> 
> 标签：php, forms, url, post, get

我有一个网站 ( `www.website.com`)，主页上有一个表单，用户在其中设置了一个城市。发送表单后，我尝试使用以下 URL 地址：

```
www.website.com/city-name 
```

但是我在这里有点迷茫，因为我不确定如何设置表单（GET 或 POST 更适合这种需要？），以及`.htaccess`.

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:51:09.790

提交表单后，您可以通过 PHP 重定向重定向您的用户，还是我遗漏了什么？

```
header('Location: http://www.website.com/city-name'); 
```

**但要小心，这只能在您发送任何输出之前使用！**

PHP：[标头（）](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:54:28.530

你可以让提交按钮运行一个javascript函数。在那个javascript函数中，使用

`var cityName = document.getElementById("the textarea id").value`

获取用户为城市名称键入的值。然后重定向到正确的页面：

`window.location='http://www.website.com/' + cityName`

# javascript - ajax：本地服务器没有数据

> ID：14173981
> 
> 赞同：1
> 
> 时间：2013-01-05T16:45:28.137
> 
> 标签：javascript, html, ajax

我在linux机器上使用php。[我的 html 代码向本地 apache 服务器 ( http://localhost](http://localhost) )发出 ajax 请求，来自服务器的数据应该打印在屏幕上。但是，没有打印任何内容。

“客户端”端的代码（我在浏览器中加载的 html 文件）是：

```
<html> 
    <body>
        <script language="javascript" type="text/javascript">
            function ajaxFunction(){
                var ajaxRequest;  // The variable that makes Ajax possible!

                try{
                    // Opera 8.0+, Firefox, Safari
                    ajaxRequest = new XMLHttpRequest();
                } catch (e){
                    // Internet Explorer Browsers
                    try{
                        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                    } catch (e) {
                        try{
                            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                        } catch (e){
                            // Something went wrong
                            alert("Your browser broke!");
                            return false;
                        }
                    }
                }
                ajaxRequest.onreadystatechange = function(){
                    if( ajaxRequest.readyState == 4 ){
                        document.writeln( ajaxRequest.responseText );
                    }
                }
                ajaxRequest.open("GET", "http://localhost/s.php", true);
                ajaxRequest.send(null); 
            }
        </script>
    </body>
</html> 
```

并且“服务器”脚本（即 /var/www/s.php）是：

```
<html>
    <body>
        <?php
            echo date("H:i:s"); 
        ?>
    </body>
</html> 
```

有什么建议么？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:57:26.667

页面加载时似乎没有任何调用`ajaxFunction`，因此永远不会发送请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:51:35.440

你应该调试你的代码

1.  检查 s.php 已加载的 Apache 访问日志
2.  如果已加载，则将调试警报功能添加到 onreadystatechange 回调函数
3.  如果调用此函数，则检查它收到的返回码：`alert(ajaxRequest.readyState);`
4.  如果代码为 4，则检查它返回的内容：`alert(ajaxRequest.responseText);`

# java - Java 和 SWT：线程和侦听器

> ID：14173983
> 
> 赞同：3
> 
> 时间：2013-01-05T16:45:54.720
> 
> 标签：java, swt, listener

我实际上是 Java 和 SWT 的新手，所以我的问题可能听起来很愚蠢。我已经查看了 intrnet（和 stackoverflow），但是对于像我这样的菜鸟来说，所有的答案和示例都太复杂了。

我有一门课，叫它管理员。当我单击一个按钮时，它会在另一个类（处理程序）中启动一个方法。

1.  在 Admin 中，我有一个进度条，它应该随着 Handler 中的操作而增加。
2.  我不知道 Handler 中的操作需要多少时间，但我知道我有 9 个。
3.  我想以某种方式在每种方法完成时通知管理员。

到目前为止我所拥有的：（省略了非相关部分）

管理员.java：

```
ProgressBar bar = new ProgressBar(this, SWT.SMOOTH);
Button btn = new Button(this, SWT.NONE);
btn.setText("Update");
btn.addListener(SWT.Selection, new Listener() {
            public void handleEvent(Event event) {
                btn.setEnabled(false);
                thread.start();
            }
        });
Handler handler = new Handler();
final Thread thread = new Thread(){
            public void run() {
                handler.run();
                for(int i=0; i<=10; i++) {
                    final int value = i;
                    try {
                        Thread.sleep(800);
                    } catch (Exception e) { }
                    display.asyncExec(new Runnable(){
                        public void run() {
                            bar.setSelection(value);
                        }
                    });
                }
            }
        }; 
```

处理程序.java：

```
public class Handler implements Runnable{

void m1() {...}
void m2() {...}
...
void m9() {...}

public void run()
{
 m1();
 m2();
 ...
 m9();

} 
```

通过这个实现，对 handler.run() 的调用可以正常工作，并且进度条正在填充，但当然它们无论如何都不是“相关的”。

我会感谢你的智慧！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:53:17.510

解决这个问题的高度耦合方法是在构造函数中将`Handler`a`ProgressBar`作为输入，`m1()`完成后将进度更新为 1/9，依此类推。一种更好（更解耦）的方法是，您可以“收听” `Handler`，并`Handler`在每个方法完成后触发一个事件及其进度。然后你可以在`Admin.java`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:04:19.887

[`ProgressMonitorDialog`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fdialogs%2FProgressMonitorDialog.html)如果将此库添加到您的应用程序不是什么大问题，我会要求您考虑使用JFace。您的代码将如下所示：

```
ProgressMonitorDialog dialog = new ProgressMonitorDialog(parent);
dialog.run(true, true, new IRunnableWithProgress() {
    @Override
    public void run(IProgressMonitor monitor) throws InvocationTargetException,
            InterruptedException {

        monitor.beginTask("my work", 9);

        m1();
        monitor.worked(1);

        m2();
        monitor.worked(1);

        ...

        m9();
        monitor.done;
    }
}); 
```

您还可以将`monitor`实例发送到您的`m*`方法中，以获得更详细的报告。在将它们发送到每种方法之前，请查看将初始 9 个刻度中的[`SubProgressMonitor`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FSubProgressMonitor.html)每*一个进一步划分。*`m*`

但这意味着您的进度条是一个新对话框，您可能无法接受，因此在这种情况下，第一个答案适合您的需求。

# jquery - jQuerybounce() 对请求进行排队

> ID：14173993
> 
> 赞同：0
> 
> 时间：2013-01-05T16:46:34.833
> 
> 标签：jquery, bounce

我遇到了 jQuery uibounce() 效果的问题。如果我在图片上来回移动鼠标很多次，它会将请求排入队列并在我悬停图像的时间完全相同的情况下继续弹跳。

我搜索了问题并找到了检查 this.animated 的解决方案。但它也没有奏效。这是我当前的js代码：

```
$(document).ready(function() { $('#admin_".$id."').mouseover(function () { if (!$(this).is(':animated')) $(this).effect('bounce', { times:1 }, 300); }); }); 
```

# android - 这个字符串在做什么？

> ID：14173996
> 
> 赞同：0
> 
> 时间：2013-01-05T16:46:54.527
> 
> 标签：android, string, string-formatting

我正在查看 google api 演示中的小部件示例，我在 strings.xml 中找到了这一行

```
<string name="appwidget_text_format"><xliff:g id="prefix">%1$s</xliff:g></string> 
```

而且我不明白它在做什么，我从未见过这样的事情，有人可以向我解释一下这里发生了什么。

我的意思是整体，xliff:g 和 id，尤其是“%1$s”。它在做什么？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:57:29.127

`xliff`这里是一个额外的命名空间（应该在 xml 标头中指定）并引用[XML Localization Interchange File Format](http://en.wikipedia.org/wiki/XLIFF)。

这`%1$s`是一个值的占位符，您可以稍后使用[getString(int resId, Object... arg)](http://developer.android.com/reference/android/content/Context.html#getString%28int,%20java.lang.Object...%29)方法在 Activity 中设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:53:15.923

我相信这是一种引用作为参数传入的字符串的方法。看看[这里](http://developer.android.com/guide/topics/resources/string-resource.html)的**格式化字符串**，他们给出了一个使用它的例子。同样，您可以执行 %2$d 来引用小数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T17:03:38.697

您最好参考[如何使用 Formatter](http://developer.android.com/reference/java/util/Formatter.html)来获得对“%1$s”部分的更多理解。

# jquery - 如何从画布制作缩略图？

> ID：14173997
> 
> 赞同：2
> 
> 时间：2013-01-05T16:46:57.987
> 
> 标签：jquery, canvas

我有一个 HTML5 画布，其中包含一些包含图片的 div。我需要将此画布设为 img 并将其传输到另一个 div 中的 img 元素（画布外部）并调整其大小（img 元素比画布小）。

这再次意味着，我基本上想用它的所有内容“描绘”我的画布并将其放入一个更小的（比画布）img 元素中。

![这是我为您制作的照片，以便您更好地理解](../Images/abb2da909301c0bf81e3ac8a5e5cfca5.png)

*假设图片与画布具有相同的宽高比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:51:24.297

这行得通吗？？

```
 <canvas id="myCanvas"></canvas>

    <img id="otherImage" src="..." />
    <img id="otherOtherImage" src="..." />

    <img id="savedPic" />

<form>
<input type="button" name="SavePic" value="Save Picture" onClick="savePic()">
</form>

<script type="text/javascript">
     function savePic(){
          var canvas = document.getElementById("myCanvas");
          if (canvas.getContext) {
               var ctx = canvas.getContext("2d");
               var iOne = document.getElementById("otherImage");
               var iTwo = document.getElementById("otherOtherImage");
               ctx.drawImage(iOne,0,0);
               ctx.drawImage(iTwo,50,50);

               var toSave = canvas.toDataURL("image/png");
               var imageElement = document.getElementById("savedPic");  
               imageElement.src = toSave;

          }
}
</script> 
```

因此，它分两步完成。首先将外部图像绘制到画布上，然后将整个画布保存到“缩略图”图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-11T13:30:08.343

我使用了下面的代码并且它工作得很好，它将整个画布转换为图像并下载该图像：

```
 const canvas = document.getElementById('main-canvas');
                const context = canvas.getContext('2d');
                context.save();
                context.globalCompositeOperation = 'destination-over';  
                context.fillStyle = 'white';
                context.fillRect(0, 0, canvas.width, canvas.height);
                context.restore();
                var dataURL = context.canvas.toDataURL("image/png", 1.0);
                var a = document.createElement('a');
                a.href = dataURL;
                a.download = "Thumbnail.png";
                document.body.appendChild(a);
                a.click();
                a.remove(); 
```