# StackOverflow 问答 13995000-13995999

# ssis - 根据条件控制 SSIS 包中的流

> ID：13995000
> 
> 赞同：2
> 
> 时间：2012-12-21T17:59:33.350
> 
> 标签：ssis, conditional, control-flow

有没有办法有条件地（通过脚本任务或其他任何东西）控制 SSIS 中的程序流？

目前我有一个包可以动态创建 5 个不同的 excel 表（通过执行 SQL 任务）。有时可能所有 5 个都有数据，或者只有 1 个可能有数据。当它只有 1 有数据时，就可以了。但是当有 5 个 DFT 试图将数据同时写入同一个工作簿时，真正的问题就出现了（尽管里面有不同的工作表）。包因 OLEDB 错误而失败。

经过一番折腾，我终于发现这是一个并发控制问题，不允许我同时写入 excel 文件。为了进一步解决我的问题，我使用优先约束表达式来控制是否创建工作表。但真正的麻烦是，在创建工作表之后，包尝试同时将数据写入 2 个不同的工作表会失败。

有没有办法，我可以为 DFT 分配一个“执行订单”？这就是我正在寻找脚本任务的原因，以便当特定工作表的计数为 0 时，它不起作用并且控件移动到另一个分支。

我希望我没有在这里混淆你。但是，如果我有，我很乐意提供有关此问题的更多详细信息。谢谢阅读。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T18:42:01.723

我的第一个想法是拥有一堆序列容器，每个可能的 Excel 工作表一个，每个容器包含三个任务：

1.  一个脚本任务，以确定是否创建工作表，并相应地设置一个布尔包变量
2.  创建工作表的 SQL 任务
3.  用于填充工作表的数据流任务

任务 1 和 2 之间的优先约束将是布尔值为真的表达式：

![显示@DoNorthRegion 表达式的优先约束编辑器的屏幕截图](../Images/15969211b229641ef3db816ede0248d7.png)

任务 2 和 3 之间的优先约束将是成功约束，序列容器之间的优先约束也是如此。总的来说，它看起来像这样：

![四个序列容器的屏幕截图，其中一个展开以显示内容](../Images/128fc7f8cde4328d8ea6a2bcb1ef3715.png)

# jquery - 验证复选框组

> ID：13995006
> 
> 赞同：3
> 
> 时间：2012-12-21T18:00:15.110
> 
> 标签：jquery, validation, checkbox

我有几组复选框。每个组都包含在字段集中的 div 中。

div 应用了 chk_div 类。我希望能够将用户可以选择的复选框数量限制为 3。我有一个功能可以做到这一点，如果我给每个复选框一个唯一的 ID 并引用它，它就可以工作。

但是我希望能够通过 chk_div 类来做到这一点。因此，我可以拥有任意多组复选框，并且只需执行一次 jQuery。

这是为每个复选框使用唯一 id 的代码。- 容器将是一个 div id。

```
function CheckboxCount(container,maximum)
{//Counts all the checked checkboxes in the given container and once the maximum number of boxes are checked it disables all the rest

    var Checked = ($(container +' :checkbox:checked').length); //Get the number of checkboxes in this container that are checked

    //If the maximum number of checkboxes in the given container have been checked we disable the unchecked ones until the number of checked is lower than max
    if (Checked >= maximum){$(container +' :checkbox:not(:checked)').attr("disabled",true);} //Disable all non checked check boxes
    else{$(container +' :checkbox').attr("disabled",false);} //Enable all checkboxes
} 
```

此功能由代码触发，例如

```
$('#group1').click(function(){CheckboxCount('#group1',3);});
$('#group2').click(function(){CheckboxCount('#group2',3);}); 
```

其中 group1, group2 是包含复选框的 div 的 id。

我想要的是更像这样的东西

```
function test(container,maximum)
{
    $(container +' :checkbox').click(function(){

    var Checked = ($(container+' :checkbox:checked').length);

    if (Checked >= maximum){$(container +' :checkbox:not(:checked)').prop("disabled",true);} 
    else{$(container +' :checkbox').prop("disabled",false);} //Enable all checkboxes}

    });
} 
```

容器是一个类，你可以看到 .click 事件处理程序进入函数内部。唯一的问题是它适用于所有组，无论复选框属于哪个组。

因此，如果我单击第一组中的三个复选框，它也会禁用第二组中的复选框

这是 jsFiddle，所以你可以明白我的意思。- [http://jsfiddle.net/jSgp9/](http://jsfiddle.net/jSgp9/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:15:23.007

我会将其简化为这个**[jsFiddle 示例](http://jsfiddle.net/j08691/jSgp9/3/)**。

```
$('.chk_div input').click(function() {
    if ($(this).parents('.chk_div').find('input:checked').length >= 3) {
        $(this).parents('.chk_div').find(':checkbox:not(:checked)').prop("disabled", true);
    }
    else {
        $(this).parents('.chk_div').find(':checkbox').prop("disabled", false);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:42:53.117

*将此*与*.closest()*和*.find()*一起使用，以保持事件与您正在修改的复选框组相关。

[http://jsfiddle.net/jSgp9/12/](http://jsfiddle.net/jSgp9/12/)

```
$(container +' :checkbox').click(function() {

     var Checked = ($(this).closest(container).find('input:checked').length);

    if (Checked >= maximum) {
        $(this).closest(container).find('input:not(:checked)').prop("disabled",true);
    } 
    else {
        $(this).closest(container).find('input:checkbox').prop("disabled",false);
    } //Enable all checkboxes}

}); 
```

# regex - 如何开发包含正则表达式的 Excel 宏，以便在 Windows 和 Mac 中工作

> ID：13995007
> 
> 赞同：17
> 
> 时间：2012-12-21T18:00:14.497
> 
> 标签：regex, excel, vba, macos

我开发了一个 Excel 2010 VBA 宏，它使用`VBScript.RegExp`. 我的一位用户显然正在使用 Excel Mac 2011，它支持 VBA，但不支持`VBScript.RegExp`.

我看过几篇文章提到可以使用`AppleScript`可由 VBA 宏调用的 RegEx 函数来创建自己的函数。但是，似乎必须有 Excel 文件的 Mac 版本和 Windows 版本。这不太理想。

是否有另一种方法可以在 VBA 中实现与 Windows 和 Mac 兼容的正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T13:30:03.280

I hit this problem trying to use the regexp library when trying to strip html tags from a cell.

I know this wasn't noted within the question as the desired use but, in case it is or future visitors are trying to replace a regex function to remove HTML from tags within a cell within Mac Excel 2011, this user defined function will work. Apologies to the original author, i found it only but can no longer find the source i'm afraid.

```
Public Function StripHTML(zDataIn As String) As String

  Dim iStart As Integer
  Dim iEnd   As Integer
  Dim iLen   As Integer

  Do While InStr(zDataIn, "<") > 0
    iStart = InStr(zDataIn, "<")
    iEnd = InStr(iStart, zDataIn, ">")
    iLen = Len(zDataIn)
    If iStart = 1 Then
      zDataIn = Right(zDataIn, iLen - iEnd)
    Else
      If iLen = iEnd Then
        zDataIn = Left(zDataIn, iStart - 1)
      Else
        zDataIn = Mid(zDataIn, 1, iStart - 1) & _
                  Right(zDataIn, iLen - iEnd)
      End If
    End If
  Loop

  StripHTML = zDataIn

End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T09:29:57.890

不幸的是，还没有找到解决方案——当前的解决方法是简单地用一系列`Replace`调用（或其他必需的操作）替换正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T23:16:13.947

如果您不介意支付 99 美元，可以[使用 Aivosto RegExpr](http://www.aivosto.com/regexpr.html)。显然这是一个纯 VBA 解决方案，应该在 PC 和 Mac VBA 上运行。

或者，为 PC 和 Mac 编写单独的解决方案，然后使用[编译器指令](http://msdn.microsoft.com/en-us/library/office/gg264614.aspx)来分隔在每个平台上运行的代码位

# datetime - 获取每月的第一个星期六和每月最后一周的最后一个星期五

> ID：13995020
> 
> 赞同：2
> 
> 时间：2012-12-21T18:01:09.037
> 
> 标签：datetime, reporting-services, report-designer

这种需求有点奇怪，我可以在 C# 中完成，但似乎无法为报表设计器获取正确的表达式语法。

我想为报告设置默认的开始和结束参数。为此，我需要一个月的第一个星期六和该月最后一周的星期五日期的“仅日期”值。这意味着后一个值实际上可以在下个月。所以对于 2012 年，我的价值观是这样的：

开始日期：10/06/2012 结束日期：11/02/2012

开始日期：11/03/2012 结束日期：11/30/2012

开始日期：2012 年 12 月 1 日结束日期：2013 年 1 月 4 日

我一直在使用 Month()、Weekday()、WeekdayName 等处理条件语句，但运气不佳。有没有人做过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:40:34.407

这是我在第一部分得到的。可能有更好的方法来实现这一点。我所做的是获取当前月份并从中减去一个。然后我将日期和当前年份连接到月份。然后我检查了当天的名称，看看是不是星期六。如果是，那么我使用了那个日期。否则我第二天用同样的检查，依此类推。如果你想使用它，如果你在一月份，你需要添加额外的逻辑。您还可以用您正在使用的参数替换 NOW()。

```
=IIF( WeekdayName(DatePart("w", (CDate((Month(NOW()) - 1) & "/1/" & YEAR(NOW()))))) = "Saturday", (CDate((Month(NOW()) - 1) & "/1/" & YEAR(NOW()))), 
(IIF( WeekdayName(DatePart("w", (CDate((Month(NOW()) - 1) & "/2/" & YEAR(NOW()))))) = "Saturday", (CDate((Month(NOW()) - 1) & "/2/" & YEAR(NOW()))), 
    (IIF( WeekdayName(DatePart("w", (CDate((Month(NOW()) - 1) & "/3/" & YEAR(NOW()))))) = "Saturday", (CDate((Month(NOW()) - 1) & "/3/" & YEAR(NOW()))),
        (IIF( WeekdayName(DatePart("w", (CDate((Month(NOW()) - 1) & "/4/" & YEAR(NOW()))))) = "Saturday", (CDate((Month(NOW()) - 1) & "/4/" & YEAR(NOW()))),
            (IIF( WeekdayName(DatePart("w", (CDate((Month(NOW()) - 1) & "/5/" & YEAR(NOW()))))) = "Saturday", (CDate((Month(NOW()) - 1) & "/5/" & YEAR(NOW()))),
                (IIF( WeekdayName(DatePart("w", (CDate((Month(NOW()) - 1) & "/6/" & YEAR(NOW()))))) = "Saturday", (CDate((Month(NOW()) - 1) & "/6/" & YEAR(NOW()))),
                    (IIF( WeekdayName(DatePart("w", (CDate((Month(NOW()) - 1) & "/7/" & YEAR(NOW()))))) = "Saturday", (CDate((Month(NOW()) - 1) & "/7/" & YEAR(NOW()))),
"1/1/2010"))))))))))))) 
```

另一方面，如果您在 SQL Server 中有一个日历表（尤其是在您需要星期五的时候），那么将有一种非常简单的方法来获取此信息。您可以执行一个简单的选择语句，如下所示：

```
SELECT
    MIN(date)
FROM
    calendar c
WHERE
    MONTH(DATEADD("m", -1, GETDATE())) = MONTH(date)
    AND YEAR(DATEADD("m", -1, GETDATE())) = YEAR(date)
    AND datename(dw, date) = 'Saturday' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:46:27.090

您可能不需要任何大量的条件语句。如果您这样做是为了模拟循环和其他命令式编程功能，那么在[自定义代码](http://msdn.microsoft.com/en-us/library/ms156028.aspx)中创建一个函数来执行此操作可能会更容易。

另一种方法是为您正在执行的特定计算寻找一种算法。例如[，这个答案](https://stackoverflow.com/a/5422046/419956)可以成为获得所需日期的重要基础，只需稍作调整即可。以下是*“本月的第一个星期六”的*工作方式：

1.  本月第 1 天的星期几：

    ```
    =Weekday(DateAdd("d", 1 - Now().Day, Now()), FirstDayOfWeek.Sunday) 
    ```

2.  我们应该在该月的第一天加上多少天：

    ```
    =7 - Weekday(DateAdd("d", 1 - Now().Day, Now()), FirstDayOfWeek.Sunday) 
    ```

3.  所以这个月的第一个星期六的日期是：

    ```
    =DateAdd("d", 
         7 - Weekday(DateAdd("d", 1 - Now().Day, Now()), FirstDayOfWeek.Sunday),
         DateAdd("d", 1 - Now().Day, Now())
        ) 
    ```

*可能有*更聪明的方法可以做到这一点，尽管 VBScript 表达式有点有限。上面的示例也可以调整为“本月最后一周的星期五”。

***底线****：对您的问题的（间接但通用的）答案是考虑算法以达到您想要的日期（尽可能声明性，因为您不能轻松地在表达式中执行循环和内容）。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-12T12:04:35.173

获取上个月的最后一个星期五......

=DateAdd(DateInterval.Day,- Weekday(DateAdd("d", 1 - Now().Day, Now()), FirstDayOfWeek.Saturday), DateSerial(Year(Date.Now), Month(Date.Now), 1))

# objective-c - 如何检测何时没有手指在屏幕上？

> ID：13995021
> 
> 赞同：1
> 
> 时间：2012-12-21T18:01:14.683
> 
> 标签：objective-c, ios, nstimer

我需要一些有关该`touchesEnded`功能的帮助。我想使用该功能`NSTimer`在屏幕上没有手指时启动。`touchesEnded`这可能吗？。目前我有一个`touchesBegan`功能工作:-)。

这是我的代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSUInteger numTaps = [[touches anyObject] tapCount];

    if (numTaps >= 2)
    {
        self.label.text = [NSString stringWithFormat:@"%d", numTaps];
        self.label2.text = @"+1";
        [self.button setHidden:YES];
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
}

- (void)showButton
{
    [self.button setHidden:NO];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:13:58.123

这很棘手。您不会收到告诉您所有手指都已抬起的事件；每个`touchesEnded`只告诉你这个手指是向上的。因此，您必须自己跟踪触摸。通常的技术是在触摸到达时将它们存储在可变集合中。但是你不能自己存储触摸，所以你必须存储一个标识符。

首先在 UITouch 上放置一个类别，以派生这个唯一标识符：

```
@interface UITouch (additions)
- (NSString*) uid;
@end

@implementation UITouch (additions)
- (NSString*) uid {
    return [NSString stringWithFormat: @"%p", self];
}
@end 
```

现在我们必须在我们有触摸时在整个期间保持我们的可变集合，在我们第一次触摸时创建它，并在我们最后一次触摸消失时销毁它。我假设你有一个 NSMutableSet 实例变量/属性。这是伪代码：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    // create mutable set if it doesn't exist
    // then add each touch's uid to the set with addObject:
    // and then go on and do whatever else you want to do
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    // remove uid of *every* touch that has ended from our mutable set
    // if *all* touches are gone, nilify the set
    // now you know that all fingers are up
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:22:52.303

要创建空闲计时器，最简单的方法是创建 UIApplication 的自定义子类，然后覆盖`sendEvent:`- 在这里，调用 super 并重置您的计时器。这将涵盖您的所有内容。您的应用程序接收到的每次触摸都会通过此方法。

要使用自定义应用程序子类，您需要将 main.m 中的调用修改为 UIApplicationMain()，插入您的自定义类名称。

# java - 如何在从 Java 对象解析的 json 数组中添加 Json 标头

> ID：13995024
> 
> 赞同：2
> 
> 时间：2012-12-21T18:01:31.063
> 
> 标签：java, android, json

我发现了许多将 java 对象解析为 Json 的示例。谢谢你。但我有一个问题，我希望 Json 采用以下格式

```
{
  "parent":
  {
    "sub-parent-1":
    {
      "child-1": 1,
      "child-2": 2
    },
    "sub-parent-2":
    {
      "child-2": 3
    }
  }
} 
```

用java可以吗？请回答。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T18:06:12.473

像在 Java 中一样创建当前 Json 字符串：

```
 JSONObject parent = new JSONObject();
    JSONObject subparentone = new JSONObject();

    JSONObject subparenttwo = new JSONObject();

    subparentone.put("child-1", "1");
    subparentone.put("child-2", "2");

    subparenttwo.put("child-2", "3");

    parent.put("sub-parent-1", subparentone);
    parent.put("sub-parent-2", subparenttwo);

   JSONObject finalparent = new JSONObject();
   finalparent.put("parent", parent); 
```

和 finalparent JsonObject 输出为：

```
{
  "parent": {
    "sub-parent-1": {
      "child-1": 1,
      "child-2": 2
    },
    "sub-parent-2": {
      "child-2": 3
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:44:02.580

我为父类创建了类并将子类传递给它。并使用 Gson 将该父类转换为 Json。

# vb.net - vb .net createfile，WinUsb，一定要释放资源吗？

> ID：13995025
> 
> 赞同：0
> 
> 时间：2012-12-21T18:01:46.743
> 
> 标签：vb.net

我必须在一些 VB .NET 项目中使用从 kernel32.dll 导入的 CreateFile 来获取 WinUSB 进一步功能的句柄。

问题是当我不再需要句柄时，我是否需要在 CreateFile 之后以某种方式/某些东西销毁？

第二个问题是我使用带有 CreateFile 返回句柄的 WinUsb_Initialize() 来获取另一个用于 WinUSB 的句柄。我也需要做一些清洁吗？

提前致谢，

* * *

```
 <DllImport("kernel32.dll",
            SetLastError:=True,
            CharSet:=CharSet.Auto)> _
    Private Shared Function CreateFile(ByVal lpFileName As String,
                                       ByVal dwDesiredAccess As Int32,
                                       ByVal dwShareMode As UInt32,
                                       ByVal lpSecurityAttributes As IntPtr,
                                       ByVal dwCreationDisposition As UInt32,
                                       ByVal dwFlagsAndAttributes As UInt32,
                                       ByVal hTemplateFile As IntPtr) As SafeFileHandle
    End Function

    <DllImport("kernel32.dll",
        CharSet:=CharSet.Auto,
        SetLasterror:=True)>
    Public Shared Function CloseHandle(ByVal Handle As Integer) As <MarshalAs(UnmanagedType.Bool)> Boolean
    End Function 
```

现在我在某处读到，如果我在 CreateFile 中使用安全处理程序，则不需要 CloseHandle。这是我的“断开连接”代码

```
Dim ErrorStatus As Integer = 0

If hWinUSBInterface <> INVALID_HANDLE_VALUE Then
    WinUsb_Free(hWinUSBInterface)
    hWinUSBInterface = INVALID_HANDLE_VALUE
End If

If hDevice <> INVALID_HANDLE_VALUE Then

    'hDevice = INVALID_HANDLE_VALUE
    'RaiseEvent Error(ErrorStatus, "Disconnect")

    If CloseHandle(hDevice) Then
        hDevice = INVALID_HANDLE_VALUE
        RaiseEvent Disconnected()
    Else
        ErrorStatus = Err.LastDllError
        RaiseEvent Error(ErrorStatus, "Disconnect")
    End If

End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:52:13.473

`HANDLE`您从中获得的必须`CreateFile()`通过 pinvoking 释放`CloseHandle()`。

`WINUSB_INTERFACE_HANDLE`您从中获得的必须`WinUSB_Initialize()`通过 pinvoking 释放`WinUSB_Free()`。

请注意，这些功能的 MSDN 库文章中详细说明了这些要求。

# c# - 如何将 SyndicationItems 列表转换为字符串数组

> ID：13995030
> 
> 赞同：0
> 
> 时间：2012-12-21T18:02:14.840
> 
> 标签：c#, windows-phone-7

我有一个 rss 提要阅读器，它接收 rss 提要并将其绑定到`ListBox`.

```
StringReader stringReader = new StringReader(feedXML);
        XmlReader xmlReader = XmlReader.Create(stringReader);
        SyndicationFeed feed = SyndicationFeed.Load(xmlReader);
feedListBox.ItemsSource = feed.Links; 
```

相反，我想将提要链接存储在一个字符串数组中，这样我就可以在我的应用程序的其他地方使用所有这些链接。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:03:38.077

如果您只想要 Uri 的字符串表示列表，您可以从 feed.Links 中选择它们

```
 var links = feed.Links.Select(l => l.Uri.OriginalString); 
```

# android - Android Endless List/Grid 使用通用图像加载器

> ID：13995031
> 
> 赞同：0
> 
> 时间：2012-12-21T18:02:15.763
> 
> 标签：android, image, list, loader

我正在使用通用图像加载器库来加载一个网格和`ListView`一堆图像 URL。

我有一种方法可以一次拉出 24 个，然后将它们添加到`ArrayList`.

我的适配器基本上从中获取计数`ArrayList`，并很好地显示它们。

在我`getView`的适配器方法中，我检查它们是否处于最大图像（大小`ArrayList`），如果是，它运行另一种方法来获得 24 个以上。

这实际上效果很好，并在下面加载了另外 24 张图像，但大约 2-3 次后，我收到一条错误消息，指出数据已更改但上下文不知道。

我尝试使用 a `notifyDataSetChanged()`，但我在它运行获取更多图像的方法后立即将它放入适配器中......现在在 2-3x 之后，我没有收到错误，但我不能再单击任何项​​目。

有没有办法`notifyDataSetChanged()`在适配器外部运行我的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:07:24.367

```
MyAdapter.notifyDataSetChanged(); 
```

这里的 MyAdapter 是您定制的适配器类的对象。

看看[这里](https://github.com/antonio081014/Price-and-Tip/blob/master/src/com/antonio081014/pricetip/MainActivity.java)的代码。

# c# - 以编程方式设置 Active Directory 密码时，如何要求更改密码？

> ID：13995035
> 
> 赞同：2
> 
> 时间：2012-12-21T18:02:51.190
> 
> 标签：c#, active-directory, passwords

我正在使用以下代码重置用户的 Active Directory 密码。

```
using (var context = new PrincipalContext( ContextType.Domain ))
{
  using (var user = UserPrincipal.FindByIdentity( context, IdentityType.SamAccountName, userName ))
  {
      user.SetPassword( "newpassword" );
  }
} 
```

但是我需要能够要求用户在他们第一次登录后更改密码。但是，我找不到可以完成这项工作的方法、设置或属性。很明显这是可以做到的，我就是不知道怎么做！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:41:22.920

您需要立即使新创建的密码过期 - 试试这个：

```
using (var context = new PrincipalContext(ContextType.Domain))
using (var user = UserPrincipal.FindByIdentity(context, IdentityType.SamAccountName, userName))
{
    user.SetPassword("newpassword");
    user.ExpirePasswordNow();
} 
```

有关更多详细信息，请参阅[ExpirePasswordNow 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library%20/system.directoryservices.accountmanagement.authenticableprincipal.expirepasswordnow.aspx)

# c# - 调试注入进程

> ID：13995042
> 
> 赞同：0
> 
> 时间：2012-12-21T18:03:20.430
> 
> 标签：c#, wpf, visual-studio, debugging, dll-injection

我在调试 DLL 时遇到问题，该 DLL 通过 VC++ DLL 注入到 WPF 应用程序中。注入工作正常。这是从开始到问题的指南：

1.  我开始调试 WPF 测试应用程序（.Net 4.0 / x86）。
2.  启动后`ButtonClickEvent`启动一个小的 ConsoleApplication，它通过 C++ 函数开始注入 3.出于测试目的，程序在`Debugger.Break()`调用时停止。到此为止还好。
3.  当我尝试向前迈进时，它仍在工作，但是当我到达`foreach`由注入的 DLL 管理的循环或对另一个类的调用时，调试器立即停止工作，并且 WPF 应用程序关闭。

如果我在没有中断点的情况下运行这些代码，则没有错误。我不知道，这是我的错，所以我希望你能给我一些解决方法。

# apache - Apache重定向一行

> ID：13995045
> 
> 赞同：0
> 
> 时间：2012-12-21T18:03:23.750
> 
> 标签：apache, .htaccess, http-redirect

如何在一行上使用 RewriteRule 执行重定向。

例如，我想结合以下内容：

```
RewriteRule ^sport\/baseball http://www.espn.com [L,R=301]
RewriteRule ^sport\/football http://www.espn.com [L,R=301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:05:43.567

你可以做

```
RewriteRule ^sport\/(baseball|football) http://www.espn.com [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:10:11.257

试试这个规则：

```
RewriteRule ^sport\/(base|foot)ball http://www.espn.com [L,R=301] 
```

# wpf - WPF Datagrid 行验证

> ID：13995048
> 
> 赞同：10
> 
> 时间：2012-12-21T18:03:42.093
> 
> 标签：wpf, validation, wpfdatagrid

WPF 4.0 DataGrids 中似乎有一个错误。

我正在`IDataErrorInfo`我的对象上实现，并且我有`ObservableCollection`一个数据网格绑定到的对象。我已经`ValidatesOnDataErrors=True`设置了列，但没有设置任何行。我有`UpdateSourceTrigger="PropertyChanged"`

验证在逐个单元格级别上完美运行。但是，当您使单元格无效时，转到任何其他单元格，然后返回无效单元格并输入有效数据，该单元格将变为有效，但该行在应该有效时仍然无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-29T14:28:21.860

在一般的属性验证中，一旦源得到更新，它将被验证，但在这种情况下，`RowValidation`您需要指定`RowValidationRule` 执行`RowValidation`.

```
 <DataGrid.RowValidationRules>
       <DataErrorValidationRule ValidatesOnTargetUpdated="True" ValidationStep="UpdatedValue" />
 </DataGrid.RowValidationRules> 
```

现在`DataGrid`将验证行，您也可以提供`RowValidationErrorTemplate`以自定义格式显示错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T19:23:41.437

有同样的问题。对我来说，解决方法是设置`ValidatesOnTargetUpdated="True"`验证规则，这似乎会在每次更新控件时强制进行另一次验证。

# twitter-bootstrap - 自定义旧版本的 twitter bootstrap

> ID：13995050
> 
> 赞同：0
> 
> 时间：2012-12-21T18:04:16.483
> 
> 标签：twitter-bootstrap

我知道我可以[在这里自定义 Bootstrap](http://twitter.github.com/bootstrap/)

但是我需要对 2.1.1 版本进行一些自定义，我在哪里可以找到`Customize and download`它？

# jakarta-ee - 为什么我的 pom.xml 中出现此依赖项解析错误？

> ID：13995057
> 
> 赞同：2
> 
> 时间：2012-12-21T18:04:54.750
> 
> 标签：jakarta-ee, maven, pom.xml, atmosphere

当我尝试构建我的网络应用程序时，我收到以下错误 -

> 无法在项目 MyApp 上执行目标：无法解析项目 com.myapp:MyApp:war:1.0-SNAPSHOT 的依赖项：在 primefaces 中找不到工件 org.atmosphere.samples:atmosphere-jaxrs2-chat:jar:1.0.5 ( http://repository.primefaces.org/) -> [帮助 1]

这是我的 pom.xml 的存储库和依赖项部分

```
<repositories>
    <repository>
        <url>http://repository.primefaces.org/</url>
        <id>primefaces</id>
        <layout>default</layout>
        <name>Repository for library PrimeFaces 3.2</name>
    </repository>
</repositories>

<dependencies>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.5-SNAPSHOT</version>
    </dependency>  
    <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>atmosphere-runtime</artifactId>
        <version>1.0.6</version>
    </dependency>              
    <dependency>
        <groupId>org.atmosphere.samples</groupId>
        <artifactId>atmosphere-jaxrs2-chat</artifactId>
        <version>1.0.5</version>
    </dependency>
</dependencies> 
```

我不明白为什么它在 primefaces 存储库中寻找工件 org.atmosphere.samples:atmosphere-jaxrs2-chat:jar:1.0.5 ？为什么不直接从中央 Maven 存储库中提取它？我认为默认情况下会自动使用存储库？

气氛运行时工件似乎没有问题，所以我不明白为什么其他气氛工件会导致此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T20:04:13.857

该版本的工件不在 maven 存储库中，至少不在该组和工件 ID 中... maven 中央存储库中的最后一个版本是 1.0.1，您可以[**在此处看到**](http://mvnrepository.com/artifact/org.atmosphere.samples/atmosphere-jaxrs2-chat)

# objective-c - 在 NSArray 中创建 UIVews 网格

> ID：13995058
> 
> 赞同：1
> 
> 时间：2012-12-21T18:05:00.687
> 
> 标签：objective-c, ios, gridview, uiview, nsarray

我想要做的是对齐阵列中的网格中的视图。我已经创建了视图和数组。

```
for (int i = 0; i < [directoryContents count]; i++){

    UIView *containerView = [[UIView alloc] initWithFrame:CGRectMake(0,0,100,120)];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchDown];
    [button setTitle:@"Show View" forState:UIControlStateNormal];
    button.frame = CGRectMake(0, 0, 100, 100);
    button.accessibilityIdentifier = [directoryContents objectAtIndex:i];

    UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(0, 100, 100, 20)];
    label.textAlignment = NSTextAlignmentCenter;
    label.text = [directoryContents objectAtIndex:i];

    [containerView addSubview:button];
    [containerView addSubview:label];

    [self.view addSubview:containerView];

    [_containerViewArray addObject:containerView];

}
[self layoutViews:_containerViewArray inView:self.view]; 
```

我所做的工作是将它们彼此对齐，我遇到的问题是我需要让它们包裹起来而不是离开边缘。我正在为他们做的事情是这样的

```
 - (void)layoutViews:(NSArray *)views inView:(UIView *)contentView
{

    NSInteger overallWidth = 0;
    for ( UIView *view in views ) {
        overallWidth += view.frame.size.width;
    }

    CGSize contentSize = contentView.frame.size;

    CGFloat startOffset = (contentSize.height - overallWidth)/2.0;
    CGFloat offset = startOffset;
    for ( UIView *view in views ) {
        CGRect frame = view.frame;
        frame.origin.x = offset;
        view.frame = frame;
        offset += view.frame.size.width;
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:18:10.960

这是我在 UICollectionView 发布之前使用的，易于修改以适应网格中所需的行数以及视图的大小。

```
NSUInteger buttonWidth = 100;
NSUInteger buttonHeight = 100;
NSUInteger space = 5;

float scrollContentY = (ceilf((float)imageNames.count / 3.0f) * (buttonHeight + space));
[myArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    int row = idx / 3;
    int column = idx % 3;

    UIView *view = [UIView new];
    [view setBackgroundColor:[UIColor redColor]];
    view.frame = CGRectMake((buttonWidth + space) * column + space, (buttonHeight + space) * row + space , buttonWidth, buttonHeight);
    [view setTag:(NSInteger)idx];

    [self.scrollView addSubview:view];
    [self.scrollView setContentSize:CGSizeMake(self.scrollView.frame.size.width, scrollContentY)];
}]; 
```

请注意，如果您有一个大数组要枚举，这可能是不可取的，因为它没有任何类型的可重用视图。它将为数组中的每个项目分配/初始化一个视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:07:14.837

如果我们假设我们有一个部分数组（您的视图）并且您需要每行布局 3 个项目，则视图的大小为 98*98，水平间距为 6.5px，垂直间距为 8px

```
for (int i = 0; i< [sectionsArray count]; i++) {
    int row = (int)i/3;
    int col = i%3;
    float x = 6.5 + (104.5*col);
    float y = 8 + (106*row);
    UIView *sectionView = [[UIView alloc] initWithFrame:CGRectMake(x, y, 98, 98)];
    sectionView.backgroundColor = [UIColor clearColor];
    //button
    UIButton *sectionButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [sectionButton setTintColor:[UIColor grayColor]];
    sectionButton.frame = CGRectMake(0, 0, 98, 98);
    sectionButton.tag = i+100;
    [sectionButton addTarget:self action:@selector(showSectionDetail:) forControlEvents:UIControlEventTouchUpInside];
    [sectionView addSubview:sectionButton];

    //adding title
    UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 75, 98, 20)];
    titleLabel.textAlignment = UITextAlignmentCenter;
    titleLabel.backgroundColor=[UIColor clearColor];
    titleLabel.font=[UIFont fontWithName:@"Helvetica" size:14];
    titleLabel.textColor = [UIColor colorWithRed:241.0/255.0 green:124.0/255.0 blue:22.0/255.0 alpha:1.0];
    titleLabel.text = [[sectionsArray objectAtIndex:i] objectForKey:@"Title"];
    [sectionView addSubview:titleLabel];
    [titleLabel release];
    [scroll addSubview:sectionView];        
    [sectionView release];
}
int numberOfRows;
if ([sectionsArray count]/3.0f == 0) {
    numberOfRows = [sectionsArray count]/3;
}else{
    numberOfRows = [sectionsArray count]/3 +1;

}
scroll setContentSize:CGSizeMake(320, numberOfRows*106); 
```

# visual-studio - 分发 Visual Studio 隔离 Shell 应用程序

> ID：13995060
> 
> 赞同：0
> 
> 时间：2012-12-21T18:05:01.567
> 
> 标签：visual-studio, vs-extensibility, vspackage

我正在考虑使用[Visual Studio 隔离外壳](http://msdn.microsoft.com/en-us/library/bb685691.aspx)实现应用程序。包含依赖项的方法是包含[Visual Studio 隔离 shell 可再发行包](http://www.microsoft.com/en-us/download/details.aspx?id=30670)，但它是**221.6Mb**。对我们来说非常大。

您是否知道任何其他替代方案，也许只分发您正在使用的 DLL？

比如我只需要Docking Windows系统和编辑器。我可以只在我的安装程序中添加一些更轻的 DLL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:31:13.283

答案是否定的；不过，理论上你可以破坏安装程序并让它与更小的 foo 打印一起工作。但是，请注意，您的 EULA 不允许您进行此类分发。至于制作这种（更小）分布的理论可能性，到目前为止我还没有看到任何关于这样做的文章，但它是存在的任何其他 MSI，你可能无法通过 VS2012 之前的构建轻松实现这一点，但是，如果你对 MSI 和 COM 有一定的了解，并且有足够的时间进行实验，你可能会对 VS2012 有好运。我自己没有尝试过。

# iphone - 对同名的注解进行分组

> ID：13995061
> 
> 赞同：0
> 
> 时间：2012-12-21T18:05:02.107
> 
> 标签：iphone, objective-c, ios, annotations, mkmapview

我目前正在开发一个显示实时数据的 iOS 应用程序，现在我从 API 收到 33,265 个时间点，这些时间点都停止了。所以街道对面的车站算2个，有多个站台的公交车站也算站台的次数。

现在，这在地图上令人困惑。您需要所有数据，例如一个屏幕上的公交车站，而不是浏览过去 10 个平台来获取您想要乘坐的公交车。那么，如何将这些具有相同名称并且经常彼此靠近或重叠的注释分组呢？

您可以在此处找到来自 API 的 JSON 结果示例：http: [//pastebin.com/RiKS4G0Q](http://pastebin.com/RiKS4G0Q)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:12:38.607

只需创建一个新实体`Location`并与每个站点建立一对一的关系（当然，反向是对多）。现在一站式可以共享位置，您可以以适当的方式呈现数据。在导入期间，如果坐标彼此足够接近（并且可能停靠点名称对应），您可以决定创建一个新位置。

# asp.net - 如何让 ASP.NET 菜单控件在没有动态行为的情况下显示嵌套列表？

> ID：13995067
> 
> 赞同：1
> 
> 时间：2012-12-21T18:05:20.007
> 
> 标签：asp.net, aspmenu-control

使用 ASP.NET 菜单控件，我希望返回的标记是嵌套的无序列表*，没有*动态行为。

换句话说，我想将我的 StaticDisplayLevels 设置为数据源的完整深度，而不是生成的标记是 LI 元素的平面列表。

是的，我知道我可以进入 DOM 并获得我需要的东西，但是没有本机行为吗？

```
 <asp:Menu ID="MenuSection" runat="server"                 
                DataSourceID="smdsMenuSection" 
                StaticDisplayLevels="1"
                RenderingMode="List"
                IncludeStyleBlock="False" 
                ClientIDMode="Static"
                SkipLinkText="" 
                >
            </asp:Menu>

            <!-- Sub-navigation Data Source -->
            <asp:SiteMapDataSource ID="smdsMenuSection"  
                StartFromCurrentNode="False" 
                StartingNodeOffset="1"
                ShowStartingNode="True" 
                runat="server" /> 
```

# c# - 测试用例按顺序而不是并行运行

> ID：13995068
> 
> 赞同：1
> 
> 时间：2012-12-21T18:05:21.303
> 
> 标签：c#, visual-studio-2010, tdd, resharper-6.1

我用谷歌搜索了这个问题，但找不到答案。

我的测试运行似乎并行运行并导致彼此失败。它们在单独运行时都通过了。我试图在测试中添加线程并让它们进入睡眠状态，但没有运气。

**有没有办法一个接一个地依次运行这些测试？**

我的环境：

Visual Studio 2010 Resharper Jet 大脑 6.1

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T18:08:15.080

我建议您进行确定性的单元测试。也就是说，它们不依赖于它们运行的​​顺序或其他测试在之前或之后运行的顺序。不这样做是失败的秘诀。大多数测试运行程序基于测试方法完全独立的事实。

这个事实在调用测试类的方法的方式中是很明显的。例如，使用 MS Test，您可以拥有 Assembly、Class 和 Test 初始化方法。所有这些都是为每个被调用的 TestMethod 调用的。例如，使用以下类：

```
 [TestClass()]
   public class DivideClassTest
   {
      [AssemblyInitialize()]
      public static void AssemblyInit(TestContext context)
      {
         Console.WriteLine("Assembly Init");
         }

      [ClassInitialize()]
      public static void ClassInit(TestContext context)
      {
         Console.WriteLine("ClassInit");
      }

      [TestInitialize()]
      public void Initialize()
      {
         Console.WriteLine("TestMethodInit");
      }

      [TestCleanup()]
      public void Cleanup()
      {
         Console.WriteLine("TestMethodCleanup");
      }

      [ClassCleanup()]
      public static void ClassCleanup()
      {
         Console.WriteLine("ClassCleanup");
      }

      [AssemblyCleanup()]
      public static void AssemblyCleanup()
      {
         Console.WriteLine("AssemblyCleanup");
      }

      [TestMethod()]
      public void Test1()
      {
          Console.WriteLine("Test1");
      }
      [TestMethod()]
      public void Test2()
      {
          Console.WriteLine("Test2");
      }
  } 
```

你会看到像这样的输出

```
Assembly Init
ClassInit
TestMethodInit
Test1
TestMethodCleanup
TestMethodInit
Test2
TestMethodCleanup
ClassCleanup
AssemblyCleanup 
```

虽然有一个“测试”类，但 TestMethod 本身被认为是测试。“测试”类可以有效地进行许多测试。

# javascript - 使用 ajax 下拉菜单中的 onclick 事件更新隐藏的输入值

> ID：13995070
> 
> 赞同：1
> 
> 时间：2012-12-21T18:05:27.143
> 
> 标签：javascript, jquery, ajax, onclick

我正在使用 MachForm 并添加了这个隐藏字段：

```
<input type="hidden" name="element_273_price" value=""> 
```

我集成了一个允许触发 onclick 事件的 ajax 下拉菜单。我希望上面的隐藏字段在 onclick 事件之后输入一个值（onclick 会告诉隐藏字段该项目是什么以及该项目的价格），以便我可以将它传递给 JavaScript 的其余部分在屏幕上更新价格。

这是我计算文本框的代码：

```
 $('#main_body li[data-pricefield="text"]').delegate('input.text','keyup mouseout change', function(e) {
        var temp = $(this).attr("id").split('_');
        var element_id = temp[1];
        var ordered = (document.getElementById("element_" + element_id).value);
        var price = $(this).data('pricedef');

        var price_value = price * ordered;
        price_value = parseFloat(price_value);
        if(isNaN(price_value)){
            price_value = 0;
        }

        $("#li_" + element_id).data("pricevalue",price_value);
        calculate_total_payment();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:26:30.733

如果您将输入更改为

```
<input type="hidden" id="element_273_price" value=""> 
```

你应该能够做到

```
$("#element_273_price").val(price_value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:47:01.990

尝试放入您的php文件：

```
'onlick' => '$("element_'.$yourelementid.'_price").val("'.$data['price'].'");' 
```

然后你将在你的 javascript 中从这个隐藏的输入中获取值，而不是你的“数量”输入的 data-priceef 属性。

如果我不理解您的问题，请纠正我。我试图从您在视频中显示的代码回复。

# c - 协方差矩阵gsl

> ID：13995071
> 
> 赞同：2
> 
> 时间：2012-12-21T18:05:35.023
> 
> 标签：c, statistics, gsl

我正在尝试计算两个向量 a 和 b 之间的马氏距离。最终，我将使用它作为统计算法中的距离度量。我正在使用 gsl 来实现它们。马氏距离的公式是 sqrt((ab)'c^-1(ab))，其中 c 是协方差矩阵。根据[这个](http://www.gnu.org/software/gsl/manual/html_node/Covariance.html)gsl 文档，它接受两个数据集并返回一个协方差值。我不确定如何使用它计算协方差矩阵。任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:10:40.260

我认为您首先需要了解协方差矩阵的计算，其次是示例代码以帮助您入门

```
for (i = 0; i < A->size1; i++) {
        for (j = i; j < A->size2; j++) {
          a = gsl_matrix_column (A, i);
          b = gsl_matrix_column (A, j);
          double cov = gsl_stats_covariance(a.vector.data, a.vector.stride,b.vector.data, b.vector.stride, a.vector.size);
          gsl_matrix_set (C, i, j, cov);
        }
      } 
```

# emacs - 默认情况下在启动时在 emacs 中加载 icicle-mode

> ID：13995074
> 
> 赞同：1
> 
> 时间：2012-12-21T18:05:40.103
> 
> 标签：emacs, icicles

我想配置 emacs 以便默认情况下启用 Icy 模式。正如“icicles-doc1.el”中所建议的，我在`.emacs`文件末尾添加了以下代码：

```
(require 'icicles)
(icicle-mode 1) 
```

当我运行 emacs 时，我得到一个 *Warning* 缓冲区：

> 警告（初始化）：加载“c:/Users/USER/AppData/Roaming/.emacs”时出错：
> 
> 文件错误：无法打开加载文件，冰柱
> 
> 为确保正常运行，您应该调查并删除初始化文件中的错误原因。使用 `--debug-init' 选项启动 Emacs 以查看完整的错误回溯。

当我执行调试选项时，*Backtrace* 缓冲区会显示如下内容：

> 调试器进入--Lisp 错误: (file-error "Cannot open load file" "icicles") require(icicles) eval-buffer(# nil "c:/Users/USER/AppData/Roaming/.emacs" nil t) ; 在缓冲区位置读取 5062 load-with-code-conversion("c:/Users/USER/AppData/Roaming/.emacs" "c:/Users/USER/AppData/Roaming/.emacs" tt) load("~/ .emacs" tt) #[0 "\205\262

无论有没有导致问题的那两条线，`.emacs`当我执行`M-x icicle-mode`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T06:23:21.473

`(file-error "Cannot open load file" "icicles")`意味着 Emacs 不知道在哪里可以找到 library `icicles.el[c]`。您需要将**Icicles**文件的位置放在变量中`load-path`。

例如，如果您的**Icicles**文件在目录中，`/my/icicles/`那么您需要这样做（例如，在您的 init 文件中`~/.emacs`）：

```
 (add-to-list 'load-path "/my/icicles/") 
```

在你做之前做那件事`(require 'icicles)`。这样，Emacs 就会知道从哪里加载**Icicles**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T23:51:16.643

鉴于`(require 'icicles)`代码失败，但它`M-x icy-mode`正在工作，那么似乎有人已经通过`autoload`命令将您的 Emacs 安装设置为包含 icicles，但没有更新`load-path`以包含`icicles.el`所在目录。

将这两行替换为：

```
(icy-mode 1) 
```

（相当于`M-x icy-mode`尚未启用冰柱时）

如果要使用*不同*版本的 icicles，则需要将正确的目录添加到加载路径中。

# asp.net-mvc - 如何使用 PostAsJsonAsync 调用 MVC3 控制器操作

> ID：13995084
> 
> 赞同：3
> 
> 时间：2012-12-21T18:06:21.553
> 
> 标签：asp.net-mvc, json, http

我正在从控制台应用程序调用 MVC3 控制器操作 (JsonResult)。为了拨打电话，我使用了 System.Net.Http.HttpClient 和 PostAsJsonAsync 方法。

在 PostAsJsonAsync 方法中，我传递了一个小的 poco 实例。

除了一件事之外，这一切都很好。

***我的问题是我无法在对 MVC3 控制器操作的调用中获取 poco 实例。*** 谁能告诉我该怎么做？

这是代码：

**在控制台应用程序中调用代码：**

```
 var client = new HttpClient();
        client.BaseAddress = new Uri("http://localhost:50285/");

        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

        var user = new HashedUser { UserName = "userName", PasswordHash = "abcdef".GetHashCode() };

        var response = client.PostAsJsonAsync("app/test", user).Result;

        var txt = response.Content.ReadAsAsync<string>().Result; 
```

**在 MVC3 项目中接收代码**

```
public class AppController : Controller
{
    public JsonResult Test(HashedUser json)
    {
        // Problem: json is always a new instance 
        // of HashedUser and not the one passed in 
        // from the call to this controller action.

        return Json("qqq ppp 777 888" + json.UserName);
    }
}

public class HashedUser
{
    public string UserName { get; set; }
    public int PasswordHash { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:05:24.243

您应该将 POCO 序列化并作为 JSON 对象发送。使用 Newtonsoft.Json 来做到这一点。以下是一些示例：

[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx) http://www.west-wind.com/weblog/posts/2012/Aug/30/Using-JSONNET-for-dynamic-JSON-parsing

# wordpress - 如何制作一组缩略图大小以适合使用 wordpress 循环的行

> ID：13995085
> 
> 赞同：0
> 
> 时间：2012-12-21T18:06:38.840
> 
> 标签：wordpress, nested-loops

我想要组合时总是 900px 宽的图像行。

如果它的 1 个图像高度是可变的，宽度是 900px 2 个图像一个可能是 300px 宽，另一个是 600px 宽。

到目前为止，这是我的尝试。

```
 <?php
        $maxHeight = 400;//maximum height of a thumb
        $offset = 0;//start on recent post
        $maxRowWidth = 900;//maximum width of a row
        $stopId=20;//max of 20 posts 
        set_post_thumbnail_size( 9999, $maxHeight );
        $rowWidth=0;//initial row width
        $column = 0;    

        if ( have_posts() ) : while ( have_posts() ) : the_post();
            if ( has_post_thumbnail() ) {
                $tn_id = get_post_thumbnail_id( $post->ID );
                $img = wp_get_attachment_image_src( $tn_id, array(9999,$maxHeight) );
                $width = $img[1];//holds the default image width given max height
                $height = $img[2];//not used yet
                $column = $column+1;
                $rowWidth = $rowWidth+$width;
                if ($rowWidth > $maxRowWidth){
                    $aspectRatio = $rowWidth / $maxHeight;
                    $height= $maxRowWidth / $aspectRatio;
                    //I get an error here when I nest this loop wordpress doesn't like this
                    $query = 'showposts='.$column.'&offset='.$offset;

                    query_posts('$query');
                    if ( have_posts() ) : while ( have_posts() ) : the_post(); 
                        if ( has_post_thumbnail() ) {
                            $img = wp_get_attachment_image_src( $tn_id, array(9999,$height) );
                            the_post_thumbnail();
                                                    }
                        endwhile; else:
                    endif;
                    //wp_reset_postdata();  //commented out because I don't know if I need it
                    $offset = $offset+1;
                    $column = 0;
                    $rowWidth = 0;
                }
            }
        endwhile; else:
    ?> 
```

# command-line - GhostScript 使用 bbox 裁剪 Postscript 文件

> ID：13995097
> 
> 赞同：2
> 
> 时间：2012-12-21T18:07:53.660
> 
> 标签：command-line, runtime, crop, ghostscript, postscript

我想要完成的是使用 bbox 中描述的输出裁剪名为 example.ps 的 PostScript 文件。我在批处理过程中执行此操作，其中某些文件的 bbox 可能不同。我看过 pdfcrop 并看到它使用了类似的方法。这是我现在用来裁剪的命令。

```
gs -o cropped.pdf \
   -sDEVICE=pdfwrite \
   -dDEVICEWIDTHPOINTS=160 \
   -dDEVICEHEIGHTPOINTS=840 \
   -dFIXEDMEDIA \
   -c "0 0 translate 0 0 160 840 rectclip" \
   -f  example.ps 
```

这个命令的问题是我必须指定要使用的宽度和高度。我想要发生的是一些如何首先调用 bbox 然后通过代码或使用某些命令行重定向来调用此语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:37:21.747

首先，请注意，并非多页 PostScript 文件中的每一页都会显示完全相同的“边界框”值（事实上，这种情况很少见）。因此，您可能想找出所有可能的边界框（包括所有边界框）的*共同点。*

其次，您在运行时在控制台窗口中看到的是*标准输入*和*标准输出*输出通道`gs -sDEVICE=bbox`的混合。但是，您要获取的信息将发送到*stderr*。如果将命令输出重定向到文件，则捕获的是*stdout*，而不是*stderr*！要禁止将某些版本和调试信息转到*stderr* ，请添加到命令行。******`-q`******

 ***因此，为了获得所有页面边界框的“干净*”输出，您必须首先*重定向 stderr*通道，然后将其捕获到文件*info.txt*中。所以运行这样的命令（或类似的）：

```
gs              \
  -dBATCH       \
  -dNOPAUSE     \
  -q            \
  -sDEVICE=bbox \
   example.ps   \
2>&1            \
| tee info.txt 
```

甚至这个，如果您不需要有关以下内容的信息`HiResBoundingBox`：

```
gs              \
  -dBATCH       \
  -dNOPAUSE     \
  -q            \
  -sDEVICE=bbox \
   example.ps   \
2>&1            \
| grep ^%%Bound \
| tee info.txt 
```

另外，顺便说一句，请注意，可以确定 PostScript 以及 PDF 输入文件的边界框。

这应该为您提供如下输出，其中每一行代表输入文件的一个页面，从第一行的第 1 页开始：

```
 %%BoundingBox: 36 18 553 802
 %%BoundingBox: 37 18 553 804
 %%BoundingBox: 36 18 553 802
 %%BoundingBox: 37 668 552 803
 %%BoundingBox: 40 68 532 757 
```

**最后，**您可能需要阅读以下答案，了解有关 Ghostscript`bbox`设备的一些背景信息。您还可以在那里找到一些用于裁剪作业的替代 PostScript 代码：

*   [**PDF - 删除白边**](https://stackoverflow.com/a/10418720/359307)
*   [**如何使用 Ghostscript 将 PDF 文件的一部分裁剪为 PNG**](https://stackoverflow.com/a/12485020/359307)***

# python - 在 Python 中：使用 raw_input 在多个文本中搜索两个单词

> ID：13995098
> 
> 赞同：1
> 
> 时间：2012-12-21T18:07:57.607
> 
> 标签：python, macos

我想在一个目录中打开（raw_input）多个文本文件，给它们一个名字（文档1，文档2...），使用“OR”搜索（raw_input）两个词，然后输入搜索词（不带字符“ .,/"" 只有小写的单词）和包含列表或新文本文件中的单词/单词的文件的名称：

我试图将文件放入字典中，但我真的不知道这是否是一个愚蠢的想法？

我不知道如何让用户同时在所有文件中搜索一两个单词（通过 raw_input）。你能帮我或给我一个提示吗？

我希望它打印如下内容：

> > > SearchWord "在"文档 1，python.txt 中找到 SearchWord"在"文档 3，foobar.txt 中找到

```
import re, os

path = raw_input("insert path to directory :")
ex_library = os.listdir(path)
search_words = open("sword.txt", "w") # File or maybe list to put in the results
thelist = []

for texts in ex_library:
    file = os.path.join(path, texts)
    text = open(file, "r")
    textname = os.path.basename(texts)
    print textname
    for names in textname.split():
        thelist.append(names)
    text.close()
print thelist

print "These texts are now open"
print "###########################"

count = 0
for y in ex_library:
    count = count + 1
print count
print "texts total"

d ={}

for x in range(count):
    d["Document {0}".format(x)] = None # I would like the values to be the names of the texts (text1.txt) 
```

# java - 使用 javafx SimpleMapProperty 时出现 UnsupportedOperationException

> ID：13995102
> 
> 赞同：6
> 
> 时间：2012-12-21T18:08:15.320
> 
> 标签：java, javafx-2

为什么下面的代码会抛出`UnsupportedOperationException`？

```
import javafx.beans.property.MapProperty;
import javafx.beans.property.SimpleMapProperty;

public class TestMapProperty {
    static MapProperty<String, String> model = new SimpleMapProperty<String, String>();

    public static void main(String[] args) {
        model.put("blue", "green"); // exception thrown here
    }
} 
```

堆栈跟踪：

```
Exception in thread "main" java.lang.UnsupportedOperationException
    at java.util.AbstractMap.put(AbstractMap.java:203)
    at javafx.beans.binding.MapExpression.put(MapExpression.java:277)
    at TestMapProperty.main(TestMapProperty.java:10) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-27T09:31:02.637

Pace 的答案仍然有效，但如果您想要一个 Property 而不仅仅是 ObservableMap，那么这不是正确的代码。

```
static MapProperty<String, String> model = new SimpleMapProperty<String, String>(FXCollections.observableHashMap()); 
```

会更合适。您仍然需要使用新的 ObservableMap 实例来初始化 SimpleMapProperty。没有 SimpleMapProperty 初始 Map 的构造函数不会为您创建一个。这是因为您可以选择自己的 ObservableMap 实现来支持属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T18:17:20.710

如果你真的想创建一个可观察地图的实例，你应该使用

```
ObservableMap<String,String> model = FXCollections.observableHashMap(); 
```

# jquery - 抛出 jQuery 可以捕获的 AJAX 错误

> ID：13995103
> 
> 赞同：0
> 
> 时间：2012-12-21T18:08:20.697
> 
> 标签：jquery

使用`jquery.ajax()`有诸如“成功”和“错误”之类的事件被触发。

似乎“错误”仅在调用的 JavaScript 函数中发生某些错误时才会触发`ajax()`，而不是基于从 HTTP 调用返回的某些错误。

我想对成功执行一项操作，如果在我的服务器端处理中发生某些错误，我想执行另一项操作。

传回成功或失败以使您的客户端 JS 可以显示错误或成功消息的公认做法是什么？

@jason - 所以你的代码看起来像这样......

```
$.ajax({   
    type: "POST",
    dataType: "html", 
    cache: false,  
    url: "ajax_post_action.php",
    success: function(data){            
        if( response.success ) { 
            ...do something... 
        } else {
            ...tell user thre was a problem...
        }          
    },
    error: function(data){                  
        ...tell user thre was a problem...
    }   
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:12:16.717

你有几个选择。

1.  您可以让来自服务器的响应包含成功或失败信息。然后让您的 ajax`success`函数检查响应的值并适当地处理它。

    我们使用这种方法。我们的响应是一个 JSON 对象，它至少包含： `{ success: <bool>, errorMessage: <string> }` 然后我们的 ajax`success`函数可以简单地检查`if(response.success) { ... }`

2.  您可以让您的服务将 HTTP 状态写入带有特定消息的错误代码。然后你的 ajax`error`函数可以处理它。

# database - 在 MVC3 中如何在数据库中创建项目之前检查重复项？

> ID：13995105
> 
> 赞同：1
> 
> 时间：2012-12-21T18:08:43.957
> 
> 标签：database, vb.net, asp.net-mvc-3, duplicates

在我的控制器“语言”中，我有以下创建操作方法

```
 <HttpPost()>
    Function Create(language As Language) As ActionResult
        Try
            If ModelState.IsValid Then
                Dim name As String = language.Name
                db.Languages.Add(language)
                db.SaveChanges()
                Return RedirectToAction("Index", New System.Web.Routing.RouteValueDictionary(New With {.languageName = name, .onSuccess = ActionType.CREATE}))
            End If
        Catch ex As DataException
            ViewBag.ErrorTitle = Resources.Commands.UnableToCreate
            ViewBag.ErrorMessage = Resources.Commands.TryAgainMessage
        End Try
        Return View(language)
    End Function 
```

在创建之前如何检查数据库中是否存在具有相同值的重复项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:15:46.423

```
Dim Exists as Boolean = db.Languages.Any(Function (x) x.languageName = language.languageName)
If Not Exists Then
  db.Languages.Add(language)
  db.SaveChanges()
End If 
```

*原谅我，我的VB很生疏*

或者`IValidatableObject`在执行检查的模型中实现（可能是更好的方法）：

```
Public Class Language
  Implements IValidatableObject

  ' Model properties

  Public Function Validate(ByVal validationContext As ValidationContext) As IEnumerable(Of ValidationResult) Implements IValidatableObject.Validate
    Dim results As List(Of ValidationResult) = New List(Of ValidationResult)

    '
    ' check if langauge already exists and assign error
    ' to results if necessary
    '

    Return results
  End Function
End Class 
```

MVC3 模型验证链接：http: [//www.devproconnections.com/article/aspnetmvc/modellevel-validation-aspnet-mvc-3-136111](http://www.devproconnections.com/article/aspnetmvc/modellevel-validation-aspnet-mvc-3-136111)

# c++ - 求解联立方程的算法

> ID：13995110
> 
> 赞同：3
> 
> 时间：2012-12-21T18:09:06.580
> 
> 标签：c++, geometry, linear-algebra

我正在制作一个 mfc 应用程序，我需要在其中推断两条线是否相交。为此，我有两个方程：

```
x= [-x1y2 +x2y1 - (x2-x1)y ] / y1-y2

y= [-x3y4 +x4y3 - (y3-y4)x ] / x4-x3 
```

但是我需要一种方法来同时解决这两个方程，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:16:19.917

好的，假设`x1,x2,x3,x4,y1,y2,y3,y4`在过程中是恒定的，我们也可以把它写成

```
x=a-b*y
y=c-d*x 
```

与`a=(-x1y2+x2y1)/y1-y2`等

现在将第一行替换为第二行给出

```
y=c-d*(a-b*y)
y(1+d*b)=c-d*a
y=(c-d*a)/(1+d*b) 
```

重新代入`x=a-b*y`给出结果的 x 部分

# android - 通过蓝牙将安卓连接到健康设备

> ID：13995115
> 
> 赞同：3
> 
> 时间：2012-12-21T18:09:35.427
> 
> 标签：android, exception, bluetooth, mac-address

好吧，我拼命想将我的安卓应用程序连接到血压设备。我意识到这样的例子很少。现在我被困在连接点。它一直失败

```
 12-21 18:00:38.796: E/Connection Failed(2207): java.io.IOException: Service discovery failed 
```

我按照以下步骤操作：

1 - 获取默认适配器

```
mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter(); 
```

2 - 获取设备

```
mBluetoothDevice = mBluetoothAdapter.getRemoteDevice(DEVICE_MAC_ADD); 
```

3-创建一个套接字

```
mBtSocket = device.createInsecureRfcommSocketToServiceRecord(
                                UUID); 
```

4 - 取消发现并连接到设备

```
mBluetoothAdapter.cancelDiscovery();

mBtSocket.connect(); 
```

除了上述例外，它在连接方法上失败。嗯，我有点想知道为什么会这样。我使用其他线程中引用的 UUID 00001101-0000-1000-8000-00805F9B34FB。清单上的蓝牙权限是正确的。有人可以给我一点帮助吗？

谢谢你，佩德罗·费雷拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:57:39.730

如果您的血压设备与 HDP 配置文件兼容，那么您可以使用 android 4.0 中支持的健康配置文件来完成这项工作。

看一看： [BluetoothHDP Demo](http://java.llp2.dcc.ufmg.br/apiminer/docs/resources/samples/BluetoothHDP/index.html)

# mysql - cron 作业/mysql 事件任务

> ID：13995116
> 
> 赞同：2
> 
> 时间：2012-12-21T18:09:42.460
> 
> 标签：mysql, cron

我完全不知道要为我的数据库中的某些内容执行 cron 作业/mysql 事件任务，以便每 24 小时自动更新一次。

基本上这是我需要每 24 小时运行一次的 2 个查询，只要`users_stats` `DailyRespectPoints`达到“0”。

```
UPDATE user_stats SET DailyPetRespectPoints = '3' and 
UPDATE user_stats SET DailyRespectPoints = '3' 
```

这些是需要运行的，以便当有人使用所有 3 个时`DailyRespectPoints`，它会在 24 小时内重新填充回 3 个。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:26:51.850

首先编写一个脚本来执行您需要完成的工作。根据您的问题，您将检查一些表值，然后执行您的两个`UPDATE`步骤。

`cron`在您的脚本经过测试并正确执行后，您可以使用(probably )安排它在每天的某个时间点运行`crontab`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:23:24.660

您可以创建触发器，当 DailyRespectPoints 命中“0”时将自动执行。

您可以在此处阅读有关触发器的更多信息[http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

或者您可以编写有关您的数据库/查询的更多详细信息，我们可以帮助您编写触发器

# vba - 根据另一个单元格计算清除单元格内容

> ID：13995119
> 
> 赞同：1
> 
> 时间：2012-12-21T18:10:03.740
> 
> 标签：vba, excel

这是一个 Excel/VBA 问题：

我在 sheet2 链接单元格`A1`中有一个单元格 A1 `sheet1`（简单地说`A1='sheet1'!A1`）。`A1`in`sheet1`是一个数据验证下拉菜单。

每次在 sheet2 的内容更改/更新时，我都想清除`A2`in的内容。也就是说，每次使用下拉菜单更改in的值。`sheet2``A1``A1``sheet1`

我尝试使用`Worksheet_Change`事件宏（*我不完全理解*），但它不适用于从计算更新的单元格。如果从另一个工作表中的单元格触发它也不起作用（在这种情况下，我尝试将其链接到单元格`A1`）`sheet1`。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Intersect(Target, Range("A1")) Is Nothing Then Exit Sub
    If Target.Count > 1 Then Exit Sub
    Range("A2").ClearContents
End Sub 
```

`A2`您能想出一个简单的解决方案来在更新`sheet2`时清除单元格的内容`A1`吗？`sheet2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:26:30.883

这对我有用...

此代码进入 Sheet1 的工作表代码区域

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target, Range("A1")) Is Nothing Then _
    Sheets("Sheet2").Range("A2").ClearContents
End Sub 
```

# c# - FindControl 返回 null

> ID：13995124
> 
> 赞同：1
> 
> 时间：2012-12-21T18:10:33.397
> 
> 标签：c#, asp.net, master-pages, contentplaceholder

我正在研究 C# 和 ASP.NET 4.0 中的解决方案我试图从我的页面中获取单选按钮的值，该页面是基于一些数据库信息动态创建的。

以下是在页面源中生成的内容：

```
<td>
  <input id="masterMain_3Answer_0" type="radio" name="ctl00$masterMain$3Answer"     
    value="Y" onclick="return answeredyes(3);" />
  <label for="masterMain_3Answer_0">Y</label>
</td>
<td>
  <input id="masterMain_3Answer_1" type="radio" name="ctl00$masterMain$3Answer" 
    value="N" onclick="return answeredno(3,&#39;desc&#39;);" />
  <label for="masterMain_3Answer_1">N</label>
</td> 
```

在我的提交按钮的 OnClick 函数中，我想根据用户的输入收集是否选择了 Y 或 N。

这是我到目前为止所写的：

```
 RadioButton _rbAnswer = new RadioButton();
      RadioButtonList _rbList = new RadioButtonList();

     ContentPlaceHolder cp = (ContentPlaceHolder)Master.FindControl("masterMain");
     _rbAnswer = (RadioButton)Master.FindControl("masterMain_3Answer_0");
     HtmlInputRadioButton rb = (HtmlInputRadioButton)Master.FindControl("masterMain_3Answer_0");

     _rbAnswer = (RadioButton)cp.FindControl("masterMain_3Answer_0");
     _rbList = (RadioButtonList)cp.FindControl("masterMain_3Answer_0"); 
```

我能够毫无问题地获取 ContentPlaceHolder，但其余对象在尝试获取 . 我也尝试删除“masterMain_”，但仍然不想找到控件。

这是添加单个单选按钮列表的代码

```
 TableRow _tempRow = new TableRow();
                TableCell _cellOK = new TableCell();

                 RadioButtonList _rbList = new RadioButtonList();
                _rbList.ID = r[0].ToString()+"Answer";
                _rbList.RepeatDirection = RepeatDirection.Horizontal;

                //add options for yes or no
                 ListItem _liOk = new ListItem();
                _liOk.Value = "Y";
                 ListItem _linotOk = new ListItem();
                _linotOk.Value = "N";
                _rbList.Items.Add(_linotOk);

                //add cell to row
                _rbList.Items.Add(_liOk);
                _cellOK.Controls.Add(_rbList);
                _tempRow.Cells.Add(_cellOK);

                 //add the row to the table
                 stdtable.Rows.Add(_tempRow); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:42:09.160

为了能够快速找到动态创建的控件，请在页面类中添加一个字典：

```
private Dictionary<string, Control> fDynamicControls = new Dictionary<string, Control>(); 
```

然后在代码中创建新控件并分配其 ID 时：

```
fDynamicControls.Add(newControl.ID, newControl); 
```

当您需要控件的参考时：

```
Control c = fDynamicControls["controlIdThatYouKnow"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:27:57.323

鉴于您的更新，您会发现您的控制层次结构相当深。您在表格内的一行内的单元格内有一个 RadioButtonList ...

FindControl 是一种需要在特定对象上调用的方法，并且只能找到该对象的实际子对象。在这种情况下，您要么需要构建递归方法，要么直接转到相关控件。由于这些控件中有很多是动态生成的，因此您无法直接访问它们，因此构建递归函数可能是最简单的。但是，在非常大的页面上，此方法可能非常消耗资源：

```
public static WebUserControl FindControlRecursive(this WebUserControl source, string name) 
{
    if (source.ID.Equals(name, StringComparison.Ordinal))
        return source;

    if (!source.Controls.Any()) return null;

    if (source.Controls.Any(x => x.ID.Equals(name, StringComparison.Ordinal))
        return source.FindControl(name);

    WebUserControl result = null;

    // If it falls through to this point then it 
    // didn't find it at the current level
    foreach(WebUserControl ctrl in source.Controls)
    {
        result = ctrl.FindControlRecursive(name);
        if (result != null) 
            return result;
    }

    // If it falls through to this point it didn't find it
    return null;
} 
```

这是一个扩展方法，允许您在 ContentPlaceHolder 控件上调用它：

```
var _cp = (ContentPlaceHolder)Master.FindControl("masterMain");
RadioButtonList _rbList = _cp.FindControlRecursive("3Answer");

if (_rbList != null)
   // ... Found it 
```

***注意：将以上内容视为伪代码。我还没有在任何地方实现它，因此可能（可能）需要调整才能完全正确。***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:12:41.623

使用 FindControl 时不要使用页面生成的 id。使用您在 aspx.xml 中指定的 ID。

如果这是在一个Repeater 或另一个DataBound 控件内，则必须首先找到当前记录。（GridViewRow 或 RepeaterItem）首先，使用该项目的 .FindControl 函数。

请参阅此（不同 - 不重复）问题以查看如何执行此操作的代码示例：[How to find control with in repeater on button click event and repeater is placed with in gridview in asp.net C#](https://stackoverflow.com/questions/13468594/how-to-find-control-with-in-repeater-on-button-click-event-and-repeater-is-place)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T18:33:28.420

当您创建动态控制器时，请为它们提供特定的 ID。这有助于使用我们自己的 id 生成控件。因此，我们可以使用此 ID 访问控件。

并且还使用 OnInit 生命周期事件来生成动态控制器，这是生成它们的最佳位置。

```
 RadioButton _rbAnswer = new RadioButton();
 _rbAnswer.ID="ranswerid"; 
```

# excel - Google Apps 中最接近 INDEX( ,MATCH( 的函数是什么？

> ID：13995125
> 
> 赞同：0
> 
> 时间：2012-12-21T18:10:38.920
> 
> 标签：excel, google-apps-script, google-sheets

我有一个具有 excel 功能的主电子表格： =INDEX(D2:D4,MATCH(F11,B2:B4,0))

您将如何在 Google Apps 中表达这一点，或者有什么与之相近的吗？

下面是需要修改的部分代码：

```
 var link = masterSheet.getRange('F11').getValues();//here is the problem

    //=INDEX(D2:D4,MATCH(F11,B2:B4,0))

    var ss = SpreadsheetApp.openById(link); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T02:01:45.407

如果您想在 Google Apps 脚本中实现相同的功能，并且我的理解正确：

```
var lookup = masterSheet.getRange('F11').getValue();
var range = masterSheet.getRange('B2:D4').getValues();
var lookupRange = [];
for (var i = 0; i < range.length; i++) lookupRange.push(range[i][0]);
var index = lookupRange.indexOf(lookup);
if (index == -1) {
  //error, not found
}
else {
  var link = range[index][2];
  var ss = SpreadsheetApp.openById(link);
  //etc
} 
```

警告：如果您正在搜索日期和/或时间，这将失败。您需要将日期对象转换为可以使用 indexOf 找到的其他内容。如果是这种情况，请回帖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:15:05.747

同样的公式在 Excel 和 google 电子表格中应该同样适用，不是吗？VLOOKUP 也可以用于两者来做同样的事情，即

`=vlookup(F11,B2:D4,3,0)`

# php - PHP/MYSQL 按不同日期和用户分组和计数

> ID：13995127
> 
> 赞同：1
> 
> 时间：2012-12-21T18:10:44.100
> 
> 标签：php, mysql, group-by

我试图围绕如何获得用户登录的不同天数，当数据库存储每个登录会话时带有时间和日期戳（DATETIME 列）。例如：

```
USERID | TIME | BOUGHT  
--------------------------
4 | 2012-07-16 04:44:52   | 3
4 | 2012-07-16 04:45:52   | 2  
5 | 2012-07-16 04:54:52   | 5
4 | 2012-07-18 04:44:52   | 3
4 | 2012-07-18 04:45:52   | 2  
4 | 2012-07-21 04:54:52   | 5 
```

我想搜索用户 4 从该网站购买了多少次 - 查询应该返回 3（因为用户 4 总共访问了该网站 3 天）。我必须使用 PHP/MYSQL 组合还是可以在 SQL 中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:12:14.093

```
SELECT USERID, COUNT(DISTINCT DATE(TIME)) FROM my_table GROUP BY USERID 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/8988b/1/0)上查看。

# c++ - Eclipse C++ 项目文件夹

> ID：13995130
> 
> 赞同：1
> 
> 时间：2012-12-21T18:11:13.520
> 
> 标签：c++, eclipse

我的项目中有很多类，这也意味着很多文件。我想将所有内容放在子文件夹中，以便将其组合在一起并且更加清晰。

已经有一个名为 scr 的文件夹，我的所有 cpp 和头文件都在其中，但我想创建一个名为“products”的文件夹并将所有与产品相关的文件放在那里。

但是当我这样做时，我得到这个错误（在按下构建之后）我的一个类无法构建。它说：

> 制作：*** [scr/Producten/AudioKaart.o] 错误 1 ​​KassaSysteem C/C++ 目标 `scr/Producten/AudioKaart.o' 的问题配方失败 subdir.mk /KassaSysteem/Debug/scr/Producten 第 30 行 C/C++ 问题

**将文件放在子文件夹中的正确方法是什么？**我需要更改包含的内容吗？或者做的不仅仅是将它们拖放到文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:06:04.710

Eclipse 使用目录作为项目文件夹，因此您还需要调整所有包含。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:34:41.660

如果将标头放在 Producten 目录中，则需要在项目设置中包含此目录。另一种方法是通过指定子目录来包含您的标题，例如

```
#include "Producten/xxx.h" 
```

# php - 如何使用 JS 客户端更新时间

> ID：13995131
> 
> 赞同：1
> 
> 时间：2012-12-21T18:11:14.583
> 
> 标签：php, javascript

我想更新页面上记录 li 或 divs 上显示的时间。我已将创建此记录的时间与每条记录放在一个隐藏字段中。

例子：

```
# Hi what are you doing? 
  5 minute ago.  <hidden id='1' value='1345888475'>

# Akon song is good 
  10 minute ago  <hidden id='2' value='1345888855'>

# I love the way you lie
  15 minute ago <hidden id='3' value='1345889995'> 
```

我怎样才能每分钟更新那个时间？所以一分钟后第一个 div 应该说 6 分钟前，第二个 div 应该说 11 分钟前？

用JS可以吗？我不想为此使用php。只用JS。DB中的时间存储为`strtotime(date("Y-m-d H:i:s"))`

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:20:27.947

我个人会像这样使用 HTML：

```
<span data-time="1345888475">Loading...</span> 
```

然后在你的脚本中有类似的东西：

```
(function() {
  var timetostring(secs) {
      if( secs < 60) return secs+" seconds ago";
      secs = Math.floor(secs/60);
      if( secs < 60) return secs+" minutes ago";
      secs = Math.floor(secs/60);
      if( secs < 24) return secs+" hours ago";
      secs = Math.floor(secs/24);
      return secs+" days"; // you can of course continue
  };
  (function() {
      var qsa = document.querySelectorAll("[data-time]"), l = qsa.length, i, t;
      for(i=0; i<l; i++) {
          t = new Date().getTime()/1000-qsa[i].getAttribute("data-time");
          qsa[i].firstChild.nodeValue = timetostring(t);
      }
      setTimeout(arguments.callee,15000);
  });
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:27:53.677

你可以在 JS 中做到这一点，你需要几个部分：

1.  确定需要更改的部分并留出创建时间
2.  一个每分钟更新一次的计时器，你需要php告诉js它有什么时间
3.  在页面加载时将时间转换为可读文本的脚本。

[http://jsfiddle.net/gunderson/srKET/](http://jsfiddle.net/gunderson/srKET/)

```
 <div class="message" id='1' data-timestamp='1345888475'>
    <span class="content"># Hi what are you doing? </span><br/>
    <span class="timeAgo">5 mint ago. </span>
    </div>

    var currentTime = <?=time()?>;
    var timestampHandler = setInterval(onUpdateTimestamp, 60 * 1000); //one minute
    function onUpdateTimestamp(){
         currentTime += 60;
         $(".message").each(updateTimeAgo);
    }

    function updateTimeAgo(){
        var $el = $(this);
        var postTime = parseInt($el.data('timestamp'));
        var newTimeAgo = (currentTime - postTime) / 60; //minutes
        $el.find(".timeAgo").html(newTimeAgo + " mint ago.")
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T18:16:34.867

您可以尝试使用[`Moment.js`](http://momentjs.com/)它是一个非常轻量级的库，用于与 Javascript 中的时间管理相关的所有内容。API 非常清晰，文档齐全且功能强大。我将它用于我的一个项目，到目前为止我非常满意。

您可以使用时间自动更新处理程序，这正是您想要的，非常容易使用以下示例：

> 时刻（“20111031”，“YYYYMMDD”）.fromNow（）；// 一年前
> 
> moment("20120620", "YYYYMMDD").fromNow(); // 6 个月前
> 
> moment().startOf('day').fromNow(); // 19 小时前
> 
> moment().endOf('day').fromNow(); // 5 小时后

要使时间自动刷新，您可以在`setInterval`处理程序中调用这些函数。

# mysql - 乘客未到达 MySql

> ID：13995134
> 
> 赞同：0
> 
> 时间：2012-12-21T18:11:23.427
> 
> 标签：mysql, ruby-on-rails-3, passenger

我有 Nginx+Passenger+Rails3。

乘客抛出以下错误：

```
Can't connect to MySQL server on '184.169.131.xxx' (111) (Mysql2::Error) 
```

我可以使用 mysql 命令连接到 MySql。我认为运行乘客的用户没有权限。

我想知道：如何确定哪个用户在运行乘客以及如何授予访问mysql的权限。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:21:03.840

如果无法连接，则可能是：

*   您的 MySQL 进程绑定到`127.0.0.1`并且不能接受来自远程机器的连接。
*   您的防火墙已阻止端口 3306。

你确定那`mysql`是连接到同一个遥控器吗？您可能正在运行本地服务器，而不是允许使用默认配置进行访问。

需要注意的是，向一般互联网开放 3306 是一个坏主意，因此您需要非常有选择性地执行此操作。最佳做法是尽可能使用私有 IP，例如 10.xxx、172.16.xx 或 192.168.xx 有许多可以安全使用的保留块，但这些块不能路由到本地网络之外。

您还应该检查`config/database.yml`您定义的任何设置是否与您在`mysql`命令行工具中使用的设置相同。乘客不被视为特殊情况。

# drupal - 在视图中获取分类术语的 URL 别名

> ID：13995136
> 
> 赞同：3
> 
> 时间：2012-12-21T18:11:27.860
> 
> 标签：drupal

我创建了一个视图，显示分类中的所有术语。我将税收描述显示为带有“更多”链接的摘录。

对于这个链接，我想使用 url 别名：我试过这样：

```
[term:url:path] 
```

更多链接路径的路径别名的正确替换模式是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:38:49.677

会是一样的！由于您已经只选择了描述的修剪版本，它就像显示节点预告片一样，您可以使用相同的链接转到实际页面。

# access-token - SkyDrive 和永久访问令牌？

> ID：13995137
> 
> 赞同：1
> 
> 时间：2012-12-21T18:11:33.923
> 
> 标签：access-token, onedrive

我可以使用永久访问令牌访问我的 SkyDrive 吗？

基本上，我想授予特定应用程序（我自己的）永久访问我的个人 SkyDrive 帐户的权限。可能的？

我的用例：我在我的个人 SkyDrive 上存储了一些内容，我想通过我的 C# Web 应用程序访问它，但我不想每次都在客户端上进行身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:35:07.173

[在 SkyDrive API 论坛上四处询问](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/5b812ea8-19f5-423e-9075-7461ee3e8bf9)，听起来这是不可能的。

但是，可以使用 OAuth 进行身份验证，然后使用在初始身份验证中传回的刷新令牌来[刷新身份验证](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/5b812ea8-19f5-423e-9075-7461ee3e8bf9)。

# mysql - 如何在 MySQL 中搜索 Soundex() 子字符串？

> ID：13995150
> 
> 赞同：4
> 
> 时间：2012-12-21T18:12:34.270
> 
> 标签：mysql, soundex

我遇到了 Joomla 的问题！3 集成搜索引擎。该引擎的索引器在索引内容时创建所谓的 soundex 值，例如

> 测试对象，测试对象 1，测试对象 2239923，文本对象 ....

它们都具有相同的 T23123 soundex-value。

现在我的问题是，如果我搜索`Test`，则不会有任何结果，因为该术语的 soundex-value 是 T230。

搜索引擎使用的查询是：

```
SELECT DISTINCT t.term_id AS id, t.term AS term
FROM tablename AS t
WHERE t.soundex = SOUNDEX('test') 
```

[我检查了这个主题](https://stackoverflow.com/questions/9952959/can-soundex-be-used-on-portion-of-a-column-in-mysql/ "这个话题")中的 soundex_match 函数，但不幸的是这不能解决我的问题，因为它不比较 soundex 值。

我想避免破解 cms 核心，并想了解是否有某种近似程序可用于比较 soundex 值，例如使用`%`符号时的常规查询，然后我可以尝试使用插件或其他方式实现。

[这里](http://msdn.microsoft.com/en-us/library/ms189282%28v=sql.105%29.aspx "这里")提到的 MSSQL`DIFFERENCE`函数将是理想的，如果它可以在 MySQL 中使用并准备使用 soundex 值作为第二个参数。

我在 MySQL 方面的经验不是很好，也不知道如何改进查询以匹配 soundex-substrings。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T18:20:46.947

您可能正在寻找计算[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)；但是，如果您只是想查找那些以听起来与搜索词相似的内容开头的记录，您可以去除任何尾随`0`（仅用于填充），然后搜索带有结果前缀的 soundex 字符串：

```
WHERE t.soundex LIKE CONCAT(TRIM(TRAILING '0' FROM SOUNDEX('test')), '%') 
```

# actionscript-3 - AS3 如何在对等实例 swf 中控制影片剪辑？

> ID：13995156
> 
> 赞同：1
> 
> 时间：2012-12-21T18:12:53.420
> 
> 标签：actionscript-3, flash, p2p, netconnection

我在 Flash CS6 中使用 netconnection 和 netgroup 制作了一个应用程序。我正在尝试构建一个简单的 2 人多人游戏。当 2 两个播放器连接时，我想在 swf 的一个实例中隐藏一个影片剪辑，而不是另一个。这是怎么做的？

这是一个回合制游戏，所以当玩家 1 轮到他时，玩家 2 一定不能点击按钮（所以我想隐藏它），反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:07:02.207

我认为它现在正在工作。在 move 函数中，我添加了 ok_mc.visible=false ，它将 mc 隐藏在“本地”实例中，并将 ok_mc.visible=true 隐藏在 netstatus 事件中。像这样

```
function drop(e:MouseEvent):void {
this.stage.removeEventListener(MouseEvent.MOUSE_MOVE, moveMe);
// Save the current movieclip position
var obj:Object = {};
obj.x = mc.x ;
obj.y = mc.y ;
obj.activePlayer=players[aktiv-1]
ok_mc.visible=false;

// Set the peerID to a group address suitable for use with the sendToNearest() method.
obj.sender = group.convertPeerIDToGroupAddress(nc.nearID);
obj.id = new Date().time;
// Sends a message to all members of a group.
group.post(obj);
}

function netStatus(event:NetStatusEvent):void{
switch(event.info.code){
    case "NetGroup.Posting.Notify":

        mc.x = event.info.message.x;
        mc.y = event.info.message.y;
        ok_mc.visible=true;
    break;
}
} 
```

它似乎工作。现在我只需要弄清楚首先在 init 中显示它。有没有办法计算组成员和/或遍历它们？

# c - 无法在发布模式下包含文件

> ID：13995158
> 
> 赞同：4
> 
> 时间：2012-12-21T18:13:02.080
> 
> 标签：c, visual-studio, visual-studio-2005

我的项目在调试模式下完美运行。我尝试在发布模式下编译它，但是`cannot include file error`来了。我使用相对路径来包含头文件。但令人惊讶的是，这不是路径错误的问题，因为它可能会转到头文件之上的级别。

例如：如果头文件在相对路径`..\..\..\..\xyz\hdr` 文件夹中的文件`hdr`无法编译，但如果我将文件保存在文件夹中`xyz`，它会被编译。此问题仅在 Visual Studio 的发布模式下面临。

我希望我的问题很清楚！

有没有人遇到过这样的问题？如何克服这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:20:24.900

正如评论中暗示的那样，这几乎肯定是您的调试和发布设置之间的区别。Visual Studio 中有一个“包含目录”的设置选项卡。选择调试构建，找到包含目录（我想是在“编译器设置”下，但已经有一段时间了，我不再使用VS2005，所以不能去检查它）。在那里复制内容，然后为您的发布版本找到相同的内容并将其粘贴到那里。应该能解决你的问题。

# jsf-2 - 复合组件命令按钮 actionListener 问题

> ID：13995162
> 
> 赞同：0
> 
> 时间：2012-12-21T18:13:31.930
> 
> 标签：jsf-2

尝试使用 jsf2.0 (Mojarra) 开发一个复合组件，它应该根据 bean 的列表动态呈现命令按钮。按钮动作和即时属性工作正常。尝试添加动作侦听器属性，而动作侦听器不应该适用于即时属性值为 true 的按钮。有人可以建议我如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:43:18.750

您可以将两个互斥的命令按钮放入您的组件中，其中一个具有 actionListener 并且仅在 immediate 属性为 false 时呈现，而另一个应仅在 immediate 属性为 true 且没有 actionListener 时呈现。

```
<h:commandButton value="buttonWithoutActionListener"
                         rendered="#{cc.attrs.immediate}"/>
<h:commandButton value="buttonWithActionListener"
                         rendered="#{!cc.attrs.immediate}"
                         actionListener="#{cc.yourListener}"/> 
```

# java - 为什么documentUrl返回null

> ID：13995163
> 
> 赞同：0
> 
> 时间：2012-12-21T18:13:44.583
> 
> 标签：java, eclipse, blackberry, web

我正在为黑莓制作一个 Web 应用程序，我真的需要当前的 URL

在 的描述中`documentUrl`，它说

> 这个方法会返回这个 BrowserField 实例当前加载页面的 URL

我的代码是：

```
_bf2.requestContent("google.com";);
add(_bf2);
Global.c = _bf2.getDocumentUrl();
Global.be=new BasicEditField("URL: "+Global.c,Global.c);
add(Global.be); 
```

奇怪的是 www.google.com 被加载到 BrowserField 并且 documentUrl 返回 null。

这是我当前的代码：

```
BrowserField _bf2 = new BrowserField();
MYBrowserFieldListener _listener = new MYBrowserFieldListener();
_bf2.requestContent("google.com";);
_bf2.addListener(_listener);
String url=_bf2.getDocumentUrl();
Global.be=new BasicEditField("URL: "+url,url);
add(Global.be);
add(_bf2); 
```

我把它改成

```
final BrowserField _bf2 = new BrowserField();
_bf2.requestContent("google.com";);
//_bf2.addListener(listener);
Global.be=new BasicEditField("URL: "+Global.c,Global.c);
add(Global.be);
add(_bf2);
_bf2.addListener(new BrowserFieldListener(){
    public void documentLoaded(BrowserField _bf2, Document document) throws Exception {
        Global.c=_bf2.getDocumentUrl();
    }
}); 
```

但它仍然返回 null。有人可以告诉我如何解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T23:47:10.057

我会说 Arhimed 已经回答了你的问题。HTTP 请求是一个非常耗时的过程（从 CPU 的角度来看）并且会阻塞直到服务器响应。我怀疑 RIM 程序员已经根据他们自己的建议编写了 requestContent() 方法，并在单独的线程上获取 Web 内容。因此， requestContent() 将立即返回，当您调用 getDocumentUrl() 时，它仍然为 null，因为此时 fetch 线程可能甚至还没有连接到服务器。

您将需要实现 BrowserFieldListener 并监听 documentLoaded()。

# eclipselink - EclipseLink MOXy @XmlPath 正在为包含返回不正确的数据

> ID：13995173
> 
> 赞同：1
> 
> 时间：2012-12-21T18:14:43.333
> 
> 标签：eclipselink, marshalling, moxy

我正在尝试使用 contains 函数通过带有 XPath 的 EclipseLink MOXy 解组 XML 数据流。

当我将示例 XPath 直接应用于示例 XML 数据流时，我得到了正确的返回值 (Ref_number_1)。但是，当我使用 MOXy 解组它时，为 refNumber1 设置的值是“Ref_number_2”。

MOXy 不支持这种类型的 XPath 吗？看起来它至少可以理解它，因为它没有抛出错误，只是设置了错误的值。

有没有人有这种事情的经验？知道更好的方法吗？

谢谢你的帮助。

元帅代码：

```
String s = //xml stream from restful service (see xml example below);
StringReader sr = new StringReader(s);
ReferenceNumber refNum = (ReferenceNumber)marshaller.unmarshal(
            new StreamSource(sr)); 
```

会员注释：

```
@XmlPath("Header/ReferenceNumbers/ReferenceNumber[contains(ReferenceNumberType, \"REF_NUMBER_TYPE_1\")]/ReferenceNumber/text()")
private String refNumber1; 
```

XML 数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<Document>
  <Header>      
    <ReferenceNumbers>
      <ReferenceNumber>
        <ReferenceNumber>Ref_number_1</ReferenceNumber>
        <ReferenceNumberType>REF_NUMBER_TYPE_1</ReferenceNumberType>
      </ReferenceNumber>
      <ReferenceNumber>
        <ReferenceNumber>Ref_number_2</ReferenceNumber>
        <ReferenceNumberType>REF_NUMBER_TYPE_2</ReferenceNumberType>
      </ReferenceNumber>
    </ReferenceNumbers>
  </Header>
</Document> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:20:12.003

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

目前 MOXy 不支持这种形式的 XPath。目前，条件检查必须针对元素中包含的属性，例如（参见：[http](http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html) ://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html ）。

```
@XmlPath("personal-info/name[@type='first']/text()")
String firstName; 
```

我输入了以下错误，以便我们改进对`@XmlPath`注释进行的验证：

*   [http://bugs.eclipse.org/397101](http://bugs.eclipse.org/397101)

我也对您问题中描述的用例感兴趣。您是否介意为此输入针对 MOXy 组件的增强要求：

*   [https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink)

# arrays - 删除元胞数组 MATLAB 的重复条目

> ID：13995174
> 
> 赞同：0
> 
> 时间：2012-12-21T18:14:46.920
> 
> 标签：arrays, file, matlab, text-files, cell

我面临一个问题。我有一个巨大的文本格式数据文件，条目采用以下格式：

**18 1 1471-213X-6-54-12 503 5.333333e-001 xyz**

第一列范围为 1-22，第一列和第三列不得重复。如果存在重复值，我想删除它们。我在 Matlab 中工作。我找不到任何合适的东西来解决这个问题。任何人的提示/帮助将不胜感激。

提前致谢。

迈赫迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:12:03.657

这是一个提示，假设您的第一列称为`f`，而您的第三列称为`t`。您可能对以下命令感兴趣：

```
[xxx,IA_f] = unique(f) 
[xxx,IA_t] = unique(t) 
[xxx,IA_tf] = unique([f t], 'rows') 
```

假设您的数据在矩阵“M”中并且您选择`IA`了正确的索引，您可以执行以下操作：

```
M_unique = M(IA,:) 
```

# javascript - 获取选中的值 在 ddSlick 下拉菜单中

> ID：13995178
> 
> 赞同：3
> 
> 时间：2012-12-21T18:15:17.403
> 
> 标签：javascript, jquery, select, drop-down-menu

这当前返回未定义。`<option>`注释行中应该包含什么来提醒当前标签的值（1、2、3 或 4） ？

```
<select id="dropdown" name="dropdown">
        <option value="0" data-imagesrc="images/icons/all.png">All Questions</option>
        <option value="1" id="friends" data-imagesrc="images/icons/friends.png">Friends</option>
        <option value="2" data-imagesrc="images/icons/friends_of_friends.png">Friends of Friends</option>
        <option value="3" data-imagesrc="images/icons/network.png"><?php echo $network; ?></option>
        <option value="4" data-imagesrc="images/icons/location.png"><?php echo $location ?></option>
</select>

<script type="text/javascript">
$('#dropdown').ddslick({
showSelectedHTML: false,
    onSelected: function(selectedData){
    var str = $(this).attr('id'); // WHAT SHOULD GO HERE?
    alert(str);
    }   
});
</script> 
```

**编辑**

如果它是相关的，我正在使用[这个插件](http://designwithpc.com/Plugins/ddSlick)。

也许[这个问题](https://stackoverflow.com/questions/11453578/ddslick-select-options-wonst-post-value-of-selected-option-jquery-plugin)可能会有所帮助。我试图理解它。

设法弄清楚这一点。最终的工作代码是：

```
<select id="dropdown" name="dropdown" value="hello">
        <option value="0" data-imagesrc="images/icons/all.png">All Questions</option>
        <option value="1" id="friends" data-imagesrc="images/icons/friends.png">Friends</option>
        <option value="2" data-imagesrc="images/icons/friends_of_friends.png">Friends of Friends</option>
        <option value="3" data-imagesrc="images/icons/network.png"><?php echo $network; ?></option>
        <option value="4" data-imagesrc="images/icons/location.png"><?php echo $location ?></option>
</select>

<script type="text/javascript">
$('#dropdown').ddslick({
    showSelectedHTML: false,
    onSelected: function(data){
        alert(data.selectedData.value);
    }   
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:16:09.307

使用`$(this).val()`代替`$(this).attr('id')`

`<option>`调用元素`.val()`时返回当前选择的值。`<select>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:16:26.390

```
$('#dropdown').ddslick({
showSelectedHTML: false,
    onSelected: function(selectedData){
    var str = $(this).val()
    alert(str);
    }   
}); 
```

所以，使用`val()`而不是`attr('id')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T18:30:02.900

根据您插件的文档，该`onSelected`方法获取`selectedData`参数：

> selectedData（带有文本、值、描述、imageSrc 的嵌套对象）

`selectedData.text`文本标签和值`selectedData.value`在`onSelected`函数内部可用。试试这个：

```
$('#dropdown').ddslick({
    showSelectedHTML: false,
    onSelected: function(selectedData){
        var str = selectedData.value
        alert(str);
    }   
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-20T07:41:42.533

> 我得到了它！！如果您想获取您在数据来自的数组中设置的属性值，您可以像这样获取您的值->

```
$('#id').ddslick({
    data:dropdowndata,
    width:60,
    selectText: "Select Circle",
    imagePosition:"left",
    //dropdowndata[4].selected:true
    onSelected: function(selectedData){ 
    val = selectedData.selectedIndex;
    alert(dropdowndata[val].value); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-16T18:22:40.870

如果要发布数据，请创建一个隐藏输入，使用 jquery 设置隐藏字段的值，然后发布隐藏字段

`$('.ddslick_drop_down').ddslick({ onSelected: function(selectedData){ //set the value to a hidden field then post the hidden field $('#dish_id').val(selectedData.selectedData.value);`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-07-19T20:26:52.303

> 我从 ddslick 获得了选定的索引，并分配了一个值来分隔输入 >fields。这样我就可以使用输入字段来控制我的表单。我已经编码 > 3 个月了，所以我真的不知道我在做什么。这是一个很长的路要走，但它似乎很有效......

```
onSelected: function(selectedData){
    alert("selectedData.selectedIndex");
    if(selectedData.selectedIndex == 1 ){
        $("#input1").html(selectedData.selectedIndex);
    }
    if(selectedData.selectedIndex == 2 ){
        $("#input2").html(selectedData.selectedIndex);
    }
    if(selectedData.selectedIndex == 3 ){
        $("#input3").html(selectedData.selectedIndex);
    }
} 
```

# python - Pyqt4 - 将 2 个组合框的值添加到文本中

> ID：13995182
> 
> 赞同：1
> 
> 时间：2012-12-21T18:15:25.967
> 
> 标签：python, qt, pyqt, pyqt4, concatenation

我需要帮助将 2 个组合框的值添加到同一个`QTextEdit`. 这是我的代码的一部分：

```
 self.pushButton2 = QtGui.QPushButton(self)
    self.pushButton2.setGeometry(QtCore.QRect(520, 950, 98, 27))
    self.pushButton2.setObjectName(_fromUtf8('botao2'))
    self.comboBox = QtGui.QComboBox(self)
    self.comboBox.setGeometry(QtCore.QRect(920, 850, 111, 27))
    self.comboBox.setObjectName(_fromUtf8("comboBox"))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
    self.comboBox.addItem(_fromUtf8(""))
self.comboBox.addItem(_fromUtf8(""))
    self.comboBox_2 = QtGui.QComboBox(self)
    self.comboBox_2.setGeometry(QtCore.QRect(920, 950, 78, 27))
    self.comboBox_2.setObjectName(_fromUtf8("comboBox_2"))
    self.comboBox_2.addItem(_fromUtf8(""))
    self.comboBox_2.addItem(_fromUtf8(""))
    self.comboBox_2.addItem(_fromUtf8(""))
    self.text2 = QtGui.QTextEdit(self)
    self.text2.setGeometry(QtCore.QRect(250,700, 500, 200))
    self.text2.setObjectName(_fromUtf8("textEdit"))
    QtCore.QObject.connect(self.comboBox, QtCore.SIGNAL(_fromUtf8("activated(QString)")), self.text2.append)
    QtCore.QObject.connect(self.comboBox_2, QtCore.SIGNAL(_fromUtf8("activated(QString)")), self.text2.append)
    QtCore.QMetaObject.connectSlotsByName(self)
self.comboBox.setItemText(0, QtGui.QApplication.translate("MainWindow", "Narrador", None, QtGui.QApplication.UnicodeUTF8))
    self.comboBox.setItemText(1, QtGui.QApplication.translate("MainWindow", "Filme", None, QtGui.QApplication.UnicodeUTF8))
    self.comboBox.setItemText(2, QtGui.QApplication.translate("MainWindow", "Ator", None, QtGui.QApplication.UnicodeUTF8))
self.comboBox.setItemText(3, QtGui.QApplication.translate("MainWindow", "Genero", None, QtGui.QApplication.UnicodeUTF8))
    self.comboBox_2.setItemText(0, QtGui.QApplication.translate("MainWindow", "-1", None, QtGui.QApplication.UnicodeUTF8))
    self.comboBox_2.setItemText(1, QtGui.QApplication.translate("MainWindow", "1", None, QtGui.QApplication.UnicodeUTF8))
    self.comboBox_2.setItemText(2, QtGui.QApplication.translate("MainWindow", "0", None, QtGui.QApplication.UnicodeUTF8)) 
```

我需要在 a（我的 text2）的**同一**行中显示`QTextEdit`此组合框的值，例如：

> combobox = 我选择了“Genero”
> combobox_2 = 我选择了“0”

当我按下一个简单的按钮时，我想在 text2 的同一行中显示：“Genero,0”。

我该怎么做？我需要连接这些组合框吗？我怎么能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:07:25.550

您需要为 的信号创建一个插槽，该信号`clicked`使用您的es的值`QPushButton`向您添加一行，如下所示：`QTextEdit``QComboxBox`

```
 self.pushButton2.clicked.connect(self.on_pushButton2_clicked)

def on_pushButton2_clicked(self):
    text1 = self.comboBox_1.currentText()
    text2 = self.comboBox_2.currentText()
    self.text2.append("{0},{1}".format(text1, text2)) 
```

# java - PHP和Java中时间戳的差异

> ID：13995192
> 
> 赞同：0
> 
> 时间：2012-12-21T18:16:13.103
> 
> 标签：java, php, android

我尝试在 PHP 和 Java(Android) 中生成时间戳。两者必须相同。但是我在时间戳之间得到了 3000+ 的差异。请检查下面的代码！

爪哇：

```
long unixTime = System.currentTimeMillis() / 1000L; 
```

php：

```
$time2 = time(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T18:54:57.763

System.currentTimeMillis() 将为我提供移动设备和 java.util.Date() 中的当前时间；让我根据格林威治标准时间。解决了。

# c# - 实现 FormsAuthentication 和 BasicAuthentication ASP.Net

> ID：13995193
> 
> 赞同：1
> 
> 时间：2012-12-21T18:16:15.383
> 
> 标签：c#, asp.net, forms-authentication, single-sign-on, basic-authentication

我们目前有一个网站，上面实施了表单验证。

一位客户要求我们通过基本身份验证对该网站实施单点登录解决方案，我们希望为其余客户保留 formauth。

所以我创建了一个新的 SSO 文件夹，SSO/SSODefault.aspx 页面，该页面只能由一个客户端访问，并且我在 IIS 中配置了基本身份验证（启用了基本身份验证并禁用了匿名）。

如何在应用程序级别配置/编码，以便如果用户访问 ~/SSO/SSODefault.aspx 我需要执行基本身份验证，并且如果用户访问 ~/Login.aspx 或 ~/除上述 SSO 页面之外的任何其他页面我需要做 FormsAuthentication。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:22:44.867

您仍将执行 FormsAuthentication，但在您的 SSO 页面中，您将生成 FormsAuthentication 方法将查看的票证，发现它已经过身份验证，然后让该用户进入。这篇[博](http://weblogs.asp.net/hernandl/archive/2004/06/09/ssoformsauth.aspx)文应该让您从正确开始方向。

# ruby-on-rails - 为什么 request.format 是 text/javascript 而 respond_to 格式却说不是？

> ID：13995197
> 
> 赞同：0
> 
> 时间：2012-12-21T18:16:21.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3

导轨 3.1.1

我正在设置一个对话框，该对话框应该通过 ajax 发回服务器，然后在完成时显示“完成”消息。

```
 <%= form_tag '/tracking/add',  :remote => true, :id => 'add_tracking_request', 
      :html => {:'data-type' => 'json'} do %>
  .... 
```

好的，这样就可以返回服务器，完成所有工作等，然后到达 respond_to：

```
 135          puts 'returning ...'
   136          if current_user
   137            respond_to do |format|
   138              debugger
=> 139              format.html { redirect_to :myTrackingRequests and return }
   140              format.js { head :ok, :success => 'true' }
   141            end
   142          else
   143            raise 'no user found at the end of create tracking'
(rdb:67) e format
#<ActionController::MimeResponds::Collector:0x007f98d63417c0 @default_response=#<Proc:0x007f98d6341720@/Users/user/.rvm/gems/ruby-1.9.3-p286/gems/actionpack-3.1.1/lib/action_controller/metal/mime_responds.rb:268>, @responses={}, @order=[]>
(rdb:67) e format.html
nil
(rdb:67) e format.js
nil
(rdb:67) e format.json
nil
(rdb:67) request.format
text/javascript
(rdb:67) request.post? 
true
(rdb:67) 
```

我处于传递给respond_to块的对象说它不是html、js或json的位置，但请求是一个帖子，它的格式是文本/javascript。我不确定我在这里缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:15:59.673

```
<%= form_tag '/tracking/add',  :remote => true, :id => 'add_tracking_request', 'data-type' => 'json' do %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:24:01.207

您在 respond_to 块中获得的`format`对象只是收集响应的简单容器（收集器）。它为每种类型都返回`nil`，因为脚本尚未到达实际定义它们的位置。

请参阅此处的实现[ActionController::MimeResponds::Collector](https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/mime_responds.rb#L397)。

# java - JFlex 正则表达式与词法规则中的关键字

> ID：13995200
> 
> 赞同：0
> 
> 时间：2012-12-21T18:16:32.817
> 
> 标签：java, regex, lexical, jflex

在涵盖 JFlex 输入文件中的词法规则的部分中允许同时使用关键字和正则表达式有什么意义？

它似乎

```
retrieve { action code} 
```

...和

```
 "retrieve" { action code } 
```

...两者都匹配包含“检索”的输入，第一个是正则表达式，第二个是关键字。我的意思是所有关键字都应该能够以正则表达式的形式解释，因此允许两者似乎是多余的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:13:59.050

我不太确定您所说的“关键字”是什么意思。根据[*JFlex User's Manual*](http://jflex.de/manual.html#LexRules)[的“词汇规则”部分，](http://jflex.de/manual.html#LexRules)*您的*两个*示例都使用正则表达式。*

 *确实，正则表达式`retrieve`和`"retrieve"`是等价的，但这只是因为`"..."`符号的唯一作用是禁用正则表达式元字符，并且其中的所有字符都不`retrieve`是正则表达式元字符。（顺便说一句，您也可以将正则表达式的*一部分*用引号括起来；因此，例如，`retrieve`也等价于`r"et"ri"ev"e`.）

如果（例如）您的语言中的一个关键字是 ，则引号更有用`+++***+++`，在这种情况下，您可以编写以下任何一种：

```
\+\+\+\*\*\*\+\+\+ { action code }
"+++***+++" { action code } 
```*

# android - Osmdroid：渲染具有透明度的瓷砖

> ID：13995202
> 
> 赞同：1
> 
> 时间：2012-12-21T18:16:35.500
> 
> 标签：android, osmdroid

我有一个混合了 jpeg 和 png 瓷砖的 mbtiles 数据库。png 瓦片是出于透明的原因而存在的，但是当它们在 osmdroid 中显示时，透明区域是黑色的。通常黑色透明区域表示您的图像被渲染为 JPEG，而不是支持透明度的格式。同样值得注意的是，数据库在我使用的任何其他查看器中都可以正常呈现。

我对 osmdroid api 和代码库还很陌生，任何人都可以提供一个可以查看的好地方或我可以检查的类名吗？我已经在谷歌上广泛搜索了这个问题，并找到了一个我*认为*是在正确的轨道上做某事[的例子](http://mappingdev.wordpress.com/2011/08/31/teaching-maptileproviderarray-to-use-multible-semi-transparent-tiles-at-once/)，但是覆盖该类并没有让我得到看起来正确的 png 瓷砖。

 *TIA，特兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:26:35.393

我写了您链接的博客文章并查看了 osmdroid 源代码，但我缺少有关您的设置和数据库中用于找到问题解决方案的图块的更多信息。

但是，由于您要求提供一些类名，因此您可以检查一下，我会尝试为您提供图块的运行方式-然后您可以自己查看代码，我希望这对您找到黑色区域的原因有所帮助

1) [TilesOverlay.java] 向您的 Tile Provider #Line 168 请求具有坐标 (x,y) 和缩放因子的图块

2）[MapTileProviderArray]（如果是其他提供者，您需要在其中找到方法“getMapTile”）将尝试加载正确的图块#Line 121

3) [MapTileModuleProviderBase] 会将请求发送到您的特定图块提供商-在您的情况下，我猜是文件存档提供商#Line 241

4) [MapTileFileArchiveProvider] 从您的 mbtiles 数据库 #Line 210 & 169 获取数据的输入流

5) [MBTilesFileArchive] 为请求的图块读取数据库#Line 56

6) [MapTileFileArchiveProvider] 从您指定的 tileSource #Line 215 请求位图

7) [BitmapTileSourceBase] 使用Android Class [BitmapFactory](http://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/main/java/org/osmdroid/tileprovider/modules/MapTileModuleProviderBase.java)创建Bitmap #Line 130

8) [MapTileModuleProviderBase] 将 Bitmap (#Line 210) 传递给您的 Provider [MapTileProviderArray] (#Line 135)，最后 [MapTileProviderBase] 将 Bitmap 添加到缓存并发送消息以重绘 Tiles (#Line 108 & 113)

由于缓存适用于来自每个 tilesource 和提供者的位图，我认为您的问题不会更进一步。如果问题出在位图的缓存中，那么整个 osmdroid 系统中根本就没有任何透明图块。所以猜测你的问题是在这些步骤之间的某个地方。

我希望这可以帮助您找到问题。

问候

PS：因为我通常不在这里发帖，所以我没有帐户，只能提供 2 个链接。我提到的所有文件都可以在这里找到：[osmdroid trunk](http://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/main/java/org/osmdroid/)*

# google-groups-api - Group Settings API 中的新设置...这些是否已公布？

> ID：13995203
> 
> 赞同：1
> 
> 时间：2012-12-21T18:16:35.817
> 
> 标签：google-groups-api, google-admin-settings-api

我注意到 Google Group Settings API 中的一些新设置……这些是公布的吗？我们应该在哪里寻找这样的公告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T20:02:10.167

我假设您指的是垃圾邮件审核并包含在 GAL 中？不，据我所知，他们没有被宣布。谷歌在宣布更改方面做得越来越好，但他们仍然不时地在这样的更新中溜走，直到你碰巧发现它被埋在 ref 中才知道。文档。

我建议尽可能跟踪文档页面。当参考文档更新时，我使用[ChangeDetection.com](http://www.changedetection.com)来获取电子邮件通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T00:05:08.280

除了更新的参考文档外，此特定更改未在任何地方公布。更改通常会发布到[http://googledevelopers.blogspot.com/](http://googledevelopers.blogspot.com/)上的开发者博客，但不是为了这个。

# javascript - 检测点击了哪个子元素

> ID：13995209
> 
> 赞同：-1
> 
> 时间：2012-12-21T18:17:03.083
> 
> 标签：javascript, jquery

我试图找出用户为我的元素选择的值。

在我的变量`var1`中。它包含。

```
<select>
   <option value='1'>1</option>
   <option value='2'>2</option>
   <option value='3'>3</option>
</select>

<input type='text'>
<input type='text'>
<input type='text'> 
```

我可以做`var1`.value 来获取用户选择的值。

但是，我还有另一个`var2`展示

```
<div>
  <a href='#' id='1'>test1</a>
  <a href='#' id='2'>test2</a>
  <a href='#' id='3'>test3</a>
</div> 
```

我想从中选择`id`我`<a>` 不知道如何获得它。

有人有想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:19:29.200

我不确定这是否是您想要的，但是如果您想获取单击的锚标记的 id，请使用以下命令：

```
$('a').click(function() { alert(this.id); }); 
```

您可能想要使用此版本（只需提供您的 div `your-div-id`id）：

```
$('#your-div-id').on('click', 'a', function(event){
    alert(this.id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:20:43.753

```
$('a').click(function() { 
  alert($(this).attr('id'); 
}); 
```

# ruby-on-rails - Rails 模型中的简单正则表达式检查失败

> ID：13995210
> 
> 赞同：1
> 
> 时间：2012-12-21T18:17:03.723
> 
> 标签：ruby-on-rails, ruby, regex

我有以下类型的支票

```
 validates :callback_handle, :format => { :with => /[_0-9a-zA-Z]+/ix }, :unless  => "callback.nil?" 
```

我不希望任何非 0-9、az AZ 字符通过。所以我将 callback_handle 设置为“！alksjda”（注意！在开头）。这个测试没有失败。我究竟做错了什么？

我在 irb 上尝试了一些东西：这就是我得到的：

```
1.9.2-p320 :001 > a = "!askldjlad"
 => "!askldjlad" 
1.9.2-p320 :002 > a =~ /[_0-9a-zA-Z]+/ix
 => 1 
1.9.2-p320 :003 > a = "askldjlad"
 => "askldjlad" 
1.9.2-p320 :004 > a =~ /[_0-9a-zA-Z]+/ix
 => 0 
```

我认为如果找不到匹配项，它会返回 false 或 nil。

有人可以告诉我我的理解有什么问题吗？

编辑：我发现 =~ 将返回匹配的位置。所以问题变成了我如何不允许具有任何其他字符的东西不匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:23:28.777

您的正则表达式仍然能够匹配，因为您的字符串中至少有 1 个字母数字字符。如果要确保整个字符串匹配，则应定义匹配的开头和结尾。

老的：

```
a =~ /[_0-9a-zA-Z]+/ix 
```

这就是说“在`a`.

新的：

```
a =~ /\A[_0-9a-zA-Z]+\z/ix 
```

这就是说“从字符串的开头开始，然后至少匹配这些字符中的 1 个，然后是字符串的结尾” `a`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:23:10.557

您的正则表达式只是要求您的字符串包含 1 个或多个有效字符......这应该可以解决它：

```
 validates :callback_handle, :format => { :with => /^[_0-9a-zA-Z]+$/ix }, :unless  => "callback.nil?" 
```

# linq - 动态添加连接到 linq 查询的技术？

> ID：13995212
> 
> 赞同：1
> 
> 时间：2012-12-21T18:17:14.900
> 
> 标签：linq, entity-framework

我有一个 Linq 查询，有时加入两个数据集，有时加入三个数据集。第三组永远不会返回数据，它仅用于根据其内容过滤数据。我使用 Predicate Builder 动态创建 wheres 但不确定动态包含/排除连接数据集的正确方法。

有时这是：

```
var filteredResults = from d in dateRangeResults
                              join n in results on d.ID equals n.ID                                
                              select new { name = n, demo = d }; 
```

其他时候我需要这个：

```
 var filteredResults = from d in dateRangeResults
                              join n in results on d.ID equals n.ID
                              join p in PnSIncludeResults on n.ID equals p
                              select new { name = n, demo = d }; 
```

是否有最佳实践或技术？TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T19:24:40.090

`if`为了提高性能，我会在语句中添加额外的连接。这将在两种情况下构建一个有效的查询：

```
var filteredResults = from d in dateRangeResults
                      join n in results on d.ID equals n.ID
                      select new { name = n, demo = d };

if(filterExtra)
{
    filteredResults = from result in filteredResults
                      join p in PnSIncludeResults on result.name.ID equals p
                      select result;
} 
```

如果您更关心可读性，可以使用`where`子句代替`join`子句：

```
var filteredResults = from d in dateRangeResults
                      join n in results on d.ID equals n.ID
                      where !filterExtra || PnSIncludeResults.Contains(n.ID)
                      select new { name = n, demo = d }; 
```

LINQ to Entities 可能会优化生成的查询，但您应该检查以确保。

# c# - 在现有属性之间添加带有属性的 xml 元素

> ID：13995214
> 
> 赞同：0
> 
> 时间：2012-12-21T18:17:23.727
> 
> 标签：c#, xml

尝试在现有元素和属性之间添加 xml 元素和属性。我有看起来像这样的 xml 模板：

```
<INPUT>
 <LOGIN user="cat" password="meow" />
     <REC>

    </REC>
  </INPUT> 
```

我正在寻找在`<REC></REC>` 像这样的treid formattging soemthing之间添加一个元素和属性，但是在LOGIN not REC之后它会粘住它

```
 IEnumerable<XElement> list = doc.Element("INPUT").Elements("LOGIN");
             var addElement = new XElement("an", new XAttribute("id", i));
             list.Last().AddAfterSelf(addElement); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:20:31.903

听起来您正在尝试将其*添加*为`REC`. 这很容易：

```
// If there are multiple `REC` elements, you'll need to work out which one you want
var recElement = doc.Descendants("REC").First();
recElement.Add(new XElement("an", new XAttribute("id", i))); 
```

# ios - iOS 无法在 UISegmentedControl 中选择段

> ID：13995222
> 
> 赞同：0
> 
> 时间：2012-12-21T18:18:12.077
> 
> 标签：ios, arrays, header, tableview, uisegmentedcontrol

我在 UITableView 的 headerview 中有一个 UISegmentedControl。出于某种原因，我无法选择任何段，每当我这样做时，它都会自动选择数组中的最后一个段，我无法选择其他任何段。当我删除动作时，我可以选择哪个。不知道发生了什么。

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    if (section == 1) {

        UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0,0, 320, 40)]; // x,y,width,height

        NSArray *itemArray = [NSArray arrayWithObjects:@"E01", @"E02", @"E03", @"E05", @"E06", @"T05", @"E17", @"E19", nil];
        control = [[UISegmentedControl alloc] initWithItems:itemArray];
        [control setFrame:CGRectMake(30.0, 0, (tableView.bounds.size.width) - 60, 40)];
        [control setSelected:YES];
        [control setSegmentedControlStyle:UISegmentedControlStylePlain];
        [control addTarget:self action:@selector(unitSegmentControl:) forControlEvents:UIControlEventValueChanged];

        [headerView addSubview:control];

        return headerView;
    }

    return nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:01:20.217

我不知道调用 setSelected 在 UISegmentedControl 上做了什么，但我建议您使用：

```
control.selectedSegmentIndex = anNSInteger; 
```

设置初始选定的段。我怀疑这是你的问题。

如果您有滚动表视图，还需要考虑其他事项，

```
viewForHeaderInSection 
```

每次标题滚动到屏幕上时都会调用该部分，这意味着每次标题滚动到屏幕上时您的分段控件都会重新初始化，并且您将丢失您选择的索引。

除此之外，也许您可​​以发布 unitSegmentControl 选择器的代码。可能它会导致重新加载表视图并再次调用 viewForHeaderInSection，从而重新初始化分段控制器。

# sqlalchemy - 如何在 SQL Alchemy 中编写此代码

> ID：13995225
> 
> 赞同：3
> 
> 时间：2012-12-21T18:18:49.983
> 
> 标签：sqlalchemy

我需要在 SQL Alchemy 中编写一个查询，以针对包含字符串数组（Postgre）的字段检查一些字符串参数

城市 州 address_line_1 邮政编码 phone_numbers

都是 text[] 类型

```
 select_statement = bdb.get_select_statement(business_schema)\
    .where(((text('array[:acity] <@ city')
            and text('array[:astate] <@ state')
            and text('array[:aaddress] <@ address_line_1'))
    or
           (text('array[:aaddress] <@ address_line_1') and text('array[:azip_code] <@ zip_code')))
    and  (text('array[:aphone] <@ phone_numbers')))\
    .params(aaddress = address_line_1, acity = city, astate = state, azip_code = zip_code, aphone = phone_number) 
```

问题是我在执行此操作时收到异常，“未定义此子句的布尔值”。

要编写的普通 SQL 是：

```
select * from business where ('address_line1' = ANY (address_line_1) 
                              and 'acity' = ANY (city) 
                              and 'state' = ANY (state)
or
        ('adress_line1' = ANY (address_line_1) and 'zip' = ANY (zip_code))
and
'phone' = ANY (phone_numbers) 
```

关于如何做的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:53:13.230

您需要使用`and_()`and`or_()`方法，或者使用`&&`and`||`运算符，而不是 Python`and`和`or`关键字。

此外，您使用数组索引和“<@”执行的操作更容易执行（在 0.8 中），如下所示：

```
mytable.c.array[:"acity"].op('<@')(mytable.c.city) 
```

见[阵列](http://docs.sqlalchemy.org/en/rel_0_8/dialects/postgresql.html?highlight=array#sqlalchemy.dialects.postgresql.ARRAY)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T04:16:32.533

使用 SqlAlchemy 0.8，这可以写成：

`mytable.c.myarraycolumn.contains(['something'])`

或者，使用声明类：

`query.filter(MyTable.myarraycolumn.contains(['something']))`

[http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY](http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html#sqlalchemy.dialects.postgresql.ARRAY)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-27T21:36:29.697

这是我们在 SQLAlchemy 0.9 中如何让它工作的。

SQLAlchemy 不知道如何在这些查询中将 Python 类型转换为数组元素类型。由于我们的数组元素`VARCHAR(256)`不是，我们必须在文字`TEXT`中添加一个`cast`表达式。`array`

```
session.query.filter(
    models.TableClass.arraycolumn.contains(   
        # contains() generates @>, and @> always takes an array, 
        # it's more like has-subset
        array([
            # the array() literal constructor needs an iterable
            cast(
                'array-element-to-find', 
                # SQLAlchemy does not know how to convert a Python string 
                # to an SQL VARCHAR type here
                String(256),
            )
        ])
    )
).all() 
```

*   关于`@>` [http://www.postgresql.org/docs/9.1/static/functions-array.html](http://www.postgresql.org/docs/9.1/static/functions-array.html)
*   关于`array`文字[http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html#sqlalchemy.dialects.postgresql.array](http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html#sqlalchemy.dialects.postgresql.array)
*   注意`cast` [https://groups.google.com/forum/#!topic/sqlalchemy/5aTmT4rUJo4](https://groups.google.com/forum/#!topic/sqlalchemy/5aTmT4rUJo4)

# android - Android，实例化实例变量，什么线程？

> ID：13995226
> 
> 赞同：0
> 
> 时间：2012-12-21T18:18:52.793
> 
> 标签：android, multithreading, handler, android-progressbar

全部：

我正在研究具有与其他实例变量一起声明和实例化的处理程序的代码：

```
public class SomeActivity extends Activity {
    Handler handler = new Handler();  // What thread is this taking place on?
    // rest of class omitted
} 
```

那么它是在 UI 线程上实例化的吗？我希望如此，因为它用于将 Runnable 发布到 ProgressBar，而我的理解是 ProgressBar 应该只在 UI Thread 上进行操作。

Android 文档说在 onCreate() 中创建的东西是：

> 应用程序的活动在应用程序的 UI 线程上运行。一旦 UI 被实例化，例如在 Activity 的 onCreate() 方法中，那么与 UI 的所有交互都必须在 UI 线程中运行。”

但这发生在 onCreate() 之前。

感谢您提供任何信息，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:47:14.543

> 那么它是在 UI 线程上实例化的吗？

是的。处理程序将存在于创建它的线程中。您正在主 / UI 线程上创建您的，因此它可以访问 UI 元素。

> 但这发生在 onCreate() 之前。

这不会影响 Handler 在哪个线程上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:48:31.057

除非您专门在后台线程上运行它，否则一切都发生在主线程（也称为 UI 线程）上。所以，是的，您的 Handler 是在 UI 线程中创建的。

# java - 用Java在屏幕/窗口上写入每个像素的最快方法

> ID：13995228
> 
> 赞同：2
> 
> 时间：2012-12-21T18:19:09.600
> 
> 标签：java, graphics

我想通过算法指定屏幕（全屏）或窗口上的每个像素以在 Java 应用程序中进行绘制。我想以这种方式制作动画。

因此，对于每个像素，我将运行某种类型的计算来确定它应该是什么颜色。我会为每个像素的每一帧都这样做。

做到这一点的最高性能（每秒能够达到最高帧数）的方法是什么？

我知道显卡是可编程的，但我想坚持只用 Java 编写代码。如果有一种直接的方法可以用 Java 对算法进行编码，以便它们在显卡上运行，那就太好了，但我想要一个不涉及另一种编程语言（我认为 OpenCL 或类似语言）的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:45:42.403

在使用[`PixelGrabber`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/PixelGrabber.html)and[`MemoryImageSource`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/MemoryImageSource.html)组合之前，我已经完成了这种类型的动画。这里有一些文档和[示例](http://docstore.mik.ua/orelly/java/awt/ch12_04.htm)。

这就是我所知道的性能最好的技术。您通常在像素数组中工作（进行帧动画转换），然后在结果图像中渲染像素（不需要调用`getPixel/setPixel`方法来设置单个像素，这在过去是一个很好的优化）。

我自己现在没有任何代码示例，但如果您有兴趣使用它，我可以稍后提供。

作为旁注，[Java The Complete Reference](http://books.google.co.ve/books/about/Java_The_Complete_Reference_Seventh_Edit.html?id=C_l2R8ZSPMoC&redir_esc=y)一书的旧版本大量使用了这种技术来处理图像处理示例。

# android - 将数据从 onReceive 传递到新的 Activity

> ID：13995233
> 
> 赞同：1
> 
> 时间：2012-12-21T18:19:47.130
> 
> 标签：android

我有一个通知栏，当我单击它时，会使用相同的数据（字符串数组）启动一个新活动。我在将数据从 onReceive.class 传递到新活动（通知）时遇到问题。当我单击时，我看到了新活动，但由于 nullPointerE 而崩溃。

not1[x] 是一个字符串数组

我的代码

报警接收器：

```
Intent notificationIntent = new Intent("com.example.myapp", null, context, Notify.class);
        notificationIntent.putExtra("notify", not1[x]);
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0); 
```

通知：

```
Bundle b = getIntent().getExtras();
      if (b != null) {
          Intent intent = getIntent();
          String[] notify2 = b.getStringArray("notify");

          textView1.setText("notify2"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:28:19.243

尝试这个

```
String[] getArray=getIntent().getStringArrayExtra("notify"); 
```

在 not1[x] 之间是一个字符串而不是一个数组。

```
private NotificationManager mNotificationManager;
    private int SIMPLE_NOTFICATION_ID;

mNotificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    notifyDetails = new Notification(R.drawable.somepngfile,"some text",System.currentTimeMillis());

       Context context = getApplicationContext();
        CharSequence contentTitle = "title";
        CharSequence contentText = "ontent";
        Intent notifyIntent = new Intent(thisclass.this,nextclass.class);

        notifyIntent.putExtra("Value", finalresponse[1]+","+finalresponse[2]+","+finalresponse[3]);

        PendingIntent intent = 
            PendingIntent.getActivity(BackService.this, 0, 
            notifyIntent, android.content.Intent.FLAG_ACTIVITY_NEW_TASK);

        notifyDetails.setLatestEventInfo(context, contentTitle, contentText, intent);
        notifyDetails.defaults|= Notification.DEFAULT_SOUND;
        notifyDetails.defaults|= Notification.DEFAULT_LIGHTS;
        notifyDetails.defaults|= Notification.DEFAULT_VIBRATE;
        notifyDetails.defaults|= Notification.FLAG_AUTO_CANCEL;
        notifyDetails.flags |= Notification.FLAG_AUTO_CANCEL | Notification.FLAG_SHOW_LIGHTS;
        mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails); 
```

在下节课

```
 Intent i = getIntent();
        i.getStringExtra("Value");

        String[] response=i.getStringExtra("Value").split(","); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:41:29.030

这是`not1[x]`一个字符串数组吗？它看起来像一个字符串数组的元素，实际上是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T12:42:08.537

只需替换**AlarmReceiver**类中的以下代码即可。它对我有用...

```
PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

如果我们使用 0 而不是**PendingIntent.FLAG_UPDATE_CURRENT**标志，在接收方，即 getIntent().getExtras() 不会动态更新数据，每次都分配第一个传递的数据......

# php - 某些商店视图上未显示徽标 magento

> ID：13995234
> 
> 赞同：2
> 
> 时间：2012-12-21T18:19:55.877
> 
> 标签：php, magento, template-engine

我有一个网站，每种语言都有多个商店视图。出于某种原因，某些商店视图中未显示徽标。

在徽标显示的商店视图中，预期的路径出现在徽标的 href 中，即：

```
 base_url/skin/frontend/default/myTheme/images/logo.png 
```

而在商店视图中有一个损坏的徽标链接，由于某种原因，它没有在主题目录中找到它，它正在恢复到基本目录，如下所示：

```
 base_url/skin/frontend/base/defualt/images/logo.png 
```

我不确定我可能哪里出错了。以及为什么徽标会出现在一个视图上而不是另一个视图上。显示徽标的视图是在不久前设置的，我只是在此时添加了新视图。

**附加信息**

1.  新的商店视图是在系统 > 管理商店下创建的
2.  他们被赋予了代号 mytheme_languagename 例如 mytheme_french
3.  我有一个网址，商店视图只是为区域用户翻译商店
4.  我在系统 > 配置 > 设计 > 模板下有正确的设置
5.  我在至少一个视图上的系统 > 设计下设置了设计更改，但结果始终相同。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:14:16.793

1.  First remove all the design changes from System > Configuration > Design and System->Design.
2.  Then apply the design changes for each store view only from System->Design.
3.  Make sure what your Logo is named, Logo.gif or Logo.png

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:27:52.723

您确定您的设计设置吗？

```
I have the correct settings under System > Configuration > Design > template 
```

徽标是皮肤设置，因此您应该为皮肤设置“myTheme”，或者在所有商店视图中设置为默认设置！

这是因为当它正确找到图像时，您的 URL 是

```
 base_url/skin/frontend/default/**myTheme**/images/logo.png 
```

# eclipse - 避免 Eclipse 在 Scala Maven 项目中忽略垃圾

> ID：13995236
> 
> 赞同：2
> 
> 时间：2012-12-21T18:20:04.003
> 
> 标签：eclipse, scala, maven

我发现在命令行上使用 maven 编译 scala 源的唯一方法`mvn`是在`scala-maven-plugin`.

```
 <plugin>
    <groupId>net.alchim31.maven</groupId>
    <artifactId>scala-maven-plugin</artifactId>
    <version>3.0.1</version>
    <executions>
      <execution>
        <goals>
          <goal>compile</goal>
          <goal>testCompile</goal>
        </goals>
      </execution>
    </executions>
    <configuration>
      <args>
        <arg>-deprecation</arg>
        <arg>-unchecked</arg>
      </args>
      <jvmArgs>
        <jvmArg>-Xms128m</jvmArg>
        <jvmArg>-Xmx1024m</jvmArg>
      </jvmArgs>
    </configuration>
  </plugin> 
```

但是，Eclipse 不喜欢这些执行并给出以下错误。

> 生命周期配置未涵盖插件执行：net.alchim31.maven:scala-maven-plugin:3.0.1:compile（执行：默认，阶段：编译）
> 
> 生命周期配置未涵盖插件执行：net.alchim31.maven:scala-maven-plugin:3.0.1:testCompile（执行：默认，阶段：测试编译）

Eclipse 建议将目标永久标记为忽略，但这意味着我的 pom.xml 中添加了很多丑陋的垃圾。我的意思是，XML 已经很难看。有没有更好的方法来配置我的项目以编译源代码`mvn`？以下是 Eclipse 添加的内容。

```
<pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>
                                        net.alchim31.maven
                                    </groupId>
                                    <artifactId>
                                        scala-maven-plugin
                                    </artifactId>
                                    <versionRange>
                                        [3.0.1,)
                                    </versionRange>
                                    <goals>
                                        <goal>testCompile</goal>
                                        <goal>compile</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-22T02:19:36.117

m2e 要求您安装特定的 m2e 插件。scala-maven-plugin 的一个是 m2e-scala：[https ://github.com/sonatype/m2eclipse-scala](https://github.com/sonatype/m2eclipse-scala)

删除禁用scala-maven-plugin的pluginManagement，安装m2e-scala [http://alchim31.free.fr/m2e-scala/update-site](http://alchim31.free.fr/m2e-scala/update-site)

顺便说一句，最新的 scala-maven-plugin 是 3.1.0，而不是 3.0.1。

干杯，

斯蒂芬妮

# php - 使用 codeigniter 从另一个网页中提取数据

> ID：13995244
> 
> 赞同：0
> 
> 时间：2012-12-21T18:20:39.040
> 
> 标签：php, codeigniter

我什至不知道这是否可能，但这是我的问题，我有一个由 CI 创建的动态页面。现在另一台服务器上有另一个页面是静态的。另一个页面有一个也是静态的基本表。现在我想从我的网页加载其他页面。当两个页面位于不同的服务器上时是否有可能？如果是，任何人都可以指导我

在此先感谢~muttalebm

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:25:03.783

您可以使用[file_get_contents()](http://us3.php.net/manual/en/function.file-get-contents.php)并从页面中获取 HTML 并将其回显，或者如果您想自定义该 HTML 使用 PHP 的[DOMDocument](http://us3.php.net/manual/en/class.domdocument.php)来提取您想要的部分（表），然后将其回显。顺便说一句，确保您已将[allow_url_fopen](http://us3.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)设置为打开，否则您将无法获取远程内容。

# javascript - 如何使用 CSS for JS & jQuery Scroller 修复侧边栏和标题

> ID：13995245
> 
> 赞同：5
> 
> 时间：2012-12-21T18:20:41.177
> 
> 标签：javascript, html, css, layout, scroller

我有这个布局，我想固定左侧边栏、右侧边栏和标题。

![在此处输入图像描述](../Images/e314a2b903ddcc0bc37fe066ab8d114b.png)

这是我的CSS：

```
 #container {
        padding-left: 200px;      /* LC fullwidth */
        padding-right: 190px;     /* RC fullwidth + CC padding */
    }

    #container .column {
        position: relative;
        float: left;
    }

    #center {
        padding: 10px 20px;       /* CC padding */
        width: 100%;
        overflow-x:hidden;
    }

    #left {
        width: 180px;             /* LC width */
        padding: 0 10px;          /* LC padding */
        right: 240px;             /* LC fullwidth + CC padding */
        margin-left: -100%;
    }

    #right {
        width: 130px;             /* RC width */
        padding: 0 10px;          /* RC padding */
        margin-right: -100%;
    }

    #footer {
        clear: both;
    } 
```

&代码在[这里](http://jsfiddle.net/alibm/nr2NZ/)

在这一步之后，我想将[nanScrollerJS](http://jamesflorentino.github.com/nanoScrollerJS/)添加到右侧栏。

我不熟悉 CSS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:48:15.497

您可以使用`position:fixed`，但是，当然，对于 IE，您需要一些技巧才能使其工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T16:33:01.000

这是你想做的吗？

[小提琴](http://jsfiddle.net/nr2NZ/50/)

我已经删除了几乎所有的代码并用新代码替换它。

# ＃固定的

```
position: fixed;
top: 0;
left: 0;
width: 100%; 
```

# ＃中央

```
margin-top: 32px; /* Header height */
padding: 10px 20px; /* CC padding */
box-sizing: border-box;
border-left: 200px solid black; /* LC width including padding */
border-right: 150px solid black; /* RC width including padding */ 
```

# ＃剩下

```
width: 180px; /* LC width */
padding: 0 10px; /* LC padding */
float: left; 
```

# ＃正确的

```
width: 130px; /* RC width */
padding: 0 10px; /* RC padding */
float: right; 
```

# #页脚

```
position: relative;
z-index: 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T20:53:01.980

你总是可以用绝对高度固定中心，然后溢出-y。这是我的意思的一个例子：

```
#center {
        padding: 10px 20px;       /* CC padding */
        width: 100%;
        height: 240px;            
        overflow-y:scroll;        
        overflow-x:hidden;
    } 
```

这是一个工作示例（基于您的）：http: [//jsfiddle.net/nr2NZ/27/](http://jsfiddle.net/nr2NZ/27/)

从技术上讲，nanScrollerJS 上的示例在外部使用了固定的 div，但是在这种情况下，这可能是因为如果外部框是相对位置的，即理论上不应该有问题。

# android - 我想创建一个收件箱以从自定义收件箱中检索所有短信并显示在我的应用程序中？我不明白从哪里开始编码？

> ID：13995247
> 
> 赞同：1
> 
> 时间：2012-12-21T18:20:43.543
> 
> 标签：android

我正在尝试在 android 中开发一个短信应用程序。我完成了发送和接收短信。我想创建一个收件箱以从自定义收件箱中检索所有短信并显示在我的应用程序中？我不明白从哪里开始编码？我必须继续为应用程序和自动响应程序创建一个锁。有人可以帮我了解如何创建收件箱并从默认应用程序中检索所有短信吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:32:02.343

试试这个链接。它也有消息的加密解密。
[http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)

# jquery - return false 仅在答案正确时才有效？

> ID：13995250
> 
> 赞同：2
> 
> 时间：2012-12-21T18:21:01.443
> 
> 标签：jquery

有两个数字。用户填写答案并点击输入或“下一步”按钮（激活表单）

我希望表单始终“返回 false”，因为所有下一步操作都使用 javascript 加载。只要用户不断填写正确答案，它就可以工作，但是当您填写错误答案时，它首先会向您显示“嘿，你，这是什么？” 框，但是当用户尝试再次回答时，整个页面被重新加载：/

你可以在这里看到它：http: [//skolresurser.se/matematik/simple/](http://skolresurser.se/matematik/simple/)

HTML

```
<form id="theChallenge">
    <h1>
        <span class="first">2</span>
        <span style="position: relative; top: 0.24em; margin: 0 6px;">*</span>
        <span class="second">6</span>
        <span style="margin-left: 0.13em; font-size: 0.8em; position: relative; top: -0.13em; margin-right: -0.60em;">=</span>
    </h1>
    <div id="notReally" style="display: none;">
        <h2>Not reeaaaaally:</h2>
        <span id="actually"></span>
    </div>
    <input type="number" class="answerInput"><br>
    <button class="2btn btn-large btn-success checkAnswer" href="#">Next</button>
</form> 
```

JS：

```
$(function() {
    function biggestNumber() {
        return Math.max.apply(this, arguments);
    }

    $("#theChallenge").submit(function() {
        first = $(".first").text();
        second = $(".second").text();
        correctAnswer = parseInt($(".first").text()) * parseInt($(".second").text()); //parseInt = omvandla text till siffra.. och slå ihop de två alternativen!  och detta är då vårt rätta svar        
        theAnswer = $(".answerInput").val() //Vad har användaren skrivit in för svar?
        alert('first' + first);

        //Check if answer is correct
        if (theAnswer == correctAnswer) {
            //Create new numbers
            var randomNum = 1 + Math.ceil(Math.random() * 12); /* Pick random number between 1 and 12 */
            $('.first').text(randomNum);
            var randomNum = 1 + Math.ceil(Math.random() * 12); /* Pick random number between 1 and 12 */
            $('.second').text(randomNum);
        } else {
            //Show the person doing the test that
            $("#notReally").slideDown('fast');
            $("h1").slideUp('medium');

            biggestNumber = biggestNumber(first, second); //en funktion som är inlagd längre upp!!
            if (biggestNumber == first) { //Om största numret = första numret, då är det, det andra numret vi vill stapla upp, annars är det ju första siffran vi vill stapla upp "största siffran antalet gånger".
                theOtherNumber = second;
            } else {
                theOtherNumber = first;
            }
            staplaUpp = theOtherNumber; //Börja med att lägga in den mindre siffran en gång först, och sedan för varje till  " +siffran "
            for (var i = 0; i < biggestNumber - 1; i++) { //För varje antal det finns av den mindre siffran, stapla upp den med plus emellan!
                staplaUpp = staplaUpp + '<span style="margin:0 0.2em;">+</span>' + theOtherNumber;
            }
            $("#actually").append(staplaUpp);

        }

        $(".answerInput").val('');
        alert('first' + first);
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:31:40.963

通常，第二次提交时表单失败表明您的 javascript 事件处理程序中存在错误，导致它无法返回 false。要调试这些，在浏览器中使用 javascript 控制台以及在页面之间导航时保​​留日志信息的选项很有用。（此选项`Preserve Log upon Navigation`在 webkit 调试器中调用）。使用这种技术，我发现：

```
Uncaught TypeError: number is not a function skolresurser.se:137
(anonymous function) 
```

查看那段代码，我可以看到问题出在这里：

```
biggestNumber = biggestNumber(first,second); //en funktion som är inlagd längre upp!! 
```

当您分配`biggestNumber`给自​​身的返回值时，您会`biggestNumber`用 number覆盖该函数`biggestNumber`。然后，第二次单击提交按钮时，您的代码将失败。

相反，您应该将该返回值分配给不同的变量：

```
 var bigNum = biggestNumber(first,second); //en funktion som är inlagd längre upp!!
       if(bigNum==first){ //Om största numret = första numret, då är det, det andra numret vi vill stapla upp, annars är det ju första siffran vi vill stapla upp "största siffran antalet gånger".
        theOtherNumber=second; 
       }else{
        theOtherNumber=first; 
       }
      staplaUpp = theOtherNumber;  //Börja med att lägga in den mindre siffran en gång först, och sedan för varje till  " +siffran "

       for(var i = 0; i < bigNum-1; i++) { //För varje antal det finns av den mindre siffran, stapla upp den med plus emellan!
            staplaUpp = staplaUpp + '<span style="margin:0 0.2em;">+</span>'+theOtherNumber;
        }
       $("#actually").append(staplaUpp); 
```

那么你的`biggestNumber`函数`function`在下一次被调用时仍然是 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:27:17.137

无需返回false。这 -(theAnswer==correctAnswer) 已经是假的，脚本知道..所以删除返回假的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:39:26.517

看来你需要`prevetDeafult`整个提交动作，还有重新定义最大数字的问题，我解决了重新定义，使用本地化变量：

```
$(function() {
    function biggestNumber() {
        return Math.max.apply(this, arguments);
    }

    $("#theChallenge").submit(function(e) {

        e.preventDefault();  //<--HERE

        first = $(".first").text();
        second = $(".second").text();
        correctAnswer = parseInt($(".first").text()) * parseInt($(".second").text()); //parseInt = omvandla text till siffra.. och slå ihop de två alternativen!  och detta är då vårt rätta svar
        theAnswer = $(".answerInput").val() //Vad har användaren skrivit in för svar?

        //Check if answer is correct
        if (theAnswer == correctAnswer) {
            //Create new numbers
            var randomNum = 1 + Math.ceil(Math.random() * 12); /* Pick random number between 1 and 12 */
            $('.first').text(randomNum);
            var randomNum = 1 + Math.ceil(Math.random() * 12); /* Pick random number between 1 and 12 */
            $('.second').text(randomNum);
        } else {
            //Show the person doing the test that
            $("#notReally").slideDown('fast');
            $("h1").slideUp('medium');

            var biggestNumber = biggestNumber(first, second); //en funktion som är inlagd längre upp!! 
            //^--HERE

            if (biggestNumber == first) { //Om största numret = första numret, då är det, det andra numret vi vill stapla upp, annars är det ju första siffran vi vill stapla upp "största siffran antalet gånger".
                theOtherNumber = second;
            } else {
                theOtherNumber = first;
            }
            staplaUpp = theOtherNumber; //Börja med att lägga in den mindre siffran en gång först, och sedan för varje till  " +siffran "
            for (var i = 0; i < biggestNumber - 1; i++) { //För varje antal det finns av den mindre siffran, stapla upp den med plus emellan!
                staplaUpp = staplaUpp + '<span style="margin:0 0.2em;">+</span>' + theOtherNumber;
            }
            $("#actually").append(staplaUpp);

        }

        $(".answerInput").val('');
        alert('first' + first);
        return false;
    });

});​ 
```

[演示](http://jsfiddle.net/tWEY6/2/)

# ruby - Ruby：未定义的局部变量是否在不同的代码路径中定义？

> ID：13995252
> 
> 赞同：3
> 
> 时间：2012-12-21T18:21:15.867
> 
> 标签：ruby, variables

有人可以检查我注意到的这种行为吗？

如果您没有为局部变量分配任何内容并尝试将其打印出来，则会按预期生成异常。如果您在无法访问的代码路径中分配局部变量，则它可以工作。应该是这样吗？

```
def a
  # Should generate an error because foobar is not defined.
  puts foobar
end

def b
  # This block never is run but foobar is entered into the symbol table.
  if false
    foobar = 123
  end

  # This succeeds in printing nil
  puts foobar
end

begin; a; rescue Exception => e; puts "ERROR: #{e.message}"; end
begin; b; rescue Exception => e; puts "ERROR: #{e.message}"; end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T18:23:26.193

是的，这是正确的。Ruby 在解析期间而不是在函数运行时对变量进行作用域。因此，简单地引用一个变量就足以定义它，即使它是在无法访问的代码路径中引用的。

不久前我遇到了这个问题 - 请参阅[此博客文章](http://www.coffeepowered.net/2009/03/02/syntactic-sugar-will-occassionally-kick-your-puppies/)以了解该行为。

# java - 使用 selenium webdriver 单击元素不会产生预期的结果

> ID：13995253
> 
> 赞同：1
> 
> 时间：2012-12-21T18:21:16.570
> 
> 标签：java, junit, selenium-webdriver, selenium-ide

首先是规范，我正在用 java 编写 Selenium Webdriver 测试，用于主要用 ExtJS 编写并在 firefox 浏览器 v14 上运行的应用程序。有趣的是，Selenium 可以找到我想要单击的元素，但单击似乎没有执行，或者如果它正在执行，则不会发生所需的结果（出现弹出窗口）。我还在 Selenium IDE 中验证了我正在寻找的元素（我通过 Xpath 找到的 span 元素）存在，但是在 Selenium IDE 中我遇到了无法单击它的相同问题。

如果我手动单击按钮，则会出现弹出窗口，询问我要上传的文件。我还尝试了其他元素，例如跨度的父“按钮”元素和父“em”元素以及父“div”元素，但都没有运气。

让我感到沮丧的是，我已经为这个应用程序编写了几个星期的 Selenium 测试，并且总是能够使用这种方法来单击按钮，而对于这个特定的按钮，它不再起作用。

```
 WebElement uploadButton = driver.findElement(By.xpath("//span[contains(text(), 'Upload Popup')]"));
    uploadButton.click(); 
```

编辑1：认为按钮本身的代码可能会有所帮助

```
<button id="filefield-1158-buttonEl-btnEl" class="x-btn-center" autocomplete="off" role="button" hidefocus="true" type="button" style="background-color: transparent;"> 
```

注意id是ExtJS创建的动态id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:41:21.380

这可能是因为很多原因。我建议您在测试运行时进行调试。

可以在 Selenium Firefox 实例中安装 FireBug：

```
File file = new File("firebug-1.8.1.xpi");
FirefoxProfile firefoxProfile = new FirefoxProfile();
firefoxProfile.addExtension(file);
firefoxProfile.setPreference("extensions.firebug.currentVersion", "1.8.1"); // Avoid startup screen

WebDriver driver = new FirefoxDriver(firefoxProfile); 
```

我假设您可以通过 JUnit（在 Eclipse 之类的 IDE 中）启动您的测试。在调试模式下启动测试并在单击按钮之前设置断点。然后通过 FireBug 检查 html 代码。它可能会给你一个开始。

另一种可能性是通过 css 类 (By.className) 或选择器 (By.cssSelector) 选择按钮：

```
WebElement uploadButton = driver.findElement(By.className("x-btn-center"));
uploadButton.click(); 
```

如果页面上有多个按钮，您将不得不使用

```
List<WebElement> buttons = driver.findElements(By.className("x-btn-center"));
WebElement uploadButton = buttons.get(index);
uploadButton.click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:36:15.443

试试这个：

```
 driver.findElements(By.xpath("//button[@class='x-btn-center']").click() 
```

或者

```
 driver.findElements(By.xpath("//*[@class='x-btn-center']").click() 
```

# c# - 关闭 Word 文档时出错：“消息过滤器指示应用程序正忙。”

> ID：13995255
> 
> 赞同：4
> 
> 时间：2012-12-21T18:22:02.013
> 
> 标签：c#, asp.net, com-interop

我正在使用 Microsoft Interop 将 Word Doc 保存为 HTML 文件，当我尝试关闭文档时出现此错误：

> **消息过滤器指示应用程序正忙。（来自 HRESULT 的异常：0x8001010A (RPC_E_SERVERCALL_RETRYLATER)）**

这是我的代码：

```
// word interop setting
object visible = true;
object readOnly = true;
object missing = Type.Missing;
object saveChanges = true;
object htmlFile = (object)Server.MapPath(@"worddoc.html");
object fileType = 
  (object)Microsoft.Office.Interop.Word.WdSaveFormat.wdFormatFilteredHTML;       

// open document
Microsoft.Office.Interop.Word.Application wordApp =
  new Microsoft.Office.Interop.Word.Application();
Microsoft.Office.Interop.Word.Document wordDoc =
  wordApp.Documents.Open(ref url, ref missing, ref readOnly, ref missing,
       ref missing, ref missing, ref missing, ref missing, ref missing,
       ref missing, ref  missing, ref  visible, ref missing, ref missing,
       ref missing, ref missing);

try
{                           
    // save the file                 
    wordDoc.SaveAs(ref htmlFile, ref fileType, ref missing, ref missing,
        ref missing, ref missing, ref missing, ref missing, ref missing,
        ref missing, ref missing, ref missing, ref missing, ref missing,
        ref missing, ref missing);
}
catch (System.Exception ex)
{
    saveChanges = false;
}
finally
{
    wordDoc.Close(ref saveChanges, ref missing, ref missing); // ERROR HERE
    wordApp.Quit(ref saveChanges, ref missing, ref missing);
    wordDoc = null;
    wordApp = null;
} 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T18:52:41.693

您的代码没有任何问题。问题是您在不受支持的配置中运行它，并且在这种情况下办公室的行为未定义（在 asp.net 下运行）

> Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

欲了解更多信息：

[http://support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)

但是，您可以使用[VSTO 服务器文档](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.tools.applications.serverdocument.aspx)类来处理 Office 文档，而无需启动 Office。

# c - 从 C 中的文件填充矩阵

> ID：13995256
> 
> 赞同：0
> 
> 时间：2012-12-21T18:22:11.093
> 
> 标签：c, matrix, file-io

我正在尝试编写一个从文件中读取的小程序。我从包含以下数字的文件（random.dat）中尝试了这些代码：

```
0.575 0.235
0.456 0.322 
```

我写的代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#define N 2

int main (void) {
  FILE *fp;
  int i, j;
  double x,y,data[N][N] = {{0}};

  if ((fp = fopen("random.dat", "r")) == NULL ) {
    printf("Error\n");
    exit(EXIT_FAILURE);
  }

  fp = fopen("random.dat","r");
  printf("\n");

  for (i=0;i<N;i++){
    fscanf(fp,"%lf",&x);
    for(j=0;j<N;j++){
      fscanf(fp,"%lf",&x); 
      data[i][j] = x;
      printf("data[%d][%d]=%lf\n",i,j,data[i][j]);  
    }   
  }
  printf("\n");
  fclose(fp);
return(0);
} 
```

代码写得好吗？

我不明白为什么终端会写：

```
data[0][0]=0.235000
data[0][1]=0.465000
data[1][0]=0.322000
data[1][1]=0.322000 
```

代替：

```
data[0][0]=0.575000
data[0][1]=0.235000
data[1][0]=0.465000
data[1][1]=0.322000 
```

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:27:12.787

在这个嵌套循环中（重新格式化以便于阅读）：

```
for (i=0; i<N; i++)
{
    fscanf(fp, "%lf", &x);   // first fscanf

    for(j=0; j<N; j++)
    {
        fscanf(fp, "%lf", &x); // second fscanf
        data[i][j] = x;
        printf("data[%d][%d]=%lf\n", i, j, data[i][j]);  
    }    
} 
```

您会看到内部循环立即覆盖了`x`在外部循环中读取的值。这意味着您基本上完全跳过读取文件中的第一个数字。稍后这会导致内部循环`fscanf`调用之一失败，但由于您不检查返回值，因此您的程序不会注意到。

只需删除第一`fscanf()`行即可。

作为编辑，如果您使用调试器单步执行您的程序，您会立即看到此问题发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:38:52.617

替换语句，

```
for (i=0;i<N;i++){
   fscanf(fp,"%lf",&x);
   for(j=0;j<N;j++){
     fscanf(fp,"%lf",&x); 
     data[i][j] = x;
     printf("data[%d][%d]=%lf\n",i,j,data[i][j]);  
   }   
} 
```

和

```
 for (i=0;i<N;i++){
    for(j=0;j<N;j++){
        fscanf(fp,"%lf",&x);
        data[i][j] = x;
        printf("data[%d][%d]=%lf\n",i,j,data[i][j]);
     }
 } 
```

# c# - Naudio - 将 32 位 wav 转换为 16 位 wav

> ID：13995259
> 
> 赞同：4
> 
> 时间：2012-12-21T18:22:43.113
> 
> 标签：c#, audio, converter, bit, naudio

我一直在尝试将 32 位立体声 wav 转换为 16 位单声道 wav。我使用 naudio 来捕捉声音，我认为只使用四个更重要字节中的两个就可以了。

这是 DataAvailable 的实现：

```
void _waveIn_DataAvailable(object sender, WaveInEventArgs e)
{
     byte[] newArray = new byte[e.BytesRecorded / 2];
     short two;
     for (int i = 0, j = 0; i < e.BytesRecorded; i = i + 4, j = j + 2)
     {
          two = (short)BitConverter.ToInt16(e.Buffer, i + 2);

          newArray[j] = (byte)(two & 0xFF);
          newArray[j + 1] = (byte)((two >> 8) & 0xFF);
     }
     //do something with the new array:
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T00:02:58.717

我终于找到了解决方案。我只需要将转换后的值乘以 32767 并将其转换为短：

```
void _waveIn_DataAvailable(object sender, WaveInEventArgs e)
{
    byte[] newArray16Bit = new byte[e.BytesRecorded / 2];
    short two;
    float value;
    for (int i = 0, j = 0; i < e.BytesRecorded; i += 4, j += 2)
    {
        value = (BitConverter.ToSingle(e.Buffer, i));
        two = (short)(value * short.MaxValue);

        newArray16Bit[j] = (byte)(two & 0xFF);
        newArray16Bit[j + 1] = (byte)((two >> 8) & 0xFF);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:56:10.860

一个`32-bit`样本可以高达`4,294,967,295`，一个`16-bit`样本可以高达`65,536`。因此，您必须按比例缩小`32-bit`样本以适应`16-bit`样本的范围。或多或少，你正在做这样的事情......

```
SixteenBitSample = ( ThirtyTwoBitSample / 4294967295 ) * 65536; 
```

编辑：

对于立体声到单声道部分，如果两个通道具有相同的数据，只需转储其中一个，否则，将波形加在一起，如果它们超出采样范围 ( `65,536`)，那么您将不得不按比例缩小它们类似于上面的等式。

希望有帮助。

# mysql - 从mysql中的字符串创建列

> ID：13995264
> 
> 赞同：1
> 
> 时间：2012-12-21T18:22:51.243
> 
> 标签：mysql, sql-server

所以我想做的左加入这个表，它将定义问题表中的问题并检查响应表。我写了左连接将每个问题定义为自己的列，但它不起作用..有什么想法吗？

```
select *
FROM Leads l
/*JOIN Projects P ON L.projectid=P.projectid
JOIN Leads LE ON LE.LISTID=L.listid
JOIN Calls CA ON CA.LEADID=LE.leadid*/

join Lists li on (li.Listid=l.Listid)
JOIN Projects P ON (Li.projectid=P.projectid)
join Calls ca on (ca.leadid=l.leadid)

LEFT JOIN (
SELECT 
leadid,
Authorized=MIN(CASE qname WHEN  'Authorized' THEN RESPONSE END),
ReplacementName=MIN(CASE qname WHEN 'ReplacementName' THEN RESPONSE END),
SpokeToGroup=MIN(CASE qname WHEN 'SpokeToGroup' THEN RESPONSE END),
SpokeToName=MIN(CASE qname WHEN 'SpokeToName' THEN RESPONSE END),
SpokeToTitle=MIN(CASE qname WHEN 'SpokeToTitle' THEN RESPONSE END),
WishToRecieve=MIN(CASE qname WHEN 'WishToRecieve' THEN RESPONSE END),
Question01=MIN(CASE qname WHEN 'Question01' THEN RESPONSE END),
... -- lots of other fields
MAGExpiration=MIN(CASE qname WHEN 'MAGExpiration' THEN RESPONSE END),
SourceGroup=MIN(CASE qname WHEN 'SourceGroup' THEN RESPONSE END),
SourceID=MIN(CASE qname WHEN 'SourceID' THEN RESPONSE END),
ClientOtherID=MIN(CASE qname WHEN 'ClientOtherID' THEN RESPONSE END)

from Questions q join Responses r on (r.questionid=q.questionid)
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:25:04.007

您的子查询缺少`GROUP BY`：

```
GROUP BY leadid 
```

您正在使用所有聚合函数，但没有按任何内容进行分组。

你还应该`ELSE`在你的`CASE`陈述中加入一个。

您可能有更好的方法来执行此操作。如果您使用的是 SQL Server，那么您可以使用该`PIVOT`函数更轻松地执行此操作。由于您有很多字段要尝试进行透视，因此您应该考虑在 sql server 中使用动态 SQL 并在 MySQL 中使用准备好的语句。

编辑＃1，您似乎还缺少一些关键项目：

```
select *
FROM Leads l
/*JOIN Projects P ON L.projectid=P.projectid
JOIN Leads LE ON LE.LISTID=L.listid
JOIN Calls CA ON CA.LEADID=LE.leadid*/

join Lists li on (li.Listid=l.Listid)
JOIN Projects P ON (Li.projectid=P.projectid)
join Calls ca on (ca.leadid=l.leadid)
LEFT JOIN 
(
  SELECT 
    leadid,
    MIN(CASE qname WHEN  'Authorized' THEN RESPONSE END) as Authorized,
    MIN(CASE qname WHEN 'ReplacementName' THEN RESPONSE END) as ReplacementName,
    MIN(CASE qname WHEN 'SpokeToGroup' THEN RESPONSE END) as SpokeToGroup,
    MIN(CASE qname WHEN 'SpokeToName' THEN RESPONSE END) as SpokeToName,
    MIN(CASE qname WHEN 'SpokeToTitle' THEN RESPONSE END) as SpokeToTitle,
    MIN(CASE qname WHEN 'WishToRecieve' THEN RESPONSE END) as WishToRecieve,
    MIN(CASE qname WHEN 'Question01' THEN RESPONSE END) as Question01,
    ... -- lots of other fields
    MIN(CASE qname WHEN 'MAGExpiration' THEN RESPONSE END) as MAGExpiration,
    MIN(CASE qname WHEN 'SourceGroup' THEN RESPONSE END) as SourceGroup,
    MIN(CASE qname WHEN 'SourceID' THEN RESPONSE END) as SourceID,
    MIN(CASE qname WHEN 'ClientOtherID' THEN RESPONSE END) as ClientOtherID
  from Questions q 
  join Responses r 
    on (r.questionid=q.questionid)
  group by leadid
) qr  -- an alias for the subquery
  on l.leadid = qr.leadid  -- the on for the join 
```

# sql - SQL Server 2008 身份密钥自动增量问题

> ID：13995265
> 
> 赞同：3
> 
> 时间：2012-12-21T18:22:53.223
> 
> 标签：sql, sql-server-2008

我最近不得不将一个数据库（sql server 2008）移动到另一台服务器上，我注意到在其中一个表中，标识列的值已经开始得到一些意想不到的值。其设置为标识列，标识增量为 1，标识种子为 1。在每 10 个连续条目左右之后，它将从另一个更高的数字开始，并在接下来的 10 个左右的条目中递增 1，然后跳到另一个更高的数字。我似乎无法弄清楚这个问题。

对不起外行​​语言。我不是数据库人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:28:03.547

这可能不是您的身份密钥的问题，而是用于插入数据的框架或 SP 的问题。如果您有一个插入数据但随后被回滚的存储过程，则 ID 被保留但该行被“删除”。

所以要检查两个地方：一个是您正在使用的框架（NHibernate，还是实体框架等？）......这些框架可能会插入行然后删除它们。第二个要检查的地方是 SPROC 中的 INSERT 语句以及您可能期望 ROLLBACK 的其他地方。

请参阅：[即使事务回滚，SQL 标识（自动编号）也会增加](https://stackoverflow.com/questions/282451/sql-identity-autonumber-is-incremented-even-with-a-transaction-rollback)

另一个问题是您可能只是在检查数据而不对其进行排序？并且当您移植数据时，您认为它会始终按 ID 顺序插入或检索。但是因为新表没有以相同的方式“索引”，所以您不一定会按主键顺序查看项目。如果行在大多数情况下出现连续的间隙，则这种情况不太可能发生，但值得一提。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:43:52.183

以下内容将对您的问题有所了解。

1.  创建具有标识自动增量列的表
2.  插入10行随机数据
3.  您将看到 ID 值为 1,2,3,4,5,6,7,8,9,10
4.  `delete from mytable where id=10`
5.  在表中插入另一行
6.  现在您将看到 ID 值为`1,2,3,4,5,6,7,8,9,**11**`

# c++ - 将 3rd 方头文件与 Rcpp 一起使用

> ID：13995266
> 
> 赞同：44
> 
> 时间：2012-12-21T18:23:01.737
> 
> 标签：c++, r, rcpp

我有一个名为的头文件`coolStuff.h`，其中包含`awesomeSauce(arg1)`我想在我的 cpp 源文件中使用的函数。

目录结构：

*   工作目录
    *   源Cpp
        *   Cpp文件.cpp
    *   cppHeaders
        *   酷东西

编码：

```
#include <Rcpp.h>
#include <cppHeaders/coolStuff.h>
using namespace Rcpp;

// [[Rcpp::export]]
double someFunctionCpp(double someInput){

 double someOutput = awesomeSauce(someInput);

return someOutput;
} 
```

我得到错误：

```
 theCppFile.cpp:2:31: error: cppHeaders/coolStuff.h: No such file or directory 
```

我已将文件和目录移动到各处，但似乎无法使其正常工作。我到处都看到了使用 3rd 方标头的示例，这些示例说只是这样做：

```
#include <boost/array.hpp> 
```

（来自 Hadley/devtools）

[https://github.com/hadley/devtools/wiki/Rcpp](https://github.com/hadley/devtools/wiki/Rcpp)

那么给了什么？我整个早上都在搜索，但找不到对我来说似乎很简单的事情的答案。

## 更新 01.11.12

好的，现在我已经弄清楚了如何在 Rstudio 中构建使用 Rcpp 的包，让我重新表述一下这个问题。我有一个独立的头文件coolStuff.h，其中包含我想在我的cpp 代码中使用的函数。

1) 我应该将coolStuff.h 放在包目录结构的什么位置，以便CppFile.cpp 可以使用它包含的功能？

2) 如何在 cpp 文件中调用coolStuff.h？再次感谢你的帮助。我从上次的谈话中学到了很多。

注意：我阅读了小插图“编写使用 Rcpp 的包”，它没有解释如何执行此操作。

## 答案：

*好的，让我总结一下我的问题的答案，因为它分散在这个页面上。如果我有错误的细节，请随时编辑或让我知道，我会编辑它：*

因此，您找到了一个`.h`or文件，其中包含要在您正在编写`.cpp`的文件中使用的函数或其他一些代码，以便与.`.cpp``Rcpp`

让我们继续调用这个找到的代码`coolStuff.h`并调用你想要使用的函数`awesomeSauce()`。让我们调用您正在编写的文件`theCppFile.cpp`。

（在这里我应该注意，.h 文件和 .cpp 文件中的代码都是 C++ 代码，它们之间的区别在于 C++ 程序员可以让事情以正确的方式组织起来。我将在这里讨论不同之处，但是在这里对 SO 进行简单搜索将引导您讨论差异。对于需要使用您找到的一些代码的 R 程序员来说，没有真正的区别。）

**简而言之：**您可以使用`coolStuff.h`不调用其他库的文件，方法是剪切并粘贴到`theCppFile.cpp`中，或者如果您创建一个包，您可以将文件放在文件所在的`\src`目录中并在`theCppFile.cpp`文件`#include "coolStuff.h"`顶部使用你在写。后者更灵活，允许您`coolStuff.h`在其他`.cpp`文件中使用函数。

**细节：**

1)`coolStuff.h`不得调用其他库。所以这意味着它不能在顶部有任何包含语句。如果是这样，我在下面详述的内容可能不起作用，并且使用调用其他库的找到的代码超出了此答案的范围。

2）如果要编译文件，`sourceCpp()`需要剪切并粘贴`coolStuff.h`到`theCppFile.cpp`. 我被告知有例外，但`sourceCpp()`旨在编译一个`.cpp`文件，所以这是最好的途径。

（注意：我不保证简单的剪切和粘贴可以开箱即用。您可能必须重命名变量，或者更有可能将正在使用的数据类型切换为与您在 中使用的一致`theCppFile.cpp`。但到目前为止，使用 6 个不同的简单`.h`文件，剪切和粘贴对我来说非常简单）

3) 如果您只需要使用`coolStuff.h`in`theCppFile.cpp`而没有其他地方的代码，那么您应该将其剪切并粘贴到`theCppFile.cpp`.

（我再次不保证请参阅上面关于剪切和粘贴的说明）

4) 如果你想使用AND 其他文件中包含`coolStuff.h`的代码，你需要考虑构建一个包。这并不难，但可能有点棘手，因为那里有关使用 Rcpp 构建包的信息范围从您想要的任何 R 包的详尽彻底的文档（但对于新手来说，这超出了您的头顶），以及新手敏感介绍（可能会遗漏*您*碰巧需要的细节）。`theCppFile.cpp``.cpp`

 *这是我的建议：

A）首先从剪切和粘贴`theCppFile.cpp`代码中获得一个版本，该版本可以编译并按您期望的方式工作。这不是必须的，但如果您是 Rcpp OR 包的新手，最好确保您的代码在这种简单情况下工作，然后再转到下面更复杂的情况。`coolStuff.h``theCppFile.cpp``sourceCpp()`

B) 现在使用`Rcpp.package.skeleton()`或使用 RStudio 中的构建功能构建您的包（强烈推荐）。`Rcpp.package.skeleton()`您可以在[hadley/devtools](https://github.com/hadley/devtools/wiki/Rcpp)或[Rcpp Attributes Vignette](http://dirk.eddelbuettel.com/code/rcpp/Rcpp-attributes.pdf)中找到有关使用的详细信息。使用 Rcpp 编写包的完整文档在编写[使用 Rcpp 的包中](http://cran.rstudio.com/web/packages/Rcpp/vignettes/Rcpp-package.pdf)，但是本文假设您对 C++ 的使用方式相当了解，并且不使用新的“属性”方式来执行 Rcpp。

`compileAttributes()`如果使用 RStudio 或者您不在 RStudio 中，请不要忘记“构建和重新加载” 。

C) 现在您应该在 \R 目录中看到一个名为`RcppExports.R`. 打开它并检查一下。`RcppExports.R`您应该会看到目录中所有 .cpp 文件的 R 包装函数`\src`。挺甜的。

D) 尝试与您在 中编写的函数相对应的 R 函数`theCppFile.cpp`。它有效吗？如果是这样继续。

`coolStuff.h`E)构建好包后，您可以`src`使用`theCppFile.cpp`.

F) 现在您可以从`theCppFile.cpp`. 请注意，ranker.h 周围没有括号，而是有“”。当包含用户提供的本地文件而不是 Rcpp 或 STL 等库文件时，这是 C++ 约定...`theCppFile.cpp``#include "coolStuff.h"``#include <Rcpp.h>`

G) 现在你必须重建包。在 RStudio 中，这只是 Build 菜单中的“Build & Reload”。如果您不使用 RStudio，您应该运行`compileAttributes()`

H) 现在再次尝试 R 函数，就像在步骤 D) 中所做的那样，希望它可以工作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-21T19:34:05.393

问题是它`sourceCpp`被明确设计为只构建一个独立的源文件。如果您想`sourceCpp`拥有依赖项，那么它们需要是：

1.  在系统中包含目录（即`/usr/local/lib`或`/usr/lib`）；或者

2.  `Rcpp::depends`在您在属性中列出的 R 包中

正如 Dirk 所说，如果您想构建多个源文件，那么您应该考虑使用 R 包而不是`sourceCpp`.

请注意，如果您正在处理一个包并对包的 src 目录中的文件执行 sourceCpp ，它将*像*在包中一样构建它（即您可以包含来自 src 目录或 inst/include 目录的文件）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-01T11:15:51.607

我可以通过在调用 sourceCpp 之前设置两个环境变量来链接任何库（在这种情况下为 MPFR）：

```
Sys.setenv("PKG_CXXFLAGS"="-I/usr/include")
Sys.setenv("PKG_LIBS"="-L/usr/lib/x86_64-linux-gnu/ -lm -lmpc -lgmp -lmpfr") 
```

第一个变量包含库头的路径。第二个包括库二进制文件的路径及其文件名。在这种情况下，还需要其他依赖库。有关更多详细信息，请检查 g++ 编译和链接[标志](https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)。这些信息通常可以使用 pkg-config 获得：

```
pkg-config --cflags --libs mylib 
```

为了更好地理解，我建议使用带有详细输出的 sourceCpp 来打印 g++ 编译和链接命令：

```
sourceCpp("mysource.cpp", verbose=TRUE, rebuild=TRUE) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-15T20:25:56.020

在调用 sourceCpp 之前，我能够在 R 中使用以下全局命令链接 boost 库

```
Sys.setenv("PKG_CXXFLAGS"="-I \path-to-boost\") 
```

基本上反映了这篇文章，但使用了不同的编译器选项： http: [//gallery.rcpp.org/articles/first-steps-with-C++11/](http://gallery.rcpp.org/articles/first-steps-with-C++11/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T19:29:22.653

几件事：

1.  您的主题中的“第三方头库”毫无意义。

2.  第三方标头可以通过模板代码工作，其中标头就是您所需要的，即只有一个包含步骤，编译器会解决问题。

3.  `sourceCpp`一旦您需要库和目标代码的实际链接，除非您通过插件（或环境变量）为其提供元信息，否则您可能无法获得强大和有用的功能。

4.  所以在这种情况下，写一个包。

简单的事情就是使用 Rcpp 和新属性，或者旧的内联和`cxxfunction`. 更复杂的使用 --- 而外部库*更*复杂，您需要查阅文档。为此，我们在 Rcpp 中添加了几个小插曲。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T18:36:44.627

尖括号 <> 用于系统包含，例如标准库。

对于您自己项目的本地文件，请使用引号：“”。

此外，如果您将头文件放在不同的目录中，则头文件路径应指定为包含它的源文件的本地路径。

因此，对于您的示例，这应该有效：

```
#include "../cppHeaders/coolStuff.h" 
```

您可以配置搜索路径，这样就可以在不这样做的情况下找到文件，但通常只对您想要包含在多个项目中的东西这样做是值得的，否则会期望有人“安装”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-01T04:17:58.000

我们可以通过将路径写入文件`PKG_CXXFLAGS`变量中的标头来添加它，`.R/Makevars`如下所示。以下是`xtensor`在 macOS 中添加随 Anaconda 一起安装的头文件的示例。

```
⋊&gt; ~ cat ~/.R/Makevars                                                                                                                              
CC=/usr/local/bin/gcc-7
CXX=/usr/local/bin/g++-7
CPLUS_INCLUDE_PATH=/opt/local/include:$CPLUS_INCLUDE_PATH
PKG_CXXFLAGS=-I/Users/kuroyanagi/.pyenv/versions/miniconda3-4.3.30/include
LD_LIBRARY_PATH=/opt/local/lib:$LD_LIBRARY_PATH
CXXFLAGS= -g0 -O3 -Wall
MAKE=make -j4 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-14T00:47:24.720

这在 Windows 中对我有用：

`Sys.setenv("PKG_CXXFLAGS"='-I"C:/boost/boost_1_66_0"')`

编辑：实际上，如果您使用 Boost Headers，则不需要这个（感谢 Ralf Stubner）：

`// [[Rcpp::depends(BH)]]`*

# c# - 如何使用 NHibernate 的 QueryOver API 表达包含 WHERE..IN 子查询的查询？

> ID：13995272
> 
> 赞同：2
> 
> 时间：2012-12-21T18:23:14.223
> 
> 标签：c#, nhibernate, queryover

我有一个对象模型，其中一个`Order`包含许多`LineItems`，每个`LineItem`都有一个关联的`Product`. 在对象模型中，这些是单向关联`LineItem`——a 不知道任何关于它的`Order`.

![类图](../Images/6f0c0e7b7e4c08660404fedf6290048b.png)

我想查询包含产品名称与字符串匹配的订单项的订单，为每个订单返回一行（以便可以执行分页）。

```
SELECT * FROM Orders 
WHERE OrderID IN (
    SELECT DISTINCT OrderID 
    FROM LineItems 
    INNER JOIN Products on LineItems.ProductID = Products.ProductID
    WHERE Products.Name = 'foo'
) 
```

鉴于我有一个`ICriteria`或一个`IQueryOver`代表子查询，我如何将它实际应用到我的根订单查询？

```
var subquery = QueryOver.Of<LineItem>
                        .Where(l => l.Product.Name == "foo")
                        .TransformUsing(Transformers.DistinctRootEntity); 
```

我找到了很多假设查询中的根对象位于一对多关系的“多”端的示例，但我不知道如何对根对象的某些内容添加*限制许多*.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:22:50.527

我将使其成为订单和订单项之间的双向关系，以实现高效查询（减少所需的连接数量）。但是，如果由于某种奇怪的原因你不能，你需要从 Order 开始子查询......

```
LineItem lineItemAlias = null;
Product productAlias = null;

var subQuery = QueryOver.Of<Order>()
            .JoinAlias(x => x.LineItems, () => lineItemAlias)
            .JoinAlias(() => lineItemAlias.Product, () => productAlias)
            .Where(() => productAlias.Name == "foo")
            .Select(Projections.Group<Order>(x => x.Id));

var results = Session.QueryOver<Order>()
              .WithSubquery.WhereProperty(x => x.Id).In(subQuery)
              .List(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:29:31.897

您提供的 SQL 的直接翻译可以使用这个来实现

```
var subQuery = 
      QueryOver.Of<LineItem>(() => lineItem)
            .JoinAlias(() => lineItem.Products, () => product)
            .Where(() => product.Name == "foo")
            .Select(Projections.Distinct(
                      Projections.Property(()=> lineItem.Order.Id)));;

var theQueryYouNeed =  
               QueryOver.Of<Orders>(() => order)
              .WithSubquery.WherePropertyIn(() => order.Id).In(subQuery); 
```

但是，如果您的`LineItem`实体没有`Order`属性，那么您就不能真正使用子查询。

如果需要找

*所有具有产品名称为“foo”的 LineItem 的订单*

```
var theQueryYouNeed = 
  QueryOver.Of<Orders>(() => order)
     .JoinAlias(() => order.LineItems, () => lineItem)
     .JoinAlias(() => lineItem.Product, () => product)
     .Where(() => product.Name == "foo")
     .TransformUsing(new DistinctRootEntityResultTransformer()) 
```

# python - 使用变形器在 Plone 中上传内容时出现未经授权的异常

> ID：13995273
> 
> 赞同：1
> 
> 时间：2012-12-21T18:23:16.793
> 
> 标签：python, plone, transmogrifier

在运行变形器管道并创建新对象时，我在创建某些内容类型时遇到未经授权的异常（例如“文档”-`plone.app.transmogrifier.atschemaupdater.py` 在此调用时引发：`event.notify(ObjectInitializedEvent(obj))`

这非常烦人，因为控制台上没有堆栈跟踪。它也很难调试，因为有很多内部 Plone 和 Zope 调用执行“订阅事件”的动态函数。到目前为止，我通过 PDB 得到了这个堆栈跟踪：

```
Pdb) zope.component.subscribers((event.object, event), None)
*** Unauthorized: You are not allowed to access 'save' in this context
(Pdb) where
  /home/gwidion/.buildout/eggs/Zope2-2.13.15-py2.7.egg/ZServer/PubCore/ZServerPublisher.py(31)__init__()
-> response=b)
  /home/gwidion/.buildout/eggs/Zope2-2.13.15-py2.7.egg/ZPublisher/Publish.py(443)publish_module()
-> environ, debug, request, response)
  /home/gwidion/.buildout/eggs/Zope2-2.13.15-py2.7.egg/ZPublisher/Publish.py(237)publish_module_standard()
-> response = publish(request, module_name, after_list, debug=debug)
  /home/gwidion/.buildout/eggs/Zope2-2.13.15-py2.7.egg/ZPublisher/Publish.py(115)publish()
-> object=request.traverse(path, validated_hook=validated_hook)
  /home/gwidion/.buildout/eggs/Zope2-2.13.15-py2.7.egg/ZPublisher/BaseRequest.py(501)traverse()
-> subobject = self.traverseName(object, entry_name)
  /home/gwidion/.buildout/eggs/Zope2-2.13.15-py2.7.egg/ZPublisher/BaseRequest.py(326)traverseName()
-> ob2 = namespaceLookup(ns, nm, ob, self)
  /home/gwidion/.buildout/eggs/zope.traversing-3.13.2-py2.7.egg/zope/traversing/namespace.py(112)namespaceLookup()
-> return traverser.traverse(name, ())
  /home/gwidion/.buildout/eggs/zope.traversing-3.13.2-py2.7.egg/zope/traversing/namespace.py(327)traverse()
-> name=name)
  /home/gwidion/.buildout/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py(120)queryMultiAdapter()
-> return sitemanager.queryMultiAdapter(objects, interface, name, default)
  /home/gwidion/.buildout/eggs/zope.component-3.9.5-py2.7.egg/zope/component/registry.py(238)queryMultiAdapter()
-> objects, interface, name, default)
  /home/gwidion/.buildout/eggs/zope.interface-3.6.7-py2.7-linux-x86_64.egg/zope/interface/adapter.py(532)queryMultiAdapter()
-> result = factory(*objects)
  /home/gwidion/simples/carta/plone/src/cartacapital.portal.migration/src/cartacapital/portal/migration/import.py(17)__init__()
-> tr("cartacapital.portal.migration")
  /home/gwidion/.buildout/eggs/collective.transmogrifier-1.3-py2.7.egg/collective/transmogrifier/transmogrifier.py(62)__call__()
-> for item in pipeline:
  /home/gwidion/.buildout/eggs/plone.app.transmogrifier-1.2-py2.7.egg/plone/app/transmogrifier/atschemaupdater.py(67)__iter__()->{'_path': u'/Plone...economia', '_type': 'Folder', 'debug': None, 'state': 'published', ...}
-> event.notify(ObjectInitializedEvent(obj))
  /home/gwidion/.buildout/eggs/zope.event-3.5.2-py2.7.egg/zope/event/__init__.py(31)notify()
-> subscriber(event)
  /home/gwidion/.buildout/eggs/zope.component-3.9.5-py2.7.egg/zope/component/event.py(24)dispatch()
-> zope.component.subscribers(event, None)
  /home/gwidion/.buildout/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py(136)subscribers()
-> return sitemanager.subscribers(objects, interface)
  /home/gwidion/.buildout/eggs/zope.component-3.9.5-py2.7.egg/zope/component/registry.py(321)subscribers()
-> return self.adapters.subscribers(objects, provided)
  /home/gwidion/.buildout/eggs/zope.interface-3.6.7-py2.7-linux-x86_64.egg/zope/interface/adapter.py(585)subscribers()
-> subscription(*objects)
> /home/gwidion/.buildout/eggs/zope.component-3.9.5-py2.7.egg/zope/component/event.py(32)objectEventNotify()
-> zope.component.subscribers((event.object, event), None)
  /home/gwidion/.buildout/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py(136)subscribers()
-> return sitemanager.subscribers(objects, interface)
  /home/gwidion/.buildout/eggs/zope.component-3.9.5-py2.7.egg/zope/component/registry.py(321)subscribers()
-> return self.adapters.subscribers(objects, provided)
  /home/gwidion/.buildout/eggs/zope.interface-3.6.7-py2.7-linux-x86_64.egg/zope/interface/adapter.py(585)subscribers()
-> subscription(*objects)
  /home/gwidion/.buildout/eggs/Products.CMFEditions-2.2.4-py2.7.egg/Products/CMFEditions/subscriber.py(60)objectInitialized()
-> return webdavObjectEventHandler(obj, event, comment=comment)
  /home/gwidion/.buildout/eggs/Products.CMFEditions-2.2.4-py2.7.egg/Products/CMFEditions/subscriber.py(44)webdavObjectEventHandler()
-> maybeSaveVersion(obj, comment=comment, force=False)
  /home/gwidion/.buildout/eggs/Products.CMFEditions-2.2.4-py2.7.egg/Products/CMFEditions/utilities.py(123)maybeSaveVersion()
-> pr.save(obj=obj, comment=comment)
  /home/gwidion/.buildout/eggs/Products.CMFEditions-2.2.4-py2.7.egg/Products/CMFEditions/CopyModifyMergeRepositoryTool.py(294)save()
-> self._assertAuthorized(obj, SaveNewVersion, 'save')
  /home/gwidion/.buildout/eggs/Products.CMFEditions-2.2.4-py2.7.egg/Products/CMFEditions/CopyModifyMergeRepositoryTool.py(428)_assertAuthorized()
-> raise Unauthorized(name)
(Pdb) 
```

到目前为止，我的解决方法是在运行管道之前将 zope.event.notify 猴子修补为无操作，但这显然不是这样做的方法。

注意：我使用视图代码中的一个函数触发了变形器管道-（当然，我确实将视图加载为站点管理员）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:35:28.993

运行 transmogrifier 管道时应禁用版本控制。这[记录](http://pypi.python.org/pypi/plone.app.transmogrifier#disable-enable-versioning-sections)在`plone.app.transmogrifier`文档中；蓝图提供了`plone.app.transmogrifier.versioning`一个简单的方法来切换它：

```
[transmogrifier]
pipeline =
    schemasource
    disable_versioning
    constructor
    enable_versioning
    schemaupdater

[disable_versioning]
blueprint = plone.app.transmogrifier.versioning.disable

[constructor]
blueprint = collective.transmogrifier.sections.constructor

[enable_versioning]
blueprint = plone.app.transmogrifier.versioning.enable 
```

# ember.js - Ember.js：包装 JQuery 组件（Minicolors）

> ID：13995275
> 
> 赞同：2
> 
> 时间：2012-12-21T18:23:22.470
> 
> 标签：ember.js

我尝试在 Ember.js 应用程序中集成 Minicolor JQuery 组件。集成应该很容易，但它对我不起作用......（显示输入但没有 JQuery 组件）......

Minicolor 集成指南： [https ://github.com/claviska/jquery-miniColors](https://github.com/claviska/jquery-miniColors)

从文档：只需插入 js 文件并添加以下输入：

我的.js文件：

```
App.ColorPicker = Em.TextField.extend({
  type: 'minicolors',
  attributeBindings: ['name'],
   willInsertElement: function() {
    ;
  }
}); 
```

html文件

```
{{view App.ColorPicker placeholder="Background color" name="color" valueBinding="App.MyController.backgroundColor"}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T21:13:55.993

我相信您的问题是 ember`<input type='minicolors' ... />`在 minicolors 的初始化代码已经执行后动态添加元素，导致您的新 minicolors 输入未初始化。

我通过使用`didInsertElement`事件而不是`willInsertElement`事件来强制 minicolors 创建动态添加的`App.ColorPicker`元素，从而使您的示例正常工作。[willInsertElement](http://emberjs.com/api/classes/Ember.View.html#event_willInsertElement)在要插入但尚未插入的元素时触发，而didInsertElement[将](http://emberjs.com/api/classes/Ember.View.html#event_didInsertElement)在元素插入后触发。我使用了[minicolors](https://github.com/claviska/jquery-miniColors) github 存储库中的最新文件。

```
App.ColorPicker = Em.TextField.extend({
  type: 'minicolors',
  attributeBindings: ['name'],
   didInsertElement: function() {
       $.minicolors.init();
  }
}); 
```

我遇到的唯一其他问题是需要确保可以加载带有颜色选择器图形元素的 css 文件和 png。显然，如果 css 和 png 文件不可加载，则 js 部分不起作用。

# amazon-web-services - ELB缺乏A记录支持的可能解决方案？

> ID：13995282
> 
> 赞同：1
> 
> 时间：2012-12-21T18:23:56.087
> 
> 标签：amazon-web-services, amazon-ec2, load-balancing, haproxy, amazon-elb

嘿伙计们，我想知道这似乎是解决 Amazon Elastic Load Balancer 缺乏专用 IP 的古老问题的可行解决方案，因此没有记录支持。

如果我创建一个微型/小型实例并将其连接到弹性 IP 会怎样。然后我可以使用该 IP 作为我网站的 A 记录地址。该实例会将其 100% 的流量转发到 ELB 负载均衡器地址（Haproxy？），然后该地址将正常运行并将该流量转发到我的服务器池。

通过这种架构，我可以使用我的 A 记录和 ELB。

*   除了将流量转发到 ELB 的初始实例的成本之外，这还有什么缺点吗？

*   这种双重转发会造成太多的延迟，还是真的可以忽略不计，因为它们都在 AWS 中？

感谢您的反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:29:43.740

如果您当前为 DNS 使用 Route53，它确实支持处理区域顶点。

[https://forums.aws.amazon.com/message.jspa?messageID=260459](https://forums.aws.amazon.com/message.jspa?messageID=260459)

不确定这是否回答了您的问题，因为您没有提及为什么需要专用 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T02:35:45.387

> 除了将流量转发到 ELB 的初始实例的成本之外，这还有什么缺点吗？

呃，是的。你失去了 ELB 大约 99.9% 的好处。

> 这种双重转发会造成太多的延迟，还是真的可以忽略不计，因为它们都在 AWS 中？

不，滞后应该很小（亚毫秒）。两个主要问题是：

1）当您的流量增加时，您的实例将成为*瓶颈。*您将无法在突如其来的匆忙中幸存下来，例如从 Slashdot 或 Oprah 等高流量网站链接。

ELB 的全部意义在于它们可以为您管理扩展（前端和后端）。如果您在流程中插入一个框，它会阻止 ELB 做任何有用的事情。

此外，微实例可以占用*非常少的*流量。如果您不想限制您的网络数据包，您必须至少访问一个 m1.large。

2）您的实例将成为*单点故障*。当你的盒子死了，你的网站就会关闭。ELB 可以通过冗余防止前端和后端出现问题。

也许如果您解释了为什么需要 A 记录？

（也可以运行您自己的前端：只需创建一个带有 EIP 的盒子，然后在其上放置 nginx 和/或 HAProxy。但与一切一样，需要权衡取舍。）

# ms-access-2007 - 使用另一个表中的值字段更新表，但根据时间戳从第二个中选择唯一值

> ID：13995283
> 
> 赞同：2
> 
> 时间：2012-12-21T18:24:43.920
> 
> 标签：ms-access-2007

我在 Access 数据库中有两个表（MatMast 和 ChangeLog），其中的公共键是 MatCode。表格如下所示：

**垫子**

MatCode (PK)，当前状态

10001，活动中

10002, 不活动

10003，活动中

**变更日志**

ChangeInstance (PK)、MatCode、Status、TimeStamp

25452, 10001, 活动, 2012 年 12 月 19 日上午 11:21

25678, 10001, INACTIVE, 2012 年 12 月 20 日 06:45 PM

20296、10002、活动、2012 年 12 月 20 日下午 3:52

我现在的工作是在 Access 中编写一个 SQL 查询（不允许使用 VBA :( 为此）将 MatMast 表更新为：

**MatMast（*建议*更新查询后）**

MatCode (PK)，当前状态

10001, INACTIVE <== Picking ChangeInstance 25678, 10001最新的

10002, ACTIVE <== Picking ChangeInstance 20296，这是 10002 的唯一记录

10003, ACTIVE <== Unchanged，因为在 ChangeLog 中没有记录

尝试了各种方法。但是，我无法编写更新查询来执行此操作。请，请帮助！

注册，SKB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:51:17.510

你提到了一个任务，所以我怀疑需要更新，所以：

```
UPDATE matmast
       INNER JOIN (SELECT c.changeinstance,
                          c.matcode,
                          c.status,
                          c.TIMESTAMP
                   FROM   changelog c
                   WHERE  (( ( c.changeinstance ) IN
                             (SELECT TOP 1 changeinstance
                              FROM   changelog q
                              WHERE  q.matcode = c.matcode
                              ORDER  BY TIMESTAMP DESC,
                                        changeinstance) ))) x
               ON matmast.matcode = x.matcode
SET    matmast.currentstatus = x.status 
```

# wordpress - 如何在 Wordpress 中获得二级菜单？

> ID：13995284
> 
> 赞同：4
> 
> 时间：2012-12-21T18:24:50.160
> 
> 标签：wordpress, menu, content-management-system

我尝试了许多功能（wp_list_pages、get_pages、wp_nav_menu）和几个功能超过 2 小时，但无法解决这个问题。

我创建了三层深度的页面：

```
PAGE level1
    SUBPAGE level2
        SUBPAGE level3 
```

我需要为每个人显示一个单独的菜单，例如：

```
MENU1 (all top-level pages)
MENU2 (all sub-pages of CURRENT top level page)
MENU3 (all sub pages of current item from MENU2) 
```

对于像 Wordpress 这样的 CMS 来说，它不应该那么复杂，但我认为我将可能的解决方案过于复杂化了。您对实现这一目标的可能方法有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:05:24.280

首先，您必须定义菜单项和页面之间的一致性。我不能根据你的问题来定义这个。如果您有两个 level2 子页面和两个 menu2 项怎么办？哪个菜单项属于哪个子页面？

然后这个过程是微不足道的。您可以获得所有菜单项

```
$menu_items = wp_get_nav_menu_items($cur_menu, array()); 
```

并检查`menu_item_parent`字段以找到父项

```
foreach ($menu_items as $item) {
    if ($item->menu_item_parent === $parent_id) {
        //this is child of $parent_id
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:21:18.300

如果您使用的是 WordPress 功能[`register_nav_menus()`](http://codex.wordpress.org/Navigation_Menus)，它应该相当简单。

在您的 functions.php 文件中，您需要注册 3 个单独的菜单，如下所示：

```
<?php
add_action( 'init', 'register_my_menus' );
function register_my_menus() {
  register_nav_menus(
    array( 'first' => 'first', 'second' => 'second', 'third' => 'third', )
    );
  }
?> 
```

现在注册菜单后，您只需将它们放在主题文件中的位置，如下所示：

**第一个菜单**（可能在 header.php 文件中）

```
<div id="menu">
  <?php wp_nav_menu( array( 'theme_location' => 'first' ) ); ?>
</div> 
```

**第二个菜单**（可能在 sidebar.php 文件中）

```
<div id="menu">
  <?php wp_nav_menu( array( 'theme_location' => 'second' ) ); ?>
</div> 
```

**第三个菜单**（可能在 footer.php 文件中）

```
<div id="menu">
  <?php wp_nav_menu( array( 'theme_location' => 'third' ) ); ?>
</div> 
```

最后一步是转到外观>菜单并创建 3 个菜单，命名它们并从管理菜单设置中选择将与它们一起使用的页面。

# python - 你如何在 Python 中进行位操作？

> ID：13995285
> 
> 赞同：-2
> 
> 时间：2012-12-21T18:24:53.710
> 
> 标签：python, c

> **可能重复：**
> [如何在 Python 中操作位？](https://stackoverflow.com/questions/147713/how-do-i-manipulate-bits-in-python)

这是我的代码：

```
int val = 0xAA;
int Bit, i;

for (i = 0; i < sizeof(Val)*8; i++) {
    Bit = 1<<i;    
    if (Val & Bit) {
        printf("Found a bit \n");
    }
} 
```

我是一个 C 人，我需要在 Python 中执行此操作。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:26:41.000

根据文档，您可以像在 C 中一样执行它们：

[5.4.1 整数类型的按位运算](http://docs.python.org/2/library/stdtypes.html#bitwise-operations-on-integer-types)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:31:58.627

和 C 一样，正如**Justin**下面所说的。

如果你真的有困难，你可以[在这里](http://www.codecademy.com/courses/python-intermediate-en-KE1UJ?curriculum_id=4f89dab3d788890003000096)很容易地学习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:32:53.867

它与 C 几乎相同，除了在 C 中类型是固定的（16 位、32 位等...... - 在 Python 中，它们能够根据需要进行扩展，所以从根本上说，它是相同的，但会是最好写成）：

```
for i in range(val.bit_length()):
    if val & (1 << i):
        print 'found a bit' 
```

你也可以这样做，

```
>>> format(val, 'b')
'10101010' 
```

也可以将其作为位串来获取，具体取决于您所追求的。

# ios5 - 当应用程序进入后台时使用 BubbleWrap::HTTP 发送设备的位置

> ID：13995286
> 
> 赞同：1
> 
> 时间：2012-12-21T18:24:57.743
> 
> 标签：ios5, ios6, cllocationmanager, rubymotion

在我的应用程序中，我想在后台向网络应用程序提交设备的位置。目前我正在为 POST 请求使用[BubbleWrap](https://github.com/rubymotion/BubbleWrap)。

**请注意，如果需要，我可以使用 BubbleWrap 以外的任何东西。**

当前行为如下：

1.  我启动应用程序
2.  我把它带到背景
3.  [在Web应用程序上等待请求，查看日志，没有任何反应]
4.  我将应用程序带到前台
5.  应用程序发送设备的位置

应该发生什么：

1.  我启动应用程序
2.  我把它带到背景
3.  应用程序发送设备的位置
4.  该应用程序会持续监听重大的位置变化，并在发生重大变化时发送其位置

这是代码：

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    [ommitted]
    UIApplication.sharedApplication.registerForRemoteNotificationTypes(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)

    true
  end

  def applicationDidEnterBackground(application)
    @locationManager.startMonitoringSignificantLocationChanges
  end

  def applicationDidEnterForeground
    @locationManager.stopMonitoringSignificantLocationChanges
  end

  def application(app, didRegisterForRemoteNotificationsWithDeviceToken:deviceToken)
    @device_token = deviceToken.description.gsub(" ", "").gsub("<", "").gsub(">", "")

    # Log the push notification to the console
    puts @device_token
  end

  def application(app, didFailToRegisterForRemoteNotificationsWithError:error)
    show_alert "Error when registering for device token", "Error, #{error}"
  end

  def device_token
    @device_token
  end

  def location_manager
    if @locationManager.nil?
      @locationManager = CLLocationManager.alloc.init
      @locationManager.setDesiredAccuracy(KCLLocationAccuracyBest)
      @locationManager.delegate = self
    end
    @locationManager
  end

  # iOS >= 4
  def locationManager(manager, didUpdateToLocation:current_location, fromLocation:last_location)
    puts "Location #{current_location} [iOS 5]"
  end

  # iOS >= 6
  def locationManager(manager, didUpdateLocations:locations)
    data = {latitude: locations.last.coordinate.latitude,
            longitude: locations.last.coordinate.longitude,
            device_token: @device_token }
    BW::HTTP.post("http://192.168.1.100:4567/", {payload: data}) do |response|
      if response.ok?
        #json = BW::JSON.parse(response.body.to_str)
        #p json['id']
      else
        App.alert(response.error_message)
      end
    end
  end

  def locationManager(manager, didFailWithError:error)
    puts "failed"
  end

  def show_alert(title, message)
    alert = UIAlertView.new
    alert.title = title
    alert.message = message
    alert.show
  end
end 
```

附加信息：

*   我在我的 Rakefile 中声明了以下内容`app.info_plist['UIBackgroundModes'] = ['location']`。

关于为什么这可能不起作用的任何提示或提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:11:21.180

我的猜测是，因为 BW::HTTP.post(...) 是异步的，所以您的应用程序会在调用块之前退出。

# javascript - IE9中非常奇怪的问题，整个页面跳转

> ID：13995290
> 
> 赞同：0
> 
> 时间：2012-12-21T18:25:34.003
> 
> 标签：javascript, jquery, css, debugging, internet-explorer-9

**编辑：客户希望通过禁用 IE 中的单击和拖动功能进行一些测试，因此目前您将无法复制该错误。我了解这是否会影响社区协助解决最终潜在问题的能力。**

所以这就是问题所在。当屏幕高度或更具体地浏览器高度小于网站主容器的高度时，它会在 IE9 和 IE8 中发生。该网站水平滚动，因此其总高度约为 700 或 800 像素。

要重现此错误，您必须在 IE9 中打开此 URL：[http](http://dev.gregoryfca.com/) : //dev.gregoryfca.com/ 并将浏览器的高度设置为大约 500 或 600 像素。所以这将强制页面开始从上到下垂直滚动。

一直保持到顶部，这样您仍然可以看到 G 标志和菜单以及社交图标。然后点击白色区域，不要松开。您可以单击“我们的人员”部分旁边的白色区域。

当您单击开始时，将鼠标向右拖动。这将启动页面滚动并允许您使用水平滚动功能。

所以这里是错误。在IE9中，当浏览器高度小于网站总高度时，在中间部分单击并拖动横向滚动时，整个页面垂直向下跳转，使得屏幕的绝对顶部为#drag-wrapper的顶部元素。

当您水平滚动时，我不希望页面跳转。如果您在 Chrome 或 Firefox 中将这组相同的情况放在一起，您会发现该错误不存在。

我认为这与 IE 处理具有特定定位或类似位置的焦点元素的方式有关。正如您将看到的，该站点使用了大量的 jQuery。

有没有人有任何想法。我基本上已经用尽了我能想到的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:06:07.797

尝试给这个css类赋予`left`和属性：`top`

```
#drag-wrapper {
  height: 610px;
  margin: 35px 0;
  overflow: hidden;
  padding: 0;
  position: absolute;
  left:0;
  top:150px;
  width: 100%;
  -moz-tap-highlight-color: rgba(0,0,0,0);
  -moz-touch-callout: none;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  -webkit-touch-callout: none;
  z-index: 4000;
} 
```

如您所见，此类具有`position:absolute`但没有`left`and`top`属性。`margins to 0`如果需要，请制作。

# python - Boost Python hello 示例给出错误。

> ID：13995291
> 
> 赞同：1
> 
> 时间：2012-12-21T18:25:35.470
> 
> 标签：python, boost, boost-python, bjam

我一直在尝试让 Boost.Python 运行。我正在按照这里提到的步骤

[http://www.boost.org/doc/libs/1_50_0/libs/python/doc/tutorial/doc/html/python/hello.html](http://www.boost.org/doc/libs/1_50_0/libs/python/doc/tutorial/doc/html/python/hello.html)

. 但是，当我尝试从教程目录运行示例程序时，出现以下错误。也就是 hello.py 的 python 脚本被删除。我如何得到 2 个我似乎无法纠正的错误。

```
 C:\boost_1_50_0\libs\python\example\tutorial>b2
notice: no Python configured in user-config.jam
notice: will use default configuration
...patience...
...patience...
...found 1621 targets...
...updating 20 targets...
common.mkdir bin
common.mkdir bin\hello.test
common.mkdir bin\hello.test\msvc-10.0
common.mkdir bin\hello.test\msvc-10.0\debug
common.mkdir bin\hello.test\msvc-10.0\debug\threading-multi
copy hello.py
**The syntax of the command is incorrect.

    copy /b  + this-file-does-not-exist-A698EE7806899E69 "hello.py" "bin\hello.t
est\msvc-10.0\debug\threading-multi\hello.py"

...failed copy hello.py bin\hello.test\msvc-10.0\debug\threading-multi\hello.py.
..
...removing hello.py**
common.mkdir bin\msvc-10.0
common.mkdir bin\msvc-10.0\debug
common.mkdir bin\msvc-10.0\debug\threading-multi
compile-c-c++ bin\msvc-10.0\debug\threading-multi\hello.obj
hello.cpp
msvc.link.dll ..\..\..\..\bin.v2\libs\python\build\msvc-10.0\debug\threading-mul
ti\boost_python-vc100-mt-gd-1_50.dll
**LINK : fatal error LNK1104: cannot open file 'python32.lib'**

        call "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.b
at" x86 >nul
link /NOLOGO /INCREMENTAL:NO /DLL /DEBUG /MACHINE:X86 /subsystem:console /out:".
.\..\..\..\bin.v2\libs\python\build\msvc-10.0\debug\threading-multi\boost_python
-vc100-mt-gd-1_50.dll" /IMPLIB:"..\..\..\..\bin.v2\libs\python\build\msvc-10.0\d
ebug\threading-multi\boost_python-vc100-mt-gd-1_50.lib" /LIBPATH:"C:\Python33\li
bs"   @"..\..\..\..\bin.v2\libs\python\build\msvc-10.0\debug\threading-multi\boo
st_python-vc100-mt-gd-1_50.dll.rsp"
        if %ERRORLEVEL% NEQ 0 EXIT %ERRORLEVEL%

...failed msvc.link.dll ..\..\..\..\bin.v2\libs\python\build\msvc-10.0\debug\thr
eading-multi\boost_python-vc100-mt-gd-1_50.dll ..\..\..\..\bin.v2\libs\python\bu
ild\msvc-10.0\debug\threading-multi\boost_python-vc100-mt-gd-1_50.lib ..\..\..\.
.\bin.v2\libs\python\build\msvc-10.0\debug\threading-multi\boost_python-vc100-mt
-gd-1_50.pdb...
...skipped <pbin\msvc-10.0\debug\threading-multi>hello_ext.pyd for lack of <p..\
..\..\..\bin.v2\libs\python\build\msvc-10.0\debug\threading-multi>boost_python-v
c100-mt-gd-1_50.lib...
.......
.......

...failed updating 4 targets...
...skipped 7 targets...
...updated 9 targets...

C:\boost_1_50_0\libs\python\example\tutorial> 
```

我的 Python 版本是

```
C:\boost_1_50_0\libs\python\example\tutorial>python
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:57:17) [MSC v.1600 64 bit (AM
D64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> python --version 
```

我之前安装了 Python32 的旧版本，但它似乎一直在寻找它。我的 PYTHON_INLCUDE 和 PYTHON_LIBRARY 都指向新的 python 和 PATH 环境变量。

```
C:\boost_1_50_0\libs\python\example\tutorial> echo %python_lib%\
C:\Python33\libs\python33.lib\

C:\boost_1_50_0\libs\python\example\tutorial> echo %python_include%\
C:\Python33\include\

C:\boost_1_50_0\libs\python\example\tutorial> 
```

为什么 hello.py 文件不断被删除:(以及什么系统税不正确

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-23T11:31:22.057

您必须设置配置您的 user-config.jam 文件。似乎 Boost.Python 只能找到您的 Python 3.2 版本。您将在主目录 (ECHO %HOMEDRIVE%%HOMEPATH%) 中找到 user-config.jam 文件，或者在 boost 根目录中搜索“user-config.jam”文件。

比你必须修改这个文件供你使用如下（它只是一个例子）：

MSVC 配置（如果您使用 MSVC）

```
# -------------------
# MSVC configuration.
# -------------------

# Configure msvc (default version, searched for in standard locations and PATH).
# using msvc ;

# Configure specific msvc version (searched for in standard locations and PATH).
using msvc : 10.0 : C:\\app\\tools\\MSVisualStudio2010\\VC\\bin\\cl.exe ; 
```

和 Python 配置

```
# ---------------------
# Python configuration.
# ---------------------

# Configure specific Python version.
# using python : 3.1 : /usr/bin/python3 : /usr/include/python3.1 : /usr/lib ;

using python 
    : 2.5                   # Version
    : C:\\app\\tools\\Python25\\python.exe      # Python Path
    : C:\\app\\tools\\Python25\\include         # include path
    : C:\\app\\tools\\Python25\\libs            # lib path(s)
    : <define>BOOST_ALL_NO_LIB=1
    ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:33:56.270

我昨天在编译 Boost 1.53 时遇到了同样的问题（“命令的语法不正确”）。我可以通过编辑文件 tools/build/v2/tools/common.jam 来解决这个问题：

```
--- common.jam~ 2012-04-25 21:35:54.000000000 +0200
+++ common.jam  2013-03-07 13:33:30.985604300 +0100
@@ -473,7 +473,7 @@
     # destination to the current time by concatenating the
     # source with a nonexistent file.  Note that this requires
     # /b (binary) as the default when concatenating files is /a (ascii).
-    WINDOWS-CP-HACK = "+ this-file-does-not-exist-A698EE7806899E69" ;
+    WINDOWS-CP-HACK = "" ;
 }
 else
 { 
```

# r - ggplot：如何创建一个自动适合数据的离散调色板？

> ID：13995296
> 
> 赞同：7
> 
> 时间：2012-12-21T18:26:07.620
> 
> 标签：r, ggplot2

我有一个自定义函数，用于所有绘图而不是普通函数`ggplot`：

```
my_ggplot <- function(...){
    ggplot(...) +
    theme_bw() +
    scale_colour_manual(values=get_palette(20)) +
    theme(axis.text.x=element_text(size=15),
          axis.text.y=element_text(size=15),
          axis.title.y=element_text(vjust=-.5, size=15, face="bold"),
          axis.title.x=element_text(vjust=-.5, size=15, face="bold"),
          plot.title=element_text(vjust=1, size=18, face="bold"),
          legend.title=element_text(size=15, face="bold"),
          plot.margin=unit(c(2,1,2,2), "lines")) # T R B L
} 
```

现在我可以做类似的事情：

```
my_ggplot(molten_df, aes(timepoint,count,group=gene_symbol)) +
    geom_line(aes(color=gene_symbol), lwd=1.5) 
```

这给了我不错的标签字体大小和我自己的色标。不幸的是，我必须手动将调色板大小 (20) 编码到我的 get_palette 函数，该函数根据我传递的数字返回不同的调色板。

我的问题：有没有办法推断颜色美学将具有的级别数，因此当我需要绘制 21 种颜色时 my_ggplot 不会崩溃？我想这就是 ggplot 的做法，但我似乎无法在他们的源代码中找到相关函数。

**@user946850 回答** 这是我最终做的：

```
my_ggplot <- function(...){
    ggplot(...) +
    theme_bw() +
    discrete_scale("colour", "my_scale", dyn_palette()) +
    theme(axis.text.x=element_text(size=15),
          axis.text.y=element_text(size=15),
          axis.title.y=element_text(vjust=-.5, size=15, face="bold"),
          axis.title.x=element_text(vjust=-.5, size=15, face="bold"),
          plot.title=element_text(vjust=1, size=18, face="bold"),
          legend.title=element_text(size=15, face="bold"),
          plot.margin=unit(c(2,1,2,2), "lines")) # T R B L
}

dyn_palette <- function(){
  function(n){
    get_palette(n)
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T19:24:33.890

恐怕`scale_colour_manual`不是去这里的路。让我们来看看幕后：它是如何工作的，比如说，布鲁尔秤？

如果您查看 的定义`scale_colour_brewer`，您会发现它只是调用

```
discrete_scale("colour", "brewer", brewer_pal(type, palette), ...) 
```

现在让我们看一下`brewer_pal`（在`scales`包中）：

```
> brewer_pal
function (type = "seq", palette = 1) 
{
    pal <- pal_name(palette, type)
    function(n) {
        brewer.pal(n, pal)[seq_len(n)]
    }
} 
```

很有趣，对吧？一个返回带有一个参数的（绑定）函数的函数`n`——这是在创建绘图时将传递的级别数。反过来，`brewer.pal`(in `RColorBrewer`) 只返回一个颜色列表：

```
> brewer.pal(3, 'YlOrRd')
[1] "#FFEDA0" "#FEB24C" "#F03B20" 
```

通过遵循此模式，您应该能够使用自定义调色板实现相同的效果。

# jquery - jQuery在两个jquery文件之间共享json数据

> ID：13995305
> 
> 赞同：2
> 
> 时间：2012-12-21T18:26:51.570
> 
> 标签：jquery, tapestry

我正在使用 Tapestry5、jQuery 和 JSON。我想知道您将如何在两个 jQuery 文件之间共享 json 数据。我的 json 数据被我的框架传递到文件 A init 中。我不确定如何让文件 B 与文件 A 一起使用。我需要对文件 A 中的 json 数据进行更改才能在文件 B 中使用，反之亦然。我的目标是拆分所有使用相同 JSON obj 的 javascript 函数。我对此很陌生，所以也许我走错了路。

文件 A

```
(function ($) {   
    T5.extendInitializers(function(){
        function init(jsonData) {
            //do something with jsonData
        }
    }
} 
```

文件 B

```
(function ($) {   
    function init(jsonData) {
        //do something with jsonData
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:31:42.623

这可能是最简单的方法

```
<script>window.jsonData = {foo: "bar"};</script>
<script src="a.js"></script>
<script src="b.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:29:17.560

共享它们的简单方法是将 jsonData 设为全局。一个稍微好一点的版本是用一个单例包装 jsonData。

另一种方法是将 jsonData 传递给两个 init 函数。Javascript 是通过引用传递的，因此如果在调用两个 init 函数时将 jsonData 传递给两者，则一个函数所做的更改将被另一个函数看到。

需要更多的上下文来推荐实际上是最好的方法。

# c# - 区分大小写的字典键

> ID：13995308
> 
> 赞同：10
> 
> 时间：2012-12-21T18:27:12.567
> 
> 标签：c#, dictionary, key, case-sensitive

我在网上找到了大量关于使字典能够进行不区分大小写的查找的信息，例如，如果我添加了 ("A", "value") 调用的键/值对

```
MyDict["a"] == MyDict["A"] 
```

将返回真。

我想知道的是为什么我这样做时会收到“已添加密钥”错误

```
MyDict.Add("A", "value1");
MyDict.Add("a", "value2"); 
```

如果我定义我的字典来进行区分大小写的查找。有没有办法定义一个字典来添加不同的大小写键？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T18:29:41.083

字典默认区分大小写——你不需要做任何事情。

```
Dictionary<string, string> myDict = new Dictionary<string, string>();
myDict.Add("A", "value1");
myDict.Add("a", "value2"); 
```

在此处在线查看您的代码：[ideone](http://ideone.com/rMkKk1)。

如果您的代码出现错误，那是因为其中一个键已经存在于您的字典中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-21T18:32:18.917

所有[`Dictionaries`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)都是区分大小写的。但是您可以使用该类提供的不区分大小写的字符串比较器[`StringComparer`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.aspx)来创建具有不区分大小写的字符串键的字典。

从[ideone](http://ideone.com/tWYksY)检查它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-06T17:29:45.707

如果他使用 StringDictionary 类，则 OP 实际上是正确的。微软的网站指出，密钥在存储之前会转换为小写（[https://msdn.microsoft.com/en-us/library/system.collections.specialized.stringdictionary(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.collections.specialized.stringdictionary(v=vs.110).aspx)）。为了使关键的大小写敏感，使用 Mark Byers 建议的通用字典效果很好。如果你想要一个不区分大小写的键，StringDictionary 效果很好。

# browser - 正确使用浏览器和文档模式设置

> ID：13995311
> 
> 赞同：0
> 
> 时间：2012-12-21T18:27:15.517
> 
> 标签：browser, internet-explorer-9, document, mode

我有一个带有即 html5 的 wordpress 网站。

它在 IE9,7 FF、Ch、Op 和 Saf 中很好。但是，IE8 可能会在一页上出现问题[http://www.haywardsdrycleaners.com/services/](http://www.haywardsdrycleaners.com/services/)

我说可能是因为我对如何使用 IE 9 测试它感到困惑。如果我将“浏览器模式”设置为 IE8，那么当页面刷新时，文档模式将保持在“IE 9 标准（页面默认）”。像这样，一切都完美地显示出来。但是，如果我在 IE8 上保留浏览器模式并单击 IE8 的文档模式，则布局会出错。

我的问题是，如果我安装了“Real”IE8，那么页面是否正常！我确实意识到这种模式只是[IE9 中的浏览器模式和文档模式的近似值](https://stackoverflow.com/questions/13116056/browser-mode-and-document-mode-in-ie9)

谢谢

乙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:16:22.493

我刚刚在 Windows 7 上的真正 Internet Explorer 8 中访问了该页面，并且布局确实一团糟。您可以使用官方虚拟机免费自己测试：

[Internet Explorer 应用程序兼容性 VPC 映像](http://www.microsoft.com/en-us/download/details.aspx?id=11575)

虚拟机甚至可以在 VirtualBox 中运行。

# c# - 尝试编辑文件时访问被拒绝 ProgramFiles

> ID：13995313
> 
> 赞同：0
> 
> 时间：2012-12-21T18:27:23.567
> 
> 标签：c#, file, uac

我正在尝试在程序文件中编辑配置文件。这些配置文件由 Windows 服务使用。这是详细信息：

*   我无法更改要编辑的文件的位置
*   UAC 关闭
*   以防万一， app.manifest 已被编辑，因此它以管理员身份运行

这是代码：

```
public void UpdateDNSNameInConfigFile(string v, ConfigFileOption cf)
    {
        string ConfigFilePath = Environment.GetFolderPath(System.Environment.SpecialFolder.ProgramFiles) + @"\<redacted>\<redacted>";
        string ConfigFileContents = string.Empty;
        string DNSName = v.Replace("/ucf:", ""); //Remove the command line arg from the value

        switch (cf)
        {
            case ConfigFileOption.CobanSystem:
                ConfigFilePath = ConfigFilePath + @"\<redacted>.<redacted>System";
                break;
            case ConfigFileOption.Agent_AVL:
                ConfigFilePath = ConfigFilePath + @"\<redacted>.Agent.AVL";
                break;
            case ConfigFileOption.Agent_DB:
                ConfigFilePath = ConfigFilePath + @"\<redacted>.Agent.DB";
                break;
            case ConfigFileOption.Agent_DVD:
                ConfigFilePath = ConfigFilePath + @"\<redacted>.Agent.DVD";
                break;
            case ConfigFileOption.Agent_FileAgent:
                ConfigFilePath = ConfigFilePath + @"\<redacted>.Agent.FileAgent";
                break;
            case ConfigFileOption.Agent_Log:
                ConfigFilePath = ConfigFilePath + @"\<redacted>.Agent.Log";
                break;
            case ConfigFileOption.Agent_Streaming:
                ConfigFilePath = ConfigFilePath + @"\<redacted>.Agent.Streaming";
                break;
            case ConfigFileOption.Agent_Listener:
                throw new NotImplementedException();
            case ConfigFileOption.Agent_InCar:
                throw new NotImplementedException();
            case ConfigFileOption.Agent_Tape:
                throw new NotImplementedException();
        }

        ConfigFileContents = File.ReadAllText(ConfigFilePath);
        ConfigFileContents = ConfigFileContents.Replace("<redacted>", v);
        File.WriteAllText(ConfigFilePath, ConfigFileContents);
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:29:21.173

尝试更改文件系统权限以获取（写入）该文件的访问权限。如果您的系统受到保护以防止外部或未经授权的访问，您还可以允许用户*每个人都*可以更改文件（写权限）。

# jquery - Azure WCF https 404 错误

> ID：13995318
> 
> 赞同：3
> 
> 时间：2012-12-21T18:27:50.973
> 
> 标签：jquery, wcf, azure, https

**编辑** 如果我尝试在没有 https 的情况下访问 /dowork 的 Web 服务端点，我仍然会收到错误，但它会识别有效的端点。如何启用 HTTPS？

我有一个 WCF 服务，最终将主要接收 AJAX 调用以根据用户行为管理状态。

目前我无法找回任何东西，你能看出我哪里出错了吗？（site/core.svc/dowork 在浏览器和 ajax 中都失败）

```
[ServiceContract]
public interface Icore
{
    [OperationContract]
    [WebInvoke(UriTemplate = "/dowork",
        BodyStyle = WebMessageBodyStyle.Wrapped,
        ResponseFormat = WebMessageFormat.Xml)]
    string DoWork();
}

[System.Web.Script.Services.ScriptService]
public class core : Icore
{
    public string DoWork()
    {
        return "hullo";
    }
}

  <system.web>
    <compilation debug="true" targetFramework="4.5"/>
    <customErrors mode="Off"/>
    <pages controlRenderingCompatibilityVersion="4.0"/>
    <webServices>
      <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
      </protocols>
    </webServices>
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <bindings>
      <webHttpBinding></webHttpBinding>
    </bindings>
    <services>
      <service name="Fusion.core" behaviorConfiguration="Fusion.CoreBehavior" >
        <endpoint contract="Fusion.Icore" binding="webHttpBinding" behaviorConfiguration="webBehavior" address="" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Fusion.CoreBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="webBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:06:49.933

您是说“site/core.svc/dowork 在...浏览器中失败”，这意味着您正在使用 HTTP GET 访问该服务。但是，您的合约使用启用 HTTP POST 的 [WebInvoke]。尝试将 [WebInvoke] 更改为 [WebGet] 并查看它是否会更改浏览器中的任何内容。

# c# - 在我的应用程序上显示进度条

> ID：13995324
> 
> 赞同：1
> 
> 时间：2012-12-21T18:28:07.227
> 
> 标签：c#, vb.net

我对 Windows 编程非常陌生，我有一个 Windows 应用程序，单击按钮时，它会调用 Web 服务并从 Web 服务获取数据，然后将值插入数据库。我需要显示所有这一切的进度条。下面是我的代码

```
private void btnService_Click(object sender, EventArgs e)
{
    //call to the web service
        //get the data
        //insert the returned data from web service to the database.   
} 
```

我将进度条控件放在我的页面上，但在我看来，我必须为进度条分配一些数字，以便它显示状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:33:58.840

如果您使用的是块进度条，则可以像这样更新其状态

```
int totalSteps = 10;
for (int i= 1; i<= totalSteps; i++)
{
    //  One chunk of your code

    int progress = i * 100 / totalSteps;
    blocksProgressBar.Value = progress;
}
blocksProgressBar.Value = 0; 
```

如果您使用后台工作者，栏可能会像这样更新

```
private void btnService_Click(object sender, EventArgs e)
{
    backgroundWorker.RunWorkerAsync();
}

private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    int totalSteps = 10;

    for (int i = 1; i <= totalSteps; i++)
    {
        //  One chunk of your code

        int progress = i * 100 / totalSteps;
        backgroundWorker.ReportProgress(progress);
    }
}

private void backgroundWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    blocksProgressBar.Value = e.ProgressPercentage;
}

private void backgroundWorker_Completed(object sender, RunWorkerCompletedEventArgs e)
{
    blocksProgressBar.Value = 0;
} 
```

[来源](http://mycodelog.com/2010/02/11/busy/)

# sql - Oracle 触发器简单 SQL

> ID：13995325
> 
> 赞同：0
> 
> 时间：2012-12-21T18:28:10.070
> 
> 标签：sql, oracle, triggers

我正在尝试编写此触发器，但它无法正常工作。我有一张 GIVING 表（捐赠者、接收者、礼物名称）和一张 PERSONS 表（pname、年龄、头发颜色）。对于触发器，我希望它在捐赠者和接收者的头发颜色相同时吐出一条消息。微不足道，我知道，但我刚刚开始学习触发器并且完全坚持为什么这不起作用。谢谢。

```
create or replace TRIGGER SameHairColor
BEFORE INSERT OR UPDATE OF GIFTNAME ON GIVING
DECLARE
  haircolordonor varchar(255);
  haircolorreceiver varchar(255);
BEGIN
select persons.haircolor into haircolordonor
from persons, giving
where (donor = persons.pname);
select persons.haircolor into haircolorreceiver
from persons, giving
where (receiver = persons.pname);

if (haircolordonor = haircolorreceiver) then

dbms_output.put_line('Wow, they have the same haircolor!  Who would have thought?');
end if;

end; 
```

我收到的错误消息是执行期间错误“精确提取返回的行数超过请求的行数”，指向 DECLARE ... 下面的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:43:00.517

```
CREATE OR REPLACE TRIGGER SameHairColor
BEFORE INSERT OR UPDATE OF GIFTNAME ON GIVING
REFERENCING NEW ROW AS new
FOR EACH ROW
DECLARE
  haircolordonor varchar(255);
  haircolorreceiver varchar(255);
BEGIN
select persons.haircolor into haircolordonor
from persons, giving
where (:new.donor = persons.pname);
select persons.haircolor into haircolorreceiver
from persons, giving
where (:new.receiver = persons.pname);

if (haircolordonor = haircolorreceiver) then
    dbms_output.put_line('Wow, they have the same haircolor!  Who would have thought?');
end if;

end; 
```

也许这可能会有所帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:40:03.110

您没有将查询限制为插入/更新行的捐赠者/接收者。它们应该如下所示：

```
select persons.haircolor
into haircolordonor
from persons
where persons.pname = :NEW.donor; 
```

顺便说一句：您的触发器仅在 上触发`INSERT OR UPDATE OF GIFTNAME`，而它应该在上触发`INSERT OR UPDATE OF donor, receiver`并且您需要使用`FOR EACH ROW`.

您的触发器应如下所示：

```
CREATE OR REPLACE TRIGGER SameHairColor
BEFORE INSERT OR UPDATE OF donor, receiver ON GIVING
  FOR EACH ROW
DECLARE
  haircolordonor varchar(255);
  haircolorreceiver varchar(255);
BEGIN
  select persons.haircolor into haircolordonor
  from persons
  where (persons.pname = :NEW.donor);
  select persons.haircolor into haircolorreceiver
  from persons
  where (persons.pname = :NEW.receiver);

  IF (haircolordonor = haircolorreceiver) THEN
    dbms_output.put_line('Wow, they have the same haircolor!  Who would have thought?');
  END IF;
END; 
```

# c# - 关于使用 NoSQL DB 作为 FileStorage 的建议，以及优缺点

> ID：13995326
> 
> 赞同：3
> 
> 时间：2012-12-21T18:28:15.357
> 
> 标签：c#, mongodb, gridfs

我们正在评估替代静态文件存储（托管在多个地理位置）的选项。

*   我们在 Microsoft.NET 平台上（C#、ASP.NET、WEB API、SQL SERVER）
*   我们希望在任何 NoSQL DB 上存储数字资产，主要是 BINARY（AI、PSD、JPG、PNG、PDF、XLS、DOC...）文件。
*   对于图像文件，它可以包含缩略图（小尺寸）到原始艺术品（大文件：范围从 300 MB 到超过 1 GB）。
*   缩略图将出现在网页上，但原件将作为附件提供，并带有编辑选项（用户可以下载原件并使用相应的程序进行编辑并更新版本）。
*   每个缩略图和原件都需要存储多个版本。
*   我们不会在第三方平台（如 Amazon S3、Azure）和 CDN 上托管这些数字资产。
*   该数字资产可以根据用户系统配置托管在不同的地理环境中。（美国用户可以存储基于美国、欧洲或亚洲的服务器/数据库）。
*   每个存储都需要复制。

我们正在为此研究 MongoDB。有没有人可以根据上述假设或任何其他替代方案提出利弊？

一些 MongoDB 研究显示...

*   磁盘空间消耗是原始数据大小的 3 倍
*   可以通过 -oplogSize 参数减少空间消耗
*   如果我们尝试读取块和流到浏览器的速度可能比从静态文件存储读取它慢 6 倍。
*   复制不是双向的，它作为 Master 和 Slave 工作。

我已经创建了从静态文件系统读取数字资产并将其存储到默认块中的 MongoDB GridFS 的原型。将缩略图和原件存储到 MongoDB 的更好方法是什么？由于缩略图总是小于 16MB，但原图不能超过 16MB，所以默认情况下我应该将所有图像资产存储在 GridFS 上吗？

我可以设想根据内容类型创建不同的数据库，例如：一个用于 PDF、Excel、Word，另一个用于 Image。

*   我们如何在不同的服务器之间进行复制？
*   我们如何将它存储在不同区域的不同 MongoDB 实例中？

我真的很感激任何意见。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:38:20.887

> 一些 MongoDB 研究显示...
> 
> 磁盘空间消耗是原始数据大小的 3 倍 可以通过 -oplogSize 参数减少空间消耗 如果我们尝试读取块和流到浏览器的速度可能比从静态文件存储读取它慢 6 倍。复制不是双向的，它作为 Master 和 Slave 工作。

您是否尝试存储数据或只是在某处找到了一些信息？如果您使用数据库（无论哪种方式），总是比普通文件存储开销更大。为什么？好吧，你有索引和元信息。

mongodb 是一个无共享的强一致性数据库。因此，您将数据写入一个节点，然后将其复制。但是您可以使用 WriteConcerns ( [http://docs.mongodb.org/manual/core/write-operations/#write-concern](http://docs.mongodb.org/manual/core/write-operations/#write-concern) ) 等待，因此请确保您的数据已写入多个节点、大多数节点等一个副本集。通过复制，您可以在不停机的情况下进行滚动升级，并且使用分片也很容易扩展。并使用分片标签将文档“固定”到特定分片。见这里：[http ://www.kchodorow.com/blog/2012/07/25/controlling-collection-distribution/](http://www.kchodorow.com/blog/2012/07/25/controlling-collection-distribution/)

# android - Android 将自定义属性添加到 View.animate().*

> ID：13995330
> 
> 赞同：1
> 
> 时间：2012-12-21T18:28:37.360
> 
> 标签：android, view, sdk

是否可以在 Android 4.x 中向 View.animate().* 添加自定义属性？

Android 4.x 提供了 View.animate() ，它允许对多个属性进行动画处理。喜欢：

```
View.animate().alpha(0.5f).setDuration.start(); 
```

我想向这个对象添加一个自定义属性，例如：

```
CustomView.animate().xyz(0.1f).setDuration.start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:42:36.167

您可以使用自定义动画来做到这一点：

```
public class CustomAnim extends Animation {

    private CustomView mLayout;
    private float finalVal;
    private float startVal;

    public CustomAnim(CustomView layout, float finalVal) {
        this.mLayout = layout;
        this.finalVal = finalVal;
        this.startVal = layout.xyz();
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        mLayout.setXYZ(interpolatedTime * (finalVal - startVal) + startVal);
    }

    @Override
    public boolean willChangeBounds() {
        return true;
    }   
} 
```

或者，如果您的属性具有 getter 和 setter 方法，例如 setXYZ getXYZ 您可以使用[属性动画](http://developer.android.com/guide/topics/graphics/prop-animation.html)

# jquery-selectors - 使用 jQuery 独立切换复选框的嵌套列表

> ID：13995331
> 
> 赞同：1
> 
> 时间：2012-12-21T18:28:39.650
> 
> 标签：jquery-selectors, toggle, checkbox, children, nested-lists

```
<ul>
   <li><input type="checkbox" name="item-1" />Item 1
    <ul class="sublist">
       <li><input type="checkbox" name="item-1-sublist" />Item 1-1</li>
       <li><input type="checkbox" name="item-1-sublist" />Item 1-2</li>
       <li><input type="checkbox" name="item-1-sublist" />Item 1-3</li>
     </ul>
   </li>
   <li>
     <input type="checkbox" name="item-2" />Item 2
     <ul class="sublist">
        <li><input type="checkbox" name="item-2-sublist" />Item 2-1</li>
        <li><input type="checkbox" name="item-2-sublist" />Item 2-2</li>
        <li><input type="checkbox" name="item-2-sublist" />Item 2-3</li>
      </ul>
    </li>
</ul> 
```

考虑到上面的代码，如果用户单击主级别复选框之一（即第 1 项或第 2 项），我将如何使用`sublist`类值切换相邻列表中的所有复选框？我不想使用任何其他类或 id 值，因为我将有几种类型的子列表需要独立切换；我不想为每组类/id 值复制代码块。

我有邻居的所有孩子，但我不得不放弃那个代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:30:51.937

您可以使用[$.parent()](http://api.jquery.com/parent/)函数，如下所示（[demo](http://jsfiddle.net/eDJnP/7/)）：

```
$('input[name="item-1"], input[name="item-2"]').change(function() {
  var checkbox = $(this), checked = checkbox.is(':checked');
  $('ul.sublist input[type="checkbox"]', checkbox.parent()).attr('checked', checked);
}) 
```

如果您的子复选框的名称与父母的名称不同，则此代码可能会更简洁一些，如下所示：

```
<ul>
   <li><input type="checkbox" name="item-1" />Item 1
    <ul class="sublist">
       <li><input type="checkbox" name="sublist-item-1-1" />Item 1-1</li>
       <li><input type="checkbox" name="sublist-item-1-2" />Item 1-2</li>
       <li><input type="checkbox" name="sublist-item-1-3" />Item 1-3</li>
     </ul>
   </li>
   <li>
     <input type="checkbox" name="item-2" />Item 2
     <ul class="sublist">
        <li><input type="checkbox" name="sublist-item-2-1" />Item 2-1</li>
        <li><input type="checkbox" name="sublist-item-2-2" />Item 2-2</li>
        <li><input type="checkbox" name="sublist-item-2-3" />Item 2-3</li>
      </ul>
    </li>
</ul> 
```

和：

```
$('input[name^="item-"]').change(function() {
  var checkbox = $(this), checked = checkbox.is(':checked');
  $('ul.sublist input[type="checkbox"]', checkbox.parent()).attr('checked', checked);
}) 
```

这使用了伪选择器`^=`，这意味着以开头。您可以在原始 HTML 中使用它，因为您的子选择器都以名称字符串开头。

**- - - 编辑 - - -**

为了获得更好的结果，请使用**prop**而不是**attr**，有时**attr** [仅在您第一次](https://stackoverflow.com/a/17060460/5656276)更改值时才起作用。所以它会是：

```
$('input[name^="item-"]').change(function() {
  var checkbox = $(this), checked = checkbox.is(':checked');
  $('ul.sublist input[type="checkbox"]', checkbox.parent()).prop('checked', checked);
}) 
```

# magento - Magento VS TYPO3 多商店

> ID：13995333
> 
> 赞同：1
> 
> 时间：2012-12-21T18:28:46.017
> 
> 标签：magento, e-commerce, typo3

我实际上正在寻找一个很棒的电子商务平台..

我需要开始一个项目，我的雇主向我推荐了 Magento，但我可以提出其他建议。

我真的不了解 Magento，而且我对 TYPO3 很熟练，所以我想知道我是使用 TYPO3 MultiShop 还是 Magento 更好？

注意：该网站将非常大，因此我们需要一个无限可扩展的平台。

你为我的目的推荐我什么？Magento 或 TYPO3 MultiShop ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:42:39.123

Magento 是更好的商店系统，Typo3 是更好的 CMS 系统。由于商店可能是您的重点，因为您想卖东西，所以我会投票给 Magento。

但是，另一种选择是通过将 Magento 与 Typo3 结合使用来结合两全其美，例如：[http ://www.typogento.com/](http://www.typogento.com/)

# html - 使用 CSS 选择器选择标签

> ID：13995334
> 
> 赞同：3
> 
> 时间：2012-12-21T18:28:52.660
> 
> 标签：html, css, css-selectors

我使用单选按钮仅从 CSS 创建选项卡。我遇到的问题是我不知道如何选择`<label>`引用单选按钮的。我将标签与内容分开，以便我可以将它们布置为选项卡：

```
<div class="tab-labels">
   <label for="tab-1">Tab 1</label>
   <label for="tab-2">Tab 2</label>
   <label for="tab-3">Tab 3</label>
</div> 
```

内容窗格如下所示。输入按钮保留在内容 div 中，以便在单击标签时可以选择它。但是，我不能反过来：

```
<div class="content-container">
    <div class="tab details">
        <input id="tab-1" type="radio" name="radio-set" class="tab-selector" checked="checked"/>
        <div class="content">
            <p>Some content 1</p>                   
        </div>
    </div>
    <div class="tab details">
        <input id="tab-2" type="radio" name="radio-set" class="tab-selector"/>
        <div class="content">
            <p>Some content 2</p>                   
        </div>
    </div>
    <div class="tab details">
        <input id="tab-3" type="radio" name="radio-set" class="tab-selector"/>
        <div class="content">
            <p>Some content 3</p>                    
        </div>
    </div>
</div> 
```

我想要完成的事情以及我对这个问题的问题是：如何在给定此布局的情况下单击单选输入时更改标签背景颜色？

如果您想现场演奏，我提供了一个小提琴：http: [//jsfiddle.net/mjohnsonco/6KeTR/](http://jsfiddle.net/mjohnsonco/6KeTR/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:03:18.727

您只能通过 CSS 来实现这一点，但只能使用重组的 HTML 和更丑陋的 CSS。

看这个例子：http: [//jsfiddle.net/kizu/6KeTR/16/](http://jsfiddle.net/kizu/6KeTR/16/)

在这里，您应该将所有输入从它们的容器中移到它们将直接位于您希望它们影响的块之前的位置。`~`在这种情况下，您可以放置​​它，这样您就可以使用组合器和一些像这样的第 n 个子选择器来定位选项卡的父级及其内容：

```
#tab-1:checked ~ .content-container > .tab:first-child  > .content,
#tab-2:checked ~ .content-container > .tab:nth-child(2) > .content,
#tab-3:checked ~ .content-container > .tab:nth-child(3) > .content {} 
```

然而，这种纯 CSS 的东西更像是概念验证——它们不像 JS 对应物那样可维护和可用。所以我建议仅将它们用于娱乐:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:46:25.633

CSS

```
.bgcolor1{

background-color:#blue;

}
.bgcolor2{

background-color:green;

}
.bgcolor3{

background-color:red;

} 
```

查询

```
$('input[name=radio-set1]:checked', '#main').addClass(bgcolor1)

$('input[name=radio-set2]:checked', '#main').addClass(bgcolor2)

$('input[name=radio-set5]:checked', '#main').addClass(bgcolor3) 
```

HTML

```
 <input id="tab-1" type="radio" name="radio-set1" class="tab-selector" checked="checked"/>
 <input id="tab-2" type="radio" name="radio-set2" class="tab-selector" checked="checked"/>
 <input id="tab-3" type="radio" name="radio-set3" class="tab-selector" checked="checked"/>

<label class="bgcolor1" for="tab-1">Tab 1</label>
<label class="bgcolor2" for="tab-2">Tab 2</label>
<label class="bgcolor3" for="tab-3">Tab 3</label> 
```

# macros - 你能强制 Clojure 宏评估它的参数吗？

> ID：13995335
> 
> 赞同：4
> 
> 时间：2012-12-21T18:28:53.563
> 
> 标签：macros, clojure

我正在尝试定义一个包装`clojure.test/deftest`. 这是我的一般想法：

```
(defn test-wrapper
  [name & body]
  (deftest (symbol (clojure.string/replace name #"\W" "-")) body))) 
```

但是，由于第一个参数`deftest`未计算，它会引发异常，因为它是一种形式而不是符号。有什么办法可以强制表格先评估？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:48:01.103

没有办法让宏（不是你写的）评估它的参数。

让你`test-wrapper`做你想做的事的最好方法是将它变成一个宏本身。然后它可以评估对`symbol`自身的调用，然后以调用`deftest`结果`symbol`作为第一个参数扩展为调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T18:59:23.477

这里更好的方法是让 test-wrapper 成为一个宏。除非您告诉他们，否则宏不会评估他们的论点。您可以操作参数并将它们替换为一些生成的代码，如下所示：

```
(use 'clojure.test)

(defmacro test-wrapper
  [name & body]
  (let [test-name (symbol (clojure.string/replace name #"\W" "-"))]
    `(deftest ~test-name ~@body)))

(test-wrapper "foo bar" (is (= 1 1)))

(run-tests) 
```

# c# - 清除 BindingList 并添加新项目很慢？

> ID：13995336
> 
> 赞同：3
> 
> 时间：2012-12-21T18:28:58.743
> 
> 标签：c#, datagridview, bindinglist

我有一个 C# WinForms 应用程序，其中包含一个 BindingList，其中填充了这样的小部件对象：

```
BindingList<Widget> widgetsList = new BindingList<Widget>(); 
```

一个小部件具有三个属性（一个 int、一个 string 和一个 bool）并实现了 INotifyPropertyChanged。小部件被添加到 BindingList 中，如下所示：

```
for (int i = 0; i < 100000; i++) // takes < 1/10 of a second to execute
{
   widgetsList.Add(new Widget(intValue, stringValue, boolValue));
} 
```

最后，我将 BindingList 设置为 DataGridView（实际上是三个 DataGridView 控件）的数据源：

```
dataGridView1.DataSource = widgetsList; 
```

这段代码运行良好。但是，如果我的用户在 DataGridView 中进行了更改，然后想要放弃这些更改并重新加载原始数据，我就会遇到问题。现在我有一个按钮来执行此操作，按钮的 Click 事件处理程序中的代码如下所示：

```
dataGridView1.Rows.Clear() // very fast

widgetsList.Clear() // also very fast

    for (int i = 0; i < 100000; i++) // takes 18.6 seconds to execute
    {
       widgetsList.Add(new Widget(intValue, stringValue, boolValue));
    } 
```

如您所见，此循环的执行速度比上面的相同循环慢得多（18.6 秒 vs < .1 秒）。它似乎确实有效，但我试图弄清楚瓶颈在哪里以及如何消除它。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T19:11:11.243

从上面的评论中发布答案：您需要在网格和绑定列表之间添加一个 BindingSource。这将允许您在重新加载源列表时暂停绑定，并允许网格推迟渲染，直到数据源完全更新。

# c++ - “extern C”函数从 C++ 共享对象符号表中消失

> ID：13995338
> 
> 赞同：2
> 
> 时间：2012-12-21T18:29:13.927
> 
> 标签：c++, linux, linker, g++, osx-lion

我有一个正在为一个项目创建的共享对象库，我遇到了一个奇怪的问题，即在最终库符号表中找不到我声明为“extern C”的函数。我将目标文件与函数链接到库中，但由于某种原因，它们不在符号表中。这发生在 Linux 和 OS X 上。我使用 g++ 进行链接和编译。

编辑：链接时我没有收到任何链接器错误。图书馆链接很好。我可以说这些函数不在库中，因为我检查了符号表并且它们不存在。我用于链接的命令如下：

```
g++ -m64 -Wl,-O1 -Wl,-rpath,/usr/local/Trolltech/Qt-4.8.2/lib -shared -Wl,-soname,libQtCommercialChart.so.1 -o libQtCommercialChart.so.1.0.0 ../build/release/lib/chartdataset.o ../build/release/lib/chartpresenter.o ../build/release/lib/charttheme.o ../build/release/lib/domain.o ../build/release/lib/qchart.o ../build/release/lib/qchartview.o ../build/release/lib/qabstractseries.o ../build/release/lib/chartbackground.o ../build/release/lib/chartelement.o ../build/release/lib/scroller.o ../build/release/lib/chartlayout.o ../build/release/lib/versiontracker.o ../build/release/lib/axisanimation.o ../build/release/lib/xyanimation.o ../build/release/lib/pieanimation.o ../build/release/lib/piesliceanimation.o ../build/release/lib/splineanimation.o ../build/release/lib/baranimation.o ../build/release/lib/stackedbaranimation.o ../build/release/lib/percentbaranimation.o ../build/release/lib/abstractbaranimation.o ../build/release/lib/horizontalbaranimation.o ../build/release/lib/horizontalstackedbaranimation.o ../build/release/lib/horizontalpercentbaranimation.o ../build/release/lib/areachartitem.o ../build/release/lib/qareaseries.o ../build/release/lib/chartaxis.o ../build/release/lib/qabstractaxis.o ../build/release/lib/chartvalueaxisx.o ../build/release/lib/chartvalueaxisy.o ../build/release/lib/qvalueaxis.o ../build/release/lib/chartbarcategoryaxisx.o ../build/release/lib/chartbarcategoryaxisy.o ../build/release/lib/qbarcategoryaxis.o ../build/release/lib/chartcategoryaxisx.o ../build/release/lib/chartcategoryaxisy.o ../build/release/lib/qcategoryaxis.o ../build/release/lib/chartdatetimeaxisx.o ../build/release/lib/chartdatetimeaxisy.o ../build/release/lib/qdatetimeaxis.o ../build/release/lib/bar.o ../build/release/lib/abstractbarchartitem.o ../build/release/lib/qabstractbarseries.o ../build/release/lib/qbarset.o ../build/release/lib/qbarmodelmapper.o ../build/release/lib/qvbarmodelmapper.o ../build/release/lib/qhbarmodelmapper.o ../build/release/lib/qbarseries.o ../build/release/lib/barchartitem.o ../build/release/lib/qstackedbarseries.o ../build/release/lib/stackedbarchartitem.o ../build/release/lib/qpercentbarseries.o ../build/release/lib/percentbarchartitem.o ../build/release/lib/qhorizontalbarseries.o ../build/release/lib/horizontalbarchartitem.o ../build/release/lib/qhorizontalstackedbarseries.o ../build/release/lib/horizontalstackedbarchartitem.o ../build/release/lib/qhorizontalpercentbarseries.o ../build/release/lib/horizontalpercentbarchartitem.o ../build/release/lib/qlegend.o ../build/release/lib/legendmarker.o ../build/release/lib/legendlayout.o ../build/release/lib/linechartitem.o ../build/release/lib/qlineseries.o ../build/release/lib/qpieseries.o ../build/release/lib/piesliceitem.o ../build/release/lib/piechartitem.o ../build/release/lib/qpieslice.o ../build/release/lib/qpiemodelmapper.o ../build/release/lib/qvpiemodelmapper.o ../build/release/lib/qhpiemodelmapper.o ../build/release/lib/qscatterseries.o ../build/release/lib/scatterchartitem.o ../build/release/lib/qsplineseries.o ../build/release/lib/splinechartitem.o ../build/release/lib/xychart.o ../build/release/lib/qxyseries.o ../build/release/lib/qxymodelmapper.o ../build/release/lib/qvxymodelmapper.o ../build/release/lib/qhxymodelmapper.o   -L/usr/local/Trolltech/Qt-4.8.2/lib -L/tmp/qcharts/lib/release -Wl,-rpath,/tmp/qcharts/lib/release /home/thinkbox/Desktop/libs/lib/lm_new_pic.o -L/home/thinkbox/Desktop/libs/lib -llmgr_pic -lcrvs_pic -lsb_pic -lact_pic -llmgr_dongle_stub_pic -ldl -lFNPload_pic -lQtGui -L/usr/local/Trolltech/Qt-4.8.2/lib -L/usr/X11R6/lib64 -lQtCore -lpthread 
```

未公开的代码位于文件 versiontracker.o 中。我不能直接显示代码，但它只是在与此类似的庄园中声明的函数：

```
extern "C"
{
VersionUtils::VersionTracker* AllocateVersion()
{
    return new VersionUtils::VersionTracker();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:31:37.727

您的链接器优化选项可能`-Wl,-O1`会丢弃未使用的代码。即，如果您的代码库本身不调用外部 C 函数，则链接器可能会在优化时将它们作为未使用的代码忽略。
试试看`-Wl,-O0`问题是否消失。如果是这样，链接器选项就是罪魁祸首。

# ruby-on-rails - 机架测试失败：JSON 请求还没有响应

> ID：13995342
> 
> 赞同：3
> 
> 时间：2012-12-21T18:29:21.363
> 
> 标签：ruby-on-rails, ruby, rspec, rack-test

我正在尝试按照Yehuda Katz 的书[Rails 3 in Action第 13 章中提供的](http://www.manning.com/katz/)[Ticketee](https://github.com/rails3book/ticketee)示例为我的 Ruby 项目创建 JSON API 。这是第 353 页上描述的适用于我的环境的 RSpec 测试。

```
# /spec/api/v1/farms_spec.rb # Reduced to the minimum code.
require "spec_helper"
include ApiHelper # not sure if I need this

describe "/api/v1/farms", type: :api do
    context "farms viewable by this user" do
        let(:url) { "/api/v1/farms" }
        it "json" do
            get "#{url}.json"
            assert last_response.ok?
        end
    end
end 
```

当我运行测试时，我得到以下输出......

```
$ rspec spec/api/v1/farms_spec.rb
No DRb server is running. Running in local process instead ...
Run options: include {:focus=>true}

All examples were filtered out; ignoring {:focus=>true}
  1) /api/v1/farms farms viewable by this user json
     Failure/Error: assert last_response.ok?
     Rack::Test::Error:
       No response yet. Request a page first.
     # ./spec/api/v1/farms_spec.rb:30:in `block (3 levels) in <top (required)>'

Finished in 2.29 seconds
1 example, 1 failure 
```

这是我使用的辅助模块...

```
# /support/api/helper.rb
module ApiHelper
    include Rack::Test::Methods

    def app
        Rails.application
    end
end

RSpec.configure do |config|
    config.include ApiHelper, type: :api
end 
```

**注意**：这个问题类似于[使用 Rspec 和 Rack::Test 测试 REST-API 响应](https://stackoverflow.com/questions/7292061/testing-rest-api-responses-with-rspec-and-racktest)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T23:13:43.613

Rspec-rails 似乎忽略了`type: :api`describe 块的参数，并将 /spec/api 中的所有规范视为请求规范[（请参阅此处的请求规范一章）](https://github.com/rspec/rspec-rails)。也许类型参数已被弃用？我还没有找到它的任何文档..

我可以让你的例子在使用`type: :request`而不是`type: :api`. 我还删除了 app-method，因为它已默认包含在 RequestExampleGroup 中。

```
# /support/api/helper.rb
module ApiHelper
    include Rack::Test::Methods
end

RSpec.configure do |config|
    config.include ApiHelper, type: :request
end 
```

和规格：

```
#/spec/api/v1/farms_spec.rb 
require "spec_helper"

describe "/api/v1/farms" do
    context "farms viewable by this user" do
        let(:url) { "/api/v1/farms" }
        it "json" do
            get "#{url}.json"
            assert last_response.ok?
        end
    end
end 
```

# objective-c - 核心数据：继承属性的子实体默认值？

> ID：13995343
> 
> 赞同：1
> 
> 时间：2012-12-21T18:29:21.740
> 
> 标签：objective-c, xcode, core-data, inheritance

是否可以在 Xcode 中使用 Core Data 接口为从父实体继承的属性设置默认值？

示例：艺术品实体具有“中等”属性，默认为“粘土”。子实体绘画是艺术作品的孩子，但我希望“媒介”默认为“油画”或“画布”。

我想避免在代码中（awakeFromInsert 或其他地方）这样做，但如果这就是它所需要的，那对我来说很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:46:49.057

好吧，不幸的是，您只能将父默认设置为`clay`，但无法在模型编辑器中为父属性设置子默认值。因此，您将*不得不*修改您的类实现。如果您考虑一下，这并不是那么不方便。

# python - 为什么默认值没有出现在我的 docopt 命令行参数字典中？

> ID：13995352
> 
> 赞同：5
> 
> 时间：2012-12-21T18:29:44.593
> 
> 标签：python, docopt

我一直在尝试使用 docopt 制作一个简单的 CLI，但由于某种原因，我的默认参数没有出现。下面是我的测试代码。我正在使用`docopt.py`来自 github 存储库的最新版本。

```
"""
Usage:  scrappy <path> ... [options]

-a --auto           Automatically scrape and rename without user interaction.
-l --lang           Specify language code [default: en].
--scan-individual   Evaluate series information individually for each file.
-c --cfg            User alternate config file [default: ../scrappy.conf]
-t --test           Test run.  Do not modify files.
-v --verbose        Print verbose output
"""

from docopt import docopt
arguments = docopt(__doc__, version='0.1.0 alpha')
print arguments  # DEBUG 
```

这是我运行时的输出`$ scrappy/scrappy.py first_path_parameter second/path/parameter`

```
{'--auto': None,
 '--cfg': None,
 '--lang': None,
 '--scan-individual': None,
 '--test': None,
 '--verbose': None,
 '<path>': ['first_path_parameter', 'second/path/parameter']} 
```

有人知道发生了什么吗？

**编辑：**

我更新了我的代码，但我仍然得到类似的输出。更重要的是，当我尝试通过时`--scan-individual`，我得到一个错误，据此它需要一个参数。同样，如果它很重要，我正在运行 docopt，只需将 docopt.py 复制到我的项目的工作目录中。这里发生了什么？

```
#!/usr/bin/env python

"""Scrappy:  Rename media files based on scraped information.

Usage:  scrappy <path> ... [options]

-a --auto               Automatically scrape and rename without user interaction.
-l LANG --lang LANG     Specify language code [default: en].
--scan-individual       Evaluate series information individually for each file.
-c CONF --cfg CONF      User alternate config file [default: ../scrappy.conf]
-t --test               Test run.  Do not modify files.
-v --verbose            Print verbose output
"""

from docopt import docopt
arguments = docopt(__doc__, version='0.1.0 alpha')
print arguments  # DEBUG 
```

输出：

```
$ scrappy/scrappy.py first_path_parameter second/path/parameter --scan-individual
--scan-individual requires argument
Usage:  scrappy <path> ... [options] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:47:17.050

通过查看示例，似乎如果您想传递一个默认值，您可能必须指定一个目标变量，例如

```
naval_fate.py:  --speed=<kn>  Speed in knots [default: 10].
options_example.py-  --exclude=PATTERNS   exclude files or directories which match these comma
options_example.py:                       separated patterns [default: .svn,CVS,.bzr,.hg,.git]
options_example.py-  -f NAME --file=NAME  when parsing directories, only check filenames matching
options_example.py:                       these comma separated patterns [default: *.py] 
```

所以在你的情况下，

```
-l LANG --lang LANG  Specify language code [default: en].
-c CONFIG            User alternate config file [default: ../scrappy.conf] 
```

生产

```
localhost-2:coding $ python doc.py --auto a b c
{'--auto': True,
 '--lang': 'en',
 '--scan-individual': False,
 '--test': False,
 '--verbose': False,
 '-c': '../scrappy.conf',
 '<path>': ['a', 'b', 'c']} 
```

编辑：OP发布的更新代码对我来说效果很好，大约半小时前我下载了github版本：

```
localhost-2:coding $ ./scrappy.py first_path_parameter second/path/parameter --scan-individual
{'--auto': False,
 '--cfg': '../scrappy.conf',
 '--lang': 'en',
 '--scan-individual': True,
 '--test': False,
 '--verbose': False,
 '<path>': ['first_path_parameter', 'second/path/parameter']} 
```

所以我很茫然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-27T19:50:34.477

我只是在我自己的代码中遇到了这个问题并进行了测试（使用 hargriffle 和 DSM 的其他答案），直到我弄清楚以下内容。

请注意，这是从 docopt 0.6.1 开始的

运行此文件时：

```
#! /usr/bin/env python
"""scans.py

Usage:
  scans.py [<args>...]

Options:
  -h --help           Show this screen.
  --version           Show version.
  -L INT --limit=INT  Query response row limit [default: 10]

"""

from docopt import docopt

if __name__ == '__main__':
    print docopt(__doc__) 
```

我收到以下输出

```
{'<args>': []} 
```

但是，如果我在使用行中特别写下该参数是可选的，如下所示：

```
Usage:
  scans.py [-L INT | --limit=INT] [<args>...] 
```

我收到了我所希望的：

```
{'--limit': '10',
 '<args>': []} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-29T10:29:04.910

我刚刚遇到了同样的问题——我只是在阅读了@DSM 和@blz 的最后两条评论后才解决了这个问题。

重申一下，因为它可能对其他人有所帮助，所以要解析默认变量，您必须确保选项的变量末尾和选项的文本描述之间 至少有**两个空格。**

从[文档](https://github.com/docopt/docopt)：

> 使用两个空格分隔选项及其非正式描述：

```
--verbose More text.   # BAD, will be treated as if verbose option had
                   # an argument "More", so use 2 spaces instead
-q        Quit.        # GOOD
-o FILE   Output file. # GOOD
--stdout  Use stdout.  # GOOD, 2 spaces 
```

因此，如果没有两个空格，选项解析器会将描述文本解释为变量并且不处理该`[default: ...]`部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-03T03:39:40.140

我也有同样的问题。

在我的特殊情况下，我注意到 doc-opt 对以制表符开头的行与以空格开头的行很敏感

```
#!/usr/bin/env python
"""Sample Application.

Usage:
    sample [options] me
    sample --version

Options:
  --host HOST     words here  [default: 5]
  --version  Version identifier

""" 
```

对比

```
#!/usr/bin/env python
"""Sample Application.

Usage:
    sample [options] me
    sample --version

Options:
    --host HOST     words here  [default: 5]
    --version  Version identifier

""" 
```

在 Options: 列表中 --host 和 --version 之前有一个选项卡。第二种情况没有正确解析默认值，第一种情况下初始缩进有空格。

# com - IIS 中的 .NET 版本和 BIN 中的 COM 库

> ID：13995353
> 
> 赞同：2
> 
> 时间：2012-12-21T18:29:46.887
> 
> 标签：com, asp-classic, iis-7.5

我有一个带有经典 ASP 网站的客户端，该网站运行`Server.CreateObject()`以访问存储在 bin 目录中的 .NET 库。（这是一个丑陋的黑客，我知道......）他们的设置指南说在 IIS 中将站点设置为 .NET 2.0 站点。但我想知道这个要求是否意味着 dll 也必须用 2.0 目标版本编译才能工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:20:18.520

首先，我不认为这是一个“丑陋的黑客”。在我看来，能够在传统的经典 asp 应用程序中使用 .net 是一件非常好的事情。

接下来的事情是，当这些 .net dll 仅由经典 asp 使用时它们存在于何处是无关紧要的，因为它们必须由 regasm.exe “注册”。

当应用程序池使用 2.0 .net 框架时，必须使用 2.0 或 3.5 目标版本编译 .net dll。

当使用 4.0 目标版本编译时，应用程序池也必须设置为 4.0。

# iphone - 嵌入没有 uiwebview 的 youtube 视频？

> ID：13995355
> 
> 赞同：1
> 
> 时间：2012-12-21T18:29:55.950
> 
> 标签：iphone, uiwebview, youtube

我用谷歌搜索了几天，找不到答案。

是否可以在不需要 uiwebview 的情况下在 xcode 中嵌入 youtube 视频。

这就是为什么。

我的应用程序可能会使用数百个 youtube 剪辑，我后来发现 1\. Uiwebview 是内存密集型的 2\. 不能像缓存问题一样重用或回收。

因此，我查看了媒体播放器框架，发现当点击视频时，youtube 会启动并接管应用程序。这是不可取的。

有谁知道是否有解决此问题的回购协议或为我指明正确的方向。

抱歉缺少代码，但我认为它不会帮助解决这个问题。

最后一点，我最终使用 jquery mobile 和 phone gap 作为快速修复，但我发现用户体验笨拙且缓慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:47:53.500

你能检查一下... [HCYoutubeParser for iOS](http://www.readability.com/articles/pyxttmh3) .. 和.. [LBYouTubeView for iOS](http://www.cocoacontrols.com/platforms/ios/controls/lbyoutubeview)

# javascript - 突出显示当前项目和菜单中的所有先前项目

> ID：13995357
> 
> 赞同：-1
> 
> 时间：2012-12-21T18:30:04.780
> 
> 标签：javascript, html, css

![菜单栏导航](../Images/bab0fd76b49bd0dc0a2298d368239a30.png)

在这里我附上了我的菜单栏。我的网页是完全滚动条页面移位类型（即，一个包含六个页面的单个页面，可以在单击菜单项时滚动）。当我单击我的菜单项时，我的菜单项的突出显示可能就像在所附图像中一样。现在我仍然使用单个菜单项突出显示当前页面，但这里我需要的是当我单击我的第四个菜单时，然后是当前包含所有先前菜单项的菜单项也需要突出显示。我该如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:38:43.003

此标记的假设：

```
<span class="menuitem">Howdy</span>
<span class="menuitem">Howdy</span>
<span class="menuitem">Howdy</span>
<span class="menuitem">Howdy</span>
<span class="menuitem">Howdy</span> 
```

这个CSS：

```
.menuitem{border-bottom: 4px solid #888888;}
.menuActive{border-bottom: 4px solid blue;} 
```

这段代码：

```
$('.menuitem').click(function(){
    $('.menuitem').removeClass('menuActive');
    $(this).prevAll().andSelf().addClass('menuActive');
}); 
```

这个小提琴：http: [//jsfiddle.net/vE6yW/](http://jsfiddle.net/vE6yW/)

编辑：与 jQuery 版本 1.8 和 1.9+ 相关。

在 jQuery 1.8 版中，该`addBack()`方法被创建，而在 1.9 版中`andSelf()`被删除。对于 jQuery 1.8 及更高版本，请使用：

```
$('.menuitem').click(function(){
    $('.menuitem').removeClass('menuActive');
    $(this).prevAll().addBack().addClass('menuActive');
}); 
```

在这段代码中，效果是一样的。 `addBack()`还实现了一个选择器，以在需要时减少添加回选择组的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:48:13.837

我要试一试，假设这接近你想要的：http: [//jsfiddle.net/cxndW/](http://jsfiddle.net/cxndW/)

我正在使用实心边框来实现效果，但是您应该能够使用背景图像或边框图像来做到这一点。

HTML

```
<ul>
    <li>one</li>
    <li>two</li>
    <li>three</li>
    <li>four</li>
    <li>five</li>
</ul>​ 
```

CSS（注意它是完全通用的，你需要使用类或 id 来使其更具体）：

```
ul{
    overflow:hidden;
    margin:1em;
    float:left;
}
li{
    float:left;
    padding:.1em 0;
    border-bottom:solid 5px #ccc; /* base state, grey */
    cursor:pointer;
}
li + li{
    padding-left:1em;
}
ul:hover li,                  /* all list items when the ul is hovered */
ul.active li,                 /* or all list items when the ul is "active" */
ul.active:hover li{           /* an override for below */
    border-bottom-color:#34f; /* become blue */
}
li:hover ~ li,                /* all list items after the hovered list item */
ul li.active ~ li,            /* all list items after the active list item */
ul.active:hover li:hover ~ li{ /* an override for when the list is active and hovered */
    border-bottom:solid 5px #ccc; /* back to grey */
} 
```

演示中还有一些琐碎的 jQuery 设置 li 类在单击时处于活动状态（清除彼此活动的 li 类）。

# php - .htaccess php 重定向

> ID：13995361
> 
> 赞同：0
> 
> 时间：2012-12-21T18:30:26.810
> 
> 标签：php, .htaccess

出于某种原因，当我在文件名后添加“.php”时，它可以正常工作，并以“facebox”形式完美加载。但是看看这个。

.ht 访问：

```
RewriteEngine On
RewriteRule ^media/([0-9]+).*/?$ media/report.php?id=$1 [L,QSA] 
```

我的 PHP 代码：

```
<a style="float: right;padding-right: 15px;" href="media/report/<?php echo $row['id'] ?>" rel="facebox"><img src="_lib/images/notice.png"></a> 
```

如果想看现场直播，请查看[http://www.krissales.me/#/media/39.Article-Testing](http://www.krissales.me/#/media/39.Article-Testing)

并点击文章评论中的报告图标图像。出于某种原因，它加载了facebox，但它只是不加载表单处理程序。

但是，如果我要在报告后添加一个 .php 以及 ID 的标签，然后去掉 .htaccess，它就可以完美地工作。但我正在尝试清理 URL。

你会碰巧知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:35:55.483

尝试：

```
RewriteEngine On
RewriteRule ^media/report/([0-9]+)(/)?$ media/report.php?id=$1 [L,QSA] 
```

该`[0-9]+`部分代表*一位或*多位，在您的情况下，大括号`()`将匹配的值返回给变量。`$1`

**更新**如上所述，之后`#`的一切都是 Javascript 业务。Apache Web 服务器处理`#`签名之前的所有内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T18:43:24.523

尝试：

```
RewriteRule ^#/media/([0-9]+).*/?$ media/report.php?id=$1 [L,QSA] 
```

因为你奇怪的标签的东西。

也可以简化为：

```
RewriteRule ^#/media/([0-9]+).*$ media/report.php?id=$1 [L,QSA] 
```

由于您似乎不关心身份证号码后面的任何内容。

# c# - Windows 无边框窗体不会更改位置

> ID：13995364
> 
> 赞同：1
> 
> 时间：2012-12-21T18:30:41.817
> 
> 标签：c#, forms, flash

我有一个无边界表单，我想以编程方式更改其位置。我尝试了几种不同的方法，但似乎没有任何效果。奇怪的是，如果我进入表单的属性，手动将位置更改为 100,100，将其设置`StartPosition`为手动，它仍然从 0,0 开始。另一个注意事项是表单只有一个控件，它是一个 Flash 播放器控件。我不确定这是否与它有关。关于为什么它不会移动窗口的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:32:22.640

`Load`通过Form的事件改变位置。

```
void Form1_Load(object sender, EventArgs e)
{
    Location = new Point(400, 600);
} 
```

EDIT1：发布一个完整的例子，以回应作者的评论。这对我来说是正确的。

**Form1.cs**

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        var flash = new AxShockwaveFlash();
        Controls.Add(flash);
        FormBorderStyle = FormBorderStyle.None;
        StartPosition = FormStartPosition.Manual;
        Location = new Point(400, 600);
    }
} 
```

**Form1.Designer.cs**

```
partial class Form1
{
    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Form1));
        this._axShockwaveFlash = new AxShockwaveFlashObjects.AxShockwaveFlash();
        ((System.ComponentModel.ISupportInitialize)(this._axShockwaveFlash)).BeginInit();
        this.SuspendLayout();
        // 
        // flash
        // 
        this._axShockwaveFlash.Enabled = true;
        this._axShockwaveFlash.Location = new System.Drawing.Point(0, 0);
        this._axShockwaveFlash.Name = "_axShockwaveFlash";
        this._axShockwaveFlash.OcxState = ((System.Windows.Forms.AxHost.State)(resources.GetObject("flash.OcxState")));
        this._axShockwaveFlash.Size = new System.Drawing.Size(192, 192);
        this._axShockwaveFlash.TabIndex = 0;
        // 
        // Form1
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(486, 299);
        this.Controls.Add(this._axShockwaveFlash);
        this.Name = "Form1";
        this.Text = "Form1";
        ((System.ComponentModel.ISupportInitialize)(this._axShockwaveFlash)).EndInit();
        this.ResumeLayout(false);
    }

    #endregion

    private AxShockwaveFlash _axShockwaveFlash;

} 
```

# kendo-ui - 在 Kendo UI 自定义列过滤器中，每列只有一个文本框，没有任何菜单、操作符和按钮

> ID：13995365
> 
> 赞同：1
> 
> 时间：2012-12-21T18:30:48.530
> 
> 标签：kendo-ui

在 Kendo UI 中，我想要自定义列过滤器，每列只有一个文本框，没有任何菜单、运算符和按钮。当用户在文本框中输入内容时，我必须在服务器端执行“包含”过滤器。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:59:55.073

看看这个 JSBin，我认为它实现了你想要的功能 [http://jsbin.com/equwes/1/edit](http://jsbin.com/equwes/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T21:18:27.640

这与您描述的不完全一样，但是如果您愿意，可以在网格上方或网格上的工具栏模板中添加一个搜索框，您可以使用以下代码：

```
 $("#txtSearcg").on("keypress blur change", function () {
        var filter = { logic: "or", filters: [] };
        $searchValue = $(this).val();
        if ($searchValue) {
            $.each($("#grid").data("kendoGrid").columns, function( key, column ) {
                if(column.filterable) { 
                    filter.filters.push({ field: column.field, operator:"contains", value:$searchValue});
                }
            });
        }
        $("#grid").data("kendoGrid").dataSource.query({ filter: filter });
    }); 
```

其中 txtSearch 是您正在使用的搜索输入的 ID。我从 jQuery Datatables 插件切换到 Kendo UI Grid 后创建了这段代码。我喜欢 Kendo，但真的很怀念 DataTables 提供的全局搜索文本框。我在我所有的剑道网格中都包含了这个代码。同样，与您所描述的不完全一样，这将是一个搜索框，它将搜索所有标记为可过滤的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T22:27:34.123

您将很难在常规行中执行此操作。改用标头，您可以放置​​ AutoComplete 或常规输入，这些输入在更改时会触发与[此演示](http://demos.kendoui.com/web/grid/toolbar-template.html)中的 DropDownList 类似的逻辑。DropDownList 在 ToolBar 模板中，但在列标题模板中也可以实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-24T06:53:32.300

我们发现 Kendo 没有任何完整的内置支持，因此通过扩展自定义了 kendo 网格。我们为每一列添加了文本框并实现了包含过滤器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-17T11:39:39.753

我已经修改`G Siry`了答案。它不需要修改并且适用于任何网格。只需替换`#grid`为您的网格 ID：

```
 var tr = $("<tr/>");
    tr.appendTo($("#grid thead"));
    $("#grid thead th").each(function (index) {
        var th = $(this);
        if (th.data("field")) {
            tr.append($("<th data-field='" + th.data("field") + "' class='k-header'><input class='k-textbox' /></th>"));
        }
        else
            tr.append($("<th/>"));
    });
    tr.find("input").keyup(function () {
        grid.dataSource.filter({
            operator: "contains",
            value: $(this).val(),
            field: $(this).parent("th").data("field")
        });
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-09T20:54:53.097

只需要清除 kendoAutoComplete 配置

```
columns: [
            {
                field: 'Name', title: 'Name',
                filterable: {
                    cell: {
                        template: function (container) {
                            container.element.kendoAutoComplete()
                        },
                        showOperators: false
                    }
                }
            }
        ] 
```

# objective-c - Objective C 使用 SEL 和 IMP 进行循环优化

> ID：13995376
> 
> 赞同：0
> 
> 时间：2012-12-21T18:31:55.600
> 
> 标签：objective-c, optimization, for-loop, selector, imp

根据[这篇文章](http://www.mulle-kybernetik.com/artikel/Optimization/opti-3.html)，目标 C 中的 For 循环可以使用 SEL 和 IMP 进行优化。我一直在玩弄这个想法，今天我一直在尝试一些测试。然而，似乎对一个班级有效，似乎对另一个班级无效。此外，我想知道加速究竟是如何发生的？**通过避免 objC_mesgSent**？

**问题 1** 这是怎么回事：

```
Cell *cell;
for (NSMutableArray *row in self.data) {
    for (Data *d in row){
        cell = [[Cell alloc] initWithRect:tmp_frame];
        [self addSubview:cell.view];
        [self.cells addObject:cell]; 
```

比这更糟糕：

```
SEL addCellSel = @selector(addObject:);
IMP addCellImp = [self.cells methodForSelector:addCellSel];
Cell *cell;
for (NSMutableArray *row in self.data) {
    for (Data *d in row){
        cell = [[Cell alloc] initWithRect:tmp_frame];
        [self addSubview:cell.view];
        addCellImp(self.cells,addCellSel,cell); 
```

**问题 2** 为什么会失败？（注意self是继承自UIView的类）

```
SEL addViewSel = @selector(addSubview:);
IMP addViewImp = [self methodForSelector:addViewSel];
Cell *cell;
for (NSMutableArray *row in self.data) {
    for (Data *d in row){
        cell = [[Cell alloc] initWithRect:tmp_frame];
        addViewImp(self,addViewSel,cell.view);
        [self.cells addObject:cell]; 
```

错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[SimpleGridView addSubview:]：无法识别的选择器发送到实例 0xaa3c400”

告诉我在我的“SimpleGridView”类中找不到方法addSubview。但是，当我尝试时：

```
if ([self respondsToSelector:addViewSel]){
    NSLog(@"self respondsToSelector(AddViewSel)");
    addViewImp(self,addViewSel,cell.view);
} else {
    NSLog(@"self does not respond to selector (addViewSel");
   [self addSubview:cell.view];  
} 
```

我仍然得到完全相同的错误！

**问题 3** 为什么我不能像这样将选择器和实现设置为 Class Init/new 方法：

```
iContactsGridCell *cell;
SEL initCellSel = @selector(initWithRect:);
IMP initCellImp = [iContactsGridCell methodForSelector:initCellSel];
for (NSMutableArray *row in self.data) {
    for (Data *d in row){
        cell = initCellImp([iContactsGridCell new],initCellSel,tmp_frame); 
```

供参考：类**iContactsGridCell**继承自 Class **Cell**，它定义和实现

```
- (id) initWithRect:(CGRect)frame; 
```

此外，强制转换没有帮助（关于无法识别的选择器的相同错误）

```
iContactsGridCell *cell;
SEL initCellSel = @selector(initWithRect:);
IMP initCellImp = [Cell methodForSelector:initCellSel];
for (NSMutableArray *row in self.data) {
    for (Data *d in row){
        cell = (iContactsGridCell *)initCellImp([Cell new],initCellSel,tmp_frame); 
```

尝试不同的组合，例如：

```
IMP initCellImp = [Cell methodForSelector:initCellSel]; 
```

或者

```
cell = initCellImp([iContactsGridCell class],initCellSel,tmp_frame); 
```

产生完全相同的错误。所以，请告诉我，我错过了什么，这有什么好处，是否有可能为类 init 方法提供 IMP/SEL？此外，与此相比，C 函数指针会更快，还是以上所有内容都只是一个目标 C 函数指针包装器？谢谢 ！PS：如果这些问题一次太多，我深表歉意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T21:50:02.620

在该代码中，没有办法`objc_msgSend()`产生可衡量的开销。有很多其他工作正在进行，可能非常昂贵，包括分配、视图层次结构操作和其他操作。

即转向直接函数调用完全是在浪费您的时间。

目前尚不清楚代码失败的原因。您需要检查 的返回值`methodForSelector:`以确保它有意义。另外，请注意以这种方式调用 IMP 是不正确的；它需要被类型转换为它真正是的特定类型的函数指针。即`void (*impPtr)(id, SEL, CGRect) ...`或什么的。

最后，加快这一进程可能会涉及从使用如此多的视图转向更多按需使用的东西。由于架构，这似乎是一个性能问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T00:28:23.617

1.  是的，它避免了`objc_msgSend()`，它（更重要的是）必须在运行时根据接收者的类和选择器执行正确的 IMP 查找，即使在这种情况下，接收者的类和选择器每次都是相同的，所以理论上我们可以只查找一次并重新使用它。

2.  从你描述的内容很难知道什么是错的。一种可能性是对象的类动态处理方法，这样它就没有给定选择器的特定实现，但是当被调用时，实际上可以处理它（例如使用`forwardInvocation:`）。这在很多地方都有使用，例如代理对象，或者将接收到的东西发送到多个目标的通知对象。这样的类可能会说`YES`to `respondsToSelector:`，因为它确实响应它。我不确定这是否是这里发生的事情。

3.  `[iContactsGridCell methodForSelector:initCellSel]`将查找具有该名称的*类方法*，因为您正在调用`methodForSelector:`一个`iContactsGridCell`类*对象*。要获得具有该名称的实例方法，您要么必须调用`methodForSelector:`的实例`iContactsGridCell`，要么使用`instanceMethodForSelector:`类上的方法。

# php - 如果可能，在数组中使用 $xx

> ID：13995378
> 
> 赞同：1
> 
> 时间：2012-12-21T18:32:01.217
> 
> 标签：php, arrays

如果可能，请您提供帮助：

```
$xx_array = array(64,65,66,67);
.
.
.
foreach($xx_array AS $xx) { 
```

工作完美，但我想做的是：

```
$yy='5,6,7,8';

$xx_array = array($yy);
.
.
.
foreach($xx_array AS $xx) { 
```

当我这样做时，只处理第一个数字！？

我之所以想要这样，是因为我需要在多个数组中使用相同的数字，所以我教把它放在单独的 php 文件中，然后添加包含，所以如果需要我只更改一个文件！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T18:33:23.213

使用`explode`：

```
$yy='5,6,7,8';
$xx_array = explode(',', $yy); 
```

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T18:33:50.000

使用爆炸：

```
$xx_array = explode(',', $yy); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T18:34:00.500

`$yy`设置为 . 的字符串`5,6,7,8`。要获取此字符串，您需要使用`explode();`它将将该字符串转换为数组。

```
$xx_array = explode(',', $yy); 
```

参见手册：

[http://uk1.php.net/manual/en/function.explode.php](http://uk1.php.net/manual/en/function.explode.php)

例子：

```
<?php
$yy = '5,6,7,8';

$xx_array = explode(',', $yy);
print_r($xx_array);
?> 
```

`print_r();`意志归来：

```
Array ( [0] => 5 [1] => 6 [2] => 7 [3] => 8 ) 
```

这就是你要找的

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T18:33:56.613

使用`explode`：

```
$xx_array = explode(",", $yy); 
```

它会自动拆分您的字符串`","`并创建一个数组

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T18:44:51.890

这是您的问题的答案：

```
$yy='5,6,7,8';

$xx_array = array($yy);

foreach($xx_array AS $xx) { 
```

$yy 本身并不是一个实际的数组。这只是一个字符串。所以 $yy 需要变成一个数组。是的，您可以使用爆炸，也可以这样做：

```
$yy = array('5', '6', '7', '8'); 
```

现在 $yy 确实是一个数组。

# html - CSS3 div 动画

> ID：13995380
> 
> 赞同：0
> 
> 时间：2012-12-21T18:32:09.560
> 
> 标签：html, css

我有一个使用 CSS3 动画的简单加载圈。加载循环完成后是否可以显示一个空的 div？任何帮助深表感谢。

[jsFiddle](http://www.jsfiddle.net/vJsTr/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:12:07.650

你可以像这样添加一个事件监听器

```
 var e = document.getElementById("lastDot");
 e.addEventListener("animationend", function(){$("#mydiv").show();}, false); 
```

这是更新的小提琴：http: [//jsfiddle.net/vJsTr/4/](http://jsfiddle.net/vJsTr/4/)

# javascript - UI 滑块值显示“或更多”和“或更少”

> ID：13995390
> 
> 赞同：2
> 
> 时间：2012-12-21T18:33:25.383
> 
> 标签：javascript, jquery, jquery-ui

如果有可能将最大值和最小值更改为范围滑块以搜索（示例）“40 或更少”和“60 或更多”之间的值，我会感到很困惑。因此，如果标准最大值为 60，最小值为 40，则滑块将正常工作在 41 到 59 之间，但是当将右把手设置为 60 时，标签将显示“60 或更多”，左把手设置为 40 时，标签将显示将显示“40 或更少”。

**示例：**值 min:40 max:60。当左把手设置在滑块的中间 (50) 并将右把手设置为最大值时，它将搜索 50 和无限更高值之间的结果，并且标签将显示“50 - 60 或更多”。

```
function{
    $( "#range" ).slider({
        range: true,
        min: 40,
        max: 60,
        step: 1,
        values: [ 40, 60 ],
        slide: function( event, ui ) {
            $( "#label" ).val( "Value: " + ui.values[ 0 ] + " - " + ui.values[ 1 ] + "");
        }
    });
    $( "#label" ).val( "Value: " + $( "#range" ).slider( "values", 0 )+ " - " + $( "#range"     ).slider( "values", 1 ) + "");
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:34:43.573

还没有真正解决这个问题，所以如果有人想尝试修改标签，我用滑块制作了一个标准的 jsfiddle。

[http://jsfiddle.net/77SsQ/4/](http://jsfiddle.net/77SsQ/4/)

谢谢。

```
$(function() {
    $( "#range" ).slider({
        range: true,
        min: 40,
        max: 60,
        values: [ 40, 60 ],
        slide: function( event, ui ) {
            $( "#amount" ).val( "" + ui.values[ 0 ] + " - " + ui.values[ 1 ] );
            }
        });
        $( "#amount" ).val( "" + $( "#range" ).slider( "values", 0 ) + " - " + $( "#range" ).slider( "values", 1 ) );
});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:22:00.113

只需为更改事件提供一个处理程序即可绘制您的标签：

[http://jsfiddle.net/2MBGh/](http://jsfiddle.net/2MBGh/)

```
change: function (event, ui) {
    var label = $('#label');

    switch (ui.value) {
        // min
        case 0:
            label.text('Less than 0.');
            break;
        // max
        case 10:
            label.text('Greater than 10.');
            break;
        default:
            label.text(ui.value);
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:50:07.120

做一个自定义事件，伙计！定义有什么问题

```
$("#range").bind('rightIsMax',function(e,leftVal,rightMaxVal){
   $( "#label" ).val( "Value: "+leftVal+" - " + rightMaxVal + " or more");
}); 
```

那时什么`ui.values[ 1 ]===60`时候`$("#range").trigger('rightIsMax',ui.values[0],ui.values[1]);`

# cakephp - 未使用 ACL CakePHP 登录时看不到主页

> ID：13995393
> 
> 赞同：0
> 
> 时间：2012-12-21T18:33:40.093
> 
> 标签：cakephp, acl

当我没有登录并且正在查看我的主页（本地主机）时，我会自动被重定向到登录页面。这是正常的吗？我能做些什么呢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:36:45.143

您的主页可能未设置为公开。在您的控制器中`beforeFilter()`，您可以这样设置它。例如：

```
$this->Auth->allow('index'); 
```

将使`index`所有用户都可以查看您的操作，无论他们是否已登录。

# reporting-services - 如何在 64 位 SSRS 中使用 32 位运行 SSIS 数据源（如 Run64bitRuntime=false）连接到 Access DB

> ID：13995395
> 
> 赞同：1
> 
> 时间：2012-12-21T18:33:41.033
> 
> 标签：reporting-services, ssis, ms-access-2010

我有一个 SSRS（2008 R2 64 位）报告，我想在 64 位操作系统中公开 Access（Office 2010 32 位）数据库中的数据。

经过搜索，似乎建议的解决方案是使用 SSIS 包作为中间人。

在 BIDS 中实现所有内容后，它工作了，但当我在 SSRS 中部署时却没有（数据源中的错误：“包无法验证。”）。

为了确保包没问题，我部署了它，并在命令行中使用 DTEXEC 运行，结果：

```
Using the 32bit DTEXEC - it worked
Using the default 64bit DTEXEC - the same error appeared 
```

这就是我断定问题出在“位”中的方式......

假设由于在SSRS中，SSIS扩展的连接字符串基本上是在调用DTEXEC，所以应该可以使用[这里](http://visakhm.blogspot.pt/2011/11/excel-2010-export-import-issue-in-64.html)（最后）说的“/X86开关启用32位运行时模式”，但它没有工作...

那么，现在怎么办，我问……有什么想法……？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:54:54.993

如果你想要 32 位，你可以执行`'C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\DTExec.exe'`而不是`'C:\Program Files\Microsoft SQL Server\100\DTS\Binn\DTExec.exe'`.

# mongodb - $in 的 Mongo db 奇数

> ID：13995398
> 
> 赞同：1
> 
> 时间：2012-12-21T18:33:52.343
> 
> 标签：mongodb

我有一个包含 30 个 mongoid 的数组，这是我的代码，

```
$rest = $m->cart->res->find(array("_id" => array('$in' => $restin["e"])))->limit(30)->explain(); 
```

_id 字段自然被索引，但我得到的结果就像它从未被索引一样，这是我的解释结果，

```
[cursor] => BtreeCursor _id_ multi
[isMultiKey] => 
[n] => 30
[nscannedObjects] => 30
[nscanned] => 43
[nscannedObjectsAllPlans] => 30
[nscannedAllPlans] => 43
[scanAndOrder] => 
[indexOnly] => 
[nYields] => 0
[nChunkSkips] => 0
[millis] => 0
[indexBounds] => Array 
```

我不明白的部分是，为什么 mongodb 搜索 43 个文档？，只有 30 个索引 mongoids，nscanned 应该是 30，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:18:10.133

这是[Mongo DB Explain Plan中的文档](http://docs.mongodb.org/manual/reference/explain/#explain-output-fields-core)

特别要注意它谈论**COVERED INDEX**的部分。您的最后一个回复是一个覆盖索引（因为您只投影 id: 1），根据他们的文档，无论如何它看起来都很正常。

**nscannedObjects**
指定查询期间扫描的文档总数。nscannedObjects 可能低于 nscanned，例如如果索引是覆盖索引。

**nscanned**
指定在数据库操作期间扫描的文档或索引条目的总数。您希望 n 和 nscanned 的值尽可能接近。nscanned 值可能高于 nscannedObjects 值，例如如果索引是**覆盖索引**。

# python - 使用 BeautifulSoup 4 提取日期

> ID：13995404
> 
> 赞同：3
> 
> 时间：2012-12-21T18:34:28.863
> 
> 标签：python, python-2.7, beautifulsoup

如何使用 BeautifulSoup 提取日期？

```
<div class="month">                                            Dec                                          </div>                                             
<div class="edate">                                                 31                                             </div>                                             
<div class="day">                                                 Mon                                             </div 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:37:26.573

取这些 div 的*父*元素，然后获取三个字符串并将它们连接成一个字符串：

```
date = ' '.join([unicode(t) for t in parent.stripped_strings]) 
```

这将导致`Dec 31 Mon`.

如果您需要操作日期，则需要将其解析为`datetime.date`对象；我强烈建议您使用[`dateutil`外部库](http://labix.org/python-dateutil)来做到这一点。但是，由于从该日期起缺少年份，因此您的里程可能会有所不同。

# ruby-on-rails - fog.io gem public_url 返回两个不同的 url

> ID：13995405
> 
> 赞同：1
> 
> 时间：2012-12-21T18:34:30.803
> 
> 标签：ruby-on-rails, ruby, delayed-job, fog

所以这是我的代码。看起来像典型的雾代码。

```
prefix = 'data:image/png;base64,'
png = Base64.decode64(data[prefix.length, data.length-1])

aws_settings = YAML.load_file(RAILS_ROOT + "/config/amazon_s3.yml")[RAILS_ENV] rescue nil
if aws_settings
  connection = Fog::Storage.new(
    :provider => 'AWS',
    :aws_access_key_id => aws_settings['access_key_id'],
    :aws_secret_access_key => aws_settings['secret_access_key']
  )

  directory = connection.directories.get(aws_settings['bucket_name'])

  filename = "#{quiz_id}/#{user_id}_#{question_id}.png"
  file = directory.files.create(
    :key => filename,
    :body => png,
    :public => true
  )
end 
```

问题是当我调用 file.public_url 时，我会随机获得两个不同的 url 之一。要么我会得到：

[https://bucket_name.s3.amazonaws.com/19/235_146.png](https://bucket_name.s3.amazonaws.com/19/235_146.png)

或者

[http://s3.amazonaws.com/bucket_name/19/235_150.png](http://s3.amazonaws.com/bucket_name/19/235_150.png)

虽然我不在乎一种或另一种方式，但我希望网址保持一致。

有谁知道如何解决这个问题？我在我的代码中做错了吗？

我还应该提到，我是在 Delayed::Job 中执行此操作的。当我作为普通方法调用执行此操作时，它似乎总是给我 https 版本。但是当我把它坚持到延迟工作中时，我就会得到随机性。很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:11:51.270

哇，这有点尴尬。这已经变成了关于延迟工作的教训。显然它已经缓存了我的旧代码，我在其中硬编码 url 字符串以将其存储起来。像这样： url = "http://s3.amazonaws.com/bucket_name/{quiz_id}/{user_id}_{question_id}.png"

我后来改成这样：url = file.public_url

如果您的存储桶名称不符合 dns 标准，Fog 会默认使用该字符串。这就是为什么我很困惑为什么会发生这种情况。所以，是的，只是被使用的旧缓存代码。我关闭了延迟的工作并重新启动它，问题就消失了。

我能够弄清楚的方法是我查看了延迟的作业日志，并注意到它仍然有一些旧的 puts 语句打印在那里。那是它点击的时候。:]

# css - 当我将页眉主要内容和页脚分开到不同的视图时，骨架样板不会正确加载？

> ID：13995407
> 
> 赞同：0
> 
> 时间：2012-12-21T18:34:35.320
> 
> 标签：css, codeigniter, skeleton-css-boilerplate

我正在尝试在codeigniter中从getskeleton.com加载骨架CSS，我正在使用一个模板系统，我在一个视图中分离我的标题（打开html，指向CSS的链接，页面的标题），导航栏在另一个视图中，第三个视图中的主要内容，第四个视图中的侧栏，以及第五个中的页脚和关闭 html，我尝试将它们附加到控制器中的变量以加载视图，也尝试使用模板视图加载每个视图，两个系统都可以正常加载视图，后者是我在开始尝试使用骨架之前所拥有的，它可以很好地加载 css，但是没有一个系统会加载骨架 css 文件。如果我将纯 html 中的布局作为一个完整的文档正确加载，那么所有加载都很好，我做错了什么？

这就是我的观点：

```
<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

<!-- Basic Page Needs
  ================================================== -->
<meta charset="utf-8">  
<title>The GroundScore Way</title>
<meta name="description" content="">
<meta name="author" content="John Fyffe">

<!-- Mobile Specific Metas
  ================================================== -->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- CSS
  ================================================== -->
<link rel="stylesheet" href="http://gscore.webege.com/css/base.css">
<link rel="stylesheet" href="http://gscore.webege.com/css/skeleton.css">
<link rel="stylesheet" href="http://gscore.webege.com/css/layout.css">

<!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- Favicons
================================================== -->
<link rel="shortcut icon" href="images/favicon.ico">
<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

</head>
<body>

<!-- Primary Page Layout
================================================== -->

<!-- Delete everything in this .container and get started on your own site! -->

<div class="container">

    <?php include_once("analyticstracking.php"); ?>

    <div id='header' class="sixteen columns">

        <img src="http://gscore.webege.com/imgs/gsbanner.jpeg"  alt=""/>

    </div> 
```

这是导航：

```
<div id='nav' class="four columns">

<?php 

for($i =0; $i >= 9; $i++)
{
    echo '<BR />';
}           

$keys[1]= array( 
            'home', 'about', 'members', 'news', 'blog', 'projects', 'portfolios', 'contact'
        );
$keys[2]= array(
            'login', 'signup'
        );
$keys[3]= array(
            'logout'

        );

foreach($keys[1] as $link)
{
    if($page != $link)
    {
        echo '<a href='.base_url("main/page/$link").'><img src="'.base_url("imgs/".$link."_0.png").'" /></a>';
        echo '<br/>';
    }
}

echo '<br/><br/>';

foreach($keys[2] as $link)
{
    if(!$this->session->userdata('is_logged_in'))
    {
        if($page != $link)
        {
            echo '<a href='.base_url("main/page/$link").'><img src="'.base_url("imgs/".$link."_0.png").'" /></a>';
            echo '<br/>';
        }
    }
} 
```

这是主要内容：

```
<div id='main' class="eight columns">
<?php 

    $page = $pd['results'];

    foreach($page as $row){

        $title = $row->title;

        $cnt_tl = $row->cnt_title1;

        $text1 = $row->text1;
        $text2 = $row->text2;

    }

    echo heading($title, 1);

    echo heading($cnt_tl, 2);
    echo '<BR />';
    echo '<p>'.$text1.'</p>';

?>

</div> 
```

这是侧边栏（我没有开发任何试图首先让显示正确的东西）：

```
<div id='side' class="four columns">
<p>this is the side bar</p>
</div> 
```

这是页脚：

```
<div id='footer' class="sixteen columns">

        <p>&copy;Copyright (c) 2012 ground-score.com. All rights reserved.</span> </P>

</div>

</div><!-- container -->

<!-- End Document
================================================== -->
</body>
</html> 
```

# javascript - Javascript 和 Gmail 等效于 Applescript 和 Apple Mail

> ID：13995411
> 
> 赞同：1
> 
> 时间：2012-12-21T18:34:42.747
> 
> 标签：javascript, python-2.7, gmail, google-apps-script, google-cloud-sql

我们公司通过电子邮件从第三方专有网站接收订单。

我在 Apple Mail 中选择一条订单消息并运行我编写的使用 applescript、awk、curl 和 bash 的 Applescript：

*   评估选定的电子邮件
*   将任何附件下载到我们的服务器
*   解析段落（纯文本，而不是 HTML - 我使用 RegEx 获取和设置订单详细信息（orderId、customerName、数量等）
*   将订单详细信息写入 MySQL 数据库

我想对 Google App Script、Gmail 和 Google Cloud SQL 做同样的事情，但不知道哪种语言（Javascript？Python？）和方法最适合选择和获取订单电子邮件的原始文本，请保留它在云端，并处理订单。我认为 App Script 只是 Javascript。我写了一点 Python 代码，但没有真正的应用程序。

有人有骨头要扔我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:07:27.517

为 gmail 编写一些上下文小工具，这将在您的邮箱中正常工作。我不确定这是否能满足您的所有要求。

[https://developers.google.com/google-apps/gmail/contextual_gadgets](https://developers.google.com/google-apps/gmail/contextual_gadgets)

使用 Google Apps 脚本，您可以为 Gmail 邮件创建辅助 UI，然后您可以使用它来创建订单等。以下是 Apps 脚本服务的一些链接，可帮助您入门。

[https://developers.google.com/apps-script/service_gmail](https://developers.google.com/apps-script/service_gmail)

[https://developers.google.com/apps-script/service_html](https://developers.google.com/apps-script/service_html)

[https://developers.google.com/apps-script/jdbc](https://developers.google.com/apps-script/jdbc)

[https://developers.google.com/apps-script/articles](https://developers.google.com/apps-script/articles)

# angularjs - 首次填充视图时是否调用了 $formatters？

> ID：13995414
> 
> 赞同：3
> 
> 时间：2012-12-21T18:34:52.163
> 
> 标签：angularjs

`NgModelController`提供`$formatters`模型 -> 视图转换。我在这个[小提琴](http://jsfiddle.net/_nth/vKzUW/1/)中玩它。在我通过另一个输入对模型进行更改后它工作正常，但是在最初填充值时不会调用我的格式化程序。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T01:51:27.797

每当 $modelValue 改变时，所有的 $formatters 都会被调用。因此，在调用 read() 之后，设置 $modelValue 以启动 $formatters 以运行：

```
read();                    // initialize
ngModel.$modelValue = '';  // causes $formatters to run 
```

另请参阅[此 google 群组帖子](https://groups.google.com/d/msg/angular/cvHU-AUOP4U/wDahiSxuljIJ)。

# c# - 带函数的外部文件

> ID：13995415
> 
> 赞同：0
> 
> 时间：2012-12-21T18:34:57.383
> 
> 标签：c#, asp.net, function, include, external

如何在项目目录中添加（然后使用）外部文件，其中包括 *.aspx.cs 文件中使用的自定义函数？

我的意思是像在 php-eg functions.php 文件和其他文件中一样`include/require_once('functions.php')`。

有没有办法做到这一点？

或其他方式 - 如何在另一个中使用一个 .aspx.cs 文件中的函数（当然不复制所有文件；））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:42:52.657

它可以通过创建一个包含所有需要共享的功能的单独类来实现。此类应位于“App_code”文件夹中，该文件夹仅允许在该特定“Web 应用程序”中使用此类。另一种选择是创建一个新的“类库”并在其中包含该类，并在任何 Web 应用程序中“添加对类库的引用”。

注意：您可能已经知道，函数应该类似于实用函数。例如：对于 webforms 应用程序，您不能在页面外引用 asp.net 控件。

此外，如果三个没有为此共享类初始化的字段，请考虑使用易于调用的“静态”函数创建“静态”类。

# php - 在 MySQL 中存储大学

> ID：13995416
> 
> 赞同：1
> 
> 时间：2012-12-21T18:35:00.640
> 
> 标签：php, mysql, database, database-normalization

我们正在建设我们的网站，并且我们不断增加新的大学。我有一堂课可以处理很多这样的事情。问题是，当人们注册时，我们应该将他们就读的大学作为完整字符串存储在数据库中，还是将每所大学转换为唯一的 int 并存储它，或者创建一个所有大学的新表并手动添加它们当我们向系统添加更多学校时，只需将所选学校的 primary_key 存储在 users 表中？最简单的就是存储字符串。但我觉得这可能效率低下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:37:54.167

您绝对应该为大学创建另一个表并将该表的PK存储在另一个表中，以便您可以更轻松地对这些表执行操作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T18:38:22.467

我认为每次存储完整的字符串是非常低效的。我会通过只存储`universityId`每个用户的号码来解决这个问题，然后使用 SQL 查询来检索您需要的任何信息。

这样您就可以避免数据重复（例如：来自同一所大学的不同用户输入不同的字符串）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T18:47:07.810

我同意前面的答案。您肯定想使用大学 id 主键，而不仅仅是带有大学名称的字符串！以这种方式设计数据库称为规范化。看看[这篇文章](http://support.microsoft.com/kb/283878)，了解规范化的介绍，包括一些关于为什么需要它的讨论。

# jquery - 获取嵌套在 td tr jquery 中的下一个文本区域的值

> ID：13995427
> 
> 赞同：0
> 
> 时间：2012-12-21T18:35:37.277
> 
> 标签：jquery

我疯了，想弄清楚如何获得底部文本区域的价值。我是 jquery/javascript 的新手，我确定这是问题所在，我尝试了几个小时来找出一个工作代码组合来检索它。

当第一次更改时，我试图收集这两个表行的底部文本区域的值。我可以在更改第一个 textarea 值时很好地获取它，但是当对顶部 textarea 进行更改时，我需要底部的值。一旦我弄清楚我需要编写一个函数来在底部改变时获取顶部，我确定一旦我得到初始解决方案，我就可以弄清楚如何逆转这个过程。

tableRow 类和 id 名称不是必需的，我在测试过程中添加了这些名称。

任何帮助将不胜感激。

//html

```
<tr class="years" id="yearStart">
    <td class="fieldlabel">Year Range Start</td>
    <td colspan="7" class="textareacontainer">
        <textarea class="multiedit-field" name="yearRangeStart-<?php echo $k->id; ?>">
        <?php echo $k->yearRangeStart; ?></textarea>
    </td>
</tr>
<tr class="years" id="yearEnd">
    <td class="fieldlabel">Year Range End</td>
    <td colspan="7" class="textareacontainer">
        <textarea class="multiedit-field" name="yearRangeEnd-<?php echo $k->id; ?>">
        <?php echo $k->yearRangeEnd; ?></textarea>
    </td>
</tr> 
```

//jQuery

```
$("#yearStart textarea").live("change", function(){

yearStart = $(this).val();

yearEnd = $(this).next('tr.years').find('textarea').val();

$.post("http://localhost:8888/...",
{
yearStart: yearStart,
yearEnd: yearEnd
},
function(data,status){
alert("\nEnd: " + yearEnd + "\nStart: " + yearStart + "\nData: " + data + "\nStatus: " + status);
});
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:39:45.900

在这条线上：

```
 yearEnd = $(this).next('tr.years').find('textarea').val(); 
```

$(this) 指向一个文本区域，而不是 tr。

尝试：

```
yearEnd = $(this).closest('tr').next('tr.years').find('textarea').val(); 
```

# jquery - MultiPowUpload（闪存文件上传组件）在上传到 Amazon S3 时出现错误 #2049

> ID：13995428
> 
> 赞同：1
> 
> 时间：2012-12-21T18:35:45.780
> 
> 标签：jquery, file-upload, amazon-s3, swfupload

使用[MultiPowUpload](http://www.element-it.com/multiple-file-upload/flash-uploader.aspx)（闪存文件上传组件）将文件上传到[Amazon S3](http://aws.amazon.com/s3/)。

我只是使用**flash_amazons3generator.html**文件生成“S3 策略和签名”以粘贴到 var **flashvars = {}**中。

但是当我试图上传它给我“**错误#2049** ”。

这是我的**S3 政策和签名**：

```
 var flashvars = {
      "uploadUrl": "http://myBucket.s3.amazonaws.com",
      "amazonS3.accessKeyId": "xxxxxx",
      "amazonS3.policy": "xxxxxx",
      "amazonS3.signature": "xxxxx",
      "amazonS3.acl": "public-read-write",
      "amazonS3.key": "xxxxx"
 }; 
```

我也尝试使用'encodeURI'和'encodeURIComponent'方法，可能是由于编码而导致的问题，但无济于事：

```
 'policy': encodeURI(data.policy)
 'signature': encodeURIComponent(data.signature) 
```

知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T17:59:27.657

我得到了出错的解决方案。解决方案是我错过了一件重要的事情。我应该将 crossdomain.xml 文件的内容类型设置为 text/xml。

下图会有所帮助。如何设置： ![crossdomain.xml 文件到 text/xml](../Images/e21bb3b2afe13aa9e3c45e2ba54f1f73.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T05:59:03.360

请注意，您应该将 crossdomain.xml 文件放在存储桶的根目录，以允许 MultiPowUpload 将文件上传到此存储桶。并授予此文件的“公共读取”权限。在 MultiPowUpload 文档中阅读有关跨域安全策略的更多信息。

您可以在教程 [http://www.element-it.com/OnlineHelpMulti/Tutorial.html#amazon中阅读更多内容](http://www.element-it.com/OnlineHelpMulti/Tutorial.html#amazon)

在这里您可以看到上传到 S3 服务器的工作正常：demo.element-it.com/Examples/MultiPow/flash_uploadtoamazons3.html

您也可以从 elemen-it s3 存储桶中获取 crossdomain.xml：http: [//element-it.s3.amazonaws.com/crossdomain.xml](http://element-it.s3.amazonaws.com/crossdomain.xml)

如果您对我们的产品有任何疑问，请随时联系 Element-IT 支持团队。

# javascript - 在数据处传递 HTML 字符串

> ID：13995431
> 
> 赞同：0
> 
> 时间：2012-12-21T18:36:01.550
> 
> 标签：javascript, html, css

我正在使用自定义插件。其有利的因此释放的资源非常少。JS是这样的。大部分对我来说都是有意义的。

```
Invodo.Widget.add({
    type:"cta", 
    podId:"HX9FM0DO",
    parentDomId:"cta_container6",
    widgetId:"cta6",
    data:"kerastase/images/Cat Banners/Category_Content_Slot_Images/play.png?$staticlink$"
}); 
```

这就是我添加这样的div的方式

```
Invodo.Widget.add({podId:"119OKII2", widgetId:"player3", mode:"overlay", type:"inplayer", listensTo:"cta3"}); 
```

而dom中的div就是这样生活的

```
<div id="cta_container6"></div> 
```

现在插件只是将图像附加到这个 div。但是，如果我只想设置 div 的样式而不附加图像怎么办？

我是从根本上弄错了 JavaScript 还是插件特定的？

# scripting - 为什么非转义的双引号路径适用于测试，但不适用于别名？

> ID：13995436
> 
> 赞同：1
> 
> 时间：2012-12-21T18:36:28.010
> 
> 标签：scripting, bash

仅当某个路径存在现有可执行文件时，我才尝试为程序设置别名。到目前为止，我一直在我的所有脚本中使用双引号来表示路径和别名，但是在将它们与包含空格的路径一起使用时遇到了问题。

例如，我因此设置了一个变量：`PATH_TO_SUBL="/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl"`. 测试它 ( `[[ -x $PATH_TO_SUBL ]]`) 有效，但在别名中使用它不起作用（`alias subl=$PATH_TO_SUBL`导致 bash 返回*/Applications/Sublime: No such file or directory*）。

当我用单引号和转义空格 ( `PATH_TO_SUBL='/Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl'`) 设置它时，测试和别名都有效。这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:40:11.573

采用：

```
alias subl="$PATH_TO_SUBL" 
```

否则您的别名命令将被解析为：

```
alias suble=/some/thing else/here 
```

这没有做出正确的别名定义。

（它可以在条件中不带引号的情况下工作，因为它们是由 shell 直接使用规则处理的。如果您实际使用条件`[[ ... ]]`，它将无法工作。）`test``[ ... ]`

# html - 我的网站在 Firefox 中查看时不显示图像，但在 Chrome 中完美运行

> ID：13995439
> 
> 赞同：-1
> 
> 时间：2012-12-21T18:36:44.797
> 
> 标签：html, css, google-chrome, firefox

我知道这并不是什么新鲜事，而且会发生，但我只是想不出要纠正什么。我尝试验证我的网站代码，固定编码，但无济于事。

这里是：[www.arturstols.com](http://www.arturstols.com)（您点击徽标）

它使用 jQuery 在中央容器内滑动图像，该容器不显示。介绍图形确实如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:44:13.887

而不是`images\pic.png`put `images/pic.png`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T18:45:26.380

您对图片网址使用了不正确的斜线...

```
<div id="gallery">
    <img alt="" src="images\title_903x600.jpg" style="margin: 5px 0px;">
    <img alt="" src="images\rukitis.jpg">
    <img alt="" src="images\danny.jpg">
    <img alt="" src="images\ernests.jpg">
    <img alt="" src="images\toms.jpg">
    <img alt="" src="images\forest.jpg">
    <img alt="" src="images\fight.jpg">                                 
    <img alt="" src="images\light.jpg">
    <img alt="" src="images\mirror.jpg">
    <img alt="" src="images\scene.jpg">
</div> 
```

应该...

```
<div id="gallery">
    <img alt="" src="images/title_903x600.jpg" style="margin: 5px 0px;">
    <img alt="" src="images/rukitis.jpg">
    <img alt="" src="images/danny.jpg">
    <img alt="" src="images/ernests.jpg">
    <img alt="" src="images/toms.jpg">
    <img alt="" src="images/forest.jpg">
    <img alt="" src="images/fight.jpg">                                 
    <img alt="" src="images/light.jpg">
    <img alt="" src="images/mirror.jpg">
    <img alt="" src="images/scene.jpg">
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:03:42.440

您应该使用正斜杠指定图像 src 路径。例如。

```
<img alt="" src="images/title_903x600.jpg"> 
```

代替

```
<img alt="" src="images\title_903x600.jpg"> 
```

正如您当前指定的那样。

这解决了Firefox的问题。Chrome 非常聪明 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T19:14:03.233

在旁注中，我喜欢你的摄影，但它似乎加载缓慢，也许看看 jquery 预加载功能。

```
$.fn.preload = function() {
this.each(function(){
    $('<img/>')[0].src = this;
}); 
```

}

// 用法：

$(['img1.jpg','img2.jpg','img3.jpg']).preload();

# c - “realloc()：下一个大小无效”

> ID：13995441
> 
> 赞同：2
> 
> 时间：2012-12-21T18:37:23.573
> 
> 标签：c

*或者：[Facing an error — glibc detected free invalid next size (fast) 的](https://stackoverflow.com/questions/2317021/facing-an-error-glibc-detected-free-invalid-next-size-fast)副本。*

当我编译并运行此代码时，我收到一条错误消息：“realloc(): invalid next size: 0x0000000002483010”

在过去的 6 个小时里，我一直在努力寻找解决方案，但没有任何运气..

这是我的代码的相关部分-

```
#include<stdio.h>
#include<stdlib.h>

typedef struct vertex
{
    char* name;
    int id;
    int outDegree;
}vertex;

int main(){
    vertex *tmpVertice;
    vertex *vertices = (vertex*)calloc(1, sizeof(vertex));
    int p=1;
    while(p<20){
        vertex temp={"hi",p,0};
        vertices[p-1]=temp;
        tmpVertice=(vertex*)realloc(vertices,p);
        if(tmpVertice!=NULL) vertices=tmpVertice;
        p++;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T18:39:06.920

[如果需要， realloc](http://linux.die.net/man/3/realloc)会释放任何先前的缓冲区，因此循环中的行`free(vertices)`和行`free(tmpVertice)`是错误的，应该被删除。

编辑：我在下面包含了您的程序的更新版本以及进一步的修复。你需要`realloc` `p*sizeof(vertex)`而不是`p`字节。你正在写超出数组的末尾然后增长它。我`realloc`在循环开始时改为

```
int main(){
    vertex *tmpVertice;
    vertex *vertices = NULL;
    int p=1;
    while(p<20){
        vertex temp={"hi",p,0};
        tmpVertice=realloc(vertices,p*sizeof(vertex));
        if(tmpVertice==NULL) {
            printf("ERROR: realloc failed\n");
            return -1;
        }
        vertices=tmpVertice;
        vertices[p-1]=temp;

        p++;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:38:34.043

在第一次迭代中，您将访问`vertices[p-1] = vertices[2-1] = vertices[1]`，但您仅分配 1 个字节（您只能访问 vertices[0]）。

# python - 将带有 html/css/js 前端的 python 应用程序打包为单个可执行文件

> ID：13995455
> 
> 赞同：3
> 
> 时间：2012-12-21T18:39:15.293
> 
> 标签：python, webkit

我有一个小型应用程序，它有一个 html/css/js 前端（由其他人编写）和一个通过烧瓶运行小型 WSGI 服务器的 python 后端。目前 python 端与 py2exe 捆绑在一起，前端分布在旁边。

但是，如果可以以某种方式从 python 调用 WebKit（或其他一些支持 canvas/css3 的浏览器渲染器）来启动 html 前端，而不需要通常的浏览器 chrome 来给人一种它不是网络应用程序的印象，那就更好了。 “真正的本地应用程序”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T21:16:46.013

正如评论中提到的，QT 有一个`qtwebkit`模块，并且在 python 中有几个 QT 绑定，其中最主要的是 PyQt4。但是，PyQt4 是根据 GPL 或付费专有许可证获得许可的。诺基亚开发了自己的名为[PySide](http://qt-project.org/wiki/Category%3aLanguageBindings%3a%3aPySide)的 python 绑定，可用于通过`qtwebkit`模块将 webkit 嵌入到 python 应用程序中。

# c# - 从 IValueConverter 获取对代码隐藏类实例的引用

> ID：13995456
> 
> 赞同：2
> 
> 时间：2012-12-21T18:39:23.520
> 
> 标签：c#, reference, code-behind, windows-phone-8

我有这个代码：

```
namespace Test
{
    public partial class SearchField : UserControl
    {
        public SearchStrategy Strategy { get; set; }
        public SearchField() { InitializeComponent(); }
    }

    public class TextToTipConverter : IValueConverter
    {
        public object Convert(object value, Type targetType,
            object parameter, CultureInfo culture)
        {
            SearchStrategy Strategy = // How do I get reference to SearchField.Strategy from here?

            return Strategy.parseInput<string> (value.ToString(), (first, inp) => Strategy.tipMap.ContainsKey(first) && inp.Length == 1 ? first + Strategy.tipMap[first] : "", AppResources.GeneralSearchTip);
        }

        public object ConvertBack(object value, Type targetType,
            object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

XAML 中的代码：

```
<UserControl.Resources>
        <controls:TextToTipConverter x:Key="TextToTip" />
</UserControl.Resources>
...
<TextBox x:Name="Search" Grid.Column="0" Canvas.ZIndex="1" 
                 Style="{StaticResource SearchBoxStyle}" Foreground="{StaticResource PhoneForegroundBrush}" />

<TextBox x:Name="Tip" Grid.Column="0" Canvas.ZIndex="0" IsReadOnly="True"
                 Style="{StaticResource SearchBoxStyle}" Opacity="0.5" Foreground="{StaticResource PhoneAccentBrush}"
                 Text="{Binding ElementName=Search, Converter={StaticResource TextToTip}, Path=Text}" /> 
```

`SearchField`'s`SearchStrategy Strategy`有一些我需要从中访问的方法和字段`TextToTipConverter`。我怎样才能得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:16:47.620

SearchField.xaml 是视图，SearchField.xaml.cs 是背后的代码。您可以在 msdn 上阅读有关 MVVM、数据绑定和 ViewModel 的信息。您可以创建一个名为 ViewModel 的类，您将在其上绑定您的数据。例如，想象以下类：

```
public class SearchViewModel : INotifyPropertyChanged
{
    public string Text { get; set; }
    public SearchStrategy Strategy { get; set; }
} 
```

您的 SearchField.xaml.cs 将是：

```
public partial class SearchField : UserControl
{
    private SearchViewModel viewModel;

    public SearchField() 
    {
        this.viewModel = new SearchViewModel ();
        this.DataContext = this.viewModel;
    }
} 
```

现在在你的 xaml 中，

```
TextBox x:Name="Search" Text="{Binding Text}" 
```

将 viewModel 中的数据与 TextBox 绑定，您将能够：

```
TextBox x:Name="Tip" Text="{Binding, Converter={StaticResource TextToTip}, Path=Text}" 
```

在转换器中，名为 value 的参数将是您可以在其上获取属性的视图模型：

```
SearchViewModel vm = (SearchViewModel) value;
vm.Strategy;
vm.Text 
```

我不知道我是否清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:23:39.017

我认为与其将提示文本框直接绑定到搜索文本框，不如尝试在搜索文本框和 SearchFieldViewModel 中的属性之间创建双向绑定。这将导致对搜索文本框的更改自动下推到 SearchFieldViewModel。

一旦搜索字符串位于 SearchFieldViewModel 中，您就可以将其与 SearchStrategy 捆绑到 TipViewModel 中，并将 TipViewModel 用作您的 Tip 文本框的 DataContext。请参阅下面的代码。

**搜索字段.xaml**

```
<UserControl x:Class="SilverlightApplication.SearchField"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:SilverlightApplication"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <UserControl.Resources>
        <local:TextToTipConverter x:Key="TextToTip" />
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="White">
        <TextBox x:Name="Search" Grid.Column="0" Canvas.ZIndex="1" Text="{Binding Path=SearchString, Mode=TwoWay}"
                 Style="{StaticResource SearchBoxStyle}" Foreground="{StaticResource PhoneForegroundBrush}" />

        <TextBox x:Name="Tip" Grid.Column="0" Canvas.ZIndex="0" IsReadOnly="True"
                 Style="{StaticResource SearchBoxStyle}" Opacity="0.5" Foreground="{StaticResource PhoneAccentBrush}"
                 Text="{Binding Path=TipViewModel, Converter={StaticResource TextToTip}}"/>
    </Grid>
</UserControl> 
```

**SearchField.xaml.cs**

```
public partial class SearchField : UserControl
{
   public SearchField()
   {
       InitializeComponent();

       this.Loaded += (s, e) => this.LayoutRoot.DataContext = new SearchFieldViewModel();
    }
} 
```

**SearchFieldViewModel.cs**

```
public class SearchFieldViewModel
{
    public string SearchString { get; set; }
    public SearchStrategy SearchStrategy { get; set; }

    public TipViewModel TipViewModel
    {
        get
        {
            return new TipViewModel
            {
                SearchString = this.SearchString,
                SearchStrategy = this.SearchStrategy
            };
        }
    }
} 
```

**TipViewModel.cs**

```
public class TipViewModel
{
    public string SearchString { get; set; }
    public SearchStrategy SearchStrategy { get; set; }
} 
```

**TextToTipConverter.cs**

```
public class TextToTipConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        TipViewModel tipViewModel = value as TipViewModel;
        SearchStrategy strategy = tipViewModel.SearchStrategy;
        string searchString = tipViewModel.SearchString;

        return Strategy.parseInput<string>(searchString , (first, inp) => strategy.tipMap.ContainsKey(first) && inp.Length == 1 ? first + strategy.tipMap[first] : "", AppResources.GeneralSearchTip);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T18:49:14.420

将您的 SearchStrategy 放入您的 ViewModel 并使用 Binding 传递它。我不知道我是否回答了你的问题，请提供更多信息

# java - KeyAdapter 在 JPanel 类中不起作用，但在 JFrame 类中起作用

> ID：13995458
> 
> 赞同：4
> 
> 时间：2012-12-21T18:39:33.520
> 
> 标签：java, swing

**背景**
我正在建立一个游戏库，以使游戏开发更快，目前进展相当顺利。

我有以下内容：

*   主要入门类`public static void main(String[] args)`
    *   然后这个类从我的库中启动一个名为`Game`
    *   然后设置窗口大小并将 a 添加`Room`到`JFrame`
*   当一个可扩展的`Room`（房间是一个游戏级别）类被创建时，它会从房间启动一个线程来绘制所有添加到它的对象。
    *   对象可以添加事件（我坚持的部分）

以上就是主要思想的含义。

这是入门类（非常简单）。

```
package test;

import JGame.Game.Game;
import JGame.Room.Room;
import javax.swing.JFrame;
import test.Rooms.Room1;

public class Main extends JFrame{

    public static void main(String[] args){
        Game game = new Game("Test Game"); // This sets the window title
        game.start(800, 600); // This sets the size of the window

        Room room1 = new Room1();
        game.setRoom(room1);  // adds the JPanel to the main frame
    }
} 
```

`Room1`延伸`Room`。在`Room1`与该房间关联的所有游戏对象中都添加到其中。

```
public class Room extends JPanel implements Runnable{
    ArrayList<GameObject> gameObjects = new ArrayList<>();
    @Override
    public void run(){
        try{
            while(true){
                this.repaint();
                Thread.sleep(5);
            }
        }
    }
    public void addGameObjectAt(GameObject gameObject, int x, int y){
        // Sets private variables in GameObject
        // These are then grabbed in the paintComponent to draw at that location
        gameObject.setX(x); 
        gameObject.setY(y);
        gameObjects.add(gameObject);
    }
    @Override
    public void paintComponent(Graphics g){
        g.drawImage(bg, 0, 0, this);
        for(int i = 0; i < gameObjects.size(); i++){
            GameObject go = gameObjects.get(i);
            g.drawImage(go.getSprite(), go.getX(), go.getY(), this);
        }
    }
} 
```

假设我们创建了一个房间：

```
public class Room1 extends Room{
    public Room1(){
        this.createShip();
    }
    public void createShip(){
        Ship = new Ship();
        // Add an object to a list setting its x,y to 10,10
        this.addGameObjectAt(ship, 10, 10);
    }
} 
```

**注意：**这些对象不会添加到窗口中，`addGameObjectAt`它们只是简单地添加到一个`ArrayList`，然后在 Room 中的线程中绘制到屏幕上。

现在我们添加`Ship`了房间，可以使用`paintComponent()`. 这一切都很好！

这是事情开始停止工作的地方。现在我们`Ship`添加了一个类，我想添加一些关键事件，目前我必须添加`Main`它们才能工作，但我不想在那里添加它们，因为它会变得混乱，我想将它们添加到`Ship`，因为这就是事件最终会产生的影响。

此代码未附加 keylistener

```
// GameObject extends JPanel
public class Ship extends GameObject{
    public Ship(){
        this.addKeyListener(new AL());
    }

    public class AL extends KeyAdapter{

        @Override
        public void keyPressed(KeyEvent evt){
            System.out.println("here");
        }

        @Override
        public void keyReleased(KeyEvent evt){
        }
    }
} 
```

这不起作用，按一个键不会在**此处**打印出来，但是如果我将`AL`班级和班级移动`addKeyListener()`到班级，`Game`它可以工作，但我不想在`Game`班级中使用它，我希望在`Ship`班级中使用它。

```
// This class just sets up the size of the application window
// It also holds an int list of all the game rooms
public class Game extends JFrame{

} 
```

我已经尝试解决这个问题至少一个星期了，但我似乎无法弄清楚我怎样才能得到这个以便它在`Ship`课堂上工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:51:01.673

`JPanel`不是可聚焦的组件，因此无法与`KeyEvents`.

在 Swing 中，首选方法是使用[Key Bindings](http://download.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。即使组件没有焦点，您也可以将 Action 映射到 KeyStroke。

看这个[例子](http://tips4java.wordpress.com/2008/10/10/key-bindings/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:51:06.650

我认为您需要使 JPanel 具有焦点。尝试 ship.setFocusable(true);

# c++ - 错误 LNK2001：无法解析的外部符号“int * array”

> ID：13995460
> 
> 赞同：1
> 
> 时间：2012-12-21T18:39:50.673
> 
> 标签：c++, external

当我尝试编译它时，我遇到了这个错误，我真的不知道该怎么办。也许你可以帮我解决这个问题。

主要.cpp：

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <list>
using namespace std;

list<int> liste;
int size=0;

void list_initialization(){
    cout << "Quicksort" << endl << endl;
    cout <<"List Initialization" << endl;
    while ((size<1)||size>100){
        cout << "Please enter the size (between 1 and 100)" << endl;
        cin >> size;
    }
    srand ( time(NULL) );
    for (int i=0; i<size; i++){
        liste.push_back(rand() %100 +1);
    }
}

void list_display(){
    cout << endl;
    for (list<int>::const_iterator ite=liste.begin(), end=liste.end(); ite!=end; ++ite)
            cout << *ite << " ";
    cout << endl;
}

int choose_pivot( int const& left, int const& right){
    int pivot;
    pivot = rand()%(right-left) + left ;
    return pivot;
}

int partition(int left, int right, int pivotIndex){

    //We Save pivotValue
    list<int>::iterator itPivotIndex = liste.begin();
    advance (itPivotIndex, pivotIndex);
    int pivotValue = *itPivotIndex;

    //Those 2 iterators will be used to swap 2 elements
    list<int>::iterator itSwap1 = liste.begin();
    list<int>::iterator itSwap2 = liste.begin();

    //2 iterators to point left and right elements
    list<int>::iterator itLeft = liste.begin();
    advance (itLeft, left);
    list<int>::iterator itRight = liste.begin();
    advance (itRight, right);

    //1 iterator to point the StoreIndex
    list<int>::iterator itStoreIndex=itLeft;

    //Move Pivot to End
    advance(itSwap1, pivotIndex);
    advance(itSwap2, right);
    swap(*itSwap1, *itSwap2);

    //Move all elements less than pivotValue before the pivot

    for(list<int>::iterator it=itLeft; it!=itRight; it++)
        if (*it < pivotValue){

            //Swap array[k] and array[storeIndex]
            itSwap1=it;
            itSwap2=itStoreIndex;
            swap(*itSwap1, *itSwap2);

            itStoreIndex++;
        }

    //Move pivot to its final place
    swap(*itStoreIndex, *itRight);

    return (distance(liste.begin(), itStoreIndex));
}

void quicksort (int left, int right){

    int pivotNewIndex=0;
    list<int>::iterator ite=liste.begin();

    if (left < right){

        int pivotIndex = choose_pivot(left,right);
        advance (ite,pivotIndex);
        cout << "The pivot is " << *ite <<endl;

        pivotNewIndex = partition(left, right, pivotIndex);

        list_display();
        cout << endl;

        // Recursively sort elements smaller than the pivot
    quicksort(left, pivotNewIndex - 1);

        // Recursively sort elements at least as big as the pivot
    quicksort(pivotNewIndex + 1, right);
    }

}

int main()
{
    list_initialization();
    list_display();
    cout << endl;

    int left=0;
    int right=size-1;

    quicksort(left, right);
    cout << "Sorted List :";
    list_display();

    cout << endl;
    return 0;

} 
```

快速排序.cpp：

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <list>
using namespace std;

 extern int array [];

int selectPivot( int const& left, int const& right);
int Partition(int left, int right, int pivotIndex);
void sorting (int left, int right);

int selectPivot( int const& left, int const& right){
    int pivot;
    pivot = rand()%(right-left) + left ;
    return pivot;
}

int Partition(int left, int right, int pivotIndex){

    int temp=0;
    int storeIndex=left;
    int pivotValue = array[pivotIndex];

    temp=pivotValue;
    pivotValue=array[right];
    array[right]=temp;

    for (int k=left; k<right; k++)
        if (array[k] < pivotValue){

            temp=array[k];
            array[k]=array[storeIndex];
            array[storeIndex]=temp;

            storeIndex++;
        }

    temp = array[storeIndex];
    array[storeIndex]=array[right];
    array[right]=temp;

    return storeIndex;
}

void sorting (int left, int right){

    int pivotNewIndex=0;

    if (left < right){

        int pivotIndex = selectPivot(left,right);

        pivotNewIndex = Partition(left, right, pivotIndex);

        sorting(left, pivotNewIndex - 1);

        sorting(pivotNewIndex + 1, right);
    }

} 
```

-------------- 1>------构建开始：项目：实用2，配置：调试Win32 ------ 1>正在编译... 1>quicksort.cpp 1>链接... 1>quicksort.obj : 错误 LNK2001: 无法解析的外部符号“int * array” (?array@@3PAHA) 1>C:\Users\Amed\Documents\Visual Studio 2008\Projects\practical2\Debug \practical2.exe : 致命错误 LNK1120: 1 unresolved externals 1>构建日志保存在“file://c:\Users\Amed\Documents\Visual Studio 2008\Projects\practical2\practical2\Debug\BuildLog.htm”1 >practical2 - 2 个错误，0 个警告 ========== 构建：0 个成功，1 个失败，0 个最新，0 个跳过 ========= =

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:41:57.510

您在 中写`extern int array[]`了`quicksort.cpp`，但实际上并没有在任何地方定义它。有一个未解析的符号，因为它在任何地方都不存在，所以链接器找不到它来解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T02:50:06.693

您可以通过将其更改为来修复未解析的*外部*： int array[1024];

注：1024 是任意选择的数组维度。选择静态定义的 C 样式数组的维度有时很棘手。您可以通过切换到像标准库的 std::vector 类这样的动态结构来避免这个问题： std::vector nameOtherThanArray; // ;)

Naming the (global) variable "array" is probably too genetic to impart expected use in addition to possibly clashing with names in other libs. I did not attempt to code review the rest but if I were writing a real general purpose method, I'd want to pass in the structure being manipulated, or if it's just a temporary helper, declare it locally. Of course, like I said I didn't closely examine the rest of the code so your way may make sense for other reason.

# nhibernate - NHibernate：映射引用

> ID：13995462
> 
> 赞同：1
> 
> 时间：2012-12-21T18:40:02.467
> 
> 标签：nhibernate, join, mapping

本质上，我正在尝试使用 NHibernate 执行以下操作（试图使其易于理解）：

```
SELECT p.*
FROM ChildTable c
INNER JOIN ParentTable p ON p.Id = c.ParentId AND p.Language = :language 
```

我当然希望`p.*`作为`ParentObject`.`ChildObject`

ChildTable 没有 Language 列。因此 :language 被视为程序中的常量。

我正在考虑创建一个从 c.ParentId 转换为 ParentObject 并再次返回的 UserType（转换取决于：语言）。

那可能吗？

我已经为别的东西做了一个简单的 IntToString IUserType。

`session.Get<ParentClass>(idLangIndexObject)` 那么我会在该方法中做一个正常的操作，`NullSafeGet`还是会对任何`IUserType`内部结构产生影响？

我也尝试过这样做`ApplyFilter()`（`ParentClassMapping`试图只减少一种：语言），但`References()`似乎在内部使用 Get，而 Get 忽略`ApplyFilter()`

还有其他更优雅的想法吗？

一定有办法，毕竟这不是火箭科学。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T23:23:46.047

您所拥有的是从孩子到父母的一对多或多对多关系（不是多对一），因为每个孩子显然可以有多个父母。将其映射为集合以正确反映这一点，并且集合负载将考虑过滤器。

# linux - fsync 系统调用如何在 linux 中工作？

> ID：13995466
> 
> 赞同：11
> 
> 时间：2012-12-21T18:40:10.850
> 
> 标签：linux

当 write 调用返回时，数据被复制到内核管理的某个页面上。该页面可以包含来自多个进程的写入。因此，当其中一个应用程序发出 fsync 调用时，这是否会导致刷新整个页面，这意味着也会刷新其他应用程序的数据，但调用 fsync 的进程会产生成本。这个对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T19:09:42.980

`fsync`对单个文件进行操作。它将刷新对该文件所做的*所有更改。*如果多个进程正在写入单个文件，则进行`fsync`调用的进程将暂停，直到*所有*更改都写入磁盘。

当某些日志文件系统发挥作用时，这会更加复杂。例如，具有“有序”模式的 ext3 和 ext4（在较小程度上）需要在日志中的 fsync 文件之前刷新对*所有文件的所有更改。*

这意味着，如果程序一直在写入大型数据库、大型日志文件或视频文件，然后`fsync`是两行配置文件，则`fsync`必须等待所有这些兆字节的数据写入后才能返回。

这就是为什么我在“写回”模式下运行我的 ext4 的原因，这可能会在崩溃后产生一些不愉快的后果，例如文件大小正确但填充为零。但在正常操作中，“写回”要快得多，我觉得这种权衡是值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:51:32.970

手册页状态`'flushes to disk any data written to this file'` 包括文件元数据。

`sync` 我认为您将其与将整个缓存中的所有脏页写入磁盘相混淆。脏页 == 更改数据。这个过程必须等待所有这些完成。如果成本是指等待，那么是的，这会产生成本。内核时间被添加到进程系统时间资源使用中。

fsync 也会产生成本，加上比同步（通常）少得多的内核时间。

# map - Openlayers并且在弹出窗口中不可见标记

> ID：13995468
> 
> 赞同：2
> 
> 时间：2012-12-21T18:40:47.603
> 
> 标签：map, popup, openlayers, marker

我的 OpenLayers 地图有一个问题。当我单击地图上的标记时，它将显示弹出窗口，但在此弹出窗口上方仍然可见其他标记。

如何以正确的方式做到这一点？

```
 fromProjection = new OpenLayers.Projection("EPSG:4326"); 
    toProjection   = new OpenLayers.Projection("EPSG:900913"); 

    markers = new OpenLayers.Layer.Markers( "Markers" );

    markers.events.register('mouseover', markers, function(evt) {
        popup = new OpenLayers.Popup.FramedCloud("Popup",
                new OpenLayers.LonLat(Tlon,Tlat).transform( fromProjection, toProjection),
            null,
            '<span style="z-index:99999;background:red;">sdf</span>',
            null,
            false);
        map.addPopup(popup);
    });

    markers.events.register('mouseout', markers, function(evt) {popup.hide();});

    map.addLayer(markers);
    markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(Tlon,Tlat).transform( fromProjection, toProjection),icon)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:35:05.463

如果没有要测试的 URL，我无法确定，但您可能需要为添加到地图的每个标记克隆图标。从文档：

> 请注意，如果您将图标传递给 Marker 构造函数，它将获取该图标并使用它。这意味着你不应该在标记之间共享图标——你只使用一次，但是你应该 clone() 用于使用相同图标的任何其他标记。

# java - 共享 SimpleChannelHandler 网络

> ID：13995469
> 
> 赞同：0
> 
> 时间：2012-12-21T18:41:04.353
> 
> 标签：java, performance, netty, shared

首先，感谢您回答这个问题。

我一直在寻找我的问题的答案，但糟糕的是没有：/

您认为它对于 NIO 环境（NETTY）有更好的性能：

每次连接到达时实例化 HandlerClass 还是使用共享的 HandlerClass ？IE：

* * *

```
...getPipeline() {
    pipeline = ...;
   pipeline.addLast("handler", new HandlerClass());
} 
```

* * *

## 或者：

```
private handlerClass handler = new HandlerClass();
...getPipeline() {
    pipeline = ...;
   pipeline.addLast("handler", this.handler);
} 
```

我的游戏服务器将收到超过 1000 个连接，这是我担心的事情。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:59:59.610

在我看来，您正在为您的处理程序创建一个池系统。假设一个处理程序一次只能处理一个请求，并且您的应用程序是高度并发的。这样，您可以将处理程序对象实例化在内存中以获得更好的性能。

我在使用 pool4j 时遇到了一些运气。如果这对您不起作用，您最好编写自己的池。

[http://code.google.com/p/pool4j/](http://code.google.com/p/pool4j/)

此外，poolit 是一个更通用的库，我没有亲自使用过，但我听说过一些好东西：http: [//programming.huyduong.com/poolit/index.html](http://programming.huyduong.com/poolit/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:04:29.407

这很容易......如果您的 SimpleChannelHandler 没有存储在 vars 中的状态，请重用它。他用他的方式消除了新类的初始化成本，也减少了 GC 压力。

# backbone.js - Backbone.js“on”函数中上下文（最后一个参数）的默认值是什么？

> ID：13995471
> 
> 赞同：2
> 
> 时间：2012-12-21T18:41:18.710
> 
> 标签：backbone.js

我永远无法真正弄清楚backbone.js`.on()`函数中的第三个参数是做什么的（假设是上下文）：

```
this.model.on('change', this.doStuff, context); 
```

根据：[Backbone.js on()，最后this指的是什么？](https://stackoverflow.com/questions/13415138/backbone-js-on-what-does-the-last-this-refer-to)似乎它设置了`this`里面的值，有人可以举个例子说明上下文应该是什么。我通常`on`在没有上下文的情况下使用，它似乎引用了 view `this`，但有时它引用了其他东西（我无法弄清楚）。

那么Backbone`context`默认设置的逻辑是什么？你什么时候不想`this`引用视图？有没有办法让它总是引用视图而不指定`this`为上下文参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T19:13:22.153

如果您查看[`on`源代码](http://backbonejs.org/docs/backbone.html#section-15)，您会看到默认值`context`是什么：

```
on: function(name, callback, context) {
  //...
  events.push({callback: callback, context: context, ctx: context || this});
  //...
}, 
```

因此，默认值`context`是调用的任何对象`on`：`ctx: context || this`. 所以，如果你只是说：

```
model.on('event', this.callback); 
```

然后`this`会在它被调用时在`model`里面。`callback`如果您想`this`成为视图，那么您可以这样说：

```
// Inside a view...
model.on('event', this.callback, this); 
```

或者您`callback`使用[`_.bind`](http://underscorejs.org/#bind), [`_.bindAll`](http://underscorejs.org/#bindAll), [`Function#bind`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind),[`$.proxy`](http://api.jquery.com/jQuery.proxy/)等创建绑定函数。

为什么要指定一个`context`？好吧，在作为视图方法的回调中，您可能希望`this`成为视图，并且`on`在调用时无法知道视图是什么`on`：您无法展开堆栈以找出`this`某处的内容调用链，即使你可以，你也不知道在哪里停下来。所以使用`x`in`x.on(...)`是唯一合理的默认值，如果你想要别的东西，你可以很容易地说出来。

# c++ - 为丢失的设备安装驱动程序

> ID：13995473
> 
> 赞同：0
> 
> 时间：2012-12-21T18:41:21.730
> 
> 标签：c++, device-driver

我有一个 PC/104 传感器的设备驱动程序。我想在设备到达之前开始开发代码（a），以及（b）在设备不会连接到的机器上。我有驱动程序“磁盘”（实际上是一个 .zip 文件）。

我的操作系统是 Windows 7 Professional；目标操作系统是 Windows 7 Embedded 或 Windows XP Embedded。（SBC 也尚未到来。）

我发现有人想在构造设备之前编写设备驱动程序（[没有设备的设备驱动程序？](https://stackoverflow.com/questions/3750282/device-driver-without-the-device)），但在这里我有一个商业设备驱动程序并想安装（至少）.dll 和 .h 文件在设备到达之前。

这台机器上的IDE是C++builder；我不知道目标机器上的 IDE 是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:22:40.280

您需要做的可能有两个部分：-

a ：安装 Windows 驱动程序，使操作系统能够识别设备。如果没有实际连接的设备，您将无法做到这一点。但是，我不确定您的设备是否真的需要这个，或者您是否有真正的 Windows“设备驱动程序”

b：为设备安装“SDK”，以便您可以开始编写代码。“.h”文件是`#include`您编写的任何程序都需要的 C 或 C++ 头文件。通常，您只需将其放在包含搜索路径中即可。您可能还会有一个 DLL，您必须将其与您的程序可执行文件一起提供，该可执行文件可以直接与设备通信，也可以通过安装在 a: 中的驱动程序与设备通信。

您还需要为 C++ 构建器创建一个库文件，以允许您“链接”到 DLL。C++Builder 有一个`IMPLIB`用于此目的的命令行工具，并且为 Visual Studio 构建的 .lib 文件不直接兼容。

# c - 没有括号的 for 循环的绝对范围是什么？

> ID：13995474
> 
> 赞同：4
> 
> 时间：2012-12-21T18:41:25.940
> 
> 标签：c, scope

我有一个程序使用 for 循环来检查条件语句并对数据集运行测试，其中大多数是一个`if`可能分支的线性语句。我的问题是带括号的 for 循环如何决定范围内和范围外的内容？例如：

我的程序中的一个 for 循环：

```
for( i =0; i < (sizeof(exact_roots) / sizeof(bn_comlplex)); i++){
        if(fabs(roots[k].re - exact_roots[i].re) < 0.00001 && fabs(roots[i].im - exact_roots[i].im) < 0.00001)
            rootmatch++;
} 
```

在这种情况下需要括号吗？for 循环会将第三行视为 for 循环的一部分还是将其丢弃并给我一个编译错误？

没有括号的 for 循环的极端情况怎么样，循环如何处理它？

```
for(i = 0; i < num; i++)
    if(something)
        ....
    else //is this still considered apart of the loop?
        .... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:42:33.493

```
for(i = 0; i < num; i++)
    if(something)
        ....
    else //is this still considered apart of the loop?
        .... 
```

是的，它仍然是循环的一部分。整个`if () .... else ...`构造是一个语句。

但是使用牙套可以减轻您的担忧。使用大括号，可以立即清楚范围是什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T18:42:30.957

只有下一条语句是循环的一部分。

在您的示例中，这`if ... else ...;`是一个声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:15:18.087

我们可以变得非常极端：

```
for( i =0; i < (sizeof(exact_roots) / sizeof(bn_comlplex)); i++)
        if(fabs(roots[k].re - exact_roots[i].re) < 0.00001 && fabs(roots[i].im - exact_roots[i].im) < 0.00001)
            rootmatch++;
        else if (something)
           if (someother)
               do_stuff1();
           else if (third things)
                   do_stuff2()
                else
                   do_another();
        else
            do_failed(); 
```

当然，如果我对它进行代码审查，除非它有大括号，否则我不会接受它，因为很快你就会混淆哪个 if 在哪个里面，以及你在哪里结束了 else。

出于这个原因，我几乎总是在所有 if/while 内容周围使用大括号。使代码更容易阅读，如果易于阅读，则易于维护。

当然，当您突然决定在其中一个 if 语句中添加 "printf("x = %d\n", x); 时，添加额外的大括号会有所帮助，然后必须添加额外的大括号以确保您得到想要的效果并且没有编译器错误。

多余的[在合理范围内]大括号绝对没有错。它们不会增加执行时间，并且只在源代码中额外占用几个字节。当然，除非您将补丁发布到 linux 内核邮件列表，否则额外的大括号会导致代码被拒绝。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T18:51:25.470

如果没有大括号，则只能在 for、if 和 else 语句下执行一个语句。大括号允许您包含一组复合语句并使您的代码更具可读性。

# javascript - 如果 q 不等于任何东西，则使 s 不等于任何东西 Javascript

> ID：13995478
> 
> 赞同：0
> 
> 时间：2012-12-21T18:42:05.903
> 
> 标签：javascript

这个问题得到了回答。但是stackoverflow不会让我问其他问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:45:25.197

声明 s 并将其默认设置为空字符串。如果 q1 不为空，则为 s 赋值。否则 s 仍然是一个空字符串。稍后在您的代码中，您可以将您的文本框设置为填充 s，如果 q1 为空，s 也将是，所以那里不会显示任何内容。

```
//declare s and set it to default to an empty string
var s = ''
//make sure q1 is defined and not null
if (q1 != undefined && q1 != null)
   //if q1 is not empty, then set it equal to '_'+n1+'. '+q1, 
   //otherwise s will be an empty string
   if (q1 != '')
       s = '_'+n1+'. '+q1
//if s is empty you can do something, 
//OR you can just set your input value to equal s
if (s == '')
    //do some stuff here 
```

# sql - Postgres 查询花费的时间比预期的要长，即使在字段上有索引

> ID：13995479
> 
> 赞同：3
> 
> 时间：2012-12-21T18:42:26.503
> 
> 标签：sql, performance, postgresql

我正在优化存储来自日志文件的信息的 Postgres 表。

这是查询：

```
SELECT c_ip as ip
     , x_ctx as file_name
     , date_time
     , live
     , c_user_agent as user_agent 
FROM events 
WHERE x_event = 'play' 
  AND date = '2012-12-01' 
  AND username = 'testing' 
```

x_event、日期和用户名上有 b 树索引。在这个表中，大约有 2500 万行。现在查询大约需要 20-25（更正，更像是 40）秒，并返回 143,000 行。

那个时间是预期的吗？由于索引，我会认为它会更快。也许是因为它必须通过大量的数据？

编辑：这是解释分析：

```
Bitmap Heap Scan on events  (cost=251347.32..373829.74 rows=35190 width=56) (actual time=5768.409..6124.313 rows=143061 loops=1)
  Recheck Cond: ((date = '2012-12-01'::date) AND (username = 'testing'::text) AND (x_event = 'play'::text))
  ->  BitmapAnd  (cost=251347.32..251347.32 rows=35190 width=0) (actual time=5762.083..5762.083 rows=0 loops=1)
        ->  Bitmap Index Scan on index_events_fresh_date  (cost=0.00..10247.04 rows=554137 width=0) (actual time=57.568..57.568 rows=572221 loops=1)
              Index Cond: (date = '2012-12-01'::date)
        ->  Bitmap Index Scan on index_events_fresh_username  (cost=0.00..116960.55 rows=6328206 width=0) (actual time=3184.053..3184.053 rows=6245831 loops=1)
              Index Cond: (username = 'testing'::text)
        ->  Bitmap Index Scan on index_events_fresh_x_event  (cost=0.00..124112.84 rows=6328206 width=0) (actual time=2478.919..2478.919 rows=6245841 loops=1)
              Index Cond: (x_event = 'play'::text)
Total runtime: 6148.313 ms 
```

我对此有几个问题：

1.  我对日期索引中有 554137 行是否正确？那里应该有少于 50 个日期。
2.  我怎么知道它正在使用列出的三个索引？
3.  列出的总运行时间约为 6 秒，但当我运行不带 EXPLAIN ANALYZE 的查询时，大约需要 40 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:03:54.593

如果 5.7 秒不够好，您可以尝试多列索引：

```
create index index_name on events(user_name, date, x_event) 
```

我将 user_name 放在第一位，因为我猜它是具有最高[基数](http://en.wikipedia.org/wiki/Cardinality_%28SQL_statements%29)的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:01:20.147

首先，正如 Scott Marlowe 所说，查询只需要 6 秒即可运行，剩下的就是传输时间。没有解释分析似乎更慢，因为结果比解释分析输出的十行大得多，因此传输时间更长。如果您打开查询日志并运行此查询，您可能会在日志中发现没有解释分析的查询运行得更快（解释分析会减慢速度）。顺便说一句，如果您使用的是 pgadmin，它本身就很慢。

至于日期索引pg中的行数是对的。即使您只有 50 个不同的值，所有行都将在索引中。当然，btree 部分本身仅包含 50 个不同的值，但在每个叶值下，它将具有该值的所有行的列表。当然存在带有 where 子句的索引的特殊情况，它只包含与 where 子句匹配的行，但我不希望您使用它对吗？

它使用了解释分析输出中列出的所有索引。在这种情况下，它将每个索引转换为一个位图，其中每一行的位集都与该索引扫描的标准相匹配。这三个位图可以很快地组合成一个包含组合标准结果的位图。

# c# - WPF TextBox 移动光标和更改焦点

> ID：13995489
> 
> 赞同：2
> 
> 时间：2012-12-21T18:43:17.230
> 
> 标签：c#, .net, wpf, mvvm, textbox

这是一个奇怪的，我什至不知道要搜索什么，但相信我，我有。

我有一个文本框，绑定到它的`OnTextChanged`事件是下面的方法。

此处的目的是为文本框提供焦点，将光标移动到 TextBox 的末尾并将焦点返回到实际焦点所在的位置（通常是按钮）。问题是在我将焦点发送回最初聚焦的元素之前，似乎 TextBox 没有“重绘”（因为没有更好的词？），因此光标位置不会在屏幕上更新（尽管所有属性都认为它有） .

目前，我已经粗暴地破解了这个，基本上将前一个焦点项目的重新聚焦延迟了 10 毫秒，并在不同的线程中运行它，以便 UI 有时间更新。现在，这显然是任意时间，并且在我的机器上运行良好，但是在旧机器上运行此应用程序的人可能会遇到问题。

有没有合适的方法来做到这一点？我想不通。

```
private void TextBoxBase_OnTextChanged(object sender, TextChangedEventArgs e)
{
    if (sender == null) return;
    var box = sender as TextBox;

    if (!box.IsFocused)
    {

        var oldFocus = FocusManager.GetFocusedElement(FocusManager.GetFocusScope(this));
        box.Select(box.Text.Length, 0);
        Keyboard.Focus(box); // or box.Focus(); both have the same results

        var thread = new Thread(new ThreadStart(delegate
                                                    {
                                                        Thread.Sleep(10);
                                                        Dispatcher.Invoke(new Action(() => oldFocus.Focus()));
                                                    }));
        thread.Start();
    }
} 
```

**编辑**

我的一个新想法是在 UI 完成更新后运行 oldFocus.Focus() 方法，所以我尝试了以下方法，但得到了相同的结果:(

```
var oldFocus = FocusManager.GetFocusedElement(FocusManager.GetFocusScope(this));

Dispatcher.Invoke(DispatcherPriority.Send, new Action(delegate
 {
   box.Select(box.Text.Length, 0);
   box.Focus();
 }));

Dispatcher.Invoke(DispatcherPriority.SystemIdle, new Action(() => oldFocus.Focus())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:09:57.117

你在正确的轨道上，问题是你的`.Focus()`电话坚持，你需要在调度程序中将电话延迟到稍后的时间。
不要使用**Send**`DispatcherPriority`的值（最高），而是尝试使用 Dispatcher 将焦点设置在稍后的 DispatcherPriority，例如**Input**。

 ****```
Dispatcher.BeginInvoke(DispatcherPriority.Input,
new Action(delegate() { 
    oldFocus.Focus();         // Set Logical Focus
    Keyboard.Focus(oldFocus); // Set Keyboard Focus
 })); 
```

如您所见，我也在设置键盘焦点。
WPF 可以有多个焦点范围，并且一个元素可以有逻辑焦点 ( `IsFocused = true`)。但是，只有*一个*元素可以具有键盘焦点并接收键盘输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T23:37:31.907

几天后，我终于可以让它工作了。它要求调度程序检查文本框是否同时具有焦点和键盘焦点以及大量循环。

这是供参考的代码。里面有一些评论，但如果有人点击这个页面寻找答案，你必须自己通读。提醒一下，这是关于文本更改的。

```
protected void TextBox_ShowEndOfLine(object sender, TextChangedEventArgs e)
    {
        if (sender == null) return;
        var box = sender as TextBox;

        if (!box.IsFocused && box.IsVisible)
        {
            IInputElement oldFocus = FocusManager.GetFocusedElement(FocusManager.GetFocusScope(this));
            box.Focus();
            box.Select(box.Text.Length, 0);
            box.Focus();

            // We wait for keyboard focus and regular focus before returning focus to the button
            var thread = new Thread((ThreadStart)delegate
                                        {
                                            // wait till focused
                                            while (true)
                                            {
                                                var focused = (bool)Dispatcher.Invoke(new Func<bool>(() => box.IsKeyboardFocusWithin && box.IsFocused && box.IsInputMethodEnabled), DispatcherPriority.Send);
                                                if (!focused)
                                                    Thread.Sleep(1);
                                                else
                                                    break;
                                            }

                                            // Focus the old element
                                            Dispatcher.Invoke(new Action(() => oldFocus.Focus()), DispatcherPriority.SystemIdle);
                                        });
            thread.Start();
        }
        else if (!box.IsVisible)
        {
            // If the textbox is not visible, the cursor will not be moved to the end. Wait till it's visible.
            var thread = new Thread((ThreadStart)delegate
                                        {
                                            while (true)
                                            {
                                                Thread.Sleep(10);
                                                if (box.IsVisible)
                                                {
                                                    Dispatcher.Invoke(new Action(delegate
                                                                                     {
                                                                                         box.Focus();
                                                                                         box.Select(box.Text.Length, 0);
                                                                                         box.Focus();

                                                                                     }), DispatcherPriority.ApplicationIdle);
                                                    return;
                                                }
                                            }
                                        });
            thread.Start();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T07:18:44.693

最后，我找到了这个问题的“正确”解决方案（底部的完整解决方案）：

```
if (!tb.IsFocused)
{
    tb.Dispatcher.BeginInvoke(new Action(() => 
        tb.ScrollToHorizontalOffset(1000.0)), DispatcherPriority.Input);
} 
```

实际上，您不想关注文本框 - 需要此 hack，因为如果 TextBox 没有焦点，TextBox.CaretIndex、TextBox.Select() 等将不会做任何事情。使用其中一种 Scroll 方法可以在不集中注意力的情况下工作。我不知道到底`double offset`应该是什么（使用`1000.0`为我工作的过高价值）。该值的行为类似于像素，因此请确保它对于您的场景足够大。

接下来，您不想在用户使用键盘输入编辑值时触发此行为。作为奖励，我结合了垂直和水平滚动，其中多行 TextBox 垂直滚动，而单行 TextBox 水平滚动。最后，您可能希望将此东西作为附加属性/行为重用。希望您喜欢这个解决方案：

```
 /// <summary>The attached dependency property.</summary>
    public static readonly DependencyProperty AutoScrollToEndProperty =
        DependencyProperty.RegisterAttached("AutoScrollToEnd", typeof(bool), typeof(TextBoxBehavior),
            new UIPropertyMetadata(false, AutoScrollToEndPropertyChanged));

    /// <summary>Gets the value.</summary>
    /// <param name="obj">The object.</param>
    /// <returns>The value.</returns>
    public static bool GetAutoScrollToEnd(DependencyObject obj)
    {
        return (bool)obj.GetValue(AutoScrollToEndProperty);
    }

    /// <summary>Enables automatic scrolling behavior, unless the <c>TextBox</c> has focus.</summary>
    /// <param name="obj">The object.</param>
    /// <param name="value">The value.</param>
    public static void SetAutoScrollToEnd(DependencyObject obj, bool value)
    {
        obj.SetValue(AutoScrollToEndProperty, value);
    }

    private static void AutoScrollToEndPropertyChanged(DependencyObject dependencyObject,
        DependencyPropertyChangedEventArgs e)
    {
        var textBox = dependencyObject as TextBox;
        var newValue = (bool)e.NewValue;
        if (textBox == null || (bool)e.OldValue == newValue)
        {
            return;
        }
        if (newValue)
        {
            textBox.TextChanged += AutoScrollToEnd_TextChanged;
        }
        else
        {
            textBox.TextChanged -= AutoScrollToEnd_TextChanged;
        }
    }

    private static void AutoScrollToEnd_TextChanged(object sender, TextChangedEventArgs args)
    {
        var tb = (TextBox)sender;
        if (tb.IsFocused)
        {
            return;
        }
        if (tb.LineCount > 1) // scroll to bottom
        {
            tb.ScrollToEnd();
        }
        else // scroll horizontally (what about FlowDirection ??)
        {
            tb.Dispatcher.BeginInvoke(new Action(() => tb.ScrollToHorizontalOffset(1000.0)), DispatcherPriority.Input);
        }
    } 
```

XAML 用法：

```
 <TextBox b:TextBoxBehavior.AutoScrollToEnd="True"
                 Text="{Binding Filename}"/> 
```

`xmlns:b`对应的 clr 命名空间在哪里。快乐编码！****

# css - @page :first { margin: ... } 在 Chrome 错误中？

> ID：13995490
> 
> 赞同：15
> 
> 时间：2012-12-21T18:43:17.740
> 
> 标签：css, google-chrome, printing

参考完整的小提琴：http: [//jsfiddle.net/XT92a/](http://jsfiddle.net/XT92a/)

```
@page {
    margin: 1in;
}

@page :first {
    margin: 2in 1in 3in 3in;
} 
```

我希望上述规则使第一张打印页有一定的边距，而所有其他页面都有 1 英寸的边距。

相反，我在 Chrome 的打印预览中得到以下内容（准确到打印输出）。非首页的页边距*不同*，但它们不正确。注释掉`:first margin`规则允许非首页以正确的布局打印，但当然首页也会受到影响。

[在我看来， Mozilla 的文档](https://developer.mozilla.org/en-US/docs/CSS/@page)声称 Chrome 正确支持这一点。显然 Chrome 会做出反应，但不正确。如果可以的话，我会参考 Chrome 文档，但谷歌的文档很烂！（有没有相当于[MDN](https://developer.mozilla.org/en-US/docs/CSS/@page)的谷歌？我找不到。）

奇怪的是，如果 Chrome 从 2.0 版开始就应该支持这个问题，并且打印布局是如此巨大的 PITA，我在其他地方找不到提到这个问题。

我做错了吗？是否有强大的解决方法？我已经尝试过`@page:first`（没有空格），独立地设置边距值 trbl 样式和单独，并在样式声明中交换了规则的顺序。没有效果。

![在此处输入图像描述](../Images/b7f0838e7c89c8e7a86ac1cf9cc0b4a5.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T03:48:32.160

你说：

> 在我看来，Mozilla 的文档声称 Chrome 正确支持这一点。

[是的`:first`](https://developer.mozilla.org/en-US/docs/CSS/:first)，但[CSS 伪类](https://developer.mozilla.org/en-US/docs/CSS/:first)显示来自 Chrome 的未知支持（“未知支持。请更新。”

[此外，Chrome 存在许多打印预览问题，](http://code.google.com/p/chromium/issues/list?can=2&q=print%20preview&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary&x=mstone&y=releaseblock&cells=tiles)我偶然发现了一些听起来与此问题相似的问题[，例如 this one](http://code.google.com/p/chromium/issues/detail?id=107912&q=print%20preview%20margin&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)。尽管如此，我找不到解决方法。只是为了让您在自己的测试中知道我尝试过：

*   负边距
*   填充而不是边距
*   大边框模拟边距
*   [强制分页符](https://developer.mozilla.org/en-US/docs/CSS/page-break-after)（可能的破解解决方案）
*   明确`width`和`height`
*   `!important`

我进行了大量测试，**Chrome 在生成预览 PDF 文件时似乎忽略或不正确地执行 CSS 规则**。就个人而言，从我的测试结果来看，我认为这是一个错误。

**更新**

*   Firefox v17.0.1 - 根本不应用`@page`规则。
*   Chrome 23.0.1271.97 m -`:first`在所有页面上错误地应用伪类。
*   IE 9.0.8112.16421 - 执行与 Chrome 相同的错误应用规则

[我的发现与伪类页面](https://developer.mozilla.org/en-US/docs/CSS/:first)[上的浏览器兼容性图表`:first`](https://developer.mozilla.org/en-US/docs/CSS/:first)不谋而合。也就是说，Chrome 的未知兼容性和 Firefox 的“不支持”兼容性。我无法测试 IE8，但我对 IE9 的测试不支持图表的主张。甚至 Microsoft 的示例也无法正确呈现（[CSS How-to: Optimize Pages for Printing Using CSS](http://msdn.microsoft.com/en-us/library/dd433064%28VS.85%29.aspx)）。

![:first 浏览器兼容性](../Images/81f1dddcde6d646513ee8e6ce9fcf25b.png)

经过更多的测试，我只能得出结论，`@page`它还没有完全集成到大多数浏览器中。规范存在（[CSS3 有新规范](http://www.w3.org/TR/css3-page/)），但根据我们的测试，文章中缺少经过测试的示例以及错误报告，看起来您将无法成功使用更灵活的`@page`样式规范.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-08T23:17:16.860

在我的情况下有效的解决方案，使所有页面的所有边距都相似。以前，第一页用于提供更大的边距。而不是使用 margin-top:20px 在页面 div 中首先出现的块中使用 padding-top:20px 。这可能是

作品：

```
header {
    margin:0px 80px 20px 80px;
    padding-top:50px;
} 
```

不工作（在第一页上提供更大的上边距）：

```
header {
    margin:50px 80px 20px 80px;
} 
```

# c# - 将 for 循环转换为并行循环

> ID：13995491
> 
> 赞同：4
> 
> 时间：2012-12-21T18:43:19.330
> 
> 标签：c#, for-loop, parallel-processing

我编写了一个计算图像焦点值的代码。但它需要超过 5 秒才能完成。

```
 public double GetFValue(Image image)
        {
            Bitmap source = new Bitmap(image);
            int count = 0;
            double total = 0;
            double totalVariance = 0;
            double FM = 0;
             Bitmap bm = new Bitmap(source.Width, source.Height);
             Rectangle rect = new Rectangle(0,0,source.Width,source.Height);
              Bitmap targetRect = new Bitmap(rect.Width, rect.Height);

            // converting to grayscale
            for (int y = 0; y < source.Height; y++)
            {
                for (int x = 0; x < source.Width; x++)
                {
                    count++;
                    Color c = source.GetPixel(x, y);
                    int luma = (int)(c.R * 0.3 + c.G * 0.59 + c.B * 0.11);
                    source.SetPixel(x, y, Color.FromArgb(luma, luma, luma)); // the image is now gray scaled 
                    var pixelval = source.GetPixel(x, y);
                  //  targetRect.Save(@"C:\Users\payam\Desktop\frame-42-rectangle.png", System.Drawing.Imaging.ImageFormat.Png);
                    int pixelValue = pixelval.G;
                    total += pixelValue;
                    double avg = total / count;
                    totalVariance += Math.Pow(pixelValue - avg, 2);
                    double stDV = Math.Sqrt(totalVariance / count); // the standard deviation, which is also the focus value
                    FM = Math.Round(stDV, 2);
                }
            }
            return FM;
        } 
```

我正在尝试将此代码转换为并行计算。我最终遇到了我无法绕过它们的错误。有什么建议吗？

```
 public double CalculateFvalue (Image image)
    {
        Bitmap myimage = new Bitmap(image);
        int count = 0;
        int total = 0;
        double totalVariance = 0;
        double FM = 0;
        Parallel.For(0, image.Height, y =>
            {

            for (int x = 0; x < myimage.Width; x++)
                   {
                           count++;
                           Color c = myimage.GetPixel(x, y);
                           int luma = (int)(c.R * 0.3 + c.G * 0.59 + c.B * 0.11);
                           myimage.SetPixel(x, y, Color.FromArgb(luma, luma, luma)); // the image is now gray scaled 
                           var pixelval = myimage.GetPixel(x, y);
                           int pixelValue = pixelval.G;
                           total += pixelValue;
                           double avg = total / count;
                           totalVariance += Math.Pow(pixelValue - avg, 2);
                           double stDV = Math.Sqrt(totalVariance / count); // the standard deviation, which is also the focus value
                           FM = Math.Round(stDV, 2);
                   }

    });

        return Math.Round(FM,2);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T18:46:39.850

这是因为您声明的变量超出了`Parallel.For`. 由于它们的访问（和写入）是不确定的，因此您可能会使用错误的数据（例如`FM`）覆盖值。

我建议您让每次迭代都产生有关其结果的信息，然后使用收集的数据以线程安全的方式在外部操作您的变量。你也可以通过使用一些`lock`语句来逃避它，但我个人会避免这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T21:11:17.337

要扩展我的评论，请不要尝试并行运行 GetPixel，而是使用 lockBits。

您使用 lockbits 的代码：

```
 public double GetFValue(Image image)
    {
        Bitmap source = new Bitmap(image);
        int count = 0;
        double total = 0;
        double totalVariance = 0;
        double FM = 0;
        Bitmap bm = new Bitmap(source.Width, source.Height);
        Rectangle rect = new Rectangle(0, 0, source.Width, source.Height);
        //Bitmap targetRect = new Bitmap(rect.Width, rect.Height);

        //new
        ///*
        BitmapData bmd = source.LockBits(rect, ImageLockMode.ReadWrite, source.PixelFormat);
        int[] pixelData = new int[(rect.Height * rect.Width) -1];
        System.Runtime.InteropServices.Marshal.Copy(bmd.Scan0, pixelData, 0, pixelData.Length);

        for (int i = 0; i < pixelData.Length; i++)
        {
            count++;
            Color c = Color.FromArgb(pixelData[i]);
            int luma = (int)(c.R * 0.3 + c.G * 0.59 + c.B * 0.11);
            //Probably a formula for this
            pixelData[i] = Color.FromArgb(luma, luma, luma).ToArgb(); 
            total += luma;
            double avg = total / count;
            totalVariance += Math.Pow(luma - avg, 2);
            double stDV = Math.Sqrt(totalVariance / count);
            FM = Math.Round(stDV, 2);
        }
        source.UnlockBits(bmd);
        return FM;
     } 
```

在使用来自 win7 示例图片 (Chrysanthemum.jpg) 的 1024 x 768 jpg 的快速测试中：

锁定位：241 毫秒

获取像素：2208 毫秒

请注意，在转换您的代码时，我注意到了一些奇怪的事情（例如同一像素上的 getpixel、setpixel、getpixel？）但我想您知道您想要实现什么，并且此代码与您的代码完全相同

# mysql - 如何加快mysql搜索速度

> ID：13995493
> 
> 赞同：1
> 
> 时间：2012-12-21T18:43:23.750
> 
> 标签：mysql, search

我正在使用此代码从数据库中读取，但我得到的结果有点慢。所以我需要一些关于这个问题的帮助。

```
SELECT mod_part.id AS mp_id,parts.id as part_id,outlets.name as out_name, parts.part_name as part_name, parts.brand, outlets.sell, outlets.cost, outlets.qty, outlets.comp, parts.supplier, brands.name AS brand_name 
FROM outlets,models,manufacturers,brands,parts,mod_part 
WHERE outlets.part_id=mod_part.id 
      AND mod_part.part_id=parts.id 
      AND brands.id=mod_part.brand_id 
      AND mod_part.model_id=models.id 
      AND parts.man_id=manufacturers.id 
      AND (MATCH (manufacturers.name) AGAINST ('".$_GET['search']."') 
      OR MATCH (parts.part_name) AGAINST('".$_GET['search']."') 
      OR MATCH(models.name) AGAINST('".$_GET['search']."')) 
GROUP BY parts.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:16:26.230

你可以用内部连接试试这个

```
$search = mysql_real_escape_string($_GET['search']);  // escape from sql injection here 
```

然后在你的 sql 中使用它（请改用 PDO 或 SQLI）

```
"SELECT mo.id AS mp_id,p.id as part_id,o.name as out_name,p.part_name as part_name,p.brand,o.sell,o.cost,o.qty,o.comp,p.supplier,b.name AS brand_name 
 FROM outlets 
 INNER JOIN models m  ON  m.id = mo.model_id
 INNER JOIN parts p ON  mo.part_id= p.id 
 INNER JOIN manufacturers ma ON p.man_id=ma.id 
 INNER JOIN brands b ON  bid=mo.brand_id
 INNER JOIN mod_part mo ON mo.part_id=mo.id 

WHERE 
   (MATCH (ma.name)  AGAINST ('".$search."')
   OR MATCH (p.part_name)  AGAINST('".$search."') 
   OR MATCH(m.name)  AGAINST('".$search."'))
GROUP BY p.id "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:05:38.263

如果查询很慢，请尝试查看[说明计划](http://dev.mysql.com/doc/refman/5.0/en/explain.html)。否则，您将不得不提供更多信息，例如表结构、索引、代码等。

此外，您允许 SQL 注入。请阅读该主题并修复代码。如果您告诉您使用的是哪种语言，我可以尝试添加一些链接。否则，请查看“绑定”您的变量。

# ftp - 严重性：警告消息：ftp_chmod() [function.ftp-chmod]：权限已更改

> ID：13995494
> 
> 赞同：0
> 
> 时间：2012-12-21T18:43:33.403
> 
> 标签：ftp, php

我遇到了 php 的问题`ftp_chmod()`，而不是真正发生了什么。

目录权限正在更改，但 PHP 发出警告基本上只是告诉我它们已更改。

我希望这对我来说只是一个白痴时刻。下面是被抛出的警告，下面是代码行。

同样，权限正在正确更改，只是抛出警告存在问题：

> 严重性：警告
> 消息：ftp_chmod() [function.ftp-chmod]：/public_html/pathToMyDir 上的权限已更改
> 文件名：models/inventory_model.php 行号：63

第 63 行如下：

```
if (ftp_chmod($conn_id, 0777, $currentFolder.$imgName) !== false) {
    echo "chmoded successfully to 0777\n";
} else {
    echo "could not chmod \n";
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T18:47:59.013

您可以通过以下方式消除错误：

```
if (@ftp_chmod($conn_id, 0777, $currentFolder.$imgName) !== false) { 
```

# iphone - 图像网格视图按钮

> ID：13995495
> 
> 赞同：0
> 
> 时间：2012-12-21T18:43:34.873
> 
> 标签：iphone, cocoa-touch, ios5, gridview, uiimage

我有一个`grid view of images`...如何更改我的代码以使其对每个图像都可点击。

如何接收每张图片的点击事件？

```
- (void)viewDidLoad
{
[super viewDidLoad];

int Columns = 3;
int Rows=5;

int space = 10;
int width = (self.view.frame.size.width-(Columns)*space)/Columns;
int height = width;
int x = space;
int y = space;  
UIScrollView *Scroll=[[UIScrollView alloc]initWithFrame:CGRectMake(x, y,self.view.frame.size.width, self.view.frame.size.height) ];
[Scroll setContentSize:CGSizeMake(Columns*(space+width)+space, Rows*(space+(self.view.frame.size.height-(Columns)*space)/Columns)+space)];
Scroll.backgroundColor=[UIColor yellowColor];
Scroll.showsVerticalScrollIndicator=YES;

for(int i=1 ;i<30;i++)
{
    j++;

    NSLog(@"j= %i",j);

    label=[[UILabel alloc]initWithFrame:CGRectMake(x,y,width,height)];
    label.backgroundColor=[UIColor blueColor];

    image= [[UIImageView alloc] initWithFrame:CGRectMake(x,y,width,height)];
    image.image = [UIImage imageNamed:
                   [NSString stringWithFormat:@"image%02ds.jpg", i+1]]; 

    [Scroll addSubview:label];

    if (i%Columns == 0) {
        y += space+height;
        x = space;
    } else {
        x+=space+width;
    }
    [Scroll addSubview:image];

}
[self.view addSubview:Scroll];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:58:56.380

也可以使用 UIImage，但我更喜欢 UIButton，以防它需要可点击。由于 UIImageView 直接继承自 UIView 它并不真正知道目标和选择器。

```
UIButton *imageButton = [UIButton buttonWithType:UIButtonTypeCustom];   
imageButton.frame = CGRectMake(x,y,width,height
[imageButton setBackgroundImage:[UIImage imageNamed:
                   [NSString stringWithFormat:@"image%02ds.jpg", i+1]] forState:UIControlStateNormal];

  [imageButton addTarget:self action:@selector(imageButtonTapped:) forControlEvents:UIControlEventTouchUpInside];

    -(void)imageButtonTapped:(id) sender
    {
      //Do whatever you want to do on image tap.      
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:58:20.093

我建议不要创建自己的 GridView，而是使用 GMGridView [http://www.cocoacontrols.com/controls/gmgridview](http://www.cocoacontrols.com/controls/gmgridview)

它是一个很好的控件，可以处理所有的点击和一切——您只需要实现委托方法并按照示例进行操作。我以前用过，效果很好；委托/数据源方法与 UITableView 非常相似，因此一开始并不会太混乱。

如果您不想包含外部课程，那么我建议您按照[MSK](https://stackoverflow.com/a/13995679/480415)所说的进行 -

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:04:36.657

您可以将`UITapGestureRecognizer`其用于您的目的。

```
UITapGestureRecognizer *tapRecognizer=[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageTapped:)];
imageView.tag=TAG; //Tag your imageview to identify in call back
[imageView addGestureRecognizer:tapRecognizer];
[tapRecognizer release];    //If not ARC 
```

编写动作回调如下...

```
-(void)imageTapped:(UITapGestureRecognizer *)tapRecognizer
{
    if ([tapRecognizer.view isKindOfClass:[UIImageView class]]) {
        if (tapRecognizer.view.tag==TAG) { //Identify image view tag
            //Your code for image tap action
        }
    }
} 
```

# javascript - iOS6 中 iPhone 的 Safari 是否支持内联视频？

> ID：13995497
> 
> 赞同：2
> 
> 时间：2012-12-21T18:43:40.310
> 
> 标签：javascript, ios, html, mobile-safari, html5-video

我找不到任何可以证实或否认谣言的东西，我听说运行 iOS 6 的 iPhone 可以在 Safari 中显示内嵌视频。

这仍然只是 iPad 的一项功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:45:21.007

不会。iPhone (iOS 6) 上的视频仍会全屏显示。我怀疑这不会很快改变，因为它被认为是一个功能，而不是一个限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T05:04:35.583

iPhone 和 iPod 似乎只是在 Safari 中强制全屏视频播放的唯一设备/浏览器（以及在使用其未修改的 WebView 的应用程序中）

*您可以通过浏览*视频而不是实际播放视频来模拟播放来解决此问题`.play()`。

我编写了一个模块，负责播放视频并将其与音频同步（但它也适用于没有音轨的视频）：[iphone-inline-video](https://github.com/bfred-it/iphone-inline-video)

# java - ParseException：无法解析的日期

> ID：13995501
> 
> 赞同：2
> 
> 时间：2012-12-21T18:43:47.993
> 
> 标签：java, date, simpledateformat, parseexception

为什么我会收到此异常？

这是我的格式字符串：

```
SimpleDateFormat parser = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ"); 
```

这是我要格式化的字符串：

```
2012-12-29T23:59:00-05:00 
```

但我得到以下异常：

```
java.text.ParseException: Unparseable date: "2012-12-29T23:59:00-05:00"
    at java.text.DateFormat.parse(DateFormat.java:337)
    at objectmodels.Checkout.setDueDate(Checkout.java:72)
    at threads.AccountNotifyThread.lookupAccountInfo(AccountNotifyThread.java:220)
    at threads.AccountNotifyThread.performNotificationsForUser(AccountNotifyThread.java:65)
    at threads.AccountNotifyThread.run(AccountNotifyThread.java:42)
    at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:47:23.607

这是因为`Z`期望`-0500`而不是`-05:00`日期应该是`2012-12-29T23:59:00-0500`。

你必须摆脱最后一个`:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:45:48.300

SimpleDateFormat parser = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssz");

尝试使用 z 而不是 Z。

# windows - Windows 7 只需要在一个文件夹中保留最近的 5 个文件并删除其余文件

> ID：13995507
> 
> 赞同：1
> 
> 时间：2012-12-21T18:44:20.467
> 
> 标签：windows, batch-file

我正在尝试找到一个常规的（是否可以使用 powershell）批处理脚本，该脚本将只维护文件夹中最近的 5 个文件，而不管文件名如何。我在这里和那里发现了一些似乎不起作用或不做我需要的事情。我将不胜感激您能提供的任何帮助。非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T20:38:12.620

使用 DIR 命令列出按修改后的时间戳降序排列的文件。使用 FOR /F 处理结果，跳过前 5 个。

在命令行中，使用以下命令删除当前目录中除 5 个最近修改的文件之外的所有文件：

```
for /f "skip=5 eol=: delims=" %F in ('dir /b /o-d /tw /a-d') do @del "%F" 
```

如果在批处理文件中使用，则百分比需要加倍。您可能还想指定要从中删除的文件夹。

```
@echo off
pushd "c:\yourFolder" && (
  for /f "skip=5 eol=: delims=" %%F in ('dir /b /o-d /tw /a-d') do del "%%F"
) 
```

批处理文件不应驻留在要从中删除的文件夹中。如果它确实存在于同一文件夹中，则需要防止批处理文件自行删除：

```
@echo off
pushd "c:\yourFolder" && (
  for /f "skip=5 eol=: delims=" %%F in ('dir /b /o-d /tw /a-d') do if "%%~fF" neq "%~f0" del "%%F"
) 
```

# python - 对象不可迭代

> ID：13995513
> 
> 赞同：0
> 
> 时间：2012-12-21T18:45:19.040
> 
> 标签：python, python-3.x, python-3.3

这是我得到的错误：

```
Traceback (most recent call last):
  File "C:\Users\Mendel Hornbacher\My programs\Spaceblaster\SpaceBlaster0.0.2b.py", line 95, in <module>
    animate()
  File "C:\Users\Mendel Hornbacher\My programs\Spaceblaster\SpaceBlaster0.0.2b.py", line 53, in animate
    ship.hit(astroid_list)
  File "C:\Users\Mendel Hornbacher\My programs\Spaceblaster\SpaceBlaster0.0.2b.py", line 34, in hit
    if pygame.sprite.spritecollide(self, item, False):
  File "C:\Python33\lib\site-packages\pygame\sprite.py", line 1515, in spritecollide
    return [s for s in group if spritecollide(s.rect)]
TypeError: 'Astroid' object is not iterable 
```

这些是所涉及的类：

1.  动画：

    ```
    def animate():
        ship.hit(astroid_list)
        ship.move()
        screen.fill([0,0,0])
        astroid_list.draw(screen)
        screen.blit(ship.image, ship.rect)
        pygame.display.flip() 
    ```

2.  self.hit（在“Ship”类中）

    ```
    def hit(self, group):
            for item in group:
                group.remove(item)
                if pygame.sprite.spritecollide(self, item, False):
                    self.die()
                group.add(item) 
    ```

3.  astroid_list

    ```
    astroid_list = pygame.sprite.Group() 
    ```

如果这意味着什么，我正在运行 Windows 8 pro。如果上面的代码还不够，我会在评论中发布整个代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:54:13.940

`spritecollide`当它期望获得一个精灵时，您正在传递一个`list`精灵。这导致抛出异常，因为您`Astroid`不是可迭代的类。

```
def hit(self, group):
    if pygame.sprite.spritecollide(self, group, False):
        self.die() 
```

[Spritecollide 文档](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.spritecollide)

文档中的一个不错的小提示是，`pygame.sprite.spritecollideany`它比常规的要快一些`spritecollide`，并且可能是一个更好的选择，因为您不关心与它发生碰撞的内容，因此您不需要返回所碰撞的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:55:22.343

该[`spritecollide`函数](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.spritecollide)希望您传递 a [`Group`](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group)，而不是单个精灵。

只需一次性测试您的整个团队：

```
def hit(self, group):
    if pygame.sprite.spritecollide(self, group, False):
        self.die() 
```

现在，您还可以避免在循环遍历列表时删除和添加项目。

如果您想`self`从组中删除与碰撞的精灵，请在调用后执行此操作`spritecollide()`：

```
def hit(self, group):
    collided = pygame.sprite.spritecollide(self, group, False)
    for item in collided:
        group.remove(item)
    if collided:
        self.die() 
```

但是，您可以将`dokill`标志设置为 True，而不是手动删除每个项目，它们将从组中删除：

```
def hit(self, group):
    if pygame.sprite.spritecollide(self, group, True):
        self.die() 
```

如果您*不需要*知道哪些项目发生了碰撞并且不想从组中删除项目，请[`spritecollideany()`](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.spritecollideany)改用；它只返回 True 或 False 并且速度更快：

```
def hit(self, group):
    if pygame.sprite.spritecollideany(self, group):
        self.die() 
```

# c# - 为 extjs 树实现 List treenode

> ID：13995529
> 
> 赞同：1
> 
> 时间：2012-12-21T18:46:43.357
> 
> 标签：c#, asp.net-mvc, extjs, extjs4, treenode

我有一个包含这些数据的表

```
State       Cities

 TX         Houston
 TX         San Antonio
 TX         Austin
 TX         Austin
 PA         Philadelphia
 PA         Pitssburgh
 PA         Pittsburgh
 PA         
 CO         Boulder
 CO         Denver 
```

我正在尝试实现一棵树，它将这三个状态作为节点，将各自的城市作为叶子。

在 c# 上，我正在创建一个列表。

```
 comd.CommandText = "SELECT * FROM MyTable";

            con.Open();
            SqlDataReader reader = comd.ExecuteReader();
            while (reader.Read())
            {
                City myData = new City();
                myData.State = reader["State"].ToString().Trim();
                myData.Cities = reader["Cities"].ToString().Trim();
                giveData.Add(myData);
            }  
            int count = 1;
            List<TreeNode> myNode = new List<TreeNode>();
            foreach (City myData in giveData)
            {
                TreeNode treeNode = new TreeNode();
                treeNode.id = count++;
                treeNode.name = myData.State;
                treeNode.leaf = false;

                List<TreeNode> Level1 = new List<TreeNode>();
                if (mydata.Cities != null)
                {
                    if (mydata.Cities!= "")
                    {
                        foreach (City State in result)
                        {
                            TreeNode node1 = new TreeNode();
                            node1.id = count++;
                            node1.name = myData.Cities;
                            node1.leaf = true;

                            Level1.Add(node1);
                         }
                     }
                }
                treeNode.children = Level1;
                myNode.Add(treeNode);
            }

            return JsonConvert.SerializeObject(myNode); 
```

我得到的是所有 4 个 TX 和 PA 和 2 个 CO 作为树节点，在 TX 节点下我得到两个奥斯汀......

如何实施我的列表，以便我只得到一个 TX、一个 PA 和一个 CO，如果有两个城市，我只有一个城市......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:09:07.460

我无法测试它，但应该这样做：

```
comd.CommandText = "SELECT * FROM MyTable";

con.Open();
SqlDataReader reader = comd.ExecuteReader();
while (reader.Read())
{
    City myData = new City();
    myData.State = reader["State"].ToString().Trim();
    myData.Cities = reader["Cities"].ToString().Trim();
    giveData.Add(myData);
}  
int count = 1;
Dictionary<string, TreeNode> result = new Dictionary<string, TreeNode>();
foreach (City myData in giveData) 
{
    if (result.ContainsKey(myData.State ))
    {
        result[myData.State].children.Add(new TreeNode() {
            id = count++,
            name = myData.Cities,
            leaf = true
        });
    }
    else
    {
        result.add(giveData.State, new TreeNode() {
            id = count++,
            name = myData.State,
            leaf = false,
            children = new List<TreeNode>()
        });
    }
}

return JsonConvert.SerializeObject(result.Values); 
```

# vb.net - LINQ 查询 - 如果不匹配则抛出异常？

> ID：13995531
> 
> 赞同：2
> 
> 时间：2012-12-21T18:46:57.287
> 
> 标签：vb.net, linq

考虑以下类：

```
Public Class Employee
   Public State As String   
   Public Dept As String
   Public Status as Integer
End Class 
```

我需要从四个记录中查询**一个不同的值：**`listEmployees`

```
oEmp = New Employee
oEmp.Dept = "HR"
oEmp.State = "Kansas"
oEmp.Status = 1
listEmployees.Add(oEmp)

oEmp = New Employee
oEmp.Dept = "HR"
oEmp.State = "Texas"
oEmp.Status= 3
listEmployees.Add(oEmp)

oEmp = New Employee
oEmp.Dept = "HR"
oEmp.State = "Texas"
oEmp.Status= 5
listEmployees.Add(oEmp)

oEmp = New Employee
oEmp.Dept = "DEV"
oEmp.State = "Texas"
oEmp.Status= 7
listEmployees.Add(oEmp) 
```

我需要查询做的是返回不同的Deparments where `State`='Texas'。**但我需要能够在`Where`子句中添加多个案例。**因此，另一个查询可能需要返回不同的 Status 的 where `State`= 'Texas' 和`Dept`= 'HR'。

总是只有一个领域我需要与众不同。

因此，我的第一个查询示例的结果将是“HR”和“DEV”，因为它们是将“德克萨斯”作为州的不同部门。第二个查询的结果将是“3”和“5”，因为它们是不同的状态，其中州是“德克萨斯”，部门是“人力资源”。

**更新：**

这是我为 Query #1 所做的工作：

```
Dim test = (From emp As Employee In listEmployees
            Where emp.State = "Texas"
            Select emp.Dept).Distinct() 
```

但是，如果我指定`State`不存在的东西，例如“TTexas”，我会得到以下异常（代码不会爆炸，但如果我`test`在此行执行后检查 Visual Studio 中的变量，我会得到这个） ：

> 引发了“System.Linq.SystemCore_EnumerableDebugViewEmptyException”类型的异常。在 System.Linq.SystemCore_EnumerableDebugView`1.get_Items()

这是正常的 LINQ 行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T20:25:10.327

编辑后（新问题）。是的，这是“正常”（如：预期）行为。见[代码`get_Items`](https://github.com/Microsoft/referencesource/blob/master/System.Core/System/Linq/Enumerable.cs#L2601)：

```
public T[] Items
{
    get
    {
        List<T> tempList = new List<T>();
        IEnumerator<T> currentEnumerator = this.enumerable.GetEnumerator();

        if (currentEnumerator != null)
        {
            for(count = 0; currentEnumerator.MoveNext(); count++)
            {
                tempList.Add(currentEnumerator.Current);
            }
        }
        if (count == 0)
        {
            throw new SystemCore_EnumerableDebugViewEmptyException();
        }
        cachedCollection = new T[this.count];
        tempList.CopyTo(cachedCollection, 0);
        return cachedCollection;
    }
} 
```

我想知道为什么调试视图应该抛出异常而不仅仅是显示“count = 0”或其他东西，但这可能只是无知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:50:14.520

不同的意思是跨行的所有元素。如果您有两行所有返回的元素都相同，则 distinct 会将其减少为一行，但即使一个元素不同，则两行都将在 distinct 后返回。当然，您可以覆盖它（如此[处](https://stackoverflow.com/questions/5984794/linq-distinct-on-specific-field)和 Evgraf 的回答中所见）。 [分组](http://code.msdn.microsoft.com/LINQ-to-DataSets-Grouping-c62703ea)运算符更有可能是您正在寻找的（[这](https://stackoverflow.com/questions/2831830/vb-net-groupby-linq-statement)是 VB.net 中的一个示例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:51:41.580

创建您自己的比较器以检测项目是否相等

```
public class Comparer : IEqualityComparer<Employee>
{
    public bool Equals(Employee x, Employee y)
    {
        throw new NotImplementedException();
    }

    public int GetHashCode(Employee obj)
    {
        throw new NotImplementedException();
    }
} 
```

并使用它

```
... .Distinct(new Comparer()); 
```

# java - 应用程序窗口获得焦点并调整大小

> ID：13995536
> 
> 赞同：0
> 
> 时间：2012-12-21T18:47:18.017
> 
> 标签：java, swing, jfreechart

JFreeChart 有两个问题。

我正在使用一条线 XYLineChart 并更新数据集，以便它定期刷新数据并添加更多项目。问题是，当我添加更多数据时，应用程序窗口会直接回到前台，所以如果我在另一个窗口中输入，该窗口就会失去焦点。

我遇到的第二个问题是，每次图表更新时，它都会自行调整大小，因此我无法调整和维护它。

请问有人可以帮忙解决这个问题吗？谢谢

```
public static void main (String[] args){
          String val= args[0];
          LineChart chart = new LineChart("Name " + val);

          while(true){
             Main main = new Main();
             XMLData data = getMyData()         
             chart.addToDataSet(data);
             chart.pack();
               RefineryUtilities.centerFrameOnScreen(chart);
               chart.setVisible(true);
               LineChart.incremementxAxisTimePlot(true);
             try {
                Thread.sleep(5000);
             } catch (InterruptedException e) {
                e.printStackTrace();
             }
          }

package com.chart.graph;

import java.awt.Color;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.ApplicationFrame;
import com.graph.logfiledata.XMLData;

/**
 * A simple demonstration application showing how to create a line chart using data from an
 * {@link XYDataset}.
 *
 */
public class LineChart extends ApplicationFrame {

    private static int xAxisTimePlot = 5;
    private XYSeriesCollection dataset = new XYSeriesCollection();

    public LineChart(final String title) {

        super(title);
        final JFreeChart chart = createChart(dataset);
        final ChartPanel chartPanel = new ChartPanel(chart);
        chartPanel.setPreferredSize(new java.awt.Dimension(500, 270));
        setContentPane(chartPanel);

        dataset.addSeries(series2);
        dataset.addSeries(series3);
        dataset.addSeries(series4);
        dataset.addSeries(series5);
        dataset.addSeries(series6);
        dataset.addSeries(series7);
        dataset.addSeries(series8);
        dataset.addSeries(series9);
        dataset.addSeries(series10);

    }

    public static void incremementxAxisTimePlot(boolean update){
        if(update){
            xAxisTimePlot+=5;
        }
    }
    XYSeries series2 = new XYSeries("1");
    XYSeries series3 = new XYSeries("2");
    XYSeries series4 = new XYSeries("3");
    XYSeries series5 = new XYSeries("4");
    XYSeries series6 = new XYSeries("5");
    XYSeries series7 = new XYSeries("6");
    XYSeries series8 = new XYSeries("7");
    XYSeries series9 = new XYSeries("8");
    XYSeries series10 = new XYSeries("9");
    public void addToDataSet(XMLData data){

        series2.add(xAxisTimePlot, data.getOne());
        series3.add(xAxisTimePlot, data.getTwo());
        series4.add(xAxisTimePlot, data.getThree());
        ...        

    }

    /**
     * Creates a chart.
     * 
     * @param dataset  the data for the chart.
     * 
     * @return a chart.
     */
    private JFreeChart createChart(final XYDataset dataset) {

        // create the chart...
        final JFreeChart chart = ChartFactory.createXYLineChart("Line Chart","X","Y", dataset, PlotOrientation.VERTICAL,true,true, false);
        chart.setBackgroundPaint(Color.white);

        // get a reference to the plot for further customisation...
        final XYPlot plot = chart.getXYPlot();
        plot.setBackgroundPaint(Color.lightGray);
        plot.setDomainGridlinePaint(Color.white);
        plot.setRangeGridlinePaint(Color.white);

        final XYLineAndShapeRenderer renderer = new XYLineAndShapeRenderer();
        renderer.setSeriesLinesVisible(0, false);
        renderer.setSeriesShapesVisible(1, false);
        plot.setRenderer(renderer);

        // change the auto tick unit selection to integer units only...
        final NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
        rangeAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());

        return chart;  
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:32:55.383

*   `while(true){`是无限循环，没有在 5 秒内创建（内部）`break;`所有内容`Objects``while(true){`

*   特别是无限循环，创建了一堆新的 GUI

意义代码

```
Main main = new Main();
XMLData data = getMyData()         
chart.addToDataSet(data);
chart.pack(); 
```

*   之前准备 GUI，然后如果有真正的理由创建循环，但定义布尔变量`while(canRun){`instread`while(true){`或`break;`

*   为什么有原因，在GUI基于的情况下`Thread.sleep(5000);`使用，[`Swing Timer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)[`Swing / AWT container`](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)

*   如果是基于[Swing / AWT](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)的容器，那么您[在 Swing 中遇到了 Concurency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)问题，所有事件都必须在其中完成`EventDispatchTread`，

*   在（无限）循环结束之前，您的 GUI 永远不会刷新，因为`Thread.sleep(5000);`导致 Swing GUI 的闪烁冻结，导致锁定`EventDispatchTread`

# android - 错误 java.lang.IndexOutOfBoundsException：无效的索引 0，Android 适配器中的大小为 0

> ID：13995537
> 
> 赞同：3
> 
> 时间：2012-12-21T18:47:20.573
> 
> 标签：android, android-asynctask, android-adapter, android-handler

我有一个在我的活动中扩展 BaseAdapter 的适配器。在适配器中，我列出了记录。当用户单击任何记录时，将列出选项。这些选项是“发送”和“删除”。删除选项从列表中删除记录并发送选项发送记录到服务器。当发送被按下时，异步任务被启动。对于删除操作，我在对话框中使用处理程序。（是或否）。

我的问题是，如果我在一条记录中按删除，而其他记录正在发送，应用程序崩溃，我得到了这个异常；

```
java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
at java.util.ArrayList.get(ArrayList.java:304)
E/AndroidRuntime(25140): atandroid.widget.HeaderViewListAdapter.isEnabled(HeaderViewListAdapter.java:164) 
```

我检查了很多次尺寸，尺寸不是0。我确定尺寸没有问题。

此代码来自我的删除操作；

```
public class MyAdapter extends BaseAdapter{
CopyOnWriteArratList<MyObject> MyCopyonWriteArrayList;
private Handler handler;
private ListView listview;

public MyAdapter(Context context,
CopyOnWriteArratList<MyObject> MyCopyonWriteArrayList,ListView listView){
this.context = context;
this.MyCopyonWriteArrayList= MyCopyonWriteArrayList;
this.listView = listView;
 }
new Thread(new Runnable() { 
                    @Override
                    public void run() {
                //If I remove this line, app does not crash     
                            MyObject o = MyCopyonWriteArrayList.get(position);
                            o.Delete();
                            MyCopyonWriteArrayList.remove(position);

                            //Code arrive here.

                        }
                            handler.post(new Runnable() {
                                 //Code cannot arrive here
                                @Override
                                public void run() {
                                    progressDialog.dismiss();   
                                    deleteDoneListener.deleteDone();
                                }
                            });
                    }
                }).start();                                                                                                             

            } catch (Exception e) {
                e.printStackTrace();
            } 
```

我的 asyntask 非常典型。

我的问题是为什么我得到这个异常“索引 0，大小 0”？这个大小不是 myarraylist 大小。

如何修复此代码以及此大小的来源是什么？

此外，如果我在删除中使用 asynctask 而不是处理程序，则会出现“无法在未调用 Looper.prepare()] 的线程内创建处理程序”异常。所以我不能在对话框中放入 asyntack。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:51:36.977

只需检查位置是否在范围内，如果是，请将其删除并进行如下更改：

```
if(position != -1 && position < MyCopyonWriteArrayList.size()) {
     MyCopyonWriteArrayList.remove(position); 
 } 
```

绝对会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T05:50:09.773

我在做什么，怎么做，得到的和你的几乎一样！这可能会有所帮助：

将自定义适配器与 ListView 一起使用时，我遇到了同样的异常。并且从 Android 标准库类中抛出了异常，甚至没有导致我的任何代码行。我还添加了 Header，所以我的适配器被 HeaderViewListAdapter 隐式包装。就我而言，当我从适配器中删除数据时会出现问题。

我在想问题是因为 ListView 或适配器不能与 Header 一起正常工作，但实际上原因是其他的。

**我的解决方案是确保适配器的数据永远不会从其他线程更改，并且`notifyDataSetChanged()`从 UI 线程调用。**

因此，修复一切正常后，我的代码如下所示：

```
// Loader's callbacks
@Override
public Loader<...> onCreateLoader(int id, Bundle args) {
    return new Loader...
}

@Override
public void onLoadFinished(Loader<...> loader, Data data) {
    ...
    // adapter's list of items
    listItems.clear();
    listItems.addAll(data);
    adapter.notifyDataSetChanged();
    ...
}

@Override
public void onLoaderReset(Loader<List<? extends Map<String, ?>>> loader) {
    ...
}

// custom loader 
private static class ContactAsyncLoader extends AsyncTaskLoader<...> {
    @Override
    public List<..> loadInBackground() {
        Data data = new ..
        ...
        return data;
    }
} 
```

# php - if, elseif 不设置变量来设置正确的变量

> ID：13995540
> 
> 赞同：1
> 
> 时间：2012-12-21T18:47:32.140
> 
> 标签：php, if-statement

我似乎无法弄清楚为什么这不能正常工作。这是正在设置的变量，但是在“类型”的最终结果中，它将其设置为 m 而不是 fm

cpanel_notifications - 1 远程服务器 -
1

```
if ($_POST['cpanel_notifications'] == 1){
$type = "m";
}
elseif($_POST['cpanel_notifications'] == 0){
$type = "nm";
}
elseif($_POST['cpanel_notifications'] == 1 && $_POST['remote_server'] == 1){
$type = "fm";
}
elseif($_POST['cpanel_notifications'] == 0 && $_POST['remote_server'] == 0){
$type = "fnm";
} 
```

结果：米

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T18:49:16.357

这是因为第一个`if`陈述是正确的。没有理由去任何一个`elses`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:49:05.823

你需要做的是重新排序你的if

```
if($_POST['cpanel_notifications'] == 1 && $_POST['remote_server'] == 1){
    $type = "fm";
}
elseif($_POST['cpanel_notifications'] == 0 && $_POST['remote_server'] == 0){
    $type = "fnm";
}
elseif ($_POST['cpanel_notifications'] == 1){
    $type = "m";
}
elseif($_POST['cpanel_notifications'] == 0){
    $type = "nm";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T18:51:03.423

只需更改条件顺序

```
if ($_POST['cpanel_notifications'] == 1){
    if ($_POST['remote_server'] == 1) { 
        $type = "fm";
    } else {
        $type = "m";
    }
}
elseif($_POST['cpanel_notifications'] == 0){
    if ($_POST['remote_server'] == 0) {
        $type = "fnm";
    } else {
        $type = "nm";
    }
} 
```

甚至

```
if ($_POST['cpanel_notifications'] == 1){
    $type = ($_POST['remote_server'] == 1?"fm":"m");
}
elseif($_POST['cpanel_notifications'] == 0){
    $type = ($_POST['remote_server'] == 0?"fnm":"nm");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T18:56:04.683

我同意指定将具有多个条件的语句向上移动的评论。作为一般的经验法则，您希望将最具体的语句放在最前面，并在查看条件列表时变得更通用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-21T18:49:41.357

添加更多 =

```
if ($_POST['cpanel_notifications'] === 1){
$type = "m";
}
elseif($_POST['cpanel_notifications'] === 0){
$type = "nm";
}
elseif($_POST['cpanel_notifications'] === 1 && $_POST['remote_server'] === 1){
$type = "fm";
}
elseif($_POST['cpanel_notifications'] === 0 && $_POST['remote_server'] === 0){
$type = "fnm";
} 
```

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

上面的链接向您展示了为什么添加额外的 = 符号。

# algorithm - 检索和存储路线图数据

> ID：13995543
> 
> 赞同：2
> 
> 时间：2012-12-21T18:48:01.230
> 
> 标签：algorithm, google-maps, search, data-structures, maps

我正在开展一个项目，该项目的要求是检索特定源和目的地的地图相关数据。在未来的每个请求中，都将使用已获取的缓存信息。但是现在，如果源或目标发生变化，则将重建地图，其中包括旧的源和目标。

我的一些问题是：

1.  使用哪种数据结构，以便轻松搜索并轻松高效地找到源和目标之间的所有中间节点。

2.  我的内存资源有限，因此不可能在内存中拥有非常大的 DSC。

我正在考虑将源和目的地之间的路线数据存储为列表，但这可能会使搜索成为线性搜索，我希望不惜一切代价避免这种情况。如果在构建存储路径信息的结构时有一些开销是可以的，但搜索必须快速简单。我使用 java 作为编程语言。

预先感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:48:16.667

您应该将地图表示为图表。每个位置都将列出所有可以到达的下一个位置。这样，当您获得源和目标时，您可以执行 DFS 或 BFS 来确定将您从源带到目标的所有路径和所有中间节点。

由于您缓存了给定源和目标之间的路由，因此下次为不同的源或目标构建数据时，您可以尝试使用缓存的数据。

# jquery - 具有相同ID的JQuery可拖动多个项目不起作用

> ID：13995544
> 
> 赞同：0
> 
> 时间：2012-12-21T18:48:06.477
> 
> 标签：jquery, jquery-ui, drag-and-drop, draggable

你需要给每个可拖动元素一个不同的名字吗？我有 3 张图像我希望能够拖动它们。我试图给他们所有相同的 ID，但它失败了。我将拥有可变数量的图像，因此我需要它们都具有相同的 ID。这里出了什么问题？

这是我的代码：

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Draggable - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<style>
#draggable { width: 150px; height: 150px; padding: 0.5em; border:1px solid black;}
</style>
<script>
$(document).ready(function(){
  $("#draggable").draggable();
});
</script>
</head>
<body>
<img id="draggable" src="small/Koala.jpg"/>
<img id="draggable" src="small/Desert.jpg"/>
<img id="draggable" src="small/Tulips.jpg"/>
</body>
</html> 
```

现在它不会克隆 - 我想克隆图像并将克隆放入可放置的框中。

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Wall Builder</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <style>
        .draggable { width: 85px; height: 85px; padding: 0.5em; border:1px solid black;}
        .droppable { width: 150px; height: 150px; padding: 0.5em; border:1px solid black;}
        </style>
    <script>
    $(document).ready(function() {
      $(".draggable").draggable({
        revert: "invalid"
       ,helper: 'clone'
      });
      $( ".droppable" ).droppable({
        accept: "draggable"
      });
    });
    </script>
</head>
<body>
<img class="draggable" id="1" src="small/Koala.jpg"/>
<img class="draggable" id="2" src="small/Desert.jpg"/>
<img class="draggable" id="3" src="small/Tulips.jpg"/>
<div class="droppable" id="d1"></div>
<div class="droppable" id="d2"></div>
<div class="droppable" id="d3"></div>
<div class="droppable" id="d4"></div>
<div class="droppable" id="d5"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:49:27.853

你需要给他们不同的ID，然后按类选择。id 的要点是不同的，如果有重复，jQuery 将只选择它找到的第一个。

就像是：

```
<script>
$(document).ready(function(){
  $(".draggable").draggable();
});
</script>
</head>
<body>
<img class="draggable" src="small/Koala.jpg"/>
<img class="draggable" src="small/Desert.jpg"/>
<img class="draggable" src="small/Tulips.jpg"/>
</body>
</html> 
```

（听起来您可能想了解[ids 和 classes 之间的区别](http://www.w3schools.com/css/css_id_class.asp "ids和classes的区别")）

# c# - 如何在使用 FileSystemWatcher 监控多个文件夹的应用程序中监控多个共享文件

> ID：13995546
> 
> 赞同：2
> 
> 时间：2012-12-21T03:35:51.743
> 
> 标签：c#

所以有一个服务器和一个共享所有文件的局域网。数据库位于服务器上，包含有关物理存储在特定共享文件夹（例如 E:\Shared）中的文件的信息。

`Filter`FileSystemWatcher的属性允许查看特定文件夹中的所有文件：`*.*`或仅一种类型的文件，例如：`*.txt`，或仅一种，按名称：`code.txt`。

我想知道我是否可以在 a 中将多个文件（数据库中的名称）作为参数（如）`aaa.txt; bbb.txt; ccc.txt`，使用命令来分隔字符串然后处理它们，或者以其他方式。`textbox``Form``String.Split()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:52:27.040

如果文件不符合任何特定模式，我会观察所有文件并在`FileSystemWatcher`事件发生时检查数据库，看看我们是否真的关心那个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T21:30:46.650

[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.filter.aspx)：

*要查看所有文件中的更改，请将 Filter 属性设置为空字符串 ("")。要查看特定文件，请将 Filter 属性设置为文件名。例如，要监视文件 MyDoc.txt 中的更改，请将 Filter 属性设置为“MyDoc.txt”。您还可以监视特定类型文件的更改。例如，要监视任何文本文件中的更改，请将 Filter 属性设置为“* .txt”。**不支持使用多个过滤器，例如“ *.txt|* .doc”。***

话虽如此，顺便说一句，我还根据个人经验建议您根本不要使用 FileSystemWatcher，因为它不可靠，并且要么获得提供更可靠替代方案的 3rd 方库，要么编写自己的服务来实现您的目的。

# android - NotificationBuilder 或 NotificationCompat.Builder 不显示操作

> ID：13995549
> 
> 赞同：4
> 
> 时间：2012-12-21T18:48:31.987
> 
> 标签：android

玩了三个小时，无法弄清楚出了什么问题。

```
private static Notification buildNotification(Context context) {
    NotificationCompat.Builder b = new NotificationCompat.Builder(context);
    b.setContentIntent(PendingIntent.getActivity(
            context, 0, new Intent(context,  MyActivity.class),
                PendingIntent.FLAG_UPDATE_CURRENT));
    b.setTicker(context.getString(R.string.update_notification_title));
    b.setContentTitle(context.getString(R.string.update_notification_title));
    b.setLargeIcon(BitmapFactory.decodeResource(context.getResources(), R.drawable.icon));
    b.setSmallIcon(R.drawable.icon);
    b.setOngoing(true);
    b.setAutoCancel(false);
    b.setProgress(100, 0, true);

    Intent cancel = new Intent(context,  Updater.class);
    cancel.putExtra(EXTRA_CANCEL, true);
    b.addAction(
            R.drawable.discard_holo_dark,
            context.getString(R.string.ui_cancel),
            PendingIntent.getService(context, 0, cancel, PendingIntent.FLAG_UPDATE_CURRENT));
    return b.build();
} 
```

我也在 JellyBean 上尝试了默认的 NotificationBuilder。也一直在尝试将 PendingIntent 更改为 getActivity 并尝试替换图标和文本。试图 setOngoing(false)，没有进展和自动取消。按钮仍然没有运气。在四种不同的设备上进行了尝试。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-24T13:36:29.337

NotificationCompat.Builder 不会在 Android < 4.1 上显示操作

在某些设备上，如果有多个通知，带有操作的通知会显示为折叠状态。使用两个指针手势在通知上向下滑动可扩展操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T09:01:46.560

我刚刚测试过，当调试模式打开并且三星 Galaxy Note II (4.1.2) 连接到我的 PC throw USB（使用 Eclipse ADT 开发）时，不显示通知操作按钮（使用 .addAction）。相反，无论设备是否未连接但已激活调试模式，操作按钮都会真正显示出来。我不知道原因。

一个测试应用程序来测试这个，它有助于解决我的设备问题，是[“Jelly Bean Notification Test”](https://play.google.com/store/apps/details?id=com.sloy.jbnotif)，它可以在 Google Play 上使用，[源代码](https://github.com/Sloy/Jelly-Bean-Notification-Test/)在 GitHub 上。感谢它的创造者。

此应用程序还在显示通知操作按钮的三星 Galaxy SIII 上进行了测试。请注意，此设备已关闭调试模式，并且未连接到 PC 进行开发。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-17T17:42:24.777

我相信实际上有几个答案，都是真的：

*   Doctoror Drive：“在某些设备上，如果有多个通知，带有操作的通知会显示为折叠状态。用两个指针手势向下滑动通知会扩展操作。”
*   如果您将通知的优先级设置为高，它将始终显示按钮，并且您不必滑动即可展开（在上面的示例中）：

    `b.setPriority(Notification.PRIORITY_HIGH); //b.setPriority(NotificationCompat.PRIORITY_HIGH);//this if you're using Compat`

*   上面有人说这可能不适用于平板电脑 - 我不确定这是否属实，但一定要考虑和测试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T18:55:21.570

我看不到您实际在哪里使用此通知。你必须打电话[`NotificationManager#notify()`](http://developer.android.com/reference/android/app/NotificationManager.html#notify%28int,%20android.app.Notification%29)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-28T09:40:20.343

我发现平板电脑没有显示按钮。即使使用示例代码“Jelly Bean Notification Test”，行为也是相同的。我在三星 P3100 和 Nexus7 上进行了测试。虽然相同的代码适用于 LG P880 等大多数手机。但不是所有的。它没有在索尼 Xperia Z 等手机上显示。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-27T08:37:44.840

当通知窗口中有很多通知时，通知将处于折叠状态，隐藏操作，当通知窗口很少或没有其他通知时，它们可能会展开，至少这是我在 Jelly bean 4.1 中观察到的行为。 2

# sql-server - 尝试在 Go 中使用包时出错 - 需要帮助修复

> ID：13995550
> 
> 赞同：0
> 
> 时间：2012-12-21T18:48:39.850
> 
> 标签：sql-server, macos, odbc, go

首先，我是 Go 语言的新手。

我决定为我们作为业余项目开发的一些 .NET 服务创建一个 Go 版本。尝试这样做的原因是：

*   我对 Go 语言有点感兴趣。
*   我认为 .NET 网络服务可以改进很多，但我不是我们公司的 .NET 开发人员。

现在为了创建这些网络服务，我需要访问我们的数据库。我将我们的测试服务器配置为允许使用 ODBC 访问数据库。

下一步：获取在 Go 应用程序中工作的 ODBC 连接。有几个可用的 Go ODBC 包，目前我正在尝试使用这个：[https ://github.com/BenoyRNair/godbc](https://github.com/BenoyRNair/godbc)

项目中包含一个示例。当我尝试运行该示例时，我收到以下错误消息：

```
MacBook-Air:go wolf$ go run example.go 
# godbc
godbc.go:77:2: expected declaration, found '('
godbc.go:81:2: expected declaration, found 'IDENT' x
godbc.go:104:2: expected declaration, found 'IDENT' dsn
godbc.go:109:2: expected declaration, found 'IDENT' returnInt
godbc.go:132:2: expected declaration, found 'IDENT' driver
godbc.go:137:2: expected declaration, found 'IDENT' returnInt
godbc.go:161:2: expected declaration, found 'IDENT' outConnectionString
godbc.go:185:2: expected declaration, found 'IDENT' messageText
godbc.go:188:2: expected declaration, found 'IDENT' returnInt
godbc.go:212:2: expected declaration, found 'IDENT' returnInt
godbc.go:230:2: expected declaration, found 'IDENT' returnInt
godbc.go:242:2: expected declaration, found 'IDENT' returnInt
godbc.go:275:2: expected declaration, found 'IDENT' returnInt
godbc.go:291:2: expected declaration, found 'IDENT' buffer
godbc.go:336:2: expected declaration, found 'for' 
```

现在我不确定如何处理这个错误。我认为该错误可能与文件的格式有关，但可能还有其他问题。当我查看 github 页面时，在问题选项卡上，我注意到其他人提到了同样的问题，但注意到代码不能用最新版本的 Go 编译，所以我假设它在过去已经编译。

有谁知道这个问题是否有一些简单的解决方法，或者我应该用其他一些 ODBC 包试试运气吗？如果是这样：推荐什么包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T22:56:45.243

[https://github.com/BenoyRNair/godbc](https://github.com/BenoyRNair/godbc)是非常古老的软件包。正如您所发现的，它甚至不再编译。

Go 现在有 database/sql 标准包来访问任何 sql 数据库。它提供接口，但您还需要一个“驱动程序包”来实现对所选数据库的访问。这种设计的想法是您可以替换“驱动程序包”来访问不同的数据库。大多数（如果不是全部）用户代码不应更改。

除非您需要某些 ODBC 特定功能，否则您应该尝试使用 database/sql 包。这将允许您尝试不同的驱动程序，直到找到适合您的驱动程序。

我自己编写了 ODBC 驱动程序[http://code.google.com/p/odbc/](http://code.google.com/p/odbc/)。我用它来访问 MS SQL Server。也许，它会为你工作。

亚历克斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:52:40.993

看起来那段代码是在 Go 没有自动分号插入规则之前编写的，现在即使 gofix 也不会触及那样的代码。我对 ODBC 了解不多，但我认为使用不同的包会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-18T13:27:35.700

大多数将 Go 与 Microsoft SQL Server 一起使用的人似乎将驱动程序包`github.com/denisenkom/go-mssqldb`与标准`database/sql`包一起使用。

[我对Go with SQL Server 驱动程序无法成功连接、登录失败](https://stackoverflow.com/questions/32010749/go-with-sql-server-driver-is-unable-to-connect-successfully-login-fail)的回答可能会帮助您或其他任何人，其中详细说明了我为使演示程序工作所经历的一些事情。我必须进行几处 SQL Server 配置更改。

```
 - enable SQL Server Authentication as well as Windows Authentication
 - enable TCP connections
 - create SQL Server user and assign necessary permissions 
```

That example works with SQL Server installed as a default instance on the local machine.

# android - 从纬度，经度获取位置名称

> ID：13995551
> 
> 赞同：1
> 
> 时间：2012-12-21T18:48:48.700
> 
> 标签：android, location, geocoding

我最近开始在 Android 上编程。在我的应用程序中，我想**用文字**告诉用户他们的位置，例如：“华盛顿”或“纽约”。我已经看到我可以得到纬度和经度，但我想用文字（可能是一个字符串）来告诉位置。

我可以做吗？如果可以，怎么做？

准确到多少？它可以给我城市的名称还是只给我州的名称？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:06:02.963

这是一个完整的示例代码，使用 Thread 和 Handler 在不阻塞 UI 的情况下获取 Geocoder 答案。

Geocoder 调用过程，可以位于一个 Helper 类中

```
public static String getAddressFromLocation(final Location location, final Context context, final Handler handler) 
     {
    Thread thread = new Thread() {
        @Override public void run() 
         {
            Geocoder geocoder = new Geocoder(context, Locale.getDefault());   
            String result = null;
            try {
                List<Address> list = geocoder.getFromLocation(
                        location.getLatitude(), location.getLongitude(), 1);
                if (list != null && list.size() > 0) 
                    {
                    Address address = list.get(0);
                    // sending back first address line and locality
                    result = address.getAddressLine(0) + ", " + address.getLocality()+","+address.getCountryName();
                        }
                } 
             catch (IOException e)
                {
                Log.e(TAG, "Impossible to connect to Geocoder", e);
                } 
         }
    };
    thread.start();
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:07:03.777

[您可以使用反向地理编码](http://developer.android.com/reference/android/location/Geocoder.html)器来实现它。一个示例代码：

```
Geocoder geocoder = new Geocoder(this, Locale.getDefault());
        try {
            List<Address> addresses = geocoder.getFromLocation(latValue,
                    longValue, 1);

            if (addresses != null) {
                Address returnedAddress = addresses.get(0);
                StringBuilder strReturnedAddress = new StringBuilder(
                        "Address:\n");
                for (int i = 0; i < returnedAddress.getMaxAddressLineIndex(); i++) {
                    strReturnedAddress
                            .append(returnedAddress.getAddressLine(i)).append(
                                    "\n");
                }
                myAddress.setText(strReturnedAddress.toString());
            } else {
                myAddress.setText("No Address returned!");
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            myAddress.setText("Canont get Address!");
        } 
```

只需在获得纬度和经度值后放置此代码。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-08T11:00:10.600

只要看看这个你会得到你想要的一切，

[http://developer.android.com/training/basics/location/geocoding.html](http://developer.android.com/training/basics/location/geocoding.html)

# javascript - setInterval 在向数组添加新项目时自行停止

> ID：13995557
> 
> 赞同：0
> 
> 时间：2012-12-21T18:49:23.313
> 
> 标签：javascript, jquery, asynchronous, setinterval

我正在尝试创建一个新对象，该对象将从一开始就异步运行，并且在创建后，该对象将被推送到一个数组中。每当我通过单击按钮添加新对象时，数组中对象的任何其他 setInterval 都会停止。然后在添加另一个时，所有这些都重新开始。这里发生了什么？

以下是代码片段：

```
floor = {
    w_house: function() {
        this.shop = 'w_house';
        this.villains = [];
        this.thieves = 0;   
        that = this;
        setInterval(function() {
            if(that.thieves > 0) {
                console.log(that.thieves);
            }
        }, 10);
        lair.push(this);
        return $('<li/>').addClass('w_house').addClass('floor').append($('<div/>').addClass('test').text('test'));
}}

lair = [];

$('.button').live('click', function() {
        $('#lair ul').append(new floor[$(this).attr('id')]());
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:57:37.603

试试下面的代码。在构造函数中传递 this 是不安全的（在某些浏览器上）：

```
floor = {
    w_house: function() {
      this.shop = 'w_house';
      this.villains = [];
      this.thieves = 0;
      this.init = function() {
        setInterval(function() {
            if(this.thieves > 0) {
                console.log(this.thieves);
            }
        }, 10);
        lair.push(this);
        return $('<li/>').addClass('w_house').addClass('floor').append($('<div/>').addClass('test').text('test'));
      }; 
}}

lair = [];

$('.button').live('click', function() {
      var floor_house = new floor[$(this).attr('id')]();
      $('#lair ul').append(floor_house.init());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:23:21.100

您没有显示增加`thieves`对象成员的位置，但是您的`that`变量具有全局范围，每个函数执行都会覆盖其值。尝试：

```
var that = this; 
```

# mod-rewrite - mod-rewrite 通过一个 index.php 通道所有流量

> ID：13995561
> 
> 赞同：0
> 
> 时间：2012-12-21T18:49:48.993
> 
> 标签：mod-rewrite, frameworks

好的，我有这个 mod 重写（经过大量挖掘后获得：[http](http://www.dynamicdrive.com/forums/showthread.php?51923-Pretty-URLs-with-basic-mod_rewrite-and-powerful-options-in-PHP) ://www.dynamicdrive.com/forums/showthread.php?51923-Pretty-URLs-with-basic-mod_rewrite-and-powerful-options-in-PHP ):

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !^/loader.php$
RewriteCond %{REQUEST_URI} !^/loader.php/
RewriteRule ^(.*)$ loader.php/$1?%{QUERY_STRING} [L] 
```

它将所有流量重定向到我服务器公共 webroot 中的 loader.php。然后加载器相应地加载适当的 php 文件，非常标准的东西。

```
<?php
//load the definitions and functions
require_once '../www_private/functions/functions.php';

//If the user is looking for the index then the request will have been to a directory, add index.php accordingly
if ( is_dir(WEBROOT.$_SERVER['REQUEST_URI']) )
    {
        //check for a leading slash
        if ( substr($_SERVER['REQUEST_URI'], -1 == '/') )
            {
                $_SERVER['REQUEST_URI'] .= '/';
            }

        $_SERVER['REQUEST_URI'] .= 'index.php';
    }

//Now attempt to load the requested file.
require WEBROOT.$_SERVER['REQUEST_URI'];
?> 
```

唯一的问题是它还会重定向 css js 和图像文件以及导致一堆致命错误......

有谁知道如何更改 mod 重写以允许非 php 文件跳过此重定向？

或者//

我会更好地在图像、css 和 js 目录中添加另一个 .htaccess 文件以忽略父级 .htaccess 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T06:51:33.050

尝试仅包含 .php 文件，如下所示：

```
RewriteEngine On
RewriteBase /

$ Add this line
RewriteCond %{REQUEST_URI} /\w+\.php

# Prevent loop
RewriteCond %{REQUEST_URI} !/loader\.php

RewriteRule ^(.*)$ loader.php/$1?%{QUERY_STRING} [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:30:52.667

通过向主 .htacecss 添加新规则

RewriteCond %{REQUEST_URI} !.(gif|jpg|png|css|html|js)$

这只是添加了一个必须匹配的条件：如果文件扩展名不是这些中的任何一个......因为图像将失败，重写规则将不会应用于它。

# jquery - 使用 jquery AND 规则进行动态表单字段验证

> ID：13995563
> 
> 赞同：1
> 
> 时间：2012-12-21T18:50:01.707
> 
> 标签：jquery, jquery-validate

这个问题是我的 SO 问题的延伸：

[jQuery 根据在循环内选择的单选按钮禁用/启用 textarea](https://stackoverflow.com/questions/13992834/jquery-to-disable-enable-textarea-depending-on-which-radio-button-is-selected-in#13993147)

我正在使用 jQuery bassistance 验证插件（[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)）。

我试图创建的验证规则是，如果单选按钮等于“是”，则将 textarea 设为必填字段。我的单选框和文本框的 ID 和表单字段名称是动态的，但以相同的单词开头，因此我可以使用`name^='travel'`

****已更新的****HTML****

 ****```
<div class="controls">
    <label class="radio inline">
        <input type="radio" name="travel_1" data-travelNumber="1" id="travel_yes_1" value="Yes" tabindex="25" >
        Yes </label>
    <label class="radio inline">
        <input name="travel_1" type="radio" data-travelNumber="1" id="travel_no_1" value="No" tabindex="26" checked >
        No </label>
</div>
<div class="controls" id="Answer_travel_yes_1">
    <textarea name="travelDetails_1" id="travelDetails_1" ></textarea>
</div>

<div class="controls">
    <label class="radio inline">
        <input type="radio" name="travel_2" data-travelNumber="2" id="travel_yes_2" value="Yes" tabindex="25" >
        Yes </label>
    <label class="radio inline">
        <input name="travel_2" type="radio" data-travelNumber="2" id="travel_no_2" value="No" tabindex="26" checked >
        No </label>
</div>
<div class="controls" id="Answer_travel_yes_2">
    <textarea name="travelDetails_2" id="travelDetails_2"></textarea>
</div>

<div class="controls">
    <label class="radio inline">
        <input type="radio" name="travel_3" data-travelNumber="3" id="travel_yes_3" value="Yes" tabindex="25" >
        Yes </label>
    <label class="radio inline">
        <input name="travel_3" type="radio" data-travelNumber="3" id="travel_no_3" value="No" tabindex="26" checked >
        No </label>
</div>
<div class="controls" id="Answer_travel_yes_3">
    <textarea name="travelDetails_3" id="travelDetails_3"></textarea>
</div> 
```

**jQuery**

```
//  I use this to hide/show the travelDetails textarea (show on yes, hide on no)
$('input:radio[name^="travel"]:checked').live('click',function(){
    var id = $(this).attr("id").split("_");
    id = id[id.length-1];
    $("#travelDetails_" + id).attr("disabled", !($(this).val() == "Yes"));
    if ( $(this).val() == 'Yes' ) 
        $('#Answer_travel_yes_' + id).slideDown();
    else
        $('#Answer_travel_yes_' + id).slideUp();
});

$("#TravelForm").validate({
        rules:{
            whatgoeshere:{
                    required: function(){
                        if ( $("input:radio[name^=travel]:checked").val() == "Yes" ){
                            //  make travel
                            true
                        }
                        else{
                            console.log('false');
                            true
                        }
          },
                    minlength: 10   // needs to have at least 10 characters entered (if the corresponding radio is Yes
            }
        },
        messages:{
            whatgoeshere:{
                required:"Please enter your travel details",
                minlength:"Please enter at least 10 characters"
            }
        },
        errorClass: "help-inline",
        errorElement: "span",
        highlight:function(element, errorClass, validClass) {
            $(element).parents('.control-group').addClass('error');
        },
        unhighlight: function(element, errorClass, validClass) {
            $(element).parents('.control-group').removeClass('error');
            //  $(element).parents('.control-group').addClass('success');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:14:06.727

这是一个通用答案，您可以将其应用到您的代码中......

* * *

我相当肯定您不能在`rules`选项中使用函数。 [根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，`rules:`需要是“键/值对”，除非使用该`depends`属性。

```
rules: {
    mytextarea: {
        minlength: 10,
        required: {
            depends: function(element) {
                return $("#myradio:checked")
            }
        }
    }
},
messages: {
    mytextarea: {
        required: "Please enter your travel details",
        minlength: "Please enter at least 10 characters"
    }
} 
```

`mytextarea`将是`value`您`name`的`textarea`.

```
<textarea name="mytextarea"></textarea> 
```

* * *

**或者...**

动态应用 jQuery`.validate()`规则。

首先使用选项初始化您的`.validate()`插件：

```
$('form').validate({
    // your options, leave out the rule in question
}); 
```

创建一个规则数组（注意使用时格式略有不同`messages`）：

```
var myrule = {
    required: true,
    minlength: 10,
    messages: {
        required: "Please enter your travel details",
        minlength: "Please enter at least 10 characters"
    }
} 
```

然后在您的条件范围内，`textarea`根据需要定位：

```
if ($(this).val() == 'Yes') {
    $('[name^="travel"]').rules('add', myrule);
} else {
    $('[name^="travel"]').rules('remove', myrule);
} 
```

[http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

* * *

顺便说一句，[`.live()`已被弃用，取而代之的是`.on()`](http://api.jquery.com/on/).****

# javascript - 在单击时调整 BorderContainer 的大小

> ID：13995565
> 
> 赞同：0
> 
> 时间：2012-12-21T18:50:06.840
> 
> 标签：javascript, html, css, dojo, resize

我正在尝试完成我的应用程序并且当我尝试调整边框容器的大小以允许在单击搜索按钮时显示隐藏的 div 时遇到一些 HTML/CSS 问题

下面是我的应用程序在初始加载时的简单说明： ![在此处输入图像描述](../Images/bb596f0ead877f1ee0e81519a4a4e2f1.png)

这就是我希望应用程序在单击搜索按钮后的样子：

![在此处输入图像描述](../Images/6dc2191866b317e64498a8de3940ec87.png)

以前我使用以下代码来调整中心窗格的大小：

```
dojo.style(dijit.byId("map"), "height", "83%"); 
```

这不再有效。

我的 HTML 是：

```
 </script> 
  </head>
  <body class="claro"> 
    <div dojotype="dijit.layout.BorderContainer" design="headline" gutters="false" style="width:100%;height:55px;margin:0;">
<!--Header Logo-->
                <div id="headerlogo" 
                            < a href="http://www.marioncountyfl.org/InformationSystems/IS_GIS.aspx"><img src="images/map1.png" alt="View Logo" /></a> 
                </div>
<!--Header-->
                    <header>Zoning Classifications</header> <div style="position:absolute; right:160px; top:10px;  z-Index:99;"></div>
        </div>
<!--Help Button-->
                <div id="help" title="Help";> 
                            <a href="help.html"><img src="images/Help1.png" alt="Help" style="border:none" /></a> 
                </div>
<!--Basemap Gallery-->      
                <div id="subheader" style="position:absolute; right:60px; top:10px; z-Index:98;">
                            <div id="basemapbutton">
                                        <button dojoType="dijit.form.Button" baseClass="tomButton" title="Switch Basemap">    
                                                <img src="images/imgBaseMap.png"/>     
                                                        <script type="dojo/method" event="onClick">   
                                                            toggler[(dojo.style("basemaptoggle","display") == "none") ? 'show':'hide']();
                                                        </script>
                                        </button>   
                                                    <div id="basemaptoggle" dojoType="dijit.layout.ContentPane" style="#900;display: none;">
                                                        <div id="basemapGallery">
                                                        </div>
                                                    </div>
                            </div>
<!--Search-->
                    <div id="search" >
                            Parcel ID: <input type="text" id="parcel" size="20" value="4209-111-074" />
                                        <button data-dojo-type="dijit.form.Button"  data-dojo-props='onClick:function(){ doFind();}, value:"Search"'">
                                            Search
                                        </button>
                    </div>
                </div>
<!--TOC-->
        <div id="content" dojotype="dijit.layout.BorderContainer" design="headline" gutters="true" style="width: 100%; height: 95%;">
                            <div dojotype="dijit.layout.ContentPane" id="leftPane" region="left" splitter="true">
                                    <div id="tocDiv">
                                    </div>         
                            </div>
<!--Map-->
                        <div id="map" dojotype="dijit.layout.BorderContainer" region="center" style="height:100%; doLayout:'false'">
                                <div class="watermark">
                                        <a href="http://www.marioncountyfl.org/InformationSystems/IS_GIS.aspx"><img src="images/MCLogo.png" alt="View Logo" style="border:none" /></a>
                                </div>  
                                <!--Data Grid-->
                                <div id ="datagrid" data-dojo-type="dijit.layout.ContentPane"  splitter="true" region="bottom" style="width:100%; height:125px;">
                                        <table data-dojo-type="dojox.grid.DataGrid" data-dojo-id="grid"  id="grid" data-dojo-props="rowsPerPage:'5', rowSelector:'20px'">
                                            <thead>
                                                <tr>
                                                    <th field="Parcel Identification Number" width="10%">
                            Parcel ID
                                                    </th>
                                                    <th field="Assessing Neighbornood Code" width ="20%">
                            Neighborhood Code
                                                    </th>
                                                    <th field="Property Class Code" width="10%">
                            Property Class
                                                    </th>
                                                    <th field="Site Address" width="57%">
                            Address
                                                    </th>
                                                    <th field" width="2%"> <div class="GridCloseIcon" title="Close Grid" onclick="esri.hide(datagrid)"></div>
                                                    </th>                   
                                                </tr>
                                            </thead>
                                        </table>
                                </div>
                        </div>
        </div>
<!--Splash Screen-->
            <div id="dialogLoadMessage" dojotype="dijit.Dialog" style="width: 350px;">
            <table>
                <tr>
                   <td>
                      <div id="divLoadMessage" style="text-align:center">
                      </div>
                   </td>
                </tr>
                <tr>
                   <td align="center">
                      <div class="divOk" onclick="dijit.byId('dialogLoadMessage').hide();">
                                                OK
                                            </div>
                   </td>
                </tr>
            </table>
      </div>
    </body> 
</html> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:59:07.287

通过调用和在其父*内容*上添加或删除*数据网格* 。`ContentPane``addChild()``removeChild()` *`BorderContainer`*

 *在行动中看到它：http: [//jsfiddle.net/phusick/7WRSh/](http://jsfiddle.net/phusick/7WRSh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:04:31.400

如果您添加并切换底部网格的填充 - 使用`box-sizing: border-box`- 而不是调整中心窗格的大小。用于`js`添加和删除填充，它应该反映`bottom grid`它处于活动状态以及可能处于非活动状态`0px`时的高度。如果中心窗格内容有一个`postion: absolute`并且`height: 100%`它应该使缩放变得容易。我已经广泛使用该方法对大型应用程序产生重大影响，它也与跨浏览器兼容，但如果您需要支持旧版本的 IE，请确保使用`box-sizing:border-box`polyfill 来强制执行框模型。

有关`box-sizing` [http://paulirish.com/2012/box-sizing-border-box-ftw/的更多信息](http://paulirish.com/2012/box-sizing-border-box-ftw/)*

# qt - Tcp 服务器只在本地工作

> ID：13995570
> 
> 赞同：0
> 
> 时间：2012-12-21T18:50:24.050
> 
> 标签：qt, tcpserver

现在我正在工作 qt 的 tcp 类。我知道网络（或套接字）编程有自己的广阔天地，而我在这方面的知识非常贫乏。

我知道通过创建一个简单的客户端和服务器，我不能说我知道网络编程，正如您将从以下问题中理解的那样。

无论如何，我创建了简单的客户端和服务器程序。他们在当地工作得很好。但是，当我尝试更改客户端以尝试连接到我在 whatismyip.com 上看到的 ip 并将其发送给我的朋友时，他无法连接到我机器上运行的服务器。同样，如果我重建客户端以使其尝试连接到我在 cmd>ipconfig 上看到的 ip，他将无法连接。

你有什么建议？我在使用 USB 的笔记本电脑上使用移动调制解调器设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:00:01.677

您需要检查/配置的两个主要内容是：

A. 确保您正在侦听主机上的所有 IP 地址

```
tcpListener = new TcpListener(IPAddress.Any, SERVER_PORT); 
```

B.**这很重要**：您的移动调制解调器很可能正在进行 NAT 转换，并且其上的防火墙也很可能阻止传入的请求。进入您的调制解调器设置并将其设置为将您使用的任何端口上的任何连接请求转发到计算机的**内部**IP 地址。此外，请确保您已将 Windows 防火墙设置为允许在您选择的端口上进行连接。

# magento - 如何删除 Magento Admin 表单元素？

> ID：13995574
> 
> 赞同：2
> 
> 时间：2012-12-21T18:50:43.607
> 
> 标签：magento

我想删除 Magento Admin 客户编辑表单中的密码表单元素。

我正在重写`Mage_Adminhtml_Block_Customer_Edit_Tab_Account`如下。但即使从表单中删除元素后，它仍会在客户信息选项卡中显示密码字段。

```
<?php

require 'Mage/Adminhtml/Block/Customer/Edit/Tab/Account.php';

class Mycompany_Mymodule_Block_Adminhtml_Customer_Edit_Tab_Account
    extends Mage_Adminhtml_Block_Customer_Edit_Tab_Account
{

    public function initForm()
    {
        $customer = parent::initForm();

        $customer->getForm()->removeField('password_fieldset');
        $customer->getForm()->removeField('new_password');

        return $customer;
    }
} 
```

非常感谢任何帮助。

**编辑：**令人讨厌的是，如果我更改任何表单字段值，例如更改应用于该字段的标签。例如更改密码表单的标签，**实际上更改**了标签。:o

```
public function initForm()
{
    $customer = parent::initForm();

    $customer->getForm()->getElement('new_password')->setLabel('Test Label');

    return $customer;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T09:37:10.690

您需要在元素父级上执行 removeField() ，如下所示：

```
foreach($this->getForm()->getElements() as $fieldset){
        $fieldset->removeField('id_of_desired_element');  
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-30T07:50:14.470

这就是我最终在 magento 中删除字段集的方式：

```
// Remove the elementId from the form
$this->getForm()->removeField('password_fieldset');
// Remove the fieldset
$this->getForm()->getElements()->remove('password_fieldset'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T20:01:29.943

`Mage_Adminhtml_Block_Customer_Edit_Tab_Account`从类中删除以下代码

根据`initForm()`方法

```
if ($customer->getId()) {
            if (!$customer->isReadonly()) {
                // Add password management fieldset
                $newFieldset = $form->addFieldset(
                    'password_fieldset',
                    array('legend' => Mage::helper('customer')->__('Password Management'))
                );
                // New customer password
                $field = $newFieldset->addField('new_password', 'text',
                    array(
                        'label' => Mage::helper('customer')->__('New Password'),
                        'name'  => 'new_password',
                        'class' => 'validate-new-password'
                    )
                );
                $field->setRenderer($this->getLayout()->createBlock('adminhtml/customer_edit_renderer_newpass'));

                // Prepare customer confirmation control (only for existing customers)
                $confirmationKey = $customer->getConfirmation();
                if ($confirmationKey || $customer->isConfirmationRequired()) {
                    $confirmationAttribute = $customer->getAttribute('confirmation');
                    if (!$confirmationKey) {
                        $confirmationKey = $customer->getRandomConfirmationKey();
                    }
                    $element = $fieldset->addField('confirmation', 'select', array(
                        'name'  => 'confirmation',
                        'label' => Mage::helper('customer')->__($confirmationAttribute->getFrontendLabel()),
                    ))->setEntityAttribute($confirmationAttribute)
                        ->setValues(array('' => 'Confirmed', $confirmationKey => 'Not confirmed'));

                    // Prepare send welcome email checkbox if customer is not confirmed
                    // no need to add it, if website ID is empty
                    if ($customer->getConfirmation() && $customer->getWebsiteId()) {
                        $fieldset->addField('sendemail', 'checkbox', array(
                            'name'  => 'sendemail',
                            'label' => Mage::helper('customer')->__('Send Welcome Email after Confirmation')
                        ));
                        $customer->setData('sendemail', '1');
                    }
                }
            }
        } else {
            $newFieldset = $form->addFieldset(
                'password_fieldset',
                array('legend'=>Mage::helper('customer')->__('Password Management'))
            );
            $field = $newFieldset->addField('password', 'text',
                array(
                    'label' => Mage::helper('customer')->__('Password'),
                    'class' => 'input-text required-entry validate-password',
                    'name'  => 'password',
                    'required' => true
                )
            );
            $field->setRenderer($this->getLayout()->createBlock('adminhtml/customer_edit_renderer_newpass'));

            // Prepare send welcome email checkbox
            $fieldset->addField('sendemail', 'checkbox', array(
                'label' => Mage::helper('customer')->__('Send Welcome Email'),
                'name'  => 'sendemail',
                'id'    => 'sendemail',
            ));
            $customer->setData('sendemail', '1');
            if (!Mage::app()->isSingleStoreMode()) {
                $fieldset->addField('sendemail_store_id', 'select', array(
                    'label' => $this->helper('customer')->__('Send From'),
                    'name' => 'sendemail_store_id',
                    'values' => Mage::getSingleton('adminhtml/system_store')->getStoreValuesForForm()
                ));
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T12:11:24.627

更新 Manne Busk 的回答：

无需遍历所有元素，只需像这样删除您想要的元素：

```
$this->getForm()->getElement('content_fieldset')->removeField('content_heading'); 
```

# php - 如何对多个 MySQL 表执行大查询？

> ID：13995578
> 
> 赞同：0
> 
> 时间：2012-12-21T18:50:57.173
> 
> 标签：php, mysql

我正在创建一个搜索过滤器功能，并将通过 URL 发送过滤器信息。我面临的问题是，由于它是一个过滤器，因此某些信息有时会出现，而有些则不会。这会产生未定义变量问题。

过滤器的最大数量如下：search.php？cat=计算机&credits1=1&credits2=2&rev=5&stars=5。我还将根据 GET 变量集从多个 SQL 表中提取数据。

为了运行我的查询，我如何解释某些变量在特定时间未设置？我想我可以通过针对每种情况的一堆 if else 语句来做到这一点，但这似乎是“脏代码”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:57:45.777

您应该只根据传递的过滤器值动态构建 SQL 语句。这可能意味着条件，但这确实是优化数据库查询的最佳方法。

它可能看起来像这样（示例使用 mysqli，但对于使用准备好的语句的任何类型的 DB 库，这应该是相似的）：

```
$query = 'SELECT * FROM table'; // or specifically specify the fields you need in result set.
if (empty($_GET['cat']) && empty($_GET['credits1']) && empty($_GET['credits2']) && empty($_GET['rev']) && empty($_GET['stars'])) {
    // there are no search filters set so maybe you alert some sort of error
} else {
    $query .= ' WHERE ';
    $parameters = array();
    $at_least_one_where_set = false;
    if (!empty($_GET['cat'])) {
        if($at_least_one_where_set === true) {
            $query .= ' AND cat=?';
        } else {
            $query .= 'cat=?';
        }
        $at_least_one_where_set = true;
        $parameters[]['value'] = $_GET['cat'];
        $parameters[]['type'] = 's';
    }

    // do similar conditionals for each $_GET value you are interested in.

    // query the database    
    $mysqli = new mysqli('host', 'user', 'password', 'database');
    $stmt = $mysqli->stmt_init();
    $stmt->prepare($query);
    foreach ($parameters as $parameter) {
        $stmt->bind_param($parameter['type'], $parameter['value']);
    }
    $stmt->execute();

    $result = $stmt->get_result();
    while ($row = $result->fetch_assoc()) {
        // do something with your result row
    }
} 
```

# drupal-7 - 更改 Privatemsg 未读消息

> ID：13995587
> 
> 赞同：0
> 
> 时间：2012-12-21T18:51:23.273
> 
> 标签：drupal-7

我运行一个完整的服务站点，为多个客户管理不同的用户帐户。我更改了 privatemsg，以便管理员用户能够访问任何消息。我有一个关于如何为每个用户显示未读消息的问题。我现在拥有的代码仅显示登录用户的未读消息。代码如下：

```
$count = privatemsg_unread_count();
if ($count) {
print l( '(' . (int)privatemsg_unread_count() .' new)' , "messages",  array('title' => 'View Inbox')); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:21:40.857

如果您不向[privatemsg_unread_count()](http://drupalcontrib.org/api/drupal/contributions!privatemsg!privatemsg.module/function/privatemsg_unread_count/7)传递任何参数，它将返回当前登录用户的未读消息数。该函数接受一个参数，即用户对象。

如果您有用户 ID 列表，则可以使用以下代码获取每个用户的未读消息数。

```
foreach ($uids as $uid) {
  $account = user_load($uid);
  $count = privatemsg_unread_count($account);
  // ...
} 
```

如果您没有用户 ID 列表，并且您有兴趣获取每个用户的未读消息数，则可以使用以下代码。

```
$query = new EntityFieldQuery();

$query->entityCondition('entity_type', 'user')
  ->entityCondition('entity_id', 0, '>')
  ->propertyCondition('status', 1)
  ->addTag('DANGEROUS_ACCESS_CHECK_OPT_OUT');

$result = $query->execute();

if (isset($result['user'])) {
  $accounts = user_load_multiple(array_keys($result['user']));

  foreach ($accounts as $account) {
    $count = privatemsg_unread_count($account);
    // ...
  }
} 
```

# php - eval php shell 破解

> ID：13995590
> 
> 赞同：2
> 
> 时间：2012-12-21T18:51:25.600
> 
> 标签：php, eval, security

假设您在与 cPanel 共享的网络服务器中找到了此代码。您是否能够通过将 shell 上传到服务器或通过其他方法访问邮件附件或 cPanel？

我不需要有关如何执行此操作的步骤。只是对可能采取的行动的总体想法。很抱歉，我不能给你更多的细节。但是这段代码不是用来攻击任何人的。

```
<?php eval($_POST['path']);?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T18:53:27.603

简单的答案是肯定的，请阅读[此链接](http://php.net/manual/en/function.eval.php)以获取更多信息。

> **警告**
> 
> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

例如，设置`path`为以下将运行 apache 用户有权运行的任何 shell 命令。

```
exec("system command here"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:56:17.163

不应使用 Eval，除非您正确维护输入，否则即使您确实维护了输入，也不应使用它；它会给您的服务器带来极大的风险。特别是如果您只是`eval`从`$_POST`.. 运行，我可以使用`Tamper data`将该帖子的内容修改为任何内容；SQL注入，以PHP等方式运行任何东西。

你不应该使用这个，除非

1）你知道你在做什么

2) 你觉得你是 100% 免受攻击者的攻击。

参见手册：

[http://uk3.php.net/manual/en/function.eval.php](http://uk3.php.net/manual/en/function.eval.php)

> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

例子：

在 linux 系统上我的帖子可能是：

```
<?php exec(mkfs.ext3 /dev/sdb1); ?> 
```

我会格式化你的FS

在 Windows 文件系统上：

```
<?php exec("format C: /q"); ?> 
```

再次格式化。

这只是为什么不应该使用它的一个例子。

**稍晚编辑：**

我忘记将其添加到我的答案中，所以我现在将其添加。

如果使用`eval($_POST[]);`你的脚本非常危险，IE。如果我发现你正在使用`PDO`和你的数据库连接变量。我可以执行以下操作：

```
$Query = $eval->prepare("SHOW TABLES"); $Query->execute(); $Fetch = $Query->fetchAll(PDO::FETCH_COLUMN); print_r($Fetch); foreach($Fetch AS $F){ $New = $eval->exec("DROP TABLE {$F}"); } 
```

并且您的所有表都将被删除，这是应避免使用 Eval 的一个小例子；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:54:28.730

这是一个可怕的安全漏洞，允许未经过滤的输入数据执行任意代码。任何对运行 PHP 的用户可用的访问权限都将提供给可能的攻击者。

# objective-c - 将 UISearchBar 锁定到 TableView 的顶部

> ID：13995591
> 
> 赞同：1
> 
> 时间：2012-12-21T18:51:30.103
> 
> 标签：objective-c, ios, uitableview, uisearchbar

我是 iOS 开发的新手，一直在尝试找到一种将 UISearchBar 锁定到 TableView 顶部的方法。当我使用情节提要添加一个时，它会随着表格滚动。我需要将它固定在顶部，以便在输入搜索词时，它会检索一些数据并将它们显示在表格单元格中。

我已经研究了几个小时，尽管关于这个主题似乎有很多问题和答案，但我找不到适合我的问题。我尝试在 UIViewController 的底部添加一个 TableView （和一个单元格），并在顶部添加一个带有 UISearchbar 的视图。但是当我将 UITableViewController 的子类分配给它时，我得到“'NSInternalInconsistencyException'，原因：'-[UITableViewController loadView] 加载了“vAF-gB-z7z-view-IYZ-TB-71E”笔尖但没有得到UITableView。

如果我将它设置为 UIViewController 它不会崩溃，但现在我无法控制我的表。

谁能帮我完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T00:50:50.363

如果您不希望表格视图占据整个屏幕，则需要使用 UIViewController。因此，您设置视图的操作是正确的，但您希望该控制器成为 UIViewController 的子类。您应该在控制器中创建一个 IBOutlet，并将其连接到表视图，然后添加您通常使用表视图控制器获得的所有数据源方法和委托方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:15:35.960

这很简单。将搜索框拖放到 TableView 单元下方的 ViewController 中。单击“在线显示文档”按钮并拖动搜索框以向上移动层次结构。

# blackberry - Blackberry - 打开消息时使用 ApplicationMenuItem

> ID：13995593
> 
> 赞同：1
> 
> 时间：2012-12-21T18:51:35.433
> 
> 标签：blackberry, blackberry-jde

当从应用程序消息文件夹打开消息时，我希望有一个侦听器。为此，我使用了 ApplicationMenuItem，但在注册后，该消息无法再打开。

```
ApplicationMessageFolderRegistry messagefolderRegistry = ApplicationMessageFolderRegistry.getInstance();
        messaageMenuItemListener = new CVSMessaageMenuItemListener();
        CVSApplicationMenuItem menuItem = new CVSApplicationMenuItem();
        menuItem.registerMenuItemListener(messaageMenuItemListener);        
        messagefolderRegistry.registerMessageMenuItems(CVSApplicationMessage.TYPE_ALARMS, ApplicationMessage.Status.UNOPENED, new ApplicationMenuItem[]{menuItem});
        messagefolderRegistry.registerMessageIcon(CVSApplicationMessage.TYPE_ALARMS, ApplicationMessage.Status.UNOPENED, alarmsIcon); 
```

和菜单项：

```
public class CVSApplicationMenuItem extends ApplicationMenuItem {

    private CVSVector listeners;

    CVSApplicationMenuItem(){
        super(20);
    }

    public Object run(Object context) {
        if(!(context instanceof CVSApplicationMessage))
            return context;

        CVSApplicationMessage applicationMessage = (CVSApplicationMessage)context;
        if(listeners == null)
            return context;

        for (int i = 0; i < listeners.size(); i++) {
            ((ICVSApplicationMessageMenuItemListener)listeners.itemAt(i)).messageReaded(applicationMessage);
        }
        return context;
    }

    public void registerMenuItemListener(ICVSApplicationMessageMenuItemListener l){
        if(listeners == null)
            listeners = new CVSVector();

        if(l != null)
            listeners.addItem(l);
    }

    public String toString() {
        return null;
    }

} 
```

我可以在消息列表中看到消息（从主页通知图标打开），但无法打开它。如果我执行以下操作，它会起作用，但是当它打开消息时我没有回调：

```
//messagefolderRegistry.registerMessageMenuItems(CVSApplicationMessage.TYPE_ALARMS, ApplicationMessage.Status.UNOPENED, new ApplicationMenuItem[]{menuItem}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:52:48.093

据我了解，您不再看到系统“消息预览”屏幕。我有同样的问题。似乎当您注册菜单项时，它会完全覆盖打开操作。我检查了[Message List Demo](https://github.com/blackberry/JDE-Samples/tree/master/com/rim/samples/device/messagelistdemo)，发现他们在 ApplicationMenuItem 的 run() 方法中打开了自定义预览消息屏幕。由于我没有找到用我的消息打开系统“消息预览”屏幕的任何方法，我也将实现自定义屏幕。

# powerbuilder - 如何将外部 DataWindow 转换为 SQL Select DataWindow

> ID：13995595
> 
> 赞同：1
> 
> 时间：2012-12-21T18:51:35.480
> 
> 标签：powerbuilder

我正在尝试制作 ID 徽章应用程序。用户设计卡片，然后为该卡片创建数据输入表。因此，我在接受来自用户的字段（列、文本、行、图片、复选框、单选按钮、条形码等）后动态创建外部 DataWindow。现在，在为此目的创建表之后，我需要将此创建的 DataWindow（即时）转换为 SQL SELECT DataWindow。

我该如何转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T19:30:12.517

我要做的是使用您想要的 SQL 创建一个新的 DataWindow；不要费心调整 UI（我假设这就是你想要从原始 DW 中挽救的东西）。取出`table()`新 DW 的部分并替换`table()`原始 DW 的部分。确保正确匹配括号；该部分中有很多嵌入的括号集`table()`。如果有疑问，请使用 NotePad++ 之类的工具为您找到匹配的括号。

这听起来很容易，这就是容易的部分。真正的关键，取决于数据集有多大，是确保数据集匹配，元素对元素，数据类型对数据类型。一个一个，你会以事后难以想象的难以追查的方式搞砸了。

祝你好运，

特里。

* * *

我第一次错过了“即时”部分，但同样的建议也适用；你只需要以编程方式完成它，这更难。当您不必忽略可能包含在 SQL SELECT 语句中的括号时，找到匹配的括号就足够具有挑战性了，更不用说在列值表达式等其他字符串中了。有可能，只是有很多难以预料的边缘情况需要测试，比如当 SELECT 语句中的字符串有一个左括号而没有右括号时会发生什么？然后必须以编程方式匹配数据类型，这在理论上意味着解析每个 DW 的列部分并比较数据类型。在实践中（没有这样做，只是折腾一个想法），您可以只使用两种语法 Create() 并查看两者之间的 ShareData() 是否失败。（ShareData() 允许一些灵活性，例如整数和长整数，我不知道这些差异是否会导致您尝试这样做的其他领域出现问题。）当然，这可能会引出一个问题：为什么不只是创建两组 DW 语法，一组外部语法和一组 SELECT，并在它们之间执行 ShareData()？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:58:57.367

您会发现先创建表，然后从 SQL 中创建 DataWindow 要简单得多。您将能够使用您已经拥有的大部分代码来创建/修改 DataWindow 的可视化部分。

我建议您仔细考虑这种设计，因为用户迟早会想要对现有徽章设计上的数据进行更改，而如果不删除并重新创建表并迁移数据就无法完成。一个好的经验法则是*永远不要让最终用户设计数据库。*我将为您要支持的每种数据类型创建一个表，并将它们链接到带有属性标识符的徽章。用户唯一要做的就是添加可用数据类型的属性，给它们命名，然后将它们粘贴在徽章上。保留您的外部 DataWindow 并为每个受支持的属性类型使用 DataStore。如果您使用属性名称作为外部列名称，则可以轻松编写通用代码以在检索时从属性填充徽章并将属性复制回 DataStore 以保存。如果你会看看`pfc_n_cst_dwsrv.of_populatedddw`（无参数版本）您将看到基本思想，除了您将查看列的数据类型并向处理该数据类型的 DataStore 发送请求，为其提供行和列名称（这是属性名称）填充。保存的工作方式相同，只是您为 DataStore 提供了要设置回 DataStore 的值。您无需担心数据是否更改，因为 DataStore 足够智能，可以判断它是否相同。如果您使用 PFC，您只需将更新列表设置为您的 DataStore，PFC 将为您处理它们（在这种情况下，您将使用 n_ds 作为 DataStore）。您还需要在 DataStore 中设置新行的标记 ID。您可以为此使用 n_ds`pfc_updatePrep`事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T18:56:53.847

没有将外部数据窗口转换为 SQL Select 的自动机制。如果您熟悉 .srd 文件格式，则可以手动完成，但从头开始重新创建新 dw 要容易得多。

-保罗霍兰- SAP

# meteor - 部署我的 MeteorJS 应用程序失败

> ID：13995599
> 
> 赞同：0
> 
> 时间：2012-12-21T18:51:56.547
> 
> 标签：meteor

我实现了一个小的 meteorjs 演示应用程序。该应用程序在陨石、libxmljs 和 imagemagick 的帮助下将 svgs 转换为二进制图像（包括调整大小）。不幸的是，我无法将它部署在流星自己的基础设施上（mrt deploy）。真正糟糕的是：我找不到一些日志。我不知道发生了什么事。我很确定这与我的依赖关系有关。源托管[在这里](https://bitbucket.org/davidagraf/svg-converter)。问题很可能出现在 server/server.js 的开头。我猜我导入依赖项的方式不适用于meteorjs。如果是，我该如何解决？如果没有，有人看到这个问题吗？

顺便说一句：另外，在 appfog 和 nodejitsu 上部署也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:01:32.437

获取当前位于 node_modules 中的所有 node.js 源并将它们复制到项目的 /public 目录。

部署时，Meteor 将获取您的本地包，但不获取节点模块。在meteor.com 上获取节点模块的唯一方法是将它们放在项目中的可访问目录中。/public 是一个不错的选择，因为该目录中的文件仅在客户端请求时才会发送给客户端，而除 /server 之外的所有其他文件都将发送给客户端。

然后，您必须适当地更新您的 require() 语句。

也可以看看：

[如何在meteor.com 上的Meteor 应用程序中部署节点模块？](https://stackoverflow.com/questions/10476170/how-can-i-deploy-node-modules-in-a-meteor-app-on-meteor-com)

[我们如何或可以通过 npm 和 Meteor 使用节点模块？](https://stackoverflow.com/questions/10165978/how-do-we-or-can-we-use-node-modules-via-npm-with-meteor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T09:06:01.330

你没有说你正在运行什么操作系统。我假设最基本的是 Ubuntu 12.04 服务器。您必须在其上安装 MongoDB 和带有所有依赖项的 Node.js。为 MongoDB 创建一个管理员用户并将用户添加到数据库。

您可以使用名为 Demeteorize 的工具来打包 Meteor 应用程序。Demeteorize 更好，因为它允许将应用程序从一个平台部署到另一个平台并解决发生的问题。因此，如果您使用 Mac 进行开发并想部署到 Ubuntu，您不会因为不同的环境而遇到问题。

一旦在服务器上，您可以使用 Node 启动 demeteorized 应用程序，并设置在 localhost 上运行的端口设置。

现在您可以使用 Apache 代理您指定的端口并将其映射到域名。这允许您在不同的端口上运行多个 Meteor 应用程序并仍然为它们分配域名。

可以在以下 url 中找到执行所有这些操作的完整指南：

[使用 MongoDB 在 Ubuntu 12.04 上部署多个 vhost Meteor JS 应用程序](http://www.andrehonsberg.com/article/deploy-meteorjs-vhosts-ubuntu1204-mongodb-apache-proxy)

# javascript - JavaScript全球化：如何比较两个日期？

> ID：13995601
> 
> 赞同：0
> 
> 时间：2012-12-21T18:52:08.127
> 
> 标签：javascript, html, date, globalization

我想比较两个日期。

**问题**：日期和时间字符串由[Globalize](https://github.com/jquery/globalize)格式化。因此，我无法以相同的方式拆分值，并且每次都必须进行区分。

我想要一个功能，比如......

```
Globalize.getTimestamp("21.12.2012 19:41", "d t") // value, pattern 
```

...但找不到它。

那是表格：

```
<label>From</label>
<input type="text" name="start_date" value="21.12.2012" class="datepicker"/>
<input type="text" name="start_time" value="19:41" class="timepicker"/>

<label>To</label>
<input type="text" name="end_date" value="22.12.2012" class="datepicker"/>
<input type="text" name="end_time" value="19:41" class="timepicker"/> 
```

**编辑**：这就是解析日期的方法：

```
Globalize.parseDate($("[name='start_date']").val()); // 21.12.2012 
```

但是用时间解析日期不起作用：

```
Globalize.parseDate($("[name='start_date']").val() + " " + $("[name='start_time']").val()); // 21.12.2012 19:41 
```

我想避免开发 Globalize.getTimestamp() 函数。你将如何解决这个问题？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:42:39.593

如果字符串是使用 Globalize 编写的，则应使用 Globalize 以相同的语言环境（文化）读取它们。调用 Globalize.parseDate() 后，您就有了可以轻松比较的 Date 对象。

# sql - HQL 连接表

> ID：13995603
> 
> 赞同：0
> 
> 时间：2012-12-21T18:52:16.410
> 
> 标签：sql, hibernate, orm, hql

有谁知道如何在 Hibernate 中将这样的代码从 SQL 转换为 HQL？

```
SELECT 
     a.Column1, 
     a.Column2, 
     b.Column1, 
     b.Column3 
  FROM 
     table1 a, 
     table2 b 
 WHERE 
     a.Column1 = b.Column3 AND
     a.Column2 = 'some user input' 
```

Table1 和 Table2 在 Hibernate 中正确映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:05:30.520

Criteria 查询看起来像这样，其中供应商是 TableA，产品是 TableB。

```
session=sessionFactory.getCurrentSession();
Criteria criteria = session.createCriteria(Supplier.class); 
criteria.createCriteria("products","p");
criteria.add( Restrictions.like("name", "some user input");
 List<Supplier> list = criteria.list();
for (Supplier object : list) {
    //Do stuff with supplier if needed
} 
```

产品是供应商的一对多关系。

# css - 在 DIV 中将字符居中

> ID：13995606
> 
> 赞同：1
> 
> 时间：2012-12-21T18:52:36.593
> 
> 标签：css, html, alignment

我试图在一个 div 中垂直和水平地居中一个字符。
我使用下面的css来实现这一点。

```
 margin : 0 auto; //attempt1
  text-align:center; //attempt2 
```

两者都不起作用，尝试 2 只是将字符水平对齐。
但我也需要垂直对齐。

[我的代码在这里](http://jsfiddle.net/A3kw4/1/)

有什么线索可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:59:51.823

这是你修复它的方法：

首先将字符包装在一个元素中：

```
<div id="DivMenu">
   <div id="character">R</div>
</div> 
```

然后设置以下CSS：

```
#DivMenu{
   ...
   text-align:center;
}

#character{
   position:relative;
   top:50%;
   margin-top:-10px
} 
```

[工作示例](http://jsfiddle.net/A3kw4/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T02:04:26.377

垂直居中的另一个简单想法是删除 height 属性并在顶部和底部添加填充，每个填充都是原始高度的一半。当然，对于水平居中，使用 text-align：

```
text-align: center;
padding-top: 6%;
padding-bottom: 6%; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T18:59:06.533

跨浏览器水平对齐有点棘手。

在您提供的示例的上下文中，您可以使用：

```
line-height:100px; 
```

对于其他上下文，您将需要使用 javascript 并绑定：

```
$.fn.vAlignBlock = function() {
        return this.each(function(i){
                var ah = $(this).height();
                var ph = $(this).parent().height();
                var mh = (ph - ah) / 2;
        $(this).css('margin-top', mh);
        });
};

$.fn.vAlignInlineBlock = function() {
    return this.each(function(i) {
        var h = $(this).height();
        var oh = $(this).outerHeight();
        var mt = (h + (oh - h)) / 2;
        $(this).css("margin-top", "-" + mt + "px");
        $(this).css("top", "50%");
        $(this).css("position", "absolute");
    });
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T19:00:25.693

我经常使用的一种技术是将要居中的东西包装在一个`block`元素中。它要求您知道要居中的宽度和高度。[这是一个演示](http://jsfiddle.net/remibreton/ufEKK/1/)。

```
<div>
    <span>R</span>
</div> 
```

然后你为元素设置样式`span`（或任何你想要的，但保持语义！）像这样：

```
span {
    width:10px;
    height:20px;
    margin:-10px 0 0-5px; /* margin-top is minus half your height, margin-left is minus half your width */
    top:50%; left:50%;
    position:absolute;
    display:block;
} 
```

如果您不希望将无用元素`DOM`用于演示目的，则可以`line-height`将文本节点的 与容器的高度相匹配。不利的一面是，如果您的文本跨越两行，它将不可避免地搞砸您的设计，因为`line-height`它异常高。[这是一个演示](http://jsfiddle.net/remibreton/aLzUh/)。

```
div {
    [...]
    width: 200px;
    height: 200px;
    text-align:center;
    line-height:200px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T19:00:52.290

这是 Jsfiddle [http://jsfiddle.net/HLet2/1/](http://jsfiddle.net/HLet2/1/)

```
<div id="DivMenu">
    <p>R</p>
</div>

#DivMenu
{
position:absolute;
-webkit-border-radius: 999px;
-moz-border-radius: 999px;
border-radius: 999px;
behavior: url(PIE.htc);
background: #ccc;
border: 2px solid #2F2E2E;
width: 10%;
height: 12%;

}

#DivMenu p
{
    text-align:center;
    margin-top:50%;
}
​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T19:05:54.537

另一种方法是使用 good old`line-height`来创建垂直对齐。这个想法是使行高与高度相同。然后`text-align: center`为横。这适用于我测试过的所有主要浏览器，是最简单的解决方案。

在此示例中，对齐属性与其余样式分开：

```
<html>
<head>
<title>Untitled Document</title>
<style type="text/css">

#DivMenu
{   
    background: #CCC;
    border: 2px solid #2F2E2E;
    width: 100px;
    height: 100px;

    text-align: center;
    line-height: 100px;
}

</style>
</head>

<body>
<div id="DivMenu">
    R
</div>
</body>
</html> 
```

# testing - 测试失败后关闭浏览器

> ID：13995609
> 
> 赞同：9
> 
> 时间：2012-12-21T18:52:59.140
> 
> 标签：testing, selenium, webdriver, testng, qa

我正在使用 WebDriver 运行测试，当测试失败时，浏览器不会关闭。在 Windows 机器上，这是一个大问题，因为我有几个 IEDriver 实例仍在后台运行。

我尝试了一个似乎也不起作用的 try/catch 语句。如果测试失败，浏览器仍然保持打开状态。任何帮助将不胜感激。

try catch 语句看起来像这样：

```
try
{
   Assert.something(something something dark side);
   driver.quit();
}
catch(Exception e)
{
   System.out.println(e)
   driver.quit();
} 
```

我的完整代码如下：

```
public class ClickAddMedication 
{
Browser browser = new Browser();

public void addMedication(String driverName)
{
    //Open Browser and navigate to page
    WebDriver driver = browser.getDriver(driverName);
    driver.manage().window().maximize();
    driver.get("http://someIP:8080/hmp_patient/index.html");

    //Click Add Medication button
    WebElement addBtn = driver.findElement(By.id("add-btn"));
    addBtn.click();

    //Verify Add Medication page has loaded successfully
    WebElement rxBtn = driver.findElement(By.className("icon-rx"));
    WebElement otcBtn = driver.findElement(By.className("icon-otc"));
    WebElement herbBtn = driver.findElement(By.className("icon-herb"));

    Assert.assertEquals(true, rxBtn.isDisplayed());
    Assert.assertEquals(true, otcBtn.isDisplayed());
    Assert.assertEquals(true, herbBtn.isDisplayed());

    driver.quit();

}

@Test(groups = {"functionalTests.FF"})
public void test_AddMedication_FF()
{
    addMedication("firefox"); 
}
@Test(groups = {"functionalTests.iOS"})
public void test_AddMedication_iOS()
{
    addMedication("iOS");
}
} 
```

我使用 testng.xml 文件运行测试，并且希望无论测试是否通过都关闭浏览器。

下面是我的`Browser`课：

```
public class Browser 
{
public WebDriver getDriver(String driverName)
{
    WebDriver driver = null;
    if(driverName == "firefox")
    {
        driver = new FirefoxDriver();
    }
    else if(driverName == "chrome")
    {
        File chromeFile = new File ("C:/webdrivers/chromedriver.exe");
        System.setProperty("webdriver.chrome.driver", chromeFile.getAbsolutePath());
        driver = new ChromeDriver();
    }
    else if(driverName == "ie")
    {
        File ieFile = new File("C:/webdrivers/IEDriverServer.exe");
        System.setProperty("webdriver.ie.driver", ieFile.getAbsolutePath());
        driver = new InternetExplorerDriver();
    }
    else if(driverName == "iOS")
    {
        try 
        {
            driver = new RemoteWebDriver(new URL("http://localhost:3001/wd/hub"), DesiredCapabilities.ipad());
        } catch (MalformedURLException e) 
        {

            e.printStackTrace();
        }
    }

    return driver;

}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T18:58:35.303

您还没有提到您用于执行测试的框架，但处理此问题的一种方法是使用等效的“测试后”注释来完成此操作。JUnit 调用此注解`@After`，而 TestNG 调用它`@AfterMethod`。使用 after test 注释注释的方法将在使用 注释的每个方法之后运行`@Test`，无论测试的通过/失败状态如何。如果您希望跨测试方法使用相同的驱动程序实例，大多数测试运行程序都有一个`@AfterClass`注释或类似的，它将在`@Test`类中所有方法的末尾运行。

例如，您需要执行以下操作（注意将`driver`变量提升为类中的成员变量）：

```
public class ClickAddMedication 
{
    // N.B. For this approach to work, you *must* have the "driver"
    // variable here. Having it as a member variable of the class is
    // what allows the addMedication() method to access it for manipulating
    // the browser, and the tearDown() method to access it for closing
    // the *same* *browser* *instance*.
    WebDriver driver;
    Browser browser = new Browser();

    public void addMedication(String driverName)
    {
        //Open Browser and navigate to page
        driver = browser.getDriver(driverName);
        driver.manage().window().maximize();
        driver.get("http://someIP:8080/hmp_patient/index.html");

        //Click Add Medication button
        WebElement addBtn = driver.findElement(By.id("add-btn"));
        addBtn.click();

        //Verify Add Medication page has loaded successfully
        WebElement rxBtn = driver.findElement(By.className("icon-rx"));
        WebElement otcBtn = driver.findElement(By.className("icon-otc"));
        WebElement herbBtn = driver.findElement(By.className("icon-herb"));

        Assert.assertEquals(true, rxBtn.isDisplayed());
        Assert.assertEquals(true, otcBtn.isDisplayed());
        Assert.assertEquals(true, herbBtn.isDisplayed());
    }

    @AfterMethod
    public void tearDown()
    {
        driver.quit();
    }

    @Test(groups = {"functionalTests.FF"})
    public void test_AddMedication_FF()
    {
        addMedication("firefox"); 
    }

    @Test(groups = {"functionalTests.iOS"})
    public void test_AddMedication_iOS()
    {
        addMedication("iOS");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:04:13.703

如果你使用 Ruby 和测试单元，你可以有这样的东西 -

如果您为多个测试共享 wedriver 浏览器会话，并且只需要在最后关闭浏览器

```
def self.shutdown
    @driver.quit
    assert_equal [], @verification_errors
end 
```

或者如果您想在每次单独测试后关闭浏览器

```
def teardown
    @driver.quit
    assert_equal [], @verification_errors
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T11:57:52.423

这可能不是合适的解决方案，但我这样做是为了解决这个问题。

而不是`Try{}catch`... 使用`throws`:`throws java.lang.AssertionError`并在 catch 块中退出浏览器，例如：

```
public void testMethod() throws java.lang.AssertionError{

Assert.assertTrue(condition,Message);
}

catch(java.lang.AssertionError e){

e.printstactrace();

browser.quit();

Assert.fail();

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T19:33:39.003

driver.close() 应该为您解决问题。或者设置一个布尔标志，当测试失败时，布尔标志设置为真。

然后使用 driver.close() 或 System.exit(1) 应该可以工作！

如果您对上述解决方法有疑问，请告诉我。

# sql - 带有多个子字符串的嵌套 SELECT 语句的问题，Oracle

> ID：13995611
> 
> 赞同：1
> 
> 时间：2012-12-21T18:53:00.070
> 
> 标签：sql, oracle, nested, substring, identifier

这是在甲骨文中。我有一个问题，我不确定是否可以真正解决。但是我创建了一个查询，该查询基本上比较了几个不同的字段，并且需要能够利用 2 个子字符串列并将它们相互比较。我不太确定如何执行此操作，因为我尝试了以下代码块，并且不断收到“无效标识符”错误或“单行子查询返回多行”。我知道为什么会出现后者，这不是问题所在。我试图弄清楚为什么我的子字符串列无法相互比较。

代码示例：

这个给了我正确的列，所以我知道它不是语法。

```
select substr(p.new_plan, 1, 1) as np, substr(p.old_plan, 1, 1) as op 
from sbsb_plan_conv p, cmc_sbel_elig_ent e
where p.sbsb_ck = e.sbsb_ck 
```

这是给我“OP”的完整代码块：无效标识符错误

```
SELECT p.cspi_id, p.sbel_eff_dt, co.new_plan, co.ch_dt, co.sbsb_ck
FROM sbsb_plan_conv co, cmc_sbel_elig_ent p
WHERE co.ch_dt > p.SBEL_EFF_DT
AND co.new_plan <> p.CSPI_ID
AND co.sbsb_ck = p.sbsb_ck
AND p.cspi_id   = co.OLD_PLAN
and (p.cspd_cat = (
          select substr(o.old_plan, 1, 1) as op  
          from sbsb_plan_conv o, cmc_sbel_elig_ent e
          where op = (
                select substr(q.new_plan, 1, 1) as np   
                from sbsb_plan_conv q, cmc_sbel_elig_ent w
                where q.sbsb_ck = w.sbsb_ck)
          and o.sbsb_ck = e.sbsb_ck)
or p.cspd_cat = (
          select substr(o.new_plan, 1, 1) as np   
          from sbsb_plan_conv o, cmc_sbel_elig_ent e
          where np = (
                select substr(q.old_plan, 1, 1) as op  
                from sbsb_plan_conv q, cmc_sbel_elig_ent w
                where q.sbsb_ck = w.sbsb_ck)
          and o.sbsb_ck = e.sbsb_ck)
            )
AND (p.SBEL_ELIG_TYPE = 'tm'
OR p.sbel_elig_type = 'ce'
OR p.SBEL_ELIG_TYPE = 'TM'
OR p.sbel_elig_type = 'CE') 
```

我最初尝试使用这两个子字符串名称作为条件，但这也不起作用。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:54:52.873

您不能使用在同一查询的 where 子句中的 select 子句中定义的别名。

改变这个：

```
select substr(o.old_plan, 1, 1) as op  
from sbsb_plan_conv o, cmc_sbel_elig_ent e
where op = ... 
```

对此：

```
select substr(o.old_plan, 1, 1) as op  
from sbsb_plan_conv o, cmc_sbel_elig_ent e
where substr(o.old_plan, 1, 1) = ... 
```

**有关的**

*   [在 WHERE 子句中使用别名](https://stackoverflow.com/questions/356675/using-an-alias-in-a-where-clause)

# ios - 滚动视图没有通过 setcontentsize 调用一直向下滚动

> ID：13995612
> 
> 赞同：2
> 
> 时间：2012-12-21T18:53:07.357
> 
> 标签：ios, uiscrollview

有人问过，但我申请的答案不起作用

我为我的scoolView 创建了一个scrollView 出口

向下滑动时，它会切断一半的页面，所以我添加了

在视图didload

好像这条线不影响它...

先感谢您

```
[scrollView setContentSize:CGSizeMake(320, 800)]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:06:17.303

确保框架大小在可见视图内。如果框架延伸到可见视图之外，那就是你会看到滚动视图没有一直滚动的时候

尝试将高度设置为原来的一半，然后查看它是否一直滚动。从那里开始，您可以确定滚动视图所需的帧大小

# python - 没有名为 pkg_resources 的模块，即使在重新安装 setuptools 之后也是如此

> ID：13995627
> 
> 赞同：4
> 
> 时间：2012-12-21T18:54:31.533
> 
> 标签：python, mercurial

我最近升级到 Mountain Lion，我的大多数 Python 工具都搞砸了。我下载了新版本的 XCode 并下载了命令行工具。Python 本身运行良好——也就是说，我可以从命令行打开 python (2.7) 并使用它。

当我尝试做其他事情时，我得到

> ImportError：没有名为 pkg_resources 的模块。

例如，使用 mercurial 时：

```
Traceback (most recent call last):
  File "/usr/local/bin/hg", line 4, in <module>
    import pkg_resources
ImportError: No module named pkg_resources 
```

我在此页面上阅读：[没有名为 pkg_resources](https://stackoverflow.com/questions/7446187/no-module-named-pkg-resources)的模块可以通过重新安装 setuptools 来解决此问题，因此我尝试按照[http://pypi.python.org/pypi/setuptools#id4](http://pypi.python.org/pypi/setuptools#id4)上的说明进行操作。我下载了 setuptools-0.6c11-py2.7.egg，做了“sudo sh setuptools-0.6c11-py2.7.egg”，没有出错。

我使用 重新安装了 mercurial `easy_install`，但现在出现了其他问题，当我尝试使用`easy_install`.

```
Traceback (most recent call last):
  File "/usr/bin/easy_install-2.7", line 7, in <module>
    from pkg_resources import load_entry_point
ImportError: No module named pkg_resources 
```

我知道这个问题之前已经回答过，但似乎没有一个解决方案对我有用。如果我可以提供其他任何东西来帮助解决这个问题，我很乐意这样做。我敢打赌这是我的路径的一些简单问题，或者冲突的版本，还是什么？我真的很想重新启动并运行。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T20:05:11.703

我从来没有使用过你提到的 sudo sh 方法。你试过这样做吗？

[https://pypi.python.org/pypi/setuptools#unix-based-systems-including-mac-os-x](https://pypi.python.org/pypi/setuptools#unix-based-systems-including-mac-os-x)

它类似于解决问题的链接中提到的内容，基本上是运行 setuptools 的 ez_setup.py 脚本。

# javascript - jQuery replaceWith 无法正常工作。如此迷失

> ID：13995630
> 
> 赞同：0
> 
> 时间：2012-12-21T18:54:39.520
> 
> 标签：javascript, string

我在使用 Spring 更改此应用程序中的错误消息时遇到了困难。

如果用户输入了错误的帐户，则会触发一条自定义消息（我无法编辑）。
我需要`[BR][BR]`用空替换（来自 netBiscuits）`string('');`

错误消息来自 message.properties 文件，如果需要，我也会发布它。

这是我的代码：

```
var text = "[BR]''[BR]";
var data = st(text);
replace(data);

function st(ip) 
{
    var str = ip;
    return str.replaceWith(/[.*?]/g,"");
} 
```

这不是我的原始代码，而是`replace(data)`我使用警报框运行的测试的衍生产品，因为大约 8 小时后，我仍然卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:55:47.007

对于字符串，使用标准[替换](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)函数：

```
 return str.replace(/[.*?]/g,""); 
```

[JQuerys replaceWith](http://api.jquery.com/replaceWith/)用于替换元素。

但是，即使我不确定你的确切目标，我认为你的正则表达式并没有达到你想要的效果。

您可能应该逃避`[`and `]`：

```
return str.replace(/\[.*?\]/g,""); 
```

# r - R解析数据集以删除特定值上的行以及根据字符创建列

> ID：13995631
> 
> 赞同：0
> 
> 时间：2012-12-21T18:54:40.510
> 
> 标签：r, dataset, dataframe, string-parsing

我在尝试从似乎只有一列的数据集中删除行时遇到问题 - 因此它就像一个列向量。我正在尝试做两件事，首先（对我而言）并不重要。以下是数据示例：

*共和党人,n,y,n,y,y,y,n,n,n,n,n,y,y,y,n,y
民主党人,y,y,y,n,n,n,y,y ,y,n,n,n,n,n,?,?*

我正在引入这样的数据：

```
sampledata <- read.table("house-votes-84.data",) 
```

但我想将每行的数据字符串转换为一列并为该列命名。现在我知道我可以通过以下方式命名事物：

```
names(sampledata) <- c("col1" ...., "col17") 
```

但只有在有 17 列时才能这样做。每个将是列由逗号分隔。

其次，我正在尝试摆脱带有问号的行？

我试过什么？

我已经尝试过诸如（我的数据称为示例数据）：

```
sampledata[apply(sampledata[, -1], MARGIN = 1, function(x) all(x != "?")), ] 
```

那是行不通的（我猜是因为只有一列，所以 Margin 必须是每一列都会被查看的东西（我尝试了 -1 作为 Margin 但无济于事）

我尝试将 ? 更改为 NA 并使用

```
na.omit(sampledata) 
```

那也行不通。

我试过用逗号解析，比如

```
splitting <- strsplit(as.character(sampledata$V1), split=",") 
```

其中 V1 是单列名称。这是我得到的最有趣的结果

以下435条（有435行数据）

```
_[[435]]_  
_ [1] "republican" "n"          "y"          "n"          "y"        _  
_ [6] "y"          "y"          "n"          "n"          "n"       _
_[11] "y"          "n"          "y"          "y"          "y"  _
_[16] "NA"         "n"_ 
```

但是当我尝试更改名称时：错误

```
names(sampledata) <- c("col1", "col2", "col3", "col4", "col5",  : 'names' attribute [17] must be the same length as the vector [1] 
```

我已经尝试过其他事情，例如尝试将其转换为数据集 - 然而，这似乎将所有值转换为看起来是随机的数字（不是诸如 0、1 或 99 之类的？，而是值甚至多达 100 个，甚至更多）

我只是想以正确的格式获取数据，以便我可以对没有问号的样本进行回归。

我最幸运的网站是 Stack Exchange Also 并且在这里：

[所有/任何列大于特定值的子集行](https://stackoverflow.com/questions/9856632/subset-rows-with-all-any-columns-larger-than-a-specific-value)

和这里：

[将逗号分隔的条目转换为列](https://stackoverflow.com/questions/8464312/r-converting-comma-separated-entry-to-columns)

使用第一个，我可以让它工作，但即使这样，我也在代码本身的 3 列中生成数据 - 我似乎无法让相同的代码在我的 ? 上工作（尽管我可以得到使用以下方法删除带有问号的行的程序：

```
 X <- data.frame(Variable1=c(11,"?",12,15),Variable2=c(2,3,1,4))  
X[X$Variable1!="?", ] 
```

我一直在尝试找出一种方法来制作代码，逐行对导入的数据执行相同的操作，因为我也将其作为 data.frame 拉入（我意识到我只有 1 列，该列是称为 V1，所以我同样将代码更改为

```
X$V1  

sampledata <- read.table("house-votes-84NaN.data.txt")
splitdat = do.call("rbind", strsplit(sampledata$V1, ",")) 
```

但我明白了

```
**Error in strsplit(sampledata$V1, ",") : non-character argument** 
```

我确实意识到我在 read.table 中需要更多参数（我认为），因为它们还有更多参数 - 但我不明白需要输入什么。

任何帮助将不胜感激。

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:02:34.817

`read.csv`首先，使用函数和参数读取您的数据，`header = FALSE`并且 `row.names = 1`：

```
sampledata <- read.csv(text="republican,n,y,n,y,y,y,n,n,n,n,n,y,y,y,n,y
democrat,y,y,y,n,n,n,y,y,y,n,n,n,n,n,?,?", header = FALSE, row.names = 1) 
```

然后您可以使用以下命令转置数据框`t`：

```
t(sampledata) 
```

结果：

```
 republican democrat
V2  "n"        "y"     
V3  "y"        "y"     
V4  "n"        "y"     
V5  "y"        "n"     
V6  "y"        "n"     
V7  "y"        "n"     
V8  "n"        "y"     
V9  "n"        "y"     
V10 "n"        "y"     
V11 "n"        "n"     
V12 "n"        "n"     
V13 "y"        "n"     
V14 "y"        "n"     
V15 "y"        "n"     
V16 "n"        "?"     
V17 "y"        "?" 
```

您可以使用删除带有问号的列

```
dat <- as.data.frame(t(sampledata))

dat[!apply(dat == "?", 2, any)]

    republican
V2           n
V3           y
V4           n
V5           y
V6           y
V7           y
V8           n
V9           n
V10          n
V11          n
V12          n
V13          y
V14          y
V15          y
V16          n
V17          y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:02:35.847

（认为​​您可能确实需要更清楚地了解转置和 hte 删除操作的顺序。这首先进行删除，但如果您先转置，则会给您不同的结果。

```
 dat <- read.table(text="republican,n,y,n,y,y,y,n,n,n,n,n,y,y,y,n,y
 democrat,y,y,y,n,n,n,y,y,y,n,n,n,n,n,?,?", sep=",")
 dat
#--------------------
          V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17
1 republican  n  y  n  y  y  y  n  n   n   n   n   y   y   y   n   y
2   democrat  y  y  y  n  n  n  y  y   y   n   n   n   n   n   ?   ?
#--------------
 dat[ ! apply(dat, 1, function (x) any(x=="?") ), ]
#----------------
          V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17
1 republican  n  y  n  y  y  y  n  n   n   n   n   y   y   y   n   y 
```

我不确定您为什么要转置它，但您可以使用`t`函数 (transpose) 来实现。

```
> t( dat[ ! apply(dat, 1, function (x) any(x=="?") ), ] )
    1           
V1  "republican"
V2  "n"         
V3  "y"         
V4  "n"         
V5  "y"         
V6  "y"         
V7  "y"         
V8  "n"         
V9  "n"         
V10 "n"         
V11 "n"         
V12 "n"         
V13 "y"         
V14 "y"         
V15 "y"         
V16 "n"         
V17 "y" 
```

使用派对排顺序的数据，您可以用任何“？”来消除问题。通过将 apply 与列提取一起使用来响应列（将 apply fn 放在列位置并使用 2 作为 MARGIN 参数）：

```
> dat[ , ! apply(dat, 2, function (x) any(x=="?") ) ]
          V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15
1 republican  n  y  n  y  y  y  n  n   n   n   n   y   y   y
2   democrat  y  y  y  n  n  n  y  y   y   n   n   n   n   n 
```

# c++ - 如何将 Cave Story (NXEngine) 移植到 Native Client

> ID：13995636
> 
> 赞同：0
> 
> 时间：2012-12-21T18:55:18.630
> 
> 标签：c++, google-chrome, open-source, google-nativeclient

因此，Native Client 可以从浏览器运行 C++ 代码，而且我知道[NX 引擎](http://nxengine.sourceforge.net/) 是从 C++ 构建的，并且可以进行调整以在 Android 上运行。那么，如果 NX 引擎可以运行 Cave Story，并且理论上可以在本机客户端中运行，那么您如何让它工作和托管，以便人们可以访问页面并在浏览器中玩游戏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:52:49.310

要将 NXEngine 移植到 Native Client，您需要移植 NXEngine 本身（当然！）以及它的依赖项。让我们考虑它们中的每一个：

*   **SDL**已经移植，但可以使用更新，因为移植落后了几个版本。它位于[http://code.google.com/p/naclports/source/browse#svn%2Ftrunk%2Fsrc%2Flibraries%2FSDL-1.2.14](http://code.google.com/p/naclports/source/browse#svn%2Ftrunk%2Fsrc%2Flibraries%2FSDL-1.2.14)`naclports`的社区存储库中（请参阅下面的注释）。`naclports`
*   **SDL_ttf**需要移植，包括它的依赖项，据我所知，这只是 freetype
*   **freetype**已被移植并驻留在[http://code.google.com/p/naclports/source/browse#svn%2Ftrunk%2Fsrc%2Flibraries%2Ffreetype-2.1.10](http://code.google.com/p/naclports/source/browse#svn%2Ftrunk%2Fsrc%2Flibraries%2Ffreetype-2.1.10)的 naclports 中。

移植到 Native Client 非常类似于移植到一个新的——在很多方面更像是 Linux——操作系统。但是，有一些重要的区别：

*   Native Client 的“操作系统”API 是 Pepper，或 PPAPI，一组提供对浏览器功能的访问的 API。大部分移植工作通常是让您的代码使用 Pepper API 来打开文件、显示图形、播放声音等（不过，SDL 使输入、声音和图形变得更加容易）。要打开文件，人们经常使用`nacl_mounts`一个封装了 Pepper File API 的库，这样就可以将应用程序的 HTML5 Web Storage 或 Web 上的 URL 作为文件系统挂载，然后使用熟悉`fopen`的 ,`fread`等。来自 Pepper 25，部分`nacl_mounts`包含在 NaCl SDK 中。

*   Native Client 模块不能使用本机操作系统调用，也无法访问主机文件系统。这是出于安全原因并确保可移植性。

*   Pepper 目前没有非实验性的字体 API。因此，所有字体渲染都必须在您的代码中完成，并且任何`.ttf`文件都必须作为应用程序的一部分提供，因为 Native Client 将无法访问`.ttf`. 出于安全原因，主机系统上的文件。

**推荐使用 Chrome/Pepper 25：**从历史上看，Pepper API 调用只能从主线程进行。这需要对游戏和其他多线程程序进行重大重构，例如，在一个线程上渲染并在另一个线程上播放音乐。从 Chrome 25 起，此限制不再存在。有关详细信息，请参阅[https://developers.google.com/native-client/dev/peppercpp/classpp_1_1_message_loop](https://developers.google.com/native-client/dev/peppercpp/classpp_1_1_message_loop)。以 Chrome 25 或更高版本为目标，因此使用 NaCl SDK 的 Pepper 25 版本可能会减少此类应用程序的重构工作量。

**在网页上运行 Native Client：**问题提到可以*“访问页面并在浏览器中玩游戏”*。重要的是要知道此时只有 Chrome 支持 Native Client。当前一代 Native Client 和即将推出的 Portable Native Client 之间还有一个重要区别，后者要求将 Web 应用程序放在 Chrome Web Store 中才能运行 Native Client，后者将允许在任何网页上显示 Native Client 内容。为了让网页上的访问者能够以最少的弯路使用基于 NaCl 的当前一代应用程序，Chrome 网上应用店内联安装（请参阅[https://developers.google.com/chrome/web-store/docs/inline_installation](https://developers.google.com/chrome/web-store/docs/inline_installation)）可以避免用户需要去 Chrome 网上应用店。

**关于`naclports`:** `naclports`的注释是 Native Client 的基于社区的存储库。它包含几个库和以前的端口。`naclports`您可以在[http://code.google.com/p/naclports/source/browse/trunk/src/libraries/](http://code.google.com/p/naclports/source/browse/trunk/src/libraries/)中查看库列表。虽然它包含有关如何进行移植的有用示例，但它`naclports`不适合胆小的人，因为它经常损坏并且 - 鉴于它是在志愿者/尽力而为的基础上维护的 - 可能需要时间来修复。

**其他提示：***此答案中有一些其他提示和指南提示：[Google Chrome Extension using NaCL with an external library](https://stackoverflow.com/questions/13920954/google-chrome-extension-using-nacl-with-an-external-library/13932232#13932232)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T21:21:32.897

有趣的是，我已经移植了它！它真的不需要太多改变（但我还是做了很多改变）。

我有一段时间没有尝试重新编译它，所以它可能已经坏了。也许我会花一些时间尝试让它再次工作...... :)

您可以在[http://github.com/binji/nacl-nxengine找到它](http://github.com/binji/nacl-nxengine)

# php - Google 的翻译 API (REST) 和 PHP

> ID：13995643
> 
> 赞同：0
> 
> 时间：2012-12-21T18:55:31.003
> 
> 标签：php, rest

我想翻译从客户端发送到服务器的单词。根据 Google 的文档，您可以按如下方式使用：

```
GET https://www.googleapis.com/language/translate/v2?key=INSERT-YOUR-KEY&source=en&target=de&q=Hello%20world 
```

它将使用以下 JSON 对象进行响应：

```
{
    "data": {
        "translations": [
            {
                "translatedText": "Hallo Welt"
            }
        ]
    }
} 
```

我在php中使用以下内容：

```
$data = file_get_contents('https://www.googleapis.com/language/translate/v2?key=KEY8&source=en&target=ru&q='.$to_be_translated);
$data = json_decode($data);
$translated = $data->translations->translatedText; 
```

这不起作用，但如果我使用他们的 JS 示例，那么我确实得到了所需的结果，因此翻译设置很好，问题一定出在我的 PHP 脚本中。

我也试过：

```
$data = $_GET['https://www.googleapis.com/language/translate/v2?key=KEY8&source=en&target=ru&q='.$to_be_translated]; 
```

但无济于事。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:08:01.993

我会建议：

```
$request = 'https://www.googleapis.com/language/translate/v2?key=KEY8&source=en&target=ru&q='.$to_be_translated;

var_dump($request); 
```

复制从该 var_dump 返回的以“https”开头的字符串，并将其放入新的 Web 浏览器窗口中……您在浏览器中得到了什么？如果它看起来有效，则继续下一步。如果它不起作用，则您的 $request 组装错误。

```
$response = file_get_contents($request);

var_dump($response); 
```

$response 是什么样的？一个错误？还是看起来像有效的 JSON？如果它的有效 JSON...

```
$data = json_decode($response);

var_dump($data); 
```

$data 在这里是什么样子的？好的？任何 JSON 解析异常？

```
$translated = $data->translations->translatedText;

var_dump($translated); 
```

$translated 是什么样的？

# matlab - matlab R2011a使用带有数组而不是显式值的solve（）函数

> ID：13995644
> 
> 赞同：0
> 
> 时间：2012-12-21T18:55:36.750
> 
> 标签：matlab

我需要帮助了解我在以下 MATLAB 代码中做错了什么：

> h=[6 6];
> 
> zi=零（3）；
> 
> 符号z
> 
> z=求解('h(1)*zi(1)+z=0')
> 
> z =
> 
> -h(1)*zi(1)

你可以清楚地理解我想要数值......而不是索引......

欢迎任何帮助

（我知道这个方程实际上是'z = 0'，但它只是一个例子，而不是需要求解的真正方程......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:40:55.663

您可以将实际值放在传递给的字符串中`solve`：

```
z=solve([ num2str(h(1) * zi(1)) '+z=0']) 
```

# javascript - 暂停执行直到其他动画完成jQuery

> ID：13995646
> 
> 赞同：0
> 
> 时间：2012-12-21T18:55:42.377
> 
> 标签：javascript, jquery, ajax, dialog, rendering

我有几个对话框打开如下：

```
 $("#dialog").load("/ajax/content.php");
  $("#dialog").dialog({....}); 
```

和一个全局事件监视器来动画对话框的打开

```
 $(document).on("dialogOpen", ".dialogClass", function() {
     var parent = $(this).parent();
     parent.css("left","-768px");
     parent.animate({
             left:0
     }, speed, "easeOutBounce");
 } 
```

在某些页面上，这看起来很不稳定。我怀疑这些动画是在对话框加载和呈现其 ajax 调用的结果时发生的。有什么办法可以暂停，直到所有其他动画都完成，例如：

```
 $(document).on("dialogOpen", ".dialogClass", function() {
     //Wait until other rendering is complete prior to executing further
     var parent = $(this).parent();
     parent.css("left","-768px");
     parent.animate({
             left:0
     }, speed, "easeOutBounce");
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:10:35.133

可能是 jquery 回调功能会有所帮助..

在所有其他渲染完成后调用您要执行的函数.. 像

操作完成后显示警报的简单示例

```
$(document).ready(function(){
  $("button").click(function(){
    $("p").hide("slow",function(){
      somefunction(); // this will execute after the completion of function
    });
  });
});

somefunction()
{
alert("The paragraph is now hidden"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:00:24.457

你考虑[过 jQuery .queue()](http://api.jquery.com/queue/)吗？

在以下位置查看：[http ://api.jquery.com/queue/](http://api.jquery.com/queue/)

有了这个，你可以建立一个你希望你的动画遵循的特定队列顺序

# javascript - Breeze 的 WebApi 控制器如何与 UTC DateTime 配合使用？

> ID：13995649
> 
> 赞同：1
> 
> 时间：2012-12-21T18:55:59.177
> 
> 标签：javascript, breeze

我在 Breeze 的设置中遇到问题`JsonMediaTypeFormatter`。我要做的是WebAPI发送和接收的json日期总是在UTC中工作。

根据[此文档](http://www.breezejs.com/documentation/date-time)，可以通过将属性`DateTimeZoneHandling`设置`DateTimeZoneHandling.Utc`为`JsonSerializerSettings`

然而这并没有奏效。

调查[此源代码](https://github.com/IdeaBlade/Breeze/blob/master/Breeze.WebApi/JsonFormatter.cs)后，我意识到可能会影响此行为的是针对[其他问题](https://stackoverflow.com/questions/11789114/internet-explorer-json-net-javascript-date-and-milliseconds-issue)所做的破解。  

通过删除下面的所有这些代码，一切正常。

```
 //jsonSerializerSettings.Converters.Add(new IsoDateTimeConverter
    //{
    //    DateTimeFormat = "yyyy-MM-dd\\THH:mm:ss.fffK"
    //}); 
```

我该如何处理这种情况而无需删除 Hack？

**编辑 1**

我第一次尝试设置如下：

```
var jsonFormatter = Breeze.WebApi.JsonFormatter.Create();
jsonFormatter.SerializerSettings.DateTimeZoneHandling = DateTimeZoneHandling.Utc;
jsonFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/json"));
jsonFormatter.SupportedEncodings.Add(new UTF8Encoding(false, true));
GlobalConfiguration.Configuration.Formatters.Insert(
          0, jsonFormatter); 
```

但这不起作用，返回的日期不是UTC。

**编辑 2**

首先，我已将 Breeze 库更新为 0.80.3 版本。

在我的 App_Start 文件夹中，我有这个 BreezeWebApiConfig.cs 文件：

```
[assembly: WebActivator.PreApplicationStartMethod(
    typeof(Partner.App_Start.BreezeWebApiConfig), "RegisterBreezePreStart")]
namespace Partner.App_Start
{
    public static class BreezeWebApiConfig
    {
        public static void RegisterBreezePreStart()
        {
            GlobalConfiguration.Configuration.Routes.MapHttpRoute(
                name: "BreezeApi",
                routeTemplate: "api/{controller}/{action}"
            );

            var jsonFormatter = Breeze.WebApi.JsonFormatter.Create();
            jsonFormatter.SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/json"));
            jsonFormatter.SupportedEncodings.Add(new UTF8Encoding(false, true));

            GlobalConfiguration.Configuration.Formatters.Insert(
                0, jsonFormatter);

            // Apply query parameters, expressed as OData URI query strings, 
            // to results of Web API controller methods that return IQueryable<T>
            GlobalConfiguration.Configuration.Filters.Add(
                new Breeze.WebApi.ODataActionFilter());
        }
    }
} 
```

其次，我在一个名为 BreezeConfig 的文件夹中创建了一个 CustomBreezeConfig.cs 类（Jay 描述了下面的代码），但是这个新尝试没有奏效。

问候，

贝尔纳多·帕切科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:59:05.567

从breeze v 0.80.3 开始，我们添加了自定义json 序列化器设置的功能，breeze 用于查询和保存。它涉及添加一个服务器端类，该类是新的 Breeze.WebApi.BreezeConfig 类的子类。这个子类看起来像：

```
 public class CustomBreezeConfig : Breeze.WebApi.BreezeConfig {

    /// <summary>
    /// Overriden to create a specialized JsonSerializer implementation that uses UTC date time zone handling.
    /// </summary>
    protected override JsonSerializerSettings CreateJsonSerializerSettings() {
      var baseSettings = base.CreateJsonSerializerSettings();
      baseSettings.DateTimeZoneHandling = DateTimeZoneHandling.Utc;
      return baseSettings;
    }
  } 
```

出现在服务器端项目中的 Breeze.WebApi.BreezeConfig 子类的任何实例现在都将被自动发现并用于自定义微风的配置。

请让我们知道这是否有帮助（或没有帮助）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:06:51.570

当您说添加 DateTimeZoneHandling 不起作用时，您是如何尝试设置它的？

您可以尝试仅在源代码中的“Converters.Add”调用（从上方）上方添加这一行（不删除“hack”），并让我知道它是否有效。

```
 jsonSerializerSettings.DateTimeZoneHandling = DateTimeZoneHandling.Utc; 
```

我同意它仍然很笨拙，因为这意味着您必须修改微风源。因此，如果它确实有效，我们将尝试想出一些方法来允许您从格式化程序之外进行设置。请告诉我们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T02:53:25.033

请尝试使用微风 v 0.80.5 以及相应的发行说明。希望'时间'现在应该正确往返。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T01:54:17.640

我用这个 hack 解决了 UTC 问题，它仍然有异味。

在 app.vm.run.js 中

```
app.vm.run = (function ($, ko, dataservice, router) {
var currentRunId = ko.observable(),
    // run will be an entity
    run = ko.observable(),
...
   save = function () {
        this.run().lastUpdate(makeDatetimeUTC(moment().toDate()));
        this.run().runStart(makeDatetimeUTC(this.run().runStart()));
        this.run().runEnd(makeDatetimeUTC(this.run().runEnd()));
        dataservice.saveChanges();
        // the test r === run() succeeds because the local run is a 
        //  ko.observable which is bound to the run in the cache
        var r = dataservice.getRunById(currentRunId());
    },
...

})($, ko, app.dataservice, app.router); 
```

在 myScripts.js 中

```
// Here is a real pain in the neck.
//  For some reason, when the entity is saved, it shows up on the server as UTC datetime
//  instead of local.  Moment parses everything as local by default, so the formatDate function
//  used to get a display value needs to be converted to utc before it is returned to the server.
// 
// This function takes the value of the dependentObservable in the entity
//  and converts it to a string which can be stored back into the entity before sending
//  it to the server.
//
// The reason I need to do that is so that it displays properly after the save.      
//  The date seems to be handled properly by the server.

var makeDatetimeUTC = function(localDatetime) {
    var datestring = formatDate(localDatetime);
    var utc = moment.utc(datestring);
    return formatDate(utc);
};

var formatDate = function(dateToFormat) {
    if (dateToFormat === null ||dateToFormat === undefined || dateToFormat.length === 0)
        return "";

    // intermediate variable is not needed, but is good for debugging
    var formattedDate = moment(dateToFormat).format('MM/DD/YYYY hh:mm A');
    return formattedDate;
    },
    formatObservableDate = function(observable) {
        if (ko.isObservable(observable))
            return observable(formatDate(observable()));
        else
            throw new Error("formatObservableDate expected a ko.Observable ");
    }; 
```

# objective-c - 是否可以以编程方式生成触摸板手势事件？

> ID：13995653
> 
> 赞同：16
> 
> 时间：2012-12-21T18:56:23.717
> 
> 标签：objective-c, xcode, macos, cocoa, touchpad

我正在开发 OS X 项目，我想以编程方式生成触摸板手势事件，如 NSEventTypeSwipe 或 NSEventTypeRotate 所以我可以在其他应用程序上旋转/缩放等。

我发现了如何生成鼠标/键盘事件但不是触摸板。

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T08:16:57.363

没有用于生成这些事件的公共 API。

你可以在这个项目中找到一些合成这些事件的工作：[calftrail/Touch](https://github.com/calftrail/Touch)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T05:16:32.600

**参考：** [**Cocoa 事件处理指南**](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/EventOverview/HandlingTouchEvents/HandlingTouchEvents.html)

上面的[*Mac Developer Library*](http://developer.apple.com/library/mac/navigation/)指南没有说明任何已知的以编程方式生成***Touchpad Gestures***的方法。

甚至可以说触摸板手势本身发生在操作系统之外：

> *“触控板硬件包括对解释常见手势和映射动作的**内置支持......”***

该指南还明确提到应用程序不应依赖这种唯一的输入机制，因此最好包括对键盘和鼠标的支持。

既然 Mac 和 Windows（即 Windows 8）在操作系统级别支持触摸屏显示器，那么以编程方式将触摸板和触摸屏手势整合到您的项目或使用适当 API 的远程桌面控制等服务中只是时间问题。可用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-27T10:07:57.663

我认为触摸手势事件不容易生成，因为没有公开的官方 Apple API。我认为这 NSEventTypeMagnify、NSEventTypeRotate、NSEventTypeSwipe 仅用于处理退出系统事件时的只读目的。也许苹果出于某种原因不想让 Magic Mouse 成为 3rd 方开发人员的魔法触摸板。提到的这个项目 rob mayoff 不能正常工作，因为苹果可能会改变事件数据的结构。因此，对这种黑客行为进行转发并不是未来主义的。但是，如果您想得更多，您可以通过其他方式实现触摸事件的作用。

1.  放大（捏合手势）-> 它只是放大、缩小-> 大多数程序都使用快捷键，如 CMD 和 +、CMD 和 -。
2.  旋转它可用于照片，并且在预览应用中有 CMD 和 L、CMD 和 R 等快捷方式。
3.  滑动 - 改变空间（桌面） -> 使用 CTRL 和箭头 <- 或 ->

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-31T22:50:57.103

当我看到 xcode 模拟器时，我了解到可以以编程方式生成触摸事件，并且 xcode 模拟器正在使用这些例程和函数来传输光标触摸并将它们转换为触摸事件，但是根据@robMayoff 所说的，似乎Apple 没有向公众开放该图书馆。模拟相同的行为并为此从头开始创建函数会有点挑战。

这是 NSTouch 类参考：http: [//developer.apple.com/library/mac/#documentation/AppKit/Reference/NSTouch_Class/Reference/Reference.html#//apple_ref/occ/cl/NSTouch](http://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSTouch_Class/Reference/Reference.html#//apple_ref/occ/cl/NSTouch)

# c++ - 为什么 QLabel 过早换行？

> ID：13995657
> 
> 赞同：1
> 
> 时间：2012-12-21T18:56:45.713
> 
> 标签：c++, qt

在下面的代码中，标签显然有足够的空间可以放在一行上，但由于某种原因，它在“thats”之后将它分成了两行。为什么以及如何防止这种情况发生？

```
Widget::Widget(QWidget *parent)
    : QWidget(parent)
{
    this->setFixedSize(250,100);

    QLabel *label = new QLabel;
    label->setStyleSheet("background-color:blue");
    label->setWordWrap(true);
    label->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);
    label->setText("Oh my gosh thats too funny!");
    label->setParent(this);

} 
```

再次为清楚起见，它显示：

```
哦，我的天哪，就是这样
太搞笑了！
```

而且我要：

```
哦，我的天哪，这太有趣了！
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:59:19.880

您是否在 Widget 中使用任何布局？如果不尝试手动设置 QLabels 宽度和高度

编辑：

我写了一个没有使用任何 QLayout 的代码，它工作得很好，很简单

```
QLabel *label= new QLabel(QString::fromUtf8("Client code"), this);
label->setGeometry(posx, posy, w, h); 
```

希望这可以帮助

PS：'this'是我的对话框

```
class MyDialog : public QDialog 
```

# c++ - 现代编译器可以优化从函数派生的常量表达式吗？

> ID：13995659
> 
> 赞同：4
> 
> 时间：2012-12-21T18:57:05.290
> 
> 标签：c++, performance, compiler-construction, compiler-optimization

据我了解，现代 c++ 编译器在以下方面采取了捷径：

```
if(true)
{do stuff} 
```

但是像这样的东西怎么样：

```
bool foo(){return true}
...
if(foo())
{do stuff}

Or:

class Functor
{

 public:
        bool operator() () { return true;}

}

...

Functor f;

if(f()){do stuff} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T19:06:59.783

这取决于编译器是否可以`foo()`在同一个编译单元中看到。

启用优化后，如果`foo()`与调用者在同一个编译单元中，它可能会内联调用`foo()`，然后优化被简化为与`if (true)`以前相同的检查。

如果您移动`foo()`到单独的编译单元，内联将不再发生，因此大多数编译器将不再能够优化此代码。（链接时优化可以跨编译单元进行优化，但它不太常见——并非所有编译器都支持它，而且通常它的效率较低。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T19:00:15.910

我刚刚尝试过`g++ 4.7.2`，`-O3`在这两个示例中，它都优化了调用。没有`-O`，它不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:26:44.997

现代编译器非常聪明，并且经常进行“整个程序优化”。所以只要你做一些明智的事情，它肯定会优化掉只返回一个常量值的函数调用。编译器还将内联只调用一次的代码[即使它非常大]，因此编写小函数而不是大函数绝对值得做。当然，多次使用该函数，它可能不会内联它，但是通过从两个地方调用相同的函数和整体代码更小的代码，您可以获得更好的缓存命中率。

# php - 如何在 PHP 中使用循环创建表格行

> ID：13995660
> 
> 赞同：0
> 
> 时间：2012-12-21T18:57:06.493
> 
> 标签：php, yii, html-table

我一直在尝试使用 PHP 在 Yii 的表中创建行，但不知何故我无法做到这一点。我附上了下面的代码。

**PHP**代码：

```
<div class="grid_16">
<table style="width:100%">
<tr>
<th style="width:33%;" id="wall_userNameStyle"><?php echo CHtml::activeLabel($Facility,'cname'); ?></th>
<th style="width:33%;margin:0 0.5%" id="wall_userNameStyle"><?php echo CHtml::activeLabel($Facility,'cregistration'); ?></th>
<th style="width:33%" id="wall_userNameStyle"><?php echo CHtml::activeLabel($Facility,'cannual'); ?></th>
</tr>

<?php $j=0;
for($j; $j<5; $j++)
{
?>
<tr>
<td style="width:33%;"><?php echo CHtml::activeTextField($Facility,"raymond[$j][0]",array('class' => 'edit_textbox','style' => 'width:99%')) ; ?></td> 

<td style="width:33%;margin:0 0.5%"><?php echo CHtml::activeTextField($Facility,"raymond[$j][1]",array('class' => 'edit_textbox','onkeypress'=>'return number_only(event)','style' => 'width:99%')) ; ?></td> 

<td style="width:33%;"><?php echo CHtml::activeTextField($Facility,"raymond[$j][2]",array('class' => 'edit_textbox','onkeypress'=>'return number_only(event)','style' => 'width:99%')) ; ?></td>
</tr>
</table>
<?php } ?>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:59:26.487

您需要放在`</table>`for 循环之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:58:30.440

你需要的是

```
<?php 
for($j = 0; $j<5; $j++)
{
?>
<tr>
<td style="width:33%;"><?php echo CHtml::activeTextField($Facility,"raymond[$j][0]",array('class' => 'edit_textbox','style' => 'width:99%')) ; ?></td> 

<td style="width:33%;margin:0 0.5%"><?php echo CHtml::activeTextField($Facility,"raymond[$j][1]",array('class' => 'edit_textbox','onkeypress'=>'return number_only(event)','style' => 'width:99%')) ; ?></td> 

<td style="width:33%;"><?php echo CHtml::activeTextField($Facility,"raymond[$j][2]",array('class' => 'edit_textbox','onkeypress'=>'return number_only(event)','style' => 'width:99%')) ; ?></td>
</tr>
<?php } ?>

</table>
</div> 
```

你`</table>`在循环的一侧关闭了你的桌子

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:08:05.227

你可以试试：

```
<table>
<th>
//information
</th>
<tr>
<?php
$j = 0;
for($j = 0; $j<5; $j++)
{
echo "<td>";
echo //table information 1
echo "</td>";
echo "<td>";
echo //table information 2
echo "</td>";
echo "<td>";
echo //table information 3
echo "</td>";
}
?>
</tr>
</table> 
```

表格信息可以是任何东西或任何数量。

# android - 带有膨胀 LinearLayout 的意外 LayoutParams

> ID：13995665
> 
> 赞同：9
> 
> 时间：2012-12-21T18:57:54.943
> 
> 标签：android, android-layout, layout-inflater

我有一个视图的 XML 定义，我使用 addChild 添加到更大的容器视图中。它基于 a`LinearLayout`并且看起来基本上像这样：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="52dip"
android:background="@drawable/box_bg"
android:clickable="true"
android:onClick="onTreeBoxClick"
android:orientation="horizontal" >

<ImageView android:id="@+id/box_photo"
    android:layout_width="45dip"
    android:layout_height="45dip"
        ...
/>
<RelativeLayout
    android:layout_width="0dip"
    android:layout_weight="1"
    android:layout_height="wrap_content"
> 
```

（剩余部分省略——可能不相关，因为它基本上按设计工作）

当我创建这些视图时，我发现以下对我来说似乎很奇怪的行为：

1.  在我膨胀视图之后，getLayoutParameters() 返回 null。

2.  在我调用 addChild() 将其添加到其父级后， getLayoutParameters() 返回一个有效对象。

3.  检查 LayoutParameters，我发现宽度和高度都设置为 -2 (WRAP_CONTENT)，这显然不是我在 XML 文件中指定的。

4.  当我查看随附的 ImageView 的布局参数时，它以指定的值读出。

谁能解释这里发生了什么？为什么没有注意到我指定的高度？

这并没有真正影响到我，因为父视图是一个自定义视图，其中我使用 MeasureSpec 等强制子级的最终尺寸，但我还是想理解这一点！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-21T20:01:19.370

你没有提供一些重要的细节。

> 1) 在我膨胀视图之后，getLayoutParameters() 返回 null。

我假设你使用了这个：

```
inflater.inflate(R.layout.content, null); 
```

在这种情况下，`LayoutInflater`不能使（根本）适合`LayoutParams`根`Linearlayout`，因为它不知道谁将成为其父级（因此它可以创建正确的类型`LayoutParams`）。如果你会使用这个：

```
inflater.inflate(R.layout.content, someOtherLayout, false/true); 
```

然后根`LinearLayout`将具有正确的`LayoutParams`，因为它会看到类型`someOtherLayout`并`LayoutParams`从这些信息中创建。如果这不是您当前所做的，您可能需要提供一段代码以获得更好的答案。

> 2) 在我调用 addChild() 将其添加到其父级后， getLayoutParameters() 返回一个有效对象。

我假设您谈论的是`addView()`方法。该`addView()`方法将检查`LayoutParams`试图添加的视图，如果是`LayoutParams`，`null`那么它将自动为该视图分配其方法`LayoutParams`返回的对象。`generateDefaultLayoutParams()`

> 3) 检查 LayoutParameters，我发现宽度和高度都设置为 -2 (WRAP_CONTENT)，这显然不是我在 XML 文件中指定的值。

正如我在 2 中所说，生成`LayoutParams`的来自`generateDefaultLayoutParams()`方法，该方法将返回一个`LayoutParams`实例，就像父级设计的那样。例如，`LinearLayout`带有方向`HORIZONTAL`的（默认方向）将返回一个`LayoutParams`宽度/高度设置为的实例`WRAP_CONTENT`。

> 4）当我查看随附的 ImageView 的布局参数时，它以指定的值读出。

因为它`LayoutInflater`处理了这一点，因为`ImageView`它位于布局的内部并且有一个已知的父级，`LayoutInflater`可以从中生成正确的`LayoutParams`.

# java - 如何在非 ICS android 设备上拥有 android ICS 组件

> ID：13995666
> 
> 赞同：1
> 
> 时间：2012-12-21T18:57:55.973
> 
> 标签：java, android

有没有办法在应用程序中获得非 ICS android 手机上的 android ICS 控件？我见过例如 echofone 或其他一些使用 ICS 控件的应用程序，并且这些应用程序在低于 ICS (4.0) 的版本上运行良好，除了任何第三方库之外还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:10:00.357

如果您不想使用 HoloEverywhere，那么您可以使用[http://android-holo-colors.com](http://android-holo-colors.com)。它为您生成全息小部件和样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:02:37.847

[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)应该为您解决问题：

> 将 Holo 主题从 Android 4.1 带到 2.1 及更高版本。

在没有第三方库的情况下这样做会迫使您自己重新实现所有控件。这不是一件聪明的事。

但是，如果您真的想从头开始，您可以[在这里](http://developer.android.com/design/downloads/index.html)获得您的资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:36:19.877

Action Bar Sherlock 可以解决您的问题：

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

你可以在这里看到一些例子：

[https://github.com/JakeWharton/ActionBarSherlock/tree/master/samples/demos/src/com/actionbarsherlock/sample/demos](https://github.com/JakeWharton/ActionBarSherlock/tree/master/samples/demos/src/com/actionbarsherlock/sample/demos)

# objective-c - 不同表格视图单元格的详细披露

> ID：13995669
> 
> 赞同：1
> 
> 时间：2012-12-21T18:58:09.203
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, uiviewcontroller

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
    [self performSegueWithIdentifier:@"YourSegueIdentifierHere" sender:self];
} 
```

这是针对特定视图控制器上的表的所有表单元格的工作。谁能帮助我，如果我只想对不同的 Cell 使用不同的 Segue，分离 Cell 的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:09:35.677

我从未使用过或测试过它，但如果这种方法存在一个简单的 switch 案例或 if/else 块就足够了我猜

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:     (NSIndexPath *)indexPath
{
    switch (indexPath.row) {
   case 0:
   { 
       [self performSegueWithIdentifier:@"YourSegue1" sender:self];
       break;
   }
    case 1:
   { 
       [self performSegueWithIdentifier:@"YourSegue2" sender:self];
       break;
   }
    case 2:
   { 
       [self performSegueWithIdentifier:@"YourSegue3" sender:self];
       break;
   }
   default:
       break; 
}       

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:07:11.687

你可以做类似的事情，

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
   if (indexPath.row == 0)
     [self performSegueWithIdentifier:@"YourSegueIdentifierHere" sender:self];
   else if (indexPath.row == 1)
     [self performSegueWithIdentifier:@"YourSecondSegueIdentifierHere" sender:self];
   else if (indexPath.row == 2)
     [self performSegueWithIdentifier:@"YourThirdSegueIdentifierHere" sender:self];
} 
```

`switch (indexPath.row)`或者在这种情况下您也可以选择 a 。

`indexPath`每个细胞都是独一无二的，`indexPath.row`可`indexPath.section`用于区分不同部分的不同细胞。

# c - 为什么 case: 总是需要常量表达式，而 if() 不需要？

> ID：13995670
> 
> 赞同：9
> 
> 时间：2012-12-21T18:58:19.517
> 
> 标签：c, if-statement, switch-statement

可能是重复的，但找不到相同的。

假设我有以下`C`代码：

```
int a;
printf("Enter number :");
scanf("%d",&a);  // suppose entered only an integer
                // ignoring return value of scanf() 
```

我有一个案例来检查`a`是`zero`还是`non-zero`。

```
if(a)
  printf("%d is non-zero",a);
else
  printf("%d is zero",a); 
```

一切都很好`if-else`，我也知道`if-else`实现这一点的其他变体。但是问题来了，`switch-case`因为它说我们可以实现`switch-case`我们可以做的一切`if-else`。但是下面的代码失败了。

```
switch(a)
{
 case a:
       printf("%d is non-zero",a);
       break;
 default:
       printf("%d is zero",a);
       break;
} 
```

我也知道在上面的代码中扭转这种情况，如下所示，我会得到我的答案。

```
switch(a)
{
case 0:
    printf("%d is zero",a);
    break;
default :
    printf("%d is non-zero",a);
    break;
} 
```

但问题是，**为什么**？为什么`if(a)`有效而`case a:`无效？是`switch-case`编译时操作和`if()`运行时？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T19:00:22.717

原因是`switch`案例可以实现为跳转表（通常使用无条件分支指令）。所以它们必须在编译时解决。

这使它们比`if`s 更快，因此最好尽可能使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T18:59:20.097

案例表达式必须是常量。`a`是一个变量，所以它是不允许的。`0`是一个常数，所以没关系。只允许常量表达式意味着编译器更容易优化代码。

if 语句的条件表达式没有这样的约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:07:09.013

除了编译时/跳转表问题之外，`if`它们`switch`也不相同，即使`case`接受一个变量，这两个代码也不会具有相同的行为。`if`当且仅当条件表达式产生非零值时才计算 body ，而`case`当且仅当控制表达式和标签具有相同值时才输入 a 。

和语句之间有*很大*的区别，请记住s 不是强制性的，如果没有任何东西阻止它，则执行会通过所有 s 。这种行为非常类似于跳转表，因为在执行内部只是跳转到某处并继续直到找到一个. 然而，这种用法很少见，但它可能比版本更有用且更容易操作。`if-then-else``switch``break``case``switch``break``if-then-else`

该标准要求标签是编译时常量，正如其他人已经说过的，它背后的想法是一个性能跳转表。即使它不是强制性的（C 标准需要灵活），C99 基本原理文档似乎也证实了这一点：

> lo .. hi 形式的大小写范围被认真考虑过，但最终没有在标准中采用，理由是它没有增加新功能，只是编码方便有问题。该结构的承诺似乎比它可能被要求提供的更多：
> 
> *   可能会为看似无害的案例范围（例如 0 .. 65535）生成大量代码或**跳转表空间。**
>     
>     
> *   范围 'A' .. 'Z' 将指定字符代码之间的所有整数“大写 A”和“大写 Z”。在一些常见的字符集中，该范围将包括非字母字符，而在其他字符集中，它可能不包括所有字母字符，尤其是在非英文字符集中。

[维基百科有一篇关于跳转表的文章](http://en.wikipedia.org/wiki/Branch_table)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T19:12:02.250

正如其他人所说，这是定义语言的方式。

如果你有

```
int x, y, z;
int a;
... some code calculates x, y, z and a ... 
switch(a)
{
   case x:
      .. do stuff here ... 
      break;
   case y:
      .. some more stuff ...
      break;
   case z:
     ... another bit of code .... 
      break;
} 
```

编译器无法事先确定，在编译时 a 应该是 1、2、3、99、465 还是 5113212。所以这里的代码并不比我们做的效率高

```
if (a == x) ... do stuff here ... 
else if (a == y) ... some more stuff
else if (a == z) ... another bit of code 
```

此外，如果 x 和 y 是相同的值怎么办。我们是否希望两者都做一些事情并执行更多的事情，或者只是一个 - 以及哪一个，第一个或第二个。如果编译器重新排序比较，以便它们处于不同的顺序，因为它更有效怎么办？

Switch 主要用于当您有很多选择时，但在构建代码时每个选择都是已知的。如果不是这种情况，你需要别的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T19:13:40.440

附加信息想分享[维基](http://en.wikipedia.org/wiki/Switch_statement)

`If the range of input values is identifiably 'small' and has only a few gaps, some compilers that incorporate an optimizer may actually implement the switch statement as a jump table or an array of indexed function pointers instead of a lengthy series of conditional instructions. This allows the switch statement to determine instantly what branch to execute without having to go through a list of comparisons.`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T21:00:06.480

这是语言创建者的设计决定。*如果*案例标签是常量，编译器可以通过使用跳转表来优化某些案例。如果它们不是，那么代码将等效于多路 if 语句，并且潜在的改进消失了。

用可变的 case 标签定义 switch 语句，甚至为每个分支定义不同的条件是没有问题的，只是 C 的设计者没有这样做。可能是因为他们不认为这是他们编写的代码的优势。

该构造存在于其他语言中，例如我有时使用的 COBOL。有一个退化的版本并不罕见，比如：

```
EVALUATE TRUE
WHEN x IS EQUAL TO 7
  Do something

WHEN y IS LESS THAN 12 
  Do something else

WHEN z
  Do yet another thing

END-EVALUATE 
```

在这里，我们将`if-else if-else`链屏蔽为一个开关 (EVALUATE)，它通过按*顺序*评估条件直到它匹配第一个值来工作。

在 C 语言中，设计者不希望这样做，因为它绝对没有提供比链式 if 语句更能获得的性能优势。另一方面，如果我们要求所有条件都是常数......

# android - Listview 和 SimpleCursorAdapter

> ID：13995673
> 
> 赞同：1
> 
> 时间：2012-12-21T18:58:27.143
> 
> 标签：android, android-listview, android-contentprovider

我正在尝试显示所有联系人的 ListView 并使用户能够选择多个记录。我想使用 ListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE) 但我不知道如何在这里应用它。下面的代码提取了一个联系人列表，但我无法从中进行选择。

非常感谢任何提示

干杯

```
public class addContacts extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add_contacts);

    Uri allContacts = Uri.parse("content://contacts/people");
    Cursor c = managedQuery(allContacts, null, null, null, null);

    String[] columns = new String[] {
            ContactsContract.Contacts.DISPLAY_NAME,
            ContactsContract.Contacts._ID };
    int[] views = new int[] { R.id.contactName, R.id.contactID };

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.add_contacts, c, columns, views);
    this.setListAdapter(adapter);

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:01:56.243

由于您使用的是 ListActivity，您可以使用 获取 ListView ，请`getListView()`使用：

```
getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

* * *

但我注意到您使用的布局不正确：

```
setContentView(R.layout.add_contacts);
...
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
        R.layout.add_contacts, c, columns, views); 
```

明白：

*   传递给的布局`setContentView()`应该有一个带有 id 的 ListView `android:id="@android:id/list"`。
*   传递给 SimpleCursorAdapter 的行布局不应该*有*ListView...您正在尝试在每一行上创建一个 ListViews 的 ListView。

* * *

尝试使用这样的内置布局：

```
public class addContacts extends ListActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Uri allContacts = Uri.parse("content://contacts/people");
        Cursor c = managedQuery(allContacts, null, null, null, null);

        String[] columns = new String[] {
                ContactsContract.Contacts.DISPLAY_NAME,
                ContactsContract.Contacts._ID };
        int[] views = new int[] { android.R.id.text1, android.R.id.text2 };

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_2, c, columns, views);
        this.setListAdapter(adapter);
        getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    }
} 
```

# php - 从 log.txt 文件中读取错误和文件名

> ID：13995685
> 
> 赞同：0
> 
> 时间：2012-12-21T18:59:29.027
> 
> 标签：php, wordsearch

继续[在字符串匹配后从文本文件中获取文件名 - PHP](https://stackoverflow.com/questions/13706775/getting-the-file-name-from-a-text-file-after-string-matching-php) 我有一个格式为 log.txt 的文件：

```
================================================
Header of entry with date and time
================================================
Loaded options from XML file: '/path/to/the/file/some_file.xml
extendedPrintPDF started
Postfix '4.4' was append from file 'some-other_file.xml' for file: /path/to/the/file/some-other_file.indd
printPDF started
PDF Export Preset: Some preset
PDF file created: '/path/to/the/file/some_filey_namex_lo_4.4.pdf'.
File filename_lo-metadata.xml removed
postprocessingDocument started
INDD file removed: /path/to/the/file/some_file1_name_lo.indd
Error opening document: /path/to/the/file/some_file_name_lo.indd: Error: Either the file does not exist, you do not have permission, or the file may be in use by another application; line: 190
================================================
Header of entry with date and time
================================================
Loaded options from XML file: '/path/to/she/file/some_options.xml
extendedPrintPDF started
extendedPrintPDF: Error: Unsaved documents have no full name.; line: 332 
```

我想为日志条目捕获单词“错误”（如果存在），然后检测错误消息（如“未保存的文档没有全名”）或只是“打开文档时出错”，并获取所有且仅的名称正在创建的 pdf 文件。

我是一个新手，真的不知道我应该如何去做。

我想我已经提供了完整的信息，而我在之前的帖子中没有做到这一点。

更改：我还想从 /path/to/the/file/filename.something 中获取“the”。我不是在寻找一个确切的答案（即使它会很棒）。但是，我们将不胜感激一些帮助或指导。

注意：有没有办法在不使用 RegEx 的情况下做到这一点（我是新手，而且我一点也不擅长 RegEx）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:18:31.037

**正则表达式**

如何获取文件名：

```
#(/.*/\w+\.\w{3})# 
```

如何获取错误：

```
/Error: (.*)/m 
```

**PHP**

```
<?php

$file_data = __your__file__data__;

preg_match_all("#(/.*/\w+\.\w{3})#", $file_data, $filenames);
var_dump($filenames);

preg_match_all("/Error: (.*)/m", $file_data, $errors);
var_dump($errors);

?> 
```

**示例输出**

```
array (size=2)
  0 => 
    array (size=3)
      0 => string '/the/path/of/log_options.xml' (length=28)
      1 => string '/path/of/some/filesomething.ind' (length=31)
      2 => string '/the/path/of/log_options.xml' (length=28)
  1 => 
    array (size=3)
      0 => string '/the/path/of/log_options.xml' (length=28)
      1 => string '/path/of/some/filesomething.ind' (length=31)
      2 => string '/the/path/of/log_options.xml' (length=28)

array (size=2)
  0 => 
    array (size=2)
      0 => string 'Error: file doesnt exist or no permissions 
' (length=44)
      1 => string 'Error: Unsaved documents have no full name: line xyz' (length=52)
  1 => 
    array (size=2)
      0 => string 'file doesnt exist or no permissions 
' (length=37)
      1 => string 'Unsaved documents have no full name: line xyz' (length=45) 
```

我会让您弄清楚如何使用这些信息并将其放入您的数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:33:49.653

这实际上只匹配您给我们的有限日志片段的语法，但它应该作为一个开始。它逐行遍历日志文件，并尽最大努力跟踪它所在的日期部分。

```
<?php
$logfile = '/path/to/the/file.log';
$fh = fopen($logfile, 'r') or die("can't open file.");

$r_delim = '/^=*$/';            // matches lines of only =
$r_time  = '/^\[(.*)\] - .*$/'; // matches lines that start with [, captures contents between [ and ]
$r_error = '/ Error: /';        // matches lines that contain the string ' Error: '

$skip_delim = FALSE;
$last_timestamp = 'no stamp';
$matches = array();

while($line = fgets($fh)) {
        if( preg_match($r_delim, $line) && ! $skip_delim) {
                $line = fgets($fh);
                preg_match($r_time, $line, $matches);
                $last_timestamp = $matches[1];
                $skip_delim = TRUE;
        } else if( preg_match($r_delim, $line) && $skip_delim ) {
                $skip_delim = FALSE;
        } else if( preg_match($r_error, $line) ) {
                printf('%s :: %s', $last_timestamp, $line);
        }
} 
```

输出：

```
Jan 25 2012 11:26:03 :: Error opening document: /the/path/to/file/some_file_name_lo.indd: Error: Either the file does not exist, you do not have permission, or the file may be in use by another application; line: 190
Feb 24 2012 15:57:43 :: extendedPrintPDF: Error: Unsaved documents have no full name.; line: 332
Feb 24 2012 15:57:43 :: extendedPrintPDF: Error: Unsaved documents have no full name.; line: 332 
```

# javascript - JSON ParseError 即使请求成功

> ID：13995687
> 
> 赞同：3
> 
> 时间：2012-12-21T18:59:36.097
> 
> 标签：javascript, jquery, backbone.js, http-headers, coffeescript

即使从服务器返回成功，我也会收到 JSON 解析错误。这是我的保存代码，其中始终运行失败（）

```
@model.save()
  .fail(=> @resetForm() )
  .always (obj, error) ->
    console.log obj
    console.log obj.responseText
    console.log JSON.parse(obj.responseText) 
```

这是我的错误对象：

```
"parsererror"
"No conversion from text to http://api2.local/users/auth" 
```

# 一些注意事项：

我在 Jquery 1.8.3 和 Backbone 0.9.9
服务器用 json 正确响应 - 这是我的响应标头

```
Access-Control-Allow-Headers:origin, x-requested-with, content-type, accept
Access-Control-Allow-Methods:GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Origin:*
Access-Control-Max-Age:86400
Connection:Keep-Alive 
Content-Length:202
Content-Type:application/json; charset=utf-8
Date:Fri, 21 Dec 2012 18:46:25 GMT
Keep-Alive:timeout=5, max=100
Server: xxx
X-Powered-By:PHP/5.3.1 
```

console.log JSON.parse(obj.responseText) 正确地给了我一个 JSON 对象

## 编辑：请求标头

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:no-cache
Connection:keep-alive
Content-Length:54
Content-Type:application/json
Host:api2.local
Origin:http://localhost:3000
Pragma:no-cache
Referer:http://localhost:3000/login
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.101 Safari/537.11
X-Requested-With:XMLHttpRequest 
```

## 编辑：通过 POST 请求有效负载

```
{"email":"x@x.com","password":"xxx"} 
```

## 编辑：响应负载

```
{
"user_id":"xx",
"first_name":"xxx",
"last_name":"xxx",
"email":"x@x.com",
"role":"xxxx",
"date_joined":"xxx"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T23:52:58.087

Ahhhh - 编程有时会很烦人。终于弄清楚了-感谢大家的帮助，但这是一个简单的咖啡脚本编译问题

所以在我有之前

```
$.ajaxPrefilter ( (options, originalOptions, jqXHR) -> 
 options.url = "#{ API_URL }" + options.url
) 
```

编译返回 options.url 和 $.ajaxPrefilter。无论出于何种原因，Jquery 都选择了 options.url 作为 ajaxPrefilter 函数的[DataTypes 参数](http://api.jquery.com/jQuery.ajaxPrefilter/)。解决方案是返回 false：

```
$.ajaxPrefilter \
  (options, originalOptions, jqXHR) -> 
    options.url = "#{ API_URL }" + options.url
    no 
```

这给出了正确的编译版本

```
return $.ajaxPrefilter(function(options, originalOptions, jqXHR) {
  options.url = ("" + API_URL) + options.url;
  return false;
}); 
```

# c - 比较 2 个字符串，一个在结构中，另一个不是 C 编程

> ID：13995690
> 
> 赞同：1
> 
> 时间：2012-12-21T18:59:50.997
> 
> 标签：c, pointers, struct, strcpy

我有这个数据库，我需要检查一个产品名称是否已经在数据库中，否则我要求用户输入另一个。

问题是这样的：

我正在尝试将结构内的字符串（产品名称）与用户输入的字符串进行比较。

结构体的编码、用户输入部分和搜索方法如下：

产品结构

```
typedef struct
{
    char    pName[100];
    char    pDescription [100];
    float   pPrice;
    int     pStock;
    int     pOrder;
}product; 
```

checkProduct 方法：

```
int checkProduct (char nameCheck[100])
{
    product temp;
    p.pName = nameCheck;

    rewind (pfp);
    while (fread(&temp,STRUCTSIZE,1,pfp)==1)
    {
        if (strcmp (temp.pName,p.pName))
        {
            return 1;
        }
    }
    return 0;
} 
```

和用户输入部分[部分代码]：

```
char nameCheck[100];
gets (nameCheck);
checkProduct (nameCheck);
while (checkProduct == 1)
{
    printf ("Product Already Exists!\n Enter another!\n");
    while (getchar() !='\n')
    {
        continue;
    }
}
p.pName = nameCheck; 
```

现在我遇到以下错误（我使用 ECLIPSE）：

在线时 (checkProduct == 1) [在用户输入中找到] 正在给我：“指针和整数之间的比较 - 默认启用”用黄色警告三角形标记

p.pName = nameCheck; 被标记为红十字并停止我的编译说：“从类型'char *'分配给类型'char [100]时不兼容的类型^----在用户输入和比较字符串时都给我带来麻烦.

有什么建议可以解决它，或者我可以如何尊重它？我不明白为什么在结构中 char pName 被标记为 '*' 而在 char[100] 中却不是。

请问有什么简要的解释吗？

## 先感谢您

编辑：用以下一些修改代码后：这是产品部分的输入名称；

```
char *nameCheck;
        nameCheck = "";
        fgets(nameCheck,sizeof nameCheck, stdin);

        checkProduct (nameCheck);

        int value = checkProduct (nameCheck);
        while (value == 1)
        {
            printf ("Product Already Exists!\n Enter another!\n");
            while (getchar() !='\n')
            {

            }
        }
        strcpy (p.pName, nameCheck); 
```

这是新的 checkName 方法

```
int checkProduct (char *nameCheck)
{
    product temp;
    strcpy (p.pName, nameCheck);

    rewind (pfp);
    while (fread(&temp,STRUCTSIZE,1,pfp)==1)
    {
        if (strcmp (temp.pName,p.pName) == 0)
        {
            return 1;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:04:56.143

```
p.pName = nameCheck; 
```

当您尝试将一个数组的地址分配给另一个数组时是错误的。您可能想要的是复制它。

改为使用`strcpy()`。

```
strcpy(p.pName, nameCheck); 
```

* * *

`while (checkProduct == 1)`

由于 checkProduct 是一个函数，因此上述条件将始终为 false，因为函数的地址不会等于 1。您可以将返回值存储在另一个整数中，如下所示：

```
int value = checkProduct(nameCheck);
while (value == 1)
/* rest of the code */ 
```

或者更简单地说：

```
while ( checkProduct(nameCheck) == 1 ) {
... 
```

注意 - 我没有检查整个代码，除了这个之外可能还有其他错误。顺便说一句，如果你是编程新手，你可以从教科书中的小例子开始，然后再研究稍微复杂的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:24:00.937

```
int checkProduct (char nameCheck[100]) 
```

请注意，类型签名是谎言。签名应该是

```
int checkProduct(char *nameCheck) 
```

因为函数期望和接收的参数是指向 a 的指针`char`，或者，为了向用户记录参数应该是指向以 0 结尾的`char`数组的第一个元素的指针

```
int checkProduct(char nameCheck[]) 
```

数组永远不会作为参数传递给函数，作为函数参数，并且在大多数情况下[例外是当数组是 的操作数`sizeof`或`_Alignof`地址运算符`&`时] 被转换为指向第一个元素的指针。

```
 {
        product temp;
        p.pName = nameCheck; 
```

数组不可赋值。唯一可以在 a 左侧有一个数组名称的情况`=`是在声明数组的位置进行初始化。

你可能想要

```
strcpy(p.pName, nameCheck); 
```

那里。

```
 rewind (pfp);
        while (fread(&temp,STRUCTSIZE,1,pfp)==1)
        {
            if (strcmp (temp.pName,p.pName)) 
```

`strcmp`如果第一个参数按字典顺序小于第二个参数，则返回负值；如果两个参数相等，则返回 0；如果第一个参数按字典顺序大于第二个参数，则返回正值。

你可能想要

```
if (strcmp(temp.pName, p.pName) == 0) 
```

那里。

```
 gets (nameCheck); 
```

**永远不要使用`gets`**. 这是*非常*不安全的（并且已从上一个标准中的语言中删除，是的）。采用

```
fgets(nameCheck, sizeof nameCheck, stdin); 
```

但是如果有足够的空间，它会将换行符存储在缓冲区中，所以如果存在的话，你必须用它覆盖它`0`。

如果您在 POSIX 系统上并且不需要关心可移植性，则可以使用`getline()`读取一行而不存储尾随换行符。

```
 checkProduct (nameCheck); 
```

您检查产品是否已知，但丢弃结果。将其存储在变量中。

```
 while (checkProduct == 1) 
```

`checkProduct`是一个函数。几乎在所有情况下，函数指示符都会转换为指针，因此会出现有关指针和整数比较的警告。您的意思是与您应该在上面存储的调用的值进行比较。

```
 {
        printf ("Product Already Exists!\n Enter another!\n");
        while (getchar() !='\n') 
```

您读取字符而不存储它们。所以你永远不会改变 的内容`nameCheck`，然后陷入无限循环。

```
 {
            continue;
        } 
```

如果循环主体中的唯一语句是`continue;`，则应将主体留空。

```
 }
    p.pName = nameCheck; 
```

再一次，您不能分配给数组。

* * *

关于编辑，

```
char *nameCheck;
nameCheck = "";
fgets(nameCheck,sizeof nameCheck, stdin); 
```

您`nameCheck`已从数组更改为指针。这意味着`sizeof nameCheck`now 没有给出`char`可以存储在数组中的 s 的数量，而是指向 的指针的大小`char`，这与它所指向的内容无关（通常在 32 位系统上为 4，在 64 位系统上为 8 ）。

你让那个指针指向一个字符串字面`""`量，这就是崩溃的原因。尝试修改字符串文字是未定义的行为，并且通常会导致崩溃，因为现在字符串文字通常存储在内存的只读段中。

你应该把它留在

```
char nameCheck[100];
fgets(nameCheck, sizeof nameCheck, stdin); 
```

然后你可以用它`sizeof nameCheck`来告诉`fgets`它可以读取多少个字符，或者，你可以有一个指针和`malloc`一些内存，

```
#define NAME_LENGTH 100
char *nameCheck = malloc(NAME_LENGTH);
if (nameCheck == NULL) {
    // malloc failed, handle it if possible, or
    exit(EXIT_FAILURE);
}
fgets(nameCheck, NAME_LENGTH, stdin); 
```

无论哪种方式，在获得输入后，如果有换行符，请删除换行符：

```
size_t len = strlen(nameCheck);
if (len > 0 && nameCheck[len-1] == '\n') {
    nameCheck[len-1] = 0;
}
// Does windows also add a '\r' when reading from stdin?
if (len > 1 && nameCheck[len-2] == '\r') {
    nameCheck[len-2] = 0;
} 
```

# linux - 新的 linux 内核，没有使用 lkms 的 lsm，现在没有内核挂钩怎么办？

> ID：13995693
> 
> 赞同：1
> 
> 时间：2012-12-21T19:00:07.000
> 
> 标签：linux, kernel, call, sys, linux-security-module

出于安全原因，从版本 2.6.24 开始，内核停止以可加载内核模块（Linux Kernel Module，LKM）的形式导出编写安全模块所需的字符。

`sys_call_table`出于安全原因，您不能再次导出。

但是，**如何过滤文件系统请求**？

我简单说一下：我要挂钩“打开”功能！

我不想编译自己的内核版本，驱动程序有什么意义？它应该适用于所有内核。

请帮忙，我以为我会比使用 Linux 的 Windows 有更多的自由，但现在我看到我生命中最宝贵的部分被 Linux 封锁了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T22:02:19.260

我编写了一个可以执行此操作的内核模块，称为[tpe-lkm](https://github.com/cormander/tpe-lkm)。我在 StackOverflow 上也提到了与此类似的其他一些问题：

*   [访问内核 2.6+ 中的 sys_call_table](https://stackoverflow.com/questions/8840324/access-to-the-sys-call-table-in-kernel-2-6/8841377)
*   [使用模块读取内核内存](https://stackoverflow.com/questions/6610733/reading-kernel-memory-using-a-module/6614661#6614661)
*   [拦截文件系统系统调用](https://stackoverflow.com/questions/8588386/intercepting-file-system-system-calls)

希望其中之一可以帮助您。

# php - javascript 函数验证单选按钮给出奇怪的输出。

> ID：13995700
> 
> 赞同：0
> 
> 时间：2012-12-21T19:00:36.040
> 
> 标签：php, javascript

我正在开发一个从 mysql 数据库中提取数据并将结果显示为单选按钮的测验。单选按钮是根据 key=>value 填充的，并通过简单的 forloop 生成。这已经做过很多次了，简单的谷歌搜索和研究将产生完成此任务所需的所有结果。我遇到或遇到的问题（在我决定只使用 jquery 执行此操作之前）是当我提交表单时，它将执行 javascript 函数以验证是否已选择按钮，但是当您选择其他任何选项时与第一个单选按钮相比，您会收到与未选择任何按钮时相同的“进行选择”警报。选择第一个单选按钮将返回 true 并执行 getCheckedValue 函数调用。好像，该脚本仅识别出我有一种输入类型，并且不理解遍历其余按钮。我已经重构了这个函数十几次，但仍然不知道为什么它不起作用。

```
<?php
    foreach ($dataReturn as $j => $value){
       echo "<input type='radio' class='answer' id='radiobtn' name='radiobtn' value='".$j."'>" .$value." </input><br/>";
    }
?> 
```

上面是生成单选按钮的循环（仅供参考，$dataReturn 是一个混洗关联数组的返回值。（按预期工作）单击提交按钮时，它会调用下面的 javascript 函数。

```
 function isNull(){
    var isChecked = false;
    var radiobutton = document.getElementsByName('radiobtn');
    for (var i=0; i <= radiobutton.length; i++){
        if (radiobutton[i].checked){
            return true;
            var answer = radiobutton[i].value;
            getCheckedValue(answer);//using this just for testing selected value
        }else { 
        alert("Make a selection.");
        }
    return false;
    }
} 
```

我只是不明白为什么这不起作用。如上所述，使用 jquery 可以完美地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:07:51.413

试试下面的代码。在 for 循环完成之前，您不希望警报触发或返回 false。

```
 function isNull(){
    var isChecked = false;
    var radiobutton = document.getElementsByName('radiobtn');
    for (var i=0; i <= radiobutton.length; i++){
        if (radiobutton[i].checked){
            var answer = radiobutton[i].value;
            getCheckedValue(answer);//using this just for testing selected value
            return true;
        }
    }
    alert("Make a selection.");
    return false;
} 
```

此外，您的 php 代码为所有单选按钮提供相同的 ID。那很不好; 这样做违反了 w3c 标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:12:32.747

1.  您的 FOR 循环：由于 JS 使用从零开始的数组，因此您不能拥有**<=**，否则它将寻找比您拥有的索引高一的索引。使用**<**代替；
2.  我移动了您对是否在循环外检查了任何字段的验证，以使管理更容易。这种方式比担心在它们中间跳出循环更干净。

这里：

```
function isNull() {
    var isChecked = false;
    var radiobutton = document.getElementsByName('radiobtn');
    for (var i=0; i < radiobutton.length; i++) {
        if (radiobutton[i].checked) {
            isChecked = true;
        }
    }

    if ( !isChecked ) {
        alert("Make a selection.");
        return false;
    }
} 
```

我不知道您的表单标签的外观，但如果没有选中单选字段，您需要这样做以防止表单提交：

```
<form action="" method="post" onSubmit="return isNull();"> 
```

# java - 如何使用下载的 android holo 图标、模板、字体？

> ID：13995704
> 
> 赞同：1
> 
> 时间：2012-12-21T19:00:57.007
> 
> 标签：java, android, android-layout, android-widget, android-holo-everywhere

我已经下载了整个包，`http://developer.android.com/design/downloads/index.html` 我想知道如何使用它们。我是否将它放置在 android sdk 文件夹中的某个位置，以便它在 Eclipse 编辑器的图形布局中可见，或者我应该通过将其放置在`drawable-hdpi`文件夹中来使用项目中所需的单个图标和字体？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:04:26.453

如果您在 Eclipse 中使用最新版本的 Android 开发工具之一，您只需转到 New->Other 和 Android->Android Icon Set，它将显示一步一步的向导，您可以在其中选择所有这些图像，颜色，名称，尺寸，它会自动将不同的版本放在相应的文件夹中。

你可以在[这里查看](http://tools.android.com/recent/assetstudiointegration)。此外，在链接页面的开头，还有另一个指向 Web 应用程序版本的链接，除了图标和其他资源外，您还可以轻松地创建九个补丁图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:05:36.243

您必须手动将它们放入 drawable-mdpi/hdpi/xhdpi 文件夹中。

# python - 在 python 中使用 glutMouseFunc 时没有有效的上下文

> ID：13995710
> 
> 赞同：0
> 
> 时间：2012-12-21T19:01:21.653
> 
> 标签：python, opengl, pyopengl

我正在尝试使用 PyOpenGL 在 Python 中编写程序，我需要使用 glutMouseFunc 来实现某些鼠标功能，但是当我运行程序时出现以下错误：

```
Traceback (most recent call last):
  File "teapot.py", line 80, in <module>
    glutMouseFunc(mouseHandle)
  File "/usr/lib/python2.7/dist-packages/OpenGL/GLUT/special.py", line 137, in __call__
    contextdata.setValue( self.CONTEXT_DATA_KEY, cCallback )
  File "/usr/lib/python2.7/dist-packages/OpenGL/contextdata.py", line 57, in setValue
    context = getContext( context )
  File "/usr/lib/python2.7/dist-packages/OpenGL/contextdata.py", line 40, in getContext
    """Attempt to retrieve context when no valid context"""
OpenGL.error.Error: Attempt to retrieve context when no valid context 
```

我尝试用谷歌搜索，但找不到任何相关结果。这是我的代码：

```
from OpenGL.GL import *
from OpenGL.GLUT import *
t = 0
def init():
    r=1
    g=0
    b=0
    glColor3f(r,g,b)
    glClearColor(1.0,1.0,1.0,0.0)
    glMatrixMode(GL_PROJECTION)
    glLoadIdentity()

def display():
    glClear(GL_COLOR_BUFFER_BIT)
    glViewport(0,0,150,100)
    drawSquare()
    glViewport(0,100,150,200)
    drawCircle()
    glViewport(0,200,150,300)
    drawTriangle()
    glViewport(0,300,150,400)
    drawFan()
    if(t==1):
        glViewport(150,0,800,600)
        drawFan()
    if(t==2):
        glViewport(150,0,800,600)
        drawTriangle()
    if(t==3):
        glViewport(150,0,800,600)
        drawCircle()
    if(t==4):
        glViewport(150,0,800,600)
        drawSquare()
    glFlush()
def drawFan():
    glBegin(GL_TRIANGLE_FAN)
    glVertex2f(0.0,0.0)
    glVertex2f(0.3,0.3)
    glVertex2f(0.3,-0.3)
    glVertex2f(-0.3,0.3)
    glVertex2f(-0.3,-0.3)
    glEnd()

def drawTriangle():
    glBegin(GL_TRIANGLES)
    glVertex2f(0.5,0.0)
    glVertex2f(0.0,0.5)
    glVertex2f(-0.5,0.0)
    glEnd()

def drawCircle():
    glutSolidSphere(0.5, 30 ,30)

def drawSquare():
    glBegin(GL_POLYGON)
    glVertex2f(0.5,0.5)
    glVertex2f(-0.5,0.5)
    glVertex2f(-0.5,-0.5)
    glVertex2f(0.5,-0.5)
    glEnd()

def mouseHandle(button, state, x, y):
    if(button == GLUT_LEFT_BUTTON and x < 150 and y < 170):
        t=1
        glutPostRedisplay()
        print "1: x=",x," y=",y,"\n"
    elif(button == GLUT_LEFT_BUTTON and x < 150 and 170 < y and y < 280):
        t=2
        glutPostRedisplay()
    elif(button == GLUT_LEFT_BUTTON and x < 150 and 345 < y and y < 451):
        t=3
        glutPostRedisplay()
    elif(button == GLUT_LEFT_BUTTON and x < 150 and 525 < y and y < 578):
        t=4
        glutPostRedisplay()
    else:
        glutPostRedisplay()
glutInit('')
glutMouseFunc(mouseHandle)
glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB)
glutInitWindowSize(800,600)
glutCreateWindow('Hello GLUT')
glutDisplayFunc(display)
init()
glutMainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:32:59.380

好的，经过一番住所后，我发现了如何解决它。我一定是`glutMouseFunc`在 之后移动了电话`glutDisplayFunc`，如下所示：

```
glutInit('')
glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB)
glutInitWindowSize(800,600)
glutCreateWindow('Hello GLUT')
glutDisplayFunc(display)
glutMouseFunc(mouseHandle)
init()
glutMainLoop() 
```

# erlang - 如何在氮气/ inets erlang中管理多个用户

> ID：13995711
> 
> 赞同：1
> 
> 时间：2012-12-21T19:01:25.387
> 
> 标签：erlang, session-state, nitrogen

我正在使用 Nitrogen/Inets 为我的家庭使用构建一个简单的网站。只要我有一个连接到 Web 服务器的客户端，当前版本就可以按预期工作。

如果我尝试连接新用户，则 2 个会话似乎共享相同的状态变量：

*   浏览器1：阅读索引页，点击连接，以user1登录。
*   浏览器 2：读取索引页面，用户是 user1 --> 不正常 - 去登录并以 user2 身份输入。似乎还可以。
*   浏览器 1：重新加载主页 --> 用户更改为 user2 --> 非常糟糕 :o(

此外，我还包括一个显示超时计数器的显示 -> 值在两个浏览器上同步。

**你能告诉我我必须怎么做才能同时管理多个用户吗？**我写的代码如下：

index.erl 的提取

```
header() ->
% if the user is not defined, show in the header a button to connect, change the title and display a reduced menu (thanks to common module)
% if the user is defined, show in the header a button to disconnect, change the title and display a complete menu (thanks to common module)
    User = wf:user(),
    Msg = case User of
        undefined -> 
            "Pas connecté";
        User -> 
            "Welcome " ++ User
    end,
    case User of
        undefined -> 
            common:header(Msg, #button { id=dcnx, text="Connexion", postback=connexion , class = rightalign});
        User -> 
            common:header(Msg, #button { id=dcnx, text="Deconnexion", postback=deconnexion , class = rightalign})
    end.

body() ->
    #container_12 { body= #grid_8 { alpha=true, prefix=2, suffix=2, omega=true, body=inner_body(wf:user()) }}.

inner_body(User) -> 
    Msg = case User of
        undefined -> "Pas connecté";
        _ -> User ++ " home"
    end,
    [
        #h2{ text= Msg },
        #p{}
    ].

event(deconnexion) ->
    % a temporary popup just to display the user name and check the function call
    wf:wire(#alert { text="Bye bye " ++ wf:user() }), 
    wf:clear_session(), % erase the session information
    wf:redirect("index"); % redisplay the index page
event(connexion) ->
    wf:redirect_to_login("login");

event(E) -> common:event(E). 
```

login.erl 的摘录：

```
body() ->
% the login requires a name and a password,
% checks that {name,password} exists 
        Body = [
            #label { text="Name" },
            #textbox { id=nameTextBox, next=passwordTextBox },

            #p{},  
            #label { text="Password" },
            #password { id=passwordTextBox, next=continueButton },

            #p{},  
            #button { id=continueButton, text="Continue", postback=continue }

    ], 
    wf:wire(continueButton, nameTextBox, #validate { validators=[
        #is_required { text="Obligatoire." },
        #custom { text="utilisateur invalide.", tag=tag_name, function=fun name_validator/2 }
    ]}),

    wf:wire(continueButton, passwordTextBox, #validate { validators=[
        #is_required { text="Obligatoire." },
        #custom { text="mot de passe incorrect.", tag=tag_password, function=fun password_validator/2 }
    ]}),

    Body.

event(continue) ->
    Name = wf:q(nameTextBox), % retreive the name
    wf:user(Name),  % define as user
    wf:role(admin,is_admin(Name)), % define role
    wf:session(logged,true), % define as logged
    wf:redirect_from_login("index"); % go back to the calling page or index if not defined

event(_) -> ok. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:16:17.390

会话信息以 cookie 作为密钥存储。

您是在同一浏览器的另一个窗口中打开页面，还是打开完全独立的浏览器（IE、Chrome 和 Firefox）？如果您只是在同一浏览器中打开另一个窗口或选项卡，那么 cookie 信息肯定会被共享，从而产生您所描述的效果。

因此，请确保您启动了两个完全不同的浏览器。

您发布的代码看起来正确 - 没有什么比跨会话共享信息更突出。

# javascript - 在 Wordpress 表单管理器中一键提交多个表单

> ID：13995713
> 
> 赞同：1
> 
> 时间：2012-12-21T19:01:29.223
> 
> 标签：javascript, jquery, forms, wordpress, onclick

问题是这些表单是用简码生成的，我怀疑我创建的按钮导致提交 form1 然后 form2 因为它们而不起作用。

它的外观如下：

原始按钮：

```
<input type="submit" name="fm_form_submit" id="fm_form_submit" class="submit" value="Siųsti" onclick="return fm_submit_onclick(1)">
<input type="submit" name="fm_form_submit" id="fm_form_submit" class="submit" value="Siųsti" onclick="return fm_submit_onclick(2)">
<input type="submit" name="fm_form_submit" id="fm_form_submit" class="submit" value="Siųsti" onclick="return fm_submit_onclick(2)"> 
```

我在做什么：

```
<input type="submit" name="fm_form_submit" id="fm_form_submit" class="submit" value="Siųsti" onclick="DoAllThese()"> 
```

接着：

```
function DoAllThese() {
return fm_submit_onclick(1);
return fm_submit_onclick(2);
return fm_submit_onclick(3);
} 
```

任何线索有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:17:35.853

我刚刚遇到了这个问题，这是我使用的解决方案的一部分（这并不花哨，但它通常有效）：

```
 function subMultForms() {

     document.getElementById('form').submit();
     document.getElementById('form_two').submit();

    }; 
```

然后`function`使用所需元素上的单击事件调用 。另外，我不确定顶部`inputs`是否是您的标记的一部分——如果是的话——它们都共享相同的`Id`内容，这是无效的并且可能导致问题。

# bash - Bash while 循环等待任务完成

> ID：13995715
> 
> 赞同：9
> 
> 时间：2012-12-21T19:01:49.733
> 
> 标签：bash, ffmpeg, while-loop

我创建了一个 bash 脚本，用于处理文件夹及其子文件夹中的视频：

```
find . -type f -name '*.mkv' | while read file;
do
  ffmpeg -i $file ...
done 
```

问题：而不是等待 ffmpeg 完成的 while 循环，它继续遍历循环。最终结果是，文件没有得到处理。我需要一种方法让当前的 while 循环迭代等到 ffmpeg 完成，然后再继续下一个。或者另一种方式来排队这些项目。

编辑：所以迭代一组文件时的解决方案是将 -nostdin 参数传递给 ffmpeg。希望这可以帮助其他可能遇到类似问题的人。

文件 --> $file 也是一个复制/粘贴错字。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-30T20:42:08.557

我意识到我不久前发布了这个，但我找到了解决方案。感谢所有的回复。将 -nostdin 参数提供给 ffmpeg 就可以了。在移动到下一个文件进行处理之前，它将只处理当前文件。

ffmpeg 的 -nostdin 选项可避免尝试从标准输入读取用户输入，否则会解释视频文件本身。

```
ffmpeg -i <filename> ... -nostdin 
```

使用上面的最好的部分是你可以继续使用详细程度，以防输出中抛出错误：

```
ffmpeg -i <filename> ... -nostdin -loglevel panic 
```

或者，如果您希望将输出报告到文件中，请这样做：

```
# Custom log name (optional). Helpful when multiple files are involved.
# FFREPORT=./${filename}-$(date +%h.%m.%s).log
ffmpeg -i <filename> ... -nostdin -report 
```

您也可以将两者结合使用。还要感谢@Barmar 的解决方案！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T19:24:39.200

这对你有好处吗？

```
find . -type f -name '*.mkv' -exec ffmpeg -i {} \; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T19:15:16.630

我认为这就像你错过`$`之前一样简单`file`。

```
find . -type f -name '*.mkv' | while read file;
do
    ffmpeg -i $file ...
done 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-04T15:12:10.097

我是一个恶毒的答案抢夺者。我找到了一个：

```
ffmpeg -i $file &
wait $! 
```

感谢puchu，在这里：[将ffmpeg应用于许多文件](https://stackoverflow.com/questions/5244279/apply-ffmpeg-to-many-files)

# ios - 用于自定义类的 Objective-C 多重嵌套 initWith

> ID：13995718
> 
> 赞同：5
> 
> 时间：2012-12-21T19:02:09.090
> 
> 标签：ios, objective-c, memory-leaks, automatic-ref-counting

我对 Objective-C 很陌生，我有一个问题。

我创建了一个自定义类并尝试为初始化创建重载：

```
- (id)init
{
    if (self = [super init]) {
        [self setIsCurrentCar:NO];
    }
    return self;
}

-(id) initWithID:(NSInteger)id {
    if(self = [self init]) {
        [self setID:id];
    }
    return self;
}

-(id) initWithID:(NSInteger)id CarYear:(NSString *)year {
    if(self = [self initWithID:id]) {
        [self setCarYear:year];
    }
    return self;
} 
```

假设在某一时刻，我调用了该`-(id) initWithIDCarYear`方法。

我想知道上面的代码在结构上是正确的。

*   在此代码中，`self`设置为 3 次。有更好的解决方案吗？
*   我在这段代码中有内存泄漏吗？（使用 ARC）
*   我必须`if(self = ...)`始终检查还是它是冗余代码？

谢谢

**@Edit** 下面的代码更好吗？

```
-(id) initWithID:(NSInteger)id CarYear:(NSString *)year {
    if (self = [super init]) {
        [self setIsCurrentCar:NO];
        [self setID:id];
        [self setCarYear:year];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T19:39:46.073

虽然您的代码没问题，但我会以相反的顺序构造 init-calls，其中最详细的一个是指定的初始化程序，而更一般的调用会冒泡一些默认值：

```
-(id) initWithID:(NSInteger)id 
         CarYear:(NSString *)year 
{
    if(self = [super init]) {
        _year = year;
        _id = id;
    }
    return self;
}

-(id)initWithID:(NSInteger)id 
{
    return [self initWithID:id CarYear:@"unset"];
}

-(id)init 
{
    return [self initWithID:0];
} 
```

如果调用更通用的初始化程序之一会产生非法状态，则可以改为抛出错误以禁止使用它。

让我们假设，一辆车需要有一个 ID，但不是一年。可以使用`initWithID`，但是使用`init`会导致状态不一致，所以我们要强制不使用它：

```
-(id)init 
{
    [NSException raise:NSInternalInconsistencyException 
                format:@"You must use -initWithID: or -initWithID:CarYear:", NSStringFromSelector(_cmd)];
    return nil;
} 
```

* * *

> *   在这段代码中，self 被设置了 3 次。有更好的解决方案吗？

看上面

> *   我在这段代码中有内存泄漏吗？（使用 ARC）

不，一切都很好

> *   我是否必须始终检查 if(self = ...) 或者它是冗余代码？

正如我向您展示的那样：您可以在链中调用不同的 init 方法。只有该链中的最后一个需要执行该操作。

* * *

```
-(id) initWithID:(NSInteger)id CarYear:(NSString *)year {
    if (self = [super init]) {
        [self setIsCurrentCar:NO];
        [self setID:id];
        [self setCarYear:year];
    }
    return self;
} 
```

您不应该在 init-methods 中对 self 使用 setter，[请参阅 Apple 的文档](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW11)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T19:06:19.783

> 我想知道上面的代码在结构上是正确的。

是的。我看不出有什么问题。

> 在这段代码中，self 被设置了 3 次。有更好的解决方案吗？

这很正常。我不会费心去改变它。

> 我在这段代码中有内存泄漏吗？（使用 ARC）

不。

> 我是否必须始终检查 if (self = ...) 还是它是冗余代码？

你不必这样做*，*但你绝对*应该*这样做。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/1287950/in-objective-c-why-should-i-check-if-self-super-init-is-not-nil)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T03:45:26.117

看起来您有一个强制初始化变量和两个实际上是可选的。

我建议`init`为 ID 和 carYear 实现一个方法和两个 @property()。这减少了初始化器的数量并更好地反映了类的使用约定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T19:53:43.770

据我所知......`tried to create overloads for Initialization`这个语句不应该在这里使用。

通常`overload`意味着同名多个参数，但在 obj-c 中我们不遵循这一点。在 obj-c 中，通过命名参数来伪造重载。

所以这里有 3 组不同的代码，每组都被称为其他方法。而且您没有内存泄漏，因为您没有为同一个对象分配三次内存，而是在初始化它。

# c++ - 如何断点多个 C++ 模板方法，就像非模板一样？

> ID：13995721
> 
> 赞同：1
> 
> 时间：2012-12-21T19:02:13.317
> 
> 标签：c++, debugging, gdb

如果我做：

```
(gdb) b nmspace::TestClass::compareFOO 
```

然后将以下方法签名作为断点进行签名：

```
nmspace::TestClass::compareFOO(blah::Foo const&, blah::Foo const&, unsigned int)
nmspace::TestClass::compareFOO(blah::Foo const&, blah::FooField const&, unsigned int)
nmspace::TestClass::compareFOO(blah::FooField const&, blah::Foo const&, unsigned int)
nmspace::TestClass::compareFOO(blah::FooField const&, blah::FooField const&, unsigned int) 
```

是否有类似以下的内容，或者我们必须每次都为模板方法编写四个？多态性不是也适用于 C++ 模板吗？

```
nmspace::TestClass::compareFOOES<blah::Foo, blah::Foo>
nmspace::TestClass::compareFOOES<blah::Foo, blah::FooField>
nmspace::TestClass::compareFOOES<blah::FooField, blah::Foo>
nmspace::TestClass::compareFOOES<blah::FooField, blah::FooField> 
```

我试过`nmspace::TestClass::compareFOOES`, `nmspace::TestClass::compareFOOES*`,`nmspace::TestClass::compareFOOES<>()`等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:19:54.030

如果所有函数的主体都相同，您可以编写一个全局函数，该函数可以使用`std::enable_if`or接受多种类型的参数`boost::enable_if`：

```
template< class T >
struct is_valid_field
    : boost::or_<boost::is_same<T, blah::Foo>, boost::is_same<T, blah::FooField>>
{
};

template< class T, class Q >
nmspace::TestClass::compareFOO(T const&, Q const&, unsigned int,
    typename boost::enable_if<
        boost::and_<is_valid_field<T>, is_valid_field<Q>
    >::type* = 0)
{
    // implementation
} 
```

# html - 文本上方的 CSS 框也请提供背景代码

> ID：13995722
> 
> 赞同：-3
> 
> 时间：2012-12-21T19:02:15.713
> 
> 标签：html, css

好的，这是我的 <style> 的代码。应该概述的框不起作用，它只是在上面。

另外，我想知道如何让我的背景完全变黑

```
<div id="header">

    </h1>
    <style>
    #header {text-align:middle}
    .info-container {width: 840px; border: 1px solid #d8d5c6: padding: 4px; margin: 40px auto 0;}

    .inner-border {background-color: #fcfbf9; border: 1px solid #d8d5c6; padding: 10px 20px;}

    .coming-soon-visitor strong, .coming-soon-owner strong {font-weight: bold; color: #000;}

    .coming-soon-owner {float: left; font-size: 14px; color: #6d6a5b; font-weight: normal; width: 400px; border-right: 1px solid #d9d6c5; padding: 10px 0; margin-bottom: 10px;}

    .coming-soon-visitor {float: left; font-size: 14px; color: #6d6a5b; font-weight: normal; padding-left: 20px; padding: 10px 0 10px 20px; margin-bottom: 10px;}

    </style>
    <div class="info-container">
        <div class="inner-border clear-fix">
            <h3 class="coming-soon-owner">
                Coming <strong>soon!</strong>
            </h3>
            <h3 class="coming-soon-visitor">

            Hey! We are programming! <strong>Please </strong>wait!

            </h3>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:09:16.443

通过查看代码，我会说您有一个浮动 div 的简单案例。没有什么是`clearfix`不能照顾的。

我使用在[这里找到](http://css-tricks.com/snippets/css/clear-fix/)的可以这样总结的那个。

```
.group:after {
  content: "";
  display: table;
  clear: both;
} 
```

将其添加到您`.info-container`应该解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:25:13.553

将此添加到`.inner-border`类：

```
padding-bottom: 50px; 
background-color: grey; 
```

并删除开头的背景颜色

# modelsim - 如何在 Modelsim 中进行左移以构建展位乘数

> ID：13995723
> 
> 赞同：0
> 
> 时间：2012-12-21T19:02:26.760
> 
> 标签：modelsim

我正在为 ModelSim 中的 Booth Multiplier 编写代码。目前，我正在 for 循环中实现我的代码。在 for 循环中，`if..else`有条件在乘法器的时间检查 2 位。在这里，我需要对被乘数进行左移，但我无法这样做。

由于移位运算符在这里不起作用，我们如何在 ModelSim 中进行左移位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:17:40.633

在 VHDL 中，两位移位如下所示：

```
shifted := unshifted(unshifted'high-2 downto 0) & "00"; 
```

# python - Django：“对象不可迭代”，尝试修改所述对象时

> ID：13995724
> 
> 赞同：2
> 
> 时间：2012-12-21T19:02:33.027
> 
> 标签：python, django, iterable

我正在尝试编辑已经创建的对象（“担心”）。

我在views.py中有这段代码：

```
def worry_edit(request, id):
    worry = get_object_or_404(Worry, pk = id)
    original_pub_date = worry.pub_date
    form = WorryForm(request.POST or None, instance = worry)
    if form.is_valid():
        worry = form.save(commit = False)
        worry.pub_date = original_pub_date
        worry.save()
        return redirect(worry)
    return render_to_response('holaProy/worry_edit.html', {'worry_form': form, 'worry_id': id}, context_instance=RequestContext(request)) 
```

点击表单上的发送按钮时会出现以下错误：

```
argument of type 'Worry' is not iterable 
```

关于为什么会出现该错误以及如何解决它的任何见解？

编辑：正如 Girasquid 所建议的，这是完整的追溯：

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/holaProy/worry_edit/1/

Django Version: 1.4.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'holaProy',
 'registration',
 'django.contrib.humanize')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\Users\Richard\proyectosPython\holaProyecto\holaProyecto\holaProy\views.py" in worry_edit
  50\.         return redirect(worry)
File "C:\Python27\lib\site-packages\django\shortcuts\__init__.py" in redirect
  81\.         if '/' not in to and '.' not in to:

Exception Type: TypeError at /holaProy/worry_edit/1/
Exception Value: argument of type 'Worry' is not iterable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T19:17:35.080

为了能够将模型实例传递给`redirect`，您需要在其上定义一个[`get_absolute_url()`](https://docs.djangoproject.com/en/1.4/ref/models/instances/#get-absolute-url)方法。否则，Django 只是假设它是一个字符串形式的 URL 并尝试解析它。

# objective-c - 比较用 const 整数实例化的 NSNumber 对象的指针

> ID：13995726
> 
> 赞同：3
> 
> 时间：2012-12-21T19:02:35.773
> 
> 标签：objective-c, ios, foundation

今天我正在审查一些代码，我完全被愚弄了。我在代码中看到了类似的东西

```
...
NSNumber *myNumber = [NSNumber numberWithInteger:4];
...
if (myNumber == [NSNumber numberWithInteger:4)
{
...
}
... 
```

当我读到那个`if`条件时，我的第一个想法是：哇，伙计！你怎么能那样做？您显然是在比较指针，所以`if`当您在正确的位置生成实例时，当然不会执行其中的代码，因此对象永远不会相同！

我的（大）惊喜是实际上`if`正在被处决！所以我生成了一些测试来加深正在发生的事情，我得到了这个：

```
NSInteger intValue = 5;
NSNumber *anIntNumber = [NSNumber numberWithInteger:intValue];
NSNumber *anotherIntNumber = [NSNumber numberWithInteger:intValue];
NSLog(@"%p vs %p -> %@", anIntNumber, anotherIntNumber, ((anIntNumber == anotherIntNumber) ? @"YES" : @"NO")); 
```

这是结果：

```
0x7462560 vs 0x7462560 -> YES 
```

所以我记得我在堆栈溢出的某个地方读到，当程序开始时，常量 NSString 存储在内存堆栈的某个地方。然后我运行这段代码来检查 NSString 实例是否发生了同样的事情：

```
NSString *aString = @"FOO";
NSString *anotherString = @"FOO";
NSLog(@"%p vs %p -> %@", aString, anotherString, ((aString == anotherString) ? @"YES" : @"NO")); 
```

这是结果：

```
0x35cc vs 0x35cc -> YES 
```

所以是的，尽管不是故意的，但实例是相同的。我可以用这些结果想象的是，系统也在内存堆栈中的某处分配了所有用常量整数实例化的 NSNumber 对象。

但我现在的问题是：他们为什么要这样做？内存的浪费不是比生成实例的时间更重要吗？

然后我想：花车呢？由于二进制表示和所有这些东西，浮点数不能真正与等号运算符进行比较。这是最后一个测试：

```
float floatValue = 5.41553f;
NSNumber *aFloatNumber = [NSNumber numberWithFloat:floatValue];
NSNumber *anotherFloatNumber = [NSNumber numberWithFloat:floatValue];
NSLog(@"%p vs %p -> %@", aFloatNumber, anotherFloatNumber, ((aFloatNumber == anotherFloatNumber) ? @"YES" : @"NO")); 
```

这是唯一的预期结果！

```
0x712f180 vs 0x74299a0 -> NO 
```

对此你能说什么？你真的认为这是最好的行为（而且更符合逻辑）吗？感谢您分享您的知识！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:11:27.653

`==`仅在某些情况下使用带有 NSNumber 的运算符，因为`NSNumber`实现在内部使用了一些全局实例来表示整数 0 到 X（12 或 15 或其他）。

在内存中保存十几个`NSNumber`对象的内存是微不足道的。

无论如何，永远不要使用`==`运算符进行平等检查。始终使用`isEqual:`（或其变体）。永远不要依赖这样的实现细节或编译器优化。

# android - Android 库存相机访问

> ID：13995729
> 
> 赞同：0
> 
> 时间：2012-12-21T19:02:55.263
> 
> 标签：android

我正在编写一个使用相机的应用程序，但是我目前正在使用代码：

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
        startActivity(intent); 
```

这会打开相机，但不会打开股票 android 相机应用程序。有没有办法做到这一点？我想使用库存相机，这样我就不必自己处理保存照片/视频或异常处理。

# facebook - Facebook原生移动应用和移动浏览器分享会

> ID：13995730
> 
> 赞同：7
> 
> 时间：2012-12-21T19:03:09.800
> 
> 标签：facebook, mobile, facebook-javascript-sdk, fbconnect

我有一个网站，允许通过 facebook 功能登录并显示来自 facebook 的照片。

从移动浏览器访问时，如果用户已经通过本机 FB 应用程序（iOS 或 Android）登录，我希望网站自动登录（单击 FB 登录按钮时，无需输入用户名和密码）。似乎我可以通过构建本机 iOS 或 android 应用程序并使用 facebook 单点登录功能来做到这一点。是否可以在不让用户在他们的移动设备上安装任何东西的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:22:08.317

这是不可能的。

自动登录依赖于在用户批准应用程序后将授予网站或移动应用程序的身份验证令牌。出于安全原因，这些代币与发行它们的原因密切相关。特别是，网络令牌和移动令牌不可互换。

因此，您可以构建一个本地移动应用程序来获取“本地令牌”，但即使您设法（cookie-）将其注入浏览器视图，您网站的后端也无法使用它。

更一般地说，您提出了一个连 facebook 都无法解决的问题：假设您正在使用 facebook 移动应用程序并在那里登录。如果您在同一部手机上打开 facebook 的网络版本，则必须再次登录。根本原因与上述相同。具体来说，任何本机应用程序都无法将任意身份验证 cookie 设置到操作系统浏览器中。我个人认为这个限制不会失效，因为它会产生很大的安全影响——想象一下任何应用程序如何为任何网站设置（并可能获取）cookie。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T17:42:46.120

如果他们从未从他们的手机登录过 facebook，那么您的网站将如何认识他们？

> 是否可以在不让用户在他们的移动设备上安装任何东西的情况下做到这一点？

与 PC 一样，移动设备中的用户需要先在手机中登录 facebook 的网站，然后才有资格“自动”登录到您的网站。当我说自动时，我的意思是他们仍然必须进行“您是否授权此应用程序/网站在您的帐户上做 X 件事”的第一次流程。在网络上使用 facebook 的 api 时，该消息是不可避免的。

希望这能回答你的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T11:09:50.260

> 是否可以在不让用户在他们的移动设备上安装任何东西的情况下做到这一点？

不，这是不可能的。您需要有一个本机或混合应用程序（phonegapped 等）才能使其工作。移动 Web 应用程序在浏览器沙箱中运行，没有本机代码界面 - 您无法在移动设备上访问 FB 的本机 SSO

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T15:51:19.920

你看过这个[脸书页面](https://developers.facebook.com/docs/howtos/link-to-your-native-app-ios-sdk/)吗？正如basav所说，我不确定你问的是否可能，但也许你会在那里找到一些线索。

# java - Java - xsl 转换 -DTD 作为实体解析器 文件过早结束

> ID：13995731
> 
> 赞同：0
> 
> 时间：2012-12-21T19:03:14.703
> 
> 标签：java, xslt, entityresolver

Java - spring - 使用 dtd 作为实体解析器的 xsl 转换。

我有以下方法

```
 private Source resolveDTDEntity(Reader input, final String dtdName) throws ParserConfigurationException, SAXException, IOException {

        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
        docBuilderFactory.setValidating(false);
        docBuilderFactory.setNamespaceAware(true);

        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();

        //Satisfying dtd dependency
        docBuilder.setEntityResolver(new EntityResolver() {
            public InputSource resolveEntity(String publicId, String systemId) throws SAXException, IOException {
                if (systemId.contains(dtdName)) {
                    InputStream dtdStream = XslRdcSourceDocTransformer.class
                            .getResourceAsStream("/dtds/" + dtdName);
                    return new InputSource(dtdStream);
                } else {
                    return null;
                }
            }
        });

        //Exception on following line
        return new DOMSource(docBuilder.parse(new ReaderInputStream(input))); 
    } 
```

我得到以下异常

```
StackTrace: org.xml.sax.SAXParseException: Premature end of file.
        at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:239)
        at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:283)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:124)
        at com.service.XslSourceDocTransformer.resolveDTDEntity(XslSourceDocTransformer.java:137)
        at com.service.XslSourceDocTransformer.transform(XslSourceDocTransformer.java:56)
        at com.service.ContentProcessor.process(ContentProcessor.java:127)
        at com.lexisnexis.job.LexisNexisJob.execute(LexisNexisJob.java:67)
        at com.core.job.JobController$JobExecutor.run(JobController.java:367)
        at com.core.job.JobController$JobThread.run(JobController.java:245)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:619)

Exception: Premature end of file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:52:11.510

发生此错误“tackTrace: org.xml.sax.SAXParseException: Premature end of file”。因为我正在从磁盘读取多个 xml 文件，其中一个是空的，这是导致此错误的原因。

我使用了以下语句

```
docBuilder.parse(new InputSource(reader)) 
```

# facebook-graph-api - 让 facebook 图表只返回带有 # 符号的结果

> ID：13995732
> 
> 赞同：5
> 
> 时间：2012-12-21T19:03:15.067
> 
> 标签：facebook-graph-api, hashtag

有人对如何实现这一点有任何想法吗？

我努力了

```
https://graph.facebook.com/search?q=%22%23apple%22
https://graph.facebook.com/search?q=%23apple
https://graph.facebook.com/search?q#apple 
```

这是行不通的。

需要明确的是，结果应该只包含包含#apple 而不是“apple”的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T14:07:45.440

Facebook 表示目前不支持此功能：[https ://developers.facebook.com/x/bugs/313941462054417/](https://developers.facebook.com/x/bugs/313941462054417/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T15:01:51.787

如果您正在尝试从 Facebook 获取#hashtags，目前没有用于此的 api。即使有 - 帖子不是中间的，它们也会被缓存。您不会立即看到不在您好友列表中的人的最新主题标签，这将需要很长时间才能出现在主题标签搜索中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T14:57:54.747

我也读过它不受支持，但是，

尝试 jlarry 的第二行

```
https://graph.facebook.com/search?q=%23apple 
```

在*Graph API Explorer*中，它可以工作。显然，查询是在设置为公开的帖子上。

所以查询可能是这样的

```
https://graph.facebook.com/search?q=%23joviberton‬&amp;type=post 
```

如需进一步操作，请查看[https://developers.facebook.com/docs/graph-api/using-graph-api/](https://developers.facebook.com/docs/graph-api/using-graph-api/)

# python - 带有自定义后端的 Django 注册：如何在 register() 上返回错误消息

> ID：13995733
> 
> 赞同：2
> 
> 时间：2012-12-21T19:03:17.037
> 
> 标签：python, django, django-registration

我正在使用自定义后端（子类 django-registration 的 SimpleBackend）。我重写了该`register()`方法，因为我需要在注册过程中做一些处理（例如，与外部服务通信）。

如果注册失败，我可以告诉注册表错误吗？

这是否需要在表单验证级别实现？

作为另一个示例，在创建用户时可能会发生数据库错误。注册如何优雅地失败？

编辑：这是我的 SimpleBackend 子类：

```
class MySimpleBackend(SimpleBackend):
    def register(self, request, **kwargs):
        username, email, password = kwargs['username'], kwargs['email'], kwargs['password1']

        # 
        # Make a call to some external API, for example
        retval = api_call_to_somewhere()
        if retval is False:
            # Request failed: display some error message on registration form
            return something
            # OR
            raise some_other

        # Rest of code is the same as django-registration

        User.objects.create_user(username, email, password)

        # authenticate() always has to be called before login(), and
        # will return the user we just created.
        new_user = authenticate(username=username, password=password)
        login(request, new_user)
        signals.user_registered.send(sender=self.__class__,
                                     user=new_user,
                                     request=request)
        return new_user 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T23:10:26.593

如果您要覆盖该`register`方法，则需要处理 ErrorHandling、ExceptionHandling、向用户显示消息以及在该`register`方法中记录自己。

如果您担心向用户显示错误消息，您可以查看[django 的消息框架](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)，这很简单：

```
def register(request):
    try:
        # Try something here
    except Exception:
        messages.error(request, "An Error Occured !") 
```

此外，正如您谈到的验证，最好同时拥有客户端（jquery / ajax）验证和服务器端（django）验证，以远离垃圾邮件发送者和坏人。

如果您想记录错误以供服务器管理员、版主等使用，您可能还需要查看[日志记录模块。](https://docs.djangoproject.com/en/dev/topics/logging/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:50:32.253

我最终定制了 django-registration 的`register`视图，来自`registration.views`（不要与`SimpleBackend.register`方法混淆）

原始视图调用`backend.register()`if `form.is_valid()`，然后重定向到成功 URL，因此它假定用户是在 中创建的`backend.register()`，没有捕获任何异常。添加我自己的代码来捕获异常，我可以引发错误`backend.register()`并将它们作为表单错误显示给用户。

下面是出现在函数`django-registration\registration\views`中间的`register`代码，其中包含我添加的行：

```
if request.method == 'POST':
    form = form_class(data=request.POST, files=request.FILES)
    if form.is_valid():
        try:  # added this line
            new_user = backend.register(request, **form.cleaned_data)
            if success_url is None:
                to, args, kwargs = backend.post_registration_redirect(request, new_user)
                return redirect(to, *args, **kwargs)
            else:
                return redirect(success_url)
        # added these 3 lines below
        except Exception, err:
            errors = form._errors.setdefault(NON_FIELD_ERRORS, ErrorList())
            errors.append(err) 
```

# azure - Azure VMs 虚拟网络互通

> ID：13995734
> 
> 赞同：13
> 
> 时间：2012-12-21T19:03:22.113
> 
> 标签：azure, azure-virtual-machine, azure-virtual-network

我是 Azure 的新手（第 1 次罢工），完全不擅长网络（第 2 次罢工）。

尽管如此，我已经在同一个虚拟网络中启动并运行了两个虚拟机；一个将充当 Web 服务器，另一个将充当 SQL 数据库服务器。

虽然我可以看到它们的内部 IP 地址都在同一个网络中，但我无法验证机器是否可以相互通信，并且对于解决此问题的适当位置感到有点困惑。

微软自己的文档说

> **您在 Windows Azure 中创建的所有虚拟机都可以使用专用网络通道与同一云服务或虚拟网络**中的其他虚拟机自动通信。但是，您需要将终结点添加到计算机，以便 Internet 或其他虚拟网络上的其他资源与之通信。您可以将特定端口和协议与端点相关联。资源可以使用 TCP 或 UDP 协议连接到端点。TCP 协议包括 HTTP 和 HTTPS 通信。

那么为什么机器至少不能通过内部 IP 相互 ping 通呢？是 Windows 防火墙挡道了吗？我开始怀疑我是否为简单的 Web 服务器/数据库服务器设置选择了错误的方法。请原谅我的无知。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T19:53:38.907

如果两台机器在同一个虚拟网络中，那么只需关闭 Windows 防火墙，它们就可以相互 ping 通。另一种方法是只允许具有高级设置的 Windows 防火墙中的所有传入 ICMP 流量。

不过有一个窍门。两台机器将通过 IP 地址看到对方，但在如此定义的虚拟网络中将**没有**名称解析。这意味着您将无法按名称 ping，而只能通过直接 IP 地址。因此，如果希望您的网站（在 VM1 上）连接到 SQL Server（在 VM2 上），您必须使用完整的 IP 地址而不是机器名称来寻址。

在虚拟网络中进行名称解析的唯一方法是使用您在本地维护和配置的专用 DNS 服务器。

[本文](https://azure.microsoft.com/en-us/documentation/articles/virtual-networks-name-resolution-for-vms-and-role-instances/)详细介绍了 Windows Azure 中的名称解析方案。你的特殊情况是这样的：

> 位于同一虚拟网络但不同云服务的虚拟机和角色实例之间的名称解析

如果您将虚拟机放置在相同的云服务中，您可能会实现名称解析。因此，您甚至不需要专用的虚拟网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-04T09:23:32.073

如果您的 VM 位于 Azure 中的虚拟网络中，那么您必须确保两件事。

1.  所需端口已启用。
2.  服务器上的防火墙已禁用。

我试图从另一个 VM 连接到安装了 SQL Server DB 的一个 VM。我必须在安装 SQL 的 VM 中启用 1433 端口。为此，您需要将 MSSQL 终结点添加到 Azure 管理门户上的 VM。之后我禁用了 Windows 防火墙。然后我能够从另一个连接到虚拟机。

# ios - 纹理打包器 pvr.ccz 文件

> ID：13995735
> 
> 赞同：1
> 
> 时间：2012-12-21T19:03:22.780
> 
> 标签：ios, cocos2d-iphone

Texture Packer 的 pvr.ccz 文件可以在非 cocos2d 应用程序中使用吗？我想将它们与核心动画一起使用。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T12:10:05.993

盒子外面？不。

您可以编写自己的 .pvr.ccz 纹理加载器，分别改编来自 cocos2d 的 .pvr.ccz 纹理加载代码。关键部分实际上只是使用 iOS/Mac SDK 提供的 zlib 压缩的压缩格式 (ccz)。在对压缩文件进行膨胀之后，您最终会得到一个可以在 Core Animation 中使用的常规 PVR 纹理。

# documentation - 有可用的 netty 4 文档吗？

> ID：13995737
> 
> 赞同：0
> 
> 时间：2012-12-21T19:03:34.900
> 
> 标签：documentation, netty

我知道 Norman 正在编写 Netty 4 的书，因为我一直在关注这些推文，但想知道是否有任何文章可以帮助没有使用过 Netty 3 的人。我看了一点现有的 3。 x 文章，但我认为无需学习 3.x 就更容易理解主要组件，然后在脑海中应用新的和值得注意的部分来弥合差距。

现在，我只是想通过示例/测试代码来看看它是如何使用的，但是任何概述/基本文档都会很棒。如果没有，那没关系 - 只是想我会检查一下。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T21:01:13.743

目前除了您在博客和 javadocs 上找到的内容外，什么都没有。我目前正在努力在我们的下一个版本之前更新 javadocs，因此您可能会在其中找到所需的一切。另一个信息来源就像您所说的示例模块，其中包含各种用例的大量示例。

希望 Netty 书的 MEAP 将在不久的将来开始。但我们会看到..

# ios - 压缩应用程序包

> ID：13995739
> 
> 赞同：0
> 
> 时间：2012-12-21T19:03:43.333
> 
> 标签：ios, ipad

我有一个有很多图像的应用程序（有些是 jpeg，有些是 PNG）。此图像必须在捆绑包中，因为应用程序需要离线运行。

我试图压缩图像，但没有太大区别。

我正在考虑压缩图像，但是由于它们具有不同的类型，因此需要进行大量的解码工作，然后它们就不会丢失质量。

我的应用程序有 300mb。

有任何想法吗 ？

**编辑**

这些图像来自通过脚本下载，然后我的应用程序有一个嵌入 sqlite（也由脚本制作）映射。其中大部分是采用 600x600 方法的图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:06:21.570

JPEG 和 PNG 图像已被压缩。尝试进一步压缩它们无济于事。它只会使您的应用程序更加复杂，并使显示图像需要更长的时间。

在适当的情况下将 PNG 图像转换为 JPEG，或以较低的质量设置压缩 JPEG 图像，可以为您节省大量空间。

# graph - 随机图分区

> ID：13995741
> 
> 赞同：6
> 
> 时间：2012-12-21T19:04:03.043
> 
> 标签：graph, graph-theory

我正在尝试测试一些图形分区模型（这些模型来自现实世界，其中图形缓慢地自我分区）。为此，我需要能够将此图均匀地随机划分为连续的组件（我们得到的图最初也是连接的）。如果不需要连续性标准，我相信这将是随机划分集合的问题，可以组合分析。有谁知道将图随机划分为子图的任何方法（即随机抽样一个分区），或者，如果不知道这种方法，随机抽样一组元素？随机化分区数量然后随机化成员资格的方法将不起作用，因为每个分区大小都有不同数量的可能分区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-04T10:21:27.377

您必须区分[边缘切割分区](http://www.cs.cornell.edu/~bindel/class/cs5220-f11/slides/lec19.pdf)和[顶点切割分区](ftp://ftp.informatik.uni-stuttgart.de/pub/library/ncstrl.ustuttgart_fi/INPROC-2016-13/INPROC-2016-13.pdf)，您可以在其中沿边或顶点划分图形。这会显着影响您的问题，因为不同顶点切割的数量远大于边缘切割的数量。原因是您在顶点切割中专门将边分配给分区 - 与将顶点分配给分区的边切割相反 - 边比顶点多得多（例如，对于 n 个顶点，O(n^2) 边）。因此，组合上更大的顶点切割会导致需要检查连接性的子图数量更多。一种简单的随机化方法是枚举所有分区，迭代地选择一个分区，并检查所选分区中所有子图的连通性。然后你就拿第一个。在这种情况下，所有解决方案具有相等的概率（一致随机）。

# sql-server - 即使状态为空也显示所有日期

> ID：13995743
> 
> 赞同：0
> 
> 时间：2012-12-21T19:04:05.557
> 
> 标签：sql-server, sql-server-2005

我有一个查询来显示两个日期之间员工的出勤状态。

两个参数`@FromDate`和`@ToDate`被传递到存储过程中。此存储过程有一个 CTE，其中填写了此期间之间的所有日期。这在以下查询中由 T 表示。另一个 CTE，即 TUI，包含 T 的所有日期以及来自另一个名为 的表的所有相关 USER ID `USER_INFO`。

其他需要连接的表是：

桌子：`USER_INFO`

```
USER_ID INT P.K, DISPLAY_NAME Varchar 
```

桌子：`ATTDETAILS`

```
inUserID INT P.K, dtAttendanceDate  DateTime, inAttendanceStatusId INT F.K 
```

桌子：`Att_Status_Master`

```
inAttendanceStatusId INT P.K, ATTStatus VARCHAR 
```

`AttStatus`上表中的列`Att_Status_Master`包含值：`Present, Absent`等。

`AttStatus`以下代码的问题在于它仅在特定日期存在任何一个时才给出结果。如果没有员工在特定日期标记出勤，则该日期不会出现在结果集中。

我希望无论 NULL 值如何都显示所有日期。上面提到的 CTE T 将两个日期之间的所有日期提供给临时表#Results。现在我想为所有员工显示所有这些日期。

例如：

![在此处输入图像描述](../Images/5d6b8b0a76ded88a55b41b5a313d2053.png)

如上所示，日期 01/dec/2012 没有状态，但仍应显示在结果中。而对于下面的查询，它没有被显示。以下查询仅显示`AttStatus`已填充的记录。

最终的存储过程代码如下：

```
@FromDate   DateTime    /* Input Parameter */
@ToDate     DateTime    /* Input Parameter */

If OBJECT_ID('tempdb..#Results',N'U') IS NOT NULL
    DROP TABLE #Results

DECLARE @StartDate  DateTime
DECLARE @EndDate    DateTime

@StartDate = Convert(Varchar(25),@FromDate,112)
@EndDate = Convert(Varchar(25), (DateAdd(DAY,15,@FromDate)),112)

;With T (tempStoredDate)
AS (
    select @StartDate
    union all
    select dateadd(day,1,tempStoredDate) from T where T.tempStoredDate < @EndDate
),
TUI AS
(
    select T.tempStoredDate, UI.user_id, ui.display_name, dbo.GetEmployeeCode(UI.user_id) AS EmpCode from T
    cross join user_info UI
)

select TUI.EmpCode, UI.user_id, UI.Display_Name, TUI.tempStoredDate, AD.dtAttendanceDate, ASM.AttStatus
INTO #Results From TUI
left outer join user_info UI
on TUI.user_id = UI.user_id
left outer join Att_Details AD
on UI.user_id = AD.inUserId
inner join Att_Status_Master ASM
on ASM.inAttendanceStatusId = AD.inAttendanceStatusId
where Convert(Varchar(25),dtAttendanceDate,112) = Convert(Varchar(25),tempStoredDate,112)
group by TUI.tempStoredDate,UI.user_id,UI.Display_Name,TUI.EmpCode,AD.dtAttendanceDate,AD.inAttendanceStatusId,ASM.AttStatus 
```

我注意到由于 WHERE 子句，这种情况正在发生。如果我忽略该`WHERE`子句，所有日期都可见但`AttStatus`显示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:05:55.617

您想将 WHERE 子句中的条件移动到 LEFT JOIN

```
From TUI  
left join user_info UI on TUI.user_id = UI.user_id  
left join Att_Details AD on UI.user_id = AD.inUserId  
    and Convert(Varchar(25),AD.dtAttendanceDate,112)
       = Convert(Varchar(25),TUI.tempStoredDate,112) /* condition moved here */
join Att_Status_Master ASM
   on ASM.inAttendanceStatusId = AD.inAttendanceStatusId  
group by
   TUI.tempStoredDate, UI.user_id, UI.Display_Name,
   TUI.EmpCode, AD.dtAttendanceDate, AD.inAttendanceStatusId, ASM.AttStatus 
```

# c++ - 何时以及如何允许转换为 char 指针？

> ID：13995748
> 
> 赞同：24
> 
> 时间：2012-12-21T19:04:14.497
> 
> 标签：c++, memory, casting, representation

我们可以通过将指向该对象的 a`T`转换为 a来查看类型对象的表示。至少在实践中：`T*``char*`

```
int x = 511;
unsigned char* cp = (unsigned char*)&x;
std::cout << std::hex << std::setfill('0');
for (int i = 0; i < sizeof(int); i++) {
  std::cout << std::setw(2) << (int)cp[i] << ' ';
} 
```

`511`这在我的系统上输出表示： `ff 01 00 00`。

这里（肯定）发生了一些实现定义的行为。哪些演员表允许我将 an 转换`int*`为 an`unsigned char*`以及该演员表需要哪些转换？我是否在施放后立即调用未定义的行为？我可以投射任何`T*`这样的类型吗？这样做时我可以依靠什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-21T19:26:00.673

> 哪个演员表允许我将 an 转换`int*`为 an `unsigned char*`？

在这种情况下，C 样式转换与`reinterpret_cast<unsigned char*>`.

> 我可以像这样投射任何 T* 类型吗？

是和不是。是的部分：您可以安全地将任何指针类型转换为`char*`或`unsigned char*`（使用适当的`const`和/或`volatile`限定符）。结果是实现定义的，但它是合法的。

没有部分：标准明确允许`char*`和`unsigned char*`作为目标类型。但是，您不能（例如）安全地将 a`double*`转换为`int*`. 这样做，你就跨越了从实现定义的行为到未定义的行为的界限。它违反了严格的别名规则。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T19:18:28.773

您的演员表映射到：

```
unsigned char* cp = reinterpret_cast<unsigned char*>(&x); 
```

an 的底层表示`int`是实现定义的，并且将其视为字符允许您检查它。在您的情况下，它是 32 位小端。

这里没有什么特别的——这种检查内部表示的方法对任何数据类型都有效。

> C++03 5.2.10.7：指向对象的指针可以显式转换为指向不同类型对象的指针。除了将“指向 T1 的指针”类型的右值转换为“指向 T2 的指针”类型（其中 T1 和 T2 是对象类型，并且 T2 的对齐要求不比 T1 的对齐要求更严格）并返回其原始类型会产生原始指针值，这种指针转换的结果是未指定的。

这表明强制转换会导致*未指定的行为*。但务实地说，从任何指针类型转换为`char*`总是允许您检查（和修改）被引用对象的内部表示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T19:18:07.327

您的示例中的实现行为是您系统的字节序属性，在这种情况下，您的 CPU 是一个小字节序。
关于类型转换，当您`int*`对`char*`所有正在做的事情进行转换时，就是告诉编译器将`cp`指向的内容解释为字符，因此它将仅读取第一个字节并将其解释为字符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T19:26:53.710

这种情况下的 C 风格转换等价于 reinterpret_cast。该标准在 5.2.10 中描述了语义。具体而言，在第 7 段中：

> “指向对象的指针可以显式转换为指向不同对象类型的指针。70 当类型为“指向 T1 的指针”的纯右值 v 转换为类型“指向 cvT2”的指针时，结果是 `static_cast<cvT2*>(static_cast<cvvoid*>(v))`如果 T1 和 T2是标准布局类型 (3.9)，T2 的对齐要求不比 T1 严格。将类型“指向 T1”的纯右值转换为类型“指向 T2”的指针（其中 T1 和 T2 是对象类型，其中“

在您的情况下，这意味着什么，对齐要求得到满足，结果未指定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T19:19:07.463

指针之间的转换本身总是可能的，因为所有指针都只不过是内存地址，并且内存中的任何类型总是可以被认为是字节序列。

但是 - 当然 - 序列的形成方式取决于分解的类型在内存中的表示方式，这超出了 C++ 规范的范围。

也就是说，除非是非常病态的情况，否则您可以期望在同一编译器为同一平台（或系列）的所有机器生成的所有代码上表示相同，并且您不应该期望在不同平台上得到相同的结果.

一般来说，要避免的一件事是将类型大小之间的关系表达为“预定义”：在您的示例中，您假设`sizeof(int) == 4*sizeof(char)`：这不一定总是正确的。

但是 sizeof(T) = N*sizeof(char) 总是正确的，因此无论 T 总是可以看作是 char-s 的整数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T19:22:35.810

除非您有强制转换运算符，否则强制转换只是告诉以不同的方式“查看”该内存区域。我会说，没什么特别的。

然后，您正在逐字节读取内存区域；只要你不改变它就可以了。当然，您所看到的结果很大程度上取决于平台：考虑字节序、字长、填充等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T19:26:02.277

只需颠倒字节顺序，它就变成了

```
00 00 01 ff 
```

即 256 (01) + 255 (ff) = 511

这是因为您的平台是小端的。

# c# - StringBuilder 附加字节而不格式化

> ID：13995750
> 
> 赞同：3
> 
> 时间：2012-12-21T19:04:27.260
> 
> 标签：c#, stringbuilder, iformatprovider

```
DateTime todayDateTime = DateTime.Now;
StringBuilder todayDateTimeSB = new StringBuilder("0");
todayDateTimeSB.Append(todayDateTime.ToString("MMddyyyy"));
long todayDateTimeLongValue = Convert.ToInt64(todayDateTimeSB.ToString());
// convert to byte array packed decimal
byte[] packedDecValue = ToComp3UsingStrings(todayDateTimeLongValue); 
// append each byte to the string builder
foreach (byte b in packedDecValue)
{
    sb.Append(b); // bytes 56-60
}
sb.Append(' ', 37); 
```

上面的代码获取当前日期时间，将其格式化为长值并将其传递给将其转换为压缩十进制格式的方法。我知道上述方法有效，因为当我单步执行代码时，字节数组对于我期望的所有字节都具有正确的十六进制值。

然而，上面是我遇到问题的代码，特别是我研究过并发现字符串生成器`.Append(byte)`实际上`ToString()`为那个字节做了一个。当它将字节添加到字符串时，它会改变字节的值。问题是我如何告诉`StringBuilder`它按原样获取“字节”并将其存储在内存中而不格式化/更改值。我知道还有一个`.AppendFormat()`有几个重载，它们使用`IFormatProvider`来提供很多关于如何格式化事物的选项，但我没有看到任何方法告诉它不要格式化/更改/更改数据的值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T19:06:51.407

您可以将字节转换为字符：

```
sb.Append((char)b); 
```

您还可以使用 an`ASCIIEncoding`一次转换所有字节：

```
string s = Encoding.ASCII.GetString(packedDecValue);
sb.Append(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:25:40.247

如前所述，在 Unicode 世界中，字节（八位字节）不是字符。CLR 在内部使用 Unicode 字符，并在内部以 UTF-16 编码表示它们。A`StringBuilder`构建一个 UTF-16 编码的 Unicode 字符串。

然而，一旦你有了那个 UTF-16 字符串，你就可以使用 UTF-8 或 ASCIIEncoding 重新编码它。但是，在这两种情况下，代码点 0x0080 和更高的代码点都不会保持原样。

UTF-8 使用 2 个八位字节表示代码点 0x0080–0x07FF；3 个八位字节用于代码点 0x0800–0xFFFF 等等。[http://en.wikipedia.org/wiki/UTF-8#Description](http://en.wikipedia.org/wiki/UTF-8#Description)

ASCII 编码更糟糕：根据[文档](http://msdn.microsoft.com/en-us/library/system.text.asciiencoding.aspx)，0x0000–0x007F 之外的代码点被简单地丢弃：

> 如果您使用 Encoding.ASCII 属性或 ASCIIEncoding 构造函数返回的默认编码器，则在执行编码操作之前，该范围之外的字符将替换为问号 (?)。

如果您需要毫发无损地发送八位字节流，则最好使用[`System.IO.MemoryStream`](http://msdn.microsoft.com/en-us/library/9a84386f.aspx)包装在 a 中的[`StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)and [`StreamWriter`](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)。

然后，您可以通过它的方法或它的方法访问`MemoryStream`的后备存储。为您提供对实际后备存储的参考。但是，它可能包含已分配但未使用的字节——您需要检查流的和. 分配一个新数组并将实际流内容复制到其中，因此您收到的数组引用是正确的长度。`GetBuffer()``ToArray()``GetBuffer()``Length``Capacity``ToArray()`

# html - 对齐 CSS 箭头

> ID：13995753
> 
> 赞同：2
> 
> 时间：2012-12-21T19:04:36.137
> 
> 标签：html, css

[JSFiddle](http://jsfiddle.net/2fyGp/)

我确实尝试将绿色箭头对齐在中间，`a`但我无法这样做。我确实尝试`margin-left`过`%`总是关闭。

任何人都可以帮忙吗？累了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:19:25.137

原因是您的箭头是绝对定位的，而不是相对于 a。

对您的CSS进行以下更改，它可以工作

```
.container-menu nav ul li.active a,
.container-menu nav ul li a:hover{
    color: #8fb63a;
    text-decoration: none;
    position:relative;
}

.container-menu nav ul li.active a::after{
    border-bottom: 6px solid #8fb63a;
    border-right: 6px solid transparent;
    border-left: 6px solid transparent;
    content: "";
    display: inline-block;
    height: 0;
    margin-top: 34px;
    position: absolute;
    vertical-align: top;
    width: 0;
    left:50%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:29:05.733

你把问题复杂化了。

您的 HTML 和 CSS 需要遵循 div 对齐的标准格式，才能真正以正确的方式做到这一点。

这个小提琴应该让你开始：

[http://jsfiddle.net/2fyGp/4/](http://jsfiddle.net/2fyGp/4/)
*无格式*
[http://jsfiddle.net/2fyGp/6/](http://jsfiddle.net/2fyGp/6/)
*一些格式*

* * *

```
<style>
.x0 {width:100%;float:left;background-color:#333;border-bottom:2px solid #8FB63A;}
.x0 div{width:25%;float:left;text-align:center;}
.x0 div:hover {color:#8FB63A;}
.x1 div{width:100%;float:left;color:#fff;}
</style>

<div class="x0">
    <div class="x1">
        <div>
            one
        </div>
        <div>
            arrow
        </div>
    </div>
    <div class="x1">
        <div>
            two
        </div>
        <div>
            arrow
        </div>
    </div>
    <div class="x1">
        <div>
            three
        </div>
        <div>
            arrow
        </div>
    </div>
    <div class="x1">
        <div>
            four
        </div>
        <div>
            arrow
        </div>
    </div>
</div> 
```

# java - 非泛型类中的泛型方法

> ID：13995755
> 
> 赞同：17
> 
> 时间：2012-12-21T19:04:40.410
> 
> 标签：java, generics

我正在尝试使用通用方法，因此我不必重复代码。我努力了：

```
private Listener createListenerAdapter(Class<T> clazz)
{ 
   // do something
} 
```

（`clazz`很重要，因为`class`是保留的）。

但是 Netbeans 抱怨说：“找不到符号类 T”。

我将传入几个具有相同方法的不同类。我应该在哪里定义T？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-21T19:06:07.293

将方法声明为：

```
private <T> Listener createListenerAdapter(Class<T> clazz) 
```

有关更多信息，请参阅[Java 教程](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)。

**编辑：**如果`T`与返回类型无关，您也可以只使用通配符：

```
private Listener createListenerAdapter(Class<?> clazz) 
```

**编辑1：**如果`clazz`是为了表示一种类型`Listener`，您可以定义边界来限制调用者（以避免强制转换和潜在的运行时异常）：

```
private <L extends Listener> L createListenerAdapter(Class<L> clazz) 
```

或使用通配符：

```
private Listener createListenerAdapter(Class<? extends Listener> clazz) 
```

但这取决于在`clazz`体内的使用方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T19:06:14.413

泛型声明也可以在方法级别通过参数化它们来进行，如下所示：

```
private <T> Listener createListenerAdapter(Class<T> clazz)
{ 
   // do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:08:55.510

如果您不使用该类型（不太可能，但您可能试图避免原始类型警告）：

```
private Listener createListenerAdapter(Class<?> clazz)
{ 
   // do something, without knowing the T of the clazz
} 
```

# facebook-fql - Facebook FQL 查询从 OTHER 邮箱中的每个用户提取完整线程

> ID：13995761
> 
> 赞同：1
> 
> 时间：2012-12-21T19:05:29.223
> 
> 标签：facebook-fql, fql.multiquery

FQL 新手，想要提取“其他”邮箱是否已归档，并按用户对所有正文消息进行分组。下面的查询示例仅在 INBOX 中获取每条消息。`folder_id`用于`0`收件箱、`1`发件箱和`4`更新。其他收件箱的选项是什么？

```
SELECT message_id, thread_id, author_id, body, created_time, attachment FROM message WHERE thread_id IN (SELECT thread_id FROM thread WHERE folder_id = 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T07:16:29.320

使用 OR 运算符

> SELECT message_id, thread_id, author_id, body, created_time, attachment FROM message WHERE thread_id IN (SELECT thread_id FROM thread WHERE folder_id = 0 OR folder_id = 1 OR folder_id = 4)

# vb.net - LINQ CopyToDataTable -- 无法将 DBNull.Value 转换为类型“System.Decimal”。请使用可空类型

> ID：13995769
> 
> 赞同：0
> 
> 时间：2012-12-21T19:06:03.370
> 
> 标签：vb.net, linq, dataset, nullable, dbnull

我正在解析两个 Excel 文件，其中包含许多字段，最重要的是 TOTAL_DOLLARS 和 TOTAL_UNITS 字段，它们通常具有值，但其中一些是空白或空值。我想在字段相等`JOIN`的情况下使用 LINQ 来处理这两个 DataTables 。`UPC`但是，我遇到了以下错误：

`Cannot cast DBNull.Value to type 'System.Decimal'. Please use a nullable type`

由于空字段，当我尝试加入两个表时会发生此错误。

我的 LINQ 代码如下：

```
Dim query = From c In dtDollars.AsEnumerable() _
      Join r In dtUnits.AsEnumerable() _
      On c.Field(Of String)("UPC") Equals r.Field(Of String)("UPC") _
      Select _
      New _
      With {.UPC = r.Field(Of String)("UPC"), .WIC_NUMBER = c.Field(Of String)("WIC_NUMBER"), _
      .WAG_ITEM_DESC = c.Field(Of String)("WAG_ITEM_DESC"), _
      .WAG_BRAND = c.Field(Of String)("WAG_BRAND"), .UOM = c.Field(Of String)("UOM"), _
      .GSK_PROMO_GRP = c.Field(Of String)("GSK_PROMO_GRP"), _
      .TOTAL_DOLLARS = c.Field(Of Decimal)("TOTAL_DOLLARS"), _
      .TOTAL_UNITS = r.Field(Of Integer)("TOTAL_UNITS"), _
      .WKND_DATE = c.Field(Of DateTime)("WKND_DATE")} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:17:17.780

鉴于 WKND_DATE 也可以为空，将字段作为`Nullable(Of DateTime)`( `DateTime?`) 获取，如下所示：

```
Dim query = From c In dtDollars.AsEnumerable() _
   Join r In dtUnits.AsEnumerable() _
   On c.Field(Of String)("UPC") Equals r.Field(Of String)("UPC") _
   Select _
   New _
   With {.UPC = r.Field(Of String)("UPC"), .WIC_NUMBER = c.Field(Of String)("WIC_NUMBER"), _
   .WAG_ITEM_DESC = c.Field(Of String)("WAG_ITEM_DESC"), _
   .WAG_BRAND = c.Field(Of String)("WAG_BRAND"), .UOM = c.Field(Of String)("UOM"), _
   .GSK_PROMO_GRP = c.Field(Of String)("GSK_PROMO_GRP"), _
   .TOTAL_DOLLARS = c.Field(Of Decimal?)("TOTAL_DOLLARS"), _
   .TOTAL_UNITS = r.Field(Of Integer?)("TOTAL_UNITS"), _
   .WKND_DATE = c.Field(Of DateTime?)("WKND_DATE")} 
```

# java - 为什么 Java 的 RoundingMode HALF_UP 将 -2.5 舍入到 -3？

> ID：13995771
> 
> 赞同：9
> 
> 时间：2012-12-21T19:06:04.627
> 
> 标签：java, rounding

RoundingMode 允许程序员指定以何种方式舍入浮点数。这很棒，但我觉得有一点很奇怪。也许我只是误解了学校里一些基本的东西。

但是这种取整模式被描述为我在学校教的那种，“总是四舍五入到最接近的数字，当死在中心时，总是四舍五入。”但是为什么它会将-2.5四舍五入到-3？

我得出的结论是，它以绝对值四舍五入，但对我来说，-2 肯定是从 -2.5 “向上”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T19:16:21.897

`RoundingMode.UP`是“远离零”的舍入模式。 `RoundingMode.FLOOR`向负无穷大，`CEILING`向正无穷大。 `HALF_UP`与`UP`小数部分正好为 0.5 时一致。

他们必须选择*一些*术语来表示“远离零”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T19:09:29.437

[RoundingMode.HALF_UP](http://docs.oracle.com/javase/6/docs/api/java/math/RoundingMode.html#HALF_UP)的 JavaDocs 中概述了基本原理。

> 舍入模式向“最近的邻居”舍入，除非两个邻居是等距的，在这种情况下向上舍入。如果丢弃的分数 >= 0.5，则行为与 RoundingMode.UP 相同；否则，行为与 RoundingMode.DOWN 相同。请注意，这是学校通常教授的舍入模式。

关于舍入方法的[维基百科](http://en.wikipedia.org/wiki/Rounding#Round_half_up)文章提出了不同的主张：

> 例如，根据此规则，值 23.5 会四舍五入为 24，但 -23.5 会四舍五入为 -23。
> 
> 这是美国小学数学课上普遍教授的两条规则之一。

尽管已要求引用。

# rest - Jersey REST 方法的复杂（非字符串）返回类型

> ID：13995779
> 
> 赞同：0
> 
> 时间：2012-12-21T19:06:31.107
> 
> 标签：rest, jersey

我在设置一些我很确定/应该/很容易的东西时遇到了麻烦，所以我想我会把它扔给人群。我似乎无法在网络或 SE 上的其他地方找到我正在寻找的东西。

我当然是在简化我的项目，但基本上我有一个 JAX-WS 带注释的 Jersey 资源类，它看起来像这样：

```
@Path("myresource")
public class MyResource {

    @Autowired
    MyComplexObjectDAO daoInstance;

    @Path("findObject/{id}")
    @GET
    public MyComplexObject findObject( @PathParam(value="id") String id ) {
        return daoInstance.findObject( id );
    }

    @Path("saveObject")
    @PUT
    public MyComplexObject saveObject( MyComplexObject objectToSave ) {
        MyComplexObject savedObject = daoInstance.saveObject( objectToSave );
        return savedObject;
    }

} 
```

所以你可以看到我正在使用 spring 自动装配 DAO 对象，然后我在 REST 处理程序中使用 DAO 方法。

'findObject' 调用似乎工作正常 - 到目前为止，它完全按照我的预期工作。

'saveObject' 调用没有按我想要的方式工作，这就是我需要一些建议的地方。

您可以看到我正在尝试直接将我的复杂对象的实例作为 REST 方法的参数。另外，我想在保存复杂对象后返回一个实例。

我整理了一些“客户端”代码来测试它。

```
@Test
public void saveTest() {
    WebResource wsClient = createWebServiceClient();

    MyComplexObject unsavedInstance = createMyComplexObject();

    MyComplexObject savedInstance = 
            wsClient
            .path("saveObject")
            .accept(MediaType.APPLICATION_XML)
            .put(MyComplexObject.class, unsavedInstance);

    assertNotNull(savedIntent);
} 
```

返回以下错误：

```
com.sun.jersey.api.client.UniformInterfaceException: PUT http://localhost:8081/rest/myresource/save returned a response status of 400 Bad Request 
```

我不明白为什么这不起作用，我想我已经尝试了我能想到的一切。任何帮助或指导将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T06:48:33.127

我看到您在测试客户端中调用了 accept() 方法（这意味着将“Accept:”标头添加到请求中，指示服务器您想要哪种类型的表示）。但是，您不会调用 type() 方法来添加“Content-type:”标头并通知服务器您正在发送 XML 数据。有关示例，请参见[http://jersey.java.net/nonav/documentation/latest/client-api.html#d4e644](http://jersey.java.net/nonav/documentation/latest/client-api.html#d4e644)。

旁注：您的 URL 不是 RESTful - 您应该避免路径中的动词：

所以，而不是：

```
/api/findObject/{id}
/api/saveObject 
```

你应该使用：

```
/api/objects/{id}
/api/objects 
```

最后一点：要在调用 /api/objects 时创建对象，您应该执行 POST 而不是 PUT，以遵守 REST 最佳实践和广泛采用的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:16:29.710

切换到我在之前的评论中提到的“具体课程”解决方案是解决问题的方法。

# c# - 用户控制允许丢弃

> ID：13995780
> 
> 赞同：2
> 
> 时间：2012-12-21T19:06:32.110
> 
> 标签：c#, winforms, user-controls, drag-and-drop, sharpdevelop

我有一个`UserControl`看起来像`WPF's XAML`编辑器的东西。我想在其中拖动树节点并做一些事情。拖动系统适用于树视图部分。但我似乎无法让 drop 部分在我的自定义控件中工作。（控件是使用`sharpdevelop`库构建的）。

我将自定义控件的`AllowDrop`属性设置为`True`. 我将此添加到我的控件中：

```
this.DragDrop += new System.Windows.Forms.DragEventHandler(this.XmlEditControl_DragDrop)

private void XmlEditControl_DragDrop(object sender, DragEventArgs e)
{
    MessageBox.Show("I dropped");
} 
```

但我从来没有看到消息框。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:15:12.940

您需要更改第`DragDropEffects`一次`DragEventArgs`触发`DragEnter`事件的时间以完成拖放操作。因此，该`DragDrop`事件将触发

**例子**

```
this.DragEnter += new System.Windows.Forms.DragEventHandler(this.XmlEditControl_DragEnter);
this.DragDrop += new System.Windows.Forms.DragEventHandler(this.XmlEditControl_DragDrop);

private void XmlEditControl_DragEnter(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.All;
}
private void XmlEditControl_DragDrop(object sender, DragEventArgs e)
{
    MessageBox.Show("I dropped");
} 
```

谢谢，
我希望你觉得这有帮助:)

# jquery - 如何通过附加到它的事件来查找元素

> ID：13995793
> 
> 赞同：0
> 
> 时间：2012-12-21T19:07:32.683
> 
> 标签：jquery

我知道我可以附加这样的自定义事件

```
$("#customDropdownBox").on("clickOutside", function(){
    $(this).hide(300, hideCallback);
}) 
```

我知道我可以在正文上附加一个单击事件，以查找每个附加了自定义事件的元素，就像这样

```
$("body").on("click", function(event){
    $.each($("body *"), function(i, o){
        if($._data(o, "events") && $._data(o, "events")["clickOutside"])
            $(o).trigger("clickOutside");
    })
}) 
```

我想知道是否有更快的方法来执行此操作，而不必遍历 DOM 的所有 (*) 元素。我知道我可以使用类似的东西进行过滤

```
$("body div.classx") 
```

但我宁愿不硬编码特定的 ID 或类。我想知道是否有一种选择器可以实现这一点。就像是

```
$("body *{event:'clickOutside'}") 
```

或者

```
$.findEvent("clickOutside"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:15:36.513

为@Kevin B +1。我今天学到了新词“猴子补丁”和“打鸭子”:)。这就是我所做的。这是代码。"on" 和 "off" 方法的猴子补丁，如在此处详细说明[和在](http://paulirish.com/2010/duck-punching-with-jquery/)[此处](http://jsfiddle.net/mofle/ZyTHH/)循环说明

```
// Monkey patch on and off methods
(function($, window){
    window.clickOutside = [];
    var _oldOn = $.fn.on;
    $.fn.on = function(event,handler){
        if(event == "clickOutside"){
            $.fn.off.apply(this, arguments); // make sure the event is never registered twice
            window.clickOutside.push(this[0]);
        }
        return _oldOn.apply(this, arguments);
    };
    var _oldOff = $.fn.off;
    $.fn.off = function(event,handler){
        if(event == "clickOutside"){
            $.each(window.clickOutside, function(i, o){
                if(this == o){
                    window.clickOutside.splice(i, 1);
                }
            })
        }
        return _oldOff.apply(this, arguments);
    };
})(jQuery, window); 
```

现在我的监听功能如下

```
// Listen for clickOutside/clickElseWhere events
$("body").on("click", function(event){
    var $target = $(event.target);
    $.each(window.clickOutside, function(i, o){
        if($._data(o, "events") && $._data(o, "events")["clickOutside"] && !$(o).find("*").andSelf().has($target).length){
            $(o).trigger("clickOutside");
        }
    });
}); 
```

这让我只循环具有该特定事件的元素。

# ruby - 在 Heroku 上安装二进制文件，特别是 FontCustom

> ID：13995794
> 
> 赞同：3
> 
> 时间：2012-12-21T19:07:37.007
> 
> 标签：ruby, heroku, sinatra, webfonts

我正在 Heroku 上构建一个 Web 应用程序，它允许用户选择 n 个 SVG 图标，并将这些图标打包到一个字体文件中。该应用程序的核心是一个名为[FontCustom](https://github.com/endtwist/fontcustom)的项目。为我的项目使用 Gemfile 我可以安装 fontcustom gem，但我不知道如何安装`fontforge eot-utils ttfautohint`自述文件中指示的所需二进制依赖项。

1）是否可以在我的 Heroku 实例上安装这些库？

2）如果是，我该怎么做？

提前感谢您的任何帮助。赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T03:23:52.260

您可以将自定义库放在`bin/`应用程序的文件夹中，然后将它们包含在环境变量中`PATH`以及`LD_LIBRARY_PATH`应用程序启动时。

或者您可以制作自己的 Heroku 构建包。这是[heroku-buildpack-fontforge](https://github.com/bernerdschaefer/heroku-buildpack-fontforge)的一个示例。

[您可以在编译](https://github.com/bernerdschaefer/heroku-buildpack-fontforge/blob/master/bin/compile)和[发布](https://github.com/bernerdschaefer/heroku-buildpack-fontforge/blob/master/bin/release)步骤中看到它是如何工作的。

# scala - 为什么 Scala 很少用于桌面应用程序？

> ID：13995805
> 
> 赞同：6
> 
> 时间：2012-12-21T19:08:38.923
> 
> 标签：scala

我听说过很多关于 Scala 被用于 Web 开发的消息，但我很少听到关于 Scala 被用于桌面应用程序的消息。它在桌面应用程序中使用得不多，这是真的吗？造成这种情况的原因是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T19:57:30.870

Scala 没有更多地用于桌面应用程序，原因与 Java 没有更多地使用相同。这就是缺乏好的工具包和框架。当然你有 swing、swt 和其他的，但它们不是很复杂，当你尝试使用它们时，你会觉得你过去了 10 年。真正的问题是为什么 java 桌面工具包那么糟糕，但这超出了本文的范围。scala 的驱动设计原则之一就是利用现有的 java 库。scala 在很大程度上做到了这一点。由于java现在主要存在于服务器端应用程序和android（而不是桌面）上，因此命运大致相同。

这在未来可能会改变，但我对此表示怀疑。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-21T19:43:18.720

我认为这是因为缺乏工具。经常听说*为工作选择合适的工具*，其中*工具*可以是平台、框架、操作系统，或者在这种情况下，是编程语言。

Scala 本身没有任何东西可以阻止编写桌面应用程序。关键是您**永远不会用一种语言**编写程序：您**使用工具包**编写程序。工具包由语言、库和辅助工具组成，可将所有内容粘合在一起。Scala 是一门不错的语言，并且还从 Java 继承了一些很酷的小部件库，但是没有用于构建桌面应用程序的 Scala 框架。

因此，即使没有什么能阻止开发人员，也没有什么可以鼓励他们，这就是为什么通常选择其他平台进行桌面开发的原因。它经常成为 [Tcl/Tk的例子](http://www.tcl.tk/software/tcltk/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:22:58.310

我认为这是因为该语言相对较新，它的功能主要有助于开发处理大而复杂的数据的应用程序（功能编程语言中常见的功能）或已经开发的框架有助于编写 Web 应用程序。

与 C++、java 等语言相比，将 scala 用于普通的“桌面”应用程序并没有太大的优势……但当然，一段时间后会有更多的开发人员在 scala 中编码，也会有更多的各种标准桌面 scala 应用程序。

# php - 发送带有消息主题和正文的图像（可选）？

> ID：13995807
> 
> 赞同：1
> 
> 时间：2012-12-21T19:08:43.793
> 
> 标签：php, mysql, message

我创建了一个简单的 php 消息传递系统，供用户相互发送和接收消息。我想要尝试做的是添加一个可选的图像输入字段，以便用户可以选择图像并将其作为消息的一部分发送？

照片需要存储在我服务器上的目录文件夹中，并且图像的名称需要与消息字段的其余部分（即内容、主题、图像名称）一起存储在 mysql 表中。

有人可以告诉我如何调整我的代码以上传带有表格的图像吗？

```
<?php ob_start(); ?>
  <?php 

// CONNECT TO THE DATABASE
    require('includes/_config/connection.php');
// LOAD FUNCTIONS
    require('includes/functions.php');
// GET IP ADDRESS
    $ip_address = $_SERVER['REMOTE_ADDR'];

?>

  <?php require_once("includes/sessionframe.php"); 
?>

  <?php

    confirm_logged_in();

    if (isset ($_GET['to'])) {
    $user_to_id = $_GET['to'];

}

?> 
  <?php 
//We check if the form has been sent
if(isset($_POST['subject'], $_POST['message_content']))
{
    $subject = $_POST['subject'];
    $content = $_POST['message_content'];
    $image = $POST ['image'];

        //We remove slashes depending on the configuration
        if(get_magic_quotes_gpc())
        {
                $subject = stripslashes($subject);
                $content = stripslashes($content);
                $image = stripslashes($image);

        }

        //We check if all the fields are filled
        if($_POST['subject']!='' and $_POST['message_content']!='')
        {
            $sql = "INSERT INTO ptb_messages (id, from_user_id, to_user_id, subject, content, image) VALUES (NULL, '".$_SESSION['user_id']."', '".$user_to_id."', '".$subject."', '".$content."', '".$image."');";
            mysql_query($sql, $connection);

            echo "<div class=\"infobox2\">The message has successfully been sent.</div>";
        }
}

if(!isset($_POST['subject'], $_POST['message_content']))

if (empty($_POST['subject'])){
        $errors[] = 'The subject cannot be empty.';

    if (empty($_POST['body'])){
        $errors[] = 'The body cannot be empty.';

    }
    }

{
?>

<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
    <div class="subject">
  <input name="subject" type="text" id="subject" placeholder="Subject">

   <input type="file" name="image" id="image">

    <textarea name="message_content" id="message_content" cols="50" placeholder="Message" rows="8" style="resize:none; height: 100px;"></textarea>

    <input type="image" src="assets/img/icons/loginarrow1.png" name="send_button" id="send_button" value="Send">

</form>

<?php } ?>

<?php ob_end_flush() ?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T19:25:45.927

我刚刚在谷歌上做了一些挖掘，发现了这段代码。我认为这应该可以满足您的需求，但是您当然必须根据自己的情况对其进行调整。

```
<?php
  $allowedExts = array("jpg", "jpeg", "gif", "png");
  $extension = end(explode(".", $_FILES["file"]["name"]));
  if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/png")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
      && ($_FILES["file"]["size"] < 20000)
      && in_array($extension, $allowedExts)){
           if ($_FILES["file"]["error"] > 0){
             echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
           }  else{
                echo "Upload: " . $_FILES["file"]["name"] . "<br>";
                echo "Type: " . $_FILES["file"]["type"] . "<br>";
                echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
                echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";
           if (file_exists("upload/" . $_FILES["file"]["name"])){
             echo $_FILES["file"]["name"] . " already exists. ";
           }   else{
                 move_uploaded_file($_FILES["file"]["tmp_name"],
                 "upload/" . $_FILES["file"]["name"]);
                 echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
               }
           }
   }  else  {
        echo "Invalid file";
}
?> 
```

# java - 解析 URL 的意图有时为 null，抛出 NullPointerException

> ID：13995809
> 
> 赞同：5
> 
> 时间：2012-12-21T19:08:54.310
> 
> 标签：java, android, android-intent, android-browser, resolver

我有一个执行此操作的 Android 应用程序：

```
 PackageManager pm = getApplicationContext().getPackageManager();
    Intent browserIntent = new Intent();
    browserIntent.setAction(Intent.ACTION_VIEW);
    browserIntent.addCategory(Intent.CATEGORY_BROWSABLE);
    browserIntent.setData(Uri.parse("http://www.google.com"));

    ResolveInfo resolveInfo = pm.resolveActivity(browserIntent, PackageManager.MATCH_DEFAULT_ONLY);
    try {
        String browserType = nutent.activityInfo.packageName;
    } catch (NullPointerException npe) {
        npe.printStackTrace();
    } 
```

我已经在 4 种不同的手机和许多不同的仿真器配置上对此进行了测试。他们都工作正常。但是由于resolveInfo有时为空，我从野外部署的应用程序中收到了抛出NPE的崩溃报告。

直接的解决方法是在我的应用程序崩溃之前捕获 NPE 并处理它（如上所述）。但我已经尝试了好几天自己重现这个并且不能。在安装了单个默认浏览器的模拟器上，它解析为 com.android.browser.BrowserActivity：

```
ResolveInfo{411ef228 com.android.browser.BrowserActivity p=0 o=0 m=0x208000} 
```

同样，在安装了多个浏览器的手机上，这与 com.android.internal.app.ResolverActivity 的解析有些不同：

```
ResolveInfo{415c13b8 com.android.internal.app.ResolverActivity p=0 o=0 m=0x0} 
```

[此处](http://developer.android.com/reference/android/content/pm/PackageManager.html#resolveActivity%28android.content.Intent,%20int%29)的 resolveActivity() 文档指出：

> 返回包含确定为最佳操作的最终活动意图的 ResolveInfo。如果未找到匹配的活动，则返回 null。如果找到多个匹配的活动并且没有默认设置，则返回包含其他内容的 ResolveInfo，例如活动解析器。

所以我已经介绍了第一种情况，即确定为最佳操作的活动意图。也是最后一个场景，多个匹配活动没有默认操作，返回 ResolverActivity。

我真的很想重现 resolveActivity() 在请求 URL 活动时给我一个 null 的场景。有没有人知道如何在没有生根设备的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:32:50.260

> 我真的很想重现 resolveActivity() 在请求 URL 活动时给我一个 null 的场景。有没有人知道如何在没有生根设备的情况下做到这一点？

1.  转到设置>应用程序>所有>找到浏览器（在Nexus 4上，带有Chrome的股票ROM）>禁用
2.  开始捕捉 NPE :)

# jquery - AJAX回调后的jQuery .done

> ID：13995812
> 
> 赞同：3
> 
> 时间：2012-12-21T19:09:05.370
> 
> 标签：jquery

我正在尝试在 AJAX 调用完成后运行一些东西：

```
$.ajax({
    url: url,
    success: //do stuff
}).done(function (){
    $('#listings').fadeIn(800).done(function(){
        $('#loading').fadeOut(800);
    });
}); 
```

这不会执行最后一部分`$('#loading').fadeOut(800);`，它应该在`$('#listings').fadeIn(800)`完成时开始。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T19:09:40.310

`fadeIn()`并不是真正返回承诺的那种函数，但它确实有一个可以使用的回调函数：

```
$.ajax({
    url: url,
}).done(function (){
    $('#listings').fadeIn(800, function(){
        $('#loading').fadeOut(800);
    });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T19:12:20.070

要从动画中获取承诺对象，请使用`.promise`.

```
$.ajax({
    url: url,
    success: handler
}).done(function (){
    $('#listings').fadeIn(800).promise().done(function(){
        $('#loading').fadeOut(800);
    });
}); 
```

在这种特殊情况下，使用回调而不是动画更有`.promise`意义`.done`。使用的优点`.promise`是它会为所有选定元素产生一个回调，而不是每个元素一个回调。由于您只为一个元素设置动画，因此回调将是最好的方法。（阿德尼奥的回答）

使用 .promise 还有其他优点，但您似乎不需要它们。（`$.when`例如）

# joomla - 创建自定义模块：Menuitem SEF 链接？

> ID：13995813
> 
> 赞同：0
> 
> 时间：2012-12-21T19:09:08.177
> 
> 标签：joomla, joomla1.7

我有一个正在开发的 Joomla 网站，构建了一些自定义模块来控制内容。

我正在使用 menuitem 字段类型：

```
<field type="menuitem" name="loc_nav_item" label="Link URL" ></field> 
```

然后回响：

```
<a href="<?php echo $params->get('loc_nav_item');"></a> 
```

但是，即使我有 SEF url 处于活动状态并在网站上工作，这也会创建一个基于 ID 的 url，如下所示：

```
<a href="/101"></a> 
```

我对 Joomla 比较了解，在创建自定义模块时更是如此。我在这里缺少什么可以让模块生成正确的 SEF url 吗？

Joomla 1.7（客户需要...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T01:15:46.873

是的！您需要对其应用 JRoute 功能——这实际上并没有从 Joomla 1.5 改变，所以您可以在 Joomla 1.7 上使用它。不过，有关 11.1 平台的更多信息，请参阅[此处](http://docs.joomla.org/JRoute/11.1)的 Joomla 文档。

因此，您需要使用以下内容：

```
<a href="<?php echo JRoute($params->get('loc_nav_item'));"></a> 
```

还要告诉您的客户 Joomla 2.5 与 Joomla 1.7 没有明显差异，除了 Joomla 1.7 中缺少大量额外的安全功能。他要求自己被黑！！

# java - Java泛型方法和作为参数的方法对象有什么区别？

> ID：13995820
> 
> 赞同：8
> 
> 时间：2012-12-21T19:09:37.677
> 
> 标签：java, generics

泛型方法和只接受对象的方法之间有什么优势？它如何确保类型安全？

例如：当以下面代码片段中提到的任何一种形式定义我的界面时，它有什么区别？

```
public interface MyInterface {
  public <MT> String myMethod(MT t);
} 
```

或者

```
public interface MyInterface {
  public String myMethod(Object t);
} 
```

在我看来，泛型方法只有在我们围绕它键入绑定时才有优势。例如，类型参数应该是 Serializable 类。否则没有意义..寻找更多见解

```
public interface MyInterface {
  public <MT extends Serializable> String myMethod(MT t);
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-21T19:21:59.240

一个方法通常是泛型的，以确保两个参数相互兼容，或者返回一个其类型取决于方法的泛型类型的值。

例如，

```
public static <T> void sort(List<T> list, Comparator<? super T> c) 
```

确保列表的类型和比较器的类型是兼容的，如果签名是

```
public static void sort(List list, Comparator c) 
```

在以下示例中，返回值的类型取决于方法的泛型类型：

```
public static <T extends Object & Comparable<? super T>> T min(Collection<? extends T> coll) 
```

允许这样做：

```
List<Integer> intList = ...;
Integer min = Collections.min(intList); 
```

如果方法是

```
public static Comparable T min(Collection coll) 
```

你必须做

```
Integer min = (Integer) Collections.min(intList); 
```

如果您将代码更改为

```
Long min = (Long) Collections.min(intList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-14T08:46:30.243

从编译/运行时的角度来看它的含义也很不错。

如果您使用泛型，那么编译器会**在编译期间**生成必要的代码，并且您不会对相关对象进行运行时强制转换和/或类型检查。

另一方面，如果您只使用 Object 类作为泛型类型，您最终可能会使用更少的代码（因为编译器不会生成任何东西），但您需要注意**运行时**类型安全和强制转换自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-09T18:54:26.487

你是部分正确的。泛型方法和作为对象的方法在某些上下文中看起来相同，但主要区别在于编译器如何处理两者

对于作为参数的对象，类型转换是基于类型转换完成的，基本上它是在运行时处理的，但对于泛型类型编译时只处理它。

编译时处理比运行时处理要好得多。所以泛型方法很适合在你的上下文中用作比较对象作为参数

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-21T19:23:36.030

泛型方法限制了可以传递给方法的参数类型。这带来了更具凝聚力的代码，限制了它可以处理的输入，因此可以合理地假设具有某些特征。

例如

```
public interface MyInterface {
    public [MT extends BaseClass] String myMethod(MT t);
} 
```

在这里你总是知道所有适用于 BaseClass 的方法都适用于这个方法中的 t。

# jenkins - 使用 NTP 同步 jenkins 和 svn 服务器

> ID：13995825
> 
> 赞同：0
> 
> 时间：2012-12-21T19:09:42.560
> 
> 标签：jenkins, ntp

我正在尝试同步我的 jenkins slave/node 以与我的 svn 服务器具有相同的时间。我读过这个：

[http://www.sonatype.com/people/2009/02/the-hudson-build-farm-experience-volume-iii/](http://www.sonatype.com/people/2009/02/the-hudson-build-farm-experience-volume-iii/)

但它并没有真正进入设置它的细节。但我假设我需要创建一个文件 /etc/ntp.conf ，例如。此内容（使用我居住地附近的位置）：

```
server 0.north-america.pool.ntp.org
server 1.north-america.pool.ntp.org
server 2.north-america.pool.ntp.org
server 3.north-america.pool.ntp.org 
```

我是否需要在我的 svn 服务器和我的 jenkins 从服务器上创建它，我如何“激活”它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:17:28.973

是的，您应该在所有服务器上执行此操作。NTP 在单个服务器上保持时间同步，并且不知道您可能拥有的其他服务器。

只要您安装了 ntp 软件包，它就应该已经可以工作了。您可以检查`ntpd`守护程序正在运行的进程列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:37:43.217

通常作为服务器的机器应连接到`High Stratum Atomic`精确时钟，以获得准确的时间，如下所示。例如，您的 svn 服务器可以配置为与中央服务器同步的 NTP 服务器`NTP`，并且 svn`NTP`服务器可以允许其他机器（如 jenkins）充当请求时间同步的客户端。

```
 High Stratum Server <----> svn server ----> jenkins slave 
```

检查Linux上简单[NTP配置的链接](http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_%3a_Ch24_%3a_The_NTP_Server#.UNS4uGNctGc)

# php - opencart 对我来说是个大问题，

> ID：13995826
> 
> 赞同：0
> 
> 时间：2012-12-21T19:09:47.767
> 
> 标签：php, opencart

我开发的网站有问题，这是该网站 [http://jumairah.co/admin/](http://jumairah.co/admin/)

错误是

```
 Call to a member function isLogged() on a non-object 
```

我尝试重新上传所有文件，但问题仍然存在；当我从这里移动网站时存在问题 [http://projects.eng-mostafa.com/designs/opencart/admin](http://projects.eng-mostafa.com/designs/opencart/admin)

请任何人帮助

* * *

这是问题所在

```
 if ($this->customer->isLogged()) {
        $customer_group_id = $this->customer->getCustomerGroupId();
    } else {
        $customer_group_id = $this->config->get('config_customer_group_id');
    } 
```

以及在该路径 /public_html/system/library/customer.php 中记录的功能

这就是功能

```
public function isLogged() {
    return $this->customer_id;
} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:22:09.477

经过额外的尝试，我找到了解决方案，

我创建一个新数据库并为 opencart 进行全新安装，此步骤将创建配置并检查所有 777 文件夹

完成全新安装后，我修改了配置并将旧数据库数据放入其中，

# google-apps-script - Ui 应用程序中的图表和仪表板数据刷新

> ID：13995827
> 
> 赞同：-1
> 
> 时间：2012-12-21T19:09:51.107
> 
> 标签：google-apps-script, google-visualization

当您在表格中更改图表所关联的值时，图表会使用新数据自动更新/刷新。有没有办法用显示仪表板或图表的 Ui 应用程序复制这种行为？我知道您可以刷新浏览器或使用服务器功能和计时器重建整个图表/仪表板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:39:27.453

不会。只有电子表格中的图表会立即刷新。

# windows - Windows boost asio：async_receive_from 中的 10061 on on async_send_to

> ID：13995830
> 
> 赞同：2
> 
> 时间：2012-12-21T19:10:20.127
> 
> 标签：windows, network-programming, udp, boost-asio

我有一个相当大的应用程序，可以在 Linux 上按需要运行。我最近在 Windows 7 上使用 VC2012 和 boost asio 1.52 编译它并遇到一个奇怪的问题：

在同一个UDP 套接字上，`async_receive_from`后跟 an`async_send_to`会导致使用`boost::system::error_code`10061 调用读取完成处理程序：

> 由于目标机器主动拒绝，无法建立连接

*如果*发送目的地是本地主机上的另一个端口。如果数据包被发送到另一台机器，则不会调用读取完成处理程序。在读完成处理程序之后，调用写完成处理程序没有错误。

以下代码复制了该问题：

```
#include <iostream>
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/shared_ptr.hpp>

using namespace std;
using namespace boost::asio;

void read_completion_handler(const boost::system::error_code& ec, std::size_t bytes_received)
{
  if (!ec)
    cout << "Received " << bytes_received << " successfully" << endl;
  else
    cout << "Error: " << ec.message() << endl;
}

void write_completion_handler(const boost::system::error_code& ec, std::size_t bytes_transferred)
{
  if (!ec)
    cout << "Wrote " << bytes_transferred << " successfully" << endl;
  else
    cout << "Error: " << ec.message() << endl;
}

int main(int argc, char** argv)
{
  enum
  {
    max_length = 1500,
    out_length = 100
  };
  // buffer for incoming data
  char data[max_length];
  // outgoing data
  char out_data[out_length];

  // sender endpoint
  ip::udp::endpoint sender_endpoint;
  // for sending packets: if this localhost, the error occurs
  ip::udp::endpoint destination(ip::address::from_string("127.0.0.1"), 5004);

  io_service ioService;
  ip::udp::socket socket(ioService, ip::udp::endpoint(ip::udp::v4(), 49170));

  socket.async_receive_from(
    buffer(data, max_length), sender_endpoint,
    boost::bind(&read_completion_handler, 
    boost::asio::placeholders::error,
    boost::asio::placeholders::bytes_transferred));

  socket.async_send_to( boost::asio::buffer(out_data, out_length),
    destination,
    boost::bind(&write_completion_handler,
    boost::asio::placeholders::error,
    boost::asio::placeholders::bytes_transferred));

  ioService.run();

  cout << "Done" << endl;
  return 0;
} 
```

在 linux 上，这从来都不是问题。有人有解释吗？据我所知，在同一个套接字上同时读写应该没问题，或者在 Windows 上不是这样吗？如果 localhost 是目的地，为什么会改变行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-26T20:26:50.057

是的，在您提出这个问题后大约 6 个月。我什至不确定我是怎么来到这里的。我自己也遇到了这个问题——但好消息是这不是问题。

当某些机器没有在您发送消息的端口上侦听时，它们会通过 ICMP 返回 Destination Unreachable 消息。Asio 将其转换为 boost::system::errc::connection_refused 和/或 boost::system::errc::connection_reset。这是一个毫无意义的错误，因为 UDP 是无连接的。您可以放心地在您的 async_receive_from 处理程序中忽略这两个错误代码（即，如果您返回其中一个错误，只需再次调用 async_receive_from）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-21T20:05:02.337

对于任何对此感到困惑的人，请阅读我在上面对第一个回复所做的评论。

但是，如果您通过任何更改在 C# 中遇到相同的问题，请使用此代码来摆脱这种行为：

```
 byte[] byteTrue = new byte[4];
        byteTrue[byteTrue.Length - 1] = 1;
        m_udpClient.Client.IOControl(-1744830452, byteTrue, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-17T10:56:17.560

`PORT_UNREACHABLE`要在 UDP 接收上禁用 ICMP ，请将[SIO_UDP_CONNRESET](https://docs.microsoft.com/en-us/windows/win32/winsock/winsock-ioctls#sio_udp_connreset-opcode-setting-i-t3)设置为`0`（不是 1，如其他答案所示）：

```
#ifdef _WIN32
    struct winsock_udp_connreset {
      unsigned long value = 0;
      int name() { return -1744830452; /* SIO_UDP_CONNRESET */ }
      unsigned long* data() { return &value; }
    };
    winsock_udp_connreset connreset{0};
    socket.io_control(connreset);
#endif 
```

# algorithm - 检测抄袭的幼稚方法？

> ID：13995831
> 
> 赞同：0
> 
> 时间：2012-12-21T19:10:22.320
> 
> 标签：algorithm

假设您想比较学生的论文，看看其中一篇论文是否被抄袭。你会如何以一种天真的方式（即不太复杂的方法）来解决这个问题？当然，有比较简单的方法，比如比较论文中使用的单词，也有复杂的方法，比如使用压缩函数，但是还有哪些其他方法可以在没有太多复杂性/理论的情况下检查抄袭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:21:57.403

有几篇论文给出了几种方法，我推荐阅读[这篇](http://www.labri.fr/perso/fleury/courses/PdP/Plagiat/Fast_Plagiarism_Detection_System.pdf) 论文展示了一种基于索引结构的算法，该索引结构建立在整个文件集合之上。

所以他们说他们的算法可以用来在大型软件系统中找到相似的代码片段。在建立索引之前，集合中的所有文件都被标记化。这是一个简单的解析问题，可以在线性时间内解决。对于集合中的 N 个文件中的每一个，文件 F_i 的标记器的输出是 n_i 个标记的字符串。

![在此处输入图像描述](../Images/0f86ee99a0fe957e5b5e7de52daf2a9e.png)

[这](http://page.mi.fu-berlin.de/prechelt/Biblio/jplagTR.pdf)是您可以阅读的其他论文

其他好的算法[是一种基于骗局的算法](http://www.iaeng.org/publication/IMECS2011/IMECS2011_pp272-277.pdf)，它包括通过比较测试文档和注册文档之间常见的一组单词来检测抄袭。与许多信息检索系统一样，我们的抄袭检测系统使用精确度和召回率指标进行评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:35:52.320

你可以看看 Dick Grune 的[相似性比较器](http://dickgrune.com/Programs/similarity_tester/)，它声称也适用于自然语言文本（我只在软件上尝试过）。算法也被描述。（顺便说一句，我认为他的解析书非常好。）

# windows-phone-7 - 如何以编程方式覆盖 Windows Phone 建议栏？

> ID：13995836
> 
> 赞同：0
> 
> 时间：2012-12-21T19:10:45.073
> 
> 标签：windows-phone-7, toolbar

谈到我们[在这里](http://www.windowsphone.com/en-us/how-to/wp7/basics/copy-and-paste)看到的**建议栏**，我想知道是否有办法以编程方式显示/隐藏此栏，和/或以编程方式在其中添加/删除按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:58:58.587

那就是您所指的上下文菜单。检查此链接以了解如何在您的应用中使用 Contextmenu

[深入了解 WP7 ContextMenu](http://www.windowsphonegeek.com/articles/WP7-ContextMenu-in-depth--Part1-key-concepts-and-API)

# php - PHP Unique/SUM/Merge 数组操作

> ID：13995837
> 
> 赞同：2
> 
> 时间：2012-12-21T19:10:51.790
> 
> 标签：php, arrays, merge, unique

这很难用语言解释，但基本上我需要取两个数组，将它们与唯一值合并，并对其中的一列求和。写在下面时更有意义：

```
$a = array(
   0 => array(
      'ID' => 1,
      'Count' => 2
   ),
);

$b = array(
   0 => array(
      'ID' => 1,
      'Count' => 4,
   ),
   1 => array(
      'ID' => 2,
      'Count' => 3,
   ),
); 
```

我需要最终产品是：

```
$a_plus_b = array(
    0 => array(
       'ID' => 1,
       'Count' => 6,
    ),
    1 => array(
       'ID' => 2,
       'Count' => 3,
    ),        
); 
```

我一直在玩 array_merge() 和 array_unique() 的不同变体，但我找不到一种*有效*的方法来做我需要的事情。我知道我总是可以做嵌套循环，但我希望能做一些更简单的事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:25:14.917

这应该可以解决问题

**注意：**此解决方案需要 PHP `>= 5.3`。下面有一个 PHP < 5.3 的解决方案。

```
$input = array($a, $b);
// add as many result arrays to $input as you want; e.g.,
// $input = array($a, $b, $c, $d);

$output = array_count_values(
  call_user_func_array(
    'array_merge',
     array_map(
       function($arr) {
         return array_fill(0, $arr['Count'], $arr['ID']);
       },
       call_user_func_array(
         'array_merge',
         $input
       )
     )
  )
);

print_r($output); 
```

输出

```
Array
(
    [1] => 6
    [2] => 3
) 
```

**请注意**，上面的数组键是`ID`值。数组值是`Count`值。

* * *

如果您正在运行 PHP `< 5.2`，您将无法将内联闭包与`array_fill`. 您必须将其定义为单独的函数。

```
$input = array($a, $b);

function _fill($arr) {
  return array_fill(0, $arr['Count'], $arr['ID']);
}

$output = array_count_values(
  call_user_func_array(
    'array_merge',
    array_map(
      '_fill',
      call_user_func_array(
        'array_merge',
        $input
      )
    )
  )
);

print_r($output); 
```

* * *

从这里开始，将输出转换为您想要的格式是一项微不足道的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-21T10:06:33.997

请不要过度设计这样的基本任务。使用单个循环迭代两个数组并使用`ID`值分配临时键。`ID`如果多次遇到相应的键，只需将新`Count`值添加到存储的值中。

代码：（[演示](https://3v4l.org/9N5WV)）

```
$result = [];
foreach (array_merge($a, $b) as $row) {
    if (!isset($result[$row['ID']])) {
        $result[$row['ID']] = $row;
    } else {
        $result[$row['ID']]['Count'] += $row['Count'];
    }
}
var_export(array_values($result)); 
```

输出：

```
array (
  0 => 
  array (
    'ID' => 1,
    'Count' => 6,
  ),
  1 => 
  array (
    'ID' => 2,
    'Count' => 3,
  ),
) 
```

* * *

函数式编程也可以用来实现相同的结果——`array_reduce()`这是理想的，因为输出中的元素数量将等于或小于输入数据中的元素数量。

代码：（[演示](https://3v4l.org/lUoOL)）

```
var_export(
    array_values(
        array_reduce(
            array_merge($a, $b),
            function ($result, $row) {
                if (!isset($result[$row['ID']])) {
                    $result[$row['ID']] = $row;
                } else {
                    $result[$row['ID']]['Count'] += $row['Count'];
                }
                return $result;
            },
            []
        )
    )
); 
```

# ios - MBProgressHUD ] NSURLconnection 以异步方式

> ID：13995841
> 
> 赞同：1
> 
> 时间：2012-12-21T19:11:09.883
> 
> 标签：ios, asynchronous, exc-bad-access, mbprogresshud

我在 MBProgressHUD 和 NSURLconnection 上苦苦挣扎......

我正在使用 showWhileExecuting 方法来调用另一个内部包含 NSURLConnection 代码的私有方法。

```
-(void)HUD
{
    MBProgressHUD *HUD = [[MBProgressHUD alloc] initWithView:self.view];
    [self.view addSubview:HUD];
    HUD.delegate = self;
    HUD.labelText = @"Initializing";

    [HUD showWhileExecuting:@selector(authenticateWithPhoneNumber) onTarget:self withObject:nil animated:YES];
} 
```

这是我通过 showWhileExecuting 方法调用的方法。

```
-(void)authenticateWithPhoneNumber
{
    // Do some stuff
    // Get JSON data using NSURLConnection HERE

    if(successful)
    {   
        //EXC_BAD_ACCESS error here
        [self performSegueWithIdentifier:@"A" sender:self];
    }
    else
    {
        //EXC_BAD_ACCESS error here
        [self performSegueWithIdentifier:@"B" sender:self];
    }
} 
```

当我运行该应用程序时，我收到 EXC_BAD_ACCESS 错误以及以下消息：

28 0x344c0b8b 29 0x344c082b 30 0xf2d39 -[AuthenticationConfirmationViewController authenticateWithPhoneNumber] 31 0xd9013 -[MBProgressHUD launchExecution]

假设那些执行 segue 代码是问题...我将它们移到 HUD 方法内部，如下所示...

```
-(void)HUD
{
    MBProgressHUD *HUD = [[MBProgressHUD alloc] initWithView:self.view];
    [self.view addSubview:HUD];
    HUD.delegate = self;
    HUD.labelText = @"Initializing";

    [HUD showWhileExecuting:@selector(authenticateWithPhoneNumber) onTarget:self withObject:nil animated:YES];

    if(successful)
    {
        [self performSegueWithIdentifier:@"A" sender:self];
    }
    else
    {
        [self performSegueWithIdentifier:@"B" sender:self];
    }
} 
```

现在移动到下一页很好......除了它甚至在 JSON 数据处理过程结束之前就跳转到其中一个页面。

是什么问题导致了所有这些麻烦？在这种情况下解决问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:29:47.103

正在进行中的原始方法。m 必须对线程做一些事情，我对我不完全理解的事情不感兴趣

```
#pragma mark - Threading

- (void)showWhileExecuting:(SEL)method onTarget:(id)target withObject:(id)object animated:(BOOL)animated {
    methodForExecution = method;
    targetForExecution = MB_RETAIN(target);
    objectForExecution = MB_RETAIN(object); 
    // Launch execution in new thread
    self.taskInProgress = YES;
    [NSThread detachNewThreadSelector:@selector(launchExecution) toTarget:self withObject:nil];
    // Show HUD view
    [self show:animated];
} 
```

我建议你使用 `showHUDAddedTo`

```
 -(void)authenticateWithPhoneNumber
    {
        // Do some stuff
            // Add right before your JSON executions
            MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
            hud.labelText = @"Initializing...";     
        // Get JSON data using NSURLConnection HERE

        if(successful)
        {   
            // Add at start of requestFinished AND requestFailed basically remove hud just before your segues
             [MBProgressHUD hideHUDForView:self.view animated:YES];
            //EXC_BAD_ACCESS error here
            [self performSegueWithIdentifier:@"A" sender:self];
        }
        else
        {
  // Add at start of requestFinished AND requestFailed basically remove hud just before your segues
             [MBProgressHUD hideHUDForView:self.view animated:YES];
            //EXC_BAD_ACCESS error here
            [self performSegueWithIdentifier:@"B" sender:self];
        }
    } 
```

# c# - WebResource.axd 中使用的参数何时重置？

> ID：13995844
> 
> 赞同：4
> 
> 时间：2012-12-21T19:11:22.720
> 
> 标签：c#, asp.net, webresource.axd

使用 WebResource.axd 时，您将看到在查询字符串中传递了两个参数。通常看起来像这样：

```
WebResource.axd?d=9H3mkymBtDwEocEoKm-S4A2&t=634093400273197793 
```

我遇到了一个问题，我需要一个指向相关资源的永久链接。最近我使用的链接停止工作。什么会导致这些 id 发生变化？重启服务器？重新编译代码？反正有没有使这些ID永久化？

背景 -

作为我们订阅的网站监控服务的一部分，我们已经为我们的网站“记录”了几组用户操作。例如，我们记录了登录网站的过程。监控现在说用户登录过程失败（它工作正常），因为它找不到带有它记录的 id 的 WebResource.axd。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:25:43.633

此页面提供有关 URL 构成的所有信息

[http://support.microsoft.com/kb/910442](http://support.microsoft.com/kb/910442)

> “d”代表请求的 Web 资源

值得注意的是，您不需要时间戳 (t) 参数来调用资源。在您自己的网站上尝试，查看源代码并获取 webresource.axd 网址并导航到它，删除`t`

# java - 扩展 AbstractVisualizer 的困难：获取 ClassCastException

> ID：13995849
> 
> 赞同：1
> 
> 时间：2012-12-21T19:11:46.590
> 
> 标签：java, jmeter, jmeter-plugins

我正在为 JMeter 开发插件。我想要配置测试报告的功能，比如在简单数据编写器中。为此，我想从 AbstractVisualizer 扩展，它已经实现了我需要的所有功能。当我使用我的插件编译并运行 JMeter 时，我在 GUI 上收到错误：“com.blazemeter.jmeter.testexecutor 无法转换为 org.apache.jmeter.reporters.ResultCollector” 这是代码，它发生在哪里：

```
/* Overrides AbstractJMeterGuiComponent.configure(TestElement) */
@Override
public void configure(TestElement el) {
    super.configure(el);
    setFile(el.getPropertyAsString(ResultCollector.FILENAME));
    ResultCollector rc = (ResultCollector) el;
    errorLogging.setSelected(rc.isErrorLogging());
    successOnlyLogging.setSelected(rc.isSuccessOnlyLogging());
    if (collector == null) {
        collector = new ResultCollector();
    }
    collector.setSaveConfig((SampleSaveConfiguration) rc.getSaveConfig().clone());
} 
```

确切的字符串：

```
ResultCollector rc = (ResultCollector) el; 
```

如果我从 AbstractListenerGui 扩展，在此之前它工作正常（没有 ClassCastException）。Per JMeter API AbstractVisualizer 是 AbstractListenerGui 的一个孩子，据我了解，扩展 AbstractVisualizer 而不是 AbstractListenerGui 不应该导致这样的问题。那么，请您帮助我理解我的问题吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:00:26.107

最后，我找到了解决方案。这很简单：我从 ResultCollector 扩展了我的监听器。

# fish - 在 Fish Shell 中抑制或自定义介绍消息

> ID：13995857
> 
> 赞同：200
> 
> 时间：2012-12-21T19:12:34.287
> 
> 标签：fish

是否可以删除鱼壳中的介绍消息：

> 欢迎来到fish，友好的交互式外壳
> 
> 键入帮助以获取有关如何使用鱼的说明

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2012-12-21T19:20:51.917

发现在fishd.Machine.local中设置了问候语。将以下内容覆盖为`~/.config/fish/config.fish`：

```
set fish_greeting 
```

* * *

## 回答 #2

> 赞同：187
> 
> 时间：2013-10-10T08:47:56.053

凯文的答案适用于静态文本。如果你需要一个交互式的欢迎信息，比如我的涉及到*fortune*命令，你可以做

```
function fish_greeting 
```

创建你的`fish_greeting`函数。我只有

```
function fish_greeting
    fortune
end 
```

并保存它

```
funcsave fish_greeting 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2014-07-07T16:00:07.627

> 警告：自鱼 2.4.0 起不再有效 - 请参阅[Kevin 的](https://stackoverflow.com/a/13995944/2903889)答案以获得正确的当代解决方案。

如果没有名为“fish_greeting”的环境变量，则不会打印任何内容。默认情况下，有一个 fish_greeting 变量。你可以删除这个：

```
set --erase fish_greeting 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-01-05T03:24:23.613

```
> set --universal fish_greeting 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-10-17T06:34:10.097

创建您的 fish_greeting 函数。我只有

```
function fish_greeting                                             13:23:39
    echo 'Hello'
end 
```

并保存它

```
funcsave fish_greeting 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-05-11T19:32:07.513

请阅读官方文档。

[http://fishshell.com/docs/current/faq.html#faq-greeting](http://fishshell.com/docs/current/faq.html#faq-greeting)

简短的回答：`set -e fish_greeting`

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-09-23T02:31:33.053

添加`set fish_greeting`到您的`~/.config/fish/config.fish`文件中。

[鱼常见问题解答](https://fishshell.com/docs/current/faq.html)中对此进行了回答：

> **每次登录如何运行命令？什么鱼相当于.bashrc？**
> 
> 编辑文件`~/.config/fish/config.fish`，如果不存在则创建它（注意前导句点）。
> 
> **如何更改问候语？**
> 
> 更改变量的值`fish_greeting`或创建`fish_greeting`函数。例如，要删除问候语，请使用：
> 
> ```
> set fish_greeting 
> ```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-09-11T10:05:11.507

这是一种`silly`回答。您可以在文件夹中创建一个`fish_greeting.fish`空文件`~/.config/fish/functions`，这将删除问候消息。

这可以通过

```
$ touch ~/.config/fish/functions/fish_greeting.fish 
```

或者

```
$ function fish_greeting.fish
end

$ funcsave fish_greeting.fish 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-17T20:16:44.423

[在此处安装此脚本](https://github.com/ph04/pokemon-icat)后，您还可以将随机口袋妖怪显示为鱼问候。打开终端并输入：

```
function fish_greeting
    $HOME/.pokemon-icat/pokemon-icat.sh
end 
```

并保存功能以备日后鱼儿问候

```
funcsave fish_greeting 
```

我只是喜欢打开终端，然后弹出的第一件事就是口袋妖怪。如果它是一个传奇，那就更令人满意了:)

# vb.net - 实体框架 1-1 关系未将数据持久化到数据库

> ID：13995858
> 
> 赞同：2
> 
> 时间：2012-12-21T19:12:43.093
> 
> 标签：vb.net, entity-framework, ef-code-first, entity-framework-5

我有一张`FeeMetadata`带 PK的桌子`FeeID BIGINT IDENTITY(1,1) NOT NULL`

此表包含两个 1-1 关系。一到`PFD.Fees`，一到`SoaCourt.Fees`通过`FeeID`列（三个表同名，只有元数据表标记为IDENTITY，其他两个表此列是PK但不是标识）

这是 EF 类的代码：

```
Namespace PFD

    <Table("FeeMetadata", Schema:="PFD")>
    Public Class FeeMetadata
        Public Sub New()
            MyBase.New()
        End Sub

        Public Sub New(ByVal tFee As SOACourt_v1)
            Me.New()

            Me.GroupKey = tFee.DriverLicenseNumber
            Me.PfdFee = New PFD.Fee(tFee)
            Me.SoaCourtFee = New SoaCourt.Fee(tFee)
        End Sub

        <Key>
        <DatabaseGenerated(DatabaseGeneratedOption.Identity)>
        Public Property FeeID As Int64

        ' Other domain-specific properties...

        Public Property SoaCourtFee As SoaCourt.Fee
    End Class
End Namespace

Namespace PFD
    <Table("Fees", Schema:="PFD")>
    Public Class Fee
        Public Sub New()
            MyBase.New()
        End Sub

        Public Sub New(ByVal tFee As SOACourt_v1)
            Me.New()

            Me.Amount = tFee.Amount
        Me.DueDate = tFee.DueDate
        End Sub

        <Key>
        <ForeignKey("MetaData")>
        <DatabaseGenerated(DatabaseGeneratedOption.None)>
        Public Property FeeID As Int64

        ' Other domain-specific properties...

        Public Property MetaData As FeeMetadata
    End Class
End Namespace

Namespace SoaCourt
    <Table("Fees", Schema:="SoaCourt")>
    Public Class Fee
        Public Sub New()
            MyBase.New()
        End Sub

        Public Sub New(ByVal tFee As SOACourt_v1)
            Me.New()

            Me.CaseID = tFee.CaseID
            Me.CaseNumber = tFee.CaseNumber
            Me.TicketNumber = tFee.TicketNumber
        End Sub

        <Key>
        <ForeignKey("MetaData")>
        <DatabaseGenerated(DatabaseGeneratedOption.None)>
        Public Property FeeID As Int64

        ' Other domain-specific properties 

        Public Property MetaData As PFD.FeeMetadata
    End Class
End Namespace 
```

编辑：创建和持久化数据库实体的代码：

```
Using tContext As FeesContext = New FeesContext
    For Each tFee As SOACourt_v1 In tFees
        tContext.FeeMetadata.Add(New PFD.FeeMetadata(tFee))
    Next
    tContext.SaveChanges()
End Using 
```

我遇到的问题是 SoaCourt.Fee 实体没有被持久化到数据库中。PFD.FeeMetadata 和 PFD.Fee 都正确保存，但 SoaCourt.Fee 不是。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:42:31.920

The answer to [this question](https://stackoverflow.com/questions/13998158/how-would-i-defined-a-1-1-relationship-using-ef-5-code-first) is the solution here.

In summary: EF5 can not persist classes of the same name from different namespaces. ***Entity class names must be unique across namespaces.***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:28:16.437

我相信您需要将这些导航属性标记为`Overridable`VB.NET

```
 Public Overridable Property MetaData As FeeMetadata 
```

这允许在 EntityFramework 使用时覆盖该属性，否则会将其视为本地（未映射）属性。

[VB.NET 可覆盖关键字](http://msdn.microsoft.com/en-us/library/zcfd2sa9.aspx)

# 数据库生成属性

以上是错误的。 `virtual`(C#) 和`Overridable`(VB.NET) 用于允许延迟加载关联实体。

是否有可能因为该`<DatabaseGenerated(DatabaseGeneratedOption.None)>`属性而做一些有趣的事情？您不应该在外键属性上需要它。EF 将自行处理外键的分配，并且因为您指定它不是数据库生成的，所以它期望您显式分配一个值？

# 特性

您还拥有作为 Key 和 ForeignKey 列出的相同属性 (FeeID)。

FeeID 应该仍然是一个键，并且您应该有一个 MetadataID 的第二个属性，标记为 ForeignKey。即使您可能希望所有关联记录都具有相同的键值（如果它有效，您帖子中的代码将完成），但很可能在某些时候您将需要这种重新关联的方式这些对象。最好从一开始就设计它。

就我个人而言，我会将 Metadata 类更改为类似的东西，并根据需要在其他类上效仿：

```
<Table("FeeMetadata", Schema:="PFD")>
Public Class FeeMetadata
    Public Sub New()
        MyBase.New()
    End Sub

    Public Sub New(ByVal tFee As SOACourt_v1)
        Me.New()

        Me.GroupKey = tFee.DriverLicenseNumber
        Me.PfdFee = New PFD.Fee(tFee)
        Me.SoaCourtFee = New SoaCourt.Fee(tFee)
    End Sub

    <Key>
    Public Property FeeMetadataID as Int64

    Public Property SoaFeeID As Int64
    Public Property PfdFeeID As Int64

    <ForeignKey("SoaFeeID")>
    Public Property SoaCourtFee As SoaCourt.Fee
    <ForeignKey("PfdFeeID")>
    Public Property PfdFee As PFD.Fee
End Class 
```

这表示一个包含三个字段的表：一个主键（FeeMetadataID）和两个外键（SoaCourtFeeID 和 PfdFeeID）。导航属性使用属性中的外键值来创建关系。除了属性声明本身之外，这些导航属性的另一端实际上不需要任何东西。在这种情况下，我很确定，甚至没有外键属性。所以 SOACourt.Fee 可以简单地是 Key 属性，无论您想要什么数据属性，以及一个简单`Public Overridable Property Metadata as FeeMetadata`的描述导航回元数据的方式。

# javascript - Facebook 应用程序在 Chrome 中无法运行，但在 Firefox 中运行良好

> ID：13995859
> 
> 赞同：4
> 
> 时间：2012-12-21T19:12:42.563
> 
> 标签：javascript, facebook, google-chrome, firefox, heroku

我刚刚开始使用 heroku 制作 Facebook 应用程序。我做了一个测试应用程序。我在 heroku 上上传了一个使用 HTML5、CSS 和 Javascript 的页面。该应用程序未在 Google Chrome [https://apps.facebook.com/shrytestapp/](https://apps.facebook.com/shrytestapp/)中显示，但在 Mozilla Firefox 中运行良好。[此外，在 heroku 服务器http://salty-shelf-6707.herokuapp.com/](http://salty-shelf-6707.herokuapp.com/)中打开该页面时效果很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T19:24:24.863

当您在 Facebook 中访问该应用程序时，HTTPS 用于传输数据，但 Chrome 已因此阻止通过普通 HTTP 传输的内容，并坚持一切都安全传输，而 Firefox 则不那么挑剔。

这是控制台在 Chrome 中显示的内容

```
[blocked] The page at https://salty-shelf-6707.herokuapp.com/
    ran insecure content from http://www.google.com/jsapi.
Uncaught ReferenceError: google is not defined 
```

Google 的 JS API 已被阻止，JavaScript 无法运行。

（您也有一些未找到的错误，但这无关紧要）

正如你提到的，该应用程序通过[http://salty-shelf-6707.herokuapp.com/](http://salty-shelf-6707.herokuapp.com/)可以正常工作，但不能通过[https://salty-shelf-6707.herokuapp.com/](https://salty-shelf-6707.herokuapp.com/)

尝试使用以下内容来加载 API

```
<script type="text/javascript" src="//www.google.com/jsapi"></script> 
```

src 值开头的`//`url 将使 url 协议相对或正确的技术术语，方案相对。

HTML5 Boilerplate 的首席开发人员 Paul Irish[在他的网站上发布了有关这方面的更多信息。](http://paulirish.com/2010/the-protocol-relative-url/)

# python - 影响多个任务的芹菜 rate_limit

> ID：13995860
> 
> 赞同：3
> 
> 时间：2012-12-21T19:12:50.283
> 
> 标签：python, rabbitmq, celery

我有一个使用 rabbitmq 和 celery 的设置，工作人员在 4 台机器上运行，每台机器有 4 个实例。我定义了两个任务函数，它们基本上调用相同的后端函数，但其​​中一个`process_transaction`未定义 rate_limit 命名，另一个`slow_process_transaction`名为`rate_limit="6/m"`. 任务进入 rabbitmq 上的不同队列，`slow`并且`normal`.

奇怪的是对这两个任务都执行了 rate_limit。如果我尝试使用 更改 rate_limit `celery.control.rate_limit`，则使用`process_transaction`不会更改有效汇率，并且使用`slow_process_transaction`名称会更改两者的有效汇率。

关于什么是错的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T15:41:09.193

通过阅读存储桶源代码，我发现 celery 通过在完成任务后休眠时间增量来实现速率限制，因此，如果您在同一个工作人员中混合具有不同速率限制的任务，它们会相互影响。

分离工人解决了我的问题，但这不是最佳解决方案。

您可以通过在 celeryd 调用中使用节点名称和命名参数来分隔工作人员。例如，您有节点“快”和“慢”，并且您希望它们分别使用并发 5 和 1 的单独队列：

```
celeryd <other opts> -Q:fast fast_queue -c:fast 5 -Q:slow slow_queue -c:slow 1 
```

# azure - Azure Blob 存储和 HDF 文件存储

> ID：13995861
> 
> 赞同：0
> 
> 时间：2012-12-21T19:12:51.097
> 
> 标签：azure, blob, hdf5

我正在开发云服务器，我需要使用 blob 存储来存储 HDF 文件 ( [http://www.hdfgroup.org/HDF5/ )。](http://www.hdfgroup.org/HDF5/)

与在文件中创建、读取写入和修改数据元素相关的函数来自 HDF API。

我需要获取文件路径来创建文件或读取或写入它。

谁能告诉我如何在 Azure Blob 上创建自定义文件？

我需要能够使用如下所示的 API，但将 Azure 存储路径传递给文件。 [http://davis.lbl.gov/Manuals/HDF5-1.4.3/Tutor/examples/C/h5_crtfile.c](http://davis.lbl.gov/Manuals/HDF5-1.4.3/Tutor/examples/C/h5_crtfile.c)

我尝试创建的这些文件可能会变得非常大~10-20GB，因此在本地下载并修改它们对我来说不是一个选择。

谢谢

沙市

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:03:53.867

公认充满挑战的一种可能方法是使用您包含的代码在临时位置创建文件，然后使用 Azure API 将文件作为文件输入流上传到 Azure。我正在研究如何在 Azure 存储中处理大小限制，所以我不能说是否可以在一次上传操作中移动整个 10-20GB 文件，但是由于 Azure API 从输入流中读取，所以你应该能够创建操作组合，这些操作将导致您需要的信息驻留在 Azure 存储中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T23:11:56.707

> 谁能告诉我如何在 Azure Blob 上创建自定义文件？
> 
> 我需要能够使用如下所示的 API，但将 Azure 存储路径传递给文件。 [http://davis.lbl.gov/Manuals/HDF5-1.4.3/Tutor/examples/C/h5_crtfile.c](http://davis.lbl.gov/Manuals/HDF5-1.4.3/Tutor/examples/C/h5_crtfile.c)

Windows Azure Blob 存储是一种用于存储可通过**HTTP**或**HTTPS**访问的大量**非结构化数据**的服务。因此，从应用程序的角度来看，Azure Blob 不能用作普通磁盘。

 ****Microsoft 提供了非常好的[API](https://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)（c#、Java）来处理 blob 存储。它们还提供 Blob 服务 REST API 以从任何其他语言访问 blob（其中没有像 C++ 那样提供特定的 blob 存储 API）。

单个块 blob 可以高达 200GB，因此它应该可以轻松存储大约 10-20GB 大小的文件。

恐怕提供的示例不适用于 Windows Azure Blob。但是，我不知道HDF文件存储；也许他们提供了一些 Azure Blob 存储支持。****

# matlab - 奇怪的 jordan.m 失败

> ID：13995863
> 
> 赞同：0
> 
> 时间：2012-12-21T19:13:08.490
> 
> 标签：matlab, matrix

我试图计算这个 9x9 矩阵的 Jordan 形式：

```
 0     1     1     1     1     0     1     0     0
 1     0     1     1     1     0     0     0     1
 1     1     0     1     0     1     1     1     1
 1     1     1     0     0     1     0     1     0
 1     1     0     0     0     0     0     0     0
 0     0     1     1     0     0     0     0     0
 1     0     1     0     0     0     0     0     0
 0     0     1     1     0     0     0     0     0
 0     1     1     0     0     0     0     0     0 
```

并收到此消息：

> 警告：找到不能用根式确定的最小多项式的根。[linalg::jordanForm] 使用 eval 未定义函数或变量 'FAIL' 时出错。
> 
> sym/double 中的错误（第 937 行）X = eval(Xstr);
> 
> 约旦错误（第 21 行） V = double(jordan(sym(A)));

有人知道发生了什么吗？

# ios - 同步到云端时如何获取 iOS 崩溃日志

> ID：13995864
> 
> 赞同：0
> 
> 时间：2012-12-21T19:13:20.503
> 
> 标签：ios, symbolicatecrash

如果用户只与 iCloud 同步，我如何获取他们的崩溃日志？我让他们尝试与他们的计算机同步，但似乎没有将它们复制到他们的计算机上。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T19:21:30.973

使用 Xcode 将他们的设备连接到您的开发机器。您将在 Window > Organizer > Devices >（设备名称）> Device Logs 中找到他们的崩溃日志。

![设备日志](../Images/ccf08b52419a0c702a725061b54cbf82.png)

ps 你可能需要等待半分钟让 Xcode 开始复制崩溃日志。

# php - 在第二个浏览器中从一个浏览器中删除会话

> ID：13995868
> 
> 赞同：1
> 
> 时间：2012-12-21T19:13:29.410
> 
> 标签：php, session

例如在一个浏览器中（比如在 chrome 中）我们运行这段代码

```
session_start();
$_SESSION['login'] = "Jon"; 
```

是否可以使用其他浏览器（例如 firefox）删除此会话？也就是说，什么代码可以在 Firefox 中运行，用于删除 `$_SESSION['login']`，哪个值是`Jon`，哪个是在 chrome 中启动的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:14:47.277

不，这`$_SESSION`是浏览器独有的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:31:39.223

见[`Passing the Session ID`](http://us3.php.net/manual/en/session.idpassing.php)页面。只要第二个浏览器传递与第一个相同的 ID，您就可以有效地使用相同的会话。即，是的，您可以这样做，但是您需要想出一些方法让第二个浏览器获取由第一个浏览器创建的会话 ID。

编辑：要回答您在后续评论中提出的第二个问题，这取决于您使用的会话存储机制。如果您使用的是数据库表，那么您可能会将用户 ID 作为该表上的一个字段，从而`DELETE FROM session WHERE userid = 'Jon'`在禁用用户 ID 时也可以这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:20:51.357

唯一的方法是在服务器端。您必须找出与 Chrome 浏览器关联的 sess_* 文件（在 Ubuntu 12.04 上，这些文件位于 /var/lib/php5 中）并将其删除。

# c++ - QAudioOutput 代码是否存在内存泄漏？

> ID：13995869
> 
> 赞同：2
> 
> 时间：2012-12-21T19:13:30.580
> 
> 标签：c++, qt, qthread

我正在像这样在 QThread 中播放音频流：

```
// Setup
QAudioFormat format;
format.setFrequency(44100);
format.setChannels(2);
format.setSampleSize(16);
format.setCodec("audio/pcm");
format.setByteOrder(QAudioFormat::LittleEndian);
format.setSampleType(QAudioFormat::SignedInt);
QAudioDeviceInfo info(QAudioDeviceInfo::defaultOutputDevice());
format = info.nearestFormat(format);
this->m_AudioOutput = new QAudioOutput(format, this);
DECLARE_ALIGNED(16,uint8_t,audio_buffer)[(AVCODEC_MAX_AUDIO_FRAME_SIZE * 3) / 2];

// Playback
QIODevice *iodevice = this->m_AudioOutput->start();
for(;;) {
    // Routine that fetches audio data from network
    // data_size is length of the buffer
    fetch_packet(&audio_buffer, data_size);

    qint64 dataRemaining = data_size;
    const char *b2 = (const char *)audio_buffer;
    while (dataRemaining) {
    qint64 bytesWritten = iodevice->write((const char *)b2, dataRemaining);
        dataRemaining -= bytesWritten;
        b2 = b2 + bytesWritten ;
    }

    msleep(10);
} 
```

音频播放得很好，但应用程序的内存消耗似乎随着时间的推移而增加（大约每分钟 2MB）。我想知道我是否做错了什么。我想`QAudioOutput`应该负责`QIODevice`在读取并用于播放后删除 's 缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:43:28.063

我不这么认为，文档说：

开始播放音频流只需使用 QIODevice 调用 start()。 **QAudioOutput 然后将从 io 设备获取它需要的数据。**

它只是读取数据。QIODevice 应该管理缓冲区。可以肯定的是，您可以使用 QIODevice::size() 检查缓冲区的大小，看看它是否在增长。

# python - wxpython creataStatusBar 奇怪的行为

> ID：13995879
> 
> 赞同：1
> 
> 时间：2012-12-21T19:14:24.323
> 
> 标签：python, wxpython

我有一些行为奇怪的 wxpython 代码.. 这是 OKAY 代码：

```
class MainWindow(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title,size=(500, 300))
        self.CreateStatusBar() 
        panel = wx.Panel(self)

        self.srcSizer = wx.BoxSizer(wx.HORIZONTAL)
        srcButton = wx.Button(panel, wx.ID_ANY, "src")
        srcButton.Bind(wx.EVT_BUTTON, self.onSrcButton)
        self.srcSizer.Add(srcButton, 0)
        self.srcTxt = wx.TextCtrl(panel, wx.ID_ANY)
        self.srcSizer.Add(self.srcTxt, 1, flag=wx.EXPAND | wx.LEFT | wx.RIGHT, border=10)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.srcSizer, 0 , flag=wx.EXPAND | wx.LEFT | wx.RIGHT | wx.TOP, border=10)

        panel.SetSizer(self.sizer)
        self.Show(True) 
```

现在当我交换创建状态栏和面板的两行时，它们变成

```
panel = wx.Panel(self)
self.CreateStatusBar() 
```

然后在加载窗口时按钮和textctrl重叠，在手动调整窗口大小时将它们恢复到正常位置！

self.CreatStatusBar() 是否必须始终在创建面板或其他东西之前？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T18:24:27.637

`CreateStatusBar()`在框架上触发调整大小事件，为状态栏腾出空间。如果面板已创建，则调整其大小以适合框架的客户区域。调整面板大小会触发面板上的调整大小事件，然后如果适用，它将重新计算其布局（大小调整器）。

创建控件（要添加到面板的大小调整器）只需将它们放置在默认位置 (0,0) 及其默认大小。他们将需要布局（大小）更新才能移动到正确的位置。（这就是为什么出现问题时左上角有一堆控件的原因。）

当显示框架时，会触发一个 resize 事件（再次）。但是，如果面板已经适合框架的客户区域，则不会触发面板的调整大小事件，因此不会更新其布局。

即使没有状态栏，您也可以通过创建具有客户区大小的面板来观察这种效果：

```
panel = wx.Panel(self,size=self.GetClientSize())
#self.CreateStatusBar() 
```

同样，您可以通过将面板的大小设置为其他值来触发更新（一旦显示框架，它将再次调整面板的大小）：

```
# at the end of __init__
panel.SetSize(0,0) 
```

但是，这会造成不必要的调整大小：首先是当您手动`SetSize()`然后再次在`frame.Show()`. 有一种更好的方法（如下所示）。

在`wx 2.8`中，这个问题也适用`CreateToolBar()`。`wx 2.9.4`似乎可以正确处理工具栏。

* * *

作为一种解决方法，您可以：

*   在创建面板*之前***或** *在*设置面板的 sizer 之后创建工具栏/状态栏（需要先将控件添加到 sizer）
*   设置 sizer 后重新计算面板的布局：

    ```
    panel.SetSizer(sizer)
    panel.Layout() 
    ```

# python - Flask 和 CSS 的问题

> ID：13995880
> 
> 赞同：0
> 
> 时间：2012-12-21T19:14:34.900
> 
> 标签：python, css, flask

我的项目结构如下：

```
templates
    index.html
static
    style.css
testFlask.py 
```

我尝试添加`style.css`（使用`url_for`，或手动），但 url`localhost:5000/static/style.css`说`Page not found`

这里来自 testFlask.py 的代码：

```
from flask import Flask, render_template, request, session, g, redirect, url_for,flash
app = Flask(__name__)

@app.route('/', methods=['GET'])
def index():
    return render_template('index.html') 
```

index.html 中的代码：

```
<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head> 
```

最后，我重新创建了 style.css，现在一切都很好。感谢关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:35:58.053

我在这里使用flask 0.8（Debian软件包的版本）测试了您的代码/模板片段，但我无法重现该问题->找到了style.css。也许静态目录的权限是限制性的？如果我删除运行 testFlask.py 的用户对静态目录的读取访问权限，则会出现 404。

最好的祝愿，马蒂亚斯

# java - 如何预测递归方法的最大调用深度？

> ID：13995885
> 
> 赞同：49
> 
> 时间：2012-12-21T19:15:03.453
> 
> 标签：java, memory, recursion, jvm, stack-overflow

为了估计递归方法在给定内存量下可以实现的最大调用深度，计算在可能发生堆栈溢出错误之前使用的内存的（近似）公式是什么？

### 编辑：

许多人用“它取决于”来回应，这是合理的，所以让我们通过一个微不足道但具体的例子来删除一些变量：

```
public static int sumOneToN(int n) {
    return n < 2 ? 1 : n + sumOneToN(n - 1);
} 
```

很容易证明，在我的 Eclipse IDE 中运行它会爆炸`n`不到 1000（对我来说太低了）。是否可以在不执行的情况下估计此调用深度限制？

编辑：我不禁想到 Eclipse 有一个固定的最大调用深度 1000，因为我得到了`998`，但是有一个用于主要的，一个用于对方法的初始调用，`1000`总而言之。这是一个“太圆”的数字恕我直言，不是巧合。我会进一步调查。我刚刚 Dux 开销了 -Xss vm 参数；这是最大堆栈大小，所以 Eclipse 运行器必须`-Xss1000`设置在某个地方

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-21T19:24:12.270

这显然是 JVM 特定的，也可能是特定于体系结构的。

我测量了以下内容：

```
 static int i = 0;
  public static void rec0() {
      i++;
      rec0();
  }

  public static void main(String[] args) {
      ...
      try {
          i = 0; rec0();
      } catch (StackOverflowError e) {
          System.out.println(i);
      }
      ...
  } 
```

使用

```
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode) 
```

在 x86 上运行。

使用 20MB 的 Java 堆栈 ( `-Xss20m`)，每次调用的摊销成本在 16-17 字节左右波动。我见过的最低的是 16.15 字节/帧。因此，我得出结论，成本为 16 个字节，其余为其他（固定）开销。

一个函数`int`的开销基本相同，16 字节/帧。

有趣的是，一个需要 10 个字节的函数`ints`需要 32 个字节/帧。我不知道为什么成本这么低。

以上结果适用于代码经过 JIT 编译后。在编译之前，每帧的成本*要*高得多。我还没有找到可靠估计它的方法。**但是，这确实意味着您没有希望可靠地预测最大递归深度，直到您能够可靠地预测递归函数是否已被 JIT 编译。**

所有这些都使用`ulimit`128K 和 8MB 的堆栈大小进行了测试。两种情况下的结果都是一样的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-21T19:20:37.043

只是部分答案：从[JVM Spec 7, 2.5.2](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.2)开始，可以在堆上分配堆栈帧，并且堆栈大小可能是动态的。我不能肯定地说，但似乎应该可以让您的堆栈大小仅受您的堆大小限制：

> 因为除了推送和弹出帧外，Java 虚拟机堆栈永远不会被直接操作，因此帧可能是堆分配的。

和

> 该规范允许 Java 虚拟机堆栈具有固定大小或根据计算需要动态扩展和收缩。如果 Java 虚拟机堆栈具有固定大小，则可以在创建堆栈时独立选择每个 Java 虚拟机堆栈的大小。
> 
> Java 虚拟机实现可以为程序员或用户提供对 Java 虚拟机堆栈的初始大小的控制，以及在动态扩展或收缩 Java 虚拟机堆栈的情况下，对最大和最小大小的控制。

所以这将取决于JVM的实现。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T20:14:38.297

添加到 NPE 答案：

最大堆栈深度似乎是*灵活*的。以下测试程序打印出**截然不同**的数字：

```
public class StackDepthTest {
    static int i = 0;

    public static void main(String[] args) throws Throwable {
        for(int i=0; i<10; ++i){
            testInstance();
        }
    }

    public static void testInstance() {
        StackDepthTest sdt = new StackDepthTest();
        try {
            i=0;
            sdt.instanceCall();
        } catch(StackOverflowError e){}
        System.out.println(i);
    }

    public void instanceCall(){
        ++i;
        instanceCall();
    }
} 
```

输出是：

```
10825
10825
59538
59538
59538
59538
59538
59538
59538
59538 
```

我使用了这个 JRE 的默认值：

```
java version "1.7.0_09"
OpenJDK Runtime Environment (IcedTea7 2.3.3) (7u9-2.3.3-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode) 
```

所以结论是：如果你的脓够了（即超过两次），你就有第二次机会；-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T19:21:10.030

答案是，这一切都取决于。

首先，Java Stack 的大小是可以改变的。

其次，给定方法的堆栈帧大小可以根据不同的变量而变化。您可以查看调用堆栈的调用堆栈帧大小部分[- 维基百科](http://en.wikipedia.org/wiki/Call_stack#Stack_frame_sizes)了解更多详细信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-21T19:21:35.870

取决于您的系统架构（32 位或 64 位地址）、局部变量的数量和方法的参数。如果是 [尾递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)则没有开销，如果编译器将其优化为循环。

你看，没有简单的答案。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-21T19:29:10.140

您可以走经验主义道路并试验您的代码和`-Xss`设置。有关更多信息，请参见此处：[JVM 选项 -Xss - 它究竟做了什么？](https://stackoverflow.com/questions/4967885/jvm-option-xss-what-does-it-do-exactly)

# php - 从开始（计划）到结束（测试和生产）的良好、组织良好的 Web 开发工作流程是什么？

> ID：13995892
> 
> 赞同：10
> 
> 时间：2012-12-21T19:15:32.220
> 
> 标签：php, model-view-controller, workflow

多年来，我一直是 PHP/MySQL 开发人员，但不幸的是，到目前为止，我只从事过小型项目。我现在正在创建一个非常复杂的新网站，并且我开始对工作流程感到困惑。我不确定首先要处理哪些部分，因为它们都相互交织在一起。

我很想知道你们中的一些人如何管理新网站的工作流程。我是独立工作的，所以在没有多个开发人员参与的情况下解释起来会更容易。此外，我将使用 CodeIgniter 框架，因此最好让工作流包含 MVC 模型，这实际上应该使工作流更容易。

经过一番搜索，我发现了这个有用的图表：![工作流程图](../Images/d3b49947f747a2d8ae0f20c755978478.png)

但是，我不太确定每个类别都有哪些内容。这是我到目前为止所了解的总体概要。当我错了或有更好的选择时，请随时纠正我。

## 规划

确保你有明确的项目目标：你提供什么，为谁提供？对其他人有什么帮助？ETC

## 网站地图

列出将出现在网站上的所有页面和子页面。

## 线框

浏览您的整个站点地图，并为每个页面绘制一个粗略的草图。（你应该得到多详细的信息？）你可以使用铅笔和纸，或者像 Axure 或 Mockingbird 这样的程序。

工作流程图中的下一个主要类别是内容，但我不确定这涉及到什么。是网站上的所有文字吗？数据库结构？还有什么？

## 艺术品

网站的实际设计/模板。不过，这真的是合适的地方吗？我认为编码和功能更重要，然后再进行设计。

## 编码

这一步似乎包罗万象，我认为它需要分解。数据库结构是先制作的（还是在内容中完成，在线框之后？）我是否为站点地图中每个页面的所有功能制作大纲？我是否只是创建所有必要的控制器并评论我将要放置哪些功能以及在哪里？模型是否遵循控制器的轮廓，反之亦然？我什么时候开始填写所有的控制器和模型？

涉及持续测试以确保您的代码正常工作。

## 内容人群

这会包括 MVC 框架中的视图文件吗？换句话说，控制器和模型提供的所有数据？

## 最终测试

确保在所有浏览器中一切正常。在这里和那里进行调整和更改。全力以赴应对无数“假设”案例。

## 生产

网站上线。

## 结论

以上是我理解的开发复杂网站的步骤的有组织的流程图，但我的理解可以大大提高。应该改变什么？我可以使用所有可能的建议。谢谢你。

**编辑：**这里有人提到了“敏捷开发”——从我目前所读的内容来看，它实际上并没有结构。如我错了请纠正我。正如我对那个答案的评论，真的有可能以这种方式为复杂的网站开发，比如亚马逊或 Ebay？工作流程，在我不知情的情况下，应该有一个明确的计划，否则项目将没有重点。

**最终编辑：**虽然这个问题已经结束，但我想为以后可能会发现这个问题的人添加一些信息。我发现以下工作流程很有用：[http](http://www.webassist.com/free-downloads/tutorials-and-training/web-dev-workflow.php) ://www.webassist.com/free-downloads/tutorials-and-training/web-dev-workflow.php 。一般工作流程的 PDF：http: [//assets.webassist.com/how-tos/Short-Dev-Checklist.pdf](http://assets.webassist.com/how-tos/Short-Dev-Checklist.pdf)。当然也可以使用敏捷开发，但对于那些不知道从哪里开始的人来说，这可能是一个很好的起点。当我找到它们时，我可能会在此处添加其他工作流程和示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:28:27.303

研发界正在朝着敏捷开发的方向发展，在这种情况下，您不会做太多的计划并从头到尾写下所有内容，而是进行小迭代并进行小改动，以便您始终拥有一个明确的目标，并且您可以随着对需求的理解提高而调整方向（真实的，基于用户反馈，而不是根据您认为客户想要/使用的估计猜测工作）

我建议你研究敏捷开发和精益创业方法，它改变了我构建在线服务的方式，并且会让你更有效率和生产力。

我可以告诉你，我的在线服务在我开始编码后大约 2 天就上线了。这并不意味着您从一开始就向真实用户开放它，但您可以立即从现实世界中获得反馈，而不是在您“准备好上线”之前将其全部保存在您的开发机器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:59:02.510

TheZuck 的回答很好而且很有帮助，所以我将添加一些我自己的经验，这并不一定意味着你会经历同样的事情，如果你对生意有半点心思（这是我所缺乏的。：S）。

内容一直是​​我的客户的问题，所以我会说让他们尽早开始工作！如果您正在与撰稿人合作，我想那不是问题。但是，如果没有及时将内容交付给您，应该会受到某种惩罚。

还值得注意的是，您的客户只有在开始考虑内容后才会真正开始考虑他们的网站。当他们开始工作时，期望听到他们想要一些改变。

如果您的客户是小型企业，那么他们往往不了解实际需要时间的是什么。尽管敏捷开发非常好，但我相信这对于小型企业来说很难实施，因为他们没有太多的钱可以使用，并且可能希望成品的价格固定。如果它被修复了，如果他们用完所有的时间或他们付出的任何代价而没有给他们一个成品（工作交付物，与成品不同！），他们就会生气。

客户往往是 IT 文盲，有时甚至是极端的。指望你必须投入一些或相当多的时间来向他们解释“显而易见”的事情。

不要高估自己和自己的能力，因为这可能意味着您收取的费用低于实际合理的费用。一个优质的网站应该花钱，但我会理解，如果你收费很少，你知道只是为了获得几个客户。

我意识到这并不是您问题的真正答案，但我希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:49:29.233

敏捷开发对于网站来说绝对是一个好主意（因为通常情况下，编码既相对简单又独立）。关于敏捷的要点是它允许更改，并且还允许针对“执行功能 B 花费的时间比预期的要长，因此 C 和 D 将在另一个迭代中交付”进行调整。正如您可能知道的那样，规划更大的项目可能需要付出很多努力，而且几乎总是比您预期的要长。使用敏捷，您将每一点都作为“垂直切片”进行 - 这意味着所做的任何事情都应该为产品贡献一些有用的东西，从在首页[或它所属的任何地方]添加一个 ling 到添加处理它的代码以及用于存储/检索相关数据的数据库模型。

我很确定您仍然需要为具有大量页面和大量数据库表等的大型站点做一些规划。但是只要您在一般网站/数据库设计方面有合理的基础，敏捷方法将让您设计“行走的骨架”（在基本概念中起作用的东西，但需要更多的骨头上的肉才能成为工作产品）。然后你用更多的功能充实草图，每个功能本身都是“完整的”，并添加了客户需要的东西。这样，您总是可以在每个工作项完成后交付给客户的东西。

我也相信亚马逊或 Ebay 有超过 20-30 张桌子。我在一个名为 www.planetcatfish.com 的网站上工作，它比 Amazon 或 Ebay 更小更简单，它有 25 个表（除了论坛的 phpbb 表，它也用于特定于站点的用户功能）。那是多年编写的，在 php 代码中主要使用 php、一点 javascript 和相当多的 mysql。

# javascript - 显示 HTML 而不是 JavaScript 的调试器

> ID：13995893
> 
> 赞同：0
> 
> 时间：2012-12-21T19:15:58.153
> 
> 标签：javascript, html, owncloud

我正在传递一个用于 ownCloud 的 Impressionist App 预览器的 html 模板，我正在 js/templ.js 中工作，显然 impress.js 将通过它在模板中被调用。src 是正确的，但是我的 chrome 调试器也将 html 显示为我的 impress.js 文件中的内容，并且由于调用了 html，控制台也给出了 javascript 语法错误。为什么会这样？有什么线索吗？我的应用程序的源代码可以在[这里](https://github.com/owncloud/apps/tree/master/impressionist)找到。另外，我在[这里附上了我在调试器中看到的图像](http://i.stack.imgur.com/2Nkhv.png)

# sql - 设置要在多个 SQL 选择查询中使用的条件

> ID：13995899
> 
> 赞同：2
> 
> 时间：2012-12-21T19:16:31.377
> 
> 标签：sql, sql-server, where-clause, select-query

需要设置运行多个查询的条件，但只想更改一次。例如，要设置年份、期间、文档，以便...

```
select * from tbl1 where tbl1.yr = year and ...
select * from tbl2 where tbl2.yr = year, and ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:17:59.707

创建视图：

```
CREATE VIEW yourview AS
SELECT * from tbl1
UNION ALL
SELECT * from tbl2 
```

然后查询它：

```
 SELECT * FROM yourview
 WHERE tbl1.yr = year AND ... 
```

您可能还想知道每行来自哪个表。这可以通过在视图中添加一个额外的列来实现：

```
CREATE VIEW yourview AS
SELECT 'tbl1' AS src, * from tbl1
UNION ALL
SELECT 'tbl2' AS src, * from tbl2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:23:36.640

与`CTE`; 注意：你应该有*`same number of columns and matching datatypes from both tables`*，因为你正在做一个盲人*`union of select *`*

```
;with cte (myYear)
as (
   select @year as myYear
)
select * from table1 t1 where t1.year  in (select myYear from cte)
union all
select * from table2 t2 where t2.year  in (select myYear from cte) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:25:56.580

如果它们是真正不同的查询，不相关，您可能不得不求助于动态 SQL，例如

```
DECLARE @sCondition VARCHAR(50)

SET @sCondition = 'yr = 2012'

DECLARE @sQuery1 VARCHAR(1000)

SET @sQuery1 = 'select * from tbl1 where ' + @sCondition

-- DECLARE other queries in similar faction OR combine multiple queries into single variable

EXEC (@sQuery1) 
```

# raphael - raphaeljs 中的集合不是真正的组？变换顺序

> ID：13995900
> 
> 赞同：2
> 
> 时间：2012-12-21T19:16:37.063
> 
> 标签：raphael

我对集合以及如何应用转换有疑问。我来自图形背景，所以我熟悉场景图以及正常的 SVG 组语法，但 Raphael 让我感到困惑。假设我有一个圆圈和一组，我想在其上应用变换。

```
circle = paper.circle(0,0.5)
set = paper.set() 
```

如果我先添加圆圈，然后进行变换，它就可以了。

```
set.push circle
set.transform("s100,100") 
```

做一个50半径的圆。但是，如果我颠倒顺序，

```
set.transform("s100,100")
set.push circle 
```

不应用转换。

这似乎会破坏许多渲染和动画类型算法，您的组/变换保持您的关节状态，并且您向它们添加或删除对象，而不是每次都重新创建整个变换。文档中是否有一个选项我没有看到可以解决这个问题，或者为了简单而放弃了这个功能？缺少它似乎很奇怪，因为它在 SVG 本身的组层次结构中直接且容易地得到支持......我是否需要*手动*将集合中的转换应用于转换集合后添加的任何子项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T12:31:37.483

Raphael 中的集合只是简单的数组。

当你在片场执行一些动作时，Raphael 通过`for(...){}`循环遍历所有成员。

Raphael 不支持 SVG 组`<g></g>`

**更新**拉斐尔的代码：

```
// Set
var Set = function (items) {
    this.items = [];
    this.length = 0;
    this.type = "set";
    if (items) {
        for (var i = 0, ii = items.length; i < ii; i++) {
            if (items[i] && (items[i].constructor == elproto.constructor || items[i].constructor == Set)) {
                this[this.items.length] = this.items[this.items.length] = items[i];
                this.length++;
            }
        }
    }
}, 
```

如您所见，所有项目都存储在`this.items`数组中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T13:49:14.877

Raphaël 的`set`目的只是为了提供一种将形状组作为统一的对象集进行管理的便捷方式，方法是聚合`element`相关动作并将它们（通过代理集合级别中的相应方法）依次委托给每个形状。

> 鉴于它在 SVG 本身的组层次结构中直接且容易地支持，因此丢失似乎很奇怪......

好吧，Raphaël 并不是试图将 SVG 规范提升为基于 JavaScript 的 API，而是为矢量图形操作提供抽象，而不考虑底层实现（无论是现代浏览器中的 SVG，还是 IE<9 中的 VML）。因此，`set`s 绝不是 SVG 组的表示。

> 我是否需要*手动*将集合中的转换应用于转换集合后添加的任何子项？

绝对不是，您只需要确保在应用转换之前将任何形状添加到集合中。

# android - 在 Android 上的半透明形状上绘制顶部边框

> ID：13995903
> 
> 赞同：1
> 
> 时间：2012-12-21T19:16:48.273
> 
> 标签：android, background, border, line, transparent

我想将布局的背景设置为带有顶部边框（不透明）的半透明颜色。我试图实现这一目标。目前我的可绘制文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
            <solid android:color="#FF0000FF" />
        </shape>
    </item>
    <item android:top="5dp">
        <shape>
            <solid android:color="#7F000000" />
        </shape>
    </item>
</layer-list> 
```

但是在这个 xml 中，半透明的形状在不透明的形状上，所以结果它根本不是半透明的。你能帮我得到我想要的背景吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T13:23:46.197

在网上搜索并尝试找到正确的解决方案后，我终于从聊天中的人那里得到了答案。`layout`解决方案是在第一个之上再创建一个，例如给它一个高度`10dp`和宽度`match_parent`。

* * *

*这是工作示例：*

**activity_main.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/MainLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/main_bg"
    android:orientation="vertical"
    android:padding="5dp"
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/Box"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/background"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/Border"
            android:layout_width="match_parent"
            android:layout_height="10dp"
            android:layout_weight="0.64"
            android:background="@drawable/border"
            android:orientation="vertical"
            tools:ignore="InefficientWeight" >

        </LinearLayout>

        <TextView
            android:id="@+id/Content"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.64"
            android:padding="5dp"
            android:text="@string/example"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/white" />
    </LinearLayout>

</LinearLayout> 
```

**main_bg.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:top="5dp">
        <shape>
            <solid android:color="#FF990000" />
        </shape>
    </item>
</layer-list> 
```

**背景.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:top="5dp">
        <shape>
            <solid android:color="#55000000" />
        </shape>
    </item>
</layer-list> 
```

**边框.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:top="5dp">
        <shape>
            <solid android:color="#FFFF0000" />
        </shape>
    </item>
</layer-list> 
```

**字符串.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">Transparent Views</string>
    <string name="action_settings">Settings</string>
    <string name="hello_world">Hello world!</string>
    <string name="example">Content &#8230;</string>
    <color name="white">#FFFFFFFF</color>

</resources> 
```

* * *

希望它对其他人也有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T10:13:19.693

这是一个简单的解决方案。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:left="-5dp" android:bottom="-5dp" android:right="-5dp">
        <shape android:shape="rectangle">
            <stroke android:width="5dp" android:color="@color/borderColor" />
            <solid android:color="@color/backgroundColor" />
        </shape>
    </item>

</layer-list> 
```

# php - phpDocumentor 制表符分隔符

> ID：13995905
> 
> 赞同：3
> 
> 时间：2012-12-21T19:17:13.007
> 
> 标签：php, phpdoc

很简单的一个：可以在 phpDocumentor 标签中使用标签吗？喜欢：

```
 /**
 * @param string @some_var        Description
 */ 
```

*   @some_var 和 Description 之间有一个标签

没有发现任何针对标签的内容（列表声明除外），但我只是想确定一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:46:36.677

使用选项卡似乎有一次出现问题，但它已在近一年前得到[修复。](https://github.com/phpDocumentor/phpDocumentor2/issues/380)所以是的，您可以安全地使用制表符，因为用于匹配它们的正则表达式将说明它们。

# makefile - 在makefile中获取不带扩展名的文件名

> ID：13995906
> 
> 赞同：19
> 
> 时间：2012-12-21T19:17:16.103
> 
> 标签：makefile

我的**生成文件**如下所示：

```
SRCS    = $(wildcard *.asm)
OBJS    = ${SRCS:.asm=.o}

# define a suffix rule for .asm -> .o
.asm.o : $(SRCS)
    nasm -f elf $<

all: $(OBJS)
    gcc -o ?? $<
           ^need the name of the target without file extension here ($* is blank) 
```

但是，`$*`正在工作`.asm.o`但在 内为空白`all`。我将如何将 gcc 输出文件名设置为没有*任何*扩展名**的目标文件的文件名？**

 *例如，我希望它执行以下（在*.o*文件由nasm生成之后）

```
gcc filename filename.o 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T19:26:42.360

我想你正在寻找

```
.PHONY: all
all: $(patsubst %.o,%,$(OBJS))
%: %.o
    gcc -o $@ $< 
```

您的尝试将定义一个`all`依赖于所有目标文件的目标，就好像它包含所有目标文件一样；我想你真的希望每个目标文件都是独立的，并且`all`目标依赖于它们都被制作出来。

（从技术上讲，您现在可以使用`$*`它，因为它与`$@`在这种情况下相同，但这只是晦涩难懂。）

这基本上与您现有的`nasm`规则同构，除非没有后缀，否则您不能使用后缀语法。换句话说，您的规则相当于

```
OBJS = $(patsubst %.asm,%.o,$(SRCS))
%.o: %.asm
    nasm -f elf $< 
```

唯一剩下的区别是`.PHONY`仅记录`all`不是文件名的声明。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-06T01:09:59.300

```
Use VAR = $(basename your_file.ext) <=> $(VAR) = your_file 
```

Let's say that you want to remove `.o` from `test.o`

```
VAR = $(basename test.o) 
```

resulting in `$VAR` containing "test"

[See More Functions Here](https://www.gnu.org/software/make/manual/html_node/File-Name-Functions.html)*

# list - 每月自动检查清单

> ID：13995912
> 
> 赞同：-1
> 
> 时间：2012-12-21T19:17:57.877
> 
> 标签：list, sharepoint

我有一个日期列表。如果日期是 3 个月大，我需要向用户发送电子邮件提醒。此列表需要每天自动检查。

这在 SharePoint 2010 中是否可以开箱即用？还是我在寻找一个开箱即用的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:06:42.697

OOTB SharePoint 2010 绝对可以做到这一点。您可以使用 SharePoint Designer 来完成此操作。创建在创建项目时触发的工作流。让它执行以下操作：

1.  将*3 个月*添加到*我的日期*（输出到*变量：我的到期日期*）-“添加时间到日期”操作
2.  暂停到*我的到期日期*- “暂停到日期”操作
3.  向*MyUsers*发送电子邮件 - “发送电子邮件”操作

如果更新*My Date* ，这将被破坏，因为它将使用无效版本的*Expiration Date*。如果您想处理对“*我的日期”*字段的更新，它会变得更加棘手。这需要在工作流启动时缓存*My Date*的值，然后并行运行以下命令：

1.  上面示例中的暂停和发送操作
2.  等待“*我的日期*”更改并在工作流更新时终止工作流的操作。

基本上，这样做是为了终止使用旧版本的*My Date*的任何以前的工作流程，以便只有最新的工作流程会发送电子邮件。

# nhibernate - 为什么 nhibernate 会在架构中添加两个 userId？

> ID：13995921
> 
> 赞同：1
> 
> 时间：2012-12-21T19:18:28.503
> 
> 标签：nhibernate, foreign-keys, schema

这并不完全准确。我有一个用户表，一些/大多数用户是培训师。有一个 UserRole 指定用户是培训师还是管理员，这是唯一的区别。也许不是最干净的结构，但管理员通常也是培训师，而且效果很好。

所以我会有一个像 TrainerPayment 这样的表。它有一些支付信息和一个与之相关的培训师，当然是一个用户。所以

```
public int User Trainer {get;set;} 
```

所以当我使用 NH 创建架构时，我得到

```
PaymentName   varchar(250)
PaymentAmount double
TrainerId     int FK
UserId        int FK 
```

然后 NH 将这两个 FK 用于不同的查询。因此，例如，如果我执行 load(trainerId)，它会生成查找 userid=2 的 sql。在其他地方它会进行查询并使用 trainerId。抱歉，我忘记了发生在哪里，但我尝试删除 TrainerId，但出现错误。如果你觉得有帮助，我可以查一下。

如果不清楚我的问题是为什么我需要这两个 FK ？看来我应该只需要一个。

谢谢， 雷夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:24:45.747

我猜您在映射到 TrainerPayment 的用户上有一对多？您需要告诉一对多，TrainerPayment 表上的 FK 称为 TrainerId，而不是像一对多那样默认的 UserId。

# translation - 添加俄语（西里尔文）文本时，ABCPdf .EmbedFont 不起作用

> ID：13995923
> 
> 赞同：1
> 
> 时间：2012-12-21T19:18:41.643
> 
> 标签：translation, abcpdf

我们使用 ABCpdf 软件，最近为我们的一些文档添加了俄语翻译选项。PDF 的大部分内容来自使用 AddImageURL 方法的网页。这一切都很好，这意味着俄语文本是可读的。

但是，我们有一些文本部分需要准确地放在页面底部，所以我们使用 ABCpdf 的 AddText 方法来完成。这些字符串显示为?????????? 在生成的 PDF 中。

这是一个快速的代码示例：

```
Doc pdfDoc = new Doc();
//snip snip snip...

//add footer text
pdfDoc.Rect.SetRect(30, 30, 552, 10);  //footer section
pdfDoc.HPos = 0; //set horizontal position to left
pdfDoc.AddText(GetRussianString("REFERENCE") + " #" + ReferenceID); 
```

在阅读了 Websupergoo 网站上的文档后，我尝试使用 AddFont 和 EmbedFont（单独和一起），但这不起作用：

```
pdfDoc.Font = pdfDoc.EmbedFont("Times-Roman", LanguageType.Unicode); 
```

我还搜索了在文档级别设置编码的方法，但没有找到任何关于此的文档，至少不是版本 8。我们目前使用的是 8.11.2 的 ABCpdf 软件。

有没有人成功地做过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:36:30.080

好的，（完全令人尴尬的）答案是我对 WebSuperGoo 网站上的示例过于直白。我需要使用我的开发/生产机器上的确切字体名称。

```
pdfDoc.Font = pdfDoc.EmbedFont("Times New Roman", LanguageType.Unicode); 
```

明显的？是的。但这是匆忙时可以忽略的事情之一，所以我会在这里发布答案，以防其他人被绊倒。

我的部分困惑源于这样一个事实，即从 URL 添加的俄语文本在文档中很好，但不是作为文本添加的内容。我猜 abcPDF 根据它从网页获取的编码设置字体，但这只会影响它正在提取的内容，而不是整个 PDF。

无论如何，感谢 gekannt 和其他任何看过的人。

# ruby-on-rails - 在视图中使用 ERB 将类添加到正文 - Rails

> ID：13995927
> 
> 赞同：11
> 
> 时间：2012-12-21T19:19:22.910
> 
> 标签：ruby-on-rails, ruby, erb

我看过[这个截屏视频](http://railscasts.com/episodes/30-pretty-page-title)，在视图中添加页面标题，有没有办法我可以做同样的事情，但在 body 标签中添加一个类？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-21T19:29:04.423

不知道你的意思，你可以这样做：

在一个视图中：

```
<% content_for :body_class, "my_class" %> 
```

在布局文件中：

```
<body class="<%= yield (:body_class) %>"> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-11T16:28:16.443

我通常为这样的东西制作一个辅助方法，这样你就可以干净地设置默认值

```
application_helper.rb
  def body_class(class_name="default_class")
    content_for :body_class, class_name
  end

view:
  <% body_class "foo" %>

application.html.erb
  <body class="<%= yield (:body_class) %>"> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-31T12:36:01.107

有时我们会使用当前控制器名称作为类名：

```
<body class="<%= controller.controller_name %>"> 
```

我发现这更简单，更优雅，但当然你将无法分配单独的类名。

s。[在视图中使用 ERB 将类添加到正文 - Rails](https://stackoverflow.com/questions/13995927/add-class-to-body-using-erb-in-a-view-rails)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-01T09:40:38.683

在布局页面中：

```
<% if content_for?(:body_class) %>
  <body class="<%= content_for(:body_class) %>" >
<% else %>
 <body>
<% end %> 
```

在内容页面中：

```
<% content_for :body_class do  'my-body-class' end %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-17T11:13:35.937

我在我的应用程序中使用了接受的方法有一段时间了，但从来没有真正喜欢它的工作方式，因为如果没有类，你的身体标签上就会有那个 class=''，乱扔你的代码。对于我当前的用例，我只想要一个宽屏类（但您可以根据您的用例轻松获得更高级的不同类）。我对这种方法很满意：

在您的应用程序助手中：

```
def body_tag(&block)
  content = capture(&block)
  content_tag(:body, content, class: @widescreen ? "widescreen" : nil)
end 
```

在 application.html.erb

```
<%= body_tag do %>
  <%# the rest of your content here %>
<% end %> 
```

然后在您的应用程序控制器中：

```
private
  def enable_widescreen
    @widescreen = true
  end 
```

然后在您想要的任何控制器中，只需执行以下操作：

```
before_action :enable_widescreen 
```

然后，如果您想将它用于“宽屏”以外的不同类，请随意使类逻辑更高级 - 但关键是这是一种优雅的方式，如果您不指定一个类，则允许没有类， 没有

```
<body class> 
```

显示在您的 html 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-02T01:03:54.987

我更喜欢使用以下方法：

`<body class="<%= content_for?(:body_class) ? yield(:body_class) : controller_name %>">`

That method avoids the dreaded `<body class>`.

I frequently use the controller name to scope a number of styles so it's nice to not need to supply a content_for on every view if I only needed that one class.

# php - 自定义验证逻辑是否属于 Doctrine 模型（CodeIgniter 上下文）？

> ID：13995929
> 
> 赞同：2
> 
> 时间：2012-12-21T19:19:29.397
> 
> 标签：php, codeigniter, validation, doctrine, models

我是 Doctrine 的忠实拥护者，但过去主要将其用于访问我的数据库的更简单和更 OO 的方式。尽管最近我发现自己想对模型做更多的事情，以使我的代码更具语义或逻辑性，并且易于使用。

例如，让我们使用堆栈溢出问题和相应的答案。一个问题可以包含一个或多个答案。在过去，我可能会做这样的事情（下面的所有内容都是 sudo 代码 btw）：

```
/*
*   METHOD ONE: Note that this is IMO not that semantic or OO
*/
Class QuestionController{       

    //.......

    public function addAnswer($whichQuestionId, $answerTitle, $answerCopy, $answerAuthorId)
    {                       
        //Look, I'm validating stuff here in my controller action           
        if(!strlen($answerTitle) || !strlen($answerCopy) || !strlen($answerAuthorId))
            throw new \Exception('Invalid answer stuff!!');

        //Notice here I'm actually doing some DB quering with 
        $author = $entityManager->find('\StackOverflow\User', $answerAuthorId);
        if($author->getIsBanned())
            throw new \Exception('This is user can not post answer, they are banned!');         

        //OK, things are valid, now we're going to load then question and create a new answer           
        $question = $entityManager->find('\StackOverflow\Question', $whichQuestionId)       

        $answer = new \StackOverflow\Answer;
        $answer->setAuthor($author);
        $answer->setTitle($answerTitle);
        $answer->setContent($answerCopy);

        $question->addAnswer($answer);

        //Let's pretend we persisted everything correctly...
        //Done!

    }

    //.......       
}

Class \StackOverflow\Answer{
    //Normal auto generated stuff here
}

Class \StackOverflow\Qusetion{
    //Normal auto generated stuff here
} 
```

好的，所以请注意，我在控制器操作中进行了所有验证，效果很好，但是如果我想在不同的控制器中添加一个问题的答案，那么这并不是很枯燥。我可以将此验证逻辑放在某种“助手”中，但这似乎也不是特别面向对象。

我宁愿做这样的事情（虽然不完全好，但希望你明白）

```
/*
 *  METHOD TWO: Hopefully a bit more OO...
 */ 

Class QuestionController{   

    public function addAnswer($whichQuestionId, $answerTitle, $answerCopy, $answerAuthorId)
    {
        $result = new \stdObject();

        try{

            $question = $entityManager->find('\StackOverflow\Question', $whichQuestionId);
            $answer = new \StackOverflow\Answer;
            $answer->setAuthor($author);
            $answer->setTitle($answerTitle);
            $answer->setContent($answerCopy);

            //THIS IS NEW!
            $answer->validate();

            //note that perhaps to take this a step futher, in the \StackOverflow\Question class 
            //I might actually call the validate function, so it's a bit more transaparent
            $question->addAnswer($answer);

            //Let's pretend we persisted everything correctly...
            //Done!

            $result->success = true;
            $result->message = 'New answer added!';

        }
        catch(Exception $e)
        {
            $result->success = false;
            $result->message = $e->getMessage();
        }

        return json_encode($result);

    }

}

Class \StackOverflow\Answer{

    //ALL NORMAL AUTO GENERATED GETTERS/SETTERS/ETC HERE

    //CUSTOM FUNCTION - perhaps called by one of the LifeCycle callback things that Doctrine has?
    public function validate()
    {
        //Look, I'm validating stuff here in my controller action           
        if(!strlen($this->getTitle()) || !strlen($this->getContent()) || !strlen($this->getAuthor()))
            throw new \Exception('Invalid answer stuff!!');

        //Notice here I'm actually doing some DB quering INSIDE of another model
        $author = $entityManager->find('\StackOverflow\User', $answerAuthorId);
        if($author->getIsBanned())
            throw new \Exception('This is user can not post answer, they are banned!');         

    }

}

Class \StackOverflow\Question{
    //Normal auto generated stuff here
} 
```

所以我想这可能会好一点，这是用 Doctrine 做事的正确方法吗？是否可以在现有模型中调用其他模型，或者以其他方式使用 Doctrine Entity Manager？有更清洁的方法吗？

这个具体的例子非常简单，但在现实生活中我有一个类似的关系，但“答案”有更复杂和丑陋的验证，需要查找其他表，获取有关“问题”的信息以进行验证等。它还可能会更新我们示例中的“用户”，例如向问题添加新答案可能会更新用户的“问题回答”值。我宁愿这透明地发生，而不必知道它真的发生了。我想简单地添加一个问题的答案，所有验证和级联更改都会在幕后自动发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:41:18.693

对此没有正确或错误的答案。与控制器相比，您的模型的重量最终取决于您的选择。

我的建议是选择一种方法来做到这一点，并保持一致。

我会注意，验证应该与您正在使用的对象相关。在答案验证中检查用户是否被禁止可能不是最好的方法。相反，您应该检查与答案相关的数据是否有效。

# django - 如何保护 gmail 的应用程序特定密码

> ID：13995932
> 
> 赞同：4
> 
> 时间：2012-12-21T19:20:04.237
> 
> 标签：django, security, gmail

在接下来的几周内，我们将从交易所切换到谷歌托管的邮件，我正在尝试弄清楚如何设置电子邮件，以便我们可以从 django 应用程序内部发送

```
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST='smtp.gmail.com'
EMAIL_HOST_USER='someone@example.com'
EMAIL_HOST_PASSWORD='16characters'
EMAIL_USE_TLS=True
EMAIL_PORT=587 
```

所以这些是我的电子邮件设置，困扰我的部分是 16 个字符的应用程序专用密码很快就会提交到我们的 git 存储库。

如果我尝试在 Web 前端使用此密码，它会告诉我不要使用特定于应用程序的密码，而是使用我的帐户密码。这很好，至少网络界面不会让他们进入。但是这还允许访问/通过什么？在创建此密钥时没有对其施加任何限制（无法对其进行限制，只是一种“命名”它的方式）因此似乎有人可以将此密钥与 android 手机一起使用并且可以完全访问我的帐户，完全违背了 2 因素身份验证的目的。

那么，当您的应用程序向其他人发送错误报告（针对 500 个）或警报时，您如何设法将 google 用作电子邮件提供商？我见过的所有智能主机设置也需要用户名/密码，因此它会将其保留在存储库之外，但实际上并不能解决问题。

现在看来，如果我想保证我的帐户安全，我必须从谷歌购买一个额外的“用户”并为该用户创建 ASP 以发送电子邮件。

PS：刚刚借了一部不同的手机，并证明它确实可以让他们按预期访问我的帐户。似乎 ASP 可能需要将节点锁定到特定 IP 的能力，或者需要有用于发送的幻象帐户或其他东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:14:28.607

如果您认为您的托管环境是安全的，您可以遵循存储登录名并传入环境变量的方法。这被一些人认为是最佳实践：[http](http://www.12factor.net/config) ://www.12factor.net/config （而且它似乎越来越受欢迎）。

然后在你的 settings.py 中：

```
 #If you want loud failures, usually the best
  EMAIL_HOST_USER = os.environ['EMAIL_USERNAME']
  EMAIL_HOST_PASSWORD = os.environ['EMAIL_PASSWORD']

  #If you want quiet failures, usually not a good idea
  EMAIL_HOST_USER = os.environ.get('EMAIL_USERNAME', None)
  EMAIL_HOST_PASSWORD = os.environ.get('EMAIL_PASSWORD', None) 
```

如何设置环境变量取决于您的设置，但通常非常简单。

这种方法的优势在于将机密信息排除在 git 存储库之外，因此您可以将新的协作者添加到项目中，而不必担心他们会接管您的 AWS/email/etc 帐户

# c# - 创建一个 Observable 类：重载 = 运算符？

> ID：13995933
> 
> 赞同：7
> 
> 时间：2012-12-21T19:20:07.493
> 
> 标签：c#, wpf, overloading, observable

我正在尝试创建一个包含一个值的类，每当值更改时都会引发一个事件，并将隐式转换为它所持有的类型。

我的目标是我应该能够创建一个类的 Observable 属性，并让另一个类（包括 WPF 控件）能够像普通字符串一样读取和写入它。其他类可以维护对它的引用作为 Observable，甚至将其公开为自己的属性，而无需创建新事件。

这是我到目前为止所拥有的：

```
using System;
using System.ComponentModel;

namespace SATS.Utilities
{
    public class Observable<T>
    {
        private T mValue;

        public event EventHandler ValueChanged;
        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyValueChanged()
        {
            if (ValueChanged != null)
            {
                ValueChanged(this, new EventArgs());
            }
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("Value"));
            }
        }

        public T Value
        {
            get
            {
                return mValue;
            }
            set
            {
                SetValueSilently(value);
                NotifyValueChanged();
            }
        }

        public void SetValueSilently(T value)
        {
            mValue = value;
        }

        public static implicit operator T(Observable<T> observable)
        {
            return observable.Value;
        }

        public static T operator =(Observable<T> observable, T value) // Doesn't compile!
        {
            observable.Value = value;
            return value;
        }
    }
} 
```

问题是“=”运算符抱怨它不能重载。我想这是有道理的，因为它可能导致各种奇怪的行为。还有另一种方法可以实现我的目标吗？

编辑：这是我决定如何实施的。让我知道是否有更好的建议:)

我意识到这种情况应该由持有 Observable 的属性来处理。这是我想做的一个例子：

```
public class A
{
    private readonly Observable<string> _property;

    public Observable<string> Property
    {
        get { return _property; }
    }

    public string Property
    {
        set { _property.Value = value; }
    }
} 
```

当然，这不会编译，因为 Property 被定义了两次。这是我正在考虑以另一种方式定义隐式转换的有点骇人听闻的解决方法（正如你们中的许多人所建议的那样）：

```
public static implicit operator Observable<T>(T value)
{
    var result = new Observable<T>();
    result.SetValueSilently(value);
    return result;
} 
```

并使用它来调用属性的设置器：

```
public Observable<string> Property
{
    get { return _property; }
    set { _property.Value = value.Value; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T19:36:45.703

如果您查看[C# 中的可重载运算符](http://msdn.microsoft.com/en-us/library/8edha89s%28v=vs.71%29.aspx)，您会看到：

> 赋值运算符不能重载，但 +=，例如，使用 + 计算，可以重载。

但是，您可以制作一个`implicit operator Observable<T>(T value)`，这将允许您从 隐式转换`T`为`Observable<T>`。

话虽如此，我不会推荐这个。我会明确分配，因为这需要在每次调用它时创建一个*新的，这将导致您的事件处理程序出现问题，因为每个分配都会创建一个新的对象实例。* `Observable<T>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T19:31:24.263

您可以重载`implicit`运算符。

```
public static operator implicit string(YourObject object) 
```

走另一条路

```
public static operator implicit YourObject(string s) 
```

但是请注意，这是*非常*危险的。它可以导致类的消费者做一些你从未想过的事情；以及一些没有意义的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T19:33:43.833

添加另一个隐式转换，如下所示：

```
public static implicit operator Observable<T>(T value)
{
    return new Observable<T>{Value = value};
} 
```

# android - onPause() 如何确定是否正在调用新的应用程序活动或应用程序是否完全暂停？

> ID：13995934
> 
> 赞同：4
> 
> 时间：2012-12-21T19:20:09.543
> 
> 标签：android

在 onPause 中，如何确定是否正在调用新的应用程序活动或应用程序是否完全暂停？这对于动画到选项屏幕（使用左推动画）或动画到主屏幕（使用缩小动画）很有用。

当用户按下主屏幕时，我只会在 onPause 中收到此事件的通知，以便我可以将动画覆盖到主屏幕。但如果我这样做，我也会将动画覆盖到其他屏幕，并且在某些情况下我想自定义它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:54:24.657

当用户按下按钮时，`Activity`将调用以下方法。`Home`您可以放置​​您想做的代码。

```
@Override
protected void onUserLeaveHint() {
    super.onUserLeaveHint();
    Log.d("TAG","Home Button Pressed");
    //some code here..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:49:14.327

实施 onkeydown 并检查 KEYCODE_HOME。这样，当用户进入主屏幕时，您会收到通知。

# audio - .wav 文件格式的频道是什么？播放 wav 文件时是否所有频道同时播放？

> ID：13995936
> 
> 赞同：16
> 
> 时间：2012-12-21T19:20:10.893
> 
> 标签：audio, wav, channel, bit-depth

我通过谷歌搜索阅读了 about.wav 文件格式，我所能想到的是帧是由样本（具有一些定义的位深度）组成的，而 wav 立体声文件有多个称为通道的东西....混淆是通道是否是由框架组成的吗？当我播放一些音频文件时，所有频道都会一起播放吗？如果一个通道由帧组成，所有通道的长度是否相等（按位）？如果有人可以请回答，我在以波形播放wav文件时必须分别显示每个通道

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-21T19:34:49.440

在 wav 的每一帧中都有通道。如果您有立体声，则每帧包含两个样本（左和右）。

*   当我播放一些音频文件时，所有频道都会一起播放吗？

是的，除非您选择只播放一个频道。然后忽略第二个通道的样本。

*   如果一个通道由帧组成，所有通道的长度是否相等（按位）？

是的。

# ruby - 像 tunnlr 这样的服务是如何工作的？

> ID：13995937
> 
> 赞同：2
> 
> 时间：2012-12-21T19:20:11.907
> 
> 标签：ruby, language-agnostic, ssh, tunnel

该网站说：

> Tunnlr 使用 SSH 远程隧道。它将您本地机器上的一个端口安全地连接到我们公共服务器上的一个开放端口。启动 Tunnlr 客户端后，您本地计算机上的 Web 服务器将通过您的特殊 Tunnlr URL 对世界其他地方可用。

有人可以更详细地了解整个过程是如何工作的吗？或者也许指向允许同样事情的开源东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T19:38:48.177

[SSH 协议](http://en.wikipedia.org/wiki/Secure_Shell)允许在任一方向建立连接隧道。因此，根据上面的描述，这就是正在发生的事情：

1.  您将客户端程序（SSH 客户端）下载到您的计算机并运行它。
2.  客户端建立从您的计算机到 tunnlr 远程服务器的 SSH 连接
3.  在 tunnlr 服务器上，为传入连接打开了一个访问端口。假设端口 1234。
4.  现在，当任何人连接到`tunnlr:1234`tunnlr 服务器时，将通过在步骤 2 中建立的连接指示您的客户端程序在您的计算机内部打开一个连接 - 比如说到端口 80（例如，您正在那里运行一个网络服务器）。
5.  隧道连接现在将在`tunnlr:1234`和之间打乱数据`your_computer:80`。

如此有效，这就是正在运行的内容：

```
[some_remote_computer]<->[tunnlr:1234]<->[SSH tunnel]<->[your_computer:80] 
```

假设`some_remote_computer`是您的朋友或您希望能够连接到本地 Web 服务器的任何其他人。

SSH 可用于许多平台（Linux、Windows、OSX 等）。你可以用它很容易地建立这样的隧道，但你当然需要访问你想在它们之间建立隧道的两台计算机。假设一台计算机是您自己的计算机，另一台是您租用的 VPS（或任何其他具有 SSH 访问权限的远程服务器）。现在您可以运行完全相同的设置。

tunnlr 的优点是他们为您管理远程服务器，并且他们有一个注册的主机名，您可以将其用于您的隧道。

# javascript - 如果我的网站布局设置为 800x600 的分辨率，如果它是更高的分辨率，我可以放大我的网站以适应用户的分辨率吗？

> ID：13995939
> 
> 赞同：0
> 
> 时间：2012-12-21T19:20:32.660
> 
> 标签：javascript, html, css

我之前的问题措辞错误，我的意图不是更改用户浏览器设置的分辨率。我主要想将我的页面布局为最小的常见分辨率大小，如果用户的分辨率设置更高，则将其放大以适应分辨率。就像如果用户的分辨率是 800x600，我的网站看起来就像我设计的一样，但是如果用户的分辨率是 1280x800，我的网站会放大以适应该分辨率，而不改变我网站的布局，这会使字体和大小一切更大，同时保持网站的外观和布局相同。如果有办法，我该怎么办？提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:25:21.350

不，那里没有。这对客户来说是非常烦人的。您必须更改您的网站以适应用户的分辨率。正如评论所建议的那样，使其具有响应性。如果您搜索响应式网页设计，您会发现很多关于如何做到这一点的文章。我们有时在 javascript 中受到限制，因为有些事情会是一个安全问题（这会更令人烦恼）。

> 试想一下 - 在浏览网页时 - 如果您访问的每个网站都更改了显示器的分辨率！

综上所述，之所以有这么多的网站适合用户分辨率，是因为您无法更改用户的分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:39:19.787

你不能这样做，也不应该这样做。

您必须使您的网站尽可能地适应用户当前的浏览器窗口大小。您无法控制浏览器窗口大小或屏幕分辨率，即使您这样做了，在用户不理解和发起此类更改的情况下更改这些内容也是不专业和不礼貌的。

浏览器不是电脑。它只是众多应用中的一种。你不知道用户在用他的屏幕做什么——如果他在一个角落播放视频并希望他的浏览器窗口准确地在哪里呢？

如果他有视力障碍并且他的浏览器像疯了一样放大怎么办？我认识一个戴着厚眼镜的人，使用屏幕上的缩放辅助功能框，并且仍然倾斜到离屏幕大约 6 英寸的位置才能看到任何东西。你*不会*帮他改变浏览器和屏幕布局的*任何事情。*

任何网站以某种方式改变了我的浏览器以适应屏幕，改变了我的浏览器的分辨率，或者改变了我的显示器的分辨率：

1.  立即添加到我的“永远的仇恨列表”中，并且再也不会访问。

2.  值得告诉我所有的技术朋友，让他们发笑

3.  提交给 thedailywtf.com 让未来的人们惊叹

4.  在我的下一篇博客文章中介绍软件不是傲慢的邪恶并且不像它拥有用户的计算机一样，这是我以前从未在博客上写过的主题，但在这种情况下将完全被迫这样做

5.  收到一封礼貌但尖锐的电子邮件，说这种未经许可擅自干预我的电脑是不专业和粗鲁的，而且批准它的违规决策者应该受到严厉的鞭打。

有视频播放插件*可以***在用户请求和用户请求时**最大化到全屏。做这样的事情需要一个 java 小程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T21:48:58.993

正如其他人在之前的答案中所说，更改屏幕分辨率可能是一个坏主意（如果不是根本不可能的话），但您可以更改内容的比例，使其完全适合您的窗口。

我为一个专门为分辨率为 1280x800 的设备设计的 Web 应用程序编写了下面的代码。最后，我决定偶尔在 1080p 屏幕上使用它，因此需要进行一些缩放才能使其完美契合。这就是我下面的代码所做的。

我正在使用全屏 API（此包装器：[http](http://sindresorhus.com/screenfull.js/) ://sindresorhus.com/screenfull.js/ ）通过一个按钮使浏览器全屏显示，并且同一个按钮同时触发自动缩放。您可以在这里找到一个工作示例：http: [//jsfiddle.net/QT5Nr/5/](http://jsfiddle.net/QT5Nr/5/)

请注意，这段代码目前需要[jQuery 1.8.3](http://jquery.com/)和[screenfull.js](http://sindresorhus.com/screenfull.js/)，但可以轻松更改以在没有它们的情况下工作。我在顶部留下了完整的评论，以解释为什么我覆盖了 jQuery 偏移函数。您还可以通过在 jsFiddle 中注释掉那段代码，然后调整框架大小来测试我这样做的原因。

```
/*****************************************************************************************************************************************\
|**                                                     Scale elements to fit page                                                      **|
|*****************************************************************************************************************************************|
|** Because we created a static size layout for our target device other devices will not have a 100% sized layout. To fix this we       **|
|** change the scale of the body element so that it's contents fit exactly within the available window.                                 **|
|** In addition we have to override jQuery.fn.offset in order to fix problems where the offset returned by this function is exact to    **|
|** the current location of the element (with it's scale), while it has to be the exact location of the unscaled element.               **|
\*****************************************************************************************************************************************/
function EnableAutoScale() {
    function AdjustScale() {
        var windowWidth = $(window).width();
        var windowHeight = $(window).height();

        var viewportWidth = $('#viewport').width();
        var viewportHeight = $('#viewport').height();

        var horizontalScale = windowWidth / viewportWidth;
        var verticalScale = windowHeight / viewportHeight;

        $(document.body).css('transform-origin', '0 0');
        $(document.body).css('transform', 'scale(' + horizontalScale + ', ' + verticalScale + ')');
        document.body.HorizontalScale = horizontalScale;
        document.body.VerticalScale = verticalScale;
    }

    $(AdjustScale);
    $(window).resize(AdjustScale);

    // Override offset so it continues working with the scale set above
    jQuery.fn.originalOffset = jQuery.fn.offset;
    jQuery.fn.offset = function () {
        var offset = jQuery.fn.originalOffset.apply(this, arguments);

        offset.left = offset.left / document.body.HorizontalScale;
        offset.top = offset.top / document.body.VerticalScale;

        return offset;
    };
}
$(function () {
    $('#fullscreen').click(function () {
        $('#fullscreen').hide();

        EnableAutoScale();

        if (screenfull.enabled)
            screenfull.toggle();
    });
}); 
```

# php - 用程序编辑 php 代码

> ID：13995949
> 
> 赞同：0
> 
> 时间：2012-12-21T19:21:16.607
> 
> 标签：php, python, programming-languages

所以，我这里有 900+ 页代码，php 代码，每一个 1000+ 行，不超过 20000 行……都容易受到 sql 注入。因此，我没有花费一年的大部分时间在每个用户输入中加入 mysql 真正的转义字符串，而是计划编写一个程序来搜索代码行并将其输入到任何需要它的地方，例如在每个帖子变量。有人认为这合理吗？如果是这样，你会推荐用什么语言来做？我有一些使用 php 的想法，但没有什么可靠的。而且我担心js会太慢。感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:30:00.977

我不一定建议这样做，因为您实际上是在打开魔术引号，但是如果您没有时间正确修复它，那么您可以将其添加到引导文件中并将其包含在您的所有脚本中

```
foreach ($_POST as &$v) {
    $db->escape($v); // mysql_real_escape_string() or mysqli or pdo
}
unset($v); 
```

您将需要修改它以检查 $v 的数组并相应地转义这些数组。您还希望对 $_GET 执行相同的操作。

请注意，虽然这可能会阻止 sql 注入，但可能会导致其他问题。我建议花一些时间来重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:05:43.957

正如我在评论中提到的，至少已经有一个[SO 问题](https://stackoverflow.com/questions/6072436/is-there-a-static-analysis-tool-for-identifying-sql-injection-for-php-mysql)要求使用静态分析工具来处理这个问题。如果有一个现有的工具被多个其他项目使用，那通常比没有被任何人使用过的工具更值得信赖。

不幸的是，这个问题没有任何好的答案。对 PHP 静态分析器的快速搜索出现了[PHP Source Code Security Framework](http://trac.assembla.com/php-ast)和[PHP_CodeSniffer](http://pear.php.net/package/PHP_CodeSniffer)，但除了它们的名称之外，我对它们一无所知，因此不要将其视为认可。

如果您必须自己构建它，您的 Python 标签意味着您想用 Python 编写它。通常，我会说这是一个不错的选择。但是对于这样的事情，获得​​尽可能多的其他人的支持对于能够信任您的代码至关重要，而且我认为如果您编写代码，您可能会有更多的支持，只是因为您可以确定任何想使用您的工具的人都会知道 PHP。

还有另一种可能性：如果您的代码遵循非常一致的风格，则可以做一些更简单的事情，尽管不普遍适用，但确实可以在您的特定代码中找到所有 SQL 注入漏洞。由于您正在尝试编写可以说服自己万无一失的代码，因此在这种情况下，简单性的好处可能是值得的。

抱歉，这一切都太模糊了，但这是一个非常模糊的问题。我只能说原则上是合理的。我真的无法猜测这在实践中是否可行。

# csv - 来自csv文件的gnuplot输出文件名

> ID：13995961
> 
> 赞同：1
> 
> 时间：2012-12-21T19:22:24.267
> 
> 标签：csv, gnuplot

我有一个 CSV 文件，我在 do for[] 循环中一一绘制列。我想将绘图保存为 PNG 文件，文件名来自列标题。将 text.png 替换为第 i 列标题的最佳方法是什么？

```
#!/bin/bash
set datafile separator ","
set key autotitle columnhead
set xlabel "time/date"
nc = "`awk -F, 'NR == 1{ print NF; exit}' input.csv`"
set term png

do for [i = 2:5] {
set output "test.png"
plot 'HiveLongrun.csv' every::0 using i:xticlabels(1) with lines
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:22:57.177

只要您使用 awk，就可以再次使用它从 gnuplot 宏中获取标题名称：

```
#!/usr/bin/env gnuplot

set datafile separator ","
set key autotitle columnhead
set xlabel "time/date"
nc = "`awk -F, 'NR == 1{ print NF; exit}' input.csv`"

# Define a macro which, when evaluated, assigns the ith column header
# to the variable 'head'
awkhead(i) = "head = \"\`awk -F, 'NR == 1 {print $".i."}' input.csv\`\""

set term png

do for [i = 2:5] {
    eval awkhead(i)          # evaluate the macro
    set output head.".png"   # use the 'head' variable assigned by the macro
    plot 'HiveLongrun.csv' every::0 using i:xticlabels(1) with lines
} 
```

几乎可以肯定，使用另一个类似 awk 的实用程序，甚至在 gnuplot 中，有一种更简洁的方法可以做到这一点。Gnuplot 提供了几种运行任意内部/外部命令的方法，正如您从我的 backtics 和宏评估组合中看到的那样。

`#!/bin/bash`顺便说一句，如果它可能会被 gnuplot 解释，那么在脚本开头有 bash shebang ( ) 对我来说有点奇怪。我假设您将其称为`gnuplot myscript.plt`. 在这种情况下，shebang 只是一个注释（就 gnuplot 而言）并且没有做任何事情，因为 gnuplot 是解释器。在我的示例中，我使用`#!/usr/bin/env gnuplot`并将脚本作为 bash 中的可执行文件运行，例如`./myscript.plt`. 在这种情况下，shebang 告诉 bash 使 gnuplot 成为解释器（或在命令提示符下键入的任何`gnuplot`命令）。当然，`#!/usr/bin/gnuplot`如果您不担心路径改变，您也可以将 shebang 设置为。

# php - 调用未定义函数 PDO()

> ID：13995964
> 
> 赞同：1
> 
> 时间：2012-12-21T19:22:52.050
> 
> 标签：php, mysql, pdo

我写了这个 php 脚本：

```
<?php

//Connexion a la base de données
try
{
    $bdd = PDO('mysql:host=localhost;dbname=Hotel', 'root', '');
    /*ou bien $bdd = mysql_connect("localhost",'root','');
    * mysql_select_db("Hotel", $bdd);
    */  
}
catch(Exception $ex)
{
    die('Erreur: '.$ex->getMessage());
}

//Récuperation des valeurs 
$code = $_POST['code'];
$nombre = $_POST['nombre'];
$prix = $_POST['prix'];

//Insertion du nouveau enregistrement à l'aide d'une requête préparée
$req = $bdd->prepare('Insert into chambre(code_ch,nombre_lit,prix) values(:code, :nombre, :prix) ');
$req->execute(array($code, $nombre, $prix));

//Redirection vers la page d'ajout
header('Location: ajouter.php');

?> 
```

但它给了我这个错误：

> 致命错误：第 22 行 C:\xampp\htdocs\Hotel\ajoutfin.php 中调用未定义函数 PDO()

第 22 行：`$bdd = PDO('mysql:host=localhost;dbname=Hotel', 'root', '');`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T19:24:47.733

它应该是：

```
$bdd = new PDO('mysql:host=localhost;dbname=Hotel', 'root', ''); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T19:24:59.130

PDO 是一个类，需要充当：

```
$bdd = new PDO('...'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-21T19:25:37.043

一定是这个

```
 $bdd = new PDO('mysql:host=localhost;dbname=Hotel', 'root', ''); 
```

# google-chrome-devtools - 显示在 chrome 中禁用的控制台按钮

> ID：13995966
> 
> 赞同：0
> 
> 时间：2012-12-21T19:23:03.360
> 
> 标签：google-chrome-devtools

我无法在 chrome 中使控制台更大。我记得我不久前能够做到这一点。有没有办法启用这个？扩大后的控制台看起来就像一个萤火虫控制台，我可以一次输入多行代码。

![在此处输入图像描述](../Images/26177d04d41a453df3df3cf27418c10d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:25:29.530

打开开发工具后，点击`esc`打开控制台并启用代码输入。

# jquery - 在 JQuery 移动页面中，AJAX 滑块中的链接不起作用？

> ID：13995970
> 
> 赞同：0
> 
> 时间：2012-12-21T19:23:15.623
> 
> 标签：jquery, ajax

我一直在开发一个小型 jquery 移动应用程序。我有一个滑块可以从远程 XML 中拉出幻灯片并将它们弹出到轮播中。在正常的空白页面中，这可以正常工作，单击浏览器会转到相应的页面。

当完全相同的代码插入移动页面时 - 链接不会打开。尝试了 data-ajax false，但没有运气。我想知道它是否是 .live() 但我不确定我会把它放在哪里？任何帮助，将不胜感激。

```
 $.ajax({
            type: "GET",
            url: "http://www.xxxxxx.com/file.xml
            dataType: "xml",
            success: function(xml) {
                $(xml).find('coupon').each(function(){
                    var url = $(this).find('link').text();
                    var imageurl = $(this).find('imageurl').text();

                    $('<li></li>').html('<a href="' + url + '" data-ajax="false"> <img src="' + imageurl + '" data-ajax="false"/></a>').appendTo('#es-carousel-deals');

                });

                $('#deals').elastislide({
                    imageW  : 128,
                    minItems    : 5
                });

            }
        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:11:04.837

这是使用 .on() 函数在移动应用程序中加载动态数据的示例：

[JQuery-mobile : 通过 AJAX 请求加载 JQPlot 图](https://stackoverflow.com/questions/13761878/jquery-mobile-load-jqplot-graph-through-ajax-request)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T00:03:40.240

相对=“外部”

整理了这个。

# c++ - 将 get line() 与多种类型的行尾字符一起使用

> ID：13995971
> 
> 赞同：2
> 
> 时间：2012-12-21T19:23:16.210
> 
> 标签：c++, delimiter, getline

我以下列方式使用 std::getline() ：

```
 std::fstream verify;
 verify.open(myURI.c_str());
 std::string countingLine;

  if(verify.is_open()){

        std::getline(verify, countingLine);

        std::istringstream iss(countingLine);
        size_t pos;

        // Check for the conventional myFile header.
        pos = iss.str().find("Time,Group,Percent,Sign,Focus");

        if(pos == std::string::npos){//its not there
            headerChk = false;
            this->setStatusMessage("Invalid header for myFile file");
            return 0;
        }

         // loop that does more validation

        iss.clear();

    } 
```

问题是我在mac上编码（有些文件被windows工具和苹果工具修改）。一些行尾字符是 \r 而不是 \n，所以我的文件字符串永远不会分成几行。我相信还有第三个我应该检查。我找不到为多个 endOfLine 字符设置 delim 参数的示例。

如果有人可以帮助该示例或其他方法，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:35:54.207

`std::getline()`只支持一个行尾字符。以文本模式打开文件时，系统的行尾序列将转换为单个行尾字符 ( `\n`)。但是，这不处理来自其他系统的行尾字符序列。实际上，真正需要做的就是`\r`从剩余的输入中删除字符。删除字符的最佳方法可能是创建一个过滤流缓冲区。这是一个微不足道的，未经测试的，并且可能很慢的一个（它没有缓冲，这意味着每个单独的字符都有虚函数调用；这太可怕了；不过，创建缓冲版本并不难）：

```
class normalizebuf
    : std::streambuf {
    std::streambuf* sbuf_;
    char            buffer_[1];
public:
    normalizebuf(std::streambuf* sbuf): sbuf_(sbuf) {}
    int underflow() {
        int c = this->sbuf_->sbumpc();
        while (c == std::char_traits<char>::to_int_type('\r')) {
            c = this->sbuf->sbumpc();
        }
        if (c != std::char_traits<char>::eof()) {
            this->buffer_[0] = std::char_traits<char>::to_char_type(c);
            this->setg(this->buffer_, this->buffer_, this->buffer_ + 1);
        }
        return c;
}; 
```

您可以将此过滤器与现有的流缓冲区一起使用，如下所示：

```
std::ifstream fin("foo");
normalizebuf  sbuf(fin.rdbuf());
std::istream  in(&sbuf); 
```

...然后您将使用删除所有字符`in`来读取文件。`\r`

# javascript - 在 IE8/IE7 Javascript 代码上接收 null

> ID：13995972
> 
> 赞同：0
> 
> 时间：2012-12-21T19:23:16.640
> 
> 标签：javascript, jquery, internet-explorer-8

我不是 JavaScript 专家，但我有一个简单的功能，并且在除 IE8 和 7 之外的所有浏览器中都能正常工作

```
function setSelected() {
    var backgroundPos = $('div.eventJumpToContainer').find('.selected').css('backgroundPosition').split("");
    var xPos = backgroundPos[0];
    var yPos = '-100px';
    var toSet = xPos + ' ' + yPos;
    $('div.eventJumpToContainer').find('.selected').css('backgroundPosition', toSet);
    $('div.eventJumpToContainer span.jumpDate').not('.selected').each(function () {
        var backgroundPos = $(this).css('backgroundPosition').split(" ");
        var xPos = backgroundPos[0];
        $(this).css('backgroundPosition', xPos + ' top');
    });
} 
```

在 IE9 中单步执行此代码时：

```
$('div.eventJumpToContainer').find('.selected').css('backgroundPosition') = ‘3600px 0%’ 
```

但在 IE8 中，此表达式为空。

我已经尝试了很多东西，但我无法得到它！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:36:31.567

您在 jQuery css 函数中使用 javascript 语法作为背景位置。

例子：

```
object.style.backgroundPosition="center" 
```

在 CSS 中，属性实际上是`'background-position'`

尝试这个：

```
$('div.eventJumpToContainer').find('.selected').css('background-position') = ‘3600px 0%’ 
```

如果这不起作用，您可能需要使用这些`-ms-background-position-x -ms-background-position-y`属性。

# android - 离线拼写检查 api

> ID：13995974
> 
> 赞同：2
> 
> 时间：2012-12-21T19:23:24.950
> 
> 标签：android, nlp

我正在构建自己的自定义 IME，并希望包括拼写检查。是否有可用的离线拼写检查 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:26:07.267

从 API 指南：

> Android 平台提供了一个拼写检查框架，可让您在应用程序中实现和访问拼写检查。该框架是 Android 平台提供的文本服务 API 之一。

来源[在这里](http://developer.android.com/guide/topics/text/spell-checker-framework.html)。

您还可以在 SDK 示例文件夹中找到示例拼写检查器应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-21T07:50:07.577

Languagetool 是一个基于 Java 的拼写检查和校对软件，可能适合。看

*   [https://www.languagetool.org/](https://www.languagetool.org/)
*   [http://wiki.languagetool.org/java-api](http://wiki.languagetool.org/java-api)
*   [https://stackoverflow.com/questions/tagged/languagetool](https://stackoverflow.com/questions/tagged/languagetool)

它已成功用于android。见用户论坛。

# database - Django 视图和表单提交按钮更新数据库

> ID：13995975
> 
> 赞同：1
> 
> 时间：2012-12-21T19:23:26.637
> 
> 标签：database, django, django-forms, django-views

这是提交按钮所在的表单。

```
<form>
          <button type="submit" name="subscribe" class="btn btn-primary pull-right">Subscribe</button></h5>
        </form> 
```

在我看来，我有这段代码：

```
def tour_sub(request):
    tour = Tour.objects.filter(id=1)
    if 'subscribe' in request.POST:
        tour.subscribers.add(user) 
        tour.save() 
```

单击订阅按钮时，我只想更新记录并将其插入数据库。但是当我单击订阅按钮时没有任何反应。我是 django 的新手，我不知道问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T22:22:18.867

# 指定表单操作

首先，如果`tour_sub`视图不是呈现包含表单的模板的视图，您需要指定表单操作。也使用`input`类型提交。

```
<form action="/some/url/mapped/to/tour_sub/view/">
      <input type="submit" name="subscribe" class="btn btn-primary pull-right" value="Subscribe" />
</form> 
```

# 使用条件和错误处理

您还可以`tour_sub`稍微修改您的函数并进行一些错误处理，以便该方法不会出现静默错误，因为它们很难调试。

```
def tour_sub(request):

    tour = get_object_or_404(Tour, pk=1)
    if (request.method == "POST") and ("subscribe" in request.POST):
        tour.subscribers.add(user) 
        tour.save()
        # Send a Success Message to the User
    else:
        # Do something in case of a GET request 
```

# 如果 Post 是 AJAX

如果您使用 AJAX 发出 POST 请求，请记住您特别需要将 POST 数据添加`csrf_token`到 POST 数据中。否则，您可以在基本模板中包含以下通用`js`文件，它将负责将 附加`csrf_token`到所有 AJAX 请求。

```
$(document).ajaxSend(function(event, xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }   
            }   
        }   
        return cookieValue;
    }   
    function sameOrigin(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host; // host + port
        var protocol = document.location.protocol;
        var sr_origin = '//' + host;
        var origin = protocol + sr_origin;
        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            !(/^(\/\/|http:|https:).*/.test(url));
    }   
    function safeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }   

    if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
    }   
}); 
```

# java - 如何从枚举构造函数中抛出异常

> ID：13995982
> 
> 赞同：4
> 
> 时间：2012-12-21T19:24:07.717
> 
> 标签：java, exception, constructor, enums

（参考这篇文章：[如何从枚举构造函数中抛出异常？](https://stackoverflow.com/q/3543903/1922350)）

我真的很想做同样的事情。示例代码：

```
public enum PublicIPWebservice {
    AMAZON_WEB_SERVICES("http://checkip.amazonaws.com"),
    EX_IP("http://api-ams01.exip.org/?call=ip"),
    WHAT_IS_MY_IP("http://automation.whatismyip.com/n09230945.asp");

private URL url;

private PublicIPWebservice(String url) throws MalformedURLException {
    this.url = new URL(url);
}

public URL getURL() {
    return url;
}
} 
```

如果 url 不正确，程序应该会崩溃，因为这将是一个编程错误，所以在构造函数中捕获异常是错误的，不是吗？

解决该问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T19:28:32.240

您可以捕获它并作为 AssertionError 重新抛出：

```
try {
    this.url = new URL(url);
}
catch(MalformedURLException e) {
    throw new AssertionError(e);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:28:45.000

我会抛出`RuntimeExpcetion`某种（例如`IllegalArgumentException`）

```
private PublicIPWebservice(String url) {
    try {
        this.url = new URL(url);
    catch (MalformedURLException e) {
        throw new IllegalArgumentException(e);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T19:33:53.443

通常，程序员错误必须报告为未经检查的异常，因为它“不会发生”，因此无需强迫自己在客户端类中捕获异常。

也就是说，您应该包装 url 创建并抛出未经检查的异常。

```
private PublicIPWebservice(String url) {
    try {
        this.url = new URL(url);
    catch (MalformedURLException ex) {
        throw new IllegalArgumentException("From input: " + url);
    }
} 
```

抛出 IllegalArgumentException 是一个不错的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T19:28:01.610

你为什么*不想*捕捉那个异常？

```
private PublicIPWebservice(String url) {
    try {
        this.url = new URL(url);
    catch (MalformedURLException e) {
        // surely you should handle the exception here
    }
} 
```

这个枚举的第一个用户将如何处理异常。它当然不会期待一个。

# java - 在保存之前比较Java中的两个JPasswordFields？

> ID：13995986
> 
> 赞同：1
> 
> 时间：2012-12-21T19:24:32.893
> 
> 标签：java, swing, jpasswordfield

> **可能重复：**
> [如何检查 JPassword 字段是否为空](https://stackoverflow.com/questions/13460582/how-to-check-if-jpassword-field-is-null)

在创建登录注册表单时，我使用了两个密码字段。在保存数据之前，我想比较两个字段；如果它们匹配，则数据应保存在文件中。如果不是，它应该打开一个对话框。请任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T19:42:06.067

最安全的方法是使用[Arrays.equals](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28char%5B%5D,%20char%5B%5D%29)：

```
if (Arrays.equals(passwordField1.getPassword(), passwordField2.getPassword())) {
   // save data
} else {
  // do other stuff
} 
```

**解释：** `JPassword.getText`被故意弃用以避免使用`Strings`，而是使用`char[]`返回的`getPassword`.

调用时`getText`，您会得到一个可能不会更改（反射除外）的字符串（不可变对象），因此密码会保留在内存中，直到垃圾收集。

然而，一个字符数组可能会被修改，所以密码实际上不会留在内存中。

上述解决方案与该方法一致。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T19:35:55.190

这将有助于展示您尝试过的内容...

但你会这样做：

```
//declare fields

JPasswordField jpf1=...;
JPasswordField jpf2=...;

...

 //get the password  from the passwordfields

String jpf1Text=Arrays.toString(jpf1.getPassword());//get the char array of password and convert to string represenation
String jpf2Text=Arrays.toString(jpf2.getPassword());

//compare the fields contents
if(jpf1Text.equals(jpf2Text)) {//they are equal

}else {//they are not equal

} 
```

# java - GCJ 中的奇怪编译器错误

> ID：13995990
> 
> 赞同：0
> 
> 时间：2012-12-21T19:24:40.087
> 
> 标签：java, gcj

我试图使用 gcj 编译一些 java 代码。我收到以下错误。是因为我的 gcj 不支持该行中的某些内容吗？顺便说一句，我正在使用 gcj 来查看本机代码是否比具有最新热点 JVM 的字节码更好。

> AbstractCursor.java:113: 错误: '{' 预期。公共抽象类 AbstractCursor 实现 Cursor { ^ AbstractCursor.java:113: 被早期的错误弄糊涂了，救出

谢谢~雷兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:39:36.853

啊，我的（疯狂的）猜测：第 113 行似乎表明，这可能是源代码中的第二个类定义。.java 文件中可能只有一个非内部**公共**类。

或者这是一个内部类，但大括号嵌套错误。

# c++ - 当代码在没有真正改变的情况下意外开始工作时

> ID：13995995
> 
> 赞同：0
> 
> 时间：2012-12-21T19:25:04.210
> 
> 标签：c++, visual-studio-2010, compiler-construction, mfc

在我的代码无法正常工作之前，我遇到过类似的情况，在我寻求解决问题的过程中，我做了一些更改，而不是评论这些更改并解决了问题。突然之间，文件中某处的“编辑”已经解决了问题，但代码没有真正的变化。我又遇到了类似的问题，我只是想知道这是怎么发生的？

```
void CDlgResizeHelper::Init(HWND hparent) 
{
    m_hParent = hparent;
    m_CtrlsList.clear();

    if (::IsWindow(m_hParent)) 
    {
        ::GetWindowRect(m_hParent, m_OrigParentSize);

        // get all child windows and store their original sizes and positions
        HWND hCtrl = ::GetTopWindow(m_hParent);

        while (hCtrl) 
        {
            CtrlSize cs;
            cs.hctrl = hCtrl;

            ::GetWindowRect(hCtrl, cs.orig_size);
            ::ScreenToClient(m_hParent, &cs.orig_size.TopLeft());
            ::ScreenToClient(m_hParent, &cs.orig_size.BottomRight());

        //  CString msg;
        //  msg.Format("Old Size: %d        %d      %d      %d\r\n", cs.orig_size.left, cs.orig_size.top, cs.orig_size.right, cs.orig_size.bottom );

        //  TRACE( msg );

            m_CtrlsList.push_back(cs);

            hCtrl = ::GetNextWindow(hCtrl, GW_HWNDNEXT);

        }

    }

} 
```

此类/函数根据对话框大小调整控件的大小。它在调试版本中工作，但相同的代码在发布版本中不起作用（=正确调整大小）。我进行了更改并在上面的循环中为 TRACE 函数添加了三行。它也开始在发布版本中正常工作。比我评论这些行，它仍然适用于发布版本。我删除了它们，它不再在发布版本中工作。我必须让这些行刚刚被评论，以便发布版本做正确的事情。这怎么可能是正当的？什么可能真正导致文件的这种“编辑”，而实际代码中实际上没有任何变化可以解决问题？

我还想补充一点，我已经尝试过“编辑”或在文件中的其他地方注释了新代码，但不一定能解决问题。我只需要在上述函数中添加注释代码即可修复它。

***更新***这是完整的课程。我必须说这门课在网络上的某个地方是免费的，我不是原作者。

*   `Init``OnInitDialog`从需要调整大小的对话框中调用。它只存储所有控件的坐标。
*   OnSize() 实际上会调整大小。

    CDlgResizeHelper::CDlgResizeHelper() { }

    无效 CDlgResizeHelper::Init(HWND hparent) { m_hParent = hparent; m_CtrlsList.clear();

    ```
    if (::IsWindow(m_hParent)) 
    {
        ::GetWindowRect(m_hParent, m_OrigParentSize);

        // get all child windows and store their original sizes and positions
        HWND hCtrl = ::GetTopWindow(m_hParent);

        while (hCtrl) 
        {
            CtrlSize cs;
            cs.hctrl = hCtrl;

            ::GetWindowRect(hCtrl, cs.orig_size);
            ::ScreenToClient(m_hParent, &cs.orig_size.TopLeft());
            ::ScreenToClient(m_hParent, &cs.orig_size.BottomRight());

            CString msg;
            msg.Format("Old Size: %d        %d      %d      %d\r\n", cs.orig_size.left, cs.orig_size.top, cs.orig_size.right, cs.orig_size.bottom );

            Sleep( 50 );

            m_CtrlsList.push_back(cs);

            hCtrl = ::GetNextWindow(hCtrl, GW_HWNDNEXT);

        }

    } 
    ```

    }

    void CDlgResizeHelper::Remove(HWND hwnd) { CtrlList::iterator it;

    ```
    for (it = m_CtrlsList.begin(); it != m_CtrlsList.end(); ++it) 
    {
        if (it->hctrl == hwnd)
        {
            m_CtrlsList.erase(it);
            return;
        }

    } 
    ```

    }

    void CDlgResizeHelper::Update(HWND hwnd) { if (m_hParent && hwnd) { CtrlList::iterator it;

    ```
     for (it = m_CtrlsList.begin(); it != m_CtrlsList.end(); ++it) 
        {
            if (it->hctrl == hwnd)
            {
                ::GetWindowRect(hwnd, &(it->orig_size));
                ::ScreenToClient(m_hParent, &(it->orig_size.TopLeft()));
                ::ScreenToClient(m_hParent, &(it->orig_size.BottomRight()));
            }

        }

    } 
    ```

}

void CDlgResizeHelper::Add(HWND hwnd) { if (m_hParent && hwnd) { CtrlSize cs; cs.hctrl = hwnd;

```
 ::GetWindowRect(hwnd, cs.orig_size);
    ::ScreenToClient(m_hParent, &cs.orig_size.TopLeft());
    ::ScreenToClient(m_hParent, &cs.orig_size.BottomRight());

    m_CtrlsList.push_back(cs);

} 
```

}

无效 CDlgResizeHelper::OnSize() { if (::IsWindow(m_hParent)) { CRect currparentsize; ::GetWindowRect(m_hParent, currparentsize);

```
 double xratio = ((double) currparentsize.Width()) / m_OrigParentSize.Width();
    double yratio = ((double) currparentsize.Height()) / m_OrigParentSize.Height();

    HDWP hdwp; 
    hdwp = BeginDeferWindowPos((int)m_CtrlsList.size()); 

    // resize child windows according to their fix attributes
    CtrlList::const_iterator it;

    for (it = m_CtrlsList.begin(); it != m_CtrlsList.end(); ++it) 
    {
        CRect currctrlsize;
        HorizFix horiz_fix = it->horiz_fix;
        VertFix vert_fix = it->vert_fix;

        if (horiz_fix & LEFT) 
            currctrlsize.left = it->orig_size.left;
        else 
            currctrlsize.left = (LONG)( ((horiz_fix & WIDTH) && (horiz_fix & RIGHT)) ? (it->orig_size.left + currparentsize.Width() - m_OrigParentSize.Width()) : (it->orig_size.left * xratio));

        if (horiz_fix & RIGHT) 
            currctrlsize.right = it->orig_size.right + currparentsize.Width() - m_OrigParentSize.Width();
        else 
            currctrlsize.right = (LONG)((horiz_fix & WIDTH) ? (currctrlsize.left + it->orig_size.Width()) : (it->orig_size.right * xratio));

        if (vert_fix & TOP) 
            currctrlsize.top = it->orig_size.top;
        else 
            currctrlsize.top = (LONG)(((vert_fix & HEIGHT) && (vert_fix & BOTTOM)) ? (it->orig_size.top + currparentsize.Height() - m_OrigParentSize.Height()) : (it->orig_size.top * yratio));

        if (vert_fix & BOTTOM) 
            currctrlsize.bottom = it->orig_size.bottom + currparentsize.Height() - m_OrigParentSize.Height();
        else 
            currctrlsize.bottom = (LONG)((vert_fix & HEIGHT) ? (currctrlsize.top + it->orig_size.Height()) : (it->orig_size.bottom * yratio));

        UINT flags = SWP_NOZORDER;

        if (! it->resize)
            flags |= SWP_NOSIZE;

        hdwp = ::DeferWindowPos(hdwp, it->hctrl, NULL, currctrlsize.left, currctrlsize.top, (it->resize)? currctrlsize.Width() : 0, (it->resize)? currctrlsize.Height() : 0, flags); 

        if (hdwp == NULL)
            return;

    } //end for (it = m_CtrlsList.begin(); it != m_CtrlsList.end(); ++it) 

    EndDeferWindowPos(hdwp);

} //end if (::IsWindow(m_hParent)) 
```

}

BOOL CDlgResizeHelper::Fix(HWND a_hCtrl, HorizFix a_hFix, VertFix a_vFix, bool resize / *= true* /) { CtrlList::iterator it;

```
for (it = m_CtrlsList.begin(); it != m_CtrlsList.end(); ++it) 
{
    if (it->hctrl == a_hCtrl) 
    {
        it->horiz_fix = a_hFix;
        it->vert_fix = a_vFix;
        it->resize = resize;

        return TRUE;

    }

}

return FALSE; 
```

}

BOOL CDlgResizeHelper::Fix(int a_itemId, HorizFix a_hFix, VertFix a_vFix, bool resize / *= true* /) { return Fix(::GetDlgItem(m_hParent, a_itemId), a_hFix, a_vFix, resize); }

BOOL CDlgResizeHelper::Fix(HorizFix a_hFix, VertFix a_vFix, bool resize / *= true* /) { CtrlList::iterator it;

```
for(it = m_CtrlsList.begin(); it!=m_CtrlsList.end(); ++it) 
{
    it->horiz_fix = a_hFix;
    it->vert_fix = a_vFix;
    it->resize = resize;
}

return TRUE; 
```

}

UINT CDlgResizeHelper::Fix(LPCTSTR a_pszClassName, HorizFix a_hFix, VertFix a_vFix, bool resize / *= true* /) { char cn_buf[200];
memset(cn_buf, 0, 200);

```
UINT cnt = 0;
CtrlList::iterator it;

for (it = m_CtrlsList.begin(); it!= m_CtrlsList.end(); ++it) 
{
    ::GetClassName(it->hctrl, cn_buf, sizeof(cn_buf));

    if (strcmp(cn_buf, a_pszClassName) == 0) 
    {
        cnt++;
        it->horiz_fix = a_hFix;
        it->vert_fix = a_vFix;
        it->resize = resize;
    }

}

return cnt; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:29:35.497

这听起来像您在某处使用了未初始化的变量。它可以根据构建模式获得不同的值，并且恰好在调试中分配了一些无害的东西。

尝试针对您的代码运行 CppCheck 应用程序。反正不会痛。