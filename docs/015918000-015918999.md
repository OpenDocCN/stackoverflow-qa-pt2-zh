# StackOverflow 问答 15918000-15918999

# .net - WCF 组件的负载平衡

> ID：15918003
> 
> 赞同：0
> 
> 时间：2013-04-10T05:52:26.590
> 
> 标签：.net, wcf, load-balancing

有什么方法可以平衡 WCF 组件的负载。我想要做的是在 2 台机器上托管相同的 WCF 服务并添加一个负载均衡器。我可以以编程方式执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:13:13.763

当谈到负载平衡时，在 WCF 中，根据您使用的绑定，您需要更改默认绑定设置。Microsoft 在其有关 WCF 负载平衡的文章中提供了更多详细信息，其中讨论了 NetTcpBinding、WSHttpBinding、WSDualHttpBinding 和 BasicHttpBinding 的设置。

[负载均衡](http://msdn.microsoft.com/en-us/library/ms730128.aspx)

# excel - 如何根据另一列选择行

> ID：15918007
> 
> 赞同：0
> 
> 时间：2013-04-10T05:52:36.240
> 
> 标签：excel

我有一张如下表：

```
columnA    columnB    columnC    columnD    columnE
10001      aaa        bbb                   10004
10002      mmm        nnn                   10006
10003      yyy        zzz                   10009
10004      uuu        xxx                   10010
10005      fff        ggg
10007      kkk        hhh
10009      rrr        ppp 
```

columnA、columnB 和 columnC 大约有 60k 行，columnE 大约有 800 行，它们具有与 columnA 相同的值范围。

我想找出 columnE 中存在 columnA 值的前 3 列的行。

根据[这篇文章](http://www.techonthenet.com/excel/formulas/vlookup.php)，我尝试使用 columnD 中的公式， `=IF(ISNA(VLOOKUP(A2,$E$2:$E$800,1,FALSE)),"No","Yes")`但 Excel 总是弹出一个窗口，上面写着： `The formula you typed contains an error`

我不熟悉在 Excel 中使用函数，有人可以帮忙给出错误所在的线索吗？我正在使用 Excel 2007

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:23:07.547

这个对我有用：

![我的结果](https://i.stack.imgur.com/YQ2qV.png)

但是我有一些你可以尝试调试的东西：

1.  如果您已下载或导出此数据，请确保文件格式不是**.xls**并且文件未在**[兼容性]**模式下打开，因为这将限制允许的行数。我怀疑这是问题所在。

2.  尝试分阶段创建公式以查看哪些步骤失败，例如：

    *   `=VLOOKUP(A2,$E$2:$E$800,1,FALSE)`应该给出数字，例如**10004**或**#N/A**
    *   `=ISNA(VLOOKUP(A2,$E$2:$E$800,1,FALSE))`应该给你**TRUE**或**FALSE**
    *   `=IF(ISNA(VLOOKUP(A2,$E$2:$E$800,1,FALSE)),"No","Yes")`应该给你**是**或**否**

# mysql - MySQL全文不搜索短电子邮件

> ID：15918010
> 
> 赞同：0
> 
> 时间：2013-04-10T05:52:49.737
> 
> 标签：mysql, full-text-search

我在许多列上有一个全文索引，我试图在这些列上做一个 MATCH AGAINST IN BOOLEAN MODE，试图找到一个电子邮件地址。结果如下：

*   如果我搜索“test@email.com”（带引号） - 查询返回正确的结果
*   如果我搜索“a@b.com”（带引号） - 查询不返回任何内容

有人可以告诉我为什么没有返回一封简短的电子邮件 a@b.com，我将如何解决这个问题？

这是我正在使用的查询：

```
SELECT MATCH(email, phone, title, description) AGAINST('"a@b.com"' IN BOOLEAN MODE) AS score 
FROM thetable WHERE MATCH(email, phone, title, description) 
AGAINST('"a@b.com"' IN BOOLEAN MODE) ORDER BY `status` DESC, score DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-06T12:48:48.517

这是两个问题的组合：

1.  `@`不被认为是“单词字符”，也不是`-`，所以搜索`a@b.com`实际上归结为搜索单词`a`，`b`并且`com`
2.  `a`并且`b`比 ft_min_word_len 短

解决方案是制作`@`并被`.`视为单词字符。[http://dev.mysql.com/doc/refman/5.6/en/fulltext-fine-tuning.html](http://dev.mysql.com/doc/refman/5.6/en/fulltext-fine-tuning.html)上列出了几种方法

最实用的方法是添加自定义排序规则，如

[http://dev.mysql.com/doc/refman/5.6/en/full-text-adding-collat​​ion.html](http://dev.mysql.com/doc/refman/5.6/en/full-text-adding-collation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:45:01.433

更新：

a) 您需要 在 my.cnf中设置**ft_min_word_len = 1 。**

b) 显示变量的输出

```
ft_min_word_len                                   | 1 
```

c) 触发以下查询：

```
mysql> SELECT name,email FROM jos_users WHERE MATCH (email) AGAINST ('a@b.com') limit 1;
 +--------+---------+
 | name   | email   |
 +--------+---------+
 | kap | a@b.com |
 +--------+---------+
 1 row in set (0.00 sec) 
```

希望这会有所帮助。

〜K

* * *

我认为您需要更改**ft_min_word_len**

如[MySQLdoc 微调中所述](http://dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html)

> 要索引的单词的最小和最大长度由 ft_min_word_len 和 ft_max_word_len 系统变量定义。（请参阅第 5.1.4 节，“服务器系统变量”。）默认最小值是四个字符；默认最大值取决于版本。如果更改任一值，则必须重建 FULLTEXT 索引。例如，如果您想搜索三个字符的单词，您可以通过将以下行放在选项文件中来设置 ft_min_word_len 变量：
> 
> [mysqld] **ft_min_word_len=3** 然后重新启动服务器并重建 FULLTEXT 索引。请特别注意此列表后面的说明中有关 myisamchk 的注释。

# javascript - 在javascript中遍历一棵树

> ID：15918012
> 
> 赞同：0
> 
> 时间：2013-04-10T05:52:50.063
> 
> 标签：javascript

我在javascript中有一个变量，如下所示：

```
var treeNode = [{
    "id": "T1"
  }, {
    "id": "T2",
    "children": [{
        "id": "T3"
      }, {
        "id": "T4"
      }, {
        "id": "T5",
        "children": [{
            "id": "T6"
          }, {
            "id": "T7"
          }, {
            "id": "T8"
          }
        ]
      }, {
        "id": "T9"
      }, {
        "id": "T10"
      }
    ]
  }, {
    "id": "T11"
  }, {
    "id": "T12"
  }
]; 
```

节点 t3,t4,t5,t6,t7,t8,t9,t10 是节点 t2 的子节点。

每个节点都有一个 deactivate 的链接。当点击 deactivate 两个活动的链接并删除 create。在图片中提到：

![在此处输入图像描述](https://i.stack.imgur.com/5hlhy.png)

我想在父节点的所有子节点上创建相同的活动和删除链接。例如，如果我单击 T5 的停用链接，那么活动和删除链接也将显示在 T6、T7、T8 上，如果我单击 T2 的停用链接然后激活和删除链接将显示在 T3、T4、T5、T6、T7、T8、T9、T10 上

我尝试了以下递归代码。但我认为这不是正确的方法。请建议。

```
var objTreeNode = eval(treeNode);
trav(objTreeNode);

function trav(TreeNodeObj){
    var i=0;
    for (i=0;i<TreeNodeObj.length;i++){
        if(!TreeNodeObj[i].children){
            if(objID==TreeNodeObj[i].id(){ //if click on T2 then get T2 as objID
                document.getElementById('span_'+objID).innerHTML = '<a href="javascript:activate(\'' + objID + '\');">Activate</a>    <a href="javascript:deleteNode(\'' + objID
                Delete</a>';
            }
        }
        else{

            childObj = TreeNodeObj[i].children;

            trav(objTreeNode)
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:06:29.867

你的遍历代码是错误的，基本的遍历应该是这样的

```
function trav(obj) {
    // do something with obj

    //traverse through the children and call trav for each child
    if (obj.children) {
        for (i = 0; i < obj.children.length; i++) {
            trav(obj.children[i])
        }
    }

} 
```

我假设在停用项目期间，您还想停用其所有子项，在这种情况下尝试类似

```
var treeMap = {};
for (i = 0; i < TreeNodeObj.length; i++) {
    var obj = TreeNodeObj[i];
    treeMap[obj.id] = obj;
}

function deactivate(obj) {
    if (typeof obj == 'string') {
        obj = treeMap[obj];
    }
    document.getElementById('span_' + obj.id).innerHTML = '<a href="javascript:activate(\''
            + obj.id
            + '\');">Activate</a>    <a href="javascript:deleteNode(\''
            + obj.id + 'Delete</a>';

    if (obj.children) {
        for (i = 0; i < obj.children.length; i++) {
            deactivate(obj.children[i])
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:06:47.013

您的递归代码应该是[这样的](http://jsfiddle.net/6xLq2/)：

```
function trav(node) {

    var i;

    //deactivate target node
    console.log('Deactivating node id: '+node.id);

    //do the same to it's children
    if(node.children){
        for(i=0;i<node.children.length;i++){
          trav(node.children[i]);  
        } 
    }

}

console.log('Kill T1');
trav(objTreeNode[0]); //T1

console.log('Kill T2');
trav(objTreeNode[1]); //T2

console.log('Kill T5');
trav(objTreeNode[1].children[2]); //T5 
```

只需用您的操作换出指示停用的`console.log`部分即可。`trav`该示例显示了在控制台中定位的正确节点（按`F12`）

# sql-server - 列的唯一值

> ID：15918021
> 
> 赞同：-3
> 
> 时间：2013-04-10T05:53:32.867
> 
> 标签：sql-server, sql-server-2008

我的表如下所示，我需要使用 colC 的第一个值来获取 colA 和 colb 的唯一值

```
ID    ColA   ColB   ColC
1      A1     B1    c1
2      A1     B1    c2
3      A2     B2    c3
4      A2     B2    c4 
```

预期结果

```
A1  B1   C1
A2  B2   c3 
```

对此有任何帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T05:54:56.180

只需使用`MIN()`which 是一个聚合函数并将记录分组`ColA and ColB`

```
SELECT  ColA, ColB, MIN(ColC) ColC
FROM    TableName
GROUP   BY ColA, ColB 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/afdf3/1)

**更新 1**

```
WITH records
AS
(
    SELECT  ID, ColA, ColB, ColC,
            ROW_NUMBER() OVER (PARTITION BY ColA, ColB ORDER BY ID) rn
    FROM    TableName
)
SELECT  ColA, ColB, ColC
FROM    records
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/afdf3/2)

# ruby-on-rails - IE 8 问题与 ' &

> ID：15918025
> 
> 赞同：4
> 
> 时间：2013-04-10T05:54:05.733
> 
> 标签：ruby-on-rails, internet-explorer

我在本地系统中运行了 ruby​​ on rails 程序并且我使用`html_safe`了标签，现在`&amp;` `&apos;`在 FF、chrome 中不存在，但仅在 IE 8 中存在

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T07:17:23.623

在浏览器中，编号的 HTML 实体比命名实体更受支持。

使用以下编号的实体：

`'` → `&#39;`

`&`→ `&#38;`

# javascript - Gmaps API v3 -> infoWindow 内容未显示

> ID：15918033
> 
> 赞同：3
> 
> 时间：2013-04-10T05:54:26.017
> 
> 标签：javascript, google-maps, maps, infowindow

我在我的网站上使用 Google Maps API v3 并尝试显示标记数组中的标记。

以下是相关代码：

```
var map;
var markersArray = [];
var infowindow;
var marker; 
```

然后我将循环中的标记添加到数组中，调用以下函数

```
function addMarker(location, name) {
      marker = new google.maps.Marker({
      position: location,
      map: map,
      company: name,
      title: name
   });
   markersArray.push(marker);
} 
```

然后我尝试使用此功能显示标记，这就像一个魅力：

```
function showOverlays() {
   if (markersArray) {
      for (var i in markersArray) {
         markersArray[i].setMap(map);
         google.maps.event.addListener(markersArray[i], 'click', function () {
         infowindow.setContent('<div style="height:300px; color:black">' + this.title +     '</div>');
         infowindow.open(map, this);
         });
      }
   }
} 
```

现在出现了我的问题：infoWindows 的内容没有显示出来。它打开了，但没有显示任何内容......如果我在其中放置一个 300px 高的 div，则 infoWindow 实际上会正确调整大小......但没有显示任何内容。

我已经在网上上下搜索并尝试摆弄它，但无济于事。

有没有人经历过这种情况并可能给我一个关于如何解决这个问题的提示？

提前致谢！

克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T20:14:15.480

我刚刚发现错误！

我已经使用 CSS 设置了父 div（地图画布所在的 DIV）...并将 z-index 设置为 11。显然这阻止了 infowindow 的内容位于顶部...

希望能帮助一些可能犯过同样“错误”的人:)

感谢 kevmc 提供帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:10:15.253

我认为标记对象没有标题属性，您需要使用以下方法检索它`getTitle()`：

```
function showOverlays() {
   if (markersArray) {
      for (var i in markersArray) {
         markersArray[i].setMap(map);
         google.maps.event.addListener(markersArray[i], 'click', function () {
         infowindow.setContent('<div style="height:300px; color:black">' + this.getTitle() +     '</div>');
         infowindow.open(map, this);
         });
      }
   }
} 
```

# python - 如何创建国际化的谷歌应用引擎

> ID：15918043
> 
> 赞同：0
> 
> 时间：2013-04-10T05:55:03.433
> 
> 标签：python, django, google-app-engine, internationalization

我是谷歌应用引擎的新手，我想创建一个谷歌应用引擎应用程序。我正在关注这个[博客](http://blog.yjl.im/2009/02/using-django-i18n-in-google-app-engine.html)。

我正在一步一步地尝试。我坚持第二步，在那里我创建了 conf 包和相对的 settings.py。我收到`ImportError: No module named django.conf`错误。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:19:16.800

您阅读的链接很旧，可能已过时。以下文档可以帮助您在最新的应用引擎 python 环境中配置您的 django。

[https://developers.google.com/appengine/docs/python/cloud-sql/django?hl=zh-tw](https://developers.google.com/appengine/docs/python/cloud-sql/django?hl=zh-tw)

您可能需要先在 app.yaml 中添加以下行，看看它是否解决了 ImportError

```
libraries:
- name: django
  version: "1.4" 
```

# jquery - 使用 executeCommand 应用自定义 css 类或 id

> ID：15918051
> 
> 赞同：3
> 
> 时间：2013-04-10T05:55:47.763
> 
> 标签：jquery, css

我想构建自定义的所见即所得，就像带有代码标签的stackoverflow所见即所得。我创建代码按钮以应用写入 css 类的 css 样式，`mycode`并且我想使用 executeCommand 应用到按钮单击。我尝试了，但没有奏效。

CSS代码

```
.mycode{
    font-family:"Lucida Console", Monaco, monospace;
    background-color:#d1d1d1;
    padding:5px 10px;
} 
```

javascript代码

```
function iFrameOn(){
   richTextField.document.designMode = 'On';
}  

function iCode(){
   richTextField.document.execCommand("styleWithCSS", 0, false);
   richTextField.document.execCommand(".mycode", 0, true);
} 
```

和 HTML 代码

```
<body onLoad="iFrameOn();">        
  <input type="button" onClick="iCode()" value="Code">
<textarea style="display:none;" name="myTextArea" id="myTextArea" cols="100" rows="14"></textarea>
<iframe name="richTextField" id="richTextField" style="border:#000000 1px solid; width:700px; height:300px;"></iframe>
</body> 
```

任何建议我如何使用`executecommand()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:37:00.747

如果我了解您想要做什么：您想在单击按钮时应用自定义 CSS。

如果是这种情况，您必须以稍微不同的方式导入 CSS：

CSS：你可以看到在开始时应用的 CSS 是正常完成的，那些我不想更改的我使用`@import url`

```
<!--
    stylesheet
-->
<style type="text/css">@import url("stylesheets/default.css");</style> 
<style type="text/css">@import url("stylesheets/social.css");</style> 
<!-- cube style to allow CSS change -->
<style type="text/css">@import url("stylesheets/default-cube.css");</style> 

<link rel="stylesheet" href="stylesheets/blackandwhite.css" /> 
```

然后，当我想加载不同的 CSS 文件时，我更改了`attr`

jQuery

```
$('#changeco').click(function(){
    $("link").attr("href", "stylesheets/colour.css");
    return false;
}); 
```

有关工作示例，请参阅单击彩色/黑白框。

[http://portfolio.chrisloughnane.net/](http://portfolio.chrisloughnane.net/)

jsfiddle 不喜欢硬编码导入，所以我只是 inc。上面的链接。

# linq - 在实体上运行 LINQ 后，SaveChanges 方法会引发异常

> ID：15918054
> 
> 赞同：0
> 
> 时间：2013-04-10T05:56:11.450
> 
> 标签：linq, collections, entity-framework-5

这是我的课

```
public class Employee
{
     public virtual List<Salary> Salaries { get; set; }
     public bool CanAddSalary(Salary salary)
     {
          var count = (from x in Salaries where x.Month == salary.Month
                           && x.Year == salary.Year select x).Count();
          return count == 0;
     }
     public void AddSalary(Salary salary)
     {
          if(CanAddSalary(salary))
          {
              Salaries.Add(salary);
          }
     }
} 
```

1.  实体框架加载 Employee 和 Salaries 属性。
2.  CanAddSalary 方法只是检查以避免重复（没有修改 Salaries Collection 对吗？）。
3.  如果 CanAddSalary 返回 true，那么我调用 AddSalary 方法。
4.  我调用 Entity Framework Context.SaveChanges() 并抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:58:12.973

You should use `==` instead of `=` in your return statement, because otherwise you'll always get `false` from `CanAddSalary` method:

```
 public bool CanAddSalary(Salary salary)
 {
      var count = (from x in Salaries where x.Month == salary.Month
                       && x.Year == salary.Year select x).Count();
      return count == 0;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:09:45.383

你的薪水真的应该是

```
ICollection<Salary> 
```

并且执行 Any() 将比执行 Count() 更快

您的

```
return count = 0; 
```

是错误的，这意味着

```
Salaries.Add(salary); 
```

正在添加薪水集合中已经存在的薪水，这可能是例外

试试这个，如果你仍然遇到异常，那么也在这里发布，这样我们就可以看到错误

干杯斯图

```
public class Employee
{
 public virtual ICollection<Salary> Salaries { get; set; }
 public bool CanAddSalary(Salary salary)
 {
      return !(from x in Salaries where x.Month == salary.Month
                       && x.Year == salary.Year select x).Any();
 }
 public void AddSalary(Salary salary)
 {
      if(CanAddSalary(salary))
      {
          Salaries.Add(salary);
      }
 }
} 
```

# serial-port - 是否可以在从 Processing 接收数据的同时同时使用 Arduino 串行监视器？

> ID：15918058
> 
> 赞同：0
> 
> 时间：2013-04-10T05:56:33.737
> 
> 标签：serial-port, arduino, communication, processing, simultaneous

我正在尝试通过串行连接将一些数据从[处理](http://en.wikipedia.org/wiki/Processing_%28programming_language%29)发送到我的 Arduino，以便 Arduino 可以控制 LED 灯条。我可以在传输过程中查看串行监视器吗？

`Serial.println`在 Processing 与 Arduino 通信时，我不能使用任何语句（用于调试），这让我很恼火。每次我尝试我得到

> 串行端口“COM3”已在使用中。尝试退出任何可能正在使用它的程序。

当我同时查看串行监视器时，有没有办法进行这种串行通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:32:46.257

错误消息提到 COM3 的事实表明您正在 Windows 上运行。不幸的是，Windows 不允许多个进程同时连接到同一个串行端口。这与允许同时串行端口连接的基于 Unix 的系统不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:25:49.543

有一个名为[Portmon](http://technet.microsoft.com/en-us/sysinternals/bb896644.aspx)的应用程序可以让您监控 PC 上的串行通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T14:41:16.413

尝试 2 串行通信，想象一下你已经给了 USB，因为 COM3 有一个蓝牙设备连接到你的 arduino Tx 和 Rx 端口，让它成为 COM8。现在在 Arduino 中查看 COM3，在 Processing 中查看 COM8。我可以这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:26:20.150

使用 Linux 主机，我使用 Python 脚本发送命令，同时在串行监视器上监控结果。我似乎记得我必须先打开串行监视器，然后再运行另一个程序。

不幸的是，我无法帮助您在处理中实现这一目标。

# objective-c - NSManagedObject 与父对象的永久对象 ID

> ID：15918062
> 
> 赞同：0
> 
> 时间：2013-04-10T05:57:06.047
> 
> 标签：objective-c, core-data, nsmanagedobjectcontext

保存后，objectID 将是永久的。

但是，如果 managedObjectContext 有父级并且该父级没有保存怎么办。对象 ID 是永久的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:27:27.577

*只有当对象被保存到持久存储*时，对象 ID 才会成为永久的。

保存具有父上下文的托管对象上下文只会将更改推送到父上下文。在保存根上下文之前，这些更改不会保存到持久存储（并且对象 ID 会永久保存）。

# cmd - 在cmd中的txtfile中间添加一行

> ID：15918066
> 
> 赞同：1
> 
> 时间：2013-04-10T05:57:14.620
> 
> 标签：cmd

这是一个文本文件`txtfile.txt`

```
line1
line2
add after this line
line4
etc
etc 
```

我想创建一个批处理文件，它可以`add after this line`在用户输入信息后添加一行。保持`add after this line`原样。

例子：

```
enter info: asdf 
```

文件变成

```
line1
line2
add after this line
asdf
line4
etc
etc 
```

我认为基本过程是遍历文件复制它，当我找到该行时，添加该行，然后遍历其余部分。我想知道怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:30:08.393

```
@ECHO OFF
SETLOCAL
SET /p info="enter info : "
:: read addafter line
(
FOR /f "delims=" %%i IN (poison1.txt) DO (
SET addafter=%%i
FOR /f "delims=" %%n IN (' findstr /n "^" txtfile.txt') DO (
SET line=%%n
SETLOCAL ENABLEDELAYEDEXPANSION
SET line=!line:*:=!
ECHO(!line!
IF "!line!"=="!addafter!" ECHO(%info%
ENDLOCAL
)
)
)>newfile.txt

FC newfile.txt txtfile.txt

GOTO :eof 
```

其中`poison1.txt`包含一行

```
"A line !of! ] many < & >var*ied %poison ^ char;ac(ters) | like "," a\nd+so=on" 
```

并且 txtfile.txt 包含这一行。

*   `poison1.txt`从文件中读取该行到`addafter`
*   对于 add-to-me 文件中的每一行

    *   给行编号以捕获空行
    *   删除数字和第一个冒号（添加`FINDSTR`）
    *   逐字输出行
    *   如果该行与目标匹配，则输出额外的行

完毕！

# php - How to remember (save in cookie) action from user for a day?

> ID：15918072
> 
> 赞同：-1
> 
> 时间：2013-04-10T05:57:41.707
> 
> 标签：php, jquery, cookies

I have created some web-interface. And have created a little preload feature (pre-saver) for it, before logging in interface. Trouble is when user came to this interface he must see pre-saver every time - that's annoying. How to do the pre-saver appear one time in a day? As I understand I must use cookie for that, save some parameter in it? Can I do it via jQuery, or I must use php? I had never worked with cookie before, need your help. Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:59:37.163

In `PHP` for 1 day

```
setcookie("TestCookie",$value, time()+3600*24); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:03:22.650

这里有两个通过javascript设置cookie的现成函数。当心！Cookie 需要服务器才能工作。请改用 localStorage。这是链接：[javascript cookie](http://www.w3schools.com/js/js_cookies.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:03:07.830

好的，谢谢你们的帮助。我找到了一个简洁的资源，但是用俄语：[codeharmony.ru/materials/4](http://codeharmony.ru/materials/4)

它比以前看起来更容易..

# date - Excel VBA - 日期格式转换

> ID：15918073
> 
> 赞同：2
> 
> 时间：2013-04-10T05:57:54.910
> 
> 标签：date, excel, date-formatting, vba

我遇到了一项具有挑战性的任务，我无法使用许多解决方法来解决。

在一栏中我有日期，日期可以采用以下三种格式：

> 1) 简单的 dd/mm/yy
> 
> 2) dd/mm/yy 但周围可能有“之前、之后或大约”字样。其中任何一个，在这种情况下我们只需要删除这些单词。
> 
> 3) 数字格式的日期。像 1382923.2323 这样的长十进制值，但实际上我可以在转换后从中获取日期。

**文件上传到这里。[日期格式宏链接](https://docs.google.com/file/d/0B7gzonuQsNbvQXNzWFhta0ZqUWs/edit?usp=sharing "date_format_macro_link")**

我编写了以下代码，但它给出了错误的结果。

```
Sub FormatDates_Mine()
    ManualSheet.Activate
    ManualSheet.Cells.Hyperlinks.Delete
    ManualSheet.Cells.Interior.ColorIndex = xlNone
    ManualSheet.Cells.Font.Color = RGB(0, 0, 0)

    lastRow = ManualSheet.Range("A" & Rows.Count).End(xlUp).Row
    Col = "A"
    For i = 2 To lastRow
        Cells(i, Col) = Trim(Replace(Cells(i, Col), vbLf, "", 1, , vbTextCompare))

        If InStr(1, Cells(i, Col), "about", vbTextCompare) <> 0 Then
            Cells(i, Col) = Trim(Replace(Cells(i, Col), "about", "", 1, , vbTextCompare))
            Cells(i, Col).Interior.Color = RGB(217, 151, 149)
        End If

        If InStr(1, Cells(i, Col), "after", vbTextCompare) <> 0 Then
            Cells(i, Col) = Trim(Replace(Cells(i, Col), "after", "", 1, , vbTextCompare))
            Cells(i, Col).Interior.Color = RGB(228, 109, 10)
        End If

        If InStr(1, Cells(i, Col), "before", vbTextCompare) <> 0 Then
            Cells(i, Col) = Trim(Replace(Cells(i, Col), "before", "", 1, , vbTextCompare))
            Cells(i, Col).Interior.Color = RGB(228, 109, 10)
        End If

        DateParts = Split(Cells(i, Col), "/", , vbTextCompare)

        Cells(i, Col) = Format(Cells(i, Col), "dd/mm/yyyy")
    Next i

    Range("D:E").HorizontalAlignment = xlCenter
End Sub 
```

**文件上传到这里。[日期格式宏链接](https://docs.google.com/file/d/0B7gzonuQsNbvQXNzWFhta0ZqUWs/edit?usp=sharing "date_format_macro_link")**

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:46:43.903

这是你正在尝试的吗？我没有添加任何错误处理。我假设您不会偏离数据的现有格式。如果格式发生变化，那么您将不得不引入错误处理。

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long, i As Long
    Dim rng As Range
    Dim MyAr() As String

    Set ws = ThisWorkbook.Sheets("Data")

    With ws
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row

        Set rng = .Range("A2:A" & lRow)

        With rng
            '~~> Replace "After " in the entire column
            .Replace What:="After ", Replacement:="", LookAt:=xlPart, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False

            DoEvents

            '~~> Replace "About " in the entire column
            .Replace What:="About ", Replacement:="", LookAt:=xlPart, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False

            .NumberFormat = "dd/mm/yyyy"
        End With

        For i = 2 To lRow
            '~~> Remove the End Spaces
            .Range("A" & i).Value = Sid_SpecialAlt160(.Range("A" & i).Value)

            '~~> Remove time after the space
            If InStr(1, .Range("A" & i).Value, " ") Then _
            .Range("A" & i).Formula = Split(.Range("A" & i).Value, " ")(0)

            '~~> Convert date like text  to date
            .Range("A" & i).Formula = DateSerial(Split(.Range("A" & i).Value, "/")(2), _
                                                 Split(.Range("A" & i).Value, "/")(1), _
                                                 Split(.Range("A" & i).Value, "/")(0))
        Next i

    End With
End Sub

Public Function Sid_SpecialAlt160(s As String)
    Dim counter As Long

    If Len(s) > 0 Then
        counter = Len(s)
        While VBA.Mid(s, counter, 1) = " "
            counter = counter - 1
        Wend
        Sid_SpecialAlt160 = VBA.Mid(s, 1, counter)
    Else
        Sid_SpecialAlt160 = s
    End If
End Function 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/JhUVn.png)

# activex - npapi wrap multi control

> ID：15918076
> 
> 赞同：0
> 
> 时间：2013-04-10T05:57:58.227
> 
> 标签：activex, npapi, browser-plugin

I want to wrap some `activex dll` to `npapi`. An `ActiveX DLL` can contain many controls, just like the one I'm going to wrap.

Can a `npapi dll` contain many controls? I know the `npapi` control is working like:

```
x-application/x-... 
```

It just seems that the `npapi dll` can't wrap many controls, so I must split the controls in the `activex dll`, but I don't think it's a good idea because there are some public data structs.

Is it possible to have a `npapi dll` with multiple controls?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:02:26.643

是的，NPAPI 插件可以支持多种 mimetype，所有流行的插件实际上都不止一种（例如`about:plugins`在 Firefox 中检查）。

为插件指定 mimetype 的地方都支持指定多个 mimetype。
[`NPP_New()`](https://developer.mozilla.org/de/docs/NPP_New)并[`NPP_NewStream()`](https://developer.mozilla.org/de/docs/NPP_NewStream)接收`NPMIMEType`您可以检查的参数。

# git - 同时显示 git diff 和 git status

> ID：15918078
> 
> 赞同：2
> 
> 时间：2013-04-10T05:58:01.453
> 
> 标签：git, shell, unix, sh, zsh

我想要一种获取`less`git diff 和 git status 缓冲区的 pager-view () 的方法，以获得我工作更改状态的完整摘要。它有帮助，因为`git diff`单独将隐藏分阶段的更改，而`status`将能够突出显示。

我知道我可能可以做类似的事情

```
{ git status && git diff | cat } 
```

它基本上在这里连接输出，但这会导致`git diff`语法颜色下降。

我可能会使用`perl`，但我想使用一些整洁`sh`的`bash`或`zsh`技巧来连接这些东西，同时保持颜色完整。

另外，我的 git diff 使用

```
[pager]
    log = diff-highlight | less
    show = diff-highlight | less
    diff = diff-highlight | less 
```

所以也许我需要在它跳过使用的地方设置一些自定义的东西，`less`这样我就可以`less`在连接的输出上应用我的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:03:16.820

只需明确地与已经提交的内容进行比较：

```
git diff HEAD 
```

这将向您显示完整的差异，无论是否上演了什么。如果您*确实*想查看已上演和未上演的内容，则可以在连接之前明确请求颜色：

```
git status && git diff --color | cat 
```

请注意，这仍然会从`git status`命令中删除颜色。如果你也想要那种颜色，你可以利用 Git 在每个命令的基础上覆盖配置值的能力：

```
git -c color.ui=always status && git diff --color | cat 
```

# jquery - 通过ajax调用页面时jQuery不起作用

> ID：15918079
> 
> 赞同：0
> 
> 时间：2013-04-10T05:58:06.920
> 
> 标签：jquery, ajax

这是`index.html`页面

```
<head>
    <script src="js/jquery-1.3.js" type="text/javascript"></script>  
    <script src="js/jquery.easing.1.3.js" type="text/javascript"></script>  
    <script src="js/animated-menu.js" type="text/javascript"></script>  
    <script src="js/call.js" type="text/javascript"></script>    
    <script type="text/javascript" src="js/fade.js"></script>
</head>  

<body>
    <div class="header">         
        <div class="menu">
            <ul>  
                <li class="green" >  
                    <p><a href="index.html">Home</a></p>  
                    <p class="subtext">The front page</p>  
                </li>  
                <li class="yellow" onclick="showHint(1)">  
                    <p><a href="#">About</a></p>  
                    <p class="subtext">More info</p>  
                </li>  
                <li class="red" onclick="showHint(2)">  
                    <p><a href="#">Contact</a></p>  
                    <p class="subtext">Get in touch</p>  
                </li>  
                <li class="blue">  
                    <p><a href="#">Submit</a></p>  
                    <p class="subtext">Send us your stuff!</p>  
                </li>  
                <li class="purple">  
                    <p><a href="#">Terms</a></p>  
                    <p class="subtext">Legal things</p>  
                </li>  
            </ul>
        </div>
    </div> 
    <div class="content" id="content"></div>
</body> 
```

这是`contact.html`我通过 AJAX 加载的

```
<head>
    <script src="js/call.js" type="text/javascript"></script>
</head>

<body>
    <p>Rollover a menu item to expand it.</p>  
<h1>Hello Ajax</h1>    
</body> 
```

这是`fade.js`文件

```
$(document).ready(function() {
$("body").css("display", "none");
    $("body").fadeIn(2000);
}); 
```

最后是ajax调用

```
var XMLHttpRequestObject;
    if(window.XMLHttpRequest)
    {
        XMLHttpRequestObject=new XMLHttpRequest();
    }
    else if(window.ActiveXObject)
    {
        XMLHttpRequestObject=new ActiveXObject("Microsoft.XMLHTTP");
    }
    function showHint(ide) {
        if(XMLHttpRequestObject)
        {
            XMLHttpRequestObject.onreadystatechange=function() {
                if(XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200)
                {
                    document.getElementById("content").innerHTML=XMLHttpRequestObject.responseText;
                }
            }
            if(ide=="0")
            {
                XMLHttpRequestObject.open("GET","index.html",true);
            }
            else if(ide=="1")
            {
                XMLHttpRequestObject.open("GET","about_me.htm",true);
            }
            else if(ide=="2")
            {
                XMLHttpRequestObject.open("GET","contact.htm",true);
            }
        XMLHttpRequestObject.send();
    }
} 
```

问题是当我单独调用联系页面时，淡入淡出效果正在起作用。但是当我`contact.html`通过 AJAX 加载时，jQuery 效果不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:02:52.250

您还需要包含`contact.html`所有必要的库，如下所示：

```
<head>
    <script src="js/jquery-1.3.js" type="text/javascript"></script>  
    <script src="js/jquery.easing.1.3.js" type="text/javascript"></script>  
    <script src="js/animated-menu.js" type="text/javascript"></script>  
    <script src="js/call.js" type="text/javascript"></script>    
    <script type="text/javascript" src="js/fade.js"></script>
</head> 
```

编辑：

首先你应该学习如何使用 jQuery 的 ajax：[http](http://api.jquery.com/category/ajax/) ://api.jquery.com/category/ajax/ ，如果可以的话，还包括最新版本的库。

其次，我认为您希望在每次 ajax 调用后对身体产生淡入效果。在这种情况下，在contact.htm 中，您只需要获取正文中的内容。一切都放在下面：

```
<html>
<head>
    <script src="js/jquery-1.3.js" type="text/javascript"></script>  
     <script src="js/jquery.easing.1.3.js" type="text/javascript"></script>  
     <script src="js/animated-menu.js" type="text/javascript"></script>    
    <script type="text/javascript">
    var XMLHttpRequestObject;
    if(window.XMLHttpRequest)
    {
        XMLHttpRequestObject=new XMLHttpRequest();
    }
    else if(window.ActiveXObject)
    {
        XMLHttpRequestObject=new ActiveXObject("Microsoft.XMLHTTP");
    }
    function showHint(ide) {
        if(XMLHttpRequestObject)
        {
            XMLHttpRequestObject.onreadystatechange=function() {
                if(XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200)
                {
                    document.getElementById("content").innerHTML=XMLHttpRequestObject.responseText;

                    $("body").css("display", "none");
                    $("body").fadeIn(2000);
                }
            }
            if(ide=="0")
            {
                XMLHttpRequestObject.open("GET","index.html",true);
            }
            else if(ide=="1")
            {
                XMLHttpRequestObject.open("GET","about_me.htm",true);
            }
            else if(ide=="2")
            {
                XMLHttpRequestObject.open("GET","contact.htm",true);
            }
        XMLHttpRequestObject.send();
    }
}
    </script>    
    <script type="text/javascript">
    $(document).ready(function() {
$("body").css("display", "none");
    $("body").fadeIn(2000);
});
    </script>
</head>  

<body>
    <div class="header">         
        <div class="menu">
            <ul>  
                <li class="green" >  
                    <p><a href="index.html">Home</a></p>  
                    <p class="subtext">The front page</p>  
                </li>  
                <li class="yellow" onclick="showHint(1)">  
                    <p><a href="#">About</a></p>  
                    <p class="subtext">More info</p>  
                </li>  
                <li class="red" onclick="showHint(2)">  
                    <p><a href="#">Contact</a></p>  
                    <p class="subtext">Get in touch</p>  
                </li>  
                <li class="blue">  
                    <p><a href="#">Submit</a></p>  
                    <p class="subtext">Send us your stuff!</p>  
                </li>  
                <li class="purple">  
                    <p><a href="#">Terms</a></p>  
                    <p class="subtext">Legal things</p>  
                </li>  
            </ul>
        </div>
    </div> 
    <div class="content" id="content"></div>
</body> 
</html> 
```

您的contact.html：

```
<p>Rollover a menu item to expand it.</p> 
```

# actionscript-3 - How to make TextField gutter less?

> ID：15918082
> 
> 赞同：1
> 
> 时间：2013-04-10T05:58:18.770
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

I am looking for a solution to make `TextField` Object gutter less such that the `getBounds()` and `getColorBounds()` give the same rectangle. In short the `Rectangle` returned by `getBounds()` must start from first character's left-most pixel and end at last character's right-most pixel.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:39:00.380

使用 textWidth 和 textHeigth 属性来做你想做的事，这些值正好包含你所需要的。

# java - java - 关于“this”语句的解释

> ID：15918085
> 
> 赞同：-4
> 
> 时间：2013-04-10T05:58:23.097
> 
> 标签：java

我是Java新手，对以下程序的结果感到非常困惑，有人可以详细说明交换场景吗？

另外，有人可以给我几个关于`this`关键字的例子吗？

```
class P {
    int i;

    void test1(P p1, P p2) {

        int i = p1.i;
        p1.i = p2.i;
        p2.i = i;;
    }

    void test2(P p1) {

        int i = this.i;
        this.i = p1.i;
        p1.i = i;
    }

    public static void main(String[] args) {
        P p1 = new P();
        P p2 = new P();
        p1.i = 1;
        p2.i = 2;
        p1.test1(p1, p2);
        System.out.println(p1.i + "," + p2.i);
        p1.test(p2);
        System.out.println(p1.i + "," + p2.i);
    }
} 
```

> ```
> //Output
> 2.1
> 1.2 
> ```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:17:34.740

首先，[**不是**](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)[`this`方法。它是一个**关键字**。](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html) ****它总是引用它被引用的当前对象。它的用法有不同的上下文：****

 *****   如果在*字段*名称前面使用它，则它引用特定于该对象的字段名称。

    下面的例子。 `fooField`在构造函数中会隐藏该字段，但由于我们使用`this`，我们指的是特定`Foo`对象的字段。

    ```
    public class Foo {
        private String fooField;

        public Foo(String fooField) {
            this.fooField = fooField;
        }
    } 
    ```

    *除非必须*，否则不要使用它。它可能导致混乱和不必要的模棱两可的代码。

*   如果它被用作*构造*函数的一部分，那么它会调用类中的另一个构造函数。这称为显式构造函数声明。的用法`this`必须是构造函数声明中的第一个调用。

    下面的例子。这里我有两个不同的构造函数`Point`，我可以通过调用不带参数调用一个`this(0, 0, 0)`。

    ```
    public class Point {
        private int x, y, z;

        public Point() {
            this(0, 0, 0);
        }

        public Point(int x, int y, int z) {
            this.x = x;
            this.y = y;
            this.z = z;
        }
    } 
    ```

现在，关于为什么你的程序会产生那个输出。

`test1`用它的变量做了一些有趣的事情......你需要左右两侧（为了消除歧义）。

*   您为被调用者分配左侧的值。// P1.i = 1
*   左边现在取右边的值。// P1.i = 2
*   权利采用被调用者的价值。// P2.i = 1

在上面的例子中，被调用者和左边是同一个对象。因此，您会得到输出 2,1。

`test2`略有不同。您只有一个论点，因此它将是“论点”（为了消除歧义）。

*   您明确地将被调用者的值重新分配给它自己。// P1.i = P1.i == 2
*   您将参数的值分配给被调用者。// P1.i = 1
*   您将被调用者的值分配给参数。// P2.i = 2

因此，您的输出结果为 1,2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:19:16.710

this 关键字引用类的当前实例。您还可以使用“this”创建在每次调用后返回对象的方法。这对于类配置器很有用。

使用示例：

```
public class SomeCLass {

//some fields

//some constructors

    public SomeClass setWidth(width) {
        this.width = width;
        return this;
    }

    public SomeClass setLength(length) {
        this.length = length;
        return this;
    }
}

public class Execute {

    public static void main(String[] args) {
        (new SomeClass()).setWidth(10).setLength(15);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:59:49.033

**`this` is a reference to the *current object***

The most common reason for using the `this` keyword is because a field is shadowed by a method or constructor parameter.

You can use `this` as a constructor -> `this()`

**`this()` is a reference to another constructor in the same class**

```
public Rectangle() {
    this(0, 0, 0, 0); // calls the constructor below
}

public Rectangle(int width, int height) {
    this(0, 0, width, height);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T06:01:21.983

```
void test1(P p1, P p2) {    
        int i = p1.i;
        p1.i = p2.i;
        p2.i = i;;
} 
```

此方法可以是`static`因为它只是交换值而不依赖于实例。

```
void test2(P p2) {    
        int i = this.i;
        this.i = p2.i;
        p2.i = i;
} 
```

这里`this.i`指向您调用`test2`方法的对象，在您的情况下，它是`p1`并且您`p2`作为参数传递，它也执行相同的交换操作。

因此，这两种方法都做同样的事情：

您从值 1,2 -- `After test1()`--> 2,1 -- `After test2()`--> 1,2 开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T06:16:25.713

'this' 是一个指向自身的指针。有时一个方法需要引用调用它的对象。为此，Java 定义了“this”关键字。此外，“this”可以在任何方法中用于引用当前对象。

例如。当我们有一个方法 displayName()

```
displayName()
{
 System.out.println("Name: " + name);
} 
```

现在我们用对象 f1 调用它

```
f1.displayName() //compiler converts this thing in displayName(f1) 
```

在 displayName() 方法中，它像这样收集对象 f1

```
displayName(this)
{
 System.out.println("Name: " + this.name); //here this.name means its referring to class member variable.
} 
```****

# ruby - 为什么我在 Ruby 1.8.7 中得到“未定义的方法 `take' for Array”？

> ID：15918086
> 
> 赞同：0
> 
> 时间：2013-04-10T05:58:23.520
> 
> 标签：ruby, ruby-1.8

我不确定为什么会收到此错误，因为它似乎确实是 Ruby 1.8.7 中的一个数组。

以下是相关代码：

```
rows.each_with_index do |row, index|
    if (index == 0) then
        log "Found the following slow statements (took over #{slow_query_threshold} seconds):"
    end
    row_data = row.strip().split('|')
    connections = row_data[1].split(', ')
    n_more = '... and #{connections.length - 3} more' if connections.length > 3
    log %{[#{row_data[0]}] on #{connections.take(3).join(', ')} #{n_more}}
end 
```

这给了我这个错误：

```
2013-04-10T05:36:45.04Z : Found the following slow statements (took over 5.0 seconds):
/myscript.rb:111: undefined method `take' for ["App15(28.39sec)"]:Array (NoMethodError)
     from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `each_with_index' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:03:54.433

您必须在 1.8.6 上运行。升级，或[`require 'backports/1.8.7/enumerable/take'`](http://github.com/marcandre/backports)

# objective-c - 为什么 IB 有时不会向视图控制器添加子视图

> ID：15918088
> 
> 赞同：0
> 
> 时间：2013-04-10T05:58:33.797
> 
> 标签：objective-c, xcode, uiview, uiviewcontroller, interface-builder

有时 IB 根本不允许您将视图作为子视图添加到 a`UIViewController`中，如此处所示![在此处输入图像描述](https://i.stack.imgur.com/Xuv8Y.png)

如果我从对象库中拖动 UIViewController 并尝试将其嵌入到邮箱视图控制器中。它不会突出显示，但是如果我尝试将它添加到底部的通用视图控制器中它会正常工作（可以Mailbox View Controller 有一个 Customer 类*MailboxViewController*有什么关系吗？）

我很确定我可以以编程方式执行此操作（这是我接下来要尝试的），但我想知道是否有这样做的原因（以及是否有解决方法）。

**更新：** 这就是我想要完成的事情：我正在按照[此处](https://stackoverflow.com/a/4128659/766570)的步骤在搜索栏下方实现一个分段视图控制器，就像在 iphone[邮件应用程序](https://stackoverflow.com/questions/9169095/custom-uisegmentedcontrol-like-the-scope-control-in-uisearchbar)中一样。但是我一直收到一个错误，说视图只能属于一次只有一个视图控制器。所以我要做的基本上是创建一个单独的视图控制器，将其`MailboxViewController`作为插座引用，使我的搜索区域的包含视图成为这个新视图控制器的视图（这是我'm 卡住了），最后使`searchContentsController`属性`UISearchDisplayController`引用这个新视图控制器的视图。（如果这听起来令人困惑，我知道确实如此，请参考这个[答案](https://stackoverflow.com/a/4128659/766570)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:28:46.823

从您的屏幕截图中，`view`您的邮箱视图控制器的属性是一个表格视图。

界面构建器中的表视图不支持将任意视图作为子视图拖放到它上面——它会在运行时将它们放在哪里？在 IB 中，表格没有内容，它只是具有单元格的视觉表示，让您知道它是什么。

你还没有说你要设置什么，所以我不能提供任何额外的帮助。以编程方式将子视图添加到表格视图可能不会给您带来您想要的效果 - 表格视图是 UIScrollView 子类，因此您的新视图将移出屏幕或被添加单元格的表格视图覆盖。

# sublimetext2 - 将空白点的外观更改为更大/更暗的东西

> ID：15918092
> 
> 赞同：0
> 
> 时间：2013-04-10T05:58:54.053
> 
> 标签：sublimetext2, sublimetext

我正在寻找一种将空白灰点的外观更改为更大和更暗的方法（**不**改变背景颜色）——类似于 UltraEdit（见截图）。

我已经阅读了有关该问题的所有流行主题，并且尝试了所有流行的修改（例如插件和/或更改语言和主题文件），但我还没有找到使灰点变暗的方法或让它更大。

我已经尝试过这个相关线程中提到的所有内容，包括其中列出的链接： [Sublime Text 2: how to change white space characters color?](https://stackoverflow.com/questions/13297068/sublime-text-2-how-to-change-white-space-characters-color)

* * *

[![截屏](https://i.stack.imgur.com/YP838.png)](https://i.stack.imgur.com/YP838.png)
[（来源：[lawlist.com](http://www.lawlist.com/images/dot_comparrison.png)）]

* * *

.tm主题

```
<!-- BEGIN whitespace / tab definitions -->
<dict>
  <key>scope</key>
  <string>lawlist.tab</string>
  <key>settings</key>
  <dict>
    <key>fontStyle</key>
    <string></string>
    <key>foreground</key>
    <string>#FF0000</string>
    <key>background</key>
    <string>#FFFFFF</string>
  </dict>
</dict>
<dict>
  <key>scope</key>
  <string>lawlist.space</string>
  <key>settings</key>
  <dict>
    <key>fontStyle</key>
    <string></string>
    <key>foreground</key>
    <string>#000000</string>
    <key>background</key>
    <string>#FFFFFF</string>
  </dict>
</dict>
<!-- END whitespace / tab definitions --> 
```

* * *

.tmLanguage

```
<!-- BEGIN whitespace / tab definitions -->
<dict>
  <key>match</key>
  <string>\t+</string>
  <key>name</key>
  <string>lawlist.tab</string>
</dict>

<dict>
  <key>match</key>
  <string> +</string>
  <key>name</key>
  <string>lawlist.space</string>
</dict>
<!-- END --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T05:26:50.637

这个问题没有解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T05:18:59.467

有人在ST论坛上撞了一个关于着色空白的帖子，我想到了这个帖子。你也可以看到它，但以防万一，我会在这里发布。基本上，他们修改了 tmLanguage 文件，为前导空格提供了新的范围。然后他们给它涂上颜色。

[https://github.com/ckovey/sublime-whitespace-coloring](https://github.com/ckovey/sublime-whitespace-coloring)

# qt - 使用 QDesktopServices 使用应用程序打开多个文件

> ID：15918093
> 
> 赞同：2
> 
> 时间：2013-04-10T05:58:55.017
> 
> 标签：qt

目前，用户可以在我的 Qt 应用程序上选择一首歌曲并使用他的默认媒体播放器播放它。我已经使用 QDesktopServices::openUrl() 实现了这一点。

但是我希望用户能够选择多首歌曲并将它们加入他的媒体播放器。在当前的实现中，一旦用户选择了第二首歌曲，第一首歌曲就停止播放，而第二首歌曲开始播放。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:13:19.887

恐怕，`QDesktopServices::openUrl()`只能使用排队歌曲无法完成。我看到了两种主要方法：

1.  您可以调整播放器以将所有歌曲排入队列，打开方式`QDesktopServices::openUrl()`（实际上相当于在文件管理器中双击）。

2.  我认识的大多数玩家都有参数，这些参数告诉他们将列出的文件排入队列。例如，`deadbeef`可以使用参数启动`--queue`。您可以使用`QProcess::startDetached`参数启动播放器。

在这两种方式中，您都需要知道您正在使用的确切播放器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:12:59.667

如果您的播放器支持 MPRIS（如果它是一个有望集成到现代 Unix 桌面的媒体播放器，它确实支持），用于轨道列表操作的 D-BUS MPRIS 接口的[addTrack方法应该对您有所帮助。](http://specifications.freedesktop.org/mpris-spec/latest/Track_List_Interface.html)您可能需要调用`QDesktopServices::openUrl`第一个文件以确保在调用之前播放器正在运行。

# javascript - Travis CI with Amazon Elastic Beanstalk

> ID：15918098
> 
> 赞同：11
> 
> 时间：2013-04-10T05:59:20.973
> 
> 标签：javascript, amazon-elastic-beanstalk, travis-ci

I have a web application [http://codefu-5euzxjdg6b.elasticbeanstalk.com/codeKungfu.jsp](http://codefu-5euzxjdg6b.elasticbeanstalk.com/codeKungfu.jsp) that is currently being hosted on Amazon Elastic Beanstalk with a Java backend.

The flow process that I have in mind is this:

*   Commit to GitHub repo
*   Travis CI is triggered. Run unit tests.
*   All test cases pass. Deploy on Amazon elastic beanstalk.

Currently, I am stuck at Step 3, where I am attempting to link up Travis CI with Amazon elastic beanstalk.

I have searched for information online with regards to this but was unable to find anything that seems to be useful. The best information source that I obtained was: [https://superuser.com/questions/510593/elastic-beanstalk-rails-application-with-git-source-and-deploy-hooks](https://superuser.com/questions/510593/elastic-beanstalk-rails-application-with-git-source-and-deploy-hooks)

I understand that Travis CI is able to deploy to Google App Engine directly, and thus I believe that there should be a solution for Amazon Elastic Beanstalk as well.

Could anyone kindly point me to resources that could potentially help me solve this issue?

Thanks!

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-12-09T04:43:46.990

自 2014 年 12 月 9 日起，Elastic Beanstalk 部署未包含在 Travis CI 部署文档中： http: [//docs.travis-ci.com/user/deployment/](http://docs.travis-ci.com/user/deployment/)

然而，Travis CI 已经开源了他们的部署工具：**dpl**和 Elastic Beanstalk 部署是一个持续的开发： [https ://github.com/travis-ci/dpl](https://github.com/travis-ci/dpl)

最好参考源代码本身以了解如何进行部署。

目前，这是我在 .travis.yml 中的部署设置的工作示例：

```
deploy:
  provider: elasticbeanstalk
  access_key_id: <AWS Access Key>
  secret_access_key:
    secure: <secure secret access key>
  region: <region, eg. ap-southeast-1>
  app: <app name>
  env: <environment name>
  bucket_name: <S3 bucket name that is used by elastic beanstalk>
  on:
    repo: <repo name>
    branch: develop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:28:29.367

你最终在这方面取得了进展吗？我认为 Travis 的加密变量应该可以存储密钥或您的 AWS 凭证。然后，您可以将这些凭证与 AWS API 一起使用，在您的 .travis.yml after_script 部分中自行部署。

# c++ - Why is my program crashing in boost::enable_shared_from_this<>/boost::shared_ptr<>?

> ID：15918099
> 
> 赞同：3
> 
> 时间：2013-04-10T05:59:22.520
> 
> 标签：c++, boost, c++11, shared-ptr

I'm trying to hunt down why a program is crashing in `shared_ptr`.

```
#0  0x00007fff90723212 in __pthread_kill ()
#1  0x00007fff93415b54 in pthread_kill ()
#2  0x00007fff93459dce in abort ()
#3  0x00007fff8a0519eb in abort_message ()
#4  0x00007fff8a04f39a in default_terminate ()
#5  0x00007fff930bf887 in _objc_terminate ()
#6  0x00007fff8a04f3c9 in safe_handler_caller ()
#7  0x00007fff8a04f424 in std::terminate ()
#8  0x00007fff8a05058b in __cxa_throw ()
#9  0x0000000100057cbc in boost::throw_exception<boost::bad_weak_ptr> (e=@0x1002c5b88) at throw_exception.hpp:66
#10 0x0000000100057bf4 in boost::detail::shared_count::shared_count (this=0x1002c5d00, r=@0x100304180) at shared_count.hpp:509
#11 0x0000000100057b7d in boost::detail::shared_count::shared_count (this=0x1002c5d00, r=@0x100304180) at shared_count.hpp:511
#12 0x000000010004ad14 in boost::shared_ptr<myns::(anonymous namespace)::MySharedFromThisClass>::shared_ptr<myns::(anonymous namespace)::MySharedFromThisClass> (this=0x1002c5cf8, r=@0x100304178) at shared_ptr.hpp:220
#13 0x000000010004acad in boost::shared_ptr<myns::(anonymous namespace)::MySharedFromThisClass>::shared_ptr<myns::(anonymous namespace)::MySharedFromThisClass> (this=0x1002c5cf8, r=@0x100304178) at shared_ptr.hpp:223
#14 0x000000010004a9b4 in boost::enable_shared_from_this<myns::(anonymous namespace)::MySharedFromThisClass>::shared_from_this (this=0x100304178) at enable_shared_from_this.hpp:49 
```

MySharedFromThisClass is defined as:

```
class MySharedFromThis : public boost::enable_shared_from_this<MySharedFromThis> {
    // ....
}; 
```

And the instance that was being passed around was defined like:

```
auto myKlass = std::make_shared<MySharedFromThis>(); 
```

And being copied around via:

```
void myFunction(::boost::shared_ptr<MySharedFromThis> myKlass) {
  myFunction(shared_from_this());
} 
```

What gives? Everything compiles with no warnings or errors, but things very clearly segfault in not so pleasant ways.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T05:59:22.520

I'm posting my own answer because this chunk of code compiled without any warnings or errors and took a fair amount of effort to track down.

It should be pretty obvious based on the example above when looking at this line:

```
auto myKlass = std::make_shared<MySharedFromThis>(); 
```

myKlass is of type `std::shared_ptr<MySharedFromThis>`, not `boost::shared_ptr<MySharedFromThis>`. Change `std::make_shared<>` to `boost::make_shared<>` and everything works as expected/intended.

There are two possible things leading to this crash:

1.  The call to `shared_from_this()` in myFunction() was being called without an existing `::boost::shared_ptr<>` already existing. Instead, what had happened was a `std::shared_ptr<>` was created, which has a different ABI that a `boost::shared_ptr<>`. Notably a `libboost_thread-mt.dylib` expects a `boost::enable_shared_from_this<>` class and not a `std::enable_shared_from_this<>` class.
2.  According to the [enable_shared_from_this<> documentation](http://www.boost.org/doc/libs/release/libs/smart_ptr/enable_shared_from_this.html), the prerequisite was not satisfied.

    > Requires: enable_shared_from_this must be an accessible base class of T. *this must be a subobject of an instance t of type T . There must exist at least one shared_ptr instance p that owns t.

    Instead what had happened was there was a `std::shared_ptr<>` instance, but not a `boost::shared_ptr<>` instance.

At least that's my understanding of what was going on. I think #1 is the real problem leading to the segfault, and #2 would have been a problem sooner or later (though I'm not entirely convinced).

# sql - SQL 查询：检索具有不同条件的列

> ID：15918106
> 
> 赞同：1
> 
> 时间：2013-04-10T05:59:38.450
> 
> 标签：sql, sql-server

我需要从不同的表中检索具有不同条件的多个列。我有如下

```
SELECT
(SELECT COUNT(*) FROM Table1 WHERE Price >= 0 Price < 10) AS 'Group1',
(SELECT COUNT(*) FROM Table1 WHERE Price >= 10 AND Price < 20) AS 'Group2',
(SELECT COUNT(*) FROM Table1 WHERE Price >= 20 AND Price < 30) AS 'Group3',
(SELECT COUNT(*) FROM Table2 WHERE Price >= 0 Price < 10) AS 'Group4',
(SELECT COUNT(*) FROM Table2 WHERE Price >= 10 AND Price < 20) AS 'Group5',
(SELECT COUNT(*) FROM Table2 WHERE Price >= 20 AND Price < 30) AS 'Group6' 
```

只是想知道有没有更好的方法来为上述条件重构更好的查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:01:56.457

有，

```
SELECT  SUM(CASE WHEN Price >= 0 Price < 10 THEN 1 END) AS 'Group1',
        SUM(CASE WHEN Price >= 10 AND Price < 20 THEN 1 END) AS 'Group2',
        SUM(CASE WHEN Price >= 20 AND Price < 30 THEN 1 END) AS 'Group3',
        SUM(CASE WHEN Price >= 0 Price < 10 THEN 1 END) AS 'Group4',
        SUM(CASE WHEN Price >= 10 AND Price < 20 THEN 1 END) AS 'Group5',
        SUM(CASE WHEN Price >= 20 AND Price < 30 THEN 1 END) AS 'Group6'
FROM    table2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:09:22.310

将 table1 添加到 J W 的上述精彩查询中。

```
SELECT  SUM(CASE WHEN T1.Price >= 0 Price < 10 THEN 1 END) AS 'Group1',
        SUM(CASE WHEN T1.Price >= 10 AND Price < 20 THEN 1 END) AS 'Group2',
        SUM(CASE WHEN T1.Price >= 20 AND Price < 30 THEN 1 END) AS 'Group3',
        SUM(CASE WHEN T2.Price >= 0 Price < 10 THEN 1 END) AS 'Group4',
        SUM(CASE WHEN T2.Price >= 10 AND Price < 20 THEN 1 END) AS 'Group5',
        SUM(CASE WHEN T2.Price >= 20 AND Price < 30 THEN 1 END) AS 'Group6'
FROM    table1 T1, table2 T2 
```

# javascript - 将CSS纵横比设置为宽度的倒数？

> ID：15918108
> 
> 赞同：2
> 
> 时间：2013-04-10T05:59:48.153
> 
> 标签：javascript, jquery, css

我在使用 CSS 布局时遇到了问题——关键是我希望一个盒子随着宽度的减小而增加高度。

现在，我从元素的“固定纵横比”技术开始——将高度设置为 0，将顶部填充设置为百分比，例如 50%。内边距值计算为父元素*宽度*的 50%（不是您可能猜到的高度），因此您最终得到的是一个具有固定 2:1 纵横比的框，否则大小是可变的.

下一步（在我的半生不熟的解决方案中）是修改填充百分比，使其随着宽度的减小而增加（宽度为页面的 100%）。我很确定这不会在直接的 CSS 中发生，并且我很高兴在调整窗口大小时使用一小段 Javascript 来更新值。

谁能帮我用公式来调整与宽度成反比的百分比？

其他一些注意事项：

*   该元素是一个“间隔” - 它是不可见的，所以如果它需要两个元素等，那没关系。
*   整个布局从 2500+ 像素宽到 320 像素宽都是流畅和响应的，所以我们没有可以使用的“最大值”（我不认为）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:43:09.363

也许 jQuery .resize() 函数可能会有所帮助？每当调整元素（或窗口）的大小时，它都会绑定一个函数。

例如，如果您希望元素的面积`#el`始终为 50,000 像素平方

```
$(window).resize(function() {
    area = 50000;
    width = $('#el').width();
    $('#el').height(Math.ceil(area/width));
    }); 
```

工作示例：http: [//jsfiddle.net/asifrc/T8HrW/embedded/result/](http://jsfiddle.net/asifrc/T8HrW/embedded/result/)

示例代码：http: [//jsfiddle.net/asifrc/T8HrW/](http://jsfiddle.net/asifrc/T8HrW/)

jQuery .resize() 文档：[http ://api.jquery.com/resize/](http://api.jquery.com/resize/)

让我知道这是否是你要找的:)

# android - 无法向 ListView 添加值

> ID：15918121
> 
> 赞同：2
> 
> 时间：2013-04-10T06:00:33.280
> 
> 标签：android, sqlite

我的 SMSReceiverActivity.java 上有以下代码：

```
package com.example.smsTest;

import java.util.ArrayList;
import java.util.List;

import android.app.ListActivity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class SMSReceiverActivity extends ListActivity {
    private SQLiteAdapter mySQLiteAdapter;

    private List<String> bodyarr = new ArrayList<String>();
    private ArrayAdapter<Message> arrayAdpt;

    private BroadcastReceiver mIntentReceiver;
    ListView listview;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_smsreceiver);

        mySQLiteAdapter = new SQLiteAdapter(this);
        mySQLiteAdapter.openToRead();

        List<Message> bodyarr = mySQLiteAdapter.getAllMessages();

        listview=this.getListView();

        arrayAdpt = new ArrayAdapter<Message>(SMSReceiverActivity.this,
                android.R.layout.simple_list_item_1, bodyarr);
        listview.setAdapter(arrayAdpt);       
    }

    @Override
    protected void onResume() {
        super.onResume();

        IntentFilter intentFilter = new IntentFilter("SmsMessage.intent.MAIN");
        mIntentReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String msg = intent.getStringExtra("get_msg");

                //Process the sms format and extract body &amp; phoneNumber
                msg = msg.replace("\n", "");
                String body = msg.substring(msg.lastIndexOf(":")+1, msg.length());
                String pNumber = msg.substring(0,msg.lastIndexOf(":"));

                bodyarr.add(body);
                arrayAdpt.notifyDataSetChanged();

                /*
                 *  Create/Open a SQLite database
                 *  and fill with dummy content
                 *  and close it
                 */
                mySQLiteAdapter = new SQLiteAdapter(SMSReceiverActivity.this);
                mySQLiteAdapter.openToWrite();
                //mySQLiteAdapter.deleteAll();

                mySQLiteAdapter.insert(body);

                mySQLiteAdapter.close();
            }
    };

    this.registerReceiver(mIntentReceiver, intentFilter);
    }

    @Override
    protected void onPause() {
        super.onPause();
        this.unregisterReceiver(this.mIntentReceiver);
    }

} 
```

这是 SQLiteAdapter.java 的代码：

```
package com.example.smsTest;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class SQLiteAdapter {

    public static final String MYDATABASE_NAME = "MY_DATABASE";
    public static final String MYDATABASE_TABLE = "MY_TABLE";
    public static final int MYDATABASE_VERSION = 1;
    public static final String KEY_ID = "_id";
    public static final String KEY_CONTENT = "Content";

    //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE =
    "create table " + MYDATABASE_TABLE + " ("
    + KEY_ID + " integer primary key autoincrement, "
    + KEY_CONTENT + " text not null);";

    private SQLiteHelper sqLiteHelper;
    private SQLiteDatabase sqLiteDatabase;

    private Context context;

    public SQLiteAdapter(Context c){
        context = c;
    }

    public SQLiteAdapter openToRead() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getReadableDatabase();
        return this;
    }

    public SQLiteAdapter openToWrite() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        sqLiteHelper.close();
    }

    public long insert(String content){

        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_CONTENT, content);
        return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
    }

    public int deleteAll(){
        return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
    }

    public Cursor queueAll(){
        String[] columns = new String[]{KEY_ID, KEY_CONTENT};
        Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
        null, null, null, null, null);

        return cursor;
    }

    public List<Message> getAllMessages() {
        String[] columns = new String[]{KEY_ID, KEY_CONTENT};
        List<Message> messages = new ArrayList<Message>();

        Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE,
                columns, null, null, null, null, null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
            Message message = cursorToMessage(cursor);
          messages.add(message);
          cursor.moveToNext();
        }
        // Make sure to close the cursor
        cursor.close();
        return messages;
      }

    public class SQLiteHelper extends SQLiteOpenHelper {

        public SQLiteHelper(Context context, String name,
        CursorFactory factory, int version) {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(SCRIPT_CREATE_DATABASE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub

        }

    }

      private Message cursorToMessage(Cursor cursor) {
          Message message = new Message();
          message.setId(cursor.getLong(0));
          message.setMessage(cursor.getString(1));
          return message;
      }

} 
```

这是 Message.java 代码：

```
package com.example.smsTest;

public class Message {
      private long id;
      private String message;

      public long getId() {
        return id;
      }

      public void setId(long id) {
        this.id = id;
      }

      public String getMessage() {
        return message;
      }

      public void setMessage(String message) {
        this.message = message;
      }

      // Will be used by the ArrayAdapter in the ListView
      @Override
      public String toString() {
        return message;
      }
} 
```

问题是`String body = msg.substring(msg.lastIndexOf(":")+1, msg.length());`此代码触发时的值未更新到列表视图`bodyarr.add(body); arrayAdpt.notifyDataSetChanged();`。此代码可以在 SMSReceiverActivity 类中找到。

这在我添加 sqlite 代码之前有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:13:39.380

你的`List`里面`Adapter`持有`Message`类型的对象，你里面的字段的类型`Activity`是`List<String>`. 您将 a 传递`List<Message>`给`Adapter`in `onCreate()`，然后`onReceive()`将 a 添加`String`到`List<String>`. 因此，首先，这两个列表的类型不兼容，因此您将无法将 a 传递`List<String>`给`Adapter`. 其次，通过调用`bodyarr.add(body)`您将一个项目添加到 的`Activity's`列表中`Strings`，这不会`Adapter`以任何方式影响 。因此，您可能应该从修复类型不兼容开始，然后不要忘记`adapter.setItems(bodyarr)`在此列表中添加内容后调用以更新`Adapter`. 然后调用`adapter.notifyDataSetChanged()`将完成这项工作。希望这可以帮助。

# java-me - 如何处理 java-me 短信应用程序中的“失衡”情况？

> ID：15918125
> 
> 赞同：2
> 
> 时间：2013-04-10T06:00:45.940
> 
> 标签：java-me, sms

一个 j2me 应用程序正在发送短信。现在手机中的SIM卡是预付费的，余额不足，所以app无法发送短信。在这种情况下我们有什么例外吗？？？据我所知，它给出了 IOException，我也处理了同样的问题，但它不起作用......

# javascript - 基于正则表达式的字符串修改

> ID：15918129
> 
> 赞同：0
> 
> 时间：2013-04-10T06:01:02.197
> 
> 标签：javascript, regex, string

我也需要通过两种方式在 js 中使用 REGEX 修改字符串

1）字符串中的运算符（AND|OR）必须有前导和尾随空格，即如果说字符串是

`(C1 AND C2 ORC3) AND (C4OR C5)`然后必须修改为`(C1 AND C2 OR C3) AND (C4 OR C5)`

2）括号之间不能有空格，也不能有条件（Cn），即

`( ( C1 AND C2 OR C3) ) AND ( C4 OR C5)`那么它必须修改为`((C1 AND C2 OR C3)) AND (C4 OR C5)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:08:59.250

你可以这样做 ：

```
var str = .replace(/(AND|OR)(\w)/g, "$1 $2")
          .replace(/(\w)(AND|OR)/g, "$1 $2")
          .replace(/\(\s/g, "(")
          .replace(/\s\)/g, ")"); 
```

它改变

```
"( ( C1 AND C2 ORC3 ) ) AND ( C4 ORC5)" 
```

至

```
"((C1 AND C2 OR C3)) AND (C4 OR C5)" 
```

它可以做得更短，但会失去可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:21:27.733

我不会写一个代码。但是这个想法会给你一点php知识的解决方案。

*   替换 all`AND`和`OR`with`<space>AND<space>`并`<space>OR<space>`仔细查看第二个版本周围有空格。

*   用单个空格替换所有双空格。循环遍历此规则，直到没有双空格。

*   替换`(<space>`为`(`和。`<space>)`_ `)`再仔细看

`<space>`在这里表示空白。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T06:15:17.217

```
.replace(/\s*([()])\s*/g, "$1")
.replace(/AND|OR/g, " $& ")
.replace(/\s+/g, ' '); 
```

这在您的最后一个测试字符串上正常工作。它应该占一个以上的空格分隔括号，甚至修剪额外的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T06:43:33.460

```
function attempt(str){
   return str.replace(/\s/g,"").replace(/(AND|OR)/g," $1 ");
}
function test(){
    var str = '( ( C1ANDC2 OR C3)          ) AND     ( C4  ORC5)',
        expected = '((C1 AND C2 OR C3)) AND (C4 OR C5)';
    return attempt(str) ===  expected;
} 
```

# ios - 在 UIKit 中实现滑动分页横幅

> ID：15918136
> 
> 赞同：0
> 
> 时间：2013-04-10T06:01:22.543
> 
> 标签：ios, user-interface, uikit, slide, banner

我正在开发一个 iOS 应用程序，我希望实现一个*“滑动、分页横幅”*，类似于我在**ComiXology** iPhone 应用程序中看到的。请参阅下面的图片：

![图。1。](https://i.stack.imgur.com/p28Ax.png)

![图。1。](https://i.stack.imgur.com/sxiVo.png)

我不知道如何实施它。指向教程的链接会有所帮助，或者至少是关于如何实施它的想法。谢谢。:D

**我正在使用 UIKit 开发我的应用程序。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:20:34.160

使用 UIScrollView 和 UIPageControll 的组合。苹果有一个[例子](http://developer.apple.com/library/ios/ipad/#samplecode/PageControl/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007795)。

# doxygen - 如何禁止在 doxygen 中包含源代码

> ID：15918138
> 
> 赞同：2
> 
> 时间：2013-04-10T06:01:52.740
> 
> 标签：doxygen

是否有一个标志阻止 doxygen 生成源文件（即头文件）的漂亮打印副本？我只需要实际的文档而不是实际文件的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:07:54.673

是的，请确保

```
SOURCE_BROWSER   = NO
VERBATIM_HEADERS = NO 
```

在配置文件中。

# network-programming - 网络设备驱动程序

> ID：15918141
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:02:16.773
> 
> 标签：network-programming, linux-kernel, linux-device-driver

我想为基于网络的设备编写 Linux 设备驱动程序。该网络设备只是输入输出控制，并且该设备通过以太网电缆通过以太网端口连接。我该如何编写驱动程序？如何在设备和内核之间传输数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:42:02.110

如果设备只是通过以太网连接到 Linux 机器，那么您根本不需要编写内核驱动程序 - 用户空间守护程序可以通过`AF_PACKET`套接字地址系列完全访问以太网。有关详细信息，请参见[`packet(7)`](http://man7.org/linux/man-pages/man7/packet.7.html)手册页。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T08:47:34.090

您可以选择 TCP 或 UDP 连接通信。

对于 TCP，您必须选择基于流的传输但是 UDP 不是一种可靠的通信，而是比 TCP 更快。

我建议使用既有理论又有实践反思的《*开始 Linux 编程》。*

干杯！！

# perl - 如何在perl tk中点击确定按钮依次打开窗口？

> ID：15918145
> 
> 赞同：1
> 
> 时间：2013-04-10T06:02:39.097
> 
> 标签：perl, user-interface, tk

我正在使用 perl/tk 实现一个 gui。

在我的第一个窗口的输入框中填写值后，我希望点击确定按钮。现在点击 OK 按钮后，将弹出另一个窗口，其中包含一些新的输入字段。同样，如果再次点击 OK 按钮，它应该会打开另一个新窗口，直到完成按钮出现。并且应该有一个上一个按钮也可以转到上一个窗口。

如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:31:00.773

[Tk::NoteBook](http://search.cpan.org/~ni-s/Tk/pod/NoteBook.pod)在这里会有所帮助。它通过带有选项卡的窗口显示进度，因此用户可以知道它们有多远。页面可以设置为“禁用”，这样用户在不使用 [Prev][Next] 按钮的情况下无法切换到它们（确保您的代码在每次翻页时运行）。

一个简单的例子：

```
#!/usr/bin/perl

use strict;
use warnings;
use Tk;
use Tk::NoteBook;

my $mw=MainWindow->new();
my $nb=$mw->NoteBook->pack(-expand=>1,-fill=>'both');
my $page1=$nb->add('page1',-label=>'Start');
my $page2=$nb->add('page2',-label=>'Finish',-state=>'disabled');
$page1->Button(-text=>'Next',-command=>\&next_page)->pack;
$page2->Button(-text=>'Exit',-command=>sub{exit;})->pack;
MainLoop;

sub next_page() {
 $nb->pageconfigure('page2',-state=>'normal');
 $nb->raise('page2');
 $nb->pageconfigure('page1',-state=>'disabled');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T20:45:06.270

用户1468315问：

> 如何在点击清除按钮时将输入字段值设置为空？

我相信这样的事情应该这样做。

```
$entry = $mw->Entry()->pack;

$button = $mw->Button(
-command => sub{$entry->delete(0, 'end');}
)->pack; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:11:09.357

我假设您知道如何使用 Tk 创建窗口，并且您不希望这里有人用这个问题为您编写代码。

话虽如此，您应该创建一个类来使用该类的实例来执行此操作。该实例可以保存任何属性（或单个属性中的多个值），并且您的 Tk 应用程序可以使用该实例来分配任何新值，并且如果您需要在流程中返回/前进，则能够将它们读回。

对于 Tk 应用程序，您可以创建一个 sub 使用您的类实例和一个步骤号作为参数，或者您可以创建另一个类来控制另一个属性中的正确步骤并根据当前步骤或任何信号触发正确的方法“下一个”或“上一个”按钮。

看[这个 Tk 教程](http://www.bin-co.com/perl/perl_tk_tutorial/contents.php)，很好。您可以 Google 获取更多 Tk 示例。

请参阅[此 Perl OOP 教程](http://www.tutorialspoint.com/perl/perl_oo_perl.htm)，了解有关在 Perl 中创建类和面向对象编程的基础知识。同样，您可以通过 Google 搜索有关该主题的更多信息。

此外，如果您想学习更多并在 Perl 中创建非常漂亮和更现代的 GUI，我强烈建议您研究[Alien::wxWidgets](http://search.cpan.org/dist/Alien-wxWidgets/lib/Alien/wxWidgets.pm)，它是[wxWidgets Project](http://www.wxwidgets.org/docs/book/index.htm)的 CPAN 库。

高温高压

弗朗西斯科

# prettyphoto - 漂亮照片 iframe

> ID：15918151
> 
> 赞同：0
> 
> 时间：2013-04-10T06:03:10.670
> 
> 标签：prettyphoto

我正在使用 prettyphoto 在 iframe 中显示网页。有谁知道包含网页 http:// 引用的唯一值的元素 id？由于他们没有 id 我想我可以使用它。

谢谢你。

我正在到达某个地方。

警报（$（“#pp_full_res”）.html（））；

给我

> iframe src="http://xxxx.com/zzz/html" iframeborder="no" height="640" 等等

我怎样才能抓住src？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T00:52:52.183

在上面的示例的基础上，为了获得实际的 iframe src，您可以使用 JQuery 的 attr() 方法。

var sSrc = $("#pp_full_res").attr('src');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T18:36:52.180

您可以在初始化 prettyPhoto 时设置自己的 iframe 参考：

```
$("a[rel^='prettyPhoto']").prettyPhoto({
  iframe_markup: '<iframe id="name-here" name="name-here" src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',
}); 
```

# c# - Linq 字符串匹配列表

> ID：15918156
> 
> 赞同：0
> 
> 时间：2013-04-10T06:03:43.213
> 
> 标签：c#, linq

我想使用linq比较值。

数据选项：A、B、C、D

（原创）我的数据：A、B、C

（修改）我的数据：B，D

我的数据：A - 删除，B - 不变，C - 删除，D - 添加

Linq表达式怎么表达呢？

数据类型为列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:08:17.160

听起来您可能想要[LINQ 集操作](http://msdn.microsoft.com/en-us/library/bb546153.aspx)：

```
var added = modified.Except(original);
var deleted = original.Except(modified);
var unchanged = modified.Intersect(original); 
```

当然，这是假设您不关心*ordering*。毫无疑问，有更有效的方法可以找到这些——但除非你真的*需要*担心性能，否则我会以此为起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:08:28.630

我想你正在寻找这样的东西：

```
var option =   new[] {"A", "B", "C", "D"};
var original = new[] {"A", "B", "C"};
var modify =   new[] {"B", "D"};

var deleted = original.Except(modify);        // A, C
var added   = modify.Except(original);        // D
var not_changed = modify.Intersect(original); // B 
```

# c# - 降低单一表单应用程序的复杂性

> ID：15918164
> 
> 赞同：0
> 
> 时间：2013-04-10T06:04:12.797
> 
> 标签：c#, winforms, tabs

我创建了一个包含单个表单的 win 表单应用程序。我们有 8 个选项卡来访问应用程序的模块。

问题是我们是一个由 4 人组成的团队，负责这个项目。但由于它是单一表单应用程序，因此一次只能由一个人使用该文件。还有其他方法可以使用多个文件构建应用程序吗？

请提供一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:12:42.593

首先，每个选项卡可能应该有一个单独的 UserControl。这会给你 8 个文件（至少），因为你有 8 个选项卡。

其次，您应该为 Windows 窗体应用程序使用[模型-视图-控制器样式架构。](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)这将为您提供至少一个控制器，但您可能会为每个 UserControl（即每个选项卡）拥有一个控制器。您甚至可能有一个管理每个选项卡控制器的整体控制器。

整个应用程序可能只有一个数据模型，或者每个 UserControl（选项卡）可能只有一个数据模型。

如果你做了所有这些，你就会有更多的源文件。

但是，如果不了解您的应用程序，实际上很难说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:12:52.750

即使这是一个巨大的蜡球，您的源代码控制工具也是劣质的，并且很难将其分解为单独的类，您仍然可以利用 Form 类作为**部分**类。这意味着您可以将代码分布在任意数量的源代码文件中，而不仅仅是设计者创建的两个文件。所以一个逻辑组织是将属于特定选项卡的代码移动到其自己的部分类中，具有相同的表单类名和自己的源代码文件。但是，当您使用设计器添加事件处理程序时，需要进行一些剪切+粘贴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T08:35:27.140

尝试使用用户控件使每个选项卡模块化。

找出每个选项卡接受的参数以及它公开的参数，然后创建具有该行为的用户控件。

这里有一些资源可以帮助您入门

[http://msdn.microsoft.com/en-us/library/aa302342.aspx](http://msdn.microsoft.com/en-us/library/aa302342.aspx)

[用户控制与 Windows 窗体](https://stackoverflow.com/questions/2299339/user-control-vs-windows-form)

[Windows 窗体中的用户控件 - 任何类似于 ASP.NET 用户控件的东西？](https://stackoverflow.com/questions/755869/user-controls-in-windows-forms-anything-similar-to-asp-net-user-controls)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:51:16.123

您是否考虑过使用 MDI？

[MSDN 使用 MDI...](http://msdn.microsoft.com/en-us/library/ms973874.aspx)

示例在 VB.Net 中，但我相信如果你真的想使用 C# 会很容易 - 我不知道为什么，但是...... :)

# sql - trunc(sysdate-1) 和 trunc(sysdate)-1 的性能有区别吗？

> ID：15918169
> 
> 赞同：1
> 
> 时间：2013-04-10T06:04:24.197
> 
> 标签：sql, performance, oracle11g

他们都在前一天返回，到目前为止，我还没有发现其中一个存在性能问题的案例。

`trunc(sysdate-1)`但出于好奇，我真的想知道在查询中使用和之间是否存在性能差异`trunc(sysdate)-1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:08:02.980

实际上，没有。代表今天某个时间点的 a 并不比`trunc`代表昨天的 a贵。从某个午夜的某天减去一天并不比代表其他某个时间的 a 更昂贵。`date``trunc``date``date``date`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:13:52.747

我认为这两种情况下的性能是相同的。参考[这个](https://forums.oracle.com/forums/thread.jspa?threadID=722058!)链接。

# web-services - Web 服务，在 html 页面中访问？出错？

> ID：15918172
> 
> 赞同：1
> 
> 时间：2013-04-10T06:04:32.173
> 
> 标签：web-services

Web 服务，在 html 页面中访问服务我收到错误，这是我的代码。

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<title>Untitled Page</title>
<script type ="text/javascript"  language="JavaScript">
 function InitializeService()     
 {
    service.useService(http://www.freewebservicesx.com/GetGoldPrice.asmx?WSDL,
    "GetCurrentGoldPrice");

 }

 Function getgold()
 {
   var users="xxxxx";
   var pawd="xxx";
   service.GetCurrentGoldPrice.callService("GetCurrentGoldPrice",users,pawd);
 }

   function ShowResult()
   {
     alert(event.result.value);
   } 

 </script>

 </head>
  <body  onload="InitializeService()" id="service"  onresult="ShowResult()">
  <button onclick="getgold()">Get Age</button>
  </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:11:37.490

您需要在 IE 浏览器中启用以下属性“初始化并编写未标记为可安全执行脚本的 ActiveX 控件”

在 Internet Explorer 中，转到工具>>Internet 选项>>安全选项卡，转到自定义级别。启用“初始化并编写未标记为可安全执行脚本的 ActiveX 控件”选项，然后单击“确定”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:39:53.533

我已经用 jsfiddle 试过了......这里是[http://jsfiddle.net/XNEhp/](http://jsfiddle.net/XNEhp/)

尝试更改`Function getgold()`为`function getgold()`

并进行以下更改..

从

```
function InitializeService()     
 {
    service.useService(http://www.freewebservicesx.com/GetGoldPrice.asmx?WSDL,
    "GetCurrentGoldPrice");

 } 
```

至

```
 function InitializeService()     
 {
    service.useService('http://www.freewebservicesx.com/GetGoldPrice.asmx?WSDL',
    'GetCurrentGoldPrice');

 } 
```

让我知道现在发生了什么...

希望能帮助到你。

# jquery - 如何使用 jQuery 确定系统上是否安装了 Microsoft Excel 或 OpenOffice

> ID：15918173
> 
> 赞同：1
> 
> 时间：2013-04-10T06:04:36.730
> 
> 标签：jquery, excel, openoffice.org

我需要将表格的数据导出到 Excel。我得到了如下解决方案：

[http://jsfiddle.net/jquerybyexample/xhYcD/](http://jsfiddle.net/jquerybyexample/xhYcD/)

在上面的示例中，当系统上安装了 Microsoft Excel 但我的系统上安装了 OpenOffice 时，它​​允许您生成*.xls文件，所以当我添加该行时*

```
 window.open('data:application/vnd.oasis.opendocument.spreadsheet,' + $('#dvData').html()); 
```

代替

```
 window.open('data:application/vnd.ms-excel,' + $('#dvData').html()); 
```

然后它会生成 .ods 文件。

我需要确定是否安装了 Excel 或 Open Office，以便我可以使用 jQuery 或 JavaScript 设置上述两行的条件。

* * *

## 编辑

我可以把这两个条件背靠背，那是有害的吗？

```
$("#btnExport").click(function(e) {
    window.open('data:application/vnd.oasis.opendocument.spreadsheet,' + $('#dvData').html());
    window.open('data:application/vnd.ms-excel,' + $('#dvData').html());
    e.preventDefault();
}); 
```

* * *

## 另一个编辑

刚刚在IE8上试过这个解决方案，它不起作用。此解决方案的任何其他替代方案或可以修复以在 IE 上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:33:33.767

**As far as i know there exists** a vague way , you can check the existing Mime types to ensure the presence

eg: **application/x-msoffice** for office

```
function GetMimeTypes () {
                var message = "";
                    // Internet Explorer supports the mimeTypes collection, but it is always empty
                if (navigator.mimeTypes && navigator.mimeTypes.length > 0) {
                    var mimes = navigator.mimeTypes;
                    for (var i=0; i < mimes.length; i++) {
                        message += "<b>" + mimes[i].type + "</b> : " + mimes[i].description + "<br />";
                    }
                }
                else {
                    message = "Your browser does not support this ";
                   //sorry!
                }

                return ( message);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T12:27:10.280

我已经发布了我是您的预期答案的问题。希望这对您有所帮助。 [在 Java 脚本中将 HTML 表导出到 EXCEL](https://stackoverflow.com/questions/19539274/export-html-table-to-excel-in-java-script)

```
function downloadsalesreport () {

            var cache = {};

            this.tmpl = function tmpl(str, data) {
                // Figure out if we're getting a template, or if we need to
                // load the template - and be sure to cache the result.
                var fn = !/\W/.test(str) ?
                  cache[str] = cache[str] ||
                    tmpl(document.getElementById(str).innerHTML) :

                  // Generate a reusable function that will serve as a template
                  // generator (and which will be cached).
                  new Function("obj",
                    "var p=[],print=function(){p.push.apply(p,arguments);};" +

                    // Introduce the data as local variables using with(){}
                    "with(obj){p.push('" +

                    // Convert the template into pure JavaScript
                    str.replace(/[\r\t\n]/g, " ")
                          .split("{{").join("\t")
                          .replace(/((^|}})[^\t]*)'/g, "$1\r")
                          .replace(/\t=(.*?)}}/g, "',$1,'")
                          .split("\t").join("');")
                          .split("}}").join("p.push('")
                          .split("\r").join("\\'")
                          + "');}return p.join('');");

                // Provide some basic currying to the user
                return data ? fn(data) : fn;
            };
 var tableToExcel = (function () {
 var uri = 'data:application/vnd.ms-excel;base64,',
                    template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{{=worksheet}}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body>{{for(var i=0; i<tables.length;i++){ }}<table>{{=tables[i]}}</table>{{ } }}</body></html>',
                base64 = function (s) { return window.btoa(unescape(encodeURIComponent(s))) },
                format = function (s, c) { return s.replace(/{(\w+)}/g, function (m, p) { return c[p]; }) }
                return function (tableList, name) {
                    if (!tableList.length > 0 && !tableList[0].nodeType) table = document.getElementById("#tablesalesentry")
                    var tables = [];
                    for (var i = 0; i < tableList.length; i++) { tables.push(tableList[i].innerHTML); }
                    var ctx = { worksheet: name || 'Worksheet', tables: tables };
                    window.location.href = uri + base64(tmpl(template, ctx))
                }
            })();

            tableToExcel(document.getElementsByTagName("table"), "one");

        } 
```

# ruby-on-rails - 搜索功能 - netzke 网格

> ID：15918177
> 
> 赞同：0
> 
> 时间：2013-04-10T06:04:53.343
> 
> 标签：ruby-on-rails, extjs, netzke

我正在将 netzke 用于我的一个项目。当我检查 netzke 网格中的搜索功能时，它不适用于外键。我什至检查了演示应用程序“Yanit”，同样的错误（无法连接到服务器）也发生在那里。

另外我想知道我们如何从 netzke 网格中删除操作链接。请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:30:04.193

这已在即将发布的 netzke-basepack v0.8.3 中修复：[https ://github.com/netzke/netzke-basepack/commit/abd489ea983f8dba5731bee67c4d2a13d41830e5](https://github.com/netzke/netzke-basepack/commit/abd489ea983f8dba5731bee67c4d2a13d41830e5)

你也可以从 GitHub 上的 master 获取 netzke-basepack。

要配置底部工具栏，请使用`bbar`config 选项，例如：

```
def configure(c)
  super
  c.bbar = [:edit, :add]
end 
```

# python - curl 命令中文/日文 url 编码

> ID：15918179
> 
> 赞同：1
> 
> 时间：2013-04-10T06:05:06.373
> 
> 标签：python, linux, bash, curl

我想向网站发送发布请求。下面的python代码工作正常。

```
# -*- encoding=utf-8 -*-
import urllib, urllib2

url = "http://xxx.com/login.asp"
req = urllib2.urlopen(url, urllib.urlencode({"name":u"汉字".encode('GB2312'),"id":u"12345"}))
print req.read() 
```

但是 bash 代码返回错误的页面。这是编码问题还是其他问题？

```
url="http://xxx.com/login.asp"
curl --data-urlencode "name=汉字&id=12345" $url 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:01:21.077

```
In [4]: urllib.urlencode({"name":"汉字".decode('utf-8').encode('GB2312'),"id":u"12345"})
Out[4]: 'name=%BA%BA%D7%D6&id=12345' 
```

根据 curl 手册页，

```
--data-urlencode <data>
      ...
      The <data> part can be passed to
      curl using one of the following syntaxes:
      ...
      name=content
      This will make curl URL-encode the content part and pass that on.
      Note that the name part is expected to be URL-encoded already. 
```

由于 curl 将对内容进行 URL 编码，因此我们需要向它传递一个尚未进行 URL 编码的字符串：

```
In [7]: urllib.unquote(urllib.urlencode({"name":"汉字".decode('utf-8').encode('GB2312'),"id":u"12345"}))
Out[7]: 'name=\xba\xba\xd7\xd6&id=12345' 
```

因此，尝试

```
url="http://xxx.com/login.asp"
curl --data-urlencode 'name=\xba\xba\xd7\xd6&id=12345' $url 
```

# android - 从显示 Live 摄像头的 SurfaceView 获取 RGB

> ID：15918180
> 
> 赞同：4
> 
> 时间：2013-04-10T06:05:09.297
> 
> 标签：android, colors, camera, rgb, surfaceholder

我正在`SurfaceView`使用`camera.startPreview();`. 关于如何从相机获取实时 RGB 读数的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:34:24.020

我以为我可以从`SurfaceView`. 但最好的使用方法是：

*   将相机的方向设置为 90 度。
*   将输出格式设置为 NV21（[保证](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setPreviewFormat%28int%29)所有设备都支持）。
*   设置为打开闪光灯。
*   在 中开始预览`SurfaceView`。

项目清单

```
camera = Camera.open();
cameraParam = camera.getParameters();
cameraParam.setPreviewFormat(ImageFormat.NV21);
camera.setDisplayOrientation(90);
camera.setParameters(cameraParam);
cameraParam = camera.getParameters();
camera.setPreviewDisplay(surfaceHolder);
cameraParam.setFlashMode(Parameters.FLASH_MODE_TORCH);
camera.setParameters(cameraParam);
camera.startPreview(); 
```

然后，我调用`setPreviewCallback`and`onPreviewFrame`来获取传入的帧，并将其转换为 RGB 像素数组。然后我可以通过循环运行 myPixels 数组来平均所有像素强度`for`，并检查`Color.red(myPixels[i])`每种所需颜色（在`onPreviewFrame`.

```
camera.setPreviewCallback(new PreviewCallback() {
    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {
        int frameHeight = camera.getParameters().getPreviewSize().height;
        int frameWidth = camera.getParameters().getPreviewSize().width;
        // number of pixels//transforms NV21 pixel data into RGB pixels  
        int rgb[] = new int[frameWidth * frameHeight];
        // convertion
        int[] myPixels = decodeYUV420SP(rgb, data, frameWidth, frameHeight);
    }
} 
```

在这里[可以](http://www.akeric.com/blog/?p=1342#viewSource)`decodeYUV420SP`找到。

我将此操作计时为每帧大约需要 200 毫秒。*有没有更快的方法呢？*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T06:27:53.373

你可以做类似下面的事情

```
camera.takePicture(shutterCallback, rawCallback, jpegCallback);

    jpegCallback = new PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) {
        FileOutputStream outStream = null;
        try {
            Bitmap bitmap = BitmapFactory.decodeByteArray(data, offset, length);

         int[] pix = new int[picw * pich];
         bitmap.getPixels(pix, 0, picw, 0, 0, picw, pich);

         int R, G, B,Y;

         for (int y = 0; y < pich; y++){
         for (int x = 0; x < picw; x++)
             {
             int index = y * picw + x;
             int R = (pix[index] >> 16) & 0xff;     //bitwise shifting
             int G = (pix[index] >> 8) & 0xff;
             int B = pix[index] & 0xff;

             pix[index] = 0xff000000 | (R << 16) | (G << 8) | B;
             }}

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
        }
     }
}; 
```

这里`camera.takePicture(shutterCallback, rawCallback, jpegCallback);`方法调用图像捕获时间，所以我认为你需要在相机打开时不断调用这个方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-22T21:28:00.303

这里要求的是使用 NDK 的快速解码（在快速设备上少于 10 毫秒）：

首先是 native.h

```
#include <jni.h>
#ifndef native_H
#define native_H
extern "C" {
JNIEXPORT jbyteArray JNICALL Com_example_MainActivity_nativeSetIamgeFromCamera(JNIEnv* jenv, jobject obj,jbyteArray array,jint length,jint x,jint y);
};
#endif 
```

本机.cpp

```
 #include <stdint.h>
        #include <jni.h>
        #include <stdlib.h>
        #include <string.h>
        #include <stdio.h>
        #include <android/native_window.h>
        #include <android/native_window_jni.h>
        #include <sys/types.h>
        #include <stdio.h>
        #include <string.h>
        #include <sys/types.h>
        #include <time.h>
        #include "native.h"

void Resize_and_decodyuv(unsigned char * data,int _width,int _height, unsigned char *out, int newWidth, int newHeight);

JNIEXPORT jbyteArray JNICALL Com_example_MainActivity_nativeSetIamgeFromCamera(JNIEnv* jenv, jobject obj,jbyteArray array,jint length,jint x,jint y)
    {
    //-----jbyteArray array contain the data from the camera passed by the java function
    //-----length represent the size of jbyteArray in byte
    //-----x,y respectively resolutionx and resolutiony of the image in jbyteArray array

    unsigned char * buffImgCamera=(unsigned char *)malloc(length);

    //----- copy the buffer from java array to c/c++ char * buffImgCamera
    jenv->GetByteArrayRegion(array, 0, length, (jbyte*)buffImgCamera);

   int width=400,height=600;//screen reso of the surface(400,800 is just an example)
   unsigned char * buffOut=(unsigned char *)malloc(width*height*4);//prepare the result buffer where 4 represent R G B A(Alpha transparency channel).

    //--- to gain time i decode and resize the image to fit the surface screen in one loop
    Resize_and_decodyuv(buffImgCamera,x,y,buffOut,width,height);
    //---copy the result to a jbytearray and return it to java function
    jbyteArray result=env->NewByteArray(width*height*4);
    env->SetByteArrayRegion( result, 0, width*height*4, buffOut);

    return result;
    }

void Resize_and_decodyuv(unsigned char * data,int _width,int _height, unsigned char *out, int newWidth, int newHeight)
    {

int Colordeep=4;//RGBA; in the case of Qt Frame Work or Borland just put 3and the code should work;

        float scaleWidth =  (float)newWidth / (float)_width;
        float scaleHeight = (float)newHeight / (float)_height;

        for(int cy = 0; cy < newHeight; cy++)
        {
            for(int cx = 0; cx < newWidth; cx++)
            {
                int pixel = (cy * (newWidth *Colordeep)) + (cx*Colordeep);
                int nearestMatch =  ((((int)(cy / scaleHeight)) *_width) + (int)(cx /scaleWidth));

                int cxa=cx/scaleWidth;
                int cya=cy/scaleHeight; cya/=2;
                int nearestMatch1 =(cya *_width) + (int)(cxa);

                int y =  ( data[nearestMatch]);

                      int v = data[data_uv+(nearestMatch1)];
                      int u = data[data_uv+(nearestMatch1)+1];

                      int r = (int) (1164 * (y - 16) + 1596 * (v - 128));
                      int g = (int) (1164 * (y - 16) - 813 * (v - 128) - 391 * (u - 128));
                      int b = (int) (1164 * (y - 16) + 2018 * (u - 128));
          r/=1000;
          g/=1000;
          b/=1000;
                      r = r < 0 ? 0 : (r > 255 ? 255 : r);
                      g = g < 0 ? 0 : (g > 255 ? 255 : g);
                      b = b < 0 ? 0 : (b > 255 ? 255 : b);

                out[pixel ] = r;
                out[pixel  +1  ] =  g;
                out[pixel + 2] =  b;
                if(Colordeep==4)out[pixel + 3] =  255;

            }
        }

    } 
```

爪哇代码

```
PreviewCallback previewCallback = new PreviewCallback () {

            public void onPreviewFrame(byte[] data, Camera camera) {
                //nativeSetIamgeFromCamera return a byte array  
                nativeSetIamgeFromCamera(data,data.length,camera.getParameters().getPreviewSize().width,camera.getParameters().getPreviewSize().height);

            }
    }; 
```

# android - 如何在 Android App 中缓存 Http Client 的响应？

> ID：15918182
> 
> 赞同：0
> 
> 时间：2013-04-10T06:05:16.640
> 
> 标签：android, caching, httpclient

在我的 android 应用程序中，我试图缓存 Http 客户端 的响应当我调用 url 时**，控制台总是显示“响应来自上游服务器”消息。**我的 Http Client 代码如下：

```
try
        {

            CacheConfig cacheConfig = new CacheConfig();  
            cacheConfig.setMaxCacheEntries(1000);
            cacheConfig.setMaxObjectSizeBytes(8192);

            DefaultHttpClient realClient = new DefaultHttpClient();
            realClient.addResponseInterceptor(MakeCacheable.INSTANCE, 0); // This goes first
            CachingHttpClient httpClient = new CachingHttpClient(realClient, cacheConfig);

            HttpContext localContext = new BasicHttpContext();

            String requestUrl= SERVER_IP+ ANDROID_REQUEST_URL+METHOD_GET_ALLDEALS;
            HttpPost httppost = new HttpPost(requestUrl);
            ArrayList<NameValuePair> nameValuePairs=new ArrayList<NameValuePair>();
            BasicNameValuePair latitudeValue=new BasicNameValuePair("lat",String.valueOf(28.460190279993547));
            BasicNameValuePair longitudeValue=new BasicNameValuePair("lng",String.valueOf(77.0645221799944));
            BasicNameValuePair radiusValue=new BasicNameValuePair("radius",String.valueOf(10));
            BasicNameValuePair catIdValue=new BasicNameValuePair("cat",String.valueOf(1));
            BasicNameValuePair subCategoryIdValue=new BasicNameValuePair("subcat",String.valueOf(0));
            BasicNameValuePair offsetValue=new BasicNameValuePair("offset",String.valueOf(0));
            BasicNameValuePair deviceIdvalue=new BasicNameValuePair("deviceId","12366A4C-9CD0-47F4-9ACC-D1CD7DD997FC");
            BasicNameValuePair sessionIdValue=new BasicNameValuePair("sessionId","10873");
            nameValuePairs.add(latitudeValue);
            nameValuePairs.add(longitudeValue);
            nameValuePairs.add(radiusValue);
            nameValuePairs.add(catIdValue);
            nameValuePairs.add(subCategoryIdValue);
            nameValuePairs.add(offsetValue);
            nameValuePairs.add(deviceIdvalue);
            nameValuePairs.add(sessionIdValue);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            String paramString = URLEncodedUtils.format(nameValuePairs,"utf-8");
            String url = requestUrl+"?"+paramString; 

            HttpGet httpget = new HttpGet(url);
            HttpResponse response = httpClient.execute(httpget,localContext);
             HttpEntity entity = response.getEntity();
                if (entity != null) {
                    InputStream instream = entity.getContent();
                    result = readIncomingData(instream);
                    instream.close();
                    Log.i("MainActivity", result);

        }

            CacheResponseStatus responseStatus = (CacheResponseStatus) localContext.getAttribute(
                    CachingHttpClient.CACHE_RESPONSE_STATUS);
            switch (responseStatus) {
            case CACHE_HIT:
                Log.e("","A response was generated from the cache with no requests " +
                        "sent upstream");
                break;
            case CACHE_MODULE_RESPONSE:
                Log.e("","The response was generated directly by the caching module");
                break;
            case CACHE_MISS:
                Log.e("","The response came from an upstream server");
                break;
            case VALIDATED:
                Log.e("","The response was generated from the cache after validating " +
                        "the entry with the origin server");
                break;
            }

    }catch (Exception e) {
        Log.i("MainActivity",e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T12:53:10.470

我使用以下代码块并在 onCreate() 中调用它

```
private void enableHttpResponseCache() {
    try {
        long httpCacheSize = 10 * 1024 * 1024; // 10 MiB
        File httpCacheDir = new File(getCacheDir(), "http");
        Class.forName("android.net.http.HttpResponseCache")
            .getMethod("install", File.class, long.class)
            .invoke(null, httpCacheDir, httpCacheSize);
        Log.i(LOGTAG,"cache");
    } catch (Exception httpResponseCacheNotAvailable) {
        Log.i(LOGTAG,"nocache");
    }
} 
```

请记住，这只会在 4.0+ 设备上启用缓存。低于此值，您将在日志中看到“nocache”。

# php - 如何在 PHP 中拆分此字符串？

> ID：15918187
> 
> 赞同：0
> 
> 时间：2013-04-10T06:05:52.157
> 
> 标签：php

我有一个看起来像这样的字符串：

```
'word','another word','and a sentence','and more','etc etc' 
```

我需要将它分成两个字符串，除以第二个逗号，这两个逗号都不应该出现在任何一个句子中。使事情复杂化的是，这里也可以是字符串的各个引号部分内的逗号。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:09:01.890

这很像 CSV 语法，所以：

```
$parsed  = str_getcsv($string, ',', "'");
$string1 = join(',', array_slice($parsed, 0, 2));
$string2 = join(',', array_slice($parsed, 2)); 
```

如果您的 PHP 版本低于 5.3，因此您没有[`str_getcsv`](http://php.net/str_getcsv)，您可以使用虚拟文件句柄将其复制到`php://temp`和`fgetcsv`.

或者，根据您的语法的难易程度，[`strtok`](http://php.net/strtok)可以将其用于简单的解析器。找到第一个`'`，然后是下一个`'`，然后是 a `,`，然后是 a `'`，然后是下一个，然后`'`你就有了字符串的第一部分......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:26:53.307

既然你说引号之间可以有逗号..所以[preg_split](http://php.net/manual/en/function.preg-split.php)可以比爆炸更好地帮助你

```
 <?php

                 $string = "'word','another word','and a sentence','and more','etc etc'";
                 $pattern = '%\',\'%';
                 $split = preg_split($pattern,$string);
                 $array1 = array();
                 $array2 = array();
                 foreach($split as $key=>$value)
                 {
                    $value  = trim($value,"'");
                    $value = "'{$value}'";

                    if(($key === 0) || ($key ===1))
                    {
                        $array1[] = $value;
                    }
                    else
                    {
                        $array2[] = $value; 
                    }
                 }

                echo $req_string1 = implode(',',$array1);
                echo "<br>";
                echo $req_string2 = implode(',',$array2);     

             ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:32:12.740

```
$a="'word','another word','and a sentence','and more','etc etc'";

//preg_match('{(.*?,[^,]*),(.*)}', $a, $matches);
preg_match('{(.*?[^\\\\]\',.*?[^\\\\]\'),(.*)}', $a, $matches); //UPDATE 
print_r($matches); 
```

展示：

```
 Array
(
    [0] => 'word','another word','and a sentence','and more','etc etc'
    [1] => 'word','another word'
    [2] => 'and a sentence','and more','etc etc'
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:56:50.333

引号之间的逗号

```
$a="'word','another word','and a sentence','and more','etc etc'";

eval("\$arr =  array($a);");

$text1='';
$text2='';
foreach($arr AS $k=>$v){
    if($k<2){
        $text1.=$text1?',':'';
        $text1.="'{$v}'";
    }else{
        $text2.=$text2?',':'';
        $text2.="'{$v}'";
    }
}
echo $text1;
echo PHP_EOL;
echo $text2; 
```

'单词'，'另一个单词'

'and a sentence','and more','etc etc'

# python - 如何在不编译的情况下在 Windows 上的 python 2.7 virtualenv 上安装 python-ldap

> ID：15918188
> 
> 赞同：9
> 
> 时间：2013-04-10T06:05:53.933
> 
> 标签：python, virtualenv, easy-install, python-ldap

我使用 Windows 作为我的主要 python 2.7 开发环境，我想在虚拟环境中安装 python-ldap。

python-ldap包需要编译:(当然我不能在我的环境中编译它。所以我尝试找到二进制文件以便通过easy_install将它们安装在我的虚拟环境中（仅供参考，你可以做easy_install package.exe和包将安装）。我在这里找到了分布式二进制文件：[https ://pypi.python.org/pypi/python-ldap/](https://pypi.python.org/pypi/python-ldap/)

不幸的是，他们只为 python 2.7 提供 .msi 包！！！为什么人们使用 .msi ？无法通过 easy_install 安装 MSI。我讨厌微星 %$#$^#$^#$

是的，我可以通过执行它来安装 .msi 包，但它将安装在全局 python 包中，而*不是*我的虚拟环境中！

请问，有人能帮帮我吗？我记得在以前的项目中遇到过这个确切的问题，我不得不在虚拟环境之外开发它——但我现在不能这样做:(

**更新：**我在系统范围内安装了 python-ldap 并将目录 ldap 和 python_ldap-2.4.10-py2.7.egg-info 从 PYTHON_GLOBAL\Lib\site-packages 复制到 VIRTUALENV\Lib\site-packages 并且似乎正在工作现在。但是我真的不喜欢那个解决方案，所以我不会用那个来回答我的问题。此外，亚历山大关于使用 --system-site-packages 重新创建我的 virtualenv 的评论可能会起作用，但这意味着我需要卸载很多我的全局包包，然后再次安装我的虚拟包等，一般来说它不是干燥的 ：（

**更新 2：**在尝试了 cgohlke 的建议后，我看到 MSI 的内容是我上面提到的两个目录以及文件 dsml.py、ldapurl.py 和 ldif.py。所以我也把它复制到了我的 VIRTUALENV\Lib\site-packages。现在我相信安装没问题:)。但我相信cgohlke 是最好的——只需使用msiexec.exe 将msi 的内容直接提取到您的VIRTUALENV。

**更新 3：**在一个类似的问题（[在 Windows 上的 virtualenv 中安装 python-ldap](https://stackoverflow.com/questions/15070063/installing-python-ldap-in-a-virualenv-on-windows)）我发现了一个非常有趣的链接：[http](http://www.lfd.uci.edu/~gohlke/pythonlibs/#python-ldap) ://www.lfd.uci.edu/~gohlke/pythonlibs/#python-ldap 。在那里，您将能够找到 python-ldap 和许多其他人的 .EXE 安装包！！！所以最后通过下载这些你就可以`easy_install`在你的 virtualenv 中使用它们了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T11:28:48.060

如何在系统范围内安装它，从已安装的文件中创建一个 egg，然后在你的虚拟环境中使用这个 egg？你可以在这里找到一些关于鸡蛋结构的信息：http: [//pythonhosted.org/setuptools/formats.html](http://pythonhosted.org/setuptools/formats.html)

# ruby-on-rails - 我的搜索区分大小写

> ID：15918190
> 
> 赞同：2
> 
> 时间：2013-04-10T06:06:07.683
> 
> 标签：ruby-on-rails, search, utf-8

我对 Rails 很陌生，并且正在使用此搜索表单

```
 <%= form_tag producer_path(@user), method: :get do %>
    <p>
      <%= text_field_tag :search, params[:search] %>
      <%= submit_tag "Search", name: nil %>
    </p>
  <% end %> 
```

在模型中有一个 SQL LIKE

```
 def self.search(search)
    if search
      find(:all, conditions: ['name LIKE ?', "%#{search}%"])
    else
      find(:all)
    end
  end 
```

我希望这默认情况下不区分大小写，但事实并非如此。我正在使用 PostgreSQL 9.1。这是我需要为数据库配置的东西吗？如果需要，在哪里？

顺便说一句，我在 URL 中看到以下参数，包括带有不可打印字符的 UTF8 哈希（在浏览器地址栏中，在 html 中，它似乎显示为复选标志），我不知道它来自哪里。这种 UTF8 编码会是问题的根源吗？

```
?utf8=✓&amp;search= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:27:09.617

```
find(:all, conditions: ['name iLIKE ?', "%#{search}%"]) 
```

引用 postgres 文档：

> 根据活动区域设置，可以使用关键字 ILIKE 代替 LIKE 以使匹配不区分大小写。这不在 SQL 标准中，而是 PostgreSQL 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:11:56.657

这是一个类似的线程，

[如何使用 LIKE 通配符在列中搜索（不区分大小写）？](https://stackoverflow.com/questions/2876789/case-insensitive-for-sql-like-wildcard-statement)

这不是一个真正的 Rails 解决方案。我建议您尝试使用**元搜索**gem 来搜索具有复杂功能的搜索。

# postgresql - 为什么查询计划如此不同？

> ID：15918193
> 
> 赞同：3
> 
> 时间：2013-04-10T06:06:14.790
> 
> 标签：postgresql, explain

我有表`reviews_article`（1508 行）。我不明白，为什么只有不同偏移量的两个查询有不同的查询计划。你能给我解释一下吗？

```
CREATE TABLE "reviews_article" (
    "id" serial NOT NULL PRIMARY KEY,
    "version_id" integer REFERENCES "reversion_version" ("id") DEFERRABLE INITIALLY DEFERRED,
    "published" boolean NOT NULL,
    "created" timestamp with time zone NOT NULL,
);

CREATE INDEX reviews_article_version_id_7cf1d83d68e3a3c6 
    ON reviews_article ( version_id, published );

CREATE INDEX reviews_article_created_desc_index 
    ON reviews_article ( created DESC NULLS FIRST ); 
```

```
EXPLAIN ANALYZE SELECT ••• FROM "reviews_article" 
LEFT OUTER JOIN "reversion_version" ON ("reviews_article"."version_id" = "reversion_version"."id") 
WHERE ("reversion_version"."id" IS NOT NULL AND "reviews_article"."published" = true ) 
ORDER BY "reviews_article"."created" DESC LIMIT 8 OFFSET 304 
```

有计划：

```
Limit  (cost=882.89..906.12 rows=8 width=1868) (actual time=3.630..3.717 rows=8 loops=1)
  ->  Nested Loop  (cost=0.00..3319.54 rows=1143 width=1868) (actual time=0.063..3.397 rows=312 loops=1)
        ->  Index Scan using reviews_article_created_desc_index on reviews_article  (cost=0.00..1128.75 rows=1254 width=863) (actual time=0.030..0.926 rows=393 loops=1)
              Filter: published
              Rows Removed by Filter: 6
        ->  Index Scan using reversion_version_pkey on reversion_version  (cost=0.00..1.74 rows=1 width=1005) (actual time=0.003..0.003 rows=1 loops=393)
              Index Cond: ((id = reviews_article.version_id) AND (id IS NOT NULL))
Total runtime: 3.769 ms 
```

但同样的查询`OFFSET 312`有计划：

```
Limit  (cost=919.06..919.08 rows=8 width=1868) (actual time=16.974..16.987 rows=8 loops=1)
  ->  Sort  (cost=918.28..921.14 rows=1143 width=1868) (actual time=16.488..16.720 rows=320 loops=1)
        Sort Key: reviews_article.created
        Sort Method: top-N heapsort  Memory: 1154kB
        ->  Hash Join  (cost=369.75..865.01 rows=1143 width=1868) (actual time=4.895..13.286 rows=1136 loops=1)
              Hash Cond: (reversion_version.id = reviews_article.version_id)
              ->  Seq Scan on reversion_version  (cost=0.00..471.87 rows=3187 width=1005) (actual time=0.006..4.041 rows=3195 loops=1)
                    Filter: (id IS NOT NULL)
              ->  Hash  (cost=354.08..354.08 rows=1254 width=863) (actual time=4.877..4.877 rows=1136 loops=1)
                    Buckets: 1024  Batches: 1  Memory Usage: 1057kB
                    ->  Seq Scan on reviews_article  (cost=0.00..354.08 rows=1254 width=863) (actual time=0.005..2.521 rows=1254 loops=1)
                          Filter: published
                          Rows Removed by Filter: 254
Total runtime: 17.058 ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:09:06.450

通过索引扫描遍历整个表比使用顺序扫描更糟糕。在偏移量 304 和偏移量 312 之间的某个地方，规划器决定它会通过索引执行更多的 I/O 弹跳，而不是使用 seq 扫描咬子弹。

有一些可能性。如前所述，一个是`SET enable_seqscan=0;`. 另一种*可能的*解决方案是增加`statistics`该表的参数并重新分析。（我假设在此测试之前对表格进行了新的分析。）

顺便说一句`LIMIT/OFFSET`，如果您正在这样做，这种重复是否有利于对结果集进行分页尚不清楚。

# c# - 错误 40：无法打开与 SQL Server 的连接

> ID：15918198
> 
> 赞同：0
> 
> 时间：2013-04-10T06:06:32.033
> 
> 标签：c#, sql-server-2005

我正在我的计算机上运行一个 Windows 应用程序，但是当我连接到我的 SQL Server 数据库时，出现了一个错误，它说

> 命名管道错误 40 无法打开与 SQL 服务器的连接。

我尝试了几个 MSDN 页面和链接，其中包括防火墙设置更改、SQL 配置设置，但没有任何效果。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T15:07:20.897

解决了 ！！简单地说，不要使用“Microsoft SQL Server (SqlClient)”作为数据源，而是使用“.NET Framework Data Provider for MySQL”使用 MySQL 连接的凭据（服务器名称、用户、密码、DB-可选）它现在应该可以工作了。

我为我的项目使用了 ADO 实体数据模型向导并将 .Net 配置为我的数据源。如果您在不同的场合出现“错误 40 ...”，请验证您的 DataSource 是否正确。

我像你们大多数人一样尝试寻找防火墙设置、服务器设置，但它比我想象的要简单，所以检查一下...

下载 --->.NET Framework Data Provider for MySQL 作为您的数据源/提供者：

[http://dev.mysql.com/get/Downloads/Connector-Net/mysql-connector-net-6.7.4.msi](http://dev.mysql.com/get/Downloads/Connector-Net/mysql-connector-net-6.7.4.msi)

它对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:48:34.363

请检查 SQL Server 配置管理器

[http://msdn.microsoft.com/en-us/library/ms174212.aspx](http://msdn.microsoft.com/en-us/library/ms174212.aspx)

启用协议、矿管、tcp 等。并检查 sql 浏览器服务是否正在运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T00:38:55.753

在我的情况下，在我“***开始***”“ **SQL Server(SQLEXPRESS)** ”之后问题得到了解决

**计算机管理 > 服务和应用程序 > 服务**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:17:16.767

各种原因分为五类：

1 不正确的连接字符串，例如使用SqlExpress。

2 SQL 实例上未启用 NP。

3 未启用远程连接。

4 服务器未启动，或在您的连接字符串中指向不是真正的服务器。

5 其他原因，例如不正确的安全上下文。

更多访问

[http://blogs.msdn.com/b/sql_protocols/archive/2007/03/31/named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server.aspx](http://blogs.msdn.com/b/sql_protocols/archive/2007/03/31/named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-23T08:47:34.707

在**控制面板**中搜索**服务**，您将在管理工具部分找到**服务（本地）**。

 ****选择它将显示系统中所有服务的窗口，找到您的**服务 SQLEXPRESS (MSSQLSERVER)**并单击开始。

它应该启动您的服务器实例。****

# php - php cURL忽略url中的变量

> ID：15918199
> 
> 赞同：1
> 
> 时间：2013-04-10T06:06:33.550
> 
> 标签：php, curl

我正在编写一个爬网脚本来读取网上商店的评级。

curl 部分现在给我带来了麻烦，因为它没有检索到正确的内容。

我使用 ajax 脚本从数据库中分批选择 url。我为 curl 提供了带有评分的页面的正确 url，但 Curl 正在检索没有 url 中可变部分的页面。

这是我传递给 Curl 的 url：`$actualurl`

[http://www.domain.com/epages/xxx.sf/de_DE/?ObjectPath=/Shops/15456062/Products/%22Briefkastenst%C3%A4nder%20Bobiround%22/SubProducts/%22Briefkastenst%C3%A4nder%20Bobiround% 20gr%C3%BCn%20RAL6005%22&ViewAction=ViewProductRating](http://www.domain.com/epages/xxx.sf/de_DE/?ObjectPath=/Shops/15456062/Products/%22Briefkastenst%C3%A4nder%20Bobiround%22/SubProducts/%22Briefkastenst%C3%A4nder%20Bobiround%20gr%C3%BCn%20RAL6005%22&ViewAction=ViewProductRating)

（这是我想从中读取所有 6 个评级 (Produktbewertungen) 的页面。）

但是通过 curl 调用，我从这个页面获取内容，这与没有 viewAction 的情况相同，我回显了输出

[http://www.domain.com/epages/xxx.sf/de_DE/?ObjectPath=/Shops/15456062/Products/%22Briefkastenst%C3%A4nder%20Bobiround%22/SubProducts/%22Briefkastenst%C3%A4nder%20Bobiround% 20gr%C3%BCn%20RAL6005%22](http://www.domain.com/epages/xxx.sf/de_DE/?ObjectPath=/Shops/15456062/Products/%22Briefkastenst%C3%A4nder%20Bobiround%22/SubProducts/%22Briefkastenst%C3%A4nder%20Bobiround%20gr%C3%BCn%20RAL6005%22)

我的 Curl 调用如下所示：

```
 $ch = curl_init();
            curl_setopt($ch, CURLOPT_TIMEOUT, 30);
            curl_setopt($ch, CURLOPT_USERAGENT, $agent);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
            curl_setopt($ch, CURLOPT_URL, $actualurl);              
            //read content of $url
            $result = curl_exec ($ch);
            curl_close ($ch); 
```

为什么 Curl 会忽略 url 的最后一部分（带有`&ViewAction=ViewProductRating`）

非常感谢，我还是 curl 的新手！

**编辑**

我从 4 个部分构建了上面提到的 url。零件如下：

```
$domainroot: http://www.domain.com/
$objectpath: epages/xxx.sf/de_DE/?ObjectPath
$ratingurl: %3D%2FShops%2F15456062%2FProducts%2F%2522Briefkastenst%25C3%25A4nder%2520Bobiround%2522%2FSubProducts%2F%2522Briefkastenst%25C3%25A4nder%2520Bobiround%2520gr%25C3%25BCn%2520RAL6005%2522%26amp%3B
$viewratings: ViewAction=ViewProductRating 
```

最后我将它们链接在一起：

```
$actualurl = $domainroot.$objectpath.$ratingurl.$viewratings; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:52:10.377

查询字符串的第一个参数应正确编码：

```
$queryString = 'ObjectPath=%2FShops%2F15456062%2FProducts%2F%22Briefkastenst' .     
'%C3%A4nder+Bobiround%22%2FSubProducts%2F%22Briefkastenst' . 
'%C3%A4nder+Bobiround+gr%C3%BCn+RAL6005' 
'&ViewAction=ViewProductRating'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:04:43.680

非常感谢你的帮助！你让我今天一整天都感觉很好！

并感谢任何试图提供帮助的人！

确实是 & 角色搞砸了。不知何故，当在数据库中输入 url 时，脚本有 & to `&amp;`，必须改回来

```
$ratingurl = str_replace('&amp;','&',$ratingurl); 
```

该 url 最初是使用 preg_match_all 获取的，并直接输入到数据库中

# objective-c - 更改静态变量的值

> ID：15918200
> 
> 赞同：-5
> 
> 时间：2013-04-10T06:06:35.740
> 
> 标签：objective-c, static-variables

如何更改 Objective-C 中静态变量的值？

这是允许的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:11:29.757

您可以使用`=`运算符在静态变量可见的文件中分配一个值。

# java - 在要执行的php页面上获取通过ajax传递的值

> ID：15918210
> 
> 赞同：0
> 
> 时间：2013-04-10T06:07:27.610
> 
> 标签：java, php, ajax, web-services

我想将 3 个参数组织名称、位置名称和建筑物名称作为参数发送到 ajax 我已将其编码如下我想获取从 ajax 传递的值以在我需要执行的页面中查看。

```
 //ajax calling
  function ajax()
  {
 var req;
var org=document.getElementById('category_id').value;
var loc=document.getElementById('category_id1').value; 
var bui=document.getElementById('category_id2').value;  
 if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
   req=new XMLHttpRequest();
 }
 else
 {// code for IE6, IE5
   req=new ActiveXObject("Microsoft.XMLHTTP");
 }
 req.open("POST", "addmachine.php?org="+org+"&loc="+loc+"&bui="+bui+"", true);
 req.send();
  req.onreadystatechange=function(){
   if(req.readyState==4&&req.status==200){
       $(".error").hide();
       result=req.responseText

 }

}

         <form name="theForm" method="post" action="addmachine.php" enctype="multipart/form-data" onSubmit="return validate();">
          <label for="orgname">Organisation Name</label>
                    <select style="width: 305px;text-align:left ;"  name="category_id" id="category_id" onchange="OrganisationName(this);">
                    <option value="">Select</option>
                     <option value="1">1</option>
                     <option value="2">2</option>
                                      </select>

                    <p>
        <label name="location">Location</label>

                     <select style="width: 305px;" name="category_id1" id="category_id1" onchange="LocationName(this);" >
                     <option value="">Select</option>
                     <option value="1">1</option>
                     <option value="2">2</option>

                     </select>
                    </p>
                    <p>
        <label for="building">Building</label>

                    <select style="width: 305px" name="category_id2" id="category_id2" onchange="BuildingName(this);" onchange="ajax(this);">
                    <option value="">Select</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    </select>
                    </p>
                    <label for="entr/exi">Entrance/Exit</label>
                    <input type="text" name="ent" id="ent" placeholder="enter entrance/exit"/>
                    <p>
                    <label for="type">Type</label>
                    <input type="text" name="type" placeholder="enter your work station"/>

          <label for="name">Name</label>
          <input type="text" id="workstnname" name="workstnname" placeholder="enter your work station" onblur="return name();" onkeypress="return onKeyPressBlockNumbers(event);">
          <label for="description">Description</label>
          <textarea name="description" style="height:150px;width:300px;"></textarea>
          <label for="machinetype">Machine Type</label>
                    <select style="width: 305px;text-align:left;"  name="machinetype">
                    <option value="">Select</option>
                    <option value="kiosk">kiosk</option>
                    <option value="workstation">workstation</option>

                  </select>
                    <p>
                    <input type="submit" name="submit" value="Submit">
                    </p>

        </form>
</div> 
```

在这里，我应该调用 ajax 来执行一个名为 addmachine.php 的 php 页面，其参数为选定的组织、位置和建筑，现在我担心为什么我没有从 ajax 得到响应，谁能告诉我在哪里我做错了要在建筑物的onchange上执行的php在这里

```
<?php
session_start();
$org=$_GET['org'];
$loc=$_GET['bui'];
$bui=$_GET['loc'];
$addmachine=array(
'org_name'=>$org,
'loc_name'=>$loc,
'building_name'=>$bui
 );
   echo json_encode($addmachine);
  $url='web service url';
    $data="$addmachine";
     echo("Input to Server : ".$data."\n");
    $ch=curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($addmachine));
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));
    $response=  curl_exec($ch);
    echo('\n'."Server response : \n \n".$response);
    curl_close($ch);
      ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:20:36.050

如果您通常通过单击提交来发布表单，则需要将您的 php 代码更改为

```
$org=$_POST['category_id'];
$loc=$_POST['category_id1'];
$bui=$_POST['category_id2']; 
```

如果你使用你的 ajax 函数，那么它应该是

```
$org=$_GET['org'];
$loc=$_GET['bui'];
$bui=$_GET['loc']; 
```

导致您在查询字符串中使用 GET 变量（删除 org 之前的额外 & 符号）

```
req.open("POST", "addmachine.php?org="+org+"&loc="+loc+"&bui="+bui+"", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:20:40.047

你有额外`&`的`?&org`

```
req.open("POST", "addmachine.php?&org="+org+"&loc="+loc+"&bui="+bui+"", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:10:21.077

放

```
var org=document.getElementById('category_id').value;
var loc=document.getElementById('category_id1').value; 
var bui=document.getElementById('category_id2').value; 
```

在你的里面

```
function ajax() 
```

然后尝试一次。

# c++ - StackTrace C++ 应用程序

> ID：15918212
> 
> 赞同：1
> 
> 时间：2013-04-10T06:07:32.283
> 
> 标签：c++, stack-trace

我编写了一个 C++ 堆栈应用程序并使用 CYGWIN g++ 编译器运行它。应用程序由于未完美处理异常而崩溃。

它给了我堆栈跟踪转储文件 Stack.exe.stackdump。我是这个 StackTrace 的新手，有人能告诉我如何阅读它吗？它意味着什么？

只是根据收到的评论说清楚，堆栈数据结构只是使应用程序崩溃并给出stackTrace的示例。我的意思是当程序崩溃并且与我的堆栈数据结构应用程序无关的任何情况下都会生成此堆栈跟踪，我只是将其用作程序崩溃的现有代码。

我的生成异常的代码片段：

```
class RuntimeException{
    private:
    string errorMsg;
    public:
    RuntimeException(const string& err){errorMsg = err;}
    string getMessage() const {return errorMsg;}
    };

class StackEmpty : public RuntimeException{
public:
StackEmpty(const string& err) : RuntimeException(err){}
};

template <typename E >
const E& ArrayStack<E> ::top() const throw(StackEmpty)
{

        if(empty()) throw StackEmpty("Top of Empty Stack");
        return S[t];

    }

int main()
{
    ArrayStack <int> A;

    cout << "######\n";

    cout << A.top() << "\n";
    cout << "######\n";

    } 
```

输出 ：

```
$ ./Stack
######
Aborted (core dumped) 
```

它生成一个文件 Stack.exe.stackdump ，内容如下：

```
Stack trace:
Frame     Function  Args
0022A774  7608C313  (000000C0, 0000EA60, 00000000, 0022A8A8)
0022A788  7608C2C2  (000000C0, 0000EA60, 000000A4, 0022A884)
0022A8A8  610DC559  (00000000, 00000000, 00000000, 00000000)
0022A998  610D9913  (00000000, 6110073E, 003B0023, 00230000)
0022A9F8  610D9DEE  (0022A9D0, 6110073E, 003B0023, 00000006)
0022AAA8  610D9F40  (000008F4, 00000006, 00000000, 00000000)
0022AAC8  610D9F6C  (00000006, 00000006, 0022AB38, 00404C6B)
0022AAF8  610DA233  (0022AB28, 611A1E9B, 0022ABAC, 00000001)
0022AB48  00404777  (00000000, 00000000, 0022AC18, 004142CB)
0022AB58  00404166  (20048588, 004460E0, 00410F78, 0040F89F)
0022AC18  004142CB  (0022AC50, 00445218, 20010100, 004011B5)
0022AC68  004011EC  (00000001, 0022AC90, 20010100, 612756CA)
0022ACF8  6100763A  (00000000, 0022CD78, 61006C50, 00000000)
End of stack trace 
```

我想知道这个文件意味着什么以及如何阅读它，谷歌搜索了很多但找不到满意的答案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:14:10.483

我会尝试解码转储在调试器中的核心。

```
gdb ./Stack.exe ./Stack.exe.stackdump

backtrace 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:13:09.910

这会在崩溃时为您提供[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)。这与您似乎试图实现的[堆栈数据结构](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)无关。

对于调用堆栈上的每个函数，堆栈转储显示堆栈指针、函数地址和前四个参数。与其尝试使用堆栈转储，不如使用调试器对程序进行故障排除可能更容易。

# ios - iPhone 中的全分辨率保存

> ID：15918221
> 
> 赞同：1
> 
> 时间：2013-04-10T06:08:32.927
> 
> 标签：ios, image, graphics

我正在尝试创建一个 iPhone 应用程序，允许用户进行一些照片编辑，例如纹理、扭曲或过滤图像。

当我使用缩小到 320x460（或某些此类分辨率）的图像时，该应用程序运行良好。但我想给用户以全分辨率保存图像的自由。

您能否让我知道实现这种机制的最佳方法。

（我最初的计划是在 XML 中记录用户的所有操作，然后在单击应用/保存按钮时将所有操作应用到磁盘中的原始图像。但是由于有多种扭曲和纹理，因此跟踪一切是成为噩梦）。

有人可以让我知道这样做的常用方法。

PS：我尝试使用苹果的库将 320x460 插值到原始尺寸，但对于较大的图像，结果远不能令人满意

# php - 卷曲给出结果失败

> ID：15918223
> 
> 赞同：0
> 
> 时间：2013-04-10T06:08:33.660
> 
> 标签：php

我在 php 中的服务器端工作。最初测试此代码：

```
 $apiKey = "";

$registrationIDs = array( "" );

$message = "hello";

$url = 'https://android.googleapis.com/gcm/send';

$fields = array(
                'registration_ids'  => $registrationIDs,
                'data'              => array( "message" => $message ),

                );

$headers = array( 
                    'Authorization: key=' . $apiKey,
                    'Content-Type: application/json'

                );

$ch = curl_init();

$u=curl_setopt( $ch, CURLOPT_URL, $url );

$p=curl_setopt( $ch, CURLOPT_POST, true );

$f=curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);

$h=curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);

$t=curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

$c=curl_setopt($ch, CURLOPT_VERBOSE, true);

$j=curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

$result = curl_exec($ch);

 $responseInfo    = curl_getinfo($ch);
   $header_size    = curl_getinfo($ch, CURLINFO_HEADER_SIZE); 
   $responseHeader = substr($result , 0, $header_size);
   $responseBody   = substr($result , $header_size);

    echo 'Header: <br>'. $responseHeader;
    echo 'Body: <br>'. $responseBody;

curl_close($ch);

var_dump($ch);

var_dump($result);

but on :

var_dump($ch);

var_dump($result); 
```

浏览器给出：

> 标题：正文：资源（2）类型（未知）
> 
> 布尔（假）

任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:17:25.373

将此选项放在 curl 中并尝试，可能对您有用

```
curl_setopt($s, CURLOPT_SSL_VERIFYPEER, false); 
```

有关更多信息，请参阅[curl_setopt](http://php.net/manual/en/function.curl-setopt.php)

# java - 在带有套接字参数的构造函数的情况下自动装配

> ID：15918225
> 
> 赞同：0
> 
> 时间：2013-04-10T06:08:48.320
> 
> 标签：java, spring, dependency-injection, inversion-of-control, autowired

我的主要代码

```
public static void main(String[] args) {
    System.out.println("Hello World!");
    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(
            "DataSource.xml");
    App app = applicationContext.getBean(App.class);
    app.start();
} 
```

还有我的启动方法

```
public void start() {

    try {
        ServerSocket mobCom = new ServerSocket(9846);
        ExecutorService executorService = Executors.newCachedThreadPool();

        while (true) {
            Socket socket = mobCom.accept();
            PortService portService = new PortService(socket);
            executorService.submit(portService);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

但是我希望 PortService 对象是从 Spring 而不是直接创建的，因为它具有用于通信的 db 类。我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:57:11.720

我过去通过这样做实现了这一点 -

为您的 PortService 实现一个工厂类。

```
@Service
public class PortServiceFactory {
    private SomeObject someObject;

    @Autowired
    public PortServiceFactory(SomeObject someObject) {
        this.someObject = someObject;
    }

    public PortService getPortService(Socket socket) {
        return new PortService(someObject, socket);
    }
} 
```

在你有 start() 方法的类中自动装配这个工厂。

代替

```
PortService portService = new PortService(socket); 
```

和

```
PortService portService = portServiceFactory.getPortService(socket); 
```

# android - 将图像从 Android 上传到 WebView 中的 ASP.NET MVC Web 应用程序

> ID：15918226
> 
> 赞同：2
> 
> 时间：2013-04-10T06:08:49.100
> 
> 标签：android, asp.net-mvc-4, upload, webview

目前我已经在我的 Android 应用程序中启动了一个 WebView 来显示我的 MVC 4 Web 应用程序。

在这个网络应用程序中，我有一个按钮触发一个 Android 功能，该功能目前初始化扫描仪并将扫描的图像存储到手机上。由于 Android 设备将通过 WebView 访问它，因此是否有简单的方法将此图像上传到 Web 应用程序服务器？

而且我想知道是否有任何关于将图像从 Android 上传到 ASP.NET MVC 4 的最新教程，到目前为止，我发现的唯一教程是使用 php 完成的，或者已经过时了，除非绝对需要，否则我想避免使用这些教程。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:57:22.633

我认为[这个答案](https://stackoverflow.com/questions/7632737/android-send-a-image-and-save-url/)会帮助你。

在您的 ASP.NET MVC 中，您需要将**控制器**设置为

```
[HttpPost]
 public ActionResult UploadImage(HttpPostedFileBase file) {

 if (file.ContentLength > 0) {
var fileName = Path.GetFileName(file.FileName);
var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
file.SaveAs(path);
}

return RedirectToAction("Index");
} 
```

# android - 如何更新已经没有图片的联系人的图片

> ID：15918228
> 
> 赞同：1
> 
> 时间：2013-04-10T06:08:51.487
> 
> 标签：android

我的代码适用于已经有图片的联系人，但如果联系人已经没有图片，它不会更新。

```
Bitmap photo =pic;
ByteArrayOutputStream stream = new ByteArrayOutputStream();
photo.compress(Bitmap.CompressFormat.JPEG, 100, stream);    
if(! ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
        .withSelection(
                ContactsContract.Data.RAW_CONTACT_ID + "=" + RawId + " AND "
                        + ContactsContract.Data.MIMETYPE +     "='"
                        +   ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE+ "'", null)

         .withValue(ContactsContract.CommonDataKinds.Photo.PHOTO,stream.toByteArray())
         .build()))
{
Toast.makeText(getApplicationContext(), "Failed to update",  Toast.LENGTH_SHORT).show();}
else if(noPhoto==1)
{

int rawContactId = -1;
Cursor c = getContentResolver().query(ContactsContract.Data.CONTENT_URI, null,   ContactsContract.Data.CONTACT_ID + "=?", new String[] {contactID2}, null);
   if(c.moveToFirst())
   {

           ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)

                    .withValue(ContactsContract.Data.RAW_CONTACT_ID,RawId )
                    .withValue(ContactsContract.Data.IS_SUPER_PRIMARY, 1)
                    .withValue(ContactsContract.Data.MIMETYPE,      ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.Data.DATA15, stream.toByteArray())
                   .build());

   } 
```

# android - 单击列表视图中的最后一个复选框时出错

> ID：15918229
> 
> 赞同：0
> 
> 时间：2013-04-10T06:08:54.190
> 
> 标签：android, android-listview

我有一个奇怪的问题..我有一个包含复选框的列表视图..我希望用户选择它们，然后我得到选定的项目 neme 并将它们添加到一个循环中..我曾经`ArrayAdapter`这样做，每个想法都很好，但是当我检查时最后一项我第一次收到错误但如果我第一次检查其他复选框我没有收到错误..这里是 clicklistener

```
 package co.tosca.persianpoem;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.database.Cursor;
import android.graphics.Color;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.TextView;
import android.widget.Toast;

public class InteractiveArrayAdapter extends ArrayAdapter<String> {

      private final List<String> list;
      private final Activity context;
      public ArrayList<String> items = new ArrayList<String>(); 
      public ArrayList<String> main_db_id = new ArrayList<String>();
      public List<String> database_ids = new ArrayList<String>();

      public InteractiveArrayAdapter(Activity context, List<String> list) {
        super(context, R.layout.database_list_item, list);
        this.context = context;
        this.list = list;
        persian_poem_class main=new persian_poem_class(context);
        String mySQL = "SELECT DISTINCT id as _id "+","+ClubCP.COLUMN_POET_ID+","+ClubCP.COLUMN_PARENT_ID
                + " from cat"
                + " where " + ClubCP.COLUMN_PARENT_ID+"= 0 "
                + " order by " + ClubCP.COLUMN_POET_ID;
        Cursor c= main.getData(mySQL);

        c.moveToFirst();
        while(!c.isAfterLast()) {
            main_db_id.add(c.getString(c.getColumnIndex(ClubCP.COLUMN_POET_ID))); //add the item
             c.moveToNext();
        }
        Log.i("main_db_id", main_db_id.toString());
        File path=new File(ClubCP.SDcardPath+"/temp/database/");
       database_ids =   main.directoryPath(path,true);
        Log.i("database_ids", database_ids.toString());
      }

      public ArrayList<String> getSelectedItems(){
      return items;
      }

      @Override
      public View getView (int position, View convertView, ViewGroup parent) {
          View itemView = convertView ;
          final int pos =position;
            if (itemView == null) {

            LayoutInflater inflator = context.getLayoutInflater();
            itemView = inflator.inflate(R.layout.database_list_item, null);

            CheckBox cb = (CheckBox)itemView.findViewById(R.id.chk_database_list_item);
            TextView tv =(TextView)itemView.findViewById(R.id.txt_database_status);
            Log.i("aray adapter","set caption");
            cb.setText(list.get(position));

            for(int i=0;i<database_ids.size();i++){
                boolean found = false;
                for(int j=0;j<main_db_id.size();j++){
                        if((database_ids.get(position).equals(main_db_id.get(j)))){
                                found = true;
                                break;
                        }
                }
                if(found) {
                        tv.setText(context.getString(R.string.is_in_db));
                        tv.setTextColor(Color.parseColor(context.getString(R.color.red)));
                } else {
                    tv.setText(context.getString(R.string.is_not_in_database));
                    tv.setTextColor(Color.parseColor(context.getString(R.color.green)));                                            
                }
        }

            cb.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    CheckBox myCb = (CheckBox)v;

                    if (myCb.isChecked()) {
                        items.add(pos, list.get(pos));
                        Toast.makeText(context, items.toString(), 1).show();
                    } else {
                        items.remove(pos);
                    }
                }
            });
            }
            return itemView;
        }
    } 
```

这是错误

```
04-10 10:24:51.722: E/AndroidRuntime(1938): FATAL EXCEPTION: main
04-10 10:24:51.722: E/AndroidRuntime(1938): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0
04-10 10:24:51.722: E/AndroidRuntime(1938):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at java.util.ArrayList.add(ArrayList.java:143)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at co.tosca.persianpoem.InteractiveArrayAdapter$1.onClick(InteractiveArrayAdapter.java:97)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at android.view.View.performClick(View.java:3534)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at android.widget.CompoundButton.performClick(CompoundButton.java:104)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at android.view.View$PerformClick.run(View.java:14263)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at android.os.Handler.handleCallback(Handler.java:605)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at android.os.Looper.loop(Looper.java:137)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at android.app.ActivityThread.main(ActivityThread.java:4441)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at java.lang.reflect.Method.invoke(Method.java:511)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-10 10:24:51.722: E/AndroidRuntime(1938):     at dalvik.system.NativeStart.main(Native Method) 
```

它说不在捆绑中，所以我认为问题在于在列表视图中添加项目，但不知道为什么:(

这是一个新的logcat

```
04-10 20:23:14.947: D/dalvikvm(7732): GC_FOR_ALLOC freed 45K, 3% free 7646K/7875K, paused 23ms
04-10 20:23:14.947: I/dalvikvm-heap(7732): Grow heap (frag case) to 8.968MB for 1536016-byte allocation
04-10 20:23:14.977: D/dalvikvm(7732): GC_CONCURRENT freed <1K, 3% free 9145K/9415K, paused 1ms+1ms
04-10 20:23:15.097: D/libEGL(7732): loaded /system/lib/egl/libGLES_android.so
04-10 20:23:15.117: D/libEGL(7732): loaded /system/lib/egl/libEGL_adreno200.so
04-10 20:23:15.137: D/libEGL(7732): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
04-10 20:23:15.147: D/libEGL(7732): loaded /system/lib/egl/libGLESv2_adreno200.so
04-10 20:23:15.227: I/Adreno200-EGLSUB(7732): <ConfigWindowMatch:2078>: Format RGBA_8888.
04-10 20:23:15.247: D/OpenGLRenderer(7732): Enabling debug mode 0
04-10 20:23:17.087: D/dalvikvm(7732): GC_FOR_ALLOC freed 13K, 3% free 9167K/9415K, paused 12ms
04-10 20:23:17.097: I/dalvikvm-heap(7732): Grow heap (frag case) to 10.454MB for 1536016-byte allocation
04-10 20:23:17.127: D/dalvikvm(7732): GC_CONCURRENT freed <1K, 3% free 10667K/10951K, paused 2ms+5ms
04-10 20:23:17.177: D/TextLayoutCache(7732): Using debug level: 0 - Debug Enabled: 0
04-10 20:23:17.197: I/Adreno200-EGLSUB(7732): <ConfigWindowMatch:2078>: Format RGBA_8888.
04-10 20:23:17.338: D/OpenGLRenderer(7732): Flushing caches (mode 0)
04-10 20:23:19.057: I/file_list(7732): [khiam.db, prvin-aEtsami.db]
04-10 20:23:19.057: I/main_db_id(7732): [3]
04-10 20:23:19.077: I/database_ids(7732): [3, 8]
04-10 20:23:19.087: I/aray adapter(7732): set caption
04-10 20:23:19.107: I/Adreno200-EGLSUB(7732): <ConfigWindowMatch:2078>: Format RGBA_8888.
04-10 20:23:19.117: I/aray adapter(7732): set caption
04-10 20:23:19.137: I/aray adapter(7732): set caption
04-10 20:23:19.297: D/OpenGLRenderer(7732): Flushing caches (mode 0)
04-10 20:23:20.387: I/getSelectedItems_befor(7732): []
04-10 20:23:20.387: I/list(7732): [khiam.db, prvin-aEtsami.db]
04-10 20:23:20.387: D/AndroidRuntime(7732): Shutting down VM
04-10 20:23:20.387: W/dalvikvm(7732): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
04-10 20:23:20.397: E/AndroidRuntime(7732): FATAL EXCEPTION: main
04-10 20:23:20.397: E/AndroidRuntime(7732): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0
04-10 20:23:20.397: E/AndroidRuntime(7732):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at java.util.ArrayList.add(ArrayList.java:143)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at co.tosca.persianpoem.InteractiveArrayAdapter$1.onClick(InteractiveArrayAdapter.java:102)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at android.view.View.performClick(View.java:3534)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at android.widget.CompoundButton.performClick(CompoundButton.java:104)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at android.view.View$PerformClick.run(View.java:14263)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at android.os.Handler.handleCallback(Handler.java:605)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at android.os.Looper.loop(Looper.java:137)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at android.app.ActivityThread.main(ActivityThread.java:4441)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at java.lang.reflect.Method.invoke(Method.java:511)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-10 20:23:20.397: E/AndroidRuntime(7732):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:12:55.070

```
items = ( items == null ) ? new ArrayList<Object>(list.size) : items; 
```

在初始化项目时执行此操作。希望这会有所帮助。您正在尝试将项目添加到`ArrayList`没有您在`add`命令中提到的位置的项目。尝试将上述行添加为`getView`方法中的第一条语句。而且还不是添加使用`items.set(pos, list.get(pos));`

# c# - 如何使 url 对 asp mvc 路由友好？

> ID：15918230
> 
> 赞同：0
> 
> 时间：2013-04-10T06:08:55.593
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing, url-routing

我正在使用 asp mvc3。我想学习如何使我的 Urls 友好。这是我的存储库层：

```
public Section GetBySectionId(int sectionId)
{
    return context.Sections.Include("Groups").Include("Partners").Where(s => s.SectionId == sectionId).FirstOrDefault();
} 
```

这是应用层：

```
public Section GetBySectionId(int sectionId)
{
    return sectionRepo.GetBySectionId(sectionId);
} 
```

这是控制器：

```
public ActionResult Details(int id)
{
    var section = Mapper.Map<SectionViewModel>(sectionApp.GetBySectionId(id));
    return View(section);
} 
```

现在，例如，如果我使用 id=3 转到某个部分的详细信息，浏览器 url 会更改为，`~/Section/Details/3`但我希望它是。`~/Section in persian/Details in persian/My section name`我该怎么做。如何使用 asp mvc 路由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:41:25.980

你应该像这样改变你的路由

```
routes.MapRoute(..., "{controller}/{action}/{id}", ...); 
```

...并将其更改为以下内容：

```
routes.MapRoute(..., "{controller}/{action}/{name}", ...); 
```

然后让您的操作使用名称而不是 ID：

```
Html.ActionLink(item.Name, "Details", new {item.Name}) 
```

# c# - 使用 SevenZipSharp 解压 bzip2 文件，在文件中添加一个不必要的 tar 扩展名，并且无法获得正确的存档信息？

> ID：15918236
> 
> 赞同：0
> 
> 时间：2013-04-10T06:09:18.110
> 
> 标签：c#, 7zip, bzip2, sevenzipsharp

使用以下代码将 bzip2 文件提取到指定目录：

```
string[] archive_files = null;
using (SevenZip.SevenZipExtractor extrator = new SevenZip.SevenZipExtractor(source_file));
{
    extrator.ExtractArchive(dest_directory);
    archive_files = extrator.ArchiveFileNames.ToArray();
} 
```

，但是我在目标目录中有一个文件，其中添加了 .tar，如果我删除最后一个扩展名，该文件是正确的。但是从提取器返回的存档文件是“[no name]”而不是存档文件名，似乎它没有从源文件中获取存档文件信息。这是一个错误，有什么想法吗？

# c# - 登录失败。文件 xx.rpt 中的错误：无法连接：登录参数不正确

> ID：15918237
> 
> 赞同：0
> 
> 时间：2013-04-10T06:09:31.910
> 
> 标签：c#, sql-server-2008, authentication, exception-handling, crystal-reports

WPF 客户端应用程序连接到服务器中的数据库。客户端电脑没有安装 MS sql 服务器。所以我在客户端 PC 中安装了 sql server native client 最新版本。但是当我尝试查看报告时，我收到以下错误消息。我仔细检查了 app.config 中的数据库连接字符串，它包含正确的登录信息。

```
<message>Logon failed.Error in File EmployeeMealSummary {B32AECDC-7F60-4BD9-B2C9-F8153BF2CB5A}.rpt: Unable to connect: incorrect log on parameters.</message>   
<source>rptcontrollers.dll</source>
<stackTrace>at CrystalDecisions.ReportAppServer.Controllers.DatabaseControllerClass.SetTableLocation(ISCRTable CurTable, ISCRTable NewTable) 
```

在 CrystalDecisions.CrystalReports.Engine.Table.set_Location（字符串值）

我附上了代码。请帮我解决这个问题。

```
private void SetDBLogonForReport(ConnectionInfo connectionInfo, ReportDocument     reportDocument)
{
    CrystalDecisions.Shared.TableLogOnInfo crTableLogonInfo;
    CrystalDecisions.CrystalReports.Engine.Tables crTables = _report.Database.Tables;

    foreach (CrystalDecisions.CrystalReports.Engine.Table crTable in crTables)
    {
        crTableLogonInfo = crTable.LogOnInfo;
        crTableLogonInfo.ConnectionInfo.LogonProperties.Clear();
        crTableLogonInfo.ConnectionInfo.Attributes.Collection.Clear();
        crTableLogonInfo.ConnectionInfo.DatabaseName = null;
        crTableLogonInfo.ConnectionInfo.ServerName = connectionInfo.ServerName;
        crTableLogonInfo.ConnectionInfo.UserID = connectionInfo.UserID;
        crTableLogonInfo.ConnectionInfo.Password = connectionInfo.Password;
        crTableLogonInfo.ConnectionInfo.DatabaseName = connectionInfo.DatabaseName;
        crTable.ApplyLogOnInfo(crTableLogonInfo);

        if (crTable.Name == "vEmployee" || crTable.Name == "TB_USER_DEPT" )
        {
            CenUtility.ErrorLog.CreateLog(new ArrayTypeMismatchException());
            crTable.Location = connectionInfo.DatabaseName + ".dbo." + crTable.Location; 
        }
        else
        {
            crTable.Location = connectionInfo.DatabaseName + ".CafDB." + crTable.Location;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-19T06:27:29.637

我遇到了同样的问题，我设置了数据库的位置并更新了表格检查您是否通过了正确的方法（数据库名称、密码、用户 ID、服务器名称）尝试这种方式并告诉我它是否以正确的方式工作

# pointers - 如何使用内存 BIO 的指针进行读写？

> ID：15918239
> 
> 赞同：4
> 
> 时间：2013-04-10T06:09:38.647
> 
> 标签：pointers, openssl, read-write

首先我像这样创建内存 BIO

```
BIO *mem = BIO_new(BIO_s_mem());
BIO_puts(mem, "Hello World\n"); 
```

并得到这样的指针

```
BUF_MEM *bptr;
BIO_get_mem_ptr(mem, &bptr); 
```

我的疑问是如何使用**bptr**指针进行读写？
这可能吗..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:04:08.790

BUF_MEM 的定义如下：

```
typedef struct buf_mem_st BUF_MEM;
struct buf_mem_st
{
size_t length;  /* current number of bytes */
char *data;
size_t max; /* size of buffer */
}; 
```

您可以看到它基本上是 char * 缓冲区的包装器。您可以访问数据并执行读写操作（同时保持结构的长度和最大值的约束）。

# sql - Oracle - 比较列的默认值

> ID：15918240
> 
> 赞同：2
> 
> 时间：2013-04-10T06:09:44.103
> 
> 标签：sql, oracle

我正在尝试识别默认值为 NULL 或未设置默认值的数据库列。为此，我正在执行查询，例如..

```
SELECT T.TABLE_NAME,CL.COLUMN_NAME,CL.DATA_DEFAULT

    FROM   SYS.USER_TABLES T
               JOIN SYS.USER_TAB_COLUMNS CL ON T.TABLE_NAME = CL.TABLE_NAME

    WHERE  CL.DATA_DEFAULT IS NULL

    ORDER  BY t.table_name 
```

在此查询的输出中，我得到了未设置默认值的列（空），但我没有得到默认值为 NULL 的列

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:21:41.683

您也可以尝试以下查询 -

```
WITH xml AS (
         SELECT XMLTYPE(
                    DBMS_XMLGEN.GETXML('SELECT table_name, column_name ,DATA_DEFAULT FROM user_tab_cols')
                    ) AS xml
          FROM   dual
          )
SELECT * FROM ( 
 SELECT extractValue(xs.object_value, '/ROW/TABLE_NAME')       AS table_name
  ,      extractValue(xs.object_value, '/ROW/COLUMN_NAME')      AS column_name
  ,      extractValue(xs.object_value, '/ROW/DATA_DEFAULT')  AS DATA_DEFAULT
  FROM   xml x
  ,      TABLE(XMLSEQUENCE(EXTRACT(x.xml, '/ROWSET/ROW'))) xs
  ) WHERE (DATA_DEFAULT IS NULL OR UPPER(DATA_DEFAULT) = 'NULL')
; 
```

上面的查询存在一些问题，您需要花费更多时间才能获得结果，但您会得到预期的正确结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T06:16:52.757

在 oracle 中（至少对于 11g），如果您不给列提供默认值，就像给它一样`null`。

[看这个例子](http://www.sqlfiddle.com/#!4/c875d/2)

* * *

**更新**感谢@pratik garg 评论，我现在明白您真正要求的是一种查询`long`列的方法。
因为正如@PratikGrag 在您定义`defualt null`LONG 列时所说的那样，`DATA_DEFAULT`它将包含“null”。

由于`USER_TAB_COLUMNS`没有可用的 ROWID，我能想到的唯一方法是使用 PLSQL。

像这样的东西：

```
BEGIN
FOR rec IN (SELECT T.TABLE_NAME,CL.COLUMN_NAME,CL.DATA_DEFAULT
    FROM   SYS.USER_TABLES T
               JOIN SYS.USER_TAB_COLUMNS CL ON T.TABLE_NAME = CL.TABLE_NAME
   ORDER  BY t.table_name) LOOP

  IF rec.DATA_DEFAULT = 'null' THEN
    dbms_output.put_line(rec.table_name || ' ' || rec.COLUMN_NAME);
  END IF;
END LOOP;
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:17:54.200

有，

```
SELECT T.TABLE_NAME,CL.COLUMN_NAME,CL.DATA_DEFAULT

FROM   SYS.USER_TABLES T
           JOIN SYS.USER_TAB_COLUMNS CL ON T.TABLE_NAME = CL.TABLE_NAME

WHERE  ( CL.DATA_DEFAULT IS NULL OR LENGTH(CL.DATA_DEFAULT || '') < 1 )

ORDER  BY t.table_name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T06:17:59.443

空意味着 NULL 它是一回事......

# ios - 在 iOS 中记录触摸事件

> ID：15918244
> 
> 赞同：0
> 
> 时间：2013-04-10T06:09:55.667
> 
> 标签：ios, objective-c, touch, record

我想在 iOS 中记录触摸事件。我在一些论坛上读到 IOHIDFamily 可以用于此目的。但我找不到太多信息。我如何使用 IOHIDFamily 或其他方法在 iOS 中记录触摸事件

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T06:01:43.933

在 Xcode 中，您可以尝试 UIAutomation 工具。对于第三方工具，Monkey Talk 可能是一个不错的选择。

# asp.net - 如何使用CSS垂直向下移动div

> ID：15918251
> 
> 赞同：17
> 
> 时间：2013-04-10T06:10:38.603
> 
> 标签：asp.net, css, visual-studio-2010, class, html

我是 CSS 新手，我想将一个 div 部分向下移动（请参见下面的附图）：

![在此处输入图像描述](https://i.stack.imgur.com/GLRTw.png)

如何使 div.title “向下浮动”，以便它整齐地放置在主 div 的左下角（水色框）。

我试过垂直对齐，但它不起作用。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-10T06:12:47.383

给margin-top

```
div{margin-top:10px;} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-10T06:13:17.657

你可以让你的蓝色`div` `position: relative`，然后给`div.title` `position:absolute;`和`bottom: 0px`

这是一个工作演示.. [http://jsfiddle.net/gLaG6/](http://jsfiddle.net/gLaG6/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-06T11:51:12.590

我在这里没有看到任何提到 flexbox，所以我将说明：

> HTML

```
 <div class="wrapper">
   <div class="main">top</div>
   <div class="footer">bottom</div>
 </div> 
```

> CSS

```
 .wrapper {
   display: flex;
   flex-direction: column;
   min-height: 100vh;
  }
 .main {
   flex: 1;
 }
 .footer {
  flex: 0;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-07T01:34:04.523

标准 16px 字体的标准宽度空间是 4px。

资料来源：http: [//jkorpela.fi/styles/spaces.html](http://jkorpela.fi/styles/spaces.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-12T06:22:48.313

如果 div.title 是一个 div 然后把这个：

```
left: 0;
bottom: 0; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-16T21:25:56.000

试试这个配置：

```
 position to absolute
    width to 100%
    height to 100px
    bottom to 10
    background-color: blue 
```

这可以帮助实际将 div 移动到底部。只需进行相应的修改。

# javascript - 将 Google Maps API 中的视口更改为 Fusion Table Polygon Layer

> ID：15918253
> 
> 赞同：1
> 
> 时间：2013-04-10T06:10:44.170
> 
> 标签：javascript, google-maps-api-3, viewport, google-fusion-tables

我开发了一个 javascript Web 应用程序，它将显示来自 Google Maps API 画布上的 Google Fusion Table 的单个多边形图层（尽管有些是多部分的），但多边形的大小和位置各不相同。当我加载它们中的每一个时，我想设置地图的视口，以便用户可以实际找到多边形。

我的第一个想法是使用 `google.maps.Maps.fitBounds()`，但为此，我似乎需要以某种方式将我的几何图形转换为`LatLngBounds`我不知道该怎么做的。我已经看到了点要素的示例，但没有看到多边形。是否有一个快速脚本可以将 KML 几何解析为点，然后我可以使用这些点即时创建 LatLngBounds 或作为新的表属性？

我也愿意接受其他方式来重置视口——这只是我现在设想的途径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:46:59.543

您需要使用 GViz（[使用 GViz 和 geoxml3](http://www.geocodezip.com/geoxml3_test/www_advocacy_ucla_edu_Assembly_MapC.html)的示例）或[Fusion Tables API v1](https://developers.google.com/fusiontables/docs/v1/getting_started)查询 FusionTable 中的多边形数据，使用 google.maps.LatLngBounds.extend 将所有坐标添加到[google.maps.LatLngBounds](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)然后调用[google .maps.Map.fitBounds](https://developers.google.com/maps/documentation/javascript/reference#Map)在结果边界上。

# c++ - 是否可以只初始化一次夹具并在多个测试用例中使用它？

> ID：15918255
> 
> 赞同：9
> 
> 时间：2013-04-10T06:11:08.040
> 
> 标签：c++, unit-testing, boost, fixtures, boost-test

是否可以只初始化一次夹具并在同一测试套件中的多个测试用例中使用它？在下面的例子中，fixture 被多次构造和破坏：

```
struct F {
    F() : i( 0 ) { BOOST_TEST_MESSAGE( "setup fixture" ); }
    ~F()         { BOOST_TEST_MESSAGE( "teardown fixture" ); }

    int i;
};

BOOST_FIXTURE_TEST_SUITE( s, F )

BOOST_AUTO_TEST_CASE( test_case1 )
{
    BOOST_CHECK( i == 1 );
}

BOOST_AUTO_TEST_CASE( test_case2 )
{
    BOOST_CHECK_EQUAL( i, 0 );
}

BOOST_AUTO_TEST_SUITE_END() 
```

但我希望夹具在测试套件开始时**只构建一次**，并在其中的所有测试用例之间共享。可能吗？退出测试套件后将调用析构函数。
我正在使用 Boost Test Framework，但使用 UnitTest++ 等其他框架没有问题。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-10T07:11:27.987

每个测试用例都派生自测试套件夹具，该夹具在每个测试用例开始时构建并在完成时销毁（在您的情况下，`test_case1`&`test_case2`都派生自`F`）。夹具为每个单独的测试用例配置和清理环境。

对于单元测试，这通常是首选策略——每个测试用例都是独立的并且完全是原子的。

在某些情况下（例如集成测试），最好一次性获取昂贵的资源并在**所有**测试用例中保留它。这可以通过 GLOBAL FIXTURE 来完成，它在测试运行开始时构建并在测试退出时销毁。

如果任何测试用例需要全局资源的不同设置/配置，则不能使用 GLOBAL FIXTURE，您应该重新考虑您的测试策略，以便每个测试用例配置和清理自己的环境。

不幸的是，测试用例无法直接访问全局测试夹具，因此您需要提供一种机制，允许它们访问资源（例如，通过全局变量或单例）。

在下面的示例中`MyFixture`是一个持有资源的单例。例如

```
struct MyFixture
{
    static MyFixture*& instance() { static MyFixture* s_inst = 0;
    return s_inst; }

    MyFixture()
    {
        instance() = this;
        x = 10;
        BOOST_TEST_MESSAGE( "setup fixture" );
    }

    ~MyFixture()
    {
        BOOST_TEST_MESSAGE( "teardown fixture" );
    }

    int x;
};

BOOST_GLOBAL_FIXTURE(MyFixture)

BOOST_AUTO_TEST_CASE(TEST_1)
{
    BOOST_CHECK(MyFixture::instance()->x == 10);
    MyFixture::instance()->x = 12;
}
BOOST_AUTO_TEST_CASE(TEST_2)
{
    BOOST_CHECK(MyFixture::instance()->x == 12);
} 
```

# android - Android在运行时将按钮插入LinearLayout

> ID：15918257
> 
> 赞同：0
> 
> 时间：2013-04-10T06:11:10.447
> 
> 标签：android

我在我的 xml 文件中定义了一个线性布局，如下所示

```
 <LinearLayout
        android:id="@+id/manageStoresAlphabeticPagination"
        android:layout_width="fill_parent"
        android:orientation="horizontal"
        android:weightSum="26"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/searchBarFrameManageStores"
        android:layout_toRightOf="@+id/searchBarFrameManageStores" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="A"
            android:layout_weight="1"
            style="@style/alphaPaginationStyle" />
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="B"
            android:layout_weight="1"
            style="@style/alphaPaginationStyle" />
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="C"
            android:layout_weight="1"
            style="@style/alphaPaginationStyle" />
    </LinearLayout> 
```

现在线性布局的内容将包含所有字母。我不想在我的布局中定义它们，而是通过我的代码。如何通过我的代码创建按钮，应用样式，然后将其添加到线性布局？

亲切的问候

- - - - - - - - 编辑 - - - - - - - - - - - - - - - -

```
LinearLayout storePaginationLayout = (LinearLayout) view
                .findViewById(R.id.manageStoresAlphabeticPagination);

        for (int i = 0; i < 22; i++) {
            Button b1 = new Button(this.getActivity(), null,
                    R.style.alphaPaginationStyle);
            b1.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT,1f));
            b1.setText("A");
            storePaginationLayout.addView(b1);
        } 
```

样式未从代码中应用。但是从 xml 布局来看它工作正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:18:54.910

```
Button button = new Button(this, null, R.style.alphaPaginationStyle);
LinearLayout.LayoutParams params = new LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
button.setLayoutParams(params);
button.setText(yourAlphabet);
yourLinearLayout.addView(button); 
```

# clojurescript - 以高级模式编译 clojurescript 和 angularjs

> ID：15918258
> 
> 赞同：2
> 
> 时间：2013-04-10T06:11:14.467
> 
> 标签：clojurescript

我在获取一个简单的 clojurescript 程序以在高级模式下正确编译时遇到问题。例如，这是一个简单的程序

```
(ns cljs-basics.core)

(.write js/document "hello, cljs")

(def basicsApp (.module js/angular "basics" (array)))

(def testController 
  (.controller basicsApp "TestCtrl" (fn [$scope])))
(aset testController "$inject" (array "$scope")) 
```

和html文件：

```
<!doctype html>
<html ng-app="basics" lang="en">
<head>
    <meta charset="utf-8">
    <title>Simple CLJS</title>
    <script src="components/angular/angular.js"></script>
    <script src="js/basic.js"></script>
</head>
<body ng-controller="TestCtrl">
    {{testvar}}
</body>
</html> 
```

代码在 :simple 上运行良好，但是当我打开 :advanced 时，它就不起作用了。和调用被编译为符号`.controller`，`.module`所以我得到

```
Uncaught TypeError: Object #<Object> has no method 'Uf' basic.js:5105
Uncaught Error: No module: basics 
```

有没有办法以某种方式包含 angular.js 文件，以便编译器可以将所有内容一起缩小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T15:52:58.280

如果包含适当的 'externs' 文件， :advanced 模式编译不会重命名外部库中定义的符号。可以在以下位置找到 angular 的 externs 文件：

[https://code.google.com/p/closure-compiler/source/browse/contrib/externs/angular.js](https://code.google.com/p/closure-compiler/source/browse/contrib/externs/angular.js)

如果您使用 cljsbuild，Leiningen 编译器配置如下所示：

```
:cljsbuild {
    :builds [
        {
            :source-paths ["src"]
            :compiler {
                :output-to "target/main.js"
                :optimizations :advanced
                :externs ["externs/angular.js"]
            }
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:23:01.243

Angular 还不支持高级编译。但他们正在努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-29T09:56:48.860

有趣的是，库本身可以用作外部文件，因为所有 Closure 编译器关心的外部文件都是已定义的符号（普通的 javascript 对象和其中的符号 - 属性、方法和嵌套对象）。

另外，我创建了一个库来帮助避免编写外部文件： [https ://github.com/myguidingstar/fence](https://github.com/myguidingstar/fence)

# android - 创建通用应用程序并构建自动化

> ID：15918259
> 
> 赞同：1
> 
> 时间：2013-04-10T06:11:16.617
> 
> 标签：android, maven, generics, ant, build-automation

我有一个通用报纸应用程序，它已针对 6 种不同的应用程序进行了定制。

唯一的变化是

1.  包裹名字
2.  一些常量（在类文件和资源中）
3.  图像和图标

问题是当发生更改时，将这些更改应用于所有应用程序既困难又耗时。有没有办法自动化这个过程，我认为必须有，猜测 Maven 和蚂蚁应该这样做。

有人可以帮我提供一些教程或任何其他选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:34:35.097

**马文**

您绝对可以这样做，这里有几个有用的链接（如果您已经熟悉 Maven 本身）：

[面向多个客户的 Android 构建配置](https://stackoverflow.com/questions/7552033/android-build-configurations-for-multiple-customers)

[http://tech.ebuddy.com/2013/04/08/brand-android-builds-using-maven/](http://tech.ebuddy.com/2013/04/08/branded-android-builds-using-maven/)

**摇篮**

基于 Gradle 的全新 Android 构建系统也支持多种产品“风味”，但仍在开发中：

[http://tools.android.com/tech-docs/new-build-system](http://tools.android.com/tech-docs/new-build-system)

# android-ndk - 如何运行“反编译的 NDK apk”

> ID：15918264
> 
> 赞同：1
> 
> 时间：2013-04-10T06:11:36.270
> 
> 标签：android-ndk, java-native-interface, shared-libraries

我是 android ndk 开发的新手。我想做的是：

**第 1 步：编译我的 ndk 应用程序并获得一个 apk**

**第 2 步：我用 apktool 和 jdcompilers 反编译了它**

**第 3 步：现在我想在没有任何原始代码帮助的情况下将其重新组合在一起**

# html - 在网站设计中，每个浏览器的宽度和高度都是不同的。如何防止这种情况

> ID：15918265
> 
> 赞同：-5
> 
> 时间：2013-04-10T06:11:36.457
> 
> 标签：html, css, width

我是设计网站的新手。我在linux中使用chrome。我已经在 Windows 中用 chrome 测试了我的网站。我遇到了一个问题，例如高度和宽度不同？如何使我的网站设计与所有浏览器兼容。如果这个问题来自单位意味着哪个单位最好像 em、px 或 %？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:20:50.873

这是一个实际的设计选择。您可以使用固定大小，或使您的网站流动。

**固定尺寸**意味着您定义要设计的宽度。一个非常受欢迎的选择是 960 像素，因为它与 1024 像素宽的屏幕兼容，两侧有一些空间和一个滚动条。

如果您选择此方法，您需要在整个网站周围有一个包装元素（例如，`<div id="wrapper">`在您的`<body>`标签之后，在您的文档末尾关闭（基本上您的所有网站都进入其中）。然后您可以拥有 CSS 规则：

```
#wrapper { 
  width: 960px; 
  margin: 0 auto;
} 
```

这将使您的整个网站在屏幕上水平居中。这种方法的优点是，由于您的宽度是已知的，您可以轻松测量和计算内部元素（例如侧边栏等）的宽度。这在处理广告展示位置时非常方便。

**流体大小**意味着您将宽度定义为可用屏幕空间的百分比。这种方法以前主要用于全角网站，（想象`#wrapper`上面的元素设置为`width: 100%`。在我个人看来，这种方法本身很麻烦，只适用于特殊情况。

最后但同样重要的是，当前的趋势是**响应式设计**。该方法使用 CSS[媒体查询](http://en.wikipedia.org/wiki/Media_queries)根据可用宽度加载不同的样式，具体实现可以使用上述任何一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:23:27.277

我在不同的浏览器之间遇到了同样的问题。**作为最后的手段**，您可以尝试对发现大小变化的每个浏览器对使用 css hack。

*示例*：这是一个简单的 hack `IE`，在 css 之前添加下划线 (_)

```
_height:200px; 
```

看看[这个网站。](http://www.webmonkey.com/2010/02/browser-specific_css_hacks/)

*希望这可以帮助 ：）*

# c# - WebClient throw exception 远程服务器返回错误：(507) Insufficient Storage

> ID：15918270
> 
> 赞同：0
> 
> 时间：2013-04-10T06:12:03.513
> 
> 标签：c#, web-crawler, webclient, bots

我开发了循环发送请求到网站的小程序。从网页获取我需要的一些信息，然后存储到我的数据库中。

大约有 1400 个请求。

我在开发机器和 Windows Azure VM 上运行它。

起初，它在两台机器上都运行良好（第一天）。但是第二天我在 Windows Azure VM 上运行它之后。像这样抛出异常。

> Web 异常：System.Net.WebException：远程服务器返回错误：（507）存储不足。在 System.Net.WebClient.OpenRead(Uri address) 在 System.Net.WebClient.OpenRead(String address) 在 StockChecker.MainWindow.Worker_DoWork(Object Sender, DoWorkEventArgs e)

但是在开发机器上没问题。

它发生了什么。目标网站是否被检测为机器人？如何解决这个问题。

这是我的代码。

```
WebClient client = new WebClient();

List<tbmProduct> prodList = // Get data from my database;

foreach (var prod in prodList)
{
    string content;
    string link = prod.SupplierUrl;

    try
    {
        using (StreamReader reader = new StreamReader(client.OpenRead(link)))
        {
            content = reader.ReadToEnd();

            // Do something. Update my database.
        }
    }
    catch (WebException ex)
    {
        // write log
    }
    catch (Exception ex)
    {
        // write log
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T08:51:17.807

我也遇到过这个问题，查了很多文档，没有找到解决方法。似乎这个问题是由服务器设置引起的，所以我们无法在代码中修复它。我的解决方案是当 507 错误发生时，保存当前点，然后等待几分钟，然后继续从断点发送 http 请求。

# c# - 如何使用 C# 代码创建 LongListSelector？

> ID：15918271
> 
> 赞同：2
> 
> 时间：2013-04-10T06:12:05.710
> 
> 标签：c#, windows-phone-8, longlistselector

我是开发新手，我正在尝试使用 C# 代码创建 LongListSelector 但没有成功。谁能帮我创建这个。

我的 XML 代码是 -

```
 <phone:LongListSelector ItemRealized="LLS_ItemRealized" Name="longList" ItemsSource="{Binding supportedList}" IsGroupingEnabled="False" LayoutMode="List" HideEmptyGroups="True" Margin="30,0,26,0" >
            <phone:LongListSelector.ItemTemplate>
                <DataTemplate>
                    <Grid Background="Transparent">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="210"/>
                            <ColumnDefinition Width="210"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="120"/>
                        </Grid.RowDefinitions>
                        <Image Height="118" Width="209" Tap="ThumbnailImageTap" Margin="0" Stretch="Fill" Source="{Binding ThumbnailUrl1}" Tag="{Binding ClipId1}" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                        <Image Height="118" Width="209" Tap="ThumbnailImageTap" Margin="0" Stretch="Fill" Source="{Binding ThumbnailUrl2}" Tag="{Binding ClipId2}"  Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                    </Grid>
                </DataTemplate>
            </phone:LongListSelector.ItemTemplate>
        </phone:LongListSelector> 
```

任何用 C# 创建它的建议都很好，或者任何与我的答案相关的链接。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:11:40.520

您可以通过在后面的代码中显式应用样式来做到这一点。首先用预定义的键定义 LongListSelector。

```
<phone:LongListSelector x:Key="listSelector" ItemRealized="LLS_ItemRealized" Name="longList" ItemsSource="{Binding supportedList}" IsGroupingEnabled="False" LayoutMode="List" HideEmptyGroups="True" Margin="30,0,26,0" >

                <phone:LongListSelector.ItemTemplate>
                    <DataTemplate>
                        <Grid Background="Transparent">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="210"/>
                                <ColumnDefinition Width="210"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="120"/>
                            </Grid.RowDefinitions>
                            <Image Height="118" Width="209" Tap="ThumbnailImageTap" Margin="0" Stretch="Fill" Source="{Binding ThumbnailUrl1}" Tag="{Binding ClipId1}" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                            <Image Height="118" Width="209" Tap="ThumbnailImageTap" Margin="0" Stretch="Fill" Source="{Binding ThumbnailUrl2}" Tag="{Binding ClipId2}"  Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Right"/>

                        </Grid>
                    </DataTemplate>
                </phone:LongListSelector.ItemTemplate>

            </phone:LongListSelector> 
```

然后在后面的代码中获取样式，应用到新创建的LongListSelector。

```
var listSelector=new LongListSelector();
listSelector.Style=Resources["listSelector"] as Style; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:09:02.480

你看这里了吗？

windows phone 8 上“LongListSelector”的官方微软链接：

*   [http://code.msdn.microsoft.com/wpapps/PeopleHub-Windows-Phone-80-88abe94d](http://code.msdn.microsoft.com/wpapps/PeopleHub-Windows-Phone-80-88abe94d)

wp7 和 wp8 上来自“CodeProject”的模板项目：

*   [http://www.codeproject.com/Articles/92439/Silverlight-DataTemplateSelector](http://www.codeproject.com/Articles/92439/Silverlight-DataTemplateSelector)

我希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T11:51:19.430

自己绑定。试试这个。

```
LongListSelector listSelector;

private void CreateLongListSelector()
{
    listSelector = new LongListSelector()
    {
        HideEmptyGroups=false,
        IsGroupingEnabled=false,
    };
    ContentPanel.Children.Add(listSelector);
    listSelector.ItemTemplate = GetDataTemplate();

}

public DataTemplate GetDataTemplate()
{
    string xaml = @"<DataTemplate xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation"">
                    <Grid Background=""Transparent"">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width=""210""/>
                            <ColumnDefinition Width=""210""/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height=""120""/>
                        </Grid.RowDefinitions>
                        <Image Height=""118"" Width=""209"" Tap=""ThumbnailImageTap"" Margin=""0"" Stretch=""Fill"" Source=""{Binding ThumbnailUrl1}"" Tag=""{Binding ClipId1}"" Grid.Column=""0"" VerticalAlignment=""Center"" HorizontalAlignment=""Left""/>
                        <Image Height=""118"" Width=""209"" Tap=""ThumbnailImageTap"" Margin=""0"" Stretch=""Fill"" Source=""{Binding ThumbnailUrl2}"" Tag=""{Binding ClipId2}""  Grid.Column=""1"" VerticalAlignment=""Center"" HorizontalAlignment=""Right""/>
                    </Grid>
                    </DataTemplate>";
    DataTemplate res=null;
    try
    {
        res = (DataTemplate)XamlReader.Load(xaml);
    }
    catch (Exception e)
    {
        MessageBox.Show(e.Message);
    }
    return res;
} 
```

# c++ - 使用提升精神 (qi) 解析帝国值

> ID：15918275
> 
> 赞同：1
> 
> 时间：2013-04-10T06:12:30.593
> 
> 标签：c++, boost-spirit, boost-spirit-qi

我是精神初学者

我想使用精神将英制字符串值解析为结构。

输入应接受以下语法：

```
    5'3"1/2
    5'1/2
    3"1/2

```

看起来像这样，请注意下面的`struct imp_constant`流运算符，我将像此运算符一样打印结果：

```
struct imp_constant
{
    explicit imp_constant(unsigned int feet=0
                         ,unsigned int inch=0
                         ,unsigned int fracn=0
                         ,unsigned int fracd=1)
        :feet_(feet),inches_(inch),fracn_(fracn),fracd_(fracd){}
    unsigned int feet_,inches_,fracn_,fracd_;
};
std::ostream& operator<<(std::ostream& os, imp_constant const& cst)
{
    if (cst.feet_)
        os << cst.feet_ << '\''; 
    if (cst.inches_)    
        os << cst.inches_ << '"';
    if (cst.fracn_)
        os << cst.fracn_ << '/' << cst.fracd_;
    return os;
} 
```

我的伪语法很简单，看起来像这样：

```
myrule = (
    (
        (qi::uint_ >> L'\'')
        ||
        (qi::uint_ >> L'"') 
    ) 
    >> -(
            qi::uint_ 
            >> L'/' >> 
            qi::uint_
        )
    ); 
```

这是我非常天真的第一次尝试填充我的结构：

我已将`BOOST_FUSION_ADAPT_STRUCT`宏添加到`struct imp_constant`然后尝试以下语法：

```
qi::rule<std::string::const_iterator, imp_constant()> 
    impconst = qi::lexeme[ //not sure this is required since no skipper precised
        (
            (qi::uint_[phx::at_c<0>(qi::_val)=qi::_1] >> L'\'')
            ||
            (qi::uint_[phx::at_c<1>(qi::_val)=qi::_1] >> L'"') 
        ) 
        >> -(
            qi::uint_[phx::at_c<2>(qi::_val)=qi::_1] 
            >> L'/' >> 
            qi::uint_[phx::at_c<3>(qi::_val)=qi::_1]
            )
        ]; 
```

结果是：

```
input:5'3"1/2  ==> output:5'3"1/2  (ok)
input:5'1/2    ==> output:5'1"1/2  (__nok__) 
```

我想我不明白`_1`占位符在这种情况下的行为方式。

由于我是精神世界的初学者，欢迎任何建议

非常感谢

这是完整的代码，这应该会有所帮助

```
#define BOOST_SPIRIT_DONT_USE_MPL_ASSERT_MSG 1
//#define BOOST_SPIRIT_DEBUG << uncomment to enable debug
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/variant/recursive_wrapper.hpp>
#include <boost/fusion/adapted.hpp>

namespace qi    = boost::spirit::qi;
namespace phx   = boost::phoenix;

struct imp_constant
{
    explicit imp_constant(unsigned int feet=0
                         ,unsigned int inch=0
                         ,unsigned int fracn=0
                         ,unsigned int fracd=1)
        :feet_(feet),inches_(inch),fracn_(fracn),fracd_(fracd){}
    unsigned int feet_,inches_,fracn_,fracd_;
};

std::ostream& operator<<(std::ostream& os, imp_constant const& cst)
{
    if (cst.feet_)
        os << cst.feet_ << '\''; 
    if (cst.inches_)    
        os << cst.inches_ << '"';
    if (cst.fracn_)
        os << cst.fracn_ << '/' << cst.fracd_;
    return os;
}

BOOST_FUSION_ADAPT_STRUCT(imp_constant, 
                          (unsigned int, feet_)
                          (unsigned int, inches_)
                          (unsigned int, fracn_)
                          (unsigned int, fracd_))

int _tmain(int argc, _TCHAR* argv[])
{
    std::string input;

    std::cout << "\n----------------------\n> ";
    while (std::getline(std::cin, input))
    {
        if (input.empty() || input[0] == 'q' || input[0] == 'Q')
            break;

        std::string::const_iterator f(input.begin()),l(input.end());
        try
        {
            imp_constant result;
            std::cout << "parsing: " << input << "\n";
            bool ok;

            qi::rule<std::string::const_iterator, imp_constant()> 
                impconst = qi::lexeme[ //not sure this is required since
                            //no skipper precised
                    (
                        (qi::uint_[phx::at_c<0>(qi::_val)=qi::_1]
                        >> L'\'')
                        ||
                        (qi::uint_[phx::at_c<1>(qi::_val)=qi::_1]
                        >> L'"') 
                        ) 
                        >> -(
                        qi::uint_[phx::at_c<2>(qi::_val)=qi::_1] 
                    >> L'/' >> 
                        qi::uint_[phx::at_c<3>(qi::_val)=qi::_1]
                    )
                ];

            ok=qi::phrase_parse(f,l,impconst ,qi::space,result);

            if (!ok)
                std::cerr << "invalid input\n";
            else
            {

                std::cout << "\n---------------------------\n";
                std::cout << "result="<< result;
            }
        } 
        catch (const qi::expectation_failure<const char *>& e)
        {
            std::cerr << "expect failure at '" 
                      << std::string(e.first, e.last) << "'\n";
        }
        catch (...)
        {
            std::cerr << "parse error\n";
        }
        if (f!=l) std::cerr << "unparsed: '" << std::string(f,l) << "'\n";
        std::cout << "\n-----------------------\n> ";
    }
    std::getchar();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:14:06.330

作为sehe答案的替代方案（您应该接受）：

如果您只是将规则更改为：

```
qi::rule<std::string::const_iterator, imp_constant()> 
        impconst = 
                 (
                     (qi::uint_ >> L'\'')[phx::at_c<0>(qi::_val)=qi::_1]
                     ||
                     (qi::uint_ >> L'"')[phx::at_c<1>(qi::_val)=qi::_1]
                 )
                 >> 
                     -(qi::uint_ >> L'/' >> qi::uint_)
                     [phx::at_c<2>(qi::_val)=qi::_1,phx::at_c<3>(qi::_val)=qi::_2]
        ; 
```

我将如何做到这一点：

稍微改变你的`imp_constant`：

```
struct fraction
{
   unsigned int n_,d_;
};

struct imp_constant
{
    unsigned int feet_,inches_;
    fraction frac_;
};

BOOST_FUSION_ADAPT_STRUCT(fraction,
                          (unsigned int, n_)
                          (unsigned int, d_)
)

BOOST_FUSION_ADAPT_STRUCT(imp_constant, 
                          (unsigned int, feet_)
                          (unsigned int, inches_)
                          (fraction    , frac_) 
```

然后规则是：

```
qi::rule<std::string::const_iterator,unsigned int()> feet = (qi::uint_ >> L'\'') | qi::attr(0);
qi::rule<std::string::const_iterator,unsigned int()> inches = (qi::uint_ >> L'"') | qi::attr(0);
qi::rule<std::string::const_iterator,fraction()> fract = (qi::uint_ >> L'/' >> qi::uint_) | (qi::attr(0)>> qi::attr(1));
qi::rule<std::string::const_iterator, imp_constant()> impconst=feet>>inches>>fract; 
```

[LWS 上的示例](http://liveworkspace.org/code/3UqOUE%240)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:10:11.730

你在看回溯。

'1' in`5'1/2`首先被解析为`qi::uint_`潜在的英寸分支，导致属性被分配。

只有*这样*才会遇到'/'，这会导致从'英寸分支'回溯。但是属性已经设置好了。在这种情况下，显式默认或`qi::hold`可以修复它。

这就像我自己可能会表达的方式：

```
qi::rule<std::string::const_iterator, unsigned(char)> 
    component = qi::hold [ qi::uint_ >> qi::lit(qi::_r1) ];

qi::rule<std::string::const_iterator, imp_constant()> 
    impconst = 
        component(L'\'') ||
        component(L'"')  ||
        component(L'/')  ||
        qi::uint_
;

BOOST_SPIRIT_DEBUG_NODE(component);
BOOST_SPIRIT_DEBUG_NODE(impconst); 
```

我认为这可能是一个很好的起点？

进一步说明：

1.  测试`f!=l`以检测未解析的剩余输入
2.  完整代码示例中的语义操作是多余的
3.  确实，`lexeme`那里是多余的

在这里看到它：http: **[//liveworkspace.org/code/Rpydy$0](http://liveworkspace.org/code/Rpydy%240)**。

测试输出：

```
----------------------
> parsing: 5'1/2
<impconst>
  <try>5'1/2</try>
  <component>
    <try>5'1/2</try>
    <success>1/2</success>
    <attributes>[5, ']</attributes>
  </component>
  <component>
    <try>1/2</try>
    <fail/>
  </component>
  <component>
    <try>1/2</try>
    <success>2</success>
    <attributes>[1, /]</attributes>
  </component>
  <success></success>
  <attributes>[[5, 0, 1, 2]]</attributes>
</impconst>

---------------------------
result=5'1/2
-----------------------
> 
```

# jquery - 如何从 math.random 中排除单个数字

> ID：15918276
> 
> 赞同：1
> 
> 时间：2013-04-10T06:12:39.523
> 
> 标签：jquery, math, random

我需要 jquery 来创建一个数组，其中仅包含用复选框选择的数字。换句话说，我需要`math.random`排除未检查的答案。当我克服这个问题时，会有更多的复选框

```
if ($('#check1') .is(':checked')) {
    var nrI = "1";
} else {
    var nrI = "";
}
if ($('#check2').is(':checked')) {
    var nrII = "2";
} else {
    var nrII = "";
} 

var numbrid = [nrI,nrII];

if (nrI + nrII == 0) {
    var numRand = Math.floor((Math.random()*2)+1);
} else {
    var numRand = Math.floor((Math.random()*numbrid.length)+1);
}   
$("#number") .text(numRand); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:22:17.673

尝试

```
var numbrids = $('input[id^="check"]:checked').map(function(index, el) {
    return $(el).attr('id').substring(5);
});

if (numbrids.length) {
    var numRand = Math.floor((Math.random() * numbrids.length) + 1);
} else {
    var numRand = Math.floor((Math.random() * 2) + 1);
}
$("#number").text(numRand); 
```

我不确定问题的第二部分，即你想做什么`numbrids`

演示：[小提琴](http://jsfiddle.net/arunpjohny/sUbQX/)

如果您的要求与@AndyRay 评论相同，那么

```
var numbrids = $('input[id^="check"]:checked').map(function(index, el) {
    return $(el).attr('id').substring(5);
}), numRand;

if (numbrids.length) {
    numRand = numbrids [Math.floor((Math.random() * numbrids.length))];
} else {
    numRand = 0;
}
$("#number").text(numRand); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/zQ88z/)

# python - 自动填写一些网络表单？

> ID：15918292
> 
> 赞同：0
> 
> 时间：2013-04-10T06:13:25.220
> 
> 标签：python, google-app-engine

我正在使用 Google App Engine，我想知道当我将用户重定向到特定网页时是否可以自动填写一些条目？更准确地说，如果我可以将用户重定向到网页并自动填写大部分预定义的值（而不必自己输入所有这些表单字段，这将非常耗时），这将极大地减轻我的工作. ).

我是编程新手，所以如果这听起来像一个愚蠢的问题，我很抱歉..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:42:33.267

是的 ！

每个表单输入都有一个默认值：

```
<input type="text" value="defaultValue" /> 
```

您只需将此值设置为所需的默认值，瞧！

* * *

如果您没有直接访问表单代码的权限，您仍然可以使用 javascript（和 jQuery 以使事情更容易）用默认值填充它们，如下所示：

`$("#inputId").val( "defaultValue" )`

检查此链接以获取更多信息：[http ://www.ultramegatech.com/2009/10/default-form-values-jquery/](http://www.ultramegatech.com/2009/10/default-form-values-jquery/)

# wpf - 依赖属性继承

> ID：15918293
> 
> 赞同：2
> 
> 时间：2013-04-10T06:13:28.617
> 
> 标签：wpf, inheritance, custom-controls, dependency-properties

我需要我的控件从 Grid 类型的祖先继承 UIElement.IsEnabledProperty（可选的 Window 或任何其他我可以用我的网格包装的元素）

CS：下面我覆盖 UIElement.IsEnabledProperty 的元数据并使用 Change 和 Coerce delegates 设置它。

```
 static PipeControl()
    {
        PipeControl.IsEnabledProperty.OverrideMetadata(typeof(PipeControl), new FrameworkPropertyMetadata(false, OnIsEnabledPropertyChanged, OnIsEnabledPropertyCoerce));
    }

    private static void OnIsEnabledPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var isEnabled = (bool)e.NewValue;
    }

    private static object OnIsEnabledPropertyCoerce(DependencyObject d, object baseValue)
    {
        var valueSource = DependencyPropertyHelper.GetValueSource(d, PipeControl.IsEnabledProperty);

        var pipeContorl = d as PipeControl;
        if (pipeContorl == null) return baseValue;

        return (bool)baseValue && pipeContorl.IsMyPipe;
    } 
```

XAML：

```
 <Grid IsEnabled="{Binding IsMyCondition , Mode=OneWay}">        
         <game:PipeControl Grid.Row="2"  />            
         <game:PipeControl  Grid.Row="2" Grid.Column="1" />
    </Grid> 
```

每次 IsMyCondition 更改时，每个 PipeContorl 都会调用 OnIsEnabledPropertyCoerce，永远不会调用 OnIsEnabledPropertyChanged，OnIsEnabledProerty Coerce 中的 ValueSource 为“默认”（显示 Coerce 始终获取默认的 false 值）。

我必须以我需要使用 Inheritance 的方式错过一些东西，我希望值源是“Inherited”并且 OnIsEnabledPropertyChanged 被调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:18:23.347

UIElement 有一个虚拟属性 IsEnabledCore 应该（？）用于强制 IsEnabled 属性。这就是例如 Button 或 MenuItem 如何根据其 CanExecute 属性强制 IsEnabled 属性的方式。在您的自定义控件中，您可以将属性覆盖为：

```
 protected override bool IsEnabledCore
    {
        get
        {
            return ( base.IsEnabledCore && IsMyPipe );
        }
    } 
```

重要的是当 IsEnabled 所依赖的任何属性（例如 IsMyPipe）发生变化时调用 CoerceValue。

所以自定义控件实现将是：

```
 static PipeControl()
    {
        DefaultStyleKeyProperty.OverrideMetadata( typeof( PipeControl ), new FrameworkPropertyMetadata( typeof( PipeControl ) ) );
    }

    public bool IsMyPipe
    {
        get { return ( bool )GetValue( IsMyPipeProperty ); }
        set { SetValue( IsMyPipeProperty, value ); }
    }

    public static readonly DependencyProperty IsMyPipeProperty =
            DependencyProperty.Register(
                    "IsMyPipe",
                    typeof( bool ),
                    typeof( UIElement ),
                    new PropertyMetadata(
                            true,
                            new PropertyChangedCallback( OnIsMyPipeChanged ) ) );

    private static void OnIsMyPipeChanged( DependencyObject d, DependencyPropertyChangedEventArgs e )
    {
        d.CoerceValue( UIElement.IsEnabledProperty );
    } 
```

希望这会有所帮助，并且非常欢迎对解决方案提出任何意见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:25:49.390

上面有阿德南的回答，这个回答：

[如何向现有的依赖属性回调添加逻辑？](https://stackoverflow.com/questions/1310090/how-can-i-add-logic-to-an-existing-dependency-property-callback)

我包含了一个完整的答案。

CS ：

```
 static PipeControl()
    {
        PipeControl.IsEnabledProperty.OverrideMetadata(typeof(PipeControl), new UIPropertyMetadata(new PropertyChangedCallback(OnIsEnabledPropertyChanged)));
    }

    private static void OnIsEnabledPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {           
        var isEnabled = (bool)e.NewValue;
    }

    protected override bool IsEnabledCore
    {
        get
        {
            return (base.IsEnabledCore && IsMyPipe);
        }
    } 
```

IsEnabledCore 将值返回给 Callback ，因此强制发生在那里，然后是 CallBack 。

仅供参考，设置本地默认值似乎会覆盖继承，因此如果覆盖继承属性的元数据，请务必提供默认本地值，如下所示：

```
 PipeControl.IsEnabledProperty.OverrideMetadata(typeof(PipeControl), new UIPropertyMetadata(false,new PropertyChangedCallback(OnIsEnabledPropertyChanged))); 
```

此外，如果您只需要添加强制逻辑，您可以覆盖 IsEnabledCore ，而不用 IsEnabledProperty 的元数据做任何其他事情。

# ios - UItableview 中 didselectrowatindexpath 中的单元测试

> ID：15918294
> 
> 赞同：0
> 
> 时间：2013-04-10T06:13:31.733
> 
> 标签：ios, ocunit

我使用下面的代码来调用`UITableView`

```
-(void)testJumpSection

{
     NSIndexPath *indexPath1= [NSIndexPath indexPathForRow:0 inSection:0];
    [viewControllerObject tableView:viewControllerObject.masterTableView didSelectRowAtIndexPath:indexPath1];
    int backButtonSection = viewControllerObject.backButtonSection;
    NSIndexPath *indexPath2= [NSIndexPath indexPathForRow:0 inSection:2];
    [viewControllerObject tableView:viewControllerObject.masterTableView didSelectRowAtIndexPath:indexPath2];
    int backButtonSection2 = viewControllerObject.backButtonSection;
    [viewControllerObject backButtonView:viewControllerObject.button1];
    int backButtonSectionTestValue = viewControllerObject.backButtonSection;
    STAssertTrue(backButtonSectionTestValue==1, @"TestJumpSection");
} 
```

我正在为展开/折叠 uitableview 编写此测试用例。当用户单击第 0 节的行然后单击第 3 节时。现在用户可能会单击后退按钮来导航第 2 节。现在我必须得到结果 backButtonsection 值减 1。

它工作正常，但我无法获得选定的部分值，并且出现此错误：

> [__NSCFConstantString stringByAppendingString:]: 无参数"

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:42:23.133

很明显，您调用`stringByAppendingString:`了`__NSCFConstantString`具有 的参数`nil`。

一个简单的例子会导致这个问题是

```
[@"some string" stringByAppendingString:nil]; 
```

一个更可能的原因是

```
NSString *str;
str = @"some string"
NSString *anotherStr = nil;
// some other code that should set anotherStr but did not
NSString *result = [str stringByAppendingString:anotherStr]; // error 
```

所以去找出`stringByAppendingString:`并检查他们的论点

顺便说一句，无论如何你都应该从调试器中知道这一点，因为它应该告诉你哪一行导致了问题。

# windows-8 - 将网格和其中的元素另存为 jpeg 图像 - WinRT

> ID：15918296
> 
> 赞同：1
> 
> 时间：2013-04-10T06:13:41.467
> 
> 标签：windows-8, windows-phone-8, windows-phone-7.1, winrt-xaml, windows-phone-7.8

我被困在我的应用程序中。我有一个网格，里面有一些元素。这些元素是按钮、图像和其他控件，如堆栈面板和嵌套网格。我想在单击按钮时将显示给用户的内容保存为图像，但我不知道如何继续。

我可以将网格和按钮等元素写入可写位图吗？还是有其他方法？

简而言之，当用户单击按钮时，我想对我的应用程序屏幕进行截屏。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:57:48.610

不幸的是，目前这是不可能的。正如@FilipSkakun[在此处的回复](https://stackoverflow.com/questions/15883332/capture-screen-of-windows-store-app/15885767#15885767)中提到的那样，您可能可以根据您的要求参与其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T22:41:41.263

这在 Windows 8.1 中有所改变，可以使用 RenderTargetBitmap 来完成。RenderTargetBitmap.RenderAsync(UIElement) 将允许您获取任何元素（包括页面）的像素。

这是一个将 PNG 保存到使用 FileSavePicker 指定的文件的示例。

```
var filePicker = new FileSavePicker();
var file = await filePicker.PickSaveFileAsync();
var renderTargetBitmap = new RenderTargetBitmap();

using (var stream = await file.OpenAsync(FileAccessMode.ReadWrite))
{
    var encoder = await BitmapEncoder.CreateAsync(BitmapEncoder.PngEncoderId, stream);
    await renderTargetBitmap.RenderAsync(this);
    var pixelBuffer = await renderTargetBitmap.GetPixelsAsync();
    var pixelBytes = pixelBuffer.ToArray();

    encoder.SetPixelData(
        BitmapPixelFormat.Bgra8, 
        BitmapAlphaMode.Ignore, 
        (uint)renderTargetBitmap.PixelWidth, 
        (uint)renderTargetBitmap.PixelHeight, 
        96.0, 
        96.0, 
        pixelBytes);

    await encoder.FlushAsync();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:27:51.283

在 WinRt 上无法拍摄 winrt 应用程序的“屏幕截图”或仅控制控件。没有实施，现在他们不打算这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:03:09.103

您可以使用 Windows Phone 8 中的以下选项将任何 UIElement 转换为 Jpeg 图像。

```
var bitmap = new WriteableBitmap(element,null);

using (MemoryStream s = new MemoryStream())
{
     bitmap.SaveJpeg(s, (int)ContentPanel.Width, (int)ContentPanel.Height, 0, 100);
} 
```

我希望它对你有帮助。

# java - rcfaces v:image 标签不会重新加载

> ID：15918297
> 
> 赞同：0
> 
> 时间：2013-04-10T06:13:44.773
> 
> 标签：java, jsp

我的jsp页面中有av：image标签。（它是一个RichFaces标签）像这样：

v:image width="100%" id="resultServiceChart" imageURL="MonitoringChart.png"

图像文件每秒更改一次，我想每秒重新加载标签，但是

它没有改变。我更改了我的代码，现在每次文件名都不同并且效果很好。

但过了一会儿，我有很多图像。

我使用 ajax 来更改 imageURL。

```
var resComp = f_core.GetElementByClientId(params['param1']);
if (resComp) {
    resComp.f_setImageURL(result);
} 
```

存储在结果中的文件名

# c++ - 使用isalpha时如何出现异常

> ID：15918298
> 
> 赞同：0
> 
> 时间：2013-04-10T06:13:47.393
> 
> 标签：c++, visual-studio-2010

```
{
  for(int i=0;i<strlen(argv[2]);i++)
  if(isalpha(argv[2][i]))
   {
    cout<<"X"<<endl;
    return (0);
   }
} 
```

如果输入诸如 1e10 之类的指数函数，我不希望它运行任何想法？？

ps 试图区分数字和非数字并希望 1e10 （和类似的）算作数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:24:47.660

最简单的方法是使用 C++ 的内置数字解析。放入`argv[2]`a`istringstream`然后尝试将其作为`double`.

```
#include <sstream>
#include <iostream>
using namespace std;

int main(int argc, char** argv)
{
   istreamstream buf(argv[2]);
   double x;
   if (buf >> x)
   {
       cout << "argv[2] is a number and it's value is " << x << "\n";
   }
   else
   {
       cout << "argv[2] is not a number\n";
   }
} 
```

希望这可以帮助。

**编辑**

由于上述内容并不完全正确（即错误），这里的另一个版本希望更像 OP 所期望的。该函数`is_a_number`将对任何具有普通浮点数形式的字符串返回true，例如“1e10”、“1.2”、“-3”、“1.2e-10”等

```
#include <iostream>
using namespace std;

static bool is_a_number(const char* str);

int main()
{
    if (is_a_number(argv[2]))
    {
        cout << "its a number\n";
    }
    else
    {
        cout << "not a number\n";
    }
}

static bool is_a_number(const char* str)
{
    bool mant_digits = false, exp_digits = true;
    if (*str == '-' || *str == '+')
        ++str;
    while (isdigit((unsigned char)*str))
    {
        mant_digits = true;
        ++str;
    }
    if (*str == '.')
    {
        ++str;
        while (isdigit((unsigned char)*str))
        {
            mant_digits = true;
            ++str;
        }
    }
    if (*str == 'e' || *str == 'E')
    {
        ++str;
        if (*str == '-' || *str == '+')
            ++str;
        exp_digits = false;
        while (isdigit((unsigned char)*str))
        {
            exp_digits = true;
            ++str;
        }
    }
    return *str == '\0' && mant_digits && exp_digits;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:23:52.843

这首先测试输入的格式是否正确，然后执行转换。如果输入无效，则会引发`std::runtime_error`异常。

```
class CommandLine
{
public:
    CommandLine(int argc, char*argv[]) : 
        locale(""), arguments(argv, argv+ argc)
    {
       if (argc < 3)
           throw std::runtime_error("not enough arguments.");
    }

    double GetValueXYZ()
    {
        if (!IsValidInput(arguments[2]))
            throw std::runtime_error(
                arguments[2] + " is invalid input for XYZ.");
        return std::strtod(arguments[2].c_str(), nullptr);
        // You could use a stringstream instead
    }

private:
    bool IsValidInput(const std::string& arg)
    {
        const auto& numpunct = std::use_facet<std::numpunct<char>>(locale);
        auto err = std::find_if(begin(arg), end(arg), [&](char c)
        {
            return !(std::isdigit(c, locale) || 
                c == numpunct.thousands_sep() ||
                c == numpunct.decimal_point());
        });
        return err == end(arg);
    }

    std::locale locale;
    std::vector<std::string> arguments;
};

int main()
{
    char*argv[] = { "main", "2.34" , "1.10"};
    try
    {
        CommandLine cmd(3, argv);
        std::cout << cmd.GetValueXYZ();
    }
    catch(std::runtime_error& e)
    {
        std::cout << e.what();
    }
} 
```

# c - 在 C 中传递字符串的最佳方法

> ID：15918299
> 
> 赞同：1
> 
> 时间：2013-04-10T06:13:51.160
> 
> 标签：c

我以为

```
func(char* ary, size_t length) 
```

或者

```
func(char ary[], size_t length). 
```

你怎么看 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T06:14:54.427

两者是绝对等价的。数组在传递给函数时会衰减为指针。您可以使用任何一种。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T06:15:34.067

如果它是空终止的字符串，那么就`func(char* str)`足够了，（否则你不会称它为字符串，称它为字符数组）

# angularjs - SammyJS 与 AngularJS

> ID：15918301
> 
> 赞同：3
> 
> 时间：2013-04-10T06:13:53.820
> 
> 标签：angularjs, sammy.js

我在使用 Sammy 和 Angular 时遇到问题。

我有这个应用程序模块

```
var appModule = angular.module('myApp', []).run(function (routes) {
    routes.run('#/');
}); 
```

而这项服务

```
appModule.factory('routes', function ($rootScope) {

    var routes = $.sammy(function () {

        this.get('#/room/:roomId', function () {
            var that = this;
            setTimeout(function () {
                $rootScope.$broadcast('user has entered the room', {roomId: that.params['roomId']});
            }, 1000);

        });

    });

    return routes;
}); 
```

我需要这个`setTimeout`，因为我不知道何时可以访问 $rootScope。当我在 中输入低间隔数时`setTimeout`，事件不会广播。一秒钟的时间间隔可以，但我不想要这种丑陋的解决方案。如何确定 $rootScope 已准备就绪并且可以启动 url 处理程序函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:20:18.467

你真的“需要”使用 Sammy

您是否尝试过使用 Angular 的路由来获取参数？

看

[http://docs.angularjs.org/api/ng.$ro​​ute](http://docs.angularjs.org/api/ng.%24route)

和

[http://docs.angularjs.org/api/ng.$ro​​uteParams](http://docs.angularjs.org/api/ng.%24routeParams)

干杯斯图

# delphi - （如何）我可以将操作列表与广播组一起使用吗？

> ID：15918308
> 
> 赞同：0
> 
> 时间：2013-04-10T06:14:30.143
> 
> 标签：delphi

出于某种原因，我以前从未使用过操作列表。现在我看着它们，它们似乎是一件好事。

但是，我不确定是否可以将它们与`TRadioGroup`.

如果我有一个有两个选项的无线电组，（如何）我可以`TAction`为每个选项分配一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:43:25.297

行动代表，好吧，行动。它们与导致操作的 UI 元素相关联：按钮和菜单项。

另一方面，无线电组不用于调用操作。单选组用于从一组互斥的选项中进行选择。无法为单选组中的各个项目分配操作。

然而，广播组确实经常与行动互动。但它们是通过与其他 UI 元素关联的操作的 OnUpdate 处理程序来实现的。

例如，考虑一个带有按钮和菜单项的表单，这些按钮和菜单项仅在单选组的 ItemIndex 等于 0 时可见。这将使用 OnUpdate 处理程序进行编码，用于如下所示的操作：

```
Action.Visible := RadioGroup.ItemIndex=0; 
```

并且动作本身与按钮和菜单项相关联，但与单选组无关。只是动作的事件是指无线电组的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:05:59.350

此答案的有用性在很大程度上取决于选择此类单选按钮时必须执行的操作（如果有）。动作通常允许应用集中对用户命令的响应，而不是对用户偏好或用户选择的响应。

但是为了争论，我想象一个表单的双向布局，它由两个菜单项，两个按钮，或者在你的情况下，两个单选按钮控制。

简短的回答是： RadioGroup 没有`Action`属性，也不能分配任何操作。

解决方法可以通过使用一个 common 来实现`GroupBox`，其中填充两个单独的 RadioButtons，因为 common`RadioButton`确实有一个`Action`属性。要让动作表现得像单选项目，请将`GroupIndex`它们的属性设置为相同的值。

示例 DFM：

```
 object GroupBoxLayout: TGroupBox
    Left = 7
    Top = 7
    Width = 99
    Height = 71
    Caption = 'Form Layout'
    TabOrder = 0
    object RadioButton1: TRadioButton
      Left = 14
      Top = 21
      Width = 113
      Height = 17
      Action = ActionLayoutHorz
      TabOrder = 0
      TabStop = True
    end
    object RadioButton2: TRadioButton
      Left = 14
      Top = 42
      Width = 113
      Height = 17
      Action = ActionLayoutVert
      TabOrder = 1
    end
  end
  object Actions: TActionList
    Left = 119
    Top = 7
    object ActionLayoutHorz: TAction
      Category = 'Layout'
      Caption = 'Horizontal'
      Checked = True
      GroupIndex = 1
      OnExecute = ActionLayoutHorzExecute
    end
    object ActionLayoutVert: TAction
      Category = 'Layout'
      Caption = 'Vertical'
      GroupIndex = 1
      OnExecute = ActionLayoutVertExecute
    end
  end 
```

示例代码：

```
procedure TForm1.ActionLayoutHorzExecute(Sender: TObject);
begin
  FormLayout := flHorizontal;
end;

procedure TForm1.ActionLayoutVertExecute(Sender: TObject);
begin
  FormLayout := flVertical;
end; 
```

请注意，`OnExecute`当您单击相应的单选按钮时，会立即调用此类事件处理程序。（这与更类似于默认的实现形成对比，其中选择在单击单独的确定按钮后生效。）如果这是您想要的；大胆试试吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T06:23:18.343

动作通常与“可点击”控件相关联，例如按钮和菜单。在这种情况下，只有一个输入和一个（重新）动作。

使用列表框可以有多个选项。我假设您希望在单击时为每个单独的选项执行一个操作。如果是这种情况，您必须自己使用 OnClick 事件来完成。

```
procedure TForm3.RadioGroup1Click(Sender: TObject);
begin
  case RadioGroup1.ItemIndex of
    0 : Action1.Execute;
    1 : Action2.Execute;
  end;
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T02:41:21.137

我不确定您的设计，但在这种情况下我不会使用单独的操作，而是走这条路：

创建一个 TAction.OnExecute 事件，如下所示：

```
 procedure TForm1.Action1Execute(Sender: TObject);
  begin
      showmessage(   inttostr( (Sender as TRadioGroup).ItemIndex )   );
  end; 
```

**在 radioGroup 的 OnClick 事件中，下拉列表将显示该方法：“Action1Execute”。**将其绑定到 RadioGroup.OnClick 事件 - radioGroup 将作为“Sender”传递到“Action1Execute”。通过检查 itemindex 属性：

```
(Sender as TRadioGroup).ItemIndex 
```

您可以根据 itemIndex 执行您喜欢的任何操作，它会告诉您单击了哪个单选按钮。（itemIndex 基于 0）。

一般来说，最干净的方式如下：

```
procedure TForm1.Action1Execute(Sender: TObject);
var index:integer;
begin
  index:=(Sender as TRadioGroup).ItemIndex;
  case index of:
     0: MyFunction1;
     1: MyFunction2;
     2: MyFunction3;
  end;
end; 
```

最好不要将您的程序逻辑绑定到事件处理程序 - 通过调用其他函数来使用间接。

**如果您确实需要单独的操作，请使用其 onExecute 事件处理程序创建每个操作，然后按如下方式调用它们：**

```
 procedure TForm1.Action1Execute(Sender: TObject);
var index:integer;
begin
  index:=(Sender as TRadioGroup).ItemIndex;
  case index of:
     0: Action2Execute(sender);
     1: Action3Execute(sender);
     2: Action4Execute(sender);
  end;
end; 
```

这两种方法的缺点是您的 Action1.OnExecute 事件处理程序绑定到无线电组。你可以围绕这个进行协商：

```
if sender is TRadioGroup then
.....
else
.... 
```

但这并不干净。

最好的解决方案 IMO 是 Toon Krijthe 的

```
procedure TForm1.RadioGroup1Click(Sender: TObject);
begin
  case RadioGroup1.ItemIndex of
    0 : Action1.Execute(sender);
    1 : Action2.Execute(sender);
  end;
end; 
```

即使在 radioGroup 的 OnClick 事件中，action.OnExecute 并不比该事件处理程序中的任何其他函数调用更好，但**在所有情况下，操作项也可用于绑定到其他组件 - 因此您可以利用表单上其他组件中可以绑定到操作的操作。**

正如其他人所说，也许以您在此处描述的方式使用操作项并不合适。我只是向您解释 action.OnExecute 事件处理程序可以分配给 radioGroup onClick 事件。

话虽如此，我会鼓励更多地使用 Actions 和 ActionLists 并使用它们来处理表单上的所有事件管理。它们对编写简洁、结构良好的代码有很大帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-25T10:17:50.013

您可以将您的操作分配给隐形按钮...然后
`TAction.ExecuteTarget(InvisibleButton);` 在应用程序的任何位置使用：。

# c# - 将焦点设置到数据网格视图文本框列单元格

> ID：15918309
> 
> 赞同：1
> 
> 时间：2013-04-10T06:14:36.997
> 
> 标签：c#, desktop-application, setfocus, datagridviewtextboxcell

我有一个 datagridview 文本框列类型的 gridview，其中有以下列：

```
SrNo    | Description    | HSNCode    | Qty   | Rate   | Amount 
```

我在我的程序中自动生成金额，但我想检查用户是否已输入金额字段而没有在“费率”中输入数据，然后我想将焦点重新设置回程序中的“费率”字段：

我试过以下代码：

```
private void grdData_CellLeave(object sender, DataGridViewCellEventArgs e)
{
   if (e.ColumnIndex == 4)
   {
       if(grdData.Rows[e.RowIndex].Cells[4].Value== null)
       {
           grdData.CurrentCell = grdData.Rows[e.RowIndex].Cells[4];
       }
    }
} 
```

但是代码不起作用。
我应该怎么做才能将焦点切换到“金额”之前的字段？
请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T05:52:13.420

```
 private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
        {
            int row = e.RowIndex;
            int col = e.ColumnIndex;
            if (row < 0 || col != 3)
                return;
            if (e.FormattedValue.ToString().Equals(String.Empty))
            {
            }
            else
            {
                double quantity = 0;
                try
                {
                    quantity = Convert.ToDouble(e.FormattedValue.ToString());
                    if (quantity == 0)
                    {
                        MessageBox.Show("The quantity can not be Zero", "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
                        e.Cancel = true;
                        return;
                    }
                }
                catch
                {
                    MessageBox.Show("The quantity should be decimal value.", "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
                    e.Cancel = true;
                    return;
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:41:46.883

尝试：

```
private void grdData_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
{
   if (e.ColumnIndex == 5)
   {
       if(grdData.Rows[e.RowIndex].Cells[3].Value.Equals(""))  
       {
           grdData.ClearSelection(); 
           grdData.Rows[e.RowIndex].Cells[3].Selected = true;
       }
   }
} 
```

`cellclick`更新 - 使用事件测试并正常工作

```
private void grdData_CellClick(object sender, DataGridViewCellEventArgs e)
{
   if (e.ColumnIndex == 5)
   {
       if(grdData.Rows[e.RowIndex].Cells[3].Value.Equals(""))  
       {
           grdData.ClearSelection(); 
           grdData.Rows[e.RowIndex].Cells[3].Selected = true;
       }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:20:56.893

**参考以下代码：**

```
DataGridView1.CurrentCell = dataGridView1[1, 1].Value;
'or
DataGridView1.CurrentCell = DataGridView1.Item("ColumnName", 5)

dataGridView1.BeginEdit(true) 
```

如需更多帮助，您可以关注以下链接中的讨论：

[http://www.vbdotnetforums.com/winforms-grids/11313-setting-cell-focus-datagridview.html](http://www.vbdotnetforums.com/winforms-grids/11313-setting-cell-focus-datagridview.html)

希望它有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T06:18:36.903

你可以试试这段代码

```
dgv.ClearSelection();
dgv.Rows[rowindex].Cells[columnindex].Selected = true; 
```

# objective-c - 在播放 UIAnimation 时执行 UIPanGestureRecognizer

> ID：15918311
> 
> 赞同：0
> 
> 时间：2013-04-10T06:14:38.053
> 
> 标签：objective-c, animation, interrupt, uipangesturerecognizer, uianimation

我在平移对象后设置动画效果

```
-(void)panView:(UIPanGestureRecognizer*)recognizer{
    //do sth...

    if(recogizer.state==UIGestureRecognizerStateEnded){
        [UIView animateWithDuration:1 delay:0 options:UIViewAnimationOptionCurveEaseOut animation^{
            //do sth2...
        }completion:^(BOOL finished){
            //do sth3...
        }];
    }

} 
```

问题是在播放动画时，我再次平移该对象。新的平移不会发生，我应该等到动画完成才能再次平移。

我怎样才能中断动画突然做新的平移？？？

**解决方案**

将 UIViewAnimationOptionAllowUserInteraction 添加到选项。并且可以在重做平移之前设置 self.layer removeAllAnimations。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T08:45:46.793

试试下面的代码

```
-(void)panView:(UIPanGestureRecognizer*)recognizer
{

    //do sth...

    [animatingView.layer removeAllAnimations];

    if(recogizer.state==UIGestureRecognizerStateEnded)
    {
        [UIView animateWithDuration:1 delay:0 options:UIViewAnimationOptionCurveEaseOut | UIViewAnimationOptionAllowUserInteraction animation^{

            //do sth2...

        }completion:^(BOOL finished){

            //do sth3...

        }];
    }

} 
```

# python - 如何检测字符串字节编码？

> ID：15918314
> 
> 赞同：47
> 
> 时间：2013-04-10T06:14:47.110
> 
> 标签：python, string, unicode, encoding, byte

我已经读取了大约 1000 个文件名`os.listdir()`，其中一些以 UTF8 编码，一些是 CP1252。

我想将它们全部解码为 Unicode，以便在我的脚本中进行进一步处理。有没有办法让源编码正确解码为 Unicode？

例子：

```
for item in os.listdir(rootPath):

    #Convert to Unicode
    if isinstance(item, str):
        item = item.decode('cp1252')  # or item = item.decode('utf-8')
    print item 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2017-08-05T19:08:44.037

使用 chardet 库。超级简单

```
import chardet

the_encoding = chardet.detect('your string')['encoding'] 
```

就是这样！

在 python3 中，您需要提供类型 bytes 或 bytearray 所以：

```
import chardet
the_encoding = chardet.detect(b'your string')['encoding'] 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-10T06:27:35.680

如果您的文件位于`cp1252`和中`utf-8`，那么有一个简单的方法。

```
import logging
def force_decode(string, codecs=['utf8', 'cp1252']):
    for i in codecs:
        try:
            return string.decode(i)
        except UnicodeDecodeError:
            pass

    logging.warn("cannot decode url %s" % ([string]))

for item in os.listdir(rootPath):
    #Convert to Unicode
    if isinstance(item, str):
        item = force_decode(item)
    print item 
```

否则，有一个字符集检测库。

[Python - 检测字符集并转换为 utf-8](https://stackoverflow.com/questions/6707657/python-detect-charset-and-convert-to-utf-8)

[https://pypi.python.org/pypi/chardet](https://pypi.python.org/pypi/chardet)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2021-05-05T12:51:58.420

您还可以使用`json`包来检测编码。

```
import json

json.detect_encoding(b"Hello") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-24T06:21:30.227

`chardet`检测到的编码可以毫无例外地用于解码字节数组，但输出字符串可能不正确。

该`try ... except ...`方式非常适用于已知编码，但不适用于所有场景。

我们可以`try ... except ...`先使用，然后`chardet`作为 B 计划：

```
 def decode(byte_array: bytearray, preferred_encodings: List[str] = None):
        if preferred_encodings is None:
            preferred_encodings = [
                'utf8',       # Works for most cases
                'cp1252'      # Other encodings may appear in your project
            ]

        for encoding in preferred_encodings:
            # Try preferred encodings first
            try:
                return byte_array.decode(encoding)
            except UnicodeDecodeError:
                pass
        else:
            # Use detected encoding
            encoding = chardet.detect(byte_array)['encoding']
            return byte_array.decode(encoding) 
```

# wcf - 在 IIS7 中设置 wcf 后无法运行 api 调用

> ID：15918315
> 
> 赞同：2
> 
> 时间：2013-04-10T06:14:47.950
> 
> 标签：wcf

我已经在本地设置了我的 IIS 并且运行良好。之后，我在 Windows 服务器中进行了设置并尝试访问我的网址。

```
http://localhost:7000/MyHoome.svc 
```

上面的服务 url 有效，但是当我尝试访问 URI

```
http://localhost:7000/MyHoome.svc/winterhome/getlocks/pass/winter 
```

它给了我一个错误屏幕，但在我的本地 IIS 中它工作正常。我在 WCF 方面没有太多经验。如果有人能给我一个解决方案，我很高兴

错误信息

> 错误摘要 HTTP 错误 404.0 - 未找到 您要查找的资源已被删除、名称已更改或暂时不可用。

# haskell - 如何在haskell中编写递归函数

> ID：15918322
> 
> 赞同：5
> 
> 时间：2013-04-10T06:15:18.693
> 
> 标签：haskell

如何在 Haskell 中编写一个函数，该函数接受一个列表和一个数字，并删除所有大于该数字的元素并返回列表。

删除 [5, 4, 3, 9, 1 ] 5 应该返回 [5,4,3,1]

我编写了以下方法，当它达到大于给定的数字时，它会变成无限循环。我要退出 [5,4,3，然后程序没有结束。

```
remove l1 x = if (null l1 == True)
                then l1
                else if (head l1 > x)
                       then remove (drop 0 l1) x
                       else ((head l1) : remove (tail l1) x) 
```

这是我第一次尝试 Haskell 程序，请建议我在这里做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T06:50:31.577

好吧，你已经有了一个不错的开始，但重要的是要注意你没有采取最“Haskell”的方法来解决这个问题。

让我向您展示解决此问题的几种不同方法：

**方法一：递归函数**

首先，我们*可以*编写一个递归函数（就像你一样）来解决这个问题。

为此，我们首先适应一个基本情况（在正常情况下不允许无限循环的情况）。这应该有效：

```
remove [] _ = [] 
```

这只是说，如果我们要从一个空列表中删除元素，我们最终会得到一个空列表。就是这么简单。这`_`意味着我们不在乎价值`x`是什么。

现在我们必须定义我们的其他情况。为此，我会使用警卫（我确信还有其他方法，也添加了基本情况以完成）：

```
remove [] _ = []
remove (x:xs) y
 | x > y     = remove xs y
 | otherwise = x : remove xs y 
```

所以，第一行`remove (x:xs) y`（`x``xs`

第二行是说，如果`x`大于`y`，考虑其余元素，我们不认为`x`是我们最终解决方案的一部分。

第三行（`otherwise`如果命中则捕获所有情况，就像其他语言的条件块中`else`的 an ）。`if/elseif/else`如果我们到了这一点，我们知道这是不正确的，`x > y`所以我们考虑其余的值 ( `xs`) 并包括`x`，但我们现在已经完成了`x`。

现在，这种方法效果不错，但还有一种更简单的方法：

**方法 2：列出理解**

使用[列表推导](http://en.wikipedia.org/wiki/List_comprehension#Haskell)，我们可以构建一个非常简单、强大的解决方案：

```
remove xs y = [x | x <- xs, not (x > y)] 
```

如果您曾经研究过[集合论](http://en.wikipedia.org/wiki/Set_theory)（特别是[集合构建符号](http://en.wikipedia.org/wiki/Set-builder_notation)），那么您应该会觉得这很奇怪。让我们来看看每个部分的含义。

*   `[...]`- 括号中的内容仅表示我们正在构建一个列表

*   `x |...`- 意味着我们的列表将包含`x`s 这样（`|`意味着“这样”）......

*   `x <- xs,`-`x`是`xs`and 的一个元素（逗号的意思是“和”）...

*   `not (y > x)`- 大于是不正确`y`的`x`

如您所见，第二种方法几乎完全模仿了您的问题描述。这确实是 Haskell 的强大功能，文字和抽象往往几乎直接映射到 Haskell 代码中。

**方法 3：使用`filter`**

正如以下评论所述，第三种选择是将其定义为：

```
remove y = filter (<=y) 
```

其中过滤器只会保留小于或等于 y 的元素。（这种方法归功于 Daniel Wagner）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T06:45:56.450

您可以在函数 args 中使用模式匹配并使用警卫进行过滤：

```
remove []    x = []
remove (h:t) x | h > x = remove t x
               | otherwise = h : remove t x 
```

您也可以使用 function `filter`，它可以满足您的需要：

```
remove l x = filter (<= x) l 
```

# java - Wicket LoadableDetachableModel : 从内部列表加载

> ID：15918323
> 
> 赞同：1
> 
> 时间：2013-04-10T06:15:24.733
> 
> 标签：java, wicket

我正在使用 LoadableDetachableModel 将一些搜索结果保存在 Wicket 中。对于每一个结果，都会制作一个这样的模型。这是代码：

```
 private List<IModel<ResultItem<?>>> results;

    ResultItemModel(ResultItem<?> object, int index) {
        super(object);
        this.index = index;
    }

    @Override
    protected ResultItem<?> load() {
        return results.get(index).getObject();
    } 
```

构造函数获取对象和项目在列表中的索引，因此当我执行 getObject() 时，它会从列表中加载对象。但是当我尝试获取对象时，我收到了 NullPointer。有什么我想念的吗？

当我调试时，我看到所有正确的项目都在列表中，但它们后来被分离了。

亲切的问候，

梅林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:45:38.540

嗯，我修好了。我用这样的 PropertyModel 包围了 List：

```
resultListModel = new PropertyModel<List<IModel<ResultItem<?>>>>(this,"results"); 
```

在 LDM 中，我将代码更改为以下内容：

```
 @Override
    protected ResultItem<?> load() {
        return resultListModel.getObject().get(index).getObject();
    }

    @Override
    public void detach() {
        resultListModel.setObject(results);
    } 
```

# c# - 应用分组依据，然后全选

> ID：15918329
> 
> 赞同：0
> 
> 时间：2013-04-10T06:16:05.983
> 
> 标签：c#, linq, group-by

我有一个包含以下项目的列表：

**Id
名称
货币
基金**

我在此列表中应用**group by**如下：

```
var testData = from fl in fundsList
                           group fl by new { fl.Name } into groupedData
                           select new
                           {
                               groupedData.Key.Name,
                           }; 
```

但这只给了我所选数据中的**名称**。我想要的是根据**Name**应用 group by 并在*select*中获取所有项目，即**Id、Name、Currency 和 Fund**。我尝试在选择中访问其他人，但他们没有附带 Key。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:27:20.263

尝试这个：

```
var testData = fundsList.GroupBy(fl => fl.Name); 
```

现在您将获得一个`IEnumerable<IGrouping<T>>`，其中包含许多 key => valueCollection 项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:40:29.663

```
var testData = from fl in fundsList
                           group fl by new { fl.Name } into groupedData
                           select new
                           {
                              GroupName=  groupedData.Key.Name,
                              Items = grp.ToList()
                           }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T06:45:07.943

`groupedData`在您的查询`IEnumerable<YourEntity>`中使用属于该组的项目实现，因此您可以轻松地执行以下操作：

```
var testData = from fl in fundsList
                           group fl by fl.Name into groupedData
                           select new
                           {
                              Name = groupedData.Key.Name,
                              Items = grp.ToList()
                           }; 
```

或者在基于方法的查询中：

```
var testData = fundsList.GroupBy(fl => fl.Name)
                        .Select(g => new { Name = g.Key, Items = g.ToList() }); 
```

集合内的每个项目都`testData`将具有两个属性：

*   `Name`带组名
*   `Items`包含属于该组的所有项目*

# android - 损坏的 ActionBar 外观

> ID：15918330
> 
> 赞同：6
> 
> 时间：2013-04-10T06:16:10.187
> 
> 标签：android, android-actionbar, actionbarsherlock

我很久以前就注意到了这个问题，但直到现在我才能够准备清楚地重现它的演示。问题出现在 2.1 模拟器和我的 ICS 4.0.3 设备上。

在应用程序中，我有 AsyncTask ，它可以通过调用 invalidateOptionsMenu 来调整操作栏不确定进度和重新初始化菜单的可见性。这应该隐藏刷新图标。在我修改 listView 数据模型并在适配器上调用 notifyDataSetChanged 之前，这一切正常。此类操作后，Actionbar 可能已损坏视图。

预期视图： ![图片](https://f.cloud.github.com/assets/2315223/332791/6304ed4e-9c3b-11e2-8119-a1ab80b281ae.png)

损坏的视图（最后一项永远消失或在某些情况下添加了空白）： ![图片](https://f.cloud.github.com/assets/2315223/332795/86a38f4e-9c3b-11e2-9bdc-355c84428456.png) ![图片](https://f.cloud.github.com/assets/2315223/332798/9e18e91c-9c3b-11e2-9cb6-91845111f225.png)

导致代码在 onPostExecute

```
 @Override
        protected void onPostExecute(Void result)
        {
            super.onPostExecute(result);
            for (int i = 0; i < 10; i++)
            {
                adapter.items.add(i);
            }
            adapter.notifyDataSetChanged();
            activity.stopLoading();
        }
...
    void stopLoading()
    {
        if (loaders.decrementAndGet() == 0)
        {
            setSupportProgressBarIndeterminateVisibility(false);
            invalidateOptionsMenu();
        }
    } 
```

知道为什么会发生这种情况，并且在大多数情况下是因为更新了列表视图适配器（或者可能是一些视图更新）？如果我删除行 adapter.notifyDataSetChanged(); 演示中不会破坏操作栏。但在实际应用中，它也可能由于其他原因而损坏（无法准确确定所有问题原因）

演示问题的项目：http: [//goo.gl/ZbMTU](http://goo.gl/ZbMTU)

打开 ActionBarSherlock 问题：[https ://github.com/JakeWharton/ActionBarSherlock/issues/887](https://github.com/JakeWharton/ActionBarSherlock/issues/887)

UPD：继续挖掘这个问题。似乎不完全是 adapter.notifyDataSetChanged() 导致无效的外观，但是 AdapterView.AdapterDataSetObserver 的 requestLayout 调用正在侦听 ListView 中的数据集更改事件

解决方法存在，我可以在 handler.post 中调用 invalidateOptionsMenu 和 setSupportProgressBarIndeterminateVisibility。但它甚至强制使用 FragmentPagerAdapter 的自定义实现，它在延迟的 handler.post 中调用 fragment.setHasOptionsMenu

我想要的是找到最有效的方法来使视图和操作栏无效而不破坏它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T00:13:17.543

我不明白你为什么在 doInBackground 中这样做：

> Thread.sleep(randomSleep);

但是，在“LoadingTask”类中，注释“doInBackground”中问题将得到解决的行。

看：

```
 @Override
        protected Void doInBackground(Void... params)
        {
//          int randomSleep = (int) (Math.random() * 1000);
//          try
//          {
//              Thread.sleep(randomSleep);
//          } catch (InterruptedException e)
//          {
//              // TODO Auto-generated catch block
//              e.printStackTrace();
//          }
            return null;
        } 
```

# linux - 模拟硬件路由器上的用户负载

> ID：15918333
> 
> 赞同：1
> 
> 时间：2013-04-10T06:16:18.780
> 
> 标签：linux, benchmarking, embedded-linux, load-testing

我正在尝试模拟硬件路由器上的用户负载。我特别想模拟家用路由器的平均负载。

我需要做的是在不同的时间在一周的时间内加载它并执行以下操作：

1.  数据传输
2.  洪流下载
3.  HTTP/HTTPS Pages 对不同页面的请求。静态内容，动态内容。等等

我需要以特定的时间间隔重复此操作，并且能够一次测试多个路由器。

任何人都知道可以实现此目的的任何软件或脚本。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:43:29.053

当然。您可能会惊讶地发现，大多数情况下，普通家用路由器的负载可能非常低。算一下：即使以最大的 DSL 或有线路由器速度下载（即使它是小数据包，在较高负载下通常不是这种情况）现在对现代 CPU 的负载也不是很大。

脚本加载很容易。我有一个脚本，有时当我怀疑康卡斯特与我家的最后一英里链接时，我会猛烈抨击它们。它只是使用 wget（或尝试 curl）重复下载合理大小的文件并记录传输的下载统计信息（时间和/或数据速率）。只需从网上某处找到所需大小的 .pdf 或其他文件，或使用内容丰富的繁忙网站。避免那些可能需要为您在测试中消耗的带宽付费的小家伙。更好的是，如今 Amazon S3 存储（和传输带宽）非常便宜且易于使用。您可以将自己选择的一些文件放在那里，然后为您的测试环境重复下载这些文件，而不是从其他人那里窃取带宽！;)

从来没有玩过任何 torrent 客户端，所以我不能帮你，但我敢打赌有一些你可以编写脚本。

此外，您可以查看 netperf。我不知道该项目的状态，但我过去曾使用它来产生非常高的网络负载。谷歌为它。

玩得开心，祝你好运！

-克里斯

# java - 从外部存储 Android 读取图像/文件

> ID：15918335
> 
> 赞同：11
> 
> 时间：2013-04-10T06:16:27.093
> 
> 标签：java, android, image, file-io, bitmap

我正在尝试从外部存储加载图像。我设置了权限，我尝试了不同的方法，但它们都不起作用。

```
BitmapFactory.Options options = new BitmapFactory.Options();
    options.inPreferredConfig = Bitmap.Config.ARGB_8888;

    Bitmap bitmap = BitmapFactory.decodeFile(file.toString()); 

    tv.setImageBitmap(bitmap); 
```

和这个，

```
FileInputStream streamIn = new FileInputStream(file);
Bitmap bitmap = BitmapFactory.decodeStream(streamIn); 

    tv.setImageBitmap(bitmap);
        streamIn.close(); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-10T06:18:35.317

如果我有文件`abc.jpg`然后`sdcard`：

```
String photoPath = Environment.getExternalStorageDirectory() + "/abc.jpg"; 
```

并得到`bitmap`.

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inPreferredConfig = Bitmap.Config.ARGB_8888;
Bitmap bitmap = BitmapFactory.decodeFile(photoPath, options); 
```

或者

```
Bitmap bitmap1 = BitmapFactory.decodeFile(photoPath); 
```

**为避免内存不足错误，**我建议您使用以下代码...

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 8;
final Bitmap b = BitmapFactory.decodeFile(photoPath, options); 
```

* * *

为避免上述问题，您可以使用**Picasso**（一个强大的 Android 图像下载和缓存库）

[文档](http://square.github.io/picasso/)

如何？

```
Picasso.with(context).load("file:///android_asset/DvpvklR.png").into(imageView2);
Picasso.with(context).load(new File(...)).into(imageView3); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T06:19:06.793

```
File sdCard = Environment.getExternalStorageDirectory();

File directory = new File (sdCard.getAbsolutePath() + "/Pictures");

File file = new File(directory, "image_name.jpg"); //or any other format supported

FileInputStream streamIn = new FileInputStream(file);

Bitmap bitmap = BitmapFactory.decodeStream(streamIn); //This gets the image

streamIn.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:28:44.663

从您的文件夹中获取图像的路径，如下所示。然后将文件解码为位图。

```
 File file= new File(android.os.Environment.getExternalStorageDirectory(),"Your folder");
   Bitmap bitmap = BitmapFactory.decodeFile(file.getAbsolutePath()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-17T12:34:50.037

如果你有文件路径，直接使用 BitmapFactory，但告诉它使用保留 alpha 的格式：

```
BitmapFactory.Options options = new BitmapFactory.Options();

options.inPreferredConfig = Bitmap.Config.ARGB_8888;

Bitmap bitmap = BitmapFactory.decodeFile(photoPath, options);
selected_photo.setImageBitmap(bitmap); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-24T06:54:37.307

有一个函数叫

```
createFromPath(String) 
```

在可绘制类中。所以声明

```
String path="/storage/..<just type in the path>";
Drawable.createFromPath(path); 
```

将返回一个可绘制对象

# jquery - Jquery找不到带类的图像？

> ID：15918336
> 
> 赞同：0
> 
> 时间：2013-04-10T06:16:27.970
> 
> 标签：jquery, class, null, each, src

大家好，

这可能是非常简单和愚蠢的事情，但我不明白......

我有一个可以滑入和滑出的菜单。我有 2 张图像（左侧 1 张，右侧其他 1 张）控制滑动。我希望在滑动完成后，图像 src 改变......

我给图像一个名为的类`navArrow`

```
<div id="nav2">
                <span id="adminMenuWrapperButtonLeft">
                    <img onClick="myHeight.toggle();changeArrow();" src="<?php echo site_url('media/img/system/'); ?>/SlideArrowBottom.png"  width="40px" class="navArrow" />
                </span>
                <span id="adminMenuWrapperButtonRight">
                    <img onClick="myHeight.toggle();changeArrow();" src="<?php echo site_url('media/img/system/'); ?>/SlideArrowBottom.png"  width="40px" class="navArrow" />
                </span>
                <div class="clear"></div>
            </div> 
```

脚本如下所示（应该更改图像 src 的 changeArrow 函数）：

```
var typeArrow = 1;
                function changeArrow(){
                    if(typeArrow == 1){
                        $('.navArrow').each(function(){
                            $(this).attr('src', "<?php echo site_url('media/img/system/'); ?>/SlideArrowTop.png");
                        });
                        typeArrow = 0;
                    } else{
                        $('.navArrow').each(function(){
                            $(this).attr('src', "<?php echo site_url('media/img/system/'); ?>/SlideArrowBottom.png");
                        });
                        typeArrow = 1
                    }
                } 
```

但我收到一条错误消息：`Uncaught TypeError: Cannot call method 'each' of null`

当我签入 chrome 控制台时，`$('.navArrow')`我得到了 null 回来......

所以似乎Jquery找不到我的班级？我忘了什么？

希望尽快收到你们的消息：D

**EDIT1** 完整的（渲染的）HTML 如下所示：

```
<html><head>
        <title>Toegang Verkrijgen           - Administrator - CMS WeProgram</title>
        <meta name="keywords" content="">
        <meta name="description" content="">
        <link href="/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
        <script src="http://cms.local/jscript/jquery-1.9.1.min.js"></script><style type="text/css"></style>
        <link rel="stylesheet" href="http://cms.local/css/admin/jquery-ui.css">
        <script src="http://cms.local/jscript/jquery-ui.js"></script>
        <script src="http://cms.local/jscript/nav.js"></script>
        <script src="http://cms.local/jscript/prototype.lite.js"></script>
        <script src="http://cms.local/jscript/moo.fx.js"></script>
        <!-- <link href='http://fonts.googleapis.com/css?family=Tauri&subset=latin,latin-ext' rel='stylesheet' type='text/css'> -->
        <link rel="stylesheet" type="text/css" href="http://cms.local/css/admin/mainStyle.css">
        <link rel="stylesheet" type="text/css" href="http://cms.local/css/admin/adminMenu.css">
            </head>
    <body>
        <div id="mainWrapper">
            <div id="nav" style="overflow: hidden; height: 0px;">
                <div id="nav_inner">
                    <script>
                        document.write(create_menu('http://cms.local/'));
                    </script><table cellpadding="0" cellspaceing="0" border="0" style="width:98%"><tbody><tr><td class="td" valign="top"><ul><li><a href="http://cms.local/index.html">User Guide Home</a></li><li><a href="http://cms.local/toc.html">Table of Contents Page</a></li></ul><h3>Basic Info</h3><ul><li><a href="http://cms.local/general/requirements.html">Server Requirements</a></li><li><a href="http://cms.local/license.html">License Agreement</a></li><li><a href="http://cms.local/changelog.html">Change Log</a></li><li><a href="http://cms.local/general/credits.html">Credits</a></li></ul><h3>Installation</h3><ul><li><a href="http://cms.local/installation/downloads.html">Downloading CodeIgniter</a></li><li><a href="http://cms.local/installation/index.html">Installation Instructions</a></li><li><a href="http://cms.local/installation/upgrading.html">Upgrading from a Previous Version</a></li><li><a href="http://cms.local/installation/troubleshooting.html">Troubleshooting</a></li></ul><h3>Introduction</h3><ul><li><a href="http://cms.local/overview/getting_started.html">Getting Started</a></li><li><a href="http://cms.local/overview/at_a_glance.html">CodeIgniter at a Glance</a></li><li><a href="http://cms.local/overview/cheatsheets.html">CodeIgniter Cheatsheets</a></li><li><a href="http://cms.local/overview/features.html">Supported Features</a></li><li><a href="http://cms.local/overview/appflow.html">Application Flow Chart</a></li><li><a href="http://cms.local/overview/mvc.html">Model-View-Controller</a></li><li><a href="http://cms.local/overview/goals.html">Architectural Goals</a></li></ul><h3>Tutorial</h3><ul><li><a href="http://cms.local/tutorial/index.html">Introduction</a></li><li><a href="http://cms.local/tutorial/static_pages.html">Static pages</a></li><li><a href="http://cms.local/tutorial/news_section.html">News section</a></li><li><a href="http://cms.local/tutorial/create_news_items.html">Create news items</a></li><li><a href="http://cms.local/tutorial/conclusion.html">Conclusion</a></li></ul></td><td class="td_sep" valign="top"><h3>General Topics</h3><ul><li><a href="http://cms.local/general/urls.html">CodeIgniter URLs</a></li><li><a href="http://cms.local/general/controllers.html">Controllers</a></li><li><a href="http://cms.local/general/reserved_names.html">Reserved Names</a></li><li><a href="http://cms.local/general/views.html">Views</a></li><li><a href="http://cms.local/general/models.html">Models</a></li><li><a href="http://cms.local/general/helpers.html">Helpers</a></li><li><a href="http://cms.local/general/libraries.html">Using CodeIgniter Libraries</a></li><li><a href="http://cms.local/general/creating_libraries.html">Creating Your Own Libraries</a></li><li><a href="http://cms.local/general/drivers.html">Using CodeIgniter Drivers</a></li><li><a href="http://cms.local/general/creating_drivers.html">Creating Your Own Drivers</a></li><li><a href="http://cms.local/general/core_classes.html">Creating Core Classes</a></li><li><a href="http://cms.local/general/hooks.html">Hooks - Extending the Core</a></li><li><a href="http://cms.local/general/autoloader.html">Auto-loading Resources</a></li><li><a href="http://cms.local/general/common_functions.html">Common Functions</a></li><li><a href="http://cms.local/general/routing.html">URI Routing</a></li><li><a href="http://cms.local/general/errors.html">Error Handling</a></li><li><a href="http://cms.local/general/caching.html">Caching</a></li><li><a href="http://cms.local/general/profiling.html">Profiling Your Application</a></li><li><a href="http://cms.local/general/cli.html">Running via the CLI</a></li><li><a href="http://cms.local/general/managing_apps.html">Managing Applications</a></li><li><a href="http://cms.local/general/environments.html">Handling Multiple Environments</a></li><li><a href="http://cms.local/general/alternative_php.html">Alternative PHP Syntax</a></li><li><a href="http://cms.local/general/security.html">Security</a></li><li><a href="http://cms.local/general/styleguide.html">PHP Style Guide</a></li><li><a href="http://cms.local/doc_style/index.html">Writing Documentation</a></li></ul><h3>Additional Resources</h3><ul><li><a href="http://codeigniter.com/forums/">Community Forums</a></li><li><a href="http://codeigniter.com/wiki/">Community Wiki</a></li></ul></td><td class="td_sep" valign="top"><h3>Class Reference</h3><ul><li><a href="http://cms.local/libraries/benchmark.html">Benchmarking Class</a></li><li><a href="http://cms.local/libraries/calendar.html">Calendar Class</a></li><li><a href="http://cms.local/libraries/cart.html">Cart Class</a></li><li><a href="http://cms.local/libraries/config.html">Config Class</a></li><li><a href="http://cms.local/libraries/email.html">Email Class</a></li><li><a href="http://cms.local/libraries/encryption.html">Encryption Class</a></li><li><a href="http://cms.local/libraries/file_uploading.html">File Uploading Class</a></li><li><a href="http://cms.local/libraries/form_validation.html">Form Validation Class</a></li><li><a href="http://cms.local/libraries/ftp.html">FTP Class</a></li><li><a href="http://cms.local/libraries/table.html">HTML Table Class</a></li><li><a href="http://cms.local/libraries/image_lib.html">Image Manipulation Class</a></li><li><a href="http://cms.local/libraries/input.html">Input Class</a></li><li><a href="http://cms.local/libraries/javascript.html">Javascript Class</a></li><li><a href="http://cms.local/libraries/loader.html">Loader Class</a></li><li><a href="http://cms.local/libraries/language.html">Language Class</a></li><li><a href="http://cms.local/libraries/migration.html">Migration Class</a></li><li><a href="http://cms.local/libraries/output.html">Output Class</a></li><li><a href="http://cms.local/libraries/pagination.html">Pagination Class</a></li><li><a href="http://cms.local/libraries/security.html">Security Class</a></li><li><a href="http://cms.local/libraries/sessions.html">Session Class</a></li><li><a href="http://cms.local/libraries/trackback.html">Trackback Class</a></li><li><a href="http://cms.local/libraries/parser.html">Template Parser Class</a></li><li><a href="http://cms.local/libraries/typography.html">Typography Class</a></li><li><a href="http://cms.local/libraries/unit_testing.html">Unit Testing Class</a></li><li><a href="http://cms.local/libraries/uri.html">URI Class</a></li><li><a href="http://cms.local/libraries/user_agent.html">User Agent Class</a></li><li><a href="http://cms.local/libraries/xmlrpc.html">XML-RPC Class</a></li><li><a href="http://cms.local/libraries/zip.html">Zip Encoding Class</a></li></ul></td><td class="td_sep" valign="top"><h3>Driver Reference</h3><ul><li><a href="http://cms.local/libraries/caching.html">Caching Class</a></li><li><a href="http://cms.local/database/index.html">Database Class</a></li><li><a href="http://cms.local/libraries/javascript.html">Javascript Class</a></li></ul><h3>Helper Reference</h3><ul><li><a href="http://cms.local/helpers/array_helper.html">Array Helper</a></li><li><a href="http://cms.local/helpers/captcha_helper.html">CAPTCHA Helper</a></li><li><a href="http://cms.local/helpers/cookie_helper.html">Cookie Helper</a></li><li><a href="http://cms.local/helpers/date_helper.html">Date Helper</a></li><li><a href="http://cms.local/helpers/directory_helper.html">Directory Helper</a></li><li><a href="http://cms.local/helpers/download_helper.html">Download Helper</a></li><li><a href="http://cms.local/helpers/email_helper.html">Email Helper</a></li><li><a href="http://cms.local/helpers/file_helper.html">File Helper</a></li><li><a href="http://cms.local/helpers/form_helper.html">Form Helper</a></li><li><a href="http://cms.local/helpers/html_helper.html">HTML Helper</a></li><li><a href="http://cms.local/helpers/inflector_helper.html">Inflector Helper</a></li><li><a href="http://cms.local/helpers/language_helper.html">Language Helper</a></li><li><a href="http://cms.local/helpers/number_helper.html">Number Helper</a></li><li><a href="http://cms.local/helpers/path_helper.html">Path Helper</a></li><li><a href="http://cms.local/helpers/security_helper.html">Security Helper</a></li><li><a href="http://cms.local/helpers/smiley_helper.html">Smiley Helper</a></li><li><a href="http://cms.local/helpers/string_helper.html">String Helper</a></li><li><a href="http://cms.local/helpers/text_helper.html">Text Helper</a></li><li><a href="http://cms.local/helpers/typography_helper.html">Typography Helper</a></li><li><a href="http://cms.local/helpers/url_helper.html">URL Helper</a></li><li><a href="http://cms.local/helpers/xml_helper.html">XML Helper</a></li></ul></td></tr></tbody></table>
                </div>
            </div>
            <div id="nav2">
                <span id="adminMenuWrapperButtonLeft">
                    <img onclick="myHeight.toggle();changeArrow();" src="http://cms.local/media/img/system/SlideArrowBottom.png" width="40px" class="navArrow">
                </span>
                <span id="adminMenuWrapperButtonRight">
                    <img onclick="myHeight.toggle();changeArrow();" src="http://cms.local/media/img/system/SlideArrowBottom.png" width="40px" class="navArrow">
                </span>
                <div class="clear"></div>
            </div>
            <script>
                window.onload = function() {
                    myHeight = new fx.Height('nav', {
                        duration : 400
                    });
                    myHeight.hide();
                }
                var typeArrow = 1;
                function changeArrow(){
                    if(typeArrow == 1){
                        $('.navArrow').each(function(){
                            $(this).attr('src', "http://cms.local/media/img/system/SlideArrowTop.png");
                        });
                        typeArrow = 0;
                    } else{
                        $('.navArrow').each(function(){
                            $(this).attr('src', "http://cms.local/media/img/system/SlideArrowBottom.png");
                        });
                        typeArrow = 1
                    }
                }
            </script>

            <div id="adminMenuWrapper">

                <span id="adminMenuWrapperButton"><img onclick="slideMenu();" src="http://cms.local/media/img/system/SlideArrowRightOver.png" width="25px" id="adminMenuWrapperButtonImg"></span>
                <script>
                                        function slideMenu() {
                                            var currentWidth = $('#adminMenuWrapper').width();
                                            if (currentWidth < 149) {
                                                $('#adminMenuWrapper').animate({
                                                    'width' : '150px'   // to move it towards the right.
                                                }, 1000, function() {
                                                    $('.adminMenuWrapperText').toggle();
                                                    $('#adminMenuWrapperButtonImg').attr('src', "http://cms.local/media/img/system/SlideArrowLeftOver.png");
                                                });
                                            } else {
                                                $('.adminMenuWrapperText').toggle();
                                                $('#adminMenuWrapper').animate({
                                                    'width' : '50px'    // to move it towards the left.
                                                }, 1000, function() {
                                                    $('#adminMenuWrapperButtonImg').attr('src', "http://cms.local/media/img/system/SlideArrowRightOver.png");
                                                });
                                            }
                                        }
                </script>
                <div class="clear"></div>
                <br>
                <a href="http://cms.local/admin" class="linkAdminMenu"><span class="adminMenuWrapperText">Dashboad</span> <img width="50px" src="http://cms.local/media/img/system/dashboard.png" style="vertical-align: middle;"></a>
                <br><br>
                <a href="http://cms.local/admin/pages" class="linkAdminMenu"><span class="adminMenuWrapperText">Pagina′s</span> <img width="50px" src="http://cms.local/media/img/system/contentIcon.png" style="vertical-align: middle;"></a>
                <br>
            </div>
            <div id="adminContentWrapper">
                <div id="adminHeader">
                    <div id="adminHeaderLeft">
                        <h3>Administrator</h3>
                    </div>
                    <div id="adminHeaderRight">
                        Aangemeld als WeProgram | <a href="http://cms.local/" target="_tab">Website</a> | <a href="http://cms.local/admin/logout">Afmelden</a>
                    </div>
                    <div class="clear"></div>
                </div>
                <!-- <div id="adminMainContentWrapper" class="block-shadow block-header">
                    <span class="adminMainContentHeaderItem">
                        Dashboard
                    </span>
                    <span class="adminMainContentHeaderItem">
                        Inhoud
                    </span>
                </div>
                <div id="adminMainContentHeaderSubWrapper" class="arrow_box">
                    Quick Links????:
                </div> -->      <div id="adminMainContentWrapper" class="block-shadow block-header">
    <span class="adminMainContentHeaderItem">
        <a href="http://cms.local/admin/pages" class="linkSecondMenu">Pagina′s</a>
    </span>
    <span class="adminMainContentHeaderItem">
        <a href="http://cms.local/admin/menu" class="linkSecondMenu">Menu</a>
    </span>
</div></div> <div class="clear"></div>
</div>
<!-- <br /><br /><strong>&copy; 2013 WeProgram</strong>  -->

</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:01:32.437

最有可能的..

```
 onclick="myHeight.toggle();changeArrow();" 
```

这个内联 javascript 调用给你带来了问题，因为 myHeight 可能没有设置..你为什么不在 javascript 中调用 click 事件

```
window.onload = function() {
          myHeight = new fx.Height('nav', {
                    duration : 400
          });
          myHeight.hide();
         var typeArrow = 1; 
         $('.navArrow').click(function(){
              myHeight.toggle()  //here call toggle 
              if(typeArrow == 1){
                    $('.navArrow').each(function(){
                        $(this).attr('src', "http://cms.local/media/img/system/SlideArrowTop.png");
                    });
                    typeArrow = 0;
              } else{
                    $('.navArrow').each(function(){
                        $(this).attr('src', "http://cms.local/media/img/system/SlideArrowBottom.png");
                    });
                    typeArrow = 1
              }
          });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:35:32.947

*这是一个自我回答，所以这个问题被设置为解决*

我已经修好了。原型.js 覆盖了函数`$()`。我更改了该函数的名称，并更新了该文件中的函数调用，并且已修复...

# javascript - 使用 jQuery 将事件绑定到表格单元格

> ID：15918343
> 
> 赞同：0
> 
> 时间：2013-04-10T06:17:03.907
> 
> 标签：javascript, jquery, html

这是我的标记：

```
<div id="divContainer">
    <div>
        <table></table>
    </div>
    <div>
        <table></table>
    </div>
    ....
</div> 
```

我需要在所有表的`mouseenter`所有 s 上注册事件`td`（存在于每个表中`div`）。

```
$(document).ready(function () {
    $allTds = $('#divContainer').find("tr").find("td");
    ...
    SomeFunction();
});

function SomeFunction(){
   $allTds.on({
       mouseenter: function (e) {
           alert('hover');
       }
   });
} 
```

但我没有收到任何警报。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:19:44.463

他们应用事件侦听器的方式很奇怪。

```
$('#divContainer').on('mouseenter','td',function() {
    alert('mouse entered');
}); 
```

另外：缓存 td 元素很好，但是为什么不坚持使用更简单的东西呢？

```
$allTd = $('#divContainer td'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:24:27.683

您的事件处理程序未绑定的原因是`<td>`当您进入文档就绪处理程序时元素不存在。

您应该为此使用事件委托。例如

```
window.jQuery(function($) {
    $('#divContainer').on({
        mouseenter: function(e) {
            alert('hover');
        }
    }, 'td');
}); 
```

这样，它`#divContainer`就是监听事件的元素，如果它们来自`<td>`.

请参阅[http://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

您还遇到了范围问题，其中`$allTds`变量仅在文档就绪处理程序中定义，并且不在`SomeFunction`函数的范围内。

# batch-file - 通过带有用户名/密码的批处理文件添加 ODBC 数据库

> ID：15918345
> 
> 赞同：3
> 
> 时间：2013-04-10T06:17:06.837
> 
> 标签：batch-file, odbc

我需要在几台计算机上安装一个 ODBC 数据库，并希望通过一个批处理文件来完成这一切。我可以让它像这样安装数据库连接字符串。

```
ODBCCONF.exe CONFIGSYSDSN "SQL Server" "DSN=DSNNAME | Description=Descriptionname| SERVER=ServerName | Trusted_Connection=Yes | Database=dbname"

pause
@CLS
@Exit 
```

但我需要补充一点，它应该使用登录 ID 和密码登录，而不是使用网络登录 ID。

任何人都知道我该如何解决这个问题？也在 64 位 Windows 7 上谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:12:10.070

[http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/53f689c1-53c8-45c6-b9ce-c44bce46cd9d/说“](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/53f689c1-53c8-45c6-b9ce-c44bce46cd9d/)**不支持**在 DSN 中保留登录凭据（这是不安全的）。使用受信任的连接将是在不指定凭据的情况下实现连接的最佳方式，因为登录的用户凭据用于对服务器进行身份验证。”

如果更改为`Trusted_Connection=No`它将添加 DSN，但随后您需要运行 ODBC 数据源管理并手动将用户和密码添加到新的 DSN。

顺便说一句，根据[http://msdn.microsoft.com/en-us/library/windows/desktop/ee388579%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee388579%28v=vs.85%29.aspx) “ODBCCONF.exe 将在 Windows 数据访问的未来版本中删除组件。避免使用此功能，并计划修改当前使用此功能的应用程序。

# file-upload - 使用 extjs4 上传文件

> ID：15918347
> 
> 赞同：5
> 
> 时间：2013-04-10T06:17:17.253
> 
> 标签：file-upload, extjs4

我正在研究 Extjs4 文件上传控制。我有文件上传控制视图-

```
Ext.define('Balaee.view.kp.dnycontent.Content', 
{
    extend:'Ext.form.Panel',
    requires:[
              'Balaee.view.kp.dnycontent.ContentView'
              ],
    id:'ContentId',
    alias:'widget.Content',
    enctype : 'multipart/form-data', 
    title:'This day in a history',
    items:[

    {
        xtype: 'fileuploadfield',
        hideLabel: true,
        emptyText: 'Select a file to upload...',
        //inputType: 'file',
        id: 'upfile',
        width: 220
}],
   buttons: [{
        xtype : 'button',
        fieldlabel:'upload',
        action:'upload',
        name:'upload',
        text: 'Upload',
        formBind:'true'

    }]
}); 
```

控制器中的相应动作是-

```
getUpload : function() {

        var file10 = Ext.getCmp('ContentId').getEl().down('input[type=file]').dom.files[0];

        var reader = new FileReader();
        reader.onload = function(oFREvent) {
            fileobj=oFREvent.target.result;
            console.log(oFREvent.target.result);

        };
        }
    }); 
```

所以上面控制器的功能是检索上传的文件并在阅读器的 onload 函数中以编码格式显示它。即“console.log(oFREvent.target.result);” 行在控制台中以编码格式显示上传文件的数据。我需要将此文件发送到服务器端。所以我将上面的fileobj作为参数传递给存储为-

```
var storeObj=this.getStore('kp.DnycontentStore');
         storeObj.load({
         params:{
         data:fileobj
         },
         callback: function(records,operation,success){
           console.log("send");
         },
         scope:this
         }) 
```

但它显示 fileobj 为未定义的外部 reader.onload 函数。那么如何将此文件及其内容发送到服务器端呢？有没有其他方法可以在控制器中获取上传的文件并将其发送到服务器。请有人指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:03:04.430

我不知道如何在 php 端处理 fileuplaod，但是来自服务器的返回响应需要是 text/html 编码的请参阅此文档： http: [//docs.sencha.com/ext-js/4-1/# !/api/Ext.form.Basic-method-hasUpload](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-hasUpload)

还有示例 PHP 文件上传脚本： [http ://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

# c - 如何可维护地确定 sizeof(struct ...)s？

> ID：15918358
> 
> 赞同：1
> 
> 时间：2013-04-10T06:18:03.353
> 
> 标签：c, struct, sizeof, maintainability

假设我有一个结构：

```
struct myStruct
{
    int a;
    short b;
    char c;
}; 
```

在 Windows 中，[MSDN 声明](http://msdn.microsoft.com/en-us/library/cc953fe1.aspx) `int`占用 4 个字节、`short`占用 2 个字节和`char`占用 1 个字节。总共最多 7 个字节。

我知道大多数编译器会用未指定的字节数填充结构以改善对齐。所以，当我执行这个程序时，

```
#include <stdio.h>

int main(void) {
    printf("%d\n", sizeof(struct myStruct));
    return 0;
} 
```

我得到`8`. 这意味着填充了 1 个字节。

有什么方法可以让我可以维护地确定`struct`代码中的大小（没有加起来单独`sizeof`的 s）？

我问这个是因为以后，如果我需要更改我的结构以包含大约十五个元素，并且如果我再添加五个结构，我所有的`struct` `sizeof`s 都会改变，导致事情变得混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:24:49.723

您可以强制执行它：

```
#define C_ASSERT(expr) extern char CAssertExtern[(expr)?1:-1]

C_ASSERT(sizeof(struct myStruct) == 7); // or 8, whichever you want 
```

每当大小偏离 7 时，代码就会停止编译。

您可以做类似的事情来强制结构成员的偏移量。你需要这个`offsetof()`宏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:50:46.383

你可以试试pragma pack。它有助于保持对齐并具有许多灵活性。检查这个 [http://publib.boulder.ibm.com/infocenter/comphelp/v101v121/index.jsp?topic=/com.ibm.xlcpp101.aix.doc/compiler_ref/pragma_pack.html](http://publib.boulder.ibm.com/infocenter/comphelp/v101v121/index.jsp?topic=/com.ibm.xlcpp101.aix.doc/compiler_ref/pragma_pack.html)

更新：刚刚看到你的评论，也许 pack 不是你的解决方案

# java - 使用 GSON 从 URL 解析 JSON 到数组

> ID：15918359
> 
> 赞同：0
> 
> 时间：2013-04-10T06:18:05.897
> 
> 标签：java, json, yql

晚上好，

我希望将通过 YQL 请求从 yahoo.finance.quote 获得的 JSON 块解析为要与 SQL DB 一起使用的列表。

这是相关的代码块：

```
String uri = "(\"GOOG\",\"YHOO\",\"AAPL\",\"C\",\"FB\",\"GE\",\"BAC\")";

String yql = "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quote%20where%20symbol%20in%20" + uri + "&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";  

        BufferedReader reader = null;
            URL url = new URL(yql);
            reader = new BufferedReader(new InputStreamReader(url.openStream()));

            Class1 data = gson.fromJson(reader, Class1.class);
            System.out.println(new Gson().toJson(data));

public class Class1 {
      private int query;
      private int results;
      private List<Class2> quote;
    }

    public class Class2 {
      private String Name;
    } 
```

我想要从 JSON 获得的实际数据是 Data.Query.Result.Quote，但我似乎无法使用内部类（Class1、Class2）正确引用它。谁能提供一些帮助，或者让我知道我是否在做一些愚蠢的事情？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:32:34.723

`Query`,`results`并且`quote`是`JSONObject`s 在他们自己的权利。您不能以这种方式映射它们并期望它能够工作。使用此结构作为参考并完成其余部分。

# 解析

```
Response fromJson = gson.fromJson(file, Response.class);
System.out.println(fromJson.getQuery().getResults().getQuote().getSymbol()); 
```

# 输出

> 谷歌

# 结构

```
public class Response
{
    private Query query;

    public Query getQuery()
    {
        return query;
    }

    public void setQuery(Query query)
    {
        this.query = query;
    }

}

class Query 
{
    private int count;
    private Results results;
    public int getCount()
    {
        return count;
    }
    public void setCount(int count)
    {
        this.count = count;
    }
    public Results getResults()
    {
        return results;
    }
    public void setResults(Results results)
    {
        this.results = results;
    }

}

class Results
{
    private Quote quote;

    public Quote getQuote()
    {
        return quote;
    }

    public void setQuote(Quote quote)
    {
        this.quote = quote;
    }

}

class Quote
{
    private String symbol;

    public String getSymbol()
    {
        return symbol;
    }

    public void setSymbol(String symbol)
    {
        this.symbol = symbol;
    }
} 
```

# php - XAMPP 本地主机上的邮件问题

> ID：15918360
> 
> 赞同：-2
> 
> 时间：2013-04-10T06:18:06.300
> 
> 标签：php, xampp

我在 Windows 8 上使用 XAMPP 1.7.4 执行邮件脚本时出现错误***警告：mail() [function.mail]：SMTP 服务器响应：553 我们不中继非本地邮件，抱歉，***此代码运行良好在实时服务器上

那么可能是什么问题？提前感谢您帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:21:38.533

好吧，错误说明了一切。您要连接的 SMTP 服务器回复，它不会中继非本地邮件。因此，无论您配置了什么 SMTP 服务器，当发送方是非本地、pe`localhost`或`127.0.0.1`.

这似乎不是您的代码中的错误，更有可能是您的脚本或您要中继到的 SMTP 服务器中的配置错误。

# c# - 从文件名中具有最大日期的目录中获取文件

> ID：15918361
> 
> 赞同：1
> 
> 时间：2013-04-10T06:18:08.117
> 
> 标签：c#, linq, directory

我需要获取文件名中包含最大日期的文件。

文件示例：`zipFiles_2013-04-09_17-04-37.zip`

```
DirectoryInfo di = new DirectoryInfo(FilePath); 
```

我只能得到 latestValue 日期。如何获得全名或姓名？

```
DateTime latestValue;
di.GetFiles().Max(x => DateTime.TryParseExact(GetFileNameDate(x.FullName), "yyyy-MM-dd_HH-mm-ss", CultureInfo.InvariantCulture, DateTimeStyles.None, out latestValue)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:27:26.857

使用 .按名称对文件进行排序`OrderByDescending`。然后从结果中取第一个：

```
var latestFile = di.GetFiles()
                   .OrderByDescending(f => GetDateFromFileName(f.FullName))
                   .First(); 
```

这`GetDateFromFileName`是一个`DateTime`从文件名解析的方法。像这样的东西：

```
private DateTime GetDateFromFileName(string fileName)
{
   DateTime date;
   if (DateTime.TryParseExact(GetFileNameDate(fileName), 
         "yyyy-MM-dd_HH-mm-ss", CultureInfo.InvariantCulture, DateTimeStyles.None, out date))
      return date;
   // default value if date cannot be parsed (you can use nullable DateTime also)
   return DateTime.MinValue;
}; 
```

您还可以使用[morelinq](http://code.google.com/p/morelinq/wiki/OperatorsOverview)（可从 NuGet 获得）[MaxBy](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs?r=2da75c30d5bda7959e5113b702b4bb204a0e4a2c)方法：

```
var latestFile = di.GetFiles().MaxBy(f => GetDateFromFileName(f.FullName)); 
```

# windows - 何时调用 UpdateLayeredWindow？

> ID：15918362
> 
> 赞同：0
> 
> 时间：2013-04-10T06:18:08.617
> 
> 标签：windows, winapi, user-interface

我使用 UpdateLayeredWindow 绘制了一个使用 png 作为背景的窗口。但是这个窗口包含一些自绘按钮，当用户悬停/单击这些按钮时会改变，然后窗口应该改变。

现在的问题是我什么时候应该调用 UpdateLayeredWindow。我应该在用户更改按钮外观后调用 UpdateLayeredWindow，即当用户将鼠标悬停在按钮上方或单击按钮时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T05:12:24.413

当需要更新 layeredwindow 时，调用 UpdateLayeredWindow，但要非常小心。

过于频繁地调用它确实会导致性能问题，它不是 WM_PAINT，如果消息队列中有太多，它可能会合并为一个。UpdateLayeredWindow 不...

# xml - 换行的 XSL 渲染在 IE8 和 IE9 之间是不同的

> ID：15918365
> 
> 赞同：1
> 
> 时间：2013-04-10T06:18:15.457
> 
> 标签：xml, google-chrome, xslt, internet-explorer-8, internet-explorer-9

我正在渲染 XML Dom 对象并面临一个非常严重的问题。`"&#10;"`一个问题是：每当我得到and时，我都想打破界限`"&#172;"`。

在 IE8 中：它正确呈现`"&#10;"`（新行）并将`<br>`标签放在找到的位置`"&#10;"`。但在 IE9 中，它会将每个单词都分成新行，无论它在哪里找到`"&#10;"`，并带有一个空格（单个空格）

```
<xsl:template name="for-each-character">
        <xsl:param name="data"/>
        <xsl:variable name="lf"><xsl:text>&#10;</xsl:text></xsl:variable>
        <xsl:variable name="sr"><xsl:text>&#172;</xsl:text></xsl:variable>

        <xsl:if test="string-length($data) &gt; 0">
        <xsl:value-of select="substring($data,1,1)"/>
        <xsl:if test="substring($data,1,1) = $sr or substring($data,1,1) = $lf">
            <br/>
        </xsl:if>
            <xsl:call-template name="for-each-character">
                <xsl:with-param name="data" select="substring($data,2)"/>
            </xsl:call-template>
        </xsl:if>
</xsl:template> 
```

***IE8 中的输出：***

您好，这是在规范字符之后换行的文本

***IE9 中的输出：***

你好
这
是
....等等

***预期的输出应该是（在 IE8 和 IE9（或 >=IE9）中）：***

您好，这是在规范字符之后换行的文本

上面的模板在 Chrome 和 IE8 中正常工作，但在 IE9 中产生问题。

将不胜感激任何进一步的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:28:10.857

解决这个问题的方法是在处理 IE（至少 IE9 及以下）时使用`&#xA;`，而不是。`&#10;`

# windows-phone-7 - wp7可以停止硬件的后退按钮吗？

> ID：15918366
> 
> 赞同：0
> 
> 时间：2013-04-10T06:18:19.173
> 
> 标签：windows-phone-7

我的场景是，当我导航到新页面时，加载内容需要一些时间。在这段时间内，如果我按返回键，它会由于某种原因引发异常。所以我想在这么长的时间内停止后退键的行为，当内容完全加载时，用户可以按后退键，然后导航到上一页。我只是想明确一点，微软的应用程序认证要求是否允许，这样我的应用程序就不会被拒绝。所以请给出答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:24:38.987

你可以这样做：

```
bool flag = false;

// Assuming this is where you can handle executions during loading
loading()
{
    flag = true;
}

// After loading is completed
loadComplete()
{
    flag = false;
}

// Handle back button
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    if (flag)
    {
         e.Cancel = true;
    }
} 
```

只要你不锁定用户永远不允许他回去，它应该通过认证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:33:30.530

In xaml

```
<phone:PhoneApplicationPage
.....
BackKeyPress="PhoneApplicationPage_BackKeyPress"> 
```

In code

```
 private void PhoneApplicationPage_BackKeyPress(object sender, System.ComponentModel.CancelEventArgs e)
    {
        e.Cancel = CouldStepBack();
    }

 private bool CouldStepBack()
 {
    // todo return true, when load comleted
    // else return false
 } 
```

And if you need you also can clean stack of pages (optional)

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        if (NavigationService.CanGoBack)
        {
            while (NavigationService.RemoveBackEntry() != null)
            {
                NavigationService.RemoveBackEntry();
            }
        }
        base.OnNavigatedTo(e);
    } 
```

Hope its help

# c - 在 C 程序中使用链表时出错

> ID：15918367
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:18:19.227
> 
> 标签：c, error-handling, linked-list, dynamic-memory-allocation, singly-linked-list

我正在为班级做一个额外的学分项目，以下是规格：

*   您将编写 ac 程序（您应该使用设计工具，但我不想看到它）
*   程序将使用动态内存创建一个链表（不允许数组）
*   该程序将存储无限数量的学生记录（仅受 RAM 限制）。
*   学生记录将包含学生姓名和年龄……您可能需要添加两个附加字段才能完成这项工作。
*   该程序将有一种方法供用户添加记录。
*   该程序将有一种方法让用户显示所有记录（仅显示在屏幕上，不需要排序）。
*   该程序需要一种退出方式。

我已经完成了所有代码，但我收到了这个讨厌的错误。这正是我在电脑上看到的：

```
1>linkedProject.obj : error LNK2019: unresolved external symbol _add referenced in    function _main
1>E:\Spring 2013\C Programing Class\linkedProject\Debug\linkedProject.exe : fatal error LNK1120: 1 unresolved externals 
```

这是我的代码：

```
#include<stdlib.h>
#include<stdio.h>
#include<malloc.h>
#include<conio.h>
#include<string.h>
#include<ctype.h>
#define pause system ("pause")

// prototype variables
struct node * initnode(char*, int);
void printnode(struct node*);
void printflist(struct node*);
void add(struct node*);
struct node* searchname(struct node*, char*);

struct node{
    char name[20];
    int age;
    struct node *next;
};

struct node *head = (struct node*) NULL;
struct node *end = (struct node*) NULL;

struct node* initnode(char *name, int age){
    struct node *ptr;
    ptr = (struct node*) calloc(1, sizeof(struct node));
    if(ptr == NULL) 
        return (struct node*) NULL;
    else {
        strcpy(ptr->name, name);
        ptr->age = age;
        return ptr;
     }
}

void printnode(struct node *ptr) {
    printf("Name -> %s\n", ptr->name);
    printf("Age -> %d\n", ptr->age);
}

void printlist (struct node *ptr) {
    while (ptr != NULL) {
        printnode(ptr);
        ptr = ptr->next;
    }
}

main() {
    char name[20];
    int age, choice = 1;
    struct node *ptr;
    while(choice != 3){
        system("cls");
        printf("1\. Add a name\n");
        printf("2\. List all names\n");
        printf("3\. Exit");
        printf("\nEnter Menu Selection: ");
        scanf("%d", &choice);
        switch(choice) {
        case 1: printf("\nEnter a name: ");
            scanf("%s", &name);
            printf("Enter age: ");
            scanf("%d", &age);
            ptr = initnode(name, age);
            add (ptr);
            break;
        case 2: printlist(head);
            break;
        case 3: exit(3);
        default: printf("Invalid Entry");
        }// end of switch

    }// end of while

}// end of main 
```

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:27:42.000

链接器告诉您它找不到该`add`函数。

您已声明：

> 无效添加（结构节点*）

在你的原型中，但你还没有在任何地方定义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:38:24.650

你在中声明`add`方法`prototype`。并`add(ptr) call`在主要方法中。但我看不到`add method definiton`。这就是编译器出现链接器错误的原因。

# iphone - iOS 捆绑子文件夹目录

> ID：15918373
> 
> 赞同：0
> 
> 时间：2013-04-10T06:18:43.177
> 
> 标签：iphone, ios, objective-c, nsxml

我有一个 Bundle 文件夹，其中包含一个 . `XML`文件和一个文件夹。看起来像这样![捆绑文件夹结构](https://i.stack.imgur.com/IMKfR.png)

在这里，我使用 NSXml Parser 读取了 .XML 文件。XML 看起来像，

```
<?xml version="1.0" standalone="yes"?>
<user id="32" name="lima"><class id="1" name="Third">  
<pages id="2" name="Page002.html" url="matematica/Page002.html"/>
</user> 
```

我也阅读了 URL 值，但是我必须如何在 XML 文件中给出 URL 值，Page002.html 位于 matematica 文件夹中。我如何必须在 XML 中给出该路径。？我正在将该 .HTML 文件加载到`UIWebview`. 如果我给像**matematica/Page002.html** webview 找不到路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:52:42.463

尝试这个

```
NSString *path=[[NSBundle mainBundle] pathForResource:@"Page002" ofType:@"html" inDirectory:@"matematica"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:40:59.827

Xcode 中的文件夹结构只是逻辑分组，与 url 无关。因此，在上述情况下，您的网址当然是错误的。您已经给出了 url 内部的完整路径。您可以使用以下方法获取它：

```
 NSString *path=[[NSBundle mainBundle] pathForResource:@"Page002" ofType:@"html"]; 
```

然后您可以通过以下方式加载它：

```
[WebView loadRequest:[NSURLRequest requestWithURL:[NSUrl urlWithString:path]]] 
```

# ios - 按索引UITableView滚动时的字母栏

> ID：15918374
> 
> 赞同：0
> 
> 时间：2013-04-10T06:18:47.437
> 
> 标签：ios, uitableview, scroll, indexing, sections

我有这样的 [http://www.allappsdevelopers.com/images/TopicImages/TableView%20in%20iphone/index.png](http://www.allappsdevelopers.com/images/TopicImages/TableView%20in%20iphone/index.png)

而且我还想在滚动这些字母时显示类似 MBProgressHud 的内容。我在某些应用程序中看到，当您按索引滚动时，字母在窗口中心以黑色圆形视图显示。

注意：不是手动滚动时，而是仅在使用索引滚动时。

我可以以某种方式检测到在此面板上开始拖动并结束拖动吗？或者有没有其他方法来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:39:44.357

做了我自己的解决方案：

```
@property (retain, nonatomic) MBProgressHUD *letterBar;
@property (retain, nonatomic) NSTimer *letterBarTimer; 
```

* * *

```
self.letterBar = [[MBProgressHUD alloc] initWithView:self.view];
[self.letterBar setUserInteractionEnabled:NO];
[self.letterBar setMode:MBProgressHUDModeText];
[self.view addSubview:self.letterBar]; 
```

* * *

```
-(NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index {
    [self.letterBarTimer invalidate];
    [self.letterBar setLabelText:title];
    [self.letterBar show:YES];
    self.letterBarTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(hideLetterBar) userInfo:nil repeats:NO];
    return index;
}

-(void)hideLetterBar {
    [self.letterBar hide:YES];
} 
```

# php - 拥有专用注销页面的原因

> ID：15918375
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:18:48.263
> 
> 标签：php, theory

在基于用户的网站中，网站使用“logout.php”之类的页面是很常见的，我什至自己在自己的项目中使用它们，但现在我想知道为什么。所以我的问题是：使用专用文件注销用户有什么特别的好处吗？在任何适当的类中创建一个方法不是更有条理，例如：

这是一个用 PHP 编写的示例（这与我开始使用的类似）：

```
public class Admin {

   private function logout() {
        $_SESSION[ADMIN_ACCESS_KEY] = null;
        unset($_SESSION[ADMIN_ACCESS_KEY]);
        return ($_SESSION[ADMIN_ACCESS_KEY]) ? false : true;    
   } 

} 
```

然后这个函数会被一些 $_POST 或 $_GET 变量，或任何其他方式触发。

我唯一的猜测是为什么它如此受欢迎（谷歌、facebook 等，我上次检查过）使用单个专用文件进行注销过程，您可以简单地将用户引导到页面（logout.php），他们会无论如何都要注销，前提是页面加载并正确执行。你能想到这两种方法有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:23:47.030

它不一定是它自己的文件。在大多数情况下，该站点正在运行一个 MVC，其中 url 参数被解析为类方法。因此，尽管您正在访问`host.com/account/logout`- 您只是在浏览器中以最简单的方式调用类中的`logout()`方法`account`（以最简单的形式）。

您认为这可以通过简单地删除客户端的 cookie 来使用 JavaScript 完成，但最佳做法是也销毁服务器存储的会话，因此任何人都无法恢复它（如攻击者）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:29:49.430

我能想到的最大优势是它允许开发人员保留`<a href="logout.php">logout</a>`类型注销按钮，这不依赖于 jquery 或任何其他客户端 javascript 来注销您。您只需将它们重定向/链接到另一个页面，该页面负责删除他们的会话数据。

它只是一个简单明了的 URL。有时人们甚至更喜欢在 URL 中输入它，我知道我愿意！

# c# - 如何使用内置 .NET 功能检测输入字符串字符语言？

> ID：15918376
> 
> 赞同：7
> 
> 时间：2013-04-10T06:18:49.040
> 
> 标签：c#, .net, vb.net

我想检测我的输入字符串中是否有`Arabic`字符。
也许像这样的一些代码：

```
string str = "سS";
str[0].IsArabicCharacter(); //true
str[1].IsArabicCharacter(); //false 
```

目前使用映射，但我想迁移到一些 C# 内置功能。

```
ArabicChars = "ساینبتسیکبدثصکبثحصخبدوزطئظضچج";
string str = "ل";
if(ArabicChars.Contains(str[0]) return true; else return false; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T06:27:46.377

您将获得的最好的将是各种 RegEx unicode 块字符类：`\p{name}`

```
Regex.IsMatch(str[0], @"\p{IsThai}");
Regex.IsMatch(str[1], @"\p{IsArabic}"); 
```

MSDN 参考页：

*   [Unicode 类别或 Unicode 块](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#CategoryOrBlock)
*   [支持的命名 Unicode 块列表](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#SupportedNamedBlocks)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:30:09.527

查看 unicode [Blocks.txt](http://www.unicode.org/Public/UNIDATA/Blocks.txt)文件并确定要包含哪些范围为阿拉伯语或波斯语（U+0600..06FF 是一个明显的开始）并进行数字比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T06:26:55.707

获取一个字符的 Unicode 值并检查它属于哪个图表：

[http://www.unicode.org/charts/](http://www.unicode.org/charts/)

# javascript - 如何根据在javascript中选择单选按钮的下拉列表在文本框中显示相应的值？

> ID：15918377
> 
> 赞同：0
> 
> 时间：2013-04-10T06:18:53.517
> 
> 标签：javascript, jsp, css

我正在创建一个表单，要求使用单选按钮选择学位。根据选择的单选按钮，下拉列表中的值会发生变化。现在我想根据从下拉列表中选择的选项在文本框中显示一些值。

在这里，我可以在选择单选按钮时更改下拉列表中的值，但在从下拉菜单中选择值时无法在文本框中显示。这是我的java脚本代码：

> > 请选择您的学位 UG PG
> > 
> > ```
> >  <fieldset id="branch">
> >     <legend>Please select your degree</legend>
> >     <select name="branch" id="degreepg" size="1">
> >         <option value="00">Select Degree First</option>
> > 
> >     </select>
> >     </fieldset>      
> > 
> >     <fieldset id="semester">
> >     <legend>Semester</legend>
> >     <input type="text" name="semester" id="textbox" size="1"/>
> >     </fieldset>
> >     </div> 
> > ```

java脚本函数：

> > > 函数 SetbranchBydegree(degree) { var dropdown = document.getElementById("degreepg");
> > > 
> > > ```
> > > switch (degree.value) {
> > >     case 'UG': {
> > >         dropdown.options.length = 0;
> > >         dropdown.options[dropdown.options.length] = new Option('Select One','0');
> > >         dropdown.options[dropdown.options.length] = new Option('B.Tech','1');
> > >         dropdown.options[dropdown.options.length] = new Option('B.E','2');
> > >         break;
> > >     }
> > > 
> > >     case 'PG': {
> > >         dropdown.options.length = 0;
> > >         dropdown.options[dropdown.options.length] = new Option('Select One','0');
> > >         dropdown.options[dropdown.options.length] = new Option('M.Tech','3');
> > >         dropdown.options[dropdown.options.length] = new Option('M.C.A','4');
> > >         break;
> > >     }
> > > 
> > >     default:{
> > > 
> > >         dropdown.options.length = 0;
> > >         dropdown.options[dropdown.options.length] = new Option('Select Degree First','00');
> > > 
> > >         break;
> > >     }
> > > }
> > > 
> > > if(dropdown.selectedIndex==1)
> > > 
> > > {
> > >   textbox.value = "8";
> > > } 
> > > ```
> > 
> > ```
> >  else if(dropdown.selectedIndex==2) 
> > ```
> 
> ```
>  { 
> ```
> 
> > > ```
> > >  textbox.value = "8";     
> > >   } 
> > > ```
> > 
> > ```
> >  else if(dropdown.selectedIndex==3) 
> > ```
> 
> ```
>  { 
> ```
> 
> > > ```
> > >  textbox.value = "4";        
> > >    } 
> > > ```
> > 
> > ```
> > else if(dropdown.selectedIndex==4) 
> > ```
> 
> ```
>  { 
> ```
> 
> > > ```
> > >  textbox.value = "6";      
> > >   } 
> > > ```
> 
> }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:35:16.663

```
document.getElementById ("textboxId").value = "value"; 
```

**[WORKING DEMO](http://jsfiddle.net/KEY9y/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:05:14.770

您应该考虑将您的对象放入`Options`一个对象中，而不是使用一系列 if 语句，这不仅更容易查看，而且以后扩展也更容易，并且您正在缓存这些值。

```
(function() {
    var options = {
        UG: [
        new Option('Select One', '0'),
        new Option('B.Tech', '1'),
        new Option('B.E', '2')],

        PG: [
        new Option('Select One', '0'),
        new Option('M.Tech', '3'),
        new Option('M.C.A', '4')],

        fallback: [
        new Option('Select Degree First', '00')]
    }

    var SetBranchBydegree = function(degree) {
        var dropdown = document.getElementById("degreepg");
        if (options[degree] !== undefined) {
            dropdown.options = options[degree];
        } else {
            dropdown.options = options.fallback;
        }
    }

    var init = function() {//Setup listeners
    $("#gereepg").change(function(event) {
        var textBox = $("#textbox"), //The textbox with id textbox
            index   = event.target.index;//selected index

        if (index == 1 || index == 2) {
            textbox.val("8");
        }
        else if (index == 3) {
            textbox.val("4");
        }
        else if (index == 4) {
            textbox.val("6");
        }
    });
}

$(document).ready(init);//run the init method when the site has loaded.
})(); 
```

要更改文本框的值，您需要监听 select 的 onChange 事件。这可以通过简单地添加一个属性 onChange="javascriptMethod(this)" 来完成，但通常不推荐这样做，因为它会促进全局范围污染。上面是一个用 jQuery 做的例子；

# graph - JavaScript 中的 3D 雷达图

> ID：15918381
> 
> 赞同：3
> 
> 时间：2013-04-10T06:19:07.973
> 
> 标签：graph, 3d, javascript

是否有一个 JavaScript 库允许您以 3D 形式可视化雷达图（又名蜘蛛图）以及旋转。

我的意思是通过添加时间作为坐标来可视化[这种3D 图表。](http://www.larsko.org/v/euc/)最终结果将是一个不对称形状的 3D 球体。例如：

![在此处输入图像描述](https://i.stack.imgur.com/106WL.png)

我尝试搜索所有不同的 3D JavaScript 库，但找不到任何可以让我轻松完成它而无需从头开始创建的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T07:25:19.203

怎么样[`D3`](https://github.com/mbostock/d3/)？没有很多图表类型*不能*用它来可视化。

更多信息请访问[GitHub](https://github.com/mbostock/d3/wiki/Gallery)和[Wikipedia](http://en.wikipedia.org/wiki/D3.js)。

# java - 如何使用 itextpdf 在生成 pdf 文件时制作页脚

> ID：15918382
> 
> 赞同：2
> 
> 时间：2013-04-10T06:19:14.900
> 
> 标签：java, footer, itextpdf

我一直在网上搜索如何在 java 中使用 itextpdf 制作或设置页脚。到目前为止，我还没有找到任何关于如何做到这一点的信息。我看过一些关于如何使用和设置标题的文章。但不是页脚。这是一个示例代码

```
Document document = new Document(PageSize.LETTER);

Paragraph here = new Paragraph();
Paragraph there = new Paragraph();

Font Font1 = new Font(Font.FontFamily.HELVETICA, 9, Font.BOLD);

here.add(new Paragraph("sample here", Font1));
there.add(new Paragraph("sample there", Font1));
//footer here 

document.add(here);
document.add(there);
document.add(footer); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:00:46.983

要实现页眉和页脚，您需要实现一个扩展
iText API 的 PdfPageEventHelper 类的 HeaderFooter 类。然后覆盖`onEndPage()`设置页眉和页脚。在此示例中，我`name`在页眉中设置页眉和页脚中的“页数”。

在 pdf 创建端代码中，您需要使用`HeaderAndFooter`如下类：

```
 Document document = new Document(PageSize.LETTER);
    PdfWriter writer = PdfWriter.getInstance(document, "C:\sample.pdf");
    //set page event to PdfWriter instance that you use to prepare pdf
    writer.setPageEvent(new HeaderAndFooter(name));
    .... //Add your content to documne here and close the document at last

    /*
     * HeaderAndFooter class
     */
    public class HeaderAndFooter extends PdfPageEventHelper {

    private String name = "";

    protected Phrase footer;
    protected Phrase header;

    /*
     * Font for header and footer part.
     */
    private static Font headerFont = new Font(Font.COURIER, 9,
            Font.NORMAL,Color.blue);

    private static Font footerFont = new Font(Font.TIMES_ROMAN, 9,
            Font.BOLD,Color.blue);

    /*
     * constructor
     */
    public HeaderAndFooter(String name) {
        super();

        this.name = name;

        header = new Phrase("***** Header *****");
        footer = new Phrase("**** Footer ****");
    }

    @Override
    public void onEndPage(PdfWriter writer, Document document) {

        PdfContentByte cb = writer.getDirectContent();

        //header content
        String headerContent = "Name: " +name;

        //header content
        String footerContent = headerContent;
        /*
         * Header
         */
        ColumnText.showTextAligned(cb, Element.ALIGN_LEFT, new Phrase(headerContent,headerFont), 
                document.leftMargin() - 1, document.top() + 30, 0);

        /*
         * Foooter
         */
        ColumnText.showTextAligned(cb, Element.ALIGN_RIGHT, new Phrase(String.format(" %d ", 
                writer.getPageNumber()),footerFont), 
                document.right() - 2 , document.bottom() - 20, 0);

    }

} 
```

希望能帮助到你。我曾在其中一个联名中使用过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-11T14:04:39.587

带有 itextpdf 5 的小演示

```
 final ByteArrayOutputStream byteStream = new ByteArrayOutputStream();
        final Document document = new Document();
        final PdfContentByte cb = PdfWriter.getInstance(document, byteStream).getDirectContent();

        final Paragraph footerTitleParagraph = new Paragraph();
        footerTitleParagraph.add("footer title with no style");
        ColumnText.showTextAligned(cb, Element.ALIGN_CENTER, footerTitleParagraph, document.right()/2, document.bottom()-15, 0);

        final Paragraph footerSubTitleParagraph = new Paragraph("footer sub-title with style", FOOTER_FONT_SUB));
        ColumnText.showTextAligned(cb, Element.ALIGN_CENTER, footerSubTitleParagraph, document.right()/2, document.bottom()-25, 0); 
```

# android - Android Bump 适用于 sdk 1.6 及更高版本

> ID：15918385
> 
> 赞同：5
> 
> 时间：2013-04-10T06:19:19.480
> 
> 标签：android, android-service, bump, android-sdk-1.6

我找到了一个工作演示并成功使用它。但问题是我已经用最低版本 10 实现了它，其中 StrictPolicy 是可导入的。现在我希望 min sdk 版本 1.6 或更高版本与 Bump 一起使用。

我还看到 BindService 的 AsysncTask 可以使用但对我不起作用。建议我做错了什么

```
 int sdkVersion = android.os.Build.VERSION.SDK_INT;
        if(sdkVersion>9)
        {
            try{
                StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
                StrictMode.setThreadPolicy(policy); 
            }catch (Exception e) {
                // TODO: handle exception
            }
        }   
    IntentFilter filter = new IntentFilter();
    filter.addAction(BumpAPIIntents.CHANNEL_CONFIRMED);
    filter.addAction(BumpAPIIntents.DATA_RECEIVED);
    filter.addAction(BumpAPIIntents.NOT_MATCHED);
    filter.addAction(BumpAPIIntents.MATCHED);
    filter.addAction(BumpAPIIntents.CONNECTED);
    filter.addAction(BumpAPIIntents.DISCONNECTED);
    filter.addAction(BumpAPIIntents.BUMPED);
    this.registerReceiver(receiver, filter); 
    //txtReceived=(TextView)findViewById(R.id.txtReceived);
    //bindService(new Intent(IBumpAPI.class.getName()), connection,  Context.BIND_AUTO_CREATE);
    new BindService().execute();
}

        class BindService extends AsyncTask<String, Integer, String>{

        @Override
        protected String doInBackground(String... params) {

            // TODO Auto-generated method stub
            bindService(new Intent(IBumpAPI.class.getName()), connection, Context.BIND_AUTO_CREATE);

            return null;
        }
        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            System.out.println("done");
        }

    }

    /*@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }  */

    @Override
    public void onDestroy()
    {
        super.onDestroy();
        try {
            unbindService(connection);
            unregisterReceiver(receiver);
        } catch (Exception e) {
            // TODO: handle exception
        }
    }

    private final ServiceConnection connection = new ServiceConnection() {

        @Override
        public void onServiceConnected(ComponentName className, IBinder binder) 
        {
            Log.i("Bump", "onServiceConnected");

            api = IBumpAPI.Stub.asInterface(binder);

            try 
            {
                api.configure("KEY_HERE", "Some text..");
            }
            catch (RemoteException e) 
            {
                Log.i("Bump", "api.configured failed");
            }
        }

        @Override
        public void onServiceDisconnected(ComponentName className) 
        {
            Log.i("Bump", "onServiceDisconnected");
        }
    };

    private final BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            final String action = intent.getAction();
            try {
                if (action.equals(BumpAPIIntents.DATA_RECEIVED)) {
                    Log.i("Bump", "DATA_RECEIVED");

                    Log.i("Bump", "Received data from: " + api.userIDForChannelID(intent.getLongExtra("channelID", 0)));
                    Log.i("Bump", "Data: " + new String(intent.getByteArrayExtra("data")));

                    //AlertDialog.Builder diaBuilder=
                } else if (action.equals(BumpAPIIntents.MATCHED)) {
                    Log.i("Bump", "MATCHED");
                    api.confirm(intent.getLongExtra("proposedChannelID", 0), true);

                } else if (action.equals(BumpAPIIntents.CHANNEL_CONFIRMED)) {
                    Log.i("Bump", "CHANNEL_CONFIRMED");
                    api.send(intent.getLongExtra("channelID", 0), (StaticData.strUserId + ","+ StaticData.strHomeName + ","+ StaticData.strUserImgUrl).getBytes());

                } else if (action.equals(BumpAPIIntents.CONNECTED)) {
                    Log.i("Bump", "CONNECTED");
                    api.enableBumping();
                } 
                else if (action.equals(BumpAPIIntents.DISCONNECTED)) {
                    Log.i("Bump", "DISCONNECTED");  

                } else if (action.equals(BumpAPIIntents.BUMPED)) {
                    Log.i("Bump", "BUMPED");  
                }

                else if (action.equals(BumpAPIIntents.NOT_MATCHED)) {
                    Log.i("Bump", "NOT_MATCHED");  
                }

                else if (action.equals(BumpAPIIntents.CHANNEL_CONFIRMED_EXTRA_CHANNEL_ID)) {
                    Log.i("Bump", "CHANNEL_CONFIRMED_EXTRA_CHANNEL_ID");  
                }

                else if (action.equals(BumpAPIIntents.CHANNEL_CONFIRMED_EXTRA_CHANNEL_ID)) {
                    Log.i("Bump", "CHANNEL_CONFIRMED_EXTRA_CHANNEL_ID");  
                }
            } catch (RemoteException e) {}
        }
    }; 
```

我上面使用的工作演示是 docs.google.com/open?id=0B8f-N2PC8e0vU0gxRm1jaG51RGM

# antlr - Antlr 使用字母注释

> ID：15918386
> 
> 赞同：0
> 
> 时间：2013-04-10T06:19:24.570
> 
> 标签：antlr

我想忽略这条线

```
CHECKSUM="some string". 
```

我试过了

```
CHECK_COMMENT
    : 'CHECKSUM=' (options {greedy=false;}: .)*  {skip();}
    ; 
```

但这不起作用，尽管这适用于特殊字符。

```
CHECK_COMMENT
    : '========' (options {greedy=false;}: .)*  {skip();}
    ; 
```

我怎样才能让它像单行注释一样被忽略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:33:23.593

试试这个：

```
CHECK_COMMENT
    : 'CHECKSUM=' ~('\r' | '\n')* {skip();}
    ; 
```

where`~('\r' | '\n')*`匹配零个或多个字符而不是换行符。

或者，包括换行符：

```
CHECK_COMMENT
    : 'CHECKSUM=' ~('\r' | '\n')* LINE_BREAK {skip();}
    ;

fragment
LINE_BREAK
    : '\r'? '\n'
    | '\r'
    ; 
```

# c - 在c中复制文本文件的内容

> ID：15918392
> 
> 赞同：1
> 
> 时间：2013-04-10T06:19:42.260
> 
> 标签：c, file-io, standard-library

我想读取一个文本文件并将其内容传输到 c 中的另一个文本文件，这是我的代码：

```
 char buffer[100]; 

             FILE*  rfile=fopen ("myfile.txt","r+");
             if(rfile==NULL)
            {
              printf("couldn't open File...\n");
            }

            fseek(rfile, 0, SEEK_END);
            size_t file_size = ftell(rfile);
            printf("%d\n",file_size);
            fseek(rfile,0,SEEK_SET);
            fread(buffer,file_size,1,rfile);

            FILE* pFile = fopen ( "newfile.txt" , "w+" );
            fwrite (buffer , 1 ,sizeof(buffer) , pFile );
            fclose(rfile);
            fclose (pFile);
            return 0;
          } 
```

我面临的问题是接收文件中出现了不必要的数据，我尝试了带有“sizeof（buffer）”和“file_size”的fwrite函数，在第一种情况下，它在第二种情况无用字符的数量只有3个，如果有人指出我的错误并告诉我如何摆脱这些无用字符，我将不胜感激......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:23:03.227

您正在`buffer`接收文件中写入 (100 char) 的所有内容。您需要写入准确的读取数据量。

```
fwrite(buffer, 1, file_size, pFile) 
```

为您的代码添加更多检查：

```
#include <stdio.h>
#include <stdlib.h>

#define BUFFER_SIZE   100

int main(void) {
    char buffer[BUFFER_SIZE]; 
    size_t file_size;
    size_t ret;

    FILE* rfile = fopen("input.txt","r+");
    if(rfile==NULL)
    {
      printf("couldn't open File \n");
      return 0;
    }

    fseek(rfile, 0, SEEK_END);
    file_size = ftell(rfile);
    fseek(rfile,0,SEEK_SET);

    printf("File size: %d\n",file_size);

    if(!file_size) {
        printf("Warring! Empty input file!\n");
    } else if( file_size >= BUFFER_SIZE ){
        printf("Warring! File size greater than %d. File will be truncated!\n", BUFFER_SIZE);
        file_size = BUFFER_SIZE;
    }

    ret = fread(buffer, sizeof(char), file_size, rfile);
    if(file_size != ret) {
        printf("I/O error\n");
    } else {
        FILE* pFile = fopen ( "newfile.txt" , "w+" );
        if(!pFile) {
            printf("Can not create the destination file\n");
        } else {
            ret = fwrite (buffer , 1 ,file_size , pFile );
            if(ret != file_size) {
                printf("Writing error!");
            }
            fclose (pFile);
        }
    }
    fclose(rfile);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:21:48.347

您需要检查所有对`fseek()`,`fread()`和`fwrite()`, 甚至的调用的返回值`fclose()`。

在您的示例中，您已`fread()`读取 1 个 100 字节长的块。反转参数通常是一个更好的主意，如下所示 `ret = fread(buffer,1,file_size,rfile)`：然后该`ret`值将显示它可以读取多少字节，而不是仅仅说它无法读取完整的块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T16:04:25.190

这是（几乎）通用文件复制功能的实现：

```
void fcopy(FILE *f_src, FILE *f_dst)
{
    char            buffer[BUFSIZ];
    size_t          n;

    while ((n = fread(buffer, sizeof(char), sizeof(buffer), f_src)) > 0)
    {
        if (fwrite(buffer, sizeof(char), n, f_dst) != n)
            err_syserr("write failed\n");
    }
} 
```

给定一个`f_src`要读取的打开文件流和`f_dst`要写入的另一个打开文件流，它将关联的文件（其余部分）复制到关联`f_src`的文件中`f_dst`。它`BUFSIZ`使用`<stdio.h>`. 通常，您会发现更大的缓冲区（例如 4 KiB 或 4096 字节，甚至 64 KiB 或 65536 字节）将提供更好的性能。大于 64 KiB 很少会产生很多好处，但是 YMMV。

上面的代码调用了一个错误报告函数 ( `err_syserr()`)，假定它不会返回。这就是为什么我将其指定为“几乎通用”。该函数可以升级为返回一个`int`值，成功返回 0，失败返回 EOF：

```
enum { BUFFER_SIZE = 4096 };

int fcopy(FILE *f_src, FILE *f_dst)
{
    char            buffer[BUFFER_SIZE];
    size_t          n;

    while ((n = fread(buffer, sizeof(char), sizeof(buffer), f_src)) > 0)
    {
        if (fwrite(buffer, sizeof(char), n, f_dst) != n)
            return EOF;  // Optionally report write failure
    }
    if (ferror(f_src) || ferror(f_dst))
        return EOF;  // Optionally report I/O error detected
    return 0;
} 
```

请注意，此设计不会打开或关闭文件；它适用于打开的文件流。您可以编写一个包装器来打开文件并调用复制函数（或将复制代码包含到函数中）。另请注意，要更改缓冲区大小，我只是更改了缓冲区定义；我没有更改主要的复制代码。另请注意，调用这个小函数时的任何“函数调用开销”都完全被 I/O 操作本身的开销所淹没。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T06:30:34.440

注意`ftell`返回 a `long`，而不是 a `size_t`。不过在这里应该没关系。`ftell`不过，它本身不一定是字节偏移量。该标准只要求它是可接受的论据`fseek`。您可能会从 中获得更好的结果`fgetpos`，但由于缺乏标准规范，它具有相同的可移植性问题。（坦白：我没有检查标准本身；所有这些都是从联机帮助页中得到的。）

获得文件大小的更可靠的方法是使用`fstat`.

```
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd>

struct stat stat_buf;
if (fstat(filename, &buf) == -1)
    perror(filename), exit(EXIT_FAILURE);
file_size = statbuf.st_size; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T14:05:52.640

我认为您在 fwrite 中传递的参数顺序不正确。

对我来说应该是这样——

fwrite（缓冲区，大小，1，pFile）

因为 fwrite 的语法是 size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream);

函数 fwrite() 将 nmemb 数据元素（每个 size 字节长）写入 stream 指向的流，从 ptr 给定的位置获取它们。

所以改变顺序再试一次。

# powerbuilder - PowerBuilder Classic 12/12.5 指南/教程

> ID：15918399
> 
> 赞同：3
> 
> 时间：2013-04-10T06:20:11.763
> 
> 标签：powerbuilder

我是 PowerBuilder Classic 12 的新手，我很难找到任何可以帮助我入门的好的指南/教程。

现在我已经阅读了以下教程[http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc37772.1250/html/pbgs/CHDFGFBFA.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc37772.1250/html/pbgs/CHDFGFBFA.htm)

但它没有解释如何从头开始构建应用程序。它有一个向导，可以为您自动创建窗口、工作表、菜单等。

任何帮助/指南/教程表示赞赏。

提前致谢。

编辑：忘了提到我找到了很多 PB.NET 的东西，这不是我想要的。我正在寻找 PB Classic 学习资料。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:56:33.027

i 我有一位新同事，我必须向他提供一些学习材料。我给了他们以下内容，现在他成为了我身边的 PB 开发人员 :) 我希望这对你也有帮助：

[http://anvil-of-time.com/wordpress/category/powerbuilder/100-days-of-powerbuilder/](http://anvil-of-time.com/wordpress/category/powerbuilder/100-days-of-powerbuilder/)

[http://powerbuilder.hyderabad-colleges.com/powerbuilder.html](http://powerbuilder.hyderabad-colleges.com/powerbuilder.html)

*   对于初学者：从 PowerBuilder 7 简介开始，但您应该跳过前几课，因为它们已经过时，所以您可以从这里开始：PowerBuilder 环境
*   对于高级开发人员：Advanced PowerBuilder 7
*   绝地大师：掌握 PowerBuilder 7

入门电子书：从此处下载：http: [//infocenter.sybase.com/help/index.jsp](http://infocenter.sybase.com/help/index.jsp)

兄弟。加博尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T16:06:29.190

这里还有一些基本的 PowerBuilder 信息：[http ://www.woodger.ca/pb_strt.htm](http://www.woodger.ca/pb_strt.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T02:49:17.497

有[超过 100 个 PowerBuilder 培训、提示和参考文档链接](http://www.displacedguy.com/tech/powerbuilder-12-5-pb-net-free-training-and-tutorials/)的链接，其中大部分是 PB12 或 12.5 或更新版本，其中包含多年前 PB 版本的参考材料。该页面每年更新多次，并且已经制作了近四年。免责声明，这是我自己的 PowerBuilder 博客。

# c# - 对返回对象的函数进行单元测试（C# 和 Visual Studio）

> ID：15918401
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:20:12.933
> 
> 标签：c#, .net, unit-testing, testing

这是一个测试功能

```
public some_object test_function(some_object obj)
{} 
```

如果我用这个语句来测试这个函数

```
Assert.AreEqual(some_object, some_object.test_function(obj)); 
```

其中 obj 是 some_object 类型的对象。

现在我应该如何测试这个函数，因为如果我尝试在断言函数的期望值参数中使用类名，它会给出类函数此时无效的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:50:19.227

如果您试图找出相同类型的两个对象是否相等，您可能需要考虑覆盖 equals() 方法。如果您只是想找出返回的对象是某种类型，您可以执行以下操作：

```
public void IsObjTypeOfSome_objectTest()
{
    bool expected = true;
    bool actual = false;

    /* Assuming that test_function(obj) returns an object type of Some_object */
    if (test_function(obj) is Some_object)
    {
        actual = true;
    }

    Assert.AreEqual(expected, actual);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:34:47.763

```
Assert.AreEqual(some_object, some_object.test_function(obj)); 
```

`some_object`是一个类型名称

`some_object.test_function(obj)`ia 一个返回对象的静态方法

您不能将类型与实例进行比较。

您可以检查返回对象的类型以确保它是 some_object 类型，例如：

```
Assert.IsTrue(some_object.test_function(obj) is some_object); 
```

# html - 源文件视图中的信息不可见

> ID：15918402
> 
> 赞同：3
> 
> 时间：2013-04-10T06:20:13.903
> 
> 标签：html, ajax, extjs, inspect-element

我最近开始使用 Senchs extJS .. 当我们看到源文件时，它只显示所编写的代码，但应用的样式或稍后添加的任何脚本在“查看源代码”中不存在

AJAX 也是如此，当我们在任何容器中加载任何东西时，它都不存在......

但如果我们使用 Chrome 并检查元素，它会显示所有内容......

**为什么会有这种行为？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:33:19.573

在浏览器中查看源代码通常只显示下载的源代码*而不*运行任何东西（包括任何会修改 DOM 的 JS）。事实上，当您查看源代码以获取该代码时*，至少*Chrome 会创建一个*单独的请求。*

至于原因**，**我不确定。这只是标准，并且是“查看源代码”在我成为 Web 开发人员之前很长时间的工作方式。它类似于执行原始 HTTP 请求（即，您只需获取源；无需运行任何东西来更改它）。术语“来源”表示您收到的内容的来源，未经修改（想想“源代码”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:32:50.157

因为这就是它的工作原理。查看源代码仅在页面首次提供给浏览器时显示该页面。

# tomcat - 一个使用 Tomcat 的 Atmosphere 框架上的简单应用程序

> ID：15918406
> 
> 赞同：1
> 
> 时间：2013-04-10T06:20:21.840
> 
> 标签：tomcat, servlets, web.xml, atmosphere

我对气氛和java非常陌生。我正在尝试使用气氛框架创建一个简单的应用程序。

我创建了一个名为 ChatServlet 的 servlet，它实现了 Atmospheerhandler，如下所示：

```
 package org.atmosphere.sample;

import java.io.IOException;

import javax.servlet.annotation.WebServlet;

import org.atmosphere.config.service.AtmosphereHandlerService;
import org.atmosphere.cpr.AtmosphereHandler;
import org.atmosphere.cpr.AtmosphereRequest;
import org.atmosphere.cpr.AtmosphereResource;
import org.atmosphere.cpr.AtmosphereResourceEvent;
import org.atmosphere.cpr.AtmosphereResponse;

/**
 * Servlet implementation class ChatServlet
 */
@AtmosphereHandlerService(path="/chat")
public class ChatServlet implements AtmosphereHandler {
    @Override
    public void onRequest(AtmosphereResource r) throws IOException {
        // TODO Auto-generated method stub
        AtmosphereRequest req = r.getRequest();
        if(req.getMethod().equalsIgnoreCase("GET")){
            r.suspend();
        }
        else if (req.getMethod().equalsIgnoreCase("POST")){
            r.getBroadcaster().broadcast(req.getReader().readLine().trim());

        }
    }

    @Override
    public void onStateChange(AtmosphereResourceEvent event) throws IOException {
        // TODO Auto-generated method stub
        AtmosphereResource r=event.getResource();
        AtmosphereResponse res=r.getResponse();

        if(r.isSuspended()){

//           tring message=body.substring("From the server");
            res.getWriter().write("Server Says:Hi");
            switch(r.transport()){
            case JSONP:
            case LONG_POLLING:
                event.getResource().resume();
                break;
            case WEBSOCKET:
            case STREAMING:
                res.getWriter().flush();
                break;
            default:
                break;

            }
            }
        else if(!event.isResuming()){
            event.broadcaster().broadcast("Say bye bye");
        }
    }

    @Override
    public void destroy() {
        // TODO Auto-generated method stub

    }

} 
```

这是一个html文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Atmosphere Chat</title>
<script src="jquery-1.9.1.js"></script>
<script src="application.js"></script>
<script src="jquery.atmosphere.js"></script>
</head>

    <style>
        * {
            font-family: tahoma;
            font-size: 12px;
            padding: 0px;
            margin: 0px;
        }

        p {
            line-height: 18px;
        }

        div {
            width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        #content {
            padding: 5px;
            background: #ddd;
            border-radius: 5px;
            border: 1px solid #CCC;
            margin-top: 10px;
        }

        #header {
            padding: 5px;
            background: #f5deb3;
            border-radius: 5px;
            border: 1px solid #CCC;
            margin-top: 10px;
        }

        #input {
            border-radius: 2px;
            border: 1px solid #ccc;
            margin-top: 10px;
            padding: 5px;
            width: 400px;
        }

        #status {
            width: 88px;
            display: block;
            float: left;
            margin-top: 15px;
        }
    </style>
</head>
<body>
<div id="header"><h3>Atmosphere Chat. Default transport is WebSocket, fallback is long-polling</h3></div>
<div id="content"></div>
<div>
    <span id="status">Connecting...</span>
    <input type="text" id="input" disabled="disabled"/>
</div>
</body>
</html> 
```

这是我的 js 文件：

```
var socket=$.atmopshere;
debugger;
var request ={
                url:'http://localhost:8080/Reverse-Ajax/' + 'chat',
                 contentType : "application/json",
                 transport :'websocket',
                fallbackTransport:'long-polling'};

request.onOpen=function(response){
//  content.html($('<p>',{text:'Atmosphere connected uisng'+ response.transport}));
//  input.removeAttr('disabled').focus();
//  status.text('Choose name:');
    console.log("onopen",response);

};

request.onMessage=function (response){
    var message=response.responseBody;
    console.log(message);

}; 
```

下面显示的是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:j2ee="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2.5.xsd" version="2.5">
  <description>Atmosphere Chat</description>
  <display-name>Atmosphere Chat</display-name>
  <servlet>
    <description>AtmosphereServlet</description>
    <servlet-name>AtmosphereServlet</servlet-name>
    <servlet-class>org.atmosphere.cpr.AtmosphereServlet</servlet-class>
    <load-on-startup>0</load-on-startup>
    <async-supported>true</async-supported>
  </servlet>
  <servlet-mapping>
    <servlet-name>AtmosphereServlet</servlet-name>
    <url-pattern>/chat/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

我无法连接到服务器。有人可以建议我哪里出错了。我正在使用 tomcat 7 作为我的服务器。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-07-24T03:41:32.217

1.  错误：`var socket=$.atmopshere;`
    正确：`var socket=$.atmosphere;`

2.  `socket.subscribe(request);`：
    您没有调用连接到服务器。

# putty - “网络错误：连接被拒绝”，腻子错误

> ID：15918407
> 
> 赞同：3
> 
> 时间：2013-04-10T06:20:30.360
> 
> 标签：putty

我正在尝试`putty`在 Windows 7 上运行。

我需要运行一些 SSH 命令来升级 Magento。每次腻子都给我这个致命的错误：

> 网络错误：连接被拒绝

我什至尝试通过`winSCP`. 请注意，腻子在我的客户端运行良好，但对我来说，它每次都给我这个错误。

我尝试使用端口 22、23 和其他一些端口但没有成功。我也尝试过启用和禁用 Windows 防火墙。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-10T06:42:20.910

安装`open-ssh`或`ssh`在目标 Linux 机器上解决了我的问题。

**使用以下命令**：

```
sudo apt install ssh
sudo systemctl status ssh
sudo systemctl enable ssh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-03T08:03:24.970

以下是此错误的可能性列表：

1) 常见原因是 - 您的 IP 在服务器中被阻止或未列入白名单，这可以通过编辑 /etc/csf/csf.conf 中的文件来完成

2）禁用Windows防火墙设置并检查..

以上两件事应该在大多数情况下都有效

3）这是非常不寻常的，当上述两个选项失败时，很难找到解决方案

*   在这种情况下，到服务器主机或 IP 的跟踪路由通常可以工作，但 putty 失败
*   端口 22 看起来正常且工作，但连接失败并重新启动 SSH（服务 ssh 重新启动）也不起作用
*   重新启动或重新启动服务器但仍然失败
*   在防火墙中添加 IP 或将本地 IP 列入白名单可能无法锻炼

这种情况一般发生在服务器迁移或新服务器时。旧服务器的 IP 可能在本地被列入白名单，但没有打开端口 22，或者正在为这个新 IP 而不是旧服务器 IP 进行一些其他本地过滤。

在这种情况下，您需要将端口更改为 522 或 530，一些不寻常的端口将有助于对其进行分类。您还必须用于 SFTP 连接的同一端口......因为 FTP 连接正常工作......

或者，如果您想使用端口 22，则必须在本地将 IP 列入白名单或打开 TCP 进出端口 22。

# iphone - 来自笔尖的组件 UIView 之间的间距

> ID：15918415
> 
> 赞同：1
> 
> 时间：2013-04-10T06:20:49.120
> 
> 标签：iphone, ios

当我在 xib 上垂直放置两个**UIbutton**时**，**它们之间的间距加倍，当它显示在 Retina 4 英寸时如何使等间距？是否可以在不使用自动布局的情况下实现它？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:31:27.080

在你的xib中设置两个按钮的布局

.![在此处输入图像描述](https://i.stack.imgur.com/3FQSg.png)

如果你这样设置，两个按钮之间的间距将与 3.5 英寸屏幕（iPhone 4 及更早版本）相同。

如果您对此有任何疑问，请告诉我。**

# orchardcms - Orchard - 在管理员端隐藏“设置为主页”复选框

> ID：15918425
> 
> 赞同：2
> 
> 时间：2013-04-10T06:21:15.577
> 
> 标签：orchardcms

在 Orchard 中添加新内容时是否可以以某种方式隐藏“设置为主页”复选框（不删除 Autoroute 部分）？

谢谢，

雅库布

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T10:25:58.447

自动路由公开权限“设置主页”。您可以为不想显示复选框的用户角色撤销此权限。

# sql-server - 使用联合在存储过程中进行多项选择 - Noob

> ID：15918435
> 
> 赞同：1
> 
> 时间：2013-04-10T06:22:02.380
> 
> 标签：sql-server, stored-procedures, reporting-services, union

我一直在寻找答案，但发现自己更加困惑。我没有那么有经验 - 但员工人数很少 - 只有我创建报告 - 我必须创建这个。

客户要求提供一份报告，该报告将返回存储在 2 个数据库中的调查问题的 MTD 答案。问题是 - 他们想要附加到每个提交的答案的记录，而不是调查的一部分。即每个受访者都有关于他们拥有的电话类型、居住地区、电话型号和服务天数的信息。（虽然这些不是答案）

其中许多是独一无二的。（模型和城市）

例如，我在 SQL 中创建了一个存储过程来拉入 SSRS 以显示结果。

但每一个都是一个选择，我只得到第一个结果。我尝试添加`UNION ALL`，但是当我这样做时，它似乎并没有让我将它们分组。我将所有内容放在一列中，而我需要将它们放在单独的列中-理想情况下是水平的。但这可能要求太多了。

这是一个示例-也许有更快的方法-这是一个巨大的项目-我的截止日期现在快要到了-我已经尝试了很多东西-并且正在搜索。除了寻求帮助，别无他法。

所以这就是我所拥有的 -

```
ALTER PROCEDURE [dbo].[TEST_WIRELESS_DISCO_SURVEY_RESULTS]
(
   @STARTDATE DATETIME,
   @ENDDATE DATETIME
)
AS
BEGIN
   SELECT 
       a.CUSTOM17 as 'Make', COUNT(ISNULL(A.custom17, 0)) as 'Total Make'
   FROM GCI_SURVEYS as a
   JOIN GCI_Post_Survey_PreRepair_Master as b ON a.CustAcctNo = b.CustAcctNo
   WHERE b.Trans_Date between @STARTDATE and @ENDDATE
     AND a.i3_rowid = 'GCI_WRLSDISC_BSV'
     AND a.Q01 = 'no'
   GROUP BY  CUSTOM17

   UNION ALL

   SELECT 
       a.CUSTOM22 as 'Market', COUNT(ISNULL(a.CUSTOM22, 0)) as 'Total Market'
   FROM GCI_SURVEYS  as a
   JOIN GCI_Post_Survey_PreRepair_Master as b ON a.CustAcctNo = b.CustAcctNo
   WHERE b.Trans_Date between @STARTDATE  and @ENDDATE
     AND a.i3_rowid = 'GCI_WRLSDISC_BSV'
     AND a.Q01 = 'no'
   GROUP BY  a.CUSTOM22 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:32:41.663

In the **Question** you stated that you are fetching data from two **Database**

***return MTD answers on survey questions that are stored in 2 databases***

In you **SP** you are Selecting from the same the **DB**

Just add the **Database** Name in one of your `Select Query`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:38:22.427

根据您的解释，我认为工会的顶部和底部包含相同的调查，只是不同的部分？

我个人会将它们加载到变量表（或者如果有很多记录，临时表）中，然后将它们连接在一起。

```
DECLARE @MakeQuestion TABLE
(
  survery_id INT --datatype
 ,make       VARCHAR(200) --replace with your own
 ,total_make INT
)

INSERT INTO @MakeQuestion
SELECT a.join_condition, a.CUSTOM17 as 'Make',COUNT(ISNULL(A.custom17,0)) as 'Total Make'
FROM GCI_SURVEYS as a
JOIN GCI_Post_Survey_PreRepair_Master as b
ON a.CustAcctNo = b.CustAcctNo
WHERE b.Trans_Date between @STARTDATE and @ENDDATE
AND a.i3_rowid = 'GCI_WRLSDISC_BSV'
AND a.Q01 = 'no'
GROUP BY  a.join_condition,CUSTOM17

DECLARE @MarketQuestion TABLE
(
  survery_id  INT -- datatype
 ,market        VARCHAR(200) --replace with your own
 ,total_market INT
)

Insert INTO @MarketQuestion
SELECT  a.join_condition, a.CUSTOM22 as 'Market',COUNT(ISNULL(a.CUSTOM22,0)) as 'Total Market'
FROM GCI_SURVEYS  as a
JOIN GCI_Post_Survey_PreRepair_Master as b
ON a.CustAcctNo = b.CustAcctNo
WHERE b.Trans_Date between @STARTDATE  and @ENDDATE
AND a.i3_rowid = 'GCI_WRLSDISC_BSV'
AND a.Q01 = 'no'
GROUP BY  a.CUSTOM22

SELECT *
FROM @MakeQuestion Make
INNER JOIN @MarketQuestion Market ON Make.survey_id = Market.survery_id 
```

如果我误解了，请告诉我。

# bash - 为 EC2 实例安装“UserData”脚本的 RVM 部分

> ID：15918439
> 
> 赞同：1
> 
> 时间：2013-04-10T06:22:20.413
> 
> 标签：bash, ubuntu, amazon-ec2, rvm

我已经对这个 Userdata 脚本进行了 Base64 编码，以便在初始化 EC2 实例时运行，但由于某种原因，它没有安装 RVM。我认为这与用户问题有关，但我不确定。

我使用的是 12.10 默认的 Ubuntu AMI。

```
#!/bin/bash 
export LC_ALL=en_US.UTF-8
sudo apt-get --yes update
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10
deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen
sudo apt-get --yes --fix-missing install mongodb language-pack-en ruby-full build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion pkg-config tcptrack
\curl -L https://get.rvm.io | bash -s stable
source ~/.rvm/scripts/rvm
source ~/.profile
rvm autolibs 3
rvm requirements
#source ~/.profile
rvm install 2.0.0-p0
rvm --default use 2.0.0
gem update --system
gem i mechanize peach mongo rails aws-sdk bson_ext httparty 
```

# android - 为导入的 JAR 生成真正唯一的 ID

> ID：15918441
> 
> 赞同：0
> 
> 时间：2013-04-10T06:22:27.320
> 
> 标签：android, resources, libraries, buildpath

在未能将 Android 项目用作库后（[如果需要详细信息，请参阅此内容](https://stackoverflow.com/questions/15884417/step-by-step-tic-tac-toe-android-sample-failure)）我导出了项目的 JAR 文件并（创建并）添加到“libs”文件夹中。我还将 JAR 文件添加到项目的构建路径中。

但我得到了这个运行时错误：

```
04-09 00:40:40.209: E/AndroidRuntime(20499): FATAL EXCEPTION: main
04-09 00:40:40.209: E/AndroidRuntime(20499): java.lang.RuntimeException: Unable to
start activity ComponentInfo{com.example.android.tictactoe/com.example.android.tictactoe.library.GameActivity}:
java.lang.ClassCastException: android.widget.Button cannot be cast
to com.example.android.tictactoe.library.GameView 
```

快速检查后发现，我带到 libs 的 JAR 库已经定义了与主项目中的资源 ID 相同的资源 ID。因此，Button（在 TicTacToeMain 中）和 GameView（在 TicTactToeLib 中）获得了相同的 ID 号。

解决方案，有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:06:30.313

我找到的唯一解决方案是让该库作为 Android 项目库工作（`is library`在项目的属性中标记）

一旦将库项目添加到目标项目（再次通过项目的属性）并应用它，库的 R 类就会重新编号并添加到目标项目中。

话虽如此，在使用 Eclipse 时，我花了一些时间让 Referenced Library 项目被接受。经过几次（多次）尝试以及完全删除和重新创建库项目后，当我按下应用时，库引用被“接受”并且一切正常。
如果你想阅读更多关于我让图书馆被“接受”的考验的详细信息，请[在这篇文章中](https://stackoverflow.com/questions/15884417/step-by-step-tic-tac-toe-android-sample-failure)阅读全部内容。

# jquery - 进度条应显示在屏幕上，直到网页完全加载

> ID：15918444
> 
> 赞同：2
> 
> 时间：2013-04-10T06:22:47.630
> 
> 标签：jquery, load, progress-bar, page-load-time

我正在使用波纹管代码来显示进度条。

```
jQuery('#container').showLoading(
{
      'afterShow':
       function () 
       {
          setTimeout("jQuery('#container').hideLoading()", 1000);
       }
}); 
```

进度条在屏幕上显示直到`1000`毫秒，然后消失。但我希望屏幕上显示进度条直到 `(time) = page load`. 静态意味着我需要 1000 毫秒，但我希望进度条显示那么多时间.. 页面需要时间来加载。

那么如何获取页面加载时间并将其传递到这里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T14:22:32.417

我们需要做的是首先显示进度指示器，然后在页面完全加载时隐藏它。当 DOM 准备好时，我们可以通过将 load 事件绑定到 window 对象来做到这一点。

**请注意：**在这么小的页面上，您可能不会注意到加载程序，因为它会发生得太快。

```
jQuery(document).ready(function() {

  showHideLoading(); // load this func as soon as the doc is ready

});

function showHideLoading() {

  // We'll be referencing #loader more than once so let's cache it
  var loader = jQuery("#loader");

  // now we'll show the #loader
  loader.show();

  // We'll set up a new event so that when everything on the page
  // has finished loading, we hide our #loader
  jQuery(window).on("load", function() {
    loader.fadeOut(500);
  });
}
```

```
body {
  margin: 0;
  }
img {
  max-width: 100%;
  /*this is only here to make the page load a little more slowly */
}
#loader {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);

}
#loader div {
  width: 150px;
  height: 80px;
  margin: -40px 0 0 -75px;
  background: #fff;
    position: absolute;
  top: 50%;
  left: 50%;
  text-align: center;
  border-radius: 50%;
  line-height: 80px;
  }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<!-- this is only here to make the page load a little more slowly -->
<img src="http://lorempixel.com/image_output/cats-q-c-1920-1080-8.jpg" />

<div id="loader">

  <div>Loading</div>

</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:40:15.517

您不会获得页面加载时间，但是您可以绑定到`window.onload`事件以隐藏进度条。`window.onload`仅当页面完全加载时才会触发事件。

```
 window.onload = function() {
            jQuery('#container').hideLoading();
        }; 
```

# ios - NSTimer 响应 uibutton

> ID：15918445
> 
> 赞同：2
> 
> 时间：2013-04-10T06:22:49.340
> 
> 标签：ios, objective-c, cocoa-touch, nstimer

所以，这就是问题所在。我正在尝试为我的游戏制作一个计时器，但它似乎没有运行。

我首先为 nstimer 创建一个属性：

```
@property (nonatomic) NSTimer gameTimer; 
```

并合成它：

```
@synthesize gameTimer = _gameTimer; 
```

然后我用这个方法来设置它：

```
-(NSTimer *) gameTimer{
    if (_gameTimer == nil) _gameTimer = [[NSTimer alloc]init];
    return _gameTimer;
} 
```

但是，当我尝试通过 uibutton 启动计时器时：

```
- (IBAction)play:(UIButton *)sender {

    _levelNumber = 1;
    _en1v = -1;
    _en2v = 1;
    _en3v = -1;
    [self setPath];
    _gameTimer = [NSTimer timerWithTimeInterval:1.0 target:self     selector:@selector(onTimer:) userInfo:nil repeats:YES];
    self.play.hidden = TRUE;
} 
```

它不起作用。

我在 onTimer: 方法中放入了一个 nslog，发现计时器没有触发一些怎么办？

我犯了一个明显的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:25:29.413

您根本没有启动计时器。

采用：

```
_gameTimer =  [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(onTimer:) userInfo:nil repeats:YES]; 
```

而在停止时，（可能在`stop:`方法中）

```
[_gameTimer invalidate];
_gameTimer = nil; 
```

# php - 在标记上单击关闭信息气泡

> ID：15918446
> 
> 赞同：3
> 
> 时间：2013-04-10T06:22:55.410
> 
> 标签：php, jquery, google-maps, jquery-gmap3, infobubble

我正在使用`Gmap3`带有插件和 php 的 jQuery 插件`infobubble`来获取 json 响应以添加标记。

我已经使用插件`addMarkers`选项添加了 GoogleMap 标记。`Gmap3`

```
{
    action: 'addMarkers',
    markers:address_data,
    marker:
    {
        options:
        {
            draggable: false,
            icon: HOST+'img/icons/google_marker.png',
            animation: google.maps.Animation.DROP
        },
        events:
        {
            click: function(marker, event, data)
            {
                var map = $(this).gmap3('get');

                infoBubble = new InfoBubble({
                    maxWidth: 310,
                    shadowStyle: 1,
                    padding: 5,
                    borderRadius: 10,
                    arrowSize: 20,
                    borderWidth: 5,
                    borderColor: '#CCC',
                    disableAutoPan: true,
                    hideCloseButton: false,
                    arrowPosition: 50,
                    arrowStyle: 0
                });

                if (!infoBubble.isOpen())
                {
                    infoBubble.setContent(data);
                    infoBubble.open(map, marker);
                    console.log('open');
                }
                else
                {
                    infoBubble.close();
                }

            }
        }
    }
} 
```

第一次尝试时一切正常，但是当我点击标记时，信息气泡不断弹出。

意味着如果我有一个标记和一些要在气泡中显示的内容，那么当我继续单击相同的标记时，信息气泡会在另一个标记上添加一个，但是我需要“**如果再次单击标记或单击其他标记，我需要关闭旧的信息气泡**”就像正常一样信息窗口剂量。

希望我能说清楚一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:38:45.730

在处理程序外部声明`infoBubble`为 var `click`，并在那里实例化它。

然后检查`infoBubble.isOpen()`将是相关的。

从您提供的代码中，您`infoBubble`在每次单击时创建一个新对象，因此`infoBubble.isOpen()`检查适用于该新创建的对象。

**怎么做**

声明`var infobubble;`为全局变量。

并在 click 事件处理程序中添加下面的行来执行此操作。

```
if( infoBubble != null ) { infoBubble.close(); } 
```

所以代码如下所示，

```
var infobubble;
//other code for getting markers and all and then `addMarkers` code
{
    action: 'addMarkers',
    markers:address_data,
    marker:
    {
        options:
        {
            draggable: false,
            icon: HOST+'img/icons/google_marker.png',
            animation: google.maps.Animation.DROP
        },
        events:
        {
            click: function(marker, event, data)
            {
                var map = $(this).gmap3('get');

                if( infoBubble != null ) { infoBubble.close(); }

                infoBubble = new InfoBubble({
                    maxWidth: 310,
                    shadowStyle: 1,
                    padding: 5,
                    borderRadius: 10,
                    arrowSize: 20,
                    borderWidth: 5,
                    borderColor: '#CCC',
                    disableAutoPan: true,
                    hideCloseButton: false,
                    arrowPosition: 50,
                    arrowStyle: 0
                });

                infoBubble.setContent(data);
                infoBubble.open(map, marker);
            }
        }
    }
} 
```

# c# - 分发 dll：如何处理 .lib 文件？

> ID：15918450
> 
> 赞同：2
> 
> 时间：2013-04-10T06:23:03.507
> 
> 标签：c#, visual-studio-2010, dll, linker

我`dll`在 Visual Studio 中使用 C# 创建了一个。它的依赖项中有六个`.lib`文件。

通过阅读此处的其他一些问题，我收集到`.lib`文件是在运行时链接的，这让我认为这些文件不包含在`.dll`我制作的文件中。

那我该如何分发`dll`文件呢？我是否必须将`.lib`文件与文件一起发送`.dll`，或者有什么方法可以静态编译它，以便所有内容都包含在一个`.dll`文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:48:48.967

要查看哪些文件应该与 DLL 一起分发，您可以使用[Dependency Walker](http://www.dependencywalker.com/)。只需将您的 DLL 文件拖到应用程序中，看看它是否有任何依赖项。

另请注意，您可能需要分发 Visual C++ 运行时（“Visual C++ Redistributable Package”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:53:47.293

对于 C#，您不需要包含任何 .lib 文件。它们由 C/C++ 编译器在链接步骤中使用，但 C# 使用 DLL**而不**链接（动态加载和`GetProcAddress`）与`[DLLImport()]`属性。

只需将 DLL 与您的应用程序一起分发就可以了。

# javascript - 如何更改滚动条的颜色

> ID：15918451
> 
> 赞同：5
> 
> 时间：2013-04-10T06:23:04.167
> 
> 标签：javascript, jquery, css, jscrollpane

我有更改滚动条颜色的任务。为此，我使用了 jscrollpane。这样做只会更改浏览器滚动。我也想更改下拉列表的颜色。我该怎么做？html是

```
 <div class='columnLeft'>
       <div class="labels w110">
            <label>Country</label>
       </div>
       <div class="controls hello" id="hello">
            @Html.DropDownList("ddlReCountry", null, new { @onchange = "onReBindCountry()", @class = "dropdown w325" })
       </div>
  </div> 
```

javascript是

```
 $(function () {
            $('.hello ').jScrollPane();
            $('#hello').bind(
            'jsp-scroll-y',
        function (event, scrollPositionY, isAtTop, isAtBottom) {
            console.log('#pane1 Handle jsp-scroll-y', this,
                        'scrollPositionY=', scrollPositionY,
                        'isAtTop=', isAtTop,
                        'isAtBottom=', isAtBottom);
        });
 }); 
```

CSS是

```
.jspTrack {
    background: lightgray !important;
}

.jspDrag {
    background: gray !important;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:28:14.750

我不确定你是否可以。但是您可以使用单击按钮后打开的文本框、按钮和 div 构建自己的下拉列表。通过这种方式，您可以自定义下拉菜单中的所有内容，甚至下拉菜单的内容，您可以在网上搜索有很多此类方法的示例，您可以使用其中一个

# ios - 如何从带有 alpha 的精灵中绘制自动 poligon 形状？对于 box2d 工具

> ID：15918452
> 
> 赞同：0
> 
> 时间：2013-04-10T06:23:06.290
> 
> 标签：ios, cocos2d-iphone, box2d, osx-mountain-lion

我已经开始了一个新项目，这将有助于从头开始创建游戏，只需几行代码。我不会在这里做广告，因为这不是那种网站，但我会问几个问题。

因此，该工具将接管有助于制作游戏的大多数应用程序，它将是一个应用程序来控制所有应用程序（或者，它可能仅与 cocos2d 和 box2d 一起运行）。

所以，首先我需要使工具能够为图像绘制多边形形状（为 box2d 创建主体），这必须完成（正如您已经想到的那样）而不选择 alpha 通道。

我可以尝试将每个像素保存在 2 个数组上，然后检查像素通道，如果它们包含 alpha <= 0.3，则像素将被忽略，然后如果 alpha >= 0.3，则将像素存储在数组中，然后稍后在我检查了所有像素之后，我将创建具有顶点的形状，这些顶点位于形状边缘的那些像素中（需要另一个循环来检查边缘像素）。

**问题**：这是一个好方法吗？还是有其他更好的方法？

我希望该工具非常轻巧，具有高性能，就像每个苹果软件一样，这就是我问的原因，因为如果我要制作这个工具，那么我想让它变得更好！感谢阅读，希望有人能给我一个好的答案。

# php - 编写一个不停刷新html内容的php socket

> ID：15918456
> 
> 赞同：0
> 
> 时间：2013-04-10T06:23:20.027
> 
> 标签：php, sockets

我真的很想尝试使用 php 套接字，但不幸的是我还没有做到这一点。但是，我想构建一个服务器端，它将从数据库中选择一些东西，然后将 html 写入用户页面，而无需用户做任何事情，只需将信息弹出在他面前。

这可能吗 ？

我尝试了不同的演示，但我不明白为什么我的套接字只能在端口 80 上工作，我应该更改端口，以及如何做到这一点？

如果有人有一个非常简单和简短的服务器代码和要发布的 html，那么我应该能够完成其余的基本工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:27:36.617

php 脚本无法修改已发送到浏览器的 html。但是您可以使用 ajax 请求数据。

想学习使用 php 进行套接字编程吗？见[PHP 套接字](http://www.codeproject.com/Tips/418814/Socket-Programming-in-PHP)教程

# opengl - 在 GPU 上优化数据可视化？

> ID：15918462
> 
> 赞同：0
> 
> 时间：2013-04-10T06:23:51.463
> 
> 标签：opengl, graphics, 3d

我有一个过程随着时间的推移积累大部分静态数据——其中很多，数百万个数据元素。数据的一小部分可能偶尔会发生变化，但大多数情况下不会发生变化。

但是，我希望允许用户自由更改查看这些数据的方式，包括形状和颜色。

有没有一种方法可以将数据作为数据存储在 GPU 上。然后有多种方法可以将该数据转换为可在 GPU 上渲染的数据。然后，用户可以在这些算法之间进行选择，我们可以有效地交换它，而无需接触数据。此外，颜色 id 将在数据中，但用户可以再次更改每个 id 应匹配的颜色，而无需触摸数据。

因此，例如，也许有以下数据：

[1000, 602, 1, 1] [1003, 602.5, 2, 2]

注意：数据不是顶点，而是可能需要一些计算或查找才能转换为顶点。

用户可以在可视化算法之间进行选择。假设在 (0, 602, 0) 和 (3, 602.5, 100) 处分别显示 2 个立方体。用户选择颜色 id 1 = blue 和 2 = green。所以原点立方体显示为蓝色，另一个显示为绿色。

然后完全不修改数据，用户选择不同的可视化，现在球体显示在 (10, 602, 10) 和 (13, 602.5, 20) 并且颜色不同，因为用户更改了颜色映射.

另一个可视化可能会显示所有数据元素之间的线条，或每组 4 个的矩形等。

上面的描述是否可以直接完成？怎么做最好？

请注意，我们将添加很多新数据，并附加到末尾。每秒可能爆发数千次。对现有数据的修改将更加罕见，并且在这些情况下对性能造成影响是可以接受的。用户更改算法和颜色映射相对较少。

我更喜欢使用跨平台 API（跨操作系统和 GPU）来做到这一点，所以我假设使用 OpenGL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:35:51.543

您可以将数据存储在 VBO（在 GPU 内存中）并在它更改时更新它。

在 GPU 方面，您可以使用几何着色器来生成更多几何。不知道如何从线切换到立方体再到球体，但如果您在每个位置绘制一个三角形，您的 GS 可以输出“额外”三角形（线和点同上）。

至于颜色更改功能，您可以将该逻辑烘焙到顶点着色器中。idx(1, 2, ...) 应该是一个顶点属性；让 VS 查找提供 idx -> 颜色映射的表（这可以存储为小纹理）。您可以更新纹理以动态更改颜色映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:10:42.903

对于像您这样的应用程序，有特殊的 GPGPU 编程基础设施：CUDA 和 OpenCL。OpenCL 是跨供应商系统。CUDA 是跨平台的，但仅支持 NVidia GPU。OpenGL 也确实在 OpenGL-4.2（计算着色器）中引入了通用计算功能。

> 还有很多，数以百万计的数据元素

数百万不是很多，即使单个元素消耗 100 个字节，也只有 100 MiB 可以传输。现代 GPU 可以从/向主机系统内存传输大约 10 GiB/s。

> 上面的描述是否可以直接完成？怎么做最好？

是的，它可以做到。但是，只有当您可以并行化您的问题并使其内存访问模式迎合 GPU 的偏好时，您才会真正看到性能。特别是糟糕的内存访问模式会导致几个数量级的性能损失。

# rich-snippets - 为 Google 汇总评级的丰富网页摘要

> ID：15918463
> 
> 赞同：1
> 
> 时间：2013-04-10T06:23:56.573
> 
> 标签：rich-snippets

[呜呜呜呜呜](http://www.vroomvroomvroom.com.au/)

在上面的链接中，您可以看到类似：**评分：4.5/5 基于 10 票的 5 条评论。**

阅读规范后，我知道综合评分至少需要 1 个 RatingCount 或 ReviewCount。但是，我的问题是：我可以展示类似的内容吗：**评分：4.5/5 基于 10 条评论。**这里 10 是 RatingCount，但我使用的是评论关键字。我问这个是因为我不希望该网站受到谷歌的惩罚。此外，我将始终以滚动方式显示最新的 5-10 条评论。仅供参考：我正在使用 Rich-snippets 的微数据样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T04:52:30.320

经过一些研究并与 SEO 人员交谈后，我发现可以根据需要更改文本。只有元标记应该是正确的。

# python - 使用 Python/Django 翻译网页

> ID：15918464
> 
> 赞同：1
> 
> 时间：2013-04-10T06:23:57.403
> 
> 标签：python, django, translation

假设我有一个网页，我想将它翻译成另一种语言。

一种方法是解析 DOM，找出需要翻译的字符串（如标题），使用 Google Translate API 之类的东西，然后显示结果。

但是，向 Google 发送 http 请求会使应用程序变慢。有没有更好的方法来做到这一点，尤其是通过 python 本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:32:03.530

您可以在本地安装机器翻译系统，然后使用它来翻译字符串。[一个免费可用的系统是http://www.statmt.org/moses/](http://www.statmt.org/moses/)上的 Moses 。

请注意，该系统需要训练数据和训练步骤。

# javascript - 将参数从后面的代码传递给 javascript 方法

> ID：15918465
> 
> 赞同：2
> 
> 时间：2013-04-10T06:23:57.093
> 
> 标签：javascript, asp.net

我有一个检查以下条件的javascript方法

```
method(selection1,selection2)
{
    if(selection1=="yes")
    {
    //Do something
    }
    if(selection2=="yes")
    {
    //Do something
    }
} 
```

现在我像这样从后面的代码中传递参数

```
ClientScript.RegisterStartupScript(GetType(), "id", "method('" + selection1 + "," + "'" + selection2 + "')", true); 
```

这里的选择是一个字符串变量

```
string selection1="Yes" 
```

但是所需的功能无法正常工作。我知道 javascript 是正确的，因为当我使用硬编码参数时，javascript 就会运行。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:44:10.113

这样称呼它：

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "MyScript", javascript:method('"+selection1+"','"+selection2+"')", true); 
```

这将调用函数并发送参数，只要确定字符串中使用的大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:27:41.877

您的代码缺少`'`第一个字符串参数的结束引号。像这样使用

```
"method('" + selection1 + "', '" + selection2 + "')" 
```

为了比较成功，字符串必须完全相等。`selection1`价值应该是`"yes"`条件成功

# c++ - 如何解析具有以下格式的字符串中的数据：1 Gt 500.85？

> ID：15918468
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:24:05.573
> 
> 标签：c++, string, file-io, fstream

我有大约 100 行文本。每行具有以下格式：`1 Gt 1.003`将`Gt`更改，长度为 1 到 3 个字符。如何解析这一行并将 存储`Gt`为字符串、存储`1.003`为双精度并丢弃`1`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:32:04.177

很正常的东西。

```
ifstream file(...);
string line;
while (getline(file, line)
{
    istringstream buf(line);
    int dummy;
    string tag;
    double val;
    buf >> dummy >> tag >> val;
} 
```

`tag`将是“Gt”，`val`将是 1.003

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:32:34.823

```
using namespace std;
int discardInt;
string strInput;
double dblInput;

vector<string> strings;
vector<double> doubles;

ifstream infile("filename.txt"); //open your file

while(infile >> discard >> strInput >> dblInput) {
  //now discard stores the value 1, which you don't use;
  //strInput stores Gt or other 1-3 character long string;
  //dblInput stores the double

 //operations to store the values that are now in strInput and dblInput
 //for example, to push the values into a vector:
   strings.push_back(strInput);
   doubles.push_back(dblInput);

}

infile.close(); 
```

# java - 如何使用 apache.commons.configuration 更改 .properties 文件

> ID：15918469
> 
> 赞同：0
> 
> 时间：2013-04-10T06:24:09.920
> 
> 标签：java, apache-commons-config

我有一个应用程序，我根据一些规则（现有的一些关键字或正则表达式）过滤消息。这些规则将存储在 .properties 文件中（因为它们必须是持久的）。我已经弄清楚如何从这个文件中读取数据。这是代码的一部分：

```
public class Config {

    private static final Config ourInstance = new Config();
    private static final CompositeConfiguration prop = new CompositeConfiguration();

    public static Config getInstance() {
        return ourInstance;
    }

    public Config(){
    }

    public synchronized void load() {
        try {
            prop.addConfiguration(new SystemConfiguration());

            System.out.println("Loading /rules.properties");
            final PropertiesConfiguration p = new PropertiesConfiguration();
            p.setPath("/home/mikhail/bzrrep/DLP/DLPServer/src/main/resources/rules.properties");
            p.load();
            prop.addConfiguration(p);

        } catch (ConfigurationException e) {
            e.printStackTrace();
        }

        final int processors = prop.getInt("server.processors", 1);

        // If you don't see this line - likely config name is wrong
        System.out.println("Using processors:" + processors);
    }

    public void setKeyword(String customerId, String keyword){            
    }    
    public void setRegexp(String customerId, String regexp)
    {}
} 
```

如您所见，我将为某些属性添加值。这是 .properties 文件本身：

```
users = admin, root, guest
users.admin.keywords = admin
users.admin.regexps = test-5, test-7

users.root.keywords = root
users.root.regexps = *

users.guest.keywords = guest
users.guest.regexps = 
```

我有一个 GUI 供用户向此配置添加关键字和正则表达式。那么，如何实现 setKeyword 和 setRegexp 方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T13:27:13.557

我发现最简单的方法是将属性的当前值读取到 String[]，添加一个新值并设置属性。 `props.setProperty(fieldName, values);`

# ios - 单击 UITableViewCell 时如何导航 UIWebView？

> ID：15918470
> 
> 赞同：-3
> 
> 时间：2013-04-10T06:24:15.283
> 
> 标签：ios, objective-c, uitableview, uiwebview

我在 中加载数据（Google、Yahoo、Facebook）`UITableView`，当我单击（Google）时，它应该使用 重定向到 Gmail 页面`UIWebView`。

我写`didSelectRowAtIndexPath`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:29:25.117

创建一个包含 WebView 的视图控制器，然后在 TableViewController`didSelectRowAtIndexPath`方法中添加此代码。

```
- (void)tableView:(UITableView *)atableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
WebViewController *WebViewController = [[TrackViewController alloc] initWithNibName:@"WebViewController" bundle:nil];

//And do here code for passing URL to  WebViewController   

[self presentModalViewController:webViewController animated:NO];

} 
```

如果您使用的是导航控制器

```
- (void)tableView:(UITableView *)atableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
    WebViewController *WebViewController = [[TrackViewController alloc] initWithNibName:@"WebViewController" bundle:nil];

    //And do here code for passing URL to  WebViewController   

     [self.navigationController pushViewController:aTrackViewController  animated:NO];

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:27:28.263

使用导航控制器，在 didSelectRowAtIndexpath 方法上加载具有特定 url 的 webview 获取和传递从表中选择的 url

# java - Java，从方法返回值

> ID：15918475
> 
> 赞同：3
> 
> 时间：2013-04-10T06:24:46.480
> 
> 标签：java, methods, return, return-value

我在这里做了一段简单的java代码，它是一种将华氏温度转换为摄氏温度的方法。但是，当我运行它时，输出始终是`0.0`.

我无法让它输出正确的计算。我可能忘记做一些愚蠢的小事，有人可以帮助我吗？

```
public class ExampleQ {

    public static void main(String[] args) {

        System.out.println(Celsius(50));
    }

    public static double Celsius(double F)
    {
        return (5 / 9) * (F - 32);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T06:25:49.460

错误是[整数除法](https://stackoverflow.com/questions/3144610/java-integer-division-how-do-you-produce-a-double)。

在 Java 中`5 / 9 = 0`

尝试：

```
return (5.0 / 9) * (F - 32); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T06:31:30.127

***(5/9)*** 产生一个整数除法，结果为“0”。结果，它为整个表达式生成 0。尝试

```
return (5.0 / 9) * (F - 32); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-10T06:35:38.160

这是解决方案。**在在线编译器 Ideone [http://ideone.com/zRyG80测试](http://ideone.com/zRyG80)**

只需替换`return (5 / 9) * (F - 32);`为`return (F - 32) * 5 / 9;`

**因为原因是运算符执行的顺序。在您的代码中，在乘法之前执行除法，这使得 5/9 = 0。**

```
class Main {
    public static void main(String[] args) throws java.lang.Exception {

        System.out.println(Celsius(50));
    }

    public static double Celsius(double F) {
        return (F - 32) * 5 / 9;
    }
} 
```

输出

10.0

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-10T06:27:17.733

`5 / 9`返回 0，因为您正在执行**整数**除法。

`5.0 / 9.0`改为使用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-10T06:28:38.140

(5/9) 被解释为整数并四舍五入为 0.0。

为避免整数，您可以将其替换为 (5.0/9)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-10T06:28:53.363

或者你可以使用下面的代码

```
return (5d / 9d) * (F - 32); 
```

# iphone - 如何在 UITableView 中激活下一个和上一个 UITextField？

> ID：15918479
> 
> 赞同：0
> 
> 时间：2013-04-10T06:25:19.937
> 
> 标签：iphone, ipad, ios6, uitableview, uitextfield

我在我的应用程序中使用[这个](https://stackoverflow.com/questions/409259/having-a-uitextfield-in-a-uitableviewcell)来将 UITextFields 添加到我的 UITableViewCells，现在我不知道如何通过使用键盘工具栏中的下一个按钮让用户跳转到下一个项目，这是我的代码

```
 IBOutlet UITextField *contNo,*breed,*coat,*color,*birthdate;
 IBOutlet UIToolbar *toolBar;
 IBOutlet UIBarButtonItem *barButton;
 NSArray *fieldsArray;

 fieldsArray = [[NSArray alloc] initWithObjects:birthdate,contNo, breed,homeAddress, coat,color, nil];

-(IBAction)next
 { 
 for (int i=0; i<[fieldsArray count]; i++)
 { if ([[fieldsArray objectAtIndex:i] isEditing] && i!=[fieldsArray count]-1)
   {
         [[fieldsArray objectAtIndex:i+1] becomeFirstResponder];
      if (i+1==[fieldsArray count]-1)
        {
            [barButton setTitle:@"Done"];
            [barButton setStyle:UIBarButtonItemStyleDone];
        }else
        {
            [barButton setTitle:@"Done"];
            [barButton setStyle:UIBarButtonItemStyleBordered];
        }
        break;
            }
    }
 }

-(IBAction) previous
{
for (int i=0; i<[fieldsArray count]; i++)
 {
   if ([[fieldsArray objectAtIndex:i] isEditing] && i!=0)
    {
        [[fieldsArray objectAtIndex:i-1] becomeFirstResponder];
        [barButton setTitle:@"Done"];
        [barButton setStyle:UIBarButtonItemStyleBordered];
        break;
    }
  }
 } 

-(void)textFieldDidBeginEditing:(UITextField *)textField 
{
[textField setInputAccessoryView:toolBar];
for (int i=0; i<[fieldsArray count]; i++)
{
    if ([fieldsArray objectAtIndex:i]==textField)
    {
        if (i==[fieldsArray count]-1)
        {
            [barButton setStyle:UIBarButtonItemStyleDone];
        }
    }
  }
 } 
```

当我尝试使用 tabelview 外部的文本字段时，下一个和上一个工作正常。下一个和上一个不能与 tabelview 内的内部 uitextfield 一起工作。任何人都可以帮我整理一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T21:45:36.287

这是一篇旧帖子，但页面排名很高，所以我会加入我的解决方案。

我遇到了类似的问题，最终创建了一个子类`UIToolbar`来管理动态 tableView 中的下一个/上一个/完成的功能，其中包含以下部分：[https ://github.com/jday001/DataEntryToolbar](https://github.com/jday001/DataEntryToolbar)

您将工具栏设置为`inputAccessoryView`文本字段并将它们添加到其字典中。这使您可以前后循环浏览它们，即使是动态内容。如果您想在 textField 导航发生时触发自己的功能，则可以使用委托方法，但您不必处理管理任何标签或第一响应者状态。

GitHub 链接上有代码片段和示例应用程序，可帮助您了解实现细节。您将需要自己的数据模型来跟踪字段内的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:31:01.373

在表格视图单元格的内容视图中添加文本字段。将标签设置为 cellforrowatindexpath 中的文本字段，以便标签随着添加而增加。标签的形式可以是“3+indexpath.row”

在文本开始编辑找到当前文本字段的标签，保存标签。在接下来的增量标签中，使用标签查找文本字段并使其成为第一响应者。

或试试这个链接[How to activate next UITextField in a UITableView?](https://stackoverflow.com/questions/5196837/how-to-activate-next-uitextfield-in-a-uitableview) Fabiano Francesconi 提供了很好的答案 [http://blog.encomiabile.it/2013/02/08/how-to-activate-next-uitextfield-in-uitableview-ios/](http://blog.encomiabile.it/2013/02/08/how-to-activate-next-uitextfield-in-uitableview-ios/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:26:25.653

```
#pragma mark - UITextField Delegate

- (BOOL)textFieldShouldReturn:(UITextField *)textField 
{
    HRCFormCell * currentCell = (HRCFormCell *) textField.superview.superview;
    NSIndexPath * currentIndexPath = [self.tableview indexPathForCell:currentCell];

    if (currentIndexPath.row != [self.questionsArray count] - 1) {

        NSIndexPath * nextIndexPath = [NSIndexPath indexPathForRow:currentIndexPath.row + 1 inSection:0];
        HRCFormCell * nextCell = (HRCFormCell *) [self.tableview cellForRowAtIndexPath:nextIndexPath];

        [self.tableview scrollToRowAtIndexPath:nextIndexPath atScrollPosition:UITableViewScrollPositionMiddle animated:YES]; 

        [nextCell.textField becomeFirstResponder];
    }

    return YES;
} 
```

请尝试以下代码可能对您有所帮助。

# c# - 从 iframe 内部读取查询字符串参数

> ID：15918480
> 
> 赞同：2
> 
> 时间：2013-04-10T06:25:19.927
> 
> 标签：c#, asp.net-mvc, iframe, query-string

我有一个 Web 应用程序，它位于另一个 Web 应用程序的 iframe 中（两者都在 ASP.NET MVC 中完成）。

是否可以使用 C# 从 iframe 内的应用程序读取来自父 Web 应用程序的查询字符串参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:45:36.560

您必须将要从 iframe 中的页面从父页面读取的任何数据附加到 iframe url 本身。例如：

```
<iframe id="yourid" src="yourpage.aspx?parentdata=whatever_data_to_be_captured">
</iframe> 
```

现在，您必须从 iframe 页面解析 src 值以捕获数据。

这是一个技巧，据我所知，似乎没有直接的方法可以从 iframe 访问父页面数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:29:17.650

[window.parent](https://developer.mozilla.org/en-US/docs/DOM/window.parent)应该为您提供对 Parent 的引用。还有一个[window.top](https://developer.mozilla.org/en/docs/DOM/window.top)提供直接父级，因此如果您的应用程序嵌套多次，您应该使用正确的属性。

从那里您可以执行`window.parent.location`（或`window.top.location`）具有请求的 URL 的各种属性的操作。

要实际阅读查询字符串，这里有关于此的帖子。您只需要将 window.location 替换为 window.parent 或 window.top ：

在此处查看答案：[如何通过 javascript 获取查询字符串？](https://stackoverflow.com/questions/2907482/how-to-get-the-query-string-by-javascript)以及更详细的答案：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

* * *

**在控制器中**：既然你说你需要控制器中的查询字符串。您仍然需要像我上面描述的那样获取查询字符串，然后通过将其放入对`src`内部框架的调用中，将其传递给控制器​​。

```
<iframe src=""></iframe> 
```

这完全取决于您如何以及何时设置`src`内部框架的属性。你需要在某个时候以某种方式改变它。

从你的外框你可以做：

```
document.getElementById('myframe').src
 = "http://innerApplication/innerController/actionmethod/?" 
   + window.location.search; 
```

或者，从框架本身内部，您将首先获取查询字符串，然后通过执行重定向/重新加载`window.[top/parent].location = the url + query string`

然后您将读取查询字符串，就好像它是内部应用程序的查询字符串一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T09:30:56.447

您应该使用`%26`而不是`&`发送到 iframe，例如：

```
Link : 2.asp?ppp=/Payam.asp?sid=1%26PID=1&sa=12313 <br> 
```

在代码中：当我`requset.queryString("ppp")`在父母中时，它显示：`/Payam.asp?sid=1&PID=1`

您可以将其用作 iframe 的来源，它有两个参数：

```
<IFRAME name="My"  src='<%=ppp %>'></IFRAME> 
```

# ruby - REXML 和编码

> ID：15918484
> 
> 赞同：0
> 
> 时间：2013-04-10T06:25:37.943
> 
> 标签：ruby, encoding, utf-8, rexml

谁能帮我解释一下这个结果？

```
#!/usr/bin/env ruby
# encoding: utf-8

require 'rexml/document'

doc = REXML::Document.new(DATA)
puts "doc: #{doc.encoding}"
REXML::XPath.each(doc, '//item') do |item|
  puts "  #{item}: #{item.to_s.encoding}"
end

__END__
<doc>
  <item>Test</item>
  <item>Über</item>
  <item>8</item>
</doc> 
```

输出：

```
doc: UTF-8
  <item>Test</item>: US-ASCII
  <item>Über</item>: UTF-8
  <item>8</item>: US-ASCII 
```

似乎 REXML 并不关心文档编码是什么，而是开始自动检测每个项目的编码......我是否注定要从`encode('UTF-8')`REXML 中提取每个字符串，即使 UTF-8 是原始编码？这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:07:46.900

您正在调用[Node.to_s()](https://github.com/ruby/ruby/blob/trunk/lib/rexml/node.rb#L26)上的`Element`. 要获取实际文本，请添加`Element.get_text()`到您的链（并调用`Text.to_s()`它）：

```
puts "  #{item}: #{item.get_text.to_s.encoding}" 
```

输出：

```
doc: UTF-8
  <item>Test</item>: UTF-8
  <item>Über</item>: UTF-8
  <item>8</item>: UTF-8 
```

# xml - Web 服务传输 (XML) 示例

> ID：15918485
> 
> 赞同：0
> 
> 时间：2013-04-10T06:25:38.163
> 
> 标签：xml, web-services, rest

我正在研究通过 XML 进行的 WS-Transfer。我一直在寻找用于 WS-Transfer 的不同 XML 实现，但我找不到太多关于它的信息。是否有 Web 服务使用的 XML 模板的概述？这可能是 OWL-S、DAML+OIL 等。

# winapi - 如何解决exe安装程序在wix中不是有效的win32应用程序的错误？

> ID：15918486
> 
> 赞同：0
> 
> 时间：2013-04-10T06:25:40.003
> 
> 标签：winapi, wix

使用 wix v3.8 生成的 exe 安装程序未安装在 windows xp 系统上。该错误显示 exe 安装程序不是有效的 win32 应用程序。我怎么解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:50:59.920

这是 WiX 工具集构建过程中的一个错误，该`vs110_xp`平台未用于构建在 VS2012 的 XP 上正确运行的可执行文件。该错误已在 WiX v3.8.326.0 或更高版本中修复。

# javascript - javascript通过#url返回

> ID：15918487
> 
> 赞同：0
> 
> 时间：2013-04-10T06:25:42.243
> 
> 标签：javascript, html, dom, back, browser-history

我正在测试一种包含简单 javascript 的方法来切换不同的内容，而不是链接到其他页面。但是问题是如果我这样做，浏览器实际上会呈现所有“页面”，但只显示它的部分内容。因此它没有历史，只有不同的 url。我试过用`goback(-1)`不行。没试过`document.referrer`。那么问题是有没有一种方法可以存储历史并将其添加到浏览器中？我检查了历史是只读的，但只有当我可以在其上存储历史时，我才能在 html 中创建返回按钮。这是javascript部分：

```
function showHome(){
document.getElementById('content1').style.visibility="visible";
document.getElementById('content2').style.visibility="hidden";
document.getElementById('content3').style.visibility="hidden";
document.getElementById('content4').style.visibility="hidden";
document.getElementById('content5').style.visibility="hidden";
document.getElementById('content6').style.visibility="hidden";
}
function showAbout(){
document.getElementById('content1').style.visibility="hidden";
document.getElementById('content2').style.visibility="visible";
document.getElementById('content3').style.visibility="hidden";
document.getElementById('content4').style.visibility="hidden";
document.getElementById('content5').style.visibility="hidden";
document.getElementById('content6').style.visibility="hidden";
}
function showService(){
document.getElementById('content1').style.visibility="hidden";
document.getElementById('content2').style.visibility="hidden";
document.getElementById('content3').style.visibility="visible";
document.getElementById('content4').style.visibility="hidden";
document.getElementById('content5').style.visibility="hidden";
document.getElementById('content6').style.visibility="hidden";
}
function showProjects(){
document.getElementById('content1').style.visibility="hidden";
document.getElementById('content2').style.visibility="hidden";
document.getElementById('content3').style.visibility="hidden";
document.getElementById('content4').style.visibility="visible";
document.getElementById('content5').style.visibility="hidden";
document.getElementById('content6').style.visibility="hidden";
}
function showClient(){
document.getElementById('content1').style.visibility="hidden";
document.getElementById('content2').style.visibility="hidden";
document.getElementById('content3').style.visibility="hidden";
document.getElementById('content4').style.visibility="hidden";
document.getElementById('content5').style.visibility="visible";
document.getElementById('content6').style.visibility="hidden";
}
function showContact(){
document.getElementById('content1').style.visibility="hidden";
document.getElementById('content2').style.visibility="hidden";
document.getElementById('content3').style.visibility="hidden";
document.getElementById('content4').style.visibility="hidden";
document.getElementById('content5').style.visibility="hidden";
document.getElementById('content6').style.visibility="visible";
} 
```

这是我的导航：

```
<ul id="nav" class="grey,menu">
<li><a id="Contact" href="#Contact" onclick="showContact()" class="descriptionContact">Contact<span>Contact description</span></a></li>
<li><a id="Client" href="#Client" onclick="showClient()" class="descriptionClient">Client<span>Client description</span></a></li>
<li><a id="Projects" href="#Projects" onclick="showProjects()" class="descriptionProjects">Projects<span>Project description</span></a></li>
<li><a id="Service" href="#Service" onclick="showService()" class="descriptionService">Service<span>Service description</span></a></li>
<li><a id="About" href="#About" onclick="showAbout()" class="descriptionAbout">About<span>description</span></a></li>
<li><a id="Home" href="#Home#" onclick="showHome()" class="descritionHome">Home<span>Return to main page, all update news are here</span></a></li> 
```

页：

```
<div class="content" id="content2"><div id="contenter">page2</div></div>
<div class="content" id="content3"><div id="contenter">page3</div></div>
<div class="content" id="content4"><div id="contenter">page4</div></div>
<div class="content" id="content5"><div id="contenter">page5</div></div>
<div class="content" id="content6"><div id="contenter">page6</div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:34:19.973

稍微了解一下评论的细节：

1.  历史数组：

    > var history_array = [];
    > 函数显示（idx）{
    > 隐藏（）；
    > 内容[idx].style.visibility = '可见';
    > historyArray[] = idx;
    > }

然后，您可以调用`show(historyArray[historyArray.length-1]);`返回按钮。您还需要使用删除数组的最后一个索引`historyArray.splice(historyArray.length-1, 1);`。

因此，您在 Go-back 按钮上的脚本应该如下所示： Go Back 您可能想要决定历史的最大大小，如果达到，则拼接数组的第一个元素，但这取决于您。

1.  解释 elclanrs 代码，因为我已经在上面的示例中使用了它：

首先，他将“content”类的每个元素放入数组“content”中。他使用每个页面的标识符调用 show()。在 show() 中，他首先调用 hide()。hide() 迭代“内容”类的每个元素，并将这些元素的可见性设置为“隐藏”。之后 show() 使用标识符 (int) 作为数组“内容”的索引，并将该元素设置为“可见”。

这有点像：“隐藏所有内容并显示我刚刚单击的第 n 个元素”

**编辑：**由于后续的评论太长了：

在脚本标签的顶部添加以下函数：

> ```
> onload=function(){
>   if (document.getElementsByClassName == undefined) {
>       document.getElementsByClassName = function(className)
>       {
>           var hasClassName = new RegExp("(?:^|\\s)" + className + "(?:$|\\s)");
>           var allElements = document.getElementsByTagName("*");
>           var results = [];
> 
>           var element;
>           for (var i = 0; (element = allElements[i]) != null; i++) {
>               var elementClass = element.className;
>               if (elementClass && elementClass.indexOf(className) != -1 && hasClassName.test(elementClass))
>                   results.push(element);
>           }
> 
>           return results;
>       }
>   }
>   show(0); 
> ```
> 
> }

然后替换：`var content = document.querySelectorAll('.content');`

和：`var content = document.getElementsByClassName('content');`

然后从 -tag 中删除 onload-event。

它仍然会引发 content[idx] 未定义的初始错误，但它可以工作，我无法当场摆脱那个错误，首要任务是提供功能修复 - 该错误可能是由加载顺序引起的.

# windows-ce - 用于开发移动应用程序的 Win CE 上的英特尔 TBB？

> ID：15918490
> 
> 赞同：0
> 
> 时间：2013-04-10T06:25:49.863
> 
> 标签：windows-ce, tbb

我想知道我们是否可以使用 INTEL TBB 在 Window CE 上开发移动应用程序。我正在寻找材料，但找不到任何东西。基本上有两件事我想知道 Window CE 是否支持 INTEL TBB。以及 TBB 是否适合开发移动应用程序。请帮忙 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:06:01.023

英特尔(R) 线程构建块不支持 Windows CE。是的，TBB 支持开发移动应用程序。英特尔® 线程构建模块（英特尔® TBB，threadingbuildingblocks.org）用于实现并行性；并行计算引擎可以轻松移植到其他移动或桌面平台。

# r - 在ggplot R中绘制累积功能区

> ID：15918492
> 
> 赞同：1
> 
> 时间：2013-04-10T06:25:56.643
> 
> 标签：r, plot, ggplot2

我想创建一个带有显示累积值的阴影带的条形图：

```
require(ggplot2)
plot_data = data.frame(period=factor(c("t_1", "t_5_to_t_2", "t_8_to_t_2", "t_11_to_t_2", "t_14_to_t_2"), levels=c("t_1", "t_5_to_t_2", "t_8_to_t_2", "t_11_to_t_2", "t_14_to_t_2")), vals = 1:5, ribbon_vals = cumsum(1:5))
ggplot(data=plot_data, aes(x=period, y=vals)) + 
geom_bar(stat="identity", colour=c("#6495ED", "#2E8B57", "#2E8B57", "#2E8B57", "#2E8B57")) + 
scale_x_discrete(labels = c('t_1' = expression(t-1), 't_5_to_t_2' = expression(t-5 %->% t-2), 't_8_to_t_2' = expression(t-8 %->% t-2), 't_11_to_t_2' = expression(t-11 %->% t-2), 't_14_to_t_2' = expression(t-14 %->% t-2))) +
geom_ribbon(aes(x=1:5, y=ribbon_vals)) 
```

这似乎不起作用。正确的使用方法是`geom_ribbon`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:31:49.467

因为`geom_ribbon()`你应该提供`ymin`和`ymax`价值观。`ymin`在这种情况下是 0 并且`ymax`是`ribbon_vals`。`geom_ribbon()`线应该放在前面`geom_bar()`。用于`fill=`代替`color=`in`geom_bar()`更改整个条的颜色（不仅仅是边框）。

```
ggplot(data=plot_data, aes(x=period, y=vals)) + 
  scale_x_discrete(labels = c('t_1' = expression(t-1), 't_5_to_t_2' = expression(t-5 %->% t-2), 't_8_to_t_2' = expression(t-8 %->% t-2), 't_11_to_t_2' = expression(t-11 %->% t-2), 't_14_to_t_2' = expression(t-14 %->% t-2))) +
  geom_ribbon(aes(x=1:5, ymin=0,ymax=ribbon_vals))+
  geom_bar(stat="identity",fill=c("#6495ED", "#2E8B57", "#2E8B57", "#2E8B57", "#2E8B57")) 
```

![在此处输入图像描述](https://i.stack.imgur.com/LwsS8.png)

# visual-c++ - 使用单个模板匹配多个对象

> ID：15918495
> 
> 赞同：2
> 
> 时间：2013-04-10T06:26:09.133
> 
> 标签：visual-c++, opencv, image-processing

如何使用单个模板匹配多个对象？我正在尝试使用树的中心作为模板来匹配多棵香蕉树。我的程序只匹配我希望匹配空中图像中香蕉树的所有出现的一个出现。

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include <iostream>
#include <stdio.h>

using namespace std;
using namespace cv;

/// Global Variables
Mat img; Mat templ; Mat result;
const char* image_window = "Source Image";
const char* result_window = "Result window";

int match_method;
int max_Trackbar = 5;

/// Function Headers
void MatchingMethod( int, void* );

/**
 * @function main
 */
int main( int, char** argv )
{
  /// Load image and template
  img = imread( argv[1], 1 );
  templ = imread( argv[2], 1 );

  /// Create windows
  namedWindow( image_window, WINDOW_AUTOSIZE );
  namedWindow( result_window, WINDOW_AUTOSIZE );

  /// Create Trackbar
  const char* trackbar_label = "Method: \n 0: SQDIFF \n 1: SQDIFF NORMED \n 2: TM CCORR \n 3: TM CCORR NORMED \n 4: TM COEFF \n 5: TM COEFF NORMED";
  createTrackbar( trackbar_label, image_window, &match_method, max_Trackbar, MatchingMethod );

  MatchingMethod( 0, 0 );

  waitKey(0);
  return 0;
}

/**
 * @function MatchingMethod
 * @brief Trackbar callback
 */
void MatchingMethod( int, void* )
{
  /// Source image to display
  Mat img_display;
  img.copyTo( img_display );

  /// Create the result matrix
  int result_cols =  img.cols - templ.cols + 1;
  int result_rows = img.rows - templ.rows + 1;

  result.create( result_cols, result_rows, CV_32FC1 );

  /// Do the Matching and Normalize
  matchTemplate( img, templ, result, match_method );
  normalize( result, result, 0, 1, NORM_MINMAX, -1, Mat() );

  /// Localizing the best match with minMaxLoc
  double minVal; double maxVal; Point minLoc; Point maxLoc;
  Point matchLoc;

  minMaxLoc( result, &minVal, &maxVal, &minLoc, &maxLoc, Mat() );

  /// For SQDIFF and SQDIFF_NORMED, the best matches are lower values. For all the other methods, the higher the better
  if( match_method  == TM_SQDIFF || match_method == TM_SQDIFF_NORMED )
    { matchLoc = minLoc; }
  else
    { matchLoc = maxLoc; }

  /// Show me what you got
  rectangle( img_display, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );
  rectangle( result, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );

  imshow( image_window, img_display );
  imshow( result_window, result );

  return;
} 
```

`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-21T16:13:37.760

在 Saikat（和 Bartlett）的代码中，使用如下行

`result.at<float>(minLoc.x,minLoc.y)=1.0;`

并且在类似的行中具有下一个缺点：代码掩盖了唯一的极值像素，并且下一个循环可能会找到相同的对象，将一个像素移到一边。我建议用模板大小的矩形来掩盖结果。此代码可以控制相邻对象的重叠程度。

```
void matchingMethod(Mat& img,  const Mat& templ,  int     match_method)
{
    /// Source image to display
    Mat img_display; Mat result;
   if(img.channels()==3)
        cvtColor(img, img, cv::COLOR_BGR2GRAY);
    img.copyTo( img_display );//for later show off

    /// Create the result matrix - shows template responces
    int result_cols = img.cols - templ.cols + 1;
    int result_rows = img.rows - templ.rows + 1;
    result.create( result_cols, result_rows, CV_32FC1 );

    /// Do the Matching and Normalize
    matchTemplate( img, templ, result, match_method );
    normalize( result, result, 0, 1, NORM_MINMAX, -1, Mat() );

    /// Localizing the best match with minMaxLoc
    double minVal; double maxVal; 
    Point minLoc; Point maxLoc;
    Point matchLoc;

    //in my variant we create general initially positive mask 
    Mat general_mask=Mat::ones(result.rows,result.cols,CV_8UC1);

    for(int k=0;k<5;++k)// look for N=5 objects
    {
        minMaxLoc( result, &minVal, &maxVal, &minLoc, &maxLoc, general_mask); 
        //just to visually observe centering I stay this part of code:
        result.at<float>(minLoc ) =1.0;//
        result.at<float>(maxLoc ) =0.0;//

        // For SQDIFF and SQDIFF_NORMED, the best matches are lower values. 
         //For all the other methods, the higher the better
        if( match_method  == CV_TM_SQDIFF || match_method ==     CV_TM_SQDIFF_NORMED )
            matchLoc = minLoc;
        else
            matchLoc = maxLoc;
                                //koeffitient to control neiboring:
        //k_overlapping=1.- two neiboring selections can overlap half-body of     template
        //k_overlapping=2.- no overlapping,only border touching possible
        //k_overlapping>2.- distancing
        //0.< k_overlapping <1.-  selections can overlap more then half 
        float k_overlapping=1.7f;//little overlapping is good for my task

        //create template size for masking objects, which have been found,
        //to be excluded in the next loop run
        int template_w= ceil(k_overlapping*templ.cols);
        int template_h= ceil(k_overlapping*templ.rows);
        int x=matchLoc.x-template_w/2;
        int y=matchLoc.y-template_h/2;

        //shrink template-mask size to avoid boundary violation
        if(y<0) y=0;
        if(x<0) x=0;
        //will template come beyond the mask?:if yes-cut off margin; 
        if(template_w + x  > general_mask.cols) 
            template_w= general_mask.cols-x;
        if(template_h + y  > general_mask.rows) 
            template_h= general_mask.rows-y;

                               //set the negative mask to prevent repeating
        Mat template_mask=Mat::zeros(template_h,template_w, CV_8UC1);
        template_mask.copyTo(general_mask(cv::Rect(x, y, template_w, template_h)));

        /// Show me what you got on main image and on result (
        rectangle( img_display,matchLoc , Point( matchLoc.x + templ.cols ,    matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );
        //small correction here-size of "result" is smaller
        rectangle( result,Point(matchLoc.x- templ.cols/2,matchLoc.y-     templ.rows/2) , Point( matchLoc.x + templ.cols/2 , matchLoc.y + templ.rows/2 ),     Scalar::all(0), 2, 8, 0 );
    }//for k= 0--5 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:20:12.970

对于 CV_SQDIFF 和 CV_SQDIFF_NORMED 方法，最佳匹配是最低值。因此，要检测多个对象，请选择最低的 N 个值并显示它们，其中 N 是您要显示的对象的数量。

对于所有其他方法，较高的值表示更好的匹配。所以在这种情况下，选择最高 N 个值。

N 必须很小，否则你会得到错误的输出。

要检测 5 个对象，请按如下方式更改匹配方法

```
void MatchingMethod( int, void* )
{
  /// Source image to display
  Mat img_display;
  img.copyTo( img_display );

  /// Create the result matrix
  int result_cols =  img.cols - templ.cols + 1;
  int result_rows = img.rows - templ.rows + 1;

  result.create( result_cols, result_rows, CV_32FC1 );

  /// Do the Matching and Normalize
  matchTemplate( img, templ, result, match_method );
  normalize( result, result, 0, 1, NORM_MINMAX, -1, Mat() );

  /// Localizing the best match with minMaxLoc
  Point minLoc; Point maxLoc;
  Point matchLoc;
  double minVal; double maxVal;

  for(int k=1;k<=5;k++)
  {
    minMaxLoc( result, &minVal, &maxVal, &minLoc, &maxLoc, Mat() );
    result.at<float>(minLoc.x,minLoc.y)=1.0;
    result.at<float>(maxLoc.x,maxLoc.y)=0.0;

  /// For SQDIFF and SQDIFF_NORMED, the best matches are lower values. For all the other methods, the higher the better
  if( match_method  == CV_TM_SQDIFF || match_method == CV_TM_SQDIFF_NORMED )
    { matchLoc = minLoc; }
  else
    { matchLoc = maxLoc; }

  /// Show me what you got
  rectangle( img_display, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );
  rectangle( result, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );
  }
  imshow( image_window, img_display );
  imshow( result_window, result );

  return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:11:41.340

手动搜索垫子结果的最小值或最大值 - 使用使用的方法更改 - 如果匹配 vaule 获取坐标

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-19T07:47:50.077

小错误，在下面更正......（它说最低匹配的位）

```
void MatchingMethod( int, void* )
{
      /// Source image to display
      Mat img_display;
      img.copyTo( img_display );

      /// Create the result matrix
      int result_cols =  img.cols - templ.cols + 1;
      int result_rows = img.rows - templ.rows + 1;

      result.create( result_cols, result_rows, CV_32FC1 );

      /// Do the Matching and Normalize
      matchTemplate( img, templ, result, match_method );
      normalize( result, result, 0, 1, NORM_MINMAX, -1, Mat() );

      /// Localizing the best match with minMaxLoc
      Point minLoc; Point maxLoc;
      Point matchLoc;
      double minVal; double maxVal;

      for(int k=1;k<=5;k++)
      {
        minMaxLoc( result, &minVal, &maxVal, &minLoc, &maxLoc, Mat() );

        // Lowest matches
        if( match_method  == CV_TM_SQDIFF || match_method == CV_TM_SQDIFF_NORMED )
        {
            result.at<float>(minLoc.x,minLoc.y)=1.0;
            result.at<float>(maxLoc.x,maxLoc.y)=1.0;
        }
        else
        {
            result.at<float>(minLoc.x,minLoc.y)=0.0;
            result.at<float>(maxLoc.x,maxLoc.y)=0.0;
        }

      /// For SQDIFF and SQDIFF_NORMED, the best matches are lower values. For all the other methods, the higher the better
      if( match_method  == CV_TM_SQDIFF || match_method == CV_TM_SQDIFF_NORMED )
        { matchLoc = minLoc; }
      else
        { matchLoc = maxLoc; }

      /// Show me what you got
      rectangle( img_display, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );
      rectangle( result, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );
      }
      imshow( image_window, img_display );
      imshow( result_window, result );

      return;
    } 
```

# php - “GeomFromText”不存储在数据库中

> ID：15918497
> 
> 赞同：0
> 
> 时间：2013-04-10T06:26:16.103
> 
> 标签：php, mysql

我尝试将数据保存到 CI 中的表中

喜欢：

$geomatchinfo = 数组 (

```
[Latitude] => 45.8556528
[Longitude] => 22.9565858
[Geom] => GeomFromText('Point(45.855653 22.956586)')
[Radius] => 15.0
[Mode] => white
[Name] => dsad
[Description] => asd
[Formatted] => asdasd, Deva, Romania
[Address] => a:5:{s:7:"address";s:6:"asdasd";s:5:"route";s:6:"asdasd";s:4:"city";s:4:"Deva";s:5:"state";s:9:"Hunedoara";s:7:"country";s:7:"Romania";} 
```

)

Geomatch::create($geomatchinfo);

但它给了我错误

**致命错误**：未捕获的异常 'ActiveRecord\DatabaseException' 带有消息 '22003, 1416，无法从您发送到 D:\xampp\htdocs\tr-fresh\sparks\php-activerecord\0.0 中的 GEOMETRY 字段的数据中获取几何对象。 2\供应商\php-activerecord\lib\Connection.php:312

我有数据库字段名称“Geom”数据类型“几何”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:54:27.433

如果您有兴趣在 CI 的插入查询中使用函数，则需要单独使用 set 方法进行插入

`GeomFromText('Point(45.855653 22.956586)')`

您必须在 CI 的 set 方法中将第三个参数作为 false 传递。像这样。

```
$this->db->set("Geom", "GeomFromText('Point(45.855653 22.956586)')", FALSE); 
```

也许它可以为你提供充分的帮助。

# clojure - 为什么过滤器卡在 nrepl 中？

> ID：15918500
> 
> 赞同：0
> 
> 时间：2013-04-10T06:26:39.457
> 
> 标签：clojure, nrepl

![在此处输入图像描述](https://i.stack.imgur.com/WhDG2.png)

为什么最后一个表达式永远卡在 nrepl 中（我想它永远不会停止）。我必须 Ctrl+c Ctrl+c 才能停止它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:11:43.473

因为您正在尝试评估无限序列（通过将其打印到 REPL）。

eg 的结果`(filter #(> % 100) (iterate #(+ % 17) 0))`可以打印到 REPL，因为 REPL 将打印`x`结果序列的第一个元素，然后是`...`，其中`x`是您可以设置的值`(set! *print-length* x)`。

但是尝试评估`(filter #(< % 100) (iterate #(+ % 17) 0))`将永远运行，因为只有 6 个可能的元素。

* * *

看看[`*print-length*`](http://clojuredocs.org/clojure_core/clojure.core/%2aprint-length%2a)文档：

```
;; Oops! Don't this!!!
user=> (iterate inc 0)
;; Frantically doing C-c C-c :-P
; Evaluation aborted.

user=> (set! *print-length* 10)
10

;; Now it's perfectly fine. Yay!
user=> (iterate inc 0)
(0 1 2 3 4 5 6 7 8 9 ...) 
```

* * *

您可能想要使用[`take-while`](http://clojuredocs.org/clojure_core/clojure.core/take-while)而不是`filter`，因为您创建的序列`iterate`已经排序。

```
user=> (take-while #(< % 100) (iterate #(+ % 17) 0))
(0 17 34 51 68 85) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:09:24.477

如上面的表达式 response 打印的序列不是完整的结果（检查序列末尾的 ...），这表明 nrepl 在返回序列的响应时从序列中`take`特定数量的项目并打印它们a ... 表示序列中还有更多。在您的最后一种情况下，“少于 100 个数字”不会产生 nrepl 打印所需的最小项目数，因此 nrepl 继续等待序列中的更多项目（这是一个无限序列，因为迭代）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T20:57:01.980

您的序列中只有 3 个小于 100 的数字。但是，由于它是“无限”的，`filter`因此必须查看“无限”个元素以确定第四个元素不存在。

由于您的示例`iterate`构造会生成一个递增序列，因此`take-while`如果要将结果限制为小于 100 的元素，则可以使用。例如：

```
(take-while #(< % 100) (iterate #(+ % 17) 0)) 
```

# clojure - 如何解构函数参数？

> ID：15918502
> 
> 赞同：1
> 
> 时间：2013-04-10T06:26:51.653
> 
> 标签：clojure

`(map (fn [x y] (do-work x y)) {:a 1 :b 2})`将不起作用，因为`map`期望一个具有一个参数的函数。我必须在`(map (fn [x] (let [[p q] x] (do-work p q))) {:a 1 :b 2})`哪里`let`解构键值对。有没有办法让`fn`论点解构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:30:27.377

`(fn [[x y]] ...)`它应该工作。

# visual-studio-2012 - Visual Studio 2012 更新 2 显示 Windows 应用认证工具包警告

> ID：15918520
> 
> 赞同：0
> 
> 时间：2013-04-10T06:27:36.040
> 
> 标签：visual-studio-2012, installation

我已经安装了 Visual Studio 2012 Update 2 离线模式，因为我一直在内部网络上工作。

我用参数'/layout'制作了离线包。但是有了这个包，我在完成安装时收到了一条警告消息，比如“Windows App Certification Kit blah blah ...”。

这个警告有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:43:34.760

我有同样的问题。[请参阅http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/45e91b4e-71c5-4fad-8626-00c37c2b5e02](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/45e91b4e-71c5-4fad-8626-00c37c2b5e02)中的 SteveHall 的回答

# iphone - 为按钮添加数组对象

> ID：15918526
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:27:52.703
> 
> 标签：iphone

我有两个数组 vowels 和 alphabetImages 包含图像并放置随机图像，

```
while ([randomset count]<2)
{
    [randomset addObject:[vowels objectAtIndex:rand()%5]];
}
while ([randomset count]<7)
{
    [randomset addObject:[alphabetsImages objectAtIndex:rand()%25]];
}
final = [randomset allObjects];
finalMutable = [NSMutableArray arrayWithArray:final];
for (UIButton *btn in arrayButtons)
{
    //[btn setImage:final forState:UIControlStateNormal];
} 
```

需要的是，在 arrayButtons 中我有 7 个按钮，并且想要将那些随机挑选的图像放置在其中，如何做到这一点。任何帮助表示赞赏，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:39:22.633

尝试这个：

```
while ([randomset count]<2)
{
    [randomset addObject:[vowels objectAtIndex:rand()%5]];
}
while ([randomset count]<7)
{
    [randomset addObject:[alphabetsImages objectAtIndex:rand()%25]];
}
final = [randomset allObjects];
finalMutable = [NSMutableArray arrayWithArray:final];

[arrayButtons enumerateObjectsUsingBlock:^(UIButton *btn, NSUInteger idx, BOOL *stop) {
        [btn setImage:[final objectAtIndex:idx] forState:UIControlStateNormal];
    }]; 
```

枚举`arrayButtons`使用`enumerateObjectsUsingBlock`块来获取数组中按钮的 id。

# php - prestashop：如何获取属性值

> ID：15918530
> 
> 赞同：0
> 
> 时间：2013-04-10T06:28:04.073
> 
> 标签：php, prestashop

我有中小尺寸的产品。我可以用这个代码来计算产品的数量。“$产品->数量”。但我想分别获得小号和中号的数量。如何编写代码来获取这些值？请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T09:55:00.993

我认为代码是

> {$product.quantity}

但是，如果您指的是不同的产品组合（中小型），您应该首先获得产品的组合，我认为是这段代码：

> $product->getAttributeCombinaisons($params['cookie']->id_lang);

祝你好运 ！;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T22:39:14.557

Prestashop 1.5：

```
 $product->getAttributeCombinaisons($params['cookie']->id_lang); 
```

getAttributeCombinaisons 在 Prestashop 1.6 中被弃用

改用：

```
getAttributeCombinations 
```

# jquery - 在一张图表中加载多个 csv 文件（正确的顺序）

> ID：15918532
> 
> 赞同：0
> 
> 时间：2013-04-10T06:28:09.377
> 
> 标签：jquery, ajax, csv, highcharts

我想加载 x csv 文件并将数据呈现为折线图。加载 1 个 csv 文件并创建折线图已经很好了。

我的 csv 文件：

```
Date,PV,Energy
1355100420,0.000,0.851
1355100480,0.000,0.841
1355100540,0.000,1.000
1355100600,0.000,0.984
1355100660,0.000,1.006
1355100720,0.000,2.769
1355100780,0.000,2.791 
```

我的问题：csv 文件的数量多种多样，正确的顺序很重要，因为 x 轴是我的时间轴，我的 csv 的第一列中有日期/时间。

读取单个 csv：

```
$.get(csv_file, function(data) {
    var series = [];
    // Split lines
    var lines = data.toString().split('\n');
    // For each line, split the record into seperate attributes
    $.each(lines, function(lineNo, line) {
        var items = line.split(',');
        // first line contains the series names
        if (lineNo === 0) {
            for (var i = 1; i < items.length; i++) {
                series.push({
                    name : items[i],
                    data : [],
                    dataGrouping : {
                        enabled : false
                    }
                });
            }
        } else {
            for (var i = 1; i < items.length; i++) {
                // get the serie
                var serie = series[i - 1];
                serie.data.push([parseFloat(items[0] * 1000), parseFloat(items[i])]);
            }
        }
    });
    chart = new Highcharts.StockChart({
        chart : {
            renderTo : container_id,
            type : 'line',
            reflow : true,
        },
        xAxis : {
            type : 'datetime'
        },
        series : series
    });
}); 
```

但是我怎样才能以正确的顺序读取多个 csv 文件呢？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:41:44.493

她可以找到如何加载多个文件的示例：[http ://www.highcharts.com/stock/demo/compare](http://www.highcharts.com/stock/demo/compare)

不同之处在于，您需要首先解析该值（就像您在第一篇文章中所做的那样），然后将它们推送到一个数组中。下一步就是简单地对该数组进行排序（简单`data.sort(function(a,b){ return a[0] - b[0]; })`就足够了）并将排序后的数据放入`series.data`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:26:57.740

您可以使用一些 get() 函数并以正确的顺序推送数据。

使用 2 个数据 csv 的示例。

JS

```
var options = {
    chart: {
        renderTo: 'container',
        zoomType: 'xy',
    },
    title: {
        text: ''
    },
    series: []
};
$.get('data1.csv', function (data) {
    // Split the lines
    options.series.push({
        name: 'aaa',
        data: []
    });

    var lines = data.split('\n');
    $.each(lines, function (lineNo, line) {
        var items = line.split(',');
        options.series[0].data.push([
        parseFloat(items[0]),
        parseFloat(items[1])]);
    });
});

$.get('data2.csv', function (data) {
    // Split the lines
    options.series.push({
        data: []
    });
    var lines = data.split('\n');
    $.each(lines, function (lineNo, line) {
        var items = line.split(',');
        options.series[1].data.push([
        parseFloat(items[0]),
        parseFloat(items[1])]);
    });
    var chart = new Highcharts.Chart(options);
}); 
```

CSV1

```
 16.40803,22.670
16.40772,20.840
16.40740,20.327
16.40709,21.532
16.40678,24.302
16.40646,26.108 
```

CSV2

```
 16.43353,  -19.142
16.43322 , -18.813
16.43290  ,-19.157
16.43259  ,-19.417
16.43228  ,-19.428
16.43196  ,-19.747 
```

# javascript - 如何显示整个数据库

> ID：15918533
> 
> 赞同：2
> 
> 时间：2013-04-10T06:28:11.887
> 
> 标签：javascript, sql, database, html, sqlite

我目前正在使用 SQlite，使用 TideSDK 编写应用程序。我所追求的只是向用户显示整个数据库（所有表），因为它是教师需要查看的评估工具。我正在使用 HTML5 和 Javascript。

我正在考虑将整个数据库放入一个字符串或数组中，例如：

```
var database = db.execute("SELECT name FROM sqlite_master WHERE type='table' ORDER BY name"); 
```

然后一些如何使用 javascript/html 在屏幕上呈现。

这是可能吗？有这种东西的插件吗？它已经困扰我好几个星期了，我似乎无法得到任何帮助。

感谢任何可以为我指明正确方向的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:34:08.733

To list the tables, you should be able to do

```
SELECT name FROM sqlite_master 
    WHERE type IN ('table','view') AND name NOT LIKE 'sqlite_%'
    UNION ALL 
    SELECT name FROM sqlite_temp_master 
    WHERE type IN ('table','view') 
    ORDER BY 1 
```

Or use the shorter version

```
.tables 
```

[http://www.sqlite.org/sqlite.html](http://www.sqlite.org/sqlite.html). Go down to Querying the database schema

# c# - 通过主 Smtp 地址查找 Exchange 用户

> ID：15918536
> 
> 赞同：0
> 
> 时间：2013-04-10T06:28:16.713
> 
> 标签：c#, outlook, interop

我必须编写一个小型 C# 应用程序，该应用程序使用全球 Outlook 通讯簿从给定的电子邮件地址中查找 Exchange 用户。通过他的名字找到 Exchange 用户很简单，但是我如何通过他的主要 smtp 地址找到他？遍历整个 AddressList 不是一种选择，因为它很大（几乎 400k 条目），这需要很长时间。有没有更好更快的方法？

```
 public Outlook.ExchangeUser GetAddressBookEntry(string senderName, string senderAddress)
    {
        //Get Outlook address book
        Outlook.AddressList addressList = olNamespace.AddressLists["Globale Adressliste"];
        Outlook.AddressEntries addressEntries = addressList.AddressEntries;

        Outlook.ExchangeUser exUser = null;

        //Find corresponding entry in the address book
        //This always returns something even if the SenderName is not in the Address Book
        if (senderName != null)
        {
            Outlook.AddressEntry addressEntry = addressEntries[senderName];
            exUser = addressEntry.GetExchangeUser();
        }

        //Check if contact is correct (see above for reason)
        if (exUser != null && ((exUser.Name == senderName) || (exUser.PrimarySmtpAddress == senderAddress)))
        {
            return exUser;
        }

        //this loop takes a few minutes, it is not an option
        //not checking the address not implemented
        Debug.WriteLine("Count: " + addressEntries.Count);

        Stopwatch sw = new Stopwatch();
        sw.Start();
        for (int i = 1; i <= addressEntries.Count; i++)
        {
            Outlook.AddressEntry addressEntry = addressEntries[i];

            if (i % 1000 == 0)
            {
                Debug.WriteLine(i);
            }
        }
        sw.Stop();
        Debug.WriteLine("Seconds: " + sw.Elapsed.TotalSeconds);

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:25:06.370

调用 Namespace.CreateRecipient，调用 Recipient.Resolve，然后使用 Recipient.AddressEntry 属性。

# dns - 使用指向某个文件夹的 php 将域添加到服务器

> ID：15918541
> 
> 赞同：-2
> 
> 时间：2013-04-10T06:28:43.450
> 
> 标签：dns, cpanel, wildcard-subdomain, multiple-domains

我正在使用服务器端 PHP 制作某种 CMS，

1.我如何使用PHP将用户的域添加到NS记录并将其定向到服务器中的文件夹？

2.这个操作叫什么？由于“域”关键字的广告很高，我已经用 Google 搜索了 2 天，但没有成功。

编辑：据我所知，我现在需要与 CPanel 进行 API 接口，所以我得到了我的起点，有没有人有一个简单的例子来说明如何使用 cpanel 成功添加域，我尝试过的都没有工作，那是在阅读之后文档并尝试他们的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:40:35.507

如果您摆脱“指向文件夹”或为每个站点单独配置 Apache 的想法，那将非常简单。只需将 Apache 配置为将*所有请求*定向到特定应用程序/PHP 文件/文件夹/whathaveyou。在该应用程序中，检查 HTTP`Host`请求标头以获取请求的域。然后用它做任何你想做的事情。这甚至可以使用 Apache 中的简单重写规则而不是一些成熟的应用程序来完成，这取决于您的需要。

您只需指示您的用户配置他们的 DNS 服务器，使其域指向您的 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:40:24.520

查看[WHMCS](http://www.whmcs.com/) - 他们有与 WHM/cPanel 接口的模块，可以让您的用户自己选择选项。就像一个托管公司。

# ios - Game Center 身份验证处理程序不会关闭 Game Center 登录模式视图控制器

> ID：15918543
> 
> 赞同：0
> 
> 时间：2013-04-10T06:28:45.710
> 
> 标签：ios, uiviewcontroller, game-center, modalviewcontroller

让 Game Center 身份验证工作，但当 Game Center 'Welcome' 视图控制器出现在视图中时，它不会关闭。点击取消，取消操作被发送，但视图控制器仍保留在视图中。完成用户登录，用户已成功登录，但视图控制器仍然存在，创建一个新的 appleID，最后完成时视图控制器仍然存在。

为什么 Game Center 视图控制器不关闭？

```
 GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    __weak GKLocalPlayer *blockLocalPlayer = localPlayer;
    localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error){

        if (viewController != nil) {

            [self.navigationController pushViewController:viewController animated:YES];

        } else if (blockLocalPlayer.isAuthenticated) {

             NSLog(@"Game Center Authenticated");
             [self loginUser:blockLocalPlayer];

        } else {

             NSLog(@"Game Center Disabled");
             [self loginUser:nil];
        }

        if (error) NSLog(@"Error authenticating Game Center: %@", error);
     }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:21:27.030

回答：

代替：

```
[self.navigationController pushViewController:viewController animated:YES]; 
```

应该使用：

```
[self presentViewController:viewController animated:YES completion:^{}]; 
```

# c - 指向影响错误数组的数组的指针

> ID：15918550
> 
> 赞同：0
> 
> 时间：2013-04-10T06:29:23.600
> 
> 标签：c, arrays, pointers

我遇到了一个问题，即在使用指针时编辑数组 A 会影响 C 中的数组 B。我的代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include "frac_heap.h"

#define ARRAYSIZE 10

fraction heap[][ARRAYSIZE] = {0};
block freeBlocks[][ARRAYSIZE] = {0};
int startingBlock = 0;

void init_Heap(){
    int x;
    for(x = 0; x < ARRAYSIZE; x ++){    

        block *currBlock = freeBlocks[x];
        currBlock->isFree = 1;  
    }
}

void dump_heap(){
    int x;
    for(x = 0; x < ARRAYSIZE; x ++){
        fraction* tempFrac = heap[x];
        printf("%d\t%d\t%d\n",tempFrac->sign, tempFrac->numerator, tempFrac->denominator);
    }   
}

fraction* new_frac(){
    fraction* testFraction = heap[0];
    return testFraction;
}

int main(){ 
    init_Heap();
    dump_heap();
    fraction *p1;
    p1 = new_frac();
    p1->sign = -1;
    p1->numerator  = 2; 
    p1->denominator = 3;
    dump_heap();    
   } 
```

dump_heap() 只打印出堆的内容以及分数符号、分子和分母。但是，当我运行此代码时的输出如下：

```
0   0   0
0   1   0
0   1   0
0   1   0
0   1   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0

-1  2   3
0   1   0
0   1   0
0   1   0
0   1   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0 
```

看到分子中的 1 在分数数组中的许多分数中出现，即使我从未告诉过它把 1 放在那里？如果我编辑对 init_heap() 的调用，则不会发生这种情况。如果我编辑对 init_heap 的调用，则输出为：

```
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0

-1  2   3
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0
0   0   0 
```

哪个是对的。我的问题是为什么 init_heap 会影响分数数组，即使在 init_heap 我只是编辑和访问 freeBlocks 数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:34:52.173

Don't declare your arrays as `heap[][ARRAYSIZE]`, it doesn't make any sense, especially not in the way you are trying to use them. Instead, declared them as `heap[ARRAYSIZE]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:35:05.730

From the way you're using them, it seems that `heap` and `freeBlocks` are meant to be 1D arrays, not 2D.

If that's the case, the following:

```
fraction heap[][ARRAYSIZE] = {0};
block freeBlocks[][ARRAYSIZE] = {0}; 
```

should become

```
fraction heap[ARRAYSIZE] = {0};
block freeBlocks[ARRAYSIZE] = {0}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T06:35:31.797

I think your problem lies in these two definitions:

```
fraction heap[][ARRAYSIZE] = {0};
block freeBlocks[][ARRAYSIZE] = {0}; 
```

Each defines an array with size 1 for the leading dimension, because you only provide 1 initializer.

```
int x;
for (x = 0; x < ARRAYSIZE; x ++){    

    block *currBlock = freeBlocks[x];
    currBlock->isFree = 1;  
} 
```

This code is indexing through the array of arrays one unit of 10 `block`s at a time (and is trampling way out of bounds). `freeblocks[1]` is beyond the end of the space allocated for `freeblocks`; `freeblocks[9]` is even further out of control.

# jquery - 我想使用一个 jquery 动画两次更改元素的高度，但我不能。怎么做？

> ID：15918557
> 
> 赞同：2
> 
> 时间：2013-04-10T06:30:18.333
> 
> 标签：jquery, animation

我想使用一个 jquery 动画两次更改元素的高度，但我不能。怎么做？

我正在使用代码：

```
$("#animate").click(function() {
$("#content")
    .animate({"height": "200px"},{"queue": true, "duration": 500})
    .animate({"width": "250px"}, {"queue": true, "duration": 500});
    .animate({"height": "100px"},{"queue": true, "duration": 500})
}); 
```

什么都没有发生。但是如果我删除任何一个高度动画，它就可以正常工作。提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:32:50.750

您需要删除`;`：

```
.animate({"width": "250px"}, {"queue": true, "duration": 500}); // <-- Here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:33:04.753

您的代码中存在语法错误，您可能不得不推迟第二个高度动画，直到第一个动画完成

```
$("#animate").click(function() {
$("#content").animate({
            "height" : "200px"
        }, {
            "queue" : true,
            "duration" : 500,
            complete : function() {
                $(this).animate({
                            "height" : "100px"
                        }, {
                            "queue" : true,
                            "duration" : 500
                        })
            }
        }).animate({
            "width" : "250px"
        }, {
            "queue" : true,
            "duration" : 500
        });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T06:35:38.163

把它串起来：

```
$("#content").animate({"height": 200}, 500, function(){
   $(this).animate({"width" : 250}, 500, function(){
      $(this).animate({"height" : 100}, 500)
   })
}); 
```

# sql - SQL Server 2008 创建表语法错误

> ID：15918559
> 
> 赞同：2
> 
> 时间：2013-04-10T06:30:22.997
> 
> 标签：sql, sql-server-2008

我正在尝试在 SQL Server 2008 中创建一个简单的表并收到语法错误。我正在使用 Microsoft SQL Server Management Studio > 新查询

这是语法：

```
CREATE TABLE Address
{
    AddressID int IDENTITY PRIMARY KEY,
    Street varchar(60) NULL,
    City varchar(50) NULL,
    State varchar(2) NULL,
    Zip varchar(10)NULL,
    Intersection1 varchar(60) NULL,
    Intersection2 varchar(60) NULL
} 
```

和错误信息：

> 消息 102，级别 15，状态 1，第 2 行
> '{' 附近的语法不正确。

根据在线找到的示例，语法似乎是准确的。创建此表的正确语法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T06:32:49.673

`( )`不使用`{ }`

```
CREATE TABLE Address
(
    AddressID int IDENTITY PRIMARY KEY,
    Street varchar(60) NULL,
    City varchar(50) NULL,
    State varchar(2) NULL,
    Zip varchar(10)NULL,
    Intersection1 varchar(60) NULL,
    Intersection2 varchar(60) NULL,
) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/7557a/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:34:08.027

您需要使用`()`而不是`{}`

```
CREATE TABLE Address
(
    AddressID int IDENTITY PRIMARY KEY,
    Street varchar(60) NULL,
    City varchar(50) NULL,
    State varchar(2) NULL,
    Zip varchar(10)NULL,
    Intersection1 varchar(60) NULL,
    Intersection2 varchar(60) NULL
) 
```

也去掉最后一个`,`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-17T06:53:12.210

下面是在 Sql Server 2008 中创建表的语法：

```
 CREATE TABLE table_name
(
column_name1 data_type(size),
column_name2 data_type(size),
column_name3 data_type(size),
....
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-06T19:49:56.047

你必须使用第一个括号

```
CREATE TABLE Address
(
    AddressID int IDENTITY PRIMARY KEY,
    Street varchar(60) NULL,
    City varchar(50) NULL,
    State varchar(2) NULL,
    Zip varchar(10)NULL,
    Intersection1 varchar(60) NULL,
    Intersection2 varchar(60) NULL
) 
```

# android - Android 在文件数组中添加文件

> ID：15918562
> 
> 赞同：0
> 
> 时间：2013-04-10T06:30:40.737
> 
> 标签：android, file

我有一个文件名列表（filelist），我想将其检索并存储到 File 数组（files）中。

但我不知道如何读取文件并存储到其中。意味着我喜欢将文件列表中的文件添加到文件中。我怎样才能做到这一点？

```
public static File[] files; 
private List<String> filelist;
File targetDirector = new File(targetPath);
files = targetDirector.listFiles();  
/* This will get all files in that directory, 
   but I just want the file listed in filelist */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:53:13.367

```
files = targetDirector.listFiles(); 
```

这一行将为您提供该路径目录包含的文件列表。

> 但我不知道如何读取文件并存储到其中。

你可以像这样阅读

```
 for (int i=0 ; i< files.length ; i ++)
  {
     //To Read 

     BufferedReader bufferedReader = new BufferedReader(new FileReader( file[i] );
     String read;
     StringBuilder builder = new StringBuilder("");

     while((read = bufferedReader.readLine()) != null){
            builder.append(read);
          }
     Log.d("File Out", builder.toString());
     bufferedReader.close();

    // To Store file 

    BufferedWriter bufferedWriter = new BufferedWriter(file[i]);
    bufferedWriter.write("File is writing..... ");
    bufferedWriter.close();

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:40:53.990

我认为这种方式更好

```
 files = targetDirector.listFiles(
                    new FilenameFilter() {
                     @Override public boolean accept(File dir, String name) {
                         //mspoke is List containing name of file needed to read
                         if (mSpoke.contains(name)){

                            return true; 
                         }else{
                             return false;
                         }
                     }
                   }

                   ); 
```

# ruby-on-rails - 我在 rails generate devise:install 之前运行 rails generate devise MODEL

> ID：15918563
> 
> 赞同：7
> 
> 时间：2013-04-10T06:30:42.030
> 
> 标签：ruby-on-rails, ruby, devise

在运行初始设计生成器之前，我不小心添加了我的设计模型。

**我首先运行的代码：**

```
$ rails generate devise MODEL 
```

**初始设计生成器（我应该先运行）：**

```
$ rails generate devise:install 
```

我现在有一个名为 Model 的设计控制器，它不允许我运行 'rake db:migrate'

**错误：**

```
rake aborted!
    User does not respond to 'devise' method. This usually means you haven't loaded your ORM file or  it's being loaded too late. To fix it, be sure to require 'devise/orm/YOUR_ORM' inside      'config/initializers/devise.rb' or before your application definition in 'config/application.rb'
    /Users/andyHuynh/.rvm/gems/ruby-1.9.3-p327/gems/devise-2.2.3/lib/devise/rails/routes.rb:443:in `raise_no_devise_method_error!'
    /Users/andyHuynh/.rvm/gems/ruby-1.9.3-p327/gems/devise-2.2.3/lib/devise/rails/routes.rb:211:in `block in devise_for'
    /Users/andyHuynh/.rvm/gems/ruby-1.9.3-p327/gems/devise-2.2.3/lib/devise/rails/routes.rb:207:in `each'
    /Users/andyHuynh/.rvm/gems/ruby-1.9.3-p327/gems/devise-2.2.3/lib/devise/rails/routes.rb:207:in `devise_for'
    /Users/andyHuynh/Code/jargon/config/routes.rb:3:in `block in <top (required)>'
    /Users/andyHuynh/.rvm/gems/ruby-1.9.3-p327@global/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
    /Users/andyHuynh/.rvm/gems/ruby-1.9.3-p327@global/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
    /Users/andyHuynh/.rvm/gems/ruby-1.9.3-p327@global/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:260:in `draw'
    /Users/andyHuynh/Code/jargon/config/routes.rb:1:in `<top (required)>'
... 
```

有没有办法可以撤消此过程以首先运行初始生成器？我正在使用 Rails 3.2.12。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-10T08:31:28.707

您可以使用 撤消生成命令`rails destroy ...`，因此在您的情况下，它将是：

```
$ rails destroy devise MODEL 
```

如果由于某种原因这不起作用，您可以删除模型并迁移 - 它们只是文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-12T10:38:06.213

rails destroy 模型设计：用户或 rails destroy 脚手架设计：用户

# android - 在phonegap android中使用数据库的确切过程是什么？

> ID：15918565
> 
> 赞同：0
> 
> 时间：2013-04-10T06:30:50.977
> 
> 标签：android, database, sqlite, cordova, phonegap-plugins

我是Phonegap的新手。我正在尝试在**Phonegap Android**中实现一个应用程序。在过去的两天里，我正在寻找访问数据库并从中检索数据库的正确方法。我没有找到问题的答案

我了解到 Phonegap 不支持 SQLLITE，但支持 W3C Web SQL 数据库规范和 W3C Web 存储。

同时我注意到Phonegap 1.5 的插件很少......现在不存在。同时我发现 W3c 数据库为**iOS**提供了 5MB 的有限存储空间。

我发现这个用于 Phonegap Android 的 SQL 插件 [**PhoneGap-SQLitePlugin-Android**](https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android) 是否建议使用此方法或任何其他方法。请指导我。

因此，如果您有任何可以遵循的访问数据库的示例，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T15:15:17.290

我最近做了一个需要这个的应用程序，针对 Android 和 iOS。您可以使用以下组合::

**1.本地存储::**

检查本地存储

```
function supports_html5_storage() {
  try {
    return 'localStorage' in window && window['localStorage'] !== null;
  } catch (e) {
    return false;
  }
} 
```

将项目设置为 LocalStorage

```
localStorage.setItem("bar", foo); 
```

或者

```
localStorage["bar"] = foo; 
```

从 LocalStorage 获取项目

```
var foo = localStorage.getItem("bar"); 
```

或者

```
var foo = localStorage["bar"]; 
```

**2\. SQLite 数据库（更方便，更持久）**

设置你的数据库

```
var shortName = 'BHCAppDB'; 
var version = '1.0'; 
var displayName = 'BHCAppDB'; 
var maxSize = 65535; 
if (!window.openDatabase){ 
     alert('!! Databases are not supported in this Device !! \n\n We are sorry for the inconvenience and are currently working on a version that will work on your phone'); 
}
db = openDatabase(shortName, version, displayName,maxSize);
createAllTables(db); 
```

创建您的表格

```
function createAllTables(db){
    db.transaction(function(transaction){
        transaction.executeSql("CREATE TABLE IF NOT EXISTS Profile(id INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT, gender TEXT,age INTEGER)");
} 
```

执行 SQL 查询

```
transaction(function(transaction){
        var rowCount = 'SELECT * FROM Profile';
        transaction.executeSql(rowCount,[],function(transaction,result){
            if(result.rows.length == 0){
                var sqlString = 'INSERT INTO Profile (name,gender,age) VALUES("自己","Female",18)';
                transaction.executeSql(sqlString);

            }
        });
    }); 
```

**3\. 所有设备上的原生存储**

这是Phonegap最好的部分。您可以使用 Phonegap 插件调用在所有设备上调用本机插件类。在调用过程中，您可以将参数传递给类，并且本机类可以将您的数据存储在操作系统本身中。

例如 :: 在 iOS 中，您创建一个插件 .h 和 .m 类并将其注册到 Cordova.plist 文件。完成后，您需要使用 Phonegap 从 JavaScript 向该类发送调用。一旦使用 NSDictionary 或任何其他 NSArray 类型接收到参数，您就可以调用 CoreData 类来存储无限量的数据。你永远不会耗尽内存。

这也可以对所有其他操作系统以类似的方式完成:)

对于加密，请尝试以下操作 :: SQLCipher

以下是有关使用现有 SQLite 数据库的一些附加信息。在此示例中，encrypted.db 是您创建和编译的全新数据库。

```
ATTACH DATABASE 'encrypted.db' AS encrypted KEY 'secret'; -- create a new encrypted database
CREATE TABLE encrypted.t1(a,b); -- recreate the schema in the new database (you can inspect all objects using SELECT * FROM sqlite_master)
INSERT INTO encrypted.t1 SELECT * FROM t1; -- copy data from the existing tables to the new tables in the encrypted database
DETACH DATABASE encrypted; 
```

# c# - 为什么安装后 SQLite 数据库大小为 0KB？

> ID：15918567
> 
> 赞同：1
> 
> 时间：2013-04-10T06:30:59.097
> 
> 标签：c#, winforms, sqlite, installation

我用 sqlite 数据库制作了一个 Windows 应用程序，我将数据库保存在 bin\debug 中，我正在检索数据库路径，如下所示：

```
currentDir=System.Environment.CurrentDirectory.ToString(); 
```

它在调试模式下工作正常，但是当我创建设置并安装它时，数据库存储在 c:\program 文件中的某个位置。但问题是它显示数据库**文件大小为 0KB**，当我用正确的数据库替换此文件时，它运作良好。但我不知道为什么会出现这个问题，为什么数据库大小会减少到 0KB？

需要帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:29:41.877

终于明白了，因为我在创建数据库时没有包括 sqlite 数据库

```
Application Folder > Add > File > Choose the database 
```

问题消失了。愚蠢的错误。

# iphone - 如何发送带有图片的apns通知

> ID：15918577
> 
> 赞同：0
> 
> 时间：2013-04-10T06:31:39.600
> 
> 标签：iphone, image, push-notification, apple-push-notifications

如何以同伴的身份发送带有图片的 apns 通知：

![在此处输入图像描述](https://i.stack.imgur.com/VJLJf.png)

我应该将图像文件名放在客户字段中还是其他任何地方？

# php - 如何设置一天的购物车

> ID：15918585
> 
> 赞同：-2
> 
> 时间：2013-04-10T06:32:20.583
> 
> 标签：php

我正在开发一个购物车应用程序。当用户选择特定产品时，该产品的 ID、数量和价格会存储在会话中。但是当我关闭浏览器时，来自 $_SESSION['cart'] 的所有数据都会被删除，但我希望当我再次访问我的网站时，应该显示最后选择的实体。我使用价格、数量和产品 ID 作为 -

```
<?
$_SESSION['cart'] = array();
$_SESSION['cart'][0]['productId'] = $pid;
$_SESSION['cart'][0]['qty'] = 1;
$_SESSION['cart'][0]['price'] = $price
?> 
```

请告诉我即使在关闭浏览器后如何在会话中保留选定的值。如果您有其他方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:36:47.323

显然，将数据保存到 cookie 或数据库中！
会话持续到超时（如果有）或您关闭浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:48:53.447

你可以`session.cookie_lifetime`在你的`php.ini`. `0`默认情况下。我认为这就是关闭浏览器时会话过期的原因。

将其设置为将会话`86400`cookie 生命周期设置为一天，然后重新检查您的站点。我认为它会解决你的问题。

[看看这里](https://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes)

[php.net 文章](http://php.net/manual/en/session.configuration.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:41:40.717

当您设置会话数据时，只需设置一个 cookie：

```
setcookie('cart' , true, time()+60*60*24*7);
setcookie('productID' , $pid, time()+60*60*24*7);
setcookie('qty' , '1', time()+60*60*24*7);
setcookie('price' , $price, time()+60*60*24*7); 
```

比在全局标头中检查一个人是否未登录（通过会话变量存在），如果没有，检查 cookie 是否存在，如果存在，通过它填充您的购物车。

您当然需要启动一个新会话，但这超出了这个问题的范围。

# c# - 如何避免在c#中发送重复邮件

> ID：15918586
> 
> 赞同：-3
> 
> 时间：2013-04-10T06:32:21.217
> 
> 标签：c#, smtpclient

我编写了一个代码，每当用户从前端添加内容时，它就会向管理员发送邮件以进行审核.....问题是有时管理员会收到两封相同内容的邮件。

下面是我的代码

```
 MailMessage mail = new MailMessage();

            string mailto = ConfigurationManager.AppSettings["adminStoryEmail"].ToString();
            mail.To.Add(mailto);
            //mail.To.Add("vidyasagar.patil@viraltech.in");
            mail.From = new MailAddress(ConfigurationManager.AppSettings["fromEmail"]);
            mail.Subject = ConfigurationManager.AppSettings["email_subject"];
            if (uploadedpath != "")
            {
                mail.Body = "Email ID : " + txtEmail.Text + "<br /> Title : " + txtStoryTitle.Text + "<br />" + " Download :   " + " http://www.achievewithdell.in/uploads/" + uploadedpath + "<br />";
                if (story != "")
                {
                    mail.Body += "New story has been added" + " http://www.achievewithdell.in/admin/ManageStory.aspx";
                }
            }
            else
            {
                mail.Body = "Email ID : " + txtEmail.Text + "<br /> Title : " + txtStoryTitle.Text + " <br />";
                if (story != "")
                {
                    mail.Body += "New story has been added" + " http://www.achievewithdell.in/admin/ManageStory.aspx";
                }
            }
            mail.IsBodyHtml = true;

            SmtpClient smtp = new SmtpClient();
            smtp.Host = ConfigurationManager.AppSettings["smtp_host"];  //Or Your SMTP Server Address
            smtp.Port = 25;
            smtp.Credentials = new System.Net.NetworkCredential(ConfigurationManager.AppSettings["smtp_userid"], ConfigurationManager.AppSettings["smtp_password"]); //Or your Smtp Email ID and Password
            smtp.DeliveryMethod = SmtpDeliveryMethod.Network;

            smtp.Send(mail); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:35:27.883

Debug and make sure smtp Send() method is not called twice, put a break point on that line.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T07:59:59.317

您说有时电子邮件会发送两次。这表明您给我们的代码很好，问题可能在于调用该代码的内容。

消除重复的一种方法是将要发送的邮件排队，可能在数据库中（存储：收件人、发件人、主题、正文等）。然后定期遍历要发送的邮件，忽略重复邮件并标记已发送的邮件，以免再次发送。

正如另一张海报所建议的那样，如果无法像这样对您的应用程序进行重构，请退出调试器并设置断点。根据您的 Visual Studio 版本，您可以使用[断点命中计数](https://msdn.microsoft.com/en-us/library/aa290719%28v=vs.71%29.aspx?f=255&MSPPError=-2147217396)，以便您仅在第二次到达断点处。

# api - GitHub API V3：push_at 和 updated_at 有什么区别？

> ID：15918588
> 
> 赞同：34
> 
> 时间：2013-04-10T06:32:32.420
> 
> 标签：api, github

展望 V3 API Repos (GET /repos/:owner/:repo) 我们有 3 个 datetime ：

```
 "pushed_at": "2011-01-26T19:06:43Z",
  "created_at": "2011-01-26T19:01:12Z",
  "updated_at": "2011-01-26T19:14:43Z", 
```

有一个快速的例子只需链接这个[https://api.github.com/repos/twitter/bootstrap](https://api.github.com/repos/twitter/bootstrap)

push_at 和 updated_at 有什么区别？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-10T09:57:02.923

**更新**：下面描述的行为不是故意的。`pushed_at`将在提交被推送到任何存储库的分支时更新。`updated_at`将在更新存储库对象时更新，例如，当更新存储库的描述或主要语言时。推送没有必要更新`updated_at`属性——只有在推送触发了对存储库对象的更新时才会发生这种情况。例如，如果存储库的主要语言是 Python，然后您推送了大量 JavaScript 代码——这可能会将主要语言更改为 JavaScript，这会更新存储库对象的`language`属性，进而更新`updated_at`属性。以前，主要语言在每次推送后都会更新，即使它没有改变（这不是故意的），所以它触发了对`updated_at`.

* * *

不同之处在于`pushed_at`表示**上次提交**的日期和时间，而`updated_at`表示**上次更改**存储库的日期和时间。对存储库的更改可能是提交，但也可能是其他事情，例如更改存储库的描述、创建 wiki 页面等。换句话说，提交是更新的子集，`pushed_at`因此时间戳将要么与时间戳相同`updated_at`，否则将是更早的时间戳。

# android - ActionBarsherlock how to set dividers on menu items with icons only

> ID：15918593
> 
> 赞同：6
> 
> 时间：2013-04-10T06:32:47.950
> 
> 标签：android, actionbarsherlock, menuitem, divider

Hello android developers, I know this question have been asked many of times, and I have also tried many solutions but they are not working for me. Firstly I am using action bar sherlock library to show action bar,and I want to show dividers between menu items with icons only. For that I create custom style for showing divider but they are not showing.

`<style name="Theme.SherlockCustom" parent="@style/Theme.Sherlock.Light">`

`<item name="android:actionBarDivider">@drawable/actionbar_seprator</item>`

`<item name="android:showDividers">middle</item>`

`</style>`

And also tried to update sherlock library ActionMenuItemView.java for ActionBar where needsDividerBefore() will always give true. But this patch also not worked for me. Please help where I am going wrong. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T02:04:29.220

除非您为操作栏使用自定义视图，否则您无法在 > 4.0 的版本中获得分隔符；本机实现在内部控制行为，并且不提供任何钩子来修改它。

HTH，阿里。

# ruby-on-rails - Caching actions in Rails 3

> ID：15918597
> 
> 赞同：0
> 
> 时间：2013-04-10T06:32:51.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, optimization

I want to cache an action and I want it to be different depending on a request param ('type').

How can I do that? I want that not only the rendering will be cached, but also the calculation and the DB requests (most of the action itself)

One possible solution would be to save the different results to a file and once created to redirect to a proxy actions for each type and render them, but that it overly complicated solution and maybe Rails has a better build-in solution.

Is it possible?

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:36:30.773

您可以使用 a`before filter`检查参数类型并继续执行必要的操作。

```
before_filter :check_params, :only => :some_action
caches_action :some_action

def check_params
  if params["type"] == 'something'
    query_method1
  else
    query_method2
  end
end 
```

# javascript - 为什么Websocket onmessage没有触发

> ID：15918599
> 
> 赞同：0
> 
> 时间：2013-04-10T06:32:52.430
> 
> 标签：javascript, websocket

这是我在“HTML5 websocket 权威指南”一书中的代码。

```
....
<div id="output"></div>
<script>
function setup() {
output = document.getElementById("output");
ws = new WebSocket("ws://localhost:7777");

ws.onopen = function(e) {
    log("Connected");
    sendMessage("Hello Websocket!");
}

ws.onclose = function(e){
    log("Disconnected: " + e.reason);
}

ws.onerror = function(e){
    log("Error ");
}

ws.onmessage = function(e) {
    log("Message received: " + e.data);
    ws.close();
}

}

function sendMessage(msg){
ws.send(msg);
    log("Message Sent");
}

function log(s){
var p = document.createElement("p");
p.style.wordWrap = "break-word";
p.textContent = s;
output.appendChild(p);

console.log(s);
}
setup();
</script> 
```

但是，当我在 localhost 中运行它时.. 输出就像这样

```
Connected
Message Sent 
```

然后停下来。我知道事件 onmessage 没有触发，但我不知道为什么。可能是什么问题？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T07:40:46.337

`onmessage`只会在服务器向客户端发送消息时触发，而不是在客户端向服务器发送消息时触发（这就是您正在做的事情）。

如果您的服务器正在发回一条消息并且您的客户端没有接收到该消息，那么您将需要提供更多上下文（服务器实现等）。

# javascript - 尝试在 JavaScript 中创建 cookie

> ID：15918605
> 
> 赞同：0
> 
> 时间：2013-04-10T06:33:11.593
> 
> 标签：javascript, cookies

我正在尝试将 cookie 保存在 JavaScript 中，然后再次将它们显示在页面上，但由于某种原因，我的`setCookies`功能和`displayCookies`功能无法正常工作。我希望它也能在 1 周后过期。它来自一个表单，当我将它放在 FireFox 的 Web Developer 中时，它说 Reference Error setCookies and displayCookies is not defined。我的 jsfiddle 是：http: [//jsfiddle.net/FmXJW/](http://jsfiddle.net/FmXJW/)

```
 function setCookies()
    {
        // this function will set cookies for each field in the reservation form, and set them to expire after one day
        var Name = document.forms[0].txtName.value;
        var Address = document.forms[0].txtAddress.value;
        var City = document.forms[0].txtCity.value;
        var State = document.forms[0].txtState.value;
        var Zip = document.forms[0].txtZip.value;
        var Email = document.forms[0].txtEmail.value;
        var CarType = document.forms[0].txtCarType.value;
        var PickupDate = document.forms[0].txtPickupDate.value;
        var ReturnDate = document.forms[0].txtReturnDate.value;

        var myDate = newDate();
        myDate.setDate(myDate.getDate() + 7);

        document.cookie = "name=" + encodeURIComponent(Name) + "; expires=" + myDate.toUTCString();
        document.cookie = "address=" + encodeURIComponent(Address) + "; expires=" + myDate.toUTCString();
        document.cookie = "city=" + encodeURIComponent(City) + "; expires=" + myDate.toUTCString();
        document.cookie = "state=" + encodeURIComponent(State) + "; expires=" + myDate.toUTCString();
        document.cookie = "zip=" + encodeURIComponent(Zip) + "; expires=" + myDate.toUTCString();
        document.cookie = "email=" + encodeURIComponent(Email) + "; expires=" + myDate.toUTCString();
        document.cookie = "carType=" + encodeURIComponent(CarType) + "; expires=" + myDate.toUTCString();
        document.cookie = "pickupDate=" + encodeURIComponent(PickupDate) + "; expires=" + myDate.toUTCString();
        document.cookie = "returnDate=" + encodeURIComponent(ReturnDate) + "; expires=" + myDate.toUTCString();

        window.alert ("Your reservation has been saved.");

    } // end function setCookies()

    function displayCookies()
    {
        // this function will read the saved cookies, and repopulate the form with the cookie values

        var cookieString = decodeURIComponent(document.cookie);
        var cookieArray = cookieString.split("; ");

        if (document.cookie == 0)
        {
            alert("You have not made a reservation");
        }
        else
        {
            // retrieve each cookie, and display the cookie value in the appropriate form field
        document.forms[0].txtName.value = cookieArray[0].lastIndexOf("=") + 1);
        document.forms[0].txtAddress.value = cookieArray[1].lastIndexOf("=") + 1);
        document.forms[0].txtCity.value = cookieArray[2].lastIndexOf("=") + 1);
        document.forms[0].txtState.value = cookieArray[3].lastIndexOf("=") + 1);
        document.forms[0].txtZip.value = cookieArray[4].lastIndexOf("=") + 1);
        document.forms[0].txtEmail.value = cookieArray[5].lastIndexOf("=") + 1);
        document.forms[0].txtCarType.value = cookieArray[6].lastIndexOf("=") + 1);
        document.forms[0].txtPickupDate.value = cookieArray[7].lastIndexOf("=") + 1);
        document.forms[0].txtReturnDate.value = cookieArray[8].lastIndexOf("=") + 1);
        }

    } // end function displayCookies() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:14:20.860

您的代码有几个问题：

您没有正确地从 cookie 中存储的不同字段中检索值，您需要使用 slice 来获取正确的部分。

我也猜`var myDate = newDate();`应该是`var myDate = new Date();`.

我已经改变了你的小提琴（在[这里](http://jsfiddle.net/FmXJW/4/)找到它）并加载了代码`<head>`，现在它似乎可以正确保存和显示 cookie。

# jquery - 调用jquery函数

> ID：15918610
> 
> 赞同：16
> 
> 时间：2013-04-10T06:33:52.563
> 
> 标签：jquery, jquery-plugins

我有一个 Jquery 函数，如下所示

```
function myFunction(){  
            $.messager.show({  
                title:'My Title',  
                msg:'The message content',  
                showType:'fade',  
                style:{  
                    right:'',  
                    bottom:''  
                }  
            });  
        } 
```

如果某些条件为真，我想调用`myFunction`并显示一条弹出消息。如何调用 myFunction？这样它就会像 onClick() 一样。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-10T06:34:57.550

单击某个 html 元素（控件）时调用该函数。

```
$('#controlID').click(myFunction); 
```

当您的 html 元素准备好绑定事件时，您需要确保绑定事件。您可以将代码放在 document.ready

```
$(document).ready(function(){
    $('#controlID').click(myFunction);
}); 
```

您可以使用匿名函数将事件绑定到 html 元素。

```
$(document).ready(function(){
    $('#controlID').click(function(){
         $.messager.show({  
            title:'My Title',  
            msg:'The message content',  
            showType:'fade',  
            style:{  
                right:'',  
                bottom:''  
            }  
        });  
    });
}); 
```

如果您想将点击与许多元素绑定，您可以使用类选择器

```
$('.someclass').click(myFunction); 
```

**根据 OP 的评论进行**编辑，如果您想在某些条件下调用函数****

 **您可以使用 if 进行条件执行，例如，

```
if(a == 3)
     myFunction(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T06:41:10.790

调用函数很简单..

```
 myFunction(); 
```

所以你的代码将类似于..

```
 $(function(){
     $('#elementID').click(function(){
         myFuntion();  //this will call your function
    });
 });

  $(function(){
     $('#elementID').click( myFuntion );

 }); 
```

或在某些条件下

```
if(something){
   myFunction();  //this will call your function
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T06:55:35.283

只需在 $(document).ready() 中通过 jquery 添加单击事件，例如：

```
$(document).ready(function(){

                  $('#YourControlID').click(function(){
                     if(Check your condtion)
                     {
                             $.messager.show({  
                                title:'My Title',  
                                msg:'The message content',  
                                showType:'fade',  
                                style:{  
                                    right:'',  
                                    bottom:''  
                                }  
                            });  
                     }
                 });
            }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-12T16:54:13.983

试试这个代码：

```
$(document).ready(function(){
    $('#YourControlID').click(function(){
        if() { //your condition
            $.messager.show({  
                title:'My Title',  
                msg:'The message content',  
                showType:'fade',  
                style:{  
                    right:'',  
                    bottom:''  
                }  
            });  
        }
    });
}); 
```**

# bash - How to run shell commands in emacs on ubuntu while avoiding a bash job control error?

> ID：15918614
> 
> 赞同：6
> 
> 时间：2013-04-10T06:34:13.380
> 
> 标签：bash, shell, ubuntu, emacs

I installed emacs in ubuntu (using sudo apt-get install emacs). I am havine the problem that when I try to run a shell command from within emacs (for example `M-! ls`) the output is preceded by this:

```
bash: cannot set terminal process group (-1): Invalid argument
bash: no job control in this shell 
```

In my `.emacs` I have the option `(setq shell-command-switch "-ic")` . This is so that I can presumably use my aliases as well as commands. This has not given me issues at work and it lets me use my aliases. How can I use my aliases but avoid this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T16:15:41.450

我猜想通过像这样设置你的 shell-command-switch，你正在执行你的`.profile`或系统配置文件中的代码路径，这取决于 shell 中的作业控制。

我将通过在正确的代码路径中定义所需的别名来修复此错误，以便它们出现在未以开头的 shell 中`-i`

您可以尝试交换或类似`-i`的`--rcfile .aliases`东西，以便在 emacs 中与您的登录 shell`alias`中没有区别。`alias`如果您的 .bashrc 对您的工作很重要，请创建一个类似 .bashrc.emacs 的文件，其中包含内容

```
source .bashrc
source .aliases 
```

`--rcfile .bashrc.emacs` 并在您的`(setq)`说明中指向该文件。

你在哪里定义你的别名？Ubuntus .bashrc 读取 .bash_aliases 并且这也应该发生在非交互式 shell 上。

# c# - 模拟是否也失败或无法使用数据库进行 TDD 测试是真的吗？

> ID：15918616
> 
> 赞同：0
> 
> 时间：2013-04-10T06:34:16.207
> 
> 标签：c#, sql-server, database, unit-testing, mocking

理论上，对需要与数据库交互的功能代码库进行测试是很困难的，但我认为我们可以使用 mocks。在现实生活中的应用程序中，您是否在使用 mock 对数据库执行 TDD 测试时遇到过失败的案例？你能分享一些想法来向我解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:46:23.723

在 tdd 中，我使用模拟来用假（模拟）替换物理数据库访问。

对于数据库访问，我总是使用[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)作为可以轻松模拟的 api。

要回答您的问题：

```
> do you have failed cases when applying mocks 
> to perform TDD tests with databases ? 
```

**只要所有数据库操作都封装在存储库中，就不会**。****

# security - Symfony2 扩展 DefaultAuthenticationSuccessHandler

> ID：15918617
> 
> 赞同：27
> 
> 时间：2013-04-10T06:34:18.350
> 
> 标签：security, authentication, symfony, extending

我想在身份验证成功后更改默认身份验证过程。我创建了一个在身份验证成功后和重定向之前调用的服务。

```
namespace Pkr\BlogUserBundle\Handler;
use Doctrine\ORM\EntityManager;
use Pkr\BlogUserBundle\Service\Encoder\WpTransitionalEncoder;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpKernel\Log\LoggerInterface;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Http\Authentication\AuthenticationSuccessHandlerInterface;
use Symfony\Component\Security\Http\Authentication\Response;

class AuthenticationSuccessHandler implements AuthenticationSuccessHandlerInterface
{

    protected $entityManager = null;
    protected $logger = null;
    protected $encoder = null;

    public function __construct(EntityManager $entityManager, LoggerInterface $logger, WpTransitionalEncoder $encoder)
    {
        $this->entityManager = $entityManager;
        $this->logger = $logger;
        $this->encoder = $encoder;
    }

    /**
    * This is called when an interactive authentication attempt succeeds. This
    * is called by authentication listeners inheriting from
    * AbstractAuthenticationListener.
    *
    * @param Request $request
    * @param TokenInterface $token
    *
    * @return Response never null
    */
    public function onAuthenticationSuccess(Request $request, TokenInterface $token)
    {
        $user = $token->getUser();
        $newPass = $request->get('_password');
        $user->setUserPassword($this->encoder->encodePassword($newPass, null));
        $this->entityManager->persist($user);
        $this->entityManager->flush();
        //do redirect
    }
} 
```

在 services.yml

```
services:
    pkr_blog_user.wp_transitional_encoder:
        class: "%pkr_blog_user.wp_transitional_encoder.class%"
        arguments:
            cost: "%pkr_blog_user.wp_transitional_encoder.cost%"
            logger: @logger
    pkr_blog_user.login_success_handler:
        class: Pkr\BlogUserBundle\Handler\AuthenticationSuccessHandler
        arguments:
            entity_manager: @doctrine.orm.entity_manager
            logger: @logger
            encoder: @pkr_blog_user.wp_transitional_encoder 
```

在 security.yml 中

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    secured_area:
        pattern:   ^/
        anonymous: ~
        form_login:
            login_path:  pkr_blog_admin_login
            check_path:  pkr_blog_admin_login_check
            success_handler: pkr_blog_user.login_success_handler
        logout:
            path: pkr_blog_admin_logout
            target: / 
```

我想要实现的只是稍微改变默认行为，所以我想为什么不扩展`DefaultAuthenticationSuccessHandler`，添加一些东西`onSuccessHandler()`并调用`parent::onSucessHandler()`. 我试过了，问题是我不知道如何将安全参数（在 security.yml 中设置）添加到我的扩展类构造函数中。DefaultAuthenticationSuccessHandler 使用 HttpUtils 和 $options 数组：

```
/**
 * Constructor.
 *
 * @param HttpUtils $httpUtils
 * @param array     $options   Options for processing a successful authentication attempt.
 */
public function __construct(HttpUtils $httpUtils, array $options)
{
    $this->httpUtils   = $httpUtils;

    $this->options = array_merge(array(
        'always_use_default_target_path' => false,
        'default_target_path'            => '/',
        'login_path'                     => '/login',
        'target_path_parameter'          => '_target_path',
        'use_referer'                    => false,
    ), $options);
} 
```

所以我的扩展类构造函数应该如下所示：

```
 // class extends DefaultAuthenticationSuccessHandler
    protected $entityManager = null;
    protected $logger = null;
    protected $encoder = null;

    public function __construct(HttpUtils $httpUtils, array $options, EntityManager $entityManager, LoggerInterface $logger, WpTransitionalEncoder $encoder)
    {
        $this->entityManager = $entityManager;
        $this->logger = $logger;
        $this->encoder = $encoder;
    } 
```

将 HttpUtils 服务添加到 my 非常容易`services.yml`，但是 options 参数呢？

```
services:
    pkr_blog_user.wp_transitional_encoder:
        class: "%pkr_blog_user.wp_transitional_encoder.class%"
        arguments:
            cost: "%pkr_blog_user.wp_transitional_encoder.cost%"
            logger: @logger
    pkr_blog_user.login_success_handler:
        class: Pkr\BlogUserBundle\Handler\AuthenticationSuccessHandler
        arguments:
            httputils: @security.http_utils
            options: [] #WHAT TO ADD HERE ?
            entity_manager: @doctrine.orm.entity_manager
            logger: @logger
            encoder: @pkr_blog_user.wp_transitional_encoder 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-06-08T16:22:14.093

如果您只为您的应用程序定义了一个成功/失败处理程序，那么有一种更简单的方法可以做到这一点。您可以覆盖and而不是为`success_handler`and定义新服务。`failure_handler``security.authentication.success_handler``security.authentication.failure_handler`

例子：

服务.yml

```
services:
    security.authentication.success_handler:
        class:  StatSidekick\UserBundle\Handler\AuthenticationSuccessHandler
        arguments:  ["@security.http_utils", {}]
        tags:
            - { name: 'monolog.logger', channel: 'security' }

    security.authentication.failure_handler:
        class:  StatSidekick\UserBundle\Handler\AuthenticationFailureHandler
        arguments:  ["@http_kernel", "@security.http_utils", {}, "@logger"]
        tags:
            - { name: 'monolog.logger', channel: 'security' } 
```

AuthenticationSuccessHandler.php

```
<?php
namespace StatSidekick\UserBundle\Handler;

use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Http\Authentication\DefaultAuthenticationSuccessHandler;
use Symfony\Component\Security\Http\HttpUtils;

class AuthenticationSuccessHandler extends DefaultAuthenticationSuccessHandler {

    public function __construct( HttpUtils $httpUtils, array $options ) {
        parent::__construct( $httpUtils, $options );
    }

    public function onAuthenticationSuccess( Request $request, TokenInterface $token ) {
        if( $request->isXmlHttpRequest() ) {
            $response = new JsonResponse( array( 'success' => true, 'username' => $token->getUsername() ) );
        } else {
            $response = parent::onAuthenticationSuccess( $request, $token );
        }
        return $response;
    }
} 
```

AuthenticationFailureHandler.php

```
<?php
namespace StatSidekick\UserBundle\Handler;

use Psr\Log\LoggerInterface;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpKernel\HttpKernelInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Http\Authentication\DefaultAuthenticationFailureHandler;
use Symfony\Component\Security\Http\HttpUtils;

class AuthenticationFailureHandler extends DefaultAuthenticationFailureHandler {

    public function __construct( HttpKernelInterface $httpKernel, HttpUtils $httpUtils, array $options, LoggerInterface $logger = null ) {
        parent::__construct( $httpKernel, $httpUtils, $options, $logger );
    }

    public function onAuthenticationFailure( Request $request, AuthenticationException $exception ) {
        if( $request->isXmlHttpRequest() ) {
            $response = new JsonResponse( array( 'success' => false, 'message' => $exception->getMessage() ) );
        } else {
            $response = parent::onAuthenticationFailure( $request, $exception );
        }
        return $response;
    }
} 
```

就我而言，我只是尝试设置一些东西，以便在尝试使用 AJAX 进行身份验证时获得 JSON 响应，但原理是相同的。

这种方法的好处是，无需任何额外工作，通常传递给默认处理程序的所有选项都应该正确注入。这是因为 SecurityBundle\DependencyInjection\Security\Factory 在框架中的设置方式：

```
protected function createAuthenticationSuccessHandler($container, $id, $config)
{
    ...
    $successHandler = $container->setDefinition($successHandlerId, new DefinitionDecorator('security.authentication.success_handler'));    
    $successHandler->replaceArgument(1, array_intersect_key($config, $this->defaultSuccessHandlerOptions));
    ...
}

protected function createAuthenticationFailureHandler($container, $id, $config)
{
    ...
    $failureHandler = $container->setDefinition($id, new DefinitionDecorator('security.authentication.failure_handler'));
    $failureHandler->replaceArgument(2, array_intersect_key($config, $this->defaultFailureHandlerOptions));
    ...
} 
```

它专门寻找`security.authentication.success_handler`并将`security.authentication.failure_handler`您的配置中的选项合并到传入的数组中。我确信有一种方法可以为您自己的服务设置类似的东西，但我还没有研究过。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:46:18.490

您可以在此文件中轻松查看默认安全侦听器的管理方式：

供应商/symfony/symfony/src/Symfony/Bundle/SecurityBundle/Resources/config/security_listeners.xml

例如， DefaultAuthenticationSuccessHandler 是这样注册的：

```
 <!-- Parameter -->

    <parameter key="security.authentication.success_handler.class">Symfony\Component\Security\Http\Authentication\DefaultAuthenticationSuccessHandler</parameter>

    <!-- Service -->

    <service id="security.authentication.success_handler" class="%security.authentication.success_handler.class%" abstract="true" public="false">
        <argument type="service" id="security.http_utils" />
        <argument type="collection" /> <!-- Options -->
    </service> 
```

所以最后我们可以看到选项集合默认是空的！

`options: {}`会做的工作^^（认为一个集合在yaml中由{}表示）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T13:38:54.417

## 要获得迄今为止最好的解决方案，请滚动到此答案的底部

好的，我终于让它以我想要的方式工作。问题是 Symfony2 在`security.yml`设置自定义处理程序时没有将配置数组从构造函数传递给构造函数。所以我所做的是：

1）我从`security.yml`

```
firewalls:
    dev:
      pattern:  ^/(_(profiler|wdt)|css|images|js)/
      security: false

secured_area:
    pattern:   ^/
    anonymous: ~
    form_login:
        login_path:  pkr_blog_admin_login
        check_path:  pkr_blog_admin_login_check
    logout:
        path: pkr_blog_admin_logout
        target: / 
```

2)`AuthenticationSuccessHandler`扩展默认处理程序类，重新哈希用户密码，最后让默认处理程序完成其余工作。在构造函数中添加了两个新参数：

```
#/src/Pkr/BlogUserBundle/Handler/AuthenticationSuccessHandler.php
namespace Pkr\BlogUserBundle\Handler;
use Doctrine\ORM\EntityManager;
use Pkr\BlogUserBundle\Service\Encoder\WpTransitionalEncoder;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpKernel\Log\LoggerInterface;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Http\Authentication\DefaultAuthenticationSuccessHandler;
use Symfony\Component\Security\Http\Authentication\Response;
use Symfony\Component\Security\Http\HttpUtils;

class AuthenticationSuccessHandler extends DefaultAuthenticationSuccessHandler
{

    protected $entityManager = null;
    protected $logger = null;
    protected $encoder = null;

    public function __construct(
        HttpUtils $httpUtils,
        array $options,
        // new arguments below
        EntityManager $entityManager = null, # entity manager
        WpTransitionalEncoder $encoder = null
    )
    {
        $this->entityManager = $entityManager;
        $this->encoder = $encoder;
        parent::__construct($httpUtils, $options);
    }

    /**
    * This is called when an interactive authentication attempt succeeds. This
    * is called by authentication listeners inheriting from
    * AbstractAuthenticationListener.
    *
    * @param Request $request
    * @param TokenInterface $token
    *
    * @return Response never null
    */
    public function onAuthenticationSuccess(Request $request, TokenInterface $token)
    {
        $user = $token->getUser();
        if (preg_match('^\$P\$', $user->getUserPassword())) {
            $newPass = $request->get('_password');
            $user->setUserPassword($this->encoder->encodePassword($newPass, null));
            $this->entityManager->persist($user);
            $this->entityManager->flush();
        }
        return parent::onAuthenticationSuccess($request, $token);
    }
} 
```

3）添加并更改了我的一些参数，`services.yml`以便我可以在我的编译器传递类中使用它们：

```
#/src/Pkr/BlogUserBundle/Resources/config/services.yml
parameters:
    pkr_blog_user.wp_transitional_encoder.cost: 20
    # password encoder class
    pkr_blog_user.wp_transitional_encoder.class: Pkr\BlogUserBundle\Service\Encoder\WpTransitionalEncoder
    # authentication success handler class
    pkr_blog_user.login_success_handler.class: Pkr\BlogUserBundle\Handler\AuthenticationSuccessHandler
    # entity manager service name
    pkr_blog_user.login_success_handler.arg.entity_manager: doctrine.orm.entity_manager
    # encoder service name
    pkr_blog_user.login_success_handler.arg.encoder: pkr_blog_user.wp_transitional_encoder

services:
    pkr_blog_user.wp_transitional_encoder:
        class: "%pkr_blog_user.wp_transitional_encoder.class%"
        arguments:
            cost: "%pkr_blog_user.wp_transitional_encoder.cost%"
            logger: @logger
    pkr_blog_user.login_success_handler:
        class: "%pkr_blog_user.login_success_handler.class%" 
```

4) 创建了一个编译器传递类，该类`RehashPasswordPass`更改默认的身份验证成功处理程序并向构造函数添加一些参数：

```
#/src/Pkr/BlogUserBundle/DependencyInjection/Compiler/RehashPasswordPass.php
namespace Pkr\BlogUserBundle\DependencyInjection\Compiler;
use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Reference;

class RehashPasswordPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        if ($container->hasDefinition('security.authentication.success_handler')) {
            // definition of default success handler
            $def = $container->getDefinition('security.authentication.success_handler');
            // changing default class
            $def->setClass($container->getParameter('pkr_blog_user.login_success_handler.class'));
            $entityMngRef = new Reference(
                $container->getParameter("pkr_blog_user.login_success_handler.arg.entity_manager")
            );
            // adding entity manager as third param to constructor
            $def->addArgument($entityMngRef);
            $encoderRef = new Reference(
                $container->getParameter("pkr_blog_user.login_success_handler.arg.encoder")
            );
            // adding encoder as fourth param to constructor
            $def->addArgument($encoderRef);
        }
    }
} 
```

5) 向容器构建器添加编译器传递：

```
#/src/Pkr/BlogUserBundle/PkrBlogUserBundle.php
namespace Pkr\BlogUserBundle;

use Pkr\BlogUserBundle\DependencyInjection\Compiler\RehashPasswordPass;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\HttpKernel\Bundle\Bundle;

class PkrBlogUserBundle extends Bundle
{
    public function build(ContainerBuilder $container)
    {
        $container->addCompilerPass(new RehashPasswordPass());
    }
} 
```

现在默认处理程序类已更改，但 symfony 仍会将配置从构造函数传递`security.yml`给构造函数以及编译器传递添加的两个新参数。

# 更好的方法

> 事件处理程序作为带有设置器的服务

```
#/src/Pkr/BlogUserBundle/Resources/config/services.yml
parameters:
    pkr_blog_user.wp_transitional_encoder.cost: 15
    # password encoder class
    pkr_blog_user.wp_transitional_encoder.class: Pkr\BlogUserBundle\Service\Encoder\WpTransitionalEncoder
    # authentication success handler class
    pkr_blog_user.authentication_success_handler.class: Pkr\BlogUserBundle\EventHandler\AuthenticationSuccessHandler

services:
    pkr_blog_user.wp_transitional_encoder:
        class: "%pkr_blog_user.wp_transitional_encoder.class%"
        arguments:
            cost: "%pkr_blog_user.wp_transitional_encoder.cost%"
            logger: @logger

    pkr_blog_user.authentication_success_handler:
        class: "%pkr_blog_user.authentication_success_handler.class%"
        calls:
            - [ setRequest, [ @request ]]
            - [ setEntityManager, [ @doctrine.orm.entity_manager ]]
            - [ setEncoder, [ @pkr_blog_user.wp_transitional_encoder ]]
        tags:
            - { name: kernel.event_listener, event: security.authentication.success , method: handleAuthenticationSuccess } 
```

> 事件处理程序类

```
# /src/Pkr/BlogUserBundle/EventHandler/AuthenticationSuccessHandler.php
namespace Pkr\BlogUserBundle\EventHandler;
use Doctrine\ORM\EntityManager;
use Pkr\BlogUserBundle\Service\Encoder\WpTransitionalEncoder;
use Symfony\Component\EventDispatcher\Event;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Security\Core\Event\AuthenticationEvent;

class AuthenticationSuccessHandler {

    protected $entityManager = null;
    protected $encoder = null;

    public function setRequest(Request $request)
    {
        $this->request = $request;
    }

    public function setEntityManager(EntityManager $entityManager)
    {
        $this->entityManager = $entityManager;
    }

    public function setEncoder(WpTransitionalEncoder $encoder)
    {
        $this->encoder = $encoder;
    }

    public function handleAuthenticationSuccess(AuthenticationEvent $event)
    {
        $token = $event->getAuthenticationToken();
        $user = $token->getUser();
        if (preg_match('^\$P\$', $user->getUserPassword())) {
            $newPass = $this->request->get('_password');
            $user->setUserPassword($this->encoder->encodePassword($newPass, null));
            $this->entityManager->persist($user);
            $this->entityManager->flush();
        }
    }

} 
```

一切正常，无需编译器通过。为什么我一开始就没有想到...

## 呃，symfony 更新后它停止工作了

现在我得到异常：

`ScopeWideningInjectionException: Scope Widening Injection detected: The definition "pkr_blog_user.authentication_success_handler" references the service "request" which belongs to a narrower scope. Generally, it is safer to either move "pkr_blog_user.authentication_success_handler" to scope "request" or alternatively rely on the provider pattern by injecting the container itself, and requesting the service "request" each time it is needed. In rare, special cases however that might not be necessary, then you can set the reference to strict=false to get rid of this error.`

看来我需要将完整的容器传递给我的服务。所以我修改了`services.yml`事件处理程序类。

```
#/src/Pkr/BlogUserBundle/Resources/config/services.yml
parameters:
    pkr_blog_user.wp_transitional_encoder.cost: 15
    # password encoder class
    pkr_blog_user.wp_transitional_encoder.class: Pkr\BlogUserBundle\Service\Encoder\WpTransitionalEncoder
    # authentication success handler class
    pkr_blog_user.authentication_success_handler.class: Pkr\BlogUserBundle\EventHandler\AuthenticationSuccessHandler

services:
    pkr_blog_user.wp_transitional_encoder:
        class: "%pkr_blog_user.wp_transitional_encoder.class%"
        arguments:
            secure: @security.secure_random
            cost: "%pkr_blog_user.wp_transitional_encoder.cost%"

    pkr_blog_user.authentication_success_handler:
        class: "%pkr_blog_user.authentication_success_handler.class%"
        arguments:
            container: @service_container
        tags:
            - { name: kernel.event_listener, event: security.authentication.success , method: handleAuthenticationSuccess } 
```

> 和事件处理程序

```
# /src/Pkr/BlogUserBundle/EventHandler/AuthenticationSuccessHandler.php
namespace Pkr\BlogUserBundle\EventHandler;
use Symfony\Component\DependencyInjection\ContainerInterface;
use Symfony\Component\Security\Core\Event\AuthenticationEvent;

class AuthenticationSuccessHandler
{

    /**
     * @var ContainerInterface
     */
    protected $container;

    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    public function handleAuthenticationSuccess(AuthenticationEvent $event)
    {
        $request = $this->container->get('request');
        $em = $this->container->get('doctrine.orm.entity_manager');
        $encoder = $this->container->get('pkr_blog_user.wp_transitional_encoder');
        $token = $event->getAuthenticationToken();
        $user = $token->getUser();
        if (preg_match('/^\$P\$/', $user->getUserPassword())) {
            $newPass = $request->get('_password');
            $user->setUserPassword($encoder->encodePassword($newPass, null));
            $em->persist($user);
            $em->flush();
        }
    }

} 
```

它再次起作用。

## 迄今为止最好的方式

在@dmccabe 写下他的[解决方案](https://stackoverflow.com/questions/15918617/symfony2-extending-defaultauthenticationsuccesshandler#17001496)之前，我知道上面的解决方案是最好的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-13T12:27:37.313

不幸的是，通过使用`success_handler`安全配置中的选项，您无法提供扩展的自定义侦听器`DefaultAuthenticationSuccessHandler`。

直到这个问题得到解决：[Symfony 问题 - [2.1][Security] Custom AuthenticationSuccessHandler](https://github.com/symfony/symfony/issues/5432)

在那之前，最简单的解决方案是`@dmccabe`建议的：

`security.authentication.success_handler`只要您不需要多个防火墙的多个处理程序，全局覆盖就可以了。

如果您这样做（在撰写本文时），您必须[编写自己的 Authentication Provider](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-08T23:34:20.147

实际上，最好的方法是将默认身份验证处理程序扩展为服务

```
 authentication_handler:
      class: AppBundle\Service\AuthenticationHandler
      calls: [['setDoctrine', ['@doctrine']]]
      parent: security.authentication.success_handler
      public: false 
```

AuthenticationHandler 类看起来像

```
class AuthenticationHandler extends DefaultAuthenticationSuccessHandler
{
    /**
     * @var Registry
     */
    private $doctrine;

    public function setDoctrine(Registry $doctrine)
    {
        $this->doctrine = $doctrine;
    }

    /**
     * This is called when an interactive authentication attempt succeeds. This
     * is called by authentication listeners inheriting from
     * AbstractAuthenticationListener.
     *
     * @param Request $request
     * @param TokenInterface $token
     *
     * @return Response never null
     */
    public function onAuthenticationSuccess(Request $request, TokenInterface $token)
    {
        // do whatever you like here
        // ...

        // call default success behaviour
        return parent::onAuthenticationSuccess($request, $token);
    }
} 
```

# android - Increment the textview value on button click in listview

> ID：15918619
> 
> 赞同：3
> 
> 时间：2013-04-10T06:34:41.210
> 
> 标签：android, android-listview, textview, android-button

I have a `button` and `textview` together in `listview` row. I want to increment the textview value while click the button in the same row. Below is my code, here its updating multiple rows instead of single row,where I need to.

```
package com.example.digitalmenuactivity;

public class ListAdapter extends BaseAdapter   {

private Activity activity;
private Activity activity1;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader;

private int mCounter1=1;
private int counter=1;
private int[] counters;
int pos;

public ListAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
    counters = new int[5];
}

static class ViewHolder {

   protected TextView mSwitcher1=null;
    protected Button btnDelete=null;
    protected TextView title=null;
    protected TextView artist=null;
    protected TextView duration=null;
    protected ImageView thumb_image=null;

}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}
@Override
public int getItemViewType(int position) {
    // TODO Auto-generated method stub
    return position;
} 

public View getView(final int position,final View convertView, ViewGroup parent) {
    View vi=convertView;
    final ViewHolder viewHolder;
    pos = getItemViewType(position);
    if(convertView==null)
    {
      vi = inflater.inflate(R.layout.list_row, null);

      viewHolder = new ViewHolder();
      viewHolder.title = (TextView)vi.findViewById(R.id.title);
      viewHolder.artist = (TextView)vi.findViewById(R.id.description); 
      viewHolder.duration = (TextView)vi.findViewById(R.id.price);
      viewHolder.thumb_image =(ImageView)vi.findViewById(R.id.list_image); 

    viewHolder.btnDelete = (Button)vi.findViewById(R.id.plus);
    viewHolder.mSwitcher1 = (TextView) vi.findViewById(R.id.switcher1);

    vi.setTag(viewHolder);

    }
    else {
        viewHolder = (ViewHolder) vi.getTag();
    }
    viewHolder.btnDelete.setTag(pos);
    viewHolder.mSwitcher1.setTag(pos);

    viewHolder.btnDelete.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {

             pos = (Integer) view.getTag();

            int temp=counters[pos];
            temp++;
            counters[pos]= temp;

            viewHolder.mSwitcher1.setText(String.valueOf(counters[pos]));
            notifyDataSetChanged();

            Log.d("^^^^^^", "button clicked" + counters.length);
            Log.d("^^^^^^", "temp" + temp);

        }

        });
    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    viewHolder.title.setText(song.get(FoodActivity.KEY_TITLE));
    viewHolder.artist.setText(song.get(FoodActivity.KEY_ARTIST));
    viewHolder.duration.setText(song.get(FoodActivity.KEY_DURATION));
    imageLoader.DisplayImage(song.get(FoodActivity.KEY_THUMB_URL),viewHolder.thumb_image);
    return vi;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:03:51.403

你没有犯错：下面列出：

**第一的**

用过的：

> viewHolder.mSwitcher1.setTag(位置);

反而：

> viewHolder.mSwitcher1.setTag(Integer.valueOf(position));

**第二**

无需两次获取视图*标签*，一次即可获得准确的选定位置，适配器代码如下所示：

列表视图适配器：

```
import java.util.ArrayList;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.TextView;

public class ListviewAdapter extends BaseAdapter {
    ArrayList<String> getData = new ArrayList<String>();
    Context c;
    private LayoutInflater mInflater;
    int pos;
    int boxState[];
    SharedPreferences prefs;

    private int mCounter1 = 1;
    private int counter = 1;
    private int[] counters;

    public ListviewAdapter(Context cont, ArrayList<String> data) {
        // TODO Auto-generated constructor stub
        c = cont;
        getData = data;
        mInflater = LayoutInflater.from(cont);

        counters = new int[5];

    }

    public int getCount() {
        // TODO Auto-generated method stub
        return getData.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public class ViewHolder {
        private TextView name = null;
        private Button button = null;

    }

    @Override
    public int getItemViewType(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public int getViewTypeCount() {
        // TODO Auto-generated method stub
        return getData.size();
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        final ViewHolder holder;
        View vi = convertView;
        pos = getItemViewType(position);

        if (convertView == null) {

            vi = mInflater.inflate(R.layout.row, null);

            holder = new ViewHolder();

            holder.name = (TextView) vi.findViewById(R.id.textView);
            holder.button = (Button) vi.findViewById(R.id.checkBox);

            vi.setTag(holder);
        }

        else {
            holder = (ViewHolder) vi.getTag();
        }

        holder.button.setTag(pos);
        holder.name.setTag(pos);

        holder.button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                pos = (Integer) v.getTag();

                int temp = counters[pos];
                temp++;
                counters[pos] = temp;

                notifyDataSetChanged();
                holder.name.setText(String.valueOf(counters[pos]));

                Log.d("^^^^^^", "button clicked" + counters.length);
                Log.d("^^^^^^", "temp" + temp);

            }
        });

        return vi;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:06:27.587

而且您错误地使用了 ViewHolder 模式。读这个：

[http://www.jmanzano.es/blog/?p=166](http://www.jmanzano.es/blog/?p=166)

# c++ - 将指向您自己的指针传递给您拥有的对象的替代方法

> ID：15918620
> 
> 赞同：7
> 
> 时间：2013-04-10T06:34:44.983
> 
> 标签：c++, design-patterns, reference

我经常这样做：

```
class Child{
  Control*parent;
public:
  Child(Control*theParent):parent(theParent){}
 };

class Control{
 Child child;
 void makeChild(){ child=Child(this); }
 //Control() : child(this) { }  //another example
 } 
```

所以控件拥有并操作子控件，但是子控件仍然有对父控件的引用。

当我阅读有关程序设计模式等的一般主题时，似乎并不特别推荐这种组织对象的方法。我意识到存在风险，例如，您不希望您`child`通过让其父母做只有父母应该自己决定做的事情来滥用其父母；在这种情况下，通过确保父母的关键方法是私有的，似乎很容易防止。但是你可能有另一个控制器来管理父级，在这种情况下，一些方法应该是公共的，现在你的孩子也可以访问这些，而实际上只有其他一些控制器应该操纵这些。

所以我可以看到这有多危险。

但我的问题是，**什么是常见的替代方案**？您需要父母拥有孩子，但您需要孩子能够偶尔通知父母。**如果不是上述情况，怎么办？**

Objective-C 有 NSNotificationCenter 允许通知而不实际传递引用，但这也很容易造成组织问题（为什么我的孩子会发出这个通知，谁会收到它？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:45:35.570

您可以通过接口将它们分开：

```
class IListener {
public:
    virtual void notify (int somevalue) = 0;
    ~IListener() {};
}

class Child{
private:
    IListener *listener;
public:
    Child(IListener *theListener):listener(theListener){}
};

class Control: public IListener {
private:
    Child child;
public:
    makeChild(){ child(this) };
    virtual void notify(int someValue) { doSomething(someValue);};
} 
```

（这是观察者模式的简单版本，顺便说一句）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:43:19.923

听起来您正在寻找观察者模式。

在观察者模式中，一个对象维护一个依赖列表（也称为观察者），并根据需要通知他们更改。在您的情况下，`Control`类是观察者，`Child`类是通知者。

Boost 库有一个信号/槽机制，可用于实现这一点：http: [//www.boost.org/doc/libs/1_49_0/doc/html/signals/tutorial.html#id3137144](http://www.boost.org/doc/libs/1_49_0/doc/html/signals/tutorial.html#id3137144)

有一个在 SO 上使用它的例子： [Complete example using Boost::Signals for C++ Eventing](https://stackoverflow.com/questions/768351/complete-example-using-boostsignals-for-c-eventing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:52:50.717

抛出另一个想法，似乎[Friend 类](http://en.wikipedia.org/wiki/Friend_class)也可以在这方面走很长的路。

孩子不应该使用的方法是制作`private`或`protected`。这样孩子就不会造成任何你不希望它造成的伤害。

然后，如果您需要另一个类来管理您的父控制器，则您的父类将另一个类设为 a `friend`，以便它可以访问您对子控制器保留的所有私有方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:20:08.483

> 当我阅读有关程序设计模式等的一般主题时，似乎并不特别推荐这种组织对象的方法。

这是错误的，因为[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)。您可以将其创建为`Child`的成员变量。Martin Fowler 有一篇[非常好的文章](http://martinfowler.com/articles/injection.html)解释了一种控制反转（依赖注入）。

下面是一个简单解释如何实现依赖注入（通过构造函数注入依赖）的例子：

```
#include <iostream>

struct B
{

    virtual ~B(){}
    virtual void foo() = 0;
};
struct A1 : public B
{
    virtual ~A1(){}
    virtual void foo()
    {
        std::cout<<"hello"<<std::endl;
    }
};
struct A2 : public B
{
    virtual ~A2(){}
    virtual void foo()
    {
        std::cout<<"test"<<std::endl;
    }
};

struct C
{
    C( B &b_ ) : b(b_){}

    void bar()
    {
      b.foo();
    }

    B &b;
};

#define SAY_HI

int main()
{
#ifdef SAY_HI
    A1 a;
#else
    A2 a;
#endif
    C c(a);

    c.bar();
} 
```

* * *

如果您考虑设计模式，您会注意到其中一些使用某种控制反转。以下是一些众所周知的（来自[此链接](http://calumgrant.net/patterns/)）：

*   [观察者](http://calumgrant.net/patterns/observer.cpp)
*   [装饰师](http://calumgrant.net/patterns/decorator.cpp)

* * *

顺便说一句，你所拥有的叫做[责任链](http://calumgrant.net/patterns/chain_of_responsibility.cpp)。

# grails - How to write connection script between Grails and Hadoop?

> ID：15918647
> 
> 赞同：0
> 
> 时间：2013-04-10T06:36:15.633
> 
> 标签：grails, hadoop, mapreduce

I need to copy the files which are generated within Grails to Hadoop dynamically. How will I write code for this in Grails? Whenever a file is generated it should be copied into Hadoop. If the incoming file already exists, it should get updated in Hadoop.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T06:36:37.863

I used shell script to connect grails and hadoop.

I had all the commands to run hadoop jobs in `myjob.sh` (Workflow Script)

And i added the code to execute shell script in my controller

```
def scriptCom="/folderlocation/shellscript.sh"

println "[[Running $scriptCom]]"
def proc = scriptCom.execute()

def oneMinute = 60000
proc.waitForOrKill(oneMinute)

if(proc.exitValue()!=0){
    println "[[return code: ${proc.exitValue()}]]"
    println "[[stderr: ${proc.err.text}]]"
    return null
}else{
    println "[[stdout:$revisionid]]"
    return proc.in.text.readLines()
} 
```

# spring - Spring：从不同的项目注入服务

> ID：15918649
> 
> 赞同：1
> 
> 时间：2013-04-10T06:36:26.147
> 
> 标签：spring, code-injection

在我们团队正在进行的项目中，我们目前有 3 个使用相同服务的独立 Spring 项目。为了避免冗余和代码复制粘贴，我们计划创建一个“公共”项目，其中所有三个项目都依赖于公共项目。在这种情况下，是否可以将这些服务（可能使用@Service 注解）注入到 Spring 项目的控制器中？

编辑：

我尝试自己实现它，我基本上所做的就是配置 pom.xml 以获取我的“通用”项目的 Spring Context 3.1.1 依赖项（我的 Spring 项目也使用它）。这样，我就可以用@Service 注释我的服务了。之后，在我的 Spring 项目中，我将组件扫描设置为我的两个项目会遇到的级别。在我的 Spring 控制器上，我 @Autowired 来自“common”项目的服务。我运行了 Spring 项目，显然它有效。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:31:21.860

这绝对没问题，而且很标准。Spring（与 CDI 不同）不在乎您的 bean 是来自当前项目还是来自导入的 jar。

# matlab - 从 FFT 中提取信号的频率

> ID：15918651
> 
> 赞同：0
> 
> 时间：2013-04-10T06:36:41.680
> 
> 标签：matlab, diff, fft, frequency, spectrum

我是*Matlab*和*FFT*的新手。
我需要从幅度和频率变化的信号中提取主频率。我尝试执行去*趋势*，然后执行*FFT*以获得频率，但无法摆脱 0Hz 处的大峰值（直流分量？）。我对信号使用了*diff*函数，结果信号通过*FFT*处理。在这种情况下，*FFT*输出没有峰值为零。我比较了两条*FFT*曲线，似乎除了零处的峰值外，两者显示出相似（不相同）的光谱。我想知道是否*差异*函数是一种有效（并且非常有效）的去趋势方法，还是我在这里丢失了一些信息？换句话说，区分信号是否对其频率有任何影响：[ `diff(sin(omega.t))= cos(omega.t)`- 频率没有变化]？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:20:57.540

通过区分信号，您实际上应用了一种高通滤波器，一种不那么智能的高通滤波器，它会破坏您的信号。相反，您可以尝试其他一些过滤器，例如：

```
b=fir1(32,2*0.01/fs,'high');
a=1;
FilteredX=filtfilt(x,a,b) 
```

在哪里：

x 是您的原始信号，

FilteredX 是滤波后的信号。

fs - 你的采样频率。

这样，您将滤除任何低于 0.01 的频率，并且几乎不会损害频谱的其余部分，从而使您可以根据需要检测峰值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:33:08.137

`X`信号的离散傅立叶变换`x`定义为（直至缩放）

```
X(k) = Sum[ exp(2*pi*i*k*n/N) * x(n) ] 
```

如果我们对你得到的信号进行第一次差分

```
Sum[ exp(2*pi*i*k*n/N) * (x(n) - x(n-1)) ] 
```

你可以重新安排给

```
(1 - exp(2*pi*i*k/N)) * Sum[ exp(2*pi*i*k*n/N) * x(n) ] 
```

即它是原始傅立叶变换的倍数。在这种`k = 0`情况下（即零频率分量），乘数为零，这解释了为什么这会消除 处的尖峰`k = 0`。

但是请注意，乘数取决于 的值`k`，因此您不会得到相同的信号 - 您不能只采用一阶差分来消除尖峰。可以与连续傅立叶变换进行比较，其中如果*g = F(f)*且*h = F(df/dx)*，则

```
h(k) = i * k * g(k) 
```

即导数的傅立叶变换是原函数的傅立叶变换，乘以*ik*。

# sql-server - SQL Server 案例 input_expression

> ID：15918653
> 
> 赞同：1
> 
> 时间：2013-04-10T06:36:51.200
> 
> 标签：sql-server, tsql, ssms

简单`CASE`表达式的语法在 Microsoft 文档中如下所示；

```
CASE input_expression 
     WHEN when_expression THEN result_expression [ ...n ] 
     [ ELSE else_result_expression ] 
END 
```

是否可以在不第二次重写查询的情况下执行以下`input_expression`操作？

```
CASE input_expression 
     WHEN when_expression THEN result_expression [ ...n ] 
     [ ELSE **input_expression** ] 
END 
```

谢谢！

编辑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:54:20.160

**如果** `input_expression`不能`NULL`，**并且**只有一个`WHEN`分支，那么您可以编写：

```
COALESCE(NULLIF(input_expression,when_expression),result_expression) 
```

否则，如果 的复杂性`input_expression`太大，请考虑将其计算移到子查询中。所以，而不是：

```
SELECT
CASE input_expression 
     WHEN when_expression THEN result_expression [ ...n ] 
     ELSE input_expression 
END,
--Other columns
FROM
   --Rest of query 
```

你将会拥有：

```
SELECT
CASE ie
     WHEN when_expression THEN result_expression [ ...n ] 
     ELSE ie
END,
--Other columns
FROM
   (
   SELECT
      input_expression as ie,
      --Other columns
   FROM
      --Rest of query
   ) t 
```

# c++ - 自定义字体仅在第一次使用 QML 时有效

> ID：15918654
> 
> 赞同：1
> 
> 时间：2013-04-10T06:36:55.207
> 
> 标签：c++, qt, fonts, symbian, qml

我真的很挣扎，不知道如何解决这个问题。

这是代码。

**我在 symbian ^3 (belle) 上运行它**

**我有 2 种需要使用的自定义字体。**

```
In the example below i have created 3 buttons.
1\. Display gurbaniwebthick.ttf
2\. Display GurHindi.ttf.
3\. Quit. 
```

**这适用于 N9**

我单击第一个按钮，然后单击文本文件，它显示 Pubjabi 中的第一行。

单击第二个按钮，然后单击文本字段，它以印地语显示第一行。

**当我退出该应用程序然后再次运行该应用程序时，不会应用字体。就像它无法锁定文件一样。**

**请告知如何解决此问题。**

```
import QtQuick 1.1
import com.nokia.symbian 1.1
Rectangle {
width: 360
height: 640
property string displaystr
property string displaystr1

FontLoader { id: localGurFont; source: "qrc:/gurbaniwebthick.ttf"}
FontLoader { id: localHinFont; source: "qrc:/Gurhindi.ttf"}
Column {
    ButtonColumn {
        checkedButton: b1
        spacing: 5
        Button{
            id:b1
            text:"<> siq nwmu krqw purKu"
            font.family: localGurFont.name
            //font.family: "Gurmukhi";
            onClicked: {
                displaystr1 =  '<font face= "'+localGurFont.name+'" size="6" color="black">kYsI AwrqI hoie Bv KMfnw qyrI AwrqI ]</font><br><br><font face= "Ariel" size="5" color="red">What A Beautiful Lamp-Lit Worship Service This Is! O Destroyer Of Fear, This Is Your Aartee, You r Worship Service.</font><br><br><font face= "Ariel" size="5" color="blue">Kehsi Aarti Hoee Bhv Khandna Teyri Aarti |</font>';
                console.log(displaystr);
            }
        }
        Button{
            id:b6
            text:"< siq nwmu krqw purKu"
            font.family: localHinFont.name
            onClicked: {

                displaystr1 = '<font face= "'+localHinFont.name+'" size="6" color="black">kYsI AwrqI hoie Bv KMfnw qyrI AwrqI ]</font><br><br><font face= "Ariel" size="5" color="red">What A Beautiful Lamp-Lit Worship Service This Is! O Destroyer Of Fear, This Is Your Aartee, You r Worship Service.</font><br><br><font face= "Ariel" size="5" color="blue">Kehsi Aarti Hoee Bhv Khandna Teyri Aarti |</font>';
                console.log(displaystr);

            }
        }

        Button{
            id:b7
            text:"Quit"
            onClicked: {
                Qt.quit();
            }
        }
    }
    TextArea {
        id: t1
        width: 360
        height: 360
        text: displaystr
        wrapMode:Text.WordWrap

        MouseArea {
            anchors.fill: parent
            onClicked: {
                displaystr = displaystr1;
                console.log(displaystr1);
            }
        }
    }
}
} 
```

**列表视图也存在同样的问题** // import QtQuick 1.0 // 以 S60 5th Edition 或 Maemo 5 为目标 import QtQuick 1.1 import com.nokia.symbian 1.1

```
Rectangle {
id: initialRect
height: 640
width: 360
property string fontName
// color: "black"
FontLoader { id: localGurFont; source: "qrc:/gurbaniwebthick.ttf"}
FontLoader { id: localHinFont; source: "qrc:/Gurhindi.ttf"}
    ListModel {
        id: contactModel
        ListElement {
            baani: 'kYsI AwrqI hoie Bv KMfnw qyrI AwrqI ]'
            displayColor: 'black'
            displayfont: 'GurbaniWebThick'
        }
        ListElement {
            baani: 'What A Beautiful Lamp-Lit Worship Service This Is! O Destroyer Of Fear, This Is Your Aartee,ou r Worship Service.'
            displayColor: 'red'
            displayfont: 'Arial'
        }
        ListElement {
            baani: 'Kehsi Aarti Hoee Bhv Khandna Teyri Aarti |'
            displayColor: 'blue'
            displayfont: 'Arial'
        }
        ListElement {
            baani: 'kYsI AwrqI hoie Bv KMfnw qyrI AwrqI ]'
            displayColor: 'black'
            displayfont: 'GurbaniWebThick'
        }
        ListElement {
            baani: 'What A Beautiful Lamp-Lit Worship Service This Is! O Destroyer Of Fear, This Is Your Aartee,ou r Worship Service.'
            displayColor: 'red'
            displayfont: 'Arial'
        }
        ListElement {
            baani: 'Kehsi Aarti Hoee Bhv Khandna Teyri Aarti |'
            displayColor: 'blue'
            displayfont: 'Arial'
        }
    }

    Component {
        id: baaniDelegate
        Item {
            width: parent.width ; height:parent.height/contactModel.count
            Text {
                width: parent.width
                text: baani
                font.family: displayfont
                color: displayColor
                wrapMode:  Text.WordWrap
            }
        }
    }

    ListView{

        anchors.fill: parent
        model: contactModel
        delegate: baaniDelegate
        // highlight: Rectangle { color: "lightsteelblue"; radius:5}
        // focus: true
    }
                Button{
                    id:b7
                    text:"Quit"
                    onClicked: {
                        Qt.quit();
                        localHinFont.deleteLater;
                        localGurFont.deleteLater;
                        localGurFont.Null;
                        localHinFont.Null;
                    }
                }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:10:37.730

解决了

**SymbianFontLoader.h**

```
#ifndef SYMBIANFONTLOADER_H
#define SYMBIANFONTLOADER_H

#include <QString>
#include <coemain.h>
#include <w32std.h>
#include <badesca.h>
#include <gulutil.h>

class SymbianFontLoader
{
public:
    SymbianFontLoader(bool retainFonts = false) {

        m_retainFonts = retainFonts;
        m_screenDevice = CCoeEnv::Static()->ScreenDevice();

    }

    ~SymbianFontLoader() {

        if (!m_retainFonts)
            foreach(int id, m_fontIds)
                m_screenDevice->RemoveFile(id);
    }

    QStringList loadedFonts() {

        QStringList fonts;
        TRAPD(err, listFontsL(fonts));

        qt_symbian_throwIfError(err);
        return fonts;
    }

    void load(QString  path) {

        qDebug() <<";"<<path<<";";
        TPtrC fontFile(path.utf16(), path.length());
        //    TPtrC fontFile(qt_QString2TPtrC(path));
        //TPtrC fontFile(path, path.length());
        qDebug()<<"path" << path.utf16() << "length" <<path.length();

        int fontId;
        int err = m_screenDevice->AddFile(fontFile, fontId);
        qDebug() <<err;

        qt_symbian_throwIfError(err);
        qDebug() <<  "after error";
        if (!m_retainFonts)
            m_fontIds << fontId;

    }

private:

    void listFontsL(QStringList& fonts) {

        CDesCArrayFlat *fontNames = new (ELeave) CDesCArrayFlat(5);

        CleanupStack::PushL(fontNames);

        FontUtils::GetAvailableFontsL(*m_screenDevice, *fontNames, EGulAllFonts);

        int fontCount = fontNames->Length();

        for (int i=0; i < fontCount; i++) {

            TPtrC fontName = fontNames->MdcaPoint(i);

            QString font = QString::fromUtf16(fontName.Ptr(), fontName.Length());

            fonts << font;
        }
        CleanupStack::PopAndDestroy();
    }

private:
    CWsScreenDevice* m_screenDevice;
    bool m_retainFonts;

    QList<int> m_fontIds;
};

#endif // SYMBIANFONTLOADER_H 
```

**主文件**

```
#ifdef Q_OS_SYMBIAN
    SymbianFontLoader fontLoader(true);

    fontLoader.load("C:\\data\\2006126c\\gurbaniwebthick.ttf");

    fontLoader.load("C:\\data\\2006126c\\Gurhindi.ttf");

#endif 
```

确保重新启动手机。

**。轮廓**

```
LIBS += -lcone -lws32 -lbafl -legul

font_files.pkg_postrules += “\“C:\\QTproj\\QTDeploy\\gurbaniwebthick.ttf\” – \“C:\\data\\2006126c\\gurbaniwebthick.ttf\”“
font_files.pkg_postrules += “\“C:\\QTproj\\QTDeploy\\Gurhindi.ttf\” – \“C:\\data\\2006126c\\Gurhindi.ttf\”“

DEPLOYMENT += font_files my_deployment 
```

# php - SQL 查询失败

> ID：15918655
> 
> 赞同：1
> 
> 时间：2013-04-10T06:37:00.270
> 
> 标签：php, mysql, sql

我希望查询最初返回 c_id>0 的所有记录，然后根据通过文本框提供的后续条件进行过滤。但是，第一次访问该页面时，我没有打印任何记录。这是代码：

```
$ctitle = mysql_real_escape_string($_POST['ctitle']);
$csubject = mysql_real_escape_string($_POST['csubject']);
$creference = mysql_real_escape_string($_POST['creference']);
$cobjecttype = mysql_real_escape_string($_POST['cobjecttype']);
$cmaterial = mysql_real_escape_string($_POST['cmaterial']);
$ctechnic = mysql_real_escape_string($_POST['ctechnic']);
$cartist = mysql_real_escape_string($_POST['cartist']);
$csource = mysql_real_escape_string($_POST['csource']);

    $sql = "SELECT * FROM collections WHERE (
    c_id>0 AND
    `ctitle` LIKE '{$ctitle}' AND
    `csubject` LIKE '{$csubject}' AND
    `creference` LIKE '{$creference}' AND
    `cobjecttype` LIKE '{$cobjecttype}' AND
    `cmaterial` LIKE '{$cmaterial}' AND
    `ctechnic` LIKE '{$ctechnic}' AND
    `csource` LIKE '{$csource}' AND
    `cartist` LIKE '{$cartist}'
    )ORDER BY c_id DESC"; 
```

当我回显查询时，我会打印以下内容：

```
request "Could not execute SQL query" SELECT * FROM collections WHERE ( c_id>0 AND `ctitle` LIKE '' AND `csubject` LIKE '' AND `creference` LIKE '' AND `cobjecttype` LIKE '' AND `cmaterial` LIKE '' AND `ctechnic` LIKE '' AND `csource` LIKE '' AND `cartist` LIKE '' )ORDER BY c_id DESC 
```

我应该从这里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:38:57.093

`)`在和之间放一个空格`ORDER BY`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:40:04.997

您不需要在 tow where 子句元素周围使用大括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T23:58:10.523

好的...我想我明白了...尝试用 LIKE '%' 替换LIKE **'** **'**

 ****LIKE ''**不起作用，因为它只显示空列。通过**添加通配符**(%)，它将显示与所有内容匹配的所有行。但是，完全动态地构建查询，省略空的 WHERE 条件，这可能是一个更好、更简洁的解决方案。**

# google-chrome - 端口错误：无法建立连接。接收端不存在。

> ID：15918660
> 
> 赞同：1
> 
> 时间：2013-04-10T06:37:24.680
> 
> 标签：google-chrome, sendmessage

端口错误：无法建立连接。接收端不存在。

我想从 background.js 向 content_script.js 发送消息，但它显示消息：端口错误：无法建立连接。接收端不存在。

但是 contect_script.js 可以向 background.js 发送消息，任何人都可以帮我解决这个问题。谢谢。

# android - Android应用内订阅不起作用

> ID：15918662
> 
> 赞同：2
> 
> 时间：2013-04-10T06:37:29.247
> 
> 标签：android, in-app-billing, subscription

我正在使用应用订阅中的 android 开发一个应用。我正在尝试使用 IabHelper.QueryInventoryFinishedListener 查询我的购买项目。但它总是以失败的结果出现。IabResult 返回失败。我在开发者控制台中添加了应用产品。谁可以帮我这个事？

这是我的一些代码，

```
bindService(new  Intent("com.android.vending.billing.InAppBillingService.BIND"),
                        mServiceConn, Context.BIND_AUTO_CREATE);

String base64EncodedPublicKey = "my key";                                        

mHelper = new IabHelper(this, base64EncodedPublicKey);
        mHelper.enableDebugLogging(true);
mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
               public void onIabSetupFinished(IabResult result) {
                  if (!result.isSuccess()) {
                      System.out.println("Not Success");                      
                     Log.d("In APP Billing", "Problem setting up In-app Billing: " + result);
                     return;
                  } else {
                      System.out.println("Success");
                      Log.d(" In APP Billing", "Setting up In-app Billing Success: " + result);
                  }

                  List<String> additionalSkuList = new ArrayList<String>();
                  additionalSkuList.add(SKU_ID);                  

                  mHelper.queryInventoryAsync(true, additionalSkuList,
                           mQueryFinishedListener);

               }

});     

    IabHelper.QueryInventoryFinishedListener mQueryFinishedListener = new IabHelper.QueryInventoryFinishedListener() {

        @Override
        public void onQueryInventoryFinished(IabResult result, Inventory inv) {
            // TODO Auto-generated method stub

            if (result.isFailure()) {
                 // handle error
                System.out.println("mQueryFinishedListener is Failure"); // i am always getting this
                 return;
            }
            System.out.println("mQueryFinishedListener is Success");

            Boolean hasPur = inv.hasPurchase(SKU_ID);

            if (hasPur) {
                System.out.println("Query - - subscribed ");
                isSubscribed = true;
            } else {
                System.out.println("Query - not subscribed ");
                isSubscribed = false;
            }

            System.out.println("Purchase panic:"+inv.getPurchase(SKU_ID));

        }
}; 
```

知道为什么它不起作用吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T08:59:09.077

要使用应用订阅，我认为您将在您创建的 IabHelper 实例上调用“launchSubscriptionPurchaseFlow()”方法。

```
 mHelper.launchSubscriptionPurchaseFlow(Activity act, String sku, int requestCode,
        OnIabPurchaseFinishedListener listener, String extraData); 
```

或者

```
mHelper.launchPurchaseFlow(Activity act, String sku, String itemType, int requestCode,
                OnIabPurchaseFinishedListener listener, String extraData); 
```

其中 itemType = IabHelper.ITEM_TYPE_SUBS

# php - 我的 jquery 代码中我的 php 函数的问题

> ID：15918664
> 
> 赞同：0
> 
> 时间：2013-04-10T06:37:48.950
> 
> 标签：php, jquery, function, integer

我想在jquery 函数.html() 中执行一个php 函数。php 函数接受 2 个整数作为参数。

此代码有效

```
$(function() {
    var myVar = 1;
    $('#myDiv').html('<? echo my_function('+myVar+','+1+'); ?>');   
}); 
```

而这个没有：

```
$(function() {
    var myVar = 1;
    $('#myDiv').html('<? echo my_function('+myVar+','+myVar+'); ?>');   
}); 
```

我没有 php 错误，但没有任何反应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:46:08.580

写一个`file.php`

```
<?php
my_function(myvar,1);
?> 
```

并在 html 页面中使用

```
$('#mydiv').load('file.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:53:10.110

你做错了方法，你不能用这个方法，var myvar; 是一个 javascript 变量，只能在您的浏览器中使用。但是 my_function() 在 Web 服务器中执行；您可以在 javascript 中放置一个 php 变量，但不能在 php 函数中使用 javascript 变量作为参数。将 myvar 设置为 php变量，如果可能，然后将其放入您的函数中。或者您可以使用 ajax 将 javascript 变量传递给 php 函数。

把你的函数放到一个php文件中，然后

```
 $('#mydiv').load('file.php?myvar='+myvar); 
```

是可以的，可以在$_GET['myvar']中获取值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:59:50.437

我刚试过。所以，发生的事情是这样的：PHP 解析器只关心`<? ?>`标签内的内容，不关心其他内容。所以它看到了：

```
echo my_function('+myVar+','+1+'); 
```

该函数使用两个参数调用，都是字符串：`+myVar+`和`+1+`。您可以通过将其放入您的函数中来检查：

```
function my_function() {
    $argv = func_get_args();
    var_dump($argv);
} 
```

它会输出这个：

```
array(2) {
  [0]=>
  string(7) "+myVar+"
  [1]=>
  string(3) "+1+"
} 
```

在为 PHP 生成的文件提供服务后，客户端会看到：

```
$(function() {
    var myVar = 1;
    $('#myDiv').html('The output of your my_function()');   
}); 
```

您的 JavaScript 变量现在不再使用。

如果您想打印具有已知 ID 的内容，您可以在 PHP 中定义变量或使用 a`$_GET`或`$_POST`变量在 PHP 中设置它。

如果您想使用动态值，则需要对另一个文件进行 AJAX 调用（您必须按照我上面的建议进行操作）。

像您那样混合 PHP 和 JavaScript 是不可能的。

# c# - Skype4COM：识别来电事件并将其与我机器上的一个活动 Skype 客户端相关联

> ID：15918665
> 
> 赞同：0
> 
> 时间：2013-04-10T06:37:49.527
> 
> 标签：c#, skype, skype4com, skype4java

**我的项目：** 我需要为我的一个项目建立一个 Skype Listener 服务器。它将： 1\. 托管 8 个不同的虚拟 Skype 帐户。2\. 所有帐户都已经关联： (a) 已录制的音频文件 (b) 预先录制的视频文件。3\. 对任何这些 Skype 帐户的 Skype 呼叫将根据呼叫类型自动启动预先录制的音频或视频。

**我的研究：** 我在 Skype 开发人员论坛中进行了研究，但我找不到任何 URI 或 API 来以编程方式接受传入的内容。但是，我能够捕获来电事件并使用 Skype4COM 对其进行响应。

[http://devforum.skype.com/t5/Desktop-API/Event-for-incoming-call/td-p/9174](http://devforum.skype.com/t5/Desktop-API/Event-for-incoming-call/td-p/9174)

现在因为我必须使用 SKype 提供的辅助方法在同一台机器上运行的 8 个不同的 Skype 帐户中实现相同的功能。但是在使用相同的情况下，我无法确定何时发生来电事件，即接收呼叫的帐户。因此，无论是哪个帐户，它都会打开相同的预先录制的视频，而不是与 Skype 帐户相关联的帐户。希望我解释清楚。

**我的问题**： 1.我正在寻找一种方法（使用 SkypeKIT 或 Skype4COM）来识别来电事件并将其与我机器上的一个活动 Skype 客户端相关联。2.为了播放预先录制的视频和音频，我目前正在更改我机器上Skype客户端的视频源。现在由于所有 Skype 帐户都在同一个客户端上运行，所以我无法将不同的视频源附加到不同的帐户。有没有办法在同一台机器上运行多个 Skype 实例？任何关于如何使用 SkypeKIT 和 SKype4COM 或任何其他方式完成这些的建议/即时帮助将不胜感激。

PS：我重新发布了这个问题并添加了我的研究工作。

问候拉吉

# php - 按日期从 2 个表中订购数据

> ID：15918667
> 
> 赞同：1
> 
> 时间：2013-04-10T06:37:57.690
> 
> 标签：php, mysql, sql-order-by

我有 3 个表：myMembers、forum_question 和 forum_answer。我的会员：

```
id | usr ..|..| follow | ....
 1 | Bob . |..|3,2,....|.....
 2 | John  |..|1,8,5...|.....
 3 | ......|..|........The "follow" column store the data in an array of followers id.<p> 
```

论坛问题：

```
id | topic .| name  | idsender      | datetime
 1 | foo q .| Bob ..|.... 1........ | 07:20
 2 | foo1 q | Bob ..|.... 1........ | 07:10
 3 | foo2 q | John .|.... 2 ........| 06:00 
```

论坛回答：

```
question_id | answer | a_name | idsender | datetime
 1 .........| answ 1 | Bob ...| 1 .......| 08:20
 2 ....... .| answ 2 | Bob ...| 1 .......| 07:20
 1 .........| answ 3 | John ..| 2 .......| 08:00 
```

我有这个：

```
$foll = mysql_query("SELECT follow FROM myMembers WHERE id='$id' LIMIT 1");
  while ($row = mysql_fetch_array($foll)){
    $foll1 = explode(",", $row["follow"]);
                      }
foreach ($foll1 as $key => $value){
$displ = mysql_query("SELECT p.* FROM
(SELECT id, datetime, topic, name, idsender, 'question' AS TYPE FROM 
forum_question WHERE idsender = '$value' UNION
SELECT question_id, datetime, answer, a_name, idsender, 'answer' AS TYPE FROM
forum_answer  WHERE idsender = '$value')p
ORDER BY p.datetime DESC");
        while ($row = mysql_fetch_array($displ)){
                $type= $row['TYPE'];
                $id = $row["id"];
                $topic = $row["topic"];
                $name = $row["a_name"];
                $idsender = $row["idsender"];
                $datetime=$row['datetime'];
echo '<div>'. $name .', '. $type .', '. $topic.', '. $datetime.'</div>'"; 
```

我有这个输出：

```
Bob, answer, answ1, 8:20
Bob, answer, answ2, 7:20
Bob, question, foo q, 7:20
Bob, question, foo1 q, 7:10
**John,** answer, answ 3, 8:00
**John,** question, foo2 q, 6:00 
```

我想要这个输出？

```
Bob, answer, answ1, 8:20
**John,** answer, answ3, 8:00
Bob, question, foo q, 7:20
Bob, answer, answ2, 7:20
Bob, question, foo1 q, 7:10
**John,** question, foo2 q, 6:00 
```

有可能的？？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:40:13.317

您可以对 a_name 使用 group by 并按 datetime 排序。所以你的查询应该是，

```
$displ = mysql_query("SELECT p.* FROM
(SELECT id, datetime, topic, name, idsender, 'question' AS TYPE FROM 
forum_question WHERE idsender = '$value' UNION
SELECT question_id, datetime, answer, a_name, idsender, 'answer' AS TYPE FROM
forum_answer  WHERE idsender = '$value')p
GROUP BY p.a_name ORDER BY p.datetime DESC") 
```

# networking - 如何计算 Android 网络吞吐量

> ID：15918669
> 
> 赞同：2
> 
> 时间：2013-04-10T06:38:06.300
> 
> 标签：networking, throughput

我正在计算网络吞吐量

吞吐量=总数据包（接收）/总时间消耗。

我已经用服务器创建了一个专用套接字并上传和下载文件。我得到的输出不符合标记代码如下：

```
public void uploadTest() throws Exception
{
      byte[] arrayOfByte = new byte[BUF_SIZE];
      Utility.debugMessage(getName()+" uploadTest getLocalAddress() = "+ mUploadSocket.getLocalAddress()+" getLocalPort() = "+ mUploadSocket.getLocalPort()+" isBound() = "+mUploadSocket.isBound()+" isConnected() = "+ mUploadSocket.isConnected());
      DataOutputStream localDataOutputStream = new DataOutputStream(mUploadSocket.getOutputStream());
      sendMessage(Constants.MSG_CONN_LATENCY,(int)initiatingConnectionTime/* (System.currentTimeMillis()-initiatingConnectionTime)*/,-1,null);
      String uploadFilePath=null;

      uploadFilePath= Utility.createFileOnSdCard(testCaseDetails.getFileSize());

    int totalCycle=testCaseDetails.getCycle();
    double allCycleThroughPut=0;
      Utility.debugMessage(getName()+" uploadTest ToTal Available bytes","localDataInputStream.available() :: "+localDataOutputStream.size());
      for(int i=1;i<=totalCycle;i++)
      {
      long totalTime=0L;`enter code here`
      long updateDelta=0;
      long bytesRead=0L;
      long totalReceived=0L;
      File testFile = new File(uploadFilePath);
      fileSize=testFile.length();
      FileInputStream fis = new FileInputStream(testFile);
      BufferedInputStream bis = new BufferedInputStream(fis);
      while((bytesRead=bis.read(arrayOfByte))>Constants.NO_DATA)
      {
          long currentTime=System.currentTimeMillis();
          localDataOutputStream.write(arrayOfByte,0,(int)bytesRead);
          totalReceived+=bytesRead;
          int progress=(int)((totalReceived/(double)fileSize)*100);
          Utility.debugMessage(NAME+" uploadTest Downloading  "," progress = "+progress+"totalSend = "+totalReceived);
          updateDelta =System.currentTimeMillis() - currentTime;

          if(sendYUpdate)
          {//Check y axis max value
                  sendMessage(Constants.MSG_UPDATE_Y_AXIS_LIMIT,(int)(Utility.calculate(updateDelta, bytesRead).getKilobits()),-1,  null);
              if(skipCounter==0)
              {
                  sendYUpdate=false;
              }
              else
              {
                  skipCounter--;
              }
          }
          else
          {

              sendMessage(Constants.MSG_UPDATE_STATUS,progress,(int) totalReceived, Utility.calculate(updateDelta, bytesRead));

          }
          totalTime+=updateDelta;
      }

      bis.close();
      long downloadTime=totalTime;

      SpeedInfo currentAverageThrougput=Utility.calculate(downloadTime, totalReceived);
      allCycleThroughPut+=currentAverageThrougput.getKilobits();
      sendMessage(Constants.MSG_CYCLE_STATUS, -1,i,currentAverageThrougput );
      sendYUpdate=true;
      }
      localDataOutputStream.close();

      sendMessage(Constants.MSG_COMPLETE_STATUS,(int)(allCycleThroughPut/totalCycle),-1,null);

        if(!Constants.RUN_ON_LOCAL)
            {

                    try {

                        Utility.closeSocket( con,Utility.getSharePrefValue(con, Constants.SERVER_BASE_URL)+"/TestMetrico/metrico/closeConnection",Integer.parseInt(Utility.getSharePrefValue(con, Constants.SOCKET_SERVER_PORT)));
                    } catch (Exception e1) {
                        e1.printStackTrace();
                        }

        }
}

public void downloadTest() throws IOException
{
      int totalCycle=testCaseDetails.getCycle();
         double allCycleThroughPut=0;
     for(int i=1;i<=totalCycle;i++)
     {
      byte[] arrayOfByte = new byte[BUF_SIZE];
      if(mDownloadSocket.isClosed())
      {
          mDownloadSocket=null;
          mDownloadSocket=new Socket();
          connectDownload();
      }

      Utility.debugMessage(NAME+" downloadTest Start Downloading LocalAddress = "+ mDownloadSocket.getLocalAddress()+" getLocalPort = "+mDownloadSocket.getLocalPort()+" isBound = "+mDownloadSocket.isBound()+" isConnected = "+mDownloadSocket.isConnected());
      DataInputStream localDataInputStream = new DataInputStream(mDownloadSocket.getInputStream());
      sendMessage(Constants.MSG_CONN_LATENCY,(int) initiatingConnectionTime /*(System.currentTimeMillis()-initiatingConnectionTime)*/,Constants.PARAMETER_NOT_USED,null);

      Utility.debugMessage(NAME+" downloadTest ToTal Available bytes","localDataInputStream.available() :: "+localDataInputStream.available());

      float updateDelta=0;
      long received=0L;
      long totalTime=0L;
      long totalReceived=0L;
      long currentTime=System.currentTimeMillis();
      while (( received=localDataInputStream.read(arrayOfByte)) > Constants.NO_DATA)
      {
          totalReceived+=received;
          int progress=(int)((totalReceived/(double)1048576)*100);

          updateDelta = System.currentTimeMillis()-currentTime;

          Utility.debugMessage(NAME+" downloadTest Downloading buffer", "Received bytes= "+received+"totalReceived bytes= "+totalReceived+"updateDelta time = "+updateDelta);
          if(sendYUpdate)
          {//Check y axis max value
                  sendMessage(Constants.MSG_UPDATE_Y_AXIS_LIMIT,(int)( Utility.calculate(updateDelta, received).getKilobits()),-1,  null);
              if(skipCounter==0)
              {
                  sendYUpdate=false;
              }
              else
              {
                  skipCounter--;
              }
          }
          else
          {

              sendMessage(Constants.MSG_UPDATE_STATUS,progress,(int) totalReceived,  Utility.calculate(updateDelta, received));

          }

          totalTime+=updateDelta;
          currentTime=System.currentTimeMillis();
      } 

      long downloadTime=totalTime;//(totalTime-start);
      SpeedInfo currentAverageThrougput=Utility.calculate(downloadTime, totalReceived);
      allCycleThroughPut+=currentAverageThrougput.getKilobits();
      sendMessage(Constants.MSG_CYCLE_STATUS, -1,i,currentAverageThrougput );
      sendYUpdate=true;

      localDataInputStream.close();
      mDownloadSocket.close();
      }

      sendMessage(Constants.MSG_COMPLETE_STATUS,(int)(allCycleThroughPut/totalCycle),-1,null);

        if(!Constants.RUN_ON_LOCAL)
            {
                    try {

                        Utility.closeSocket( con,Utility.getSharePrefValue(con, Constants.SERVER_BASE_URL)+"/TestMetrico/metrico/closeConnection",Integer.parseInt(Utility.getSharePrefValue(con, Constants.SOCKET_SERVER_PORT)));
                    } catch (Exception e1) {
                        e1.printStackTrace();
                        }

        }

}

    public static SpeedInfo calculate(final float downloadTime,
            final float bytesIn) {

        SpeedInfo info = new SpeedInfo();
        float downloadTimeTemp = downloadTime;
        // if(downloadTimeTemp==0) downloadTimeTemp=1;
        // from mil to sec
        // TimeUnit.MILLISECONDS.toSeconds(downloadTime)
        long bytespersecond = (long) (bytesIn / downloadTimeTemp) * 1000;
        double kilobits = bytespersecond * Constants.BYTE_TO_KILOBIT;
        double kilobytes = bytespersecond * Constants.BYTE_TO_KILOBYTE;// Constants.BYTE_TO_KILOBIT;
        //double megabits = kilobits * Constants.KILOBIT_TO_MEGABIT;

        double megabits = bytespersecond*0.000000953674;
        info.setDownspeed(bytespersecond);
        info.setKilobits(kilobits);
        info.setMegabits(megabits);

        TotalKB += kilobits;
        TotalTime += downloadTime;
        Utility.debugMessage(" downloadTest time in Downloading buffer",
                "bytespersecond = " + bytespersecond);
        Utility.debugMessage(" downloadTest time in Downloading buffer",
                "kilobits = " + kilobits);
        Utility.debugMessage(" Total downloadTest time in Downloading buffer TotalKB = "
                + TotalKB + " , TotalTime = " + TotalTime);
        return info;
    }

    public static  final double EDGE_THRESHOLD = 176.0;
    public static  final double BYTE_TO_KILOBIT = 0.0078125;
    public static  final double KILOBIT_TO_MEGABIT = 0.0009765625;
    public static final double BYTE_TO_KILOBYTE=0.000976562; 
```

如果有什么问题，请告诉我：

300Mbps WIFI 路由器我得到`enter code here` 75Mbps 上传和 500 到 750 Mbps 下载速度

我正在我的机器上运行服务器并通过 LAN 上的 300Mbps 路由器访问它？

# stored-procedures - 在文本框中执行存储过程以获取本地化文本

> ID：15918674
> 
> 赞同：1
> 
> 时间：2013-04-10T06:38:25.613
> 
> 标签：stored-procedures, reporting-services, localization, ssrs-2008, multilingual

是否可以在文本框中执行存储过程？我们需要它来本地化我们的报告。

例如，我们有一个存储过程，它返回给定`Key`和给定的本地化文本`LanguageId`。我想在我的报告中使用不同的键为每个标签（文本框）执行这个存储过程。

我们正在使用 SSRS 2008。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:37:10.937

我认为你把事情搞混了，你不能*“在文本框中执行存储过程”*。

相反，您可以做的是创建一个数据集，该数据集获取当前语言所需的所有键/值对，如下所示：

```
EXEC usp_GetReportLabels 'en-US'

/* Returns:

   Key       Val
  ---------  ------------
  lbl1       Firstname
  lbl2       Surname
  etc        etc
*/ 
```

在您的文本框中，您可以使用利用[`Lookup`函数](http://msdn.microsoft.com/en-us/library/ee210531.aspx)的表达式从该数据集中检索正确的行，并显示标签值。

注意：您提到[ssrs-2008](/questions/tagged/ssrs-2008 "显示标记为“ssrs-2008”的问题")但没有提到 ssrs [-2008-r2](/questions/tagged/ssrs-2008-r2 "显示标记为“ssrs-2008-r2”的问题")版本，我认为该`Lookup`功能在 plain-2008 中不可用。在这种情况下，您需要稍微重构数据集以获得相同的效果。一种解决方案是`PIVOT`数据集并将`Key`s 放入列（在这种情况下，数据集将仅包含一行，因此您可以这样做`First(Fields!lbl1.Value)`）。虽然有点解决方法。

# mysql - Mysql匹配，反对没有返回正确的结果

> ID：15918675
> 
> 赞同：0
> 
> 时间：2013-04-10T06:38:27.237
> 
> 标签：mysql

我正在尝试这个查询：

```
SELECT * FROM `table_name` WHERE MATCH(`field_name`)
AGAINST('+san +city' IN BOOLEAN MODE) 
```

我想获取所有应包含 san city 的记录，但结果不同。结果我得到了所有包含“城市”的记录，比如“珍珠城、盐湖城等”。我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:43:59.797

`SELECT`尝试在查询的 -part 中添加 MATCH 以了解 MySQL 在此处的工作方式：

```
SELECT *, MATCH(field_name) AGAINST('+san +city' IN BOOLEAN MODE)
FROM table_name 
WHERE MATCH(field_name) AGAINST('+san +city' IN BOOLEAN MODE) 
```

您将在此列中看到优先级。

请记住，如果您使用 MyISAM 和 MySQL < 5.6 或 InnoDB 和 MySQL => 5.6，您的结果会有所不同。[这是一篇关于它的好文章](http://www.mysqlperformanceblog.com/2013/03/04/innodb-full-text-search-in-mysql-5-6-part-2-the-queries/)。

# javascript - 使用javascript更改单元格的颜色

> ID：15918677
> 
> 赞同：0
> 
> 时间：2013-04-10T06:38:33.993
> 
> 标签：javascript, asp.net

我编写了一个 java 脚本，用于在 asp.net 中更改 gridview 单元格的颜色。函数如下所示。

```
 function hello() {
            var gvDrv = document.getElementById("<%= gridviewSearchResult.ClientID %>");
            for (i = 1; i < gvDrv.rows.length; i++) {

                var cell = gvDrv.rows[i].cells;
                var HTML = cell[0].innerHTML;

                if (cell[1].innerHTML == "Combivent") {
                    gvDrv.rows[i].cells[2].className = " PendingRowStyle";
                }
                else {

                }
            }
         } 
```

如果单元格内容是 "Combivent" ，我正在`PendingRowStyle` 为列应用 CSS 类。

我在按钮的`onclientclick`事件上调用此函数。

现在的问题是，它会根据条件改变单元格的颜色。但一改其保留到旧阶段。就像将那种颜色闪烁到单元格一样。为什么那种颜色不会持续到那个单元格。那是什么逻辑？我该如何处理？

注意：我在 if(!ispostback) 内部的 pageload 事件中加载了 gridview。

谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:29:49.307

在页面加载中

```
if(!isPostback)
{
 FillGridview()
} 
```

并在服务器端按钮中单击

```
protected void Button_Click(object sender, EventArgs e)
{

Page.ClientScript.RegisterStartupScript(this.GetType(), "onclick", "<script anguage=javascript>hello();</script>");   

} 
```

# css - 有没有一种干净的方法可以在 XAML WPF 中实现祖先样式触发器

> ID：15918681
> 
> 赞同：1
> 
> 时间：2013-04-10T06:38:52.193
> 
> 标签：css, wpf, stylesheet

我正在为基本属性网格创建一些样式。例如，XAML 将是

```
<StackPanel Style="{StaticResource propertyGrid}" Orientation="Vertical"  >

    <ItemsControl Tag="property">
        <Label>Nodes</Label>
        <TextBox Text="{Binding Nodes}"/>
    </ItemsControl>

    <ItemsControl Tag="property">
        <Label >Major Diameter</Label>
        <TextBox Text="{Binding MajorDiameter}"/>
    </ItemsControl>

    <ItemsControl Tag="property">
        <Label>Minor Diameter</Label>
        <TextBox Text="{Binding MinorDiameter}"/>
    </ItemsControl>

    <ItemsControl Tag="property">
        <Label>Excenter</Label>
        <TextBox Text="{Binding Excenter}"> </TextBox>
    </ItemsControl>

</StackPanel> 
```

我的造型遵循这个逻辑。带有 Tag 的 ItemsControl 中的标签或文本框`property`获得特殊样式。如果我是作为伪 CSS 做的，我会写

```
ItemsControl.property Label {
    Grid.Row: 0;
    FontWeight: bold;
    Padding:0,4,0,0;
}

ItemsControl.property TextBox {
    Grid.Row: 1;
    FontWeight: bold;
} 
```

在咬牙切齿之后，我想出了一种方法来做到这一点，那就是使用 DataTriggers 来回顾树，而不是使用 CSS 心态去往下看树。然而，我对它的冗长感到相当震惊。见下文。

```
<Style TargetType="StackPanel" x:Key="propertyGrid">
    <Style.Resources>

        <Style TargetType="Label">
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}, Path=Tag}" Value="property">
                    <Setter Property="Grid.Row" Value="0"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                    <Setter Property="Padding" Value="0,4,0,0"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="TextBox">
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}, Path=Tag}" Value="property">
                    <Setter Property="FontWeight" Value="Bold"/>
                    <Setter Property="Grid.Row" Value="1"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="ItemsControl" x:Key="property">
            <Style.Triggers>
                <Trigger Property="Tag" Value="property">
                    <Setter Property="Focusable" Value="False"/>
                    <Setter Property="ItemsPanel">
                        <Setter.Value>
                            <ItemsPanelTemplate>
                                <Grid Width="Auto">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="40*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                </Grid>
                            </ItemsPanelTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Style.Resources>
</Style> 
```

我的问题是。这样做有捷径或更好的符号吗？我很想写一个 WPFCSS 编译器来处理这个；）我可以写一个 MarkupExtension 来清理它。如果可能的话，我希望任何解决方案也能在设计时工作。

例如，是否可以编写一个扩展，例如

```
<AncestorTrigger TargetType="ItemsControl" Path="Tag" Value="property">
    <Setter Property="Grid.Row" Value="0"/>
    <Setter Property="FontWeight" Value="Bold"/>
    <Setter Property="Padding" Value="0,4,0,0"/>
</AncestorTrigger> 
```

? 这比记住如何写要容易得多

```
<DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}, Path=Tag}" Value="property"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:08:15.127

我编写了一个自定义行为来解决这个问题，它也适用于设计时。标记将

```
<DataTrigger 
    WPF:WhenParentTag.TargetType="{x:Type ItemsControl}" Value="property">

    <Setter Property="Grid.Row" Value="0"/>
    <Setter Property="FontWeight" Value="Bold"/>
    <Setter Property="Padding" Value="0,4,0,0"/>

</DataTrigger> 
```

这更理智一点。扩展的代码是

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Markup;

namespace My.WPF
{
    public static class WhenParentTag
    {

        static WhenParentTag()
        {}

        public static readonly DependencyProperty 
            TargetTypeProperty = 
            DependencyProperty.RegisterAttached
            ( "TargetType"
            , typeof(Type)
            , typeof(WhenParentTag)
            , new PropertyMetadata(null, TargetTypeChanged));

        public static void 
            TargetTypeChanged
            ( DependencyObject  dob
            , DependencyPropertyChangedEventArgs e)
        {
            var trigger = dob as DataTrigger;
            if(trigger==null){
                return;
            }

            var type = e.NewValue as Type;
            if (type == null)
                return;

            var binding = new Binding();
            var rel = new RelativeSource(RelativeSourceMode.FindAncestor) { AncestorType = type };
            binding.RelativeSource = rel;
            binding.Path = new PropertyPath("Tag");
            trigger.Binding = binding;
        }

        public static Type
            GetTargetType
            ( DataTrigger dp)
        {
            return (Type)dp.GetValue(TargetTypeProperty);
        }

        public static void
            SetTargetType
            ( DataTrigger dp,
            Type value)
        {
            dp.SetValue(TargetTypeProperty, value);
        }
    }
} 
```

欢迎提出改进建议。

# cuda - 错误：“int”类型的参数与“const void *”类型的参数不兼容

> ID：15918686
> 
> 赞同：6
> 
> 时间：2013-04-10T06:39:00.373
> 
> 标签：cuda

在编译程序时我的这部分代码。此错误显示：““int”类型的参数与“const void *”类型的参数不兼容。我声明变量如下：

```
int *dev_matrix, *dev_array, *dev_array_length;
int array_length=1;
cudaMalloc((void**)&dev_array_length, 1*sizeof(int));
cudaMemcpy(dev_array_length, array_length, 1*sizeof(int), cudaMemcpyHostToDevice); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T06:44:24.587

的第二个论点[`cudaMemcpy()`](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__MEMORY_g48efa06b81cc031b2aa6fdc2e9930741.html)是错误的。它是一个指针 ( `const void*`) 并且您提供一个`int`.

你的意思是写：

```
cudaMemcpy(dev_array_length, &array_length, 1*sizeof(int), cudaMemcpyHostToDevice);
                             ^ 
```

# php - 在php中更改数组的值

> ID：15918693
> 
> 赞同：1
> 
> 时间：2013-04-10T06:39:29.397
> 
> 标签：php, codeigniter

我以这种方式有数组

```
 Array
    (
        [0] => stdClass Object
            (
                [qa_verified] => 0          
            )

        [1] => stdClass Object
            (
                [qa_verified] => 1               
            )
        [2] => stdClass Object
            (
                [qa_verified] => 2               
            )
) 
```

我需要变成

```
Array
(
    [0] => stdClass Object
        (
            [qa_verified] => invalidate          
        )

    [1] => stdClass Object
        (
            [qa_verified] => approve               
        )
    [2] => stdClass Object
        (
            [qa_verified] => reject               
        )
) 
```

我必须根据状态更改 qa_verified 键的 值`0 = invalidate`，，`1= approve``2=reject`

我尝试了array_walk，但无法获得结果

任何人都可以帮助我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T06:44:26.870

```
$lookup = array('invalidate', 'approve', 'reject');
array_walk(
    $myArray,
    function(&$entry) use ($lookup) {
        $entry->qa_verified = $lookup[$entry->qa_verified];
    }
);

var_dump($myArray); 
```

# c# - 使用 WPF 数据绑定设计响应式 UI

> ID：15918695
> 
> 赞同：2
> 
> 时间：2013-04-10T06:39:36.913
> 
> 标签：c#, wpf, multithreading, data-binding

我是 WPF 的新手。我正在尝试使用 WPF 绑定来理解 MVVM 模式。我有以下 2 节课

1.  主窗口.xamal
2.  视图模型

    我有三个控件

    1.  显示 ViewModel 的“名称”属性的文本框
    2.  显示 ViewModel 的“状态”依赖属性的文本框
    3.  调用“ViewModel”类的“Execute”方法的按钮。

    现在，Execute() 方法有点笨重，所以我创建了一个委托并异步调用它。但我的 UI 仍然处于阻塞状态，并且它没有更新“状态”依赖属性的值

请参阅以下课程。

应用程序.xaml.cs

```
namespace bindingDemo
{
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App : Application
    {
        protected override void OnStartup(StartupEventArgs e)
        {
            base.OnStartup(e);
            MainWindow mw = new MainWindow();
            ViewModel vm = new ViewModel();

            ///Set data context property of main windows.
            mw.DataContext = vm;
            mw.Show();
        }
    }
} 
```

主窗口.xaml

```
<Window x:Class="bindingDemo.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <TextBox Text="{Binding Name, Mode=TwoWay}"   Height="23" HorizontalAlignment="Left" Margin="76,26,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" />
    <Button Command="{Binding Path=MyCommand}" Content="Button" Height="23" HorizontalAlignment="Left" Margin="76,127,0,0" Name="button1" VerticalAlignment="Top" Width="120" />
    <TextBox Text="{Binding Path=Status}"  Height="23" HorizontalAlignment="Left" Margin="76,55,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" />
</Grid> 
```

视图模型.cs

```
 namespace bindingDemo
{
    public class ViewModel : DependencyObject , ICommand
    {
        public string Status
        {
            get { return (string)GetValue(StatusProperty); }
            set { SetValue(StatusProperty, value); }
        }

        // Using a DependencyProperty as the backing store for Status.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty StatusProperty =
            DependencyProperty.Register("Status", typeof(string), typeof(ViewModel), new UIPropertyMetadata("In Progress..."));       

        private ICommand _command = null;

        public ViewModel()
        {
            Name = "Default Name";
        }

        public void Execute(object parameter)
        {            
            Action a = new Action(() =>
            {
                ///While this code is being executed, UI gets blocked.
                Console.WriteLine(Name);
                Name = "OK";
                Status = "Connecting to database....";
                Thread.Sleep(2000);
                Status = "Connected to database....";
                Thread.Sleep(2000);
                Status = "Performing validations....";
                Thread.Sleep(2000);
                Status = "Data saved.";

            });

            /// Even if I have invoked operation asynchronously, UI is not getting updated
            /// UI is freezing for 6 seconds and can directly see last 'Status' message on UI
            Dispatcher.BeginInvoke(a, null);            
        }

        public string Name { get; set; }

        public ICommand MyCommand
        {
            get
            {
                return this;
            }
        }

        public bool CanExecute(object parameter)
        {
            return true;
        }

        public event EventHandler CanExecuteChanged;
    }
} 
```

有人可以帮我吗？

问候，赫曼特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:54:35.117

ViewModel 通常不包含依赖属性。为了能够通过数据绑定更新 UI，它必须实现`INotifyPropertyChanged`接口。
尝试像这样实现您的 ViewModel：

```
public class ViewModel : INotifyPropertyChanged
{
    private string _status;

    public string Status
    {
        get { return _status; }
        set
        {
            if(_status == value)
                return;
            _status = value;

            OnPropertyChanged("Status");
        }
    }

    public event EventHandler<PropertyChangedEventArgs> PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if(handler != null)
            handler(new PropertyChangedEventArgs(propertyName));
    }

    // ...
} 
```

在您的视图模型上实现`ICommand`似乎也很奇怪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:54:47.613

这里有几件事：

1.  `DependencyProperty`适用于...好吧，具有依赖属性的类。对于视图模型，实现`INotifyPropertyChanged`. `DependencyObject`现在绑定你的继承，这不是它的预期用途。

2.  您正在调用 a 上的操作`Dispatcher`，并且`Dispatcher`应该用于在调度程序线程上运行函数，在这种情况下将是 UI 线程。难怪它会被阻塞，你在 UI 线程上调用一个方法。`Dispatcher`如果您想从后台任务更改 UI 绑定值（例如报告某种进度），这很有用。您必须分离逻辑，在后台进行处理，然后报告结果。

所以，话虽这么说，你`Execute`应该看起来像这样（使用 C# 5）：

```
private async Task DoStuff()
{
     await Task.Delay(5000);
    //or drop the async modifier and 'return Task.Delay(5000);'
}

public async void Execute(object parameter)
{
    await DoStuff();
    //Add some checks if it really was 'OK', catch exceptions etc
    Name = "OK";
} 
```

使用 C# 4（未经测试）：

```
private Task DoStuff()
{
    return Task.Factory.StartNew(() => Thread.Sleep(5000));
}

public void Execute(object parameter)
{
   DoStuff().ContinueWith(result => Name = "OK", TaskScheduler.FromCurrentSynchronizationContext());
   //Same as above, probably should specify appropriate TaskOptions to run the continuation
   //only when the task was completed successfully.
} 
```

# memory-management - riak-cs 因大量请求而崩溃

> ID：15918711
> 
> 赞同：0
> 
> 时间：2013-04-10T06:40:35.777
> 
> 标签：memory-management, riak

我正在测试 RIAK-CS 作为 S3 的替代方案。我目前有 3 个节点，每个节点具有 4GB RAM 和 2GB SWAP。我将 10GB 的数据推送到 RIAK-CS。除了高IO，一切都很好。

然后我尝试使用以下 python 脚本提取该数据。

```
conn = boto.connect_s3(
    aws_access_key_id = access_key,
    aws_secret_access_key = secret_key,
    host = riak_host,
    proxy = riak_host,
    proxy_port = 8080,
    calling_format = boto.s3.connection.OrdinaryCallingFormat(),
    debug = 2,
    is_secure = False,
)

bucket = conn.create_bucket('bucket_name')

for row in rows:
    key=bucket.new_key(valid_key_name)
    if key.exists():
        key.open_read() 
```

事情开始从 RIAK 中撤出。几分钟后，除了巨大的 IO 之外，我注意到 riak-cs 进程正在“吃掉”越来越多的内存并最终崩溃，因为它占用了所有 6GB 的 RAM + SWAP。

如果我将 python 脚本更改如下，riak-cs 保持在 ~2-300 MB。注意 FOR 循环中的连接。

```
for row in rows:
    conn = boto.connect_s3(
        aws_access_key_id = access_key,
        aws_secret_access_key = secret_key,
        calling_format = boto.s3.connection.OrdinaryCallingFormat(),
        debug = 2,
        is_secure = False,
    )

    bucket = conn.create_bucket('bucket_name')
    key=bucket.new_key(valid_key_name)
    if key.exists():
    key.open_read() 
```

任何解释为什么会发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T12:45:18.590

这可能与 1.4 版修复的问题有关。

*   [https://github.com/basho/riak_cs/pull/570](https://github.com/basho/riak_cs/pull/570)
*   [https://github.com/basho/riak_cs/blob/release/1.4/RELEASE-NOTES.org#bugs-fixed-1](https://github.com/basho/riak_cs/blob/release/1.4/RELEASE-NOTES.org#bugs-fixed-1)

# sql-server - 尝试使用 OPENQUERY Msg 7321, Level 16, State 2, Line 1 时出错

> ID：15918712
> 
> 赞同：1
> 
> 时间：2013-04-10T06:40:38.520
> 
> 标签：sql-server, linked-server, openquery

当我运行这个查询

```
SELECT *   
    FROM OPENQUERY([XXX], 'SELECT * FROM Database.Table WHERE (MBCONO=650) AND MBCUNO LIKE a%' ) 
```

获取错误：

> 链接服务器“XXX”的 OLE DB 提供程序“DB2OLEDB”返回消息“令牌 %ÂŸFOR SKIP WITH FETCH ORDER UNION EXCEPT OPTIMIZE SQLSTATE: 42601, SQLCODE: -104”。

消息 7321，级别 16，状态 2，第 1 行错误

> 在准备查询“SELECT * FROM Database.Table WHERE (MBCONO=650) AND MBCUNO LIKE a%'”以针对链接服务器“LAWSON”的 OLE DB 提供程序“DB2OLEDB”执行时发生。

`AND MBCUNO LIKE a%` 但是当我运行没有返回结果的相同查询时 ！

任何人都可以帮助我解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:36:48.063

您是否尝试过在条件周围加上转义的单引号`LIKE`？

```
SELECT *   
    FROM OPENQUERY([XXX], 'SELECT * FROM Database.Table WHERE (MBCONO=650) AND MBCUNO LIKE ''a%''' ) 
```

如果这不起作用，请尝试直接对目标服务器运行查询。

# .htaccess - 如何将http重定向到https？

> ID：15918713
> 
> 赞同：1
> 
> 时间：2013-04-10T06:40:42.460
> 
> 标签：.htaccess, mod-rewrite

我有以下代码使用 https 将非 www 重定向到 www 并且它可以工作：

```
RewriteCond %{HTTP_HOST} !^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L] 
```

问题是当我访问 www.site.com 时，它不会重定向到 https。我还尝试在顶部的代码下方添加以下代码，但最终在[https://www.www.site.com](https://www.www.site.com)

```
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:12:42.727

也许这就是你需要的：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} (?:www\.)?(.*)  [NC]
RewriteRule ^(.*) https://www.%1/$1 [R,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:40:37.757

请检查这个：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1

RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^www\.
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 
```

# .net - 如何备份现有的配置文件？

> ID：15918716
> 
> 赞同：1
> 
> 时间：2013-04-10T06:40:49.710
> 
> 标签：.net, windows-installer, setup-deployment

这是我的问题，我需要在安装我的 product.msi 设置时备份文件夹中的现有配置文件。我尝试使用（使用自定义操作）`Installer Class`它可以工作，但方向不正确。

**只有在整个安装完成后才会进行备份。即，安装后我曾经得到3个配置文件，这3个被作为文件夹中的备份。**

我的安装类：

```
[System.Security.Permissions.SecurityPermission(System.Security.Permissions.SecurityAction.Demand)]
        public override void Install(IDictionary stateSaver)
        {
            base.Install(stateSaver);
        }        

        [System.Security.Permissions.SecurityPermission(System.Security.Permissions.SecurityAction.Demand)]
        public override void Commit(IDictionary savedState)
        {
            base.Commit(savedState);

            string directory = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location); 
            String folderPath = directory + "\\Myproduct Before " + version;
            string[] newPath = Directory.GetFiles(directory, "*.config");
            int newPathCounter = newPath.Count();
            if (newPathCounter != 0)
            {
                if (!Directory.Exists(folderPath))
                {
                    Directory.CreateDirectory(folderPath);
                }

                for (int i = 0; i < newPath.Count(); i++)
                {
                    string source = newPath[i];
                    string destination = source.Replace(directory, folderPath);
                    File.Copy(source, destination, true);
                }                
            }
            else
            {
                MessageBox.Show("No files to copy");
            }
        }

        [System.Security.Permissions.SecurityPermission(System.Security.Permissions.SecurityAction.Demand)]
        public override void Rollback(IDictionary savedState)
        {
            base.Rollback(savedState);
        }

        [System.Security.Permissions.SecurityPermission(System.Security.Permissions.SecurityAction.Demand)]
        public override void Uninstall(IDictionary savedState)
        {
            base.Uninstall(savedState);
        } 
```

我也尝试过输入这段代码，`OnBeforeInstall`但同样的事情发生了。请就此提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T14:57:14.463

也许您没有提供配置文件的正确路径。

以下是管理应用程序配置的可能方法：

配置文件安装到程序文件中的应用程序目录，但一旦在运行时对配置文件进行任何更改，它们就会复制到应用程序数据文件夹。

如果需要，您可以从现有配置升级新安装的应用程序 [如何在 .net 中跨不同程序集版本保留 user.config 设置？](https://stackoverflow.com/questions/534261/how-do-you-keep-user-config-settings-across-different-assembly-versions-in-net)

每次安装新版本的应用程序时，它都会在 %AppData\Local\%\ 下创建一个新文件夹，并将新的配置文件放在那里。现有文件保留在旧文件夹中，可以随时复制，但您需要找到正确的路径，或者只需复制始终以您的应用程序名称命名的完整文件夹。

# c# - 解决方案中的错误：如何将忽略的错误添加到团队共享文件中？

> ID：15918718
> 
> 赞同：1
> 
> 时间：2013-04-10T06:40:52.543
> 
> 标签：c#, asp.net, visual-studio, resharper

Resharper 在 ASP code-before 文件中报告了一些错误，这些错误很难避免（尽管代码运行良好）。在“解决方案中的错误”窗口中，我可以简单地忽略它们。是否可以将忽略的错误传播到团队共享文件？

感谢任何提示

更新：请参阅屏幕截图以了解错误类型： ![在此处输入图像描述](https://i.stack.imgur.com/xb2JE.gif)

我试图在 Resharper -> Options -> Inspection Severity 下找到它们，但没有成功。实际上我不想全局禁用它们，尤其是“不匹配的结束标签”通常很方便。最好是 Resharper - 评论，但我不知道之前是否可以在代码中添加它们。Resharper 的上下文菜单也没有像通常在后面的代码中那样建议它。

更新 2：我可以在 Resharper -> 选项 -> 代码检查设置 -> 编辑要跳过的项目下添加整个文件，并将其保存到团队共享文件中。但我也不喜欢跳过整个文件。

# html - 将全宽滑块或图像添加到 twitter 引导主题时出现问题

> ID：15918723
> 
> 赞同：1
> 
> 时间：2013-04-10T06:41:02.510
> 
> 标签：html, css, twitter-bootstrap

我正在努力将 twitter bootstrap 主题转换为 wordpress 主题并添加到它上面。

我在主题中添加全宽项目时遇到问题。我尝试添加一个设置为全宽的滑块插件。虽然当它被添加时它会变成一个固定的宽度，但如果我也添加一个图像也会发生同样的情况。除了页眉和页脚外，我页面中的所有内容似乎都是这样做的。

此外，似乎每次我在页面中添加任何内容时，页面/页脚都会搞砸。不过，我仍在学习 css。

我正在发布该网站的链接，以查看是否有人可以查看并帮助我。

[http://goo.gl/8JUDA](http://goo.gl/8JUDA)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:06:50.803

看起来您包含要在`.container`div 中拉伸窗口大小的元素。

`.container`在引导程序中用于固定布局。而是尝试使用`.container-fluid`该类。

例如：

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span2">
      <!--Sidebar content-->
    </div>
    <div class="span10">
      <!--Body content-->
    </div>
  </div>
</div> 
```

阅读更多：http: [//twitter.github.io/bootstrap/scaffolding.html#layouts](http://twitter.github.io/bootstrap/scaffolding.html#layouts)

# javascript - 在 json 数据中获取嵌套地图

> ID：15918725
> 
> 赞同：1
> 
> 时间：2013-04-10T06:41:03.920
> 
> 标签：javascript, jquery, json

我有这样的 JSON 数据：

```
var data = '{"credit":{"@code":"NT2C8FFC","card":"NT2C8FFC","credit":"149.96","amount":"149.96","disabled":"0","expired":"2011-02-15 10:21:18","user":"xxxx","issued":"2010-02-15 10:21:18","orderid":[],"fromorder":[],"email":"xxxx","phone":[],"state":[],"address":[],"city":[],"zip":[],"country":[],"customerid":"xxx","order":"xxx","order_date":"2010-01-23 00:00:00","reason":"Product Not Working as Expected","source":"xxx","first":[],"last":[],"notes":[]}}' 
```

它实际上是作为 JSON 返回给我的。例如，我只是在这里显示它。我可以用来`data["credit"]`调用元素`credit`，但这只会让我：

```
{"@code":"NT2C8FFC","card":"NT2C8FFC","credit":"149.96","amount":"149.96","disabled":"0","expired":"2011-02-15 10:21:18","user":"xxxx","issued":"2010-02-15 10:21:18","orderid":[],"fromorder":[],"email":"xxxx","phone":[],"state":[],"address":[],"city":[],"zip":[],"country":[],"customerid":"xxx","order":"xxx","order_date":"2010-01-23 00:00:00","reason":"Product Not Working as Expected","source":"xxx","first":[],"last":[],"notes":[]} 
```

我怎样才能深入到一个镜头？`data["credit"]["credit"]`不是正确的语法。它导致未定义。我知道我很接近，但不记得其余的了。目标是`149.96`从 JSON 数据中获取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:18:11.150

现在你可以使用`alert(data.credit.credit)`.

```
 var data = '{"credit":{"@code":"NT2C8FFC","card":"NT2C8FFC","credit":"149.96","amount":"149.96","disabled":"0","expired":"2011-02-15 10:21:18","user":"xxxx","issued":"2010-02-15 10:21:18","orderid":[],"fromorder":[],"email":"xxxx","phone":[],"state":[],"address":[],"city":[],"zip":[],"country":[],"customerid":"xxx","order":"xxx","order_date":"2010-01-23 00:00:00","reason":"Product Not Working as Expected","source":"xxx","first":[],"last":[],"notes":[]}}';
        eval("data=" + data);
        alert(data.credit.credit); 
```

您也可以使用`data = JSON.parse(data);`将字符串转换为 Json，但这存在浏览器兼容性问题。

这些是支持的浏览器

*   火狐 (Mozilla) 3.5
*   互联网浏览器 8
*   铬合金
*   歌剧 10
*   项目清单
*   野生动物园 4

旧版本不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:13:26.047

你正在制作`data`一个字符串而不是一个对象。改变

```
var data = '{"credit":{"@code":"NT2C8FFC","card":"NT2C8FFC","credit":"149.96","amount":"149.96","disabled":"0","expired":"2011-02-15 10:21:18","user":"xxxx","issued":"2010-02-15 10:21:18","orderid":[],"fromorder":[],"email":"xxxx","phone":[],"state":[],"address":[],"city":[],"zip":[],"country":[],"customerid":"xxx","order":"xxx","order_date":"2010-01-23 00:00:00","reason":"Product Not Working as Expected","source":"xxx","first":[],"last":[],"notes":[]}}' 
```

至

```
var data = {"credit":{"@code":"NT2C8FFC","card":"NT2C8FFC","credit":"149.96","amount":"149.96","disabled":"0","expired":"2011-02-15 10:21:18","user":"xxxx","issued":"2010-02-15 10:21:18","orderid":[],"fromorder":[],"email":"xxxx","phone":[],"state":[],"address":[],"city":[],"zip":[],"country":[],"customerid":"xxx","order":"xxx","order_date":"2010-01-23 00:00:00","reason":"Product Not Working as Expected","source":"xxx","first":[],"last":[],"notes":[]}} 
```

如果您无法更改原始数据，则需要通过以下方式解析它

```
data = JSON.parse(data); 
```

（适用于大多数浏览器）或使用库中的方法，例如[JQuery 的](http://api.jquery.com/jQuery.parseJSON/)：

```
data = jQuery.parseJSON(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:46:23.330

使用`.`运算符获取对象的对象

```
alert(data.credit.credit) //gives 149.96
 alert(data.credit.amount) //gives 149.96
alert(data.credit.card) //gives NT2C8FFC 
```

# android-emulator - 如何在 oracle jdeveloper 11.1.2.3 中添加/创建新手势？

> ID：15918732
> 
> 赞同：1
> 
> 时间：2013-04-10T06:41:31.483
> 
> 标签：android-emulator, oracle-adf, jdeveloper, android-gesture, oracle-fusion-middleware

编辑：

我是 Oracle Jdeveloper 11.1.2.3 的新手，谁能告诉我，我如何在自己的应用程序中使用在手势生成器应用程序（在模拟器中）创建的手势？

我发现此链接 [ [http://www.hascode.com/2010/05/creating-a-simple-gesture-app-with-android/](http://www.hascode.com/2010/05/creating-a-simple-gesture-app-with-android/) ] 与我正在尝试的内容有关，但我无法使用或实施它在 Jdeveloper 中。

我也可以在 eclipse 中运行上述链接中的代码并将其导出到 Jdeveloper 并在那里使用它吗？

请指导我...

==================================================== ==========================

我正在尝试的是通过使用不同的手势在应用程序中完成一些操作，而不是软件中已经存在的向右滑动、向左滑动、向下滑动、向上滑动和长按手势（setPropertyListener - 类型属性）。

例如，如果我在列表项上做了一个十字标记手势，那么它应该被取消，或者如果我在列表项上做了一个刻度线手势，那么它应该被接受。

那么，有什么方法可以向应用程序添加新手势吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:48:14.310

您可以将 amx:actionListener 标签添加到需要支持手势的组件并在其上设置 type 属性。此处示例：http: [//lucbors.blogspot.com/2013/02/adf-mobile-implementing-pull-to-refresh.html](http://lucbors.blogspot.com/2013/02/adf-mobile-implementing-pull-to-refresh.html)

# php - PHP 图片上传

> ID：15918738
> 
> 赞同：0
> 
> 时间：2013-04-10T06:41:52.887
> 
> 标签：php, header

我有一个用于图像上传的工作脚本，它将二进制格式的图像数据存储到 mysql 中，并且在检索时我正在使用标头（内容类型 ...）。有没有办法将一些文本内容添加到 http 标头所在的页面去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:46:45.777

简短的回答：没有

如果您通过 Content-Type 发送图像，则浏览器需要 Content-Type。[但是您可以使用GD](http://www.php.net/manual/en/book.image.php)或[Image Magick](http://php.net/manual/en/book.imagick.php)库向图像动态添加文本。然而，将图像存储在 mysql 中的性能不是很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:51:46.090

我认为更好的解决方案是将所有图像存储在一个目录中，并创建一个显示所选图像+要添加的文本的页面。所以将该页面输出为 HTML，而不是图像（所以不要将 Content-Type 设置为图像）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:13:29.930

尝试 imagecreatefromstring() 方法，http://in2.php.net/imagecreatefromstring 中提供了[文档](http://in2.php.net/imagecreatefromstring)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:08:13.987

最好将图像保存在文件夹中，在数据库中只存储它们的位置。

# c# - 如何保护文件？

> ID：15918744
> 
> 赞同：0
> 
> 时间：2013-04-10T06:42:17.753
> 
> 标签：c#, security, passwords, encryption

我有一个名为 Sample 的文件。它可以是任何类型（.txt/.doc/.docx/.pdf/....）。现在我想为该文件**设置密码。**如果可能的话，请帮助我编写代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:49:54.480

您不能为每个文件设置密码以限制其打开。但是，您可以使用加密来保护文件内容。

请参阅此链接以了解 C# 中的加密和解密[http://support.microsoft.com/kb/307010](http://support.microsoft.com/kb/307010)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:46:19.720

您可以使用自己的密码或生成的密钥加密文件（请参阅[文档](http://support.microsoft.com/kb/307010)）

来自 MSDN 的示例：

```
class Class1
{
      //  Call this function to remove the key from memory after use for security
      [System.Runtime.InteropServices.DllImport("KERNEL32.DLL", EntryPoint="RtlZeroMemory")]
      public static extern bool ZeroMemory(IntPtr Destination, int Length);

  // Function to Generate a 64 bits Key.
  static string GenerateKey() 
  {
     // Create an instance of Symetric Algorithm. Key and IV is generated automatically.
     DESCryptoServiceProvider desCrypto =(DESCryptoServiceProvider)DESCryptoServiceProvider.Create();

     // Use the Automatically generated key for Encryption. 
     return ASCIIEncoding.ASCII.GetString(desCrypto.Key);
  }

  static void EncryptFile(string sInputFilename,
     string sOutputFilename, 
     string sKey) 
  {
     FileStream fsInput = new FileStream(sInputFilename, 
        FileMode.Open, 
        FileAccess.Read);

     FileStream fsEncrypted = new FileStream(sOutputFilename, 
        FileMode.Create, 
        FileAccess.Write);
     DESCryptoServiceProvider DES = new DESCryptoServiceProvider();
     DES.Key = ASCIIEncoding.ASCII.GetBytes(sKey);
     DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey);
     ICryptoTransform desencrypt = DES.CreateEncryptor();
     CryptoStream cryptostream = new CryptoStream(fsEncrypted, 
        desencrypt, 
        CryptoStreamMode.Write); 

     byte[] bytearrayinput = new byte[fsInput.Length];
     fsInput.Read(bytearrayinput, 0, bytearrayinput.Length);
     cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length);
     cryptostream.Close();
     fsInput.Close();
     fsEncrypted.Close();
  }

  static void DecryptFile(string sInputFilename, 
     string sOutputFilename,
     string sKey)
  {
     DESCryptoServiceProvider DES = new DESCryptoServiceProvider();
     //A 64 bit key and IV is required for this provider.
     //Set secret key For DES algorithm.
     DES.Key = ASCIIEncoding.ASCII.GetBytes(sKey);
     //Set initialization vector.
     DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey);

     //Create a file stream to read the encrypted file back.
     FileStream fsread = new FileStream(sInputFilename, 
        FileMode.Open, 
        FileAccess.Read);
     //Create a DES decryptor from the DES instance.
     ICryptoTransform desdecrypt = DES.CreateDecryptor();
     //Create crypto stream set to read and do a 
     //DES decryption transform on incoming bytes.
     CryptoStream cryptostreamDecr = new CryptoStream(fsread, 
        desdecrypt,
        CryptoStreamMode.Read);
     //Print the contents of the decrypted file.
     StreamWriter fsDecrypted = new StreamWriter(sOutputFilename);
     fsDecrypted.Write(new StreamReader(cryptostreamDecr).ReadToEnd());
     fsDecrypted.Flush();
     fsDecrypted.Close();
  } 

  static void Main()
  {
     // Must be 64 bits, 8 bytes.
     // Distribute this key to the user who will decrypt this file.
     string sSecretKey;

     // Get the Key for the file to Encrypt.
     sSecretKey = GenerateKey();

     // For additional security Pin the key.
     GCHandle gch = GCHandle.Alloc( sSecretKey,GCHandleType.Pinned );

     // Encrypt the file.        
     EncryptFile(@"C:\MyData.txt", 
        @"C:\Encrypted.txt", 
        sSecretKey);

     // Decrypt the file.
     DecryptFile(@"C:\Encrypted.txt", 
        @"C:\Decrypted.txt", 
        sSecretKey);

     // Remove the Key from memory. 
     ZeroMemory(gch.AddrOfPinnedObject(), sSecretKey.Length * 2);
     gch.Free();
  }
}
  } 
```

# javascript - 使用 javascript 将控件添加到占位符控件

> ID：15918745
> 
> 赞同：0
> 
> 时间：2013-04-10T06:42:18.887
> 
> 标签：javascript

我尝试将使用 javascript 创建的元素添加到 asp:placeholder 控件，但它没有被添加。请为此提出一个可能的解决方案。提前致谢。这是我的代码：

```
 function UpdateLabel(e,newValue) 
 {
 var characterCode
 if(e && e.which){ // NN4 specific code

 e = e

 characterCode = e.which

  }

  else {

  e = event
 characterCode = e.keyCode // IE specific code

 }

 if(characterCode==188)

  {

    alert(characterCode);

    var array = newValue.split(",");

    if(array.length==1)
{

}

 else if ((array[array.length-2]!=""))

{

alert(array[array.length-2]);

var controlRef = document.createElement('a');
controlRef.href = '#';

controlRef.innerHTML = array[array.length-2];
controlRef.style.visibility = 'visible';

controlRef.onclick = function () { alert(array[array.length-2]); };
document.body.appendChild(controlRef); 

var oEL = document.getElementById('<%=PlaceHolder1.ClientID %>');
oEL=document.createAttribute(controlRef); 

oEL.appendChild(controlRef);
alert("oEL:"+oEL);
 } 
```

我也尝试使用 insertBefore() 。但这不起作用

# amazon-web-services - 处理 AWS PHP SDK 2 中的错误

> ID：15918746
> 
> 赞同：9
> 
> 时间：2013-04-10T06:42:22.257
> 
> 标签：amazon-web-services, amazon-s3

如果我尝试从我的 S3 存储桶中获取一个不存在的对象，Amazon PHP SDK 2 会给我一个非常丑陋的错误。对我来说很方便，但对最终用户没有任何意义......

例如：

```
$s3 = $aws->get('s3');

$result = $s3->getObject(array(
    'Bucket' => 'my bucket',
    'Key'    => 'path/to/file'
)); 
```

错误：

> 致命错误：未捕获的 Aws\S3\Exception\NoSuchKeyException：AWS 错误代码：NoSuchKey，状态代码：404，AWS 请求 ID：xxxxxxxxxxxxx，AWS 错误类型：客户端，AWS 错误消息：指定的密钥不存在。在第 89 行抛出 AWS/vendor/aws/aws-sdk-php/src/Aws/Common/Exception/NamespaceExceptionFactory.php

有没有一种方法可以确定是否存在错误并打印一条有意义的消息而不是上述消息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T10:31:25.590

我突然想到要试试这个：

```
try {
    $result = $s3->getObject(array(
        'Bucket' => 'my bucket',
        'Key'    => 'path/to/file'
    ));
} catch (Exception $e) {
   // I can put a nicer error message here  
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-07T22:52:07.410

调用 AWS 开发工具包的方法时发生的所有错误都通过引发异常来指示。如果要处理错误，可以捕获这些异常。

在最简单的情况下，您可能只想捕获`Exception`：

```
try {
    $result = $s3->getObject(array(
        'Bucket' => 'my bucket',
        'Key'    => 'path/to/file'
    ));
}
catch (Exception $e) {
    echo 'Oops, something went wrong';
} 
```

但是，如果您只想处理某些预期的异常，同时让其他人冒泡并让您的应用程序崩溃，那么事情就会变得更加微妙。

[首先， AWS 命名空间](http://docs.aws.amazon.com/aws-sdk-php/latest/namespace-Aws.html)中的几十个命名空间中的每一个都包含一个`Exception`命名空间，其中定义了异常类。每个命名空间中的这些类之一是 Amazon 称之为命名空间的**默认服务异常类**，所有其他异常都从该类继承。

例如，S3 有[`Aws\S3\Exception`命名空间](http://docs.aws.amazon.com/aws-sdk-php/latest/namespace-Aws.S3.Exception.html)和[`S3Exception`类](http://docs.aws.amazon.com/aws-sdk-php/latest/class-Aws.S3.Exception.S3Exception.html)。EC2 具有[`Aws\Ec2\Exception`命名空间](http://docs.aws.amazon.com/aws-sdk-php/latest/namespace-Aws.Ec2.Exception.html)和[`Ec2Exception`类](http://docs.aws.amazon.com/aws-sdk-php/latest/class-Aws.Ec2.Exception.Ec2Exception.html)。

请注意，捕获这些异常之一而不是基`Exception`类会立即阻止我们捕获某些错误！*由于服务器的错误响应*，会引发特定于服务的异常；连接失败异常*不会*从它们继承。例如，如果您尝试在没有 Internet 连接的情况下运行以下代码...

```
try {
    $result = $s3->getObject(array(
        'Bucket' => 'my bucket',
        'Key'    => 'path/to/file'
    ));
}
catch (S3Exception $e) {
    echo 'Oops, something went wrong';
} 
```

...那么异常将不会被捕获（因为它将是一个`Guzzle\Http\Exception\CurlException`，而不是 S3Exception）并且程序将崩溃。出于这个原因，如果您捕获这些异常只是为了向用户提供一般的失败消息，您可能应该捕获`Exception`.

让我们回到如何处理*特定*错误的问题。对于大多数命名空间，答案是将为该错误定义一个异常类，您应该抓住它。例如，假设我们再次使用 S3`getObject`方法，并且想要在我们请求的存储桶不存在时做一些事情。查看[S3 Exception 命名空间文档](http://docs.aws.amazon.com/aws-sdk-php/latest/namespace-Aws.S3.Exception.html)，我们看到有一个[`NoSuchBucketException`](http://docs.aws.amazon.com/aws-sdk-php/latest/class-Aws.S3.Exception.NoSuchBucketException.html)我们可以捕获：

```
try {
    $result = $s3->getObject(array(
        'Bucket' => 'my bucket',
        'Key'    => 'path/to/file'
    ));
}
catch (NoSuchBucketException $e) {
    echo 'There is no such bucket.';
} 
```

（在实践中，通过反复试验比仔细阅读文档更容易找出哪些操作可以引发哪些异常。）

最后，值得一提的是 EC2 API。与所有其他服务不同，EC2 命名空间仅包含一个异常类，即[`Ec2Exception`](http://docs.aws.amazon.com/aws-sdk-php/latest/class-Aws.Ec2.Exception.Ec2Exception.html). 如果您想捕获并处理特定错误，则需要检查异常对象以找出您正在处理的错误类型。您可以通过检查[`getExceptionCode()`](http://docs.aws.amazon.com/aws-sdk-php/latest/class-Aws.Common.Exception.ServiceResponseException.html#_getExceptionCode)异常方法返回的值来做到这一点。

例如，我最近编写的脚本中的（修改的）片段授予指定 IP 访问我们的 MySQL 服务器的权限：

```
try {
    $result = $ec2->authorizeSecurityGroupIngress([
        'GroupName' => 'mygroup',
        'IpProtocol' => 'tcp',
        'ToPort' => 3306,
        'CidrIp' => $ip . "/32",
    ]);
}
catch (Ec2Exception $e) {
    if ($e->getExceptionCode() == 'InvalidPermission.Duplicate') {
        echo "IP already has requested permission.";
    }
    else {
        // Don't know how to deal with this error; let's crash
        throw $e;
    }
} 
```

请注意，`InvalidPermission.Duplicate`AWS PHP SDK 文档中未列出可能的异常代码（如本例所示），但您可以通过反复试验或从[EC2 API 本身的文档](http://docs.aws.amazon.com/AWSEC2/latest/APIReference/query-apis.html)中找到它们，其中每个 API 操作的页面都包含一个“错误部分列出了它可以返回的错误代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-30T17:28:01.950

您也可以使用此方法： `$response = $s3->doesObjectExist( $bucket, $key );`

如果对象存在，它将返回一个布尔值 true 响应。

[dosObjectExist 的 AWS 文档](http://docs.aws.amazon.com/aws-sdk-php/latest/class-Aws.S3.S3Client.html#_doesObjectExist)

# ruby - 如何使用正则表达式匹配前面没有“=”的单词？

> ID：15918748
> 
> 赞同：4
> 
> 时间：2013-04-10T06:42:22.703
> 
> 标签：ruby, regex, lookbehind

我想从 Ruby 中的 Fortran 代码中提取符号。这些符号将具有以下模式（注意：变量类型和属性部分已被过滤掉）：

```
a = b, c(2)       ! Match result should be "a" and "c"
d(3) = [1,2, &    ! Match result should be "d"
  3] 
```

我尝试过的正则表达式是`((?<!=)\w+(?![^\[]*\]+)(?=( |,|\(|$)))`有`lookaround`东西的。但由于 的限制`lookbehind`，我无法匹配“= *”来排除`b`。

我使用 Rubular 进行测试。为了您的方便，请参见[此处](http://rubular.com/r/kz3Y9xKsDV)。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:54:10.663

为了使您的正则表达式工作，您可以先替换所有尾随空格`=`

```
.gsub(/=\s+/, '=').scan(/((?<!=)\w+(?![^\[]*\]+)(?=( |,|\(|$)))/) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:50:04.097

您可以做的一件简单的事情是将行一分为二（在“=”处），并且只在左操作数上执行正则表达式。

这样您就不必编写任何复杂的正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:50:59.303

我的建议是将您的正则表达式分成 2 个表达式。正则表达式不必总是单行的。

# java - 广度优先搜索不工作 100%

> ID：15918751
> 
> 赞同：0
> 
> 时间：2013-04-10T06:42:34.390
> 
> 标签：java, algorithm, loops, breadth-first-search

正在为一个作为链表数组构建的邻接矩阵做一个 bfs。

这是我的 bfs 方法，接收链表数组和起始位置：

```
public static int bfs(List<Integer>[] smallWorld, int start){

    int distance = 0;
    int size = smallWorld.length;

    //for each location in smallWorld do a bfs to every other location      
    int u;
    int white = 0, grey = 1, black = 2;
    int [] color, d, pie;
    Queue <Integer> q = new <Integer> LinkedList();

    color = new int [size];
    d = new int [size];
    pie = new int [size];

    for( int x = 0; x < size; x++){
        color[x] = white;
        d[x] = -1;
        pie[x] = -1;
    }

    color[start] = grey;
    d[start] = 0;
    pie[start] = -1;
    q.addAll(smallWorld[start]);        //enqueue the adjacent items
    while(!q.isEmpty()){
        u = q.remove();
        for(int v = 0; v < smallWorld[u].size(); v++){      //for every vertex u is adjacent to
            if(color[v] == white){
                color[v] = grey;
                d[v] = d[u] + 1;
                pie[v] = u;
                q.addAll(smallWorld[v]);
            }
        }
        color[u] = black;
    }

    int x = 0;
    while(d[x] != -1){
        distance = distance + d[x];
        x++;
    } 
```

真的 smallWorld 的长度为 500，但出于测试目的，我只是在数组中的第一个索引上执行 bfs。（你知道 bfs 应该返回数组中 2 个索引之间的最短路径）。我的已经运行了大约 14 分钟，我不知道为什么，我的意思是我认为它是因为 !isEmpty() 但这只会在它的白色迟早必须用完的情况下添加到队列中。

**已编辑。解决了无限循环问题，但 BFS 方法仍然不是 100%**

任何想法为什么它不起作用？我的意思是我遵循算法到 T，但算法通常不是指链表数组。

解决这个问题的任何想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:48:51.700

问题可能出在这个while循环中。你没有增加 x。

```
int x = 0;
while(d[x] != -1){
    distance = distance + d[x];
} 
```

# c# - 打印机连接事件

> ID：15918752
> 
> 赞同：2
> 
> 时间：2013-04-10T06:42:36.050
> 
> 标签：c#, printers

我正在设计一个需要识别打印机是否连接的应用程序。我知道 WMI 枚举连接的打印机的方法。但是如果应用程序启动后连接打印机怎么办？我们有任何事件或 API 吗？或者我必须经常使用 WMI 代码检查？

为简单起见，我尝试了`LocalPrintServer`这样的课程：

```
PrintQueue printQueue = null;

            LocalPrintServer localPrintServer = new LocalPrintServer();

            // Retrieving collection of local printer on user machine
            PrintQueueCollection localPrinterCollection =
                localPrintServer.GetPrintQueues(new[] { EnumeratedPrintQueueTypes.Local, EnumeratedPrintQueueTypes.Connections });

            System.Collections.IEnumerator localPrinterEnumerator =
                localPrinterCollection.GetEnumerator();

            while(localPrinterEnumerator.MoveNext())
            {
                // Get PrintQueue from first available printer
                printQueue = (PrintQueue)localPrinterEnumerator.Current;                       

                if (!printQueue.IsOffline)
                {

                    string s = "Printer found " + printQueue.FullName.ToString();
                    listBox1.Items.Add(s);
                    bDeviceFound = true;
                    button1.Enabled = bDeviceFound;

                } 
```

您知道它将显示它在应用程序启动时运行的已安装打印机。问题是它无法识别应用程序启动后是否连接了打印机。如果我们有任何事件，我可以调用此方法重新枚举打印机，除非我应该使用线程或 while 循环？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T05:49:06.470

通过设置计时器来提取详细信息解决了该问题。

# asp.net - 从一个浏览器复制的网址在另一个浏览器中不起作用

> ID：15918753
> 
> 赞同：2
> 
> 时间：2013-04-10T06:42:37.140
> 
> 标签：asp.net, url, browser

我面临的问题是我有一个 asp.net Web 应用程序
，当我在任何浏览器（如 Internet Explorer 等）中打开它时

。当我复制 url 并将该 url 粘贴到任何其他浏览器（如 chrome 或 firefox）时，页面未打开它的所有内容，如站点地图等。

我在下面分享快照。这是我第一次在任何浏览器中通过 vs2008 打开应用程序时的图像。

![web form](![我第一次打开应用程序时的图像](https://i.stack.imgur.com/ajKNm.png))

这是我复制网址并将其粘贴到另一个浏览器时的图像

![错误图像]！[在此处输入图像描述](https://i.stack.imgur.com/zUFCh.png)

请帮助我是新手。

任何帮助将不胜感激！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:28:17.480

如果我理解正确，您是在一个浏览器中启动网络应用程序。在那里您登录并导航到您的应用程序中的某个页面。然后，您复制该新页面的 url 并将其粘贴到不同的浏览器中。

这意味着您将访问同一页面，但无需登录。这真的是您想要的吗？（如果是，为什么要登录？）

也许你应该检测到用户没有登录，并重定向到登录页面。您甚至可以记住原始 url，以使该用户在登录后回到他最初想要的页面。

# javascript - Trigger.io：forge.prefs 函数中的变量范围

> ID：15918755
> 
> 赞同：1
> 
> 时间：2013-04-10T06:42:41.470
> 
> 标签：javascript, function, trigger.io, forge

我们很难将 forge.prefs 值分配给变量，以便我们可以将其作为参数传递。

这是一个示例调用：

```
forge.prefs.get('offset_val' function(offset1){
     offset = offset1; 
})
forge.prefs.get('id', function(val){
     uid = val;
})

load_my_car(uid,offset); 
```

它正在返回`undefined`，在嵌套的 prefs 命令中调用它非常不方便。

有人可以帮助我们解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:54:54.293

`forge.prefs.get()`可能是一个异步函数调用，这意味着它的回调执行有些延迟。在您的示例`load_my_car()`中，在触发两个回调之前执行，因此变量仍然未定义。

您必须确保在调用之前触发回调`load_my_car()`，试试这个：

```
forge.prefs.get('offset_val' function(offset1){
  forge.prefs.get('id', function(val){
    load_my_car(val,offset1);
  }); 
}); 
```

如果你真的不想有两个嵌套`forge.prefs.get()`，你需要检查哪个回调首先完成，然后只`load_my_car()`在第二个完成后调用。

# c++ - 如何让每个线程在 C++11 中使用自己的 RNG

> ID：15918758
> 
> 赞同：7
> 
> 时间：2013-04-10T06:42:48.767
> 
> 标签：c++, random, c++11, openmp

我在 C++11 中使用新的随机数生成器。尽管有不同的意见，但从这个[线程](https://stackoverflow.com/questions/8813592/c11-thread-safety-of-random-number-generators)来看，似乎大多数人认为它们不是线程安全的。因此，我想制作一个程序，其中每个线程都使用自己的 RNG。

在有关如何使用 OpenMP 完成此操作的相关讨论中给出了一个示例：

```
#include <random>
#include <iostream>
#include <time.h>
#include "omp.h"

using namespace std;

int main()
{
    unsigned long long app = 0;
    {
        //mt19937_64 engine((omp_get_thread_num() + 1)); //USE FOR MULTITHREADING
        mt19937_64 engine; //USE FOR SINGLE THREAD
        uniform_real_distribution<double> zeroToOne(0.0, 1.0);

        //#pragma omp parallel for reduction(+:app) //USE FOR MULTITHREADING
        for (unsigned long long i = 0; i < 2000000000; i++)
        {
            if(zeroToOne(engine) < 0.5) app++;
        }
    }
    cout << app << endl;
    return 0;
} 
```

当我运行该程序的多线程和单线程版本并跟踪时间时，它们在执行后需要相同的时间才能完成。另外，`app`两种情况下的大小不一样，但我怀疑这仅仅是因为种子不同。

**问题**：提供的示例是否正确显示了如何强制每个线程使用自己的 RNG？如果没有，我可以看到一个如何做到这一点的例子，或者获得他们解释如何实现这一点的某个地方的参考吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T07:40:03.840

您不能在多个线程之间共享随机引擎的实例。您应该锁定单个引擎或为每个线程创建一个引擎（使用不同的种子（请注意 e4e5f4 关于创建并行 MT 引擎的答案））。在 OpenMP 的情况下，您可以轻松地将每个线程的一个引擎存储在一个向量中，并通过`omp_get_thread_num()`位于 0 和`omp_get_num_threads()–1`.

```
class RNG
{
public:
    typedef std::mt19937 Engine;
    typedef std::uniform_real_distribution<double> Distribution;

    RNG() : engines(), distribution(0.0, 1.0)
    {
        int threads = std::max(1, omp_get_max_threads());
        for(int seed = 0; seed < threads; ++seed)
        {
            engines.push_back(Engine(seed));
        }
    }

    double operator()()
    {
        int id = omp_get_thread_num();
        return distribution(engines[id]);
    }

    std::vector<Engine> engines;
    Distribution distribution;
};

int main()
{
     RNG rand;
     unsigned long app = 0;

     #pragma omp parallel for reduction(+:app)
     for (unsigned long long i = 0; i < 2000000000; i++)
     {
         if(rand() < 0.5) app++;
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:55:10.013

我会避免使用随机播种。它最终可能会出现重叠的流。这最终会影响最终的统计数据。

[我会建议一些像这样](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/DC/dc.html)久经考验的解决方案

# ios - 将控制器添加为从子视图打开的子控制器

> ID：15918762
> 
> 赞同：0
> 
> 时间：2013-04-10T06:43:08.910
> 
> 标签：ios, objective-c, uiviewcontroller

我正在使用最新的 SDK 开发 iOS 5.0+ 应用程序。

我有一个带有视图（**VC1**）的视图控制器。在此视图中，我有一个自定义子项`UIView`（**view2**）。

从这个子视图中，我将打开另一个视图控制器（**VC2**），我想将**VC2**添加为**VC1**的子控制器，但我不知道该怎么做。

现在，在**view2**我有这个方法：

```
- (void) handleLongClick:(UILongPressGestureRecognizer *)gestureRecognizer
{
    SettingsDialogViewController* dialog = [[SettingsDialogViewController alloc] initWithNibName:@"GaugeSettingsDialogViewController" bundle:nil];

    dialog.view.frame = self.superview.superview.bounds;
    [self.superview.superview addSubview:dialog.view];
} 
```

但是如果我这样做，`dialog`将被释放并且我不想添加实例变量，因为它会一直在内存中。

**如何将 VC2 添加为 VC1 的子控制器？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:07:33.920

> 但如果我这样做，对话框将被释放，我不想添加实例变量，因为它每次都会在内存中。

即使你不这样做，它也会在内存中减少一个保留计数。但是你不需要把它作为一个成员变量才显示。

有很多方法可以从一个视图过渡到另一个视图。我看到您的两个视图都有视图控制器。因此，我将向您展示最简单（常见）的方法。

*   推送到导航堆栈

如果您的视图有一个导航控制器，那么您可以将第二个控制器推送到导航堆栈。显示 VC1 时

```
UINavigationController *navigationller = [[UINavigationController alloc] initWithRootViewController:VC1];
// show VC1 
```

然后像这样显示VC2

```
- (void) handleLongClick:(UILongPressGestureRecognizer *)gestureRecognizer
{
SettingsDialogViewController* dialog = [[SettingsDialogViewController alloc] initWithNibName:@"GaugeSettingsDialogViewController" bundle:nil];

[self.navigationController pushViewController:dialog animated:YES];
} 
```

您会在导航栏上自动获得一个后退按钮。

*   显示为模态

为此，您不需要导航控制器。

```
- (void) handleLongClick:(UILongPressGestureRecognizer *)gestureRecognizer
{
SettingsDialogViewController* dialog = [[SettingsDialogViewController alloc] initWithNibName:@"GaugeSettingsDialogViewController" bundle:nil];

[self presentViewController:dialog animated:YES completion:nil];
} 
```

当然，如果需要，您需要添加一个操作以再次关闭它。在导航控制器上，您会自动在导航栏上获得一个后退按钮。请尝试两者并决定您需要什么。

# javascript - 从日期字符串中获取时间

> ID：15918765
> 
> 赞同：14
> 
> 时间：2013-04-10T06:43:16.930
> 
> 标签：javascript, date, time

如何使用 JavaScript 从日期字符串中获取时间。

我的日期字符串采用以下方式：2013-04-08T10:28:43Z

如何以小时和分钟格式拆分时间。我想通过以下方式显示活动流：

xxx 已于 2 小时前
更新 yyy 已于 3 分钟前更新

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-10T06:58:44.837

只需创建新的 Date 对象：

```
var myDate = new Date("2013-04-08T10:28:43Z");

var minutes = myDate.getMinutes();
var hours = myDate.getHours(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:55:04.750

简单的 Javascript 绰绰有余：Date.parse 会将您的字符串转换为时间戳：

```
var date_string = '2013-04-08T10:28:43Z';

var your_date_object = new Date();
your_date_object.setTime(Date.parse( date_string ));

var min = your_date_object.getUTCMinutes();
var hour = your_date_object.getUTCHours(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:21:38.633

**从您的 dateString 中提取日期**

首先提取数字

```
var sp = dateString.match(/\d+/g) 
```

然后你可以构建一个 Date 对象或跳过这一步

```
var dateObject = new Date(+sp[0], +sp[1]-1, +sp[2], +sp[3], +sp[4], +sp[5]) 
```

并在此 Date 对象上调用`getHours`and 。`getMinutes`

如果您跳过此步骤，则直接获得`+sp[3]`数小时和`+sp[4]`数分钟。

**计算差异**

由于您似乎必须与现在进行比较，因此您将通过这种方式获得时差：

```
var timeDifference = new Date(new Date - dateObject); 
```

然后调用`getHours`和`getMinutes`。`timeDifference`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T06:47:54.297

这就是所谓的 ISO 字符串。有一些实用程序可以将 ISO 字符串解析为常规 JavaScript 日期，例如 Dojo。

```
var date = dojo.date.stamp.fromISOString("2013-04-08T10:28:43Z"); 
```

[http://dojotoolkit.org/reference-guide/1.8/dojo/date/stamp.html](http://dojotoolkit.org/reference-guide/1.8/dojo/date/stamp.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-02-01T17:19:56.253

```
var curr_date = new Date();
var test_date = new Date("2016-01-08 10:55:43");

hours_diff=Math.abs(test_date.getHours()-curr_date.getHours());
minutes_diff=Math.abs(test_date.getHours()*60+test_date.getMinutes()-curr_date.getHours()*60-curr_date.getMinutes());
console.log("xxx has updated "+hours_diff+" hours ago");
console.log("xxx has updated "+minutes_diff+" minutes ago"); //not so beautiful

///STILL IF THE date is a string and !!NOT CREATED with DATE 
/// "Get the time from a date string" might have this solution

var date = "2016-01-08 10:55:43";
var hours = date.slice(-8);

console.log("hours and minutes string is "+hours); 
```

[小提琴测试](https://jsfiddle.net/haidu_bogdan/tpLx2d4j/)

# c++ - 简单的 C++ 卡片程序。未知错误

> ID：15918770
> 
> 赞同：0
> 
> 时间：2013-04-10T06:43:50.973
> 
> 标签：c++

好的，所以我是 C++ 新手，并尝试编写简单的程序，即一副纸牌。但我得到了错误：“未解决的外部问题”。我感觉它与构造函数中的实例化有关。快速浏览将不胜感激。

```
#include "Card.h"
#include "Deck.h"

Deck:: Deck()
{
  this -> currentCard=0;

  this -> index = 0;

    for(int i=0;i<4;i++)
    {
        for(int j =0; j < 13;j++)
       {
          deck[index].setVal(i);
      deck[index].setSuit (j);
          index++;
        }
    }
 }

void Deck::shuffle()
{
  //implementation
  }
Card Deck:: dealCard()
{
  //implementation
   }

int main (){} 
```

我的头文件是：

```
#include "Card.h"

class Deck
{
public:
Deck();
void shuffle();
Card dealCard();

private:
Card deck [52];
int currentCard;
int index;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:51:15.727

它错误意味着您有**未解析的外部符号**。

现在**符号**可以是变量、类、成员函数中的任何东西。

为什么它们未解决是因为您的代码（或您正在使用的库）的某些部分可能依赖于这些符号，并且由于您没有链接正确的库或实现它们而找不到它们。

请尝试编译所有源文件并确保没有缺少符号（变量、类、成员函数等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:57:25.327

`Card`类似乎未声明。您可能想在`Card.h`文件中执行此操作。您可以通过简单地键入来前向声明它`class Deck;`，但请记住它只是一个占位符，无论如何都必须在某个地方解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:06:26.953

通常“未解析的外部”指向未解析的符号：

> 错误 LNK2001：未解析的外部符号“未解析的符号”

这将向您显示链接器缺少的内容。

希望这会有所帮助，亚龙

# jquery - 在 jQuery 中使用 .css 方法设置宽度，窗口重新大小为条件

> ID：15918777
> 
> 赞同：1
> 
> 时间：2013-04-10T06:44:23.650
> 
> 标签：jquery, html, css, responsive-design, window-resize

在我的模板中，我想`#wrapper`使用 jQuery 动态设置容器宽度，因此对于任何屏幕分辨率，`#wrapper`宽度都是`screen width - 200`.

```
var _width= ($(window).width() - 200) 
$("#wrapper").css("width",_width); 
```

设置此值后，我想在窗口重新大小时动态更改宽度。我使用以下 jQuery：

```
$(window).bind('resize', function() {
    var _width_prcnt = (($(window).width()- (200)/($(window).width()/100) );
    $('#wrapper').stop(false,true).animate({
        'width':_width_prcnt+ '%'
    });
}); 
```

我认为这不能正常工作。我如何使用`if-else`语句来设置一次宽度，并且只有在窗口重新调整大小时才能为宽度设置动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:49:49.710

您应该仅使用 css 调整窗口大小。带有：200px 的窗口很容易使用`margin`.

```
#wrapper{
min-width:500px;
margin:0 100px;
} 
```

这也是居中的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:47:36.193

您可以使用 CSS3`calc()`来实现这一点（[doc](https://developer.mozilla.org/en/docs/CSS/calc)）：

```
#wrapper{
    width:calc(100% - 200px);
    margin: 0 100px; //If you want the content centered
} 
```

作为`#wrapper`宽度是窗口宽度的元素的直接子元素。

请参阅caniuse.com 上的[此图表以了解浏览器兼容性，并查看](http://caniuse.com/#feat=calc)[此小提琴](http://jsfiddle.net/bigood/mBbCy/)以获取工作示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:03:39.067

jQuery .resize() 应该可以工作，几分钟前我刚刚在[将 CSS 纵横比设置为宽度的倒数时回答了另一个问题？](https://stackoverflow.com/questions/15918108/set-css-aspect-ratio-to-the-inverse-of-width/15918763#15918763). 检查我的答案+链接的小提琴，看看它是否为您提供了您正在寻找的功能。让我知道我的答案是否适合您，或者让我知道 .resize() 不适合的原因，我会尝试给出更好的答案。

# java - 如何停止 ActiveMQ 一段时间然后再次启动它？

> ID：15918781
> 
> 赞同：1
> 
> 时间：2013-04-10T06:44:53.497
> 
> 标签：java, activemq

当我的输入主题中有 1000 条消息时，我想要一个 java 代码停止 ActiveMQ 5 分钟。然后在 5 分钟后再次启动它。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:56:29.573

您可以启用 jmx 并使用 JMX api 连接到 activemq。抓住 borker 并对其调用停止操作。您也可以对特定队列执行相同的操作。

首先使用 jconsole 执行此操作。如果可行，请弄清楚如何使用 JMX api 做同样的事情。

[http://activemq.apache.org/jmx.html](http://activemq.apache.org/jmx.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:04:48.253

您可以在线程中运行侦听器，在收到 1000 条消息时暂停线程，而不是在超时后恢复线程。

# iphone - 委托IBAction

> ID：15918786
> 
> 赞同：0
> 
> 时间：2013-04-10T06:45:05.020
> 
> 标签：iphone, ios, objective-c, xcode

这是我课上写的

设置视图控制器.h

```
@class settingViewController;

@protocol settingViewDelegate <NSObject>

- (void)modalDoneDel :(settingViewController *)controller;

@end

@interface settingViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> 

@property (nonatomic, weak) id <settingViewDelegate> delegate;

- (IBAction)modalDone:(id)sender;

@end 
```

设置视图控制器.m

```
@synthesize delegate;

- (IBAction)modalDone:(id)sender {

[self.delegate modalDoneDel:self];

} 
```

左视图控制器.h

```
#import "settingViewController.h"

@interface leftViewController : UIViewController <UITableViewDataSource,        UITableViewDelegate, settingViewDelegate> 

@property (strong, nonatomic) IBOutlet UIView *menuView;

- (IBAction)test:(id)sender;

@end 
```

左视图控制器.m

```
#import "leftViewController.h"

@interface leftViewController ()

@implementation leftViewController

-(void)modalDoneDel:(settingViewController *)controller{

NSLog(@"ss");
} 
```

为什么控制台上没有出现“ss”？哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:48:57.733

*可能的问题*

您需要将委托分配给您的类对象。如果您忘记了这一点，您的委托方法将不会被调用。

所以你必须在某个地方调用settingViewController。

```
SettingViewController * settingViewController = [settingViewController alloc]init];
settingViewController.delegate = self; // VERY IMP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:49:23.180

设置视图控制器.h

```
#import <UIKit/UIKit.h>
#import "SetNameCell.h"
#import "SetDateCell.h"
#import "UIViewController+Alerts.h"

@class settingViewController;

@protocol settingViewDelegate <NSObject>

- (void)modalDoneDel :(settingViewController *)controller;

@end

@interface settingViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> {

    SetNameCell *nameCell;
    SetDateCell *dateCell;

}

@property (nonatomic, assign) id <settingViewDelegate> delegate;

@property (weak, nonatomic) IBOutlet UITableView *tableView;
@property (weak, nonatomic) IBOutlet UINavigationBar *navBarOut;
@property (weak, nonatomic) IBOutlet UIBarButtonItem *cancelButton;
@property (weak, nonatomic) IBOutlet UIBarButtonItem *doneButton;

- (IBAction)modalDone:(id)sender;

@end 
```

设置视图控制器.m

```
#import "settingViewController.h"
#import <QuartzCore/QuartzCore.h>

@implementation settingViewController

@synthesize delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"LightYopTexturedPaperWisoutBorder"] forBarMetrics:UIBarMetricsDefault];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return 2;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

     NSString *CellIdentifier;

    self.tableView.separatorColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bg_stitch.png"]];

    if(indexPath.row == 0) {

        CellIdentifier = @"Name";
        nameCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        return nameCell;

    } else {

        CellIdentifier = @"Date";
        dateCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        return dateCell;

    }
}

- (IBAction)modalDone:(id)sender {

    [self.delegate modalDoneDel:self];

} 
@end 
```

左视图控制器.h

```
#import <UIKit/UIKit.h>
#import "JASidePanelController.h"
#import "UIViewController+JASidePanel.h"
#import "CoreData/CoreData.h"
#import "SetNameCell.h"
#import "SetDateCell.h"
#import "MenuCell.h"
#import "settingViewController.h"
#import "UIViewController+Alerts.h"

@interface leftViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, settingViewDelegate> {

    NSMutableArray *_items;
    MenuCell *cell;

    Boolean *addStar;

    UIViewController *settingView;
    UIView *currentView;
    UIView *theWindow;

}

@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;
@property (strong, nonatomic) IBOutlet UIView *menuView;

- (IBAction)test:(id)sender;
- (IBAction)test1:(id)sender;

- (IBAction)editMenu:(id)sender;

@property (weak, nonatomic) IBOutlet UITableView *tableView;
@property (weak, nonatomic) IBOutlet UIButton *editButtonOut;
@property (strong, nonatomic) IBOutlet UIView *pickerView;
@property (weak, nonatomic) IBOutlet UIButton *addDoneOut;
@property (weak, nonatomic) IBOutlet UIView *footer;
@property (weak, nonatomic) IBOutlet UIButton *settingOut;
@property (weak, nonatomic) IBOutlet UIView *leftContView;

@end 
```

左视图控制器.m

```
#import "leftViewController.h"
#import "QuartzCore/QuartzCore.h"

#define kModalSeguePushedBackAnimationDuration 0.3
#define kModalSegueBringForwardAnimationDuration 0.3

@interface leftViewController ()

@end

@implementation leftViewController

@synthesize managedObjectContext = _managedObjectContext;
@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;

- (void)viewDidLoad
{
    [super viewDidLoad];

    settingViewController *setingViewController = [[settingViewController alloc] init];
    setingViewController.delegate = self;

    _items = [[NSMutableArray alloc] init];

    self.footer.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"LightYopTexturedPaperWisoutBorder"]];

    _editButtonOut.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"LightBlueTexturedPaper.png"]];
    _editButtonOut.layer.borderColor = [UIColor lightGrayColor].CGColor;
    _editButtonOut.layer.borderWidth = 0.9f;
    _editButtonOut.layer.cornerRadius = 5.0f;

    _leftContView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"LightYopTexturedPaperWisoutBorder"]];
    _leftContView.layer.cornerRadius = 5.0f;

    _addDoneOut.hidden = YES;

}

- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // The table view should not be re-orderable.
    return YES;
}

-(void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath {

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return 5;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier = @"Cell";

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    UIView *bgview = [[UIView alloc] initWithFrame:CGRectZero];

    bgview.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"LightYopTexturedPaper"]];
    cell.backgroundView = bgview;

    UIView *bgviewselect = [[UIView alloc] initWithFrame:CGRectZero];
    bgviewselect.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"LightSelectTexturedPaper.png"]];
    cell.selectedBackgroundView = bgviewselect;

    self.tableView.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"LightYopTexturedPaperWisoutBorder"]];

    self.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero];

    cell.menuLabel.highlightedTextColor = [UIColor whiteColor];

    cell.manuImg.image = [UIImage imageNamed:@"moneybox.png"];

    return cell;

}

- (IBAction)editMenu:(id)sender {

    if(!self.tableView.editing){
        [_editButtonOut setTitle:@"Done" forState:UIControlStateNormal];
        [self.sidePanelController setCenterPanelHidden:YES animated:YES duration:0.2f];
        [self.tableView setEditing: !self.tableView.editing animated:YES];
        _settingOut.hidden = YES;
          } else {

        [_editButtonOut setTitle:@"Edit" forState:UIControlStateNormal];
        [self.sidePanelController setCenterPanelHidden:NO animated:YES duration:0.2f];
        [self.tableView setEditing: NO animated:YES];
        _settingOut.hidden = NO;
    }
}

-(UIImageView*)screenshotForView: (UIView*) view {
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, NO, [[UIScreen mainScreen] scale]);

    [view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    if ([UIApplication sharedApplication].statusBarHidden == NO) {
        CGFloat barHeight = [[UIApplication sharedApplication] statusBarFrame].size.height;
        CGFloat scale = [[UIScreen mainScreen] scale];
        CGRect rect = CGRectMake(0, barHeight * scale, view.bounds.size.width * scale, (view.bounds.size.height - barHeight) * scale);
        CGImageRef imageRef = CGImageCreateWithImageInRect(image.CGImage, rect);
        image = [UIImage imageWithCGImage:imageRef scale:image.scale orientation:image.imageOrientation];
    }

    UIImageView* screenshot = [[UIImageView alloc] initWithImage:image];
    screenshot.frame = CGRectMake(0, 0, view.bounds.size.width, view.bounds.size.height);

    screenshot.layer.cornerRadius = 5.0f;
    screenshot.layer.masksToBounds = YES;

    return screenshot;
}

-(CAAnimationGroup*)animationGroupPushedBackward {
    CATransform3D t1 = CATransform3DIdentity;
    t1.m34 = 1.0 / -900;
    t1 = CATransform3DScale(t1, 0.90, 0.90, 1);
    t1 = CATransform3DRotate(t1, 15.0f * M_PI/180.0f, 1, 0, 0);

    CATransform3D t2 = CATransform3DIdentity;
    t2.m34 = 1.0 / -900;
    t2 = CATransform3DTranslate(t2, 0.0, -20.0, 0.0);
    t2 = CATransform3DScale(t2, 0.85, 0.85, 1);

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform"];
    animation.toValue = [NSValue valueWithCATransform3D:t1];
    animation.duration = 2 * kModalSeguePushedBackAnimationDuration / 3;
    animation.fillMode = kCAFillModeForwards;
    animation.removedOnCompletion = NO;
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];

    CABasicAnimation *animation2 = [CABasicAnimation animationWithKeyPath:@"transform"];
    animation2.toValue = [NSValue valueWithCATransform3D:t2];
    animation2.beginTime = animation.duration;
    animation2.duration = kModalSeguePushedBackAnimationDuration / 3;
    animation2.fillMode = kCAFillModeForwards;
    [animation2 setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];
    animation2.removedOnCompletion = NO;

    CAAnimationGroup *group = [CAAnimationGroup animation];
    group.fillMode = kCAFillModeForwards;
    group.removedOnCompletion = NO;
    [group setDuration:animation.duration * 2];
    [group setAnimations:[NSArray arrayWithObjects:animation,animation2, nil]];
    return group;
}

-(CAAnimationGroup*)animationGroupBringForward {
    CATransform3D t1 = CATransform3DIdentity;
    t1.m34 = 1.0 / -900;
    t1 = CATransform3DScale(t1, 0.90, 0.90, 1);
    t1 = CATransform3DRotate(t1, 15.0f * M_PI/180.0f, 1, 0, 0);

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform"];
    animation.toValue = [NSValue valueWithCATransform3D:t1];
    animation.duration = kModalSegueBringForwardAnimationDuration / 2;
    animation.fillMode = kCAFillModeForwards;
    animation.removedOnCompletion = NO;
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];

    CABasicAnimation *animation2 = [CABasicAnimation animationWithKeyPath:@"transform"];
    animation2.toValue = [NSValue valueWithCATransform3D:CATransform3DIdentity];
    animation2.beginTime = animation.duration;
    animation2.duration = kModalSegueBringForwardAnimationDuration / 2;
    animation2.fillMode = kCAFillModeForwards;
    [animation2 setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];

    animation2.removedOnCompletion = NO;

    CAAnimationGroup *group = [CAAnimationGroup animation];
    group.fillMode = kCAFillModeForwards;
    group.removedOnCompletion = NO;
    [group setDuration:animation.duration * 2];
    [group setAnimations:[NSArray arrayWithObjects:animation,animation2, nil]];
    return group;
}

- (IBAction)test:(id)sender {

/*    theWindow = [self.view superview];

    [theWindow addSubview:settingView.view];

    settingView.view.frame = CGRectMake(0, theWindow.frame.size.height, theWindow.frame.size.width, theWindow.frame.size.height);

    [self.sidePanelController setCenterPanelHidden:YES animated:NO duration:0.0f];

    [_leftContView.layer addAnimation:[self animationGroupPushedBackward] forKey:nil];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.2f];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];

    settingView.view.frame = CGRectMake(0, 10, theWindow.frame.size.width, theWindow.frame.size.height);

    [UIView commitAnimations];   */

    //[self presentViewController:settingView animated:YES completion:nil];

    [self.sidePanelController setCenterPanelHidden:YES animated:NO duration:0.0f];

    [_leftContView.layer addAnimation:[self animationGroupPushedBackward] forKey:nil];

    [self presentAlertViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"addNewItem"] named:@"dd" animated:YES];

}

- (IBAction)test1:(id)sender {

     [_leftContView.layer addAnimation:[self animationGroupBringForward] forKey:nil];

     [self.sidePanelController setCenterPanelHidden:NO animated:NO duration:0.0f];

}

-(void)modalDoneDel:(settingViewController *)controller{

     NSLog(@"ss");

    [self.sidePanelController setCenterPanelHidden:NO animated:NO duration:0.0f];

}

@end 
```

# android - Android：在反射绘图中删除分隔符颜色

> ID：15918789
> 
> 赞同：0
> 
> 时间：2013-04-10T06:45:15.763
> 
> 标签：android, android-layout, android-drawable

我只想为我的徽标图像制作镜面反射。所以我使用了以下代码。 ![在此处输入图像描述](https://i.stack.imgur.com/Zq2Rx.png) ![在此处输入图像描述](https://i.stack.imgur.com/cdVr8.png)

```
public Bitmap applyReflection(Drawable drawable) {
            Bitmap originalImage = ((BitmapDrawable)drawable).getBitmap();
            final int reflectionGap = -4;
            int width = originalImage.getWidth();
            int height = originalImage.getHeight();          
            Matrix matrix = new Matrix();
            matrix.preScale(1, -1);
            Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0, height/2, width, height/2, matrix, false);          
            Bitmap bitmapWithReflection = Bitmap.createBitmap(width, (height + height/2), Config.ARGB_8888);
            Canvas canvas = new Canvas(bitmapWithReflection);
            canvas.drawBitmap(originalImage, 0, 0, null);
            Paint defaultPaint = new Paint();
            canvas.drawRect(0, height, width, height + reflectionGap, defaultPaint);
            canvas.drawBitmap(reflectionImage,0, height + reflectionGap, null);

            Paint paint = new Paint();
            LinearGradient shader = new LinearGradient(0, originalImage.getHeight(), 0,

                    bitmapWithReflection.getHeight() + reflectionGap, 0x70ffffff, 0x00ffffff, TileMode.CLAMP);
            //paint.setShader(shader);
            paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));
            canvas.drawRect(0, height, width, bitmapWithReflection.getHeight() + reflectionGap, paint);

            return bitmapWithReflection;
        } 
```

我只想删除黑线分隔符。请给我最好的方法来做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:41:09.497

最后我发现了错误。我以为`final int reflectionGap = -4;`会缩小差距。但我必须`final int reflectionGap = 0;`在此之后删除分隔线

# matlab - 在matlab中将GML文件转换为邻接矩阵

> ID：15918791
> 
> 赞同：3
> 
> 时间：2013-04-10T06:45:18.217
> 
> 标签：matlab, graph, adjacency-matrix, graph-modelling-language

我有一个有向图的[GML](http://en.wikipedia.org/wiki/Graph_Modelling_Language)文件（[政治博客](http://www-personal.umich.edu/~mejn/netdata/polblogs.zip)）。我想在 Matlab 中使用这个图作为邻接矩阵。我怎样才能转换它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:35:40.857

[`here`](http://www.mathworks.com/matlabcentral/answers/15318)为此目的有一个示例代码：

```
%Extracting edges from gml file graph
fileName = 'dolphins.gml';
inputfile = fopen(fileName);
A=[];
l=0;
k=1;
while 1
      % Get a line from the input file
      tline = fgetl(inputfile);
      % Quit if end of file
      if ~ischar(tline)
          break
      end
      nums = regexp(tline,'\d+','match');
      if length(nums)
          if l==1
              l=0;
              A(k,2)=str2num(nums{1});  
              k=k+1;
              continue;
          end
          A(k,1)=str2num(nums{1});
          l=1;
      else
          l=0;
          continue;
      end
end 
```

`A[]`，一个`[m x 2]`矩阵，包含节点之间的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T10:07:21.690

使用 R，您可以使用：

```
library("multiplex") ## >v1.5 
read.gml(file, as="matrix") 
```

# php - hiphop-php编译错误

> ID：15918792
> 
> 赞同：1
> 
> 时间：2013-04-10T06:45:18.640
> 
> 标签：php, fedora, hiphop

我正在安装 hiphop-php。在最后一步（编译）中，我遇到了一个错误，

```
-- CMAKE_PREFIX_PATH was missing, proceeding anyway
-- MySQL Include dir: /usr/include  library dir: /usr/lib64/mysql
-- MySQL client libraries: mysqlclient_r
-- Could NOT find LIBMEMCACHED  (missing:  LIBMEMCACHED_LIBRARY LIBMEMCACHED_INCLUDE_DIR)
CMake Error at CMake/HPHPFindLibs.cmake:46 (message):
  libmemcache is too old, found and we need 0.39
Call Stack (most recent call first):
  CMake/HPHPSetup.cmake:46 (include)
  src/CMakeLists.txt:18 (include)

-- Configuring incomplete, errors occurred! 
```

我用谷歌搜索，但没有得到正确的，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T23:23:50.160

你遵循什么指令，你在什么平台上？我刚刚测试了 ubuntu 12.04 和 13.04，它们开箱即用。

# performance - 解析函数性能代价高昂

> ID：15918794
> 
> 赞同：1
> 
> 时间：2013-04-10T06:45:34.607
> 
> 标签：performance, oracle, analytical

我有一个 table_A (C1,C2,C3,.....,Cn, 日期戳)

注意：列 datestamp 已编入索引

QRY1

```
select * from 
(select max(datestamp) dates from table_A) t,
table_A
where a.datestamp = t.dates 
```

QRY2

```
 select * from (
   select a.* , max (datestamp) over() dates from table_A a))
   where datestamp = dates 
```

使用索引扫描（在 1 秒内执行）解释 QRY1 的 Paln 成本非常低。

但是对于 QRY2 进行全表扫描（在 8 秒内执行）的成本非常高。

只是想知道为什么分析函数会忽略索引。

谢谢（我使用 PL/SQL Oracle 10g）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:05:15.560

从[文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)中：

> 分析函数根据一组行计算聚合值。它们与聚合函数的不同之处在于它们为每个组返回多行。
> ...
> 分析函数是查询中执行的最后一组操作，除了最后的 ORDER BY 子句。在处理分析函数之前，所有连接和所有 WHERE、GROUP BY 和 HAVING 子句都已完成。

您的内部选择正在从表中提取所有行，因为它没有`where`子句；因为它必须获取每一行，所以索引没有帮助，它还不如进行全表扫描。使用索引`datestamp`会更糟——它必须对索引进行全面扫描，然后无论如何都要访问每个数据行，从而增加 IO。如果您自己运行内部选择，您会看到它返回很多行，而不仅仅是一个。

然后，外部选择匹配内部选择的特定行（或行）。由于在处理中计算分析值时，该比较无法推送到内部选择中。

# php - Wordpress WPML 替换 Li a 值

> ID：15918800
> 
> 赞同：0
> 
> 时间：2013-04-10T06:45:41.107
> 
> 标签：php, wordpress, wpml

大家好，

场景：我正在运行一个 WPML（多语言站点），但问题是每种语言都有其社交媒体帐户，而后端仅支持一个。

请问li a的值可以改吗？基本上，当我查看中文内容时，默认（英文社交媒体帐户）将更改为中文。

Wordpress 主题“Magnovus”使用 li a 转储社交媒体。我想要的是将锚标签的值从英文替换为中文。

提前致谢，

帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:52:49.190

你可以条件像

```
if ( ICL_LANGUAGE_CODE === 'en' ) {
    //for english language
} else if ( ICL_LANGUAGE_CODE === '{chinese_lang_code}' ) {
    //for chinese language
} 
```

# c# - asp.net 的插入命令

> ID：15918801
> 
> 赞同：0
> 
> 时间：2013-04-10T06:45:53.983
> 
> 标签：c#, asp.net, .net, sql

我将图片路径插入数据库，当我得到路径时，我用`img`标签显示它们。

我可以做到，但我找不到在 sql 查询之后必须编写的方法。

sql查询后我必须写什么？

在`Page_Load`我的选择命令中有效。

```
 c = new Common(ConfigurationManager.ConnectionStrings["ahapp"]);
    string sql = "select Query";
    string str = "";
    DataTable dt = c.GetDataTable(sql);
    foreach (DataRow item in dt.Rows)
    {
        str += "<img src='" + item["path"].ToString() + "' style='width:100px' />";
    }

    dokList.InnerHtml = str; 
```

这段代码总是说： ![在此处输入图像描述](https://i.stack.imgur.com/8VJTU.png)

```
 sql ="INSERT INTO DR_OZLUK VALUES(3," + ddlDoktor.SelectedValue + "," + belgeid + ",3," + str + ",1)";
    SqlCommand cmd = new SqlCommand(sql, c);
    cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:50:31.313

您的`c`对象似乎不是 SqlConnection 类型。那个普通班是什么？`SqlCommand`接受两个参数。第一个是字符串，它可以是 sql 语句或存储过程的名称，另一个参数是 SqlConnection 类型的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:50:37.390

*insert 语句*容易受到 sql 注入的攻击，但问题与 sql 语句无关。问题是您在Objection中传递`Common`类而不是`Connection`对象。`SqlCommand`

试试这个代码片段：

```
string connStr = "connection string here";
string sqlStatement = "INSERT INTO DR_OZLUK VALUES (3, @val1, @val2, 3, @val3, 1)";
using (SqlConnection conn = new SqlConnection(connStr))
{
    using(SqlCommand comm = new SqlCommand())
    {
        comm.Connection = conn;
        comm.CommandText = sqlStatement;
        comm.CommandType = CommandType.Text;

        comm.Parameters.AddWithValue("@val1", ddlDoktor.SelectedValue);
        comm.Parameters.AddWithValue("@val2", belgeid);
        comm.Parameters.AddWithValue("@val3", str);

        try
        {
            conn.Open();
            comm.ExecuteNonQuery();
        }
        catch(SqlException e)
        {
            // do something with the exception
            // do not hide it
            // e.Message.ToString()
        }
    }
} 
```

为了正确编码

*   `using`用于 propr 对象处理的use语句
*   使用`try-catch`块来正确处理对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:52:17.017

我认为 c 应该是连接对象

```
c = new Common 
```

您正在传递 c 代替连接对象。

创建对象的 SQLCommand 的签名是

```
public SqlCommand(
    string cmdText,
    SqlConnection connection
) 
```

所以根据它，你的第二个参数必须是连接对象。这就是它给你一个错误的原因。您正在传递 Common 类对象来创建命令对象。visi MSDN 链接以获取更多信息：http: [//msdn.microsoft.com/en-us/library/877h0y3a.aspx](http://msdn.microsoft.com/en-us/library/877h0y3a.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:00:21.323

您的 c 不是 a`SqlConnection`或者您的 IDE 有另一个与您粘贴的错误混淆的错误。有时 VS2010 在显示错误时会损坏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T20:07:54.313

```
 Or try this, this sample code is very secure and 100% works any time, you can copy paste it but u must put your connection string and table 

    string connectionStr = "connection string STRING";
    string sqlQuery = "INSERT INTO yourtable VALUES (ID, @pam1, @pam2)";
    ///// Go to Base and execute Query but with trycatch because if you have problem with using connection it will tell you

    try{

    using (SqlConnection conn = new SqlConnection(connStr))
    {
        using(SqlCommand komand = new SqlCommand(conn,sqlQuery)) //command to use connection and Sqlquery

    string fromcontrol = "test"; //this is string just for test

            komand.Parameters.AddWithValue("@pam1", fromcontrol.ToString());
            komand.Parameters.AddWithValue("@val2", fromcontrol.ToString());

                conn.Open();
                komand.ExecuteNonQuery();
            }
            catch(SqlException e)
            {
    //throw your execption to javascript  or response; e.Message.ToString() + "SQL connection or query error"; 
            }

    catch(Exception ex)
    {
    //throw your execption to javascript  or response; e.Message.ToString()+ "system error"; 
    }

finally
{
conn.Close();
conn.Dispose();
}

        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T07:07:31.393

谢谢大家。我找到了解决方案。我添加了这段代码`c.GetExecuteNonQuery(sql);`并使 c 成为全局的。

# java - 端口未列出

> ID：15918803
> 
> 赞同：1
> 
> 时间：2013-04-10T06:46:02.170
> 
> 标签：java, linux, rxtx

我想在 linux 中与 USB GSM Modem 进行串行通信。我使用了以下代码。但 portList.hashElements 返回为假。我使用的是 RXTX 库 2.1.7 版本。请帮我。

**代码**

```
import java.io.*;
import java.util.*;
import gnu.io.*;

public class SimpleWrite {

static Enumeration portList;
static CommPortIdentifier portId;
static String messageString = "Hello, world!\n";
static SerialPort serialPort;
static OutputStream outputStream;
private static SerialPort p;

public static void main(String[] args) throws NoSuchPortException {

    Enumeration ports = CommPortIdentifier.getPortIdentifiers();
    System.out.println("start: "+ ports.hasMoreElements());
    while(ports.hasMoreElements())
    {
        CommPortIdentifier port = (CommPortIdentifier) ports.nextElement();
        System.out.print(port.getName() + " -> " + port.getCurrentOwner() + " -> ");
        switch(port.getPortType())
        {
            case CommPortIdentifier.PORT_PARALLEL:
                System.out.println("parell");
            break;
            case CommPortIdentifier.PORT_SERIAL:
                System.out.println("serial");
            try {
                p = (SerialPort) port.open("SimpleWrite", 1000);
                int baudRate = 57600; // 57600bps
                p.setSerialPortParams(
                        baudRate,
                        SerialPort.DATABITS_8,
                        SerialPort.STOPBITS_1,
                        SerialPort.PARITY_NONE);
            } catch (PortInUseException e) {
                System.out.println(e.getMessage());
            } catch (UnsupportedCommOperationException e) {
                System.out.println(e.getMessage());
            }
            break;
        }
    }
    System.out.println("stop");
}
} 
```

**输出是：**

> # 稳定的图书馆
> 
> Native lib Version = RXTX-2.1-7 Java lib Version = RXTX-2.1-7 start: **false** stop Experimental: JNI_OnLoad called .

System.out.println("开始："+ ports.hasMoreElements()); 打印为**false**。请帮我。感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T03:25:01.483

注意设备命名，因为 linux 不识别任何命名模式。

也许我的回答可以帮助：

[在ubuntu上用java进行串口识别](https://stackoverflow.com/questions/18669379/serial-port-identification-with-java-on-ubuntu/21567949#21567949)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T15:08:42.203

在 Ubuntu 14.04 下对我来说类似的错误。未列出端口。通过以 root 身份运行程序找到了解决方法。

# ruby-on-rails - 如何在模态页脚中提交数据？

> ID：15918807
> 
> 赞同：0
> 
> 时间：2013-04-10T06:46:16.237
> 
> 标签：ruby-on-rails, twitter-bootstrap

以下代码未提交*评论*：

```
.modal{ :id=>"#{digest.policy.id}", :class=>'modal hide'}
  .modal-header
    %h3
      = digest.policy.name
  .modal-body{ :style=>'display: block; height:200px;'}
    .modal-form
      = form_tag '/alerts/archive', :name=>"form#{digest.policy.id}", :remote=>'true' do
        = hidden_field_tag 'policy_id', digest.policy.id
        = hidden_field_tag 'parent_id', id
  .modal-footer
    #div{:style=>'text-align:left;'}Comment:
    = text_area_tag  'comment', '' , :cols=>'85', :rows=>'3'
    %a(data-toggle="modal" href="##{digest.policy.id}" class="btn" class="btn")Cancel
    %a(onclick="javascript:document.form#{digest.policy.id}.submit()" class="btn btn-primary")Archive 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:06:06.303

您的 textarea 在表单标签之外。我建议将您的模式包装到表单元素中并使用普通的提交按钮。

**例子：**

```
= form_tag '/alerts/archive', :name=>"form#{digest.policy.id}", :remote=>'true' do
  .modal{ :id=>"#{digest.policy.id}", :class=>'modal hide'}
    .modal-header
      %h3
        = digest.policy.name
    .modal-body{ :style=>'display: block; height:200px;'}
      .modal-form
        = hidden_field_tag 'policy_id', digest.policy.id
        = hidden_field_tag 'parent_id', id
    .modal-footer
      #div{:style=>'text-align:left;'}Comment:
      = text_area_tag  'comment', '' , :cols=>'85', :rows=>'3'
      %a(data-toggle="modal" href="##{digest.policy.id}" class="btn" class="btn")Cancel
      = submit_tag "Archive", :class => "btn btn-primary" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T05:09:07.950

**成功！**

```
= form_tag '/alerts/archive', :name=>"form#{digest.policy.id}", :remote=>'true' do
  .modal{ :id=>"#{digest.policy.id}", :class=>'modal hide'}
    .modal-header
      %h3
        = digest.policy.name
    .modal-body{ :style=>'display: block; height:200px;'}
      .modal-form
        = hidden_field_tag 'policy_id', digest.policy.id
        = hidden_field_tag 'parent_id', id
    .modal-footer
      #div{:style=>'text-align:left;'}Comment:
      = text_area_tag  'comment', '' , :cols=>'85', :rows=>'3'
      %a(data-toggle="modal" href="##{digest.policy.id}" class="btn" class="btn")Cancel
      %a(onclick="javascript:document.form#{digest.policy.id}.submit()" class="btn btn-primary")Archive 
```

# 3d - 是否可以使用 dygraphs 创建 3d 图表？

> ID：15918812
> 
> 赞同：1
> 
> 时间：2013-04-10T06:46:43.767
> 
> 标签：3d, bar-chart, dygraphs

是否可以使用 Dygraphs 创建 3D 图表（条形图）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:25:23.233

您必须编写自定义绘图仪。请参阅[http://blog.dygraphs.com/2012/08/introducing-custom-plotters.html](http://blog.dygraphs.com/2012/08/introducing-custom-plotters.html)。

# c# - 从另一个表单获取数据而不重新加载第一个表单

> ID：15918816
> 
> 赞同：0
> 
> 时间：2013-04-10T06:46:58.717
> 
> 标签：c#

我是.net 的新手。

我现在正在开发一个简单的病历应用程序。第一个表单是`Appointments`（这是 Home 表单的 MDI 子表单）。

首先，我将输入姓名，当我单击患者代码按钮时，它将显示`patientrecord`. 在此表格中，我将输入患者的个人详细信息，然后如果我单击保存按钮，约会表格的 Tokenno 文本框应增加 1。

但是当我关闭`Patientrecord`表单时，名称文本框变得清晰。而且令牌号也没有增加。您能否帮助如何在`Appointments`不从“患者记录”表格重新加载表格的情况下更新表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:02:44.393

我建议您在项目“WinForm”中添加一个“全局”类，并添加可从所有页面访问的属性并保留其值，即使“重新加载”

全局类的小例子：

```
public static class global
{
    /* ************************************ */
    // Variables Global
    /* ************************************ */
    public static firstName;
    public static lastName;
    public static birthday;
    public static email;
    //etc....
} 
```

# css - 不使用“溢出：隐藏”如何创建两个水平相邻的 div，其中 div2 占用 div1 剩余的宽度空间

> ID：15918817
> 
> 赞同：0
> 
> 时间：2013-04-10T06:47:11.733
> 
> 标签：css

我想创建一个具有 2 个遵循以下规则的水平 div 的布局：

1.  `#left`在宽度上有先例（根据内容的大小调整宽度），并`#right`占据右侧的剩余宽度
2.  `overflow:hidden`由于下拉菜单不使用

我创建了这个小提琴来演示这个问题：http: **[//jsfiddle.net/7GcRD/](http://jsfiddle.net/7GcRD/)**。它`#right{overflow:hidden;}`用来展示我想要它的样子。为了显示您的解决方案有效，您需要`#right{overflow:hidden;}`从示例中的 CSS 中删除。

尽管阅读了这两个资源，但我无法解决问题：

1.  [http://colinaarts.com/articles/the-magic-of-overflow-hidden/](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)
2.  [http://www.w3.org/TR/CSS21/visuren.html#block-formatting](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)

**建议要么导致右侧**div不占用整个宽度，要么导致**右侧**div 中出现滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:27:43.373

试试这个尺寸：http: [//jsfiddle.net/designbymichael/VnLGX/1/](http://jsfiddle.net/designbymichael/VnLGX/1/)

它使用 jQuery 动态检测左框的宽度，即使窗口大小发生变化，并相应地调整右框。您也可以将该函数用于页面中的任何其他事件侦听器。

请注意，我还在左右框周围添加了一个容器 div，删除了浮动（我们不必再关心它了），将宽度更改为自动，然后对右框使用绝对定位。

这是我用来评估框宽度并进行相应调整的函数：

```
function adjustBoxes() {
   var paddingWidth = 10;  // set this to adjust distance between boxes
   var leftWidth = $('#left').width();  // get left box width
   var docWidth = $(document).width();  // get document width
   var difference = docWidth - leftWidth; // set the difference
    $('#right').width(difference - paddingWidth);
} 
```

# java - 使用构造函数自动装配对象

> ID：15918819
> 
> 赞同：0
> 
> 时间：2013-04-10T06:47:23.483
> 
> 标签：java, spring, dependency-injection

我需要从 spring 工厂获取一个对象，该对象具有构造函数参数，其值在运行时指定。我该怎么做呢。如果我没有任何构造函数，这很有效。

```
@Service
public class PortService implements Runnable {

@Autowired
LeaveProcessor leaveProcessor;

private Socket socket;

public PortService(Socket socket) {
    this.socket = socket;
}

public void run() {
    PrintWriter writer;
    BufferedReader reader;
    try {
        reader = new BufferedReader(new InputStreamReader(
                socket.getInputStream()));
        String message = reader.readLine();
        writer = new PrintWriter(socket.getOutputStream(), true);
        writer.println(leaveProcessor.process(message));
        writer.close();
        socket.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

编辑 - 如果没有构造函数，我可以通过直接访问 Autowireed 对象 leaveProcessor 使其工作。

套接字：这是从工厂加载的：

```
public void start() {

    try {
        ServerSocket mobCom = new ServerSocket(9846);
        ExecutorService executorService = Executors.newCachedThreadPool();

        while (true) {
            Socket socket = mobCom.accept();
            PortService portService = new PortService(socket);
            executorService.submit(portService);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:52:56.823

您将需要实现一个工厂 bean

```
public class PortServiceFactory implements FactoryBean<PortService> {
     PortService getObject() {
         Socket socket;
         // Code to initialize the socket
         return new PortService(socket);
     }
     // FactoryBean interface requires a couple of other methods,
     // implement those
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:35:13.847

从您的 context.xml 文件本身传递构造函数参数。

```
 <bean id="theBeanID" class="your.package.PortService" >
       <constructor-arg ref="socketBeanID"  />  
     </bean>

    <bean id="socketBeanID" class="your.package.Socket" /> 
```

我不知道你是如何创建 Socket 对象的，但它必须传递给你的 xml 上下文文件本身的构造函数。

如果可以避免使用构造函数，请自动装配 Socket 类本身。

```
@Autowired
private Socket socket; 
```

**或者，使用new**关键字在您的类 PortService 本身中实例化它。

或者，如果需要，使用一些创建 Socket 对象的静态工厂方法。

# android-emulator - Titanium Studio - 运行 Android 模拟器时出错

> ID：15918830
> 
> 赞同：0
> 
> 时间：2013-04-10T06:48:23.197
> 
> 标签：android-emulator, titanium, titanium-mobile

我正在尝试在 Mac OS X 10.8.2 上的 Android 模拟器中运行**默认**项目。根据入门屏幕，我的 Android 设置一切正常，并且我已经安装了入门指南告诉我的所有必要文件。

但是当我在 Android 模拟器中运行该应用程序时，它会在控制台中显示很多错误。

这些是我得到的错误：http: [//pastebin.com/fGBn9b35](http://pastebin.com/fGBn9b35)

问题是，它显示了所有这些错误，但最后，应用程序正常出现在模拟器中，虽然需要几分钟才能显示，我想摆脱所有这些错误。

有谁知道为什么会这么乱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:12:59.980

> 你的 Logcat 显示一切正常。确实，您在模拟器中遇到了电池、GPS、SoundPool 等问题。确保您没有应用程序级别的问题。
> 
> 在发布之前进行基础研究
> 
> [Android logcat 错误](https://stackoverflow.com/questions/12403330/android-logcat-errors)
> 
> [Android Logcat 错误](https://stackoverflow.com/questions/8570310/android-logcat-error)

# .net - 如何在 Asp.Net web api 中返回深度序列化对象（具有复杂类型属性）？

> ID：15918836
> 
> 赞同：2
> 
> 时间：2013-04-10T06:48:45.700
> 
> 标签：.net, serialization, asp.net-web-api, odata, wcf-web-api

我有下一节课：

```
public class Event
{
   public int Id { get; set; }
   public string Title { get; set; }
   public string Description { get; set; }
   public List<ImageLink> Images { get; set; }
}

public class ImageLink
{
   public int Id { get; set; }
   public string Url { get; set; }
} 
```

我的行动：

```
public IQueryable<Event> GetEvents()
{
    var events = EventsRepository.Events.AsQueryable();
    return events;
} 
```

EventsRepository.Events - 返回带有许多图像链接的事件，但在 brouser 中我没有看到它们：

```
 "odata.metadata":"http://localhost:28286/odata/$metadata#Events","value":[
    {
      "Title":"Title", 
      "Description":"Description"
    },... 
```

我知道 Odata 有 $expand 选项，但似乎还不支持。如何强制我的应用程序返回深度可序列化对象？因为我想在我的客户端中获取所有包含的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:08:19.133

如果 ImageLink 被建模为复杂类型，则 Event 的响应负载将包含 ImageLink inline。您可以告诉模型构建器将 ImageLink 映射为复杂类型，使用：

```
modelBuilder.ComplexType<ImageLink>(); 
```

正确的方法是使用 $expand。我们现在正在支持 $select 和 $expand 并且应该在下周初的每晚构建中都有工作位。

# javascript - 在按键事件期间检测未来的文本

> ID：15918837
> 
> 赞同：0
> 
> 时间：2013-04-10T06:48:45.840
> 
> 标签：javascript, jquery, keyboard, keypress

我有一个可编辑的 div，我需要在输入最新键之前将输入的文本与其内容进行比较。

例如：以前的文字：Bhumi 新的文字：Bhumik

这是正在键入的 K 我应该知道内容已更改。这种检测需要在 keyPress 事件上进行。

但是，当我在每次按键时 console.log div 的 html 时，最终的 console.log 是“Bhumi”，即。在“k”键上，内容仍然没有注册 K。这仅在 keyup 上添加。无论如何，我可以检测到未来的内容可能是什么，以便在每次按键时我都会得到我在按键上的内容？？？

另外，我不是只处理一行，而是处理多行。

编辑 ::: 我不需要输入的字符。假设我有 10 行，并且我可以在每次按键时预测将在 keyup 处出现的行的最终内容，然后将先前的文本与未来的预测文本进行比较，我可以知道用户当前在哪一行输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:02:15.063

您可以尝试使用`.on()`处理程序处理多个嵌套键事件：

```
$('div').on('keypress keyup keydown', function(){
   console.log($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:53:05.490

您可以从事件对象中读取按下的键。

```
var code = (e.keyCode ? e.keyCode : e.which);
if(code == 13) { //Enter keycode
    //Do something
} 
```

（请参阅[jQuery 事件按键：按下了哪个键？](https://stackoverflow.com/questions/302122/jquery-event-keypress-which-key-was-pressed)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:54:49.457

试试这个代码..

```
$("#divId").keypress(function (e) {
            var keycode = e.keycode ? e.keycode : e.which;         
              }
        }); 
```

您可以使用 keypress 、keydown 或 keyup。，有关 Javascript 键事件的更多信息，请单击**[此处](http://www.bloggingdeveloper.com/post/KeyPress-KeyDown-KeyUp-The-Difference-Between-Javascript-Key-Events.aspx)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-28T16:56:43.430

您可以通过获取将插入新字符的位置来生成未来值：

```
$('input').bind('keypress',function (){
    var value = e.target.value,
        idx = e.target.selectionStart,
        key = e.key;
        value =  value.slice(0, idx) + key + value.slice(idx + Math.abs(0));
    return yourfunction(value);
}); 
```

# asp.net - Azure 并置缓存会话状态（实例失败/更新）

> ID：15918838
> 
> 赞同：0
> 
> 时间：2013-04-10T06:48:46.157
> 
> 标签：asp.net, azure, azure-caching

当通过 DistributedCacheSessionStateStoreProvider 用于会话状态时，Azure 同位缓存如何处理实例更新（滚动/增量）或其中一个实例出现故障的情况。

是所有位于同一位置的缓存数据都复制到了所有实例，还是因为故障而丢失了一些数据？

例如，如果请求 #1 由实例 0 处理，然后实例 0 崩溃/更新可以请求由实例 1 处理的请求 #2 继续访问来自先前请求的相同会话状态数据？

任何想法或有人可以指出我描述此类案例的任何好的资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:26:30.800

要与 SessionState 一起使用，您必须使用“高可用性”[配置缓存角色。](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/#enable-caching)这将使所有缓存条目分布在角色的所有实例中。因此缓存项在实例更新/回收时不会丢失。

# ios - UIPopover : 处理不同的方向

> ID：15918846
> 
> 赞同：0
> 
> 时间：2013-04-10T06:49:17.697
> 
> 标签：ios, uipopovercontroller

我正在开发一个应用程序，并且有大量的弹出窗口。从子视图、导航栏项目等的按钮中显示出来。但它们必须始终出现在屏幕的中心。所以我对呈现的矩形进行了硬编码，并让它们出现在中心。这都是纵向模式。现在我也必须让应用程序在景观中工作。因为坐标是手工编码的。它只是不工作。我怎么解决这个问题 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:21:44.553

我最后写了下课。基本上所有的弹出框都是 560,545 大小，所以我对其进行了硬编码。

AnimatedViewController.h

```
#import <UIKit/UIKit.h>

/*
 Animated popover class.

 This class intherits from the UIPopover controller class to add following 
 functionality

 * Add a full screen translucent black bacground
 * Popover appears to be sliding up from bottom of the screen
 * Presents the viewController used to initialize the popover controller
   in the center of the screen
 * Always presents the Popover from the topViewController.view and never from a 
   subview
 * Register to orientation change notification.

 Also see @KSCustomPopoverBackgroundView for formatting of the view controller.

 */

@interface AnimatedPopoverController : UIPopoverController{
    UIView* blackTranslucentBackGround;
    UIView* animatingView;
    UIView* mainView;
}

- (id)initWithViewControllerContent:(UIViewController*)viewController;

-(void)presentPopover;

@end 
```

AnimatedViewController.m

```
#import "AnimatedPopoverController.h"
#import "Utilities.h"

@implementation AnimatedPopoverController

- (id)initWithViewControllerContent:(UIViewController*)viewController{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didRotate:) name:UIDeviceOrientationDidChangeNotification object:nil];
    self = [super initWithContentViewController:viewController];
    if (self){
        CGSize fullScreenSize = [[UIScreen mainScreen] bounds].size;
        [viewController.view setBackgroundColor:[UIColor clearColor]];
        mainView = viewController.view;

        // Create the center view
        animatingView = [[UIView alloc] initWithFrame:CGRectMake(0,
                                                                 0,
                                                                 560,
                                                                 545)];
        for (UIView* subview in [viewController.view subviews]){
            [animatingView addSubview:subview];
        }
        [viewController.view addSubview:animatingView];
        // Create black backdrop
        blackTranslucentBackGround = [[UIView alloc]
                                      initWithFrame:CGRectMake(0,0,fullScreenSize.width,fullScreenSize.height)];

        [blackTranslucentBackGround setAlpha:0.5];
        [blackTranslucentBackGround setBackgroundColor:[UIColor blackColor]];
        [viewController.view addSubview:blackTranslucentBackGround];
        [viewController.view sendSubviewToBack:blackTranslucentBackGround];
        [self setPopoverLayoutMargins:UIEdgeInsetsMake(0,0,0,0)];
        [self setPopoverBackgroundViewClass:[KSCustomPopoverBackgroundView class]];

    }
    return self;
}

- (void) presentPopover{
    [self centerViewForOrienation];
    [self slideAnimation:animatingView];
    UIViewController* topViewController = [Utilities topMostController];
    [self presentPopoverFromRect:topViewController.view.frame
                          inView:topViewController.view
        permittedArrowDirections:0
                        animated:YES];
}

-(void) slideAnimation:(UIView*) view{
    [view setCenter:CGPointMake(view.center.x,view.center.y+300)];
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.15];
    view.center = CGPointMake(view.center.x,view.center.y-300);
    [UIView commitAnimations];
}

-(void) didRotate:(NSNotification*)notification{
    [self centerViewForOrienation];
}

-(void)centerViewForOrienation{
    UIInterfaceOrientation  interfaceOrientation =   [[UIApplication sharedApplication] statusBarOrientation];
    CGSize fullScreenSize = [[UIScreen mainScreen] bounds].size;

    if(interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown ||
       interfaceOrientation == UIInterfaceOrientationPortrait) {
        [animatingView setCenter:CGPointMake(fullScreenSize.width/2,
                                             fullScreenSize.height/2)];

        [self setPopoverContentSize:fullScreenSize];
        [blackTranslucentBackGround setFrame:CGRectMake(0,0,fullScreenSize.width,fullScreenSize.height)];
    }else{
        [animatingView setCenter:CGPointMake(fullScreenSize.height/2,
                                             animatingView.frame.size.height/2 + 20)];

        [self setPopoverContentSize:CGSizeMake(fullScreenSize.height, fullScreenSize.width)];
        [blackTranslucentBackGround setFrame:CGRectMake(0,0,fullScreenSize.height,fullScreenSize.width)];
    }
}

@end 
```

topmostview控制器的实用方法

```
+ (UIViewController*) topMostController
{
    UIViewController *topController = [UIApplication sharedApplication].keyWindow.rootViewController;

    while (topController.presentedViewController) {
        topController = topController.presentedViewController;
    }

    return topController;
} 
```

用法：我在故事板中创建了一个弹出视图控制器并将其发送，然后使用如下类：

```
 popOverViewController = [[AnimatedPopoverController alloc] initWithViewControllerContent:changePhotoViewController];
    [popOverViewController presentPopover]; 
```

# android - Android：在surfaceview上实现admob

> ID：15918847
> 
> 赞同：3
> 
> 时间：2013-04-10T06:49:23.367
> 
> 标签：android, android-activity, integration, admob, surfaceview

我有一个使用 SurfaceView 的小游戏形式的活动。下面是代码片段。我很困惑如何在surfaceview上实现admob。请建议。

```
public class DroidzActivity extends Activity {

    private static final String TAG = DroidzActivity.class.getSimpleName();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // requesting to turn the title OFF
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        // making it full screen
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        // set our MainGamePanel as the View
        setContentView(new MainGamePanel(this));
        Log.d(TAG, "View added");
    }
}

public class MainGamePanel extends SurfaceView implements
        SurfaceHolder.Callback {
} 
```

**回答**

> 更新代码如下

```
public class DroidzActivity extends Activity {
    /** Called when the activity is first created. */

    private static final String TAG = DroidzActivity.class.getSimpleName();
    private static final String MY_AD_UNIT_ID = "XYZ";
    private AdView adView;  

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // requesting to turn the title OFF
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        // making it full screen
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        // set our MainGamePanel as the View
        //setContentView(new MainGamePanel(this));

        adView = new AdView(this, AdSize.SMART_BANNER, MY_AD_UNIT_ID);
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);
        lp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);

        adView.setLayoutParams(lp);

        RelativeLayout layout = new RelativeLayout(this);
        layout.addView(new MainGamePanel(this));
        layout.addView(adView);
        adView.loadAd(new AdRequest());
        setContentView(layout);

        Log.d(TAG, "View added");
    }

    @Override
    protected void onDestroy() {
        Log.d(TAG, "Destroying...");
        if (adView != null) {
              adView.destroy();
            }       
        super.onDestroy();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:38:15.283

将 DroidzActivity 的根视图设为包含 AdView 和 MainGamePanel 的 LinearLayout。

# awesomium - Awesomium 中的持久本地存储

> ID：15918850
> 
> 赞同：5
> 
> 时间：2013-04-10T06:49:37.513
> 
> 标签：awesomium

我们正在为一个新项目使用 Awesomium ( [http://awesomium.com/ )。](http://awesomium.com/)

问题是当在 JavaScript 中的 localStorage 中保存一些数据时，它不是持久的。当我关闭并重新打开应用程序时出现问题（刷新时我可以获取存储在 localStorage 中的数据）。

我认为 Awesomium 将数据存储在内存中的某个位置。有没有办法让它将数据存储在磁盘上？

谢谢。

编辑：

使用此代码解决了问题：

```
var webSession = WebCore.CreateWebSession(System.IO.Path.GetDirectoryName(Assembly.GetEntryAssembly().Location) , Awesomium.Core.WebPreferences.Default);
webControl.WebSession = webSession; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T09:32:59.227

永久本地存储保存在缓存文件夹中，您可以在 Awesomium 控件的调试文件夹中获取此文件夹

# cakephp - CakePHP 2x 向前看

> ID：15918858
> 
> 赞同：0
> 
> 时间：2013-04-10T06:49:58.903
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

在 CakePHP 2x 中，我想在满足某些条件时显示一些文本，并在满足另一个条件时转发到另一个页面，类似于下面的代码。但是第二部分不起作用。我知道重定向只能从控制器工作。有什么办法可以做到这一点？

```
if ($enable==2){ 
    echo $introduction; 
    } 
elseif ($enable==1){ 
    **$this->redirect(array('controller'=>'pages' , 'action' => 'home'));**
     } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:01:52.393

尝试使用 js helper，如下所示：

```
$this->Js->domReady('window.location.href="/your/URL/Here";'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T22:48:13.880

看起来您的逻辑是正确的，但您的 redirect() 网址不正确。

你的控制器（不是你的视图）应该有这个作为重定向：

```
$this->redirect(array('controller'=>'pages', 'action'=>'display', 'home')); 
```

PagesController 的工作方式与您的其他控制器略有不同。默认情况下，它使用“显示”操作来呈现页面。然后你传递页面名称。

以下是有关 PagesController 的更多信息：http: [//book.cakephp.org/2.0/en/controllers/pages-controller.html](http://book.cakephp.org/2.0/en/controllers/pages-controller.html)

希望有帮助。

# java - 如何从 Json 对象中获取数据？

> ID：15918861
> 
> 赞同：6
> 
> 时间：2013-04-10T06:50:08.403
> 
> 标签：java, android, json, facebook-fql

我正在开发一个与 facebook 集成的 android 应用程序。我正在使用 fql 查询从 facebook 获取信息。我的fql方法是

```
 void runfql(){
                String fqlQuery = "SELECT uid, name, pic_small,birthday FROM user WHERE uid IN " +
                  "(SELECT uid2 FROM friend WHERE uid1 = me() )";
                Bundle params = new Bundle();
                params.putString("q", fqlQuery);
                Session session = Session.getActiveSession();
                Request request = new Request(session,
                "/fql",                         
                params,                         
                HttpMethod.GET,                 
                new Request.Callback(){         
                        public void onCompleted(Response response) {

                        JSONObject myjson=response.getGraphObject().getInnerJSONObject();
                        Log.d("ResultResultResult: " ,""+myjson);                           
                        }                  
                    }); 
                    Request.executeBatchAsync(request);  

                } 
```

myjson 对象包含我想要的所有信息。像这样

```
 {"data":[{"uid":536089174,"birthday":"July 22","name":"Usman Aslam Sheikh"},{"uid":581379174,"birthday":"July 26","name":"Ammar Khalid"} 
```

问题是如何将该信息存储到不同的数组中？

请为此目的纠正一些代码。？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T06:53:10.217

```
String jsonString = yourstring;
JSONObject jsonResult = new JSONObject(jsonString);
JSONArray data = jsonResult.getJSONArray("data");
if(data != null) {
    String[] names = new String[data.length()];
    String[] birthdays = new String[data.length()];
    for(int i = 0 ; i < data.length() ; i++) {
        birthdays[i] = data.getString("birthday");
        names[i] = data.getString("name");
    }
} 
```

检查[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:00:12.497

像这样编辑您的代码...这可能会对您有所帮助..

```
JSONObject resultObject = new JSONObject(response);

JSONArray JArray = resultObject.getJSONArray("data");

                for (int t=0; t<JArray.length(); t++) {

                    JSONObject JObject = JtArray.getJSONObject(t);

builder.append(JObject.getString("uid")+": "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-05T03:41:29.100

在java中，它被解决为

```
String jsonString = yourstring;
JSONObject data = JSON.parse(jsonString);

//reading data using index
long firstData_uid = data["data"][0]["uid"];
String firstData_birthday = data["data"][0]["birthday"];
String firstData_name = data["data"][0]["name"]; 
```

在javascript中，它被解决为

```
var jsonString = yourstring;
var data = JSON.parse(jsonString);

//reading data using index
var firstData_uid = data["data"][0]["uid"];
var firstData_birthday = data["data"][0]["birthday"];
var firstData_name = data["data"][0]["name"]; 
```

# php - facebook sharer.php 如何捕获 og:image？

> ID：15918862
> 
> 赞同：1
> 
> 时间：2013-04-10T06:50:11.040
> 
> 标签：php, javascript, html, facebook, facebook-opengraph

问题是当我使用不同的图像源时，Facebook 共享页面的行为似乎不同。

例如，如果我使用互联网上可用的图像

```
<meta property="og:image" content="http://www.tekxon.com.pk/sites/all/themes/bluemasters/images/gallery/3.jpg"/> 
```

图像被捕获并立即显示在共享页面上，但是，如果我在自己的托管服务器上使用图像

```
<meta property="og:image" content="http://12.22.12.34/source/test2/2012/05/07/0/3/A/Content/14/Web201205_P14_medium.jpg"/> 
```

图片在第一次进入分享页面时不会显示，但是在我重新加载页面后会显示。此外，即使共享页面上没有显示图像，当我在我的 facebook 上查看图像时，图像仍然是共享的。为什么会这样？这是Facebook中的错误吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:37:26.380

我认为您的第二个链接第一次不起作用的原因与图像的加载时间有关。

预览图像已被缓存，因此即使您删除了它，它仍会向您显示上一张图像。

有关如何手动重新加载它的更多信息，请查看： [Facebook 喜欢 - 显示缓存版本 og:image，刷新或重新索引它的方式？](https://stackoverflow.com/questions/7572441/facebook-like-showing-cached-version-ogimage-way-to-refresh-or-reindex-it)

# java - 在摇摆中登录和注销

> ID：15918865
> 
> 赞同：-2
> 
> 时间：2013-04-10T06:50:19.813
> 
> 标签：java, swing

我已经制作了一个包含用户名和密码的表单......并提交按钮所以在点击提交后......我必须在单独的程序中进行验证部分，将结果设为 true 将允许用户导航到内部主页......添加禁用登录页面。如果登录详细信息错误，它将显示消息对话框..显示错误的用户名和密码..

```
public void actionPerformed(ActionEvent ae)
{
    if (ae.getSource() == submit) 
    {
        //to do...
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:26:29.920

不知道如何验证用户详细信息，可以肯定地说您不想在 EDT 的上下文中调用它。

相反，我使用 a`SwingWorker`为我完成工作（您必须填写）。它只是将一个`true`或`false`值返回给 EDT。

如果登录失败，我们只会显示[`JOptionPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#features)“登录失败”消息。否则我们可以简单地处理登录对话框......

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.Frame;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.concurrent.ExecutionException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestLogin {

    public static void main(String[] args) {
        new TestLogin();
    }

    public TestLogin() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JDialog frame = new JDialog((Frame) null, "Login", true);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                System.exit(0);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.insets = new Insets(4, 4, 4, 4);
            gbc.anchor = GridBagConstraints.WEST;
            add(new JLabel("User Name:"), gbc);
            gbc.gridy++;
            add(new JLabel("Password:"), gbc);
            gbc.gridx++;
            gbc.gridy = 0;
            add(new JTextField(10), gbc);
            gbc.gridy++;
            add(new JPasswordField(10), gbc);

            JButton okay = new JButton("Okay");
            JButton cancel = new JButton("Cancel");

            gbc.gridx = 0;
            gbc.gridy++;
            gbc.anchor = GridBagConstraints.CENTER;
            add(okay, gbc);
            gbc.gridx++;
            add(cancel, gbc);

            okay.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    setFormEnabled(false);
                    new LoginWorker().execute();
                }
            });

            cancel.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    SwingUtilities.windowForComponent((Component) e.getSource()).dispose();
                }
            });
        }

        protected void setFormEnabled(boolean enabled) {
            for (Component comp : getComponents()) {
                comp.setEnabled(enabled);
            }
        }

        protected void loginSuccessful() {
            SwingUtilities.windowForComponent(this).dispose();
        }

        protected void loginFailed() {
            JOptionPane.showMessageDialog(this, "Login failed", "Fail", JOptionPane.ERROR_MESSAGE);
            setFormEnabled(true);
        }

        public class LoginWorker extends SwingWorker<Boolean, Void> {

            @Override
            protected Boolean doInBackground() throws Exception {
                boolean login = false;
                Thread.sleep(5000);
                login = (int) Math.round(Math.random() * 1) == 0 ? false : true;
                return login;
            }

            @Override
            protected void done() {
                try {
                    Boolean login = get();
                    if (login) {
                        loginSuccessful();
                    } else {
                        loginFailed();
                    }
                } catch (InterruptedException ex) {
                    ex.printStackTrace();
                    loginFailed();
                } catch (ExecutionException ex) {
                    ex.printStackTrace();
                    loginFailed();
                }
            }
        }
    }
} 
```

# android - 处理器数量可靠性

> ID：15918867
> 
> 赞同：7
> 
> 时间：2013-04-10T06:50:23.710
> 
> 标签：android, unity3d, processor, hyperthreading

我在做一款安卓游戏，单核手机如 Galaxy S 和双核 Galaxy S2 的性能差距堪比白天和黑夜。因此，我没有为单核和双/四核制作不同的版本，而是考虑使用设备的处理器数量来关闭和打开某些图形功能。

但是获得处理器数量的可靠性如何？一些单核手机是否具有像英特尔超线程这样的线程，将一个核心显示为两个？还是有些双核手机比 Galaxy S2 慢很多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T15:54:06.683

虽然我认识到您在检查内核和自动调整设置的想法背后的良好意图，因此用户不必自己调整设置并提高性能，但它在实践中是行不通的。

这是因为有太多的设备和角落案例需要覆盖。例如：

*   一些多核设备将有核心停放，并且可能不会被您使用的任何核心检测检测到。
*   一些单核设备可能有也可能没有超线程，但不会显示为多核。
*   如果用户的手机处于省电模式，您仍会检测到多个内核，但无法识别它们以有限的容量运行。

我相信还有很多其他的例子。关键是，为了自动调整应用程序的设置，覆盖大部分/所有这些情况可能是一场噩梦，特别是考虑到一个相对简单的解决方案：在应用程序启动时询问用户他们想要什么设置，然后可以随时轻松调整这些设置。

有时最好把负担放在用户的腿上，特别是如果他们几乎不需要付出任何努力，而开发人员会付出更多的努力来做到这一点。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:43:59.447

图形效果应该由 GPU 绘制，而不是 CPU。

# html - CSS：两个div并排，在自动调整表格单元格

> ID：15918874
> 
> 赞同：4
> 
> 时间：2013-04-10T06:50:38.947
> 
> 标签：html, css, css-float

我在表格单元格中有 2 个 div。我希望左侧 div 根据其内容调整大小，并且我希望右侧 div 向右浮动。两者都应该垂直居中。

表格单元格自动调整大小如下：

```
<td style="width: 1px;">
   ...
</td> 
```

**[这是一个小提琴](http://jsfiddle.net/Homeliss/K8y9M/)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T06:56:09.723

从两个 div 中添加`display:table-cell`和删除 float 并从 td 中删除宽度

```
.left{
    font-size: 2em; 
    line-height: 1.4;
    background: #FFCC66; 
    display:table-cell
}
.right{
    background: #CCFF66;
    display:table-cell; 
    vertical-align:middle
} 
```

**[演示](http://jsfiddle.net/K8y9M/7/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:57:48.477

您可以尝试下面的代码片段，% 将使大小从该数字开始并自动调整大小

```
#div1
{ float: left; height:60%; width: 40%; }

#div2
{ float: right; height:60%; width: 60%; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:09:39.463

检查下面，例如两个 Div 彼此垂直对齐

```
<table width="100%" border="1">
  <tr>
      <td>
          <div style="display:table-cell; vertical-align:middle;">tetstingdfsdfds <br>test </div>

          <div style="text-align:right; display:table-cell; vertical-align:middle;">right side ...</div>
      </td>
 </tr>

</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:14:01.730

如果你添加另一个单元格，那么你有一个用于价格，另一个用于箭头，如下所示：

```
<td style="background: #66FFCC; vertical-align: middle; width: 1px;">
    <div style="font-size: 2em; line-height: 1.4;background: #FFCC66;">$50</div>
</td>
<td style="background: #66FFCC; vertical-align: middle; width: 1px;">
    <div style="background: #CCFF66;">&gt;</div>
</td> 
```

**[样本](http://jsfiddle.net/6k4T5/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T06:54:54.827

增加td宽度

```
<td style="width:56px;">
 <div style="float: left; font-size: 2em; line-height: 1.4; background: #FFCC66">$50</div>
 <div style="float: right; background: #CCFF66; margin-top:10px;"></div>
</td> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-05T08:10:05.533

`width: 1px;`从 中删除`td`并添加`display: inline-block`到两者`div`中：

```
.left{
    display: inline-block;
    float: left;
    background: #FA0;
    font-size: 2em;
    line-height: 1.4em;
}
.right{
    display: inline-block;
    float: right;
    background: #AF0;
    font-size: 1em;
    line-height: 2.8em;
} 
```

这是一个[小提琴](https://jsfiddle.net/g1ttLy12/)。

# php - PHP-on-couch 中的 Try/Catch 块未捕获异常

> ID：15918876
> 
> 赞同：0
> 
> 时间：2013-04-10T06:50:45.173
> 
> 标签：php, couchdb

我有以下 PHP 代码：

```
try{
$doc = couchDocument::getInstance($db,"document10");
}catch(couchExpention $e){
    echo $e->getMessage();
} 
```

但是，我得到的不是所需的输出：

```
PHP Fatal error:  Uncaught exception 'couchNotFoundException' with message 'Object Not Found - missing (GET /db/document10[])' in /var/www/public_html/lib/couchClient.php:1012
Stack trace:
#0 /var/www/public_html/lib/couchClient.php(157): couchException::factory(Array, 'GET', '/db/169488e77e2...', Array)
#1 /var/www/public_html/lib/couchClient.php(427): couchClient->_queryAndTest('GET', '/db/169488e77e2...', Array, Array)
#2 /var/www/public_html/lib/couchDocument.php(47): couchClient->getDoc('169488e77e2j385...')
#3 /var/www/public_html/lib/couchDocument.php(102): couchDocument->load('169488e77e2j385...')
#4 /var/www/public_html/index.php(8): couchDocument::getInstance(Object(couchClient), '169488e77e2j385...')
#5 {main}
  thrown in /var/www/public_html/lib/couchClient.php on line 1012 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:56:43.597

您的代码试图捕获 a`couchExpention`而不是 a`couchException`

# javascript - 无法找到我必须动态创建的输入类型单选按钮

> ID：15918881
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:51:05.317
> 
> 标签：javascript, jquery, cordova, windows-phone

我正在使用 PhoneGap 实现 Windows 手机应用程序，但我一无所获因为我无法找到输入类型的单选按钮，我必须动态创建它，但它找到了静态输入类型的单选按钮。

```
<div id="tablSettingDefaultHomeScreen" >
  <ul>
  </ul>
</div> 

function makeElements()
{
    for (var i = 0; i < 5; i++) {
        var tblResponding = " <li>"
         + "<label>" + i + "</label>";
        tblResponding = tblResponding + "<input name='group'  type='radio'  value='Cats' />";

        tblResponding = tblResponding  + "</li> ";
        $(toStaticHTML(tblResponding)).appendTo("#tablSettingDefaultHomeScreen ul");
    }
}

function getElements() {
    var x = document.getElementsByName("group");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:08:43.933

如果您使用的是 JQuery，那么您可以尝试[打开](http://api.jquery.com/on/)：-

例如 ：-

```
 $('input[type=radio]').on("click", function(event){
      alert('hi');
    }); 
```

[查看工作演示](http://jsfiddle.net/mWkU4/1/)

# ruby-on-rails - 在 Rails 项目中的 RSpec 中放置“魔术评论”（ utf-8 ）的正确位置在哪里？

> ID：15918882
> 
> 赞同：0
> 
> 时间：2013-04-10T06:51:07.707
> 
> 标签：ruby-on-rails, rspec

我正在为我的 rails 项目使用 rspec，在规范文件中使用德语变音符号（ä ö ü）时似乎必须使用 hack：

```
# coding: utf-8 
```

把这个放在哪里最好？把它放在 spec_helper.rb 或其他地方是常见的做法吗？

提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:13:59.977

进入每个`.rb`具有 UTF-8 字符的文件，直到第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:19:00.203

最好的方法似乎（在尝试了许多选项之后）是使用

宝石魔法编码

因为这是让 gem 找到任何相关文件以供您的应用程序更改的最简单方法:)

# gridview - 致命错误：在 Magento 中的非对象上调用成员函数 setColumn()

> ID：15918886
> 
> 赞同：4
> 
> 时间：2013-04-10T06:51:22.307
> 
> 标签：gridview, magento-1.7, admin, renderer

致命错误：在 D:\Program Files\wamp\www\magento\app\code\core\Mage\Adminhtml\Block\Widget\Grid\Column.php 中的非对象上调用成员函数 setColumn() 在线291

在管理网格部分，我使用了此列的详细信息

```
protected function _prepareColumns()
{
    $this->addColumn('giftcard_id', 
        array(
            'header'    => 'ID',
            'align'        => 'right',
            'width'        => '50px',
            'index'        => 'giftcard_id',
        ));

    $this->addColumn('giftcard_id', 
        array(
            'header'    => 'Detail',
            'align'        => 'center',
            'width'        => '150px',
            'renderer'  => 'giftcard/adminhtml_giftcard_idrenderer',
            'index'        => 'giftcard_id',
        ));

    $this->addColumn('created_time', array(
        'header'    => 'Creation Time',
        'align'     => 'left',
        'width'     => '120px',
        'type'      => 'date',
        'default'   => '--',
        'index'     => 'created_time',
    ));

    $this->addColumn('update_time', array(
        'header'    => 'Update Time',
        'align'     => 'left',
        'width'     => '120px',
        'type'      => 'date',
        'default'   => '--',
        'index'     => 'update_time',
    ));   

    $this->addColumn('status', array(

        'header'    => 'Status',
        'align'     => 'left',
        'width'     => '80px',
        'index'     => 'status',
        'type'      => 'options',
        'options'   => array(
            1 => 'Active',
            0 => 'Inactive',
        ),
    ));
    $this->addColumn('action',
            array(
                'header'    => Mage::helper('giftcard')->__('Action'),
                'width'     => '50px',
                'type'      => 'action',
                'getter'     => 'getId',
                'actions'   => array(
                    array(
                        'caption' => Mage::helper('giftcard')->__('Delete'),
                        'url'     => array('base'=>'*/*/delete'),
                        'field'   => 'id'
                    )
                ),
                'filter'    => false,
                'sortable'  => false,
                'is_system' => true,
    ));

    return parent::_prepareColumns();
} 
```

在giftcard/adminhtml_giftcard_idrenderer 我使用了以下代码

```
class Troy_Giftcard_Block_Adminhtml_Giftcard_Idrenderer extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Abstract
{
    public function render(Varien_Object $row)
    {
        $value =  $row->getData($this->getColumn()->getIndex());
        $html = 'testing-'.$value .'-testing';
        return $html;        

    }
} 
```

当我使用

```
$this->addColumn('giftcard_id', 
            array(
                'header'    => 'Detail',
                'align'        => 'center',
                'width'        => '150px',
                'renderer'  => 'giftcard/adminhtml_giftcard_idrenderer',
                'index'        => 'giftcard_id',
            )); 
```

任何人都可以帮助我如何解决它

提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T11:55:37.293

可能`renderer class`没有找到。尝试

> 'renderer' => 'troy_giftcard/adminhtml_giftcard_idrenderer',

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T11:44:49.990

这是由于 Magento 为渲染器类生成异常作为它的无效块。

例如：`'renderer' => 'Custom_Sales_Block_Adminhtml_Report_Sales_Grid_Column_Renderer_Status'` 由于某些路径不匹配或未找到布局问题，上述类的平均值是无效块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-02T21:36:05.970

我的问题出在自定义列渲染器中。

我允许在“描述”属性中使用 HTML 标记。这很好，但我添加了一个使用截断的“描述”值的列。这会打开一个 HTML 元素标记，但会截断结束标记。从而破坏了我的目录产品网格。

我在 AdminHtml 目录产品网格中看到的 JavaScript 错误是：

```
productGridJsObject not defined 
```

我在启用/禁用我的模块时看到的 PHP 错误是：

```
Fatal error: Call to a member function setColumn() on a non-object in /home/www-data/magento/app/code/core/Mage/Adminhtml/Block/Widget/Grid/Column.php on line 291 
```

**分辨率：** 在我的自定义渲染器中；用 PHP htmlentities() 处理我截断的“描述”值，因此开始标记不会被视为 DOM 对象。

# c# - 如何备份和恢复到 SQL Server 数据库

> ID：15918887
> 
> 赞同：0
> 
> 时间：2013-04-10T06:51:31.980
> 
> 标签：c#, sql-server

我无法使用 C# 代码备份和还原到 SQL Server。

我的客户如何备份和恢复到他 PC 上的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:55:50.673

使用 SMO 以编程方式备份​​和还原 SQL Server 数据库，检查[**此**](http://www.mssqltips.com/sqlservertip/1849/backup-and-restore-sql-server-databases-programmatically-with-smo/)

你可以做

1.  完整备份
2.  差异备份
3.  事务日志备份
4.  压缩备份
5.  完全或差异恢复
6.  事务日志恢复
7.  数据库还原到新位置

*但这种方法的缺点是需要在客户端系统上安装 SQL Management Studio。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:59:28.213

转到 Sql Server Management Studio 选择您的服务器，提供身份验证详细信息并连接到您的服务器数据库。

右键单击数据库，生成数据库脚本

保存。

从 Studio 中注销，然后重新登录到您的客户端计算机身份验证详细信息并运行该脚本。

数据库也将在您的客户端计算机上生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:55:29.553

您不能在客户端计算机上制作或恢复数据库备份，除非它与服务器位于同一本地网络中，以便服务器可以访问客户端计算机上的磁盘。

通常，您会在服务器上制作和恢复备份，然后上传/下载到客户端计算机。

# eclipse - 如何使用 GDB 调试器配置 Eclipse CDT

> ID：15918888
> 
> 赞同：2
> 
> 时间：2013-04-10T06:51:32.727
> 
> 标签：eclipse, configuration, gdb, eclipse-cdt

我对 Eclipse CDT 和 GDB 进行了一些查询，但我越来越困惑。我是 GDB 和 eclipse 的新手。

我的问题如下：

我有由 Cygwin 生成的 test.exe 文件和一组 make 文件等。我可以使用目录中的命令 gdb ./Test.exe 执行调试。这种调试非常稀疏。

我了解到 eclipse 可以与 Gdb 调试器交互并提供很好的 GUI 和调试工具。

如果有人能展示如何在 eclipse 中加载这个 test.exe 并运行代码，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:35:14.133

在 Eclipse 中切换到 c++ 透视图。

在菜单中选择运行 -> 调试配置。选择 C/C++ 应用程序并单击“新启动配置”图标。单击浏览按钮以找到您的可执行文件，应用配置并单击“调试”按钮。

如果您使用 -g3 （或类似的）编译，这应该会启动您的应用程序并找到源代码。确保您还使用了 -O0。（顺便说一句：我用 mingw 试过这个，而不是 cygwin）。

您可以将 Makefile 项目导入 Eclipse/CDT 并使用 Eclipse 进行开发。

# php - php regex - 在字符串的开头和结尾删除 \r\n\r\n

> ID：15918891
> 
> 赞同：1
> 
> 时间：2013-04-10T06:51:47.953
> 
> 标签：php, regex, preg-replace, line-breaks, carriage-return

**如果存在，我需要`\r\n\r\n`在字符串的开头和/或结尾删除。**

我的问题是我无法使用下面的代码实现我的目标。

```
//if exists, remove \r\n\r\n at the very beginning
$str = preg_replace('/^(\r\n\r\n)/', '', $str);

//if exists, remove \r\n\r\n at the very end
$str = preg_replace('/$(\r\n\r\n)/', '', $str); 
```

也许我的 html 输出的源视图可以给你一些线索。我不知道原因，但`<br />`标签不是并排的。他们定位为一个在另一个之下。

```
<br />
<br />
some text
...
...
some text<br />
<br /> 
```

同样在下面，我分享了我的整个字符串操作代码。我有问题的 2 行代码是下面代码的一部分。（除上面2行代码外的其他部分效果很好）

```
function convert_str ($str)
{
    // remove excess whitespace
    // looks for a one or more spaces and replaces them all with a single space.
    $str = preg_replace('/ +/', ' ', $str);
    // check for instances of more than two line breaks in a row
    // and then change them to a total of two line breaks
    $str = preg_replace('/(?:(?:\r\n|\r|\n)\s*){2}/s', "\r\n\r\n", $str);
    //if exists, remove \r\n\r\n at the very beginning
    $str = preg_replace('/^(\r\n\r\n)/', '', $str);

    //if exists, remove \r\n\r\n at the very end
    $str = preg_replace('/$(\r\n\r\n)/', '', $str);

    //if exists, remove 1 space character just before any  \r\n
    $str = str_replace(" \r\n", "\r\n", $str);
    //if exists, remove 1 space character just after any \r\n
    $str = str_replace("\r\n ", "\r\n", $str);  
    // if exists; remove 1 space character just before punctuations below:
    // $punc = array('.',',',';',':','...','?','!','-','—','/','\\','“','”','‘','’','"','\'','(',')','[',']','’','{','}','*','&','#','^','<','>','|');
    $punc = array(' .',' ,',' ;',' :',' ...',' ?',' !',' -',' —',' /',' \\',' “',' ”',' ‘',' ’',' "',' \'',' (',' )',' [',' ]',' ’',' {',' }',' *',' &',' #',' ^',' <',' >',' |');
    $replace = array('.',',',';',':','...','?','!','-','—','/','\\','“','”','‘','’','"','\'','(',')','[',']','’','{','}','*','&','#','^','<','>','|');
    $str = str_replace($punc,$replace,$str);
    return $str;
} 
```

你能纠正我吗？

谢谢

BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:56:21.383

您将需要使用[trim()](http://php.net/manual/en/function.trim.php)字符串函数来处理此问题。

> trim — 从字符串的开头和结尾去除空格（或其他字符）

**例子：**

```
$str = trim($str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:56:03.710

尝试更换

```
//if exists, remove \r\n\r\n at the very end
$str = preg_replace('/$(\r\n\r\n)/', '', $str); 
```

经过

```
//if exists, remove \r\n\r\n at the very end
$str = preg_replace('/(\r\n\r\n)$/', '', $str); 
```

您也可以尝试使用[Trim 功能](http://php.net/manual/fr/function.trim.php)（例如**string trim ( string $str [, string $charlist = " \t\n\r\0\x0B" ] )**）

# c# - 事件处理程序没有被取消订阅

> ID：15918895
> 
> 赞同：0
> 
> 时间：2013-04-10T06:52:00.237
> 
> 标签：c#, silverlight, events, delegates

在我的 silverlight 应用程序中，我将一个方法传递给Repository 类`GetListCallBack`中另一个方法的委托参数，该方法`GetEmployees`将该委托作为事件处理程序附加到异步服务调用的已完成事件。

EmpViewModel 类：

```
public class EmpViewModel
{
  private IRepository EMPRepository = null;

  //constructor
  public EmpViewModel
  {
    this.EMPRepository= new Repository();
  }

  public void GetList()
  {
     this.EMPRepository.GetEmployees(xyz, this.GetListCallBack);

  }

  public void GetAnotherList()
  {
     this.EMPRepository.GetEmployees(pqr, this.GetAnotherListCallBack);

  }

  private void GetListCallBack(object sender, GetListCompletedEventArgs args)
  {
        if (args.Error == null)
        {
            this.collection1.Clear();
            this.collection1 = args.Result;
        }
        else
        {
            //do sth
        }
  }

  public void GetAnotherListCallback(object sender, GetListCompletedEventArgs args)
  {
     //do sth with collection1

  }

} 
```

存储库类：

```
public class Repository : IRepository
{

    private readonly ServiceClient _client=null ;

    public Repository()
    {
        _client = new ServiceClient(Binding, Endpoint);
    }

    public void GetEmployees(int xyz, EventHandler<GetListCompletedEventArgs> eventHandler)
    {
        _client.GetListCompleted -= eventHandler;
        _client.GetListCompleted += new EventHandler<GetListCompletedEventArgs>(eventHandler);
        _client.GetListAsync(xyz);
    }
} 
```

现在，当对该方法的调用`GetList()`完成后，如果我`GetAnotherList()`在同一个类中调用另一个方法`EmpViewModel`，那么`GetListCallBack`方法会在被调用之前再次`GetAnotherListCallBack`被调用。

这可能是因为两种方法都订阅了该事件。

如您所见，我已从回调事件中明确取消订阅事件处理程序，但事件处理程序仍在被调用。谁能建议我哪里出错了？

编辑：

当我使用局部变量而不是使用`this.EMPRepository`来调用该`Repository`方法时，它运行良好，因为两个 CallBack 方法都传递给了不同的`Repository`类实例，并且只有附加的 CallBack 方法被触发

```
public class EmpViewModel
{

 public void GetList()
 {
  EMPRepository = new Repository();
  EMPRepository.GetEmployees(xyz, this.GetListCallBack);
 }

public void GetAnotherList()
{
EMPRepository = new Repository();
EMPRepository.GetEmployees(pqr, this.GetAnotherListCallBack);
}  

-------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T15:57:13.543

第一的：

```
_client.GetListCompleted += new EventHandler<GetListCompletedEventArgs>(eventHandler); 
```

（从功能的角度来看）与以下内容相同：

```
_client.GetListCompleted += eventHandler; 
```

现在您立即看到问题所在。你的代码是：

```
_client.GetListCompleted -= eventHandler;
_client.GetListCompleted += eventHandler; 
```

如果在下一行中添加事件处理程序，为什么要删除它。

我猜你想删除旧的事件处理程序并添加一个新的。所以你的函数应该得到一个委托给旧的事件处理程序来删除。像这样的东西：

```
public void GetEmployees(int xyz, EventHandler<GetListCompletedEventArgs> oldEventHandler, EventHandler<GetListCompletedEventArgs> newEventHandler)
{
    _client.GetListCompleted -= oldEventHandler;
    _client.GetListCompleted += newEventHandler;
    _client.GetListAsync(xyz);
} 
```

但这可能吗？

如果您可以控制`ServiceClient.GetListCompleted`，为什么不删除`event`关键字并分配该委托，例如：

```
public void GetEmployees(int xyz, EventHandler<GetListCompletedEventArgs> eventHandler)
{
    _client.GetListCompleted = eventHandler;
    _client.GetListAsync(xyz);
} 
```

或者...如果每个 GetListASync 只调用一次委托：

```
public void GetEmployees(int xyz, EventHandler<GetListCompletedEventArgs> eventHandler)
{
    _client.GetListCompleted += (sender, args) =>
    {
        eventHandler(sender, e); 
        _client.GetListCompleted -= eventHandler;
    };
    _client.GetListAsync(xyz);
} 
```

# java - While循环代码输出

> ID：15918897
> 
> 赞同：1
> 
> 时间：2013-04-10T06:52:07.557
> 
> 标签：java, while-loop

```
 int x = 13; 
 while(x >= 4) { 
 if (x % 2 == 1) { 
 System.out.println(x); 
 } 

 x = x - 3; 
 } 
```

我知道它的输出，它是 13 和 7，有人愿意解释一下它是如何变成 13 和 7 的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:01:54.920

情况1：

```
---> x = 13;
     while(true) //  13 >= 4
     if(true)    // 13%2 = 1 which is 1==1  is true
     then print x
     reduce x by 3 // now x ==10 
```

案例2：

```
---> x = 10;
     while(true) // 10 > =4
     if(false) // 10 % 2 = 0, 0 == 1 is false
     skip
     reduce x by 3// now x == 7 
```

案例3：

```
---> x =7;
     while(true) // 7 > = 4
     if(true) //7 % 2 ,1==1 is true
     print x;
     reduce x by 3 // x == 4 
```

案例4：

```
---> x =4;
     while(true) // 4 > = 4
     if(false) //4 % 2 ,0==1 is false
     skip
     reduce x by 3 // x == 4 
```

案例5：

```
---> x =1;
     while(false) // 7 > = 4
     skip 
```

operator summary :
`**%** finds remainder` // 如果 RHS 操作数是，则结果未定义`0`
`**>=** greater than or equals`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T06:54:56.910

第一个 x 是 13，是否 >= 然后是 4？是的。进入while循环。是 13%2==1。是的。打印 x（打印 13）。那么 x = x-13，x 变为 10。是 10 >=4 吗？是的。.... 很快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T06:55:08.380

`13 % 2 = 1`因此，您打印`13`. 现在`x = 10`。 `10 % 2 = 0`，所以你不打印出来`10`。现在`x = 7`。 `7 % 2 = 1`，所以你打印 7\. 现在`x = 4`。 `4 % 2 = 0`; 现在`x = 1`，循环停止。

`%`运算符是模运算符。这会在两个数字相除时打印余数。例如`14/3 = 4 remainder 2`，所以`13 % 4 = 2`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T06:55:30.377

你不明白什么？

在第一次迭代中，`x=13`，`13%2=1`所以它打印`13`。秒迭代`x=10`( `x=x-3`)`10%2=0`没有打印任何内容。第三次迭代`x=7`( `10-3`)，`7%2=1`因此打印了 7。

之后， x=4 所以什么都没有打印并`x=1`退出循环。

# opengl - OpenGL 纹理未正确应用

> ID：15918906
> 
> 赞同：0
> 
> 时间：2013-04-10T06:52:34.937
> 
> 标签：opengl

我有一些关于在 OpenGL 中为对象添加颜色和纹理的问题。我有一个小场景。在这个场景中，我有两个盒子。

问题：

1.  假设我想要一个盒子是纯色的，另一个盒子是有纹理的。在我画盒子之前。1 我做`glcolor`并设置我的立方体的颜色。只要我不为下一个立方体绑定纹理，这项工作就很好。当我绑定一个纹理时，我的两个立方体最终都具有相同的纹理。我怎样才能让这个玩得很好？我可以在同一个“场景”中同时使用 glColor 和绑定纹理吗？

2.  似乎纹理不会拉伸以适合盒子的整个侧面。这是因为我弄乱了纹理坐标还是某个地方的设置？

3.  例如，假设我想在一个平面上多次重复纹理。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:58:53.987

**1**您需要先绑定该纹理，绘制立方体，然后用 取消绑定纹理`glBindTexture(..., 0)`，然后绘制其他立方体

还要注意将纹理立方体的颜色设置为白色，以便您看到立方体的所有颜色。

**2**您可能没有正确设置纹理坐标，还请注意您需要正确发送多边形

*例子*

```
glBegin(GL_TRIANGLES);
<texture coordinates for point 1 of polygon 1>
<coordinates for point 1 of polygon 1>

<texture coordinates for point 2 of polygon 1>
<coordinates for point 2 of polygon 1>

<texture coordinates for point 3 of polygon 1>
<coordinates for point 3 of polygon 1>

<texture coordinates for point 1 of polygon 2>
<coordinates for point 1 of polygon 2>
... 
```

**3**只需将纹理坐标设置为大于 1.0 的值，并将纹理模式设置为 repreating

# wordpress - 如何在 wordpress 的页面中设置 .html 扩展名？

> ID：15918909
> 
> 赞同：0
> 
> 时间：2013-04-10T06:52:44.533
> 
> 标签：wordpress, permalinks

我遇到了 Wordpress 的永久链接结构的问题，它有一个设置的自定义结构：%postname%。我想将页面显示为 page.html...为此，我在页面插件上使用了 html。它在本地服务器上工作，但在实时服务器上不工作。有任何想法吗？

# java - 如何获取数据库表的详细信息

> ID：15918912
> 
> 赞同：-3
> 
> 时间：2013-04-10T06:52:48.790
> 
> 标签：java

如何将 derby 数据库表的详细信息提取到 Java 程序中。例如没有。特定表中的列。我尝试了数据库元数据，但没有用。请帮我？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:58:37.853

尝试

```
 ResultSet rs = stmt.executeQuery("select * from t1 where 1<>1");
    ResultSetMetaData md = rs.getMetaData();
    for(int i = 1; i <= md.getColumnCount(); i++) {
        md.getColumnName(i);
        md.getColumnType(i);
        ... 
```

有关详细信息，请参阅 ResultSetMetaData API

# asp.net - “如何在 ASP.NET 中检测会话超时并重定向到登录页面”

> ID：15918920
> 
> 赞同：0
> 
> 时间：2013-04-10T06:53:07.797
> 
> 标签：asp.net, asp.net-mvc, c#-4.0

我在asp.net中有一个登录页面..如果成功登录，它会在下一页显示登录时间..那么如何编写一个通用函数来检测会话超时并重定向到login.aspx页面？这样我就可以调用它进入所有其他页面

```
public partial class Login : System.Web.UI.Page
{
MainClass obj = new MainClass();

protected void bt_login_Click(object sender, EventArgs e)
{
    string s_name;

    SqlCommand cmd = new SqlCommand("select staff_id,staff_name from staff_details where staff_id='" + tb_loginid.Text + "' ", con);
    con.Open();

    SqlDataReader dr = cmd.ExecuteReader();
    if (dr.HasRows == true)
    {
        if (tb_password.Text == "ABCD" )
        {
            dr.Read();

            string id = dr[0].ToString();    
            s_name = dr[1].ToString();
            Session["staffname"] = s_name;
            Session["staffid"] = tb_loginid;

            String last_interaction_time = DateTime.Now.ToShortTimeString();
            Session["lasttime"] = last_interaction_time;
            Response.Redirect("Successfully_loggedin.aspx");
        }
    }
        else
        {  ScriptManager.RegisterStartupScript(this, this.GetType(), "alertmessage", "javascript:alert('Incorrect LoginID or Password!')", true);
            lb_invalid.Visible = true;
            tb_password.Text = "";
        }
}

} 
```

登录页面是

```
public partial class Successfully_logined : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

 string name=(string)Session["staffname"];
 lb_welcome.Text = "Welcome " + name+"!";

 string last_login_time= (string)Session["lasttime"];
 lb_logintime.Text =last_login_time;
} 
```

}

和 web.config 是

```
<sessionState mode="InProc" cookieless="false" timeout="1"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:22:08.207

为此，您有检查条件..您还检查了 Pageload....

```
 if (Session["Username"] != null)
     { 
           // Code here 
     }
     else
     {
         Response.Redirect("login.aspx");
     } 
```

有关更多详细信息... 单击此处... [Session_timeout](https://stackoverflow.com/questions/1205828/set-session-timeout-in-web-config)

# javascript - 在 Windows/iOS/Android 等上移植 Javascript 应用程序

> ID：15918927
> 
> 赞同：0
> 
> 时间：2013-04-10T06:53:23.960
> 
> 标签：javascript, android, ios, windows

我开发了一个小型 JavaScript 游戏，我想将它扩展到 webbrowser 之外，提供桌面和移动版本。重用现有 JavaScript 代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:37:17.437

我的答案是使用Phonegap。请参阅[PhoneGap 文档](http://docs.phonegap.com/en/2.6.0/index.html)。它支持[移动平台](http://phonegap.com/about/feature/)。

# python - 使用 python 代码使用本地图像的 Google 图片搜索

> ID：15918930
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:53:32.100
> 
> 标签：python, google-image-search

我使用本地图片对 Google 图片搜索进行了大量搜索，但没有找到任何准确的答案。比如上传照片到谷歌服务器时我们必须传递的参数是什么。所以任何人都知道我如何使用谷歌图像搜索来搜索存储在我的硬盘中但使用 python 编程的本地图像。告诉我是否有可用的库或 API。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:07:30.263

这看起来像这个问题的重复：

[通过图像 API 进行谷歌搜索？](https://stackoverflow.com/questions/10141800/google-search-by-image-api)

* * *

Google Image API 已弃用，但正如回答者指出的那样，还有[tinyeye 之](http://www.tineye.com/)类的替代方案。

# javascript - 音量关闭在 html5 视频 ipad 2 中不起作用

> ID：15918931
> 
> 赞同：5
> 
> 时间：2013-04-10T06:53:37.587
> 
> 标签：javascript, html, ipad, html5-video

音量关闭在 html5 视频 ipad 2 中不起作用。

```
player = document.getElementById(element_id);
if (player.muted){
    player.muted = false;
    player.volume = 1;
    //player.volume(1);
}else{
    player.muted = true;
    player.volume = 0;
    //player.volume(0);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T11:51:15.610

恐怕 iOS 不允许使用 Javascript 更改音量。来自 Apple 的[文档](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW1)（重点是我的）：

> 在桌面上，您可以设置和读取一个或元素的音量属性。这允许您相对于计算机的当前音量设置来设置元素的音量。值 1 以正常级别播放声音。值为 0 会使音频静音。0 到 1 之间的值会衰减音频。
> 
> 这种音量调整可能很有用，因为它允许用户将游戏静音，例如，同时仍在计算机上听音乐。
> 
> **在 iOS 设备上，音频电平始终在用户的物理控制之下。音量属性在 JavaScript 中不可设置。读取 volume 属性总是返回 1。**

没有提及该`muted`属性，但实验表明它也无法更改：http: [//jsbin.com/anikab/1/](http://jsbin.com/anikab/1/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-11-28T11:26:30.943

通过执行以下操作，我已经能够实现这样的目标：

*   要静音，请删除整个元素。如果您使用的是 jquery，则可以轻松完成。

    $('#audio-elem').remove();

*   要取消静音，只需将其重新添加！

    $('body').append('');

我确实发现了这种方法的两个问题：

*   iPad 不缓存音频，因此在重新添加时需要重新加载。这意味着在音频再次开始播放之前会有延迟。
*   当重新加载时，音频将从头开始播放，即 00:00。

希望能帮助到你！

# php - 在 php 中处理简单标记到 html 转换器的更好方法

> ID：15918933
> 
> 赞同：0
> 
> 时间：2013-04-10T06:53:40.177
> 
> 标签：php, regex, preg-replace, preg-match-all

是的，我知道已经有类/包/系统可以为我做这件事，但是我有一些要求和设计选择使我无法使用它们。因此，鉴于我已经决定实现自己的简单标记，是否有比我目前正在做的更好的方法来处理标题？

```
// Basic markup, based on markdown
public static function MarkupToHtml($text) {
    $text = Util::cleanup($text);
    $text = preg_replace('/^[ ]+$/m', '', $text);

    // Add a newline after headers
    // so paragraphs work properly. Should figure out regex so it doesn't
    // add an extra \n if its not needed
    $text = preg_replace('{(^|\n)([=]+)(.*?)(\n)}', "$0\n", $text);

    // Paragraphs
    // Ignore header lines
    $text = preg_replace('{(\n\n|^)([^=])(.|\n)*?(?=\n\n|$)}', '<p>$0</p>', $text);

    // Headers
    // This works, but is there a cleaner way to go about it
    preg_match_all ("/(^|\n)([=]+)(.*?)(\n)/", $text, $matches, PREG_SET_ORDER);
    foreach ($matches as $val) {
        $num = intval(strlen($val[2])) + 2;
        if ($num > 5) {
            $num = 5;
        }
        $text = str_replace($val[0], "<h" . $num . ">" . $val[3] . "</h" . $num .">", $text);
    }

    // Bold
    $text = preg_replace('{([*])(.*?)([*])}', '<strong>$2</strong>', $text);

    // Italic
    $text = preg_replace('{([_])(.*?)([_])}', '<em>$2</em>', $text);

    // mono
    $text = preg_replace('{([`])(.*?)([`])}', "<span style='font-family:monospace;'>$2</span>", $text);

    return $text;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:51:49.467

使用 preg_match_callback：

```
$line = preg_replace_callback(
        '/(^|\n)([=]+)(.*?)(\n)/',
        create_function(
            '$matches',
            '$num = min(intval(strlen($matches[2])) + 2,5);' .
            'return "<h" . $num . ">" . $matches[3] . "</h" . $num .">";'
        ),
        $line
    ); 
```

# objective-c - 如何从表视图中的数组中获取 pi_image

> ID：15918936
> 
> 赞同：0
> 
> 时间：2013-04-10T06:53:43.687
> 
> 标签：objective-c

```
(
        {
        property =         {
            "p_address" = sdfsdf;
            "p_asking_price" = "50000.00";
            "p_category_type" = 1;
            "p_created" = "0000-00-00 00:00:00";
            "p_description" = sdfsdf;
            "p_id" = 2;
            "p_is_new_property" = 1;
            "p_modified" = "2013-04-08 15:40:25";
            "p_no_of_bedroom" = 1;
            "p_no_of_otherroom" = 1;
            "p_no_of_wc" = 2;
            "p_title" = sadf;
            "p_type" = demo;
        };
        "property_images" =         (
        );
        "property_local_information" =         (
                        {
                "li_label" = "Nearby Transport";
                "li_order" = 1;
                "pli_distance" = "";
                "pli_logo" = "";
                "pli_title" = "";
            }
        );
        "property_sale_history" =         (
                        {
                "psh_history" = sdsdfsd;
            },
                        {
                "psh_history" = sdfdfds;
            }
        );
        "property_videos" =         (
        );
    },
        {
        property =         {
            "p_address" = dfgsdfg;
            "p_asking_price" = "44222.00";
            "p_category_type" = "";
            "p_created" = "0000-00-00 00:00:00";
            "p_description" = "Updated by a staff meber (demo2@gmail.com)";
            "p_id" = 3;
            "p_is_new_property" = 1;
            "p_modified" = "2013-04-09 03:05:09";
            "p_no_of_bedroom" = 0;
            "p_no_of_otherroom" = 0;
            "p_no_of_wc" = 0;
            "p_title" = "Test Update";
            "p_type" = sdfgsdfgsdg;
        };
        "property_images" =         (
                        {
                "pi_image" = "prop_img_1594785781_3.png";
            }
        );
        "property_local_information" =         (
                        {
                "li_label" = "Nearby College";
                "li_order" = 4;
                "pli_distance" = utyutyu;
                "pli_logo" = "";
                "pli_title" = tyutyu;
            }
        );
        "property_sale_history" =         (
                        {
                "psh_history" = testing;
            },
                        {
                "psh_history" = tyutyutut;
            }
        );
        "property_videos" =         (
                        {
                "pv_video" = "prop_vid_730342365_3.flv";
            }
        );
    }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:58:52.377

如果您使用 json 概念，请尝试此操作

```
NSString *urlString = [NSString stringWithFormat:"your url link"];     
NSURL *url = [NSURL URLWithString:urlString];
NSData *data = [NSData dataWithContentsOfURL:url];
NSError *error;
NSMutableArray *json = (NSMutableArray*)[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
NSMutableArray *piimage=[json valueForKey:@"pi_image"];
NSLog(@"%@",piimage); 
```

# performance - Silverlight 数据网格性能 - ScrollToPercent

> ID：15918937
> 
> 赞同：2
> 
> 时间：2013-04-10T06:53:45.287
> 
> 标签：performance, datagrid, silverlight-4.0

我在当前正在处理的 Sliverlight 4 应用程序中遇到了与 DataGrid 性能相关的问题。

在我们的应用程序中，我们有一个非常大的 DataGrid，最多 4000 行。

滚动这么大的网格显然非常慢。假设您抓住顶部滚动条中的跟踪器并将鼠标光标拖到底部。跟踪器最终到达底部，但需要几分钟。

它看起来像 Silverlight 想要渲染它通过的所有行。

不过，使用 ScrollToPercent 方法就像一个魅力，所以我想做的是在释放跟踪器时使用 ScrollToPercent。

你跟着？假设我抓住了跟踪器，然后我可以在不改变视图的情况下在滚动条上上下移动它，但是一旦我释放跟踪器，它就会触发 ScrollToPercent。

这有意义吗？这可能吗，或者您有什么建议可以以另一种方式帮助我解决这个问题？

# python - 嵌套列表到列表

> ID：15918939
> 
> 赞同：2
> 
> 时间：2013-04-10T06:53:48.023
> 
> 标签：python, list, nested

我将如何制作一个像这样的清单

```
My_list = [['Item1', 'item2'], ['shark', 'dog', 'cat']] 
```

到如下两个列表：

```
My_list = ['Item1', 'item2']
My_list2 = ['shark', 'dog', 'cat'] 
```

另外，如果我不知道列表中有多少个列表，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:01:04.483

您可以使用序列解包：

```
My_list, My_list2 = My_list 
```

如果`My_list`可以有更多元素，并且您想要执行以下操作：

```
for elem in My_list:
    create_variable('My_listn', elem) 
```

这在一般情况下是不可能的**。**Python 不允许在运行时创建本地变量（至少不可靠）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:01:06.990

假设`My_list`真的意味着看起来像：

```
My_list = [['Item1', 'item2'], ['shark', 'dog', 'cat']] 
```

而且你真的想要你所要求的，你可以做这样的事情：

```
My_list2 = My_list[1]
My_list = My_List[0] 
```

或者，正如其他人所建议的那样，您可以使用列表解包：

```
My_list, My_list2 = My_list 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:01:25.460

```
>>> My_list = [['Item1', 'item2'], ['shark', 'dog', 'cat']]
>>> l1, l2 = My_list
>>> l1
['Item1', 'item2']
>>> l2
['shark', 'dog', 'cat'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T07:02:50.343

```
My_list, My_list2 = My_list[0], My_list[1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T07:05:42.983

```
>>> My_list = ['Item1', 'item2'],['shark', 'dog', 'cat']
>>> My_list
(['Item1', 'item2'], ['shark', 'dog', 'cat'])
>>> len(My_list)
2

>>> My_list[0]
['Item1', 'item2']
>>> My_list[1]
['shark', 'dog', 'cat']

>>> My_list[2]
Traceback (most recent call last):
  File "<pyshell#34>", line 1, in <module>
    My_list[2]
 IndexError: tuple index out of range

>>> My_list, My_list2 = My_list
>>> My_list
['Item1', 'item2']
>>> My_list2
['shark', 'dog', 'cat'] 
```

# android - 在 Facebook 上分享文本和 URL

> ID：15918940
> 
> 赞同：3
> 
> 时间：2013-04-10T06:53:50.500
> 
> 标签：android, facebook, android-facebook

我想分享一条消息，例如“查看图片[http://someUrl.com](http://someUrl.com)从应用程序**ABCapp**共享。用户必须能够选择任何已安装的应用程序来共享。我正在使用以下代码

```
Intent intent = new Intent(android.content.Intent.ACTION_SEND);
        intent.setType("text/plain");
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
        intent.putExtra(Intent.EXTRA_TEXT, shareMsg);
        startActivity(Intent.createChooser(intent,
                getString(R.string.share_using_application))); 
```

它适用于除 facebook 之外的所有其他应用程序。我已经阅读了一些其他建议使用 facebook sdk 的问题。我不太清楚我应该使用 fb sdk 做什么？我希望在单击共享选项时显示应用程序列表，之后如果用户选择 FB，我应该采取不同的方法吗？能否检测到用户的选择？请解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:35:26.227

您需要使用[Facebook Android SDK](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)或[Easy Facebook Android SDK](http://www.easyfacebookandroidsdk.com/guide.asp)进行分享。

# javascript - Breeze.js + Knockout.js 教程

> ID：15918944
> 
> 赞同：1
> 
> 时间：2013-04-10T06:54:01.323
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, breeze

我是新来的微风。我已经使用敲除创建了一种电子表格类型的应用程序，现在我正在尝试向其中添加微风.js 功能。

任何人都可以为微风推荐任何好的样品吗

我已经浏览了现场可用的待办事项样本和现场样本。

我正在使用淘汰赛映射。`$.getJSON( "Data.json")`我想要从淘汰赛获得的地图数据。有什么方法可以通过微风.js 做到这一点（目前我正在使用敲除映射插件）

数据.json 文件

```
{
   "info":[
      {
         "Name":"Noob Here1",
         "Department":"Language",
         "Sex":"Male",
         "Basic_Salary":"175",
         "ESI":"58",
         "Employee_PF":"60.50",
         "Bonus":"2.60"
      },
      {
         "Name":"Noob Here2",
         "Department":"Employee_PF",
         "Sex":"Female",
         "Basic_Salary":"10.5",
         "ESI":"4.0",
         "Employee_PF":"20",
         "Bonus":"0.5"
      }
   ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:36:36.150

如果您使用的是 MVC，那么 todo zephyr 项目应该可以帮助您入门（尽管您可能已经看过它）： [http ://www.asp.net/single-page-application/overview/templates/breezeknockout-template](http://www.asp.net/single-page-application/overview/templates/breezeknockout-template)

如果您使用的是 Web 表单，那么这可能会有所帮助： [http ://chrisjakubowicz.wordpress.com/2013/04/08/breeze-with-web-forms-asp-net/](http://chrisjakubowicz.wordpress.com/2013/04/08/breeze-with-web-forms-asp-net/)

# android - 如何在电子邮件中发送带有 html 表格输出的电子邮件

> ID：15918954
> 
> 赞同：2
> 
> 时间：2013-04-10T06:54:28.033
> 
> 标签：android, debugging, whitespace, html-table, html-email

我正在研究 ArrayList，我想发送带有 arraylist 内容的 html 格式的电子邮件类型，我正在尝试在 BufferedWriter Like 中编写数组内容。

```
mOrderList = db.getOrderList();
    // getting all arrayList content
     for (int i = 0; i < mOrderList.size(); i++) {
     no = mOrderList.get(i).getId();
     itemName = mOrderList.get(i).getOrderItemName();
     unit = mOrderList.get(i).getOrderUnit();
     qty = mOrderList.get(i).getOrderQTY();
     rate = mOrderList.get(i).getOrderRate();
     amt = mOrderList.get(i).getOrderAmount();
     try {
         mbufferWriter =new BufferedWriter(new FileWriter("/data/data/com.sample.category/abc.txt"));
     mbufferWriter.write("<html><h4>Customer Order List</h4>" + "<body> <table>"
                + "<tr><th>Item No</th>" + "<th>Item Name</th>"
                + "<th>Unit</th>" + "<th>QTY</th>" + "<th>Item Rate</th>"
                + "<th>Amount</th></tr>");
     mbufferWriter.append("<tr><td>" +no+"</td>");
     mbufferWriter.append("<td>"+itemName+ "<td>");
     mbufferWriter.append("<td>"+unit+ "<td>");
     mbufferWriter.append("<td>"+qty+ "<td>");
     mbufferWriter.append("<td>"+rate+ "<td>");
     mbufferWriter.append("<td>"+amt+ "<td></tr>");
     mbufferWriter.append("</body></table></html>");
     mbufferWriter.close();

     } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

     }//for 
```

并尝试发送这样的电子邮件，但它给出了错误......

```
Intent i = new Intent(Intent.ACTION_SEND);
                i.setType("message/rfc822");
                i.putExtra(Intent.EXTRA_EMAIL,
                        new String[] { "abc@gmail.com" });
                i.putExtra(Intent.EXTRA_SUBJECT, "sample email sending");

                i.putExtra(Intent.EXTRA_TEXT,Html.toHtml((Spanned) mbufferWriter));

                try {
                    startActivity(Intent.createChooser(i, "Send mail..."));
                    // startActivity(i);
                } catch (android.content.ActivityNotFoundException ex) {
                    Toast.makeText(EmailActivity.this,
                            "There are no email clients installed.",
                            Toast.LENGTH_SHORT).show();
                } 
```

谁能帮我解决这个问题..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-08T16:33:38.830

`Html.toHtml`不支持`<table>`。它只支持基本标签，如`<b><u><i>`...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-05T02:39:03.800

使用`pre`标签创建表：

```
 mbufferWriter.write("<html><h4>Customer Order List</h4>" + "<body>" + 
        "<pre> " +
            "  Item No    Item Name    Unit     QTY   Item Rate     Amount" +
        "</pre>"); 
```

# c++ - C 预处理器守卫？

> ID：15918955
> 
> 赞同：1
> 
> 时间：2013-04-10T06:54:31.627
> 
> 标签：c++, c, c-preprocessor, guard

我正在开发一个`C`项目，并尝试使用可在 C++ 中使用的预处理器防护：

```
#ifndef CONFIG_H
#define CONFIG_H

... exciting stuff in C ....

#endif 
```

在我的源代码中包含这个似乎在 Visual Studio 中没有效果，因为当我在多个文件中包含给定文件时，例如`Config.h`，编译器会给我以下错误：

```
1>main.obj : error LNK2005: _OPCodes already defined in lib.obj
1>main.obj : error LNK2005: _OPTotal already defined in lib.obj
1>main.obj : error LNK2005: _RegCodes already defined in lib.obj
1>main.obj : error LNK2005: _RegTotal already defined in lib.obj
1>main.obj : error LNK2005: _UDSTotal already defined in lib.obj 
```

谁能给我任何指示（没有双关语），好吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T07:14:14.787

守卫将防止在编译单元中定义两次。它们不会阻止在不同的编译单元中定义相同的东西。并且链接器消息表明这是发生`_OPCodes`的情况，例如在`lib`和 中定义`main`。

通常，头文件应该只有函数和全局变量的声明，相应的定义将在源文件之一中提供。

（例如，请参阅[定义和声明之间有什么区别？](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)了解更多信息）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T06:55:25.230

编辑：这是基于原始帖子，其中有一个错字。显然，这不是 OP 的真正问题。

你给你的守卫起了两个不同的名字。他们必须匹配。

```
#ifndef CONFIG_H
#define CONFIG_H  // not CONFIG_G! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T06:59:13.513

```
#ifndef CONFIG_H
#define CONFIG_G

... exciting stuff in C ....

#endif 
```

这是一个错字，因为你得到“已经定义的错误”

在您的头文件中，您定义的是 CONFIG_G 而不是 CONFIG_H ，因此从下一个源文件中 #ifndef CONFIG_H 为真，因此它再次包含相同的内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:24:33.173

如果您重命名了任何文件，则应将它们从解决方案中删除并重新添加。有时 Visual Studio 对此有点奇怪，当它们留在里面时会导致链接器错误。

确保进行重建。

您也可能不小心包含了`.cpp`文件而不是`.h`文件。仔细检查所有包括以防万一。

# sql - 如何在postgresql中检查日期

> ID：15918957
> 
> 赞同：2
> 
> 时间：2013-04-10T06:54:45.200
> 
> 标签：sql, postgresql, postgresql-9.1

我的表名是`tbl1`。文件是`id`, `name`, `txdate`.

```
| ID | NAME    | TXDATE    |
| 1  | RAJ     | 1-1-2013  |
| 2  | RAVI    |           |
| 3  | PRABHU  | 25-3-2013 |
| 4  | SAT     |           | 
```

现在我想使用选择查询来检查`txdate < 2-2-2013`哪些行的 txdate 不为空，并且选择还重新运行哪些行的 txdate 为空。

结果是这样的

```
| ID | NAME    | TXDATE    |
| 1  | RAJ     | 1-1-2013  |
| 2  | RAVI    |           |
| 4  | SAT     |           | 
```

有什么可行的解决方案吗？如果不使用联合，有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:02:44.660

假设`TXDATE`是数据类型，`DATE`那么您可以使用`WHERE "TXDATE" < '2013-2-2' OR "TXDATE" IS NULL`. 就像是：

```
SELECT *
FROM table1
WHERE "TXDATE" < '2013-2-2'
  OR "TXDATE" IS NULL; 
```

看看它的实际效果：

*   [SQL 小提琴演示](http://www.sqlfiddle.com/#!1/4d676/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:23:05.670

我现在不知道您使用的是什么数据库以及是什么数据类型`TXDATE`。

我刚刚在我的 postgreSQL 9.2 上尝试了一个字段“没有时区的时间戳”。

我在表中有三行，例如：

```
 ac_device_name | ac_last_heartbeat_time

----------------+-------------------------

 Nest-Test1     |

 Nest-Test3     |

 Nest-Test2     | 2013-04-10 15:06:18.287 
```

然后使用下面的语句

```
select ac_device_name,ac_last_heartbeat_time 
from at_device 
where ac_last_heartbeat_time<'2013-04-11'; 
```

可以只返回一条记录：

```
 ac_device_name | ac_last_heartbeat_time

----------------+-------------------------

 Nest-Test2     | 2013-04-10 15:06:18.287 
```

我认为您可以尝试以下语句：

```
select * from tbl1 where TXDATE<'2-2-2013' and TXDATE is not NULL 
```

这句话也适用于我的环境。

# php - 常见元素 php html navbar

> ID：15918963
> 
> 赞同：0
> 
> 时间：2013-04-10T06:54:58.543
> 
> 标签：php, html, css, zurb-foundation

我正在尝试为我的网站制作模板。基本上使用php的include函数取出所有常见的东西。

我已经做了一个navigationbar.php 和samplepage.php。导航栏具有样式表等的所有链接。当它们在同一个文件夹中并且我在示例页面中包含 navigationbar.php 时，它工作得很好。

但是，当我将 samplepage.php 移动到子目录（将 navigationbar.php 留在同一文件夹中）并将 navigationbar.php 与菜单链接时，没有格式化。似乎 samplepage 正在从 navigationbar.php 获取内容，但导航栏没有链接到 css 文件。

谁能告诉我在这里做错了什么？我正在使用 xampp 并尝试过使用相对路径和绝对路径-（包括“../navigation.php”和“localhost/folder/navigation.php”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:00:03.257

您的 PHP 文件所在的位置没有直接影响。您必须确保生成的 HTML 具有所有 CSS/JS/img 文件等的正确路径。您可能希望在此处发布您的文件结构并显示调用相关 CSS 文件的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:57:31.423

使您的 css 文件的路径成为绝对路径（即以完整路径开头`/`并指定完整路径）。这将允许它们从任何路径正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:58:33.897

在 PHP 中包含文件时，url 是相对于您要包含的文件的。不是您包含的文件。所以你需要改变你的路径'navigationbar.php'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T06:59:30.913

尝试使用类似的东西来链接到您的页眉/页脚文件：

```
include($_SERVER['DOCUMENT_ROOT'].'/path_to/header.php'); 
```

然后在标题中适当地链接到您的 .js/.css 文件。

# java - 策略设计模式（带参数方法）- JAVA

> ID：15918964
> 
> 赞同：0
> 
> 时间：2013-04-10T06:55:02.800
> 
> 标签：java, design-patterns, strategy-pattern

我正在编写一种算法，该算法适用于一些系列并执行一些操作，例如移位和与它一起。我想用两种不同的数据结构来测试算法：MutableBigInteger 和 BitString (javabdd)，所以我想我会尝试一些聪明的设计模式（因为我不经常这样做），我找到了策略设计图案很有趣。唯一困扰我的是函数AND，它需要计算相同的类型。我用一些代码解释：

论文是我的两个不同的课程：

```
public class MutableBigInteger {

public void shift();
public void and(MutableBigInteger b2){
    // ...
}
}

public class BitString {

public void shift();
public void and(BitString b2){
    // ...
     }
} 
```

我想在创建我的类时进行设计，该设计执行我只是在这些类之间选择的算法。该算法看起来像：

```
while( ... ) {
    bittrain.shift();
    bittrain.and(bittrain2);
} 
```

我的问题是如何使用函数 AND 来实现这一点，因为我自己的每个类都在参数中等待同一个类。我想我会喜欢这个：

```
public interface BitTrain {

public void shift();
public void and(BitTrain b2); 
```

}

并用这个接口扩展我的两个类，但它并没有真正帮助我，因为在 MutableBigInteger 和 BitString 中我将不得不做一个演员，我真的不想要那个（因为速度）。

希望我已经解释得很好，祝你有美好的一天！

尼科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:09:14.927

不要认为这是最干净的方法，但您可以使用泛型：

```
public interface BitTrain<T extends BitTrain<?>> {
    public void shift();
    public void and(T b2);
} 
```

然后实现如下接口：

```
public class MutableBigInteger implements BitTrain<MutableBigInteger> {
    public void shift();
    public void and(MutableBigInteger b2){
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:09:17.607

这对我来说听起来像是过早的优化。您确定`checkcast`字节码会对您的整体性能产生如此大的影响吗？我认为这属于“HotSpot 可以做到这一点”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:20:47.890

我没有完全理解这个问题，但是您是否有机会考虑模板模式

```
public class MyBitOperation<T> {

T b1;

public MyBitOperation(T b) {
    b1= b;
}
public void shift(){

//TODO: DO something
}
public void and(T b2){

    //Do somehting else
} 
```

# .net - 维护没有项目文件的现有 Web 表单应用程序

> ID：15918969
> 
> 赞同：1
> 
> 时间：2013-04-10T06:55:08.727
> 
> 标签：.net, sql-server, visual-studio, webforms

我正在尝试对现有的 .net Web 表单项目进行一些维护。需要重新做所有连接到excel和实现sql server。问题是没有VS项目文件。

使用 ftp 从服务器下载所有文件，并在 VS express 2012 中执行 File => open website。之后，我在 web.config 中添加了一个连接（添加了一些新行以便于阅读）：

```
<add name="Products" connectionString="Data Source=(localdb)\v11.0; Initial 
     Catalog=MyDB; Integrated Security=True; MultipleActiveResultSets=True; 
     AttachDbFilename=D:\sites\mySite\home\App_Data\Products.mdf"
     providerName="System.Data.SqlClient"/> 
```

将该连接字符串复制并粘贴到另一个项目中并打开数据库资源管理器，我可以在其中看到表，因此连接字符串是正确的。

打开使用此连接的 products.aspx 时，出现以下错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

我有以下问题：

1 如何从 Web 表单应用程序中的文件创建工作项目。我还必须维护一些其他站点，但是客户端没有任何项目文件，并且需要很长时间才能让这些站点在本地运行以进行开发和测试。

2 如何解决应用程序无法连接到sql express的问题？我有点希望开放网络不是做到这一点的最佳方式，并且以另一种方式从这些文件创建项目可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:15:34.553

为什么不在 Visual Studio 中创建一个新项目，添加到所需数据库的连接并对其进行测试以确保其正常工作，然后将下载的现有文件导入新创建的 Visual Studio 项目中？

或查看以下两个链接，了解您遇到的错误的常见解决方案

[http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-服务器-microsoft-sql-server-error/](http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/)

和

[解决“建立与 SQL Server 的连接时发生网络相关或特定于实例的错误……”的 7 件事](http://www.sswug.org/articlesection/default.aspx?TargetID=44331)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:38:57.057

**1\. 如何恢复我的项目文件？**

（我假设您熟悉 Web 应用程序项目和网站项目之间的区别，但我会尽量对两者都通用）

如果您的客户以前有一个 Web 应用程序项目 (WAP)，但不再有该项目文件（并且可能还缺少一些源，因为它们在部署之前已编译到 DLL 中），那么您将很难进入一个 Web 应用程序项目。您可以尝试通过对程序集进行逆向工程（或反编译）来恢复源代码，但仅此而已。

如果您使用的是网站项目 (WSP)，则没有项目文件 (.csproj)。您可以执行文件 -> 打开网站，这将从您指定的目录为您创建一个新的网站项目。保存解决方案文件，您就可以开始了。

如果您确实有 WAP 的源文件但只是缺少 .csproj 文件，您可以尝试将网站项目转换为 Web 应用程序项目（请参阅标题为[将网站项目转换为Web 应用程序项目的 MSDN 演练）视觉工作室](http://msdn.microsoft.com/en-us/library/aa983476%28v=vs.100%29.aspx)）。它基本上归结为创建一个新项目并将所有现有文件添加到其中，但还有一些其他步骤也可能有用，因此值得一读。

很可能这对你来说是一个糟糕的情况，但这是一个很好的机会来教育你的客户将他们的资源保存在某个地方的重要性。最终是他们的钱。

**2\. 为什么我的数据库不起作用？**

您可能会遇到这样的错误有几个原因：

*   您正在运行的计算机上可能未安装 LocalDB。例如，如果这在您的本地（开发）机器上有效，但在您部署它时无效，那么这可能是原因。

*   您的站点在 IIS 中运行。LocalDB 不支持开箱即用，但如果您关注[此博客](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx)，它将引导您完成所需的步骤。您还可以切换到 SQL Express 或 SQL Server，它们确实支持 IIS，而无需解决方法。

# ruby-on-rails - 获取 Sprockets::Helpers::RailsHelper::AssetPaths::AssetNotPrecompiledError

> ID：15918970
> 
> 赞同：3
> 
> 时间：2013-04-10T06:55:13.937
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets

我有一个名为 pt_homepage_banner1.png 的图像。

我在生产上运行任务

```
bundle exec rake assets:precompile 
```

它成功地将图像文件放入 public/assets 文件夹并制作并进入 manifest.yml

我仍然有例外 -

```
Sprockets::Helpers::RailsHelper::AssetPaths::AssetNotPrecompiledError

fpt_homepage_banner1.png isn't precompiled 
```

我的 production.rb 设置是

```
 config.serve_static_assets = false

  config.assets.compress = true

  config.assets.compile = false 
```

请回答我所缺少的。如果对问题有任何澄清，请询问

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T11:34:52.357

我也遇到了同样的错误

```
Sprockets::Helpers::RailsHelper::AssetPaths::AssetNotPrecompiledError b-error.png isn't precompiled. 
```

在我的应用程序中，我正在调用此图像，但在我的图像/文件夹中它不存在。所以我添加它并再次预编译它，以便该文件出现在 public/assets 文件夹中。但我仍然得到同样的错误。所以我知道 Rails 有点卡在这个文件上，所以我所做的就是将 b-error.png 更改为 500.png 并使用另一个图像并进行预编译。

```
Now it Works! 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-04-10T07:02:56.923

*在config/environments/production.rb*中设置以下内容

 *```
config.serve_static_assets = true
config.assets.compile = true 
```*

# iphone - 脸书：fberrorhttperror

> ID：15918971
> 
> 赞同：0
> 
> 时间：2013-04-10T06:55:16.430
> 
> 标签：iphone, facebook, facebook-graph-api, xcode4.3

![在此处输入图像描述](https://i.stack.imgur.com/kgC6Z.jpg)

我该如何纠正这个问题？基本上我所做的是我去我的 Facebook 设置并从那里删除应用程序。许多用户这样做是为了删除应用程序的访问权限。

当我回到应用程序时，它应该让我回到通常的注册流程并再次通过 Facebook 审批流程。

但是，当我这样做时，这是我看到的错误。由于这些错误，我不再能够使用该应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:17:33.433

你去设置--->隐私---->Facebook。

在那里你允许你的应用访问..

清理您的项目并运行它。您的问题将得到解决。如果不随时问我。

享受..

# android - SmsReceiver 中的 getListAdapter 扩展了 BroadcastReceiver

> ID：15918973
> 
> 赞同：0
> 
> 时间：2013-04-10T06:55:18.297
> 
> 标签：android, broadcastreceiver

我正在尝试使用 BroadcastReceiver 保存在 SmsReceiver 类中接收到的短信。

这是我的代码：

```
ArrayAdapter<Message> adapter = (ArrayAdapter<Message>) getListAdapter();
Message message = null; 
```

但它似乎`getListAdapter()`不是 BroadcastReceiver 的一部分，因此它会引发错误“方法 getListAdapter() 未定义 SmsReceiver 类型”。

有人知道如何在 BroadcastReceiver 中声明上面的代码吗？

# ajax - Rest web 服务方法调用与非 Rest web 服务方法调用或普通方法调用的区别

> ID：15918975
> 
> 赞同：0
> 
> 时间：2013-04-10T06:55:28.813
> 
> 标签：ajax, rest, service, web, call

任何人都可以让我知道 REST Web 服务方法调用和普通方法调用之间的区别。

我开发了一个网站，在其中我使用以下方式调用控制器中的方法，

```
 @RequestMapping("/something.do") 
```

现在我将相同的方法更改为 Web 服务。现在我调用相同的方法

```
@RequestMapping(method=RequestMethod.GET, value="/something.do",headers="Accept=application/json") 
```

我在转换为 Web 服务之前和之后在 AJAX 调用中使用的 URL 是“something.do”。一切正常。

我的问题是，如果它是 Rest web 服务，那么我的 URL 应该类似于 `locahost/ProjectDisplayName/something.do`. 但即使我`something.do`在 URL 中进行 ajax 调用，它也能正常工作。如果这是正确的，它们之间有什么区别？

或者请纠正我哪里错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:17:37.210

查看何时进行休息呼叫，并使用控制器拦截它。然后您可以随调用发送不同的参数。

您可以在调用之前格式化您的 url，`restTemplate.executeService(Object ... obj)` 以便它映射到下面的方法。

```
eg.
<code>
 @RequestMapping(value = "/something/{id}", method = RequestMethod.GET)
    @ResponseStatus(HttpStatus.OK)
public @ResponseBody
    testJsonMessage getDataById(
            @PathVariable("id") String id) {
}
</code> 
```

# python - 如何在 Django 中使用单独的超类 dispatch() 方法在两个 URL 前缀中具有相同的 CBV 类层次结构

> ID：15918982
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:55:36.497
> 
> 标签：python, django, design-patterns, django-urls, django-class-based-views

我有一个（CBV）超类（继承自 Django`View`和一个 mixin）和多个子类。

我需要在所有子类中实现完全相同的功能，但实际的父类将完全不同，除了将继承自 Django 的`View`.

所以实际上我需要通过以下方式获得相同的子类功能：

1.  不同的 URL（或实际上不同的 URL*前缀*和相同的 URL 集）
2.  不同的`dispatch()`方法（所有子类通用，但两组不同）

这样做最明智的方法是什么？

**编辑**：实际上，我想我可以通过简单的方式来解决这个问题

更改`dispatch()`以便它调用`dispatchA()`如果 URL 是`/a/...`并且`dispatchB()`如果 URL 是`/b/.../`

现在的问题是：__`pattern(...)`在 django`urlpatterns()`中使用不同前缀两次是否可以。

对于额外的信用，任何想法如何添加一个 kwarg （如`b = True`）到后一种模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:00:50.293

我知道我会为此感到愤怒，假设是反模式，但我在这些情况下使用多重继承并将共享的“孩子”视为混合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:02:48.383

您可以使用委托模式来处理类的常见方面。

如果可以避免菱形继承模式，则 mixin 类也应该可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:31:44.207

在这种情况下，我认为你不应该做一个子类。

当两个类具有“is-a”关系时，使用子类。例如，'square' 是一个'shape'，所以'square' 可以是'shape' 的子类。

通过子类化，你通常希望子类继承超类的**内部状态描述**。

如果你只是想重用一些函数，我建议你应该做一些重构，并将这些常用函数提取到一个辅助类中。

# entity-framework - EF复合外键获取错误

> ID：15918983
> 
> 赞同：0
> 
> 时间：2013-04-10T06:55:37.157
> 
> 标签：entity-framework

我有以下型号

```
public class DeptContext : DbContext
{
    public DbSet<Department> Departments { get; set; }
    public DbSet<Employee> Employees { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<Employee>().HasKey(t => t.EmpId);
        modelBuilder.Entity<Department>().HasKey(t => t.DeptId);
    }
}

public class Department
{
    public int DeptId { get; set; }
    public int DivNo { get; set; }
    public string DeptName { get; set; }

    public List<Employee> Employees { get; set; }
}

public class Employee
{
    public int EmpId { get; set; }
    public int DivisionNo { get; set; }
    public int DepartmentId { get; set; }

    public Department Department { get; set; }
} 
```

现在我想创建一个复合主键，`DeptId`并`DivNo`作为部门中的键。

我在 OnModelCreating() 中添加了以下代码

```
modelBuilder.Entity<Department>().HasKey(t => new {t.DeptId, t.DivNo});
modelBuilder.Entity<Employee>().HasRequired(t => t.Department)
                      .WithMany(g=>g.Employees)
                      .HasForeignKey(t => new { t.DepartmentId, t.DivisionNo }); 
```

我使用了迁移，以下是我得到的代码（只有 UP()）

```
AlterColumn("dbo.Departments", "DeptId", c => c.Int(nullable: false));
DropPrimaryKey("dbo.Departments", new[] { "DeptId" });
AddPrimaryKey("dbo.Departments", new[] { "DeptId", "DivNo" });
AddForeignKey("dbo.Employees", new[] { "DivisionNo", "DepartmentId" }, "dbo.Departments", new[] { "DeptId", "DivNo" }, cascadeDelete: true);
CreateIndex("dbo.Employees", new[] { "DivisionNo", "DepartmentId" }); 
```

现在的问题是，当我在模型构建器中添加复合外键时，我没有得到现有外键的`DropForeignKey`语句，`up()`得到错误为

> 约束“PK_dbo.Departments”被表“Employees”引用，外键约束“FK_dbo.Employees_dbo.Departments_DepartmentId”。

这是代码问题还是 ef 问题。如果是我的，请让我知道我错在哪里。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:58:51.927

对我来说，这看起来像是迁移中的错误。你的代码不可能把这件事搞砸。

但我强烈的建议是不要使用复合主键，*尤其是*当其中一个字段在业务领域有意义时（哪个`DivisionNo`有？）。复合主键增加的复杂性比你通过引入它们所能获得的要多。它们应该只出现在联结表中。

看起来你应该介绍一个 class/table `Division`。我看不出如何`DivNo`添加到`Department`. 如果您有两个具有相同`DeptId`和不同`DivNo`s 的部门，那会是完全不同的部门吗？

# sql - 如何查看不返回结果的查询的效果？

> ID：15918986
> 
> 赞同：2
> 
> 时间：2013-04-10T06:55:52.957
> 
> 标签：sql, sql-server, sql-server-2008

一些查询不返回结果，但返回一条消息

> 命令成功完成

执行后返回。如何找出查询对数据库的影响（如果有）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:49:49.433

通常，只有 DDL 查询才返回

```
command(s) completed successfully 
```

例如，如果您在 DB 中创建 table/view/sproc/function 或任何其他对象，则只会得到上述语句。

当您执行 DML 时，理想情况下您应该得到

```
(xxx row(s) affected) 
```

即使使用不满足的 WHERE 子句，您仍然会得到

```
(0 row(s) affected) 
```

除非，当然，你首先执行

```
SET NOCOUNT ON 
```

顺便说一句，当它自己执行时会给出

```
command(s) completed successfully 
```

您为什么不在这里发布您的查询，以便我们知道您在说什么？

拉吉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:51:57.090

我认为，如果您想查看值之前和之后的值，您需要自己将它们写入语句中。您还可以执行多个打印语句以查看发生了什么（您必须创建它们。）

提醒一句 - 如果您使用 VB/C# 之类的工具来获取结果，请记住任何选择结果都将从存储的过程中返回。因此，如果您在更改之前进行了选择，进行了更改然后再次进行了选择，则新记录将在第二个表中。

通常，如果我正在对存储过程中的记录进行更新，如果它通常不会返回任何内容，我将返回所有已更改的记录。然后，如果有人调用 proc 但忽略了结果，则不会造成任何伤害。

# clojure - 使用 zip-filter 库或其他库检查 zip/node 中是否存在具有特定值的属性

> ID：15918987
> 
> 赞同：0
> 
> 时间：2013-04-10T06:55:57.660
> 
> 标签：clojure, clojurescript, clojure-contrib

我是 clojure 的新手，想知道如何使用 zip-filter 库检查 zip/节点中是否存在具有特定值的属性。

假设我在名为“myfile.xml”的文件中有以下 xml 内容

```
<node1>
  <node2>
      <specialnode type="blabla">
  </node2>
</node1> 
```

假设我有对应于上面显示的 xml 结构的拉链，

**如果有一个名为“ specialnode** ”的节点具有值为“ **blabla** ”的属性，我该如何测试（真或假）？

任何帮助，将不胜感激。问候。贺拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:24:15.610

试试这个[教程](http://nakkaya.com/2009/12/07/zipping-xml-with-clojure/)。唯一的问题是该库已移至[https://github.com/clojure/data.zip](https://github.com/clojure/data.zip)。

# java - java将特定值返回给shell脚本

> ID：15918995
> 
> 赞同：0
> 
> 时间：2013-04-10T06:56:27.963
> 
> 标签：java, shell

```
public class Test200 {
    public static void main (String args []) {
        System.out.println("David");
        System.out.println("Peter");
} 
```

}

```
output=$(java Test200)
echo $output 
```

我得到了 David Peter 的两个值。假设我只想在 shell 脚本中返回“David”？有什么线索吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:59:23.837

您不返回`"David"`，并且`"Peter"`将它们打印到`STDOUT`. 因此，如果您只想打印其中一个，只需删除另一个`println`调用。

您只能将整数值返回给 shell。这是由[`System.exit(status)`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#exit%28int%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:14:50.597

Try using **`grep`** command so that it will return the expected value alone for multiple values use **`egrep`**

```
output=$(java Test200) 
```

instead use

```
output=$(java Test200 | grep 'David') 
```

But i didnt tested this code, it should work.

or try this

```
java Test200 >> outfile 
```

all the SYSOUT will redirect to outfile base on that you can do te operation with external script.

# sip - 寻找可以使用 h.264 RTSP 流作为视频源的 SIP 客户端

> ID：15918996
> 
> 赞同：1
> 
> 时间：2013-04-10T06:56:28.837
> 
> 标签：sip, voip, h.264, video-conferencing

我们正在寻求将 IP 摄像机（h.264 RTSP 流）与星号 PBX 系统集成，以便在学校进行分布式教育（以便远程教师可以“拨入并进行教学”）。

理想情况下，我们希望能够创建一个 SIP 客户端作为自动应答 pbx 扩展。

我们正在考虑运行一个 *nix 盒子，它可以使用网络视频流作为视频源，混合单独的音频源并呈现 SIP 端点。

我了解[SIP Express 路由器](http://www.iptel.org/ser)可能能够：

“调用一个外部 C 脚本，它可以解析和更改它所使用的客户端的 SIP 标头中的 SDP 信息，并更改它期望从中接收媒体的地址。”

但我认为寻找一种将 h.264 rtsp 流呈现为 /dev/videoX 并使用标准 SIP 客户端的方法可能更容易。

如果有人对研究有任何指示或想法，我将不胜感激:-)

谢谢阅读！

W

ps 那里有声称拥有 SIP 客户端的 IP 摄像机，但我所看到的仅提供 SIP 用于建立双向音频会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T12:16:11.697

我不知道你是否找到了这个问题的正确答案，但也许我可以给你一些关于 VoIP 和 IP 摄像头管理的建议，它会帮助遇到同样问题的任何人。

您的目标（如果我正确理解您的问题）基本上是创建一个电话会议解决方案，它可以接听所有来电并将 IP 摄像机视频附加到所有这些电话。我目前在一家名为 Ozeki 的公司工作 - 我不知道是否有针对您的问题的开源解决方案 - 我将向您展示一个包含 SIP 帐户注册、IP 摄像头连接的示例代码并回答所有问题带有摄像头视频的来电。

所以这里是源代码：

```
public partial class Form1 : Form
{
    private IIPCamera _camera;
    private DrawingImageProvider _imageProvider;
    private MediaConnector _connector;
    private VideoViewerWF _videoViewerWf;
    private ISoftPhone _softphone;
    private IPhoneLine _phoneLine;
    private IPhoneCall _call;
    private PhoneCallAudioSender _audioSender;
    private PhoneCallVideoSender _videoSender;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        _softphone = SoftPhoneFactory.CreateSoftPhone(5000, 10000);
        _softphone.IncomingCall += softphone_IncomingCall;
        _connector = new MediaConnector();
        _videoSender = new PhoneCallVideoSender();
        _audioSender = new PhoneCallAudioSender();
        _imageProvider = new DrawingImageProvider();
        _videoViewerWf = new VideoViewerWF();
        SetVideoViewer();
    }

    private void SetVideoViewer()
    {
        CameraBox.Controls.Add(_videoViewerWf);
        _videoViewerWf.Size = new Size(260, 180);
        _videoViewerWf.BackColor = Color.Black;
        _videoViewerWf.TabStop = false;
        _videoViewerWf.FlipMode = FlipMode.None;
        _videoViewerWf.Location = new Point(35, 30);
        _videoViewerWf.Name = "_videoViewerWf";
    }

    private void Register(bool registrationRequired, string displayName, string userName, string authenticationId, string registerPassword, string domainHost)
    {
        try
        {
            var account = new SIPAccount(registrationRequired, displayName, userName, authenticationId, registerPassword, domainHost);
            _phoneLine = _softphone.CreatePhoneLine(account);
            _phoneLine.RegistrationStateChanged += phoneLine_RegistrationStateChanged;
            _softphone.RegisterPhoneLine(_phoneLine);
        }
        catch (Exception ex)
        {
            label_Phoneline.Text = ex.Message;
        }
    }

    private void phoneLine_RegistrationStateChanged(object sender, RegistrationStateChangedArgs e)
    {
        InvokeGuiThread(() => label_Phoneline.Text = e.State.ToString());
    }

    private void softphone_IncomingCall(object sender, VoIPEventArgs<iphonecall> e)
    {
        if (_camera != null)
        {
            _call = e.Item;
            _call.CallStateChanged += call_CallStateChanged;
            ConnectToCall();
            _call.Answer();
        }
    }

    private void ConnectToCall()
    {
        _videoSender.AttachToCall(_call);
        _audioSender.AttachToCall(_call);
        _connector.Connect(_camera.VideoChannel, _videoSender);
        _connector.Connect(_camera.AudioChannel, _audioSender);
    }

    private void call_CallStateChanged(object sender, CallStateChangedArgs e)
    {
        InvokeGuiThread(() => label_Call.Text = e.State.ToString());

        if (e.State == CallState.Completed)
            if (_call != null)
            {
                _call.CallStateChanged -= call_CallStateChanged;
                _connector.Disconnect(_camera.VideoChannel, _videoSender);
                _connector.Disconnect(_camera.AudioChannel, _audioSender);
            }
    }

    private void button_Connect_Click(object sender, EventArgs e)
    {
        _camera = IPCameraFactory.GetCamera("cameraIPAddress:8080", "admin", "admin");
        _connector.Connect(_camera.VideoChannel, _imageProvider);
        _videoViewerWf.SetImageProvider(_imageProvider);
        _videoViewerWf.Start();
        _camera.Start();
    }

    private void button_SIPRegister_Click(object sender, EventArgs e)
    {
        Register(true, "100", "100", "100", "100", "PBXAddress");
    }

    private void InvokeGuiThread(Action action)
    {
        BeginInvoke(action);
    }
} 
```

和（示例）GUI：

![在此处输入图像描述](https://i.stack.imgur.com/PT2V1.jpg)

如果单击**Connect**按钮，则将调用 IPCameraFactory.GetCamera() 用于使用参数（后台的 RTSP/RTP/HTTP 消息）连接到指定的摄像机。

**注册**按钮调用 Register() 方法将您的 SIP 帐户注册到 PBX。**您可以在状态**标签上查看注册状态。

如果有来电，则会自动接听，并且摄像头视频和音频通道将连接到呼叫。所以来电者会看到和听到你。

**注意**：

大多数 IP 摄像机麦克风的质量都非常差，因此您可以将自己的麦克风连接到通话中。这也很简单。

1.  创建一个麦克风对象：

    麦克风麦克风 = Microphone.GetDefaultDevice();

    如果（麦克风！= null）
    麦克风。开始（）；

2.  如果有来电，则将此麦克风连接到通话：

    _connector.Connect（麦克风，_audioSender）；

就是这样。我希望我能帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:06:35.593

`live555`有一些开源实现[`openRTSP`](http://www.live555.com/openRTSP/)，例如[`playSIP`](http://www.live555.com/playSIP/)可以帮助满足您的要求。